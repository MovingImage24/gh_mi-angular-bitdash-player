/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 30);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Simple DOM manipulation and DOM element event handling modeled after jQuery (as replacement for jQuery).
 *
 * Like jQuery, DOM operates on single elements and lists of elements. For example: creating an element returns a DOM
 * instance with a single element, selecting elements returns a DOM instance with zero, one, or many elements. Similar
 * to jQuery, setters usually affect all elements, while getters operate on only the first element.
 * Also similar to jQuery, most methods (except getters) return the DOM instance facilitating easy chaining of method
 * calls.
 *
 * Built with the help of: http://youmightnotneedjquery.com/
 */
var DOM = (function () {
    function DOM(something, attributes) {
        this.document = document; // Set the global document to the local document field
        if (something instanceof Array) {
            if (something.length > 0 && something[0] instanceof HTMLElement) {
                var elements = something;
                this.elements = elements;
            }
        }
        else if (something instanceof HTMLElement) {
            var element = something;
            this.elements = [element];
        }
        else if (something instanceof Document) {
            // When a document is passed in, we do not do anything with it, but by setting this.elements to null
            // we give the event handling method a means to detect if the events should be registered on the document
            // instead of elements.
            this.elements = null;
        }
        else if (attributes) {
            var tagName = something;
            var element = document.createElement(tagName);
            for (var attributeName in attributes) {
                var attributeValue = attributes[attributeName];
                element.setAttribute(attributeName, attributeValue);
            }
            this.elements = [element];
        }
        else {
            var selector = something;
            this.elements = this.findChildElements(selector);
        }
    }
    Object.defineProperty(DOM.prototype, "length", {
        /**
         * Gets the number of elements that this DOM instance currently holds.
         * @returns {number} the number of elements
         */
        get: function () {
            return this.elements ? this.elements.length : 0;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Gets the HTML elements that this DOM instance currently holds.
     * @returns {HTMLElement[]} the raw HTML elements
     * @deprecated use {@link #get()} instead
     */
    DOM.prototype.getElements = function () {
        return this.get();
    };
    DOM.prototype.get = function (index) {
        if (index === undefined) {
            return this.elements;
        }
        else if (!this.elements || index >= this.elements.length || index < -this.elements.length) {
            return undefined;
        }
        else if (index < 0) {
            return this.elements[this.elements.length - index];
        }
        else {
            return this.elements[index];
        }
    };
    /**
     * A shortcut method for iterating all elements. Shorts this.elements.forEach(...) to this.forEach(...).
     * @param handler the handler to execute an operation on an element
     */
    DOM.prototype.forEach = function (handler) {
        if (!this.elements) {
            return;
        }
        this.elements.forEach(function (element) {
            handler(element);
        });
    };
    DOM.prototype.findChildElementsOfElement = function (element, selector) {
        var childElements = element.querySelectorAll(selector);
        // Convert NodeList to Array
        // https://toddmotto.com/a-comprehensive-dive-into-nodelists-arrays-converting-nodelists-and-understanding-the-dom/
        return [].slice.call(childElements);
    };
    DOM.prototype.findChildElements = function (selector) {
        var _this = this;
        var allChildElements = [];
        if (this.elements) {
            this.forEach(function (element) {
                allChildElements = allChildElements.concat(_this.findChildElementsOfElement(element, selector));
            });
        }
        else {
            return this.findChildElementsOfElement(document, selector);
        }
        return allChildElements;
    };
    /**
     * Finds all child elements of all elements matching the supplied selector.
     * @param selector the selector to match with child elements
     * @returns {DOM} a new DOM instance representing all matched children
     */
    DOM.prototype.find = function (selector) {
        var allChildElements = this.findChildElements(selector);
        return new DOM(allChildElements);
    };
    DOM.prototype.html = function (content) {
        if (arguments.length > 0) {
            return this.setHtml(content);
        }
        else {
            return this.getHtml();
        }
    };
    DOM.prototype.getHtml = function () {
        return this.elements[0].innerHTML;
    };
    DOM.prototype.setHtml = function (content) {
        if (content === undefined || content == null) {
            // Set to empty string to avoid innerHTML getting set to 'undefined' (all browsers) or 'null' (IE9)
            content = '';
        }
        this.forEach(function (element) {
            element.innerHTML = content;
        });
        return this;
    };
    /**
     * Clears the inner HTML of all elements (deletes all children).
     * @returns {DOM}
     */
    DOM.prototype.empty = function () {
        this.forEach(function (element) {
            element.innerHTML = '';
        });
        return this;
    };
    /**
     * Returns the current value of the first form element, e.g. the selected value of a select box or the text if an
     * input field.
     * @returns {string} the value of a form element
     */
    DOM.prototype.val = function () {
        var element = this.elements[0];
        if (element instanceof HTMLSelectElement || element instanceof HTMLInputElement) {
            return element.value;
        }
        else {
            // TODO add support for missing form elements
            throw new Error("val() not supported for " + typeof element);
        }
    };
    DOM.prototype.attr = function (attribute, value) {
        if (arguments.length > 1) {
            return this.setAttr(attribute, value);
        }
        else {
            return this.getAttr(attribute);
        }
    };
    DOM.prototype.getAttr = function (attribute) {
        return this.elements[0].getAttribute(attribute);
    };
    DOM.prototype.setAttr = function (attribute, value) {
        this.forEach(function (element) {
            element.setAttribute(attribute, value);
        });
        return this;
    };
    DOM.prototype.data = function (dataAttribute, value) {
        if (arguments.length > 1) {
            return this.setData(dataAttribute, value);
        }
        else {
            return this.getData(dataAttribute);
        }
    };
    DOM.prototype.getData = function (dataAttribute) {
        return this.elements[0].getAttribute('data-' + dataAttribute);
    };
    DOM.prototype.setData = function (dataAttribute, value) {
        this.forEach(function (element) {
            element.setAttribute('data-' + dataAttribute, value);
        });
        return this;
    };
    /**
     * Appends one or more DOM elements as children to all elements.
     * @param childElements the chrild elements to append
     * @returns {DOM}
     */
    DOM.prototype.append = function () {
        var childElements = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            childElements[_i] = arguments[_i];
        }
        this.forEach(function (element) {
            childElements.forEach(function (childElement) {
                childElement.elements.forEach(function (_, index) {
                    element.appendChild(childElement.elements[index]);
                });
            });
        });
        return this;
    };
    /**
     * Removes all elements from the DOM.
     */
    DOM.prototype.remove = function () {
        this.forEach(function (element) {
            var parent = element.parentNode;
            if (parent) {
                parent.removeChild(element);
            }
        });
    };
    /**
     * Returns the offset of the first element from the document's top left corner.
     * @returns {Offset}
     */
    DOM.prototype.offset = function () {
        var element = this.elements[0];
        var elementRect = element.getBoundingClientRect();
        var htmlRect = document.body.parentElement.getBoundingClientRect();
        // Virtual viewport scroll handling (e.g. pinch zoomed viewports in mobile browsers or desktop Chrome/Edge)
        // 'normal' zooms and virtual viewport zooms (aka layout viewport) result in different
        // element.getBoundingClientRect() results:
        //  - with normal scrolls, the clientRect decreases with an increase in scroll(Top|Left)/page(X|Y)Offset
        //  - with pinch zoom scrolls, the clientRect stays the same while scroll/pageOffset changes
        // This means, that the combination of clientRect + scroll/pageOffset does not work to calculate the offset
        // from the document's upper left origin when pinch zoom is used.
        // To work around this issue, we do not use scroll/pageOffset but get the clientRect of the html element and
        // subtract it from the element's rect, which always results in the offset from the document origin.
        // NOTE: the current way of offset calculation was implemented specifically to track event positions on the
        // seek bar, and it might break compatibility with jQuery's offset() method. If this ever turns out to be a
        // problem, this method should be reverted to the old version and the offset calculation moved to the seek bar.
        return {
            top: elementRect.top - htmlRect.top,
            left: elementRect.left - htmlRect.left,
        };
    };
    /**
     * Returns the width of the first element.
     * @returns {number} the width of the first element
     */
    DOM.prototype.width = function () {
        // TODO check if this is the same as jQuery's width() (probably not)
        return this.elements[0].offsetWidth;
    };
    /**
     * Returns the height of the first element.
     * @returns {number} the height of the first element
     */
    DOM.prototype.height = function () {
        // TODO check if this is the same as jQuery's height() (probably not)
        return this.elements[0].offsetHeight;
    };
    /**
     * Attaches an event handler to one or more events on all elements.
     * @param eventName the event name (or multiple names separated by space) to listen to
     * @param eventHandler the event handler to call when the event fires
     * @returns {DOM}
     */
    DOM.prototype.on = function (eventName, eventHandler) {
        var _this = this;
        var events = eventName.split(' ');
        events.forEach(function (event) {
            if (_this.elements == null) {
                _this.document.addEventListener(event, eventHandler);
            }
            else {
                _this.forEach(function (element) {
                    element.addEventListener(event, eventHandler);
                });
            }
        });
        return this;
    };
    /**
     * Removes an event handler from one or more events on all elements.
     * @param eventName the event name (or multiple names separated by space) to remove the handler from
     * @param eventHandler the event handler to remove
     * @returns {DOM}
     */
    DOM.prototype.off = function (eventName, eventHandler) {
        var _this = this;
        var events = eventName.split(' ');
        events.forEach(function (event) {
            if (_this.elements == null) {
                _this.document.removeEventListener(event, eventHandler);
            }
            else {
                _this.forEach(function (element) {
                    element.removeEventListener(event, eventHandler);
                });
            }
        });
        return this;
    };
    /**
     * Adds the specified class(es) to all elements.
     * @param className the class(es) to add, multiple classes separated by space
     * @returns {DOM}
     */
    DOM.prototype.addClass = function (className) {
        this.forEach(function (element) {
            if (element.classList) {
                element.classList.add(className);
            }
            else {
                element.className += ' ' + className;
            }
        });
        return this;
    };
    /**
     * Removed the specified class(es) from all elements.
     * @param className the class(es) to remove, multiple classes separated by space
     * @returns {DOM}
     */
    DOM.prototype.removeClass = function (className) {
        this.forEach(function (element) {
            if (element.classList) {
                element.classList.remove(className);
            }
            else {
                element.className = element.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
            }
        });
        return this;
    };
    /**
     * Checks if any of the elements has the specified class.
     * @param className the class name to check
     * @returns {boolean} true if one of the elements has the class attached, else if no element has it attached
     */
    DOM.prototype.hasClass = function (className) {
        var hasClass = false;
        this.forEach(function (element) {
            if (element.classList) {
                if (element.classList.contains(className)) {
                    // Since we are inside a handler, we can't just 'return true'. Instead, we save it to a variable
                    // and return it at the end of the function body.
                    hasClass = true;
                }
            }
            else {
                if (new RegExp('(^| )' + className + '( |$)', 'gi').test(element.className)) {
                    // See comment above
                    hasClass = true;
                }
            }
        });
        return hasClass;
    };
    DOM.prototype.css = function (propertyNameOrCollection, value) {
        if (typeof propertyNameOrCollection === 'string') {
            var propertyName = propertyNameOrCollection;
            if (arguments.length === 2) {
                return this.setCss(propertyName, value);
            }
            else {
                return this.getCss(propertyName);
            }
        }
        else {
            var propertyValueCollection = propertyNameOrCollection;
            return this.setCssCollection(propertyValueCollection);
        }
    };
    DOM.prototype.getCss = function (propertyName) {
        return getComputedStyle(this.elements[0])[propertyName];
    };
    DOM.prototype.setCss = function (propertyName, value) {
        this.forEach(function (element) {
            // <any> cast to resolve TS7015: http://stackoverflow.com/a/36627114/370252
            element.style[propertyName] = value;
        });
        return this;
    };
    DOM.prototype.setCssCollection = function (ruleValueCollection) {
        this.forEach(function (element) {
            // http://stackoverflow.com/a/34490573/370252
            Object.assign(element.style, ruleValueCollection);
        });
        return this;
    };
    return DOM;
}());
exports.DOM = DOM;


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(0);
var arrayutils_1 = __webpack_require__(4);
/**
 * A container component that can contain a collection of child components.
 * Components can be added at construction time through the {@link ContainerConfig#components} setting, or later
 * through the {@link Container#addComponent} method. The UIManager automatically takes care of all components, i.e. it
 * initializes and configures them automatically.
 *
 * In the DOM, the container consists of an outer <div> (that can be configured by the config) and an inner wrapper
 * <div> that contains the components. This double-<div>-structure is often required to achieve many advanced effects
 * in CSS and/or JS, e.g. animations and certain formatting with absolute positioning.
 *
 * DOM example:
 * <code>
 *     <div class='ui-container'>
 *         <div class='container-wrapper'>
 *             ... child components ...
 *         </div>
 *     </div>
 * </code>
 */
var Container = (function (_super) {
    __extends(Container, _super);
    function Container(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-container',
            components: [],
        }, _this.config);
        _this.componentsToAdd = [];
        _this.componentsToRemove = [];
        return _this;
    }
    /**
     * Adds a child component to the container.
     * @param component the component to add
     */
    Container.prototype.addComponent = function (component) {
        this.config.components.push(component);
        this.componentsToAdd.push(component);
    };
    /**
     * Removes a child component from the container.
     * @param component the component to remove
     * @returns {boolean} true if the component has been removed, false if it is not contained in this container
     */
    Container.prototype.removeComponent = function (component) {
        if (arrayutils_1.ArrayUtils.remove(this.config.components, component) != null) {
            this.componentsToRemove.push(component);
            return true;
        }
        else {
            return false;
        }
    };
    /**
     * Gets an array of all child components in this container.
     * @returns {Component<ComponentConfig>[]}
     */
    Container.prototype.getComponents = function () {
        return this.config.components;
    };
    /**
     * Removes all child components from the container.
     */
    Container.prototype.removeComponents = function () {
        for (var _i = 0, _a = this.getComponents().slice(); _i < _a.length; _i++) {
            var component = _a[_i];
            this.removeComponent(component);
        }
    };
    /**
     * Updates the DOM of the container with the current components.
     */
    Container.prototype.updateComponents = function () {
        /* We cannot just clear the container to remove all elements and then re-add those that should stay, because
         * IE looses the innerHTML of unattached elements, leading to empty elements within the container (e.g. missing
         * subtitle text in SubtitleLabel).
         * Instead, we keep a list of elements to add and remove, leaving remaining elements alone. By keeping them in
         * the DOM, their content gets preserved in all browsers.
         */
        var component;
        while (component = this.componentsToRemove.shift()) {
            component.getDomElement().remove();
        }
        while (component = this.componentsToAdd.shift()) {
            this.innerContainerElement.append(component.getDomElement());
        }
    };
    Container.prototype.toDomElement = function () {
        // Create the container element (the outer <div>)
        var containerElement = new dom_1.DOM(this.config.tag, {
            'id': this.config.id,
            'class': this.getCssClasses(),
        });
        // Create the inner container element (the inner <div>) that will contain the components
        var innerContainer = new dom_1.DOM(this.config.tag, {
            'class': this.prefixCss('container-wrapper'),
        });
        this.innerContainerElement = innerContainer;
        for (var _i = 0, _a = this.config.components; _i < _a.length; _i++) {
            var initialComponent = _a[_i];
            this.componentsToAdd.push(initialComponent);
        }
        this.updateComponents();
        containerElement.append(innerContainer);
        return containerElement;
    };
    return Container;
}(component_1.Component));
exports.Container = Container;


/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var guid_1 = __webpack_require__(36);
var dom_1 = __webpack_require__(0);
var eventdispatcher_1 = __webpack_require__(3);
/**
 * The base class of the UI framework.
 * Each component must extend this class and optionally the config interface.
 */
var Component = (function () {
    /**
     * Constructs a component with an optionally supplied config. All subclasses must call the constructor of their
     * superclass and then merge their configuration into the component's configuration.
     * @param config the configuration for the component
     */
    function Component(config) {
        if (config === void 0) { config = {}; }
        /**
         * The list of events that this component offers. These events should always be private and only directly
         * accessed from within the implementing component.
         *
         * Because TypeScript does not support private properties with the same name on different class hierarchy levels
         * (i.e. superclass and subclass cannot contain a private property with the same name), the default naming
         * convention for the event list of a component that should be followed by subclasses is the concatenation of the
         * camel-cased class name + 'Events' (e.g. SubClass extends Component => subClassEvents).
         * See {@link #componentEvents} for an example.
         *
         * Event properties should be named in camel case with an 'on' prefix and in the present tense. Async events may
         * have a start event (when the operation starts) in the present tense, and must have an end event (when the
         * operation ends) in the past tense (or present tense in special cases (e.g. onStart/onStarted or onPlay/onPlaying).
         * See {@link #componentEvents#onShow} for an example.
         *
         * Each event should be accompanied with a protected method named by the convention eventName + 'Event'
         * (e.g. onStartEvent), that actually triggers the event by calling {@link EventDispatcher#dispatch dispatch} and
         * passing a reference to the component as first parameter. Components should always trigger their events with these
         * methods. Implementing this pattern gives subclasses means to directly listen to the events by overriding the
         * method (and saving the overhead of passing a handler to the event dispatcher) and more importantly to trigger
         * these events without having access to the private event list.
         * See {@link #onShow} for an example.
         *
         * To provide external code the possibility to listen to this component's events (subscribe, unsubscribe, etc.),
         * each event should also be accompanied by a public getter function with the same name as the event's property,
         * that returns the {@link Event} obtained from the event dispatcher by calling {@link EventDispatcher#getEvent}.
         * See {@link #onShow} for an example.
         *
         * Full example for an event representing an example action in a example component:
         *
         * <code>
         * // Define an example component class with an example event
         * class ExampleComponent extends Component<ComponentConfig> {
           *
           *     private exampleComponentEvents = {
           *         onExampleAction: new EventDispatcher<ExampleComponent, NoArgs>()
           *     }
           *
           *     // constructor and other stuff...
           *
           *     protected onExampleActionEvent() {
           *        this.exampleComponentEvents.onExampleAction.dispatch(this);
           *    }
           *
           *    get onExampleAction(): Event<ExampleComponent, NoArgs> {
           *        return this.exampleComponentEvents.onExampleAction.getEvent();
           *    }
           * }
         *
         * // Create an instance of the component somewhere
         * var exampleComponentInstance = new ExampleComponent();
         *
         * // Subscribe to the example event on the component
         * exampleComponentInstance.onExampleAction.subscribe(function (sender: ExampleComponent) {
           *     console.log('onExampleAction of ' + sender + ' has fired!');
           * });
         * </code>
         */
        this.componentEvents = {
            onShow: new eventdispatcher_1.EventDispatcher(),
            onHide: new eventdispatcher_1.EventDispatcher(),
            onHoverChanged: new eventdispatcher_1.EventDispatcher(),
        };
        // Create the configuration for this component
        this.config = this.mergeConfig(config, {
            tag: 'div',
            id: 'mi-wbc-id-' + guid_1.Guid.next(),
            cssPrefix: 'mi-wbc',
            cssClass: 'ui-component',
            cssClasses: [],
            hidden: false,
        }, {});
    }
    /**
     * Initializes the component, e.g. by applying config settings.
     * This method must not be called from outside the UI framework.
     *
     * This method is automatically called by the {@link UIInstanceManager}. If the component is an inner component of
     * some component, and thus encapsulated abd managed internally and never directly exposed to the UIManager,
     * this method must be called from the managing component's {@link #initialize} method.
     */
    Component.prototype.initialize = function () {
        this.hidden = this.config.hidden;
        // Hide the component at initialization if it is configured to be hidden
        if (this.isHidden()) {
            this.hidden = false; // Set flag to false for the following hide() call to work (hide() checks the flag)
            this.hide();
        }
    };
    /**
     * Configures the component for the supplied Player and UIInstanceManager. This is the place where all the magic
     * happens, where components typically subscribe and react to events (on their DOM element, the Player, or the
     * UIInstanceManager), and basically everything that makes them interactive.
     * This method is called only once, when the UIManager initializes the UI.
     *
     * Subclasses usually overwrite this method to add their own functionality.
     *
     * @param player the player which this component controls
     * @param uimanager the UIInstanceManager that manages this component
     */
    Component.prototype.configure = function (player, uimanager) {
        var _this = this;
        this.onShow.subscribe(function () {
            uimanager.onComponentShow.dispatch(_this);
        });
        this.onHide.subscribe(function () {
            uimanager.onComponentHide.dispatch(_this);
        });
        // Track the hovered state of the element
        this.getDomElement().on('mouseenter', function () {
            _this.onHoverChangedEvent(true);
        });
        this.getDomElement().on('mouseleave', function () {
            _this.onHoverChangedEvent(false);
        });
    };
    /**
     * Releases all resources and dependencies that the component holds. Player, DOM, and UIManager events are
     * automatically removed during release and do not explicitly need to be removed here.
     * This method is called by the UIManager when it releases the UI.
     *
     * Subclasses that need to release resources should override this method and call super.release().
     */
    Component.prototype.release = function () {
        // Nothing to do here, override where necessary
    };
    /**
     * Generate the DOM element for this component.
     *
     * Subclasses usually overwrite this method to extend or replace the DOM element with their own design.
     */
    Component.prototype.toDomElement = function () {
        var element = new dom_1.DOM(this.config.tag, {
            'id': this.config.id,
            'class': this.getCssClasses(),
        });
        return element;
    };
    /**
     * Returns the DOM element of this component. Creates the DOM element if it does not yet exist.
     *
     * Should not be overwritten by subclasses.
     *
     * @returns {DOM}
     */
    Component.prototype.getDomElement = function () {
        if (!this.element) {
            this.element = this.toDomElement();
        }
        return this.element;
    };
    /**
     * Merges a configuration with a default configuration and a base configuration from the superclass.
     *
     * @param config the configuration settings for the components, as usually passed to the constructor
     * @param defaults a default configuration for settings that are not passed with the configuration
     * @param base configuration inherited from a superclass
     * @returns {Config}
     */
    Component.prototype.mergeConfig = function (config, defaults, base) {
        // Extend default config with supplied config
        var merged = Object.assign({}, base, defaults, config);
        // Return the extended config
        return merged;
    };
    /**
     * Helper method that returns a string of all CSS classes of the component.
     *
     * @returns {string}
     */
    Component.prototype.getCssClasses = function () {
        var _this = this;
        // Merge all CSS classes into single array
        var flattenedArray = [this.config.cssClass].concat(this.config.cssClasses);
        // Prefix classes
        flattenedArray = flattenedArray.map(function (css) {
            return _this.prefixCss(css);
        });
        // Join array values into a string
        var flattenedString = flattenedArray.join(' ');
        // Return trimmed string to prevent whitespace at the end from the join operation
        return flattenedString.trim();
    };
    Component.prototype.prefixCss = function (cssClassOrId) {
        return this.config.cssPrefix + '-' + cssClassOrId;
    };
    /**
     * Returns the configuration object of the component.
     * @returns {Config}
     */
    Component.prototype.getConfig = function () {
        return this.config;
    };
    /**
     * Hides the component if shown.
     * This method basically transfers the component into the hidden state. Actual hiding is done via CSS.
     */
    Component.prototype.hide = function () {
        if (!this.hidden) {
            this.hidden = true;
            this.getDomElement().addClass(this.prefixCss(Component.CLASS_HIDDEN));
            this.onHideEvent();
        }
    };
    /**
     * Shows the component if hidden.
     */
    Component.prototype.show = function () {
        if (this.hidden) {
            this.getDomElement().removeClass(this.prefixCss(Component.CLASS_HIDDEN));
            this.hidden = false;
            this.onShowEvent();
        }
    };
    /**
     * Determines if the component is hidden.
     * @returns {boolean} true if the component is hidden, else false
     */
    Component.prototype.isHidden = function () {
        return this.hidden;
    };
    /**
     * Determines if the component is shown.
     * @returns {boolean} true if the component is visible, else false
     */
    Component.prototype.isShown = function () {
        return !this.isHidden();
    };
    /**
     * Toggles the hidden state by hiding the component if it is shown, or showing it if hidden.
     */
    Component.prototype.toggleHidden = function () {
        if (this.isHidden()) {
            this.show();
        }
        else {
            this.hide();
        }
    };
    /**
     * Determines if the component is currently hovered.
     * @returns {boolean} true if the component is hovered, else false
     */
    Component.prototype.isHovered = function () {
        return this.hovered;
    };
    /**
     * Fires the onShow event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onShowEvent = function () {
        this.componentEvents.onShow.dispatch(this);
    };
    /**
     * Fires the onHide event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onHideEvent = function () {
        this.componentEvents.onHide.dispatch(this);
    };
    /**
     * Fires the onHoverChanged event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onHoverChangedEvent = function (hovered) {
        this.hovered = hovered;
        this.componentEvents.onHoverChanged.dispatch(this, { hovered: hovered });
    };
    Object.defineProperty(Component.prototype, "onShow", {
        /**
         * Gets the event that is fired when the component is showing.
         * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
         * @returns {Event<Component<Config>, NoArgs>}
         */
        get: function () {
            return this.componentEvents.onShow.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Component.prototype, "onHide", {
        /**
         * Gets the event that is fired when the component is hiding.
         * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
         * @returns {Event<Component<Config>, NoArgs>}
         */
        get: function () {
            return this.componentEvents.onHide.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Component.prototype, "onHoverChanged", {
        /**
         * Gets the event that is fired when the component's hover-state is changing.
         * @returns {Event<Component<Config>, ComponentHoverChangedEventArgs>}
         */
        get: function () {
            return this.componentEvents.onHoverChanged.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return Component;
}());
/**
 * The classname that is attached to the element when it is in the hidden state.
 * @type {string}
 */
Component.CLASS_HIDDEN = 'hidden';
exports.Component = Component;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var arrayutils_1 = __webpack_require__(4);
/**
 * Event dispatcher to subscribe and trigger events. Each event should have its own dispatcher.
 */
var EventDispatcher = (function () {
    function EventDispatcher() {
        this.listeners = [];
    }
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.subscribe = function (listener) {
        this.listeners.push(new EventListenerWrapper(listener));
    };
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.subscribeOnce = function (listener) {
        this.listeners.push(new EventListenerWrapper(listener, true));
    };
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.subscribeRateLimited = function (listener, rateMs) {
        this.listeners.push(new RateLimitedEventListenerWrapper(listener, rateMs));
    };
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.unsubscribe = function (listener) {
        // Iterate through listeners, compare with parameter, and remove if found
        for (var i = 0; i < this.listeners.length; i++) {
            var subscribedListener = this.listeners[i];
            if (subscribedListener.listener === listener) {
                arrayutils_1.ArrayUtils.remove(this.listeners, subscribedListener);
                return true;
            }
        }
        return false;
    };
    /**
     * Removes all listeners from this dispatcher.
     */
    EventDispatcher.prototype.unsubscribeAll = function () {
        this.listeners = [];
    };
    /**
     * Dispatches an event to all subscribed listeners.
     * @param sender the source of the event
     * @param args the arguments for the event
     */
    EventDispatcher.prototype.dispatch = function (sender, args) {
        if (args === void 0) { args = null; }
        var listenersToRemove = [];
        // Call every listener
        for (var _i = 0, _a = this.listeners; _i < _a.length; _i++) {
            var listener = _a[_i];
            listener.fire(sender, args);
            if (listener.isOnce()) {
                listenersToRemove.push(listener);
            }
        }
        // Remove one-time listener
        for (var _b = 0, listenersToRemove_1 = listenersToRemove; _b < listenersToRemove_1.length; _b++) {
            var listenerToRemove = listenersToRemove_1[_b];
            arrayutils_1.ArrayUtils.remove(this.listeners, listenerToRemove);
        }
    };
    /**
     * Returns the event that this dispatcher manages and on which listeners can subscribe and unsubscribe event handlers.
     * @returns {Event}
     */
    EventDispatcher.prototype.getEvent = function () {
        // For now, just cast the event dispatcher to the event interface. At some point in the future when the
        // codebase grows, it might make sense to split the dispatcher into separate dispatcher and event classes.
        return this;
    };
    return EventDispatcher;
}());
exports.EventDispatcher = EventDispatcher;
/**
 * A basic event listener wrapper to manage listeners within the {@link EventDispatcher}. This is a 'private' class
 * for internal dispatcher use and it is therefore not exported.
 */
var EventListenerWrapper = (function () {
    function EventListenerWrapper(listener, once) {
        if (once === void 0) { once = false; }
        this.eventListener = listener;
        this.once = once;
    }
    Object.defineProperty(EventListenerWrapper.prototype, "listener", {
        /**
         * Returns the wrapped event listener.
         * @returns {EventListener<Sender, Args>}
         */
        get: function () {
            return this.eventListener;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Fires the wrapped event listener with the given arguments.
     * @param sender
     * @param args
     */
    EventListenerWrapper.prototype.fire = function (sender, args) {
        this.eventListener(sender, args);
    };
    /**
     * Checks if this listener is scheduled to be called only once.
     * @returns {boolean} once if true
     */
    EventListenerWrapper.prototype.isOnce = function () {
        return this.once;
    };
    return EventListenerWrapper;
}());
/**
 * Extends the basic {@link EventListenerWrapper} with rate-limiting functionality.
 */
var RateLimitedEventListenerWrapper = (function (_super) {
    __extends(RateLimitedEventListenerWrapper, _super);
    function RateLimitedEventListenerWrapper(listener, rateMs) {
        var _this = _super.call(this, listener) || this;
        _this.rateMs = rateMs;
        _this.lastFireTime = 0;
        // Wrap the event listener with an event listener that does the rate-limiting
        _this.rateLimitingEventListener = function (sender, args) {
            if (Date.now() - _this.lastFireTime > _this.rateMs) {
                // Only if enough time since the previous call has passed, call the
                // actual event listener and record the current time
                _this.fireSuper(sender, args);
                _this.lastFireTime = Date.now();
            }
        };
        return _this;
    }
    RateLimitedEventListenerWrapper.prototype.fireSuper = function (sender, args) {
        // Fire the actual external event listener
        _super.prototype.fire.call(this, sender, args);
    };
    RateLimitedEventListenerWrapper.prototype.fire = function (sender, args) {
        // Fire the internal rate-limiting listener instead of the external event listener
        this.rateLimitingEventListener(sender, args);
    };
    return RateLimitedEventListenerWrapper;
}(EventListenerWrapper));


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ArrayUtils;
(function (ArrayUtils) {
    /**
     * Removes an item from an array.
     * @param array the array that may contain the item to remove
     * @param item the item to remove from the array
     * @returns {any} the removed item or null if it wasn't part of the array
     */
    function remove(array, item) {
        var index = array.indexOf(item);
        if (index > -1) {
            return array.splice(index, 1)[0];
        }
        else {
            return null;
        }
    }
    ArrayUtils.remove = remove;
})(ArrayUtils = exports.ArrayUtils || (exports.ArrayUtils = {}));


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var eventdispatcher_1 = __webpack_require__(3);
var browserutils_1 = __webpack_require__(11);
var PlayerUtils;
(function (PlayerUtils) {
    var PlayerState;
    (function (PlayerState) {
        PlayerState[PlayerState["IDLE"] = 0] = "IDLE";
        PlayerState[PlayerState["PREPARED"] = 1] = "PREPARED";
        PlayerState[PlayerState["PLAYING"] = 2] = "PLAYING";
        PlayerState[PlayerState["PAUSED"] = 3] = "PAUSED";
        PlayerState[PlayerState["FINISHED"] = 4] = "FINISHED";
    })(PlayerState = PlayerUtils.PlayerState || (PlayerUtils.PlayerState = {}));
    function isSourceLoaded(player) {
        return player.getConfig().source !== undefined;
    }
    PlayerUtils.isSourceLoaded = isSourceLoaded;
    function isTimeShiftAvailable(player) {
        return player.isLive() && player.getMaxTimeShift() !== 0;
    }
    PlayerUtils.isTimeShiftAvailable = isTimeShiftAvailable;
    function getState(player) {
        if (player.hasEnded()) {
            return PlayerState.FINISHED;
        }
        else if (player.isPlaying()) {
            return PlayerState.PLAYING;
        }
        else if (player.isPaused()) {
            return PlayerState.PAUSED;
        }
        else if (isSourceLoaded(player)) {
            return PlayerState.PREPARED;
        }
        else {
            return PlayerState.IDLE;
        }
    }
    PlayerUtils.getState = getState;
    var TimeShiftAvailabilityDetector = (function () {
        function TimeShiftAvailabilityDetector(player) {
            var _this = this;
            this.timeShiftAvailabilityChangedEvent = new eventdispatcher_1.EventDispatcher();
            this.player = player;
            this.timeShiftAvailable = undefined;
            var timeShiftDetector = function () {
                _this.detect();
            };
            // Try to detect timeshift availability in ON_READY, which works for DASH streams
            player.addEventHandler(player.EVENT.ON_READY, timeShiftDetector);
            // With HLS/NativePlayer streams, getMaxTimeShift can be 0 before the buffer fills, so we need to additionally
            // check timeshift availability in ON_TIME_CHANGED
            player.addEventHandler(player.EVENT.ON_TIME_CHANGED, timeShiftDetector);
        }
        TimeShiftAvailabilityDetector.prototype.detect = function () {
            if (this.player.isLive()) {
                var timeShiftAvailableNow = PlayerUtils.isTimeShiftAvailable(this.player);
                // When the availability changes, we fire the event
                if (timeShiftAvailableNow !== this.timeShiftAvailable) {
                    this.timeShiftAvailabilityChangedEvent.dispatch(this.player, { timeShiftAvailable: timeShiftAvailableNow });
                    this.timeShiftAvailable = timeShiftAvailableNow;
                }
            }
        };
        Object.defineProperty(TimeShiftAvailabilityDetector.prototype, "onTimeShiftAvailabilityChanged", {
            get: function () {
                return this.timeShiftAvailabilityChangedEvent.getEvent();
            },
            enumerable: true,
            configurable: true
        });
        return TimeShiftAvailabilityDetector;
    }());
    PlayerUtils.TimeShiftAvailabilityDetector = TimeShiftAvailabilityDetector;
    /**
     * Detects changes of the stream type, i.e. changes of the return value of the player#isLive method.
     * Normally, a stream cannot change its type during playback, it's either VOD or live. Due to bugs on some
     * platforms or browsers, it can still change. It is therefore unreliable to just check #isLive and this detector
     * should be used as a workaround instead.
     *
     * Known cases:
     *
     * - HLS VOD on Android 4.3
     * Video duration is initially 'Infinity' and only gets available after playback starts, so streams are wrongly
     * reported as 'live' before playback (the live-check in the player checks for infinite duration).
     */
    var LiveStreamDetector = (function () {
        function LiveStreamDetector(player) {
            var _this = this;
            this.liveChangedEvent = new eventdispatcher_1.EventDispatcher();
            this.player = player;
            this.live = undefined;
            var liveDetector = function () {
                _this.detect();
            };
            // Initialize when player is ready
            player.addEventHandler(player.EVENT.ON_READY, liveDetector);
            // Re-evaluate when playback starts
            player.addEventHandler(player.EVENT.ON_PLAY, liveDetector);
            // HLS live detection workaround for Android:
            // Also re-evaluate during playback, because that is when the live flag might change.
            // (Doing it only in Android Chrome saves unnecessary overhead on other plattforms)
            if (browserutils_1.BrowserUtils.isAndroid && browserutils_1.BrowserUtils.isChrome) {
                player.addEventHandler(player.EVENT.ON_TIME_CHANGED, liveDetector);
            }
        }
        LiveStreamDetector.prototype.detect = function () {
            var liveNow = this.player.isLive();
            // Compare current to previous live state flag and fire event when it changes. Since we initialize the flag
            // with undefined, there is always at least an initial event fired that tells listeners the live state.
            if (liveNow !== this.live) {
                this.liveChangedEvent.dispatch(this.player, { live: liveNow });
                this.live = liveNow;
            }
        };
        Object.defineProperty(LiveStreamDetector.prototype, "onLiveChanged", {
            get: function () {
                return this.liveChangedEvent.getEvent();
            },
            enumerable: true,
            configurable: true
        });
        return LiveStreamDetector;
    }());
    PlayerUtils.LiveStreamDetector = LiveStreamDetector;
})(PlayerUtils = exports.PlayerUtils || (exports.PlayerUtils = {}));


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(0);
var eventdispatcher_1 = __webpack_require__(3);
/**
 * A simple clickable button.
 */
var Button = (function (_super) {
    __extends(Button, _super);
    function Button(config) {
        var _this = _super.call(this, config) || this;
        _this.buttonEvents = {
            onClick: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-button',
        }, _this.config);
        return _this;
    }
    Button.prototype.toDomElement = function () {
        var _this = this;
        // Create the button element with the text label
        var buttonElement = new dom_1.DOM('button', {
            'type': 'button',
            'id': this.config.id,
            'class': this.getCssClasses(),
        }).append(new dom_1.DOM('span', {
            'class': this.prefixCss('label'),
        }).html(this.config.text));
        // Listen for the click event on the button element and trigger the corresponding event on the button component
        buttonElement.on('click', function () {
            _this.onClickEvent();
        });
        return buttonElement;
    };
    /**
     * Sets text on the label of the button.
     * @param text the text to put into the label of the button
     */
    Button.prototype.setText = function (text) {
        this.getDomElement().find('.' + this.prefixCss('label')).html(text);
    };
    Button.prototype.onClickEvent = function () {
        this.buttonEvents.onClick.dispatch(this);
    };
    Object.defineProperty(Button.prototype, "onClick", {
        /**
         * Gets the event that is fired when the button is clicked.
         * @returns {Event<Button<Config>, NoArgs>}
         */
        get: function () {
            return this.buttonEvents.onClick.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return Button;
}(component_1.Component));
exports.Button = Button;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(0);
var eventdispatcher_1 = __webpack_require__(3);
/**
 * A simple text label.
 *
 * DOM example:
 * <code>
 *     <span class='ui-label'>...some text...</span>
 * </code>
 */
var Label = (function (_super) {
    __extends(Label, _super);
    function Label(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.labelEvents = {
            onClick: new eventdispatcher_1.EventDispatcher(),
            onTextChanged: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-label',
        }, _this.config);
        _this.text = _this.config.text;
        return _this;
    }
    Label.prototype.toDomElement = function () {
        var _this = this;
        var labelElement = new dom_1.DOM('span', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        }).html(this.text);
        labelElement.on('click', function () {
            _this.onClickEvent();
        });
        return labelElement;
    };
    /**
     * Set the text on this label.
     * @param text
     */
    Label.prototype.setText = function (text) {
        this.text = text;
        this.getDomElement().html(text);
        this.onTextChangedEvent(text);
    };
    /**
     * Gets the text on this label.
     * @return {string} The text on the label
     */
    Label.prototype.getText = function () {
        return this.text;
    };
    /**
     * Clears the text on this label.
     */
    Label.prototype.clearText = function () {
        this.getDomElement().html('');
        this.onTextChangedEvent(null);
    };
    /**
     * Tests if the label is empty and does not contain any text.
     * @return {boolean} True if the label is empty, else false
     */
    Label.prototype.isEmpty = function () {
        return !this.text;
    };
    /**
     * Fires the {@link #onClick} event.
     * Can be used by subclasses to listen to this event without subscribing an event listener by overwriting the method
     * and calling the super method.
     */
    Label.prototype.onClickEvent = function () {
        this.labelEvents.onClick.dispatch(this);
    };
    /**
     * Fires the {@link #onClick} event.
     * Can be used by subclasses to listen to this event without subscribing an event listener by overwriting the method
     * and calling the super method.
     */
    Label.prototype.onTextChangedEvent = function (text) {
        this.labelEvents.onTextChanged.dispatch(this, text);
    };
    Object.defineProperty(Label.prototype, "onClick", {
        /**
         * Gets the event that is fired when the label is clicked.
         * @returns {Event<Label<LabelConfig>, NoArgs>}
         */
        get: function () {
            return this.labelEvents.onClick.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Label.prototype, "onTextChanged", {
        /**
         * Gets the event that is fired when the text on the label is changed.
         * @returns {Event<Label<LabelConfig>, string>}
         */
        get: function () {
            return this.labelEvents.onTextChanged.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return Label;
}(component_1.Component));
exports.Label = Label;


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(6);
var eventdispatcher_1 = __webpack_require__(3);
/**
 * A button that can be toggled between 'on' and 'off' states.
 */
var ToggleButton = (function (_super) {
    __extends(ToggleButton, _super);
    function ToggleButton(config) {
        var _this = _super.call(this, config) || this;
        _this.toggleButtonEvents = {
            onToggle: new eventdispatcher_1.EventDispatcher(),
            onToggleOn: new eventdispatcher_1.EventDispatcher(),
            onToggleOff: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-togglebutton',
        }, _this.config);
        return _this;
    }
    /**
     * Toggles the button to the 'on' state.
     */
    ToggleButton.prototype.on = function () {
        if (this.isOff()) {
            this.onState = true;
            this.getDomElement().removeClass(this.prefixCss(ToggleButton.CLASS_OFF));
            this.getDomElement().addClass(this.prefixCss(ToggleButton.CLASS_ON));
            this.onToggleEvent();
            this.onToggleOnEvent();
        }
    };
    /**
     * Toggles the button to the 'off' state.
     */
    ToggleButton.prototype.off = function () {
        if (this.isOn()) {
            this.onState = false;
            this.getDomElement().removeClass(this.prefixCss(ToggleButton.CLASS_ON));
            this.getDomElement().addClass(this.prefixCss(ToggleButton.CLASS_OFF));
            this.onToggleEvent();
            this.onToggleOffEvent();
        }
    };
    /**
     * Toggle the button 'on' if it is 'off', or 'off' if it is 'on'.
     */
    ToggleButton.prototype.toggle = function () {
        if (this.isOn()) {
            this.off();
        }
        else {
            this.on();
        }
    };
    /**
     * Checks if the toggle button is in the 'on' state.
     * @returns {boolean} true if button is 'on', false if 'off'
     */
    ToggleButton.prototype.isOn = function () {
        return this.onState;
    };
    /**
     * Checks if the toggle button is in the 'off' state.
     * @returns {boolean} true if button is 'off', false if 'on'
     */
    ToggleButton.prototype.isOff = function () {
        return !this.isOn();
    };
    ToggleButton.prototype.onClickEvent = function () {
        _super.prototype.onClickEvent.call(this);
        // Fire the toggle event together with the click event
        // (they are technically the same, only the semantics are different)
        this.onToggleEvent();
    };
    ToggleButton.prototype.onToggleEvent = function () {
        this.toggleButtonEvents.onToggle.dispatch(this);
    };
    ToggleButton.prototype.onToggleOnEvent = function () {
        this.toggleButtonEvents.onToggleOn.dispatch(this);
    };
    ToggleButton.prototype.onToggleOffEvent = function () {
        this.toggleButtonEvents.onToggleOff.dispatch(this);
    };
    Object.defineProperty(ToggleButton.prototype, "onToggle", {
        /**
         * Gets the event that is fired when the button is toggled.
         * @returns {Event<ToggleButton<Config>, NoArgs>}
         */
        get: function () {
            return this.toggleButtonEvents.onToggle.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToggleButton.prototype, "onToggleOn", {
        /**
         * Gets the event that is fired when the button is toggled 'on'.
         * @returns {Event<ToggleButton<Config>, NoArgs>}
         */
        get: function () {
            return this.toggleButtonEvents.onToggleOn.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToggleButton.prototype, "onToggleOff", {
        /**
         * Gets the event that is fired when the button is toggled 'off'.
         * @returns {Event<ToggleButton<Config>, NoArgs>}
         */
        get: function () {
            return this.toggleButtonEvents.onToggleOff.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return ToggleButton;
}(button_1.Button));
ToggleButton.CLASS_ON = 'on';
ToggleButton.CLASS_OFF = 'off';
exports.ToggleButton = ToggleButton;


/***/ }),
/* 9 */
/***/ (function(module, exports) {

module.exports = angular;

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// TODO change to internal (not exported) class, how to use in other files?
/**
 * Executes a callback after a specified amount of time, optionally repeatedly until stopped.
 */
var Timeout = (function () {
    /**
     * Creates a new timeout callback handler.
     * @param delay the delay in milliseconds after which the callback should be executed
     * @param callback the callback to execute after the delay time
     * @param repeat if true, call the callback repeatedly in delay intervals
     */
    function Timeout(delay, callback, repeat) {
        if (repeat === void 0) { repeat = false; }
        this.delay = delay;
        this.callback = callback;
        this.repeat = repeat;
        this.timeoutHandle = 0;
    }
    /**
     * Starts the timeout and calls the callback when the timeout delay has passed.
     * @returns {Timeout} the current timeout (so the start call can be chained to the constructor)
     */
    Timeout.prototype.start = function () {
        this.reset();
        return this;
    };
    /**
     * Clears the timeout. The callback will not be called if clear is called during the timeout.
     */
    Timeout.prototype.clear = function () {
        clearTimeout(this.timeoutHandle);
    };
    /**
     * Resets the passed timeout delay to zero. Can be used to defer the calling of the callback.
     */
    Timeout.prototype.reset = function () {
        var _this = this;
        var lastScheduleTime = 0;
        var delayAdjust = 0;
        this.clear();
        var internalCallback = function () {
            _this.callback();
            if (_this.repeat) {
                var now = Date.now();
                // The time of one iteration from scheduling to executing the callback (usually a bit longer than the delay
                // time)
                var delta = now - lastScheduleTime;
                // Calculate the delay adjustment for the next schedule to keep a steady delay interval over time
                delayAdjust = _this.delay - delta + delayAdjust;
                lastScheduleTime = now;
                // Schedule next execution by the adjusted delay
                _this.timeoutHandle = window.setTimeout(internalCallback, _this.delay + delayAdjust);
            }
        };
        lastScheduleTime = Date.now();
        this.timeoutHandle = window.setTimeout(internalCallback, this.delay);
    };
    return Timeout;
}());
exports.Timeout = Timeout;


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var BrowserUtils;
(function (BrowserUtils) {
    // isMobile only needs to be evaluated once (it cannot change during a browser session)
    // Mobile detection according to Mozilla recommendation: "In summary, we recommend looking for the string “Mobi”
    // anywhere in the User Agent to detect a mobile device."
    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent
    BrowserUtils.isMobile = navigator && navigator.userAgent && /Mobi/.test(navigator.userAgent);
    BrowserUtils.isChrome = navigator && navigator.userAgent && /Chrome/.test(navigator.userAgent);
    BrowserUtils.isAndroid = navigator && navigator.userAgent && /Android/.test(navigator.userAgent);
})(BrowserUtils = exports.BrowserUtils || (exports.BrowserUtils = {}));


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(8);
var playerutils_1 = __webpack_require__(5);
/**
 * A button that toggles between playback and pause.
 */
var PlaybackToggleButton = (function (_super) {
    __extends(PlaybackToggleButton, _super);
    function PlaybackToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-playbacktogglebutton',
            text: 'Play/Pause',
        }, _this.config);
        return _this;
    }
    PlaybackToggleButton.prototype.configure = function (player, uimanager, handleClickEvent) {
        var _this = this;
        if (handleClickEvent === void 0) { handleClickEvent = true; }
        _super.prototype.configure.call(this, player, uimanager);
        var isSeeking = false;
        // Handler to update button state based on player state
        var playbackStateHandler = function (event) {
            // If the UI is currently seeking, playback is temporarily stopped but the buttons should
            // not reflect that and stay as-is (e.g indicate playback while seeking).
            if (isSeeking) {
                return;
            }
            if (player.isPlaying()) {
                _this.on();
            }
            else {
                _this.off();
            }
        };
        // Call handler upon these events
        player.addEventHandler(player.EVENT.ON_PLAY, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_PAUSED, playbackStateHandler);
        // when playback finishes, player turns to paused mode
        player.addEventHandler(player.EVENT.ON_PLAYBACK_FINISHED, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_CAST_STARTED, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_CAST_PLAYING, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_CAST_PAUSED, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_CAST_PLAYBACK_FINISHED, playbackStateHandler);
        // Detect absence of timeshifting on live streams and add tagging class to convert button icons to play/stop
        var timeShiftDetector = new playerutils_1.PlayerUtils.TimeShiftAvailabilityDetector(player);
        timeShiftDetector.onTimeShiftAvailabilityChanged.subscribe(function (sender, args) {
            if (!args.timeShiftAvailable) {
                _this.getDomElement().addClass(_this.prefixCss(PlaybackToggleButton.CLASS_STOPTOGGLE));
            }
            else {
                _this.getDomElement().removeClass(_this.prefixCss(PlaybackToggleButton.CLASS_STOPTOGGLE));
            }
        });
        timeShiftDetector.detect(); // Initial detection
        if (handleClickEvent) {
            // Control player by button events
            // When a button event triggers a player API call, events are fired which in turn call the event handler
            // above that updated the button state.
            this.onClick.subscribe(function () {
                if (player.isPlaying()) {
                    player.pause('ui');
                }
                else {
                    player.play('ui');
                }
            });
        }
        // Track UI seeking status
        uimanager.onSeek.subscribe(function () {
            isSeeking = true;
        });
        uimanager.onSeeked.subscribe(function () {
            isSeeking = false;
        });
        // Startup init
        playbackStateHandler(null);
    };
    return PlaybackToggleButton;
}(togglebutton_1.ToggleButton));
PlaybackToggleButton.CLASS_STOPTOGGLE = 'stoptoggle';
exports.PlaybackToggleButton = PlaybackToggleButton;


/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(0);
var eventdispatcher_1 = __webpack_require__(3);
var timeout_1 = __webpack_require__(10);
var playerutils_1 = __webpack_require__(5);
/**
 * A seek bar to seek within the player's media. It displays the current playback position, amount of buffed data, seek
 * target, and keeps status about an ongoing seek.
 *
 * The seek bar displays different 'bars':
 *  - the playback position, i.e. the position in the media at which the player current playback pointer is positioned
 *  - the buffer position, which usually is the playback position plus the time span that is already buffered ahead
 *  - the seek position, used to preview to where in the timeline a seek will jump to
 */
var SeekBar = (function (_super) {
    __extends(SeekBar, _super);
    function SeekBar(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        /**
         * Buffer of the the current playback position. The position must be buffered in case the element
         * needs to be refreshed with {@link #refreshPlaybackPosition}.
         * @type {number}
         */
        _this.playbackPositionPercentage = 0;
        // https://hacks.mozilla.org/2013/04/detecting-touch-its-the-why-not-the-how/
        _this.touchSupported = ('ontouchstart' in window);
        _this.seekBarEvents = {
            /**
             * Fired when a scrubbing seek operation is started.
             */
            onSeek: new eventdispatcher_1.EventDispatcher(),
            /**
             * Fired during a scrubbing seek to indicate that the seek preview (i.e. the video frame) should be updated.
             */
            onSeekPreview: new eventdispatcher_1.EventDispatcher(),
            /**
             * Fired when a scrubbing seek has finished or when a direct seek is issued.
             */
            onSeeked: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-seekbar',
            vertical: false,
            smoothPlaybackPositionUpdateIntervalMs: 50,
            hideInLivePlayback: true,
        }, _this.config);
        _this.label = _this.config.label;
        _this.timelineMarkers = [];
        return _this;
    }
    SeekBar.prototype.initialize = function () {
        _super.prototype.initialize.call(this);
        if (this.hasLabel()) {
            this.getLabel().initialize();
        }
    };
    SeekBar.prototype.configure = function (player, uimanager, configureSeek) {
        var _this = this;
        if (configureSeek === void 0) { configureSeek = true; }
        _super.prototype.configure.call(this, player, uimanager);
        // let config = <SeekBarConfig>this.getConfig();
        if (!configureSeek) {
            // The configureSeek flag can be used by subclasses to disable configuration as seek bar. E.g. the volume
            // slider is reusing this component but adds its own functionality, and does not need the seek functionality.
            // This is actually a hack, the proper solution would be for both seek bar and volume sliders to extend
            // a common base slider component and implement their functionality there.
            return;
        }
        var playbackNotInitialized = true;
        var isPlaying = false;
        var isSeeking = false;
        // Update playback and buffer positions
        var playbackPositionHandler = function (event, forceUpdate) {
            if (event === void 0) { event = null; }
            if (forceUpdate === void 0) { forceUpdate = false; }
            // Once this handler os called, playback has been started and we set the flag to false
            playbackNotInitialized = false;
            if (isSeeking) {
                // We caught a seek preview seek, do not update the seekbar
                return;
            }
            if (player.isLive()) {
                if (player.getMaxTimeShift() === 0) {
                    // This case must be explicitly handled to avoid division by zero
                    _this.setPlaybackPosition(100);
                }
                else {
                    var playbackPositionPercentage = 100 - (100 / player.getMaxTimeShift() * player.getTimeShift());
                    _this.setPlaybackPosition(playbackPositionPercentage);
                }
                // Always show full buffer for live streams
                _this.setBufferPosition(100);
                // Hide SeekBar if required.
                // if (config.hideInLivePlayback) {
                _this.hide();
                // }
            }
            else {
                var playbackPositionPercentage = 100 / player.getDuration() * player.getCurrentTime();
                var videoBufferLength = player.getVideoBufferLength();
                var audioBufferLength = player.getAudioBufferLength();
                // Calculate the buffer length which is the smaller length of the audio and video buffers. If one of these
                // buffers is not available, we set it's value to MAX_VALUE to make sure that the other real value is taken
                // as the buffer length.
                var bufferLength = Math.min(videoBufferLength != null ? videoBufferLength : Number.MAX_VALUE, audioBufferLength != null ? audioBufferLength : Number.MAX_VALUE);
                // If both buffer lengths are missing, we set the buffer length to zero
                if (bufferLength === Number.MAX_VALUE) {
                    bufferLength = 0;
                }
                var bufferPercentage = 100 / player.getDuration() * bufferLength;
                // Update playback position only in paused state or in the initial startup state where player is neither
                // paused nor playing. Playback updates are handled in the Timeout below.
                if (_this.config.smoothPlaybackPositionUpdateIntervalMs === SeekBar.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED
                    || forceUpdate || player.isPaused() || (player.isPaused() === player.isPlaying())) {
                    _this.setPlaybackPosition(playbackPositionPercentage);
                }
                _this.setBufferPosition(playbackPositionPercentage + bufferPercentage);
            }
        };
        // Update seekbar upon these events
        // init playback position when the player is ready
        player.addEventHandler(player.EVENT.ON_READY, playbackPositionHandler);
        // update playback position when it changes
        player.addEventHandler(player.EVENT.ON_TIME_CHANGED, playbackPositionHandler);
        // update bufferlevel when buffering is complete
        player.addEventHandler(player.EVENT.ON_STALL_ENDED, playbackPositionHandler);
        // update playback position when a seek has finished
        player.addEventHandler(player.EVENT.ON_SEEKED, playbackPositionHandler);
        // update playback position when a timeshift has finished
        player.addEventHandler(player.EVENT.ON_TIME_SHIFTED, playbackPositionHandler);
        // update bufferlevel when a segment has been downloaded
        player.addEventHandler(player.EVENT.ON_SEGMENT_REQUEST_FINISHED, playbackPositionHandler);
        // update playback position of Cast playback
        player.addEventHandler(player.EVENT.ON_CAST_TIME_UPDATED, playbackPositionHandler);
        // Seek handling
        player.addEventHandler(player.EVENT.ON_SEEK, function () {
            _this.setSeeking(true);
        });
        player.addEventHandler(player.EVENT.ON_SEEKED, function () {
            _this.setSeeking(false);
        });
        player.addEventHandler(player.EVENT.ON_TIME_SHIFT, function () {
            _this.setSeeking(true);
        });
        player.addEventHandler(player.EVENT.ON_TIME_SHIFTED, function () {
            _this.setSeeking(false);
        });
        var seek = function (percentage) {
            if (player.isLive()) {
                player.timeShift(player.getMaxTimeShift() - (player.getMaxTimeShift() * (percentage / 100)), 'ui');
            }
            else {
                player.seek(player.getDuration() * (percentage / 100), 'ui');
            }
        };
        this.onSeek.subscribe(function (sender) {
            isSeeking = true; // track seeking status so we can catch events from seek preview seeks
            // Notify UI manager of started seek
            uimanager.onSeek.dispatch(sender);
            // Save current playback state
            isPlaying = player.isPlaying();
            // Pause playback while seeking
            if (isPlaying) {
                player.pause('ui');
            }
        });
        this.onSeekPreview.subscribe(function (sender, args) {
            // Notify UI manager of seek preview
            uimanager.onSeekPreview.dispatch(sender, args);
        });
        this.onSeekPreview.subscribeRateLimited(function (sender, args) {
            // Rate-limited scrubbing seek
            if (args.scrubbing) {
                seek(args.position);
            }
        }, 200);
        this.onSeeked.subscribe(function (sender, percentage) {
            isSeeking = false;
            // Do the seek
            seek(percentage);
            // Continue playback after seek if player was playing when seek started
            if (isPlaying) {
                player.play('ui');
            }
            // Notify UI manager of finished seek
            uimanager.onSeeked.dispatch(sender);
        });
        if (this.hasLabel()) {
            // Configure a seekbar label that is internal to the seekbar)
            this.getLabel().configure(player, uimanager);
        }
        // Hide seekbar for live sources without timeshift
        var isLive = false;
        var hasTimeShift = false;
        var switchVisibility = function (isLive, hasTimeShift) {
            if (isLive && !hasTimeShift) {
                _this.hide();
            }
            else {
                _this.show();
            }
            playbackPositionHandler(null, true);
            _this.refreshPlaybackPosition();
        };
        var liveStreamDetector = new playerutils_1.PlayerUtils.LiveStreamDetector(player);
        liveStreamDetector.onLiveChanged.subscribe(function (sender, args) {
            isLive = args.live;
            switchVisibility(isLive, hasTimeShift);
        });
        var timeShiftDetector = new playerutils_1.PlayerUtils.TimeShiftAvailabilityDetector(player);
        timeShiftDetector.onTimeShiftAvailabilityChanged.subscribe(function (sender, args) {
            hasTimeShift = args.timeShiftAvailable;
            switchVisibility(isLive, hasTimeShift);
        });
        // Initial detection
        liveStreamDetector.detect();
        timeShiftDetector.detect();
        // Refresh the playback position when the player resized or the UI is configured. The playback position marker
        // is positioned absolutely and must therefore be updated when the size of the seekbar changes.
        player.addEventHandler(player.EVENT.ON_PLAYER_RESIZE, function () {
            _this.refreshPlaybackPosition();
        });
        // Additionally, when this code is called, the seekbar is not part of the UI yet and therefore does not have a size,
        // resulting in a wrong initial position of the marker. Refreshing it once the UI is configured solved this issue.
        uimanager.onConfigured.subscribe(function () {
            _this.refreshPlaybackPosition();
        });
        // It can also happen that the value changes once the player is ready, or when a new source is loaded, so we need
        // to update on ON_READY too
        player.addEventHandler(player.EVENT.ON_READY, function () {
            _this.refreshPlaybackPosition();
        });
        // Initialize seekbar
        playbackPositionHandler(); // Set the playback position
        this.setBufferPosition(0);
        this.setSeekPosition(0);
        if (this.config.smoothPlaybackPositionUpdateIntervalMs !== SeekBar.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED) {
            this.configureSmoothPlaybackPositionUpdater(player, uimanager);
        }
        this.configureMarkers(player, uimanager);
    };
    SeekBar.prototype.configureSmoothPlaybackPositionUpdater = function (player, uimanager) {
        var _this = this;
        /*
         * Playback position update
         *
         * We do not update the position directly from the ON_TIME_CHANGED event, because it arrives very jittery and
         * results in a jittery position indicator since the CSS transition time is statically set.
         * To work around this issue, we maintain a local playback position that is updated in a stable regular interval
         * and kept in sync with the player.
         */
        var currentTimeSeekBar = 0;
        var currentTimePlayer = 0;
        var updateIntervalMs = 50;
        var currentTimeUpdateDeltaSecs = updateIntervalMs / 1000;
        this.smoothPlaybackPositionUpdater = new timeout_1.Timeout(updateIntervalMs, function () {
            currentTimeSeekBar += currentTimeUpdateDeltaSecs;
            currentTimePlayer = player.getCurrentTime();
            // Sync currentTime of seekbar to player
            var currentTimeDelta = currentTimeSeekBar - currentTimePlayer;
            // If the delta is larger that 2 secs, directly jump the seekbar to the
            // player time instead of smoothly fast forwarding/rewinding.
            if (Math.abs(currentTimeDelta) > 2) {
                currentTimeSeekBar = currentTimePlayer;
            }
            else if (currentTimeDelta <= -currentTimeUpdateDeltaSecs) {
                currentTimeSeekBar += currentTimeUpdateDeltaSecs;
            }
            else if (currentTimeDelta >= currentTimeUpdateDeltaSecs) {
                currentTimeSeekBar -= currentTimeUpdateDeltaSecs;
            }
            var playbackPositionPercentage = 100 / player.getDuration() * currentTimeSeekBar;
            _this.setPlaybackPosition(playbackPositionPercentage);
        }, true);
        var startSmoothPlaybackPositionUpdater = function () {
            if (!player.isLive()) {
                currentTimeSeekBar = player.getCurrentTime();
                _this.smoothPlaybackPositionUpdater.start();
            }
        };
        var stopSmoothPlaybackPositionUpdater = function () {
            _this.smoothPlaybackPositionUpdater.clear();
        };
        player.addEventHandler(player.EVENT.ON_PLAY, startSmoothPlaybackPositionUpdater);
        player.addEventHandler(player.EVENT.ON_CAST_PLAYING, startSmoothPlaybackPositionUpdater);
        player.addEventHandler(player.EVENT.ON_PAUSED, stopSmoothPlaybackPositionUpdater);
        player.addEventHandler(player.EVENT.ON_CAST_PAUSED, stopSmoothPlaybackPositionUpdater);
        player.addEventHandler(player.EVENT.ON_SEEKED, function () {
            currentTimeSeekBar = player.getCurrentTime();
        });
        if (player.isPlaying()) {
            startSmoothPlaybackPositionUpdater();
        }
    };
    SeekBar.prototype.configureMarkers = function (player, uimanager) {
        var _this = this;
        var clearMarkers = function () {
            _this.timelineMarkers = [];
            _this.updateMarkers();
        };
        var setupMarkers = function () {
            clearMarkers();
            var hasMarkersInUiConfig = uimanager.getConfig().metadata && uimanager.getConfig().metadata.markers
                && uimanager.getConfig().metadata.markers.length > 0;
            var hasMarkersInPlayerConfig = player.getConfig().source && player.getConfig().source.markers
                && player.getConfig().source.markers.length > 0;
            // Take markers from the UI config. If no markers defined, try to take them from the player's source config.
            var markers = hasMarkersInUiConfig ? uimanager.getConfig().metadata.markers :
                hasMarkersInPlayerConfig ? player.getConfig().source.markers : null;
            // Generate timeline markers from the config if we have markers and if we have a duration
            // The duration check is for buggy platforms where the duration is not available instantly (Chrome on Android 4.3)
            if (markers && player.getDuration() !== Infinity) {
                for (var _i = 0, markers_1 = markers; _i < markers_1.length; _i++) {
                    var marker = markers_1[_i];
                    _this.timelineMarkers.push({
                        time: 100 / player.getDuration() * marker.time,
                        title: marker.title,
                    });
                }
            }
            // Populate the timeline with the markers
            _this.updateMarkers();
        };
        // Add markers when a source is loaded
        player.addEventHandler(player.EVENT.ON_READY, setupMarkers);
        // Remove markers when unloaded
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, clearMarkers);
        // Init markers at startup
        setupMarkers();
    };
    SeekBar.prototype.release = function () {
        _super.prototype.release.call(this);
        if (this.smoothPlaybackPositionUpdater) {
            this.smoothPlaybackPositionUpdater.clear();
        }
    };
    SeekBar.prototype.toDomElement = function () {
        var _this = this;
        if (this.config.vertical) {
            this.config.cssClasses.push('vertical');
        }
        var seekBarContainer = new dom_1.DOM('div', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        });
        var seekBar = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar'),
        });
        this.seekBar = seekBar;
        // Indicator that shows the buffer fill level
        var seekBarBufferLevel = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-bufferlevel'),
        });
        this.seekBarBufferPosition = seekBarBufferLevel;
        // Indicator that shows the current playback position
        var seekBarPlaybackPosition = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-playbackposition'),
        });
        this.seekBarPlaybackPosition = seekBarPlaybackPosition;
        // A marker of the current playback position, e.g. a dot or line
        var seekBarPlaybackPositionMarker = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-playbackposition-marker'),
        });
        this.seekBarPlaybackPositionMarker = seekBarPlaybackPositionMarker;
        // Indicator that show where a seek will go to
        var seekBarSeekPosition = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-seekposition'),
        });
        this.seekBarSeekPosition = seekBarSeekPosition;
        // Indicator that shows the full seekbar
        var seekBarBackdrop = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-backdrop'),
        });
        this.seekBarBackdrop = seekBarBackdrop;
        var seekBarChapterMarkersContainer = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-markers'),
        });
        this.seekBarMarkersContainer = seekBarChapterMarkersContainer;
        seekBar.append(seekBarBackdrop, seekBarBufferLevel, seekBarSeekPosition, seekBarPlaybackPosition, seekBarChapterMarkersContainer, seekBarPlaybackPositionMarker);
        var seeking = false;
        // Define handler functions so we can attach/remove them later
        var mouseTouchMoveHandler = function (e) {
            e.preventDefault();
            // Avoid propagation to VR handler
            e.stopPropagation();
            var targetPercentage = 100 * _this.getOffset(e);
            _this.setSeekPosition(targetPercentage);
            _this.setPlaybackPosition(targetPercentage);
            _this.onSeekPreviewEvent(targetPercentage, true);
        };
        var mouseTouchUpHandler = function (e) {
            e.preventDefault();
            // Remove handlers, seek operation is finished
            new dom_1.DOM(document).off('touchmove mousemove', mouseTouchMoveHandler);
            new dom_1.DOM(document).off('touchend mouseup', mouseTouchUpHandler);
            var targetPercentage = 100 * _this.getOffset(e);
            var snappedChapter = _this.getMarkerAtPosition(targetPercentage);
            _this.setSeeking(false);
            seeking = false;
            // Fire seeked event
            _this.onSeekedEvent(snappedChapter ? snappedChapter.time : targetPercentage);
        };
        // A seek always start with a touchstart or mousedown directly on the seekbar.
        // To track a mouse seek also outside the seekbar (for touch events this works automatically),
        // so the user does not need to take care that the mouse always stays on the seekbar, we attach the mousemove
        // and mouseup handlers to the whole document. A seek is triggered when the user lifts the mouse key.
        // A seek mouse gesture is thus basically a click with a long time frame between down and up events.
        seekBar.on('touchstart mousedown', function (e) {
            var isTouchEvent = _this.touchSupported && e instanceof TouchEvent;
            // Prevent selection of DOM elements (also prevents mousedown if current event is touchstart)
            e.preventDefault();
            // Avoid propagation to VR handler
            e.stopPropagation();
            _this.setSeeking(true); // Set seeking class on DOM element
            seeking = true; // Set seek tracking flag
            // Fire seeked event
            _this.onSeekEvent();
            // Add handler to track the seek operation over the whole document
            new dom_1.DOM(document).on(isTouchEvent ? 'touchmove' : 'mousemove', mouseTouchMoveHandler);
            new dom_1.DOM(document).on(isTouchEvent ? 'touchend' : 'mouseup', mouseTouchUpHandler);
        });
        // Display seek target indicator when mouse hovers or finger slides over seekbar
        seekBar.on('touchmove mousemove', function (e) {
            e.preventDefault();
            if (seeking) {
                // During a seek (when mouse is down or touch move active), we need to stop propagation to avoid
                // the VR viewport reacting to the moves.
                e.stopPropagation();
                // Because the stopped propagation inhibits the event on the document, we need to call it from here
                mouseTouchMoveHandler(e);
            }
            var position = 100 * _this.getOffset(e);
            _this.setSeekPosition(position);
            _this.onSeekPreviewEvent(position, false);
            if (_this.hasLabel() && _this.getLabel().isHidden()) {
                _this.getLabel().show();
            }
        });
        // Hide seek target indicator when mouse or finger leaves seekbar
        seekBar.on('touchend mouseleave', function (e) {
            e.preventDefault();
            _this.setSeekPosition(0);
            if (_this.hasLabel()) {
                _this.getLabel().hide();
            }
        });
        seekBarContainer.append(seekBar);
        if (this.label) {
            seekBarContainer.append(this.label.getDomElement());
        }
        return seekBarContainer;
    };
    SeekBar.prototype.updateMarkers = function () {
        this.seekBarMarkersContainer.empty();
        for (var _i = 0, _a = this.timelineMarkers; _i < _a.length; _i++) {
            var marker = _a[_i];
            this.seekBarMarkersContainer.append(new dom_1.DOM('div', {
                'class': this.prefixCss('seekbar-marker'),
                'data-marker-time': String(marker.time),
                'data-marker-title': String(marker.title),
            }).css({
                'width': marker.time + '%',
            }));
        }
    };
    SeekBar.prototype.getMarkerAtPosition = function (percentage) {
        var snappedMarker = null;
        var snappingRange = 1;
        if (this.timelineMarkers.length > 0) {
            for (var _i = 0, _a = this.timelineMarkers; _i < _a.length; _i++) {
                var marker = _a[_i];
                if (percentage >= marker.time - snappingRange && percentage <= marker.time + snappingRange) {
                    snappedMarker = marker;
                    break;
                }
            }
        }
        return snappedMarker;
    };
    /**
     * Gets the horizontal offset of a mouse/touch event point from the left edge of the seek bar.
     * @param eventPageX the pageX coordinate of an event to calculate the offset from
     * @returns {number} a number in the range of [0, 1], where 0 is the left edge and 1 is the right edge
     */
    SeekBar.prototype.getHorizontalOffset = function (eventPageX) {
        var elementOffsetPx = this.seekBar.offset().left;
        var widthPx = this.seekBar.width();
        var offsetPx = eventPageX - elementOffsetPx;
        var offset = 1 / widthPx * offsetPx;
        return this.sanitizeOffset(offset);
    };
    /**
     * Gets the vertical offset of a mouse/touch event point from the bottom edge of the seek bar.
     * @param eventPageY the pageX coordinate of an event to calculate the offset from
     * @returns {number} a number in the range of [0, 1], where 0 is the bottom edge and 1 is the top edge
     */
    SeekBar.prototype.getVerticalOffset = function (eventPageY) {
        var elementOffsetPx = this.seekBar.offset().top;
        var widthPx = this.seekBar.height();
        var offsetPx = eventPageY - elementOffsetPx;
        var offset = 1 / widthPx * offsetPx;
        return 1 - this.sanitizeOffset(offset);
    };
    /**
     * Gets the mouse or touch event offset for the current configuration (horizontal or vertical).
     * @param e the event to calculate the offset from
     * @returns {number} a number in the range of [0, 1]
     * @see #getHorizontalOffset
     * @see #getVerticalOffset
     */
    SeekBar.prototype.getOffset = function (e) {
        if (this.touchSupported && e instanceof TouchEvent) {
            if (this.config.vertical) {
                return this.getVerticalOffset(e.type === 'touchend' ? e.changedTouches[0].pageY : e.touches[0].pageY);
            }
            else {
                return this.getHorizontalOffset(e.type === 'touchend' ? e.changedTouches[0].pageX : e.touches[0].pageX);
            }
        }
        else if (e instanceof MouseEvent) {
            if (this.config.vertical) {
                return this.getVerticalOffset(e.pageY);
            }
            else {
                return this.getHorizontalOffset(e.pageX);
            }
        }
        else {
            if (console) {
                console.warn('invalid event');
            }
            return 0;
        }
    };
    /**
     * Sanitizes the mouse offset to the range of [0, 1].
     *
     * When tracking the mouse outside the seek bar, the offset can be outside the desired range and this method
     * limits it to the desired range. E.g. a mouse event left of the left edge of a seek bar yields an offset below
     * zero, but to display the seek target on the seek bar, we need to limit it to zero.
     *
     * @param offset the offset to sanitize
     * @returns {number} the sanitized offset.
     */
    SeekBar.prototype.sanitizeOffset = function (offset) {
        // Since we track mouse moves over the whole document, the target can be outside the seek range,
        // and we need to limit it to the [0, 1] range.
        if (offset < 0) {
            offset = 0;
        }
        else if (offset > 1) {
            offset = 1;
        }
        return offset;
    };
    /**
     * Sets the position of the playback position indicator.
     * @param percent a number between 0 and 100 as returned by the player
     */
    SeekBar.prototype.setPlaybackPosition = function (percent) {
        this.playbackPositionPercentage = percent;
        // Set position of the bar
        this.setPosition(this.seekBarPlaybackPosition, percent);
        // Set position of the marker
        var totalSize = (this.config.vertical ? (this.seekBar.height() - this.seekBarPlaybackPositionMarker.height()) : this.seekBar.width());
        var px = (totalSize) / 100 * percent;
        if (this.config.vertical) {
            px = this.seekBar.height() - px - this.seekBarPlaybackPositionMarker.height();
        }
        var style = this.config.vertical ?
            // -ms-transform required for IE9
            { 'transform': 'translateY(' + px + 'px)', '-ms-transform': 'translateY(' + px + 'px)' } :
            { 'transform': 'translateX(' + px + 'px)', '-ms-transform': 'translateX(' + px + 'px)' };
        this.seekBarPlaybackPositionMarker.css(style);
    };
    /**
     * Refreshes the playback position. Can be used by subclasses to refresh the position when
     * the size of the component changes.
     */
    SeekBar.prototype.refreshPlaybackPosition = function () {
        this.setPlaybackPosition(this.playbackPositionPercentage);
    };
    /**
     * Sets the position until which media is buffered.
     * @param percent a number between 0 and 100
     */
    SeekBar.prototype.setBufferPosition = function (percent) {
        this.setPosition(this.seekBarBufferPosition, percent);
    };
    /**
     * Sets the position where a seek, if executed, would jump to.
     * @param percent a number between 0 and 100
     */
    SeekBar.prototype.setSeekPosition = function (percent) {
        this.setPosition(this.seekBarSeekPosition, percent);
    };
    /**
     * Set the actual position (width or height) of a DOM element that represent a bar in the seek bar.
     * @param element the element to set the position for
     * @param percent a number between 0 and 100
     */
    SeekBar.prototype.setPosition = function (element, percent) {
        var scale = percent / 100;
        var style = this.config.vertical ?
            // -ms-transform required for IE9
            { 'transform': 'scaleY(' + scale + ')', '-ms-transform': 'scaleY(' + scale + ')' } :
            { 'transform': 'scaleX(' + scale + ')', '-ms-transform': 'scaleX(' + scale + ')' };
        element.css(style);
    };
    /**
     * Puts the seek bar into or out of seeking state by adding/removing a class to the DOM element. This can be used
     * to adjust the styling while seeking.
     *
     * @param seeking should be true when entering seek state, false when exiting the seek state
     */
    SeekBar.prototype.setSeeking = function (seeking) {
        if (seeking) {
            this.getDomElement().addClass(this.prefixCss(SeekBar.CLASS_SEEKING));
        }
        else {
            this.getDomElement().removeClass(this.prefixCss(SeekBar.CLASS_SEEKING));
        }
    };
    /**
     * Checks if the seek bar is currently in the seek state.
     * @returns {boolean} true if in seek state, else false
     */
    SeekBar.prototype.isSeeking = function () {
        return this.getDomElement().hasClass(this.prefixCss(SeekBar.CLASS_SEEKING));
    };
    /**
     * Checks if the seek bar has a {@link SeekBarLabel}.
     * @returns {boolean} true if the seek bar has a label, else false
     */
    SeekBar.prototype.hasLabel = function () {
        return this.label != null;
    };
    /**
     * Gets the label of this seek bar.
     * @returns {SeekBarLabel} the label if this seek bar has a label, else null
     */
    SeekBar.prototype.getLabel = function () {
        return this.label;
    };
    SeekBar.prototype.onSeekEvent = function () {
        this.seekBarEvents.onSeek.dispatch(this);
    };
    SeekBar.prototype.onSeekPreviewEvent = function (percentage, scrubbing) {
        var snappedMarker = this.getMarkerAtPosition(percentage);
        if (this.label) {
            this.label.getDomElement().css({
                'left': (snappedMarker ? snappedMarker.time : percentage) + '%',
            });
        }
        this.seekBarEvents.onSeekPreview.dispatch(this, {
            scrubbing: scrubbing,
            position: percentage,
            marker: snappedMarker,
        });
    };
    SeekBar.prototype.onSeekedEvent = function (percentage) {
        this.seekBarEvents.onSeeked.dispatch(this, percentage);
    };
    Object.defineProperty(SeekBar.prototype, "onSeek", {
        /**
         * Gets the event that is fired when a scrubbing seek operation is started.
         * @returns {Event<SeekBar, NoArgs>}
         */
        get: function () {
            return this.seekBarEvents.onSeek.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SeekBar.prototype, "onSeekPreview", {
        /**
         * Gets the event that is fired during a scrubbing seek (to indicate that the seek preview, i.e. the video frame,
         * should be updated), or during a normal seek preview when the seek bar is hovered (and the seek target,
         * i.e. the seek bar label, should be updated).
         * @returns {Event<SeekBar, SeekPreviewEventArgs>}
         */
        get: function () {
            return this.seekBarEvents.onSeekPreview.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SeekBar.prototype, "onSeeked", {
        /**
         * Gets the event that is fired when a scrubbing seek has finished or when a direct seek is issued.
         * @returns {Event<SeekBar, number>}
         */
        get: function () {
            return this.seekBarEvents.onSeeked.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    SeekBar.prototype.onShowEvent = function () {
        _super.prototype.onShowEvent.call(this);
        // Refresh the position of the playback position when the seek bar becomes visible. To correctly set the position,
        // the DOM element must be fully initialized an have its size calculated, because the position is set as an absolute
        // value calculated from the size. This required size is not known when it is hidden.
        // For such cases, we refresh the position here in onShow because here it is guaranteed that the component knows
        // its size and can set the position correctly.
        this.refreshPlaybackPosition();
    };
    return SeekBar;
}(component_1.Component));
SeekBar.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED = -1;
/**
 * The CSS class that is added to the DOM element while the seek bar is in 'seeking' state.
 */
SeekBar.CLASS_SEEKING = 'seeking';
exports.SeekBar = SeekBar;


/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var StringUtils;
(function (StringUtils) {
    StringUtils.FORMAT_HHMMSS = 'hh:mm:ss';
    StringUtils.FORMAT_MMSS = 'mm:ss';
    /**
     * Formats a number of seconds into a time string with the pattern hh:mm:ss.
     *
     * @param totalSeconds the total number of seconds to format to string
     * @param format the time format to output (default: hh:mm:ss)
     * @returns {string} the formatted time string
     */
    function secondsToTime(totalSeconds, format) {
        if (format === void 0) { format = StringUtils.FORMAT_HHMMSS; }
        var isNegative = totalSeconds < 0;
        if (isNegative) {
            // If the time is negative, we make it positive for the calculation below
            // (else we'd get all negative numbers) and reattach the negative sign later.
            totalSeconds = -totalSeconds;
        }
        // Split into separate time parts
        var hours = Math.floor(totalSeconds / 3600);
        var minutes = Math.floor(totalSeconds / 60) - hours * 60;
        var seconds = Math.floor(totalSeconds) % 60;
        return (isNegative ? '-' : '') + format
            .replace('hh', leftPadWithZeros(hours, 2))
            .replace('mm', leftPadWithZeros(minutes, 2))
            .replace('ss', leftPadWithZeros(seconds, 2));
    }
    StringUtils.secondsToTime = secondsToTime;
    /**
     * Converts a number to a string and left-pads it with zeros to the specified length.
     * Example: leftPadWithZeros(123, 5) => '00123'
     *
     * @param num the number to convert to string and pad with zeros
     * @param length the desired length of the padded string
     * @returns {string} the padded number as string
     */
    function leftPadWithZeros(num, length) {
        var text = num + '';
        var padding = '0000000000'.substr(0, length - text.length);
        return padding + text;
    }
    /**
     * Fills out placeholders in an ad message.
     *
     * Has the placeholders '{remainingTime[formatString]}', '{playedTime[formatString]}' and
     * '{adDuration[formatString]}', which are replaced by the remaining time until the ad can be skipped, the current
     * time or the ad duration. The format string is optional. If not specified, the placeholder is replaced by the time
     * in seconds. If specified, it must be of the following format:
     * - %d - Inserts the time as an integer.
     * - %0Nd - Inserts the time as an integer with leading zeroes, if the length of the time string is smaller than N.
     * - %f - Inserts the time as a float.
     * - %0Nf - Inserts the time as a float with leading zeroes.
     * - %.Mf - Inserts the time as a float with M decimal places. Can be combined with %0Nf, e.g. %04.2f (the time
     * 10.123
     * would be printed as 0010.12).
     * - %hh:mm:ss
     * - %mm:ss
     *
     * @param adMessage an ad message with optional placeholders to fill
     * @param skipOffset if specified, {remainingTime} will be filled with the remaining time until the ad can be skipped
     * @param player the player to get the time data from
     * @returns {string} the ad message with filled placeholders
     */
    function replaceAdMessagePlaceholders(adMessage, skipOffset, player) {
        var adMessagePlaceholderRegex = new RegExp('\\{(remainingTime|playedTime|adDuration)(}|%((0[1-9]\\d*(\\.\\d+(d|f)|d|f)|\\.\\d+f|d|f)|hh:mm:ss|mm:ss)})', 'g');
        return adMessage.replace(adMessagePlaceholderRegex, function (formatString) {
            var time = 0;
            if (formatString.indexOf('remainingTime') > -1) {
                if (skipOffset) {
                    time = Math.ceil(skipOffset - player.getCurrentTime());
                }
                else {
                    time = player.getDuration() - player.getCurrentTime();
                }
            }
            else if (formatString.indexOf('playedTime') > -1) {
                time = player.getCurrentTime();
            }
            else if (formatString.indexOf('adDuration') > -1) {
                time = player.getDuration();
            }
            return formatNumber(time, formatString);
        });
    }
    StringUtils.replaceAdMessagePlaceholders = replaceAdMessagePlaceholders;
    function formatNumber(time, format) {
        var formatStringValidationRegex = /%((0[1-9]\d*(\.\d+(d|f)|d|f)|\.\d+f|d|f)|hh:mm:ss|mm:ss)/;
        var leadingZeroesRegex = /(%0[1-9]\d*)(?=(\.\d+f|f|d))/;
        var decimalPlacesRegex = /\.\d*(?=f)/;
        if (!formatStringValidationRegex.test(format)) {
            // If the format is invalid, we set a default fallback format
            format = '%d';
        }
        // Determine the number of leading zeros
        var leadingZeroes = 0;
        var leadingZeroesMatches = format.match(leadingZeroesRegex);
        if (leadingZeroesMatches) {
            leadingZeroes = parseInt(leadingZeroesMatches[0].substring(2));
        }
        // Determine the number of decimal places
        var numDecimalPlaces = null;
        var decimalPlacesMatches = format.match(decimalPlacesRegex);
        if (decimalPlacesMatches && !isNaN(parseInt(decimalPlacesMatches[0].substring(1)))) {
            numDecimalPlaces = parseInt(decimalPlacesMatches[0].substring(1));
            if (numDecimalPlaces > 20) {
                numDecimalPlaces = 20;
            }
        }
        // Float format
        if (format.indexOf('f') > -1) {
            var timeString = '';
            if (numDecimalPlaces !== null) {
                // Apply fixed number of decimal places
                timeString = time.toFixed(numDecimalPlaces);
            }
            else {
                timeString = '' + time;
            }
            // Apply leading zeros
            if (timeString.indexOf('.') > -1) {
                return leftPadWithZeros(timeString, timeString.length + (leadingZeroes - timeString.indexOf('.')));
            }
            else {
                return leftPadWithZeros(timeString, leadingZeroes);
            }
        }
        else if (format.indexOf(':') > -1) {
            var totalSeconds = Math.ceil(time);
            // hh:mm:ss format
            if (format.indexOf('hh') > -1) {
                return secondsToTime(totalSeconds);
            }
            else {
                var minutes = Math.floor(totalSeconds / 60);
                var seconds = totalSeconds % 60;
                return leftPadWithZeros(minutes, 2) + ':' + leftPadWithZeros(seconds, 2);
            }
        }
        else {
            return leftPadWithZeros(Math.ceil(time), leadingZeroes);
        }
    }
})(StringUtils = exports.StringUtils || (exports.StringUtils = {}));


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(1);
var uiutils_1 = __webpack_require__(16);
var spacer_1 = __webpack_require__(19);
/**
 * A container for main player control components, e.g. play toggle button, seek bar, volume control, fullscreen toggle
 * button.
 */
var ControlBar = (function (_super) {
    __extends(ControlBar, _super);
    function ControlBar(config, autoHide) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-controlbar',
            hidden: autoHide,
        }, _this.config);
        return _this;
    }
    ControlBar.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        var self = this;
        // Counts how many components are hovered and block hiding of the control bar
        var hoverStackCount = 0;
        // Track hover status of child components
        uiutils_1.UIUtils.traverseTree(this, function (component) {
            // Do not track hover status of child containers or spacers, only of 'real' controls
            if (component instanceof container_1.Container || component instanceof spacer_1.Spacer) {
                return;
            }
            // Subscribe hover event and keep a count of the number of hovered children
            component.onHoverChanged.subscribe(function (sender, args) {
                if (args.hovered) {
                    hoverStackCount++;
                }
                else {
                    hoverStackCount--;
                }
            });
        });
        uimanager.onControlsShow.subscribe(function () {
            if (self.config.hidden) {
                self.show();
            }
        });
        uimanager.onPreviewControlsHide.subscribe(function (sender, args) {
            // Cancel the hide event if hovered child components block hiding
            args.cancel = (hoverStackCount > 0);
        });
        uimanager.onControlsHide.subscribe(function () {
            if (self.config.hidden) {
                self.hide();
            }
        });
    };
    return ControlBar;
}(container_1.Container));
exports.ControlBar = ControlBar;


/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(1);
var UIUtils;
(function (UIUtils) {
    function traverseTree(component, visit) {
        var recursiveTreeWalker = function (component, parent) {
            visit(component, parent);
            // If the current component is a container, visit it's children
            if (component instanceof container_1.Container) {
                for (var _i = 0, _a = component.getComponents(); _i < _a.length; _i++) {
                    var childComponent = _a[_i];
                    recursiveTreeWalker(childComponent, component);
                }
            }
        };
        // Walk and configure the component tree
        recursiveTreeWalker(component);
    }
    UIUtils.traverseTree = traverseTree;
})(UIUtils = exports.UIUtils || (exports.UIUtils = {}));


/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(1);
var dom_1 = __webpack_require__(0);
var timeout_1 = __webpack_require__(10);
var playerutils_1 = __webpack_require__(5);
/**
 * The base container that contains all of the UI. The UIContainer is passed to the {@link UIManager} to build and
 * setup the UI.
 */
var UIContainer = (function (_super) {
    __extends(UIContainer, _super);
    function UIContainer(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-uicontainer',
            hideDelay: 2500,
        }, _this.config);
        return _this;
    }
    UIContainer.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        this.configureUIShowHide(player, uimanager);
        this.configurePlayerStates(player, uimanager);
    };
    UIContainer.prototype.configureUIShowHide = function (player, uimanager) {
        var _this = this;
        var container = this.getDomElement();
        var config = this.getConfig();
        if (config.hideDelay === -1) {
            uimanager.onConfigured.subscribe(function () { return uimanager.onControlsShow.dispatch(_this); });
            return;
        }
        var isUiShown = false;
        var isSeeking = false;
        var isFirstTouch = true;
        var showUi = function () {
            if (!isUiShown) {
                // Let subscribers know that they should reveal themselves
                uimanager.onControlsShow.dispatch(_this);
                isUiShown = true;
            }
            // Don't trigger timeout while seeking (it will be triggered once the seek is finished) or casting
            if (!isSeeking && !player.isCasting()) {
                _this.uiHideTimeout.start();
            }
        };
        var hideUi = function () {
            // Hide the UI only if it is shown, and if not casting
            if (isUiShown && !player.isCasting()) {
                // Issue a preview event to check if we are good to hide the controls
                var previewHideEventArgs = {};
                uimanager.onPreviewControlsHide.dispatch(_this, previewHideEventArgs);
                if (!previewHideEventArgs.cancel) {
                    // If the preview wasn't canceled, let subscribers know that they should now hide themselves
                    uimanager.onControlsHide.dispatch(_this);
                    isUiShown = false;
                }
                else {
                    // If the hide preview was canceled, continue to show UI
                    showUi();
                }
            }
        };
        // Timeout to defer UI hiding by the configured delay time
        this.uiHideTimeout = new timeout_1.Timeout(config.hideDelay, hideUi);
        // On touch displays, the first touch reveals the UI
        container.on('touchend', function (e) {
            if (!isUiShown) {
                // Only if the UI is hidden, we prevent other actions (except for the first touch) and reveal the UI instead.
                // The first touch is not prevented to let other listeners receive the event and trigger an initial action, e.g.
                // the huge playback button can directly start playback instead of requiring a double tap which 1. reveals
                // the UI and 2. starts playback.
                if (isFirstTouch) {
                    isFirstTouch = false;
                }
                else {
                    e.preventDefault();
                }
                showUi();
            }
        });
        // When the mouse enters, we show the UI
        container.on('mouseenter', function () {
            showUi();
        });
        // When the mouse moves within, we show the UI
        container.on('mousemove', function () {
            showUi();
        });
        // When the mouse leaves, we can prepare to hide the UI, except a seek is going on
        container.on('mouseleave', function () {
            // When a seek is going on, the seek scrub pointer may exit the UI area while still seeking, and we do not hide
            // the UI in such cases
            if (!isSeeking) {
                _this.uiHideTimeout.start();
            }
        });
        uimanager.onSeek.subscribe(function () {
            _this.uiHideTimeout.clear(); // Don't hide UI while a seek is in progress
            isSeeking = true;
        });
        uimanager.onSeeked.subscribe(function () {
            isSeeking = false;
            _this.uiHideTimeout.start(); // Re-enable UI hide timeout after a seek
        });
        player.addEventHandler(player.EVENT.ON_CAST_STARTED, function () {
            showUi(); // Show UI when a Cast session has started (UI will then stay permanently on during the session)
        });
    };
    UIContainer.prototype.configurePlayerStates = function (player, uimanager) {
        var _this = this;
        var container = this.getDomElement();
        // Convert player states into CSS class names
        var stateClassNames = [];
        for (var state in playerutils_1.PlayerUtils.PlayerState) {
            if (isNaN(Number(state))) {
                var enumName = playerutils_1.PlayerUtils.PlayerState[playerutils_1.PlayerUtils.PlayerState[state]];
                stateClassNames[playerutils_1.PlayerUtils.PlayerState[state]] =
                    this.prefixCss(UIContainer.STATE_PREFIX + enumName.toLowerCase());
            }
        }
        var removeStates = function () {
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.IDLE]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PREPARED]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PLAYING]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PAUSED]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.FINISHED]);
        };
        player.addEventHandler(player.EVENT.ON_READY, function () {
            removeStates();
            container.addClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PREPARED]);
        });
        player.addEventHandler(player.EVENT.ON_PLAY, function () {
            removeStates();
            container.addClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PLAYING]);
        });
        player.addEventHandler(player.EVENT.ON_PAUSED, function () {
            removeStates();
            container.addClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PAUSED]);
        });
        player.addEventHandler(player.EVENT.ON_PLAYBACK_FINISHED, function () {
            removeStates();
            container.addClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.FINISHED]);
        });
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, function () {
            removeStates();
            container.addClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.IDLE]);
        });
        // Init in current player state
        container.addClass(stateClassNames[playerutils_1.PlayerUtils.getState(player)]);
        // Fullscreen marker class
        player.addEventHandler(player.EVENT.ON_FULLSCREEN_ENTER, function () {
            container.addClass(_this.prefixCss(UIContainer.FULLSCREEN));
        });
        player.addEventHandler(player.EVENT.ON_FULLSCREEN_EXIT, function () {
            container.removeClass(_this.prefixCss(UIContainer.FULLSCREEN));
        });
        // Init fullscreen state
        if (player.isFullscreen()) {
            container.addClass(this.prefixCss(UIContainer.FULLSCREEN));
        }
        // Buffering marker class
        player.addEventHandler(player.EVENT.ON_STALL_STARTED, function () {
            container.addClass(_this.prefixCss(UIContainer.BUFFERING));
        });
        player.addEventHandler(player.EVENT.ON_STALL_ENDED, function () {
            container.removeClass(_this.prefixCss(UIContainer.BUFFERING));
        });
        // Init buffering state
        if (player.isStalled()) {
            container.addClass(this.prefixCss(UIContainer.BUFFERING));
        }
        // RemoteControl marker class
        player.addEventHandler(player.EVENT.ON_CAST_STARTED, function () {
            container.addClass(_this.prefixCss(UIContainer.REMOTE_CONTROL));
        });
        player.addEventHandler(player.EVENT.ON_CAST_STOPPED, function () {
            container.removeClass(_this.prefixCss(UIContainer.REMOTE_CONTROL));
        });
        // Init RemoteControl state
        if (player.isCasting()) {
            container.addClass(this.prefixCss(UIContainer.REMOTE_CONTROL));
        }
        // Controls visibility marker class
        uimanager.onControlsShow.subscribe(function () {
            container.removeClass(_this.prefixCss(UIContainer.CONTROLS_HIDDEN));
            container.addClass(_this.prefixCss(UIContainer.CONTROLS_SHOWN));
        });
        uimanager.onControlsHide.subscribe(function () {
            container.removeClass(_this.prefixCss(UIContainer.CONTROLS_SHOWN));
            container.addClass(_this.prefixCss(UIContainer.CONTROLS_HIDDEN));
        });
        // Layout size classes
        var updateLayoutSizeClasses = function (width, height) {
            container.removeClass(_this.prefixCss('layout-max-width-400'));
            container.removeClass(_this.prefixCss('layout-max-width-600'));
            container.removeClass(_this.prefixCss('layout-max-width-800'));
            container.removeClass(_this.prefixCss('layout-max-width-1200'));
            if (width <= 400) {
                container.addClass(_this.prefixCss('layout-max-width-400'));
            }
            else if (width <= 600) {
                container.addClass(_this.prefixCss('layout-max-width-600'));
            }
            else if (width <= 800) {
                container.addClass(_this.prefixCss('layout-max-width-800'));
            }
            else if (width <= 1200) {
                container.addClass(_this.prefixCss('layout-max-width-1200'));
            }
        };
        player.addEventHandler(player.EVENT.ON_PLAYER_RESIZE, function (e) {
            // Convert strings (with "px" suffix) to ints
            var width = Math.round(Number(e.width.substring(0, e.width.length - 2)));
            var height = Math.round(Number(e.height.substring(0, e.height.length - 2)));
            updateLayoutSizeClasses(width, height);
        });
        // Init layout state
        updateLayoutSizeClasses(new dom_1.DOM(player.getFigure()).width(), new dom_1.DOM(player.getFigure()).height());
    };
    UIContainer.prototype.release = function () {
        _super.prototype.release.call(this);
        this.uiHideTimeout.clear();
    };
    UIContainer.prototype.toDomElement = function () {
        var container = _super.prototype.toDomElement.call(this);
        // Detect flexbox support (not supported in IE9)
        if (document && typeof document.createElement('p').style.flex !== 'undefined') {
            container.addClass(this.prefixCss('flexbox'));
        }
        else {
            container.addClass(this.prefixCss('no-flexbox'));
        }
        return container;
    };
    return UIContainer;
}(container_1.Container));
UIContainer.STATE_PREFIX = 'player-state-';
UIContainer.FULLSCREEN = 'fullscreen';
UIContainer.BUFFERING = 'buffering';
UIContainer.REMOTE_CONTROL = 'remote-control';
UIContainer.CONTROLS_SHOWN = 'controls-shown';
UIContainer.CONTROLS_HIDDEN = 'controls-hidden';
exports.UIContainer = UIContainer;


/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var label_1 = __webpack_require__(7);
var playerutils_1 = __webpack_require__(5);
var stringutils_1 = __webpack_require__(14);
var PlaybackTimeLabelMode;
(function (PlaybackTimeLabelMode) {
    PlaybackTimeLabelMode[PlaybackTimeLabelMode["CurrentTime"] = 0] = "CurrentTime";
    PlaybackTimeLabelMode[PlaybackTimeLabelMode["TotalTime"] = 1] = "TotalTime";
    PlaybackTimeLabelMode[PlaybackTimeLabelMode["CurrentAndTotalTime"] = 2] = "CurrentAndTotalTime";
})(PlaybackTimeLabelMode = exports.PlaybackTimeLabelMode || (exports.PlaybackTimeLabelMode = {}));
/**
 * A label that display the current playback time and the total time through {@link PlaybackTimeLabel#setTime setTime}
 * or any string through {@link PlaybackTimeLabel#setText setText}.
 */
var PlaybackTimeLabel = (function (_super) {
    __extends(PlaybackTimeLabel, _super);
    function PlaybackTimeLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-playbacktimelabel',
            timeLabelMode: PlaybackTimeLabelMode.CurrentAndTotalTime,
            hideInLivePlayback: false,
        }, _this.config);
        return _this;
    }
    PlaybackTimeLabel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var live = false;
        var liveCssClass = this.prefixCss('ui-playbacktimelabel-live');
        var liveEdgeCssClass = this.prefixCss('ui-playbacktimelabel-live-edge');
        var minWidth = 0;
        var liveClickHandler = function () {
            player.timeShift(0);
        };
        var updateLiveState = function () {
            // Player is playing a live stream when the duration is infinite
            live = player.isLive();
            // Attach/detach live marker class
            if (live) {
                _this.getDomElement().addClass(liveCssClass);
                _this.setText('Live');
                if (config.hideInLivePlayback) {
                    _this.hide();
                }
                _this.onClick.subscribe(liveClickHandler);
                updateLiveTimeshiftState();
            }
            else {
                _this.getDomElement().removeClass(liveCssClass);
                _this.getDomElement().removeClass(liveEdgeCssClass);
                _this.show();
                _this.onClick.unsubscribe(liveClickHandler);
            }
        };
        var updateLiveTimeshiftState = function () {
            if (player.getTimeShift() === 0) {
                _this.getDomElement().addClass(liveEdgeCssClass);
            }
            else {
                _this.getDomElement().removeClass(liveEdgeCssClass);
            }
        };
        var liveStreamDetector = new playerutils_1.PlayerUtils.LiveStreamDetector(player);
        liveStreamDetector.onLiveChanged.subscribe(function (sender, args) {
            live = args.live;
            updateLiveState();
        });
        liveStreamDetector.detect(); // Initial detection
        var playbackTimeHandler = function () {
            if (!live && player.getDuration() !== Infinity) {
                _this.setTime(player.getCurrentTime(), player.getDuration());
            }
            // To avoid 'jumping' in the UI by varying label sizes due to non-monospaced fonts,
            // we gradually increase the min-width with the content to reach a stable size.
            var width = _this.getDomElement().width();
            if (width > minWidth) {
                minWidth = width;
                _this.getDomElement().css({
                    'min-width': minWidth + 'px',
                });
            }
        };
        player.addEventHandler(player.EVENT.ON_TIME_CHANGED, playbackTimeHandler);
        player.addEventHandler(player.EVENT.ON_SEEKED, playbackTimeHandler);
        player.addEventHandler(player.EVENT.ON_CAST_TIME_UPDATED, playbackTimeHandler);
        player.addEventHandler(player.EVENT.ON_TIME_SHIFT, updateLiveTimeshiftState);
        player.addEventHandler(player.EVENT.ON_TIME_SHIFTED, updateLiveTimeshiftState);
        var init = function () {
            // Reset min-width when a new source is ready (especially for switching VOD/Live modes where the label content
            // changes)
            minWidth = 0;
            _this.getDomElement().css({
                'min-width': null,
            });
            // Set time format depending on source duration
            _this.timeFormat = Math.abs(player.isLive() ? player.getMaxTimeShift() : player.getDuration()) >= 3600 ?
                stringutils_1.StringUtils.FORMAT_HHMMSS : stringutils_1.StringUtils.FORMAT_MMSS;
            // Update time after the format has been set
            playbackTimeHandler();
        };
        player.addEventHandler(player.EVENT.ON_READY, init);
        init();
    };
    /**
     * Sets the current playback time and total duration.
     * @param playbackSeconds the current playback time in seconds
     * @param durationSeconds the total duration in seconds
     */
    PlaybackTimeLabel.prototype.setTime = function (playbackSeconds, durationSeconds) {
        var currentTime = stringutils_1.StringUtils.secondsToTime(playbackSeconds, this.timeFormat);
        var totalTime = stringutils_1.StringUtils.secondsToTime(durationSeconds, this.timeFormat);
        switch (this.config.timeLabelMode) {
            case PlaybackTimeLabelMode.CurrentTime:
                this.setText("" + currentTime);
                break;
            case PlaybackTimeLabelMode.TotalTime:
                this.setText("" + totalTime);
                break;
            case PlaybackTimeLabelMode.CurrentAndTotalTime:
                this.setText(currentTime + " / " + totalTime);
                break;
        }
    };
    /**
     * Sets the current time format
     * @param timeFormat the time format
     */
    PlaybackTimeLabel.prototype.setTimeFormat = function (timeFormat) {
        this.timeFormat = timeFormat;
    };
    return PlaybackTimeLabel;
}(label_1.Label));
exports.PlaybackTimeLabel = PlaybackTimeLabel;


/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
/**
 * A dummy component that just reserves some space and does nothing else.
 */
var Spacer = (function (_super) {
    __extends(Spacer, _super);
    function Spacer(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-spacer',
        }, _this.config);
        return _this;
    }
    Spacer.prototype.onShowEvent = function () {
        // disable event firing by overwriting and not calling super
    };
    Spacer.prototype.onHideEvent = function () {
        // disable event firing by overwriting and not calling super
    };
    Spacer.prototype.onHoverChangedEvent = function (hovered) {
        // disable event firing by overwriting and not calling super
    };
    return Spacer;
}(component_1.Component));
exports.Spacer = Spacer;


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(1);
var label_1 = __webpack_require__(7);
var component_1 = __webpack_require__(2);
var stringutils_1 = __webpack_require__(14);
var imageloader_1 = __webpack_require__(38);
/**
 * A label for a {@link SeekBar} that can display the seek target time, a thumbnail, and title (e.g. chapter title).
 */
var SeekBarLabel = (function (_super) {
    __extends(SeekBarLabel, _super);
    function SeekBarLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.timeLabel = new label_1.Label({ cssClasses: ['seekbar-label-time'] });
        _this.titleLabel = new label_1.Label({ cssClasses: ['seekbar-label-title'] });
        _this.thumbnail = new component_1.Component({ cssClasses: ['seekbar-thumbnail'] });
        _this.thumbnailImageLoader = new imageloader_1.ImageLoader();
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-seekbar-label',
            components: [new container_1.Container({
                    components: [
                        // this.thumbnail,
                        new container_1.Container({
                            components: [_this.titleLabel, _this.timeLabel],
                            cssClass: 'seekbar-label-metadata',
                        })
                    ],
                    cssClass: 'seekbar-label-inner',
                })],
            hidden: true,
        }, _this.config);
        return _this;
    }
    SeekBarLabel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        uimanager.onSeekPreview.subscribeRateLimited(function (sender, args) {
            if (player.isLive()) {
                var maxTimeShift = player.getMaxTimeShift();
                var time = maxTimeShift - maxTimeShift * (args.position / 100);
                _this.setTime(time);
            }
            else {
                var percentage = 0;
                if (args.marker) {
                    percentage = args.marker.time;
                    _this.setTitleText(args.marker.title);
                }
                else {
                    percentage = args.position;
                    _this.setTitleText(null);
                }
                var time = player.getDuration() * (percentage / 100);
                _this.setTime(time);
                _this.setThumbnail(player.getThumb(time));
            }
        }, 100);
        var init = function () {
            // Set time format depending on source duration
            _this.timeFormat = Math.abs(player.isLive() ? player.getMaxTimeShift() : player.getDuration()) >= 3600 ?
                stringutils_1.StringUtils.FORMAT_HHMMSS : stringutils_1.StringUtils.FORMAT_MMSS;
        };
        player.addEventHandler(player.EVENT.ON_READY, init);
        init();
    };
    /**
     * Sets arbitrary text on the label.
     * @param text the text to show on the label
     */
    SeekBarLabel.prototype.setText = function (text) {
        this.timeLabel.setText(text);
    };
    /**
     * Sets a time to be displayed on the label.
     * @param seconds the time in seconds to display on the label
     */
    SeekBarLabel.prototype.setTime = function (seconds) {
        this.setText(stringutils_1.StringUtils.secondsToTime(seconds, this.timeFormat));
    };
    /**
     * Sets the text on the title label.
     * @param text the text to show on the label
     */
    SeekBarLabel.prototype.setTitleText = function (text) {
        this.titleLabel.setText(text);
    };
    /**
     * Sets or removes a thumbnail on the label.
     * @param thumbnail the thumbnail to display on the label or null to remove a displayed thumbnail
     */
    SeekBarLabel.prototype.setThumbnail = function (thumbnail) {
        if (thumbnail === void 0) { thumbnail = null; }
        var thumbnailElement = this.thumbnail.getDomElement();
        if (thumbnail == null) {
            thumbnailElement.css({
                'background-image': null,
                'display': null,
                'width': null,
                'height': null,
            });
        }
        else {
            // We use the thumbnail image loader to make sure the thumbnail is loaded and it's size is known before be can
            // calculate the CSS properties and set them on the element.
            this.thumbnailImageLoader.load(thumbnail.url, function (url, width, height) {
                var thumbnailCountX = width / thumbnail.w;
                var thumbnailCountY = height / thumbnail.h;
                var thumbnailIndexX = thumbnail.x / thumbnail.w;
                var thumbnailIndexY = thumbnail.y / thumbnail.h;
                var sizeX = 100 * thumbnailCountX;
                var sizeY = 100 * thumbnailCountY;
                var offsetX = 100 * thumbnailIndexX;
                var offsetY = 100 * thumbnailIndexY;
                var aspectRatio = 1 / thumbnail.w * thumbnail.h;
                // The thumbnail size is set by setting the CSS 'width' and 'padding-bottom' properties. 'padding-bottom' is
                // used because it is relative to the width and can be used to set the aspect ratio of the thumbnail.
                // A default value for width is set in the stylesheet and can be overwritten from there or anywhere else.
                thumbnailElement.css({
                    'display': 'inherit',
                    'background-image': "url(" + thumbnail.url + ")",
                    'padding-bottom': 100 * aspectRatio + "%",
                    'background-size': sizeX + "% " + sizeY + "%",
                    'background-position': "-" + offsetX + "% -" + offsetY + "%",
                });
            });
        }
    };
    return SeekBarLabel;
}(container_1.Container));
exports.SeekBarLabel = SeekBarLabel;


/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var listselector_1 = __webpack_require__(22);
var dom_1 = __webpack_require__(0);
/**
 * A simple select box providing the possibility to select a single item out of a list of available items.
 *
 * DOM example:
 * <code>
 *     <select class='ui-selectbox'>
 *         <option value='key'>label</option>
 *         ...
 *     </select>
 * </code>
 */
var SelectBox = (function (_super) {
    __extends(SelectBox, _super);
    function SelectBox(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-selectbox',
        }, _this.config);
        return _this;
    }
    SelectBox.prototype.toDomElement = function () {
        var _this = this;
        var selectElement = new dom_1.DOM('select', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        });
        this.selectElement = selectElement;
        this.updateDomItems();
        selectElement.on('change', function () {
            var value = selectElement.val();
            _this.onItemSelectedEvent(value, false);
        });
        return selectElement;
    };
    SelectBox.prototype.updateDomItems = function (selectedValue) {
        if (selectedValue === void 0) { selectedValue = null; }
        // Delete all children
        this.selectElement.empty();
        // Add updated children
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            var optionElement = new dom_1.DOM('option', {
                'value': item.key,
            }).html(item.label);
            if (item.key === String(selectedValue)) {
                optionElement.attr('selected', 'selected');
            }
            this.selectElement.append(optionElement);
        }
    };
    SelectBox.prototype.onItemAddedEvent = function (value) {
        _super.prototype.onItemAddedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    SelectBox.prototype.onItemRemovedEvent = function (value) {
        _super.prototype.onItemRemovedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    SelectBox.prototype.onItemSelectedEvent = function (value, updateDomItems) {
        if (updateDomItems === void 0) { updateDomItems = true; }
        _super.prototype.onItemSelectedEvent.call(this, value);
        if (updateDomItems) {
            this.updateDomItems(value);
        }
    };
    return SelectBox;
}(listselector_1.ListSelector));
exports.SelectBox = SelectBox;


/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var eventdispatcher_1 = __webpack_require__(3);
var arrayutils_1 = __webpack_require__(4);
var ListSelector = (function (_super) {
    __extends(ListSelector, _super);
    function ListSelector(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.listSelectorEvents = {
            onItemAdded: new eventdispatcher_1.EventDispatcher(),
            onItemRemoved: new eventdispatcher_1.EventDispatcher(),
            onItemSelected: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            items: [],
            cssClass: 'ui-listselector',
        }, _this.config);
        _this.items = _this.config.items;
        return _this;
    }
    ListSelector.prototype.getItemIndex = function (key) {
        for (var index in this.items) {
            if (key === this.items[index].key) {
                return parseInt(index);
            }
        }
        return -1;
    };
    /**
     * Checks if the specified item is part of this selector.
     * @param key the key of the item to check
     * @returns {boolean} true if the item is part of this selector, else false
     */
    ListSelector.prototype.hasItem = function (key) {
        return this.getItemIndex(key) > -1;
    };
    /**
     * Adds an item to this selector by appending it to the end of the list of items. If an item with the specified
     * key already exists, it is replaced.
     * @param key the key of the item to add
     * @param label the (human-readable) label of the item to add
     */
    ListSelector.prototype.addItem = function (key, label) {
        this.removeItem(key); // Try to remove key first to get overwrite behavior and avoid duplicate keys
        this.items.push({ key: key, label: label });
        this.onItemAddedEvent(key);
    };
    /**
     * Removes an item from this selector.
     * @param key the key of the item to remove
     * @returns {boolean} true if removal was successful, false if the item is not part of this selector
     */
    ListSelector.prototype.removeItem = function (key) {
        var index = this.getItemIndex(key);
        if (index > -1) {
            arrayutils_1.ArrayUtils.remove(this.items, this.items[index]);
            this.onItemRemovedEvent(key);
            return true;
        }
        return false;
    };
    /**
     * Selects an item from the items in this selector.
     * @param key the key of the item to select
     * @returns {boolean} true is the selection was successful, false if the selected item is not part of the selector
     */
    ListSelector.prototype.selectItem = function (key) {
        if (key === this.selectedItem) {
            // itemConfig is already selected, suppress any further action
            return true;
        }
        var index = this.getItemIndex(key);
        if (index > -1) {
            this.selectedItem = key;
            this.onItemSelectedEvent(key);
            return true;
        }
        return false;
    };
    /**
     * Returns the key of the selected item.
     * @returns {string} the key of the selected item or null if no item is selected
     */
    ListSelector.prototype.getSelectedItem = function () {
        return this.selectedItem;
    };
    /**
     * Removes all items from this selector.
     */
    ListSelector.prototype.clearItems = function () {
        // local copy for iteration after clear
        var items = this.items;
        // clear items
        this.items = [];
        // clear the selection as the selected item is also removed
        this.selectedItem = null;
        // fire events
        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
            var item = items_1[_i];
            this.onItemRemovedEvent(item.key);
        }
    };
    /**
     * Returns the number of items in this selector.
     * @returns {number}
     */
    ListSelector.prototype.itemCount = function () {
        return Object.keys(this.items).length;
    };
    ListSelector.prototype.onItemAddedEvent = function (key) {
        this.listSelectorEvents.onItemAdded.dispatch(this, key);
    };
    ListSelector.prototype.onItemRemovedEvent = function (key) {
        this.listSelectorEvents.onItemRemoved.dispatch(this, key);
    };
    ListSelector.prototype.onItemSelectedEvent = function (key) {
        this.listSelectorEvents.onItemSelected.dispatch(this, key);
    };
    Object.defineProperty(ListSelector.prototype, "onItemAdded", {
        /**
         * Gets the event that is fired when an item is added to the list of items.
         * @returns {Event<ListSelector<Config>, string>}
         */
        get: function () {
            return this.listSelectorEvents.onItemAdded.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListSelector.prototype, "onItemRemoved", {
        /**
         * Gets the event that is fired when an item is removed from the list of items.
         * @returns {Event<ListSelector<Config>, string>}
         */
        get: function () {
            return this.listSelectorEvents.onItemRemoved.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListSelector.prototype, "onItemSelected", {
        /**
         * Gets the event that is fired when an item is selected from the list of items.
         * @returns {Event<ListSelector<Config>, string>}
         */
        get: function () {
            return this.listSelectorEvents.onItemSelected.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return ListSelector;
}(component_1.Component));
exports.ListSelector = ListSelector;


/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(1);
var volumeslider_1 = __webpack_require__(24);
var volumetogglebutton_1 = __webpack_require__(25);
var timeout_1 = __webpack_require__(10);
/**
 * A composite volume control that consists of and internally manages a volume control button that can be used
 * for muting, and a (depending on the CSS style, e.g. slide-out) volume control bar.
 */
var VolumeControlButton = (function (_super) {
    __extends(VolumeControlButton, _super);
    function VolumeControlButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.volumeToggleButton = new volumetogglebutton_1.VolumeToggleButton();
        _this.volumeSlider = new volumeslider_1.VolumeSlider({
            vertical: config.vertical != null ? config.vertical : true,
            hidden: true,
        });
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-volumecontrolbutton',
            components: [_this.volumeToggleButton, _this.volumeSlider],
            hideDelay: 500,
        }, _this.config);
        return _this;
    }
    VolumeControlButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var volumeToggleButton = this.getVolumeToggleButton();
        var volumeSlider = this.getVolumeSlider();
        this.volumeSliderHideTimeout = new timeout_1.Timeout(this.getConfig().hideDelay, function () {
            volumeSlider.hide();
        });
        /*
         * Volume Slider visibility handling
         *
         * The volume slider shall be visible while the user hovers the mute toggle button, while the user hovers the
         * volume slider, and while the user slides the volume slider. If none of these situations are true, the slider
         * shall disappear.
         */
        var volumeSliderHovered = false;
        volumeToggleButton.getDomElement().on('mouseenter', function () {
            // Show volume slider when mouse enters the button area
            if (volumeSlider.isHidden()) {
                volumeSlider.show();
            }
            // Avoid hiding of the slider when button is hovered
            _this.volumeSliderHideTimeout.clear();
        });
        volumeToggleButton.getDomElement().on('mouseleave', function () {
            // Hide slider delayed when button is left
            _this.volumeSliderHideTimeout.reset();
        });
        volumeSlider.getDomElement().on('mouseenter', function () {
            // When the slider is entered, cancel the hide timeout activated by leaving the button
            _this.volumeSliderHideTimeout.clear();
            volumeSliderHovered = true;
        });
        volumeSlider.getDomElement().on('mouseleave', function () {
            // When mouse leaves the slider, only hide it if there is no slide operation in progress
            if (volumeSlider.isSeeking()) {
                _this.volumeSliderHideTimeout.clear();
            }
            else {
                _this.volumeSliderHideTimeout.reset();
            }
            volumeSliderHovered = false;
        });
        volumeSlider.onSeeked.subscribe(function () {
            // When a slide operation is done and the slider not hovered (mouse outside slider), hide slider delayed
            if (!volumeSliderHovered) {
                _this.volumeSliderHideTimeout.reset();
            }
        });
    };
    VolumeControlButton.prototype.release = function () {
        _super.prototype.release.call(this);
        this.volumeSliderHideTimeout.clear();
    };
    /**
     * Provides access to the internally managed volume toggle button.
     * @returns {VolumeToggleButton}
     */
    VolumeControlButton.prototype.getVolumeToggleButton = function () {
        return this.volumeToggleButton;
    };
    /**
     * Provides access to the internally managed volume silder.
     * @returns {VolumeSlider}
     */
    VolumeControlButton.prototype.getVolumeSlider = function () {
        return this.volumeSlider;
    };
    return VolumeControlButton;
}(container_1.Container));
exports.VolumeControlButton = VolumeControlButton;


/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var seekbar_1 = __webpack_require__(13);
/**
 * A simple volume slider component to adjust the player's volume setting.
 */
var VolumeSlider = (function (_super) {
    __extends(VolumeSlider, _super);
    function VolumeSlider(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-volumeslider',
            hideIfVolumeControlProhibited: true,
        }, _this.config);
        return _this;
    }
    VolumeSlider.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager, false);
        var config = this.getConfig();
        if (config.hideIfVolumeControlProhibited && !this.detectVolumeControlAvailability(player)) {
            this.hide();
            // We can just return from here, because the user will never interact with the control and any configured
            // functionality would only eat resources for no reason.
            return;
        }
        var volumeChangeHandler = function () {
            if (player.isMuted()) {
                _this.setPlaybackPosition(0);
                _this.setBufferPosition(0);
            }
            else {
                _this.setPlaybackPosition(player.getVolume());
                _this.setBufferPosition(player.getVolume());
            }
        };
        player.addEventHandler(player.EVENT.ON_READY, volumeChangeHandler);
        player.addEventHandler(player.EVENT.ON_VOLUME_CHANGED, volumeChangeHandler);
        player.addEventHandler(player.EVENT.ON_MUTED, volumeChangeHandler);
        player.addEventHandler(player.EVENT.ON_UNMUTED, volumeChangeHandler);
        this.onSeekPreview.subscribeRateLimited(function (sender, args) {
            if (args.scrubbing) {
                player.setVolume(args.position, VolumeSlider.issuerName);
            }
        }, 50);
        this.onSeeked.subscribe(function (sender, percentage) {
            player.setVolume(percentage, VolumeSlider.issuerName);
        });
        // Update the volume slider marker when the player resized, a source is loaded and player is ready,
        // or the UI is configured. Check the seekbar for a detailed description.
        player.addEventHandler(player.EVENT.ON_PLAYER_RESIZE, function () {
            _this.refreshPlaybackPosition();
        });
        player.addEventHandler(player.EVENT.ON_READY, function () {
            _this.refreshPlaybackPosition();
        });
        uimanager.onConfigured.subscribe(function () {
            _this.refreshPlaybackPosition();
        });
        // Init volume bar
        volumeChangeHandler();
    };
    VolumeSlider.prototype.detectVolumeControlAvailability = function (player) {
        // Store current player state so we can restore it later
        var volume = player.getVolume();
        var muted = player.isMuted();
        var playing = player.isPlaying();
        /*
         * "On iOS devices, the audio level is always under the user’s physical control. The volume property is not
         * settable in JavaScript. Reading the volume property always returns 1."
         * https://developer.apple.com/library/content/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html
         *
         * Our player API returns a volume range of [0, 100] so we need to check for 100 instead of 1.
         */
        // Only if the volume is 100, there's the possibility we are on a volume-control-restricted iOS device
        if (volume === 100) {
            // We set the volume to zero (that's the only value that does not unmute a muted player!)
            player.setVolume(0, VolumeSlider.issuerName);
            // Then we check if the value is still 100
            if (player.getVolume() === 100) {
                // If the volume stayed at 100, we're on a volume-control-restricted device
                return false;
            }
            else {
                // We can control volume, so we must restore the previous player state
                player.setVolume(volume, VolumeSlider.issuerName);
                if (muted) {
                    player.mute(VolumeSlider.issuerName);
                }
                if (playing) {
                    // The volume restore above pauses autoplay on mobile devices (e.g. Android) so we need to resume playback
                    // (We cannot check isPaused() here because it is not set when playback is prohibited by the mobile platform)
                    player.play(VolumeSlider.issuerName);
                }
                return true;
            }
        }
        else {
            // Volume is not 100, so we're definitely not on a volume-control-restricted iOS device
            return true;
        }
    };
    return VolumeSlider;
}(seekbar_1.SeekBar));
VolumeSlider.issuerName = 'ui';
exports.VolumeSlider = VolumeSlider;


/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(8);
/**
 * A button that toggles audio muting.
 */
var VolumeToggleButton = (function (_super) {
    __extends(VolumeToggleButton, _super);
    function VolumeToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-volumetogglebutton',
            text: 'Volume/Mute',
        }, _this.config);
        return _this;
    }
    VolumeToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var muteStateHandler = function () {
            if (player.isMuted()) {
                _this.on();
            }
            else {
                _this.off();
            }
        };
        var volumeLevelHandler = function () {
            // Toggle low class to display low volume icon below 50% volume
            if (player.getVolume() < 50) {
                _this.getDomElement().addClass(_this.prefixCss('low'));
            }
            else {
                _this.getDomElement().removeClass(_this.prefixCss('low'));
            }
        };
        player.addEventHandler(player.EVENT.ON_MUTED, muteStateHandler);
        player.addEventHandler(player.EVENT.ON_UNMUTED, muteStateHandler);
        player.addEventHandler(player.EVENT.ON_VOLUME_CHANGED, volumeLevelHandler);
        this.onClick.subscribe(function () {
            if (player.isMuted()) {
                player.unmute('ui-volumetogglebutton');
            }
            else {
                player.mute('ui-volumetogglebutton');
            }
        });
        // Startup init
        muteStateHandler();
        volumeLevelHandler();
    };
    return VolumeToggleButton;
}(togglebutton_1.ToggleButton));
exports.VolumeToggleButton = VolumeToggleButton;


/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(1);
var label_1 = __webpack_require__(7);
var tvnoisecanvas_1 = __webpack_require__(41);
/**
 * Overlays the player and displays error messages.
 */
var ErrorMessageOverlay = (function (_super) {
    __extends(ErrorMessageOverlay, _super);
    function ErrorMessageOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.errorLabel = new label_1.Label({ cssClass: 'ui-errormessage-label' });
        _this.tvNoiseBackground = new tvnoisecanvas_1.TvNoiseCanvas();
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-errormessage-overlay',
            components: [_this.tvNoiseBackground, _this.errorLabel],
            hidden: true,
        }, _this.config);
        return _this;
    }
    ErrorMessageOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        player.addEventHandler(player.EVENT.ON_ERROR, function (event) {
            var message = event.message;
            // Process message translations
            if (config.messages) {
                if (typeof config.messages === 'function') {
                    // Translation function for all errors
                    message = config.messages(event);
                }
                else if (config.messages[event.code]) {
                    // It's not a translation function, so it must be a map of strings or translation functions
                    var customMessage = config.messages[event.code];
                    if (typeof customMessage === 'string') {
                        message = customMessage;
                    }
                    else {
                        // The message is a translation function, so we call it
                        message = customMessage(event);
                    }
                }
            }
            _this.errorLabel.setText(message);
            _this.tvNoiseBackground.start();
            _this.show();
        });
        player.addEventHandler(player.EVENT.ON_SOURCE_LOADED, function (event) {
            if (_this.isShown()) {
                _this.tvNoiseBackground.stop();
                _this.hide();
            }
        });
    };
    ErrorMessageOverlay.prototype.release = function () {
        _super.prototype.release.call(this);
        // Canvas rendering must be explicitly stopped, else it just continues forever and hogs resources
        this.tvNoiseBackground.stop();
    };
    return ErrorMessageOverlay;
}(container_1.Container));
exports.ErrorMessageOverlay = ErrorMessageOverlay;


/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(1);
var hugeplaybacktogglebutton_1 = __webpack_require__(28);
/**
 * Overlays the player and displays error messages.
 */
var PlaybackToggleOverlay = (function (_super) {
    __extends(PlaybackToggleOverlay, _super);
    function PlaybackToggleOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.playbackToggleButton = new hugeplaybacktogglebutton_1.HugePlaybackToggleButton();
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-playbacktoggle-overlay',
            components: [_this.playbackToggleButton],
        }, _this.config);
        return _this;
    }
    return PlaybackToggleOverlay;
}(container_1.Container));
exports.PlaybackToggleOverlay = PlaybackToggleOverlay;


/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var playbacktogglebutton_1 = __webpack_require__(12);
var dom_1 = __webpack_require__(0);
/**
 * A button that overlays the video and toggles between playback and pause.
 */
var HugePlaybackToggleButton = (function (_super) {
    __extends(HugePlaybackToggleButton, _super);
    function HugePlaybackToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-hugeplaybacktogglebutton',
            text: 'Play/Pause',
        }, _this.config);
        return _this;
    }
    HugePlaybackToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        // Update button state through API events
        _super.prototype.configure.call(this, player, uimanager, false);
        var togglePlayback = function () {
            if (player.isPlaying()) {
                player.pause('ui');
            }
            else {
                player.play('ui');
            }
        };
        var toggleFullscreen = function () {
            if (player.isFullscreen()) {
                player.exitFullscreen();
            }
            else {
                player.enterFullscreen();
            }
        };
        var firstPlay = true;
        var clickTime = 0;
        var doubleClickTime = 0;
        /*
         * YouTube-style toggle button handling
         *
         * The goal is to prevent a short pause or playback interval between a click, that toggles playback, and a
         * double click, that toggles fullscreen. In this naive approach, the first click would e.g. start playback,
         * the second click would be detected as double click and toggle to fullscreen, and as second normal click stop
         * playback, which results is a short playback interval with max length of the double click detection
         * period (usually 500ms).
         *
         * To solve this issue, we defer handling of the first click for 200ms, which is almost unnoticeable to the user,
         * and just toggle playback if no second click (double click) has been registered during this period. If a double
         * click is registered, we just toggle the fullscreen. In the first 200ms, undesired playback changes thus cannot
         * happen. If a double click is registered within 500ms, we undo the playback change and switch fullscreen mode.
         * In the end, this method basically introduces a 200ms observing interval in which playback changes are prevented
         * if a double click happens.
         */
        this.onClick.subscribe(function () {
            // Directly start playback on first click of the button.
            // This is a required workaround for mobile browsers where video playback needs to be triggered directly
            // by the user. A deferred playback start through the timeout below is not considered as user action and
            // therefore ignored by mobile browsers.
            if (firstPlay) {
                // Try to start playback. Then we wait for ON_PLAY and only when it arrives, we disable the firstPlay flag.
                // If we disable the flag here, onClick was triggered programmatically instead of by a user interaction, and
                // playback is blocked (e.g. on mobile devices due to the programmatic play() call), we loose the chance to
                // ever start playback through a user interaction again with this button.
                togglePlayback();
                return;
            }
            var now = Date.now();
            if (now - clickTime < 200) {
                // We have a double click inside the 200ms interval, just toggle fullscreen mode
                toggleFullscreen();
                doubleClickTime = now;
                return;
            }
            else if (now - clickTime < 500) {
                // We have a double click inside the 500ms interval, undo playback toggle and toggle fullscreen mode
                toggleFullscreen();
                togglePlayback();
                doubleClickTime = now;
                return;
            }
            clickTime = now;
            setTimeout(function () {
                if (Date.now() - doubleClickTime > 200) {
                    // No double click detected, so we toggle playback and wait what happens next
                    togglePlayback();
                }
            }, 200);
        });
        player.addEventHandler(player.EVENT.ON_PLAY, function () {
            // Playback has really started, we can disable the flag to switch to normal toggle button handling
            firstPlay = false;
        });
        // Hide button while initializing a Cast session
        var castInitializationHandler = function (event) {
            if (event.type === player.EVENT.ON_CAST_START) {
                // Hide button when session is being initialized
                _this.hide();
            }
            else {
                // Show button when session is established or initialization was aborted
                _this.show();
            }
        };
        player.addEventHandler(player.EVENT.ON_CAST_START, castInitializationHandler);
        player.addEventHandler(player.EVENT.ON_CAST_STARTED, castInitializationHandler);
        player.addEventHandler(player.EVENT.ON_CAST_STOPPED, castInitializationHandler);
    };
    HugePlaybackToggleButton.prototype.toDomElement = function () {
        var buttonElement = _super.prototype.toDomElement.call(this);
        // Add child that contains the play button image
        // Setting the image directly on the button does not work together with scaling animations, because the button
        // can cover the whole video player are and scaling would extend it beyond. By adding an inner element, confined
        // to the size if the image, it can scale inside the player without overshooting.
        buttonElement.append(new dom_1.DOM('div', {
            'class': this.prefixCss('image'),
        }));
        return buttonElement;
    };
    return HugePlaybackToggleButton;
}(playbacktogglebutton_1.PlaybackToggleButton));
exports.HugePlaybackToggleButton = HugePlaybackToggleButton;


/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(1);
var component_1 = __webpack_require__(2);
// import PlayerEvent = bitmovin.PlayerAPI.PlayerEvent;
/**
 * Overlays the player and displays an audio-only indicator.
 */
var AudioOnlyOverlay = (function (_super) {
    __extends(AudioOnlyOverlay, _super);
    function AudioOnlyOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.audioonly = [
            new component_1.Component({ tag: 'div', cssClass: 'ui-audioonly-overlay-indicator' }),
        ];
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-audioonly-overlay',
            components: _this.audioonly,
            hidden: false,
        }, _this.config);
        return _this;
    }
    AudioOnlyOverlay.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        var self = this;
        var image = self.getDomElement().css('background-image');
        // Hide overlay when Player is paused, so we can see the Big Play Button
        // player.addEventHandler(player.EVENT.ON_PAUSED, (event) => {
        //   self.getDomElement().css('background-image', 'none');
        // });
        //
        // player.addEventHandler(player.EVENT.ON_PLAY, (event) => {
        //   self.getDomElement().css('background-image', image);
        // });
        //
        // // Hide overlay if player is  paused at init (e.g. on mobile devices)
        // if (!player.isPlaying()) {
        //   self.getDomElement().css('background-image', 'none');
        // }
    };
    return AudioOnlyOverlay;
}(container_1.Container));
exports.AudioOnlyOverlay = AudioOnlyOverlay;


/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(31);
__webpack_require__(34);
module.exports = __webpack_require__(47);


/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var angular = __webpack_require__(9);
var bitdash_controller_1 = __webpack_require__(32);
var bitdash_directive_1 = __webpack_require__(33);
exports.default = angular.module('mi.BitdashPlayer', [])
    .controller('MiBitdashController', bitdash_controller_1.default)
    .directive('miBitdashPlayer', bitdash_directive_1.default);


/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var angular = __webpack_require__(9);
var BitmovinController = (function () {
    function BitmovinController($scope, $log) {
        this.$scope = $scope;
        this.$log = $log;
        this.state = {};
        this.config = {};
        this.options = {};
    }
    BitmovinController.prototype.$onInit = function () {
        this.state = this.$scope.state = {};
        if (angular.isDefined(this.$scope.config) && angular.isDefined(this.$scope.config.key)) {
            this.config = this.$scope.config;
        }
        else {
            this.$log.error("basic config for bitdash player is missing!");
        }
        if (angular.isDefined(this.$scope.options)) {
            this.options = this.$scope.options;
        }
        if (angular.isDefined(this.$scope.webcast)) {
            this.processWebcast(this.$scope.webcast);
        }
    };
    BitmovinController.prototype.processWebcast = function (webcast) {
        var stateProperty = webcast.state + "StateData";
        if (angular.isDefined(this.options.forcedState)) {
            stateProperty = this.options.forcedState + "StateData";
        }
        if (webcast.state === 'ondemand') {
            var languageIndex_1 = 0;
            webcast.languages.some(function (lang, index) {
                if (webcast.language === lang.language) {
                    languageIndex_1 = index;
                    return true;
                }
            });
            this.state.data = webcast.languages[languageIndex_1].ondemandStateData;
        }
        else {
            this.state.data = webcast[stateProperty];
        }
        this.config.source = this.getPlayerConfigSource(webcast);
        this.config.style = { ux: false };
    };
    BitmovinController.prototype.getPlayerConfigSource = function (webcast) {
        return webcast.useDVRPlaybackInPostlive && webcast.state === 'postlive' ?
            this.getDVRPlaybackToPostlive(webcast)
            : this.getPlayerConfigSourceByState(webcast);
    };
    BitmovinController.prototype.getDVRPlaybackToPostlive = function (webcast) {
        var hls = webcast['liveStateData'].playout.hlsDvrUrl;
        var title = webcast.name;
        if (angular.isDefined(webcast['postliveStateData'].playout.offset)) {
            var offset = parseInt(webcast['postliveStateData'].playout.offset, 10);
            if (offset) {
                var offsetPrefix = void 0;
                var parser = document.createElement('a');
                parser.href = webcast['liveStateData'].playout.hlsDvrUrl;
                offsetPrefix = (parser.search) ? '&' : '?';
                hls += offsetPrefix + "wowzadvrplayliststart=" + offset + "000";
            }
        }
        return { hls: hls, title: title };
    };
    BitmovinController.prototype.getPlayerConfigSourceByState = function (webcast) {
        var hls = this.state.data.playout.hlsUrl;
        var title = webcast.name;
        var hiveServiceUrl = this.getHiveServiceUrlByLang(webcast);
        if (angular.isDefined(this.state.data.playout.videoManagerHlsUrl) && this.state.data.playout.videoManagerHlsUrl) {
            hls = this.state.data.playout.videoManagerHlsUrl;
        }
        if (angular.isDefined(this.state.data.playout.offset)) {
            var offset = parseInt(this.state.data.playout.offset, 10);
            if (offset > 0) {
                var offsetPrefix = void 0;
                var parser = document.createElement('a');
                parser.href = hls;
                offsetPrefix = (parser.search) ? '&' : '?';
                hls += offsetPrefix + "start=" + offset;
            }
        }
        return { hls: hls, title: title, hiveServiceUrl: hiveServiceUrl };
    };
    BitmovinController.prototype.getHiveServiceUrlByLang = function (webcast) {
        var hiveServiceUrl = null;
        if (webcast.languages && webcast.language) {
            webcast.languages.forEach(function (item) {
                if (item.language === webcast.language) {
                    hiveServiceUrl = angular.copy(item.hiveServiceUrl);
                }
            });
        }
        return hiveServiceUrl;
    };
    return BitmovinController;
}());
BitmovinController.$inject = ['$scope', '$log'];
exports.default = BitmovinController;


/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var angular = __webpack_require__(9);
var BitdashDirective = function ($window, $log) { return ({
    controller: 'MiBitdashController',
    controllerAs: 'bitdashVm',
    replace: true,
    restrict: 'EA',
    scope: {
        config: '=',
        options: '=?',
        webcast: '=',
    },
    template: "<div id=\"mi-bitdash-player\" width=\"100%\" height=\"auto\"></div>",
    link: function (scope) {
        var bitmovinPlayer;
        var bitmovinUIManager;
        var bitmovinControlbar;
        var config = scope.config;
        var webcast = scope.webcast;
        var stateData = scope.state.data;
        buildPlayer();
        function buildPlayer() {
            bitmovinPlayer = $window.window.bitmovin.player('mi-bitdash-player');
            if (angular.isDefined(bitmovinPlayer) && bitmovinPlayer.isReady() === true) {
                bitmovinPlayer.destroy();
                bitmovinPlayer = $window.window.bitmovin.player('mi-bitdash-player');
            }
            if ((webcast.state === 'live') && config.source.hiveServiceUrl) {
                // Get a hive-enabled player through bitdash.initHiveSDN
                $window.window.bitmovin.initHiveSDN(bitmovinPlayer, { debugLevel: 'off' });
                // Configure and Setup bitmovin in initSession callback
                bitmovinPlayer.initSession(config.source.hiveServiceUrl).then(function (session) {
                    var hiveConfig = angular.copy(config);
                    hiveConfig.source.hls = session.manifest;
                    loadPlayer(hiveConfig);
                }, function (reason) {
                    // Handle the case if Hive init fails
                    $log.warn("Hive init fails: " + reason.code + " - " + reason.message);
                    loadPlayer(config);
                });
            }
            else {
                loadPlayer(config);
            }
        }
        function loadPlayer(conf) {
            bitmovinPlayer
                .setup(conf)
                .then(function () {
                bitmovinUIManager = $window.window.bitmovin.playerui.UIManager.Factory;
                if (isAudioOnly()) {
                    bitmovinUIManager.buildAudioOnlyUI(bitmovinPlayer);
                    setAudioOnlyStillImage();
                }
                else {
                    bitmovinUIManager.buildAudioVideoUI(bitmovinPlayer);
                }
                bitmovinControlbar = getElementsByClassName('bitmovinplayer-container');
                if (angular.isDefined(bitmovinControlbar)) {
                    bitmovinControlbar.style.minWidth = '175px';
                    bitmovinControlbar.style.minHeight = '101px';
                    document.getElementById('bitmovinplayer-video-mi-bitdash-player').setAttribute('title', webcast.name);
                }
            }, function (reason) {
                $log.log("Error: " + reason.code + " - " + reason.message);
            });
        }
        function isAudioOnly() {
            return angular.isDefined(stateData.playout.audioOnly) &&
                stateData.playout.audioOnly;
        }
        function setAudioOnlyStillImage() {
            if (angular.isDefined(stateData.playout.audioOnlyStillUrl) &&
                stateData.playout.audioOnlyStillUrl !== '') {
                var element = getElementsByClassName('mi-wbc-ui-audioonly-overlay');
                element.style.backgroundImage = "url(" + stateData.playout.audioOnlyStillUrl + ")";
                element.style.backgroundSize = 'contain';
                element.style.backgroundPosition = 'center';
            }
        }
        function getElementsByClassName(className) {
            return document.getElementsByClassName(className)[0];
        }
    }
}); };
exports.default = BitdashDirective;
BitdashDirective.$inject = ['$window', '$log'];


/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/// <reference path='player.d.ts' />
var uimanager_1 = __webpack_require__(35);
var button_1 = __webpack_require__(6);
var controlbar_1 = __webpack_require__(15);
var hugeplaybacktogglebutton_1 = __webpack_require__(28);
var playbacktimelabel_1 = __webpack_require__(18);
var playbacktogglebutton_1 = __webpack_require__(12);
var seekbar_1 = __webpack_require__(13);
var selectbox_1 = __webpack_require__(21);
var itemselectionlist_1 = __webpack_require__(42);
// import {SettingsPanel, SettingsPanelItem} from './components/settingspanel';
// import {SettingsToggleButton} from './components/settingstogglebutton';
var togglebutton_1 = __webpack_require__(8);
// import {VideoQualitySelectBox} from './components/videoqualityselectbox';
var volumetogglebutton_1 = __webpack_require__(25);
// import {Watermark} from './components/watermark';
var uicontainer_1 = __webpack_require__(17);
var container_1 = __webpack_require__(1);
var label_1 = __webpack_require__(7);
var component_1 = __webpack_require__(2);
var errormessageoverlay_1 = __webpack_require__(26);
var seekbarlabel_1 = __webpack_require__(20);
// import {TitleBar} from './components/titlebar';
var volumecontrolbutton_1 = __webpack_require__(23);
var clickoverlay_1 = __webpack_require__(43);
var hugereplaybutton_1 = __webpack_require__(44);
// import {BufferingOverlay} from './components/bufferingoverlay';
var playbacktoggleoverlay_1 = __webpack_require__(27);
var closebutton_1 = __webpack_require__(45);
// import {MetadataLabel, MetadataLabelContent} from './components/metadatalabel';
var volumeslider_1 = __webpack_require__(24);
var spacer_1 = __webpack_require__(19);
var arrayutils_1 = __webpack_require__(4);
var stringutils_1 = __webpack_require__(14);
var playerutils_1 = __webpack_require__(5);
var uiutils_1 = __webpack_require__(16);
var browserutils_1 = __webpack_require__(11);
var storageutils_1 = __webpack_require__(46);
var audioonlyoverlay_1 = __webpack_require__(29);
// Object.assign polyfill for ES5/IE9
// https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/assign
if (typeof Object.assign !== 'function') {
    Object.assign = function (target) {
        'use strict';
        if (target == null) {
            throw new TypeError('Cannot convert undefined or null to object');
        }
        target = Object(target);
        for (var index = 1; index < arguments.length; index++) {
            var source = arguments[index];
            if (source != null) {
                for (var key in source) {
                    if (Object.prototype.hasOwnProperty.call(source, key)) {
                        target[key] = source[key];
                    }
                }
            }
        }
        return target;
    };
}
var playerui = {
    version: '{{VERSION}}',
    // Management
    UIManager: uimanager_1.UIManager,
    UIInstanceManager: uimanager_1.UIInstanceManager,
    // Utils
    ArrayUtils: arrayutils_1.ArrayUtils,
    StringUtils: stringutils_1.StringUtils,
    PlayerUtils: playerutils_1.PlayerUtils,
    UIUtils: uiutils_1.UIUtils,
    BrowserUtils: browserutils_1.BrowserUtils,
    StorageUtils: storageutils_1.StorageUtils,
    // Components
    AudioOnlyOverlay: audioonlyoverlay_1.AudioOnlyOverlay,
    // BufferingOverlay,
    Button: button_1.Button,
    ClickOverlay: clickoverlay_1.ClickOverlay,
    CloseButton: closebutton_1.CloseButton,
    Component: component_1.Component,
    Container: container_1.Container,
    ControlBar: controlbar_1.ControlBar,
    ErrorMessageOverlay: errormessageoverlay_1.ErrorMessageOverlay,
    HugePlaybackToggleButton: hugeplaybacktogglebutton_1.HugePlaybackToggleButton,
    HugeReplayButton: hugereplaybutton_1.HugeReplayButton,
    Label: label_1.Label,
    // MetadataLabel,
    // MetadataLabelContent,
    PlaybackTimeLabel: playbacktimelabel_1.PlaybackTimeLabel,
    PlaybackTimeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode,
    PlaybackToggleButton: playbacktogglebutton_1.PlaybackToggleButton,
    PlaybackToggleOverlay: playbacktoggleoverlay_1.PlaybackToggleOverlay,
    SeekBar: seekbar_1.SeekBar,
    SeekBarLabel: seekbarlabel_1.SeekBarLabel,
    SelectBox: selectbox_1.SelectBox,
    ItemSelectionList: itemselectionlist_1.ItemSelectionList,
    // SettingsPanel,
    // SettingsPanelItem,
    // SettingsToggleButton,
    Spacer: spacer_1.Spacer,
    // TitleBar,
    ToggleButton: togglebutton_1.ToggleButton,
    UIContainer: uicontainer_1.UIContainer,
    // VideoQualitySelectBox,
    VolumeControlButton: volumecontrolbutton_1.VolumeControlButton,
    VolumeSlider: volumeslider_1.VolumeSlider,
    VolumeToggleButton: volumetogglebutton_1.VolumeToggleButton,
};
window.bitmovin.playerui = playerui;
module.exports = playerui;


/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var uicontainer_1 = __webpack_require__(17);
var dom_1 = __webpack_require__(0);
var component_1 = __webpack_require__(2);
var container_1 = __webpack_require__(1);
var playbacktogglebutton_1 = __webpack_require__(12);
var fullscreentogglebutton_1 = __webpack_require__(37);
// import {VRToggleButton} from './components/vrtogglebutton';
// import {VolumeToggleButton} from './components/volumetogglebutton';
var seekbar_1 = __webpack_require__(13);
var playbacktimelabel_1 = __webpack_require__(18); // , PlaybackTimeLabelMode
var controlbar_1 = __webpack_require__(15);
var eventdispatcher_1 = __webpack_require__(3);
// import {SettingsToggleButton} from './components/settingstogglebutton';
// import {SettingsPanel, SettingsPanelItem} from './components/settingspanel';
// import {VideoQualitySelectBox} from './components/videoqualityselectbox';
// import {Watermark} from './components/watermark';
// import {AudioQualitySelectBox} from './components/audioqualityselectbox';
// import {AudioTrackSelectBox} from './components/audiotrackselectbox';
var seekbarlabel_1 = __webpack_require__(20);
// import {VolumeSlider} from './components/volumeslider';
var subtitleselectbox_1 = __webpack_require__(39);
var subtitleoverlay_1 = __webpack_require__(40);
var volumecontrolbutton_1 = __webpack_require__(23);
// import {CastToggleButton} from './components/casttogglebutton';
// import {CastStatusOverlay} from './components/caststatusoverlay';
var errormessageoverlay_1 = __webpack_require__(26);
// import {PlaybackSpeedSelectBox} from './components/playbackspeedselectbox';
// import {BufferingOverlay} from './components/bufferingoverlay';
var playbacktoggleoverlay_1 = __webpack_require__(27);
// import {AirPlayToggleButton} from './components/airplaytogglebutton';
// import {PictureInPictureToggleButton} from './components/pictureinpicturetogglebutton';
var audioonlyoverlay_1 = __webpack_require__(29);
// import {Spacer} from './components/spacer';
var uiutils_1 = __webpack_require__(16);
var arrayutils_1 = __webpack_require__(4);
var browserutils_1 = __webpack_require__(11);
var UIManager = (function () {
    function UIManager(player, playerUiOrUiVariants, config) {
        if (config === void 0) { config = {}; }
        var _this = this;
        if (playerUiOrUiVariants instanceof uicontainer_1.UIContainer) {
            // Single-UI constructor has been called, transform arguments to UIVariant[] signature
            var playerUi = playerUiOrUiVariants;
            var adsUi = null;
            var uiVariants = [];
            // Add the ads UI if defined
            if (adsUi) {
                uiVariants.push({
                    ui: adsUi,
                    condition: function (context) {
                        return context.isAdWithUI;
                    },
                });
            }
            // Add the default player UI
            uiVariants.push({ ui: playerUi });
            this.uiVariants = uiVariants;
        }
        else {
            // Default constructor (UIVariant[]) has been called
            this.uiVariants = playerUiOrUiVariants;
        }
        this.player = player;
        this.config = config;
        this.managerPlayerWrapper = new PlayerWrapper(player);
        if (config.container) {
            // Unfortunately "uiContainerElement = new DOM(config.container)" will not accept the container with
            // string|HTMLElement type directly, although it accepts both types, so we need to spit these two cases up here.
            // TODO check in upcoming TS versions if the container can be passed in directly, or fix the constructor
            this.uiContainerElement = config.container instanceof HTMLElement ?
                new dom_1.DOM(config.container) : new dom_1.DOM(config.container);
        }
        else {
            this.uiContainerElement = new dom_1.DOM(player.getFigure());
        }
        // Create UI instance managers for the UI variants
        // The instance managers map to the corresponding UI variants by their array index
        this.uiInstanceManagers = [];
        var uiVariantsWithoutCondition = [];
        for (var _i = 0, _a = this.uiVariants; _i < _a.length; _i++) {
            var uiVariant = _a[_i];
            if (uiVariant.condition == null) {
                // Collect variants without conditions for error checking
                uiVariantsWithoutCondition.push(uiVariant);
            }
            // Create the instance manager for a UI variant
            this.uiInstanceManagers.push(new InternalUIInstanceManager(player, uiVariant.ui, this.config));
        }
        // Make sure that there is only one UI variant without a condition
        // It does not make sense to have multiple variants without condition, because only the first one in the list
        // (the one with the lowest index) will ever be selected.
        if (uiVariantsWithoutCondition.length > 1) {
            throw Error('Too many UIs without a condition: You cannot have more than one default UI');
        }
        // Make sure that the default UI variant, if defined, is at the end of the list (last index)
        // If it comes earlier, the variants with conditions that come afterwards will never be selected because the
        // default variant without a condition always evaluates to 'true'
        if (uiVariantsWithoutCondition.length > 0
            && uiVariantsWithoutCondition[0] !== this.uiVariants[this.uiVariants.length - 1]) {
            throw Error('Invalid UI variant order: the default UI (without condition) must be at the end of the list');
        }
        var adStartedEvent = null; // keep the event stored here during ad playback
        var isMobile = browserutils_1.BrowserUtils.isMobile;
        // Dynamically select a UI variant that matches the current UI condition.
        var resolveUiVariant = function (event) {
            // Make sure that the ON_AD_STARTED event data is persisted through ad playback in case other events happen
            // in the meantime, e.g. player resize. We need to store this data because there is no other way to find out
            // ad details (e.g. the ad client) while an ad is playing.
            // Existing event data signals that an ad is currently active. We cannot use player.isAd() because it returns
            // true on ad start and also on ad end events, which is problematic.
            if (event != null) {
                switch (event.type) {
                    // When the ad starts, we store the event data
                    case player.EVENT.ON_AD_STARTED:
                        adStartedEvent = event;
                        break;
                    // When the ad ends, we delete the event data
                    case player.EVENT.ON_AD_FINISHED:
                    case player.EVENT.ON_AD_SKIPPED:
                    case player.EVENT.ON_AD_ERROR:
                        adStartedEvent = null;
                        break;
                    // When a new source is loaded during ad playback, there will be no ad end event so we detect the end
                    // of the ad playback by checking isAd() in ON_READY, because ON_READY always arrives when the source
                    // changes.
                    case player.EVENT.ON_READY:
                        if (adStartedEvent && !player.isAd()) {
                            adStartedEvent = null;
                        }
                }
            }
            // Detect if an ad has started
            var ad = adStartedEvent != null;
            var adWithUI = ad && adStartedEvent.clientType === 'vast';
            // Determine the current context for which the UI variant will be resolved
            var context = {
                isAd: ad,
                isAdWithUI: adWithUI,
                adClientType: ad ? adStartedEvent.clientType : null,
                isFullscreen: _this.player.isFullscreen(),
                isMobile: isMobile,
                isPlaying: _this.player.isPlaying(),
                width: _this.uiContainerElement.width(),
                documentWidth: document.body.clientWidth,
            };
            var nextUi = null;
            var uiVariantChanged = false;
            // Select new UI variant
            // If no variant condition is fulfilled, we switch to *no* UI
            for (var _i = 0, _a = _this.uiVariants; _i < _a.length; _i++) {
                var uiVariant = _a[_i];
                if (uiVariant.condition == null || uiVariant.condition(context) === true) {
                    nextUi = _this.uiInstanceManagers[_this.uiVariants.indexOf(uiVariant)];
                    break;
                }
            }
            // Determine if the UI variant is changing
            if (nextUi !== _this.currentUi) {
                uiVariantChanged = true;
                // console.log('switched from ', this.currentUi ? this.currentUi.getUI() : 'none',
                //   ' to ', nextUi ? nextUi.getUI() : 'none');
            }
            // Only if the UI variant is changing, we need to do some stuff. Else we just leave everything as-is.
            if (uiVariantChanged) {
                // Hide the currently active UI variant
                if (_this.currentUi) {
                    _this.currentUi.getUI().hide();
                }
                // Assign the new UI variant as current UI
                _this.currentUi = nextUi;
                // When we switch to a different UI instance, there's some additional stuff to manage. If we do not switch
                // to an instance, we're done here.
                if (_this.currentUi != null) {
                    // Add the UI to the DOM (and configure it) the first time it is selected
                    if (!_this.currentUi.isConfigured()) {
                        _this.addUi(_this.currentUi);
                    }
                    // If this is an ad UI, we need to relay the saved ON_AD_STARTED event data so ad components can configure
                    // themselves for the current ad.
                    if (context.isAd) {
                        /* Relay the ON_AD_STARTED event to the ads UI
                         *
                         * Because the ads UI is initialized in the ON_AD_STARTED handler, i.e. when the ON_AD_STARTED event has
                         * already been fired, components in the ads UI that listen for the ON_AD_STARTED event never receive it.
                         * Since this can break functionality of components that rely on this event, we relay the event to the
                         * ads UI components with the following call.
                         */
                        _this.currentUi.getWrappedPlayer().fireEventInUI(_this.player.EVENT.ON_AD_STARTED, adStartedEvent);
                    }
                    _this.currentUi.getUI().show();
                }
            }
        };
        // Listen to the following events to trigger UI variant resolution
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_READY, resolveUiVariant);
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PLAY, resolveUiVariant);
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PAUSED, resolveUiVariant);
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_STARTED, resolveUiVariant);
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_FINISHED, resolveUiVariant);
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_SKIPPED, resolveUiVariant);
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_ERROR, resolveUiVariant);
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PLAYER_RESIZE, resolveUiVariant);
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER, resolveUiVariant);
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT, resolveUiVariant);
        // Initialize the UI
        resolveUiVariant(null);
    }
    UIManager.prototype.getConfig = function () {
        return this.config;
    };
    UIManager.prototype.addUi = function (ui) {
        var dom = ui.getUI().getDomElement();
        var player = ui.getWrappedPlayer();
        ui.configureControls();
        /* Append the UI DOM after configuration to avoid CSS transitions at initialization
         * Example: Components are hidden during configuration and these hides may trigger CSS transitions that are
         * undesirable at this time. */
        this.uiContainerElement.append(dom);
        // Some components initialize their state on ON_READY. When the UI is loaded after the player is already ready,
        // they will never receive the event so we fire it from here in such cases.
        if (player.isReady()) {
            player.fireEventInUI(player.EVENT.ON_READY, {});
        }
        // Fire onConfigured after UI DOM elements are successfully added. When fired immediately, the DOM elements
        // might not be fully configured and e.g. do not have a size.
        // https://swizec.com/blog/how-to-properly-wait-for-dom-elements-to-show-up-in-modern-browsers/swizec/6663
        if (window.requestAnimationFrame) {
            requestAnimationFrame(function () { ui.onConfigured.dispatch(ui.getUI()); });
        }
        else {
            // IE9 fallback
            setTimeout(function () { ui.onConfigured.dispatch(ui.getUI()); }, 0);
        }
    };
    UIManager.prototype.releaseUi = function (ui) {
        ui.releaseControls();
        ui.getUI().getDomElement().remove();
        ui.clearEventHandlers();
    };
    UIManager.prototype.release = function () {
        for (var _i = 0, _a = this.uiInstanceManagers; _i < _a.length; _i++) {
            var uiInstanceManager = _a[_i];
            this.releaseUi(uiInstanceManager);
        }
        this.managerPlayerWrapper.clearEventHandlers();
    };
    return UIManager;
}());
exports.UIManager = UIManager;
(function (UIManager) {
    var Factory;
    (function (Factory) {
        function buildAudioVideoUI(player, config) {
            if (config === void 0) { config = {}; }
            var controlBar = new controlbar_1.ControlBar({
                components: [
                    new playbacktogglebutton_1.PlaybackToggleButton(),
                    new seekbar_1.SeekBar({ label: new seekbarlabel_1.SeekBarLabel() }),
                    new playbacktimelabel_1.PlaybackTimeLabel(),
                    new volumecontrolbutton_1.VolumeControlButton({ 'vertical': true }),
                    new fullscreentogglebutton_1.FullscreenToggleButton(),
                ],
            }, true);
            var ui = new uicontainer_1.UIContainer({
                components: [
                    new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                    controlBar,
                    new errormessageoverlay_1.ErrorMessageOverlay(),
                ], cssClasses: ['ui-skin'],
            });
            // Just here to avoid linter errors
            var ssBox = new subtitleselectbox_1.SubtitleSelectBox();
            ssBox.hide();
            var ssOverlay = new subtitleoverlay_1.SubtitleOverlay();
            ssOverlay.hide();
            return new UIManager(player, ui, config);
        }
        Factory.buildAudioVideoUI = buildAudioVideoUI;
        function buildAudioOnlyUI(player, config) {
            if (config === void 0) { config = {}; }
            var controlBar = new controlbar_1.ControlBar({
                components: [
                    new playbacktogglebutton_1.PlaybackToggleButton(),
                    new seekbar_1.SeekBar({ label: new seekbarlabel_1.SeekBarLabel(), hideInLivePlayback: true }),
                    new playbacktimelabel_1.PlaybackTimeLabel(),
                    new volumecontrolbutton_1.VolumeControlButton({ 'vertical': true }),
                    new component_1.Component({ cssClass: 'spacer' }),
                ],
            }, false);
            var ui = new uicontainer_1.UIContainer({
                components: [
                    new audioonlyoverlay_1.AudioOnlyOverlay(),
                    new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                    controlBar,
                    new errormessageoverlay_1.ErrorMessageOverlay(),
                ], cssClasses: ['ui-skin'],
            });
            return new UIManager(player, ui, config);
        }
        Factory.buildAudioOnlyUI = buildAudioOnlyUI;
    })(Factory = UIManager.Factory || (UIManager.Factory = {}));
})(UIManager = exports.UIManager || (exports.UIManager = {}));
exports.UIManager = UIManager;
/**
 * Encapsulates functionality to manage a UI instance. Used by the {@link UIManager} to manage multiple UI instances.
 */
var UIInstanceManager = (function () {
    function UIInstanceManager(player, ui, config) {
        if (config === void 0) { config = {}; }
        this.events = {
            onConfigured: new eventdispatcher_1.EventDispatcher(),
            onSeek: new eventdispatcher_1.EventDispatcher(),
            onSeekPreview: new eventdispatcher_1.EventDispatcher(),
            onSeeked: new eventdispatcher_1.EventDispatcher(),
            onComponentShow: new eventdispatcher_1.EventDispatcher(),
            onComponentHide: new eventdispatcher_1.EventDispatcher(),
            onControlsShow: new eventdispatcher_1.EventDispatcher(),
            onPreviewControlsHide: new eventdispatcher_1.EventDispatcher(),
            onControlsHide: new eventdispatcher_1.EventDispatcher(),
        };
        this.playerWrapper = new PlayerWrapper(player);
        this.ui = ui;
        this.config = config;
    }
    UIInstanceManager.prototype.getConfig = function () {
        return this.config;
    };
    UIInstanceManager.prototype.getUI = function () {
        return this.ui;
    };
    UIInstanceManager.prototype.getPlayer = function () {
        return this.playerWrapper.getPlayer();
    };
    Object.defineProperty(UIInstanceManager.prototype, "onConfigured", {
        /**
         * Fires when the UI is fully configured and added to the DOM.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onConfigured;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onSeek", {
        /**
         * Fires when a seek starts.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onSeek;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onSeekPreview", {
        /**
         * Fires when the seek timeline is scrubbed.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onSeekPreview;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onSeeked", {
        /**
         * Fires when a seek is finished.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onSeeked;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onComponentShow", {
        /**
         * Fires when a component is showing.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onComponentShow;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onComponentHide", {
        /**
         * Fires when a component is hiding.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onComponentHide;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onControlsShow", {
        /**
         * Fires when the UI controls are showing.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onControlsShow;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onPreviewControlsHide", {
        /**
         * Fires before the UI controls are hiding to check if they are allowed to hide.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onPreviewControlsHide;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onControlsHide", {
        /**
         * Fires when the UI controls are hiding.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onControlsHide;
        },
        enumerable: true,
        configurable: true
    });
    UIInstanceManager.prototype.clearEventHandlers = function () {
        this.playerWrapper.clearEventHandlers();
        var events = this.events; // avoid TS7017
        for (var event_1 in events) {
            var dispatcher = events[event_1];
            dispatcher.unsubscribeAll();
        }
    };
    return UIInstanceManager;
}());
exports.UIInstanceManager = UIInstanceManager;
/**
 * Extends the {@link UIInstanceManager} for internal use in the {@link UIManager} and provides access to functionality
 * that components receiving a reference to the {@link UIInstanceManager} should not have access to.
 */
var InternalUIInstanceManager = (function (_super) {
    __extends(InternalUIInstanceManager, _super);
    function InternalUIInstanceManager() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    InternalUIInstanceManager.prototype.getWrappedPlayer = function () {
        // TODO find a non-hacky way to provide the WrappedPlayer to the UIManager without exporting it
        // getPlayer() actually returns the WrappedPlayer but its return type is set to Player so the WrappedPlayer does
        // not need to be exported
        return this.getPlayer();
    };
    InternalUIInstanceManager.prototype.configureControls = function () {
        this.configureControlsTree(this.getUI());
        this.configured = true;
    };
    InternalUIInstanceManager.prototype.isConfigured = function () {
        return this.configured;
    };
    InternalUIInstanceManager.prototype.configureControlsTree = function (component) {
        var _this = this;
        var configuredComponents = [];
        uiutils_1.UIUtils.traverseTree(component, function (component) {
            // First, check if we have already configured a component, and throw an error if we did. Multiple configuration
            // of the same component leads to unexpected UI behavior. Also, a component that is in the UI tree multiple
            // times hints at a wrong UI structure.
            // We could just skip configuration in such a case and not throw an exception, but enforcing a clean UI tree
            // seems like the better choice.
            for (var _i = 0, configuredComponents_1 = configuredComponents; _i < configuredComponents_1.length; _i++) {
                var configuredComponent = configuredComponents_1[_i];
                if (configuredComponent === component) {
                    // Write the component to the console to simplify identification of the culprit
                    // (e.g. by inspecting the config)
                    if (console) {
                        console.error('Circular reference in UI tree', component);
                    }
                    // Additionally throw an error, because this case must not happen and leads to unexpected UI behavior.
                    throw Error('Circular reference in UI tree: ' + component.constructor.name);
                }
            }
            component.initialize();
            component.configure(_this.getPlayer(), _this);
            configuredComponents.push(component);
        });
    };
    InternalUIInstanceManager.prototype.releaseControls = function () {
        // Do not call release methods if the components have never been configured; this can result in exceptions
        if (this.configured) {
            this.releaseControlsTree(this.getUI());
            this.configured = false;
        }
        this.released = true;
    };
    InternalUIInstanceManager.prototype.isReleased = function () {
        return this.released;
    };
    InternalUIInstanceManager.prototype.releaseControlsTree = function (component) {
        component.release();
        if (component instanceof container_1.Container) {
            for (var _i = 0, _a = component.getComponents(); _i < _a.length; _i++) {
                var childComponent = _a[_i];
                this.releaseControlsTree(childComponent);
            }
        }
    };
    InternalUIInstanceManager.prototype.clearEventHandlers = function () {
        _super.prototype.clearEventHandlers.call(this);
    };
    return InternalUIInstanceManager;
}(UIInstanceManager));
/**
 * Wraps the player to track event handlers and provide a simple method to remove all registered event
 * handlers from the player.
 */
var PlayerWrapper = (function () {
    function PlayerWrapper(player) {
        var _this = this;
        this.eventHandlers = {};
        this.player = player;
        // Collect all members of the player (public API methods and properties of the player)
        // (Object.getOwnPropertyNames(player) does not work with the player TypeScript class starting in 7.2)
        var members = [];
        for (var member in player) {
            members.push(member);
        }
        // Split the members into methods and properties
        var methods = [];
        var properties = [];
        for (var _i = 0, members_1 = members; _i < members_1.length; _i++) {
            var member = members_1[_i];
            if (typeof player[member] === 'function') {
                methods.push(member);
            }
            else {
                properties.push(member);
            }
        }
        // Create wrapper object
        var wrapper = {};
        var _loop_1 = function (method) {
            wrapper[method] = function () {
                // console.log('called ' + member); // track method calls on the player
                return player[method].apply(player, arguments);
            };
        };
        // Add function wrappers for all API methods that do nothing but calling the base method on the player
        for (var _a = 0, methods_1 = methods; _a < methods_1.length; _a++) {
            var method = methods_1[_a];
            _loop_1(method);
        }
        var _loop_2 = function (property) {
            // Get an eventually existing property descriptor to differentiate between plain properties and properties with
            // getters/setters.
            var propertyDescriptor = Object.getOwnPropertyDescriptor(player, property) ||
                Object.getOwnPropertyDescriptor(Object.getPrototypeOf(player), property);
            // If the property has getters/setters, wrap them accordingly...
            if (propertyDescriptor && (propertyDescriptor.get || propertyDescriptor.set)) {
                Object.defineProperty(wrapper, property, {
                    get: function () { return propertyDescriptor.get.call(player); },
                    set: function (value) { return propertyDescriptor.set.call(player, value); },
                });
            }
            else {
                wrapper[property] = player[property];
            }
        };
        // Add all public properties of the player to the wrapper
        for (var _b = 0, properties_1 = properties; _b < properties_1.length; _b++) {
            var property = properties_1[_b];
            _loop_2(property);
        }
        // Explicitly add a wrapper method for 'addEventHandler' that adds added event handlers to the event list
        wrapper.addEventHandler = function (eventType, callback) {
            player.addEventHandler(eventType, callback);
            if (!_this.eventHandlers[eventType]) {
                _this.eventHandlers[eventType] = [];
            }
            _this.eventHandlers[eventType].push(callback);
            return wrapper;
        };
        // Explicitly add a wrapper method for 'removeEventHandler' that removes removed event handlers from the event list
        wrapper.removeEventHandler = function (eventType, callback) {
            player.removeEventHandler(eventType, callback);
            if (_this.eventHandlers[eventType]) {
                arrayutils_1.ArrayUtils.remove(_this.eventHandlers[eventType], callback);
            }
            return wrapper;
        };
        wrapper.fireEventInUI = function (event, data) {
            if (_this.eventHandlers[event]) {
                // Extend the data object with default values to convert it to a {@link PlayerEvent} object.
                var playerEventData = Object.assign({}, {
                    timestamp: Date.now(),
                    type: event,
                    // Add a marker property so the UI can detect UI-internal player events
                    uiSourced: true,
                }, data);
                // Execute the registered callbacks
                for (var _i = 0, _a = _this.eventHandlers[event]; _i < _a.length; _i++) {
                    var callback = _a[_i];
                    callback(playerEventData);
                }
            }
        };
        this.wrapper = wrapper;
    }
    /**
     * Returns a wrapped player object that can be used on place of the normal player object.
     * @returns {WrappedPlayer} a wrapped player
     */
    PlayerWrapper.prototype.getPlayer = function () {
        return this.wrapper;
    };
    /**
     * Clears all registered event handlers from the player that were added through the wrapped player.
     */
    PlayerWrapper.prototype.clearEventHandlers = function () {
        for (var eventType in this.eventHandlers) {
            for (var _i = 0, _a = this.eventHandlers[eventType]; _i < _a.length; _i++) {
                var callback = _a[_i];
                this.player.removeEventHandler(eventType, callback);
            }
        }
    };
    return PlayerWrapper;
}());


/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Guid;
(function (Guid) {
    var guid = 1;
    function next() {
        return guid++;
    }
    Guid.next = next;
})(Guid = exports.Guid || (exports.Guid = {}));


/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(8);
/**
 * A button that toggles the player between windowed and fullscreen view.
 */
var FullscreenToggleButton = (function (_super) {
    __extends(FullscreenToggleButton, _super);
    function FullscreenToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-fullscreentogglebutton',
            text: 'Fullscreen',
        }, _this.config);
        return _this;
    }
    FullscreenToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var fullscreenStateHandler = function () {
            if (player.isFullscreen()) {
                _this.on();
            }
            else {
                _this.off();
            }
        };
        player.addEventHandler(player.EVENT.ON_FULLSCREEN_ENTER, fullscreenStateHandler);
        player.addEventHandler(player.EVENT.ON_FULLSCREEN_EXIT, fullscreenStateHandler);
        this.onClick.subscribe(function () {
            if (player.isFullscreen()) {
                player.exitFullscreen();
            }
            else {
                player.enterFullscreen();
            }
        });
        // Startup init
        fullscreenStateHandler();
    };
    return FullscreenToggleButton;
}(togglebutton_1.ToggleButton));
exports.FullscreenToggleButton = FullscreenToggleButton;


/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var dom_1 = __webpack_require__(0);
/**
 * Tracks the loading state of images.
 */
var ImageLoader = (function () {
    function ImageLoader() {
        this.state = {};
    }
    /**
     * Loads an image and call the callback once the image is loaded. If the image is already loaded, the callback
     * is called immediately, else it is called once loading has finished. Calling this method multiple times for the
     * same image while it is loading calls only let callback passed into the last call.
     * @param url The url to the image to load
     * @param loadedCallback The callback that is called when the image is loaded
     */
    ImageLoader.prototype.load = function (url, loadedCallback) {
        var _this = this;
        if (!this.state[url]) {
            // When the image was never attempted to be loaded before, we create a state and store it in the state map
            // for later use when the same image is requested to be loaded again.
            var state_1 = {
                url: url,
                image: new dom_1.DOM('img', {}),
                loadedCallback: loadedCallback,
                loaded: false,
                width: 0,
                height: 0,
            };
            this.state[url] = state_1;
            // Listen to the load event, update the state and call the callback once the image is loaded
            state_1.image.on('load', function (e) {
                state_1.loaded = true;
                state_1.width = state_1.image.get(0).width;
                state_1.height = state_1.image.get(0).height;
                _this.callLoadedCallback(state_1);
            });
            // Set the image URL to start the loading
            state_1.image.attr('src', state_1.url);
        }
        else {
            // We have a state for the requested image, so it is either already loaded or currently loading
            var state = this.state[url];
            // We overwrite the callback to make sure that only the callback of the latest call gets executed.
            // Earlier callbacks become invalid once a new load call arrives, and they are not called as long as the image
            // is not loaded.
            state.loadedCallback = loadedCallback;
            // When the image is already loaded, we directly execute the callback instead of waiting for the load event
            if (state.loaded) {
                this.callLoadedCallback(state);
            }
        }
    };
    ImageLoader.prototype.callLoadedCallback = function (state) {
        state.loadedCallback(state.url, state.width, state.height);
    };
    return ImageLoader;
}());
exports.ImageLoader = ImageLoader;


/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var selectbox_1 = __webpack_require__(21);
/**
 * A select box providing a selection between available subtitle and caption tracks.
 */
var SubtitleSelectBox = (function (_super) {
    __extends(SubtitleSelectBox, _super);
    function SubtitleSelectBox(config) {
        if (config === void 0) { config = {}; }
        return _super.call(this, config) || this;
    }
    SubtitleSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var selectCurrentSubtitle = function () {
            var currentSubtitle = player.getSubtitle();
            if (currentSubtitle) {
                _this.selectItem(currentSubtitle.id);
            }
        };
        var updateSubtitles = function () {
            _this.clearItems();
            for (var _i = 0, _a = player.getAvailableSubtitles(); _i < _a.length; _i++) {
                var subtitle = _a[_i];
                _this.addItem(subtitle.id, subtitle.label);
            }
            // Select the correct subtitle after the subtitles have been added
            selectCurrentSubtitle();
        };
        this.onItemSelected.subscribe(function (sender, value) {
            player.setSubtitle(value === 'null' ? null : value);
        });
        // React to API events
        player.addEventHandler(player.EVENT.ON_SUBTITLE_ADDED, updateSubtitles);
        player.addEventHandler(player.EVENT.ON_SUBTITLE_CHANGED, selectCurrentSubtitle);
        player.addEventHandler(player.EVENT.ON_SUBTITLE_REMOVED, updateSubtitles);
        // Update subtitles when source goes away
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, updateSubtitles);
        // Update subtitles when a new source is loaded
        player.addEventHandler(player.EVENT.ON_READY, updateSubtitles);
        // Update subtitles when the period within a source changes
        player.addEventHandler(player.EVENT.ON_PERIOD_SWITCHED, updateSubtitles);
        // Populate subtitles at startup
        updateSubtitles();
    };
    return SubtitleSelectBox;
}(selectbox_1.SelectBox));
exports.SubtitleSelectBox = SubtitleSelectBox;


/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(1);
var label_1 = __webpack_require__(7);
var controlbar_1 = __webpack_require__(15);
/**
 * Overlays the player to display subtitles.
 */
var SubtitleOverlay = (function (_super) {
    __extends(SubtitleOverlay, _super);
    function SubtitleOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.previewSubtitleActive = false;
        _this.previewSubtitle = new SubtitleLabel({ text: 'example subtitle' });
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-subtitle-overlay',
        }, _this.config);
        return _this;
    }
    SubtitleOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var subtitleManager = new ActiveSubtitleManager();
        this.subtitleManager = subtitleManager;
        player.addEventHandler(player.EVENT.ON_CUE_ENTER, function (event) {
            // Sanitize cue data (must be done before the cue ID is generated in subtitleManager.cueEnter)
            if (event.position) {
                // Sometimes the positions are undefined, we assume them to be zero
                event.position.row = event.position.row || 0;
                event.position.column = event.position.column || 0;
            }
            var labelToAdd = subtitleManager.cueEnter(event);
            if (_this.previewSubtitleActive) {
                _this.removeComponent(_this.previewSubtitle);
            }
            _this.addComponent(labelToAdd);
            _this.updateComponents();
            _this.show();
        });
        player.addEventHandler(player.EVENT.ON_CUE_EXIT, function (event) {
            var labelToRemove = subtitleManager.cueExit(event);
            if (labelToRemove) {
                _this.removeComponent(labelToRemove);
                _this.updateComponents();
            }
            if (!subtitleManager.hasCues) {
                if (!_this.previewSubtitleActive) {
                    _this.hide();
                }
                else {
                    _this.addComponent(_this.previewSubtitle);
                    _this.updateComponents();
                }
            }
        });
        var subtitleClearHandler = function () {
            _this.hide();
            subtitleManager.clear();
            _this.removeComponents();
            _this.updateComponents();
        };
        player.addEventHandler(player.EVENT.ON_AUDIO_CHANGED, subtitleClearHandler);
        player.addEventHandler(player.EVENT.ON_SUBTITLE_CHANGED, subtitleClearHandler);
        player.addEventHandler(player.EVENT.ON_SEEK, subtitleClearHandler);
        player.addEventHandler(player.EVENT.ON_TIME_SHIFT, subtitleClearHandler);
        player.addEventHandler(player.EVENT.ON_PLAYBACK_FINISHED, subtitleClearHandler);
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, subtitleClearHandler);
        uimanager.onComponentShow.subscribe(function (component) {
            if (component instanceof controlbar_1.ControlBar) {
                _this.getDomElement().addClass(_this.prefixCss(SubtitleOverlay.CLASS_CONTROLBAR_VISIBLE));
            }
        });
        uimanager.onComponentHide.subscribe(function (component) {
            if (component instanceof controlbar_1.ControlBar) {
                _this.getDomElement().removeClass(_this.prefixCss(SubtitleOverlay.CLASS_CONTROLBAR_VISIBLE));
            }
        });
        this.configureCea608Captions(player, uimanager);
        // Init
        subtitleClearHandler();
    };
    SubtitleOverlay.prototype.configureCea608Captions = function (player, uimanager) {
        var _this = this;
        // The calculated font size
        var fontSize = 0;
        // The required letter spacing spread the text characters evenly across the grid
        var fontLetterSpacing = 0;
        // Flag telling if a font size calculation is required of if the current values are valid
        var fontSizeCalculationRequired = true;
        // Flag telling if the CEA-608 mode is enabled
        var enabled = false;
        var updateCEA608FontSize = function () {
            var dummyLabel = new SubtitleLabel({ text: 'X' });
            dummyLabel.getDomElement().css({
                // By using a large font size we do not need to use multiple letters and can get still an
                // accurate measurement even though the returned size is an integer value
                'font-size': '200px',
                'line-height': '200px',
                'visibility': 'hidden',
            });
            _this.addComponent(dummyLabel);
            _this.updateComponents();
            _this.show();
            var dummyLabelCharWidth = dummyLabel.getDomElement().width();
            var dummyLabelCharHeight = dummyLabel.getDomElement().height();
            var fontSizeRatio = dummyLabelCharWidth / dummyLabelCharHeight;
            _this.removeComponent(dummyLabel);
            _this.updateComponents();
            if (!_this.subtitleManager.hasCues) {
                _this.hide();
            }
            // The size ratio of the letter grid
            var fontGridSizeRatio = (dummyLabelCharWidth * SubtitleOverlay.CEA608_NUM_COLUMNS) /
                (dummyLabelCharHeight * SubtitleOverlay.CEA608_NUM_ROWS);
            // The size ratio of the available space for the grid
            var subtitleOverlaySizeRatio = _this.getDomElement().width() / _this.getDomElement().height();
            if (subtitleOverlaySizeRatio > fontGridSizeRatio) {
                // When the available space is wider than the text grid, the font size is simply
                // determined by the height of the available space.
                fontSize = _this.getDomElement().height() / SubtitleOverlay.CEA608_NUM_ROWS;
                // Calculate the additional letter spacing required to evenly spread the text across the grid's width
                var gridSlotWidth = _this.getDomElement().width() / SubtitleOverlay.CEA608_NUM_COLUMNS;
                var fontCharWidth = fontSize * fontSizeRatio;
                fontLetterSpacing = gridSlotWidth - fontCharWidth;
            }
            else {
                // When the available space is not wide enough, texts would vertically overlap if we take
                // the height as a base for the font size, so we need to limit the height. We do that
                // by determining the font size by the width of the available space.
                fontSize = _this.getDomElement().width() / SubtitleOverlay.CEA608_NUM_COLUMNS / fontSizeRatio;
                fontLetterSpacing = 0;
            }
            // Update font-size of all active subtitle labels
            for (var _i = 0, _a = _this.getComponents(); _i < _a.length; _i++) {
                var label = _a[_i];
                if (label instanceof SubtitleLabel) {
                    label.getDomElement().css({
                        'font-size': fontSize + "px",
                        'letter-spacing': fontLetterSpacing + "px",
                    });
                }
            }
        };
        player.addEventHandler(player.EVENT.ON_PLAYER_RESIZE, function () {
            if (enabled) {
                updateCEA608FontSize();
            }
            else {
                fontSizeCalculationRequired = true;
            }
        });
        player.addEventHandler(player.EVENT.ON_CUE_ENTER, function (event) {
            var isCEA608 = event.position != null;
            if (!isCEA608) {
                // Skip all non-CEA608 cues
                return;
            }
            var labels = _this.subtitleManager.getCues(event);
            if (!enabled) {
                enabled = true;
                _this.getDomElement().addClass(_this.prefixCss(SubtitleOverlay.CLASS_CEA_608));
                // We conditionally update the font size by this flag here to avoid updating every time a subtitle
                // is added into an empty overlay. Because we reset the overlay when all subtitles are gone, this
                // would trigger an unnecessary update every time, but it's only required under certain conditions,
                // e.g. after the player size has changed.
                if (fontSizeCalculationRequired) {
                    updateCEA608FontSize();
                    fontSizeCalculationRequired = false;
                }
            }
            for (var _i = 0, labels_1 = labels; _i < labels_1.length; _i++) {
                var label = labels_1[_i];
                label.getDomElement().css({
                    'left': event.position.column * SubtitleOverlay.CEA608_COLUMN_OFFSET + "%",
                    'top': event.position.row * SubtitleOverlay.CEA608_ROW_OFFSET + "%",
                    'font-size': fontSize + "px",
                    'letter-spacing': fontLetterSpacing + "px",
                });
            }
        });
        var reset = function () {
            _this.getDomElement().removeClass(_this.prefixCss(SubtitleOverlay.CLASS_CEA_608));
            enabled = false;
        };
        player.addEventHandler(player.EVENT.ON_CUE_EXIT, function () {
            if (!_this.subtitleManager.hasCues) {
                // Disable CEA-608 mode when all subtitles are gone (to allow correct formatting and
                // display of other types of subtitles, e.g. the formatting preview subtitle)
                reset();
            }
        });
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, reset);
        player.addEventHandler(player.EVENT.ON_SUBTITLE_CHANGED, reset);
    };
    SubtitleOverlay.prototype.enablePreviewSubtitleLabel = function () {
        this.previewSubtitleActive = true;
        if (!this.subtitleManager.hasCues) {
            this.addComponent(this.previewSubtitle);
            this.updateComponents();
            this.show();
        }
    };
    SubtitleOverlay.prototype.removePreviewSubtitleLabel = function () {
        this.previewSubtitleActive = false;
        this.removeComponent(this.previewSubtitle);
        this.updateComponents();
    };
    return SubtitleOverlay;
}(container_1.Container));
SubtitleOverlay.CLASS_CONTROLBAR_VISIBLE = 'controlbar-visible';
SubtitleOverlay.CLASS_CEA_608 = 'cea608';
// The number of rows in a cea608 grid
SubtitleOverlay.CEA608_NUM_ROWS = 15;
// The number of columns in a cea608 grid
SubtitleOverlay.CEA608_NUM_COLUMNS = 32;
// The offset in percent for one row (which is also the height of a row)
SubtitleOverlay.CEA608_ROW_OFFSET = 100 / SubtitleOverlay.CEA608_NUM_ROWS;
// The offset in percent for one column (which is also the width of a column)
SubtitleOverlay.CEA608_COLUMN_OFFSET = 100 / SubtitleOverlay.CEA608_NUM_COLUMNS;
exports.SubtitleOverlay = SubtitleOverlay;
var SubtitleLabel = (function (_super) {
    __extends(SubtitleLabel, _super);
    function SubtitleLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-subtitle-label',
        }, _this.config);
        return _this;
    }
    return SubtitleLabel;
}(label_1.Label));
var ActiveSubtitleManager = (function () {
    function ActiveSubtitleManager() {
        this.activeSubtitleCueMap = {};
        this.activeSubtitleCueCount = 0;
    }
    /**
     * Calculates a unique ID for a subtitle cue, which is needed to associate an ON_CUE_ENTER with its ON_CUE_EXIT
     * event so we can remove the correct subtitle in ON_CUE_EXIT when multiple subtitles are active at the same time.
     * The start time plus the text should make a unique identifier, and in the only case where a collision
     * can happen, two similar texts will be displayed at a similar time and a similar position (or without position).
     * The start time should always be known, because it is required to schedule the ON_CUE_ENTER event. The end time
     * must not necessarily be known and therefore cannot be used for the ID.
     * @param event
     * @return {string}
     */
    ActiveSubtitleManager.calculateId = function (event) {
        var id = event.start + '-' + event.text;
        if (event.position) {
            id += '-' + event.position.row + '-' + event.position.column;
        }
        return id;
    };
    /**
     * Adds a subtitle cue to the manager and returns the label that should be added to the subtitle overlay.
     * @param event
     * @return {SubtitleLabel}
     */
    ActiveSubtitleManager.prototype.cueEnter = function (event) {
        var id = ActiveSubtitleManager.calculateId(event);
        var label = new SubtitleLabel({
            // Prefer the HTML subtitle text if set, else use the plain text
            text: event.html || event.text,
        });
        // Create array for id if it does not exist
        this.activeSubtitleCueMap[id] = this.activeSubtitleCueMap[id] || [];
        // Add cue
        this.activeSubtitleCueMap[id].push({ event: event, label: label });
        this.activeSubtitleCueCount++;
        return label;
    };
    /**
     * Returns the label associated with an already added cue.
     * @param event
     * @return {SubtitleLabel}
     */
    ActiveSubtitleManager.prototype.getCues = function (event) {
        var id = ActiveSubtitleManager.calculateId(event);
        var activeSubtitleCues = this.activeSubtitleCueMap[id];
        if (activeSubtitleCues && activeSubtitleCues.length > 0) {
            return activeSubtitleCues.map(function (cue) { return cue.label; });
        }
        else {
            return null;
        }
    };
    /**
     * Removes the subtitle cue from the manager and returns the label that should be removed from the subtitle overlay,
     * or null if there is no associated label existing (e.g. because all labels have been {@link #clear cleared}.
     * @param event
     * @return {SubtitleLabel|null}
     */
    ActiveSubtitleManager.prototype.cueExit = function (event) {
        var id = ActiveSubtitleManager.calculateId(event);
        var activeSubtitleCues = this.activeSubtitleCueMap[id];
        if (activeSubtitleCues && activeSubtitleCues.length > 0) {
            // Remove cue
            /* We apply the FIFO approach here and remove the oldest cue from the associated id. When there are multiple cues
             * with the same id, there is no way to know which one of the cues is to be deleted, so we just hope that FIFO
             * works fine. Theoretically it can happen that two cues with colliding ids are removed at different times, in
             * the wrong order. This rare case has yet to be observed. If it ever gets an issue, we can take the unstable
             * cue end time (which can change between ON_CUE_ENTER and ON_CUE_EXIT IN ON_CUE_UPDATE) and use it as an
             * additional hint to try and remove the correct one of the colliding cues.
             */
            var activeSubtitleCue = activeSubtitleCues.shift();
            this.activeSubtitleCueCount--;
            return activeSubtitleCue.label;
        }
        else {
            return null;
        }
    };
    Object.defineProperty(ActiveSubtitleManager.prototype, "cueCount", {
        /**
         * Returns the number of active subtitle cues.
         * @return {number}
         */
        get: function () {
            // We explicitly count the cues to save an Array.reduce on every cueCount call (which can happen frequently)
            return this.activeSubtitleCueCount;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ActiveSubtitleManager.prototype, "hasCues", {
        /**
         * Returns true if there are active subtitle cues, else false.
         * @return {boolean}
         */
        get: function () {
            return this.cueCount > 0;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Removes all subtitle cues from the manager.
     */
    ActiveSubtitleManager.prototype.clear = function () {
        this.activeSubtitleCueMap = {};
        this.activeSubtitleCueCount = 0;
    };
    return ActiveSubtitleManager;
}());


/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(0);
/**
 * Animated analog TV static noise.
 */
var TvNoiseCanvas = (function (_super) {
    __extends(TvNoiseCanvas, _super);
    function TvNoiseCanvas(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.canvasWidth = 160;
        _this.canvasHeight = 90;
        _this.interferenceHeight = 50;
        _this.lastFrameUpdate = 0;
        _this.frameInterval = 60;
        _this.useAnimationFrame = !!window.requestAnimationFrame;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-tvnoisecanvas',
        }, _this.config);
        return _this;
    }
    TvNoiseCanvas.prototype.toDomElement = function () {
        return this.canvas = new dom_1.DOM('canvas', { 'class': this.getCssClasses() });
    };
    TvNoiseCanvas.prototype.start = function () {
        this.canvasElement = this.canvas.get(0);
        this.canvasContext = this.canvasElement.getContext('2d');
        this.noiseAnimationWindowPos = -this.canvasHeight;
        this.lastFrameUpdate = 0;
        this.canvasElement.width = this.canvasWidth;
        this.canvasElement.height = this.canvasHeight;
        this.renderFrame();
    };
    TvNoiseCanvas.prototype.stop = function () {
        if (this.useAnimationFrame) {
            cancelAnimationFrame(this.frameUpdateHandlerId);
        }
        else {
            clearTimeout(this.frameUpdateHandlerId);
        }
    };
    TvNoiseCanvas.prototype.renderFrame = function () {
        // This code has been copied from the player controls.js and simplified
        if (this.lastFrameUpdate + this.frameInterval > new Date().getTime()) {
            // It's too early to render the next frame
            this.scheduleNextRender();
            return;
        }
        var currentPixelOffset;
        var canvasWidth = this.canvasWidth;
        var canvasHeight = this.canvasHeight;
        // Create texture
        var noiseImage = this.canvasContext.createImageData(canvasWidth, canvasHeight);
        // Fill texture with noise
        for (var y = 0; y < canvasHeight; y++) {
            for (var x = 0; x < canvasWidth; x++) {
                currentPixelOffset = (canvasWidth * y * 4) + x * 4;
                noiseImage.data[currentPixelOffset] = Math.random() * 255;
                if (y < this.noiseAnimationWindowPos || y > this.noiseAnimationWindowPos + this.interferenceHeight) {
                    noiseImage.data[currentPixelOffset] *= 0.85;
                }
                noiseImage.data[currentPixelOffset + 1] = noiseImage.data[currentPixelOffset];
                noiseImage.data[currentPixelOffset + 2] = noiseImage.data[currentPixelOffset];
                noiseImage.data[currentPixelOffset + 3] = 50;
            }
        }
        // Put texture onto canvas
        this.canvasContext.putImageData(noiseImage, 0, 0);
        this.lastFrameUpdate = new Date().getTime();
        this.noiseAnimationWindowPos += 7;
        if (this.noiseAnimationWindowPos > canvasHeight) {
            this.noiseAnimationWindowPos = -canvasHeight;
        }
        this.scheduleNextRender();
    };
    TvNoiseCanvas.prototype.scheduleNextRender = function () {
        if (this.useAnimationFrame) {
            this.frameUpdateHandlerId = window.requestAnimationFrame(this.renderFrame.bind(this));
        }
        else {
            this.frameUpdateHandlerId = setTimeout(this.renderFrame.bind(this), this.frameInterval);
        }
    };
    return TvNoiseCanvas;
}(component_1.Component));
exports.TvNoiseCanvas = TvNoiseCanvas;


/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var listselector_1 = __webpack_require__(22);
var dom_1 = __webpack_require__(0);
var ItemSelectionList = (function (_super) {
    __extends(ItemSelectionList, _super);
    function ItemSelectionList(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            tag: 'ul',
            cssClass: 'ui-itemselectionlist',
        }, _this.config);
        return _this;
    }
    ItemSelectionList.prototype.isActive = function () {
        return this.items.length > 1;
    };
    ItemSelectionList.prototype.toDomElement = function () {
        var listElement = new dom_1.DOM('ul', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        });
        this.listElement = listElement;
        this.updateDomItems();
        return listElement;
    };
    ItemSelectionList.prototype.updateDomItems = function (selectedValue) {
        var _this = this;
        if (selectedValue === void 0) { selectedValue = null; }
        // Delete all children
        this.listElement.empty();
        var selectedListItem = null;
        var selectItem = function (listItem) {
            listItem.addClass(_this.prefixCss(ItemSelectionList.CLASS_SELECTED));
        };
        var deselectItem = function (listItem) {
            listItem.removeClass(_this.prefixCss(ItemSelectionList.CLASS_SELECTED));
        };
        var _loop_1 = function (item) {
            var listItem = new dom_1.DOM('li', {
                'type': 'li',
                'class': this_1.prefixCss('ui-selectionlistitem'),
            }).append(new dom_1.DOM('a', {}).html(item.label));
            if (!selectedListItem) {
                if (selectedValue == null) {
                    selectedListItem = listItem;
                }
                else if (String(selectedValue) === item.key) {
                    selectedListItem = listItem;
                }
            }
            // Handle list item selections
            listItem.on('click', function () {
                // Deselect the previous item (if there was a selected item)
                if (selectedListItem) {
                    deselectItem(selectedListItem);
                }
                // Select the clicked item
                selectedListItem = listItem;
                selectItem(listItem);
                // Fire the event
                _this.onItemSelectedEvent(item.key, false);
            });
            // Select default item
            if (selectedListItem) {
                selectItem(selectedListItem);
            }
            this_1.listElement.append(listItem);
        };
        var this_1 = this;
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            _loop_1(item);
        }
    };
    ItemSelectionList.prototype.onItemAddedEvent = function (value) {
        _super.prototype.onItemAddedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    ItemSelectionList.prototype.onItemRemovedEvent = function (value) {
        _super.prototype.onItemRemovedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    ItemSelectionList.prototype.onItemSelectedEvent = function (value, updateDomItems) {
        if (updateDomItems === void 0) { updateDomItems = true; }
        _super.prototype.onItemSelectedEvent.call(this, value);
        if (updateDomItems) {
            this.updateDomItems(value);
        }
    };
    return ItemSelectionList;
}(listselector_1.ListSelector));
ItemSelectionList.CLASS_SELECTED = 'selected';
exports.ItemSelectionList = ItemSelectionList;


/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(6);
/**
 * A click overlay that opens an url in a new tab if clicked.
 */
var ClickOverlay = (function (_super) {
    __extends(ClickOverlay, _super);
    function ClickOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-clickoverlay',
        }, _this.config);
        return _this;
    }
    ClickOverlay.prototype.initialize = function () {
        _super.prototype.initialize.call(this);
        this.setUrl(this.config.url);
        var element = this.getDomElement();
        element.on('click', function () {
            if (element.data('url')) {
                window.open(element.data('url'), '_blank');
            }
        });
    };
    /**
     * Gets the URL that should be followed when the watermark is clicked.
     * @returns {string} the watermark URL
     */
    ClickOverlay.prototype.getUrl = function () {
        return this.getDomElement().data('url');
    };
    ClickOverlay.prototype.setUrl = function (url) {
        if (url === undefined || url == null) {
            url = '';
        }
        this.getDomElement().data('url', url);
    };
    return ClickOverlay;
}(button_1.Button));
exports.ClickOverlay = ClickOverlay;


/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(6);
var dom_1 = __webpack_require__(0);
/**
 * A button to play/replay a video.
 */
var HugeReplayButton = (function (_super) {
    __extends(HugeReplayButton, _super);
    function HugeReplayButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-hugereplaybutton',
            text: 'Replay',
        }, _this.config);
        return _this;
    }
    HugeReplayButton.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        this.onClick.subscribe(function () {
            player.play('ui');
        });
    };
    HugeReplayButton.prototype.toDomElement = function () {
        var buttonElement = _super.prototype.toDomElement.call(this);
        // Add child that contains the play button image
        // Setting the image directly on the button does not work together with scaling animations, because the button
        // can cover the whole video player are and scaling would extend it beyond. By adding an inner element, confined
        // to the size if the image, it can scale inside the player without overshooting.
        buttonElement.append(new dom_1.DOM('div', {
            'class': this.prefixCss('image'),
        }));
        return buttonElement;
    };
    return HugeReplayButton;
}(button_1.Button));
exports.HugeReplayButton = HugeReplayButton;


/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(6);
/**
 * A button that closes (hides) a configured component.
 */
var CloseButton = (function (_super) {
    __extends(CloseButton, _super);
    function CloseButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-closebutton',
            text: 'Close',
        }, _this.config);
        return _this;
    }
    CloseButton.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        this.onClick.subscribe(function () {
            config.target.hide();
        });
    };
    return CloseButton;
}(button_1.Button));
exports.CloseButton = CloseButton;


/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var StorageUtils;
(function (StorageUtils) {
    var hasLocalStorageCache;
    function hasLocalStorage() {
        if (hasLocalStorageCache) {
            return hasLocalStorageCache;
        }
        // hasLocalStorage is used to safely ensure we can use localStorage
        // taken from https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API#Feature-detecting_localStorage
        var storage = window['localStorage'];
        try {
            var x = '__storage_test__';
            storage.setItem(x, x);
            storage.removeItem(x);
            hasLocalStorageCache = true;
        }
        catch (e) {
            hasLocalStorageCache = e instanceof DOMException && (
            // everything except Firefox
            e.code === 22 ||
                // Firefox
                e.code === 1014 ||
                // test name field too, because code might not be present
                // everything except Firefox
                e.name === 'QuotaExceededError' ||
                // Firefox
                e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&
                // acknowledge QuotaExceededError only if there's something already stored
                storage.length !== 0;
        }
        return hasLocalStorageCache;
    }
    StorageUtils.hasLocalStorage = hasLocalStorage;
    /**
     * Stores a string item into localStorage.
     * @param key the item's key
     * @param data the item's data
     */
    function setItem(key, data) {
        if (StorageUtils.hasLocalStorage()) {
            window.localStorage.setItem(key, data);
        }
    }
    StorageUtils.setItem = setItem;
    /**
     * Gets an item's string value from the localStorage.
     * @param key the key to look up its associated value
     * @return {string | null} Returns the string if found, null if there is no data stored for the key
     */
    function getItem(key) {
        if (StorageUtils.hasLocalStorage()) {
            return window.localStorage.getItem(key);
        }
        else {
            return null;
        }
    }
    StorageUtils.getItem = getItem;
    /**
     * Stores an object into localStorage. The object will be serialized to JSON. The following types are supported
     * in addition to the default types:
     *  - ColorUtils.Color
     *
     * @param key the key to store the data to
     * @param data the object to store
     */
    function setObject(key, data) {
        if (StorageUtils.hasLocalStorage()) {
            var json = JSON.stringify(data);
            setItem(key, json);
        }
    }
    StorageUtils.setObject = setObject;
    /**
     * Gets an object for the given key from localStorage. The object will be deserialized from JSON. Beside the
     * default types, the following types are supported:
     *  - ColorUtils.Color
     *
     * @param key the key to look up its associated object
     * @return {any} Returns the object if found, null otherwise
     */
    function getObject(key) {
        if (StorageUtils.hasLocalStorage()) {
            var json = getItem(key);
            if (key) {
                var object = JSON.parse(json);
                return object;
            }
        }
        return null;
    }
    StorageUtils.getObject = getObject;
})(StorageUtils = exports.StorageUtils || (exports.StorageUtils = {}));


/***/ }),
/* 47 */
/***/ (function(module, exports) {

/*! Hive Stats Pack build 3.2.0 Copyright(c) 2015 HiveStreaming AB, All rights reserved.
 * Authors: mikael.hogqvist@hivestreaming.com - riccardo.reale@hivestreaming.com - roberto.roverso@hivestreaming.com */
/*! AtatusJs - v2.3.12 - 2016-07-03
 * Copyright (c) 2016 Atatus */
!function(a){function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function c(a){return"undefined"==typeof a}if(a){var d={},e=a.TraceKit,f=[].slice,g="?";d.noConflict=function(){return a.TraceKit=e,d},d.wrap=function(a){function b(){try{return a.apply(this,arguments)}catch(b){throw d.report(b),b}}return b},d.report=function(){function c(a){i(),m.push(a)}function e(a){for(var b=m.length-1;b>=0;--b)m[b]===a&&m.splice(b,1)}function g(a,c){var e=null;if(!c||d.collectWindowErrors){for(var g in m)if(b(m,g))try{m[g].apply(null,[a].concat(f.call(arguments,2)))}catch(h){e=h}if(e)throw e}}function h(a,b,c,e,f){var h=null;if(f)h=d.computeStackTrace(f);else if(o)d.computeStackTrace.augmentStackTraceWithInitialElement(o,b,c,a),h=o,o=null,n=null;else{var i={url:b,line:c,column:e};i.func=d.computeStackTrace.guessFunctionName(i.url,i.line),i.context=d.computeStackTrace.gatherContext(i.url,i.line),h={mode:"onerror",message:a,url:document.location.href,stack:[i],useragent:navigator.userAgent}}return g(h,"from window.onerror"),k?k.apply(this,arguments):!1}function i(){l!==!0&&(k=a.onerror,a.onerror=h,l=!0)}function j(b){var c=f.call(arguments,1);if(o){if(n===b)return;var e=o;o=null,n=null,g.apply(null,[e,null].concat(c))}var h=d.computeStackTrace(b);throw o=h,n=b,a.setTimeout(function(){n===b&&(o=null,n=null,g.apply(null,[h,null].concat(c)))},h.incomplete?2e3:0),b}var k,l,m=[],n=null,o=null;return j.subscribe=c,j.unsubscribe=e,j}(),d.computeStackTrace=function(){function e(b){if(!d.remoteFetching)return"";try{var c=function(){try{return new a.XMLHttpRequest}catch(b){return new a.ActiveXObject("Microsoft.XMLHTTP")}},e=c();return e.open("GET",b,!1),e.send(""),e.responseText}catch(f){return""}}function f(a){if("string"!=typeof a)return[];if(!b(w,a)){var c="",d="";try{d=document.domain}catch(f){}-1!==a.indexOf(d)&&(c=e(a)),w[a]=c?c.split("\n"):[]}return w[a]}function h(a,b){var d,e=/function ([^(]*)\(([^)]*)\)/,h=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,i="",j=10,k=f(a);if(!k.length)return g;for(var l=0;j>l;++l)if(i=k[b-l]+i,!c(i)){if(d=h.exec(i))return d[1];if(d=e.exec(i))return d[1]}return g}function i(a,b){var e=f(a);if(!e.length)return null;var g=[],h=Math.floor(d.linesOfContext/2),i=h+d.linesOfContext%2,j=Math.max(0,b-h-1),k=Math.min(e.length,b+i-1);b-=1;for(var l=j;k>l;++l)c(e[l])||g.push(e[l]);return g.length>0?g:null}function j(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function k(a){return j(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function l(a,b){for(var c,d,e=0,g=b.length;g>e;++e)if((c=f(b[e])).length&&(c=c.join("\n"),d=a.exec(c)))return{url:b[e],line:c.substring(0,d.index).split("\n").length,column:d.index-c.lastIndexOf("\n",d.index)-1};return null}function m(a,b,c){var d,e=f(b),g=new RegExp("\\b"+j(a)+"\\b");return c-=1,e&&e.length>c&&(d=g.exec(e[c]))?d.index:null}function n(b){for(var c,d,e,f,g=[a.location.href],h=document.getElementsByTagName("script"),i=""+b,m=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,n=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,o=0;o<h.length;++o){var p=h[o];p.src&&g.push(p.src)}if(e=m.exec(i)){var q=e[1]?"\\s+"+e[1]:"",r=e[2].split(",").join("\\s*,\\s*");c=j(e[3]).replace(/;$/,";?"),d=new RegExp("function"+q+"\\s*\\(\\s*"+r+"\\s*\\)\\s*{\\s*"+c+"\\s*}")}else d=new RegExp(j(i).replace(/\s+/g,"\\s+"));if(f=l(d,g))return f;if(e=n.exec(i)){var s=e[1];if(c=k(e[2]),d=new RegExp("on"+s+"=[\\'\"]\\s*"+c+"\\s*[\\'\"]","i"),f=l(d,g[0]))return f;if(d=new RegExp(c),f=l(d,g))return f}return null}function o(a){if(!a.stack)return null;for(var b,d,e=/^\s*at (.*?) ?\(?((?:file|https?|chrome-extension):.*?):(\d+)(?::(\d+))?\)?\s*$/i,f=/^\s*(.*?)(?:\((.*?)\))?@?((?:file|https?|chrome):.*?):(\d+)(?::(\d+))?\s*$/i,j=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,k=a.stack.split("\n"),l=[],n=/^(.*) is undefined$/.exec(a.message),o=0,p=k.length;p>o;++o){if(b=f.exec(k[o]))d={url:b[3],func:b[1]||g,args:b[2]?b[2].split(","):"",line:+b[4],column:b[5]?+b[5]:null};else if(b=e.exec(k[o]))d={url:b[2],func:b[1]||g,line:+b[3],column:b[4]?+b[4]:null};else{if(!(b=j.exec(k[o])))continue;d={url:b[2],func:b[1]||g,line:+b[3],column:b[4]?+b[4]:null}}!d.func&&d.line&&(d.func=h(d.url,d.line)),d.line&&(d.context=i(d.url,d.line)),l.push(d)}return l.length?(l[0]&&l[0].line&&!l[0].column&&n?l[0].column=m(n[1],l[0].url,l[0].line):l[0].column||c(a.columnNumber)||(l[0].column=a.columnNumber+1),{mode:"stack",name:a.name,message:a.message,url:document.location.href,stack:l,useragent:navigator.userAgent}):null}function p(a){for(var b,c=a.stacktrace,d=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,e=c.split("\n"),f=[],g=0,j=e.length;j>g;g+=2)if(b=d.exec(e[g])){var k={line:+b[1],column:+b[2],func:b[3]||b[4],args:b[5]?b[5].split(","):[],url:b[6]};if(!k.func&&k.line&&(k.func=h(k.url,k.line)),k.line)try{k.context=i(k.url,k.line)}catch(l){}k.context||(k.context=[e[g+1]]),f.push(k)}return f.length?{mode:"stacktrace",name:a.name,message:a.message,url:document.location.href,stack:f,useragent:navigator.userAgent}:null}function q(c){var d=c.message.split("\n");if(d.length<4)return null;var e,g,j,m,n=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,q=[],r=document.getElementsByTagName("script"),s=[];for(g in r)b(r,g)&&!r[g].src&&s.push(r[g]);for(g=2,j=d.length;j>g;g+=2){var t=null;if(e=n.exec(d[g]))t={url:e[2],func:e[3],line:+e[1]};else if(e=o.exec(d[g])){t={url:e[3],func:e[4]};var u=+e[1],v=s[e[2]-1];if(v&&(m=f(t.url))){m=m.join("\n");var w=m.indexOf(v.innerText);w>=0&&(t.line=u+m.substring(0,w).split("\n").length)}}else if(e=p.exec(d[g])){var x=a.location.href.replace(/#.*$/,""),y=e[1],z=new RegExp(k(d[g+1]));m=l(z,[x]),t={url:x,line:m?m.line:y,func:""}}if(t){t.func||(t.func=h(t.url,t.line));var A=i(t.url,t.line),B=A?A[Math.floor(A.length/2)]:null;t.context=A&&B.replace(/^\s*/,"")===d[g+1].replace(/^\s*/,"")?A:[d[g+1]],q.push(t)}}return q.length?{mode:"multiline",name:c.name,message:d[0],url:document.location.href,stack:q,useragent:navigator.userAgent}:null}function r(a,b,c,d){var e={url:b,line:c};if(e.url&&e.line){a.incomplete=!1,e.func||(e.func=h(e.url,e.line)),e.context||(e.context=i(e.url,e.line));var f=/ '([^']+)' /.exec(d);if(f&&(e.column=m(f[1],e.url,e.line)),a.stack.length>0&&a.stack[0].url===e.url){if(a.stack[0].line===e.line)return!1;if(!a.stack[0].line&&a.stack[0].func===e.func)return a.stack[0].line=e.line,a.stack[0].context=e.context,!1}return a.stack.unshift(e),a.partial=!0,!0}return a.incomplete=!0,!1}function s(a,b){for(var c,e,f,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,j=[],k={},l=!1,o=s.caller;o&&!l;o=o.caller)if(o!==t&&o!==d.report){if(e={url:null,func:g,line:null,column:null},o.name?e.func=o.name:(c=i.exec(o.toString()))&&(e.func=c[1]),"undefined"==typeof e.func)try{e.func=c.input.substring(0,c.input.indexOf("{"))}catch(p){}if(f=n(o)){e.url=f.url,e.line=f.line,e.func===g&&(e.func=h(e.url,e.line));var q=/ '([^']+)' /.exec(a.message||a.description);q&&(e.column=m(q[1],f.url,f.line))}k[""+o]?l=!0:k[""+o]=!0,j.push(e)}b&&j.splice(0,b);var u={mode:"callers",name:a.name,message:a.message,url:document.location.href,stack:j,useragent:navigator.userAgent};return r(u,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description),u}function t(a,b){var c=null;b=null==b?0:+b;try{if(c=p(a))return c}catch(d){if(v)throw d}try{if(c=o(a))return c}catch(d){if(v)throw d}try{if(c=q(a))return c}catch(d){if(v)throw d}try{if(c=s(a,b+1))return c}catch(d){if(v)throw d}return{mode:"failed"}}function u(a){a=(null==a?0:+a)+1;try{throw new Error}catch(b){return t(b,a+1)}}var v=!1,w={};return t.augmentStackTraceWithInitialElement=r,t.guessFunctionName=h,t.gatherContext=i,t.ofCaller=u,t.getSource=f,t}(),d.extendToAsynchronousCallbacks=function(){var b=function(b){var c=a[b];a[b]=function(){var a=f.call(arguments),b=a[0];return"function"==typeof b&&(a[0]=d.wrap(b)),c.apply?c.apply(this,a):c(a[0],a[1])}};b("setTimeout"),b("setInterval")},d.remoteFetching||(d.remoteFetching=!0),d.collectWindowErrors||(d.collectWindowErrors=!0),(!d.linesOfContext||d.linesOfContext<1)&&(d.linesOfContext=11),a.TraceKit=d}}("undefined"!=typeof window?window:global),function(a,b){"use strict";if(a){var c=a.event.add;a.event.add=function(d,e,f,g,h){if("function"!=typeof f&&"function"!=typeof f.handler)return c.call(this,d,e,f,g,h);var i;return f.handler?(i=f.handler,f.handler=b.wrap(f.handler)):(i=f,f=b.wrap(f)),f.guid=i.guid?i.guid:i.guid=a.guid++,c.call(this,d,e,f,g,h)};var d=a.fn.ready;a.fn.ready=function(a){return d.call(this,b.wrap(a))};var e=a.ajax;a.ajax=function(c,d){"object"==typeof c&&(d=c,c=void 0),d=d||{};for(var f,g=["complete","error","success"];f=g.pop();)a.isFunction(d[f])&&(d[f]=b.wrap(d[f]));try{return c?e.call(this,c,d):e.call(this,d)}catch(h){throw b.report(h),h}}}}(window.jQuery,window.TraceKit),function(a,b,c,d){function e(a){var b=a,c=a.split("//")[1];if(c){var d=c.indexOf("?"),e=c.toString().substring(0,d),f=e.split("/").slice(0,4).join("/"),g=e.substring(0,48);b=f.length<g.length?f:g,b!==e&&(b+="..")}return b}function f(a,b,c,f){if(K&&(L||b.getAllResponseHeaders())){var g="AJAX Error: "+(b.statusText||"unknown")+" "+(c.type||"unknown")+" "+(e(c.url)||"unknown");V.send(f||a.type,{status:b.status,statusText:b.statusText,type:c.type,url:c.url,ajaxErrorMessage:g,contentType:c.contentType,requestData:c.data&&c.data.slice?c.data.slice(0,10240):d,responseData:b.responseText&&b.responseText.slice?b.responseText.slice(0,10240):d,activeTarget:a.target&&a.target.activeElement?a.target.activeElement.outerHTML:d})}}function g(){return o&&""!==o?!0:(R.log("Atatus API key has not been configured, make sure you call atatus.config(yourApiKey)"),!1)}function h(){var c=b.documentElement,d=b.getElementsByTagName("body")[0],e=a.innerWidth||c.clientWidth||d.clientWidth,f=a.innerHeight||c.clientHeight||d.clientHeight;return{width:e,height:f}}function i(a){var b=(new Date).toJSON();try{var c="atatusjs="+b+"="+R.getRandomInt();"undefined"==typeof localStorage[c]&&(localStorage[c]=a)}catch(d){R.log("Atatus: LocalStorage full, cannot save exception")}}function j(){try{return"localStorage"in a&&null!==a.localStorage}catch(b){return!1}}function k(){if(j()&&localStorage.length>0)for(var a in localStorage)if("atatusjs="===a.substring(0,9)){try{var b=JSON.parse(localStorage[a]);"apikey"in b&&m(N,b)}catch(c){R.log("Atatus: Invalid JSON object in LocalStorage")}localStorage.removeItem(a)}}function l(a,c){if(c=c||{},!a.stack||!a.stack.length)return void R.log("Atatus: Canceling send due to no stacktrace.");R.isEmpty(c.customData)&&(c.customData="function"==typeof p?p():p),R.isEmpty(c.tags)&&(c.tags=E);var d=c.customData&&c.customData.ajaxErrorMessage||a.message;if(d&&0===d.indexOf("Uncaught ")&&(d=a.message.substring(9)),d=d||c.status||"Script error.",w&&w.test(d))return void R.log("Atatus: canceling send due to ignore errors");var e=[];a.stack&&a.stack.length&&R.forEach(a.stack,function(a,b){R.endsWith(b.url,"/atatus.js")||e.push({ln:b.line||0,cn:b.column||0,f:b.url||"anonymous",m:b.func||"[anonymous]"})});var f=[a.name,d,JSON.stringify(e)].join("|");if(f===x)return void R.log("Atatus: canceling send due to duplicate errors");x=f;var g=c.customData;try{JSON.stringify(g)}catch(h){var i="Cannot add custom data; may contain circular reference";g={error:i},R.log("Atatus: "+i)}var j=U.getAllEvents();S.clear();var k={"class":a.name,name:d,backTraces:e,userActions:j,net:null,customData:g||null,tags:c.tags,sourcemap:J,request:{url:b.location.href,ua:navigator.userAgent}};if("function"==typeof y&&(k.groupingKey=y(k)),"function"==typeof z){var l=z(k);l&&m(N,k)}else m(N,k)}function m(c,d){if(G&&G.length&&-1===G.indexOf(location.host))return void R.log("Atatus: canceling send due to not a allowed domain");if(g()){if(!d.ts){var e=a.screen||h();d.ts=(new Date).getTime(),d.apikey=o,d.request=d.request||{},d.request.url=d.request.url||b.location.href,d.request.ua=d.request.ua||navigator.userAgent,d.request.w=e.width,d.request.h=e.height,d.v=r||"",d._v=B||""}q&&(d.cid=q.userId||null),R.log("Sending data to Atatus Receiver:",d),n(c,JSON.stringify(d))}}function n(a,b){var c=new Image,d=M+a+"?data="+encodeURIComponent(b);c.crossOrigin="anonymous",c.onload=function(){k()},c.onerror=c.onabort=function(){I&&a===N&&i(b)},c.src=d}var o,p,q,r,s,t,u,v,w,x,y,z,A,B="2.3.12",C=TraceKit.noConflict(),D=a.atatus,E=[],F=!1,G=[],H=!1,I=!1,J=!1,K=!1,L=!1,M="https://br-rx.atatus.com",N="/track/browser/errors",O="/track/browser/perf",P="/track/browser/perf/ajax",Q="/track/browser/perf/txn";c&&(A=c(b));var R={isBoolean:function(a){return"undefined"!=typeof a&&"boolean"==typeof a},isString:function(a){return"string"==typeof a},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},endsWith:function(a,b){return a&&b?-1!==a.indexOf(b,a.length-b.length):!1},joinRegExp:function(a){for(var b,c=[],d=0,e=a.length;e>d;d++)b=a[d],R.isString(b)?c.push(b.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")):b&&b.source&&c.push(b.source);return new RegExp(c.join("|"),"i")},getTargetUrl:function(b){return a.XDomainRequest&&H&&(b=b.slice(6)),b},now:function(){return(new Date).getTime()},pad:function(a){return a=String(a),1===a.length&&(a="0"+a),a},merge:function(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d},mergeArray:function(a,b){return null!=b?a.concat(b):a},forEach:function(a,b){for(var c=0;c<a.length;c++)b.call(null,c,a[c])},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},getRandomInt:function(){return Math.floor(9007199254740992*Math.random())},log:function(b,c){F&&a.console&&a.console.log&&(a.console.log(b),c&&a.console.log(c))},bind:function(a,b){return function(){return a.apply(b,Array.prototype.slice.call(arguments))}},canAllowInsecureSubmissions:function(){var b=a.navigator.userAgent,c=b.match(/Trident\/([\d.]+)/),d=c&&"7.0"===c[1]?11:(b=b.match(/MSIE ([\d.]+)/))?parseInt(b[1],10):!1;return d&&9>=d},uuid4:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},addEventListener:function(b,c,d){return"undefined"!=typeof a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,d):void 0},arrayFromObject:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}},S={eventObject:{},all:function(a){for(var b=this.getEventObject(a),c=[],d=0;d<b.length;d++)c.push(b[d].value);return c},clear:function(){for(var a in this.eventObject)this.eventObject.hasOwnProperty(a)&&(this.eventObject[a].length=0)},add:function(a,b){var c=this.getEventObject(a),d=R.uuid4();return c.push({key:d,value:b}),this.truncateEventObject(a,10),d},get:function(a,b){for(var c=this.getEventObject(a),d=0;d<c.length;d++)if(c[d].key===b)return c[d].value;return!1},getEventObject:function(a){return this.eventObject[a]||(this.eventObject[a]=[]),this.eventObject[a]},truncateEventObject:function(a,b){var c=this.getEventObject(a);c.length>b&&(this.eventObject[a]=c.slice(c.length-b))}},T={attach:function(b,c,d,e,f){b=b||a.console||{};for(var g=f||["log","debug","info","warn","error"],h=g.pop(),i=function(a,b,d){c&&S.add("user",{ts:R.now(),c:"console",l:a,m:b}),"error"===a&&e&&V.notify(new Error(b),d)};h;)this.wrapConsoleMethod(b,h,d,i),h=g.pop()},wrapConsoleMethod:function(a,b,c,d){var e=a[b],f=a;b in a&&(a[b]=function(){var a=[].slice.call(arguments),g=""+a.join(" "),h={level:b,logger:"console"};d&&d(b,g,h),e&&c&&Function.prototype.apply.call(e,f,a)})}},U={attach:function(){var a=R.bind(this.onDocumentClicked,this),c=R.bind(this.onInputChanged,this);b.addEventListener?(b.addEventListener("click",a,!0),b.addEventListener("blur",c,!0)):b.attachEvent&&(b.attachEvent("onclick",a),b.attachEvent("onfocusout",c))},writeUserEvent:function(a,b,c,d){"password"===this.getElementType(a)&&(c=void 0),S.add("user",{ts:R.now(),a:b,e:this.getOuterHTML(a),v:this.getValueKind(c,d)})},onDocumentClicked:function(a){var b=this.getElementFromEvent(a);b&&b.tagName&&(this.isTarget(b,"a")||this.isTarget(b,"button")||this.isTarget(b,"input",["button","submit"])?this.writeUserEvent(b,"click"):this.isTarget(b,"input",["checkbox","radio"])&&this.writeUserEvent(b,"check",b.value,b.checked))},onInputChanged:function(a){var b=this.getElementFromEvent(a);b&&b.tagName&&(this.isTarget(b,"textarea")?this.writeUserEvent(b,"input",b.value):this.isTarget(b,"select")&&b.options&&b.options.length?this.onSelectInputChanged(b):this.isTarget(b,"input")&&!this.isTarget(b,"input",["button","submit","hidden","checkbox","radio"])&&this.writeUserEvent(b,"input",b.value))},onSelectInputChanged:function(a){if(a.multiple){for(var b=0;b<a.options.length;b++)if(a.options[b].selected){this.writeUserEvent(a,"select",a.options[b].value);break}}else 0<=a.selectedIndex&&a.options[a.selectedIndex]&&this.writeUserEvent(a,"select",a.options[a.selectedIndex].value)},getElementFromEvent:function(a){return a.target||b.elementFromPoint(a.clientX,a.clientY)},isTarget:function(a,b,c){if(a.tagName.toLowerCase()!==b.toLowerCase())return!1;if(!c)return!0;for(var d=this.getElementType(a),e=0;e<c.length;e++)if(c[e]===d)return!0;return!1},getElementType:function(a){return(a.getAttribute("type")||"").toLowerCase()},getOuterHTML:function(a){for(var b="<"+a.tagName.toLowerCase(),c=a.attributes,d=0,e=c.length;e>d;d++){var f=c[d].name;"value"!==f.toLowerCase()&&(b+=" "+f+'="'+c[d].value+'"')}return b+=" >"},getValueKind:function(a,b){return null==a?null:{length:a.length,checked:b,pattern:this.matchInputPattern(a)}},matchInputPattern:function(a){return""===a?"empty":/^[a-z0-9!#$%&'*+=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/.test(a)?"email":/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(a)||/^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(a)?"date":/^(?:(?:\+?1\s*(?:[.\-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.\-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.\-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(a)?"phone":/^\s*$/.test(a)?"whitespace":/^\d*$/.test(a)?"numeric":"character"},getAllEvents:function(){return S.all("user")}},V={noConflict:function(){return a.atatus=D,V},isConfigured:function(){return!!o},config:function(b,c){return c=c||{},o=b,C.remoteFetching=!1,w=[],c&&(p=c.customData,E=c.tags||[],J=!(!c.enableSourcemap&&!c.sourcemap),s=!!c.disableUserActions,t=!!c.disableAjaxMonitoring,u=!!c.disableRUM,F=!!c.debugMode,c.ignoreErrors&&R.isArray(c.ignoreErrors)&&(w=c.ignoreErrors),V.setAllowedDomains(c.allowedDomains),V.setVersion(c.version),V.enableOffline(c.enableOffline||c.offline),V.onBeforeErrorSend(c.beforeErrorSend),V.setGroupingKeyCallback(c.groupingKeyCallback)),H=R.canAllowInsecureSubmissions(),w.push(/^Script error\.?$/),w.push(/^Javascript error: Script error\.? on line 0$/),w=R.joinRegExp(w),k(),v={enabled:!0,timeline:!0,display:!0,error:!0,levels:null},R.isBoolean(c.console)&&(v.enabled=c.console),R.isBoolean(c.consoleTimeline)&&(v.timeline=c.consoleTimeline),R.isBoolean(c.consoleDisplay)&&(v.display=c.consoleDisplay),R.isBoolean(c.consoleErrorNotify)&&(v.error=c.consoleErrorNotify),R.isArray(c.consoleTimelineLevels)&&(v.levels=c.consoleTimelineLevels),v.enabled&&"console"in a&&a.console.log&&T.attach(a.console,v.timeline,v.display,v.error,v.levels),s||U.attach(),t||u||V.__attachAjaxHooks(),V},install:function(){return g()?(C.report.subscribe(l),C.extendToAsynchronousCallbacks(),A&&K&&A.ajaxError(f),V):void 0},uninstall:function(){return o=null,C.report.unsubscribe(l),A&&K&&A.unbind("ajaxError",f),V},setCustomData:function(a){return p=a,V},setTags:function(a){return E=a,V},setAllowedDomains:function(a){return a&&R.isArray(a)&&(G=a),V},getAllowedDomains:function(){return G},setUser:function(a,b,c,d){return q={},a&&(q.userId=""+a),b&&(q.email=""+b),c&&(q.firstName=""+c),d&&(q.lastName=""+d),V},setVersion:function(a){return a&&(r=""+a),V},enableOffline:function(a){return R.isBoolean(a)&&(I=a),V},onBeforeErrorSend:function(a){return"function"==typeof a&&(z=a),V},setGroupingKeyCallback:function(a){return"function"==typeof a&&(y=a),V},setAPIEndpoint:function(a){return M=a,V},init:function(a,b,c){return c&&(b=b||{},b.customData=c),V.config(a,b)},withCustomData:function(a){return V.setCustomData(a)},withTags:function(a){return V.setTags(a)},attach:function(){return V.install()},detach:function(){return V.uninstall()},notify:function(a,b,c){return V.send(a,b,c)},sendPerf:function(a){return u?void R.log("RUM is disabled. Please enable it in the config options."):m(O,a)},sendAjaxPerf:function(a){return u?void R.log("RUM is disabled. Please enable it in the config options."):m(P,a)},sendTxnPerf:function(a){return m(Q,a)},send:function(a,b,c){try{l(C.computeStackTrace(a),{customData:R.merge(p,b),tags:R.mergeArray(E,c)})}catch(d){if(a!==d)throw d}return V},_helper:R};a.atatus=V}(window,document,window.jQuery),function(a,b,c){function d(a){a.pl<=0||atatus.sendPerf(a)}function e(){var b=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance,c=b.timing,e=b.navigation;if(0===c.loadEventEnd)return!1;clearInterval(i),i=null;var f=c.navigationStart;0>=f&&(f=c.fetchStart);var g={};for(var h in j)g[j[h]]=-1,h in c&&(c[h]<=0||(g[j[h]]=c[h]-f));var k={nty:e.type,rc:e.redirectCount,nt:g.rps-g.ns,dp:g.dce-g.rps,pr:g.le-g.dce,fe:g.le-g.rps,pl:g.le-g.ns};d(k)}function f(){if(!h||!h.bDone)return!1;clearInterval(i),i=!1;var a=h.getMeasures();if(null!=a&&null!=a.backend&&null!=a.frontend&&null!=a["page load time"]&&null!=a["total load time"]){var b=a.backend,c=a.backend+a.frontend,e={nty:0,rc:0,nt:b,dp:c-b,pr:a["total load time"]-c,fe:a["total load time"]-b,pl:a["total load time"]};d(e)}}var g=(new Date).getTime(),h=h||{};h.q=h.q||[],h.version="0.3",h.targetOrigin=b.location.protocol+"//"+b.location.hostname,h.bPostMessage=!1,h.beaconUrl=h.beaconUrl||"/images/beacon.gif",h.autorun=!1,h.init=function(){if(h.bDone=!1,h.bUnloaded=!1,h.marks={},h.measures={},h.starts={},h.findStartTime(),h.addEventListener("beforeunload",h.beforeUnload,!1),h.addEventListener("pagehide",h.beforeUnload,!1),h.addEventListener("unload",h.beforeUnload,!1),h.processQ(),"complete"===b.readyState){var c=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;c&&"undefined"!=typeof c.timing&&"undefined"!=typeof c.timing.loadEventEnd&&(h.mark("firstbyte",c.timing.responseStart),h.mark("onload",c.timing.loadEventEnd)),h.done()}else h.addEventListener("load",h.onload,!1)},h.processQ=function(){for(var a=h.q.length,b=0;a>b;b++){var c=h.q[b],d=c[0];"mark"===d?h.mark(c[1],c[2]):"measure"===d?h.measure(c[1],c[2],c[3]):"done"===d&&h.done(c[1])}},h.mark=function(b,c){return h.dprint("RUM_EPISODES.mark: "+b+", "+c),b?(h.marks[b]=parseInt(c||(new Date).getTime()),h.bPostMessage&&a.postMessage("RUM_EPISODES:mark:"+b+":"+c,h.targetOrigin),void("firstbyte"===b?h.measure("backend","starttime","firstbyte"):"onload"===b?(h.measure("frontend","firstbyte","onload"),h.measure("page load time","starttime","onload")):"done"===b&&h.measure("total load time","starttime","done"))):void h.dprint("Error: markName is undefined in RUM_EPISODES.mark.")},h.measure=function(b,c,d){if(h.dprint("RUM_EPISODES.measure: "+b+", "+c+", "+d),!b)return void h.dprint("Error: episodeName is undefined in RUM_EPISODES.measure.");var e;if("undefined"==typeof c)e="number"==typeof h.marks[b]?h.marks[b]:(new Date).getTime();else if("number"==typeof h.marks[c])e=h.marks[c];else{if("number"!=typeof c)return void h.dprint("Error: unexpected startNameOrTime in RUM_EPISODES.measure: "+c);e=c}var f;if("undefined"==typeof d)f=(new Date).getTime();else if("number"==typeof h.marks[d])f=h.marks[d];else{if("number"!=typeof d)return void h.dprint("Error: unexpected endNameOrTime in RUM_EPISODES.measure: "+d);f=d}h.starts[b]=parseInt(e),h.measures[b]=parseInt(f-e),h.bPostMessage&&a.postMessage("RUM_EPISODES:measure:"+b+":"+e+":"+f,h.targetOrigin)},h.done=function(b){h.bDone=!0,h.mark("done"),h.bPostMessage&&a.postMessage("RUM_EPISODES:done",h.targetOrigin),"function"==typeof b&&b()},h.getMarks=function(){return h.marks},h.getMeasures=function(){return h.measures},h.getStarts=function(){return h.starts},h.findStartTime=function(){var a=h.findStartWebTiming()||h.findStartCookie();a&&h.mark("starttime",a)},h.findStartWebTiming=function(){var b,c=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;return c&&"undefined"!=typeof c.timing&&"undefined"!=typeof c.timing.navigationStart&&(b=c.timing.navigationStart,h.dprint("RUM_EPISODES.findStartWebTiming: startTime = "+b)),b},h.findStartCookie=function(){for(var d=b.cookie.split(" "),e=0;e<d.length;e++)if(0===d[e].indexOf("RUM_EPISODES=")){for(var f,g,i=d[e].substring("RUM_EPISODES=".length).split("&"),j=0;j<i.length;j++)if(0===i[j].indexOf("s="))f=i[j].substring(2);else if(0===i[j].indexOf("r=")){var k=i[j].substring(2);k=k.replace(/;$/,""),g=a.escape(b.referrer)===k}if(g&&f)return h.dprint("RUM_EPISODES.findStartCookie: startTime = "+f),f}return c},h.beforeUnload=function(){h.bUnloaded||(b.cookie="RUM_EPISODES=s="+Number(new Date)+"&r="+a.escape(b.location)+"; path=/",h.bUnloaded=!0)},h.onload=function(){h.mark("onload"),h.done()},h.addEventListener=function(b,c,d){return"undefined"!=typeof a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,d):void 0},h.dprint=function(){},h.init();var i=null,j={navigationStart:"ns",redirectStart:"rds",redirectEnd:"rde",unloadEventStart:"us",unloadEventEnd:"ue",fetchStart:"fs",domainLookupStart:"dls",domainLookupEnd:"dle",connectStart:"cs",secureConnectionStart:"scs",connectEnd:"ce",handshakeStart:"hs",requestStart:"rqs",responseStart:"rps",responseEnd:"rpe",domLoading:"dl",domInteractive:"di",domContentLoadedEventStart:"dcs",domContentLoadedEventEnd:"dce",domComplete:"dc",loadEventStart:"ls",loadEventEnd:"le"},k=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;k&&"undefined"!=typeof k.timing&&"undefined"!=typeof k.navigation?i=setInterval(e,100):(h.mark("firstbyte",g),i=setInterval(f,100))}(window,document),atatus.__attachAjaxHooks=function(){!function(a,b){var c=atatus._helper,d={queue:[],batchSize:25,processing:!1,bUnloaded:!1,push:function(a){"string"==typeof a.url&&a.url.indexOf(".html")>0||(this.queue.push(a),this.queue.length>=this.batchSize&&this._processQueue())},_processQueue:function(){if(!this.processing&&this.queue.length){this.processing=!0;try{for(var a={},b={},d=0;d<this.queue.length;d++){var e,f=this.queue[d];if(f.status<400){e=f.method+f.url;var g=f.respAvailTime-f.sendTime,h=f.respProcTime-f.respAvailTime,i=f.receivedSize,j=f.sendSize,k=a[e];if(k){k.c++;var l=k.re;l.t=l.t+g,l.lo=l.lo<g?l.lo:g,l.hi=l.hi>g?l.hi:g,l.ssq=l.ssq+g*g;var m=k.cb;m.t=m.t+h,m.lo=m.lo<h?m.lo:h,m.hi=m.hi>h?m.hi:h,m.ssq=m.ssq+h*h;var n=k.rs;n.t=n.t+i,n.lo=n.lo<i?n.lo:i,n.hi=n.hi>i?n.hi:i,n.ssq=n.ssq+i*i;var o=k.ss;o.t=o.t+j,o.lo=o.lo<j?o.lo:j,o.hi=o.hi>j?o.hi:j,o.ssq=o.ssq+j*j}else a[e]={m:f.method,url:f.url,c:1,re:{t:g,lo:g,hi:g,ssq:g*g},cb:{t:h,lo:h,hi:h,ssq:h*h},rs:{t:f.receivedSize,lo:f.receivedSize,hi:f.receivedSize,ssq:f.receivedSize*f.receivedSize},ss:{t:f.sendSize,lo:f.sendSize,hi:f.sendSize,ssq:f.sendSize*f.sendSize}}}else e=f.method+f.status+f.url,b[e]?b[e].c++:b[e]={m:f.method,url:f.url,st:f.status,c:1}}var p={xhr:c.arrayFromObject(a),xhrError:c.arrayFromObject(b)};atatus.sendAjaxPerf(p)}catch(q){c.log("Error while processing queue: ",q)}finally{this.queue=[],this.processing=!1}}},beforeUnload:function(){d.bUnloaded||(d._processQueue(),d.bUnloaded=!0)}};c.addEventListener("beforeunload",d.beforeUnload,!1);var e={support:function(a){return!a||"apply"in a},around:function(a,b,d,e){return a=a||function(){},function(){var f,g=Array.prototype.slice.call(arguments);try{b&&(f=b.apply(this,g))}catch(h){c.log(e,h)}var i;try{i=a.apply(this,f||g)}finally{try{d&&d.apply(this,g)}catch(h){c.log(e,h)}}return i}},before:function(a,b){return e.around(a,b)},after:function(a,b){return e.around(a,null,b)},timeout:function(a){setTimeout(a,0)},wrapAddEventListener:function(){return function(a,b){if(("load"===a||"error"===a)&&b&&this._atrumXhrData){var c;b.__atrumInterceptor?c=b.__atrumInterceptor:e.support(b)?(c=g.wrapXHR(b,this,"XHR.invokeEventListener"),b.__atrumInterceptor=c):c=null;var d;return c&&(d=Array.prototype.slice.call(arguments),d[1]=c),d}}},wrapRemoveEventListener:function(){return function(a,b){if(this._atrumXhrData){var c=Array.prototype.slice.call(arguments);return b.__atrumInterceptor&&(c[1]=b.__atrumInterceptor),c}}},aroundWithHandleEvent:function(a,b,c,d){var f=a;return a&&"object"==typeof a&&"toString"in a&&"[xpconnect wrapped nsIDOMEventListener]"===a.toString()&&"handleEvent"in a&&(f=function(){a.handleEvent.apply(this,Array.prototype.slice.call(arguments))}),e.around(f,b,c,d)},getFullyQualifiedUrl:function(a){var c=b.createElement("a");return c.href=a,c.href}};if(a.XMLHttpRequest&&a.XMLHttpRequest.prototype){var f=a.XMLHttpRequest.prototype;if(!("open"in f&&"send"in f))return;if(!e.support(f.open)||!e.support(f.send))return;var g={};g.captureAjaxTimings=function(a){var b=a._atrumXhrData;if(b){var c=(new Date).getTime();2===a.readyState?b.firstByteTime=b.firstByteTime||c:4===a.readyState&&(b.respAvailTime=b.respAvailTime||c,b.firstByteTime=b.firstByteTime||c)}},g.sendPayload=function(a,b){b.receivedSize=0,a.responseType&&"text"!==a.responseType||"string"==typeof a.responseText&&(b.receivedSize=a.responseText.length),b.status=a.status,d.push(b)},g.wrapXHR=function(a,b,c){return e.aroundWithHandleEvent(a,function(){g.captureAjaxTimings(this)},function(){var a=b._atrumXhrData;if(a&&4===b.readyState){var c=(new Date).getTime();a.respProcTime=a.respProcTime||c,g.sendPayload(b,a),delete b._atrumXhrData}},c)},g.ajaxDone=function(a){if(a._atrumXhrData){var b=(new Date).getTime()+3e4,c=function(){g.captureAjaxTimings(a);var d=a._atrumXhrData;if(d){var e=(new Date).getTime();4===a.readyState?(d.respProcTime=d.respProcTime||e,g.sendPayload(a,d),delete a._atrumXhrData):b>e?setTimeout(c,50):delete a._atrumXhrData}};c()}},f.open=e.around(f.open,function(){var a=1<=arguments.length?String(arguments[0]):"",b=2<=arguments.length?String(arguments[1]):"",c=atatus.getAllowedDomains(),d=!0;if(b=e.getFullyQualifiedUrl(b),b&&c&&c.length){d=!1;for(var f=0;f<c.length;f++){var g=c[f];if(g&&b.indexOf(g)>-1){d=!0;break}}}d&&(b=b&&b.split("?")[0],this._atrumXhrData={method:a,url:b,sendTime:null,sendSize:null,firstByteTime:null,respAvailTime:null,respProcTime:null,receivedSize:null,parentPhase:null})},null,"XHR.open"),f.send=e.around(f.send,function(){var a=this,b=a._atrumXhrData;if(b){var c=(new Date).getTime();b.sendTime=b.sendTime||c,b.sendSize=1<=arguments.length&&arguments[0]?arguments[0].length||0:0;var d=0,f=function(){if(4===a.readyState)g.ajaxDone(a);else{var b=null;try{b=a.onreadystatechange}catch(c){return void g.ajaxDone(a)}d++,b?e.support(b)?a.onreadystatechange=g.wrapXHR(b,a,"XHR.onReadyStateChange"):g.ajaxDone(a):5>d?e.timeout(f):g.ajaxDone(a)}};f()}},null,"XHR.send"),"addEventListener"in f&&"removeEventListener"in f&&e.support(f.addEventListener)&&e.support(f.removeEventListener)&&(f.addEventListener=e.around(f.addEventListener,e.wrapAddEventListener(),null,"XHR.addEventListener"),f.removeEventListener=e.around(f.removeEventListener,e.wrapRemoveEventListener(),null,"XHR.removeEventListener"))}}(window,document)},function(a){function b(a,b,c){if(!(0>=b)){var d={name:a,dur:b,st:c};atatus.sendTxnPerf(d)}}function c(a){return h+" "+a}function d(){try{return"localStorage"in a&&null!==a.localStorage;}catch(b){return!1}}function e(a){var b=i.now();try{localStorage.setItem(c(a),b)}catch(d){}}function f(a){var b=null,d=c(a);try{b=localStorage.getItem(d),localStorage.removeItem(d)}catch(e){}var f=0;return b&&(f=i.now()-b),f}function g(a){try{var b=c(a);localStorage.removeItem(b)}catch(d){}}var h="atatus.com/",i=atatus._helper,j=1,k=0;atatus.beginTransaction=function(a){d()&&e(a)},atatus.endTransaction=function(a){if(d()){var c=f(a);b(a,c,j)}},atatus.failTransaction=function(a){if(d()){var c=f(a);b(a,c,k)}},atatus.cancelTransaction=function(a){d()&&g(a)}}(window,document);
/*! https://github.com/ttaubert/node-arraybuffer-slice
 * (c) 2014 Tim Taubert <tim@timtaubert.de>
 * arraybuffer-slice may be freely distributed under the MIT license.*/
!function(r){"use strict";function t(r,t){return r=0|r||0,r<0?Math.max(r+t,0):Math.min(r,t)}ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,n){var f=this.byteLength,i=t(e,f),a=f;if(n!==r&&(a=t(n,f)),i>a)return new ArrayBuffer(0);var u=a-i,y=new ArrayBuffer(u),o=new Uint8Array(y),s=new Uint8Array(this,i,u);return o.set(s),y})}();
!function(t){function e(r){if(i[r])return i[r].t;var n=i[r]={t:{},id:r,loaded:!1};return t[r].call(n.t,n,n.t,e),n.loaded=!0,n.t}var i={};return e.i=t,e.c=i,e.o="",e(0)}([function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(25),o=i(7),s=i(9),a=i(1);if("undefined"==typeof c)var c=3e4;var h=function(t){function e(e,i){var r=t.call(this,i)||this;return r.pluginName="bitmovin",r.s=!1,r.player=e,r.player.initSession=function(t){return r.h(),r.p(t).timeout(c,r.u+" Hive Plugin initialization timeout").then(function(t){return r.l(),t.g()})["catch"](function(t){return r.v(),r.h(),r.m().debug(r.u+" error occurred resolving the ticket - "+t.stack),a.reject(t)})},r.m().notice(r.u+"registered plugin [name:"+r.T()+"][id: "+r.S()+"][version: "+r.I()+"]"),r}return r(e,t),e.prototype.l=function(){var t=this;this.s||(this.player.addEventHandler("onReady",function(){if(t.m().debug("bitmovin.player.EVENT.ON_READY"),t.R()){var e=!!t.player.getConfig().playback&&t.player.getConfig().playback.auto;e&&t.k(!1),t.C()&&(t.O=new o.P)}}),this.player.addEventHandler("onPlay",function(){t.m().debug("bitmovin.player.EVENT.ON_PLAY"),t.A(s.F.B.N)}),this.player.addEventHandler("onError",function(e){t.m().debug("bitmovin.player.EVENT.ON_ERROR");var i=-1,r=null;if(null!=e)try{i=e.code,r=JSON.stringify(e,null)}catch(n){r=e}t.onError(i,r)}),this.player.addEventHandler("onPlaybackFinished",function(){t.m().debug("bitmovin.player.EVENT.ON_PLAYBACK_FINISHED"),t._(s.F.B.D,{code:1})}),this.player.addEventHandler("onSeek",function(){t.m().debug("bitmovin.player.EVENT.ON_SEEK"),t._(s.F.B.H)}),this.player.addEventHandler("onFullscreenEnter",function(){t.m().debug("bitmovin.player.EVENT.ON_FULLSCREEN_ENTER"),t._(s.F.B.L,{value:!0})}),this.player.addEventHandler("onFullscreenExit",function(){t.m().debug("bitmovin.player.EVENT.ON_FULLSCREEN_EXIT"),t._(s.F.B.L,{value:!1})}),this.player.addEventHandler("onSegmentRequestFinished",function(e){var i=e.mimeType.indexOf("video")>=0;if(e.success){var r=8*e.size/e.downloadTime;t.O.M(i,t.j,e.size),t.O.U(r)}else t.O.V(i,t.j)}),0===this.q().indexOf("7")?this.J():0===this.q().indexOf("6")&&this.K(),this.s=!0)},e.prototype.K=function(){var t=this;this.player.addEventHandler("onStartBuffering",function(){t.m().debug("bitmovin.player.EVENT.ON_START_BUFFERING"),t.k()}),this.player.addEventHandler("onStopBuffering",function(){t.m().debug("bitmovin.player.EVENT.ON_STOP_BUFFERING"),t.G()}),this.player.addEventHandler("onPause",function(){t.m().debug("bitmovin.player.EVENT.ON_PAUSE"),t.A(s.F.B.W)}),this.player.addEventHandler("onVideoDownloadQualityChange",function(e){var i=t.$();i===StreamProtocol.Y?t.X(e.targetQuality):t.X(e.targetQuality.split("br")[1])})},e.prototype.J=function(){var t=this;this.player.addEventHandler("onStallStarted",function(){t.m().debug("bitmovin.player.EVENT.ON_STALL_STARTED"),t.k()}),this.player.addEventHandler("onStallEnded",function(){t.m().debug("bitmovin.player.EVENT.ON_STALL_ENDED"),t.G()}),this.player.addEventHandler("onPaused",function(){t.m().debug("bitmovin.player.EVENT.ON_PAUSED"),t.A(s.F.B.W)}),this.player.addEventHandler("onVideoDownloadQualityChanged",function(e){t.X(e.targetQualityId.bitrate)})},e.prototype.X=function(t){this.m().debug("newBitrate",t),this.j&&t>this.j?this.O.Z():this.j&&this.j>t&&this.O.tt(),this.j=t},e.prototype.A=function(t){"undefined"!=typeof this.et&&this.et!==t&&(this._(t),this.et=t)},e.prototype.it=function(){var t=this.$();return t===StreamProtocol.Y?this.player.getConfig().source.hls:t===StreamProtocol.rt?this.player.getConfig().source.dash:void 0},e.prototype.getCurrentTime=function(){return null!=this.player?Math.round(1e3*this.player.getCurrentTime()):0},e.prototype.nt=function(){return null!=this.player&&null!=this.player.getVideoBufferLength&&this.player.getVideoBufferLength()>0?Math.max(0,Math.round(1e3*this.player.getVideoBufferLength())):0},e.prototype.ot=function(){if(this.player){var t=this.player.getFigure();return{width:t.offsetWidth,height:t.offsetHeight}}},e.prototype.isFullscreen=function(){return this.player.isFullscreen()},e.prototype.isLive=function(){return this.player.isLive()},e.prototype.st=function(){return!0},e.prototype.$=function(){if(this.player){var t=this.player.getStreamType();if("hls"===t)return StreamProtocol.Y;if("dash"===t)return StreamProtocol.rt}return null},e.prototype.at=function(){var t=this.O;return this.O=new o.P,t},e.prototype.T=function(){return this.pluginName},e.prototype.I=function(){return this.ct()},e.prototype.ht=function(){if(this.player)return this.player.getPlayerType()},e.prototype.q=function(){return"undefined"!=typeof bitmovin.player.version?bitmovin.player.version:this.player.getVersion()},e}(n.pt.Plugin);e.ut=h;var p=function(t,e){new h(t,e)};bitmovin.initHiveSDN=p},function(t,e,i){/*!
 *
 * Copyright 2009-2016 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
  !function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else{t.t=e()}}(function(){"use strict";function t(t){return function(){return z.apply(t,arguments)}}function e(t){return t===Object(t)}function i(t){return"[object StopIteration]"===it(t)||t instanceof q}function r(t,e){if(U&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(rt)===-1){for(var i=[],r=e;r;r=r.source)r.stack&&i.unshift(r.stack);i.unshift(t.stack);var o=i.join("\n"+rt+"\n");t.stack=n(o)}}function n(t){for(var e=t.split("\n"),i=[],r=0;r<e.length;++r){var n=e[r];a(n)||o(n)||!n||i.push(n)}return i.join("\n")}function o(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function s(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var i=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(i)return[i[1],Number(i[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function a(t){var e=s(t);if(!e)return!1;var i=e[0],r=e[1];return i===Q&&r>=J&&r<=ct}function c(){if(U)try{throw new Error}catch(t){var e=t.stack.split("\n"),i=e[0].indexOf("@")>0?e[1]:e[2],r=s(i);if(!r)return;return Q=r[0],r[1]}}function h(t,e,i){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+i+" instead.",new Error("").stack),t.apply(t,arguments)}}function p(t){return t instanceof f?t:m(t)?C(t):k(t)}function u(){function t(t){e=t,p.lt&&U&&(o.source=t),$(i,function(e,i){p.dt(function(){t.ft.apply(t,i)})},void 0),i=void 0,r=void 0}var e,i=[],r=[],n=Z(u.prototype),o=Z(f.prototype);if(o.ft=function(t,n,o){var s=W(arguments);i?(i.push(s),"when"===n&&o[1]&&r.push(o[1])):p.dt(function(){e.ft.apply(e,s)})},o.valueOf=function(){if(i)return o;var t=v(e);return y(t)&&(e=t),t},o.gt=function(){return e?e.gt():{state:"pending"}},p.lt&&U)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return n.vt=o,n.resolve=function(i){e||t(p(i))},n.yt=function(i){e||t(k(i))},n.reject=function(i){e||t(R(i))},n.notify=function(t){e||$(r,function(e,i){p.dt(function(){i(t)})},void 0)},n}function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=u();try{t(e.resolve,e.reject,e.notify)}catch(i){e.reject(i)}return e.vt}function d(t){return l(function(e,i){for(var r=0,n=t.length;r<n;r++)p(t[r]).then(e,i)})}function f(t,e,i){void 0===e&&(e=function(t){return R(new Error("Promise does not support operation: "+t))}),void 0===i&&(i=function(){return{state:"unknown"}});var r=Z(f.prototype);if(r.ft=function(i,n,o){var s;try{s=t[n]?t[n].apply(r,o):e.call(r,n,o)}catch(a){s=R(a)}i&&i(s)},r.gt=i,i){var n=i();"rejected"===n.state&&(r.exception=n.reason),r.valueOf=function(){var t=i();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function g(t,e,i,r){return p(t).then(e,i,r)}function v(t){if(y(t)){var e=t.gt();if("fulfilled"===e.state)return e.value}return t}function y(t){return t instanceof f}function m(t){return e(t)&&"function"==typeof t.then}function w(t){return y(t)&&"pending"===t.gt().state}function T(t){return!y(t)||"fulfilled"===t.gt().state}function S(t){return y(t)&&"rejected"===t.gt().state}function b(){nt.length=0,ot.length=0,at||(at=!0)}function E(t,e){at&&("object"==typeof process&&"function"==typeof process.emit&&p.dt.wt(function(){Y(ot,t)!==-1&&(process.emit("unhandledRejection",e,t),st.push(t))}),ot.push(t),e&&"undefined"!=typeof e.stack?nt.push(e.stack):nt.push("(no stack) "+e))}function I(t){if(at){var e=Y(ot,t);e!==-1&&("object"==typeof process&&"function"==typeof process.emit&&p.dt.wt(function(){var i=Y(st,t);i!==-1&&(process.emit("rejectionHandled",nt[e],t),st.splice(i,1))}),ot.splice(e,1),nt.splice(e,1))}}function R(t){var e=f({when:function(e){return e&&I(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return E(e,t),e}function k(t){return f({when:function(){return t},get:function(e){return t[e]},set:function(e,i){t[e]=i},"delete":function(e){delete t[e]},Tt:function(e,i){return null===e||void 0===e?t.apply(void 0,i):t[e].apply(t,i)},apply:function(e,i){return t.apply(e,i)},keys:function(){return et(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function C(t){var e=u();return p.dt(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(i){e.reject(i)}}),e.vt}function O(t){return f({St:function(){}},function(e,i){return F(t,e,i)},function(){return p(t).gt()})}function P(t,e,i){return p(t).bt(e,i)}function A(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=r[t](e)}catch(a){return R(a)}return s.done?p(s.value):g(s.value,n,o)}try{s=r[t](e)}catch(a){return i(a)?p(a.value):R(a)}return g(s,n,o)}var r=t.apply(this,arguments),n=e.bind(e,"next"),o=e.bind(e,"throw");return n()}}function N(t){p.done(p.async(t)())}function x(t){throw new q(t)}function B(t){return function(){return P([this,_(arguments)],function(e,i){return t.apply(e,i)})}}function F(t,e,i){return p(t).Et(e,i)}function _(t){return g(t,function(t){var e=0,i=u();return $(t,function(r,n,o){var s;y(n)&&"fulfilled"===(s=n.gt()).state?t[o]=s.value:(++e,g(n,function(r){t[o]=r,0===--e&&i.resolve(t)},i.reject,function(t){i.notify({index:o,value:t})}))},void 0),0===e&&i.resolve(t),i.vt})}function D(t){if(0===t.length)return p.resolve();var e=p.defer(),i=0;return $(t,function(r,n,o){function s(t){e.resolve(t)}function a(t){i--,0===i&&(t.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+t.message,e.reject(t))}function c(t){e.notify({index:o,value:t})}var h=t[o];i++,g(h,s,a,c)},void 0),e.vt}function H(t){return g(t,function(t){return t=X(t,p),g(_(X(t,function(t){return g(t,K,K)})),function(){return t})})}function L(t){return p(t).It()}function M(t,e){return p(t).then(void 0,void 0,e)}function j(t,e){return p(t).Rt(e)}var U=!1;try{throw new Error}catch(V){U=!!V.stack}var Q,q,J=c(),K=function(){},G=function(){function t(){for(var t,r;i.next;)i=i.next,t=i.kt,i.kt=void 0,r=i.domain,r&&(i.domain=void 0,r.enter()),e(t,r);for(;h.length;)t=h.pop(),e(t);n=!1}function e(e,i){try{e()}catch(r){if(s)throw i&&i.exit(),setTimeout(t,0),i&&i.enter(),r;setTimeout(function(){throw r},0)}i&&i.exit()}var i={kt:void 0,next:null},r=i,n=!1,o=void 0,s=!1,a=!1;try{a=navigator&&("Microsoft Internet Explorer"===navigator.appName||null!=navigator.appVersion.match(/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i))}catch(c){}var h=[];if(G=function(t){"undefined"!=typeof Framework&&Framework.Ct()?Framework.setTimeout(t,0):(r=r.next={kt:t,domain:s&&process.domain,next:null},n||(n=!0,o()))},"object"==typeof process&&"[object process]"===process.toString()&&process.dt)s=!0,o=function(){process.dt(t)};else if("function"!=typeof setImmediate||a)if("undefined"==typeof MessageChannel||a)o=function(){setTimeout(t,0)};else{var p=new MessageChannel;p.port1.onmessage=function(){o=u,p.port1.onmessage=t,t()};var u=function(){p.port2.postMessage(0)};o=function(){setTimeout(t,0),u()}}else o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};return G.wt=function(t){h.push(t),n||(n=!0,o())},G}(),z=Function.call,W=t(Array.prototype.slice),$=t(Array.prototype.reduce||function(t,e){var i=0,r=this.length;if(1===arguments.length)for(;;){if(i in this){e=this[i++];break}if(++i>=r)throw new TypeError}for(;i<r;i++)i in this&&(e=t(e,this[i],i));return e}),Y=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),X=t(Array.prototype.map||function(t,e){var i=this,r=[];return $(i,function(n,o,s){r.push(t.call(e,o,s,i))},void 0),r}),Z=Object.create||function(t){function e(){}return e.prototype=t,new e},tt=t(Object.prototype.hasOwnProperty),et=Object.keys||function(t){var e=[];for(var i in t)tt(t,i)&&e.push(i);return e},it=t(Object.prototype.toString);q="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var rt="From previous event:";p.resolve=p,p.dt=G,p.lt=!1,"object"==typeof process&&process&&process.Ot&&process.Ot.Q_DEBUG&&(p.lt=!0),p.defer=u,u.prototype.Pt=function(){var t=this;return function(e,i){e?t.reject(e):arguments.length>2?t.resolve(W(arguments,1)):t.resolve(i)}},p.Promise=l,p.vt=l,l.race=d,l.all=_,l.reject=R,l.resolve=p,p.At=function(t){return t},f.prototype.At=function(){return this},p.join=function(t,e){return p(t).join(e)},f.prototype.join=function(t){return p([this,t]).bt(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},p.race=d,f.prototype.race=function(){return this.then(p.race)},p.Nt=f,f.prototype.toString=function(){return"[object Promise]"},f.prototype.then=function(t,e,i){function n(e){try{return"function"==typeof t?t(e):e}catch(i){return R(i)}}function o(t){if("function"==typeof e){r(t,a);try{return e(t)}catch(i){return R(i)}}return R(t)}function s(t){return"function"==typeof i?i(t):t}var a=this,c=u(),h=!1;return p.dt(function(){a.ft(function(t){h||(h=!0,c.resolve(n(t)))},"when",[function(t){h||(h=!0,c.resolve(o(t)))}])}),a.ft(void 0,"when",[void 0,function(t){var e,i=!1;try{e=s(t)}catch(r){if(i=!0,!p.onerror)throw r;p.onerror(r)}i||c.notify(e)}]),c.vt},p.xt=function(t,e){return p(t).xt(e)},f.prototype.xt=function(t){return t=p(t),this.then(function(e){return t.Ft(e).Bt(e)})},p.when=g,f.prototype.Bt=function(t){return this.then(function(){return t})},p.Bt=function(t,e){return p(t).Bt(e)},f.prototype._t=function(t){return this.then(function(){throw t})},p._t=function(t,e){return p(t)._t(e)},p.Dt=v,p.Ht=y,p.Lt=m,p.Mt=w,f.prototype.Mt=function(){return"pending"===this.gt().state},p.jt=T,f.prototype.jt=function(){return"fulfilled"===this.gt().state},p.Ut=S,f.prototype.Ut=function(){return"rejected"===this.gt().state};var nt=[],ot=[],st=[],at=!0;p.Vt=b,p.Qt=function(){return nt.slice()},p.qt=function(){b(),at=!1},b(),p.reject=R,p.yt=k,p.Jt=O,p.bt=P,f.prototype.bt=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},p.async=A,p.Kt=N,p["Gt"]=x,p.zt=B,p.Et=F,f.prototype.Et=function(t,e){var i=this,r=u();return p.dt(function(){i.ft(r.resolve,t,e)}),r.vt},p.get=function(t,e){return p(t).Et("get",[e])},f.prototype.get=function(t){return this.Et("get",[t])},p.set=function(t,e,i){return p(t).Et("set",[e,i])},f.prototype.set=function(t,e){return this.Et("set",[t,e])},p.Wt=p["delete"]=function(t,e){return p(t).Et("delete",[e])},f.prototype.Wt=f.prototype["delete"]=function(t){return this.Et("delete",[t])},p.$t=p.Tt=function(t,e,i){return p(t).Et("post",[e,i])},f.prototype.$t=f.prototype.Tt=function(t,e){return this.Et("post",[t,e])},p.send=p.Yt=p.Xt=function(t,e){return p(t).Et("post",[e,W(arguments,2)])},f.prototype.send=f.prototype.Yt=f.prototype.Xt=function(t){return this.Et("post",[t,W(arguments,1)])},p.Zt=function(t,e){return p(t).Et("apply",[void 0,e])},f.prototype.Zt=function(t){return this.Et("apply",[void 0,t])},p["te"]=p.Ft=function(t){return p(t).Et("apply",[void 0,W(arguments,1)])},f.prototype.Ft=function(){return this.Et("apply",[void 0,W(arguments)])},p.ee=function(t){var e=p(t),i=W(arguments,1);return function(){return e.Et("apply",[this,i.concat(W(arguments))])}},f.prototype.ee=function(){var t=this,e=W(arguments);return function(){return t.Et("apply",[this,e.concat(W(arguments))])}},p.keys=function(t){return p(t).Et("keys",[])},f.prototype.keys=function(){return this.Et("keys",[])},p.all=_,f.prototype.all=function(){return _(this)},p.ie=D,f.prototype.ie=function(){return D(this)},p.re=h(H,"allResolved","allSettled"),f.prototype.re=function(){return H(this)},p.It=L,f.prototype.It=function(){return this.then(function(t){return _(X(t,function(t){function e(){return t.gt()}return t=p(t),t.then(e,e)}))})},p.fail=p["catch"]=function(t,e){return p(t).then(void 0,e)},f.prototype.fail=f.prototype["catch"]=function(t){return this.then(void 0,t)},p.progress=M,f.prototype.progress=function(t){return this.then(void 0,void 0,t)},p.ne=p["finally"]=function(t,e){return p(t)["finally"](e)},f.prototype.ne=f.prototype["finally"]=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=p(t),this.then(function(e){return t.Ft().then(function(){return e})},function(e){return t.Ft().then(function(){throw e})})},p.done=function(t,e,i,r){return p(t).done(e,i,r)},f.prototype.done=function(t,e,i){var n=function(t){p.dt(function(){if(r(t,o),!p.onerror)throw t;p.onerror(t)})},o=t||e||i?this.then(t,e,i):this;"object"==typeof process&&process&&process.domain&&(n=process.domain.bind(n)),o.then(void 0,n)},p.timeout=function(t,e,i){return p(t).timeout(e,i)},f.prototype.timeout=function(t,e){var i=u(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),i.reject(e)},t);return this.then(function(t){clearTimeout(r),i.resolve(t)},function(t){clearTimeout(r),i.reject(t)},i.notify),i.vt},p.delay=function(t,e){return void 0===e&&(e=t,t=void 0),p(t).delay(e)},f.prototype.delay=function(t){return this.then(function(e){var i=u();return setTimeout(function(){i.resolve(e)},t),i.vt})},p.oe=function(t,e){return p(t).oe(e)},f.prototype.oe=function(t){var e=u(),i=W(t);return i.push(e.Pt()),this.Zt(i).fail(e.reject),e.vt},p.se=function(t){var e=W(arguments,1);return p(t).oe(e)},f.prototype.se=function(){var t=W(arguments),e=u();return t.push(e.Pt()),this.Zt(t).fail(e.reject),e.vt},p.ae=p.ce=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=W(arguments,1);return function(){var i=e.concat(W(arguments)),r=u();return i.push(r.Pt()),p(t).Zt(i).fail(r.reject),r.vt}},f.prototype.ae=f.prototype.ce=function(){var t=W(arguments);return t.unshift(this),p.ce.apply(void 0,t)},p.he=function(t,e){var i=W(arguments,2);return function(){function r(){return t.apply(e,arguments)}var n=i.concat(W(arguments)),o=u();return n.push(o.Pt()),p(r).Zt(n).fail(o.reject),o.vt}},f.prototype.he=function(){var t=W(arguments,0);return t.unshift(this),p.he.apply(void 0,t)},p.pe=p.ue=function(t,e,i){return p(t).ue(e,i)},f.prototype.pe=f.prototype.ue=function(t,e){var i=W(e||[]),r=u();return i.push(r.Pt()),this.Et("post",[t,i]).fail(r.reject),r.vt},p.le=p.de=p.fe=function(t,e){var i=W(arguments,2),r=u();return i.push(r.Pt()),p(t).Et("post",[e,i]).fail(r.reject),r.vt},f.prototype.le=f.prototype.de=f.prototype.fe=function(t){var e=W(arguments,1),i=u();return e.push(i.Pt()),this.Et("post",[t,e]).fail(i.reject),i.vt},p.Rt=j,f.prototype.Rt=function(t){return t?void this.then(function(e){p.dt(function(){t(null,e)})},function(e){p.dt(function(){t(e)})}):this},p.ge=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ct=c();return p})},function(t,e,i){"use strict";var r,n=i(15),o=i(4),s=o.ve;!function(t){function e(e){B&&console.log("Framework already initialized"),t.ye(),N=new Date,e.apply(D),B=D.resolve(k.me),_=D.resolve(k.we),L=B.Ct()}function i(){F=D.resolve(k.Te),F.init()}function r(){return F}function o(){return D}function a(){return _}function c(){return B}function h(t){return H.get(t)}function p(t,e){var i=new C(t);return i.apply(e),H.set(t,i),i}function u(e){A=t.Se(e)}function l(t){return null!=A?A.context.resolve(t):(console.warn("undefined context"),null)}function d(){return A}function f(){return B.time()}function g(t,e){return B.setTimeout(t,e)}function v(t){return B.clearTimeout(t)}function y(t,e){return B.setInterval(t,e)}function m(t){return B.clearInterval(t)}function w(){B.be()}function T(){D.Ee(),D=new n.Ie,H=new s,A=null,N=null,L=!1,x=null,B=null,F=null,_=null}function S(t){x=t}function b(){return x||(x=(new Date).getTime()),x=(9301*x+49297)%233280,x/233280}function E(){return N}function I(){return L}var R=function(){function t(){}return t}();R.Re="ws://127.0.0.1:8000/hive",t.ke=R;var k=function(){function t(){}return t}();k.me="TimerScheduler",k.Ce="identityProvider",k.Te="NetworkComponent",k.Oe="rtcManager",k.Pe="transport",k.Ae="httpManager",k.Ne="httpRequest",k.we="logger",k.xe="serverManager",k.Be="servicesClient",t.Fe=k;var C=function(){function t(t){this.id=t,this.context=new n.Ie}return t.prototype.apply=function(t){t.apply(this.context)},t}();t._e=C;var O;!function(t){t[t.De=0]="HTTP",t[t.He=1]="RTC",t[t.Le=2]="UDP"}(O=t.Me||(t.Me={}));var P;!function(e){function i(){return"["+f()+"] ["+t.je().id+"]"}e.Ue=i}(P=t.Ve||(t.Ve={}));var A,N,x,B,F,_,D=new n.Ie,H=new s,L=!1;t.Qe=e,t.qe=i,t.Je=r,t.system=o,t.m=a,t.Ke=c,t.Se=h,t.Ge=p,t.ze=u,t.resolve=l,t.je=d,t.time=f,t.setTimeout=g,t.clearTimeout=v,t.setInterval=y,t.clearInterval=m,t.be=w,t.ye=T,t.We=S,t.random=b,t.$e=E,t.Ct=I}(r=e.Framework||(e.Framework={})),"undefined"!=typeof global&&(global.Framework=r)},function(t,e){"use strict";var i=!0,r={Ye:function(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(i=t,t?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},Xe:function(t,e,i){var r=t.match(e);return r&&r.length>=i&&parseInt(r[i],10)},Ze:function(){var t={};if(t.ti=null,t.version=null,"undefined"==typeof window||!window.navigator)return t.ti="Not a browser.",t;if(navigator.mozGetUserMedia)t.ti="firefox",t.version=this.Xe(navigator.userAgent,/Firefox\/(\d+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)t.ti="chrome",t.version=this.Xe(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return t.ti="Unsupported webkit-based browser with GUM support but no WebRTC support.",t;t.ti="safari",t.version=this.Xe(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))t.ti="edge",t.version=this.Xe(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!navigator.mediaDevices||!navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return t.ti="Not a supported browser.",t;t.ti="safari",t.version=this.Xe(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}return t},ei:function(){if("object"==typeof window&&window.HTMLMediaElement&&"srcObject"in window.HTMLMediaElement.prototype){var t=URL.createObjectURL.bind(URL),e=URL.revokeObjectURL.bind(URL),i=new Map,r=0;URL.createObjectURL=function(e){if("getTracks"in e){var n="polyblob:"+ ++r;return i.set(n,e),console.log("URL.createObjectURL(stream) is deprecated! Use elem.srcObject = stream instead!"),n}return t(e)},URL.revokeObjectURL=function(t){e(t),i["delete"](t)};var n=Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,"src");Object.defineProperty(window.HTMLMediaElement.prototype,"src",{get:function(){return n.get.apply(this)},set:function(t){return this.ii=i.get(t)||null,n.set.apply(this,[t])}});var o=HTMLMediaElement.prototype.setAttribute;HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.ii=i.get(arguments[1])||null),o.apply(this,arguments)}}}};t.t={log:r.log,Ye:r.Ye,ri:r.Ze(),Xe:r.Xe,ei:r.ei,Ze:r.Ze.bind(r)}},function(t,e,i){var r=i(32);t.t={ve:r.Map,ni:r.ni,oi:r.oi}},function(t,e){"use strict";var i;!function(t){t.si="statsClient",t.Be="servicesClient",t.ai="ticketResolver",t.Ce="identityProvider",t.ci="connInfoProvider",t.hi="peerInfo",t.pi="streamInfoProvider",t.ui="reporting",t.li="statsStore",t.di="trackManager",t.fi="trackClient"}(i=e.gi||(e.gi={}))},function(t,e){t.t=function(){return new Function}},function(t,e,i){"use strict";function r(t,e){function i(){return t()?void v.when(e(),i,r.reject):r.resolve(!0)}var r=v.defer();return v.dt(i),r.vt}function n(t,e,i){return void 0===i&&(i=!0),o("GET",t,e,i)}function o(t,e,i,r){void 0===r&&(r=!0);var n=v.defer();try{var o=new XMLHttpRequest;o.open(t,e,r),void 0!=i&&null!=i&&o.setRequestHeader("Content-Type",i),o.onload=function(){200==o.status?n.resolve(o.response):n.reject({status:o.status,reason:o.statusText,body:o.responseText})},o.onerror=function(t){n.reject({status:-1,reason:"Network Error"})},o.send()}catch(s){n.reject({status:-1,reason:s})}return n.vt}function s(t,e,i,r){void 0===r&&(r=!0);var n=v.defer();try{var o=new XMLHttpRequest;o.open("POST",t,r),void 0!=i&&null!=i&&o.setRequestHeader("Content-Type",i),o.onload=function(){200==o.status?n.resolve(o.response):n.reject({status:o.status,reason:o.statusText})},o.onerror=function(t){n.reject({status:-1,reason:"Network Error"})},o.send(e)}catch(s){n.reject({status:-1,reason:s})}return n.vt}function a(t,e){var i,r,n=document.querySelector("base"),o=document.querySelector("head"),s=document.createElement("a"),a=n;return n?i=n.href:a=o.appendChild(document.createElement("base")),a.href=t,s.href=e,r=s.href,n?n.href=i:o.removeChild(a),r}function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t[0],r=1;r<t.length;r++){var n=new RegExp("\\{"+(r-1)+"\\}","gm");i=i.replace(n,t[r])}return i}function h(t,e){for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(e[i]=t[i])}function p(t,e,i){var r=g(t).vi(!0);for(var n in r)try{if(r.hasOwnProperty(n)&&e.hasOwnProperty(n)&&i.hasOwnProperty(e[n])){var o=e[n],s=r[n];i[o]=u(s,i[o])}}catch(a){}}function u(t,e){var i;switch(typeof e){case"number":i=parseInt(t);break;case"boolean":i="true"===t;break;default:i=t}return i}function l(t,e,i){var r=new m;return r.ticketUrl=t,r.code=e,r.message=w(e),r.detailedMessage=i,r}var d=i(4),f=d.ve,g=i(21),v=i(1),y=i(17),m=y.pt.HiveSessionError,w=y.pt.getHiveSessionErrorMessage,T=y.pt.HiveSession,S=i(26),b=i(46),E=function(){function t(e){if(!e){if(0==Object.keys(t.mapping).length&&!t.yi)return console.error("no registered default HiveRequestFactory tech"),t.yi=!0,t.mi();e=Object.keys(t.mapping)[0]}if(!(e in t.mapping))return t.yi||(console.error("no registered HiveRequestFactory tech for  "+e),t.yi=!0),t.mi();var i=t.mapping[e];switch(i.tech){case"HiveJS":return t.mi();case"HiveJsProxy":return i.wi?new S.Ti(e):(i.wi=!0,new b.Si(e));case"HiveJava":case"StatsJS":return t.mi()}}return t.mi=function(){return"undefined"!=typeof OriginalXMLHttpRequest?new OriginalXMLHttpRequest:new XMLHttpRequest},t.clear=function(){t.mapping={}},t.bi=function(e,i){e in t.mapping||(t.mapping[e]={}),t.mapping[e].tech=i},t}();E.mapping={},E.yi=!1,e.HiveRequestFactory=E;var I=function(){function t(t,e,i,r){this.Ei=!1,this.ticketUrl=t,this.ticket=e,this.manifest=i,this.Ii=v.defer(),this.Ri=r,this.Ri&&this.Ii.resolve(this.Ri)}return t.prototype.st=function(t){return null!==this.tech&&this.tech.st(t,this)},t.prototype.ki=function(t){this.Ei!=t&&(this.Ei=t,this.tech&&this.tech.Ci(this,t))},t.prototype.Oi=function(){return this.Ei},t.prototype.close=function(t){if(null!=this.tech)return this.tech.Pi(this,t)},t.prototype.toString=function(){return this.ticket.toString()},t.prototype.g=function(){var t=new T;return t.id=this.id,t.ticketUrl=this.ticketUrl,t.manifest=this.manifest,t.tech=this.tech.Ai(),t},t.prototype.Ni=function(){return this.Ii.vt},t.prototype.xi=function(t){this.Ri=t,this.Ii.resolve(this.Ri)},t}();e.Bi=I;var R=function(){function t(){}return t}();e.Fi=R;var k=function(){function t(){this.success=0,this._i=0,this.Di=0}return t}();e.Hi=k;var C=function(){function t(){this.Li=0,this.Mi=0,this.ji=new f,this.Ui=new f}return t.prototype.M=function(t,e,i,r){void 0===r&&(r=!0);var n=t?this.ji:this.Ui;n.has(e)||n.set(e,new k);var o=n.get(e);o.Di+=i,r&&o.success++},t.prototype.V=function(t,e){var i=t?this.ji:this.Ui;i.has(e)||i.set(e,new k),i.get(e)._i++},t.prototype.U=function(t){this.bandwidth=t},t.prototype.Z=function(){this.Li++},t.prototype.tt=function(){this.Mi++},t.prototype.Vi=function(){return this.bandwidth},t.prototype.Qi=function(){return this.ji},t.prototype.qi=function(){return this.Ui},t.prototype.Ji=function(){return this.Li},t.prototype.Ki=function(){return this.Mi},t}();e.P=C;var O=function(){function t(){var e=this;if(t.Gi)throw new Error("Error: Instantiation failed: Use VisibilityChangeListener.getInstance() instead of new.");var i,r;"undefined"!=typeof document.hidden?(i="hidden",r="visibilitychange"):"undefined"!=typeof document.msHidden?(i="msHidden",r="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",r="webkitvisibilitychange"),"undefined"!=typeof document.addEventListener&&"undefined"!=typeof document[i]?document.addEventListener(r,function(){var t=!document[i];e.zi.forEach(function(i){i.call(e,t)})},!1):t.m&&t.m.debug("warn - visibilityChange listener not supported"),this.zi=new Array}return t.Wi=function(e){return e&&(this.m=e),void 0===this.Gi&&(this.Gi=new t),this.Gi},t.prototype.$i=function(t){this.zi.push(t)},t}();e.Yi=O,e.Xi=r,e.Zi=n,e.tr=o,e.er=s,e.ir=a,e.rr=c,e.nr=h,e.or=p,e.sr=l;var P=function(){function t(){}return t.getItem=function(t){try{return window.sessionStorage?window.sessionStorage.getItem(t):null}catch(e){return null}},t.setItem=function(t,e){try{return!!window.sessionStorage&&(window.sessionStorage.setItem(t,e),!0)}catch(i){return!1}},t.removeItem=function(t){try{window.sessionStorage&&window.sessionStorage.removeItem(t)}catch(e){return null}},t}();e.ar=P;var A=function(){function t(t){this.cr=t}return t.prototype.hr=function(t){var e=Date.now();return this.isEqual(this.pr,t)||(this.ur=e),this.pr=t,e-this.ur>=this.cr},t.prototype.isEqual=function(t,e){if(t&&e){var i=[e.lr-t.lr,e.dr-t.dr,e.gr-t.gr];return i.reduce(function(t,e){return t&&Math.abs(e)<10},!0)}return!1},t}();e.vr=A},function(t,e,i){"use strict";var r,n=i(11),o=i(18),s=i(12);!function(t){var e;!function(t){var e=function(){function t(){this.monitorPort=o.ke.yr?s.wr.mr:s.wr.Tr,this.playerPort=o.ke.yr?s.wr.Sr:s.wr.br,this.feedbackPeriod=2e3,this.idleTimePeriod=6e4,this.useSessionCheck=o.ke.Er,this.debugLevel="notice",this.hiveTechOrder=[],this.telemetryId=null,this.silent=!1,this.loggerTimestamp=n.HiveConfig.Framework.LoggerTimestamp,this.onSourceSetCompleted=function(t){},this.onLoadingCompleted=function(t){}}return t}();t.Ir=e;var i=function(){function t(){this.initTimeout=3e4,this.onError=function(t){return!0},this.onActiveSession=function(t){}}return t}();t.Rr=i;var r=function(){function t(){this.hivePlayerPort="playerPort",this.hiveMonitorPort="monitorPort",this.hiveSilent="silent",this.hiveDebugLevel="debugLevel",this.hiveDebugTimestamp="loggerTimestamp",this.hiveSetupTimeout="setupTimeout",this.hiveJavaTimeout="initTimeout",this.hiveWarnJavaTimeout="warnSlowRespTimeout"}return t}();t.kr=r}(e=t.Ir||(t.Ir={}))}(r=e.pt||(e.pt={}));var a;!function(t){var e=function(){function t(){}return t}();e.enabledRUM=!1,e.enableKeyCombination=!0,e.enabledErrorFilter=!0,t.ErrorMonitor=e}(a=e.HiveConfig||(e.HiveConfig={})),"undefined"!=typeof window&&("undefined"==typeof window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.ErrorMonitor=a.ErrorMonitor)},function(t,e,i){"use strict";var r,n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(28).Cr,s=i(1),a=i(2),c=i(5),h=i(13),p=i(10),u=i(23);!function(t){var e="[TRACK] ";t.Or="hive-client-track",t.Pr="trackevent",t.Ar="NULLID",t.Nr="";var i=function(){function t(){}return t}();i.xr=0,i.Br=1,i.Fr=2,i._r=100,i.Dr=200,t.Hr=i;var r;!function(t){t[t.N=0]="PLAYING",t[t.Lr=1]="BUFFERING",t[t.W=2]="PAUSED",t[t.H=3]="SKIP",t[t.D=4]="STOPPED",t[t.ERROR=5]="ERROR",t[t.Mr=6]="WINDOW_SIZE",t[t.L=7]="FULLSCREEN",t[t.jr=8]="VISIBLE",t[t.HIDDEN=9]="HIDDEN"}(r=t.B||(t.B={}));var l;!function(t){t[t.Ur=0]="JAVA_NOT_REACHABLE",t[t.Vr=1]="JAVA_NOT_READY",t[t.Qr=2]="JAVA_WRONG_VERSION",t[t.qr=3]="JAVA_SESSION_BUSY",t[t.Jr=4]="JAVA_SESSION_ERROR",t[t.Kr=5]="JAVA_TICKET_TIMEOUT"}(l=t.Gr||(t.Gr={}));var d=function(){function t(){}return t}();t.zr=d;var f=function(){function t(){}return t}();t.Wr=f;var g=function(){function t(){}return t}();t.$r=g;var v=function(){function t(){this.type=i.Fr}return t}(),y=function(){function t(){this.sessions=new Array}return t.prototype.Yr=function(t,e){var i;this.sessions.forEach(function(e){e.sessionId==t&&(i=e)}),i||(i=new m,i.sessionId=t,this.sessions.push(i)),i.events.push(e)},t}();t.Xr=y;var m=function(){function t(){this.events=new Array}return t}();t.Zr=m;var w=function(){function i(){this.m=a.Framework.resolve(a.Framework.Fe.we).log(),this.tn=a.Framework.resolve(c.gi.ci),this.en=new Array,this.in=new Array,this.rn=new Array}return i.prototype.nn=function(t){this.client=t},i.prototype.init=function(t,i){this.sn=t,this.an(i),this.m.debug(e+"INIT ID: "+t)},i.prototype.an=function(t,e){this.app=t,e&&(this.cn=e)},i.prototype.hn=function(t){this.pn=t},i.prototype.un=function(t){var e=new S(t,this);this.en.push(e),this.ln=null,this.client.dn(!0)},i.prototype.wi=function(t,i,r){if(!this.ln)for(var n=0;n<this.en.length;n++){var o=this.en[n];if(o.ticket.sessionId===t){this.m.debug(e+"Activating Track for session "+t),this.ln=o;break}}if(this.ln){if(this.ln.ticket.sessionId!=t)return void this.m.warn(e+"ignoring manifest not matching event "+this.ln.ticket.sessionId+" != "+t);if(!this.ln.fn){var s=new b(t,i,r);this.ln.gn(s),this.client.dn()}}},i.prototype.vn=function(t,e,i){null!=this.ln&&(this.ln.fn||this.ln.yn.push(new k(t,e,i)))},i.prototype.mn=function(t,e,i){this.in.push(new I(t,e,i)),this.client.dn()},i.prototype.wn=function(t,e,i){this.rn.push(new R(t,e,i)),this.client.dn()},i.prototype.Tn=function(t){var e=this;t&&t.forEach(function(t){e.rn.push(t)})},i.prototype.Sn=function(){var t=new f;this.cn?(t.partnerId=this.cn.partnerId,t.customerId=this.cn.customerId):this.ln&&(t.partnerId=this.ln.ticket.bn(),t.customerId=this.ln.ticket.En()),t.version=this.app.app+"_"+(this.cn?this.cn.version:this.app.version),this.cn&&(t.installVersion=this.cn.installVersion,t.installTs=this.cn.installTs);var e=new o;return e.In(navigator.userAgent),t.os=e.Rn().name+" "+e.Rn().version,this.pn&&(t.commVersion=this.pn.commVersion,t.pluginName=this.pn.pluginName,t.pluginVersion=this.pn.pluginVersion,t.playerTech=this.pn.playerTech,t.playerVersion=this.pn.playerVersion,this.pn.telemetryId&&(t.telemetryId=this.pn.telemetryId)),t},i.prototype.kn=function(){return this.ln?this.ln:this.en&&this.en.length>0?this.en[this.en.length-1]:void 0},i.prototype.Cn=function(){var e=this,i=s.defer();0==this.en.length&&0==this.in.length&&i.reject("nothing to send");var r=new d;r.app=t.Or,r.createdAt=a.Framework.time(),r.guid=this.sn,r.name=t.Pr;var n=this.kn();if(n){var o=n.ticket.On().replace(/[\[\]]/g,"");r.tags=[o],r.tags.push(n.ticket.bn()),r.tags.push(n.ticket.En())}else r.tags=new Array;var c=new y;return c.peer=this.Sn(),this.en.forEach(function(t){t.fn||c.Yr(t.ticket.sessionId,t)}),this.in.forEach(function(t){c.Yr(t.sessionId,t)}),this.rn.forEach(function(t){c.Yr(t.sessionId,t)}),r.data=c,this.tn.Pn().then(function(t){var i=e.An(t);c.Yr("null",i)}).fail(function(t){})["finally"](function(){return i.resolve(r)}).done(),i.vt},i.prototype.An=function(t){var e=new v;e.ts=a.Framework.time();var i=t.Nn();return i.xn()&&(e.pubIp=i.xn()),i.Bn()&&(e.privIp=i.Bn()),t.Fn()&&(e.hostname=t.Fn()),i._n()&&(e.netmask=i._n()),i.Dn()&&(e.nic=i.Dn()),i.Hn()&&(e.nicName=i.Hn()),i.Ln()&&(e.mac=i.Ln()),e},i.prototype.Mn=function(){return this.cn?this.cn.userAgent:navigator.userAgent},i.prototype.reset=function(){this.en=new Array,this.in=new Array,this.rn=new Array},i.prototype.jn=function(t){},i}();t.Un=w;var T=function(){function t(t){this.Vn=isNaN(u.HiveConfig.DebugLogs.TrackSnapshotLogs)?0:u.HiveConfig.DebugLogs.TrackSnapshotLogs,this.Qn=t,this.m=a.Framework.resolve(a.Framework.Fe.we).log(),this.client=a.Framework.resolve(c.gi.Be),this.Qn.nn(this)}return t.prototype.dn=function(t){void 0===t&&(t=!1);var e=t?h.Kn.Jn.qn:h.Kn.Jn.Gn;if(this.zn){var i=this.Wn-(new Date).getTime();i>e&&(a.Framework.clearTimeout(this.zn),this.Wn=null,this.$n(e))}else this.$n(e)},t.prototype.$n=function(t){var e=this;this.zn=a.Framework.setTimeout(function(){e.Yn()},t),this.Wn=(new Date).getTime()+t},t.prototype.Yn=function(){var t=this;this.zn=null,this.Wn=null,this.m.debug(e+"TAKING A TRACK SNAPSHOT"),
  this.Qn.Cn().then(function(e){return t.forward(e)})["finally"](function(){return t.Qn.reset()})},t.prototype.forward=function(t){if(this.client&&this.client.Xn()){var i=JSON.stringify(t);switch(this.Vn){case 0:default:this.m.debug(e+"TRACK EVENT");break;case 1:this.m.debug(e+"TRACK EVENT:"+i)}var r=new p.Zn(Services.to,2,i);this.client.Xn().send(r)}},t}();t.eo=T;var S=function(){function t(t,e){this.createdAt=(new Date).getTime(),this.fn=!1,this.ticket=t,this.manifests=new Array,this.yn=new Array,this.Qn=e}return t.prototype.gn=function(t){this.manifests.push(t)},t.prototype.toJSON=function(){var t={};t.type=i.xr,t.ticket={},t.ticket.url=this.ticket.ticketUrl,t.ticket.reqTs=this.ticket.io,t.ticket.respTs=this.ticket.ro,t.ticket.userAgent=this.Qn.Mn(),t.manifests=[],this.manifests.forEach(function(e){var i={};i.url=e.url,i.respTs=e.ro,i.respCode=e.respCode,t.manifests.push(i)});var e=-1,r=-1,n=-1;return this.yn.forEach(function(t){t.no>0&&(e==-1&&(e=t.ts,r=t.no),n=t.no)}),e!=-1&&(t.playTs=e),n!=-1&&(t.buffTime=n),r!=-1&&(t.initBuffTime=r),t},t}();t.oo=S;var b=function(){function t(t,e,i){this.eventId=t,this.url=e,this.ro=(new Date).getTime(),this.respCode=i}return t}();t.so=b;var E=function(){function t(t,e,i,r){this.ts=(new Date).getTime(),this.sessionId=t,this.sessionId||(this.sessionId="null"),this.event=e,this.ao=i,r&&(this.ts=r)}return t.prototype.toJSON=function(){var t={};return t.type=this.co+this.event,t.ts=this.ts,this.ao&&(t.parameters=this.ao),t},t}();t.ho=E;var I=function(t){function e(e,r,n,o){var s=t.call(this,e,r,n,o)||this;return s.co=i._r,s}return n(e,t),e}(E);t.po=I;var R=function(t){function e(e,r,n,o){var s=t.call(this,e,r,n,o)||this;return s.co=i.Dr,s}return n(e,t),e}(E);t.uo=R;var k=function(){function t(t,e,i){this.ts=(new Date).getTime(),this.lr=t,this.lo=e,this.no=i}return t}();t.do=k}(r=e.F||(e.F={}))},function(t,e){"use strict";function i(){if(this.fo)return this.fo;var t=window&&window.window?window.window.vo:void 0;if("undefined"!=typeof t&&t.log&&t.debug&&t.info&&t.warn&&t.error&&(this.fo=t),!this.fo){var e=!("undefined"==typeof window.console),i=e?console.log.bind(console):function(){};this.fo={log:i,debug:e&&window.console.debug?window.console.debug.bind(console):i,info:e&&window.console.info?window.console.info.bind(console):i,warn:e&&window.console.warn?window.console.warn.bind(console):i,error:e&&window.console.error?window.console.error.bind(console):i}}return this.fo}e.u="[HiveServices] ";var r=function(){function t(){}return t}();r.yo=250,e.ke=r;var n=function(){function t(t,e,i){this.msgId=e,this.service=t,this.msg=i}return t.prototype.mo=function(){var t=new Uint8Array([this.service>>8,255&this.service]),e=new Uint8Array([this.msgId]),i=[t,e,this.msg];return new Blob(i,{type:"application/octet-binary"})},t.wo=function(e){var i=(String.fromCharCode.apply(null,new Uint8Array(e)),String.fromCharCode.apply(null,new Uint8Array(e.slice(3)))),r=new Uint8Array(e.slice(0,2)),n=new Uint8Array(e.slice(2,3)),o=(r[0]<<8)+r[1];return new t(o,n[0],i)},t}();e.Zn=n,e.m=i},function(t,e){"use strict";var i;!function(t){var e=function(){function t(){}return t}();e.LoggerTimestamp=!0,t.Framework=e;var i=function(){function t(){}return t}();i.MetricSnapshotLogs=0,i.TrackSnapshotLogs=0,t.DebugLogs=i}(i=e.HiveConfig||(e.HiveConfig={})),"undefined"!=typeof window&&("undefined"==typeof window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Framework=i.Framework,window.HiveConfig.DebugLogs=i.DebugLogs)},function(t,e){"use strict";var i=function(){function t(){}return t}();i.To="127.0.0.1",i.br=8999,i.Sr=8998,i.Tr=8899,i.mr=8898,i.So="//{0}:{1}/?callback={2}{3}hivePluginId={4}",i.bo="//{0}:{1}/?callback={2}",i.Er=!0,i.Eo=/((http|https):\/\/(.*):([0-9]*)\/([0-9a-z-]*).ism\/)(.*)/,i.Io="2013.1.1",e.wr=i},function(t,e,i){"use strict";var r;!function(t){t.Ro=!0;var e=function(){function t(){}return t}();e.ko="wss://bee.hivestreaming.com:443/v1/hivejs",e.Co="wss://bee-test.hivestreaming.com:443/v1/hivejs",e.Oo={iceServers:[{url:"stun:stun.hivestreaming.com:3678"}]},e.Po=3e4,e.Gn=3e5,e.qn=8e4,e.Ao=3e4,e.No=100,e.xo=1e4,t.Jn=e}(r=e.Kn||(e.Kn={}))},function(t,e,i){"use strict";var r,n=i(4),o=n.ve,s=i(1),a=i(2),c=i(9),h=i(5),p=i(27);!function(t){t[t.IDLE=0]="IDLE",t[t.Bo=1]="PLAY"}(r=e.Fo||(e.Fo={}));var u=function(){function t(t,e,i,r){this.ticket=t,this._o=e,this.app=i,this.identity=r,this.Do=a.Framework.resolve(h.gi.li),this.Ho=a.Framework.resolve(h.gi.si),this.Qn=a.Framework.resolve(h.gi.di),this.Lo=new c.F.eo(this.Qn)}return t.prototype.an=function(t,e,i){this.app=new l(t,e),this.Do.an(this.app),this.Qn.an(this.app,i)},t.prototype.Ci=function(t){this.Ho.Ci(t)},t}();e.Mo=u;var l=function(){function t(t,e){this.app=t,this.version=e}return t}();e.jo=l;var d=function(){function t(){this.Uo=null,this.Vo=null,this.Qo=new o,this.m=a.Framework.resolve(a.Framework.Fe.we).log(),this.m.debug("INIT REPORTING"),this._o=a.Framework.resolve(h.gi.Be),this.qo=a.Framework.resolve(h.gi.Ce),this.Jo=a.Framework.resolve(h.gi.ai)}return t.prototype.initSession=function(t,e){var i=this,r=s.defer(),n=this.qo.Ko(),o=this.Jo.Go(t);return null!=o?n.then(function(t){return i.zo(t,o,r,e)}).fail(r.reject):r.reject("Ticket URL not valid"),r.vt},t.prototype.close=function(){this._o.close()},t.prototype.zo=function(t,e,i,r){var n=this;this.Uo=t.Wo(),this.Vo=t.$o();var o=this._o.init(this.Uo,e),s=this.Jo.resolve(o.Yo,e,r);o.vt.then(function(e){s.then(function(e){var r=e.sessionId;if(n.Qo.has(r)){var o=n.Qo.get(r);n.m.warn("SESSION ALREADY EXISTING "+o.Do.ticket)}else{var s=new l(p.Hive.Xo(),p.Hive.getVersion()),a=new u(e,n._o,s,t);a.Do.init(n.Vo,e,s,r),a.Qn.init(n.Vo,s),a.Qn.un(e),n.Qo.set(r,a),n.m.debug("SESSION SET ",r),i.resolve(a)}}).fail(function(t){return i.reject(t?t:"Error resolving the ticket")}),e.onerror(function(t){i.reject("Error establishing connection to Hive Services")})}).fail(function(t){return i.reject(t)}),this._o.connect()},t.prototype.Zo=function(t,e){return t.es()===e.es()&&t.En()===e.En()&&t.bn()===e.bn()},t}();e.rs=d},function(t,e,i){var r,r;!function(e){t.t=e()}(function(){return function t(e,i,n){function o(a,c){if(!i[a]){if(!e[a]){var h="function"==typeof r&&r;if(!c&&h)return r(a,!0);if(s)return s(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var u=i[a]={t:{}};e[a][0].call(u.t,function(t){var i=e[a][1][t];return o(i?i:t)},u,u.t,t,e,i,n)}return i[a].t}for(var s="function"==typeof r&&r,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){var r=t("./kernel");i.Ie=r.Ie;var n=t("./type_binding");i.ns=n.ns;var o=t("./type_binding_scope");i.ss=o.ss},{"./kernel":2,"./type_binding":4,"./type_binding_scope":5}],2:[function(t,e,i){var r=t("./type_binding_scope"),n=t("./lookup"),o=function(){function t(){this.as=new n.cs}return t.prototype.bind=function(t){this.as.add(t.hs,t)},t.prototype.ps=function(t){try{this.as.remove(t)}catch(e){throw new Error("Could not resolve service "+t)}},t.prototype.Ee=function(){this.as=new n.cs},t.prototype.resolve=function(t){var e;if(!this.as.us(t))return null;e=this.as.get(t);var i=e[0];if(i.scope===r.ss.ls&&null!==i.ds)return i.ds;var n=this.fs(i.gs);return i.ds=n,n},t.prototype.vs=function(t){var e,i,r,n,o,s;return o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,s=/([^\s,]+)/g,e=t.toString().replace(o,""),i=e.indexOf("(")+1,r=e.indexOf(")"),n="function"==typeof Map&&-1!==e.indexOf("class")&&-1===e.indexOf("constructor")?null:e.slice(i,r).match(s),null===n&&(n=[]),n},t.prototype.fs=function(t){var e=this.vs(t);if(0===e.length)return new t;for(var i=[],r=null,n=0;n<e.length;n++){var o=e[n];r=this.resolve(o),i.push(r)}return this.ys(t,i)},t.prototype.ys=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(e)))},t}();i.Ie=o},{"./lookup":3,"./type_binding_scope":5}],3:[function(t,e,i){var r=function(){function t(t,e){this.key=t,this.value=new Array,this.value.push(e)}return t}(),n=function(){function t(){this.ms=new Array}return t.prototype.ws=function(t){for(var e=-1,i=0;i<this.ms.length;i++){var r=this.ms[i];r.key===t&&(e=i)}return e},t.prototype.add=function(t,e){if(null===t||void 0===t)throw new Error("Argument Null");if(null===e||void 0===e)throw new Error("Argument Null");var i=this.ws(t);if(-1!==i){var n=this.ms[i];n.key===t&&n.value.push(e)}else this.ms.push(new r(t,e))},t.prototype.get=function(t){if(null===t||void 0===t)throw new Error("Argument Null");var e=this.ws(t);if(-1===e)throw new Error("Key Not Found");var i=this.ms[e];return i.key===t?i.value:void 0},t.prototype.remove=function(t){if(null===t||void 0===t)throw new Error("Argument Null");var e=this.ws(t);if(-1===e)throw new Error("Key Not Found");this.ms.splice(e,1)},t.prototype.us=function(t){if(null===t||void 0===t)throw new Error("Argument Null");var e=this.ws(t);return-1!==e},t}();i.cs=n},{}],4:[function(t,e,i){var r=t("./type_binding_scope"),n=function(){function t(t,e,i){if(this.hs=t,this.gs=e,this.ds=null,"undefined"==typeof i)this.scope=r.ss.Ts;else{if(!r.ss[i]){var n="Invalid scope type "+i;throw new Error(n)}this.scope=i}}return t}();i.ns=n},{"./type_binding_scope":5}],5:[function(t,e,i){var r;!function(t){t[t.Ts=0]="Transient",t[t.ls=1]="Singleton"}(r||(r={})),i.ss=r},{}]},{},[1])(1)})},function(module,exports,__webpack_require__){var Thrift={Ss:"0.9.2",bs:{Es:0,Is:1,BOOL:2,BYTE:3,Rs:3,ks:4,Cs:6,Os:8,Ps:10,As:11,Ns:11,xs:12,Bs:13,Fs:14,_s:15,Ds:16,Hs:17},Ls:{Ms:1,js:2,Us:3,Vs:4},Qs:function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e},qs:function(t,e,i){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.name=i||""}};Thrift.Js=function(t){this.message=t},Thrift.qs(Thrift.Js,Error,"TException"),Thrift.Js.prototype.Ks=function(){return this.message},Thrift.Gs={zs:0,Ws:1,$s:2,Ys:3,Xs:4,Zs:5,ta:6,ea:7,ia:8,ra:9,na:10},Thrift.oa=function(t,e){this.message=t,this.code="number"==typeof e?e:0},Thrift.qs(Thrift.oa,Thrift.Js,"TApplicationException"),Thrift.oa.prototype.read=function(t){for(;;){var e=t.sa();if(e.aa==Thrift.bs.Es)break;var i=e.ca;switch(i){case 1:e.aa==Thrift.bs.As?(e=t.ha(),this.message=e.value):e=t.pa(e.aa);break;case 2:e.aa==Thrift.bs.Os?(e=t.ua(),this.code=e.value):e=t.pa(e.aa);break;default:e=t.pa(e.aa)}t.la()}t.da()},Thrift.oa.prototype.write=function(t){t.fa("TApplicationException"),this.message&&(t.ga("message",Thrift.bs.As,1),t.va(this.Ks()),t.ya()),this.code&&(t.ga("type",Thrift.bs.Os,2),t.ma(this.code),t.ya()),t.wa(),t.Ta()},Thrift.oa.prototype.Sa=function(){return this.code},Thrift.ba=Thrift.Ea=function(t,e){this.url=t,this.Ia=0,this.Ra=0,this.ka=e&&e.ka,this.Ca="",this.Oa=""},Thrift.Ea.prototype={Pa:function(){try{return new XMLHttpRequest}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}throw"Your browser doesn't support XHR."},flush:function(t,e){var i=this;if(t&&!e||void 0===this.url||""===this.url)return this.Ca;var r=this.Pa();if(r.overrideMimeType&&r.overrideMimeType("application/json"),e&&(r.onreadystatechange=function(){var t=e;return function(){4==this.readyState&&200==this.status&&(i.Aa(this.responseText),t())}}()),r.open("POST",this.url,!!t),r.send(this.Ca),!t||!e){if(4!=r.readyState)throw"encountered an unknown ajax ready state: "+r.readyState;if(200!=r.status)throw"encountered a unknown request status: "+r.status;this.Oa=r.responseText,this.Na=this.Oa.length,this.Ia=this.Oa.length,this.Ra=0}},xa:function(t,e,i,r){if("undefined"==typeof jQuery||"undefined"==typeof jQuery.Deferred)throw"Thrift.js requires jQuery 1.5+ to use asynchronous requests";var n=this,o=jQuery.ajax({url:this.url,data:e,type:"POST",ds:!1,contentType:"application/json",Ba:"text thrift",Fa:{_a:function(e){n.Aa(e);var i=r.call(t);return i}},context:t,success:jQuery.makeArray(i).pop()});return o},Aa:function(t){this.Oa=t,this.Na=this.Oa.length,this.Ia=this.Oa.length,this.Ra=0},isOpen:function(){return!0},open:function(){},close:function(){},read:function(t){var e=this.Ia-this.Ra;if(0===e)return"";var i=t;e<t&&(i=e);var r=this.read_buf.substr(this.Ra,i);return this.Ra+=i,r},Da:function(){return this.Oa},write:function(t){this.Ca=t},Ha:function(){return this.Ca}},Thrift.La=function(t){this.Ma(t)},Thrift.La.prototype={Ma:function(t){this.url=t,this.ja=null,this.callbacks=[],this.Ua=[],this.Ca="",this.Oa="",this.Va=0,this.Qa=0},flush:function(t,e){var i=this;this.isOpen()?(this.ja.send(this.Ca),this.callbacks.push(function(){var t=e;return function(e){i.Aa(e),t()}}())):this.Ua.push({qa:this.Ca,Ja:e})},Ka:function(){var t=this;this.Ua.length>0&&(this.Ua.forEach(function(e){this.ja.send(e.qa),this.callbacks.push(function(){var i=e.Ja;return function(e){t.Aa(e),i()}}())}),this.Ua=[])},Ga:function(t){this.Ma(this.url)},za:function(t){this.callbacks.length&&this.callbacks.shift()(t.data)},Wa:function(t){console.log("Thrift WebSocket Error: "+t.toString()),this.ja.close()},Aa:function(t){this.Oa=t,this.Na=this.Oa.length,this.Ia=this.Oa.length,this.Ra=0},isOpen:function(){return this.ja&&this.ja.readyState==this.ja.OPEN},open:function(){this.ja&&this.ja.readyState!=this.ja.CLOSED||(this.ja=new WebSocket(this.url),this.ja.onopen=this.Ka.bind(this),this.ja.onmessage=this.za.bind(this),this.ja.onerror=this.Wa.bind(this),this.ja.onclose=this.Ga.bind(this))},close:function(){this.ja.close()},read:function(t){var e=this.Ia-this.Ra;if(0===e)return"";var i=t;e<t&&(i=e);var r=this.read_buf.substr(this.Ra,i);return this.Ra+=i,r},Da:function(){return this.Oa},write:function(t){this.Ca=t},Ha:function(){return this.Ca}},Thrift.$a=Thrift.Ya=function(t){this.Xa=t},Thrift.Ya.bs={},Thrift.Ya.bs[Thrift.bs.BOOL]='"tf"',Thrift.Ya.bs[Thrift.bs.BYTE]='"i8"',Thrift.Ya.bs[Thrift.bs.Cs]='"i16"',Thrift.Ya.bs[Thrift.bs.Os]='"i32"',Thrift.Ya.bs[Thrift.bs.Ps]='"i64"',Thrift.Ya.bs[Thrift.bs.ks]='"dbl"',Thrift.Ya.bs[Thrift.bs.xs]='"rec"',Thrift.Ya.bs[Thrift.bs.As]='"str"',Thrift.Ya.bs[Thrift.bs.Bs]='"map"',Thrift.Ya.bs[Thrift.bs._s]='"lst"',Thrift.Ya.bs[Thrift.bs.Fs]='"set"',Thrift.Ya.Za={},Thrift.Ya.Za.tc=Thrift.bs.BOOL,Thrift.Ya.Za.ec=Thrift.bs.BYTE,Thrift.Ya.Za.ic=Thrift.bs.Cs,Thrift.Ya.Za.rc=Thrift.bs.Os,Thrift.Ya.Za.nc=Thrift.bs.Ps,Thrift.Ya.Za.oc=Thrift.bs.ks,Thrift.Ya.Za.sc=Thrift.bs.xs,Thrift.Ya.Za.ac=Thrift.bs.As,Thrift.Ya.Za.map=Thrift.bs.Bs,Thrift.Ya.Za.cc=Thrift.bs._s,Thrift.Ya.Za.set=Thrift.bs.Fs,Thrift.Ya.Ss=1,Thrift.Ya.prototype={hc:function(){return this.Xa},pc:function(t,e,i){this.uc=[],this.lc=[],this.uc.push([Thrift.Ya.Ss,'"'+t+'"',e,i])},dc:function(){var t=this.uc.pop();this.fc=this.uc.pop(),this.fc.push(t),this.gc="["+this.fc.join(",")+"]",this.Xa.write(this.gc)},fa:function(t){this.lc.push(this.uc.length),this.uc.push({})},Ta:function(){var t=this.lc.pop(),e=this.uc[t],i="{",r=!0;for(var n in e)r?r=!1:i+=",",i+=n+":"+e[n];i+="}",this.uc[t]=i},ga:function(t,e,i){this.lc.push(this.uc.length),this.uc.push({vc:'"'+i+'"',yc:Thrift.Ya.bs[e]})},ya:function(){var t=this.uc.pop(),e=this.uc.pop();this.uc[this.uc.length-1][e.vc]="{"+e.yc+":"+t+"}",this.lc.pop()},wa:function(){},mc:function(t,e,i){this.lc.push(this.uc.length),this.uc.push([Thrift.Ya.bs[t],Thrift.Ya.bs[e],0])},wc:function(){var t=this.lc.pop();if(t!=this.uc.length){(this.uc.length-t-1)%2!==0&&this.uc.push("");var e=(this.uc.length-t-1)/2;this.uc[t][this.uc[t].length-1]=e;for(var i="}",r=!0;this.uc.length>t+1;){var n=this.uc.pop(),o=this.uc.pop();r?r=!1:i=","+i,isNaN(o)||(o='"'+o+'"'),i=o+":"+n+i}i="{"+i,this.uc[t].push(i),this.uc[t]="["+this.uc[t].join(",")+"]"}},Tc:function(t,e){this.lc.push(this.uc.length),this.uc.push([Thrift.Ya.bs[t],e])},Sc:function(){for(var t=this.lc.pop();this.uc.length>t+1;){var e=this.uc[t+1];this.uc.splice(t+1,1),this.uc[t].push(e)}this.uc[t]="["+this.uc[t].join(",")+"]"},bc:function(t,e){this.lc.push(this.uc.length),this.uc.push([Thrift.Ya.bs[t],e])},Ec:function(){for(var t=this.lc.pop();this.uc.length>t+1;){var e=this.uc[t+1];this.uc.splice(t+1,1),this.uc[t].push(e)}this.uc[t]="["+this.uc[t].join(",")+"]"},Ic:function(t){this.uc.push(t?1:0)},Rc:function(t){this.uc.push(t)},kc:function(t){this.uc.push(t)},ma:function(t){this.uc.push(t)},Cc:function(t){this.uc.push(t)},Oc:function(t){this.uc.push(t)},va:function(t){if(null===t)this.uc.push(null);else{for(var e="",i=0;i<t.length;i++){var r=t.charAt(i);e+='"'===r?'\\"':"\\"===r?"\\\\":"\b"===r?"\\b":"\f"===r?"\\f":"\n"===r?"\\n":"\r"===r?"\\r":"\t"===r?"\\t":r}this.uc.push('"'+e+'"')}},Pc:function(t){this.va(t)},Ac:function(){this.Nc=[],this.Ra=[],"undefined"!=typeof JSON&&"function"==typeof JSON.parse?this.xc=JSON.parse(this.Xa.Da()):"undefined"!=typeof jQuery?this.xc=jQuery.parseJSON(this.Xa.Da()):this.xc=eval(this.Xa.Da());var r={},version=this.xc.shift();if(version!=Thrift.Ya.Ss)throw"Wrong thrift protocol version: "+version;return r.Bc=this.xc.shift(),r.Fc=this.xc.shift(),r._c=this.xc.shift(),this.Nc.push(this.xc.shift()),r},Dc:function(){},Hc:function(t){var e={};return e.Bc="",this.Nc[this.Nc.length-1]instanceof Array&&this.Nc.push(this.Nc[this.Nc.length-1].shift()),e},da:function(){this.Nc[this.Nc.length-2]instanceof Array&&this.Nc.pop()},sa:function(){var t={},e=-1,i=Thrift.bs.Es;for(var r in this.Nc[this.Nc.length-1])if(null!==r){e=parseInt(r,10),this.Ra.push(this.Nc.length);var n=this.Nc[this.Nc.length-1][e];delete this.Nc[this.Nc.length-1][e],this.Nc.push(n);break}if(e!=-1)for(var o in this.Nc[this.Nc.length-1])null!==Thrift.Ya.Za[o]&&(i=Thrift.Ya.Za[o],this.Nc[this.Nc.length-1]=this.Nc[this.Nc.length-1][o]);return t.Bc="",t.aa=i,t.ca=e,t},la:function(){for(var t=this.Ra.pop();this.Nc.length>t;)this.Nc.pop()},Lc:function(){var t=this.Nc.pop(),e=t.shift();e instanceof Array&&(this.Nc.push(t),t=e,e=t.shift());var i={};return i.Mc=Thrift.Ya.Za[e],i.jc=Thrift.Ya.Za[t.shift()],i.size=t.shift(),this.Ra.push(this.Nc.length),this.Nc.push(t.shift()),i},Uc:function(){this.la()},Vc:function(){var t=this.Nc[this.Nc.length-1],e={};return e.Qc=Thrift.Ya.Za[t.shift()],e.size=t.shift(),this.Ra.push(this.Nc.length),this.Nc.push(t),e},qc:function(){this.la()},Jc:function(t,e){return this.Vc(t,e)},Kc:function(){return this.qc()},Gc:function(){var t=this.ua();return null!==t&&"1"==t.value?t.value=!0:t.value=!1,t},zc:function(){return this.ua()},Wc:function(){return this.ua()},ua:function(t){void 0===t&&(t=this.Nc[this.Nc.length-1]);var e={};if(t instanceof Array)0===t.length?e.value=void 0:e.value=t.shift();else if(t instanceof Object){for(var i in t)if(null!==i){this.Nc.push(t[i]),delete t[i],e.value=i;break}}else e.value=t,this.Nc.pop();return e},$c:function(){return this.ua()},Yc:function(){return this.ua()},ha:function(){var t=this.ua();return t},Xc:function(){return this.ha()},pa:function(t){var e,i;switch(t){case Thrift.bs.Es:return null;case Thrift.bs.BOOL:return this.Gc();case Thrift.bs.BYTE:return this.zc();case Thrift.bs.Cs:return this.Wc();case Thrift.bs.Os:return this.ua();case Thrift.bs.Ps:return this.$c();case Thrift.bs.ks:return this.Yc();case Thrift.bs.As:return this.ha();case Thrift.bs.xs:for(this.Hc();;){if(e=this.sa(),e.aa==Thrift.bs.Es)break;this.pa(e.aa),this.la()}return this.da(),null;case Thrift.bs.Bs:for(e=this.Lc(),i=0;i<e.size;i++)i>0&&this.Nc.length>this.Ra[this.Ra.length-1]+1&&this.Nc.pop(),this.pa(e.Mc),this.pa(e.jc);return this.Uc(),null;case Thrift.bs.Fs:for(e=this.Jc(),i=0;i<e.size;i++)this.pa(e.Qc);return this.Kc(),null;case Thrift.bs._s:for(e=this.Vc(),i=0;i<e.size;i++)this.pa(e.Qc);return this.qc(),null}}},Thrift.Zc=function(t,e,i,r){Thrift.Ya.call(this,e,i,r),this.th=t},Thrift.qs(Thrift.Zc,Thrift.Ya,"multiplexProtocol"),Thrift.Zc.prototype.pc=function(t,e,i){e===Thrift.Ls.Ms||e===Thrift.Ls.Vs?Thrift.Ya.prototype.pc.call(this,this.th+":"+t,e,i):Thrift.Ya.prototype.pc.call(this,t,e,i)},Thrift.eh=function(){this.ih=0},Thrift.eh.prototype.rh=function(t,e,i){e.eo&&(e=e.eo);var r=this;e.prototype.nh=function(){return r.ih+=1,r.ih};var n=new e(new Thrift.Zc(t,i));return n},module.t=Thrift},function(t,e){"use strict";var i;!function(t){function e(t){return n[t]}var i=function(){function t(){}return t}();t.HiveSession=i;var r;!function(t){t[t.oh=0]="GENERIC_ERROR",t[t.sh=1]="NO_TECH_AVAILABLE",t[t.ah=2]="NO_TECH_RESOLVED",t[t.hh=3]="TECH_ERROR",t[t.ph=4]="TICKET_ERROR"}(r=t.uh||(t.uh={}));var n;!function(t){t[t["lh"]=0]="Generic Undefined Error",t[t["dh"]=1]="No Tech available to resolve the ticket",t[t["fh"]=2]="No available Tech could resolved the ticket",t[t["gh"]=3]="Stopped resolving session on last tech onError",t[t["vh"]=4]="The ticket could not be resolved"}(n||(n={}));var o=function(){function t(){}return t}();t.HiveSessionError=o;var s=function(){function t(t,e){this.code=t,this.message=e}return t}();t.HiveTechError=s;var a;!function(t){t[t.yh=0]="NOT_READY",t[t.mh=1]="PLUGIN_ERROR",t[t.wh=2]="SESSION_ERROR",t[t.ph=3]="TICKET_ERROR",t[t.Th=4]="VERSION_ERROR",t[t.Sh=5]="TIMEOUT_ERROR"}(a=t.bh||(t.bh={}));var c;!function(t){t[t.Eh=0]="OK",t[t.Ih=1]="HIVE_NOT_ALLOWED",t[t.Rh=2]="TICKET_NOT_RESOLVED",t[t.kh=3]="TIMEOUT_RESOLVING_TICKET"}(c=t.Ch||(t.Ch={})),t.getHiveSessionErrorMessage=e;var h=function(){function t(t){this.Oh=t}return t.prototype.getPluginStatusCode=function(){return this.Oh.Ph()},t}();t.Ah=h}(i=e.pt||(e.pt={})),"undefined"!=typeof window&&("undefined"==typeof window.pt&&(window.pt={}),window.pt.getHiveSessionErrorMessage=i.getHiveSessionErrorMessage)},function(t,e){"use strict";var i=function(){function t(){}return t}();i.yr="https:"===location.protocol,i.Er=!0,i.Nh=1e4,i.xh=6e4,e.ke=i},function(t,e,i){"use strict";var r=i(41),n=i(8),o=i(25);if("undefined"==typeof s)var s="592835a6b4204dd197c00488610003e0";if("undefined"==typeof a)var a="0.8";if("undefined"==typeof c)var c=!0;var h=function(){function t(){if(this.st=!1,t.Gi)throw new Error("Error: Instantiation failed: Use AtatusLogger.getInstance() instead of new.");var e,i=void 0!=n.HiveConfig.ErrorMonitor.key?n.HiveConfig.ErrorMonitor.key:s,r=1==n.HiveConfig.ErrorMonitor.enabledRUM,a=1==n.HiveConfig.ErrorMonitor.enableKeyCombination,h=1==n.HiveConfig.ErrorMonitor.enabledErrorFilter;h&&(e=this.Bh()),atatus&&(void 0==n.HiveConfig.ErrorMonitor.enabled&&c||void 0!=n.HiveConfig.ErrorMonitor.enabled&&1==n.HiveConfig.ErrorMonitor.enabled)&&(atatus.config(i,{enableSourcemap:!0,disableRUM:!r,version:o.version,beforeErrorSend:function(t){var i=!1;if(t&&t.customData&&"undefined"!=typeof t.customData.forceSend&&(i=t.customData.forceSend,delete t.customData.forceSend,0===Object.keys(t.customData).length&&(t.customData=null)),!h||i)return!0;if(!e)return!1;try{var r=!1;if(t.backTraces){for(var n=0,o=t.backTraces;n<o.length;n++){var s=o[n],a=s.f.indexOf(e)>-1;if(a&&s.ln>5){r=!0;break}}r&&(t.name=t.name.replace(/%s \[[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]+] /,""),t.name.indexOf("Status Code Error:")>=0&&(t.tags=["Plugin Error Code",t.name.split(":")[1].trim()]))}return r}catch(c){return!1}}}).install(),a&&this.Fh(),this.st=!0,window.console&&console.log("[HiveComm] Error Monitor installed [RUM:"+r+", KeyHandler:"+a+"]"),h&&!e&&this._h("Could not extract error filter"))}return t.Wi=function(){return void 0===this.Gi&&(this.Gi=new t),this.Gi},t.prototype.Fh=function(){r.Hh.Wi().Dh([16,17,88],function(){try{throw new Error("Upload console logs")}catch(t){atatus.notify(t),window.console&&console.log("[HiveComm] console log uploaded for debugging")}})},t.prototype.Bh=function(){try{throw new Error("test")}catch(t){var e=t.stack.match(/(\/\/.*\.js)/i);if(e&&e.length>0)return e[0]}},t.prototype.setUser=function(t){atatus&&this.st&&atatus.setUser(t)},t.prototype.Lh=function(t){this.m=t},t.prototype.setCustomData=function(t){atatus&&this.st&&atatus.setCustomData(t)},t.prototype._h=function(t,e){if(this.m&&this.m.warn(t),atatus&&this.st)try{throw new Error(t)}catch(i){e||(e={}),e.forceSend=!0,atatus.notify(i,e)}},t.prototype.setTags=function(t){atatus&&this.st&&atatus.setTags(t)},t.prototype.notify=function(t,e){atatus&&this.st&&(e||(e={}),e.forceSend=!0,atatus.notify(t,e))},t}();e.ErrorMonitor=h},function(t,e,i){"use strict";var r=i(21),n=i(34),o=n.Mh,s=n.jh,a=function(){function t(){this.SourceURLParams={}}return t.prototype.Uh=function(t){for(var e in t)if("SourceURLParams"===e)for(var i in t[e])this[e][i]=t[e][i];else this[e]=t[e];this.Vh()},t.prototype.Qh=function(){var t="b6614c3e4cd1d14eed6b39ef2bf6b9a3e3d6dfcd26699d7270d887923bcbf83efb3dadb717c0bafb1d48dce361eb369b7cc46e57405ebfbdd86c3175532fe56cc77f473d345b2cb6feafb5ab0e24f364a3d259f27e4a2fd97468265bddfd3ddd3ac64251db650ca0280af2b2c45e8b1c8f040f2c433ac0a157d2b3fd91517253",e="010001",i=this.ContentId+this.SiteId+this.CROId+this.SourceURL,r=new o;r.qh(t,e);var n=s(this.Signature);return r.Jh(i,n)},t.prototype.Kh=function(t){this.ticketUrl=t;var e=r.parse(t),i=e.path.split("/").slice(3);if(this.SiteId=i[0],this.CROId=i[1],this.ContentId=i[2],this.Gh=i[3],e.vi)try{var n=e.vi.split("&");for(var o in n){var s=n[o].split(/=(.+)/);this.SourceURLParams[s[0]]=s[1]}}catch(a){}this.zh=t.indexOf("api-test")>-1},t.prototype.bn=function(){return this.SiteId},t.prototype.En=function(){return this.CROId},t.prototype.es=function(){return this.ContentId},t.prototype.Wh=function(){return this.Gh},t.prototype.$h=function(){return this.SourceURL},t.prototype.Yh=function(){if(this.Xh=this.SourceURL,void 0!=this.SourceURLParams){var t=new Array;for(var e in this.SourceURLParams)t.push(e+"="+this.SourceURLParams[e]);t.length>0&&this.Xh&&(this.Xh+=(this.Xh.indexOf("?")>0?"&":"?")+t.join("&"))}},t.prototype.Vh=function(){var t=i(22);this.sessionId=t.Zh()},t.prototype.tp=function(){return this.Xh||this.Yh(),this.Xh},t.prototype.On=function(){return"["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},t.prototype.ep=function(){return[this.SiteId,this.CROId,this.ContentId]},t.prototype.ip=function(){return this.SourceURL+"-["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},t.prototype.toString=function(){return this.On()},t}();a.rp="^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?",a.np="CROId",a.op="SiteId",a.sp="ContentId",e.ap=a},function(t,e,i){var r,n,o;/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.18.10
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
  !function(s,a){"use strict";"object"==typeof t&&t.t?t.t=a(i(6),i(6),i(6)):(n=[i(6),i(6),i(6)],r=a,o="function"==typeof r?r.apply(e,n):r,!(void 0!==o&&(t.t=o)))}(this,function(t,e,i,r){"use strict";function n(t,e){var i=arguments.length>=1,r=arguments.length>=2;if(!(this instanceof n))return i?r?new n(t,e):new n(t):new n;if(void 0===t){if(i)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&i)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.cp(e):this}function o(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===s(t)}function c(t,e){var i,r,n={};if("RegExp"===s(e))n=null;else if(a(e))for(i=0,r=e.length;i<r;i++)n[e[i]]=!0;else n[e]=!0;for(i=0,r=t.length;i<r;i++){var o=n&&void 0!==n[t[i]]||!n&&e.test(t[i]);o&&(t.splice(i,1),r--,i--)}return t}function h(t,e){var i,r;if(a(e)){for(i=0,r=e.length;i<r;i++)if(!h(t,e[i]))return!1;return!0}var n=s(e);for(i=0,r=t.length;i<r;i++)if("RegExp"===n){if("string"==typeof t[i]&&t[i].match(e))return!0}else if(t[i]===e)return!0;return!1}function p(t,e){if(!a(t)||!a(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var i=0,r=t.length;i<r;i++)if(t[i]!==e[i])return!1;return!0}function u(t){var e=/^\/+|\/+$/g;return t.replace(e,"")}function l(t){return escape(t)}function d(t){return encodeURIComponent(t).replace(/[!'()*]/g,l).replace(/\*/g,"%2A")}function f(t){return function(e,i){return void 0===e?this.hp[t]||"":(this.hp[t]=e||null,this.pp(!i),this)}}function g(t,e){return function(i,r){return void 0===i?this.hp[t]||"":(null!==i&&(i+="",i.charAt(0)===e&&(i=i.substring(1))),this.hp[t]=i,this.pp(!r),this)}}var v=r&&r.up;n.version="1.18.10";var y=n.prototype,m=Object.prototype.hasOwnProperty;n.hp=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,vi:null,lp:null,dp:n.dp,fp:n.fp}},n.dp=!1,n.fp=!0,n.gp=/^[a-z][a-z0-9.+-]*$/i,n.vp=/[^a-z0-9\.-]/i,n.yp=/(xn--)/i,n.mp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n.wp=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.Tp=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,n.Sp={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,bp:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},n.Ep={Ip:"80",Rp:"443",kp:"21",Cp:"70",Op:"80",Pp:"443"},n.Ap=/[^a-zA-Z0-9\.-]/,n.Np={a:"href",xp:"cite",link:"href",Bp:"href",Fp:"src",form:"action",_p:"src",Dp:"href",Hp:"src",Lp:"src",source:"src",track:"src",input:"src",Mp:"src",video:"src"},n.jp=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return n.Np[e]}},n.encode=d,n.decode=decodeURIComponent,n.Up=function(){n.encode=escape,n.decode=unescape},n.Vp=function(){n.encode=d,n.decode=decodeURIComponent},n.Qp={pathname:{encode:{qp:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{qp:/[\/\?#]/g,map:{Jp:"%2F",Kp:"%3F",Gp:"%23"}}},zp:{encode:{qp:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":",Wp:"/",$p:"?",Yp:"#",Xp:"[",Zp:"]","%40":"@",tu:"!","%24":"$","%26":"&",eu:"'",iu:"(",ru:")",nu:"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},ou:{encode:{qp:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{tu:"!","%24":"$",eu:"'",iu:"(",ru:")",nu:"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{qp:/[\/\?#:]/g,map:{Jp:"%2F",Kp:"%3F",Gp:"%23",su:"%3A"}}}},n.au=function(t,e){var i=n.encode(t+"");return void 0===e&&(e=n.fp),e?i.replace(/%20/g,"+"):i},n.cu=function(t,e){t+="",void 0===e&&(e=n.fp);try{return n.decode(e?t.replace(/\+/g,"%20"):t)}catch(i){return t}};var w,T={encode:"encode",decode:"decode"},S=function(t,e){return function(i){try{return n[e](i+"").replace(n.Qp[t][e].qp,function(i){return n.Qp[t][e].map[i]})}catch(r){return i}}};for(w in T)n[w+"PathSegment"]=S("pathname",T[w]),n[w+"UrnPathSegment"]=S("urnpath",T[w]);var b=function(t,e,i){return function(r){var o;o=i?function(t){return n[e](n[i](t))}:n[e];for(var s=(r+"").split(t),a=0,c=s.length;a<c;a++)s[a]=o(s[a]);return s.join(t)}};n.hu=b("/","decodePathSegment"),n.pu=b(":","decodeUrnPathSegment"),n.uu=b("/","encodePathSegment","decode"),n.lu=b(":","encodeUrnPathSegment","decode"),n.du=S("reserved","encode"),n.parse=function(t,e){var i;return e||(e={}),i=t.indexOf("#"),i>-1&&(e.lp=t.substring(i+1)||null,t=t.substring(0,i)),i=t.indexOf("?"),i>-1&&(e.vi=t.substring(i+1)||null,t=t.substring(0,i)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=n.fu(t,e)):(i=t.indexOf(":"),i>-1&&(e.protocol=t.substring(0,i)||null,e.protocol&&!e.protocol.match(n.gp)?e.protocol=void 0:"//"===t.substring(i+1,i+3)?(t=t.substring(i+3),t=n.fu(t,e)):(t=t.substring(i+1),e.urn=!0))),e.path=t,e},n.gu=function(t,e){t=t.replace(/\\/g,"/");var i,r,n=t.indexOf("/");if(n===-1&&(n=t.length),"["===t.charAt(0))i=t.indexOf("]"),e.hostname=t.substring(1,i)||null,e.port=t.substring(i+2,n)||null,"/"===e.port&&(e.port=null);else{var o=t.indexOf(":"),s=t.indexOf("/"),a=t.indexOf(":",o+1);a!==-1&&(s===-1||a<s)?(e.hostname=t.substring(0,n)||null,e.port=null):(r=t.substring(0,n).split(":"),e.hostname=r[0]||null,e.port=r[1]||null)}return e.hostname&&"/"!==t.substring(n).charAt(0)&&(n++,t="/"+t),t.substring(n)||"/"},n.fu=function(t,e){return t=n.vu(t,e),n.gu(t,e)},n.vu=function(t,e){var i,r=t.indexOf("/"),o=t.lastIndexOf("@",r>-1?r:t.length-1);return o>-1&&(r===-1||o<r)?(i=t.substring(0,o).split(":"),e.username=i[0]?n.decode(i[0]):null,i.shift(),e.password=i[0]?n.decode(i.join(":")):null,t=t.substring(o+1)):(e.username=null,e.password=null),t},n.yu=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var i,r,o,s={},a=t.split("&"),c=a.length,h=0;h<c;h++)i=a[h].split("="),r=n.cu(i.shift(),e),o=i.length?n.cu(i.join("="),e):null,m.call(s,r)?("string"!=typeof s[r]&&null!==s[r]||(s[r]=[s[r]]),s[r].push(o)):s[r]=o;return s},n.pp=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=n.mu(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.vi&&t.vi&&(e+="?"+t.vi),"string"==typeof t.lp&&t.lp&&(e+="#"+t.lp),e},n.wu=function(t){var e="";return t.hostname?(e+=n.wp.test(t.hostname)?"["+t.hostname+"]":t.hostname,t.port&&(e+=":"+t.port),e):""},n.mu=function(t){return n.Tu(t)+n.wu(t)},n.Tu=function(t){var e="";return t.username&&(e+=n.encode(t.username)),t.password&&(e+=":"+n.encode(t.password)),e&&(e+="@"),e},n.Su=function(t,e,i){var r,o,s,c,h="";for(o in t)if(m.call(t,o)&&o)if(a(t[o]))for(r={},s=0,c=t[o].length;s<c;s++)void 0!==t[o][s]&&void 0===r[t[o][s]+""]&&(h+="&"+n.bu(o,t[o][s],i),e!==!0&&(r[t[o][s]+""]=!0));else void 0!==t[o]&&(h+="&"+n.bu(o,t[o],i));return h.substring(1)},n.bu=function(t,e,i){return n.au(t,i)+(null!==e?"="+n.au(e,i):"")},n.Eu=function(t,e,i){if("object"==typeof e)for(var r in e)m.call(e,r)&&n.Eu(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=i);"string"==typeof t[e]&&(t[e]=[t[e]]),a(i)||(i=[i]),t[e]=(t[e]||[]).concat(i)}},n.Iu=function(t,e,i){var r,o,h;if(a(e))for(r=0,o=e.length;r<o;r++)t[e[r]]=void 0;else if("RegExp"===s(e))for(h in t)e.test(h)&&(t[h]=void 0);else if("object"==typeof e)for(h in e)m.call(e,h)&&n.Iu(t,h,e[h]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==i?"RegExp"===s(i)?!a(t[e])&&i.test(t[e])?t[e]=void 0:t[e]=c(t[e],i):t[e]!==String(i)||a(i)&&1!==i.length?a(t[e])&&(t[e]=c(t[e],i)):t[e]=void 0:t[e]=void 0}},n.Ru=function(t,e,i,r){switch(s(e)){case"String":break;case"RegExp":for(var o in t)if(m.call(t,o)&&e.test(o)&&(void 0===i||n.Ru(t,o,i)))return!0;return!1;case"Object":for(var c in e)if(m.call(e,c)&&!n.Ru(t,c,e[c]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(s(i)){case"Undefined":return e in t;case"Boolean":var u=Boolean(a(t[e])?t[e].length:t[e]);return i===u;case"Function":return!!i(t[e],e,t);case"Array":if(!a(t[e]))return!1;var l=r?h:p;return l(t[e],i);case"RegExp":return a(t[e])?!!r&&h(t[e],i):Boolean(t[e]&&t[e].match(i));case"Number":i=String(i);case"String":return a(t[e])?!!r&&h(t[e],i):t[e]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},n.ku=function(){for(var t=[],e=[],i=0,r=0;r<arguments.length;r++){var o=new n(arguments[r]);t.push(o);for(var s=o.Cu(),a=0;a<s.length;a++)"string"==typeof s[a]&&e.push(s[a]),s[a]&&i++}if(!e.length||!i)return new n("");var c=new n("").Cu(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||c.path("/"+c.path()),c.normalize()},n.Ou=function(t,e){var i,r=Math.min(t.length,e.length);for(i=0;i<r;i++)if(t.charAt(i)!==e.charAt(i)){i--;break}return i<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(i)&&"/"===e.charAt(i)||(i=t.substring(0,i).lastIndexOf("/")),t.substring(0,i+1))},n.Pu=function(t,e,i){i||(i={});var r=i.start||n.Sp.start,o=i.end||n.Sp.end,s=i.trim||n.Sp.trim,a=i.bp||n.Sp.bp,c=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var h=r.exec(t);if(!h)break;var p=h.index;if(i.ignoreHtml){var u=t.slice(Math.max(p-3,0),p);if(u&&c.test(u))continue}for(var l=p+t.slice(p).search(o),d=t.slice(p,l),f=-1;;){var g=a.exec(d);if(!g)break;var v=g.index+g[0].length;f=Math.max(f,v)}if(d=f>-1?d.slice(0,f)+d.slice(f).replace(s,""):d.replace(s,""),!(d.length<=h[0].length||i.ignore&&i.ignore.test(d))){l=p+d.length;var y=e(d,p,l,t);void 0!==y?(y=String(y),t=t.slice(0,p)+y+t.slice(l),r.lastIndex=p+y.length):r.lastIndex=l}}return r.lastIndex=0,t},n.Au=function(e){if(e.match(n.Ap)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.toASCII(e).match(n.Ap))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},n.ge=function(t){if(t){var e={up:this.ge()};return r.Nu&&"function"==typeof r.Nu.ge&&(e.Nu=r.Nu.ge()),r.xu&&"function"==typeof r.xu.ge&&(e.xu=r.xu.ge()),r.Bu&&"function"==typeof r.Bu.ge&&(e.Bu=r.Bu.ge()),e}return r.up===this&&(r.up=v),this},y.pp=function(t){return t===!0?this.Fu=!0:(void 0===t||this.Fu)&&(this._u=n.pp(this.hp),this.Fu=!1),this},y.clone=function(){return new n(this)},y.valueOf=y.toString=function(){return this.pp(!1)._u},y.protocol=f("protocol"),y.username=f("username"),y.password=f("password"),y.hostname=f("hostname"),y.port=f("port"),y.vi=g("query","?"),y.lp=g("fragment","#"),y.search=function(t,e){var i=this.vi(t,e);return"string"==typeof i&&i.length?"?"+i:i},y.hash=function(t,e){var i=this.lp(t,e);return"string"==typeof i&&i.length?"#"+i:i},y.pathname=function(t,e){if(void 0===t||t===!0){var i=this.hp.path||(this.hp.hostname?"/":"");return t?(this.hp.urn?n.pu:n.hu)(i):i}return this.hp.urn?this.hp.path=t?n.lu(t):"":this.hp.path=t?n.uu(t):"/",this.pp(!e),this},y.path=y.pathname,y.href=function(t,e){var i;if(void 0===t)return this.toString();this._u="",this.hp=n.hp();var r=t instanceof n,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){var s=n.jp(t);t=t[s]||"",o=!1}if(!r&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this.hp=n.parse(String(t),this.hp);else{if(!r&&!o)throw new TypeError("invalid input");var a=r?t.hp:t;for(i in a)m.call(this.hp,i)&&(this.hp[i]=a[i])}return this.pp(!e),this},y.is=function(t){var e=!1,r=!1,o=!1,s=!1,a=!1,c=!1,h=!1,p=!this.hp.urn;switch(this.hp.hostname&&(p=!1,r=n.mp.test(this.hp.hostname),o=n.wp.test(this.hp.hostname),e=r||o,s=!e,a=s&&i&&i.has(this.hp.hostname),c=s&&n.vp.test(this.hp.hostname),h=s&&n.yp.test(this.hp.hostname)),t.toLowerCase()){case"relative":return p;case"absolute":return!p;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return o;case"idn":return c;case"url":return!this.hp.urn;case"urn":return!!this.hp.urn;case"punycode":return h}return null};var E=y.protocol,I=y.port,R=y.hostname;y.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(n.gp)))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return E.call(this,t,e)},y.scheme=y.protocol,y.port=function(t,e){if(this.hp.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return I.call(this,t,e)},y.hostname=function(t,e){if(this.hp.urn)return void 0===t?"":this;if(void 0!==t){var i={},r=n.gu(t,i);if("/"!==r)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=i.hostname}return R.call(this,t,e)},y.origin=function(t,e){if(this.hp.urn)return void 0===t?"":this;if(void 0===t){var i=this.protocol(),r=this.Du();return r?(i?i+"://":"")+this.Du():""}var o=n(t);return this.protocol(o.protocol()).Du(o.Du()).pp(!e),this},y.host=function(t,e){if(this.hp.urn)return void 0===t?"":this;if(void 0===t)return this.hp.hostname?n.wu(this.hp):"";var i=n.gu(t,this.hp);if("/"!==i)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.pp(!e),this},y.Du=function(t,e){if(this.hp.urn)return void 0===t?"":this;if(void 0===t)return this.hp.hostname?n.mu(this.hp):"";var i=n.fu(t,this.hp);if("/"!==i)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.pp(!e),this},y.Hu=function(t,e){if(this.hp.urn)return void 0===t?"":this;if(void 0===t){var i=n.Tu(this.hp);return i?i.substring(0,i.length-1):i}return"@"!==t[t.length-1]&&(t+="@"),n.vu(t,this.hp),this.pp(!e),this},y.Lu=function(t,e){var i;return void 0===t?this.path()+this.search()+this.hash():(i=n.parse(t),this.hp.path=i.path,this.hp.vi=i.vi,this.hp.lp=i.lp,this.pp(!e),this)},y.Mu=function(t,e){if(this.hp.urn)return void 0===t?"":this;if(void 0===t){if(!this.hp.hostname||this.is("IP"))return"";var i=this.hp.hostname.length-this.domain().length-1;return this.hp.hostname.substring(0,i)||""}var r=this.hp.hostname.length-this.domain().length,s=this.hp.hostname.substring(0,r),a=new RegExp("^"+o(s));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&n.Au(t),this.hp.hostname=this.hp.hostname.replace(a,t),this.pp(!e),this},y.domain=function(t,e){if(this.hp.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this.hp.hostname||this.is("IP"))return"";var i=this.hp.hostname.match(/\./g);if(i&&i.length<2)return this.hp.hostname;var r=this.hp.hostname.length-this.ju(e).length-1;return r=this.hp.hostname.lastIndexOf(".",r-1)+1,this.hp.hostname.substring(r)||""}if(!t)throw new TypeError("cannot set domain empty");if(n.Au(t),!this.hp.hostname||this.is("IP"))this.hp.hostname=t;else{var s=new RegExp(o(this.domain())+"$");this.hp.hostname=this.hp.hostname.replace(s,t)}return this.pp(!e),this},y.ju=function(t,e){if(this.hp.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this.hp.hostname||this.is("IP"))return"";var r=this.hp.hostname.lastIndexOf("."),n=this.hp.hostname.substring(r+1);return e!==!0&&i&&i.list[n.toLowerCase()]?i.get(this.hp.hostname)||n:n}var s;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!i||!i.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');s=new RegExp(o(this.ju())+"$"),this.hp.hostname=this.hp.hostname.replace(s,t)}else{if(!this.hp.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(o(this.ju())+"$"),this.hp.hostname=this.hp.hostname.replace(s,t)}return this.pp(!e),this},y.Uu=function(t,e){if(this.hp.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this.hp.path&&!this.hp.hostname)return"";if("/"===this.hp.path)return"/";var i=this.hp.path.length-this.filename().length-1,r=this.hp.path.substring(0,i)||(this.hp.hostname?"/":"");return t?n.hu(r):r}var s=this.hp.path.length-this.filename().length,a=this.hp.path.substring(0,s),c=new RegExp("^"+o(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=n.uu(t),this.hp.path=this.hp.path.replace(c,t),this.pp(!e),this},y.filename=function(t,e){if(this.hp.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this.hp.path||"/"===this.hp.path)return"";var i=this.hp.path.lastIndexOf("/"),r=this.hp.path.substring(i+1);return t?n.decodePathSegment(r):r}var s=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(s=!0);var a=new RegExp(o(this.filename())+"$");return t=n.uu(t),this.hp.path=this.hp.path.replace(a,t),s?this.Vu(e):this.pp(!e),this},y.suffix=function(t,e){if(this.hp.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this.hp.path||"/"===this.hp.path)return"";var i,r,s=this.filename(),a=s.lastIndexOf(".");return a===-1?"":(i=s.substring(a+1),r=/^[a-z0-9%]+$/i.test(i)?i:"",t?n.decodePathSegment(r):r)}"."===t.charAt(0)&&(t=t.substring(1));var c,h=this.suffix();if(h)c=t?new RegExp(o(h)+"$"):new RegExp(o("."+h)+"$");else{if(!t)return this;this.hp.path+="."+n.uu(t)}return c&&(t=n.uu(t),this.hp.path=this.hp.path.replace(c,t)),this.pp(!e),this},y.Cu=function(t,e,i){var r=this.hp.urn?":":"/",n=this.path(),o="/"===n.substring(0,1),s=n.split(r);if(void 0!==t&&"number"!=typeof t&&(i=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&s.shift(),t<0&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(a(e)){s=[];for(var c=0,h=e.length;c<h;c++)(e[c].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(u(e[c])))}else(e||"string"==typeof e)&&(e=u(e),""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e?s[t]=u(e):s.splice(t,1);return o&&s.unshift(""),this.path(s.join(r),i)},y.Qu=function(t,e,i){var r,o,s;if("number"!=typeof t&&(i=e,e=t,t=void 0),void 0===e){if(r=this.Cu(t,e,i),a(r))for(o=0,s=r.length;o<s;o++)r[o]=n.decode(r[o]);else r=void 0!==r?n.decode(r):void 0;return r}if(a(e))for(o=0,s=e.length;o<s;o++)e[o]=n.encode(e[o]);else e="string"==typeof e||e instanceof String?n.encode(e):e;return this.Cu(t,e,i)};var k=y.vi;return y.vi=function(t,e){if(t===!0)return n.yu(this.hp.vi,this.hp.fp);if("function"==typeof t){var i=n.yu(this.hp.vi,this.hp.fp),r=t.call(this,i);return this.hp.vi=n.Su(r||i,this.hp.dp,this.hp.fp),this.pp(!e),this}return void 0!==t&&"string"!=typeof t?(this.hp.vi=n.Su(t,this.hp.dp,this.hp.fp),this.pp(!e),this):k.call(this,t,e)},y.qu=function(t,e,i){var r=n.yu(this.hp.vi,this.hp.fp);if("string"==typeof t||t instanceof String)r[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)m.call(t,o)&&(r[o]=t[o])}return this.hp.vi=n.Su(r,this.hp.dp,this.hp.fp),"string"!=typeof t&&(i=e),this.pp(!i),this},y.Eu=function(t,e,i){var r=n.yu(this.hp.vi,this.hp.fp);return n.Eu(r,t,void 0===e?null:e),this.hp.vi=n.Su(r,this.hp.dp,this.hp.fp),"string"!=typeof t&&(i=e),this.pp(!i),this},y.Iu=function(t,e,i){var r=n.yu(this.hp.vi,this.hp.fp);return n.Iu(r,t,e),this.hp.vi=n.Su(r,this.hp.dp,this.hp.fp),"string"!=typeof t&&(i=e),this.pp(!i),this},y.Ru=function(t,e,i){var r=n.yu(this.hp.vi,this.hp.fp);return n.Ru(r,t,e,i)},y.Ju=y.qu,y.Ku=y.Eu,y.Gu=y.Iu,y.zu=y.Ru,y.normalize=function(){return this.hp.urn?this.Yu(!1).Vu(!1).$u(!1).Wu(!1).pp():this.Yu(!1).Zu(!1).Xu(!1).Vu(!1).$u(!1).Wu(!1).pp()},y.Yu=function(t){return"string"==typeof this.hp.protocol&&(this.hp.protocol=this.hp.protocol.toLowerCase(),this.pp(!t)),this},y.Zu=function(i){return this.hp.hostname&&(this.is("IDN")&&t?this.hp.hostname=t.toASCII(this.hp.hostname):this.is("IPv6")&&e&&(this.hp.hostname=e.best(this.hp.hostname)),this.hp.hostname=this.hp.hostname.toLowerCase(),this.pp(!i)),this},y.Xu=function(t){return"string"==typeof this.hp.protocol&&this.hp.port===n.Ep[this.hp.protocol]&&(this.hp.port=null,this.pp(!t)),this},y.Vu=function(t){var e=this.hp.path;if(!e)return this;if(this.hp.urn)return this.hp.path=n.lu(this.hp.path),this.pp(!t),this;if("/"===this.hp.path)return this;e=n.uu(e);var i,r,o,s="";for("/"!==e.charAt(0)&&(i=!0,e="/"+e),"/.."!==e.slice(-3)&&"/."!==e.slice(-2)||(e+="/"),e=e.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),i&&(s=e.substring(1).match(/^(\.\.\/)+/)||"",s&&(s=s[0]));;){if(r=e.search(/\/\.\.(\/|$)/),r===-1)break;0!==r?(o=e.substring(0,r).lastIndexOf("/"),o===-1&&(o=r),e=e.substring(0,o)+e.substring(r+3)):e=e.substring(3)}return i&&this.is("relative")&&(e=s+e.substring(1)),this.hp.path=e,this.pp(!t),this},y.tl=y.Vu,y.$u=function(t){return"string"==typeof this.hp.vi&&(this.hp.vi.length?this.vi(n.yu(this.hp.vi,this.hp.fp)):this.hp.vi=null,this.pp(!t)),this},y.Wu=function(t){return this.hp.lp||(this.hp.lp=null,this.pp(!t)),this},y.el=y.$u,y.il=y.Wu,y.Up=function(){var t=n.encode,e=n.decode;n.encode=escape,n.decode=decodeURIComponent;try{this.normalize()}finally{n.encode=t,n.decode=e}return this},y.Vp=function(){var t=n.encode,e=n.decode;n.encode=d,n.decode=unescape;try{this.normalize()}finally{n.encode=t,n.decode=e}return this},y.rl=function(){var e=this.clone();e.username("").password("").normalize();var i="";if(e.hp.protocol&&(i+=e.hp.protocol+"://"),e.hp.hostname&&(e.is("punycode")&&t?(i+=t.toUnicode(e.hp.hostname),e.hp.port&&(i+=":"+e.hp.port)):i+=e.host()),e.hp.hostname&&e.hp.path&&"/"!==e.hp.path.charAt(0)&&(i+="/"),i+=e.path(!0),e.hp.vi){for(var r="",o=0,s=e.hp.vi.split("&"),a=s.length;o<a;o++){var c=(s[o]||"").split("=");r+="&"+n.cu(c[0],this.hp.fp).replace(/&/g,"%26"),void 0!==c[1]&&(r+="="+n.cu(c[1],this.hp.fp).replace(/&/g,"%26"))}i+="?"+r.substring(1)}return i+=n.cu(e.hash(),!0)},y.cp=function(t){var e,i,r,o=this.clone(),s=["protocol","username","password","hostname","port"];if(this.hp.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof n||(t=new n(t)),o.hp.protocol)return o;if(o.hp.protocol=t.hp.protocol,this.hp.hostname)return o;for(i=0;r=s[i];i++)o.hp[r]=t.hp[r];return o.hp.path?(".."===o.hp.path.substring(-2)&&(o.hp.path+="/"),"/"!==o.path().charAt(0)&&(e=t.Uu(),e=e?e:0===t.path().indexOf("/")?"/":"",o.hp.path=(e?e+"/":"")+o.hp.path,o.Vu())):(o.hp.path=t.hp.path,o.hp.vi||(o.hp.vi=t.hp.vi)),o.pp(),o},y.nl=function(t){var e,i,r,o,s,a=this.clone().normalize();if(a.hp.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new n(t).normalize(),e=a.hp,i=t.hp,o=a.path(),s=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===i.protocol&&(e.protocol=null),e.username!==i.username||e.password!==i.password)return a.pp();if(null!==e.protocol||null!==e.username||null!==e.password)return a.pp();if(e.hostname!==i.hostname||e.port!==i.port)return a.pp();if(e.hostname=null,e.port=null,o===s)return e.path="",a.pp();if(r=n.Ou(o,s),!r)return a.pp();var c=i.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=c+e.path.substring(r.length)||"./",a.pp()},y.ol=function(t){var e,i,r,o=this.clone(),s=new n(t),c={},h={},u={};if(o.normalize(),s.normalize(),o.toString()===s.toString())return!0;if(e=o.vi(),i=s.vi(),o.vi(""),s.vi(""),o.toString()!==s.toString())return!1;if(e.length!==i.length)return!1;c=n.yu(e,this.hp.fp),h=n.yu(i,this.hp.fp);for(r in c)if(m.call(c,r)){if(a(c[r])){if(!p(c[r],h[r]))return!1}else if(c[r]!==h[r])return!1;u[r]=!0}for(r in h)if(m.call(h,r)&&!u[r])return!1;return!0},y.dp=function(t){return this.hp.dp=!!t,this},y.fp=function(t){return this.hp.fp=!!t,this},n})},function(t,e,i){/*! uuid.js
 * Copyright (c) 2010-2012 Robert Kieffer
 * MIT License - http://opensource.org/licenses/mit-license.php
 */
  !function(e){"use strict";function r(){var t=e.crypto||e.msCrypto;if(!h&&t&&t.getRandomValues)try{var i=new Uint8Array(16);l=h=function(){return t.getRandomValues(i),i},h()}catch(r){}if(!h){var n=new Array(16);p=h=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function n(){try{var t=i(33).randomBytes;u=h=t&&function(){return t(16)},h()}catch(e){}}function o(t,e,i){var r=e&&i||0,n=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){n<16&&(e[r+n++]=v[t])});n<16;)e[r+n++]=0;return e}function s(t,e){var i=e||0,r=g;return r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+"-"+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]+r[t[i++]]}function a(t,e,i){var r=e&&i||0,n=e||[];t=t||{};var o=null!=t.clockseq?t.clockseq:T,a=null!=t.msecs?t.msecs:(new Date).getTime(),c=null!=t.nsecs?t.nsecs:b+1,h=a-S+(c-b)/1e4;if(h<0&&null==t.clockseq&&(o=o+1&16383),(h<0||a>S)&&null==t.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");S=a,b=c,T=o,a+=122192928e5;var p=(1e4*(268435455&a)+c)%4294967296;n[r++]=p>>>24&255,n[r++]=p>>>16&255,n[r++]=p>>>8&255,n[r++]=255&p;var u=a/4294967296*1e4&268435455;n[r++]=u>>>8&255,n[r++]=255&u,n[r++]=u>>>24&15|16,n[r++]=u>>>16&255,n[r++]=o>>>8|128,n[r++]=255&o;for(var l=t.node||w,d=0;d<6;d++)n[r+d]=l[d];return e?e:s(n)}function c(t,e,i){var r=e&&i||0;"string"==typeof t&&(e="binary"===t?new f(16):null,t=null),t=t||{};var n=t.random||(t.rng||h)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e)for(var o=0;o<16;o++)e[r+o]=n[o];return e||s(n)}var h,p,u,l,d;e?r():n();for(var f="function"==typeof Buffer?Buffer:Array,g=[],v={},y=0;y<256;y++)g[y]=(y+256).toString(16).substr(1),v[g[y]]=y;var m=h(),w=[1|m[0],m[1],m[2],m[3],m[4],m[5]],T=16383&(m[6]<<8|m[7]),S=0,b=0,E=c;E.sl=a,E.Zh=c,E.parse=o,E.al=s,E.cl=f,E.hl=h,E.pl=p,E.ul=u,E.ll=l,"undefined"!=typeof t&&t.t?t.t=E:(d=e.dl,E.ge=function(){return e.dl=d,E},e.dl=E)}("undefined"!=typeof window?window:null)},function(t,e,i){"use strict";var r,n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(11);!function(t){var e=function(){function t(){}return t}();e.DashFilterBitrates=null,e.DashRemoveBitrateSize=!1,t.Dash=e;var i=function(){function t(){}return t}();i.fl=!0,t.Stats=i;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(o.HiveConfig.DebugLogs);r.gl=0,t.DebugLogs=r;var s=function(){function t(){}return t}();s.usiz=null,t.UDPBroadcast=s}(r=e.HiveConfig||(e.HiveConfig={})),"undefined"!=typeof window&&("undefined"==typeof window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Dash=r.Dash,window.HiveConfig.Stats=r.Stats,window.HiveConfig.UDPBroadcast=r.UDPBroadcast,window.HiveConfig.DebugLogs=r.DebugLogs)},function(t,e,i){"use strict";var r,n=i(11),o=i(4),s=o.ve;!function(t){var e;!function(t){t[t.off=0]="off",t[t.error=1]="error",t[t.warn=2]="warn",t[t.notice=3]="notice",t[t.info=4]="info",t[t.debug=5]="debug",t[t.trace=6]="trace"}(e=t.vl||(t.vl={}));var i=function(){function t(){this.timestamp=function(){},this.yl=new s,this.level=e.debug,this.timestamp.toString=function(){var t=new Date,e=("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)+":"+t.getUTCMilliseconds();return"["+e+"]"},this.m="undefined"==typeof console?{log:function(){}}:console,this.m.trace||(this.m.trace=this.m.log),this.m.debug||(this.m.debug=this.m.log),this.m.info||(this.m.info=this.m.log),this.m.warn||(this.m.warn=this.m.log),this.m.error||(this.m.error=this.m.log),this.ml(e[this.level])}return t.prototype.ml=function(t,i){n.HiveConfig.Framework.HiveDebugLevel&&void 0!=e[n.HiveConfig.Framework.HiveDebugLevel]?this.level=e[n.HiveConfig.Framework.HiveDebugLevel]:void 0!=e[t]?this.level=e[t]:console.log("Wrong logging level: "+t,e),this.wl(i)},t.prototype.wl=function(t){var i={log:this.Tl(this.m.log,e.error,t),error:this.Tl(this.m.error,e.error,t),warn:this.Tl(this.m.warn,e.warn,t),notice:this.Tl(this.m.info,e.notice,t),info:this.Tl(this.m.info,e.info,t),debug:this.Tl(this.m.debug,e.debug,t),trace:this.Tl(this.m.trace,e.trace,t)};t?this.yl.set(t,i):this.Sl=i},t.prototype.Tl=function(t,e,i){if(!(this.level>=e))return function(){};try{return n.HiveConfig.Framework.LoggerTimestamp?i?Function.prototype.bind.call(t,console,"%s %s",this.timestamp,i):Function.prototype.bind.call(t,console,"%s",this.timestamp):Function.prototype.bind.call(t,console)}catch(r){}},t.prototype.log=function(t){return t?(this.yl.has(t)||this.ml(e[this.level],t),this.yl.get(t)):this.Sl},t}();t.bl=i}(r=e.El||(e.El={}))},function(t,e,i){"use strict";var r=i(4),n=r.ve,o=i(1),s=i(2),a=i(40),c=i(49),h=i(17),p=i(11),u=i(7),l=i(42),d=i(9),f=i(37),g=i(5),v=i(50),y=i(48),m=i(27),w=i(19),T=i(20),S=i(18),b=a.pt.Ir,E=c.pt.Il,I=h.pt.uh,R=h.pt.Ch,k=h.pt.HiveTechError,C=h.pt.bh,O=h.pt.Ah;e.version="3.2.0";var P;!function(t){var r=function(){function t(t){this.Rl=[E[E.HiveJava],E[E.HiveJsProxy],E[E.HiveJS],E[E.StatsJS]],this.kl=new n,this.Cl=new Array,this.Ol=new Array,this.Pl=null,this.Al=0,this.Nl=0,this.u="[HiveComm] ",this.xl=0,this.Bl=u.ar.getItem("hivePluginId"),this.Bl||(this.Bl=Math.abs(Math.floor(68719476736*Math.random())).toString(16),u.ar.setItem("hivePluginId",this.Bl)),w.ErrorMonitor.Wi(),this.options_=new b.Fl,this._l(t),u.nr(t,this.options_),u.or(window.location.href,new b.Dl,this.options_),a.Ll.Hl(this.options_),this.fo=s.Framework.resolve(s.Framework.Fe.we),p.HiveConfig.Framework.LoggerTimestamp=this.options().loggerTimestamp,this.fo.ml(this.options().debugLevel),w.ErrorMonitor.Wi().Lh(this.fo.log());var e=s.Framework.resolve(g.gi.Ce),i=s.Framework.resolve(g.gi.ci);e.Ko().then(function(t){w.ErrorMonitor.Wi().setUser(t.Wo())});var r={};i.Pn().then(function(t){r={pIPAddr:t.Nn().Bn()},w.ErrorMonitor.Wi().setCustomData(r)}),window.vo=this.fo.log(),this.Ml(),this.jl=new O(this),new l.Ul(this);var o=this.options().idleTimePeriod>this.options().feedbackPeriod?this.options().idleTimePeriod:S.ke.xh;this.Vl=new u.vr(o)}return t.prototype.options=function(){return this.options_},t.prototype.m=function(){return this.fo.log()},t.prototype.S=function(){return this.Bl},t.prototype.ct=function(){return e.version},t.prototype.Ql=function(){for(var t=0,e=this.Ol;t<e.length;t++){var i=e[t];i.tech.ql(this)}},t.prototype._l=function(t){var e=new y.StatsJS(this,t);this.kl.set(y.StatsJS.Jl,e);var r=i(43).HiveJava;this.kl.set(r.Jl,new r(this,t));var n=t.hiveTechOrder;if(!n||n instanceof Array)if(n&&n.length>0)for(var o=n.length;o--;){var s=n[o];"string"!=typeof s||this.Rl.indexOf(s)==-1?(console.warn(this.u+'The "'+s+'" Hive tech is undefined'),n.splice(o,1)):"string"==typeof s&&this.kl.has(s)||console.warn(this.u+'The "'+s+'" Hive tech is not enabled on this plugin')}else n=this.Rl;else console.warn(this.u+"hiveTechOrder value not accepted. It must be an array of strings"),n=this.Rl;t.hiveTechOrder=n},t.prototype.p=function(t){var e=this;this.m().notice(this.u+"resolving "+t),this.Kl(t);var i=o.defer(),r=this.Gl().values();0==r.length&&i.reject(u.sr(t,I.sh));var n,s,a=!1,c=!1,h=0,p=null;return u.Xi(function(){return!a&&!c&&h<r.length&&!n},function(){var i=r[h++];i.zl();var u;return u=i.Wl()&&!s?e.$l(t):o.resolve(null),u.then(function(r){null!=r&&(s=r);var n=i.Yl();return i.initSession(t,s).timeout(n,"["+i.Ai()+"] Error: initialization timed out after "+n+"ms").then(function(t){p=t,e.Xl(p,i),a=!0,!i.Wl()&&s&&s.Qn.reset(),e.m().notice(e.u+"initializing Session:["+p.id+"] Ticket:"+p.ticket.toString()+" HiveTech:["+p.tech.Ai()+"]"),o.resolve(!0)},function(r){r instanceof Error&&(r=new k(C.Sh,r.message),i.Zl(r)),r.ticketUrl=t,c=!i.onError(r),e.m().debug(e.u+"tech "+i.Ai()+": "+r.message),o.resolve(!0)})},function(t){n=t,o.resolve(!0)})}).then(function(){n?i.reject(u.sr(t,I.ph,n)):c?i.reject(u.sr(t,I.hh)):a?i.resolve(p):i.reject(u.sr(t,I.sh))})["catch"](function(e){w.ErrorMonitor.Wi()._h(e),i.reject(u.sr(t,I.oh,e.toString()))}).done(),i.vt},t.prototype.$l=function(t){var e=this;return m.Hive.Reporting().initSession(t,!1).then(function(i){return e.m().debug(e.u+"verified ticket "+t),e.hn(i),i})["catch"](function(t){return o.reject("Ticket not verified, error: "+t.message)})},t.prototype.Gl=function(){var t=JSON.parse(JSON.stringify(this.options().hiveTechOrder)),e=new n;for(var i in t)this.kl.has(t[i])&&e.set(t[i],this.kl.get(t[i]));return e},t.prototype.Kl=function(t){var e=w.ErrorMonitor.Wi();try{var i=new T.ap;i.Kh(t),i.bn()&&i.En()&&i.es()?e.setTags([i.bn(),i.En(),i.es()]):e._h(this.u+" Ticket not valid, we could not resolve the triple partnerId/CustomerId/ContentId: "+i.bn()+"/"+i.En()+"/"+i.es())}catch(r){this.m().warn(this.u+" "+r.message,r),e.notify(r)}},t.prototype.hn=function(t){var i={commVersion:e.version,pluginName:this.T(),pluginVersion:this.I(),playerTech:this.ht(),playerVersion:this.q(),telemetryId:this.td()};t.Qn.hn(i)},t.prototype.v=function(){window.HiveRequest=XMLHttpRequest,u.HiveRequestFactory.clear(),m.Hive.Reporting().close()},t.prototype.ed=function(t){this.Pl&&this.Pl.tech?(t.sessionId=this.Pl.id,this.Pl.tech.wn(this.Pl,t)):this.Cl.push(t)},t.prototype.rd=function(){var t=this.Cl;return this.Cl=new Array,t},t.prototype.Ml=function(){var t=this,e=window;e.addEventListener?e.addEventListener("beforeunload",function(){t.nd(!0)},!1):e.attachEvent("onbeforeunload",function(){t.nd(!0)})},t.prototype.h=function(t){this.nd(t),this.Pl=null,this.Ol=new Array,this.Al=0,this.Nl=0,this.od()},t.prototype.Xl=function(t,e){t.tech=e,this.Ol.push(t)},t.prototype.R=function(t){if(null==this.Pl){for(var e=t?t:this.it(),i=0;i<this.Ol.length;i++){var r=this.Ol[i];if(r.st(e))return this.Pl=r,this.Pl.Ri?this.Pl.Ri._o.sd(this.Pl.ticket):this.ad(),this.Ol=new Array,this.Pl.tech.onActiveSession(this.Pl),this.m().notice(this.u+"activating Session:["+this.Pl.id+"] Ticket:"+this.Pl.ticket.toString()+" HiveTech:["+this.Pl.tech.Ai()+"]"),this.hd(),!0}this.m().warn(this.u+"Closing sessions - the active stream doesn't match any initialized sessions"),this.m().warn(this.u+"Active:"+e+" - initialized: "+this.Ol.length),this.h()}return!1},t.prototype.C=function(){if(this.Pl)return this.Pl.g()},t.prototype.ad=function(){var t=!1;this.Ol.forEach(function(e){e.Ri&&(t=!0)}),t&&m.Hive.Reporting().close()},t.prototype.pd=function(){if(null!=this.Pl){if(this.Pl.st(this.it()))return!0;this.m().warn(this.u+"Session src mismatch: "+this.it()+" != "+this.Pl.manifest),this.h()}return!1},t.prototype.nd=function(t){if(null!=this.Pl)this.m().notice(this.u+"Stopping session ["+this.Pl.id+"]"),this.Pl.close(t);else if(this.Ol.length>0){var e=this.Ol[0];this.m().notice(this.u+"Attempt to stopping session ["+e.id+"]"),e.close(t)}},t.prototype.hd=function(){var t=this;null==this.ud&&(this.ud=setInterval(function(){t.ld()},this.options().feedbackPeriod),this.ld())},t.prototype.od=function(){clearInterval(this.ud),this.ud=null},t.prototype.ld=function(){var t=this;if(this.pd()){if(!this.st())return void this.h();var e=new u.Fi;e.lr=this.getCurrentTime(),e.dr=this.nt(),e.gr=this.Al,e.width=this.ot().width,e.height=this.ot().height,e.dd=this.isFullscreen(),this.Pl.ki(this.Vl.hr(e)),this.Pl.tech.fd(this.Pl,e).fail(function(e){t.m().warn(t.u+"stats handling failed",e),t.od()})}},t.prototype.gd=function(){var t=this;try{u.Yi.Wi(this.m()).$i(function(e){var i=t.vd();i&&!i.Oi()&&(t._(e?d.F.B.jr:d.F.B.HIDDEN),t.m().debug(e?"visible":"hidden"))})}catch(e){w.ErrorMonitor.Wi()._h("error setting up the visibilityChange listener",{error:e})}},t.prototype.k=function(t){this.pd()&&this.Nl<=0&&(this.Nl=Date.now(),(void 0==t||t)&&this._(d.F.B.Lr))},t.prototype.G=function(){var t=0==this.Al;if(this.Nl>0){var e=Date.now()-this.Nl;return this.Al+=e,this.m().debug(this.u+"reporting new buffering event of "+e),this.Nl=0,t&&this.ld(),!0}return!1},t.prototype.onError=function(t,e,i){void 0===i&&(i=!0),this._(d.F.B.ERROR,{code:-1,"player-code":t}),i&&this.h()},t.prototype._=function(t,e){var i=this,r=this.vd();null==r||r!=this.Pl&&r.tech.Ai()===E[E.HiveJava]||r.tech.yd(r,t,e).fail(function(t){i.m().warn(i.u+"error in forwarding player event to tech",t)})},t.prototype.vd=function(){return this.Pl?this.Pl:this.Ol&&this.Ol.length>0?this.Ol[0]:void 0},t.prototype.md=function(){this.xl=0},t.prototype.wd=function(t,e){this.md();var i=7,r=6;this.xl+=t<<4*i,e&&0===t&&(this.xl+=1<<4*(r-E[e.Ai()])),t>0&&w.ErrorMonitor.Wi()._h(this.u+"Status Code Error: "+R[t])},t.prototype.Ph=function(){return this.xl},t.prototype.td=function(){return this.options().telemetryId},t}();t.Plugin=r}(P=e.pt||(e.pt={})),s.Framework.Qe(new f.Td),s.Framework.Ge("peer0",new v.Sd),s.Framework.ze("peer0"),window.HiveRequestFactory=u.HiveRequestFactory},function(t,e,i){"use strict";var r=i(45),n=i(7),o=function(){function t(t){this.readyState=3,this.status=0,t&&(this.sessionId=t)}return t.Lh=function(e){t.m=e},t.register=function(e,i){t.bd[e]=i},t.prototype.Ed=function(e){this.sessionId||(this.sessionId=t.bd[e])},t.prototype.open=function(t,e,i){void 0===i&&(i=!1),this.method=t,this.url=e,this.Id=i},t.prototype.getAllResponseHeaders=function(){return this.Rd},t.prototype.getResponseHeader=function(t){var e=this.getAllResponseHeaders();if(e){var i=[],r=e.split("\n");return r.forEach(function(t){var e=t.split(":");i[e[0]]=e[1]}),i[t]}},t.prototype.send=function(){if(t.m&&t.m.debug(this.method+" "+this.url),!this.sessionId){var e=Object.keys(t.bd);e.length>0&&(this.sessionId=t.bd[e[0]])}var i=this,o=new XMLHttpRequest;0===this.url.indexOf("//")&&(this.url=location.protocol+this.url);var s=n.rr(r.Cd.kd,r.Cd.To,r.Cd.Od,this.sessionId,encodeURIComponent(this.url));o.open("GET",s),this.responseType&&(o.responseType=this.responseType),o.onreadystatechange=function(){},o.onload=function(){if(4===o.readyState)try{i.Rd=o.getAllResponseHeaders(),i.response=o.response;var e=o.response.byteLength;"arraybuffer"!==o.responseType&&(i.responseText=o.response),i.readyState=4,i.status=o.status,i.onprogress({lengthComputable:!0,loaded:e,total:e}),i.onreadystatechange({type:"loadend",target:i,currentTarget:i,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:e,total:e}),i.onload(),i.onloadend({type:"loadend",target:i,currentTarget:i,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:e,total:0})}catch(r){t.m&&t.m.warn(r)}},o.onerror=function(e){t.m&&t.m.warn("onError: "+JSON.stringify(e)),i.onerror(e)},o.onabort=function(e){t.m&&t.m.warn("onAbort: "+JSON.stringify(e))},o.send()},t.prototype.abort=function(){},t.prototype.onload=function(){},t.prototype.onloadend=function(t){},t.prototype.onerror=function(t){},t.prototype.onprogress=function(t){},t.prototype.onreadystatechange=function(t){},t}();o.bd={},e.Ti=o},function(t,e,i){"use strict";var r=i(2),n=i(5),o=function(){function t(){}return t.Reporting=function(){return t.app="STATS",r.Framework.resolve(n.gi.ui)},t.Xo=function(){return this.app},t.getVersion=function(){return this.version},t}();o.version="3.2.0",e.Hive=o},function(t,e,i){var r;!function(n,o){"use strict";var s="0.7.12",a="",c="?",h="function",p="undefined",u="object",l="string",d="major",f="model",g="name",v="type",y="vendor",m="version",w="architecture",T="console",S="mobile",b="tablet",E="smarttv",I="wearable",R="embedded",k={extend:function(t,e){var i={};for(var r in t)e[r]&&e[r].length%2===0?i[r]=e[r].concat(t[r]):i[r]=t[r];return i},has:function(t,e){return"string"==typeof t&&e.toLowerCase().indexOf(t.toLowerCase())!==-1},Pd:function(t){return t.toLowerCase()},Ad:function(t){return typeof t===l?t.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},C={Nd:function(){for(var t,e,i,r,n,s,a,c=0,l=arguments;c<l.length&&!s;){var d=l[c],f=l[c+1];if(typeof t===p){t={};for(r in f)f.hasOwnProperty(r)&&(n=f[r],typeof n===u?t[n[0]]=o:t[n]=o)}for(e=i=0;e<d.length&&!s;)if(s=d[e++].exec(this.xd()))for(r=0;r<f.length;r++)a=s[++i],n=f[r],typeof n===u&&n.length>0?2==n.length?typeof n[1]==h?t[n[0]]=n[1].call(this,a):t[n[0]]=n[1]:3==n.length?typeof n[1]!==h||n[1].exec&&n[1].test?t[n[0]]=a?a.replace(n[1],n[2]):o:t[n[0]]=a?n[1].call(this,a,n[2]):o:4==n.length&&(t[n[0]]=a?n[3].call(this,a.replace(n[1],n[2])):o):t[n]=a?a:o;c+=2}return t},ac:function(t,e){for(var i in e)if(typeof e[i]===u&&e[i].length>0){for(var r=0;r<e[i].length;r++)if(k.has(e[i][r],t))return i===c?o:i}else if(k.has(e[i],t))return i===c?o:i;return t}},O={ti:{Bd:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419",Kp:"/"}}},Fd:{_d:{Dd:{Hd:["SD","KF"]}},Ld:{Dd:{Md:"7373KT"},vendor:{jd:"APA",Ud:"Sprint"}}},os:{Vd:{version:{Qd:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",qd:["NT 5.1","NT 5.2"],Jd:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],Kd:"ARM"}}}},P={ti:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[g,m],[/(opios)[\/\s]+([\w\.]+)/i],[[g,"Opera Mini"],m],[/\s(opr)\/([\w\.]+)/i],[[g,"Opera"],m],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[g,m],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[g,"IE"],m],[/(edge)\/((\d+)?[\w\.]+)/i],[g,m],[/(yabrowser)\/([\w\.]+)/i],[[g,"Yandex"],m],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],m],[/(micromessenger)\/([\w\.]+)/i],[[g,"WeChat"],m],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[m,[g,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[g,/(.+)/,"$1 WebView"],m],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[m,[g,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[g,m],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[g,"UCBrowser"],m],[/(dolfin)\/([\w\.]+)/i],[[g,"Dolphin"],m],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[g,"Chrome"],m],[/;fbav\/([\w\.]+);/i],[m,[g,"Facebook"]],[/fxios\/([\w\.-]+)/i],[m,[g,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[m,[g,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[m,g],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[g,[m,C.ac,O.ti.Bd.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[g,m],[/(navigator|netscape)\/([\w\.-]+)/i],[[g,"Netscape"],m],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[g,m]],Gd:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,k.Pd]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[w,/ower/,"",k.Pd]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[w,k.Pd]]],Fd:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[f,y,[v,b]],[/applecoremedia\/[\w\.]+ \((ipad)/],[f,[y,"Apple"],[v,b]],[/(apple\s{0,1}tv)/i],[[f,"Apple TV"],[y,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[y,f,[v,b]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[f,[y,"Amazon"],[v,b]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[f,C.ac,O.Fd._d.Dd],[y,"Amazon"],[v,S]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[f,y,[v,S]],[/\((ip[honed|\s\w*]+);/i],[f,[y,"Apple"],[v,S]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[y,f,[v,S]],[/\(bb10;\s(\w+)/i],[f,[y,"BlackBerry"],[v,S]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[f,[y,"Asus"],[v,b]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[y,"Sony"],[f,"Xperia Tablet"],[v,b]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[y,"Sony"],[f,"Xperia Phone"],[v,S]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[y,f,[v,T]],[/android.+;\s(shield)\sbuild/i],[f,[y,"Nvidia"],[v,T]],[/(playstation\s[34portablevi]+)/i],[f,[y,"Sony"],[v,T]],[/(sprint\s(\w+))/i],[[y,C.ac,O.Fd.Ld.vendor],[f,C.ac,O.Fd.Ld.Dd],[v,S]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[y,f,[v,b]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[y,[f,/_/g," "],[v,S]],[/(nexus\s9)/i],[f,[y,"HTC"],[v,b]],[/(nexus\s6p)/i],[f,[y,"Huawei"],[v,S]],[/(microsoft);\s(lumia[\s\w]+)/i],[y,f,[v,S]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[f,[y,"Microsoft"],[v,T]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[y,"Microsoft"],[v,S]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[f,[y,"Motorola"],[v,S]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[y,"Motorola"],[v,b]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[y,k.trim],[f,k.trim],[v,E]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[y,"Samsung"],[v,E]],[/\(dtv[\);].+(aquos)/i],[f,[y,"Sharp"],[v,E]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[y,"Samsung"],f,[v,b]],[/smart-tv.+(samsung)/i],[y,[v,E],f],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[y,"Samsung"],f,[v,S]],[/sie-(\w+)*/i],[f,[y,"Siemens"],[v,S]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[y,"Nokia"],f,[v,S]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[f,[y,"Acer"],[v,b]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[y,"LG"],f,[v,b]],[/(lg) netcast\.tv/i],[y,f,[v,E]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[f,[y,"LG"],[v,S]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[f,[y,"Lenovo"],[v,b]],[/linux;.+((jolla));/i],[y,f,[v,S]],[/((pebble))app\/[\d\.]+\s/i],[y,f,[v,I]],[/android.+;\s(glass)\s\d/i],[f,[y,"Google"],[v,I]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[f,/_/g," "],[y,"Xiaomi"],[v,S]],[/android.+a000(1)\s+build/i],[f,[y,"OnePlus"],[v,S]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[v,k.Pd],y,f]],zd:[[/windows.+\sedge\/([\w\.]+)/i],[m,[g,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[g,m],[/rv\:([\w\.]+).*(gecko)/i],[m,g]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[g,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[g,[m,C.ac,O.os.Vd.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[g,"Windows"],[m,C.ac,O.os.Vd.version]],[/\((bb)(10);/i],[[g,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[g,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[g,"Symbian"],m],[/\((series40);/i],[g],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[g,"Firefox OS"],m],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[g,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[g,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[g,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[g,m],[/(haiku)\s(\w+)/i],[g,m],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[g,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[g,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[g,m]]},A=function(t,e){if(!(this instanceof A))return new A(t,e).Wd();var i=t||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:a),r=e?k.extend(P,e):P;return this.$d=function(){var t=C.Nd.apply(this,r.ti);return t.Ad=k.Ad(t.version),t},this.Yd=function(){return C.Nd.apply(this,r.Gd)},this.Xd=function(){return C.Nd.apply(this,r.Fd)},this.Zd=function(){return C.Nd.apply(this,r.zd)},this.Rn=function(){return C.Nd.apply(this,r.os)},this.Wd=function(){return{tf:this.xd(),ti:this.$d(),zd:this.Zd(),os:this.Rn(),Fd:this.Xd(),Gd:this.Yd()}},this.xd=function(){return i},this.In=function(t){return i=t,this},this};A.VERSION=s,A.ef={"if":g,rf:d,VERSION:m},A.nf={sf:w},A.af={cf:f,VENDOR:y,hf:v,pf:T,uf:S,lf:E,df:b,ff:I,gf:R},A.vf={"if":g,VERSION:m},A.yf={"if":g,VERSION:m},typeof e!==p?(typeof t!==p&&t.t&&(e=t.t=A),e.Cr=A):"function"===h&&i(64)?(r=function(){return A}.call(e,i,e,t),!(r!==o&&(t.t=r))):n.Cr=A;var N=n.jQuery||n.Zepto;if(typeof N!==p){var x=new A;N.tf=x.Wd(),N.tf.get=function(){return x.xd()},N.tf.set=function(t){x.In(t);var e=x.Wd();for(var i in e)N.tf[i]=e[i]}}}("object"==typeof window?window:this)},function(t,e){Services={1:"REMOTE_EXECUTOR",mf:1,2:"PEER_FORWARDER",wf:2,3:"PEER_INDEX",Tf:3,4:"PEER_BROADCAST",Sf:4,5:"PEER_FILTER",bf:5,6:"PEER_LOGGING",Ef:6,7:"HIVEJS_TRACKER",If:7,8:"PEER_SYSTEM",Rf:8,9:"HIVEJS_SNAPSHOTS",to:9,10:"HIVEJS_TICKETS",kf:10,11:"HIVEJS_KEEPALIVE",Cf:11,12:"HIVEJS_FORWARDING",Of:12}},function(t,e,i){var r=i(16);StreamType={1:"LIVE",LIVE:1,2:"VOD",Pf:2},StreamProtocol={1:"DASH",rt:1,2:"HDS",Af:2,3:"HLS",Y:3,4:"SS",Nf:4},ClientType={1:"JAVA",xf:1,2:"STATS_ONLY",Bf:2,3:"JS_DIRECT",Ff:3,4:"JS_PROXY",_f:4},EventId=function(t){this.partnerId=null,this.customerId=null,this.contentId=null,this.tags=null,t&&(void 0!==t.partnerId&&(this.partnerId=t.partnerId),void 0!==t.customerId&&(this.customerId=t.customerId),void 0!==t.contentId&&(this.contentId=t.contentId),void 0!==t.tags&&(this.tags=t.tags))},EventId.prototype={},EventId.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.As?this.partnerId=t.ha().value:t.pa(i);break;case 2:i==r.bs.As?this.customerId=t.ha().value:t.pa(i);break;case 3:i==r.bs.As?this.contentId=t.ha().value:t.pa(i);break;case 4:if(i==r.bs._s){var o,s=0;this.tags=[];var a=0;o=t.Vc(),a=o.Qc,s=o.size;for(var c=0;c<s;++c){var h=null;h=t.ha().value,this.tags.push(h)}t.qc()}else t.pa(i);break;default:t.pa(i)}t.la()}t.da()},EventId.prototype.write=function(t){if(t.fa("EventId"),null!==this.partnerId&&void 0!==this.partnerId&&(t.ga("partnerId",r.bs.As,1),t.va(this.partnerId),t.ya()),null!==this.customerId&&void 0!==this.customerId&&(t.ga("customerId",r.bs.As,2),t.va(this.customerId),t.ya()),null!==this.contentId&&void 0!==this.contentId&&(t.ga("contentId",r.bs.As,3),t.va(this.contentId),t.ya()),null!==this.tags&&void 0!==this.tags){t.ga("tags",r.bs._s,4),t.Tc(r.bs.As,this.tags.length);for(var e in this.tags)this.tags.hasOwnProperty(e)&&(e=this.tags[e],t.va(e));t.Sc(),t.ya()}t.wa(),t.Ta()},SnapshotInfo=function(t){this.timestamp=null,this.apiServer=null,this.clientIp=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.apiServer&&(this.apiServer=t.apiServer),void 0!==t.clientIp&&(this.clientIp=t.clientIp))},SnapshotInfo.prototype={},SnapshotInfo.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Ps?this.timestamp=t.$c().value:t.pa(i);break;case 2:i==r.bs.As?this.apiServer=t.ha().value:t.pa(i);break;case 3:i==r.bs.As?this.clientIp=t.ha().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},SnapshotInfo.prototype.write=function(t){t.fa("SnapshotInfo"),null!==this.timestamp&&void 0!==this.timestamp&&(t.ga("timestamp",r.bs.Ps,1),t.Cc(this.timestamp),t.ya()),null!==this.apiServer&&void 0!==this.apiServer&&(t.ga("apiServer",r.bs.As,2),t.va(this.apiServer),t.ya()),null!==this.clientIp&&void 0!==this.clientIp&&(t.ga("clientIp",r.bs.As,3),t.va(this.clientIp),t.ya()),t.wa(),t.Ta()},InetAddress=function(t){this.address=null,this.port=null,t&&(void 0!==t.address&&(this.address=t.address),void 0!==t.port&&(this.port=t.port))},InetAddress.prototype={},InetAddress.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.As?this.address=t.Xc().value:t.pa(i);break;case 2:i==r.bs.Os?this.port=t.ua().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},InetAddress.prototype.write=function(t){t.fa("InetAddress"),null!==this.address&&void 0!==this.address&&(t.ga("address",r.bs.As,1),t.Pc(this.address),t.ya()),null!==this.port&&void 0!==this.port&&(t.ga("port",r.bs.Os,2),t.ma(this.port),t.ya()),t.wa(),t.Ta()}},function(t,e,i){var r=i(16);"undefined"==typeof hive&&(hive={}),"undefined"==typeof hive.snapshots&&(hive.snapshots={}),hive.snapshots.Traffic=function(t){this.reqN=null,this.respFallbackN=null,this.respFallbackErrN=null,this.respP2pN=null,this.reqOtherN=null,this.respFallbackOtherN=null,this.respFallbackOthertErrN=null,this.srcReqN=null,this.srcRespN=null,this.srcRespErrN=null,this.srcReqQt=null,this.srcRespQt=null,this.srcOverQt=null,this.srcOtherReqN=null,this.srcOtherRespN=null,this.srcOtherRespErrN=null,this.srcOtherReqQt=null,this.srcOtherRespQt=null,this.srcOtherOverQt=null,this.p2pSubReqN=null,this.p2pSubRespN=null,this.p2pSubRespPartN=null,this.p2pSubRespErrN=null,this.p2pSubRespExpN=null,this.p2pSubReqQt=null,this.p2pSubRespQt=null,this.p2pDirectQt=null,this.p2pRelayQt=null,this.p2pNatQt=null,this.p2pUdpbQt=null,this.fallAgentRespN=null,this.fallAgentPredHitN=null,this.fallAgentFailedRespN=null,this.fallAgentPredMissN=null,this.fallAgentPredPartialHitN=null,this.fallAgenTrafficSuccessQt=null,this.fallAgenTrafficFailureQt=null,this.p2pAgentPredHitN=null,this.p2pAgentPredMissN=null,this.p2pAgentPredPartialHitN=null,this.p2pAgenTrafficSuccessQt=null,this.p2pAgenTrafficFailureQt=null,this.respP2pOtherN=null,this.lCacheRespN=null,this.lCacheRespQt=null,this.p2pOutSiteLowPrio=null,t&&(void 0!==t.reqN&&(this.reqN=t.reqN),void 0!==t.respFallbackN&&(this.respFallbackN=t.respFallbackN),void 0!==t.respFallbackErrN&&(this.respFallbackErrN=t.respFallbackErrN),void 0!==t.respP2pN&&(this.respP2pN=t.respP2pN),void 0!==t.reqOtherN&&(this.reqOtherN=t.reqOtherN),void 0!==t.respFallbackOtherN&&(this.respFallbackOtherN=t.respFallbackOtherN),void 0!==t.respFallbackOthertErrN&&(this.respFallbackOthertErrN=t.respFallbackOthertErrN),void 0!==t.srcReqN&&(this.srcReqN=t.srcReqN),void 0!==t.srcRespN&&(this.srcRespN=t.srcRespN),void 0!==t.srcRespErrN&&(this.srcRespErrN=t.srcRespErrN),void 0!==t.srcReqQt&&(this.srcReqQt=t.srcReqQt),void 0!==t.srcRespQt&&(this.srcRespQt=t.srcRespQt),void 0!==t.srcOverQt&&(this.srcOverQt=t.srcOverQt),void 0!==t.srcOtherReqN&&(this.srcOtherReqN=t.srcOtherReqN),void 0!==t.srcOtherRespN&&(this.srcOtherRespN=t.srcOtherRespN),void 0!==t.srcOtherRespErrN&&(this.srcOtherRespErrN=t.srcOtherRespErrN),void 0!==t.srcOtherReqQt&&(this.srcOtherReqQt=t.srcOtherReqQt),void 0!==t.srcOtherRespQt&&(this.srcOtherRespQt=t.srcOtherRespQt),void 0!==t.srcOtherOverQt&&(this.srcOtherOverQt=t.srcOtherOverQt),
void 0!==t.p2pSubReqN&&(this.p2pSubReqN=t.p2pSubReqN),void 0!==t.p2pSubRespN&&(this.p2pSubRespN=t.p2pSubRespN),void 0!==t.p2pSubRespPartN&&(this.p2pSubRespPartN=t.p2pSubRespPartN),void 0!==t.p2pSubRespErrN&&(this.p2pSubRespErrN=t.p2pSubRespErrN),void 0!==t.p2pSubRespExpN&&(this.p2pSubRespExpN=t.p2pSubRespExpN),void 0!==t.p2pSubReqQt&&(this.p2pSubReqQt=t.p2pSubReqQt),void 0!==t.p2pSubRespQt&&(this.p2pSubRespQt=t.p2pSubRespQt),void 0!==t.p2pDirectQt&&(this.p2pDirectQt=t.p2pDirectQt),void 0!==t.p2pRelayQt&&(this.p2pRelayQt=t.p2pRelayQt),void 0!==t.p2pNatQt&&(this.p2pNatQt=t.p2pNatQt),void 0!==t.p2pUdpbQt&&(this.p2pUdpbQt=t.p2pUdpbQt),void 0!==t.fallAgentRespN&&(this.fallAgentRespN=t.fallAgentRespN),void 0!==t.fallAgentPredHitN&&(this.fallAgentPredHitN=t.fallAgentPredHitN),void 0!==t.fallAgentFailedRespN&&(this.fallAgentFailedRespN=t.fallAgentFailedRespN),void 0!==t.fallAgentPredMissN&&(this.fallAgentPredMissN=t.fallAgentPredMissN),void 0!==t.fallAgentPredPartialHitN&&(this.fallAgentPredPartialHitN=t.fallAgentPredPartialHitN),void 0!==t.fallAgenTrafficSuccessQt&&(this.fallAgenTrafficSuccessQt=t.fallAgenTrafficSuccessQt),void 0!==t.fallAgenTrafficFailureQt&&(this.fallAgenTrafficFailureQt=t.fallAgenTrafficFailureQt),void 0!==t.p2pAgentPredHitN&&(this.p2pAgentPredHitN=t.p2pAgentPredHitN),void 0!==t.p2pAgentPredMissN&&(this.p2pAgentPredMissN=t.p2pAgentPredMissN),void 0!==t.p2pAgentPredPartialHitN&&(this.p2pAgentPredPartialHitN=t.p2pAgentPredPartialHitN),void 0!==t.p2pAgenTrafficSuccessQt&&(this.p2pAgenTrafficSuccessQt=t.p2pAgenTrafficSuccessQt),void 0!==t.p2pAgenTrafficFailureQt&&(this.p2pAgenTrafficFailureQt=t.p2pAgenTrafficFailureQt),void 0!==t.respP2pOtherN&&(this.respP2pOtherN=t.respP2pOtherN),void 0!==t.lCacheRespN&&(this.lCacheRespN=t.lCacheRespN),void 0!==t.lCacheRespQt&&(this.lCacheRespQt=t.lCacheRespQt),void 0!==t.p2pOutSiteLowPrio&&(this.p2pOutSiteLowPrio=t.p2pOutSiteLowPrio))},hive.snapshots.Traffic.prototype={},hive.snapshots.Traffic.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Os?this.reqN=t.ua().value:t.pa(i);break;case 2:i==r.bs.ks?this.respFallbackN=t.Yc().value:t.pa(i);break;case 3:i==r.bs.Os?this.respFallbackErrN=t.ua().value:t.pa(i);break;case 4:i==r.bs.ks?this.respP2pN=t.Yc().value:t.pa(i);break;case 5:i==r.bs.Os?this.reqOtherN=t.ua().value:t.pa(i);break;case 6:i==r.bs.Os?this.respFallbackOtherN=t.ua().value:t.pa(i);break;case 7:i==r.bs.Os?this.respFallbackOthertErrN=t.ua().value:t.pa(i);break;case 8:i==r.bs.Os?this.srcReqN=t.ua().value:t.pa(i);break;case 9:i==r.bs.Os?this.srcRespN=t.ua().value:t.pa(i);break;case 10:i==r.bs.Os?this.srcRespErrN=t.ua().value:t.pa(i);break;case 11:i==r.bs.Ps?this.srcReqQt=t.$c().value:t.pa(i);break;case 12:i==r.bs.Ps?this.srcRespQt=t.$c().value:t.pa(i);break;case 13:i==r.bs.Ps?this.srcOverQt=t.$c().value:t.pa(i);break;case 14:i==r.bs.Os?this.srcOtherReqN=t.ua().value:t.pa(i);break;case 15:i==r.bs.Os?this.srcOtherRespN=t.ua().value:t.pa(i);break;case 16:i==r.bs.Os?this.srcOtherRespErrN=t.ua().value:t.pa(i);break;case 17:i==r.bs.Ps?this.srcOtherReqQt=t.$c().value:t.pa(i);break;case 18:i==r.bs.Ps?this.srcOtherRespQt=t.$c().value:t.pa(i);break;case 19:i==r.bs.Ps?this.srcOtherOverQt=t.$c().value:t.pa(i);break;case 20:i==r.bs.Os?this.p2pSubReqN=t.ua().value:t.pa(i);break;case 21:i==r.bs.Os?this.p2pSubRespN=t.ua().value:t.pa(i);break;case 22:i==r.bs.ks?this.p2pSubRespPartN=t.Yc().value:t.pa(i);break;case 23:i==r.bs.ks?this.p2pSubRespErrN=t.Yc().value:t.pa(i);break;case 24:i==r.bs.Os?this.p2pSubRespExpN=t.ua().value:t.pa(i);break;case 25:i==r.bs.Ps?this.p2pSubReqQt=t.$c().value:t.pa(i);break;case 26:i==r.bs.Ps?this.p2pSubRespQt=t.$c().value:t.pa(i);break;case 27:i==r.bs.Ps?this.p2pDirectQt=t.$c().value:t.pa(i);break;case 28:i==r.bs.Ps?this.p2pRelayQt=t.$c().value:t.pa(i);break;case 29:i==r.bs.Ps?this.p2pNatQt=t.$c().value:t.pa(i);break;case 30:i==r.bs.Ps?this.p2pUdpbQt=t.$c().value:t.pa(i);break;case 31:i==r.bs.Os?this.fallAgentRespN=t.ua().value:t.pa(i);break;case 32:i==r.bs.Os?this.fallAgentPredHitN=t.ua().value:t.pa(i);break;case 33:i==r.bs.Os?this.fallAgentFailedRespN=t.ua().value:t.pa(i);break;case 34:i==r.bs.Os?this.fallAgentPredMissN=t.ua().value:t.pa(i);break;case 35:i==r.bs.Os?this.fallAgentPredPartialHitN=t.ua().value:t.pa(i);break;case 36:i==r.bs.Ps?this.fallAgenTrafficSuccessQt=t.$c().value:t.pa(i);break;case 37:i==r.bs.Ps?this.fallAgenTrafficFailureQt=t.$c().value:t.pa(i);break;case 38:i==r.bs.Os?this.p2pAgentPredHitN=t.ua().value:t.pa(i);break;case 39:i==r.bs.Os?this.p2pAgentPredMissN=t.ua().value:t.pa(i);break;case 40:i==r.bs.Os?this.p2pAgentPredPartialHitN=t.ua().value:t.pa(i);break;case 41:i==r.bs.Ps?this.p2pAgenTrafficSuccessQt=t.$c().value:t.pa(i);break;case 42:i==r.bs.Ps?this.p2pAgenTrafficFailureQt=t.$c().value:t.pa(i);break;case 43:i==r.bs.Os?this.respP2pOtherN=t.ua().value:t.pa(i);break;case 44:i==r.bs.Os?this.lCacheRespN=t.ua().value:t.pa(i);break;case 45:i==r.bs.Ps?this.lCacheRespQt=t.$c().value:t.pa(i);break;case 46:i==r.bs.Ps?this.p2pOutSiteLowPrio=t.$c().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.Traffic.prototype.write=function(t){t.fa("Traffic"),null!==this.reqN&&void 0!==this.reqN&&(t.ga("reqN",r.bs.Os,1),t.ma(this.reqN),t.ya()),null!==this.respFallbackN&&void 0!==this.respFallbackN&&(t.ga("respFallbackN",r.bs.ks,2),t.Oc(this.respFallbackN),t.ya()),null!==this.respFallbackErrN&&void 0!==this.respFallbackErrN&&(t.ga("respFallbackErrN",r.bs.Os,3),t.ma(this.respFallbackErrN),t.ya()),null!==this.respP2pN&&void 0!==this.respP2pN&&(t.ga("respP2pN",r.bs.ks,4),t.Oc(this.respP2pN),t.ya()),null!==this.reqOtherN&&void 0!==this.reqOtherN&&(t.ga("reqOtherN",r.bs.Os,5),t.ma(this.reqOtherN),t.ya()),null!==this.respFallbackOtherN&&void 0!==this.respFallbackOtherN&&(t.ga("respFallbackOtherN",r.bs.Os,6),t.ma(this.respFallbackOtherN),t.ya()),null!==this.respFallbackOthertErrN&&void 0!==this.respFallbackOthertErrN&&(t.ga("respFallbackOthertErrN",r.bs.Os,7),t.ma(this.respFallbackOthertErrN),t.ya()),null!==this.srcReqN&&void 0!==this.srcReqN&&(t.ga("srcReqN",r.bs.Os,8),t.ma(this.srcReqN),t.ya()),null!==this.srcRespN&&void 0!==this.srcRespN&&(t.ga("srcRespN",r.bs.Os,9),t.ma(this.srcRespN),t.ya()),null!==this.srcRespErrN&&void 0!==this.srcRespErrN&&(t.ga("srcRespErrN",r.bs.Os,10),t.ma(this.srcRespErrN),t.ya()),null!==this.srcReqQt&&void 0!==this.srcReqQt&&(t.ga("srcReqQt",r.bs.Ps,11),t.Cc(this.srcReqQt),t.ya()),null!==this.srcRespQt&&void 0!==this.srcRespQt&&(t.ga("srcRespQt",r.bs.Ps,12),t.Cc(this.srcRespQt),t.ya()),null!==this.srcOverQt&&void 0!==this.srcOverQt&&(t.ga("srcOverQt",r.bs.Ps,13),t.Cc(this.srcOverQt),t.ya()),null!==this.srcOtherReqN&&void 0!==this.srcOtherReqN&&(t.ga("srcOtherReqN",r.bs.Os,14),t.ma(this.srcOtherReqN),t.ya()),null!==this.srcOtherRespN&&void 0!==this.srcOtherRespN&&(t.ga("srcOtherRespN",r.bs.Os,15),t.ma(this.srcOtherRespN),t.ya()),null!==this.srcOtherRespErrN&&void 0!==this.srcOtherRespErrN&&(t.ga("srcOtherRespErrN",r.bs.Os,16),t.ma(this.srcOtherRespErrN),t.ya()),null!==this.srcOtherReqQt&&void 0!==this.srcOtherReqQt&&(t.ga("srcOtherReqQt",r.bs.Ps,17),t.Cc(this.srcOtherReqQt),t.ya()),null!==this.srcOtherRespQt&&void 0!==this.srcOtherRespQt&&(t.ga("srcOtherRespQt",r.bs.Ps,18),t.Cc(this.srcOtherRespQt),t.ya()),null!==this.srcOtherOverQt&&void 0!==this.srcOtherOverQt&&(t.ga("srcOtherOverQt",r.bs.Ps,19),t.Cc(this.srcOtherOverQt),t.ya()),null!==this.p2pSubReqN&&void 0!==this.p2pSubReqN&&(t.ga("p2pSubReqN",r.bs.Os,20),t.ma(this.p2pSubReqN),t.ya()),null!==this.p2pSubRespN&&void 0!==this.p2pSubRespN&&(t.ga("p2pSubRespN",r.bs.Os,21),t.ma(this.p2pSubRespN),t.ya()),null!==this.p2pSubRespPartN&&void 0!==this.p2pSubRespPartN&&(t.ga("p2pSubRespPartN",r.bs.ks,22),t.Oc(this.p2pSubRespPartN),t.ya()),null!==this.p2pSubRespErrN&&void 0!==this.p2pSubRespErrN&&(t.ga("p2pSubRespErrN",r.bs.ks,23),t.Oc(this.p2pSubRespErrN),t.ya()),null!==this.p2pSubRespExpN&&void 0!==this.p2pSubRespExpN&&(t.ga("p2pSubRespExpN",r.bs.Os,24),t.ma(this.p2pSubRespExpN),t.ya()),null!==this.p2pSubReqQt&&void 0!==this.p2pSubReqQt&&(t.ga("p2pSubReqQt",r.bs.Ps,25),t.Cc(this.p2pSubReqQt),t.ya()),null!==this.p2pSubRespQt&&void 0!==this.p2pSubRespQt&&(t.ga("p2pSubRespQt",r.bs.Ps,26),t.Cc(this.p2pSubRespQt),t.ya()),null!==this.p2pDirectQt&&void 0!==this.p2pDirectQt&&(t.ga("p2pDirectQt",r.bs.Ps,27),t.Cc(this.p2pDirectQt),t.ya()),null!==this.p2pRelayQt&&void 0!==this.p2pRelayQt&&(t.ga("p2pRelayQt",r.bs.Ps,28),t.Cc(this.p2pRelayQt),t.ya()),null!==this.p2pNatQt&&void 0!==this.p2pNatQt&&(t.ga("p2pNatQt",r.bs.Ps,29),t.Cc(this.p2pNatQt),t.ya()),null!==this.p2pUdpbQt&&void 0!==this.p2pUdpbQt&&(t.ga("p2pUdpbQt",r.bs.Ps,30),t.Cc(this.p2pUdpbQt),t.ya()),null!==this.fallAgentRespN&&void 0!==this.fallAgentRespN&&(t.ga("fallAgentRespN",r.bs.Os,31),t.ma(this.fallAgentRespN),t.ya()),null!==this.fallAgentPredHitN&&void 0!==this.fallAgentPredHitN&&(t.ga("fallAgentPredHitN",r.bs.Os,32),t.ma(this.fallAgentPredHitN),t.ya()),null!==this.fallAgentFailedRespN&&void 0!==this.fallAgentFailedRespN&&(t.ga("fallAgentFailedRespN",r.bs.Os,33),t.ma(this.fallAgentFailedRespN),t.ya()),null!==this.fallAgentPredMissN&&void 0!==this.fallAgentPredMissN&&(t.ga("fallAgentPredMissN",r.bs.Os,34),t.ma(this.fallAgentPredMissN),t.ya()),null!==this.fallAgentPredPartialHitN&&void 0!==this.fallAgentPredPartialHitN&&(t.ga("fallAgentPredPartialHitN",r.bs.Os,35),t.ma(this.fallAgentPredPartialHitN),t.ya()),null!==this.fallAgenTrafficSuccessQt&&void 0!==this.fallAgenTrafficSuccessQt&&(t.ga("fallAgenTrafficSuccessQt",r.bs.Ps,36),t.Cc(this.fallAgenTrafficSuccessQt),t.ya()),null!==this.fallAgenTrafficFailureQt&&void 0!==this.fallAgenTrafficFailureQt&&(t.ga("fallAgenTrafficFailureQt",r.bs.Ps,37),t.Cc(this.fallAgenTrafficFailureQt),t.ya()),null!==this.p2pAgentPredHitN&&void 0!==this.p2pAgentPredHitN&&(t.ga("p2pAgentPredHitN",r.bs.Os,38),t.ma(this.p2pAgentPredHitN),t.ya()),null!==this.p2pAgentPredMissN&&void 0!==this.p2pAgentPredMissN&&(t.ga("p2pAgentPredMissN",r.bs.Os,39),t.ma(this.p2pAgentPredMissN),t.ya()),null!==this.p2pAgentPredPartialHitN&&void 0!==this.p2pAgentPredPartialHitN&&(t.ga("p2pAgentPredPartialHitN",r.bs.Os,40),t.ma(this.p2pAgentPredPartialHitN),t.ya()),null!==this.p2pAgenTrafficSuccessQt&&void 0!==this.p2pAgenTrafficSuccessQt&&(t.ga("p2pAgenTrafficSuccessQt",r.bs.Ps,41),t.Cc(this.p2pAgenTrafficSuccessQt),t.ya()),null!==this.p2pAgenTrafficFailureQt&&void 0!==this.p2pAgenTrafficFailureQt&&(t.ga("p2pAgenTrafficFailureQt",r.bs.Ps,42),t.Cc(this.p2pAgenTrafficFailureQt),t.ya()),null!==this.respP2pOtherN&&void 0!==this.respP2pOtherN&&(t.ga("respP2pOtherN",r.bs.Os,43),t.ma(this.respP2pOtherN),t.ya()),null!==this.lCacheRespN&&void 0!==this.lCacheRespN&&(t.ga("lCacheRespN",r.bs.Os,44),t.ma(this.lCacheRespN),t.ya()),null!==this.lCacheRespQt&&void 0!==this.lCacheRespQt&&(t.ga("lCacheRespQt",r.bs.Ps,45),t.Cc(this.lCacheRespQt),t.ya()),null!==this.p2pOutSiteLowPrio&&void 0!==this.p2pOutSiteLowPrio&&(t.ga("p2pOutSiteLowPrio",r.bs.Ps,46),t.Cc(this.p2pOutSiteLowPrio),t.ya()),t.wa(),t.Ta()},hive.snapshots.Metrics=function(t){this.upBW=null,this.downBW=null,this.memN=null,this.prtInN=null,this.prtOutN=null,this.initVideoBufQt=null,this.videoAvgBufQt=null,this.videoBufQt=null,this.videoBufN=null,this.initAudioBufQt=null,this.audioAvgBufQt=null,this.audioBufQt=null,this.audioBufN=null,this.bitrateUpN=null,this.bitrateDwnN=null,this.delay=null,this.delayEnforcement=null,this.lookupReqEstablished=null,this.lookupReqAccept=null,this.fallbackAvgTp=null,this.srcThroughput=null,this.diskReadTimeout=null,this.diskReadRate=null,this.diskStoreRate=null,this.diskRemoveRate=null,this.diskCacheSize=null,this.clientBufferMs=null,this.lookupTotal=null,this.lookupNotFound=null,this.lookupFailed=null,this.lookupLatency=null,this.trackerFailed=null,this.trackerLatency=null,this.snapshotFailed=null,this.snapshotLatency=null,t&&(void 0!==t.upBW&&(this.upBW=t.upBW),void 0!==t.downBW&&(this.downBW=t.downBW),void 0!==t.memN&&(this.memN=t.memN),void 0!==t.prtInN&&(this.prtInN=t.prtInN),void 0!==t.prtOutN&&(this.prtOutN=t.prtOutN),void 0!==t.initVideoBufQt&&(this.initVideoBufQt=t.initVideoBufQt),void 0!==t.videoAvgBufQt&&(this.videoAvgBufQt=t.videoAvgBufQt),void 0!==t.videoBufQt&&(this.videoBufQt=t.videoBufQt),void 0!==t.videoBufN&&(this.videoBufN=t.videoBufN),void 0!==t.initAudioBufQt&&(this.initAudioBufQt=t.initAudioBufQt),void 0!==t.audioAvgBufQt&&(this.audioAvgBufQt=t.audioAvgBufQt),void 0!==t.audioBufQt&&(this.audioBufQt=t.audioBufQt),void 0!==t.audioBufN&&(this.audioBufN=t.audioBufN),void 0!==t.bitrateUpN&&(this.bitrateUpN=t.bitrateUpN),void 0!==t.bitrateDwnN&&(this.bitrateDwnN=t.bitrateDwnN),void 0!==t.delay&&(this.delay=t.delay),void 0!==t.delayEnforcement&&(this.delayEnforcement=t.delayEnforcement),void 0!==t.lookupReqEstablished&&(this.lookupReqEstablished=t.lookupReqEstablished),void 0!==t.lookupReqAccept&&(this.lookupReqAccept=t.lookupReqAccept),void 0!==t.fallbackAvgTp&&(this.fallbackAvgTp=t.fallbackAvgTp),void 0!==t.srcThroughput&&(this.srcThroughput=t.srcThroughput),void 0!==t.diskReadTimeout&&(this.diskReadTimeout=t.diskReadTimeout),void 0!==t.diskReadRate&&(this.diskReadRate=t.diskReadRate),void 0!==t.diskStoreRate&&(this.diskStoreRate=t.diskStoreRate),void 0!==t.diskRemoveRate&&(this.diskRemoveRate=t.diskRemoveRate),void 0!==t.diskCacheSize&&(this.diskCacheSize=t.diskCacheSize),void 0!==t.clientBufferMs&&(this.clientBufferMs=t.clientBufferMs),void 0!==t.lookupTotal&&(this.lookupTotal=t.lookupTotal),void 0!==t.lookupNotFound&&(this.lookupNotFound=t.lookupNotFound),void 0!==t.lookupFailed&&(this.lookupFailed=t.lookupFailed),void 0!==t.lookupLatency&&(this.lookupLatency=t.lookupLatency),void 0!==t.trackerFailed&&(this.trackerFailed=t.trackerFailed),void 0!==t.trackerLatency&&(this.trackerLatency=t.trackerLatency),void 0!==t.snapshotFailed&&(this.snapshotFailed=t.snapshotFailed),void 0!==t.snapshotLatency&&(this.snapshotLatency=t.snapshotLatency))},hive.snapshots.Metrics.prototype={},hive.snapshots.Metrics.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Os?this.upBW=t.ua().value:t.pa(i);break;case 2:i==r.bs.Os?this.downBW=t.ua().value:t.pa(i);break;case 3:i==r.bs.Os?this.memN=t.ua().value:t.pa(i);break;case 4:i==r.bs.Os?this.prtInN=t.ua().value:t.pa(i);break;case 5:i==r.bs.Os?this.prtOutN=t.ua().value:t.pa(i);break;case 6:i==r.bs.Ps?this.initVideoBufQt=t.$c().value:t.pa(i);break;case 7:i==r.bs.ks?this.videoAvgBufQt=t.Yc().value:t.pa(i);break;case 8:i==r.bs.Ps?this.videoBufQt=t.$c().value:t.pa(i);break;case 9:i==r.bs.Os?this.videoBufN=t.ua().value:t.pa(i);break;case 10:i==r.bs.Os?this.initAudioBufQt=t.ua().value:t.pa(i);break;case 11:i==r.bs.ks?this.audioAvgBufQt=t.Yc().value:t.pa(i);break;case 12:i==r.bs.Ps?this.audioBufQt=t.$c().value:t.pa(i);break;case 13:i==r.bs.Os?this.audioBufN=t.ua().value:t.pa(i);break;case 14:i==r.bs.Os?this.bitrateUpN=t.ua().value:t.pa(i);break;case 15:i==r.bs.Os?this.bitrateDwnN=t.ua().value:t.pa(i);break;case 16:i==r.bs.Os?this.delay=t.ua().value:t.pa(i);break;case 17:i==r.bs.Os?this.delayEnforcement=t.ua().value:t.pa(i);break;case 18:i==r.bs.Os?this.lookupReqEstablished=t.ua().value:t.pa(i);break;case 19:i==r.bs.Os?this.lookupReqAccept=t.ua().value:t.pa(i);break;case 20:i==r.bs.ks?this.fallbackAvgTp=t.Yc().value:t.pa(i);break;case 21:i==r.bs.ks?this.srcThroughput=t.Yc().value:t.pa(i);break;case 22:i==r.bs.Os?this.diskReadTimeout=t.ua().value:t.pa(i);break;case 23:i==r.bs.ks?this.diskReadRate=t.Yc().value:t.pa(i);break;case 24:i==r.bs.ks?this.diskStoreRate=t.Yc().value:t.pa(i);break;case 25:i==r.bs.ks?this.diskRemoveRate=t.Yc().value:t.pa(i);break;case 26:i==r.bs.Ps?this.diskCacheSize=t.$c().value:t.pa(i);break;case 27:i==r.bs.Os?this.clientBufferMs=t.ua().value:t.pa(i);break;case 28:i==r.bs.Os?this.lookupTotal=t.ua().value:t.pa(i);break;case 29:i==r.bs.Os?this.lookupNotFound=t.ua().value:t.pa(i);break;case 30:i==r.bs.Os?this.lookupFailed=t.ua().value:t.pa(i);break;case 31:i==r.bs.Os?this.lookupLatency=t.ua().value:t.pa(i);break;case 32:i==r.bs.Os?this.trackerFailed=t.ua().value:t.pa(i);break;case 33:i==r.bs.Os?this.trackerLatency=t.ua().value:t.pa(i);break;case 34:i==r.bs.Os?this.snapshotFailed=t.ua().value:t.pa(i);break;case 35:i==r.bs.Os?this.snapshotLatency=t.ua().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.Metrics.prototype.write=function(t){t.fa("Metrics"),null!==this.upBW&&void 0!==this.upBW&&(t.ga("upBW",r.bs.Os,1),t.ma(this.upBW),t.ya()),null!==this.downBW&&void 0!==this.downBW&&(t.ga("downBW",r.bs.Os,2),t.ma(this.downBW),t.ya()),null!==this.memN&&void 0!==this.memN&&(t.ga("memN",r.bs.Os,3),t.ma(this.memN),t.ya()),null!==this.prtInN&&void 0!==this.prtInN&&(t.ga("prtInN",r.bs.Os,4),t.ma(this.prtInN),t.ya()),null!==this.prtOutN&&void 0!==this.prtOutN&&(t.ga("prtOutN",r.bs.Os,5),t.ma(this.prtOutN),t.ya()),null!==this.initVideoBufQt&&void 0!==this.initVideoBufQt&&(t.ga("initVideoBufQt",r.bs.Ps,6),t.Cc(this.initVideoBufQt),t.ya()),null!==this.videoAvgBufQt&&void 0!==this.videoAvgBufQt&&(t.ga("videoAvgBufQt",r.bs.ks,7),t.Oc(this.videoAvgBufQt),t.ya()),null!==this.videoBufQt&&void 0!==this.videoBufQt&&(t.ga("videoBufQt",r.bs.Ps,8),t.Cc(this.videoBufQt),t.ya()),null!==this.videoBufN&&void 0!==this.videoBufN&&(t.ga("videoBufN",r.bs.Os,9),t.ma(this.videoBufN),t.ya()),null!==this.initAudioBufQt&&void 0!==this.initAudioBufQt&&(t.ga("initAudioBufQt",r.bs.Os,10),t.ma(this.initAudioBufQt),t.ya()),null!==this.audioAvgBufQt&&void 0!==this.audioAvgBufQt&&(t.ga("audioAvgBufQt",r.bs.ks,11),t.Oc(this.audioAvgBufQt),t.ya()),null!==this.audioBufQt&&void 0!==this.audioBufQt&&(t.ga("audioBufQt",r.bs.Ps,12),t.Cc(this.audioBufQt),t.ya()),null!==this.audioBufN&&void 0!==this.audioBufN&&(t.ga("audioBufN",r.bs.Os,13),t.ma(this.audioBufN),t.ya()),null!==this.bitrateUpN&&void 0!==this.bitrateUpN&&(t.ga("bitrateUpN",r.bs.Os,14),t.ma(this.bitrateUpN),t.ya()),null!==this.bitrateDwnN&&void 0!==this.bitrateDwnN&&(t.ga("bitrateDwnN",r.bs.Os,15),t.ma(this.bitrateDwnN),t.ya()),null!==this.delay&&void 0!==this.delay&&(t.ga("delay",r.bs.Os,16),t.ma(this.delay),t.ya()),null!==this.delayEnforcement&&void 0!==this.delayEnforcement&&(t.ga("delayEnforcement",r.bs.Os,17),t.ma(this.delayEnforcement),t.ya()),null!==this.lookupReqEstablished&&void 0!==this.lookupReqEstablished&&(t.ga("lookupReqEstablished",r.bs.Os,18),t.ma(this.lookupReqEstablished),t.ya()),null!==this.lookupReqAccept&&void 0!==this.lookupReqAccept&&(t.ga("lookupReqAccept",r.bs.Os,19),t.ma(this.lookupReqAccept),t.ya()),null!==this.fallbackAvgTp&&void 0!==this.fallbackAvgTp&&(t.ga("fallbackAvgTp",r.bs.ks,20),t.Oc(this.fallbackAvgTp),t.ya()),null!==this.srcThroughput&&void 0!==this.srcThroughput&&(t.ga("srcThroughput",r.bs.ks,21),t.Oc(this.srcThroughput),t.ya()),null!==this.diskReadTimeout&&void 0!==this.diskReadTimeout&&(t.ga("diskReadTimeout",r.bs.Os,22),t.ma(this.diskReadTimeout),t.ya()),null!==this.diskReadRate&&void 0!==this.diskReadRate&&(t.ga("diskReadRate",r.bs.ks,23),t.Oc(this.diskReadRate),t.ya()),null!==this.diskStoreRate&&void 0!==this.diskStoreRate&&(t.ga("diskStoreRate",r.bs.ks,24),t.Oc(this.diskStoreRate),t.ya()),null!==this.diskRemoveRate&&void 0!==this.diskRemoveRate&&(t.ga("diskRemoveRate",r.bs.ks,25),t.Oc(this.diskRemoveRate),t.ya()),null!==this.diskCacheSize&&void 0!==this.diskCacheSize&&(t.ga("diskCacheSize",r.bs.Ps,26),t.Cc(this.diskCacheSize),t.ya()),null!==this.clientBufferMs&&void 0!==this.clientBufferMs&&(t.ga("clientBufferMs",r.bs.Os,27),t.ma(this.clientBufferMs),t.ya()),null!==this.lookupTotal&&void 0!==this.lookupTotal&&(t.ga("lookupTotal",r.bs.Os,28),t.ma(this.lookupTotal),t.ya()),null!==this.lookupNotFound&&void 0!==this.lookupNotFound&&(t.ga("lookupNotFound",r.bs.Os,29),t.ma(this.lookupNotFound),t.ya()),null!==this.lookupFailed&&void 0!==this.lookupFailed&&(t.ga("lookupFailed",r.bs.Os,30),t.ma(this.lookupFailed),t.ya()),null!==this.lookupLatency&&void 0!==this.lookupLatency&&(t.ga("lookupLatency",r.bs.Os,31),t.ma(this.lookupLatency),t.ya()),null!==this.trackerFailed&&void 0!==this.trackerFailed&&(t.ga("trackerFailed",r.bs.Os,32),t.ma(this.trackerFailed),t.ya()),null!==this.trackerLatency&&void 0!==this.trackerLatency&&(t.ga("trackerLatency",r.bs.Os,33),t.ma(this.trackerLatency),t.ya()),null!==this.snapshotFailed&&void 0!==this.snapshotFailed&&(t.ga("snapshotFailed",r.bs.Os,34),t.ma(this.snapshotFailed),t.ya()),null!==this.snapshotLatency&&void 0!==this.snapshotLatency&&(t.ga("snapshotLatency",r.bs.Os,35),t.ma(this.snapshotLatency),t.ya()),t.wa(),t.Ta()},hive.snapshots.PartnerTraffic=function(t){this.p2pSuccReq=null,this.p2pFailReq=null,this.p2pPartReq=null,this.p2pSuccReceived=null,this.p2pSuccReceivedLow=null,this.p2pFailReceived=null,this.p2pSuccResp=null,this.p2pFailResp=null,this.p2pPartResp=null,this.p2pSuccSent=null,this.p2pSuccSentLow=null,this.p2pFailSent=null,t&&(void 0!==t.p2pSuccReq&&(this.p2pSuccReq=t.p2pSuccReq),void 0!==t.p2pFailReq&&(this.p2pFailReq=t.p2pFailReq),void 0!==t.p2pPartReq&&(this.p2pPartReq=t.p2pPartReq),void 0!==t.p2pSuccReceived&&(this.p2pSuccReceived=t.p2pSuccReceived),void 0!==t.p2pSuccReceivedLow&&(this.p2pSuccReceivedLow=t.p2pSuccReceivedLow),void 0!==t.p2pFailReceived&&(this.p2pFailReceived=t.p2pFailReceived),void 0!==t.p2pSuccResp&&(this.p2pSuccResp=t.p2pSuccResp),void 0!==t.p2pFailResp&&(this.p2pFailResp=t.p2pFailResp),void 0!==t.p2pPartResp&&(this.p2pPartResp=t.p2pPartResp),void 0!==t.p2pSuccSent&&(this.p2pSuccSent=t.p2pSuccSent),void 0!==t.p2pSuccSentLow&&(this.p2pSuccSentLow=t.p2pSuccSentLow),void 0!==t.p2pFailSent&&(this.p2pFailSent=t.p2pFailSent))},hive.snapshots.PartnerTraffic.prototype={},hive.snapshots.PartnerTraffic.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Ps?this.p2pSuccReq=t.$c().value:t.pa(i);break;case 2:i==r.bs.Ps?this.p2pFailReq=t.$c().value:t.pa(i);break;case 3:i==r.bs.Ps?this.p2pPartReq=t.$c().value:t.pa(i);break;case 4:i==r.bs.Ps?this.p2pSuccReceived=t.$c().value:t.pa(i);break;case 5:i==r.bs.Ps?this.p2pSuccReceivedLow=t.$c().value:t.pa(i);break;case 10:i==r.bs.Ps?this.p2pFailReceived=t.$c().value:t.pa(i);break;case 6:i==r.bs.Ps?this.p2pSuccResp=t.$c().value:t.pa(i);break;case 11:i==r.bs.Ps?this.p2pFailResp=t.$c().value:t.pa(i);break;case 7:i==r.bs.Ps?this.p2pPartResp=t.$c().value:t.pa(i);break;case 8:i==r.bs.Ps?this.p2pSuccSent=t.$c().value:t.pa(i);break;case 9:i==r.bs.Ps?this.p2pSuccSentLow=t.$c().value:t.pa(i);break;case 12:i==r.bs.Ps?this.p2pFailSent=t.$c().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.PartnerTraffic.prototype.write=function(t){t.fa("PartnerTraffic"),null!==this.p2pSuccReq&&void 0!==this.p2pSuccReq&&(t.ga("p2pSuccReq",r.bs.Ps,1),t.Cc(this.p2pSuccReq),t.ya()),null!==this.p2pFailReq&&void 0!==this.p2pFailReq&&(t.ga("p2pFailReq",r.bs.Ps,2),t.Cc(this.p2pFailReq),t.ya()),null!==this.p2pPartReq&&void 0!==this.p2pPartReq&&(t.ga("p2pPartReq",r.bs.Ps,3),t.Cc(this.p2pPartReq),t.ya()),null!==this.p2pSuccReceived&&void 0!==this.p2pSuccReceived&&(t.ga("p2pSuccReceived",r.bs.Ps,4),t.Cc(this.p2pSuccReceived),t.ya()),null!==this.p2pSuccReceivedLow&&void 0!==this.p2pSuccReceivedLow&&(t.ga("p2pSuccReceivedLow",r.bs.Ps,5),t.Cc(this.p2pSuccReceivedLow),t.ya()),null!==this.p2pFailReceived&&void 0!==this.p2pFailReceived&&(t.ga("p2pFailReceived",r.bs.Ps,10),t.Cc(this.p2pFailReceived),t.ya()),null!==this.p2pSuccResp&&void 0!==this.p2pSuccResp&&(t.ga("p2pSuccResp",r.bs.Ps,6),t.Cc(this.p2pSuccResp),t.ya()),null!==this.p2pFailResp&&void 0!==this.p2pFailResp&&(t.ga("p2pFailResp",r.bs.Ps,11),t.Cc(this.p2pFailResp),t.ya()),null!==this.p2pPartResp&&void 0!==this.p2pPartResp&&(t.ga("p2pPartResp",r.bs.Ps,7),t.Cc(this.p2pPartResp),t.ya()),null!==this.p2pSuccSent&&void 0!==this.p2pSuccSent&&(t.ga("p2pSuccSent",r.bs.Ps,8),t.Cc(this.p2pSuccSent),t.ya()),null!==this.p2pSuccSentLow&&void 0!==this.p2pSuccSentLow&&(t.ga("p2pSuccSentLow",r.bs.Ps,9),t.Cc(this.p2pSuccSentLow),t.ya()),null!==this.p2pFailSent&&void 0!==this.p2pFailSent&&(t.ga("p2pFailSent",r.bs.Ps,12),t.Cc(this.p2pFailSent),t.ya()),t.wa(),t.Ta()},hive.snapshots.PartnerMetrics=function(t){this.rateReceived=null,this.rateSent=null,this.handshakeDelay=null,t&&(void 0!==t.rateReceived&&(this.rateReceived=t.rateReceived),void 0!==t.rateSent&&(this.rateSent=t.rateSent),void 0!==t.handshakeDelay&&(this.handshakeDelay=t.handshakeDelay))},hive.snapshots.PartnerMetrics.prototype={},hive.snapshots.PartnerMetrics.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.ks?this.rateReceived=t.Yc().value:t.pa(i);break;case 2:i==r.bs.ks?this.rateSent=t.Yc().value:t.pa(i);break;case 3:i==r.bs.Ps?this.handshakeDelay=t.$c().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.PartnerMetrics.prototype.write=function(t){t.fa("PartnerMetrics"),null!==this.rateReceived&&void 0!==this.rateReceived&&(t.ga("rateReceived",r.bs.ks,1),t.Oc(this.rateReceived),t.ya()),null!==this.rateSent&&void 0!==this.rateSent&&(t.ga("rateSent",r.bs.ks,2),t.Oc(this.rateSent),t.ya()),null!==this.handshakeDelay&&void 0!==this.handshakeDelay&&(t.ga("handshakeDelay",r.bs.Ps,3),t.Cc(this.handshakeDelay),t.ya()),t.wa(),t.Ta()},hive.snapshots.ConnectivityInfo=function(t){this.upBW=null,this.downBW=null,this.externalAs=null,this.internalAs=null,this.publicIp=null,this.privateIp=null,t&&(void 0!==t.upBW&&(this.upBW=t.upBW),void 0!==t.downBW&&(this.downBW=t.downBW),void 0!==t.externalAs&&(this.externalAs=t.externalAs),void 0!==t.internalAs&&(this.internalAs=t.internalAs),void 0!==t.publicIp&&(this.publicIp=t.publicIp),void 0!==t.privateIp&&(this.privateIp=t.privateIp))},hive.snapshots.ConnectivityInfo.prototype={},hive.snapshots.ConnectivityInfo.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Os?this.upBW=t.ua().value:t.pa(i);break;case 2:i==r.bs.Os?this.downBW=t.ua().value:t.pa(i);break;case 3:i==r.bs.Os?this.externalAs=t.ua().value:t.pa(i);break;case 4:i==r.bs.Os?this.internalAs=t.ua().value:t.pa(i);break;case 5:i==r.bs.As?this.publicIp=t.ha().value:t.pa(i);break;case 6:i==r.bs.As?this.privateIp=t.ha().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.ConnectivityInfo.prototype.write=function(t){t.fa("ConnectivityInfo"),null!==this.upBW&&void 0!==this.upBW&&(t.ga("upBW",r.bs.Os,1),t.ma(this.upBW),t.ya()),null!==this.downBW&&void 0!==this.downBW&&(t.ga("downBW",r.bs.Os,2),t.ma(this.downBW),t.ya()),null!==this.externalAs&&void 0!==this.externalAs&&(t.ga("externalAs",r.bs.Os,3),t.ma(this.externalAs),t.ya()),null!==this.internalAs&&void 0!==this.internalAs&&(t.ga("internalAs",r.bs.Os,4),t.ma(this.internalAs),t.ya()),null!==this.publicIp&&void 0!==this.publicIp&&(t.ga("publicIp",r.bs.As,5),t.va(this.publicIp),t.ya()),null!==this.privateIp&&void 0!==this.privateIp&&(t.ga("privateIp",r.bs.As,6),t.va(this.privateIp),t.ya()),t.wa(),t.Ta()},hive.snapshots.Partner=function(t){this.connInfo=null,this.traffic=null,this.metrics=null,this.inPart=null,this.outPart=null,this.udp=null,t&&(void 0!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.traffic&&(this.traffic=t.traffic),void 0!==t.metrics&&(this.metrics=t.metrics),void 0!==t.inPart&&(this.inPart=t.inPart),void 0!==t.outPart&&(this.outPart=t.outPart),void 0!==t.udp&&(this.udp=t.udp))},hive.snapshots.Partner.prototype={},hive.snapshots.Partner.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.xs?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.pa(i);break;case 2:i==r.bs.xs?(this.traffic=new hive.snapshots.PartnerTraffic,this.traffic.read(t)):t.pa(i);break;case 3:i==r.bs.xs?(this.metrics=new hive.snapshots.PartnerMetrics,this.metrics.read(t)):t.pa(i);break;case 4:i==r.bs.BOOL?this.inPart=t.Gc().value:t.pa(i);break;case 5:i==r.bs.BOOL?this.outPart=t.Gc().value:t.pa(i);break;case 6:i==r.bs.BOOL?this.udp=t.Gc().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.Partner.prototype.write=function(t){t.fa("Partner"),null!==this.connInfo&&void 0!==this.connInfo&&(t.ga("connInfo",r.bs.xs,1),this.connInfo.write(t),t.ya()),null!==this.traffic&&void 0!==this.traffic&&(t.ga("traffic",r.bs.xs,2),this.traffic.write(t),t.ya()),null!==this.metrics&&void 0!==this.metrics&&(t.ga("metrics",r.bs.xs,3),this.metrics.write(t),t.ya()),null!==this.inPart&&void 0!==this.inPart&&(t.ga("inPart",r.bs.BOOL,4),t.Ic(this.inPart),t.ya()),null!==this.outPart&&void 0!==this.outPart&&(t.ga("outPart",r.bs.BOOL,5),t.Ic(this.outPart),t.ya()),null!==this.udp&&void 0!==this.udp&&(t.ga("udp",r.bs.BOOL,6),t.Ic(this.udp),t.ya()),t.wa(),t.Ta()},hive.snapshots.StreamInfo=function(t){this.url=null,this.streamType=null,this.streamProtocol=null,t&&(void 0!==t.url&&(this.url=t.url),void 0!==t.streamType&&(this.streamType=t.streamType),void 0!==t.streamProtocol&&(this.streamProtocol=t.streamProtocol))},hive.snapshots.StreamInfo.prototype={},hive.snapshots.StreamInfo.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.As?this.url=t.ha().value:t.pa(i);break;case 2:i==r.bs.Os?this.streamType=t.ua().value:t.pa(i);break;case 3:i==r.bs.Os?this.streamProtocol=t.ua().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.StreamInfo.prototype.write=function(t){t.fa("StreamInfo"),null!==this.url&&void 0!==this.url&&(t.ga("url",r.bs.As,1),t.va(this.url),t.ya()),null!==this.streamType&&void 0!==this.streamType&&(t.ga("streamType",r.bs.Os,2),t.ma(this.streamType),t.ya()),null!==this.streamProtocol&&void 0!==this.streamProtocol&&(t.ga("streamProtocol",r.bs.Os,3),t.ma(this.streamProtocol),t.ya()),t.wa(),t.Ta()},hive.snapshots.ClientInfo=function(t){this.clientType=null,this.majorVersion=null,this.minorVersion=null,this.patchVersion=null,t&&(void 0!==t.clientType&&(this.clientType=t.clientType),void 0!==t.majorVersion&&(this.majorVersion=t.majorVersion),void 0!==t.minorVersion&&(this.minorVersion=t.minorVersion),void 0!==t.patchVersion&&(this.patchVersion=t.patchVersion))},hive.snapshots.ClientInfo.prototype={},hive.snapshots.ClientInfo.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Os?this.clientType=t.ua().value:t.pa(i);break;case 2:i==r.bs.BYTE?this.majorVersion=t.zc().value:t.pa(i);break;case 3:i==r.bs.BYTE?this.minorVersion=t.zc().value:t.pa(i);break;case 4:i==r.bs.Cs?this.patchVersion=t.Wc().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.ClientInfo.prototype.write=function(t){t.fa("ClientInfo"),null!==this.clientType&&void 0!==this.clientType&&(t.ga("clientType",r.bs.Os,1),t.ma(this.clientType),t.ya()),null!==this.majorVersion&&void 0!==this.majorVersion&&(t.ga("majorVersion",r.bs.BYTE,2),t.Rc(this.majorVersion),t.ya()),null!==this.minorVersion&&void 0!==this.minorVersion&&(t.ga("minorVersion",r.bs.BYTE,3),t.Rc(this.minorVersion),t.ya()),null!==this.patchVersion&&void 0!==this.patchVersion&&(t.ga("patchVersion",r.bs.Cs,4),t.kc(this.patchVersion),t.ya()),t.wa(),t.Ta()},hive.snapshots.AgentInfo=function(t){this.firstTierBitrates=null,this.secondTierBitrates=null,t&&(void 0!==t.firstTierBitrates&&(this.firstTierBitrates=t.firstTierBitrates),void 0!==t.secondTierBitrates&&(this.secondTierBitrates=t.secondTierBitrates))},hive.snapshots.AgentInfo.prototype={},hive.snapshots.AgentInfo.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:if(i==r.bs.Fs){var o,s=0;this.firstTierBitrates=[];var a=0;o=t.Jc(),a=o.Qc,s=o.size;for(var c=0;c<s;++c){var h=null;h=t.ua().value,this.firstTierBitrates.push(h)}t.Kc()}else t.pa(i);break;case 2:if(i==r.bs.Fs){var p,u=0;this.secondTierBitrates=[];var l=0;p=t.Jc(),l=p.Qc,u=p.size;for(var d=0;d<u;++d){var f=null;f=t.ua().value,this.secondTierBitrates.push(f)}t.Kc()}else t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.AgentInfo.prototype.write=function(t){
  if(t.fa("AgentInfo"),null!==this.firstTierBitrates&&void 0!==this.firstTierBitrates){t.ga("firstTierBitrates",r.bs.Fs,1),t.bc(r.bs.Os,this.firstTierBitrates.length);for(var e in this.firstTierBitrates)this.firstTierBitrates.hasOwnProperty(e)&&(e=this.firstTierBitrates[e],t.ma(e));t.Ec(),t.ya()}if(null!==this.secondTierBitrates&&void 0!==this.secondTierBitrates){t.ga("secondTierBitrates",r.bs.Fs,2),t.bc(r.bs.Os,this.secondTierBitrates.length);for(var i in this.secondTierBitrates)this.secondTierBitrates.hasOwnProperty(i)&&(i=this.secondTierBitrates[i],t.ma(i));t.Ec(),t.ya()}t.wa(),t.Ta()},hive.snapshots.TrafficKey=function(t){this.bitrate=null,this.AS=null,this.partnerGuid=null,t&&(void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.AS&&(this.AS=t.AS),void 0!==t.partnerGuid&&(this.partnerGuid=t.partnerGuid))},hive.snapshots.TrafficKey.prototype={},hive.snapshots.TrafficKey.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Os?this.bitrate=t.ua().value:t.pa(i);break;case 2:i==r.bs.Os?this.AS=t.ua().value:t.pa(i);break;case 3:i==r.bs.As?this.partnerGuid=t.ha().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.TrafficKey.prototype.write=function(t){t.fa("TrafficKey"),null!==this.bitrate&&void 0!==this.bitrate&&(t.ga("bitrate",r.bs.Os,1),t.ma(this.bitrate),t.ya()),null!==this.AS&&void 0!==this.AS&&(t.ga("AS",r.bs.Os,2),t.ma(this.AS),t.ya()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(t.ga("partnerGuid",r.bs.As,3),t.va(this.partnerGuid),t.ya()),t.wa(),t.Ta()},hive.snapshots.PartnerKey=function(t){this.bitrate=null,this.AS=null,this.partnerGuid=null,t&&(void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.AS&&(this.AS=t.AS),void 0!==t.partnerGuid&&(this.partnerGuid=t.partnerGuid))},hive.snapshots.PartnerKey.prototype={},hive.snapshots.PartnerKey.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Os?this.bitrate=t.ua().value:t.pa(i);break;case 2:i==r.bs.Os?this.AS=t.ua().value:t.pa(i);break;case 3:i==r.bs.As?this.partnerGuid=t.ha().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.PartnerKey.prototype.write=function(t){t.fa("PartnerKey"),null!==this.bitrate&&void 0!==this.bitrate&&(t.ga("bitrate",r.bs.Os,1),t.ma(this.bitrate),t.ya()),null!==this.AS&&void 0!==this.AS&&(t.ga("AS",r.bs.Os,2),t.ma(this.AS),t.ya()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(t.ga("partnerGuid",r.bs.As,3),t.va(this.partnerGuid),t.ya()),t.wa(),t.Ta()},hive.snapshots.Player=function(t){this.bufferingN=null,this.bufferingMs=null,this.initBufferingN=null,this.initBufferingMs=null,this.seekBufferingN=null,this.seekBufferingMs=null,this.playerBufferMs=null,t&&(void 0!==t.bufferingN&&(this.bufferingN=t.bufferingN),void 0!==t.bufferingMs&&(this.bufferingMs=t.bufferingMs),void 0!==t.initBufferingN&&(this.initBufferingN=t.initBufferingN),void 0!==t.initBufferingMs&&(this.initBufferingMs=t.initBufferingMs),void 0!==t.seekBufferingN&&(this.seekBufferingN=t.seekBufferingN),void 0!==t.seekBufferingMs&&(this.seekBufferingMs=t.seekBufferingMs),void 0!==t.playerBufferMs&&(this.playerBufferMs=t.playerBufferMs))},hive.snapshots.Player.prototype={},hive.snapshots.Player.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Cs?this.bufferingN=t.Wc().value:t.pa(i);break;case 2:i==r.bs.Os?this.bufferingMs=t.ua().value:t.pa(i);break;case 3:i==r.bs.Cs?this.initBufferingN=t.Wc().value:t.pa(i);break;case 4:i==r.bs.Os?this.initBufferingMs=t.ua().value:t.pa(i);break;case 5:i==r.bs.Cs?this.seekBufferingN=t.Wc().value:t.pa(i);break;case 6:i==r.bs.Os?this.seekBufferingMs=t.ua().value:t.pa(i);break;case 36:i==r.bs.Os?this.playerBufferMs=t.ua().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.Player.prototype.write=function(t){t.fa("Player"),null!==this.bufferingN&&void 0!==this.bufferingN&&(t.ga("bufferingN",r.bs.Cs,1),t.kc(this.bufferingN),t.ya()),null!==this.bufferingMs&&void 0!==this.bufferingMs&&(t.ga("bufferingMs",r.bs.Os,2),t.ma(this.bufferingMs),t.ya()),null!==this.initBufferingN&&void 0!==this.initBufferingN&&(t.ga("initBufferingN",r.bs.Cs,3),t.kc(this.initBufferingN),t.ya()),null!==this.initBufferingMs&&void 0!==this.initBufferingMs&&(t.ga("initBufferingMs",r.bs.Os,4),t.ma(this.initBufferingMs),t.ya()),null!==this.seekBufferingN&&void 0!==this.seekBufferingN&&(t.ga("seekBufferingN",r.bs.Cs,5),t.kc(this.seekBufferingN),t.ya()),null!==this.seekBufferingMs&&void 0!==this.seekBufferingMs&&(t.ga("seekBufferingMs",r.bs.Os,6),t.ma(this.seekBufferingMs),t.ya()),null!==this.playerBufferMs&&void 0!==this.playerBufferMs&&(t.ga("playerBufferMs",r.bs.Os,36),t.ma(this.playerBufferMs),t.ya()),t.wa(),t.Ta()},hive.snapshots.MetricSnapshot=function(t){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.guid&&(this.guid=t.guid),void 0!==t.eventId&&(this.eventId=t.eventId),void 0!==t.streamInfo&&(this.streamInfo=t.streamInfo),void 0!==t.metrics&&(this.metrics=t.metrics),void 0!==t.traffic&&(this.traffic=t.traffic),void 0!==t.snapshotInfo&&(this.snapshotInfo=t.snapshotInfo),void 0!==t.agentInfo&&(this.agentInfo=t.agentInfo),void 0!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.partners&&(this.partners=t.partners),void 0!==t.player&&(this.player=t.player),void 0!==t.client&&(this.client=t.client),void 0!==t.sessionId&&(this.sessionId=t.sessionId))},hive.snapshots.MetricSnapshot.prototype={},hive.snapshots.MetricSnapshot.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Ps?this.timestamp=t.$c().value:t.pa(i);break;case 2:i==r.bs.As?this.guid=t.ha().value:t.pa(i);break;case 3:i==r.bs.xs?(this.eventId=new EventId,this.eventId.read(t)):t.pa(i);break;case 4:i==r.bs.xs?(this.streamInfo=new hive.snapshots.StreamInfo,this.streamInfo.read(t)):t.pa(i);break;case 5:i==r.bs.xs?(this.metrics=new hive.snapshots.Metrics,this.metrics.read(t)):t.pa(i);break;case 6:if(i==r.bs.Bs){var o,s=0;this.traffic={};var a=0,c=0;o=t.Lc(),a=o.Mc,c=o.jc,s=o.size;for(var h=0;h<s;++h){h>0&&t.Nc.length>t.Ra[t.Ra.length-1]+1&&t.Nc.pop();var p=null,u=null;p=new hive.snapshots.TrafficKey,p.read(t),u=new hive.snapshots.Traffic,u.read(t),this.traffic[p]=u}t.Uc()}else t.pa(i);break;case 7:i==r.bs.xs?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(t)):t.pa(i);break;case 8:i==r.bs.xs?(this.agentInfo=new hive.snapshots.AgentInfo,this.agentInfo.read(t)):t.pa(i);break;case 9:i==r.bs.xs?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.pa(i);break;case 10:if(i==r.bs.Bs){var l,d=0;this.partners={};var f=0,g=0;l=t.Lc(),f=l.Mc,g=l.jc,d=l.size;for(var v=0;v<d;++v){v>0&&t.Nc.length>t.Ra[t.Ra.length-1]+1&&t.Nc.pop();var y=null,m=null;y=new hive.snapshots.PartnerKey,y.read(t),m=new hive.snapshots.Partner,m.read(t),this.partners[y]=m}t.Uc()}else t.pa(i);break;case 11:i==r.bs.xs?(this.player=new hive.snapshots.Player,this.player.read(t)):t.pa(i);break;case 12:i==r.bs.xs?(this.client=new hive.snapshots.ClientInfo,this.client.read(t)):t.pa(i);break;case 13:i==r.bs.As?this.sessionId=t.ha().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.MetricSnapshot.prototype.write=function(t){if(t.fa("MetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(t.ga("timestamp",r.bs.Ps,1),t.Cc(this.timestamp),t.ya()),null!==this.guid&&void 0!==this.guid&&(t.ga("guid",r.bs.As,2),t.va(this.guid),t.ya()),null!==this.eventId&&void 0!==this.eventId&&(t.ga("eventId",r.bs.xs,3),this.eventId.write(t),t.ya()),null!==this.streamInfo&&void 0!==this.streamInfo&&(t.ga("streamInfo",r.bs.xs,4),this.streamInfo.write(t),t.ya()),null!==this.metrics&&void 0!==this.metrics&&(t.ga("metrics",r.bs.xs,5),this.metrics.write(t),t.ya()),null!==this.traffic&&void 0!==this.traffic){t.ga("traffic",r.bs.Bs,6),t.mc(r.bs.xs,r.bs.xs,r.Qs(this.traffic));for(var e=0;e<this.traffic.length;e++){var i=this.traffic[e],n=i.key,o=i.value;n.write(t),o.write(t)}t.wc(),t.ya()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(t.ga("snapshotInfo",r.bs.xs,7),this.snapshotInfo.write(t),t.ya()),null!==this.agentInfo&&void 0!==this.agentInfo&&(t.ga("agentInfo",r.bs.xs,8),this.agentInfo.write(t),t.ya()),null!==this.connInfo&&void 0!==this.connInfo&&(t.ga("connInfo",r.bs.xs,9),this.connInfo.write(t),t.ya()),null!==this.partners&&void 0!==this.partners){t.ga("partners",r.bs.Bs,10),t.mc(r.bs.xs,r.bs.xs,r.Qs(this.partners));for(var e=0;e<this.partners.length;e++){var i=this.partners[e],s=i.key,a=i.value;s.write(t),a.write(t)}t.wc(),t.ya()}null!==this.player&&void 0!==this.player&&(t.ga("player",r.bs.xs,11),this.player.write(t),t.ya()),null!==this.client&&void 0!==this.client&&(t.ga("client",r.bs.xs,12),this.client.write(t),t.ya()),null!==this.sessionId&&void 0!==this.sessionId&&(t.ga("sessionId",r.bs.As,13),t.va(this.sessionId),t.ya()),t.wa(),t.Ta()},hive.snapshots.JsonMetricSnapshot=function(t){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.guid&&(this.guid=t.guid),void 0!==t.eventId&&(this.eventId=t.eventId),void 0!==t.streamInfo&&(this.streamInfo=t.streamInfo),void 0!==t.metrics&&(this.metrics=t.metrics),void 0!==t.traffic&&(this.traffic=t.traffic),void 0!==t.snapshotInfo&&(this.snapshotInfo=t.snapshotInfo),void 0!==t.agentInfo&&(this.agentInfo=t.agentInfo),void 0!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.partners&&(this.partners=t.partners),void 0!==t.player&&(this.player=t.player),void 0!==t.client&&(this.client=t.client),void 0!==t.sessionId&&(this.sessionId=t.sessionId))},hive.snapshots.JsonMetricSnapshot.prototype={},hive.snapshots.JsonMetricSnapshot.prototype.read=function(t){for(t.Hc();;){var e=t.sa(),i=(e.Bc,e.aa),n=e.ca;if(i==r.bs.Es)break;switch(n){case 1:i==r.bs.Ps?this.timestamp=t.$c().value:t.pa(i);break;case 2:i==r.bs.As?this.guid=t.ha().value:t.pa(i);break;case 3:i==r.bs.xs?(this.eventId=new EventId,this.eventId.read(t)):t.pa(i);break;case 4:i==r.bs.xs?(this.streamInfo=new hive.snapshots.StreamInfo,this.streamInfo.read(t)):t.pa(i);break;case 5:i==r.bs.xs?(this.metrics=new hive.snapshots.Metrics,this.metrics.read(t)):t.pa(i);break;case 6:if(i==r.bs.Bs){var o,s=0;this.traffic={};var a=0,c=0;o=t.Lc(),a=o.Mc,c=o.jc,s=o.size;for(var h=0;h<s;++h){h>0&&t.Nc.length>t.Ra[t.Ra.length-1]+1&&t.Nc.pop();var p=null,u=null;p=t.ha().value,u=new hive.snapshots.Traffic,u.read(t),this.traffic[p]=u}t.Uc()}else t.pa(i);break;case 7:i==r.bs.xs?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(t)):t.pa(i);break;case 8:i==r.bs.xs?(this.agentInfo=new hive.snapshots.AgentInfo,this.agentInfo.read(t)):t.pa(i);break;case 9:i==r.bs.xs?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.pa(i);break;case 10:if(i==r.bs.Bs){var l,d=0;this.partners={};var f=0,g=0;l=t.Lc(),f=l.Mc,g=l.jc,d=l.size;for(var v=0;v<d;++v){v>0&&t.Nc.length>t.Ra[t.Ra.length-1]+1&&t.Nc.pop();var y=null,m=null;y=t.ha().value,m=new hive.snapshots.Partner,m.read(t),this.partners[y]=m}t.Uc()}else t.pa(i);break;case 11:i==r.bs.xs?(this.player=new hive.snapshots.Player,this.player.read(t)):t.pa(i);break;case 12:i==r.bs.xs?(this.client=new hive.snapshots.ClientInfo,this.client.read(t)):t.pa(i);break;case 13:i==r.bs.As?this.sessionId=t.ha().value:t.pa(i);break;default:t.pa(i)}t.la()}t.da()},hive.snapshots.JsonMetricSnapshot.prototype.write=function(t){if(t.fa("JsonMetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(t.ga("timestamp",r.bs.Ps,1),t.Cc(this.timestamp),t.ya()),null!==this.guid&&void 0!==this.guid&&(t.ga("guid",r.bs.As,2),t.va(this.guid),t.ya()),null!==this.eventId&&void 0!==this.eventId&&(t.ga("eventId",r.bs.xs,3),this.eventId.write(t),t.ya()),null!==this.streamInfo&&void 0!==this.streamInfo&&(t.ga("streamInfo",r.bs.xs,4),this.streamInfo.write(t),t.ya()),null!==this.metrics&&void 0!==this.metrics&&(t.ga("metrics",r.bs.xs,5),this.metrics.write(t),t.ya()),null!==this.traffic&&void 0!==this.traffic){t.ga("traffic",r.bs.Bs,6),t.mc(r.bs.As,r.bs.xs,r.Qs(this.traffic));for(var e in this.traffic)if(this.traffic.hasOwnProperty(e)){var i=this.traffic[e];t.va(e),i.write(t)}t.wc(),t.ya()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(t.ga("snapshotInfo",r.bs.xs,7),this.snapshotInfo.write(t),t.ya()),null!==this.agentInfo&&void 0!==this.agentInfo&&(t.ga("agentInfo",r.bs.xs,8),this.agentInfo.write(t),t.ya()),null!==this.connInfo&&void 0!==this.connInfo&&(t.ga("connInfo",r.bs.xs,9),this.connInfo.write(t),t.ya()),null!==this.partners&&void 0!==this.partners){t.ga("partners",r.bs.Bs,10),t.mc(r.bs.As,r.bs.xs,r.Qs(this.partners));for(var n in this.partners)if(this.partners.hasOwnProperty(n)){var o=this.partners[n];t.va(n),o.write(t)}t.wc(),t.ya()}null!==this.player&&void 0!==this.player&&(t.ga("player",r.bs.xs,11),this.player.write(t),t.ya()),null!==this.client&&void 0!==this.client&&(t.ga("client",r.bs.xs,12),this.client.write(t),t.ya()),null!==this.sessionId&&void 0!==this.sessionId&&(t.ga("sessionId",r.bs.As,13),t.va(this.sessionId),t.ya()),t.wa(),t.Ta()}},function(t,e){/*! collections.min.js v 3.0.0 github.com/montagejs/collections */
  !function(t){function e(){throw Error("Can't construct. GenericCollection is a mixin.")}function i(){throw Error("Can't construct. GenericSet is a mixin.")}function r(){}function n(){throw Error("This is an abstract interface. Mix it. Don't construct it")}function o(){throw Error("Can't construct. RangeChanges is a mixin.")}function s(){throw Error("Can't construct. GenericOrder is a mixin.")}function a(t){if(!(this instanceof a))return new a(t);if(Array.isArray(t)||"string"==typeof t)return a.Df(t);if(t=lt(t),t instanceof a)return t;if(t.next)this.next=function(){return t.next()};else if(t.Df){var e=t.Df();this.next=function(){return e.next()}}else{if("[object Function]"!==lt.prototype.toString.call(t))throw new TypeError("Cannot iterate");this.next=t}}function c(t,e,i){this.Hf=t,this.start=null==e?0:e,this.end=i}function h(t,e,i){if(!(this instanceof h))return new h(t,e,i);var r=this.head=new this.Node;r.next=r,r.Lf=r,this.Mf=e||Object.ol,this.content=i||Function.jf,this.length=0,this.addEach(t)}function p(t){this.head=t,this.Uf=t.next}function u(t){this.value=t,this.next=this.Lf=null}function l(){throw Error("Can't construct. MapChanges is a mixin.")}function d(){throw Error("Can't construct. GenericMap is a mixin.")}function f(t,e){return this instanceof f?(this.content=e||Function.jf,this.Vf={},this.length=0,void this.addEach(t)):new f(t,e)}function g(t,e,i,r){return this instanceof g?(e=e||Object.ol,i=i||Object.hash,r=r||Function.jf,this.Mf=e,this.Qf=i,this.content=r,this.qf=new this.Jf(null,this.Kf),this.length=0,void this.addEach(t)):new g(t,e,i)}function v(t,e,i,r){return this instanceof v?(e=e||Object.ol,i=i||Object.hash,r=r||Function.jf,this.Mf=e,this.Qf=i,this.content=r,this.Vf=new Mt((void 0),function(t,i){return e(t.key,i.key)},function(t){return i(t.key)}),this.length=0,void this.addEach(t)):new v(t,e,i)}function y(t,e,i,r){return this instanceof y?(e=e||Object.ol,i=i||Object.hash,r=r||Function.jf,this.Mf=e,this.Qf=i,this.content=r,this.order=new this.Gf((void 0),e),this.Vf=new this.zf((void 0),function(t,i){return e(t.value,i.value)},function(t){return i(t.value)}),this.length=0,void this.addEach(t)):new y(t,e,i)}function m(t,e,i,r,n){return this instanceof m?(e=e||1/0,i=i||Object.ol,r=r||Object.hash,n=n||Function.jf,this.Vf=new Yt((void 0),i,r),this.Mf=i,this.Qf=r,this.content=n,this.maxLength=e,this.length=0,void this.addEach(t)):new m(t,e,i,r)}function w(t,e,i,r,n){return this instanceof w?(i=i||Object.ol,r=r||Object.hash,n=n||Function.jf,this.Mf=i,this.Qf=r,this.content=n,this.Vf=new ie((void 0),e,function(t,e){return i(t.key,e.key)},function(t){return r(t.key)}),this.length=0,void this.addEach(t)):new w(t,e,i,r)}function T(t,e,i,r){return this instanceof T?(e=e||Object.ol,i=i||Object.hash,r=r||Function.jf,this.Mf=e,this.Qf=i,this.content=r,this.Vf=new ae((void 0),function(t,i){return e(t.key,i.key)},function(t){return i(t.key)}),this.length=0,void this.addEach(t)):new T(t,e,i)}function S(t,e,i,r){return this instanceof S?(this.Wf=e||this.Wf,void le.call(this,t,i,r,function(t){var e=this.Wf();return le.prototype.set.call(this,t,e),e})):new S(t,e,i,r)}function b(t,e,i,r){return this instanceof b?(Array.isArray(t)?(this.Hf=t,t=t.splice(0,t.length)):this.Hf=[],this.Mf=e||Object.ol,this.$f=i||Object.Yf,this.content=r||Function.jf,this.length=0,void this.addEach(t)):new b(t,e,i,r)}function E(t,e,i){for(var r=0,n=t.length-1;r<=n;){var o=r+n>>1,s=i(e,t[o]);if(0<s)r=o+1;else{if(!(0>s))return o;n=o-1}}return-(r+1)}function I(t,e,i,r){if(i=E(t,e,i),0>i)return-1;for(;0<i&&r(e,t[i-1]);)i--;return r(e,t[i])?i:-1}function R(t,e,i,r){if(i=E(t,e,i),0>i)return-1;for(;i<t.length-1&&r(e,t[i+1]);)i++;return r(e,t[i])?i:-1}function k(t,e,i,r){return this instanceof k?void ye.call(this,t,e,i,r):new k(t,e,i,r)}function C(t,e,i,r){return this instanceof C?(e=e||Object.ol,i=i||Object.Yf,r=r||Function.jf,this.Mf=e,this.$f=i,this.content=r,this.Vf=new Se(null,function(t,i){return e(t.key,i.key)},function(t,e){return i(t.key,e.key)}),this.length=0,void this.addEach(t)):new C(t,e,i,r)}function O(t,e,i,r){return this instanceof O?(this.Mf=e||Object.ol,this.$f=i||Object.Yf,this.content=r||Function.jf,this.root=null,this.length=0,void this.addEach(t)):new O(t,e,i,r)}function P(t){this.value=t,this.right=this.left=null,this.length=1}function A(t,e,i){this.set=t,this.Lf=null,this.end=i,e&&(t=this.set.Xf(e))&&(this.set.Zf(t.value),this.Lf=t.tg())}function N(t,e,i,r){return this instanceof N?(e=e||Object.ol,i=i||Object.Yf,r=r||Function.jf,this.Mf=e,this.$f=i,this.content=r,this.Vf=new Ne(null,function(t,i){return e(t.key,i.key)},function(t,e){return i(t.key,e.key)}),this.length=0,void this.addEach(t)):new N(t,e,i,r)}var x={};x.eg=e,e.prototype.addEach=function(t){if(t&&Object(t)===t)if("function"==typeof t.forEach)t.forEach(this.add,this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);else Object.keys(t).forEach(function(e){this.add(t[e],e)},this)},e.prototype.ig=function(t){t.forEach(function(t){this["delete"](t)},this)},e.prototype.forEach=function(t,e){return this.reduce(function(i,r,n,o,s){t.call(e,r,n,o,s)},void 0)},e.prototype.map=function(t,e){var i=[];return this.reduce(function(r,n,o,s,a){i.push(t.call(e,n,o,s,a))},void 0),i},e.prototype.toArray=function(){return this.map(Function.identity)},e.prototype.rg=function(){var t={};return this.reduce(function(e,i,r){t[r]=i},void 0),t},e.prototype.filter=function(t,e){var i=this.ng();return this.reduce(function(r,n,o,s,a){t.call(e,n,o,s,a)&&i.add(n)},void 0),i},e.prototype.every=function(t,e){return this.reduce(function(i,r,n,o,s){return i&&t.call(e,r,n,o,s)},!0)},e.prototype.some=function(t,e){return this.reduce(function(i,r,n,o,s){return i||t.call(e,r,n,o,s)},!1)},e.prototype.all=function(){return this.every(Boolean)},e.prototype.ie=function(){return this.some(Boolean)},e.prototype.min=function(t){return t=this.$f||Object.Yf,this.reduce(function(e,i){return 0>t(i,e)?i:e},1/0)},e.prototype.max=function(t){return t=this.$f||Object.Yf,this.reduce(function(e,i){return 0<t(i,e)?i:e},-(1/0))},e.prototype.og=function(t){return this.reduce(function(t,e){return t+e},void 0===t?0:t)},e.prototype.sg=function(t){var e=void 0===t?0:t,i=void 0===t?0:t;return this.reduce(function(t,r){e+=r,i+=1},void 0),e/i},e.prototype.concat=function(){for(var t=this.ng(this),e=0;e<arguments.length;e++)t.addEach(arguments[e]);return t},e.prototype.ag=function(){var t=this;return this.reduce(function(e,i){return i.forEach(function(t){this.push(t)},e,t),e},[])},e.prototype.cg=function(){var t=Array.prototype.slice.call(arguments);t.unshift(this);for(var e=[],i=1/0,r=0;r<t.length;r++){var n=t[r];t[r]=n.toArray(),n.length<i&&(i=n.length)}for(r=0;r<t.length;r++)for(var n=t[r],o=0;o<n.length;o++)o<i&&o in n&&(e[o]=e[o]||[],e[o][r]=n[o]);return e},e.prototype.hg=function(t,e,i){return t=t||this.$f||Object.Yf,t.pg?(e=t.pg,t=t.Yf||this.$f||Object.Yf):e=e||Function.identity,void 0===i&&(i=1),this.map(function(t){return{pg:e(t),value:t}}).sort(function(e,r){return t(e.pg,r.pg)*i}).map(function(t){return t.value})},e.prototype.reversed=function(){return this.ng(this).reverse()},e.prototype.clone=function(t,e){if(void 0===t)t=1/0;else if(0===t)return this;var i=this.ng();return this.forEach(function(r,n){i.add(Object.clone(r,t-1,e),n)},this),i},e.prototype.only=function(){if(0===this.length)throw Error("Can't get only value in empty collection.");if(1<this.length)throw Error("Can't get only value in collection with multiple values.");return this.ug()},x.eg&&(x=x.eg);var B={};B.eg=i,i.prototype.lg=function(t){var e=this.ng(this);return e.addEach(t),e},i.prototype.dg=function(t){return this.ng(this.filter(function(e){return t.has(e)}))},i.prototype.fg=function(t){var e=this.ng(this);return e.ig(t),e},i.prototype.gg=function(t){var e=this.lg(t),t=this.dg(t);return e.fg(t)},i.prototype.ol=function(t,e){var i=this;return Object.vg(t,"reduce")&&this.length===t.length&&t.reduce(function(t,r){return t&&i.has(r,e)},!0)},B.eg&&(B=B.eg);var F=x,_=Object.prototype.toString;Array.isArray||(Array.isArray=function(t){return"[object Array]"==_.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=F.forEach),Array.prototype.map||(Array.prototype.map=F.map),Array.prototype.filter||(Array.prototype.filter=F.filter),Array.prototype.every||(Array.prototype.every=F.every),Array.prototype.some||(Array.prototype.some=F.some),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=toObject(this),i=e.length>>>0;if("[object Function]"!=_.call(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var r,n=0;if(2<=arguments.length)r=arguments[1];else for(;;){if(n in e){r=e[n++];break}if(++n>=i)throw new TypeError("reduce of empty array with no initial value")}for(;n<i;n++)n in e&&(r=t.call(void 0,r,e[n],n,e));return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=toObject(this),i=e.length>>>0;if("[object Function]"!=_.call(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r,i=i-1;if(2<=arguments.length)r=arguments[1];else for(;;){if(i in e){r=e[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(r=t.call(void 0,r,e[i],i,e));while(i--);return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=toObject(this),i=e.length>>>0;if(!i)return-1;var r=0;for(1<arguments.length&&(r=toInteger(arguments[1])),r=0<=r?r:Math.max(0,i+r);r<i;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){var e=toObject(this),i=e.length>>>0;if(!i)return-1;var r=i-1;for(1<arguments.length&&(r=Math.min(r,toInteger(arguments[1]))),r=0<=r?r:i-Math.abs(r);0<=r;r--)if(r in e&&t===e[r])return r;return-1});var D={};D.eg=Function,Function.jf=function(){},Function.identity=function(t){return t},Function.pg=function(t,e){var e=e||Object.Yf,t=t||Function.identity,i=function(i,r){return e(t(i),t(r))};return i.Yf=e,i.pg=t,i},D.eg&&(D=D.eg);var H={};H.eg=r,r.yg={dg:"+",mg:"-",wg:"+",Tg:"+",Sg:".",bg:"'",Eg:"+",Ig:"|"},r.Rg={dg:"╋",mg:"━",wg:"┻",Tg:"┳",Sg:"╭",bg:"╰",Eg:"┣",Ig:"┃"},r.kg={dg:"╋",mg:"━",wg:"┻",Tg:"┳",Sg:"┏",bg:"┗",Eg:"┣",Ig:"┃"},H.eg&&(H=H.eg);var L,M={},j=M;if("undefined"!=typeof WeakMap)L=WeakMap;else{var U=function(t){return t.prototype=null,Object.freeze(t)},V=Object.getOwnPropertyNames,Q=Object.defineProperty,q={};V(Object).forEach(function(t){q[t]=Object[t]});var J="ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var K=new ArrayBuffer(25),K=new Uint8Array(K);crypto.getRandomValues(K),J="rand:"+Array.prototype.map.call(K,function(t){return(t%36).toString(36)}).join("")+"___"}Q(Object,"getOwnPropertyNames",{value:function(t){return V(t).filter(function(t){return t!==J})}}),"getPropertyNames"in Object&&Q(Object,"getPropertyNames",{value:function(t){return q.getPropertyNames(t).filter(function(t){return t!==J})}});var G=function(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[J];return e&&e.key===t?e:q.isExtensible(t)?(e={key:t,Cg:[],Og:[]},Q(t,J,{value:e,Pg:!1,Ag:!1,Ng:!1}),e):void 0},z=Object.freeze;Q(Object,"freeze",{value:function(t){return G(t),z(t)}});var W=Object.seal;Q(Object,"seal",{value:function(t){return G(t),W(t)}});var $=Object.preventExtensions;Q(Object,"preventExtensions",{value:function(t){return G(t),$(t)}});var Y=function(){function t(r,n){var o,s=G(r);return s?(o=s.Cg.indexOf(t),s=s.Og):(o=e.indexOf(r),s=i),0<=o?s[o]:n}var e=[],i=[];return Object.create(Y.prototype,{xg:{value:U(t)},Bg:{value:U(function(i){var r=G(i);return 0<=(r?r.Cg.indexOf(t):e.indexOf(i))})},Fg:{value:U(function(r,n){var o,s=G(r);s?(o=s.Cg.indexOf(t),0<=o?s.Og[o]=n:(s.Cg.push(t),s.Og.push(n))):(o=e.indexOf(r),0<=o?i[o]=n:(e.push(r),i.push(n)))})},_g:{value:U(function(r){var n=G(r);return n?(r=n.Cg.indexOf(t),0<=r&&(n.Cg.splice(r,1),n.Og.splice(r,1))):(r=e.indexOf(r),0<=r&&(e.splice(r,1),i.splice(r,1))),!0})}})};Y.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.xg(t,e)},Pg:!0,Ng:!0},has:{value:function(t){return this.Bg(t)},Pg:!0,Ng:!0},set:{value:function(t,e){this.Fg(t,e)},Pg:!0,Ng:!0},"delete":{value:function(t){return this._g(t)},Pg:!0,Ng:!0}}),L=Y}j.eg=L,M.eg&&(M=M.eg);var X={},Z=M,tt=Object.prototype.hasOwnProperty,et=new Z,it=new Z;X.eg=n,n.prototype.Dg=function(t){et.has(this)||et.set(this,{});var e=et.get(this);return tt.call(e,t)||(e[t]={Hg:[],Lg:[]}),e[t]},n.prototype.Mg=function(t){if(!et.has(this))return!1;if(!t)return!0;var e=et.get(this);return!!tt.call(e,t)},n.prototype.jg=function(t,e,i){this.makeObservable&&!this.isObservable&&this.makeObservable();var r=n.Dg(this,t),i=i?r.Hg:r.Lg;n.Ug(this,t),i.push(e)},n.prototype.Vg=function(t,e){return n.jg(this,t,e,!0)},n.prototype.Qg=function(t,e,i){var r=n.Dg(this,t),i=i?r.Hg:r.Lg,e=i.lastIndexOf(e);if(-1===e)throw Error("Can't remove listener: does not exist.");i.splice(e,1),0===r.Lg.length+r.Hg.length&&n.qg(this,t)},n.prototype.Jg=function(t,e){return n.Qg(this,t,e,!0)},n.prototype.Kg=function(t,e,i){var r=n.Dg(this,t),r=i?r.Hg:r.Lg,i=(i?"Will":"")+"Change",o="handleProperty"+i,s=String(t),s=s&&s[0].toUpperCase()+s.slice(1),a="handle"+s+i;r.forEach(function(i){var r=i,i=i[a]||i[o]||i;i.call&&i.call(r,e,t,this)},this)},n.prototype.Gg=function(t,e){return n.Kg(this,t,e,!0)},n.prototype.Ug=function(t){if(!Array.isArray(this)){it.has(this)||(e={},it.set(this,e));var e=it.get(this);if(!tt.call(e,t)){var i,r=this;Object.getOwnPropertyDescriptor(r,t);do{if(i=Object.getOwnPropertyDescriptor(r,t))break;r=Object.getPrototypeOf(r)}while(r);if(i=i||{value:void 0,Ag:!0,Pg:!0,Ng:!0},!i.Ng)throw Error("Can't observe non-configurable properties");e[t]=i,(i.Pg||i.set)&&Object.defineProperty(this,t,"value"in i?{get:function(){return i.value},set:function(e){return e===i.value?e:(n.Gg(this,t,i.value),i.value=e,n.Kg(this,t,e),e)},Ag:i.Ag,Ng:!0}:{get:function(){if(i.get)return i.get.apply(this,arguments)},set:function(e){var r;return i.get&&(r=i.get.apply(this,arguments)),e===r?e:(n.Gg(this,t,r),i.set&&i.set.apply(this,arguments),i.get&&(e=i.get.apply(this,arguments)),n.Kg(this,t,e),e)},Ag:i.Ag,Ng:!0})}}},n.prototype.qg=function(t){if(!Array.isArray(this)){if(!it.has(this))throw Error("Can't uninstall observer on property");var e=it.get(this);if(!e[t])throw Error("Can't uninstall observer on property");var i=e[t];delete e[t],Object.defineProperty(this,t,i)}},n.Dg=function(t,e){return t.Dg?t.Dg(e):n.prototype.Dg.call(t,e)},n.Mg=function(t,e){return t.Mg?t.Mg(e):n.prototype.Mg.call(t,e)},n.jg=function(t,e,i,r){return t.jg?t.jg(e,i,r):n.prototype.jg.call(t,e,i,r)},n.Qg=function(t,e,i,r){return t.Qg?t.Qg(e,i,r):n.prototype.Qg.call(t,e,i,r)},n.Kg=function(t,e,i,r){return t.Kg?t.Kg(e,i,r):n.prototype.Kg.call(t,e,i,r)},n.Vg=function(t,e,i){return n.jg(t,e,i,!0)},n.Jg=function(t,e,i){return n.Qg(t,e,i,!0)},n.Gg=function(t,e,i){return n.Kg(t,e,i,!0)},n.Ug=function(t,e){return t.Ug?t.Ug(e):n.prototype.Ug.call(t,e)},n.qg=function(t,e){return t.qg?t.qg(e):n.prototype.qg.call(t,e)},X.eg&&(X=X.eg);var rt={},nt=new M;rt.eg=o,o.prototype.zg=function(){return nt.has(this)||nt.set(this,{st:!1,Lg:[],Hg:[]}),nt.get(this)},o.prototype.Wg=function(t,e){!this.isObservable&&this.makeObservable&&this.makeObservable();var i=this.zg();(e?i.Hg:i.Lg).push(t),this.$g=!!(i.Hg.length+i.Lg.length)},o.prototype.Yg=function(t,e){var i,r=this.zg();i=e?r.Hg:r.Lg;var n=i.lastIndexOf(t);if(-1===n)throw Error("Can't remove listener: does not exist.");i.splice(n,1),this.$g=!!(r.Hg.length+r.Lg.length)},o.prototype.Xg=function(t,e,i,r){var n=this.zg();if(!n.st){n.st=!0;var o;o=r?n.Hg:n.Lg;try{o.forEach(function(n){n.yd?n.yd({Zg:r?"before":"after",currentTarget:this,target:this,tv:t,ev:e,index:i}):(n=r?n.handleRangeWillChange||n:n.handleRangeChange||n,n.call&&n.call(this,t,e,i,r))},this)}finally{n.st=!1}}},o.prototype.iv=function(t){return this.Wg(t,!0)},o.prototype.rv=function(t){return this.Yg(t,!0)},o.prototype.nv=function(t,e,i){return this.Xg(t,e,i,!0)},rt.eg&&(rt=rt.eg);var ot={},st=M;ot.eg=Object,Object.empty=Object.freeze(Object.create(null)),Object.ov=function(t){return Object(t)===t},Object.sv=function(t){return Object.vg(t,"valueOf")&&(t=t.valueOf()),t};var at=new st;Object.hash=function(t){return Object.vg(t,"hash")?""+t.hash():Object(t)===t?(at.has(t)||at.set(t,Math.random().toString(36).slice(2)),at.get(t)):""+t};var ct=Object.prototype.hasOwnProperty;Object.av=function(t,e){return ct.call(t,e)},Object.vg=function(t,e){return null!=t&&"function"==typeof t[e]&&!ct.call(t,e)},Object.has=function(t,e){if("object"!=typeof t)throw Error("Object.has can't accept non-object: "+typeof t);if(Object.vg(t,"has"))return t.has(e);if("string"==typeof e)return e in t&&t[e]!==Object.prototype[e];throw Error("Key must be a string for Object.has on plain objects")},Object.get=function(t,e,i){if("object"!=typeof t)throw Error("Object.get can't accept non-object: "+typeof t);return Object.vg(t,"get")?t.get(e,i):Object.has(t,e)?t[e]:i},Object.set=function(t,e,i){Object.vg(t,"set")?t.set(e,i):t[e]=i},Object.addEach=function(t,e){Object.vg(e,"forEach")?"function"==typeof e.keys?e.forEach(function(e,i){t[i]=e}):e.forEach(function(e){t[e[0]]=e[1]}):Object.keys(e).forEach(function(i){t[i]=e[i]})},Object.forEach=function(t,e,i){Object.keys(t).forEach(function(r){e.call(i,t[r],r,t)})},Object.map=function(t,e,i){return Object.keys(t).map(function(r){return e.call(i,t[r],r,t)})},Object.values=function(t){return Object.map(t,Function.identity)},Object.is=function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e},Object.ol=function(t,e,i){if(i=i||Object.ol,t=Object.sv(t),e=Object.sv(e),t===e)return 0!==t||1/t===1/e;if(Object.vg(t,"equals"))return t.ol(e,i);if(Object.vg(e,"equals"))return e.ol(t,i);if("object"==typeof t&&"object"==typeof e){var r=Object.getPrototypeOf(t),n=Object.getPrototypeOf(e);if(r===n&&(r===Object.prototype||null===r)){for(var o in t)if(!i(t[o],e[o]))return!1;for(o in e)if(!i(t[o],e[o]))return!1;return!0}}return t!==t&&e!==e},Object.Yf=function(t,e){var t=Object.sv(t),e=Object.sv(e),i=typeof t;return t===e||i!==typeof e?0:"number"===i?t-e:"string"===i?t<e?-1:1:Object.vg(t,"compare")?t.Yf(e):Object.vg(e,"compare")?-e.Yf(t):0},Object.clone=function(t,e,i){if(t=Object.sv(t),i=i||new st,void 0===e)e=1/0;else if(0===e)return t;if(Object.ov(t)){if(!i.has(t))if(Object.vg(t,"clone"))i.set(t,t.clone(e,i));else{var r=Object.getPrototypeOf(t);if(null!==r&&r!==Object.prototype)throw Error("Can't clone "+t);r=Object.create(r),i.set(t,r);for(var n in t)r[n]=Object.clone(t[n],e-1,i)}return i.get(t)}return t},Object.clear=function(t){if(Object.vg(t,"clear"))t.clear();else for(var e=Object.keys(t),i=e.length;i;)i--,delete t[e[i]];return t},ot.eg&&(ot=ot.eg);var ht={},pt=ot;ht.eg=s,s.prototype.ol=function(t,e){return e=e||this.Mf||pt.ol,this===t||!!t&&(this.length===t.length&&this.cg(t).every(function(t){return e(t[0],t[1])}))},s.prototype.Yf=function(t,e){if(e=e||this.$f||pt.Yf,this===t)return 0;if(!t)return 1;var i=Math.min(this.length,t.length),r=this.cg(t).reduce(function(t,r,n){return 0===t?n>=i?t:e(r[0],r[1]):t},0);return 0===r?this.length-t.length:r},ht.eg&&(ht=ht.eg);var ut={};ut.eg=a;var lt=ot;if(lt.addEach(a.prototype,x.prototype),a.prototype.ng=function(t){var e=[];return Reducible.addEach.call(e,t),e},a.prototype.cv=function(t,e){var i=a(this),r=0;if("[object Function]"!=lt.prototype.toString.call(t))throw new TypeError;return new i.constructor(function(){return t.call(e,i.next(),r++,i)})},a.prototype.hv=function(t,e){var i=a(this),r=0;if("[object Function]"!=lt.prototype.toString.call(t))throw new TypeError;return new i.constructor(function(){for(var n;;)if(n=i.next(),t.call(e,n,r++,i))return n})},a.prototype.reduce=function(t){var e,i=a(this),r=arguments[1],n=arguments[2],o=0;if("[object Function]"!=lt.prototype.toString.call(t))throw new TypeError;try{e=i.next(),r=1<arguments.length?t.call(n,r,e,o,i):e,o++}catch(s){if(isStopIteration(s)){if(1<arguments.length)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}throw s}try{for(;;)e=i.next(),r=t.call(n,r,e,o,i),o++}catch(c){if(isStopIteration(c))return r;throw c}},a.prototype.every=function(t){var e=a(this),i=!0;if("[object Function]"!=lt.prototype.toString.call(t))throw new TypeError;return e.cv.apply(e,arguments).forEach(function(t){if(!t)throw i=!1,StopIteration}),i},a.prototype.some=function(t){var e=a(this),i=!1;if("[object Function]"!=lt.prototype.toString.call(t))throw new TypeError;return e.cv.apply(e,arguments).forEach(function(t){if(t)throw i=!0,StopIteration}),i},a.prototype.concat=function(){return a.concat(Array.prototype.concat.apply(this,arguments))},a.prototype.pv=function(t,e){var i,r=a(this),n=!1;if("[object Function]"!=lt.prototype.toString.call(t))throw new TypeError;return r.forEach(function(o,s){if(!t.call(e,o,s,r))throw n=!0,i=o,StopIteration}),n?r.constructor([i]).concat(r):r.constructor([])},a.prototype.uv=function(t,e){var i=a(this);if("[object Function]"!=lt.prototype.toString.call(t))throw new TypeError;return i.cv(function(r,n){if(!t.call(e,r,n,i))throw StopIteration;return r})},a.prototype.hv=function(t,e){var i=a(this),r=0;if("[object Function]"!=lt.prototype.toString.call(t))throw new TypeError;return new i.constructor(function(){for(var n;;)if(n=i.next(),t.call(e,n,r++,i))return n})},a.prototype.cg=function(){return a.lv(Array.prototype.concat.apply(this,arguments))},a.prototype.enumerate=function(t){return a.count(t).cg(this)},a.Df=function(t){var e;return e=0,new a(function(){if("object"==typeof t)for(;!(e in t);){if(e>=t.length)throw StopIteration;e+=1}else if(e>=t.length)throw StopIteration;var i=t[e];return e+=1,i})},a.dv=function(t,e){2>arguments.length&&(e=1/0);var i=function(){throw StopIteration};return new a(function(){var r;try{return i()}catch(n){if(isStopIteration(n)){if(0>=e)throw n;return e--,r=a.Df(t),(i=r.next.bind(r))()}throw n}})},a.concat=function(t){var t=a(t),e=function(){throw StopIteration};return new a(function(){var i;try{return e()}catch(r){if(isStopIteration(r))return i=a(t.next()),(e=i.next.bind(i))();throw r}})},a.lv=function(t){return t=a(t).map(a),new a(1>t.length?[]:function(){var e,i=t.map(function(t){try{return t.next()}catch(i){if(!isStopIteration(i))throw i;e=!0}});if(e)throw StopIteration;return i})},a.cg=function(){return a.lv(Array.prototype.slice.call(arguments))},a.chain=function(){return a.concat(Array.prototype.slice.call(arguments))},a.range=function(t,e,i){return 3>arguments.length&&(i=1),2>arguments.length&&(e=t,t=0),t=t||0,new a(function(){if(t>=e)throw StopIteration;if(isNaN(t))throw"";var r=t;return t+=i,r})},a.count=function(t,e){return a.range(t,1/0,e||1)},a.repeat=function(t,e){return 2>arguments.length&&(e=1/0),new a.range((+e)).cv(function(){return t})},"undefined"==typeof isStopIteration&&(t.fv=function(t){return"[object StopIteration]"===lt.prototype.toString.call(t)}),"undefined"==typeof StopIteration){t.StopIteration={};var dt=lt.prototype.toString;lt.prototype.toString=function(){return this===t.StopIteration||this instanceof t.gv?"[object StopIteration]":dt.call(this,arguments)}}"undefined"==typeof ReturnValue&&(t.gv=function(e){return this instanceof t.gv?void(this.value=e):new t.gv(e)}),ut.eg&&(ut=ut.eg);var ft={},gt=x,vt=ht,yt=M;ft.eg=Array,Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=function(t){var e=[];return e.addEach(t),e},Array.prototype.addEach=gt.prototype.addEach,Array.prototype.ig=gt.prototype.ig,Array.prototype.toArray=gt.prototype.toArray,Array.prototype.rg=gt.prototype.rg,Array.prototype.all=gt.prototype.all,Array.prototype.ie=gt.prototype.ie,Array.prototype.min=gt.prototype.min,Array.prototype.max=gt.prototype.max,Array.prototype.og=gt.prototype.og,Array.prototype.sg=gt.prototype.sg,Array.prototype.only=gt.prototype.only,Array.prototype.ag=gt.prototype.ag,Array.prototype.cg=gt.prototype.cg,Array.prototype.hg=gt.prototype.hg,Array.prototype.reversed=gt.prototype.reversed,Array.prototype.ng=function(t){var e=new this.constructor;return e.addEach(t),e},Array.prototype.has=function(t,e){return-1!==this.find(t,e)},Array.prototype.get=function(t){return this[t]},Array.prototype.set=function(t,e){return this.splice(t,1,e),!0},Array.prototype.add=function(t){return this.push(t),!0},Array.prototype["delete"]=function(t,e){var i=this.find(t,e);return-1!==i&&(this.splice(i,1),!0)},Array.prototype.find=function(t,e){for(var e=e||this.Mf||Object.ol,i=0;i<this.length;i++)if(i in this&&e(this[i],t))return i;return-1},Array.prototype.vv=function(t,e){var e=e||this.Mf||Object.ol,i=this.length;do if(i--,i in this&&e(this[i],t))return i;while(0<i);return-1},Array.prototype.yv=function(t,e,i){var r=Array.prototype.slice.call(arguments,0,2);return i&&r.push.apply(r,i),this.splice.apply(this,r)},Array.prototype.ug=function(){if(0===this.length)throw Error("Can't get one element from empty array.");for(var t in this)if(Object.av(this,t))return this[t]},Array.prototype.clear=function(){return this.length=0,this},Array.prototype.Yf=function(t,e){var i,r,n,o,e=e||Object.Yf;if(this===t)return 0;if(!t||!Array.isArray(t))return vt.prototype.Yf.call(this,t,e);for(r=Math.min(this.length,t.length),i=0;i<r;i++)if(i in this){if(!(i in t))return-1;if(n=this[i],o=t[i],n=e(n,o))return n}else if(i in t)return 1;return this.length-t.length},Array.prototype.ol=function(t){var e,i,r=r||Object.ol,n=0,o=this.length;if(this===t)return!0;if(!t||!Array.isArray(t))return vt.prototype.ol.call(this,t);if(o!==t.length)return!1;for(;n<o;++n)if(n in this){if(e=this[n],i=t[n],e!==i&&e&&i&&!r(e,i))return!1}else if(n in t)return!1;return!0},Array.prototype.clone=function(t,e){if(void 0===t)t=1/0;else if(0===t)return this;var i,e=e||new yt,r=[];for(i in this)Object.av(this,i)&&(r[i]=Object.clone(this[i],t-1,e));return r},Array.prototype.Df=function(t,e){return new c(this,t,e)},Array.prototype.Iterator=c,c.prototype.next=function(){if(this.start===(null==this.end?this.Hf.length:this.end))throw StopIteration;return this.Hf[this.start++]},ft.eg&&(ft=ft.eg);var mt={};mt.eg=h;var wt=ht,Tt=X;Object.addEach(h.prototype,x.prototype),Object.addEach(h.prototype,wt.prototype),Object.addEach(h.prototype,Tt.prototype),h.prototype.ng=function(t){return new this.constructor(t,this.Mf,this.content)},h.prototype.find=function(t,e){for(var e=e||this.Mf,i=this.head,r=i.next;r!==i;){if(e(r.value,t))return r;r=r.next}},h.prototype.vv=function(t,e){for(var e=e||this.Mf,i=this.head,r=i.Lf;r!==i;){if(e(r.value,t))return r;r=r.Lf}},h.prototype.has=function(t,e){return!!this.find(t,e)},h.prototype.get=function(t,e){var i=this.find(t,e);return i?i.value:this.content()},h.prototype["delete"]=function(t,e){var i=this.vv(t,e);return!!i&&(i["delete"](),this.length--,!0)},h.prototype.clear=function(){this.head.next=this.head.Lf=this.head,this.length=0},h.prototype.add=function(t){return this.head.mv(new this.Node(t)),this.length++,!0},h.prototype.push=function(){for(var t=this.head,e=0;e<arguments.length;e++){var i=new this.Node(arguments[e]);t.mv(i),this.length++}},h.prototype.unshift=function(){for(var t=this.head,e=0;e<arguments.length;e++){var i=new this.Node(arguments[e]);t.wv(i),this.length++,t=i}},h.prototype.pop=function(){var t,e=this.head;return e.Lf!==e&&(t=e.Lf.value,e.Lf["delete"](),this.length--),t},h.prototype.shift=function(){var t,e=this.head;return e.Lf!==e&&(t=e.next.value,e.next["delete"](),this.length--),t},h.prototype.Tv=function(t,e){var i=this.head;if("number"==typeof t){var r=t;if(0<=r)for(t=i.next;r&&(r--,t=t.next,!(t==i)););else for(t=i;0>r&&(r++,t=t.Lf,!(t==i)););return t}return t||e},h.prototype.slice=function(t,e){for(var i=[],r=this.head,t=this.Tv(t,r.next),e=this.Tv(e,r);t!==e&&t!==r;)i.push(t.value),t=t.next;return i},h.prototype.splice=function(t,e){return this.yv(t,e,Array.prototype.slice.call(arguments,2))},h.prototype.yv=function(t,e,i){var r=[],n=t,t=this.Tv(t,this.head);for(void 0===e&&(e=1/0);e--&&0<=e&&t!==this.head;)r.push(t.value),t["delete"](),t=t.next,this.length--;if(i){for(null===n&&t===this.head&&(t=this.head.next),e=0;e<i.length;e++)n=new this.Node(i[e]),t.mv(n);this.length+=i.length}return r},h.prototype.reverse=function(){var t=this.head;do{var e=t.next;t.next=t.Lf,t.Lf=e,t=t.next}while(t!==this.head);return this},h.prototype.reduce=function(t,e,i){for(var r=this.head,n=r.next;n!==r;)e=t.call(i,e,n.value,n,this),n=n.next;return e},h.prototype.reduceRight=function(t,e,i){for(var r=this.head,n=r.Lf;n!==r;)e=t.call(i,e,n.value,n,this),n=n.Lf;return e},h.prototype.ug=function(){if(this.head===this.head.next)throw Error("Can't get one value from empty list");return this.head.next.value},h.prototype.Df=function(){return new p(this.head)},p.prototype.next=function(){if(this.Uf===this.head)throw StopIteration;var t=this.Uf.value;return this.Uf=this.Uf.next,t},h.prototype.Node=u,u.prototype["delete"]=function(){this.Lf.next=this.next,this.next.Lf=this.Lf},u.prototype.mv=function(t){var e=this.Lf;this.Lf=t,t.Lf=e,e.next=t,t.next=this},u.prototype.wv=function(t){var e=this.next;this.next=t,t.next=e,e.Lf=t,t.Lf=this},mt.eg&&(mt=mt.eg);var St={},bt=mt;St.eg=l,l.prototype.Sv=function(){return this.bv||(this.bv={Hg:new bt,Lg:new bt}),this.bv},l.prototype.Ev=function(t,e){this.makeObservable&&!this.dispatchMapChanges&&this.makeObservable();var i=this.Sv();(e?i.Hg:i.Lg).push(t),this.Iv=!0},l.prototype.Rv=function(t,e){var i=this.Sv(),i=(e?i.Hg:i.Lg).vv(t);if(!i)throw Error("Can't remove listener: does not exist.");i["delete"]()},l.prototype.kv=function(t,e,i){var r=this.Sv(),n="handleMap"+((i?"Will":"")+"Change");(i?r.Hg:r.Lg).forEach(function(i){var r=i,i=i[n]||i;i.call&&i.call(r,e,t,this)},this)},l.prototype.Cv=function(t){return this.Ev(t,!0)},l.prototype.Ov=function(t){return this.Rv(t,!0)},l.prototype.Pv=function(t,e){return this.kv(t,e,!0)},St.eg&&(St=St.eg);var Et={},It=ot,Rt=St,kt=X;Et.eg=d,It.addEach(d.prototype,Rt.prototype),It.addEach(d.prototype,kt.prototype),d.prototype.addEach=function(t){t&&It(t)===t&&("function"==typeof t.forEach?"function"==typeof t.keys?t.forEach(function(t,e){this.set(e,t)},this):t.forEach(function(t){this.set(t[0],t[1])},this):It.keys(t).forEach(function(e){this.set(e,t[e])},this))},d.prototype.get=function(t,e){var i=this.Vf.get(new this.Av(t));return i?i.value:1<arguments.length?e:this.content(t)},d.prototype.set=function(t,e){var i=new this.Av(t,e),r=this.Vf.get(i),n=!1;return r?(this.Iv&&this.Pv(t,r.value),r.value=e):(this.Iv&&this.Pv(t,void 0),this.Vf.add(i)&&(this.length++,n=!0)),this.Iv&&this.kv(t,e),n},d.prototype.add=function(t,e){return this.set(e,t)},d.prototype.has=function(t){return this.Vf.has(new this.Av(t))},d.prototype["delete"]=function(t){var e=new this.Av(t);if(this.Vf.has(e)){var i=this.Vf.get(e).value;return this.Iv&&this.Pv(t,i),this.Vf["delete"](e),this.length--,this.Iv&&this.kv(t,void 0),!0}return!1},d.prototype.clear=function(){this.Vf.clear(),this.length=0},d.prototype.reduce=function(t,e,i){return this.Vf.reduce(function(e,r){return t.call(i,e,r.value,r.key,this)},e,this)},d.prototype.reduceRight=function(t,e,i){return this.Vf.reduceRight(function(e,r){return t.call(i,e,r.value,r.key,this)},e,this)},d.prototype.keys=function(){return this.map(function(t,e){return e})},d.prototype.values=function(){return this.map(Function.identity)},d.prototype.Nv=function(){return this.map(function(t,e){return[e,t]})},d.prototype.ol=function(t,e){return e=e||It.ol,this===t||(It.vg(t,"every")?t.length===this.length&&t.every(function(t,i){return e(this.get(i),t)},this):It.keys(t).length===this.length&&It.keys(t).every(function(i){return e(this.get(i),t[i])},this))},d.prototype.Av=function(t,e){this.key=t,this.value=e},Et.eg&&(Et=Et.eg);var Ct={},Ot=x,Pt=Et,At=X;Ct.eg=f,Object.addEach(f.prototype,Ot.prototype),
    Object.addEach(f.prototype,Pt.prototype),Object.addEach(f.prototype,At.prototype),f.prototype.ng=function(t){return new this.constructor(t,this.mangle,this.content)},f.prototype.xv=function(t){if("string"!=typeof t)throw new TypeError("key must be a string.")},f.prototype.get=function(t,e){this.xv(t);var i="~"+t;return i in this.Vf?this.Vf[i]:1<arguments.length?e:this.content()},f.prototype.set=function(t,e){this.xv(t);var i="~"+t;return i in this.Vf?(this.Vf[i]=e,!1):(this.length++,this.Vf[i]=e,!0)},f.prototype.has=function(t){return this.xv(t),"~"+t in this.Vf},f.prototype["delete"]=function(t){return this.xv(t),"~"+t in this.Vf&&(delete this.Vf["~"+t],this.length--,!0)},f.prototype.clear=function(){for(var t in this.Vf)delete this.Vf[t];this.length=0},f.prototype.reduce=function(t,e,i){for(var r in this.Vf)e=t.call(i,e,this.Vf[r],r.slice(1),this);return e},f.prototype.ug=function(){for(var t in this.Vf)return this.Vf[t];throw Error("Can't get one value from empty dictionary.")},Ct.eg&&(Ct=Ct.eg);var Nt={},xt=Ct,Bt=mt,Ft=x,_t=B,Dt=H,Ht=X;Nt.eg=g,Object.addEach(g.prototype,Ft.prototype),Object.addEach(g.prototype,_t.prototype),Object.addEach(g.prototype,Ht.prototype),g.prototype.Jf=xt,g.prototype.Kf=Bt,g.prototype.ng=function(t){return new this.constructor(t,this.Mf,this.Qf,this.content)},g.prototype.has=function(t){var e=this.Qf(t);return this.qf.get(e).has(t)},g.prototype.get=function(t){var e=this.Qf(t),i=this.qf;return i.has(e)?i.get(e).get(t):this.content(t)},g.prototype["delete"]=function(t){var e=this.Qf(t),i=this.qf;if(i.has(e)){var r=i.get(e);if(r["delete"](t))return this.length--,0===r.length&&i["delete"](e),!0}return!1},g.prototype.clear=function(){this.qf.clear(),this.length=0},g.prototype.add=function(t){var e=this.Qf(t),i=this.qf;return i.has(e)||i.set(e,new this.Kf(null,this.Mf)),!i.get(e).has(t)&&(i.get(e).add(t),this.length++,!0)},g.prototype.reduce=function(t,e,i){return this.qf.reduce(function(e,r){return r.reduce(function(e,r){return t.call(i,e,r,r,this)},e,this)},e,this)},g.prototype.ug=function(){if(0===this.length)throw Error("Can't get one value from empty set.");return this.qf.ug().ug()},g.prototype.Df=function(){return this.qf.values().ag().Df()},g.prototype.log=function(t,e,i,r){t=t||Dt.kg,e=e||this.Bv,i||(i=console.log,r=console);var i=i.bind(r),n=this.qf,o=n.keys();o.forEach(function(s,a){var c,h;a===o.length-1?(c=t.bg,h=" "):(c=0===a?t.Tg:t.Eg,h=t.Ig);var p=n.get(s);i.call(r,c+t.mg+t.Tg+" "+s),p.forEach(function(n,o){var s,a;o===p.head.Lf?(s=t.bg,a=" "):(s=t.Eg,a=t.Ig);var c;e(o,function(e){c?i.call(r,h+" "+a+"  "+e):(i.call(r,h+" "+s+t.mg+t.mg+e),c=!0)},function(e){i.call(r,h+" "+t.Ig+"  "+e)})})})},g.prototype.Bv=function(t,e){var i=t.value;Object(i)===i?JSON.stringify(i,null,4).split("\n").forEach(function(t){e(" "+t)}):e(" "+i)},Nt.eg&&(Nt=Nt.eg);var Lt={},Mt=Nt,jt=x,Ut=Et,Vt=X;Lt.eg=v,Object.addEach(v.prototype,jt.prototype),Object.addEach(v.prototype,Ut.prototype),Object.addEach(v.prototype,Vt.prototype),v.prototype.ng=function(t){return new this.constructor(t,this.Mf,this.Qf,this.content)},v.prototype.log=function(t,e){e=e||this.stringify,this.Vf.log(t,e)},v.prototype.stringify=function(t,e){return e+JSON.stringify(t.key)+": "+JSON.stringify(t.value)},Lt.eg&&(Lt=Lt.eg);var Qt={},qt=mt,Jt=Nt,Kt=x,Gt=B,zt=X,Wt=rt;Qt.eg=y,Object.addEach(y.prototype,Kt.prototype),Object.addEach(y.prototype,Gt.prototype),Object.addEach(y.prototype,zt.prototype),Object.addEach(y.prototype,Wt.prototype),y.prototype.Gf=qt,y.prototype.zf=Jt,y.prototype.ng=function(t){return new this.constructor(t,this.Mf,this.Qf,this.content)},y.prototype.has=function(t){return t=new this.order.Node(t),this.Vf.has(t)},y.prototype.get=function(t){var e=new this.order.Node(t);return(e=this.Vf.get(e))?e.value:this.content(t)},y.prototype.add=function(t){var e=new this.order.Node(t);return!this.Vf.has(e)&&(this.$g&&this.nv([t],[],0),this.order.add(t),e=this.order.head.Lf,this.Vf.add(e),this.length++,this.$g&&this.Xg([t],[],0),!0)},y.prototype["delete"]=function(t){var e=new this.order.Node(t);return!!this.Vf.has(e)&&(this.$g&&this.nv([],[t],0),e=this.Vf.get(e),this.Vf["delete"](e),e["delete"](),this.length--,this.$g&&this.Xg([],[t],0),!0)},y.prototype.ug=function(){if(0===this.length)throw Error("Can't get one value from empty set.");return this.Vf.ug().value},y.prototype.clear=function(){this.Vf.clear(),this.order.clear(),this.length=0},y.prototype.reduce=function(t,e,i){return this.order.reduce(function(e,r){return t.call(i,e,r,r,this)},e,this)},y.prototype.reduceRight=function(t,e,i){return this.order.reduceRight(function(e,r){return t.call(i,e,r,r,this)},e,this)},y.prototype.Df=function(){return this.order.Df()},y.prototype.log=function(){var t=this.Vf;return t.log.apply(t,arguments)},Qt.eg&&(Qt=Qt.eg);var $t={},Yt=Qt,Xt=x,Zt=B,te=X;$t.eg=m,Object.addEach(m.prototype,Xt.prototype),Object.addEach(m.prototype,Zt.prototype),Object.addEach(m.prototype,te.prototype),m.prototype.ng=function(t){return new this.constructor(t,this.maxLength,this.Mf,this.Qf,this.content)},m.prototype.has=function(t){return this.Vf.has(t)},m.prototype.get=function(t){return t=this.Vf.get(t),void 0!==t?(this.Vf["delete"](t),this.Vf.add(t)):t=this.content(),t},m.prototype.add=function(t){return this.Vf.has(t)&&(this.Vf["delete"](t),this.length--),this.Vf.add(t),this.length++,!(this.Vf.length>this.maxLength)||(this.Vf["delete"](this.Vf.order.head.next.value),this.length--,!1)},m.prototype["delete"]=function(t){return!!this.Vf["delete"](t)&&(this.length--,!0)},m.prototype.ug=function(){if(0===this.length)throw Error("Can't get one value from empty collection.");return this.Vf.ug()},m.prototype.clear=function(){this.Vf.clear(),this.length=0},m.prototype.reduce=function(t,e,i){return this.Vf.reduce(function(e,r){return t.call(i,e,r,r,this)},e,this)},m.prototype.reduceRight=function(t,e,i){return this.Vf.reduceRight(function(t,e){return callback.call(i,t,e,e,this)},basis,this)},m.prototype.Df=function(){return this.Vf.Df()},$t.eg&&($t=$t.eg);var ee={},ie=$t,re=x,ne=Et,oe=X;ee.eg=w,Object.addEach(w.prototype,re.prototype),Object.addEach(w.prototype,ne.prototype),Object.addEach(w.prototype,oe.prototype),w.prototype.ng=function(t){return new this.constructor(t,this.maxLength,this.Mf,this.Qf,this.content)},w.prototype.log=function(t,e){e=e||this.stringify,this.Vf.log(t,e)},w.prototype.stringify=function(t,e){return e+JSON.stringify(t.key)+": "+JSON.stringify(t.value)},ee.eg&&(ee=ee.eg);var se={},ae=Qt,ce=x,he=Et,pe=X;se.eg=T,Object.addEach(T.prototype,ce.prototype),Object.addEach(T.prototype,he.prototype),Object.addEach(T.prototype,pe.prototype),T.prototype.ng=function(t){return new this.constructor(t,this.Mf,this.Qf,this.content)},T.prototype.log=function(t,e){e=e||this.stringify,this.Vf.log(t,e)},T.prototype.stringify=function(t,e){return e+JSON.stringify(t.key)+": "+JSON.stringify(t.value)},se.eg&&(se=se.eg);var ue={},le=se;ue.eg=S,S.prototype=Object.create(le.prototype),S.prototype.constructor=S,S.prototype.ng=function(t){return new this.constructor(t,this.Wf,this.Mf,this.Qf)},S.prototype.set=function(t,e){var i=this.get(t);i.yv(0,i.length,e)},S.prototype.Wf=function(){return[]},ue.eg&&(ue=ue.eg);var de={};de.eg=b;var fe=X,ge=rt;Object.addEach(b.prototype,x.prototype),Object.addEach(b.prototype,fe.prototype),Object.addEach(b.prototype,ge.prototype),b.prototype.ng=function(t){return new this.constructor(t,this.Mf,this.$f,this.content)},b.prototype.has=function(t){var e=E(this.Hf,t,this.$f);return 0<=e&&this.Mf(this.Hf[e],t)},b.prototype.get=function(t){var e=I(this.Hf,t,this.$f,this.Mf);return-1!==e?this.Hf[e]:this.content(t)},b.prototype.add=function(t){var e;e=this.Hf;var i=this.$f,r=E(e,t,i);if(0>r)e=-r-1;else{for(var n=e.length-1;r<n&&0===i(t,e[r+1]);)r++;e=r}return this.$g&&this.nv([t],[],e),this.Hf.splice(e,0,t),this.length++,this.$g&&this.Xg([t],[],e),!0},b.prototype["delete"]=function(t){var e=I(this.Hf,t,this.$f,this.Mf);return-1!==e&&(this.$g&&this.nv([],[t],e),this.Hf.splice(e,1),this.length--,this.$g&&this.Xg([],[t],e),!0)},b.prototype.indexOf=function(t){return I(this.Hf,t,this.$f,this.Mf)},b.prototype.lastIndexOf=function(t){return R(this.Hf,t,this.$f,this.Mf)},b.prototype.find=function(t){return I(this.Hf,t,this.$f,this.Mf)},b.prototype.vv=function(t){return R(this.Hf,t,this.$f,this.Mf)},b.prototype.push=function(){this.addEach(arguments)},b.prototype.unshift=function(){this.addEach(arguments)},b.prototype.pop=function(){return this.Hf.pop()},b.prototype.shift=function(){return this.Hf.shift()},b.prototype.slice=function(){return this.Hf.slice.apply(this.Hf,arguments)},b.prototype.splice=function(t,e){return this.yv(t,e,Array.prototype.slice.call(arguments,2))},b.prototype.yv=function(t,e,i){if(void 0===t&&void 0===e)return[];t=t||0,0>t&&(t+=this.length),void 0===e&&(e=1/0);var r=this.slice(t,t+e);return this.$g&&this.nv(i,r,t),this.Hf.splice(t,e),this.addEach(i),this.$g&&this.Xg(i,r,t),r},b.prototype.reduce=function(t,e,i){return this.Hf.reduce(function(e,r,n){return t.call(i,e,r,n,this)},e,this)},b.prototype.reduceRight=function(t,e,i){return this.Hf.reduceRight(function(t,e,r){return callback.call(i,t,e,r,this)},basis,this)},b.prototype.min=function(){if(this.length)return this.Hf[0]},b.prototype.max=function(){if(this.length)return this.Hf[this.length-1]},b.prototype.ug=function(){return this.Hf.ug()},b.prototype.clear=function(){var t;this.$g&&(t=this.Hf.slice(),this.nv([],t,0)),this.length=0,this.Hf.clear(),this.$g&&this.Xg([],t,0)},b.prototype.ol=function(t,e){return this.Hf.ol(t,e)},b.prototype.Yf=function(t,e){return this.Hf.Yf(t,e)},b.prototype.Df=function(t,e){return new this.Iterator(this.Hf,t,e)},b.prototype.Iterator=Array.prototype.Iterator,de.eg&&(de=de.eg);var ve={};ve.eg=k;var ye=de,me=B,we=X;k.prototype=Object.create(ye.prototype),k.prototype.constructor=k,Object.addEach(k.prototype,me.prototype),Object.addEach(k.prototype,we.prototype),k.prototype.add=function(t){return!this.has(t)&&(ye.prototype.add.call(this,t),!0)},k.prototype.reduce=function(t,e,i){var r=this;return this.Hf.reduce(function(e,n,o){return t.call(i,e,n,n,r,o)},e)},k.prototype.reduceRight=function(t,e,i){var r=this;return this.Hf.reduceRight(function(e,n,o){return t.call(i,e,n,n,r,o)},e)},ve.eg&&(ve=ve.eg);var Te={},Se=ve,be=x,Ee=Et,Ie=X;Te.eg=C,Object.addEach(C.prototype,be.prototype),Object.addEach(C.prototype,Ee.prototype),Object.addEach(C.prototype,Ie.prototype),C.prototype.ng=function(t){return new this.constructor(t,this.Mf,this.$f,this.content)},Te.eg&&(Te=Te.eg);var Re={};Re.eg=O;var ke=B,Ce=X,Oe=rt,Pe=H;Object.addEach(O.prototype,x.prototype),Object.addEach(O.prototype,ke.prototype),Object.addEach(O.prototype,Ce.prototype),Object.addEach(O.prototype,Oe.prototype),O.prototype.ng=function(t){return new this.constructor(t,this.Mf,this.$f,this.content)},O.prototype.has=function(t){return!!this.root&&(this.Zf(t),this.Mf(t,this.root.value))},O.prototype.get=function(t){return this.root&&(this.Zf(t),this.Mf(t,this.root.value))?this.root.value:this.content(t)},O.prototype.add=function(t){var e=new this.Node(t);return this.root?(this.Zf(t),!this.Mf(t,this.root.value)&&(this.$g&&this.nv([t],[],this.root.index),0>this.$f(t,this.root.value)?(e.right=this.root,e.left=this.root.left,this.root.left=null):(e.left=this.root,e.right=this.root.right,this.root.right=null),this.root.Fv(),e.Fv(),this.root=e,this.length++,this.$g&&this.Xg([t],[],this.root.index),!0)):(this.$g&&this.nv([t],[],0),this.root=e,this.length++,this.$g&&this.Xg([t],[],0),!0)},O.prototype["delete"]=function(t){if(this.root&&(this.Zf(t),this.Mf(t,this.root.value))){var e=this.root.index;if(this.$g&&this.nv([],[t],e),this.root.left){var i=this.root.right;this.root=this.root.left,this.Zf(t),this.root.right=i}else this.root=this.root.right;return this.length--,this.root&&this.root.Fv(),this.$g&&this.Xg([],[t],e),!0}return!1},O.prototype.indexOf=function(t){return this.root&&(this.Zf(t),this.Mf(t,this.root.value))?this.root.index:-1},O.prototype.find=function(t){if(this.root&&(this.Zf(t),this.Mf(t,this.root.value)))return this.root},O.prototype._v=function(t){if(this.root){for(t=t||this.root;t.right;)t=t.right;return t}},O.prototype.Dv=function(t){if(this.root){for(t=t||this.root;t.left;)t=t.left;return t}},O.prototype.Hv=function(t){if(this.root)return this.Zf(t),this.root},O.prototype.Lv=function(t){if(this.root)return this.Zf(t),this.root.tg()},O.prototype.Xf=function(t){if(this.root)return this.Zf(t),0===this.$f(t,this.root.value)?this.root:this.root.Mv()},O.prototype.jv=function(t){if(this.root)return this.Zf(t),this.$f(t,this.root.value),this.root.Mv()},O.prototype.pop=function(){if(this.root){var t=this._v();return this["delete"](t.value),t.value}},O.prototype.shift=function(){if(this.root){var t=this.Dv();return this["delete"](t.value),t.value}},O.prototype.push=function(){this.addEach(arguments)},O.prototype.unshift=function(){this.addEach(arguments)},O.prototype.slice=function(t,e){t=t||0,e=e||this.length,0>t&&(t+=this.length),0>e&&(e+=this.length);var i=[];if(this.root)for(this.Uv(t);this.root.index<e&&(i.push(this.root.value),this.root.right);)this.Zf(this.root.Mv().value);return i},O.prototype.splice=function(t,e){return this.yv(t,e,Array.prototype.slice.call(arguments,2))},O.prototype.yv=function(t,e,i){if(void 0===t&&void 0===e)return[];t=t||0,0>t&&(t+=this.length),void 0===e&&(e=1/0);var r=[];if(this.root)for(this.Uv(t),t=0;t<e;t++){r.push(this.root.value);var n=this.root.Mv();if(this["delete"](this.root.value),!n)break;this.Zf(n.value)}return this.addEach(i),r},O.prototype.Zf=function(t){var e,i,r,n,o,s;if(this.root){for(e=i=r=new this.Node,s=new this.Node,o=this.root;;)if(n=this.$f(t,o.value),0>n){if(!o.left)break;if(0>this.$f(t,o.left.value)&&(n=o.left,o.left=n.right,o.Fv(),n.right=o,n.Fv(),o=n,!o.left))break;n=new P,n.right=o,n.left=s.left,s.left=n,r.left=o,r.Fv(),r=o,o=o.left}else{if(!(0<n))break;if(!o.right)break;if(0<this.$f(t,o.right.value)&&(n=o.right,o.right=n.left,o.Fv(),n.left=o,n.Fv(),o=n,!o.right))break;n=new P,n.left=o,n.right=s.right,s.right=n,i.right=o,i.Fv(),i=o,o=o.right}for(i.right=o.left,i.Fv(),r.left=o.right,r.Fv(),o.left=e.right,o.right=e.left;s.left;)s.left.right.Fv(),s.left=s.left.left;for(;s.right;)s.right.left.Fv(),s.right=s.right.right;o.Fv(),this.root=o}},O.prototype.Uv=function(t){if(this.root){for(var e=this.root,i=this.root.index;i!==t;)if(i>t&&e.left)e=e.left,i-=1+(e.right?e.right.length:0);else{if(!(i<t&&e.right))break;e=e.right,i+=1+(e.left?e.left.length:0)}return this.Zf(e.value),this.root.index===t}return!1},O.prototype.reduce=function(t,e,i){return this.root&&(e=this.root.reduce(t,e,i,this)),e},O.prototype.reduceRight=function(t,e,i){return this.root&&(e=this.root.reduceRight(t,e,i,this)),e},O.prototype.min=function(t){if(t=this.Dv(t))return t.value},O.prototype.max=function(t){if(t=this._v(t))return t.value},O.prototype.ug=function(){if(!this.root)throw Error("Can't get one value from empty set");return this.root.value},O.prototype.clear=function(){var t;this.$g&&(t=this.toArray(),this.nv([],t,0)),this.root=null,this.length=0,this.$g&&this.Xg([],t,0)},O.prototype.Df=function(t,e){return new this.Iterator(this,t,e)},O.prototype.Iterator=A,O.prototype.summary=function(){return this.root?this.root.summary():"()"},O.prototype.log=function(t,e,i,r){t=t||Pe.Rg,e=e||this.Bv,i||(i=console.log,r=console),i=i.bind(r),this.root&&this.root.log(t,e,i,i)},O.prototype.Bv=function(t,e){e(" "+t.value)},O.Vv=Pe,O.prototype.Node=P,P.prototype.reduce=function(t,e,i,r,n){return n=n||0,this.left&&(e=this.left.reduce(t,e,i,r,n+1)),e=t.call(i,e,this.value,this.value,r,this,n),this.right&&(e=this.right.reduce(t,e,i,r,n+1)),e},P.prototype.reduceRight=function(t,e,i,r,n){return n=n||0,this.right&&(e=this.right.reduce(t,e,i,r,n+1)),e=t.call(i,e,this.value,this.value,r,this,n),this.left&&(e=this.left.reduce(t,e,i,r,n+1)),e},P.prototype.Fv=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0),this.index=this.left?this.left.length:0},P.prototype.Qv=function(){var t;if(t=1+(this.left?this.left.Qv():0),t+=this.right?this.right.Qv():0,this.length!==t)throw Error("Integrity check failed: "+this.summary());return t},P.prototype.Mv=function(){var t=this;if(t.right){for(t=t.right;t.left;)t=t.left;return t}},P.prototype.tg=function(){var t=this;if(t.left){for(t=t.left;t.right;)t=t.right;return t}},P.prototype.summary=function(){var t=this.value||"-",t=t+(" <"+this.length);return this.left||this.right?"("+t+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")":"("+t+")"},P.prototype.log=function(t,e,i,r){var n,o=this;n=this.left&&this.right?t.dg:this.left?t.wg:this.right?t.Tg:t.mg;var s;this.left&&this.left.log(t,e,function(e){s?r(t.Ig+" "+e):(s=!0,r(t.Sg+t.mg+e))},function(t){r("  "+t)});var a;e(this,function(e){a?i((o.right?t.Ig:" ")+e):(a=!0,i(n+e))},function(e){r((o.left?t.Ig:" ")+e)});var c;this.right&&this.right.log(t,e,function(e){c?i("  "+e):(c=!0,i(t.bg+t.mg+e))},function(e){i(t.Ig+" "+e)})},A.prototype.next=function(){var t;if(t=this.Lf?this.set.jv(this.Lf.value):this.set.Dv(),!t)throw StopIteration;if(void 0!==this.end&&0<=this.set.$f(t.value,this.end))throw StopIteration;return this.Lf=t,t.value},Re.eg&&(Re=Re.eg);var Ae={},Ne=Re,xe=x,Be=Et,Fe=X;Ae.eg=N,Object.addEach(N.prototype,xe.prototype),Object.addEach(N.prototype,Be.prototype),Object.addEach(N.prototype,Fe.prototype),N.prototype.ng=function(t){return new this.constructor(t,this.Mf,this.$f,this.content)},N.prototype.log=function(t,e){e=e||this.stringify,this.Vf.log(t,e)},N.prototype.qv=function(t,e,i,r){r=r||this.stringify,this.Vf.qv(t,e,i,r)},N.prototype.stringify=function(t,e,i,r){t.call(e,r+" "+i.value.key+": "+i.value.value)},Ae.eg&&(Ae=Ae.eg),t.Jv=mt,t.Set=Qt,t.Map=se,t.Kv=ue,t.WeakMap=M,t.Gv=Re,t.ni=Ae,t.zv=$t,t.Wv=ee,t.$v=de,t.oi=ve,t.Yv=Te,t.Xv=Nt,t.Zv=Lt,t.ty=Ct,t.Iterator=ut}(this)},function(t,e){t.t=function(){return new Function}},function(t,e){function i(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.ey(t,256):this.ey(t,e))}function r(){return new i(null)}function n(t,e,i,r,n,o){for(;--o>=0;){var s=e*this[t++]+i[r]+n;n=Math.floor(s/67108864),i[r++]=67108863&s}return n}function o(t,e,i,r,n,o){for(var s=32767&e,a=e>>15;--o>=0;){var c=32767&this[t],h=this[t++]>>15,p=a*c+h*s;c=s*c+((32767&p)<<15)+i[r]+(1073741823&n),n=(c>>>30)+(p>>>15)+a*h+(n>>>30),i[r++]=1073741823&c}return n}function s(t,e,i,r,n,o){for(var s=16383&e,a=e>>14;--o>=0;){var c=16383&this[t],h=this[t++]>>14,p=a*c+h*s;c=s*c+((16383&p)<<14)+i[r]+n,n=(c>>28)+(p>>14)+a*h,i[r++]=268435455&c}return n}function a(t){return Pt.charAt(t)}function c(t,e){var i=At[t.charCodeAt(e)];return null==i?-1:i}function h(t){for(var e=this.iy-1;e>=0;--e)t[e]=this[e];t.iy=this.iy,t.ny=this.ny}function p(t){this.iy=1,this.ny=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.oy:this.iy=0}function u(t){var e=r();return e.sy(t),e}function l(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.iy=0,this.ny=0;for(var n=t.length,o=!1,s=0;--n>=0;){var a=8==r?255&t[n]:c(t,n);a<0?"-"==t.charAt(n)&&(o=!0):(o=!1,0==s?this[this.iy++]=a:s+r>this.ay?(this[this.iy-1]|=(a&(1<<this.ay-s)-1)<<s,this[this.iy++]=a>>this.ay-s):this[this.iy-1]|=a<<s,s+=r,s>=this.ay&&(s-=this.ay))}8==r&&0!=(128&t[0])&&(this.ny=-1,s>0&&(this[this.iy-1]|=(1<<this.ay-s)-1<<s)),this.hy(),o&&i.ZERO.py(this,this)}function d(){for(var t=this.ny&this.uy;this.iy>0&&this[this.iy-1]==t;)--this.iy}function f(t){if(this.ny<0)return"-"+this.ly().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,n=!1,o="",s=this.iy,c=this.ay-s*this.ay%e;if(s-- >0)for(c<this.ay&&(i=this[s]>>c)>0&&(n=!0,o=a(i));s>=0;)c<e?(i=(this[s]&(1<<c)-1)<<e-c,i|=this[--s]>>(c+=this.ay-e)):(i=this[s]>>(c-=e)&r,c<=0&&(c+=this.ay,--s)),i>0&&(n=!0),n&&(o+=a(i));return n?o:"0"}function g(){var t=r();return i.ZERO.py(this,t),t}function v(){return this.ny<0?this.ly():this}function y(t){var e=this.ny-t.ny;if(0!=e)return e;var i=this.iy;if(e=i-t.iy,0!=e)return this.ny<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function m(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function w(){return this.iy<=0?0:this.ay*(this.iy-1)+m(this[this.iy-1]^this.ny&this.uy)}function T(t,e){var i;for(i=this.iy-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.iy=this.iy+t,e.ny=this.ny}function S(t,e){for(var i=t;i<this.iy;++i)e[i-t]=this[i];e.iy=Math.max(this.iy-t,0),e.ny=this.ny}function b(t,e){var i,r=t%this.ay,n=this.ay-r,o=(1<<n)-1,s=Math.floor(t/this.ay),a=this.ny<<r&this.uy;for(i=this.iy-1;i>=0;--i)e[i+s+1]=this[i]>>n|a,a=(this[i]&o)<<r;for(i=s-1;i>=0;--i)e[i]=0;e[s]=a,e.iy=this.iy+s+1,e.ny=this.ny,e.hy()}function E(t,e){e.ny=this.ny;var i=Math.floor(t/this.ay);if(i>=this.iy)return void(e.iy=0);var r=t%this.ay,n=this.ay-r,o=(1<<r)-1;e[0]=this[i]>>r;for(var s=i+1;s<this.iy;++s)e[s-i-1]|=(this[s]&o)<<n,e[s-i]=this[s]>>r;r>0&&(e[this.iy-i-1]|=(this.ny&o)<<n),e.iy=this.iy-i,e.hy()}function I(t,e){for(var i=0,r=0,n=Math.min(t.iy,this.iy);i<n;)r+=this[i]-t[i],e[i++]=r&this.uy,r>>=this.ay;if(t.iy<this.iy){for(r-=t.ny;i<this.iy;)r+=this[i],e[i++]=r&this.uy,r>>=this.ay;r+=this.ny}else{for(r+=this.ny;i<t.iy;)r-=t[i],e[i++]=r&this.uy,r>>=this.ay;r-=t.ny}e.ny=r<0?-1:0,r<-1?e[i++]=this.oy+r:r>0&&(e[i++]=r),e.iy=i,e.hy()}function R(t,e){var r=this.abs(),n=t.abs(),o=r.iy;for(e.iy=o+n.iy;--o>=0;)e[o]=0;for(o=0;o<n.iy;++o)e[o+r.iy]=r.gy(0,n[o],e,o,0,r.iy);e.ny=0,e.hy(),this.ny!=t.ny&&i.ZERO.py(e,e)}function k(t){for(var e=this.abs(),i=t.iy=2*e.iy;--i>=0;)t[i]=0;for(i=0;i<e.iy-1;++i){var r=e.gy(i,e[i],t,2*i,0,1);(t[i+e.iy]+=e.gy(i+1,2*e[i],t,2*i+1,r,e.iy-i-1))>=e.oy&&(t[i+e.iy]-=e.oy,t[i+e.iy+1]=1)}t.iy>0&&(t[t.iy-1]+=e.gy(i,e[i],t,2*i,0,1)),t.ny=0,t.hy()}function C(t,e,n){var o=t.abs();if(!(o.iy<=0)){var s=this.abs();if(s.iy<o.iy)return null!=e&&e.sy(0),void(null!=n&&this.vy(n));null==n&&(n=r());var a=r(),c=this.ny,h=t.ny,p=this.ay-m(o[o.iy-1]);p>0?(o.yy(p,a),s.yy(p,n)):(o.vy(a),s.vy(n));var u=a.iy,l=a[u-1];if(0!=l){var d=l*(1<<this.my)+(u>1?a[u-2]>>this.wy:0),f=this.Ty/d,g=(1<<this.my)/d,v=1<<this.wy,y=n.iy,w=y-u,T=null==e?r():e;for(a.Sy(w,T),n.by(T)>=0&&(n[n.iy++]=1,n.py(T,n)),i.ONE.Sy(u,T),T.py(a,a);a.iy<u;)a[a.iy++]=0;for(;--w>=0;){var S=n[--y]==l?this.uy:Math.floor(n[y]*f+(n[y-1]+v)*g);if((n[y]+=a.gy(0,S,n,w,0,u))<S)for(a.Sy(w,T),n.py(T,n);n[y]<--S;)n.py(T,n)}null!=e&&(n.Ey(u,e),c!=h&&i.ZERO.py(e,e)),n.iy=u,n.hy(),p>0&&n.Iy(p,n),c<0&&i.ZERO.py(n,n)}}}function O(t){var e=r();return this.abs().Ry(t,null,e),this.ny<0&&e.by(i.ZERO)>0&&t.py(e,e),e}function P(t){this.i=t}function A(t){return t.ny<0||t.by(this.i)>=0?t.ky(this.i):t}function N(t){return t}function x(t){t.Ry(this.i,null,t)}function B(t,e,i){t.Cy(e,i),this.reduce(i)}function F(t,e){t.Oy(e),this.reduce(e)}function _(){if(this.iy<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.oy)%this.oy,e>0?this.oy-e:-e}function D(t){this.i=t,this.Py=t.Ay(),this.Ny=32767&this.Py,this.xy=this.Py>>15,this.By=(1<<t.ay-15)-1,this.Fy=2*t.iy}function H(t){var e=r();return t.abs().Sy(this.i.iy,e),e.Ry(this.i,null,e),t.ny<0&&e.by(i.ZERO)>0&&this.i.py(e,e),e}function L(t){var e=r();return t.vy(e),this.reduce(e),e}function M(t){for(;t.iy<=this.Fy;)t[t.iy++]=0;for(var e=0;e<this.i.iy;++e){var i=32767&t[e],r=i*this.Ny+((i*this.xy+(t[e]>>15)*this.Ny&this.By)<<15)&t.uy;for(i=e+this.i.iy,t[i]+=this.i.gy(0,r,t,e,0,this.i.iy);t[i]>=t.oy;)t[i]-=t.oy,t[++i]++}t.hy(),t.Ey(this.i.iy,t),t.by(this.i)>=0&&t.py(this.i,t)}function j(t,e){t.Oy(e),this.reduce(e)}function U(t,e,i){t.Cy(e,i),this.reduce(i)}function V(){return 0==(this.iy>0?1&this[0]:this.ny)}function Q(t,e){if(t>4294967295||t<1)return i.ONE;var n=r(),o=r(),s=e._y(this),a=m(t)-1;for(s.vy(n);--a>=0;)if(e.Dy(n,o),(t&1<<a)>0)e.Hy(o,s,n);else{var c=n;n=o,o=c}return e.Ly(n)}function q(t,e){var i;return i=t<256||e.My()?new P(e):new D(e),this.exp(t,i)}function J(t){var e,i,r,n="",o=0;for(e=0;e<t.length&&t.charAt(e)!=xt;++e)r=Nt.indexOf(t.charAt(e)),r<0||(0==o?(n+=a(r>>2),i=3&r,o=1):1==o?(n+=a(i<<2|r>>4),i=15&r,o=2):2==o?(n+=a(i),n+=a(r>>2),i=3&r,o=3):(n+=a(i<<2|r>>4),n+=a(15&r),o=0));return 1==o&&(n+=a(i<<2)),n}function K(t){var e,i=J(t),r=new Array;for(e=0;2*e<i.length;++e)r[e]=parseInt(i.substring(2*e,2*e+2),16);return r}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
  function G(t,e){return new i(t,e)}function z(t,e){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var r=new Array,n=t.length-1;n>=0&&e>0;){var o=t.charCodeAt(n--);o<128?r[--e]=o:o>127&&o<2048?(r[--e]=63&o|128,r[--e]=o>>6|192):(r[--e]=63&o|128,r[--e]=o>>6&63|128,r[--e]=o>>12|224)}r[--e]=0;for(var s=new SecureRandom,a=new Array;e>2;){for(a[0]=0;0==a[0];)s.nextBytes(a);r[--e]=a[0]}return r[--e]=2,r[--e]=0,new i(r)}function W(t,e,i){for(var r="",n=0;r.length<e;)r+=i(String.fromCharCode.apply(String,t.concat([(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n]))),n+=1;return r}function $(t,e,r){if(t.length+2*Bt+2>e)throw"Message too long for RSA";var n,o="";for(n=0;n<e-t.length-2*Bt-2;n+=1)o+="\0";var s=rstr_sha1("")+o+""+t,a=new Array(Bt);(new SecureRandom).nextBytes(a);var c=W(a,s.length,r||rstr_sha1),h=[];for(n=0;n<s.length;n+=1)h[n]=s.charCodeAt(n)^c.charCodeAt(n);var p=W(h,a.length,rstr_sha1),u=[0];for(n=0;n<a.length;n+=1)u[n+1]=a[n]^p.charCodeAt(n);return new i(u.concat(h))}function Y(){this.n=null,this.e=0,this.d=null,this.o=null,this.jy=null,this.Uy=null,this.Vy=null,this.Qy=null}function X(t,e){this.qy=!0,"string"!=typeof t?(this.n=t,this.e=e):null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=G(t,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")}function Z(t){return t.Jy(this.e,this.n)}function tt(t){var e=z(t,this.n.Ky()+7>>3);if(null==e)return null;var i=this.Gy(e);if(null==i)return null;var r=i.toString(16);return 0==(1&r.length)?r:"0"+r}function et(t,e){var i=$(t,this.n.Ky()+7>>3,e);if(null==i)return null;var r=this.Gy(i);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n}function it(t,e){for(var i="",r=e/4-t.length,n=0;n<r;n++)i+="0";return i+t}function rt(t,e){var i=function(t){return KJUR.crypto.Wy.zy(t,e)},r=i(t);return this.$y(r,e)}function nt(t,e){var i=KJUR.crypto.Wy.Yy(t,e,this.n.Ky()),r=G(i,16),n=this.doPrivate(r),o=n.toString(16);return it(o,this.n.Ky())}function ot(t){return rt.call(this,t,"sha1")}function st(t){return rt.call(this,t,"sha256")}function at(t,e,i){for(var r="",n=0;r.length<e;)r+=hextorstr(i(rstrtohex(t+String.fromCharCode.apply(String,[(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n])))),n+=1;return r}function ct(t,e,i){var r=function(t){return KJUR.crypto.Wy.Xy(t,e)},n=r(rstrtohex(t));return void 0===i&&(i=-1),this.Zy(n,e,i)}function ht(t,e,r){var n,o=hextorstr(t),s=o.length,a=this.n.Ky()-1,c=Math.ceil(a/8),h=function(t){return KJUR.crypto.Wy.Xy(t,e)};if(r===-1||void 0===r)r=s;else if(r===-2)r=c-s-2;else if(r<-2)throw"invalid salt length";if(c<s+r+2)throw"data too long";var p="";r>0&&(p=new Array(r),(new SecureRandom).nextBytes(p),p=String.fromCharCode.apply(String,p));var u=hextorstr(h(rstrtohex("\0\0\0\0\0\0\0\0"+o+p))),l=[];for(n=0;n<c-r-s-2;n+=1)l[n]=0;var d=String.fromCharCode.apply(String,l)+""+p,f=at(u,d.length,h),g=[];for(n=0;n<d.length;n+=1)g[n]=d.charCodeAt(n)^f.charCodeAt(n);var v=65280>>8*c-a&255;for(g[0]&=~v,n=0;n<s;n++)g.push(u.charCodeAt(n));return g.push(188),it(this.doPrivate(new i(g)).toString(16),this.n.Ky())}function pt(t,e,i){var r=new Y;r.qh(e,i);var n=r.Gy(t);return n}function ut(t,e,i){var r=pt(t,e,i),n=r.toString(16).replace(/^1f+00/,"");return n}function lt(t){for(var e in KJUR.crypto.Wy.tm){var i=KJUR.crypto.Wy.tm[e],r=i.length;if(t.substring(0,r)==i){var n=[e,t.substring(r)];return n}}return[]}function dt(t,e,i,r){var n=ut(e,i,r),o=lt(n);if(0==o.length)return!1;var s=o[0],a=o[1],c=function(t){return KJUR.crypto.Wy.zy(t,s)},h=c(t);return a==h}function ft(t,e){var i=G(t,16),r=dt(e,i,this.n.toString(16),this.e.toString(16));return r}function gt(t,e){e=e.replace(Ft,""),e=e.replace(/[ \n]+/g,"");var i=G(e,16);if(i.Ky()>this.n.Ky())return 0;var r=this.Gy(i),n=r.toString(16).replace(/^1f+00/,""),o=lt(n);if(0==o.length)return!1;var s=o[0],a=o[1],c=function(t){return KJUR.crypto.Wy.zy(t,s)},h=c(t);return a==h}function vt(t,e){e=e.replace(Ft,""),e=e.replace(/[ \n]+/g,"");var i=G(e,16);if(i.Ky()>this.n.Ky())return 0;var r=this.Gy(i),n=r.toString(16).replace(/^1f+00/,""),o=lt(n);if(0==o.length)return!1;var s=(o[0],o[1]);return s==t}function yt(t,e,i,r){var n=function(t){return KJUR.crypto.Wy.Xy(t,i)},o=n(rstrtohex(t));return void 0===r&&(r=-1),this.em(o,e,i,r)}function mt(t,e,r,n){var o=new i(e,16);if(o.Ky()>this.n.Ky())return!1;var s,a=function(t){return KJUR.crypto.Wy.Xy(t,r)},c=hextorstr(t),h=c.length,p=this.n.Ky()-1,u=Math.ceil(p/8);if(n===-1||void 0===n)n=h;else if(n===-2)n=u-h-2;else if(n<-2)throw"invalid salt length";if(u<h+n+2)throw"data too long";var l=this.Gy(o).toByteArray();for(s=0;s<l.length;s+=1)l[s]&=255;for(;l.length<u;)l.unshift(0);if(188!==l[u-1])throw"encoded message does not end in 0xbc";l=String.fromCharCode.apply(String,l);var d=l.substr(0,u-h-1),f=l.substr(d.length,h),g=65280>>8*u-p&255;if(0!==(d.charCodeAt(0)&g))throw"bits beyond keysize not zero";var v=at(f,d.length,a),y=[];for(s=0;s<d.length;s+=1)y[s]=d.charCodeAt(s)^v.charCodeAt(s);y[0]&=~g;var m=u-h-n-2;for(s=0;s<m;s+=1)if(0!==y[s])throw"leftmost octets not zero";if(1!==y[m])throw"0x01 marker not found";return f===hextorstr(a(rstrtohex("\0\0\0\0\0\0\0\0"+c+String.fromCharCode.apply(String,y.slice(-n)))))}var wt={};wt.userAgent=!1;var Tt={};if("undefined"==typeof St||!St)var St={};St.im=function(){var t,e,i,r=arguments,n=null;for(t=0;t<r.length;t+=1)for(i=(""+r[t]).split("."),n=St,e="YAHOO"==i[0]?1:0;e<i.length;e+=1)n[i[e]]=n[i[e]]||{},n=n[i[e]];return n},St.log=function(t,e,i){var r=St.widget.Logger;return!(!r||!r.log)&&r.log(t,e,i)},St.register=function(t,e,i){var r,n,o,s,a,c=St.Ot.rm;for(c[t]||(c[t]={nm:[],om:[]}),r=c[t],n=i.version,o=i.pp,s=St.Ot.zi,r.name=t,r.version=n,r.pp=o,r.nm.push(n),r.om.push(o),r.sm=e,a=0;a<s.length;a+=1)s[a](r);e?(e.VERSION=n,e.am=o):St.log("mainClass is undefined for module "+t,"warn")},St.Ot=St.Ot||{rm:[],zi:[]},St.Ot.getVersion=function(t){return St.Ot.rm[t]||null},St.Ot.cm=function(t){var e,i=function(t){var e=0;return parseFloat(t.replace(/\./g,function(){return 1==e++?"":"."}))},r=wt,n={hm:0,opera:0,pm:0,um:0,chrome:0,lm:null,dm:0,fm:0,gm:0,vm:0,ym:null,mm:0,wm:0,Tm:r&&r.cajaVersion,Sm:!1,os:null},o=t||wt&&wt.userAgent,s=Tt&&Tt.location,a=s&&s.href;return n.Sm=a&&0===a.toLowerCase().indexOf("https"),o&&(/windows|win32/i.test(o)?n.os="windows":/macintosh/i.test(o)?n.os="macintosh":/rhino/i.test(o)&&(n.os="rhino"),/KHTML/.test(o)&&(n.um=1),e=o.match(/AppleWebKit\/([^\s]*)/),e&&e[1]&&(n.um=i(e[1]),/ Mobile\//.test(o)?(n.lm="Apple",e=o.match(/OS ([^\s]*)/),e&&e[1]&&(e=i(e[1].replace("_","."))),n.ym=e,n.fm=n.vm=n.gm=0,e=o.match(/iPad|iPod|iPhone/),e&&e[0]&&(n[e[0].toLowerCase()]=n.ym)):(e=o.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),e&&(n.lm=e[0]),/webOS/.test(o)&&(n.lm="WebOS",e=o.match(/webOS\/([^\s]*);/),e&&e[1]&&(n.wm=i(e[1]))),/ Android/.test(o)&&(n.lm="Android",e=o.match(/Android ([^\s]*);/),e&&e[1]&&(n.mm=i(e[1])))),e=o.match(/Chrome\/([^\s]*)/),e&&e[1]?n.chrome=i(e[1]):(e=o.match(/AdobeAIR\/([^\s]*)/),e&&(n.dm=e[0]))),n.um||(e=o.match(/Opera[\s\/]([^\s]*)/),e&&e[1]?(n.opera=i(e[1]),e=o.match(/Version\/([^\s]*)/),e&&e[1]&&(n.opera=i(e[1])),e=o.match(/Opera Mini[^;]*/),e&&(n.lm=e[0])):(e=o.match(/MSIE\s([^;]*)/),e&&e[1]?n.hm=i(e[1]):(e=o.match(/Gecko\/([^\s]*)/),e&&(n.pm=1,e=o.match(/rv:([^\s\)]*)/),e&&e[1]&&(n.pm=i(e[1]))))))),n},St.Ot.tf=St.Ot.cm(),function(){if(St.im("util","widget","example"),"undefined"!=typeof YAHOO_config){var t,e=YAHOO_config.listener,i=St.Ot.zi,r=!0;if(e){for(t=0;t<i.length;t++)if(i[t]==e){r=!1;break}r&&i.push(e)}}}(),St.lang=St.lang||{},function(){var t=St.lang,e=Object.prototype,i="[object Array]",r="[object Function]",n="[object Object]",o=[],s={bm:"&amp;",Em:"&lt;",Im:"&gt;",Rm:"&quot;",km:"&#x27;",Jp:"&#x2F;",Cm:"&#x60;"},a=["toString","valueOf"],c={isArray:function(t){return e.toString.apply(t)===i},Om:function(t){return"boolean"==typeof t},Pm:function(t){return"function"==typeof t||e.toString.apply(t)===r},Am:function(t){return null===t},Nm:function(t){return"number"==typeof t&&isFinite(t)},ov:function(e){return e&&("object"==typeof e||t.Pm(e))||!1},xm:function(t){return"string"==typeof t},Bm:function(t){return"undefined"==typeof t},Fm:St.Ot.tf.hm?function(i,r){var n,o,s;for(n=0;n<a.length;n+=1)o=a[n],s=r[o],t.Pm(s)&&s!=e[o]&&(i[o]=s)}:function(){},_m:function(t){return t.replace(/[&<>"'\/`]/g,function(t){return s[t]})},extend:function(i,r,n){if(!r||!i)throw new Error("extend failed, please check that all dependencies are included.");var o,s=function(){};if(s.prototype=r.prototype,i.prototype=new s,i.prototype.constructor=i,i.Dm=r.prototype,r.prototype.constructor==e.constructor&&(r.prototype.constructor=r),n){for(o in n)t.hasOwnProperty(n,o)&&(i.prototype[o]=n[o]);t.Fm(i.prototype,n)}},Hm:function(e,i){if(!i||!e)throw new Error("Absorb failed, verify dependencies.");var r,n,o=arguments,s=o[2];if(s&&s!==!0)for(r=2;r<o.length;r+=1)e[o[r]]=i[o[r]];else{for(n in i)!s&&n in e||(e[n]=i[n]);t.Fm(e,i)}return e},Lm:function(e,i){if(!i||!e)throw new Error("Augment failed, verify dependencies.");var r,n=[e.prototype,i.prototype];for(r=2;r<arguments.length;r+=1)n.push(arguments[r]);return t.Hm.apply(this,n),e},dump:function(e,i){var r,n,o=[],s="{...}",a="f(){...}",c=", ",h=" => ";if(!t.ov(e))return e+"";if(e instanceof Date||"nodeType"in e&&"tagName"in e)return e;if(t.Pm(e))return a;if(i=t.Nm(i)?i:3,t.isArray(e)){for(o.push("["),r=0,n=e.length;r<n;r+=1)t.ov(e[r])?o.push(i>0?t.dump(e[r],i-1):s):o.push(e[r]),o.push(c);o.length>1&&o.pop(),o.push("]")}else{o.push("{");for(r in e)t.hasOwnProperty(e,r)&&(o.push(r+h),t.ov(e[r])?o.push(i>0?t.dump(e[r],i-1):s):o.push(e[r]),o.push(c));o.length>1&&o.pop(),o.push("}")}return o.join("")},Mm:function(e,i,r,o){for(var s,a,c,h,p,u,l,d,f,g=[],v=e.length,y="dump",m=" ",w="{",T="}";(s=e.lastIndexOf(w,v),!(s<0))&&(a=e.indexOf(T,s),!(s+1>a));)l=e.substring(s+1,a),h=l,u=null,c=h.indexOf(m),c>-1&&(u=h.substring(c+1),h=h.substring(0,c)),p=i[h],r&&(p=r(h,p,u)),t.ov(p)?t.isArray(p)?p=t.dump(p,parseInt(u,10)):(u=u||"",d=u.indexOf(y),d>-1&&(u=u.substring(4)),f=p.toString(),p=f===n||d>-1?t.dump(p,parseInt(u,10)):f):t.xm(p)||t.Nm(p)||(p="~-"+g.length+"-~",g[g.length]=l),e=e.substring(0,s)+p+e.substring(a+1),o===!1&&(v=s-1);for(s=g.length-1;s>=0;s-=1)e=e.replace(new RegExp("~-"+s+"-~"),"{"+g[s]+"}","g");return e},trim:function(t){try{return t.replace(/^\s+|\s+$/g,"")}catch(e){return t}},jm:function(){var e,i={},r=arguments,n=r.length;for(e=0;e<n;e+=1)t.Hm(i,r[e],!0);return i},Um:function(e,i,r,n,s){e=e||0,i=i||{};var a,c,h=r,p=n;if(t.xm(r)&&(h=i[r]),!h)throw new TypeError("method undefined");return t.Bm(n)||t.isArray(p)||(p=[n]),a=function(){h.apply(i,p||o)},c=s?setInterval(a,e):setTimeout(a,e),{interval:s,cancel:function(){this.interval?clearInterval(c):clearTimeout(c)}}},Vm:function(e){return t.ov(e)||t.xm(e)||t.Nm(e)||t.Om(e)}};t.hasOwnProperty=e.hasOwnProperty?function(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}:function(e,i){return!t.Bm(e[i])&&e.constructor.prototype[i]!==e[i]},c.Hm(t,c,!0),St.util.Lang=t,t.Qm=t.Lm,St.Qm=t.Lm,St.extend=t.extend}(),St.register("yahoo",St,{version:"2.9.0",pp:"2800"});/*! CryptoJS v3.1.2 core-fix.js
   * code.google.com/p/crypto-js
   * (c) 2009-2013 by Jeff Mott. All rights reserved.
   * code.google.com/p/crypto-js/wiki/License
   * THIS IS FIX of 'core.js' to fix Hmac issue.
   * https://code.google.com/p/crypto-js/issues/detail?id=84
   * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
   */
  var bt=bt||function(t,e){var i={},r=i.qm={},n=r.Jm=function(){function t(){}return{extend:function(e){t.prototype=this;var i=new t;return e&&i.Km(e),i.hasOwnProperty("init")||(i.init=function(){i.Gm.init.apply(this,arguments)}),i.init.prototype=i,i.Gm=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},Km:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=r.zm=n.extend({init:function(t,i){t=this.Wm=t||[],i!=e?this.$m=i:this.$m=4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.Wm,i=t.Wm,r=this.$m,n=t.$m;if(this.hy(),r%4)for(var o=0;o<n;o++){var s=i[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var o=0;o<n;o+=4)e[r+o>>>2]=i[o>>>2];return this.$m+=n,this},hy:function(){var e=this.Wm,i=this.$m;e[i>>>2]&=4294967295<<32-i%4*8,e.length=t.ceil(i/4)},clone:function(){var t=n.clone.call(this);return t.Wm=this.Wm.slice(0),t},random:function(e){for(var i=[],r=0;r<e;r+=4)i.push(4294967296*t.random()|0);return new o.init(i,e)}}),s=i.Ym={},a=s.Xm={stringify:function(t){for(var e=t.Wm,i=t.$m,r=[],n=0;n<i;n++){var o=e[n>>>2]>>>24-n%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,i=[],r=0;r<e;r+=2)i[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new o.init(i,e/2)}},c=s.Zm={stringify:function(t){for(var e=t.Wm,i=t.$m,r=[],n=0;n<i;n++){var o=e[n>>>2]>>>24-n%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,i=[],r=0;r<e;r++)i[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new o.init(i,e)}},h=s.tw={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},p=r.ew=n.extend({reset:function(){this.iw=new o.init,this.rw=0},nw:function(t){"string"==typeof t&&(t=h.parse(t)),this.iw.concat(t),this.rw+=t.$m},ow:function(e){var i=this.iw,r=i.Wm,n=i.$m,s=this.sw,a=4*s,c=n/a;c=e?t.ceil(c):t.max((0|c)-this.aw,0);var h=c*s,p=t.min(4*h,n);if(h){for(var u=0;u<h;u+=s)this.cw(r,u);var l=r.splice(0,h);i.$m-=p}return new o.init(l,p)},clone:function(){var t=n.clone.call(this);return t.iw=this.iw.clone(),t},aw:0}),u=(r.hw=p.extend({pw:n.extend(),init:function(t){this.pw=this.pw.extend(t),this.reset()},reset:function(){p.reset.call(this),this.uw()},update:function(t){return this.nw(t),this.ow(),this},lw:function(t){t&&this.nw(t);var e=this.dw();return e},sw:16,fw:function(t){return function(e,i){return new t.init(i).lw(e)}},gw:function(t){return function(e,i){return new u.HMAC.init(t,i).lw(e)}}}),i.vw={});return i}(Math);!function(t){function e(t,e,i,r,n,o,s){return t=t+(e&i|~e&r)+n+s,(t<<o|t>>>32-o)+e}function i(t,e,i,r,n,o,s){return t=t+(e&r|i&~r)+n+s,(t<<o|t>>>32-o)+e}function r(t,e,i,r,n,o,s){return t=t+(e^i^r)+n+s,(t<<o|t>>>32-o)+e}function n(t,e,i,r,n,o,s){return t=t+(i^(e|~r))+n+s,(t<<o|t>>>32-o)+e}for(var o=bt,s=o.qm,a=s.zm,c=s.hw,s=o.vw,h=[],p=0;64>p;p++)h[p]=4294967296*t.abs(t.sin(p+1))|0;s=s.yw=c.extend({uw:function(){this.mw=new a.init([1732584193,4023233417,2562383102,271733878])},cw:function(t,o){for(var s=0;16>s;s++){var a=o+s,c=t[a];t[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var s=this.mw.Wm,a=t[o+0],c=t[o+1],p=t[o+2],u=t[o+3],l=t[o+4],d=t[o+5],f=t[o+6],g=t[o+7],v=t[o+8],y=t[o+9],m=t[o+10],w=t[o+11],T=t[o+12],S=t[o+13],b=t[o+14],E=t[o+15],I=s[0],R=s[1],k=s[2],C=s[3],I=e(I,R,k,C,a,7,h[0]),C=e(C,I,R,k,c,12,h[1]),k=e(k,C,I,R,p,17,h[2]),R=e(R,k,C,I,u,22,h[3]),I=e(I,R,k,C,l,7,h[4]),C=e(C,I,R,k,d,12,h[5]),k=e(k,C,I,R,f,17,h[6]),R=e(R,k,C,I,g,22,h[7]),I=e(I,R,k,C,v,7,h[8]),C=e(C,I,R,k,y,12,h[9]),k=e(k,C,I,R,m,17,h[10]),R=e(R,k,C,I,w,22,h[11]),I=e(I,R,k,C,T,7,h[12]),C=e(C,I,R,k,S,12,h[13]),k=e(k,C,I,R,b,17,h[14]),R=e(R,k,C,I,E,22,h[15]),I=i(I,R,k,C,c,5,h[16]),C=i(C,I,R,k,f,9,h[17]),k=i(k,C,I,R,w,14,h[18]),R=i(R,k,C,I,a,20,h[19]),I=i(I,R,k,C,d,5,h[20]),C=i(C,I,R,k,m,9,h[21]),k=i(k,C,I,R,E,14,h[22]),R=i(R,k,C,I,l,20,h[23]),I=i(I,R,k,C,y,5,h[24]),C=i(C,I,R,k,b,9,h[25]),k=i(k,C,I,R,u,14,h[26]),R=i(R,k,C,I,v,20,h[27]),I=i(I,R,k,C,S,5,h[28]),C=i(C,I,R,k,p,9,h[29]),k=i(k,C,I,R,g,14,h[30]),R=i(R,k,C,I,T,20,h[31]),I=r(I,R,k,C,d,4,h[32]),C=r(C,I,R,k,v,11,h[33]),k=r(k,C,I,R,w,16,h[34]),R=r(R,k,C,I,b,23,h[35]),I=r(I,R,k,C,c,4,h[36]),C=r(C,I,R,k,l,11,h[37]),k=r(k,C,I,R,g,16,h[38]),R=r(R,k,C,I,m,23,h[39]),I=r(I,R,k,C,S,4,h[40]),C=r(C,I,R,k,a,11,h[41]),k=r(k,C,I,R,u,16,h[42]),R=r(R,k,C,I,f,23,h[43]),I=r(I,R,k,C,y,4,h[44]),C=r(C,I,R,k,T,11,h[45]),k=r(k,C,I,R,E,16,h[46]),R=r(R,k,C,I,p,23,h[47]),I=n(I,R,k,C,a,6,h[48]),C=n(C,I,R,k,g,10,h[49]),k=n(k,C,I,R,b,15,h[50]),R=n(R,k,C,I,d,21,h[51]),I=n(I,R,k,C,T,6,h[52]),C=n(C,I,R,k,u,10,h[53]),k=n(k,C,I,R,m,15,h[54]),R=n(R,k,C,I,c,21,h[55]),I=n(I,R,k,C,v,6,h[56]),C=n(C,I,R,k,E,10,h[57]),k=n(k,C,I,R,f,15,h[58]),R=n(R,k,C,I,S,21,h[59]),I=n(I,R,k,C,l,6,h[60]),C=n(C,I,R,k,w,10,h[61]),k=n(k,C,I,R,p,15,h[62]),R=n(R,k,C,I,y,21,h[63]);s[0]=s[0]+I|0,s[1]=s[1]+R|0,s[2]=s[2]+k|0,s[3]=s[3]+C|0},dw:function(){var e=this.iw,i=e.Wm,r=8*this.rw,n=8*e.$m;i[n>>>5]|=128<<24-n%32;var o=t.floor(r/4294967296);for(i[(n+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[(n+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.$m=4*(i.length+1),this.ow(),e=this.mw,i=e.Wm,r=0;4>r;r++)n=i[r],i[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var t=c.clone.call(this);return t.mw=this.mw.clone(),t}}),o.yw=c.fw(s),o.ww=c.gw(s)}(Math),function(){var t=bt,e=t.qm,i=e.zm,r=e.hw,n=[],e=t.vw.Tw=r.extend({uw:function(){this.mw=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},cw:function(t,e){for(var i=this.mw.Wm,r=i[0],o=i[1],s=i[2],a=i[3],c=i[4],h=0;80>h;h++){if(16>h)n[h]=0|t[e+h];else{var p=n[h-3]^n[h-8]^n[h-14]^n[h-16];n[h]=p<<1|p>>>31}p=(r<<5|r>>>27)+c+n[h],p=20>h?p+((o&s|~o&a)+1518500249):40>h?p+((o^s^a)+1859775393):60>h?p+((o&s|o&a|s&a)-1894007588):p+((o^s^a)-899497514),c=a,a=s,s=o<<30|o>>>2,o=r,r=p}i[0]=i[0]+r|0,i[1]=i[1]+o|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+c|0},dw:function(){var t=this.iw,e=t.Wm,i=8*this.rw,r=8*t.$m;return e[r>>>5]|=128<<24-r%32,e[(r+64>>>9<<4)+14]=Math.floor(i/4294967296),e[(r+64>>>9<<4)+15]=i,t.$m=4*e.length,this.ow(),this.mw},clone:function(){var t=r.clone.call(this);return t.mw=this.mw.clone(),t}});t.Tw=r.fw(e),t.Sw=r.gw(e)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */
  var Et,It=0xdeadbeefcafe,Rt=15715070==(16777215&It);Rt&&"Microsoft Internet Explorer"==wt.appName?(i.prototype.gy=o,Et=30):Rt&&"Netscape"!=wt.appName?(i.prototype.gy=n,Et=26):(i.prototype.gy=s,Et=28),i.prototype.ay=Et,i.prototype.uy=(1<<Et)-1,i.prototype.oy=1<<Et;var kt=52;i.prototype.Ty=Math.pow(2,kt),i.prototype.my=kt-Et,i.prototype.wy=2*Et-kt;var Ct,Ot,Pt="0123456789abcdefghijklmnopqrstuvwxyz",At=new Array;for(Ct="0".charCodeAt(0),Ot=0;Ot<=9;++Ot)At[Ct++]=Ot;for(Ct="a".charCodeAt(0),Ot=10;Ot<36;++Ot)At[Ct++]=Ot;for(Ct="A".charCodeAt(0),Ot=10;Ot<36;++Ot)At[Ct++]=Ot;P.prototype._y=A,P.prototype.Ly=N,P.prototype.reduce=x,P.prototype.Hy=B,P.prototype.Dy=F,D.prototype._y=H,D.prototype.Ly=L,D.prototype.reduce=M,D.prototype.Hy=U,D.prototype.Dy=j,i.prototype.vy=h,i.prototype.sy=p,i.prototype.ey=l,i.prototype.hy=d,i.prototype.Sy=T,i.prototype.Ey=S,i.prototype.yy=b,i.prototype.Iy=E,i.prototype.py=I,i.prototype.Cy=R,i.prototype.Oy=k,i.prototype.Ry=C,i.prototype.Ay=_,i.prototype.My=V,i.prototype.exp=Q,i.prototype.toString=f,i.prototype.ly=g,i.prototype.abs=v,i.prototype.by=y,i.prototype.Ky=w,i.prototype.ky=O,i.prototype.Jy=q,i.ZERO=u(0),i.ONE=u(1),/*! asn1-1.0.9.js (c) 2013-2015 Kenji Urushima | kjur.github.com/jsrsasign/license
   */
  "undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.bw&&KJUR.bw||(KJUR.bw={}),KJUR.bw.Ew=new function(){this.Iw=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.Rw=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var r=e.substr(1),n=r.length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var o="",s=0;s<n;s++)o+="f";var a=new i(o,16),c=a.xor(t).add(i.ONE);e=c.toString(16).replace(/^-/,"")}return e},this.kw=function(t,e){var i=(KJUR.bw,bt.Ym.Xm.parse(t)),r=bt.Ym.Base64.stringify(i),n=r.replace(/(.{64})/g,"$1\r\n");return n=n.replace(/\r\n$/,""),"-----BEGIN "+e+"-----\r\n"+n+"\r\n-----END "+e+"-----\r\n"},this.Cw=function(t){var e=KJUR.bw,i=Object.keys(t);if(1!=i.length)throw"key of param shall be only one.";var r=i[0];if(":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+r+":")==-1)throw"undefined key: "+r;if("bool"==r)return new e.Ow(t[r]);if("int"==r)return new e.Pw(t[r]);if("bitstr"==r)return new e.Aw(t[r]);if("octstr"==r)return new e.Nw(t[r]);if("null"==r)return new e.xw(t[r]);if("oid"==r)return new e.Bw(t[r]);if("enum"==r)return new e.Fw(t[r]);if("utf8str"==r)return new e._w(t[r]);if("numstr"==r)return new e.Dw(t[r]);if("prnstr"==r)return new e.Hw(t[r]);if("telstr"==r)return new e.Lw(t[r]);if("ia5str"==r)return new e.Mw(t[r]);if("utctime"==r)return new e.jw(t[r]);if("gentime"==r)return new e.Uw(t[r]);if("seq"==r){for(var n=t[r],o=[],s=0;s<n.length;s++){var a=e.Ew.Cw(n[s]);o.push(a)}return new e.Vw({Hf:o})}if("set"==r){for(var n=t[r],o=[],s=0;s<n.length;s++){var a=e.Ew.Cw(n[s]);o.push(a)}return new e.Qw({Hf:o})}if("tag"==r){var c=t[r];if("[object Array]"===Object.prototype.toString.call(c)&&3==c.length){var h=e.Ew.Cw(c[2]);return new e.qw({tag:c[0],Jw:c[1],Kw:h})}var p={};if(void 0!==c.Jw&&(p.Jw=c.Jw),void 0!==c.tag&&(p.tag=c.tag),void 0===c.Kw)throw"obj shall be specified for 'tag'.";return p.Kw=e.Ew.Cw(c.Kw),new e.qw(p)}},this.Gw=function(t){var e=this.Cw(t);return e.zw()}},KJUR.bw.Ew.Ww=function(t){for(var e="",r=parseInt(t.substr(0,2),16),n=Math.floor(r/40),o=r%40,e=n+"."+o,s="",a=2;a<t.length;a+=2){var c=parseInt(t.substr(a,2),16),h=("00000000"+c.toString(2)).slice(-8);if(s+=h.substr(1,7),"0"==h.substr(0,1)){var p=new i(s,2);e=e+"."+p.toString(10),s=""}}return e},KJUR.bw.Ew.$w=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",n=new i(t,10),o=n.toString(2),s=7-o.length%7;7==s&&(s=0);for(var a="",c=0;c<s;c++)a+="0";o=a+o;for(var c=0;c<o.length-1;c+=7){var h=o.substr(c,7);c!=o.length-7&&(h="1"+h),r+=e(parseInt(h,2))}return r};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",o=t.split("."),s=40*parseInt(o[0])+parseInt(o[1]);n+=e(s),o.splice(0,2);for(var a=0;a<o.length;a++)n+=r(o[a]);return n},KJUR.bw.Yw=function(){var t="";this.Xw=function(){if("undefined"==typeof this.Zw||null==this.Zw)throw"this.hV is null or undefined.";if(this.Zw.length%2==1)throw"value hex must be even length: n="+t.length+",v="+this.Zw;var e=this.Zw.length/2,i=e.toString(16);if(i.length%2==1&&(i="0"+i),e<128)return i;var r=i.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);var n=128+r;return n.toString(16)+i},this.zw=function(){return(null==this.tT||this.eT)&&(this.Zw=this.iT(),this.rT=this.Xw(),this.tT=this.nT+this.rT+this.Zw,this.eT=!1),this.tT},this.oT=function(){return this.zw(),this.Zw},this.iT=function(){return""}},KJUR.bw.sT=function(t){KJUR.bw.sT.Dm.constructor.call(this);this.aT=function(){return this.ny},this.cT=function(t){this.tT=null,this.eT=!0,this.ny=t,this.Zw=stohex(this.ny)},this.hT=function(t){this.tT=null,this.eT=!0,this.ny=null,this.Zw=t},this.iT=function(){return this.Zw},"undefined"!=typeof t&&("string"==typeof t?this.cT(t):"undefined"!=typeof t.ac?this.cT(t.ac):"undefined"!=typeof t.pT&&this.hT(t.pT))},St.lang.extend(KJUR.bw.sT,KJUR.bw.Yw),KJUR.bw.uT=function(t){KJUR.bw.uT.Dm.constructor.call(this);this.lT=function(t){utc=t.getTime()+6e4*t.getTimezoneOffset();var e=new Date(utc);return e},this.dT=function(t,e,i){var r=this.fT,n=this.lT(t),o=String(n.getFullYear());"utc"==e&&(o=o.substr(2,2));var s=r(String(n.getMonth()+1),2),a=r(String(n.getDate()),2),c=r(String(n.getHours()),2),h=r(String(n.getMinutes()),2),p=r(String(n.getSeconds()),2),u=o+s+a+c+h+p;if(i===!0){var l=n.getMilliseconds();if(0!=l){var d=r(String(l),3);d=d.replace(/[0]+$/,""),u=u+"."+d}}return u+"Z"},this.fT=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.aT=function(){return this.ny},this.cT=function(t){this.tT=null,this.eT=!0,this.ny=t,this.Zw=stohex(t)},this.gT=function(t,e,i,r,n,o){var s=new Date(Date.UTC(t,e-1,i,r,n,o,0));this.vT(s)},this.iT=function(){return this.Zw}},St.lang.extend(KJUR.bw.uT,KJUR.bw.Yw),KJUR.bw.yT=function(t){KJUR.bw.sT.Dm.constructor.call(this);this.mT=function(t){this.tT=null,this.eT=!0,this.wT=t},this.TT=function(t){this.tT=null,this.eT=!0,this.wT.push(t)},this.wT=new Array,"undefined"!=typeof t&&"undefined"!=typeof t.Hf&&(this.wT=t.Hf)},St.lang.extend(KJUR.bw.yT,KJUR.bw.Yw),KJUR.bw.Ow=function(){KJUR.bw.Ow.Dm.constructor.call(this),this.nT="01",this.tT="0101ff"},St.lang.extend(KJUR.bw.Ow,KJUR.bw.Yw),KJUR.bw.Pw=function(t){KJUR.bw.Pw.Dm.constructor.call(this),this.nT="02",this.ST=function(t){this.tT=null,this.eT=!0,this.Zw=KJUR.bw.Ew.Rw(t)},this.bT=function(t){var e=new i(String(t),10);this.ST(e)},this.ET=function(t){this.Zw=t},this.iT=function(){return this.Zw},"undefined"!=typeof t&&("undefined"!=typeof t.bigint?this.ST(t.bigint):"undefined"!=typeof t["int"]?this.bT(t["int"]):"number"==typeof t?this.bT(t):"undefined"!=typeof t.pT&&this.ET(t.pT))},St.lang.extend(KJUR.bw.Pw,KJUR.bw.Yw),KJUR.bw.Aw=function(t){KJUR.bw.Aw.Dm.constructor.call(this),this.nT="03",this.IT=function(t){this.tT=null,this.eT=!0,this.Zw=t},this.RT=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;this.tT=null,this.eT=!0,this.Zw=i+e},this.kT=function(t){t=t.replace(/0+$/,"");var e=8-t.length%8;8==e&&(e=0);for(var i=0;i<=e;i++)t+="0";for(var r="",i=0;i<t.length-1;i+=8){var n=t.substr(i,8),o=parseInt(n,2).toString(16);1==o.length&&(o="0"+o),r+=o}this.tT=null,this.eT=!0,this.Zw="0"+e+r},this.CT=function(t){for(var e="",i=0;i<t.length;i++)e+=1==t[i]?"1":"0";this.kT(e)},this.OT=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=!1;return e},this.iT=function(){return this.Zw},"undefined"!=typeof t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.IT(t):"undefined"!=typeof t.pT?this.IT(t.pT):"undefined"!=typeof t.bin?this.kT(t.bin):"undefined"!=typeof t.Hf&&this.CT(t.Hf))},St.lang.extend(KJUR.bw.Aw,KJUR.bw.Yw),KJUR.bw.Nw=function(t){KJUR.bw.Nw.Dm.constructor.call(this,t),this.nT="04"},St.lang.extend(KJUR.bw.Nw,KJUR.bw.sT),KJUR.bw.xw=function(){KJUR.bw.xw.Dm.constructor.call(this),this.nT="05",this.tT="0500"},St.lang.extend(KJUR.bw.xw,KJUR.bw.Yw),KJUR.bw.Bw=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",n=new i(t,10),o=n.toString(2),s=7-o.length%7;7==s&&(s=0);for(var a="",c=0;c<s;c++)a+="0";o=a+o;for(var c=0;c<o.length-1;c+=7){var h=o.substr(c,7);c!=o.length-7&&(h="1"+h),r+=e(parseInt(h,2))}return r};KJUR.bw.Bw.Dm.constructor.call(this),this.nT="06",this.ET=function(t){this.tT=null,this.eT=!0,this.ny=null,this.Zw=t},this.PT=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var i="",n=t.split("."),o=40*parseInt(n[0])+parseInt(n[1]);i+=e(o),n.splice(0,2);for(var s=0;s<n.length;s++)i+=r(n[s]);this.tT=null,this.eT=!0,this.ny=null,this.Zw=i},this.AT=function(t){if("undefined"==typeof KJUR.bw.x509.NT.name2oidList[t])throw"DERObjectIdentifier oidName undefined: "+t;var e=KJUR.bw.x509.NT.name2oidList[t];this.PT(e)},this.iT=function(){return this.Zw},"undefined"!=typeof t&&("string"==typeof t&&t.match(/^[0-2].[0-9.]+$/)?this.PT(t):void 0!==KJUR.bw.x509.NT.name2oidList[t]?this.PT(KJUR.bw.x509.NT.name2oidList[t]):"undefined"!=typeof t.oid?this.PT(t.oid):"undefined"!=typeof t.pT?this.ET(t.pT):"undefined"!=typeof t.name&&this.AT(t.name))},St.lang.extend(KJUR.bw.Bw,KJUR.bw.Yw),KJUR.bw.Fw=function(t){KJUR.bw.Fw.Dm.constructor.call(this),this.nT="0a",this.ST=function(t){this.tT=null,this.eT=!0,this.Zw=KJUR.bw.Ew.Rw(t)},this.bT=function(t){var e=new i(String(t),10);this.ST(e)},this.ET=function(t){this.Zw=t},this.iT=function(){return this.Zw},"undefined"!=typeof t&&("undefined"!=typeof t["int"]?this.bT(t["int"]):"number"==typeof t?this.bT(t):"undefined"!=typeof t.pT&&this.ET(t.pT))},St.lang.extend(KJUR.bw.Fw,KJUR.bw.Yw),KJUR.bw._w=function(t){KJUR.bw._w.Dm.constructor.call(this,t),this.nT="0c"},St.lang.extend(KJUR.bw._w,KJUR.bw.sT),KJUR.bw.Dw=function(t){KJUR.bw.Dw.Dm.constructor.call(this,t),this.nT="12"},St.lang.extend(KJUR.bw.Dw,KJUR.bw.sT),KJUR.bw.Hw=function(t){KJUR.bw.Hw.Dm.constructor.call(this,t),this.nT="13"},St.lang.extend(KJUR.bw.Hw,KJUR.bw.sT),KJUR.bw.Lw=function(t){KJUR.bw.Lw.Dm.constructor.call(this,t),this.nT="14"},St.lang.extend(KJUR.bw.Lw,KJUR.bw.sT),KJUR.bw.Mw=function(t){KJUR.bw.Mw.Dm.constructor.call(this,t),this.nT="16"},St.lang.extend(KJUR.bw.Mw,KJUR.bw.sT),KJUR.bw.jw=function(t){KJUR.bw.jw.Dm.constructor.call(this,t),this.nT="17",this.vT=function(t){this.tT=null,this.eT=!0,this.xT=t,this.ny=this.dT(this.xT,"utc"),this.Zw=stohex(this.ny)},this.iT=function(){return"undefined"==typeof this.xT&&"undefined"==typeof this.ny&&(this.xT=new Date,this.ny=this.dT(this.xT,"utc"),this.Zw=stohex(this.ny)),this.Zw},void 0!==t&&(void 0!==t.ac?this.cT(t.ac):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.cT(t):void 0!==t.pT?this.hT(t.pT):void 0!==t.xT&&this.vT(t.xT))},St.lang.extend(KJUR.bw.jw,KJUR.bw.uT),KJUR.bw.Uw=function(t){KJUR.bw.Uw.Dm.constructor.call(this,t),this.nT="18",this.BT=!1,this.vT=function(t){this.tT=null,this.eT=!0,this.xT=t,this.ny=this.dT(this.xT,"gen",this.BT),this.Zw=stohex(this.ny)},this.iT=function(){return void 0===this.xT&&void 0===this.ny&&(this.xT=new Date,this.ny=this.dT(this.xT,"gen",this.BT),this.Zw=stohex(this.ny)),this.Zw},void 0!==t&&(void 0!==t.ac?this.cT(t.ac):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.cT(t):void 0!==t.pT?this.hT(t.pT):void 0!==t.xT&&this.vT(t.xT),t.millis===!0&&(this.BT=!0))},St.lang.extend(KJUR.bw.Uw,KJUR.bw.uT),KJUR.bw.Vw=function(t){KJUR.bw.Vw.Dm.constructor.call(this,t),this.nT="30",this.iT=function(){for(var t="",e=0;e<this.wT.length;e++){var i=this.wT[e];t+=i.zw()}return this.Zw=t,this.Zw}},St.lang.extend(KJUR.bw.Vw,KJUR.bw.yT),KJUR.bw.Qw=function(t){KJUR.bw.Qw.Dm.constructor.call(this,t),this.nT="31",this.FT=!0,this.iT=function(){for(var t=new Array,e=0;e<this.wT.length;e++){var i=this.wT[e];t.push(i.zw())}return 1==this.FT&&t.sort(),this.Zw=t.join(""),this.Zw},"undefined"!=typeof t&&"undefined"!=typeof t.sortflag&&0==t.sortflag&&(this.FT=!1)},St.lang.extend(KJUR.bw.Qw,KJUR.bw.yT),KJUR.bw.qw=function(t){KJUR.bw.qw.Dm.constructor.call(this),this.nT="a0",this.Zw="",this._T=!0,this.DT=null,this.HT=function(t,e,i){this.nT=e,this._T=t,this.DT=i,this._T?(this.Zw=this.DT.zw(),this.tT=null,this.eT=!0):(this.Zw=null,this.tT=i.zw(),this.tT=this.tT.replace(/^../,e),this.eT=!1)},this.iT=function(){return this.Zw},"undefined"!=typeof t&&("undefined"!=typeof t.tag&&(this.nT=t.tag),"undefined"!=typeof t.Jw&&(this._T=t.Jw),"undefined"!=typeof t.Kw&&(this.DT=t.Kw,this.HT(this._T,this.nT,this.DT)))},St.lang.extend(KJUR.bw.qw,KJUR.bw.Yw);/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */
  var Nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xt="=";/*! crypto-1.1.8.js (c) 2013-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
   */
  "undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.Wy=new function(){this.tm={sha1:"3021300906052b0e03021a05000414",LT:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",MT:"3041300d060960864801650304020205000430",jT:"3051300d060960864801650304020305000440",UT:"3020300c06082a864886f70d020205000410",VT:"3020300c06082a864886f70d020505000410",QT:"3021300906052b2403020105000414"},this.qT={VT:"cryptojs",sha1:"cryptojs",LT:"cryptojs",sha256:"cryptojs",MT:"cryptojs",jT:"cryptojs",QT:"cryptojs",JT:"cryptojs",KT:"cryptojs",GT:"cryptojs",zT:"cryptojs",WT:"cryptojs",$T:"cryptojs",YT:"cryptojs",XT:"cryptojs/jsrsa",ZT:"cryptojs/jsrsa",tS:"cryptojs/jsrsa",eS:"cryptojs/jsrsa",iS:"cryptojs/jsrsa",rS:"cryptojs/jsrsa",nS:"cryptojs/jsrsa",oS:"cryptojs/jsrsa",sS:"cryptojs/jsrsa",aS:"cryptojs/jsrsa",cS:"cryptojs/jsrsa",hS:"cryptojs/jsrsa",pS:"cryptojs/jsrsa",uS:"cryptojs/jsrsa",lS:"cryptojs/jsrsa",dS:"cryptojs/jsrsa",fS:"cryptojs/jsrsa",gS:"cryptojs/jsrsa",vS:"cryptojs/jsrsa",yS:"cryptojs/jsrsa",mS:"cryptojs/jsrsa",wS:"cryptojs/jsrsa",TS:"cryptojs/jsrsa",SS:"cryptojs/jsrsa"},this.bS={VT:bt.vw.yw,sha1:bt.vw.Tw,LT:bt.vw.SHA224,sha256:bt.vw.SHA256,MT:bt.vw.SHA384,jT:bt.vw.SHA512,QT:bt.vw.RIPEMD160},this.ES=function(t,e){if("undefined"==typeof this.tm[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.tm[e]+t},this.Yy=function(t,e,i){var r=this.ES(t,e),n=i/4;if(r.length+22>n)throw"key is too short for SigAlg: keylen="+i+","+e;for(var o="0001",s="00"+r,a="",c=n-o.length-s.length,h=0;h<c;h+=2)a+="ff";var p=o+a+s;return p},this.zy=function(t,e){var i=new KJUR.crypto.IS({RS:e});return i.kS(t)},this.Xy=function(t,e){var i=new KJUR.crypto.IS({RS:e});return i.CS(t)},this.sha1=function(t){var e=new KJUR.crypto.IS({RS:"sha1",OS:"cryptojs"});return e.kS(t)},this.sha256=function(t){var e=new KJUR.crypto.IS({RS:"sha256",OS:"cryptojs"});return e.kS(t)},this.PS=function(t){var e=new KJUR.crypto.IS({RS:"sha256",OS:"cryptojs"});return e.CS(t)},this.jT=function(t){var e=new KJUR.crypto.IS({RS:"sha512",OS:"cryptojs"});return e.kS(t)},this.NS=function(t){var e=new KJUR.crypto.IS({RS:"sha512",OS:"cryptojs"});return e.CS(t)},this.VT=function(t){var e=new KJUR.crypto.IS({RS:"md5",OS:"cryptojs"});return e.kS(t)},this.QT=function(t){var e=new KJUR.crypto.IS({RS:"ripemd160",OS:"cryptojs"});return e.kS(t)},this.xS=function(t){}},KJUR.crypto.IS=function(t){this.BS=function(t,e){if(null!=t&&void 0===e&&(e=KJUR.crypto.Wy.qT[t]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)!=-1&&"cryptojs"==e){try{this.FS=KJUR.crypto.Wy.bS[t].create()}catch(i){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+i}this._S=function(t){this.FS.update(t)},this.DS=function(t){var e=bt.Ym.Xm.parse(t);this.FS.update(e)},this.digest=function(){var t=this.FS.lw();return t.toString(bt.Ym.Xm)},this.kS=function(t){return this._S(t),this.digest()},this.CS=function(t){return this.DS(t),this.digest()}}if(":sha256:".indexOf(t)!=-1&&"sjcl"==e){try{this.FS=new sjcl.hash.sha256}catch(i){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+i}this._S=function(t){this.FS.update(t)},this.DS=function(t){var e=sjcl.codec.pT.toBits(t);this.FS.update(e)},this.digest=function(){var t=this.FS.lw();return sjcl.codec.pT.fromBits(t)},this.kS=function(t){return this._S(t),this.digest()},this.CS=function(t){return this.DS(t),this.digest()}}},this._S=function(t){throw"updateString(str) not supported for this alg/prov: "+this.HS+"/"+this.LS},this.DS=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.HS+"/"+this.LS},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.HS+"/"+this.LS},this.kS=function(t){throw"digestString(str) not supported for this alg/prov: "+this.HS+"/"+this.LS},this.CS=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.HS+"/"+this.LS},void 0!==t&&void 0!==t.RS&&(this.HS=t.RS,void 0===t.OS&&(this.LS=KJUR.crypto.Wy.qT[this.HS]),this.BS(this.HS,this.LS))},KJUR.crypto.MS=function(t){this.BS=function(t,e){if(t=t.toLowerCase(),null==t&&(t="hmacsha1"),t=t.toLowerCase(),"hmac"!=t.substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=KJUR.crypto.Wy.qT[t]),this.jS=t+"/"+e;var i=t.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(i)!=-1&&"cryptojs"==e){try{var r=KJUR.crypto.Wy.bS[i];this.mac=bt.vw.HMAC.create(r,this.US)}catch(n){throw"setAlgAndProvider hash alg set fail hashAlg="+i+"/"+n}this._S=function(t){this.mac.update(t)},this.DS=function(t){var e=bt.Ym.Xm.parse(t);this.mac.update(e)},this.VS=function(){var t=this.mac.lw();return t.toString(bt.Ym.Xm)},this.QS=function(t){return this._S(t),this.VS()},this.qS=function(t){return this.DS(t),this.VS()}}},this._S=function(t){throw"updateString(str) not supported for this alg/prov: "+this.jS},this.DS=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.jS},this.VS=function(){throw"digest() not supported for this alg/prov: "+this.jS},this.QS=function(t){throw"digestString(str) not supported for this alg/prov: "+this.jS},this.qS=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.jS},this.JS=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=rstrtohex(t)),void(this.US=bt.Ym.Xm.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;var e=null;if(void 0!==t.pT){if(t.pT.length%2!=0||!t.pT.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.pT;e=t.pT}if(void 0!==t.utf8&&(e=utf8tohex(t.utf8)),void 0!==t.rstr&&(e=rstrtohex(t.rstr)),void 0!==t.b64&&(e=J(t.b64)),void 0!==t.b64u&&(e=b64utohex(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.US=bt.Ym.Xm.parse(e)},void 0!==t&&(void 0!==t.US&&this.JS(t.US),void 0!==t.RS&&(this.HS=t.RS,void 0===t.OS&&(this.LS=KJUR.crypto.Wy.qT[this.HS]),this.BS(this.HS,this.LS)))},KJUR.crypto.Signature=function(t){var e=null;if(this.KS=function(){this.HS.match(/^(.+)with(.+)$/)&&(this.GS=RegExp.$1.toLowerCase(),this.zS=RegExp.$2.toLowerCase())},this.WS=function(t,e){for(var i="",r=e/4-t.length,n=0;n<r;n++)i+="0";return i+t},this.BS=function(t,e){if(this.KS(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.GS)!=-1){try{this.FS=new KJUR.crypto.IS({RS:this.GS})}catch(i){throw"setAlgAndProvider hash alg set fail alg="+this.GS+"/"+i}this.init=function(t,e){var i=null;try{i=void 0===e?KEYUTIL.getKey(t):KEYUTIL.getKey(t,e)}catch(r){throw"init failed:"+r}if(i.isPrivate===!0)this.$S=i,this.state="SIGN";else{if(i.qy!==!0)throw"init failed.:"+i;this.YS=i,this.state="VERIFY"}},this.XS=function(t){"string"==typeof t.ZS&&"string"==typeof t.tb?(this.ZS=t.ZS,this.tb=t.tb):this.$S=t,this.state="SIGN"},this.eb=function(t){"string"==typeof t.ib&&"string"==typeof t.tb?(this.ib=t.ib,this.tb=t.tb):t instanceof KJUR.crypto.ECDSA?this.YS=t:t instanceof Y&&(this.YS=t),this.state="VERIFY"},this.rb=function(t){var e=new X509;e.readCertPEM(t),this.YS=e.nb,this.state="VERIFY"},this._S=function(t){this.FS._S(t)},this.DS=function(t){this.FS.DS(t)},this.sign=function(){if(this.ob=this.FS.digest(),"undefined"!=typeof this.ZS&&"undefined"!=typeof this.tb){var t=new KJUR.crypto.ECDSA({curve:this.tb});this.sb=t.ab(this.ob,this.ZS)}else if(this.$S instanceof Y&&"rsaandmgf1"==this.zS)this.sb=this.$S.Zy(this.ob,this.GS,this.cb);else if(this.$S instanceof Y&&"rsa"==this.zS)this.sb=this.$S.$y(this.ob,this.GS);else if(this.$S instanceof KJUR.crypto.ECDSA)this.sb=this.$S.$y(this.ob);else{if(!(this.$S instanceof KJUR.crypto.DSA))throw"Signature: unsupported public key alg: "+this.zS;this.sb=this.$S.$y(this.ob)}return this.sb},this.hb=function(t){return this._S(t),this.sign()},this.ab=function(t){return this.DS(t),this.sign()},this.verify=function(t){if(this.ob=this.FS.digest(),"undefined"!=typeof this.ib&&"undefined"!=typeof this.tb){var e=new KJUR.crypto.ECDSA({curve:this.tb});return e.verifyHex(this.ob,t,this.ib)}if(this.YS instanceof Y&&"rsaandmgf1"==this.zS)return this.YS.em(this.ob,t,this.GS,this.cb);if(this.YS instanceof Y&&"rsa"==this.zS)return this.YS.pb(this.ob,t);if(this.YS instanceof KJUR.crypto.ECDSA)return this.YS.pb(this.ob,t);if(this.YS instanceof KJUR.crypto.DSA)return this.YS.pb(this.ob,t);throw"Signature: unsupported public key alg: "+this.zS}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.ub},this.eb=function(t){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.ub},this.rb=function(t){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.ub},this.XS=function(t){throw"initSign(prvKey) not supported for this alg:prov="+this.ub},this._S=function(t){throw"updateString(str) not supported for this alg:prov="+this.ub},this.DS=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.ub},this.sign=function(){throw"sign() not supported for this alg:prov="+this.ub},this.hb=function(t){throw"digestString(str) not supported for this alg:prov="+this.ub},this.ab=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.ub},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.ub},this.lb=t,void 0!==t&&(void 0!==t.RS&&(this.HS=t.RS,void 0===t.OS?this.LS=KJUR.crypto.Wy.qT[this.HS]:this.LS=t.OS,this.ub=this.HS+":"+this.LS,this.BS(this.HS,this.LS),this.KS()),void 0!==t.fb&&(this.cb=t.fb),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{var e=new Y;e.readPrivateKeyFromPEMString(t.prvkeypem),this.XS(e)}catch(i){throw"fatal error to load pem private key: "+i}}},KJUR.crypto.NT=new function(){this.gb={vb:"rsaEncryption",yb:"ecPublicKey",mb:"dsa",wb:"secp256r1",Tb:"secp192k1",Sb:"secp224r1",bb:"secp256k1",Eb:"secp521r1",Ib:"secp384r1",Rb:"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var Bt=20;Y.prototype.Gy=Z,Y.prototype.qh=X,Y.prototype.encrypt=tt,Y.prototype.kb=et,Y.prototype.type="RSA";/*! rsasign-1.2.7.js (c) 2012 Kenji Urushima | kjur.github.com/jsrsasign/license
   */
  var Ft=new RegExp("");Ft.compile("[^0-9a-f]","gi"),Y.prototype.$y=nt,Y.prototype.hb=rt,Y.prototype.Cb=ot,Y.prototype.Ob=st,Y.prototype.sign=rt,Y.prototype.Pb=ot,Y.prototype.Ab=st,Y.prototype.Zy=ht,Y.prototype.Nb=ct,Y.prototype.xb=ct,Y.Bb=-1,Y.Fb=-2,Y.prototype.pb=vt,Y.prototype.Jh=gt,Y.prototype._b=ft,Y.prototype.verify=gt,Y.prototype.Db=ft,Y.prototype.em=mt,Y.prototype.Hb=yt,Y.prototype.Lb=yt,Y.Mb=-2,e.jb=i,e.Mh=Y,e.Signature=KJUR.crypto.Signature,e.IS=KJUR.crypto.IS,e.Ub=bt,e.jh=J,e.Vb=K},function(t,e){"use strict";var i={};i.Qb=function(){return Math.random().toString(36).substr(2,10)},i.qb=i.Qb(),i.Jb=function(t){return t.trim().split("\n").map(function(t){return t.trim()})},i.Kb=function(t){var e=t.split("\nm=");return e.map(function(t,e){return(e>0?"m="+t:t).trim()+"\r\n"})},i.Gb=function(t,e){return i.Jb(t).filter(function(t){return 0===t.indexOf(e)})},i.zb=function(t){var e;e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" ");for(var i={Wb:e[0],$b:e[1],protocol:e[2].toLowerCase(),Yb:parseInt(e[3],10),Xb:e[4],port:parseInt(e[5],10),type:e[7]},r=8;r<e.length;r+=2)switch(e[r]){case"raddr":i.Zb=e[r+1];break;case"rport":i.tE=parseInt(e[r+1],10);break;case"tcptype":i.eE=e[r+1];break;default:i[e[r]]=e[r+1]}return i},i.iE=function(t){var e=[];e.push(t.Wb),e.push(t.$b),e.push(t.protocol.toUpperCase()),e.push(t.Yb),e.push(t.Xb),e.push(t.port);var i=t.type;return e.push("typ"),e.push(i),"host"!==i&&t.Zb&&t.tE&&(e.push("raddr"),e.push(t.Zb),e.push("rport"),e.push(t.tE)),t.eE&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t.eE)),"candidate:"+e.join(" ")},i.rE=function(t){return t.substr(14).split(" ")},i.nE=function(t){var e=t.substr(9).split(" "),i={oE:parseInt(e.shift(),10)};return e=e[0].split("/"),i.name=e[0],i.sE=parseInt(e[1],10),i.aE=3===e.length?parseInt(e[2],10):1,i},i.cE=function(t){var e=t.oE;return void 0!==t.hE&&(e=t.hE),"a=rtpmap:"+e+" "+t.name+"/"+t.sE+(1!==t.aE?"/"+t.aE:"")+"\r\n"},i.pE=function(t){var e=t.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},i.uE=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+"\r\n"},i.lE=function(t){for(var e,i={},r=t.substr(t.indexOf(" ")+1).split(";"),n=0;n<r.length;n++)e=r[n].trim().split("="),i[e[0].trim()]=e[1];return i},i.dE=function(t){var e="",i=t.oE;if(void 0!==t.hE&&(i=t.hE),t.parameters&&Object.keys(t.parameters).length){var r=[];Object.keys(t.parameters).forEach(function(e){r.push(e+"="+t.parameters[e])}),e+="a=fmtp:"+i+" "+r.join(";")+"\r\n"}return e},i.fE=function(t){var e=t.substr(t.indexOf(" ")+1).split(" ");return{type:e.shift(),gE:e.join(" ")}},i.vE=function(t){var e="",i=t.oE;return void 0!==t.hE&&(i=t.hE),t.yE&&t.yE.length&&t.yE.forEach(function(t){e+="a=rtcp-fb:"+i+" "+t.type+(t.gE&&t.gE.length?" "+t.gE:"")+"\r\n"}),e},i.mE=function(t){var e=t.indexOf(" "),i={wE:parseInt(t.substr(7,e-7),10)},r=t.indexOf(":",e);return r>-1?(i.TE=t.substr(e+1,r-e-1),i.value=t.substr(r+1)):i.TE=t.substr(e+1),i},i.SE=function(t){var e=i.Gb(t,"a=mid:")[0];if(e)return e.substr(6)},i.bE=function(t){var e=t.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},i.EE=function(t,e){var r=i.Gb(t+e,"a=fingerprint:");return{IE:"auto",RE:r.map(i.bE)}},i.kE=function(t,e){var i="a=setup:"+e+"\r\n";return t.RE.forEach(function(t){i+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"}),i},i.CE=function(t,e){var r=i.Jb(t);r=r.concat(i.Jb(e));var n={OE:r.filter(function(t){return 0===t.indexOf("a=ice-ufrag:")})[0].substr(12),password:r.filter(function(t){return 0===t.indexOf("a=ice-pwd:")})[0].substr(10)};return n},i.PE=function(t){return"a=ice-ufrag:"+t.OE+"\r\na=ice-pwd:"+t.password+"\r\n"},i.AE=function(t){for(var e={NE:[],xE:[],BE:[],FE:[]},r=i.Jb(t),n=r[0].split(" "),o=3;o<n.length;o++){var s=n[o],a=i.Gb(t,"a=rtpmap:"+s+" ")[0];if(a){var c=i.nE(a),h=i.Gb(t,"a=fmtp:"+s+" ");switch(c.parameters=h.length?i.lE(h[0]):{},c.yE=i.Gb(t,"a=rtcp-fb:"+s+" ").map(i.fE),e.NE.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":e.BE.push(c.name.toUpperCase())}}}return i.Gb(t,"a=extmap:").forEach(function(t){e.xE.push(i.pE(t))}),e},i._E=function(t,e){var r="";r+="m="+t+" ",r+=e.NE.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=e.NE.map(function(t){return void 0!==t.hE?t.hE:t.oE}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",e.NE.forEach(function(t){r+=i.cE(t),r+=i.dE(t),r+=i.vE(t)});var n=0;return e.NE.forEach(function(t){t.DE>n&&(n=t.DE)}),n>0&&(r+="a=maxptime:"+n+"\r\n"),r+="a=rtcp-mux\r\n",e.xE.forEach(function(t){r+=i.uE(t)}),r},i.HE=function(t){var e,r=[],n=i.AE(t),o=n.BE.indexOf("RED")!==-1,s=n.BE.indexOf("ULPFEC")!==-1,a=i.Gb(t,"a=ssrc:").map(function(t){return i.mE(t)}).filter(function(t){return"cname"===t.TE}),c=a.length>0&&a[0].wE,h=i.Gb(t,"a=ssrc-group:FID").map(function(t){var e=t.split(" ");return e.shift(),e.map(function(t){return parseInt(t,10)})});h.length>0&&h[0].length>1&&h[0][0]===c&&(e=h[0][1]),n.NE.forEach(function(t){if("RTX"===t.name.toUpperCase()&&t.parameters.apt){var i={wE:c,LE:parseInt(t.parameters.apt,10),ME:{wE:e}};r.push(i),o&&(i=JSON.parse(JSON.stringify(i)),i.jE={wE:e,UE:s?"red+ulpfec":"red"},r.push(i))}}),0===r.length&&c&&r.push({wE:c});var p=i.Gb(t,"b=");return p.length&&(0===p[0].indexOf("b=TIAS:")?p=parseInt(p[0].substr(7),10):0===p[0].indexOf("b=AS:")&&(p=parseInt(p[0].substr(5),10)),r.forEach(function(t){t.VE=p})),r},i.QE=function(t){var e={},r=i.Gb(t,"a=ssrc:").map(function(t){return i.mE(t)}).filter(function(t){return"cname"===t.TE})[0];r&&(e.qE=r.value,e.wE=r.wE);var n=i.Gb(t,"a=rtcp-rsize");e.JE=n.length>0,e.KE=0===n.length;var o=i.Gb(t,"a=rtcp-mux");return e.GE=o.length>0,e},i.zE=function(t){var e,r=i.Gb(t,"a=msid:");if(1===r.length)return e=r[0].substr(7).split(" "),{stream:e[0],track:e[1]};var n=i.Gb(t,"a=ssrc:").map(function(t){return i.mE(t)}).filter(function(t){return"msid"===t.TE});return n.length>0?(e=n[0].value.split(" "),{stream:e[0],track:e[1]}):void 0},i.WE=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.$E=function(t,e,r,n){var o=i._E(t.kind,e);if(o+=i.PE(t.YE.getLocalParameters()),o+=i.kE(t.XE.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+t.ZE+"\r\n",o+=t.direction?"a="+t.direction+"\r\n":t.tI&&t.eI?"a=sendrecv\r\n":t.tI?"a=sendonly\r\n":t.eI?"a=recvonly\r\n":"a=inactive\r\n",t.tI){var s="msid:"+n.id+" "+t.tI.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+t.iI[0].wE+" "+s,t.iI[0].ME&&(o+="a=ssrc:"+t.iI[0].ME.wE+" "+s,o+="a=ssrc-group:FID "+t.iI[0].wE+" "+t.iI[0].ME.wE+"\r\n")}return o+="a=ssrc:"+t.iI[0].wE+" cname:"+i.qb+"\r\n",t.tI&&t.iI[0].ME&&(o+="a=ssrc:"+t.iI[0].ME.wE+" cname:"+i.qb+"\r\n"),o},i.rI=function(t,e){for(var r=i.Jb(t),n=0;n<r.length;n++)switch(r[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[n].substr(2)}return e?i.rI(e):"sendrecv"},i.nI=function(t){var e=i.Jb(t),r=e[0].split(" ");return r[0].substr(2)},i.Ut=function(t){return"0"===t.split(" ",2)[1]},t.t=i},function(t,e,i){"use strict";var r=i(1),n=i(10),o=function(){function t(t,e){this.msg=t,this.oI=Date.now()+e,this.sI=r.defer()}return t.prototype.aI=function(){return Date.now()>=this.oI},t}(),s=function(){function t(t,e,i,r,n,o,s){void 0===e&&(e=3e4),void 0===i&&(i=100),void 0===r&&(r=3e4),void 0===n&&(n=15e3),void 0===o&&(o=Date),void 0===s&&(s=!1),this.cI=1,this.hI=-1,this.pI=-1,this.uI={},this.lI=[],this.dI=[],this.fI=!1,this.gI=!0,this.vI=t,this.yI=Array(),this.Ao=e,this.No=i,this.xo=r,this.mI=n,this.wI=o,this.fI=s||/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge./i.test(navigator.userAgent)}return t.prototype.Et=function(t){var e=t.service+"_"+t.msgId,i=this.uI[e];null!=i?i(t):n.m().error(n.u+"Could not find a dispatcher for ",t,e,this.uI)},t.prototype.on=function(t,e,i){this.uI[t+"_"+e]=i},t.prototype.onerror=function(t){this.lI.push(t)},t.prototype.TI=function(t){this.dI.push(t)},t.prototype.SI=function(){var t=this;if(!window.WebSocket)return void this.lI.forEach(function(t){return t("WebSocket not defined")});var e=new WebSocket(this.vI);return e.binaryType="arraybuffer",e.onopen=function(e){t.bI(),n.m().debug(n.u+"HiveServicesConnection established to "+t.vI),t.pI=(new t.wI).getTime(),t.EI(),t.dI.forEach(function(e){return e(t)}),t.II(),t.RI()},e.onclose=function(e){t.close(t.gI),t.connect()},e.onmessage=function(e){t.Et(n.Zn.wo(e.data))},e.onerror=function(e){t.close(!0),t.lI.forEach(function(t){return t(e.toString())})},e},t.prototype.isOpen=function(){return null!=this.Op&&this.Op.readyState==this.Op.OPEN},t.prototype.connect=function(t){var e=this;t&&(this.gI=!0),this.gI&&1!=this.isOpen()&&(this.hI>0||(this.pI>-1&&(new this.wI).getTime()-this.pI>this.Ao?(this.cI=n.ke.yo,this.pI=-1):this.cI=Math.min(2*this.cI,this.Ao),this.hI=window.setTimeout(function(){e.hI=-1,n.m().debug(n.u+"Connection attempt to "+e.vI+" [t:"+e.cI+" hb:"+e.fI+"]"),e.Op=e.SI(),e.cI=Math.max(e.cI,n.ke.yo)},this.cI)))},t.prototype.bI=function(){this.hI>-1&&(clearTimeout(this.hI),this.hI=-1)},t.prototype.close=function(t){this.gI=void 0!=t&&t,n.m().debug(n.u+"Closing connection [reconnect:"+this.gI+"]"),this.bI(),null!=this.Op&&(this.Op.close(),this.Op=null)},t.prototype.EI=function(){for(;this.yI.length>0;){var t=this.yI.pop();try{t.aI()?t.sI.reject(new Error("Message expired")):(this.II(),this.Op.send(t.msg.mo()))}catch(e){if(e.code===DOMException.INVALID_STATE_ERR){this.yI.push(t);break}n.m().error(n.u+"Failed to send the message, dropped: ",e.code,e.name),t.sI.reject(e)}}this.RI()},t.prototype.II=function(){this.kI&&(clearTimeout(this.kI),this.kI=null)},t.prototype.RI=function(){var t=this;this.fI&&!this.kI&&(this.kI=window.setInterval(function(){t.send(new n.Zn(Services.Cf,0,""))},this.mI))},t.prototype.send=function(t,e){if(void 0===e&&(e=this.xo),this.yI.length>=this.No)throw new Error("HiveServices connection cannot queue more messages");var i=new o(t,e);return this.yI.push(i),this.Op&&this.EI(),i.sI.vt},t.prototype.CI=function(t){this.fI=t,this.fI&&this.RI()},t.prototype.OI=function(){return null!=this.Op},t}();e.AI=s},function(t,e,i){"use strict";var r=i(15),n=i(38),o=i(24),s=i(2),a=function(){function t(){}return t.prototype.apply=function(t){t.bind(new r.ns(s.Framework.Fe.me,n.NI,r.ss.ls)),t.bind(new r.ns(s.Framework.Fe.we,o.El.bl))},t}();e.Td=a},function(t,e){"use strict";var i=function(){function t(){"undefined"!=typeof global?this.xI=global:this.xI=window}return t.prototype.Ct=function(){return!1},t.prototype.BI=function(t,e,i){},t.prototype.be=function(){},t.prototype.time=function(){return+new Date},t.prototype.setTimeout=function(t,e){var i=this.xI.setTimeout(function(){t()},e);return i},t.prototype.clearTimeout=function(t){return this.xI.clearTimeout(t),!0},t.prototype.setInterval=function(t,e){var i=this.xI.setInterval(function(){t()},e);return i},t.prototype.clearInterval=function(t){return this.xI.clearInterval(t),!0},t}();e.NI=i},function(t,e){"use strict";var i=function(){function t(t,e){this.Uo=t,this.Vo=e}return t.prototype.Wo=function(){return this.Uo},t.prototype.$o=function(){return this.Vo?this.Vo:this.Uo},t}();e.FI=i},function(t,e,i){"use strict";var r,n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(8),s=o.pt.Ir.Ir,a=o.pt.Ir.kr;!function(t){var e;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.authTokenEnabled=!0,e.dashRemoveBitrateSize=!1,e.dashFilterBitrates=null,e.logJsonSnapshots=void 0,e}return n(e,t),e}(s);t.Fl=e;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hiveAuthTokenEnabled="authTokenEnabled",e.hiveDashRemoveBitrateSize="dashRemoveBitrateSize",e.hiveDashFilterBitrates="dashFilterBitrates",e.hiveLogJsonSnapshots="logJsonSnapshots",e}return n(e,t),e}(a);t.Dl=i}(e=t.Ir||(t.Ir={}))}(r=e.pt||(e.pt={}));var c=function(){function t(){}return t.Hl=function(t){"dashRemoveBitrateSize"in t&&t.dashRemoveBitrateSize&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashRemoveBitrateSize=t.dashRemoveBitrateSize),"dashFilterBitrates"in t&&t.dashFilterBitrates&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashFilterBitrates=t.dashFilterBitrates),"logJsonSnapshots"in t&&t.logJsonSnapshots&&window.HiveConfig&&window.HiveConfig.DebugLogs&&(window.HiveConfig.DebugLogs.MetricSnapshotLogs=1,window.HiveConfig.DebugLogs.TrackSnapshotLogs=1,window.HiveConfig.DebugLogs.gl=1)},t}();e.Ll=c},function(t,e){"use strict";var i=function(){function t(){var e=this;if(this._I=new Array,this.callbacks=new Array,t.Gi)throw new Error("Error: Instantiation failed: Use KeyHandlerHiveComm.getInstance() instead of new.");var i={};document.addEventListener("keydown",function(t){i[t.keyCode]=!0,e.DI(i)},!0),document.addEventListener("keyup",function(t){i={}},!0)}return t.Wi=function(){return void 0===this.Gi&&(this.Gi=new t),this.Gi},t.prototype.Dh=function(t,e){this._I.push(t),this.callbacks.push(e)},t.prototype.DI=function(t){for(var e=function(e){var r=!0;i._I[e].forEach(function(e){void 0!=t[e]&&t[e]||(r=!1)}),r&&i.callbacks[e]()},i=this,r=0;r<this._I.length;r++)e(r)},t}();e.Hh=i},function(t,e,i){"use strict";var r=i(12),n=i(18),o=i(7),s=function(){function t(t){this.HI=n.ke.yr?9989:9988,this.LI=-1,this.MI=t,this.jI()}return t.prototype.jI=function(){var t=this;this.MI.options().silent&&void 0===this.UI&&(this.url="//"+r.wr.To+":"+this.HI+"/feedback",this.MI.m().info("starting periodic alive ping to hive tester ["+this.url+"]"),this.UI=setInterval(function(){t.VI()},n.ke.Nh))},t.prototype.VI=function(){var t=this,e=this.MI.getCurrentTime();e>this.LI?(this.MI.m().info("sending hive tester ping ["+e+" > "+this.LI+"]"),o.Zi(this.url).then(function(t){},function(e){t.MI.m().error("error sending hive tester ping",e),clearInterval(t.UI)})):this.MI.m().warn("not sending hive tester ping ["+e+" <= "+this.LI+"]"),this.LI=e},t}();e.Ul=s},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(1),o=i(7),s=i(8),a=i(44),c=i(17),h=i(12),p=i(14),u=i(9),l=i(20),d=i(19),f=a.pt.Ir,g=s.pt.Ir.kr,v=c.pt.HiveTechError,y=c.pt.bh,m=i(28);e.QI=navigator;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(o.Bi),T=function(){function t(t,e){this.qI=0,this.MI=t,this.options_=new f.JI,this.KI(e),o.or(window.location.href,new g,this.options_)}return t.prototype.Ai=function(){return t.Jl},t.prototype.getVersion=function(){return this.version},t.prototype.Wl=function(){return!1},t.prototype.GI=function(){var t=this;if(null==this.zI||Date.now()-this.qI>1e4){var e=new m;e.In(navigator.userAgent);var i=e.$d();if("IE"===i.name&&i.version&&parseInt(i.version)<10)return n.reject(new v(y.yh,"Internet Explorer < v.10 not supported"));this.WI=Date.now(),this.$I=0;var r="//"+h.wr.To+":"+this.MI.options().monitorPort+"/version.json";this.m().debug(this.id()+"verifying Hive Client version"),this.zI=o.Zi(r).then(function(e){var i=JSON.parse(e);return t.state=i.state,t.version=i.version,"ready"===t.state?"developer"===t.version||t.version>=t.options_.minVersion?(t.$I=Date.now(),t.m().debug(t.id()+"Hive Client ready - version "+t.version+" ["+(t.$I-t.WI)+"]"),"ready"):(d.ErrorMonitor.Wi()._h(t.id()+"Client version requirement not satisfied: "+t.version+" < "+t.options_.minVersion),t.MI.ed(new u.F.uo(null,u.F.Gr.Qr)),n.reject(new v(y.Th,"version "+t.version))):(d.ErrorMonitor.Wi()._h(t.id()+"Client state: "+t.state),t.MI.ed(new u.F.uo(null,u.F.Gr.Vr)),n.reject(new v(y.yh,"state "+t.state)))},function(e){var i="Client not reachable";return void 0!=e&&void 0!=e.status&&e.status!=-1&&(i="Client check returned "+e.status),d.ErrorMonitor.Wi()._h(t.id()+i),t.MI.ed(new u.F.uo(null,u.F.Gr.Ur)),n.reject(new v(y.yh,i))})["catch"](function(e){if(e instanceof v)return n.reject(e);var i="Error fetching Hive Client version: "+e;return d.ErrorMonitor.Wi()._h(t.id()+i),n.reject(new v(y.yh,i))}),this.qI=Date.now()}return this.zI},t.prototype.initSession=function(t,e){var i=this;return this.options_.minVersion!=h.wr.Io?this.GI().then(function(){return i.YI(t)["catch"](function(t){return n.reject(t)})}):this.YI(t)["catch"](function(t){return n.reject(t)})},t.prototype.Yl=function(){return this.options_.initTimeout},t.prototype.st=function(t,e){return t.indexOf(e.XI)>-1},t.prototype.Pi=function(t,i){var r=this;this.m().debug(this.id()+"Stopping session "+t.id+" [complete close:"+i+"]");var n="//"+h.wr.To+":"+this.MI.options().playerPort+"/session?action=stop";n+="&currentSession="+t.id,i&&(n+="&completeStop=true"),i&&e.QI.sendBeacon?(e.QI.sendBeacon(n),this.m().debug(this.id()+"session stopped ["+t.id+"][beacon]")):o.Zi(n,null,!i).then(function(){r.m().debug(r.id()+"session stopped ["+t.id+"]"+(i?"[sync]":""))},function(e){r.m().warn(r.id()+"session close error ["+t.id+"]"+(i?"[sync]":""),e)})},t.prototype.Ci=function(t,e){this.ZI=e?p.Fo.IDLE:p.Fo.Bo,this.m().notice("[HiveComm] client state: "+p.Fo[this.ZI])},t.prototype.fd=function(t,e){if(this.ZI==p.Fo.IDLE)return n.resolve(!0);var i="playing-point="+e.lr;i+="&buffer-length="+e.dr,i+="&total-buffering="+e.gr,i+="&width="+e.width,i+="&height="+e.height,i+="&fullscreen="+e.dd;var r=t.XI+"stats?"+i;return this.m().trace(r),o.Zi(r)},t.prototype.yd=function(t,e,i){var r=this;if(!(e!==u.F.B.jr&&e!==u.F.B.HIDDEN||this.version&&("developer"===this.version||this.version>="2017")))return n.resolve(!0);var s=t.XI+"player-event?type="+u.F.B[e];if(void 0!=i)for(var a in i)s+="&"+a+"="+i[a];return this.m().debug(this.id()+"event "+u.F.B[e],void 0!=i?i:""),o.Zi(s).fail(function(t){return r.m().warn(r.id()+"error sending feedback event to Hive Client",t),n.reject(t)})},t.prototype.wn=function(t,e){return n.resolve(!0)},t.prototype.hn=function(t){var e=this;if(this.tR())return this.m().warn("Player info not supported in this Java client version"),n.resolve(!0);var i="comm-version="+this.MI.ct();i+="&plugin-name="+this.MI.T(),i+="&plugin-version="+this.MI.I(),i+="&player-tech="+this.MI.ht(),i+="&player-version="+this.MI.q();var r=this.MI.td();r&&(i+="&telemetry-id="+this.MI.td());var s=t.XI+"player-info?"+i;return o.Zi(s).fail(function(t){return e.m().debug(e.id()+"error sending player Info to Hive Client",t),n.reject(t)})},t.prototype.onError=function(t){var e=!0;if(void 0!=this.options_.onError)try{e=this.options_.onError(t)}catch(i){d.ErrorMonitor.Wi()._h(this.id()+"exception in user-defined onError callback: "+i)}return e},t.prototype.Zl=function(t,e,i){var r={isReadyIn:this.WI,isReadyOut:this.$I,leaseIn:this.eR,leaseOut:this.iR,resolveIn:this.rR,resolveOut:this.nR};"undefined"!=typeof e&&null!=e&&(r.sessionId=e.id),"undefined"!=typeof i&&(r.total=i);var n=JSON.parse(JSON.stringify(r));d.ErrorMonitor.Wi()._h(t.message,n),this.MI.ed(new u.F.uo(null,u.F.Gr.Kr,r)),this.oR()},t.prototype.onActiveSession=function(t){if(this.hn(t),o.ar.setItem("hiveActiveSessionId",t.id),void 0!=this.options_.onActiveSession)try{this.options_.onActiveSession(t.g())}catch(e){d.ErrorMonitor.Wi()._h(this.id()+"exception in user-defined onActiveSession callback: "+e)}},t.prototype.ql=function(t){this.MI=t},t.prototype.id=function(){return"["+t.Jl+"] "},t.prototype.KI=function(e){void 0!=e[t.Jl]&&o.nr(e[t.Jl],this.options_)},t.prototype.YI=function(t){var e=this,i=(new Date).getTime();return this.sR(t).then(function(r){return r?e.aR(t,r,i):e.p(t).then(function(r){return e.aR(t,r,i)})})},t.prototype.sR=function(e){var i=this;if(this.eR=Date.now(),this.MI.options().useSessionCheck){var r="//"+h.wr.To+":"+this.MI.options().playerPort+"/session?&action=check";r+="&hivePluginId="+this.MI.S(),r+="&callback="+e;var s=o.ar.getItem("hiveActiveSessionId");return o.ar.removeItem("hiveActiveSessionId"),s&&(r+="&currentSession="+s),this.cR(),o.Zi(r).then(function(t){return i.iR=Date.now(),t?i.hR(t,r,e,i.eR):(i.m().debug(i.id()+"session allowed ["+(i.iR-i.eR)+"]"),!1)},function(e){if(400==e.status)return i.pR("bad request","error resolving ticket",e);if(401==e.status)return i.pR("unauthorized","error verifying the ticket",e);if(403==e.status){var r=t.uR(e,void 0,"session"),o=r?{lR:r}:void 0;return d.ErrorMonitor.Wi()._h(i.id()+"reports another active session",o),i.MI.ed(new u.F.uo(null,u.F.Gr.qr,o)),n.reject(new v(y.wh,"another active session"+(o?" ["+o.lR+"]":"")))}return 404==e.status?(i.m().debug(i.id()+"installed version does not support active session check"),i.iR=Date.now(),!1):e.status==-1?(clearTimeout(i.dR),i.fR()):(d.ErrorMonitor.Wi()._h(i.id()+" unhandled error from Java",{error:e.status}),i.MI.ed(new u.F.uo(null,u.F.Gr.Jr)),n.reject(new v(y.mh,e)))})["catch"](function(t){return t instanceof v?n.reject(t):(d.ErrorMonitor.Wi()._h(i.id()+" unhandled error on requestLeaseDirect",{error:t}),i.MI.ed(new u.F.uo(null,u.F.Gr.Jr)),n.reject(new v(y.mh,t)))})["finally"](function(){clearTimeout(i.dR)})}return this.m().debug(this.id()+"Hive session check disabled - will directly resolve ticket (other active sessions may fail)"),n.resolve(!1)},t.prototype.pR=function(e,i,r){var o=t.uR(r,e);return d.ErrorMonitor.Wi()._h(""+this.id()+i),this.nR=Date.now(),n.reject(new v(y.ph,o))},t.uR=function(t,e,i){void 0===i&&(i="status");var r=e;if(t.body)try{var n=JSON.parse(t.body);r=n[i]}catch(o){}return r},t.prototype.p=function(t){var e=this;this.rR=Date.now(),this.m().debug(this.id()+"resolving ticket: "+t);var i=this.gR(t);return o.Zi(i,"application/json").then(function(r){return e.hR(r,i,t,e.rR)},function(i){return i&&i.status==-1?e.fR():(d.ErrorMonitor.Wi()._h(e.id()+"error resolving ticket",{ticket:t}),n.reject(new v(y.ph,i)))})["catch"](function(t){return d.ErrorMonitor.Wi()._h(e.id()+"error parsing ticket response: "+t),n.reject(new v(y.mh,t))})},t.prototype.hR=function(t,e,i,r){var n=JSON.parse(t),s=o.ir(e,n.location);return n.version&&!this.version&&(this.version=n.version),this.nR=Date.now(),this.m().debug(this.id()+"resolved ticket "+i+" -> "+s+" ["+(this.nR-r)+"]"),s},t.prototype.aR=function(t,e,i){var r=this.vR(t,e);if(null!=r){var n=(new Date).getTime(),s=n-i;return s>=this.options_.warnSlowRespTimeout&&this.Zl(new v(y.Sh,this.id()+" The tech initialization took more than "+this.options_.warnSlowRespTimeout+" milliseconds"),r,s),o.HiveRequestFactory.bi(r.id,this.Ai()),r}throw new v(y.ph,"error generating session")},t.prototype.vR=function(t,e){var i=new l.ap;i.Kh(t);var r=new w(t,i,e,null);r.yR=!0;var n=h.wr.Eo,o=n.exec(r.manifest);return null!=o?(r.XI=o[1],r.id=o[5],r):null},t.prototype.gR=function(t){var e=t.indexOf("?")==-1?"?":"&";return this.tR()?o.rr(h.wr.bo,h.wr.To,this.MI.options().playerPort,t):o.rr(h.wr.So,h.wr.To,this.MI.options().playerPort,t,e,this.MI.S())},t.prototype.cR=function(){var t=this;this.dR&&clearTimeout(this.dR),this.dR=setTimeout(function(){d.ErrorMonitor.Wi()._h(t.id()+" The Lease Request is taking more than "+t.options_.warnSlowRespTimeout+" secs")},this.options_.warnSlowRespTimeout)},t.prototype.oR=function(){this.eR=0,this.iR=0,this.rR=0,this.nR=0},t.prototype.m=function(){return this.MI.m()},t.prototype.zl=function(){this.oR()},t.prototype.fR=function(){var t=this,e="//"+h.wr.To+":"+this.MI.options().monitorPort+"/version.json";return this.m().debug(this.id()+"checking if the monitor port is reachable"),o.Zi(e).then(function(e){var i=JSON.parse(e);throw t.state=i.state,d.ErrorMonitor.Wi()._h(t.id()+"Client state: "+t.state),t.MI.ed(new u.F.uo(null,u.F.Gr.Vr)),new v(y.yh,"state "+t.state)}).fail(function(e){if(e instanceof v)return n.reject(e);if(e&&e.status==-1){var i="client not reachable";return t.MI.ed(new u.F.uo(null,u.F.Gr.Ur)),t.m().warn(t.id()+i),n.reject(new v(y.yh,i))}var i="VerifyClientState error";return d.ErrorMonitor.Wi()._h(t.id()+i,{error:e}),t.MI.ed(new u.F.uo(null,u.F.Gr.Vr)),n.reject(new v(y.mh,i))})},t.prototype.tR=function(){return this.options_.supportLegacyClient&&(!this.version||this.version.substr(0,4)<"2016")},t}();T.Jl="HiveJava",e.HiveJava=T},function(t,e,i){"use strict";var r,n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(8),s=i(12);!function(t){var e;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minVersion=s.wr.Io,e.initTimeout=6e4,e.warnSlowRespTimeout=5e3,e.supportLegacyClient=!1,e}return n(e,t),e}(o.pt.Ir.Rr);t.JI=e}(e=t.Ir||(t.Ir={}))}(r=e.pt||(e.pt={}))},function(t,e){"use strict";var i=function(){function t(){}return t}();i.To="127.0.0.1",i.Od=11983,i.So="//{0}:{1}/proxy/?callback={2}{3}hivePluginId={4}",i.mR="//{0}:{1}/proxy/{2}/session?manifest={3}",i.kd="//{0}:{1}/proxy/{2}/player?req={3}",i.wR="//{0}:{1}/proxy/{2}/info?{3}",e.Cd=i},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(26),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.bi=function(t,i){e.TR[i]=t},e.SR=function(t,i){e.bR[i]=t},e.prototype.send=function(){if(!this.sessionId){var t=Object.keys(e.bR);t.length>0&&(this.sessionId=e.bR[t[0]])}var i=e.TR[this.sessionId],r=e.bR[this.sessionId];r.m().debug("Intercepted Manifest Request "+this.url),i.setManifestRequest(this),r.R(this.url)},e.prototype.ER=function(){var t=this,e=new XMLHttpRequest;e.open("GET",this.url),e.onreadystatechange=function(){4===e.readyState&&(t.response=e.responseText,t.responseText=e.responseText,t.readyState=4,t.status=e.status,t.onreadystatechange(),t.onload(),console.debug("Returned Manifest Request "+t.url))},e.send()},e.prototype.IR=function(){t.prototype.send.call(this)},e}(n.Ti);o.bR={},o.TR={},e.Si=o},function(t,e,i){"use strict";var r,n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(8);!function(t){var e;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(o.pt.Ir.Rr);t.RR=e}(e=t.Ir||(t.Ir={}))}(r=e.pt||(e.pt={}))},function(t,e,i){"use strict";var r=i(1),n=i(7),o=i(47),s=o.pt.Ir.RR,a=i(14),c=i(59),h=i(19),p=function(){function t(e,i){this.MI=e,this.options_=new s,void 0!==i[t.Jl]&&n.nr(i[t.Jl],this.options_)}return t.prototype.Ai=function(){return t.Jl},t.prototype.getVersion=function(){return null},t.prototype.Wl=function(){return!0},t.prototype.GI=function(){return r.resolve(!0)},t.prototype.initSession=function(t,e){var i=this.vR(t,e.ticket,e.ticket.tp(),e);return n.HiveRequestFactory.bi(i.id,this.Ai()),r.resolve(i)},t.prototype.Yl=function(){return this.options().initTimeout},t.prototype.st=function(t,e){var i=e.manifest.toLowerCase().indexOf("/manifest");if(i>-1){var r=e.manifest.substring(0,i);if(t.indexOf(r)>-1)return!0}else if(t==e.manifest)return!0;return!1},t.prototype.Pi=function(t){t.Ri&&(this.MI.m().debug("[StatsJS] stopping session ["+t.id+"]"),t.Ri.Ho.reset())},t.prototype.Ci=function(t,e){var i=e?a.Fo.IDLE:a.Fo.Bo;this.MI.m().notice("[HiveComm] client state: "+a.Fo[i]),t.Ri&&t.Ri.Ci(i)},t.prototype.fd=function(t,e){var i=this,n=0;return this.kR<e.gr&&(n=e.gr-this.kR,this.kR=e.gr),t.Ni().then(function(){t.Ri.Do.CR(n,e.dr),t.Ri.Qn.vn(e.lr,e.dr,e.gr),i.OR()}).done(),r.resolve(!0)},t.prototype.yd=function(t,e,i){return t.Ni().then(function(){t.Ri.Qn.mn(t.ticket.sessionId,e,i)}).done(),r.resolve(!0)},t.prototype.wn=function(t,e){return t.Ni().then(function(){t.Ri.Qn.Tn([e])}).done(),r.resolve(!0)},t.prototype.onError=function(t){var e=!0;if(void 0!=this.options().onError)try{e=this.options().onError(t)}catch(i){h.ErrorMonitor.Wi()._h("[StatsJS] exception in user-defined onError callback: "+i)}return e},t.prototype.onActiveSession=function(t){var e=this;this.PR(),t.Ni().then(function(i){e.AR=i;var r=new c.NR(e.MI.isLive(),e.MI.$(),t.ticket.tp());e.AR.xR=r,e.AR.Do.xR=r,e.MI.hn(e.AR),e.AR.Ho.init(e.AR.Do,null),e.AR.Qn.wi(t.ticket.sessionId,e.MI.it(),200);var n=e.MI.rd();if(n&&n.length>0&&e.AR.Qn.Tn(n),void 0!=e.options_.onActiveSession)try{e.options_.onActiveSession(t.g())}catch(o){h.ErrorMonitor.Wi()._h("[StatsJS] exception in user-defined onActiveSession callback: "+o)}}).done()},t.prototype.Zl=function(){},t.prototype.zl=function(){},t.prototype.ql=function(t){this.MI=t},t.prototype.options=function(){return this.options_},t.prototype.PR=function(){this.kR=0},t.prototype.vR=function(t,e,i,r){var o=new n.Bi(t,e,i,r);return o.yR=!1,o.id=e.sessionId,o},t.prototype.OR=function(){try{var t=this.MI.at();void 0!=t&&(this.AR.Do.BR.metrics.bitrateUpN+=t.Ji(),this.AR.Do.BR.metrics.bitrateDwnN+=t.Ki(),null!=t.Vi()&&(this.AR.Do.BR.metrics.srcThroughput=t.Vi()),null!=t.Qi()&&this.FR(!0,t.Qi()),null!=t.qi()&&this.FR(!1,t.qi()))}catch(e){h.ErrorMonitor.Wi()._h(e)}},t.prototype.FR=function(t,e){var i=this,r=0,n=0,o=0,s=0;e.forEach(function(e,a){var c=e.success+e._i;if(r+=c,s+=e.Di,n+=e.success,o+=e._i,t){var h=i.AR.Do._R(Number(a));i.DR(h,c,e.success,e._i,e.Di)}});var a=this.AR.Do.HR();this.DR(a,r,n,o,s)},t.prototype.DR=function(t,e,i,r,n){t.srcReqN+=e,t.srcRespN+=i,t.srcRespErrN+=r,t.srcRespQt+=n,t.respFallbackN+=i,t.respFallbackErrN+=r},t}();p.Jl="StatsJS",e.StatsJS=p},function(t,e){"use strict";var i;!function(t){var e;!function(t){t[t.HiveJS=0]="HiveJS",t[t.HiveJava=1]="HiveJava",t[t.StatsJS=2]="StatsJS",t[t.HiveJsProxy=3]="HiveJsProxy"}(e=t.Il||(t.Il={}))}(i=e.pt||(e.pt={}))},function(t,e,i){"use strict";var r=i(15),n=i(2),o=i(24),s=i(14),a=i(5),c=i(9),h=i(56),p=i(55),u=i(60),l=i(52),d=i(51);if("undefined"==typeof f)var f=!1;if(f)var g=i(53).LR;else var v=i(57).MR;var y=function(){function t(){}return t.prototype.apply=function(t){t.bind(new r.ns(a.gi.ui,s.rs,r.ss.ls)),t.bind(new r.ns(a.gi.Be,p.jR,r.ss.ls)),t.bind(new r.ns(a.gi.ai,u.UR,r.ss.ls)),t.bind(new r.ns(a.gi.Ce,l.VR,r.ss.ls)),t.bind(new r.ns(n.Framework.Fe.we,o.El.bl,r.ss.ls)),f?t.bind(new r.ns(a.gi.ci,g,r.ss.ls)):t.bind(new r.ns(a.gi.ci,v,r.ss.ls)),t.bind(new r.ns(a.gi.hi,d.QR,r.ss.ls)),t.bind(new r.ns(a.gi.li,h.Stats.zf,r.ss.Ts)),t.bind(new r.ns(a.gi.si,h.Stats.eo,r.ss.Ts)),t.bind(new r.ns(a.gi.di,c.F.Un,r.ss.Ts)),t.bind(new r.ns(a.gi.fi,c.F.eo,r.ss.Ts))},t}();e.Sd=y},function(t,e){"use strict";var i=function(){function t(){}return t.prototype.qR=function(t){this.hostname=t},t.prototype.Fn=function(){return this.hostname},t.prototype.JR=function(t){this.KR=t},t.prototype.Nn=function(){return this.KR},t}();e.QR=i},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(1),o=i(22),s=i(2),a=i(13),c=i(39),h=function(){function t(){this.GR="IdentityStore",this.zR="IdentityDB",this.sn=null,this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,s.Framework&&s.Framework.resolve(s.Framework.Fe.we)?this.m=s.Framework.resolve(s.Framework.Fe.we).log():this.m=console}return t.prototype.WR=function(){var t=this,e=n.defer(),i=indexedDB.open(this.zR);return i.onupgradeneeded=function(){var e=i.result;e.createObjectStore(t.GR,{keyPath:"id"})},i.onsuccess=function(){var t=i.result;e.resolve(t)},i.onerror=function(t){e.reject(t)},e.vt},t.prototype.Ko=function(){var t=this;if(this.$R)return this.$R;var e=n.defer();if(this.sn)e.resolve(new c.FI(this.sn));else if(a.Kn.Ro&&this.indexedDB){var i=setTimeout(function(){t.m.warn("[HiveComm] timeout retrieving persistent ID - generating random one"),
  t.sn=t.YR(),t.m.debug("[HiveComm] Generated UUID: "+t.sn),e.resolve(new c.FI(t.sn))},4e3);try{var r=this.WR();r.then(function(r){var n=r.transaction(t.GR,"readwrite"),o=n.objectStore(t.GR),s=o.get("MYID");s.onsuccess=function(){if(clearTimeout(i),t.sn)e.resolve(new c.FI(t.sn));else if(null!=s.result&&a.Kn.Ro){var n=s.result.value;t.m.debug("[HiveComm] Retrieved persistent UUID: "+n),t.sn=n,r.close(),e.resolve(new c.FI(t.sn))}else{var o=t.YR();t.XR(r,o),e.resolve(new c.FI(t.sn))}},s.onerror=function(r){clearTimeout(i),t.sn||(t.m.warn("[HiveComm] error retrieving persistent UUID: "+r),t.sn=t.YR(),t.m.debug("[HiveComm] Generated UUID: "+t.sn)),e.resolve(new c.FI(t.sn))}}).fail(function(r){clearTimeout(i),t.sn||(t.m.warn("[HiveComm] error opening indexedDB - generating random id. Error: "+r),t.sn=t.YR(),t.m.debug("[HiveComm] Generated UUID: "+t.sn)),e.resolve(new c.FI(t.sn))})}catch(o){this.sn=this.YR(),this.m.debug("[HiveComm] Persistence error - Generate UUID: "+this.sn,o),e.resolve(new c.FI(this.sn))}}else this.sn=this.YR(),this.m.debug("[HiveComm] Persistence disabled - Generate UUID: "+this.sn),e.resolve(new c.FI(this.sn));return this.$R=e.vt,this.$R},t.prototype.XR=function(t,e){var i=this,r=t.transaction(this.GR,"readwrite"),n=r.objectStore(this.GR);n.put({id:"MYID",value:e}),r.oncomplete=function(){i.m.debug("[HiveComm] completed UUID persistence"),t.close()},this.m.debug("[HiveComm] Generated UUID: "+e),this.sn=e},t.prototype.YR=function(){return o.Zh()},t}();e.ZR=h;var p=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.Ko=function(){var e=this;if(this.tk)return this.tk;var i=n.defer();return t.prototype.Ko.call(this).then(function(t){var r=e.YR(),n=t.$o(),o=new c.FI(r,n);i.resolve(o)}).fail(function(t){var r=e.YR(),n=new c.FI(r);i.resolve(n)}),this.tk=i.vt,this.tk},e}(h);e.VR=p},function(t,e,i){"use strict";var r=i(1),n=i(2),o=function(){function t(){this.u="[PreloadConnectivityInfoProvider] ",this.connInfo=window.ek,this.m=n.Framework.resolve(n.Framework.Fe.we).log(),this.connInfo||this.m.error(this.u+" helper undefined")}return t.prototype.Pn=function(){var t=this;if(!this.connInfo)return r.reject("ConnInfo helper undefined");var e=setTimeout(function(){return t.m.warn(t.u+"Get connectivity info expired"),t.ik?r.resolve(t.ik):r.reject("expired")},2e3);try{return this.connInfo.Pn().then(function(i){return clearTimeout(e),t.ik=i,i}).fail(function(e){return t.m.debug(t.u+" get connectivity info failed with error 1: ",e),t.ik?t.ik:r.reject(e)})}catch(i){return this.m.debug(this.u+" get connectivity info failed with error 2:",i),r.reject(i)}},t.prototype.rk=function(t,e,i){},t}();e.LR=o},function(t,e,i){"use strict";var r=i(63),n=i(1),o=i(2),s=function(){function t(){this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.m=o.Framework.resolve(o.Framework.Fe.we).log()}return t.prototype.WR=function(){var t=n.defer(),e=this.indexedDB.open("PrivateIPDB");return e.onupgradeneeded=function(){var t=e.result;t.createObjectStore("PrivateIPStore",{keyPath:"id"})},e.onsuccess=function(){var i=e.result;t.resolve(i)},e.onerror=function(e){t.reject(e)},t.vt},t.prototype.nk=function(){var t=this;if(this.sk)return this.sk;var e=setTimeout(function(){t.m.warn("Private list retrieval timeout"),i.reject("Private list timeout")},4e3),i=n.defer(),o=this.WR();return o.then(function(n){var o=n.transaction("PrivateIPStore","readwrite"),s=o.objectStore("PrivateIPStore"),a=s.get("iplist");a.onsuccess=function(){clearTimeout(e);var t=[];r.ak(a.result)||r.ak(a.result.value)||(t=a.result.value.split("|")),i.resolve(t),n.close()},a.onerror=function(r){clearTimeout(e),t.m.warn("I got an error on indexed db "+r.message),i.reject("Error on indexedDB "+r.message)}}).fail(function(r){clearTimeout(e),t.m.warn("DB is not open with error"+r.message),i.reject("DB is not open with error "+r.message)}),this.sk=i.vt,this.sk},t.prototype.ck=function(t){var e=this,i=t.join("|"),r=this.WR();r.then(function(r){var n=r.transaction("PrivateIPStore","readwrite"),o=n.objectStore("PrivateIPStore");o.put({id:"iplist",value:i}),n.oncomplete=function(){e.m.debug("Storing site matched ips ["+t.join(",")+"]"),r.close()}}).fail(function(t){e.m.warn("DB is not open with error "+t.message)})},t}();e.hk=s},function(t,e,i){"use strict";var r=i(1),n=i(21),o=i(36),s=i(2),a=i(13),c=i(10),h=function(){function t(){this.m=s.Framework.resolve(s.Framework.Fe.we).log(),this.m.debug("INIT SERVICE CLIENT")}return t.prototype.init=function(t,e){var i=this;if(this.pk)this.pk.then(function(){var t={partnerId:e.bn(),customerId:e.En(),contentId:e.es(),secret:e.Wh()},r=new c.Zn(Services.kf,1,JSON.stringify(t));i.connection.send(r)});else{var s=r.defer(),h=a.Kn.Jn.ko;e.zh&&(this.m.warn("[HiveComm] Error trying to resolve test ticket against production services - use production ticket or test plugin"),s.reject(new Error("test ticket in production")));var p=new n(h),u=p.Eu({"connection-id":t,partner_id:e.bn(),customer_id:e.En(),content_id:e.es(),ticket:e.Wh()}).toString();this.connection=new o.AI(u,a.Kn.Jn.Ao,a.Kn.Jn.No,a.Kn.Jn.xo),this.connection.TI(function(){i.m.debug("HIVE SERVICES CONNECTED"),s.resolve(i.connection)}),this.connection.onerror(function(){i.m.warn("Hive Services Connection failed"),s.reject(i.connection)}),this.pk=s.vt}return{Yo:this.connection,vt:this.pk}},t.prototype.connect=function(){this.connection&&this.connection.connect(!0)},t.prototype.sd=function(t){},t.prototype.Xn=function(){return this.connection},t.prototype.close=function(){this.connection&&this.connection.close()},t}();e.jR=h},function(t,e,i){"use strict";var r=i(4),n=r.ve,o=i(16);i(31),i(30);var s,a=i(2),c=i(5),h=i(13),p=i(10),u=i(14),l=i(23);!function(t){var e="[SNAP]",i=function(){function t(){this.metrics=new hive.snapshots.Metrics,this.uk=new hive.snapshots.Traffic,this.lk=new n,this.dk=new n,this.fk=new n,this.player=new hive.snapshots.Player}return t}();t.gk=i;var r=function(){function i(){this.ticket=null,this.vk=0,this.yk=0,this.mk()}return i.prototype.init=function(t,i,r,n){this.m=a.Framework.resolve(a.Framework.Fe.we).log(n),this.tn=a.Framework.resolve(c.gi.ci),this.m.debug(e+" INIT STATS STORE - ID: "+t),this.sn=t,this.ticket=i,this.an(r)},i.prototype.wk=function(t){this.Tk=t},i.prototype.an=function(t){this.app=t},i.prototype.mk=function(){this.Sk=new t.gk,this.sn=null,this.ticket=null,this.reset()},i.prototype.reset=function(){this.BR=new t.gk,this.bk(this.BR.uk),this.Ek(this.BR)},i.prototype.bk=function(t){t.respFallbackN=0,t.respFallbackErrN=0,t.srcReqN=0,t.srcRespErrN=0,t.srcRespQt=0,t.srcOtherRespN=0,t.srcRespN=0,t.srcOverQt=0,t.p2pDirectQt=0,t.p2pNatQt=0,t.p2pUdpbQt=0,t.p2pRelayQt=0,t.p2pOutSiteLowPrio=0,t.respP2pN=0,t.p2pSubReqN=0,t.p2pSubRespErrN=0,t.p2pSubRespQt=0,t.p2pSubRespPartN=0},i.prototype.Ek=function(t){t.metrics.videoBufN=0,t.metrics.videoBufQt=0,t.metrics.clientBufferMs=0,t.player.bufferingN=0,t.player.bufferingMs=0},i.prototype.Ik=function(){var t=this,i=new hive.snapshots.MetricSnapshot;i.timestamp=a.Framework.time(),i.guid=this.sn,i.sessionId=this.ticket.sessionId,i.eventId=new EventId,i.eventId.partnerId=this.ticket.bn(),i.eventId.customerId=this.ticket.En(),i.eventId.contentId=this.ticket.es();try{var r=new hive.snapshots.ClientInfo;r.clientType=this.Rk();var n=this.app.version.split(".");r.majorVersion=parseInt(n[0]),r.minorVersion=parseInt(n[1]),r.patchVersion=parseInt(n[2]),i.client=r}catch(o){this.m.warn(e+" error setting Snapshot ClientInfo",o)}i.streamInfo=this.xR.kk(),i.traffic=[];var s=new hive.snapshots.TrafficKey;if(i.traffic.push({key:s,value:this.BR.uk}),this.BR.lk.forEach(function(t,e){var r=new hive.snapshots.TrafficKey;r.bitrate=e,i.traffic.push({key:r,value:t})}),i.metrics=this.BR.metrics,this.Tk&&(i.metrics.clientBufferMs=this.Tk.min()),i.player=this.BR.player,this.Ck){var c=this.Ck.getPartnerSnapshots();c.forEach(function(e,r){t.Ok(r,e,i)}),this.BR.fk.filter(function(t,e){return!c.has(e)}).forEach(function(e,r){t.Ok(r,e,i)})}return i.connInfo=new hive.snapshots.ConnectivityInfo,this.tn.Pn().then(function(e){return i.connInfo.privateIp=e.Nn().Bn(),t.Pk(i)}).fail(function(e){return t.Pk(i)})},i.prototype.Pk=function(t){return t.connInfo.internalAs=this.vk,t.connInfo.externalAs=this.yk,t.connInfo.publicIp=this.Ak,t},i.prototype.Rk=function(){var t;switch(this.app.app){case"JS":t=ClientType.Ff;break;case"PROXY":t=ClientType._f;break;default:t=ClientType.Bf}return t},i.prototype.Ok=function(t,e,i){var r=this.BR.dk.get(t);e.traffic=r,i.partners||(i.partners=[]);var n=new hive.snapshots.PartnerKey;n.partnerGuid=t,i.partners.push({key:n,value:e})},i.prototype.CR=function(t,e){t>0&&(this.BR.metrics.videoBufN++,this.BR.metrics.videoBufQt+=t,this.BR.player.bufferingN++,this.BR.player.bufferingMs+=t),this.BR.player.playerBufferMs=e},i.prototype.HR=function(){return this.BR.uk},i.prototype.Nk=function(){return this.Sk.uk},i.prototype.xk=function(t){return this.Sk.lk.has(t)||this.Sk.lk.set(t,new hive.snapshots.Traffic),this.Sk.lk.get(t)},i.prototype._R=function(t){if(!this.BR.lk.has(t)){var e=new hive.snapshots.Traffic;this.bk(e),this.BR.lk.set(t,e)}return this.BR.lk.get(t)},i.prototype.Bk=function(t,e){return e.dk.has(t)||e.dk.set(t,new hive.snapshots.PartnerTraffic),e.dk.get(t)},i.prototype.Fk=function(t){return this.Bk(t,this.BR)},i.prototype._k=function(t){return this.Bk(t,this.Sk)},i.prototype.Dk=function(t){this.tn=t},i.prototype.Hk=function(t){this.Ck=t},i.prototype.jn=function(t){},i}();t.zf=r;var s=function(){function t(){this.Lk=isNaN(l.HiveConfig.DebugLogs.MetricSnapshotLogs)?0:l.HiveConfig.DebugLogs.MetricSnapshotLogs,this.state=u.Fo.Bo,this.client=a.Framework.resolve(c.gi.Be),this.Xa=new o.Ea,this.protocol=new o.$a(this.Xa)}return t.prototype.init=function(t,i){this.m=a.Framework.resolve(a.Framework.Fe.we).log(i),this.m.debug(e+" INIT CLIENT STATS"),this.Vf=t,this.Mk()},t.prototype.Mk=function(){var t=this;this.jk>-1&&a.Framework.clearInterval(this.jk),this.jk=a.Framework.setInterval(function(){t.Uk()},h.Kn.Jn.Po)},t.prototype.Ci=function(t){this.state=t},t.prototype.reset=function(){a.Framework.clearInterval(this.jk),this.Vf&&this.Vf.mk()},t.prototype.Uk=function(){var t=this;this.m.debug("[SNAP] TAKING SNAPSHOT");var e=this.Vf.Ik();e.then(function(e){return t.forward(e)}).fail(function(e){t.m.warn("[SNAP] ERROR FORWARDING SNAPSHOT",e)})["finally"](function(){t.Vf.reset()})},t.prototype.forward=function(t){var i=this;if(this.state===u.Fo.IDLE)return void this.m.debug(e+" not send - state idle");if(this.client&&this.client.Xn()){switch(this.Lk){case 0:default:this.m.debug(e+" SENDING SNAPSHOT");break;case 1:this.m.debug(e+" SENDING SNAPSHOT "+JSON.stringify(t));break;case 2:this.m.debug(e+" SENDING SNAPSHOT",t);break;case 3:this.m.debug(e+" SENDING SNAPSHOT "+JSON.stringify(t),t)}this.protocol.pc("SNAPSHOT",o.Ls.Vs,0),t.write(this.protocol),this.protocol.dc();var r=this.Xa.Ha(),n=this.Vk(r,",",4),s=r.slice(n+1,r.length-1),a=new p.Zn(Services.to,1,s);this.client.Xn().send(a).fail(function(t){i.m.warn(e+" PROBLEM: ",t)})}},t.prototype.Vk=function(t,e,i){return t.split(e,i).join(e).length},t}();t.eo=s}(s=e.Stats||(e.Stats={}))},function(t,e,i){"use strict";var r=i(1),n=i(4),o=i(2),s=i(5),a=i(58),c=i(54),h=i(65),p=function(){function t(){this.Qk=null,this.qk=null,this.Jk=null,this.Kk=null,this.Gk=new n.ve,this.publicIp=null,this.zk=[],this._i=!1,this.Wk=null,this.m=o.Framework.resolve(o.Framework.Fe.we).log(),this.ik=o.Framework.resolve(s.gi.hi),this.$k=new c.hk,this.Yk=[],this.Xk()}return t.prototype.Xk=function(){var t=this;o.Framework.setInterval(function(){t.zk=[],t.Yk=[],t.Gk=new n.ve,t.publicIp=null,t.Zk=null},12e4)},t.prototype.Pn=function(){return this.Zk||(this.Zk=this.tC()),this.Zk},t.prototype.tC=function(){var t=this,e=r.defer();if(this.Wk=o.Framework.setTimeout(function(){e.reject({eC:!0,message:"expired"})},4e3),this.iC())try{this.Qk=new RTCPeerConnection(null),this.Jk=this.Qk.createDataChannel("sendChannel",{reliable:!1}),this.qk=new RTCPeerConnection(null),this.qk.ondatachannel=function(i){t.Kk=i.channel,t.Kk.onopen=function(i){"open"===t.Kk.readyState&&(t.m.debug("Collected ips ["+t.Gk.keys().join(", ")+"]"),t.qk.close(),t.$k.nk().then(function(e){t.Yk=e,t.m.debug("Already known matching ips ["+t.Yk.join(",")+"]");var i=t.Gk.keys();t.Yk.forEach(function(e){i.indexOf(e)>0&&(t.zk.push(e),t.Gk["delete"](e))}),t.Gk.keys().forEach(function(e){t.zk.push(e)})}).fail(function(e){t.m.warn("Get Previous working ips failed with error "+e.message),t.Gk.keys().forEach(function(e){t.zk.push(e)})})["finally"](function(){t.m.debug("Final private ip list ["+t.zk.join(",")+"]"),e.resolve(t.rC())}))}},this.Qk.onicecandidate=function(i){i.candidate&&t.zb(i.candidate.candidate),!i.candidate||t.qk.addIceCandidate(i.candidate)["catch"](function(i){e.reject({eC:!0,message:i.message}),o.Framework.clearTimeout(t.Wk),console.log("Error: Failure during addIceCandidate()")})},this.qk.onicecandidate=function(i){i.candidate&&t.zb(i.candidate.candidate),!i.candidate||t.Qk.addIceCandidate(i.candidate)["catch"](function(i){e.reject({eC:!0,message:i.message}),o.Framework.clearTimeout(t.Wk),console.log("Error: Failure during addIceCandidate()")})},this.Qk.createOffer().then(function(e){return t.Qk.setLocalDescription(e)}).then(function(){return t.qk.setRemoteDescription(t.Qk.localDescription)}).then(function(){return t.qk.createAnswer()}).then(function(e){return t.qk.setLocalDescription(e)}).then(function(){return t.Qk.setRemoteDescription(t.qk.localDescription)})["catch"](function(i){e.reject({eC:!0,message:i.message}),o.Framework.clearTimeout(t.Wk),console.log("Error: Failure creating offer")})}catch(i){e.reject({eC:!0,message:i.message})}else o.Framework.clearTimeout(this.Wk),e.reject({eC:!1,message:"webrtc datachannel not supported"});return e.vt},t.prototype.iC=function(){try{return null!=h.Xe&&null!=h.nC&&"function"==typeof new RTCPeerConnection(null,null).createDataChannel}catch(t){return!1}},t.prototype.zb=function(t){var e=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,i=e.exec(t);if(i){var r=i[0];this.Gk.set(r,!0)}},t.prototype.rC=function(){var t=new a.oC;return this.zk.length>0&&t.sC(this.zk[0]),this.publicIp&&t.aC(this.publicIp),this.ik.JR(t),this.ik},t.prototype.rk=function(t,e,i){if(this.publicIp=t,this.cC(),0===i&&this.zk.length>1)this.zk.shift();else if(0!==i&&this.Yk.indexOf(this.zk[0])==-1)this.Yk.unshift(this.zk[0]),this.$k.ck(this.Yk.slice(0,2));else if(0!==i&&this.Yk.indexOf(this.zk[0])>0){var r=this.Yk.indexOf(this.zk[0]);this.Yk=this.Yk.splice(r,1),this.Yk.unshift(this.zk[0]),this.$k.ck(this.Yk.slice(0,2))}this.rC()},t.prototype.cC=function(){var t=this.zk.indexOf(this.publicIp);t>-1&&this.zk.splice(t,1)},t}();e.MR=p},function(t,e){"use strict";var i=function(){function t(){}return t.prototype.aC=function(t){this.publicIp=t},t.prototype.xn=function(){return this.publicIp},t.prototype.hC=function(t){this.pC=t},t.prototype.Ln=function(){return this.pC},t.prototype.uC=function(t){this.nic=t},t.prototype.Dn=function(){return this.nic},t.prototype.lC=function(t){this.nicName=t},t.prototype.Hn=function(){return this.nicName},t.prototype.sC=function(t){this.privateIp=t},t.prototype.Bn=function(){return this.privateIp},t.prototype.dC=function(t){this.netmask=t},t.prototype.fC=function(){return this.netmask},t.prototype.gC=function(t){this.vC=t},t.prototype._n=function(){return null},t}();e.oC=i},function(t,e){"use strict";var i=function(){function t(t,e,i){this.isLive=t,this.protocol=e,this.yC=i}return t.prototype.kk=function(){var t=new hive.snapshots.StreamInfo;return t.streamType=this.isLive?StreamType.LIVE:StreamType.Pf,t.streamProtocol=this.protocol,t.url=this.yC,t},t}();e.NR=i},function(t,e,i){"use strict";i(29);var r=i(1),n=i(4),o=n.ve,s=i(2),a=i(20),c=function(){function t(t){this.io=(new Date).getTime(),this.mC=t}return t}(),h=function(){function t(){this.wC=new o,this.m=(s.Framework.resolve(s.Framework.Fe.we)||console).log(),this.m.debug("INIT TICKET RESOLVER")}return t.prototype.resolve=function(t,e,i){var n=this,o=r.defer();return t&&(t.on(Services.kf,0,function(t){n.TC(t)}),t.on(Services.kf,2,function(t){n.TC(t)}),this.wC.set(e,new c(o))),o.vt},t.prototype.TC=function(t){var e=this,i=(new Date).getTime(),r=JSON.parse(t.msg),n=!1;this.wC.forEach(function(t,o){if(e.SC(o,r)){n=!0;var s=e.$l(o,r);s?(s.io=t.io,s.ro=i,t.mC.resolve(s)):t.mC.reject("Ticket verification failed"),e.wC["delete"](s)}}),n||this.m.warn("no pending ticket matching: "+t.msg)},t.prototype.Go=function(t){var e=new RegExp("^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?");if(e.test(t)){var i=this.bC();return i.Kh(t),i}return null},t.prototype.bC=function(){return new a.ap},t.prototype.SC=function(t,e){return t.bn()===e[a.ap.op]&&t.En()===e[a.ap.np]&&t.es()===e[a.ap.sp]},t.prototype.$l=function(t,e){return t.Uh(e),t.Qh()?t:null},t}();e.UR=h},function(t,e){"function"==typeof Object.create?t.t=function(t,e){t.EC=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,Ag:!1,Pg:!0,Ng:!0}})}:t.t=function(t,e){t.EC=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e){t.t=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,i){function r(t,i){var r={IC:[],RC:o};return arguments.length>=3&&(r.kC=arguments[2]),arguments.length>=4&&(r.CC=arguments[3]),f(i)?r.OC=i:i&&e.PC(r,i),T(r.OC)&&(r.OC=!1),T(r.kC)&&(r.kC=2),T(r.CC)&&(r.CC=!1),T(r.AC)&&(r.AC=!0),r.CC&&(r.RC=n),a(r,t,r.kC)}function n(t,e){var i=r.NC[e];return i?"["+r.CC[i][0]+"m"+t+"["+r.CC[i][1]+"m":t}function o(t,e){return t}function s(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}function a(t,i,r){if(t.AC&&i&&R(i.gt)&&i.gt!==e.gt&&(!i.constructor||i.constructor.prototype!==i)){var n=i.gt(r,t);return m(n)||(n=a(t,n,r)),n}var o=c(t,i);if(o)return o;var f=Object.keys(i),g=s(f);if(t.OC&&(f=Object.getOwnPropertyNames(i)),I(i)&&(f.indexOf("message")>=0||f.indexOf("description")>=0))return h(i);if(0===f.length){if(R(i)){var v=i.name?": "+i.name:"";return t.RC("[Function"+v+"]","special")}if(S(i))return t.RC(RegExp.prototype.toString.call(i),"regexp");if(E(i))return t.RC(Date.prototype.toString.call(i),"date");if(I(i))return h(i)}var y="",w=!1,T=["{","}"];if(d(i)&&(w=!0,T=["[","]"]),R(i)){var b=i.name?": "+i.name:"";y=" [Function"+b+"]"}if(S(i)&&(y=" "+RegExp.prototype.toString.call(i)),E(i)&&(y=" "+Date.prototype.toUTCString.call(i)),I(i)&&(y=" "+h(i)),0===f.length&&(!w||0==i.length))return T[0]+y+T[1];if(r<0)return S(i)?t.RC(RegExp.prototype.toString.call(i),"regexp"):t.RC("[Object]","special");t.IC.push(i);var k;return k=w?p(t,i,r,g,f):f.map(function(e){return u(t,i,r,g,e,w)}),t.IC.pop(),l(k,y,T)}function c(t,e){if(T(e))return t.RC("undefined","undefined");if(m(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.RC(i,"string")}return y(e)?t.RC(""+e,"number"):f(e)?t.RC(""+e,"boolean"):g(e)?t.RC("null","null"):void 0}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,i,r,n){for(var o=[],s=0,a=e.length;s<a;++s)A(e,String(s))?o.push(u(t,e,i,r,String(s),!0)):o.push("");return n.forEach(function(n){n.match(/^\d+$/)||o.push(u(t,e,i,r,n,!0))}),o}function u(t,e,i,r,n,o){var s,c,h;if(h=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},h.get?c=h.set?t.RC("[Getter/Setter]","special"):t.RC("[Getter]","special"):h.set&&(c=t.RC("[Setter]","special")),A(r,n)||(s="["+n+"]"),c||(t.IC.indexOf(h.value)<0?(c=g(i)?a(t,h.value,null):a(t,h.value,i-1),c.indexOf("\n")>-1&&(c=o?c.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+c.split("\n").map(function(t){return"   "+t}).join("\n"))):c=t.RC("[Circular]","special")),T(s)){if(o&&n.match(/^\d+$/))return c;s=JSON.stringify(""+n),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.RC(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.RC(s,"string"))}return s+": "+c}function l(t,e,i){var r=0,n=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}function d(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function g(t){return null===t}function v(t){return null==t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function T(t){return void 0===t}function S(t){return b(t)&&"[object RegExp]"===C(t)}function b(t){return"object"==typeof t&&null!==t}function E(t){return b(t)&&"[object Date]"===C(t)}function I(t){return b(t)&&("[object Error]"===C(t)||t instanceof Error)}function R(t){return"function"==typeof t}function k(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function C(t){return Object.prototype.toString.call(t)}function O(t){return t<10?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[O(t.getHours()),O(t.getMinutes()),O(t.getSeconds())].join(":");return[t.getDate(),F[t.getMonth()],e].join(" ")}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var N=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(r(arguments[i]));return e.join(" ")}for(var i=1,n=arguments,o=n.length,s=String(t).replace(N,function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return t}}),a=n[i];i<o;a=n[++i])s+=g(a)||!b(a)?" "+a:" "+r(a);return s},e.xC=function(t,i){function r(){if(!n){if(process.throwDeprecation)throw new Error(i);process.traceDeprecation?console.trace(i):console.error(i),n=!0}return t.apply(this,arguments)}if(T(global.process))return function(){return e.xC(t,i).apply(this,arguments)};if(process.noDeprecation===!0)return t;var n=!1;return r};var x,B={};e.BC=function(t){if(T(x)&&(x=process.Ot.NODE_DEBUG||""),t=t.toUpperCase(),!B[t])if(new RegExp("\\b"+t+"\\b","i").test(x)){var i=process.pid;B[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,r)}}else B[t]=function(){};return B[t]},e.gt=r,r.CC={bold:[1,22],FC:[3,23],_C:[4,24],inverse:[7,27],DC:[37,39],HC:[90,39],LC:[30,39],blue:[34,39],MC:[36,39],green:[32,39],jC:[35,39],red:[31,39],UC:[33,39]},r.NC={VC:"cyan",number:"yellow",QC:"yellow",undefined:"grey",qC:"bold",JC:"green",xT:"magenta",KC:"red"},e.isArray=d,e.Om=f,e.Am=g,e.ak=v,e.Nm=y,e.xm=m,e.GC=w,e.Bm=T,e.zC=S,e.ov=b,e.WC=E,e.$C=I,e.Pm=R,e.YC=k,e.isBuffer=i(62);var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))},e.qs=i(61),e.PC=function(t,e){if(!e||!b(e))return t;for(var i=Object.keys(e),r=i.length;r--;)t[i[r]]=e[i[r]];return t}},function(t,e){(function(e){t.t=e}).call(e,{})},function(t,e,i){"use strict";!function(){var e=i(3),r=e.log,n=e.ri;t.t.ri=n,t.t.Xe=e.Xe,t.t.Ye=e.Ye;var o=i(66)||null,s=i(68)||null,a=i(70)||null,c=i(72)||null;switch(n.ti){case"chrome":if(!o||!o.XC)return void r("Chrome shim is not included in this adapter release.");r("adapter.js shimming chrome."),t.t.nC=o,o.ZC(),o.tO(),e.ei(),o.eO(),o.XC(),o.iO(),o.rO();break;case"firefox":if(!a||!a.XC)return void r("Firefox shim is not included in this adapter release.");r("adapter.js shimming firefox."),t.t.nC=a,a.ZC(),e.ei(),a.eO(),a.XC(),a.iO();break;case"edge":if(!s||!s.XC)return void r("MS edge shim is not included in this adapter release.");r("adapter.js shimming edge."),t.t.nC=s,s.ZC(),e.ei(),s.XC();break;case"safari":if(!c)return void r("Safari shim is not included in this adapter release.");r("adapter.js shimming safari."),t.t.nC=c,c.ZC();break;default:r("Unsupported browser!")}}()},function(t,e,i){"use strict";var r=i(3).log,n=i(3).ri,o={tO:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},iO:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this.nO},set:function(t){var e=this;this.nO&&(this.removeEventListener("track",this.nO),this.removeEventListener("addstream",this.oO)),this.addEventListener("track",this.nO=t),this.addEventListener("addstream",this.oO=function(t){t.stream.addEventListener("addtrack",function(i){var r=new Event("track");r.track=i.track,r.receiver={track:i.track},r.sO=[t.stream],e.dispatchEvent(r)}),t.stream.getTracks().forEach(function(e){var i=new Event("track");i.track=e,i.receiver={track:e},i.sO=[t.stream],this.dispatchEvent(i)}.bind(this))}.bind(this))}})},rO:function(){if("object"==typeof window&&window.RTCPeerConnection&&!("getSenders"in RTCPeerConnection.prototype)&&"createDTMFSender"in RTCPeerConnection.prototype){RTCPeerConnection.prototype.getSenders=function(){return this.aO};var t=RTCPeerConnection.prototype.addStream,e=RTCPeerConnection.prototype.removeStream;RTCPeerConnection.prototype.addStream=function(e){var i=this;i.aO=i.aO||[],t.apply(i,[e]),e.getTracks().forEach(function(t){i.aO.push({track:t,get cO(){return void 0===this.hO&&("audio"===t.kind?this.hO=i.createDTMFSender(t):this.hO=null),this.hO}})})},RTCPeerConnection.prototype.removeStream=function(t){var i=this;i.aO=i.aO||[],e.apply(i,[t]),t.getTracks().forEach(function(t){var e=i.aO.find(function(e){return e.track===t});e&&i.aO.splice(i.aO.indexOf(e),1)})}}},eO:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.pO},set:function(t){var e=this;return this.pO=t,this.src&&URL.revokeObjectURL(this.src),t?(this.src=URL.createObjectURL(t),t.addEventListener("addtrack",function(){e.src&&URL.revokeObjectURL(e.src),e.src=URL.createObjectURL(t)}),void t.addEventListener("removetrack",function(){e.src&&URL.revokeObjectURL(e.src),e.src=URL.createObjectURL(t)})):void(this.src="")}}))},XC:function(){window.RTCPeerConnection||(window.RTCPeerConnection=function(t,e){return r("PeerConnection"),t&&t.uO&&(t.lO=t.uO),new webkitRTCPeerConnection(t,e)},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}));var t=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,i,r){var n=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof arguments[0]))return t.apply(this,[]);var s=function(t){var e={},i=t.result();return i.forEach(function(t){var i={id:t.id,timestamp:t.timestamp,type:{dO:"local-candidate",fO:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){i[e]=t.stat(e)}),e[i.id]=i}),e},a=function(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))};if(arguments.length>=2){var c=function(t){o[1](a(s(t)))};return t.apply(this,[c,arguments[0]])}return new Promise(function(e,i){t.apply(n,[function(t){e(a(s(t)))},i])}).then(i,r)},n.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){var t=arguments,i=this,r=new Promise(function(r,n){e.apply(i,[t[0],r,n])});return t.length<2?r:r.then(function(){t[1].apply(null,[])},function(e){t.length>=3&&t[2].apply(null,[e])})}}),n.version<52&&["createOffer","createAnswer"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){var t=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var i=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,n){e.apply(t,[r,n,i])})}return e.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?RTCIceCandidate:RTCSessionDescription)(arguments[0]),e.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};t.t={tO:o.tO,iO:o.iO,rO:o.rO,eO:o.eO,XC:o.XC,ZC:i(67)}},function(t,e,i){"use strict";var r=i(3).log,n=i(3).ri;t.t=function(){var t=function(t){if("object"!=typeof t||t.gO||t.optional)return t;var e={};return Object.keys(t).forEach(function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var r="object"==typeof t[i]?t[i]:{vO:t[i]};void 0!==r.yO&&"number"==typeof r.yO&&(r.min=r.max=r.yO);var n=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.slice(1):"deviceId"===e?"sourceId":e};if(void 0!==r.vO){e.optional=e.optional||[];var o={};"number"==typeof r.vO?(o[n("min",i)]=r.vO,e.optional.push(o),o={},o[n("max",i)]=r.vO,e.optional.push(o)):(o[n("",i)]=r.vO,e.optional.push(o))}void 0!==r.yO&&"number"!=typeof r.yO?(e.gO=e.gO||{},e.gO[n("",i)]=r.yO):["min","max"].forEach(function(t){void 0!==r[t]&&(e.gO=e.gO||{},e.gO[n(t,i)]=r[t])})}}),t.mO&&(e.optional=(e.optional||[]).concat(t.mO)),e},e=function(e,i){if(e=JSON.parse(JSON.stringify(e)),e&&e.Mp&&(e.Mp=t(e.Mp)),e&&"object"==typeof e.video){var o=e.video.wO;o=o&&("object"==typeof o?o:{vO:o});var s=n.version<59;if(o&&("user"===o.yO||"environment"===o.yO||"user"===o.vO||"environment"===o.vO)&&(!navigator.mediaDevices.TO||!navigator.mediaDevices.TO().wO||s)&&(delete e.video.wO,"environment"===o.yO||"environment"===o.vO))return navigator.mediaDevices.SO().then(function(n){n=n.filter(function(t){return"videoinput"===t.kind});var s=n.find(function(t){return t.label.toLowerCase().indexOf("back")!==-1})||n.length&&n[n.length-1];return s&&(e.video.bO=o.yO?{yO:s.bO}:{vO:s.bO}),e.video=t(e.video),r("chrome: "+JSON.stringify(e)),i(e)});e.video=t(e.video)}return r("chrome: "+JSON.stringify(e)),i(e)},i=function(t){return{name:{EO:"NotAllowedError",IO:"OverconstrainedError"}[t.name]||t.name,message:t.message,RO:t.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},o=function(t,r,n){e(t,function(t){navigator.webkitGetUserMedia(t,r,function(t){n(i(t))})})};navigator.getUserMedia=o;var s=function(t){return new Promise(function(e,i){navigator.getUserMedia(t,e,i)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:s,SO:function(){return new Promise(function(t){var e={Mp:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(i){t(i.map(function(t){return{label:t.label,kind:e[t.kind],bO:t.id,kO:""}}))})})},TO:function(){return{bO:!0,CO:!0,wO:!0,OO:!0,height:!0,width:!0}}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return e(t,function(t){return a(t).then(function(e){if(t.Mp&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(t){t.stop()}),new DOMException("","NotFoundError");return e},function(t){return Promise.reject(i(t))})})}}else navigator.mediaDevices.getUserMedia=function(t){return s(t)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},function(t,e,i){"use strict";function r(t){var e=t.filter(function(t){return"audio"===t.kind}),i=t.filter(function(t){return"video"===t.kind});for(t=[];e.length||i.length;)e.length&&t.push(e.shift()),
i.length&&t.push(i.shift());return t}function n(t){var e=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(t){if(t&&(t.PO||t.url)){var i=t.PO||t.url,r="string"==typeof i;return r&&(i=[i]),i=i.filter(function(t){var i=0===t.indexOf("turn:")&&t.indexOf("transport=udp")!==-1&&t.indexOf("turn:[")===-1&&!e;return i?(e=!0,!0):0===t.indexOf("stun:")&&s.version>=14393}),delete t.url,t.PO=r?i[0]:i,!!i.length}return!1})}var o=i(35),s=i(3).ri,a={XC:function(){if(window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(t){return t}),window.RTCSessionDescription||(window.RTCSessionDescription=function(t){return t}),s.version<15025)){var t=Object.getOwnPropertyDescriptor(MediaStreamTrack.prototype,"enabled");Object.defineProperty(MediaStreamTrack.prototype,"enabled",{set:function(e){t.set.call(this,e);var i=new Event("enabled");i.enabled=e,this.dispatchEvent(i)}})}window.RTCPeerConnection=function(t){var e=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(t){e[t]=i[t].bind(i)}),this.onicecandidate=null,this.onaddstream=null,this.AO=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.NO=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.xO=[],this.BO=[],this.getLocalStreams=function(){return e.xO},this.getRemoteStreams=function(){return e.BO},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.FO={_O:"all",iceServers:[]},t&&t.uO)switch(t.uO){case"all":case"relay":this.FO._O=t.uO}this.DO=t&&"max-bundle"===t.bundlePolicy,t&&t.iceServers&&(this.FO.iceServers=n(t.iceServers)),this.HO=t,this.LO=[],this.MO=[]},window.RTCPeerConnection.prototype.jO=function(){var t=new Event("icegatheringstatechange");this.dispatchEvent(t),null!==this.NO&&this.NO(t)},window.RTCPeerConnection.prototype.UO=function(){var t=this,e=o.Kb(t.localDescription.sdp);this.MO.forEach(function(i){var r=!i.candidate||0===Object.keys(i.candidate).length;if(r)for(var n=1;n<e.length;n++)e[n].indexOf("\r\na=end-of-candidates\r\n")===-1&&(e[n]+="a=end-of-candidates\r\n");else e[i.candidate.sdpMLineIndex+1]+="a="+i.candidate.candidate+"\r\n";if(t.localDescription.sdp=e.join(""),t.dispatchEvent(i),null!==t.onicecandidate&&t.onicecandidate(i),!i.candidate&&"complete"!==t.iceGatheringState){var o=t.LO.every(function(t){return t.YE&&"completed"===t.YE.state});o&&"complete"!==t.iceGatheringStateChange&&(t.iceGatheringState="complete",t.jO())}}),this.MO=[]},window.RTCPeerConnection.prototype.getConfiguration=function(){return this.HO},window.RTCPeerConnection.prototype.addStream=function(t){if(s.version>=15025)this.xO.push(t);else{var e=t.clone();t.getTracks().forEach(function(t,i){var r=e.getTracks()[i];t.addEventListener("enabled",function(t){r.enabled=t.enabled})}),this.xO.push(e)}this.VO()},window.RTCPeerConnection.prototype.removeStream=function(t){var e=this.xO.indexOf(t);e>-1&&(this.xO.splice(e,1),this.VO())},window.RTCPeerConnection.prototype.getSenders=function(){return this.LO.filter(function(t){return!!t.tI}).map(function(t){return t.tI})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.LO.filter(function(t){return!!t.eI}).map(function(t){return t.eI})},window.RTCPeerConnection.prototype.QO=function(t,e){var i={NE:[],xE:[],BE:[]},r=function(t,e){t=parseInt(t,10);for(var i=0;i<e.length;i++)if(e[i].oE===t||e[i].hE===t)return e[i]},n=function(t,e,i,n){var o=r(t.parameters.apt,i),s=r(e.parameters.apt,n);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return t.NE.forEach(function(r){for(var o=0;o<e.NE.length;o++){var s=e.NE[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.sE===s.sE){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!n(r,s,t.NE,e.NE))continue;s=JSON.parse(JSON.stringify(s)),s.aE=Math.min(r.aE,s.aE),i.NE.push(s),s.yE=s.yE.filter(function(t){for(var e=0;e<r.yE.length;e++)if(r.yE[e].type===t.type&&r.yE[e].gE===t.gE)return!0;return!1});break}}}),t.xE.forEach(function(t){for(var r=0;r<e.xE.length;r++){var n=e.xE[r];if(t.uri===n.uri){i.xE.push(n);break}}}),i},window.RTCPeerConnection.prototype.qO=function(t,e){var i=this,r=new RTCIceGatherer(i.FO),n=new RTCIceTransport(r);r.JO=function(s){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:e};var c=s.candidate,h=!c||0===Object.keys(c).length;h?void 0===r.state&&(r.state="completed"):(c.$b="RTCP"===n.$b?2:1,a.candidate.candidate=o.iE(c));var p=o.Kb(i.localDescription.sdp);h?p[a.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n":p[a.candidate.sdpMLineIndex+1]+="a="+a.candidate.candidate+"\r\n",i.localDescription.sdp=p.join("");var u=i.KO?i.KO:i.LO,l=u.every(function(t){return t.YE&&"completed"===t.YE.state});switch(i.iceGatheringState){case"new":h||i.MO.push(a),h&&l&&i.MO.push(new Event("icecandidate"));break;case"gathering":i.UO(),h||(i.dispatchEvent(a),null!==i.onicecandidate&&i.onicecandidate(a)),l&&(i.dispatchEvent(new Event("icecandidate")),null!==i.onicecandidate&&i.onicecandidate(new Event("icecandidate")),i.iceGatheringState="complete",i.jO());break;case"complete":}},n.GO=function(){i.zO()};var s=new RTCDtlsTransport(n);return s.WO=function(){i.zO()},s.onerror=function(){s.state="failed",i.zO()},{YE:r,$O:n,XE:s}},window.RTCPeerConnection.prototype.YO=function(t,e,i){var r=this.QO(t.XO,t.ZO);e&&t.tI&&(r.tP=t.iI,r.FE={qE:o.qb},t.eP.length&&(r.FE.wE=t.eP[0].wE),t.tI.send(r)),i&&t.eI&&("video"===t.kind&&t.eP&&s.version<15019&&t.eP.forEach(function(t){delete t.ME}),r.tP=t.eP,r.FE={qE:t.qE},t.iI.length&&(r.FE.wE=t.iI[0].wE),t.eI.receive(r))},window.RTCPeerConnection.prototype.setLocalDescription=function(t){var e,i,r=this;if("offer"===t.type)this.KO&&(e=o.Kb(t.sdp),i=e.shift(),e.forEach(function(t,e){var i=o.AE(t);r.KO[e].XO=i}),this.LO=this.KO,delete this.KO);else if("answer"===t.type){e=o.Kb(r.remoteDescription.sdp),i=e.shift();var n=o.Gb(i,"a=ice-lite").length>0;e.forEach(function(t,e){var s=r.LO[e],a=s.YE,c=s.$O,h=s.XE,p=s.XO,u=s.ZO,l="0"===t.split("\n",1)[0].split(" ",2)[1];if(!l&&!s.iP){var d=o.CE(t,i),f=o.EE(t,i);n&&(f.IE="server"),r.DO&&0!==e||(c.start(a,d,n?"controlling":"controlled"),h.start(f));var g=r.QO(p,u);r.YO(s,g.NE.length>0,!1)}})}switch(this.localDescription={type:t.type,sdp:t.sdp},t.type){case"offer":this.rP("have-local-offer");break;case"answer":this.rP("stable");break;default:throw new TypeError('unsupported type "'+t.type+'"')}var s=arguments.length>1&&"function"==typeof arguments[1];if(s){var a=arguments[1];window.setTimeout(function(){a(),"new"===r.iceGatheringState&&(r.iceGatheringState="gathering",r.jO()),r.UO()},0)}var c=Promise.resolve();return c.then(function(){s||("new"===r.iceGatheringState&&(r.iceGatheringState="gathering",r.jO()),window.setTimeout(r.UO.bind(r),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(t){var e=this,i=new MediaStream,r=[],n=o.Kb(t.sdp),a=n.shift(),c=o.Gb(a,"a=ice-lite").length>0;switch(this.DO=o.Gb(a,"a=group:BUNDLE ").length>0,n.forEach(function(n,h){var p=o.Jb(n),u=p[0].substr(2).split(" "),l=u[0],d="0"===u[1],f=o.rI(n,a),g=o.Gb(n,"a=mid:");if(g=g.length?g[0].substr(6):o.Qb(),"application"===l&&"DTLS/SCTP"===u[2])return void(e.LO[h]={ZE:g,iP:!0});var v,y,m,w,T,S,b,E,I,R,k,C,O=o.AE(n);d||(k=o.CE(n,a),C=o.EE(n,a),C.IE="client"),E=o.HE(n);var P,A=o.Gb(n,"a=ssrc:").map(function(t){return o.mE(t)}).filter(function(t){return"cname"===t.TE})[0];A&&(P=A.value);var N=o.Gb(n,"a=end-of-candidates",a).length>0,x=o.Gb(n,"a=candidate:").map(function(t){return o.zb(t)}).filter(function(t){return"1"===t.$b});if("offer"!==t.type||d)"answer"!==t.type||d||(v=e.LO[h],y=v.YE,m=v.$O,w=v.XE,T=v.tI,S=v.eI,b=v.iI,I=v.XO,e.LO[h].eP=E,e.LO[h].ZO=O,e.LO[h].qE=P,(c||N)&&x.length&&m.setRemoteCandidates(x),e.DO&&0!==h||(m.start(y,k,"controlling"),w.start(C)),e.YO(v,"sendrecv"===f||"recvonly"===f,"sendrecv"===f||"sendonly"===f),!S||"sendrecv"!==f&&"sendonly"!==f?delete v.eI:(R=S.track,r.push([R,S]),i.addTrack(R)));else{var B=e.DO&&h>0?{YE:e.LO[0].YE,$O:e.LO[0].$O,XE:e.LO[0].XE}:e.qO(g,h);if(!N||e.DO&&0!==h||B.$O.setRemoteCandidates(x),I=RTCRtpReceiver.getCapabilities(l),s.version<15019&&(I.NE=I.NE.filter(function(t){return"rtx"!==t.name})),b=[{wE:1001*(2*h+2)}],"sendrecv"!==f&&"sendonly"!==f||(S=new RTCRtpReceiver(B.XE,l),R=S.track,r.push([R,S]),i.addTrack(R)),e.xO.length>0&&e.xO[0].getTracks().length>=h){var F;"audio"===l?F=e.xO[0].getAudioTracks()[0]:"video"===l&&(F=e.xO[0].getVideoTracks()[0]),F&&(s.version>=15019&&"video"===l&&(b[0].ME={wE:1001*(2*h+2)+1}),T=new RTCRtpSender(F,B.XE))}e.LO[h]={YE:B.YE,$O:B.$O,XE:B.XE,XO:I,ZO:O,tI:T,eI:S,kind:l,ZE:g,qE:P,iI:b,eP:E},e.YO(e.LO[h],!1,"sendrecv"===f||"sendonly"===f)}}),this.remoteDescription={type:t.type,sdp:t.sdp},t.type){case"offer":this.rP("have-remote-offer");break;case"answer":this.rP("stable");break;default:throw new TypeError('unsupported type "'+t.type+'"')}return i.getTracks().length&&(e.BO.push(i),window.setTimeout(function(){var t=new Event("addstream");t.stream=i,e.dispatchEvent(t),null!==e.onaddstream&&window.setTimeout(function(){e.onaddstream(t)},0),r.forEach(function(t){var r=t[0],n=t[1],o=new Event("track");o.track=r,o.receiver=n,o.sO=[i],e.dispatchEvent(o),null!==e.AO&&window.setTimeout(function(){e.AO(o)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.LO.forEach(function(t){t.$O&&t.$O.stop(),t.XE&&t.XE.stop(),t.tI&&t.tI.stop(),t.eI&&t.eI.stop()}),this.rP("closed")},window.RTCPeerConnection.prototype.rP=function(t){this.signalingState=t;var e=new Event("signalingstatechange");this.dispatchEvent(e),null!==this.onsignalingstatechange&&this.onsignalingstatechange(e)},window.RTCPeerConnection.prototype.VO=function(){var t=new Event("negotiationneeded");this.dispatchEvent(t),null!==this.onnegotiationneeded&&this.onnegotiationneeded(t)},window.RTCPeerConnection.prototype.zO=function(){var t,e=this,i={nP:0,closed:0,oP:0,sP:0,connected:0,aP:0,_i:0};if(this.LO.forEach(function(t){i[t.$O.state]++,i[t.XE.state]++}),i.connected+=i.aP,t="new",i._i>0?t="failed":i.oP>0||i.sP>0?t="connecting":i.disconnected>0?t="disconnected":i["nP"]>0?t="new":(i.connected>0||i.aP>0)&&(t="connected"),t!==e.iceConnectionState){e.iceConnectionState=t;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var t=this;if(this.KO)throw new Error("createOffer called while there is a pending offer.");var e;1===arguments.length&&"function"!=typeof arguments[0]?e=arguments[0]:3===arguments.length&&(e=arguments[2]);var i=[],n=0,a=0;if(this.xO.length&&(n=this.xO[0].getAudioTracks().length,a=this.xO[0].getVideoTracks().length),e){if(e.gO||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.cP&&(n=e.cP),void 0!==e.hP&&(a=e.hP)}for(this.xO.length&&this.xO[0].getTracks().forEach(function(t){i.push({kind:t.kind,track:t,pP:"audio"===t.kind?n>0:a>0}),"audio"===t.kind?n--:"video"===t.kind&&a--});n>0||a>0;)n>0&&(i.push({kind:"audio",pP:!0}),n--),a>0&&(i.push({kind:"video",pP:!0}),a--);i=r(i);var c=o.WE(),h=[];i.forEach(function(e,i){var r=e.track,n=e.kind,a=o.Qb(),c=t.DO&&i>0?{YE:h[0].YE,$O:h[0].$O,XE:h[0].XE}:t.qO(a,i),p=RTCRtpSender.getCapabilities(n);s.version<15019&&(p.NE=p.NE.filter(function(t){return"rtx"!==t.name})),p.NE.forEach(function(t){"H264"===t.name&&void 0===t.parameters["uP"]&&(t.parameters["uP"]="1")});var u,l,d=[{wE:1001*(2*i+1)}];r&&(s.version>=15019&&"video"===n&&(d[0].ME={wE:1001*(2*i+1)+1}),u=new RTCRtpSender(r,c.XE)),e.pP&&(l=new RTCRtpReceiver(c.XE,n)),h[i]={YE:c.YE,$O:c.$O,XE:c.XE,XO:p,ZO:null,tI:u,eI:l,kind:n,ZE:a,iI:d,eP:null}}),this.DO&&(c+="a=group:BUNDLE "+h.map(function(t){return t.ZE}).join(" ")+"\r\n"),i.forEach(function(e,i){var r=h[i];c+=o.$E(r,r.XO,"offer",t.xO[0])}),this.KO=h;var p=new RTCSessionDescription({type:"offer",sdp:c});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,p),Promise.resolve(p)},window.RTCPeerConnection.prototype.createAnswer=function(){var t=this,e=o.WE();this.DO&&(e+="a=group:BUNDLE "+this.LO.map(function(t){return t.ZE}).join(" ")+"\r\n"),this.LO.forEach(function(i){if(i.iP)return void(e+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+i.ZE+"\r\n");var r=t.QO(i.XO,i.ZO);e+=o.$E(i,r,"answer",t.xO[0])});var i=new RTCSessionDescription({type:"answer",sdp:e});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,i),Promise.resolve(i)},window.RTCPeerConnection.prototype.addIceCandidate=function(t){if(t){var e=t.sdpMLineIndex;if(t.sdpMid)for(var i=0;i<this.LO.length;i++)if(this.LO[i].ZE===t.sdpMid){e=i;break}var r=this.LO[e];if(r){var n=Object.keys(t.candidate).length>0?o.zb(t.candidate):{};if("tcp"===n.protocol&&(0===n.port||9===n.port))return Promise.resolve();if("1"!==n.$b)return Promise.resolve();r.$O.addRemoteCandidate(n);var s=o.Kb(this.remoteDescription.sdp);s[e+1]+=(n.type?t.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=s.join("")}}else for(var a=0;a<this.LO.length;a++)if(this.LO[a].$O.addRemoteCandidate({}),this.DO)return Promise.resolve();return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var t=[];this.LO.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(i){e[i]&&t.push(e[i].getStats())})});var e=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1],i=function(t){return{lP:"inbound-rtp",dP:"outbound-rtp",fP:"candidate-pair",dO:"local-candidate",fO:"remote-candidate"}[t.type]||t.type};return new Promise(function(r){var n=new Map;Promise.all(t).then(function(t){t.forEach(function(t){Object.keys(t).forEach(function(e){t[e].type=i(t[e]),n.set(e,t[e])})}),e&&window.setTimeout(e,0,n),r(n)})})}}};t.t={XC:a.XC,ZC:i(69)}},function(t,e){"use strict";t.t=function(){var t=function(t){return{name:{EO:"NotAllowedError"}[t.name]||t.name,message:t.message,RO:t.RO,toString:function(){return this.name}}},e=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(i){return e(i)["catch"](function(e){return Promise.reject(t(e))})}}},function(t,e,i){"use strict";var r=i(3).ri,n={iO:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this.nO},set:function(t){this.nO&&(this.removeEventListener("track",this.nO),this.removeEventListener("addstream",this.oO)),this.addEventListener("track",this.nO=t),this.addEventListener("addstream",this.oO=function(t){t.stream.getTracks().forEach(function(e){var i=new Event("track");i.track=e,i.receiver={track:e},i.sO=[t.stream],this.dispatchEvent(i)}.bind(this))}.bind(this))}})},eO:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(t){this.mozSrcObject=t}}))},XC:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(t,e){if(r.version<38&&t&&t.iceServers){for(var i=[],n=0;n<t.iceServers.length;n++){var o=t.iceServers[n];if(o.hasOwnProperty("urls"))for(var s=0;s<o.PO.length;s++){var a={url:o.PO[s]};0===o.PO[s].indexOf("turn")&&(a.username=o.username,a.gP=o.gP),i.push(a)}else i.push(t.iceServers[n])}t.iceServers=i}return new mozRTCPeerConnection(t,e)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?RTCIceCandidate:RTCSessionDescription)(arguments[0]),e.apply(this,arguments)}});var t=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var e=function(t){var e=new Map;return Object.keys(t).forEach(function(i){e.set(i,t[i]),e[i]=t[i]}),e},i={lP:"inbound-rtp",dP:"outbound-rtp",fP:"candidate-pair",dO:"local-candidate",fO:"remote-candidate"},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(t,o,s){return n.apply(this,[t||null]).then(function(t){if(r.version<48&&(t=e(t)),r.version<53&&!o)try{t.forEach(function(t){t.type=i[t.type]||t.type})}catch(n){if("TypeError"!==n.name)throw n;t.forEach(function(e,r){t.set(r,Object.assign({},e,{type:i[e.type]||e.type}))})}return t}).then(o,s)}}}};t.t={iO:n.iO,eO:n.eO,XC:n.XC,ZC:i(71)}},function(t,e,i){"use strict";var r=i(3).log,n=i(3).ri;t.t=function(){var t=function(t){return{name:{vP:"NotAllowedError",EO:"NotAllowedError"}[t.name]||t.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[t.message]||t.message,RO:t.RO,toString:function(){return this.name+(this.message&&": ")+this.message}}},e=function(e,i,o){var s=function(t){if("object"!=typeof t||t.yP)return t;var e=[];return Object.keys(t).forEach(function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var r=t[i]="object"==typeof t[i]?t[i]:{vO:t[i]};if(void 0===r.min&&void 0===r.max&&void 0===r.yO||e.push(i),void 0!==r.yO&&("number"==typeof r.yO?r.min=r.max=r.yO:t[i]=r.yO,delete r.yO),void 0!==r.vO){t.mO=t.mO||[];var n={};"number"==typeof r.vO?n[i]={min:r.vO,max:r.vO}:n[i]=r.vO,t.mO.push(n),delete r.vO,Object.keys(r).length||delete t[i]}}}),e.length&&(t.yP=e),t};return e=JSON.parse(JSON.stringify(e)),n.version<38&&(r("spec: "+JSON.stringify(e)),e.Mp&&(e.Mp=s(e.Mp)),e.video&&(e.video=s(e.video)),r("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,i,function(e){o(t(e))})},i=function(t){return new Promise(function(i,r){e(t,i,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:i,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.SO=navigator.mediaDevices.SO||function(){return new Promise(function(t){var e=[{kind:"audioinput",bO:"default",label:"",kO:""},{kind:"videoinput",bO:"default",label:"",kO:""}];t(e)})},n.version<41){var o=navigator.mediaDevices.SO.bind(navigator.mediaDevices);navigator.mediaDevices.SO=function(){return o().then(void 0,function(t){if("NotFoundError"===t.name)return[];throw t})}}if(n.version<49){var s=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return s(e).then(function(t){if(e.Mp&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(t){t.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(t(e))})}}navigator.getUserMedia=function(t,i,r){return n.version<44?e(t,i,r):(console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),void navigator.mediaDevices.getUserMedia(t).then(i,r))}}},function(t,e){"use strict";var i={ZC:function(){navigator.getUserMedia||(navigator.webkitGetUserMedia?navigator.getUserMedia=navigator.webkitGetUserMedia.bind(navigator):navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(navigator.getUserMedia=function(t,e,i){navigator.mediaDevices.getUserMedia(t).then(e,i)}.bind(navigator)))}};t.t={ZC:i.ZC}}]);

//# sourceMappingURL=bitmovin.hive.min.js.map


/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgN2Q4MWQxYjgxZjUxMTQ1YjQ1MzMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvZG9tLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvY29udGFpbmVyLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvY29tcG9uZW50LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2V2ZW50ZGlzcGF0Y2hlci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9hcnJheXV0aWxzLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL3BsYXllcnV0aWxzLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvYnV0dG9uLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvbGFiZWwudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy90b2dnbGVidXR0b24udHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYW5ndWxhclwiIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL3RpbWVvdXQudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvYnJvd3NlcnV0aWxzLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvcGxheWJhY2t0b2dnbGVidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zZWVrYmFyLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL3N0cmluZ3V0aWxzLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvY29udHJvbGJhci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci91aXV0aWxzLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvdWljb250YWluZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9wbGF5YmFja3RpbWVsYWJlbC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3NwYWNlci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3NlZWtiYXJsYWJlbC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3NlbGVjdGJveC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2xpc3RzZWxlY3Rvci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3ZvbHVtZWNvbnRyb2xidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy92b2x1bWVzbGlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy92b2x1bWV0b2dnbGVidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9lcnJvcm1lc3NhZ2VvdmVybGF5LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvcGxheWJhY2t0b2dnbGVvdmVybGF5LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvaHVnZXBsYXliYWNrdG9nZ2xlYnV0dG9uLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvYXVkaW9vbmx5b3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9iaXRkYXNoLWNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vYml0ZGFzaC1kaXJlY3RpdmUudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci91aW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvZ3VpZC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2Z1bGxzY3JlZW50b2dnbGVidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvaW1hZ2Vsb2FkZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNlbGVjdGJveC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlb3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3R2bm9pc2VjYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9pdGVtc2VsZWN0aW9ubGlzdC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2NsaWNrb3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2h1Z2VyZXBsYXlidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jbG9zZWJ1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9zdG9yYWdldXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi9oaXZlL2JpdG1vdmluLmhpdmUubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsdUJBQXVCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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LHdDQUF3QyxxREFBcUQsZ0RBQWdELCtDQUErQyxzQkFBc0IseUJBQXlCLEVBQUUsU0FBUyxnQ0FBZ0Msd0JBQXdCLHdCQUF3QixJQUFJLHVCQUF1QixHQUFHLEVBQUUsU0FBUyxnQkFBZ0IsS0FBSyxrQ0FBa0MsaUJBQWlCLGFBQWEseUJBQXlCLGVBQWUsa0JBQWtCLE9BQU8sTUFBTSwwQ0FBMEMsMEJBQTBCLG9IQUFvSCxtREFBbUQscURBQXFELG1CQUFtQixrQkFBa0IscUNBQXFDLFNBQVMsMENBQTBDLHFEQUFxRCx1Q0FBdUMsU0FBUyx5SkFBeUosY0FBYyxTQUFTLDRCQUE0QixrQkFBa0IseUVBQXlFLHdCQUF3QixnTkFBZ04sUUFBUSxFQUFFLGVBQWUsaUNBQWlDLFNBQVMsR0FBRyxvREFBb0QsNENBQTRDLGtDQUFrQyxrRUFBa0UsK0JBQStCLFFBQVEsOENBQThDLEVBQUUsOENBQThDLEVBQUUsS0FBSyxFQUFFLGVBQWUsNkRBQTZELHFDQUFxQyxtQ0FBbUMscUNBQXFDLFFBQVEsR0FBRyxpQkFBaUIsdUVBQXVFLGdEQUFnRCw2QkFBNkIsaUhBQWlILFNBQVMsd0VBQXdFLFNBQVMsYUFBYSw0QkFBNEIsR0FBRyx1Q0FBdUMsdUxBQXVMLGVBQWUsYUFBYSxPQUFPLGNBQWMsK05BQStOLGlEQUFpRCxxQkFBcUIsS0FBSyxTQUFTOztBQUUxdW5CIiwiZmlsZSI6Im1pLWFuZ3VsYXItYml0ZGFzaC1wbGF5ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgN2Q4MWQxYjgxZjUxMTQ1YjQ1MzMiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vKipcclxuICogU2ltcGxlIERPTSBtYW5pcHVsYXRpb24gYW5kIERPTSBlbGVtZW50IGV2ZW50IGhhbmRsaW5nIG1vZGVsZWQgYWZ0ZXIgalF1ZXJ5IChhcyByZXBsYWNlbWVudCBmb3IgalF1ZXJ5KS5cclxuICpcclxuICogTGlrZSBqUXVlcnksIERPTSBvcGVyYXRlcyBvbiBzaW5nbGUgZWxlbWVudHMgYW5kIGxpc3RzIG9mIGVsZW1lbnRzLiBGb3IgZXhhbXBsZTogY3JlYXRpbmcgYW4gZWxlbWVudCByZXR1cm5zIGEgRE9NXHJcbiAqIGluc3RhbmNlIHdpdGggYSBzaW5nbGUgZWxlbWVudCwgc2VsZWN0aW5nIGVsZW1lbnRzIHJldHVybnMgYSBET00gaW5zdGFuY2Ugd2l0aCB6ZXJvLCBvbmUsIG9yIG1hbnkgZWxlbWVudHMuIFNpbWlsYXJcclxuICogdG8galF1ZXJ5LCBzZXR0ZXJzIHVzdWFsbHkgYWZmZWN0IGFsbCBlbGVtZW50cywgd2hpbGUgZ2V0dGVycyBvcGVyYXRlIG9uIG9ubHkgdGhlIGZpcnN0IGVsZW1lbnQuXHJcbiAqIEFsc28gc2ltaWxhciB0byBqUXVlcnksIG1vc3QgbWV0aG9kcyAoZXhjZXB0IGdldHRlcnMpIHJldHVybiB0aGUgRE9NIGluc3RhbmNlIGZhY2lsaXRhdGluZyBlYXN5IGNoYWluaW5nIG9mIG1ldGhvZFxyXG4gKiBjYWxscy5cclxuICpcclxuICogQnVpbHQgd2l0aCB0aGUgaGVscCBvZjogaHR0cDovL3lvdW1pZ2h0bm90bmVlZGpxdWVyeS5jb20vXHJcbiAqL1xyXG52YXIgRE9NID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERPTShzb21ldGhpbmcsIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7IC8vIFNldCB0aGUgZ2xvYmFsIGRvY3VtZW50IHRvIHRoZSBsb2NhbCBkb2N1bWVudCBmaWVsZFxyXG4gICAgICAgIGlmIChzb21ldGhpbmcgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICBpZiAoc29tZXRoaW5nLmxlbmd0aCA+IDAgJiYgc29tZXRoaW5nWzBdIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IHNvbWV0aGluZztcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzb21ldGhpbmcgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNvbWV0aGluZztcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cyA9IFtlbGVtZW50XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc29tZXRoaW5nIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiBhIGRvY3VtZW50IGlzIHBhc3NlZCBpbiwgd2UgZG8gbm90IGRvIGFueXRoaW5nIHdpdGggaXQsIGJ1dCBieSBzZXR0aW5nIHRoaXMuZWxlbWVudHMgdG8gbnVsbFxyXG4gICAgICAgICAgICAvLyB3ZSBnaXZlIHRoZSBldmVudCBoYW5kbGluZyBtZXRob2QgYSBtZWFucyB0byBkZXRlY3QgaWYgdGhlIGV2ZW50cyBzaG91bGQgYmUgcmVnaXN0ZXJlZCBvbiB0aGUgZG9jdW1lbnRcclxuICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiBlbGVtZW50cy5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgdmFyIHRhZ05hbWUgPSBzb21ldGhpbmc7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgYXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlVmFsdWUgPSBhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMgPSBbZWxlbWVudF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBzb21ldGhpbmc7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMgPSB0aGlzLmZpbmRDaGlsZEVsZW1lbnRzKHNlbGVjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRE9NLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIG51bWJlciBvZiBlbGVtZW50cyB0aGF0IHRoaXMgRE9NIGluc3RhbmNlIGN1cnJlbnRseSBob2xkcy5cclxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzID8gdGhpcy5lbGVtZW50cy5sZW5ndGggOiAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBIVE1MIGVsZW1lbnRzIHRoYXQgdGhpcyBET00gaW5zdGFuY2UgY3VycmVudGx5IGhvbGRzLlxyXG4gICAgICogQHJldHVybnMge0hUTUxFbGVtZW50W119IHRoZSByYXcgSFRNTCBlbGVtZW50c1xyXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIHtAbGluayAjZ2V0KCl9IGluc3RlYWRcclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS5nZXRFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXQoKTtcclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghdGhpcy5lbGVtZW50cyB8fCBpbmRleCA+PSB0aGlzLmVsZW1lbnRzLmxlbmd0aCB8fCBpbmRleCA8IC10aGlzLmVsZW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbmRleCA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNbdGhpcy5lbGVtZW50cy5sZW5ndGggLSBpbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c1tpbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQSBzaG9ydGN1dCBtZXRob2QgZm9yIGl0ZXJhdGluZyBhbGwgZWxlbWVudHMuIFNob3J0cyB0aGlzLmVsZW1lbnRzLmZvckVhY2goLi4uKSB0byB0aGlzLmZvckVhY2goLi4uKS5cclxuICAgICAqIEBwYXJhbSBoYW5kbGVyIHRoZSBoYW5kbGVyIHRvIGV4ZWN1dGUgYW4gb3BlcmF0aW9uIG9uIGFuIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaGFuZGxlcihlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLmZpbmRDaGlsZEVsZW1lbnRzT2ZFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIHNlbGVjdG9yKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkRWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gICAgICAgIC8vIENvbnZlcnQgTm9kZUxpc3QgdG8gQXJyYXlcclxuICAgICAgICAvLyBodHRwczovL3RvZGRtb3R0by5jb20vYS1jb21wcmVoZW5zaXZlLWRpdmUtaW50by1ub2RlbGlzdHMtYXJyYXlzLWNvbnZlcnRpbmctbm9kZWxpc3RzLWFuZC11bmRlcnN0YW5kaW5nLXRoZS1kb20vXHJcbiAgICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoY2hpbGRFbGVtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5maW5kQ2hpbGRFbGVtZW50cyA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGFsbENoaWxkRWxlbWVudHMgPSBbXTtcclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50cykge1xyXG4gICAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGFsbENoaWxkRWxlbWVudHMgPSBhbGxDaGlsZEVsZW1lbnRzLmNvbmNhdChfdGhpcy5maW5kQ2hpbGRFbGVtZW50c09mRWxlbWVudChlbGVtZW50LCBzZWxlY3RvcikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRDaGlsZEVsZW1lbnRzT2ZFbGVtZW50KGRvY3VtZW50LCBzZWxlY3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhbGxDaGlsZEVsZW1lbnRzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRmluZHMgYWxsIGNoaWxkIGVsZW1lbnRzIG9mIGFsbCBlbGVtZW50cyBtYXRjaGluZyB0aGUgc3VwcGxpZWQgc2VsZWN0b3IuXHJcbiAgICAgKiBAcGFyYW0gc2VsZWN0b3IgdGhlIHNlbGVjdG9yIHRvIG1hdGNoIHdpdGggY2hpbGQgZWxlbWVudHNcclxuICAgICAqIEByZXR1cm5zIHtET019IGEgbmV3IERPTSBpbnN0YW5jZSByZXByZXNlbnRpbmcgYWxsIG1hdGNoZWQgY2hpbGRyZW5cclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgdmFyIGFsbENoaWxkRWxlbWVudHMgPSB0aGlzLmZpbmRDaGlsZEVsZW1lbnRzKHNlbGVjdG9yKTtcclxuICAgICAgICByZXR1cm4gbmV3IERPTShhbGxDaGlsZEVsZW1lbnRzKTtcclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLmh0bWwgPSBmdW5jdGlvbiAoY29udGVudCkge1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRIdG1sKGNvbnRlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SHRtbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLmdldEh0bWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNbMF0uaW5uZXJIVE1MO1xyXG4gICAgfTtcclxuICAgIERPTS5wcm90b3R5cGUuc2V0SHRtbCA9IGZ1bmN0aW9uIChjb250ZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbnRlbnQgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gU2V0IHRvIGVtcHR5IHN0cmluZyB0byBhdm9pZCBpbm5lckhUTUwgZ2V0dGluZyBzZXQgdG8gJ3VuZGVmaW5lZCcgKGFsbCBicm93c2Vycykgb3IgJ251bGwnIChJRTkpXHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gY29udGVudDtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyB0aGUgaW5uZXIgSFRNTCBvZiBhbGwgZWxlbWVudHMgKGRlbGV0ZXMgYWxsIGNoaWxkcmVuKS5cclxuICAgICAqIEByZXR1cm5zIHtET019XHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUuZW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBmaXJzdCBmb3JtIGVsZW1lbnQsIGUuZy4gdGhlIHNlbGVjdGVkIHZhbHVlIG9mIGEgc2VsZWN0IGJveCBvciB0aGUgdGV4dCBpZiBhblxyXG4gICAgICogaW5wdXQgZmllbGQuXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgdmFsdWUgb2YgYSBmb3JtIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS52YWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnRzWzBdO1xyXG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQgfHwgZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUT0RPIGFkZCBzdXBwb3J0IGZvciBtaXNzaW5nIGZvcm0gZWxlbWVudHNcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidmFsKCkgbm90IHN1cHBvcnRlZCBmb3IgXCIgKyB0eXBlb2YgZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERPTS5wcm90b3R5cGUuYXR0ciA9IGZ1bmN0aW9uIChhdHRyaWJ1dGUsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldEF0dHIoYXR0cmlidXRlLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyKGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERPTS5wcm90b3R5cGUuZ2V0QXR0ciA9IGZ1bmN0aW9uIChhdHRyaWJ1dGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c1swXS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLnNldEF0dHIgPSBmdW5jdGlvbiAoYXR0cmlidXRlLCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLmRhdGEgPSBmdW5jdGlvbiAoZGF0YUF0dHJpYnV0ZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0RGF0YShkYXRhQXR0cmlidXRlLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhKGRhdGFBdHRyaWJ1dGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoZGF0YUF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS0nICsgZGF0YUF0dHJpYnV0ZSk7XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5zZXREYXRhID0gZnVuY3Rpb24gKGRhdGFBdHRyaWJ1dGUsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLScgKyBkYXRhQXR0cmlidXRlLCB2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBlbmRzIG9uZSBvciBtb3JlIERPTSBlbGVtZW50cyBhcyBjaGlsZHJlbiB0byBhbGwgZWxlbWVudHMuXHJcbiAgICAgKiBAcGFyYW0gY2hpbGRFbGVtZW50cyB0aGUgY2hyaWxkIGVsZW1lbnRzIHRvIGFwcGVuZFxyXG4gICAgICogQHJldHVybnMge0RPTX1cclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkRWxlbWVudHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBjaGlsZEVsZW1lbnRzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBjaGlsZEVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRFbGVtZW50LmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKF8sIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZEVsZW1lbnQuZWxlbWVudHNbaW5kZXhdKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYWxsIGVsZW1lbnRzIGZyb20gdGhlIERPTS5cclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgb2Zmc2V0IG9mIHRoZSBmaXJzdCBlbGVtZW50IGZyb20gdGhlIGRvY3VtZW50J3MgdG9wIGxlZnQgY29ybmVyLlxyXG4gICAgICogQHJldHVybnMge09mZnNldH1cclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS5vZmZzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnRzWzBdO1xyXG4gICAgICAgIHZhciBlbGVtZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdmFyIGh0bWxSZWN0ID0gZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIC8vIFZpcnR1YWwgdmlld3BvcnQgc2Nyb2xsIGhhbmRsaW5nIChlLmcuIHBpbmNoIHpvb21lZCB2aWV3cG9ydHMgaW4gbW9iaWxlIGJyb3dzZXJzIG9yIGRlc2t0b3AgQ2hyb21lL0VkZ2UpXHJcbiAgICAgICAgLy8gJ25vcm1hbCcgem9vbXMgYW5kIHZpcnR1YWwgdmlld3BvcnQgem9vbXMgKGFrYSBsYXlvdXQgdmlld3BvcnQpIHJlc3VsdCBpbiBkaWZmZXJlbnRcclxuICAgICAgICAvLyBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIHJlc3VsdHM6XHJcbiAgICAgICAgLy8gIC0gd2l0aCBub3JtYWwgc2Nyb2xscywgdGhlIGNsaWVudFJlY3QgZGVjcmVhc2VzIHdpdGggYW4gaW5jcmVhc2UgaW4gc2Nyb2xsKFRvcHxMZWZ0KS9wYWdlKFh8WSlPZmZzZXRcclxuICAgICAgICAvLyAgLSB3aXRoIHBpbmNoIHpvb20gc2Nyb2xscywgdGhlIGNsaWVudFJlY3Qgc3RheXMgdGhlIHNhbWUgd2hpbGUgc2Nyb2xsL3BhZ2VPZmZzZXQgY2hhbmdlc1xyXG4gICAgICAgIC8vIFRoaXMgbWVhbnMsIHRoYXQgdGhlIGNvbWJpbmF0aW9uIG9mIGNsaWVudFJlY3QgKyBzY3JvbGwvcGFnZU9mZnNldCBkb2VzIG5vdCB3b3JrIHRvIGNhbGN1bGF0ZSB0aGUgb2Zmc2V0XHJcbiAgICAgICAgLy8gZnJvbSB0aGUgZG9jdW1lbnQncyB1cHBlciBsZWZ0IG9yaWdpbiB3aGVuIHBpbmNoIHpvb20gaXMgdXNlZC5cclxuICAgICAgICAvLyBUbyB3b3JrIGFyb3VuZCB0aGlzIGlzc3VlLCB3ZSBkbyBub3QgdXNlIHNjcm9sbC9wYWdlT2Zmc2V0IGJ1dCBnZXQgdGhlIGNsaWVudFJlY3Qgb2YgdGhlIGh0bWwgZWxlbWVudCBhbmRcclxuICAgICAgICAvLyBzdWJ0cmFjdCBpdCBmcm9tIHRoZSBlbGVtZW50J3MgcmVjdCwgd2hpY2ggYWx3YXlzIHJlc3VsdHMgaW4gdGhlIG9mZnNldCBmcm9tIHRoZSBkb2N1bWVudCBvcmlnaW4uXHJcbiAgICAgICAgLy8gTk9URTogdGhlIGN1cnJlbnQgd2F5IG9mIG9mZnNldCBjYWxjdWxhdGlvbiB3YXMgaW1wbGVtZW50ZWQgc3BlY2lmaWNhbGx5IHRvIHRyYWNrIGV2ZW50IHBvc2l0aW9ucyBvbiB0aGVcclxuICAgICAgICAvLyBzZWVrIGJhciwgYW5kIGl0IG1pZ2h0IGJyZWFrIGNvbXBhdGliaWxpdHkgd2l0aCBqUXVlcnkncyBvZmZzZXQoKSBtZXRob2QuIElmIHRoaXMgZXZlciB0dXJucyBvdXQgdG8gYmUgYVxyXG4gICAgICAgIC8vIHByb2JsZW0sIHRoaXMgbWV0aG9kIHNob3VsZCBiZSByZXZlcnRlZCB0byB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBvZmZzZXQgY2FsY3VsYXRpb24gbW92ZWQgdG8gdGhlIHNlZWsgYmFyLlxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcDogZWxlbWVudFJlY3QudG9wIC0gaHRtbFJlY3QudG9wLFxyXG4gICAgICAgICAgICBsZWZ0OiBlbGVtZW50UmVjdC5sZWZ0IC0gaHRtbFJlY3QubGVmdCxcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgd2lkdGggb2YgdGhlIGZpcnN0IGVsZW1lbnQuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgd2lkdGggb2YgdGhlIGZpcnN0IGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS53aWR0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUT0RPIGNoZWNrIGlmIHRoaXMgaXMgdGhlIHNhbWUgYXMgalF1ZXJ5J3Mgd2lkdGgoKSAocHJvYmFibHkgbm90KVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzWzBdLm9mZnNldFdpZHRoO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgaGVpZ2h0IG9mIHRoZSBmaXJzdCBlbGVtZW50LlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gdGhlIGhlaWdodCBvZiB0aGUgZmlyc3QgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBET00ucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUT0RPIGNoZWNrIGlmIHRoaXMgaXMgdGhlIHNhbWUgYXMgalF1ZXJ5J3MgaGVpZ2h0KCkgKHByb2JhYmx5IG5vdClcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c1swXS5vZmZzZXRIZWlnaHQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRhY2hlcyBhbiBldmVudCBoYW5kbGVyIHRvIG9uZSBvciBtb3JlIGV2ZW50cyBvbiBhbGwgZWxlbWVudHMuXHJcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIHRoZSBldmVudCBuYW1lIChvciBtdWx0aXBsZSBuYW1lcyBzZXBhcmF0ZWQgYnkgc3BhY2UpIHRvIGxpc3RlbiB0b1xyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciB0aGUgZXZlbnQgaGFuZGxlciB0byBjYWxsIHdoZW4gdGhlIGV2ZW50IGZpcmVzXHJcbiAgICAgKiBAcmV0dXJucyB7RE9NfVxyXG4gICAgICovXHJcbiAgICBET00ucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZXZlbnRzID0gZXZlbnROYW1lLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5lbGVtZW50cyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBldmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFuIGV2ZW50IGhhbmRsZXIgZnJvbSBvbmUgb3IgbW9yZSBldmVudHMgb24gYWxsIGVsZW1lbnRzLlxyXG4gICAgICogQHBhcmFtIGV2ZW50TmFtZSB0aGUgZXZlbnQgbmFtZSAob3IgbXVsdGlwbGUgbmFtZXMgc2VwYXJhdGVkIGJ5IHNwYWNlKSB0byByZW1vdmUgdGhlIGhhbmRsZXIgZnJvbVxyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciB0aGUgZXZlbnQgaGFuZGxlciB0byByZW1vdmVcclxuICAgICAqIEByZXR1cm5zIHtET019XHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZXZlbnRzID0gZXZlbnROYW1lLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5lbGVtZW50cyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBldmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBzcGVjaWZpZWQgY2xhc3MoZXMpIHRvIGFsbCBlbGVtZW50cy5cclxuICAgICAqIEBwYXJhbSBjbGFzc05hbWUgdGhlIGNsYXNzKGVzKSB0byBhZGQsIG11bHRpcGxlIGNsYXNzZXMgc2VwYXJhdGVkIGJ5IHNwYWNlXHJcbiAgICAgKiBAcmV0dXJucyB7RE9NfVxyXG4gICAgICovXHJcbiAgICBET00ucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVkIHRoZSBzcGVjaWZpZWQgY2xhc3MoZXMpIGZyb20gYWxsIGVsZW1lbnRzLlxyXG4gICAgICogQHBhcmFtIGNsYXNzTmFtZSB0aGUgY2xhc3MoZXMpIHRvIHJlbW92ZSwgbXVsdGlwbGUgY2xhc3NlcyBzZXBhcmF0ZWQgYnkgc3BhY2VcclxuICAgICAqIEByZXR1cm5zIHtET019XHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnKF58XFxcXGIpJyArIGNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIGFueSBvZiB0aGUgZWxlbWVudHMgaGFzIHRoZSBzcGVjaWZpZWQgY2xhc3MuXHJcbiAgICAgKiBAcGFyYW0gY2xhc3NOYW1lIHRoZSBjbGFzcyBuYW1lIHRvIGNoZWNrXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBvbmUgb2YgdGhlIGVsZW1lbnRzIGhhcyB0aGUgY2xhc3MgYXR0YWNoZWQsIGVsc2UgaWYgbm8gZWxlbWVudCBoYXMgaXQgYXR0YWNoZWRcclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS5oYXNDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcclxuICAgICAgICB2YXIgaGFzQ2xhc3MgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHdlIGFyZSBpbnNpZGUgYSBoYW5kbGVyLCB3ZSBjYW4ndCBqdXN0ICdyZXR1cm4gdHJ1ZScuIEluc3RlYWQsIHdlIHNhdmUgaXQgdG8gYSB2YXJpYWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gaXQgYXQgdGhlIGVuZCBvZiB0aGUgZnVuY3Rpb24gYm9keS5cclxuICAgICAgICAgICAgICAgICAgICBoYXNDbGFzcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3IFJlZ0V4cCgnKF58ICknICsgY2xhc3NOYW1lICsgJyggfCQpJywgJ2dpJykudGVzdChlbGVtZW50LmNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTZWUgY29tbWVudCBhYm92ZVxyXG4gICAgICAgICAgICAgICAgICAgIGhhc0NsYXNzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBoYXNDbGFzcztcclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLmNzcyA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWVPckNvbGxlY3Rpb24sIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0eU5hbWVPckNvbGxlY3Rpb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWVPckNvbGxlY3Rpb247XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDc3MocHJvcGVydHlOYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDc3MocHJvcGVydHlOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHByb3BlcnR5VmFsdWVDb2xsZWN0aW9uID0gcHJvcGVydHlOYW1lT3JDb2xsZWN0aW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDc3NDb2xsZWN0aW9uKHByb3BlcnR5VmFsdWVDb2xsZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5nZXRDc3MgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtZW50c1swXSlbcHJvcGVydHlOYW1lXTtcclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLnNldENzcyA9IGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIC8vIDxhbnk+IGNhc3QgdG8gcmVzb2x2ZSBUUzcwMTU6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM2NjI3MTE0LzM3MDI1MlxyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BlcnR5TmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLnNldENzc0NvbGxlY3Rpb24gPSBmdW5jdGlvbiAocnVsZVZhbHVlQ29sbGVjdGlvbikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zNDQ5MDU3My8zNzAyNTJcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBydWxlVmFsdWVDb2xsZWN0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gRE9NO1xyXG59KCkpO1xyXG5leHBvcnRzLkRPTSA9IERPTTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9kb20udHNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb21wb25lbnRfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudFwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4uL2RvbVwiKTtcclxudmFyIGFycmF5dXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9hcnJheXV0aWxzXCIpO1xyXG4vKipcclxuICogQSBjb250YWluZXIgY29tcG9uZW50IHRoYXQgY2FuIGNvbnRhaW4gYSBjb2xsZWN0aW9uIG9mIGNoaWxkIGNvbXBvbmVudHMuXHJcbiAqIENvbXBvbmVudHMgY2FuIGJlIGFkZGVkIGF0IGNvbnN0cnVjdGlvbiB0aW1lIHRocm91Z2ggdGhlIHtAbGluayBDb250YWluZXJDb25maWcjY29tcG9uZW50c30gc2V0dGluZywgb3IgbGF0ZXJcclxuICogdGhyb3VnaCB0aGUge0BsaW5rIENvbnRhaW5lciNhZGRDb21wb25lbnR9IG1ldGhvZC4gVGhlIFVJTWFuYWdlciBhdXRvbWF0aWNhbGx5IHRha2VzIGNhcmUgb2YgYWxsIGNvbXBvbmVudHMsIGkuZS4gaXRcclxuICogaW5pdGlhbGl6ZXMgYW5kIGNvbmZpZ3VyZXMgdGhlbSBhdXRvbWF0aWNhbGx5LlxyXG4gKlxyXG4gKiBJbiB0aGUgRE9NLCB0aGUgY29udGFpbmVyIGNvbnNpc3RzIG9mIGFuIG91dGVyIDxkaXY+ICh0aGF0IGNhbiBiZSBjb25maWd1cmVkIGJ5IHRoZSBjb25maWcpIGFuZCBhbiBpbm5lciB3cmFwcGVyXHJcbiAqIDxkaXY+IHRoYXQgY29udGFpbnMgdGhlIGNvbXBvbmVudHMuIFRoaXMgZG91YmxlLTxkaXY+LXN0cnVjdHVyZSBpcyBvZnRlbiByZXF1aXJlZCB0byBhY2hpZXZlIG1hbnkgYWR2YW5jZWQgZWZmZWN0c1xyXG4gKiBpbiBDU1MgYW5kL29yIEpTLCBlLmcuIGFuaW1hdGlvbnMgYW5kIGNlcnRhaW4gZm9ybWF0dGluZyB3aXRoIGFic29sdXRlIHBvc2l0aW9uaW5nLlxyXG4gKlxyXG4gKiBET00gZXhhbXBsZTpcclxuICogPGNvZGU+XHJcbiAqICAgICA8ZGl2IGNsYXNzPSd1aS1jb250YWluZXInPlxyXG4gKiAgICAgICAgIDxkaXYgY2xhc3M9J2NvbnRhaW5lci13cmFwcGVyJz5cclxuICogICAgICAgICAgICAgLi4uIGNoaWxkIGNvbXBvbmVudHMgLi4uXHJcbiAqICAgICAgICAgPC9kaXY+XHJcbiAqICAgICA8L2Rpdj5cclxuICogPC9jb2RlPlxyXG4gKi9cclxudmFyIENvbnRhaW5lciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQ29udGFpbmVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ29udGFpbmVyKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1jb250YWluZXInLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBbXSxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIF90aGlzLmNvbXBvbmVudHNUb0FkZCA9IFtdO1xyXG4gICAgICAgIF90aGlzLmNvbXBvbmVudHNUb1JlbW92ZSA9IFtdO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIGNoaWxkIGNvbXBvbmVudCB0byB0aGUgY29udGFpbmVyLlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCB0aGUgY29tcG9uZW50IHRvIGFkZFxyXG4gICAgICovXHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmFkZENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZy5jb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHNUb0FkZC5wdXNoKGNvbXBvbmVudCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGEgY2hpbGQgY29tcG9uZW50IGZyb20gdGhlIGNvbnRhaW5lci5cclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgdGhlIGNvbXBvbmVudCB0byByZW1vdmVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gcmVtb3ZlZCwgZmFsc2UgaWYgaXQgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGlzIGNvbnRhaW5lclxyXG4gICAgICovXHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnJlbW92ZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoYXJyYXl1dGlsc18xLkFycmF5VXRpbHMucmVtb3ZlKHRoaXMuY29uZmlnLmNvbXBvbmVudHMsIGNvbXBvbmVudCkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHNUb1JlbW92ZS5wdXNoKGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgYW4gYXJyYXkgb2YgYWxsIGNoaWxkIGNvbXBvbmVudHMgaW4gdGhpcyBjb250YWluZXIuXHJcbiAgICAgKiBAcmV0dXJucyB7Q29tcG9uZW50PENvbXBvbmVudENvbmZpZz5bXX1cclxuICAgICAqL1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXRDb21wb25lbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5jb21wb25lbnRzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbGwgY2hpbGQgY29tcG9uZW50cyBmcm9tIHRoZSBjb250YWluZXIuXHJcbiAgICAgKi9cclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUucmVtb3ZlQ29tcG9uZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5nZXRDb21wb25lbnRzKCkuc2xpY2UoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBET00gb2YgdGhlIGNvbnRhaW5lciB3aXRoIHRoZSBjdXJyZW50IGNvbXBvbmVudHMuXHJcbiAgICAgKi9cclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlQ29tcG9uZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvKiBXZSBjYW5ub3QganVzdCBjbGVhciB0aGUgY29udGFpbmVyIHRvIHJlbW92ZSBhbGwgZWxlbWVudHMgYW5kIHRoZW4gcmUtYWRkIHRob3NlIHRoYXQgc2hvdWxkIHN0YXksIGJlY2F1c2VcclxuICAgICAgICAgKiBJRSBsb29zZXMgdGhlIGlubmVySFRNTCBvZiB1bmF0dGFjaGVkIGVsZW1lbnRzLCBsZWFkaW5nIHRvIGVtcHR5IGVsZW1lbnRzIHdpdGhpbiB0aGUgY29udGFpbmVyIChlLmcuIG1pc3NpbmdcclxuICAgICAgICAgKiBzdWJ0aXRsZSB0ZXh0IGluIFN1YnRpdGxlTGFiZWwpLlxyXG4gICAgICAgICAqIEluc3RlYWQsIHdlIGtlZXAgYSBsaXN0IG9mIGVsZW1lbnRzIHRvIGFkZCBhbmQgcmVtb3ZlLCBsZWF2aW5nIHJlbWFpbmluZyBlbGVtZW50cyBhbG9uZS4gQnkga2VlcGluZyB0aGVtIGluXHJcbiAgICAgICAgICogdGhlIERPTSwgdGhlaXIgY29udGVudCBnZXRzIHByZXNlcnZlZCBpbiBhbGwgYnJvd3NlcnMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGNvbXBvbmVudDtcclxuICAgICAgICB3aGlsZSAoY29tcG9uZW50ID0gdGhpcy5jb21wb25lbnRzVG9SZW1vdmUuc2hpZnQoKSkge1xyXG4gICAgICAgICAgICBjb21wb25lbnQuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAoY29tcG9uZW50ID0gdGhpcy5jb21wb25lbnRzVG9BZGQuc2hpZnQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmlubmVyQ29udGFpbmVyRWxlbWVudC5hcHBlbmQoY29tcG9uZW50LmdldERvbUVsZW1lbnQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUudG9Eb21FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY29udGFpbmVyIGVsZW1lbnQgKHRoZSBvdXRlciA8ZGl2PilcclxuICAgICAgICB2YXIgY29udGFpbmVyRWxlbWVudCA9IG5ldyBkb21fMS5ET00odGhpcy5jb25maWcudGFnLCB7XHJcbiAgICAgICAgICAgICdpZCc6IHRoaXMuY29uZmlnLmlkLFxyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLmdldENzc0NsYXNzZXMoKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBDcmVhdGUgdGhlIGlubmVyIGNvbnRhaW5lciBlbGVtZW50ICh0aGUgaW5uZXIgPGRpdj4pIHRoYXQgd2lsbCBjb250YWluIHRoZSBjb21wb25lbnRzXHJcbiAgICAgICAgdmFyIGlubmVyQ29udGFpbmVyID0gbmV3IGRvbV8xLkRPTSh0aGlzLmNvbmZpZy50YWcsIHtcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ2NvbnRhaW5lci13cmFwcGVyJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pbm5lckNvbnRhaW5lckVsZW1lbnQgPSBpbm5lckNvbnRhaW5lcjtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jb25maWcuY29tcG9uZW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGluaXRpYWxDb21wb25lbnQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50c1RvQWRkLnB1c2goaW5pdGlhbENvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50cygpO1xyXG4gICAgICAgIGNvbnRhaW5lckVsZW1lbnQuYXBwZW5kKGlubmVyQ29udGFpbmVyKTtcclxuICAgICAgICByZXR1cm4gY29udGFpbmVyRWxlbWVudDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29udGFpbmVyO1xyXG59KGNvbXBvbmVudF8xLkNvbXBvbmVudCkpO1xyXG5leHBvcnRzLkNvbnRhaW5lciA9IENvbnRhaW5lcjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2NvbnRhaW5lci50c1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgZ3VpZF8xID0gcmVxdWlyZShcIi4uL2d1aWRcIik7XHJcbnZhciBkb21fMSA9IHJlcXVpcmUoXCIuLi9kb21cIik7XHJcbnZhciBldmVudGRpc3BhdGNoZXJfMSA9IHJlcXVpcmUoXCIuLi9ldmVudGRpc3BhdGNoZXJcIik7XHJcbi8qKlxyXG4gKiBUaGUgYmFzZSBjbGFzcyBvZiB0aGUgVUkgZnJhbWV3b3JrLlxyXG4gKiBFYWNoIGNvbXBvbmVudCBtdXN0IGV4dGVuZCB0aGlzIGNsYXNzIGFuZCBvcHRpb25hbGx5IHRoZSBjb25maWcgaW50ZXJmYWNlLlxyXG4gKi9cclxudmFyIENvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdHMgYSBjb21wb25lbnQgd2l0aCBhbiBvcHRpb25hbGx5IHN1cHBsaWVkIGNvbmZpZy4gQWxsIHN1YmNsYXNzZXMgbXVzdCBjYWxsIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGVpclxyXG4gICAgICogc3VwZXJjbGFzcyBhbmQgdGhlbiBtZXJnZSB0aGVpciBjb25maWd1cmF0aW9uIGludG8gdGhlIGNvbXBvbmVudCdzIGNvbmZpZ3VyYXRpb24uXHJcbiAgICAgKiBAcGFyYW0gY29uZmlnIHRoZSBjb25maWd1cmF0aW9uIGZvciB0aGUgY29tcG9uZW50XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIENvbXBvbmVudChjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbGlzdCBvZiBldmVudHMgdGhhdCB0aGlzIGNvbXBvbmVudCBvZmZlcnMuIFRoZXNlIGV2ZW50cyBzaG91bGQgYWx3YXlzIGJlIHByaXZhdGUgYW5kIG9ubHkgZGlyZWN0bHlcclxuICAgICAgICAgKiBhY2Nlc3NlZCBmcm9tIHdpdGhpbiB0aGUgaW1wbGVtZW50aW5nIGNvbXBvbmVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEJlY2F1c2UgVHlwZVNjcmlwdCBkb2VzIG5vdCBzdXBwb3J0IHByaXZhdGUgcHJvcGVydGllcyB3aXRoIHRoZSBzYW1lIG5hbWUgb24gZGlmZmVyZW50IGNsYXNzIGhpZXJhcmNoeSBsZXZlbHNcclxuICAgICAgICAgKiAoaS5lLiBzdXBlcmNsYXNzIGFuZCBzdWJjbGFzcyBjYW5ub3QgY29udGFpbiBhIHByaXZhdGUgcHJvcGVydHkgd2l0aCB0aGUgc2FtZSBuYW1lKSwgdGhlIGRlZmF1bHQgbmFtaW5nXHJcbiAgICAgICAgICogY29udmVudGlvbiBmb3IgdGhlIGV2ZW50IGxpc3Qgb2YgYSBjb21wb25lbnQgdGhhdCBzaG91bGQgYmUgZm9sbG93ZWQgYnkgc3ViY2xhc3NlcyBpcyB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICAgICAgICAgKiBjYW1lbC1jYXNlZCBjbGFzcyBuYW1lICsgJ0V2ZW50cycgKGUuZy4gU3ViQ2xhc3MgZXh0ZW5kcyBDb21wb25lbnQgPT4gc3ViQ2xhc3NFdmVudHMpLlxyXG4gICAgICAgICAqIFNlZSB7QGxpbmsgI2NvbXBvbmVudEV2ZW50c30gZm9yIGFuIGV4YW1wbGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBFdmVudCBwcm9wZXJ0aWVzIHNob3VsZCBiZSBuYW1lZCBpbiBjYW1lbCBjYXNlIHdpdGggYW4gJ29uJyBwcmVmaXggYW5kIGluIHRoZSBwcmVzZW50IHRlbnNlLiBBc3luYyBldmVudHMgbWF5XHJcbiAgICAgICAgICogaGF2ZSBhIHN0YXJ0IGV2ZW50ICh3aGVuIHRoZSBvcGVyYXRpb24gc3RhcnRzKSBpbiB0aGUgcHJlc2VudCB0ZW5zZSwgYW5kIG11c3QgaGF2ZSBhbiBlbmQgZXZlbnQgKHdoZW4gdGhlXHJcbiAgICAgICAgICogb3BlcmF0aW9uIGVuZHMpIGluIHRoZSBwYXN0IHRlbnNlIChvciBwcmVzZW50IHRlbnNlIGluIHNwZWNpYWwgY2FzZXMgKGUuZy4gb25TdGFydC9vblN0YXJ0ZWQgb3Igb25QbGF5L29uUGxheWluZykuXHJcbiAgICAgICAgICogU2VlIHtAbGluayAjY29tcG9uZW50RXZlbnRzI29uU2hvd30gZm9yIGFuIGV4YW1wbGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBFYWNoIGV2ZW50IHNob3VsZCBiZSBhY2NvbXBhbmllZCB3aXRoIGEgcHJvdGVjdGVkIG1ldGhvZCBuYW1lZCBieSB0aGUgY29udmVudGlvbiBldmVudE5hbWUgKyAnRXZlbnQnXHJcbiAgICAgICAgICogKGUuZy4gb25TdGFydEV2ZW50KSwgdGhhdCBhY3R1YWxseSB0cmlnZ2VycyB0aGUgZXZlbnQgYnkgY2FsbGluZyB7QGxpbmsgRXZlbnREaXNwYXRjaGVyI2Rpc3BhdGNoIGRpc3BhdGNofSBhbmRcclxuICAgICAgICAgKiBwYXNzaW5nIGEgcmVmZXJlbmNlIHRvIHRoZSBjb21wb25lbnQgYXMgZmlyc3QgcGFyYW1ldGVyLiBDb21wb25lbnRzIHNob3VsZCBhbHdheXMgdHJpZ2dlciB0aGVpciBldmVudHMgd2l0aCB0aGVzZVxyXG4gICAgICAgICAqIG1ldGhvZHMuIEltcGxlbWVudGluZyB0aGlzIHBhdHRlcm4gZ2l2ZXMgc3ViY2xhc3NlcyBtZWFucyB0byBkaXJlY3RseSBsaXN0ZW4gdG8gdGhlIGV2ZW50cyBieSBvdmVycmlkaW5nIHRoZVxyXG4gICAgICAgICAqIG1ldGhvZCAoYW5kIHNhdmluZyB0aGUgb3ZlcmhlYWQgb2YgcGFzc2luZyBhIGhhbmRsZXIgdG8gdGhlIGV2ZW50IGRpc3BhdGNoZXIpIGFuZCBtb3JlIGltcG9ydGFudGx5IHRvIHRyaWdnZXJcclxuICAgICAgICAgKiB0aGVzZSBldmVudHMgd2l0aG91dCBoYXZpbmcgYWNjZXNzIHRvIHRoZSBwcml2YXRlIGV2ZW50IGxpc3QuXHJcbiAgICAgICAgICogU2VlIHtAbGluayAjb25TaG93fSBmb3IgYW4gZXhhbXBsZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRvIHByb3ZpZGUgZXh0ZXJuYWwgY29kZSB0aGUgcG9zc2liaWxpdHkgdG8gbGlzdGVuIHRvIHRoaXMgY29tcG9uZW50J3MgZXZlbnRzIChzdWJzY3JpYmUsIHVuc3Vic2NyaWJlLCBldGMuKSxcclxuICAgICAgICAgKiBlYWNoIGV2ZW50IHNob3VsZCBhbHNvIGJlIGFjY29tcGFuaWVkIGJ5IGEgcHVibGljIGdldHRlciBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgdGhlIGV2ZW50J3MgcHJvcGVydHksXHJcbiAgICAgICAgICogdGhhdCByZXR1cm5zIHRoZSB7QGxpbmsgRXZlbnR9IG9idGFpbmVkIGZyb20gdGhlIGV2ZW50IGRpc3BhdGNoZXIgYnkgY2FsbGluZyB7QGxpbmsgRXZlbnREaXNwYXRjaGVyI2dldEV2ZW50fS5cclxuICAgICAgICAgKiBTZWUge0BsaW5rICNvblNob3d9IGZvciBhbiBleGFtcGxlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogRnVsbCBleGFtcGxlIGZvciBhbiBldmVudCByZXByZXNlbnRpbmcgYW4gZXhhbXBsZSBhY3Rpb24gaW4gYSBleGFtcGxlIGNvbXBvbmVudDpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIDxjb2RlPlxyXG4gICAgICAgICAqIC8vIERlZmluZSBhbiBleGFtcGxlIGNvbXBvbmVudCBjbGFzcyB3aXRoIGFuIGV4YW1wbGUgZXZlbnRcclxuICAgICAgICAgKiBjbGFzcyBFeGFtcGxlQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50PENvbXBvbmVudENvbmZpZz4ge1xyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqICAgICBwcml2YXRlIGV4YW1wbGVDb21wb25lbnRFdmVudHMgPSB7XHJcbiAgICAgICAgICAgKiAgICAgICAgIG9uRXhhbXBsZUFjdGlvbjogbmV3IEV2ZW50RGlzcGF0Y2hlcjxFeGFtcGxlQ29tcG9uZW50LCBOb0FyZ3M+KClcclxuICAgICAgICAgICAqICAgICB9XHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yIGFuZCBvdGhlciBzdHVmZi4uLlxyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqICAgICBwcm90ZWN0ZWQgb25FeGFtcGxlQWN0aW9uRXZlbnQoKSB7XHJcbiAgICAgICAgICAgKiAgICAgICAgdGhpcy5leGFtcGxlQ29tcG9uZW50RXZlbnRzLm9uRXhhbXBsZUFjdGlvbi5kaXNwYXRjaCh0aGlzKTtcclxuICAgICAgICAgICAqICAgIH1cclxuICAgICAgICAgICAqXHJcbiAgICAgICAgICAgKiAgICBnZXQgb25FeGFtcGxlQWN0aW9uKCk6IEV2ZW50PEV4YW1wbGVDb21wb25lbnQsIE5vQXJncz4ge1xyXG4gICAgICAgICAgICogICAgICAgIHJldHVybiB0aGlzLmV4YW1wbGVDb21wb25lbnRFdmVudHMub25FeGFtcGxlQWN0aW9uLmdldEV2ZW50KCk7XHJcbiAgICAgICAgICAgKiAgICB9XHJcbiAgICAgICAgICAgKiB9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiAvLyBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIGNvbXBvbmVudCBzb21ld2hlcmVcclxuICAgICAgICAgKiB2YXIgZXhhbXBsZUNvbXBvbmVudEluc3RhbmNlID0gbmV3IEV4YW1wbGVDb21wb25lbnQoKTtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIFN1YnNjcmliZSB0byB0aGUgZXhhbXBsZSBldmVudCBvbiB0aGUgY29tcG9uZW50XHJcbiAgICAgICAgICogZXhhbXBsZUNvbXBvbmVudEluc3RhbmNlLm9uRXhhbXBsZUFjdGlvbi5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlcjogRXhhbXBsZUNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICogICAgIGNvbnNvbGUubG9nKCdvbkV4YW1wbGVBY3Rpb24gb2YgJyArIHNlbmRlciArICcgaGFzIGZpcmVkIScpO1xyXG4gICAgICAgICAgICogfSk7XHJcbiAgICAgICAgICogPC9jb2RlPlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50RXZlbnRzID0ge1xyXG4gICAgICAgICAgICBvblNob3c6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICAgICAgb25IaWRlOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uSG92ZXJDaGFuZ2VkOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBDcmVhdGUgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgY29tcG9uZW50XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSB0aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICB0YWc6ICdkaXYnLFxyXG4gICAgICAgICAgICBpZDogJ21pLXdiYy1pZC0nICsgZ3VpZF8xLkd1aWQubmV4dCgpLFxyXG4gICAgICAgICAgICBjc3NQcmVmaXg6ICdtaS13YmMnLFxyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWNvbXBvbmVudCcsXHJcbiAgICAgICAgICAgIGNzc0NsYXNzZXM6IFtdLFxyXG4gICAgICAgICAgICBoaWRkZW46IGZhbHNlLFxyXG4gICAgICAgIH0sIHt9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIGNvbXBvbmVudCwgZS5nLiBieSBhcHBseWluZyBjb25maWcgc2V0dGluZ3MuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBtdXN0IG5vdCBiZSBjYWxsZWQgZnJvbSBvdXRzaWRlIHRoZSBVSSBmcmFtZXdvcmsuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBtZXRob2QgaXMgYXV0b21hdGljYWxseSBjYWxsZWQgYnkgdGhlIHtAbGluayBVSUluc3RhbmNlTWFuYWdlcn0uIElmIHRoZSBjb21wb25lbnQgaXMgYW4gaW5uZXIgY29tcG9uZW50IG9mXHJcbiAgICAgKiBzb21lIGNvbXBvbmVudCwgYW5kIHRodXMgZW5jYXBzdWxhdGVkIGFiZCBtYW5hZ2VkIGludGVybmFsbHkgYW5kIG5ldmVyIGRpcmVjdGx5IGV4cG9zZWQgdG8gdGhlIFVJTWFuYWdlcixcclxuICAgICAqIHRoaXMgbWV0aG9kIG11c3QgYmUgY2FsbGVkIGZyb20gdGhlIG1hbmFnaW5nIGNvbXBvbmVudCdzIHtAbGluayAjaW5pdGlhbGl6ZX0gbWV0aG9kLlxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5oaWRkZW4gPSB0aGlzLmNvbmZpZy5oaWRkZW47XHJcbiAgICAgICAgLy8gSGlkZSB0aGUgY29tcG9uZW50IGF0IGluaXRpYWxpemF0aW9uIGlmIGl0IGlzIGNvbmZpZ3VyZWQgdG8gYmUgaGlkZGVuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNIaWRkZW4oKSkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlOyAvLyBTZXQgZmxhZyB0byBmYWxzZSBmb3IgdGhlIGZvbGxvd2luZyBoaWRlKCkgY2FsbCB0byB3b3JrIChoaWRlKCkgY2hlY2tzIHRoZSBmbGFnKVxyXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25maWd1cmVzIHRoZSBjb21wb25lbnQgZm9yIHRoZSBzdXBwbGllZCBQbGF5ZXIgYW5kIFVJSW5zdGFuY2VNYW5hZ2VyLiBUaGlzIGlzIHRoZSBwbGFjZSB3aGVyZSBhbGwgdGhlIG1hZ2ljXHJcbiAgICAgKiBoYXBwZW5zLCB3aGVyZSBjb21wb25lbnRzIHR5cGljYWxseSBzdWJzY3JpYmUgYW5kIHJlYWN0IHRvIGV2ZW50cyAob24gdGhlaXIgRE9NIGVsZW1lbnQsIHRoZSBQbGF5ZXIsIG9yIHRoZVxyXG4gICAgICogVUlJbnN0YW5jZU1hbmFnZXIpLCBhbmQgYmFzaWNhbGx5IGV2ZXJ5dGhpbmcgdGhhdCBtYWtlcyB0aGVtIGludGVyYWN0aXZlLlxyXG4gICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIG9ubHkgb25jZSwgd2hlbiB0aGUgVUlNYW5hZ2VyIGluaXRpYWxpemVzIHRoZSBVSS5cclxuICAgICAqXHJcbiAgICAgKiBTdWJjbGFzc2VzIHVzdWFsbHkgb3ZlcndyaXRlIHRoaXMgbWV0aG9kIHRvIGFkZCB0aGVpciBvd24gZnVuY3Rpb25hbGl0eS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGxheWVyIHRoZSBwbGF5ZXIgd2hpY2ggdGhpcyBjb21wb25lbnQgY29udHJvbHNcclxuICAgICAqIEBwYXJhbSB1aW1hbmFnZXIgdGhlIFVJSW5zdGFuY2VNYW5hZ2VyIHRoYXQgbWFuYWdlcyB0aGlzIGNvbXBvbmVudFxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5vblNob3cuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdWltYW5hZ2VyLm9uQ29tcG9uZW50U2hvdy5kaXNwYXRjaChfdGhpcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vbkhpZGUuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdWltYW5hZ2VyLm9uQ29tcG9uZW50SGlkZS5kaXNwYXRjaChfdGhpcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gVHJhY2sgdGhlIGhvdmVyZWQgc3RhdGUgb2YgdGhlIGVsZW1lbnRcclxuICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMub25Ib3ZlckNoYW5nZWRFdmVudCh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMub25Ib3ZlckNoYW5nZWRFdmVudChmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWxlYXNlcyBhbGwgcmVzb3VyY2VzIGFuZCBkZXBlbmRlbmNpZXMgdGhhdCB0aGUgY29tcG9uZW50IGhvbGRzLiBQbGF5ZXIsIERPTSwgYW5kIFVJTWFuYWdlciBldmVudHMgYXJlXHJcbiAgICAgKiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgZHVyaW5nIHJlbGVhc2UgYW5kIGRvIG5vdCBleHBsaWNpdGx5IG5lZWQgdG8gYmUgcmVtb3ZlZCBoZXJlLlxyXG4gICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IHRoZSBVSU1hbmFnZXIgd2hlbiBpdCByZWxlYXNlcyB0aGUgVUkuXHJcbiAgICAgKlxyXG4gICAgICogU3ViY2xhc3NlcyB0aGF0IG5lZWQgdG8gcmVsZWFzZSByZXNvdXJjZXMgc2hvdWxkIG92ZXJyaWRlIHRoaXMgbWV0aG9kIGFuZCBjYWxsIHN1cGVyLnJlbGVhc2UoKS5cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIE5vdGhpbmcgdG8gZG8gaGVyZSwgb3ZlcnJpZGUgd2hlcmUgbmVjZXNzYXJ5XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSB0aGUgRE9NIGVsZW1lbnQgZm9yIHRoaXMgY29tcG9uZW50LlxyXG4gICAgICpcclxuICAgICAqIFN1YmNsYXNzZXMgdXN1YWxseSBvdmVyd3JpdGUgdGhpcyBtZXRob2QgdG8gZXh0ZW5kIG9yIHJlcGxhY2UgdGhlIERPTSBlbGVtZW50IHdpdGggdGhlaXIgb3duIGRlc2lnbi5cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS50b0RvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBuZXcgZG9tXzEuRE9NKHRoaXMuY29uZmlnLnRhZywge1xyXG4gICAgICAgICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBET00gZWxlbWVudCBvZiB0aGlzIGNvbXBvbmVudC4gQ3JlYXRlcyB0aGUgRE9NIGVsZW1lbnQgaWYgaXQgZG9lcyBub3QgeWV0IGV4aXN0LlxyXG4gICAgICpcclxuICAgICAqIFNob3VsZCBub3QgYmUgb3ZlcndyaXR0ZW4gYnkgc3ViY2xhc3Nlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7RE9NfVxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLmdldERvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy50b0RvbUVsZW1lbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE1lcmdlcyBhIGNvbmZpZ3VyYXRpb24gd2l0aCBhIGRlZmF1bHQgY29uZmlndXJhdGlvbiBhbmQgYSBiYXNlIGNvbmZpZ3VyYXRpb24gZnJvbSB0aGUgc3VwZXJjbGFzcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29uZmlnIHRoZSBjb25maWd1cmF0aW9uIHNldHRpbmdzIGZvciB0aGUgY29tcG9uZW50cywgYXMgdXN1YWxseSBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0gZGVmYXVsdHMgYSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gZm9yIHNldHRpbmdzIHRoYXQgYXJlIG5vdCBwYXNzZWQgd2l0aCB0aGUgY29uZmlndXJhdGlvblxyXG4gICAgICogQHBhcmFtIGJhc2UgY29uZmlndXJhdGlvbiBpbmhlcml0ZWQgZnJvbSBhIHN1cGVyY2xhc3NcclxuICAgICAqIEByZXR1cm5zIHtDb25maWd9XHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUubWVyZ2VDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnLCBkZWZhdWx0cywgYmFzZSkge1xyXG4gICAgICAgIC8vIEV4dGVuZCBkZWZhdWx0IGNvbmZpZyB3aXRoIHN1cHBsaWVkIGNvbmZpZ1xyXG4gICAgICAgIHZhciBtZXJnZWQgPSBPYmplY3QuYXNzaWduKHt9LCBiYXNlLCBkZWZhdWx0cywgY29uZmlnKTtcclxuICAgICAgICAvLyBSZXR1cm4gdGhlIGV4dGVuZGVkIGNvbmZpZ1xyXG4gICAgICAgIHJldHVybiBtZXJnZWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgbWV0aG9kIHRoYXQgcmV0dXJucyBhIHN0cmluZyBvZiBhbGwgQ1NTIGNsYXNzZXMgb2YgdGhlIGNvbXBvbmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLmdldENzc0NsYXNzZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBNZXJnZSBhbGwgQ1NTIGNsYXNzZXMgaW50byBzaW5nbGUgYXJyYXlcclxuICAgICAgICB2YXIgZmxhdHRlbmVkQXJyYXkgPSBbdGhpcy5jb25maWcuY3NzQ2xhc3NdLmNvbmNhdCh0aGlzLmNvbmZpZy5jc3NDbGFzc2VzKTtcclxuICAgICAgICAvLyBQcmVmaXggY2xhc3Nlc1xyXG4gICAgICAgIGZsYXR0ZW5lZEFycmF5ID0gZmxhdHRlbmVkQXJyYXkubWFwKGZ1bmN0aW9uIChjc3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByZWZpeENzcyhjc3MpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEpvaW4gYXJyYXkgdmFsdWVzIGludG8gYSBzdHJpbmdcclxuICAgICAgICB2YXIgZmxhdHRlbmVkU3RyaW5nID0gZmxhdHRlbmVkQXJyYXkuam9pbignICcpO1xyXG4gICAgICAgIC8vIFJldHVybiB0cmltbWVkIHN0cmluZyB0byBwcmV2ZW50IHdoaXRlc3BhY2UgYXQgdGhlIGVuZCBmcm9tIHRoZSBqb2luIG9wZXJhdGlvblxyXG4gICAgICAgIHJldHVybiBmbGF0dGVuZWRTdHJpbmcudHJpbSgpO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUucHJlZml4Q3NzID0gZnVuY3Rpb24gKGNzc0NsYXNzT3JJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5jc3NQcmVmaXggKyAnLScgKyBjc3NDbGFzc09ySWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBvZiB0aGUgY29tcG9uZW50LlxyXG4gICAgICogQHJldHVybnMge0NvbmZpZ31cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5nZXRDb25maWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSGlkZXMgdGhlIGNvbXBvbmVudCBpZiBzaG93bi5cclxuICAgICAqIFRoaXMgbWV0aG9kIGJhc2ljYWxseSB0cmFuc2ZlcnMgdGhlIGNvbXBvbmVudCBpbnRvIHRoZSBoaWRkZW4gc3RhdGUuIEFjdHVhbCBoaWRpbmcgaXMgZG9uZSB2aWEgQ1NTLlxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhpZGRlbikge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKENvbXBvbmVudC5DTEFTU19ISURERU4pKTtcclxuICAgICAgICAgICAgdGhpcy5vbkhpZGVFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNob3dzIHRoZSBjb21wb25lbnQgaWYgaGlkZGVuLlxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGlkZGVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKHRoaXMucHJlZml4Q3NzKENvbXBvbmVudC5DTEFTU19ISURERU4pKTtcclxuICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5vblNob3dFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZXMgaWYgdGhlIGNvbXBvbmVudCBpcyBoaWRkZW4uXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgY29tcG9uZW50IGlzIGhpZGRlbiwgZWxzZSBmYWxzZVxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLmlzSGlkZGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhpZGRlbjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZXMgaWYgdGhlIGNvbXBvbmVudCBpcyBzaG93bi5cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBjb21wb25lbnQgaXMgdmlzaWJsZSwgZWxzZSBmYWxzZVxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLmlzU2hvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzSGlkZGVuKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUb2dnbGVzIHRoZSBoaWRkZW4gc3RhdGUgYnkgaGlkaW5nIHRoZSBjb21wb25lbnQgaWYgaXQgaXMgc2hvd24sIG9yIHNob3dpbmcgaXQgaWYgaGlkZGVuLlxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnRvZ2dsZUhpZGRlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0hpZGRlbigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgY29tcG9uZW50IGlzIGN1cnJlbnRseSBob3ZlcmVkLlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIGNvbXBvbmVudCBpcyBob3ZlcmVkLCBlbHNlIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuaXNIb3ZlcmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhvdmVyZWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlcyB0aGUgb25TaG93IGV2ZW50LlxyXG4gICAgICogU2VlIHRoZSBkZXRhaWxlZCBleHBsYW5hdGlvbiBvbiBldmVudCBhcmNoaXRlY3R1cmUgb24gdGhlIHtAbGluayAjY29tcG9uZW50RXZlbnRzIGV2ZW50cyBsaXN0fS5cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5vblNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudEV2ZW50cy5vblNob3cuZGlzcGF0Y2godGhpcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlcyB0aGUgb25IaWRlIGV2ZW50LlxyXG4gICAgICogU2VlIHRoZSBkZXRhaWxlZCBleHBsYW5hdGlvbiBvbiBldmVudCBhcmNoaXRlY3R1cmUgb24gdGhlIHtAbGluayAjY29tcG9uZW50RXZlbnRzIGV2ZW50cyBsaXN0fS5cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5vbkhpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudEV2ZW50cy5vbkhpZGUuZGlzcGF0Y2godGhpcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlcyB0aGUgb25Ib3ZlckNoYW5nZWQgZXZlbnQuXHJcbiAgICAgKiBTZWUgdGhlIGRldGFpbGVkIGV4cGxhbmF0aW9uIG9uIGV2ZW50IGFyY2hpdGVjdHVyZSBvbiB0aGUge0BsaW5rICNjb21wb25lbnRFdmVudHMgZXZlbnRzIGxpc3R9LlxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLm9uSG92ZXJDaGFuZ2VkRXZlbnQgPSBmdW5jdGlvbiAoaG92ZXJlZCkge1xyXG4gICAgICAgIHRoaXMuaG92ZXJlZCA9IGhvdmVyZWQ7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRFdmVudHMub25Ib3ZlckNoYW5nZWQuZGlzcGF0Y2godGhpcywgeyBob3ZlcmVkOiBob3ZlcmVkIH0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb21wb25lbnQucHJvdG90eXBlLCBcIm9uU2hvd1wiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgc2hvd2luZy5cclxuICAgICAgICAgKiBTZWUgdGhlIGRldGFpbGVkIGV4cGxhbmF0aW9uIG9uIGV2ZW50IGFyY2hpdGVjdHVyZSBvbiB0aGUge0BsaW5rICNjb21wb25lbnRFdmVudHMgZXZlbnRzIGxpc3R9LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudDxDb21wb25lbnQ8Q29uZmlnPiwgTm9BcmdzPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50RXZlbnRzLm9uU2hvdy5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbXBvbmVudC5wcm90b3R5cGUsIFwib25IaWRlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBoaWRpbmcuXHJcbiAgICAgICAgICogU2VlIHRoZSBkZXRhaWxlZCBleHBsYW5hdGlvbiBvbiBldmVudCBhcmNoaXRlY3R1cmUgb24gdGhlIHtAbGluayAjY29tcG9uZW50RXZlbnRzIGV2ZW50cyBsaXN0fS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnQ8Q29tcG9uZW50PENvbmZpZz4sIE5vQXJncz59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEV2ZW50cy5vbkhpZGUuZ2V0RXZlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb21wb25lbnQucHJvdG90eXBlLCBcIm9uSG92ZXJDaGFuZ2VkXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGNvbXBvbmVudCdzIGhvdmVyLXN0YXRlIGlzIGNoYW5naW5nLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudDxDb21wb25lbnQ8Q29uZmlnPiwgQ29tcG9uZW50SG92ZXJDaGFuZ2VkRXZlbnRBcmdzPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50RXZlbnRzLm9uSG92ZXJDaGFuZ2VkLmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQ29tcG9uZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogVGhlIGNsYXNzbmFtZSB0aGF0IGlzIGF0dGFjaGVkIHRvIHRoZSBlbGVtZW50IHdoZW4gaXQgaXMgaW4gdGhlIGhpZGRlbiBzdGF0ZS5cclxuICogQHR5cGUge3N0cmluZ31cclxuICovXHJcbkNvbXBvbmVudC5DTEFTU19ISURERU4gPSAnaGlkZGVuJztcclxuZXhwb3J0cy5Db21wb25lbnQgPSBDb21wb25lbnQ7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jb21wb25lbnQudHNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBhcnJheXV0aWxzXzEgPSByZXF1aXJlKFwiLi9hcnJheXV0aWxzXCIpO1xyXG4vKipcclxuICogRXZlbnQgZGlzcGF0Y2hlciB0byBzdWJzY3JpYmUgYW5kIHRyaWdnZXIgZXZlbnRzLiBFYWNoIGV2ZW50IHNob3VsZCBoYXZlIGl0cyBvd24gZGlzcGF0Y2hlci5cclxuICovXHJcbnZhciBFdmVudERpc3BhdGNoZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXZlbnREaXNwYXRjaGVyKCkge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHtAaW5oZXJpdERvY31cclxuICAgICAqL1xyXG4gICAgRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKG5ldyBFdmVudExpc3RlbmVyV3JhcHBlcihsaXN0ZW5lcikpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICoge0Bpbmhlcml0RG9jfVxyXG4gICAgICovXHJcbiAgICBFdmVudERpc3BhdGNoZXIucHJvdG90eXBlLnN1YnNjcmliZU9uY2UgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKG5ldyBFdmVudExpc3RlbmVyV3JhcHBlcihsaXN0ZW5lciwgdHJ1ZSkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICoge0Bpbmhlcml0RG9jfVxyXG4gICAgICovXHJcbiAgICBFdmVudERpc3BhdGNoZXIucHJvdG90eXBlLnN1YnNjcmliZVJhdGVMaW1pdGVkID0gZnVuY3Rpb24gKGxpc3RlbmVyLCByYXRlTXMpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKG5ldyBSYXRlTGltaXRlZEV2ZW50TGlzdGVuZXJXcmFwcGVyKGxpc3RlbmVyLCByYXRlTXMpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIHtAaW5oZXJpdERvY31cclxuICAgICAqL1xyXG4gICAgRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBsaXN0ZW5lcnMsIGNvbXBhcmUgd2l0aCBwYXJhbWV0ZXIsIGFuZCByZW1vdmUgaWYgZm91bmRcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBzdWJzY3JpYmVkTGlzdGVuZXIgPSB0aGlzLmxpc3RlbmVyc1tpXTtcclxuICAgICAgICAgICAgaWYgKHN1YnNjcmliZWRMaXN0ZW5lci5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgICAgIGFycmF5dXRpbHNfMS5BcnJheVV0aWxzLnJlbW92ZSh0aGlzLmxpc3RlbmVycywgc3Vic2NyaWJlZExpc3RlbmVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYWxsIGxpc3RlbmVycyBmcm9tIHRoaXMgZGlzcGF0Y2hlci5cclxuICAgICAqL1xyXG4gICAgRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS51bnN1YnNjcmliZUFsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGlzcGF0Y2hlcyBhbiBldmVudCB0byBhbGwgc3Vic2NyaWJlZCBsaXN0ZW5lcnMuXHJcbiAgICAgKiBAcGFyYW0gc2VuZGVyIHRoZSBzb3VyY2Ugb2YgdGhlIGV2ZW50XHJcbiAgICAgKiBAcGFyYW0gYXJncyB0aGUgYXJndW1lbnRzIGZvciB0aGUgZXZlbnRcclxuICAgICAqL1xyXG4gICAgRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzZW5kZXIsIGFyZ3MpIHtcclxuICAgICAgICBpZiAoYXJncyA9PT0gdm9pZCAwKSB7IGFyZ3MgPSBudWxsOyB9XHJcbiAgICAgICAgdmFyIGxpc3RlbmVyc1RvUmVtb3ZlID0gW107XHJcbiAgICAgICAgLy8gQ2FsbCBldmVyeSBsaXN0ZW5lclxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmxpc3RlbmVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBsaXN0ZW5lci5maXJlKHNlbmRlciwgYXJncyk7XHJcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lci5pc09uY2UoKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzVG9SZW1vdmUucHVzaChsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIG9uZS10aW1lIGxpc3RlbmVyXHJcbiAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBsaXN0ZW5lcnNUb1JlbW92ZV8xID0gbGlzdGVuZXJzVG9SZW1vdmU7IF9iIDwgbGlzdGVuZXJzVG9SZW1vdmVfMS5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgdmFyIGxpc3RlbmVyVG9SZW1vdmUgPSBsaXN0ZW5lcnNUb1JlbW92ZV8xW19iXTtcclxuICAgICAgICAgICAgYXJyYXl1dGlsc18xLkFycmF5VXRpbHMucmVtb3ZlKHRoaXMubGlzdGVuZXJzLCBsaXN0ZW5lclRvUmVtb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBldmVudCB0aGF0IHRoaXMgZGlzcGF0Y2hlciBtYW5hZ2VzIGFuZCBvbiB3aGljaCBsaXN0ZW5lcnMgY2FuIHN1YnNjcmliZSBhbmQgdW5zdWJzY3JpYmUgZXZlbnQgaGFuZGxlcnMuXHJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnR9XHJcbiAgICAgKi9cclxuICAgIEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuZ2V0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCBjYXN0IHRoZSBldmVudCBkaXNwYXRjaGVyIHRvIHRoZSBldmVudCBpbnRlcmZhY2UuIEF0IHNvbWUgcG9pbnQgaW4gdGhlIGZ1dHVyZSB3aGVuIHRoZVxyXG4gICAgICAgIC8vIGNvZGViYXNlIGdyb3dzLCBpdCBtaWdodCBtYWtlIHNlbnNlIHRvIHNwbGl0IHRoZSBkaXNwYXRjaGVyIGludG8gc2VwYXJhdGUgZGlzcGF0Y2hlciBhbmQgZXZlbnQgY2xhc3Nlcy5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXZlbnREaXNwYXRjaGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkV2ZW50RGlzcGF0Y2hlciA9IEV2ZW50RGlzcGF0Y2hlcjtcclxuLyoqXHJcbiAqIEEgYmFzaWMgZXZlbnQgbGlzdGVuZXIgd3JhcHBlciB0byBtYW5hZ2UgbGlzdGVuZXJzIHdpdGhpbiB0aGUge0BsaW5rIEV2ZW50RGlzcGF0Y2hlcn0uIFRoaXMgaXMgYSAncHJpdmF0ZScgY2xhc3NcclxuICogZm9yIGludGVybmFsIGRpc3BhdGNoZXIgdXNlIGFuZCBpdCBpcyB0aGVyZWZvcmUgbm90IGV4cG9ydGVkLlxyXG4gKi9cclxudmFyIEV2ZW50TGlzdGVuZXJXcmFwcGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV2ZW50TGlzdGVuZXJXcmFwcGVyKGxpc3RlbmVyLCBvbmNlKSB7XHJcbiAgICAgICAgaWYgKG9uY2UgPT09IHZvaWQgMCkgeyBvbmNlID0gZmFsc2U7IH1cclxuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIgPSBsaXN0ZW5lcjtcclxuICAgICAgICB0aGlzLm9uY2UgPSBvbmNlO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50TGlzdGVuZXJXcmFwcGVyLnByb3RvdHlwZSwgXCJsaXN0ZW5lclwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0aGUgd3JhcHBlZCBldmVudCBsaXN0ZW5lci5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnRMaXN0ZW5lcjxTZW5kZXIsIEFyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ldmVudExpc3RlbmVyO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlcyB0aGUgd3JhcHBlZCBldmVudCBsaXN0ZW5lciB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHMuXHJcbiAgICAgKiBAcGFyYW0gc2VuZGVyXHJcbiAgICAgKiBAcGFyYW0gYXJnc1xyXG4gICAgICovXHJcbiAgICBFdmVudExpc3RlbmVyV3JhcHBlci5wcm90b3R5cGUuZmlyZSA9IGZ1bmN0aW9uIChzZW5kZXIsIGFyZ3MpIHtcclxuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIoc2VuZGVyLCBhcmdzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGlzIGxpc3RlbmVyIGlzIHNjaGVkdWxlZCB0byBiZSBjYWxsZWQgb25seSBvbmNlLlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IG9uY2UgaWYgdHJ1ZVxyXG4gICAgICovXHJcbiAgICBFdmVudExpc3RlbmVyV3JhcHBlci5wcm90b3R5cGUuaXNPbmNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uY2U7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV2ZW50TGlzdGVuZXJXcmFwcGVyO1xyXG59KCkpO1xyXG4vKipcclxuICogRXh0ZW5kcyB0aGUgYmFzaWMge0BsaW5rIEV2ZW50TGlzdGVuZXJXcmFwcGVyfSB3aXRoIHJhdGUtbGltaXRpbmcgZnVuY3Rpb25hbGl0eS5cclxuICovXHJcbnZhciBSYXRlTGltaXRlZEV2ZW50TGlzdGVuZXJXcmFwcGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhSYXRlTGltaXRlZEV2ZW50TGlzdGVuZXJXcmFwcGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUmF0ZUxpbWl0ZWRFdmVudExpc3RlbmVyV3JhcHBlcihsaXN0ZW5lciwgcmF0ZU1zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbGlzdGVuZXIpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMucmF0ZU1zID0gcmF0ZU1zO1xyXG4gICAgICAgIF90aGlzLmxhc3RGaXJlVGltZSA9IDA7XHJcbiAgICAgICAgLy8gV3JhcCB0aGUgZXZlbnQgbGlzdGVuZXIgd2l0aCBhbiBldmVudCBsaXN0ZW5lciB0aGF0IGRvZXMgdGhlIHJhdGUtbGltaXRpbmdcclxuICAgICAgICBfdGhpcy5yYXRlTGltaXRpbmdFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIF90aGlzLmxhc3RGaXJlVGltZSA+IF90aGlzLnJhdGVNcykge1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBpZiBlbm91Z2ggdGltZSBzaW5jZSB0aGUgcHJldmlvdXMgY2FsbCBoYXMgcGFzc2VkLCBjYWxsIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gYWN0dWFsIGV2ZW50IGxpc3RlbmVyIGFuZCByZWNvcmQgdGhlIGN1cnJlbnQgdGltZVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmlyZVN1cGVyKHNlbmRlciwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5sYXN0RmlyZVRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBSYXRlTGltaXRlZEV2ZW50TGlzdGVuZXJXcmFwcGVyLnByb3RvdHlwZS5maXJlU3VwZXIgPSBmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgLy8gRmlyZSB0aGUgYWN0dWFsIGV4dGVybmFsIGV2ZW50IGxpc3RlbmVyXHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5maXJlLmNhbGwodGhpcywgc2VuZGVyLCBhcmdzKTtcclxuICAgIH07XHJcbiAgICBSYXRlTGltaXRlZEV2ZW50TGlzdGVuZXJXcmFwcGVyLnByb3RvdHlwZS5maXJlID0gZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgIC8vIEZpcmUgdGhlIGludGVybmFsIHJhdGUtbGltaXRpbmcgbGlzdGVuZXIgaW5zdGVhZCBvZiB0aGUgZXh0ZXJuYWwgZXZlbnQgbGlzdGVuZXJcclxuICAgICAgICB0aGlzLnJhdGVMaW1pdGluZ0V2ZW50TGlzdGVuZXIoc2VuZGVyLCBhcmdzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmF0ZUxpbWl0ZWRFdmVudExpc3RlbmVyV3JhcHBlcjtcclxufShFdmVudExpc3RlbmVyV3JhcHBlcikpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2V2ZW50ZGlzcGF0Y2hlci50c1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQXJyYXlVdGlscztcclxuKGZ1bmN0aW9uIChBcnJheVV0aWxzKSB7XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYW4gaXRlbSBmcm9tIGFuIGFycmF5LlxyXG4gICAgICogQHBhcmFtIGFycmF5IHRoZSBhcnJheSB0aGF0IG1heSBjb250YWluIHRoZSBpdGVtIHRvIHJlbW92ZVxyXG4gICAgICogQHBhcmFtIGl0ZW0gdGhlIGl0ZW0gdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5XHJcbiAgICAgKiBAcmV0dXJucyB7YW55fSB0aGUgcmVtb3ZlZCBpdGVtIG9yIG51bGwgaWYgaXQgd2Fzbid0IHBhcnQgb2YgdGhlIGFycmF5XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHJlbW92ZShhcnJheSwgaXRlbSkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IGFycmF5LmluZGV4T2YoaXRlbSk7XHJcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5LnNwbGljZShpbmRleCwgMSlbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBBcnJheVV0aWxzLnJlbW92ZSA9IHJlbW92ZTtcclxufSkoQXJyYXlVdGlscyA9IGV4cG9ydHMuQXJyYXlVdGlscyB8fCAoZXhwb3J0cy5BcnJheVV0aWxzID0ge30pKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9hcnJheXV0aWxzLnRzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBldmVudGRpc3BhdGNoZXJfMSA9IHJlcXVpcmUoXCIuL2V2ZW50ZGlzcGF0Y2hlclwiKTtcclxudmFyIGJyb3dzZXJ1dGlsc18xID0gcmVxdWlyZShcIi4vYnJvd3NlcnV0aWxzXCIpO1xyXG52YXIgUGxheWVyVXRpbHM7XHJcbihmdW5jdGlvbiAoUGxheWVyVXRpbHMpIHtcclxuICAgIHZhciBQbGF5ZXJTdGF0ZTtcclxuICAgIChmdW5jdGlvbiAoUGxheWVyU3RhdGUpIHtcclxuICAgICAgICBQbGF5ZXJTdGF0ZVtQbGF5ZXJTdGF0ZVtcIklETEVcIl0gPSAwXSA9IFwiSURMRVwiO1xyXG4gICAgICAgIFBsYXllclN0YXRlW1BsYXllclN0YXRlW1wiUFJFUEFSRURcIl0gPSAxXSA9IFwiUFJFUEFSRURcIjtcclxuICAgICAgICBQbGF5ZXJTdGF0ZVtQbGF5ZXJTdGF0ZVtcIlBMQVlJTkdcIl0gPSAyXSA9IFwiUExBWUlOR1wiO1xyXG4gICAgICAgIFBsYXllclN0YXRlW1BsYXllclN0YXRlW1wiUEFVU0VEXCJdID0gM10gPSBcIlBBVVNFRFwiO1xyXG4gICAgICAgIFBsYXllclN0YXRlW1BsYXllclN0YXRlW1wiRklOSVNIRURcIl0gPSA0XSA9IFwiRklOSVNIRURcIjtcclxuICAgIH0pKFBsYXllclN0YXRlID0gUGxheWVyVXRpbHMuUGxheWVyU3RhdGUgfHwgKFBsYXllclV0aWxzLlBsYXllclN0YXRlID0ge30pKTtcclxuICAgIGZ1bmN0aW9uIGlzU291cmNlTG9hZGVkKHBsYXllcikge1xyXG4gICAgICAgIHJldHVybiBwbGF5ZXIuZ2V0Q29uZmlnKCkuc291cmNlICE9PSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBQbGF5ZXJVdGlscy5pc1NvdXJjZUxvYWRlZCA9IGlzU291cmNlTG9hZGVkO1xyXG4gICAgZnVuY3Rpb24gaXNUaW1lU2hpZnRBdmFpbGFibGUocGxheWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHBsYXllci5pc0xpdmUoKSAmJiBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgIT09IDA7XHJcbiAgICB9XHJcbiAgICBQbGF5ZXJVdGlscy5pc1RpbWVTaGlmdEF2YWlsYWJsZSA9IGlzVGltZVNoaWZ0QXZhaWxhYmxlO1xyXG4gICAgZnVuY3Rpb24gZ2V0U3RhdGUocGxheWVyKSB7XHJcbiAgICAgICAgaWYgKHBsYXllci5oYXNFbmRlZCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQbGF5ZXJTdGF0ZS5GSU5JU0hFRDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGxheWVyLmlzUGxheWluZygpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQbGF5ZXJTdGF0ZS5QTEFZSU5HO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwbGF5ZXIuaXNQYXVzZWQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGxheWVyU3RhdGUuUEFVU0VEO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpc1NvdXJjZUxvYWRlZChwbGF5ZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQbGF5ZXJTdGF0ZS5QUkVQQVJFRDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQbGF5ZXJTdGF0ZS5JRExFO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFBsYXllclV0aWxzLmdldFN0YXRlID0gZ2V0U3RhdGU7XHJcbiAgICB2YXIgVGltZVNoaWZ0QXZhaWxhYmlsaXR5RGV0ZWN0b3IgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIFRpbWVTaGlmdEF2YWlsYWJpbGl0eURldGVjdG9yKHBsYXllcikge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWRFdmVudCA9IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgICAgIHRoaXMudGltZVNoaWZ0QXZhaWxhYmxlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB2YXIgdGltZVNoaWZ0RGV0ZWN0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5kZXRlY3QoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gVHJ5IHRvIGRldGVjdCB0aW1lc2hpZnQgYXZhaWxhYmlsaXR5IGluIE9OX1JFQURZLCB3aGljaCB3b3JrcyBmb3IgREFTSCBzdHJlYW1zXHJcbiAgICAgICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1JFQURZLCB0aW1lU2hpZnREZXRlY3Rvcik7XHJcbiAgICAgICAgICAgIC8vIFdpdGggSExTL05hdGl2ZVBsYXllciBzdHJlYW1zLCBnZXRNYXhUaW1lU2hpZnQgY2FuIGJlIDAgYmVmb3JlIHRoZSBidWZmZXIgZmlsbHMsIHNvIHdlIG5lZWQgdG8gYWRkaXRpb25hbGx5XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIHRpbWVzaGlmdCBhdmFpbGFiaWxpdHkgaW4gT05fVElNRV9DSEFOR0VEXHJcbiAgICAgICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1RJTUVfQ0hBTkdFRCwgdGltZVNoaWZ0RGV0ZWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBUaW1lU2hpZnRBdmFpbGFiaWxpdHlEZXRlY3Rvci5wcm90b3R5cGUuZGV0ZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXIuaXNMaXZlKCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aW1lU2hpZnRBdmFpbGFibGVOb3cgPSBQbGF5ZXJVdGlscy5pc1RpbWVTaGlmdEF2YWlsYWJsZSh0aGlzLnBsYXllcik7XHJcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBhdmFpbGFiaWxpdHkgY2hhbmdlcywgd2UgZmlyZSB0aGUgZXZlbnRcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lU2hpZnRBdmFpbGFibGVOb3cgIT09IHRoaXMudGltZVNoaWZ0QXZhaWxhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lU2hpZnRBdmFpbGFiaWxpdHlDaGFuZ2VkRXZlbnQuZGlzcGF0Y2godGhpcy5wbGF5ZXIsIHsgdGltZVNoaWZ0QXZhaWxhYmxlOiB0aW1lU2hpZnRBdmFpbGFibGVOb3cgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lU2hpZnRBdmFpbGFibGUgPSB0aW1lU2hpZnRBdmFpbGFibGVOb3c7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaW1lU2hpZnRBdmFpbGFiaWxpdHlEZXRlY3Rvci5wcm90b3R5cGUsIFwib25UaW1lU2hpZnRBdmFpbGFiaWxpdHlDaGFuZ2VkXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aW1lU2hpZnRBdmFpbGFiaWxpdHlDaGFuZ2VkRXZlbnQuZ2V0RXZlbnQoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFRpbWVTaGlmdEF2YWlsYWJpbGl0eURldGVjdG9yO1xyXG4gICAgfSgpKTtcclxuICAgIFBsYXllclV0aWxzLlRpbWVTaGlmdEF2YWlsYWJpbGl0eURldGVjdG9yID0gVGltZVNoaWZ0QXZhaWxhYmlsaXR5RGV0ZWN0b3I7XHJcbiAgICAvKipcclxuICAgICAqIERldGVjdHMgY2hhbmdlcyBvZiB0aGUgc3RyZWFtIHR5cGUsIGkuZS4gY2hhbmdlcyBvZiB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBwbGF5ZXIjaXNMaXZlIG1ldGhvZC5cclxuICAgICAqIE5vcm1hbGx5LCBhIHN0cmVhbSBjYW5ub3QgY2hhbmdlIGl0cyB0eXBlIGR1cmluZyBwbGF5YmFjaywgaXQncyBlaXRoZXIgVk9EIG9yIGxpdmUuIER1ZSB0byBidWdzIG9uIHNvbWVcclxuICAgICAqIHBsYXRmb3JtcyBvciBicm93c2VycywgaXQgY2FuIHN0aWxsIGNoYW5nZS4gSXQgaXMgdGhlcmVmb3JlIHVucmVsaWFibGUgdG8ganVzdCBjaGVjayAjaXNMaXZlIGFuZCB0aGlzIGRldGVjdG9yXHJcbiAgICAgKiBzaG91bGQgYmUgdXNlZCBhcyBhIHdvcmthcm91bmQgaW5zdGVhZC5cclxuICAgICAqXHJcbiAgICAgKiBLbm93biBjYXNlczpcclxuICAgICAqXHJcbiAgICAgKiAtIEhMUyBWT0Qgb24gQW5kcm9pZCA0LjNcclxuICAgICAqIFZpZGVvIGR1cmF0aW9uIGlzIGluaXRpYWxseSAnSW5maW5pdHknIGFuZCBvbmx5IGdldHMgYXZhaWxhYmxlIGFmdGVyIHBsYXliYWNrIHN0YXJ0cywgc28gc3RyZWFtcyBhcmUgd3JvbmdseVxyXG4gICAgICogcmVwb3J0ZWQgYXMgJ2xpdmUnIGJlZm9yZSBwbGF5YmFjayAodGhlIGxpdmUtY2hlY2sgaW4gdGhlIHBsYXllciBjaGVja3MgZm9yIGluZmluaXRlIGR1cmF0aW9uKS5cclxuICAgICAqL1xyXG4gICAgdmFyIExpdmVTdHJlYW1EZXRlY3RvciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gTGl2ZVN0cmVhbURldGVjdG9yKHBsYXllcikge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmxpdmVDaGFuZ2VkRXZlbnQgPSBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xyXG4gICAgICAgICAgICB0aGlzLmxpdmUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHZhciBsaXZlRGV0ZWN0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5kZXRlY3QoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB3aGVuIHBsYXllciBpcyByZWFkeVxyXG4gICAgICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgbGl2ZURldGVjdG9yKTtcclxuICAgICAgICAgICAgLy8gUmUtZXZhbHVhdGUgd2hlbiBwbGF5YmFjayBzdGFydHNcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWSwgbGl2ZURldGVjdG9yKTtcclxuICAgICAgICAgICAgLy8gSExTIGxpdmUgZGV0ZWN0aW9uIHdvcmthcm91bmQgZm9yIEFuZHJvaWQ6XHJcbiAgICAgICAgICAgIC8vIEFsc28gcmUtZXZhbHVhdGUgZHVyaW5nIHBsYXliYWNrLCBiZWNhdXNlIHRoYXQgaXMgd2hlbiB0aGUgbGl2ZSBmbGFnIG1pZ2h0IGNoYW5nZS5cclxuICAgICAgICAgICAgLy8gKERvaW5nIGl0IG9ubHkgaW4gQW5kcm9pZCBDaHJvbWUgc2F2ZXMgdW5uZWNlc3Nhcnkgb3ZlcmhlYWQgb24gb3RoZXIgcGxhdHRmb3JtcylcclxuICAgICAgICAgICAgaWYgKGJyb3dzZXJ1dGlsc18xLkJyb3dzZXJVdGlscy5pc0FuZHJvaWQgJiYgYnJvd3NlcnV0aWxzXzEuQnJvd3NlclV0aWxzLmlzQ2hyb21lKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9USU1FX0NIQU5HRUQsIGxpdmVEZXRlY3Rvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgTGl2ZVN0cmVhbURldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsaXZlTm93ID0gdGhpcy5wbGF5ZXIuaXNMaXZlKCk7XHJcbiAgICAgICAgICAgIC8vIENvbXBhcmUgY3VycmVudCB0byBwcmV2aW91cyBsaXZlIHN0YXRlIGZsYWcgYW5kIGZpcmUgZXZlbnQgd2hlbiBpdCBjaGFuZ2VzLiBTaW5jZSB3ZSBpbml0aWFsaXplIHRoZSBmbGFnXHJcbiAgICAgICAgICAgIC8vIHdpdGggdW5kZWZpbmVkLCB0aGVyZSBpcyBhbHdheXMgYXQgbGVhc3QgYW4gaW5pdGlhbCBldmVudCBmaXJlZCB0aGF0IHRlbGxzIGxpc3RlbmVycyB0aGUgbGl2ZSBzdGF0ZS5cclxuICAgICAgICAgICAgaWYgKGxpdmVOb3cgIT09IHRoaXMubGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saXZlQ2hhbmdlZEV2ZW50LmRpc3BhdGNoKHRoaXMucGxheWVyLCB7IGxpdmU6IGxpdmVOb3cgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpdmUgPSBsaXZlTm93O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGl2ZVN0cmVhbURldGVjdG9yLnByb3RvdHlwZSwgXCJvbkxpdmVDaGFuZ2VkXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5saXZlQ2hhbmdlZEV2ZW50LmdldEV2ZW50KCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBMaXZlU3RyZWFtRGV0ZWN0b3I7XHJcbiAgICB9KCkpO1xyXG4gICAgUGxheWVyVXRpbHMuTGl2ZVN0cmVhbURldGVjdG9yID0gTGl2ZVN0cmVhbURldGVjdG9yO1xyXG59KShQbGF5ZXJVdGlscyA9IGV4cG9ydHMuUGxheWVyVXRpbHMgfHwgKGV4cG9ydHMuUGxheWVyVXRpbHMgPSB7fSkpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL3BsYXllcnV0aWxzLnRzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRcIik7XHJcbnZhciBkb21fMSA9IHJlcXVpcmUoXCIuLi9kb21cIik7XHJcbnZhciBldmVudGRpc3BhdGNoZXJfMSA9IHJlcXVpcmUoXCIuLi9ldmVudGRpc3BhdGNoZXJcIik7XHJcbi8qKlxyXG4gKiBBIHNpbXBsZSBjbGlja2FibGUgYnV0dG9uLlxyXG4gKi9cclxudmFyIEJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQnV0dG9uKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5idXR0b25FdmVudHMgPSB7XHJcbiAgICAgICAgICAgIG9uQ2xpY2s6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWJ1dHRvbicsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBCdXR0b24ucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYnV0dG9uIGVsZW1lbnQgd2l0aCB0aGUgdGV4dCBsYWJlbFxyXG4gICAgICAgIHZhciBidXR0b25FbGVtZW50ID0gbmV3IGRvbV8xLkRPTSgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICAndHlwZSc6ICdidXR0b24nLFxyXG4gICAgICAgICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCksXHJcbiAgICAgICAgfSkuYXBwZW5kKG5ldyBkb21fMS5ET00oJ3NwYW4nLCB7XHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdsYWJlbCcpLFxyXG4gICAgICAgIH0pLmh0bWwodGhpcy5jb25maWcudGV4dCkpO1xyXG4gICAgICAgIC8vIExpc3RlbiBmb3IgdGhlIGNsaWNrIGV2ZW50IG9uIHRoZSBidXR0b24gZWxlbWVudCBhbmQgdHJpZ2dlciB0aGUgY29ycmVzcG9uZGluZyBldmVudCBvbiB0aGUgYnV0dG9uIGNvbXBvbmVudFxyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vbkNsaWNrRXZlbnQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYnV0dG9uRWxlbWVudDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGV4dCBvbiB0aGUgbGFiZWwgb2YgdGhlIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSB0ZXh0IHRoZSB0ZXh0IHRvIHB1dCBpbnRvIHRoZSBsYWJlbCBvZiB0aGUgYnV0dG9uXHJcbiAgICAgKi9cclxuICAgIEJ1dHRvbi5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuZmluZCgnLicgKyB0aGlzLnByZWZpeENzcygnbGFiZWwnKSkuaHRtbCh0ZXh0KTtcclxuICAgIH07XHJcbiAgICBCdXR0b24ucHJvdG90eXBlLm9uQ2xpY2tFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbkV2ZW50cy5vbkNsaWNrLmRpc3BhdGNoKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdXR0b24ucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PEJ1dHRvbjxDb25maWc+LCBOb0FyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5idXR0b25FdmVudHMub25DbGljay5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEJ1dHRvbjtcclxufShjb21wb25lbnRfMS5Db21wb25lbnQpKTtcclxuZXhwb3J0cy5CdXR0b24gPSBCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9idXR0b24udHNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb21wb25lbnRfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudFwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4uL2RvbVwiKTtcclxudmFyIGV2ZW50ZGlzcGF0Y2hlcl8xID0gcmVxdWlyZShcIi4uL2V2ZW50ZGlzcGF0Y2hlclwiKTtcclxuLyoqXHJcbiAqIEEgc2ltcGxlIHRleHQgbGFiZWwuXHJcbiAqXHJcbiAqIERPTSBleGFtcGxlOlxyXG4gKiA8Y29kZT5cclxuICogICAgIDxzcGFuIGNsYXNzPSd1aS1sYWJlbCc+Li4uc29tZSB0ZXh0Li4uPC9zcGFuPlxyXG4gKiA8L2NvZGU+XHJcbiAqL1xyXG52YXIgTGFiZWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKExhYmVsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTGFiZWwoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmxhYmVsRXZlbnRzID0ge1xyXG4gICAgICAgICAgICBvbkNsaWNrOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uVGV4dENoYW5nZWQ6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWxhYmVsJyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIF90aGlzLnRleHQgPSBfdGhpcy5jb25maWcudGV4dDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBMYWJlbC5wcm90b3R5cGUudG9Eb21FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGxhYmVsRWxlbWVudCA9IG5ldyBkb21fMS5ET00oJ3NwYW4nLCB7XHJcbiAgICAgICAgICAgICdpZCc6IHRoaXMuY29uZmlnLmlkLFxyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLmdldENzc0NsYXNzZXMoKSxcclxuICAgICAgICB9KS5odG1sKHRoaXMudGV4dCk7XHJcbiAgICAgICAgbGFiZWxFbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMub25DbGlja0V2ZW50KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGxhYmVsRWxlbWVudDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgdGV4dCBvbiB0aGlzIGxhYmVsLlxyXG4gICAgICogQHBhcmFtIHRleHRcclxuICAgICAqL1xyXG4gICAgTGFiZWwucHJvdG90eXBlLnNldFRleHQgPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuaHRtbCh0ZXh0KTtcclxuICAgICAgICB0aGlzLm9uVGV4dENoYW5nZWRFdmVudCh0ZXh0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIHRleHQgb24gdGhpcyBsYWJlbC5cclxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRleHQgb24gdGhlIGxhYmVsXHJcbiAgICAgKi9cclxuICAgIExhYmVsLnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRleHQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIHRleHQgb24gdGhpcyBsYWJlbC5cclxuICAgICAqL1xyXG4gICAgTGFiZWwucHJvdG90eXBlLmNsZWFyVGV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5odG1sKCcnKTtcclxuICAgICAgICB0aGlzLm9uVGV4dENoYW5nZWRFdmVudChudWxsKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRlc3RzIGlmIHRoZSBsYWJlbCBpcyBlbXB0eSBhbmQgZG9lcyBub3QgY29udGFpbiBhbnkgdGV4dC5cclxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGxhYmVsIGlzIGVtcHR5LCBlbHNlIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIExhYmVsLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy50ZXh0O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRmlyZXMgdGhlIHtAbGluayAjb25DbGlja30gZXZlbnQuXHJcbiAgICAgKiBDYW4gYmUgdXNlZCBieSBzdWJjbGFzc2VzIHRvIGxpc3RlbiB0byB0aGlzIGV2ZW50IHdpdGhvdXQgc3Vic2NyaWJpbmcgYW4gZXZlbnQgbGlzdGVuZXIgYnkgb3ZlcndyaXRpbmcgdGhlIG1ldGhvZFxyXG4gICAgICogYW5kIGNhbGxpbmcgdGhlIHN1cGVyIG1ldGhvZC5cclxuICAgICAqL1xyXG4gICAgTGFiZWwucHJvdG90eXBlLm9uQ2xpY2tFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxhYmVsRXZlbnRzLm9uQ2xpY2suZGlzcGF0Y2godGhpcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlcyB0aGUge0BsaW5rICNvbkNsaWNrfSBldmVudC5cclxuICAgICAqIENhbiBiZSB1c2VkIGJ5IHN1YmNsYXNzZXMgdG8gbGlzdGVuIHRvIHRoaXMgZXZlbnQgd2l0aG91dCBzdWJzY3JpYmluZyBhbiBldmVudCBsaXN0ZW5lciBieSBvdmVyd3JpdGluZyB0aGUgbWV0aG9kXHJcbiAgICAgKiBhbmQgY2FsbGluZyB0aGUgc3VwZXIgbWV0aG9kLlxyXG4gICAgICovXHJcbiAgICBMYWJlbC5wcm90b3R5cGUub25UZXh0Q2hhbmdlZEV2ZW50ID0gZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICB0aGlzLmxhYmVsRXZlbnRzLm9uVGV4dENoYW5nZWQuZGlzcGF0Y2godGhpcywgdGV4dCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExhYmVsLnByb3RvdHlwZSwgXCJvbkNsaWNrXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGxhYmVsIGlzIGNsaWNrZWQuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PExhYmVsPExhYmVsQ29uZmlnPiwgTm9BcmdzPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFiZWxFdmVudHMub25DbGljay5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExhYmVsLnByb3RvdHlwZSwgXCJvblRleHRDaGFuZ2VkXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIHRleHQgb24gdGhlIGxhYmVsIGlzIGNoYW5nZWQuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PExhYmVsPExhYmVsQ29uZmlnPiwgc3RyaW5nPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFiZWxFdmVudHMub25UZXh0Q2hhbmdlZC5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIExhYmVsO1xyXG59KGNvbXBvbmVudF8xLkNvbXBvbmVudCkpO1xyXG5leHBvcnRzLkxhYmVsID0gTGFiZWw7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9sYWJlbC50c1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGJ1dHRvbl8xID0gcmVxdWlyZShcIi4vYnV0dG9uXCIpO1xyXG52YXIgZXZlbnRkaXNwYXRjaGVyXzEgPSByZXF1aXJlKFwiLi4vZXZlbnRkaXNwYXRjaGVyXCIpO1xyXG4vKipcclxuICogQSBidXR0b24gdGhhdCBjYW4gYmUgdG9nZ2xlZCBiZXR3ZWVuICdvbicgYW5kICdvZmYnIHN0YXRlcy5cclxuICovXHJcbnZhciBUb2dnbGVCdXR0b24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFRvZ2dsZUJ1dHRvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRvZ2dsZUJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uRXZlbnRzID0ge1xyXG4gICAgICAgICAgICBvblRvZ2dsZTogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgICAgICBvblRvZ2dsZU9uOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uVG9nZ2xlT2ZmOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgfTtcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS10b2dnbGVidXR0b24nLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUb2dnbGVzIHRoZSBidXR0b24gdG8gdGhlICdvbicgc3RhdGUuXHJcbiAgICAgKi9cclxuICAgIFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNPZmYoKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uU3RhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcyhUb2dnbGVCdXR0b24uQ0xBU1NfT0ZGKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKFRvZ2dsZUJ1dHRvbi5DTEFTU19PTikpO1xyXG4gICAgICAgICAgICB0aGlzLm9uVG9nZ2xlRXZlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5vblRvZ2dsZU9uRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUb2dnbGVzIHRoZSBidXR0b24gdG8gdGhlICdvZmYnIHN0YXRlLlxyXG4gICAgICovXHJcbiAgICBUb2dnbGVCdXR0b24ucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc09uKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5vblN0YXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKHRoaXMucHJlZml4Q3NzKFRvZ2dsZUJ1dHRvbi5DTEFTU19PTikpO1xyXG4gICAgICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyh0aGlzLnByZWZpeENzcyhUb2dnbGVCdXR0b24uQ0xBU1NfT0ZGKSk7XHJcbiAgICAgICAgICAgIHRoaXMub25Ub2dnbGVFdmVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLm9uVG9nZ2xlT2ZmRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUb2dnbGUgdGhlIGJ1dHRvbiAnb24nIGlmIGl0IGlzICdvZmYnLCBvciAnb2ZmJyBpZiBpdCBpcyAnb24nLlxyXG4gICAgICovXHJcbiAgICBUb2dnbGVCdXR0b24ucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc09uKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5vZmYoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub24oKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIHRvZ2dsZSBidXR0b24gaXMgaW4gdGhlICdvbicgc3RhdGUuXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBidXR0b24gaXMgJ29uJywgZmFsc2UgaWYgJ29mZidcclxuICAgICAqL1xyXG4gICAgVG9nZ2xlQnV0dG9uLnByb3RvdHlwZS5pc09uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uU3RhdGU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIHRvZ2dsZSBidXR0b24gaXMgaW4gdGhlICdvZmYnIHN0YXRlLlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgYnV0dG9uIGlzICdvZmYnLCBmYWxzZSBpZiAnb24nXHJcbiAgICAgKi9cclxuICAgIFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUuaXNPZmYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzT24oKTtcclxuICAgIH07XHJcbiAgICBUb2dnbGVCdXR0b24ucHJvdG90eXBlLm9uQ2xpY2tFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLm9uQ2xpY2tFdmVudC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIC8vIEZpcmUgdGhlIHRvZ2dsZSBldmVudCB0b2dldGhlciB3aXRoIHRoZSBjbGljayBldmVudFxyXG4gICAgICAgIC8vICh0aGV5IGFyZSB0ZWNobmljYWxseSB0aGUgc2FtZSwgb25seSB0aGUgc2VtYW50aWNzIGFyZSBkaWZmZXJlbnQpXHJcbiAgICAgICAgdGhpcy5vblRvZ2dsZUV2ZW50KCk7XHJcbiAgICB9O1xyXG4gICAgVG9nZ2xlQnV0dG9uLnByb3RvdHlwZS5vblRvZ2dsZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uRXZlbnRzLm9uVG9nZ2xlLmRpc3BhdGNoKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUub25Ub2dnbGVPbkV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uRXZlbnRzLm9uVG9nZ2xlT24uZGlzcGF0Y2godGhpcyk7XHJcbiAgICB9O1xyXG4gICAgVG9nZ2xlQnV0dG9uLnByb3RvdHlwZS5vblRvZ2dsZU9mZkV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uRXZlbnRzLm9uVG9nZ2xlT2ZmLmRpc3BhdGNoKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUb2dnbGVCdXR0b24ucHJvdG90eXBlLCBcIm9uVG9nZ2xlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGJ1dHRvbiBpcyB0b2dnbGVkLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudDxUb2dnbGVCdXR0b248Q29uZmlnPiwgTm9BcmdzPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlQnV0dG9uRXZlbnRzLm9uVG9nZ2xlLmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVG9nZ2xlQnV0dG9uLnByb3RvdHlwZSwgXCJvblRvZ2dsZU9uXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGJ1dHRvbiBpcyB0b2dnbGVkICdvbicuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PFRvZ2dsZUJ1dHRvbjxDb25maWc+LCBOb0FyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVCdXR0b25FdmVudHMub25Ub2dnbGVPbi5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUsIFwib25Ub2dnbGVPZmZcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgYnV0dG9uIGlzIHRvZ2dsZWQgJ29mZicuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PFRvZ2dsZUJ1dHRvbjxDb25maWc+LCBOb0FyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVCdXR0b25FdmVudHMub25Ub2dnbGVPZmYuZ2V0RXZlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBUb2dnbGVCdXR0b247XHJcbn0oYnV0dG9uXzEuQnV0dG9uKSk7XHJcblRvZ2dsZUJ1dHRvbi5DTEFTU19PTiA9ICdvbic7XHJcblRvZ2dsZUJ1dHRvbi5DTEFTU19PRkYgPSAnb2ZmJztcclxuZXhwb3J0cy5Ub2dnbGVCdXR0b24gPSBUb2dnbGVCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy90b2dnbGVidXR0b24udHNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBhbmd1bGFyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYW5ndWxhclwiXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIFRPRE8gY2hhbmdlIHRvIGludGVybmFsIChub3QgZXhwb3J0ZWQpIGNsYXNzLCBob3cgdG8gdXNlIGluIG90aGVyIGZpbGVzP1xyXG4vKipcclxuICogRXhlY3V0ZXMgYSBjYWxsYmFjayBhZnRlciBhIHNwZWNpZmllZCBhbW91bnQgb2YgdGltZSwgb3B0aW9uYWxseSByZXBlYXRlZGx5IHVudGlsIHN0b3BwZWQuXHJcbiAqL1xyXG52YXIgVGltZW91dCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZW91dCBjYWxsYmFjayBoYW5kbGVyLlxyXG4gICAgICogQHBhcmFtIGRlbGF5IHRoZSBkZWxheSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgd2hpY2ggdGhlIGNhbGxiYWNrIHNob3VsZCBiZSBleGVjdXRlZFxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBjYWxsYmFjayB0byBleGVjdXRlIGFmdGVyIHRoZSBkZWxheSB0aW1lXHJcbiAgICAgKiBAcGFyYW0gcmVwZWF0IGlmIHRydWUsIGNhbGwgdGhlIGNhbGxiYWNrIHJlcGVhdGVkbHkgaW4gZGVsYXkgaW50ZXJ2YWxzXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFRpbWVvdXQoZGVsYXksIGNhbGxiYWNrLCByZXBlYXQpIHtcclxuICAgICAgICBpZiAocmVwZWF0ID09PSB2b2lkIDApIHsgcmVwZWF0ID0gZmFsc2U7IH1cclxuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHRoaXMucmVwZWF0ID0gcmVwZWF0O1xyXG4gICAgICAgIHRoaXMudGltZW91dEhhbmRsZSA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyB0aGUgdGltZW91dCBhbmQgY2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gdGhlIHRpbWVvdXQgZGVsYXkgaGFzIHBhc3NlZC5cclxuICAgICAqIEByZXR1cm5zIHtUaW1lb3V0fSB0aGUgY3VycmVudCB0aW1lb3V0IChzbyB0aGUgc3RhcnQgY2FsbCBjYW4gYmUgY2hhaW5lZCB0byB0aGUgY29uc3RydWN0b3IpXHJcbiAgICAgKi9cclxuICAgIFRpbWVvdXQucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyB0aGUgdGltZW91dC4gVGhlIGNhbGxiYWNrIHdpbGwgbm90IGJlIGNhbGxlZCBpZiBjbGVhciBpcyBjYWxsZWQgZHVyaW5nIHRoZSB0aW1lb3V0LlxyXG4gICAgICovXHJcbiAgICBUaW1lb3V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SGFuZGxlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgcGFzc2VkIHRpbWVvdXQgZGVsYXkgdG8gemVyby4gQ2FuIGJlIHVzZWQgdG8gZGVmZXIgdGhlIGNhbGxpbmcgb2YgdGhlIGNhbGxiYWNrLlxyXG4gICAgICovXHJcbiAgICBUaW1lb3V0LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBsYXN0U2NoZWR1bGVUaW1lID0gMDtcclxuICAgICAgICB2YXIgZGVsYXlBZGp1c3QgPSAwO1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICB2YXIgaW50ZXJuYWxDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnJlcGVhdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgdGltZSBvZiBvbmUgaXRlcmF0aW9uIGZyb20gc2NoZWR1bGluZyB0byBleGVjdXRpbmcgdGhlIGNhbGxiYWNrICh1c3VhbGx5IGEgYml0IGxvbmdlciB0aGFuIHRoZSBkZWxheVxyXG4gICAgICAgICAgICAgICAgLy8gdGltZSlcclxuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IG5vdyAtIGxhc3RTY2hlZHVsZVRpbWU7XHJcbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRlbGF5IGFkanVzdG1lbnQgZm9yIHRoZSBuZXh0IHNjaGVkdWxlIHRvIGtlZXAgYSBzdGVhZHkgZGVsYXkgaW50ZXJ2YWwgb3ZlciB0aW1lXHJcbiAgICAgICAgICAgICAgICBkZWxheUFkanVzdCA9IF90aGlzLmRlbGF5IC0gZGVsdGEgKyBkZWxheUFkanVzdDtcclxuICAgICAgICAgICAgICAgIGxhc3RTY2hlZHVsZVRpbWUgPSBub3c7XHJcbiAgICAgICAgICAgICAgICAvLyBTY2hlZHVsZSBuZXh0IGV4ZWN1dGlvbiBieSB0aGUgYWRqdXN0ZWQgZGVsYXlcclxuICAgICAgICAgICAgICAgIF90aGlzLnRpbWVvdXRIYW5kbGUgPSB3aW5kb3cuc2V0VGltZW91dChpbnRlcm5hbENhbGxiYWNrLCBfdGhpcy5kZWxheSArIGRlbGF5QWRqdXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGFzdFNjaGVkdWxlVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy50aW1lb3V0SGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoaW50ZXJuYWxDYWxsYmFjaywgdGhpcy5kZWxheSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRpbWVvdXQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuVGltZW91dCA9IFRpbWVvdXQ7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvdGltZW91dC50c1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEJyb3dzZXJVdGlscztcclxuKGZ1bmN0aW9uIChCcm93c2VyVXRpbHMpIHtcclxuICAgIC8vIGlzTW9iaWxlIG9ubHkgbmVlZHMgdG8gYmUgZXZhbHVhdGVkIG9uY2UgKGl0IGNhbm5vdCBjaGFuZ2UgZHVyaW5nIGEgYnJvd3NlciBzZXNzaW9uKVxyXG4gICAgLy8gTW9iaWxlIGRldGVjdGlvbiBhY2NvcmRpbmcgdG8gTW96aWxsYSByZWNvbW1lbmRhdGlvbjogXCJJbiBzdW1tYXJ5LCB3ZSByZWNvbW1lbmQgbG9va2luZyBmb3IgdGhlIHN0cmluZyDigJxNb2Jp4oCdXHJcbiAgICAvLyBhbnl3aGVyZSBpbiB0aGUgVXNlciBBZ2VudCB0byBkZXRlY3QgYSBtb2JpbGUgZGV2aWNlLlwiXHJcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0Jyb3dzZXJfZGV0ZWN0aW9uX3VzaW5nX3RoZV91c2VyX2FnZW50XHJcbiAgICBCcm93c2VyVXRpbHMuaXNNb2JpbGUgPSBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAvTW9iaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgIEJyb3dzZXJVdGlscy5pc0Nocm9tZSA9IG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIC9DaHJvbWUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICBCcm93c2VyVXRpbHMuaXNBbmRyb2lkID0gbmF2aWdhdG9yICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgL0FuZHJvaWQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbn0pKEJyb3dzZXJVdGlscyA9IGV4cG9ydHMuQnJvd3NlclV0aWxzIHx8IChleHBvcnRzLkJyb3dzZXJVdGlscyA9IHt9KSk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvYnJvd3NlcnV0aWxzLnRzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vdG9nZ2xlYnV0dG9uXCIpO1xyXG52YXIgcGxheWVydXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9wbGF5ZXJ1dGlsc1wiKTtcclxuLyoqXHJcbiAqIEEgYnV0dG9uIHRoYXQgdG9nZ2xlcyBiZXR3ZWVuIHBsYXliYWNrIGFuZCBwYXVzZS5cclxuICovXHJcbnZhciBQbGF5YmFja1RvZ2dsZUJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUGxheWJhY2tUb2dnbGVCdXR0b24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQbGF5YmFja1RvZ2dsZUJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktcGxheWJhY2t0b2dnbGVidXR0b24nLFxyXG4gICAgICAgICAgICB0ZXh0OiAnUGxheS9QYXVzZScsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBQbGF5YmFja1RvZ2dsZUJ1dHRvbi5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyLCBoYW5kbGVDbGlja0V2ZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoaGFuZGxlQ2xpY2tFdmVudCA9PT0gdm9pZCAwKSB7IGhhbmRsZUNsaWNrRXZlbnQgPSB0cnVlOyB9XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIGlzU2Vla2luZyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEhhbmRsZXIgdG8gdXBkYXRlIGJ1dHRvbiBzdGF0ZSBiYXNlZCBvbiBwbGF5ZXIgc3RhdGVcclxuICAgICAgICB2YXIgcGxheWJhY2tTdGF0ZUhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIFVJIGlzIGN1cnJlbnRseSBzZWVraW5nLCBwbGF5YmFjayBpcyB0ZW1wb3JhcmlseSBzdG9wcGVkIGJ1dCB0aGUgYnV0dG9ucyBzaG91bGRcclxuICAgICAgICAgICAgLy8gbm90IHJlZmxlY3QgdGhhdCBhbmQgc3RheSBhcy1pcyAoZS5nIGluZGljYXRlIHBsYXliYWNrIHdoaWxlIHNlZWtpbmcpLlxyXG4gICAgICAgICAgICBpZiAoaXNTZWVraW5nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc1BsYXlpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9mZigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBDYWxsIGhhbmRsZXIgdXBvbiB0aGVzZSBldmVudHNcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZLCBwbGF5YmFja1N0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUEFVU0VELCBwbGF5YmFja1N0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgLy8gd2hlbiBwbGF5YmFjayBmaW5pc2hlcywgcGxheWVyIHR1cm5zIHRvIHBhdXNlZCBtb2RlXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWUJBQ0tfRklOSVNIRUQsIHBsYXliYWNrU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1NUQVJURUQsIHBsYXliYWNrU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1BMQVlJTkcsIHBsYXliYWNrU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1BBVVNFRCwgcGxheWJhY2tTdGF0ZUhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfUExBWUJBQ0tfRklOSVNIRUQsIHBsYXliYWNrU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICAvLyBEZXRlY3QgYWJzZW5jZSBvZiB0aW1lc2hpZnRpbmcgb24gbGl2ZSBzdHJlYW1zIGFuZCBhZGQgdGFnZ2luZyBjbGFzcyB0byBjb252ZXJ0IGJ1dHRvbiBpY29ucyB0byBwbGF5L3N0b3BcclxuICAgICAgICB2YXIgdGltZVNoaWZ0RGV0ZWN0b3IgPSBuZXcgcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5UaW1lU2hpZnRBdmFpbGFiaWxpdHlEZXRlY3RvcihwbGF5ZXIpO1xyXG4gICAgICAgIHRpbWVTaGlmdERldGVjdG9yLm9uVGltZVNoaWZ0QXZhaWxhYmlsaXR5Q2hhbmdlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgICAgICBpZiAoIWFyZ3MudGltZVNoaWZ0QXZhaWxhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3MoX3RoaXMucHJlZml4Q3NzKFBsYXliYWNrVG9nZ2xlQnV0dG9uLkNMQVNTX1NUT1BUT0dHTEUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyhfdGhpcy5wcmVmaXhDc3MoUGxheWJhY2tUb2dnbGVCdXR0b24uQ0xBU1NfU1RPUFRPR0dMRSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGltZVNoaWZ0RGV0ZWN0b3IuZGV0ZWN0KCk7IC8vIEluaXRpYWwgZGV0ZWN0aW9uXHJcbiAgICAgICAgaWYgKGhhbmRsZUNsaWNrRXZlbnQpIHtcclxuICAgICAgICAgICAgLy8gQ29udHJvbCBwbGF5ZXIgYnkgYnV0dG9uIGV2ZW50c1xyXG4gICAgICAgICAgICAvLyBXaGVuIGEgYnV0dG9uIGV2ZW50IHRyaWdnZXJzIGEgcGxheWVyIEFQSSBjYWxsLCBldmVudHMgYXJlIGZpcmVkIHdoaWNoIGluIHR1cm4gY2FsbCB0aGUgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgICAgICAvLyBhYm92ZSB0aGF0IHVwZGF0ZWQgdGhlIGJ1dHRvbiBzdGF0ZS5cclxuICAgICAgICAgICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmlzUGxheWluZygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBhdXNlKCd1aScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBsYXkoJ3VpJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUcmFjayBVSSBzZWVraW5nIHN0YXR1c1xyXG4gICAgICAgIHVpbWFuYWdlci5vblNlZWsuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaXNTZWVraW5nID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB1aW1hbmFnZXIub25TZWVrZWQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaXNTZWVraW5nID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gU3RhcnR1cCBpbml0XHJcbiAgICAgICAgcGxheWJhY2tTdGF0ZUhhbmRsZXIobnVsbCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBsYXliYWNrVG9nZ2xlQnV0dG9uO1xyXG59KHRvZ2dsZWJ1dHRvbl8xLlRvZ2dsZUJ1dHRvbikpO1xyXG5QbGF5YmFja1RvZ2dsZUJ1dHRvbi5DTEFTU19TVE9QVE9HR0xFID0gJ3N0b3B0b2dnbGUnO1xyXG5leHBvcnRzLlBsYXliYWNrVG9nZ2xlQnV0dG9uID0gUGxheWJhY2tUb2dnbGVCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9wbGF5YmFja3RvZ2dsZWJ1dHRvbi50c1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb21wb25lbnRfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudFwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4uL2RvbVwiKTtcclxudmFyIGV2ZW50ZGlzcGF0Y2hlcl8xID0gcmVxdWlyZShcIi4uL2V2ZW50ZGlzcGF0Y2hlclwiKTtcclxudmFyIHRpbWVvdXRfMSA9IHJlcXVpcmUoXCIuLi90aW1lb3V0XCIpO1xyXG52YXIgcGxheWVydXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9wbGF5ZXJ1dGlsc1wiKTtcclxuLyoqXHJcbiAqIEEgc2VlayBiYXIgdG8gc2VlayB3aXRoaW4gdGhlIHBsYXllcidzIG1lZGlhLiBJdCBkaXNwbGF5cyB0aGUgY3VycmVudCBwbGF5YmFjayBwb3NpdGlvbiwgYW1vdW50IG9mIGJ1ZmZlZCBkYXRhLCBzZWVrXHJcbiAqIHRhcmdldCwgYW5kIGtlZXBzIHN0YXR1cyBhYm91dCBhbiBvbmdvaW5nIHNlZWsuXHJcbiAqXHJcbiAqIFRoZSBzZWVrIGJhciBkaXNwbGF5cyBkaWZmZXJlbnQgJ2JhcnMnOlxyXG4gKiAgLSB0aGUgcGxheWJhY2sgcG9zaXRpb24sIGkuZS4gdGhlIHBvc2l0aW9uIGluIHRoZSBtZWRpYSBhdCB3aGljaCB0aGUgcGxheWVyIGN1cnJlbnQgcGxheWJhY2sgcG9pbnRlciBpcyBwb3NpdGlvbmVkXHJcbiAqICAtIHRoZSBidWZmZXIgcG9zaXRpb24sIHdoaWNoIHVzdWFsbHkgaXMgdGhlIHBsYXliYWNrIHBvc2l0aW9uIHBsdXMgdGhlIHRpbWUgc3BhbiB0aGF0IGlzIGFscmVhZHkgYnVmZmVyZWQgYWhlYWRcclxuICogIC0gdGhlIHNlZWsgcG9zaXRpb24sIHVzZWQgdG8gcHJldmlldyB0byB3aGVyZSBpbiB0aGUgdGltZWxpbmUgYSBzZWVrIHdpbGwganVtcCB0b1xyXG4gKi9cclxudmFyIFNlZWtCYXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFNlZWtCYXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTZWVrQmFyKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCdWZmZXIgb2YgdGhlIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uLiBUaGUgcG9zaXRpb24gbXVzdCBiZSBidWZmZXJlZCBpbiBjYXNlIHRoZSBlbGVtZW50XHJcbiAgICAgICAgICogbmVlZHMgdG8gYmUgcmVmcmVzaGVkIHdpdGgge0BsaW5rICNyZWZyZXNoUGxheWJhY2tQb3NpdGlvbn0uXHJcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBfdGhpcy5wbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSA9IDA7XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9oYWNrcy5tb3ppbGxhLm9yZy8yMDEzLzA0L2RldGVjdGluZy10b3VjaC1pdHMtdGhlLXdoeS1ub3QtdGhlLWhvdy9cclxuICAgICAgICBfdGhpcy50b3VjaFN1cHBvcnRlZCA9ICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpO1xyXG4gICAgICAgIF90aGlzLnNlZWtCYXJFdmVudHMgPSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGaXJlZCB3aGVuIGEgc2NydWJiaW5nIHNlZWsgb3BlcmF0aW9uIGlzIHN0YXJ0ZWQuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBvblNlZWs6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZpcmVkIGR1cmluZyBhIHNjcnViYmluZyBzZWVrIHRvIGluZGljYXRlIHRoYXQgdGhlIHNlZWsgcHJldmlldyAoaS5lLiB0aGUgdmlkZW8gZnJhbWUpIHNob3VsZCBiZSB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgb25TZWVrUHJldmlldzogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRmlyZWQgd2hlbiBhIHNjcnViYmluZyBzZWVrIGhhcyBmaW5pc2hlZCBvciB3aGVuIGEgZGlyZWN0IHNlZWsgaXMgaXNzdWVkLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgb25TZWVrZWQ6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXNlZWtiYXInLFxyXG4gICAgICAgICAgICB2ZXJ0aWNhbDogZmFsc2UsXHJcbiAgICAgICAgICAgIHNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVJbnRlcnZhbE1zOiA1MCxcclxuICAgICAgICAgICAgaGlkZUluTGl2ZVBsYXliYWNrOiB0cnVlLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgX3RoaXMubGFiZWwgPSBfdGhpcy5jb25maWcubGFiZWw7XHJcbiAgICAgICAgX3RoaXMudGltZWxpbmVNYXJrZXJzID0gW107XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmluaXRpYWxpemUuY2FsbCh0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5oYXNMYWJlbCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0TGFiZWwoKS5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNlZWtCYXIucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlciwgY29uZmlndXJlU2Vlaykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGNvbmZpZ3VyZVNlZWsgPT09IHZvaWQgMCkgeyBjb25maWd1cmVTZWVrID0gdHJ1ZTsgfVxyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIC8vIGxldCBjb25maWcgPSA8U2Vla0JhckNvbmZpZz50aGlzLmdldENvbmZpZygpO1xyXG4gICAgICAgIGlmICghY29uZmlndXJlU2Vlaykge1xyXG4gICAgICAgICAgICAvLyBUaGUgY29uZmlndXJlU2VlayBmbGFnIGNhbiBiZSB1c2VkIGJ5IHN1YmNsYXNzZXMgdG8gZGlzYWJsZSBjb25maWd1cmF0aW9uIGFzIHNlZWsgYmFyLiBFLmcuIHRoZSB2b2x1bWVcclxuICAgICAgICAgICAgLy8gc2xpZGVyIGlzIHJldXNpbmcgdGhpcyBjb21wb25lbnQgYnV0IGFkZHMgaXRzIG93biBmdW5jdGlvbmFsaXR5LCBhbmQgZG9lcyBub3QgbmVlZCB0aGUgc2VlayBmdW5jdGlvbmFsaXR5LlxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGFjdHVhbGx5IGEgaGFjaywgdGhlIHByb3BlciBzb2x1dGlvbiB3b3VsZCBiZSBmb3IgYm90aCBzZWVrIGJhciBhbmQgdm9sdW1lIHNsaWRlcnMgdG8gZXh0ZW5kXHJcbiAgICAgICAgICAgIC8vIGEgY29tbW9uIGJhc2Ugc2xpZGVyIGNvbXBvbmVudCBhbmQgaW1wbGVtZW50IHRoZWlyIGZ1bmN0aW9uYWxpdHkgdGhlcmUuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBsYXliYWNrTm90SW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIHZhciBpc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICB2YXIgaXNTZWVraW5nID0gZmFsc2U7XHJcbiAgICAgICAgLy8gVXBkYXRlIHBsYXliYWNrIGFuZCBidWZmZXIgcG9zaXRpb25zXHJcbiAgICAgICAgdmFyIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50LCBmb3JjZVVwZGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQgPT09IHZvaWQgMCkgeyBldmVudCA9IG51bGw7IH1cclxuICAgICAgICAgICAgaWYgKGZvcmNlVXBkYXRlID09PSB2b2lkIDApIHsgZm9yY2VVcGRhdGUgPSBmYWxzZTsgfVxyXG4gICAgICAgICAgICAvLyBPbmNlIHRoaXMgaGFuZGxlciBvcyBjYWxsZWQsIHBsYXliYWNrIGhhcyBiZWVuIHN0YXJ0ZWQgYW5kIHdlIHNldCB0aGUgZmxhZyB0byBmYWxzZVxyXG4gICAgICAgICAgICBwbGF5YmFja05vdEluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChpc1NlZWtpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGNhdWdodCBhIHNlZWsgcHJldmlldyBzZWVrLCBkbyBub3QgdXBkYXRlIHRoZSBzZWVrYmFyXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc0xpdmUoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5nZXRNYXhUaW1lU2hpZnQoKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FzZSBtdXN0IGJlIGV4cGxpY2l0bHkgaGFuZGxlZCB0byBhdm9pZCBkaXZpc2lvbiBieSB6ZXJvXHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0UGxheWJhY2tQb3NpdGlvbigxMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlID0gMTAwIC0gKDEwMCAvIHBsYXllci5nZXRNYXhUaW1lU2hpZnQoKSAqIHBsYXllci5nZXRUaW1lU2hpZnQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0UGxheWJhY2tQb3NpdGlvbihwbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBBbHdheXMgc2hvdyBmdWxsIGJ1ZmZlciBmb3IgbGl2ZSBzdHJlYW1zXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRCdWZmZXJQb3NpdGlvbigxMDApO1xyXG4gICAgICAgICAgICAgICAgLy8gSGlkZSBTZWVrQmFyIGlmIHJlcXVpcmVkLlxyXG4gICAgICAgICAgICAgICAgLy8gaWYgKGNvbmZpZy5oaWRlSW5MaXZlUGxheWJhY2spIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBwbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSA9IDEwMCAvIHBsYXllci5nZXREdXJhdGlvbigpICogcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmlkZW9CdWZmZXJMZW5ndGggPSBwbGF5ZXIuZ2V0VmlkZW9CdWZmZXJMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgIHZhciBhdWRpb0J1ZmZlckxlbmd0aCA9IHBsYXllci5nZXRBdWRpb0J1ZmZlckxlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBidWZmZXIgbGVuZ3RoIHdoaWNoIGlzIHRoZSBzbWFsbGVyIGxlbmd0aCBvZiB0aGUgYXVkaW8gYW5kIHZpZGVvIGJ1ZmZlcnMuIElmIG9uZSBvZiB0aGVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYnVmZmVycyBpcyBub3QgYXZhaWxhYmxlLCB3ZSBzZXQgaXQncyB2YWx1ZSB0byBNQVhfVkFMVUUgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIG90aGVyIHJlYWwgdmFsdWUgaXMgdGFrZW5cclxuICAgICAgICAgICAgICAgIC8vIGFzIHRoZSBidWZmZXIgbGVuZ3RoLlxyXG4gICAgICAgICAgICAgICAgdmFyIGJ1ZmZlckxlbmd0aCA9IE1hdGgubWluKHZpZGVvQnVmZmVyTGVuZ3RoICE9IG51bGwgPyB2aWRlb0J1ZmZlckxlbmd0aCA6IE51bWJlci5NQVhfVkFMVUUsIGF1ZGlvQnVmZmVyTGVuZ3RoICE9IG51bGwgPyBhdWRpb0J1ZmZlckxlbmd0aCA6IE51bWJlci5NQVhfVkFMVUUpO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgYm90aCBidWZmZXIgbGVuZ3RocyBhcmUgbWlzc2luZywgd2Ugc2V0IHRoZSBidWZmZXIgbGVuZ3RoIHRvIHplcm9cclxuICAgICAgICAgICAgICAgIGlmIChidWZmZXJMZW5ndGggPT09IE51bWJlci5NQVhfVkFMVUUpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZmZXJMZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGJ1ZmZlclBlcmNlbnRhZ2UgPSAxMDAgLyBwbGF5ZXIuZ2V0RHVyYXRpb24oKSAqIGJ1ZmZlckxlbmd0aDtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBwbGF5YmFjayBwb3NpdGlvbiBvbmx5IGluIHBhdXNlZCBzdGF0ZSBvciBpbiB0aGUgaW5pdGlhbCBzdGFydHVwIHN0YXRlIHdoZXJlIHBsYXllciBpcyBuZWl0aGVyXHJcbiAgICAgICAgICAgICAgICAvLyBwYXVzZWQgbm9yIHBsYXlpbmcuIFBsYXliYWNrIHVwZGF0ZXMgYXJlIGhhbmRsZWQgaW4gdGhlIFRpbWVvdXQgYmVsb3cuXHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29uZmlnLnNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVJbnRlcnZhbE1zID09PSBTZWVrQmFyLlNNT09USF9QTEFZQkFDS19QT1NJVElPTl9VUERBVEVfRElTQUJMRURcclxuICAgICAgICAgICAgICAgICAgICB8fCBmb3JjZVVwZGF0ZSB8fCBwbGF5ZXIuaXNQYXVzZWQoKSB8fCAocGxheWVyLmlzUGF1c2VkKCkgPT09IHBsYXllci5pc1BsYXlpbmcoKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRQbGF5YmFja1Bvc2l0aW9uKHBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF90aGlzLnNldEJ1ZmZlclBvc2l0aW9uKHBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlICsgYnVmZmVyUGVyY2VudGFnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIFVwZGF0ZSBzZWVrYmFyIHVwb24gdGhlc2UgZXZlbnRzXHJcbiAgICAgICAgLy8gaW5pdCBwbGF5YmFjayBwb3NpdGlvbiB3aGVuIHRoZSBwbGF5ZXIgaXMgcmVhZHlcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIpO1xyXG4gICAgICAgIC8vIHVwZGF0ZSBwbGF5YmFjayBwb3NpdGlvbiB3aGVuIGl0IGNoYW5nZXNcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9USU1FX0NIQU5HRUQsIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKTtcclxuICAgICAgICAvLyB1cGRhdGUgYnVmZmVybGV2ZWwgd2hlbiBidWZmZXJpbmcgaXMgY29tcGxldGVcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TVEFMTF9FTkRFRCwgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIpO1xyXG4gICAgICAgIC8vIHVwZGF0ZSBwbGF5YmFjayBwb3NpdGlvbiB3aGVuIGEgc2VlayBoYXMgZmluaXNoZWRcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TRUVLRUQsIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKTtcclxuICAgICAgICAvLyB1cGRhdGUgcGxheWJhY2sgcG9zaXRpb24gd2hlbiBhIHRpbWVzaGlmdCBoYXMgZmluaXNoZWRcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9USU1FX1NISUZURUQsIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKTtcclxuICAgICAgICAvLyB1cGRhdGUgYnVmZmVybGV2ZWwgd2hlbiBhIHNlZ21lbnQgaGFzIGJlZW4gZG93bmxvYWRlZFxyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NFR01FTlRfUkVRVUVTVF9GSU5JU0hFRCwgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIpO1xyXG4gICAgICAgIC8vIHVwZGF0ZSBwbGF5YmFjayBwb3NpdGlvbiBvZiBDYXN0IHBsYXliYWNrXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9USU1FX1VQREFURUQsIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKTtcclxuICAgICAgICAvLyBTZWVrIGhhbmRsaW5nXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU0VFSywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRTZWVraW5nKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NFRUtFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRTZWVraW5nKGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9USU1FX1NISUZULCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFNlZWtpbmcodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVElNRV9TSElGVEVELCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFNlZWtpbmcoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBzZWVrID0gZnVuY3Rpb24gKHBlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc0xpdmUoKSkge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnRpbWVTaGlmdChwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgLSAocGxheWVyLmdldE1heFRpbWVTaGlmdCgpICogKHBlcmNlbnRhZ2UgLyAxMDApKSwgJ3VpJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2VlayhwbGF5ZXIuZ2V0RHVyYXRpb24oKSAqIChwZXJjZW50YWdlIC8gMTAwKSwgJ3VpJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25TZWVrLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyKSB7XHJcbiAgICAgICAgICAgIGlzU2Vla2luZyA9IHRydWU7IC8vIHRyYWNrIHNlZWtpbmcgc3RhdHVzIHNvIHdlIGNhbiBjYXRjaCBldmVudHMgZnJvbSBzZWVrIHByZXZpZXcgc2Vla3NcclxuICAgICAgICAgICAgLy8gTm90aWZ5IFVJIG1hbmFnZXIgb2Ygc3RhcnRlZCBzZWVrXHJcbiAgICAgICAgICAgIHVpbWFuYWdlci5vblNlZWsuZGlzcGF0Y2goc2VuZGVyKTtcclxuICAgICAgICAgICAgLy8gU2F2ZSBjdXJyZW50IHBsYXliYWNrIHN0YXRlXHJcbiAgICAgICAgICAgIGlzUGxheWluZyA9IHBsYXllci5pc1BsYXlpbmcoKTtcclxuICAgICAgICAgICAgLy8gUGF1c2UgcGxheWJhY2sgd2hpbGUgc2Vla2luZ1xyXG4gICAgICAgICAgICBpZiAoaXNQbGF5aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGF1c2UoJ3VpJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uU2Vla1ByZXZpZXcuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIGFyZ3MpIHtcclxuICAgICAgICAgICAgLy8gTm90aWZ5IFVJIG1hbmFnZXIgb2Ygc2VlayBwcmV2aWV3XHJcbiAgICAgICAgICAgIHVpbWFuYWdlci5vblNlZWtQcmV2aWV3LmRpc3BhdGNoKHNlbmRlciwgYXJncyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vblNlZWtQcmV2aWV3LnN1YnNjcmliZVJhdGVMaW1pdGVkKGZ1bmN0aW9uIChzZW5kZXIsIGFyZ3MpIHtcclxuICAgICAgICAgICAgLy8gUmF0ZS1saW1pdGVkIHNjcnViYmluZyBzZWVrXHJcbiAgICAgICAgICAgIGlmIChhcmdzLnNjcnViYmluZykge1xyXG4gICAgICAgICAgICAgICAgc2VlayhhcmdzLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgdGhpcy5vblNlZWtlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgcGVyY2VudGFnZSkge1xyXG4gICAgICAgICAgICBpc1NlZWtpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gRG8gdGhlIHNlZWtcclxuICAgICAgICAgICAgc2VlayhwZXJjZW50YWdlKTtcclxuICAgICAgICAgICAgLy8gQ29udGludWUgcGxheWJhY2sgYWZ0ZXIgc2VlayBpZiBwbGF5ZXIgd2FzIHBsYXlpbmcgd2hlbiBzZWVrIHN0YXJ0ZWRcclxuICAgICAgICAgICAgaWYgKGlzUGxheWluZykge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYXkoJ3VpJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gTm90aWZ5IFVJIG1hbmFnZXIgb2YgZmluaXNoZWQgc2Vla1xyXG4gICAgICAgICAgICB1aW1hbmFnZXIub25TZWVrZWQuZGlzcGF0Y2goc2VuZGVyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5oYXNMYWJlbCgpKSB7XHJcbiAgICAgICAgICAgIC8vIENvbmZpZ3VyZSBhIHNlZWtiYXIgbGFiZWwgdGhhdCBpcyBpbnRlcm5hbCB0byB0aGUgc2Vla2JhcilcclxuICAgICAgICAgICAgdGhpcy5nZXRMYWJlbCgpLmNvbmZpZ3VyZShwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEhpZGUgc2Vla2JhciBmb3IgbGl2ZSBzb3VyY2VzIHdpdGhvdXQgdGltZXNoaWZ0XHJcbiAgICAgICAgdmFyIGlzTGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBoYXNUaW1lU2hpZnQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgc3dpdGNoVmlzaWJpbGl0eSA9IGZ1bmN0aW9uIChpc0xpdmUsIGhhc1RpbWVTaGlmdCkge1xyXG4gICAgICAgICAgICBpZiAoaXNMaXZlICYmICFoYXNUaW1lU2hpZnQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlcihudWxsLCB0cnVlKTtcclxuICAgICAgICAgICAgX3RoaXMucmVmcmVzaFBsYXliYWNrUG9zaXRpb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBsaXZlU3RyZWFtRGV0ZWN0b3IgPSBuZXcgcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5MaXZlU3RyZWFtRGV0ZWN0b3IocGxheWVyKTtcclxuICAgICAgICBsaXZlU3RyZWFtRGV0ZWN0b3Iub25MaXZlQ2hhbmdlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgICAgICBpc0xpdmUgPSBhcmdzLmxpdmU7XHJcbiAgICAgICAgICAgIHN3aXRjaFZpc2liaWxpdHkoaXNMaXZlLCBoYXNUaW1lU2hpZnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciB0aW1lU2hpZnREZXRlY3RvciA9IG5ldyBwbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLlRpbWVTaGlmdEF2YWlsYWJpbGl0eURldGVjdG9yKHBsYXllcik7XHJcbiAgICAgICAgdGltZVNoaWZ0RGV0ZWN0b3Iub25UaW1lU2hpZnRBdmFpbGFiaWxpdHlDaGFuZ2VkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgICAgIGhhc1RpbWVTaGlmdCA9IGFyZ3MudGltZVNoaWZ0QXZhaWxhYmxlO1xyXG4gICAgICAgICAgICBzd2l0Y2hWaXNpYmlsaXR5KGlzTGl2ZSwgaGFzVGltZVNoaWZ0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBJbml0aWFsIGRldGVjdGlvblxyXG4gICAgICAgIGxpdmVTdHJlYW1EZXRlY3Rvci5kZXRlY3QoKTtcclxuICAgICAgICB0aW1lU2hpZnREZXRlY3Rvci5kZXRlY3QoKTtcclxuICAgICAgICAvLyBSZWZyZXNoIHRoZSBwbGF5YmFjayBwb3NpdGlvbiB3aGVuIHRoZSBwbGF5ZXIgcmVzaXplZCBvciB0aGUgVUkgaXMgY29uZmlndXJlZC4gVGhlIHBsYXliYWNrIHBvc2l0aW9uIG1hcmtlclxyXG4gICAgICAgIC8vIGlzIHBvc2l0aW9uZWQgYWJzb2x1dGVseSBhbmQgbXVzdCB0aGVyZWZvcmUgYmUgdXBkYXRlZCB3aGVuIHRoZSBzaXplIG9mIHRoZSBzZWVrYmFyIGNoYW5nZXMuXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWUVSX1JFU0laRSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEFkZGl0aW9uYWxseSwgd2hlbiB0aGlzIGNvZGUgaXMgY2FsbGVkLCB0aGUgc2Vla2JhciBpcyBub3QgcGFydCBvZiB0aGUgVUkgeWV0IGFuZCB0aGVyZWZvcmUgZG9lcyBub3QgaGF2ZSBhIHNpemUsXHJcbiAgICAgICAgLy8gcmVzdWx0aW5nIGluIGEgd3JvbmcgaW5pdGlhbCBwb3NpdGlvbiBvZiB0aGUgbWFya2VyLiBSZWZyZXNoaW5nIGl0IG9uY2UgdGhlIFVJIGlzIGNvbmZpZ3VyZWQgc29sdmVkIHRoaXMgaXNzdWUuXHJcbiAgICAgICAgdWltYW5hZ2VyLm9uQ29uZmlndXJlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEl0IGNhbiBhbHNvIGhhcHBlbiB0aGF0IHRoZSB2YWx1ZSBjaGFuZ2VzIG9uY2UgdGhlIHBsYXllciBpcyByZWFkeSwgb3Igd2hlbiBhIG5ldyBzb3VyY2UgaXMgbG9hZGVkLCBzbyB3ZSBuZWVkXHJcbiAgICAgICAgLy8gdG8gdXBkYXRlIG9uIE9OX1JFQURZIHRvb1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1JFQURZLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBzZWVrYmFyXHJcbiAgICAgICAgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIoKTsgLy8gU2V0IHRoZSBwbGF5YmFjayBwb3NpdGlvblxyXG4gICAgICAgIHRoaXMuc2V0QnVmZmVyUG9zaXRpb24oMCk7XHJcbiAgICAgICAgdGhpcy5zZXRTZWVrUG9zaXRpb24oMCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVJbnRlcnZhbE1zICE9PSBTZWVrQmFyLlNNT09USF9QTEFZQkFDS19QT1NJVElPTl9VUERBVEVfRElTQUJMRUQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmVTbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlcihwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29uZmlndXJlTWFya2VycyhwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuY29uZmlndXJlU21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogUGxheWJhY2sgcG9zaXRpb24gdXBkYXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXZSBkbyBub3QgdXBkYXRlIHRoZSBwb3NpdGlvbiBkaXJlY3RseSBmcm9tIHRoZSBPTl9USU1FX0NIQU5HRUQgZXZlbnQsIGJlY2F1c2UgaXQgYXJyaXZlcyB2ZXJ5IGppdHRlcnkgYW5kXHJcbiAgICAgICAgICogcmVzdWx0cyBpbiBhIGppdHRlcnkgcG9zaXRpb24gaW5kaWNhdG9yIHNpbmNlIHRoZSBDU1MgdHJhbnNpdGlvbiB0aW1lIGlzIHN0YXRpY2FsbHkgc2V0LlxyXG4gICAgICAgICAqIFRvIHdvcmsgYXJvdW5kIHRoaXMgaXNzdWUsIHdlIG1haW50YWluIGEgbG9jYWwgcGxheWJhY2sgcG9zaXRpb24gdGhhdCBpcyB1cGRhdGVkIGluIGEgc3RhYmxlIHJlZ3VsYXIgaW50ZXJ2YWxcclxuICAgICAgICAgKiBhbmQga2VwdCBpbiBzeW5jIHdpdGggdGhlIHBsYXllci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgY3VycmVudFRpbWVTZWVrQmFyID0gMDtcclxuICAgICAgICB2YXIgY3VycmVudFRpbWVQbGF5ZXIgPSAwO1xyXG4gICAgICAgIHZhciB1cGRhdGVJbnRlcnZhbE1zID0gNTA7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRUaW1lVXBkYXRlRGVsdGFTZWNzID0gdXBkYXRlSW50ZXJ2YWxNcyAvIDEwMDA7XHJcbiAgICAgICAgdGhpcy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlciA9IG5ldyB0aW1lb3V0XzEuVGltZW91dCh1cGRhdGVJbnRlcnZhbE1zLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRUaW1lU2Vla0JhciArPSBjdXJyZW50VGltZVVwZGF0ZURlbHRhU2VjcztcclxuICAgICAgICAgICAgY3VycmVudFRpbWVQbGF5ZXIgPSBwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgICAgICAgICAgLy8gU3luYyBjdXJyZW50VGltZSBvZiBzZWVrYmFyIHRvIHBsYXllclxyXG4gICAgICAgICAgICB2YXIgY3VycmVudFRpbWVEZWx0YSA9IGN1cnJlbnRUaW1lU2Vla0JhciAtIGN1cnJlbnRUaW1lUGxheWVyO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgZGVsdGEgaXMgbGFyZ2VyIHRoYXQgMiBzZWNzLCBkaXJlY3RseSBqdW1wIHRoZSBzZWVrYmFyIHRvIHRoZVxyXG4gICAgICAgICAgICAvLyBwbGF5ZXIgdGltZSBpbnN0ZWFkIG9mIHNtb290aGx5IGZhc3QgZm9yd2FyZGluZy9yZXdpbmRpbmcuXHJcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhjdXJyZW50VGltZURlbHRhKSA+IDIpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lU2Vla0JhciA9IGN1cnJlbnRUaW1lUGxheWVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnRUaW1lRGVsdGEgPD0gLWN1cnJlbnRUaW1lVXBkYXRlRGVsdGFTZWNzKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50VGltZVNlZWtCYXIgKz0gY3VycmVudFRpbWVVcGRhdGVEZWx0YVNlY3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVudFRpbWVEZWx0YSA+PSBjdXJyZW50VGltZVVwZGF0ZURlbHRhU2Vjcykge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFRpbWVTZWVrQmFyIC09IGN1cnJlbnRUaW1lVXBkYXRlRGVsdGFTZWNzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSA9IDEwMCAvIHBsYXllci5nZXREdXJhdGlvbigpICogY3VycmVudFRpbWVTZWVrQmFyO1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRQbGF5YmFja1Bvc2l0aW9uKHBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlKTtcclxuICAgICAgICB9LCB0cnVlKTtcclxuICAgICAgICB2YXIgc3RhcnRTbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFwbGF5ZXIuaXNMaXZlKCkpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lU2Vla0JhciA9IHBsYXllci5nZXRDdXJyZW50VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIuc3RhcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHN0b3BTbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIuY2xlYXIoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BMQVksIHN0YXJ0U21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfUExBWUlORywgc3RhcnRTbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUEFVU0VELCBzdG9wU21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfUEFVU0VELCBzdG9wU21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NFRUtFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjdXJyZW50VGltZVNlZWtCYXIgPSBwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocGxheWVyLmlzUGxheWluZygpKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0U21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuY29uZmlndXJlTWFya2VycyA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNsZWFyTWFya2VycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMudGltZWxpbmVNYXJrZXJzID0gW107XHJcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZU1hcmtlcnMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzZXR1cE1hcmtlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNsZWFyTWFya2VycygpO1xyXG4gICAgICAgICAgICB2YXIgaGFzTWFya2Vyc0luVWlDb25maWcgPSB1aW1hbmFnZXIuZ2V0Q29uZmlnKCkubWV0YWRhdGEgJiYgdWltYW5hZ2VyLmdldENvbmZpZygpLm1ldGFkYXRhLm1hcmtlcnNcclxuICAgICAgICAgICAgICAgICYmIHVpbWFuYWdlci5nZXRDb25maWcoKS5tZXRhZGF0YS5tYXJrZXJzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgIHZhciBoYXNNYXJrZXJzSW5QbGF5ZXJDb25maWcgPSBwbGF5ZXIuZ2V0Q29uZmlnKCkuc291cmNlICYmIHBsYXllci5nZXRDb25maWcoKS5zb3VyY2UubWFya2Vyc1xyXG4gICAgICAgICAgICAgICAgJiYgcGxheWVyLmdldENvbmZpZygpLnNvdXJjZS5tYXJrZXJzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgIC8vIFRha2UgbWFya2VycyBmcm9tIHRoZSBVSSBjb25maWcuIElmIG5vIG1hcmtlcnMgZGVmaW5lZCwgdHJ5IHRvIHRha2UgdGhlbSBmcm9tIHRoZSBwbGF5ZXIncyBzb3VyY2UgY29uZmlnLlxyXG4gICAgICAgICAgICB2YXIgbWFya2VycyA9IGhhc01hcmtlcnNJblVpQ29uZmlnID8gdWltYW5hZ2VyLmdldENvbmZpZygpLm1ldGFkYXRhLm1hcmtlcnMgOlxyXG4gICAgICAgICAgICAgICAgaGFzTWFya2Vyc0luUGxheWVyQ29uZmlnID8gcGxheWVyLmdldENvbmZpZygpLnNvdXJjZS5tYXJrZXJzIDogbnVsbDtcclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgdGltZWxpbmUgbWFya2VycyBmcm9tIHRoZSBjb25maWcgaWYgd2UgaGF2ZSBtYXJrZXJzIGFuZCBpZiB3ZSBoYXZlIGEgZHVyYXRpb25cclxuICAgICAgICAgICAgLy8gVGhlIGR1cmF0aW9uIGNoZWNrIGlzIGZvciBidWdneSBwbGF0Zm9ybXMgd2hlcmUgdGhlIGR1cmF0aW9uIGlzIG5vdCBhdmFpbGFibGUgaW5zdGFudGx5IChDaHJvbWUgb24gQW5kcm9pZCA0LjMpXHJcbiAgICAgICAgICAgIGlmIChtYXJrZXJzICYmIHBsYXllci5nZXREdXJhdGlvbigpICE9PSBJbmZpbml0eSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtYXJrZXJzXzEgPSBtYXJrZXJzOyBfaSA8IG1hcmtlcnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbWFya2Vyc18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy50aW1lbGluZU1hcmtlcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IDEwMCAvIHBsYXllci5nZXREdXJhdGlvbigpICogbWFya2VyLnRpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBtYXJrZXIudGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUG9wdWxhdGUgdGhlIHRpbWVsaW5lIHdpdGggdGhlIG1hcmtlcnNcclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlTWFya2VycygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gQWRkIG1hcmtlcnMgd2hlbiBhIHNvdXJjZSBpcyBsb2FkZWRcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgc2V0dXBNYXJrZXJzKTtcclxuICAgICAgICAvLyBSZW1vdmUgbWFya2VycyB3aGVuIHVubG9hZGVkXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU09VUkNFX1VOTE9BREVELCBjbGVhck1hcmtlcnMpO1xyXG4gICAgICAgIC8vIEluaXQgbWFya2VycyBhdCBzdGFydHVwXHJcbiAgICAgICAgc2V0dXBNYXJrZXJzKCk7XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbGVhc2UuY2FsbCh0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNlZWtCYXIucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy52ZXJ0aWNhbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jc3NDbGFzc2VzLnB1c2goJ3ZlcnRpY2FsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzZWVrQmFyQ29udGFpbmVyID0gbmV3IGRvbV8xLkRPTSgnZGl2Jywge1xyXG4gICAgICAgICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHNlZWtCYXIgPSBuZXcgZG9tXzEuRE9NKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdzZWVrYmFyJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyID0gc2Vla0JhcjtcclxuICAgICAgICAvLyBJbmRpY2F0b3IgdGhhdCBzaG93cyB0aGUgYnVmZmVyIGZpbGwgbGV2ZWxcclxuICAgICAgICB2YXIgc2Vla0JhckJ1ZmZlckxldmVsID0gbmV3IGRvbV8xLkRPTSgnZGl2Jywge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnc2Vla2Jhci1idWZmZXJsZXZlbCcpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2Vla0JhckJ1ZmZlclBvc2l0aW9uID0gc2Vla0JhckJ1ZmZlckxldmVsO1xyXG4gICAgICAgIC8vIEluZGljYXRvciB0aGF0IHNob3dzIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uXHJcbiAgICAgICAgdmFyIHNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uID0gbmV3IGRvbV8xLkRPTSgnZGl2Jywge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnc2Vla2Jhci1wbGF5YmFja3Bvc2l0aW9uJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyUGxheWJhY2tQb3NpdGlvbiA9IHNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uO1xyXG4gICAgICAgIC8vIEEgbWFya2VyIG9mIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uLCBlLmcuIGEgZG90IG9yIGxpbmVcclxuICAgICAgICB2YXIgc2Vla0JhclBsYXliYWNrUG9zaXRpb25NYXJrZXIgPSBuZXcgZG9tXzEuRE9NKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdzZWVrYmFyLXBsYXliYWNrcG9zaXRpb24tbWFya2VyJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyUGxheWJhY2tQb3NpdGlvbk1hcmtlciA9IHNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uTWFya2VyO1xyXG4gICAgICAgIC8vIEluZGljYXRvciB0aGF0IHNob3cgd2hlcmUgYSBzZWVrIHdpbGwgZ28gdG9cclxuICAgICAgICB2YXIgc2Vla0JhclNlZWtQb3NpdGlvbiA9IG5ldyBkb21fMS5ET00oJ2RpdicsIHtcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ3NlZWtiYXItc2Vla3Bvc2l0aW9uJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyU2Vla1Bvc2l0aW9uID0gc2Vla0JhclNlZWtQb3NpdGlvbjtcclxuICAgICAgICAvLyBJbmRpY2F0b3IgdGhhdCBzaG93cyB0aGUgZnVsbCBzZWVrYmFyXHJcbiAgICAgICAgdmFyIHNlZWtCYXJCYWNrZHJvcCA9IG5ldyBkb21fMS5ET00oJ2RpdicsIHtcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ3NlZWtiYXItYmFja2Ryb3AnKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNlZWtCYXJCYWNrZHJvcCA9IHNlZWtCYXJCYWNrZHJvcDtcclxuICAgICAgICB2YXIgc2Vla0JhckNoYXB0ZXJNYXJrZXJzQ29udGFpbmVyID0gbmV3IGRvbV8xLkRPTSgnZGl2Jywge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnc2Vla2Jhci1tYXJrZXJzJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyTWFya2Vyc0NvbnRhaW5lciA9IHNlZWtCYXJDaGFwdGVyTWFya2Vyc0NvbnRhaW5lcjtcclxuICAgICAgICBzZWVrQmFyLmFwcGVuZChzZWVrQmFyQmFja2Ryb3AsIHNlZWtCYXJCdWZmZXJMZXZlbCwgc2Vla0JhclNlZWtQb3NpdGlvbiwgc2Vla0JhclBsYXliYWNrUG9zaXRpb24sIHNlZWtCYXJDaGFwdGVyTWFya2Vyc0NvbnRhaW5lciwgc2Vla0JhclBsYXliYWNrUG9zaXRpb25NYXJrZXIpO1xyXG4gICAgICAgIHZhciBzZWVraW5nID0gZmFsc2U7XHJcbiAgICAgICAgLy8gRGVmaW5lIGhhbmRsZXIgZnVuY3Rpb25zIHNvIHdlIGNhbiBhdHRhY2gvcmVtb3ZlIHRoZW0gbGF0ZXJcclxuICAgICAgICB2YXIgbW91c2VUb3VjaE1vdmVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGlvbiB0byBWUiBoYW5kbGVyXHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRQZXJjZW50YWdlID0gMTAwICogX3RoaXMuZ2V0T2Zmc2V0KGUpO1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRTZWVrUG9zaXRpb24odGFyZ2V0UGVyY2VudGFnZSk7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFBsYXliYWNrUG9zaXRpb24odGFyZ2V0UGVyY2VudGFnZSk7XHJcbiAgICAgICAgICAgIF90aGlzLm9uU2Vla1ByZXZpZXdFdmVudCh0YXJnZXRQZXJjZW50YWdlLCB0cnVlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBtb3VzZVRvdWNoVXBIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgaGFuZGxlcnMsIHNlZWsgb3BlcmF0aW9uIGlzIGZpbmlzaGVkXHJcbiAgICAgICAgICAgIG5ldyBkb21fMS5ET00oZG9jdW1lbnQpLm9mZigndG91Y2htb3ZlIG1vdXNlbW92ZScsIG1vdXNlVG91Y2hNb3ZlSGFuZGxlcik7XHJcbiAgICAgICAgICAgIG5ldyBkb21fMS5ET00oZG9jdW1lbnQpLm9mZigndG91Y2hlbmQgbW91c2V1cCcsIG1vdXNlVG91Y2hVcEhhbmRsZXIpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0UGVyY2VudGFnZSA9IDEwMCAqIF90aGlzLmdldE9mZnNldChlKTtcclxuICAgICAgICAgICAgdmFyIHNuYXBwZWRDaGFwdGVyID0gX3RoaXMuZ2V0TWFya2VyQXRQb3NpdGlvbih0YXJnZXRQZXJjZW50YWdlKTtcclxuICAgICAgICAgICAgX3RoaXMuc2V0U2Vla2luZyhmYWxzZSk7XHJcbiAgICAgICAgICAgIHNlZWtpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gRmlyZSBzZWVrZWQgZXZlbnRcclxuICAgICAgICAgICAgX3RoaXMub25TZWVrZWRFdmVudChzbmFwcGVkQ2hhcHRlciA/IHNuYXBwZWRDaGFwdGVyLnRpbWUgOiB0YXJnZXRQZXJjZW50YWdlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEEgc2VlayBhbHdheXMgc3RhcnQgd2l0aCBhIHRvdWNoc3RhcnQgb3IgbW91c2Vkb3duIGRpcmVjdGx5IG9uIHRoZSBzZWVrYmFyLlxyXG4gICAgICAgIC8vIFRvIHRyYWNrIGEgbW91c2Ugc2VlayBhbHNvIG91dHNpZGUgdGhlIHNlZWtiYXIgKGZvciB0b3VjaCBldmVudHMgdGhpcyB3b3JrcyBhdXRvbWF0aWNhbGx5KSxcclxuICAgICAgICAvLyBzbyB0aGUgdXNlciBkb2VzIG5vdCBuZWVkIHRvIHRha2UgY2FyZSB0aGF0IHRoZSBtb3VzZSBhbHdheXMgc3RheXMgb24gdGhlIHNlZWtiYXIsIHdlIGF0dGFjaCB0aGUgbW91c2Vtb3ZlXHJcbiAgICAgICAgLy8gYW5kIG1vdXNldXAgaGFuZGxlcnMgdG8gdGhlIHdob2xlIGRvY3VtZW50LiBBIHNlZWsgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIHVzZXIgbGlmdHMgdGhlIG1vdXNlIGtleS5cclxuICAgICAgICAvLyBBIHNlZWsgbW91c2UgZ2VzdHVyZSBpcyB0aHVzIGJhc2ljYWxseSBhIGNsaWNrIHdpdGggYSBsb25nIHRpbWUgZnJhbWUgYmV0d2VlbiBkb3duIGFuZCB1cCBldmVudHMuXHJcbiAgICAgICAgc2Vla0Jhci5vbigndG91Y2hzdGFydCBtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgaXNUb3VjaEV2ZW50ID0gX3RoaXMudG91Y2hTdXBwb3J0ZWQgJiYgZSBpbnN0YW5jZW9mIFRvdWNoRXZlbnQ7XHJcbiAgICAgICAgICAgIC8vIFByZXZlbnQgc2VsZWN0aW9uIG9mIERPTSBlbGVtZW50cyAoYWxzbyBwcmV2ZW50cyBtb3VzZWRvd24gaWYgY3VycmVudCBldmVudCBpcyB0b3VjaHN0YXJ0KVxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW9uIHRvIFZSIGhhbmRsZXJcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgX3RoaXMuc2V0U2Vla2luZyh0cnVlKTsgLy8gU2V0IHNlZWtpbmcgY2xhc3Mgb24gRE9NIGVsZW1lbnRcclxuICAgICAgICAgICAgc2Vla2luZyA9IHRydWU7IC8vIFNldCBzZWVrIHRyYWNraW5nIGZsYWdcclxuICAgICAgICAgICAgLy8gRmlyZSBzZWVrZWQgZXZlbnRcclxuICAgICAgICAgICAgX3RoaXMub25TZWVrRXZlbnQoKTtcclxuICAgICAgICAgICAgLy8gQWRkIGhhbmRsZXIgdG8gdHJhY2sgdGhlIHNlZWsgb3BlcmF0aW9uIG92ZXIgdGhlIHdob2xlIGRvY3VtZW50XHJcbiAgICAgICAgICAgIG5ldyBkb21fMS5ET00oZG9jdW1lbnQpLm9uKGlzVG91Y2hFdmVudCA/ICd0b3VjaG1vdmUnIDogJ21vdXNlbW92ZScsIG1vdXNlVG91Y2hNb3ZlSGFuZGxlcik7XHJcbiAgICAgICAgICAgIG5ldyBkb21fMS5ET00oZG9jdW1lbnQpLm9uKGlzVG91Y2hFdmVudCA/ICd0b3VjaGVuZCcgOiAnbW91c2V1cCcsIG1vdXNlVG91Y2hVcEhhbmRsZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIERpc3BsYXkgc2VlayB0YXJnZXQgaW5kaWNhdG9yIHdoZW4gbW91c2UgaG92ZXJzIG9yIGZpbmdlciBzbGlkZXMgb3ZlciBzZWVrYmFyXHJcbiAgICAgICAgc2Vla0Jhci5vbigndG91Y2htb3ZlIG1vdXNlbW92ZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKHNlZWtpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIER1cmluZyBhIHNlZWsgKHdoZW4gbW91c2UgaXMgZG93biBvciB0b3VjaCBtb3ZlIGFjdGl2ZSksIHdlIG5lZWQgdG8gc3RvcCBwcm9wYWdhdGlvbiB0byBhdm9pZFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIFZSIHZpZXdwb3J0IHJlYWN0aW5nIHRvIHRoZSBtb3Zlcy5cclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZWNhdXNlIHRoZSBzdG9wcGVkIHByb3BhZ2F0aW9uIGluaGliaXRzIHRoZSBldmVudCBvbiB0aGUgZG9jdW1lbnQsIHdlIG5lZWQgdG8gY2FsbCBpdCBmcm9tIGhlcmVcclxuICAgICAgICAgICAgICAgIG1vdXNlVG91Y2hNb3ZlSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSAxMDAgKiBfdGhpcy5nZXRPZmZzZXQoZSk7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFNlZWtQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIF90aGlzLm9uU2Vla1ByZXZpZXdFdmVudChwb3NpdGlvbiwgZmFsc2UpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuaGFzTGFiZWwoKSAmJiBfdGhpcy5nZXRMYWJlbCgpLmlzSGlkZGVuKCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldExhYmVsKCkuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSGlkZSBzZWVrIHRhcmdldCBpbmRpY2F0b3Igd2hlbiBtb3VzZSBvciBmaW5nZXIgbGVhdmVzIHNlZWtiYXJcclxuICAgICAgICBzZWVrQmFyLm9uKCd0b3VjaGVuZCBtb3VzZWxlYXZlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRTZWVrUG9zaXRpb24oMCk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5oYXNMYWJlbCgpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXRMYWJlbCgpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlZWtCYXJDb250YWluZXIuYXBwZW5kKHNlZWtCYXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmxhYmVsKSB7XHJcbiAgICAgICAgICAgIHNlZWtCYXJDb250YWluZXIuYXBwZW5kKHRoaXMubGFiZWwuZ2V0RG9tRWxlbWVudCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlZWtCYXJDb250YWluZXI7XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUudXBkYXRlTWFya2VycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNlZWtCYXJNYXJrZXJzQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMudGltZWxpbmVNYXJrZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgbWFya2VyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICB0aGlzLnNlZWtCYXJNYXJrZXJzQ29udGFpbmVyLmFwcGVuZChuZXcgZG9tXzEuRE9NKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnc2Vla2Jhci1tYXJrZXInKSxcclxuICAgICAgICAgICAgICAgICdkYXRhLW1hcmtlci10aW1lJzogU3RyaW5nKG1hcmtlci50aW1lKSxcclxuICAgICAgICAgICAgICAgICdkYXRhLW1hcmtlci10aXRsZSc6IFN0cmluZyhtYXJrZXIudGl0bGUpLFxyXG4gICAgICAgICAgICB9KS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogbWFya2VyLnRpbWUgKyAnJScsXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuZ2V0TWFya2VyQXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChwZXJjZW50YWdlKSB7XHJcbiAgICAgICAgdmFyIHNuYXBwZWRNYXJrZXIgPSBudWxsO1xyXG4gICAgICAgIHZhciBzbmFwcGluZ1JhbmdlID0gMTtcclxuICAgICAgICBpZiAodGhpcy50aW1lbGluZU1hcmtlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy50aW1lbGluZU1hcmtlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPj0gbWFya2VyLnRpbWUgLSBzbmFwcGluZ1JhbmdlICYmIHBlcmNlbnRhZ2UgPD0gbWFya2VyLnRpbWUgKyBzbmFwcGluZ1JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc25hcHBlZE1hcmtlciA9IG1hcmtlcjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc25hcHBlZE1hcmtlcjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGhvcml6b250YWwgb2Zmc2V0IG9mIGEgbW91c2UvdG91Y2ggZXZlbnQgcG9pbnQgZnJvbSB0aGUgbGVmdCBlZGdlIG9mIHRoZSBzZWVrIGJhci5cclxuICAgICAqIEBwYXJhbSBldmVudFBhZ2VYIHRoZSBwYWdlWCBjb29yZGluYXRlIG9mIGFuIGV2ZW50IHRvIGNhbGN1bGF0ZSB0aGUgb2Zmc2V0IGZyb21cclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IGEgbnVtYmVyIGluIHRoZSByYW5nZSBvZiBbMCwgMV0sIHdoZXJlIDAgaXMgdGhlIGxlZnQgZWRnZSBhbmQgMSBpcyB0aGUgcmlnaHQgZWRnZVxyXG4gICAgICovXHJcbiAgICBTZWVrQmFyLnByb3RvdHlwZS5nZXRIb3Jpem9udGFsT2Zmc2V0ID0gZnVuY3Rpb24gKGV2ZW50UGFnZVgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudE9mZnNldFB4ID0gdGhpcy5zZWVrQmFyLm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgdmFyIHdpZHRoUHggPSB0aGlzLnNlZWtCYXIud2lkdGgoKTtcclxuICAgICAgICB2YXIgb2Zmc2V0UHggPSBldmVudFBhZ2VYIC0gZWxlbWVudE9mZnNldFB4O1xyXG4gICAgICAgIHZhciBvZmZzZXQgPSAxIC8gd2lkdGhQeCAqIG9mZnNldFB4O1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhbml0aXplT2Zmc2V0KG9mZnNldCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSB2ZXJ0aWNhbCBvZmZzZXQgb2YgYSBtb3VzZS90b3VjaCBldmVudCBwb2ludCBmcm9tIHRoZSBib3R0b20gZWRnZSBvZiB0aGUgc2VlayBiYXIuXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRQYWdlWSB0aGUgcGFnZVggY29vcmRpbmF0ZSBvZiBhbiBldmVudCB0byBjYWxjdWxhdGUgdGhlIG9mZnNldCBmcm9tXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBhIG51bWJlciBpbiB0aGUgcmFuZ2Ugb2YgWzAsIDFdLCB3aGVyZSAwIGlzIHRoZSBib3R0b20gZWRnZSBhbmQgMSBpcyB0aGUgdG9wIGVkZ2VcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuZ2V0VmVydGljYWxPZmZzZXQgPSBmdW5jdGlvbiAoZXZlbnRQYWdlWSkge1xyXG4gICAgICAgIHZhciBlbGVtZW50T2Zmc2V0UHggPSB0aGlzLnNlZWtCYXIub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgIHZhciB3aWR0aFB4ID0gdGhpcy5zZWVrQmFyLmhlaWdodCgpO1xyXG4gICAgICAgIHZhciBvZmZzZXRQeCA9IGV2ZW50UGFnZVkgLSBlbGVtZW50T2Zmc2V0UHg7XHJcbiAgICAgICAgdmFyIG9mZnNldCA9IDEgLyB3aWR0aFB4ICogb2Zmc2V0UHg7XHJcbiAgICAgICAgcmV0dXJuIDEgLSB0aGlzLnNhbml0aXplT2Zmc2V0KG9mZnNldCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBtb3VzZSBvciB0b3VjaCBldmVudCBvZmZzZXQgZm9yIHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24gKGhvcml6b250YWwgb3IgdmVydGljYWwpLlxyXG4gICAgICogQHBhcmFtIGUgdGhlIGV2ZW50IHRvIGNhbGN1bGF0ZSB0aGUgb2Zmc2V0IGZyb21cclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IGEgbnVtYmVyIGluIHRoZSByYW5nZSBvZiBbMCwgMV1cclxuICAgICAqIEBzZWUgI2dldEhvcml6b250YWxPZmZzZXRcclxuICAgICAqIEBzZWUgI2dldFZlcnRpY2FsT2Zmc2V0XHJcbiAgICAgKi9cclxuICAgIFNlZWtCYXIucHJvdG90eXBlLmdldE9mZnNldCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudG91Y2hTdXBwb3J0ZWQgJiYgZSBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLnZlcnRpY2FsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWZXJ0aWNhbE9mZnNldChlLnR5cGUgPT09ICd0b3VjaGVuZCcgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZIDogZS50b3VjaGVzWzBdLnBhZ2VZKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEhvcml6b250YWxPZmZzZXQoZS50eXBlID09PSAndG91Y2hlbmQnID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCA6IGUudG91Y2hlc1swXS5wYWdlWCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIE1vdXNlRXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLnZlcnRpY2FsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWZXJ0aWNhbE9mZnNldChlLnBhZ2VZKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEhvcml6b250YWxPZmZzZXQoZS5wYWdlWCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjb25zb2xlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2ludmFsaWQgZXZlbnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTYW5pdGl6ZXMgdGhlIG1vdXNlIG9mZnNldCB0byB0aGUgcmFuZ2Ugb2YgWzAsIDFdLlxyXG4gICAgICpcclxuICAgICAqIFdoZW4gdHJhY2tpbmcgdGhlIG1vdXNlIG91dHNpZGUgdGhlIHNlZWsgYmFyLCB0aGUgb2Zmc2V0IGNhbiBiZSBvdXRzaWRlIHRoZSBkZXNpcmVkIHJhbmdlIGFuZCB0aGlzIG1ldGhvZFxyXG4gICAgICogbGltaXRzIGl0IHRvIHRoZSBkZXNpcmVkIHJhbmdlLiBFLmcuIGEgbW91c2UgZXZlbnQgbGVmdCBvZiB0aGUgbGVmdCBlZGdlIG9mIGEgc2VlayBiYXIgeWllbGRzIGFuIG9mZnNldCBiZWxvd1xyXG4gICAgICogemVybywgYnV0IHRvIGRpc3BsYXkgdGhlIHNlZWsgdGFyZ2V0IG9uIHRoZSBzZWVrIGJhciwgd2UgbmVlZCB0byBsaW1pdCBpdCB0byB6ZXJvLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvZmZzZXQgdGhlIG9mZnNldCB0byBzYW5pdGl6ZVxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gdGhlIHNhbml0aXplZCBvZmZzZXQuXHJcbiAgICAgKi9cclxuICAgIFNlZWtCYXIucHJvdG90eXBlLnNhbml0aXplT2Zmc2V0ID0gZnVuY3Rpb24gKG9mZnNldCkge1xyXG4gICAgICAgIC8vIFNpbmNlIHdlIHRyYWNrIG1vdXNlIG1vdmVzIG92ZXIgdGhlIHdob2xlIGRvY3VtZW50LCB0aGUgdGFyZ2V0IGNhbiBiZSBvdXRzaWRlIHRoZSBzZWVrIHJhbmdlLFxyXG4gICAgICAgIC8vIGFuZCB3ZSBuZWVkIHRvIGxpbWl0IGl0IHRvIHRoZSBbMCwgMV0gcmFuZ2UuXHJcbiAgICAgICAgaWYgKG9mZnNldCA8IDApIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob2Zmc2V0ID4gMSkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2Zmc2V0O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIHBsYXliYWNrIHBvc2l0aW9uIGluZGljYXRvci5cclxuICAgICAqIEBwYXJhbSBwZXJjZW50IGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMTAwIGFzIHJldHVybmVkIGJ5IHRoZSBwbGF5ZXJcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuc2V0UGxheWJhY2tQb3NpdGlvbiA9IGZ1bmN0aW9uIChwZXJjZW50KSB7XHJcbiAgICAgICAgdGhpcy5wbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSA9IHBlcmNlbnQ7XHJcbiAgICAgICAgLy8gU2V0IHBvc2l0aW9uIG9mIHRoZSBiYXJcclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHRoaXMuc2Vla0JhclBsYXliYWNrUG9zaXRpb24sIHBlcmNlbnQpO1xyXG4gICAgICAgIC8vIFNldCBwb3NpdGlvbiBvZiB0aGUgbWFya2VyXHJcbiAgICAgICAgdmFyIHRvdGFsU2l6ZSA9ICh0aGlzLmNvbmZpZy52ZXJ0aWNhbCA/ICh0aGlzLnNlZWtCYXIuaGVpZ2h0KCkgLSB0aGlzLnNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uTWFya2VyLmhlaWdodCgpKSA6IHRoaXMuc2Vla0Jhci53aWR0aCgpKTtcclxuICAgICAgICB2YXIgcHggPSAodG90YWxTaXplKSAvIDEwMCAqIHBlcmNlbnQ7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnZlcnRpY2FsKSB7XHJcbiAgICAgICAgICAgIHB4ID0gdGhpcy5zZWVrQmFyLmhlaWdodCgpIC0gcHggLSB0aGlzLnNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uTWFya2VyLmhlaWdodCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmNvbmZpZy52ZXJ0aWNhbCA/XHJcbiAgICAgICAgICAgIC8vIC1tcy10cmFuc2Zvcm0gcmVxdWlyZWQgZm9yIElFOVxyXG4gICAgICAgICAgICB7ICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWSgnICsgcHggKyAncHgpJywgJy1tcy10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWSgnICsgcHggKyAncHgpJyB9IDpcclxuICAgICAgICAgICAgeyAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArIHB4ICsgJ3B4KScsICctbXMtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArIHB4ICsgJ3B4KScgfTtcclxuICAgICAgICB0aGlzLnNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uTWFya2VyLmNzcyhzdHlsZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWZyZXNoZXMgdGhlIHBsYXliYWNrIHBvc2l0aW9uLiBDYW4gYmUgdXNlZCBieSBzdWJjbGFzc2VzIHRvIHJlZnJlc2ggdGhlIHBvc2l0aW9uIHdoZW5cclxuICAgICAqIHRoZSBzaXplIG9mIHRoZSBjb21wb25lbnQgY2hhbmdlcy5cclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUucmVmcmVzaFBsYXliYWNrUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRQbGF5YmFja1Bvc2l0aW9uKHRoaXMucGxheWJhY2tQb3NpdGlvblBlcmNlbnRhZ2UpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgcG9zaXRpb24gdW50aWwgd2hpY2ggbWVkaWEgaXMgYnVmZmVyZWQuXHJcbiAgICAgKiBAcGFyYW0gcGVyY2VudCBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEwMFxyXG4gICAgICovXHJcbiAgICBTZWVrQmFyLnByb3RvdHlwZS5zZXRCdWZmZXJQb3NpdGlvbiA9IGZ1bmN0aW9uIChwZXJjZW50KSB7XHJcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbih0aGlzLnNlZWtCYXJCdWZmZXJQb3NpdGlvbiwgcGVyY2VudCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBwb3NpdGlvbiB3aGVyZSBhIHNlZWssIGlmIGV4ZWN1dGVkLCB3b3VsZCBqdW1wIHRvLlxyXG4gICAgICogQHBhcmFtIHBlcmNlbnQgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxMDBcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuc2V0U2Vla1Bvc2l0aW9uID0gZnVuY3Rpb24gKHBlcmNlbnQpIHtcclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHRoaXMuc2Vla0JhclNlZWtQb3NpdGlvbiwgcGVyY2VudCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGFjdHVhbCBwb3NpdGlvbiAod2lkdGggb3IgaGVpZ2h0KSBvZiBhIERPTSBlbGVtZW50IHRoYXQgcmVwcmVzZW50IGEgYmFyIGluIHRoZSBzZWVrIGJhci5cclxuICAgICAqIEBwYXJhbSBlbGVtZW50IHRoZSBlbGVtZW50IHRvIHNldCB0aGUgcG9zaXRpb24gZm9yXHJcbiAgICAgKiBAcGFyYW0gcGVyY2VudCBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEwMFxyXG4gICAgICovXHJcbiAgICBTZWVrQmFyLnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBwZXJjZW50KSB7XHJcbiAgICAgICAgdmFyIHNjYWxlID0gcGVyY2VudCAvIDEwMDtcclxuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmNvbmZpZy52ZXJ0aWNhbCA/XHJcbiAgICAgICAgICAgIC8vIC1tcy10cmFuc2Zvcm0gcmVxdWlyZWQgZm9yIElFOVxyXG4gICAgICAgICAgICB7ICd0cmFuc2Zvcm0nOiAnc2NhbGVZKCcgKyBzY2FsZSArICcpJywgJy1tcy10cmFuc2Zvcm0nOiAnc2NhbGVZKCcgKyBzY2FsZSArICcpJyB9IDpcclxuICAgICAgICAgICAgeyAndHJhbnNmb3JtJzogJ3NjYWxlWCgnICsgc2NhbGUgKyAnKScsICctbXMtdHJhbnNmb3JtJzogJ3NjYWxlWCgnICsgc2NhbGUgKyAnKScgfTtcclxuICAgICAgICBlbGVtZW50LmNzcyhzdHlsZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQdXRzIHRoZSBzZWVrIGJhciBpbnRvIG9yIG91dCBvZiBzZWVraW5nIHN0YXRlIGJ5IGFkZGluZy9yZW1vdmluZyBhIGNsYXNzIHRvIHRoZSBET00gZWxlbWVudC4gVGhpcyBjYW4gYmUgdXNlZFxyXG4gICAgICogdG8gYWRqdXN0IHRoZSBzdHlsaW5nIHdoaWxlIHNlZWtpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNlZWtpbmcgc2hvdWxkIGJlIHRydWUgd2hlbiBlbnRlcmluZyBzZWVrIHN0YXRlLCBmYWxzZSB3aGVuIGV4aXRpbmcgdGhlIHNlZWsgc3RhdGVcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuc2V0U2Vla2luZyA9IGZ1bmN0aW9uIChzZWVraW5nKSB7XHJcbiAgICAgICAgaWYgKHNlZWtpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoU2Vla0Jhci5DTEFTU19TRUVLSU5HKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcyhTZWVrQmFyLkNMQVNTX1NFRUtJTkcpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIHNlZWsgYmFyIGlzIGN1cnJlbnRseSBpbiB0aGUgc2VlayBzdGF0ZS5cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGluIHNlZWsgc3RhdGUsIGVsc2UgZmFsc2VcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuaXNTZWVraW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERvbUVsZW1lbnQoKS5oYXNDbGFzcyh0aGlzLnByZWZpeENzcyhTZWVrQmFyLkNMQVNTX1NFRUtJTkcpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGUgc2VlayBiYXIgaGFzIGEge0BsaW5rIFNlZWtCYXJMYWJlbH0uXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgc2VlayBiYXIgaGFzIGEgbGFiZWwsIGVsc2UgZmFsc2VcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuaGFzTGFiZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWwgIT0gbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGxhYmVsIG9mIHRoaXMgc2VlayBiYXIuXHJcbiAgICAgKiBAcmV0dXJucyB7U2Vla0JhckxhYmVsfSB0aGUgbGFiZWwgaWYgdGhpcyBzZWVrIGJhciBoYXMgYSBsYWJlbCwgZWxzZSBudWxsXHJcbiAgICAgKi9cclxuICAgIFNlZWtCYXIucHJvdG90eXBlLmdldExhYmVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxhYmVsO1xyXG4gICAgfTtcclxuICAgIFNlZWtCYXIucHJvdG90eXBlLm9uU2Vla0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2Vla0JhckV2ZW50cy5vblNlZWsuZGlzcGF0Y2godGhpcyk7XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUub25TZWVrUHJldmlld0V2ZW50ID0gZnVuY3Rpb24gKHBlcmNlbnRhZ2UsIHNjcnViYmluZykge1xyXG4gICAgICAgIHZhciBzbmFwcGVkTWFya2VyID0gdGhpcy5nZXRNYXJrZXJBdFBvc2l0aW9uKHBlcmNlbnRhZ2UpO1xyXG4gICAgICAgIGlmICh0aGlzLmxhYmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFiZWwuZ2V0RG9tRWxlbWVudCgpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnbGVmdCc6IChzbmFwcGVkTWFya2VyID8gc25hcHBlZE1hcmtlci50aW1lIDogcGVyY2VudGFnZSkgKyAnJScsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlZWtCYXJFdmVudHMub25TZWVrUHJldmlldy5kaXNwYXRjaCh0aGlzLCB7XHJcbiAgICAgICAgICAgIHNjcnViYmluZzogc2NydWJiaW5nLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogcGVyY2VudGFnZSxcclxuICAgICAgICAgICAgbWFya2VyOiBzbmFwcGVkTWFya2VyLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNlZWtCYXIucHJvdG90eXBlLm9uU2Vla2VkRXZlbnQgPSBmdW5jdGlvbiAocGVyY2VudGFnZSkge1xyXG4gICAgICAgIHRoaXMuc2Vla0JhckV2ZW50cy5vblNlZWtlZC5kaXNwYXRjaCh0aGlzLCBwZXJjZW50YWdlKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2Vla0Jhci5wcm90b3R5cGUsIFwib25TZWVrXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gYSBzY3J1YmJpbmcgc2VlayBvcGVyYXRpb24gaXMgc3RhcnRlZC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnQ8U2Vla0JhciwgTm9BcmdzPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2Vla0JhckV2ZW50cy5vblNlZWsuZ2V0RXZlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZWVrQmFyLnByb3RvdHlwZSwgXCJvblNlZWtQcmV2aWV3XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIGR1cmluZyBhIHNjcnViYmluZyBzZWVrICh0byBpbmRpY2F0ZSB0aGF0IHRoZSBzZWVrIHByZXZpZXcsIGkuZS4gdGhlIHZpZGVvIGZyYW1lLFxyXG4gICAgICAgICAqIHNob3VsZCBiZSB1cGRhdGVkKSwgb3IgZHVyaW5nIGEgbm9ybWFsIHNlZWsgcHJldmlldyB3aGVuIHRoZSBzZWVrIGJhciBpcyBob3ZlcmVkIChhbmQgdGhlIHNlZWsgdGFyZ2V0LFxyXG4gICAgICAgICAqIGkuZS4gdGhlIHNlZWsgYmFyIGxhYmVsLCBzaG91bGQgYmUgdXBkYXRlZCkuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PFNlZWtCYXIsIFNlZWtQcmV2aWV3RXZlbnRBcmdzPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2Vla0JhckV2ZW50cy5vblNlZWtQcmV2aWV3LmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2Vla0Jhci5wcm90b3R5cGUsIFwib25TZWVrZWRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiBhIHNjcnViYmluZyBzZWVrIGhhcyBmaW5pc2hlZCBvciB3aGVuIGEgZGlyZWN0IHNlZWsgaXMgaXNzdWVkLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudDxTZWVrQmFyLCBudW1iZXI+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWVrQmFyRXZlbnRzLm9uU2Vla2VkLmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBTZWVrQmFyLnByb3RvdHlwZS5vblNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLm9uU2hvd0V2ZW50LmNhbGwodGhpcyk7XHJcbiAgICAgICAgLy8gUmVmcmVzaCB0aGUgcG9zaXRpb24gb2YgdGhlIHBsYXliYWNrIHBvc2l0aW9uIHdoZW4gdGhlIHNlZWsgYmFyIGJlY29tZXMgdmlzaWJsZS4gVG8gY29ycmVjdGx5IHNldCB0aGUgcG9zaXRpb24sXHJcbiAgICAgICAgLy8gdGhlIERPTSBlbGVtZW50IG11c3QgYmUgZnVsbHkgaW5pdGlhbGl6ZWQgYW4gaGF2ZSBpdHMgc2l6ZSBjYWxjdWxhdGVkLCBiZWNhdXNlIHRoZSBwb3NpdGlvbiBpcyBzZXQgYXMgYW4gYWJzb2x1dGVcclxuICAgICAgICAvLyB2YWx1ZSBjYWxjdWxhdGVkIGZyb20gdGhlIHNpemUuIFRoaXMgcmVxdWlyZWQgc2l6ZSBpcyBub3Qga25vd24gd2hlbiBpdCBpcyBoaWRkZW4uXHJcbiAgICAgICAgLy8gRm9yIHN1Y2ggY2FzZXMsIHdlIHJlZnJlc2ggdGhlIHBvc2l0aW9uIGhlcmUgaW4gb25TaG93IGJlY2F1c2UgaGVyZSBpdCBpcyBndWFyYW50ZWVkIHRoYXQgdGhlIGNvbXBvbmVudCBrbm93c1xyXG4gICAgICAgIC8vIGl0cyBzaXplIGFuZCBjYW4gc2V0IHRoZSBwb3NpdGlvbiBjb3JyZWN0bHkuXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTZWVrQmFyO1xyXG59KGNvbXBvbmVudF8xLkNvbXBvbmVudCkpO1xyXG5TZWVrQmFyLlNNT09USF9QTEFZQkFDS19QT1NJVElPTl9VUERBVEVfRElTQUJMRUQgPSAtMTtcclxuLyoqXHJcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCBpcyBhZGRlZCB0byB0aGUgRE9NIGVsZW1lbnQgd2hpbGUgdGhlIHNlZWsgYmFyIGlzIGluICdzZWVraW5nJyBzdGF0ZS5cclxuICovXHJcblNlZWtCYXIuQ0xBU1NfU0VFS0lORyA9ICdzZWVraW5nJztcclxuZXhwb3J0cy5TZWVrQmFyID0gU2Vla0JhcjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3NlZWtiYXIudHNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTdHJpbmdVdGlscztcclxuKGZ1bmN0aW9uIChTdHJpbmdVdGlscykge1xyXG4gICAgU3RyaW5nVXRpbHMuRk9STUFUX0hITU1TUyA9ICdoaDptbTpzcyc7XHJcbiAgICBTdHJpbmdVdGlscy5GT1JNQVRfTU1TUyA9ICdtbTpzcyc7XHJcbiAgICAvKipcclxuICAgICAqIEZvcm1hdHMgYSBudW1iZXIgb2Ygc2Vjb25kcyBpbnRvIGEgdGltZSBzdHJpbmcgd2l0aCB0aGUgcGF0dGVybiBoaDptbTpzcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdG90YWxTZWNvbmRzIHRoZSB0b3RhbCBudW1iZXIgb2Ygc2Vjb25kcyB0byBmb3JtYXQgdG8gc3RyaW5nXHJcbiAgICAgKiBAcGFyYW0gZm9ybWF0IHRoZSB0aW1lIGZvcm1hdCB0byBvdXRwdXQgKGRlZmF1bHQ6IGhoOm1tOnNzKVxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIGZvcm1hdHRlZCB0aW1lIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzZWNvbmRzVG9UaW1lKHRvdGFsU2Vjb25kcywgZm9ybWF0KSB7XHJcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7IGZvcm1hdCA9IFN0cmluZ1V0aWxzLkZPUk1BVF9ISE1NU1M7IH1cclxuICAgICAgICB2YXIgaXNOZWdhdGl2ZSA9IHRvdGFsU2Vjb25kcyA8IDA7XHJcbiAgICAgICAgaWYgKGlzTmVnYXRpdmUpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHRpbWUgaXMgbmVnYXRpdmUsIHdlIG1ha2UgaXQgcG9zaXRpdmUgZm9yIHRoZSBjYWxjdWxhdGlvbiBiZWxvd1xyXG4gICAgICAgICAgICAvLyAoZWxzZSB3ZSdkIGdldCBhbGwgbmVnYXRpdmUgbnVtYmVycykgYW5kIHJlYXR0YWNoIHRoZSBuZWdhdGl2ZSBzaWduIGxhdGVyLlxyXG4gICAgICAgICAgICB0b3RhbFNlY29uZHMgPSAtdG90YWxTZWNvbmRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTcGxpdCBpbnRvIHNlcGFyYXRlIHRpbWUgcGFydHNcclxuICAgICAgICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDM2MDApO1xyXG4gICAgICAgIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcih0b3RhbFNlY29uZHMgLyA2MCkgLSBob3VycyAqIDYwO1xyXG4gICAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcih0b3RhbFNlY29uZHMpICUgNjA7XHJcbiAgICAgICAgcmV0dXJuIChpc05lZ2F0aXZlID8gJy0nIDogJycpICsgZm9ybWF0XHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCdoaCcsIGxlZnRQYWRXaXRoWmVyb3MoaG91cnMsIDIpKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgnbW0nLCBsZWZ0UGFkV2l0aFplcm9zKG1pbnV0ZXMsIDIpKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgnc3MnLCBsZWZ0UGFkV2l0aFplcm9zKHNlY29uZHMsIDIpKTtcclxuICAgIH1cclxuICAgIFN0cmluZ1V0aWxzLnNlY29uZHNUb1RpbWUgPSBzZWNvbmRzVG9UaW1lO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0cyBhIG51bWJlciB0byBhIHN0cmluZyBhbmQgbGVmdC1wYWRzIGl0IHdpdGggemVyb3MgdG8gdGhlIHNwZWNpZmllZCBsZW5ndGguXHJcbiAgICAgKiBFeGFtcGxlOiBsZWZ0UGFkV2l0aFplcm9zKDEyMywgNSkgPT4gJzAwMTIzJ1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBudW0gdGhlIG51bWJlciB0byBjb252ZXJ0IHRvIHN0cmluZyBhbmQgcGFkIHdpdGggemVyb3NcclxuICAgICAqIEBwYXJhbSBsZW5ndGggdGhlIGRlc2lyZWQgbGVuZ3RoIG9mIHRoZSBwYWRkZWQgc3RyaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgcGFkZGVkIG51bWJlciBhcyBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbGVmdFBhZFdpdGhaZXJvcyhudW0sIGxlbmd0aCkge1xyXG4gICAgICAgIHZhciB0ZXh0ID0gbnVtICsgJyc7XHJcbiAgICAgICAgdmFyIHBhZGRpbmcgPSAnMDAwMDAwMDAwMCcuc3Vic3RyKDAsIGxlbmd0aCAtIHRleHQubGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gcGFkZGluZyArIHRleHQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEZpbGxzIG91dCBwbGFjZWhvbGRlcnMgaW4gYW4gYWQgbWVzc2FnZS5cclxuICAgICAqXHJcbiAgICAgKiBIYXMgdGhlIHBsYWNlaG9sZGVycyAne3JlbWFpbmluZ1RpbWVbZm9ybWF0U3RyaW5nXX0nLCAne3BsYXllZFRpbWVbZm9ybWF0U3RyaW5nXX0nIGFuZFxyXG4gICAgICogJ3thZER1cmF0aW9uW2Zvcm1hdFN0cmluZ119Jywgd2hpY2ggYXJlIHJlcGxhY2VkIGJ5IHRoZSByZW1haW5pbmcgdGltZSB1bnRpbCB0aGUgYWQgY2FuIGJlIHNraXBwZWQsIHRoZSBjdXJyZW50XHJcbiAgICAgKiB0aW1lIG9yIHRoZSBhZCBkdXJhdGlvbi4gVGhlIGZvcm1hdCBzdHJpbmcgaXMgb3B0aW9uYWwuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSBwbGFjZWhvbGRlciBpcyByZXBsYWNlZCBieSB0aGUgdGltZVxyXG4gICAgICogaW4gc2Vjb25kcy4gSWYgc3BlY2lmaWVkLCBpdCBtdXN0IGJlIG9mIHRoZSBmb2xsb3dpbmcgZm9ybWF0OlxyXG4gICAgICogLSAlZCAtIEluc2VydHMgdGhlIHRpbWUgYXMgYW4gaW50ZWdlci5cclxuICAgICAqIC0gJTBOZCAtIEluc2VydHMgdGhlIHRpbWUgYXMgYW4gaW50ZWdlciB3aXRoIGxlYWRpbmcgemVyb2VzLCBpZiB0aGUgbGVuZ3RoIG9mIHRoZSB0aW1lIHN0cmluZyBpcyBzbWFsbGVyIHRoYW4gTi5cclxuICAgICAqIC0gJWYgLSBJbnNlcnRzIHRoZSB0aW1lIGFzIGEgZmxvYXQuXHJcbiAgICAgKiAtICUwTmYgLSBJbnNlcnRzIHRoZSB0aW1lIGFzIGEgZmxvYXQgd2l0aCBsZWFkaW5nIHplcm9lcy5cclxuICAgICAqIC0gJS5NZiAtIEluc2VydHMgdGhlIHRpbWUgYXMgYSBmbG9hdCB3aXRoIE0gZGVjaW1hbCBwbGFjZXMuIENhbiBiZSBjb21iaW5lZCB3aXRoICUwTmYsIGUuZy4gJTA0LjJmICh0aGUgdGltZVxyXG4gICAgICogMTAuMTIzXHJcbiAgICAgKiB3b3VsZCBiZSBwcmludGVkIGFzIDAwMTAuMTIpLlxyXG4gICAgICogLSAlaGg6bW06c3NcclxuICAgICAqIC0gJW1tOnNzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFkTWVzc2FnZSBhbiBhZCBtZXNzYWdlIHdpdGggb3B0aW9uYWwgcGxhY2Vob2xkZXJzIHRvIGZpbGxcclxuICAgICAqIEBwYXJhbSBza2lwT2Zmc2V0IGlmIHNwZWNpZmllZCwge3JlbWFpbmluZ1RpbWV9IHdpbGwgYmUgZmlsbGVkIHdpdGggdGhlIHJlbWFpbmluZyB0aW1lIHVudGlsIHRoZSBhZCBjYW4gYmUgc2tpcHBlZFxyXG4gICAgICogQHBhcmFtIHBsYXllciB0aGUgcGxheWVyIHRvIGdldCB0aGUgdGltZSBkYXRhIGZyb21cclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBhZCBtZXNzYWdlIHdpdGggZmlsbGVkIHBsYWNlaG9sZGVyc1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiByZXBsYWNlQWRNZXNzYWdlUGxhY2Vob2xkZXJzKGFkTWVzc2FnZSwgc2tpcE9mZnNldCwgcGxheWVyKSB7XHJcbiAgICAgICAgdmFyIGFkTWVzc2FnZVBsYWNlaG9sZGVyUmVnZXggPSBuZXcgUmVnRXhwKCdcXFxceyhyZW1haW5pbmdUaW1lfHBsYXllZFRpbWV8YWREdXJhdGlvbikofXwlKCgwWzEtOV1cXFxcZCooXFxcXC5cXFxcZCsoZHxmKXxkfGYpfFxcXFwuXFxcXGQrZnxkfGYpfGhoOm1tOnNzfG1tOnNzKX0pJywgJ2cnKTtcclxuICAgICAgICByZXR1cm4gYWRNZXNzYWdlLnJlcGxhY2UoYWRNZXNzYWdlUGxhY2Vob2xkZXJSZWdleCwgZnVuY3Rpb24gKGZvcm1hdFN0cmluZykge1xyXG4gICAgICAgICAgICB2YXIgdGltZSA9IDA7XHJcbiAgICAgICAgICAgIGlmIChmb3JtYXRTdHJpbmcuaW5kZXhPZigncmVtYWluaW5nVGltZScpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChza2lwT2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZSA9IE1hdGguY2VpbChza2lwT2Zmc2V0IC0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZSA9IHBsYXllci5nZXREdXJhdGlvbigpIC0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZm9ybWF0U3RyaW5nLmluZGV4T2YoJ3BsYXllZFRpbWUnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lID0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZm9ybWF0U3RyaW5nLmluZGV4T2YoJ2FkRHVyYXRpb24nKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lID0gcGxheWVyLmdldER1cmF0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdE51bWJlcih0aW1lLCBmb3JtYXRTdHJpbmcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgU3RyaW5nVXRpbHMucmVwbGFjZUFkTWVzc2FnZVBsYWNlaG9sZGVycyA9IHJlcGxhY2VBZE1lc3NhZ2VQbGFjZWhvbGRlcnM7XHJcbiAgICBmdW5jdGlvbiBmb3JtYXROdW1iZXIodGltZSwgZm9ybWF0KSB7XHJcbiAgICAgICAgdmFyIGZvcm1hdFN0cmluZ1ZhbGlkYXRpb25SZWdleCA9IC8lKCgwWzEtOV1cXGQqKFxcLlxcZCsoZHxmKXxkfGYpfFxcLlxcZCtmfGR8Zil8aGg6bW06c3N8bW06c3MpLztcclxuICAgICAgICB2YXIgbGVhZGluZ1plcm9lc1JlZ2V4ID0gLyglMFsxLTldXFxkKikoPz0oXFwuXFxkK2Z8ZnxkKSkvO1xyXG4gICAgICAgIHZhciBkZWNpbWFsUGxhY2VzUmVnZXggPSAvXFwuXFxkKig/PWYpLztcclxuICAgICAgICBpZiAoIWZvcm1hdFN0cmluZ1ZhbGlkYXRpb25SZWdleC50ZXN0KGZvcm1hdCkpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGZvcm1hdCBpcyBpbnZhbGlkLCB3ZSBzZXQgYSBkZWZhdWx0IGZhbGxiYWNrIGZvcm1hdFxyXG4gICAgICAgICAgICBmb3JtYXQgPSAnJWQnO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBsZWFkaW5nIHplcm9zXHJcbiAgICAgICAgdmFyIGxlYWRpbmdaZXJvZXMgPSAwO1xyXG4gICAgICAgIHZhciBsZWFkaW5nWmVyb2VzTWF0Y2hlcyA9IGZvcm1hdC5tYXRjaChsZWFkaW5nWmVyb2VzUmVnZXgpO1xyXG4gICAgICAgIGlmIChsZWFkaW5nWmVyb2VzTWF0Y2hlcykge1xyXG4gICAgICAgICAgICBsZWFkaW5nWmVyb2VzID0gcGFyc2VJbnQobGVhZGluZ1plcm9lc01hdGNoZXNbMF0uc3Vic3RyaW5nKDIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXNcclxuICAgICAgICB2YXIgbnVtRGVjaW1hbFBsYWNlcyA9IG51bGw7XHJcbiAgICAgICAgdmFyIGRlY2ltYWxQbGFjZXNNYXRjaGVzID0gZm9ybWF0Lm1hdGNoKGRlY2ltYWxQbGFjZXNSZWdleCk7XHJcbiAgICAgICAgaWYgKGRlY2ltYWxQbGFjZXNNYXRjaGVzICYmICFpc05hTihwYXJzZUludChkZWNpbWFsUGxhY2VzTWF0Y2hlc1swXS5zdWJzdHJpbmcoMSkpKSkge1xyXG4gICAgICAgICAgICBudW1EZWNpbWFsUGxhY2VzID0gcGFyc2VJbnQoZGVjaW1hbFBsYWNlc01hdGNoZXNbMF0uc3Vic3RyaW5nKDEpKTtcclxuICAgICAgICAgICAgaWYgKG51bURlY2ltYWxQbGFjZXMgPiAyMCkge1xyXG4gICAgICAgICAgICAgICAgbnVtRGVjaW1hbFBsYWNlcyA9IDIwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEZsb2F0IGZvcm1hdFxyXG4gICAgICAgIGlmIChmb3JtYXQuaW5kZXhPZignZicpID4gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHRpbWVTdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgaWYgKG51bURlY2ltYWxQbGFjZXMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IGZpeGVkIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlc1xyXG4gICAgICAgICAgICAgICAgdGltZVN0cmluZyA9IHRpbWUudG9GaXhlZChudW1EZWNpbWFsUGxhY2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRpbWVTdHJpbmcgPSAnJyArIHRpbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQXBwbHkgbGVhZGluZyB6ZXJvc1xyXG4gICAgICAgICAgICBpZiAodGltZVN0cmluZy5pbmRleE9mKCcuJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxlZnRQYWRXaXRoWmVyb3ModGltZVN0cmluZywgdGltZVN0cmluZy5sZW5ndGggKyAobGVhZGluZ1plcm9lcyAtIHRpbWVTdHJpbmcuaW5kZXhPZignLicpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVmdFBhZFdpdGhaZXJvcyh0aW1lU3RyaW5nLCBsZWFkaW5nWmVyb2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmb3JtYXQuaW5kZXhPZignOicpID4gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsU2Vjb25kcyA9IE1hdGguY2VpbCh0aW1lKTtcclxuICAgICAgICAgICAgLy8gaGg6bW06c3MgZm9ybWF0XHJcbiAgICAgICAgICAgIGlmIChmb3JtYXQuaW5kZXhPZignaGgnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vjb25kc1RvVGltZSh0b3RhbFNlY29uZHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDYwKTtcclxuICAgICAgICAgICAgICAgIHZhciBzZWNvbmRzID0gdG90YWxTZWNvbmRzICUgNjA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVmdFBhZFdpdGhaZXJvcyhtaW51dGVzLCAyKSArICc6JyArIGxlZnRQYWRXaXRoWmVyb3Moc2Vjb25kcywgMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZWZ0UGFkV2l0aFplcm9zKE1hdGguY2VpbCh0aW1lKSwgbGVhZGluZ1plcm9lcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShTdHJpbmdVdGlscyA9IGV4cG9ydHMuU3RyaW5nVXRpbHMgfHwgKGV4cG9ydHMuU3RyaW5nVXRpbHMgPSB7fSkpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL3N0cmluZ3V0aWxzLnRzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29udGFpbmVyXCIpO1xyXG52YXIgdWl1dGlsc18xID0gcmVxdWlyZShcIi4uL3VpdXRpbHNcIik7XHJcbnZhciBzcGFjZXJfMSA9IHJlcXVpcmUoXCIuL3NwYWNlclwiKTtcclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBtYWluIHBsYXllciBjb250cm9sIGNvbXBvbmVudHMsIGUuZy4gcGxheSB0b2dnbGUgYnV0dG9uLCBzZWVrIGJhciwgdm9sdW1lIGNvbnRyb2wsIGZ1bGxzY3JlZW4gdG9nZ2xlXHJcbiAqIGJ1dHRvbi5cclxuICovXHJcbnZhciBDb250cm9sQmFyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDb250cm9sQmFyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ29udHJvbEJhcihjb25maWcsIGF1dG9IaWRlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWNvbnRyb2xiYXInLFxyXG4gICAgICAgICAgICBoaWRkZW46IGF1dG9IaWRlLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQ29udHJvbEJhci5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIC8vIENvdW50cyBob3cgbWFueSBjb21wb25lbnRzIGFyZSBob3ZlcmVkIGFuZCBibG9jayBoaWRpbmcgb2YgdGhlIGNvbnRyb2wgYmFyXHJcbiAgICAgICAgdmFyIGhvdmVyU3RhY2tDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gVHJhY2sgaG92ZXIgc3RhdHVzIG9mIGNoaWxkIGNvbXBvbmVudHNcclxuICAgICAgICB1aXV0aWxzXzEuVUlVdGlscy50cmF2ZXJzZVRyZWUodGhpcywgZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3QgdHJhY2sgaG92ZXIgc3RhdHVzIG9mIGNoaWxkIGNvbnRhaW5lcnMgb3Igc3BhY2Vycywgb25seSBvZiAncmVhbCcgY29udHJvbHNcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCBpbnN0YW5jZW9mIGNvbnRhaW5lcl8xLkNvbnRhaW5lciB8fCBjb21wb25lbnQgaW5zdGFuY2VvZiBzcGFjZXJfMS5TcGFjZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTdWJzY3JpYmUgaG92ZXIgZXZlbnQgYW5kIGtlZXAgYSBjb3VudCBvZiB0aGUgbnVtYmVyIG9mIGhvdmVyZWQgY2hpbGRyZW5cclxuICAgICAgICAgICAgY29tcG9uZW50Lm9uSG92ZXJDaGFuZ2VkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5ob3ZlcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJTdGFja0NvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBob3ZlclN0YWNrQ291bnQtLTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uQ29udHJvbHNTaG93LnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5oaWRkZW4pIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uUHJldmlld0NvbnRyb2xzSGlkZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgICAgICAvLyBDYW5jZWwgdGhlIGhpZGUgZXZlbnQgaWYgaG92ZXJlZCBjaGlsZCBjb21wb25lbnRzIGJsb2NrIGhpZGluZ1xyXG4gICAgICAgICAgICBhcmdzLmNhbmNlbCA9IChob3ZlclN0YWNrQ291bnQgPiAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB1aW1hbmFnZXIub25Db250cm9sc0hpZGUuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmhpZGRlbikge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29udHJvbEJhcjtcclxufShjb250YWluZXJfMS5Db250YWluZXIpKTtcclxuZXhwb3J0cy5Db250cm9sQmFyID0gQ29udHJvbEJhcjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2NvbnRyb2xiYXIudHNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvY29udGFpbmVyXCIpO1xyXG52YXIgVUlVdGlscztcclxuKGZ1bmN0aW9uIChVSVV0aWxzKSB7XHJcbiAgICBmdW5jdGlvbiB0cmF2ZXJzZVRyZWUoY29tcG9uZW50LCB2aXNpdCkge1xyXG4gICAgICAgIHZhciByZWN1cnNpdmVUcmVlV2Fsa2VyID0gZnVuY3Rpb24gKGNvbXBvbmVudCwgcGFyZW50KSB7XHJcbiAgICAgICAgICAgIHZpc2l0KGNvbXBvbmVudCwgcGFyZW50KTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgY29tcG9uZW50IGlzIGEgY29udGFpbmVyLCB2aXNpdCBpdCdzIGNoaWxkcmVuXHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgaW5zdGFuY2VvZiBjb250YWluZXJfMS5Db250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBjb21wb25lbnQuZ2V0Q29tcG9uZW50cygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZENvbXBvbmVudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVUcmVlV2Fsa2VyKGNoaWxkQ29tcG9uZW50LCBjb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBXYWxrIGFuZCBjb25maWd1cmUgdGhlIGNvbXBvbmVudCB0cmVlXHJcbiAgICAgICAgcmVjdXJzaXZlVHJlZVdhbGtlcihjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgVUlVdGlscy50cmF2ZXJzZVRyZWUgPSB0cmF2ZXJzZVRyZWU7XHJcbn0pKFVJVXRpbHMgPSBleHBvcnRzLlVJVXRpbHMgfHwgKGV4cG9ydHMuVUlVdGlscyA9IHt9KSk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvdWl1dGlscy50c1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbnRhaW5lclwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4uL2RvbVwiKTtcclxudmFyIHRpbWVvdXRfMSA9IHJlcXVpcmUoXCIuLi90aW1lb3V0XCIpO1xyXG52YXIgcGxheWVydXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9wbGF5ZXJ1dGlsc1wiKTtcclxuLyoqXHJcbiAqIFRoZSBiYXNlIGNvbnRhaW5lciB0aGF0IGNvbnRhaW5zIGFsbCBvZiB0aGUgVUkuIFRoZSBVSUNvbnRhaW5lciBpcyBwYXNzZWQgdG8gdGhlIHtAbGluayBVSU1hbmFnZXJ9IHRvIGJ1aWxkIGFuZFxyXG4gKiBzZXR1cCB0aGUgVUkuXHJcbiAqL1xyXG52YXIgVUlDb250YWluZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFVJQ29udGFpbmVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVUlDb250YWluZXIoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXVpY29udGFpbmVyJyxcclxuICAgICAgICAgICAgaGlkZURlbGF5OiAyNTAwLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVUlDb250YWluZXIucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuY29uZmlndXJlVUlTaG93SGlkZShwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVQbGF5ZXJTdGF0ZXMocGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgfTtcclxuICAgIFVJQ29udGFpbmVyLnByb3RvdHlwZS5jb25maWd1cmVVSVNob3dIaWRlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5nZXREb21FbGVtZW50KCk7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5oaWRlRGVsYXkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHVpbWFuYWdlci5vbkNvbmZpZ3VyZWQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVpbWFuYWdlci5vbkNvbnRyb2xzU2hvdy5kaXNwYXRjaChfdGhpcyk7IH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpc1VpU2hvd24gPSBmYWxzZTtcclxuICAgICAgICB2YXIgaXNTZWVraW5nID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGlzRmlyc3RUb3VjaCA9IHRydWU7XHJcbiAgICAgICAgdmFyIHNob3dVaSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFpc1VpU2hvd24pIHtcclxuICAgICAgICAgICAgICAgIC8vIExldCBzdWJzY3JpYmVycyBrbm93IHRoYXQgdGhleSBzaG91bGQgcmV2ZWFsIHRoZW1zZWx2ZXNcclxuICAgICAgICAgICAgICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzU2hvdy5kaXNwYXRjaChfdGhpcyk7XHJcbiAgICAgICAgICAgICAgICBpc1VpU2hvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIERvbid0IHRyaWdnZXIgdGltZW91dCB3aGlsZSBzZWVraW5nIChpdCB3aWxsIGJlIHRyaWdnZXJlZCBvbmNlIHRoZSBzZWVrIGlzIGZpbmlzaGVkKSBvciBjYXN0aW5nXHJcbiAgICAgICAgICAgIGlmICghaXNTZWVraW5nICYmICFwbGF5ZXIuaXNDYXN0aW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnVpSGlkZVRpbWVvdXQuc3RhcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGhpZGVVaSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gSGlkZSB0aGUgVUkgb25seSBpZiBpdCBpcyBzaG93biwgYW5kIGlmIG5vdCBjYXN0aW5nXHJcbiAgICAgICAgICAgIGlmIChpc1VpU2hvd24gJiYgIXBsYXllci5pc0Nhc3RpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSXNzdWUgYSBwcmV2aWV3IGV2ZW50IHRvIGNoZWNrIGlmIHdlIGFyZSBnb29kIHRvIGhpZGUgdGhlIGNvbnRyb2xzXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJldmlld0hpZGVFdmVudEFyZ3MgPSB7fTtcclxuICAgICAgICAgICAgICAgIHVpbWFuYWdlci5vblByZXZpZXdDb250cm9sc0hpZGUuZGlzcGF0Y2goX3RoaXMsIHByZXZpZXdIaWRlRXZlbnRBcmdzKTtcclxuICAgICAgICAgICAgICAgIGlmICghcHJldmlld0hpZGVFdmVudEFyZ3MuY2FuY2VsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHByZXZpZXcgd2Fzbid0IGNhbmNlbGVkLCBsZXQgc3Vic2NyaWJlcnMga25vdyB0aGF0IHRoZXkgc2hvdWxkIG5vdyBoaWRlIHRoZW1zZWx2ZXNcclxuICAgICAgICAgICAgICAgICAgICB1aW1hbmFnZXIub25Db250cm9sc0hpZGUuZGlzcGF0Y2goX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzVWlTaG93biA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhpZGUgcHJldmlldyB3YXMgY2FuY2VsZWQsIGNvbnRpbnVlIHRvIHNob3cgVUlcclxuICAgICAgICAgICAgICAgICAgICBzaG93VWkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gVGltZW91dCB0byBkZWZlciBVSSBoaWRpbmcgYnkgdGhlIGNvbmZpZ3VyZWQgZGVsYXkgdGltZVxyXG4gICAgICAgIHRoaXMudWlIaWRlVGltZW91dCA9IG5ldyB0aW1lb3V0XzEuVGltZW91dChjb25maWcuaGlkZURlbGF5LCBoaWRlVWkpO1xyXG4gICAgICAgIC8vIE9uIHRvdWNoIGRpc3BsYXlzLCB0aGUgZmlyc3QgdG91Y2ggcmV2ZWFscyB0aGUgVUlcclxuICAgICAgICBjb250YWluZXIub24oJ3RvdWNoZW5kJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCFpc1VpU2hvd24pIHtcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgaWYgdGhlIFVJIGlzIGhpZGRlbiwgd2UgcHJldmVudCBvdGhlciBhY3Rpb25zIChleGNlcHQgZm9yIHRoZSBmaXJzdCB0b3VjaCkgYW5kIHJldmVhbCB0aGUgVUkgaW5zdGVhZC5cclxuICAgICAgICAgICAgICAgIC8vIFRoZSBmaXJzdCB0b3VjaCBpcyBub3QgcHJldmVudGVkIHRvIGxldCBvdGhlciBsaXN0ZW5lcnMgcmVjZWl2ZSB0aGUgZXZlbnQgYW5kIHRyaWdnZXIgYW4gaW5pdGlhbCBhY3Rpb24sIGUuZy5cclxuICAgICAgICAgICAgICAgIC8vIHRoZSBodWdlIHBsYXliYWNrIGJ1dHRvbiBjYW4gZGlyZWN0bHkgc3RhcnQgcGxheWJhY2sgaW5zdGVhZCBvZiByZXF1aXJpbmcgYSBkb3VibGUgdGFwIHdoaWNoIDEuIHJldmVhbHNcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBVSSBhbmQgMi4gc3RhcnRzIHBsYXliYWNrLlxyXG4gICAgICAgICAgICAgICAgaWYgKGlzRmlyc3RUb3VjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRmlyc3RUb3VjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2hvd1VpKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBXaGVuIHRoZSBtb3VzZSBlbnRlcnMsIHdlIHNob3cgdGhlIFVJXHJcbiAgICAgICAgY29udGFpbmVyLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzaG93VWkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBXaGVuIHRoZSBtb3VzZSBtb3ZlcyB3aXRoaW4sIHdlIHNob3cgdGhlIFVJXHJcbiAgICAgICAgY29udGFpbmVyLm9uKCdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNob3dVaSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFdoZW4gdGhlIG1vdXNlIGxlYXZlcywgd2UgY2FuIHByZXBhcmUgdG8gaGlkZSB0aGUgVUksIGV4Y2VwdCBhIHNlZWsgaXMgZ29pbmcgb25cclxuICAgICAgICBjb250YWluZXIub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gYSBzZWVrIGlzIGdvaW5nIG9uLCB0aGUgc2VlayBzY3J1YiBwb2ludGVyIG1heSBleGl0IHRoZSBVSSBhcmVhIHdoaWxlIHN0aWxsIHNlZWtpbmcsIGFuZCB3ZSBkbyBub3QgaGlkZVxyXG4gICAgICAgICAgICAvLyB0aGUgVUkgaW4gc3VjaCBjYXNlc1xyXG4gICAgICAgICAgICBpZiAoIWlzU2Vla2luZykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudWlIaWRlVGltZW91dC5zdGFydCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uU2Vlay5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy51aUhpZGVUaW1lb3V0LmNsZWFyKCk7IC8vIERvbid0IGhpZGUgVUkgd2hpbGUgYSBzZWVrIGlzIGluIHByb2dyZXNzXHJcbiAgICAgICAgICAgIGlzU2Vla2luZyA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uU2Vla2VkLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlzU2Vla2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBfdGhpcy51aUhpZGVUaW1lb3V0LnN0YXJ0KCk7IC8vIFJlLWVuYWJsZSBVSSBoaWRlIHRpbWVvdXQgYWZ0ZXIgYSBzZWVrXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9TVEFSVEVELCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNob3dVaSgpOyAvLyBTaG93IFVJIHdoZW4gYSBDYXN0IHNlc3Npb24gaGFzIHN0YXJ0ZWQgKFVJIHdpbGwgdGhlbiBzdGF5IHBlcm1hbmVudGx5IG9uIGR1cmluZyB0aGUgc2Vzc2lvbilcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBVSUNvbnRhaW5lci5wcm90b3R5cGUuY29uZmlndXJlUGxheWVyU3RhdGVzID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5nZXREb21FbGVtZW50KCk7XHJcbiAgICAgICAgLy8gQ29udmVydCBwbGF5ZXIgc3RhdGVzIGludG8gQ1NTIGNsYXNzIG5hbWVzXHJcbiAgICAgICAgdmFyIHN0YXRlQ2xhc3NOYW1lcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIHN0YXRlIGluIHBsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuUGxheWVyU3RhdGUpIHtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihzdGF0ZSkpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW51bU5hbWUgPSBwbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLlBsYXllclN0YXRlW3BsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuUGxheWVyU3RhdGVbc3RhdGVdXTtcclxuICAgICAgICAgICAgICAgIHN0YXRlQ2xhc3NOYW1lc1twbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLlBsYXllclN0YXRlW3N0YXRlXV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLlNUQVRFX1BSRUZJWCArIGVudW1OYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZW1vdmVTdGF0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5JRExFXSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QUkVQQVJFRF0pO1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3Moc3RhdGVDbGFzc05hbWVzW3BsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUExBWUlOR10pO1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3Moc3RhdGVDbGFzc05hbWVzW3BsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUEFVU0VEXSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5GSU5JU0hFRF0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUkVBRFksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVtb3ZlU3RhdGVzKCk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QUkVQQVJFRF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BMQVksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVtb3ZlU3RhdGVzKCk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QTEFZSU5HXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUEFVU0VELCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVN0YXRlcygpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3Moc3RhdGVDbGFzc05hbWVzW3BsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUEFVU0VEXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWUJBQ0tfRklOSVNIRUQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVtb3ZlU3RhdGVzKCk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5GSU5JU0hFRF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NPVVJDRV9VTkxPQURFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZW1vdmVTdGF0ZXMoKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHN0YXRlQ2xhc3NOYW1lc1twbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLlBsYXllclN0YXRlLklETEVdKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBJbml0IGluIGN1cnJlbnQgcGxheWVyIHN0YXRlXHJcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHN0YXRlQ2xhc3NOYW1lc1twbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLmdldFN0YXRlKHBsYXllcildKTtcclxuICAgICAgICAvLyBGdWxsc2NyZWVuIG1hcmtlciBjbGFzc1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0ZVTExTQ1JFRU5fRU5URVIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKF90aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5GVUxMU0NSRUVOKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fRlVMTFNDUkVFTl9FWElULCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhfdGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuRlVMTFNDUkVFTikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEluaXQgZnVsbHNjcmVlbiBzdGF0ZVxyXG4gICAgICAgIGlmIChwbGF5ZXIuaXNGdWxsc2NyZWVuKCkpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLkZVTExTQ1JFRU4pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQnVmZmVyaW5nIG1hcmtlciBjbGFzc1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NUQUxMX1NUQVJURUQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKF90aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5CVUZGRVJJTkcpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TVEFMTF9FTkRFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3MoX3RoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLkJVRkZFUklORykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEluaXQgYnVmZmVyaW5nIHN0YXRlXHJcbiAgICAgICAgaWYgKHBsYXllci5pc1N0YWxsZWQoKSkge1xyXG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuQlVGRkVSSU5HKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW90ZUNvbnRyb2wgbWFya2VyIGNsYXNzXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9TVEFSVEVELCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhfdGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuUkVNT1RFX0NPTlRST0wpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1NUT1BQRUQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5SRU1PVEVfQ09OVFJPTCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEluaXQgUmVtb3RlQ29udHJvbCBzdGF0ZVxyXG4gICAgICAgIGlmIChwbGF5ZXIuaXNDYXN0aW5nKCkpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLlJFTU9URV9DT05UUk9MKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENvbnRyb2xzIHZpc2liaWxpdHkgbWFya2VyIGNsYXNzXHJcbiAgICAgICAgdWltYW5hZ2VyLm9uQ29udHJvbHNTaG93LnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhfdGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuQ09OVFJPTFNfSElEREVOKSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhfdGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuQ09OVFJPTFNfU0hPV04pKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB1aW1hbmFnZXIub25Db250cm9sc0hpZGUuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5DT05UUk9MU19TSE9XTikpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoX3RoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLkNPTlRST0xTX0hJRERFTikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIExheW91dCBzaXplIGNsYXNzZXNcclxuICAgICAgICB2YXIgdXBkYXRlTGF5b3V0U2l6ZUNsYXNzZXMgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3MoX3RoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTQwMCcpKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcygnbGF5b3V0LW1heC13aWR0aC02MDAnKSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhfdGhpcy5wcmVmaXhDc3MoJ2xheW91dC1tYXgtd2lkdGgtODAwJykpO1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3MoX3RoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTEyMDAnKSk7XHJcbiAgICAgICAgICAgIGlmICh3aWR0aCA8PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhfdGhpcy5wcmVmaXhDc3MoJ2xheW91dC1tYXgtd2lkdGgtNDAwJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHdpZHRoIDw9IDYwMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKF90aGlzLnByZWZpeENzcygnbGF5b3V0LW1heC13aWR0aC02MDAnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAod2lkdGggPD0gODAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoX3RoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTgwMCcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh3aWR0aCA8PSAxMjAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoX3RoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTEyMDAnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BMQVlFUl9SRVNJWkUsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgc3RyaW5ncyAod2l0aCBcInB4XCIgc3VmZml4KSB0byBpbnRzXHJcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IE1hdGgucm91bmQoTnVtYmVyKGUud2lkdGguc3Vic3RyaW5nKDAsIGUud2lkdGgubGVuZ3RoIC0gMikpKTtcclxuICAgICAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoTnVtYmVyKGUuaGVpZ2h0LnN1YnN0cmluZygwLCBlLmhlaWdodC5sZW5ndGggLSAyKSkpO1xyXG4gICAgICAgICAgICB1cGRhdGVMYXlvdXRTaXplQ2xhc3Nlcyh3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBJbml0IGxheW91dCBzdGF0ZVxyXG4gICAgICAgIHVwZGF0ZUxheW91dFNpemVDbGFzc2VzKG5ldyBkb21fMS5ET00ocGxheWVyLmdldEZpZ3VyZSgpKS53aWR0aCgpLCBuZXcgZG9tXzEuRE9NKHBsYXllci5nZXRGaWd1cmUoKSkuaGVpZ2h0KCkpO1xyXG4gICAgfTtcclxuICAgIFVJQ29udGFpbmVyLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVsZWFzZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMudWlIaWRlVGltZW91dC5jbGVhcigpO1xyXG4gICAgfTtcclxuICAgIFVJQ29udGFpbmVyLnByb3RvdHlwZS50b0RvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IF9zdXBlci5wcm90b3R5cGUudG9Eb21FbGVtZW50LmNhbGwodGhpcyk7XHJcbiAgICAgICAgLy8gRGV0ZWN0IGZsZXhib3ggc3VwcG9ydCAobm90IHN1cHBvcnRlZCBpbiBJRTkpXHJcbiAgICAgICAgaWYgKGRvY3VtZW50ICYmIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykuc3R5bGUuZmxleCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKCdmbGV4Ym94JykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKCduby1mbGV4Ym94JykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBVSUNvbnRhaW5lcjtcclxufShjb250YWluZXJfMS5Db250YWluZXIpKTtcclxuVUlDb250YWluZXIuU1RBVEVfUFJFRklYID0gJ3BsYXllci1zdGF0ZS0nO1xyXG5VSUNvbnRhaW5lci5GVUxMU0NSRUVOID0gJ2Z1bGxzY3JlZW4nO1xyXG5VSUNvbnRhaW5lci5CVUZGRVJJTkcgPSAnYnVmZmVyaW5nJztcclxuVUlDb250YWluZXIuUkVNT1RFX0NPTlRST0wgPSAncmVtb3RlLWNvbnRyb2wnO1xyXG5VSUNvbnRhaW5lci5DT05UUk9MU19TSE9XTiA9ICdjb250cm9scy1zaG93bic7XHJcblVJQ29udGFpbmVyLkNPTlRST0xTX0hJRERFTiA9ICdjb250cm9scy1oaWRkZW4nO1xyXG5leHBvcnRzLlVJQ29udGFpbmVyID0gVUlDb250YWluZXI7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy91aWNvbnRhaW5lci50c1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBsYWJlbF8xID0gcmVxdWlyZShcIi4vbGFiZWxcIik7XHJcbnZhciBwbGF5ZXJ1dGlsc18xID0gcmVxdWlyZShcIi4uL3BsYXllcnV0aWxzXCIpO1xyXG52YXIgc3RyaW5ndXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9zdHJpbmd1dGlsc1wiKTtcclxudmFyIFBsYXliYWNrVGltZUxhYmVsTW9kZTtcclxuKGZ1bmN0aW9uIChQbGF5YmFja1RpbWVMYWJlbE1vZGUpIHtcclxuICAgIFBsYXliYWNrVGltZUxhYmVsTW9kZVtQbGF5YmFja1RpbWVMYWJlbE1vZGVbXCJDdXJyZW50VGltZVwiXSA9IDBdID0gXCJDdXJyZW50VGltZVwiO1xyXG4gICAgUGxheWJhY2tUaW1lTGFiZWxNb2RlW1BsYXliYWNrVGltZUxhYmVsTW9kZVtcIlRvdGFsVGltZVwiXSA9IDFdID0gXCJUb3RhbFRpbWVcIjtcclxuICAgIFBsYXliYWNrVGltZUxhYmVsTW9kZVtQbGF5YmFja1RpbWVMYWJlbE1vZGVbXCJDdXJyZW50QW5kVG90YWxUaW1lXCJdID0gMl0gPSBcIkN1cnJlbnRBbmRUb3RhbFRpbWVcIjtcclxufSkoUGxheWJhY2tUaW1lTGFiZWxNb2RlID0gZXhwb3J0cy5QbGF5YmFja1RpbWVMYWJlbE1vZGUgfHwgKGV4cG9ydHMuUGxheWJhY2tUaW1lTGFiZWxNb2RlID0ge30pKTtcclxuLyoqXHJcbiAqIEEgbGFiZWwgdGhhdCBkaXNwbGF5IHRoZSBjdXJyZW50IHBsYXliYWNrIHRpbWUgYW5kIHRoZSB0b3RhbCB0aW1lIHRocm91Z2gge0BsaW5rIFBsYXliYWNrVGltZUxhYmVsI3NldFRpbWUgc2V0VGltZX1cclxuICogb3IgYW55IHN0cmluZyB0aHJvdWdoIHtAbGluayBQbGF5YmFja1RpbWVMYWJlbCNzZXRUZXh0IHNldFRleHR9LlxyXG4gKi9cclxudmFyIFBsYXliYWNrVGltZUxhYmVsID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhQbGF5YmFja1RpbWVMYWJlbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFBsYXliYWNrVGltZUxhYmVsKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1wbGF5YmFja3RpbWVsYWJlbCcsXHJcbiAgICAgICAgICAgIHRpbWVMYWJlbE1vZGU6IFBsYXliYWNrVGltZUxhYmVsTW9kZS5DdXJyZW50QW5kVG90YWxUaW1lLFxyXG4gICAgICAgICAgICBoaWRlSW5MaXZlUGxheWJhY2s6IGZhbHNlLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUGxheWJhY2tUaW1lTGFiZWwucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XHJcbiAgICAgICAgdmFyIGxpdmUgPSBmYWxzZTtcclxuICAgICAgICB2YXIgbGl2ZUNzc0NsYXNzID0gdGhpcy5wcmVmaXhDc3MoJ3VpLXBsYXliYWNrdGltZWxhYmVsLWxpdmUnKTtcclxuICAgICAgICB2YXIgbGl2ZUVkZ2VDc3NDbGFzcyA9IHRoaXMucHJlZml4Q3NzKCd1aS1wbGF5YmFja3RpbWVsYWJlbC1saXZlLWVkZ2UnKTtcclxuICAgICAgICB2YXIgbWluV2lkdGggPSAwO1xyXG4gICAgICAgIHZhciBsaXZlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBwbGF5ZXIudGltZVNoaWZ0KDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHVwZGF0ZUxpdmVTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gUGxheWVyIGlzIHBsYXlpbmcgYSBsaXZlIHN0cmVhbSB3aGVuIHRoZSBkdXJhdGlvbiBpcyBpbmZpbml0ZVxyXG4gICAgICAgICAgICBsaXZlID0gcGxheWVyLmlzTGl2ZSgpO1xyXG4gICAgICAgICAgICAvLyBBdHRhY2gvZGV0YWNoIGxpdmUgbWFya2VyIGNsYXNzXHJcbiAgICAgICAgICAgIGlmIChsaXZlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3MobGl2ZUNzc0NsYXNzKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldFRleHQoJ0xpdmUnKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb25maWcuaGlkZUluTGl2ZVBsYXliYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3RoaXMub25DbGljay5zdWJzY3JpYmUobGl2ZUNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVMaXZlVGltZXNoaWZ0U3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyhsaXZlQ3NzQ2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKGxpdmVFZGdlQ3NzQ2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub25DbGljay51bnN1YnNjcmliZShsaXZlQ2xpY2tIYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHVwZGF0ZUxpdmVUaW1lc2hpZnRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5nZXRUaW1lU2hpZnQoKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKGxpdmVFZGdlQ3NzQ2xhc3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKGxpdmVFZGdlQ3NzQ2xhc3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgbGl2ZVN0cmVhbURldGVjdG9yID0gbmV3IHBsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuTGl2ZVN0cmVhbURldGVjdG9yKHBsYXllcik7XHJcbiAgICAgICAgbGl2ZVN0cmVhbURldGVjdG9yLm9uTGl2ZUNoYW5nZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIGFyZ3MpIHtcclxuICAgICAgICAgICAgbGl2ZSA9IGFyZ3MubGl2ZTtcclxuICAgICAgICAgICAgdXBkYXRlTGl2ZVN0YXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGl2ZVN0cmVhbURldGVjdG9yLmRldGVjdCgpOyAvLyBJbml0aWFsIGRldGVjdGlvblxyXG4gICAgICAgIHZhciBwbGF5YmFja1RpbWVIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWxpdmUgJiYgcGxheWVyLmdldER1cmF0aW9uKCkgIT09IEluZmluaXR5KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUaW1lKHBsYXllci5nZXRDdXJyZW50VGltZSgpLCBwbGF5ZXIuZ2V0RHVyYXRpb24oKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVG8gYXZvaWQgJ2p1bXBpbmcnIGluIHRoZSBVSSBieSB2YXJ5aW5nIGxhYmVsIHNpemVzIGR1ZSB0byBub24tbW9ub3NwYWNlZCBmb250cyxcclxuICAgICAgICAgICAgLy8gd2UgZ3JhZHVhbGx5IGluY3JlYXNlIHRoZSBtaW4td2lkdGggd2l0aCB0aGUgY29udGVudCB0byByZWFjaCBhIHN0YWJsZSBzaXplLlxyXG4gICAgICAgICAgICB2YXIgd2lkdGggPSBfdGhpcy5nZXREb21FbGVtZW50KCkud2lkdGgoKTtcclxuICAgICAgICAgICAgaWYgKHdpZHRoID4gbWluV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIG1pbldpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXREb21FbGVtZW50KCkuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnbWluLXdpZHRoJzogbWluV2lkdGggKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1RJTUVfQ0hBTkdFRCwgcGxheWJhY2tUaW1lSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU0VFS0VELCBwbGF5YmFja1RpbWVIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1RJTUVfVVBEQVRFRCwgcGxheWJhY2tUaW1lSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVElNRV9TSElGVCwgdXBkYXRlTGl2ZVRpbWVzaGlmdFN0YXRlKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9USU1FX1NISUZURUQsIHVwZGF0ZUxpdmVUaW1lc2hpZnRTdGF0ZSk7XHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IG1pbi13aWR0aCB3aGVuIGEgbmV3IHNvdXJjZSBpcyByZWFkeSAoZXNwZWNpYWxseSBmb3Igc3dpdGNoaW5nIFZPRC9MaXZlIG1vZGVzIHdoZXJlIHRoZSBsYWJlbCBjb250ZW50XHJcbiAgICAgICAgICAgIC8vIGNoYW5nZXMpXHJcbiAgICAgICAgICAgIG1pbldpZHRoID0gMDtcclxuICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnbWluLXdpZHRoJzogbnVsbCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIFNldCB0aW1lIGZvcm1hdCBkZXBlbmRpbmcgb24gc291cmNlIGR1cmF0aW9uXHJcbiAgICAgICAgICAgIF90aGlzLnRpbWVGb3JtYXQgPSBNYXRoLmFicyhwbGF5ZXIuaXNMaXZlKCkgPyBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgOiBwbGF5ZXIuZ2V0RHVyYXRpb24oKSkgPj0gMzYwMCA/XHJcbiAgICAgICAgICAgICAgICBzdHJpbmd1dGlsc18xLlN0cmluZ1V0aWxzLkZPUk1BVF9ISE1NU1MgOiBzdHJpbmd1dGlsc18xLlN0cmluZ1V0aWxzLkZPUk1BVF9NTVNTO1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGltZSBhZnRlciB0aGUgZm9ybWF0IGhhcyBiZWVuIHNldFxyXG4gICAgICAgICAgICBwbGF5YmFja1RpbWVIYW5kbGVyKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgaW5pdCk7XHJcbiAgICAgICAgaW5pdCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgY3VycmVudCBwbGF5YmFjayB0aW1lIGFuZCB0b3RhbCBkdXJhdGlvbi5cclxuICAgICAqIEBwYXJhbSBwbGF5YmFja1NlY29uZHMgdGhlIGN1cnJlbnQgcGxheWJhY2sgdGltZSBpbiBzZWNvbmRzXHJcbiAgICAgKiBAcGFyYW0gZHVyYXRpb25TZWNvbmRzIHRoZSB0b3RhbCBkdXJhdGlvbiBpbiBzZWNvbmRzXHJcbiAgICAgKi9cclxuICAgIFBsYXliYWNrVGltZUxhYmVsLnByb3RvdHlwZS5zZXRUaW1lID0gZnVuY3Rpb24gKHBsYXliYWNrU2Vjb25kcywgZHVyYXRpb25TZWNvbmRzKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gc3RyaW5ndXRpbHNfMS5TdHJpbmdVdGlscy5zZWNvbmRzVG9UaW1lKHBsYXliYWNrU2Vjb25kcywgdGhpcy50aW1lRm9ybWF0KTtcclxuICAgICAgICB2YXIgdG90YWxUaW1lID0gc3RyaW5ndXRpbHNfMS5TdHJpbmdVdGlscy5zZWNvbmRzVG9UaW1lKGR1cmF0aW9uU2Vjb25kcywgdGhpcy50aW1lRm9ybWF0KTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuY29uZmlnLnRpbWVMYWJlbE1vZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBQbGF5YmFja1RpbWVMYWJlbE1vZGUuQ3VycmVudFRpbWU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRleHQoXCJcIiArIGN1cnJlbnRUaW1lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFBsYXliYWNrVGltZUxhYmVsTW9kZS5Ub3RhbFRpbWU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRleHQoXCJcIiArIHRvdGFsVGltZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBQbGF5YmFja1RpbWVMYWJlbE1vZGUuQ3VycmVudEFuZFRvdGFsVGltZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VGV4dChjdXJyZW50VGltZSArIFwiIC8gXCIgKyB0b3RhbFRpbWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgY3VycmVudCB0aW1lIGZvcm1hdFxyXG4gICAgICogQHBhcmFtIHRpbWVGb3JtYXQgdGhlIHRpbWUgZm9ybWF0XHJcbiAgICAgKi9cclxuICAgIFBsYXliYWNrVGltZUxhYmVsLnByb3RvdHlwZS5zZXRUaW1lRm9ybWF0ID0gZnVuY3Rpb24gKHRpbWVGb3JtYXQpIHtcclxuICAgICAgICB0aGlzLnRpbWVGb3JtYXQgPSB0aW1lRm9ybWF0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQbGF5YmFja1RpbWVMYWJlbDtcclxufShsYWJlbF8xLkxhYmVsKSk7XHJcbmV4cG9ydHMuUGxheWJhY2tUaW1lTGFiZWwgPSBQbGF5YmFja1RpbWVMYWJlbDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3BsYXliYWNrdGltZWxhYmVsLnRzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbXBvbmVudF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50XCIpO1xyXG4vKipcclxuICogQSBkdW1teSBjb21wb25lbnQgdGhhdCBqdXN0IHJlc2VydmVzIHNvbWUgc3BhY2UgYW5kIGRvZXMgbm90aGluZyBlbHNlLlxyXG4gKi9cclxudmFyIFNwYWNlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU3BhY2VyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3BhY2VyKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1zcGFjZXInLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3BhY2VyLnByb3RvdHlwZS5vblNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBkaXNhYmxlIGV2ZW50IGZpcmluZyBieSBvdmVyd3JpdGluZyBhbmQgbm90IGNhbGxpbmcgc3VwZXJcclxuICAgIH07XHJcbiAgICBTcGFjZXIucHJvdG90eXBlLm9uSGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGRpc2FibGUgZXZlbnQgZmlyaW5nIGJ5IG92ZXJ3cml0aW5nIGFuZCBub3QgY2FsbGluZyBzdXBlclxyXG4gICAgfTtcclxuICAgIFNwYWNlci5wcm90b3R5cGUub25Ib3ZlckNoYW5nZWRFdmVudCA9IGZ1bmN0aW9uIChob3ZlcmVkKSB7XHJcbiAgICAgICAgLy8gZGlzYWJsZSBldmVudCBmaXJpbmcgYnkgb3ZlcndyaXRpbmcgYW5kIG5vdCBjYWxsaW5nIHN1cGVyXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNwYWNlcjtcclxufShjb21wb25lbnRfMS5Db21wb25lbnQpKTtcclxuZXhwb3J0cy5TcGFjZXIgPSBTcGFjZXI7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zcGFjZXIudHNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29udGFpbmVyXzEgPSByZXF1aXJlKFwiLi9jb250YWluZXJcIik7XHJcbnZhciBsYWJlbF8xID0gcmVxdWlyZShcIi4vbGFiZWxcIik7XHJcbnZhciBjb21wb25lbnRfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudFwiKTtcclxudmFyIHN0cmluZ3V0aWxzXzEgPSByZXF1aXJlKFwiLi4vc3RyaW5ndXRpbHNcIik7XHJcbnZhciBpbWFnZWxvYWRlcl8xID0gcmVxdWlyZShcIi4uL2ltYWdlbG9hZGVyXCIpO1xyXG4vKipcclxuICogQSBsYWJlbCBmb3IgYSB7QGxpbmsgU2Vla0Jhcn0gdGhhdCBjYW4gZGlzcGxheSB0aGUgc2VlayB0YXJnZXQgdGltZSwgYSB0aHVtYm5haWwsIGFuZCB0aXRsZSAoZS5nLiBjaGFwdGVyIHRpdGxlKS5cclxuICovXHJcbnZhciBTZWVrQmFyTGFiZWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFNlZWtCYXJMYWJlbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNlZWtCYXJMYWJlbChjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudGltZUxhYmVsID0gbmV3IGxhYmVsXzEuTGFiZWwoeyBjc3NDbGFzc2VzOiBbJ3NlZWtiYXItbGFiZWwtdGltZSddIH0pO1xyXG4gICAgICAgIF90aGlzLnRpdGxlTGFiZWwgPSBuZXcgbGFiZWxfMS5MYWJlbCh7IGNzc0NsYXNzZXM6IFsnc2Vla2Jhci1sYWJlbC10aXRsZSddIH0pO1xyXG4gICAgICAgIF90aGlzLnRodW1ibmFpbCA9IG5ldyBjb21wb25lbnRfMS5Db21wb25lbnQoeyBjc3NDbGFzc2VzOiBbJ3NlZWtiYXItdGh1bWJuYWlsJ10gfSk7XHJcbiAgICAgICAgX3RoaXMudGh1bWJuYWlsSW1hZ2VMb2FkZXIgPSBuZXcgaW1hZ2Vsb2FkZXJfMS5JbWFnZUxvYWRlcigpO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXNlZWtiYXItbGFiZWwnLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBbbmV3IGNvbnRhaW5lcl8xLkNvbnRhaW5lcih7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGNvbnRhaW5lcl8xLkNvbnRhaW5lcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbX3RoaXMudGl0bGVMYWJlbCwgX3RoaXMudGltZUxhYmVsXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnc2Vla2Jhci1sYWJlbC1tZXRhZGF0YScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogJ3NlZWtiYXItbGFiZWwtaW5uZXInLFxyXG4gICAgICAgICAgICAgICAgfSldLFxyXG4gICAgICAgICAgICBoaWRkZW46IHRydWUsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTZWVrQmFyTGFiZWwucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uU2Vla1ByZXZpZXcuc3Vic2NyaWJlUmF0ZUxpbWl0ZWQoZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzTGl2ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4VGltZVNoaWZ0ID0gcGxheWVyLmdldE1heFRpbWVTaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpbWUgPSBtYXhUaW1lU2hpZnQgLSBtYXhUaW1lU2hpZnQgKiAoYXJncy5wb3NpdGlvbiAvIDEwMCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUaW1lKHRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MubWFya2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZSA9IGFyZ3MubWFya2VyLnRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0VGl0bGVUZXh0KGFyZ3MubWFya2VyLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSBhcmdzLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFRpdGxlVGV4dChudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB0aW1lID0gcGxheWVyLmdldER1cmF0aW9uKCkgKiAocGVyY2VudGFnZSAvIDEwMCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUaW1lKHRpbWUpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0VGh1bWJuYWlsKHBsYXllci5nZXRUaHVtYih0aW1lKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBTZXQgdGltZSBmb3JtYXQgZGVwZW5kaW5nIG9uIHNvdXJjZSBkdXJhdGlvblxyXG4gICAgICAgICAgICBfdGhpcy50aW1lRm9ybWF0ID0gTWF0aC5hYnMocGxheWVyLmlzTGl2ZSgpID8gcGxheWVyLmdldE1heFRpbWVTaGlmdCgpIDogcGxheWVyLmdldER1cmF0aW9uKCkpID49IDM2MDAgP1xyXG4gICAgICAgICAgICAgICAgc3RyaW5ndXRpbHNfMS5TdHJpbmdVdGlscy5GT1JNQVRfSEhNTVNTIDogc3RyaW5ndXRpbHNfMS5TdHJpbmdVdGlscy5GT1JNQVRfTU1TUztcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1JFQURZLCBpbml0KTtcclxuICAgICAgICBpbml0KCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIGFyYml0cmFyeSB0ZXh0IG9uIHRoZSBsYWJlbC5cclxuICAgICAqIEBwYXJhbSB0ZXh0IHRoZSB0ZXh0IHRvIHNob3cgb24gdGhlIGxhYmVsXHJcbiAgICAgKi9cclxuICAgIFNlZWtCYXJMYWJlbC5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy50aW1lTGFiZWwuc2V0VGV4dCh0ZXh0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgYSB0aW1lIHRvIGJlIGRpc3BsYXllZCBvbiB0aGUgbGFiZWwuXHJcbiAgICAgKiBAcGFyYW0gc2Vjb25kcyB0aGUgdGltZSBpbiBzZWNvbmRzIHRvIGRpc3BsYXkgb24gdGhlIGxhYmVsXHJcbiAgICAgKi9cclxuICAgIFNlZWtCYXJMYWJlbC5wcm90b3R5cGUuc2V0VGltZSA9IGZ1bmN0aW9uIChzZWNvbmRzKSB7XHJcbiAgICAgICAgdGhpcy5zZXRUZXh0KHN0cmluZ3V0aWxzXzEuU3RyaW5nVXRpbHMuc2Vjb25kc1RvVGltZShzZWNvbmRzLCB0aGlzLnRpbWVGb3JtYXQpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHRleHQgb24gdGhlIHRpdGxlIGxhYmVsLlxyXG4gICAgICogQHBhcmFtIHRleHQgdGhlIHRleHQgdG8gc2hvdyBvbiB0aGUgbGFiZWxcclxuICAgICAqL1xyXG4gICAgU2Vla0JhckxhYmVsLnByb3RvdHlwZS5zZXRUaXRsZVRleHQgPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbC5zZXRUZXh0KHRleHQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBvciByZW1vdmVzIGEgdGh1bWJuYWlsIG9uIHRoZSBsYWJlbC5cclxuICAgICAqIEBwYXJhbSB0aHVtYm5haWwgdGhlIHRodW1ibmFpbCB0byBkaXNwbGF5IG9uIHRoZSBsYWJlbCBvciBudWxsIHRvIHJlbW92ZSBhIGRpc3BsYXllZCB0aHVtYm5haWxcclxuICAgICAqL1xyXG4gICAgU2Vla0JhckxhYmVsLnByb3RvdHlwZS5zZXRUaHVtYm5haWwgPSBmdW5jdGlvbiAodGh1bWJuYWlsKSB7XHJcbiAgICAgICAgaWYgKHRodW1ibmFpbCA9PT0gdm9pZCAwKSB7IHRodW1ibmFpbCA9IG51bGw7IH1cclxuICAgICAgICB2YXIgdGh1bWJuYWlsRWxlbWVudCA9IHRoaXMudGh1bWJuYWlsLmdldERvbUVsZW1lbnQoKTtcclxuICAgICAgICBpZiAodGh1bWJuYWlsID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGh1bWJuYWlsRWxlbWVudC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogbnVsbCxcclxuICAgICAgICAgICAgICAgICdoZWlnaHQnOiBudWxsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgdGh1bWJuYWlsIGltYWdlIGxvYWRlciB0byBtYWtlIHN1cmUgdGhlIHRodW1ibmFpbCBpcyBsb2FkZWQgYW5kIGl0J3Mgc2l6ZSBpcyBrbm93biBiZWZvcmUgYmUgY2FuXHJcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgQ1NTIHByb3BlcnRpZXMgYW5kIHNldCB0aGVtIG9uIHRoZSBlbGVtZW50LlxyXG4gICAgICAgICAgICB0aGlzLnRodW1ibmFpbEltYWdlTG9hZGVyLmxvYWQodGh1bWJuYWlsLnVybCwgZnVuY3Rpb24gKHVybCwgd2lkdGgsIGhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbENvdW50WCA9IHdpZHRoIC8gdGh1bWJuYWlsLnc7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsQ291bnRZID0gaGVpZ2h0IC8gdGh1bWJuYWlsLmg7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsSW5kZXhYID0gdGh1bWJuYWlsLnggLyB0aHVtYm5haWwudztcclxuICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxJbmRleFkgPSB0aHVtYm5haWwueSAvIHRodW1ibmFpbC5oO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpemVYID0gMTAwICogdGh1bWJuYWlsQ291bnRYO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpemVZID0gMTAwICogdGh1bWJuYWlsQ291bnRZO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFggPSAxMDAgKiB0aHVtYm5haWxJbmRleFg7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WSA9IDEwMCAqIHRodW1ibmFpbEluZGV4WTtcclxuICAgICAgICAgICAgICAgIHZhciBhc3BlY3RSYXRpbyA9IDEgLyB0aHVtYm5haWwudyAqIHRodW1ibmFpbC5oO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIHRodW1ibmFpbCBzaXplIGlzIHNldCBieSBzZXR0aW5nIHRoZSBDU1MgJ3dpZHRoJyBhbmQgJ3BhZGRpbmctYm90dG9tJyBwcm9wZXJ0aWVzLiAncGFkZGluZy1ib3R0b20nIGlzXHJcbiAgICAgICAgICAgICAgICAvLyB1c2VkIGJlY2F1c2UgaXQgaXMgcmVsYXRpdmUgdG8gdGhlIHdpZHRoIGFuZCBjYW4gYmUgdXNlZCB0byBzZXQgdGhlIGFzcGVjdCByYXRpbyBvZiB0aGUgdGh1bWJuYWlsLlxyXG4gICAgICAgICAgICAgICAgLy8gQSBkZWZhdWx0IHZhbHVlIGZvciB3aWR0aCBpcyBzZXQgaW4gdGhlIHN0eWxlc2hlZXQgYW5kIGNhbiBiZSBvdmVyd3JpdHRlbiBmcm9tIHRoZXJlIG9yIGFueXdoZXJlIGVsc2UuXHJcbiAgICAgICAgICAgICAgICB0aHVtYm5haWxFbGVtZW50LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnaW5oZXJpdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiBcInVybChcIiArIHRodW1ibmFpbC51cmwgKyBcIilcIixcclxuICAgICAgICAgICAgICAgICAgICAncGFkZGluZy1ib3R0b20nOiAxMDAgKiBhc3BlY3RSYXRpbyArIFwiJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXNpemUnOiBzaXplWCArIFwiJSBcIiArIHNpemVZICsgXCIlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtcG9zaXRpb24nOiBcIi1cIiArIG9mZnNldFggKyBcIiUgLVwiICsgb2Zmc2V0WSArIFwiJVwiLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gU2Vla0JhckxhYmVsO1xyXG59KGNvbnRhaW5lcl8xLkNvbnRhaW5lcikpO1xyXG5leHBvcnRzLlNlZWtCYXJMYWJlbCA9IFNlZWtCYXJMYWJlbDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3NlZWtiYXJsYWJlbC50c1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBsaXN0c2VsZWN0b3JfMSA9IHJlcXVpcmUoXCIuL2xpc3RzZWxlY3RvclwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4uL2RvbVwiKTtcclxuLyoqXHJcbiAqIEEgc2ltcGxlIHNlbGVjdCBib3ggcHJvdmlkaW5nIHRoZSBwb3NzaWJpbGl0eSB0byBzZWxlY3QgYSBzaW5nbGUgaXRlbSBvdXQgb2YgYSBsaXN0IG9mIGF2YWlsYWJsZSBpdGVtcy5cclxuICpcclxuICogRE9NIGV4YW1wbGU6XHJcbiAqIDxjb2RlPlxyXG4gKiAgICAgPHNlbGVjdCBjbGFzcz0ndWktc2VsZWN0Ym94Jz5cclxuICogICAgICAgICA8b3B0aW9uIHZhbHVlPSdrZXknPmxhYmVsPC9vcHRpb24+XHJcbiAqICAgICAgICAgLi4uXHJcbiAqICAgICA8L3NlbGVjdD5cclxuICogPC9jb2RlPlxyXG4gKi9cclxudmFyIFNlbGVjdEJveCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU2VsZWN0Qm94LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2VsZWN0Qm94KGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1zZWxlY3Rib3gnLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU2VsZWN0Qm94LnByb3RvdHlwZS50b0RvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc2VsZWN0RWxlbWVudCA9IG5ldyBkb21fMS5ET00oJ3NlbGVjdCcsIHtcclxuICAgICAgICAgICAgJ2lkJzogdGhpcy5jb25maWcuaWQsXHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMuZ2V0Q3NzQ2xhc3NlcygpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0RWxlbWVudCA9IHNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVEb21JdGVtcygpO1xyXG4gICAgICAgIHNlbGVjdEVsZW1lbnQub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gc2VsZWN0RWxlbWVudC52YWwoKTtcclxuICAgICAgICAgICAgX3RoaXMub25JdGVtU2VsZWN0ZWRFdmVudCh2YWx1ZSwgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RFbGVtZW50O1xyXG4gICAgfTtcclxuICAgIFNlbGVjdEJveC5wcm90b3R5cGUudXBkYXRlRG9tSXRlbXMgPSBmdW5jdGlvbiAoc2VsZWN0ZWRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlID09PSB2b2lkIDApIHsgc2VsZWN0ZWRWYWx1ZSA9IG51bGw7IH1cclxuICAgICAgICAvLyBEZWxldGUgYWxsIGNoaWxkcmVuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RFbGVtZW50LmVtcHR5KCk7XHJcbiAgICAgICAgLy8gQWRkIHVwZGF0ZWQgY2hpbGRyZW5cclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5pdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25FbGVtZW50ID0gbmV3IGRvbV8xLkRPTSgnb3B0aW9uJywge1xyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogaXRlbS5rZXksXHJcbiAgICAgICAgICAgIH0pLmh0bWwoaXRlbS5sYWJlbCk7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmtleSA9PT0gU3RyaW5nKHNlbGVjdGVkVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LmF0dHIoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RFbGVtZW50LmFwcGVuZChvcHRpb25FbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU2VsZWN0Qm94LnByb3RvdHlwZS5vbkl0ZW1BZGRlZEV2ZW50ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5vbkl0ZW1BZGRlZEV2ZW50LmNhbGwodGhpcywgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRG9tSXRlbXModGhpcy5zZWxlY3RlZEl0ZW0pO1xyXG4gICAgfTtcclxuICAgIFNlbGVjdEJveC5wcm90b3R5cGUub25JdGVtUmVtb3ZlZEV2ZW50ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5vbkl0ZW1SZW1vdmVkRXZlbnQuY2FsbCh0aGlzLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVEb21JdGVtcyh0aGlzLnNlbGVjdGVkSXRlbSk7XHJcbiAgICB9O1xyXG4gICAgU2VsZWN0Qm94LnByb3RvdHlwZS5vbkl0ZW1TZWxlY3RlZEV2ZW50ID0gZnVuY3Rpb24gKHZhbHVlLCB1cGRhdGVEb21JdGVtcykge1xyXG4gICAgICAgIGlmICh1cGRhdGVEb21JdGVtcyA9PT0gdm9pZCAwKSB7IHVwZGF0ZURvbUl0ZW1zID0gdHJ1ZTsgfVxyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUub25JdGVtU2VsZWN0ZWRFdmVudC5jYWxsKHRoaXMsIHZhbHVlKTtcclxuICAgICAgICBpZiAodXBkYXRlRG9tSXRlbXMpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVEb21JdGVtcyh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTZWxlY3RCb3g7XHJcbn0obGlzdHNlbGVjdG9yXzEuTGlzdFNlbGVjdG9yKSk7XHJcbmV4cG9ydHMuU2VsZWN0Qm94ID0gU2VsZWN0Qm94O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc2VsZWN0Ym94LnRzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbXBvbmVudF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50XCIpO1xyXG52YXIgZXZlbnRkaXNwYXRjaGVyXzEgPSByZXF1aXJlKFwiLi4vZXZlbnRkaXNwYXRjaGVyXCIpO1xyXG52YXIgYXJyYXl1dGlsc18xID0gcmVxdWlyZShcIi4uL2FycmF5dXRpbHNcIik7XHJcbnZhciBMaXN0U2VsZWN0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKExpc3RTZWxlY3RvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIExpc3RTZWxlY3Rvcihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMubGlzdFNlbGVjdG9yRXZlbnRzID0ge1xyXG4gICAgICAgICAgICBvbkl0ZW1BZGRlZDogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgICAgICBvbkl0ZW1SZW1vdmVkOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uSXRlbVNlbGVjdGVkOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgfTtcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWxpc3RzZWxlY3RvcicsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICBfdGhpcy5pdGVtcyA9IF90aGlzLmNvbmZpZy5pdGVtcztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBMaXN0U2VsZWN0b3IucHJvdG90eXBlLmdldEl0ZW1JbmRleCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBmb3IgKHZhciBpbmRleCBpbiB0aGlzLml0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuaXRlbXNbaW5kZXhdLmtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIHNwZWNpZmllZCBpdGVtIGlzIHBhcnQgb2YgdGhpcyBzZWxlY3Rvci5cclxuICAgICAqIEBwYXJhbSBrZXkgdGhlIGtleSBvZiB0aGUgaXRlbSB0byBjaGVja1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIGl0ZW0gaXMgcGFydCBvZiB0aGlzIHNlbGVjdG9yLCBlbHNlIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIExpc3RTZWxlY3Rvci5wcm90b3R5cGUuaGFzSXRlbSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRJdGVtSW5kZXgoa2V5KSA+IC0xO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhbiBpdGVtIHRvIHRoaXMgc2VsZWN0b3IgYnkgYXBwZW5kaW5nIGl0IHRvIHRoZSBlbmQgb2YgdGhlIGxpc3Qgb2YgaXRlbXMuIElmIGFuIGl0ZW0gd2l0aCB0aGUgc3BlY2lmaWVkXHJcbiAgICAgKiBrZXkgYWxyZWFkeSBleGlzdHMsIGl0IGlzIHJlcGxhY2VkLlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUga2V5IG9mIHRoZSBpdGVtIHRvIGFkZFxyXG4gICAgICogQHBhcmFtIGxhYmVsIHRoZSAoaHVtYW4tcmVhZGFibGUpIGxhYmVsIG9mIHRoZSBpdGVtIHRvIGFkZFxyXG4gICAgICovXHJcbiAgICBMaXN0U2VsZWN0b3IucHJvdG90eXBlLmFkZEl0ZW0gPSBmdW5jdGlvbiAoa2V5LCBsYWJlbCkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShrZXkpOyAvLyBUcnkgdG8gcmVtb3ZlIGtleSBmaXJzdCB0byBnZXQgb3ZlcndyaXRlIGJlaGF2aW9yIGFuZCBhdm9pZCBkdXBsaWNhdGUga2V5c1xyXG4gICAgICAgIHRoaXMuaXRlbXMucHVzaCh7IGtleToga2V5LCBsYWJlbDogbGFiZWwgfSk7XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1BZGRlZEV2ZW50KGtleSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFuIGl0ZW0gZnJvbSB0aGlzIHNlbGVjdG9yLlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUga2V5IG9mIHRoZSBpdGVtIHRvIHJlbW92ZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgcmVtb3ZhbCB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2UgaWYgdGhlIGl0ZW0gaXMgbm90IHBhcnQgb2YgdGhpcyBzZWxlY3RvclxyXG4gICAgICovXHJcbiAgICBMaXN0U2VsZWN0b3IucHJvdG90eXBlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJdGVtSW5kZXgoa2V5KTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICBhcnJheXV0aWxzXzEuQXJyYXlVdGlscy5yZW1vdmUodGhpcy5pdGVtcywgdGhpcy5pdGVtc1tpbmRleF0pO1xyXG4gICAgICAgICAgICB0aGlzLm9uSXRlbVJlbW92ZWRFdmVudChrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2VsZWN0cyBhbiBpdGVtIGZyb20gdGhlIGl0ZW1zIGluIHRoaXMgc2VsZWN0b3IuXHJcbiAgICAgKiBAcGFyYW0ga2V5IHRoZSBrZXkgb2YgdGhlIGl0ZW0gdG8gc2VsZWN0XHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpcyB0aGUgc2VsZWN0aW9uIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBpZiB0aGUgc2VsZWN0ZWQgaXRlbSBpcyBub3QgcGFydCBvZiB0aGUgc2VsZWN0b3JcclxuICAgICAqL1xyXG4gICAgTGlzdFNlbGVjdG9yLnByb3RvdHlwZS5zZWxlY3RJdGVtID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGlmIChrZXkgPT09IHRoaXMuc2VsZWN0ZWRJdGVtKSB7XHJcbiAgICAgICAgICAgIC8vIGl0ZW1Db25maWcgaXMgYWxyZWFkeSBzZWxlY3RlZCwgc3VwcHJlc3MgYW55IGZ1cnRoZXIgYWN0aW9uXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldEl0ZW1JbmRleChrZXkpO1xyXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0ga2V5O1xyXG4gICAgICAgICAgICB0aGlzLm9uSXRlbVNlbGVjdGVkRXZlbnQoa2V5KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGtleSBvZiB0aGUgc2VsZWN0ZWQgaXRlbS5cclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBrZXkgb2YgdGhlIHNlbGVjdGVkIGl0ZW0gb3IgbnVsbCBpZiBubyBpdGVtIGlzIHNlbGVjdGVkXHJcbiAgICAgKi9cclxuICAgIExpc3RTZWxlY3Rvci5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRJdGVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkSXRlbTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYWxsIGl0ZW1zIGZyb20gdGhpcyBzZWxlY3Rvci5cclxuICAgICAqL1xyXG4gICAgTGlzdFNlbGVjdG9yLnByb3RvdHlwZS5jbGVhckl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGxvY2FsIGNvcHkgZm9yIGl0ZXJhdGlvbiBhZnRlciBjbGVhclxyXG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMuaXRlbXM7XHJcbiAgICAgICAgLy8gY2xlYXIgaXRlbXNcclxuICAgICAgICB0aGlzLml0ZW1zID0gW107XHJcbiAgICAgICAgLy8gY2xlYXIgdGhlIHNlbGVjdGlvbiBhcyB0aGUgc2VsZWN0ZWQgaXRlbSBpcyBhbHNvIHJlbW92ZWRcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7XHJcbiAgICAgICAgLy8gZmlyZSBldmVudHNcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGl0ZW1zXzEgPSBpdGVtczsgX2kgPCBpdGVtc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zXzFbX2ldO1xyXG4gICAgICAgICAgICB0aGlzLm9uSXRlbVJlbW92ZWRFdmVudChpdGVtLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGl0ZW1zIGluIHRoaXMgc2VsZWN0b3IuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBMaXN0U2VsZWN0b3IucHJvdG90eXBlLml0ZW1Db3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5pdGVtcykubGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIExpc3RTZWxlY3Rvci5wcm90b3R5cGUub25JdGVtQWRkZWRFdmVudCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLmxpc3RTZWxlY3RvckV2ZW50cy5vbkl0ZW1BZGRlZC5kaXNwYXRjaCh0aGlzLCBrZXkpO1xyXG4gICAgfTtcclxuICAgIExpc3RTZWxlY3Rvci5wcm90b3R5cGUub25JdGVtUmVtb3ZlZEV2ZW50ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHRoaXMubGlzdFNlbGVjdG9yRXZlbnRzLm9uSXRlbVJlbW92ZWQuZGlzcGF0Y2godGhpcywga2V5KTtcclxuICAgIH07XHJcbiAgICBMaXN0U2VsZWN0b3IucHJvdG90eXBlLm9uSXRlbVNlbGVjdGVkRXZlbnQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdGhpcy5saXN0U2VsZWN0b3JFdmVudHMub25JdGVtU2VsZWN0ZWQuZGlzcGF0Y2godGhpcywga2V5KTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlzdFNlbGVjdG9yLnByb3RvdHlwZSwgXCJvbkl0ZW1BZGRlZFwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIGFuIGl0ZW0gaXMgYWRkZWQgdG8gdGhlIGxpc3Qgb2YgaXRlbXMuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PExpc3RTZWxlY3RvcjxDb25maWc+LCBzdHJpbmc+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0U2VsZWN0b3JFdmVudHMub25JdGVtQWRkZWQuZ2V0RXZlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMaXN0U2VsZWN0b3IucHJvdG90eXBlLCBcIm9uSXRlbVJlbW92ZWRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiBhbiBpdGVtIGlzIHJlbW92ZWQgZnJvbSB0aGUgbGlzdCBvZiBpdGVtcy5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnQ8TGlzdFNlbGVjdG9yPENvbmZpZz4sIHN0cmluZz59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RTZWxlY3RvckV2ZW50cy5vbkl0ZW1SZW1vdmVkLmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlzdFNlbGVjdG9yLnByb3RvdHlwZSwgXCJvbkl0ZW1TZWxlY3RlZFwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIGFuIGl0ZW0gaXMgc2VsZWN0ZWQgZnJvbSB0aGUgbGlzdCBvZiBpdGVtcy5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnQ8TGlzdFNlbGVjdG9yPENvbmZpZz4sIHN0cmluZz59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RTZWxlY3RvckV2ZW50cy5vbkl0ZW1TZWxlY3RlZC5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIExpc3RTZWxlY3RvcjtcclxufShjb21wb25lbnRfMS5Db21wb25lbnQpKTtcclxuZXhwb3J0cy5MaXN0U2VsZWN0b3IgPSBMaXN0U2VsZWN0b3I7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9saXN0c2VsZWN0b3IudHNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29udGFpbmVyXzEgPSByZXF1aXJlKFwiLi9jb250YWluZXJcIik7XHJcbnZhciB2b2x1bWVzbGlkZXJfMSA9IHJlcXVpcmUoXCIuL3ZvbHVtZXNsaWRlclwiKTtcclxudmFyIHZvbHVtZXRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vdm9sdW1ldG9nZ2xlYnV0dG9uXCIpO1xyXG52YXIgdGltZW91dF8xID0gcmVxdWlyZShcIi4uL3RpbWVvdXRcIik7XHJcbi8qKlxyXG4gKiBBIGNvbXBvc2l0ZSB2b2x1bWUgY29udHJvbCB0aGF0IGNvbnNpc3RzIG9mIGFuZCBpbnRlcm5hbGx5IG1hbmFnZXMgYSB2b2x1bWUgY29udHJvbCBidXR0b24gdGhhdCBjYW4gYmUgdXNlZFxyXG4gKiBmb3IgbXV0aW5nLCBhbmQgYSAoZGVwZW5kaW5nIG9uIHRoZSBDU1Mgc3R5bGUsIGUuZy4gc2xpZGUtb3V0KSB2b2x1bWUgY29udHJvbCBiYXIuXHJcbiAqL1xyXG52YXIgVm9sdW1lQ29udHJvbEJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVm9sdW1lQ29udHJvbEJ1dHRvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFZvbHVtZUNvbnRyb2xCdXR0b24oY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnZvbHVtZVRvZ2dsZUJ1dHRvbiA9IG5ldyB2b2x1bWV0b2dnbGVidXR0b25fMS5Wb2x1bWVUb2dnbGVCdXR0b24oKTtcclxuICAgICAgICBfdGhpcy52b2x1bWVTbGlkZXIgPSBuZXcgdm9sdW1lc2xpZGVyXzEuVm9sdW1lU2xpZGVyKHtcclxuICAgICAgICAgICAgdmVydGljYWw6IGNvbmZpZy52ZXJ0aWNhbCAhPSBudWxsID8gY29uZmlnLnZlcnRpY2FsIDogdHJ1ZSxcclxuICAgICAgICAgICAgaGlkZGVuOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXZvbHVtZWNvbnRyb2xidXR0b24nLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBbX3RoaXMudm9sdW1lVG9nZ2xlQnV0dG9uLCBfdGhpcy52b2x1bWVTbGlkZXJdLFxyXG4gICAgICAgICAgICBoaWRlRGVsYXk6IDUwMCxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFZvbHVtZUNvbnRyb2xCdXR0b24ucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIHZvbHVtZVRvZ2dsZUJ1dHRvbiA9IHRoaXMuZ2V0Vm9sdW1lVG9nZ2xlQnV0dG9uKCk7XHJcbiAgICAgICAgdmFyIHZvbHVtZVNsaWRlciA9IHRoaXMuZ2V0Vm9sdW1lU2xpZGVyKCk7XHJcbiAgICAgICAgdGhpcy52b2x1bWVTbGlkZXJIaWRlVGltZW91dCA9IG5ldyB0aW1lb3V0XzEuVGltZW91dCh0aGlzLmdldENvbmZpZygpLmhpZGVEZWxheSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2b2x1bWVTbGlkZXIuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogVm9sdW1lIFNsaWRlciB2aXNpYmlsaXR5IGhhbmRsaW5nXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGUgdm9sdW1lIHNsaWRlciBzaGFsbCBiZSB2aXNpYmxlIHdoaWxlIHRoZSB1c2VyIGhvdmVycyB0aGUgbXV0ZSB0b2dnbGUgYnV0dG9uLCB3aGlsZSB0aGUgdXNlciBob3ZlcnMgdGhlXHJcbiAgICAgICAgICogdm9sdW1lIHNsaWRlciwgYW5kIHdoaWxlIHRoZSB1c2VyIHNsaWRlcyB0aGUgdm9sdW1lIHNsaWRlci4gSWYgbm9uZSBvZiB0aGVzZSBzaXR1YXRpb25zIGFyZSB0cnVlLCB0aGUgc2xpZGVyXHJcbiAgICAgICAgICogc2hhbGwgZGlzYXBwZWFyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciB2b2x1bWVTbGlkZXJIb3ZlcmVkID0gZmFsc2U7XHJcbiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gU2hvdyB2b2x1bWUgc2xpZGVyIHdoZW4gbW91c2UgZW50ZXJzIHRoZSBidXR0b24gYXJlYVxyXG4gICAgICAgICAgICBpZiAodm9sdW1lU2xpZGVyLmlzSGlkZGVuKCkpIHtcclxuICAgICAgICAgICAgICAgIHZvbHVtZVNsaWRlci5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQXZvaWQgaGlkaW5nIG9mIHRoZSBzbGlkZXIgd2hlbiBidXR0b24gaXMgaG92ZXJlZFxyXG4gICAgICAgICAgICBfdGhpcy52b2x1bWVTbGlkZXJIaWRlVGltZW91dC5jbGVhcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5nZXREb21FbGVtZW50KCkub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIEhpZGUgc2xpZGVyIGRlbGF5ZWQgd2hlbiBidXR0b24gaXMgbGVmdFxyXG4gICAgICAgICAgICBfdGhpcy52b2x1bWVTbGlkZXJIaWRlVGltZW91dC5yZXNldCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZvbHVtZVNsaWRlci5nZXREb21FbGVtZW50KCkub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gdGhlIHNsaWRlciBpcyBlbnRlcmVkLCBjYW5jZWwgdGhlIGhpZGUgdGltZW91dCBhY3RpdmF0ZWQgYnkgbGVhdmluZyB0aGUgYnV0dG9uXHJcbiAgICAgICAgICAgIF90aGlzLnZvbHVtZVNsaWRlckhpZGVUaW1lb3V0LmNsZWFyKCk7XHJcbiAgICAgICAgICAgIHZvbHVtZVNsaWRlckhvdmVyZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZvbHVtZVNsaWRlci5nZXREb21FbGVtZW50KCkub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gbW91c2UgbGVhdmVzIHRoZSBzbGlkZXIsIG9ubHkgaGlkZSBpdCBpZiB0aGVyZSBpcyBubyBzbGlkZSBvcGVyYXRpb24gaW4gcHJvZ3Jlc3NcclxuICAgICAgICAgICAgaWYgKHZvbHVtZVNsaWRlci5pc1NlZWtpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudm9sdW1lU2xpZGVySGlkZVRpbWVvdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnZvbHVtZVNsaWRlckhpZGVUaW1lb3V0LnJlc2V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdm9sdW1lU2xpZGVySG92ZXJlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZvbHVtZVNsaWRlci5vblNlZWtlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIGEgc2xpZGUgb3BlcmF0aW9uIGlzIGRvbmUgYW5kIHRoZSBzbGlkZXIgbm90IGhvdmVyZWQgKG1vdXNlIG91dHNpZGUgc2xpZGVyKSwgaGlkZSBzbGlkZXIgZGVsYXllZFxyXG4gICAgICAgICAgICBpZiAoIXZvbHVtZVNsaWRlckhvdmVyZWQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnZvbHVtZVNsaWRlckhpZGVUaW1lb3V0LnJlc2V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWb2x1bWVDb250cm9sQnV0dG9uLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVsZWFzZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMudm9sdW1lU2xpZGVySGlkZVRpbWVvdXQuY2xlYXIoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIGFjY2VzcyB0byB0aGUgaW50ZXJuYWxseSBtYW5hZ2VkIHZvbHVtZSB0b2dnbGUgYnV0dG9uLlxyXG4gICAgICogQHJldHVybnMge1ZvbHVtZVRvZ2dsZUJ1dHRvbn1cclxuICAgICAqL1xyXG4gICAgVm9sdW1lQ29udHJvbEJ1dHRvbi5wcm90b3R5cGUuZ2V0Vm9sdW1lVG9nZ2xlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZvbHVtZVRvZ2dsZUJ1dHRvbjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIGFjY2VzcyB0byB0aGUgaW50ZXJuYWxseSBtYW5hZ2VkIHZvbHVtZSBzaWxkZXIuXHJcbiAgICAgKiBAcmV0dXJucyB7Vm9sdW1lU2xpZGVyfVxyXG4gICAgICovXHJcbiAgICBWb2x1bWVDb250cm9sQnV0dG9uLnByb3RvdHlwZS5nZXRWb2x1bWVTbGlkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudm9sdW1lU2xpZGVyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBWb2x1bWVDb250cm9sQnV0dG9uO1xyXG59KGNvbnRhaW5lcl8xLkNvbnRhaW5lcikpO1xyXG5leHBvcnRzLlZvbHVtZUNvbnRyb2xCdXR0b24gPSBWb2x1bWVDb250cm9sQnV0dG9uO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvdm9sdW1lY29udHJvbGJ1dHRvbi50c1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBzZWVrYmFyXzEgPSByZXF1aXJlKFwiLi9zZWVrYmFyXCIpO1xyXG4vKipcclxuICogQSBzaW1wbGUgdm9sdW1lIHNsaWRlciBjb21wb25lbnQgdG8gYWRqdXN0IHRoZSBwbGF5ZXIncyB2b2x1bWUgc2V0dGluZy5cclxuICovXHJcbnZhciBWb2x1bWVTbGlkZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFZvbHVtZVNsaWRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFZvbHVtZVNsaWRlcihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktdm9sdW1lc2xpZGVyJyxcclxuICAgICAgICAgICAgaGlkZUlmVm9sdW1lQ29udHJvbFByb2hpYml0ZWQ6IHRydWUsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBWb2x1bWVTbGlkZXIucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlciwgZmFsc2UpO1xyXG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xyXG4gICAgICAgIGlmIChjb25maWcuaGlkZUlmVm9sdW1lQ29udHJvbFByb2hpYml0ZWQgJiYgIXRoaXMuZGV0ZWN0Vm9sdW1lQ29udHJvbEF2YWlsYWJpbGl0eShwbGF5ZXIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICAvLyBXZSBjYW4ganVzdCByZXR1cm4gZnJvbSBoZXJlLCBiZWNhdXNlIHRoZSB1c2VyIHdpbGwgbmV2ZXIgaW50ZXJhY3Qgd2l0aCB0aGUgY29udHJvbCBhbmQgYW55IGNvbmZpZ3VyZWRcclxuICAgICAgICAgICAgLy8gZnVuY3Rpb25hbGl0eSB3b3VsZCBvbmx5IGVhdCByZXNvdXJjZXMgZm9yIG5vIHJlYXNvbi5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdm9sdW1lQ2hhbmdlSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc011dGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldFBsYXliYWNrUG9zaXRpb24oMCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRCdWZmZXJQb3NpdGlvbigwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldFBsYXliYWNrUG9zaXRpb24ocGxheWVyLmdldFZvbHVtZSgpKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldEJ1ZmZlclBvc2l0aW9uKHBsYXllci5nZXRWb2x1bWUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1JFQURZLCB2b2x1bWVDaGFuZ2VIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9WT0xVTUVfQ0hBTkdFRCwgdm9sdW1lQ2hhbmdlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fTVVURUQsIHZvbHVtZUNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1VOTVVURUQsIHZvbHVtZUNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgIHRoaXMub25TZWVrUHJldmlldy5zdWJzY3JpYmVSYXRlTGltaXRlZChmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgICAgIGlmIChhcmdzLnNjcnViYmluZykge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnNldFZvbHVtZShhcmdzLnBvc2l0aW9uLCBWb2x1bWVTbGlkZXIuaXNzdWVyTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCA1MCk7XHJcbiAgICAgICAgdGhpcy5vblNlZWtlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgcGVyY2VudGFnZSkge1xyXG4gICAgICAgICAgICBwbGF5ZXIuc2V0Vm9sdW1lKHBlcmNlbnRhZ2UsIFZvbHVtZVNsaWRlci5pc3N1ZXJOYW1lKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSBzbGlkZXIgbWFya2VyIHdoZW4gdGhlIHBsYXllciByZXNpemVkLCBhIHNvdXJjZSBpcyBsb2FkZWQgYW5kIHBsYXllciBpcyByZWFkeSxcclxuICAgICAgICAvLyBvciB0aGUgVUkgaXMgY29uZmlndXJlZC4gQ2hlY2sgdGhlIHNlZWtiYXIgZm9yIGEgZGV0YWlsZWQgZGVzY3JpcHRpb24uXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWUVSX1JFU0laRSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1JFQURZLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uQ29uZmlndXJlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEluaXQgdm9sdW1lIGJhclxyXG4gICAgICAgIHZvbHVtZUNoYW5nZUhhbmRsZXIoKTtcclxuICAgIH07XHJcbiAgICBWb2x1bWVTbGlkZXIucHJvdG90eXBlLmRldGVjdFZvbHVtZUNvbnRyb2xBdmFpbGFiaWxpdHkgPSBmdW5jdGlvbiAocGxheWVyKSB7XHJcbiAgICAgICAgLy8gU3RvcmUgY3VycmVudCBwbGF5ZXIgc3RhdGUgc28gd2UgY2FuIHJlc3RvcmUgaXQgbGF0ZXJcclxuICAgICAgICB2YXIgdm9sdW1lID0gcGxheWVyLmdldFZvbHVtZSgpO1xyXG4gICAgICAgIHZhciBtdXRlZCA9IHBsYXllci5pc011dGVkKCk7XHJcbiAgICAgICAgdmFyIHBsYXlpbmcgPSBwbGF5ZXIuaXNQbGF5aW5nKCk7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBcIk9uIGlPUyBkZXZpY2VzLCB0aGUgYXVkaW8gbGV2ZWwgaXMgYWx3YXlzIHVuZGVyIHRoZSB1c2Vy4oCZcyBwaHlzaWNhbCBjb250cm9sLiBUaGUgdm9sdW1lIHByb3BlcnR5IGlzIG5vdFxyXG4gICAgICAgICAqIHNldHRhYmxlIGluIEphdmFTY3JpcHQuIFJlYWRpbmcgdGhlIHZvbHVtZSBwcm9wZXJ0eSBhbHdheXMgcmV0dXJucyAxLlwiXHJcbiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2xpYnJhcnkvY29udGVudC9kb2N1bWVudGF0aW9uL0F1ZGlvVmlkZW8vQ29uY2VwdHVhbC9Vc2luZ19IVE1MNV9BdWRpb19WaWRlby9EZXZpY2UtU3BlY2lmaWNDb25zaWRlcmF0aW9ucy9EZXZpY2UtU3BlY2lmaWNDb25zaWRlcmF0aW9ucy5odG1sXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBPdXIgcGxheWVyIEFQSSByZXR1cm5zIGEgdm9sdW1lIHJhbmdlIG9mIFswLCAxMDBdIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIDEwMCBpbnN0ZWFkIG9mIDEuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLy8gT25seSBpZiB0aGUgdm9sdW1lIGlzIDEwMCwgdGhlcmUncyB0aGUgcG9zc2liaWxpdHkgd2UgYXJlIG9uIGEgdm9sdW1lLWNvbnRyb2wtcmVzdHJpY3RlZCBpT1MgZGV2aWNlXHJcbiAgICAgICAgaWYgKHZvbHVtZSA9PT0gMTAwKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIHNldCB0aGUgdm9sdW1lIHRvIHplcm8gKHRoYXQncyB0aGUgb25seSB2YWx1ZSB0aGF0IGRvZXMgbm90IHVubXV0ZSBhIG11dGVkIHBsYXllciEpXHJcbiAgICAgICAgICAgIHBsYXllci5zZXRWb2x1bWUoMCwgVm9sdW1lU2xpZGVyLmlzc3Vlck5hbWUpO1xyXG4gICAgICAgICAgICAvLyBUaGVuIHdlIGNoZWNrIGlmIHRoZSB2YWx1ZSBpcyBzdGlsbCAxMDBcclxuICAgICAgICAgICAgaWYgKHBsYXllci5nZXRWb2x1bWUoKSA9PT0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdm9sdW1lIHN0YXllZCBhdCAxMDAsIHdlJ3JlIG9uIGEgdm9sdW1lLWNvbnRyb2wtcmVzdHJpY3RlZCBkZXZpY2VcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGNhbiBjb250cm9sIHZvbHVtZSwgc28gd2UgbXVzdCByZXN0b3JlIHRoZSBwcmV2aW91cyBwbGF5ZXIgc3RhdGVcclxuICAgICAgICAgICAgICAgIHBsYXllci5zZXRWb2x1bWUodm9sdW1lLCBWb2x1bWVTbGlkZXIuaXNzdWVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobXV0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIubXV0ZShWb2x1bWVTbGlkZXIuaXNzdWVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocGxheWluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSB2b2x1bWUgcmVzdG9yZSBhYm92ZSBwYXVzZXMgYXV0b3BsYXkgb24gbW9iaWxlIGRldmljZXMgKGUuZy4gQW5kcm9pZCkgc28gd2UgbmVlZCB0byByZXN1bWUgcGxheWJhY2tcclxuICAgICAgICAgICAgICAgICAgICAvLyAoV2UgY2Fubm90IGNoZWNrIGlzUGF1c2VkKCkgaGVyZSBiZWNhdXNlIGl0IGlzIG5vdCBzZXQgd2hlbiBwbGF5YmFjayBpcyBwcm9oaWJpdGVkIGJ5IHRoZSBtb2JpbGUgcGxhdGZvcm0pXHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnBsYXkoVm9sdW1lU2xpZGVyLmlzc3Vlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFZvbHVtZSBpcyBub3QgMTAwLCBzbyB3ZSdyZSBkZWZpbml0ZWx5IG5vdCBvbiBhIHZvbHVtZS1jb250cm9sLXJlc3RyaWN0ZWQgaU9TIGRldmljZVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZvbHVtZVNsaWRlcjtcclxufShzZWVrYmFyXzEuU2Vla0JhcikpO1xyXG5Wb2x1bWVTbGlkZXIuaXNzdWVyTmFtZSA9ICd1aSc7XHJcbmV4cG9ydHMuVm9sdW1lU2xpZGVyID0gVm9sdW1lU2xpZGVyO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvdm9sdW1lc2xpZGVyLnRzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vdG9nZ2xlYnV0dG9uXCIpO1xyXG4vKipcclxuICogQSBidXR0b24gdGhhdCB0b2dnbGVzIGF1ZGlvIG11dGluZy5cclxuICovXHJcbnZhciBWb2x1bWVUb2dnbGVCdXR0b24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFZvbHVtZVRvZ2dsZUJ1dHRvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFZvbHVtZVRvZ2dsZUJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktdm9sdW1ldG9nZ2xlYnV0dG9uJyxcclxuICAgICAgICAgICAgdGV4dDogJ1ZvbHVtZS9NdXRlJyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFZvbHVtZVRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgbXV0ZVN0YXRlSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc011dGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vZmYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHZvbHVtZUxldmVsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gVG9nZ2xlIGxvdyBjbGFzcyB0byBkaXNwbGF5IGxvdyB2b2x1bWUgaWNvbiBiZWxvdyA1MCUgdm9sdW1lXHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuZ2V0Vm9sdW1lKCkgPCA1MCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKF90aGlzLnByZWZpeENzcygnbG93JykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcygnbG93JykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9NVVRFRCwgbXV0ZVN0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVU5NVVRFRCwgbXV0ZVN0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVk9MVU1FX0NIQU5HRUQsIHZvbHVtZUxldmVsSGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNNdXRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIudW5tdXRlKCd1aS12b2x1bWV0b2dnbGVidXR0b24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5tdXRlKCd1aS12b2x1bWV0b2dnbGVidXR0b24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFN0YXJ0dXAgaW5pdFxyXG4gICAgICAgIG11dGVTdGF0ZUhhbmRsZXIoKTtcclxuICAgICAgICB2b2x1bWVMZXZlbEhhbmRsZXIoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVm9sdW1lVG9nZ2xlQnV0dG9uO1xyXG59KHRvZ2dsZWJ1dHRvbl8xLlRvZ2dsZUJ1dHRvbikpO1xyXG5leHBvcnRzLlZvbHVtZVRvZ2dsZUJ1dHRvbiA9IFZvbHVtZVRvZ2dsZUJ1dHRvbjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3ZvbHVtZXRvZ2dsZWJ1dHRvbi50c1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbnRhaW5lclwiKTtcclxudmFyIGxhYmVsXzEgPSByZXF1aXJlKFwiLi9sYWJlbFwiKTtcclxudmFyIHR2bm9pc2VjYW52YXNfMSA9IHJlcXVpcmUoXCIuL3R2bm9pc2VjYW52YXNcIik7XHJcbi8qKlxyXG4gKiBPdmVybGF5cyB0aGUgcGxheWVyIGFuZCBkaXNwbGF5cyBlcnJvciBtZXNzYWdlcy5cclxuICovXHJcbnZhciBFcnJvck1lc3NhZ2VPdmVybGF5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhFcnJvck1lc3NhZ2VPdmVybGF5LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRXJyb3JNZXNzYWdlT3ZlcmxheShjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZXJyb3JMYWJlbCA9IG5ldyBsYWJlbF8xLkxhYmVsKHsgY3NzQ2xhc3M6ICd1aS1lcnJvcm1lc3NhZ2UtbGFiZWwnIH0pO1xyXG4gICAgICAgIF90aGlzLnR2Tm9pc2VCYWNrZ3JvdW5kID0gbmV3IHR2bm9pc2VjYW52YXNfMS5Udk5vaXNlQ2FudmFzKCk7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktZXJyb3JtZXNzYWdlLW92ZXJsYXknLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBbX3RoaXMudHZOb2lzZUJhY2tncm91bmQsIF90aGlzLmVycm9yTGFiZWxdLFxyXG4gICAgICAgICAgICBoaWRkZW46IHRydWUsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBFcnJvck1lc3NhZ2VPdmVybGF5LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0VSUk9SLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBldmVudC5tZXNzYWdlO1xyXG4gICAgICAgICAgICAvLyBQcm9jZXNzIG1lc3NhZ2UgdHJhbnNsYXRpb25zXHJcbiAgICAgICAgICAgIGlmIChjb25maWcubWVzc2FnZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm1lc3NhZ2VzID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJhbnNsYXRpb24gZnVuY3Rpb24gZm9yIGFsbCBlcnJvcnNcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gY29uZmlnLm1lc3NhZ2VzKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZy5tZXNzYWdlc1tldmVudC5jb2RlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEl0J3Mgbm90IGEgdHJhbnNsYXRpb24gZnVuY3Rpb24sIHNvIGl0IG11c3QgYmUgYSBtYXAgb2Ygc3RyaW5ncyBvciB0cmFuc2xhdGlvbiBmdW5jdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VzdG9tTWVzc2FnZSA9IGNvbmZpZy5tZXNzYWdlc1tldmVudC5jb2RlXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1c3RvbU1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBjdXN0b21NZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG1lc3NhZ2UgaXMgYSB0cmFuc2xhdGlvbiBmdW5jdGlvbiwgc28gd2UgY2FsbCBpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gY3VzdG9tTWVzc2FnZShldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmVycm9yTGFiZWwuc2V0VGV4dChtZXNzYWdlKTtcclxuICAgICAgICAgICAgX3RoaXMudHZOb2lzZUJhY2tncm91bmQuc3RhcnQoKTtcclxuICAgICAgICAgICAgX3RoaXMuc2hvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NPVVJDRV9MT0FERUQsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuaXNTaG93bigpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50dk5vaXNlQmFja2dyb3VuZC5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBFcnJvck1lc3NhZ2VPdmVybGF5LnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVsZWFzZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIC8vIENhbnZhcyByZW5kZXJpbmcgbXVzdCBiZSBleHBsaWNpdGx5IHN0b3BwZWQsIGVsc2UgaXQganVzdCBjb250aW51ZXMgZm9yZXZlciBhbmQgaG9ncyByZXNvdXJjZXNcclxuICAgICAgICB0aGlzLnR2Tm9pc2VCYWNrZ3JvdW5kLnN0b3AoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXJyb3JNZXNzYWdlT3ZlcmxheTtcclxufShjb250YWluZXJfMS5Db250YWluZXIpKTtcclxuZXhwb3J0cy5FcnJvck1lc3NhZ2VPdmVybGF5ID0gRXJyb3JNZXNzYWdlT3ZlcmxheTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2Vycm9ybWVzc2FnZW92ZXJsYXkudHNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29udGFpbmVyXzEgPSByZXF1aXJlKFwiLi9jb250YWluZXJcIik7XHJcbnZhciBodWdlcGxheWJhY2t0b2dnbGVidXR0b25fMSA9IHJlcXVpcmUoXCIuL2h1Z2VwbGF5YmFja3RvZ2dsZWJ1dHRvblwiKTtcclxuLyoqXHJcbiAqIE92ZXJsYXlzIHRoZSBwbGF5ZXIgYW5kIGRpc3BsYXlzIGVycm9yIG1lc3NhZ2VzLlxyXG4gKi9cclxudmFyIFBsYXliYWNrVG9nZ2xlT3ZlcmxheSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUGxheWJhY2tUb2dnbGVPdmVybGF5LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUGxheWJhY2tUb2dnbGVPdmVybGF5KGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5wbGF5YmFja1RvZ2dsZUJ1dHRvbiA9IG5ldyBodWdlcGxheWJhY2t0b2dnbGVidXR0b25fMS5IdWdlUGxheWJhY2tUb2dnbGVCdXR0b24oKTtcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1wbGF5YmFja3RvZ2dsZS1vdmVybGF5JyxcclxuICAgICAgICAgICAgY29tcG9uZW50czogW190aGlzLnBsYXliYWNrVG9nZ2xlQnV0dG9uXSxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBQbGF5YmFja1RvZ2dsZU92ZXJsYXk7XHJcbn0oY29udGFpbmVyXzEuQ29udGFpbmVyKSk7XHJcbmV4cG9ydHMuUGxheWJhY2tUb2dnbGVPdmVybGF5ID0gUGxheWJhY2tUb2dnbGVPdmVybGF5O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvcGxheWJhY2t0b2dnbGVvdmVybGF5LnRzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHBsYXliYWNrdG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9wbGF5YmFja3RvZ2dsZWJ1dHRvblwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4uL2RvbVwiKTtcclxuLyoqXHJcbiAqIEEgYnV0dG9uIHRoYXQgb3ZlcmxheXMgdGhlIHZpZGVvIGFuZCB0b2dnbGVzIGJldHdlZW4gcGxheWJhY2sgYW5kIHBhdXNlLlxyXG4gKi9cclxudmFyIEh1Z2VQbGF5YmFja1RvZ2dsZUJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoSHVnZVBsYXliYWNrVG9nZ2xlQnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSHVnZVBsYXliYWNrVG9nZ2xlQnV0dG9uKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1odWdlcGxheWJhY2t0b2dnbGVidXR0b24nLFxyXG4gICAgICAgICAgICB0ZXh0OiAnUGxheS9QYXVzZScsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBIdWdlUGxheWJhY2tUb2dnbGVCdXR0b24ucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gVXBkYXRlIGJ1dHRvbiBzdGF0ZSB0aHJvdWdoIEFQSSBldmVudHNcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyLCBmYWxzZSk7XHJcbiAgICAgICAgdmFyIHRvZ2dsZVBsYXliYWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzUGxheWluZygpKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGF1c2UoJ3VpJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxheSgndWknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHRvZ2dsZUZ1bGxzY3JlZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNGdWxsc2NyZWVuKCkpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5leGl0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmVudGVyRnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgZmlyc3RQbGF5ID0gdHJ1ZTtcclxuICAgICAgICB2YXIgY2xpY2tUaW1lID0gMDtcclxuICAgICAgICB2YXIgZG91YmxlQ2xpY2tUaW1lID0gMDtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIFlvdVR1YmUtc3R5bGUgdG9nZ2xlIGJ1dHRvbiBoYW5kbGluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhlIGdvYWwgaXMgdG8gcHJldmVudCBhIHNob3J0IHBhdXNlIG9yIHBsYXliYWNrIGludGVydmFsIGJldHdlZW4gYSBjbGljaywgdGhhdCB0b2dnbGVzIHBsYXliYWNrLCBhbmQgYVxyXG4gICAgICAgICAqIGRvdWJsZSBjbGljaywgdGhhdCB0b2dnbGVzIGZ1bGxzY3JlZW4uIEluIHRoaXMgbmFpdmUgYXBwcm9hY2gsIHRoZSBmaXJzdCBjbGljayB3b3VsZCBlLmcuIHN0YXJ0IHBsYXliYWNrLFxyXG4gICAgICAgICAqIHRoZSBzZWNvbmQgY2xpY2sgd291bGQgYmUgZGV0ZWN0ZWQgYXMgZG91YmxlIGNsaWNrIGFuZCB0b2dnbGUgdG8gZnVsbHNjcmVlbiwgYW5kIGFzIHNlY29uZCBub3JtYWwgY2xpY2sgc3RvcFxyXG4gICAgICAgICAqIHBsYXliYWNrLCB3aGljaCByZXN1bHRzIGlzIGEgc2hvcnQgcGxheWJhY2sgaW50ZXJ2YWwgd2l0aCBtYXggbGVuZ3RoIG9mIHRoZSBkb3VibGUgY2xpY2sgZGV0ZWN0aW9uXHJcbiAgICAgICAgICogcGVyaW9kICh1c3VhbGx5IDUwMG1zKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRvIHNvbHZlIHRoaXMgaXNzdWUsIHdlIGRlZmVyIGhhbmRsaW5nIG9mIHRoZSBmaXJzdCBjbGljayBmb3IgMjAwbXMsIHdoaWNoIGlzIGFsbW9zdCB1bm5vdGljZWFibGUgdG8gdGhlIHVzZXIsXHJcbiAgICAgICAgICogYW5kIGp1c3QgdG9nZ2xlIHBsYXliYWNrIGlmIG5vIHNlY29uZCBjbGljayAoZG91YmxlIGNsaWNrKSBoYXMgYmVlbiByZWdpc3RlcmVkIGR1cmluZyB0aGlzIHBlcmlvZC4gSWYgYSBkb3VibGVcclxuICAgICAgICAgKiBjbGljayBpcyByZWdpc3RlcmVkLCB3ZSBqdXN0IHRvZ2dsZSB0aGUgZnVsbHNjcmVlbi4gSW4gdGhlIGZpcnN0IDIwMG1zLCB1bmRlc2lyZWQgcGxheWJhY2sgY2hhbmdlcyB0aHVzIGNhbm5vdFxyXG4gICAgICAgICAqIGhhcHBlbi4gSWYgYSBkb3VibGUgY2xpY2sgaXMgcmVnaXN0ZXJlZCB3aXRoaW4gNTAwbXMsIHdlIHVuZG8gdGhlIHBsYXliYWNrIGNoYW5nZSBhbmQgc3dpdGNoIGZ1bGxzY3JlZW4gbW9kZS5cclxuICAgICAgICAgKiBJbiB0aGUgZW5kLCB0aGlzIG1ldGhvZCBiYXNpY2FsbHkgaW50cm9kdWNlcyBhIDIwMG1zIG9ic2VydmluZyBpbnRlcnZhbCBpbiB3aGljaCBwbGF5YmFjayBjaGFuZ2VzIGFyZSBwcmV2ZW50ZWRcclxuICAgICAgICAgKiBpZiBhIGRvdWJsZSBjbGljayBoYXBwZW5zLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMub25DbGljay5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBEaXJlY3RseSBzdGFydCBwbGF5YmFjayBvbiBmaXJzdCBjbGljayBvZiB0aGUgYnV0dG9uLlxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgcmVxdWlyZWQgd29ya2Fyb3VuZCBmb3IgbW9iaWxlIGJyb3dzZXJzIHdoZXJlIHZpZGVvIHBsYXliYWNrIG5lZWRzIHRvIGJlIHRyaWdnZXJlZCBkaXJlY3RseVxyXG4gICAgICAgICAgICAvLyBieSB0aGUgdXNlci4gQSBkZWZlcnJlZCBwbGF5YmFjayBzdGFydCB0aHJvdWdoIHRoZSB0aW1lb3V0IGJlbG93IGlzIG5vdCBjb25zaWRlcmVkIGFzIHVzZXIgYWN0aW9uIGFuZFxyXG4gICAgICAgICAgICAvLyB0aGVyZWZvcmUgaWdub3JlZCBieSBtb2JpbGUgYnJvd3NlcnMuXHJcbiAgICAgICAgICAgIGlmIChmaXJzdFBsYXkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRyeSB0byBzdGFydCBwbGF5YmFjay4gVGhlbiB3ZSB3YWl0IGZvciBPTl9QTEFZIGFuZCBvbmx5IHdoZW4gaXQgYXJyaXZlcywgd2UgZGlzYWJsZSB0aGUgZmlyc3RQbGF5IGZsYWcuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBkaXNhYmxlIHRoZSBmbGFnIGhlcmUsIG9uQ2xpY2sgd2FzIHRyaWdnZXJlZCBwcm9ncmFtbWF0aWNhbGx5IGluc3RlYWQgb2YgYnkgYSB1c2VyIGludGVyYWN0aW9uLCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIHBsYXliYWNrIGlzIGJsb2NrZWQgKGUuZy4gb24gbW9iaWxlIGRldmljZXMgZHVlIHRvIHRoZSBwcm9ncmFtbWF0aWMgcGxheSgpIGNhbGwpLCB3ZSBsb29zZSB0aGUgY2hhbmNlIHRvXHJcbiAgICAgICAgICAgICAgICAvLyBldmVyIHN0YXJ0IHBsYXliYWNrIHRocm91Z2ggYSB1c2VyIGludGVyYWN0aW9uIGFnYWluIHdpdGggdGhpcyBidXR0b24uXHJcbiAgICAgICAgICAgICAgICB0b2dnbGVQbGF5YmFjaygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICBpZiAobm93IC0gY2xpY2tUaW1lIDwgMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgZG91YmxlIGNsaWNrIGluc2lkZSB0aGUgMjAwbXMgaW50ZXJ2YWwsIGp1c3QgdG9nZ2xlIGZ1bGxzY3JlZW4gbW9kZVxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlRnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICAgICAgZG91YmxlQ2xpY2tUaW1lID0gbm93O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG5vdyAtIGNsaWNrVGltZSA8IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGRvdWJsZSBjbGljayBpbnNpZGUgdGhlIDUwMG1zIGludGVydmFsLCB1bmRvIHBsYXliYWNrIHRvZ2dsZSBhbmQgdG9nZ2xlIGZ1bGxzY3JlZW4gbW9kZVxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlRnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlUGxheWJhY2soKTtcclxuICAgICAgICAgICAgICAgIGRvdWJsZUNsaWNrVGltZSA9IG5vdztcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjbGlja1RpbWUgPSBub3c7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSBkb3VibGVDbGlja1RpbWUgPiAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBObyBkb3VibGUgY2xpY2sgZGV0ZWN0ZWQsIHNvIHdlIHRvZ2dsZSBwbGF5YmFjayBhbmQgd2FpdCB3aGF0IGhhcHBlbnMgbmV4dFxyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVBsYXliYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBQbGF5YmFjayBoYXMgcmVhbGx5IHN0YXJ0ZWQsIHdlIGNhbiBkaXNhYmxlIHRoZSBmbGFnIHRvIHN3aXRjaCB0byBub3JtYWwgdG9nZ2xlIGJ1dHRvbiBoYW5kbGluZ1xyXG4gICAgICAgICAgICBmaXJzdFBsYXkgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBIaWRlIGJ1dHRvbiB3aGlsZSBpbml0aWFsaXppbmcgYSBDYXN0IHNlc3Npb25cclxuICAgICAgICB2YXIgY2FzdEluaXRpYWxpemF0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gcGxheWVyLkVWRU5ULk9OX0NBU1RfU1RBUlQpIHtcclxuICAgICAgICAgICAgICAgIC8vIEhpZGUgYnV0dG9uIHdoZW4gc2Vzc2lvbiBpcyBiZWluZyBpbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gU2hvdyBidXR0b24gd2hlbiBzZXNzaW9uIGlzIGVzdGFibGlzaGVkIG9yIGluaXRpYWxpemF0aW9uIHdhcyBhYm9ydGVkXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfU1RBUlQsIGNhc3RJbml0aWFsaXphdGlvbkhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfU1RBUlRFRCwgY2FzdEluaXRpYWxpemF0aW9uSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9TVE9QUEVELCBjYXN0SW5pdGlhbGl6YXRpb25IYW5kbGVyKTtcclxuICAgIH07XHJcbiAgICBIdWdlUGxheWJhY2tUb2dnbGVCdXR0b24ucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYnV0dG9uRWxlbWVudCA9IF9zdXBlci5wcm90b3R5cGUudG9Eb21FbGVtZW50LmNhbGwodGhpcyk7XHJcbiAgICAgICAgLy8gQWRkIGNoaWxkIHRoYXQgY29udGFpbnMgdGhlIHBsYXkgYnV0dG9uIGltYWdlXHJcbiAgICAgICAgLy8gU2V0dGluZyB0aGUgaW1hZ2UgZGlyZWN0bHkgb24gdGhlIGJ1dHRvbiBkb2VzIG5vdCB3b3JrIHRvZ2V0aGVyIHdpdGggc2NhbGluZyBhbmltYXRpb25zLCBiZWNhdXNlIHRoZSBidXR0b25cclxuICAgICAgICAvLyBjYW4gY292ZXIgdGhlIHdob2xlIHZpZGVvIHBsYXllciBhcmUgYW5kIHNjYWxpbmcgd291bGQgZXh0ZW5kIGl0IGJleW9uZC4gQnkgYWRkaW5nIGFuIGlubmVyIGVsZW1lbnQsIGNvbmZpbmVkXHJcbiAgICAgICAgLy8gdG8gdGhlIHNpemUgaWYgdGhlIGltYWdlLCBpdCBjYW4gc2NhbGUgaW5zaWRlIHRoZSBwbGF5ZXIgd2l0aG91dCBvdmVyc2hvb3RpbmcuXHJcbiAgICAgICAgYnV0dG9uRWxlbWVudC5hcHBlbmQobmV3IGRvbV8xLkRPTSgnZGl2Jywge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnaW1hZ2UnKSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuIGJ1dHRvbkVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEh1Z2VQbGF5YmFja1RvZ2dsZUJ1dHRvbjtcclxufShwbGF5YmFja3RvZ2dsZWJ1dHRvbl8xLlBsYXliYWNrVG9nZ2xlQnV0dG9uKSk7XHJcbmV4cG9ydHMuSHVnZVBsYXliYWNrVG9nZ2xlQnV0dG9uID0gSHVnZVBsYXliYWNrVG9nZ2xlQnV0dG9uO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvaHVnZXBsYXliYWNrdG9nZ2xlYnV0dG9uLnRzXG4vLyBtb2R1bGUgaWQgPSAyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29udGFpbmVyXCIpO1xyXG52YXIgY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRcIik7XHJcbi8vIGltcG9ydCBQbGF5ZXJFdmVudCA9IGJpdG1vdmluLlBsYXllckFQSS5QbGF5ZXJFdmVudDtcclxuLyoqXHJcbiAqIE92ZXJsYXlzIHRoZSBwbGF5ZXIgYW5kIGRpc3BsYXlzIGFuIGF1ZGlvLW9ubHkgaW5kaWNhdG9yLlxyXG4gKi9cclxudmFyIEF1ZGlvT25seU92ZXJsYXkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEF1ZGlvT25seU92ZXJsYXksIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBdWRpb09ubHlPdmVybGF5KGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5hdWRpb29ubHkgPSBbXHJcbiAgICAgICAgICAgIG5ldyBjb21wb25lbnRfMS5Db21wb25lbnQoeyB0YWc6ICdkaXYnLCBjc3NDbGFzczogJ3VpLWF1ZGlvb25seS1vdmVybGF5LWluZGljYXRvcicgfSksXHJcbiAgICAgICAgXTtcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1hdWRpb29ubHktb3ZlcmxheScsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IF90aGlzLmF1ZGlvb25seSxcclxuICAgICAgICAgICAgaGlkZGVuOiBmYWxzZSxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEF1ZGlvT25seU92ZXJsYXkucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgaW1hZ2UgPSBzZWxmLmdldERvbUVsZW1lbnQoKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnKTtcclxuICAgICAgICAvLyBIaWRlIG92ZXJsYXkgd2hlbiBQbGF5ZXIgaXMgcGF1c2VkLCBzbyB3ZSBjYW4gc2VlIHRoZSBCaWcgUGxheSBCdXR0b25cclxuICAgICAgICAvLyBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QQVVTRUQsIChldmVudCkgPT4ge1xyXG4gICAgICAgIC8vICAgc2VsZi5nZXREb21FbGVtZW50KCkuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ25vbmUnKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BMQVksIChldmVudCkgPT4ge1xyXG4gICAgICAgIC8vICAgc2VsZi5nZXREb21FbGVtZW50KCkuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgaW1hZ2UpO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gLy8gSGlkZSBvdmVybGF5IGlmIHBsYXllciBpcyAgcGF1c2VkIGF0IGluaXQgKGUuZy4gb24gbW9iaWxlIGRldmljZXMpXHJcbiAgICAgICAgLy8gaWYgKCFwbGF5ZXIuaXNQbGF5aW5nKCkpIHtcclxuICAgICAgICAvLyAgIHNlbGYuZ2V0RG9tRWxlbWVudCgpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICdub25lJyk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBBdWRpb09ubHlPdmVybGF5O1xyXG59KGNvbnRhaW5lcl8xLkNvbnRhaW5lcikpO1xyXG5leHBvcnRzLkF1ZGlvT25seU92ZXJsYXkgPSBBdWRpb09ubHlPdmVybGF5O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvYXVkaW9vbmx5b3ZlcmxheS50c1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKFwiYW5ndWxhclwiKTtcclxudmFyIGJpdGRhc2hfY29udHJvbGxlcl8xID0gcmVxdWlyZShcIi4vYml0ZGFzaC1jb250cm9sbGVyXCIpO1xyXG52YXIgYml0ZGFzaF9kaXJlY3RpdmVfMSA9IHJlcXVpcmUoXCIuL2JpdGRhc2gtZGlyZWN0aXZlXCIpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBhbmd1bGFyLm1vZHVsZSgnbWkuQml0ZGFzaFBsYXllcicsIFtdKVxyXG4gICAgLmNvbnRyb2xsZXIoJ01pQml0ZGFzaENvbnRyb2xsZXInLCBiaXRkYXNoX2NvbnRyb2xsZXJfMS5kZWZhdWx0KVxyXG4gICAgLmRpcmVjdGl2ZSgnbWlCaXRkYXNoUGxheWVyJywgYml0ZGFzaF9kaXJlY3RpdmVfMS5kZWZhdWx0KTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9pbmRleC50c1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKFwiYW5ndWxhclwiKTtcclxudmFyIEJpdG1vdmluQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCaXRtb3ZpbkNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgdGhpcy4kbG9nID0gJGxvZztcclxuICAgICAgICB0aGlzLnN0YXRlID0ge307XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSB7fTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcclxuICAgIH1cclxuICAgIEJpdG1vdmluQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy4kc2NvcGUuc3RhdGUgPSB7fTtcclxuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGhpcy4kc2NvcGUuY29uZmlnKSAmJiBhbmd1bGFyLmlzRGVmaW5lZCh0aGlzLiRzY29wZS5jb25maWcua2V5KSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMuJHNjb3BlLmNvbmZpZztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuJGxvZy5lcnJvcihcImJhc2ljIGNvbmZpZyBmb3IgYml0ZGFzaCBwbGF5ZXIgaXMgbWlzc2luZyFcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0aGlzLiRzY29wZS5vcHRpb25zKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLiRzY29wZS5vcHRpb25zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGhpcy4kc2NvcGUud2ViY2FzdCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzV2ViY2FzdCh0aGlzLiRzY29wZS53ZWJjYXN0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQml0bW92aW5Db250cm9sbGVyLnByb3RvdHlwZS5wcm9jZXNzV2ViY2FzdCA9IGZ1bmN0aW9uICh3ZWJjYXN0KSB7XHJcbiAgICAgICAgdmFyIHN0YXRlUHJvcGVydHkgPSB3ZWJjYXN0LnN0YXRlICsgXCJTdGF0ZURhdGFcIjtcclxuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGhpcy5vcHRpb25zLmZvcmNlZFN0YXRlKSkge1xyXG4gICAgICAgICAgICBzdGF0ZVByb3BlcnR5ID0gdGhpcy5vcHRpb25zLmZvcmNlZFN0YXRlICsgXCJTdGF0ZURhdGFcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHdlYmNhc3Quc3RhdGUgPT09ICdvbmRlbWFuZCcpIHtcclxuICAgICAgICAgICAgdmFyIGxhbmd1YWdlSW5kZXhfMSA9IDA7XHJcbiAgICAgICAgICAgIHdlYmNhc3QubGFuZ3VhZ2VzLnNvbWUoZnVuY3Rpb24gKGxhbmcsIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAod2ViY2FzdC5sYW5ndWFnZSA9PT0gbGFuZy5sYW5ndWFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlSW5kZXhfMSA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kYXRhID0gd2ViY2FzdC5sYW5ndWFnZXNbbGFuZ3VhZ2VJbmRleF8xXS5vbmRlbWFuZFN0YXRlRGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZGF0YSA9IHdlYmNhc3Rbc3RhdGVQcm9wZXJ0eV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29uZmlnLnNvdXJjZSA9IHRoaXMuZ2V0UGxheWVyQ29uZmlnU291cmNlKHdlYmNhc3QpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLnN0eWxlID0geyB1eDogZmFsc2UgfTtcclxuICAgIH07XHJcbiAgICBCaXRtb3ZpbkNvbnRyb2xsZXIucHJvdG90eXBlLmdldFBsYXllckNvbmZpZ1NvdXJjZSA9IGZ1bmN0aW9uICh3ZWJjYXN0KSB7XHJcbiAgICAgICAgcmV0dXJuIHdlYmNhc3QudXNlRFZSUGxheWJhY2tJblBvc3RsaXZlICYmIHdlYmNhc3Quc3RhdGUgPT09ICdwb3N0bGl2ZScgP1xyXG4gICAgICAgICAgICB0aGlzLmdldERWUlBsYXliYWNrVG9Qb3N0bGl2ZSh3ZWJjYXN0KVxyXG4gICAgICAgICAgICA6IHRoaXMuZ2V0UGxheWVyQ29uZmlnU291cmNlQnlTdGF0ZSh3ZWJjYXN0KTtcclxuICAgIH07XHJcbiAgICBCaXRtb3ZpbkNvbnRyb2xsZXIucHJvdG90eXBlLmdldERWUlBsYXliYWNrVG9Qb3N0bGl2ZSA9IGZ1bmN0aW9uICh3ZWJjYXN0KSB7XHJcbiAgICAgICAgdmFyIGhscyA9IHdlYmNhc3RbJ2xpdmVTdGF0ZURhdGEnXS5wbGF5b3V0Lmhsc0R2clVybDtcclxuICAgICAgICB2YXIgdGl0bGUgPSB3ZWJjYXN0Lm5hbWU7XHJcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHdlYmNhc3RbJ3Bvc3RsaXZlU3RhdGVEYXRhJ10ucGxheW91dC5vZmZzZXQpKSB7XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBwYXJzZUludCh3ZWJjYXN0Wydwb3N0bGl2ZVN0YXRlRGF0YSddLnBsYXlvdXQub2Zmc2V0LCAxMCk7XHJcbiAgICAgICAgICAgIGlmIChvZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXRQcmVmaXggPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyc2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgICAgICAgICAgcGFyc2VyLmhyZWYgPSB3ZWJjYXN0WydsaXZlU3RhdGVEYXRhJ10ucGxheW91dC5obHNEdnJVcmw7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRQcmVmaXggPSAocGFyc2VyLnNlYXJjaCkgPyAnJicgOiAnPyc7XHJcbiAgICAgICAgICAgICAgICBobHMgKz0gb2Zmc2V0UHJlZml4ICsgXCJ3b3d6YWR2cnBsYXlsaXN0c3RhcnQ9XCIgKyBvZmZzZXQgKyBcIjAwMFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGhsczogaGxzLCB0aXRsZTogdGl0bGUgfTtcclxuICAgIH07XHJcbiAgICBCaXRtb3ZpbkNvbnRyb2xsZXIucHJvdG90eXBlLmdldFBsYXllckNvbmZpZ1NvdXJjZUJ5U3RhdGUgPSBmdW5jdGlvbiAod2ViY2FzdCkge1xyXG4gICAgICAgIHZhciBobHMgPSB0aGlzLnN0YXRlLmRhdGEucGxheW91dC5obHNVcmw7XHJcbiAgICAgICAgdmFyIHRpdGxlID0gd2ViY2FzdC5uYW1lO1xyXG4gICAgICAgIHZhciBoaXZlU2VydmljZVVybCA9IHRoaXMuZ2V0SGl2ZVNlcnZpY2VVcmxCeUxhbmcod2ViY2FzdCk7XHJcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRoaXMuc3RhdGUuZGF0YS5wbGF5b3V0LnZpZGVvTWFuYWdlckhsc1VybCkgJiYgdGhpcy5zdGF0ZS5kYXRhLnBsYXlvdXQudmlkZW9NYW5hZ2VySGxzVXJsKSB7XHJcbiAgICAgICAgICAgIGhscyA9IHRoaXMuc3RhdGUuZGF0YS5wbGF5b3V0LnZpZGVvTWFuYWdlckhsc1VybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRoaXMuc3RhdGUuZGF0YS5wbGF5b3V0Lm9mZnNldCkpIHtcclxuICAgICAgICAgICAgdmFyIG9mZnNldCA9IHBhcnNlSW50KHRoaXMuc3RhdGUuZGF0YS5wbGF5b3V0Lm9mZnNldCwgMTApO1xyXG4gICAgICAgICAgICBpZiAob2Zmc2V0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFByZWZpeCA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJzZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICAgICAgICBwYXJzZXIuaHJlZiA9IGhscztcclxuICAgICAgICAgICAgICAgIG9mZnNldFByZWZpeCA9IChwYXJzZXIuc2VhcmNoKSA/ICcmJyA6ICc/JztcclxuICAgICAgICAgICAgICAgIGhscyArPSBvZmZzZXRQcmVmaXggKyBcInN0YXJ0PVwiICsgb2Zmc2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGhsczogaGxzLCB0aXRsZTogdGl0bGUsIGhpdmVTZXJ2aWNlVXJsOiBoaXZlU2VydmljZVVybCB9O1xyXG4gICAgfTtcclxuICAgIEJpdG1vdmluQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0SGl2ZVNlcnZpY2VVcmxCeUxhbmcgPSBmdW5jdGlvbiAod2ViY2FzdCkge1xyXG4gICAgICAgIHZhciBoaXZlU2VydmljZVVybCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHdlYmNhc3QubGFuZ3VhZ2VzICYmIHdlYmNhc3QubGFuZ3VhZ2UpIHtcclxuICAgICAgICAgICAgd2ViY2FzdC5sYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ubGFuZ3VhZ2UgPT09IHdlYmNhc3QubGFuZ3VhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBoaXZlU2VydmljZVVybCA9IGFuZ3VsYXIuY29weShpdGVtLmhpdmVTZXJ2aWNlVXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoaXZlU2VydmljZVVybDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQml0bW92aW5Db250cm9sbGVyO1xyXG59KCkpO1xyXG5CaXRtb3ZpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQml0bW92aW5Db250cm9sbGVyO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2JpdGRhc2gtY29udHJvbGxlci50c1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKFwiYW5ndWxhclwiKTtcclxudmFyIEJpdGRhc2hEaXJlY3RpdmUgPSBmdW5jdGlvbiAoJHdpbmRvdywgJGxvZykgeyByZXR1cm4gKHtcclxuICAgIGNvbnRyb2xsZXI6ICdNaUJpdGRhc2hDb250cm9sbGVyJyxcclxuICAgIGNvbnRyb2xsZXJBczogJ2JpdGRhc2hWbScsXHJcbiAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICBzY29wZToge1xyXG4gICAgICAgIGNvbmZpZzogJz0nLFxyXG4gICAgICAgIG9wdGlvbnM6ICc9PycsXHJcbiAgICAgICAgd2ViY2FzdDogJz0nLFxyXG4gICAgfSxcclxuICAgIHRlbXBsYXRlOiBcIjxkaXYgaWQ9XFxcIm1pLWJpdGRhc2gtcGxheWVyXFxcIiB3aWR0aD1cXFwiMTAwJVxcXCIgaGVpZ2h0PVxcXCJhdXRvXFxcIj48L2Rpdj5cIixcclxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xyXG4gICAgICAgIHZhciBiaXRtb3ZpblBsYXllcjtcclxuICAgICAgICB2YXIgYml0bW92aW5VSU1hbmFnZXI7XHJcbiAgICAgICAgdmFyIGJpdG1vdmluQ29udHJvbGJhcjtcclxuICAgICAgICB2YXIgY29uZmlnID0gc2NvcGUuY29uZmlnO1xyXG4gICAgICAgIHZhciB3ZWJjYXN0ID0gc2NvcGUud2ViY2FzdDtcclxuICAgICAgICB2YXIgc3RhdGVEYXRhID0gc2NvcGUuc3RhdGUuZGF0YTtcclxuICAgICAgICBidWlsZFBsYXllcigpO1xyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkUGxheWVyKCkge1xyXG4gICAgICAgICAgICBiaXRtb3ZpblBsYXllciA9ICR3aW5kb3cud2luZG93LmJpdG1vdmluLnBsYXllcignbWktYml0ZGFzaC1wbGF5ZXInKTtcclxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGJpdG1vdmluUGxheWVyKSAmJiBiaXRtb3ZpblBsYXllci5pc1JlYWR5KCkgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGJpdG1vdmluUGxheWVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIGJpdG1vdmluUGxheWVyID0gJHdpbmRvdy53aW5kb3cuYml0bW92aW4ucGxheWVyKCdtaS1iaXRkYXNoLXBsYXllcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgod2ViY2FzdC5zdGF0ZSA9PT0gJ2xpdmUnKSAmJiBjb25maWcuc291cmNlLmhpdmVTZXJ2aWNlVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgYSBoaXZlLWVuYWJsZWQgcGxheWVyIHRocm91Z2ggYml0ZGFzaC5pbml0SGl2ZVNETlxyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy53aW5kb3cuYml0bW92aW4uaW5pdEhpdmVTRE4oYml0bW92aW5QbGF5ZXIsIHsgZGVidWdMZXZlbDogJ29mZicgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBDb25maWd1cmUgYW5kIFNldHVwIGJpdG1vdmluIGluIGluaXRTZXNzaW9uIGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICBiaXRtb3ZpblBsYXllci5pbml0U2Vzc2lvbihjb25maWcuc291cmNlLmhpdmVTZXJ2aWNlVXJsKS50aGVuKGZ1bmN0aW9uIChzZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhpdmVDb25maWcgPSBhbmd1bGFyLmNvcHkoY29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICBoaXZlQ29uZmlnLnNvdXJjZS5obHMgPSBzZXNzaW9uLm1hbmlmZXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYWRQbGF5ZXIoaGl2ZUNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRoZSBjYXNlIGlmIEhpdmUgaW5pdCBmYWlsc1xyXG4gICAgICAgICAgICAgICAgICAgICRsb2cud2FybihcIkhpdmUgaW5pdCBmYWlsczogXCIgKyByZWFzb24uY29kZSArIFwiIC0gXCIgKyByZWFzb24ubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZFBsYXllcihjb25maWcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsb2FkUGxheWVyKGNvbmZpZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFBsYXllcihjb25mKSB7XHJcbiAgICAgICAgICAgIGJpdG1vdmluUGxheWVyXHJcbiAgICAgICAgICAgICAgICAuc2V0dXAoY29uZilcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGJpdG1vdmluVUlNYW5hZ2VyID0gJHdpbmRvdy53aW5kb3cuYml0bW92aW4ucGxheWVydWkuVUlNYW5hZ2VyLkZhY3Rvcnk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNBdWRpb09ubHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJpdG1vdmluVUlNYW5hZ2VyLmJ1aWxkQXVkaW9Pbmx5VUkoYml0bW92aW5QbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEF1ZGlvT25seVN0aWxsSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJpdG1vdmluVUlNYW5hZ2VyLmJ1aWxkQXVkaW9WaWRlb1VJKGJpdG1vdmluUGxheWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJpdG1vdmluQ29udHJvbGJhciA9IGdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpdG1vdmlucGxheWVyLWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGJpdG1vdmluQ29udHJvbGJhcikpIHtcclxuICAgICAgICAgICAgICAgICAgICBiaXRtb3ZpbkNvbnRyb2xiYXIuc3R5bGUubWluV2lkdGggPSAnMTc1cHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJpdG1vdmluQ29udHJvbGJhci5zdHlsZS5taW5IZWlnaHQgPSAnMTAxcHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaXRtb3ZpbnBsYXllci12aWRlby1taS1iaXRkYXNoLXBsYXllcicpLnNldEF0dHJpYnV0ZSgndGl0bGUnLCB3ZWJjYXN0Lm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAkbG9nLmxvZyhcIkVycm9yOiBcIiArIHJlYXNvbi5jb2RlICsgXCIgLSBcIiArIHJlYXNvbi5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGlzQXVkaW9Pbmx5KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYW5ndWxhci5pc0RlZmluZWQoc3RhdGVEYXRhLnBsYXlvdXQuYXVkaW9Pbmx5KSAmJlxyXG4gICAgICAgICAgICAgICAgc3RhdGVEYXRhLnBsYXlvdXQuYXVkaW9Pbmx5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBzZXRBdWRpb09ubHlTdGlsbEltYWdlKCkge1xyXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoc3RhdGVEYXRhLnBsYXlvdXQuYXVkaW9Pbmx5U3RpbGxVcmwpICYmXHJcbiAgICAgICAgICAgICAgICBzdGF0ZURhdGEucGxheW91dC5hdWRpb09ubHlTdGlsbFVybCAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWktd2JjLXVpLWF1ZGlvb25seS1vdmVybGF5Jyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgc3RhdGVEYXRhLnBsYXlvdXQuYXVkaW9Pbmx5U3RpbGxVcmwgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFNpemUgPSAnY29udGFpbic7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSlbMF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTsgfTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQml0ZGFzaERpcmVjdGl2ZTtcclxuQml0ZGFzaERpcmVjdGl2ZS4kaW5qZWN0ID0gWyckd2luZG93JywgJyRsb2cnXTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9iaXRkYXNoLWRpcmVjdGl2ZS50c1xuLy8gbW9kdWxlIGlkID0gMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0ncGxheWVyLmQudHMnIC8+XHJcbnZhciB1aW1hbmFnZXJfMSA9IHJlcXVpcmUoXCIuL3VpbWFuYWdlclwiKTtcclxudmFyIGJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9idXR0b25cIik7XHJcbnZhciBjb250cm9sYmFyXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2NvbnRyb2xiYXJcIik7XHJcbnZhciBodWdlcGxheWJhY2t0b2dnbGVidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvaHVnZXBsYXliYWNrdG9nZ2xlYnV0dG9uXCIpO1xyXG52YXIgcGxheWJhY2t0aW1lbGFiZWxfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvcGxheWJhY2t0aW1lbGFiZWxcIik7XHJcbnZhciBwbGF5YmFja3RvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9wbGF5YmFja3RvZ2dsZWJ1dHRvblwiKTtcclxudmFyIHNlZWtiYXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc2Vla2JhclwiKTtcclxudmFyIHNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zZWxlY3Rib3hcIik7XHJcbnZhciBpdGVtc2VsZWN0aW9ubGlzdF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9pdGVtc2VsZWN0aW9ubGlzdFwiKTtcclxuLy8gaW1wb3J0IHtTZXR0aW5nc1BhbmVsLCBTZXR0aW5nc1BhbmVsSXRlbX0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzcGFuZWwnO1xyXG4vLyBpbXBvcnQge1NldHRpbmdzVG9nZ2xlQnV0dG9ufSBmcm9tICcuL2NvbXBvbmVudHMvc2V0dGluZ3N0b2dnbGVidXR0b24nO1xyXG52YXIgdG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3RvZ2dsZWJ1dHRvblwiKTtcclxuLy8gaW1wb3J0IHtWaWRlb1F1YWxpdHlTZWxlY3RCb3h9IGZyb20gJy4vY29tcG9uZW50cy92aWRlb3F1YWxpdHlzZWxlY3Rib3gnO1xyXG52YXIgdm9sdW1ldG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3ZvbHVtZXRvZ2dsZWJ1dHRvblwiKTtcclxuLy8gaW1wb3J0IHtXYXRlcm1hcmt9IGZyb20gJy4vY29tcG9uZW50cy93YXRlcm1hcmsnO1xyXG52YXIgdWljb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdWljb250YWluZXJcIik7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvY29udGFpbmVyXCIpO1xyXG52YXIgbGFiZWxfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvbGFiZWxcIik7XHJcbnZhciBjb21wb25lbnRfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvY29tcG9uZW50XCIpO1xyXG52YXIgZXJyb3JtZXNzYWdlb3ZlcmxheV8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9lcnJvcm1lc3NhZ2VvdmVybGF5XCIpO1xyXG52YXIgc2Vla2JhcmxhYmVsXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3NlZWtiYXJsYWJlbFwiKTtcclxuLy8gaW1wb3J0IHtUaXRsZUJhcn0gZnJvbSAnLi9jb21wb25lbnRzL3RpdGxlYmFyJztcclxudmFyIHZvbHVtZWNvbnRyb2xidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdm9sdW1lY29udHJvbGJ1dHRvblwiKTtcclxudmFyIGNsaWNrb3ZlcmxheV8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9jbGlja292ZXJsYXlcIik7XHJcbnZhciBodWdlcmVwbGF5YnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2h1Z2VyZXBsYXlidXR0b25cIik7XHJcbi8vIGltcG9ydCB7QnVmZmVyaW5nT3ZlcmxheX0gZnJvbSAnLi9jb21wb25lbnRzL2J1ZmZlcmluZ292ZXJsYXknO1xyXG52YXIgcGxheWJhY2t0b2dnbGVvdmVybGF5XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3BsYXliYWNrdG9nZ2xlb3ZlcmxheVwiKTtcclxudmFyIGNsb3NlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2Nsb3NlYnV0dG9uXCIpO1xyXG4vLyBpbXBvcnQge01ldGFkYXRhTGFiZWwsIE1ldGFkYXRhTGFiZWxDb250ZW50fSBmcm9tICcuL2NvbXBvbmVudHMvbWV0YWRhdGFsYWJlbCc7XHJcbnZhciB2b2x1bWVzbGlkZXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdm9sdW1lc2xpZGVyXCIpO1xyXG52YXIgc3BhY2VyXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3NwYWNlclwiKTtcclxudmFyIGFycmF5dXRpbHNfMSA9IHJlcXVpcmUoXCIuL2FycmF5dXRpbHNcIik7XHJcbnZhciBzdHJpbmd1dGlsc18xID0gcmVxdWlyZShcIi4vc3RyaW5ndXRpbHNcIik7XHJcbnZhciBwbGF5ZXJ1dGlsc18xID0gcmVxdWlyZShcIi4vcGxheWVydXRpbHNcIik7XHJcbnZhciB1aXV0aWxzXzEgPSByZXF1aXJlKFwiLi91aXV0aWxzXCIpO1xyXG52YXIgYnJvd3NlcnV0aWxzXzEgPSByZXF1aXJlKFwiLi9icm93c2VydXRpbHNcIik7XHJcbnZhciBzdG9yYWdldXRpbHNfMSA9IHJlcXVpcmUoXCIuL3N0b3JhZ2V1dGlsc1wiKTtcclxudmFyIGF1ZGlvb25seW92ZXJsYXlfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvYXVkaW9vbmx5b3ZlcmxheVwiKTtcclxuLy8gT2JqZWN0LmFzc2lnbiBwb2x5ZmlsbCBmb3IgRVM1L0lFOVxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kZS9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXHJcbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgT2JqZWN0LmFzc2lnbiA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICAndXNlIHN0cmljdCc7XHJcbiAgICAgICAgaWYgKHRhcmdldCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXQgPSBPYmplY3QodGFyZ2V0KTtcclxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcclxuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgIH07XHJcbn1cclxudmFyIHBsYXllcnVpID0ge1xyXG4gICAgdmVyc2lvbjogJ3t7VkVSU0lPTn19JyxcclxuICAgIC8vIE1hbmFnZW1lbnRcclxuICAgIFVJTWFuYWdlcjogdWltYW5hZ2VyXzEuVUlNYW5hZ2VyLFxyXG4gICAgVUlJbnN0YW5jZU1hbmFnZXI6IHVpbWFuYWdlcl8xLlVJSW5zdGFuY2VNYW5hZ2VyLFxyXG4gICAgLy8gVXRpbHNcclxuICAgIEFycmF5VXRpbHM6IGFycmF5dXRpbHNfMS5BcnJheVV0aWxzLFxyXG4gICAgU3RyaW5nVXRpbHM6IHN0cmluZ3V0aWxzXzEuU3RyaW5nVXRpbHMsXHJcbiAgICBQbGF5ZXJVdGlsczogcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscyxcclxuICAgIFVJVXRpbHM6IHVpdXRpbHNfMS5VSVV0aWxzLFxyXG4gICAgQnJvd3NlclV0aWxzOiBicm93c2VydXRpbHNfMS5Ccm93c2VyVXRpbHMsXHJcbiAgICBTdG9yYWdlVXRpbHM6IHN0b3JhZ2V1dGlsc18xLlN0b3JhZ2VVdGlscyxcclxuICAgIC8vIENvbXBvbmVudHNcclxuICAgIEF1ZGlvT25seU92ZXJsYXk6IGF1ZGlvb25seW92ZXJsYXlfMS5BdWRpb09ubHlPdmVybGF5LFxyXG4gICAgLy8gQnVmZmVyaW5nT3ZlcmxheSxcclxuICAgIEJ1dHRvbjogYnV0dG9uXzEuQnV0dG9uLFxyXG4gICAgQ2xpY2tPdmVybGF5OiBjbGlja292ZXJsYXlfMS5DbGlja092ZXJsYXksXHJcbiAgICBDbG9zZUJ1dHRvbjogY2xvc2VidXR0b25fMS5DbG9zZUJ1dHRvbixcclxuICAgIENvbXBvbmVudDogY29tcG9uZW50XzEuQ29tcG9uZW50LFxyXG4gICAgQ29udGFpbmVyOiBjb250YWluZXJfMS5Db250YWluZXIsXHJcbiAgICBDb250cm9sQmFyOiBjb250cm9sYmFyXzEuQ29udHJvbEJhcixcclxuICAgIEVycm9yTWVzc2FnZU92ZXJsYXk6IGVycm9ybWVzc2FnZW92ZXJsYXlfMS5FcnJvck1lc3NhZ2VPdmVybGF5LFxyXG4gICAgSHVnZVBsYXliYWNrVG9nZ2xlQnV0dG9uOiBodWdlcGxheWJhY2t0b2dnbGVidXR0b25fMS5IdWdlUGxheWJhY2tUb2dnbGVCdXR0b24sXHJcbiAgICBIdWdlUmVwbGF5QnV0dG9uOiBodWdlcmVwbGF5YnV0dG9uXzEuSHVnZVJlcGxheUJ1dHRvbixcclxuICAgIExhYmVsOiBsYWJlbF8xLkxhYmVsLFxyXG4gICAgLy8gTWV0YWRhdGFMYWJlbCxcclxuICAgIC8vIE1ldGFkYXRhTGFiZWxDb250ZW50LFxyXG4gICAgUGxheWJhY2tUaW1lTGFiZWw6IHBsYXliYWNrdGltZWxhYmVsXzEuUGxheWJhY2tUaW1lTGFiZWwsXHJcbiAgICBQbGF5YmFja1RpbWVMYWJlbE1vZGU6IHBsYXliYWNrdGltZWxhYmVsXzEuUGxheWJhY2tUaW1lTGFiZWxNb2RlLFxyXG4gICAgUGxheWJhY2tUb2dnbGVCdXR0b246IHBsYXliYWNrdG9nZ2xlYnV0dG9uXzEuUGxheWJhY2tUb2dnbGVCdXR0b24sXHJcbiAgICBQbGF5YmFja1RvZ2dsZU92ZXJsYXk6IHBsYXliYWNrdG9nZ2xlb3ZlcmxheV8xLlBsYXliYWNrVG9nZ2xlT3ZlcmxheSxcclxuICAgIFNlZWtCYXI6IHNlZWtiYXJfMS5TZWVrQmFyLFxyXG4gICAgU2Vla0JhckxhYmVsOiBzZWVrYmFybGFiZWxfMS5TZWVrQmFyTGFiZWwsXHJcbiAgICBTZWxlY3RCb3g6IHNlbGVjdGJveF8xLlNlbGVjdEJveCxcclxuICAgIEl0ZW1TZWxlY3Rpb25MaXN0OiBpdGVtc2VsZWN0aW9ubGlzdF8xLkl0ZW1TZWxlY3Rpb25MaXN0LFxyXG4gICAgLy8gU2V0dGluZ3NQYW5lbCxcclxuICAgIC8vIFNldHRpbmdzUGFuZWxJdGVtLFxyXG4gICAgLy8gU2V0dGluZ3NUb2dnbGVCdXR0b24sXHJcbiAgICBTcGFjZXI6IHNwYWNlcl8xLlNwYWNlcixcclxuICAgIC8vIFRpdGxlQmFyLFxyXG4gICAgVG9nZ2xlQnV0dG9uOiB0b2dnbGVidXR0b25fMS5Ub2dnbGVCdXR0b24sXHJcbiAgICBVSUNvbnRhaW5lcjogdWljb250YWluZXJfMS5VSUNvbnRhaW5lcixcclxuICAgIC8vIFZpZGVvUXVhbGl0eVNlbGVjdEJveCxcclxuICAgIFZvbHVtZUNvbnRyb2xCdXR0b246IHZvbHVtZWNvbnRyb2xidXR0b25fMS5Wb2x1bWVDb250cm9sQnV0dG9uLFxyXG4gICAgVm9sdW1lU2xpZGVyOiB2b2x1bWVzbGlkZXJfMS5Wb2x1bWVTbGlkZXIsXHJcbiAgICBWb2x1bWVUb2dnbGVCdXR0b246IHZvbHVtZXRvZ2dsZWJ1dHRvbl8xLlZvbHVtZVRvZ2dsZUJ1dHRvbixcclxufTtcclxud2luZG93LmJpdG1vdmluLnBsYXllcnVpID0gcGxheWVydWk7XHJcbm1vZHVsZS5leHBvcnRzID0gcGxheWVydWk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvbWFpbi50c1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciB1aWNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy91aWNvbnRhaW5lclwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4vZG9tXCIpO1xyXG52YXIgY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2NvbXBvbmVudFwiKTtcclxudmFyIGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9jb250YWluZXJcIik7XHJcbnZhciBwbGF5YmFja3RvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9wbGF5YmFja3RvZ2dsZWJ1dHRvblwiKTtcclxudmFyIGZ1bGxzY3JlZW50b2dnbGVidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvblwiKTtcclxuLy8gaW1wb3J0IHtWUlRvZ2dsZUJ1dHRvbn0gZnJvbSAnLi9jb21wb25lbnRzL3ZydG9nZ2xlYnV0dG9uJztcclxuLy8gaW1wb3J0IHtWb2x1bWVUb2dnbGVCdXR0b259IGZyb20gJy4vY29tcG9uZW50cy92b2x1bWV0b2dnbGVidXR0b24nO1xyXG52YXIgc2Vla2Jhcl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zZWVrYmFyXCIpO1xyXG52YXIgcGxheWJhY2t0aW1lbGFiZWxfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvcGxheWJhY2t0aW1lbGFiZWxcIik7IC8vICwgUGxheWJhY2tUaW1lTGFiZWxNb2RlXHJcbnZhciBjb250cm9sYmFyXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2NvbnRyb2xiYXJcIik7XHJcbnZhciBldmVudGRpc3BhdGNoZXJfMSA9IHJlcXVpcmUoXCIuL2V2ZW50ZGlzcGF0Y2hlclwiKTtcclxuLy8gaW1wb3J0IHtTZXR0aW5nc1RvZ2dsZUJ1dHRvbn0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzdG9nZ2xlYnV0dG9uJztcclxuLy8gaW1wb3J0IHtTZXR0aW5nc1BhbmVsLCBTZXR0aW5nc1BhbmVsSXRlbX0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzcGFuZWwnO1xyXG4vLyBpbXBvcnQge1ZpZGVvUXVhbGl0eVNlbGVjdEJveH0gZnJvbSAnLi9jb21wb25lbnRzL3ZpZGVvcXVhbGl0eXNlbGVjdGJveCc7XHJcbi8vIGltcG9ydCB7V2F0ZXJtYXJrfSBmcm9tICcuL2NvbXBvbmVudHMvd2F0ZXJtYXJrJztcclxuLy8gaW1wb3J0IHtBdWRpb1F1YWxpdHlTZWxlY3RCb3h9IGZyb20gJy4vY29tcG9uZW50cy9hdWRpb3F1YWxpdHlzZWxlY3Rib3gnO1xyXG4vLyBpbXBvcnQge0F1ZGlvVHJhY2tTZWxlY3RCb3h9IGZyb20gJy4vY29tcG9uZW50cy9hdWRpb3RyYWNrc2VsZWN0Ym94JztcclxudmFyIHNlZWtiYXJsYWJlbF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zZWVrYmFybGFiZWxcIik7XHJcbi8vIGltcG9ydCB7Vm9sdW1lU2xpZGVyfSBmcm9tICcuL2NvbXBvbmVudHMvdm9sdW1lc2xpZGVyJztcclxudmFyIHN1YnRpdGxlc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3N1YnRpdGxlc2VsZWN0Ym94XCIpO1xyXG52YXIgc3VidGl0bGVvdmVybGF5XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3N1YnRpdGxlb3ZlcmxheVwiKTtcclxudmFyIHZvbHVtZWNvbnRyb2xidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdm9sdW1lY29udHJvbGJ1dHRvblwiKTtcclxuLy8gaW1wb3J0IHtDYXN0VG9nZ2xlQnV0dG9ufSBmcm9tICcuL2NvbXBvbmVudHMvY2FzdHRvZ2dsZWJ1dHRvbic7XHJcbi8vIGltcG9ydCB7Q2FzdFN0YXR1c092ZXJsYXl9IGZyb20gJy4vY29tcG9uZW50cy9jYXN0c3RhdHVzb3ZlcmxheSc7XHJcbnZhciBlcnJvcm1lc3NhZ2VvdmVybGF5XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2Vycm9ybWVzc2FnZW92ZXJsYXlcIik7XHJcbi8vIGltcG9ydCB7UGxheWJhY2tTcGVlZFNlbGVjdEJveH0gZnJvbSAnLi9jb21wb25lbnRzL3BsYXliYWNrc3BlZWRzZWxlY3Rib3gnO1xyXG4vLyBpbXBvcnQge0J1ZmZlcmluZ092ZXJsYXl9IGZyb20gJy4vY29tcG9uZW50cy9idWZmZXJpbmdvdmVybGF5JztcclxudmFyIHBsYXliYWNrdG9nZ2xlb3ZlcmxheV8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9wbGF5YmFja3RvZ2dsZW92ZXJsYXlcIik7XHJcbi8vIGltcG9ydCB7QWlyUGxheVRvZ2dsZUJ1dHRvbn0gZnJvbSAnLi9jb21wb25lbnRzL2FpcnBsYXl0b2dnbGVidXR0b24nO1xyXG4vLyBpbXBvcnQge1BpY3R1cmVJblBpY3R1cmVUb2dnbGVCdXR0b259IGZyb20gJy4vY29tcG9uZW50cy9waWN0dXJlaW5waWN0dXJldG9nZ2xlYnV0dG9uJztcclxudmFyIGF1ZGlvb25seW92ZXJsYXlfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvYXVkaW9vbmx5b3ZlcmxheVwiKTtcclxuLy8gaW1wb3J0IHtTcGFjZXJ9IGZyb20gJy4vY29tcG9uZW50cy9zcGFjZXInO1xyXG52YXIgdWl1dGlsc18xID0gcmVxdWlyZShcIi4vdWl1dGlsc1wiKTtcclxudmFyIGFycmF5dXRpbHNfMSA9IHJlcXVpcmUoXCIuL2FycmF5dXRpbHNcIik7XHJcbnZhciBicm93c2VydXRpbHNfMSA9IHJlcXVpcmUoXCIuL2Jyb3dzZXJ1dGlsc1wiKTtcclxudmFyIFVJTWFuYWdlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBVSU1hbmFnZXIocGxheWVyLCBwbGF5ZXJVaU9yVWlWYXJpYW50cywgY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAocGxheWVyVWlPclVpVmFyaWFudHMgaW5zdGFuY2VvZiB1aWNvbnRhaW5lcl8xLlVJQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmdsZS1VSSBjb25zdHJ1Y3RvciBoYXMgYmVlbiBjYWxsZWQsIHRyYW5zZm9ybSBhcmd1bWVudHMgdG8gVUlWYXJpYW50W10gc2lnbmF0dXJlXHJcbiAgICAgICAgICAgIHZhciBwbGF5ZXJVaSA9IHBsYXllclVpT3JVaVZhcmlhbnRzO1xyXG4gICAgICAgICAgICB2YXIgYWRzVWkgPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgdWlWYXJpYW50cyA9IFtdO1xyXG4gICAgICAgICAgICAvLyBBZGQgdGhlIGFkcyBVSSBpZiBkZWZpbmVkXHJcbiAgICAgICAgICAgIGlmIChhZHNVaSkge1xyXG4gICAgICAgICAgICAgICAgdWlWYXJpYW50cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB1aTogYWRzVWksXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uOiBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5pc0FkV2l0aFVJO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBZGQgdGhlIGRlZmF1bHQgcGxheWVyIFVJXHJcbiAgICAgICAgICAgIHVpVmFyaWFudHMucHVzaCh7IHVpOiBwbGF5ZXJVaSB9KTtcclxuICAgICAgICAgICAgdGhpcy51aVZhcmlhbnRzID0gdWlWYXJpYW50cztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIERlZmF1bHQgY29uc3RydWN0b3IgKFVJVmFyaWFudFtdKSBoYXMgYmVlbiBjYWxsZWRcclxuICAgICAgICAgICAgdGhpcy51aVZhcmlhbnRzID0gcGxheWVyVWlPclVpVmFyaWFudHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMubWFuYWdlclBsYXllcldyYXBwZXIgPSBuZXcgUGxheWVyV3JhcHBlcihwbGF5ZXIpO1xyXG4gICAgICAgIGlmIChjb25maWcuY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIC8vIFVuZm9ydHVuYXRlbHkgXCJ1aUNvbnRhaW5lckVsZW1lbnQgPSBuZXcgRE9NKGNvbmZpZy5jb250YWluZXIpXCIgd2lsbCBub3QgYWNjZXB0IHRoZSBjb250YWluZXIgd2l0aFxyXG4gICAgICAgICAgICAvLyBzdHJpbmd8SFRNTEVsZW1lbnQgdHlwZSBkaXJlY3RseSwgYWx0aG91Z2ggaXQgYWNjZXB0cyBib3RoIHR5cGVzLCBzbyB3ZSBuZWVkIHRvIHNwaXQgdGhlc2UgdHdvIGNhc2VzIHVwIGhlcmUuXHJcbiAgICAgICAgICAgIC8vIFRPRE8gY2hlY2sgaW4gdXBjb21pbmcgVFMgdmVyc2lvbnMgaWYgdGhlIGNvbnRhaW5lciBjYW4gYmUgcGFzc2VkIGluIGRpcmVjdGx5LCBvciBmaXggdGhlIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICAgIHRoaXMudWlDb250YWluZXJFbGVtZW50ID0gY29uZmlnLmNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ID9cclxuICAgICAgICAgICAgICAgIG5ldyBkb21fMS5ET00oY29uZmlnLmNvbnRhaW5lcikgOiBuZXcgZG9tXzEuRE9NKGNvbmZpZy5jb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51aUNvbnRhaW5lckVsZW1lbnQgPSBuZXcgZG9tXzEuRE9NKHBsYXllci5nZXRGaWd1cmUoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBVSSBpbnN0YW5jZSBtYW5hZ2VycyBmb3IgdGhlIFVJIHZhcmlhbnRzXHJcbiAgICAgICAgLy8gVGhlIGluc3RhbmNlIG1hbmFnZXJzIG1hcCB0byB0aGUgY29ycmVzcG9uZGluZyBVSSB2YXJpYW50cyBieSB0aGVpciBhcnJheSBpbmRleFxyXG4gICAgICAgIHRoaXMudWlJbnN0YW5jZU1hbmFnZXJzID0gW107XHJcbiAgICAgICAgdmFyIHVpVmFyaWFudHNXaXRob3V0Q29uZGl0aW9uID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMudWlWYXJpYW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHVpVmFyaWFudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKHVpVmFyaWFudC5jb25kaXRpb24gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29sbGVjdCB2YXJpYW50cyB3aXRob3V0IGNvbmRpdGlvbnMgZm9yIGVycm9yIGNoZWNraW5nXHJcbiAgICAgICAgICAgICAgICB1aVZhcmlhbnRzV2l0aG91dENvbmRpdGlvbi5wdXNoKHVpVmFyaWFudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbnN0YW5jZSBtYW5hZ2VyIGZvciBhIFVJIHZhcmlhbnRcclxuICAgICAgICAgICAgdGhpcy51aUluc3RhbmNlTWFuYWdlcnMucHVzaChuZXcgSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlcihwbGF5ZXIsIHVpVmFyaWFudC51aSwgdGhpcy5jb25maWcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlcmUgaXMgb25seSBvbmUgVUkgdmFyaWFudCB3aXRob3V0IGEgY29uZGl0aW9uXHJcbiAgICAgICAgLy8gSXQgZG9lcyBub3QgbWFrZSBzZW5zZSB0byBoYXZlIG11bHRpcGxlIHZhcmlhbnRzIHdpdGhvdXQgY29uZGl0aW9uLCBiZWNhdXNlIG9ubHkgdGhlIGZpcnN0IG9uZSBpbiB0aGUgbGlzdFxyXG4gICAgICAgIC8vICh0aGUgb25lIHdpdGggdGhlIGxvd2VzdCBpbmRleCkgd2lsbCBldmVyIGJlIHNlbGVjdGVkLlxyXG4gICAgICAgIGlmICh1aVZhcmlhbnRzV2l0aG91dENvbmRpdGlvbi5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdUb28gbWFueSBVSXMgd2l0aG91dCBhIGNvbmRpdGlvbjogWW91IGNhbm5vdCBoYXZlIG1vcmUgdGhhbiBvbmUgZGVmYXVsdCBVSScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgZGVmYXVsdCBVSSB2YXJpYW50LCBpZiBkZWZpbmVkLCBpcyBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0IChsYXN0IGluZGV4KVxyXG4gICAgICAgIC8vIElmIGl0IGNvbWVzIGVhcmxpZXIsIHRoZSB2YXJpYW50cyB3aXRoIGNvbmRpdGlvbnMgdGhhdCBjb21lIGFmdGVyd2FyZHMgd2lsbCBuZXZlciBiZSBzZWxlY3RlZCBiZWNhdXNlIHRoZVxyXG4gICAgICAgIC8vIGRlZmF1bHQgdmFyaWFudCB3aXRob3V0IGEgY29uZGl0aW9uIGFsd2F5cyBldmFsdWF0ZXMgdG8gJ3RydWUnXHJcbiAgICAgICAgaWYgKHVpVmFyaWFudHNXaXRob3V0Q29uZGl0aW9uLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgJiYgdWlWYXJpYW50c1dpdGhvdXRDb25kaXRpb25bMF0gIT09IHRoaXMudWlWYXJpYW50c1t0aGlzLnVpVmFyaWFudHMubGVuZ3RoIC0gMV0pIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ludmFsaWQgVUkgdmFyaWFudCBvcmRlcjogdGhlIGRlZmF1bHQgVUkgKHdpdGhvdXQgY29uZGl0aW9uKSBtdXN0IGJlIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3QnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFkU3RhcnRlZEV2ZW50ID0gbnVsbDsgLy8ga2VlcCB0aGUgZXZlbnQgc3RvcmVkIGhlcmUgZHVyaW5nIGFkIHBsYXliYWNrXHJcbiAgICAgICAgdmFyIGlzTW9iaWxlID0gYnJvd3NlcnV0aWxzXzEuQnJvd3NlclV0aWxzLmlzTW9iaWxlO1xyXG4gICAgICAgIC8vIER5bmFtaWNhbGx5IHNlbGVjdCBhIFVJIHZhcmlhbnQgdGhhdCBtYXRjaGVzIHRoZSBjdXJyZW50IFVJIGNvbmRpdGlvbi5cclxuICAgICAgICB2YXIgcmVzb2x2ZVVpVmFyaWFudCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgT05fQURfU1RBUlRFRCBldmVudCBkYXRhIGlzIHBlcnNpc3RlZCB0aHJvdWdoIGFkIHBsYXliYWNrIGluIGNhc2Ugb3RoZXIgZXZlbnRzIGhhcHBlblxyXG4gICAgICAgICAgICAvLyBpbiB0aGUgbWVhbnRpbWUsIGUuZy4gcGxheWVyIHJlc2l6ZS4gV2UgbmVlZCB0byBzdG9yZSB0aGlzIGRhdGEgYmVjYXVzZSB0aGVyZSBpcyBubyBvdGhlciB3YXkgdG8gZmluZCBvdXRcclxuICAgICAgICAgICAgLy8gYWQgZGV0YWlscyAoZS5nLiB0aGUgYWQgY2xpZW50KSB3aGlsZSBhbiBhZCBpcyBwbGF5aW5nLlxyXG4gICAgICAgICAgICAvLyBFeGlzdGluZyBldmVudCBkYXRhIHNpZ25hbHMgdGhhdCBhbiBhZCBpcyBjdXJyZW50bHkgYWN0aXZlLiBXZSBjYW5ub3QgdXNlIHBsYXllci5pc0FkKCkgYmVjYXVzZSBpdCByZXR1cm5zXHJcbiAgICAgICAgICAgIC8vIHRydWUgb24gYWQgc3RhcnQgYW5kIGFsc28gb24gYWQgZW5kIGV2ZW50cywgd2hpY2ggaXMgcHJvYmxlbWF0aWMuXHJcbiAgICAgICAgICAgIGlmIChldmVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBhZCBzdGFydHMsIHdlIHN0b3JlIHRoZSBldmVudCBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBwbGF5ZXIuRVZFTlQuT05fQURfU1RBUlRFRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRTdGFydGVkRXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYWQgZW5kcywgd2UgZGVsZXRlIHRoZSBldmVudCBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBwbGF5ZXIuRVZFTlQuT05fQURfRklOSVNIRUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBwbGF5ZXIuRVZFTlQuT05fQURfU0tJUFBFRDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIHBsYXllci5FVkVOVC5PTl9BRF9FUlJPUjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRTdGFydGVkRXZlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIGEgbmV3IHNvdXJjZSBpcyBsb2FkZWQgZHVyaW5nIGFkIHBsYXliYWNrLCB0aGVyZSB3aWxsIGJlIG5vIGFkIGVuZCBldmVudCBzbyB3ZSBkZXRlY3QgdGhlIGVuZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mIHRoZSBhZCBwbGF5YmFjayBieSBjaGVja2luZyBpc0FkKCkgaW4gT05fUkVBRFksIGJlY2F1c2UgT05fUkVBRFkgYWx3YXlzIGFycml2ZXMgd2hlbiB0aGUgc291cmNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hhbmdlcy5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIHBsYXllci5FVkVOVC5PTl9SRUFEWTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkU3RhcnRlZEV2ZW50ICYmICFwbGF5ZXIuaXNBZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZFN0YXJ0ZWRFdmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBEZXRlY3QgaWYgYW4gYWQgaGFzIHN0YXJ0ZWRcclxuICAgICAgICAgICAgdmFyIGFkID0gYWRTdGFydGVkRXZlbnQgIT0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIGFkV2l0aFVJID0gYWQgJiYgYWRTdGFydGVkRXZlbnQuY2xpZW50VHlwZSA9PT0gJ3Zhc3QnO1xyXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGN1cnJlbnQgY29udGV4dCBmb3Igd2hpY2ggdGhlIFVJIHZhcmlhbnQgd2lsbCBiZSByZXNvbHZlZFxyXG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgIGlzQWQ6IGFkLFxyXG4gICAgICAgICAgICAgICAgaXNBZFdpdGhVSTogYWRXaXRoVUksXHJcbiAgICAgICAgICAgICAgICBhZENsaWVudFR5cGU6IGFkID8gYWRTdGFydGVkRXZlbnQuY2xpZW50VHlwZSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBpc0Z1bGxzY3JlZW46IF90aGlzLnBsYXllci5pc0Z1bGxzY3JlZW4oKSxcclxuICAgICAgICAgICAgICAgIGlzTW9iaWxlOiBpc01vYmlsZSxcclxuICAgICAgICAgICAgICAgIGlzUGxheWluZzogX3RoaXMucGxheWVyLmlzUGxheWluZygpLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IF90aGlzLnVpQ29udGFpbmVyRWxlbWVudC53aWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRXaWR0aDogZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIG5leHRVaSA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciB1aVZhcmlhbnRDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIFNlbGVjdCBuZXcgVUkgdmFyaWFudFxyXG4gICAgICAgICAgICAvLyBJZiBubyB2YXJpYW50IGNvbmRpdGlvbiBpcyBmdWxmaWxsZWQsIHdlIHN3aXRjaCB0byAqbm8qIFVJXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy51aVZhcmlhbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVpVmFyaWFudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmICh1aVZhcmlhbnQuY29uZGl0aW9uID09IG51bGwgfHwgdWlWYXJpYW50LmNvbmRpdGlvbihjb250ZXh0KSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRVaSA9IF90aGlzLnVpSW5zdGFuY2VNYW5hZ2Vyc1tfdGhpcy51aVZhcmlhbnRzLmluZGV4T2YodWlWYXJpYW50KV07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBVSSB2YXJpYW50IGlzIGNoYW5naW5nXHJcbiAgICAgICAgICAgIGlmIChuZXh0VWkgIT09IF90aGlzLmN1cnJlbnRVaSkge1xyXG4gICAgICAgICAgICAgICAgdWlWYXJpYW50Q2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc3dpdGNoZWQgZnJvbSAnLCB0aGlzLmN1cnJlbnRVaSA/IHRoaXMuY3VycmVudFVpLmdldFVJKCkgOiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICAvLyAgICcgdG8gJywgbmV4dFVpID8gbmV4dFVpLmdldFVJKCkgOiAnbm9uZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE9ubHkgaWYgdGhlIFVJIHZhcmlhbnQgaXMgY2hhbmdpbmcsIHdlIG5lZWQgdG8gZG8gc29tZSBzdHVmZi4gRWxzZSB3ZSBqdXN0IGxlYXZlIGV2ZXJ5dGhpbmcgYXMtaXMuXHJcbiAgICAgICAgICAgIGlmICh1aVZhcmlhbnRDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIaWRlIHRoZSBjdXJyZW50bHkgYWN0aXZlIFVJIHZhcmlhbnRcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jdXJyZW50VWkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdXJyZW50VWkuZ2V0VUkoKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBBc3NpZ24gdGhlIG5ldyBVSSB2YXJpYW50IGFzIGN1cnJlbnQgVUlcclxuICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRVaSA9IG5leHRVaTtcclxuICAgICAgICAgICAgICAgIC8vIFdoZW4gd2Ugc3dpdGNoIHRvIGEgZGlmZmVyZW50IFVJIGluc3RhbmNlLCB0aGVyZSdzIHNvbWUgYWRkaXRpb25hbCBzdHVmZiB0byBtYW5hZ2UuIElmIHdlIGRvIG5vdCBzd2l0Y2hcclxuICAgICAgICAgICAgICAgIC8vIHRvIGFuIGluc3RhbmNlLCB3ZSdyZSBkb25lIGhlcmUuXHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY3VycmVudFVpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIFVJIHRvIHRoZSBET00gKGFuZCBjb25maWd1cmUgaXQpIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5jdXJyZW50VWkuaXNDb25maWd1cmVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkVWkoX3RoaXMuY3VycmVudFVpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBhZCBVSSwgd2UgbmVlZCB0byByZWxheSB0aGUgc2F2ZWQgT05fQURfU1RBUlRFRCBldmVudCBkYXRhIHNvIGFkIGNvbXBvbmVudHMgY2FuIGNvbmZpZ3VyZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZW1zZWx2ZXMgZm9yIHRoZSBjdXJyZW50IGFkLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LmlzQWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVsYXkgdGhlIE9OX0FEX1NUQVJURUQgZXZlbnQgdG8gdGhlIGFkcyBVSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBCZWNhdXNlIHRoZSBhZHMgVUkgaXMgaW5pdGlhbGl6ZWQgaW4gdGhlIE9OX0FEX1NUQVJURUQgaGFuZGxlciwgaS5lLiB3aGVuIHRoZSBPTl9BRF9TVEFSVEVEIGV2ZW50IGhhc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBhbHJlYWR5IGJlZW4gZmlyZWQsIGNvbXBvbmVudHMgaW4gdGhlIGFkcyBVSSB0aGF0IGxpc3RlbiBmb3IgdGhlIE9OX0FEX1NUQVJURUQgZXZlbnQgbmV2ZXIgcmVjZWl2ZSBpdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICogU2luY2UgdGhpcyBjYW4gYnJlYWsgZnVuY3Rpb25hbGl0eSBvZiBjb21wb25lbnRzIHRoYXQgcmVseSBvbiB0aGlzIGV2ZW50LCB3ZSByZWxheSB0aGUgZXZlbnQgdG8gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGFkcyBVSSBjb21wb25lbnRzIHdpdGggdGhlIGZvbGxvd2luZyBjYWxsLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3VycmVudFVpLmdldFdyYXBwZWRQbGF5ZXIoKS5maXJlRXZlbnRJblVJKF90aGlzLnBsYXllci5FVkVOVC5PTl9BRF9TVEFSVEVELCBhZFN0YXJ0ZWRFdmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRVaS5nZXRVSSgpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gTGlzdGVuIHRvIHRoZSBmb2xsb3dpbmcgZXZlbnRzIHRvIHRyaWdnZXIgVUkgdmFyaWFudCByZXNvbHV0aW9uXHJcbiAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5hZGRFdmVudEhhbmRsZXIodGhpcy5wbGF5ZXIuRVZFTlQuT05fUkVBRFksIHJlc29sdmVVaVZhcmlhbnQpO1xyXG4gICAgICAgIHRoaXMubWFuYWdlclBsYXllcldyYXBwZXIuZ2V0UGxheWVyKCkuYWRkRXZlbnRIYW5kbGVyKHRoaXMucGxheWVyLkVWRU5ULk9OX1BMQVksIHJlc29sdmVVaVZhcmlhbnQpO1xyXG4gICAgICAgIHRoaXMubWFuYWdlclBsYXllcldyYXBwZXIuZ2V0UGxheWVyKCkuYWRkRXZlbnRIYW5kbGVyKHRoaXMucGxheWVyLkVWRU5ULk9OX1BBVVNFRCwgcmVzb2x2ZVVpVmFyaWFudCk7XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5hZGRFdmVudEhhbmRsZXIodGhpcy5wbGF5ZXIuRVZFTlQuT05fQURfU1RBUlRFRCwgcmVzb2x2ZVVpVmFyaWFudCk7XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5hZGRFdmVudEhhbmRsZXIodGhpcy5wbGF5ZXIuRVZFTlQuT05fQURfRklOSVNIRUQsIHJlc29sdmVVaVZhcmlhbnQpO1xyXG4gICAgICAgIHRoaXMubWFuYWdlclBsYXllcldyYXBwZXIuZ2V0UGxheWVyKCkuYWRkRXZlbnRIYW5kbGVyKHRoaXMucGxheWVyLkVWRU5ULk9OX0FEX1NLSVBQRUQsIHJlc29sdmVVaVZhcmlhbnQpO1xyXG4gICAgICAgIHRoaXMubWFuYWdlclBsYXllcldyYXBwZXIuZ2V0UGxheWVyKCkuYWRkRXZlbnRIYW5kbGVyKHRoaXMucGxheWVyLkVWRU5ULk9OX0FEX0VSUk9SLCByZXNvbHZlVWlWYXJpYW50KTtcclxuICAgICAgICB0aGlzLm1hbmFnZXJQbGF5ZXJXcmFwcGVyLmdldFBsYXllcigpLmFkZEV2ZW50SGFuZGxlcih0aGlzLnBsYXllci5FVkVOVC5PTl9QTEFZRVJfUkVTSVpFLCByZXNvbHZlVWlWYXJpYW50KTtcclxuICAgICAgICB0aGlzLm1hbmFnZXJQbGF5ZXJXcmFwcGVyLmdldFBsYXllcigpLmFkZEV2ZW50SGFuZGxlcih0aGlzLnBsYXllci5FVkVOVC5PTl9GVUxMU0NSRUVOX0VOVEVSLCByZXNvbHZlVWlWYXJpYW50KTtcclxuICAgICAgICB0aGlzLm1hbmFnZXJQbGF5ZXJXcmFwcGVyLmdldFBsYXllcigpLmFkZEV2ZW50SGFuZGxlcih0aGlzLnBsYXllci5FVkVOVC5PTl9GVUxMU0NSRUVOX0VYSVQsIHJlc29sdmVVaVZhcmlhbnQpO1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIFVJXHJcbiAgICAgICAgcmVzb2x2ZVVpVmFyaWFudChudWxsKTtcclxuICAgIH1cclxuICAgIFVJTWFuYWdlci5wcm90b3R5cGUuZ2V0Q29uZmlnID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZztcclxuICAgIH07XHJcbiAgICBVSU1hbmFnZXIucHJvdG90eXBlLmFkZFVpID0gZnVuY3Rpb24gKHVpKSB7XHJcbiAgICAgICAgdmFyIGRvbSA9IHVpLmdldFVJKCkuZ2V0RG9tRWxlbWVudCgpO1xyXG4gICAgICAgIHZhciBwbGF5ZXIgPSB1aS5nZXRXcmFwcGVkUGxheWVyKCk7XHJcbiAgICAgICAgdWkuY29uZmlndXJlQ29udHJvbHMoKTtcclxuICAgICAgICAvKiBBcHBlbmQgdGhlIFVJIERPTSBhZnRlciBjb25maWd1cmF0aW9uIHRvIGF2b2lkIENTUyB0cmFuc2l0aW9ucyBhdCBpbml0aWFsaXphdGlvblxyXG4gICAgICAgICAqIEV4YW1wbGU6IENvbXBvbmVudHMgYXJlIGhpZGRlbiBkdXJpbmcgY29uZmlndXJhdGlvbiBhbmQgdGhlc2UgaGlkZXMgbWF5IHRyaWdnZXIgQ1NTIHRyYW5zaXRpb25zIHRoYXQgYXJlXHJcbiAgICAgICAgICogdW5kZXNpcmFibGUgYXQgdGhpcyB0aW1lLiAqL1xyXG4gICAgICAgIHRoaXMudWlDb250YWluZXJFbGVtZW50LmFwcGVuZChkb20pO1xyXG4gICAgICAgIC8vIFNvbWUgY29tcG9uZW50cyBpbml0aWFsaXplIHRoZWlyIHN0YXRlIG9uIE9OX1JFQURZLiBXaGVuIHRoZSBVSSBpcyBsb2FkZWQgYWZ0ZXIgdGhlIHBsYXllciBpcyBhbHJlYWR5IHJlYWR5LFxyXG4gICAgICAgIC8vIHRoZXkgd2lsbCBuZXZlciByZWNlaXZlIHRoZSBldmVudCBzbyB3ZSBmaXJlIGl0IGZyb20gaGVyZSBpbiBzdWNoIGNhc2VzLlxyXG4gICAgICAgIGlmIChwbGF5ZXIuaXNSZWFkeSgpKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5maXJlRXZlbnRJblVJKHBsYXllci5FVkVOVC5PTl9SRUFEWSwge30pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGaXJlIG9uQ29uZmlndXJlZCBhZnRlciBVSSBET00gZWxlbWVudHMgYXJlIHN1Y2Nlc3NmdWxseSBhZGRlZC4gV2hlbiBmaXJlZCBpbW1lZGlhdGVseSwgdGhlIERPTSBlbGVtZW50c1xyXG4gICAgICAgIC8vIG1pZ2h0IG5vdCBiZSBmdWxseSBjb25maWd1cmVkIGFuZCBlLmcuIGRvIG5vdCBoYXZlIGEgc2l6ZS5cclxuICAgICAgICAvLyBodHRwczovL3N3aXplYy5jb20vYmxvZy9ob3ctdG8tcHJvcGVybHktd2FpdC1mb3ItZG9tLWVsZW1lbnRzLXRvLXNob3ctdXAtaW4tbW9kZXJuLWJyb3dzZXJzL3N3aXplYy82NjYzXHJcbiAgICAgICAgaWYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsgdWkub25Db25maWd1cmVkLmRpc3BhdGNoKHVpLmdldFVJKCkpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElFOSBmYWxsYmFja1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgdWkub25Db25maWd1cmVkLmRpc3BhdGNoKHVpLmdldFVJKCkpOyB9LCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVUlNYW5hZ2VyLnByb3RvdHlwZS5yZWxlYXNlVWkgPSBmdW5jdGlvbiAodWkpIHtcclxuICAgICAgICB1aS5yZWxlYXNlQ29udHJvbHMoKTtcclxuICAgICAgICB1aS5nZXRVSSgpLmdldERvbUVsZW1lbnQoKS5yZW1vdmUoKTtcclxuICAgICAgICB1aS5jbGVhckV2ZW50SGFuZGxlcnMoKTtcclxuICAgIH07XHJcbiAgICBVSU1hbmFnZXIucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMudWlJbnN0YW5jZU1hbmFnZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgdWlJbnN0YW5jZU1hbmFnZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHRoaXMucmVsZWFzZVVpKHVpSW5zdGFuY2VNYW5hZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5jbGVhckV2ZW50SGFuZGxlcnMoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVUlNYW5hZ2VyO1xyXG59KCkpO1xyXG5leHBvcnRzLlVJTWFuYWdlciA9IFVJTWFuYWdlcjtcclxuKGZ1bmN0aW9uIChVSU1hbmFnZXIpIHtcclxuICAgIHZhciBGYWN0b3J5O1xyXG4gICAgKGZ1bmN0aW9uIChGYWN0b3J5KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRBdWRpb1ZpZGVvVUkocGxheWVyLCBjb25maWcpIHtcclxuICAgICAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sQmFyID0gbmV3IGNvbnRyb2xiYXJfMS5Db250cm9sQmFyKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgcGxheWJhY2t0b2dnbGVidXR0b25fMS5QbGF5YmFja1RvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZWVrYmFyXzEuU2Vla0Jhcih7IGxhYmVsOiBuZXcgc2Vla2JhcmxhYmVsXzEuU2Vla0JhckxhYmVsKCkgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHBsYXliYWNrdGltZWxhYmVsXzEuUGxheWJhY2tUaW1lTGFiZWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgdm9sdW1lY29udHJvbGJ1dHRvbl8xLlZvbHVtZUNvbnRyb2xCdXR0b24oeyAndmVydGljYWwnOiB0cnVlIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBmdWxsc2NyZWVudG9nZ2xlYnV0dG9uXzEuRnVsbHNjcmVlblRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHZhciB1aSA9IG5ldyB1aWNvbnRhaW5lcl8xLlVJQ29udGFpbmVyKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgcGxheWJhY2t0b2dnbGVvdmVybGF5XzEuUGxheWJhY2tUb2dnbGVPdmVybGF5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbEJhcixcclxuICAgICAgICAgICAgICAgICAgICBuZXcgZXJyb3JtZXNzYWdlb3ZlcmxheV8xLkVycm9yTWVzc2FnZU92ZXJsYXkoKSxcclxuICAgICAgICAgICAgICAgIF0sIGNzc0NsYXNzZXM6IFsndWktc2tpbiddLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gSnVzdCBoZXJlIHRvIGF2b2lkIGxpbnRlciBlcnJvcnNcclxuICAgICAgICAgICAgdmFyIHNzQm94ID0gbmV3IHN1YnRpdGxlc2VsZWN0Ym94XzEuU3VidGl0bGVTZWxlY3RCb3goKTtcclxuICAgICAgICAgICAgc3NCb3guaGlkZSgpO1xyXG4gICAgICAgICAgICB2YXIgc3NPdmVybGF5ID0gbmV3IHN1YnRpdGxlb3ZlcmxheV8xLlN1YnRpdGxlT3ZlcmxheSgpO1xyXG4gICAgICAgICAgICBzc092ZXJsYXkuaGlkZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVJTWFuYWdlcihwbGF5ZXIsIHVpLCBjb25maWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBGYWN0b3J5LmJ1aWxkQXVkaW9WaWRlb1VJID0gYnVpbGRBdWRpb1ZpZGVvVUk7XHJcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRBdWRpb09ubHlVSShwbGF5ZXIsIGNvbmZpZykge1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICAgICAgdmFyIGNvbnRyb2xCYXIgPSBuZXcgY29udHJvbGJhcl8xLkNvbnRyb2xCYXIoe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBwbGF5YmFja3RvZ2dsZWJ1dHRvbl8xLlBsYXliYWNrVG9nZ2xlQnV0dG9uKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHNlZWtiYXJfMS5TZWVrQmFyKHsgbGFiZWw6IG5ldyBzZWVrYmFybGFiZWxfMS5TZWVrQmFyTGFiZWwoKSwgaGlkZUluTGl2ZVBsYXliYWNrOiB0cnVlIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBwbGF5YmFja3RpbWVsYWJlbF8xLlBsYXliYWNrVGltZUxhYmVsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHZvbHVtZWNvbnRyb2xidXR0b25fMS5Wb2x1bWVDb250cm9sQnV0dG9uKHsgJ3ZlcnRpY2FsJzogdHJ1ZSB9KSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgY29tcG9uZW50XzEuQ29tcG9uZW50KHsgY3NzQ2xhc3M6ICdzcGFjZXInIH0pLFxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB2YXIgdWkgPSBuZXcgdWljb250YWluZXJfMS5VSUNvbnRhaW5lcih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGF1ZGlvb25seW92ZXJsYXlfMS5BdWRpb09ubHlPdmVybGF5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHBsYXliYWNrdG9nZ2xlb3ZlcmxheV8xLlBsYXliYWNrVG9nZ2xlT3ZlcmxheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xCYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGVycm9ybWVzc2FnZW92ZXJsYXlfMS5FcnJvck1lc3NhZ2VPdmVybGF5KCksXHJcbiAgICAgICAgICAgICAgICBdLCBjc3NDbGFzc2VzOiBbJ3VpLXNraW4nXSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVUlNYW5hZ2VyKHBsYXllciwgdWksIGNvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEZhY3RvcnkuYnVpbGRBdWRpb09ubHlVSSA9IGJ1aWxkQXVkaW9Pbmx5VUk7XHJcbiAgICB9KShGYWN0b3J5ID0gVUlNYW5hZ2VyLkZhY3RvcnkgfHwgKFVJTWFuYWdlci5GYWN0b3J5ID0ge30pKTtcclxufSkoVUlNYW5hZ2VyID0gZXhwb3J0cy5VSU1hbmFnZXIgfHwgKGV4cG9ydHMuVUlNYW5hZ2VyID0ge30pKTtcclxuZXhwb3J0cy5VSU1hbmFnZXIgPSBVSU1hbmFnZXI7XHJcbi8qKlxyXG4gKiBFbmNhcHN1bGF0ZXMgZnVuY3Rpb25hbGl0eSB0byBtYW5hZ2UgYSBVSSBpbnN0YW5jZS4gVXNlZCBieSB0aGUge0BsaW5rIFVJTWFuYWdlcn0gdG8gbWFuYWdlIG11bHRpcGxlIFVJIGluc3RhbmNlcy5cclxuICovXHJcbnZhciBVSUluc3RhbmNlTWFuYWdlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBVSUluc3RhbmNlTWFuYWdlcihwbGF5ZXIsIHVpLCBjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB0aGlzLmV2ZW50cyA9IHtcclxuICAgICAgICAgICAgb25Db25maWd1cmVkOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uU2VlazogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgICAgICBvblNlZWtQcmV2aWV3OiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uU2Vla2VkOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uQ29tcG9uZW50U2hvdzogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgICAgICBvbkNvbXBvbmVudEhpZGU6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICAgICAgb25Db250cm9sc1Nob3c6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICAgICAgb25QcmV2aWV3Q29udHJvbHNIaWRlOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uQ29udHJvbHNIaWRlOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnBsYXllcldyYXBwZXIgPSBuZXcgUGxheWVyV3JhcHBlcihwbGF5ZXIpO1xyXG4gICAgICAgIHRoaXMudWkgPSB1aTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgIH1cclxuICAgIFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZS5nZXRDb25maWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnO1xyXG4gICAgfTtcclxuICAgIFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZS5nZXRVSSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51aTtcclxuICAgIH07XHJcbiAgICBVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUuZ2V0UGxheWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBsYXllcldyYXBwZXIuZ2V0UGxheWVyKCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZSwgXCJvbkNvbmZpZ3VyZWRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIFVJIGlzIGZ1bGx5IGNvbmZpZ3VyZWQgYW5kIGFkZGVkIHRvIHRoZSBET00uXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uQ29uZmlndXJlZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUsIFwib25TZWVrXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaXJlcyB3aGVuIGEgc2VlayBzdGFydHMuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uU2VlaztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUsIFwib25TZWVrUHJldmlld1wiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlyZXMgd2hlbiB0aGUgc2VlayB0aW1lbGluZSBpcyBzY3J1YmJlZC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnREaXNwYXRjaGVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ldmVudHMub25TZWVrUHJldmlldztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUsIFwib25TZWVrZWRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpcmVzIHdoZW4gYSBzZWVrIGlzIGZpbmlzaGVkLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50cy5vblNlZWtlZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUsIFwib25Db21wb25lbnRTaG93XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaXJlcyB3aGVuIGEgY29tcG9uZW50IGlzIHNob3dpbmcuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uQ29tcG9uZW50U2hvdztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUsIFwib25Db21wb25lbnRIaWRlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaXJlcyB3aGVuIGEgY29tcG9uZW50IGlzIGhpZGluZy5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnREaXNwYXRjaGVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ldmVudHMub25Db21wb25lbnRIaWRlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZSwgXCJvbkNvbnRyb2xzU2hvd1wiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlyZXMgd2hlbiB0aGUgVUkgY29udHJvbHMgYXJlIHNob3dpbmcuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uQ29udHJvbHNTaG93O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZSwgXCJvblByZXZpZXdDb250cm9sc0hpZGVcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpcmVzIGJlZm9yZSB0aGUgVUkgY29udHJvbHMgYXJlIGhpZGluZyB0byBjaGVjayBpZiB0aGV5IGFyZSBhbGxvd2VkIHRvIGhpZGUuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uUHJldmlld0NvbnRyb2xzSGlkZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUsIFwib25Db250cm9sc0hpZGVcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIFVJIGNvbnRyb2xzIGFyZSBoaWRpbmcuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uQ29udHJvbHNIaWRlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLmNsZWFyRXZlbnRIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBsYXllcldyYXBwZXIuY2xlYXJFdmVudEhhbmRsZXJzKCk7XHJcbiAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzOyAvLyBhdm9pZCBUUzcwMTdcclxuICAgICAgICBmb3IgKHZhciBldmVudF8xIGluIGV2ZW50cykge1xyXG4gICAgICAgICAgICB2YXIgZGlzcGF0Y2hlciA9IGV2ZW50c1tldmVudF8xXTtcclxuICAgICAgICAgICAgZGlzcGF0Y2hlci51bnN1YnNjcmliZUFsbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gVUlJbnN0YW5jZU1hbmFnZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuVUlJbnN0YW5jZU1hbmFnZXIgPSBVSUluc3RhbmNlTWFuYWdlcjtcclxuLyoqXHJcbiAqIEV4dGVuZHMgdGhlIHtAbGluayBVSUluc3RhbmNlTWFuYWdlcn0gZm9yIGludGVybmFsIHVzZSBpbiB0aGUge0BsaW5rIFVJTWFuYWdlcn0gYW5kIHByb3ZpZGVzIGFjY2VzcyB0byBmdW5jdGlvbmFsaXR5XHJcbiAqIHRoYXQgY29tcG9uZW50cyByZWNlaXZpbmcgYSByZWZlcmVuY2UgdG8gdGhlIHtAbGluayBVSUluc3RhbmNlTWFuYWdlcn0gc2hvdWxkIG5vdCBoYXZlIGFjY2VzcyB0by5cclxuICovXHJcbnZhciBJbnRlcm5hbFVJSW5zdGFuY2VNYW5hZ2VyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhJbnRlcm5hbFVJSW5zdGFuY2VNYW5hZ2VyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlcigpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBJbnRlcm5hbFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZS5nZXRXcmFwcGVkUGxheWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFRPRE8gZmluZCBhIG5vbi1oYWNreSB3YXkgdG8gcHJvdmlkZSB0aGUgV3JhcHBlZFBsYXllciB0byB0aGUgVUlNYW5hZ2VyIHdpdGhvdXQgZXhwb3J0aW5nIGl0XHJcbiAgICAgICAgLy8gZ2V0UGxheWVyKCkgYWN0dWFsbHkgcmV0dXJucyB0aGUgV3JhcHBlZFBsYXllciBidXQgaXRzIHJldHVybiB0eXBlIGlzIHNldCB0byBQbGF5ZXIgc28gdGhlIFdyYXBwZWRQbGF5ZXIgZG9lc1xyXG4gICAgICAgIC8vIG5vdCBuZWVkIHRvIGJlIGV4cG9ydGVkXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGxheWVyKCk7XHJcbiAgICB9O1xyXG4gICAgSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUuY29uZmlndXJlQ29udHJvbHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVDb250cm9sc1RyZWUodGhpcy5nZXRVSSgpKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ3VyZWQgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIEludGVybmFsVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLmlzQ29uZmlndXJlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWd1cmVkO1xyXG4gICAgfTtcclxuICAgIEludGVybmFsVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLmNvbmZpZ3VyZUNvbnRyb2xzVHJlZSA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjb25maWd1cmVkQ29tcG9uZW50cyA9IFtdO1xyXG4gICAgICAgIHVpdXRpbHNfMS5VSVV0aWxzLnRyYXZlcnNlVHJlZShjb21wb25lbnQsIGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICAgICAgLy8gRmlyc3QsIGNoZWNrIGlmIHdlIGhhdmUgYWxyZWFkeSBjb25maWd1cmVkIGEgY29tcG9uZW50LCBhbmQgdGhyb3cgYW4gZXJyb3IgaWYgd2UgZGlkLiBNdWx0aXBsZSBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgIC8vIG9mIHRoZSBzYW1lIGNvbXBvbmVudCBsZWFkcyB0byB1bmV4cGVjdGVkIFVJIGJlaGF2aW9yLiBBbHNvLCBhIGNvbXBvbmVudCB0aGF0IGlzIGluIHRoZSBVSSB0cmVlIG11bHRpcGxlXHJcbiAgICAgICAgICAgIC8vIHRpbWVzIGhpbnRzIGF0IGEgd3JvbmcgVUkgc3RydWN0dXJlLlxyXG4gICAgICAgICAgICAvLyBXZSBjb3VsZCBqdXN0IHNraXAgY29uZmlndXJhdGlvbiBpbiBzdWNoIGEgY2FzZSBhbmQgbm90IHRocm93IGFuIGV4Y2VwdGlvbiwgYnV0IGVuZm9yY2luZyBhIGNsZWFuIFVJIHRyZWVcclxuICAgICAgICAgICAgLy8gc2VlbXMgbGlrZSB0aGUgYmV0dGVyIGNob2ljZS5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb25maWd1cmVkQ29tcG9uZW50c18xID0gY29uZmlndXJlZENvbXBvbmVudHM7IF9pIDwgY29uZmlndXJlZENvbXBvbmVudHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb25maWd1cmVkQ29tcG9uZW50ID0gY29uZmlndXJlZENvbXBvbmVudHNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlndXJlZENvbXBvbmVudCA9PT0gY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV3JpdGUgdGhlIGNvbXBvbmVudCB0byB0aGUgY29uc29sZSB0byBzaW1wbGlmeSBpZGVudGlmaWNhdGlvbiBvZiB0aGUgY3VscHJpdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIChlLmcuIGJ5IGluc3BlY3RpbmcgdGhlIGNvbmZpZylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uc29sZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaXJjdWxhciByZWZlcmVuY2UgaW4gVUkgdHJlZScsIGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZGl0aW9uYWxseSB0aHJvdyBhbiBlcnJvciwgYmVjYXVzZSB0aGlzIGNhc2UgbXVzdCBub3QgaGFwcGVuIGFuZCBsZWFkcyB0byB1bmV4cGVjdGVkIFVJIGJlaGF2aW9yLlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCdDaXJjdWxhciByZWZlcmVuY2UgaW4gVUkgdHJlZTogJyArIGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb21wb25lbnQuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICBjb21wb25lbnQuY29uZmlndXJlKF90aGlzLmdldFBsYXllcigpLCBfdGhpcyk7XHJcbiAgICAgICAgICAgIGNvbmZpZ3VyZWRDb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbnRlcm5hbFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZS5yZWxlYXNlQ29udHJvbHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gRG8gbm90IGNhbGwgcmVsZWFzZSBtZXRob2RzIGlmIHRoZSBjb21wb25lbnRzIGhhdmUgbmV2ZXIgYmVlbiBjb25maWd1cmVkOyB0aGlzIGNhbiByZXN1bHQgaW4gZXhjZXB0aW9uc1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWxlYXNlQ29udHJvbHNUcmVlKHRoaXMuZ2V0VUkoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlbGVhc2VkID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBJbnRlcm5hbFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZS5pc1JlbGVhc2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbGVhc2VkO1xyXG4gICAgfTtcclxuICAgIEludGVybmFsVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLnJlbGVhc2VDb250cm9sc1RyZWUgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29tcG9uZW50LnJlbGVhc2UoKTtcclxuICAgICAgICBpZiAoY29tcG9uZW50IGluc3RhbmNlb2YgY29udGFpbmVyXzEuQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBjb21wb25lbnQuZ2V0Q29tcG9uZW50cygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkQ29tcG9uZW50ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWxlYXNlQ29udHJvbHNUcmVlKGNoaWxkQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbnRlcm5hbFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZS5jbGVhckV2ZW50SGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jbGVhckV2ZW50SGFuZGxlcnMuY2FsbCh0aGlzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlcjtcclxufShVSUluc3RhbmNlTWFuYWdlcikpO1xyXG4vKipcclxuICogV3JhcHMgdGhlIHBsYXllciB0byB0cmFjayBldmVudCBoYW5kbGVycyBhbmQgcHJvdmlkZSBhIHNpbXBsZSBtZXRob2QgdG8gcmVtb3ZlIGFsbCByZWdpc3RlcmVkIGV2ZW50XHJcbiAqIGhhbmRsZXJzIGZyb20gdGhlIHBsYXllci5cclxuICovXHJcbnZhciBQbGF5ZXJXcmFwcGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBsYXllcldyYXBwZXIocGxheWVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcnMgPSB7fTtcclxuICAgICAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcclxuICAgICAgICAvLyBDb2xsZWN0IGFsbCBtZW1iZXJzIG9mIHRoZSBwbGF5ZXIgKHB1YmxpYyBBUEkgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBvZiB0aGUgcGxheWVyKVxyXG4gICAgICAgIC8vIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwbGF5ZXIpIGRvZXMgbm90IHdvcmsgd2l0aCB0aGUgcGxheWVyIFR5cGVTY3JpcHQgY2xhc3Mgc3RhcnRpbmcgaW4gNy4yKVxyXG4gICAgICAgIHZhciBtZW1iZXJzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgbWVtYmVyIGluIHBsYXllcikge1xyXG4gICAgICAgICAgICBtZW1iZXJzLnB1c2gobWVtYmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU3BsaXQgdGhlIG1lbWJlcnMgaW50byBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIG1ldGhvZHMgPSBbXTtcclxuICAgICAgICB2YXIgcHJvcGVydGllcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgbWVtYmVyc18xID0gbWVtYmVyczsgX2kgPCBtZW1iZXJzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtZW1iZXIgPSBtZW1iZXJzXzFbX2ldO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHBsYXllclttZW1iZXJdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2RzLnB1c2gobWVtYmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaChtZW1iZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSB3cmFwcGVyIG9iamVjdFxyXG4gICAgICAgIHZhciB3cmFwcGVyID0ge307XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAobWV0aG9kKSB7XHJcbiAgICAgICAgICAgIHdyYXBwZXJbbWV0aG9kXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjYWxsZWQgJyArIG1lbWJlcik7IC8vIHRyYWNrIG1ldGhvZCBjYWxscyBvbiB0aGUgcGxheWVyXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheWVyW21ldGhvZF0uYXBwbHkocGxheWVyLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gQWRkIGZ1bmN0aW9uIHdyYXBwZXJzIGZvciBhbGwgQVBJIG1ldGhvZHMgdGhhdCBkbyBub3RoaW5nIGJ1dCBjYWxsaW5nIHRoZSBiYXNlIG1ldGhvZCBvbiB0aGUgcGxheWVyXHJcbiAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBtZXRob2RzXzEgPSBtZXRob2RzOyBfYSA8IG1ldGhvZHNfMS5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHNfMVtfYV07XHJcbiAgICAgICAgICAgIF9sb29wXzEobWV0aG9kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIF9sb29wXzIgPSBmdW5jdGlvbiAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgLy8gR2V0IGFuIGV2ZW50dWFsbHkgZXhpc3RpbmcgcHJvcGVydHkgZGVzY3JpcHRvciB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gcGxhaW4gcHJvcGVydGllcyBhbmQgcHJvcGVydGllcyB3aXRoXHJcbiAgICAgICAgICAgIC8vIGdldHRlcnMvc2V0dGVycy5cclxuICAgICAgICAgICAgdmFyIHByb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocGxheWVyLCBwcm9wZXJ0eSkgfHxcclxuICAgICAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoT2JqZWN0LmdldFByb3RvdHlwZU9mKHBsYXllciksIHByb3BlcnR5KTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHByb3BlcnR5IGhhcyBnZXR0ZXJzL3NldHRlcnMsIHdyYXAgdGhlbSBhY2NvcmRpbmdseS4uLlxyXG4gICAgICAgICAgICBpZiAocHJvcGVydHlEZXNjcmlwdG9yICYmIChwcm9wZXJ0eURlc2NyaXB0b3IuZ2V0IHx8IHByb3BlcnR5RGVzY3JpcHRvci5zZXQpKSB7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod3JhcHBlciwgcHJvcGVydHksIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb3BlcnR5RGVzY3JpcHRvci5nZXQuY2FsbChwbGF5ZXIpOyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBwcm9wZXJ0eURlc2NyaXB0b3Iuc2V0LmNhbGwocGxheWVyLCB2YWx1ZSk7IH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdyYXBwZXJbcHJvcGVydHldID0gcGxheWVyW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gQWRkIGFsbCBwdWJsaWMgcHJvcGVydGllcyBvZiB0aGUgcGxheWVyIHRvIHRoZSB3cmFwcGVyXHJcbiAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBwcm9wZXJ0aWVzXzEgPSBwcm9wZXJ0aWVzOyBfYiA8IHByb3BlcnRpZXNfMS5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gcHJvcGVydGllc18xW19iXTtcclxuICAgICAgICAgICAgX2xvb3BfMihwcm9wZXJ0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEV4cGxpY2l0bHkgYWRkIGEgd3JhcHBlciBtZXRob2QgZm9yICdhZGRFdmVudEhhbmRsZXInIHRoYXQgYWRkcyBhZGRlZCBldmVudCBoYW5kbGVycyB0byB0aGUgZXZlbnQgbGlzdFxyXG4gICAgICAgIHdyYXBwZXIuYWRkRXZlbnRIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50VHlwZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihldmVudFR5cGUsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50VHlwZV0pIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnRUeXBlXSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnRUeXBlXS5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyYXBwZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBFeHBsaWNpdGx5IGFkZCBhIHdyYXBwZXIgbWV0aG9kIGZvciAncmVtb3ZlRXZlbnRIYW5kbGVyJyB0aGF0IHJlbW92ZXMgcmVtb3ZlZCBldmVudCBoYW5kbGVycyBmcm9tIHRoZSBldmVudCBsaXN0XHJcbiAgICAgICAgd3JhcHBlci5yZW1vdmVFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnRUeXBlLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRIYW5kbGVyKGV2ZW50VHlwZSwgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuZXZlbnRIYW5kbGVyc1tldmVudFR5cGVdKSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheXV0aWxzXzEuQXJyYXlVdGlscy5yZW1vdmUoX3RoaXMuZXZlbnRIYW5kbGVyc1tldmVudFR5cGVdLCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHdyYXBwZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3cmFwcGVyLmZpcmVFdmVudEluVUkgPSBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnRdKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFeHRlbmQgdGhlIGRhdGEgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMgdG8gY29udmVydCBpdCB0byBhIHtAbGluayBQbGF5ZXJFdmVudH0gb2JqZWN0LlxyXG4gICAgICAgICAgICAgICAgdmFyIHBsYXllckV2ZW50RGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZXZlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGEgbWFya2VyIHByb3BlcnR5IHNvIHRoZSBVSSBjYW4gZGV0ZWN0IFVJLWludGVybmFsIHBsYXllciBldmVudHNcclxuICAgICAgICAgICAgICAgICAgICB1aVNvdXJjZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgdGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2tzXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMuZXZlbnRIYW5kbGVyc1tldmVudF07IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHBsYXllckV2ZW50RGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMud3JhcHBlciA9IHdyYXBwZXI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSB3cmFwcGVkIHBsYXllciBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBvbiBwbGFjZSBvZiB0aGUgbm9ybWFsIHBsYXllciBvYmplY3QuXHJcbiAgICAgKiBAcmV0dXJucyB7V3JhcHBlZFBsYXllcn0gYSB3cmFwcGVkIHBsYXllclxyXG4gICAgICovXHJcbiAgICBQbGF5ZXJXcmFwcGVyLnByb3RvdHlwZS5nZXRQbGF5ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlcjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyBhbGwgcmVnaXN0ZXJlZCBldmVudCBoYW5kbGVycyBmcm9tIHRoZSBwbGF5ZXIgdGhhdCB3ZXJlIGFkZGVkIHRocm91Z2ggdGhlIHdyYXBwZWQgcGxheWVyLlxyXG4gICAgICovXHJcbiAgICBQbGF5ZXJXcmFwcGVyLnByb3RvdHlwZS5jbGVhckV2ZW50SGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgZXZlbnRUeXBlIGluIHRoaXMuZXZlbnRIYW5kbGVycykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50VHlwZV07IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5yZW1vdmVFdmVudEhhbmRsZXIoZXZlbnRUeXBlLCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBsYXllcldyYXBwZXI7XHJcbn0oKSk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvdWltYW5hZ2VyLnRzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgR3VpZDtcclxuKGZ1bmN0aW9uIChHdWlkKSB7XHJcbiAgICB2YXIgZ3VpZCA9IDE7XHJcbiAgICBmdW5jdGlvbiBuZXh0KCkge1xyXG4gICAgICAgIHJldHVybiBndWlkKys7XHJcbiAgICB9XHJcbiAgICBHdWlkLm5leHQgPSBuZXh0O1xyXG59KShHdWlkID0gZXhwb3J0cy5HdWlkIHx8IChleHBvcnRzLkd1aWQgPSB7fSkpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2d1aWQudHNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi90b2dnbGVidXR0b25cIik7XHJcbi8qKlxyXG4gKiBBIGJ1dHRvbiB0aGF0IHRvZ2dsZXMgdGhlIHBsYXllciBiZXR3ZWVuIHdpbmRvd2VkIGFuZCBmdWxsc2NyZWVuIHZpZXcuXHJcbiAqL1xyXG52YXIgRnVsbHNjcmVlblRvZ2dsZUJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoRnVsbHNjcmVlblRvZ2dsZUJ1dHRvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24oY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWZ1bGxzY3JlZW50b2dnbGVidXR0b24nLFxyXG4gICAgICAgICAgICB0ZXh0OiAnRnVsbHNjcmVlbicsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBGdWxsc2NyZWVuVG9nZ2xlQnV0dG9uLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHZhciBmdWxsc2NyZWVuU3RhdGVIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzRnVsbHNjcmVlbigpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub2ZmKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0ZVTExTQ1JFRU5fRU5URVIsIGZ1bGxzY3JlZW5TdGF0ZUhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0ZVTExTQ1JFRU5fRVhJVCwgZnVsbHNjcmVlblN0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNGdWxsc2NyZWVuKCkpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5leGl0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmVudGVyRnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gU3RhcnR1cCBpbml0XHJcbiAgICAgICAgZnVsbHNjcmVlblN0YXRlSGFuZGxlcigpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGdWxsc2NyZWVuVG9nZ2xlQnV0dG9uO1xyXG59KHRvZ2dsZWJ1dHRvbl8xLlRvZ2dsZUJ1dHRvbikpO1xyXG5leHBvcnRzLkZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24gPSBGdWxsc2NyZWVuVG9nZ2xlQnV0dG9uO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvbi50c1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4vZG9tXCIpO1xyXG4vKipcclxuICogVHJhY2tzIHRoZSBsb2FkaW5nIHN0YXRlIG9mIGltYWdlcy5cclxuICovXHJcbnZhciBJbWFnZUxvYWRlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbWFnZUxvYWRlcigpIHtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge307XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIExvYWRzIGFuIGltYWdlIGFuZCBjYWxsIHRoZSBjYWxsYmFjayBvbmNlIHRoZSBpbWFnZSBpcyBsb2FkZWQuIElmIHRoZSBpbWFnZSBpcyBhbHJlYWR5IGxvYWRlZCwgdGhlIGNhbGxiYWNrXHJcbiAgICAgKiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksIGVsc2UgaXQgaXMgY2FsbGVkIG9uY2UgbG9hZGluZyBoYXMgZmluaXNoZWQuIENhbGxpbmcgdGhpcyBtZXRob2QgbXVsdGlwbGUgdGltZXMgZm9yIHRoZVxyXG4gICAgICogc2FtZSBpbWFnZSB3aGlsZSBpdCBpcyBsb2FkaW5nIGNhbGxzIG9ubHkgbGV0IGNhbGxiYWNrIHBhc3NlZCBpbnRvIHRoZSBsYXN0IGNhbGwuXHJcbiAgICAgKiBAcGFyYW0gdXJsIFRoZSB1cmwgdG8gdGhlIGltYWdlIHRvIGxvYWRcclxuICAgICAqIEBwYXJhbSBsb2FkZWRDYWxsYmFjayBUaGUgY2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgaW1hZ2UgaXMgbG9hZGVkXHJcbiAgICAgKi9cclxuICAgIEltYWdlTG9hZGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKHVybCwgbG9hZGVkQ2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZVt1cmxdKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gdGhlIGltYWdlIHdhcyBuZXZlciBhdHRlbXB0ZWQgdG8gYmUgbG9hZGVkIGJlZm9yZSwgd2UgY3JlYXRlIGEgc3RhdGUgYW5kIHN0b3JlIGl0IGluIHRoZSBzdGF0ZSBtYXBcclxuICAgICAgICAgICAgLy8gZm9yIGxhdGVyIHVzZSB3aGVuIHRoZSBzYW1lIGltYWdlIGlzIHJlcXVlc3RlZCB0byBiZSBsb2FkZWQgYWdhaW4uXHJcbiAgICAgICAgICAgIHZhciBzdGF0ZV8xID0ge1xyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBpbWFnZTogbmV3IGRvbV8xLkRPTSgnaW1nJywge30pLFxyXG4gICAgICAgICAgICAgICAgbG9hZGVkQ2FsbGJhY2s6IGxvYWRlZENhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgbG9hZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAwLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlW3VybF0gPSBzdGF0ZV8xO1xyXG4gICAgICAgICAgICAvLyBMaXN0ZW4gdG8gdGhlIGxvYWQgZXZlbnQsIHVwZGF0ZSB0aGUgc3RhdGUgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIG9uY2UgdGhlIGltYWdlIGlzIGxvYWRlZFxyXG4gICAgICAgICAgICBzdGF0ZV8xLmltYWdlLm9uKCdsb2FkJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlXzEubG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHN0YXRlXzEud2lkdGggPSBzdGF0ZV8xLmltYWdlLmdldCgwKS53aWR0aDtcclxuICAgICAgICAgICAgICAgIHN0YXRlXzEuaGVpZ2h0ID0gc3RhdGVfMS5pbWFnZS5nZXQoMCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2FsbExvYWRlZENhbGxiYWNrKHN0YXRlXzEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gU2V0IHRoZSBpbWFnZSBVUkwgdG8gc3RhcnQgdGhlIGxvYWRpbmdcclxuICAgICAgICAgICAgc3RhdGVfMS5pbWFnZS5hdHRyKCdzcmMnLCBzdGF0ZV8xLnVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBXZSBoYXZlIGEgc3RhdGUgZm9yIHRoZSByZXF1ZXN0ZWQgaW1hZ2UsIHNvIGl0IGlzIGVpdGhlciBhbHJlYWR5IGxvYWRlZCBvciBjdXJyZW50bHkgbG9hZGluZ1xyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlW3VybF07XHJcbiAgICAgICAgICAgIC8vIFdlIG92ZXJ3cml0ZSB0aGUgY2FsbGJhY2sgdG8gbWFrZSBzdXJlIHRoYXQgb25seSB0aGUgY2FsbGJhY2sgb2YgdGhlIGxhdGVzdCBjYWxsIGdldHMgZXhlY3V0ZWQuXHJcbiAgICAgICAgICAgIC8vIEVhcmxpZXIgY2FsbGJhY2tzIGJlY29tZSBpbnZhbGlkIG9uY2UgYSBuZXcgbG9hZCBjYWxsIGFycml2ZXMsIGFuZCB0aGV5IGFyZSBub3QgY2FsbGVkIGFzIGxvbmcgYXMgdGhlIGltYWdlXHJcbiAgICAgICAgICAgIC8vIGlzIG5vdCBsb2FkZWQuXHJcbiAgICAgICAgICAgIHN0YXRlLmxvYWRlZENhbGxiYWNrID0gbG9hZGVkQ2FsbGJhY2s7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gdGhlIGltYWdlIGlzIGFscmVhZHkgbG9hZGVkLCB3ZSBkaXJlY3RseSBleGVjdXRlIHRoZSBjYWxsYmFjayBpbnN0ZWFkIG9mIHdhaXRpbmcgZm9yIHRoZSBsb2FkIGV2ZW50XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZS5sb2FkZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FsbExvYWRlZENhbGxiYWNrKHN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbWFnZUxvYWRlci5wcm90b3R5cGUuY2FsbExvYWRlZENhbGxiYWNrID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgc3RhdGUubG9hZGVkQ2FsbGJhY2soc3RhdGUudXJsLCBzdGF0ZS53aWR0aCwgc3RhdGUuaGVpZ2h0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW1hZ2VMb2FkZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSW1hZ2VMb2FkZXIgPSBJbWFnZUxvYWRlcjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9pbWFnZWxvYWRlci50c1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL3NlbGVjdGJveFwiKTtcclxuLyoqXHJcbiAqIEEgc2VsZWN0IGJveCBwcm92aWRpbmcgYSBzZWxlY3Rpb24gYmV0d2VlbiBhdmFpbGFibGUgc3VidGl0bGUgYW5kIGNhcHRpb24gdHJhY2tzLlxyXG4gKi9cclxudmFyIFN1YnRpdGxlU2VsZWN0Qm94ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTdWJ0aXRsZVNlbGVjdEJveCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFN1YnRpdGxlU2VsZWN0Qm94KGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBTdWJ0aXRsZVNlbGVjdEJveC5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgc2VsZWN0Q3VycmVudFN1YnRpdGxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFN1YnRpdGxlID0gcGxheWVyLmdldFN1YnRpdGxlKCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3VidGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdEl0ZW0oY3VycmVudFN1YnRpdGxlLmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHVwZGF0ZVN1YnRpdGxlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuY2xlYXJJdGVtcygpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gcGxheWVyLmdldEF2YWlsYWJsZVN1YnRpdGxlcygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YnRpdGxlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYWRkSXRlbShzdWJ0aXRsZS5pZCwgc3VidGl0bGUubGFiZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgY29ycmVjdCBzdWJ0aXRsZSBhZnRlciB0aGUgc3VidGl0bGVzIGhhdmUgYmVlbiBhZGRlZFxyXG4gICAgICAgICAgICBzZWxlY3RDdXJyZW50U3VidGl0bGUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25JdGVtU2VsZWN0ZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5zZXRTdWJ0aXRsZSh2YWx1ZSA9PT0gJ251bGwnID8gbnVsbCA6IHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZWFjdCB0byBBUEkgZXZlbnRzXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU1VCVElUTEVfQURERUQsIHVwZGF0ZVN1YnRpdGxlcyk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU1VCVElUTEVfQ0hBTkdFRCwgc2VsZWN0Q3VycmVudFN1YnRpdGxlKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TVUJUSVRMRV9SRU1PVkVELCB1cGRhdGVTdWJ0aXRsZXMpO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBzdWJ0aXRsZXMgd2hlbiBzb3VyY2UgZ29lcyBhd2F5XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU09VUkNFX1VOTE9BREVELCB1cGRhdGVTdWJ0aXRsZXMpO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBzdWJ0aXRsZXMgd2hlbiBhIG5ldyBzb3VyY2UgaXMgbG9hZGVkXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUkVBRFksIHVwZGF0ZVN1YnRpdGxlcyk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHN1YnRpdGxlcyB3aGVuIHRoZSBwZXJpb2Qgd2l0aGluIGEgc291cmNlIGNoYW5nZXNcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QRVJJT0RfU1dJVENIRUQsIHVwZGF0ZVN1YnRpdGxlcyk7XHJcbiAgICAgICAgLy8gUG9wdWxhdGUgc3VidGl0bGVzIGF0IHN0YXJ0dXBcclxuICAgICAgICB1cGRhdGVTdWJ0aXRsZXMoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3VidGl0bGVTZWxlY3RCb3g7XHJcbn0oc2VsZWN0Ym94XzEuU2VsZWN0Qm94KSk7XHJcbmV4cG9ydHMuU3VidGl0bGVTZWxlY3RCb3ggPSBTdWJ0aXRsZVNlbGVjdEJveDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2VsZWN0Ym94LnRzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29udGFpbmVyXCIpO1xyXG52YXIgbGFiZWxfMSA9IHJlcXVpcmUoXCIuL2xhYmVsXCIpO1xyXG52YXIgY29udHJvbGJhcl8xID0gcmVxdWlyZShcIi4vY29udHJvbGJhclwiKTtcclxuLyoqXHJcbiAqIE92ZXJsYXlzIHRoZSBwbGF5ZXIgdG8gZGlzcGxheSBzdWJ0aXRsZXMuXHJcbiAqL1xyXG52YXIgU3VidGl0bGVPdmVybGF5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTdWJ0aXRsZU92ZXJsYXksIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTdWJ0aXRsZU92ZXJsYXkoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnByZXZpZXdTdWJ0aXRsZUFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIF90aGlzLnByZXZpZXdTdWJ0aXRsZSA9IG5ldyBTdWJ0aXRsZUxhYmVsKHsgdGV4dDogJ2V4YW1wbGUgc3VidGl0bGUnIH0pO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXN1YnRpdGxlLW92ZXJsYXknLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3VidGl0bGVPdmVybGF5LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHZhciBzdWJ0aXRsZU1hbmFnZXIgPSBuZXcgQWN0aXZlU3VidGl0bGVNYW5hZ2VyKCk7XHJcbiAgICAgICAgdGhpcy5zdWJ0aXRsZU1hbmFnZXIgPSBzdWJ0aXRsZU1hbmFnZXI7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ1VFX0VOVEVSLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy8gU2FuaXRpemUgY3VlIGRhdGEgKG11c3QgYmUgZG9uZSBiZWZvcmUgdGhlIGN1ZSBJRCBpcyBnZW5lcmF0ZWQgaW4gc3VidGl0bGVNYW5hZ2VyLmN1ZUVudGVyKVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQucG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWV0aW1lcyB0aGUgcG9zaXRpb25zIGFyZSB1bmRlZmluZWQsIHdlIGFzc3VtZSB0aGVtIHRvIGJlIHplcm9cclxuICAgICAgICAgICAgICAgIGV2ZW50LnBvc2l0aW9uLnJvdyA9IGV2ZW50LnBvc2l0aW9uLnJvdyB8fCAwO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucG9zaXRpb24uY29sdW1uID0gZXZlbnQucG9zaXRpb24uY29sdW1uIHx8IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGxhYmVsVG9BZGQgPSBzdWJ0aXRsZU1hbmFnZXIuY3VlRW50ZXIoZXZlbnQpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMucHJldmlld1N1YnRpdGxlQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVDb21wb25lbnQoX3RoaXMucHJldmlld1N1YnRpdGxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5hZGRDb21wb25lbnQobGFiZWxUb0FkZCk7XHJcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZUNvbXBvbmVudHMoKTtcclxuICAgICAgICAgICAgX3RoaXMuc2hvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NVRV9FWElULCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGxhYmVsVG9SZW1vdmUgPSBzdWJ0aXRsZU1hbmFnZXIuY3VlRXhpdChldmVudCk7XHJcbiAgICAgICAgICAgIGlmIChsYWJlbFRvUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVDb21wb25lbnQobGFiZWxUb1JlbW92ZSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFzdWJ0aXRsZU1hbmFnZXIuaGFzQ3Vlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5wcmV2aWV3U3VidGl0bGVBY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRDb21wb25lbnQoX3RoaXMucHJldmlld1N1YnRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgc3VidGl0bGVDbGVhckhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgc3VidGl0bGVNYW5hZ2VyLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIF90aGlzLnJlbW92ZUNvbXBvbmVudHMoKTtcclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlQ29tcG9uZW50cygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQVVESU9fQ0hBTkdFRCwgc3VidGl0bGVDbGVhckhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NVQlRJVExFX0NIQU5HRUQsIHN1YnRpdGxlQ2xlYXJIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TRUVLLCBzdWJ0aXRsZUNsZWFySGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVElNRV9TSElGVCwgc3VidGl0bGVDbGVhckhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BMQVlCQUNLX0ZJTklTSEVELCBzdWJ0aXRsZUNsZWFySGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU09VUkNFX1VOTE9BREVELCBzdWJ0aXRsZUNsZWFySGFuZGxlcik7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uQ29tcG9uZW50U2hvdy5zdWJzY3JpYmUoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50IGluc3RhbmNlb2YgY29udHJvbGJhcl8xLkNvbnRyb2xCYXIpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyhfdGhpcy5wcmVmaXhDc3MoU3VidGl0bGVPdmVybGF5LkNMQVNTX0NPTlRST0xCQVJfVklTSUJMRSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uQ29tcG9uZW50SGlkZS5zdWJzY3JpYmUoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50IGluc3RhbmNlb2YgY29udHJvbGJhcl8xLkNvbnRyb2xCYXIpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyhfdGhpcy5wcmVmaXhDc3MoU3VidGl0bGVPdmVybGF5LkNMQVNTX0NPTlRST0xCQVJfVklTSUJMRSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVDZWE2MDhDYXB0aW9ucyhwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgLy8gSW5pdFxyXG4gICAgICAgIHN1YnRpdGxlQ2xlYXJIYW5kbGVyKCk7XHJcbiAgICB9O1xyXG4gICAgU3VidGl0bGVPdmVybGF5LnByb3RvdHlwZS5jb25maWd1cmVDZWE2MDhDYXB0aW9ucyA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gVGhlIGNhbGN1bGF0ZWQgZm9udCBzaXplXHJcbiAgICAgICAgdmFyIGZvbnRTaXplID0gMDtcclxuICAgICAgICAvLyBUaGUgcmVxdWlyZWQgbGV0dGVyIHNwYWNpbmcgc3ByZWFkIHRoZSB0ZXh0IGNoYXJhY3RlcnMgZXZlbmx5IGFjcm9zcyB0aGUgZ3JpZFxyXG4gICAgICAgIHZhciBmb250TGV0dGVyU3BhY2luZyA9IDA7XHJcbiAgICAgICAgLy8gRmxhZyB0ZWxsaW5nIGlmIGEgZm9udCBzaXplIGNhbGN1bGF0aW9uIGlzIHJlcXVpcmVkIG9mIGlmIHRoZSBjdXJyZW50IHZhbHVlcyBhcmUgdmFsaWRcclxuICAgICAgICB2YXIgZm9udFNpemVDYWxjdWxhdGlvblJlcXVpcmVkID0gdHJ1ZTtcclxuICAgICAgICAvLyBGbGFnIHRlbGxpbmcgaWYgdGhlIENFQS02MDggbW9kZSBpcyBlbmFibGVkXHJcbiAgICAgICAgdmFyIGVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgdXBkYXRlQ0VBNjA4Rm9udFNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkdW1teUxhYmVsID0gbmV3IFN1YnRpdGxlTGFiZWwoeyB0ZXh0OiAnWCcgfSk7XHJcbiAgICAgICAgICAgIGR1bW15TGFiZWwuZ2V0RG9tRWxlbWVudCgpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAvLyBCeSB1c2luZyBhIGxhcmdlIGZvbnQgc2l6ZSB3ZSBkbyBub3QgbmVlZCB0byB1c2UgbXVsdGlwbGUgbGV0dGVycyBhbmQgY2FuIGdldCBzdGlsbCBhblxyXG4gICAgICAgICAgICAgICAgLy8gYWNjdXJhdGUgbWVhc3VyZW1lbnQgZXZlbiB0aG91Z2ggdGhlIHJldHVybmVkIHNpemUgaXMgYW4gaW50ZWdlciB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcyMDBweCcsXHJcbiAgICAgICAgICAgICAgICAnbGluZS1oZWlnaHQnOiAnMjAwcHgnLFxyXG4gICAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAnaGlkZGVuJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIF90aGlzLmFkZENvbXBvbmVudChkdW1teUxhYmVsKTtcclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlQ29tcG9uZW50cygpO1xyXG4gICAgICAgICAgICBfdGhpcy5zaG93KCk7XHJcbiAgICAgICAgICAgIHZhciBkdW1teUxhYmVsQ2hhcldpZHRoID0gZHVtbXlMYWJlbC5nZXREb21FbGVtZW50KCkud2lkdGgoKTtcclxuICAgICAgICAgICAgdmFyIGR1bW15TGFiZWxDaGFySGVpZ2h0ID0gZHVtbXlMYWJlbC5nZXREb21FbGVtZW50KCkuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHZhciBmb250U2l6ZVJhdGlvID0gZHVtbXlMYWJlbENoYXJXaWR0aCAvIGR1bW15TGFiZWxDaGFySGVpZ2h0O1xyXG4gICAgICAgICAgICBfdGhpcy5yZW1vdmVDb21wb25lbnQoZHVtbXlMYWJlbCk7XHJcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZUNvbXBvbmVudHMoKTtcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5zdWJ0aXRsZU1hbmFnZXIuaGFzQ3Vlcykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRoZSBzaXplIHJhdGlvIG9mIHRoZSBsZXR0ZXIgZ3JpZFxyXG4gICAgICAgICAgICB2YXIgZm9udEdyaWRTaXplUmF0aW8gPSAoZHVtbXlMYWJlbENoYXJXaWR0aCAqIFN1YnRpdGxlT3ZlcmxheS5DRUE2MDhfTlVNX0NPTFVNTlMpIC9cclxuICAgICAgICAgICAgICAgIChkdW1teUxhYmVsQ2hhckhlaWdodCAqIFN1YnRpdGxlT3ZlcmxheS5DRUE2MDhfTlVNX1JPV1MpO1xyXG4gICAgICAgICAgICAvLyBUaGUgc2l6ZSByYXRpbyBvZiB0aGUgYXZhaWxhYmxlIHNwYWNlIGZvciB0aGUgZ3JpZFxyXG4gICAgICAgICAgICB2YXIgc3VidGl0bGVPdmVybGF5U2l6ZVJhdGlvID0gX3RoaXMuZ2V0RG9tRWxlbWVudCgpLndpZHRoKCkgLyBfdGhpcy5nZXREb21FbGVtZW50KCkuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIGlmIChzdWJ0aXRsZU92ZXJsYXlTaXplUmF0aW8gPiBmb250R3JpZFNpemVSYXRpbykge1xyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYXZhaWxhYmxlIHNwYWNlIGlzIHdpZGVyIHRoYW4gdGhlIHRleHQgZ3JpZCwgdGhlIGZvbnQgc2l6ZSBpcyBzaW1wbHlcclxuICAgICAgICAgICAgICAgIC8vIGRldGVybWluZWQgYnkgdGhlIGhlaWdodCBvZiB0aGUgYXZhaWxhYmxlIHNwYWNlLlxyXG4gICAgICAgICAgICAgICAgZm9udFNpemUgPSBfdGhpcy5nZXREb21FbGVtZW50KCkuaGVpZ2h0KCkgLyBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X05VTV9ST1dTO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBhZGRpdGlvbmFsIGxldHRlciBzcGFjaW5nIHJlcXVpcmVkIHRvIGV2ZW5seSBzcHJlYWQgdGhlIHRleHQgYWNyb3NzIHRoZSBncmlkJ3Mgd2lkdGhcclxuICAgICAgICAgICAgICAgIHZhciBncmlkU2xvdFdpZHRoID0gX3RoaXMuZ2V0RG9tRWxlbWVudCgpLndpZHRoKCkgLyBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X05VTV9DT0xVTU5TO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZvbnRDaGFyV2lkdGggPSBmb250U2l6ZSAqIGZvbnRTaXplUmF0aW87XHJcbiAgICAgICAgICAgICAgICBmb250TGV0dGVyU3BhY2luZyA9IGdyaWRTbG90V2lkdGggLSBmb250Q2hhcldpZHRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYXZhaWxhYmxlIHNwYWNlIGlzIG5vdCB3aWRlIGVub3VnaCwgdGV4dHMgd291bGQgdmVydGljYWxseSBvdmVybGFwIGlmIHdlIHRha2VcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBoZWlnaHQgYXMgYSBiYXNlIGZvciB0aGUgZm9udCBzaXplLCBzbyB3ZSBuZWVkIHRvIGxpbWl0IHRoZSBoZWlnaHQuIFdlIGRvIHRoYXRcclxuICAgICAgICAgICAgICAgIC8vIGJ5IGRldGVybWluaW5nIHRoZSBmb250IHNpemUgYnkgdGhlIHdpZHRoIG9mIHRoZSBhdmFpbGFibGUgc3BhY2UuXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZSA9IF90aGlzLmdldERvbUVsZW1lbnQoKS53aWR0aCgpIC8gU3VidGl0bGVPdmVybGF5LkNFQTYwOF9OVU1fQ09MVU1OUyAvIGZvbnRTaXplUmF0aW87XHJcbiAgICAgICAgICAgICAgICBmb250TGV0dGVyU3BhY2luZyA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVXBkYXRlIGZvbnQtc2l6ZSBvZiBhbGwgYWN0aXZlIHN1YnRpdGxlIGxhYmVsc1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMuZ2V0Q29tcG9uZW50cygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsIGluc3RhbmNlb2YgU3VidGl0bGVMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsLmdldERvbUVsZW1lbnQoKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZm9udC1zaXplJzogZm9udFNpemUgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdsZXR0ZXItc3BhY2luZyc6IGZvbnRMZXR0ZXJTcGFjaW5nICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZRVJfUkVTSVpFLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChlbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVDRUE2MDhGb250U2l6ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9udFNpemVDYWxjdWxhdGlvblJlcXVpcmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NVRV9FTlRFUiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBpc0NFQTYwOCA9IGV2ZW50LnBvc2l0aW9uICE9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICghaXNDRUE2MDgpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNraXAgYWxsIG5vbi1DRUE2MDggY3Vlc1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBsYWJlbHMgPSBfdGhpcy5zdWJ0aXRsZU1hbmFnZXIuZ2V0Q3VlcyhldmVudCk7XHJcbiAgICAgICAgICAgIGlmICghZW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3MoX3RoaXMucHJlZml4Q3NzKFN1YnRpdGxlT3ZlcmxheS5DTEFTU19DRUFfNjA4KSk7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBjb25kaXRpb25hbGx5IHVwZGF0ZSB0aGUgZm9udCBzaXplIGJ5IHRoaXMgZmxhZyBoZXJlIHRvIGF2b2lkIHVwZGF0aW5nIGV2ZXJ5IHRpbWUgYSBzdWJ0aXRsZVxyXG4gICAgICAgICAgICAgICAgLy8gaXMgYWRkZWQgaW50byBhbiBlbXB0eSBvdmVybGF5LiBCZWNhdXNlIHdlIHJlc2V0IHRoZSBvdmVybGF5IHdoZW4gYWxsIHN1YnRpdGxlcyBhcmUgZ29uZSwgdGhpc1xyXG4gICAgICAgICAgICAgICAgLy8gd291bGQgdHJpZ2dlciBhbiB1bm5lY2Vzc2FyeSB1cGRhdGUgZXZlcnkgdGltZSwgYnV0IGl0J3Mgb25seSByZXF1aXJlZCB1bmRlciBjZXJ0YWluIGNvbmRpdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAvLyBlLmcuIGFmdGVyIHRoZSBwbGF5ZXIgc2l6ZSBoYXMgY2hhbmdlZC5cclxuICAgICAgICAgICAgICAgIGlmIChmb250U2l6ZUNhbGN1bGF0aW9uUmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVDRUE2MDhGb250U2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplQ2FsY3VsYXRpb25SZXF1aXJlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbGFiZWxzXzEgPSBsYWJlbHM7IF9pIDwgbGFiZWxzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBsYWJlbHNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICBsYWJlbC5nZXREb21FbGVtZW50KCkuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnbGVmdCc6IGV2ZW50LnBvc2l0aW9uLmNvbHVtbiAqIFN1YnRpdGxlT3ZlcmxheS5DRUE2MDhfQ09MVU1OX09GRlNFVCArIFwiJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICd0b3AnOiBldmVudC5wb3NpdGlvbi5yb3cgKiBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X1JPV19PRkZTRVQgKyBcIiVcIixcclxuICAgICAgICAgICAgICAgICAgICAnZm9udC1zaXplJzogZm9udFNpemUgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xldHRlci1zcGFjaW5nJzogZm9udExldHRlclNwYWNpbmcgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciByZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcyhTdWJ0aXRsZU92ZXJsYXkuQ0xBU1NfQ0VBXzYwOCkpO1xyXG4gICAgICAgICAgICBlbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DVUVfRVhJVCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLnN1YnRpdGxlTWFuYWdlci5oYXNDdWVzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIENFQS02MDggbW9kZSB3aGVuIGFsbCBzdWJ0aXRsZXMgYXJlIGdvbmUgKHRvIGFsbG93IGNvcnJlY3QgZm9ybWF0dGluZyBhbmRcclxuICAgICAgICAgICAgICAgIC8vIGRpc3BsYXkgb2Ygb3RoZXIgdHlwZXMgb2Ygc3VidGl0bGVzLCBlLmcuIHRoZSBmb3JtYXR0aW5nIHByZXZpZXcgc3VidGl0bGUpXHJcbiAgICAgICAgICAgICAgICByZXNldCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU09VUkNFX1VOTE9BREVELCByZXNldCk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU1VCVElUTEVfQ0hBTkdFRCwgcmVzZXQpO1xyXG4gICAgfTtcclxuICAgIFN1YnRpdGxlT3ZlcmxheS5wcm90b3R5cGUuZW5hYmxlUHJldmlld1N1YnRpdGxlTGFiZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3U3VidGl0bGVBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGlmICghdGhpcy5zdWJ0aXRsZU1hbmFnZXIuaGFzQ3Vlcykge1xyXG4gICAgICAgICAgICB0aGlzLmFkZENvbXBvbmVudCh0aGlzLnByZXZpZXdTdWJ0aXRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3VidGl0bGVPdmVybGF5LnByb3RvdHlwZS5yZW1vdmVQcmV2aWV3U3VidGl0bGVMYWJlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnByZXZpZXdTdWJ0aXRsZUFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQ29tcG9uZW50KHRoaXMucHJldmlld1N1YnRpdGxlKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudHMoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3VidGl0bGVPdmVybGF5O1xyXG59KGNvbnRhaW5lcl8xLkNvbnRhaW5lcikpO1xyXG5TdWJ0aXRsZU92ZXJsYXkuQ0xBU1NfQ09OVFJPTEJBUl9WSVNJQkxFID0gJ2NvbnRyb2xiYXItdmlzaWJsZSc7XHJcblN1YnRpdGxlT3ZlcmxheS5DTEFTU19DRUFfNjA4ID0gJ2NlYTYwOCc7XHJcbi8vIFRoZSBudW1iZXIgb2Ygcm93cyBpbiBhIGNlYTYwOCBncmlkXHJcblN1YnRpdGxlT3ZlcmxheS5DRUE2MDhfTlVNX1JPV1MgPSAxNTtcclxuLy8gVGhlIG51bWJlciBvZiBjb2x1bW5zIGluIGEgY2VhNjA4IGdyaWRcclxuU3VidGl0bGVPdmVybGF5LkNFQTYwOF9OVU1fQ09MVU1OUyA9IDMyO1xyXG4vLyBUaGUgb2Zmc2V0IGluIHBlcmNlbnQgZm9yIG9uZSByb3cgKHdoaWNoIGlzIGFsc28gdGhlIGhlaWdodCBvZiBhIHJvdylcclxuU3VidGl0bGVPdmVybGF5LkNFQTYwOF9ST1dfT0ZGU0VUID0gMTAwIC8gU3VidGl0bGVPdmVybGF5LkNFQTYwOF9OVU1fUk9XUztcclxuLy8gVGhlIG9mZnNldCBpbiBwZXJjZW50IGZvciBvbmUgY29sdW1uICh3aGljaCBpcyBhbHNvIHRoZSB3aWR0aCBvZiBhIGNvbHVtbilcclxuU3VidGl0bGVPdmVybGF5LkNFQTYwOF9DT0xVTU5fT0ZGU0VUID0gMTAwIC8gU3VidGl0bGVPdmVybGF5LkNFQTYwOF9OVU1fQ09MVU1OUztcclxuZXhwb3J0cy5TdWJ0aXRsZU92ZXJsYXkgPSBTdWJ0aXRsZU92ZXJsYXk7XHJcbnZhciBTdWJ0aXRsZUxhYmVsID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTdWJ0aXRsZUxhYmVsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3VidGl0bGVMYWJlbChjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktc3VidGl0bGUtbGFiZWwnLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFN1YnRpdGxlTGFiZWw7XHJcbn0obGFiZWxfMS5MYWJlbCkpO1xyXG52YXIgQWN0aXZlU3VidGl0bGVNYW5hZ2VyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFjdGl2ZVN1YnRpdGxlTWFuYWdlcigpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVN1YnRpdGxlQ3VlTWFwID0ge307XHJcbiAgICAgICAgdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZUNvdW50ID0gMDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyBhIHVuaXF1ZSBJRCBmb3IgYSBzdWJ0aXRsZSBjdWUsIHdoaWNoIGlzIG5lZWRlZCB0byBhc3NvY2lhdGUgYW4gT05fQ1VFX0VOVEVSIHdpdGggaXRzIE9OX0NVRV9FWElUXHJcbiAgICAgKiBldmVudCBzbyB3ZSBjYW4gcmVtb3ZlIHRoZSBjb3JyZWN0IHN1YnRpdGxlIGluIE9OX0NVRV9FWElUIHdoZW4gbXVsdGlwbGUgc3VidGl0bGVzIGFyZSBhY3RpdmUgYXQgdGhlIHNhbWUgdGltZS5cclxuICAgICAqIFRoZSBzdGFydCB0aW1lIHBsdXMgdGhlIHRleHQgc2hvdWxkIG1ha2UgYSB1bmlxdWUgaWRlbnRpZmllciwgYW5kIGluIHRoZSBvbmx5IGNhc2Ugd2hlcmUgYSBjb2xsaXNpb25cclxuICAgICAqIGNhbiBoYXBwZW4sIHR3byBzaW1pbGFyIHRleHRzIHdpbGwgYmUgZGlzcGxheWVkIGF0IGEgc2ltaWxhciB0aW1lIGFuZCBhIHNpbWlsYXIgcG9zaXRpb24gKG9yIHdpdGhvdXQgcG9zaXRpb24pLlxyXG4gICAgICogVGhlIHN0YXJ0IHRpbWUgc2hvdWxkIGFsd2F5cyBiZSBrbm93biwgYmVjYXVzZSBpdCBpcyByZXF1aXJlZCB0byBzY2hlZHVsZSB0aGUgT05fQ1VFX0VOVEVSIGV2ZW50LiBUaGUgZW5kIHRpbWVcclxuICAgICAqIG11c3Qgbm90IG5lY2Vzc2FyaWx5IGJlIGtub3duIGFuZCB0aGVyZWZvcmUgY2Fubm90IGJlIHVzZWQgZm9yIHRoZSBJRC5cclxuICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBBY3RpdmVTdWJ0aXRsZU1hbmFnZXIuY2FsY3VsYXRlSWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgaWQgPSBldmVudC5zdGFydCArICctJyArIGV2ZW50LnRleHQ7XHJcbiAgICAgICAgaWYgKGV2ZW50LnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGlkICs9ICctJyArIGV2ZW50LnBvc2l0aW9uLnJvdyArICctJyArIGV2ZW50LnBvc2l0aW9uLmNvbHVtbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIHN1YnRpdGxlIGN1ZSB0byB0aGUgbWFuYWdlciBhbmQgcmV0dXJucyB0aGUgbGFiZWwgdGhhdCBzaG91bGQgYmUgYWRkZWQgdG8gdGhlIHN1YnRpdGxlIG92ZXJsYXkuXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAqIEByZXR1cm4ge1N1YnRpdGxlTGFiZWx9XHJcbiAgICAgKi9cclxuICAgIEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5wcm90b3R5cGUuY3VlRW50ZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgaWQgPSBBY3RpdmVTdWJ0aXRsZU1hbmFnZXIuY2FsY3VsYXRlSWQoZXZlbnQpO1xyXG4gICAgICAgIHZhciBsYWJlbCA9IG5ldyBTdWJ0aXRsZUxhYmVsKHtcclxuICAgICAgICAgICAgLy8gUHJlZmVyIHRoZSBIVE1MIHN1YnRpdGxlIHRleHQgaWYgc2V0LCBlbHNlIHVzZSB0aGUgcGxhaW4gdGV4dFxyXG4gICAgICAgICAgICB0ZXh0OiBldmVudC5odG1sIHx8IGV2ZW50LnRleHQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGFycmF5IGZvciBpZCBpZiBpdCBkb2VzIG5vdCBleGlzdFxyXG4gICAgICAgIHRoaXMuYWN0aXZlU3VidGl0bGVDdWVNYXBbaWRdID0gdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZU1hcFtpZF0gfHwgW107XHJcbiAgICAgICAgLy8gQWRkIGN1ZVxyXG4gICAgICAgIHRoaXMuYWN0aXZlU3VidGl0bGVDdWVNYXBbaWRdLnB1c2goeyBldmVudDogZXZlbnQsIGxhYmVsOiBsYWJlbCB9KTtcclxuICAgICAgICB0aGlzLmFjdGl2ZVN1YnRpdGxlQ3VlQ291bnQrKztcclxuICAgICAgICByZXR1cm4gbGFiZWw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsYWJlbCBhc3NvY2lhdGVkIHdpdGggYW4gYWxyZWFkeSBhZGRlZCBjdWUuXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAqIEByZXR1cm4ge1N1YnRpdGxlTGFiZWx9XHJcbiAgICAgKi9cclxuICAgIEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5wcm90b3R5cGUuZ2V0Q3VlcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBpZCA9IEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5jYWxjdWxhdGVJZChldmVudCk7XHJcbiAgICAgICAgdmFyIGFjdGl2ZVN1YnRpdGxlQ3VlcyA9IHRoaXMuYWN0aXZlU3VidGl0bGVDdWVNYXBbaWRdO1xyXG4gICAgICAgIGlmIChhY3RpdmVTdWJ0aXRsZUN1ZXMgJiYgYWN0aXZlU3VidGl0bGVDdWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdGl2ZVN1YnRpdGxlQ3Vlcy5tYXAoZnVuY3Rpb24gKGN1ZSkgeyByZXR1cm4gY3VlLmxhYmVsOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIHN1YnRpdGxlIGN1ZSBmcm9tIHRoZSBtYW5hZ2VyIGFuZCByZXR1cm5zIHRoZSBsYWJlbCB0aGF0IHNob3VsZCBiZSByZW1vdmVkIGZyb20gdGhlIHN1YnRpdGxlIG92ZXJsYXksXHJcbiAgICAgKiBvciBudWxsIGlmIHRoZXJlIGlzIG5vIGFzc29jaWF0ZWQgbGFiZWwgZXhpc3RpbmcgKGUuZy4gYmVjYXVzZSBhbGwgbGFiZWxzIGhhdmUgYmVlbiB7QGxpbmsgI2NsZWFyIGNsZWFyZWR9LlxyXG4gICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgKiBAcmV0dXJuIHtTdWJ0aXRsZUxhYmVsfG51bGx9XHJcbiAgICAgKi9cclxuICAgIEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5wcm90b3R5cGUuY3VlRXhpdCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBpZCA9IEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5jYWxjdWxhdGVJZChldmVudCk7XHJcbiAgICAgICAgdmFyIGFjdGl2ZVN1YnRpdGxlQ3VlcyA9IHRoaXMuYWN0aXZlU3VidGl0bGVDdWVNYXBbaWRdO1xyXG4gICAgICAgIGlmIChhY3RpdmVTdWJ0aXRsZUN1ZXMgJiYgYWN0aXZlU3VidGl0bGVDdWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGN1ZVxyXG4gICAgICAgICAgICAvKiBXZSBhcHBseSB0aGUgRklGTyBhcHByb2FjaCBoZXJlIGFuZCByZW1vdmUgdGhlIG9sZGVzdCBjdWUgZnJvbSB0aGUgYXNzb2NpYXRlZCBpZC4gV2hlbiB0aGVyZSBhcmUgbXVsdGlwbGUgY3Vlc1xyXG4gICAgICAgICAgICAgKiB3aXRoIHRoZSBzYW1lIGlkLCB0aGVyZSBpcyBubyB3YXkgdG8ga25vdyB3aGljaCBvbmUgb2YgdGhlIGN1ZXMgaXMgdG8gYmUgZGVsZXRlZCwgc28gd2UganVzdCBob3BlIHRoYXQgRklGT1xyXG4gICAgICAgICAgICAgKiB3b3JrcyBmaW5lLiBUaGVvcmV0aWNhbGx5IGl0IGNhbiBoYXBwZW4gdGhhdCB0d28gY3VlcyB3aXRoIGNvbGxpZGluZyBpZHMgYXJlIHJlbW92ZWQgYXQgZGlmZmVyZW50IHRpbWVzLCBpblxyXG4gICAgICAgICAgICAgKiB0aGUgd3Jvbmcgb3JkZXIuIFRoaXMgcmFyZSBjYXNlIGhhcyB5ZXQgdG8gYmUgb2JzZXJ2ZWQuIElmIGl0IGV2ZXIgZ2V0cyBhbiBpc3N1ZSwgd2UgY2FuIHRha2UgdGhlIHVuc3RhYmxlXHJcbiAgICAgICAgICAgICAqIGN1ZSBlbmQgdGltZSAod2hpY2ggY2FuIGNoYW5nZSBiZXR3ZWVuIE9OX0NVRV9FTlRFUiBhbmQgT05fQ1VFX0VYSVQgSU4gT05fQ1VFX1VQREFURSkgYW5kIHVzZSBpdCBhcyBhblxyXG4gICAgICAgICAgICAgKiBhZGRpdGlvbmFsIGhpbnQgdG8gdHJ5IGFuZCByZW1vdmUgdGhlIGNvcnJlY3Qgb25lIG9mIHRoZSBjb2xsaWRpbmcgY3Vlcy5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHZhciBhY3RpdmVTdWJ0aXRsZUN1ZSA9IGFjdGl2ZVN1YnRpdGxlQ3Vlcy5zaGlmdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVN1YnRpdGxlQ3VlQ291bnQtLTtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdGl2ZVN1YnRpdGxlQ3VlLmxhYmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBY3RpdmVTdWJ0aXRsZU1hbmFnZXIucHJvdG90eXBlLCBcImN1ZUNvdW50XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYWN0aXZlIHN1YnRpdGxlIGN1ZXMuXHJcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBXZSBleHBsaWNpdGx5IGNvdW50IHRoZSBjdWVzIHRvIHNhdmUgYW4gQXJyYXkucmVkdWNlIG9uIGV2ZXJ5IGN1ZUNvdW50IGNhbGwgKHdoaWNoIGNhbiBoYXBwZW4gZnJlcXVlbnRseSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlU3VidGl0bGVDdWVDb3VudDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBY3RpdmVTdWJ0aXRsZU1hbmFnZXIucHJvdG90eXBlLCBcImhhc0N1ZXNcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBhcmUgYWN0aXZlIHN1YnRpdGxlIGN1ZXMsIGVsc2UgZmFsc2UuXHJcbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VlQ291bnQgPiAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFsbCBzdWJ0aXRsZSBjdWVzIGZyb20gdGhlIG1hbmFnZXIuXHJcbiAgICAgKi9cclxuICAgIEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZU1hcCA9IHt9O1xyXG4gICAgICAgIHRoaXMuYWN0aXZlU3VidGl0bGVDdWVDb3VudCA9IDA7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFjdGl2ZVN1YnRpdGxlTWFuYWdlcjtcclxufSgpKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlb3ZlcmxheS50c1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb21wb25lbnRfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudFwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4uL2RvbVwiKTtcclxuLyoqXHJcbiAqIEFuaW1hdGVkIGFuYWxvZyBUViBzdGF0aWMgbm9pc2UuXHJcbiAqL1xyXG52YXIgVHZOb2lzZUNhbnZhcyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVHZOb2lzZUNhbnZhcywgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFR2Tm9pc2VDYW52YXMoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNhbnZhc1dpZHRoID0gMTYwO1xyXG4gICAgICAgIF90aGlzLmNhbnZhc0hlaWdodCA9IDkwO1xyXG4gICAgICAgIF90aGlzLmludGVyZmVyZW5jZUhlaWdodCA9IDUwO1xyXG4gICAgICAgIF90aGlzLmxhc3RGcmFtZVVwZGF0ZSA9IDA7XHJcbiAgICAgICAgX3RoaXMuZnJhbWVJbnRlcnZhbCA9IDYwO1xyXG4gICAgICAgIF90aGlzLnVzZUFuaW1hdGlvbkZyYW1lID0gISF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXR2bm9pc2VjYW52YXMnLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVHZOb2lzZUNhbnZhcy5wcm90b3R5cGUudG9Eb21FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcyA9IG5ldyBkb21fMS5ET00oJ2NhbnZhcycsIHsgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCkgfSk7XHJcbiAgICB9O1xyXG4gICAgVHZOb2lzZUNhbnZhcy5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXNFbGVtZW50ID0gdGhpcy5jYW52YXMuZ2V0KDApO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ29udGV4dCA9IHRoaXMuY2FudmFzRWxlbWVudC5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIHRoaXMubm9pc2VBbmltYXRpb25XaW5kb3dQb3MgPSAtdGhpcy5jYW52YXNIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5sYXN0RnJhbWVVcGRhdGUgPSAwO1xyXG4gICAgICAgIHRoaXMuY2FudmFzRWxlbWVudC53aWR0aCA9IHRoaXMuY2FudmFzV2lkdGg7XHJcbiAgICAgICAgdGhpcy5jYW52YXNFbGVtZW50LmhlaWdodCA9IHRoaXMuY2FudmFzSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMucmVuZGVyRnJhbWUoKTtcclxuICAgIH07XHJcbiAgICBUdk5vaXNlQ2FudmFzLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnVzZUFuaW1hdGlvbkZyYW1lKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZnJhbWVVcGRhdGVIYW5kbGVySWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZnJhbWVVcGRhdGVIYW5kbGVySWQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUdk5vaXNlQ2FudmFzLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUaGlzIGNvZGUgaGFzIGJlZW4gY29waWVkIGZyb20gdGhlIHBsYXllciBjb250cm9scy5qcyBhbmQgc2ltcGxpZmllZFxyXG4gICAgICAgIGlmICh0aGlzLmxhc3RGcmFtZVVwZGF0ZSArIHRoaXMuZnJhbWVJbnRlcnZhbCA+IG5ldyBEYXRlKCkuZ2V0VGltZSgpKSB7XHJcbiAgICAgICAgICAgIC8vIEl0J3MgdG9vIGVhcmx5IHRvIHJlbmRlciB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlTmV4dFJlbmRlcigpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjdXJyZW50UGl4ZWxPZmZzZXQ7XHJcbiAgICAgICAgdmFyIGNhbnZhc1dpZHRoID0gdGhpcy5jYW52YXNXaWR0aDtcclxuICAgICAgICB2YXIgY2FudmFzSGVpZ2h0ID0gdGhpcy5jYW52YXNIZWlnaHQ7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHRleHR1cmVcclxuICAgICAgICB2YXIgbm9pc2VJbWFnZSA9IHRoaXMuY2FudmFzQ29udGV4dC5jcmVhdGVJbWFnZURhdGEoY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcbiAgICAgICAgLy8gRmlsbCB0ZXh0dXJlIHdpdGggbm9pc2VcclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGNhbnZhc0hlaWdodDsgeSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgY2FudmFzV2lkdGg7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBpeGVsT2Zmc2V0ID0gKGNhbnZhc1dpZHRoICogeSAqIDQpICsgeCAqIDQ7XHJcbiAgICAgICAgICAgICAgICBub2lzZUltYWdlLmRhdGFbY3VycmVudFBpeGVsT2Zmc2V0XSA9IE1hdGgucmFuZG9tKCkgKiAyNTU7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA8IHRoaXMubm9pc2VBbmltYXRpb25XaW5kb3dQb3MgfHwgeSA+IHRoaXMubm9pc2VBbmltYXRpb25XaW5kb3dQb3MgKyB0aGlzLmludGVyZmVyZW5jZUhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vaXNlSW1hZ2UuZGF0YVtjdXJyZW50UGl4ZWxPZmZzZXRdICo9IDAuODU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBub2lzZUltYWdlLmRhdGFbY3VycmVudFBpeGVsT2Zmc2V0ICsgMV0gPSBub2lzZUltYWdlLmRhdGFbY3VycmVudFBpeGVsT2Zmc2V0XTtcclxuICAgICAgICAgICAgICAgIG5vaXNlSW1hZ2UuZGF0YVtjdXJyZW50UGl4ZWxPZmZzZXQgKyAyXSA9IG5vaXNlSW1hZ2UuZGF0YVtjdXJyZW50UGl4ZWxPZmZzZXRdO1xyXG4gICAgICAgICAgICAgICAgbm9pc2VJbWFnZS5kYXRhW2N1cnJlbnRQaXhlbE9mZnNldCArIDNdID0gNTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUHV0IHRleHR1cmUgb250byBjYW52YXNcclxuICAgICAgICB0aGlzLmNhbnZhc0NvbnRleHQucHV0SW1hZ2VEYXRhKG5vaXNlSW1hZ2UsIDAsIDApO1xyXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVXBkYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgdGhpcy5ub2lzZUFuaW1hdGlvbldpbmRvd1BvcyArPSA3O1xyXG4gICAgICAgIGlmICh0aGlzLm5vaXNlQW5pbWF0aW9uV2luZG93UG9zID4gY2FudmFzSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9pc2VBbmltYXRpb25XaW5kb3dQb3MgPSAtY2FudmFzSGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjaGVkdWxlTmV4dFJlbmRlcigpO1xyXG4gICAgfTtcclxuICAgIFR2Tm9pc2VDYW52YXMucHJvdG90eXBlLnNjaGVkdWxlTmV4dFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy51c2VBbmltYXRpb25GcmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLmZyYW1lVXBkYXRlSGFuZGxlcklkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlckZyYW1lLmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5mcmFtZVVwZGF0ZUhhbmRsZXJJZCA9IHNldFRpbWVvdXQodGhpcy5yZW5kZXJGcmFtZS5iaW5kKHRoaXMpLCB0aGlzLmZyYW1lSW50ZXJ2YWwpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gVHZOb2lzZUNhbnZhcztcclxufShjb21wb25lbnRfMS5Db21wb25lbnQpKTtcclxuZXhwb3J0cy5Udk5vaXNlQ2FudmFzID0gVHZOb2lzZUNhbnZhcztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3R2bm9pc2VjYW52YXMudHNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgbGlzdHNlbGVjdG9yXzEgPSByZXF1aXJlKFwiLi9saXN0c2VsZWN0b3JcIik7XHJcbnZhciBkb21fMSA9IHJlcXVpcmUoXCIuLi9kb21cIik7XHJcbnZhciBJdGVtU2VsZWN0aW9uTGlzdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoSXRlbVNlbGVjdGlvbkxpc3QsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBJdGVtU2VsZWN0aW9uTGlzdChjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIHRhZzogJ3VsJyxcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1pdGVtc2VsZWN0aW9ubGlzdCcsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBJdGVtU2VsZWN0aW9uTGlzdC5wcm90b3R5cGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoID4gMTtcclxuICAgIH07XHJcbiAgICBJdGVtU2VsZWN0aW9uTGlzdC5wcm90b3R5cGUudG9Eb21FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsaXN0RWxlbWVudCA9IG5ldyBkb21fMS5ET00oJ3VsJywge1xyXG4gICAgICAgICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5saXN0RWxlbWVudCA9IGxpc3RFbGVtZW50O1xyXG4gICAgICAgIHRoaXMudXBkYXRlRG9tSXRlbXMoKTtcclxuICAgICAgICByZXR1cm4gbGlzdEVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgSXRlbVNlbGVjdGlvbkxpc3QucHJvdG90eXBlLnVwZGF0ZURvbUl0ZW1zID0gZnVuY3Rpb24gKHNlbGVjdGVkVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlID09PSB2b2lkIDApIHsgc2VsZWN0ZWRWYWx1ZSA9IG51bGw7IH1cclxuICAgICAgICAvLyBEZWxldGUgYWxsIGNoaWxkcmVuXHJcbiAgICAgICAgdGhpcy5saXN0RWxlbWVudC5lbXB0eSgpO1xyXG4gICAgICAgIHZhciBzZWxlY3RlZExpc3RJdGVtID0gbnVsbDtcclxuICAgICAgICB2YXIgc2VsZWN0SXRlbSA9IGZ1bmN0aW9uIChsaXN0SXRlbSkge1xyXG4gICAgICAgICAgICBsaXN0SXRlbS5hZGRDbGFzcyhfdGhpcy5wcmVmaXhDc3MoSXRlbVNlbGVjdGlvbkxpc3QuQ0xBU1NfU0VMRUNURUQpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBkZXNlbGVjdEl0ZW0gPSBmdW5jdGlvbiAobGlzdEl0ZW0pIHtcclxuICAgICAgICAgICAgbGlzdEl0ZW0ucmVtb3ZlQ2xhc3MoX3RoaXMucHJlZml4Q3NzKEl0ZW1TZWxlY3Rpb25MaXN0LkNMQVNTX1NFTEVDVEVEKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0SXRlbSA9IG5ldyBkb21fMS5ET00oJ2xpJywge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnbGknLFxyXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogdGhpc18xLnByZWZpeENzcygndWktc2VsZWN0aW9ubGlzdGl0ZW0nKSxcclxuICAgICAgICAgICAgfSkuYXBwZW5kKG5ldyBkb21fMS5ET00oJ2EnLCB7fSkuaHRtbChpdGVtLmxhYmVsKSk7XHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRMaXN0SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGlzdEl0ZW0gPSBsaXN0SXRlbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFN0cmluZyhzZWxlY3RlZFZhbHVlKSA9PT0gaXRlbS5rZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExpc3RJdGVtID0gbGlzdEl0ZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSGFuZGxlIGxpc3QgaXRlbSBzZWxlY3Rpb25zXHJcbiAgICAgICAgICAgIGxpc3RJdGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlc2VsZWN0IHRoZSBwcmV2aW91cyBpdGVtIChpZiB0aGVyZSB3YXMgYSBzZWxlY3RlZCBpdGVtKVxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkTGlzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXNlbGVjdEl0ZW0oc2VsZWN0ZWRMaXN0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QgdGhlIGNsaWNrZWQgaXRlbVxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRMaXN0SXRlbSA9IGxpc3RJdGVtO1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0SXRlbShsaXN0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAvLyBGaXJlIHRoZSBldmVudFxyXG4gICAgICAgICAgICAgICAgX3RoaXMub25JdGVtU2VsZWN0ZWRFdmVudChpdGVtLmtleSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gU2VsZWN0IGRlZmF1bHQgaXRlbVxyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRMaXN0SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0SXRlbShzZWxlY3RlZExpc3RJdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzXzEubGlzdEVsZW1lbnQuYXBwZW5kKGxpc3RJdGVtKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB0aGlzXzEgPSB0aGlzO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLml0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcclxuICAgICAgICAgICAgX2xvb3BfMShpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSXRlbVNlbGVjdGlvbkxpc3QucHJvdG90eXBlLm9uSXRlbUFkZGVkRXZlbnQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLm9uSXRlbUFkZGVkRXZlbnQuY2FsbCh0aGlzLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVEb21JdGVtcyh0aGlzLnNlbGVjdGVkSXRlbSk7XHJcbiAgICB9O1xyXG4gICAgSXRlbVNlbGVjdGlvbkxpc3QucHJvdG90eXBlLm9uSXRlbVJlbW92ZWRFdmVudCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUub25JdGVtUmVtb3ZlZEV2ZW50LmNhbGwodGhpcywgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRG9tSXRlbXModGhpcy5zZWxlY3RlZEl0ZW0pO1xyXG4gICAgfTtcclxuICAgIEl0ZW1TZWxlY3Rpb25MaXN0LnByb3RvdHlwZS5vbkl0ZW1TZWxlY3RlZEV2ZW50ID0gZnVuY3Rpb24gKHZhbHVlLCB1cGRhdGVEb21JdGVtcykge1xyXG4gICAgICAgIGlmICh1cGRhdGVEb21JdGVtcyA9PT0gdm9pZCAwKSB7IHVwZGF0ZURvbUl0ZW1zID0gdHJ1ZTsgfVxyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUub25JdGVtU2VsZWN0ZWRFdmVudC5jYWxsKHRoaXMsIHZhbHVlKTtcclxuICAgICAgICBpZiAodXBkYXRlRG9tSXRlbXMpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVEb21JdGVtcyh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBJdGVtU2VsZWN0aW9uTGlzdDtcclxufShsaXN0c2VsZWN0b3JfMS5MaXN0U2VsZWN0b3IpKTtcclxuSXRlbVNlbGVjdGlvbkxpc3QuQ0xBU1NfU0VMRUNURUQgPSAnc2VsZWN0ZWQnO1xyXG5leHBvcnRzLkl0ZW1TZWxlY3Rpb25MaXN0ID0gSXRlbVNlbGVjdGlvbkxpc3Q7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9pdGVtc2VsZWN0aW9ubGlzdC50c1xuLy8gbW9kdWxlIGlkID0gNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBidXR0b25fMSA9IHJlcXVpcmUoXCIuL2J1dHRvblwiKTtcclxuLyoqXHJcbiAqIEEgY2xpY2sgb3ZlcmxheSB0aGF0IG9wZW5zIGFuIHVybCBpbiBhIG5ldyB0YWIgaWYgY2xpY2tlZC5cclxuICovXHJcbnZhciBDbGlja092ZXJsYXkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENsaWNrT3ZlcmxheSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENsaWNrT3ZlcmxheShjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktY2xpY2tvdmVybGF5JyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENsaWNrT3ZlcmxheS5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmluaXRpYWxpemUuY2FsbCh0aGlzKTtcclxuICAgICAgICB0aGlzLnNldFVybCh0aGlzLmNvbmZpZy51cmwpO1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5nZXREb21FbGVtZW50KCk7XHJcbiAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmRhdGEoJ3VybCcpKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihlbGVtZW50LmRhdGEoJ3VybCcpLCAnX2JsYW5rJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIFVSTCB0aGF0IHNob3VsZCBiZSBmb2xsb3dlZCB3aGVuIHRoZSB3YXRlcm1hcmsgaXMgY2xpY2tlZC5cclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSB3YXRlcm1hcmsgVVJMXHJcbiAgICAgKi9cclxuICAgIENsaWNrT3ZlcmxheS5wcm90b3R5cGUuZ2V0VXJsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERvbUVsZW1lbnQoKS5kYXRhKCd1cmwnKTtcclxuICAgIH07XHJcbiAgICBDbGlja092ZXJsYXkucHJvdG90eXBlLnNldFVybCA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICBpZiAodXJsID09PSB1bmRlZmluZWQgfHwgdXJsID09IG51bGwpIHtcclxuICAgICAgICAgICAgdXJsID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmRhdGEoJ3VybCcsIHVybCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENsaWNrT3ZlcmxheTtcclxufShidXR0b25fMS5CdXR0b24pKTtcclxuZXhwb3J0cy5DbGlja092ZXJsYXkgPSBDbGlja092ZXJsYXk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jbGlja292ZXJsYXkudHNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9idXR0b25cIik7XHJcbnZhciBkb21fMSA9IHJlcXVpcmUoXCIuLi9kb21cIik7XHJcbi8qKlxyXG4gKiBBIGJ1dHRvbiB0byBwbGF5L3JlcGxheSBhIHZpZGVvLlxyXG4gKi9cclxudmFyIEh1Z2VSZXBsYXlCdXR0b24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEh1Z2VSZXBsYXlCdXR0b24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBIdWdlUmVwbGF5QnV0dG9uKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1odWdlcmVwbGF5YnV0dG9uJyxcclxuICAgICAgICAgICAgdGV4dDogJ1JlcGxheScsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBIdWdlUmVwbGF5QnV0dG9uLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcGxheWVyLnBsYXkoJ3VpJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSHVnZVJlcGxheUJ1dHRvbi5wcm90b3R5cGUudG9Eb21FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBidXR0b25FbGVtZW50ID0gX3N1cGVyLnByb3RvdHlwZS50b0RvbUVsZW1lbnQuY2FsbCh0aGlzKTtcclxuICAgICAgICAvLyBBZGQgY2hpbGQgdGhhdCBjb250YWlucyB0aGUgcGxheSBidXR0b24gaW1hZ2VcclxuICAgICAgICAvLyBTZXR0aW5nIHRoZSBpbWFnZSBkaXJlY3RseSBvbiB0aGUgYnV0dG9uIGRvZXMgbm90IHdvcmsgdG9nZXRoZXIgd2l0aCBzY2FsaW5nIGFuaW1hdGlvbnMsIGJlY2F1c2UgdGhlIGJ1dHRvblxyXG4gICAgICAgIC8vIGNhbiBjb3ZlciB0aGUgd2hvbGUgdmlkZW8gcGxheWVyIGFyZSBhbmQgc2NhbGluZyB3b3VsZCBleHRlbmQgaXQgYmV5b25kLiBCeSBhZGRpbmcgYW4gaW5uZXIgZWxlbWVudCwgY29uZmluZWRcclxuICAgICAgICAvLyB0byB0aGUgc2l6ZSBpZiB0aGUgaW1hZ2UsIGl0IGNhbiBzY2FsZSBpbnNpZGUgdGhlIHBsYXllciB3aXRob3V0IG92ZXJzaG9vdGluZy5cclxuICAgICAgICBidXR0b25FbGVtZW50LmFwcGVuZChuZXcgZG9tXzEuRE9NKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdpbWFnZScpLFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gYnV0dG9uRWxlbWVudDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSHVnZVJlcGxheUJ1dHRvbjtcclxufShidXR0b25fMS5CdXR0b24pKTtcclxuZXhwb3J0cy5IdWdlUmVwbGF5QnV0dG9uID0gSHVnZVJlcGxheUJ1dHRvbjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2h1Z2VyZXBsYXlidXR0b24udHNcbi8vIG1vZHVsZSBpZCA9IDQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9idXR0b25cIik7XHJcbi8qKlxyXG4gKiBBIGJ1dHRvbiB0aGF0IGNsb3NlcyAoaGlkZXMpIGEgY29uZmlndXJlZCBjb21wb25lbnQuXHJcbiAqL1xyXG52YXIgQ2xvc2VCdXR0b24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENsb3NlQnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ2xvc2VCdXR0b24oY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWNsb3NlYnV0dG9uJyxcclxuICAgICAgICAgICAgdGV4dDogJ0Nsb3NlJyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENsb3NlQnV0dG9uLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcclxuICAgICAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uZmlnLnRhcmdldC5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENsb3NlQnV0dG9uO1xyXG59KGJ1dHRvbl8xLkJ1dHRvbikpO1xyXG5leHBvcnRzLkNsb3NlQnV0dG9uID0gQ2xvc2VCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jbG9zZWJ1dHRvbi50c1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFN0b3JhZ2VVdGlscztcclxuKGZ1bmN0aW9uIChTdG9yYWdlVXRpbHMpIHtcclxuICAgIHZhciBoYXNMb2NhbFN0b3JhZ2VDYWNoZTtcclxuICAgIGZ1bmN0aW9uIGhhc0xvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICBpZiAoaGFzTG9jYWxTdG9yYWdlQ2FjaGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhc0xvY2FsU3RvcmFnZUNhY2hlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBoYXNMb2NhbFN0b3JhZ2UgaXMgdXNlZCB0byBzYWZlbHkgZW5zdXJlIHdlIGNhbiB1c2UgbG9jYWxTdG9yYWdlXHJcbiAgICAgICAgLy8gdGFrZW4gZnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViX1N0b3JhZ2VfQVBJL1VzaW5nX3RoZV9XZWJfU3RvcmFnZV9BUEkjRmVhdHVyZS1kZXRlY3RpbmdfbG9jYWxTdG9yYWdlXHJcbiAgICAgICAgdmFyIHN0b3JhZ2UgPSB3aW5kb3dbJ2xvY2FsU3RvcmFnZSddO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gJ19fc3RvcmFnZV90ZXN0X18nO1xyXG4gICAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oeCwgeCk7XHJcbiAgICAgICAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbSh4KTtcclxuICAgICAgICAgICAgaGFzTG9jYWxTdG9yYWdlQ2FjaGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBoYXNMb2NhbFN0b3JhZ2VDYWNoZSA9IGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgKFxyXG4gICAgICAgICAgICAvLyBldmVyeXRoaW5nIGV4Y2VwdCBGaXJlZm94XHJcbiAgICAgICAgICAgIGUuY29kZSA9PT0gMjIgfHxcclxuICAgICAgICAgICAgICAgIC8vIEZpcmVmb3hcclxuICAgICAgICAgICAgICAgIGUuY29kZSA9PT0gMTAxNCB8fFxyXG4gICAgICAgICAgICAgICAgLy8gdGVzdCBuYW1lIGZpZWxkIHRvbywgYmVjYXVzZSBjb2RlIG1pZ2h0IG5vdCBiZSBwcmVzZW50XHJcbiAgICAgICAgICAgICAgICAvLyBldmVyeXRoaW5nIGV4Y2VwdCBGaXJlZm94XHJcbiAgICAgICAgICAgICAgICBlLm5hbWUgPT09ICdRdW90YUV4Y2VlZGVkRXJyb3InIHx8XHJcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94XHJcbiAgICAgICAgICAgICAgICBlLm5hbWUgPT09ICdOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRCcpICYmXHJcbiAgICAgICAgICAgICAgICAvLyBhY2tub3dsZWRnZSBRdW90YUV4Y2VlZGVkRXJyb3Igb25seSBpZiB0aGVyZSdzIHNvbWV0aGluZyBhbHJlYWR5IHN0b3JlZFxyXG4gICAgICAgICAgICAgICAgc3RvcmFnZS5sZW5ndGggIT09IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoYXNMb2NhbFN0b3JhZ2VDYWNoZTtcclxuICAgIH1cclxuICAgIFN0b3JhZ2VVdGlscy5oYXNMb2NhbFN0b3JhZ2UgPSBoYXNMb2NhbFN0b3JhZ2U7XHJcbiAgICAvKipcclxuICAgICAqIFN0b3JlcyBhIHN0cmluZyBpdGVtIGludG8gbG9jYWxTdG9yYWdlLlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUgaXRlbSdzIGtleVxyXG4gICAgICogQHBhcmFtIGRhdGEgdGhlIGl0ZW0ncyBkYXRhXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHNldEl0ZW0oa2V5LCBkYXRhKSB7XHJcbiAgICAgICAgaWYgKFN0b3JhZ2VVdGlscy5oYXNMb2NhbFN0b3JhZ2UoKSkge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBTdG9yYWdlVXRpbHMuc2V0SXRlbSA9IHNldEl0ZW07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgYW4gaXRlbSdzIHN0cmluZyB2YWx1ZSBmcm9tIHRoZSBsb2NhbFN0b3JhZ2UuXHJcbiAgICAgKiBAcGFyYW0ga2V5IHRoZSBrZXkgdG8gbG9vayB1cCBpdHMgYXNzb2NpYXRlZCB2YWx1ZVxyXG4gICAgICogQHJldHVybiB7c3RyaW5nIHwgbnVsbH0gUmV0dXJucyB0aGUgc3RyaW5nIGlmIGZvdW5kLCBudWxsIGlmIHRoZXJlIGlzIG5vIGRhdGEgc3RvcmVkIGZvciB0aGUga2V5XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldEl0ZW0oa2V5KSB7XHJcbiAgICAgICAgaWYgKFN0b3JhZ2VVdGlscy5oYXNMb2NhbFN0b3JhZ2UoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBTdG9yYWdlVXRpbHMuZ2V0SXRlbSA9IGdldEl0ZW07XHJcbiAgICAvKipcclxuICAgICAqIFN0b3JlcyBhbiBvYmplY3QgaW50byBsb2NhbFN0b3JhZ2UuIFRoZSBvYmplY3Qgd2lsbCBiZSBzZXJpYWxpemVkIHRvIEpTT04uIFRoZSBmb2xsb3dpbmcgdHlwZXMgYXJlIHN1cHBvcnRlZFxyXG4gICAgICogaW4gYWRkaXRpb24gdG8gdGhlIGRlZmF1bHQgdHlwZXM6XHJcbiAgICAgKiAgLSBDb2xvclV0aWxzLkNvbG9yXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUga2V5IHRvIHN0b3JlIHRoZSBkYXRhIHRvXHJcbiAgICAgKiBAcGFyYW0gZGF0YSB0aGUgb2JqZWN0IHRvIHN0b3JlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHNldE9iamVjdChrZXksIGRhdGEpIHtcclxuICAgICAgICBpZiAoU3RvcmFnZVV0aWxzLmhhc0xvY2FsU3RvcmFnZSgpKSB7XHJcbiAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbiAgICAgICAgICAgIHNldEl0ZW0oa2V5LCBqc29uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBTdG9yYWdlVXRpbHMuc2V0T2JqZWN0ID0gc2V0T2JqZWN0O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGFuIG9iamVjdCBmb3IgdGhlIGdpdmVuIGtleSBmcm9tIGxvY2FsU3RvcmFnZS4gVGhlIG9iamVjdCB3aWxsIGJlIGRlc2VyaWFsaXplZCBmcm9tIEpTT04uIEJlc2lkZSB0aGVcclxuICAgICAqIGRlZmF1bHQgdHlwZXMsIHRoZSBmb2xsb3dpbmcgdHlwZXMgYXJlIHN1cHBvcnRlZDpcclxuICAgICAqICAtIENvbG9yVXRpbHMuQ29sb3JcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ga2V5IHRoZSBrZXkgdG8gbG9vayB1cCBpdHMgYXNzb2NpYXRlZCBvYmplY3RcclxuICAgICAqIEByZXR1cm4ge2FueX0gUmV0dXJucyB0aGUgb2JqZWN0IGlmIGZvdW5kLCBudWxsIG90aGVyd2lzZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRPYmplY3Qoa2V5KSB7XHJcbiAgICAgICAgaWYgKFN0b3JhZ2VVdGlscy5oYXNMb2NhbFN0b3JhZ2UoKSkge1xyXG4gICAgICAgICAgICB2YXIganNvbiA9IGdldEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgaWYgKGtleSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IEpTT04ucGFyc2UoanNvbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgU3RvcmFnZVV0aWxzLmdldE9iamVjdCA9IGdldE9iamVjdDtcclxufSkoU3RvcmFnZVV0aWxzID0gZXhwb3J0cy5TdG9yYWdlVXRpbHMgfHwgKGV4cG9ydHMuU3RvcmFnZVV0aWxzID0ge30pKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9zdG9yYWdldXRpbHMudHNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qISBIaXZlIFN0YXRzIFBhY2sgYnVpbGQgMy4yLjAgQ29weXJpZ2h0KGMpIDIwMTUgSGl2ZVN0cmVhbWluZyBBQiwgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEF1dGhvcnM6IG1pa2FlbC5ob2dxdmlzdEBoaXZlc3RyZWFtaW5nLmNvbSAtIHJpY2NhcmRvLnJlYWxlQGhpdmVzdHJlYW1pbmcuY29tIC0gcm9iZXJ0by5yb3ZlcnNvQGhpdmVzdHJlYW1pbmcuY29tICovXG4vKiEgQXRhdHVzSnMgLSB2Mi4zLjEyIC0gMjAxNi0wNy0wM1xuICogQ29weXJpZ2h0IChjKSAyMDE2IEF0YXR1cyAqL1xuIWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYil9ZnVuY3Rpb24gYyhhKXtyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgYX1pZihhKXt2YXIgZD17fSxlPWEuVHJhY2VLaXQsZj1bXS5zbGljZSxnPVwiP1wiO2Qubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLlRyYWNlS2l0PWUsZH0sZC53cmFwPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0cnl7cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfWNhdGNoKGIpe3Rocm93IGQucmVwb3J0KGIpLGJ9fXJldHVybiBifSxkLnJlcG9ydD1mdW5jdGlvbigpe2Z1bmN0aW9uIGMoYSl7aSgpLG0ucHVzaChhKX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj1tLmxlbmd0aC0xO2I+PTA7LS1iKW1bYl09PT1hJiZtLnNwbGljZShiLDEpfWZ1bmN0aW9uIGcoYSxjKXt2YXIgZT1udWxsO2lmKCFjfHxkLmNvbGxlY3RXaW5kb3dFcnJvcnMpe2Zvcih2YXIgZyBpbiBtKWlmKGIobSxnKSl0cnl7bVtnXS5hcHBseShudWxsLFthXS5jb25jYXQoZi5jYWxsKGFyZ3VtZW50cywyKSkpfWNhdGNoKGgpe2U9aH1pZihlKXRocm93IGV9fWZ1bmN0aW9uIGgoYSxiLGMsZSxmKXt2YXIgaD1udWxsO2lmKGYpaD1kLmNvbXB1dGVTdGFja1RyYWNlKGYpO2Vsc2UgaWYobylkLmNvbXB1dGVTdGFja1RyYWNlLmF1Z21lbnRTdGFja1RyYWNlV2l0aEluaXRpYWxFbGVtZW50KG8sYixjLGEpLGg9byxvPW51bGwsbj1udWxsO2Vsc2V7dmFyIGk9e3VybDpiLGxpbmU6Yyxjb2x1bW46ZX07aS5mdW5jPWQuY29tcHV0ZVN0YWNrVHJhY2UuZ3Vlc3NGdW5jdGlvbk5hbWUoaS51cmwsaS5saW5lKSxpLmNvbnRleHQ9ZC5jb21wdXRlU3RhY2tUcmFjZS5nYXRoZXJDb250ZXh0KGkudXJsLGkubGluZSksaD17bW9kZTpcIm9uZXJyb3JcIixtZXNzYWdlOmEsdXJsOmRvY3VtZW50LmxvY2F0aW9uLmhyZWYsc3RhY2s6W2ldLHVzZXJhZ2VudDpuYXZpZ2F0b3IudXNlckFnZW50fX1yZXR1cm4gZyhoLFwiZnJvbSB3aW5kb3cub25lcnJvclwiKSxrP2suYXBwbHkodGhpcyxhcmd1bWVudHMpOiExfWZ1bmN0aW9uIGkoKXtsIT09ITAmJihrPWEub25lcnJvcixhLm9uZXJyb3I9aCxsPSEwKX1mdW5jdGlvbiBqKGIpe3ZhciBjPWYuY2FsbChhcmd1bWVudHMsMSk7aWYobyl7aWYobj09PWIpcmV0dXJuO3ZhciBlPW87bz1udWxsLG49bnVsbCxnLmFwcGx5KG51bGwsW2UsbnVsbF0uY29uY2F0KGMpKX12YXIgaD1kLmNvbXB1dGVTdGFja1RyYWNlKGIpO3Rocm93IG89aCxuPWIsYS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bj09PWImJihvPW51bGwsbj1udWxsLGcuYXBwbHkobnVsbCxbaCxudWxsXS5jb25jYXQoYykpKX0saC5pbmNvbXBsZXRlPzJlMzowKSxifXZhciBrLGwsbT1bXSxuPW51bGwsbz1udWxsO3JldHVybiBqLnN1YnNjcmliZT1jLGoudW5zdWJzY3JpYmU9ZSxqfSgpLGQuY29tcHV0ZVN0YWNrVHJhY2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGIpe2lmKCFkLnJlbW90ZUZldGNoaW5nKXJldHVyblwiXCI7dHJ5e3ZhciBjPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgYS5YTUxIdHRwUmVxdWVzdH1jYXRjaChiKXtyZXR1cm4gbmV3IGEuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfX0sZT1jKCk7cmV0dXJuIGUub3BlbihcIkdFVFwiLGIsITEpLGUuc2VuZChcIlwiKSxlLnJlc3BvbnNlVGV4dH1jYXRjaChmKXtyZXR1cm5cIlwifX1mdW5jdGlvbiBmKGEpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybltdO2lmKCFiKHcsYSkpe3ZhciBjPVwiXCIsZD1cIlwiO3RyeXtkPWRvY3VtZW50LmRvbWFpbn1jYXRjaChmKXt9LTEhPT1hLmluZGV4T2YoZCkmJihjPWUoYSkpLHdbYV09Yz9jLnNwbGl0KFwiXFxuXCIpOltdfXJldHVybiB3W2FdfWZ1bmN0aW9uIGgoYSxiKXt2YXIgZCxlPS9mdW5jdGlvbiAoW14oXSopXFwoKFteKV0qKVxcKS8saD0vWydcIl0/KFswLTlBLVphLXokX10rKVsnXCJdP1xccypbOj1dXFxzKihmdW5jdGlvbnxldmFsfG5ldyBGdW5jdGlvbikvLGk9XCJcIixqPTEwLGs9ZihhKTtpZighay5sZW5ndGgpcmV0dXJuIGc7Zm9yKHZhciBsPTA7aj5sOysrbClpZihpPWtbYi1sXStpLCFjKGkpKXtpZihkPWguZXhlYyhpKSlyZXR1cm4gZFsxXTtpZihkPWUuZXhlYyhpKSlyZXR1cm4gZFsxXX1yZXR1cm4gZ31mdW5jdGlvbiBpKGEsYil7dmFyIGU9ZihhKTtpZighZS5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIGc9W10saD1NYXRoLmZsb29yKGQubGluZXNPZkNvbnRleHQvMiksaT1oK2QubGluZXNPZkNvbnRleHQlMixqPU1hdGgubWF4KDAsYi1oLTEpLGs9TWF0aC5taW4oZS5sZW5ndGgsYitpLTEpO2ItPTE7Zm9yKHZhciBsPWo7az5sOysrbCljKGVbbF0pfHxnLnB1c2goZVtsXSk7cmV0dXJuIGcubGVuZ3RoPjA/ZzpudWxsfWZ1bmN0aW9uIGooYSl7cmV0dXJuIGEucmVwbGFjZSgvW1xcLVxcW1xcXXt9KCkqKz8uLFxcXFxcXF4kfCNdL2csXCJcXFxcJCZcIil9ZnVuY3Rpb24gayhhKXtyZXR1cm4gaihhKS5yZXBsYWNlKFwiPFwiLFwiKD86PHwmbHQ7KVwiKS5yZXBsYWNlKFwiPlwiLFwiKD86PnwmZ3Q7KVwiKS5yZXBsYWNlKFwiJlwiLFwiKD86JnwmYW1wOylcIikucmVwbGFjZSgnXCInLCcoPzpcInwmcXVvdDspJykucmVwbGFjZSgvXFxzKy9nLFwiXFxcXHMrXCIpfWZ1bmN0aW9uIGwoYSxiKXtmb3IodmFyIGMsZCxlPTAsZz1iLmxlbmd0aDtnPmU7KytlKWlmKChjPWYoYltlXSkpLmxlbmd0aCYmKGM9Yy5qb2luKFwiXFxuXCIpLGQ9YS5leGVjKGMpKSlyZXR1cm57dXJsOmJbZV0sbGluZTpjLnN1YnN0cmluZygwLGQuaW5kZXgpLnNwbGl0KFwiXFxuXCIpLmxlbmd0aCxjb2x1bW46ZC5pbmRleC1jLmxhc3RJbmRleE9mKFwiXFxuXCIsZC5pbmRleCktMX07cmV0dXJuIG51bGx9ZnVuY3Rpb24gbShhLGIsYyl7dmFyIGQsZT1mKGIpLGc9bmV3IFJlZ0V4cChcIlxcXFxiXCIraihhKStcIlxcXFxiXCIpO3JldHVybiBjLT0xLGUmJmUubGVuZ3RoPmMmJihkPWcuZXhlYyhlW2NdKSk/ZC5pbmRleDpudWxsfWZ1bmN0aW9uIG4oYil7Zm9yKHZhciBjLGQsZSxmLGc9W2EubG9jYXRpb24uaHJlZl0saD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSxpPVwiXCIrYixtPS9eZnVuY3Rpb24oPzpcXHMrKFtcXHckXSspKT9cXHMqXFwoKFtcXHdcXHMsXSopXFwpXFxzKlxce1xccyooXFxTW1xcc1xcU10qXFxTKVxccypcXH1cXHMqJC8sbj0vXmZ1bmN0aW9uIG9uKFtcXHckXSspXFxzKlxcKGV2ZW50XFwpXFxzKlxce1xccyooXFxTW1xcc1xcU10qXFxTKVxccypcXH1cXHMqJC8sbz0wO288aC5sZW5ndGg7KytvKXt2YXIgcD1oW29dO3Auc3JjJiZnLnB1c2gocC5zcmMpfWlmKGU9bS5leGVjKGkpKXt2YXIgcT1lWzFdP1wiXFxcXHMrXCIrZVsxXTpcIlwiLHI9ZVsyXS5zcGxpdChcIixcIikuam9pbihcIlxcXFxzKixcXFxccypcIik7Yz1qKGVbM10pLnJlcGxhY2UoLzskLyxcIjs/XCIpLGQ9bmV3IFJlZ0V4cChcImZ1bmN0aW9uXCIrcStcIlxcXFxzKlxcXFwoXFxcXHMqXCIrcitcIlxcXFxzKlxcXFwpXFxcXHMqe1xcXFxzKlwiK2MrXCJcXFxccyp9XCIpfWVsc2UgZD1uZXcgUmVnRXhwKGooaSkucmVwbGFjZSgvXFxzKy9nLFwiXFxcXHMrXCIpKTtpZihmPWwoZCxnKSlyZXR1cm4gZjtpZihlPW4uZXhlYyhpKSl7dmFyIHM9ZVsxXTtpZihjPWsoZVsyXSksZD1uZXcgUmVnRXhwKFwib25cIitzK1wiPVtcXFxcJ1xcXCJdXFxcXHMqXCIrYytcIlxcXFxzKltcXFxcJ1xcXCJdXCIsXCJpXCIpLGY9bChkLGdbMF0pKXJldHVybiBmO2lmKGQ9bmV3IFJlZ0V4cChjKSxmPWwoZCxnKSlyZXR1cm4gZn1yZXR1cm4gbnVsbH1mdW5jdGlvbiBvKGEpe2lmKCFhLnN0YWNrKXJldHVybiBudWxsO2Zvcih2YXIgYixkLGU9L15cXHMqYXQgKC4qPykgP1xcKD8oKD86ZmlsZXxodHRwcz98Y2hyb21lLWV4dGVuc2lvbik6Lio/KTooXFxkKykoPzo6KFxcZCspKT9cXCk/XFxzKiQvaSxmPS9eXFxzKiguKj8pKD86XFwoKC4qPylcXCkpP0A/KCg/OmZpbGV8aHR0cHM/fGNocm9tZSk6Lio/KTooXFxkKykoPzo6KFxcZCspKT9cXHMqJC9pLGo9L15cXHMqYXQgKD86KCg/OlxcW29iamVjdCBvYmplY3RcXF0pPy4rKSApP1xcKD8oKD86bXMtYXBweHxodHRwfGh0dHBzKTouKj8pOihcXGQrKSg/OjooXFxkKykpP1xcKT9cXHMqJC9pLGs9YS5zdGFjay5zcGxpdChcIlxcblwiKSxsPVtdLG49L14oLiopIGlzIHVuZGVmaW5lZCQvLmV4ZWMoYS5tZXNzYWdlKSxvPTAscD1rLmxlbmd0aDtwPm87KytvKXtpZihiPWYuZXhlYyhrW29dKSlkPXt1cmw6YlszXSxmdW5jOmJbMV18fGcsYXJnczpiWzJdP2JbMl0uc3BsaXQoXCIsXCIpOlwiXCIsbGluZTorYls0XSxjb2x1bW46Yls1XT8rYls1XTpudWxsfTtlbHNlIGlmKGI9ZS5leGVjKGtbb10pKWQ9e3VybDpiWzJdLGZ1bmM6YlsxXXx8ZyxsaW5lOitiWzNdLGNvbHVtbjpiWzRdPytiWzRdOm51bGx9O2Vsc2V7aWYoIShiPWouZXhlYyhrW29dKSkpY29udGludWU7ZD17dXJsOmJbMl0sZnVuYzpiWzFdfHxnLGxpbmU6K2JbM10sY29sdW1uOmJbNF0/K2JbNF06bnVsbH19IWQuZnVuYyYmZC5saW5lJiYoZC5mdW5jPWgoZC51cmwsZC5saW5lKSksZC5saW5lJiYoZC5jb250ZXh0PWkoZC51cmwsZC5saW5lKSksbC5wdXNoKGQpfXJldHVybiBsLmxlbmd0aD8obFswXSYmbFswXS5saW5lJiYhbFswXS5jb2x1bW4mJm4/bFswXS5jb2x1bW49bShuWzFdLGxbMF0udXJsLGxbMF0ubGluZSk6bFswXS5jb2x1bW58fGMoYS5jb2x1bW5OdW1iZXIpfHwobFswXS5jb2x1bW49YS5jb2x1bW5OdW1iZXIrMSkse21vZGU6XCJzdGFja1wiLG5hbWU6YS5uYW1lLG1lc3NhZ2U6YS5tZXNzYWdlLHVybDpkb2N1bWVudC5sb2NhdGlvbi5ocmVmLHN0YWNrOmwsdXNlcmFnZW50Om5hdmlnYXRvci51c2VyQWdlbnR9KTpudWxsfWZ1bmN0aW9uIHAoYSl7Zm9yKHZhciBiLGM9YS5zdGFja3RyYWNlLGQ9LyBsaW5lIChcXGQrKSwgY29sdW1uIChcXGQrKSBpbiAoPzo8YW5vbnltb3VzIGZ1bmN0aW9uOiAoW14+XSspPnwoW15cXCldKykpXFwoKC4qKVxcKSBpbiAoLiopOlxccyokL2ksZT1jLnNwbGl0KFwiXFxuXCIpLGY9W10sZz0wLGo9ZS5sZW5ndGg7aj5nO2crPTIpaWYoYj1kLmV4ZWMoZVtnXSkpe3ZhciBrPXtsaW5lOitiWzFdLGNvbHVtbjorYlsyXSxmdW5jOmJbM118fGJbNF0sYXJnczpiWzVdP2JbNV0uc3BsaXQoXCIsXCIpOltdLHVybDpiWzZdfTtpZighay5mdW5jJiZrLmxpbmUmJihrLmZ1bmM9aChrLnVybCxrLmxpbmUpKSxrLmxpbmUpdHJ5e2suY29udGV4dD1pKGsudXJsLGsubGluZSl9Y2F0Y2gobCl7fWsuY29udGV4dHx8KGsuY29udGV4dD1bZVtnKzFdXSksZi5wdXNoKGspfXJldHVybiBmLmxlbmd0aD97bW9kZTpcInN0YWNrdHJhY2VcIixuYW1lOmEubmFtZSxtZXNzYWdlOmEubWVzc2FnZSx1cmw6ZG9jdW1lbnQubG9jYXRpb24uaHJlZixzdGFjazpmLHVzZXJhZ2VudDpuYXZpZ2F0b3IudXNlckFnZW50fTpudWxsfWZ1bmN0aW9uIHEoYyl7dmFyIGQ9Yy5tZXNzYWdlLnNwbGl0KFwiXFxuXCIpO2lmKGQubGVuZ3RoPDQpcmV0dXJuIG51bGw7dmFyIGUsZyxqLG0sbj0vXlxccypMaW5lIChcXGQrKSBvZiBsaW5rZWQgc2NyaXB0ICgoPzpmaWxlfGh0dHBzPylcXFMrKSg/OjogaW4gZnVuY3Rpb24gKFxcUyspKT9cXHMqJC9pLG89L15cXHMqTGluZSAoXFxkKykgb2YgaW5saW5lIyhcXGQrKSBzY3JpcHQgaW4gKCg/OmZpbGV8aHR0cHM/KVxcUyspKD86OiBpbiBmdW5jdGlvbiAoXFxTKykpP1xccyokL2kscD0vXlxccypMaW5lIChcXGQrKSBvZiBmdW5jdGlvbiBzY3JpcHRcXHMqJC9pLHE9W10scj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSxzPVtdO2ZvcihnIGluIHIpYihyLGcpJiYhcltnXS5zcmMmJnMucHVzaChyW2ddKTtmb3IoZz0yLGo9ZC5sZW5ndGg7aj5nO2crPTIpe3ZhciB0PW51bGw7aWYoZT1uLmV4ZWMoZFtnXSkpdD17dXJsOmVbMl0sZnVuYzplWzNdLGxpbmU6K2VbMV19O2Vsc2UgaWYoZT1vLmV4ZWMoZFtnXSkpe3Q9e3VybDplWzNdLGZ1bmM6ZVs0XX07dmFyIHU9K2VbMV0sdj1zW2VbMl0tMV07aWYodiYmKG09Zih0LnVybCkpKXttPW0uam9pbihcIlxcblwiKTt2YXIgdz1tLmluZGV4T2Yodi5pbm5lclRleHQpO3c+PTAmJih0LmxpbmU9dSttLnN1YnN0cmluZygwLHcpLnNwbGl0KFwiXFxuXCIpLmxlbmd0aCl9fWVsc2UgaWYoZT1wLmV4ZWMoZFtnXSkpe3ZhciB4PWEubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiokLyxcIlwiKSx5PWVbMV0sej1uZXcgUmVnRXhwKGsoZFtnKzFdKSk7bT1sKHosW3hdKSx0PXt1cmw6eCxsaW5lOm0/bS5saW5lOnksZnVuYzpcIlwifX1pZih0KXt0LmZ1bmN8fCh0LmZ1bmM9aCh0LnVybCx0LmxpbmUpKTt2YXIgQT1pKHQudXJsLHQubGluZSksQj1BP0FbTWF0aC5mbG9vcihBLmxlbmd0aC8yKV06bnVsbDt0LmNvbnRleHQ9QSYmQi5yZXBsYWNlKC9eXFxzKi8sXCJcIik9PT1kW2crMV0ucmVwbGFjZSgvXlxccyovLFwiXCIpP0E6W2RbZysxXV0scS5wdXNoKHQpfX1yZXR1cm4gcS5sZW5ndGg/e21vZGU6XCJtdWx0aWxpbmVcIixuYW1lOmMubmFtZSxtZXNzYWdlOmRbMF0sdXJsOmRvY3VtZW50LmxvY2F0aW9uLmhyZWYsc3RhY2s6cSx1c2VyYWdlbnQ6bmF2aWdhdG9yLnVzZXJBZ2VudH06bnVsbH1mdW5jdGlvbiByKGEsYixjLGQpe3ZhciBlPXt1cmw6YixsaW5lOmN9O2lmKGUudXJsJiZlLmxpbmUpe2EuaW5jb21wbGV0ZT0hMSxlLmZ1bmN8fChlLmZ1bmM9aChlLnVybCxlLmxpbmUpKSxlLmNvbnRleHR8fChlLmNvbnRleHQ9aShlLnVybCxlLmxpbmUpKTt2YXIgZj0vICcoW14nXSspJyAvLmV4ZWMoZCk7aWYoZiYmKGUuY29sdW1uPW0oZlsxXSxlLnVybCxlLmxpbmUpKSxhLnN0YWNrLmxlbmd0aD4wJiZhLnN0YWNrWzBdLnVybD09PWUudXJsKXtpZihhLnN0YWNrWzBdLmxpbmU9PT1lLmxpbmUpcmV0dXJuITE7aWYoIWEuc3RhY2tbMF0ubGluZSYmYS5zdGFja1swXS5mdW5jPT09ZS5mdW5jKXJldHVybiBhLnN0YWNrWzBdLmxpbmU9ZS5saW5lLGEuc3RhY2tbMF0uY29udGV4dD1lLmNvbnRleHQsITF9cmV0dXJuIGEuc3RhY2sudW5zaGlmdChlKSxhLnBhcnRpYWw9ITAsITB9cmV0dXJuIGEuaW5jb21wbGV0ZT0hMCwhMX1mdW5jdGlvbiBzKGEsYil7Zm9yKHZhciBjLGUsZixpPS9mdW5jdGlvblxccysoW18kYS16QS1aXFx4QTAtXFx1RkZGRl1bXyRhLXpBLVowLTlcXHhBMC1cXHVGRkZGXSopP1xccypcXCgvaSxqPVtdLGs9e30sbD0hMSxvPXMuY2FsbGVyO28mJiFsO289by5jYWxsZXIpaWYobyE9PXQmJm8hPT1kLnJlcG9ydCl7aWYoZT17dXJsOm51bGwsZnVuYzpnLGxpbmU6bnVsbCxjb2x1bW46bnVsbH0sby5uYW1lP2UuZnVuYz1vLm5hbWU6KGM9aS5leGVjKG8udG9TdHJpbmcoKSkpJiYoZS5mdW5jPWNbMV0pLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBlLmZ1bmMpdHJ5e2UuZnVuYz1jLmlucHV0LnN1YnN0cmluZygwLGMuaW5wdXQuaW5kZXhPZihcIntcIikpfWNhdGNoKHApe31pZihmPW4obykpe2UudXJsPWYudXJsLGUubGluZT1mLmxpbmUsZS5mdW5jPT09ZyYmKGUuZnVuYz1oKGUudXJsLGUubGluZSkpO3ZhciBxPS8gJyhbXiddKyknIC8uZXhlYyhhLm1lc3NhZ2V8fGEuZGVzY3JpcHRpb24pO3EmJihlLmNvbHVtbj1tKHFbMV0sZi51cmwsZi5saW5lKSl9a1tcIlwiK29dP2w9ITA6a1tcIlwiK29dPSEwLGoucHVzaChlKX1iJiZqLnNwbGljZSgwLGIpO3ZhciB1PXttb2RlOlwiY2FsbGVyc1wiLG5hbWU6YS5uYW1lLG1lc3NhZ2U6YS5tZXNzYWdlLHVybDpkb2N1bWVudC5sb2NhdGlvbi5ocmVmLHN0YWNrOmosdXNlcmFnZW50Om5hdmlnYXRvci51c2VyQWdlbnR9O3JldHVybiByKHUsYS5zb3VyY2VVUkx8fGEuZmlsZU5hbWUsYS5saW5lfHxhLmxpbmVOdW1iZXIsYS5tZXNzYWdlfHxhLmRlc2NyaXB0aW9uKSx1fWZ1bmN0aW9uIHQoYSxiKXt2YXIgYz1udWxsO2I9bnVsbD09Yj8wOitiO3RyeXtpZihjPXAoYSkpcmV0dXJuIGN9Y2F0Y2goZCl7aWYodil0aHJvdyBkfXRyeXtpZihjPW8oYSkpcmV0dXJuIGN9Y2F0Y2goZCl7aWYodil0aHJvdyBkfXRyeXtpZihjPXEoYSkpcmV0dXJuIGN9Y2F0Y2goZCl7aWYodil0aHJvdyBkfXRyeXtpZihjPXMoYSxiKzEpKXJldHVybiBjfWNhdGNoKGQpe2lmKHYpdGhyb3cgZH1yZXR1cm57bW9kZTpcImZhaWxlZFwifX1mdW5jdGlvbiB1KGEpe2E9KG51bGw9PWE/MDorYSkrMTt0cnl7dGhyb3cgbmV3IEVycm9yfWNhdGNoKGIpe3JldHVybiB0KGIsYSsxKX19dmFyIHY9ITEsdz17fTtyZXR1cm4gdC5hdWdtZW50U3RhY2tUcmFjZVdpdGhJbml0aWFsRWxlbWVudD1yLHQuZ3Vlc3NGdW5jdGlvbk5hbWU9aCx0LmdhdGhlckNvbnRleHQ9aSx0Lm9mQ2FsbGVyPXUsdC5nZXRTb3VyY2U9Zix0fSgpLGQuZXh0ZW5kVG9Bc3luY2hyb25vdXNDYWxsYmFja3M9ZnVuY3Rpb24oKXt2YXIgYj1mdW5jdGlvbihiKXt2YXIgYz1hW2JdO2FbYl09ZnVuY3Rpb24oKXt2YXIgYT1mLmNhbGwoYXJndW1lbnRzKSxiPWFbMF07cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgYiYmKGFbMF09ZC53cmFwKGIpKSxjLmFwcGx5P2MuYXBwbHkodGhpcyxhKTpjKGFbMF0sYVsxXSl9fTtiKFwic2V0VGltZW91dFwiKSxiKFwic2V0SW50ZXJ2YWxcIil9LGQucmVtb3RlRmV0Y2hpbmd8fChkLnJlbW90ZUZldGNoaW5nPSEwKSxkLmNvbGxlY3RXaW5kb3dFcnJvcnN8fChkLmNvbGxlY3RXaW5kb3dFcnJvcnM9ITApLCghZC5saW5lc09mQ29udGV4dHx8ZC5saW5lc09mQ29udGV4dDwxKSYmKGQubGluZXNPZkNvbnRleHQ9MTEpLGEuVHJhY2VLaXQ9ZH19KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Omdsb2JhbCksZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtpZihhKXt2YXIgYz1hLmV2ZW50LmFkZDthLmV2ZW50LmFkZD1mdW5jdGlvbihkLGUsZixnLGgpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGYmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGYuaGFuZGxlcilyZXR1cm4gYy5jYWxsKHRoaXMsZCxlLGYsZyxoKTt2YXIgaTtyZXR1cm4gZi5oYW5kbGVyPyhpPWYuaGFuZGxlcixmLmhhbmRsZXI9Yi53cmFwKGYuaGFuZGxlcikpOihpPWYsZj1iLndyYXAoZikpLGYuZ3VpZD1pLmd1aWQ/aS5ndWlkOmkuZ3VpZD1hLmd1aWQrKyxjLmNhbGwodGhpcyxkLGUsZixnLGgpfTt2YXIgZD1hLmZuLnJlYWR5O2EuZm4ucmVhZHk9ZnVuY3Rpb24oYSl7cmV0dXJuIGQuY2FsbCh0aGlzLGIud3JhcChhKSl9O3ZhciBlPWEuYWpheDthLmFqYXg9ZnVuY3Rpb24oYyxkKXtcIm9iamVjdFwiPT10eXBlb2YgYyYmKGQ9YyxjPXZvaWQgMCksZD1kfHx7fTtmb3IodmFyIGYsZz1bXCJjb21wbGV0ZVwiLFwiZXJyb3JcIixcInN1Y2Nlc3NcIl07Zj1nLnBvcCgpOylhLmlzRnVuY3Rpb24oZFtmXSkmJihkW2ZdPWIud3JhcChkW2ZdKSk7dHJ5e3JldHVybiBjP2UuY2FsbCh0aGlzLGMsZCk6ZS5jYWxsKHRoaXMsZCl9Y2F0Y2goaCl7dGhyb3cgYi5yZXBvcnQoaCksaH19fX0od2luZG93LmpRdWVyeSx3aW5kb3cuVHJhY2VLaXQpLGZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9YSxjPWEuc3BsaXQoXCIvL1wiKVsxXTtpZihjKXt2YXIgZD1jLmluZGV4T2YoXCI/XCIpLGU9Yy50b1N0cmluZygpLnN1YnN0cmluZygwLGQpLGY9ZS5zcGxpdChcIi9cIikuc2xpY2UoMCw0KS5qb2luKFwiL1wiKSxnPWUuc3Vic3RyaW5nKDAsNDgpO2I9Zi5sZW5ndGg8Zy5sZW5ndGg/ZjpnLGIhPT1lJiYoYis9XCIuLlwiKX1yZXR1cm4gYn1mdW5jdGlvbiBmKGEsYixjLGYpe2lmKEsmJihMfHxiLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl7dmFyIGc9XCJBSkFYIEVycm9yOiBcIisoYi5zdGF0dXNUZXh0fHxcInVua25vd25cIikrXCIgXCIrKGMudHlwZXx8XCJ1bmtub3duXCIpK1wiIFwiKyhlKGMudXJsKXx8XCJ1bmtub3duXCIpO1Yuc2VuZChmfHxhLnR5cGUse3N0YXR1czpiLnN0YXR1cyxzdGF0dXNUZXh0OmIuc3RhdHVzVGV4dCx0eXBlOmMudHlwZSx1cmw6Yy51cmwsYWpheEVycm9yTWVzc2FnZTpnLGNvbnRlbnRUeXBlOmMuY29udGVudFR5cGUscmVxdWVzdERhdGE6Yy5kYXRhJiZjLmRhdGEuc2xpY2U/Yy5kYXRhLnNsaWNlKDAsMTAyNDApOmQscmVzcG9uc2VEYXRhOmIucmVzcG9uc2VUZXh0JiZiLnJlc3BvbnNlVGV4dC5zbGljZT9iLnJlc3BvbnNlVGV4dC5zbGljZSgwLDEwMjQwKTpkLGFjdGl2ZVRhcmdldDphLnRhcmdldCYmYS50YXJnZXQuYWN0aXZlRWxlbWVudD9hLnRhcmdldC5hY3RpdmVFbGVtZW50Lm91dGVySFRNTDpkfSl9fWZ1bmN0aW9uIGcoKXtyZXR1cm4gbyYmXCJcIiE9PW8/ITA6KFIubG9nKFwiQXRhdHVzIEFQSSBrZXkgaGFzIG5vdCBiZWVuIGNvbmZpZ3VyZWQsIG1ha2Ugc3VyZSB5b3UgY2FsbCBhdGF0dXMuY29uZmlnKHlvdXJBcGlLZXkpXCIpLCExKX1mdW5jdGlvbiBoKCl7dmFyIGM9Yi5kb2N1bWVudEVsZW1lbnQsZD1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSxlPWEuaW5uZXJXaWR0aHx8Yy5jbGllbnRXaWR0aHx8ZC5jbGllbnRXaWR0aCxmPWEuaW5uZXJIZWlnaHR8fGMuY2xpZW50SGVpZ2h0fHxkLmNsaWVudEhlaWdodDtyZXR1cm57d2lkdGg6ZSxoZWlnaHQ6Zn19ZnVuY3Rpb24gaShhKXt2YXIgYj0obmV3IERhdGUpLnRvSlNPTigpO3RyeXt2YXIgYz1cImF0YXR1c2pzPVwiK2IrXCI9XCIrUi5nZXRSYW5kb21JbnQoKTtcInVuZGVmaW5lZFwiPT10eXBlb2YgbG9jYWxTdG9yYWdlW2NdJiYobG9jYWxTdG9yYWdlW2NdPWEpfWNhdGNoKGQpe1IubG9nKFwiQXRhdHVzOiBMb2NhbFN0b3JhZ2UgZnVsbCwgY2Fubm90IHNhdmUgZXhjZXB0aW9uXCIpfX1mdW5jdGlvbiBqKCl7dHJ5e3JldHVyblwibG9jYWxTdG9yYWdlXCJpbiBhJiZudWxsIT09YS5sb2NhbFN0b3JhZ2V9Y2F0Y2goYil7cmV0dXJuITF9fWZ1bmN0aW9uIGsoKXtpZihqKCkmJmxvY2FsU3RvcmFnZS5sZW5ndGg+MClmb3IodmFyIGEgaW4gbG9jYWxTdG9yYWdlKWlmKFwiYXRhdHVzanM9XCI9PT1hLnN1YnN0cmluZygwLDkpKXt0cnl7dmFyIGI9SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbYV0pO1wiYXBpa2V5XCJpbiBiJiZtKE4sYil9Y2F0Y2goYyl7Ui5sb2coXCJBdGF0dXM6IEludmFsaWQgSlNPTiBvYmplY3QgaW4gTG9jYWxTdG9yYWdlXCIpfWxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGEpfX1mdW5jdGlvbiBsKGEsYyl7aWYoYz1jfHx7fSwhYS5zdGFja3x8IWEuc3RhY2subGVuZ3RoKXJldHVybiB2b2lkIFIubG9nKFwiQXRhdHVzOiBDYW5jZWxpbmcgc2VuZCBkdWUgdG8gbm8gc3RhY2t0cmFjZS5cIik7Ui5pc0VtcHR5KGMuY3VzdG9tRGF0YSkmJihjLmN1c3RvbURhdGE9XCJmdW5jdGlvblwiPT10eXBlb2YgcD9wKCk6cCksUi5pc0VtcHR5KGMudGFncykmJihjLnRhZ3M9RSk7dmFyIGQ9Yy5jdXN0b21EYXRhJiZjLmN1c3RvbURhdGEuYWpheEVycm9yTWVzc2FnZXx8YS5tZXNzYWdlO2lmKGQmJjA9PT1kLmluZGV4T2YoXCJVbmNhdWdodCBcIikmJihkPWEubWVzc2FnZS5zdWJzdHJpbmcoOSkpLGQ9ZHx8Yy5zdGF0dXN8fFwiU2NyaXB0IGVycm9yLlwiLHcmJncudGVzdChkKSlyZXR1cm4gdm9pZCBSLmxvZyhcIkF0YXR1czogY2FuY2VsaW5nIHNlbmQgZHVlIHRvIGlnbm9yZSBlcnJvcnNcIik7dmFyIGU9W107YS5zdGFjayYmYS5zdGFjay5sZW5ndGgmJlIuZm9yRWFjaChhLnN0YWNrLGZ1bmN0aW9uKGEsYil7Ui5lbmRzV2l0aChiLnVybCxcIi9hdGF0dXMuanNcIil8fGUucHVzaCh7bG46Yi5saW5lfHwwLGNuOmIuY29sdW1ufHwwLGY6Yi51cmx8fFwiYW5vbnltb3VzXCIsbTpiLmZ1bmN8fFwiW2Fub255bW91c11cIn0pfSk7dmFyIGY9W2EubmFtZSxkLEpTT04uc3RyaW5naWZ5KGUpXS5qb2luKFwifFwiKTtpZihmPT09eClyZXR1cm4gdm9pZCBSLmxvZyhcIkF0YXR1czogY2FuY2VsaW5nIHNlbmQgZHVlIHRvIGR1cGxpY2F0ZSBlcnJvcnNcIik7eD1mO3ZhciBnPWMuY3VzdG9tRGF0YTt0cnl7SlNPTi5zdHJpbmdpZnkoZyl9Y2F0Y2goaCl7dmFyIGk9XCJDYW5ub3QgYWRkIGN1c3RvbSBkYXRhOyBtYXkgY29udGFpbiBjaXJjdWxhciByZWZlcmVuY2VcIjtnPXtlcnJvcjppfSxSLmxvZyhcIkF0YXR1czogXCIraSl9dmFyIGo9VS5nZXRBbGxFdmVudHMoKTtTLmNsZWFyKCk7dmFyIGs9e1wiY2xhc3NcIjphLm5hbWUsbmFtZTpkLGJhY2tUcmFjZXM6ZSx1c2VyQWN0aW9uczpqLG5ldDpudWxsLGN1c3RvbURhdGE6Z3x8bnVsbCx0YWdzOmMudGFncyxzb3VyY2VtYXA6SixyZXF1ZXN0Ont1cmw6Yi5sb2NhdGlvbi5ocmVmLHVhOm5hdmlnYXRvci51c2VyQWdlbnR9fTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB5JiYoay5ncm91cGluZ0tleT15KGspKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB6KXt2YXIgbD16KGspO2wmJm0oTixrKX1lbHNlIG0oTixrKX1mdW5jdGlvbiBtKGMsZCl7aWYoRyYmRy5sZW5ndGgmJi0xPT09Ry5pbmRleE9mKGxvY2F0aW9uLmhvc3QpKXJldHVybiB2b2lkIFIubG9nKFwiQXRhdHVzOiBjYW5jZWxpbmcgc2VuZCBkdWUgdG8gbm90IGEgYWxsb3dlZCBkb21haW5cIik7aWYoZygpKXtpZighZC50cyl7dmFyIGU9YS5zY3JlZW58fGgoKTtkLnRzPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGQuYXBpa2V5PW8sZC5yZXF1ZXN0PWQucmVxdWVzdHx8e30sZC5yZXF1ZXN0LnVybD1kLnJlcXVlc3QudXJsfHxiLmxvY2F0aW9uLmhyZWYsZC5yZXF1ZXN0LnVhPWQucmVxdWVzdC51YXx8bmF2aWdhdG9yLnVzZXJBZ2VudCxkLnJlcXVlc3Qudz1lLndpZHRoLGQucmVxdWVzdC5oPWUuaGVpZ2h0LGQudj1yfHxcIlwiLGQuX3Y9Qnx8XCJcIn1xJiYoZC5jaWQ9cS51c2VySWR8fG51bGwpLFIubG9nKFwiU2VuZGluZyBkYXRhIHRvIEF0YXR1cyBSZWNlaXZlcjpcIixkKSxuKGMsSlNPTi5zdHJpbmdpZnkoZCkpfX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9bmV3IEltYWdlLGQ9TSthK1wiP2RhdGE9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpO2MuY3Jvc3NPcmlnaW49XCJhbm9ueW1vdXNcIixjLm9ubG9hZD1mdW5jdGlvbigpe2soKX0sYy5vbmVycm9yPWMub25hYm9ydD1mdW5jdGlvbigpe0kmJmE9PT1OJiZpKGIpfSxjLnNyYz1kfXZhciBvLHAscSxyLHMsdCx1LHYsdyx4LHkseixBLEI9XCIyLjMuMTJcIixDPVRyYWNlS2l0Lm5vQ29uZmxpY3QoKSxEPWEuYXRhdHVzLEU9W10sRj0hMSxHPVtdLEg9ITEsST0hMSxKPSExLEs9ITEsTD0hMSxNPVwiaHR0cHM6Ly9ici1yeC5hdGF0dXMuY29tXCIsTj1cIi90cmFjay9icm93c2VyL2Vycm9yc1wiLE89XCIvdHJhY2svYnJvd3Nlci9wZXJmXCIsUD1cIi90cmFjay9icm93c2VyL3BlcmYvYWpheFwiLFE9XCIvdHJhY2svYnJvd3Nlci9wZXJmL3R4blwiO2MmJihBPWMoYikpO3ZhciBSPXtpc0Jvb2xlYW46ZnVuY3Rpb24oYSl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEmJlwiYm9vbGVhblwiPT10eXBlb2YgYX0saXNTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGF9LGlzQXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfSxlbmRzV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiBhJiZiPy0xIT09YS5pbmRleE9mKGIsYS5sZW5ndGgtYi5sZW5ndGgpOiExfSxqb2luUmVnRXhwOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPVtdLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYj1hW2RdLFIuaXNTdHJpbmcoYik/Yy5wdXNoKGIucmVwbGFjZSgvKFsuKis/XFxePSE6JHt9KCl8XFxbXFxdXFwvXFxcXF0pL2csXCJcXFxcJDFcIikpOmImJmIuc291cmNlJiZjLnB1c2goYi5zb3VyY2UpO3JldHVybiBuZXcgUmVnRXhwKGMuam9pbihcInxcIiksXCJpXCIpfSxnZXRUYXJnZXRVcmw6ZnVuY3Rpb24oYil7cmV0dXJuIGEuWERvbWFpblJlcXVlc3QmJkgmJihiPWIuc2xpY2UoNikpLGJ9LG5vdzpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfSxwYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9U3RyaW5nKGEpLDE9PT1hLmxlbmd0aCYmKGE9XCIwXCIrYSksYX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPXt9O2ZvcihjIGluIGEpZFtjXT1hW2NdO2ZvcihjIGluIGIpZFtjXT1iW2NdO3JldHVybiBkfSxtZXJnZUFycmF5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGwhPWI/YS5jb25jYXQoYik6YX0sZm9yRWFjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWIuY2FsbChudWxsLGMsYVtjXSl9LGlzRW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShiKSlyZXR1cm4hMTtyZXR1cm4hMH0sZ2V0UmFuZG9tSW50OmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguZmxvb3IoOTAwNzE5OTI1NDc0MDk5MipNYXRoLnJhbmRvbSgpKX0sbG9nOmZ1bmN0aW9uKGIsYyl7RiYmYS5jb25zb2xlJiZhLmNvbnNvbGUubG9nJiYoYS5jb25zb2xlLmxvZyhiKSxjJiZhLmNvbnNvbGUubG9nKGMpKX0sYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9fSxjYW5BbGxvd0luc2VjdXJlU3VibWlzc2lvbnM6ZnVuY3Rpb24oKXt2YXIgYj1hLm5hdmlnYXRvci51c2VyQWdlbnQsYz1iLm1hdGNoKC9UcmlkZW50XFwvKFtcXGQuXSspLyksZD1jJiZcIjcuMFwiPT09Y1sxXT8xMTooYj1iLm1hdGNoKC9NU0lFIChbXFxkLl0rKS8pKT9wYXJzZUludChiWzFdLDEwKTohMTtyZXR1cm4gZCYmOT49ZH0sdXVpZDQ6ZnVuY3Rpb24oKXtyZXR1cm5cInh4eHh4eHh4eHh4eDR4eHh5eHh4eHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLGZ1bmN0aW9uKGEpe3ZhciBiPTE2Kk1hdGgucmFuZG9tKCl8MCxjPVwieFwiPT09YT9iOjMmYnw4O3JldHVybiBjLnRvU3RyaW5nKDE2KX0pfSxhZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGIsYyxkKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5hdHRhY2hFdmVudD9hLmF0dGFjaEV2ZW50KFwib25cIitiLGMpOmEuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoYixjLGQpOnZvaWQgMH0sYXJyYXlGcm9tT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJmIucHVzaChhW2NdKTtyZXR1cm4gYn19LFM9e2V2ZW50T2JqZWN0Ont9LGFsbDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5nZXRFdmVudE9iamVjdChhKSxjPVtdLGQ9MDtkPGIubGVuZ3RoO2QrKyljLnB1c2goYltkXS52YWx1ZSk7cmV0dXJuIGN9LGNsZWFyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMuZXZlbnRPYmplY3QpdGhpcy5ldmVudE9iamVjdC5oYXNPd25Qcm9wZXJ0eShhKSYmKHRoaXMuZXZlbnRPYmplY3RbYV0ubGVuZ3RoPTApfSxhZGQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEV2ZW50T2JqZWN0KGEpLGQ9Ui51dWlkNCgpO3JldHVybiBjLnB1c2goe2tleTpkLHZhbHVlOmJ9KSx0aGlzLnRydW5jYXRlRXZlbnRPYmplY3QoYSwxMCksZH0sZ2V0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuZ2V0RXZlbnRPYmplY3QoYSksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKGNbZF0ua2V5PT09YilyZXR1cm4gY1tkXS52YWx1ZTtyZXR1cm4hMX0sZ2V0RXZlbnRPYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZXZlbnRPYmplY3RbYV18fCh0aGlzLmV2ZW50T2JqZWN0W2FdPVtdKSx0aGlzLmV2ZW50T2JqZWN0W2FdfSx0cnVuY2F0ZUV2ZW50T2JqZWN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRFdmVudE9iamVjdChhKTtjLmxlbmd0aD5iJiYodGhpcy5ldmVudE9iamVjdFthXT1jLnNsaWNlKGMubGVuZ3RoLWIpKX19LFQ9e2F0dGFjaDpmdW5jdGlvbihiLGMsZCxlLGYpe2I9Ynx8YS5jb25zb2xlfHx7fTtmb3IodmFyIGc9Znx8W1wibG9nXCIsXCJkZWJ1Z1wiLFwiaW5mb1wiLFwid2FyblwiLFwiZXJyb3JcIl0saD1nLnBvcCgpLGk9ZnVuY3Rpb24oYSxiLGQpe2MmJlMuYWRkKFwidXNlclwiLHt0czpSLm5vdygpLGM6XCJjb25zb2xlXCIsbDphLG06Yn0pLFwiZXJyb3JcIj09PWEmJmUmJlYubm90aWZ5KG5ldyBFcnJvcihiKSxkKX07aDspdGhpcy53cmFwQ29uc29sZU1ldGhvZChiLGgsZCxpKSxoPWcucG9wKCl9LHdyYXBDb25zb2xlTWV0aG9kOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWFbYl0sZj1hO2IgaW4gYSYmKGFbYl09ZnVuY3Rpb24oKXt2YXIgYT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cyksZz1cIlwiK2Euam9pbihcIiBcIiksaD17bGV2ZWw6Yixsb2dnZXI6XCJjb25zb2xlXCJ9O2QmJmQoYixnLGgpLGUmJmMmJkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGUsZixhKX0pfX0sVT17YXR0YWNoOmZ1bmN0aW9uKCl7dmFyIGE9Ui5iaW5kKHRoaXMub25Eb2N1bWVudENsaWNrZWQsdGhpcyksYz1SLmJpbmQodGhpcy5vbklucHV0Q2hhbmdlZCx0aGlzKTtiLmFkZEV2ZW50TGlzdGVuZXI/KGIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsYSwhMCksYi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLGMsITApKTpiLmF0dGFjaEV2ZW50JiYoYi5hdHRhY2hFdmVudChcIm9uY2xpY2tcIixhKSxiLmF0dGFjaEV2ZW50KFwib25mb2N1c291dFwiLGMpKX0sd3JpdGVVc2VyRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7XCJwYXNzd29yZFwiPT09dGhpcy5nZXRFbGVtZW50VHlwZShhKSYmKGM9dm9pZCAwKSxTLmFkZChcInVzZXJcIix7dHM6Ui5ub3coKSxhOmIsZTp0aGlzLmdldE91dGVySFRNTChhKSx2OnRoaXMuZ2V0VmFsdWVLaW5kKGMsZCl9KX0sb25Eb2N1bWVudENsaWNrZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRFbGVtZW50RnJvbUV2ZW50KGEpO2ImJmIudGFnTmFtZSYmKHRoaXMuaXNUYXJnZXQoYixcImFcIil8fHRoaXMuaXNUYXJnZXQoYixcImJ1dHRvblwiKXx8dGhpcy5pc1RhcmdldChiLFwiaW5wdXRcIixbXCJidXR0b25cIixcInN1Ym1pdFwiXSk/dGhpcy53cml0ZVVzZXJFdmVudChiLFwiY2xpY2tcIik6dGhpcy5pc1RhcmdldChiLFwiaW5wdXRcIixbXCJjaGVja2JveFwiLFwicmFkaW9cIl0pJiZ0aGlzLndyaXRlVXNlckV2ZW50KGIsXCJjaGVja1wiLGIudmFsdWUsYi5jaGVja2VkKSl9LG9uSW5wdXRDaGFuZ2VkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0RWxlbWVudEZyb21FdmVudChhKTtiJiZiLnRhZ05hbWUmJih0aGlzLmlzVGFyZ2V0KGIsXCJ0ZXh0YXJlYVwiKT90aGlzLndyaXRlVXNlckV2ZW50KGIsXCJpbnB1dFwiLGIudmFsdWUpOnRoaXMuaXNUYXJnZXQoYixcInNlbGVjdFwiKSYmYi5vcHRpb25zJiZiLm9wdGlvbnMubGVuZ3RoP3RoaXMub25TZWxlY3RJbnB1dENoYW5nZWQoYik6dGhpcy5pc1RhcmdldChiLFwiaW5wdXRcIikmJiF0aGlzLmlzVGFyZ2V0KGIsXCJpbnB1dFwiLFtcImJ1dHRvblwiLFwic3VibWl0XCIsXCJoaWRkZW5cIixcImNoZWNrYm94XCIsXCJyYWRpb1wiXSkmJnRoaXMud3JpdGVVc2VyRXZlbnQoYixcImlucHV0XCIsYi52YWx1ZSkpfSxvblNlbGVjdElucHV0Q2hhbmdlZDpmdW5jdGlvbihhKXtpZihhLm11bHRpcGxlKXtmb3IodmFyIGI9MDtiPGEub3B0aW9ucy5sZW5ndGg7YisrKWlmKGEub3B0aW9uc1tiXS5zZWxlY3RlZCl7dGhpcy53cml0ZVVzZXJFdmVudChhLFwic2VsZWN0XCIsYS5vcHRpb25zW2JdLnZhbHVlKTticmVha319ZWxzZSAwPD1hLnNlbGVjdGVkSW5kZXgmJmEub3B0aW9uc1thLnNlbGVjdGVkSW5kZXhdJiZ0aGlzLndyaXRlVXNlckV2ZW50KGEsXCJzZWxlY3RcIixhLm9wdGlvbnNbYS5zZWxlY3RlZEluZGV4XS52YWx1ZSl9LGdldEVsZW1lbnRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudGFyZ2V0fHxiLmVsZW1lbnRGcm9tUG9pbnQoYS5jbGllbnRYLGEuY2xpZW50WSl9LGlzVGFyZ2V0OmZ1bmN0aW9uKGEsYixjKXtpZihhLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9PWIudG9Mb3dlckNhc2UoKSlyZXR1cm4hMTtpZighYylyZXR1cm4hMDtmb3IodmFyIGQ9dGhpcy5nZXRFbGVtZW50VHlwZShhKSxlPTA7ZTxjLmxlbmd0aDtlKyspaWYoY1tlXT09PWQpcmV0dXJuITA7cmV0dXJuITF9LGdldEVsZW1lbnRUeXBlOmZ1bmN0aW9uKGEpe3JldHVybihhLmdldEF0dHJpYnV0ZShcInR5cGVcIil8fFwiXCIpLnRvTG93ZXJDYXNlKCl9LGdldE91dGVySFRNTDpmdW5jdGlvbihhKXtmb3IodmFyIGI9XCI8XCIrYS50YWdOYW1lLnRvTG93ZXJDYXNlKCksYz1hLmF0dHJpYnV0ZXMsZD0wLGU9Yy5sZW5ndGg7ZT5kO2QrKyl7dmFyIGY9Y1tkXS5uYW1lO1widmFsdWVcIiE9PWYudG9Mb3dlckNhc2UoKSYmKGIrPVwiIFwiK2YrJz1cIicrY1tkXS52YWx1ZSsnXCInKX1yZXR1cm4gYis9XCIgPlwifSxnZXRWYWx1ZUtpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YT9udWxsOntsZW5ndGg6YS5sZW5ndGgsY2hlY2tlZDpiLHBhdHRlcm46dGhpcy5tYXRjaElucHV0UGF0dGVybihhKX19LG1hdGNoSW5wdXRQYXR0ZXJuOmZ1bmN0aW9uKGEpe3JldHVyblwiXCI9PT1hP1wiZW1wdHlcIjovXlthLXowLTkhIyQlJicqKz0/XFxeX2B7fH1+XFwtXSsoPzpcXC5bYS16MC05ISMkJSYnKis9P1xcXl9ge3x9flxcLV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05XFwtXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTlcXC1dKlthLXowLTldKT8kLy50ZXN0KGEpP1wiZW1haWxcIjovXigwP1sxLTldfFsxMl1bMC05XXwzWzAxXSlbXFwvXFwtXSgwP1sxLTldfDFbMDEyXSlbXFwvXFwtXVxcZHs0fSQvLnRlc3QoYSl8fC9eKFxcZHs0fVtcXC9cXC1dKDA/WzEtOV18MVswMTJdKVtcXC9cXC1dMD9bMS05XXxbMTJdWzAtOV18M1swMV0pJC8udGVzdChhKT9cImRhdGVcIjovXig/Oig/OlxcKz8xXFxzKig/OlsuXFwtXVxccyopPyk/KD86XFwoXFxzKihbMi05XTFbMDItOV18WzItOV1bMDItOF0xfFsyLTldWzAyLThdWzAyLTldKVxccypcXCl8KFsyLTldMVswMi05XXxbMi05XVswMi04XTF8WzItOV1bMDItOF1bMDItOV0pKVxccyooPzpbLlxcLV1cXHMqKT8pPyhbMi05XTFbMDItOV18WzItOV1bMDItOV0xfFsyLTldWzAyLTldezJ9KVxccyooPzpbLlxcLV1cXHMqKT8oWzAtOV17NH0pKD86XFxzKig/OiN8eFxcLj98ZXh0XFwuP3xleHRlbnNpb24pXFxzKihcXGQrKSk/JC8udGVzdChhKT9cInBob25lXCI6L15cXHMqJC8udGVzdChhKT9cIndoaXRlc3BhY2VcIjovXlxcZCokLy50ZXN0KGEpP1wibnVtZXJpY1wiOlwiY2hhcmFjdGVyXCJ9LGdldEFsbEV2ZW50czpmdW5jdGlvbigpe3JldHVybiBTLmFsbChcInVzZXJcIil9fSxWPXtub0NvbmZsaWN0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuYXRhdHVzPUQsVn0saXNDb25maWd1cmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFvfSxjb25maWc6ZnVuY3Rpb24oYixjKXtyZXR1cm4gYz1jfHx7fSxvPWIsQy5yZW1vdGVGZXRjaGluZz0hMSx3PVtdLGMmJihwPWMuY3VzdG9tRGF0YSxFPWMudGFnc3x8W10sSj0hKCFjLmVuYWJsZVNvdXJjZW1hcCYmIWMuc291cmNlbWFwKSxzPSEhYy5kaXNhYmxlVXNlckFjdGlvbnMsdD0hIWMuZGlzYWJsZUFqYXhNb25pdG9yaW5nLHU9ISFjLmRpc2FibGVSVU0sRj0hIWMuZGVidWdNb2RlLGMuaWdub3JlRXJyb3JzJiZSLmlzQXJyYXkoYy5pZ25vcmVFcnJvcnMpJiYodz1jLmlnbm9yZUVycm9ycyksVi5zZXRBbGxvd2VkRG9tYWlucyhjLmFsbG93ZWREb21haW5zKSxWLnNldFZlcnNpb24oYy52ZXJzaW9uKSxWLmVuYWJsZU9mZmxpbmUoYy5lbmFibGVPZmZsaW5lfHxjLm9mZmxpbmUpLFYub25CZWZvcmVFcnJvclNlbmQoYy5iZWZvcmVFcnJvclNlbmQpLFYuc2V0R3JvdXBpbmdLZXlDYWxsYmFjayhjLmdyb3VwaW5nS2V5Q2FsbGJhY2spKSxIPVIuY2FuQWxsb3dJbnNlY3VyZVN1Ym1pc3Npb25zKCksdy5wdXNoKC9eU2NyaXB0IGVycm9yXFwuPyQvKSx3LnB1c2goL15KYXZhc2NyaXB0IGVycm9yOiBTY3JpcHQgZXJyb3JcXC4/IG9uIGxpbmUgMCQvKSx3PVIuam9pblJlZ0V4cCh3KSxrKCksdj17ZW5hYmxlZDohMCx0aW1lbGluZTohMCxkaXNwbGF5OiEwLGVycm9yOiEwLGxldmVsczpudWxsfSxSLmlzQm9vbGVhbihjLmNvbnNvbGUpJiYodi5lbmFibGVkPWMuY29uc29sZSksUi5pc0Jvb2xlYW4oYy5jb25zb2xlVGltZWxpbmUpJiYodi50aW1lbGluZT1jLmNvbnNvbGVUaW1lbGluZSksUi5pc0Jvb2xlYW4oYy5jb25zb2xlRGlzcGxheSkmJih2LmRpc3BsYXk9Yy5jb25zb2xlRGlzcGxheSksUi5pc0Jvb2xlYW4oYy5jb25zb2xlRXJyb3JOb3RpZnkpJiYodi5lcnJvcj1jLmNvbnNvbGVFcnJvck5vdGlmeSksUi5pc0FycmF5KGMuY29uc29sZVRpbWVsaW5lTGV2ZWxzKSYmKHYubGV2ZWxzPWMuY29uc29sZVRpbWVsaW5lTGV2ZWxzKSx2LmVuYWJsZWQmJlwiY29uc29sZVwiaW4gYSYmYS5jb25zb2xlLmxvZyYmVC5hdHRhY2goYS5jb25zb2xlLHYudGltZWxpbmUsdi5kaXNwbGF5LHYuZXJyb3Isdi5sZXZlbHMpLHN8fFUuYXR0YWNoKCksdHx8dXx8Vi5fX2F0dGFjaEFqYXhIb29rcygpLFZ9LGluc3RhbGw6ZnVuY3Rpb24oKXtyZXR1cm4gZygpPyhDLnJlcG9ydC5zdWJzY3JpYmUobCksQy5leHRlbmRUb0FzeW5jaHJvbm91c0NhbGxiYWNrcygpLEEmJksmJkEuYWpheEVycm9yKGYpLFYpOnZvaWQgMH0sdW5pbnN0YWxsOmZ1bmN0aW9uKCl7cmV0dXJuIG89bnVsbCxDLnJlcG9ydC51bnN1YnNjcmliZShsKSxBJiZLJiZBLnVuYmluZChcImFqYXhFcnJvclwiLGYpLFZ9LHNldEN1c3RvbURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHA9YSxWfSxzZXRUYWdzOmZ1bmN0aW9uKGEpe3JldHVybiBFPWEsVn0sc2V0QWxsb3dlZERvbWFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJlIuaXNBcnJheShhKSYmKEc9YSksVn0sZ2V0QWxsb3dlZERvbWFpbnM6ZnVuY3Rpb24oKXtyZXR1cm4gR30sc2V0VXNlcjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gcT17fSxhJiYocS51c2VySWQ9XCJcIithKSxiJiYocS5lbWFpbD1cIlwiK2IpLGMmJihxLmZpcnN0TmFtZT1cIlwiK2MpLGQmJihxLmxhc3ROYW1lPVwiXCIrZCksVn0sc2V0VmVyc2lvbjpmdW5jdGlvbihhKXtyZXR1cm4gYSYmKHI9XCJcIithKSxWfSxlbmFibGVPZmZsaW5lOmZ1bmN0aW9uKGEpe3JldHVybiBSLmlzQm9vbGVhbihhKSYmKEk9YSksVn0sb25CZWZvcmVFcnJvclNlbmQ6ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgYSYmKHo9YSksVn0sc2V0R3JvdXBpbmdLZXlDYWxsYmFjazpmdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiYoeT1hKSxWfSxzZXRBUElFbmRwb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gTT1hLFZ9LGluaXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjJiYoYj1ifHx7fSxiLmN1c3RvbURhdGE9YyksVi5jb25maWcoYSxiKX0sd2l0aEN1c3RvbURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIFYuc2V0Q3VzdG9tRGF0YShhKX0sd2l0aFRhZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIFYuc2V0VGFncyhhKX0sYXR0YWNoOmZ1bmN0aW9uKCl7cmV0dXJuIFYuaW5zdGFsbCgpfSxkZXRhY2g6ZnVuY3Rpb24oKXtyZXR1cm4gVi51bmluc3RhbGwoKX0sbm90aWZ5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gVi5zZW5kKGEsYixjKX0sc2VuZFBlcmY6ZnVuY3Rpb24oYSl7cmV0dXJuIHU/dm9pZCBSLmxvZyhcIlJVTSBpcyBkaXNhYmxlZC4gUGxlYXNlIGVuYWJsZSBpdCBpbiB0aGUgY29uZmlnIG9wdGlvbnMuXCIpOm0oTyxhKX0sc2VuZEFqYXhQZXJmOmZ1bmN0aW9uKGEpe3JldHVybiB1P3ZvaWQgUi5sb2coXCJSVU0gaXMgZGlzYWJsZWQuIFBsZWFzZSBlbmFibGUgaXQgaW4gdGhlIGNvbmZpZyBvcHRpb25zLlwiKTptKFAsYSl9LHNlbmRUeG5QZXJmOmZ1bmN0aW9uKGEpe3JldHVybiBtKFEsYSl9LHNlbmQ6ZnVuY3Rpb24oYSxiLGMpe3RyeXtsKEMuY29tcHV0ZVN0YWNrVHJhY2UoYSkse2N1c3RvbURhdGE6Ui5tZXJnZShwLGIpLHRhZ3M6Ui5tZXJnZUFycmF5KEUsYyl9KX1jYXRjaChkKXtpZihhIT09ZCl0aHJvdyBkfXJldHVybiBWfSxfaGVscGVyOlJ9O2EuYXRhdHVzPVZ9KHdpbmRvdyxkb2N1bWVudCx3aW5kb3cualF1ZXJ5KSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXthLnBsPD0wfHxhdGF0dXMuc2VuZFBlcmYoYSl9ZnVuY3Rpb24gZSgpe3ZhciBiPWEucGVyZm9ybWFuY2V8fGEubW96UGVyZm9ybWFuY2V8fGEubXNQZXJmb3JtYW5jZXx8YS53ZWJraXRQZXJmb3JtYW5jZSxjPWIudGltaW5nLGU9Yi5uYXZpZ2F0aW9uO2lmKDA9PT1jLmxvYWRFdmVudEVuZClyZXR1cm4hMTtjbGVhckludGVydmFsKGkpLGk9bnVsbDt2YXIgZj1jLm5hdmlnYXRpb25TdGFydDswPj1mJiYoZj1jLmZldGNoU3RhcnQpO3ZhciBnPXt9O2Zvcih2YXIgaCBpbiBqKWdbaltoXV09LTEsaCBpbiBjJiYoY1toXTw9MHx8KGdbaltoXV09Y1toXS1mKSk7dmFyIGs9e250eTplLnR5cGUscmM6ZS5yZWRpcmVjdENvdW50LG50OmcucnBzLWcubnMsZHA6Zy5kY2UtZy5ycHMscHI6Zy5sZS1nLmRjZSxmZTpnLmxlLWcucnBzLHBsOmcubGUtZy5uc307ZChrKX1mdW5jdGlvbiBmKCl7aWYoIWh8fCFoLmJEb25lKXJldHVybiExO2NsZWFySW50ZXJ2YWwoaSksaT0hMTt2YXIgYT1oLmdldE1lYXN1cmVzKCk7aWYobnVsbCE9YSYmbnVsbCE9YS5iYWNrZW5kJiZudWxsIT1hLmZyb250ZW5kJiZudWxsIT1hW1wicGFnZSBsb2FkIHRpbWVcIl0mJm51bGwhPWFbXCJ0b3RhbCBsb2FkIHRpbWVcIl0pe3ZhciBiPWEuYmFja2VuZCxjPWEuYmFja2VuZCthLmZyb250ZW5kLGU9e250eTowLHJjOjAsbnQ6YixkcDpjLWIscHI6YVtcInRvdGFsIGxvYWQgdGltZVwiXS1jLGZlOmFbXCJ0b3RhbCBsb2FkIHRpbWVcIl0tYixwbDphW1widG90YWwgbG9hZCB0aW1lXCJdfTtkKGUpfX12YXIgZz0obmV3IERhdGUpLmdldFRpbWUoKSxoPWh8fHt9O2gucT1oLnF8fFtdLGgudmVyc2lvbj1cIjAuM1wiLGgudGFyZ2V0T3JpZ2luPWIubG9jYXRpb24ucHJvdG9jb2wrXCIvL1wiK2IubG9jYXRpb24uaG9zdG5hbWUsaC5iUG9zdE1lc3NhZ2U9ITEsaC5iZWFjb25Vcmw9aC5iZWFjb25Vcmx8fFwiL2ltYWdlcy9iZWFjb24uZ2lmXCIsaC5hdXRvcnVuPSExLGguaW5pdD1mdW5jdGlvbigpe2lmKGguYkRvbmU9ITEsaC5iVW5sb2FkZWQ9ITEsaC5tYXJrcz17fSxoLm1lYXN1cmVzPXt9LGguc3RhcnRzPXt9LGguZmluZFN0YXJ0VGltZSgpLGguYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLGguYmVmb3JlVW5sb2FkLCExKSxoLmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLGguYmVmb3JlVW5sb2FkLCExKSxoLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixoLmJlZm9yZVVubG9hZCwhMSksaC5wcm9jZXNzUSgpLFwiY29tcGxldGVcIj09PWIucmVhZHlTdGF0ZSl7dmFyIGM9YS5wZXJmb3JtYW5jZXx8YS5tb3pQZXJmb3JtYW5jZXx8YS5tc1BlcmZvcm1hbmNlfHxhLndlYmtpdFBlcmZvcm1hbmNlO2MmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjLnRpbWluZyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGMudGltaW5nLmxvYWRFdmVudEVuZCYmKGgubWFyayhcImZpcnN0Ynl0ZVwiLGMudGltaW5nLnJlc3BvbnNlU3RhcnQpLGgubWFyayhcIm9ubG9hZFwiLGMudGltaW5nLmxvYWRFdmVudEVuZCkpLGguZG9uZSgpfWVsc2UgaC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGgub25sb2FkLCExKX0saC5wcm9jZXNzUT1mdW5jdGlvbigpe2Zvcih2YXIgYT1oLnEubGVuZ3RoLGI9MDthPmI7YisrKXt2YXIgYz1oLnFbYl0sZD1jWzBdO1wibWFya1wiPT09ZD9oLm1hcmsoY1sxXSxjWzJdKTpcIm1lYXN1cmVcIj09PWQ/aC5tZWFzdXJlKGNbMV0sY1syXSxjWzNdKTpcImRvbmVcIj09PWQmJmguZG9uZShjWzFdKX19LGgubWFyaz1mdW5jdGlvbihiLGMpe3JldHVybiBoLmRwcmludChcIlJVTV9FUElTT0RFUy5tYXJrOiBcIitiK1wiLCBcIitjKSxiPyhoLm1hcmtzW2JdPXBhcnNlSW50KGN8fChuZXcgRGF0ZSkuZ2V0VGltZSgpKSxoLmJQb3N0TWVzc2FnZSYmYS5wb3N0TWVzc2FnZShcIlJVTV9FUElTT0RFUzptYXJrOlwiK2IrXCI6XCIrYyxoLnRhcmdldE9yaWdpbiksdm9pZChcImZpcnN0Ynl0ZVwiPT09Yj9oLm1lYXN1cmUoXCJiYWNrZW5kXCIsXCJzdGFydHRpbWVcIixcImZpcnN0Ynl0ZVwiKTpcIm9ubG9hZFwiPT09Yj8oaC5tZWFzdXJlKFwiZnJvbnRlbmRcIixcImZpcnN0Ynl0ZVwiLFwib25sb2FkXCIpLGgubWVhc3VyZShcInBhZ2UgbG9hZCB0aW1lXCIsXCJzdGFydHRpbWVcIixcIm9ubG9hZFwiKSk6XCJkb25lXCI9PT1iJiZoLm1lYXN1cmUoXCJ0b3RhbCBsb2FkIHRpbWVcIixcInN0YXJ0dGltZVwiLFwiZG9uZVwiKSkpOnZvaWQgaC5kcHJpbnQoXCJFcnJvcjogbWFya05hbWUgaXMgdW5kZWZpbmVkIGluIFJVTV9FUElTT0RFUy5tYXJrLlwiKX0saC5tZWFzdXJlPWZ1bmN0aW9uKGIsYyxkKXtpZihoLmRwcmludChcIlJVTV9FUElTT0RFUy5tZWFzdXJlOiBcIitiK1wiLCBcIitjK1wiLCBcIitkKSwhYilyZXR1cm4gdm9pZCBoLmRwcmludChcIkVycm9yOiBlcGlzb2RlTmFtZSBpcyB1bmRlZmluZWQgaW4gUlVNX0VQSVNPREVTLm1lYXN1cmUuXCIpO3ZhciBlO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBjKWU9XCJudW1iZXJcIj09dHlwZW9mIGgubWFya3NbYl0/aC5tYXJrc1tiXToobmV3IERhdGUpLmdldFRpbWUoKTtlbHNlIGlmKFwibnVtYmVyXCI9PXR5cGVvZiBoLm1hcmtzW2NdKWU9aC5tYXJrc1tjXTtlbHNle2lmKFwibnVtYmVyXCIhPXR5cGVvZiBjKXJldHVybiB2b2lkIGguZHByaW50KFwiRXJyb3I6IHVuZXhwZWN0ZWQgc3RhcnROYW1lT3JUaW1lIGluIFJVTV9FUElTT0RFUy5tZWFzdXJlOiBcIitjKTtlPWN9dmFyIGY7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGQpZj0obmV3IERhdGUpLmdldFRpbWUoKTtlbHNlIGlmKFwibnVtYmVyXCI9PXR5cGVvZiBoLm1hcmtzW2RdKWY9aC5tYXJrc1tkXTtlbHNle2lmKFwibnVtYmVyXCIhPXR5cGVvZiBkKXJldHVybiB2b2lkIGguZHByaW50KFwiRXJyb3I6IHVuZXhwZWN0ZWQgZW5kTmFtZU9yVGltZSBpbiBSVU1fRVBJU09ERVMubWVhc3VyZTogXCIrZCk7Zj1kfWguc3RhcnRzW2JdPXBhcnNlSW50KGUpLGgubWVhc3VyZXNbYl09cGFyc2VJbnQoZi1lKSxoLmJQb3N0TWVzc2FnZSYmYS5wb3N0TWVzc2FnZShcIlJVTV9FUElTT0RFUzptZWFzdXJlOlwiK2IrXCI6XCIrZStcIjpcIitmLGgudGFyZ2V0T3JpZ2luKX0saC5kb25lPWZ1bmN0aW9uKGIpe2guYkRvbmU9ITAsaC5tYXJrKFwiZG9uZVwiKSxoLmJQb3N0TWVzc2FnZSYmYS5wb3N0TWVzc2FnZShcIlJVTV9FUElTT0RFUzpkb25lXCIsaC50YXJnZXRPcmlnaW4pLFwiZnVuY3Rpb25cIj09dHlwZW9mIGImJmIoKX0saC5nZXRNYXJrcz1mdW5jdGlvbigpe3JldHVybiBoLm1hcmtzfSxoLmdldE1lYXN1cmVzPWZ1bmN0aW9uKCl7cmV0dXJuIGgubWVhc3VyZXN9LGguZ2V0U3RhcnRzPWZ1bmN0aW9uKCl7cmV0dXJuIGguc3RhcnRzfSxoLmZpbmRTdGFydFRpbWU9ZnVuY3Rpb24oKXt2YXIgYT1oLmZpbmRTdGFydFdlYlRpbWluZygpfHxoLmZpbmRTdGFydENvb2tpZSgpO2EmJmgubWFyayhcInN0YXJ0dGltZVwiLGEpfSxoLmZpbmRTdGFydFdlYlRpbWluZz1mdW5jdGlvbigpe3ZhciBiLGM9YS5wZXJmb3JtYW5jZXx8YS5tb3pQZXJmb3JtYW5jZXx8YS5tc1BlcmZvcm1hbmNlfHxhLndlYmtpdFBlcmZvcm1hbmNlO3JldHVybiBjJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYy50aW1pbmcmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQmJihiPWMudGltaW5nLm5hdmlnYXRpb25TdGFydCxoLmRwcmludChcIlJVTV9FUElTT0RFUy5maW5kU3RhcnRXZWJUaW1pbmc6IHN0YXJ0VGltZSA9IFwiK2IpKSxifSxoLmZpbmRTdGFydENvb2tpZT1mdW5jdGlvbigpe2Zvcih2YXIgZD1iLmNvb2tpZS5zcGxpdChcIiBcIiksZT0wO2U8ZC5sZW5ndGg7ZSsrKWlmKDA9PT1kW2VdLmluZGV4T2YoXCJSVU1fRVBJU09ERVM9XCIpKXtmb3IodmFyIGYsZyxpPWRbZV0uc3Vic3RyaW5nKFwiUlVNX0VQSVNPREVTPVwiLmxlbmd0aCkuc3BsaXQoXCImXCIpLGo9MDtqPGkubGVuZ3RoO2orKylpZigwPT09aVtqXS5pbmRleE9mKFwicz1cIikpZj1pW2pdLnN1YnN0cmluZygyKTtlbHNlIGlmKDA9PT1pW2pdLmluZGV4T2YoXCJyPVwiKSl7dmFyIGs9aVtqXS5zdWJzdHJpbmcoMik7az1rLnJlcGxhY2UoLzskLyxcIlwiKSxnPWEuZXNjYXBlKGIucmVmZXJyZXIpPT09a31pZihnJiZmKXJldHVybiBoLmRwcmludChcIlJVTV9FUElTT0RFUy5maW5kU3RhcnRDb29raWU6IHN0YXJ0VGltZSA9IFwiK2YpLGZ9cmV0dXJuIGN9LGguYmVmb3JlVW5sb2FkPWZ1bmN0aW9uKCl7aC5iVW5sb2FkZWR8fChiLmNvb2tpZT1cIlJVTV9FUElTT0RFUz1zPVwiK051bWJlcihuZXcgRGF0ZSkrXCImcj1cIithLmVzY2FwZShiLmxvY2F0aW9uKStcIjsgcGF0aD0vXCIsaC5iVW5sb2FkZWQ9ITApfSxoLm9ubG9hZD1mdW5jdGlvbigpe2gubWFyayhcIm9ubG9hZFwiKSxoLmRvbmUoKX0saC5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5hdHRhY2hFdmVudD9hLmF0dGFjaEV2ZW50KFwib25cIitiLGMpOmEuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoYixjLGQpOnZvaWQgMH0saC5kcHJpbnQ9ZnVuY3Rpb24oKXt9LGguaW5pdCgpO3ZhciBpPW51bGwsaj17bmF2aWdhdGlvblN0YXJ0OlwibnNcIixyZWRpcmVjdFN0YXJ0OlwicmRzXCIscmVkaXJlY3RFbmQ6XCJyZGVcIix1bmxvYWRFdmVudFN0YXJ0OlwidXNcIix1bmxvYWRFdmVudEVuZDpcInVlXCIsZmV0Y2hTdGFydDpcImZzXCIsZG9tYWluTG9va3VwU3RhcnQ6XCJkbHNcIixkb21haW5Mb29rdXBFbmQ6XCJkbGVcIixjb25uZWN0U3RhcnQ6XCJjc1wiLHNlY3VyZUNvbm5lY3Rpb25TdGFydDpcInNjc1wiLGNvbm5lY3RFbmQ6XCJjZVwiLGhhbmRzaGFrZVN0YXJ0OlwiaHNcIixyZXF1ZXN0U3RhcnQ6XCJycXNcIixyZXNwb25zZVN0YXJ0OlwicnBzXCIscmVzcG9uc2VFbmQ6XCJycGVcIixkb21Mb2FkaW5nOlwiZGxcIixkb21JbnRlcmFjdGl2ZTpcImRpXCIsZG9tQ29udGVudExvYWRlZEV2ZW50U3RhcnQ6XCJkY3NcIixkb21Db250ZW50TG9hZGVkRXZlbnRFbmQ6XCJkY2VcIixkb21Db21wbGV0ZTpcImRjXCIsbG9hZEV2ZW50U3RhcnQ6XCJsc1wiLGxvYWRFdmVudEVuZDpcImxlXCJ9LGs9YS5wZXJmb3JtYW5jZXx8YS5tb3pQZXJmb3JtYW5jZXx8YS5tc1BlcmZvcm1hbmNlfHxhLndlYmtpdFBlcmZvcm1hbmNlO2smJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBrLnRpbWluZyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGsubmF2aWdhdGlvbj9pPXNldEludGVydmFsKGUsMTAwKTooaC5tYXJrKFwiZmlyc3RieXRlXCIsZyksaT1zZXRJbnRlcnZhbChmLDEwMCkpfSh3aW5kb3csZG9jdW1lbnQpLGF0YXR1cy5fX2F0dGFjaEFqYXhIb29rcz1mdW5jdGlvbigpeyFmdW5jdGlvbihhLGIpe3ZhciBjPWF0YXR1cy5faGVscGVyLGQ9e3F1ZXVlOltdLGJhdGNoU2l6ZToyNSxwcm9jZXNzaW5nOiExLGJVbmxvYWRlZDohMSxwdXNoOmZ1bmN0aW9uKGEpe1wic3RyaW5nXCI9PXR5cGVvZiBhLnVybCYmYS51cmwuaW5kZXhPZihcIi5odG1sXCIpPjB8fCh0aGlzLnF1ZXVlLnB1c2goYSksdGhpcy5xdWV1ZS5sZW5ndGg+PXRoaXMuYmF0Y2hTaXplJiZ0aGlzLl9wcm9jZXNzUXVldWUoKSl9LF9wcm9jZXNzUXVldWU6ZnVuY3Rpb24oKXtpZighdGhpcy5wcm9jZXNzaW5nJiZ0aGlzLnF1ZXVlLmxlbmd0aCl7dGhpcy5wcm9jZXNzaW5nPSEwO3RyeXtmb3IodmFyIGE9e30sYj17fSxkPTA7ZDx0aGlzLnF1ZXVlLmxlbmd0aDtkKyspe3ZhciBlLGY9dGhpcy5xdWV1ZVtkXTtpZihmLnN0YXR1czw0MDApe2U9Zi5tZXRob2QrZi51cmw7dmFyIGc9Zi5yZXNwQXZhaWxUaW1lLWYuc2VuZFRpbWUsaD1mLnJlc3BQcm9jVGltZS1mLnJlc3BBdmFpbFRpbWUsaT1mLnJlY2VpdmVkU2l6ZSxqPWYuc2VuZFNpemUsaz1hW2VdO2lmKGspe2suYysrO3ZhciBsPWsucmU7bC50PWwudCtnLGwubG89bC5sbzxnP2wubG86ZyxsLmhpPWwuaGk+Zz9sLmhpOmcsbC5zc3E9bC5zc3ErZypnO3ZhciBtPWsuY2I7bS50PW0udCtoLG0ubG89bS5sbzxoP20ubG86aCxtLmhpPW0uaGk+aD9tLmhpOmgsbS5zc3E9bS5zc3EraCpoO3ZhciBuPWsucnM7bi50PW4udCtpLG4ubG89bi5sbzxpP24ubG86aSxuLmhpPW4uaGk+aT9uLmhpOmksbi5zc3E9bi5zc3EraSppO3ZhciBvPWsuc3M7by50PW8udCtqLG8ubG89by5sbzxqP28ubG86aixvLmhpPW8uaGk+aj9vLmhpOmosby5zc3E9by5zc3EraipqfWVsc2UgYVtlXT17bTpmLm1ldGhvZCx1cmw6Zi51cmwsYzoxLHJlOnt0OmcsbG86ZyxoaTpnLHNzcTpnKmd9LGNiOnt0OmgsbG86aCxoaTpoLHNzcTpoKmh9LHJzOnt0OmYucmVjZWl2ZWRTaXplLGxvOmYucmVjZWl2ZWRTaXplLGhpOmYucmVjZWl2ZWRTaXplLHNzcTpmLnJlY2VpdmVkU2l6ZSpmLnJlY2VpdmVkU2l6ZX0sc3M6e3Q6Zi5zZW5kU2l6ZSxsbzpmLnNlbmRTaXplLGhpOmYuc2VuZFNpemUsc3NxOmYuc2VuZFNpemUqZi5zZW5kU2l6ZX19fWVsc2UgZT1mLm1ldGhvZCtmLnN0YXR1cytmLnVybCxiW2VdP2JbZV0uYysrOmJbZV09e206Zi5tZXRob2QsdXJsOmYudXJsLHN0OmYuc3RhdHVzLGM6MX19dmFyIHA9e3hocjpjLmFycmF5RnJvbU9iamVjdChhKSx4aHJFcnJvcjpjLmFycmF5RnJvbU9iamVjdChiKX07YXRhdHVzLnNlbmRBamF4UGVyZihwKX1jYXRjaChxKXtjLmxvZyhcIkVycm9yIHdoaWxlIHByb2Nlc3NpbmcgcXVldWU6IFwiLHEpfWZpbmFsbHl7dGhpcy5xdWV1ZT1bXSx0aGlzLnByb2Nlc3Npbmc9ITF9fX0sYmVmb3JlVW5sb2FkOmZ1bmN0aW9uKCl7ZC5iVW5sb2FkZWR8fChkLl9wcm9jZXNzUXVldWUoKSxkLmJVbmxvYWRlZD0hMCl9fTtjLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIixkLmJlZm9yZVVubG9hZCwhMSk7dmFyIGU9e3N1cHBvcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fFwiYXBwbHlcImluIGF9LGFyb3VuZDpmdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gYT1hfHxmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt2YXIgZixnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7dHJ5e2ImJihmPWIuYXBwbHkodGhpcyxnKSl9Y2F0Y2goaCl7Yy5sb2coZSxoKX12YXIgaTt0cnl7aT1hLmFwcGx5KHRoaXMsZnx8Zyl9ZmluYWxseXt0cnl7ZCYmZC5hcHBseSh0aGlzLGcpfWNhdGNoKGgpe2MubG9nKGUsaCl9fXJldHVybiBpfX0sYmVmb3JlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUuYXJvdW5kKGEsYil9LGFmdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUuYXJvdW5kKGEsbnVsbCxiKX0sdGltZW91dDpmdW5jdGlvbihhKXtzZXRUaW1lb3V0KGEsMCl9LHdyYXBBZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYil7aWYoKFwibG9hZFwiPT09YXx8XCJlcnJvclwiPT09YSkmJmImJnRoaXMuX2F0cnVtWGhyRGF0YSl7dmFyIGM7Yi5fX2F0cnVtSW50ZXJjZXB0b3I/Yz1iLl9fYXRydW1JbnRlcmNlcHRvcjplLnN1cHBvcnQoYik/KGM9Zy53cmFwWEhSKGIsdGhpcyxcIlhIUi5pbnZva2VFdmVudExpc3RlbmVyXCIpLGIuX19hdHJ1bUludGVyY2VwdG9yPWMpOmM9bnVsbDt2YXIgZDtyZXR1cm4gYyYmKGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxkWzFdPWMpLGR9fX0sd3JhcFJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiKXtpZih0aGlzLl9hdHJ1bVhockRhdGEpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIGIuX19hdHJ1bUludGVyY2VwdG9yJiYoY1sxXT1iLl9fYXRydW1JbnRlcmNlcHRvciksY319fSxhcm91bmRXaXRoSGFuZGxlRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGY9YTtyZXR1cm4gYSYmXCJvYmplY3RcIj09dHlwZW9mIGEmJlwidG9TdHJpbmdcImluIGEmJlwiW3hwY29ubmVjdCB3cmFwcGVkIG5zSURPTUV2ZW50TGlzdGVuZXJdXCI9PT1hLnRvU3RyaW5nKCkmJlwiaGFuZGxlRXZlbnRcImluIGEmJihmPWZ1bmN0aW9uKCl7YS5oYW5kbGVFdmVudC5hcHBseSh0aGlzLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfSksZS5hcm91bmQoZixiLGMsZCl9LGdldEZ1bGx5UXVhbGlmaWVkVXJsOmZ1bmN0aW9uKGEpe3ZhciBjPWIuY3JlYXRlRWxlbWVudChcImFcIik7cmV0dXJuIGMuaHJlZj1hLGMuaHJlZn19O2lmKGEuWE1MSHR0cFJlcXVlc3QmJmEuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlKXt2YXIgZj1hLlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZTtpZighKFwib3BlblwiaW4gZiYmXCJzZW5kXCJpbiBmKSlyZXR1cm47aWYoIWUuc3VwcG9ydChmLm9wZW4pfHwhZS5zdXBwb3J0KGYuc2VuZCkpcmV0dXJuO3ZhciBnPXt9O2cuY2FwdHVyZUFqYXhUaW1pbmdzPWZ1bmN0aW9uKGEpe3ZhciBiPWEuX2F0cnVtWGhyRGF0YTtpZihiKXt2YXIgYz0obmV3IERhdGUpLmdldFRpbWUoKTsyPT09YS5yZWFkeVN0YXRlP2IuZmlyc3RCeXRlVGltZT1iLmZpcnN0Qnl0ZVRpbWV8fGM6ND09PWEucmVhZHlTdGF0ZSYmKGIucmVzcEF2YWlsVGltZT1iLnJlc3BBdmFpbFRpbWV8fGMsYi5maXJzdEJ5dGVUaW1lPWIuZmlyc3RCeXRlVGltZXx8Yyl9fSxnLnNlbmRQYXlsb2FkPWZ1bmN0aW9uKGEsYil7Yi5yZWNlaXZlZFNpemU9MCxhLnJlc3BvbnNlVHlwZSYmXCJ0ZXh0XCIhPT1hLnJlc3BvbnNlVHlwZXx8XCJzdHJpbmdcIj09dHlwZW9mIGEucmVzcG9uc2VUZXh0JiYoYi5yZWNlaXZlZFNpemU9YS5yZXNwb25zZVRleHQubGVuZ3RoKSxiLnN0YXR1cz1hLnN0YXR1cyxkLnB1c2goYil9LGcud3JhcFhIUj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGUuYXJvdW5kV2l0aEhhbmRsZUV2ZW50KGEsZnVuY3Rpb24oKXtnLmNhcHR1cmVBamF4VGltaW5ncyh0aGlzKX0sZnVuY3Rpb24oKXt2YXIgYT1iLl9hdHJ1bVhockRhdGE7aWYoYSYmND09PWIucmVhZHlTdGF0ZSl7dmFyIGM9KG5ldyBEYXRlKS5nZXRUaW1lKCk7YS5yZXNwUHJvY1RpbWU9YS5yZXNwUHJvY1RpbWV8fGMsZy5zZW5kUGF5bG9hZChiLGEpLGRlbGV0ZSBiLl9hdHJ1bVhockRhdGF9fSxjKX0sZy5hamF4RG9uZT1mdW5jdGlvbihhKXtpZihhLl9hdHJ1bVhockRhdGEpe3ZhciBiPShuZXcgRGF0ZSkuZ2V0VGltZSgpKzNlNCxjPWZ1bmN0aW9uKCl7Zy5jYXB0dXJlQWpheFRpbWluZ3MoYSk7dmFyIGQ9YS5fYXRydW1YaHJEYXRhO2lmKGQpe3ZhciBlPShuZXcgRGF0ZSkuZ2V0VGltZSgpOzQ9PT1hLnJlYWR5U3RhdGU/KGQucmVzcFByb2NUaW1lPWQucmVzcFByb2NUaW1lfHxlLGcuc2VuZFBheWxvYWQoYSxkKSxkZWxldGUgYS5fYXRydW1YaHJEYXRhKTpiPmU/c2V0VGltZW91dChjLDUwKTpkZWxldGUgYS5fYXRydW1YaHJEYXRhfX07YygpfX0sZi5vcGVuPWUuYXJvdW5kKGYub3BlbixmdW5jdGlvbigpe3ZhciBhPTE8PWFyZ3VtZW50cy5sZW5ndGg/U3RyaW5nKGFyZ3VtZW50c1swXSk6XCJcIixiPTI8PWFyZ3VtZW50cy5sZW5ndGg/U3RyaW5nKGFyZ3VtZW50c1sxXSk6XCJcIixjPWF0YXR1cy5nZXRBbGxvd2VkRG9tYWlucygpLGQ9ITA7aWYoYj1lLmdldEZ1bGx5UXVhbGlmaWVkVXJsKGIpLGImJmMmJmMubGVuZ3RoKXtkPSExO2Zvcih2YXIgZj0wO2Y8Yy5sZW5ndGg7ZisrKXt2YXIgZz1jW2ZdO2lmKGcmJmIuaW5kZXhPZihnKT4tMSl7ZD0hMDticmVha319fWQmJihiPWImJmIuc3BsaXQoXCI/XCIpWzBdLHRoaXMuX2F0cnVtWGhyRGF0YT17bWV0aG9kOmEsdXJsOmIsc2VuZFRpbWU6bnVsbCxzZW5kU2l6ZTpudWxsLGZpcnN0Qnl0ZVRpbWU6bnVsbCxyZXNwQXZhaWxUaW1lOm51bGwscmVzcFByb2NUaW1lOm51bGwscmVjZWl2ZWRTaXplOm51bGwscGFyZW50UGhhc2U6bnVsbH0pfSxudWxsLFwiWEhSLm9wZW5cIiksZi5zZW5kPWUuYXJvdW5kKGYuc2VuZCxmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLl9hdHJ1bVhockRhdGE7aWYoYil7dmFyIGM9KG5ldyBEYXRlKS5nZXRUaW1lKCk7Yi5zZW5kVGltZT1iLnNlbmRUaW1lfHxjLGIuc2VuZFNpemU9MTw9YXJndW1lbnRzLmxlbmd0aCYmYXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXS5sZW5ndGh8fDA6MDt2YXIgZD0wLGY9ZnVuY3Rpb24oKXtpZig0PT09YS5yZWFkeVN0YXRlKWcuYWpheERvbmUoYSk7ZWxzZXt2YXIgYj1udWxsO3RyeXtiPWEub25yZWFkeXN0YXRlY2hhbmdlfWNhdGNoKGMpe3JldHVybiB2b2lkIGcuYWpheERvbmUoYSl9ZCsrLGI/ZS5zdXBwb3J0KGIpP2Eub25yZWFkeXN0YXRlY2hhbmdlPWcud3JhcFhIUihiLGEsXCJYSFIub25SZWFkeVN0YXRlQ2hhbmdlXCIpOmcuYWpheERvbmUoYSk6NT5kP2UudGltZW91dChmKTpnLmFqYXhEb25lKGEpfX07ZigpfX0sbnVsbCxcIlhIUi5zZW5kXCIpLFwiYWRkRXZlbnRMaXN0ZW5lclwiaW4gZiYmXCJyZW1vdmVFdmVudExpc3RlbmVyXCJpbiBmJiZlLnN1cHBvcnQoZi5hZGRFdmVudExpc3RlbmVyKSYmZS5zdXBwb3J0KGYucmVtb3ZlRXZlbnRMaXN0ZW5lcikmJihmLmFkZEV2ZW50TGlzdGVuZXI9ZS5hcm91bmQoZi5hZGRFdmVudExpc3RlbmVyLGUud3JhcEFkZEV2ZW50TGlzdGVuZXIoKSxudWxsLFwiWEhSLmFkZEV2ZW50TGlzdGVuZXJcIiksZi5yZW1vdmVFdmVudExpc3RlbmVyPWUuYXJvdW5kKGYucmVtb3ZlRXZlbnRMaXN0ZW5lcixlLndyYXBSZW1vdmVFdmVudExpc3RlbmVyKCksbnVsbCxcIlhIUi5yZW1vdmVFdmVudExpc3RlbmVyXCIpKX19KHdpbmRvdyxkb2N1bWVudCl9LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe2lmKCEoMD49Yikpe3ZhciBkPXtuYW1lOmEsZHVyOmIsc3Q6Y307YXRhdHVzLnNlbmRUeG5QZXJmKGQpfX1mdW5jdGlvbiBjKGEpe3JldHVybiBoK1wiIFwiK2F9ZnVuY3Rpb24gZCgpe3RyeXtyZXR1cm5cImxvY2FsU3RvcmFnZVwiaW4gYSYmbnVsbCE9PWEubG9jYWxTdG9yYWdlO31jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gZShhKXt2YXIgYj1pLm5vdygpO3RyeXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjKGEpLGIpfWNhdGNoKGQpe319ZnVuY3Rpb24gZihhKXt2YXIgYj1udWxsLGQ9YyhhKTt0cnl7Yj1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShkKSxsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShkKX1jYXRjaChlKXt9dmFyIGY9MDtyZXR1cm4gYiYmKGY9aS5ub3coKS1iKSxmfWZ1bmN0aW9uIGcoYSl7dHJ5e3ZhciBiPWMoYSk7bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYil9Y2F0Y2goZCl7fX12YXIgaD1cImF0YXR1cy5jb20vXCIsaT1hdGF0dXMuX2hlbHBlcixqPTEsaz0wO2F0YXR1cy5iZWdpblRyYW5zYWN0aW9uPWZ1bmN0aW9uKGEpe2QoKSYmZShhKX0sYXRhdHVzLmVuZFRyYW5zYWN0aW9uPWZ1bmN0aW9uKGEpe2lmKGQoKSl7dmFyIGM9ZihhKTtiKGEsYyxqKX19LGF0YXR1cy5mYWlsVHJhbnNhY3Rpb249ZnVuY3Rpb24oYSl7aWYoZCgpKXt2YXIgYz1mKGEpO2IoYSxjLGspfX0sYXRhdHVzLmNhbmNlbFRyYW5zYWN0aW9uPWZ1bmN0aW9uKGEpe2QoKSYmZyhhKX19KHdpbmRvdyxkb2N1bWVudCk7XG4vKiEgaHR0cHM6Ly9naXRodWIuY29tL3R0YXViZXJ0L25vZGUtYXJyYXlidWZmZXItc2xpY2VcbiAqIChjKSAyMDE0IFRpbSBUYXViZXJ0IDx0aW1AdGltdGF1YmVydC5kZT5cbiAqIGFycmF5YnVmZmVyLXNsaWNlIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLiovXG4hZnVuY3Rpb24ocil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChyLHQpe3JldHVybiByPTB8cnx8MCxyPDA/TWF0aC5tYXgocit0LDApOk1hdGgubWluKHIsdCl9QXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlfHwoQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGUsbil7dmFyIGY9dGhpcy5ieXRlTGVuZ3RoLGk9dChlLGYpLGE9ZjtpZihuIT09ciYmKGE9dChuLGYpKSxpPmEpcmV0dXJuIG5ldyBBcnJheUJ1ZmZlcigwKTt2YXIgdT1hLWkseT1uZXcgQXJyYXlCdWZmZXIodSksbz1uZXcgVWludDhBcnJheSh5KSxzPW5ldyBVaW50OEFycmF5KHRoaXMsaSx1KTtyZXR1cm4gby5zZXQocykseX0pfSgpO1xuIWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocil7aWYoaVtyXSlyZXR1cm4gaVtyXS50O3ZhciBuPWlbcl09e3Q6e30saWQ6cixsb2FkZWQ6ITF9O3JldHVybiB0W3JdLmNhbGwobi50LG4sbi50LGUpLG4ubG9hZGVkPSEwLG4udH12YXIgaT17fTtyZXR1cm4gZS5pPXQsZS5jPWksZS5vPVwiXCIsZSgwKX0oW2Z1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWZvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pO3QucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KGkucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBpKX0sbj1pKDI1KSxvPWkoNykscz1pKDkpLGE9aSgxKTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgYyl2YXIgYz0zZTQ7dmFyIGg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZhciByPXQuY2FsbCh0aGlzLGkpfHx0aGlzO3JldHVybiByLnBsdWdpbk5hbWU9XCJiaXRtb3ZpblwiLHIucz0hMSxyLnBsYXllcj1lLHIucGxheWVyLmluaXRTZXNzaW9uPWZ1bmN0aW9uKHQpe3JldHVybiByLmgoKSxyLnAodCkudGltZW91dChjLHIudStcIiBIaXZlIFBsdWdpbiBpbml0aWFsaXphdGlvbiB0aW1lb3V0XCIpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHIubCgpLHQuZygpfSlbXCJjYXRjaFwiXShmdW5jdGlvbih0KXtyZXR1cm4gci52KCksci5oKCksci5tKCkuZGVidWcoci51K1wiIGVycm9yIG9jY3VycmVkIHJlc29sdmluZyB0aGUgdGlja2V0IC0gXCIrdC5zdGFjayksYS5yZWplY3QodCl9KX0sci5tKCkubm90aWNlKHIudStcInJlZ2lzdGVyZWQgcGx1Z2luIFtuYW1lOlwiK3IuVCgpK1wiXVtpZDogXCIrci5TKCkrXCJdW3ZlcnNpb246IFwiK3IuSSgpK1wiXVwiKSxyfXJldHVybiByKGUsdCksZS5wcm90b3R5cGUubD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5zfHwodGhpcy5wbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKFwib25SZWFkeVwiLGZ1bmN0aW9uKCl7aWYodC5tKCkuZGVidWcoXCJiaXRtb3Zpbi5wbGF5ZXIuRVZFTlQuT05fUkVBRFlcIiksdC5SKCkpe3ZhciBlPSEhdC5wbGF5ZXIuZ2V0Q29uZmlnKCkucGxheWJhY2smJnQucGxheWVyLmdldENvbmZpZygpLnBsYXliYWNrLmF1dG87ZSYmdC5rKCExKSx0LkMoKSYmKHQuTz1uZXcgby5QKX19KSx0aGlzLnBsYXllci5hZGRFdmVudEhhbmRsZXIoXCJvblBsYXlcIixmdW5jdGlvbigpe3QubSgpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1BMQVlcIiksdC5BKHMuRi5CLk4pfSksdGhpcy5wbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKFwib25FcnJvclwiLGZ1bmN0aW9uKGUpe3QubSgpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX0VSUk9SXCIpO3ZhciBpPS0xLHI9bnVsbDtpZihudWxsIT1lKXRyeXtpPWUuY29kZSxyPUpTT04uc3RyaW5naWZ5KGUsbnVsbCl9Y2F0Y2gobil7cj1lfXQub25FcnJvcihpLHIpfSksdGhpcy5wbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKFwib25QbGF5YmFja0ZpbmlzaGVkXCIsZnVuY3Rpb24oKXt0Lm0oKS5kZWJ1ZyhcImJpdG1vdmluLnBsYXllci5FVkVOVC5PTl9QTEFZQkFDS19GSU5JU0hFRFwiKSx0Ll8ocy5GLkIuRCx7Y29kZToxfSl9KSx0aGlzLnBsYXllci5hZGRFdmVudEhhbmRsZXIoXCJvblNlZWtcIixmdW5jdGlvbigpe3QubSgpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1NFRUtcIiksdC5fKHMuRi5CLkgpfSksdGhpcy5wbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKFwib25GdWxsc2NyZWVuRW50ZXJcIixmdW5jdGlvbigpe3QubSgpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX0ZVTExTQ1JFRU5fRU5URVJcIiksdC5fKHMuRi5CLkwse3ZhbHVlOiEwfSl9KSx0aGlzLnBsYXllci5hZGRFdmVudEhhbmRsZXIoXCJvbkZ1bGxzY3JlZW5FeGl0XCIsZnVuY3Rpb24oKXt0Lm0oKS5kZWJ1ZyhcImJpdG1vdmluLnBsYXllci5FVkVOVC5PTl9GVUxMU0NSRUVOX0VYSVRcIiksdC5fKHMuRi5CLkwse3ZhbHVlOiExfSl9KSx0aGlzLnBsYXllci5hZGRFdmVudEhhbmRsZXIoXCJvblNlZ21lbnRSZXF1ZXN0RmluaXNoZWRcIixmdW5jdGlvbihlKXt2YXIgaT1lLm1pbWVUeXBlLmluZGV4T2YoXCJ2aWRlb1wiKT49MDtpZihlLnN1Y2Nlc3Mpe3ZhciByPTgqZS5zaXplL2UuZG93bmxvYWRUaW1lO3QuTy5NKGksdC5qLGUuc2l6ZSksdC5PLlUocil9ZWxzZSB0Lk8uVihpLHQuail9KSwwPT09dGhpcy5xKCkuaW5kZXhPZihcIjdcIik/dGhpcy5KKCk6MD09PXRoaXMucSgpLmluZGV4T2YoXCI2XCIpJiZ0aGlzLksoKSx0aGlzLnM9ITApfSxlLnByb3RvdHlwZS5LPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnBsYXllci5hZGRFdmVudEhhbmRsZXIoXCJvblN0YXJ0QnVmZmVyaW5nXCIsZnVuY3Rpb24oKXt0Lm0oKS5kZWJ1ZyhcImJpdG1vdmluLnBsYXllci5FVkVOVC5PTl9TVEFSVF9CVUZGRVJJTkdcIiksdC5rKCl9KSx0aGlzLnBsYXllci5hZGRFdmVudEhhbmRsZXIoXCJvblN0b3BCdWZmZXJpbmdcIixmdW5jdGlvbigpe3QubSgpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1NUT1BfQlVGRkVSSU5HXCIpLHQuRygpfSksdGhpcy5wbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKFwib25QYXVzZVwiLGZ1bmN0aW9uKCl7dC5tKCkuZGVidWcoXCJiaXRtb3Zpbi5wbGF5ZXIuRVZFTlQuT05fUEFVU0VcIiksdC5BKHMuRi5CLlcpfSksdGhpcy5wbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKFwib25WaWRlb0Rvd25sb2FkUXVhbGl0eUNoYW5nZVwiLGZ1bmN0aW9uKGUpe3ZhciBpPXQuJCgpO2k9PT1TdHJlYW1Qcm90b2NvbC5ZP3QuWChlLnRhcmdldFF1YWxpdHkpOnQuWChlLnRhcmdldFF1YWxpdHkuc3BsaXQoXCJiclwiKVsxXSl9KX0sZS5wcm90b3R5cGUuSj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5wbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKFwib25TdGFsbFN0YXJ0ZWRcIixmdW5jdGlvbigpe3QubSgpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1NUQUxMX1NUQVJURURcIiksdC5rKCl9KSx0aGlzLnBsYXllci5hZGRFdmVudEhhbmRsZXIoXCJvblN0YWxsRW5kZWRcIixmdW5jdGlvbigpe3QubSgpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1NUQUxMX0VOREVEXCIpLHQuRygpfSksdGhpcy5wbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKFwib25QYXVzZWRcIixmdW5jdGlvbigpe3QubSgpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1BBVVNFRFwiKSx0LkEocy5GLkIuVyl9KSx0aGlzLnBsYXllci5hZGRFdmVudEhhbmRsZXIoXCJvblZpZGVvRG93bmxvYWRRdWFsaXR5Q2hhbmdlZFwiLGZ1bmN0aW9uKGUpe3QuWChlLnRhcmdldFF1YWxpdHlJZC5iaXRyYXRlKX0pfSxlLnByb3RvdHlwZS5YPWZ1bmN0aW9uKHQpe3RoaXMubSgpLmRlYnVnKFwibmV3Qml0cmF0ZVwiLHQpLHRoaXMuaiYmdD50aGlzLmo/dGhpcy5PLlooKTp0aGlzLmomJnRoaXMuaj50JiZ0aGlzLk8udHQoKSx0aGlzLmo9dH0sZS5wcm90b3R5cGUuQT1mdW5jdGlvbih0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcy5ldCYmdGhpcy5ldCE9PXQmJih0aGlzLl8odCksdGhpcy5ldD10KX0sZS5wcm90b3R5cGUuaXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiQoKTtyZXR1cm4gdD09PVN0cmVhbVByb3RvY29sLlk/dGhpcy5wbGF5ZXIuZ2V0Q29uZmlnKCkuc291cmNlLmhsczp0PT09U3RyZWFtUHJvdG9jb2wucnQ/dGhpcy5wbGF5ZXIuZ2V0Q29uZmlnKCkuc291cmNlLmRhc2g6dm9pZCAwfSxlLnByb3RvdHlwZS5nZXRDdXJyZW50VGltZT1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLnBsYXllcj9NYXRoLnJvdW5kKDFlMyp0aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpKTowfSxlLnByb3RvdHlwZS5udD1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLnBsYXllciYmbnVsbCE9dGhpcy5wbGF5ZXIuZ2V0VmlkZW9CdWZmZXJMZW5ndGgmJnRoaXMucGxheWVyLmdldFZpZGVvQnVmZmVyTGVuZ3RoKCk+MD9NYXRoLm1heCgwLE1hdGgucm91bmQoMWUzKnRoaXMucGxheWVyLmdldFZpZGVvQnVmZmVyTGVuZ3RoKCkpKTowfSxlLnByb3RvdHlwZS5vdD1mdW5jdGlvbigpe2lmKHRoaXMucGxheWVyKXt2YXIgdD10aGlzLnBsYXllci5nZXRGaWd1cmUoKTtyZXR1cm57d2lkdGg6dC5vZmZzZXRXaWR0aCxoZWlnaHQ6dC5vZmZzZXRIZWlnaHR9fX0sZS5wcm90b3R5cGUuaXNGdWxsc2NyZWVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGxheWVyLmlzRnVsbHNjcmVlbigpfSxlLnByb3RvdHlwZS5pc0xpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wbGF5ZXIuaXNMaXZlKCl9LGUucHJvdG90eXBlLnN0PWZ1bmN0aW9uKCl7cmV0dXJuITB9LGUucHJvdG90eXBlLiQ9ZnVuY3Rpb24oKXtpZih0aGlzLnBsYXllcil7dmFyIHQ9dGhpcy5wbGF5ZXIuZ2V0U3RyZWFtVHlwZSgpO2lmKFwiaGxzXCI9PT10KXJldHVybiBTdHJlYW1Qcm90b2NvbC5ZO2lmKFwiZGFzaFwiPT09dClyZXR1cm4gU3RyZWFtUHJvdG9jb2wucnR9cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLmF0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5PO3JldHVybiB0aGlzLk89bmV3IG8uUCx0fSxlLnByb3RvdHlwZS5UPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGx1Z2luTmFtZX0sZS5wcm90b3R5cGUuST1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN0KCl9LGUucHJvdG90eXBlLmh0PWZ1bmN0aW9uKCl7aWYodGhpcy5wbGF5ZXIpcmV0dXJuIHRoaXMucGxheWVyLmdldFBsYXllclR5cGUoKX0sZS5wcm90b3R5cGUucT1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBiaXRtb3Zpbi5wbGF5ZXIudmVyc2lvbj9iaXRtb3Zpbi5wbGF5ZXIudmVyc2lvbjp0aGlzLnBsYXllci5nZXRWZXJzaW9uKCl9LGV9KG4ucHQuUGx1Z2luKTtlLnV0PWg7dmFyIHA9ZnVuY3Rpb24odCxlKXtuZXcgaCh0LGUpfTtiaXRtb3Zpbi5pbml0SGl2ZVNETj1wfSxmdW5jdGlvbih0LGUsaSl7LyohXG4gKlxuICogQ29weXJpZ2h0IDIwMDktMjAxNiBLcmlzIEtvd2FsIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUXG4gKiBsaWNlbnNlIGZvdW5kIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcS9ibG9iL3YxL0xJQ0VOU0VcbiAqXG4gKiBXaXRoIHBhcnRzIGJ5IFR5bGVyIENsb3NlXG4gKiBDb3B5cmlnaHQgMjAwNy0yMDA5IFR5bGVyIENsb3NlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUIFggbGljZW5zZSBmb3VuZFxuICogYXQgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5odG1sXG4gKiBGb3JrZWQgYXQgcmVmX3NlbmQuanMgdmVyc2lvbjogMjAwOS0wNS0xMVxuICpcbiAqIFdpdGggcGFydHMgYnkgTWFyayBNaWxsZXJcbiAqIENvcHlyaWdodCAoQykgMjAxMSBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqL1xuICAhZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYm9vdHN0cmFwKWJvb3RzdHJhcChcInByb21pc2VcIixlKTtlbHNle3QudD1lKCl9fShmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHouYXBwbHkodCxhcmd1bWVudHMpfX1mdW5jdGlvbiBlKHQpe3JldHVybiB0PT09T2JqZWN0KHQpfWZ1bmN0aW9uIGkodCl7cmV0dXJuXCJbb2JqZWN0IFN0b3BJdGVyYXRpb25dXCI9PT1pdCh0KXx8dCBpbnN0YW5jZW9mIHF9ZnVuY3Rpb24gcih0LGUpe2lmKFUmJmUuc3RhY2smJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dCYmdC5zdGFjayYmdC5zdGFjay5pbmRleE9mKHJ0KT09PS0xKXtmb3IodmFyIGk9W10scj1lO3I7cj1yLnNvdXJjZSlyLnN0YWNrJiZpLnVuc2hpZnQoci5zdGFjayk7aS51bnNoaWZ0KHQuc3RhY2spO3ZhciBvPWkuam9pbihcIlxcblwiK3J0K1wiXFxuXCIpO3Quc3RhY2s9bihvKX19ZnVuY3Rpb24gbih0KXtmb3IodmFyIGU9dC5zcGxpdChcIlxcblwiKSxpPVtdLHI9MDtyPGUubGVuZ3RoOysrcil7dmFyIG49ZVtyXTthKG4pfHxvKG4pfHwhbnx8aS5wdXNoKG4pfXJldHVybiBpLmpvaW4oXCJcXG5cIil9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdC5pbmRleE9mKFwiKG1vZHVsZS5qczpcIikhPT0tMXx8dC5pbmRleE9mKFwiKG5vZGUuanM6XCIpIT09LTF9ZnVuY3Rpb24gcyh0KXt2YXIgZT0vYXQgLisgXFwoKC4rKTooXFxkKyk6KD86XFxkKylcXCkkLy5leGVjKHQpO2lmKGUpcmV0dXJuW2VbMV0sTnVtYmVyKGVbMl0pXTt2YXIgaT0vYXQgKFteIF0rKTooXFxkKyk6KD86XFxkKykkLy5leGVjKHQpO2lmKGkpcmV0dXJuW2lbMV0sTnVtYmVyKGlbMl0pXTt2YXIgcj0vLipAKC4rKTooXFxkKykkLy5leGVjKHQpO3JldHVybiByP1tyWzFdLE51bWJlcihyWzJdKV06dm9pZCAwfWZ1bmN0aW9uIGEodCl7dmFyIGU9cyh0KTtpZighZSlyZXR1cm4hMTt2YXIgaT1lWzBdLHI9ZVsxXTtyZXR1cm4gaT09PVEmJnI+PUomJnI8PWN0fWZ1bmN0aW9uIGMoKXtpZihVKXRyeXt0aHJvdyBuZXcgRXJyb3J9Y2F0Y2godCl7dmFyIGU9dC5zdGFjay5zcGxpdChcIlxcblwiKSxpPWVbMF0uaW5kZXhPZihcIkBcIik+MD9lWzFdOmVbMl0scj1zKGkpO2lmKCFyKXJldHVybjtyZXR1cm4gUT1yWzBdLHJbMV19fWZ1bmN0aW9uIGgodCxlLGkpe3JldHVybiBmdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybihlK1wiIGlzIGRlcHJlY2F0ZWQsIHVzZSBcIitpK1wiIGluc3RlYWQuXCIsbmV3IEVycm9yKFwiXCIpLnN0YWNrKSx0LmFwcGx5KHQsYXJndW1lbnRzKX19ZnVuY3Rpb24gcCh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGY/dDptKHQpP0ModCk6ayh0KX1mdW5jdGlvbiB1KCl7ZnVuY3Rpb24gdCh0KXtlPXQscC5sdCYmVSYmKG8uc291cmNlPXQpLCQoaSxmdW5jdGlvbihlLGkpe3AuZHQoZnVuY3Rpb24oKXt0LmZ0LmFwcGx5KHQsaSl9KX0sdm9pZCAwKSxpPXZvaWQgMCxyPXZvaWQgMH12YXIgZSxpPVtdLHI9W10sbj1aKHUucHJvdG90eXBlKSxvPVooZi5wcm90b3R5cGUpO2lmKG8uZnQ9ZnVuY3Rpb24odCxuLG8pe3ZhciBzPVcoYXJndW1lbnRzKTtpPyhpLnB1c2gocyksXCJ3aGVuXCI9PT1uJiZvWzFdJiZyLnB1c2gob1sxXSkpOnAuZHQoZnVuY3Rpb24oKXtlLmZ0LmFwcGx5KGUscyl9KX0sby52YWx1ZU9mPWZ1bmN0aW9uKCl7aWYoaSlyZXR1cm4gbzt2YXIgdD12KGUpO3JldHVybiB5KHQpJiYoZT10KSx0fSxvLmd0PWZ1bmN0aW9uKCl7cmV0dXJuIGU/ZS5ndCgpOntzdGF0ZTpcInBlbmRpbmdcIn19LHAubHQmJlUpdHJ5e3Rocm93IG5ldyBFcnJvcn1jYXRjaChzKXtvLnN0YWNrPXMuc3RhY2suc3Vic3RyaW5nKHMuc3RhY2suaW5kZXhPZihcIlxcblwiKSsxKX1yZXR1cm4gbi52dD1vLG4ucmVzb2x2ZT1mdW5jdGlvbihpKXtlfHx0KHAoaSkpfSxuLnl0PWZ1bmN0aW9uKGkpe2V8fHQoayhpKSl9LG4ucmVqZWN0PWZ1bmN0aW9uKGkpe2V8fHQoUihpKSl9LG4ubm90aWZ5PWZ1bmN0aW9uKHQpe2V8fCQocixmdW5jdGlvbihlLGkpe3AuZHQoZnVuY3Rpb24oKXtpKHQpfSl9LHZvaWQgMCl9LG59ZnVuY3Rpb24gbCh0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJyZXNvbHZlciBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO3ZhciBlPXUoKTt0cnl7dChlLnJlc29sdmUsZS5yZWplY3QsZS5ub3RpZnkpfWNhdGNoKGkpe2UucmVqZWN0KGkpfXJldHVybiBlLnZ0fWZ1bmN0aW9uIGQodCl7cmV0dXJuIGwoZnVuY3Rpb24oZSxpKXtmb3IodmFyIHI9MCxuPXQubGVuZ3RoO3I8bjtyKyspcCh0W3JdKS50aGVuKGUsaSl9KX1mdW5jdGlvbiBmKHQsZSxpKXt2b2lkIDA9PT1lJiYoZT1mdW5jdGlvbih0KXtyZXR1cm4gUihuZXcgRXJyb3IoXCJQcm9taXNlIGRvZXMgbm90IHN1cHBvcnQgb3BlcmF0aW9uOiBcIit0KSl9KSx2b2lkIDA9PT1pJiYoaT1mdW5jdGlvbigpe3JldHVybntzdGF0ZTpcInVua25vd25cIn19KTt2YXIgcj1aKGYucHJvdG90eXBlKTtpZihyLmZ0PWZ1bmN0aW9uKGksbixvKXt2YXIgczt0cnl7cz10W25dP3Rbbl0uYXBwbHkocixvKTplLmNhbGwocixuLG8pfWNhdGNoKGEpe3M9UihhKX1pJiZpKHMpfSxyLmd0PWksaSl7dmFyIG49aSgpO1wicmVqZWN0ZWRcIj09PW4uc3RhdGUmJihyLmV4Y2VwdGlvbj1uLnJlYXNvbiksci52YWx1ZU9mPWZ1bmN0aW9uKCl7dmFyIHQ9aSgpO3JldHVyblwicGVuZGluZ1wiPT09dC5zdGF0ZXx8XCJyZWplY3RlZFwiPT09dC5zdGF0ZT9yOnQudmFsdWV9fXJldHVybiByfWZ1bmN0aW9uIGcodCxlLGkscil7cmV0dXJuIHAodCkudGhlbihlLGkscil9ZnVuY3Rpb24gdih0KXtpZih5KHQpKXt2YXIgZT10Lmd0KCk7aWYoXCJmdWxmaWxsZWRcIj09PWUuc3RhdGUpcmV0dXJuIGUudmFsdWV9cmV0dXJuIHR9ZnVuY3Rpb24geSh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGZ9ZnVuY3Rpb24gbSh0KXtyZXR1cm4gZSh0KSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC50aGVufWZ1bmN0aW9uIHcodCl7cmV0dXJuIHkodCkmJlwicGVuZGluZ1wiPT09dC5ndCgpLnN0YXRlfWZ1bmN0aW9uIFQodCl7cmV0dXJuIXkodCl8fFwiZnVsZmlsbGVkXCI9PT10Lmd0KCkuc3RhdGV9ZnVuY3Rpb24gUyh0KXtyZXR1cm4geSh0KSYmXCJyZWplY3RlZFwiPT09dC5ndCgpLnN0YXRlfWZ1bmN0aW9uIGIoKXtudC5sZW5ndGg9MCxvdC5sZW5ndGg9MCxhdHx8KGF0PSEwKX1mdW5jdGlvbiBFKHQsZSl7YXQmJihcIm9iamVjdFwiPT10eXBlb2YgcHJvY2VzcyYmXCJmdW5jdGlvblwiPT10eXBlb2YgcHJvY2Vzcy5lbWl0JiZwLmR0Lnd0KGZ1bmN0aW9uKCl7WShvdCx0KSE9PS0xJiYocHJvY2Vzcy5lbWl0KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsZSx0KSxzdC5wdXNoKHQpKX0pLG90LnB1c2godCksZSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUuc3RhY2s/bnQucHVzaChlLnN0YWNrKTpudC5wdXNoKFwiKG5vIHN0YWNrKSBcIitlKSl9ZnVuY3Rpb24gSSh0KXtpZihhdCl7dmFyIGU9WShvdCx0KTtlIT09LTEmJihcIm9iamVjdFwiPT10eXBlb2YgcHJvY2VzcyYmXCJmdW5jdGlvblwiPT10eXBlb2YgcHJvY2Vzcy5lbWl0JiZwLmR0Lnd0KGZ1bmN0aW9uKCl7dmFyIGk9WShzdCx0KTtpIT09LTEmJihwcm9jZXNzLmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsbnRbZV0sdCksc3Quc3BsaWNlKGksMSkpfSksb3Quc3BsaWNlKGUsMSksbnQuc3BsaWNlKGUsMSkpfX1mdW5jdGlvbiBSKHQpe3ZhciBlPWYoe3doZW46ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJkkodGhpcyksZT9lKHQpOnRoaXN9fSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSxmdW5jdGlvbigpe3JldHVybntzdGF0ZTpcInJlamVjdGVkXCIscmVhc29uOnR9fSk7cmV0dXJuIEUoZSx0KSxlfWZ1bmN0aW9uIGsodCl7cmV0dXJuIGYoe3doZW46ZnVuY3Rpb24oKXtyZXR1cm4gdH0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSxzZXQ6ZnVuY3Rpb24oZSxpKXt0W2VdPWl9LFwiZGVsZXRlXCI6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRbZV19LFR0OmZ1bmN0aW9uKGUsaSl7cmV0dXJuIG51bGw9PT1lfHx2b2lkIDA9PT1lP3QuYXBwbHkodm9pZCAwLGkpOnRbZV0uYXBwbHkodCxpKX0sYXBwbHk6ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdC5hcHBseShlLGkpfSxrZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGV0KHQpfX0sdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJue3N0YXRlOlwiZnVsZmlsbGVkXCIsdmFsdWU6dH19KX1mdW5jdGlvbiBDKHQpe3ZhciBlPXUoKTtyZXR1cm4gcC5kdChmdW5jdGlvbigpe3RyeXt0LnRoZW4oZS5yZXNvbHZlLGUucmVqZWN0LGUubm90aWZ5KX1jYXRjaChpKXtlLnJlamVjdChpKX19KSxlLnZ0fWZ1bmN0aW9uIE8odCl7cmV0dXJuIGYoe1N0OmZ1bmN0aW9uKCl7fX0sZnVuY3Rpb24oZSxpKXtyZXR1cm4gRih0LGUsaSl9LGZ1bmN0aW9uKCl7cmV0dXJuIHAodCkuZ3QoKX0pfWZ1bmN0aW9uIFAodCxlLGkpe3JldHVybiBwKHQpLmJ0KGUsaSl9ZnVuY3Rpb24gQSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsZSl7dmFyIHM7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFN0b3BJdGVyYXRpb24pe3RyeXtzPXJbdF0oZSl9Y2F0Y2goYSl7cmV0dXJuIFIoYSl9cmV0dXJuIHMuZG9uZT9wKHMudmFsdWUpOmcocy52YWx1ZSxuLG8pfXRyeXtzPXJbdF0oZSl9Y2F0Y2goYSl7cmV0dXJuIGkoYSk/cChhLnZhbHVlKTpSKGEpfXJldHVybiBnKHMsbixvKX12YXIgcj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPWUuYmluZChlLFwibmV4dFwiKSxvPWUuYmluZChlLFwidGhyb3dcIik7cmV0dXJuIG4oKX19ZnVuY3Rpb24gTih0KXtwLmRvbmUocC5hc3luYyh0KSgpKX1mdW5jdGlvbiB4KHQpe3Rocm93IG5ldyBxKHQpfWZ1bmN0aW9uIEIodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIFAoW3RoaXMsXyhhcmd1bWVudHMpXSxmdW5jdGlvbihlLGkpe3JldHVybiB0LmFwcGx5KGUsaSl9KX19ZnVuY3Rpb24gRih0LGUsaSl7cmV0dXJuIHAodCkuRXQoZSxpKX1mdW5jdGlvbiBfKHQpe3JldHVybiBnKHQsZnVuY3Rpb24odCl7dmFyIGU9MCxpPXUoKTtyZXR1cm4gJCh0LGZ1bmN0aW9uKHIsbixvKXt2YXIgczt5KG4pJiZcImZ1bGZpbGxlZFwiPT09KHM9bi5ndCgpKS5zdGF0ZT90W29dPXMudmFsdWU6KCsrZSxnKG4sZnVuY3Rpb24ocil7dFtvXT1yLDA9PT0tLWUmJmkucmVzb2x2ZSh0KX0saS5yZWplY3QsZnVuY3Rpb24odCl7aS5ub3RpZnkoe2luZGV4Om8sdmFsdWU6dH0pfSkpfSx2b2lkIDApLDA9PT1lJiZpLnJlc29sdmUodCksaS52dH0pfWZ1bmN0aW9uIEQodCl7aWYoMD09PXQubGVuZ3RoKXJldHVybiBwLnJlc29sdmUoKTt2YXIgZT1wLmRlZmVyKCksaT0wO3JldHVybiAkKHQsZnVuY3Rpb24ocixuLG8pe2Z1bmN0aW9uIHModCl7ZS5yZXNvbHZlKHQpfWZ1bmN0aW9uIGEodCl7aS0tLDA9PT1pJiYodC5tZXNzYWdlPVwiUSBjYW4ndCBnZXQgZnVsZmlsbG1lbnQgdmFsdWUgZnJvbSBhbnkgcHJvbWlzZSwgYWxsIHByb21pc2VzIHdlcmUgcmVqZWN0ZWQuIExhc3QgZXJyb3IgbWVzc2FnZTogXCIrdC5tZXNzYWdlLGUucmVqZWN0KHQpKX1mdW5jdGlvbiBjKHQpe2Uubm90aWZ5KHtpbmRleDpvLHZhbHVlOnR9KX12YXIgaD10W29dO2krKyxnKGgscyxhLGMpfSx2b2lkIDApLGUudnR9ZnVuY3Rpb24gSCh0KXtyZXR1cm4gZyh0LGZ1bmN0aW9uKHQpe3JldHVybiB0PVgodCxwKSxnKF8oWCh0LGZ1bmN0aW9uKHQpe3JldHVybiBnKHQsSyxLKX0pKSxmdW5jdGlvbigpe3JldHVybiB0fSl9KX1mdW5jdGlvbiBMKHQpe3JldHVybiBwKHQpLkl0KCl9ZnVuY3Rpb24gTSh0LGUpe3JldHVybiBwKHQpLnRoZW4odm9pZCAwLHZvaWQgMCxlKX1mdW5jdGlvbiBqKHQsZSl7cmV0dXJuIHAodCkuUnQoZSl9dmFyIFU9ITE7dHJ5e3Rocm93IG5ldyBFcnJvcn1jYXRjaChWKXtVPSEhVi5zdGFja312YXIgUSxxLEo9YygpLEs9ZnVuY3Rpb24oKXt9LEc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7Zm9yKHZhciB0LHI7aS5uZXh0OylpPWkubmV4dCx0PWkua3QsaS5rdD12b2lkIDAscj1pLmRvbWFpbixyJiYoaS5kb21haW49dm9pZCAwLHIuZW50ZXIoKSksZSh0LHIpO2Zvcig7aC5sZW5ndGg7KXQ9aC5wb3AoKSxlKHQpO249ITF9ZnVuY3Rpb24gZShlLGkpe3RyeXtlKCl9Y2F0Y2gocil7aWYocyl0aHJvdyBpJiZpLmV4aXQoKSxzZXRUaW1lb3V0KHQsMCksaSYmaS5lbnRlcigpLHI7c2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IHJ9LDApfWkmJmkuZXhpdCgpfXZhciBpPXtrdDp2b2lkIDAsbmV4dDpudWxsfSxyPWksbj0hMSxvPXZvaWQgMCxzPSExLGE9ITE7dHJ5e2E9bmF2aWdhdG9yJiYoXCJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXJcIj09PW5hdmlnYXRvci5hcHBOYW1lfHxudWxsIT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvKHRyaWRlbnQpLitydls6XFxzXShbXFx3XFwuXSspLitsaWtlXFxzZ2Vja28vaSkpfWNhdGNoKGMpe312YXIgaD1bXTtpZihHPWZ1bmN0aW9uKHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBGcmFtZXdvcmsmJkZyYW1ld29yay5DdCgpP0ZyYW1ld29yay5zZXRUaW1lb3V0KHQsMCk6KHI9ci5uZXh0PXtrdDp0LGRvbWFpbjpzJiZwcm9jZXNzLmRvbWFpbixuZXh0Om51bGx9LG58fChuPSEwLG8oKSkpfSxcIm9iamVjdFwiPT10eXBlb2YgcHJvY2VzcyYmXCJbb2JqZWN0IHByb2Nlc3NdXCI9PT1wcm9jZXNzLnRvU3RyaW5nKCkmJnByb2Nlc3MuZHQpcz0hMCxvPWZ1bmN0aW9uKCl7cHJvY2Vzcy5kdCh0KX07ZWxzZSBpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBzZXRJbW1lZGlhdGV8fGEpaWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIE1lc3NhZ2VDaGFubmVsfHxhKW89ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHQsMCl9O2Vsc2V7dmFyIHA9bmV3IE1lc3NhZ2VDaGFubmVsO3AucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKCl7bz11LHAucG9ydDEub25tZXNzYWdlPXQsdCgpfTt2YXIgdT1mdW5jdGlvbigpe3AucG9ydDIucG9zdE1lc3NhZ2UoMCl9O289ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHQsMCksdSgpfX1lbHNlIG89XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz9zZXRJbW1lZGlhdGUuYmluZCh3aW5kb3csdCk6ZnVuY3Rpb24oKXtzZXRJbW1lZGlhdGUodCl9O3JldHVybiBHLnd0PWZ1bmN0aW9uKHQpe2gucHVzaCh0KSxufHwobj0hMCxvKCkpfSxHfSgpLHo9RnVuY3Rpb24uY2FsbCxXPXQoQXJyYXkucHJvdG90eXBlLnNsaWNlKSwkPXQoQXJyYXkucHJvdG90eXBlLnJlZHVjZXx8ZnVuY3Rpb24odCxlKXt2YXIgaT0wLHI9dGhpcy5sZW5ndGg7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKDs7KXtpZihpIGluIHRoaXMpe2U9dGhpc1tpKytdO2JyZWFrfWlmKCsraT49cil0aHJvdyBuZXcgVHlwZUVycm9yfWZvcig7aTxyO2krKylpIGluIHRoaXMmJihlPXQoZSx0aGlzW2ldLGkpKTtyZXR1cm4gZX0pLFk9dChBcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmxlbmd0aDtlKyspaWYodGhpc1tlXT09PXQpcmV0dXJuIGU7cmV0dXJuLTF9KSxYPXQoQXJyYXkucHJvdG90eXBlLm1hcHx8ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLHI9W107cmV0dXJuICQoaSxmdW5jdGlvbihuLG8scyl7ci5wdXNoKHQuY2FsbChlLG8scyxpKSl9LHZvaWQgMCkscn0pLFo9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5wcm90b3R5cGU9dCxuZXcgZX0sdHQ9dChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KSxldD1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciBpIGluIHQpdHQodCxpKSYmZS5wdXNoKGkpO3JldHVybiBlfSxpdD10KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpO3E9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFJldHVyblZhbHVlP1JldHVyblZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMudmFsdWU9dH07dmFyIHJ0PVwiRnJvbSBwcmV2aW91cyBldmVudDpcIjtwLnJlc29sdmU9cCxwLmR0PUcscC5sdD0hMSxcIm9iamVjdFwiPT10eXBlb2YgcHJvY2VzcyYmcHJvY2VzcyYmcHJvY2Vzcy5PdCYmcHJvY2Vzcy5PdC5RX0RFQlVHJiYocC5sdD0hMCkscC5kZWZlcj11LHUucHJvdG90eXBlLlB0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gZnVuY3Rpb24oZSxpKXtlP3QucmVqZWN0KGUpOmFyZ3VtZW50cy5sZW5ndGg+Mj90LnJlc29sdmUoVyhhcmd1bWVudHMsMSkpOnQucmVzb2x2ZShpKX19LHAuUHJvbWlzZT1sLHAudnQ9bCxsLnJhY2U9ZCxsLmFsbD1fLGwucmVqZWN0PVIsbC5yZXNvbHZlPXAscC5BdD1mdW5jdGlvbih0KXtyZXR1cm4gdH0sZi5wcm90b3R5cGUuQXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30scC5qb2luPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHAodCkuam9pbihlKX0sZi5wcm90b3R5cGUuam9pbj1mdW5jdGlvbih0KXtyZXR1cm4gcChbdGhpcyx0XSkuYnQoZnVuY3Rpb24odCxlKXtpZih0PT09ZSlyZXR1cm4gdDt0aHJvdyBuZXcgRXJyb3IoXCJRIGNhbid0IGpvaW46IG5vdCB0aGUgc2FtZTogXCIrdCtcIiBcIitlKX0pfSxwLnJhY2U9ZCxmLnByb3RvdHlwZS5yYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhlbihwLnJhY2UpfSxwLk50PWYsZi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIltvYmplY3QgUHJvbWlzZV1cIn0sZi5wcm90b3R5cGUudGhlbj1mdW5jdGlvbih0LGUsaSl7ZnVuY3Rpb24gbihlKXt0cnl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdD90KGUpOmV9Y2F0Y2goaSl7cmV0dXJuIFIoaSl9fWZ1bmN0aW9uIG8odCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZSl7cih0LGEpO3RyeXtyZXR1cm4gZSh0KX1jYXRjaChpKXtyZXR1cm4gUihpKX19cmV0dXJuIFIodCl9ZnVuY3Rpb24gcyh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kodCk6dH12YXIgYT10aGlzLGM9dSgpLGg9ITE7cmV0dXJuIHAuZHQoZnVuY3Rpb24oKXthLmZ0KGZ1bmN0aW9uKHQpe2h8fChoPSEwLGMucmVzb2x2ZShuKHQpKSl9LFwid2hlblwiLFtmdW5jdGlvbih0KXtofHwoaD0hMCxjLnJlc29sdmUobyh0KSkpfV0pfSksYS5mdCh2b2lkIDAsXCJ3aGVuXCIsW3ZvaWQgMCxmdW5jdGlvbih0KXt2YXIgZSxpPSExO3RyeXtlPXModCl9Y2F0Y2gocil7aWYoaT0hMCwhcC5vbmVycm9yKXRocm93IHI7cC5vbmVycm9yKHIpfWl8fGMubm90aWZ5KGUpfV0pLGMudnR9LHAueHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gcCh0KS54dChlKX0sZi5wcm90b3R5cGUueHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9cCh0KSx0aGlzLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQuRnQoZSkuQnQoZSl9KX0scC53aGVuPWcsZi5wcm90b3R5cGUuQnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbigpe3JldHVybiB0fSl9LHAuQnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gcCh0KS5CdChlKX0sZi5wcm90b3R5cGUuX3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbigpe3Rocm93IHR9KX0scC5fdD1mdW5jdGlvbih0LGUpe3JldHVybiBwKHQpLl90KGUpfSxwLkR0PXYscC5IdD15LHAuTHQ9bSxwLk10PXcsZi5wcm90b3R5cGUuTXQ9ZnVuY3Rpb24oKXtyZXR1cm5cInBlbmRpbmdcIj09PXRoaXMuZ3QoKS5zdGF0ZX0scC5qdD1ULGYucHJvdG90eXBlLmp0PWZ1bmN0aW9uKCl7cmV0dXJuXCJmdWxmaWxsZWRcIj09PXRoaXMuZ3QoKS5zdGF0ZX0scC5VdD1TLGYucHJvdG90eXBlLlV0PWZ1bmN0aW9uKCl7cmV0dXJuXCJyZWplY3RlZFwiPT09dGhpcy5ndCgpLnN0YXRlfTt2YXIgbnQ9W10sb3Q9W10sc3Q9W10sYXQ9ITA7cC5WdD1iLHAuUXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnQuc2xpY2UoKX0scC5xdD1mdW5jdGlvbigpe2IoKSxhdD0hMX0sYigpLHAucmVqZWN0PVIscC55dD1rLHAuSnQ9TyxwLmJ0PVAsZi5wcm90b3R5cGUuYnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hbGwoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LmFwcGx5KHZvaWQgMCxlKX0sZSl9LHAuYXN5bmM9QSxwLkt0PU4scFtcIkd0XCJdPXgscC56dD1CLHAuRXQ9RixmLnByb3RvdHlwZS5FdD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMscj11KCk7cmV0dXJuIHAuZHQoZnVuY3Rpb24oKXtpLmZ0KHIucmVzb2x2ZSx0LGUpfSksci52dH0scC5nZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gcCh0KS5FdChcImdldFwiLFtlXSl9LGYucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5FdChcImdldFwiLFt0XSl9LHAuc2V0PWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gcCh0KS5FdChcInNldFwiLFtlLGldKX0sZi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuRXQoXCJzZXRcIixbdCxlXSl9LHAuV3Q9cFtcImRlbGV0ZVwiXT1mdW5jdGlvbih0LGUpe3JldHVybiBwKHQpLkV0KFwiZGVsZXRlXCIsW2VdKX0sZi5wcm90b3R5cGUuV3Q9Zi5wcm90b3R5cGVbXCJkZWxldGVcIl09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuRXQoXCJkZWxldGVcIixbdF0pfSxwLiR0PXAuVHQ9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBwKHQpLkV0KFwicG9zdFwiLFtlLGldKX0sZi5wcm90b3R5cGUuJHQ9Zi5wcm90b3R5cGUuVHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5FdChcInBvc3RcIixbdCxlXSl9LHAuc2VuZD1wLll0PXAuWHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gcCh0KS5FdChcInBvc3RcIixbZSxXKGFyZ3VtZW50cywyKV0pfSxmLnByb3RvdHlwZS5zZW5kPWYucHJvdG90eXBlLll0PWYucHJvdG90eXBlLlh0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkV0KFwicG9zdFwiLFt0LFcoYXJndW1lbnRzLDEpXSl9LHAuWnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gcCh0KS5FdChcImFwcGx5XCIsW3ZvaWQgMCxlXSl9LGYucHJvdG90eXBlLlp0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkV0KFwiYXBwbHlcIixbdm9pZCAwLHRdKX0scFtcInRlXCJdPXAuRnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHAodCkuRXQoXCJhcHBseVwiLFt2b2lkIDAsVyhhcmd1bWVudHMsMSldKX0sZi5wcm90b3R5cGUuRnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5FdChcImFwcGx5XCIsW3ZvaWQgMCxXKGFyZ3VtZW50cyldKX0scC5lZT1mdW5jdGlvbih0KXt2YXIgZT1wKHQpLGk9Vyhhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuRXQoXCJhcHBseVwiLFt0aGlzLGkuY29uY2F0KFcoYXJndW1lbnRzKSldKX19LGYucHJvdG90eXBlLmVlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPVcoYXJndW1lbnRzKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5FdChcImFwcGx5XCIsW3RoaXMsZS5jb25jYXQoVyhhcmd1bWVudHMpKV0pfX0scC5rZXlzPWZ1bmN0aW9uKHQpe3JldHVybiBwKHQpLkV0KFwia2V5c1wiLFtdKX0sZi5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkV0KFwia2V5c1wiLFtdKX0scC5hbGw9XyxmLnByb3RvdHlwZS5hbGw9ZnVuY3Rpb24oKXtyZXR1cm4gXyh0aGlzKX0scC5pZT1ELGYucHJvdG90eXBlLmllPWZ1bmN0aW9uKCl7cmV0dXJuIEQodGhpcyl9LHAucmU9aChILFwiYWxsUmVzb2x2ZWRcIixcImFsbFNldHRsZWRcIiksZi5wcm90b3R5cGUucmU9ZnVuY3Rpb24oKXtyZXR1cm4gSCh0aGlzKX0scC5JdD1MLGYucHJvdG90eXBlLkl0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gXyhYKHQsZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0Lmd0KCl9cmV0dXJuIHQ9cCh0KSx0LnRoZW4oZSxlKX0pKX0pfSxwLmZhaWw9cFtcImNhdGNoXCJdPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHAodCkudGhlbih2b2lkIDAsZSl9LGYucHJvdG90eXBlLmZhaWw9Zi5wcm90b3R5cGVbXCJjYXRjaFwiXT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCx0KX0scC5wcm9ncmVzcz1NLGYucHJvdG90eXBlLnByb2dyZXNzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLHZvaWQgMCx0KX0scC5uZT1wW1wiZmluYWxseVwiXT1mdW5jdGlvbih0LGUpe3JldHVybiBwKHQpW1wiZmluYWxseVwiXShlKX0sZi5wcm90b3R5cGUubmU9Zi5wcm90b3R5cGVbXCJmaW5hbGx5XCJdPWZ1bmN0aW9uKHQpe2lmKCF0fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LmFwcGx5KXRocm93IG5ldyBFcnJvcihcIlEgY2FuJ3QgYXBwbHkgZmluYWxseSBjYWxsYmFja1wiKTtyZXR1cm4gdD1wKHQpLHRoaXMudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5GdCgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZX0pfSxmdW5jdGlvbihlKXtyZXR1cm4gdC5GdCgpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBlfSl9KX0scC5kb25lPWZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybiBwKHQpLmRvbmUoZSxpLHIpfSxmLnByb3RvdHlwZS5kb25lPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1mdW5jdGlvbih0KXtwLmR0KGZ1bmN0aW9uKCl7aWYocih0LG8pLCFwLm9uZXJyb3IpdGhyb3cgdDtwLm9uZXJyb3IodCl9KX0sbz10fHxlfHxpP3RoaXMudGhlbih0LGUsaSk6dGhpcztcIm9iamVjdFwiPT10eXBlb2YgcHJvY2VzcyYmcHJvY2VzcyYmcHJvY2Vzcy5kb21haW4mJihuPXByb2Nlc3MuZG9tYWluLmJpbmQobikpLG8udGhlbih2b2lkIDAsbil9LHAudGltZW91dD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHAodCkudGltZW91dChlLGkpfSxmLnByb3RvdHlwZS50aW1lb3V0PWZ1bmN0aW9uKHQsZSl7dmFyIGk9dSgpLHI9c2V0VGltZW91dChmdW5jdGlvbigpe2UmJlwic3RyaW5nXCIhPXR5cGVvZiBlfHwoZT1uZXcgRXJyb3IoZXx8XCJUaW1lZCBvdXQgYWZ0ZXIgXCIrdCtcIiBtc1wiKSxlLmNvZGU9XCJFVElNRURPVVRcIiksaS5yZWplY3QoZSl9LHQpO3JldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KHIpLGkucmVzb2x2ZSh0KX0sZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KHIpLGkucmVqZWN0KHQpfSxpLm5vdGlmeSksaS52dH0scC5kZWxheT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT10LHQ9dm9pZCAwKSxwKHQpLmRlbGF5KGUpfSxmLnByb3RvdHlwZS5kZWxheT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGUpe3ZhciBpPXUoKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2kucmVzb2x2ZShlKX0sdCksaS52dH0pfSxwLm9lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHAodCkub2UoZSl9LGYucHJvdG90eXBlLm9lPWZ1bmN0aW9uKHQpe3ZhciBlPXUoKSxpPVcodCk7cmV0dXJuIGkucHVzaChlLlB0KCkpLHRoaXMuWnQoaSkuZmFpbChlLnJlamVjdCksZS52dH0scC5zZT1mdW5jdGlvbih0KXt2YXIgZT1XKGFyZ3VtZW50cywxKTtyZXR1cm4gcCh0KS5vZShlKX0sZi5wcm90b3R5cGUuc2U9ZnVuY3Rpb24oKXt2YXIgdD1XKGFyZ3VtZW50cyksZT11KCk7cmV0dXJuIHQucHVzaChlLlB0KCkpLHRoaXMuWnQodCkuZmFpbChlLnJlamVjdCksZS52dH0scC5hZT1wLmNlPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IEVycm9yKFwiUSBjYW4ndCB3cmFwIGFuIHVuZGVmaW5lZCBmdW5jdGlvblwiKTt2YXIgZT1XKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaT1lLmNvbmNhdChXKGFyZ3VtZW50cykpLHI9dSgpO3JldHVybiBpLnB1c2goci5QdCgpKSxwKHQpLlp0KGkpLmZhaWwoci5yZWplY3QpLHIudnR9fSxmLnByb3RvdHlwZS5hZT1mLnByb3RvdHlwZS5jZT1mdW5jdGlvbigpe3ZhciB0PVcoYXJndW1lbnRzKTtyZXR1cm4gdC51bnNoaWZ0KHRoaXMpLHAuY2UuYXBwbHkodm9pZCAwLHQpfSxwLmhlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9Vyhhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX12YXIgbj1pLmNvbmNhdChXKGFyZ3VtZW50cykpLG89dSgpO3JldHVybiBuLnB1c2goby5QdCgpKSxwKHIpLlp0KG4pLmZhaWwoby5yZWplY3QpLG8udnR9fSxmLnByb3RvdHlwZS5oZT1mdW5jdGlvbigpe3ZhciB0PVcoYXJndW1lbnRzLDApO3JldHVybiB0LnVuc2hpZnQodGhpcykscC5oZS5hcHBseSh2b2lkIDAsdCl9LHAucGU9cC51ZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHAodCkudWUoZSxpKX0sZi5wcm90b3R5cGUucGU9Zi5wcm90b3R5cGUudWU9ZnVuY3Rpb24odCxlKXt2YXIgaT1XKGV8fFtdKSxyPXUoKTtyZXR1cm4gaS5wdXNoKHIuUHQoKSksdGhpcy5FdChcInBvc3RcIixbdCxpXSkuZmFpbChyLnJlamVjdCksci52dH0scC5sZT1wLmRlPXAuZmU9ZnVuY3Rpb24odCxlKXt2YXIgaT1XKGFyZ3VtZW50cywyKSxyPXUoKTtyZXR1cm4gaS5wdXNoKHIuUHQoKSkscCh0KS5FdChcInBvc3RcIixbZSxpXSkuZmFpbChyLnJlamVjdCksci52dH0sZi5wcm90b3R5cGUubGU9Zi5wcm90b3R5cGUuZGU9Zi5wcm90b3R5cGUuZmU9ZnVuY3Rpb24odCl7dmFyIGU9Vyhhcmd1bWVudHMsMSksaT11KCk7cmV0dXJuIGUucHVzaChpLlB0KCkpLHRoaXMuRXQoXCJwb3N0XCIsW3QsZV0pLmZhaWwoaS5yZWplY3QpLGkudnR9LHAuUnQ9aixmLnByb3RvdHlwZS5SdD1mdW5jdGlvbih0KXtyZXR1cm4gdD92b2lkIHRoaXMudGhlbihmdW5jdGlvbihlKXtwLmR0KGZ1bmN0aW9uKCl7dChudWxsLGUpfSl9LGZ1bmN0aW9uKGUpe3AuZHQoZnVuY3Rpb24oKXt0KGUpfSl9KTp0aGlzfSxwLmdlPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiUS5ub0NvbmZsaWN0IG9ubHkgd29ya3Mgd2hlbiBRIGlzIHVzZWQgYXMgYSBnbG9iYWxcIil9O3ZhciBjdD1jKCk7cmV0dXJuIHB9KX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciByLG49aSgxNSksbz1pKDQpLHM9by52ZTshZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtCJiZjb25zb2xlLmxvZyhcIkZyYW1ld29yayBhbHJlYWR5IGluaXRpYWxpemVkXCIpLHQueWUoKSxOPW5ldyBEYXRlLGUuYXBwbHkoRCksQj1ELnJlc29sdmUoay5tZSksXz1ELnJlc29sdmUoay53ZSksTD1CLkN0KCl9ZnVuY3Rpb24gaSgpe0Y9RC5yZXNvbHZlKGsuVGUpLEYuaW5pdCgpfWZ1bmN0aW9uIHIoKXtyZXR1cm4gRn1mdW5jdGlvbiBvKCl7cmV0dXJuIER9ZnVuY3Rpb24gYSgpe3JldHVybiBffWZ1bmN0aW9uIGMoKXtyZXR1cm4gQn1mdW5jdGlvbiBoKHQpe3JldHVybiBILmdldCh0KX1mdW5jdGlvbiBwKHQsZSl7dmFyIGk9bmV3IEModCk7cmV0dXJuIGkuYXBwbHkoZSksSC5zZXQodCxpKSxpfWZ1bmN0aW9uIHUoZSl7QT10LlNlKGUpfWZ1bmN0aW9uIGwodCl7cmV0dXJuIG51bGwhPUE/QS5jb250ZXh0LnJlc29sdmUodCk6KGNvbnNvbGUud2FybihcInVuZGVmaW5lZCBjb250ZXh0XCIpLG51bGwpfWZ1bmN0aW9uIGQoKXtyZXR1cm4gQX1mdW5jdGlvbiBmKCl7cmV0dXJuIEIudGltZSgpfWZ1bmN0aW9uIGcodCxlKXtyZXR1cm4gQi5zZXRUaW1lb3V0KHQsZSl9ZnVuY3Rpb24gdih0KXtyZXR1cm4gQi5jbGVhclRpbWVvdXQodCl9ZnVuY3Rpb24geSh0LGUpe3JldHVybiBCLnNldEludGVydmFsKHQsZSl9ZnVuY3Rpb24gbSh0KXtyZXR1cm4gQi5jbGVhckludGVydmFsKHQpfWZ1bmN0aW9uIHcoKXtCLmJlKCl9ZnVuY3Rpb24gVCgpe0QuRWUoKSxEPW5ldyBuLkllLEg9bmV3IHMsQT1udWxsLE49bnVsbCxMPSExLHg9bnVsbCxCPW51bGwsRj1udWxsLF89bnVsbH1mdW5jdGlvbiBTKHQpe3g9dH1mdW5jdGlvbiBiKCl7cmV0dXJuIHh8fCh4PShuZXcgRGF0ZSkuZ2V0VGltZSgpKSx4PSg5MzAxKngrNDkyOTcpJTIzMzI4MCx4LzIzMzI4MH1mdW5jdGlvbiBFKCl7cmV0dXJuIE59ZnVuY3Rpb24gSSgpe3JldHVybiBMfXZhciBSPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdH0oKTtSLlJlPVwid3M6Ly8xMjcuMC4wLjE6ODAwMC9oaXZlXCIsdC5rZT1SO3ZhciBrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdH0oKTtrLm1lPVwiVGltZXJTY2hlZHVsZXJcIixrLkNlPVwiaWRlbnRpdHlQcm92aWRlclwiLGsuVGU9XCJOZXR3b3JrQ29tcG9uZW50XCIsay5PZT1cInJ0Y01hbmFnZXJcIixrLlBlPVwidHJhbnNwb3J0XCIsay5BZT1cImh0dHBNYW5hZ2VyXCIsay5OZT1cImh0dHBSZXF1ZXN0XCIsay53ZT1cImxvZ2dlclwiLGsueGU9XCJzZXJ2ZXJNYW5hZ2VyXCIsay5CZT1cInNlcnZpY2VzQ2xpZW50XCIsdC5GZT1rO3ZhciBDPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmlkPXQsdGhpcy5jb250ZXh0PW5ldyBuLkllfXJldHVybiB0LnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXt0LmFwcGx5KHRoaXMuY29udGV4dCl9LHR9KCk7dC5fZT1DO3ZhciBPOyFmdW5jdGlvbih0KXt0W3QuRGU9MF09XCJIVFRQXCIsdFt0LkhlPTFdPVwiUlRDXCIsdFt0LkxlPTJdPVwiVURQXCJ9KE89dC5NZXx8KHQuTWU9e30pKTt2YXIgUDshZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSgpe3JldHVyblwiW1wiK2YoKStcIl0gW1wiK3QuamUoKS5pZCtcIl1cIn1lLlVlPWl9KFA9dC5WZXx8KHQuVmU9e30pKTt2YXIgQSxOLHgsQixGLF8sRD1uZXcgbi5JZSxIPW5ldyBzLEw9ITE7dC5RZT1lLHQucWU9aSx0LkplPXIsdC5zeXN0ZW09byx0Lm09YSx0LktlPWMsdC5TZT1oLHQuR2U9cCx0LnplPXUsdC5yZXNvbHZlPWwsdC5qZT1kLHQudGltZT1mLHQuc2V0VGltZW91dD1nLHQuY2xlYXJUaW1lb3V0PXYsdC5zZXRJbnRlcnZhbD15LHQuY2xlYXJJbnRlcnZhbD1tLHQuYmU9dyx0LnllPVQsdC5XZT1TLHQucmFuZG9tPWIsdC4kZT1FLHQuQ3Q9SX0ocj1lLkZyYW1ld29ya3x8KGUuRnJhbWV3b3JrPXt9KSksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCYmKGdsb2JhbC5GcmFtZXdvcms9cil9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ITAscj17WWU6ZnVuY3Rpb24odCl7cmV0dXJuXCJib29sZWFuXCIhPXR5cGVvZiB0P25ldyBFcnJvcihcIkFyZ3VtZW50IHR5cGU6IFwiK3R5cGVvZiB0K1wiLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi5cIik6KGk9dCx0P1wiYWRhcHRlci5qcyBsb2dnaW5nIGRpc2FibGVkXCI6XCJhZGFwdGVyLmpzIGxvZ2dpbmcgZW5hYmxlZFwiKX0sbG9nOmZ1bmN0aW9uKCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyl7aWYoaSlyZXR1cm47XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGNvbnNvbGUubG9nJiZjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9fSxYZTpmdW5jdGlvbih0LGUsaSl7dmFyIHI9dC5tYXRjaChlKTtyZXR1cm4gciYmci5sZW5ndGg+PWkmJnBhcnNlSW50KHJbaV0sMTApfSxaZTpmdW5jdGlvbigpe3ZhciB0PXt9O2lmKHQudGk9bnVsbCx0LnZlcnNpb249bnVsbCxcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93fHwhd2luZG93Lm5hdmlnYXRvcilyZXR1cm4gdC50aT1cIk5vdCBhIGJyb3dzZXIuXCIsdDtpZihuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKXQudGk9XCJmaXJlZm94XCIsdC52ZXJzaW9uPXRoaXMuWGUobmF2aWdhdG9yLnVzZXJBZ2VudCwvRmlyZWZveFxcLyhcXGQrKVxcLi8sMSk7ZWxzZSBpZihuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKWlmKHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbil0LnRpPVwiY2hyb21lXCIsdC52ZXJzaW9uPXRoaXMuWGUobmF2aWdhdG9yLnVzZXJBZ2VudCwvQ2hyb20oZXxpdW0pXFwvKFxcZCspXFwuLywyKTtlbHNle2lmKCFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9WZXJzaW9uXFwvKFxcZCspLihcXGQrKS8pKXJldHVybiB0LnRpPVwiVW5zdXBwb3J0ZWQgd2Via2l0LWJhc2VkIGJyb3dzZXIgd2l0aCBHVU0gc3VwcG9ydCBidXQgbm8gV2ViUlRDIHN1cHBvcnQuXCIsdDt0LnRpPVwic2FmYXJpXCIsdC52ZXJzaW9uPXRoaXMuWGUobmF2aWdhdG9yLnVzZXJBZ2VudCwvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vLDEpfWVsc2UgaWYobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRWRnZVxcLyhcXGQrKS4oXFxkKykkLykpdC50aT1cImVkZ2VcIix0LnZlcnNpb249dGhpcy5YZShuYXZpZ2F0b3IudXNlckFnZW50LC9FZGdlXFwvKFxcZCspLihcXGQrKSQvLDIpO2Vsc2V7aWYoIW5hdmlnYXRvci5tZWRpYURldmljZXN8fCFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8pKXJldHVybiB0LnRpPVwiTm90IGEgc3VwcG9ydGVkIGJyb3dzZXIuXCIsdDt0LnRpPVwic2FmYXJpXCIsdC52ZXJzaW9uPXRoaXMuWGUobmF2aWdhdG9yLnVzZXJBZ2VudCwvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vLDEpfXJldHVybiB0fSxlaTpmdW5jdGlvbigpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5IVE1MTWVkaWFFbGVtZW50JiZcInNyY09iamVjdFwiaW4gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlKXt2YXIgdD1VUkwuY3JlYXRlT2JqZWN0VVJMLmJpbmQoVVJMKSxlPVVSTC5yZXZva2VPYmplY3RVUkwuYmluZChVUkwpLGk9bmV3IE1hcCxyPTA7VVJMLmNyZWF0ZU9iamVjdFVSTD1mdW5jdGlvbihlKXtpZihcImdldFRyYWNrc1wiaW4gZSl7dmFyIG49XCJwb2x5YmxvYjpcIisgKytyO3JldHVybiBpLnNldChuLGUpLGNvbnNvbGUubG9nKFwiVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pIGlzIGRlcHJlY2F0ZWQhIFVzZSBlbGVtLnNyY09iamVjdCA9IHN0cmVhbSBpbnN0ZWFkIVwiKSxufXJldHVybiB0KGUpfSxVUkwucmV2b2tlT2JqZWN0VVJMPWZ1bmN0aW9uKHQpe2UodCksaVtcImRlbGV0ZVwiXSh0KX07dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsXCJzcmNcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSxcInNyY1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXQuYXBwbHkodGhpcyl9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5paT1pLmdldCh0KXx8bnVsbCxuLnNldC5hcHBseSh0aGlzLFt0XSl9fSk7dmFyIG89SFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlO0hUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZT1mdW5jdGlvbigpe3JldHVybiAyPT09YXJndW1lbnRzLmxlbmd0aCYmXCJzcmNcIj09PShcIlwiK2FyZ3VtZW50c1swXSkudG9Mb3dlckNhc2UoKSYmKHRoaXMuaWk9aS5nZXQoYXJndW1lbnRzWzFdKXx8bnVsbCksby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX19O3QudD17bG9nOnIubG9nLFllOnIuWWUscmk6ci5aZSgpLFhlOnIuWGUsZWk6ci5laSxaZTpyLlplLmJpbmQocil9fSxmdW5jdGlvbih0LGUsaSl7dmFyIHI9aSgzMik7dC50PXt2ZTpyLk1hcCxuaTpyLm5pLG9pOnIub2l9fSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3ZhciBpOyFmdW5jdGlvbih0KXt0LnNpPVwic3RhdHNDbGllbnRcIix0LkJlPVwic2VydmljZXNDbGllbnRcIix0LmFpPVwidGlja2V0UmVzb2x2ZXJcIix0LkNlPVwiaWRlbnRpdHlQcm92aWRlclwiLHQuY2k9XCJjb25uSW5mb1Byb3ZpZGVyXCIsdC5oaT1cInBlZXJJbmZvXCIsdC5waT1cInN0cmVhbUluZm9Qcm92aWRlclwiLHQudWk9XCJyZXBvcnRpbmdcIix0LmxpPVwic3RhdHNTdG9yZVwiLHQuZGk9XCJ0cmFja01hbmFnZXJcIix0LmZpPVwidHJhY2tDbGllbnRcIn0oaT1lLmdpfHwoZS5naT17fSkpfSxmdW5jdGlvbih0LGUpe3QudD1mdW5jdGlvbigpe3JldHVybiBuZXcgRnVuY3Rpb259fSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe2Z1bmN0aW9uIGkoKXtyZXR1cm4gdCgpP3ZvaWQgdi53aGVuKGUoKSxpLHIucmVqZWN0KTpyLnJlc29sdmUoITApfXZhciByPXYuZGVmZXIoKTtyZXR1cm4gdi5kdChpKSxyLnZ0fWZ1bmN0aW9uIG4odCxlLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT0hMCksbyhcIkdFVFwiLHQsZSxpKX1mdW5jdGlvbiBvKHQsZSxpLHIpe3ZvaWQgMD09PXImJihyPSEwKTt2YXIgbj12LmRlZmVyKCk7dHJ5e3ZhciBvPW5ldyBYTUxIdHRwUmVxdWVzdDtvLm9wZW4odCxlLHIpLHZvaWQgMCE9aSYmbnVsbCE9aSYmby5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsaSksby5vbmxvYWQ9ZnVuY3Rpb24oKXsyMDA9PW8uc3RhdHVzP24ucmVzb2x2ZShvLnJlc3BvbnNlKTpuLnJlamVjdCh7c3RhdHVzOm8uc3RhdHVzLHJlYXNvbjpvLnN0YXR1c1RleHQsYm9keTpvLnJlc3BvbnNlVGV4dH0pfSxvLm9uZXJyb3I9ZnVuY3Rpb24odCl7bi5yZWplY3Qoe3N0YXR1czotMSxyZWFzb246XCJOZXR3b3JrIEVycm9yXCJ9KX0sby5zZW5kKCl9Y2F0Y2gocyl7bi5yZWplY3Qoe3N0YXR1czotMSxyZWFzb246c30pfXJldHVybiBuLnZ0fWZ1bmN0aW9uIHModCxlLGkscil7dm9pZCAwPT09ciYmKHI9ITApO3ZhciBuPXYuZGVmZXIoKTt0cnl7dmFyIG89bmV3IFhNTEh0dHBSZXF1ZXN0O28ub3BlbihcIlBPU1RcIix0LHIpLHZvaWQgMCE9aSYmbnVsbCE9aSYmby5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsaSksby5vbmxvYWQ9ZnVuY3Rpb24oKXsyMDA9PW8uc3RhdHVzP24ucmVzb2x2ZShvLnJlc3BvbnNlKTpuLnJlamVjdCh7c3RhdHVzOm8uc3RhdHVzLHJlYXNvbjpvLnN0YXR1c1RleHR9KX0sby5vbmVycm9yPWZ1bmN0aW9uKHQpe24ucmVqZWN0KHtzdGF0dXM6LTEscmVhc29uOlwiTmV0d29yayBFcnJvclwifSl9LG8uc2VuZChlKX1jYXRjaChzKXtuLnJlamVjdCh7c3RhdHVzOi0xLHJlYXNvbjpzfSl9cmV0dXJuIG4udnR9ZnVuY3Rpb24gYSh0LGUpe3ZhciBpLHIsbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYmFzZVwiKSxvPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIpLHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksYT1uO3JldHVybiBuP2k9bi5ocmVmOmE9by5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYmFzZVwiKSksYS5ocmVmPXQscy5ocmVmPWUscj1zLmhyZWYsbj9uLmhyZWY9aTpvLnJlbW92ZUNoaWxkKGEpLHJ9ZnVuY3Rpb24gYygpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtmb3IodmFyIGk9dFswXSxyPTE7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPW5ldyBSZWdFeHAoXCJcXFxce1wiKyhyLTEpK1wiXFxcXH1cIixcImdtXCIpO2k9aS5yZXBsYWNlKG4sdFtyXSl9cmV0dXJuIGl9ZnVuY3Rpb24gaCh0LGUpe2Zvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJmUuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pfWZ1bmN0aW9uIHAodCxlLGkpe3ZhciByPWcodCkudmkoITApO2Zvcih2YXIgbiBpbiByKXRyeXtpZihyLmhhc093blByb3BlcnR5KG4pJiZlLmhhc093blByb3BlcnR5KG4pJiZpLmhhc093blByb3BlcnR5KGVbbl0pKXt2YXIgbz1lW25dLHM9cltuXTtpW29dPXUocyxpW29dKX19Y2F0Y2goYSl7fX1mdW5jdGlvbiB1KHQsZSl7dmFyIGk7c3dpdGNoKHR5cGVvZiBlKXtjYXNlXCJudW1iZXJcIjppPXBhcnNlSW50KHQpO2JyZWFrO2Nhc2VcImJvb2xlYW5cIjppPVwidHJ1ZVwiPT09dDticmVhaztkZWZhdWx0Omk9dH1yZXR1cm4gaX1mdW5jdGlvbiBsKHQsZSxpKXt2YXIgcj1uZXcgbTtyZXR1cm4gci50aWNrZXRVcmw9dCxyLmNvZGU9ZSxyLm1lc3NhZ2U9dyhlKSxyLmRldGFpbGVkTWVzc2FnZT1pLHJ9dmFyIGQ9aSg0KSxmPWQudmUsZz1pKDIxKSx2PWkoMSkseT1pKDE3KSxtPXkucHQuSGl2ZVNlc3Npb25FcnJvcix3PXkucHQuZ2V0SGl2ZVNlc3Npb25FcnJvck1lc3NhZ2UsVD15LnB0LkhpdmVTZXNzaW9uLFM9aSgyNiksYj1pKDQ2KSxFPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpZighZSl7aWYoMD09T2JqZWN0LmtleXModC5tYXBwaW5nKS5sZW5ndGgmJiF0LnlpKXJldHVybiBjb25zb2xlLmVycm9yKFwibm8gcmVnaXN0ZXJlZCBkZWZhdWx0IEhpdmVSZXF1ZXN0RmFjdG9yeSB0ZWNoXCIpLHQueWk9ITAsdC5taSgpO2U9T2JqZWN0LmtleXModC5tYXBwaW5nKVswXX1pZighKGUgaW4gdC5tYXBwaW5nKSlyZXR1cm4gdC55aXx8KGNvbnNvbGUuZXJyb3IoXCJubyByZWdpc3RlcmVkIEhpdmVSZXF1ZXN0RmFjdG9yeSB0ZWNoIGZvciAgXCIrZSksdC55aT0hMCksdC5taSgpO3ZhciBpPXQubWFwcGluZ1tlXTtzd2l0Y2goaS50ZWNoKXtjYXNlXCJIaXZlSlNcIjpyZXR1cm4gdC5taSgpO2Nhc2VcIkhpdmVKc1Byb3h5XCI6cmV0dXJuIGkud2k/bmV3IFMuVGkoZSk6KGkud2k9ITAsbmV3IGIuU2koZSkpO2Nhc2VcIkhpdmVKYXZhXCI6Y2FzZVwiU3RhdHNKU1wiOnJldHVybiB0Lm1pKCl9fXJldHVybiB0Lm1pPWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIE9yaWdpbmFsWE1MSHR0cFJlcXVlc3Q/bmV3IE9yaWdpbmFsWE1MSHR0cFJlcXVlc3Q6bmV3IFhNTEh0dHBSZXF1ZXN0fSx0LmNsZWFyPWZ1bmN0aW9uKCl7dC5tYXBwaW5nPXt9fSx0LmJpPWZ1bmN0aW9uKGUsaSl7ZSBpbiB0Lm1hcHBpbmd8fCh0Lm1hcHBpbmdbZV09e30pLHQubWFwcGluZ1tlXS50ZWNoPWl9LHR9KCk7RS5tYXBwaW5nPXt9LEUueWk9ITEsZS5IaXZlUmVxdWVzdEZhY3Rvcnk9RTt2YXIgST1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGkscil7dGhpcy5FaT0hMSx0aGlzLnRpY2tldFVybD10LHRoaXMudGlja2V0PWUsdGhpcy5tYW5pZmVzdD1pLHRoaXMuSWk9di5kZWZlcigpLHRoaXMuUmk9cix0aGlzLlJpJiZ0aGlzLklpLnJlc29sdmUodGhpcy5SaSl9cmV0dXJuIHQucHJvdG90eXBlLnN0PWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dGhpcy50ZWNoJiZ0aGlzLnRlY2guc3QodCx0aGlzKX0sdC5wcm90b3R5cGUua2k9ZnVuY3Rpb24odCl7dGhpcy5FaSE9dCYmKHRoaXMuRWk9dCx0aGlzLnRlY2gmJnRoaXMudGVjaC5DaSh0aGlzLHQpKX0sdC5wcm90b3R5cGUuT2k9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5FaX0sdC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24odCl7aWYobnVsbCE9dGhpcy50ZWNoKXJldHVybiB0aGlzLnRlY2guUGkodGhpcyx0KX0sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aWNrZXQudG9TdHJpbmcoKX0sdC5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3ZhciB0PW5ldyBUO3JldHVybiB0LmlkPXRoaXMuaWQsdC50aWNrZXRVcmw9dGhpcy50aWNrZXRVcmwsdC5tYW5pZmVzdD10aGlzLm1hbmlmZXN0LHQudGVjaD10aGlzLnRlY2guQWkoKSx0fSx0LnByb3RvdHlwZS5OaT1mdW5jdGlvbigpe3JldHVybiB0aGlzLklpLnZ0fSx0LnByb3RvdHlwZS54aT1mdW5jdGlvbih0KXt0aGlzLlJpPXQsdGhpcy5JaS5yZXNvbHZlKHRoaXMuUmkpfSx0fSgpO2UuQmk9STt2YXIgUj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7ZS5GaT1SO3ZhciBrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuc3VjY2Vzcz0wLHRoaXMuX2k9MCx0aGlzLkRpPTB9cmV0dXJuIHR9KCk7ZS5IaT1rO3ZhciBDPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuTGk9MCx0aGlzLk1pPTAsdGhpcy5qaT1uZXcgZix0aGlzLlVpPW5ldyBmfXJldHVybiB0LnByb3RvdHlwZS5NPWZ1bmN0aW9uKHQsZSxpLHIpe3ZvaWQgMD09PXImJihyPSEwKTt2YXIgbj10P3RoaXMuamk6dGhpcy5VaTtuLmhhcyhlKXx8bi5zZXQoZSxuZXcgayk7dmFyIG89bi5nZXQoZSk7by5EaSs9aSxyJiZvLnN1Y2Nlc3MrK30sdC5wcm90b3R5cGUuVj1mdW5jdGlvbih0LGUpe3ZhciBpPXQ/dGhpcy5qaTp0aGlzLlVpO2kuaGFzKGUpfHxpLnNldChlLG5ldyBrKSxpLmdldChlKS5faSsrfSx0LnByb3RvdHlwZS5VPWZ1bmN0aW9uKHQpe3RoaXMuYmFuZHdpZHRoPXR9LHQucHJvdG90eXBlLlo9ZnVuY3Rpb24oKXt0aGlzLkxpKyt9LHQucHJvdG90eXBlLnR0PWZ1bmN0aW9uKCl7dGhpcy5NaSsrfSx0LnByb3RvdHlwZS5WaT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJhbmR3aWR0aH0sdC5wcm90b3R5cGUuUWk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qaX0sdC5wcm90b3R5cGUucWk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5VaX0sdC5wcm90b3R5cGUuSmk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5MaX0sdC5wcm90b3R5cGUuS2k9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5NaX0sdH0oKTtlLlA9Qzt2YXIgTz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT10aGlzO2lmKHQuR2kpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3I6IEluc3RhbnRpYXRpb24gZmFpbGVkOiBVc2UgVmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyLmdldEluc3RhbmNlKCkgaW5zdGVhZCBvZiBuZXcuXCIpO3ZhciBpLHI7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50LmhpZGRlbj8oaT1cImhpZGRlblwiLHI9XCJ2aXNpYmlsaXR5Y2hhbmdlXCIpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudC5tc0hpZGRlbj8oaT1cIm1zSGlkZGVuXCIscj1cIm1zdmlzaWJpbGl0eWNoYW5nZVwiKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQud2Via2l0SGlkZGVuJiYoaT1cIndlYmtpdEhpZGRlblwiLHI9XCJ3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnRbaV0/ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihyLGZ1bmN0aW9uKCl7dmFyIHQ9IWRvY3VtZW50W2ldO2UuemkuZm9yRWFjaChmdW5jdGlvbihpKXtpLmNhbGwoZSx0KX0pfSwhMSk6dC5tJiZ0Lm0uZGVidWcoXCJ3YXJuIC0gdmlzaWJpbGl0eUNoYW5nZSBsaXN0ZW5lciBub3Qgc3VwcG9ydGVkXCIpLHRoaXMuemk9bmV3IEFycmF5fXJldHVybiB0LldpPWZ1bmN0aW9uKGUpe3JldHVybiBlJiYodGhpcy5tPWUpLHZvaWQgMD09PXRoaXMuR2kmJih0aGlzLkdpPW5ldyB0KSx0aGlzLkdpfSx0LnByb3RvdHlwZS4kaT1mdW5jdGlvbih0KXt0aGlzLnppLnB1c2godCl9LHR9KCk7ZS5ZaT1PLGUuWGk9cixlLlppPW4sZS50cj1vLGUuZXI9cyxlLmlyPWEsZS5ycj1jLGUubnI9aCxlLm9yPXAsZS5zcj1sO3ZhciBQPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5nZXRJdGVtPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gd2luZG93LnNlc3Npb25TdG9yYWdlP3dpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHQpOm51bGx9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fSx0LnNldEl0ZW09ZnVuY3Rpb24odCxlKXt0cnl7cmV0dXJuISF3aW5kb3cuc2Vzc2lvblN0b3JhZ2UmJih3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSh0LGUpLCEwKX1jYXRjaChpKXtyZXR1cm4hMX19LHQucmVtb3ZlSXRlbT1mdW5jdGlvbih0KXt0cnl7d2luZG93LnNlc3Npb25TdG9yYWdlJiZ3aW5kb3cuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSh0KX1jYXRjaChlKXtyZXR1cm4gbnVsbH19LHR9KCk7ZS5hcj1QO3ZhciBBPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmNyPXR9cmV0dXJuIHQucHJvdG90eXBlLmhyPWZ1bmN0aW9uKHQpe3ZhciBlPURhdGUubm93KCk7cmV0dXJuIHRoaXMuaXNFcXVhbCh0aGlzLnByLHQpfHwodGhpcy51cj1lKSx0aGlzLnByPXQsZS10aGlzLnVyPj10aGlzLmNyfSx0LnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKHQsZSl7aWYodCYmZSl7dmFyIGk9W2UubHItdC5scixlLmRyLXQuZHIsZS5nci10LmdyXTtyZXR1cm4gaS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmTWF0aC5hYnMoZSk8MTB9LCEwKX1yZXR1cm4hMX0sdH0oKTtlLnZyPUF9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcixuPWkoMTEpLG89aSgxOCkscz1pKDEyKTshZnVuY3Rpb24odCl7dmFyIGU7IWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMubW9uaXRvclBvcnQ9by5rZS55cj9zLndyLm1yOnMud3IuVHIsdGhpcy5wbGF5ZXJQb3J0PW8ua2UueXI/cy53ci5TcjpzLndyLmJyLHRoaXMuZmVlZGJhY2tQZXJpb2Q9MmUzLHRoaXMuaWRsZVRpbWVQZXJpb2Q9NmU0LHRoaXMudXNlU2Vzc2lvbkNoZWNrPW8ua2UuRXIsdGhpcy5kZWJ1Z0xldmVsPVwibm90aWNlXCIsdGhpcy5oaXZlVGVjaE9yZGVyPVtdLHRoaXMudGVsZW1ldHJ5SWQ9bnVsbCx0aGlzLnNpbGVudD0hMSx0aGlzLmxvZ2dlclRpbWVzdGFtcD1uLkhpdmVDb25maWcuRnJhbWV3b3JrLkxvZ2dlclRpbWVzdGFtcCx0aGlzLm9uU291cmNlU2V0Q29tcGxldGVkPWZ1bmN0aW9uKHQpe30sdGhpcy5vbkxvYWRpbmdDb21wbGV0ZWQ9ZnVuY3Rpb24odCl7fX1yZXR1cm4gdH0oKTt0LklyPWU7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5pbml0VGltZW91dD0zZTQsdGhpcy5vbkVycm9yPWZ1bmN0aW9uKHQpe3JldHVybiEwfSx0aGlzLm9uQWN0aXZlU2Vzc2lvbj1mdW5jdGlvbih0KXt9fXJldHVybiB0fSgpO3QuUnI9aTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmhpdmVQbGF5ZXJQb3J0PVwicGxheWVyUG9ydFwiLHRoaXMuaGl2ZU1vbml0b3JQb3J0PVwibW9uaXRvclBvcnRcIix0aGlzLmhpdmVTaWxlbnQ9XCJzaWxlbnRcIix0aGlzLmhpdmVEZWJ1Z0xldmVsPVwiZGVidWdMZXZlbFwiLHRoaXMuaGl2ZURlYnVnVGltZXN0YW1wPVwibG9nZ2VyVGltZXN0YW1wXCIsdGhpcy5oaXZlU2V0dXBUaW1lb3V0PVwic2V0dXBUaW1lb3V0XCIsdGhpcy5oaXZlSmF2YVRpbWVvdXQ9XCJpbml0VGltZW91dFwiLHRoaXMuaGl2ZVdhcm5KYXZhVGltZW91dD1cIndhcm5TbG93UmVzcFRpbWVvdXRcIn1yZXR1cm4gdH0oKTt0LmtyPXJ9KGU9dC5Jcnx8KHQuSXI9e30pKX0ocj1lLnB0fHwoZS5wdD17fSkpO3ZhciBhOyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7ZS5lbmFibGVkUlVNPSExLGUuZW5hYmxlS2V5Q29tYmluYXRpb249ITAsZS5lbmFibGVkRXJyb3JGaWx0ZXI9ITAsdC5FcnJvck1vbml0b3I9ZX0oYT1lLkhpdmVDb25maWd8fChlLkhpdmVDb25maWc9e30pKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdy5IaXZlQ29uZmlnJiYod2luZG93LkhpdmVDb25maWc9e30pLHdpbmRvdy5IaXZlQ29uZmlnLkVycm9yTW9uaXRvcj1hLkVycm9yTW9uaXRvcil9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcixuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPXR9Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSk7dC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKTooaS5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IGkpfSxvPWkoMjgpLkNyLHM9aSgxKSxhPWkoMiksYz1pKDUpLGg9aSgxMykscD1pKDEwKSx1PWkoMjMpOyFmdW5jdGlvbih0KXt2YXIgZT1cIltUUkFDS10gXCI7dC5Pcj1cImhpdmUtY2xpZW50LXRyYWNrXCIsdC5Qcj1cInRyYWNrZXZlbnRcIix0LkFyPVwiTlVMTElEXCIsdC5Ocj1cIlwiO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdH0oKTtpLnhyPTAsaS5Ccj0xLGkuRnI9MixpLl9yPTEwMCxpLkRyPTIwMCx0LkhyPWk7dmFyIHI7IWZ1bmN0aW9uKHQpe3RbdC5OPTBdPVwiUExBWUlOR1wiLHRbdC5Mcj0xXT1cIkJVRkZFUklOR1wiLHRbdC5XPTJdPVwiUEFVU0VEXCIsdFt0Lkg9M109XCJTS0lQXCIsdFt0LkQ9NF09XCJTVE9QUEVEXCIsdFt0LkVSUk9SPTVdPVwiRVJST1JcIix0W3QuTXI9Nl09XCJXSU5ET1dfU0laRVwiLHRbdC5MPTddPVwiRlVMTFNDUkVFTlwiLHRbdC5qcj04XT1cIlZJU0lCTEVcIix0W3QuSElEREVOPTldPVwiSElEREVOXCJ9KHI9dC5CfHwodC5CPXt9KSk7dmFyIGw7IWZ1bmN0aW9uKHQpe3RbdC5Vcj0wXT1cIkpBVkFfTk9UX1JFQUNIQUJMRVwiLHRbdC5Wcj0xXT1cIkpBVkFfTk9UX1JFQURZXCIsdFt0LlFyPTJdPVwiSkFWQV9XUk9OR19WRVJTSU9OXCIsdFt0LnFyPTNdPVwiSkFWQV9TRVNTSU9OX0JVU1lcIix0W3QuSnI9NF09XCJKQVZBX1NFU1NJT05fRVJST1JcIix0W3QuS3I9NV09XCJKQVZBX1RJQ0tFVF9USU1FT1VUXCJ9KGw9dC5Hcnx8KHQuR3I9e30pKTt2YXIgZD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7dC56cj1kO3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdH0oKTt0LldyPWY7dmFyIGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0fSgpO3QuJHI9Zzt2YXIgdj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLnR5cGU9aS5Gcn1yZXR1cm4gdH0oKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuc2Vzc2lvbnM9bmV3IEFycmF5fXJldHVybiB0LnByb3RvdHlwZS5Zcj1mdW5jdGlvbih0LGUpe3ZhciBpO3RoaXMuc2Vzc2lvbnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnNlc3Npb25JZD09dCYmKGk9ZSl9KSxpfHwoaT1uZXcgbSxpLnNlc3Npb25JZD10LHRoaXMuc2Vzc2lvbnMucHVzaChpKSksaS5ldmVudHMucHVzaChlKX0sdH0oKTt0LlhyPXk7dmFyIG09ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5ldmVudHM9bmV3IEFycmF5fXJldHVybiB0fSgpO3QuWnI9bTt2YXIgdz1mdW5jdGlvbigpe2Z1bmN0aW9uIGkoKXt0aGlzLm09YS5GcmFtZXdvcmsucmVzb2x2ZShhLkZyYW1ld29yay5GZS53ZSkubG9nKCksdGhpcy50bj1hLkZyYW1ld29yay5yZXNvbHZlKGMuZ2kuY2kpLHRoaXMuZW49bmV3IEFycmF5LHRoaXMuaW49bmV3IEFycmF5LHRoaXMucm49bmV3IEFycmF5fXJldHVybiBpLnByb3RvdHlwZS5ubj1mdW5jdGlvbih0KXt0aGlzLmNsaWVudD10fSxpLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHQsaSl7dGhpcy5zbj10LHRoaXMuYW4oaSksdGhpcy5tLmRlYnVnKGUrXCJJTklUIElEOiBcIit0KX0saS5wcm90b3R5cGUuYW49ZnVuY3Rpb24odCxlKXt0aGlzLmFwcD10LGUmJih0aGlzLmNuPWUpfSxpLnByb3RvdHlwZS5obj1mdW5jdGlvbih0KXt0aGlzLnBuPXR9LGkucHJvdG90eXBlLnVuPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBTKHQsdGhpcyk7dGhpcy5lbi5wdXNoKGUpLHRoaXMubG49bnVsbCx0aGlzLmNsaWVudC5kbighMCl9LGkucHJvdG90eXBlLndpPWZ1bmN0aW9uKHQsaSxyKXtpZighdGhpcy5sbilmb3IodmFyIG49MDtuPHRoaXMuZW4ubGVuZ3RoO24rKyl7dmFyIG89dGhpcy5lbltuXTtpZihvLnRpY2tldC5zZXNzaW9uSWQ9PT10KXt0aGlzLm0uZGVidWcoZStcIkFjdGl2YXRpbmcgVHJhY2sgZm9yIHNlc3Npb24gXCIrdCksdGhpcy5sbj1vO2JyZWFrfX1pZih0aGlzLmxuKXtpZih0aGlzLmxuLnRpY2tldC5zZXNzaW9uSWQhPXQpcmV0dXJuIHZvaWQgdGhpcy5tLndhcm4oZStcImlnbm9yaW5nIG1hbmlmZXN0IG5vdCBtYXRjaGluZyBldmVudCBcIit0aGlzLmxuLnRpY2tldC5zZXNzaW9uSWQrXCIgIT0gXCIrdCk7aWYoIXRoaXMubG4uZm4pe3ZhciBzPW5ldyBiKHQsaSxyKTt0aGlzLmxuLmduKHMpLHRoaXMuY2xpZW50LmRuKCl9fX0saS5wcm90b3R5cGUudm49ZnVuY3Rpb24odCxlLGkpe251bGwhPXRoaXMubG4mJih0aGlzLmxuLmZufHx0aGlzLmxuLnluLnB1c2gobmV3IGsodCxlLGkpKSl9LGkucHJvdG90eXBlLm1uPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLmluLnB1c2gobmV3IEkodCxlLGkpKSx0aGlzLmNsaWVudC5kbigpfSxpLnByb3RvdHlwZS53bj1mdW5jdGlvbih0LGUsaSl7dGhpcy5ybi5wdXNoKG5ldyBSKHQsZSxpKSksdGhpcy5jbGllbnQuZG4oKX0saS5wcm90b3R5cGUuVG49ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0JiZ0LmZvckVhY2goZnVuY3Rpb24odCl7ZS5ybi5wdXNoKHQpfSl9LGkucHJvdG90eXBlLlNuPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGY7dGhpcy5jbj8odC5wYXJ0bmVySWQ9dGhpcy5jbi5wYXJ0bmVySWQsdC5jdXN0b21lcklkPXRoaXMuY24uY3VzdG9tZXJJZCk6dGhpcy5sbiYmKHQucGFydG5lcklkPXRoaXMubG4udGlja2V0LmJuKCksdC5jdXN0b21lcklkPXRoaXMubG4udGlja2V0LkVuKCkpLHQudmVyc2lvbj10aGlzLmFwcC5hcHArXCJfXCIrKHRoaXMuY24/dGhpcy5jbi52ZXJzaW9uOnRoaXMuYXBwLnZlcnNpb24pLHRoaXMuY24mJih0Lmluc3RhbGxWZXJzaW9uPXRoaXMuY24uaW5zdGFsbFZlcnNpb24sdC5pbnN0YWxsVHM9dGhpcy5jbi5pbnN0YWxsVHMpO3ZhciBlPW5ldyBvO3JldHVybiBlLkluKG5hdmlnYXRvci51c2VyQWdlbnQpLHQub3M9ZS5SbigpLm5hbWUrXCIgXCIrZS5SbigpLnZlcnNpb24sdGhpcy5wbiYmKHQuY29tbVZlcnNpb249dGhpcy5wbi5jb21tVmVyc2lvbix0LnBsdWdpbk5hbWU9dGhpcy5wbi5wbHVnaW5OYW1lLHQucGx1Z2luVmVyc2lvbj10aGlzLnBuLnBsdWdpblZlcnNpb24sdC5wbGF5ZXJUZWNoPXRoaXMucG4ucGxheWVyVGVjaCx0LnBsYXllclZlcnNpb249dGhpcy5wbi5wbGF5ZXJWZXJzaW9uLHRoaXMucG4udGVsZW1ldHJ5SWQmJih0LnRlbGVtZXRyeUlkPXRoaXMucG4udGVsZW1ldHJ5SWQpKSx0fSxpLnByb3RvdHlwZS5rbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxuP3RoaXMubG46dGhpcy5lbiYmdGhpcy5lbi5sZW5ndGg+MD90aGlzLmVuW3RoaXMuZW4ubGVuZ3RoLTFdOnZvaWQgMH0saS5wcm90b3R5cGUuQ249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGk9cy5kZWZlcigpOzA9PXRoaXMuZW4ubGVuZ3RoJiYwPT10aGlzLmluLmxlbmd0aCYmaS5yZWplY3QoXCJub3RoaW5nIHRvIHNlbmRcIik7dmFyIHI9bmV3IGQ7ci5hcHA9dC5PcixyLmNyZWF0ZWRBdD1hLkZyYW1ld29yay50aW1lKCksci5ndWlkPXRoaXMuc24sci5uYW1lPXQuUHI7dmFyIG49dGhpcy5rbigpO2lmKG4pe3ZhciBvPW4udGlja2V0Lk9uKCkucmVwbGFjZSgvW1xcW1xcXV0vZyxcIlwiKTtyLnRhZ3M9W29dLHIudGFncy5wdXNoKG4udGlja2V0LmJuKCkpLHIudGFncy5wdXNoKG4udGlja2V0LkVuKCkpfWVsc2Ugci50YWdzPW5ldyBBcnJheTt2YXIgYz1uZXcgeTtyZXR1cm4gYy5wZWVyPXRoaXMuU24oKSx0aGlzLmVuLmZvckVhY2goZnVuY3Rpb24odCl7dC5mbnx8Yy5Zcih0LnRpY2tldC5zZXNzaW9uSWQsdCl9KSx0aGlzLmluLmZvckVhY2goZnVuY3Rpb24odCl7Yy5Zcih0LnNlc3Npb25JZCx0KX0pLHRoaXMucm4uZm9yRWFjaChmdW5jdGlvbih0KXtjLllyKHQuc2Vzc2lvbklkLHQpfSksci5kYXRhPWMsdGhpcy50bi5QbigpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGk9ZS5Bbih0KTtjLllyKFwibnVsbFwiLGkpfSkuZmFpbChmdW5jdGlvbih0KXt9KVtcImZpbmFsbHlcIl0oZnVuY3Rpb24oKXtyZXR1cm4gaS5yZXNvbHZlKHIpfSkuZG9uZSgpLGkudnR9LGkucHJvdG90eXBlLkFuPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB2O2UudHM9YS5GcmFtZXdvcmsudGltZSgpO3ZhciBpPXQuTm4oKTtyZXR1cm4gaS54bigpJiYoZS5wdWJJcD1pLnhuKCkpLGkuQm4oKSYmKGUucHJpdklwPWkuQm4oKSksdC5GbigpJiYoZS5ob3N0bmFtZT10LkZuKCkpLGkuX24oKSYmKGUubmV0bWFzaz1pLl9uKCkpLGkuRG4oKSYmKGUubmljPWkuRG4oKSksaS5IbigpJiYoZS5uaWNOYW1lPWkuSG4oKSksaS5MbigpJiYoZS5tYWM9aS5MbigpKSxlfSxpLnByb3RvdHlwZS5Nbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNuP3RoaXMuY24udXNlckFnZW50Om5hdmlnYXRvci51c2VyQWdlbnR9LGkucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5lbj1uZXcgQXJyYXksdGhpcy5pbj1uZXcgQXJyYXksdGhpcy5ybj1uZXcgQXJyYXl9LGkucHJvdG90eXBlLmpuPWZ1bmN0aW9uKHQpe30saX0oKTt0LlVuPXc7dmFyIFQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuVm49aXNOYU4odS5IaXZlQ29uZmlnLkRlYnVnTG9ncy5UcmFja1NuYXBzaG90TG9ncyk/MDp1LkhpdmVDb25maWcuRGVidWdMb2dzLlRyYWNrU25hcHNob3RMb2dzLHRoaXMuUW49dCx0aGlzLm09YS5GcmFtZXdvcmsucmVzb2x2ZShhLkZyYW1ld29yay5GZS53ZSkubG9nKCksdGhpcy5jbGllbnQ9YS5GcmFtZXdvcmsucmVzb2x2ZShjLmdpLkJlKSx0aGlzLlFuLm5uKHRoaXMpfXJldHVybiB0LnByb3RvdHlwZS5kbj1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0hMSk7dmFyIGU9dD9oLktuLkpuLnFuOmguS24uSm4uR247aWYodGhpcy56bil7dmFyIGk9dGhpcy5Xbi0obmV3IERhdGUpLmdldFRpbWUoKTtpPmUmJihhLkZyYW1ld29yay5jbGVhclRpbWVvdXQodGhpcy56biksdGhpcy5Xbj1udWxsLHRoaXMuJG4oZSkpfWVsc2UgdGhpcy4kbihlKX0sdC5wcm90b3R5cGUuJG49ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLnpuPWEuRnJhbWV3b3JrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLlluKCl9LHQpLHRoaXMuV249KG5ldyBEYXRlKS5nZXRUaW1lKCkrdH0sdC5wcm90b3R5cGUuWW49ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuem49bnVsbCx0aGlzLlduPW51bGwsdGhpcy5tLmRlYnVnKGUrXCJUQUtJTkcgQSBUUkFDSyBTTkFQU0hPVFwiKSxcbiAgdGhpcy5Rbi5DbigpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQuZm9yd2FyZChlKX0pW1wiZmluYWxseVwiXShmdW5jdGlvbigpe3JldHVybiB0LlFuLnJlc2V0KCl9KX0sdC5wcm90b3R5cGUuZm9yd2FyZD1mdW5jdGlvbih0KXtpZih0aGlzLmNsaWVudCYmdGhpcy5jbGllbnQuWG4oKSl7dmFyIGk9SlNPTi5zdHJpbmdpZnkodCk7c3dpdGNoKHRoaXMuVm4pe2Nhc2UgMDpkZWZhdWx0OnRoaXMubS5kZWJ1ZyhlK1wiVFJBQ0sgRVZFTlRcIik7YnJlYWs7Y2FzZSAxOnRoaXMubS5kZWJ1ZyhlK1wiVFJBQ0sgRVZFTlQ6XCIraSl9dmFyIHI9bmV3IHAuWm4oU2VydmljZXMudG8sMixpKTt0aGlzLmNsaWVudC5YbigpLnNlbmQocil9fSx0fSgpO3QuZW89VDt2YXIgUz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmNyZWF0ZWRBdD0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLmZuPSExLHRoaXMudGlja2V0PXQsdGhpcy5tYW5pZmVzdHM9bmV3IEFycmF5LHRoaXMueW49bmV3IEFycmF5LHRoaXMuUW49ZX1yZXR1cm4gdC5wcm90b3R5cGUuZ249ZnVuY3Rpb24odCl7dGhpcy5tYW5pZmVzdHMucHVzaCh0KX0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e307dC50eXBlPWkueHIsdC50aWNrZXQ9e30sdC50aWNrZXQudXJsPXRoaXMudGlja2V0LnRpY2tldFVybCx0LnRpY2tldC5yZXFUcz10aGlzLnRpY2tldC5pbyx0LnRpY2tldC5yZXNwVHM9dGhpcy50aWNrZXQucm8sdC50aWNrZXQudXNlckFnZW50PXRoaXMuUW4uTW4oKSx0Lm1hbmlmZXN0cz1bXSx0aGlzLm1hbmlmZXN0cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBpPXt9O2kudXJsPWUudXJsLGkucmVzcFRzPWUucm8saS5yZXNwQ29kZT1lLnJlc3BDb2RlLHQubWFuaWZlc3RzLnB1c2goaSl9KTt2YXIgZT0tMSxyPS0xLG49LTE7cmV0dXJuIHRoaXMueW4uZm9yRWFjaChmdW5jdGlvbih0KXt0Lm5vPjAmJihlPT0tMSYmKGU9dC50cyxyPXQubm8pLG49dC5ubyl9KSxlIT0tMSYmKHQucGxheVRzPWUpLG4hPS0xJiYodC5idWZmVGltZT1uKSxyIT0tMSYmKHQuaW5pdEJ1ZmZUaW1lPXIpLHR9LHR9KCk7dC5vbz1TO3ZhciBiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSl7dGhpcy5ldmVudElkPXQsdGhpcy51cmw9ZSx0aGlzLnJvPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHRoaXMucmVzcENvZGU9aX1yZXR1cm4gdH0oKTt0LnNvPWI7dmFyIEU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpLHIpe3RoaXMudHM9KG5ldyBEYXRlKS5nZXRUaW1lKCksdGhpcy5zZXNzaW9uSWQ9dCx0aGlzLnNlc3Npb25JZHx8KHRoaXMuc2Vzc2lvbklkPVwibnVsbFwiKSx0aGlzLmV2ZW50PWUsdGhpcy5hbz1pLHImJih0aGlzLnRzPXIpfXJldHVybiB0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17fTtyZXR1cm4gdC50eXBlPXRoaXMuY28rdGhpcy5ldmVudCx0LnRzPXRoaXMudHMsdGhpcy5hbyYmKHQucGFyYW1ldGVycz10aGlzLmFvKSx0fSx0fSgpO3QuaG89RTt2YXIgST1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscixuLG8pe3ZhciBzPXQuY2FsbCh0aGlzLGUscixuLG8pfHx0aGlzO3JldHVybiBzLmNvPWkuX3Isc31yZXR1cm4gbihlLHQpLGV9KEUpO3QucG89STt2YXIgUj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUscixuLG8pe3ZhciBzPXQuY2FsbCh0aGlzLGUscixuLG8pfHx0aGlzO3JldHVybiBzLmNvPWkuRHIsc31yZXR1cm4gbihlLHQpLGV9KEUpO3QudW89Ujt2YXIgaz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGkpe3RoaXMudHM9KG5ldyBEYXRlKS5nZXRUaW1lKCksdGhpcy5scj10LHRoaXMubG89ZSx0aGlzLm5vPWl9cmV0dXJuIHR9KCk7dC5kbz1rfShyPWUuRnx8KGUuRj17fSkpfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoKXtpZih0aGlzLmZvKXJldHVybiB0aGlzLmZvO3ZhciB0PXdpbmRvdyYmd2luZG93LndpbmRvdz93aW5kb3cud2luZG93LnZvOnZvaWQgMDtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmdC5sb2cmJnQuZGVidWcmJnQuaW5mbyYmdC53YXJuJiZ0LmVycm9yJiYodGhpcy5mbz10KSwhdGhpcy5mbyl7dmFyIGU9IShcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93LmNvbnNvbGUpLGk9ZT9jb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpOmZ1bmN0aW9uKCl7fTt0aGlzLmZvPXtsb2c6aSxkZWJ1ZzplJiZ3aW5kb3cuY29uc29sZS5kZWJ1Zz93aW5kb3cuY29uc29sZS5kZWJ1Zy5iaW5kKGNvbnNvbGUpOmksaW5mbzplJiZ3aW5kb3cuY29uc29sZS5pbmZvP3dpbmRvdy5jb25zb2xlLmluZm8uYmluZChjb25zb2xlKTppLHdhcm46ZSYmd2luZG93LmNvbnNvbGUud2Fybj93aW5kb3cuY29uc29sZS53YXJuLmJpbmQoY29uc29sZSk6aSxlcnJvcjplJiZ3aW5kb3cuY29uc29sZS5lcnJvcj93aW5kb3cuY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpOml9fXJldHVybiB0aGlzLmZvfWUudT1cIltIaXZlU2VydmljZXNdIFwiO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdH0oKTtyLnlvPTI1MCxlLmtlPXI7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpKXt0aGlzLm1zZ0lkPWUsdGhpcy5zZXJ2aWNlPXQsdGhpcy5tc2c9aX1yZXR1cm4gdC5wcm90b3R5cGUubW89ZnVuY3Rpb24oKXt2YXIgdD1uZXcgVWludDhBcnJheShbdGhpcy5zZXJ2aWNlPj44LDI1NSZ0aGlzLnNlcnZpY2VdKSxlPW5ldyBVaW50OEFycmF5KFt0aGlzLm1zZ0lkXSksaT1bdCxlLHRoaXMubXNnXTtyZXR1cm4gbmV3IEJsb2IoaSx7dHlwZTpcImFwcGxpY2F0aW9uL29jdGV0LWJpbmFyeVwifSl9LHQud289ZnVuY3Rpb24oZSl7dmFyIGk9KFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheShlKSksU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KGUuc2xpY2UoMykpKSkscj1uZXcgVWludDhBcnJheShlLnNsaWNlKDAsMikpLG49bmV3IFVpbnQ4QXJyYXkoZS5zbGljZSgyLDMpKSxvPShyWzBdPDw4KStyWzFdO3JldHVybiBuZXcgdChvLG5bMF0saSl9LHR9KCk7ZS5abj1uLGUubT1pfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3ZhciBpOyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7ZS5Mb2dnZXJUaW1lc3RhbXA9ITAsdC5GcmFtZXdvcms9ZTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7aS5NZXRyaWNTbmFwc2hvdExvZ3M9MCxpLlRyYWNrU25hcHNob3RMb2dzPTAsdC5EZWJ1Z0xvZ3M9aX0oaT1lLkhpdmVDb25maWd8fChlLkhpdmVDb25maWc9e30pKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdy5IaXZlQ29uZmlnJiYod2luZG93LkhpdmVDb25maWc9e30pLHdpbmRvdy5IaXZlQ29uZmlnLkZyYW1ld29yaz1pLkZyYW1ld29yayx3aW5kb3cuSGl2ZUNvbmZpZy5EZWJ1Z0xvZ3M9aS5EZWJ1Z0xvZ3MpfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdH0oKTtpLlRvPVwiMTI3LjAuMC4xXCIsaS5icj04OTk5LGkuU3I9ODk5OCxpLlRyPTg4OTksaS5tcj04ODk4LGkuU289XCIvL3swfTp7MX0vP2NhbGxiYWNrPXsyfXszfWhpdmVQbHVnaW5JZD17NH1cIixpLmJvPVwiLy97MH06ezF9Lz9jYWxsYmFjaz17Mn1cIixpLkVyPSEwLGkuRW89LygoaHR0cHxodHRwcyk6XFwvXFwvKC4qKTooWzAtOV0qKVxcLyhbMC05YS16LV0qKS5pc21cXC8pKC4qKS8saS5Jbz1cIjIwMTMuMS4xXCIsZS53cj1pfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI7IWZ1bmN0aW9uKHQpe3QuUm89ITA7dmFyIGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0fSgpO2Uua289XCJ3c3M6Ly9iZWUuaGl2ZXN0cmVhbWluZy5jb206NDQzL3YxL2hpdmVqc1wiLGUuQ289XCJ3c3M6Ly9iZWUtdGVzdC5oaXZlc3RyZWFtaW5nLmNvbTo0NDMvdjEvaGl2ZWpzXCIsZS5Pbz17aWNlU2VydmVyczpbe3VybDpcInN0dW46c3R1bi5oaXZlc3RyZWFtaW5nLmNvbTozNjc4XCJ9XX0sZS5Qbz0zZTQsZS5Hbj0zZTUsZS5xbj04ZTQsZS5Bbz0zZTQsZS5Obz0xMDAsZS54bz0xZTQsdC5Kbj1lfShyPWUuS258fChlLktuPXt9KSl9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcixuPWkoNCksbz1uLnZlLHM9aSgxKSxhPWkoMiksYz1pKDkpLGg9aSg1KSxwPWkoMjcpOyFmdW5jdGlvbih0KXt0W3QuSURMRT0wXT1cIklETEVcIix0W3QuQm89MV09XCJQTEFZXCJ9KHI9ZS5Gb3x8KGUuRm89e30pKTt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGkscil7dGhpcy50aWNrZXQ9dCx0aGlzLl9vPWUsdGhpcy5hcHA9aSx0aGlzLmlkZW50aXR5PXIsdGhpcy5Ebz1hLkZyYW1ld29yay5yZXNvbHZlKGguZ2kubGkpLHRoaXMuSG89YS5GcmFtZXdvcmsucmVzb2x2ZShoLmdpLnNpKSx0aGlzLlFuPWEuRnJhbWV3b3JrLnJlc29sdmUoaC5naS5kaSksdGhpcy5Mbz1uZXcgYy5GLmVvKHRoaXMuUW4pfXJldHVybiB0LnByb3RvdHlwZS5hbj1mdW5jdGlvbih0LGUsaSl7dGhpcy5hcHA9bmV3IGwodCxlKSx0aGlzLkRvLmFuKHRoaXMuYXBwKSx0aGlzLlFuLmFuKHRoaXMuYXBwLGkpfSx0LnByb3RvdHlwZS5DaT1mdW5jdGlvbih0KXt0aGlzLkhvLkNpKHQpfSx0fSgpO2UuTW89dTt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmFwcD10LHRoaXMudmVyc2lvbj1lfXJldHVybiB0fSgpO2Uuam89bDt2YXIgZD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLlVvPW51bGwsdGhpcy5Wbz1udWxsLHRoaXMuUW89bmV3IG8sdGhpcy5tPWEuRnJhbWV3b3JrLnJlc29sdmUoYS5GcmFtZXdvcmsuRmUud2UpLmxvZygpLHRoaXMubS5kZWJ1ZyhcIklOSVQgUkVQT1JUSU5HXCIpLHRoaXMuX289YS5GcmFtZXdvcmsucmVzb2x2ZShoLmdpLkJlKSx0aGlzLnFvPWEuRnJhbWV3b3JrLnJlc29sdmUoaC5naS5DZSksdGhpcy5Kbz1hLkZyYW1ld29yay5yZXNvbHZlKGguZ2kuYWkpfXJldHVybiB0LnByb3RvdHlwZS5pbml0U2Vzc2lvbj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMscj1zLmRlZmVyKCksbj10aGlzLnFvLktvKCksbz10aGlzLkpvLkdvKHQpO3JldHVybiBudWxsIT1vP24udGhlbihmdW5jdGlvbih0KXtyZXR1cm4gaS56byh0LG8scixlKX0pLmZhaWwoci5yZWplY3QpOnIucmVqZWN0KFwiVGlja2V0IFVSTCBub3QgdmFsaWRcIiksci52dH0sdC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9vLmNsb3NlKCl9LHQucHJvdG90eXBlLnpvPWZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPXRoaXM7dGhpcy5Vbz10LldvKCksdGhpcy5Wbz10LiRvKCk7dmFyIG89dGhpcy5fby5pbml0KHRoaXMuVW8sZSkscz10aGlzLkpvLnJlc29sdmUoby5ZbyxlLHIpO28udnQudGhlbihmdW5jdGlvbihlKXtzLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHI9ZS5zZXNzaW9uSWQ7aWYobi5Rby5oYXMocikpe3ZhciBvPW4uUW8uZ2V0KHIpO24ubS53YXJuKFwiU0VTU0lPTiBBTFJFQURZIEVYSVNUSU5HIFwiK28uRG8udGlja2V0KX1lbHNle3ZhciBzPW5ldyBsKHAuSGl2ZS5YbygpLHAuSGl2ZS5nZXRWZXJzaW9uKCkpLGE9bmV3IHUoZSxuLl9vLHMsdCk7YS5Eby5pbml0KG4uVm8sZSxzLHIpLGEuUW4uaW5pdChuLlZvLHMpLGEuUW4udW4oZSksbi5Rby5zZXQocixhKSxuLm0uZGVidWcoXCJTRVNTSU9OIFNFVCBcIixyKSxpLnJlc29sdmUoYSl9fSkuZmFpbChmdW5jdGlvbih0KXtyZXR1cm4gaS5yZWplY3QodD90OlwiRXJyb3IgcmVzb2x2aW5nIHRoZSB0aWNrZXRcIil9KSxlLm9uZXJyb3IoZnVuY3Rpb24odCl7aS5yZWplY3QoXCJFcnJvciBlc3RhYmxpc2hpbmcgY29ubmVjdGlvbiB0byBIaXZlIFNlcnZpY2VzXCIpfSl9KS5mYWlsKGZ1bmN0aW9uKHQpe3JldHVybiBpLnJlamVjdCh0KX0pLHRoaXMuX28uY29ubmVjdCgpfSx0LnByb3RvdHlwZS5abz1mdW5jdGlvbih0LGUpe3JldHVybiB0LmVzKCk9PT1lLmVzKCkmJnQuRW4oKT09PWUuRW4oKSYmdC5ibigpPT09ZS5ibigpfSx0fSgpO2UucnM9ZH0sZnVuY3Rpb24odCxlLGkpe3ZhciByLHI7IWZ1bmN0aW9uKGUpe3QudD1lKCl9KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIHQoZSxpLG4pe2Z1bmN0aW9uIG8oYSxjKXtpZighaVthXSl7aWYoIWVbYV0pe3ZhciBoPVwiZnVuY3Rpb25cIj09dHlwZW9mIHImJnI7aWYoIWMmJmgpcmV0dXJuIHIoYSwhMCk7aWYocylyZXR1cm4gcyhhLCEwKTt2YXIgcD1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2ErXCInXCIpO3Rocm93IHAuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixwfXZhciB1PWlbYV09e3Q6e319O2VbYV1bMF0uY2FsbCh1LnQsZnVuY3Rpb24odCl7dmFyIGk9ZVthXVsxXVt0XTtyZXR1cm4gbyhpP2k6dCl9LHUsdS50LHQsZSxpLG4pfXJldHVybiBpW2FdLnR9Zm9yKHZhciBzPVwiZnVuY3Rpb25cIj09dHlwZW9mIHImJnIsYT0wO2E8bi5sZW5ndGg7YSsrKW8oblthXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbih0LGUsaSl7dmFyIHI9dChcIi4va2VybmVsXCIpO2kuSWU9ci5JZTt2YXIgbj10KFwiLi90eXBlX2JpbmRpbmdcIik7aS5ucz1uLm5zO3ZhciBvPXQoXCIuL3R5cGVfYmluZGluZ19zY29wZVwiKTtpLnNzPW8uc3N9LHtcIi4va2VybmVsXCI6MixcIi4vdHlwZV9iaW5kaW5nXCI6NCxcIi4vdHlwZV9iaW5kaW5nX3Njb3BlXCI6NX1dLDI6W2Z1bmN0aW9uKHQsZSxpKXt2YXIgcj10KFwiLi90eXBlX2JpbmRpbmdfc2NvcGVcIiksbj10KFwiLi9sb29rdXBcIiksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmFzPW5ldyBuLmNzfXJldHVybiB0LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHQpe3RoaXMuYXMuYWRkKHQuaHMsdCl9LHQucHJvdG90eXBlLnBzPWZ1bmN0aW9uKHQpe3RyeXt0aGlzLmFzLnJlbW92ZSh0KX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgcmVzb2x2ZSBzZXJ2aWNlIFwiK3QpfX0sdC5wcm90b3R5cGUuRWU9ZnVuY3Rpb24oKXt0aGlzLmFzPW5ldyBuLmNzfSx0LnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3ZhciBlO2lmKCF0aGlzLmFzLnVzKHQpKXJldHVybiBudWxsO2U9dGhpcy5hcy5nZXQodCk7dmFyIGk9ZVswXTtpZihpLnNjb3BlPT09ci5zcy5scyYmbnVsbCE9PWkuZHMpcmV0dXJuIGkuZHM7dmFyIG49dGhpcy5mcyhpLmdzKTtyZXR1cm4gaS5kcz1uLG59LHQucHJvdG90eXBlLnZzPWZ1bmN0aW9uKHQpe3ZhciBlLGkscixuLG8scztyZXR1cm4gbz0vKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvZ20scz0vKFteXFxzLF0rKS9nLGU9dC50b1N0cmluZygpLnJlcGxhY2UobyxcIlwiKSxpPWUuaW5kZXhPZihcIihcIikrMSxyPWUuaW5kZXhPZihcIilcIiksbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBNYXAmJi0xIT09ZS5pbmRleE9mKFwiY2xhc3NcIikmJi0xPT09ZS5pbmRleE9mKFwiY29uc3RydWN0b3JcIik/bnVsbDplLnNsaWNlKGkscikubWF0Y2gocyksbnVsbD09PW4mJihuPVtdKSxufSx0LnByb3RvdHlwZS5mcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnZzKHQpO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbmV3IHQ7Zm9yKHZhciBpPVtdLHI9bnVsbCxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBvPWVbbl07cj10aGlzLnJlc29sdmUobyksaS5wdXNoKHIpfXJldHVybiB0aGlzLnlzKHQsaSl9LHQucHJvdG90eXBlLnlzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyhGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseSh0LFtudWxsXS5jb25jYXQoZSkpKX0sdH0oKTtpLkllPW99LHtcIi4vbG9va3VwXCI6MyxcIi4vdHlwZV9iaW5kaW5nX3Njb3BlXCI6NX1dLDM6W2Z1bmN0aW9uKHQsZSxpKXt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmtleT10LHRoaXMudmFsdWU9bmV3IEFycmF5LHRoaXMudmFsdWUucHVzaChlKX1yZXR1cm4gdH0oKSxuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMubXM9bmV3IEFycmF5fXJldHVybiB0LnByb3RvdHlwZS53cz1mdW5jdGlvbih0KXtmb3IodmFyIGU9LTEsaT0wO2k8dGhpcy5tcy5sZW5ndGg7aSsrKXt2YXIgcj10aGlzLm1zW2ldO3Iua2V5PT09dCYmKGU9aSl9cmV0dXJuIGV9LHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUpe2lmKG51bGw9PT10fHx2b2lkIDA9PT10KXRocm93IG5ldyBFcnJvcihcIkFyZ3VtZW50IE51bGxcIik7aWYobnVsbD09PWV8fHZvaWQgMD09PWUpdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnQgTnVsbFwiKTt2YXIgaT10aGlzLndzKHQpO2lmKC0xIT09aSl7dmFyIG49dGhpcy5tc1tpXTtuLmtleT09PXQmJm4udmFsdWUucHVzaChlKX1lbHNlIHRoaXMubXMucHVzaChuZXcgcih0LGUpKX0sdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10fHx2b2lkIDA9PT10KXRocm93IG5ldyBFcnJvcihcIkFyZ3VtZW50IE51bGxcIik7dmFyIGU9dGhpcy53cyh0KTtpZigtMT09PWUpdGhyb3cgbmV3IEVycm9yKFwiS2V5IE5vdCBGb3VuZFwiKTt2YXIgaT10aGlzLm1zW2VdO3JldHVybiBpLmtleT09PXQ/aS52YWx1ZTp2b2lkIDB9LHQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtpZihudWxsPT09dHx8dm9pZCAwPT09dCl0aHJvdyBuZXcgRXJyb3IoXCJBcmd1bWVudCBOdWxsXCIpO3ZhciBlPXRoaXMud3ModCk7aWYoLTE9PT1lKXRocm93IG5ldyBFcnJvcihcIktleSBOb3QgRm91bmRcIik7dGhpcy5tcy5zcGxpY2UoZSwxKX0sdC5wcm90b3R5cGUudXM9ZnVuY3Rpb24odCl7aWYobnVsbD09PXR8fHZvaWQgMD09PXQpdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnQgTnVsbFwiKTt2YXIgZT10aGlzLndzKHQpO3JldHVybi0xIT09ZX0sdH0oKTtpLmNzPW59LHt9XSw0OltmdW5jdGlvbih0LGUsaSl7dmFyIHI9dChcIi4vdHlwZV9iaW5kaW5nX3Njb3BlXCIpLG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpKXtpZih0aGlzLmhzPXQsdGhpcy5ncz1lLHRoaXMuZHM9bnVsbCxcInVuZGVmaW5lZFwiPT10eXBlb2YgaSl0aGlzLnNjb3BlPXIuc3MuVHM7ZWxzZXtpZighci5zc1tpXSl7dmFyIG49XCJJbnZhbGlkIHNjb3BlIHR5cGUgXCIraTt0aHJvdyBuZXcgRXJyb3Iobil9dGhpcy5zY29wZT1pfX1yZXR1cm4gdH0oKTtpLm5zPW59LHtcIi4vdHlwZV9iaW5kaW5nX3Njb3BlXCI6NX1dLDU6W2Z1bmN0aW9uKHQsZSxpKXt2YXIgcjshZnVuY3Rpb24odCl7dFt0LlRzPTBdPVwiVHJhbnNpZW50XCIsdFt0LmxzPTFdPVwiU2luZ2xldG9uXCJ9KHJ8fChyPXt9KSksaS5zcz1yfSx7fV19LHt9LFsxXSkoMSl9KX0sZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIFRocmlmdD17U3M6XCIwLjkuMlwiLGJzOntFczowLElzOjEsQk9PTDoyLEJZVEU6MyxSczozLGtzOjQsQ3M6NixPczo4LFBzOjEwLEFzOjExLE5zOjExLHhzOjEyLEJzOjEzLEZzOjE0LF9zOjE1LERzOjE2LEhzOjE3fSxMczp7TXM6MSxqczoyLFVzOjMsVnM6NH0sUXM6ZnVuY3Rpb24odCl7dmFyIGU9MDtmb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiZlKys7cmV0dXJuIGV9LHFzOmZ1bmN0aW9uKHQsZSxpKXtmdW5jdGlvbiByKCl7fXIucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyByLHQucHJvdG90eXBlLm5hbWU9aXx8XCJcIn19O1RocmlmdC5Kcz1mdW5jdGlvbih0KXt0aGlzLm1lc3NhZ2U9dH0sVGhyaWZ0LnFzKFRocmlmdC5KcyxFcnJvcixcIlRFeGNlcHRpb25cIiksVGhyaWZ0LkpzLnByb3RvdHlwZS5Lcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1lc3NhZ2V9LFRocmlmdC5Hcz17enM6MCxXczoxLCRzOjIsWXM6MyxYczo0LFpzOjUsdGE6NixlYTo3LGlhOjgscmE6OSxuYToxMH0sVGhyaWZ0Lm9hPWZ1bmN0aW9uKHQsZSl7dGhpcy5tZXNzYWdlPXQsdGhpcy5jb2RlPVwibnVtYmVyXCI9PXR5cGVvZiBlP2U6MH0sVGhyaWZ0LnFzKFRocmlmdC5vYSxUaHJpZnQuSnMsXCJUQXBwbGljYXRpb25FeGNlcHRpb25cIiksVGhyaWZ0Lm9hLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe2Zvcig7Oyl7dmFyIGU9dC5zYSgpO2lmKGUuYWE9PVRocmlmdC5icy5FcylicmVhazt2YXIgaT1lLmNhO3N3aXRjaChpKXtjYXNlIDE6ZS5hYT09VGhyaWZ0LmJzLkFzPyhlPXQuaGEoKSx0aGlzLm1lc3NhZ2U9ZS52YWx1ZSk6ZT10LnBhKGUuYWEpO2JyZWFrO2Nhc2UgMjplLmFhPT1UaHJpZnQuYnMuT3M/KGU9dC51YSgpLHRoaXMuY29kZT1lLnZhbHVlKTplPXQucGEoZS5hYSk7YnJlYWs7ZGVmYXVsdDplPXQucGEoZS5hYSl9dC5sYSgpfXQuZGEoKX0sVGhyaWZ0Lm9hLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0LmZhKFwiVEFwcGxpY2F0aW9uRXhjZXB0aW9uXCIpLHRoaXMubWVzc2FnZSYmKHQuZ2EoXCJtZXNzYWdlXCIsVGhyaWZ0LmJzLkFzLDEpLHQudmEodGhpcy5LcygpKSx0LnlhKCkpLHRoaXMuY29kZSYmKHQuZ2EoXCJ0eXBlXCIsVGhyaWZ0LmJzLk9zLDIpLHQubWEodGhpcy5jb2RlKSx0LnlhKCkpLHQud2EoKSx0LlRhKCl9LFRocmlmdC5vYS5wcm90b3R5cGUuU2E9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2RlfSxUaHJpZnQuYmE9VGhyaWZ0LkVhPWZ1bmN0aW9uKHQsZSl7dGhpcy51cmw9dCx0aGlzLklhPTAsdGhpcy5SYT0wLHRoaXMua2E9ZSYmZS5rYSx0aGlzLkNhPVwiXCIsdGhpcy5PYT1cIlwifSxUaHJpZnQuRWEucHJvdG90eXBlPXtQYTpmdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKHQpe310cnl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KFwiTXN4bWwyLlhNTEhUVFBcIil9Y2F0Y2goZSl7fXRyeXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKX1jYXRjaChpKXt9dGhyb3dcIllvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgWEhSLlwifSxmbHVzaDpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXM7aWYodCYmIWV8fHZvaWQgMD09PXRoaXMudXJsfHxcIlwiPT09dGhpcy51cmwpcmV0dXJuIHRoaXMuQ2E7dmFyIHI9dGhpcy5QYSgpO2lmKHIub3ZlcnJpZGVNaW1lVHlwZSYmci5vdmVycmlkZU1pbWVUeXBlKFwiYXBwbGljYXRpb24vanNvblwiKSxlJiYoci5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgdD1lO3JldHVybiBmdW5jdGlvbigpezQ9PXRoaXMucmVhZHlTdGF0ZSYmMjAwPT10aGlzLnN0YXR1cyYmKGkuQWEodGhpcy5yZXNwb25zZVRleHQpLHQoKSl9fSgpKSxyLm9wZW4oXCJQT1NUXCIsdGhpcy51cmwsISF0KSxyLnNlbmQodGhpcy5DYSksIXR8fCFlKXtpZig0IT1yLnJlYWR5U3RhdGUpdGhyb3dcImVuY291bnRlcmVkIGFuIHVua25vd24gYWpheCByZWFkeSBzdGF0ZTogXCIrci5yZWFkeVN0YXRlO2lmKDIwMCE9ci5zdGF0dXMpdGhyb3dcImVuY291bnRlcmVkIGEgdW5rbm93biByZXF1ZXN0IHN0YXR1czogXCIrci5zdGF0dXM7dGhpcy5PYT1yLnJlc3BvbnNlVGV4dCx0aGlzLk5hPXRoaXMuT2EubGVuZ3RoLHRoaXMuSWE9dGhpcy5PYS5sZW5ndGgsdGhpcy5SYT0wfX0seGE6ZnVuY3Rpb24odCxlLGkscil7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGpRdWVyeXx8XCJ1bmRlZmluZWRcIj09dHlwZW9mIGpRdWVyeS5EZWZlcnJlZCl0aHJvd1wiVGhyaWZ0LmpzIHJlcXVpcmVzIGpRdWVyeSAxLjUrIHRvIHVzZSBhc3luY2hyb25vdXMgcmVxdWVzdHNcIjt2YXIgbj10aGlzLG89alF1ZXJ5LmFqYXgoe3VybDp0aGlzLnVybCxkYXRhOmUsdHlwZTpcIlBPU1RcIixkczohMSxjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL2pzb25cIixCYTpcInRleHQgdGhyaWZ0XCIsRmE6e19hOmZ1bmN0aW9uKGUpe24uQWEoZSk7dmFyIGk9ci5jYWxsKHQpO3JldHVybiBpfX0sY29udGV4dDp0LHN1Y2Nlc3M6alF1ZXJ5Lm1ha2VBcnJheShpKS5wb3AoKX0pO3JldHVybiBvfSxBYTpmdW5jdGlvbih0KXt0aGlzLk9hPXQsdGhpcy5OYT10aGlzLk9hLmxlbmd0aCx0aGlzLklhPXRoaXMuT2EubGVuZ3RoLHRoaXMuUmE9MH0saXNPcGVuOmZ1bmN0aW9uKCl7cmV0dXJuITB9LG9wZW46ZnVuY3Rpb24oKXt9LGNsb3NlOmZ1bmN0aW9uKCl7fSxyZWFkOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuSWEtdGhpcy5SYTtpZigwPT09ZSlyZXR1cm5cIlwiO3ZhciBpPXQ7ZTx0JiYoaT1lKTt2YXIgcj10aGlzLnJlYWRfYnVmLnN1YnN0cih0aGlzLlJhLGkpO3JldHVybiB0aGlzLlJhKz1pLHJ9LERhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuT2F9LHdyaXRlOmZ1bmN0aW9uKHQpe3RoaXMuQ2E9dH0sSGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5DYX19LFRocmlmdC5MYT1mdW5jdGlvbih0KXt0aGlzLk1hKHQpfSxUaHJpZnQuTGEucHJvdG90eXBlPXtNYTpmdW5jdGlvbih0KXt0aGlzLnVybD10LHRoaXMuamE9bnVsbCx0aGlzLmNhbGxiYWNrcz1bXSx0aGlzLlVhPVtdLHRoaXMuQ2E9XCJcIix0aGlzLk9hPVwiXCIsdGhpcy5WYT0wLHRoaXMuUWE9MH0sZmx1c2g6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzO3RoaXMuaXNPcGVuKCk/KHRoaXMuamEuc2VuZCh0aGlzLkNhKSx0aGlzLmNhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZTtyZXR1cm4gZnVuY3Rpb24oZSl7aS5BYShlKSx0KCl9fSgpKSk6dGhpcy5VYS5wdXNoKHtxYTp0aGlzLkNhLEphOmV9KX0sS2E6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuVWEubGVuZ3RoPjAmJih0aGlzLlVhLmZvckVhY2goZnVuY3Rpb24oZSl7dGhpcy5qYS5zZW5kKGUucWEpLHRoaXMuY2FsbGJhY2tzLnB1c2goZnVuY3Rpb24oKXt2YXIgaT1lLkphO3JldHVybiBmdW5jdGlvbihlKXt0LkFhKGUpLGkoKX19KCkpfSksdGhpcy5VYT1bXSl9LEdhOmZ1bmN0aW9uKHQpe3RoaXMuTWEodGhpcy51cmwpfSx6YTpmdW5jdGlvbih0KXt0aGlzLmNhbGxiYWNrcy5sZW5ndGgmJnRoaXMuY2FsbGJhY2tzLnNoaWZ0KCkodC5kYXRhKX0sV2E6ZnVuY3Rpb24odCl7Y29uc29sZS5sb2coXCJUaHJpZnQgV2ViU29ja2V0IEVycm9yOiBcIit0LnRvU3RyaW5nKCkpLHRoaXMuamEuY2xvc2UoKX0sQWE6ZnVuY3Rpb24odCl7dGhpcy5PYT10LHRoaXMuTmE9dGhpcy5PYS5sZW5ndGgsdGhpcy5JYT10aGlzLk9hLmxlbmd0aCx0aGlzLlJhPTB9LGlzT3BlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmphJiZ0aGlzLmphLnJlYWR5U3RhdGU9PXRoaXMuamEuT1BFTn0sb3BlbjpmdW5jdGlvbigpe3RoaXMuamEmJnRoaXMuamEucmVhZHlTdGF0ZSE9dGhpcy5qYS5DTE9TRUR8fCh0aGlzLmphPW5ldyBXZWJTb2NrZXQodGhpcy51cmwpLHRoaXMuamEub25vcGVuPXRoaXMuS2EuYmluZCh0aGlzKSx0aGlzLmphLm9ubWVzc2FnZT10aGlzLnphLmJpbmQodGhpcyksdGhpcy5qYS5vbmVycm9yPXRoaXMuV2EuYmluZCh0aGlzKSx0aGlzLmphLm9uY2xvc2U9dGhpcy5HYS5iaW5kKHRoaXMpKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmphLmNsb3NlKCl9LHJlYWQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5JYS10aGlzLlJhO2lmKDA9PT1lKXJldHVyblwiXCI7dmFyIGk9dDtlPHQmJihpPWUpO3ZhciByPXRoaXMucmVhZF9idWYuc3Vic3RyKHRoaXMuUmEsaSk7cmV0dXJuIHRoaXMuUmErPWkscn0sRGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5PYX0sd3JpdGU6ZnVuY3Rpb24odCl7dGhpcy5DYT10fSxIYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLkNhfX0sVGhyaWZ0LiRhPVRocmlmdC5ZYT1mdW5jdGlvbih0KXt0aGlzLlhhPXR9LFRocmlmdC5ZYS5icz17fSxUaHJpZnQuWWEuYnNbVGhyaWZ0LmJzLkJPT0xdPSdcInRmXCInLFRocmlmdC5ZYS5ic1tUaHJpZnQuYnMuQllURV09J1wiaThcIicsVGhyaWZ0LllhLmJzW1RocmlmdC5icy5Dc109J1wiaTE2XCInLFRocmlmdC5ZYS5ic1tUaHJpZnQuYnMuT3NdPSdcImkzMlwiJyxUaHJpZnQuWWEuYnNbVGhyaWZ0LmJzLlBzXT0nXCJpNjRcIicsVGhyaWZ0LllhLmJzW1RocmlmdC5icy5rc109J1wiZGJsXCInLFRocmlmdC5ZYS5ic1tUaHJpZnQuYnMueHNdPSdcInJlY1wiJyxUaHJpZnQuWWEuYnNbVGhyaWZ0LmJzLkFzXT0nXCJzdHJcIicsVGhyaWZ0LllhLmJzW1RocmlmdC5icy5Cc109J1wibWFwXCInLFRocmlmdC5ZYS5ic1tUaHJpZnQuYnMuX3NdPSdcImxzdFwiJyxUaHJpZnQuWWEuYnNbVGhyaWZ0LmJzLkZzXT0nXCJzZXRcIicsVGhyaWZ0LllhLlphPXt9LFRocmlmdC5ZYS5aYS50Yz1UaHJpZnQuYnMuQk9PTCxUaHJpZnQuWWEuWmEuZWM9VGhyaWZ0LmJzLkJZVEUsVGhyaWZ0LllhLlphLmljPVRocmlmdC5icy5DcyxUaHJpZnQuWWEuWmEucmM9VGhyaWZ0LmJzLk9zLFRocmlmdC5ZYS5aYS5uYz1UaHJpZnQuYnMuUHMsVGhyaWZ0LllhLlphLm9jPVRocmlmdC5icy5rcyxUaHJpZnQuWWEuWmEuc2M9VGhyaWZ0LmJzLnhzLFRocmlmdC5ZYS5aYS5hYz1UaHJpZnQuYnMuQXMsVGhyaWZ0LllhLlphLm1hcD1UaHJpZnQuYnMuQnMsVGhyaWZ0LllhLlphLmNjPVRocmlmdC5icy5fcyxUaHJpZnQuWWEuWmEuc2V0PVRocmlmdC5icy5GcyxUaHJpZnQuWWEuU3M9MSxUaHJpZnQuWWEucHJvdG90eXBlPXtoYzpmdW5jdGlvbigpe3JldHVybiB0aGlzLlhhfSxwYzpmdW5jdGlvbih0LGUsaSl7dGhpcy51Yz1bXSx0aGlzLmxjPVtdLHRoaXMudWMucHVzaChbVGhyaWZ0LllhLlNzLCdcIicrdCsnXCInLGUsaV0pfSxkYzpmdW5jdGlvbigpe3ZhciB0PXRoaXMudWMucG9wKCk7dGhpcy5mYz10aGlzLnVjLnBvcCgpLHRoaXMuZmMucHVzaCh0KSx0aGlzLmdjPVwiW1wiK3RoaXMuZmMuam9pbihcIixcIikrXCJdXCIsdGhpcy5YYS53cml0ZSh0aGlzLmdjKX0sZmE6ZnVuY3Rpb24odCl7dGhpcy5sYy5wdXNoKHRoaXMudWMubGVuZ3RoKSx0aGlzLnVjLnB1c2goe30pfSxUYTpmdW5jdGlvbigpe3ZhciB0PXRoaXMubGMucG9wKCksZT10aGlzLnVjW3RdLGk9XCJ7XCIscj0hMDtmb3IodmFyIG4gaW4gZSlyP3I9ITE6aSs9XCIsXCIsaSs9bitcIjpcIitlW25dO2krPVwifVwiLHRoaXMudWNbdF09aX0sZ2E6ZnVuY3Rpb24odCxlLGkpe3RoaXMubGMucHVzaCh0aGlzLnVjLmxlbmd0aCksdGhpcy51Yy5wdXNoKHt2YzonXCInK2krJ1wiJyx5YzpUaHJpZnQuWWEuYnNbZV19KX0seWE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVjLnBvcCgpLGU9dGhpcy51Yy5wb3AoKTt0aGlzLnVjW3RoaXMudWMubGVuZ3RoLTFdW2UudmNdPVwie1wiK2UueWMrXCI6XCIrdCtcIn1cIix0aGlzLmxjLnBvcCgpfSx3YTpmdW5jdGlvbigpe30sbWM6ZnVuY3Rpb24odCxlLGkpe3RoaXMubGMucHVzaCh0aGlzLnVjLmxlbmd0aCksdGhpcy51Yy5wdXNoKFtUaHJpZnQuWWEuYnNbdF0sVGhyaWZ0LllhLmJzW2VdLDBdKX0sd2M6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxjLnBvcCgpO2lmKHQhPXRoaXMudWMubGVuZ3RoKXsodGhpcy51Yy5sZW5ndGgtdC0xKSUyIT09MCYmdGhpcy51Yy5wdXNoKFwiXCIpO3ZhciBlPSh0aGlzLnVjLmxlbmd0aC10LTEpLzI7dGhpcy51Y1t0XVt0aGlzLnVjW3RdLmxlbmd0aC0xXT1lO2Zvcih2YXIgaT1cIn1cIixyPSEwO3RoaXMudWMubGVuZ3RoPnQrMTspe3ZhciBuPXRoaXMudWMucG9wKCksbz10aGlzLnVjLnBvcCgpO3I/cj0hMTppPVwiLFwiK2ksaXNOYU4obyl8fChvPSdcIicrbysnXCInKSxpPW8rXCI6XCIrbitpfWk9XCJ7XCIraSx0aGlzLnVjW3RdLnB1c2goaSksdGhpcy51Y1t0XT1cIltcIit0aGlzLnVjW3RdLmpvaW4oXCIsXCIpK1wiXVwifX0sVGM6ZnVuY3Rpb24odCxlKXt0aGlzLmxjLnB1c2godGhpcy51Yy5sZW5ndGgpLHRoaXMudWMucHVzaChbVGhyaWZ0LllhLmJzW3RdLGVdKX0sU2M6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5sYy5wb3AoKTt0aGlzLnVjLmxlbmd0aD50KzE7KXt2YXIgZT10aGlzLnVjW3QrMV07dGhpcy51Yy5zcGxpY2UodCsxLDEpLHRoaXMudWNbdF0ucHVzaChlKX10aGlzLnVjW3RdPVwiW1wiK3RoaXMudWNbdF0uam9pbihcIixcIikrXCJdXCJ9LGJjOmZ1bmN0aW9uKHQsZSl7dGhpcy5sYy5wdXNoKHRoaXMudWMubGVuZ3RoKSx0aGlzLnVjLnB1c2goW1RocmlmdC5ZYS5ic1t0XSxlXSl9LEVjOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMubGMucG9wKCk7dGhpcy51Yy5sZW5ndGg+dCsxOyl7dmFyIGU9dGhpcy51Y1t0KzFdO3RoaXMudWMuc3BsaWNlKHQrMSwxKSx0aGlzLnVjW3RdLnB1c2goZSl9dGhpcy51Y1t0XT1cIltcIit0aGlzLnVjW3RdLmpvaW4oXCIsXCIpK1wiXVwifSxJYzpmdW5jdGlvbih0KXt0aGlzLnVjLnB1c2godD8xOjApfSxSYzpmdW5jdGlvbih0KXt0aGlzLnVjLnB1c2godCl9LGtjOmZ1bmN0aW9uKHQpe3RoaXMudWMucHVzaCh0KX0sbWE6ZnVuY3Rpb24odCl7dGhpcy51Yy5wdXNoKHQpfSxDYzpmdW5jdGlvbih0KXt0aGlzLnVjLnB1c2godCl9LE9jOmZ1bmN0aW9uKHQpe3RoaXMudWMucHVzaCh0KX0sdmE6ZnVuY3Rpb24odCl7aWYobnVsbD09PXQpdGhpcy51Yy5wdXNoKG51bGwpO2Vsc2V7Zm9yKHZhciBlPVwiXCIsaT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgcj10LmNoYXJBdChpKTtlKz0nXCInPT09cj8nXFxcXFwiJzpcIlxcXFxcIj09PXI/XCJcXFxcXFxcXFwiOlwiXFxiXCI9PT1yP1wiXFxcXGJcIjpcIlxcZlwiPT09cj9cIlxcXFxmXCI6XCJcXG5cIj09PXI/XCJcXFxcblwiOlwiXFxyXCI9PT1yP1wiXFxcXHJcIjpcIlxcdFwiPT09cj9cIlxcXFx0XCI6cn10aGlzLnVjLnB1c2goJ1wiJytlKydcIicpfX0sUGM6ZnVuY3Rpb24odCl7dGhpcy52YSh0KX0sQWM6ZnVuY3Rpb24oKXt0aGlzLk5jPVtdLHRoaXMuUmE9W10sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEpTT04mJlwiZnVuY3Rpb25cIj09dHlwZW9mIEpTT04ucGFyc2U/dGhpcy54Yz1KU09OLnBhcnNlKHRoaXMuWGEuRGEoKSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGpRdWVyeT90aGlzLnhjPWpRdWVyeS5wYXJzZUpTT04odGhpcy5YYS5EYSgpKTp0aGlzLnhjPWV2YWwodGhpcy5YYS5EYSgpKTt2YXIgcj17fSx2ZXJzaW9uPXRoaXMueGMuc2hpZnQoKTtpZih2ZXJzaW9uIT1UaHJpZnQuWWEuU3MpdGhyb3dcIldyb25nIHRocmlmdCBwcm90b2NvbCB2ZXJzaW9uOiBcIit2ZXJzaW9uO3JldHVybiByLkJjPXRoaXMueGMuc2hpZnQoKSxyLkZjPXRoaXMueGMuc2hpZnQoKSxyLl9jPXRoaXMueGMuc2hpZnQoKSx0aGlzLk5jLnB1c2godGhpcy54Yy5zaGlmdCgpKSxyfSxEYzpmdW5jdGlvbigpe30sSGM6ZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIGUuQmM9XCJcIix0aGlzLk5jW3RoaXMuTmMubGVuZ3RoLTFdaW5zdGFuY2VvZiBBcnJheSYmdGhpcy5OYy5wdXNoKHRoaXMuTmNbdGhpcy5OYy5sZW5ndGgtMV0uc2hpZnQoKSksZX0sZGE6ZnVuY3Rpb24oKXt0aGlzLk5jW3RoaXMuTmMubGVuZ3RoLTJdaW5zdGFuY2VvZiBBcnJheSYmdGhpcy5OYy5wb3AoKX0sc2E6ZnVuY3Rpb24oKXt2YXIgdD17fSxlPS0xLGk9VGhyaWZ0LmJzLkVzO2Zvcih2YXIgciBpbiB0aGlzLk5jW3RoaXMuTmMubGVuZ3RoLTFdKWlmKG51bGwhPT1yKXtlPXBhcnNlSW50KHIsMTApLHRoaXMuUmEucHVzaCh0aGlzLk5jLmxlbmd0aCk7dmFyIG49dGhpcy5OY1t0aGlzLk5jLmxlbmd0aC0xXVtlXTtkZWxldGUgdGhpcy5OY1t0aGlzLk5jLmxlbmd0aC0xXVtlXSx0aGlzLk5jLnB1c2gobik7YnJlYWt9aWYoZSE9LTEpZm9yKHZhciBvIGluIHRoaXMuTmNbdGhpcy5OYy5sZW5ndGgtMV0pbnVsbCE9PVRocmlmdC5ZYS5aYVtvXSYmKGk9VGhyaWZ0LllhLlphW29dLHRoaXMuTmNbdGhpcy5OYy5sZW5ndGgtMV09dGhpcy5OY1t0aGlzLk5jLmxlbmd0aC0xXVtvXSk7cmV0dXJuIHQuQmM9XCJcIix0LmFhPWksdC5jYT1lLHR9LGxhOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuUmEucG9wKCk7dGhpcy5OYy5sZW5ndGg+dDspdGhpcy5OYy5wb3AoKX0sTGM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLk5jLnBvcCgpLGU9dC5zaGlmdCgpO2UgaW5zdGFuY2VvZiBBcnJheSYmKHRoaXMuTmMucHVzaCh0KSx0PWUsZT10LnNoaWZ0KCkpO3ZhciBpPXt9O3JldHVybiBpLk1jPVRocmlmdC5ZYS5aYVtlXSxpLmpjPVRocmlmdC5ZYS5aYVt0LnNoaWZ0KCldLGkuc2l6ZT10LnNoaWZ0KCksdGhpcy5SYS5wdXNoKHRoaXMuTmMubGVuZ3RoKSx0aGlzLk5jLnB1c2godC5zaGlmdCgpKSxpfSxVYzpmdW5jdGlvbigpe3RoaXMubGEoKX0sVmM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLk5jW3RoaXMuTmMubGVuZ3RoLTFdLGU9e307cmV0dXJuIGUuUWM9VGhyaWZ0LllhLlphW3Quc2hpZnQoKV0sZS5zaXplPXQuc2hpZnQoKSx0aGlzLlJhLnB1c2godGhpcy5OYy5sZW5ndGgpLHRoaXMuTmMucHVzaCh0KSxlfSxxYzpmdW5jdGlvbigpe3RoaXMubGEoKX0sSmM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5WYyh0LGUpfSxLYzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnFjKCl9LEdjOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51YSgpO3JldHVybiBudWxsIT09dCYmXCIxXCI9PXQudmFsdWU/dC52YWx1ZT0hMDp0LnZhbHVlPSExLHR9LHpjOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWEoKX0sV2M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51YSgpfSx1YTpmdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD10aGlzLk5jW3RoaXMuTmMubGVuZ3RoLTFdKTt2YXIgZT17fTtpZih0IGluc3RhbmNlb2YgQXJyYXkpMD09PXQubGVuZ3RoP2UudmFsdWU9dm9pZCAwOmUudmFsdWU9dC5zaGlmdCgpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIE9iamVjdCl7Zm9yKHZhciBpIGluIHQpaWYobnVsbCE9PWkpe3RoaXMuTmMucHVzaCh0W2ldKSxkZWxldGUgdFtpXSxlLnZhbHVlPWk7YnJlYWt9fWVsc2UgZS52YWx1ZT10LHRoaXMuTmMucG9wKCk7cmV0dXJuIGV9LCRjOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWEoKX0sWWM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51YSgpfSxoYTpmdW5jdGlvbigpe3ZhciB0PXRoaXMudWEoKTtyZXR1cm4gdH0sWGM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYSgpfSxwYTpmdW5jdGlvbih0KXt2YXIgZSxpO3N3aXRjaCh0KXtjYXNlIFRocmlmdC5icy5FczpyZXR1cm4gbnVsbDtjYXNlIFRocmlmdC5icy5CT09MOnJldHVybiB0aGlzLkdjKCk7Y2FzZSBUaHJpZnQuYnMuQllURTpyZXR1cm4gdGhpcy56YygpO2Nhc2UgVGhyaWZ0LmJzLkNzOnJldHVybiB0aGlzLldjKCk7Y2FzZSBUaHJpZnQuYnMuT3M6cmV0dXJuIHRoaXMudWEoKTtjYXNlIFRocmlmdC5icy5QczpyZXR1cm4gdGhpcy4kYygpO2Nhc2UgVGhyaWZ0LmJzLmtzOnJldHVybiB0aGlzLlljKCk7Y2FzZSBUaHJpZnQuYnMuQXM6cmV0dXJuIHRoaXMuaGEoKTtjYXNlIFRocmlmdC5icy54czpmb3IodGhpcy5IYygpOzspe2lmKGU9dGhpcy5zYSgpLGUuYWE9PVRocmlmdC5icy5FcylicmVhazt0aGlzLnBhKGUuYWEpLHRoaXMubGEoKX1yZXR1cm4gdGhpcy5kYSgpLG51bGw7Y2FzZSBUaHJpZnQuYnMuQnM6Zm9yKGU9dGhpcy5MYygpLGk9MDtpPGUuc2l6ZTtpKyspaT4wJiZ0aGlzLk5jLmxlbmd0aD50aGlzLlJhW3RoaXMuUmEubGVuZ3RoLTFdKzEmJnRoaXMuTmMucG9wKCksdGhpcy5wYShlLk1jKSx0aGlzLnBhKGUuamMpO3JldHVybiB0aGlzLlVjKCksbnVsbDtjYXNlIFRocmlmdC5icy5Gczpmb3IoZT10aGlzLkpjKCksaT0wO2k8ZS5zaXplO2krKyl0aGlzLnBhKGUuUWMpO3JldHVybiB0aGlzLktjKCksbnVsbDtjYXNlIFRocmlmdC5icy5fczpmb3IoZT10aGlzLlZjKCksaT0wO2k8ZS5zaXplO2krKyl0aGlzLnBhKGUuUWMpO3JldHVybiB0aGlzLnFjKCksbnVsbH19fSxUaHJpZnQuWmM9ZnVuY3Rpb24odCxlLGkscil7VGhyaWZ0LllhLmNhbGwodGhpcyxlLGksciksdGhpcy50aD10fSxUaHJpZnQucXMoVGhyaWZ0LlpjLFRocmlmdC5ZYSxcIm11bHRpcGxleFByb3RvY29sXCIpLFRocmlmdC5aYy5wcm90b3R5cGUucGM9ZnVuY3Rpb24odCxlLGkpe2U9PT1UaHJpZnQuTHMuTXN8fGU9PT1UaHJpZnQuTHMuVnM/VGhyaWZ0LllhLnByb3RvdHlwZS5wYy5jYWxsKHRoaXMsdGhpcy50aCtcIjpcIit0LGUsaSk6VGhyaWZ0LllhLnByb3RvdHlwZS5wYy5jYWxsKHRoaXMsdCxlLGkpfSxUaHJpZnQuZWg9ZnVuY3Rpb24oKXt0aGlzLmloPTB9LFRocmlmdC5laC5wcm90b3R5cGUucmg9ZnVuY3Rpb24odCxlLGkpe2UuZW8mJihlPWUuZW8pO3ZhciByPXRoaXM7ZS5wcm90b3R5cGUubmg9ZnVuY3Rpb24oKXtyZXR1cm4gci5paCs9MSxyLmlofTt2YXIgbj1uZXcgZShuZXcgVGhyaWZ0LlpjKHQsaSkpO3JldHVybiBufSxtb2R1bGUudD1UaHJpZnR9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIG5bdF19dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0fSgpO3QuSGl2ZVNlc3Npb249aTt2YXIgcjshZnVuY3Rpb24odCl7dFt0Lm9oPTBdPVwiR0VORVJJQ19FUlJPUlwiLHRbdC5zaD0xXT1cIk5PX1RFQ0hfQVZBSUxBQkxFXCIsdFt0LmFoPTJdPVwiTk9fVEVDSF9SRVNPTFZFRFwiLHRbdC5oaD0zXT1cIlRFQ0hfRVJST1JcIix0W3QucGg9NF09XCJUSUNLRVRfRVJST1JcIn0ocj10LnVofHwodC51aD17fSkpO3ZhciBuOyFmdW5jdGlvbih0KXt0W3RbXCJsaFwiXT0wXT1cIkdlbmVyaWMgVW5kZWZpbmVkIEVycm9yXCIsdFt0W1wiZGhcIl09MV09XCJObyBUZWNoIGF2YWlsYWJsZSB0byByZXNvbHZlIHRoZSB0aWNrZXRcIix0W3RbXCJmaFwiXT0yXT1cIk5vIGF2YWlsYWJsZSBUZWNoIGNvdWxkIHJlc29sdmVkIHRoZSB0aWNrZXRcIix0W3RbXCJnaFwiXT0zXT1cIlN0b3BwZWQgcmVzb2x2aW5nIHNlc3Npb24gb24gbGFzdCB0ZWNoIG9uRXJyb3JcIix0W3RbXCJ2aFwiXT00XT1cIlRoZSB0aWNrZXQgY291bGQgbm90IGJlIHJlc29sdmVkXCJ9KG58fChuPXt9KSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0fSgpO3QuSGl2ZVNlc3Npb25FcnJvcj1vO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuY29kZT10LHRoaXMubWVzc2FnZT1lfXJldHVybiB0fSgpO3QuSGl2ZVRlY2hFcnJvcj1zO3ZhciBhOyFmdW5jdGlvbih0KXt0W3QueWg9MF09XCJOT1RfUkVBRFlcIix0W3QubWg9MV09XCJQTFVHSU5fRVJST1JcIix0W3Qud2g9Ml09XCJTRVNTSU9OX0VSUk9SXCIsdFt0LnBoPTNdPVwiVElDS0VUX0VSUk9SXCIsdFt0LlRoPTRdPVwiVkVSU0lPTl9FUlJPUlwiLHRbdC5TaD01XT1cIlRJTUVPVVRfRVJST1JcIn0oYT10LmJofHwodC5iaD17fSkpO3ZhciBjOyFmdW5jdGlvbih0KXt0W3QuRWg9MF09XCJPS1wiLHRbdC5JaD0xXT1cIkhJVkVfTk9UX0FMTE9XRURcIix0W3QuUmg9Ml09XCJUSUNLRVRfTk9UX1JFU09MVkVEXCIsdFt0LmtoPTNdPVwiVElNRU9VVF9SRVNPTFZJTkdfVElDS0VUXCJ9KGM9dC5DaHx8KHQuQ2g9e30pKSx0LmdldEhpdmVTZXNzaW9uRXJyb3JNZXNzYWdlPWU7dmFyIGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuT2g9dH1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0UGx1Z2luU3RhdHVzQ29kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLk9oLlBoKCl9LHR9KCk7dC5BaD1ofShpPWUucHR8fChlLnB0PXt9KSksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3cucHQmJih3aW5kb3cucHQ9e30pLHdpbmRvdy5wdC5nZXRIaXZlU2Vzc2lvbkVycm9yTWVzc2FnZT1pLmdldEhpdmVTZXNzaW9uRXJyb3JNZXNzYWdlKX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7aS55cj1cImh0dHBzOlwiPT09bG9jYXRpb24ucHJvdG9jb2wsaS5Fcj0hMCxpLk5oPTFlNCxpLnhoPTZlNCxlLmtlPWl9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1pKDQxKSxuPWkoOCksbz1pKDI1KTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2Ygcyl2YXIgcz1cIjU5MjgzNWE2YjQyMDRkZDE5N2MwMDQ4ODYxMDAwM2UwXCI7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGEpdmFyIGE9XCIwLjhcIjtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgYyl2YXIgYz0hMDt2YXIgaD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtpZih0aGlzLnN0PSExLHQuR2kpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3I6IEluc3RhbnRpYXRpb24gZmFpbGVkOiBVc2UgQXRhdHVzTG9nZ2VyLmdldEluc3RhbmNlKCkgaW5zdGVhZCBvZiBuZXcuXCIpO3ZhciBlLGk9dm9pZCAwIT1uLkhpdmVDb25maWcuRXJyb3JNb25pdG9yLmtleT9uLkhpdmVDb25maWcuRXJyb3JNb25pdG9yLmtleTpzLHI9MT09bi5IaXZlQ29uZmlnLkVycm9yTW9uaXRvci5lbmFibGVkUlVNLGE9MT09bi5IaXZlQ29uZmlnLkVycm9yTW9uaXRvci5lbmFibGVLZXlDb21iaW5hdGlvbixoPTE9PW4uSGl2ZUNvbmZpZy5FcnJvck1vbml0b3IuZW5hYmxlZEVycm9yRmlsdGVyO2gmJihlPXRoaXMuQmgoKSksYXRhdHVzJiYodm9pZCAwPT1uLkhpdmVDb25maWcuRXJyb3JNb25pdG9yLmVuYWJsZWQmJmN8fHZvaWQgMCE9bi5IaXZlQ29uZmlnLkVycm9yTW9uaXRvci5lbmFibGVkJiYxPT1uLkhpdmVDb25maWcuRXJyb3JNb25pdG9yLmVuYWJsZWQpJiYoYXRhdHVzLmNvbmZpZyhpLHtlbmFibGVTb3VyY2VtYXA6ITAsZGlzYWJsZVJVTTohcix2ZXJzaW9uOm8udmVyc2lvbixiZWZvcmVFcnJvclNlbmQ6ZnVuY3Rpb24odCl7dmFyIGk9ITE7aWYodCYmdC5jdXN0b21EYXRhJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5jdXN0b21EYXRhLmZvcmNlU2VuZCYmKGk9dC5jdXN0b21EYXRhLmZvcmNlU2VuZCxkZWxldGUgdC5jdXN0b21EYXRhLmZvcmNlU2VuZCwwPT09T2JqZWN0LmtleXModC5jdXN0b21EYXRhKS5sZW5ndGgmJih0LmN1c3RvbURhdGE9bnVsbCkpLCFofHxpKXJldHVybiEwO2lmKCFlKXJldHVybiExO3RyeXt2YXIgcj0hMTtpZih0LmJhY2tUcmFjZXMpe2Zvcih2YXIgbj0wLG89dC5iYWNrVHJhY2VzO248by5sZW5ndGg7bisrKXt2YXIgcz1vW25dLGE9cy5mLmluZGV4T2YoZSk+LTE7aWYoYSYmcy5sbj41KXtyPSEwO2JyZWFrfX1yJiYodC5uYW1lPXQubmFtZS5yZXBsYWNlKC8lcyBcXFtbMC05XXsyfTpbMC05XXsyfTpbMC05XXsyfTpbMC05XStdIC8sXCJcIiksdC5uYW1lLmluZGV4T2YoXCJTdGF0dXMgQ29kZSBFcnJvcjpcIik+PTAmJih0LnRhZ3M9W1wiUGx1Z2luIEVycm9yIENvZGVcIix0Lm5hbWUuc3BsaXQoXCI6XCIpWzFdLnRyaW0oKV0pKX1yZXR1cm4gcn1jYXRjaChjKXtyZXR1cm4hMX19fSkuaW5zdGFsbCgpLGEmJnRoaXMuRmgoKSx0aGlzLnN0PSEwLHdpbmRvdy5jb25zb2xlJiZjb25zb2xlLmxvZyhcIltIaXZlQ29tbV0gRXJyb3IgTW9uaXRvciBpbnN0YWxsZWQgW1JVTTpcIityK1wiLCBLZXlIYW5kbGVyOlwiK2ErXCJdXCIpLGgmJiFlJiZ0aGlzLl9oKFwiQ291bGQgbm90IGV4dHJhY3QgZXJyb3IgZmlsdGVyXCIpKX1yZXR1cm4gdC5XaT1mdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLkdpJiYodGhpcy5HaT1uZXcgdCksdGhpcy5HaX0sdC5wcm90b3R5cGUuRmg9ZnVuY3Rpb24oKXtyLkhoLldpKCkuRGgoWzE2LDE3LDg4XSxmdW5jdGlvbigpe3RyeXt0aHJvdyBuZXcgRXJyb3IoXCJVcGxvYWQgY29uc29sZSBsb2dzXCIpfWNhdGNoKHQpe2F0YXR1cy5ub3RpZnkodCksd2luZG93LmNvbnNvbGUmJmNvbnNvbGUubG9nKFwiW0hpdmVDb21tXSBjb25zb2xlIGxvZyB1cGxvYWRlZCBmb3IgZGVidWdnaW5nXCIpfX0pfSx0LnByb3RvdHlwZS5CaD1mdW5jdGlvbigpe3RyeXt0aHJvdyBuZXcgRXJyb3IoXCJ0ZXN0XCIpfWNhdGNoKHQpe3ZhciBlPXQuc3RhY2subWF0Y2goLyhcXC9cXC8uKlxcLmpzKS9pKTtpZihlJiZlLmxlbmd0aD4wKXJldHVybiBlWzBdfX0sdC5wcm90b3R5cGUuc2V0VXNlcj1mdW5jdGlvbih0KXthdGF0dXMmJnRoaXMuc3QmJmF0YXR1cy5zZXRVc2VyKHQpfSx0LnByb3RvdHlwZS5MaD1mdW5jdGlvbih0KXt0aGlzLm09dH0sdC5wcm90b3R5cGUuc2V0Q3VzdG9tRGF0YT1mdW5jdGlvbih0KXthdGF0dXMmJnRoaXMuc3QmJmF0YXR1cy5zZXRDdXN0b21EYXRhKHQpfSx0LnByb3RvdHlwZS5faD1mdW5jdGlvbih0LGUpe2lmKHRoaXMubSYmdGhpcy5tLndhcm4odCksYXRhdHVzJiZ0aGlzLnN0KXRyeXt0aHJvdyBuZXcgRXJyb3IodCl9Y2F0Y2goaSl7ZXx8KGU9e30pLGUuZm9yY2VTZW5kPSEwLGF0YXR1cy5ub3RpZnkoaSxlKX19LHQucHJvdG90eXBlLnNldFRhZ3M9ZnVuY3Rpb24odCl7YXRhdHVzJiZ0aGlzLnN0JiZhdGF0dXMuc2V0VGFncyh0KX0sdC5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKHQsZSl7YXRhdHVzJiZ0aGlzLnN0JiYoZXx8KGU9e30pLGUuZm9yY2VTZW5kPSEwLGF0YXR1cy5ub3RpZnkodCxlKSl9LHR9KCk7ZS5FcnJvck1vbml0b3I9aH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciByPWkoMjEpLG49aSgzNCksbz1uLk1oLHM9bi5qaCxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuU291cmNlVVJMUGFyYW1zPXt9fXJldHVybiB0LnByb3RvdHlwZS5VaD1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdClpZihcIlNvdXJjZVVSTFBhcmFtc1wiPT09ZSlmb3IodmFyIGkgaW4gdFtlXSl0aGlzW2VdW2ldPXRbZV1baV07ZWxzZSB0aGlzW2VdPXRbZV07dGhpcy5WaCgpfSx0LnByb3RvdHlwZS5RaD1mdW5jdGlvbigpe3ZhciB0PVwiYjY2MTRjM2U0Y2QxZDE0ZWVkNmIzOWVmMmJmNmI5YTNlM2Q2ZGZjZDI2Njk5ZDcyNzBkODg3OTIzYmNiZjgzZWZiM2RhZGI3MTdjMGJhZmIxZDQ4ZGNlMzYxZWIzNjliN2NjNDZlNTc0MDVlYmZiZGQ4NmMzMTc1NTMyZmU1NmNjNzdmNDczZDM0NWIyY2I2ZmVhZmI1YWIwZTI0ZjM2NGEzZDI1OWYyN2U0YTJmZDk3NDY4MjY1YmRkZmQzZGRkM2FjNjQyNTFkYjY1MGNhMDI4MGFmMmIyYzQ1ZThiMWM4ZjA0MGYyYzQzM2FjMGExNTdkMmIzZmQ5MTUxNzI1M1wiLGU9XCIwMTAwMDFcIixpPXRoaXMuQ29udGVudElkK3RoaXMuU2l0ZUlkK3RoaXMuQ1JPSWQrdGhpcy5Tb3VyY2VVUkwscj1uZXcgbztyLnFoKHQsZSk7dmFyIG49cyh0aGlzLlNpZ25hdHVyZSk7cmV0dXJuIHIuSmgoaSxuKX0sdC5wcm90b3R5cGUuS2g9ZnVuY3Rpb24odCl7dGhpcy50aWNrZXRVcmw9dDt2YXIgZT1yLnBhcnNlKHQpLGk9ZS5wYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgzKTtpZih0aGlzLlNpdGVJZD1pWzBdLHRoaXMuQ1JPSWQ9aVsxXSx0aGlzLkNvbnRlbnRJZD1pWzJdLHRoaXMuR2g9aVszXSxlLnZpKXRyeXt2YXIgbj1lLnZpLnNwbGl0KFwiJlwiKTtmb3IodmFyIG8gaW4gbil7dmFyIHM9bltvXS5zcGxpdCgvPSguKykvKTt0aGlzLlNvdXJjZVVSTFBhcmFtc1tzWzBdXT1zWzFdfX1jYXRjaChhKXt9dGhpcy56aD10LmluZGV4T2YoXCJhcGktdGVzdFwiKT4tMX0sdC5wcm90b3R5cGUuYm49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5TaXRlSWR9LHQucHJvdG90eXBlLkVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQ1JPSWR9LHQucHJvdG90eXBlLmVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQ29udGVudElkfSx0LnByb3RvdHlwZS5XaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkdofSx0LnByb3RvdHlwZS4kaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLlNvdXJjZVVSTH0sdC5wcm90b3R5cGUuWWg9ZnVuY3Rpb24oKXtpZih0aGlzLlhoPXRoaXMuU291cmNlVVJMLHZvaWQgMCE9dGhpcy5Tb3VyY2VVUkxQYXJhbXMpe3ZhciB0PW5ldyBBcnJheTtmb3IodmFyIGUgaW4gdGhpcy5Tb3VyY2VVUkxQYXJhbXMpdC5wdXNoKGUrXCI9XCIrdGhpcy5Tb3VyY2VVUkxQYXJhbXNbZV0pO3QubGVuZ3RoPjAmJnRoaXMuWGgmJih0aGlzLlhoKz0odGhpcy5YaC5pbmRleE9mKFwiP1wiKT4wP1wiJlwiOlwiP1wiKSt0LmpvaW4oXCImXCIpKX19LHQucHJvdG90eXBlLlZoPWZ1bmN0aW9uKCl7dmFyIHQ9aSgyMik7dGhpcy5zZXNzaW9uSWQ9dC5aaCgpfSx0LnByb3RvdHlwZS50cD1mdW5jdGlvbigpe3JldHVybiB0aGlzLlhofHx0aGlzLlloKCksdGhpcy5YaH0sdC5wcm90b3R5cGUuT249ZnVuY3Rpb24oKXtyZXR1cm5cIltcIit0aGlzLlNpdGVJZCtcIi9cIit0aGlzLkNST0lkK1wiL1wiK3RoaXMuQ29udGVudElkK1wiXVwifSx0LnByb3RvdHlwZS5lcD1mdW5jdGlvbigpe3JldHVyblt0aGlzLlNpdGVJZCx0aGlzLkNST0lkLHRoaXMuQ29udGVudElkXX0sdC5wcm90b3R5cGUuaXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5Tb3VyY2VVUkwrXCItW1wiK3RoaXMuU2l0ZUlkK1wiL1wiK3RoaXMuQ1JPSWQrXCIvXCIrdGhpcy5Db250ZW50SWQrXCJdXCJ9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuT24oKX0sdH0oKTthLnJwPVwiXmh0dHBzPzovL2FwaSg/Oi10ZXN0KT8uaGl2ZXN0cmVhbWluZy5jb20vdjEvZXZlbnRzLyg/OndpbGRjYXJkLyk/XCIsYS5ucD1cIkNST0lkXCIsYS5vcD1cIlNpdGVJZFwiLGEuc3A9XCJDb250ZW50SWRcIixlLmFwPWF9LGZ1bmN0aW9uKHQsZSxpKXt2YXIgcixuLG87LyohXG4gKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzXG4gKlxuICogVmVyc2lvbjogMS4xOC4xMFxuICpcbiAqIEF1dGhvcjogUm9kbmV5IFJlaG1cbiAqIFdlYjogaHR0cDovL21lZGlhbGl6ZS5naXRodWIuaW8vVVJJLmpzL1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyXG4gKiAgIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2VcbiAqXG4gKi9cbiAgIWZ1bmN0aW9uKHMsYSl7XCJ1c2Ugc3RyaWN0XCI7XCJvYmplY3RcIj09dHlwZW9mIHQmJnQudD90LnQ9YShpKDYpLGkoNiksaSg2KSk6KG49W2koNiksaSg2KSxpKDYpXSxyPWEsbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByP3IuYXBwbHkoZSxuKTpyLCEodm9pZCAwIT09byYmKHQudD1vKSkpfSh0aGlzLGZ1bmN0aW9uKHQsZSxpLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPj0xLHI9YXJndW1lbnRzLmxlbmd0aD49MjtpZighKHRoaXMgaW5zdGFuY2VvZiBuKSlyZXR1cm4gaT9yP25ldyBuKHQsZSk6bmV3IG4odCk6bmV3IG47aWYodm9pZCAwPT09dCl7aWYoaSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidW5kZWZpbmVkIGlzIG5vdCBhIHZhbGlkIGFyZ3VtZW50IGZvciBVUklcIik7dD1cInVuZGVmaW5lZFwiIT10eXBlb2YgbG9jYXRpb24/bG9jYXRpb24uaHJlZitcIlwiOlwiXCJ9aWYobnVsbD09PXQmJmkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm51bGwgaXMgbm90IGEgdmFsaWQgYXJndW1lbnQgZm9yIFVSSVwiKTtyZXR1cm4gdGhpcy5ocmVmKHQpLHZvaWQgMCE9PWU/dGhpcy5jcChlKTp0aGlzfWZ1bmN0aW9uIG8odCl7cmV0dXJuIHQucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFtcXF1cXC9cXFxcXSkvZyxcIlxcXFwkMVwiKX1mdW5jdGlvbiBzKHQpe3JldHVybiB2b2lkIDA9PT10P1wiVW5kZWZpbmVkXCI6U3RyaW5nKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSkuc2xpY2UoOCwtMSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm5cIkFycmF5XCI9PT1zKHQpfWZ1bmN0aW9uIGModCxlKXt2YXIgaSxyLG49e307aWYoXCJSZWdFeHBcIj09PXMoZSkpbj1udWxsO2Vsc2UgaWYoYShlKSlmb3IoaT0wLHI9ZS5sZW5ndGg7aTxyO2krKyluW2VbaV1dPSEwO2Vsc2UgbltlXT0hMDtmb3IoaT0wLHI9dC5sZW5ndGg7aTxyO2krKyl7dmFyIG89biYmdm9pZCAwIT09blt0W2ldXXx8IW4mJmUudGVzdCh0W2ldKTtvJiYodC5zcGxpY2UoaSwxKSxyLS0saS0tKX1yZXR1cm4gdH1mdW5jdGlvbiBoKHQsZSl7dmFyIGkscjtpZihhKGUpKXtmb3IoaT0wLHI9ZS5sZW5ndGg7aTxyO2krKylpZighaCh0LGVbaV0pKXJldHVybiExO3JldHVybiEwfXZhciBuPXMoZSk7Zm9yKGk9MCxyPXQubGVuZ3RoO2k8cjtpKyspaWYoXCJSZWdFeHBcIj09PW4pe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0W2ldJiZ0W2ldLm1hdGNoKGUpKXJldHVybiEwfWVsc2UgaWYodFtpXT09PWUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gcCh0LGUpe2lmKCFhKHQpfHwhYShlKSlyZXR1cm4hMTtpZih0Lmxlbmd0aCE9PWUubGVuZ3RoKXJldHVybiExO3Quc29ydCgpLGUuc29ydCgpO2Zvcih2YXIgaT0wLHI9dC5sZW5ndGg7aTxyO2krKylpZih0W2ldIT09ZVtpXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiB1KHQpe3ZhciBlPS9eXFwvK3xcXC8rJC9nO3JldHVybiB0LnJlcGxhY2UoZSxcIlwiKX1mdW5jdGlvbiBsKHQpe3JldHVybiBlc2NhcGUodCl9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHQpLnJlcGxhY2UoL1shJygpKl0vZyxsKS5yZXBsYWNlKC9cXCovZyxcIiUyQVwiKX1mdW5jdGlvbiBmKHQpe3JldHVybiBmdW5jdGlvbihlLGkpe3JldHVybiB2b2lkIDA9PT1lP3RoaXMuaHBbdF18fFwiXCI6KHRoaXMuaHBbdF09ZXx8bnVsbCx0aGlzLnBwKCFpKSx0aGlzKX19ZnVuY3Rpb24gZyh0LGUpe3JldHVybiBmdW5jdGlvbihpLHIpe3JldHVybiB2b2lkIDA9PT1pP3RoaXMuaHBbdF18fFwiXCI6KG51bGwhPT1pJiYoaSs9XCJcIixpLmNoYXJBdCgwKT09PWUmJihpPWkuc3Vic3RyaW5nKDEpKSksdGhpcy5ocFt0XT1pLHRoaXMucHAoIXIpLHRoaXMpfX12YXIgdj1yJiZyLnVwO24udmVyc2lvbj1cIjEuMTguMTBcIjt2YXIgeT1uLnByb3RvdHlwZSxtPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7bi5ocD1mdW5jdGlvbigpe3JldHVybntwcm90b2NvbDpudWxsLHVzZXJuYW1lOm51bGwscGFzc3dvcmQ6bnVsbCxob3N0bmFtZTpudWxsLHVybjpudWxsLHBvcnQ6bnVsbCxwYXRoOm51bGwsdmk6bnVsbCxscDpudWxsLGRwOm4uZHAsZnA6bi5mcH19LG4uZHA9ITEsbi5mcD0hMCxuLmdwPS9eW2Etel1bYS16MC05ListXSokL2ksbi52cD0vW15hLXowLTlcXC4tXS9pLG4ueXA9Lyh4bi0tKS9pLG4ubXA9L15cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfSQvLG4ud3A9L15cXHMqKCgoWzAtOUEtRmEtZl17MSw0fTopezd9KFswLTlBLUZhLWZdezEsNH18OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezZ9KDpbMC05QS1GYS1mXXsxLDR9fCgoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7NX0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSwyfSl8OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7NH0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSwzfSl8KCg6WzAtOUEtRmEtZl17MSw0fSk/OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezN9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNH0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsMn06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Mn0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw1fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCwzfTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXsxfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDZ9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDR9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCg6KCgoOlswLTlBLUZhLWZdezEsNH0pezEsN30pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsNX06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSkpKCUuKyk/XFxzKiQvLG4uVHA9L1xcYigoPzpbYS16XVtcXHctXSs6KD86XFwvezEsM318W2EtejAtOSVdKXx3d3dcXGR7MCwzfVsuXXxbYS16MC05LlxcLV0rWy5dW2Etel17Miw0fVxcLykoPzpbXlxccygpPD5dK3xcXCgoW15cXHMoKTw+XSt8KFxcKFteXFxzKCk8Pl0rXFwpKSkqXFwpKSsoPzpcXCgoW15cXHMoKTw+XSt8KFxcKFteXFxzKCk8Pl0rXFwpKSkqXFwpfFteXFxzYCEoKVxcW1xcXXt9OzonXCIuLDw+P8KrwrvigJzigJ3igJjigJldKSkvZ2ksbi5TcD17c3RhcnQ6L1xcYig/OihbYS16XVthLXowLTkuKy1dKjpcXC9cXC8pfHd3d1xcLikvZ2ksZW5kOi9bXFxzXFxyXFxuXXwkLyx0cmltOi9bYCEoKVxcW1xcXXt9OzonXCIuLDw+P8KrwrvigJzigJ3igJ7igJjigJldKyQvLGJwOi8oXFwoW15cXCldKlxcKXxcXFtbXlxcXV0qXFxdfFxce1tefV0qXFx9fDxbXj5dKj4pL2d9LG4uRXA9e0lwOlwiODBcIixScDpcIjQ0M1wiLGtwOlwiMjFcIixDcDpcIjcwXCIsT3A6XCI4MFwiLFBwOlwiNDQzXCJ9LG4uQXA9L1teYS16QS1aMC05XFwuLV0vLG4uTnA9e2E6XCJocmVmXCIseHA6XCJjaXRlXCIsbGluazpcImhyZWZcIixCcDpcImhyZWZcIixGcDpcInNyY1wiLGZvcm06XCJhY3Rpb25cIixfcDpcInNyY1wiLERwOlwiaHJlZlwiLEhwOlwic3JjXCIsTHA6XCJzcmNcIixzb3VyY2U6XCJzcmNcIix0cmFjazpcInNyY1wiLGlucHV0Olwic3JjXCIsTXA6XCJzcmNcIix2aWRlbzpcInNyY1wifSxuLmpwPWZ1bmN0aW9uKHQpe2lmKHQmJnQubm9kZU5hbWUpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihcImlucHV0XCIhPT1lfHxcImltYWdlXCI9PT10LnR5cGUpcmV0dXJuIG4uTnBbZV19fSxuLmVuY29kZT1kLG4uZGVjb2RlPWRlY29kZVVSSUNvbXBvbmVudCxuLlVwPWZ1bmN0aW9uKCl7bi5lbmNvZGU9ZXNjYXBlLG4uZGVjb2RlPXVuZXNjYXBlfSxuLlZwPWZ1bmN0aW9uKCl7bi5lbmNvZGU9ZCxuLmRlY29kZT1kZWNvZGVVUklDb21wb25lbnR9LG4uUXA9e3BhdGhuYW1lOntlbmNvZGU6e3FwOi8lKDI0fDI2fDJCfDJDfDNCfDNEfDNBfDQwKS9naSxtYXA6e1wiJTI0XCI6XCIkXCIsXCIlMjZcIjpcIiZcIixcIiUyQlwiOlwiK1wiLFwiJTJDXCI6XCIsXCIsXCIlM0JcIjpcIjtcIixcIiUzRFwiOlwiPVwiLFwiJTNBXCI6XCI6XCIsXCIlNDBcIjpcIkBcIn19LGRlY29kZTp7cXA6L1tcXC9cXD8jXS9nLG1hcDp7SnA6XCIlMkZcIixLcDpcIiUzRlwiLEdwOlwiJTIzXCJ9fX0senA6e2VuY29kZTp7cXA6LyUoMjF8MjN8MjR8MjZ8Mjd8Mjh8Mjl8MkF8MkJ8MkN8MkZ8M0F8M0J8M0R8M0Z8NDB8NUJ8NUQpL2dpLG1hcDp7XCIlM0FcIjpcIjpcIixXcDpcIi9cIiwkcDpcIj9cIixZcDpcIiNcIixYcDpcIltcIixacDpcIl1cIixcIiU0MFwiOlwiQFwiLHR1OlwiIVwiLFwiJTI0XCI6XCIkXCIsXCIlMjZcIjpcIiZcIixldTpcIidcIixpdTpcIihcIixydTpcIilcIixudTpcIipcIixcIiUyQlwiOlwiK1wiLFwiJTJDXCI6XCIsXCIsXCIlM0JcIjpcIjtcIixcIiUzRFwiOlwiPVwifX19LG91OntlbmNvZGU6e3FwOi8lKDIxfDI0fDI3fDI4fDI5fDJBfDJCfDJDfDNCfDNEfDQwKS9naSxtYXA6e3R1OlwiIVwiLFwiJTI0XCI6XCIkXCIsZXU6XCInXCIsaXU6XCIoXCIscnU6XCIpXCIsbnU6XCIqXCIsXCIlMkJcIjpcIitcIixcIiUyQ1wiOlwiLFwiLFwiJTNCXCI6XCI7XCIsXCIlM0RcIjpcIj1cIixcIiU0MFwiOlwiQFwifX0sZGVjb2RlOntxcDovW1xcL1xcPyM6XS9nLG1hcDp7SnA6XCIlMkZcIixLcDpcIiUzRlwiLEdwOlwiJTIzXCIsc3U6XCIlM0FcIn19fX0sbi5hdT1mdW5jdGlvbih0LGUpe3ZhciBpPW4uZW5jb2RlKHQrXCJcIik7cmV0dXJuIHZvaWQgMD09PWUmJihlPW4uZnApLGU/aS5yZXBsYWNlKC8lMjAvZyxcIitcIik6aX0sbi5jdT1mdW5jdGlvbih0LGUpe3QrPVwiXCIsdm9pZCAwPT09ZSYmKGU9bi5mcCk7dHJ5e3JldHVybiBuLmRlY29kZShlP3QucmVwbGFjZSgvXFwrL2csXCIlMjBcIik6dCl9Y2F0Y2goaSl7cmV0dXJuIHR9fTt2YXIgdyxUPXtlbmNvZGU6XCJlbmNvZGVcIixkZWNvZGU6XCJkZWNvZGVcIn0sUz1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihpKXt0cnl7cmV0dXJuIG5bZV0oaStcIlwiKS5yZXBsYWNlKG4uUXBbdF1bZV0ucXAsZnVuY3Rpb24oaSl7cmV0dXJuIG4uUXBbdF1bZV0ubWFwW2ldfSl9Y2F0Y2gocil7cmV0dXJuIGl9fX07Zm9yKHcgaW4gVCluW3crXCJQYXRoU2VnbWVudFwiXT1TKFwicGF0aG5hbWVcIixUW3ddKSxuW3crXCJVcm5QYXRoU2VnbWVudFwiXT1TKFwidXJucGF0aFwiLFRbd10pO3ZhciBiPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG87bz1pP2Z1bmN0aW9uKHQpe3JldHVybiBuW2VdKG5baV0odCkpfTpuW2VdO2Zvcih2YXIgcz0ocitcIlwiKS5zcGxpdCh0KSxhPTAsYz1zLmxlbmd0aDthPGM7YSsrKXNbYV09byhzW2FdKTtyZXR1cm4gcy5qb2luKHQpfX07bi5odT1iKFwiL1wiLFwiZGVjb2RlUGF0aFNlZ21lbnRcIiksbi5wdT1iKFwiOlwiLFwiZGVjb2RlVXJuUGF0aFNlZ21lbnRcIiksbi51dT1iKFwiL1wiLFwiZW5jb2RlUGF0aFNlZ21lbnRcIixcImRlY29kZVwiKSxuLmx1PWIoXCI6XCIsXCJlbmNvZGVVcm5QYXRoU2VnbWVudFwiLFwiZGVjb2RlXCIpLG4uZHU9UyhcInJlc2VydmVkXCIsXCJlbmNvZGVcIiksbi5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBpO3JldHVybiBlfHwoZT17fSksaT10LmluZGV4T2YoXCIjXCIpLGk+LTEmJihlLmxwPXQuc3Vic3RyaW5nKGkrMSl8fG51bGwsdD10LnN1YnN0cmluZygwLGkpKSxpPXQuaW5kZXhPZihcIj9cIiksaT4tMSYmKGUudmk9dC5zdWJzdHJpbmcoaSsxKXx8bnVsbCx0PXQuc3Vic3RyaW5nKDAsaSkpLFwiLy9cIj09PXQuc3Vic3RyaW5nKDAsMik/KGUucHJvdG9jb2w9bnVsbCx0PXQuc3Vic3RyaW5nKDIpLHQ9bi5mdSh0LGUpKTooaT10LmluZGV4T2YoXCI6XCIpLGk+LTEmJihlLnByb3RvY29sPXQuc3Vic3RyaW5nKDAsaSl8fG51bGwsZS5wcm90b2NvbCYmIWUucHJvdG9jb2wubWF0Y2gobi5ncCk/ZS5wcm90b2NvbD12b2lkIDA6XCIvL1wiPT09dC5zdWJzdHJpbmcoaSsxLGkrMyk/KHQ9dC5zdWJzdHJpbmcoaSszKSx0PW4uZnUodCxlKSk6KHQ9dC5zdWJzdHJpbmcoaSsxKSxlLnVybj0hMCkpKSxlLnBhdGg9dCxlfSxuLmd1PWZ1bmN0aW9uKHQsZSl7dD10LnJlcGxhY2UoL1xcXFwvZyxcIi9cIik7dmFyIGkscixuPXQuaW5kZXhPZihcIi9cIik7aWYobj09PS0xJiYobj10Lmxlbmd0aCksXCJbXCI9PT10LmNoYXJBdCgwKSlpPXQuaW5kZXhPZihcIl1cIiksZS5ob3N0bmFtZT10LnN1YnN0cmluZygxLGkpfHxudWxsLGUucG9ydD10LnN1YnN0cmluZyhpKzIsbil8fG51bGwsXCIvXCI9PT1lLnBvcnQmJihlLnBvcnQ9bnVsbCk7ZWxzZXt2YXIgbz10LmluZGV4T2YoXCI6XCIpLHM9dC5pbmRleE9mKFwiL1wiKSxhPXQuaW5kZXhPZihcIjpcIixvKzEpO2EhPT0tMSYmKHM9PT0tMXx8YTxzKT8oZS5ob3N0bmFtZT10LnN1YnN0cmluZygwLG4pfHxudWxsLGUucG9ydD1udWxsKToocj10LnN1YnN0cmluZygwLG4pLnNwbGl0KFwiOlwiKSxlLmhvc3RuYW1lPXJbMF18fG51bGwsZS5wb3J0PXJbMV18fG51bGwpfXJldHVybiBlLmhvc3RuYW1lJiZcIi9cIiE9PXQuc3Vic3RyaW5nKG4pLmNoYXJBdCgwKSYmKG4rKyx0PVwiL1wiK3QpLHQuc3Vic3RyaW5nKG4pfHxcIi9cIn0sbi5mdT1mdW5jdGlvbih0LGUpe3JldHVybiB0PW4udnUodCxlKSxuLmd1KHQsZSl9LG4udnU9ZnVuY3Rpb24odCxlKXt2YXIgaSxyPXQuaW5kZXhPZihcIi9cIiksbz10Lmxhc3RJbmRleE9mKFwiQFwiLHI+LTE/cjp0Lmxlbmd0aC0xKTtyZXR1cm4gbz4tMSYmKHI9PT0tMXx8bzxyKT8oaT10LnN1YnN0cmluZygwLG8pLnNwbGl0KFwiOlwiKSxlLnVzZXJuYW1lPWlbMF0/bi5kZWNvZGUoaVswXSk6bnVsbCxpLnNoaWZ0KCksZS5wYXNzd29yZD1pWzBdP24uZGVjb2RlKGkuam9pbihcIjpcIikpOm51bGwsdD10LnN1YnN0cmluZyhvKzEpKTooZS51c2VybmFtZT1udWxsLGUucGFzc3dvcmQ9bnVsbCksdH0sbi55dT1mdW5jdGlvbih0LGUpe2lmKCF0KXJldHVybnt9O2lmKHQ9dC5yZXBsYWNlKC8mKy9nLFwiJlwiKS5yZXBsYWNlKC9eXFw/KiYqfCYrJC9nLFwiXCIpLCF0KXJldHVybnt9O2Zvcih2YXIgaSxyLG8scz17fSxhPXQuc3BsaXQoXCImXCIpLGM9YS5sZW5ndGgsaD0wO2g8YztoKyspaT1hW2hdLnNwbGl0KFwiPVwiKSxyPW4uY3UoaS5zaGlmdCgpLGUpLG89aS5sZW5ndGg/bi5jdShpLmpvaW4oXCI9XCIpLGUpOm51bGwsbS5jYWxsKHMscik/KFwic3RyaW5nXCIhPXR5cGVvZiBzW3JdJiZudWxsIT09c1tyXXx8KHNbcl09W3Nbcl1dKSxzW3JdLnB1c2gobykpOnNbcl09bztyZXR1cm4gc30sbi5wcD1mdW5jdGlvbih0KXt2YXIgZT1cIlwiO3JldHVybiB0LnByb3RvY29sJiYoZSs9dC5wcm90b2NvbCtcIjpcIiksdC51cm58fCFlJiYhdC5ob3N0bmFtZXx8KGUrPVwiLy9cIiksZSs9bi5tdSh0KXx8XCJcIixcInN0cmluZ1wiPT10eXBlb2YgdC5wYXRoJiYoXCIvXCIhPT10LnBhdGguY2hhckF0KDApJiZcInN0cmluZ1wiPT10eXBlb2YgdC5ob3N0bmFtZSYmKGUrPVwiL1wiKSxlKz10LnBhdGgpLFwic3RyaW5nXCI9PXR5cGVvZiB0LnZpJiZ0LnZpJiYoZSs9XCI/XCIrdC52aSksXCJzdHJpbmdcIj09dHlwZW9mIHQubHAmJnQubHAmJihlKz1cIiNcIit0LmxwKSxlfSxuLnd1PWZ1bmN0aW9uKHQpe3ZhciBlPVwiXCI7cmV0dXJuIHQuaG9zdG5hbWU/KGUrPW4ud3AudGVzdCh0Lmhvc3RuYW1lKT9cIltcIit0Lmhvc3RuYW1lK1wiXVwiOnQuaG9zdG5hbWUsdC5wb3J0JiYoZSs9XCI6XCIrdC5wb3J0KSxlKTpcIlwifSxuLm11PWZ1bmN0aW9uKHQpe3JldHVybiBuLlR1KHQpK24ud3UodCl9LG4uVHU9ZnVuY3Rpb24odCl7dmFyIGU9XCJcIjtyZXR1cm4gdC51c2VybmFtZSYmKGUrPW4uZW5jb2RlKHQudXNlcm5hbWUpKSx0LnBhc3N3b3JkJiYoZSs9XCI6XCIrbi5lbmNvZGUodC5wYXNzd29yZCkpLGUmJihlKz1cIkBcIiksZX0sbi5TdT1mdW5jdGlvbih0LGUsaSl7dmFyIHIsbyxzLGMsaD1cIlwiO2ZvcihvIGluIHQpaWYobS5jYWxsKHQsbykmJm8paWYoYSh0W29dKSlmb3Iocj17fSxzPTAsYz10W29dLmxlbmd0aDtzPGM7cysrKXZvaWQgMCE9PXRbb11bc10mJnZvaWQgMD09PXJbdFtvXVtzXStcIlwiXSYmKGgrPVwiJlwiK24uYnUobyx0W29dW3NdLGkpLGUhPT0hMCYmKHJbdFtvXVtzXStcIlwiXT0hMCkpO2Vsc2Ugdm9pZCAwIT09dFtvXSYmKGgrPVwiJlwiK24uYnUobyx0W29dLGkpKTtyZXR1cm4gaC5zdWJzdHJpbmcoMSl9LG4uYnU9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBuLmF1KHQsaSkrKG51bGwhPT1lP1wiPVwiK24uYXUoZSxpKTpcIlwiKX0sbi5FdT1mdW5jdGlvbih0LGUsaSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUpZm9yKHZhciByIGluIGUpbS5jYWxsKGUscikmJm4uRXUodCxyLGVbcl0pO2Vsc2V7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyXCIpO2lmKHZvaWQgMD09PXRbZV0pcmV0dXJuIHZvaWQodFtlXT1pKTtcInN0cmluZ1wiPT10eXBlb2YgdFtlXSYmKHRbZV09W3RbZV1dKSxhKGkpfHwoaT1baV0pLHRbZV09KHRbZV18fFtdKS5jb25jYXQoaSl9fSxuLkl1PWZ1bmN0aW9uKHQsZSxpKXt2YXIgcixvLGg7aWYoYShlKSlmb3Iocj0wLG89ZS5sZW5ndGg7cjxvO3IrKyl0W2Vbcl1dPXZvaWQgMDtlbHNlIGlmKFwiUmVnRXhwXCI9PT1zKGUpKWZvcihoIGluIHQpZS50ZXN0KGgpJiYodFtoXT12b2lkIDApO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIGUpZm9yKGggaW4gZSltLmNhbGwoZSxoKSYmbi5JdSh0LGgsZVtoXSk7ZWxzZXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVVJJLnJlbW92ZVF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZywgUmVnRXhwIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXJcIik7dm9pZCAwIT09aT9cIlJlZ0V4cFwiPT09cyhpKT8hYSh0W2VdKSYmaS50ZXN0KHRbZV0pP3RbZV09dm9pZCAwOnRbZV09Yyh0W2VdLGkpOnRbZV0hPT1TdHJpbmcoaSl8fGEoaSkmJjEhPT1pLmxlbmd0aD9hKHRbZV0pJiYodFtlXT1jKHRbZV0saSkpOnRbZV09dm9pZCAwOnRbZV09dm9pZCAwfX0sbi5SdT1mdW5jdGlvbih0LGUsaSxyKXtzd2l0Y2gocyhlKSl7Y2FzZVwiU3RyaW5nXCI6YnJlYWs7Y2FzZVwiUmVnRXhwXCI6Zm9yKHZhciBvIGluIHQpaWYobS5jYWxsKHQsbykmJmUudGVzdChvKSYmKHZvaWQgMD09PWl8fG4uUnUodCxvLGkpKSlyZXR1cm4hMDtyZXR1cm4hMTtjYXNlXCJPYmplY3RcIjpmb3IodmFyIGMgaW4gZSlpZihtLmNhbGwoZSxjKSYmIW4uUnUodCxjLGVbY10pKXJldHVybiExO3JldHVybiEwO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihcIlVSSS5oYXNRdWVyeSgpIGFjY2VwdHMgYSBzdHJpbmcsIHJlZ3VsYXIgZXhwcmVzc2lvbiBvciBvYmplY3QgYXMgdGhlIG5hbWUgcGFyYW1ldGVyXCIpfXN3aXRjaChzKGkpKXtjYXNlXCJVbmRlZmluZWRcIjpyZXR1cm4gZSBpbiB0O2Nhc2VcIkJvb2xlYW5cIjp2YXIgdT1Cb29sZWFuKGEodFtlXSk/dFtlXS5sZW5ndGg6dFtlXSk7cmV0dXJuIGk9PT11O2Nhc2VcIkZ1bmN0aW9uXCI6cmV0dXJuISFpKHRbZV0sZSx0KTtjYXNlXCJBcnJheVwiOmlmKCFhKHRbZV0pKXJldHVybiExO3ZhciBsPXI/aDpwO3JldHVybiBsKHRbZV0saSk7Y2FzZVwiUmVnRXhwXCI6cmV0dXJuIGEodFtlXSk/ISFyJiZoKHRbZV0saSk6Qm9vbGVhbih0W2VdJiZ0W2VdLm1hdGNoKGkpKTtjYXNlXCJOdW1iZXJcIjppPVN0cmluZyhpKTtjYXNlXCJTdHJpbmdcIjpyZXR1cm4gYSh0W2VdKT8hIXImJmgodFtlXSxpKTp0W2VdPT09aTtkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoXCJVUkkuaGFzUXVlcnkoKSBhY2NlcHRzIHVuZGVmaW5lZCwgYm9vbGVhbiwgc3RyaW5nLCBudW1iZXIsIFJlZ0V4cCwgRnVuY3Rpb24gYXMgdGhlIHZhbHVlIHBhcmFtZXRlclwiKX19LG4ua3U9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT1bXSxpPTAscj0wO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspe3ZhciBvPW5ldyBuKGFyZ3VtZW50c1tyXSk7dC5wdXNoKG8pO2Zvcih2YXIgcz1vLkN1KCksYT0wO2E8cy5sZW5ndGg7YSsrKVwic3RyaW5nXCI9PXR5cGVvZiBzW2FdJiZlLnB1c2goc1thXSksc1thXSYmaSsrfWlmKCFlLmxlbmd0aHx8IWkpcmV0dXJuIG5ldyBuKFwiXCIpO3ZhciBjPW5ldyBuKFwiXCIpLkN1KGUpO3JldHVyblwiXCIhPT10WzBdLnBhdGgoKSYmXCIvXCIhPT10WzBdLnBhdGgoKS5zbGljZSgwLDEpfHxjLnBhdGgoXCIvXCIrYy5wYXRoKCkpLGMubm9ybWFsaXplKCl9LG4uT3U9ZnVuY3Rpb24odCxlKXt2YXIgaSxyPU1hdGgubWluKHQubGVuZ3RoLGUubGVuZ3RoKTtmb3IoaT0wO2k8cjtpKyspaWYodC5jaGFyQXQoaSkhPT1lLmNoYXJBdChpKSl7aS0tO2JyZWFrfXJldHVybiBpPDE/dC5jaGFyQXQoMCk9PT1lLmNoYXJBdCgwKSYmXCIvXCI9PT10LmNoYXJBdCgwKT9cIi9cIjpcIlwiOihcIi9cIj09PXQuY2hhckF0KGkpJiZcIi9cIj09PWUuY2hhckF0KGkpfHwoaT10LnN1YnN0cmluZygwLGkpLmxhc3RJbmRleE9mKFwiL1wiKSksdC5zdWJzdHJpbmcoMCxpKzEpKX0sbi5QdT1mdW5jdGlvbih0LGUsaSl7aXx8KGk9e30pO3ZhciByPWkuc3RhcnR8fG4uU3Auc3RhcnQsbz1pLmVuZHx8bi5TcC5lbmQscz1pLnRyaW18fG4uU3AudHJpbSxhPWkuYnB8fG4uU3AuYnAsYz0vW2EtejAtOS1dPVtcIiddPyQvaTtmb3Ioci5sYXN0SW5kZXg9MDs7KXt2YXIgaD1yLmV4ZWModCk7aWYoIWgpYnJlYWs7dmFyIHA9aC5pbmRleDtpZihpLmlnbm9yZUh0bWwpe3ZhciB1PXQuc2xpY2UoTWF0aC5tYXgocC0zLDApLHApO2lmKHUmJmMudGVzdCh1KSljb250aW51ZX1mb3IodmFyIGw9cCt0LnNsaWNlKHApLnNlYXJjaChvKSxkPXQuc2xpY2UocCxsKSxmPS0xOzspe3ZhciBnPWEuZXhlYyhkKTtpZighZylicmVhazt2YXIgdj1nLmluZGV4K2dbMF0ubGVuZ3RoO2Y9TWF0aC5tYXgoZix2KX1pZihkPWY+LTE/ZC5zbGljZSgwLGYpK2Quc2xpY2UoZikucmVwbGFjZShzLFwiXCIpOmQucmVwbGFjZShzLFwiXCIpLCEoZC5sZW5ndGg8PWhbMF0ubGVuZ3RofHxpLmlnbm9yZSYmaS5pZ25vcmUudGVzdChkKSkpe2w9cCtkLmxlbmd0aDt2YXIgeT1lKGQscCxsLHQpO3ZvaWQgMCE9PXk/KHk9U3RyaW5nKHkpLHQ9dC5zbGljZSgwLHApK3krdC5zbGljZShsKSxyLmxhc3RJbmRleD1wK3kubGVuZ3RoKTpyLmxhc3RJbmRleD1sfX1yZXR1cm4gci5sYXN0SW5kZXg9MCx0fSxuLkF1PWZ1bmN0aW9uKGUpe2lmKGUubWF0Y2gobi5BcCkpe2lmKCF0KXRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lIFwiJytlKydcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXSBhbmQgUHVueWNvZGUuanMgaXMgbm90IGF2YWlsYWJsZScpO2lmKHQudG9BU0NJSShlKS5tYXRjaChuLkFwKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSBcIicrZSsnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKX19LG4uZ2U9ZnVuY3Rpb24odCl7aWYodCl7dmFyIGU9e3VwOnRoaXMuZ2UoKX07cmV0dXJuIHIuTnUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHIuTnUuZ2UmJihlLk51PXIuTnUuZ2UoKSksci54dSYmXCJmdW5jdGlvblwiPT10eXBlb2Ygci54dS5nZSYmKGUueHU9ci54dS5nZSgpKSxyLkJ1JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiByLkJ1LmdlJiYoZS5CdT1yLkJ1LmdlKCkpLGV9cmV0dXJuIHIudXA9PT10aGlzJiYoci51cD12KSx0aGlzfSx5LnBwPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09ITA/dGhpcy5GdT0hMDoodm9pZCAwPT09dHx8dGhpcy5GdSkmJih0aGlzLl91PW4ucHAodGhpcy5ocCksdGhpcy5GdT0hMSksdGhpc30seS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzKX0seS52YWx1ZU9mPXkudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcCghMSkuX3V9LHkucHJvdG9jb2w9ZihcInByb3RvY29sXCIpLHkudXNlcm5hbWU9ZihcInVzZXJuYW1lXCIpLHkucGFzc3dvcmQ9ZihcInBhc3N3b3JkXCIpLHkuaG9zdG5hbWU9ZihcImhvc3RuYW1lXCIpLHkucG9ydD1mKFwicG9ydFwiKSx5LnZpPWcoXCJxdWVyeVwiLFwiP1wiKSx5LmxwPWcoXCJmcmFnbWVudFwiLFwiI1wiKSx5LnNlYXJjaD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMudmkodCxlKTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgaSYmaS5sZW5ndGg/XCI/XCIraTppfSx5Lmhhc2g9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmxwKHQsZSk7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGkmJmkubGVuZ3RoP1wiI1wiK2k6aX0seS5wYXRobmFtZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXR8fHQ9PT0hMCl7dmFyIGk9dGhpcy5ocC5wYXRofHwodGhpcy5ocC5ob3N0bmFtZT9cIi9cIjpcIlwiKTtyZXR1cm4gdD8odGhpcy5ocC51cm4/bi5wdTpuLmh1KShpKTppfXJldHVybiB0aGlzLmhwLnVybj90aGlzLmhwLnBhdGg9dD9uLmx1KHQpOlwiXCI6dGhpcy5ocC5wYXRoPXQ/bi51dSh0KTpcIi9cIix0aGlzLnBwKCFlKSx0aGlzfSx5LnBhdGg9eS5wYXRobmFtZSx5LmhyZWY9ZnVuY3Rpb24odCxlKXt2YXIgaTtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLnRvU3RyaW5nKCk7dGhpcy5fdT1cIlwiLHRoaXMuaHA9bi5ocCgpO3ZhciByPXQgaW5zdGFuY2VvZiBuLG89XCJvYmplY3RcIj09dHlwZW9mIHQmJih0Lmhvc3RuYW1lfHx0LnBhdGh8fHQucGF0aG5hbWUpO2lmKHQubm9kZU5hbWUpe3ZhciBzPW4uanAodCk7dD10W3NdfHxcIlwiLG89ITF9aWYoIXImJm8mJnZvaWQgMCE9PXQucGF0aG5hbWUmJih0PXQudG9TdHJpbmcoKSksXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBTdHJpbmcpdGhpcy5ocD1uLnBhcnNlKFN0cmluZyh0KSx0aGlzLmhwKTtlbHNle2lmKCFyJiYhbyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiaW52YWxpZCBpbnB1dFwiKTt2YXIgYT1yP3QuaHA6dDtmb3IoaSBpbiBhKW0uY2FsbCh0aGlzLmhwLGkpJiYodGhpcy5ocFtpXT1hW2ldKX1yZXR1cm4gdGhpcy5wcCghZSksdGhpc30seS5pcz1mdW5jdGlvbih0KXt2YXIgZT0hMSxyPSExLG89ITEscz0hMSxhPSExLGM9ITEsaD0hMSxwPSF0aGlzLmhwLnVybjtzd2l0Y2godGhpcy5ocC5ob3N0bmFtZSYmKHA9ITEscj1uLm1wLnRlc3QodGhpcy5ocC5ob3N0bmFtZSksbz1uLndwLnRlc3QodGhpcy5ocC5ob3N0bmFtZSksZT1yfHxvLHM9IWUsYT1zJiZpJiZpLmhhcyh0aGlzLmhwLmhvc3RuYW1lKSxjPXMmJm4udnAudGVzdCh0aGlzLmhwLmhvc3RuYW1lKSxoPXMmJm4ueXAudGVzdCh0aGlzLmhwLmhvc3RuYW1lKSksdC50b0xvd2VyQ2FzZSgpKXtjYXNlXCJyZWxhdGl2ZVwiOnJldHVybiBwO2Nhc2VcImFic29sdXRlXCI6cmV0dXJuIXA7Y2FzZVwiZG9tYWluXCI6Y2FzZVwibmFtZVwiOnJldHVybiBzO2Nhc2VcInNsZFwiOnJldHVybiBhO2Nhc2VcImlwXCI6cmV0dXJuIGU7Y2FzZVwiaXA0XCI6Y2FzZVwiaXB2NFwiOmNhc2VcImluZXQ0XCI6cmV0dXJuIHI7Y2FzZVwiaXA2XCI6Y2FzZVwiaXB2NlwiOmNhc2VcImluZXQ2XCI6cmV0dXJuIG87Y2FzZVwiaWRuXCI6cmV0dXJuIGM7Y2FzZVwidXJsXCI6cmV0dXJuIXRoaXMuaHAudXJuO2Nhc2VcInVyblwiOnJldHVybiEhdGhpcy5ocC51cm47Y2FzZVwicHVueWNvZGVcIjpyZXR1cm4gaH1yZXR1cm4gbnVsbH07dmFyIEU9eS5wcm90b2NvbCxJPXkucG9ydCxSPXkuaG9zdG5hbWU7eS5wcm90b2NvbD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMCE9PXQmJnQmJih0PXQucmVwbGFjZSgvOihcXC9cXC8pPyQvLFwiXCIpLCF0Lm1hdGNoKG4uZ3ApKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm90b2NvbCBcIicrdCtcIlxcXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuKy1dIG9yIGRvZXNuJ3Qgc3RhcnQgd2l0aCBbQS1aXVwiKTtyZXR1cm4gRS5jYWxsKHRoaXMsdCxlKX0seS5zY2hlbWU9eS5wcm90b2NvbCx5LnBvcnQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmhwLnVybilyZXR1cm4gdm9pZCAwPT09dD9cIlwiOnRoaXM7aWYodm9pZCAwIT09dCYmKDA9PT10JiYodD1udWxsKSx0JiYodCs9XCJcIixcIjpcIj09PXQuY2hhckF0KDApJiYodD10LnN1YnN0cmluZygxKSksdC5tYXRjaCgvW14wLTldLykpKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdQb3J0IFwiJyt0KydcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gWzAtOV0nKTtyZXR1cm4gSS5jYWxsKHRoaXMsdCxlKX0seS5ob3N0bmFtZT1mdW5jdGlvbih0LGUpe2lmKHRoaXMuaHAudXJuKXJldHVybiB2b2lkIDA9PT10P1wiXCI6dGhpcztpZih2b2lkIDAhPT10KXt2YXIgaT17fSxyPW4uZ3UodCxpKTtpZihcIi9cIiE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgXCInK3QrJ1wiIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dJyk7dD1pLmhvc3RuYW1lfXJldHVybiBSLmNhbGwodGhpcyx0LGUpfSx5Lm9yaWdpbj1mdW5jdGlvbih0LGUpe2lmKHRoaXMuaHAudXJuKXJldHVybiB2b2lkIDA9PT10P1wiXCI6dGhpcztpZih2b2lkIDA9PT10KXt2YXIgaT10aGlzLnByb3RvY29sKCkscj10aGlzLkR1KCk7cmV0dXJuIHI/KGk/aStcIjovL1wiOlwiXCIpK3RoaXMuRHUoKTpcIlwifXZhciBvPW4odCk7cmV0dXJuIHRoaXMucHJvdG9jb2woby5wcm90b2NvbCgpKS5EdShvLkR1KCkpLnBwKCFlKSx0aGlzfSx5Lmhvc3Q9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmhwLnVybilyZXR1cm4gdm9pZCAwPT09dD9cIlwiOnRoaXM7aWYodm9pZCAwPT09dClyZXR1cm4gdGhpcy5ocC5ob3N0bmFtZT9uLnd1KHRoaXMuaHApOlwiXCI7dmFyIGk9bi5ndSh0LHRoaXMuaHApO2lmKFwiL1wiIT09aSl0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSBcIicrdCsnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTtyZXR1cm4gdGhpcy5wcCghZSksdGhpc30seS5EdT1mdW5jdGlvbih0LGUpe2lmKHRoaXMuaHAudXJuKXJldHVybiB2b2lkIDA9PT10P1wiXCI6dGhpcztpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmhwLmhvc3RuYW1lP24ubXUodGhpcy5ocCk6XCJcIjt2YXIgaT1uLmZ1KHQsdGhpcy5ocCk7aWYoXCIvXCIhPT1pKXRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lIFwiJyt0KydcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXScpO3JldHVybiB0aGlzLnBwKCFlKSx0aGlzfSx5Lkh1PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5ocC51cm4pcmV0dXJuIHZvaWQgMD09PXQ/XCJcIjp0aGlzO2lmKHZvaWQgMD09PXQpe3ZhciBpPW4uVHUodGhpcy5ocCk7cmV0dXJuIGk/aS5zdWJzdHJpbmcoMCxpLmxlbmd0aC0xKTppfXJldHVyblwiQFwiIT09dFt0Lmxlbmd0aC0xXSYmKHQrPVwiQFwiKSxuLnZ1KHQsdGhpcy5ocCksdGhpcy5wcCghZSksdGhpc30seS5MdT1mdW5jdGlvbih0LGUpe3ZhciBpO3JldHVybiB2b2lkIDA9PT10P3RoaXMucGF0aCgpK3RoaXMuc2VhcmNoKCkrdGhpcy5oYXNoKCk6KGk9bi5wYXJzZSh0KSx0aGlzLmhwLnBhdGg9aS5wYXRoLHRoaXMuaHAudmk9aS52aSx0aGlzLmhwLmxwPWkubHAsdGhpcy5wcCghZSksdGhpcyl9LHkuTXU9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmhwLnVybilyZXR1cm4gdm9pZCAwPT09dD9cIlwiOnRoaXM7aWYodm9pZCAwPT09dCl7aWYoIXRoaXMuaHAuaG9zdG5hbWV8fHRoaXMuaXMoXCJJUFwiKSlyZXR1cm5cIlwiO3ZhciBpPXRoaXMuaHAuaG9zdG5hbWUubGVuZ3RoLXRoaXMuZG9tYWluKCkubGVuZ3RoLTE7cmV0dXJuIHRoaXMuaHAuaG9zdG5hbWUuc3Vic3RyaW5nKDAsaSl8fFwiXCJ9dmFyIHI9dGhpcy5ocC5ob3N0bmFtZS5sZW5ndGgtdGhpcy5kb21haW4oKS5sZW5ndGgscz10aGlzLmhwLmhvc3RuYW1lLnN1YnN0cmluZygwLHIpLGE9bmV3IFJlZ0V4cChcIl5cIitvKHMpKTtyZXR1cm4gdCYmXCIuXCIhPT10LmNoYXJBdCh0Lmxlbmd0aC0xKSYmKHQrPVwiLlwiKSx0JiZuLkF1KHQpLHRoaXMuaHAuaG9zdG5hbWU9dGhpcy5ocC5ob3N0bmFtZS5yZXBsYWNlKGEsdCksdGhpcy5wcCghZSksdGhpc30seS5kb21haW49ZnVuY3Rpb24odCxlKXtpZih0aGlzLmhwLnVybilyZXR1cm4gdm9pZCAwPT09dD9cIlwiOnRoaXM7aWYoXCJib29sZWFuXCI9PXR5cGVvZiB0JiYoZT10LHQ9dm9pZCAwKSx2b2lkIDA9PT10KXtpZighdGhpcy5ocC5ob3N0bmFtZXx8dGhpcy5pcyhcIklQXCIpKXJldHVyblwiXCI7dmFyIGk9dGhpcy5ocC5ob3N0bmFtZS5tYXRjaCgvXFwuL2cpO2lmKGkmJmkubGVuZ3RoPDIpcmV0dXJuIHRoaXMuaHAuaG9zdG5hbWU7dmFyIHI9dGhpcy5ocC5ob3N0bmFtZS5sZW5ndGgtdGhpcy5qdShlKS5sZW5ndGgtMTtyZXR1cm4gcj10aGlzLmhwLmhvc3RuYW1lLmxhc3RJbmRleE9mKFwiLlwiLHItMSkrMSx0aGlzLmhwLmhvc3RuYW1lLnN1YnN0cmluZyhyKXx8XCJcIn1pZighdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2Fubm90IHNldCBkb21haW4gZW1wdHlcIik7aWYobi5BdSh0KSwhdGhpcy5ocC5ob3N0bmFtZXx8dGhpcy5pcyhcIklQXCIpKXRoaXMuaHAuaG9zdG5hbWU9dDtlbHNle3ZhciBzPW5ldyBSZWdFeHAobyh0aGlzLmRvbWFpbigpKStcIiRcIik7dGhpcy5ocC5ob3N0bmFtZT10aGlzLmhwLmhvc3RuYW1lLnJlcGxhY2Uocyx0KX1yZXR1cm4gdGhpcy5wcCghZSksdGhpc30seS5qdT1mdW5jdGlvbih0LGUpe2lmKHRoaXMuaHAudXJuKXJldHVybiB2b2lkIDA9PT10P1wiXCI6dGhpcztpZihcImJvb2xlYW5cIj09dHlwZW9mIHQmJihlPXQsdD12b2lkIDApLHZvaWQgMD09PXQpe2lmKCF0aGlzLmhwLmhvc3RuYW1lfHx0aGlzLmlzKFwiSVBcIikpcmV0dXJuXCJcIjt2YXIgcj10aGlzLmhwLmhvc3RuYW1lLmxhc3RJbmRleE9mKFwiLlwiKSxuPXRoaXMuaHAuaG9zdG5hbWUuc3Vic3RyaW5nKHIrMSk7cmV0dXJuIGUhPT0hMCYmaSYmaS5saXN0W24udG9Mb3dlckNhc2UoKV0/aS5nZXQodGhpcy5ocC5ob3N0bmFtZSl8fG46bn12YXIgcztpZighdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2Fubm90IHNldCBUTEQgZW1wdHlcIik7aWYodC5tYXRjaCgvW15hLXpBLVowLTktXS8pKXtpZighaXx8IWkuaXModCkpdGhyb3cgbmV3IFR5cGVFcnJvcignVExEIFwiJyt0KydcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOV0nKTtzPW5ldyBSZWdFeHAobyh0aGlzLmp1KCkpK1wiJFwiKSx0aGlzLmhwLmhvc3RuYW1lPXRoaXMuaHAuaG9zdG5hbWUucmVwbGFjZShzLHQpfWVsc2V7aWYoIXRoaXMuaHAuaG9zdG5hbWV8fHRoaXMuaXMoXCJJUFwiKSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJjYW5ub3Qgc2V0IFRMRCBvbiBub24tZG9tYWluIGhvc3RcIik7cz1uZXcgUmVnRXhwKG8odGhpcy5qdSgpKStcIiRcIiksdGhpcy5ocC5ob3N0bmFtZT10aGlzLmhwLmhvc3RuYW1lLnJlcGxhY2Uocyx0KX1yZXR1cm4gdGhpcy5wcCghZSksdGhpc30seS5VdT1mdW5jdGlvbih0LGUpe2lmKHRoaXMuaHAudXJuKXJldHVybiB2b2lkIDA9PT10P1wiXCI6dGhpcztpZih2b2lkIDA9PT10fHx0PT09ITApe2lmKCF0aGlzLmhwLnBhdGgmJiF0aGlzLmhwLmhvc3RuYW1lKXJldHVyblwiXCI7aWYoXCIvXCI9PT10aGlzLmhwLnBhdGgpcmV0dXJuXCIvXCI7dmFyIGk9dGhpcy5ocC5wYXRoLmxlbmd0aC10aGlzLmZpbGVuYW1lKCkubGVuZ3RoLTEscj10aGlzLmhwLnBhdGguc3Vic3RyaW5nKDAsaSl8fCh0aGlzLmhwLmhvc3RuYW1lP1wiL1wiOlwiXCIpO3JldHVybiB0P24uaHUocik6cn12YXIgcz10aGlzLmhwLnBhdGgubGVuZ3RoLXRoaXMuZmlsZW5hbWUoKS5sZW5ndGgsYT10aGlzLmhwLnBhdGguc3Vic3RyaW5nKDAscyksYz1uZXcgUmVnRXhwKFwiXlwiK28oYSkpO3JldHVybiB0aGlzLmlzKFwicmVsYXRpdmVcIil8fCh0fHwodD1cIi9cIiksXCIvXCIhPT10LmNoYXJBdCgwKSYmKHQ9XCIvXCIrdCkpLHQmJlwiL1wiIT09dC5jaGFyQXQodC5sZW5ndGgtMSkmJih0Kz1cIi9cIiksdD1uLnV1KHQpLHRoaXMuaHAucGF0aD10aGlzLmhwLnBhdGgucmVwbGFjZShjLHQpLHRoaXMucHAoIWUpLHRoaXN9LHkuZmlsZW5hbWU9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmhwLnVybilyZXR1cm4gdm9pZCAwPT09dD9cIlwiOnRoaXM7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpe2lmKCF0aGlzLmhwLnBhdGh8fFwiL1wiPT09dGhpcy5ocC5wYXRoKXJldHVyblwiXCI7dmFyIGk9dGhpcy5ocC5wYXRoLmxhc3RJbmRleE9mKFwiL1wiKSxyPXRoaXMuaHAucGF0aC5zdWJzdHJpbmcoaSsxKTtyZXR1cm4gdD9uLmRlY29kZVBhdGhTZWdtZW50KHIpOnJ9dmFyIHM9ITE7XCIvXCI9PT10LmNoYXJBdCgwKSYmKHQ9dC5zdWJzdHJpbmcoMSkpLHQubWF0Y2goL1xcLj9cXC8vKSYmKHM9ITApO3ZhciBhPW5ldyBSZWdFeHAobyh0aGlzLmZpbGVuYW1lKCkpK1wiJFwiKTtyZXR1cm4gdD1uLnV1KHQpLHRoaXMuaHAucGF0aD10aGlzLmhwLnBhdGgucmVwbGFjZShhLHQpLHM/dGhpcy5WdShlKTp0aGlzLnBwKCFlKSx0aGlzfSx5LnN1ZmZpeD1mdW5jdGlvbih0LGUpe2lmKHRoaXMuaHAudXJuKXJldHVybiB2b2lkIDA9PT10P1wiXCI6dGhpcztpZih2b2lkIDA9PT10fHx0PT09ITApe2lmKCF0aGlzLmhwLnBhdGh8fFwiL1wiPT09dGhpcy5ocC5wYXRoKXJldHVyblwiXCI7dmFyIGkscixzPXRoaXMuZmlsZW5hbWUoKSxhPXMubGFzdEluZGV4T2YoXCIuXCIpO3JldHVybiBhPT09LTE/XCJcIjooaT1zLnN1YnN0cmluZyhhKzEpLHI9L15bYS16MC05JV0rJC9pLnRlc3QoaSk/aTpcIlwiLHQ/bi5kZWNvZGVQYXRoU2VnbWVudChyKTpyKX1cIi5cIj09PXQuY2hhckF0KDApJiYodD10LnN1YnN0cmluZygxKSk7dmFyIGMsaD10aGlzLnN1ZmZpeCgpO2lmKGgpYz10P25ldyBSZWdFeHAobyhoKStcIiRcIik6bmV3IFJlZ0V4cChvKFwiLlwiK2gpK1wiJFwiKTtlbHNle2lmKCF0KXJldHVybiB0aGlzO3RoaXMuaHAucGF0aCs9XCIuXCIrbi51dSh0KX1yZXR1cm4gYyYmKHQ9bi51dSh0KSx0aGlzLmhwLnBhdGg9dGhpcy5ocC5wYXRoLnJlcGxhY2UoYyx0KSksdGhpcy5wcCghZSksdGhpc30seS5DdT1mdW5jdGlvbih0LGUsaSl7dmFyIHI9dGhpcy5ocC51cm4/XCI6XCI6XCIvXCIsbj10aGlzLnBhdGgoKSxvPVwiL1wiPT09bi5zdWJzdHJpbmcoMCwxKSxzPW4uc3BsaXQocik7aWYodm9pZCAwIT09dCYmXCJudW1iZXJcIiE9dHlwZW9mIHQmJihpPWUsZT10LHQ9dm9pZCAwKSx2b2lkIDAhPT10JiZcIm51bWJlclwiIT10eXBlb2YgdCl0aHJvdyBuZXcgRXJyb3IoJ0JhZCBzZWdtZW50IFwiJyt0KydcIiwgbXVzdCBiZSAwLWJhc2VkIGludGVnZXInKTtpZihvJiZzLnNoaWZ0KCksdDwwJiYodD1NYXRoLm1heChzLmxlbmd0aCt0LDApKSx2b2lkIDA9PT1lKXJldHVybiB2b2lkIDA9PT10P3M6c1t0XTtpZihudWxsPT09dHx8dm9pZCAwPT09c1t0XSlpZihhKGUpKXtzPVtdO2Zvcih2YXIgYz0wLGg9ZS5sZW5ndGg7YzxoO2MrKykoZVtjXS5sZW5ndGh8fHMubGVuZ3RoJiZzW3MubGVuZ3RoLTFdLmxlbmd0aCkmJihzLmxlbmd0aCYmIXNbcy5sZW5ndGgtMV0ubGVuZ3RoJiZzLnBvcCgpLHMucHVzaCh1KGVbY10pKSl9ZWxzZShlfHxcInN0cmluZ1wiPT10eXBlb2YgZSkmJihlPXUoZSksXCJcIj09PXNbcy5sZW5ndGgtMV0/c1tzLmxlbmd0aC0xXT1lOnMucHVzaChlKSk7ZWxzZSBlP3NbdF09dShlKTpzLnNwbGljZSh0LDEpO3JldHVybiBvJiZzLnVuc2hpZnQoXCJcIiksdGhpcy5wYXRoKHMuam9pbihyKSxpKX0seS5RdT1mdW5jdGlvbih0LGUsaSl7dmFyIHIsbyxzO2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0JiYoaT1lLGU9dCx0PXZvaWQgMCksdm9pZCAwPT09ZSl7aWYocj10aGlzLkN1KHQsZSxpKSxhKHIpKWZvcihvPTAscz1yLmxlbmd0aDtvPHM7bysrKXJbb109bi5kZWNvZGUocltvXSk7ZWxzZSByPXZvaWQgMCE9PXI/bi5kZWNvZGUocik6dm9pZCAwO3JldHVybiByfWlmKGEoZSkpZm9yKG89MCxzPWUubGVuZ3RoO288cztvKyspZVtvXT1uLmVuY29kZShlW29dKTtlbHNlIGU9XCJzdHJpbmdcIj09dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBTdHJpbmc/bi5lbmNvZGUoZSk6ZTtyZXR1cm4gdGhpcy5DdSh0LGUsaSl9O3ZhciBrPXkudmk7cmV0dXJuIHkudmk9ZnVuY3Rpb24odCxlKXtpZih0PT09ITApcmV0dXJuIG4ueXUodGhpcy5ocC52aSx0aGlzLmhwLmZwKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KXt2YXIgaT1uLnl1KHRoaXMuaHAudmksdGhpcy5ocC5mcCkscj10LmNhbGwodGhpcyxpKTtyZXR1cm4gdGhpcy5ocC52aT1uLlN1KHJ8fGksdGhpcy5ocC5kcCx0aGlzLmhwLmZwKSx0aGlzLnBwKCFlKSx0aGlzfXJldHVybiB2b2lkIDAhPT10JiZcInN0cmluZ1wiIT10eXBlb2YgdD8odGhpcy5ocC52aT1uLlN1KHQsdGhpcy5ocC5kcCx0aGlzLmhwLmZwKSx0aGlzLnBwKCFlKSx0aGlzKTprLmNhbGwodGhpcyx0LGUpfSx5LnF1PWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj1uLnl1KHRoaXMuaHAudmksdGhpcy5ocC5mcCk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBTdHJpbmcpclt0XT12b2lkIDAhPT1lP2U6bnVsbDtlbHNle2lmKFwib2JqZWN0XCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJVUkkuYWRkUXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nIGFzIHRoZSBuYW1lIHBhcmFtZXRlclwiKTtmb3IodmFyIG8gaW4gdCltLmNhbGwodCxvKSYmKHJbb109dFtvXSl9cmV0dXJuIHRoaXMuaHAudmk9bi5TdShyLHRoaXMuaHAuZHAsdGhpcy5ocC5mcCksXCJzdHJpbmdcIiE9dHlwZW9mIHQmJihpPWUpLHRoaXMucHAoIWkpLHRoaXN9LHkuRXU9ZnVuY3Rpb24odCxlLGkpe3ZhciByPW4ueXUodGhpcy5ocC52aSx0aGlzLmhwLmZwKTtyZXR1cm4gbi5FdShyLHQsdm9pZCAwPT09ZT9udWxsOmUpLHRoaXMuaHAudmk9bi5TdShyLHRoaXMuaHAuZHAsdGhpcy5ocC5mcCksXCJzdHJpbmdcIiE9dHlwZW9mIHQmJihpPWUpLHRoaXMucHAoIWkpLHRoaXN9LHkuSXU9ZnVuY3Rpb24odCxlLGkpe3ZhciByPW4ueXUodGhpcy5ocC52aSx0aGlzLmhwLmZwKTtyZXR1cm4gbi5JdShyLHQsZSksdGhpcy5ocC52aT1uLlN1KHIsdGhpcy5ocC5kcCx0aGlzLmhwLmZwKSxcInN0cmluZ1wiIT10eXBlb2YgdCYmKGk9ZSksdGhpcy5wcCghaSksdGhpc30seS5SdT1mdW5jdGlvbih0LGUsaSl7dmFyIHI9bi55dSh0aGlzLmhwLnZpLHRoaXMuaHAuZnApO3JldHVybiBuLlJ1KHIsdCxlLGkpfSx5Lkp1PXkucXUseS5LdT15LkV1LHkuR3U9eS5JdSx5Lnp1PXkuUnUseS5ub3JtYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ocC51cm4/dGhpcy5ZdSghMSkuVnUoITEpLiR1KCExKS5XdSghMSkucHAoKTp0aGlzLll1KCExKS5adSghMSkuWHUoITEpLlZ1KCExKS4kdSghMSkuV3UoITEpLnBwKCl9LHkuWXU9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMuaHAucHJvdG9jb2wmJih0aGlzLmhwLnByb3RvY29sPXRoaXMuaHAucHJvdG9jb2wudG9Mb3dlckNhc2UoKSx0aGlzLnBwKCF0KSksdGhpc30seS5adT1mdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5ocC5ob3N0bmFtZSYmKHRoaXMuaXMoXCJJRE5cIikmJnQ/dGhpcy5ocC5ob3N0bmFtZT10LnRvQVNDSUkodGhpcy5ocC5ob3N0bmFtZSk6dGhpcy5pcyhcIklQdjZcIikmJmUmJih0aGlzLmhwLmhvc3RuYW1lPWUuYmVzdCh0aGlzLmhwLmhvc3RuYW1lKSksdGhpcy5ocC5ob3N0bmFtZT10aGlzLmhwLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCksdGhpcy5wcCghaSkpLHRoaXN9LHkuWHU9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMuaHAucHJvdG9jb2wmJnRoaXMuaHAucG9ydD09PW4uRXBbdGhpcy5ocC5wcm90b2NvbF0mJih0aGlzLmhwLnBvcnQ9bnVsbCx0aGlzLnBwKCF0KSksdGhpc30seS5WdT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmhwLnBhdGg7aWYoIWUpcmV0dXJuIHRoaXM7aWYodGhpcy5ocC51cm4pcmV0dXJuIHRoaXMuaHAucGF0aD1uLmx1KHRoaXMuaHAucGF0aCksdGhpcy5wcCghdCksdGhpcztpZihcIi9cIj09PXRoaXMuaHAucGF0aClyZXR1cm4gdGhpcztlPW4udXUoZSk7dmFyIGkscixvLHM9XCJcIjtmb3IoXCIvXCIhPT1lLmNoYXJBdCgwKSYmKGk9ITAsZT1cIi9cIitlKSxcIi8uLlwiIT09ZS5zbGljZSgtMykmJlwiLy5cIiE9PWUuc2xpY2UoLTIpfHwoZSs9XCIvXCIpLGU9ZS5yZXBsYWNlKC8oXFwvKFxcLlxcLykrKXwoXFwvXFwuJCkvZyxcIi9cIikucmVwbGFjZSgvXFwvezIsfS9nLFwiL1wiKSxpJiYocz1lLnN1YnN0cmluZygxKS5tYXRjaCgvXihcXC5cXC5cXC8pKy8pfHxcIlwiLHMmJihzPXNbMF0pKTs7KXtpZihyPWUuc2VhcmNoKC9cXC9cXC5cXC4oXFwvfCQpLykscj09PS0xKWJyZWFrOzAhPT1yPyhvPWUuc3Vic3RyaW5nKDAscikubGFzdEluZGV4T2YoXCIvXCIpLG89PT0tMSYmKG89ciksZT1lLnN1YnN0cmluZygwLG8pK2Uuc3Vic3RyaW5nKHIrMykpOmU9ZS5zdWJzdHJpbmcoMyl9cmV0dXJuIGkmJnRoaXMuaXMoXCJyZWxhdGl2ZVwiKSYmKGU9cytlLnN1YnN0cmluZygxKSksdGhpcy5ocC5wYXRoPWUsdGhpcy5wcCghdCksdGhpc30seS50bD15LlZ1LHkuJHU9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMuaHAudmkmJih0aGlzLmhwLnZpLmxlbmd0aD90aGlzLnZpKG4ueXUodGhpcy5ocC52aSx0aGlzLmhwLmZwKSk6dGhpcy5ocC52aT1udWxsLHRoaXMucHAoIXQpKSx0aGlzfSx5Lld1PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhwLmxwfHwodGhpcy5ocC5scD1udWxsLHRoaXMucHAoIXQpKSx0aGlzfSx5LmVsPXkuJHUseS5pbD15Lld1LHkuVXA9ZnVuY3Rpb24oKXt2YXIgdD1uLmVuY29kZSxlPW4uZGVjb2RlO24uZW5jb2RlPWVzY2FwZSxuLmRlY29kZT1kZWNvZGVVUklDb21wb25lbnQ7dHJ5e3RoaXMubm9ybWFsaXplKCl9ZmluYWxseXtuLmVuY29kZT10LG4uZGVjb2RlPWV9cmV0dXJuIHRoaXN9LHkuVnA9ZnVuY3Rpb24oKXt2YXIgdD1uLmVuY29kZSxlPW4uZGVjb2RlO24uZW5jb2RlPWQsbi5kZWNvZGU9dW5lc2NhcGU7dHJ5e3RoaXMubm9ybWFsaXplKCl9ZmluYWxseXtuLmVuY29kZT10LG4uZGVjb2RlPWV9cmV0dXJuIHRoaXN9LHkucmw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNsb25lKCk7ZS51c2VybmFtZShcIlwiKS5wYXNzd29yZChcIlwiKS5ub3JtYWxpemUoKTt2YXIgaT1cIlwiO2lmKGUuaHAucHJvdG9jb2wmJihpKz1lLmhwLnByb3RvY29sK1wiOi8vXCIpLGUuaHAuaG9zdG5hbWUmJihlLmlzKFwicHVueWNvZGVcIikmJnQ/KGkrPXQudG9Vbmljb2RlKGUuaHAuaG9zdG5hbWUpLGUuaHAucG9ydCYmKGkrPVwiOlwiK2UuaHAucG9ydCkpOmkrPWUuaG9zdCgpKSxlLmhwLmhvc3RuYW1lJiZlLmhwLnBhdGgmJlwiL1wiIT09ZS5ocC5wYXRoLmNoYXJBdCgwKSYmKGkrPVwiL1wiKSxpKz1lLnBhdGgoITApLGUuaHAudmkpe2Zvcih2YXIgcj1cIlwiLG89MCxzPWUuaHAudmkuc3BsaXQoXCImXCIpLGE9cy5sZW5ndGg7bzxhO28rKyl7dmFyIGM9KHNbb118fFwiXCIpLnNwbGl0KFwiPVwiKTtyKz1cIiZcIituLmN1KGNbMF0sdGhpcy5ocC5mcCkucmVwbGFjZSgvJi9nLFwiJTI2XCIpLHZvaWQgMCE9PWNbMV0mJihyKz1cIj1cIituLmN1KGNbMV0sdGhpcy5ocC5mcCkucmVwbGFjZSgvJi9nLFwiJTI2XCIpKX1pKz1cIj9cIityLnN1YnN0cmluZygxKX1yZXR1cm4gaSs9bi5jdShlLmhhc2goKSwhMCl9LHkuY3A9ZnVuY3Rpb24odCl7dmFyIGUsaSxyLG89dGhpcy5jbG9uZSgpLHM9W1wicHJvdG9jb2xcIixcInVzZXJuYW1lXCIsXCJwYXNzd29yZFwiLFwiaG9zdG5hbWVcIixcInBvcnRcIl07aWYodGhpcy5ocC51cm4pdGhyb3cgbmV3IEVycm9yKFwiVVJOcyBkbyBub3QgaGF2ZSBhbnkgZ2VuZXJhbGx5IGRlZmluZWQgaGllcmFyY2hpY2FsIGNvbXBvbmVudHNcIik7aWYodCBpbnN0YW5jZW9mIG58fCh0PW5ldyBuKHQpKSxvLmhwLnByb3RvY29sKXJldHVybiBvO2lmKG8uaHAucHJvdG9jb2w9dC5ocC5wcm90b2NvbCx0aGlzLmhwLmhvc3RuYW1lKXJldHVybiBvO2ZvcihpPTA7cj1zW2ldO2krKylvLmhwW3JdPXQuaHBbcl07cmV0dXJuIG8uaHAucGF0aD8oXCIuLlwiPT09by5ocC5wYXRoLnN1YnN0cmluZygtMikmJihvLmhwLnBhdGgrPVwiL1wiKSxcIi9cIiE9PW8ucGF0aCgpLmNoYXJBdCgwKSYmKGU9dC5VdSgpLGU9ZT9lOjA9PT10LnBhdGgoKS5pbmRleE9mKFwiL1wiKT9cIi9cIjpcIlwiLG8uaHAucGF0aD0oZT9lK1wiL1wiOlwiXCIpK28uaHAucGF0aCxvLlZ1KCkpKTooby5ocC5wYXRoPXQuaHAucGF0aCxvLmhwLnZpfHwoby5ocC52aT10LmhwLnZpKSksby5wcCgpLG99LHkubmw9ZnVuY3Rpb24odCl7dmFyIGUsaSxyLG8scyxhPXRoaXMuY2xvbmUoKS5ub3JtYWxpemUoKTtpZihhLmhwLnVybil0aHJvdyBuZXcgRXJyb3IoXCJVUk5zIGRvIG5vdCBoYXZlIGFueSBnZW5lcmFsbHkgZGVmaW5lZCBoaWVyYXJjaGljYWwgY29tcG9uZW50c1wiKTtpZih0PW5ldyBuKHQpLm5vcm1hbGl6ZSgpLGU9YS5ocCxpPXQuaHAsbz1hLnBhdGgoKSxzPXQucGF0aCgpLFwiL1wiIT09by5jaGFyQXQoMCkpdGhyb3cgbmV3IEVycm9yKFwiVVJJIGlzIGFscmVhZHkgcmVsYXRpdmVcIik7aWYoXCIvXCIhPT1zLmNoYXJBdCgwKSl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY2FsY3VsYXRlIGEgVVJJIHJlbGF0aXZlIHRvIGFub3RoZXIgcmVsYXRpdmUgVVJJXCIpO2lmKGUucHJvdG9jb2w9PT1pLnByb3RvY29sJiYoZS5wcm90b2NvbD1udWxsKSxlLnVzZXJuYW1lIT09aS51c2VybmFtZXx8ZS5wYXNzd29yZCE9PWkucGFzc3dvcmQpcmV0dXJuIGEucHAoKTtpZihudWxsIT09ZS5wcm90b2NvbHx8bnVsbCE9PWUudXNlcm5hbWV8fG51bGwhPT1lLnBhc3N3b3JkKXJldHVybiBhLnBwKCk7aWYoZS5ob3N0bmFtZSE9PWkuaG9zdG5hbWV8fGUucG9ydCE9PWkucG9ydClyZXR1cm4gYS5wcCgpO2lmKGUuaG9zdG5hbWU9bnVsbCxlLnBvcnQ9bnVsbCxvPT09cylyZXR1cm4gZS5wYXRoPVwiXCIsYS5wcCgpO2lmKHI9bi5PdShvLHMpLCFyKXJldHVybiBhLnBwKCk7dmFyIGM9aS5wYXRoLnN1YnN0cmluZyhyLmxlbmd0aCkucmVwbGFjZSgvW15cXC9dKiQvLFwiXCIpLnJlcGxhY2UoLy4qP1xcLy9nLFwiLi4vXCIpO3JldHVybiBlLnBhdGg9YytlLnBhdGguc3Vic3RyaW5nKHIubGVuZ3RoKXx8XCIuL1wiLGEucHAoKX0seS5vbD1mdW5jdGlvbih0KXt2YXIgZSxpLHIsbz10aGlzLmNsb25lKCkscz1uZXcgbih0KSxjPXt9LGg9e30sdT17fTtpZihvLm5vcm1hbGl6ZSgpLHMubm9ybWFsaXplKCksby50b1N0cmluZygpPT09cy50b1N0cmluZygpKXJldHVybiEwO2lmKGU9by52aSgpLGk9cy52aSgpLG8udmkoXCJcIikscy52aShcIlwiKSxvLnRvU3RyaW5nKCkhPT1zLnRvU3RyaW5nKCkpcmV0dXJuITE7aWYoZS5sZW5ndGghPT1pLmxlbmd0aClyZXR1cm4hMTtjPW4ueXUoZSx0aGlzLmhwLmZwKSxoPW4ueXUoaSx0aGlzLmhwLmZwKTtmb3IociBpbiBjKWlmKG0uY2FsbChjLHIpKXtpZihhKGNbcl0pKXtpZighcChjW3JdLGhbcl0pKXJldHVybiExfWVsc2UgaWYoY1tyXSE9PWhbcl0pcmV0dXJuITE7dVtyXT0hMH1mb3IociBpbiBoKWlmKG0uY2FsbChoLHIpJiYhdVtyXSlyZXR1cm4hMTtyZXR1cm4hMH0seS5kcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ocC5kcD0hIXQsdGhpc30seS5mcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ocC5mcD0hIXQsdGhpc30sbn0pfSxmdW5jdGlvbih0LGUsaSl7LyohIHV1aWQuanNcbiAqIENvcHlyaWdodCAoYykgMjAxMC0yMDEyIFJvYmVydCBLaWVmZmVyXG4gKiBNSVQgTGljZW5zZSAtIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAqL1xuICAhZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcigpe3ZhciB0PWUuY3J5cHRvfHxlLm1zQ3J5cHRvO2lmKCFoJiZ0JiZ0LmdldFJhbmRvbVZhbHVlcyl0cnl7dmFyIGk9bmV3IFVpbnQ4QXJyYXkoMTYpO2w9aD1mdW5jdGlvbigpe3JldHVybiB0LmdldFJhbmRvbVZhbHVlcyhpKSxpfSxoKCl9Y2F0Y2gocil7fWlmKCFoKXt2YXIgbj1uZXcgQXJyYXkoMTYpO3A9aD1mdW5jdGlvbigpe2Zvcih2YXIgdCxlPTA7ZTwxNjtlKyspMD09PSgzJmUpJiYodD00Mjk0OTY3Mjk2Kk1hdGgucmFuZG9tKCkpLG5bZV09dD4+PigoMyZlKTw8MykmMjU1O3JldHVybiBufSxcInVuZGVmaW5lZFwiIT10eXBlb2YgY29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oXCJbU0VDVVJJVFldIG5vZGUtdXVpZDogY3J5cHRvIG5vdCB1c2FibGUsIGZhbGxpbmcgYmFjayB0byBpbnNlY3VyZSBNYXRoLnJhbmRvbSgpXCIpfX1mdW5jdGlvbiBuKCl7dHJ5e3ZhciB0PWkoMzMpLnJhbmRvbUJ5dGVzO3U9aD10JiZmdW5jdGlvbigpe3JldHVybiB0KDE2KX0saCgpfWNhdGNoKGUpe319ZnVuY3Rpb24gbyh0LGUsaSl7dmFyIHI9ZSYmaXx8MCxuPTA7Zm9yKGU9ZXx8W10sdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1swLTlhLWZdezJ9L2csZnVuY3Rpb24odCl7bjwxNiYmKGVbcituKytdPXZbdF0pfSk7bjwxNjspZVtyK24rK109MDtyZXR1cm4gZX1mdW5jdGlvbiBzKHQsZSl7dmFyIGk9ZXx8MCxyPWc7cmV0dXJuIHJbdFtpKytdXStyW3RbaSsrXV0rclt0W2krK11dK3JbdFtpKytdXStcIi1cIityW3RbaSsrXV0rclt0W2krK11dK1wiLVwiK3JbdFtpKytdXStyW3RbaSsrXV0rXCItXCIrclt0W2krK11dK3JbdFtpKytdXStcIi1cIityW3RbaSsrXV0rclt0W2krK11dK3JbdFtpKytdXStyW3RbaSsrXV0rclt0W2krK11dK3JbdFtpKytdXX1mdW5jdGlvbiBhKHQsZSxpKXt2YXIgcj1lJiZpfHwwLG49ZXx8W107dD10fHx7fTt2YXIgbz1udWxsIT10LmNsb2Nrc2VxP3QuY2xvY2tzZXE6VCxhPW51bGwhPXQubXNlY3M/dC5tc2VjczoobmV3IERhdGUpLmdldFRpbWUoKSxjPW51bGwhPXQubnNlY3M/dC5uc2VjczpiKzEsaD1hLVMrKGMtYikvMWU0O2lmKGg8MCYmbnVsbD09dC5jbG9ja3NlcSYmKG89bysxJjE2MzgzKSwoaDwwfHxhPlMpJiZudWxsPT10Lm5zZWNzJiYoYz0wKSxjPj0xZTQpdGhyb3cgbmV3IEVycm9yKFwidXVpZC52MSgpOiBDYW4ndCBjcmVhdGUgbW9yZSB0aGFuIDEwTSB1dWlkcy9zZWNcIik7Uz1hLGI9YyxUPW8sYSs9MTIyMTkyOTI4ZTU7dmFyIHA9KDFlNCooMjY4NDM1NDU1JmEpK2MpJTQyOTQ5NjcyOTY7bltyKytdPXA+Pj4yNCYyNTUsbltyKytdPXA+Pj4xNiYyNTUsbltyKytdPXA+Pj44JjI1NSxuW3IrK109MjU1JnA7dmFyIHU9YS80Mjk0OTY3Mjk2KjFlNCYyNjg0MzU0NTU7bltyKytdPXU+Pj44JjI1NSxuW3IrK109MjU1JnUsbltyKytdPXU+Pj4yNCYxNXwxNixuW3IrK109dT4+PjE2JjI1NSxuW3IrK109bz4+Pjh8MTI4LG5bcisrXT0yNTUmbztmb3IodmFyIGw9dC5ub2RlfHx3LGQ9MDtkPDY7ZCsrKW5bcitkXT1sW2RdO3JldHVybiBlP2U6cyhuKX1mdW5jdGlvbiBjKHQsZSxpKXt2YXIgcj1lJiZpfHwwO1wic3RyaW5nXCI9PXR5cGVvZiB0JiYoZT1cImJpbmFyeVwiPT09dD9uZXcgZigxNik6bnVsbCx0PW51bGwpLHQ9dHx8e307dmFyIG49dC5yYW5kb218fCh0LnJuZ3x8aCkoKTtpZihuWzZdPTE1Jm5bNl18NjQsbls4XT02MyZuWzhdfDEyOCxlKWZvcih2YXIgbz0wO288MTY7bysrKWVbcitvXT1uW29dO3JldHVybiBlfHxzKG4pfXZhciBoLHAsdSxsLGQ7ZT9yKCk6bigpO2Zvcih2YXIgZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBCdWZmZXI/QnVmZmVyOkFycmF5LGc9W10sdj17fSx5PTA7eTwyNTY7eSsrKWdbeV09KHkrMjU2KS50b1N0cmluZygxNikuc3Vic3RyKDEpLHZbZ1t5XV09eTt2YXIgbT1oKCksdz1bMXxtWzBdLG1bMV0sbVsyXSxtWzNdLG1bNF0sbVs1XV0sVD0xNjM4MyYobVs2XTw8OHxtWzddKSxTPTAsYj0wLEU9YztFLnNsPWEsRS5aaD1jLEUucGFyc2U9byxFLmFsPXMsRS5jbD1mLEUuaGw9aCxFLnBsPXAsRS51bD11LEUubGw9bCxcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmdC50P3QudD1FOihkPWUuZGwsRS5nZT1mdW5jdGlvbigpe3JldHVybiBlLmRsPWQsRX0sZS5kbD1FKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6bnVsbCl9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcixuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPXR9Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSk7dC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKTooaS5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IGkpfSxvPWkoMTEpOyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7ZS5EYXNoRmlsdGVyQml0cmF0ZXM9bnVsbCxlLkRhc2hSZW1vdmVCaXRyYXRlU2l6ZT0hMSx0LkRhc2g9ZTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7aS5mbD0hMCx0LlN0YXRzPWk7dmFyIHI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG4oZSx0KSxlfShvLkhpdmVDb25maWcuRGVidWdMb2dzKTtyLmdsPTAsdC5EZWJ1Z0xvZ3M9cjt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7cy51c2l6PW51bGwsdC5VRFBCcm9hZGNhc3Q9c30ocj1lLkhpdmVDb25maWd8fChlLkhpdmVDb25maWc9e30pKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdy5IaXZlQ29uZmlnJiYod2luZG93LkhpdmVDb25maWc9e30pLHdpbmRvdy5IaXZlQ29uZmlnLkRhc2g9ci5EYXNoLHdpbmRvdy5IaXZlQ29uZmlnLlN0YXRzPXIuU3RhdHMsd2luZG93LkhpdmVDb25maWcuVURQQnJvYWRjYXN0PXIuVURQQnJvYWRjYXN0LHdpbmRvdy5IaXZlQ29uZmlnLkRlYnVnTG9ncz1yLkRlYnVnTG9ncyl9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcixuPWkoMTEpLG89aSg0KSxzPW8udmU7IWZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbih0KXt0W3Qub2ZmPTBdPVwib2ZmXCIsdFt0LmVycm9yPTFdPVwiZXJyb3JcIix0W3Qud2Fybj0yXT1cIndhcm5cIix0W3Qubm90aWNlPTNdPVwibm90aWNlXCIsdFt0LmluZm89NF09XCJpbmZvXCIsdFt0LmRlYnVnPTVdPVwiZGVidWdcIix0W3QudHJhY2U9Nl09XCJ0cmFjZVwifShlPXQudmx8fCh0LnZsPXt9KSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy50aW1lc3RhbXA9ZnVuY3Rpb24oKXt9LHRoaXMueWw9bmV3IHMsdGhpcy5sZXZlbD1lLmRlYnVnLHRoaXMudGltZXN0YW1wLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IERhdGUsZT0oXCIwXCIrdC5nZXRVVENIb3VycygpKS5zbGljZSgtMikrXCI6XCIrKFwiMFwiK3QuZ2V0VVRDTWludXRlcygpKS5zbGljZSgtMikrXCI6XCIrKFwiMFwiK3QuZ2V0VVRDU2Vjb25kcygpKS5zbGljZSgtMikrXCI6XCIrdC5nZXRVVENNaWxsaXNlY29uZHMoKTtyZXR1cm5cIltcIitlK1wiXVwifSx0aGlzLm09XCJ1bmRlZmluZWRcIj09dHlwZW9mIGNvbnNvbGU/e2xvZzpmdW5jdGlvbigpe319OmNvbnNvbGUsdGhpcy5tLnRyYWNlfHwodGhpcy5tLnRyYWNlPXRoaXMubS5sb2cpLHRoaXMubS5kZWJ1Z3x8KHRoaXMubS5kZWJ1Zz10aGlzLm0ubG9nKSx0aGlzLm0uaW5mb3x8KHRoaXMubS5pbmZvPXRoaXMubS5sb2cpLHRoaXMubS53YXJufHwodGhpcy5tLndhcm49dGhpcy5tLmxvZyksdGhpcy5tLmVycm9yfHwodGhpcy5tLmVycm9yPXRoaXMubS5sb2cpLHRoaXMubWwoZVt0aGlzLmxldmVsXSl9cmV0dXJuIHQucHJvdG90eXBlLm1sPWZ1bmN0aW9uKHQsaSl7bi5IaXZlQ29uZmlnLkZyYW1ld29yay5IaXZlRGVidWdMZXZlbCYmdm9pZCAwIT1lW24uSGl2ZUNvbmZpZy5GcmFtZXdvcmsuSGl2ZURlYnVnTGV2ZWxdP3RoaXMubGV2ZWw9ZVtuLkhpdmVDb25maWcuRnJhbWV3b3JrLkhpdmVEZWJ1Z0xldmVsXTp2b2lkIDAhPWVbdF0/dGhpcy5sZXZlbD1lW3RdOmNvbnNvbGUubG9nKFwiV3JvbmcgbG9nZ2luZyBsZXZlbDogXCIrdCxlKSx0aGlzLndsKGkpfSx0LnByb3RvdHlwZS53bD1mdW5jdGlvbih0KXt2YXIgaT17bG9nOnRoaXMuVGwodGhpcy5tLmxvZyxlLmVycm9yLHQpLGVycm9yOnRoaXMuVGwodGhpcy5tLmVycm9yLGUuZXJyb3IsdCksd2Fybjp0aGlzLlRsKHRoaXMubS53YXJuLGUud2Fybix0KSxub3RpY2U6dGhpcy5UbCh0aGlzLm0uaW5mbyxlLm5vdGljZSx0KSxpbmZvOnRoaXMuVGwodGhpcy5tLmluZm8sZS5pbmZvLHQpLGRlYnVnOnRoaXMuVGwodGhpcy5tLmRlYnVnLGUuZGVidWcsdCksdHJhY2U6dGhpcy5UbCh0aGlzLm0udHJhY2UsZS50cmFjZSx0KX07dD90aGlzLnlsLnNldCh0LGkpOnRoaXMuU2w9aX0sdC5wcm90b3R5cGUuVGw9ZnVuY3Rpb24odCxlLGkpe2lmKCEodGhpcy5sZXZlbD49ZSkpcmV0dXJuIGZ1bmN0aW9uKCl7fTt0cnl7cmV0dXJuIG4uSGl2ZUNvbmZpZy5GcmFtZXdvcmsuTG9nZ2VyVGltZXN0YW1wP2k/RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbCh0LGNvbnNvbGUsXCIlcyAlc1wiLHRoaXMudGltZXN0YW1wLGkpOkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwodCxjb25zb2xlLFwiJXNcIix0aGlzLnRpbWVzdGFtcCk6RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbCh0LGNvbnNvbGUpfWNhdGNoKHIpe319LHQucHJvdG90eXBlLmxvZz1mdW5jdGlvbih0KXtyZXR1cm4gdD8odGhpcy55bC5oYXModCl8fHRoaXMubWwoZVt0aGlzLmxldmVsXSx0KSx0aGlzLnlsLmdldCh0KSk6dGhpcy5TbH0sdH0oKTt0LmJsPWl9KHI9ZS5FbHx8KGUuRWw9e30pKX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciByPWkoNCksbj1yLnZlLG89aSgxKSxzPWkoMiksYT1pKDQwKSxjPWkoNDkpLGg9aSgxNykscD1pKDExKSx1PWkoNyksbD1pKDQyKSxkPWkoOSksZj1pKDM3KSxnPWkoNSksdj1pKDUwKSx5PWkoNDgpLG09aSgyNyksdz1pKDE5KSxUPWkoMjApLFM9aSgxOCksYj1hLnB0LklyLEU9Yy5wdC5JbCxJPWgucHQudWgsUj1oLnB0LkNoLGs9aC5wdC5IaXZlVGVjaEVycm9yLEM9aC5wdC5iaCxPPWgucHQuQWg7ZS52ZXJzaW9uPVwiMy4yLjBcIjt2YXIgUDshZnVuY3Rpb24odCl7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuUmw9W0VbRS5IaXZlSmF2YV0sRVtFLkhpdmVKc1Byb3h5XSxFW0UuSGl2ZUpTXSxFW0UuU3RhdHNKU11dLHRoaXMua2w9bmV3IG4sdGhpcy5DbD1uZXcgQXJyYXksdGhpcy5PbD1uZXcgQXJyYXksdGhpcy5QbD1udWxsLHRoaXMuQWw9MCx0aGlzLk5sPTAsdGhpcy51PVwiW0hpdmVDb21tXSBcIix0aGlzLnhsPTAsdGhpcy5CbD11LmFyLmdldEl0ZW0oXCJoaXZlUGx1Z2luSWRcIiksdGhpcy5CbHx8KHRoaXMuQmw9TWF0aC5hYnMoTWF0aC5mbG9vcig2ODcxOTQ3NjczNipNYXRoLnJhbmRvbSgpKSkudG9TdHJpbmcoMTYpLHUuYXIuc2V0SXRlbShcImhpdmVQbHVnaW5JZFwiLHRoaXMuQmwpKSx3LkVycm9yTW9uaXRvci5XaSgpLHRoaXMub3B0aW9uc189bmV3IGIuRmwsdGhpcy5fbCh0KSx1Lm5yKHQsdGhpcy5vcHRpb25zXyksdS5vcih3aW5kb3cubG9jYXRpb24uaHJlZixuZXcgYi5EbCx0aGlzLm9wdGlvbnNfKSxhLkxsLkhsKHRoaXMub3B0aW9uc18pLHRoaXMuZm89cy5GcmFtZXdvcmsucmVzb2x2ZShzLkZyYW1ld29yay5GZS53ZSkscC5IaXZlQ29uZmlnLkZyYW1ld29yay5Mb2dnZXJUaW1lc3RhbXA9dGhpcy5vcHRpb25zKCkubG9nZ2VyVGltZXN0YW1wLHRoaXMuZm8ubWwodGhpcy5vcHRpb25zKCkuZGVidWdMZXZlbCksdy5FcnJvck1vbml0b3IuV2koKS5MaCh0aGlzLmZvLmxvZygpKTt2YXIgZT1zLkZyYW1ld29yay5yZXNvbHZlKGcuZ2kuQ2UpLGk9cy5GcmFtZXdvcmsucmVzb2x2ZShnLmdpLmNpKTtlLktvKCkudGhlbihmdW5jdGlvbih0KXt3LkVycm9yTW9uaXRvci5XaSgpLnNldFVzZXIodC5XbygpKX0pO3ZhciByPXt9O2kuUG4oKS50aGVuKGZ1bmN0aW9uKHQpe3I9e3BJUEFkZHI6dC5ObigpLkJuKCl9LHcuRXJyb3JNb25pdG9yLldpKCkuc2V0Q3VzdG9tRGF0YShyKX0pLHdpbmRvdy52bz10aGlzLmZvLmxvZygpLHRoaXMuTWwoKSx0aGlzLmpsPW5ldyBPKHRoaXMpLG5ldyBsLlVsKHRoaXMpO3ZhciBvPXRoaXMub3B0aW9ucygpLmlkbGVUaW1lUGVyaW9kPnRoaXMub3B0aW9ucygpLmZlZWRiYWNrUGVyaW9kP3RoaXMub3B0aW9ucygpLmlkbGVUaW1lUGVyaW9kOlMua2UueGg7dGhpcy5WbD1uZXcgdS52cihvKX1yZXR1cm4gdC5wcm90b3R5cGUub3B0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnNffSx0LnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm8ubG9nKCl9LHQucHJvdG90eXBlLlM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5CbH0sdC5wcm90b3R5cGUuY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS52ZXJzaW9ufSx0LnByb3RvdHlwZS5RbD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5PbDt0PGUubGVuZ3RoO3QrKyl7dmFyIGk9ZVt0XTtpLnRlY2gucWwodGhpcyl9fSx0LnByb3RvdHlwZS5fbD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgeS5TdGF0c0pTKHRoaXMsdCk7dGhpcy5rbC5zZXQoeS5TdGF0c0pTLkpsLGUpO3ZhciByPWkoNDMpLkhpdmVKYXZhO3RoaXMua2wuc2V0KHIuSmwsbmV3IHIodGhpcyx0KSk7dmFyIG49dC5oaXZlVGVjaE9yZGVyO2lmKCFufHxuIGluc3RhbmNlb2YgQXJyYXkpaWYobiYmbi5sZW5ndGg+MClmb3IodmFyIG89bi5sZW5ndGg7by0tOyl7dmFyIHM9bltvXTtcInN0cmluZ1wiIT10eXBlb2Ygc3x8dGhpcy5SbC5pbmRleE9mKHMpPT0tMT8oY29uc29sZS53YXJuKHRoaXMudSsnVGhlIFwiJytzKydcIiBIaXZlIHRlY2ggaXMgdW5kZWZpbmVkJyksbi5zcGxpY2UobywxKSk6XCJzdHJpbmdcIj09dHlwZW9mIHMmJnRoaXMua2wuaGFzKHMpfHxjb25zb2xlLndhcm4odGhpcy51KydUaGUgXCInK3MrJ1wiIEhpdmUgdGVjaCBpcyBub3QgZW5hYmxlZCBvbiB0aGlzIHBsdWdpbicpfWVsc2Ugbj10aGlzLlJsO2Vsc2UgY29uc29sZS53YXJuKHRoaXMudStcImhpdmVUZWNoT3JkZXIgdmFsdWUgbm90IGFjY2VwdGVkLiBJdCBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3NcIiksbj10aGlzLlJsO3QuaGl2ZVRlY2hPcmRlcj1ufSx0LnByb3RvdHlwZS5wPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5tKCkubm90aWNlKHRoaXMudStcInJlc29sdmluZyBcIit0KSx0aGlzLktsKHQpO3ZhciBpPW8uZGVmZXIoKSxyPXRoaXMuR2woKS52YWx1ZXMoKTswPT1yLmxlbmd0aCYmaS5yZWplY3QodS5zcih0LEkuc2gpKTt2YXIgbixzLGE9ITEsYz0hMSxoPTAscD1udWxsO3JldHVybiB1LlhpKGZ1bmN0aW9uKCl7cmV0dXJuIWEmJiFjJiZoPHIubGVuZ3RoJiYhbn0sZnVuY3Rpb24oKXt2YXIgaT1yW2grK107aS56bCgpO3ZhciB1O3JldHVybiB1PWkuV2woKSYmIXM/ZS4kbCh0KTpvLnJlc29sdmUobnVsbCksdS50aGVuKGZ1bmN0aW9uKHIpe251bGwhPXImJihzPXIpO3ZhciBuPWkuWWwoKTtyZXR1cm4gaS5pbml0U2Vzc2lvbih0LHMpLnRpbWVvdXQobixcIltcIitpLkFpKCkrXCJdIEVycm9yOiBpbml0aWFsaXphdGlvbiB0aW1lZCBvdXQgYWZ0ZXIgXCIrbitcIm1zXCIpLnRoZW4oZnVuY3Rpb24odCl7cD10LGUuWGwocCxpKSxhPSEwLCFpLldsKCkmJnMmJnMuUW4ucmVzZXQoKSxlLm0oKS5ub3RpY2UoZS51K1wiaW5pdGlhbGl6aW5nIFNlc3Npb246W1wiK3AuaWQrXCJdIFRpY2tldDpcIitwLnRpY2tldC50b1N0cmluZygpK1wiIEhpdmVUZWNoOltcIitwLnRlY2guQWkoKStcIl1cIiksby5yZXNvbHZlKCEwKX0sZnVuY3Rpb24ocil7ciBpbnN0YW5jZW9mIEVycm9yJiYocj1uZXcgayhDLlNoLHIubWVzc2FnZSksaS5abChyKSksci50aWNrZXRVcmw9dCxjPSFpLm9uRXJyb3IociksZS5tKCkuZGVidWcoZS51K1widGVjaCBcIitpLkFpKCkrXCI6IFwiK3IubWVzc2FnZSksby5yZXNvbHZlKCEwKX0pfSxmdW5jdGlvbih0KXtuPXQsby5yZXNvbHZlKCEwKX0pfSkudGhlbihmdW5jdGlvbigpe24/aS5yZWplY3QodS5zcih0LEkucGgsbikpOmM/aS5yZWplY3QodS5zcih0LEkuaGgpKTphP2kucmVzb2x2ZShwKTppLnJlamVjdCh1LnNyKHQsSS5zaCkpfSlbXCJjYXRjaFwiXShmdW5jdGlvbihlKXt3LkVycm9yTW9uaXRvci5XaSgpLl9oKGUpLGkucmVqZWN0KHUuc3IodCxJLm9oLGUudG9TdHJpbmcoKSkpfSkuZG9uZSgpLGkudnR9LHQucHJvdG90eXBlLiRsPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIG0uSGl2ZS5SZXBvcnRpbmcoKS5pbml0U2Vzc2lvbih0LCExKS50aGVuKGZ1bmN0aW9uKGkpe3JldHVybiBlLm0oKS5kZWJ1ZyhlLnUrXCJ2ZXJpZmllZCB0aWNrZXQgXCIrdCksZS5obihpKSxpfSlbXCJjYXRjaFwiXShmdW5jdGlvbih0KXtyZXR1cm4gby5yZWplY3QoXCJUaWNrZXQgbm90IHZlcmlmaWVkLCBlcnJvcjogXCIrdC5tZXNzYWdlKX0pfSx0LnByb3RvdHlwZS5HbD1mdW5jdGlvbigpe3ZhciB0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5vcHRpb25zKCkuaGl2ZVRlY2hPcmRlcikpLGU9bmV3IG47Zm9yKHZhciBpIGluIHQpdGhpcy5rbC5oYXModFtpXSkmJmUuc2V0KHRbaV0sdGhpcy5rbC5nZXQodFtpXSkpO3JldHVybiBlfSx0LnByb3RvdHlwZS5LbD1mdW5jdGlvbih0KXt2YXIgZT13LkVycm9yTW9uaXRvci5XaSgpO3RyeXt2YXIgaT1uZXcgVC5hcDtpLktoKHQpLGkuYm4oKSYmaS5FbigpJiZpLmVzKCk/ZS5zZXRUYWdzKFtpLmJuKCksaS5FbigpLGkuZXMoKV0pOmUuX2godGhpcy51K1wiIFRpY2tldCBub3QgdmFsaWQsIHdlIGNvdWxkIG5vdCByZXNvbHZlIHRoZSB0cmlwbGUgcGFydG5lcklkL0N1c3RvbWVySWQvQ29udGVudElkOiBcIitpLmJuKCkrXCIvXCIraS5FbigpK1wiL1wiK2kuZXMoKSl9Y2F0Y2gocil7dGhpcy5tKCkud2Fybih0aGlzLnUrXCIgXCIrci5tZXNzYWdlLHIpLGUubm90aWZ5KHIpfX0sdC5wcm90b3R5cGUuaG49ZnVuY3Rpb24odCl7dmFyIGk9e2NvbW1WZXJzaW9uOmUudmVyc2lvbixwbHVnaW5OYW1lOnRoaXMuVCgpLHBsdWdpblZlcnNpb246dGhpcy5JKCkscGxheWVyVGVjaDp0aGlzLmh0KCkscGxheWVyVmVyc2lvbjp0aGlzLnEoKSx0ZWxlbWV0cnlJZDp0aGlzLnRkKCl9O3QuUW4uaG4oaSl9LHQucHJvdG90eXBlLnY9ZnVuY3Rpb24oKXt3aW5kb3cuSGl2ZVJlcXVlc3Q9WE1MSHR0cFJlcXVlc3QsdS5IaXZlUmVxdWVzdEZhY3RvcnkuY2xlYXIoKSxtLkhpdmUuUmVwb3J0aW5nKCkuY2xvc2UoKX0sdC5wcm90b3R5cGUuZWQ9ZnVuY3Rpb24odCl7dGhpcy5QbCYmdGhpcy5QbC50ZWNoPyh0LnNlc3Npb25JZD10aGlzLlBsLmlkLHRoaXMuUGwudGVjaC53bih0aGlzLlBsLHQpKTp0aGlzLkNsLnB1c2godCl9LHQucHJvdG90eXBlLnJkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5DbDtyZXR1cm4gdGhpcy5DbD1uZXcgQXJyYXksdH0sdC5wcm90b3R5cGUuTWw9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9d2luZG93O2UuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIixmdW5jdGlvbigpe3QubmQoITApfSwhMSk6ZS5hdHRhY2hFdmVudChcIm9uYmVmb3JldW5sb2FkXCIsZnVuY3Rpb24oKXt0Lm5kKCEwKX0pfSx0LnByb3RvdHlwZS5oPWZ1bmN0aW9uKHQpe3RoaXMubmQodCksdGhpcy5QbD1udWxsLHRoaXMuT2w9bmV3IEFycmF5LHRoaXMuQWw9MCx0aGlzLk5sPTAsdGhpcy5vZCgpfSx0LnByb3RvdHlwZS5YbD1mdW5jdGlvbih0LGUpe3QudGVjaD1lLHRoaXMuT2wucHVzaCh0KX0sdC5wcm90b3R5cGUuUj1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLlBsKXtmb3IodmFyIGU9dD90OnRoaXMuaXQoKSxpPTA7aTx0aGlzLk9sLmxlbmd0aDtpKyspe3ZhciByPXRoaXMuT2xbaV07aWYoci5zdChlKSlyZXR1cm4gdGhpcy5QbD1yLHRoaXMuUGwuUmk/dGhpcy5QbC5SaS5fby5zZCh0aGlzLlBsLnRpY2tldCk6dGhpcy5hZCgpLHRoaXMuT2w9bmV3IEFycmF5LHRoaXMuUGwudGVjaC5vbkFjdGl2ZVNlc3Npb24odGhpcy5QbCksdGhpcy5tKCkubm90aWNlKHRoaXMudStcImFjdGl2YXRpbmcgU2Vzc2lvbjpbXCIrdGhpcy5QbC5pZCtcIl0gVGlja2V0OlwiK3RoaXMuUGwudGlja2V0LnRvU3RyaW5nKCkrXCIgSGl2ZVRlY2g6W1wiK3RoaXMuUGwudGVjaC5BaSgpK1wiXVwiKSx0aGlzLmhkKCksITB9dGhpcy5tKCkud2Fybih0aGlzLnUrXCJDbG9zaW5nIHNlc3Npb25zIC0gdGhlIGFjdGl2ZSBzdHJlYW0gZG9lc24ndCBtYXRjaCBhbnkgaW5pdGlhbGl6ZWQgc2Vzc2lvbnNcIiksdGhpcy5tKCkud2Fybih0aGlzLnUrXCJBY3RpdmU6XCIrZStcIiAtIGluaXRpYWxpemVkOiBcIit0aGlzLk9sLmxlbmd0aCksdGhpcy5oKCl9cmV0dXJuITF9LHQucHJvdG90eXBlLkM9ZnVuY3Rpb24oKXtpZih0aGlzLlBsKXJldHVybiB0aGlzLlBsLmcoKX0sdC5wcm90b3R5cGUuYWQ9ZnVuY3Rpb24oKXt2YXIgdD0hMTt0aGlzLk9sLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5SaSYmKHQ9ITApfSksdCYmbS5IaXZlLlJlcG9ydGluZygpLmNsb3NlKCl9LHQucHJvdG90eXBlLnBkPWZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy5QbCl7aWYodGhpcy5QbC5zdCh0aGlzLml0KCkpKXJldHVybiEwO3RoaXMubSgpLndhcm4odGhpcy51K1wiU2Vzc2lvbiBzcmMgbWlzbWF0Y2g6IFwiK3RoaXMuaXQoKStcIiAhPSBcIit0aGlzLlBsLm1hbmlmZXN0KSx0aGlzLmgoKX1yZXR1cm4hMX0sdC5wcm90b3R5cGUubmQ9ZnVuY3Rpb24odCl7aWYobnVsbCE9dGhpcy5QbCl0aGlzLm0oKS5ub3RpY2UodGhpcy51K1wiU3RvcHBpbmcgc2Vzc2lvbiBbXCIrdGhpcy5QbC5pZCtcIl1cIiksdGhpcy5QbC5jbG9zZSh0KTtlbHNlIGlmKHRoaXMuT2wubGVuZ3RoPjApe3ZhciBlPXRoaXMuT2xbMF07dGhpcy5tKCkubm90aWNlKHRoaXMudStcIkF0dGVtcHQgdG8gc3RvcHBpbmcgc2Vzc2lvbiBbXCIrZS5pZCtcIl1cIiksZS5jbG9zZSh0KX19LHQucHJvdG90eXBlLmhkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztudWxsPT10aGlzLnVkJiYodGhpcy51ZD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3QubGQoKX0sdGhpcy5vcHRpb25zKCkuZmVlZGJhY2tQZXJpb2QpLHRoaXMubGQoKSl9LHQucHJvdG90eXBlLm9kPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbCh0aGlzLnVkKSx0aGlzLnVkPW51bGx9LHQucHJvdG90eXBlLmxkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLnBkKCkpe2lmKCF0aGlzLnN0KCkpcmV0dXJuIHZvaWQgdGhpcy5oKCk7dmFyIGU9bmV3IHUuRmk7ZS5scj10aGlzLmdldEN1cnJlbnRUaW1lKCksZS5kcj10aGlzLm50KCksZS5ncj10aGlzLkFsLGUud2lkdGg9dGhpcy5vdCgpLndpZHRoLGUuaGVpZ2h0PXRoaXMub3QoKS5oZWlnaHQsZS5kZD10aGlzLmlzRnVsbHNjcmVlbigpLHRoaXMuUGwua2kodGhpcy5WbC5ocihlKSksdGhpcy5QbC50ZWNoLmZkKHRoaXMuUGwsZSkuZmFpbChmdW5jdGlvbihlKXt0Lm0oKS53YXJuKHQudStcInN0YXRzIGhhbmRsaW5nIGZhaWxlZFwiLGUpLHQub2QoKX0pfX0sdC5wcm90b3R5cGUuZ2Q9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RyeXt1LllpLldpKHRoaXMubSgpKS4kaShmdW5jdGlvbihlKXt2YXIgaT10LnZkKCk7aSYmIWkuT2koKSYmKHQuXyhlP2QuRi5CLmpyOmQuRi5CLkhJRERFTiksdC5tKCkuZGVidWcoZT9cInZpc2libGVcIjpcImhpZGRlblwiKSl9KX1jYXRjaChlKXt3LkVycm9yTW9uaXRvci5XaSgpLl9oKFwiZXJyb3Igc2V0dGluZyB1cCB0aGUgdmlzaWJpbGl0eUNoYW5nZSBsaXN0ZW5lclwiLHtlcnJvcjplfSl9fSx0LnByb3RvdHlwZS5rPWZ1bmN0aW9uKHQpe3RoaXMucGQoKSYmdGhpcy5ObDw9MCYmKHRoaXMuTmw9RGF0ZS5ub3coKSwodm9pZCAwPT10fHx0KSYmdGhpcy5fKGQuRi5CLkxyKSl9LHQucHJvdG90eXBlLkc9ZnVuY3Rpb24oKXt2YXIgdD0wPT10aGlzLkFsO2lmKHRoaXMuTmw+MCl7dmFyIGU9RGF0ZS5ub3coKS10aGlzLk5sO3JldHVybiB0aGlzLkFsKz1lLHRoaXMubSgpLmRlYnVnKHRoaXMudStcInJlcG9ydGluZyBuZXcgYnVmZmVyaW5nIGV2ZW50IG9mIFwiK2UpLHRoaXMuTmw9MCx0JiZ0aGlzLmxkKCksITB9cmV0dXJuITF9LHQucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24odCxlLGkpe3ZvaWQgMD09PWkmJihpPSEwKSx0aGlzLl8oZC5GLkIuRVJST1Ise2NvZGU6LTEsXCJwbGF5ZXItY29kZVwiOnR9KSxpJiZ0aGlzLmgoKX0sdC5wcm90b3R5cGUuXz1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMscj10aGlzLnZkKCk7bnVsbD09cnx8ciE9dGhpcy5QbCYmci50ZWNoLkFpKCk9PT1FW0UuSGl2ZUphdmFdfHxyLnRlY2gueWQocix0LGUpLmZhaWwoZnVuY3Rpb24odCl7aS5tKCkud2FybihpLnUrXCJlcnJvciBpbiBmb3J3YXJkaW5nIHBsYXllciBldmVudCB0byB0ZWNoXCIsdCl9KX0sdC5wcm90b3R5cGUudmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5QbD90aGlzLlBsOnRoaXMuT2wmJnRoaXMuT2wubGVuZ3RoPjA/dGhpcy5PbFswXTp2b2lkIDB9LHQucHJvdG90eXBlLm1kPWZ1bmN0aW9uKCl7dGhpcy54bD0wfSx0LnByb3RvdHlwZS53ZD1mdW5jdGlvbih0LGUpe3RoaXMubWQoKTt2YXIgaT03LHI9Njt0aGlzLnhsKz10PDw0KmksZSYmMD09PXQmJih0aGlzLnhsKz0xPDw0KihyLUVbZS5BaSgpXSkpLHQ+MCYmdy5FcnJvck1vbml0b3IuV2koKS5faCh0aGlzLnUrXCJTdGF0dXMgQ29kZSBFcnJvcjogXCIrUlt0XSl9LHQucHJvdG90eXBlLlBoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueGx9LHQucHJvdG90eXBlLnRkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucygpLnRlbGVtZXRyeUlkfSx0fSgpO3QuUGx1Z2luPXJ9KFA9ZS5wdHx8KGUucHQ9e30pKSxzLkZyYW1ld29yay5RZShuZXcgZi5UZCkscy5GcmFtZXdvcmsuR2UoXCJwZWVyMFwiLG5ldyB2LlNkKSxzLkZyYW1ld29yay56ZShcInBlZXIwXCIpLHdpbmRvdy5IaXZlUmVxdWVzdEZhY3Rvcnk9dS5IaXZlUmVxdWVzdEZhY3Rvcnl9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1pKDQ1KSxuPWkoNyksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5yZWFkeVN0YXRlPTMsdGhpcy5zdGF0dXM9MCx0JiYodGhpcy5zZXNzaW9uSWQ9dCl9cmV0dXJuIHQuTGg9ZnVuY3Rpb24oZSl7dC5tPWV9LHQucmVnaXN0ZXI9ZnVuY3Rpb24oZSxpKXt0LmJkW2VdPWl9LHQucHJvdG90eXBlLkVkPWZ1bmN0aW9uKGUpe3RoaXMuc2Vzc2lvbklkfHwodGhpcy5zZXNzaW9uSWQ9dC5iZFtlXSl9LHQucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24odCxlLGkpe3ZvaWQgMD09PWkmJihpPSExKSx0aGlzLm1ldGhvZD10LHRoaXMudXJsPWUsdGhpcy5JZD1pfSx0LnByb3RvdHlwZS5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5SZH0sdC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VIZWFkZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKTtpZihlKXt2YXIgaT1bXSxyPWUuc3BsaXQoXCJcXG5cIik7cmV0dXJuIHIuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KFwiOlwiKTtpW2VbMF1dPWVbMV19KSxpW3RdfX0sdC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe2lmKHQubSYmdC5tLmRlYnVnKHRoaXMubWV0aG9kK1wiIFwiK3RoaXMudXJsKSwhdGhpcy5zZXNzaW9uSWQpe3ZhciBlPU9iamVjdC5rZXlzKHQuYmQpO2UubGVuZ3RoPjAmJih0aGlzLnNlc3Npb25JZD10LmJkW2VbMF1dKX12YXIgaT10aGlzLG89bmV3IFhNTEh0dHBSZXF1ZXN0OzA9PT10aGlzLnVybC5pbmRleE9mKFwiLy9cIikmJih0aGlzLnVybD1sb2NhdGlvbi5wcm90b2NvbCt0aGlzLnVybCk7dmFyIHM9bi5ycihyLkNkLmtkLHIuQ2QuVG8sci5DZC5PZCx0aGlzLnNlc3Npb25JZCxlbmNvZGVVUklDb21wb25lbnQodGhpcy51cmwpKTtvLm9wZW4oXCJHRVRcIixzKSx0aGlzLnJlc3BvbnNlVHlwZSYmKG8ucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUeXBlKSxvLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe30sby5vbmxvYWQ9ZnVuY3Rpb24oKXtpZig0PT09by5yZWFkeVN0YXRlKXRyeXtpLlJkPW8uZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksaS5yZXNwb25zZT1vLnJlc3BvbnNlO3ZhciBlPW8ucmVzcG9uc2UuYnl0ZUxlbmd0aDtcImFycmF5YnVmZmVyXCIhPT1vLnJlc3BvbnNlVHlwZSYmKGkucmVzcG9uc2VUZXh0PW8ucmVzcG9uc2UpLGkucmVhZHlTdGF0ZT00LGkuc3RhdHVzPW8uc3RhdHVzLGkub25wcm9ncmVzcyh7bGVuZ3RoQ29tcHV0YWJsZTohMCxsb2FkZWQ6ZSx0b3RhbDplfSksaS5vbnJlYWR5c3RhdGVjaGFuZ2Uoe3R5cGU6XCJsb2FkZW5kXCIsdGFyZ2V0OmksY3VycmVudFRhcmdldDppLGJ1YmJsZXM6ITEsY2FuY2VsYWJsZTohMSxsZW5ndGhDb21wdXRhYmxlOiExLGxvYWRlZDplLHRvdGFsOmV9KSxpLm9ubG9hZCgpLGkub25sb2FkZW5kKHt0eXBlOlwibG9hZGVuZFwiLHRhcmdldDppLGN1cnJlbnRUYXJnZXQ6aSxidWJibGVzOiExLGNhbmNlbGFibGU6ITEsbGVuZ3RoQ29tcHV0YWJsZTohMSxsb2FkZWQ6ZSx0b3RhbDowfSl9Y2F0Y2gocil7dC5tJiZ0Lm0ud2FybihyKX19LG8ub25lcnJvcj1mdW5jdGlvbihlKXt0Lm0mJnQubS53YXJuKFwib25FcnJvcjogXCIrSlNPTi5zdHJpbmdpZnkoZSkpLGkub25lcnJvcihlKX0sby5vbmFib3J0PWZ1bmN0aW9uKGUpe3QubSYmdC5tLndhcm4oXCJvbkFib3J0OiBcIitKU09OLnN0cmluZ2lmeShlKSl9LG8uc2VuZCgpfSx0LnByb3RvdHlwZS5hYm9ydD1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUub25sb2FkPWZ1bmN0aW9uKCl7fSx0LnByb3RvdHlwZS5vbmxvYWRlbmQ9ZnVuY3Rpb24odCl7fSx0LnByb3RvdHlwZS5vbmVycm9yPWZ1bmN0aW9uKHQpe30sdC5wcm90b3R5cGUub25wcm9ncmVzcz1mdW5jdGlvbih0KXt9LHQucHJvdG90eXBlLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbih0KXt9LHR9KCk7by5iZD17fSxlLlRpPW99LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1pKDIpLG49aSg1KSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5SZXBvcnRpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHA9XCJTVEFUU1wiLHIuRnJhbWV3b3JrLnJlc29sdmUobi5naS51aSl9LHQuWG89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcHB9LHQuZ2V0VmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZlcnNpb259LHR9KCk7by52ZXJzaW9uPVwiMy4yLjBcIixlLkhpdmU9b30sZnVuY3Rpb24odCxlLGkpe3ZhciByOyFmdW5jdGlvbihuLG8pe1widXNlIHN0cmljdFwiO3ZhciBzPVwiMC43LjEyXCIsYT1cIlwiLGM9XCI/XCIsaD1cImZ1bmN0aW9uXCIscD1cInVuZGVmaW5lZFwiLHU9XCJvYmplY3RcIixsPVwic3RyaW5nXCIsZD1cIm1ham9yXCIsZj1cIm1vZGVsXCIsZz1cIm5hbWVcIix2PVwidHlwZVwiLHk9XCJ2ZW5kb3JcIixtPVwidmVyc2lvblwiLHc9XCJhcmNoaXRlY3R1cmVcIixUPVwiY29uc29sZVwiLFM9XCJtb2JpbGVcIixiPVwidGFibGV0XCIsRT1cInNtYXJ0dHZcIixJPVwid2VhcmFibGVcIixSPVwiZW1iZWRkZWRcIixrPXtleHRlbmQ6ZnVuY3Rpb24odCxlKXt2YXIgaT17fTtmb3IodmFyIHIgaW4gdCllW3JdJiZlW3JdLmxlbmd0aCUyPT09MD9pW3JdPWVbcl0uY29uY2F0KHRbcl0pOmlbcl09dFtyXTtyZXR1cm4gaX0saGFzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJmUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHQudG9Mb3dlckNhc2UoKSkhPT0tMX0sUGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQudG9Mb3dlckNhc2UoKX0sQWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0PT09bD90LnJlcGxhY2UoL1teXFxkXFwuXS9nLFwiXCIpLnNwbGl0KFwiLlwiKVswXTpvfSx0cmltOmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFwiXCIpfX0sQz17TmQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQsZSxpLHIsbixzLGEsYz0wLGw9YXJndW1lbnRzO2M8bC5sZW5ndGgmJiFzOyl7dmFyIGQ9bFtjXSxmPWxbYysxXTtpZih0eXBlb2YgdD09PXApe3Q9e307Zm9yKHIgaW4gZilmLmhhc093blByb3BlcnR5KHIpJiYobj1mW3JdLHR5cGVvZiBuPT09dT90W25bMF1dPW86dFtuXT1vKX1mb3IoZT1pPTA7ZTxkLmxlbmd0aCYmIXM7KWlmKHM9ZFtlKytdLmV4ZWModGhpcy54ZCgpKSlmb3Iocj0wO3I8Zi5sZW5ndGg7cisrKWE9c1srK2ldLG49ZltyXSx0eXBlb2Ygbj09PXUmJm4ubGVuZ3RoPjA/Mj09bi5sZW5ndGg/dHlwZW9mIG5bMV09PWg/dFtuWzBdXT1uWzFdLmNhbGwodGhpcyxhKTp0W25bMF1dPW5bMV06Mz09bi5sZW5ndGg/dHlwZW9mIG5bMV0hPT1ofHxuWzFdLmV4ZWMmJm5bMV0udGVzdD90W25bMF1dPWE/YS5yZXBsYWNlKG5bMV0sblsyXSk6bzp0W25bMF1dPWE/blsxXS5jYWxsKHRoaXMsYSxuWzJdKTpvOjQ9PW4ubGVuZ3RoJiYodFtuWzBdXT1hP25bM10uY2FsbCh0aGlzLGEucmVwbGFjZShuWzFdLG5bMl0pKTpvKTp0W25dPWE/YTpvO2MrPTJ9cmV0dXJuIHR9LGFjOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpaWYodHlwZW9mIGVbaV09PT11JiZlW2ldLmxlbmd0aD4wKXtmb3IodmFyIHI9MDtyPGVbaV0ubGVuZ3RoO3IrKylpZihrLmhhcyhlW2ldW3JdLHQpKXJldHVybiBpPT09Yz9vOml9ZWxzZSBpZihrLmhhcyhlW2ldLHQpKXJldHVybiBpPT09Yz9vOmk7cmV0dXJuIHR9fSxPPXt0aTp7QmQ6e3ZlcnNpb246e1wiMS4wXCI6XCIvOFwiLDEuMjpcIi8xXCIsMS4zOlwiLzNcIixcIjIuMFwiOlwiLzQxMlwiLFwiMi4wLjJcIjpcIi80MTZcIixcIjIuMC4zXCI6XCIvNDE3XCIsXCIyLjAuNFwiOlwiLzQxOVwiLEtwOlwiL1wifX19LEZkOntfZDp7RGQ6e0hkOltcIlNEXCIsXCJLRlwiXX19LExkOntEZDp7TWQ6XCI3MzczS1RcIn0sdmVuZG9yOntqZDpcIkFQQVwiLFVkOlwiU3ByaW50XCJ9fX0sb3M6e1ZkOnt2ZXJzaW9uOntRZDpcIjQuOTBcIixcIk5UIDMuMTFcIjpcIk5UMy41MVwiLFwiTlQgNC4wXCI6XCJOVDQuMFwiLDIwMDA6XCJOVCA1LjBcIixxZDpbXCJOVCA1LjFcIixcIk5UIDUuMlwiXSxKZDpcIk5UIDYuMFwiLDc6XCJOVCA2LjFcIiw4OlwiTlQgNi4yXCIsOC4xOlwiTlQgNi4zXCIsMTA6W1wiTlQgNi40XCIsXCJOVCAxMC4wXCJdLEtkOlwiQVJNXCJ9fX19LFA9e3RpOltbLyhvcGVyYVxcc21pbmkpXFwvKFtcXHdcXC4tXSspL2ksLyhvcGVyYVxcc1ttb2JpbGV0YWJdKykuK3ZlcnNpb25cXC8oW1xcd1xcLi1dKykvaSwvKG9wZXJhKS4rdmVyc2lvblxcLyhbXFx3XFwuXSspL2ksLyhvcGVyYSlbXFwvXFxzXSsoW1xcd1xcLl0rKS9pXSxbZyxtXSxbLyhvcGlvcylbXFwvXFxzXSsoW1xcd1xcLl0rKS9pXSxbW2csXCJPcGVyYSBNaW5pXCJdLG1dLFsvXFxzKG9wcilcXC8oW1xcd1xcLl0rKS9pXSxbW2csXCJPcGVyYVwiXSxtXSxbLyhraW5kbGUpXFwvKFtcXHdcXC5dKykvaSwvKGx1bmFzY2FwZXxtYXh0aG9ufG5ldGZyb250fGphc21pbmV8YmxhemVyKVtcXC9cXHNdPyhbXFx3XFwuXSspKi9pLC8oYXZhbnRcXHN8aWVtb2JpbGV8c2xpbXxiYWlkdSkoPzpicm93c2VyKT9bXFwvXFxzXT8oW1xcd1xcLl0qKS9pLC8oPzptc3xcXCgpKGllKVxccyhbXFx3XFwuXSspL2ksLyhyZWtvbnEpXFwvKFtcXHdcXC5dKykqL2ksLyhjaHJvbWl1bXxmbG9ja3xyb2NrbWVsdHxtaWRvcml8ZXBpcGhhbnl8c2lsa3xza3lmaXJlfG92aWJyb3dzZXJ8Ym9sdHxpcm9ufHZpdmFsZGl8aXJpZGl1bXxwaGFudG9tanMpXFwvKFtcXHdcXC4tXSspL2ldLFtnLG1dLFsvKHRyaWRlbnQpLitydls6XFxzXShbXFx3XFwuXSspLitsaWtlXFxzZ2Vja28vaV0sW1tnLFwiSUVcIl0sbV0sWy8oZWRnZSlcXC8oKFxcZCspP1tcXHdcXC5dKykvaV0sW2csbV0sWy8oeWFicm93c2VyKVxcLyhbXFx3XFwuXSspL2ldLFtbZyxcIllhbmRleFwiXSxtXSxbLyhjb21vZG9fZHJhZ29uKVxcLyhbXFx3XFwuXSspL2ldLFtbZywvXy9nLFwiIFwiXSxtXSxbLyhtaWNyb21lc3NlbmdlcilcXC8oW1xcd1xcLl0rKS9pXSxbW2csXCJXZUNoYXRcIl0sbV0sWy94aWFvbWlcXC9taXVpYnJvd3NlclxcLyhbXFx3XFwuXSspL2ldLFttLFtnLFwiTUlVSSBCcm93c2VyXCJdXSxbL1xcc3d2XFwpLisoY2hyb21lKVxcLyhbXFx3XFwuXSspL2ldLFtbZywvKC4rKS8sXCIkMSBXZWJWaWV3XCJdLG1dLFsvYW5kcm9pZC4rc2Ftc3VuZ2Jyb3dzZXJcXC8oW1xcd1xcLl0rKS9pLC9hbmRyb2lkLit2ZXJzaW9uXFwvKFtcXHdcXC5dKylcXHMrKD86bW9iaWxlXFxzP3NhZmFyaXxzYWZhcmkpKi9pXSxbbSxbZyxcIkFuZHJvaWQgQnJvd3NlclwiXV0sWy8oY2hyb21lfG9tbml3ZWJ8YXJvcmF8W3RpemVub2thXXs1fVxccz9icm93c2VyKVxcL3Y/KFtcXHdcXC5dKykvaSwvKHFxYnJvd3NlcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pXSxbZyxtXSxbLyh1Y1xccz9icm93c2VyKVtcXC9cXHNdPyhbXFx3XFwuXSspL2ksL3Vjd2ViLisodWNicm93c2VyKVtcXC9cXHNdPyhbXFx3XFwuXSspL2ksL2p1Yy4rKHVjd2ViKVtcXC9cXHNdPyhbXFx3XFwuXSspL2ldLFtbZyxcIlVDQnJvd3NlclwiXSxtXSxbLyhkb2xmaW4pXFwvKFtcXHdcXC5dKykvaV0sW1tnLFwiRG9scGhpblwiXSxtXSxbLygoPzphbmRyb2lkLispY3Jtb3xjcmlvcylcXC8oW1xcd1xcLl0rKS9pXSxbW2csXCJDaHJvbWVcIl0sbV0sWy87ZmJhdlxcLyhbXFx3XFwuXSspOy9pXSxbbSxbZyxcIkZhY2Vib29rXCJdXSxbL2Z4aW9zXFwvKFtcXHdcXC4tXSspL2ldLFttLFtnLFwiRmlyZWZveFwiXV0sWy92ZXJzaW9uXFwvKFtcXHdcXC5dKykuKz9tb2JpbGVcXC9cXHcrXFxzKHNhZmFyaSkvaV0sW20sW2csXCJNb2JpbGUgU2FmYXJpXCJdXSxbL3ZlcnNpb25cXC8oW1xcd1xcLl0rKS4rPyhtb2JpbGVcXHM/c2FmYXJpfHNhZmFyaSkvaV0sW20sZ10sWy93ZWJraXQuKz8obW9iaWxlXFxzP3NhZmFyaXxzYWZhcmkpKFxcL1tcXHdcXC5dKykvaV0sW2csW20sQy5hYyxPLnRpLkJkLnZlcnNpb25dXSxbLyhrb25xdWVyb3IpXFwvKFtcXHdcXC5dKykvaSwvKHdlYmtpdHxraHRtbClcXC8oW1xcd1xcLl0rKS9pXSxbZyxtXSxbLyhuYXZpZ2F0b3J8bmV0c2NhcGUpXFwvKFtcXHdcXC4tXSspL2ldLFtbZyxcIk5ldHNjYXBlXCJdLG1dLFsvKHN3aWZ0Zm94KS9pLC8oaWNlZHJhZ29ufGljZXdlYXNlbHxjYW1pbm98Y2hpbWVyYXxmZW5uZWN8bWFlbW9cXHNicm93c2VyfG1pbmltb3xjb25rZXJvcilbXFwvXFxzXT8oW1xcd1xcLlxcK10rKS9pLC8oZmlyZWZveHxzZWFtb25rZXl8ay1tZWxlb258aWNlY2F0fGljZWFwZXxmaXJlYmlyZHxwaG9lbml4KVxcLyhbXFx3XFwuLV0rKS9pLC8obW96aWxsYSlcXC8oW1xcd1xcLl0rKS4rcnZcXDouK2dlY2tvXFwvXFxkKy9pLC8ocG9sYXJpc3xseW54fGRpbGxvfGljYWJ8ZG9yaXN8YW1heWF8dzNtfG5ldHN1cmZ8c2xlaXBuaXIpW1xcL1xcc10/KFtcXHdcXC5dKykvaSwvKGxpbmtzKVxcc1xcKChbXFx3XFwuXSspL2ksLyhnb2Jyb3dzZXIpXFwvPyhbXFx3XFwuXSspKi9pLC8oaWNlXFxzP2Jyb3dzZXIpXFwvdj8oW1xcd1xcLl9dKykvaSwvKG1vc2FpYylbXFwvXFxzXShbXFx3XFwuXSspL2ldLFtnLG1dXSxHZDpbWy8oPzooYW1kfHgoPzooPzo4Nnw2NClbXy1dKT98d293fHdpbik2NClbO1xcKV0vaV0sW1t3LFwiYW1kNjRcIl1dLFsvKGlhMzIoPz07KSkvaV0sW1t3LGsuUGRdXSxbLygoPzppWzM0Nl18eCk4NilbO1xcKV0vaV0sW1t3LFwiaWEzMlwiXV0sWy93aW5kb3dzXFxzKGNlfG1vYmlsZSk7XFxzcHBjOy9pXSxbW3csXCJhcm1cIl1dLFsvKCg/OnBwY3xwb3dlcnBjKSg/OjY0KT8pKD86XFxzbWFjfDt8XFwpKS9pXSxbW3csL293ZXIvLFwiXCIsay5QZF1dLFsvKHN1bjRcXHcpWztcXCldL2ldLFtbdyxcInNwYXJjXCJdXSxbLygoPzphdnIzMnxpYTY0KD89OykpfDY4ayg/PVxcKSl8YXJtKD86NjR8KD89dlxcZCs7KSl8KD89YXRtZWxcXHMpYXZyfCg/OmlyaXh8bWlwc3xzcGFyYykoPzo2NCk/KD89Oyl8cGEtcmlzYykvaV0sW1t3LGsuUGRdXV0sRmQ6W1svXFwoKGlwYWR8cGxheWJvb2spO1tcXHdcXHNcXCk7LV0rKHJpbXxhcHBsZSkvaV0sW2YseSxbdixiXV0sWy9hcHBsZWNvcmVtZWRpYVxcL1tcXHdcXC5dKyBcXCgoaXBhZCkvXSxbZixbeSxcIkFwcGxlXCJdLFt2LGJdXSxbLyhhcHBsZVxcc3swLDF9dHYpL2ldLFtbZixcIkFwcGxlIFRWXCJdLFt5LFwiQXBwbGVcIl1dLFsvKGFyY2hvcylcXHMoZ2FtZXBhZDI/KS9pLC8oaHApLisodG91Y2hwYWQpL2ksLyhocCkuKyh0YWJsZXQpL2ksLyhraW5kbGUpXFwvKFtcXHdcXC5dKykvaSwvXFxzKG5vb2spW1xcd1xcc10rYnVpbGRcXC8oXFx3KykvaSwvKGRlbGwpXFxzKHN0cmVhW2twclxcc1xcZF0qW1xcZGtvXSkvaV0sW3ksZixbdixiXV0sWy8oa2ZbQS16XSspXFxzYnVpbGRcXC9bXFx3XFwuXSsuKnNpbGtcXC8vaV0sW2YsW3ksXCJBbWF6b25cIl0sW3YsYl1dLFsvKHNkfGtmKVswMzQ5aGlqb3JzdHV3XStcXHNidWlsZFxcL1tcXHdcXC5dKy4qc2lsa1xcLy9pXSxbW2YsQy5hYyxPLkZkLl9kLkRkXSxbeSxcIkFtYXpvblwiXSxbdixTXV0sWy9cXCgoaXBbaG9uZWR8XFxzXFx3Kl0rKTsuKyhhcHBsZSkvaV0sW2YseSxbdixTXV0sWy9cXCgoaXBbaG9uZWR8XFxzXFx3Kl0rKTsvaV0sW2YsW3ksXCJBcHBsZVwiXSxbdixTXV0sWy8oYmxhY2tiZXJyeSlbXFxzLV0/KFxcdyspL2ksLyhibGFja2JlcnJ5fGJlbnF8cGFsbSg/PVxcLSl8c29ueWVyaWNzc29ufGFjZXJ8YXN1c3xkZWxsfGh1YXdlaXxtZWl6dXxtb3Rvcm9sYXxwb2x5dHJvbilbXFxzXy1dPyhbXFx3LV0rKSovaSwvKGhwKVxccyhbXFx3XFxzXStcXHcpL2ksLyhhc3VzKS0/KFxcdyspL2ldLFt5LGYsW3YsU11dLFsvXFwoYmIxMDtcXHMoXFx3KykvaV0sW2YsW3ksXCJCbGFja0JlcnJ5XCJdLFt2LFNdXSxbL2FuZHJvaWQuKyh0cmFuc2ZvW3ByaW1lXFxzXXs0LDEwfVxcc1xcdyt8ZWVlcGN8c2xpZGVyXFxzXFx3K3xuZXh1cyA3fHBhZGZvbmUpL2ldLFtmLFt5LFwiQXN1c1wiXSxbdixiXV0sWy8oc29ueSlcXHModGFibGV0XFxzW3BzXSlcXHNidWlsZFxcLy9pLC8oc29ueSk/KD86c2dwLispXFxzYnVpbGRcXC8vaV0sW1t5LFwiU29ueVwiXSxbZixcIlhwZXJpYSBUYWJsZXRcIl0sW3YsYl1dLFsvKD86c29ueSk/KD86KD86KD86Y3xkKVxcZHs0fSl8KD86c29bLWxdLispKVxcc2J1aWxkXFwvL2ldLFtbeSxcIlNvbnlcIl0sW2YsXCJYcGVyaWEgUGhvbmVcIl0sW3YsU11dLFsvXFxzKG91eWEpXFxzL2ksLyhuaW50ZW5kbylcXHMoW3dpZHMzdV0rKS9pXSxbeSxmLFt2LFRdXSxbL2FuZHJvaWQuKztcXHMoc2hpZWxkKVxcc2J1aWxkL2ldLFtmLFt5LFwiTnZpZGlhXCJdLFt2LFRdXSxbLyhwbGF5c3RhdGlvblxcc1szNHBvcnRhYmxldmldKykvaV0sW2YsW3ksXCJTb255XCJdLFt2LFRdXSxbLyhzcHJpbnRcXHMoXFx3KykpL2ldLFtbeSxDLmFjLE8uRmQuTGQudmVuZG9yXSxbZixDLmFjLE8uRmQuTGQuRGRdLFt2LFNdXSxbLyhsZW5vdm8pXFxzPyhTKD86NTAwMHw2MDAwKSsoPzpbLV1bXFx3K10pKS9pXSxbeSxmLFt2LGJdXSxbLyhodGMpWztfXFxzLV0rKFtcXHdcXHNdKyg/PVxcKSl8XFx3KykqL2ksLyh6dGUpLShcXHcrKSovaSwvKGFsY2F0ZWx8Z2Vla3NwaG9uZXxodWF3ZWl8bGVub3ZvfG5leGlhbnxwYW5hc29uaWN8KD89O1xccylzb255KVtfXFxzLV0/KFtcXHctXSspKi9pXSxbeSxbZiwvXy9nLFwiIFwiXSxbdixTXV0sWy8obmV4dXNcXHM5KS9pXSxbZixbeSxcIkhUQ1wiXSxbdixiXV0sWy8obmV4dXNcXHM2cCkvaV0sW2YsW3ksXCJIdWF3ZWlcIl0sW3YsU11dLFsvKG1pY3Jvc29mdCk7XFxzKGx1bWlhW1xcc1xcd10rKS9pXSxbeSxmLFt2LFNdXSxbL1tcXHNcXCg7XSh4Ym94KD86XFxzb25lKT8pW1xcc1xcKTtdL2ldLFtmLFt5LFwiTWljcm9zb2Z0XCJdLFt2LFRdXSxbLyhraW5cXC5bb25ldHddezN9KS9pXSxbW2YsL1xcLi9nLFwiIFwiXSxbeSxcIk1pY3Jvc29mdFwiXSxbdixTXV0sWy9cXHMobWlsZXN0b25lfGRyb2lkKD86WzItNHhdfFxccyg/OmJpb25pY3x4Mnxwcm98cmF6cikpPyg6P1xcczRnKT8pW1xcd1xcc10rYnVpbGRcXC8vaSwvbW90W1xccy1dPyhcXHcrKSovaSwvKFhUXFxkezMsNH0pIGJ1aWxkXFwvL2ksLyhuZXh1c1xcczYpL2ldLFtmLFt5LFwiTW90b3JvbGFcIl0sW3YsU11dLFsvYW5kcm9pZC4rXFxzKG16NjBcXGR8eG9vbVtcXHMyXXswLDJ9KVxcc2J1aWxkXFwvL2ldLFtmLFt5LFwiTW90b3JvbGFcIl0sW3YsYl1dLFsvaGJidHZcXC9cXGQrXFwuXFxkK1xcLlxcZCtcXHMrXFwoW1xcd1xcc10qO1xccyooXFx3W147XSopOyhbXjtdKikvaV0sW1t5LGsudHJpbV0sW2Ysay50cmltXSxbdixFXV0sWy9oYmJ0di4rbWFwbGU7KFxcZCspL2ldLFtbZiwvXi8sXCJTbWFydFRWXCJdLFt5LFwiU2Ftc3VuZ1wiXSxbdixFXV0sWy9cXChkdHZbXFwpO10uKyhhcXVvcykvaV0sW2YsW3ksXCJTaGFycFwiXSxbdixFXV0sWy9hbmRyb2lkLisoKHNjaC1pWzg5XTBcXGR8c2h3LW0zODBzfGd0LXBcXGR7NH18Z3QtblxcZCt8c2doLXQ4WzU2XTl8bmV4dXMgMTApKS9pLC8oKFNNLVRcXHcrKSkvaV0sW1t5LFwiU2Ftc3VuZ1wiXSxmLFt2LGJdXSxbL3NtYXJ0LXR2Lisoc2Ftc3VuZykvaV0sW3ksW3YsRV0sZl0sWy8oKHNbY2dwXWgtXFx3K3xndC1cXHcrfGdhbGF4eVxcc25leHVzfHNtLVxcd1tcXHdcXGRdKykpL2ksLyhzYW1bc3VuZ10qKVtcXHMtXSooXFx3Ky0/W1xcdy1dKikqL2ksL3NlYy0oKHNnaFxcdyspKS9pXSxbW3ksXCJTYW1zdW5nXCJdLGYsW3YsU11dLFsvc2llLShcXHcrKSovaV0sW2YsW3ksXCJTaWVtZW5zXCJdLFt2LFNdXSxbLyhtYWVtb3xub2tpYSkuKihuOTAwfGx1bWlhXFxzXFxkKykvaSwvKG5va2lhKVtcXHNfLV0/KFtcXHctXSspKi9pXSxbW3ksXCJOb2tpYVwiXSxmLFt2LFNdXSxbL2FuZHJvaWRcXHMzXFwuW1xcc1xcdzstXXsxMH0oYVxcZHszfSkvaV0sW2YsW3ksXCJBY2VyXCJdLFt2LGJdXSxbL2FuZHJvaWRcXHMzXFwuW1xcc1xcdzstXXsxMH0obGc/KS0oWzA2Y3Y5XXszLDR9KS9pXSxbW3ksXCJMR1wiXSxmLFt2LGJdXSxbLyhsZykgbmV0Y2FzdFxcLnR2L2ldLFt5LGYsW3YsRV1dLFsvKG5leHVzXFxzWzQ1XSkvaSwvbGdbZTtcXHNcXC8tXSsoXFx3KykqL2ldLFtmLFt5LFwiTEdcIl0sW3YsU11dLFsvYW5kcm9pZC4rKGlkZWF0YWJbYS16MC05XFwtXFxzXSspL2ldLFtmLFt5LFwiTGVub3ZvXCJdLFt2LGJdXSxbL2xpbnV4Oy4rKChqb2xsYSkpOy9pXSxbeSxmLFt2LFNdXSxbLygocGViYmxlKSlhcHBcXC9bXFxkXFwuXStcXHMvaV0sW3ksZixbdixJXV0sWy9hbmRyb2lkLis7XFxzKGdsYXNzKVxcc1xcZC9pXSxbZixbeSxcIkdvb2dsZVwiXSxbdixJXV0sWy9hbmRyb2lkLisoXFx3KylcXHMrYnVpbGRcXC9obVxcMS9pLC9hbmRyb2lkLisoaG1bXFxzXFwtX10qbm90ZT9bXFxzX10qKD86XFxkXFx3KT8pXFxzK2J1aWxkL2ksL2FuZHJvaWQuKyhtaVtcXHNcXC1fXSooPzpvbmV8b25lW1xcc19dcGx1c3xub3RlIGx0ZSk/W1xcc19dKig/OlxcZFxcdyk/KVxccytidWlsZC9pXSxbW2YsL18vZyxcIiBcIl0sW3ksXCJYaWFvbWlcIl0sW3YsU11dLFsvYW5kcm9pZC4rYTAwMCgxKVxccytidWlsZC9pXSxbZixbeSxcIk9uZVBsdXNcIl0sW3YsU11dLFsvXFxzKHRhYmxldClbO1xcL10vaSwvXFxzKG1vYmlsZSkoPzpbO1xcL118XFxzc2FmYXJpKS9pXSxbW3Ysay5QZF0seSxmXV0semQ6W1svd2luZG93cy4rXFxzZWRnZVxcLyhbXFx3XFwuXSspL2ldLFttLFtnLFwiRWRnZUhUTUxcIl1dLFsvKHByZXN0bylcXC8oW1xcd1xcLl0rKS9pLC8od2Via2l0fHRyaWRlbnR8bmV0ZnJvbnR8bmV0c3VyZnxhbWF5YXxseW54fHczbSlcXC8oW1xcd1xcLl0rKS9pLC8oa2h0bWx8dGFzbWFufGxpbmtzKVtcXC9cXHNdXFwoPyhbXFx3XFwuXSspL2ksLyhpY2FiKVtcXC9cXHNdKFsyM11cXC5bXFxkXFwuXSspL2ldLFtnLG1dLFsvcnZcXDooW1xcd1xcLl0rKS4qKGdlY2tvKS9pXSxbbSxnXV0sb3M6W1svbWljcm9zb2Z0XFxzKHdpbmRvd3MpXFxzKHZpc3RhfHhwKS9pXSxbZyxtXSxbLyh3aW5kb3dzKVxcc250XFxzNlxcLjI7XFxzKGFybSkvaSwvKHdpbmRvd3NcXHNwaG9uZSg/Olxcc29zKSopW1xcc1xcL10/KFtcXGRcXC5cXHNdK1xcdykqL2ksLyh3aW5kb3dzXFxzbW9iaWxlfHdpbmRvd3MpW1xcc1xcL10/KFtudGNlXFxkXFwuXFxzXStcXHcpL2ldLFtnLFttLEMuYWMsTy5vcy5WZC52ZXJzaW9uXV0sWy8od2luKD89M3w5fG4pfHdpblxcczl4XFxzKShbbnRcXGRcXC5dKykvaV0sW1tnLFwiV2luZG93c1wiXSxbbSxDLmFjLE8ub3MuVmQudmVyc2lvbl1dLFsvXFwoKGJiKSgxMCk7L2ldLFtbZyxcIkJsYWNrQmVycnlcIl0sbV0sWy8oYmxhY2tiZXJyeSlcXHcqXFwvPyhbXFx3XFwuXSspKi9pLC8odGl6ZW4pW1xcL1xcc10oW1xcd1xcLl0rKS9pLC8oYW5kcm9pZHx3ZWJvc3xwYWxtXFxzb3N8cW54fGJhZGF8cmltXFxzdGFibGV0XFxzb3N8bWVlZ298Y29udGlraSlbXFwvXFxzLV0/KFtcXHdcXC5dKykqL2ksL2xpbnV4Oy4rKHNhaWxmaXNoKTsvaV0sW2csbV0sWy8oc3ltYmlhblxccz9vc3xzeW1ib3N8czYwKD89OykpW1xcL1xccy1dPyhbXFx3XFwuXSspKi9pXSxbW2csXCJTeW1iaWFuXCJdLG1dLFsvXFwoKHNlcmllczQwKTsvaV0sW2ddLFsvbW96aWxsYS4rXFwobW9iaWxlOy4rZ2Vja28uK2ZpcmVmb3gvaV0sW1tnLFwiRmlyZWZveCBPU1wiXSxtXSxbLyhuaW50ZW5kb3xwbGF5c3RhdGlvbilcXHMoW3dpZHMzNHBvcnRhYmxldnVdKykvaSwvKG1pbnQpW1xcL1xcc1xcKF0/KFxcdyspKi9pLC8obWFnZWlhfHZlY3RvcmxpbnV4KVs7XFxzXS9pLC8oam9saXxba3hsbl0/dWJ1bnR1fGRlYmlhbnxbb3Blbl0qc3VzZXxnZW50b298KD89XFxzKWFyY2h8c2xhY2t3YXJlfGZlZG9yYXxtYW5kcml2YXxjZW50b3N8cGNsaW51eG9zfHJlZGhhdHx6ZW53YWxrfGxpbnB1cylbXFwvXFxzLV0/KD8hY2hyb20pKFtcXHdcXC4tXSspKi9pLC8oaHVyZHxsaW51eClcXHM/KFtcXHdcXC5dKykqL2ksLyhnbnUpXFxzPyhbXFx3XFwuXSspKi9pXSxbZyxtXSxbLyhjcm9zKVxcc1tcXHddK1xccyhbXFx3XFwuXStcXHcpL2ldLFtbZyxcIkNocm9taXVtIE9TXCJdLG1dLFsvKHN1bm9zKVxccz8oW1xcd1xcLl0rXFxkKSovaV0sW1tnLFwiU29sYXJpc1wiXSxtXSxbL1xccyhbZnJlbnRvcGMtXXswLDR9YnNkfGRyYWdvbmZseSlcXHM/KFtcXHdcXC5dKykqL2ldLFtnLG1dLFsvKGhhaWt1KVxccyhcXHcrKS9pXSxbZyxtXSxbLyhpcFtob25lYWRdKykoPzouKm9zXFxzKFtcXHddKykqXFxzbGlrZVxcc21hY3w7XFxzb3BlcmEpL2ldLFtbZyxcImlPU1wiXSxbbSwvXy9nLFwiLlwiXV0sWy8obWFjXFxzb3NcXHN4KVxccz8oW1xcd1xcc1xcLl0rXFx3KSovaSwvKG1hY2ludG9zaHxtYWMoPz1fcG93ZXJwYylcXHMpL2ldLFtbZyxcIk1hYyBPU1wiXSxbbSwvXy9nLFwiLlwiXV0sWy8oKD86b3Blbik/c29sYXJpcylbXFwvXFxzLV0/KFtcXHdcXC5dKykqL2ksLyhhaXgpXFxzKChcXGQpKD89XFwufFxcKXxcXHMpW1xcd1xcLl0qKSovaSwvKHBsYW5cXHM5fG1pbml4fGJlb3N8b3NcXC8yfGFtaWdhb3N8bW9ycGhvc3xyaXNjXFxzb3N8b3BlbnZtcykvaSwvKHVuaXgpXFxzPyhbXFx3XFwuXSspKi9pXSxbZyxtXV19LEE9ZnVuY3Rpb24odCxlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBBKSlyZXR1cm4gbmV3IEEodCxlKS5XZCgpO3ZhciBpPXR8fChuJiZuLm5hdmlnYXRvciYmbi5uYXZpZ2F0b3IudXNlckFnZW50P24ubmF2aWdhdG9yLnVzZXJBZ2VudDphKSxyPWU/ay5leHRlbmQoUCxlKTpQO3JldHVybiB0aGlzLiRkPWZ1bmN0aW9uKCl7dmFyIHQ9Qy5OZC5hcHBseSh0aGlzLHIudGkpO3JldHVybiB0LkFkPWsuQWQodC52ZXJzaW9uKSx0fSx0aGlzLllkPWZ1bmN0aW9uKCl7cmV0dXJuIEMuTmQuYXBwbHkodGhpcyxyLkdkKX0sdGhpcy5YZD1mdW5jdGlvbigpe3JldHVybiBDLk5kLmFwcGx5KHRoaXMsci5GZCl9LHRoaXMuWmQ9ZnVuY3Rpb24oKXtyZXR1cm4gQy5OZC5hcHBseSh0aGlzLHIuemQpfSx0aGlzLlJuPWZ1bmN0aW9uKCl7cmV0dXJuIEMuTmQuYXBwbHkodGhpcyxyLm9zKX0sdGhpcy5XZD1mdW5jdGlvbigpe3JldHVybnt0Zjp0aGlzLnhkKCksdGk6dGhpcy4kZCgpLHpkOnRoaXMuWmQoKSxvczp0aGlzLlJuKCksRmQ6dGhpcy5YZCgpLEdkOnRoaXMuWWQoKX19LHRoaXMueGQ9ZnVuY3Rpb24oKXtyZXR1cm4gaX0sdGhpcy5Jbj1mdW5jdGlvbih0KXtyZXR1cm4gaT10LHRoaXN9LHRoaXN9O0EuVkVSU0lPTj1zLEEuZWY9e1wiaWZcIjpnLHJmOmQsVkVSU0lPTjptfSxBLm5mPXtzZjp3fSxBLmFmPXtjZjpmLFZFTkRPUjp5LGhmOnYscGY6VCx1ZjpTLGxmOkUsZGY6YixmZjpJLGdmOlJ9LEEudmY9e1wiaWZcIjpnLFZFUlNJT046bX0sQS55Zj17XCJpZlwiOmcsVkVSU0lPTjptfSx0eXBlb2YgZSE9PXA/KHR5cGVvZiB0IT09cCYmdC50JiYoZT10LnQ9QSksZS5Dcj1BKTpcImZ1bmN0aW9uXCI9PT1oJiZpKDY0KT8ocj1mdW5jdGlvbigpe3JldHVybiBBfS5jYWxsKGUsaSxlLHQpLCEociE9PW8mJih0LnQ9cikpKTpuLkNyPUE7dmFyIE49bi5qUXVlcnl8fG4uWmVwdG87aWYodHlwZW9mIE4hPT1wKXt2YXIgeD1uZXcgQTtOLnRmPXguV2QoKSxOLnRmLmdldD1mdW5jdGlvbigpe3JldHVybiB4LnhkKCl9LE4udGYuc2V0PWZ1bmN0aW9uKHQpe3guSW4odCk7dmFyIGU9eC5XZCgpO2Zvcih2YXIgaSBpbiBlKU4udGZbaV09ZVtpXX19fShcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzKX0sZnVuY3Rpb24odCxlKXtTZXJ2aWNlcz17MTpcIlJFTU9URV9FWEVDVVRPUlwiLG1mOjEsMjpcIlBFRVJfRk9SV0FSREVSXCIsd2Y6MiwzOlwiUEVFUl9JTkRFWFwiLFRmOjMsNDpcIlBFRVJfQlJPQURDQVNUXCIsU2Y6NCw1OlwiUEVFUl9GSUxURVJcIixiZjo1LDY6XCJQRUVSX0xPR0dJTkdcIixFZjo2LDc6XCJISVZFSlNfVFJBQ0tFUlwiLElmOjcsODpcIlBFRVJfU1lTVEVNXCIsUmY6OCw5OlwiSElWRUpTX1NOQVBTSE9UU1wiLHRvOjksMTA6XCJISVZFSlNfVElDS0VUU1wiLGtmOjEwLDExOlwiSElWRUpTX0tFRVBBTElWRVwiLENmOjExLDEyOlwiSElWRUpTX0ZPUldBUkRJTkdcIixPZjoxMn19LGZ1bmN0aW9uKHQsZSxpKXt2YXIgcj1pKDE2KTtTdHJlYW1UeXBlPXsxOlwiTElWRVwiLExJVkU6MSwyOlwiVk9EXCIsUGY6Mn0sU3RyZWFtUHJvdG9jb2w9ezE6XCJEQVNIXCIscnQ6MSwyOlwiSERTXCIsQWY6MiwzOlwiSExTXCIsWTozLDQ6XCJTU1wiLE5mOjR9LENsaWVudFR5cGU9ezE6XCJKQVZBXCIseGY6MSwyOlwiU1RBVFNfT05MWVwiLEJmOjIsMzpcIkpTX0RJUkVDVFwiLEZmOjMsNDpcIkpTX1BST1hZXCIsX2Y6NH0sRXZlbnRJZD1mdW5jdGlvbih0KXt0aGlzLnBhcnRuZXJJZD1udWxsLHRoaXMuY3VzdG9tZXJJZD1udWxsLHRoaXMuY29udGVudElkPW51bGwsdGhpcy50YWdzPW51bGwsdCYmKHZvaWQgMCE9PXQucGFydG5lcklkJiYodGhpcy5wYXJ0bmVySWQ9dC5wYXJ0bmVySWQpLHZvaWQgMCE9PXQuY3VzdG9tZXJJZCYmKHRoaXMuY3VzdG9tZXJJZD10LmN1c3RvbWVySWQpLHZvaWQgMCE9PXQuY29udGVudElkJiYodGhpcy5jb250ZW50SWQ9dC5jb250ZW50SWQpLHZvaWQgMCE9PXQudGFncyYmKHRoaXMudGFncz10LnRhZ3MpKX0sRXZlbnRJZC5wcm90b3R5cGU9e30sRXZlbnRJZC5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXtmb3IodC5IYygpOzspe3ZhciBlPXQuc2EoKSxpPShlLkJjLGUuYWEpLG49ZS5jYTtpZihpPT1yLmJzLkVzKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6aT09ci5icy5Bcz90aGlzLnBhcnRuZXJJZD10LmhhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI6aT09ci5icy5Bcz90aGlzLmN1c3RvbWVySWQ9dC5oYSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzOmk9PXIuYnMuQXM/dGhpcy5jb250ZW50SWQ9dC5oYSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA0OmlmKGk9PXIuYnMuX3Mpe3ZhciBvLHM9MDt0aGlzLnRhZ3M9W107dmFyIGE9MDtvPXQuVmMoKSxhPW8uUWMscz1vLnNpemU7Zm9yKHZhciBjPTA7YzxzOysrYyl7dmFyIGg9bnVsbDtoPXQuaGEoKS52YWx1ZSx0aGlzLnRhZ3MucHVzaChoKX10LnFjKCl9ZWxzZSB0LnBhKGkpO2JyZWFrO2RlZmF1bHQ6dC5wYShpKX10LmxhKCl9dC5kYSgpfSxFdmVudElkLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXtpZih0LmZhKFwiRXZlbnRJZFwiKSxudWxsIT09dGhpcy5wYXJ0bmVySWQmJnZvaWQgMCE9PXRoaXMucGFydG5lcklkJiYodC5nYShcInBhcnRuZXJJZFwiLHIuYnMuQXMsMSksdC52YSh0aGlzLnBhcnRuZXJJZCksdC55YSgpKSxudWxsIT09dGhpcy5jdXN0b21lcklkJiZ2b2lkIDAhPT10aGlzLmN1c3RvbWVySWQmJih0LmdhKFwiY3VzdG9tZXJJZFwiLHIuYnMuQXMsMiksdC52YSh0aGlzLmN1c3RvbWVySWQpLHQueWEoKSksbnVsbCE9PXRoaXMuY29udGVudElkJiZ2b2lkIDAhPT10aGlzLmNvbnRlbnRJZCYmKHQuZ2EoXCJjb250ZW50SWRcIixyLmJzLkFzLDMpLHQudmEodGhpcy5jb250ZW50SWQpLHQueWEoKSksbnVsbCE9PXRoaXMudGFncyYmdm9pZCAwIT09dGhpcy50YWdzKXt0LmdhKFwidGFnc1wiLHIuYnMuX3MsNCksdC5UYyhyLmJzLkFzLHRoaXMudGFncy5sZW5ndGgpO2Zvcih2YXIgZSBpbiB0aGlzLnRhZ3MpdGhpcy50YWdzLmhhc093blByb3BlcnR5KGUpJiYoZT10aGlzLnRhZ3NbZV0sdC52YShlKSk7dC5TYygpLHQueWEoKX10LndhKCksdC5UYSgpfSxTbmFwc2hvdEluZm89ZnVuY3Rpb24odCl7dGhpcy50aW1lc3RhbXA9bnVsbCx0aGlzLmFwaVNlcnZlcj1udWxsLHRoaXMuY2xpZW50SXA9bnVsbCx0JiYodm9pZCAwIT09dC50aW1lc3RhbXAmJih0aGlzLnRpbWVzdGFtcD10LnRpbWVzdGFtcCksdm9pZCAwIT09dC5hcGlTZXJ2ZXImJih0aGlzLmFwaVNlcnZlcj10LmFwaVNlcnZlciksdm9pZCAwIT09dC5jbGllbnRJcCYmKHRoaXMuY2xpZW50SXA9dC5jbGllbnRJcCkpfSxTbmFwc2hvdEluZm8ucHJvdG90eXBlPXt9LFNuYXBzaG90SW5mby5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXtmb3IodC5IYygpOzspe3ZhciBlPXQuc2EoKSxpPShlLkJjLGUuYWEpLG49ZS5jYTtpZihpPT1yLmJzLkVzKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6aT09ci5icy5Qcz90aGlzLnRpbWVzdGFtcD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI6aT09ci5icy5Bcz90aGlzLmFwaVNlcnZlcj10LmhhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDM6aT09ci5icy5Bcz90aGlzLmNsaWVudElwPXQuaGEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2RlZmF1bHQ6dC5wYShpKX10LmxhKCl9dC5kYSgpfSxTbmFwc2hvdEluZm8ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3QuZmEoXCJTbmFwc2hvdEluZm9cIiksbnVsbCE9PXRoaXMudGltZXN0YW1wJiZ2b2lkIDAhPT10aGlzLnRpbWVzdGFtcCYmKHQuZ2EoXCJ0aW1lc3RhbXBcIixyLmJzLlBzLDEpLHQuQ2ModGhpcy50aW1lc3RhbXApLHQueWEoKSksbnVsbCE9PXRoaXMuYXBpU2VydmVyJiZ2b2lkIDAhPT10aGlzLmFwaVNlcnZlciYmKHQuZ2EoXCJhcGlTZXJ2ZXJcIixyLmJzLkFzLDIpLHQudmEodGhpcy5hcGlTZXJ2ZXIpLHQueWEoKSksbnVsbCE9PXRoaXMuY2xpZW50SXAmJnZvaWQgMCE9PXRoaXMuY2xpZW50SXAmJih0LmdhKFwiY2xpZW50SXBcIixyLmJzLkFzLDMpLHQudmEodGhpcy5jbGllbnRJcCksdC55YSgpKSx0LndhKCksdC5UYSgpfSxJbmV0QWRkcmVzcz1mdW5jdGlvbih0KXt0aGlzLmFkZHJlc3M9bnVsbCx0aGlzLnBvcnQ9bnVsbCx0JiYodm9pZCAwIT09dC5hZGRyZXNzJiYodGhpcy5hZGRyZXNzPXQuYWRkcmVzcyksdm9pZCAwIT09dC5wb3J0JiYodGhpcy5wb3J0PXQucG9ydCkpfSxJbmV0QWRkcmVzcy5wcm90b3R5cGU9e30sSW5ldEFkZHJlc3MucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7Zm9yKHQuSGMoKTs7KXt2YXIgZT10LnNhKCksaT0oZS5CYyxlLmFhKSxuPWUuY2E7aWYoaT09ci5icy5FcylicmVhaztzd2l0Y2gobil7Y2FzZSAxOmk9PXIuYnMuQXM/dGhpcy5hZGRyZXNzPXQuWGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMjppPT1yLmJzLk9zP3RoaXMucG9ydD10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztkZWZhdWx0OnQucGEoaSl9dC5sYSgpfXQuZGEoKX0sSW5ldEFkZHJlc3MucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3QuZmEoXCJJbmV0QWRkcmVzc1wiKSxudWxsIT09dGhpcy5hZGRyZXNzJiZ2b2lkIDAhPT10aGlzLmFkZHJlc3MmJih0LmdhKFwiYWRkcmVzc1wiLHIuYnMuQXMsMSksdC5QYyh0aGlzLmFkZHJlc3MpLHQueWEoKSksbnVsbCE9PXRoaXMucG9ydCYmdm9pZCAwIT09dGhpcy5wb3J0JiYodC5nYShcInBvcnRcIixyLmJzLk9zLDIpLHQubWEodGhpcy5wb3J0KSx0LnlhKCkpLHQud2EoKSx0LlRhKCl9fSxmdW5jdGlvbih0LGUsaSl7dmFyIHI9aSgxNik7XCJ1bmRlZmluZWRcIj09dHlwZW9mIGhpdmUmJihoaXZlPXt9KSxcInVuZGVmaW5lZFwiPT10eXBlb2YgaGl2ZS5zbmFwc2hvdHMmJihoaXZlLnNuYXBzaG90cz17fSksaGl2ZS5zbmFwc2hvdHMuVHJhZmZpYz1mdW5jdGlvbih0KXt0aGlzLnJlcU49bnVsbCx0aGlzLnJlc3BGYWxsYmFja049bnVsbCx0aGlzLnJlc3BGYWxsYmFja0Vyck49bnVsbCx0aGlzLnJlc3BQMnBOPW51bGwsdGhpcy5yZXFPdGhlck49bnVsbCx0aGlzLnJlc3BGYWxsYmFja090aGVyTj1udWxsLHRoaXMucmVzcEZhbGxiYWNrT3RoZXJ0RXJyTj1udWxsLHRoaXMuc3JjUmVxTj1udWxsLHRoaXMuc3JjUmVzcE49bnVsbCx0aGlzLnNyY1Jlc3BFcnJOPW51bGwsdGhpcy5zcmNSZXFRdD1udWxsLHRoaXMuc3JjUmVzcFF0PW51bGwsdGhpcy5zcmNPdmVyUXQ9bnVsbCx0aGlzLnNyY090aGVyUmVxTj1udWxsLHRoaXMuc3JjT3RoZXJSZXNwTj1udWxsLHRoaXMuc3JjT3RoZXJSZXNwRXJyTj1udWxsLHRoaXMuc3JjT3RoZXJSZXFRdD1udWxsLHRoaXMuc3JjT3RoZXJSZXNwUXQ9bnVsbCx0aGlzLnNyY090aGVyT3ZlclF0PW51bGwsdGhpcy5wMnBTdWJSZXFOPW51bGwsdGhpcy5wMnBTdWJSZXNwTj1udWxsLHRoaXMucDJwU3ViUmVzcFBhcnROPW51bGwsdGhpcy5wMnBTdWJSZXNwRXJyTj1udWxsLHRoaXMucDJwU3ViUmVzcEV4cE49bnVsbCx0aGlzLnAycFN1YlJlcVF0PW51bGwsdGhpcy5wMnBTdWJSZXNwUXQ9bnVsbCx0aGlzLnAycERpcmVjdFF0PW51bGwsdGhpcy5wMnBSZWxheVF0PW51bGwsdGhpcy5wMnBOYXRRdD1udWxsLHRoaXMucDJwVWRwYlF0PW51bGwsdGhpcy5mYWxsQWdlbnRSZXNwTj1udWxsLHRoaXMuZmFsbEFnZW50UHJlZEhpdE49bnVsbCx0aGlzLmZhbGxBZ2VudEZhaWxlZFJlc3BOPW51bGwsdGhpcy5mYWxsQWdlbnRQcmVkTWlzc049bnVsbCx0aGlzLmZhbGxBZ2VudFByZWRQYXJ0aWFsSGl0Tj1udWxsLHRoaXMuZmFsbEFnZW5UcmFmZmljU3VjY2Vzc1F0PW51bGwsdGhpcy5mYWxsQWdlblRyYWZmaWNGYWlsdXJlUXQ9bnVsbCx0aGlzLnAycEFnZW50UHJlZEhpdE49bnVsbCx0aGlzLnAycEFnZW50UHJlZE1pc3NOPW51bGwsdGhpcy5wMnBBZ2VudFByZWRQYXJ0aWFsSGl0Tj1udWxsLHRoaXMucDJwQWdlblRyYWZmaWNTdWNjZXNzUXQ9bnVsbCx0aGlzLnAycEFnZW5UcmFmZmljRmFpbHVyZVF0PW51bGwsdGhpcy5yZXNwUDJwT3RoZXJOPW51bGwsdGhpcy5sQ2FjaGVSZXNwTj1udWxsLHRoaXMubENhY2hlUmVzcFF0PW51bGwsdGhpcy5wMnBPdXRTaXRlTG93UHJpbz1udWxsLHQmJih2b2lkIDAhPT10LnJlcU4mJih0aGlzLnJlcU49dC5yZXFOKSx2b2lkIDAhPT10LnJlc3BGYWxsYmFja04mJih0aGlzLnJlc3BGYWxsYmFja049dC5yZXNwRmFsbGJhY2tOKSx2b2lkIDAhPT10LnJlc3BGYWxsYmFja0Vyck4mJih0aGlzLnJlc3BGYWxsYmFja0Vyck49dC5yZXNwRmFsbGJhY2tFcnJOKSx2b2lkIDAhPT10LnJlc3BQMnBOJiYodGhpcy5yZXNwUDJwTj10LnJlc3BQMnBOKSx2b2lkIDAhPT10LnJlcU90aGVyTiYmKHRoaXMucmVxT3RoZXJOPXQucmVxT3RoZXJOKSx2b2lkIDAhPT10LnJlc3BGYWxsYmFja090aGVyTiYmKHRoaXMucmVzcEZhbGxiYWNrT3RoZXJOPXQucmVzcEZhbGxiYWNrT3RoZXJOKSx2b2lkIDAhPT10LnJlc3BGYWxsYmFja090aGVydEVyck4mJih0aGlzLnJlc3BGYWxsYmFja090aGVydEVyck49dC5yZXNwRmFsbGJhY2tPdGhlcnRFcnJOKSx2b2lkIDAhPT10LnNyY1JlcU4mJih0aGlzLnNyY1JlcU49dC5zcmNSZXFOKSx2b2lkIDAhPT10LnNyY1Jlc3BOJiYodGhpcy5zcmNSZXNwTj10LnNyY1Jlc3BOKSx2b2lkIDAhPT10LnNyY1Jlc3BFcnJOJiYodGhpcy5zcmNSZXNwRXJyTj10LnNyY1Jlc3BFcnJOKSx2b2lkIDAhPT10LnNyY1JlcVF0JiYodGhpcy5zcmNSZXFRdD10LnNyY1JlcVF0KSx2b2lkIDAhPT10LnNyY1Jlc3BRdCYmKHRoaXMuc3JjUmVzcFF0PXQuc3JjUmVzcFF0KSx2b2lkIDAhPT10LnNyY092ZXJRdCYmKHRoaXMuc3JjT3ZlclF0PXQuc3JjT3ZlclF0KSx2b2lkIDAhPT10LnNyY090aGVyUmVxTiYmKHRoaXMuc3JjT3RoZXJSZXFOPXQuc3JjT3RoZXJSZXFOKSx2b2lkIDAhPT10LnNyY090aGVyUmVzcE4mJih0aGlzLnNyY090aGVyUmVzcE49dC5zcmNPdGhlclJlc3BOKSx2b2lkIDAhPT10LnNyY090aGVyUmVzcEVyck4mJih0aGlzLnNyY090aGVyUmVzcEVyck49dC5zcmNPdGhlclJlc3BFcnJOKSx2b2lkIDAhPT10LnNyY090aGVyUmVxUXQmJih0aGlzLnNyY090aGVyUmVxUXQ9dC5zcmNPdGhlclJlcVF0KSx2b2lkIDAhPT10LnNyY090aGVyUmVzcFF0JiYodGhpcy5zcmNPdGhlclJlc3BRdD10LnNyY090aGVyUmVzcFF0KSx2b2lkIDAhPT10LnNyY090aGVyT3ZlclF0JiYodGhpcy5zcmNPdGhlck92ZXJRdD10LnNyY090aGVyT3ZlclF0KSxcbnZvaWQgMCE9PXQucDJwU3ViUmVxTiYmKHRoaXMucDJwU3ViUmVxTj10LnAycFN1YlJlcU4pLHZvaWQgMCE9PXQucDJwU3ViUmVzcE4mJih0aGlzLnAycFN1YlJlc3BOPXQucDJwU3ViUmVzcE4pLHZvaWQgMCE9PXQucDJwU3ViUmVzcFBhcnROJiYodGhpcy5wMnBTdWJSZXNwUGFydE49dC5wMnBTdWJSZXNwUGFydE4pLHZvaWQgMCE9PXQucDJwU3ViUmVzcEVyck4mJih0aGlzLnAycFN1YlJlc3BFcnJOPXQucDJwU3ViUmVzcEVyck4pLHZvaWQgMCE9PXQucDJwU3ViUmVzcEV4cE4mJih0aGlzLnAycFN1YlJlc3BFeHBOPXQucDJwU3ViUmVzcEV4cE4pLHZvaWQgMCE9PXQucDJwU3ViUmVxUXQmJih0aGlzLnAycFN1YlJlcVF0PXQucDJwU3ViUmVxUXQpLHZvaWQgMCE9PXQucDJwU3ViUmVzcFF0JiYodGhpcy5wMnBTdWJSZXNwUXQ9dC5wMnBTdWJSZXNwUXQpLHZvaWQgMCE9PXQucDJwRGlyZWN0UXQmJih0aGlzLnAycERpcmVjdFF0PXQucDJwRGlyZWN0UXQpLHZvaWQgMCE9PXQucDJwUmVsYXlRdCYmKHRoaXMucDJwUmVsYXlRdD10LnAycFJlbGF5UXQpLHZvaWQgMCE9PXQucDJwTmF0UXQmJih0aGlzLnAycE5hdFF0PXQucDJwTmF0UXQpLHZvaWQgMCE9PXQucDJwVWRwYlF0JiYodGhpcy5wMnBVZHBiUXQ9dC5wMnBVZHBiUXQpLHZvaWQgMCE9PXQuZmFsbEFnZW50UmVzcE4mJih0aGlzLmZhbGxBZ2VudFJlc3BOPXQuZmFsbEFnZW50UmVzcE4pLHZvaWQgMCE9PXQuZmFsbEFnZW50UHJlZEhpdE4mJih0aGlzLmZhbGxBZ2VudFByZWRIaXROPXQuZmFsbEFnZW50UHJlZEhpdE4pLHZvaWQgMCE9PXQuZmFsbEFnZW50RmFpbGVkUmVzcE4mJih0aGlzLmZhbGxBZ2VudEZhaWxlZFJlc3BOPXQuZmFsbEFnZW50RmFpbGVkUmVzcE4pLHZvaWQgMCE9PXQuZmFsbEFnZW50UHJlZE1pc3NOJiYodGhpcy5mYWxsQWdlbnRQcmVkTWlzc049dC5mYWxsQWdlbnRQcmVkTWlzc04pLHZvaWQgMCE9PXQuZmFsbEFnZW50UHJlZFBhcnRpYWxIaXROJiYodGhpcy5mYWxsQWdlbnRQcmVkUGFydGlhbEhpdE49dC5mYWxsQWdlbnRQcmVkUGFydGlhbEhpdE4pLHZvaWQgMCE9PXQuZmFsbEFnZW5UcmFmZmljU3VjY2Vzc1F0JiYodGhpcy5mYWxsQWdlblRyYWZmaWNTdWNjZXNzUXQ9dC5mYWxsQWdlblRyYWZmaWNTdWNjZXNzUXQpLHZvaWQgMCE9PXQuZmFsbEFnZW5UcmFmZmljRmFpbHVyZVF0JiYodGhpcy5mYWxsQWdlblRyYWZmaWNGYWlsdXJlUXQ9dC5mYWxsQWdlblRyYWZmaWNGYWlsdXJlUXQpLHZvaWQgMCE9PXQucDJwQWdlbnRQcmVkSGl0TiYmKHRoaXMucDJwQWdlbnRQcmVkSGl0Tj10LnAycEFnZW50UHJlZEhpdE4pLHZvaWQgMCE9PXQucDJwQWdlbnRQcmVkTWlzc04mJih0aGlzLnAycEFnZW50UHJlZE1pc3NOPXQucDJwQWdlbnRQcmVkTWlzc04pLHZvaWQgMCE9PXQucDJwQWdlbnRQcmVkUGFydGlhbEhpdE4mJih0aGlzLnAycEFnZW50UHJlZFBhcnRpYWxIaXROPXQucDJwQWdlbnRQcmVkUGFydGlhbEhpdE4pLHZvaWQgMCE9PXQucDJwQWdlblRyYWZmaWNTdWNjZXNzUXQmJih0aGlzLnAycEFnZW5UcmFmZmljU3VjY2Vzc1F0PXQucDJwQWdlblRyYWZmaWNTdWNjZXNzUXQpLHZvaWQgMCE9PXQucDJwQWdlblRyYWZmaWNGYWlsdXJlUXQmJih0aGlzLnAycEFnZW5UcmFmZmljRmFpbHVyZVF0PXQucDJwQWdlblRyYWZmaWNGYWlsdXJlUXQpLHZvaWQgMCE9PXQucmVzcFAycE90aGVyTiYmKHRoaXMucmVzcFAycE90aGVyTj10LnJlc3BQMnBPdGhlck4pLHZvaWQgMCE9PXQubENhY2hlUmVzcE4mJih0aGlzLmxDYWNoZVJlc3BOPXQubENhY2hlUmVzcE4pLHZvaWQgMCE9PXQubENhY2hlUmVzcFF0JiYodGhpcy5sQ2FjaGVSZXNwUXQ9dC5sQ2FjaGVSZXNwUXQpLHZvaWQgMCE9PXQucDJwT3V0U2l0ZUxvd1ByaW8mJih0aGlzLnAycE91dFNpdGVMb3dQcmlvPXQucDJwT3V0U2l0ZUxvd1ByaW8pKX0saGl2ZS5zbmFwc2hvdHMuVHJhZmZpYy5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuVHJhZmZpYy5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXtmb3IodC5IYygpOzspe3ZhciBlPXQuc2EoKSxpPShlLkJjLGUuYWEpLG49ZS5jYTtpZihpPT1yLmJzLkVzKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6aT09ci5icy5Pcz90aGlzLnJlcU49dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyOmk9PXIuYnMua3M/dGhpcy5yZXNwRmFsbGJhY2tOPXQuWWMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMzppPT1yLmJzLk9zP3RoaXMucmVzcEZhbGxiYWNrRXJyTj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDQ6aT09ci5icy5rcz90aGlzLnJlc3BQMnBOPXQuWWMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNTppPT1yLmJzLk9zP3RoaXMucmVxT3RoZXJOPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNjppPT1yLmJzLk9zP3RoaXMucmVzcEZhbGxiYWNrT3RoZXJOPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNzppPT1yLmJzLk9zP3RoaXMucmVzcEZhbGxiYWNrT3RoZXJ0RXJyTj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDg6aT09ci5icy5Pcz90aGlzLnNyY1JlcU49dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA5Omk9PXIuYnMuT3M/dGhpcy5zcmNSZXNwTj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDEwOmk9PXIuYnMuT3M/dGhpcy5zcmNSZXNwRXJyTj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDExOmk9PXIuYnMuUHM/dGhpcy5zcmNSZXFRdD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDEyOmk9PXIuYnMuUHM/dGhpcy5zcmNSZXNwUXQ9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAxMzppPT1yLmJzLlBzP3RoaXMuc3JjT3ZlclF0PXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTQ6aT09ci5icy5Pcz90aGlzLnNyY090aGVyUmVxTj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDE1Omk9PXIuYnMuT3M/dGhpcy5zcmNPdGhlclJlc3BOPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTY6aT09ci5icy5Pcz90aGlzLnNyY090aGVyUmVzcEVyck49dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAxNzppPT1yLmJzLlBzP3RoaXMuc3JjT3RoZXJSZXFRdD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDE4Omk9PXIuYnMuUHM/dGhpcy5zcmNPdGhlclJlc3BRdD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDE5Omk9PXIuYnMuUHM/dGhpcy5zcmNPdGhlck92ZXJRdD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDIwOmk9PXIuYnMuT3M/dGhpcy5wMnBTdWJSZXFOPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMjE6aT09ci5icy5Pcz90aGlzLnAycFN1YlJlc3BOPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMjI6aT09ci5icy5rcz90aGlzLnAycFN1YlJlc3BQYXJ0Tj10LlljKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDIzOmk9PXIuYnMua3M/dGhpcy5wMnBTdWJSZXNwRXJyTj10LlljKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI0Omk9PXIuYnMuT3M/dGhpcy5wMnBTdWJSZXNwRXhwTj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI1Omk9PXIuYnMuUHM/dGhpcy5wMnBTdWJSZXFRdD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI2Omk9PXIuYnMuUHM/dGhpcy5wMnBTdWJSZXNwUXQ9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyNzppPT1yLmJzLlBzP3RoaXMucDJwRGlyZWN0UXQ9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyODppPT1yLmJzLlBzP3RoaXMucDJwUmVsYXlRdD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI5Omk9PXIuYnMuUHM/dGhpcy5wMnBOYXRRdD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDMwOmk9PXIuYnMuUHM/dGhpcy5wMnBVZHBiUXQ9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzMTppPT1yLmJzLk9zP3RoaXMuZmFsbEFnZW50UmVzcE49dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzMjppPT1yLmJzLk9zP3RoaXMuZmFsbEFnZW50UHJlZEhpdE49dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzMzppPT1yLmJzLk9zP3RoaXMuZmFsbEFnZW50RmFpbGVkUmVzcE49dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzNDppPT1yLmJzLk9zP3RoaXMuZmFsbEFnZW50UHJlZE1pc3NOPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMzU6aT09ci5icy5Pcz90aGlzLmZhbGxBZ2VudFByZWRQYXJ0aWFsSGl0Tj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDM2Omk9PXIuYnMuUHM/dGhpcy5mYWxsQWdlblRyYWZmaWNTdWNjZXNzUXQ9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzNzppPT1yLmJzLlBzP3RoaXMuZmFsbEFnZW5UcmFmZmljRmFpbHVyZVF0PXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMzg6aT09ci5icy5Pcz90aGlzLnAycEFnZW50UHJlZEhpdE49dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzOTppPT1yLmJzLk9zP3RoaXMucDJwQWdlbnRQcmVkTWlzc049dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA0MDppPT1yLmJzLk9zP3RoaXMucDJwQWdlbnRQcmVkUGFydGlhbEhpdE49dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA0MTppPT1yLmJzLlBzP3RoaXMucDJwQWdlblRyYWZmaWNTdWNjZXNzUXQ9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA0MjppPT1yLmJzLlBzP3RoaXMucDJwQWdlblRyYWZmaWNGYWlsdXJlUXQ9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA0MzppPT1yLmJzLk9zP3RoaXMucmVzcFAycE90aGVyTj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDQ0Omk9PXIuYnMuT3M/dGhpcy5sQ2FjaGVSZXNwTj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDQ1Omk9PXIuYnMuUHM/dGhpcy5sQ2FjaGVSZXNwUXQ9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA0NjppPT1yLmJzLlBzP3RoaXMucDJwT3V0U2l0ZUxvd1ByaW89dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7ZGVmYXVsdDp0LnBhKGkpfXQubGEoKX10LmRhKCl9LGhpdmUuc25hcHNob3RzLlRyYWZmaWMucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3QuZmEoXCJUcmFmZmljXCIpLG51bGwhPT10aGlzLnJlcU4mJnZvaWQgMCE9PXRoaXMucmVxTiYmKHQuZ2EoXCJyZXFOXCIsci5icy5PcywxKSx0Lm1hKHRoaXMucmVxTiksdC55YSgpKSxudWxsIT09dGhpcy5yZXNwRmFsbGJhY2tOJiZ2b2lkIDAhPT10aGlzLnJlc3BGYWxsYmFja04mJih0LmdhKFwicmVzcEZhbGxiYWNrTlwiLHIuYnMua3MsMiksdC5PYyh0aGlzLnJlc3BGYWxsYmFja04pLHQueWEoKSksbnVsbCE9PXRoaXMucmVzcEZhbGxiYWNrRXJyTiYmdm9pZCAwIT09dGhpcy5yZXNwRmFsbGJhY2tFcnJOJiYodC5nYShcInJlc3BGYWxsYmFja0Vyck5cIixyLmJzLk9zLDMpLHQubWEodGhpcy5yZXNwRmFsbGJhY2tFcnJOKSx0LnlhKCkpLG51bGwhPT10aGlzLnJlc3BQMnBOJiZ2b2lkIDAhPT10aGlzLnJlc3BQMnBOJiYodC5nYShcInJlc3BQMnBOXCIsci5icy5rcyw0KSx0Lk9jKHRoaXMucmVzcFAycE4pLHQueWEoKSksbnVsbCE9PXRoaXMucmVxT3RoZXJOJiZ2b2lkIDAhPT10aGlzLnJlcU90aGVyTiYmKHQuZ2EoXCJyZXFPdGhlck5cIixyLmJzLk9zLDUpLHQubWEodGhpcy5yZXFPdGhlck4pLHQueWEoKSksbnVsbCE9PXRoaXMucmVzcEZhbGxiYWNrT3RoZXJOJiZ2b2lkIDAhPT10aGlzLnJlc3BGYWxsYmFja090aGVyTiYmKHQuZ2EoXCJyZXNwRmFsbGJhY2tPdGhlck5cIixyLmJzLk9zLDYpLHQubWEodGhpcy5yZXNwRmFsbGJhY2tPdGhlck4pLHQueWEoKSksbnVsbCE9PXRoaXMucmVzcEZhbGxiYWNrT3RoZXJ0RXJyTiYmdm9pZCAwIT09dGhpcy5yZXNwRmFsbGJhY2tPdGhlcnRFcnJOJiYodC5nYShcInJlc3BGYWxsYmFja090aGVydEVyck5cIixyLmJzLk9zLDcpLHQubWEodGhpcy5yZXNwRmFsbGJhY2tPdGhlcnRFcnJOKSx0LnlhKCkpLG51bGwhPT10aGlzLnNyY1JlcU4mJnZvaWQgMCE9PXRoaXMuc3JjUmVxTiYmKHQuZ2EoXCJzcmNSZXFOXCIsci5icy5Pcyw4KSx0Lm1hKHRoaXMuc3JjUmVxTiksdC55YSgpKSxudWxsIT09dGhpcy5zcmNSZXNwTiYmdm9pZCAwIT09dGhpcy5zcmNSZXNwTiYmKHQuZ2EoXCJzcmNSZXNwTlwiLHIuYnMuT3MsOSksdC5tYSh0aGlzLnNyY1Jlc3BOKSx0LnlhKCkpLG51bGwhPT10aGlzLnNyY1Jlc3BFcnJOJiZ2b2lkIDAhPT10aGlzLnNyY1Jlc3BFcnJOJiYodC5nYShcInNyY1Jlc3BFcnJOXCIsci5icy5PcywxMCksdC5tYSh0aGlzLnNyY1Jlc3BFcnJOKSx0LnlhKCkpLG51bGwhPT10aGlzLnNyY1JlcVF0JiZ2b2lkIDAhPT10aGlzLnNyY1JlcVF0JiYodC5nYShcInNyY1JlcVF0XCIsci5icy5QcywxMSksdC5DYyh0aGlzLnNyY1JlcVF0KSx0LnlhKCkpLG51bGwhPT10aGlzLnNyY1Jlc3BRdCYmdm9pZCAwIT09dGhpcy5zcmNSZXNwUXQmJih0LmdhKFwic3JjUmVzcFF0XCIsci5icy5QcywxMiksdC5DYyh0aGlzLnNyY1Jlc3BRdCksdC55YSgpKSxudWxsIT09dGhpcy5zcmNPdmVyUXQmJnZvaWQgMCE9PXRoaXMuc3JjT3ZlclF0JiYodC5nYShcInNyY092ZXJRdFwiLHIuYnMuUHMsMTMpLHQuQ2ModGhpcy5zcmNPdmVyUXQpLHQueWEoKSksbnVsbCE9PXRoaXMuc3JjT3RoZXJSZXFOJiZ2b2lkIDAhPT10aGlzLnNyY090aGVyUmVxTiYmKHQuZ2EoXCJzcmNPdGhlclJlcU5cIixyLmJzLk9zLDE0KSx0Lm1hKHRoaXMuc3JjT3RoZXJSZXFOKSx0LnlhKCkpLG51bGwhPT10aGlzLnNyY090aGVyUmVzcE4mJnZvaWQgMCE9PXRoaXMuc3JjT3RoZXJSZXNwTiYmKHQuZ2EoXCJzcmNPdGhlclJlc3BOXCIsci5icy5PcywxNSksdC5tYSh0aGlzLnNyY090aGVyUmVzcE4pLHQueWEoKSksbnVsbCE9PXRoaXMuc3JjT3RoZXJSZXNwRXJyTiYmdm9pZCAwIT09dGhpcy5zcmNPdGhlclJlc3BFcnJOJiYodC5nYShcInNyY090aGVyUmVzcEVyck5cIixyLmJzLk9zLDE2KSx0Lm1hKHRoaXMuc3JjT3RoZXJSZXNwRXJyTiksdC55YSgpKSxudWxsIT09dGhpcy5zcmNPdGhlclJlcVF0JiZ2b2lkIDAhPT10aGlzLnNyY090aGVyUmVxUXQmJih0LmdhKFwic3JjT3RoZXJSZXFRdFwiLHIuYnMuUHMsMTcpLHQuQ2ModGhpcy5zcmNPdGhlclJlcVF0KSx0LnlhKCkpLG51bGwhPT10aGlzLnNyY090aGVyUmVzcFF0JiZ2b2lkIDAhPT10aGlzLnNyY090aGVyUmVzcFF0JiYodC5nYShcInNyY090aGVyUmVzcFF0XCIsci5icy5QcywxOCksdC5DYyh0aGlzLnNyY090aGVyUmVzcFF0KSx0LnlhKCkpLG51bGwhPT10aGlzLnNyY090aGVyT3ZlclF0JiZ2b2lkIDAhPT10aGlzLnNyY090aGVyT3ZlclF0JiYodC5nYShcInNyY090aGVyT3ZlclF0XCIsci5icy5QcywxOSksdC5DYyh0aGlzLnNyY090aGVyT3ZlclF0KSx0LnlhKCkpLG51bGwhPT10aGlzLnAycFN1YlJlcU4mJnZvaWQgMCE9PXRoaXMucDJwU3ViUmVxTiYmKHQuZ2EoXCJwMnBTdWJSZXFOXCIsci5icy5PcywyMCksdC5tYSh0aGlzLnAycFN1YlJlcU4pLHQueWEoKSksbnVsbCE9PXRoaXMucDJwU3ViUmVzcE4mJnZvaWQgMCE9PXRoaXMucDJwU3ViUmVzcE4mJih0LmdhKFwicDJwU3ViUmVzcE5cIixyLmJzLk9zLDIxKSx0Lm1hKHRoaXMucDJwU3ViUmVzcE4pLHQueWEoKSksbnVsbCE9PXRoaXMucDJwU3ViUmVzcFBhcnROJiZ2b2lkIDAhPT10aGlzLnAycFN1YlJlc3BQYXJ0TiYmKHQuZ2EoXCJwMnBTdWJSZXNwUGFydE5cIixyLmJzLmtzLDIyKSx0Lk9jKHRoaXMucDJwU3ViUmVzcFBhcnROKSx0LnlhKCkpLG51bGwhPT10aGlzLnAycFN1YlJlc3BFcnJOJiZ2b2lkIDAhPT10aGlzLnAycFN1YlJlc3BFcnJOJiYodC5nYShcInAycFN1YlJlc3BFcnJOXCIsci5icy5rcywyMyksdC5PYyh0aGlzLnAycFN1YlJlc3BFcnJOKSx0LnlhKCkpLG51bGwhPT10aGlzLnAycFN1YlJlc3BFeHBOJiZ2b2lkIDAhPT10aGlzLnAycFN1YlJlc3BFeHBOJiYodC5nYShcInAycFN1YlJlc3BFeHBOXCIsci5icy5PcywyNCksdC5tYSh0aGlzLnAycFN1YlJlc3BFeHBOKSx0LnlhKCkpLG51bGwhPT10aGlzLnAycFN1YlJlcVF0JiZ2b2lkIDAhPT10aGlzLnAycFN1YlJlcVF0JiYodC5nYShcInAycFN1YlJlcVF0XCIsci5icy5QcywyNSksdC5DYyh0aGlzLnAycFN1YlJlcVF0KSx0LnlhKCkpLG51bGwhPT10aGlzLnAycFN1YlJlc3BRdCYmdm9pZCAwIT09dGhpcy5wMnBTdWJSZXNwUXQmJih0LmdhKFwicDJwU3ViUmVzcFF0XCIsci5icy5QcywyNiksdC5DYyh0aGlzLnAycFN1YlJlc3BRdCksdC55YSgpKSxudWxsIT09dGhpcy5wMnBEaXJlY3RRdCYmdm9pZCAwIT09dGhpcy5wMnBEaXJlY3RRdCYmKHQuZ2EoXCJwMnBEaXJlY3RRdFwiLHIuYnMuUHMsMjcpLHQuQ2ModGhpcy5wMnBEaXJlY3RRdCksdC55YSgpKSxudWxsIT09dGhpcy5wMnBSZWxheVF0JiZ2b2lkIDAhPT10aGlzLnAycFJlbGF5UXQmJih0LmdhKFwicDJwUmVsYXlRdFwiLHIuYnMuUHMsMjgpLHQuQ2ModGhpcy5wMnBSZWxheVF0KSx0LnlhKCkpLG51bGwhPT10aGlzLnAycE5hdFF0JiZ2b2lkIDAhPT10aGlzLnAycE5hdFF0JiYodC5nYShcInAycE5hdFF0XCIsci5icy5QcywyOSksdC5DYyh0aGlzLnAycE5hdFF0KSx0LnlhKCkpLG51bGwhPT10aGlzLnAycFVkcGJRdCYmdm9pZCAwIT09dGhpcy5wMnBVZHBiUXQmJih0LmdhKFwicDJwVWRwYlF0XCIsci5icy5QcywzMCksdC5DYyh0aGlzLnAycFVkcGJRdCksdC55YSgpKSxudWxsIT09dGhpcy5mYWxsQWdlbnRSZXNwTiYmdm9pZCAwIT09dGhpcy5mYWxsQWdlbnRSZXNwTiYmKHQuZ2EoXCJmYWxsQWdlbnRSZXNwTlwiLHIuYnMuT3MsMzEpLHQubWEodGhpcy5mYWxsQWdlbnRSZXNwTiksdC55YSgpKSxudWxsIT09dGhpcy5mYWxsQWdlbnRQcmVkSGl0TiYmdm9pZCAwIT09dGhpcy5mYWxsQWdlbnRQcmVkSGl0TiYmKHQuZ2EoXCJmYWxsQWdlbnRQcmVkSGl0TlwiLHIuYnMuT3MsMzIpLHQubWEodGhpcy5mYWxsQWdlbnRQcmVkSGl0TiksdC55YSgpKSxudWxsIT09dGhpcy5mYWxsQWdlbnRGYWlsZWRSZXNwTiYmdm9pZCAwIT09dGhpcy5mYWxsQWdlbnRGYWlsZWRSZXNwTiYmKHQuZ2EoXCJmYWxsQWdlbnRGYWlsZWRSZXNwTlwiLHIuYnMuT3MsMzMpLHQubWEodGhpcy5mYWxsQWdlbnRGYWlsZWRSZXNwTiksdC55YSgpKSxudWxsIT09dGhpcy5mYWxsQWdlbnRQcmVkTWlzc04mJnZvaWQgMCE9PXRoaXMuZmFsbEFnZW50UHJlZE1pc3NOJiYodC5nYShcImZhbGxBZ2VudFByZWRNaXNzTlwiLHIuYnMuT3MsMzQpLHQubWEodGhpcy5mYWxsQWdlbnRQcmVkTWlzc04pLHQueWEoKSksbnVsbCE9PXRoaXMuZmFsbEFnZW50UHJlZFBhcnRpYWxIaXROJiZ2b2lkIDAhPT10aGlzLmZhbGxBZ2VudFByZWRQYXJ0aWFsSGl0TiYmKHQuZ2EoXCJmYWxsQWdlbnRQcmVkUGFydGlhbEhpdE5cIixyLmJzLk9zLDM1KSx0Lm1hKHRoaXMuZmFsbEFnZW50UHJlZFBhcnRpYWxIaXROKSx0LnlhKCkpLG51bGwhPT10aGlzLmZhbGxBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCYmdm9pZCAwIT09dGhpcy5mYWxsQWdlblRyYWZmaWNTdWNjZXNzUXQmJih0LmdhKFwiZmFsbEFnZW5UcmFmZmljU3VjY2Vzc1F0XCIsci5icy5QcywzNiksdC5DYyh0aGlzLmZhbGxBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCksdC55YSgpKSxudWxsIT09dGhpcy5mYWxsQWdlblRyYWZmaWNGYWlsdXJlUXQmJnZvaWQgMCE9PXRoaXMuZmFsbEFnZW5UcmFmZmljRmFpbHVyZVF0JiYodC5nYShcImZhbGxBZ2VuVHJhZmZpY0ZhaWx1cmVRdFwiLHIuYnMuUHMsMzcpLHQuQ2ModGhpcy5mYWxsQWdlblRyYWZmaWNGYWlsdXJlUXQpLHQueWEoKSksbnVsbCE9PXRoaXMucDJwQWdlbnRQcmVkSGl0TiYmdm9pZCAwIT09dGhpcy5wMnBBZ2VudFByZWRIaXROJiYodC5nYShcInAycEFnZW50UHJlZEhpdE5cIixyLmJzLk9zLDM4KSx0Lm1hKHRoaXMucDJwQWdlbnRQcmVkSGl0TiksdC55YSgpKSxudWxsIT09dGhpcy5wMnBBZ2VudFByZWRNaXNzTiYmdm9pZCAwIT09dGhpcy5wMnBBZ2VudFByZWRNaXNzTiYmKHQuZ2EoXCJwMnBBZ2VudFByZWRNaXNzTlwiLHIuYnMuT3MsMzkpLHQubWEodGhpcy5wMnBBZ2VudFByZWRNaXNzTiksdC55YSgpKSxudWxsIT09dGhpcy5wMnBBZ2VudFByZWRQYXJ0aWFsSGl0TiYmdm9pZCAwIT09dGhpcy5wMnBBZ2VudFByZWRQYXJ0aWFsSGl0TiYmKHQuZ2EoXCJwMnBBZ2VudFByZWRQYXJ0aWFsSGl0TlwiLHIuYnMuT3MsNDApLHQubWEodGhpcy5wMnBBZ2VudFByZWRQYXJ0aWFsSGl0TiksdC55YSgpKSxudWxsIT09dGhpcy5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCYmdm9pZCAwIT09dGhpcy5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCYmKHQuZ2EoXCJwMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdFwiLHIuYnMuUHMsNDEpLHQuQ2ModGhpcy5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCksdC55YSgpKSxudWxsIT09dGhpcy5wMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdCYmdm9pZCAwIT09dGhpcy5wMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdCYmKHQuZ2EoXCJwMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdFwiLHIuYnMuUHMsNDIpLHQuQ2ModGhpcy5wMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdCksdC55YSgpKSxudWxsIT09dGhpcy5yZXNwUDJwT3RoZXJOJiZ2b2lkIDAhPT10aGlzLnJlc3BQMnBPdGhlck4mJih0LmdhKFwicmVzcFAycE90aGVyTlwiLHIuYnMuT3MsNDMpLHQubWEodGhpcy5yZXNwUDJwT3RoZXJOKSx0LnlhKCkpLG51bGwhPT10aGlzLmxDYWNoZVJlc3BOJiZ2b2lkIDAhPT10aGlzLmxDYWNoZVJlc3BOJiYodC5nYShcImxDYWNoZVJlc3BOXCIsci5icy5Pcyw0NCksdC5tYSh0aGlzLmxDYWNoZVJlc3BOKSx0LnlhKCkpLG51bGwhPT10aGlzLmxDYWNoZVJlc3BRdCYmdm9pZCAwIT09dGhpcy5sQ2FjaGVSZXNwUXQmJih0LmdhKFwibENhY2hlUmVzcFF0XCIsci5icy5Qcyw0NSksdC5DYyh0aGlzLmxDYWNoZVJlc3BRdCksdC55YSgpKSxudWxsIT09dGhpcy5wMnBPdXRTaXRlTG93UHJpbyYmdm9pZCAwIT09dGhpcy5wMnBPdXRTaXRlTG93UHJpbyYmKHQuZ2EoXCJwMnBPdXRTaXRlTG93UHJpb1wiLHIuYnMuUHMsNDYpLHQuQ2ModGhpcy5wMnBPdXRTaXRlTG93UHJpbyksdC55YSgpKSx0LndhKCksdC5UYSgpfSxoaXZlLnNuYXBzaG90cy5NZXRyaWNzPWZ1bmN0aW9uKHQpe3RoaXMudXBCVz1udWxsLHRoaXMuZG93bkJXPW51bGwsdGhpcy5tZW1OPW51bGwsdGhpcy5wcnRJbk49bnVsbCx0aGlzLnBydE91dE49bnVsbCx0aGlzLmluaXRWaWRlb0J1ZlF0PW51bGwsdGhpcy52aWRlb0F2Z0J1ZlF0PW51bGwsdGhpcy52aWRlb0J1ZlF0PW51bGwsdGhpcy52aWRlb0J1Zk49bnVsbCx0aGlzLmluaXRBdWRpb0J1ZlF0PW51bGwsdGhpcy5hdWRpb0F2Z0J1ZlF0PW51bGwsdGhpcy5hdWRpb0J1ZlF0PW51bGwsdGhpcy5hdWRpb0J1Zk49bnVsbCx0aGlzLmJpdHJhdGVVcE49bnVsbCx0aGlzLmJpdHJhdGVEd25OPW51bGwsdGhpcy5kZWxheT1udWxsLHRoaXMuZGVsYXlFbmZvcmNlbWVudD1udWxsLHRoaXMubG9va3VwUmVxRXN0YWJsaXNoZWQ9bnVsbCx0aGlzLmxvb2t1cFJlcUFjY2VwdD1udWxsLHRoaXMuZmFsbGJhY2tBdmdUcD1udWxsLHRoaXMuc3JjVGhyb3VnaHB1dD1udWxsLHRoaXMuZGlza1JlYWRUaW1lb3V0PW51bGwsdGhpcy5kaXNrUmVhZFJhdGU9bnVsbCx0aGlzLmRpc2tTdG9yZVJhdGU9bnVsbCx0aGlzLmRpc2tSZW1vdmVSYXRlPW51bGwsdGhpcy5kaXNrQ2FjaGVTaXplPW51bGwsdGhpcy5jbGllbnRCdWZmZXJNcz1udWxsLHRoaXMubG9va3VwVG90YWw9bnVsbCx0aGlzLmxvb2t1cE5vdEZvdW5kPW51bGwsdGhpcy5sb29rdXBGYWlsZWQ9bnVsbCx0aGlzLmxvb2t1cExhdGVuY3k9bnVsbCx0aGlzLnRyYWNrZXJGYWlsZWQ9bnVsbCx0aGlzLnRyYWNrZXJMYXRlbmN5PW51bGwsdGhpcy5zbmFwc2hvdEZhaWxlZD1udWxsLHRoaXMuc25hcHNob3RMYXRlbmN5PW51bGwsdCYmKHZvaWQgMCE9PXQudXBCVyYmKHRoaXMudXBCVz10LnVwQlcpLHZvaWQgMCE9PXQuZG93bkJXJiYodGhpcy5kb3duQlc9dC5kb3duQlcpLHZvaWQgMCE9PXQubWVtTiYmKHRoaXMubWVtTj10Lm1lbU4pLHZvaWQgMCE9PXQucHJ0SW5OJiYodGhpcy5wcnRJbk49dC5wcnRJbk4pLHZvaWQgMCE9PXQucHJ0T3V0TiYmKHRoaXMucHJ0T3V0Tj10LnBydE91dE4pLHZvaWQgMCE9PXQuaW5pdFZpZGVvQnVmUXQmJih0aGlzLmluaXRWaWRlb0J1ZlF0PXQuaW5pdFZpZGVvQnVmUXQpLHZvaWQgMCE9PXQudmlkZW9BdmdCdWZRdCYmKHRoaXMudmlkZW9BdmdCdWZRdD10LnZpZGVvQXZnQnVmUXQpLHZvaWQgMCE9PXQudmlkZW9CdWZRdCYmKHRoaXMudmlkZW9CdWZRdD10LnZpZGVvQnVmUXQpLHZvaWQgMCE9PXQudmlkZW9CdWZOJiYodGhpcy52aWRlb0J1Zk49dC52aWRlb0J1Zk4pLHZvaWQgMCE9PXQuaW5pdEF1ZGlvQnVmUXQmJih0aGlzLmluaXRBdWRpb0J1ZlF0PXQuaW5pdEF1ZGlvQnVmUXQpLHZvaWQgMCE9PXQuYXVkaW9BdmdCdWZRdCYmKHRoaXMuYXVkaW9BdmdCdWZRdD10LmF1ZGlvQXZnQnVmUXQpLHZvaWQgMCE9PXQuYXVkaW9CdWZRdCYmKHRoaXMuYXVkaW9CdWZRdD10LmF1ZGlvQnVmUXQpLHZvaWQgMCE9PXQuYXVkaW9CdWZOJiYodGhpcy5hdWRpb0J1Zk49dC5hdWRpb0J1Zk4pLHZvaWQgMCE9PXQuYml0cmF0ZVVwTiYmKHRoaXMuYml0cmF0ZVVwTj10LmJpdHJhdGVVcE4pLHZvaWQgMCE9PXQuYml0cmF0ZUR3bk4mJih0aGlzLmJpdHJhdGVEd25OPXQuYml0cmF0ZUR3bk4pLHZvaWQgMCE9PXQuZGVsYXkmJih0aGlzLmRlbGF5PXQuZGVsYXkpLHZvaWQgMCE9PXQuZGVsYXlFbmZvcmNlbWVudCYmKHRoaXMuZGVsYXlFbmZvcmNlbWVudD10LmRlbGF5RW5mb3JjZW1lbnQpLHZvaWQgMCE9PXQubG9va3VwUmVxRXN0YWJsaXNoZWQmJih0aGlzLmxvb2t1cFJlcUVzdGFibGlzaGVkPXQubG9va3VwUmVxRXN0YWJsaXNoZWQpLHZvaWQgMCE9PXQubG9va3VwUmVxQWNjZXB0JiYodGhpcy5sb29rdXBSZXFBY2NlcHQ9dC5sb29rdXBSZXFBY2NlcHQpLHZvaWQgMCE9PXQuZmFsbGJhY2tBdmdUcCYmKHRoaXMuZmFsbGJhY2tBdmdUcD10LmZhbGxiYWNrQXZnVHApLHZvaWQgMCE9PXQuc3JjVGhyb3VnaHB1dCYmKHRoaXMuc3JjVGhyb3VnaHB1dD10LnNyY1Rocm91Z2hwdXQpLHZvaWQgMCE9PXQuZGlza1JlYWRUaW1lb3V0JiYodGhpcy5kaXNrUmVhZFRpbWVvdXQ9dC5kaXNrUmVhZFRpbWVvdXQpLHZvaWQgMCE9PXQuZGlza1JlYWRSYXRlJiYodGhpcy5kaXNrUmVhZFJhdGU9dC5kaXNrUmVhZFJhdGUpLHZvaWQgMCE9PXQuZGlza1N0b3JlUmF0ZSYmKHRoaXMuZGlza1N0b3JlUmF0ZT10LmRpc2tTdG9yZVJhdGUpLHZvaWQgMCE9PXQuZGlza1JlbW92ZVJhdGUmJih0aGlzLmRpc2tSZW1vdmVSYXRlPXQuZGlza1JlbW92ZVJhdGUpLHZvaWQgMCE9PXQuZGlza0NhY2hlU2l6ZSYmKHRoaXMuZGlza0NhY2hlU2l6ZT10LmRpc2tDYWNoZVNpemUpLHZvaWQgMCE9PXQuY2xpZW50QnVmZmVyTXMmJih0aGlzLmNsaWVudEJ1ZmZlck1zPXQuY2xpZW50QnVmZmVyTXMpLHZvaWQgMCE9PXQubG9va3VwVG90YWwmJih0aGlzLmxvb2t1cFRvdGFsPXQubG9va3VwVG90YWwpLHZvaWQgMCE9PXQubG9va3VwTm90Rm91bmQmJih0aGlzLmxvb2t1cE5vdEZvdW5kPXQubG9va3VwTm90Rm91bmQpLHZvaWQgMCE9PXQubG9va3VwRmFpbGVkJiYodGhpcy5sb29rdXBGYWlsZWQ9dC5sb29rdXBGYWlsZWQpLHZvaWQgMCE9PXQubG9va3VwTGF0ZW5jeSYmKHRoaXMubG9va3VwTGF0ZW5jeT10Lmxvb2t1cExhdGVuY3kpLHZvaWQgMCE9PXQudHJhY2tlckZhaWxlZCYmKHRoaXMudHJhY2tlckZhaWxlZD10LnRyYWNrZXJGYWlsZWQpLHZvaWQgMCE9PXQudHJhY2tlckxhdGVuY3kmJih0aGlzLnRyYWNrZXJMYXRlbmN5PXQudHJhY2tlckxhdGVuY3kpLHZvaWQgMCE9PXQuc25hcHNob3RGYWlsZWQmJih0aGlzLnNuYXBzaG90RmFpbGVkPXQuc25hcHNob3RGYWlsZWQpLHZvaWQgMCE9PXQuc25hcHNob3RMYXRlbmN5JiYodGhpcy5zbmFwc2hvdExhdGVuY3k9dC5zbmFwc2hvdExhdGVuY3kpKX0saGl2ZS5zbmFwc2hvdHMuTWV0cmljcy5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuTWV0cmljcy5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXtmb3IodC5IYygpOzspe3ZhciBlPXQuc2EoKSxpPShlLkJjLGUuYWEpLG49ZS5jYTtpZihpPT1yLmJzLkVzKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6aT09ci5icy5Pcz90aGlzLnVwQlc9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyOmk9PXIuYnMuT3M/dGhpcy5kb3duQlc9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzOmk9PXIuYnMuT3M/dGhpcy5tZW1OPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNDppPT1yLmJzLk9zP3RoaXMucHJ0SW5OPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNTppPT1yLmJzLk9zP3RoaXMucHJ0T3V0Tj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDY6aT09ci5icy5Qcz90aGlzLmluaXRWaWRlb0J1ZlF0PXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNzppPT1yLmJzLmtzP3RoaXMudmlkZW9BdmdCdWZRdD10LlljKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDg6aT09ci5icy5Qcz90aGlzLnZpZGVvQnVmUXQ9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA5Omk9PXIuYnMuT3M/dGhpcy52aWRlb0J1Zk49dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAxMDppPT1yLmJzLk9zP3RoaXMuaW5pdEF1ZGlvQnVmUXQ9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAxMTppPT1yLmJzLmtzP3RoaXMuYXVkaW9BdmdCdWZRdD10LlljKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDEyOmk9PXIuYnMuUHM/dGhpcy5hdWRpb0J1ZlF0PXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTM6aT09ci5icy5Pcz90aGlzLmF1ZGlvQnVmTj10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDE0Omk9PXIuYnMuT3M/dGhpcy5iaXRyYXRlVXBOPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTU6aT09ci5icy5Pcz90aGlzLmJpdHJhdGVEd25OPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTY6aT09ci5icy5Pcz90aGlzLmRlbGF5PXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTc6aT09ci5icy5Pcz90aGlzLmRlbGF5RW5mb3JjZW1lbnQ9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAxODppPT1yLmJzLk9zP3RoaXMubG9va3VwUmVxRXN0YWJsaXNoZWQ9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAxOTppPT1yLmJzLk9zP3RoaXMubG9va3VwUmVxQWNjZXB0PXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMjA6aT09ci5icy5rcz90aGlzLmZhbGxiYWNrQXZnVHA9dC5ZYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyMTppPT1yLmJzLmtzP3RoaXMuc3JjVGhyb3VnaHB1dD10LlljKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDIyOmk9PXIuYnMuT3M/dGhpcy5kaXNrUmVhZFRpbWVvdXQ9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyMzppPT1yLmJzLmtzP3RoaXMuZGlza1JlYWRSYXRlPXQuWWMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMjQ6aT09ci5icy5rcz90aGlzLmRpc2tTdG9yZVJhdGU9dC5ZYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyNTppPT1yLmJzLmtzP3RoaXMuZGlza1JlbW92ZVJhdGU9dC5ZYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyNjppPT1yLmJzLlBzP3RoaXMuZGlza0NhY2hlU2l6ZT10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI3Omk9PXIuYnMuT3M/dGhpcy5jbGllbnRCdWZmZXJNcz10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI4Omk9PXIuYnMuT3M/dGhpcy5sb29rdXBUb3RhbD10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI5Omk9PXIuYnMuT3M/dGhpcy5sb29rdXBOb3RGb3VuZD10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDMwOmk9PXIuYnMuT3M/dGhpcy5sb29rdXBGYWlsZWQ9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzMTppPT1yLmJzLk9zP3RoaXMubG9va3VwTGF0ZW5jeT10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDMyOmk9PXIuYnMuT3M/dGhpcy50cmFja2VyRmFpbGVkPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMzM6aT09ci5icy5Pcz90aGlzLnRyYWNrZXJMYXRlbmN5PXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMzQ6aT09ci5icy5Pcz90aGlzLnNuYXBzaG90RmFpbGVkPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMzU6aT09ci5icy5Pcz90aGlzLnNuYXBzaG90TGF0ZW5jeT10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztkZWZhdWx0OnQucGEoaSl9dC5sYSgpfXQuZGEoKX0saGl2ZS5zbmFwc2hvdHMuTWV0cmljcy5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dC5mYShcIk1ldHJpY3NcIiksbnVsbCE9PXRoaXMudXBCVyYmdm9pZCAwIT09dGhpcy51cEJXJiYodC5nYShcInVwQldcIixyLmJzLk9zLDEpLHQubWEodGhpcy51cEJXKSx0LnlhKCkpLG51bGwhPT10aGlzLmRvd25CVyYmdm9pZCAwIT09dGhpcy5kb3duQlcmJih0LmdhKFwiZG93bkJXXCIsci5icy5PcywyKSx0Lm1hKHRoaXMuZG93bkJXKSx0LnlhKCkpLG51bGwhPT10aGlzLm1lbU4mJnZvaWQgMCE9PXRoaXMubWVtTiYmKHQuZ2EoXCJtZW1OXCIsci5icy5PcywzKSx0Lm1hKHRoaXMubWVtTiksdC55YSgpKSxudWxsIT09dGhpcy5wcnRJbk4mJnZvaWQgMCE9PXRoaXMucHJ0SW5OJiYodC5nYShcInBydEluTlwiLHIuYnMuT3MsNCksdC5tYSh0aGlzLnBydEluTiksdC55YSgpKSxudWxsIT09dGhpcy5wcnRPdXROJiZ2b2lkIDAhPT10aGlzLnBydE91dE4mJih0LmdhKFwicHJ0T3V0TlwiLHIuYnMuT3MsNSksdC5tYSh0aGlzLnBydE91dE4pLHQueWEoKSksbnVsbCE9PXRoaXMuaW5pdFZpZGVvQnVmUXQmJnZvaWQgMCE9PXRoaXMuaW5pdFZpZGVvQnVmUXQmJih0LmdhKFwiaW5pdFZpZGVvQnVmUXRcIixyLmJzLlBzLDYpLHQuQ2ModGhpcy5pbml0VmlkZW9CdWZRdCksdC55YSgpKSxudWxsIT09dGhpcy52aWRlb0F2Z0J1ZlF0JiZ2b2lkIDAhPT10aGlzLnZpZGVvQXZnQnVmUXQmJih0LmdhKFwidmlkZW9BdmdCdWZRdFwiLHIuYnMua3MsNyksdC5PYyh0aGlzLnZpZGVvQXZnQnVmUXQpLHQueWEoKSksbnVsbCE9PXRoaXMudmlkZW9CdWZRdCYmdm9pZCAwIT09dGhpcy52aWRlb0J1ZlF0JiYodC5nYShcInZpZGVvQnVmUXRcIixyLmJzLlBzLDgpLHQuQ2ModGhpcy52aWRlb0J1ZlF0KSx0LnlhKCkpLG51bGwhPT10aGlzLnZpZGVvQnVmTiYmdm9pZCAwIT09dGhpcy52aWRlb0J1Zk4mJih0LmdhKFwidmlkZW9CdWZOXCIsci5icy5Pcyw5KSx0Lm1hKHRoaXMudmlkZW9CdWZOKSx0LnlhKCkpLG51bGwhPT10aGlzLmluaXRBdWRpb0J1ZlF0JiZ2b2lkIDAhPT10aGlzLmluaXRBdWRpb0J1ZlF0JiYodC5nYShcImluaXRBdWRpb0J1ZlF0XCIsci5icy5PcywxMCksdC5tYSh0aGlzLmluaXRBdWRpb0J1ZlF0KSx0LnlhKCkpLG51bGwhPT10aGlzLmF1ZGlvQXZnQnVmUXQmJnZvaWQgMCE9PXRoaXMuYXVkaW9BdmdCdWZRdCYmKHQuZ2EoXCJhdWRpb0F2Z0J1ZlF0XCIsci5icy5rcywxMSksdC5PYyh0aGlzLmF1ZGlvQXZnQnVmUXQpLHQueWEoKSksbnVsbCE9PXRoaXMuYXVkaW9CdWZRdCYmdm9pZCAwIT09dGhpcy5hdWRpb0J1ZlF0JiYodC5nYShcImF1ZGlvQnVmUXRcIixyLmJzLlBzLDEyKSx0LkNjKHRoaXMuYXVkaW9CdWZRdCksdC55YSgpKSxudWxsIT09dGhpcy5hdWRpb0J1Zk4mJnZvaWQgMCE9PXRoaXMuYXVkaW9CdWZOJiYodC5nYShcImF1ZGlvQnVmTlwiLHIuYnMuT3MsMTMpLHQubWEodGhpcy5hdWRpb0J1Zk4pLHQueWEoKSksbnVsbCE9PXRoaXMuYml0cmF0ZVVwTiYmdm9pZCAwIT09dGhpcy5iaXRyYXRlVXBOJiYodC5nYShcImJpdHJhdGVVcE5cIixyLmJzLk9zLDE0KSx0Lm1hKHRoaXMuYml0cmF0ZVVwTiksdC55YSgpKSxudWxsIT09dGhpcy5iaXRyYXRlRHduTiYmdm9pZCAwIT09dGhpcy5iaXRyYXRlRHduTiYmKHQuZ2EoXCJiaXRyYXRlRHduTlwiLHIuYnMuT3MsMTUpLHQubWEodGhpcy5iaXRyYXRlRHduTiksdC55YSgpKSxudWxsIT09dGhpcy5kZWxheSYmdm9pZCAwIT09dGhpcy5kZWxheSYmKHQuZ2EoXCJkZWxheVwiLHIuYnMuT3MsMTYpLHQubWEodGhpcy5kZWxheSksdC55YSgpKSxudWxsIT09dGhpcy5kZWxheUVuZm9yY2VtZW50JiZ2b2lkIDAhPT10aGlzLmRlbGF5RW5mb3JjZW1lbnQmJih0LmdhKFwiZGVsYXlFbmZvcmNlbWVudFwiLHIuYnMuT3MsMTcpLHQubWEodGhpcy5kZWxheUVuZm9yY2VtZW50KSx0LnlhKCkpLG51bGwhPT10aGlzLmxvb2t1cFJlcUVzdGFibGlzaGVkJiZ2b2lkIDAhPT10aGlzLmxvb2t1cFJlcUVzdGFibGlzaGVkJiYodC5nYShcImxvb2t1cFJlcUVzdGFibGlzaGVkXCIsci5icy5PcywxOCksdC5tYSh0aGlzLmxvb2t1cFJlcUVzdGFibGlzaGVkKSx0LnlhKCkpLG51bGwhPT10aGlzLmxvb2t1cFJlcUFjY2VwdCYmdm9pZCAwIT09dGhpcy5sb29rdXBSZXFBY2NlcHQmJih0LmdhKFwibG9va3VwUmVxQWNjZXB0XCIsci5icy5PcywxOSksdC5tYSh0aGlzLmxvb2t1cFJlcUFjY2VwdCksdC55YSgpKSxudWxsIT09dGhpcy5mYWxsYmFja0F2Z1RwJiZ2b2lkIDAhPT10aGlzLmZhbGxiYWNrQXZnVHAmJih0LmdhKFwiZmFsbGJhY2tBdmdUcFwiLHIuYnMua3MsMjApLHQuT2ModGhpcy5mYWxsYmFja0F2Z1RwKSx0LnlhKCkpLG51bGwhPT10aGlzLnNyY1Rocm91Z2hwdXQmJnZvaWQgMCE9PXRoaXMuc3JjVGhyb3VnaHB1dCYmKHQuZ2EoXCJzcmNUaHJvdWdocHV0XCIsci5icy5rcywyMSksdC5PYyh0aGlzLnNyY1Rocm91Z2hwdXQpLHQueWEoKSksbnVsbCE9PXRoaXMuZGlza1JlYWRUaW1lb3V0JiZ2b2lkIDAhPT10aGlzLmRpc2tSZWFkVGltZW91dCYmKHQuZ2EoXCJkaXNrUmVhZFRpbWVvdXRcIixyLmJzLk9zLDIyKSx0Lm1hKHRoaXMuZGlza1JlYWRUaW1lb3V0KSx0LnlhKCkpLG51bGwhPT10aGlzLmRpc2tSZWFkUmF0ZSYmdm9pZCAwIT09dGhpcy5kaXNrUmVhZFJhdGUmJih0LmdhKFwiZGlza1JlYWRSYXRlXCIsci5icy5rcywyMyksdC5PYyh0aGlzLmRpc2tSZWFkUmF0ZSksdC55YSgpKSxudWxsIT09dGhpcy5kaXNrU3RvcmVSYXRlJiZ2b2lkIDAhPT10aGlzLmRpc2tTdG9yZVJhdGUmJih0LmdhKFwiZGlza1N0b3JlUmF0ZVwiLHIuYnMua3MsMjQpLHQuT2ModGhpcy5kaXNrU3RvcmVSYXRlKSx0LnlhKCkpLG51bGwhPT10aGlzLmRpc2tSZW1vdmVSYXRlJiZ2b2lkIDAhPT10aGlzLmRpc2tSZW1vdmVSYXRlJiYodC5nYShcImRpc2tSZW1vdmVSYXRlXCIsci5icy5rcywyNSksdC5PYyh0aGlzLmRpc2tSZW1vdmVSYXRlKSx0LnlhKCkpLG51bGwhPT10aGlzLmRpc2tDYWNoZVNpemUmJnZvaWQgMCE9PXRoaXMuZGlza0NhY2hlU2l6ZSYmKHQuZ2EoXCJkaXNrQ2FjaGVTaXplXCIsci5icy5QcywyNiksdC5DYyh0aGlzLmRpc2tDYWNoZVNpemUpLHQueWEoKSksbnVsbCE9PXRoaXMuY2xpZW50QnVmZmVyTXMmJnZvaWQgMCE9PXRoaXMuY2xpZW50QnVmZmVyTXMmJih0LmdhKFwiY2xpZW50QnVmZmVyTXNcIixyLmJzLk9zLDI3KSx0Lm1hKHRoaXMuY2xpZW50QnVmZmVyTXMpLHQueWEoKSksbnVsbCE9PXRoaXMubG9va3VwVG90YWwmJnZvaWQgMCE9PXRoaXMubG9va3VwVG90YWwmJih0LmdhKFwibG9va3VwVG90YWxcIixyLmJzLk9zLDI4KSx0Lm1hKHRoaXMubG9va3VwVG90YWwpLHQueWEoKSksbnVsbCE9PXRoaXMubG9va3VwTm90Rm91bmQmJnZvaWQgMCE9PXRoaXMubG9va3VwTm90Rm91bmQmJih0LmdhKFwibG9va3VwTm90Rm91bmRcIixyLmJzLk9zLDI5KSx0Lm1hKHRoaXMubG9va3VwTm90Rm91bmQpLHQueWEoKSksbnVsbCE9PXRoaXMubG9va3VwRmFpbGVkJiZ2b2lkIDAhPT10aGlzLmxvb2t1cEZhaWxlZCYmKHQuZ2EoXCJsb29rdXBGYWlsZWRcIixyLmJzLk9zLDMwKSx0Lm1hKHRoaXMubG9va3VwRmFpbGVkKSx0LnlhKCkpLG51bGwhPT10aGlzLmxvb2t1cExhdGVuY3kmJnZvaWQgMCE9PXRoaXMubG9va3VwTGF0ZW5jeSYmKHQuZ2EoXCJsb29rdXBMYXRlbmN5XCIsci5icy5PcywzMSksdC5tYSh0aGlzLmxvb2t1cExhdGVuY3kpLHQueWEoKSksbnVsbCE9PXRoaXMudHJhY2tlckZhaWxlZCYmdm9pZCAwIT09dGhpcy50cmFja2VyRmFpbGVkJiYodC5nYShcInRyYWNrZXJGYWlsZWRcIixyLmJzLk9zLDMyKSx0Lm1hKHRoaXMudHJhY2tlckZhaWxlZCksdC55YSgpKSxudWxsIT09dGhpcy50cmFja2VyTGF0ZW5jeSYmdm9pZCAwIT09dGhpcy50cmFja2VyTGF0ZW5jeSYmKHQuZ2EoXCJ0cmFja2VyTGF0ZW5jeVwiLHIuYnMuT3MsMzMpLHQubWEodGhpcy50cmFja2VyTGF0ZW5jeSksdC55YSgpKSxudWxsIT09dGhpcy5zbmFwc2hvdEZhaWxlZCYmdm9pZCAwIT09dGhpcy5zbmFwc2hvdEZhaWxlZCYmKHQuZ2EoXCJzbmFwc2hvdEZhaWxlZFwiLHIuYnMuT3MsMzQpLHQubWEodGhpcy5zbmFwc2hvdEZhaWxlZCksdC55YSgpKSxudWxsIT09dGhpcy5zbmFwc2hvdExhdGVuY3kmJnZvaWQgMCE9PXRoaXMuc25hcHNob3RMYXRlbmN5JiYodC5nYShcInNuYXBzaG90TGF0ZW5jeVwiLHIuYnMuT3MsMzUpLHQubWEodGhpcy5zbmFwc2hvdExhdGVuY3kpLHQueWEoKSksdC53YSgpLHQuVGEoKX0saGl2ZS5zbmFwc2hvdHMuUGFydG5lclRyYWZmaWM9ZnVuY3Rpb24odCl7dGhpcy5wMnBTdWNjUmVxPW51bGwsdGhpcy5wMnBGYWlsUmVxPW51bGwsdGhpcy5wMnBQYXJ0UmVxPW51bGwsdGhpcy5wMnBTdWNjUmVjZWl2ZWQ9bnVsbCx0aGlzLnAycFN1Y2NSZWNlaXZlZExvdz1udWxsLHRoaXMucDJwRmFpbFJlY2VpdmVkPW51bGwsdGhpcy5wMnBTdWNjUmVzcD1udWxsLHRoaXMucDJwRmFpbFJlc3A9bnVsbCx0aGlzLnAycFBhcnRSZXNwPW51bGwsdGhpcy5wMnBTdWNjU2VudD1udWxsLHRoaXMucDJwU3VjY1NlbnRMb3c9bnVsbCx0aGlzLnAycEZhaWxTZW50PW51bGwsdCYmKHZvaWQgMCE9PXQucDJwU3VjY1JlcSYmKHRoaXMucDJwU3VjY1JlcT10LnAycFN1Y2NSZXEpLHZvaWQgMCE9PXQucDJwRmFpbFJlcSYmKHRoaXMucDJwRmFpbFJlcT10LnAycEZhaWxSZXEpLHZvaWQgMCE9PXQucDJwUGFydFJlcSYmKHRoaXMucDJwUGFydFJlcT10LnAycFBhcnRSZXEpLHZvaWQgMCE9PXQucDJwU3VjY1JlY2VpdmVkJiYodGhpcy5wMnBTdWNjUmVjZWl2ZWQ9dC5wMnBTdWNjUmVjZWl2ZWQpLHZvaWQgMCE9PXQucDJwU3VjY1JlY2VpdmVkTG93JiYodGhpcy5wMnBTdWNjUmVjZWl2ZWRMb3c9dC5wMnBTdWNjUmVjZWl2ZWRMb3cpLHZvaWQgMCE9PXQucDJwRmFpbFJlY2VpdmVkJiYodGhpcy5wMnBGYWlsUmVjZWl2ZWQ9dC5wMnBGYWlsUmVjZWl2ZWQpLHZvaWQgMCE9PXQucDJwU3VjY1Jlc3AmJih0aGlzLnAycFN1Y2NSZXNwPXQucDJwU3VjY1Jlc3ApLHZvaWQgMCE9PXQucDJwRmFpbFJlc3AmJih0aGlzLnAycEZhaWxSZXNwPXQucDJwRmFpbFJlc3ApLHZvaWQgMCE9PXQucDJwUGFydFJlc3AmJih0aGlzLnAycFBhcnRSZXNwPXQucDJwUGFydFJlc3ApLHZvaWQgMCE9PXQucDJwU3VjY1NlbnQmJih0aGlzLnAycFN1Y2NTZW50PXQucDJwU3VjY1NlbnQpLHZvaWQgMCE9PXQucDJwU3VjY1NlbnRMb3cmJih0aGlzLnAycFN1Y2NTZW50TG93PXQucDJwU3VjY1NlbnRMb3cpLHZvaWQgMCE9PXQucDJwRmFpbFNlbnQmJih0aGlzLnAycEZhaWxTZW50PXQucDJwRmFpbFNlbnQpKX0saGl2ZS5zbmFwc2hvdHMuUGFydG5lclRyYWZmaWMucHJvdG90eXBlPXt9LGhpdmUuc25hcHNob3RzLlBhcnRuZXJUcmFmZmljLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe2Zvcih0LkhjKCk7Oyl7dmFyIGU9dC5zYSgpLGk9KGUuQmMsZS5hYSksbj1lLmNhO2lmKGk9PXIuYnMuRXMpYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTppPT1yLmJzLlBzP3RoaXMucDJwU3VjY1JlcT10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI6aT09ci5icy5Qcz90aGlzLnAycEZhaWxSZXE9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzOmk9PXIuYnMuUHM/dGhpcy5wMnBQYXJ0UmVxPXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNDppPT1yLmJzLlBzP3RoaXMucDJwU3VjY1JlY2VpdmVkPXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNTppPT1yLmJzLlBzP3RoaXMucDJwU3VjY1JlY2VpdmVkTG93PXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTA6aT09ci5icy5Qcz90aGlzLnAycEZhaWxSZWNlaXZlZD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDY6aT09ci5icy5Qcz90aGlzLnAycFN1Y2NSZXNwPXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTE6aT09ci5icy5Qcz90aGlzLnAycEZhaWxSZXNwPXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNzppPT1yLmJzLlBzP3RoaXMucDJwUGFydFJlc3A9dC4kYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA4Omk9PXIuYnMuUHM/dGhpcy5wMnBTdWNjU2VudD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDk6aT09ci5icy5Qcz90aGlzLnAycFN1Y2NTZW50TG93PXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTI6aT09ci5icy5Qcz90aGlzLnAycEZhaWxTZW50PXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2RlZmF1bHQ6dC5wYShpKX10LmxhKCl9dC5kYSgpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyVHJhZmZpYy5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dC5mYShcIlBhcnRuZXJUcmFmZmljXCIpLG51bGwhPT10aGlzLnAycFN1Y2NSZXEmJnZvaWQgMCE9PXRoaXMucDJwU3VjY1JlcSYmKHQuZ2EoXCJwMnBTdWNjUmVxXCIsci5icy5QcywxKSx0LkNjKHRoaXMucDJwU3VjY1JlcSksdC55YSgpKSxudWxsIT09dGhpcy5wMnBGYWlsUmVxJiZ2b2lkIDAhPT10aGlzLnAycEZhaWxSZXEmJih0LmdhKFwicDJwRmFpbFJlcVwiLHIuYnMuUHMsMiksdC5DYyh0aGlzLnAycEZhaWxSZXEpLHQueWEoKSksbnVsbCE9PXRoaXMucDJwUGFydFJlcSYmdm9pZCAwIT09dGhpcy5wMnBQYXJ0UmVxJiYodC5nYShcInAycFBhcnRSZXFcIixyLmJzLlBzLDMpLHQuQ2ModGhpcy5wMnBQYXJ0UmVxKSx0LnlhKCkpLG51bGwhPT10aGlzLnAycFN1Y2NSZWNlaXZlZCYmdm9pZCAwIT09dGhpcy5wMnBTdWNjUmVjZWl2ZWQmJih0LmdhKFwicDJwU3VjY1JlY2VpdmVkXCIsci5icy5Qcyw0KSx0LkNjKHRoaXMucDJwU3VjY1JlY2VpdmVkKSx0LnlhKCkpLG51bGwhPT10aGlzLnAycFN1Y2NSZWNlaXZlZExvdyYmdm9pZCAwIT09dGhpcy5wMnBTdWNjUmVjZWl2ZWRMb3cmJih0LmdhKFwicDJwU3VjY1JlY2VpdmVkTG93XCIsci5icy5Qcyw1KSx0LkNjKHRoaXMucDJwU3VjY1JlY2VpdmVkTG93KSx0LnlhKCkpLG51bGwhPT10aGlzLnAycEZhaWxSZWNlaXZlZCYmdm9pZCAwIT09dGhpcy5wMnBGYWlsUmVjZWl2ZWQmJih0LmdhKFwicDJwRmFpbFJlY2VpdmVkXCIsci5icy5QcywxMCksdC5DYyh0aGlzLnAycEZhaWxSZWNlaXZlZCksdC55YSgpKSxudWxsIT09dGhpcy5wMnBTdWNjUmVzcCYmdm9pZCAwIT09dGhpcy5wMnBTdWNjUmVzcCYmKHQuZ2EoXCJwMnBTdWNjUmVzcFwiLHIuYnMuUHMsNiksdC5DYyh0aGlzLnAycFN1Y2NSZXNwKSx0LnlhKCkpLG51bGwhPT10aGlzLnAycEZhaWxSZXNwJiZ2b2lkIDAhPT10aGlzLnAycEZhaWxSZXNwJiYodC5nYShcInAycEZhaWxSZXNwXCIsci5icy5QcywxMSksdC5DYyh0aGlzLnAycEZhaWxSZXNwKSx0LnlhKCkpLG51bGwhPT10aGlzLnAycFBhcnRSZXNwJiZ2b2lkIDAhPT10aGlzLnAycFBhcnRSZXNwJiYodC5nYShcInAycFBhcnRSZXNwXCIsci5icy5Qcyw3KSx0LkNjKHRoaXMucDJwUGFydFJlc3ApLHQueWEoKSksbnVsbCE9PXRoaXMucDJwU3VjY1NlbnQmJnZvaWQgMCE9PXRoaXMucDJwU3VjY1NlbnQmJih0LmdhKFwicDJwU3VjY1NlbnRcIixyLmJzLlBzLDgpLHQuQ2ModGhpcy5wMnBTdWNjU2VudCksdC55YSgpKSxudWxsIT09dGhpcy5wMnBTdWNjU2VudExvdyYmdm9pZCAwIT09dGhpcy5wMnBTdWNjU2VudExvdyYmKHQuZ2EoXCJwMnBTdWNjU2VudExvd1wiLHIuYnMuUHMsOSksdC5DYyh0aGlzLnAycFN1Y2NTZW50TG93KSx0LnlhKCkpLG51bGwhPT10aGlzLnAycEZhaWxTZW50JiZ2b2lkIDAhPT10aGlzLnAycEZhaWxTZW50JiYodC5nYShcInAycEZhaWxTZW50XCIsci5icy5QcywxMiksdC5DYyh0aGlzLnAycEZhaWxTZW50KSx0LnlhKCkpLHQud2EoKSx0LlRhKCl9LGhpdmUuc25hcHNob3RzLlBhcnRuZXJNZXRyaWNzPWZ1bmN0aW9uKHQpe3RoaXMucmF0ZVJlY2VpdmVkPW51bGwsdGhpcy5yYXRlU2VudD1udWxsLHRoaXMuaGFuZHNoYWtlRGVsYXk9bnVsbCx0JiYodm9pZCAwIT09dC5yYXRlUmVjZWl2ZWQmJih0aGlzLnJhdGVSZWNlaXZlZD10LnJhdGVSZWNlaXZlZCksdm9pZCAwIT09dC5yYXRlU2VudCYmKHRoaXMucmF0ZVNlbnQ9dC5yYXRlU2VudCksdm9pZCAwIT09dC5oYW5kc2hha2VEZWxheSYmKHRoaXMuaGFuZHNoYWtlRGVsYXk9dC5oYW5kc2hha2VEZWxheSkpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyTWV0cmljcy5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuUGFydG5lck1ldHJpY3MucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7Zm9yKHQuSGMoKTs7KXt2YXIgZT10LnNhKCksaT0oZS5CYyxlLmFhKSxuPWUuY2E7aWYoaT09ci5icy5FcylicmVhaztzd2l0Y2gobil7Y2FzZSAxOmk9PXIuYnMua3M/dGhpcy5yYXRlUmVjZWl2ZWQ9dC5ZYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyOmk9PXIuYnMua3M/dGhpcy5yYXRlU2VudD10LlljKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDM6aT09ci5icy5Qcz90aGlzLmhhbmRzaGFrZURlbGF5PXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2RlZmF1bHQ6dC5wYShpKX10LmxhKCl9dC5kYSgpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyTWV0cmljcy5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dC5mYShcIlBhcnRuZXJNZXRyaWNzXCIpLG51bGwhPT10aGlzLnJhdGVSZWNlaXZlZCYmdm9pZCAwIT09dGhpcy5yYXRlUmVjZWl2ZWQmJih0LmdhKFwicmF0ZVJlY2VpdmVkXCIsci5icy5rcywxKSx0Lk9jKHRoaXMucmF0ZVJlY2VpdmVkKSx0LnlhKCkpLG51bGwhPT10aGlzLnJhdGVTZW50JiZ2b2lkIDAhPT10aGlzLnJhdGVTZW50JiYodC5nYShcInJhdGVTZW50XCIsci5icy5rcywyKSx0Lk9jKHRoaXMucmF0ZVNlbnQpLHQueWEoKSksbnVsbCE9PXRoaXMuaGFuZHNoYWtlRGVsYXkmJnZvaWQgMCE9PXRoaXMuaGFuZHNoYWtlRGVsYXkmJih0LmdhKFwiaGFuZHNoYWtlRGVsYXlcIixyLmJzLlBzLDMpLHQuQ2ModGhpcy5oYW5kc2hha2VEZWxheSksdC55YSgpKSx0LndhKCksdC5UYSgpfSxoaXZlLnNuYXBzaG90cy5Db25uZWN0aXZpdHlJbmZvPWZ1bmN0aW9uKHQpe3RoaXMudXBCVz1udWxsLHRoaXMuZG93bkJXPW51bGwsdGhpcy5leHRlcm5hbEFzPW51bGwsdGhpcy5pbnRlcm5hbEFzPW51bGwsdGhpcy5wdWJsaWNJcD1udWxsLHRoaXMucHJpdmF0ZUlwPW51bGwsdCYmKHZvaWQgMCE9PXQudXBCVyYmKHRoaXMudXBCVz10LnVwQlcpLHZvaWQgMCE9PXQuZG93bkJXJiYodGhpcy5kb3duQlc9dC5kb3duQlcpLHZvaWQgMCE9PXQuZXh0ZXJuYWxBcyYmKHRoaXMuZXh0ZXJuYWxBcz10LmV4dGVybmFsQXMpLHZvaWQgMCE9PXQuaW50ZXJuYWxBcyYmKHRoaXMuaW50ZXJuYWxBcz10LmludGVybmFsQXMpLHZvaWQgMCE9PXQucHVibGljSXAmJih0aGlzLnB1YmxpY0lwPXQucHVibGljSXApLHZvaWQgMCE9PXQucHJpdmF0ZUlwJiYodGhpcy5wcml2YXRlSXA9dC5wcml2YXRlSXApKX0saGl2ZS5zbmFwc2hvdHMuQ29ubmVjdGl2aXR5SW5mby5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuQ29ubmVjdGl2aXR5SW5mby5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXtmb3IodC5IYygpOzspe3ZhciBlPXQuc2EoKSxpPShlLkJjLGUuYWEpLG49ZS5jYTtpZihpPT1yLmJzLkVzKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6aT09ci5icy5Pcz90aGlzLnVwQlc9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyOmk9PXIuYnMuT3M/dGhpcy5kb3duQlc9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzOmk9PXIuYnMuT3M/dGhpcy5leHRlcm5hbEFzPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNDppPT1yLmJzLk9zP3RoaXMuaW50ZXJuYWxBcz10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDU6aT09ci5icy5Bcz90aGlzLnB1YmxpY0lwPXQuaGEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNjppPT1yLmJzLkFzP3RoaXMucHJpdmF0ZUlwPXQuaGEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2RlZmF1bHQ6dC5wYShpKX10LmxhKCl9dC5kYSgpfSxoaXZlLnNuYXBzaG90cy5Db25uZWN0aXZpdHlJbmZvLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0LmZhKFwiQ29ubmVjdGl2aXR5SW5mb1wiKSxudWxsIT09dGhpcy51cEJXJiZ2b2lkIDAhPT10aGlzLnVwQlcmJih0LmdhKFwidXBCV1wiLHIuYnMuT3MsMSksdC5tYSh0aGlzLnVwQlcpLHQueWEoKSksbnVsbCE9PXRoaXMuZG93bkJXJiZ2b2lkIDAhPT10aGlzLmRvd25CVyYmKHQuZ2EoXCJkb3duQldcIixyLmJzLk9zLDIpLHQubWEodGhpcy5kb3duQlcpLHQueWEoKSksbnVsbCE9PXRoaXMuZXh0ZXJuYWxBcyYmdm9pZCAwIT09dGhpcy5leHRlcm5hbEFzJiYodC5nYShcImV4dGVybmFsQXNcIixyLmJzLk9zLDMpLHQubWEodGhpcy5leHRlcm5hbEFzKSx0LnlhKCkpLG51bGwhPT10aGlzLmludGVybmFsQXMmJnZvaWQgMCE9PXRoaXMuaW50ZXJuYWxBcyYmKHQuZ2EoXCJpbnRlcm5hbEFzXCIsci5icy5Pcyw0KSx0Lm1hKHRoaXMuaW50ZXJuYWxBcyksdC55YSgpKSxudWxsIT09dGhpcy5wdWJsaWNJcCYmdm9pZCAwIT09dGhpcy5wdWJsaWNJcCYmKHQuZ2EoXCJwdWJsaWNJcFwiLHIuYnMuQXMsNSksdC52YSh0aGlzLnB1YmxpY0lwKSx0LnlhKCkpLG51bGwhPT10aGlzLnByaXZhdGVJcCYmdm9pZCAwIT09dGhpcy5wcml2YXRlSXAmJih0LmdhKFwicHJpdmF0ZUlwXCIsci5icy5Bcyw2KSx0LnZhKHRoaXMucHJpdmF0ZUlwKSx0LnlhKCkpLHQud2EoKSx0LlRhKCl9LGhpdmUuc25hcHNob3RzLlBhcnRuZXI9ZnVuY3Rpb24odCl7dGhpcy5jb25uSW5mbz1udWxsLHRoaXMudHJhZmZpYz1udWxsLHRoaXMubWV0cmljcz1udWxsLHRoaXMuaW5QYXJ0PW51bGwsdGhpcy5vdXRQYXJ0PW51bGwsdGhpcy51ZHA9bnVsbCx0JiYodm9pZCAwIT09dC5jb25uSW5mbyYmKHRoaXMuY29ubkluZm89dC5jb25uSW5mbyksdm9pZCAwIT09dC50cmFmZmljJiYodGhpcy50cmFmZmljPXQudHJhZmZpYyksdm9pZCAwIT09dC5tZXRyaWNzJiYodGhpcy5tZXRyaWNzPXQubWV0cmljcyksdm9pZCAwIT09dC5pblBhcnQmJih0aGlzLmluUGFydD10LmluUGFydCksdm9pZCAwIT09dC5vdXRQYXJ0JiYodGhpcy5vdXRQYXJ0PXQub3V0UGFydCksdm9pZCAwIT09dC51ZHAmJih0aGlzLnVkcD10LnVkcCkpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyLnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe2Zvcih0LkhjKCk7Oyl7dmFyIGU9dC5zYSgpLGk9KGUuQmMsZS5hYSksbj1lLmNhO2lmKGk9PXIuYnMuRXMpYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTppPT1yLmJzLnhzPyh0aGlzLmNvbm5JbmZvPW5ldyBoaXZlLnNuYXBzaG90cy5Db25uZWN0aXZpdHlJbmZvLHRoaXMuY29ubkluZm8ucmVhZCh0KSk6dC5wYShpKTticmVhaztjYXNlIDI6aT09ci5icy54cz8odGhpcy50cmFmZmljPW5ldyBoaXZlLnNuYXBzaG90cy5QYXJ0bmVyVHJhZmZpYyx0aGlzLnRyYWZmaWMucmVhZCh0KSk6dC5wYShpKTticmVhaztjYXNlIDM6aT09ci5icy54cz8odGhpcy5tZXRyaWNzPW5ldyBoaXZlLnNuYXBzaG90cy5QYXJ0bmVyTWV0cmljcyx0aGlzLm1ldHJpY3MucmVhZCh0KSk6dC5wYShpKTticmVhaztjYXNlIDQ6aT09ci5icy5CT09MP3RoaXMuaW5QYXJ0PXQuR2MoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNTppPT1yLmJzLkJPT0w/dGhpcy5vdXRQYXJ0PXQuR2MoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgNjppPT1yLmJzLkJPT0w/dGhpcy51ZHA9dC5HYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7ZGVmYXVsdDp0LnBhKGkpfXQubGEoKX10LmRhKCl9LGhpdmUuc25hcHNob3RzLlBhcnRuZXIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3QuZmEoXCJQYXJ0bmVyXCIpLG51bGwhPT10aGlzLmNvbm5JbmZvJiZ2b2lkIDAhPT10aGlzLmNvbm5JbmZvJiYodC5nYShcImNvbm5JbmZvXCIsci5icy54cywxKSx0aGlzLmNvbm5JbmZvLndyaXRlKHQpLHQueWEoKSksbnVsbCE9PXRoaXMudHJhZmZpYyYmdm9pZCAwIT09dGhpcy50cmFmZmljJiYodC5nYShcInRyYWZmaWNcIixyLmJzLnhzLDIpLHRoaXMudHJhZmZpYy53cml0ZSh0KSx0LnlhKCkpLG51bGwhPT10aGlzLm1ldHJpY3MmJnZvaWQgMCE9PXRoaXMubWV0cmljcyYmKHQuZ2EoXCJtZXRyaWNzXCIsci5icy54cywzKSx0aGlzLm1ldHJpY3Mud3JpdGUodCksdC55YSgpKSxudWxsIT09dGhpcy5pblBhcnQmJnZvaWQgMCE9PXRoaXMuaW5QYXJ0JiYodC5nYShcImluUGFydFwiLHIuYnMuQk9PTCw0KSx0LkljKHRoaXMuaW5QYXJ0KSx0LnlhKCkpLG51bGwhPT10aGlzLm91dFBhcnQmJnZvaWQgMCE9PXRoaXMub3V0UGFydCYmKHQuZ2EoXCJvdXRQYXJ0XCIsci5icy5CT09MLDUpLHQuSWModGhpcy5vdXRQYXJ0KSx0LnlhKCkpLG51bGwhPT10aGlzLnVkcCYmdm9pZCAwIT09dGhpcy51ZHAmJih0LmdhKFwidWRwXCIsci5icy5CT09MLDYpLHQuSWModGhpcy51ZHApLHQueWEoKSksdC53YSgpLHQuVGEoKX0saGl2ZS5zbmFwc2hvdHMuU3RyZWFtSW5mbz1mdW5jdGlvbih0KXt0aGlzLnVybD1udWxsLHRoaXMuc3RyZWFtVHlwZT1udWxsLHRoaXMuc3RyZWFtUHJvdG9jb2w9bnVsbCx0JiYodm9pZCAwIT09dC51cmwmJih0aGlzLnVybD10LnVybCksdm9pZCAwIT09dC5zdHJlYW1UeXBlJiYodGhpcy5zdHJlYW1UeXBlPXQuc3RyZWFtVHlwZSksdm9pZCAwIT09dC5zdHJlYW1Qcm90b2NvbCYmKHRoaXMuc3RyZWFtUHJvdG9jb2w9dC5zdHJlYW1Qcm90b2NvbCkpfSxoaXZlLnNuYXBzaG90cy5TdHJlYW1JbmZvLnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5TdHJlYW1JbmZvLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe2Zvcih0LkhjKCk7Oyl7dmFyIGU9dC5zYSgpLGk9KGUuQmMsZS5hYSksbj1lLmNhO2lmKGk9PXIuYnMuRXMpYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTppPT1yLmJzLkFzP3RoaXMudXJsPXQuaGEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMjppPT1yLmJzLk9zP3RoaXMuc3RyZWFtVHlwZT10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDM6aT09ci5icy5Pcz90aGlzLnN0cmVhbVByb3RvY29sPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2RlZmF1bHQ6dC5wYShpKX10LmxhKCl9dC5kYSgpfSxoaXZlLnNuYXBzaG90cy5TdHJlYW1JbmZvLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0LmZhKFwiU3RyZWFtSW5mb1wiKSxudWxsIT09dGhpcy51cmwmJnZvaWQgMCE9PXRoaXMudXJsJiYodC5nYShcInVybFwiLHIuYnMuQXMsMSksdC52YSh0aGlzLnVybCksdC55YSgpKSxudWxsIT09dGhpcy5zdHJlYW1UeXBlJiZ2b2lkIDAhPT10aGlzLnN0cmVhbVR5cGUmJih0LmdhKFwic3RyZWFtVHlwZVwiLHIuYnMuT3MsMiksdC5tYSh0aGlzLnN0cmVhbVR5cGUpLHQueWEoKSksbnVsbCE9PXRoaXMuc3RyZWFtUHJvdG9jb2wmJnZvaWQgMCE9PXRoaXMuc3RyZWFtUHJvdG9jb2wmJih0LmdhKFwic3RyZWFtUHJvdG9jb2xcIixyLmJzLk9zLDMpLHQubWEodGhpcy5zdHJlYW1Qcm90b2NvbCksdC55YSgpKSx0LndhKCksdC5UYSgpfSxoaXZlLnNuYXBzaG90cy5DbGllbnRJbmZvPWZ1bmN0aW9uKHQpe3RoaXMuY2xpZW50VHlwZT1udWxsLHRoaXMubWFqb3JWZXJzaW9uPW51bGwsdGhpcy5taW5vclZlcnNpb249bnVsbCx0aGlzLnBhdGNoVmVyc2lvbj1udWxsLHQmJih2b2lkIDAhPT10LmNsaWVudFR5cGUmJih0aGlzLmNsaWVudFR5cGU9dC5jbGllbnRUeXBlKSx2b2lkIDAhPT10Lm1ham9yVmVyc2lvbiYmKHRoaXMubWFqb3JWZXJzaW9uPXQubWFqb3JWZXJzaW9uKSx2b2lkIDAhPT10Lm1pbm9yVmVyc2lvbiYmKHRoaXMubWlub3JWZXJzaW9uPXQubWlub3JWZXJzaW9uKSx2b2lkIDAhPT10LnBhdGNoVmVyc2lvbiYmKHRoaXMucGF0Y2hWZXJzaW9uPXQucGF0Y2hWZXJzaW9uKSl9LGhpdmUuc25hcHNob3RzLkNsaWVudEluZm8ucHJvdG90eXBlPXt9LGhpdmUuc25hcHNob3RzLkNsaWVudEluZm8ucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7Zm9yKHQuSGMoKTs7KXt2YXIgZT10LnNhKCksaT0oZS5CYyxlLmFhKSxuPWUuY2E7aWYoaT09ci5icy5FcylicmVhaztzd2l0Y2gobil7Y2FzZSAxOmk9PXIuYnMuT3M/dGhpcy5jbGllbnRUeXBlPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMjppPT1yLmJzLkJZVEU/dGhpcy5tYWpvclZlcnNpb249dC56YygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzOmk9PXIuYnMuQllURT90aGlzLm1pbm9yVmVyc2lvbj10LnpjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDQ6aT09ci5icy5Dcz90aGlzLnBhdGNoVmVyc2lvbj10LldjKCkudmFsdWU6dC5wYShpKTticmVhaztkZWZhdWx0OnQucGEoaSl9dC5sYSgpfXQuZGEoKX0saGl2ZS5zbmFwc2hvdHMuQ2xpZW50SW5mby5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dC5mYShcIkNsaWVudEluZm9cIiksbnVsbCE9PXRoaXMuY2xpZW50VHlwZSYmdm9pZCAwIT09dGhpcy5jbGllbnRUeXBlJiYodC5nYShcImNsaWVudFR5cGVcIixyLmJzLk9zLDEpLHQubWEodGhpcy5jbGllbnRUeXBlKSx0LnlhKCkpLG51bGwhPT10aGlzLm1ham9yVmVyc2lvbiYmdm9pZCAwIT09dGhpcy5tYWpvclZlcnNpb24mJih0LmdhKFwibWFqb3JWZXJzaW9uXCIsci5icy5CWVRFLDIpLHQuUmModGhpcy5tYWpvclZlcnNpb24pLHQueWEoKSksbnVsbCE9PXRoaXMubWlub3JWZXJzaW9uJiZ2b2lkIDAhPT10aGlzLm1pbm9yVmVyc2lvbiYmKHQuZ2EoXCJtaW5vclZlcnNpb25cIixyLmJzLkJZVEUsMyksdC5SYyh0aGlzLm1pbm9yVmVyc2lvbiksdC55YSgpKSxudWxsIT09dGhpcy5wYXRjaFZlcnNpb24mJnZvaWQgMCE9PXRoaXMucGF0Y2hWZXJzaW9uJiYodC5nYShcInBhdGNoVmVyc2lvblwiLHIuYnMuQ3MsNCksdC5rYyh0aGlzLnBhdGNoVmVyc2lvbiksdC55YSgpKSx0LndhKCksdC5UYSgpfSxoaXZlLnNuYXBzaG90cy5BZ2VudEluZm89ZnVuY3Rpb24odCl7dGhpcy5maXJzdFRpZXJCaXRyYXRlcz1udWxsLHRoaXMuc2Vjb25kVGllckJpdHJhdGVzPW51bGwsdCYmKHZvaWQgMCE9PXQuZmlyc3RUaWVyQml0cmF0ZXMmJih0aGlzLmZpcnN0VGllckJpdHJhdGVzPXQuZmlyc3RUaWVyQml0cmF0ZXMpLHZvaWQgMCE9PXQuc2Vjb25kVGllckJpdHJhdGVzJiYodGhpcy5zZWNvbmRUaWVyQml0cmF0ZXM9dC5zZWNvbmRUaWVyQml0cmF0ZXMpKX0saGl2ZS5zbmFwc2hvdHMuQWdlbnRJbmZvLnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5BZ2VudEluZm8ucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7Zm9yKHQuSGMoKTs7KXt2YXIgZT10LnNhKCksaT0oZS5CYyxlLmFhKSxuPWUuY2E7aWYoaT09ci5icy5FcylicmVhaztzd2l0Y2gobil7Y2FzZSAxOmlmKGk9PXIuYnMuRnMpe3ZhciBvLHM9MDt0aGlzLmZpcnN0VGllckJpdHJhdGVzPVtdO3ZhciBhPTA7bz10LkpjKCksYT1vLlFjLHM9by5zaXplO2Zvcih2YXIgYz0wO2M8czsrK2Mpe3ZhciBoPW51bGw7aD10LnVhKCkudmFsdWUsdGhpcy5maXJzdFRpZXJCaXRyYXRlcy5wdXNoKGgpfXQuS2MoKX1lbHNlIHQucGEoaSk7YnJlYWs7Y2FzZSAyOmlmKGk9PXIuYnMuRnMpe3ZhciBwLHU9MDt0aGlzLnNlY29uZFRpZXJCaXRyYXRlcz1bXTt2YXIgbD0wO3A9dC5KYygpLGw9cC5RYyx1PXAuc2l6ZTtmb3IodmFyIGQ9MDtkPHU7KytkKXt2YXIgZj1udWxsO2Y9dC51YSgpLnZhbHVlLHRoaXMuc2Vjb25kVGllckJpdHJhdGVzLnB1c2goZil9dC5LYygpfWVsc2UgdC5wYShpKTticmVhaztkZWZhdWx0OnQucGEoaSl9dC5sYSgpfXQuZGEoKX0saGl2ZS5zbmFwc2hvdHMuQWdlbnRJbmZvLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXtcbiAgaWYodC5mYShcIkFnZW50SW5mb1wiKSxudWxsIT09dGhpcy5maXJzdFRpZXJCaXRyYXRlcyYmdm9pZCAwIT09dGhpcy5maXJzdFRpZXJCaXRyYXRlcyl7dC5nYShcImZpcnN0VGllckJpdHJhdGVzXCIsci5icy5GcywxKSx0LmJjKHIuYnMuT3MsdGhpcy5maXJzdFRpZXJCaXRyYXRlcy5sZW5ndGgpO2Zvcih2YXIgZSBpbiB0aGlzLmZpcnN0VGllckJpdHJhdGVzKXRoaXMuZmlyc3RUaWVyQml0cmF0ZXMuaGFzT3duUHJvcGVydHkoZSkmJihlPXRoaXMuZmlyc3RUaWVyQml0cmF0ZXNbZV0sdC5tYShlKSk7dC5FYygpLHQueWEoKX1pZihudWxsIT09dGhpcy5zZWNvbmRUaWVyQml0cmF0ZXMmJnZvaWQgMCE9PXRoaXMuc2Vjb25kVGllckJpdHJhdGVzKXt0LmdhKFwic2Vjb25kVGllckJpdHJhdGVzXCIsci5icy5GcywyKSx0LmJjKHIuYnMuT3MsdGhpcy5zZWNvbmRUaWVyQml0cmF0ZXMubGVuZ3RoKTtmb3IodmFyIGkgaW4gdGhpcy5zZWNvbmRUaWVyQml0cmF0ZXMpdGhpcy5zZWNvbmRUaWVyQml0cmF0ZXMuaGFzT3duUHJvcGVydHkoaSkmJihpPXRoaXMuc2Vjb25kVGllckJpdHJhdGVzW2ldLHQubWEoaSkpO3QuRWMoKSx0LnlhKCl9dC53YSgpLHQuVGEoKX0saGl2ZS5zbmFwc2hvdHMuVHJhZmZpY0tleT1mdW5jdGlvbih0KXt0aGlzLmJpdHJhdGU9bnVsbCx0aGlzLkFTPW51bGwsdGhpcy5wYXJ0bmVyR3VpZD1udWxsLHQmJih2b2lkIDAhPT10LmJpdHJhdGUmJih0aGlzLmJpdHJhdGU9dC5iaXRyYXRlKSx2b2lkIDAhPT10LkFTJiYodGhpcy5BUz10LkFTKSx2b2lkIDAhPT10LnBhcnRuZXJHdWlkJiYodGhpcy5wYXJ0bmVyR3VpZD10LnBhcnRuZXJHdWlkKSl9LGhpdmUuc25hcHNob3RzLlRyYWZmaWNLZXkucHJvdG90eXBlPXt9LGhpdmUuc25hcHNob3RzLlRyYWZmaWNLZXkucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7Zm9yKHQuSGMoKTs7KXt2YXIgZT10LnNhKCksaT0oZS5CYyxlLmFhKSxuPWUuY2E7aWYoaT09ci5icy5FcylicmVhaztzd2l0Y2gobil7Y2FzZSAxOmk9PXIuYnMuT3M/dGhpcy5iaXRyYXRlPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMjppPT1yLmJzLk9zP3RoaXMuQVM9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzOmk9PXIuYnMuQXM/dGhpcy5wYXJ0bmVyR3VpZD10LmhhKCkudmFsdWU6dC5wYShpKTticmVhaztkZWZhdWx0OnQucGEoaSl9dC5sYSgpfXQuZGEoKX0saGl2ZS5zbmFwc2hvdHMuVHJhZmZpY0tleS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dC5mYShcIlRyYWZmaWNLZXlcIiksbnVsbCE9PXRoaXMuYml0cmF0ZSYmdm9pZCAwIT09dGhpcy5iaXRyYXRlJiYodC5nYShcImJpdHJhdGVcIixyLmJzLk9zLDEpLHQubWEodGhpcy5iaXRyYXRlKSx0LnlhKCkpLG51bGwhPT10aGlzLkFTJiZ2b2lkIDAhPT10aGlzLkFTJiYodC5nYShcIkFTXCIsci5icy5PcywyKSx0Lm1hKHRoaXMuQVMpLHQueWEoKSksbnVsbCE9PXRoaXMucGFydG5lckd1aWQmJnZvaWQgMCE9PXRoaXMucGFydG5lckd1aWQmJih0LmdhKFwicGFydG5lckd1aWRcIixyLmJzLkFzLDMpLHQudmEodGhpcy5wYXJ0bmVyR3VpZCksdC55YSgpKSx0LndhKCksdC5UYSgpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyS2V5PWZ1bmN0aW9uKHQpe3RoaXMuYml0cmF0ZT1udWxsLHRoaXMuQVM9bnVsbCx0aGlzLnBhcnRuZXJHdWlkPW51bGwsdCYmKHZvaWQgMCE9PXQuYml0cmF0ZSYmKHRoaXMuYml0cmF0ZT10LmJpdHJhdGUpLHZvaWQgMCE9PXQuQVMmJih0aGlzLkFTPXQuQVMpLHZvaWQgMCE9PXQucGFydG5lckd1aWQmJih0aGlzLnBhcnRuZXJHdWlkPXQucGFydG5lckd1aWQpKX0saGl2ZS5zbmFwc2hvdHMuUGFydG5lcktleS5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuUGFydG5lcktleS5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXtmb3IodC5IYygpOzspe3ZhciBlPXQuc2EoKSxpPShlLkJjLGUuYWEpLG49ZS5jYTtpZihpPT1yLmJzLkVzKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6aT09ci5icy5Pcz90aGlzLmJpdHJhdGU9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAyOmk9PXIuYnMuT3M/dGhpcy5BUz10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDM6aT09ci5icy5Bcz90aGlzLnBhcnRuZXJHdWlkPXQuaGEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2RlZmF1bHQ6dC5wYShpKX10LmxhKCl9dC5kYSgpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyS2V5LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0LmZhKFwiUGFydG5lcktleVwiKSxudWxsIT09dGhpcy5iaXRyYXRlJiZ2b2lkIDAhPT10aGlzLmJpdHJhdGUmJih0LmdhKFwiYml0cmF0ZVwiLHIuYnMuT3MsMSksdC5tYSh0aGlzLmJpdHJhdGUpLHQueWEoKSksbnVsbCE9PXRoaXMuQVMmJnZvaWQgMCE9PXRoaXMuQVMmJih0LmdhKFwiQVNcIixyLmJzLk9zLDIpLHQubWEodGhpcy5BUyksdC55YSgpKSxudWxsIT09dGhpcy5wYXJ0bmVyR3VpZCYmdm9pZCAwIT09dGhpcy5wYXJ0bmVyR3VpZCYmKHQuZ2EoXCJwYXJ0bmVyR3VpZFwiLHIuYnMuQXMsMyksdC52YSh0aGlzLnBhcnRuZXJHdWlkKSx0LnlhKCkpLHQud2EoKSx0LlRhKCl9LGhpdmUuc25hcHNob3RzLlBsYXllcj1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlcmluZ049bnVsbCx0aGlzLmJ1ZmZlcmluZ01zPW51bGwsdGhpcy5pbml0QnVmZmVyaW5nTj1udWxsLHRoaXMuaW5pdEJ1ZmZlcmluZ01zPW51bGwsdGhpcy5zZWVrQnVmZmVyaW5nTj1udWxsLHRoaXMuc2Vla0J1ZmZlcmluZ01zPW51bGwsdGhpcy5wbGF5ZXJCdWZmZXJNcz1udWxsLHQmJih2b2lkIDAhPT10LmJ1ZmZlcmluZ04mJih0aGlzLmJ1ZmZlcmluZ049dC5idWZmZXJpbmdOKSx2b2lkIDAhPT10LmJ1ZmZlcmluZ01zJiYodGhpcy5idWZmZXJpbmdNcz10LmJ1ZmZlcmluZ01zKSx2b2lkIDAhPT10LmluaXRCdWZmZXJpbmdOJiYodGhpcy5pbml0QnVmZmVyaW5nTj10LmluaXRCdWZmZXJpbmdOKSx2b2lkIDAhPT10LmluaXRCdWZmZXJpbmdNcyYmKHRoaXMuaW5pdEJ1ZmZlcmluZ01zPXQuaW5pdEJ1ZmZlcmluZ01zKSx2b2lkIDAhPT10LnNlZWtCdWZmZXJpbmdOJiYodGhpcy5zZWVrQnVmZmVyaW5nTj10LnNlZWtCdWZmZXJpbmdOKSx2b2lkIDAhPT10LnNlZWtCdWZmZXJpbmdNcyYmKHRoaXMuc2Vla0J1ZmZlcmluZ01zPXQuc2Vla0J1ZmZlcmluZ01zKSx2b2lkIDAhPT10LnBsYXllckJ1ZmZlck1zJiYodGhpcy5wbGF5ZXJCdWZmZXJNcz10LnBsYXllckJ1ZmZlck1zKSl9LGhpdmUuc25hcHNob3RzLlBsYXllci5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuUGxheWVyLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe2Zvcih0LkhjKCk7Oyl7dmFyIGU9dC5zYSgpLGk9KGUuQmMsZS5hYSksbj1lLmNhO2lmKGk9PXIuYnMuRXMpYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTppPT1yLmJzLkNzP3RoaXMuYnVmZmVyaW5nTj10LldjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI6aT09ci5icy5Pcz90aGlzLmJ1ZmZlcmluZ01zPXQudWEoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMzppPT1yLmJzLkNzP3RoaXMuaW5pdEJ1ZmZlcmluZ049dC5XYygpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA0Omk9PXIuYnMuT3M/dGhpcy5pbml0QnVmZmVyaW5nTXM9dC51YSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSA1Omk9PXIuYnMuQ3M/dGhpcy5zZWVrQnVmZmVyaW5nTj10LldjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDY6aT09ci5icy5Pcz90aGlzLnNlZWtCdWZmZXJpbmdNcz10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDM2Omk9PXIuYnMuT3M/dGhpcy5wbGF5ZXJCdWZmZXJNcz10LnVhKCkudmFsdWU6dC5wYShpKTticmVhaztkZWZhdWx0OnQucGEoaSl9dC5sYSgpfXQuZGEoKX0saGl2ZS5zbmFwc2hvdHMuUGxheWVyLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0LmZhKFwiUGxheWVyXCIpLG51bGwhPT10aGlzLmJ1ZmZlcmluZ04mJnZvaWQgMCE9PXRoaXMuYnVmZmVyaW5nTiYmKHQuZ2EoXCJidWZmZXJpbmdOXCIsci5icy5DcywxKSx0LmtjKHRoaXMuYnVmZmVyaW5nTiksdC55YSgpKSxudWxsIT09dGhpcy5idWZmZXJpbmdNcyYmdm9pZCAwIT09dGhpcy5idWZmZXJpbmdNcyYmKHQuZ2EoXCJidWZmZXJpbmdNc1wiLHIuYnMuT3MsMiksdC5tYSh0aGlzLmJ1ZmZlcmluZ01zKSx0LnlhKCkpLG51bGwhPT10aGlzLmluaXRCdWZmZXJpbmdOJiZ2b2lkIDAhPT10aGlzLmluaXRCdWZmZXJpbmdOJiYodC5nYShcImluaXRCdWZmZXJpbmdOXCIsci5icy5DcywzKSx0LmtjKHRoaXMuaW5pdEJ1ZmZlcmluZ04pLHQueWEoKSksbnVsbCE9PXRoaXMuaW5pdEJ1ZmZlcmluZ01zJiZ2b2lkIDAhPT10aGlzLmluaXRCdWZmZXJpbmdNcyYmKHQuZ2EoXCJpbml0QnVmZmVyaW5nTXNcIixyLmJzLk9zLDQpLHQubWEodGhpcy5pbml0QnVmZmVyaW5nTXMpLHQueWEoKSksbnVsbCE9PXRoaXMuc2Vla0J1ZmZlcmluZ04mJnZvaWQgMCE9PXRoaXMuc2Vla0J1ZmZlcmluZ04mJih0LmdhKFwic2Vla0J1ZmZlcmluZ05cIixyLmJzLkNzLDUpLHQua2ModGhpcy5zZWVrQnVmZmVyaW5nTiksdC55YSgpKSxudWxsIT09dGhpcy5zZWVrQnVmZmVyaW5nTXMmJnZvaWQgMCE9PXRoaXMuc2Vla0J1ZmZlcmluZ01zJiYodC5nYShcInNlZWtCdWZmZXJpbmdNc1wiLHIuYnMuT3MsNiksdC5tYSh0aGlzLnNlZWtCdWZmZXJpbmdNcyksdC55YSgpKSxudWxsIT09dGhpcy5wbGF5ZXJCdWZmZXJNcyYmdm9pZCAwIT09dGhpcy5wbGF5ZXJCdWZmZXJNcyYmKHQuZ2EoXCJwbGF5ZXJCdWZmZXJNc1wiLHIuYnMuT3MsMzYpLHQubWEodGhpcy5wbGF5ZXJCdWZmZXJNcyksdC55YSgpKSx0LndhKCksdC5UYSgpfSxoaXZlLnNuYXBzaG90cy5NZXRyaWNTbmFwc2hvdD1mdW5jdGlvbih0KXt0aGlzLnRpbWVzdGFtcD1udWxsLHRoaXMuZ3VpZD1udWxsLHRoaXMuZXZlbnRJZD1udWxsLHRoaXMuc3RyZWFtSW5mbz1udWxsLHRoaXMubWV0cmljcz1udWxsLHRoaXMudHJhZmZpYz1udWxsLHRoaXMuc25hcHNob3RJbmZvPW51bGwsdGhpcy5hZ2VudEluZm89bnVsbCx0aGlzLmNvbm5JbmZvPW51bGwsdGhpcy5wYXJ0bmVycz1udWxsLHRoaXMucGxheWVyPW51bGwsdGhpcy5jbGllbnQ9bnVsbCx0aGlzLnNlc3Npb25JZD1udWxsLHQmJih2b2lkIDAhPT10LnRpbWVzdGFtcCYmKHRoaXMudGltZXN0YW1wPXQudGltZXN0YW1wKSx2b2lkIDAhPT10Lmd1aWQmJih0aGlzLmd1aWQ9dC5ndWlkKSx2b2lkIDAhPT10LmV2ZW50SWQmJih0aGlzLmV2ZW50SWQ9dC5ldmVudElkKSx2b2lkIDAhPT10LnN0cmVhbUluZm8mJih0aGlzLnN0cmVhbUluZm89dC5zdHJlYW1JbmZvKSx2b2lkIDAhPT10Lm1ldHJpY3MmJih0aGlzLm1ldHJpY3M9dC5tZXRyaWNzKSx2b2lkIDAhPT10LnRyYWZmaWMmJih0aGlzLnRyYWZmaWM9dC50cmFmZmljKSx2b2lkIDAhPT10LnNuYXBzaG90SW5mbyYmKHRoaXMuc25hcHNob3RJbmZvPXQuc25hcHNob3RJbmZvKSx2b2lkIDAhPT10LmFnZW50SW5mbyYmKHRoaXMuYWdlbnRJbmZvPXQuYWdlbnRJbmZvKSx2b2lkIDAhPT10LmNvbm5JbmZvJiYodGhpcy5jb25uSW5mbz10LmNvbm5JbmZvKSx2b2lkIDAhPT10LnBhcnRuZXJzJiYodGhpcy5wYXJ0bmVycz10LnBhcnRuZXJzKSx2b2lkIDAhPT10LnBsYXllciYmKHRoaXMucGxheWVyPXQucGxheWVyKSx2b2lkIDAhPT10LmNsaWVudCYmKHRoaXMuY2xpZW50PXQuY2xpZW50KSx2b2lkIDAhPT10LnNlc3Npb25JZCYmKHRoaXMuc2Vzc2lvbklkPXQuc2Vzc2lvbklkKSl9LGhpdmUuc25hcHNob3RzLk1ldHJpY1NuYXBzaG90LnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5NZXRyaWNTbmFwc2hvdC5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXtmb3IodC5IYygpOzspe3ZhciBlPXQuc2EoKSxpPShlLkJjLGUuYWEpLG49ZS5jYTtpZihpPT1yLmJzLkVzKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6aT09ci5icy5Qcz90aGlzLnRpbWVzdGFtcD10LiRjKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDI6aT09ci5icy5Bcz90aGlzLmd1aWQ9dC5oYSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7Y2FzZSAzOmk9PXIuYnMueHM/KHRoaXMuZXZlbnRJZD1uZXcgRXZlbnRJZCx0aGlzLmV2ZW50SWQucmVhZCh0KSk6dC5wYShpKTticmVhaztjYXNlIDQ6aT09ci5icy54cz8odGhpcy5zdHJlYW1JbmZvPW5ldyBoaXZlLnNuYXBzaG90cy5TdHJlYW1JbmZvLHRoaXMuc3RyZWFtSW5mby5yZWFkKHQpKTp0LnBhKGkpO2JyZWFrO2Nhc2UgNTppPT1yLmJzLnhzPyh0aGlzLm1ldHJpY3M9bmV3IGhpdmUuc25hcHNob3RzLk1ldHJpY3MsdGhpcy5tZXRyaWNzLnJlYWQodCkpOnQucGEoaSk7YnJlYWs7Y2FzZSA2OmlmKGk9PXIuYnMuQnMpe3ZhciBvLHM9MDt0aGlzLnRyYWZmaWM9e307dmFyIGE9MCxjPTA7bz10LkxjKCksYT1vLk1jLGM9by5qYyxzPW8uc2l6ZTtmb3IodmFyIGg9MDtoPHM7KytoKXtoPjAmJnQuTmMubGVuZ3RoPnQuUmFbdC5SYS5sZW5ndGgtMV0rMSYmdC5OYy5wb3AoKTt2YXIgcD1udWxsLHU9bnVsbDtwPW5ldyBoaXZlLnNuYXBzaG90cy5UcmFmZmljS2V5LHAucmVhZCh0KSx1PW5ldyBoaXZlLnNuYXBzaG90cy5UcmFmZmljLHUucmVhZCh0KSx0aGlzLnRyYWZmaWNbcF09dX10LlVjKCl9ZWxzZSB0LnBhKGkpO2JyZWFrO2Nhc2UgNzppPT1yLmJzLnhzPyh0aGlzLnNuYXBzaG90SW5mbz1uZXcgU25hcHNob3RJbmZvLHRoaXMuc25hcHNob3RJbmZvLnJlYWQodCkpOnQucGEoaSk7YnJlYWs7Y2FzZSA4Omk9PXIuYnMueHM/KHRoaXMuYWdlbnRJbmZvPW5ldyBoaXZlLnNuYXBzaG90cy5BZ2VudEluZm8sdGhpcy5hZ2VudEluZm8ucmVhZCh0KSk6dC5wYShpKTticmVhaztjYXNlIDk6aT09ci5icy54cz8odGhpcy5jb25uSW5mbz1uZXcgaGl2ZS5zbmFwc2hvdHMuQ29ubmVjdGl2aXR5SW5mbyx0aGlzLmNvbm5JbmZvLnJlYWQodCkpOnQucGEoaSk7YnJlYWs7Y2FzZSAxMDppZihpPT1yLmJzLkJzKXt2YXIgbCxkPTA7dGhpcy5wYXJ0bmVycz17fTt2YXIgZj0wLGc9MDtsPXQuTGMoKSxmPWwuTWMsZz1sLmpjLGQ9bC5zaXplO2Zvcih2YXIgdj0wO3Y8ZDsrK3Ype3Y+MCYmdC5OYy5sZW5ndGg+dC5SYVt0LlJhLmxlbmd0aC0xXSsxJiZ0Lk5jLnBvcCgpO3ZhciB5PW51bGwsbT1udWxsO3k9bmV3IGhpdmUuc25hcHNob3RzLlBhcnRuZXJLZXkseS5yZWFkKHQpLG09bmV3IGhpdmUuc25hcHNob3RzLlBhcnRuZXIsbS5yZWFkKHQpLHRoaXMucGFydG5lcnNbeV09bX10LlVjKCl9ZWxzZSB0LnBhKGkpO2JyZWFrO2Nhc2UgMTE6aT09ci5icy54cz8odGhpcy5wbGF5ZXI9bmV3IGhpdmUuc25hcHNob3RzLlBsYXllcix0aGlzLnBsYXllci5yZWFkKHQpKTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTI6aT09ci5icy54cz8odGhpcy5jbGllbnQ9bmV3IGhpdmUuc25hcHNob3RzLkNsaWVudEluZm8sdGhpcy5jbGllbnQucmVhZCh0KSk6dC5wYShpKTticmVhaztjYXNlIDEzOmk9PXIuYnMuQXM/dGhpcy5zZXNzaW9uSWQ9dC5oYSgpLnZhbHVlOnQucGEoaSk7YnJlYWs7ZGVmYXVsdDp0LnBhKGkpfXQubGEoKX10LmRhKCl9LGhpdmUuc25hcHNob3RzLk1ldHJpY1NuYXBzaG90LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXtpZih0LmZhKFwiTWV0cmljU25hcHNob3RcIiksbnVsbCE9PXRoaXMudGltZXN0YW1wJiZ2b2lkIDAhPT10aGlzLnRpbWVzdGFtcCYmKHQuZ2EoXCJ0aW1lc3RhbXBcIixyLmJzLlBzLDEpLHQuQ2ModGhpcy50aW1lc3RhbXApLHQueWEoKSksbnVsbCE9PXRoaXMuZ3VpZCYmdm9pZCAwIT09dGhpcy5ndWlkJiYodC5nYShcImd1aWRcIixyLmJzLkFzLDIpLHQudmEodGhpcy5ndWlkKSx0LnlhKCkpLG51bGwhPT10aGlzLmV2ZW50SWQmJnZvaWQgMCE9PXRoaXMuZXZlbnRJZCYmKHQuZ2EoXCJldmVudElkXCIsci5icy54cywzKSx0aGlzLmV2ZW50SWQud3JpdGUodCksdC55YSgpKSxudWxsIT09dGhpcy5zdHJlYW1JbmZvJiZ2b2lkIDAhPT10aGlzLnN0cmVhbUluZm8mJih0LmdhKFwic3RyZWFtSW5mb1wiLHIuYnMueHMsNCksdGhpcy5zdHJlYW1JbmZvLndyaXRlKHQpLHQueWEoKSksbnVsbCE9PXRoaXMubWV0cmljcyYmdm9pZCAwIT09dGhpcy5tZXRyaWNzJiYodC5nYShcIm1ldHJpY3NcIixyLmJzLnhzLDUpLHRoaXMubWV0cmljcy53cml0ZSh0KSx0LnlhKCkpLG51bGwhPT10aGlzLnRyYWZmaWMmJnZvaWQgMCE9PXRoaXMudHJhZmZpYyl7dC5nYShcInRyYWZmaWNcIixyLmJzLkJzLDYpLHQubWMoci5icy54cyxyLmJzLnhzLHIuUXModGhpcy50cmFmZmljKSk7Zm9yKHZhciBlPTA7ZTx0aGlzLnRyYWZmaWMubGVuZ3RoO2UrKyl7dmFyIGk9dGhpcy50cmFmZmljW2VdLG49aS5rZXksbz1pLnZhbHVlO24ud3JpdGUodCksby53cml0ZSh0KX10LndjKCksdC55YSgpfWlmKG51bGwhPT10aGlzLnNuYXBzaG90SW5mbyYmdm9pZCAwIT09dGhpcy5zbmFwc2hvdEluZm8mJih0LmdhKFwic25hcHNob3RJbmZvXCIsci5icy54cyw3KSx0aGlzLnNuYXBzaG90SW5mby53cml0ZSh0KSx0LnlhKCkpLG51bGwhPT10aGlzLmFnZW50SW5mbyYmdm9pZCAwIT09dGhpcy5hZ2VudEluZm8mJih0LmdhKFwiYWdlbnRJbmZvXCIsci5icy54cyw4KSx0aGlzLmFnZW50SW5mby53cml0ZSh0KSx0LnlhKCkpLG51bGwhPT10aGlzLmNvbm5JbmZvJiZ2b2lkIDAhPT10aGlzLmNvbm5JbmZvJiYodC5nYShcImNvbm5JbmZvXCIsci5icy54cyw5KSx0aGlzLmNvbm5JbmZvLndyaXRlKHQpLHQueWEoKSksbnVsbCE9PXRoaXMucGFydG5lcnMmJnZvaWQgMCE9PXRoaXMucGFydG5lcnMpe3QuZ2EoXCJwYXJ0bmVyc1wiLHIuYnMuQnMsMTApLHQubWMoci5icy54cyxyLmJzLnhzLHIuUXModGhpcy5wYXJ0bmVycykpO2Zvcih2YXIgZT0wO2U8dGhpcy5wYXJ0bmVycy5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLnBhcnRuZXJzW2VdLHM9aS5rZXksYT1pLnZhbHVlO3Mud3JpdGUodCksYS53cml0ZSh0KX10LndjKCksdC55YSgpfW51bGwhPT10aGlzLnBsYXllciYmdm9pZCAwIT09dGhpcy5wbGF5ZXImJih0LmdhKFwicGxheWVyXCIsci5icy54cywxMSksdGhpcy5wbGF5ZXIud3JpdGUodCksdC55YSgpKSxudWxsIT09dGhpcy5jbGllbnQmJnZvaWQgMCE9PXRoaXMuY2xpZW50JiYodC5nYShcImNsaWVudFwiLHIuYnMueHMsMTIpLHRoaXMuY2xpZW50LndyaXRlKHQpLHQueWEoKSksbnVsbCE9PXRoaXMuc2Vzc2lvbklkJiZ2b2lkIDAhPT10aGlzLnNlc3Npb25JZCYmKHQuZ2EoXCJzZXNzaW9uSWRcIixyLmJzLkFzLDEzKSx0LnZhKHRoaXMuc2Vzc2lvbklkKSx0LnlhKCkpLHQud2EoKSx0LlRhKCl9LGhpdmUuc25hcHNob3RzLkpzb25NZXRyaWNTbmFwc2hvdD1mdW5jdGlvbih0KXt0aGlzLnRpbWVzdGFtcD1udWxsLHRoaXMuZ3VpZD1udWxsLHRoaXMuZXZlbnRJZD1udWxsLHRoaXMuc3RyZWFtSW5mbz1udWxsLHRoaXMubWV0cmljcz1udWxsLHRoaXMudHJhZmZpYz1udWxsLHRoaXMuc25hcHNob3RJbmZvPW51bGwsdGhpcy5hZ2VudEluZm89bnVsbCx0aGlzLmNvbm5JbmZvPW51bGwsdGhpcy5wYXJ0bmVycz1udWxsLHRoaXMucGxheWVyPW51bGwsdGhpcy5jbGllbnQ9bnVsbCx0aGlzLnNlc3Npb25JZD1udWxsLHQmJih2b2lkIDAhPT10LnRpbWVzdGFtcCYmKHRoaXMudGltZXN0YW1wPXQudGltZXN0YW1wKSx2b2lkIDAhPT10Lmd1aWQmJih0aGlzLmd1aWQ9dC5ndWlkKSx2b2lkIDAhPT10LmV2ZW50SWQmJih0aGlzLmV2ZW50SWQ9dC5ldmVudElkKSx2b2lkIDAhPT10LnN0cmVhbUluZm8mJih0aGlzLnN0cmVhbUluZm89dC5zdHJlYW1JbmZvKSx2b2lkIDAhPT10Lm1ldHJpY3MmJih0aGlzLm1ldHJpY3M9dC5tZXRyaWNzKSx2b2lkIDAhPT10LnRyYWZmaWMmJih0aGlzLnRyYWZmaWM9dC50cmFmZmljKSx2b2lkIDAhPT10LnNuYXBzaG90SW5mbyYmKHRoaXMuc25hcHNob3RJbmZvPXQuc25hcHNob3RJbmZvKSx2b2lkIDAhPT10LmFnZW50SW5mbyYmKHRoaXMuYWdlbnRJbmZvPXQuYWdlbnRJbmZvKSx2b2lkIDAhPT10LmNvbm5JbmZvJiYodGhpcy5jb25uSW5mbz10LmNvbm5JbmZvKSx2b2lkIDAhPT10LnBhcnRuZXJzJiYodGhpcy5wYXJ0bmVycz10LnBhcnRuZXJzKSx2b2lkIDAhPT10LnBsYXllciYmKHRoaXMucGxheWVyPXQucGxheWVyKSx2b2lkIDAhPT10LmNsaWVudCYmKHRoaXMuY2xpZW50PXQuY2xpZW50KSx2b2lkIDAhPT10LnNlc3Npb25JZCYmKHRoaXMuc2Vzc2lvbklkPXQuc2Vzc2lvbklkKSl9LGhpdmUuc25hcHNob3RzLkpzb25NZXRyaWNTbmFwc2hvdC5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuSnNvbk1ldHJpY1NuYXBzaG90LnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe2Zvcih0LkhjKCk7Oyl7dmFyIGU9dC5zYSgpLGk9KGUuQmMsZS5hYSksbj1lLmNhO2lmKGk9PXIuYnMuRXMpYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTppPT1yLmJzLlBzP3RoaXMudGltZXN0YW1wPXQuJGMoKS52YWx1ZTp0LnBhKGkpO2JyZWFrO2Nhc2UgMjppPT1yLmJzLkFzP3RoaXMuZ3VpZD10LmhhKCkudmFsdWU6dC5wYShpKTticmVhaztjYXNlIDM6aT09ci5icy54cz8odGhpcy5ldmVudElkPW5ldyBFdmVudElkLHRoaXMuZXZlbnRJZC5yZWFkKHQpKTp0LnBhKGkpO2JyZWFrO2Nhc2UgNDppPT1yLmJzLnhzPyh0aGlzLnN0cmVhbUluZm89bmV3IGhpdmUuc25hcHNob3RzLlN0cmVhbUluZm8sdGhpcy5zdHJlYW1JbmZvLnJlYWQodCkpOnQucGEoaSk7YnJlYWs7Y2FzZSA1Omk9PXIuYnMueHM/KHRoaXMubWV0cmljcz1uZXcgaGl2ZS5zbmFwc2hvdHMuTWV0cmljcyx0aGlzLm1ldHJpY3MucmVhZCh0KSk6dC5wYShpKTticmVhaztjYXNlIDY6aWYoaT09ci5icy5Ccyl7dmFyIG8scz0wO3RoaXMudHJhZmZpYz17fTt2YXIgYT0wLGM9MDtvPXQuTGMoKSxhPW8uTWMsYz1vLmpjLHM9by5zaXplO2Zvcih2YXIgaD0wO2g8czsrK2gpe2g+MCYmdC5OYy5sZW5ndGg+dC5SYVt0LlJhLmxlbmd0aC0xXSsxJiZ0Lk5jLnBvcCgpO3ZhciBwPW51bGwsdT1udWxsO3A9dC5oYSgpLnZhbHVlLHU9bmV3IGhpdmUuc25hcHNob3RzLlRyYWZmaWMsdS5yZWFkKHQpLHRoaXMudHJhZmZpY1twXT11fXQuVWMoKX1lbHNlIHQucGEoaSk7YnJlYWs7Y2FzZSA3Omk9PXIuYnMueHM/KHRoaXMuc25hcHNob3RJbmZvPW5ldyBTbmFwc2hvdEluZm8sdGhpcy5zbmFwc2hvdEluZm8ucmVhZCh0KSk6dC5wYShpKTticmVhaztjYXNlIDg6aT09ci5icy54cz8odGhpcy5hZ2VudEluZm89bmV3IGhpdmUuc25hcHNob3RzLkFnZW50SW5mbyx0aGlzLmFnZW50SW5mby5yZWFkKHQpKTp0LnBhKGkpO2JyZWFrO2Nhc2UgOTppPT1yLmJzLnhzPyh0aGlzLmNvbm5JbmZvPW5ldyBoaXZlLnNuYXBzaG90cy5Db25uZWN0aXZpdHlJbmZvLHRoaXMuY29ubkluZm8ucmVhZCh0KSk6dC5wYShpKTticmVhaztjYXNlIDEwOmlmKGk9PXIuYnMuQnMpe3ZhciBsLGQ9MDt0aGlzLnBhcnRuZXJzPXt9O3ZhciBmPTAsZz0wO2w9dC5MYygpLGY9bC5NYyxnPWwuamMsZD1sLnNpemU7Zm9yKHZhciB2PTA7djxkOysrdil7dj4wJiZ0Lk5jLmxlbmd0aD50LlJhW3QuUmEubGVuZ3RoLTFdKzEmJnQuTmMucG9wKCk7dmFyIHk9bnVsbCxtPW51bGw7eT10LmhhKCkudmFsdWUsbT1uZXcgaGl2ZS5zbmFwc2hvdHMuUGFydG5lcixtLnJlYWQodCksdGhpcy5wYXJ0bmVyc1t5XT1tfXQuVWMoKX1lbHNlIHQucGEoaSk7YnJlYWs7Y2FzZSAxMTppPT1yLmJzLnhzPyh0aGlzLnBsYXllcj1uZXcgaGl2ZS5zbmFwc2hvdHMuUGxheWVyLHRoaXMucGxheWVyLnJlYWQodCkpOnQucGEoaSk7YnJlYWs7Y2FzZSAxMjppPT1yLmJzLnhzPyh0aGlzLmNsaWVudD1uZXcgaGl2ZS5zbmFwc2hvdHMuQ2xpZW50SW5mbyx0aGlzLmNsaWVudC5yZWFkKHQpKTp0LnBhKGkpO2JyZWFrO2Nhc2UgMTM6aT09ci5icy5Bcz90aGlzLnNlc3Npb25JZD10LmhhKCkudmFsdWU6dC5wYShpKTticmVhaztkZWZhdWx0OnQucGEoaSl9dC5sYSgpfXQuZGEoKX0saGl2ZS5zbmFwc2hvdHMuSnNvbk1ldHJpY1NuYXBzaG90LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXtpZih0LmZhKFwiSnNvbk1ldHJpY1NuYXBzaG90XCIpLG51bGwhPT10aGlzLnRpbWVzdGFtcCYmdm9pZCAwIT09dGhpcy50aW1lc3RhbXAmJih0LmdhKFwidGltZXN0YW1wXCIsci5icy5QcywxKSx0LkNjKHRoaXMudGltZXN0YW1wKSx0LnlhKCkpLG51bGwhPT10aGlzLmd1aWQmJnZvaWQgMCE9PXRoaXMuZ3VpZCYmKHQuZ2EoXCJndWlkXCIsci5icy5BcywyKSx0LnZhKHRoaXMuZ3VpZCksdC55YSgpKSxudWxsIT09dGhpcy5ldmVudElkJiZ2b2lkIDAhPT10aGlzLmV2ZW50SWQmJih0LmdhKFwiZXZlbnRJZFwiLHIuYnMueHMsMyksdGhpcy5ldmVudElkLndyaXRlKHQpLHQueWEoKSksbnVsbCE9PXRoaXMuc3RyZWFtSW5mbyYmdm9pZCAwIT09dGhpcy5zdHJlYW1JbmZvJiYodC5nYShcInN0cmVhbUluZm9cIixyLmJzLnhzLDQpLHRoaXMuc3RyZWFtSW5mby53cml0ZSh0KSx0LnlhKCkpLG51bGwhPT10aGlzLm1ldHJpY3MmJnZvaWQgMCE9PXRoaXMubWV0cmljcyYmKHQuZ2EoXCJtZXRyaWNzXCIsci5icy54cyw1KSx0aGlzLm1ldHJpY3Mud3JpdGUodCksdC55YSgpKSxudWxsIT09dGhpcy50cmFmZmljJiZ2b2lkIDAhPT10aGlzLnRyYWZmaWMpe3QuZ2EoXCJ0cmFmZmljXCIsci5icy5Ccyw2KSx0Lm1jKHIuYnMuQXMsci5icy54cyxyLlFzKHRoaXMudHJhZmZpYykpO2Zvcih2YXIgZSBpbiB0aGlzLnRyYWZmaWMpaWYodGhpcy50cmFmZmljLmhhc093blByb3BlcnR5KGUpKXt2YXIgaT10aGlzLnRyYWZmaWNbZV07dC52YShlKSxpLndyaXRlKHQpfXQud2MoKSx0LnlhKCl9aWYobnVsbCE9PXRoaXMuc25hcHNob3RJbmZvJiZ2b2lkIDAhPT10aGlzLnNuYXBzaG90SW5mbyYmKHQuZ2EoXCJzbmFwc2hvdEluZm9cIixyLmJzLnhzLDcpLHRoaXMuc25hcHNob3RJbmZvLndyaXRlKHQpLHQueWEoKSksbnVsbCE9PXRoaXMuYWdlbnRJbmZvJiZ2b2lkIDAhPT10aGlzLmFnZW50SW5mbyYmKHQuZ2EoXCJhZ2VudEluZm9cIixyLmJzLnhzLDgpLHRoaXMuYWdlbnRJbmZvLndyaXRlKHQpLHQueWEoKSksbnVsbCE9PXRoaXMuY29ubkluZm8mJnZvaWQgMCE9PXRoaXMuY29ubkluZm8mJih0LmdhKFwiY29ubkluZm9cIixyLmJzLnhzLDkpLHRoaXMuY29ubkluZm8ud3JpdGUodCksdC55YSgpKSxudWxsIT09dGhpcy5wYXJ0bmVycyYmdm9pZCAwIT09dGhpcy5wYXJ0bmVycyl7dC5nYShcInBhcnRuZXJzXCIsci5icy5CcywxMCksdC5tYyhyLmJzLkFzLHIuYnMueHMsci5Rcyh0aGlzLnBhcnRuZXJzKSk7Zm9yKHZhciBuIGluIHRoaXMucGFydG5lcnMpaWYodGhpcy5wYXJ0bmVycy5oYXNPd25Qcm9wZXJ0eShuKSl7dmFyIG89dGhpcy5wYXJ0bmVyc1tuXTt0LnZhKG4pLG8ud3JpdGUodCl9dC53YygpLHQueWEoKX1udWxsIT09dGhpcy5wbGF5ZXImJnZvaWQgMCE9PXRoaXMucGxheWVyJiYodC5nYShcInBsYXllclwiLHIuYnMueHMsMTEpLHRoaXMucGxheWVyLndyaXRlKHQpLHQueWEoKSksbnVsbCE9PXRoaXMuY2xpZW50JiZ2b2lkIDAhPT10aGlzLmNsaWVudCYmKHQuZ2EoXCJjbGllbnRcIixyLmJzLnhzLDEyKSx0aGlzLmNsaWVudC53cml0ZSh0KSx0LnlhKCkpLG51bGwhPT10aGlzLnNlc3Npb25JZCYmdm9pZCAwIT09dGhpcy5zZXNzaW9uSWQmJih0LmdhKFwic2Vzc2lvbklkXCIsci5icy5BcywxMyksdC52YSh0aGlzLnNlc3Npb25JZCksdC55YSgpKSx0LndhKCksdC5UYSgpfX0sZnVuY3Rpb24odCxlKXsvKiEgY29sbGVjdGlvbnMubWluLmpzIHYgMy4wLjAgZ2l0aHViLmNvbS9tb250YWdlanMvY29sbGVjdGlvbnMgKi9cbiAgIWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0aHJvdyBFcnJvcihcIkNhbid0IGNvbnN0cnVjdC4gR2VuZXJpY0NvbGxlY3Rpb24gaXMgYSBtaXhpbi5cIil9ZnVuY3Rpb24gaSgpe3Rocm93IEVycm9yKFwiQ2FuJ3QgY29uc3RydWN0LiBHZW5lcmljU2V0IGlzIGEgbWl4aW4uXCIpfWZ1bmN0aW9uIHIoKXt9ZnVuY3Rpb24gbigpe3Rocm93IEVycm9yKFwiVGhpcyBpcyBhbiBhYnN0cmFjdCBpbnRlcmZhY2UuIE1peCBpdC4gRG9uJ3QgY29uc3RydWN0IGl0XCIpfWZ1bmN0aW9uIG8oKXt0aHJvdyBFcnJvcihcIkNhbid0IGNvbnN0cnVjdC4gUmFuZ2VDaGFuZ2VzIGlzIGEgbWl4aW4uXCIpfWZ1bmN0aW9uIHMoKXt0aHJvdyBFcnJvcihcIkNhbid0IGNvbnN0cnVjdC4gR2VuZXJpY09yZGVyIGlzIGEgbWl4aW4uXCIpfWZ1bmN0aW9uIGEodCl7aWYoISh0aGlzIGluc3RhbmNlb2YgYSkpcmV0dXJuIG5ldyBhKHQpO2lmKEFycmF5LmlzQXJyYXkodCl8fFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiBhLkRmKHQpO2lmKHQ9bHQodCksdCBpbnN0YW5jZW9mIGEpcmV0dXJuIHQ7aWYodC5uZXh0KXRoaXMubmV4dD1mdW5jdGlvbigpe3JldHVybiB0Lm5leHQoKX07ZWxzZSBpZih0LkRmKXt2YXIgZT10LkRmKCk7dGhpcy5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIGUubmV4dCgpfX1lbHNle2lmKFwiW29iamVjdCBGdW5jdGlvbl1cIiE9PWx0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgaXRlcmF0ZVwiKTt0aGlzLm5leHQ9dH19ZnVuY3Rpb24gYyh0LGUsaSl7dGhpcy5IZj10LHRoaXMuc3RhcnQ9bnVsbD09ZT8wOmUsdGhpcy5lbmQ9aX1mdW5jdGlvbiBoKHQsZSxpKXtpZighKHRoaXMgaW5zdGFuY2VvZiBoKSlyZXR1cm4gbmV3IGgodCxlLGkpO3ZhciByPXRoaXMuaGVhZD1uZXcgdGhpcy5Ob2RlO3IubmV4dD1yLHIuTGY9cix0aGlzLk1mPWV8fE9iamVjdC5vbCx0aGlzLmNvbnRlbnQ9aXx8RnVuY3Rpb24uamYsdGhpcy5sZW5ndGg9MCx0aGlzLmFkZEVhY2godCl9ZnVuY3Rpb24gcCh0KXt0aGlzLmhlYWQ9dCx0aGlzLlVmPXQubmV4dH1mdW5jdGlvbiB1KHQpe3RoaXMudmFsdWU9dCx0aGlzLm5leHQ9dGhpcy5MZj1udWxsfWZ1bmN0aW9uIGwoKXt0aHJvdyBFcnJvcihcIkNhbid0IGNvbnN0cnVjdC4gTWFwQ2hhbmdlcyBpcyBhIG1peGluLlwiKX1mdW5jdGlvbiBkKCl7dGhyb3cgRXJyb3IoXCJDYW4ndCBjb25zdHJ1Y3QuIEdlbmVyaWNNYXAgaXMgYSBtaXhpbi5cIil9ZnVuY3Rpb24gZih0LGUpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZj8odGhpcy5jb250ZW50PWV8fEZ1bmN0aW9uLmpmLHRoaXMuVmY9e30sdGhpcy5sZW5ndGg9MCx2b2lkIHRoaXMuYWRkRWFjaCh0KSk6bmV3IGYodCxlKX1mdW5jdGlvbiBnKHQsZSxpLHIpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZz8oZT1lfHxPYmplY3Qub2wsaT1pfHxPYmplY3QuaGFzaCxyPXJ8fEZ1bmN0aW9uLmpmLHRoaXMuTWY9ZSx0aGlzLlFmPWksdGhpcy5jb250ZW50PXIsdGhpcy5xZj1uZXcgdGhpcy5KZihudWxsLHRoaXMuS2YpLHRoaXMubGVuZ3RoPTAsdm9pZCB0aGlzLmFkZEVhY2godCkpOm5ldyBnKHQsZSxpKX1mdW5jdGlvbiB2KHQsZSxpLHIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygdj8oZT1lfHxPYmplY3Qub2wsaT1pfHxPYmplY3QuaGFzaCxyPXJ8fEZ1bmN0aW9uLmpmLHRoaXMuTWY9ZSx0aGlzLlFmPWksdGhpcy5jb250ZW50PXIsdGhpcy5WZj1uZXcgTXQoKHZvaWQgMCksZnVuY3Rpb24odCxpKXtyZXR1cm4gZSh0LmtleSxpLmtleSl9LGZ1bmN0aW9uKHQpe3JldHVybiBpKHQua2V5KX0pLHRoaXMubGVuZ3RoPTAsdm9pZCB0aGlzLmFkZEVhY2godCkpOm5ldyB2KHQsZSxpKX1mdW5jdGlvbiB5KHQsZSxpLHIpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgeT8oZT1lfHxPYmplY3Qub2wsaT1pfHxPYmplY3QuaGFzaCxyPXJ8fEZ1bmN0aW9uLmpmLHRoaXMuTWY9ZSx0aGlzLlFmPWksdGhpcy5jb250ZW50PXIsdGhpcy5vcmRlcj1uZXcgdGhpcy5HZigodm9pZCAwKSxlKSx0aGlzLlZmPW5ldyB0aGlzLnpmKCh2b2lkIDApLGZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUodC52YWx1ZSxpLnZhbHVlKX0sZnVuY3Rpb24odCl7cmV0dXJuIGkodC52YWx1ZSl9KSx0aGlzLmxlbmd0aD0wLHZvaWQgdGhpcy5hZGRFYWNoKHQpKTpuZXcgeSh0LGUsaSl9ZnVuY3Rpb24gbSh0LGUsaSxyLG4pe3JldHVybiB0aGlzIGluc3RhbmNlb2YgbT8oZT1lfHwxLzAsaT1pfHxPYmplY3Qub2wscj1yfHxPYmplY3QuaGFzaCxuPW58fEZ1bmN0aW9uLmpmLHRoaXMuVmY9bmV3IFl0KCh2b2lkIDApLGksciksdGhpcy5NZj1pLHRoaXMuUWY9cix0aGlzLmNvbnRlbnQ9bix0aGlzLm1heExlbmd0aD1lLHRoaXMubGVuZ3RoPTAsdm9pZCB0aGlzLmFkZEVhY2godCkpOm5ldyBtKHQsZSxpLHIpfWZ1bmN0aW9uIHcodCxlLGkscixuKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHc/KGk9aXx8T2JqZWN0Lm9sLHI9cnx8T2JqZWN0Lmhhc2gsbj1ufHxGdW5jdGlvbi5qZix0aGlzLk1mPWksdGhpcy5RZj1yLHRoaXMuY29udGVudD1uLHRoaXMuVmY9bmV3IGllKCh2b2lkIDApLGUsZnVuY3Rpb24odCxlKXtyZXR1cm4gaSh0LmtleSxlLmtleSl9LGZ1bmN0aW9uKHQpe3JldHVybiByKHQua2V5KX0pLHRoaXMubGVuZ3RoPTAsdm9pZCB0aGlzLmFkZEVhY2godCkpOm5ldyB3KHQsZSxpLHIpfWZ1bmN0aW9uIFQodCxlLGkscil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBUPyhlPWV8fE9iamVjdC5vbCxpPWl8fE9iamVjdC5oYXNoLHI9cnx8RnVuY3Rpb24uamYsdGhpcy5NZj1lLHRoaXMuUWY9aSx0aGlzLmNvbnRlbnQ9cix0aGlzLlZmPW5ldyBhZSgodm9pZCAwKSxmdW5jdGlvbih0LGkpe3JldHVybiBlKHQua2V5LGkua2V5KX0sZnVuY3Rpb24odCl7cmV0dXJuIGkodC5rZXkpfSksdGhpcy5sZW5ndGg9MCx2b2lkIHRoaXMuYWRkRWFjaCh0KSk6bmV3IFQodCxlLGkpfWZ1bmN0aW9uIFModCxlLGkscil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBTPyh0aGlzLldmPWV8fHRoaXMuV2Ysdm9pZCBsZS5jYWxsKHRoaXMsdCxpLHIsZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5XZigpO3JldHVybiBsZS5wcm90b3R5cGUuc2V0LmNhbGwodGhpcyx0LGUpLGV9KSk6bmV3IFModCxlLGkscil9ZnVuY3Rpb24gYih0LGUsaSxyKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGI/KEFycmF5LmlzQXJyYXkodCk/KHRoaXMuSGY9dCx0PXQuc3BsaWNlKDAsdC5sZW5ndGgpKTp0aGlzLkhmPVtdLHRoaXMuTWY9ZXx8T2JqZWN0Lm9sLHRoaXMuJGY9aXx8T2JqZWN0LllmLHRoaXMuY29udGVudD1yfHxGdW5jdGlvbi5qZix0aGlzLmxlbmd0aD0wLHZvaWQgdGhpcy5hZGRFYWNoKHQpKTpuZXcgYih0LGUsaSxyKX1mdW5jdGlvbiBFKHQsZSxpKXtmb3IodmFyIHI9MCxuPXQubGVuZ3RoLTE7cjw9bjspe3ZhciBvPXIrbj4+MSxzPWkoZSx0W29dKTtpZigwPHMpcj1vKzE7ZWxzZXtpZighKDA+cykpcmV0dXJuIG87bj1vLTF9fXJldHVybi0ocisxKX1mdW5jdGlvbiBJKHQsZSxpLHIpe2lmKGk9RSh0LGUsaSksMD5pKXJldHVybi0xO2Zvcig7MDxpJiZyKGUsdFtpLTFdKTspaS0tO3JldHVybiByKGUsdFtpXSk/aTotMX1mdW5jdGlvbiBSKHQsZSxpLHIpe2lmKGk9RSh0LGUsaSksMD5pKXJldHVybi0xO2Zvcig7aTx0Lmxlbmd0aC0xJiZyKGUsdFtpKzFdKTspaSsrO3JldHVybiByKGUsdFtpXSk/aTotMX1mdW5jdGlvbiBrKHQsZSxpLHIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygaz92b2lkIHllLmNhbGwodGhpcyx0LGUsaSxyKTpuZXcgayh0LGUsaSxyKX1mdW5jdGlvbiBDKHQsZSxpLHIpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgQz8oZT1lfHxPYmplY3Qub2wsaT1pfHxPYmplY3QuWWYscj1yfHxGdW5jdGlvbi5qZix0aGlzLk1mPWUsdGhpcy4kZj1pLHRoaXMuY29udGVudD1yLHRoaXMuVmY9bmV3IFNlKG51bGwsZnVuY3Rpb24odCxpKXtyZXR1cm4gZSh0LmtleSxpLmtleSl9LGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkodC5rZXksZS5rZXkpfSksdGhpcy5sZW5ndGg9MCx2b2lkIHRoaXMuYWRkRWFjaCh0KSk6bmV3IEModCxlLGkscil9ZnVuY3Rpb24gTyh0LGUsaSxyKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIE8/KHRoaXMuTWY9ZXx8T2JqZWN0Lm9sLHRoaXMuJGY9aXx8T2JqZWN0LllmLHRoaXMuY29udGVudD1yfHxGdW5jdGlvbi5qZix0aGlzLnJvb3Q9bnVsbCx0aGlzLmxlbmd0aD0wLHZvaWQgdGhpcy5hZGRFYWNoKHQpKTpuZXcgTyh0LGUsaSxyKX1mdW5jdGlvbiBQKHQpe3RoaXMudmFsdWU9dCx0aGlzLnJpZ2h0PXRoaXMubGVmdD1udWxsLHRoaXMubGVuZ3RoPTF9ZnVuY3Rpb24gQSh0LGUsaSl7dGhpcy5zZXQ9dCx0aGlzLkxmPW51bGwsdGhpcy5lbmQ9aSxlJiYodD10aGlzLnNldC5YZihlKSkmJih0aGlzLnNldC5aZih0LnZhbHVlKSx0aGlzLkxmPXQudGcoKSl9ZnVuY3Rpb24gTih0LGUsaSxyKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIE4/KGU9ZXx8T2JqZWN0Lm9sLGk9aXx8T2JqZWN0LllmLHI9cnx8RnVuY3Rpb24uamYsdGhpcy5NZj1lLHRoaXMuJGY9aSx0aGlzLmNvbnRlbnQ9cix0aGlzLlZmPW5ldyBOZShudWxsLGZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUodC5rZXksaS5rZXkpfSxmdW5jdGlvbih0LGUpe3JldHVybiBpKHQua2V5LGUua2V5KX0pLHRoaXMubGVuZ3RoPTAsdm9pZCB0aGlzLmFkZEVhY2godCkpOm5ldyBOKHQsZSxpLHIpfXZhciB4PXt9O3guZWc9ZSxlLnByb3RvdHlwZS5hZGRFYWNoPWZ1bmN0aW9uKHQpe2lmKHQmJk9iamVjdCh0KT09PXQpaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC5mb3JFYWNoKXQuZm9yRWFjaCh0aGlzLmFkZCx0aGlzKTtlbHNlIGlmKFwibnVtYmVyXCI9PXR5cGVvZiB0Lmxlbmd0aClmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl0aGlzLmFkZCh0W2VdLGUpO2Vsc2UgT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihlKXt0aGlzLmFkZCh0W2VdLGUpfSx0aGlzKX0sZS5wcm90b3R5cGUuaWc9ZnVuY3Rpb24odCl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXNbXCJkZWxldGVcIl0odCl9LHRoaXMpfSxlLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKGkscixuLG8scyl7dC5jYWxsKGUscixuLG8scyl9LHZvaWQgMCl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUpe3ZhciBpPVtdO3JldHVybiB0aGlzLnJlZHVjZShmdW5jdGlvbihyLG4sbyxzLGEpe2kucHVzaCh0LmNhbGwoZSxuLG8scyxhKSl9LHZvaWQgMCksaX0sZS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChGdW5jdGlvbi5pZGVudGl0eSl9LGUucHJvdG90eXBlLnJnPWZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKGUsaSxyKXt0W3JdPWl9LHZvaWQgMCksdH0sZS5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5uZygpO3JldHVybiB0aGlzLnJlZHVjZShmdW5jdGlvbihyLG4sbyxzLGEpe3QuY2FsbChlLG4sbyxzLGEpJiZpLmFkZChuKX0sdm9pZCAwKSxpfSxlLnByb3RvdHlwZS5ldmVyeT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnJlZHVjZShmdW5jdGlvbihpLHIsbixvLHMpe3JldHVybiBpJiZ0LmNhbGwoZSxyLG4sbyxzKX0sITApfSxlLnByb3RvdHlwZS5zb21lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKGkscixuLG8scyl7cmV0dXJuIGl8fHQuY2FsbChlLHIsbixvLHMpfSwhMSl9LGUucHJvdG90eXBlLmFsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmV2ZXJ5KEJvb2xlYW4pfSxlLnByb3RvdHlwZS5pZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvbWUoQm9vbGVhbil9LGUucHJvdG90eXBlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLiRmfHxPYmplY3QuWWYsdGhpcy5yZWR1Y2UoZnVuY3Rpb24oZSxpKXtyZXR1cm4gMD50KGksZSk/aTplfSwxLzApfSxlLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy4kZnx8T2JqZWN0LllmLHRoaXMucmVkdWNlKGZ1bmN0aW9uKGUsaSl7cmV0dXJuIDA8dChpLGUpP2k6ZX0sLSgxLzApKX0sZS5wcm90b3R5cGUub2c9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZX0sdm9pZCAwPT09dD8wOnQpfSxlLnByb3RvdHlwZS5zZz1mdW5jdGlvbih0KXt2YXIgZT12b2lkIDA9PT10PzA6dCxpPXZvaWQgMD09PXQ/MDp0O3JldHVybiB0aGlzLnJlZHVjZShmdW5jdGlvbih0LHIpe2UrPXIsaSs9MX0sdm9pZCAwKSxlL2l9LGUucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLm5nKHRoaXMpLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXQuYWRkRWFjaChhcmd1bWVudHNbZV0pO3JldHVybiB0fSxlLnByb3RvdHlwZS5hZz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKGUsaSl7cmV0dXJuIGkuZm9yRWFjaChmdW5jdGlvbih0KXt0aGlzLnB1c2godCl9LGUsdCksZX0sW10pfSxlLnByb3RvdHlwZS5jZz1mdW5jdGlvbigpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7dC51bnNoaWZ0KHRoaXMpO2Zvcih2YXIgZT1bXSxpPTEvMCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07dFtyXT1uLnRvQXJyYXkoKSxuLmxlbmd0aDxpJiYoaT1uLmxlbmd0aCl9Zm9yKHI9MDtyPHQubGVuZ3RoO3IrKylmb3IodmFyIG49dFtyXSxvPTA7bzxuLmxlbmd0aDtvKyspbzxpJiZvIGluIG4mJihlW29dPWVbb118fFtdLGVbb11bcl09bltvXSk7cmV0dXJuIGV9LGUucHJvdG90eXBlLmhnPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdD10fHx0aGlzLiRmfHxPYmplY3QuWWYsdC5wZz8oZT10LnBnLHQ9dC5ZZnx8dGhpcy4kZnx8T2JqZWN0LllmKTplPWV8fEZ1bmN0aW9uLmlkZW50aXR5LHZvaWQgMD09PWkmJihpPTEpLHRoaXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybntwZzplKHQpLHZhbHVlOnR9fSkuc29ydChmdW5jdGlvbihlLHIpe3JldHVybiB0KGUucGcsci5wZykqaX0pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC52YWx1ZX0pfSxlLnByb3RvdHlwZS5yZXZlcnNlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5nKHRoaXMpLnJldmVyc2UoKX0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10KXQ9MS8wO2Vsc2UgaWYoMD09PXQpcmV0dXJuIHRoaXM7dmFyIGk9dGhpcy5uZygpO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24ocixuKXtpLmFkZChPYmplY3QuY2xvbmUocix0LTEsZSksbil9LHRoaXMpLGl9LGUucHJvdG90eXBlLm9ubHk9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5sZW5ndGgpdGhyb3cgRXJyb3IoXCJDYW4ndCBnZXQgb25seSB2YWx1ZSBpbiBlbXB0eSBjb2xsZWN0aW9uLlwiKTtpZigxPHRoaXMubGVuZ3RoKXRocm93IEVycm9yKFwiQ2FuJ3QgZ2V0IG9ubHkgdmFsdWUgaW4gY29sbGVjdGlvbiB3aXRoIG11bHRpcGxlIHZhbHVlcy5cIik7cmV0dXJuIHRoaXMudWcoKX0seC5lZyYmKHg9eC5lZyk7dmFyIEI9e307Qi5lZz1pLGkucHJvdG90eXBlLmxnPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubmcodGhpcyk7cmV0dXJuIGUuYWRkRWFjaCh0KSxlfSxpLnByb3RvdHlwZS5kZz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uZyh0aGlzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gdC5oYXMoZSl9KSl9LGkucHJvdG90eXBlLmZnPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubmcodGhpcyk7cmV0dXJuIGUuaWcodCksZX0saS5wcm90b3R5cGUuZ2c9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5sZyh0KSx0PXRoaXMuZGcodCk7cmV0dXJuIGUuZmcodCl9LGkucHJvdG90eXBlLm9sPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcztyZXR1cm4gT2JqZWN0LnZnKHQsXCJyZWR1Y2VcIikmJnRoaXMubGVuZ3RoPT09dC5sZW5ndGgmJnQucmVkdWNlKGZ1bmN0aW9uKHQscil7cmV0dXJuIHQmJmkuaGFzKHIsZSl9LCEwKX0sQi5lZyYmKEI9Qi5lZyk7dmFyIEY9eCxfPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7QXJyYXkuaXNBcnJheXx8KEFycmF5LmlzQXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT1fLmNhbGwodCl9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaHx8KEFycmF5LnByb3RvdHlwZS5mb3JFYWNoPUYuZm9yRWFjaCksQXJyYXkucHJvdG90eXBlLm1hcHx8KEFycmF5LnByb3RvdHlwZS5tYXA9Ri5tYXApLEFycmF5LnByb3RvdHlwZS5maWx0ZXJ8fChBcnJheS5wcm90b3R5cGUuZmlsdGVyPUYuZmlsdGVyKSxBcnJheS5wcm90b3R5cGUuZXZlcnl8fChBcnJheS5wcm90b3R5cGUuZXZlcnk9Ri5ldmVyeSksQXJyYXkucHJvdG90eXBlLnNvbWV8fChBcnJheS5wcm90b3R5cGUuc29tZT1GLnNvbWUpLEFycmF5LnByb3RvdHlwZS5yZWR1Y2V8fChBcnJheS5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKHQpe3ZhciBlPXRvT2JqZWN0KHRoaXMpLGk9ZS5sZW5ndGg+Pj4wO2lmKFwiW29iamVjdCBGdW5jdGlvbl1cIiE9Xy5jYWxsKHQpKXRocm93IG5ldyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtpZighaSYmMT09YXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZVwiKTt2YXIgcixuPTA7aWYoMjw9YXJndW1lbnRzLmxlbmd0aClyPWFyZ3VtZW50c1sxXTtlbHNlIGZvcig7Oyl7aWYobiBpbiBlKXtyPWVbbisrXTticmVha31pZigrK24+PWkpdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIil9Zm9yKDtuPGk7bisrKW4gaW4gZSYmKHI9dC5jYWxsKHZvaWQgMCxyLGVbbl0sbixlKSk7cmV0dXJuIHJ9KSxBcnJheS5wcm90b3R5cGUucmVkdWNlUmlnaHR8fChBcnJheS5wcm90b3R5cGUucmVkdWNlUmlnaHQ9ZnVuY3Rpb24odCl7dmFyIGU9dG9PYmplY3QodGhpcyksaT1lLmxlbmd0aD4+PjA7aWYoXCJbb2JqZWN0IEZ1bmN0aW9uXVwiIT1fLmNhbGwodCkpdGhyb3cgbmV3IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO2lmKCFpJiYxPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBUeXBlRXJyb3IoXCJyZWR1Y2VSaWdodCBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIik7dmFyIHIsaT1pLTE7aWYoMjw9YXJndW1lbnRzLmxlbmd0aClyPWFyZ3VtZW50c1sxXTtlbHNlIGZvcig7Oyl7aWYoaSBpbiBlKXtyPWVbaS0tXTticmVha31pZigwPi0taSl0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVkdWNlUmlnaHQgb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlXCIpfWRvIGkgaW4gdGhpcyYmKHI9dC5jYWxsKHZvaWQgMCxyLGVbaV0saSxlKSk7d2hpbGUoaS0tKTtyZXR1cm4gcn0pLEFycmF5LnByb3RvdHlwZS5pbmRleE9mfHwoQXJyYXkucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24odCl7dmFyIGU9dG9PYmplY3QodGhpcyksaT1lLmxlbmd0aD4+PjA7aWYoIWkpcmV0dXJuLTE7dmFyIHI9MDtmb3IoMTxhcmd1bWVudHMubGVuZ3RoJiYocj10b0ludGVnZXIoYXJndW1lbnRzWzFdKSkscj0wPD1yP3I6TWF0aC5tYXgoMCxpK3IpO3I8aTtyKyspaWYociBpbiBlJiZlW3JdPT09dClyZXR1cm4gcjtyZXR1cm4tMX0pLEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZj1mdW5jdGlvbih0KXt2YXIgZT10b09iamVjdCh0aGlzKSxpPWUubGVuZ3RoPj4+MDtpZighaSlyZXR1cm4tMTt2YXIgcj1pLTE7Zm9yKDE8YXJndW1lbnRzLmxlbmd0aCYmKHI9TWF0aC5taW4ocix0b0ludGVnZXIoYXJndW1lbnRzWzFdKSkpLHI9MDw9cj9yOmktTWF0aC5hYnMocik7MDw9cjtyLS0paWYociBpbiBlJiZ0PT09ZVtyXSlyZXR1cm4gcjtyZXR1cm4tMX0pO3ZhciBEPXt9O0QuZWc9RnVuY3Rpb24sRnVuY3Rpb24uamY9ZnVuY3Rpb24oKXt9LEZ1bmN0aW9uLmlkZW50aXR5PWZ1bmN0aW9uKHQpe3JldHVybiB0fSxGdW5jdGlvbi5wZz1mdW5jdGlvbih0LGUpe3ZhciBlPWV8fE9iamVjdC5ZZix0PXR8fEZ1bmN0aW9uLmlkZW50aXR5LGk9ZnVuY3Rpb24oaSxyKXtyZXR1cm4gZSh0KGkpLHQocikpfTtyZXR1cm4gaS5ZZj1lLGkucGc9dCxpfSxELmVnJiYoRD1ELmVnKTt2YXIgSD17fTtILmVnPXIsci55Zz17ZGc6XCIrXCIsbWc6XCItXCIsd2c6XCIrXCIsVGc6XCIrXCIsU2c6XCIuXCIsYmc6XCInXCIsRWc6XCIrXCIsSWc6XCJ8XCJ9LHIuUmc9e2RnOlwi4pWLXCIsbWc6XCLilIFcIix3ZzpcIuKUu1wiLFRnOlwi4pSzXCIsU2c6XCLila1cIixiZzpcIuKVsFwiLEVnOlwi4pSjXCIsSWc6XCLilINcIn0sci5rZz17ZGc6XCLilYtcIixtZzpcIuKUgVwiLHdnOlwi4pS7XCIsVGc6XCLilLNcIixTZzpcIuKUj1wiLGJnOlwi4pSXXCIsRWc6XCLilKNcIixJZzpcIuKUg1wifSxILmVnJiYoSD1ILmVnKTt2YXIgTCxNPXt9LGo9TTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgV2Vha01hcClMPVdlYWtNYXA7ZWxzZXt2YXIgVT1mdW5jdGlvbih0KXtyZXR1cm4gdC5wcm90b3R5cGU9bnVsbCxPYmplY3QuZnJlZXplKHQpfSxWPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLFE9T2JqZWN0LmRlZmluZVByb3BlcnR5LHE9e307VihPYmplY3QpLmZvckVhY2goZnVuY3Rpb24odCl7cVt0XT1PYmplY3RbdF19KTt2YXIgSj1cImlkZW50OlwiK01hdGgucmFuZG9tKCkrXCJfX19cIjtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgY3J5cHRvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBBcnJheUJ1ZmZlciYmXCJmdW5jdGlvblwiPT10eXBlb2YgVWludDhBcnJheSl7dmFyIEs9bmV3IEFycmF5QnVmZmVyKDI1KSxLPW5ldyBVaW50OEFycmF5KEspO2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoSyksSj1cInJhbmQ6XCIrQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKEssZnVuY3Rpb24odCl7cmV0dXJuKHQlMzYpLnRvU3RyaW5nKDM2KX0pLmpvaW4oXCJcIikrXCJfX19cIn1RKE9iamVjdCxcImdldE93blByb3BlcnR5TmFtZXNcIix7dmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIFYodCkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0IT09Sn0pfX0pLFwiZ2V0UHJvcGVydHlOYW1lc1wiaW4gT2JqZWN0JiZRKE9iamVjdCxcImdldFByb3BlcnR5TmFtZXNcIix7dmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHEuZ2V0UHJvcGVydHlOYW1lcyh0KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQhPT1KfSl9fSk7dmFyIEc9ZnVuY3Rpb24odCl7aWYodCE9PU9iamVjdCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGFuIG9iamVjdDogXCIrdCk7dmFyIGU9dFtKXTtyZXR1cm4gZSYmZS5rZXk9PT10P2U6cS5pc0V4dGVuc2libGUodCk/KGU9e2tleTp0LENnOltdLE9nOltdfSxRKHQsSix7dmFsdWU6ZSxQZzohMSxBZzohMSxOZzohMX0pLGUpOnZvaWQgMH0sej1PYmplY3QuZnJlZXplO1EoT2JqZWN0LFwiZnJlZXplXCIse3ZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBHKHQpLHoodCl9fSk7dmFyIFc9T2JqZWN0LnNlYWw7UShPYmplY3QsXCJzZWFsXCIse3ZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBHKHQpLFcodCl9fSk7dmFyICQ9T2JqZWN0LnByZXZlbnRFeHRlbnNpb25zO1EoT2JqZWN0LFwicHJldmVudEV4dGVuc2lvbnNcIix7dmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIEcodCksJCh0KX19KTt2YXIgWT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQocixuKXt2YXIgbyxzPUcocik7cmV0dXJuIHM/KG89cy5DZy5pbmRleE9mKHQpLHM9cy5PZyk6KG89ZS5pbmRleE9mKHIpLHM9aSksMDw9bz9zW29dOm59dmFyIGU9W10saT1bXTtyZXR1cm4gT2JqZWN0LmNyZWF0ZShZLnByb3RvdHlwZSx7eGc6e3ZhbHVlOlUodCl9LEJnOnt2YWx1ZTpVKGZ1bmN0aW9uKGkpe3ZhciByPUcoaSk7cmV0dXJuIDA8PShyP3IuQ2cuaW5kZXhPZih0KTplLmluZGV4T2YoaSkpfSl9LEZnOnt2YWx1ZTpVKGZ1bmN0aW9uKHIsbil7dmFyIG8scz1HKHIpO3M/KG89cy5DZy5pbmRleE9mKHQpLDA8PW8/cy5PZ1tvXT1uOihzLkNnLnB1c2godCkscy5PZy5wdXNoKG4pKSk6KG89ZS5pbmRleE9mKHIpLDA8PW8/aVtvXT1uOihlLnB1c2gociksaS5wdXNoKG4pKSl9KX0sX2c6e3ZhbHVlOlUoZnVuY3Rpb24ocil7dmFyIG49RyhyKTtyZXR1cm4gbj8ocj1uLkNnLmluZGV4T2YodCksMDw9ciYmKG4uQ2cuc3BsaWNlKHIsMSksbi5PZy5zcGxpY2UociwxKSkpOihyPWUuaW5kZXhPZihyKSwwPD1yJiYoZS5zcGxpY2UociwxKSxpLnNwbGljZShyLDEpKSksITB9KX19KX07WS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShPYmplY3QucHJvdG90eXBlLHtnZXQ6e3ZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueGcodCxlKX0sUGc6ITAsTmc6ITB9LGhhczp7dmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuQmcodCl9LFBnOiEwLE5nOiEwfSxzZXQ6e3ZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5GZyh0LGUpfSxQZzohMCxOZzohMH0sXCJkZWxldGVcIjp7dmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2codCl9LFBnOiEwLE5nOiEwfX0pLEw9WX1qLmVnPUwsTS5lZyYmKE09TS5lZyk7dmFyIFg9e30sWj1NLHR0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksZXQ9bmV3IFosaXQ9bmV3IFo7WC5lZz1uLG4ucHJvdG90eXBlLkRnPWZ1bmN0aW9uKHQpe2V0Lmhhcyh0aGlzKXx8ZXQuc2V0KHRoaXMse30pO3ZhciBlPWV0LmdldCh0aGlzKTtyZXR1cm4gdHQuY2FsbChlLHQpfHwoZVt0XT17SGc6W10sTGc6W119KSxlW3RdfSxuLnByb3RvdHlwZS5NZz1mdW5jdGlvbih0KXtpZighZXQuaGFzKHRoaXMpKXJldHVybiExO2lmKCF0KXJldHVybiEwO3ZhciBlPWV0LmdldCh0aGlzKTtyZXR1cm4hIXR0LmNhbGwoZSx0KX0sbi5wcm90b3R5cGUuamc9ZnVuY3Rpb24odCxlLGkpe3RoaXMubWFrZU9ic2VydmFibGUmJiF0aGlzLmlzT2JzZXJ2YWJsZSYmdGhpcy5tYWtlT2JzZXJ2YWJsZSgpO3ZhciByPW4uRGcodGhpcyx0KSxpPWk/ci5IZzpyLkxnO24uVWcodGhpcyx0KSxpLnB1c2goZSl9LG4ucHJvdG90eXBlLlZnPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uamcodGhpcyx0LGUsITApfSxuLnByb3RvdHlwZS5RZz1mdW5jdGlvbih0LGUsaSl7dmFyIHI9bi5EZyh0aGlzLHQpLGk9aT9yLkhnOnIuTGcsZT1pLmxhc3RJbmRleE9mKGUpO2lmKC0xPT09ZSl0aHJvdyBFcnJvcihcIkNhbid0IHJlbW92ZSBsaXN0ZW5lcjogZG9lcyBub3QgZXhpc3QuXCIpO2kuc3BsaWNlKGUsMSksMD09PXIuTGcubGVuZ3RoK3IuSGcubGVuZ3RoJiZuLnFnKHRoaXMsdCl9LG4ucHJvdG90eXBlLkpnPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uUWcodGhpcyx0LGUsITApfSxuLnByb3RvdHlwZS5LZz1mdW5jdGlvbih0LGUsaSl7dmFyIHI9bi5EZyh0aGlzLHQpLHI9aT9yLkhnOnIuTGcsaT0oaT9cIldpbGxcIjpcIlwiKStcIkNoYW5nZVwiLG89XCJoYW5kbGVQcm9wZXJ0eVwiK2kscz1TdHJpbmcodCkscz1zJiZzWzBdLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSxhPVwiaGFuZGxlXCIrcytpO3IuZm9yRWFjaChmdW5jdGlvbihpKXt2YXIgcj1pLGk9aVthXXx8aVtvXXx8aTtpLmNhbGwmJmkuY2FsbChyLGUsdCx0aGlzKX0sdGhpcyl9LG4ucHJvdG90eXBlLkdnPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uS2codGhpcyx0LGUsITApfSxuLnByb3RvdHlwZS5VZz1mdW5jdGlvbih0KXtpZighQXJyYXkuaXNBcnJheSh0aGlzKSl7aXQuaGFzKHRoaXMpfHwoZT17fSxpdC5zZXQodGhpcyxlKSk7dmFyIGU9aXQuZ2V0KHRoaXMpO2lmKCF0dC5jYWxsKGUsdCkpe3ZhciBpLHI9dGhpcztPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsdCk7ZG97aWYoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsdCkpYnJlYWs7cj1PYmplY3QuZ2V0UHJvdG90eXBlT2Yocil9d2hpbGUocik7aWYoaT1pfHx7dmFsdWU6dm9pZCAwLEFnOiEwLFBnOiEwLE5nOiEwfSwhaS5OZyl0aHJvdyBFcnJvcihcIkNhbid0IG9ic2VydmUgbm9uLWNvbmZpZ3VyYWJsZSBwcm9wZXJ0aWVzXCIpO2VbdF09aSwoaS5QZ3x8aS5zZXQpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyx0LFwidmFsdWVcImluIGk/e2dldDpmdW5jdGlvbigpe3JldHVybiBpLnZhbHVlfSxzZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1pLnZhbHVlP2U6KG4uR2codGhpcyx0LGkudmFsdWUpLGkudmFsdWU9ZSxuLktnKHRoaXMsdCxlKSxlKX0sQWc6aS5BZyxOZzohMH06e2dldDpmdW5jdGlvbigpe2lmKGkuZ2V0KXJldHVybiBpLmdldC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldDpmdW5jdGlvbihlKXt2YXIgcjtyZXR1cm4gaS5nZXQmJihyPWkuZ2V0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSksZT09PXI/ZToobi5HZyh0aGlzLHQsciksaS5zZXQmJmkuc2V0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxpLmdldCYmKGU9aS5nZXQuYXBwbHkodGhpcyxhcmd1bWVudHMpKSxuLktnKHRoaXMsdCxlKSxlKX0sQWc6aS5BZyxOZzohMH0pfX19LG4ucHJvdG90eXBlLnFnPWZ1bmN0aW9uKHQpe2lmKCFBcnJheS5pc0FycmF5KHRoaXMpKXtpZighaXQuaGFzKHRoaXMpKXRocm93IEVycm9yKFwiQ2FuJ3QgdW5pbnN0YWxsIG9ic2VydmVyIG9uIHByb3BlcnR5XCIpO3ZhciBlPWl0LmdldCh0aGlzKTtpZighZVt0XSl0aHJvdyBFcnJvcihcIkNhbid0IHVuaW5zdGFsbCBvYnNlcnZlciBvbiBwcm9wZXJ0eVwiKTt2YXIgaT1lW3RdO2RlbGV0ZSBlW3RdLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLHQsaSl9fSxuLkRnPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuRGc/dC5EZyhlKTpuLnByb3RvdHlwZS5EZy5jYWxsKHQsZSl9LG4uTWc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5NZz90Lk1nKGUpOm4ucHJvdG90eXBlLk1nLmNhbGwodCxlKX0sbi5qZz1mdW5jdGlvbih0LGUsaSxyKXtyZXR1cm4gdC5qZz90LmpnKGUsaSxyKTpuLnByb3RvdHlwZS5qZy5jYWxsKHQsZSxpLHIpfSxuLlFnPWZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybiB0LlFnP3QuUWcoZSxpLHIpOm4ucHJvdG90eXBlLlFnLmNhbGwodCxlLGkscil9LG4uS2c9ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuIHQuS2c/dC5LZyhlLGkscik6bi5wcm90b3R5cGUuS2cuY2FsbCh0LGUsaSxyKX0sbi5WZz1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIG4uamcodCxlLGksITApfSxuLkpnPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gbi5RZyh0LGUsaSwhMCl9LG4uR2c9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBuLktnKHQsZSxpLCEwKX0sbi5VZz1mdW5jdGlvbih0LGUpe3JldHVybiB0LlVnP3QuVWcoZSk6bi5wcm90b3R5cGUuVWcuY2FsbCh0LGUpfSxuLnFnPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQucWc/dC5xZyhlKTpuLnByb3RvdHlwZS5xZy5jYWxsKHQsZSl9LFguZWcmJihYPVguZWcpO3ZhciBydD17fSxudD1uZXcgTTtydC5lZz1vLG8ucHJvdG90eXBlLnpnPWZ1bmN0aW9uKCl7cmV0dXJuIG50Lmhhcyh0aGlzKXx8bnQuc2V0KHRoaXMse3N0OiExLExnOltdLEhnOltdfSksbnQuZ2V0KHRoaXMpfSxvLnByb3RvdHlwZS5XZz1mdW5jdGlvbih0LGUpeyF0aGlzLmlzT2JzZXJ2YWJsZSYmdGhpcy5tYWtlT2JzZXJ2YWJsZSYmdGhpcy5tYWtlT2JzZXJ2YWJsZSgpO3ZhciBpPXRoaXMuemcoKTsoZT9pLkhnOmkuTGcpLnB1c2godCksdGhpcy4kZz0hIShpLkhnLmxlbmd0aCtpLkxnLmxlbmd0aCl9LG8ucHJvdG90eXBlLllnPWZ1bmN0aW9uKHQsZSl7dmFyIGkscj10aGlzLnpnKCk7aT1lP3IuSGc6ci5MZzt2YXIgbj1pLmxhc3RJbmRleE9mKHQpO2lmKC0xPT09bil0aHJvdyBFcnJvcihcIkNhbid0IHJlbW92ZSBsaXN0ZW5lcjogZG9lcyBub3QgZXhpc3QuXCIpO2kuc3BsaWNlKG4sMSksdGhpcy4kZz0hIShyLkhnLmxlbmd0aCtyLkxnLmxlbmd0aCl9LG8ucHJvdG90eXBlLlhnPWZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPXRoaXMuemcoKTtpZighbi5zdCl7bi5zdD0hMDt2YXIgbztvPXI/bi5IZzpuLkxnO3RyeXtvLmZvckVhY2goZnVuY3Rpb24obil7bi55ZD9uLnlkKHtaZzpyP1wiYmVmb3JlXCI6XCJhZnRlclwiLGN1cnJlbnRUYXJnZXQ6dGhpcyx0YXJnZXQ6dGhpcyx0djp0LGV2OmUsaW5kZXg6aX0pOihuPXI/bi5oYW5kbGVSYW5nZVdpbGxDaGFuZ2V8fG46bi5oYW5kbGVSYW5nZUNoYW5nZXx8bixuLmNhbGwmJm4uY2FsbCh0aGlzLHQsZSxpLHIpKX0sdGhpcyl9ZmluYWxseXtuLnN0PSExfX19LG8ucHJvdG90eXBlLml2PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLldnKHQsITApfSxvLnByb3RvdHlwZS5ydj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ZZyh0LCEwKX0sby5wcm90b3R5cGUubnY9ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLlhnKHQsZSxpLCEwKX0scnQuZWcmJihydD1ydC5lZyk7dmFyIG90PXt9LHN0PU07b3QuZWc9T2JqZWN0LE9iamVjdC5lbXB0eT1PYmplY3QuZnJlZXplKE9iamVjdC5jcmVhdGUobnVsbCkpLE9iamVjdC5vdj1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0KHQpPT09dH0sT2JqZWN0LnN2PWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QudmcodCxcInZhbHVlT2ZcIikmJih0PXQudmFsdWVPZigpKSx0fTt2YXIgYXQ9bmV3IHN0O09iamVjdC5oYXNoPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QudmcodCxcImhhc2hcIik/XCJcIit0Lmhhc2goKTpPYmplY3QodCk9PT10PyhhdC5oYXModCl8fGF0LnNldCh0LE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpKSxhdC5nZXQodCkpOlwiXCIrdH07dmFyIGN0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7T2JqZWN0LmF2PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGN0LmNhbGwodCxlKX0sT2JqZWN0LnZnPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGwhPXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRbZV0mJiFjdC5jYWxsKHQsZSl9LE9iamVjdC5oYXM9ZnVuY3Rpb24odCxlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgdCl0aHJvdyBFcnJvcihcIk9iamVjdC5oYXMgY2FuJ3QgYWNjZXB0IG5vbi1vYmplY3Q6IFwiK3R5cGVvZiB0KTtpZihPYmplY3QudmcodCxcImhhc1wiKSlyZXR1cm4gdC5oYXMoZSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIGUgaW4gdCYmdFtlXSE9PU9iamVjdC5wcm90b3R5cGVbZV07dGhyb3cgRXJyb3IoXCJLZXkgbXVzdCBiZSBhIHN0cmluZyBmb3IgT2JqZWN0LmhhcyBvbiBwbGFpbiBvYmplY3RzXCIpfSxPYmplY3QuZ2V0PWZ1bmN0aW9uKHQsZSxpKXtpZihcIm9iamVjdFwiIT10eXBlb2YgdCl0aHJvdyBFcnJvcihcIk9iamVjdC5nZXQgY2FuJ3QgYWNjZXB0IG5vbi1vYmplY3Q6IFwiK3R5cGVvZiB0KTtyZXR1cm4gT2JqZWN0LnZnKHQsXCJnZXRcIik/dC5nZXQoZSxpKTpPYmplY3QuaGFzKHQsZSk/dFtlXTppfSxPYmplY3Quc2V0PWZ1bmN0aW9uKHQsZSxpKXtPYmplY3QudmcodCxcInNldFwiKT90LnNldChlLGkpOnRbZV09aX0sT2JqZWN0LmFkZEVhY2g9ZnVuY3Rpb24odCxlKXtPYmplY3QudmcoZSxcImZvckVhY2hcIik/XCJmdW5jdGlvblwiPT10eXBlb2YgZS5rZXlzP2UuZm9yRWFjaChmdW5jdGlvbihlLGkpe3RbaV09ZX0pOmUuZm9yRWFjaChmdW5jdGlvbihlKXt0W2VbMF1dPWVbMV19KTpPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKGkpe3RbaV09ZVtpXX0pfSxPYmplY3QuZm9yRWFjaD1mdW5jdGlvbih0LGUsaSl7T2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihyKXtlLmNhbGwoaSx0W3JdLHIsdCl9KX0sT2JqZWN0Lm1hcD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIE9iamVjdC5rZXlzKHQpLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKGksdFtyXSxyLHQpfSl9LE9iamVjdC52YWx1ZXM9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5tYXAodCxGdW5jdGlvbi5pZGVudGl0eSl9LE9iamVjdC5pcz1mdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZT8wIT09dHx8MS90PT09MS9lOnQhPT10JiZlIT09ZX0sT2JqZWN0Lm9sPWZ1bmN0aW9uKHQsZSxpKXtpZihpPWl8fE9iamVjdC5vbCx0PU9iamVjdC5zdih0KSxlPU9iamVjdC5zdihlKSx0PT09ZSlyZXR1cm4gMCE9PXR8fDEvdD09PTEvZTtpZihPYmplY3QudmcodCxcImVxdWFsc1wiKSlyZXR1cm4gdC5vbChlLGkpO2lmKE9iamVjdC52ZyhlLFwiZXF1YWxzXCIpKXJldHVybiBlLm9sKHQsaSk7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQmJlwib2JqZWN0XCI9PXR5cGVvZiBlKXt2YXIgcj1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCksbj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7aWYocj09PW4mJihyPT09T2JqZWN0LnByb3RvdHlwZXx8bnVsbD09PXIpKXtmb3IodmFyIG8gaW4gdClpZighaSh0W29dLGVbb10pKXJldHVybiExO2ZvcihvIGluIGUpaWYoIWkodFtvXSxlW29dKSlyZXR1cm4hMTtyZXR1cm4hMH19cmV0dXJuIHQhPT10JiZlIT09ZX0sT2JqZWN0LllmPWZ1bmN0aW9uKHQsZSl7dmFyIHQ9T2JqZWN0LnN2KHQpLGU9T2JqZWN0LnN2KGUpLGk9dHlwZW9mIHQ7cmV0dXJuIHQ9PT1lfHxpIT09dHlwZW9mIGU/MDpcIm51bWJlclwiPT09aT90LWU6XCJzdHJpbmdcIj09PWk/dDxlPy0xOjE6T2JqZWN0LnZnKHQsXCJjb21wYXJlXCIpP3QuWWYoZSk6T2JqZWN0LnZnKGUsXCJjb21wYXJlXCIpPy1lLllmKHQpOjB9LE9iamVjdC5jbG9uZT1mdW5jdGlvbih0LGUsaSl7aWYodD1PYmplY3Quc3YodCksaT1pfHxuZXcgc3Qsdm9pZCAwPT09ZSllPTEvMDtlbHNlIGlmKDA9PT1lKXJldHVybiB0O2lmKE9iamVjdC5vdih0KSl7aWYoIWkuaGFzKHQpKWlmKE9iamVjdC52Zyh0LFwiY2xvbmVcIikpaS5zZXQodCx0LmNsb25lKGUsaSkpO2Vsc2V7dmFyIHI9T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpO2lmKG51bGwhPT1yJiZyIT09T2JqZWN0LnByb3RvdHlwZSl0aHJvdyBFcnJvcihcIkNhbid0IGNsb25lIFwiK3QpO3I9T2JqZWN0LmNyZWF0ZShyKSxpLnNldCh0LHIpO2Zvcih2YXIgbiBpbiB0KXJbbl09T2JqZWN0LmNsb25lKHRbbl0sZS0xLGkpfXJldHVybiBpLmdldCh0KX1yZXR1cm4gdH0sT2JqZWN0LmNsZWFyPWZ1bmN0aW9uKHQpe2lmKE9iamVjdC52Zyh0LFwiY2xlYXJcIikpdC5jbGVhcigpO2Vsc2UgZm9yKHZhciBlPU9iamVjdC5rZXlzKHQpLGk9ZS5sZW5ndGg7aTspaS0tLGRlbGV0ZSB0W2VbaV1dO3JldHVybiB0fSxvdC5lZyYmKG90PW90LmVnKTt2YXIgaHQ9e30scHQ9b3Q7aHQuZWc9cyxzLnByb3RvdHlwZS5vbD1mdW5jdGlvbih0LGUpe3JldHVybiBlPWV8fHRoaXMuTWZ8fHB0Lm9sLHRoaXM9PT10fHwhIXQmJih0aGlzLmxlbmd0aD09PXQubGVuZ3RoJiZ0aGlzLmNnKHQpLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiBlKHRbMF0sdFsxXSl9KSl9LHMucHJvdG90eXBlLllmPWZ1bmN0aW9uKHQsZSl7aWYoZT1lfHx0aGlzLiRmfHxwdC5ZZix0aGlzPT09dClyZXR1cm4gMDtpZighdClyZXR1cm4gMTt2YXIgaT1NYXRoLm1pbih0aGlzLmxlbmd0aCx0Lmxlbmd0aCkscj10aGlzLmNnKHQpLnJlZHVjZShmdW5jdGlvbih0LHIsbil7cmV0dXJuIDA9PT10P24+PWk/dDplKHJbMF0sclsxXSk6dH0sMCk7cmV0dXJuIDA9PT1yP3RoaXMubGVuZ3RoLXQubGVuZ3RoOnJ9LGh0LmVnJiYoaHQ9aHQuZWcpO3ZhciB1dD17fTt1dC5lZz1hO3ZhciBsdD1vdDtpZihsdC5hZGRFYWNoKGEucHJvdG90eXBlLHgucHJvdG90eXBlKSxhLnByb3RvdHlwZS5uZz1mdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gUmVkdWNpYmxlLmFkZEVhY2guY2FsbChlLHQpLGV9LGEucHJvdG90eXBlLmN2PWZ1bmN0aW9uKHQsZSl7dmFyIGk9YSh0aGlzKSxyPTA7aWYoXCJbb2JqZWN0IEZ1bmN0aW9uXVwiIT1sdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBuZXcgaS5jb25zdHJ1Y3RvcihmdW5jdGlvbigpe3JldHVybiB0LmNhbGwoZSxpLm5leHQoKSxyKyssaSl9KX0sYS5wcm90b3R5cGUuaHY9ZnVuY3Rpb24odCxlKXt2YXIgaT1hKHRoaXMpLHI9MDtpZihcIltvYmplY3QgRnVuY3Rpb25dXCIhPWx0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXRocm93IG5ldyBUeXBlRXJyb3I7cmV0dXJuIG5ldyBpLmNvbnN0cnVjdG9yKGZ1bmN0aW9uKCl7Zm9yKHZhciBuOzspaWYobj1pLm5leHQoKSx0LmNhbGwoZSxuLHIrKyxpKSlyZXR1cm4gbn0pfSxhLnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24odCl7dmFyIGUsaT1hKHRoaXMpLHI9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLG89MDtpZihcIltvYmplY3QgRnVuY3Rpb25dXCIhPWx0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXRocm93IG5ldyBUeXBlRXJyb3I7dHJ5e2U9aS5uZXh0KCkscj0xPGFyZ3VtZW50cy5sZW5ndGg/dC5jYWxsKG4scixlLG8saSk6ZSxvKyt9Y2F0Y2gocyl7aWYoaXNTdG9wSXRlcmF0aW9uKHMpKXtpZigxPGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGFyZ3VtZW50c1sxXTt0aHJvdyBUeXBlRXJyb3IoXCJjYW5ub3QgcmVkdWNlIGEgdmFsdWUgZnJvbSBhbiBlbXB0eSBpdGVyYXRvciB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIil9dGhyb3cgc310cnl7Zm9yKDs7KWU9aS5uZXh0KCkscj10LmNhbGwobixyLGUsbyxpKSxvKyt9Y2F0Y2goYyl7aWYoaXNTdG9wSXRlcmF0aW9uKGMpKXJldHVybiByO3Rocm93IGN9fSxhLnByb3RvdHlwZS5ldmVyeT1mdW5jdGlvbih0KXt2YXIgZT1hKHRoaXMpLGk9ITA7aWYoXCJbb2JqZWN0IEZ1bmN0aW9uXVwiIT1sdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBlLmN2LmFwcGx5KGUsYXJndW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKCF0KXRocm93IGk9ITEsU3RvcEl0ZXJhdGlvbn0pLGl9LGEucHJvdG90eXBlLnNvbWU9ZnVuY3Rpb24odCl7dmFyIGU9YSh0aGlzKSxpPSExO2lmKFwiW29iamVjdCBGdW5jdGlvbl1cIiE9bHQucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpdGhyb3cgbmV3IFR5cGVFcnJvcjtyZXR1cm4gZS5jdi5hcHBseShlLGFyZ3VtZW50cykuZm9yRWFjaChmdW5jdGlvbih0KXtpZih0KXRocm93IGk9ITAsU3RvcEl0ZXJhdGlvbn0pLGl9LGEucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbigpe3JldHVybiBhLmNvbmNhdChBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGEucHJvdG90eXBlLnB2PWZ1bmN0aW9uKHQsZSl7dmFyIGkscj1hKHRoaXMpLG49ITE7aWYoXCJbb2JqZWN0IEZ1bmN0aW9uXVwiIT1sdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiByLmZvckVhY2goZnVuY3Rpb24obyxzKXtpZighdC5jYWxsKGUsbyxzLHIpKXRocm93IG49ITAsaT1vLFN0b3BJdGVyYXRpb259KSxuP3IuY29uc3RydWN0b3IoW2ldKS5jb25jYXQocik6ci5jb25zdHJ1Y3RvcihbXSl9LGEucHJvdG90eXBlLnV2PWZ1bmN0aW9uKHQsZSl7dmFyIGk9YSh0aGlzKTtpZihcIltvYmplY3QgRnVuY3Rpb25dXCIhPWx0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXRocm93IG5ldyBUeXBlRXJyb3I7cmV0dXJuIGkuY3YoZnVuY3Rpb24ocixuKXtpZighdC5jYWxsKGUscixuLGkpKXRocm93IFN0b3BJdGVyYXRpb247cmV0dXJuIHJ9KX0sYS5wcm90b3R5cGUuaHY9ZnVuY3Rpb24odCxlKXt2YXIgaT1hKHRoaXMpLHI9MDtpZihcIltvYmplY3QgRnVuY3Rpb25dXCIhPWx0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXRocm93IG5ldyBUeXBlRXJyb3I7cmV0dXJuIG5ldyBpLmNvbnN0cnVjdG9yKGZ1bmN0aW9uKCl7Zm9yKHZhciBuOzspaWYobj1pLm5leHQoKSx0LmNhbGwoZSxuLHIrKyxpKSlyZXR1cm4gbn0pfSxhLnByb3RvdHlwZS5jZz1mdW5jdGlvbigpe3JldHVybiBhLmx2KEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sYS5wcm90b3R5cGUuZW51bWVyYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBhLmNvdW50KHQpLmNnKHRoaXMpfSxhLkRmPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPTAsbmV3IGEoZnVuY3Rpb24oKXtpZihcIm9iamVjdFwiPT10eXBlb2YgdClmb3IoOyEoZSBpbiB0KTspe2lmKGU+PXQubGVuZ3RoKXRocm93IFN0b3BJdGVyYXRpb247ZSs9MX1lbHNlIGlmKGU+PXQubGVuZ3RoKXRocm93IFN0b3BJdGVyYXRpb247dmFyIGk9dFtlXTtyZXR1cm4gZSs9MSxpfSl9LGEuZHY9ZnVuY3Rpb24odCxlKXsyPmFyZ3VtZW50cy5sZW5ndGgmJihlPTEvMCk7dmFyIGk9ZnVuY3Rpb24oKXt0aHJvdyBTdG9wSXRlcmF0aW9ufTtyZXR1cm4gbmV3IGEoZnVuY3Rpb24oKXt2YXIgcjt0cnl7cmV0dXJuIGkoKX1jYXRjaChuKXtpZihpc1N0b3BJdGVyYXRpb24obikpe2lmKDA+PWUpdGhyb3cgbjtyZXR1cm4gZS0tLHI9YS5EZih0KSwoaT1yLm5leHQuYmluZChyKSkoKX10aHJvdyBufX0pfSxhLmNvbmNhdD1mdW5jdGlvbih0KXt2YXIgdD1hKHQpLGU9ZnVuY3Rpb24oKXt0aHJvdyBTdG9wSXRlcmF0aW9ufTtyZXR1cm4gbmV3IGEoZnVuY3Rpb24oKXt2YXIgaTt0cnl7cmV0dXJuIGUoKX1jYXRjaChyKXtpZihpc1N0b3BJdGVyYXRpb24ocikpcmV0dXJuIGk9YSh0Lm5leHQoKSksKGU9aS5uZXh0LmJpbmQoaSkpKCk7dGhyb3cgcn19KX0sYS5sdj1mdW5jdGlvbih0KXtyZXR1cm4gdD1hKHQpLm1hcChhKSxuZXcgYSgxPnQubGVuZ3RoP1tdOmZ1bmN0aW9uKCl7dmFyIGUsaT10Lm1hcChmdW5jdGlvbih0KXt0cnl7cmV0dXJuIHQubmV4dCgpfWNhdGNoKGkpe2lmKCFpc1N0b3BJdGVyYXRpb24oaSkpdGhyb3cgaTtlPSEwfX0pO2lmKGUpdGhyb3cgU3RvcEl0ZXJhdGlvbjtyZXR1cm4gaX0pfSxhLmNnPWZ1bmN0aW9uKCl7cmV0dXJuIGEubHYoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9LGEuY2hhaW49ZnVuY3Rpb24oKXtyZXR1cm4gYS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9LGEucmFuZ2U9ZnVuY3Rpb24odCxlLGkpe3JldHVybiAzPmFyZ3VtZW50cy5sZW5ndGgmJihpPTEpLDI+YXJndW1lbnRzLmxlbmd0aCYmKGU9dCx0PTApLHQ9dHx8MCxuZXcgYShmdW5jdGlvbigpe2lmKHQ+PWUpdGhyb3cgU3RvcEl0ZXJhdGlvbjtpZihpc05hTih0KSl0aHJvd1wiXCI7dmFyIHI9dDtyZXR1cm4gdCs9aSxyfSl9LGEuY291bnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYS5yYW5nZSh0LDEvMCxlfHwxKX0sYS5yZXBlYXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMj5hcmd1bWVudHMubGVuZ3RoJiYoZT0xLzApLG5ldyBhLnJhbmdlKCgrZSkpLmN2KGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX0sXCJ1bmRlZmluZWRcIj09dHlwZW9mIGlzU3RvcEl0ZXJhdGlvbiYmKHQuZnY9ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IFN0b3BJdGVyYXRpb25dXCI9PT1sdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0pLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBTdG9wSXRlcmF0aW9uKXt0LlN0b3BJdGVyYXRpb249e307dmFyIGR0PWx0LnByb3RvdHlwZS50b1N0cmluZztsdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PXQuU3RvcEl0ZXJhdGlvbnx8dGhpcyBpbnN0YW5jZW9mIHQuZ3Y/XCJbb2JqZWN0IFN0b3BJdGVyYXRpb25dXCI6ZHQuY2FsbCh0aGlzLGFyZ3VtZW50cyl9fVwidW5kZWZpbmVkXCI9PXR5cGVvZiBSZXR1cm5WYWx1ZSYmKHQuZ3Y9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiB0Lmd2P3ZvaWQodGhpcy52YWx1ZT1lKTpuZXcgdC5ndihlKX0pLHV0LmVnJiYodXQ9dXQuZWcpO3ZhciBmdD17fSxndD14LHZ0PWh0LHl0PU07ZnQuZWc9QXJyYXksQXJyYXkuZW1wdHk9W10sT2JqZWN0LmZyZWV6ZSYmT2JqZWN0LmZyZWV6ZShBcnJheS5lbXB0eSksQXJyYXkuZnJvbT1mdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gZS5hZGRFYWNoKHQpLGV9LEFycmF5LnByb3RvdHlwZS5hZGRFYWNoPWd0LnByb3RvdHlwZS5hZGRFYWNoLEFycmF5LnByb3RvdHlwZS5pZz1ndC5wcm90b3R5cGUuaWcsQXJyYXkucHJvdG90eXBlLnRvQXJyYXk9Z3QucHJvdG90eXBlLnRvQXJyYXksQXJyYXkucHJvdG90eXBlLnJnPWd0LnByb3RvdHlwZS5yZyxBcnJheS5wcm90b3R5cGUuYWxsPWd0LnByb3RvdHlwZS5hbGwsQXJyYXkucHJvdG90eXBlLmllPWd0LnByb3RvdHlwZS5pZSxBcnJheS5wcm90b3R5cGUubWluPWd0LnByb3RvdHlwZS5taW4sQXJyYXkucHJvdG90eXBlLm1heD1ndC5wcm90b3R5cGUubWF4LEFycmF5LnByb3RvdHlwZS5vZz1ndC5wcm90b3R5cGUub2csQXJyYXkucHJvdG90eXBlLnNnPWd0LnByb3RvdHlwZS5zZyxBcnJheS5wcm90b3R5cGUub25seT1ndC5wcm90b3R5cGUub25seSxBcnJheS5wcm90b3R5cGUuYWc9Z3QucHJvdG90eXBlLmFnLEFycmF5LnByb3RvdHlwZS5jZz1ndC5wcm90b3R5cGUuY2csQXJyYXkucHJvdG90eXBlLmhnPWd0LnByb3RvdHlwZS5oZyxBcnJheS5wcm90b3R5cGUucmV2ZXJzZWQ9Z3QucHJvdG90eXBlLnJldmVyc2VkLEFycmF5LnByb3RvdHlwZS5uZz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgdGhpcy5jb25zdHJ1Y3RvcjtyZXR1cm4gZS5hZGRFYWNoKHQpLGV9LEFycmF5LnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4tMSE9PXRoaXMuZmluZCh0LGUpfSxBcnJheS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW3RdfSxBcnJheS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3BsaWNlKHQsMSxlKSwhMH0sQXJyYXkucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wdXNoKHQpLCEwfSxBcnJheS5wcm90b3R5cGVbXCJkZWxldGVcIl09ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmZpbmQodCxlKTtyZXR1cm4tMSE9PWkmJih0aGlzLnNwbGljZShpLDEpLCEwKX0sQXJyYXkucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGU9ZXx8dGhpcy5NZnx8T2JqZWN0Lm9sLGk9MDtpPHRoaXMubGVuZ3RoO2krKylpZihpIGluIHRoaXMmJmUodGhpc1tpXSx0KSlyZXR1cm4gaTtyZXR1cm4tMX0sQXJyYXkucHJvdG90eXBlLnZ2PWZ1bmN0aW9uKHQsZSl7dmFyIGU9ZXx8dGhpcy5NZnx8T2JqZWN0Lm9sLGk9dGhpcy5sZW5ndGg7ZG8gaWYoaS0tLGkgaW4gdGhpcyYmZSh0aGlzW2ldLHQpKXJldHVybiBpO3doaWxlKDA8aSk7cmV0dXJuLTF9LEFycmF5LnByb3RvdHlwZS55dj1mdW5jdGlvbih0LGUsaSl7dmFyIHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDAsMik7cmV0dXJuIGkmJnIucHVzaC5hcHBseShyLGkpLHRoaXMuc3BsaWNlLmFwcGx5KHRoaXMscil9LEFycmF5LnByb3RvdHlwZS51Zz1mdW5jdGlvbigpe2lmKDA9PT10aGlzLmxlbmd0aCl0aHJvdyBFcnJvcihcIkNhbid0IGdldCBvbmUgZWxlbWVudCBmcm9tIGVtcHR5IGFycmF5LlwiKTtmb3IodmFyIHQgaW4gdGhpcylpZihPYmplY3QuYXYodGhpcyx0KSlyZXR1cm4gdGhpc1t0XX0sQXJyYXkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoPTAsdGhpc30sQXJyYXkucHJvdG90eXBlLllmPWZ1bmN0aW9uKHQsZSl7dmFyIGkscixuLG8sZT1lfHxPYmplY3QuWWY7aWYodGhpcz09PXQpcmV0dXJuIDA7aWYoIXR8fCFBcnJheS5pc0FycmF5KHQpKXJldHVybiB2dC5wcm90b3R5cGUuWWYuY2FsbCh0aGlzLHQsZSk7Zm9yKHI9TWF0aC5taW4odGhpcy5sZW5ndGgsdC5sZW5ndGgpLGk9MDtpPHI7aSsrKWlmKGkgaW4gdGhpcyl7aWYoIShpIGluIHQpKXJldHVybi0xO2lmKG49dGhpc1tpXSxvPXRbaV0sbj1lKG4sbykpcmV0dXJuIG59ZWxzZSBpZihpIGluIHQpcmV0dXJuIDE7cmV0dXJuIHRoaXMubGVuZ3RoLXQubGVuZ3RofSxBcnJheS5wcm90b3R5cGUub2w9ZnVuY3Rpb24odCl7dmFyIGUsaSxyPXJ8fE9iamVjdC5vbCxuPTAsbz10aGlzLmxlbmd0aDtpZih0aGlzPT09dClyZXR1cm4hMDtpZighdHx8IUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHZ0LnByb3RvdHlwZS5vbC5jYWxsKHRoaXMsdCk7aWYobyE9PXQubGVuZ3RoKXJldHVybiExO2Zvcig7bjxvOysrbilpZihuIGluIHRoaXMpe2lmKGU9dGhpc1tuXSxpPXRbbl0sZSE9PWkmJmUmJmkmJiFyKGUsaSkpcmV0dXJuITF9ZWxzZSBpZihuIGluIHQpcmV0dXJuITE7cmV0dXJuITB9LEFycmF5LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQpdD0xLzA7ZWxzZSBpZigwPT09dClyZXR1cm4gdGhpczt2YXIgaSxlPWV8fG5ldyB5dCxyPVtdO2ZvcihpIGluIHRoaXMpT2JqZWN0LmF2KHRoaXMsaSkmJihyW2ldPU9iamVjdC5jbG9uZSh0aGlzW2ldLHQtMSxlKSk7cmV0dXJuIHJ9LEFycmF5LnByb3RvdHlwZS5EZj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgYyh0aGlzLHQsZSl9LEFycmF5LnByb3RvdHlwZS5JdGVyYXRvcj1jLGMucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXJ0PT09KG51bGw9PXRoaXMuZW5kP3RoaXMuSGYubGVuZ3RoOnRoaXMuZW5kKSl0aHJvdyBTdG9wSXRlcmF0aW9uO3JldHVybiB0aGlzLkhmW3RoaXMuc3RhcnQrK119LGZ0LmVnJiYoZnQ9ZnQuZWcpO3ZhciBtdD17fTttdC5lZz1oO3ZhciB3dD1odCxUdD1YO09iamVjdC5hZGRFYWNoKGgucHJvdG90eXBlLHgucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChoLnByb3RvdHlwZSx3dC5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKGgucHJvdG90eXBlLFR0LnByb3RvdHlwZSksaC5wcm90b3R5cGUubmc9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHQsdGhpcy5NZix0aGlzLmNvbnRlbnQpfSxoLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBlPWV8fHRoaXMuTWYsaT10aGlzLmhlYWQscj1pLm5leHQ7ciE9PWk7KXtpZihlKHIudmFsdWUsdCkpcmV0dXJuIHI7cj1yLm5leHR9fSxoLnByb3RvdHlwZS52dj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgZT1lfHx0aGlzLk1mLGk9dGhpcy5oZWFkLHI9aS5MZjtyIT09aTspe2lmKGUoci52YWx1ZSx0KSlyZXR1cm4gcjtyPXIuTGZ9fSxoLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIXRoaXMuZmluZCh0LGUpfSxoLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmZpbmQodCxlKTtyZXR1cm4gaT9pLnZhbHVlOnRoaXMuY29udGVudCgpfSxoLnByb3RvdHlwZVtcImRlbGV0ZVwiXT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMudnYodCxlKTtyZXR1cm4hIWkmJihpW1wiZGVsZXRlXCJdKCksdGhpcy5sZW5ndGgtLSwhMCl9LGgucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5oZWFkLm5leHQ9dGhpcy5oZWFkLkxmPXRoaXMuaGVhZCx0aGlzLmxlbmd0aD0wfSxoLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGVhZC5tdihuZXcgdGhpcy5Ob2RlKHQpKSx0aGlzLmxlbmd0aCsrLCEwfSxoLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuaGVhZCxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIGk9bmV3IHRoaXMuTm9kZShhcmd1bWVudHNbZV0pO3QubXYoaSksdGhpcy5sZW5ndGgrK319LGgucHJvdG90eXBlLnVuc2hpZnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5oZWFkLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgaT1uZXcgdGhpcy5Ob2RlKGFyZ3VtZW50c1tlXSk7dC53dihpKSx0aGlzLmxlbmd0aCsrLHQ9aX19LGgucHJvdG90eXBlLnBvcD1mdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5oZWFkO3JldHVybiBlLkxmIT09ZSYmKHQ9ZS5MZi52YWx1ZSxlLkxmW1wiZGVsZXRlXCJdKCksdGhpcy5sZW5ndGgtLSksdH0saC5wcm90b3R5cGUuc2hpZnQ9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuaGVhZDtyZXR1cm4gZS5MZiE9PWUmJih0PWUubmV4dC52YWx1ZSxlLm5leHRbXCJkZWxldGVcIl0oKSx0aGlzLmxlbmd0aC0tKSx0fSxoLnByb3RvdHlwZS5Udj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuaGVhZDtpZihcIm51bWJlclwiPT10eXBlb2YgdCl7dmFyIHI9dDtpZigwPD1yKWZvcih0PWkubmV4dDtyJiYoci0tLHQ9dC5uZXh0LCEodD09aSkpOyk7ZWxzZSBmb3IodD1pOzA+ciYmKHIrKyx0PXQuTGYsISh0PT1pKSk7KTtyZXR1cm4gdH1yZXR1cm4gdHx8ZX0saC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9W10scj10aGlzLmhlYWQsdD10aGlzLlR2KHQsci5uZXh0KSxlPXRoaXMuVHYoZSxyKTt0IT09ZSYmdCE9PXI7KWkucHVzaCh0LnZhbHVlKSx0PXQubmV4dDtyZXR1cm4gaX0saC5wcm90b3R5cGUuc3BsaWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueXYodCxlLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSl9LGgucHJvdG90eXBlLnl2PWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj1bXSxuPXQsdD10aGlzLlR2KHQsdGhpcy5oZWFkKTtmb3Iodm9pZCAwPT09ZSYmKGU9MS8wKTtlLS0mJjA8PWUmJnQhPT10aGlzLmhlYWQ7KXIucHVzaCh0LnZhbHVlKSx0W1wiZGVsZXRlXCJdKCksdD10Lm5leHQsdGhpcy5sZW5ndGgtLTtpZihpKXtmb3IobnVsbD09PW4mJnQ9PT10aGlzLmhlYWQmJih0PXRoaXMuaGVhZC5uZXh0KSxlPTA7ZTxpLmxlbmd0aDtlKyspbj1uZXcgdGhpcy5Ob2RlKGlbZV0pLHQubXYobik7dGhpcy5sZW5ndGgrPWkubGVuZ3RofXJldHVybiByfSxoLnByb3RvdHlwZS5yZXZlcnNlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5oZWFkO2Rve3ZhciBlPXQubmV4dDt0Lm5leHQ9dC5MZix0LkxmPWUsdD10Lm5leHR9d2hpbGUodCE9PXRoaXMuaGVhZCk7cmV0dXJuIHRoaXN9LGgucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciByPXRoaXMuaGVhZCxuPXIubmV4dDtuIT09cjspZT10LmNhbGwoaSxlLG4udmFsdWUsbix0aGlzKSxuPW4ubmV4dDtyZXR1cm4gZX0saC5wcm90b3R5cGUucmVkdWNlUmlnaHQ9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgcj10aGlzLmhlYWQsbj1yLkxmO24hPT1yOyllPXQuY2FsbChpLGUsbi52YWx1ZSxuLHRoaXMpLG49bi5MZjtyZXR1cm4gZX0saC5wcm90b3R5cGUudWc9ZnVuY3Rpb24oKXtpZih0aGlzLmhlYWQ9PT10aGlzLmhlYWQubmV4dCl0aHJvdyBFcnJvcihcIkNhbid0IGdldCBvbmUgdmFsdWUgZnJvbSBlbXB0eSBsaXN0XCIpO3JldHVybiB0aGlzLmhlYWQubmV4dC52YWx1ZX0saC5wcm90b3R5cGUuRGY9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAodGhpcy5oZWFkKX0scC5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMuVWY9PT10aGlzLmhlYWQpdGhyb3cgU3RvcEl0ZXJhdGlvbjt2YXIgdD10aGlzLlVmLnZhbHVlO3JldHVybiB0aGlzLlVmPXRoaXMuVWYubmV4dCx0fSxoLnByb3RvdHlwZS5Ob2RlPXUsdS5wcm90b3R5cGVbXCJkZWxldGVcIl09ZnVuY3Rpb24oKXt0aGlzLkxmLm5leHQ9dGhpcy5uZXh0LHRoaXMubmV4dC5MZj10aGlzLkxmfSx1LnByb3RvdHlwZS5tdj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLkxmO3RoaXMuTGY9dCx0LkxmPWUsZS5uZXh0PXQsdC5uZXh0PXRoaXN9LHUucHJvdG90eXBlLnd2PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubmV4dDt0aGlzLm5leHQ9dCx0Lm5leHQ9ZSxlLkxmPXQsdC5MZj10aGlzfSxtdC5lZyYmKG10PW10LmVnKTt2YXIgU3Q9e30sYnQ9bXQ7U3QuZWc9bCxsLnByb3RvdHlwZS5Tdj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ2fHwodGhpcy5idj17SGc6bmV3IGJ0LExnOm5ldyBidH0pLHRoaXMuYnZ9LGwucHJvdG90eXBlLkV2PWZ1bmN0aW9uKHQsZSl7dGhpcy5tYWtlT2JzZXJ2YWJsZSYmIXRoaXMuZGlzcGF0Y2hNYXBDaGFuZ2VzJiZ0aGlzLm1ha2VPYnNlcnZhYmxlKCk7dmFyIGk9dGhpcy5TdigpOyhlP2kuSGc6aS5MZykucHVzaCh0KSx0aGlzLkl2PSEwfSxsLnByb3RvdHlwZS5Sdj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuU3YoKSxpPShlP2kuSGc6aS5MZykudnYodCk7aWYoIWkpdGhyb3cgRXJyb3IoXCJDYW4ndCByZW1vdmUgbGlzdGVuZXI6IGRvZXMgbm90IGV4aXN0LlwiKTtpW1wiZGVsZXRlXCJdKCl9LGwucHJvdG90eXBlLmt2PWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLlN2KCksbj1cImhhbmRsZU1hcFwiKygoaT9cIldpbGxcIjpcIlwiKStcIkNoYW5nZVwiKTsoaT9yLkhnOnIuTGcpLmZvckVhY2goZnVuY3Rpb24oaSl7dmFyIHI9aSxpPWlbbl18fGk7aS5jYWxsJiZpLmNhbGwocixlLHQsdGhpcyl9LHRoaXMpfSxsLnByb3RvdHlwZS5Ddj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5Fdih0LCEwKX0sbC5wcm90b3R5cGUuT3Y9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuUnYodCwhMCl9LGwucHJvdG90eXBlLlB2PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMua3YodCxlLCEwKX0sU3QuZWcmJihTdD1TdC5lZyk7dmFyIEV0PXt9LEl0PW90LFJ0PVN0LGt0PVg7RXQuZWc9ZCxJdC5hZGRFYWNoKGQucHJvdG90eXBlLFJ0LnByb3RvdHlwZSksSXQuYWRkRWFjaChkLnByb3RvdHlwZSxrdC5wcm90b3R5cGUpLGQucHJvdG90eXBlLmFkZEVhY2g9ZnVuY3Rpb24odCl7dCYmSXQodCk9PT10JiYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC5mb3JFYWNoP1wiZnVuY3Rpb25cIj09dHlwZW9mIHQua2V5cz90LmZvckVhY2goZnVuY3Rpb24odCxlKXt0aGlzLnNldChlLHQpfSx0aGlzKTp0LmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5zZXQodFswXSx0WzFdKX0sdGhpcyk6SXQua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RoaXMuc2V0KGUsdFtlXSl9LHRoaXMpKX0sZC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5WZi5nZXQobmV3IHRoaXMuQXYodCkpO3JldHVybiBpP2kudmFsdWU6MTxhcmd1bWVudHMubGVuZ3RoP2U6dGhpcy5jb250ZW50KHQpfSxkLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgdGhpcy5Bdih0LGUpLHI9dGhpcy5WZi5nZXQoaSksbj0hMTtyZXR1cm4gcj8odGhpcy5JdiYmdGhpcy5Qdih0LHIudmFsdWUpLHIudmFsdWU9ZSk6KHRoaXMuSXYmJnRoaXMuUHYodCx2b2lkIDApLHRoaXMuVmYuYWRkKGkpJiYodGhpcy5sZW5ndGgrKyxuPSEwKSksdGhpcy5JdiYmdGhpcy5rdih0LGUpLG59LGQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnNldChlLHQpfSxkLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuVmYuaGFzKG5ldyB0aGlzLkF2KHQpKX0sZC5wcm90b3R5cGVbXCJkZWxldGVcIl09ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHRoaXMuQXYodCk7aWYodGhpcy5WZi5oYXMoZSkpe3ZhciBpPXRoaXMuVmYuZ2V0KGUpLnZhbHVlO3JldHVybiB0aGlzLkl2JiZ0aGlzLlB2KHQsaSksdGhpcy5WZltcImRlbGV0ZVwiXShlKSx0aGlzLmxlbmd0aC0tLHRoaXMuSXYmJnRoaXMua3YodCx2b2lkIDApLCEwfXJldHVybiExfSxkLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuVmYuY2xlYXIoKSx0aGlzLmxlbmd0aD0wfSxkLnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLlZmLnJlZHVjZShmdW5jdGlvbihlLHIpe3JldHVybiB0LmNhbGwoaSxlLHIudmFsdWUsci5rZXksdGhpcyl9LGUsdGhpcyl9LGQucHJvdG90eXBlLnJlZHVjZVJpZ2h0PWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5WZi5yZWR1Y2VSaWdodChmdW5jdGlvbihlLHIpe3JldHVybiB0LmNhbGwoaSxlLHIudmFsdWUsci5rZXksdGhpcyl9LGUsdGhpcyl9LGQucHJvdG90eXBlLmtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24odCxlKXtyZXR1cm4gZX0pfSxkLnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoRnVuY3Rpb24uaWRlbnRpdHkpfSxkLnByb3RvdHlwZS5Odj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbih0LGUpe3JldHVybltlLHRdfSl9LGQucHJvdG90eXBlLm9sPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9ZXx8SXQub2wsdGhpcz09PXR8fChJdC52Zyh0LFwiZXZlcnlcIik/dC5sZW5ndGg9PT10aGlzLmxlbmd0aCYmdC5ldmVyeShmdW5jdGlvbih0LGkpe3JldHVybiBlKHRoaXMuZ2V0KGkpLHQpfSx0aGlzKTpJdC5rZXlzKHQpLmxlbmd0aD09PXRoaXMubGVuZ3RoJiZJdC5rZXlzKHQpLmV2ZXJ5KGZ1bmN0aW9uKGkpe3JldHVybiBlKHRoaXMuZ2V0KGkpLHRbaV0pfSx0aGlzKSl9LGQucHJvdG90eXBlLkF2PWZ1bmN0aW9uKHQsZSl7dGhpcy5rZXk9dCx0aGlzLnZhbHVlPWV9LEV0LmVnJiYoRXQ9RXQuZWcpO3ZhciBDdD17fSxPdD14LFB0PUV0LEF0PVg7Q3QuZWc9ZixPYmplY3QuYWRkRWFjaChmLnByb3RvdHlwZSxPdC5wcm90b3R5cGUpLFxuICAgIE9iamVjdC5hZGRFYWNoKGYucHJvdG90eXBlLFB0LnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goZi5wcm90b3R5cGUsQXQucHJvdG90eXBlKSxmLnByb3RvdHlwZS5uZz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodCx0aGlzLm1hbmdsZSx0aGlzLmNvbnRlbnQpfSxmLnByb3RvdHlwZS54dj1mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwia2V5IG11c3QgYmUgYSBzdHJpbmcuXCIpfSxmLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCxlKXt0aGlzLnh2KHQpO3ZhciBpPVwiflwiK3Q7cmV0dXJuIGkgaW4gdGhpcy5WZj90aGlzLlZmW2ldOjE8YXJndW1lbnRzLmxlbmd0aD9lOnRoaXMuY29udGVudCgpfSxmLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt0aGlzLnh2KHQpO3ZhciBpPVwiflwiK3Q7cmV0dXJuIGkgaW4gdGhpcy5WZj8odGhpcy5WZltpXT1lLCExKToodGhpcy5sZW5ndGgrKyx0aGlzLlZmW2ldPWUsITApfSxmLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueHYodCksXCJ+XCIrdCBpbiB0aGlzLlZmfSxmLnByb3RvdHlwZVtcImRlbGV0ZVwiXT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54dih0KSxcIn5cIit0IGluIHRoaXMuVmYmJihkZWxldGUgdGhpcy5WZltcIn5cIit0XSx0aGlzLmxlbmd0aC0tLCEwKX0sZi5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5WZilkZWxldGUgdGhpcy5WZlt0XTt0aGlzLmxlbmd0aD0wfSxmLnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgciBpbiB0aGlzLlZmKWU9dC5jYWxsKGksZSx0aGlzLlZmW3JdLHIuc2xpY2UoMSksdGhpcyk7cmV0dXJuIGV9LGYucHJvdG90eXBlLnVnPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuVmYpcmV0dXJuIHRoaXMuVmZbdF07dGhyb3cgRXJyb3IoXCJDYW4ndCBnZXQgb25lIHZhbHVlIGZyb20gZW1wdHkgZGljdGlvbmFyeS5cIil9LEN0LmVnJiYoQ3Q9Q3QuZWcpO3ZhciBOdD17fSx4dD1DdCxCdD1tdCxGdD14LF90PUIsRHQ9SCxIdD1YO050LmVnPWcsT2JqZWN0LmFkZEVhY2goZy5wcm90b3R5cGUsRnQucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChnLnByb3RvdHlwZSxfdC5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKGcucHJvdG90eXBlLEh0LnByb3RvdHlwZSksZy5wcm90b3R5cGUuSmY9eHQsZy5wcm90b3R5cGUuS2Y9QnQsZy5wcm90b3R5cGUubmc9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHQsdGhpcy5NZix0aGlzLlFmLHRoaXMuY29udGVudCl9LGcucHJvdG90eXBlLmhhcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLlFmKHQpO3JldHVybiB0aGlzLnFmLmdldChlKS5oYXModCl9LGcucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLlFmKHQpLGk9dGhpcy5xZjtyZXR1cm4gaS5oYXMoZSk/aS5nZXQoZSkuZ2V0KHQpOnRoaXMuY29udGVudCh0KX0sZy5wcm90b3R5cGVbXCJkZWxldGVcIl09ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5RZih0KSxpPXRoaXMucWY7aWYoaS5oYXMoZSkpe3ZhciByPWkuZ2V0KGUpO2lmKHJbXCJkZWxldGVcIl0odCkpcmV0dXJuIHRoaXMubGVuZ3RoLS0sMD09PXIubGVuZ3RoJiZpW1wiZGVsZXRlXCJdKGUpLCEwfXJldHVybiExfSxnLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMucWYuY2xlYXIoKSx0aGlzLmxlbmd0aD0wfSxnLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5RZih0KSxpPXRoaXMucWY7cmV0dXJuIGkuaGFzKGUpfHxpLnNldChlLG5ldyB0aGlzLktmKG51bGwsdGhpcy5NZikpLCFpLmdldChlKS5oYXModCkmJihpLmdldChlKS5hZGQodCksdGhpcy5sZW5ndGgrKywhMCl9LGcucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMucWYucmVkdWNlKGZ1bmN0aW9uKGUscil7cmV0dXJuIHIucmVkdWNlKGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuY2FsbChpLGUscixyLHRoaXMpfSxlLHRoaXMpfSxlLHRoaXMpfSxnLnByb3RvdHlwZS51Zz1mdW5jdGlvbigpe2lmKDA9PT10aGlzLmxlbmd0aCl0aHJvdyBFcnJvcihcIkNhbid0IGdldCBvbmUgdmFsdWUgZnJvbSBlbXB0eSBzZXQuXCIpO3JldHVybiB0aGlzLnFmLnVnKCkudWcoKX0sZy5wcm90b3R5cGUuRGY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xZi52YWx1ZXMoKS5hZygpLkRmKCl9LGcucHJvdG90eXBlLmxvZz1mdW5jdGlvbih0LGUsaSxyKXt0PXR8fER0LmtnLGU9ZXx8dGhpcy5CdixpfHwoaT1jb25zb2xlLmxvZyxyPWNvbnNvbGUpO3ZhciBpPWkuYmluZChyKSxuPXRoaXMucWYsbz1uLmtleXMoKTtvLmZvckVhY2goZnVuY3Rpb24ocyxhKXt2YXIgYyxoO2E9PT1vLmxlbmd0aC0xPyhjPXQuYmcsaD1cIiBcIik6KGM9MD09PWE/dC5UZzp0LkVnLGg9dC5JZyk7dmFyIHA9bi5nZXQocyk7aS5jYWxsKHIsYyt0Lm1nK3QuVGcrXCIgXCIrcykscC5mb3JFYWNoKGZ1bmN0aW9uKG4sbyl7dmFyIHMsYTtvPT09cC5oZWFkLkxmPyhzPXQuYmcsYT1cIiBcIik6KHM9dC5FZyxhPXQuSWcpO3ZhciBjO2UobyxmdW5jdGlvbihlKXtjP2kuY2FsbChyLGgrXCIgXCIrYStcIiAgXCIrZSk6KGkuY2FsbChyLGgrXCIgXCIrcyt0Lm1nK3QubWcrZSksYz0hMCl9LGZ1bmN0aW9uKGUpe2kuY2FsbChyLGgrXCIgXCIrdC5JZytcIiAgXCIrZSl9KX0pfSl9LGcucHJvdG90eXBlLkJ2PWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC52YWx1ZTtPYmplY3QoaSk9PT1pP0pTT04uc3RyaW5naWZ5KGksbnVsbCw0KS5zcGxpdChcIlxcblwiKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UoXCIgXCIrdCl9KTplKFwiIFwiK2kpfSxOdC5lZyYmKE50PU50LmVnKTt2YXIgTHQ9e30sTXQ9TnQsanQ9eCxVdD1FdCxWdD1YO0x0LmVnPXYsT2JqZWN0LmFkZEVhY2godi5wcm90b3R5cGUsanQucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaCh2LnByb3RvdHlwZSxVdC5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKHYucHJvdG90eXBlLFZ0LnByb3RvdHlwZSksdi5wcm90b3R5cGUubmc9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHQsdGhpcy5NZix0aGlzLlFmLHRoaXMuY29udGVudCl9LHYucHJvdG90eXBlLmxvZz1mdW5jdGlvbih0LGUpe2U9ZXx8dGhpcy5zdHJpbmdpZnksdGhpcy5WZi5sb2codCxlKX0sdi5wcm90b3R5cGUuc3RyaW5naWZ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUrSlNPTi5zdHJpbmdpZnkodC5rZXkpK1wiOiBcIitKU09OLnN0cmluZ2lmeSh0LnZhbHVlKX0sTHQuZWcmJihMdD1MdC5lZyk7dmFyIFF0PXt9LHF0PW10LEp0PU50LEt0PXgsR3Q9Qix6dD1YLFd0PXJ0O1F0LmVnPXksT2JqZWN0LmFkZEVhY2goeS5wcm90b3R5cGUsS3QucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaCh5LnByb3RvdHlwZSxHdC5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKHkucHJvdG90eXBlLHp0LnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goeS5wcm90b3R5cGUsV3QucHJvdG90eXBlKSx5LnByb3RvdHlwZS5HZj1xdCx5LnByb3RvdHlwZS56Zj1KdCx5LnByb3RvdHlwZS5uZz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodCx0aGlzLk1mLHRoaXMuUWYsdGhpcy5jb250ZW50KX0seS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0PW5ldyB0aGlzLm9yZGVyLk5vZGUodCksdGhpcy5WZi5oYXModCl9LHkucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgdGhpcy5vcmRlci5Ob2RlKHQpO3JldHVybihlPXRoaXMuVmYuZ2V0KGUpKT9lLnZhbHVlOnRoaXMuY29udGVudCh0KX0seS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB0aGlzLm9yZGVyLk5vZGUodCk7cmV0dXJuIXRoaXMuVmYuaGFzKGUpJiYodGhpcy4kZyYmdGhpcy5udihbdF0sW10sMCksdGhpcy5vcmRlci5hZGQodCksZT10aGlzLm9yZGVyLmhlYWQuTGYsdGhpcy5WZi5hZGQoZSksdGhpcy5sZW5ndGgrKyx0aGlzLiRnJiZ0aGlzLlhnKFt0XSxbXSwwKSwhMCl9LHkucHJvdG90eXBlW1wiZGVsZXRlXCJdPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB0aGlzLm9yZGVyLk5vZGUodCk7cmV0dXJuISF0aGlzLlZmLmhhcyhlKSYmKHRoaXMuJGcmJnRoaXMubnYoW10sW3RdLDApLGU9dGhpcy5WZi5nZXQoZSksdGhpcy5WZltcImRlbGV0ZVwiXShlKSxlW1wiZGVsZXRlXCJdKCksdGhpcy5sZW5ndGgtLSx0aGlzLiRnJiZ0aGlzLlhnKFtdLFt0XSwwKSwhMCl9LHkucHJvdG90eXBlLnVnPWZ1bmN0aW9uKCl7aWYoMD09PXRoaXMubGVuZ3RoKXRocm93IEVycm9yKFwiQ2FuJ3QgZ2V0IG9uZSB2YWx1ZSBmcm9tIGVtcHR5IHNldC5cIik7cmV0dXJuIHRoaXMuVmYudWcoKS52YWx1ZX0seS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLlZmLmNsZWFyKCksdGhpcy5vcmRlci5jbGVhcigpLHRoaXMubGVuZ3RoPTB9LHkucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMub3JkZXIucmVkdWNlKGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuY2FsbChpLGUscixyLHRoaXMpfSxlLHRoaXMpfSx5LnByb3RvdHlwZS5yZWR1Y2VSaWdodD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMub3JkZXIucmVkdWNlUmlnaHQoZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5jYWxsKGksZSxyLHIsdGhpcyl9LGUsdGhpcyl9LHkucHJvdG90eXBlLkRmPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JkZXIuRGYoKX0seS5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5WZjtyZXR1cm4gdC5sb2cuYXBwbHkodCxhcmd1bWVudHMpfSxRdC5lZyYmKFF0PVF0LmVnKTt2YXIgJHQ9e30sWXQ9UXQsWHQ9eCxadD1CLHRlPVg7JHQuZWc9bSxPYmplY3QuYWRkRWFjaChtLnByb3RvdHlwZSxYdC5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKG0ucHJvdG90eXBlLFp0LnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2gobS5wcm90b3R5cGUsdGUucHJvdG90eXBlKSxtLnByb3RvdHlwZS5uZz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodCx0aGlzLm1heExlbmd0aCx0aGlzLk1mLHRoaXMuUWYsdGhpcy5jb250ZW50KX0sbS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLlZmLmhhcyh0KX0sbS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMuVmYuZ2V0KHQpLHZvaWQgMCE9PXQ/KHRoaXMuVmZbXCJkZWxldGVcIl0odCksdGhpcy5WZi5hZGQodCkpOnQ9dGhpcy5jb250ZW50KCksdH0sbS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLlZmLmhhcyh0KSYmKHRoaXMuVmZbXCJkZWxldGVcIl0odCksdGhpcy5sZW5ndGgtLSksdGhpcy5WZi5hZGQodCksdGhpcy5sZW5ndGgrKywhKHRoaXMuVmYubGVuZ3RoPnRoaXMubWF4TGVuZ3RoKXx8KHRoaXMuVmZbXCJkZWxldGVcIl0odGhpcy5WZi5vcmRlci5oZWFkLm5leHQudmFsdWUpLHRoaXMubGVuZ3RoLS0sITEpfSxtLnByb3RvdHlwZVtcImRlbGV0ZVwiXT1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuVmZbXCJkZWxldGVcIl0odCkmJih0aGlzLmxlbmd0aC0tLCEwKX0sbS5wcm90b3R5cGUudWc9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5sZW5ndGgpdGhyb3cgRXJyb3IoXCJDYW4ndCBnZXQgb25lIHZhbHVlIGZyb20gZW1wdHkgY29sbGVjdGlvbi5cIik7cmV0dXJuIHRoaXMuVmYudWcoKX0sbS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLlZmLmNsZWFyKCksdGhpcy5sZW5ndGg9MH0sbS5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5WZi5yZWR1Y2UoZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5jYWxsKGksZSxyLHIsdGhpcyl9LGUsdGhpcyl9LG0ucHJvdG90eXBlLnJlZHVjZVJpZ2h0PWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5WZi5yZWR1Y2VSaWdodChmdW5jdGlvbih0LGUpe3JldHVybiBjYWxsYmFjay5jYWxsKGksdCxlLGUsdGhpcyl9LGJhc2lzLHRoaXMpfSxtLnByb3RvdHlwZS5EZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLlZmLkRmKCl9LCR0LmVnJiYoJHQ9JHQuZWcpO3ZhciBlZT17fSxpZT0kdCxyZT14LG5lPUV0LG9lPVg7ZWUuZWc9dyxPYmplY3QuYWRkRWFjaCh3LnByb3RvdHlwZSxyZS5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKHcucHJvdG90eXBlLG5lLnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2gody5wcm90b3R5cGUsb2UucHJvdG90eXBlKSx3LnByb3RvdHlwZS5uZz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodCx0aGlzLm1heExlbmd0aCx0aGlzLk1mLHRoaXMuUWYsdGhpcy5jb250ZW50KX0sdy5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKHQsZSl7ZT1lfHx0aGlzLnN0cmluZ2lmeSx0aGlzLlZmLmxvZyh0LGUpfSx3LnByb3RvdHlwZS5zdHJpbmdpZnk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZStKU09OLnN0cmluZ2lmeSh0LmtleSkrXCI6IFwiK0pTT04uc3RyaW5naWZ5KHQudmFsdWUpfSxlZS5lZyYmKGVlPWVlLmVnKTt2YXIgc2U9e30sYWU9UXQsY2U9eCxoZT1FdCxwZT1YO3NlLmVnPVQsT2JqZWN0LmFkZEVhY2goVC5wcm90b3R5cGUsY2UucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChULnByb3RvdHlwZSxoZS5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKFQucHJvdG90eXBlLHBlLnByb3RvdHlwZSksVC5wcm90b3R5cGUubmc9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHQsdGhpcy5NZix0aGlzLlFmLHRoaXMuY29udGVudCl9LFQucHJvdG90eXBlLmxvZz1mdW5jdGlvbih0LGUpe2U9ZXx8dGhpcy5zdHJpbmdpZnksdGhpcy5WZi5sb2codCxlKX0sVC5wcm90b3R5cGUuc3RyaW5naWZ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUrSlNPTi5zdHJpbmdpZnkodC5rZXkpK1wiOiBcIitKU09OLnN0cmluZ2lmeSh0LnZhbHVlKX0sc2UuZWcmJihzZT1zZS5lZyk7dmFyIHVlPXt9LGxlPXNlO3VlLmVnPVMsUy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShsZS5wcm90b3R5cGUpLFMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVMsUy5wcm90b3R5cGUubmc9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHQsdGhpcy5XZix0aGlzLk1mLHRoaXMuUWYpfSxTLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmdldCh0KTtpLnl2KDAsaS5sZW5ndGgsZSl9LFMucHJvdG90eXBlLldmPWZ1bmN0aW9uKCl7cmV0dXJuW119LHVlLmVnJiYodWU9dWUuZWcpO3ZhciBkZT17fTtkZS5lZz1iO3ZhciBmZT1YLGdlPXJ0O09iamVjdC5hZGRFYWNoKGIucHJvdG90eXBlLHgucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChiLnByb3RvdHlwZSxmZS5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKGIucHJvdG90eXBlLGdlLnByb3RvdHlwZSksYi5wcm90b3R5cGUubmc9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHQsdGhpcy5NZix0aGlzLiRmLHRoaXMuY29udGVudCl9LGIucHJvdG90eXBlLmhhcz1mdW5jdGlvbih0KXt2YXIgZT1FKHRoaXMuSGYsdCx0aGlzLiRmKTtyZXR1cm4gMDw9ZSYmdGhpcy5NZih0aGlzLkhmW2VdLHQpfSxiLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9SSh0aGlzLkhmLHQsdGhpcy4kZix0aGlzLk1mKTtyZXR1cm4tMSE9PWU/dGhpcy5IZltlXTp0aGlzLmNvbnRlbnQodCl9LGIucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt2YXIgZTtlPXRoaXMuSGY7dmFyIGk9dGhpcy4kZixyPUUoZSx0LGkpO2lmKDA+cillPS1yLTE7ZWxzZXtmb3IodmFyIG49ZS5sZW5ndGgtMTtyPG4mJjA9PT1pKHQsZVtyKzFdKTspcisrO2U9cn1yZXR1cm4gdGhpcy4kZyYmdGhpcy5udihbdF0sW10sZSksdGhpcy5IZi5zcGxpY2UoZSwwLHQpLHRoaXMubGVuZ3RoKyssdGhpcy4kZyYmdGhpcy5YZyhbdF0sW10sZSksITB9LGIucHJvdG90eXBlW1wiZGVsZXRlXCJdPWZ1bmN0aW9uKHQpe3ZhciBlPUkodGhpcy5IZix0LHRoaXMuJGYsdGhpcy5NZik7cmV0dXJuLTEhPT1lJiYodGhpcy4kZyYmdGhpcy5udihbXSxbdF0sZSksdGhpcy5IZi5zcGxpY2UoZSwxKSx0aGlzLmxlbmd0aC0tLHRoaXMuJGcmJnRoaXMuWGcoW10sW3RdLGUpLCEwKX0sYi5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbih0KXtyZXR1cm4gSSh0aGlzLkhmLHQsdGhpcy4kZix0aGlzLk1mKX0sYi5wcm90b3R5cGUubGFzdEluZGV4T2Y9ZnVuY3Rpb24odCl7cmV0dXJuIFIodGhpcy5IZix0LHRoaXMuJGYsdGhpcy5NZil9LGIucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIEkodGhpcy5IZix0LHRoaXMuJGYsdGhpcy5NZil9LGIucHJvdG90eXBlLnZ2PWZ1bmN0aW9uKHQpe3JldHVybiBSKHRoaXMuSGYsdCx0aGlzLiRmLHRoaXMuTWYpfSxiLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKCl7dGhpcy5hZGRFYWNoKGFyZ3VtZW50cyl9LGIucHJvdG90eXBlLnVuc2hpZnQ9ZnVuY3Rpb24oKXt0aGlzLmFkZEVhY2goYXJndW1lbnRzKX0sYi5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuSGYucG9wKCl9LGIucHJvdG90eXBlLnNoaWZ0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuSGYuc2hpZnQoKX0sYi5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5IZi5zbGljZS5hcHBseSh0aGlzLkhmLGFyZ3VtZW50cyl9LGIucHJvdG90eXBlLnNwbGljZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnl2KHQsZSxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMikpfSxiLnByb3RvdHlwZS55dj1mdW5jdGlvbih0LGUsaSl7aWYodm9pZCAwPT09dCYmdm9pZCAwPT09ZSlyZXR1cm5bXTt0PXR8fDAsMD50JiYodCs9dGhpcy5sZW5ndGgpLHZvaWQgMD09PWUmJihlPTEvMCk7dmFyIHI9dGhpcy5zbGljZSh0LHQrZSk7cmV0dXJuIHRoaXMuJGcmJnRoaXMubnYoaSxyLHQpLHRoaXMuSGYuc3BsaWNlKHQsZSksdGhpcy5hZGRFYWNoKGkpLHRoaXMuJGcmJnRoaXMuWGcoaSxyLHQpLHJ9LGIucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMuSGYucmVkdWNlKGZ1bmN0aW9uKGUscixuKXtyZXR1cm4gdC5jYWxsKGksZSxyLG4sdGhpcyl9LGUsdGhpcyl9LGIucHJvdG90eXBlLnJlZHVjZVJpZ2h0PWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5IZi5yZWR1Y2VSaWdodChmdW5jdGlvbih0LGUscil7cmV0dXJuIGNhbGxiYWNrLmNhbGwoaSx0LGUscix0aGlzKX0sYmFzaXMsdGhpcyl9LGIucHJvdG90eXBlLm1pbj1mdW5jdGlvbigpe2lmKHRoaXMubGVuZ3RoKXJldHVybiB0aGlzLkhmWzBdfSxiLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24oKXtpZih0aGlzLmxlbmd0aClyZXR1cm4gdGhpcy5IZlt0aGlzLmxlbmd0aC0xXX0sYi5wcm90b3R5cGUudWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5IZi51ZygpfSxiLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3ZhciB0O3RoaXMuJGcmJih0PXRoaXMuSGYuc2xpY2UoKSx0aGlzLm52KFtdLHQsMCkpLHRoaXMubGVuZ3RoPTAsdGhpcy5IZi5jbGVhcigpLHRoaXMuJGcmJnRoaXMuWGcoW10sdCwwKX0sYi5wcm90b3R5cGUub2w9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5IZi5vbCh0LGUpfSxiLnByb3RvdHlwZS5ZZj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLkhmLllmKHQsZSl9LGIucHJvdG90eXBlLkRmPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyB0aGlzLkl0ZXJhdG9yKHRoaXMuSGYsdCxlKX0sYi5wcm90b3R5cGUuSXRlcmF0b3I9QXJyYXkucHJvdG90eXBlLkl0ZXJhdG9yLGRlLmVnJiYoZGU9ZGUuZWcpO3ZhciB2ZT17fTt2ZS5lZz1rO3ZhciB5ZT1kZSxtZT1CLHdlPVg7ay5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh5ZS5wcm90b3R5cGUpLGsucHJvdG90eXBlLmNvbnN0cnVjdG9yPWssT2JqZWN0LmFkZEVhY2goay5wcm90b3R5cGUsbWUucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChrLnByb3RvdHlwZSx3ZS5wcm90b3R5cGUpLGsucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy5oYXModCkmJih5ZS5wcm90b3R5cGUuYWRkLmNhbGwodGhpcyx0KSwhMCl9LGsucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbih0LGUsaSl7dmFyIHI9dGhpcztyZXR1cm4gdGhpcy5IZi5yZWR1Y2UoZnVuY3Rpb24oZSxuLG8pe3JldHVybiB0LmNhbGwoaSxlLG4sbixyLG8pfSxlKX0say5wcm90b3R5cGUucmVkdWNlUmlnaHQ9ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRoaXM7cmV0dXJuIHRoaXMuSGYucmVkdWNlUmlnaHQoZnVuY3Rpb24oZSxuLG8pe3JldHVybiB0LmNhbGwoaSxlLG4sbixyLG8pfSxlKX0sdmUuZWcmJih2ZT12ZS5lZyk7dmFyIFRlPXt9LFNlPXZlLGJlPXgsRWU9RXQsSWU9WDtUZS5lZz1DLE9iamVjdC5hZGRFYWNoKEMucHJvdG90eXBlLGJlLnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goQy5wcm90b3R5cGUsRWUucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChDLnByb3RvdHlwZSxJZS5wcm90b3R5cGUpLEMucHJvdG90eXBlLm5nPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0LHRoaXMuTWYsdGhpcy4kZix0aGlzLmNvbnRlbnQpfSxUZS5lZyYmKFRlPVRlLmVnKTt2YXIgUmU9e307UmUuZWc9Tzt2YXIga2U9QixDZT1YLE9lPXJ0LFBlPUg7T2JqZWN0LmFkZEVhY2goTy5wcm90b3R5cGUseC5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKE8ucHJvdG90eXBlLGtlLnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goTy5wcm90b3R5cGUsQ2UucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChPLnByb3RvdHlwZSxPZS5wcm90b3R5cGUpLE8ucHJvdG90eXBlLm5nPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0LHRoaXMuTWYsdGhpcy4kZix0aGlzLmNvbnRlbnQpfSxPLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLnJvb3QmJih0aGlzLlpmKHQpLHRoaXMuTWYodCx0aGlzLnJvb3QudmFsdWUpKX0sTy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJvb3QmJih0aGlzLlpmKHQpLHRoaXMuTWYodCx0aGlzLnJvb3QudmFsdWUpKT90aGlzLnJvb3QudmFsdWU6dGhpcy5jb250ZW50KHQpfSxPLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHRoaXMuTm9kZSh0KTtyZXR1cm4gdGhpcy5yb290Pyh0aGlzLlpmKHQpLCF0aGlzLk1mKHQsdGhpcy5yb290LnZhbHVlKSYmKHRoaXMuJGcmJnRoaXMubnYoW3RdLFtdLHRoaXMucm9vdC5pbmRleCksMD50aGlzLiRmKHQsdGhpcy5yb290LnZhbHVlKT8oZS5yaWdodD10aGlzLnJvb3QsZS5sZWZ0PXRoaXMucm9vdC5sZWZ0LHRoaXMucm9vdC5sZWZ0PW51bGwpOihlLmxlZnQ9dGhpcy5yb290LGUucmlnaHQ9dGhpcy5yb290LnJpZ2h0LHRoaXMucm9vdC5yaWdodD1udWxsKSx0aGlzLnJvb3QuRnYoKSxlLkZ2KCksdGhpcy5yb290PWUsdGhpcy5sZW5ndGgrKyx0aGlzLiRnJiZ0aGlzLlhnKFt0XSxbXSx0aGlzLnJvb3QuaW5kZXgpLCEwKSk6KHRoaXMuJGcmJnRoaXMubnYoW3RdLFtdLDApLHRoaXMucm9vdD1lLHRoaXMubGVuZ3RoKyssdGhpcy4kZyYmdGhpcy5YZyhbdF0sW10sMCksITApfSxPLnByb3RvdHlwZVtcImRlbGV0ZVwiXT1mdW5jdGlvbih0KXtpZih0aGlzLnJvb3QmJih0aGlzLlpmKHQpLHRoaXMuTWYodCx0aGlzLnJvb3QudmFsdWUpKSl7dmFyIGU9dGhpcy5yb290LmluZGV4O2lmKHRoaXMuJGcmJnRoaXMubnYoW10sW3RdLGUpLHRoaXMucm9vdC5sZWZ0KXt2YXIgaT10aGlzLnJvb3QucmlnaHQ7dGhpcy5yb290PXRoaXMucm9vdC5sZWZ0LHRoaXMuWmYodCksdGhpcy5yb290LnJpZ2h0PWl9ZWxzZSB0aGlzLnJvb3Q9dGhpcy5yb290LnJpZ2h0O3JldHVybiB0aGlzLmxlbmd0aC0tLHRoaXMucm9vdCYmdGhpcy5yb290LkZ2KCksdGhpcy4kZyYmdGhpcy5YZyhbXSxbdF0sZSksITB9cmV0dXJuITF9LE8ucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucm9vdCYmKHRoaXMuWmYodCksdGhpcy5NZih0LHRoaXMucm9vdC52YWx1ZSkpP3RoaXMucm9vdC5pbmRleDotMX0sTy5wcm90b3R5cGUuZmluZD1mdW5jdGlvbih0KXtpZih0aGlzLnJvb3QmJih0aGlzLlpmKHQpLHRoaXMuTWYodCx0aGlzLnJvb3QudmFsdWUpKSlyZXR1cm4gdGhpcy5yb290fSxPLnByb3RvdHlwZS5fdj1mdW5jdGlvbih0KXtpZih0aGlzLnJvb3Qpe2Zvcih0PXR8fHRoaXMucm9vdDt0LnJpZ2h0Oyl0PXQucmlnaHQ7cmV0dXJuIHR9fSxPLnByb3RvdHlwZS5Edj1mdW5jdGlvbih0KXtpZih0aGlzLnJvb3Qpe2Zvcih0PXR8fHRoaXMucm9vdDt0LmxlZnQ7KXQ9dC5sZWZ0O3JldHVybiB0fX0sTy5wcm90b3R5cGUuSHY9ZnVuY3Rpb24odCl7aWYodGhpcy5yb290KXJldHVybiB0aGlzLlpmKHQpLHRoaXMucm9vdH0sTy5wcm90b3R5cGUuTHY9ZnVuY3Rpb24odCl7aWYodGhpcy5yb290KXJldHVybiB0aGlzLlpmKHQpLHRoaXMucm9vdC50ZygpfSxPLnByb3RvdHlwZS5YZj1mdW5jdGlvbih0KXtpZih0aGlzLnJvb3QpcmV0dXJuIHRoaXMuWmYodCksMD09PXRoaXMuJGYodCx0aGlzLnJvb3QudmFsdWUpP3RoaXMucm9vdDp0aGlzLnJvb3QuTXYoKX0sTy5wcm90b3R5cGUuanY9ZnVuY3Rpb24odCl7aWYodGhpcy5yb290KXJldHVybiB0aGlzLlpmKHQpLHRoaXMuJGYodCx0aGlzLnJvb3QudmFsdWUpLHRoaXMucm9vdC5NdigpfSxPLnByb3RvdHlwZS5wb3A9ZnVuY3Rpb24oKXtpZih0aGlzLnJvb3Qpe3ZhciB0PXRoaXMuX3YoKTtyZXR1cm4gdGhpc1tcImRlbGV0ZVwiXSh0LnZhbHVlKSx0LnZhbHVlfX0sTy5wcm90b3R5cGUuc2hpZnQ9ZnVuY3Rpb24oKXtpZih0aGlzLnJvb3Qpe3ZhciB0PXRoaXMuRHYoKTtyZXR1cm4gdGhpc1tcImRlbGV0ZVwiXSh0LnZhbHVlKSx0LnZhbHVlfX0sTy5wcm90b3R5cGUucHVzaD1mdW5jdGlvbigpe3RoaXMuYWRkRWFjaChhcmd1bWVudHMpfSxPLnByb3RvdHlwZS51bnNoaWZ0PWZ1bmN0aW9uKCl7dGhpcy5hZGRFYWNoKGFyZ3VtZW50cyl9LE8ucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7dD10fHwwLGU9ZXx8dGhpcy5sZW5ndGgsMD50JiYodCs9dGhpcy5sZW5ndGgpLDA+ZSYmKGUrPXRoaXMubGVuZ3RoKTt2YXIgaT1bXTtpZih0aGlzLnJvb3QpZm9yKHRoaXMuVXYodCk7dGhpcy5yb290LmluZGV4PGUmJihpLnB1c2godGhpcy5yb290LnZhbHVlKSx0aGlzLnJvb3QucmlnaHQpOyl0aGlzLlpmKHRoaXMucm9vdC5NdigpLnZhbHVlKTtyZXR1cm4gaX0sTy5wcm90b3R5cGUuc3BsaWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueXYodCxlLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSl9LE8ucHJvdG90eXBlLnl2PWZ1bmN0aW9uKHQsZSxpKXtpZih2b2lkIDA9PT10JiZ2b2lkIDA9PT1lKXJldHVybltdO3Q9dHx8MCwwPnQmJih0Kz10aGlzLmxlbmd0aCksdm9pZCAwPT09ZSYmKGU9MS8wKTt2YXIgcj1bXTtpZih0aGlzLnJvb3QpZm9yKHRoaXMuVXYodCksdD0wO3Q8ZTt0Kyspe3IucHVzaCh0aGlzLnJvb3QudmFsdWUpO3ZhciBuPXRoaXMucm9vdC5NdigpO2lmKHRoaXNbXCJkZWxldGVcIl0odGhpcy5yb290LnZhbHVlKSwhbilicmVhazt0aGlzLlpmKG4udmFsdWUpfXJldHVybiB0aGlzLmFkZEVhY2goaSkscn0sTy5wcm90b3R5cGUuWmY9ZnVuY3Rpb24odCl7dmFyIGUsaSxyLG4sbyxzO2lmKHRoaXMucm9vdCl7Zm9yKGU9aT1yPW5ldyB0aGlzLk5vZGUscz1uZXcgdGhpcy5Ob2RlLG89dGhpcy5yb290OzspaWYobj10aGlzLiRmKHQsby52YWx1ZSksMD5uKXtpZighby5sZWZ0KWJyZWFrO2lmKDA+dGhpcy4kZih0LG8ubGVmdC52YWx1ZSkmJihuPW8ubGVmdCxvLmxlZnQ9bi5yaWdodCxvLkZ2KCksbi5yaWdodD1vLG4uRnYoKSxvPW4sIW8ubGVmdCkpYnJlYWs7bj1uZXcgUCxuLnJpZ2h0PW8sbi5sZWZ0PXMubGVmdCxzLmxlZnQ9bixyLmxlZnQ9byxyLkZ2KCkscj1vLG89by5sZWZ0fWVsc2V7aWYoISgwPG4pKWJyZWFrO2lmKCFvLnJpZ2h0KWJyZWFrO2lmKDA8dGhpcy4kZih0LG8ucmlnaHQudmFsdWUpJiYobj1vLnJpZ2h0LG8ucmlnaHQ9bi5sZWZ0LG8uRnYoKSxuLmxlZnQ9byxuLkZ2KCksbz1uLCFvLnJpZ2h0KSlicmVhaztuPW5ldyBQLG4ubGVmdD1vLG4ucmlnaHQ9cy5yaWdodCxzLnJpZ2h0PW4saS5yaWdodD1vLGkuRnYoKSxpPW8sbz1vLnJpZ2h0fWZvcihpLnJpZ2h0PW8ubGVmdCxpLkZ2KCksci5sZWZ0PW8ucmlnaHQsci5GdigpLG8ubGVmdD1lLnJpZ2h0LG8ucmlnaHQ9ZS5sZWZ0O3MubGVmdDspcy5sZWZ0LnJpZ2h0LkZ2KCkscy5sZWZ0PXMubGVmdC5sZWZ0O2Zvcig7cy5yaWdodDspcy5yaWdodC5sZWZ0LkZ2KCkscy5yaWdodD1zLnJpZ2h0LnJpZ2h0O28uRnYoKSx0aGlzLnJvb3Q9b319LE8ucHJvdG90eXBlLlV2PWZ1bmN0aW9uKHQpe2lmKHRoaXMucm9vdCl7Zm9yKHZhciBlPXRoaXMucm9vdCxpPXRoaXMucm9vdC5pbmRleDtpIT09dDspaWYoaT50JiZlLmxlZnQpZT1lLmxlZnQsaS09MSsoZS5yaWdodD9lLnJpZ2h0Lmxlbmd0aDowKTtlbHNle2lmKCEoaTx0JiZlLnJpZ2h0KSlicmVhaztlPWUucmlnaHQsaSs9MSsoZS5sZWZ0P2UubGVmdC5sZW5ndGg6MCl9cmV0dXJuIHRoaXMuWmYoZS52YWx1ZSksdGhpcy5yb290LmluZGV4PT09dH1yZXR1cm4hMX0sTy5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5yb290JiYoZT10aGlzLnJvb3QucmVkdWNlKHQsZSxpLHRoaXMpKSxlfSxPLnByb3RvdHlwZS5yZWR1Y2VSaWdodD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMucm9vdCYmKGU9dGhpcy5yb290LnJlZHVjZVJpZ2h0KHQsZSxpLHRoaXMpKSxlfSxPLnByb3RvdHlwZS5taW49ZnVuY3Rpb24odCl7aWYodD10aGlzLkR2KHQpKXJldHVybiB0LnZhbHVlfSxPLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7aWYodD10aGlzLl92KHQpKXJldHVybiB0LnZhbHVlfSxPLnByb3RvdHlwZS51Zz1mdW5jdGlvbigpe2lmKCF0aGlzLnJvb3QpdGhyb3cgRXJyb3IoXCJDYW4ndCBnZXQgb25lIHZhbHVlIGZyb20gZW1wdHkgc2V0XCIpO3JldHVybiB0aGlzLnJvb3QudmFsdWV9LE8ucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIHQ7dGhpcy4kZyYmKHQ9dGhpcy50b0FycmF5KCksdGhpcy5udihbXSx0LDApKSx0aGlzLnJvb3Q9bnVsbCx0aGlzLmxlbmd0aD0wLHRoaXMuJGcmJnRoaXMuWGcoW10sdCwwKX0sTy5wcm90b3R5cGUuRGY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHRoaXMuSXRlcmF0b3IodGhpcyx0LGUpfSxPLnByb3RvdHlwZS5JdGVyYXRvcj1BLE8ucHJvdG90eXBlLnN1bW1hcnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290P3RoaXMucm9vdC5zdW1tYXJ5KCk6XCIoKVwifSxPLnByb3RvdHlwZS5sb2c9ZnVuY3Rpb24odCxlLGkscil7dD10fHxQZS5SZyxlPWV8fHRoaXMuQnYsaXx8KGk9Y29uc29sZS5sb2cscj1jb25zb2xlKSxpPWkuYmluZChyKSx0aGlzLnJvb3QmJnRoaXMucm9vdC5sb2codCxlLGksaSl9LE8ucHJvdG90eXBlLkJ2PWZ1bmN0aW9uKHQsZSl7ZShcIiBcIit0LnZhbHVlKX0sTy5Wdj1QZSxPLnByb3RvdHlwZS5Ob2RlPVAsUC5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKHQsZSxpLHIsbil7cmV0dXJuIG49bnx8MCx0aGlzLmxlZnQmJihlPXRoaXMubGVmdC5yZWR1Y2UodCxlLGkscixuKzEpKSxlPXQuY2FsbChpLGUsdGhpcy52YWx1ZSx0aGlzLnZhbHVlLHIsdGhpcyxuKSx0aGlzLnJpZ2h0JiYoZT10aGlzLnJpZ2h0LnJlZHVjZSh0LGUsaSxyLG4rMSkpLGV9LFAucHJvdG90eXBlLnJlZHVjZVJpZ2h0PWZ1bmN0aW9uKHQsZSxpLHIsbil7cmV0dXJuIG49bnx8MCx0aGlzLnJpZ2h0JiYoZT10aGlzLnJpZ2h0LnJlZHVjZSh0LGUsaSxyLG4rMSkpLGU9dC5jYWxsKGksZSx0aGlzLnZhbHVlLHRoaXMudmFsdWUscix0aGlzLG4pLHRoaXMubGVmdCYmKGU9dGhpcy5sZWZ0LnJlZHVjZSh0LGUsaSxyLG4rMSkpLGV9LFAucHJvdG90eXBlLkZ2PWZ1bmN0aW9uKCl7dGhpcy5sZW5ndGg9MSsodGhpcy5sZWZ0P3RoaXMubGVmdC5sZW5ndGg6MCkrKHRoaXMucmlnaHQ/dGhpcy5yaWdodC5sZW5ndGg6MCksdGhpcy5pbmRleD10aGlzLmxlZnQ/dGhpcy5sZWZ0Lmxlbmd0aDowfSxQLnByb3RvdHlwZS5Rdj1mdW5jdGlvbigpe3ZhciB0O2lmKHQ9MSsodGhpcy5sZWZ0P3RoaXMubGVmdC5RdigpOjApLHQrPXRoaXMucmlnaHQ/dGhpcy5yaWdodC5RdigpOjAsdGhpcy5sZW5ndGghPT10KXRocm93IEVycm9yKFwiSW50ZWdyaXR5IGNoZWNrIGZhaWxlZDogXCIrdGhpcy5zdW1tYXJ5KCkpO3JldHVybiB0fSxQLnByb3RvdHlwZS5Ndj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodC5yaWdodCl7Zm9yKHQ9dC5yaWdodDt0LmxlZnQ7KXQ9dC5sZWZ0O3JldHVybiB0fX0sUC5wcm90b3R5cGUudGc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHQubGVmdCl7Zm9yKHQ9dC5sZWZ0O3QucmlnaHQ7KXQ9dC5yaWdodDtyZXR1cm4gdH19LFAucHJvdG90eXBlLnN1bW1hcnk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZhbHVlfHxcIi1cIix0PXQrKFwiIDxcIit0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXMubGVmdHx8dGhpcy5yaWdodD9cIihcIit0K1wiIFwiKyh0aGlzLmxlZnQ/dGhpcy5sZWZ0LnN1bW1hcnkoKTpcIigpXCIpK1wiLCBcIisodGhpcy5yaWdodD90aGlzLnJpZ2h0LnN1bW1hcnkoKTpcIigpXCIpK1wiKVwiOlwiKFwiK3QrXCIpXCJ9LFAucHJvdG90eXBlLmxvZz1mdW5jdGlvbih0LGUsaSxyKXt2YXIgbixvPXRoaXM7bj10aGlzLmxlZnQmJnRoaXMucmlnaHQ/dC5kZzp0aGlzLmxlZnQ/dC53Zzp0aGlzLnJpZ2h0P3QuVGc6dC5tZzt2YXIgczt0aGlzLmxlZnQmJnRoaXMubGVmdC5sb2codCxlLGZ1bmN0aW9uKGUpe3M/cih0LklnK1wiIFwiK2UpOihzPSEwLHIodC5TZyt0Lm1nK2UpKX0sZnVuY3Rpb24odCl7cihcIiAgXCIrdCl9KTt2YXIgYTtlKHRoaXMsZnVuY3Rpb24oZSl7YT9pKChvLnJpZ2h0P3QuSWc6XCIgXCIpK2UpOihhPSEwLGkobitlKSl9LGZ1bmN0aW9uKGUpe3IoKG8ubGVmdD90LklnOlwiIFwiKStlKX0pO3ZhciBjO3RoaXMucmlnaHQmJnRoaXMucmlnaHQubG9nKHQsZSxmdW5jdGlvbihlKXtjP2koXCIgIFwiK2UpOihjPSEwLGkodC5iZyt0Lm1nK2UpKX0sZnVuY3Rpb24oZSl7aSh0LklnK1wiIFwiK2UpfSl9LEEucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgdDtpZih0PXRoaXMuTGY/dGhpcy5zZXQuanYodGhpcy5MZi52YWx1ZSk6dGhpcy5zZXQuRHYoKSwhdCl0aHJvdyBTdG9wSXRlcmF0aW9uO2lmKHZvaWQgMCE9PXRoaXMuZW5kJiYwPD10aGlzLnNldC4kZih0LnZhbHVlLHRoaXMuZW5kKSl0aHJvdyBTdG9wSXRlcmF0aW9uO3JldHVybiB0aGlzLkxmPXQsdC52YWx1ZX0sUmUuZWcmJihSZT1SZS5lZyk7dmFyIEFlPXt9LE5lPVJlLHhlPXgsQmU9RXQsRmU9WDtBZS5lZz1OLE9iamVjdC5hZGRFYWNoKE4ucHJvdG90eXBlLHhlLnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goTi5wcm90b3R5cGUsQmUucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChOLnByb3RvdHlwZSxGZS5wcm90b3R5cGUpLE4ucHJvdG90eXBlLm5nPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0LHRoaXMuTWYsdGhpcy4kZix0aGlzLmNvbnRlbnQpfSxOLnByb3RvdHlwZS5sb2c9ZnVuY3Rpb24odCxlKXtlPWV8fHRoaXMuc3RyaW5naWZ5LHRoaXMuVmYubG9nKHQsZSl9LE4ucHJvdG90eXBlLnF2PWZ1bmN0aW9uKHQsZSxpLHIpe3I9cnx8dGhpcy5zdHJpbmdpZnksdGhpcy5WZi5xdih0LGUsaSxyKX0sTi5wcm90b3R5cGUuc3RyaW5naWZ5PWZ1bmN0aW9uKHQsZSxpLHIpe3QuY2FsbChlLHIrXCIgXCIraS52YWx1ZS5rZXkrXCI6IFwiK2kudmFsdWUudmFsdWUpfSxBZS5lZyYmKEFlPUFlLmVnKSx0Lkp2PW10LHQuU2V0PVF0LHQuTWFwPXNlLHQuS3Y9dWUsdC5XZWFrTWFwPU0sdC5Hdj1SZSx0Lm5pPUFlLHQuenY9JHQsdC5Xdj1lZSx0LiR2PWRlLHQub2k9dmUsdC5Zdj1UZSx0Llh2PU50LHQuWnY9THQsdC50eT1DdCx0Lkl0ZXJhdG9yPXV0fSh0aGlzKX0sZnVuY3Rpb24odCxlKXt0LnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZ1bmN0aW9ufX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKHQsZSxpKXtudWxsIT10JiYoXCJudW1iZXJcIj09dHlwZW9mIHQ/dGhpcy5mcm9tTnVtYmVyKHQsZSxpKTpudWxsPT1lJiZcInN0cmluZ1wiIT10eXBlb2YgdD90aGlzLmV5KHQsMjU2KTp0aGlzLmV5KHQsZSkpfWZ1bmN0aW9uIHIoKXtyZXR1cm4gbmV3IGkobnVsbCl9ZnVuY3Rpb24gbih0LGUsaSxyLG4sbyl7Zm9yKDstLW8+PTA7KXt2YXIgcz1lKnRoaXNbdCsrXStpW3JdK247bj1NYXRoLmZsb29yKHMvNjcxMDg4NjQpLGlbcisrXT02NzEwODg2MyZzfXJldHVybiBufWZ1bmN0aW9uIG8odCxlLGkscixuLG8pe2Zvcih2YXIgcz0zMjc2NyZlLGE9ZT4+MTU7LS1vPj0wOyl7dmFyIGM9MzI3NjcmdGhpc1t0XSxoPXRoaXNbdCsrXT4+MTUscD1hKmMraCpzO2M9cypjKygoMzI3NjcmcCk8PDE1KStpW3JdKygxMDczNzQxODIzJm4pLG49KGM+Pj4zMCkrKHA+Pj4xNSkrYSpoKyhuPj4+MzApLGlbcisrXT0xMDczNzQxODIzJmN9cmV0dXJuIG59ZnVuY3Rpb24gcyh0LGUsaSxyLG4sbyl7Zm9yKHZhciBzPTE2MzgzJmUsYT1lPj4xNDstLW8+PTA7KXt2YXIgYz0xNjM4MyZ0aGlzW3RdLGg9dGhpc1t0KytdPj4xNCxwPWEqYytoKnM7Yz1zKmMrKCgxNjM4MyZwKTw8MTQpK2lbcl0rbixuPShjPj4yOCkrKHA+PjE0KSthKmgsaVtyKytdPTI2ODQzNTQ1NSZjfXJldHVybiBufWZ1bmN0aW9uIGEodCl7cmV0dXJuIFB0LmNoYXJBdCh0KX1mdW5jdGlvbiBjKHQsZSl7dmFyIGk9QXRbdC5jaGFyQ29kZUF0KGUpXTtyZXR1cm4gbnVsbD09aT8tMTppfWZ1bmN0aW9uIGgodCl7Zm9yKHZhciBlPXRoaXMuaXktMTtlPj0wOy0tZSl0W2VdPXRoaXNbZV07dC5peT10aGlzLml5LHQubnk9dGhpcy5ueX1mdW5jdGlvbiBwKHQpe3RoaXMuaXk9MSx0aGlzLm55PXQ8MD8tMTowLHQ+MD90aGlzWzBdPXQ6dDwtMT90aGlzWzBdPXQrdGhpcy5veTp0aGlzLml5PTB9ZnVuY3Rpb24gdSh0KXt2YXIgZT1yKCk7cmV0dXJuIGUuc3kodCksZX1mdW5jdGlvbiBsKHQsZSl7dmFyIHI7aWYoMTY9PWUpcj00O2Vsc2UgaWYoOD09ZSlyPTM7ZWxzZSBpZigyNTY9PWUpcj04O2Vsc2UgaWYoMj09ZSlyPTE7ZWxzZSBpZigzMj09ZSlyPTU7ZWxzZXtpZig0IT1lKXJldHVybiB2b2lkIHRoaXMuZnJvbVJhZGl4KHQsZSk7cj0yfXRoaXMuaXk9MCx0aGlzLm55PTA7Zm9yKHZhciBuPXQubGVuZ3RoLG89ITEscz0wOy0tbj49MDspe3ZhciBhPTg9PXI/MjU1JnRbbl06Yyh0LG4pO2E8MD9cIi1cIj09dC5jaGFyQXQobikmJihvPSEwKToobz0hMSwwPT1zP3RoaXNbdGhpcy5peSsrXT1hOnMrcj50aGlzLmF5Pyh0aGlzW3RoaXMuaXktMV18PShhJigxPDx0aGlzLmF5LXMpLTEpPDxzLHRoaXNbdGhpcy5peSsrXT1hPj50aGlzLmF5LXMpOnRoaXNbdGhpcy5peS0xXXw9YTw8cyxzKz1yLHM+PXRoaXMuYXkmJihzLT10aGlzLmF5KSl9OD09ciYmMCE9KDEyOCZ0WzBdKSYmKHRoaXMubnk9LTEscz4wJiYodGhpc1t0aGlzLml5LTFdfD0oMTw8dGhpcy5heS1zKS0xPDxzKSksdGhpcy5oeSgpLG8mJmkuWkVSTy5weSh0aGlzLHRoaXMpfWZ1bmN0aW9uIGQoKXtmb3IodmFyIHQ9dGhpcy5ueSZ0aGlzLnV5O3RoaXMuaXk+MCYmdGhpc1t0aGlzLml5LTFdPT10OyktLXRoaXMuaXl9ZnVuY3Rpb24gZih0KXtpZih0aGlzLm55PDApcmV0dXJuXCItXCIrdGhpcy5seSgpLnRvU3RyaW5nKHQpO3ZhciBlO2lmKDE2PT10KWU9NDtlbHNlIGlmKDg9PXQpZT0zO2Vsc2UgaWYoMj09dCllPTE7ZWxzZSBpZigzMj09dCllPTU7ZWxzZXtpZig0IT10KXJldHVybiB0aGlzLnRvUmFkaXgodCk7ZT0yfXZhciBpLHI9KDE8PGUpLTEsbj0hMSxvPVwiXCIscz10aGlzLml5LGM9dGhpcy5heS1zKnRoaXMuYXklZTtpZihzLS0gPjApZm9yKGM8dGhpcy5heSYmKGk9dGhpc1tzXT4+Yyk+MCYmKG49ITAsbz1hKGkpKTtzPj0wOyljPGU/KGk9KHRoaXNbc10mKDE8PGMpLTEpPDxlLWMsaXw9dGhpc1stLXNdPj4oYys9dGhpcy5heS1lKSk6KGk9dGhpc1tzXT4+KGMtPWUpJnIsYzw9MCYmKGMrPXRoaXMuYXksLS1zKSksaT4wJiYobj0hMCksbiYmKG8rPWEoaSkpO3JldHVybiBuP286XCIwXCJ9ZnVuY3Rpb24gZygpe3ZhciB0PXIoKTtyZXR1cm4gaS5aRVJPLnB5KHRoaXMsdCksdH1mdW5jdGlvbiB2KCl7cmV0dXJuIHRoaXMubnk8MD90aGlzLmx5KCk6dGhpc31mdW5jdGlvbiB5KHQpe3ZhciBlPXRoaXMubnktdC5ueTtpZigwIT1lKXJldHVybiBlO3ZhciBpPXRoaXMuaXk7aWYoZT1pLXQuaXksMCE9ZSlyZXR1cm4gdGhpcy5ueTwwPy1lOmU7Zm9yKDstLWk+PTA7KWlmKDAhPShlPXRoaXNbaV0tdFtpXSkpcmV0dXJuIGU7cmV0dXJuIDB9ZnVuY3Rpb24gbSh0KXt2YXIgZSxpPTE7cmV0dXJuIDAhPShlPXQ+Pj4xNikmJih0PWUsaSs9MTYpLDAhPShlPXQ+PjgpJiYodD1lLGkrPTgpLDAhPShlPXQ+PjQpJiYodD1lLGkrPTQpLDAhPShlPXQ+PjIpJiYodD1lLGkrPTIpLDAhPShlPXQ+PjEpJiYodD1lLGkrPTEpLGl9ZnVuY3Rpb24gdygpe3JldHVybiB0aGlzLml5PD0wPzA6dGhpcy5heSoodGhpcy5peS0xKSttKHRoaXNbdGhpcy5peS0xXV50aGlzLm55JnRoaXMudXkpfWZ1bmN0aW9uIFQodCxlKXt2YXIgaTtmb3IoaT10aGlzLml5LTE7aT49MDstLWkpZVtpK3RdPXRoaXNbaV07Zm9yKGk9dC0xO2k+PTA7LS1pKWVbaV09MDtlLml5PXRoaXMuaXkrdCxlLm55PXRoaXMubnl9ZnVuY3Rpb24gUyh0LGUpe2Zvcih2YXIgaT10O2k8dGhpcy5peTsrK2kpZVtpLXRdPXRoaXNbaV07ZS5peT1NYXRoLm1heCh0aGlzLml5LXQsMCksZS5ueT10aGlzLm55fWZ1bmN0aW9uIGIodCxlKXt2YXIgaSxyPXQldGhpcy5heSxuPXRoaXMuYXktcixvPSgxPDxuKS0xLHM9TWF0aC5mbG9vcih0L3RoaXMuYXkpLGE9dGhpcy5ueTw8ciZ0aGlzLnV5O2ZvcihpPXRoaXMuaXktMTtpPj0wOy0taSllW2krcysxXT10aGlzW2ldPj5ufGEsYT0odGhpc1tpXSZvKTw8cjtmb3IoaT1zLTE7aT49MDstLWkpZVtpXT0wO2Vbc109YSxlLml5PXRoaXMuaXkrcysxLGUubnk9dGhpcy5ueSxlLmh5KCl9ZnVuY3Rpb24gRSh0LGUpe2Uubnk9dGhpcy5ueTt2YXIgaT1NYXRoLmZsb29yKHQvdGhpcy5heSk7aWYoaT49dGhpcy5peSlyZXR1cm4gdm9pZChlLml5PTApO3ZhciByPXQldGhpcy5heSxuPXRoaXMuYXktcixvPSgxPDxyKS0xO2VbMF09dGhpc1tpXT4+cjtmb3IodmFyIHM9aSsxO3M8dGhpcy5peTsrK3MpZVtzLWktMV18PSh0aGlzW3NdJm8pPDxuLGVbcy1pXT10aGlzW3NdPj5yO3I+MCYmKGVbdGhpcy5peS1pLTFdfD0odGhpcy5ueSZvKTw8biksZS5peT10aGlzLml5LWksZS5oeSgpfWZ1bmN0aW9uIEkodCxlKXtmb3IodmFyIGk9MCxyPTAsbj1NYXRoLm1pbih0Lml5LHRoaXMuaXkpO2k8bjspcis9dGhpc1tpXS10W2ldLGVbaSsrXT1yJnRoaXMudXkscj4+PXRoaXMuYXk7aWYodC5peTx0aGlzLml5KXtmb3Ioci09dC5ueTtpPHRoaXMuaXk7KXIrPXRoaXNbaV0sZVtpKytdPXImdGhpcy51eSxyPj49dGhpcy5heTtyKz10aGlzLm55fWVsc2V7Zm9yKHIrPXRoaXMubnk7aTx0Lml5OylyLT10W2ldLGVbaSsrXT1yJnRoaXMudXkscj4+PXRoaXMuYXk7ci09dC5ueX1lLm55PXI8MD8tMTowLHI8LTE/ZVtpKytdPXRoaXMub3krcjpyPjAmJihlW2krK109ciksZS5peT1pLGUuaHkoKX1mdW5jdGlvbiBSKHQsZSl7dmFyIHI9dGhpcy5hYnMoKSxuPXQuYWJzKCksbz1yLml5O2ZvcihlLml5PW8rbi5peTstLW8+PTA7KWVbb109MDtmb3Iobz0wO288bi5peTsrK28pZVtvK3IuaXldPXIuZ3koMCxuW29dLGUsbywwLHIuaXkpO2Uubnk9MCxlLmh5KCksdGhpcy5ueSE9dC5ueSYmaS5aRVJPLnB5KGUsZSl9ZnVuY3Rpb24gayh0KXtmb3IodmFyIGU9dGhpcy5hYnMoKSxpPXQuaXk9MiplLml5Oy0taT49MDspdFtpXT0wO2ZvcihpPTA7aTxlLml5LTE7KytpKXt2YXIgcj1lLmd5KGksZVtpXSx0LDIqaSwwLDEpOyh0W2krZS5peV0rPWUuZ3koaSsxLDIqZVtpXSx0LDIqaSsxLHIsZS5peS1pLTEpKT49ZS5veSYmKHRbaStlLml5XS09ZS5veSx0W2krZS5peSsxXT0xKX10Lml5PjAmJih0W3QuaXktMV0rPWUuZ3koaSxlW2ldLHQsMippLDAsMSkpLHQubnk9MCx0Lmh5KCl9ZnVuY3Rpb24gQyh0LGUsbil7dmFyIG89dC5hYnMoKTtpZighKG8uaXk8PTApKXt2YXIgcz10aGlzLmFicygpO2lmKHMuaXk8by5peSlyZXR1cm4gbnVsbCE9ZSYmZS5zeSgwKSx2b2lkKG51bGwhPW4mJnRoaXMudnkobikpO251bGw9PW4mJihuPXIoKSk7dmFyIGE9cigpLGM9dGhpcy5ueSxoPXQubnkscD10aGlzLmF5LW0ob1tvLml5LTFdKTtwPjA/KG8ueXkocCxhKSxzLnl5KHAsbikpOihvLnZ5KGEpLHMudnkobikpO3ZhciB1PWEuaXksbD1hW3UtMV07aWYoMCE9bCl7dmFyIGQ9bCooMTw8dGhpcy5teSkrKHU+MT9hW3UtMl0+PnRoaXMud3k6MCksZj10aGlzLlR5L2QsZz0oMTw8dGhpcy5teSkvZCx2PTE8PHRoaXMud3kseT1uLml5LHc9eS11LFQ9bnVsbD09ZT9yKCk6ZTtmb3IoYS5TeSh3LFQpLG4uYnkoVCk+PTAmJihuW24uaXkrK109MSxuLnB5KFQsbikpLGkuT05FLlN5KHUsVCksVC5weShhLGEpO2EuaXk8dTspYVthLml5KytdPTA7Zm9yKDstLXc+PTA7KXt2YXIgUz1uWy0teV09PWw/dGhpcy51eTpNYXRoLmZsb29yKG5beV0qZisoblt5LTFdK3YpKmcpO2lmKChuW3ldKz1hLmd5KDAsUyxuLHcsMCx1KSk8Uylmb3IoYS5TeSh3LFQpLG4ucHkoVCxuKTtuW3ldPC0tUzspbi5weShULG4pfW51bGwhPWUmJihuLkV5KHUsZSksYyE9aCYmaS5aRVJPLnB5KGUsZSkpLG4uaXk9dSxuLmh5KCkscD4wJiZuLkl5KHAsbiksYzwwJiZpLlpFUk8ucHkobixuKX19fWZ1bmN0aW9uIE8odCl7dmFyIGU9cigpO3JldHVybiB0aGlzLmFicygpLlJ5KHQsbnVsbCxlKSx0aGlzLm55PDAmJmUuYnkoaS5aRVJPKT4wJiZ0LnB5KGUsZSksZX1mdW5jdGlvbiBQKHQpe3RoaXMuaT10fWZ1bmN0aW9uIEEodCl7cmV0dXJuIHQubnk8MHx8dC5ieSh0aGlzLmkpPj0wP3Qua3kodGhpcy5pKTp0fWZ1bmN0aW9uIE4odCl7cmV0dXJuIHR9ZnVuY3Rpb24geCh0KXt0LlJ5KHRoaXMuaSxudWxsLHQpfWZ1bmN0aW9uIEIodCxlLGkpe3QuQ3koZSxpKSx0aGlzLnJlZHVjZShpKX1mdW5jdGlvbiBGKHQsZSl7dC5PeShlKSx0aGlzLnJlZHVjZShlKX1mdW5jdGlvbiBfKCl7aWYodGhpcy5peTwxKXJldHVybiAwO3ZhciB0PXRoaXNbMF07aWYoMD09KDEmdCkpcmV0dXJuIDA7dmFyIGU9MyZ0O3JldHVybiBlPWUqKDItKDE1JnQpKmUpJjE1LGU9ZSooMi0oMjU1JnQpKmUpJjI1NSxlPWUqKDItKCg2NTUzNSZ0KSplJjY1NTM1KSkmNjU1MzUsZT1lKigyLXQqZSV0aGlzLm95KSV0aGlzLm95LGU+MD90aGlzLm95LWU6LWV9ZnVuY3Rpb24gRCh0KXt0aGlzLmk9dCx0aGlzLlB5PXQuQXkoKSx0aGlzLk55PTMyNzY3JnRoaXMuUHksdGhpcy54eT10aGlzLlB5Pj4xNSx0aGlzLkJ5PSgxPDx0LmF5LTE1KS0xLHRoaXMuRnk9Mip0Lml5fWZ1bmN0aW9uIEgodCl7dmFyIGU9cigpO3JldHVybiB0LmFicygpLlN5KHRoaXMuaS5peSxlKSxlLlJ5KHRoaXMuaSxudWxsLGUpLHQubnk8MCYmZS5ieShpLlpFUk8pPjAmJnRoaXMuaS5weShlLGUpLGV9ZnVuY3Rpb24gTCh0KXt2YXIgZT1yKCk7cmV0dXJuIHQudnkoZSksdGhpcy5yZWR1Y2UoZSksZX1mdW5jdGlvbiBNKHQpe2Zvcig7dC5peTw9dGhpcy5GeTspdFt0Lml5KytdPTA7Zm9yKHZhciBlPTA7ZTx0aGlzLmkuaXk7KytlKXt2YXIgaT0zMjc2NyZ0W2VdLHI9aSp0aGlzLk55KygoaSp0aGlzLnh5Kyh0W2VdPj4xNSkqdGhpcy5OeSZ0aGlzLkJ5KTw8MTUpJnQudXk7Zm9yKGk9ZSt0aGlzLmkuaXksdFtpXSs9dGhpcy5pLmd5KDAscix0LGUsMCx0aGlzLmkuaXkpO3RbaV0+PXQub3k7KXRbaV0tPXQub3ksdFsrK2ldKyt9dC5oeSgpLHQuRXkodGhpcy5pLml5LHQpLHQuYnkodGhpcy5pKT49MCYmdC5weSh0aGlzLmksdCl9ZnVuY3Rpb24gaih0LGUpe3QuT3koZSksdGhpcy5yZWR1Y2UoZSl9ZnVuY3Rpb24gVSh0LGUsaSl7dC5DeShlLGkpLHRoaXMucmVkdWNlKGkpfWZ1bmN0aW9uIFYoKXtyZXR1cm4gMD09KHRoaXMuaXk+MD8xJnRoaXNbMF06dGhpcy5ueSl9ZnVuY3Rpb24gUSh0LGUpe2lmKHQ+NDI5NDk2NzI5NXx8dDwxKXJldHVybiBpLk9ORTt2YXIgbj1yKCksbz1yKCkscz1lLl95KHRoaXMpLGE9bSh0KS0xO2ZvcihzLnZ5KG4pOy0tYT49MDspaWYoZS5EeShuLG8pLCh0JjE8PGEpPjApZS5IeShvLHMsbik7ZWxzZXt2YXIgYz1uO249byxvPWN9cmV0dXJuIGUuTHkobil9ZnVuY3Rpb24gcSh0LGUpe3ZhciBpO3JldHVybiBpPXQ8MjU2fHxlLk15KCk/bmV3IFAoZSk6bmV3IEQoZSksdGhpcy5leHAodCxpKX1mdW5jdGlvbiBKKHQpe3ZhciBlLGkscixuPVwiXCIsbz0wO2ZvcihlPTA7ZTx0Lmxlbmd0aCYmdC5jaGFyQXQoZSkhPXh0OysrZSlyPU50LmluZGV4T2YodC5jaGFyQXQoZSkpLHI8MHx8KDA9PW8/KG4rPWEocj4+MiksaT0zJnIsbz0xKToxPT1vPyhuKz1hKGk8PDJ8cj4+NCksaT0xNSZyLG89Mik6Mj09bz8obis9YShpKSxuKz1hKHI+PjIpLGk9MyZyLG89Myk6KG4rPWEoaTw8MnxyPj40KSxuKz1hKDE1JnIpLG89MCkpO3JldHVybiAxPT1vJiYobis9YShpPDwyKSksbn1mdW5jdGlvbiBLKHQpe3ZhciBlLGk9Sih0KSxyPW5ldyBBcnJheTtmb3IoZT0wOzIqZTxpLmxlbmd0aDsrK2UpcltlXT1wYXJzZUludChpLnN1YnN0cmluZygyKmUsMiplKzIpLDE2KTtyZXR1cm4gcn0vKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi9cbiAqL1xuICBmdW5jdGlvbiBHKHQsZSl7cmV0dXJuIG5ldyBpKHQsZSl9ZnVuY3Rpb24geih0LGUpe2lmKGU8dC5sZW5ndGgrMTEpcmV0dXJuIGFsZXJ0KFwiTWVzc2FnZSB0b28gbG9uZyBmb3IgUlNBXCIpLG51bGw7Zm9yKHZhciByPW5ldyBBcnJheSxuPXQubGVuZ3RoLTE7bj49MCYmZT4wOyl7dmFyIG89dC5jaGFyQ29kZUF0KG4tLSk7bzwxMjg/clstLWVdPW86bz4xMjcmJm88MjA0OD8oclstLWVdPTYzJm98MTI4LHJbLS1lXT1vPj42fDE5Mik6KHJbLS1lXT02MyZvfDEyOCxyWy0tZV09bz4+NiY2M3wxMjgsclstLWVdPW8+PjEyfDIyNCl9clstLWVdPTA7Zm9yKHZhciBzPW5ldyBTZWN1cmVSYW5kb20sYT1uZXcgQXJyYXk7ZT4yOyl7Zm9yKGFbMF09MDswPT1hWzBdOylzLm5leHRCeXRlcyhhKTtyWy0tZV09YVswXX1yZXR1cm4gclstLWVdPTIsclstLWVdPTAsbmV3IGkocil9ZnVuY3Rpb24gVyh0LGUsaSl7Zm9yKHZhciByPVwiXCIsbj0wO3IubGVuZ3RoPGU7KXIrPWkoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdC5jb25jYXQoWyg0Mjc4MTkwMDgwJm4pPj4yNCwoMTY3MTE2ODAmbik+PjE2LCg2NTI4MCZuKT4+OCwyNTUmbl0pKSksbis9MTtyZXR1cm4gcn1mdW5jdGlvbiAkKHQsZSxyKXtpZih0Lmxlbmd0aCsyKkJ0KzI+ZSl0aHJvd1wiTWVzc2FnZSB0b28gbG9uZyBmb3IgUlNBXCI7dmFyIG4sbz1cIlwiO2ZvcihuPTA7bjxlLXQubGVuZ3RoLTIqQnQtMjtuKz0xKW8rPVwiXFwwXCI7dmFyIHM9cnN0cl9zaGExKFwiXCIpK28rXCJcdTAwMDFcIit0LGE9bmV3IEFycmF5KEJ0KTsobmV3IFNlY3VyZVJhbmRvbSkubmV4dEJ5dGVzKGEpO3ZhciBjPVcoYSxzLmxlbmd0aCxyfHxyc3RyX3NoYTEpLGg9W107Zm9yKG49MDtuPHMubGVuZ3RoO24rPTEpaFtuXT1zLmNoYXJDb2RlQXQobileYy5jaGFyQ29kZUF0KG4pO3ZhciBwPVcoaCxhLmxlbmd0aCxyc3RyX3NoYTEpLHU9WzBdO2ZvcihuPTA7bjxhLmxlbmd0aDtuKz0xKXVbbisxXT1hW25dXnAuY2hhckNvZGVBdChuKTtyZXR1cm4gbmV3IGkodS5jb25jYXQoaCkpfWZ1bmN0aW9uIFkoKXt0aGlzLm49bnVsbCx0aGlzLmU9MCx0aGlzLmQ9bnVsbCx0aGlzLm89bnVsbCx0aGlzLmp5PW51bGwsdGhpcy5VeT1udWxsLHRoaXMuVnk9bnVsbCx0aGlzLlF5PW51bGx9ZnVuY3Rpb24gWCh0LGUpe3RoaXMucXk9ITAsXCJzdHJpbmdcIiE9dHlwZW9mIHQ/KHRoaXMubj10LHRoaXMuZT1lKTpudWxsIT10JiZudWxsIT1lJiZ0Lmxlbmd0aD4wJiZlLmxlbmd0aD4wPyh0aGlzLm49Ryh0LDE2KSx0aGlzLmU9cGFyc2VJbnQoZSwxNikpOmFsZXJ0KFwiSW52YWxpZCBSU0EgcHVibGljIGtleVwiKX1mdW5jdGlvbiBaKHQpe3JldHVybiB0Lkp5KHRoaXMuZSx0aGlzLm4pfWZ1bmN0aW9uIHR0KHQpe3ZhciBlPXoodCx0aGlzLm4uS3koKSs3Pj4zKTtpZihudWxsPT1lKXJldHVybiBudWxsO3ZhciBpPXRoaXMuR3koZSk7aWYobnVsbD09aSlyZXR1cm4gbnVsbDt2YXIgcj1pLnRvU3RyaW5nKDE2KTtyZXR1cm4gMD09KDEmci5sZW5ndGgpP3I6XCIwXCIrcn1mdW5jdGlvbiBldCh0LGUpe3ZhciBpPSQodCx0aGlzLm4uS3koKSs3Pj4zLGUpO2lmKG51bGw9PWkpcmV0dXJuIG51bGw7dmFyIHI9dGhpcy5HeShpKTtpZihudWxsPT1yKXJldHVybiBudWxsO3ZhciBuPXIudG9TdHJpbmcoMTYpO3JldHVybiAwPT0oMSZuLmxlbmd0aCk/bjpcIjBcIitufWZ1bmN0aW9uIGl0KHQsZSl7Zm9yKHZhciBpPVwiXCIscj1lLzQtdC5sZW5ndGgsbj0wO248cjtuKyspaSs9XCIwXCI7cmV0dXJuIGkrdH1mdW5jdGlvbiBydCh0LGUpe3ZhciBpPWZ1bmN0aW9uKHQpe3JldHVybiBLSlVSLmNyeXB0by5XeS56eSh0LGUpfSxyPWkodCk7cmV0dXJuIHRoaXMuJHkocixlKX1mdW5jdGlvbiBudCh0LGUpe3ZhciBpPUtKVVIuY3J5cHRvLld5Lll5KHQsZSx0aGlzLm4uS3koKSkscj1HKGksMTYpLG49dGhpcy5kb1ByaXZhdGUociksbz1uLnRvU3RyaW5nKDE2KTtyZXR1cm4gaXQobyx0aGlzLm4uS3koKSl9ZnVuY3Rpb24gb3QodCl7cmV0dXJuIHJ0LmNhbGwodGhpcyx0LFwic2hhMVwiKX1mdW5jdGlvbiBzdCh0KXtyZXR1cm4gcnQuY2FsbCh0aGlzLHQsXCJzaGEyNTZcIil9ZnVuY3Rpb24gYXQodCxlLGkpe2Zvcih2YXIgcj1cIlwiLG49MDtyLmxlbmd0aDxlOylyKz1oZXh0b3JzdHIoaShyc3RydG9oZXgodCtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxbKDQyNzgxOTAwODAmbik+PjI0LCgxNjcxMTY4MCZuKT4+MTYsKDY1MjgwJm4pPj44LDI1NSZuXSkpKSksbis9MTtyZXR1cm4gcn1mdW5jdGlvbiBjdCh0LGUsaSl7dmFyIHI9ZnVuY3Rpb24odCl7cmV0dXJuIEtKVVIuY3J5cHRvLld5Llh5KHQsZSl9LG49cihyc3RydG9oZXgodCkpO3JldHVybiB2b2lkIDA9PT1pJiYoaT0tMSksdGhpcy5aeShuLGUsaSl9ZnVuY3Rpb24gaHQodCxlLHIpe3ZhciBuLG89aGV4dG9yc3RyKHQpLHM9by5sZW5ndGgsYT10aGlzLm4uS3koKS0xLGM9TWF0aC5jZWlsKGEvOCksaD1mdW5jdGlvbih0KXtyZXR1cm4gS0pVUi5jcnlwdG8uV3kuWHkodCxlKX07aWYocj09PS0xfHx2b2lkIDA9PT1yKXI9cztlbHNlIGlmKHI9PT0tMilyPWMtcy0yO2Vsc2UgaWYocjwtMil0aHJvd1wiaW52YWxpZCBzYWx0IGxlbmd0aFwiO2lmKGM8cytyKzIpdGhyb3dcImRhdGEgdG9vIGxvbmdcIjt2YXIgcD1cIlwiO3I+MCYmKHA9bmV3IEFycmF5KHIpLChuZXcgU2VjdXJlUmFuZG9tKS5uZXh0Qnl0ZXMocCkscD1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxwKSk7dmFyIHU9aGV4dG9yc3RyKGgocnN0cnRvaGV4KFwiXFwwXFwwXFwwXFwwXFwwXFwwXFwwXFwwXCIrbytwKSkpLGw9W107Zm9yKG49MDtuPGMtci1zLTI7bis9MSlsW25dPTA7dmFyIGQ9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsbCkrXCJcdTAwMDFcIitwLGY9YXQodSxkLmxlbmd0aCxoKSxnPVtdO2ZvcihuPTA7bjxkLmxlbmd0aDtuKz0xKWdbbl09ZC5jaGFyQ29kZUF0KG4pXmYuY2hhckNvZGVBdChuKTt2YXIgdj02NTI4MD4+OCpjLWEmMjU1O2ZvcihnWzBdJj1+dixuPTA7bjxzO24rKylnLnB1c2godS5jaGFyQ29kZUF0KG4pKTtyZXR1cm4gZy5wdXNoKDE4OCksaXQodGhpcy5kb1ByaXZhdGUobmV3IGkoZykpLnRvU3RyaW5nKDE2KSx0aGlzLm4uS3koKSl9ZnVuY3Rpb24gcHQodCxlLGkpe3ZhciByPW5ldyBZO3IucWgoZSxpKTt2YXIgbj1yLkd5KHQpO3JldHVybiBufWZ1bmN0aW9uIHV0KHQsZSxpKXt2YXIgcj1wdCh0LGUsaSksbj1yLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLFwiXCIpO3JldHVybiBufWZ1bmN0aW9uIGx0KHQpe2Zvcih2YXIgZSBpbiBLSlVSLmNyeXB0by5XeS50bSl7dmFyIGk9S0pVUi5jcnlwdG8uV3kudG1bZV0scj1pLmxlbmd0aDtpZih0LnN1YnN0cmluZygwLHIpPT1pKXt2YXIgbj1bZSx0LnN1YnN0cmluZyhyKV07cmV0dXJuIG59fXJldHVybltdfWZ1bmN0aW9uIGR0KHQsZSxpLHIpe3ZhciBuPXV0KGUsaSxyKSxvPWx0KG4pO2lmKDA9PW8ubGVuZ3RoKXJldHVybiExO3ZhciBzPW9bMF0sYT1vWzFdLGM9ZnVuY3Rpb24odCl7cmV0dXJuIEtKVVIuY3J5cHRvLld5Lnp5KHQscyl9LGg9Yyh0KTtyZXR1cm4gYT09aH1mdW5jdGlvbiBmdCh0LGUpe3ZhciBpPUcodCwxNikscj1kdChlLGksdGhpcy5uLnRvU3RyaW5nKDE2KSx0aGlzLmUudG9TdHJpbmcoMTYpKTtyZXR1cm4gcn1mdW5jdGlvbiBndCh0LGUpe2U9ZS5yZXBsYWNlKEZ0LFwiXCIpLGU9ZS5yZXBsYWNlKC9bIFxcbl0rL2csXCJcIik7dmFyIGk9RyhlLDE2KTtpZihpLkt5KCk+dGhpcy5uLkt5KCkpcmV0dXJuIDA7dmFyIHI9dGhpcy5HeShpKSxuPXIudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14xZiswMC8sXCJcIiksbz1sdChuKTtpZigwPT1vLmxlbmd0aClyZXR1cm4hMTt2YXIgcz1vWzBdLGE9b1sxXSxjPWZ1bmN0aW9uKHQpe3JldHVybiBLSlVSLmNyeXB0by5XeS56eSh0LHMpfSxoPWModCk7cmV0dXJuIGE9PWh9ZnVuY3Rpb24gdnQodCxlKXtlPWUucmVwbGFjZShGdCxcIlwiKSxlPWUucmVwbGFjZSgvWyBcXG5dKy9nLFwiXCIpO3ZhciBpPUcoZSwxNik7aWYoaS5LeSgpPnRoaXMubi5LeSgpKXJldHVybiAwO3ZhciByPXRoaXMuR3koaSksbj1yLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLFwiXCIpLG89bHQobik7aWYoMD09by5sZW5ndGgpcmV0dXJuITE7dmFyIHM9KG9bMF0sb1sxXSk7cmV0dXJuIHM9PXR9ZnVuY3Rpb24geXQodCxlLGkscil7dmFyIG49ZnVuY3Rpb24odCl7cmV0dXJuIEtKVVIuY3J5cHRvLld5Llh5KHQsaSl9LG89bihyc3RydG9oZXgodCkpO3JldHVybiB2b2lkIDA9PT1yJiYocj0tMSksdGhpcy5lbShvLGUsaSxyKX1mdW5jdGlvbiBtdCh0LGUscixuKXt2YXIgbz1uZXcgaShlLDE2KTtpZihvLkt5KCk+dGhpcy5uLkt5KCkpcmV0dXJuITE7dmFyIHMsYT1mdW5jdGlvbih0KXtyZXR1cm4gS0pVUi5jcnlwdG8uV3kuWHkodCxyKX0sYz1oZXh0b3JzdHIodCksaD1jLmxlbmd0aCxwPXRoaXMubi5LeSgpLTEsdT1NYXRoLmNlaWwocC84KTtpZihuPT09LTF8fHZvaWQgMD09PW4pbj1oO2Vsc2UgaWYobj09PS0yKW49dS1oLTI7ZWxzZSBpZihuPC0yKXRocm93XCJpbnZhbGlkIHNhbHQgbGVuZ3RoXCI7aWYodTxoK24rMil0aHJvd1wiZGF0YSB0b28gbG9uZ1wiO3ZhciBsPXRoaXMuR3kobykudG9CeXRlQXJyYXkoKTtmb3Iocz0wO3M8bC5sZW5ndGg7cys9MSlsW3NdJj0yNTU7Zm9yKDtsLmxlbmd0aDx1OylsLnVuc2hpZnQoMCk7aWYoMTg4IT09bFt1LTFdKXRocm93XCJlbmNvZGVkIG1lc3NhZ2UgZG9lcyBub3QgZW5kIGluIDB4YmNcIjtsPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGwpO3ZhciBkPWwuc3Vic3RyKDAsdS1oLTEpLGY9bC5zdWJzdHIoZC5sZW5ndGgsaCksZz02NTI4MD4+OCp1LXAmMjU1O2lmKDAhPT0oZC5jaGFyQ29kZUF0KDApJmcpKXRocm93XCJiaXRzIGJleW9uZCBrZXlzaXplIG5vdCB6ZXJvXCI7dmFyIHY9YXQoZixkLmxlbmd0aCxhKSx5PVtdO2ZvcihzPTA7czxkLmxlbmd0aDtzKz0xKXlbc109ZC5jaGFyQ29kZUF0KHMpXnYuY2hhckNvZGVBdChzKTt5WzBdJj1+Zzt2YXIgbT11LWgtbi0yO2ZvcihzPTA7czxtO3MrPTEpaWYoMCE9PXlbc10pdGhyb3dcImxlZnRtb3N0IG9jdGV0cyBub3QgemVyb1wiO2lmKDEhPT15W21dKXRocm93XCIweDAxIG1hcmtlciBub3QgZm91bmRcIjtyZXR1cm4gZj09PWhleHRvcnN0cihhKHJzdHJ0b2hleChcIlxcMFxcMFxcMFxcMFxcMFxcMFxcMFxcMFwiK2MrU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcseS5zbGljZSgtbikpKSkpfXZhciB3dD17fTt3dC51c2VyQWdlbnQ9ITE7dmFyIFR0PXt9O2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBTdHx8IVN0KXZhciBTdD17fTtTdC5pbT1mdW5jdGlvbigpe3ZhciB0LGUsaSxyPWFyZ3VtZW50cyxuPW51bGw7Zm9yKHQ9MDt0PHIubGVuZ3RoO3QrPTEpZm9yKGk9KFwiXCIrclt0XSkuc3BsaXQoXCIuXCIpLG49U3QsZT1cIllBSE9PXCI9PWlbMF0/MTowO2U8aS5sZW5ndGg7ZSs9MSluW2lbZV1dPW5baVtlXV18fHt9LG49bltpW2VdXTtyZXR1cm4gbn0sU3QubG9nPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj1TdC53aWRnZXQuTG9nZ2VyO3JldHVybiEoIXJ8fCFyLmxvZykmJnIubG9nKHQsZSxpKX0sU3QucmVnaXN0ZXI9ZnVuY3Rpb24odCxlLGkpe3ZhciByLG4sbyxzLGEsYz1TdC5PdC5ybTtmb3IoY1t0XXx8KGNbdF09e25tOltdLG9tOltdfSkscj1jW3RdLG49aS52ZXJzaW9uLG89aS5wcCxzPVN0Lk90LnppLHIubmFtZT10LHIudmVyc2lvbj1uLHIucHA9byxyLm5tLnB1c2gobiksci5vbS5wdXNoKG8pLHIuc209ZSxhPTA7YTxzLmxlbmd0aDthKz0xKXNbYV0ocik7ZT8oZS5WRVJTSU9OPW4sZS5hbT1vKTpTdC5sb2coXCJtYWluQ2xhc3MgaXMgdW5kZWZpbmVkIGZvciBtb2R1bGUgXCIrdCxcIndhcm5cIil9LFN0Lk90PVN0Lk90fHx7cm06W10semk6W119LFN0Lk90LmdldFZlcnNpb249ZnVuY3Rpb24odCl7cmV0dXJuIFN0Lk90LnJtW3RdfHxudWxsfSxTdC5PdC5jbT1mdW5jdGlvbih0KXt2YXIgZSxpPWZ1bmN0aW9uKHQpe3ZhciBlPTA7cmV0dXJuIHBhcnNlRmxvYXQodC5yZXBsYWNlKC9cXC4vZyxmdW5jdGlvbigpe3JldHVybiAxPT1lKys/XCJcIjpcIi5cIn0pKX0scj13dCxuPXtobTowLG9wZXJhOjAscG06MCx1bTowLGNocm9tZTowLGxtOm51bGwsZG06MCxmbTowLGdtOjAsdm06MCx5bTpudWxsLG1tOjAsd206MCxUbTpyJiZyLmNhamFWZXJzaW9uLFNtOiExLG9zOm51bGx9LG89dHx8d3QmJnd0LnVzZXJBZ2VudCxzPVR0JiZUdC5sb2NhdGlvbixhPXMmJnMuaHJlZjtyZXR1cm4gbi5TbT1hJiYwPT09YS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJodHRwc1wiKSxvJiYoL3dpbmRvd3N8d2luMzIvaS50ZXN0KG8pP24ub3M9XCJ3aW5kb3dzXCI6L21hY2ludG9zaC9pLnRlc3Qobyk/bi5vcz1cIm1hY2ludG9zaFwiOi9yaGluby9pLnRlc3QobykmJihuLm9zPVwicmhpbm9cIiksL0tIVE1MLy50ZXN0KG8pJiYobi51bT0xKSxlPW8ubWF0Y2goL0FwcGxlV2ViS2l0XFwvKFteXFxzXSopLyksZSYmZVsxXSYmKG4udW09aShlWzFdKSwvIE1vYmlsZVxcLy8udGVzdChvKT8obi5sbT1cIkFwcGxlXCIsZT1vLm1hdGNoKC9PUyAoW15cXHNdKikvKSxlJiZlWzFdJiYoZT1pKGVbMV0ucmVwbGFjZShcIl9cIixcIi5cIikpKSxuLnltPWUsbi5mbT1uLnZtPW4uZ209MCxlPW8ubWF0Y2goL2lQYWR8aVBvZHxpUGhvbmUvKSxlJiZlWzBdJiYobltlWzBdLnRvTG93ZXJDYXNlKCldPW4ueW0pKTooZT1vLm1hdGNoKC9Ob2tpYU5bXlxcL10qfEFuZHJvaWQgXFxkXFwuXFxkfHdlYk9TXFwvXFxkXFwuXFxkLyksZSYmKG4ubG09ZVswXSksL3dlYk9TLy50ZXN0KG8pJiYobi5sbT1cIldlYk9TXCIsZT1vLm1hdGNoKC93ZWJPU1xcLyhbXlxcc10qKTsvKSxlJiZlWzFdJiYobi53bT1pKGVbMV0pKSksLyBBbmRyb2lkLy50ZXN0KG8pJiYobi5sbT1cIkFuZHJvaWRcIixlPW8ubWF0Y2goL0FuZHJvaWQgKFteXFxzXSopOy8pLGUmJmVbMV0mJihuLm1tPWkoZVsxXSkpKSksZT1vLm1hdGNoKC9DaHJvbWVcXC8oW15cXHNdKikvKSxlJiZlWzFdP24uY2hyb21lPWkoZVsxXSk6KGU9by5tYXRjaCgvQWRvYmVBSVJcXC8oW15cXHNdKikvKSxlJiYobi5kbT1lWzBdKSkpLG4udW18fChlPW8ubWF0Y2goL09wZXJhW1xcc1xcL10oW15cXHNdKikvKSxlJiZlWzFdPyhuLm9wZXJhPWkoZVsxXSksZT1vLm1hdGNoKC9WZXJzaW9uXFwvKFteXFxzXSopLyksZSYmZVsxXSYmKG4ub3BlcmE9aShlWzFdKSksZT1vLm1hdGNoKC9PcGVyYSBNaW5pW147XSovKSxlJiYobi5sbT1lWzBdKSk6KGU9by5tYXRjaCgvTVNJRVxccyhbXjtdKikvKSxlJiZlWzFdP24uaG09aShlWzFdKTooZT1vLm1hdGNoKC9HZWNrb1xcLyhbXlxcc10qKS8pLGUmJihuLnBtPTEsZT1vLm1hdGNoKC9ydjooW15cXHNcXCldKikvKSxlJiZlWzFdJiYobi5wbT1pKGVbMV0pKSkpKSkpLG59LFN0Lk90LnRmPVN0Lk90LmNtKCksZnVuY3Rpb24oKXtpZihTdC5pbShcInV0aWxcIixcIndpZGdldFwiLFwiZXhhbXBsZVwiKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgWUFIT09fY29uZmlnKXt2YXIgdCxlPVlBSE9PX2NvbmZpZy5saXN0ZW5lcixpPVN0Lk90LnppLHI9ITA7aWYoZSl7Zm9yKHQ9MDt0PGkubGVuZ3RoO3QrKylpZihpW3RdPT1lKXtyPSExO2JyZWFrfXImJmkucHVzaChlKX19fSgpLFN0Lmxhbmc9U3QubGFuZ3x8e30sZnVuY3Rpb24oKXt2YXIgdD1TdC5sYW5nLGU9T2JqZWN0LnByb3RvdHlwZSxpPVwiW29iamVjdCBBcnJheV1cIixyPVwiW29iamVjdCBGdW5jdGlvbl1cIixuPVwiW29iamVjdCBPYmplY3RdXCIsbz1bXSxzPXtibTpcIiZhbXA7XCIsRW06XCImbHQ7XCIsSW06XCImZ3Q7XCIsUm06XCImcXVvdDtcIixrbTpcIiYjeDI3O1wiLEpwOlwiJiN4MkY7XCIsQ206XCImI3g2MDtcIn0sYT1bXCJ0b1N0cmluZ1wiLFwidmFsdWVPZlwiXSxjPXtpc0FycmF5OmZ1bmN0aW9uKHQpe3JldHVybiBlLnRvU3RyaW5nLmFwcGx5KHQpPT09aX0sT206ZnVuY3Rpb24odCl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiB0fSxQbTpmdW5jdGlvbih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fHxlLnRvU3RyaW5nLmFwcGx5KHQpPT09cn0sQW06ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PT10fSxObTpmdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmaXNGaW5pdGUodCl9LG92OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYoXCJvYmplY3RcIj09dHlwZW9mIGV8fHQuUG0oZSkpfHwhMX0seG06ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR9LEJtOmZ1bmN0aW9uKHQpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiB0fSxGbTpTdC5PdC50Zi5obT9mdW5jdGlvbihpLHIpe3ZhciBuLG8scztmb3Iobj0wO248YS5sZW5ndGg7bis9MSlvPWFbbl0scz1yW29dLHQuUG0ocykmJnMhPWVbb10mJihpW29dPXMpfTpmdW5jdGlvbigpe30sX206ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvWyY8PlwiJ1xcL2BdL2csZnVuY3Rpb24odCl7cmV0dXJuIHNbdF19KX0sZXh0ZW5kOmZ1bmN0aW9uKGkscixuKXtpZighcnx8IWkpdGhyb3cgbmV3IEVycm9yKFwiZXh0ZW5kIGZhaWxlZCwgcGxlYXNlIGNoZWNrIHRoYXQgYWxsIGRlcGVuZGVuY2llcyBhcmUgaW5jbHVkZWQuXCIpO3ZhciBvLHM9ZnVuY3Rpb24oKXt9O2lmKHMucHJvdG90eXBlPXIucHJvdG90eXBlLGkucHJvdG90eXBlPW5ldyBzLGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPWksaS5EbT1yLnByb3RvdHlwZSxyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj09ZS5jb25zdHJ1Y3RvciYmKHIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXIpLG4pe2ZvcihvIGluIG4pdC5oYXNPd25Qcm9wZXJ0eShuLG8pJiYoaS5wcm90b3R5cGVbb109bltvXSk7dC5GbShpLnByb3RvdHlwZSxuKX19LEhtOmZ1bmN0aW9uKGUsaSl7aWYoIWl8fCFlKXRocm93IG5ldyBFcnJvcihcIkFic29yYiBmYWlsZWQsIHZlcmlmeSBkZXBlbmRlbmNpZXMuXCIpO3ZhciByLG4sbz1hcmd1bWVudHMscz1vWzJdO2lmKHMmJnMhPT0hMClmb3Iocj0yO3I8by5sZW5ndGg7cis9MSllW29bcl1dPWlbb1tyXV07ZWxzZXtmb3IobiBpbiBpKSFzJiZuIGluIGV8fChlW25dPWlbbl0pO3QuRm0oZSxpKX1yZXR1cm4gZX0sTG06ZnVuY3Rpb24oZSxpKXtpZighaXx8IWUpdGhyb3cgbmV3IEVycm9yKFwiQXVnbWVudCBmYWlsZWQsIHZlcmlmeSBkZXBlbmRlbmNpZXMuXCIpO3ZhciByLG49W2UucHJvdG90eXBlLGkucHJvdG90eXBlXTtmb3Iocj0yO3I8YXJndW1lbnRzLmxlbmd0aDtyKz0xKW4ucHVzaChhcmd1bWVudHNbcl0pO3JldHVybiB0LkhtLmFwcGx5KHRoaXMsbiksZX0sZHVtcDpmdW5jdGlvbihlLGkpe3ZhciByLG4sbz1bXSxzPVwiey4uLn1cIixhPVwiZigpey4uLn1cIixjPVwiLCBcIixoPVwiID0+IFwiO2lmKCF0Lm92KGUpKXJldHVybiBlK1wiXCI7aWYoZSBpbnN0YW5jZW9mIERhdGV8fFwibm9kZVR5cGVcImluIGUmJlwidGFnTmFtZVwiaW4gZSlyZXR1cm4gZTtpZih0LlBtKGUpKXJldHVybiBhO2lmKGk9dC5ObShpKT9pOjMsdC5pc0FycmF5KGUpKXtmb3Ioby5wdXNoKFwiW1wiKSxyPTAsbj1lLmxlbmd0aDtyPG47cis9MSl0Lm92KGVbcl0pP28ucHVzaChpPjA/dC5kdW1wKGVbcl0saS0xKTpzKTpvLnB1c2goZVtyXSksby5wdXNoKGMpO28ubGVuZ3RoPjEmJm8ucG9wKCksby5wdXNoKFwiXVwiKX1lbHNle28ucHVzaChcIntcIik7Zm9yKHIgaW4gZSl0Lmhhc093blByb3BlcnR5KGUscikmJihvLnB1c2gocitoKSx0Lm92KGVbcl0pP28ucHVzaChpPjA/dC5kdW1wKGVbcl0saS0xKTpzKTpvLnB1c2goZVtyXSksby5wdXNoKGMpKTtvLmxlbmd0aD4xJiZvLnBvcCgpLG8ucHVzaChcIn1cIil9cmV0dXJuIG8uam9pbihcIlwiKX0sTW06ZnVuY3Rpb24oZSxpLHIsbyl7Zm9yKHZhciBzLGEsYyxoLHAsdSxsLGQsZixnPVtdLHY9ZS5sZW5ndGgseT1cImR1bXBcIixtPVwiIFwiLHc9XCJ7XCIsVD1cIn1cIjsocz1lLmxhc3RJbmRleE9mKHcsdiksIShzPDApKSYmKGE9ZS5pbmRleE9mKFQscyksIShzKzE+YSkpOylsPWUuc3Vic3RyaW5nKHMrMSxhKSxoPWwsdT1udWxsLGM9aC5pbmRleE9mKG0pLGM+LTEmJih1PWguc3Vic3RyaW5nKGMrMSksaD1oLnN1YnN0cmluZygwLGMpKSxwPWlbaF0sciYmKHA9cihoLHAsdSkpLHQub3YocCk/dC5pc0FycmF5KHApP3A9dC5kdW1wKHAscGFyc2VJbnQodSwxMCkpOih1PXV8fFwiXCIsZD11LmluZGV4T2YoeSksZD4tMSYmKHU9dS5zdWJzdHJpbmcoNCkpLGY9cC50b1N0cmluZygpLHA9Zj09PW58fGQ+LTE/dC5kdW1wKHAscGFyc2VJbnQodSwxMCkpOmYpOnQueG0ocCl8fHQuTm0ocCl8fChwPVwifi1cIitnLmxlbmd0aCtcIi1+XCIsZ1tnLmxlbmd0aF09bCksZT1lLnN1YnN0cmluZygwLHMpK3ArZS5zdWJzdHJpbmcoYSsxKSxvPT09ITEmJih2PXMtMSk7Zm9yKHM9Zy5sZW5ndGgtMTtzPj0wO3MtPTEpZT1lLnJlcGxhY2UobmV3IFJlZ0V4cChcIn4tXCIrcytcIi1+XCIpLFwie1wiK2dbc10rXCJ9XCIsXCJnXCIpO3JldHVybiBlfSx0cmltOmZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gdC5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpfWNhdGNoKGUpe3JldHVybiB0fX0sam06ZnVuY3Rpb24oKXt2YXIgZSxpPXt9LHI9YXJndW1lbnRzLG49ci5sZW5ndGg7Zm9yKGU9MDtlPG47ZSs9MSl0LkhtKGkscltlXSwhMCk7cmV0dXJuIGl9LFVtOmZ1bmN0aW9uKGUsaSxyLG4scyl7ZT1lfHwwLGk9aXx8e307dmFyIGEsYyxoPXIscD1uO2lmKHQueG0ocikmJihoPWlbcl0pLCFoKXRocm93IG5ldyBUeXBlRXJyb3IoXCJtZXRob2QgdW5kZWZpbmVkXCIpO3JldHVybiB0LkJtKG4pfHx0LmlzQXJyYXkocCl8fChwPVtuXSksYT1mdW5jdGlvbigpe2guYXBwbHkoaSxwfHxvKX0sYz1zP3NldEludGVydmFsKGEsZSk6c2V0VGltZW91dChhLGUpLHtpbnRlcnZhbDpzLGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuaW50ZXJ2YWw/Y2xlYXJJbnRlcnZhbChjKTpjbGVhclRpbWVvdXQoYyl9fX0sVm06ZnVuY3Rpb24oZSl7cmV0dXJuIHQub3YoZSl8fHQueG0oZSl8fHQuTm0oZSl8fHQuT20oZSl9fTt0Lmhhc093blByb3BlcnR5PWUuaGFzT3duUHJvcGVydHk/ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmdC5oYXNPd25Qcm9wZXJ0eSYmdC5oYXNPd25Qcm9wZXJ0eShlKX06ZnVuY3Rpb24oZSxpKXtyZXR1cm4hdC5CbShlW2ldKSYmZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGVbaV0hPT1lW2ldfSxjLkhtKHQsYywhMCksU3QudXRpbC5MYW5nPXQsdC5RbT10LkxtLFN0LlFtPXQuTG0sU3QuZXh0ZW5kPXQuZXh0ZW5kfSgpLFN0LnJlZ2lzdGVyKFwieWFob29cIixTdCx7dmVyc2lvbjpcIjIuOS4wXCIscHA6XCIyODAwXCJ9KTsvKiEgQ3J5cHRvSlMgdjMuMS4yIGNvcmUtZml4LmpzXG4gICAqIGNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qc1xuICAgKiAoYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAgICogY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZVxuICAgKiBUSElTIElTIEZJWCBvZiAnY29yZS5qcycgdG8gZml4IEhtYWMgaXNzdWUuXG4gICAqIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL2lzc3Vlcy9kZXRhaWw/aWQ9ODRcbiAgICogaHR0cHM6Ly9jcnlwdG8tanMuZ29vZ2xlY29kZS5jb20vc3ZuLWhpc3RvcnkvcjY2Ny9icmFuY2hlcy8zLngvc3JjL2NvcmUuanNcbiAgICovXG4gIHZhciBidD1idHx8ZnVuY3Rpb24odCxlKXt2YXIgaT17fSxyPWkucW09e30sbj1yLkptPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm57ZXh0ZW5kOmZ1bmN0aW9uKGUpe3QucHJvdG90eXBlPXRoaXM7dmFyIGk9bmV3IHQ7cmV0dXJuIGUmJmkuS20oZSksaS5oYXNPd25Qcm9wZXJ0eShcImluaXRcIil8fChpLmluaXQ9ZnVuY3Rpb24oKXtpLkdtLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksaS5pbml0LnByb3RvdHlwZT1pLGkuR209dGhpcyxpfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmV4dGVuZCgpO3JldHVybiB0LmluaXQuYXBwbHkodCxhcmd1bWVudHMpLHR9LGluaXQ6ZnVuY3Rpb24oKXt9LEttOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJih0aGlzW2VdPXRbZV0pO3QuaGFzT3duUHJvcGVydHkoXCJ0b1N0cmluZ1wiKSYmKHRoaXMudG9TdHJpbmc9dC50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX19KCksbz1yLnptPW4uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsaSl7dD10aGlzLldtPXR8fFtdLGkhPWU/dGhpcy4kbT1pOnRoaXMuJG09NCp0Lmxlbmd0aH0sdG9TdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuKHR8fGEpLnN0cmluZ2lmeSh0aGlzKX0sY29uY2F0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuV20saT10LldtLHI9dGhpcy4kbSxuPXQuJG07aWYodGhpcy5oeSgpLHIlNClmb3IodmFyIG89MDtvPG47bysrKXt2YXIgcz1pW28+Pj4yXT4+PjI0LW8lNCo4JjI1NTtlW3Irbz4+PjJdfD1zPDwyNC0ocitvKSU0Kjh9ZWxzZSBmb3IodmFyIG89MDtvPG47bys9NCllW3Irbz4+PjJdPWlbbz4+PjJdO3JldHVybiB0aGlzLiRtKz1uLHRoaXN9LGh5OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5XbSxpPXRoaXMuJG07ZVtpPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLWklNCo4LGUubGVuZ3RoPXQuY2VpbChpLzQpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PW4uY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5XbT10aGlzLldtLnNsaWNlKDApLHR9LHJhbmRvbTpmdW5jdGlvbihlKXtmb3IodmFyIGk9W10scj0wO3I8ZTtyKz00KWkucHVzaCg0Mjk0OTY3Mjk2KnQucmFuZG9tKCl8MCk7cmV0dXJuIG5ldyBvLmluaXQoaSxlKX19KSxzPWkuWW09e30sYT1zLlhtPXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuV20saT10LiRtLHI9W10sbj0wO248aTtuKyspe3ZhciBvPWVbbj4+PjJdPj4+MjQtbiU0KjgmMjU1O3IucHVzaCgobz4+PjQpLnRvU3RyaW5nKDE2KSksci5wdXNoKCgxNSZvKS50b1N0cmluZygxNikpfXJldHVybiByLmpvaW4oXCJcIil9LHBhcnNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxpPVtdLHI9MDtyPGU7cis9MilpW3I+Pj4zXXw9cGFyc2VJbnQodC5zdWJzdHIociwyKSwxNik8PDI0LXIlOCo0O3JldHVybiBuZXcgby5pbml0KGksZS8yKX19LGM9cy5abT17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LldtLGk9dC4kbSxyPVtdLG49MDtuPGk7bisrKXt2YXIgbz1lW24+Pj4yXT4+PjI0LW4lNCo4JjI1NTtyLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShvKSl9cmV0dXJuIHIuam9pbihcIlwiKX0scGFyc2U6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLGk9W10scj0wO3I8ZTtyKyspaVtyPj4+Ml18PSgyNTUmdC5jaGFyQ29kZUF0KHIpKTw8MjQtciU0Kjg7cmV0dXJuIG5ldyBvLmluaXQoaSxlKX19LGg9cy50dz17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShjLnN0cmluZ2lmeSh0KSkpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBVVEYtOCBkYXRhXCIpfX0scGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIGMucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHQpKSl9fSxwPXIuZXc9bi5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5pdz1uZXcgby5pbml0LHRoaXMucnc9MH0sbnc6ZnVuY3Rpb24odCl7XCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PWgucGFyc2UodCkpLHRoaXMuaXcuY29uY2F0KHQpLHRoaXMucncrPXQuJG19LG93OmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuaXcscj1pLldtLG49aS4kbSxzPXRoaXMuc3csYT00KnMsYz1uL2E7Yz1lP3QuY2VpbChjKTp0Lm1heCgoMHxjKS10aGlzLmF3LDApO3ZhciBoPWMqcyxwPXQubWluKDQqaCxuKTtpZihoKXtmb3IodmFyIHU9MDt1PGg7dSs9cyl0aGlzLmN3KHIsdSk7dmFyIGw9ci5zcGxpY2UoMCxoKTtpLiRtLT1wfXJldHVybiBuZXcgby5pbml0KGwscCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9bi5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Lml3PXRoaXMuaXcuY2xvbmUoKSx0fSxhdzowfSksdT0oci5odz1wLmV4dGVuZCh7cHc6bi5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKHQpe3RoaXMucHc9dGhpcy5wdy5leHRlbmQodCksdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3AucmVzZXQuY2FsbCh0aGlzKSx0aGlzLnV3KCl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5udyh0KSx0aGlzLm93KCksdGhpc30sbHc6ZnVuY3Rpb24odCl7dCYmdGhpcy5udyh0KTt2YXIgZT10aGlzLmR3KCk7cmV0dXJuIGV9LHN3OjE2LGZ3OmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLGkpe3JldHVybiBuZXcgdC5pbml0KGkpLmx3KGUpfX0sZ3c6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsaSl7cmV0dXJuIG5ldyB1LkhNQUMuaW5pdCh0LGkpLmx3KGUpfX19KSxpLnZ3PXt9KTtyZXR1cm4gaX0oTWF0aCk7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxlLGkscixuLG8scyl7cmV0dXJuIHQ9dCsoZSZpfH5lJnIpK24rcywodDw8b3x0Pj4+MzItbykrZX1mdW5jdGlvbiBpKHQsZSxpLHIsbixvLHMpe3JldHVybiB0PXQrKGUmcnxpJn5yKStuK3MsKHQ8PG98dD4+PjMyLW8pK2V9ZnVuY3Rpb24gcih0LGUsaSxyLG4sbyxzKXtyZXR1cm4gdD10KyhlXmlecikrbitzLCh0PDxvfHQ+Pj4zMi1vKStlfWZ1bmN0aW9uIG4odCxlLGkscixuLG8scyl7cmV0dXJuIHQ9dCsoaV4oZXx+cikpK24rcywodDw8b3x0Pj4+MzItbykrZX1mb3IodmFyIG89YnQscz1vLnFtLGE9cy56bSxjPXMuaHcscz1vLnZ3LGg9W10scD0wOzY0PnA7cCsrKWhbcF09NDI5NDk2NzI5Nip0LmFicyh0LnNpbihwKzEpKXwwO3M9cy55dz1jLmV4dGVuZCh7dXc6ZnVuY3Rpb24oKXt0aGlzLm13PW5ldyBhLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSxjdzpmdW5jdGlvbih0LG8pe2Zvcih2YXIgcz0wOzE2PnM7cysrKXt2YXIgYT1vK3MsYz10W2FdO3RbYV09MTY3MTE5MzUmKGM8PDh8Yz4+PjI0KXw0Mjc4MjU1MzYwJihjPDwyNHxjPj4+OCl9dmFyIHM9dGhpcy5tdy5XbSxhPXRbbyswXSxjPXRbbysxXSxwPXRbbysyXSx1PXRbbyszXSxsPXRbbys0XSxkPXRbbys1XSxmPXRbbys2XSxnPXRbbys3XSx2PXRbbys4XSx5PXRbbys5XSxtPXRbbysxMF0sdz10W28rMTFdLFQ9dFtvKzEyXSxTPXRbbysxM10sYj10W28rMTRdLEU9dFtvKzE1XSxJPXNbMF0sUj1zWzFdLGs9c1syXSxDPXNbM10sST1lKEksUixrLEMsYSw3LGhbMF0pLEM9ZShDLEksUixrLGMsMTIsaFsxXSksaz1lKGssQyxJLFIscCwxNyxoWzJdKSxSPWUoUixrLEMsSSx1LDIyLGhbM10pLEk9ZShJLFIsayxDLGwsNyxoWzRdKSxDPWUoQyxJLFIsayxkLDEyLGhbNV0pLGs9ZShrLEMsSSxSLGYsMTcsaFs2XSksUj1lKFIsayxDLEksZywyMixoWzddKSxJPWUoSSxSLGssQyx2LDcsaFs4XSksQz1lKEMsSSxSLGsseSwxMixoWzldKSxrPWUoayxDLEksUixtLDE3LGhbMTBdKSxSPWUoUixrLEMsSSx3LDIyLGhbMTFdKSxJPWUoSSxSLGssQyxULDcsaFsxMl0pLEM9ZShDLEksUixrLFMsMTIsaFsxM10pLGs9ZShrLEMsSSxSLGIsMTcsaFsxNF0pLFI9ZShSLGssQyxJLEUsMjIsaFsxNV0pLEk9aShJLFIsayxDLGMsNSxoWzE2XSksQz1pKEMsSSxSLGssZiw5LGhbMTddKSxrPWkoayxDLEksUix3LDE0LGhbMThdKSxSPWkoUixrLEMsSSxhLDIwLGhbMTldKSxJPWkoSSxSLGssQyxkLDUsaFsyMF0pLEM9aShDLEksUixrLG0sOSxoWzIxXSksaz1pKGssQyxJLFIsRSwxNCxoWzIyXSksUj1pKFIsayxDLEksbCwyMCxoWzIzXSksST1pKEksUixrLEMseSw1LGhbMjRdKSxDPWkoQyxJLFIsayxiLDksaFsyNV0pLGs9aShrLEMsSSxSLHUsMTQsaFsyNl0pLFI9aShSLGssQyxJLHYsMjAsaFsyN10pLEk9aShJLFIsayxDLFMsNSxoWzI4XSksQz1pKEMsSSxSLGsscCw5LGhbMjldKSxrPWkoayxDLEksUixnLDE0LGhbMzBdKSxSPWkoUixrLEMsSSxULDIwLGhbMzFdKSxJPXIoSSxSLGssQyxkLDQsaFszMl0pLEM9cihDLEksUixrLHYsMTEsaFszM10pLGs9cihrLEMsSSxSLHcsMTYsaFszNF0pLFI9cihSLGssQyxJLGIsMjMsaFszNV0pLEk9cihJLFIsayxDLGMsNCxoWzM2XSksQz1yKEMsSSxSLGssbCwxMSxoWzM3XSksaz1yKGssQyxJLFIsZywxNixoWzM4XSksUj1yKFIsayxDLEksbSwyMyxoWzM5XSksST1yKEksUixrLEMsUyw0LGhbNDBdKSxDPXIoQyxJLFIsayxhLDExLGhbNDFdKSxrPXIoayxDLEksUix1LDE2LGhbNDJdKSxSPXIoUixrLEMsSSxmLDIzLGhbNDNdKSxJPXIoSSxSLGssQyx5LDQsaFs0NF0pLEM9cihDLEksUixrLFQsMTEsaFs0NV0pLGs9cihrLEMsSSxSLEUsMTYsaFs0Nl0pLFI9cihSLGssQyxJLHAsMjMsaFs0N10pLEk9bihJLFIsayxDLGEsNixoWzQ4XSksQz1uKEMsSSxSLGssZywxMCxoWzQ5XSksaz1uKGssQyxJLFIsYiwxNSxoWzUwXSksUj1uKFIsayxDLEksZCwyMSxoWzUxXSksST1uKEksUixrLEMsVCw2LGhbNTJdKSxDPW4oQyxJLFIsayx1LDEwLGhbNTNdKSxrPW4oayxDLEksUixtLDE1LGhbNTRdKSxSPW4oUixrLEMsSSxjLDIxLGhbNTVdKSxJPW4oSSxSLGssQyx2LDYsaFs1Nl0pLEM9bihDLEksUixrLEUsMTAsaFs1N10pLGs9bihrLEMsSSxSLGYsMTUsaFs1OF0pLFI9bihSLGssQyxJLFMsMjEsaFs1OV0pLEk9bihJLFIsayxDLGwsNixoWzYwXSksQz1uKEMsSSxSLGssdywxMCxoWzYxXSksaz1uKGssQyxJLFIscCwxNSxoWzYyXSksUj1uKFIsayxDLEkseSwyMSxoWzYzXSk7c1swXT1zWzBdK0l8MCxzWzFdPXNbMV0rUnwwLHNbMl09c1syXStrfDAsc1szXT1zWzNdK0N8MH0sZHc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLml3LGk9ZS5XbSxyPTgqdGhpcy5ydyxuPTgqZS4kbTtpW24+Pj41XXw9MTI4PDwyNC1uJTMyO3ZhciBvPXQuZmxvb3Ioci80Mjk0OTY3Mjk2KTtmb3IoaVsobis2ND4+Pjk8PDQpKzE1XT0xNjcxMTkzNSYobzw8OHxvPj4+MjQpfDQyNzgyNTUzNjAmKG88PDI0fG8+Pj44KSxpWyhuKzY0Pj4+OTw8NCkrMTRdPTE2NzExOTM1JihyPDw4fHI+Pj4yNCl8NDI3ODI1NTM2MCYocjw8MjR8cj4+PjgpLGUuJG09NCooaS5sZW5ndGgrMSksdGhpcy5vdygpLGU9dGhpcy5tdyxpPWUuV20scj0wOzQ+cjtyKyspbj1pW3JdLGlbcl09MTY3MTE5MzUmKG48PDh8bj4+PjI0KXw0Mjc4MjU1MzYwJihuPDwyNHxuPj4+OCk7cmV0dXJuIGV9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9Yy5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Lm13PXRoaXMubXcuY2xvbmUoKSx0fX0pLG8ueXc9Yy5mdyhzKSxvLnd3PWMuZ3cocyl9KE1hdGgpLGZ1bmN0aW9uKCl7dmFyIHQ9YnQsZT10LnFtLGk9ZS56bSxyPWUuaHcsbj1bXSxlPXQudncuVHc9ci5leHRlbmQoe3V3OmZ1bmN0aW9uKCl7dGhpcy5tdz1uZXcgaS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxjdzpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10aGlzLm13LldtLHI9aVswXSxvPWlbMV0scz1pWzJdLGE9aVszXSxjPWlbNF0saD0wOzgwPmg7aCsrKXtpZigxNj5oKW5baF09MHx0W2UraF07ZWxzZXt2YXIgcD1uW2gtM11ebltoLThdXm5baC0xNF1ebltoLTE2XTtuW2hdPXA8PDF8cD4+PjMxfXA9KHI8PDV8cj4+PjI3KStjK25baF0scD0yMD5oP3ArKChvJnN8fm8mYSkrMTUxODUwMDI0OSk6NDA+aD9wKygob15zXmEpKzE4NTk3NzUzOTMpOjYwPmg/cCsoKG8mc3xvJmF8cyZhKS0xODk0MDA3NTg4KTpwKygob15zXmEpLTg5OTQ5NzUxNCksYz1hLGE9cyxzPW88PDMwfG8+Pj4yLG89cixyPXB9aVswXT1pWzBdK3J8MCxpWzFdPWlbMV0rb3wwLGlbMl09aVsyXStzfDAsaVszXT1pWzNdK2F8MCxpWzRdPWlbNF0rY3wwfSxkdzpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaXcsZT10LldtLGk9OCp0aGlzLnJ3LHI9OCp0LiRtO3JldHVybiBlW3I+Pj41XXw9MTI4PDwyNC1yJTMyLGVbKHIrNjQ+Pj45PDw0KSsxNF09TWF0aC5mbG9vcihpLzQyOTQ5NjcyOTYpLGVbKHIrNjQ+Pj45PDw0KSsxNV09aSx0LiRtPTQqZS5sZW5ndGgsdGhpcy5vdygpLHRoaXMubXd9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9ci5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Lm13PXRoaXMubXcuY2xvbmUoKSx0fX0pO3QuVHc9ci5mdyhlKSx0LlN3PXIuZ3coZSl9KCk7LyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vICovXG4gIHZhciBFdCxJdD0weGRlYWRiZWVmY2FmZSxSdD0xNTcxNTA3MD09KDE2Nzc3MjE1Jkl0KTtSdCYmXCJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXJcIj09d3QuYXBwTmFtZT8oaS5wcm90b3R5cGUuZ3k9byxFdD0zMCk6UnQmJlwiTmV0c2NhcGVcIiE9d3QuYXBwTmFtZT8oaS5wcm90b3R5cGUuZ3k9bixFdD0yNik6KGkucHJvdG90eXBlLmd5PXMsRXQ9MjgpLGkucHJvdG90eXBlLmF5PUV0LGkucHJvdG90eXBlLnV5PSgxPDxFdCktMSxpLnByb3RvdHlwZS5veT0xPDxFdDt2YXIga3Q9NTI7aS5wcm90b3R5cGUuVHk9TWF0aC5wb3coMixrdCksaS5wcm90b3R5cGUubXk9a3QtRXQsaS5wcm90b3R5cGUud3k9MipFdC1rdDt2YXIgQ3QsT3QsUHQ9XCIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIixBdD1uZXcgQXJyYXk7Zm9yKEN0PVwiMFwiLmNoYXJDb2RlQXQoMCksT3Q9MDtPdDw9OTsrK090KUF0W0N0KytdPU90O2ZvcihDdD1cImFcIi5jaGFyQ29kZUF0KDApLE90PTEwO090PDM2OysrT3QpQXRbQ3QrK109T3Q7Zm9yKEN0PVwiQVwiLmNoYXJDb2RlQXQoMCksT3Q9MTA7T3Q8MzY7KytPdClBdFtDdCsrXT1PdDtQLnByb3RvdHlwZS5feT1BLFAucHJvdG90eXBlLkx5PU4sUC5wcm90b3R5cGUucmVkdWNlPXgsUC5wcm90b3R5cGUuSHk9QixQLnByb3RvdHlwZS5EeT1GLEQucHJvdG90eXBlLl95PUgsRC5wcm90b3R5cGUuTHk9TCxELnByb3RvdHlwZS5yZWR1Y2U9TSxELnByb3RvdHlwZS5IeT1VLEQucHJvdG90eXBlLkR5PWosaS5wcm90b3R5cGUudnk9aCxpLnByb3RvdHlwZS5zeT1wLGkucHJvdG90eXBlLmV5PWwsaS5wcm90b3R5cGUuaHk9ZCxpLnByb3RvdHlwZS5TeT1ULGkucHJvdG90eXBlLkV5PVMsaS5wcm90b3R5cGUueXk9YixpLnByb3RvdHlwZS5JeT1FLGkucHJvdG90eXBlLnB5PUksaS5wcm90b3R5cGUuQ3k9UixpLnByb3RvdHlwZS5PeT1rLGkucHJvdG90eXBlLlJ5PUMsaS5wcm90b3R5cGUuQXk9XyxpLnByb3RvdHlwZS5NeT1WLGkucHJvdG90eXBlLmV4cD1RLGkucHJvdG90eXBlLnRvU3RyaW5nPWYsaS5wcm90b3R5cGUubHk9ZyxpLnByb3RvdHlwZS5hYnM9dixpLnByb3RvdHlwZS5ieT15LGkucHJvdG90eXBlLkt5PXcsaS5wcm90b3R5cGUua3k9TyxpLnByb3RvdHlwZS5KeT1xLGkuWkVSTz11KDApLGkuT05FPXUoMSksLyohIGFzbjEtMS4wLjkuanMgKGMpIDIwMTMtMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZVxuICAgKi9cbiAgXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEtKVVImJktKVVJ8fChLSlVSPXt9KSxcInVuZGVmaW5lZFwiIT10eXBlb2YgS0pVUi5idyYmS0pVUi5id3x8KEtKVVIuYnc9e30pLEtKVVIuYncuRXc9bmV3IGZ1bmN0aW9uKCl7dGhpcy5Jdz1mdW5jdGlvbih0KXt2YXIgZT10LnRvU3RyaW5nKDE2KTtyZXR1cm4gZS5sZW5ndGglMj09MSYmKGU9XCIwXCIrZSksZX0sdGhpcy5Sdz1mdW5jdGlvbih0KXt2YXIgZT10LnRvU3RyaW5nKDE2KTtpZihcIi1cIiE9ZS5zdWJzdHIoMCwxKSllLmxlbmd0aCUyPT0xP2U9XCIwXCIrZTplLm1hdGNoKC9eWzAtN10vKXx8KGU9XCIwMFwiK2UpO2Vsc2V7dmFyIHI9ZS5zdWJzdHIoMSksbj1yLmxlbmd0aDtuJTI9PTE/bis9MTplLm1hdGNoKC9eWzAtN10vKXx8KG4rPTIpO2Zvcih2YXIgbz1cIlwiLHM9MDtzPG47cysrKW8rPVwiZlwiO3ZhciBhPW5ldyBpKG8sMTYpLGM9YS54b3IodCkuYWRkKGkuT05FKTtlPWMudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14tLyxcIlwiKX1yZXR1cm4gZX0sdGhpcy5rdz1mdW5jdGlvbih0LGUpe3ZhciBpPShLSlVSLmJ3LGJ0LlltLlhtLnBhcnNlKHQpKSxyPWJ0LlltLkJhc2U2NC5zdHJpbmdpZnkoaSksbj1yLnJlcGxhY2UoLyguezY0fSkvZyxcIiQxXFxyXFxuXCIpO3JldHVybiBuPW4ucmVwbGFjZSgvXFxyXFxuJC8sXCJcIiksXCItLS0tLUJFR0lOIFwiK2UrXCItLS0tLVxcclxcblwiK24rXCJcXHJcXG4tLS0tLUVORCBcIitlK1wiLS0tLS1cXHJcXG5cIn0sdGhpcy5Ddz1mdW5jdGlvbih0KXt2YXIgZT1LSlVSLmJ3LGk9T2JqZWN0LmtleXModCk7aWYoMSE9aS5sZW5ndGgpdGhyb3dcImtleSBvZiBwYXJhbSBzaGFsbCBiZSBvbmx5IG9uZS5cIjt2YXIgcj1pWzBdO2lmKFwiOmJvb2w6aW50OmJpdHN0cjpvY3RzdHI6bnVsbDpvaWQ6ZW51bTp1dGY4c3RyOm51bXN0cjpwcm5zdHI6dGVsc3RyOmlhNXN0cjp1dGN0aW1lOmdlbnRpbWU6c2VxOnNldDp0YWc6XCIuaW5kZXhPZihcIjpcIityK1wiOlwiKT09LTEpdGhyb3dcInVuZGVmaW5lZCBrZXk6IFwiK3I7aWYoXCJib29sXCI9PXIpcmV0dXJuIG5ldyBlLk93KHRbcl0pO2lmKFwiaW50XCI9PXIpcmV0dXJuIG5ldyBlLlB3KHRbcl0pO2lmKFwiYml0c3RyXCI9PXIpcmV0dXJuIG5ldyBlLkF3KHRbcl0pO2lmKFwib2N0c3RyXCI9PXIpcmV0dXJuIG5ldyBlLk53KHRbcl0pO2lmKFwibnVsbFwiPT1yKXJldHVybiBuZXcgZS54dyh0W3JdKTtpZihcIm9pZFwiPT1yKXJldHVybiBuZXcgZS5Cdyh0W3JdKTtpZihcImVudW1cIj09cilyZXR1cm4gbmV3IGUuRncodFtyXSk7aWYoXCJ1dGY4c3RyXCI9PXIpcmV0dXJuIG5ldyBlLl93KHRbcl0pO2lmKFwibnVtc3RyXCI9PXIpcmV0dXJuIG5ldyBlLkR3KHRbcl0pO2lmKFwicHJuc3RyXCI9PXIpcmV0dXJuIG5ldyBlLkh3KHRbcl0pO2lmKFwidGVsc3RyXCI9PXIpcmV0dXJuIG5ldyBlLkx3KHRbcl0pO2lmKFwiaWE1c3RyXCI9PXIpcmV0dXJuIG5ldyBlLk13KHRbcl0pO2lmKFwidXRjdGltZVwiPT1yKXJldHVybiBuZXcgZS5qdyh0W3JdKTtpZihcImdlbnRpbWVcIj09cilyZXR1cm4gbmV3IGUuVXcodFtyXSk7aWYoXCJzZXFcIj09cil7Zm9yKHZhciBuPXRbcl0sbz1bXSxzPTA7czxuLmxlbmd0aDtzKyspe3ZhciBhPWUuRXcuQ3cobltzXSk7by5wdXNoKGEpfXJldHVybiBuZXcgZS5Wdyh7SGY6b30pfWlmKFwic2V0XCI9PXIpe2Zvcih2YXIgbj10W3JdLG89W10scz0wO3M8bi5sZW5ndGg7cysrKXt2YXIgYT1lLkV3LkN3KG5bc10pO28ucHVzaChhKX1yZXR1cm4gbmV3IGUuUXcoe0hmOm99KX1pZihcInRhZ1wiPT1yKXt2YXIgYz10W3JdO2lmKFwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKSYmMz09Yy5sZW5ndGgpe3ZhciBoPWUuRXcuQ3coY1syXSk7cmV0dXJuIG5ldyBlLnF3KHt0YWc6Y1swXSxKdzpjWzFdLEt3Omh9KX12YXIgcD17fTtpZih2b2lkIDAhPT1jLkp3JiYocC5Kdz1jLkp3KSx2b2lkIDAhPT1jLnRhZyYmKHAudGFnPWMudGFnKSx2b2lkIDA9PT1jLkt3KXRocm93XCJvYmogc2hhbGwgYmUgc3BlY2lmaWVkIGZvciAndGFnJy5cIjtyZXR1cm4gcC5Ldz1lLkV3LkN3KGMuS3cpLG5ldyBlLnF3KHApfX0sdGhpcy5Hdz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLkN3KHQpO3JldHVybiBlLnp3KCl9fSxLSlVSLmJ3LkV3Lld3PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1cIlwiLHI9cGFyc2VJbnQodC5zdWJzdHIoMCwyKSwxNiksbj1NYXRoLmZsb29yKHIvNDApLG89ciU0MCxlPW4rXCIuXCIrbyxzPVwiXCIsYT0yO2E8dC5sZW5ndGg7YSs9Mil7dmFyIGM9cGFyc2VJbnQodC5zdWJzdHIoYSwyKSwxNiksaD0oXCIwMDAwMDAwMFwiK2MudG9TdHJpbmcoMikpLnNsaWNlKC04KTtpZihzKz1oLnN1YnN0cigxLDcpLFwiMFwiPT1oLnN1YnN0cigwLDEpKXt2YXIgcD1uZXcgaShzLDIpO2U9ZStcIi5cIitwLnRvU3RyaW5nKDEwKSxzPVwiXCJ9fXJldHVybiBlfSxLSlVSLmJ3LkV3LiR3PWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlPXQudG9TdHJpbmcoMTYpO3JldHVybiAxPT1lLmxlbmd0aCYmKGU9XCIwXCIrZSksZX0scj1mdW5jdGlvbih0KXt2YXIgcj1cIlwiLG49bmV3IGkodCwxMCksbz1uLnRvU3RyaW5nKDIpLHM9Ny1vLmxlbmd0aCU3Ozc9PXMmJihzPTApO2Zvcih2YXIgYT1cIlwiLGM9MDtjPHM7YysrKWErPVwiMFwiO289YStvO2Zvcih2YXIgYz0wO2M8by5sZW5ndGgtMTtjKz03KXt2YXIgaD1vLnN1YnN0cihjLDcpO2MhPW8ubGVuZ3RoLTcmJihoPVwiMVwiK2gpLHIrPWUocGFyc2VJbnQoaCwyKSl9cmV0dXJuIHJ9O2lmKCF0Lm1hdGNoKC9eWzAtOS5dKyQvKSl0aHJvd1wibWFsZm9ybWVkIG9pZCBzdHJpbmc6IFwiK3Q7dmFyIG49XCJcIixvPXQuc3BsaXQoXCIuXCIpLHM9NDAqcGFyc2VJbnQob1swXSkrcGFyc2VJbnQob1sxXSk7bis9ZShzKSxvLnNwbGljZSgwLDIpO2Zvcih2YXIgYT0wO2E8by5sZW5ndGg7YSsrKW4rPXIob1thXSk7cmV0dXJuIG59LEtKVVIuYncuWXc9ZnVuY3Rpb24oKXt2YXIgdD1cIlwiO3RoaXMuWHc9ZnVuY3Rpb24oKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgdGhpcy5ad3x8bnVsbD09dGhpcy5adyl0aHJvd1widGhpcy5oViBpcyBudWxsIG9yIHVuZGVmaW5lZC5cIjtpZih0aGlzLlp3Lmxlbmd0aCUyPT0xKXRocm93XCJ2YWx1ZSBoZXggbXVzdCBiZSBldmVuIGxlbmd0aDogbj1cIit0Lmxlbmd0aCtcIix2PVwiK3RoaXMuWnc7dmFyIGU9dGhpcy5ady5sZW5ndGgvMixpPWUudG9TdHJpbmcoMTYpO2lmKGkubGVuZ3RoJTI9PTEmJihpPVwiMFwiK2kpLGU8MTI4KXJldHVybiBpO3ZhciByPWkubGVuZ3RoLzI7aWYocj4xNSl0aHJvd1wiQVNOLjEgbGVuZ3RoIHRvbyBsb25nIHRvIHJlcHJlc2VudCBieSA4eDogbiA9IFwiK2UudG9TdHJpbmcoMTYpO3ZhciBuPTEyOCtyO3JldHVybiBuLnRvU3RyaW5nKDE2KStpfSx0aGlzLnp3PWZ1bmN0aW9uKCl7cmV0dXJuKG51bGw9PXRoaXMudFR8fHRoaXMuZVQpJiYodGhpcy5adz10aGlzLmlUKCksdGhpcy5yVD10aGlzLlh3KCksdGhpcy50VD10aGlzLm5UK3RoaXMuclQrdGhpcy5adyx0aGlzLmVUPSExKSx0aGlzLnRUfSx0aGlzLm9UPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuencoKSx0aGlzLlp3fSx0aGlzLmlUPWZ1bmN0aW9uKCl7cmV0dXJuXCJcIn19LEtKVVIuYncuc1Q9ZnVuY3Rpb24odCl7S0pVUi5idy5zVC5EbS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYVQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ueX0sdGhpcy5jVD1mdW5jdGlvbih0KXt0aGlzLnRUPW51bGwsdGhpcy5lVD0hMCx0aGlzLm55PXQsdGhpcy5adz1zdG9oZXgodGhpcy5ueSl9LHRoaXMuaFQ9ZnVuY3Rpb24odCl7dGhpcy50VD1udWxsLHRoaXMuZVQ9ITAsdGhpcy5ueT1udWxsLHRoaXMuWnc9dH0sdGhpcy5pVD1mdW5jdGlvbigpe3JldHVybiB0aGlzLlp3fSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmKFwic3RyaW5nXCI9PXR5cGVvZiB0P3RoaXMuY1QodCk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQuYWM/dGhpcy5jVCh0LmFjKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5wVCYmdGhpcy5oVCh0LnBUKSl9LFN0LmxhbmcuZXh0ZW5kKEtKVVIuYncuc1QsS0pVUi5idy5ZdyksS0pVUi5idy51VD1mdW5jdGlvbih0KXtLSlVSLmJ3LnVULkRtLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5sVD1mdW5jdGlvbih0KXt1dGM9dC5nZXRUaW1lKCkrNmU0KnQuZ2V0VGltZXpvbmVPZmZzZXQoKTt2YXIgZT1uZXcgRGF0ZSh1dGMpO3JldHVybiBlfSx0aGlzLmRUPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLmZULG49dGhpcy5sVCh0KSxvPVN0cmluZyhuLmdldEZ1bGxZZWFyKCkpO1widXRjXCI9PWUmJihvPW8uc3Vic3RyKDIsMikpO3ZhciBzPXIoU3RyaW5nKG4uZ2V0TW9udGgoKSsxKSwyKSxhPXIoU3RyaW5nKG4uZ2V0RGF0ZSgpKSwyKSxjPXIoU3RyaW5nKG4uZ2V0SG91cnMoKSksMiksaD1yKFN0cmluZyhuLmdldE1pbnV0ZXMoKSksMikscD1yKFN0cmluZyhuLmdldFNlY29uZHMoKSksMiksdT1vK3MrYStjK2grcDtpZihpPT09ITApe3ZhciBsPW4uZ2V0TWlsbGlzZWNvbmRzKCk7aWYoMCE9bCl7dmFyIGQ9cihTdHJpbmcobCksMyk7ZD1kLnJlcGxhY2UoL1swXSskLyxcIlwiKSx1PXUrXCIuXCIrZH19cmV0dXJuIHUrXCJaXCJ9LHRoaXMuZlQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5sZW5ndGg+PWU/dDpuZXcgQXJyYXkoZS10Lmxlbmd0aCsxKS5qb2luKFwiMFwiKSt0fSx0aGlzLmFUPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubnl9LHRoaXMuY1Q9ZnVuY3Rpb24odCl7dGhpcy50VD1udWxsLHRoaXMuZVQ9ITAsdGhpcy5ueT10LHRoaXMuWnc9c3RvaGV4KHQpfSx0aGlzLmdUPWZ1bmN0aW9uKHQsZSxpLHIsbixvKXt2YXIgcz1uZXcgRGF0ZShEYXRlLlVUQyh0LGUtMSxpLHIsbixvLDApKTt0aGlzLnZUKHMpfSx0aGlzLmlUPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWnd9fSxTdC5sYW5nLmV4dGVuZChLSlVSLmJ3LnVULEtKVVIuYncuWXcpLEtKVVIuYncueVQ9ZnVuY3Rpb24odCl7S0pVUi5idy5zVC5EbS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMubVQ9ZnVuY3Rpb24odCl7dGhpcy50VD1udWxsLHRoaXMuZVQ9ITAsdGhpcy53VD10fSx0aGlzLlRUPWZ1bmN0aW9uKHQpe3RoaXMudFQ9bnVsbCx0aGlzLmVUPSEwLHRoaXMud1QucHVzaCh0KX0sdGhpcy53VD1uZXcgQXJyYXksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0LkhmJiYodGhpcy53VD10LkhmKX0sU3QubGFuZy5leHRlbmQoS0pVUi5idy55VCxLSlVSLmJ3Lll3KSxLSlVSLmJ3Lk93PWZ1bmN0aW9uKCl7S0pVUi5idy5Pdy5EbS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMublQ9XCIwMVwiLHRoaXMudFQ9XCIwMTAxZmZcIn0sU3QubGFuZy5leHRlbmQoS0pVUi5idy5PdyxLSlVSLmJ3Lll3KSxLSlVSLmJ3LlB3PWZ1bmN0aW9uKHQpe0tKVVIuYncuUHcuRG0uY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLm5UPVwiMDJcIix0aGlzLlNUPWZ1bmN0aW9uKHQpe3RoaXMudFQ9bnVsbCx0aGlzLmVUPSEwLHRoaXMuWnc9S0pVUi5idy5Fdy5Sdyh0KX0sdGhpcy5iVD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgaShTdHJpbmcodCksMTApO3RoaXMuU1QoZSl9LHRoaXMuRVQ9ZnVuY3Rpb24odCl7dGhpcy5adz10fSx0aGlzLmlUPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWnd9LFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0JiYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQuYmlnaW50P3RoaXMuU1QodC5iaWdpbnQpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0W1wiaW50XCJdP3RoaXMuYlQodFtcImludFwiXSk6XCJudW1iZXJcIj09dHlwZW9mIHQ/dGhpcy5iVCh0KTpcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5wVCYmdGhpcy5FVCh0LnBUKSl9LFN0LmxhbmcuZXh0ZW5kKEtKVVIuYncuUHcsS0pVUi5idy5ZdyksS0pVUi5idy5Bdz1mdW5jdGlvbih0KXtLSlVSLmJ3LkF3LkRtLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksdGhpcy5uVD1cIjAzXCIsdGhpcy5JVD1mdW5jdGlvbih0KXt0aGlzLnRUPW51bGwsdGhpcy5lVD0hMCx0aGlzLlp3PXR9LHRoaXMuUlQ9ZnVuY3Rpb24odCxlKXtpZih0PDB8fDc8dCl0aHJvd1widW51c2VkIGJpdHMgc2hhbGwgYmUgZnJvbSAwIHRvIDc6IHUgPSBcIit0O3ZhciBpPVwiMFwiK3Q7dGhpcy50VD1udWxsLHRoaXMuZVQ9ITAsdGhpcy5adz1pK2V9LHRoaXMua1Q9ZnVuY3Rpb24odCl7dD10LnJlcGxhY2UoLzArJC8sXCJcIik7dmFyIGU9OC10Lmxlbmd0aCU4Ozg9PWUmJihlPTApO2Zvcih2YXIgaT0wO2k8PWU7aSsrKXQrPVwiMFwiO2Zvcih2YXIgcj1cIlwiLGk9MDtpPHQubGVuZ3RoLTE7aSs9OCl7dmFyIG49dC5zdWJzdHIoaSw4KSxvPXBhcnNlSW50KG4sMikudG9TdHJpbmcoMTYpOzE9PW8ubGVuZ3RoJiYobz1cIjBcIitvKSxyKz1vfXRoaXMudFQ9bnVsbCx0aGlzLmVUPSEwLHRoaXMuWnc9XCIwXCIrZStyfSx0aGlzLkNUPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1cIlwiLGk9MDtpPHQubGVuZ3RoO2krKyllKz0xPT10W2ldP1wiMVwiOlwiMFwiO3RoaXMua1QoZSl9LHRoaXMuT1Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0KSxpPTA7aTx0O2krKyllW2ldPSExO3JldHVybiBlfSx0aGlzLmlUPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWnd9LFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0JiYoXCJzdHJpbmdcIj09dHlwZW9mIHQmJnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvXlswLTlhLWZdKyQvKT90aGlzLklUKHQpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0LnBUP3RoaXMuSVQodC5wVCk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQuYmluP3RoaXMua1QodC5iaW4pOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0LkhmJiZ0aGlzLkNUKHQuSGYpKX0sU3QubGFuZy5leHRlbmQoS0pVUi5idy5BdyxLSlVSLmJ3Lll3KSxLSlVSLmJ3Lk53PWZ1bmN0aW9uKHQpe0tKVVIuYncuTncuRG0uY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMublQ9XCIwNFwifSxTdC5sYW5nLmV4dGVuZChLSlVSLmJ3Lk53LEtKVVIuYncuc1QpLEtKVVIuYncueHc9ZnVuY3Rpb24oKXtLSlVSLmJ3Lnh3LkRtLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksdGhpcy5uVD1cIjA1XCIsdGhpcy50VD1cIjA1MDBcIn0sU3QubGFuZy5leHRlbmQoS0pVUi5idy54dyxLSlVSLmJ3Lll3KSxLSlVSLmJ3LkJ3PWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlPXQudG9TdHJpbmcoMTYpO3JldHVybiAxPT1lLmxlbmd0aCYmKGU9XCIwXCIrZSksZX0scj1mdW5jdGlvbih0KXt2YXIgcj1cIlwiLG49bmV3IGkodCwxMCksbz1uLnRvU3RyaW5nKDIpLHM9Ny1vLmxlbmd0aCU3Ozc9PXMmJihzPTApO2Zvcih2YXIgYT1cIlwiLGM9MDtjPHM7YysrKWErPVwiMFwiO289YStvO2Zvcih2YXIgYz0wO2M8by5sZW5ndGgtMTtjKz03KXt2YXIgaD1vLnN1YnN0cihjLDcpO2MhPW8ubGVuZ3RoLTcmJihoPVwiMVwiK2gpLHIrPWUocGFyc2VJbnQoaCwyKSl9cmV0dXJuIHJ9O0tKVVIuYncuQncuRG0uY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLm5UPVwiMDZcIix0aGlzLkVUPWZ1bmN0aW9uKHQpe3RoaXMudFQ9bnVsbCx0aGlzLmVUPSEwLHRoaXMubnk9bnVsbCx0aGlzLlp3PXR9LHRoaXMuUFQ9ZnVuY3Rpb24odCl7aWYoIXQubWF0Y2goL15bMC05Ll0rJC8pKXRocm93XCJtYWxmb3JtZWQgb2lkIHN0cmluZzogXCIrdDt2YXIgaT1cIlwiLG49dC5zcGxpdChcIi5cIiksbz00MCpwYXJzZUludChuWzBdKStwYXJzZUludChuWzFdKTtpKz1lKG8pLG4uc3BsaWNlKDAsMik7Zm9yKHZhciBzPTA7czxuLmxlbmd0aDtzKyspaSs9cihuW3NdKTt0aGlzLnRUPW51bGwsdGhpcy5lVD0hMCx0aGlzLm55PW51bGwsdGhpcy5adz1pfSx0aGlzLkFUPWZ1bmN0aW9uKHQpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBLSlVSLmJ3Lng1MDkuTlQubmFtZTJvaWRMaXN0W3RdKXRocm93XCJERVJPYmplY3RJZGVudGlmaWVyIG9pZE5hbWUgdW5kZWZpbmVkOiBcIit0O3ZhciBlPUtKVVIuYncueDUwOS5OVC5uYW1lMm9pZExpc3RbdF07dGhpcy5QVChlKX0sdGhpcy5pVD1mdW5jdGlvbigpe3JldHVybiB0aGlzLlp3fSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmKFwic3RyaW5nXCI9PXR5cGVvZiB0JiZ0Lm1hdGNoKC9eWzAtMl0uWzAtOS5dKyQvKT90aGlzLlBUKHQpOnZvaWQgMCE9PUtKVVIuYncueDUwOS5OVC5uYW1lMm9pZExpc3RbdF0/dGhpcy5QVChLSlVSLmJ3Lng1MDkuTlQubmFtZTJvaWRMaXN0W3RdKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5vaWQ/dGhpcy5QVCh0Lm9pZCk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQucFQ/dGhpcy5FVCh0LnBUKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5uYW1lJiZ0aGlzLkFUKHQubmFtZSkpfSxTdC5sYW5nLmV4dGVuZChLSlVSLmJ3LkJ3LEtKVVIuYncuWXcpLEtKVVIuYncuRnc9ZnVuY3Rpb24odCl7S0pVUi5idy5Gdy5EbS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMublQ9XCIwYVwiLHRoaXMuU1Q9ZnVuY3Rpb24odCl7dGhpcy50VD1udWxsLHRoaXMuZVQ9ITAsdGhpcy5adz1LSlVSLmJ3LkV3LlJ3KHQpfSx0aGlzLmJUPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBpKFN0cmluZyh0KSwxMCk7dGhpcy5TVChlKX0sdGhpcy5FVD1mdW5jdGlvbih0KXt0aGlzLlp3PXR9LHRoaXMuaVQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ad30sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJihcInVuZGVmaW5lZFwiIT10eXBlb2YgdFtcImludFwiXT90aGlzLmJUKHRbXCJpbnRcIl0pOlwibnVtYmVyXCI9PXR5cGVvZiB0P3RoaXMuYlQodCk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQucFQmJnRoaXMuRVQodC5wVCkpfSxTdC5sYW5nLmV4dGVuZChLSlVSLmJ3LkZ3LEtKVVIuYncuWXcpLEtKVVIuYncuX3c9ZnVuY3Rpb24odCl7S0pVUi5idy5fdy5EbS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5uVD1cIjBjXCJ9LFN0LmxhbmcuZXh0ZW5kKEtKVVIuYncuX3csS0pVUi5idy5zVCksS0pVUi5idy5Edz1mdW5jdGlvbih0KXtLSlVSLmJ3LkR3LkRtLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLm5UPVwiMTJcIn0sU3QubGFuZy5leHRlbmQoS0pVUi5idy5EdyxLSlVSLmJ3LnNUKSxLSlVSLmJ3Lkh3PWZ1bmN0aW9uKHQpe0tKVVIuYncuSHcuRG0uY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMublQ9XCIxM1wifSxTdC5sYW5nLmV4dGVuZChLSlVSLmJ3Lkh3LEtKVVIuYncuc1QpLEtKVVIuYncuTHc9ZnVuY3Rpb24odCl7S0pVUi5idy5Mdy5EbS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5uVD1cIjE0XCJ9LFN0LmxhbmcuZXh0ZW5kKEtKVVIuYncuTHcsS0pVUi5idy5zVCksS0pVUi5idy5Ndz1mdW5jdGlvbih0KXtLSlVSLmJ3Lk13LkRtLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLm5UPVwiMTZcIn0sU3QubGFuZy5leHRlbmQoS0pVUi5idy5NdyxLSlVSLmJ3LnNUKSxLSlVSLmJ3Lmp3PWZ1bmN0aW9uKHQpe0tKVVIuYncuancuRG0uY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMublQ9XCIxN1wiLHRoaXMudlQ9ZnVuY3Rpb24odCl7dGhpcy50VD1udWxsLHRoaXMuZVQ9ITAsdGhpcy54VD10LHRoaXMubnk9dGhpcy5kVCh0aGlzLnhULFwidXRjXCIpLHRoaXMuWnc9c3RvaGV4KHRoaXMubnkpfSx0aGlzLmlUPWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIHRoaXMueFQmJlwidW5kZWZpbmVkXCI9PXR5cGVvZiB0aGlzLm55JiYodGhpcy54VD1uZXcgRGF0ZSx0aGlzLm55PXRoaXMuZFQodGhpcy54VCxcInV0Y1wiKSx0aGlzLlp3PXN0b2hleCh0aGlzLm55KSksdGhpcy5ad30sdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQuYWM/dGhpcy5jVCh0LmFjKTpcInN0cmluZ1wiPT10eXBlb2YgdCYmdC5tYXRjaCgvXlswLTldezEyfVokLyk/dGhpcy5jVCh0KTp2b2lkIDAhPT10LnBUP3RoaXMuaFQodC5wVCk6dm9pZCAwIT09dC54VCYmdGhpcy52VCh0LnhUKSl9LFN0LmxhbmcuZXh0ZW5kKEtKVVIuYncuancsS0pVUi5idy51VCksS0pVUi5idy5Vdz1mdW5jdGlvbih0KXtLSlVSLmJ3LlV3LkRtLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLm5UPVwiMThcIix0aGlzLkJUPSExLHRoaXMudlQ9ZnVuY3Rpb24odCl7dGhpcy50VD1udWxsLHRoaXMuZVQ9ITAsdGhpcy54VD10LHRoaXMubnk9dGhpcy5kVCh0aGlzLnhULFwiZ2VuXCIsdGhpcy5CVCksdGhpcy5adz1zdG9oZXgodGhpcy5ueSl9LHRoaXMuaVQ9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy54VCYmdm9pZCAwPT09dGhpcy5ueSYmKHRoaXMueFQ9bmV3IERhdGUsdGhpcy5ueT10aGlzLmRUKHRoaXMueFQsXCJnZW5cIix0aGlzLkJUKSx0aGlzLlp3PXN0b2hleCh0aGlzLm55KSksdGhpcy5ad30sdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQuYWM/dGhpcy5jVCh0LmFjKTpcInN0cmluZ1wiPT10eXBlb2YgdCYmdC5tYXRjaCgvXlswLTldezE0fVokLyk/dGhpcy5jVCh0KTp2b2lkIDAhPT10LnBUP3RoaXMuaFQodC5wVCk6dm9pZCAwIT09dC54VCYmdGhpcy52VCh0LnhUKSx0Lm1pbGxpcz09PSEwJiYodGhpcy5CVD0hMCkpfSxTdC5sYW5nLmV4dGVuZChLSlVSLmJ3LlV3LEtKVVIuYncudVQpLEtKVVIuYncuVnc9ZnVuY3Rpb24odCl7S0pVUi5idy5Wdy5EbS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5uVD1cIjMwXCIsdGhpcy5pVD1mdW5jdGlvbigpe2Zvcih2YXIgdD1cIlwiLGU9MDtlPHRoaXMud1QubGVuZ3RoO2UrKyl7dmFyIGk9dGhpcy53VFtlXTt0Kz1pLnp3KCl9cmV0dXJuIHRoaXMuWnc9dCx0aGlzLlp3fX0sU3QubGFuZy5leHRlbmQoS0pVUi5idy5WdyxLSlVSLmJ3LnlUKSxLSlVSLmJ3LlF3PWZ1bmN0aW9uKHQpe0tKVVIuYncuUXcuRG0uY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMublQ9XCIzMVwiLHRoaXMuRlQ9ITAsdGhpcy5pVD1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgQXJyYXksZT0wO2U8dGhpcy53VC5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLndUW2VdO3QucHVzaChpLnp3KCkpfXJldHVybiAxPT10aGlzLkZUJiZ0LnNvcnQoKSx0aGlzLlp3PXQuam9pbihcIlwiKSx0aGlzLlp3fSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQuc29ydGZsYWcmJjA9PXQuc29ydGZsYWcmJih0aGlzLkZUPSExKX0sU3QubGFuZy5leHRlbmQoS0pVUi5idy5RdyxLSlVSLmJ3LnlUKSxLSlVSLmJ3LnF3PWZ1bmN0aW9uKHQpe0tKVVIuYncucXcuRG0uY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLm5UPVwiYTBcIix0aGlzLlp3PVwiXCIsdGhpcy5fVD0hMCx0aGlzLkRUPW51bGwsdGhpcy5IVD1mdW5jdGlvbih0LGUsaSl7dGhpcy5uVD1lLHRoaXMuX1Q9dCx0aGlzLkRUPWksdGhpcy5fVD8odGhpcy5adz10aGlzLkRULnp3KCksdGhpcy50VD1udWxsLHRoaXMuZVQ9ITApOih0aGlzLlp3PW51bGwsdGhpcy50VD1pLnp3KCksdGhpcy50VD10aGlzLnRULnJlcGxhY2UoL14uLi8sZSksdGhpcy5lVD0hMSl9LHRoaXMuaVQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ad30sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJihcInVuZGVmaW5lZFwiIT10eXBlb2YgdC50YWcmJih0aGlzLm5UPXQudGFnKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5KdyYmKHRoaXMuX1Q9dC5KdyksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQuS3cmJih0aGlzLkRUPXQuS3csdGhpcy5IVCh0aGlzLl9ULHRoaXMublQsdGhpcy5EVCkpKX0sU3QubGFuZy5leHRlbmQoS0pVUi5idy5xdyxLSlVSLmJ3Lll3KTsvKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8gKi9cbiAgdmFyIE50PVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiLHh0PVwiPVwiOy8qISBjcnlwdG8tMS4xLjguanMgKGMpIDIwMTMtMjAxNiBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZVxuICAgKi9cbiAgXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEtKVVImJktKVVJ8fChLSlVSPXt9KSxcInVuZGVmaW5lZFwiIT10eXBlb2YgS0pVUi5jcnlwdG8mJktKVVIuY3J5cHRvfHwoS0pVUi5jcnlwdG89e30pLEtKVVIuY3J5cHRvLld5PW5ldyBmdW5jdGlvbigpe3RoaXMudG09e3NoYTE6XCIzMDIxMzAwOTA2MDUyYjBlMDMwMjFhMDUwMDA0MTRcIixMVDpcIjMwMmQzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwNDA1MDAwNDFjXCIsc2hhMjU2OlwiMzAzMTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAxMDUwMDA0MjBcIixNVDpcIjMwNDEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMjA1MDAwNDMwXCIsalQ6XCIzMDUxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDMwNTAwMDQ0MFwiLFVUOlwiMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwMjA1MDAwNDEwXCIsVlQ6XCIzMDIwMzAwYzA2MDgyYTg2NDg4NmY3MGQwMjA1MDUwMDA0MTBcIixRVDpcIjMwMjEzMDA5MDYwNTJiMjQwMzAyMDEwNTAwMDQxNFwifSx0aGlzLnFUPXtWVDpcImNyeXB0b2pzXCIsc2hhMTpcImNyeXB0b2pzXCIsTFQ6XCJjcnlwdG9qc1wiLHNoYTI1NjpcImNyeXB0b2pzXCIsTVQ6XCJjcnlwdG9qc1wiLGpUOlwiY3J5cHRvanNcIixRVDpcImNyeXB0b2pzXCIsSlQ6XCJjcnlwdG9qc1wiLEtUOlwiY3J5cHRvanNcIixHVDpcImNyeXB0b2pzXCIselQ6XCJjcnlwdG9qc1wiLFdUOlwiY3J5cHRvanNcIiwkVDpcImNyeXB0b2pzXCIsWVQ6XCJjcnlwdG9qc1wiLFhUOlwiY3J5cHRvanMvanNyc2FcIixaVDpcImNyeXB0b2pzL2pzcnNhXCIsdFM6XCJjcnlwdG9qcy9qc3JzYVwiLGVTOlwiY3J5cHRvanMvanNyc2FcIixpUzpcImNyeXB0b2pzL2pzcnNhXCIsclM6XCJjcnlwdG9qcy9qc3JzYVwiLG5TOlwiY3J5cHRvanMvanNyc2FcIixvUzpcImNyeXB0b2pzL2pzcnNhXCIsc1M6XCJjcnlwdG9qcy9qc3JzYVwiLGFTOlwiY3J5cHRvanMvanNyc2FcIixjUzpcImNyeXB0b2pzL2pzcnNhXCIsaFM6XCJjcnlwdG9qcy9qc3JzYVwiLHBTOlwiY3J5cHRvanMvanNyc2FcIix1UzpcImNyeXB0b2pzL2pzcnNhXCIsbFM6XCJjcnlwdG9qcy9qc3JzYVwiLGRTOlwiY3J5cHRvanMvanNyc2FcIixmUzpcImNyeXB0b2pzL2pzcnNhXCIsZ1M6XCJjcnlwdG9qcy9qc3JzYVwiLHZTOlwiY3J5cHRvanMvanNyc2FcIix5UzpcImNyeXB0b2pzL2pzcnNhXCIsbVM6XCJjcnlwdG9qcy9qc3JzYVwiLHdTOlwiY3J5cHRvanMvanNyc2FcIixUUzpcImNyeXB0b2pzL2pzcnNhXCIsU1M6XCJjcnlwdG9qcy9qc3JzYVwifSx0aGlzLmJTPXtWVDpidC52dy55dyxzaGExOmJ0LnZ3LlR3LExUOmJ0LnZ3LlNIQTIyNCxzaGEyNTY6YnQudncuU0hBMjU2LE1UOmJ0LnZ3LlNIQTM4NCxqVDpidC52dy5TSEE1MTIsUVQ6YnQudncuUklQRU1EMTYwfSx0aGlzLkVTPWZ1bmN0aW9uKHQsZSl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHRoaXMudG1bZV0pdGhyb3dcImFsZyBub3Qgc3VwcG9ydGVkIGluIFV0aWwuRElHRVNUSU5GT0hFQUQ6IFwiK2U7cmV0dXJuIHRoaXMudG1bZV0rdH0sdGhpcy5ZeT1mdW5jdGlvbih0LGUsaSl7dmFyIHI9dGhpcy5FUyh0LGUpLG49aS80O2lmKHIubGVuZ3RoKzIyPm4pdGhyb3dcImtleSBpcyB0b28gc2hvcnQgZm9yIFNpZ0FsZzoga2V5bGVuPVwiK2krXCIsXCIrZTtmb3IodmFyIG89XCIwMDAxXCIscz1cIjAwXCIrcixhPVwiXCIsYz1uLW8ubGVuZ3RoLXMubGVuZ3RoLGg9MDtoPGM7aCs9MilhKz1cImZmXCI7dmFyIHA9bythK3M7cmV0dXJuIHB9LHRoaXMuenk9ZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgS0pVUi5jcnlwdG8uSVMoe1JTOmV9KTtyZXR1cm4gaS5rUyh0KX0sdGhpcy5YeT1mdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBLSlVSLmNyeXB0by5JUyh7UlM6ZX0pO3JldHVybiBpLkNTKHQpfSx0aGlzLnNoYTE9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEtKVVIuY3J5cHRvLklTKHtSUzpcInNoYTFcIixPUzpcImNyeXB0b2pzXCJ9KTtyZXR1cm4gZS5rUyh0KX0sdGhpcy5zaGEyNTY9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEtKVVIuY3J5cHRvLklTKHtSUzpcInNoYTI1NlwiLE9TOlwiY3J5cHRvanNcIn0pO3JldHVybiBlLmtTKHQpfSx0aGlzLlBTPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBLSlVSLmNyeXB0by5JUyh7UlM6XCJzaGEyNTZcIixPUzpcImNyeXB0b2pzXCJ9KTtyZXR1cm4gZS5DUyh0KX0sdGhpcy5qVD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgS0pVUi5jcnlwdG8uSVMoe1JTOlwic2hhNTEyXCIsT1M6XCJjcnlwdG9qc1wifSk7cmV0dXJuIGUua1ModCl9LHRoaXMuTlM9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEtKVVIuY3J5cHRvLklTKHtSUzpcInNoYTUxMlwiLE9TOlwiY3J5cHRvanNcIn0pO3JldHVybiBlLkNTKHQpfSx0aGlzLlZUPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBLSlVSLmNyeXB0by5JUyh7UlM6XCJtZDVcIixPUzpcImNyeXB0b2pzXCJ9KTtyZXR1cm4gZS5rUyh0KX0sdGhpcy5RVD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgS0pVUi5jcnlwdG8uSVMoe1JTOlwicmlwZW1kMTYwXCIsT1M6XCJjcnlwdG9qc1wifSk7cmV0dXJuIGUua1ModCl9LHRoaXMueFM9ZnVuY3Rpb24odCl7fX0sS0pVUi5jcnlwdG8uSVM9ZnVuY3Rpb24odCl7dGhpcy5CUz1mdW5jdGlvbih0LGUpe2lmKG51bGwhPXQmJnZvaWQgMD09PWUmJihlPUtKVVIuY3J5cHRvLld5LnFUW3RdKSxcIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOlwiLmluZGV4T2YodCkhPS0xJiZcImNyeXB0b2pzXCI9PWUpe3RyeXt0aGlzLkZTPUtKVVIuY3J5cHRvLld5LmJTW3RdLmNyZWF0ZSgpfWNhdGNoKGkpe3Rocm93XCJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBhbGc9XCIrdCtcIi9cIitpfXRoaXMuX1M9ZnVuY3Rpb24odCl7dGhpcy5GUy51cGRhdGUodCl9LHRoaXMuRFM9ZnVuY3Rpb24odCl7dmFyIGU9YnQuWW0uWG0ucGFyc2UodCk7dGhpcy5GUy51cGRhdGUoZSl9LHRoaXMuZGlnZXN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5GUy5sdygpO3JldHVybiB0LnRvU3RyaW5nKGJ0LlltLlhtKX0sdGhpcy5rUz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fUyh0KSx0aGlzLmRpZ2VzdCgpfSx0aGlzLkNTPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkRTKHQpLHRoaXMuZGlnZXN0KCl9fWlmKFwiOnNoYTI1NjpcIi5pbmRleE9mKHQpIT0tMSYmXCJzamNsXCI9PWUpe3RyeXt0aGlzLkZTPW5ldyBzamNsLmhhc2guc2hhMjU2fWNhdGNoKGkpe3Rocm93XCJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBhbGc9XCIrdCtcIi9cIitpfXRoaXMuX1M9ZnVuY3Rpb24odCl7dGhpcy5GUy51cGRhdGUodCl9LHRoaXMuRFM9ZnVuY3Rpb24odCl7dmFyIGU9c2pjbC5jb2RlYy5wVC50b0JpdHModCk7dGhpcy5GUy51cGRhdGUoZSl9LHRoaXMuZGlnZXN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5GUy5sdygpO3JldHVybiBzamNsLmNvZGVjLnBULmZyb21CaXRzKHQpfSx0aGlzLmtTPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9TKHQpLHRoaXMuZGlnZXN0KCl9LHRoaXMuQ1M9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuRFModCksdGhpcy5kaWdlc3QoKX19fSx0aGlzLl9TPWZ1bmN0aW9uKHQpe3Rocm93XCJ1cGRhdGVTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIit0aGlzLkhTK1wiL1wiK3RoaXMuTFN9LHRoaXMuRFM9ZnVuY3Rpb24odCl7dGhyb3dcInVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMuSFMrXCIvXCIrdGhpcy5MU30sdGhpcy5kaWdlc3Q9ZnVuY3Rpb24oKXt0aHJvd1wiZGlnZXN0KCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5IUytcIi9cIit0aGlzLkxTfSx0aGlzLmtTPWZ1bmN0aW9uKHQpe3Rocm93XCJkaWdlc3RTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIit0aGlzLkhTK1wiL1wiK3RoaXMuTFN9LHRoaXMuQ1M9ZnVuY3Rpb24odCl7dGhyb3dcImRpZ2VzdEhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMuSFMrXCIvXCIrdGhpcy5MU30sdm9pZCAwIT09dCYmdm9pZCAwIT09dC5SUyYmKHRoaXMuSFM9dC5SUyx2b2lkIDA9PT10Lk9TJiYodGhpcy5MUz1LSlVSLmNyeXB0by5XeS5xVFt0aGlzLkhTXSksdGhpcy5CUyh0aGlzLkhTLHRoaXMuTFMpKX0sS0pVUi5jcnlwdG8uTVM9ZnVuY3Rpb24odCl7dGhpcy5CUz1mdW5jdGlvbih0LGUpe2lmKHQ9dC50b0xvd2VyQ2FzZSgpLG51bGw9PXQmJih0PVwiaG1hY3NoYTFcIiksdD10LnRvTG93ZXJDYXNlKCksXCJobWFjXCIhPXQuc3Vic3RyKDAsNCkpdGhyb3dcInNldEFsZ0FuZFByb3ZpZGVyIHVuc3VwcG9ydGVkIEhNQUMgYWxnOiBcIit0O3ZvaWQgMD09PWUmJihlPUtKVVIuY3J5cHRvLld5LnFUW3RdKSx0aGlzLmpTPXQrXCIvXCIrZTt2YXIgaT10LnN1YnN0cig0KTtpZihcIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOlwiLmluZGV4T2YoaSkhPS0xJiZcImNyeXB0b2pzXCI9PWUpe3RyeXt2YXIgcj1LSlVSLmNyeXB0by5XeS5iU1tpXTt0aGlzLm1hYz1idC52dy5ITUFDLmNyZWF0ZShyLHRoaXMuVVMpfWNhdGNoKG4pe3Rocm93XCJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBoYXNoQWxnPVwiK2krXCIvXCIrbn10aGlzLl9TPWZ1bmN0aW9uKHQpe3RoaXMubWFjLnVwZGF0ZSh0KX0sdGhpcy5EUz1mdW5jdGlvbih0KXt2YXIgZT1idC5ZbS5YbS5wYXJzZSh0KTt0aGlzLm1hYy51cGRhdGUoZSl9LHRoaXMuVlM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1hYy5sdygpO3JldHVybiB0LnRvU3RyaW5nKGJ0LlltLlhtKX0sdGhpcy5RUz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fUyh0KSx0aGlzLlZTKCl9LHRoaXMucVM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuRFModCksdGhpcy5WUygpfX19LHRoaXMuX1M9ZnVuY3Rpb24odCl7dGhyb3dcInVwZGF0ZVN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMualN9LHRoaXMuRFM9ZnVuY3Rpb24odCl7dGhyb3dcInVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMualN9LHRoaXMuVlM9ZnVuY3Rpb24oKXt0aHJvd1wiZGlnZXN0KCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5qU30sdGhpcy5RUz1mdW5jdGlvbih0KXt0aHJvd1wiZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5qU30sdGhpcy5xUz1mdW5jdGlvbih0KXt0aHJvd1wiZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5qU30sdGhpcy5KUz1mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7dmFyIGU9dDtyZXR1cm4gdC5sZW5ndGglMiE9MSYmdC5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKXx8KGU9cnN0cnRvaGV4KHQpKSx2b2lkKHRoaXMuVVM9YnQuWW0uWG0ucGFyc2UoZSkpfWlmKFwib2JqZWN0XCIhPXR5cGVvZiB0KXRocm93XCJLSlVSLmNyeXB0by5NYWMgdW5zdXBwb3J0ZWQgcGFzc3dvcmQgdHlwZTogXCIrdDt2YXIgZT1udWxsO2lmKHZvaWQgMCE9PXQucFQpe2lmKHQucFQubGVuZ3RoJTIhPTB8fCF0LnBULm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKXRocm93XCJNYWM6IHdyb25nIGhleCBwYXNzd29yZDogXCIrdC5wVDtlPXQucFR9aWYodm9pZCAwIT09dC51dGY4JiYoZT11dGY4dG9oZXgodC51dGY4KSksdm9pZCAwIT09dC5yc3RyJiYoZT1yc3RydG9oZXgodC5yc3RyKSksdm9pZCAwIT09dC5iNjQmJihlPUoodC5iNjQpKSx2b2lkIDAhPT10LmI2NHUmJihlPWI2NHV0b2hleCh0LmI2NHUpKSxudWxsPT1lKXRocm93XCJLSlVSLmNyeXB0by5NYWMgdW5zdXBwb3J0ZWQgcGFzc3dvcmQgdHlwZTogXCIrdDt0aGlzLlVTPWJ0LlltLlhtLnBhcnNlKGUpfSx2b2lkIDAhPT10JiYodm9pZCAwIT09dC5VUyYmdGhpcy5KUyh0LlVTKSx2b2lkIDAhPT10LlJTJiYodGhpcy5IUz10LlJTLHZvaWQgMD09PXQuT1MmJih0aGlzLkxTPUtKVVIuY3J5cHRvLld5LnFUW3RoaXMuSFNdKSx0aGlzLkJTKHRoaXMuSFMsdGhpcy5MUykpKX0sS0pVUi5jcnlwdG8uU2lnbmF0dXJlPWZ1bmN0aW9uKHQpe3ZhciBlPW51bGw7aWYodGhpcy5LUz1mdW5jdGlvbigpe3RoaXMuSFMubWF0Y2goL14oLispd2l0aCguKykkLykmJih0aGlzLkdTPVJlZ0V4cC4kMS50b0xvd2VyQ2FzZSgpLHRoaXMuelM9UmVnRXhwLiQyLnRvTG93ZXJDYXNlKCkpfSx0aGlzLldTPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPVwiXCIscj1lLzQtdC5sZW5ndGgsbj0wO248cjtuKyspaSs9XCIwXCI7cmV0dXJuIGkrdH0sdGhpcy5CUz1mdW5jdGlvbih0LGUpe2lmKHRoaXMuS1MoKSxcImNyeXB0b2pzL2pzcnNhXCIhPWUpdGhyb3dcInByb3ZpZGVyIG5vdCBzdXBwb3J0ZWQ6IFwiK2U7aWYoXCI6bWQ1OnNoYTE6c2hhMjI0OnNoYTI1NjpzaGEzODQ6c2hhNTEyOnJpcGVtZDE2MDpcIi5pbmRleE9mKHRoaXMuR1MpIT0tMSl7dHJ5e3RoaXMuRlM9bmV3IEtKVVIuY3J5cHRvLklTKHtSUzp0aGlzLkdTfSl9Y2F0Y2goaSl7dGhyb3dcInNldEFsZ0FuZFByb3ZpZGVyIGhhc2ggYWxnIHNldCBmYWlsIGFsZz1cIit0aGlzLkdTK1wiL1wiK2l9dGhpcy5pbml0PWZ1bmN0aW9uKHQsZSl7dmFyIGk9bnVsbDt0cnl7aT12b2lkIDA9PT1lP0tFWVVUSUwuZ2V0S2V5KHQpOktFWVVUSUwuZ2V0S2V5KHQsZSl9Y2F0Y2gocil7dGhyb3dcImluaXQgZmFpbGVkOlwiK3J9aWYoaS5pc1ByaXZhdGU9PT0hMCl0aGlzLiRTPWksdGhpcy5zdGF0ZT1cIlNJR05cIjtlbHNle2lmKGkucXkhPT0hMCl0aHJvd1wiaW5pdCBmYWlsZWQuOlwiK2k7dGhpcy5ZUz1pLHRoaXMuc3RhdGU9XCJWRVJJRllcIn19LHRoaXMuWFM9ZnVuY3Rpb24odCl7XCJzdHJpbmdcIj09dHlwZW9mIHQuWlMmJlwic3RyaW5nXCI9PXR5cGVvZiB0LnRiPyh0aGlzLlpTPXQuWlMsdGhpcy50Yj10LnRiKTp0aGlzLiRTPXQsdGhpcy5zdGF0ZT1cIlNJR05cIn0sdGhpcy5lYj1mdW5jdGlvbih0KXtcInN0cmluZ1wiPT10eXBlb2YgdC5pYiYmXCJzdHJpbmdcIj09dHlwZW9mIHQudGI/KHRoaXMuaWI9dC5pYix0aGlzLnRiPXQudGIpOnQgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5FQ0RTQT90aGlzLllTPXQ6dCBpbnN0YW5jZW9mIFkmJih0aGlzLllTPXQpLHRoaXMuc3RhdGU9XCJWRVJJRllcIn0sdGhpcy5yYj1mdW5jdGlvbih0KXt2YXIgZT1uZXcgWDUwOTtlLnJlYWRDZXJ0UEVNKHQpLHRoaXMuWVM9ZS5uYix0aGlzLnN0YXRlPVwiVkVSSUZZXCJ9LHRoaXMuX1M9ZnVuY3Rpb24odCl7dGhpcy5GUy5fUyh0KX0sdGhpcy5EUz1mdW5jdGlvbih0KXt0aGlzLkZTLkRTKHQpfSx0aGlzLnNpZ249ZnVuY3Rpb24oKXtpZih0aGlzLm9iPXRoaXMuRlMuZGlnZXN0KCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXMuWlMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzLnRiKXt2YXIgdD1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOnRoaXMudGJ9KTt0aGlzLnNiPXQuYWIodGhpcy5vYix0aGlzLlpTKX1lbHNlIGlmKHRoaXMuJFMgaW5zdGFuY2VvZiBZJiZcInJzYWFuZG1nZjFcIj09dGhpcy56Uyl0aGlzLnNiPXRoaXMuJFMuWnkodGhpcy5vYix0aGlzLkdTLHRoaXMuY2IpO2Vsc2UgaWYodGhpcy4kUyBpbnN0YW5jZW9mIFkmJlwicnNhXCI9PXRoaXMuelMpdGhpcy5zYj10aGlzLiRTLiR5KHRoaXMub2IsdGhpcy5HUyk7ZWxzZSBpZih0aGlzLiRTIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EpdGhpcy5zYj10aGlzLiRTLiR5KHRoaXMub2IpO2Vsc2V7aWYoISh0aGlzLiRTIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRFNBKSl0aHJvd1wiU2lnbmF0dXJlOiB1bnN1cHBvcnRlZCBwdWJsaWMga2V5IGFsZzogXCIrdGhpcy56Uzt0aGlzLnNiPXRoaXMuJFMuJHkodGhpcy5vYil9cmV0dXJuIHRoaXMuc2J9LHRoaXMuaGI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX1ModCksdGhpcy5zaWduKCl9LHRoaXMuYWI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuRFModCksdGhpcy5zaWduKCl9LHRoaXMudmVyaWZ5PWZ1bmN0aW9uKHQpe2lmKHRoaXMub2I9dGhpcy5GUy5kaWdlc3QoKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcy5pYiYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXMudGIpe3ZhciBlPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6dGhpcy50Yn0pO3JldHVybiBlLnZlcmlmeUhleCh0aGlzLm9iLHQsdGhpcy5pYil9aWYodGhpcy5ZUyBpbnN0YW5jZW9mIFkmJlwicnNhYW5kbWdmMVwiPT10aGlzLnpTKXJldHVybiB0aGlzLllTLmVtKHRoaXMub2IsdCx0aGlzLkdTLHRoaXMuY2IpO2lmKHRoaXMuWVMgaW5zdGFuY2VvZiBZJiZcInJzYVwiPT10aGlzLnpTKXJldHVybiB0aGlzLllTLnBiKHRoaXMub2IsdCk7aWYodGhpcy5ZUyBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBKXJldHVybiB0aGlzLllTLnBiKHRoaXMub2IsdCk7aWYodGhpcy5ZUyBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSlyZXR1cm4gdGhpcy5ZUy5wYih0aGlzLm9iLHQpO3Rocm93XCJTaWduYXR1cmU6IHVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgYWxnOiBcIit0aGlzLnpTfX19LHRoaXMuaW5pdD1mdW5jdGlvbih0LGUpe3Rocm93XCJpbml0KGtleSwgcGFzcykgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIit0aGlzLnVifSx0aGlzLmViPWZ1bmN0aW9uKHQpe3Rocm93XCJpbml0VmVyaWZ5QnlQdWJsaWNLZXkocnNhUHViS2V5eSkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIit0aGlzLnVifSx0aGlzLnJiPWZ1bmN0aW9uKHQpe3Rocm93XCJpbml0VmVyaWZ5QnlDZXJ0aWZpY2F0ZVBFTShjZXJ0UEVNKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiK3RoaXMudWJ9LHRoaXMuWFM9ZnVuY3Rpb24odCl7dGhyb3dcImluaXRTaWduKHBydktleSkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIit0aGlzLnVifSx0aGlzLl9TPWZ1bmN0aW9uKHQpe3Rocm93XCJ1cGRhdGVTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiK3RoaXMudWJ9LHRoaXMuRFM9ZnVuY3Rpb24odCl7dGhyb3dcInVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIrdGhpcy51Yn0sdGhpcy5zaWduPWZ1bmN0aW9uKCl7dGhyb3dcInNpZ24oKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiK3RoaXMudWJ9LHRoaXMuaGI9ZnVuY3Rpb24odCl7dGhyb3dcImRpZ2VzdFN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIrdGhpcy51Yn0sdGhpcy5hYj1mdW5jdGlvbih0KXt0aHJvd1wiZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIit0aGlzLnVifSx0aGlzLnZlcmlmeT1mdW5jdGlvbih0KXt0aHJvd1widmVyaWZ5KGhTaWdWYWwpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIrdGhpcy51Yn0sdGhpcy5sYj10LHZvaWQgMCE9PXQmJih2b2lkIDAhPT10LlJTJiYodGhpcy5IUz10LlJTLHZvaWQgMD09PXQuT1M/dGhpcy5MUz1LSlVSLmNyeXB0by5XeS5xVFt0aGlzLkhTXTp0aGlzLkxTPXQuT1MsdGhpcy51Yj10aGlzLkhTK1wiOlwiK3RoaXMuTFMsdGhpcy5CUyh0aGlzLkhTLHRoaXMuTFMpLHRoaXMuS1MoKSksdm9pZCAwIT09dC5mYiYmKHRoaXMuY2I9dC5mYiksdm9pZCAwIT09dC5wcnZrZXlwZW0pKXtpZih2b2lkIDAhPT10LnBydmtleXBhcyl0aHJvd1wiYm90aCBwcnZrZXlwZW0gYW5kIHBydmtleXBhcyBwYXJhbWV0ZXJzIG5vdCBzdXBwb3J0ZWRcIjt0cnl7dmFyIGU9bmV3IFk7ZS5yZWFkUHJpdmF0ZUtleUZyb21QRU1TdHJpbmcodC5wcnZrZXlwZW0pLHRoaXMuWFMoZSl9Y2F0Y2goaSl7dGhyb3dcImZhdGFsIGVycm9yIHRvIGxvYWQgcGVtIHByaXZhdGUga2V5OiBcIitpfX19LEtKVVIuY3J5cHRvLk5UPW5ldyBmdW5jdGlvbigpe3RoaXMuZ2I9e3ZiOlwicnNhRW5jcnlwdGlvblwiLHliOlwiZWNQdWJsaWNLZXlcIixtYjpcImRzYVwiLHdiOlwic2VjcDI1NnIxXCIsVGI6XCJzZWNwMTkyazFcIixTYjpcInNlY3AyMjRyMVwiLGJiOlwic2VjcDI1NmsxXCIsRWI6XCJzZWNwNTIxcjFcIixJYjpcInNlY3AzODRyMVwiLFJiOlwiU0hBMXdpdGhEU0FcIixcIjYwODY0ODAxNjUwMzA0MDMwMVwiOlwiU0hBMjI0d2l0aERTQVwiLFwiNjA4NjQ4MDE2NTAzMDQwMzAyXCI6XCJTSEEyNTZ3aXRoRFNBXCJ9fTt2YXIgQnQ9MjA7WS5wcm90b3R5cGUuR3k9WixZLnByb3RvdHlwZS5xaD1YLFkucHJvdG90eXBlLmVuY3J5cHQ9dHQsWS5wcm90b3R5cGUua2I9ZXQsWS5wcm90b3R5cGUudHlwZT1cIlJTQVwiOy8qISByc2FzaWduLTEuMi43LmpzIChjKSAyMDEyIEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlXG4gICAqL1xuICB2YXIgRnQ9bmV3IFJlZ0V4cChcIlwiKTtGdC5jb21waWxlKFwiW14wLTlhLWZdXCIsXCJnaVwiKSxZLnByb3RvdHlwZS4keT1udCxZLnByb3RvdHlwZS5oYj1ydCxZLnByb3RvdHlwZS5DYj1vdCxZLnByb3RvdHlwZS5PYj1zdCxZLnByb3RvdHlwZS5zaWduPXJ0LFkucHJvdG90eXBlLlBiPW90LFkucHJvdG90eXBlLkFiPXN0LFkucHJvdG90eXBlLlp5PWh0LFkucHJvdG90eXBlLk5iPWN0LFkucHJvdG90eXBlLnhiPWN0LFkuQmI9LTEsWS5GYj0tMixZLnByb3RvdHlwZS5wYj12dCxZLnByb3RvdHlwZS5KaD1ndCxZLnByb3RvdHlwZS5fYj1mdCxZLnByb3RvdHlwZS52ZXJpZnk9Z3QsWS5wcm90b3R5cGUuRGI9ZnQsWS5wcm90b3R5cGUuZW09bXQsWS5wcm90b3R5cGUuSGI9eXQsWS5wcm90b3R5cGUuTGI9eXQsWS5NYj0tMixlLmpiPWksZS5NaD1ZLGUuU2lnbmF0dXJlPUtKVVIuY3J5cHRvLlNpZ25hdHVyZSxlLklTPUtKVVIuY3J5cHRvLklTLGUuVWI9YnQsZS5qaD1KLGUuVmI9S30sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT17fTtpLlFiPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLDEwKX0saS5xYj1pLlFiKCksaS5KYj1mdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCkuc3BsaXQoXCJcXG5cIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKX0pfSxpLktiPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc3BsaXQoXCJcXG5tPVwiKTtyZXR1cm4gZS5tYXAoZnVuY3Rpb24odCxlKXtyZXR1cm4oZT4wP1wibT1cIit0OnQpLnRyaW0oKStcIlxcclxcblwifSl9LGkuR2I9ZnVuY3Rpb24odCxlKXtyZXR1cm4gaS5KYih0KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10LmluZGV4T2YoZSl9KX0saS56Yj1mdW5jdGlvbih0KXt2YXIgZTtlPTA9PT10LmluZGV4T2YoXCJhPWNhbmRpZGF0ZTpcIik/dC5zdWJzdHJpbmcoMTIpLnNwbGl0KFwiIFwiKTp0LnN1YnN0cmluZygxMCkuc3BsaXQoXCIgXCIpO2Zvcih2YXIgaT17V2I6ZVswXSwkYjplWzFdLHByb3RvY29sOmVbMl0udG9Mb3dlckNhc2UoKSxZYjpwYXJzZUludChlWzNdLDEwKSxYYjplWzRdLHBvcnQ6cGFyc2VJbnQoZVs1XSwxMCksdHlwZTplWzddfSxyPTg7cjxlLmxlbmd0aDtyKz0yKXN3aXRjaChlW3JdKXtjYXNlXCJyYWRkclwiOmkuWmI9ZVtyKzFdO2JyZWFrO2Nhc2VcInJwb3J0XCI6aS50RT1wYXJzZUludChlW3IrMV0sMTApO2JyZWFrO2Nhc2VcInRjcHR5cGVcIjppLmVFPWVbcisxXTticmVhaztkZWZhdWx0OmlbZVtyXV09ZVtyKzFdfXJldHVybiBpfSxpLmlFPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2UucHVzaCh0LldiKSxlLnB1c2godC4kYiksZS5wdXNoKHQucHJvdG9jb2wudG9VcHBlckNhc2UoKSksZS5wdXNoKHQuWWIpLGUucHVzaCh0LlhiKSxlLnB1c2godC5wb3J0KTt2YXIgaT10LnR5cGU7cmV0dXJuIGUucHVzaChcInR5cFwiKSxlLnB1c2goaSksXCJob3N0XCIhPT1pJiZ0LlpiJiZ0LnRFJiYoZS5wdXNoKFwicmFkZHJcIiksZS5wdXNoKHQuWmIpLGUucHVzaChcInJwb3J0XCIpLGUucHVzaCh0LnRFKSksdC5lRSYmXCJ0Y3BcIj09PXQucHJvdG9jb2wudG9Mb3dlckNhc2UoKSYmKGUucHVzaChcInRjcHR5cGVcIiksZS5wdXNoKHQuZUUpKSxcImNhbmRpZGF0ZTpcIitlLmpvaW4oXCIgXCIpfSxpLnJFPWZ1bmN0aW9uKHQpe3JldHVybiB0LnN1YnN0cigxNCkuc3BsaXQoXCIgXCIpfSxpLm5FPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc3Vic3RyKDkpLnNwbGl0KFwiIFwiKSxpPXtvRTpwYXJzZUludChlLnNoaWZ0KCksMTApfTtyZXR1cm4gZT1lWzBdLnNwbGl0KFwiL1wiKSxpLm5hbWU9ZVswXSxpLnNFPXBhcnNlSW50KGVbMV0sMTApLGkuYUU9Mz09PWUubGVuZ3RoP3BhcnNlSW50KGVbMl0sMTApOjEsaX0saS5jRT1mdW5jdGlvbih0KXt2YXIgZT10Lm9FO3JldHVybiB2b2lkIDAhPT10LmhFJiYoZT10LmhFKSxcImE9cnRwbWFwOlwiK2UrXCIgXCIrdC5uYW1lK1wiL1wiK3Quc0UrKDEhPT10LmFFP1wiL1wiK3QuYUU6XCJcIikrXCJcXHJcXG5cIn0saS5wRT1mdW5jdGlvbih0KXt2YXIgZT10LnN1YnN0cig5KS5zcGxpdChcIiBcIik7cmV0dXJue2lkOnBhcnNlSW50KGVbMF0sMTApLGRpcmVjdGlvbjplWzBdLmluZGV4T2YoXCIvXCIpPjA/ZVswXS5zcGxpdChcIi9cIilbMV06XCJzZW5kcmVjdlwiLHVyaTplWzFdfX0saS51RT1mdW5jdGlvbih0KXtyZXR1cm5cImE9ZXh0bWFwOlwiKyh0LmlkfHx0LnByZWZlcnJlZElkKSsodC5kaXJlY3Rpb24mJlwic2VuZHJlY3ZcIiE9PXQuZGlyZWN0aW9uP1wiL1wiK3QuZGlyZWN0aW9uOlwiXCIpK1wiIFwiK3QudXJpK1wiXFxyXFxuXCJ9LGkubEU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGk9e30scj10LnN1YnN0cih0LmluZGV4T2YoXCIgXCIpKzEpLnNwbGl0KFwiO1wiKSxuPTA7bjxyLmxlbmd0aDtuKyspZT1yW25dLnRyaW0oKS5zcGxpdChcIj1cIiksaVtlWzBdLnRyaW0oKV09ZVsxXTtyZXR1cm4gaX0saS5kRT1mdW5jdGlvbih0KXt2YXIgZT1cIlwiLGk9dC5vRTtpZih2b2lkIDAhPT10LmhFJiYoaT10LmhFKSx0LnBhcmFtZXRlcnMmJk9iamVjdC5rZXlzKHQucGFyYW1ldGVycykubGVuZ3RoKXt2YXIgcj1bXTtPYmplY3Qua2V5cyh0LnBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24oZSl7ci5wdXNoKGUrXCI9XCIrdC5wYXJhbWV0ZXJzW2VdKX0pLGUrPVwiYT1mbXRwOlwiK2krXCIgXCIrci5qb2luKFwiO1wiKStcIlxcclxcblwifXJldHVybiBlfSxpLmZFPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc3Vic3RyKHQuaW5kZXhPZihcIiBcIikrMSkuc3BsaXQoXCIgXCIpO3JldHVybnt0eXBlOmUuc2hpZnQoKSxnRTplLmpvaW4oXCIgXCIpfX0saS52RT1mdW5jdGlvbih0KXt2YXIgZT1cIlwiLGk9dC5vRTtyZXR1cm4gdm9pZCAwIT09dC5oRSYmKGk9dC5oRSksdC55RSYmdC55RS5sZW5ndGgmJnQueUUuZm9yRWFjaChmdW5jdGlvbih0KXtlKz1cImE9cnRjcC1mYjpcIitpK1wiIFwiK3QudHlwZSsodC5nRSYmdC5nRS5sZW5ndGg/XCIgXCIrdC5nRTpcIlwiKStcIlxcclxcblwifSksZX0saS5tRT1mdW5jdGlvbih0KXt2YXIgZT10LmluZGV4T2YoXCIgXCIpLGk9e3dFOnBhcnNlSW50KHQuc3Vic3RyKDcsZS03KSwxMCl9LHI9dC5pbmRleE9mKFwiOlwiLGUpO3JldHVybiByPi0xPyhpLlRFPXQuc3Vic3RyKGUrMSxyLWUtMSksaS52YWx1ZT10LnN1YnN0cihyKzEpKTppLlRFPXQuc3Vic3RyKGUrMSksaX0saS5TRT1mdW5jdGlvbih0KXt2YXIgZT1pLkdiKHQsXCJhPW1pZDpcIilbMF07aWYoZSlyZXR1cm4gZS5zdWJzdHIoNil9LGkuYkU9ZnVuY3Rpb24odCl7dmFyIGU9dC5zdWJzdHIoMTQpLnNwbGl0KFwiIFwiKTtyZXR1cm57YWxnb3JpdGhtOmVbMF0udG9Mb3dlckNhc2UoKSx2YWx1ZTplWzFdfX0saS5FRT1mdW5jdGlvbih0LGUpe3ZhciByPWkuR2IodCtlLFwiYT1maW5nZXJwcmludDpcIik7cmV0dXJue0lFOlwiYXV0b1wiLFJFOnIubWFwKGkuYkUpfX0saS5rRT1mdW5jdGlvbih0LGUpe3ZhciBpPVwiYT1zZXR1cDpcIitlK1wiXFxyXFxuXCI7cmV0dXJuIHQuUkUuZm9yRWFjaChmdW5jdGlvbih0KXtpKz1cImE9ZmluZ2VycHJpbnQ6XCIrdC5hbGdvcml0aG0rXCIgXCIrdC52YWx1ZStcIlxcclxcblwifSksaX0saS5DRT1mdW5jdGlvbih0LGUpe3ZhciByPWkuSmIodCk7cj1yLmNvbmNhdChpLkpiKGUpKTt2YXIgbj17T0U6ci5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10LmluZGV4T2YoXCJhPWljZS11ZnJhZzpcIil9KVswXS5zdWJzdHIoMTIpLHBhc3N3b3JkOnIuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiAwPT09dC5pbmRleE9mKFwiYT1pY2UtcHdkOlwiKX0pWzBdLnN1YnN0cigxMCl9O3JldHVybiBufSxpLlBFPWZ1bmN0aW9uKHQpe3JldHVyblwiYT1pY2UtdWZyYWc6XCIrdC5PRStcIlxcclxcbmE9aWNlLXB3ZDpcIit0LnBhc3N3b3JkK1wiXFxyXFxuXCJ9LGkuQUU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXtORTpbXSx4RTpbXSxCRTpbXSxGRTpbXX0scj1pLkpiKHQpLG49clswXS5zcGxpdChcIiBcIiksbz0zO288bi5sZW5ndGg7bysrKXt2YXIgcz1uW29dLGE9aS5HYih0LFwiYT1ydHBtYXA6XCIrcytcIiBcIilbMF07aWYoYSl7dmFyIGM9aS5uRShhKSxoPWkuR2IodCxcImE9Zm10cDpcIitzK1wiIFwiKTtzd2l0Y2goYy5wYXJhbWV0ZXJzPWgubGVuZ3RoP2kubEUoaFswXSk6e30sYy55RT1pLkdiKHQsXCJhPXJ0Y3AtZmI6XCIrcytcIiBcIikubWFwKGkuZkUpLGUuTkUucHVzaChjKSxjLm5hbWUudG9VcHBlckNhc2UoKSl7Y2FzZVwiUkVEXCI6Y2FzZVwiVUxQRkVDXCI6ZS5CRS5wdXNoKGMubmFtZS50b1VwcGVyQ2FzZSgpKX19fXJldHVybiBpLkdiKHQsXCJhPWV4dG1hcDpcIikuZm9yRWFjaChmdW5jdGlvbih0KXtlLnhFLnB1c2goaS5wRSh0KSl9KSxlfSxpLl9FPWZ1bmN0aW9uKHQsZSl7dmFyIHI9XCJcIjtyKz1cIm09XCIrdCtcIiBcIixyKz1lLk5FLmxlbmd0aD4wP1wiOVwiOlwiMFwiLHIrPVwiIFVEUC9UTFMvUlRQL1NBVlBGIFwiLHIrPWUuTkUubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10LmhFP3QuaEU6dC5vRX0pLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIscis9XCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuXCIscis9XCJhPXJ0Y3A6OSBJTiBJUDQgMC4wLjAuMFxcclxcblwiLGUuTkUuZm9yRWFjaChmdW5jdGlvbih0KXtyKz1pLmNFKHQpLHIrPWkuZEUodCkscis9aS52RSh0KX0pO3ZhciBuPTA7cmV0dXJuIGUuTkUuZm9yRWFjaChmdW5jdGlvbih0KXt0LkRFPm4mJihuPXQuREUpfSksbj4wJiYocis9XCJhPW1heHB0aW1lOlwiK24rXCJcXHJcXG5cIikscis9XCJhPXJ0Y3AtbXV4XFxyXFxuXCIsZS54RS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IrPWkudUUodCl9KSxyfSxpLkhFPWZ1bmN0aW9uKHQpe3ZhciBlLHI9W10sbj1pLkFFKHQpLG89bi5CRS5pbmRleE9mKFwiUkVEXCIpIT09LTEscz1uLkJFLmluZGV4T2YoXCJVTFBGRUNcIikhPT0tMSxhPWkuR2IodCxcImE9c3NyYzpcIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBpLm1FKHQpfSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiY25hbWVcIj09PXQuVEV9KSxjPWEubGVuZ3RoPjAmJmFbMF0ud0UsaD1pLkdiKHQsXCJhPXNzcmMtZ3JvdXA6RklEXCIpLm1hcChmdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KFwiIFwiKTtyZXR1cm4gZS5zaGlmdCgpLGUubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBwYXJzZUludCh0LDEwKX0pfSk7aC5sZW5ndGg+MCYmaFswXS5sZW5ndGg+MSYmaFswXVswXT09PWMmJihlPWhbMF1bMV0pLG4uTkUuZm9yRWFjaChmdW5jdGlvbih0KXtpZihcIlJUWFwiPT09dC5uYW1lLnRvVXBwZXJDYXNlKCkmJnQucGFyYW1ldGVycy5hcHQpe3ZhciBpPXt3RTpjLExFOnBhcnNlSW50KHQucGFyYW1ldGVycy5hcHQsMTApLE1FOnt3RTplfX07ci5wdXNoKGkpLG8mJihpPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaSkpLGkuakU9e3dFOmUsVUU6cz9cInJlZCt1bHBmZWNcIjpcInJlZFwifSxyLnB1c2goaSkpfX0pLDA9PT1yLmxlbmd0aCYmYyYmci5wdXNoKHt3RTpjfSk7dmFyIHA9aS5HYih0LFwiYj1cIik7cmV0dXJuIHAubGVuZ3RoJiYoMD09PXBbMF0uaW5kZXhPZihcImI9VElBUzpcIik/cD1wYXJzZUludChwWzBdLnN1YnN0cig3KSwxMCk6MD09PXBbMF0uaW5kZXhPZihcImI9QVM6XCIpJiYocD1wYXJzZUludChwWzBdLnN1YnN0cig1KSwxMCkpLHIuZm9yRWFjaChmdW5jdGlvbih0KXt0LlZFPXB9KSkscn0saS5RRT1mdW5jdGlvbih0KXt2YXIgZT17fSxyPWkuR2IodCxcImE9c3NyYzpcIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBpLm1FKHQpfSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiY25hbWVcIj09PXQuVEV9KVswXTtyJiYoZS5xRT1yLnZhbHVlLGUud0U9ci53RSk7dmFyIG49aS5HYih0LFwiYT1ydGNwLXJzaXplXCIpO2UuSkU9bi5sZW5ndGg+MCxlLktFPTA9PT1uLmxlbmd0aDt2YXIgbz1pLkdiKHQsXCJhPXJ0Y3AtbXV4XCIpO3JldHVybiBlLkdFPW8ubGVuZ3RoPjAsZX0saS56RT1mdW5jdGlvbih0KXt2YXIgZSxyPWkuR2IodCxcImE9bXNpZDpcIik7aWYoMT09PXIubGVuZ3RoKXJldHVybiBlPXJbMF0uc3Vic3RyKDcpLnNwbGl0KFwiIFwiKSx7c3RyZWFtOmVbMF0sdHJhY2s6ZVsxXX07dmFyIG49aS5HYih0LFwiYT1zc3JjOlwiKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGkubUUodCl9KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuXCJtc2lkXCI9PT10LlRFfSk7cmV0dXJuIG4ubGVuZ3RoPjA/KGU9blswXS52YWx1ZS5zcGxpdChcIiBcIikse3N0cmVhbTplWzBdLHRyYWNrOmVbMV19KTp2b2lkIDB9LGkuV0U9ZnVuY3Rpb24oKXtyZXR1cm5cInY9MFxcclxcbm89dGhpc2lzYWRhcHRlcm9ydGMgODE2OTYzOTkxNTY0Njk0MzEzNyAyIElOIElQNCAxMjcuMC4wLjFcXHJcXG5zPS1cXHJcXG50PTAgMFxcclxcblwifSxpLiRFPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBvPWkuX0UodC5raW5kLGUpO2lmKG8rPWkuUEUodC5ZRS5nZXRMb2NhbFBhcmFtZXRlcnMoKSksbys9aS5rRSh0LlhFLmdldExvY2FsUGFyYW1ldGVycygpLFwib2ZmZXJcIj09PXI/XCJhY3RwYXNzXCI6XCJhY3RpdmVcIiksbys9XCJhPW1pZDpcIit0LlpFK1wiXFxyXFxuXCIsbys9dC5kaXJlY3Rpb24/XCJhPVwiK3QuZGlyZWN0aW9uK1wiXFxyXFxuXCI6dC50SSYmdC5lST9cImE9c2VuZHJlY3ZcXHJcXG5cIjp0LnRJP1wiYT1zZW5kb25seVxcclxcblwiOnQuZUk/XCJhPXJlY3Zvbmx5XFxyXFxuXCI6XCJhPWluYWN0aXZlXFxyXFxuXCIsdC50SSl7dmFyIHM9XCJtc2lkOlwiK24uaWQrXCIgXCIrdC50SS50cmFjay5pZCtcIlxcclxcblwiO28rPVwiYT1cIitzLG8rPVwiYT1zc3JjOlwiK3QuaUlbMF0ud0UrXCIgXCIrcyx0LmlJWzBdLk1FJiYobys9XCJhPXNzcmM6XCIrdC5pSVswXS5NRS53RStcIiBcIitzLG8rPVwiYT1zc3JjLWdyb3VwOkZJRCBcIit0LmlJWzBdLndFK1wiIFwiK3QuaUlbMF0uTUUud0UrXCJcXHJcXG5cIil9cmV0dXJuIG8rPVwiYT1zc3JjOlwiK3QuaUlbMF0ud0UrXCIgY25hbWU6XCIraS5xYitcIlxcclxcblwiLHQudEkmJnQuaUlbMF0uTUUmJihvKz1cImE9c3NyYzpcIit0LmlJWzBdLk1FLndFK1wiIGNuYW1lOlwiK2kucWIrXCJcXHJcXG5cIiksb30saS5yST1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcj1pLkpiKHQpLG49MDtuPHIubGVuZ3RoO24rKylzd2l0Y2gocltuXSl7Y2FzZVwiYT1zZW5kcmVjdlwiOmNhc2VcImE9c2VuZG9ubHlcIjpjYXNlXCJhPXJlY3Zvbmx5XCI6Y2FzZVwiYT1pbmFjdGl2ZVwiOnJldHVybiByW25dLnN1YnN0cigyKX1yZXR1cm4gZT9pLnJJKGUpOlwic2VuZHJlY3ZcIn0saS5uST1mdW5jdGlvbih0KXt2YXIgZT1pLkpiKHQpLHI9ZVswXS5zcGxpdChcIiBcIik7cmV0dXJuIHJbMF0uc3Vic3RyKDIpfSxpLlV0PWZ1bmN0aW9uKHQpe3JldHVyblwiMFwiPT09dC5zcGxpdChcIiBcIiwyKVsxXX0sdC50PWl9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1pKDEpLG49aSgxMCksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLm1zZz10LHRoaXMub0k9RGF0ZS5ub3coKStlLHRoaXMuc0k9ci5kZWZlcigpfXJldHVybiB0LnByb3RvdHlwZS5hST1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpPj10aGlzLm9JfSx0fSgpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpLHIsbixvLHMpe3ZvaWQgMD09PWUmJihlPTNlNCksdm9pZCAwPT09aSYmKGk9MTAwKSx2b2lkIDA9PT1yJiYocj0zZTQpLHZvaWQgMD09PW4mJihuPTE1ZTMpLHZvaWQgMD09PW8mJihvPURhdGUpLHZvaWQgMD09PXMmJihzPSExKSx0aGlzLmNJPTEsdGhpcy5oST0tMSx0aGlzLnBJPS0xLHRoaXMudUk9e30sdGhpcy5sST1bXSx0aGlzLmRJPVtdLHRoaXMuZkk9ITEsdGhpcy5nST0hMCx0aGlzLnZJPXQsdGhpcy55ST1BcnJheSgpLHRoaXMuQW89ZSx0aGlzLk5vPWksdGhpcy54bz1yLHRoaXMubUk9bix0aGlzLndJPW8sdGhpcy5mST1zfHwvTVNJRSAxMC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl8fC9NU0lFIDkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfHwvcnY6MTEuMC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl8fC9FZGdlLi9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9cmV0dXJuIHQucHJvdG90eXBlLkV0PWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2VydmljZStcIl9cIit0Lm1zZ0lkLGk9dGhpcy51SVtlXTtudWxsIT1pP2kodCk6bi5tKCkuZXJyb3Iobi51K1wiQ291bGQgbm90IGZpbmQgYSBkaXNwYXRjaGVyIGZvciBcIix0LGUsdGhpcy51SSl9LHQucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLnVJW3QrXCJfXCIrZV09aX0sdC5wcm90b3R5cGUub25lcnJvcj1mdW5jdGlvbih0KXt0aGlzLmxJLnB1c2godCl9LHQucHJvdG90eXBlLlRJPWZ1bmN0aW9uKHQpe3RoaXMuZEkucHVzaCh0KX0sdC5wcm90b3R5cGUuU0k9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKCF3aW5kb3cuV2ViU29ja2V0KXJldHVybiB2b2lkIHRoaXMubEkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdChcIldlYlNvY2tldCBub3QgZGVmaW5lZFwiKX0pO3ZhciBlPW5ldyBXZWJTb2NrZXQodGhpcy52SSk7cmV0dXJuIGUuYmluYXJ5VHlwZT1cImFycmF5YnVmZmVyXCIsZS5vbm9wZW49ZnVuY3Rpb24oZSl7dC5iSSgpLG4ubSgpLmRlYnVnKG4udStcIkhpdmVTZXJ2aWNlc0Nvbm5lY3Rpb24gZXN0YWJsaXNoZWQgdG8gXCIrdC52SSksdC5wST0obmV3IHQud0kpLmdldFRpbWUoKSx0LkVJKCksdC5kSS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQpfSksdC5JSSgpLHQuUkkoKX0sZS5vbmNsb3NlPWZ1bmN0aW9uKGUpe3QuY2xvc2UodC5nSSksdC5jb25uZWN0KCl9LGUub25tZXNzYWdlPWZ1bmN0aW9uKGUpe3QuRXQobi5abi53byhlLmRhdGEpKX0sZS5vbmVycm9yPWZ1bmN0aW9uKGUpe3QuY2xvc2UoITApLHQubEkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdChlLnRvU3RyaW5nKCkpfSl9LGV9LHQucHJvdG90eXBlLmlzT3Blbj1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLk9wJiZ0aGlzLk9wLnJlYWR5U3RhdGU9PXRoaXMuT3AuT1BFTn0sdC5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3QmJih0aGlzLmdJPSEwKSx0aGlzLmdJJiYxIT10aGlzLmlzT3BlbigpJiYodGhpcy5oST4wfHwodGhpcy5wST4tMSYmKG5ldyB0aGlzLndJKS5nZXRUaW1lKCktdGhpcy5wST50aGlzLkFvPyh0aGlzLmNJPW4ua2UueW8sdGhpcy5wST0tMSk6dGhpcy5jST1NYXRoLm1pbigyKnRoaXMuY0ksdGhpcy5BbyksdGhpcy5oST13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2UuaEk9LTEsbi5tKCkuZGVidWcobi51K1wiQ29ubmVjdGlvbiBhdHRlbXB0IHRvIFwiK2UudkkrXCIgW3Q6XCIrZS5jSStcIiBoYjpcIitlLmZJK1wiXVwiKSxlLk9wPWUuU0koKSxlLmNJPU1hdGgubWF4KGUuY0ksbi5rZS55byl9LHRoaXMuY0kpKSl9LHQucHJvdG90eXBlLmJJPWZ1bmN0aW9uKCl7dGhpcy5oST4tMSYmKGNsZWFyVGltZW91dCh0aGlzLmhJKSx0aGlzLmhJPS0xKX0sdC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24odCl7dGhpcy5nST12b2lkIDAhPXQmJnQsbi5tKCkuZGVidWcobi51K1wiQ2xvc2luZyBjb25uZWN0aW9uIFtyZWNvbm5lY3Q6XCIrdGhpcy5nSStcIl1cIiksdGhpcy5iSSgpLG51bGwhPXRoaXMuT3AmJih0aGlzLk9wLmNsb3NlKCksdGhpcy5PcD1udWxsKX0sdC5wcm90b3R5cGUuRUk9ZnVuY3Rpb24oKXtmb3IoO3RoaXMueUkubGVuZ3RoPjA7KXt2YXIgdD10aGlzLnlJLnBvcCgpO3RyeXt0LmFJKCk/dC5zSS5yZWplY3QobmV3IEVycm9yKFwiTWVzc2FnZSBleHBpcmVkXCIpKToodGhpcy5JSSgpLHRoaXMuT3Auc2VuZCh0Lm1zZy5tbygpKSl9Y2F0Y2goZSl7aWYoZS5jb2RlPT09RE9NRXhjZXB0aW9uLklOVkFMSURfU1RBVEVfRVJSKXt0aGlzLnlJLnB1c2godCk7YnJlYWt9bi5tKCkuZXJyb3Iobi51K1wiRmFpbGVkIHRvIHNlbmQgdGhlIG1lc3NhZ2UsIGRyb3BwZWQ6IFwiLGUuY29kZSxlLm5hbWUpLHQuc0kucmVqZWN0KGUpfX10aGlzLlJJKCl9LHQucHJvdG90eXBlLklJPWZ1bmN0aW9uKCl7dGhpcy5rSSYmKGNsZWFyVGltZW91dCh0aGlzLmtJKSx0aGlzLmtJPW51bGwpfSx0LnByb3RvdHlwZS5SST1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5mSSYmIXRoaXMua0kmJih0aGlzLmtJPXdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpe3Quc2VuZChuZXcgbi5abihTZXJ2aWNlcy5DZiwwLFwiXCIpKX0sdGhpcy5tSSkpfSx0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy54byksdGhpcy55SS5sZW5ndGg+PXRoaXMuTm8pdGhyb3cgbmV3IEVycm9yKFwiSGl2ZVNlcnZpY2VzIGNvbm5lY3Rpb24gY2Fubm90IHF1ZXVlIG1vcmUgbWVzc2FnZXNcIik7dmFyIGk9bmV3IG8odCxlKTtyZXR1cm4gdGhpcy55SS5wdXNoKGkpLHRoaXMuT3AmJnRoaXMuRUkoKSxpLnNJLnZ0fSx0LnByb3RvdHlwZS5DST1mdW5jdGlvbih0KXt0aGlzLmZJPXQsdGhpcy5mSSYmdGhpcy5SSSgpfSx0LnByb3RvdHlwZS5PST1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLk9wfSx0fSgpO2UuQUk9c30sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciByPWkoMTUpLG49aSgzOCksbz1pKDI0KSxzPWkoMiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3QuYmluZChuZXcgci5ucyhzLkZyYW1ld29yay5GZS5tZSxuLk5JLHIuc3MubHMpKSx0LmJpbmQobmV3IHIubnMocy5GcmFtZXdvcmsuRmUud2Usby5FbC5ibCkpfSx0fSgpO2UuVGQ9YX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP3RoaXMueEk9Z2xvYmFsOnRoaXMueEk9d2luZG93fXJldHVybiB0LnByb3RvdHlwZS5DdD1mdW5jdGlvbigpe3JldHVybiExfSx0LnByb3RvdHlwZS5CST1mdW5jdGlvbih0LGUsaSl7fSx0LnByb3RvdHlwZS5iZT1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUudGltZT1mdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX0sdC5wcm90b3R5cGUuc2V0VGltZW91dD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMueEkuc2V0VGltZW91dChmdW5jdGlvbigpe3QoKX0sZSk7cmV0dXJuIGl9LHQucHJvdG90eXBlLmNsZWFyVGltZW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54SS5jbGVhclRpbWVvdXQodCksITB9LHQucHJvdG90eXBlLnNldEludGVydmFsPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy54SS5zZXRJbnRlcnZhbChmdW5jdGlvbigpe3QoKX0sZSk7cmV0dXJuIGl9LHQucHJvdG90eXBlLmNsZWFySW50ZXJ2YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueEkuY2xlYXJJbnRlcnZhbCh0KSwhMH0sdH0oKTtlLk5JPWl9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5Vbz10LHRoaXMuVm89ZX1yZXR1cm4gdC5wcm90b3R5cGUuV289ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5Vb30sdC5wcm90b3R5cGUuJG89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5Wbz90aGlzLlZvOnRoaXMuVW99LHR9KCk7ZS5GST1pfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWZvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pO3QucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KGkucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBpKX0sbz1pKDgpLHM9by5wdC5Jci5JcixhPW8ucHQuSXIua3I7IWZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLmF1dGhUb2tlbkVuYWJsZWQ9ITAsZS5kYXNoUmVtb3ZlQml0cmF0ZVNpemU9ITEsZS5kYXNoRmlsdGVyQml0cmF0ZXM9bnVsbCxlLmxvZ0pzb25TbmFwc2hvdHM9dm9pZCAwLGV9cmV0dXJuIG4oZSx0KSxlfShzKTt0LkZsPWU7dmFyIGk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPW51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gZS5oaXZlQXV0aFRva2VuRW5hYmxlZD1cImF1dGhUb2tlbkVuYWJsZWRcIixlLmhpdmVEYXNoUmVtb3ZlQml0cmF0ZVNpemU9XCJkYXNoUmVtb3ZlQml0cmF0ZVNpemVcIixlLmhpdmVEYXNoRmlsdGVyQml0cmF0ZXM9XCJkYXNoRmlsdGVyQml0cmF0ZXNcIixlLmhpdmVMb2dKc29uU25hcHNob3RzPVwibG9nSnNvblNuYXBzaG90c1wiLGV9cmV0dXJuIG4oZSx0KSxlfShhKTt0LkRsPWl9KGU9dC5Jcnx8KHQuSXI9e30pKX0ocj1lLnB0fHwoZS5wdD17fSkpO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5IbD1mdW5jdGlvbih0KXtcImRhc2hSZW1vdmVCaXRyYXRlU2l6ZVwiaW4gdCYmdC5kYXNoUmVtb3ZlQml0cmF0ZVNpemUmJndpbmRvdy5IaXZlQ29uZmlnJiZ3aW5kb3cuSGl2ZUNvbmZpZy5EYXNoJiYod2luZG93LkhpdmVDb25maWcuRGFzaC5EYXNoUmVtb3ZlQml0cmF0ZVNpemU9dC5kYXNoUmVtb3ZlQml0cmF0ZVNpemUpLFwiZGFzaEZpbHRlckJpdHJhdGVzXCJpbiB0JiZ0LmRhc2hGaWx0ZXJCaXRyYXRlcyYmd2luZG93LkhpdmVDb25maWcmJndpbmRvdy5IaXZlQ29uZmlnLkRhc2gmJih3aW5kb3cuSGl2ZUNvbmZpZy5EYXNoLkRhc2hGaWx0ZXJCaXRyYXRlcz10LmRhc2hGaWx0ZXJCaXRyYXRlcyksXCJsb2dKc29uU25hcHNob3RzXCJpbiB0JiZ0LmxvZ0pzb25TbmFwc2hvdHMmJndpbmRvdy5IaXZlQ29uZmlnJiZ3aW5kb3cuSGl2ZUNvbmZpZy5EZWJ1Z0xvZ3MmJih3aW5kb3cuSGl2ZUNvbmZpZy5EZWJ1Z0xvZ3MuTWV0cmljU25hcHNob3RMb2dzPTEsd2luZG93LkhpdmVDb25maWcuRGVidWdMb2dzLlRyYWNrU25hcHNob3RMb2dzPTEsd2luZG93LkhpdmVDb25maWcuRGVidWdMb2dzLmdsPTEpfSx0fSgpO2UuTGw9Y30sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT10aGlzO2lmKHRoaXMuX0k9bmV3IEFycmF5LHRoaXMuY2FsbGJhY2tzPW5ldyBBcnJheSx0LkdpKXRocm93IG5ldyBFcnJvcihcIkVycm9yOiBJbnN0YW50aWF0aW9uIGZhaWxlZDogVXNlIEtleUhhbmRsZXJIaXZlQ29tbS5nZXRJbnN0YW5jZSgpIGluc3RlYWQgb2YgbmV3LlwiKTt2YXIgaT17fTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLGZ1bmN0aW9uKHQpe2lbdC5rZXlDb2RlXT0hMCxlLkRJKGkpfSwhMCksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsZnVuY3Rpb24odCl7aT17fX0sITApfXJldHVybiB0LldpPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuR2kmJih0aGlzLkdpPW5ldyB0KSx0aGlzLkdpfSx0LnByb3RvdHlwZS5EaD1mdW5jdGlvbih0LGUpe3RoaXMuX0kucHVzaCh0KSx0aGlzLmNhbGxiYWNrcy5wdXNoKGUpfSx0LnByb3RvdHlwZS5EST1mdW5jdGlvbih0KXtmb3IodmFyIGU9ZnVuY3Rpb24oZSl7dmFyIHI9ITA7aS5fSVtlXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZvaWQgMCE9dFtlXSYmdFtlXXx8KHI9ITEpfSksciYmaS5jYWxsYmFja3NbZV0oKX0saT10aGlzLHI9MDtyPHRoaXMuX0kubGVuZ3RoO3IrKyllKHIpfSx0fSgpO2UuSGg9aX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciByPWkoMTIpLG49aSgxOCksbz1pKDcpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuSEk9bi5rZS55cj85OTg5Ojk5ODgsdGhpcy5MST0tMSx0aGlzLk1JPXQsdGhpcy5qSSgpfXJldHVybiB0LnByb3RvdHlwZS5qST1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5NSS5vcHRpb25zKCkuc2lsZW50JiZ2b2lkIDA9PT10aGlzLlVJJiYodGhpcy51cmw9XCIvL1wiK3Iud3IuVG8rXCI6XCIrdGhpcy5ISStcIi9mZWVkYmFja1wiLHRoaXMuTUkubSgpLmluZm8oXCJzdGFydGluZyBwZXJpb2RpYyBhbGl2ZSBwaW5nIHRvIGhpdmUgdGVzdGVyIFtcIit0aGlzLnVybCtcIl1cIiksdGhpcy5VST1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3QuVkkoKX0sbi5rZS5OaCkpfSx0LnByb3RvdHlwZS5WST1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLk1JLmdldEN1cnJlbnRUaW1lKCk7ZT50aGlzLkxJPyh0aGlzLk1JLm0oKS5pbmZvKFwic2VuZGluZyBoaXZlIHRlc3RlciBwaW5nIFtcIitlK1wiID4gXCIrdGhpcy5MSStcIl1cIiksby5aaSh0aGlzLnVybCkudGhlbihmdW5jdGlvbih0KXt9LGZ1bmN0aW9uKGUpe3QuTUkubSgpLmVycm9yKFwiZXJyb3Igc2VuZGluZyBoaXZlIHRlc3RlciBwaW5nXCIsZSksY2xlYXJJbnRlcnZhbCh0LlVJKX0pKTp0aGlzLk1JLm0oKS53YXJuKFwibm90IHNlbmRpbmcgaGl2ZSB0ZXN0ZXIgcGluZyBbXCIrZStcIiA8PSBcIit0aGlzLkxJK1wiXVwiKSx0aGlzLkxJPWV9LHR9KCk7ZS5VbD1zfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9dH1mb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKTt0LnByb3RvdHlwZT1udWxsPT09ZT9PYmplY3QuY3JlYXRlKGUpOihpLnByb3RvdHlwZT1lLnByb3RvdHlwZSxuZXcgaSl9LG49aSgxKSxvPWkoNykscz1pKDgpLGE9aSg0NCksYz1pKDE3KSxoPWkoMTIpLHA9aSgxNCksdT1pKDkpLGw9aSgyMCksZD1pKDE5KSxmPWEucHQuSXIsZz1zLnB0LklyLmtyLHY9Yy5wdC5IaXZlVGVjaEVycm9yLHk9Yy5wdC5iaCxtPWkoMjgpO2UuUUk9bmF2aWdhdG9yO3ZhciB3PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiByKGUsdCksZX0oby5CaSksVD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLnFJPTAsdGhpcy5NST10LHRoaXMub3B0aW9uc189bmV3IGYuSkksdGhpcy5LSShlKSxvLm9yKHdpbmRvdy5sb2NhdGlvbi5ocmVmLG5ldyBnLHRoaXMub3B0aW9uc18pfXJldHVybiB0LnByb3RvdHlwZS5BaT1mdW5jdGlvbigpe3JldHVybiB0LkpsfSx0LnByb3RvdHlwZS5nZXRWZXJzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmVyc2lvbn0sdC5wcm90b3R5cGUuV2w9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdC5wcm90b3R5cGUuR0k9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKG51bGw9PXRoaXMuekl8fERhdGUubm93KCktdGhpcy5xST4xZTQpe3ZhciBlPW5ldyBtO2UuSW4obmF2aWdhdG9yLnVzZXJBZ2VudCk7dmFyIGk9ZS4kZCgpO2lmKFwiSUVcIj09PWkubmFtZSYmaS52ZXJzaW9uJiZwYXJzZUludChpLnZlcnNpb24pPDEwKXJldHVybiBuLnJlamVjdChuZXcgdih5LnloLFwiSW50ZXJuZXQgRXhwbG9yZXIgPCB2LjEwIG5vdCBzdXBwb3J0ZWRcIikpO3RoaXMuV0k9RGF0ZS5ub3coKSx0aGlzLiRJPTA7dmFyIHI9XCIvL1wiK2gud3IuVG8rXCI6XCIrdGhpcy5NSS5vcHRpb25zKCkubW9uaXRvclBvcnQrXCIvdmVyc2lvbi5qc29uXCI7dGhpcy5tKCkuZGVidWcodGhpcy5pZCgpK1widmVyaWZ5aW5nIEhpdmUgQ2xpZW50IHZlcnNpb25cIiksdGhpcy56ST1vLlppKHIpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIGk9SlNPTi5wYXJzZShlKTtyZXR1cm4gdC5zdGF0ZT1pLnN0YXRlLHQudmVyc2lvbj1pLnZlcnNpb24sXCJyZWFkeVwiPT09dC5zdGF0ZT9cImRldmVsb3BlclwiPT09dC52ZXJzaW9ufHx0LnZlcnNpb24+PXQub3B0aW9uc18ubWluVmVyc2lvbj8odC4kST1EYXRlLm5vdygpLHQubSgpLmRlYnVnKHQuaWQoKStcIkhpdmUgQ2xpZW50IHJlYWR5IC0gdmVyc2lvbiBcIit0LnZlcnNpb24rXCIgW1wiKyh0LiRJLXQuV0kpK1wiXVwiKSxcInJlYWR5XCIpOihkLkVycm9yTW9uaXRvci5XaSgpLl9oKHQuaWQoKStcIkNsaWVudCB2ZXJzaW9uIHJlcXVpcmVtZW50IG5vdCBzYXRpc2ZpZWQ6IFwiK3QudmVyc2lvbitcIiA8IFwiK3Qub3B0aW9uc18ubWluVmVyc2lvbiksdC5NSS5lZChuZXcgdS5GLnVvKG51bGwsdS5GLkdyLlFyKSksbi5yZWplY3QobmV3IHYoeS5UaCxcInZlcnNpb24gXCIrdC52ZXJzaW9uKSkpOihkLkVycm9yTW9uaXRvci5XaSgpLl9oKHQuaWQoKStcIkNsaWVudCBzdGF0ZTogXCIrdC5zdGF0ZSksdC5NSS5lZChuZXcgdS5GLnVvKG51bGwsdS5GLkdyLlZyKSksbi5yZWplY3QobmV3IHYoeS55aCxcInN0YXRlIFwiK3Quc3RhdGUpKSl9LGZ1bmN0aW9uKGUpe3ZhciBpPVwiQ2xpZW50IG5vdCByZWFjaGFibGVcIjtyZXR1cm4gdm9pZCAwIT1lJiZ2b2lkIDAhPWUuc3RhdHVzJiZlLnN0YXR1cyE9LTEmJihpPVwiQ2xpZW50IGNoZWNrIHJldHVybmVkIFwiK2Uuc3RhdHVzKSxkLkVycm9yTW9uaXRvci5XaSgpLl9oKHQuaWQoKStpKSx0Lk1JLmVkKG5ldyB1LkYudW8obnVsbCx1LkYuR3IuVXIpKSxuLnJlamVjdChuZXcgdih5LnloLGkpKX0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIHYpcmV0dXJuIG4ucmVqZWN0KGUpO3ZhciBpPVwiRXJyb3IgZmV0Y2hpbmcgSGl2ZSBDbGllbnQgdmVyc2lvbjogXCIrZTtyZXR1cm4gZC5FcnJvck1vbml0b3IuV2koKS5faCh0LmlkKCkraSksbi5yZWplY3QobmV3IHYoeS55aCxpKSl9KSx0aGlzLnFJPURhdGUubm93KCl9cmV0dXJuIHRoaXMuekl9LHQucHJvdG90eXBlLmluaXRTZXNzaW9uPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcztyZXR1cm4gdGhpcy5vcHRpb25zXy5taW5WZXJzaW9uIT1oLndyLklvP3RoaXMuR0koKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGkuWUkodClbXCJjYXRjaFwiXShmdW5jdGlvbih0KXtyZXR1cm4gbi5yZWplY3QodCl9KX0pOnRoaXMuWUkodClbXCJjYXRjaFwiXShmdW5jdGlvbih0KXtyZXR1cm4gbi5yZWplY3QodCl9KX0sdC5wcm90b3R5cGUuWWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zXy5pbml0VGltZW91dH0sdC5wcm90b3R5cGUuc3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5pbmRleE9mKGUuWEkpPi0xfSx0LnByb3RvdHlwZS5QaT1mdW5jdGlvbih0LGkpe3ZhciByPXRoaXM7dGhpcy5tKCkuZGVidWcodGhpcy5pZCgpK1wiU3RvcHBpbmcgc2Vzc2lvbiBcIit0LmlkK1wiIFtjb21wbGV0ZSBjbG9zZTpcIitpK1wiXVwiKTt2YXIgbj1cIi8vXCIraC53ci5UbytcIjpcIit0aGlzLk1JLm9wdGlvbnMoKS5wbGF5ZXJQb3J0K1wiL3Nlc3Npb24/YWN0aW9uPXN0b3BcIjtuKz1cIiZjdXJyZW50U2Vzc2lvbj1cIit0LmlkLGkmJihuKz1cIiZjb21wbGV0ZVN0b3A9dHJ1ZVwiKSxpJiZlLlFJLnNlbmRCZWFjb24/KGUuUUkuc2VuZEJlYWNvbihuKSx0aGlzLm0oKS5kZWJ1Zyh0aGlzLmlkKCkrXCJzZXNzaW9uIHN0b3BwZWQgW1wiK3QuaWQrXCJdW2JlYWNvbl1cIikpOm8uWmkobixudWxsLCFpKS50aGVuKGZ1bmN0aW9uKCl7ci5tKCkuZGVidWcoci5pZCgpK1wic2Vzc2lvbiBzdG9wcGVkIFtcIit0LmlkK1wiXVwiKyhpP1wiW3N5bmNdXCI6XCJcIikpfSxmdW5jdGlvbihlKXtyLm0oKS53YXJuKHIuaWQoKStcInNlc3Npb24gY2xvc2UgZXJyb3IgW1wiK3QuaWQrXCJdXCIrKGk/XCJbc3luY11cIjpcIlwiKSxlKX0pfSx0LnByb3RvdHlwZS5DaT1mdW5jdGlvbih0LGUpe3RoaXMuWkk9ZT9wLkZvLklETEU6cC5Gby5Cbyx0aGlzLm0oKS5ub3RpY2UoXCJbSGl2ZUNvbW1dIGNsaWVudCBzdGF0ZTogXCIrcC5Gb1t0aGlzLlpJXSl9LHQucHJvdG90eXBlLmZkPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5aST09cC5Gby5JRExFKXJldHVybiBuLnJlc29sdmUoITApO3ZhciBpPVwicGxheWluZy1wb2ludD1cIitlLmxyO2krPVwiJmJ1ZmZlci1sZW5ndGg9XCIrZS5kcixpKz1cIiZ0b3RhbC1idWZmZXJpbmc9XCIrZS5ncixpKz1cIiZ3aWR0aD1cIitlLndpZHRoLGkrPVwiJmhlaWdodD1cIitlLmhlaWdodCxpKz1cIiZmdWxsc2NyZWVuPVwiK2UuZGQ7dmFyIHI9dC5YSStcInN0YXRzP1wiK2k7cmV0dXJuIHRoaXMubSgpLnRyYWNlKHIpLG8uWmkocil9LHQucHJvdG90eXBlLnlkPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzO2lmKCEoZSE9PXUuRi5CLmpyJiZlIT09dS5GLkIuSElEREVOfHx0aGlzLnZlcnNpb24mJihcImRldmVsb3BlclwiPT09dGhpcy52ZXJzaW9ufHx0aGlzLnZlcnNpb24+PVwiMjAxN1wiKSkpcmV0dXJuIG4ucmVzb2x2ZSghMCk7dmFyIHM9dC5YSStcInBsYXllci1ldmVudD90eXBlPVwiK3UuRi5CW2VdO2lmKHZvaWQgMCE9aSlmb3IodmFyIGEgaW4gaSlzKz1cIiZcIithK1wiPVwiK2lbYV07cmV0dXJuIHRoaXMubSgpLmRlYnVnKHRoaXMuaWQoKStcImV2ZW50IFwiK3UuRi5CW2VdLHZvaWQgMCE9aT9pOlwiXCIpLG8uWmkocykuZmFpbChmdW5jdGlvbih0KXtyZXR1cm4gci5tKCkud2FybihyLmlkKCkrXCJlcnJvciBzZW5kaW5nIGZlZWRiYWNrIGV2ZW50IHRvIEhpdmUgQ2xpZW50XCIsdCksbi5yZWplY3QodCl9KX0sdC5wcm90b3R5cGUud249ZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5yZXNvbHZlKCEwKX0sdC5wcm90b3R5cGUuaG49ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLnRSKCkpcmV0dXJuIHRoaXMubSgpLndhcm4oXCJQbGF5ZXIgaW5mbyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgSmF2YSBjbGllbnQgdmVyc2lvblwiKSxuLnJlc29sdmUoITApO3ZhciBpPVwiY29tbS12ZXJzaW9uPVwiK3RoaXMuTUkuY3QoKTtpKz1cIiZwbHVnaW4tbmFtZT1cIit0aGlzLk1JLlQoKSxpKz1cIiZwbHVnaW4tdmVyc2lvbj1cIit0aGlzLk1JLkkoKSxpKz1cIiZwbGF5ZXItdGVjaD1cIit0aGlzLk1JLmh0KCksaSs9XCImcGxheWVyLXZlcnNpb249XCIrdGhpcy5NSS5xKCk7dmFyIHI9dGhpcy5NSS50ZCgpO3ImJihpKz1cIiZ0ZWxlbWV0cnktaWQ9XCIrdGhpcy5NSS50ZCgpKTt2YXIgcz10LlhJK1wicGxheWVyLWluZm8/XCIraTtyZXR1cm4gby5aaShzKS5mYWlsKGZ1bmN0aW9uKHQpe3JldHVybiBlLm0oKS5kZWJ1ZyhlLmlkKCkrXCJlcnJvciBzZW5kaW5nIHBsYXllciBJbmZvIHRvIEhpdmUgQ2xpZW50XCIsdCksbi5yZWplY3QodCl9KX0sdC5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbih0KXt2YXIgZT0hMDtpZih2b2lkIDAhPXRoaXMub3B0aW9uc18ub25FcnJvcil0cnl7ZT10aGlzLm9wdGlvbnNfLm9uRXJyb3IodCl9Y2F0Y2goaSl7ZC5FcnJvck1vbml0b3IuV2koKS5faCh0aGlzLmlkKCkrXCJleGNlcHRpb24gaW4gdXNlci1kZWZpbmVkIG9uRXJyb3IgY2FsbGJhY2s6IFwiK2kpfXJldHVybiBlfSx0LnByb3RvdHlwZS5abD1mdW5jdGlvbih0LGUsaSl7dmFyIHI9e2lzUmVhZHlJbjp0aGlzLldJLGlzUmVhZHlPdXQ6dGhpcy4kSSxsZWFzZUluOnRoaXMuZVIsbGVhc2VPdXQ6dGhpcy5pUixyZXNvbHZlSW46dGhpcy5yUixyZXNvbHZlT3V0OnRoaXMublJ9O1widW5kZWZpbmVkXCIhPXR5cGVvZiBlJiZudWxsIT1lJiYoci5zZXNzaW9uSWQ9ZS5pZCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGkmJihyLnRvdGFsPWkpO3ZhciBuPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocikpO2QuRXJyb3JNb25pdG9yLldpKCkuX2godC5tZXNzYWdlLG4pLHRoaXMuTUkuZWQobmV3IHUuRi51byhudWxsLHUuRi5Hci5LcixyKSksdGhpcy5vUigpfSx0LnByb3RvdHlwZS5vbkFjdGl2ZVNlc3Npb249ZnVuY3Rpb24odCl7aWYodGhpcy5obih0KSxvLmFyLnNldEl0ZW0oXCJoaXZlQWN0aXZlU2Vzc2lvbklkXCIsdC5pZCksdm9pZCAwIT10aGlzLm9wdGlvbnNfLm9uQWN0aXZlU2Vzc2lvbil0cnl7dGhpcy5vcHRpb25zXy5vbkFjdGl2ZVNlc3Npb24odC5nKCkpfWNhdGNoKGUpe2QuRXJyb3JNb25pdG9yLldpKCkuX2godGhpcy5pZCgpK1wiZXhjZXB0aW9uIGluIHVzZXItZGVmaW5lZCBvbkFjdGl2ZVNlc3Npb24gY2FsbGJhY2s6IFwiK2UpfX0sdC5wcm90b3R5cGUucWw9ZnVuY3Rpb24odCl7dGhpcy5NST10fSx0LnByb3RvdHlwZS5pZD1mdW5jdGlvbigpe3JldHVyblwiW1wiK3QuSmwrXCJdIFwifSx0LnByb3RvdHlwZS5LST1mdW5jdGlvbihlKXt2b2lkIDAhPWVbdC5KbF0mJm8ubnIoZVt0LkpsXSx0aGlzLm9wdGlvbnNfKX0sdC5wcm90b3R5cGUuWUk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxpPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3JldHVybiB0aGlzLnNSKHQpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIHI/ZS5hUih0LHIsaSk6ZS5wKHQpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIGUuYVIodCxyLGkpfSl9KX0sdC5wcm90b3R5cGUuc1I9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcztpZih0aGlzLmVSPURhdGUubm93KCksdGhpcy5NSS5vcHRpb25zKCkudXNlU2Vzc2lvbkNoZWNrKXt2YXIgcj1cIi8vXCIraC53ci5UbytcIjpcIit0aGlzLk1JLm9wdGlvbnMoKS5wbGF5ZXJQb3J0K1wiL3Nlc3Npb24/JmFjdGlvbj1jaGVja1wiO3IrPVwiJmhpdmVQbHVnaW5JZD1cIit0aGlzLk1JLlMoKSxyKz1cIiZjYWxsYmFjaz1cIitlO3ZhciBzPW8uYXIuZ2V0SXRlbShcImhpdmVBY3RpdmVTZXNzaW9uSWRcIik7cmV0dXJuIG8uYXIucmVtb3ZlSXRlbShcImhpdmVBY3RpdmVTZXNzaW9uSWRcIikscyYmKHIrPVwiJmN1cnJlbnRTZXNzaW9uPVwiK3MpLHRoaXMuY1IoKSxvLlppKHIpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGkuaVI9RGF0ZS5ub3coKSx0P2kuaFIodCxyLGUsaS5lUik6KGkubSgpLmRlYnVnKGkuaWQoKStcInNlc3Npb24gYWxsb3dlZCBbXCIrKGkuaVItaS5lUikrXCJdXCIpLCExKX0sZnVuY3Rpb24oZSl7aWYoNDAwPT1lLnN0YXR1cylyZXR1cm4gaS5wUihcImJhZCByZXF1ZXN0XCIsXCJlcnJvciByZXNvbHZpbmcgdGlja2V0XCIsZSk7aWYoNDAxPT1lLnN0YXR1cylyZXR1cm4gaS5wUihcInVuYXV0aG9yaXplZFwiLFwiZXJyb3IgdmVyaWZ5aW5nIHRoZSB0aWNrZXRcIixlKTtpZig0MDM9PWUuc3RhdHVzKXt2YXIgcj10LnVSKGUsdm9pZCAwLFwic2Vzc2lvblwiKSxvPXI/e2xSOnJ9OnZvaWQgMDtyZXR1cm4gZC5FcnJvck1vbml0b3IuV2koKS5faChpLmlkKCkrXCJyZXBvcnRzIGFub3RoZXIgYWN0aXZlIHNlc3Npb25cIixvKSxpLk1JLmVkKG5ldyB1LkYudW8obnVsbCx1LkYuR3IucXIsbykpLG4ucmVqZWN0KG5ldyB2KHkud2gsXCJhbm90aGVyIGFjdGl2ZSBzZXNzaW9uXCIrKG8/XCIgW1wiK28ubFIrXCJdXCI6XCJcIikpKX1yZXR1cm4gNDA0PT1lLnN0YXR1cz8oaS5tKCkuZGVidWcoaS5pZCgpK1wiaW5zdGFsbGVkIHZlcnNpb24gZG9lcyBub3Qgc3VwcG9ydCBhY3RpdmUgc2Vzc2lvbiBjaGVja1wiKSxpLmlSPURhdGUubm93KCksITEpOmUuc3RhdHVzPT0tMT8oY2xlYXJUaW1lb3V0KGkuZFIpLGkuZlIoKSk6KGQuRXJyb3JNb25pdG9yLldpKCkuX2goaS5pZCgpK1wiIHVuaGFuZGxlZCBlcnJvciBmcm9tIEphdmFcIix7ZXJyb3I6ZS5zdGF0dXN9KSxpLk1JLmVkKG5ldyB1LkYudW8obnVsbCx1LkYuR3IuSnIpKSxuLnJlamVjdChuZXcgdih5Lm1oLGUpKSl9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2Ygdj9uLnJlamVjdCh0KTooZC5FcnJvck1vbml0b3IuV2koKS5faChpLmlkKCkrXCIgdW5oYW5kbGVkIGVycm9yIG9uIHJlcXVlc3RMZWFzZURpcmVjdFwiLHtlcnJvcjp0fSksaS5NSS5lZChuZXcgdS5GLnVvKG51bGwsdS5GLkdyLkpyKSksbi5yZWplY3QobmV3IHYoeS5taCx0KSkpfSlbXCJmaW5hbGx5XCJdKGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGkuZFIpfSl9cmV0dXJuIHRoaXMubSgpLmRlYnVnKHRoaXMuaWQoKStcIkhpdmUgc2Vzc2lvbiBjaGVjayBkaXNhYmxlZCAtIHdpbGwgZGlyZWN0bHkgcmVzb2x2ZSB0aWNrZXQgKG90aGVyIGFjdGl2ZSBzZXNzaW9ucyBtYXkgZmFpbClcIiksbi5yZXNvbHZlKCExKX0sdC5wcm90b3R5cGUucFI9ZnVuY3Rpb24oZSxpLHIpe3ZhciBvPXQudVIocixlKTtyZXR1cm4gZC5FcnJvck1vbml0b3IuV2koKS5faChcIlwiK3RoaXMuaWQoKStpKSx0aGlzLm5SPURhdGUubm93KCksbi5yZWplY3QobmV3IHYoeS5waCxvKSl9LHQudVI9ZnVuY3Rpb24odCxlLGkpe3ZvaWQgMD09PWkmJihpPVwic3RhdHVzXCIpO3ZhciByPWU7aWYodC5ib2R5KXRyeXt2YXIgbj1KU09OLnBhcnNlKHQuYm9keSk7cj1uW2ldfWNhdGNoKG8pe31yZXR1cm4gcn0sdC5wcm90b3R5cGUucD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuclI9RGF0ZS5ub3coKSx0aGlzLm0oKS5kZWJ1Zyh0aGlzLmlkKCkrXCJyZXNvbHZpbmcgdGlja2V0OiBcIit0KTt2YXIgaT10aGlzLmdSKHQpO3JldHVybiBvLlppKGksXCJhcHBsaWNhdGlvbi9qc29uXCIpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIGUuaFIocixpLHQsZS5yUil9LGZ1bmN0aW9uKGkpe3JldHVybiBpJiZpLnN0YXR1cz09LTE/ZS5mUigpOihkLkVycm9yTW9uaXRvci5XaSgpLl9oKGUuaWQoKStcImVycm9yIHJlc29sdmluZyB0aWNrZXRcIix7dGlja2V0OnR9KSxuLnJlamVjdChuZXcgdih5LnBoLGkpKSl9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKHQpe3JldHVybiBkLkVycm9yTW9uaXRvci5XaSgpLl9oKGUuaWQoKStcImVycm9yIHBhcnNpbmcgdGlja2V0IHJlc3BvbnNlOiBcIit0KSxuLnJlamVjdChuZXcgdih5Lm1oLHQpKX0pfSx0LnByb3RvdHlwZS5oUj1mdW5jdGlvbih0LGUsaSxyKXt2YXIgbj1KU09OLnBhcnNlKHQpLHM9by5pcihlLG4ubG9jYXRpb24pO3JldHVybiBuLnZlcnNpb24mJiF0aGlzLnZlcnNpb24mJih0aGlzLnZlcnNpb249bi52ZXJzaW9uKSx0aGlzLm5SPURhdGUubm93KCksdGhpcy5tKCkuZGVidWcodGhpcy5pZCgpK1wicmVzb2x2ZWQgdGlja2V0IFwiK2krXCIgLT4gXCIrcytcIiBbXCIrKHRoaXMublItcikrXCJdXCIpLHN9LHQucHJvdG90eXBlLmFSPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLnZSKHQsZSk7aWYobnVsbCE9cil7dmFyIG49KG5ldyBEYXRlKS5nZXRUaW1lKCkscz1uLWk7cmV0dXJuIHM+PXRoaXMub3B0aW9uc18ud2FyblNsb3dSZXNwVGltZW91dCYmdGhpcy5abChuZXcgdih5LlNoLHRoaXMuaWQoKStcIiBUaGUgdGVjaCBpbml0aWFsaXphdGlvbiB0b29rIG1vcmUgdGhhbiBcIit0aGlzLm9wdGlvbnNfLndhcm5TbG93UmVzcFRpbWVvdXQrXCIgbWlsbGlzZWNvbmRzXCIpLHIscyksby5IaXZlUmVxdWVzdEZhY3RvcnkuYmkoci5pZCx0aGlzLkFpKCkpLHJ9dGhyb3cgbmV3IHYoeS5waCxcImVycm9yIGdlbmVyYXRpbmcgc2Vzc2lvblwiKX0sdC5wcm90b3R5cGUudlI9ZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgbC5hcDtpLktoKHQpO3ZhciByPW5ldyB3KHQsaSxlLG51bGwpO3IueVI9ITA7dmFyIG49aC53ci5FbyxvPW4uZXhlYyhyLm1hbmlmZXN0KTtyZXR1cm4gbnVsbCE9bz8oci5YST1vWzFdLHIuaWQ9b1s1XSxyKTpudWxsfSx0LnByb3RvdHlwZS5nUj1mdW5jdGlvbih0KXt2YXIgZT10LmluZGV4T2YoXCI/XCIpPT0tMT9cIj9cIjpcIiZcIjtyZXR1cm4gdGhpcy50UigpP28ucnIoaC53ci5ibyxoLndyLlRvLHRoaXMuTUkub3B0aW9ucygpLnBsYXllclBvcnQsdCk6by5ycihoLndyLlNvLGgud3IuVG8sdGhpcy5NSS5vcHRpb25zKCkucGxheWVyUG9ydCx0LGUsdGhpcy5NSS5TKCkpfSx0LnByb3RvdHlwZS5jUj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5kUiYmY2xlYXJUaW1lb3V0KHRoaXMuZFIpLHRoaXMuZFI9c2V0VGltZW91dChmdW5jdGlvbigpe2QuRXJyb3JNb25pdG9yLldpKCkuX2godC5pZCgpK1wiIFRoZSBMZWFzZSBSZXF1ZXN0IGlzIHRha2luZyBtb3JlIHRoYW4gXCIrdC5vcHRpb25zXy53YXJuU2xvd1Jlc3BUaW1lb3V0K1wiIHNlY3NcIil9LHRoaXMub3B0aW9uc18ud2FyblNsb3dSZXNwVGltZW91dCl9LHQucHJvdG90eXBlLm9SPWZ1bmN0aW9uKCl7dGhpcy5lUj0wLHRoaXMuaVI9MCx0aGlzLnJSPTAsdGhpcy5uUj0wfSx0LnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTUkubSgpfSx0LnByb3RvdHlwZS56bD1mdW5jdGlvbigpe3RoaXMub1IoKX0sdC5wcm90b3R5cGUuZlI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9XCIvL1wiK2gud3IuVG8rXCI6XCIrdGhpcy5NSS5vcHRpb25zKCkubW9uaXRvclBvcnQrXCIvdmVyc2lvbi5qc29uXCI7cmV0dXJuIHRoaXMubSgpLmRlYnVnKHRoaXMuaWQoKStcImNoZWNraW5nIGlmIHRoZSBtb25pdG9yIHBvcnQgaXMgcmVhY2hhYmxlXCIpLG8uWmkoZSkudGhlbihmdW5jdGlvbihlKXt2YXIgaT1KU09OLnBhcnNlKGUpO3Rocm93IHQuc3RhdGU9aS5zdGF0ZSxkLkVycm9yTW9uaXRvci5XaSgpLl9oKHQuaWQoKStcIkNsaWVudCBzdGF0ZTogXCIrdC5zdGF0ZSksdC5NSS5lZChuZXcgdS5GLnVvKG51bGwsdS5GLkdyLlZyKSksbmV3IHYoeS55aCxcInN0YXRlIFwiK3Quc3RhdGUpfSkuZmFpbChmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdilyZXR1cm4gbi5yZWplY3QoZSk7aWYoZSYmZS5zdGF0dXM9PS0xKXt2YXIgaT1cImNsaWVudCBub3QgcmVhY2hhYmxlXCI7cmV0dXJuIHQuTUkuZWQobmV3IHUuRi51byhudWxsLHUuRi5Hci5VcikpLHQubSgpLndhcm4odC5pZCgpK2kpLG4ucmVqZWN0KG5ldyB2KHkueWgsaSkpfXZhciBpPVwiVmVyaWZ5Q2xpZW50U3RhdGUgZXJyb3JcIjtyZXR1cm4gZC5FcnJvck1vbml0b3IuV2koKS5faCh0LmlkKCkraSx7ZXJyb3I6ZX0pLHQuTUkuZWQobmV3IHUuRi51byhudWxsLHUuRi5Hci5WcikpLG4ucmVqZWN0KG5ldyB2KHkubWgsaSkpfSl9LHQucHJvdG90eXBlLnRSPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc18uc3VwcG9ydExlZ2FjeUNsaWVudCYmKCF0aGlzLnZlcnNpb258fHRoaXMudmVyc2lvbi5zdWJzdHIoMCw0KTxcIjIwMTZcIil9LHR9KCk7VC5KbD1cIkhpdmVKYXZhXCIsZS5IaXZlSmF2YT1UfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWZvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pO3QucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KGkucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBpKX0sbz1pKDgpLHM9aSgxMik7IWZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLm1pblZlcnNpb249cy53ci5JbyxlLmluaXRUaW1lb3V0PTZlNCxlLndhcm5TbG93UmVzcFRpbWVvdXQ9NWUzLGUuc3VwcG9ydExlZ2FjeUNsaWVudD0hMSxlfXJldHVybiBuKGUsdCksZX0oby5wdC5Jci5Scik7dC5KST1lfShlPXQuSXJ8fCh0LklyPXt9KSl9KHI9ZS5wdHx8KGUucHQ9e30pKX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHR9KCk7aS5Ubz1cIjEyNy4wLjAuMVwiLGkuT2Q9MTE5ODMsaS5Tbz1cIi8vezB9OnsxfS9wcm94eS8/Y2FsbGJhY2s9ezJ9ezN9aGl2ZVBsdWdpbklkPXs0fVwiLGkubVI9XCIvL3swfTp7MX0vcHJveHkvezJ9L3Nlc3Npb24/bWFuaWZlc3Q9ezN9XCIsaS5rZD1cIi8vezB9OnsxfS9wcm94eS97Mn0vcGxheWVyP3JlcT17M31cIixpLndSPVwiLy97MH06ezF9L3Byb3h5L3syfS9pbmZvP3szfVwiLGUuQ2Q9aX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciByPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPXR9Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSk7dC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKTooaS5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IGkpfSxuPWkoMjYpLG89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHIoZSx0KSxlLmJpPWZ1bmN0aW9uKHQsaSl7ZS5UUltpXT10fSxlLlNSPWZ1bmN0aW9uKHQsaSl7ZS5iUltpXT10fSxlLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2Vzc2lvbklkKXt2YXIgdD1PYmplY3Qua2V5cyhlLmJSKTt0Lmxlbmd0aD4wJiYodGhpcy5zZXNzaW9uSWQ9ZS5iUlt0WzBdXSl9dmFyIGk9ZS5UUlt0aGlzLnNlc3Npb25JZF0scj1lLmJSW3RoaXMuc2Vzc2lvbklkXTtyLm0oKS5kZWJ1ZyhcIkludGVyY2VwdGVkIE1hbmlmZXN0IFJlcXVlc3QgXCIrdGhpcy51cmwpLGkuc2V0TWFuaWZlc3RSZXF1ZXN0KHRoaXMpLHIuUih0aGlzLnVybCl9LGUucHJvdG90eXBlLkVSPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPW5ldyBYTUxIdHRwUmVxdWVzdDtlLm9wZW4oXCJHRVRcIix0aGlzLnVybCksZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09ZS5yZWFkeVN0YXRlJiYodC5yZXNwb25zZT1lLnJlc3BvbnNlVGV4dCx0LnJlc3BvbnNlVGV4dD1lLnJlc3BvbnNlVGV4dCx0LnJlYWR5U3RhdGU9NCx0LnN0YXR1cz1lLnN0YXR1cyx0Lm9ucmVhZHlzdGF0ZWNoYW5nZSgpLHQub25sb2FkKCksY29uc29sZS5kZWJ1ZyhcIlJldHVybmVkIE1hbmlmZXN0IFJlcXVlc3QgXCIrdC51cmwpKX0sZS5zZW5kKCl9LGUucHJvdG90eXBlLklSPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuc2VuZC5jYWxsKHRoaXMpfSxlfShuLlRpKTtvLmJSPXt9LG8uVFI9e30sZS5TaT1vfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWZvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pO3QucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KGkucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBpKX0sbz1pKDgpOyFmdW5jdGlvbih0KXt2YXIgZTshZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG4oZSx0KSxlfShvLnB0LklyLlJyKTt0LlJSPWV9KGU9dC5Jcnx8KHQuSXI9e30pKX0ocj1lLnB0fHwoZS5wdD17fSkpfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9aSgxKSxuPWkoNyksbz1pKDQ3KSxzPW8ucHQuSXIuUlIsYT1pKDE0KSxjPWkoNTkpLGg9aSgxOSkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxpKXt0aGlzLk1JPWUsdGhpcy5vcHRpb25zXz1uZXcgcyx2b2lkIDAhPT1pW3QuSmxdJiZuLm5yKGlbdC5KbF0sdGhpcy5vcHRpb25zXyl9cmV0dXJuIHQucHJvdG90eXBlLkFpPWZ1bmN0aW9uKCl7cmV0dXJuIHQuSmx9LHQucHJvdG90eXBlLmdldFZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUuV2w9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sdC5wcm90b3R5cGUuR0k9ZnVuY3Rpb24oKXtyZXR1cm4gci5yZXNvbHZlKCEwKX0sdC5wcm90b3R5cGUuaW5pdFNlc3Npb249ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLnZSKHQsZS50aWNrZXQsZS50aWNrZXQudHAoKSxlKTtyZXR1cm4gbi5IaXZlUmVxdWVzdEZhY3RvcnkuYmkoaS5pZCx0aGlzLkFpKCkpLHIucmVzb2x2ZShpKX0sdC5wcm90b3R5cGUuWWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zKCkuaW5pdFRpbWVvdXR9LHQucHJvdG90eXBlLnN0PWZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5tYW5pZmVzdC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCIvbWFuaWZlc3RcIik7aWYoaT4tMSl7dmFyIHI9ZS5tYW5pZmVzdC5zdWJzdHJpbmcoMCxpKTtpZih0LmluZGV4T2Yocik+LTEpcmV0dXJuITB9ZWxzZSBpZih0PT1lLm1hbmlmZXN0KXJldHVybiEwO3JldHVybiExfSx0LnByb3RvdHlwZS5QaT1mdW5jdGlvbih0KXt0LlJpJiYodGhpcy5NSS5tKCkuZGVidWcoXCJbU3RhdHNKU10gc3RvcHBpbmcgc2Vzc2lvbiBbXCIrdC5pZCtcIl1cIiksdC5SaS5Iby5yZXNldCgpKX0sdC5wcm90b3R5cGUuQ2k9ZnVuY3Rpb24odCxlKXt2YXIgaT1lP2EuRm8uSURMRTphLkZvLkJvO3RoaXMuTUkubSgpLm5vdGljZShcIltIaXZlQ29tbV0gY2xpZW50IHN0YXRlOiBcIithLkZvW2ldKSx0LlJpJiZ0LlJpLkNpKGkpfSx0LnByb3RvdHlwZS5mZD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMsbj0wO3JldHVybiB0aGlzLmtSPGUuZ3ImJihuPWUuZ3ItdGhpcy5rUix0aGlzLmtSPWUuZ3IpLHQuTmkoKS50aGVuKGZ1bmN0aW9uKCl7dC5SaS5Eby5DUihuLGUuZHIpLHQuUmkuUW4udm4oZS5scixlLmRyLGUuZ3IpLGkuT1IoKX0pLmRvbmUoKSxyLnJlc29sdmUoITApfSx0LnByb3RvdHlwZS55ZD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHQuTmkoKS50aGVuKGZ1bmN0aW9uKCl7dC5SaS5Rbi5tbih0LnRpY2tldC5zZXNzaW9uSWQsZSxpKX0pLmRvbmUoKSxyLnJlc29sdmUoITApfSx0LnByb3RvdHlwZS53bj1mdW5jdGlvbih0LGUpe3JldHVybiB0Lk5pKCkudGhlbihmdW5jdGlvbigpe3QuUmkuUW4uVG4oW2VdKX0pLmRvbmUoKSxyLnJlc29sdmUoITApfSx0LnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKHQpe3ZhciBlPSEwO2lmKHZvaWQgMCE9dGhpcy5vcHRpb25zKCkub25FcnJvcil0cnl7ZT10aGlzLm9wdGlvbnMoKS5vbkVycm9yKHQpfWNhdGNoKGkpe2guRXJyb3JNb25pdG9yLldpKCkuX2goXCJbU3RhdHNKU10gZXhjZXB0aW9uIGluIHVzZXItZGVmaW5lZCBvbkVycm9yIGNhbGxiYWNrOiBcIitpKX1yZXR1cm4gZX0sdC5wcm90b3R5cGUub25BY3RpdmVTZXNzaW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5QUigpLHQuTmkoKS50aGVuKGZ1bmN0aW9uKGkpe2UuQVI9aTt2YXIgcj1uZXcgYy5OUihlLk1JLmlzTGl2ZSgpLGUuTUkuJCgpLHQudGlja2V0LnRwKCkpO2UuQVIueFI9cixlLkFSLkRvLnhSPXIsZS5NSS5obihlLkFSKSxlLkFSLkhvLmluaXQoZS5BUi5EbyxudWxsKSxlLkFSLlFuLndpKHQudGlja2V0LnNlc3Npb25JZCxlLk1JLml0KCksMjAwKTt2YXIgbj1lLk1JLnJkKCk7aWYobiYmbi5sZW5ndGg+MCYmZS5BUi5Rbi5UbihuKSx2b2lkIDAhPWUub3B0aW9uc18ub25BY3RpdmVTZXNzaW9uKXRyeXtlLm9wdGlvbnNfLm9uQWN0aXZlU2Vzc2lvbih0LmcoKSl9Y2F0Y2gobyl7aC5FcnJvck1vbml0b3IuV2koKS5faChcIltTdGF0c0pTXSBleGNlcHRpb24gaW4gdXNlci1kZWZpbmVkIG9uQWN0aXZlU2Vzc2lvbiBjYWxsYmFjazogXCIrbyl9fSkuZG9uZSgpfSx0LnByb3RvdHlwZS5abD1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUuemw9ZnVuY3Rpb24oKXt9LHQucHJvdG90eXBlLnFsPWZ1bmN0aW9uKHQpe3RoaXMuTUk9dH0sdC5wcm90b3R5cGUub3B0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnNffSx0LnByb3RvdHlwZS5QUj1mdW5jdGlvbigpe3RoaXMua1I9MH0sdC5wcm90b3R5cGUudlI9ZnVuY3Rpb24odCxlLGkscil7dmFyIG89bmV3IG4uQmkodCxlLGkscik7cmV0dXJuIG8ueVI9ITEsby5pZD1lLnNlc3Npb25JZCxvfSx0LnByb3RvdHlwZS5PUj1mdW5jdGlvbigpe3RyeXt2YXIgdD10aGlzLk1JLmF0KCk7dm9pZCAwIT10JiYodGhpcy5BUi5Eby5CUi5tZXRyaWNzLmJpdHJhdGVVcE4rPXQuSmkoKSx0aGlzLkFSLkRvLkJSLm1ldHJpY3MuYml0cmF0ZUR3bk4rPXQuS2koKSxudWxsIT10LlZpKCkmJih0aGlzLkFSLkRvLkJSLm1ldHJpY3Muc3JjVGhyb3VnaHB1dD10LlZpKCkpLG51bGwhPXQuUWkoKSYmdGhpcy5GUighMCx0LlFpKCkpLG51bGwhPXQucWkoKSYmdGhpcy5GUighMSx0LnFpKCkpKX1jYXRjaChlKXtoLkVycm9yTW9uaXRvci5XaSgpLl9oKGUpfX0sdC5wcm90b3R5cGUuRlI9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLHI9MCxuPTAsbz0wLHM9MDtlLmZvckVhY2goZnVuY3Rpb24oZSxhKXt2YXIgYz1lLnN1Y2Nlc3MrZS5faTtpZihyKz1jLHMrPWUuRGksbis9ZS5zdWNjZXNzLG8rPWUuX2ksdCl7dmFyIGg9aS5BUi5Eby5fUihOdW1iZXIoYSkpO2kuRFIoaCxjLGUuc3VjY2VzcyxlLl9pLGUuRGkpfX0pO3ZhciBhPXRoaXMuQVIuRG8uSFIoKTt0aGlzLkRSKGEscixuLG8scyl9LHQucHJvdG90eXBlLkRSPWZ1bmN0aW9uKHQsZSxpLHIsbil7dC5zcmNSZXFOKz1lLHQuc3JjUmVzcE4rPWksdC5zcmNSZXNwRXJyTis9cix0LnNyY1Jlc3BRdCs9bix0LnJlc3BGYWxsYmFja04rPWksdC5yZXNwRmFsbGJhY2tFcnJOKz1yfSx0fSgpO3AuSmw9XCJTdGF0c0pTXCIsZS5TdGF0c0pTPXB9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk7IWZ1bmN0aW9uKHQpe3ZhciBlOyFmdW5jdGlvbih0KXt0W3QuSGl2ZUpTPTBdPVwiSGl2ZUpTXCIsdFt0LkhpdmVKYXZhPTFdPVwiSGl2ZUphdmFcIix0W3QuU3RhdHNKUz0yXT1cIlN0YXRzSlNcIix0W3QuSGl2ZUpzUHJveHk9M109XCJIaXZlSnNQcm94eVwifShlPXQuSWx8fCh0LklsPXt9KSl9KGk9ZS5wdHx8KGUucHQ9e30pKX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciByPWkoMTUpLG49aSgyKSxvPWkoMjQpLHM9aSgxNCksYT1pKDUpLGM9aSg5KSxoPWkoNTYpLHA9aSg1NSksdT1pKDYwKSxsPWkoNTIpLGQ9aSg1MSk7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGYpdmFyIGY9ITE7aWYoZil2YXIgZz1pKDUzKS5MUjtlbHNlIHZhciB2PWkoNTcpLk1SO3ZhciB5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7dC5iaW5kKG5ldyByLm5zKGEuZ2kudWkscy5ycyxyLnNzLmxzKSksdC5iaW5kKG5ldyByLm5zKGEuZ2kuQmUscC5qUixyLnNzLmxzKSksdC5iaW5kKG5ldyByLm5zKGEuZ2kuYWksdS5VUixyLnNzLmxzKSksdC5iaW5kKG5ldyByLm5zKGEuZ2kuQ2UsbC5WUixyLnNzLmxzKSksdC5iaW5kKG5ldyByLm5zKG4uRnJhbWV3b3JrLkZlLndlLG8uRWwuYmwsci5zcy5scykpLGY/dC5iaW5kKG5ldyByLm5zKGEuZ2kuY2ksZyxyLnNzLmxzKSk6dC5iaW5kKG5ldyByLm5zKGEuZ2kuY2ksdixyLnNzLmxzKSksdC5iaW5kKG5ldyByLm5zKGEuZ2kuaGksZC5RUixyLnNzLmxzKSksdC5iaW5kKG5ldyByLm5zKGEuZ2kubGksaC5TdGF0cy56ZixyLnNzLlRzKSksdC5iaW5kKG5ldyByLm5zKGEuZ2kuc2ksaC5TdGF0cy5lbyxyLnNzLlRzKSksdC5iaW5kKG5ldyByLm5zKGEuZ2kuZGksYy5GLlVuLHIuc3MuVHMpKSx0LmJpbmQobmV3IHIubnMoYS5naS5maSxjLkYuZW8sci5zcy5UcykpfSx0fSgpO2UuU2Q9eX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLnFSPWZ1bmN0aW9uKHQpe3RoaXMuaG9zdG5hbWU9dH0sdC5wcm90b3R5cGUuRm49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ob3N0bmFtZX0sdC5wcm90b3R5cGUuSlI9ZnVuY3Rpb24odCl7dGhpcy5LUj10fSx0LnByb3RvdHlwZS5Obj1mdW5jdGlvbigpe3JldHVybiB0aGlzLktSfSx0fSgpO2UuUVI9aX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciByPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPXR9Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSk7dC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKTooaS5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IGkpfSxuPWkoMSksbz1pKDIyKSxzPWkoMiksYT1pKDEzKSxjPWkoMzkpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5HUj1cIklkZW50aXR5U3RvcmVcIix0aGlzLnpSPVwiSWRlbnRpdHlEQlwiLHRoaXMuc249bnVsbCx0aGlzLmluZGV4ZWREQj13aW5kb3cuaW5kZXhlZERCfHx3aW5kb3cubW96SW5kZXhlZERCfHx3aW5kb3cud2Via2l0SW5kZXhlZERCfHx3aW5kb3cubXNJbmRleGVkREIscy5GcmFtZXdvcmsmJnMuRnJhbWV3b3JrLnJlc29sdmUocy5GcmFtZXdvcmsuRmUud2UpP3RoaXMubT1zLkZyYW1ld29yay5yZXNvbHZlKHMuRnJhbWV3b3JrLkZlLndlKS5sb2coKTp0aGlzLm09Y29uc29sZX1yZXR1cm4gdC5wcm90b3R5cGUuV1I9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9bi5kZWZlcigpLGk9aW5kZXhlZERCLm9wZW4odGhpcy56Uik7cmV0dXJuIGkub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKCl7dmFyIGU9aS5yZXN1bHQ7ZS5jcmVhdGVPYmplY3RTdG9yZSh0LkdSLHtrZXlQYXRoOlwiaWRcIn0pfSxpLm9uc3VjY2Vzcz1mdW5jdGlvbigpe3ZhciB0PWkucmVzdWx0O2UucmVzb2x2ZSh0KX0saS5vbmVycm9yPWZ1bmN0aW9uKHQpe2UucmVqZWN0KHQpfSxlLnZ0fSx0LnByb3RvdHlwZS5Lbz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy4kUilyZXR1cm4gdGhpcy4kUjt2YXIgZT1uLmRlZmVyKCk7aWYodGhpcy5zbillLnJlc29sdmUobmV3IGMuRkkodGhpcy5zbikpO2Vsc2UgaWYoYS5Lbi5SbyYmdGhpcy5pbmRleGVkREIpe3ZhciBpPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Lm0ud2FybihcIltIaXZlQ29tbV0gdGltZW91dCByZXRyaWV2aW5nIHBlcnNpc3RlbnQgSUQgLSBnZW5lcmF0aW5nIHJhbmRvbSBvbmVcIiksXG4gIHQuc249dC5ZUigpLHQubS5kZWJ1ZyhcIltIaXZlQ29tbV0gR2VuZXJhdGVkIFVVSUQ6IFwiK3Quc24pLGUucmVzb2x2ZShuZXcgYy5GSSh0LnNuKSl9LDRlMyk7dHJ5e3ZhciByPXRoaXMuV1IoKTtyLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49ci50cmFuc2FjdGlvbih0LkdSLFwicmVhZHdyaXRlXCIpLG89bi5vYmplY3RTdG9yZSh0LkdSKSxzPW8uZ2V0KFwiTVlJRFwiKTtzLm9uc3VjY2Vzcz1mdW5jdGlvbigpe2lmKGNsZWFyVGltZW91dChpKSx0LnNuKWUucmVzb2x2ZShuZXcgYy5GSSh0LnNuKSk7ZWxzZSBpZihudWxsIT1zLnJlc3VsdCYmYS5Lbi5Sbyl7dmFyIG49cy5yZXN1bHQudmFsdWU7dC5tLmRlYnVnKFwiW0hpdmVDb21tXSBSZXRyaWV2ZWQgcGVyc2lzdGVudCBVVUlEOiBcIituKSx0LnNuPW4sci5jbG9zZSgpLGUucmVzb2x2ZShuZXcgYy5GSSh0LnNuKSl9ZWxzZXt2YXIgbz10LllSKCk7dC5YUihyLG8pLGUucmVzb2x2ZShuZXcgYy5GSSh0LnNuKSl9fSxzLm9uZXJyb3I9ZnVuY3Rpb24ocil7Y2xlYXJUaW1lb3V0KGkpLHQuc258fCh0Lm0ud2FybihcIltIaXZlQ29tbV0gZXJyb3IgcmV0cmlldmluZyBwZXJzaXN0ZW50IFVVSUQ6IFwiK3IpLHQuc249dC5ZUigpLHQubS5kZWJ1ZyhcIltIaXZlQ29tbV0gR2VuZXJhdGVkIFVVSUQ6IFwiK3Quc24pKSxlLnJlc29sdmUobmV3IGMuRkkodC5zbikpfX0pLmZhaWwoZnVuY3Rpb24ocil7Y2xlYXJUaW1lb3V0KGkpLHQuc258fCh0Lm0ud2FybihcIltIaXZlQ29tbV0gZXJyb3Igb3BlbmluZyBpbmRleGVkREIgLSBnZW5lcmF0aW5nIHJhbmRvbSBpZC4gRXJyb3I6IFwiK3IpLHQuc249dC5ZUigpLHQubS5kZWJ1ZyhcIltIaXZlQ29tbV0gR2VuZXJhdGVkIFVVSUQ6IFwiK3Quc24pKSxlLnJlc29sdmUobmV3IGMuRkkodC5zbikpfSl9Y2F0Y2gobyl7dGhpcy5zbj10aGlzLllSKCksdGhpcy5tLmRlYnVnKFwiW0hpdmVDb21tXSBQZXJzaXN0ZW5jZSBlcnJvciAtIEdlbmVyYXRlIFVVSUQ6IFwiK3RoaXMuc24sbyksZS5yZXNvbHZlKG5ldyBjLkZJKHRoaXMuc24pKX19ZWxzZSB0aGlzLnNuPXRoaXMuWVIoKSx0aGlzLm0uZGVidWcoXCJbSGl2ZUNvbW1dIFBlcnNpc3RlbmNlIGRpc2FibGVkIC0gR2VuZXJhdGUgVVVJRDogXCIrdGhpcy5zbiksZS5yZXNvbHZlKG5ldyBjLkZJKHRoaXMuc24pKTtyZXR1cm4gdGhpcy4kUj1lLnZ0LHRoaXMuJFJ9LHQucHJvdG90eXBlLlhSPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcyxyPXQudHJhbnNhY3Rpb24odGhpcy5HUixcInJlYWR3cml0ZVwiKSxuPXIub2JqZWN0U3RvcmUodGhpcy5HUik7bi5wdXQoe2lkOlwiTVlJRFwiLHZhbHVlOmV9KSxyLm9uY29tcGxldGU9ZnVuY3Rpb24oKXtpLm0uZGVidWcoXCJbSGl2ZUNvbW1dIGNvbXBsZXRlZCBVVUlEIHBlcnNpc3RlbmNlXCIpLHQuY2xvc2UoKX0sdGhpcy5tLmRlYnVnKFwiW0hpdmVDb21tXSBHZW5lcmF0ZWQgVVVJRDogXCIrZSksdGhpcy5zbj1lfSx0LnByb3RvdHlwZS5ZUj1mdW5jdGlvbigpe3JldHVybiBvLlpoKCl9LHR9KCk7ZS5aUj1oO3ZhciBwPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5jYWxsKHRoaXMpfHx0aGlzfXJldHVybiByKGUsdCksZS5wcm90b3R5cGUuS289ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMudGspcmV0dXJuIHRoaXMudGs7dmFyIGk9bi5kZWZlcigpO3JldHVybiB0LnByb3RvdHlwZS5Lby5jYWxsKHRoaXMpLnRoZW4oZnVuY3Rpb24odCl7dmFyIHI9ZS5ZUigpLG49dC4kbygpLG89bmV3IGMuRkkocixuKTtpLnJlc29sdmUobyl9KS5mYWlsKGZ1bmN0aW9uKHQpe3ZhciByPWUuWVIoKSxuPW5ldyBjLkZJKHIpO2kucmVzb2x2ZShuKX0pLHRoaXMudGs9aS52dCx0aGlzLnRrfSxlfShoKTtlLlZSPXB9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1pKDEpLG49aSgyKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMudT1cIltQcmVsb2FkQ29ubmVjdGl2aXR5SW5mb1Byb3ZpZGVyXSBcIix0aGlzLmNvbm5JbmZvPXdpbmRvdy5layx0aGlzLm09bi5GcmFtZXdvcmsucmVzb2x2ZShuLkZyYW1ld29yay5GZS53ZSkubG9nKCksdGhpcy5jb25uSW5mb3x8dGhpcy5tLmVycm9yKHRoaXMudStcIiBoZWxwZXIgdW5kZWZpbmVkXCIpfXJldHVybiB0LnByb3RvdHlwZS5Qbj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoIXRoaXMuY29ubkluZm8pcmV0dXJuIHIucmVqZWN0KFwiQ29ubkluZm8gaGVscGVyIHVuZGVmaW5lZFwiKTt2YXIgZT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHQubS53YXJuKHQudStcIkdldCBjb25uZWN0aXZpdHkgaW5mbyBleHBpcmVkXCIpLHQuaWs/ci5yZXNvbHZlKHQuaWspOnIucmVqZWN0KFwiZXhwaXJlZFwiKX0sMmUzKTt0cnl7cmV0dXJuIHRoaXMuY29ubkluZm8uUG4oKS50aGVuKGZ1bmN0aW9uKGkpe3JldHVybiBjbGVhclRpbWVvdXQoZSksdC5paz1pLGl9KS5mYWlsKGZ1bmN0aW9uKGUpe3JldHVybiB0Lm0uZGVidWcodC51K1wiIGdldCBjb25uZWN0aXZpdHkgaW5mbyBmYWlsZWQgd2l0aCBlcnJvciAxOiBcIixlKSx0LmlrP3QuaWs6ci5yZWplY3QoZSl9KX1jYXRjaChpKXtyZXR1cm4gdGhpcy5tLmRlYnVnKHRoaXMudStcIiBnZXQgY29ubmVjdGl2aXR5IGluZm8gZmFpbGVkIHdpdGggZXJyb3IgMjpcIixpKSxyLnJlamVjdChpKX19LHQucHJvdG90eXBlLnJrPWZ1bmN0aW9uKHQsZSxpKXt9LHR9KCk7ZS5MUj1vfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9aSg2Myksbj1pKDEpLG89aSgyKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuaW5kZXhlZERCPXdpbmRvdy5pbmRleGVkREJ8fHdpbmRvdy5tb3pJbmRleGVkREJ8fHdpbmRvdy53ZWJraXRJbmRleGVkREJ8fHdpbmRvdy5tc0luZGV4ZWREQix0aGlzLm09by5GcmFtZXdvcmsucmVzb2x2ZShvLkZyYW1ld29yay5GZS53ZSkubG9nKCl9cmV0dXJuIHQucHJvdG90eXBlLldSPWZ1bmN0aW9uKCl7dmFyIHQ9bi5kZWZlcigpLGU9dGhpcy5pbmRleGVkREIub3BlbihcIlByaXZhdGVJUERCXCIpO3JldHVybiBlLm9udXBncmFkZW5lZWRlZD1mdW5jdGlvbigpe3ZhciB0PWUucmVzdWx0O3QuY3JlYXRlT2JqZWN0U3RvcmUoXCJQcml2YXRlSVBTdG9yZVwiLHtrZXlQYXRoOlwiaWRcIn0pfSxlLm9uc3VjY2Vzcz1mdW5jdGlvbigpe3ZhciBpPWUucmVzdWx0O3QucmVzb2x2ZShpKX0sZS5vbmVycm9yPWZ1bmN0aW9uKGUpe3QucmVqZWN0KGUpfSx0LnZ0fSx0LnByb3RvdHlwZS5uaz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5zaylyZXR1cm4gdGhpcy5zazt2YXIgZT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5tLndhcm4oXCJQcml2YXRlIGxpc3QgcmV0cmlldmFsIHRpbWVvdXRcIiksaS5yZWplY3QoXCJQcml2YXRlIGxpc3QgdGltZW91dFwiKX0sNGUzKSxpPW4uZGVmZXIoKSxvPXRoaXMuV1IoKTtyZXR1cm4gby50aGVuKGZ1bmN0aW9uKG4pe3ZhciBvPW4udHJhbnNhY3Rpb24oXCJQcml2YXRlSVBTdG9yZVwiLFwicmVhZHdyaXRlXCIpLHM9by5vYmplY3RTdG9yZShcIlByaXZhdGVJUFN0b3JlXCIpLGE9cy5nZXQoXCJpcGxpc3RcIik7YS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZSk7dmFyIHQ9W107ci5hayhhLnJlc3VsdCl8fHIuYWsoYS5yZXN1bHQudmFsdWUpfHwodD1hLnJlc3VsdC52YWx1ZS5zcGxpdChcInxcIikpLGkucmVzb2x2ZSh0KSxuLmNsb3NlKCl9LGEub25lcnJvcj1mdW5jdGlvbihyKXtjbGVhclRpbWVvdXQoZSksdC5tLndhcm4oXCJJIGdvdCBhbiBlcnJvciBvbiBpbmRleGVkIGRiIFwiK3IubWVzc2FnZSksaS5yZWplY3QoXCJFcnJvciBvbiBpbmRleGVkREIgXCIrci5tZXNzYWdlKX19KS5mYWlsKGZ1bmN0aW9uKHIpe2NsZWFyVGltZW91dChlKSx0Lm0ud2FybihcIkRCIGlzIG5vdCBvcGVuIHdpdGggZXJyb3JcIityLm1lc3NhZ2UpLGkucmVqZWN0KFwiREIgaXMgbm90IG9wZW4gd2l0aCBlcnJvciBcIityLm1lc3NhZ2UpfSksdGhpcy5zaz1pLnZ0LHRoaXMuc2t9LHQucHJvdG90eXBlLmNrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT10LmpvaW4oXCJ8XCIpLHI9dGhpcy5XUigpO3IudGhlbihmdW5jdGlvbihyKXt2YXIgbj1yLnRyYW5zYWN0aW9uKFwiUHJpdmF0ZUlQU3RvcmVcIixcInJlYWR3cml0ZVwiKSxvPW4ub2JqZWN0U3RvcmUoXCJQcml2YXRlSVBTdG9yZVwiKTtvLnB1dCh7aWQ6XCJpcGxpc3RcIix2YWx1ZTppfSksbi5vbmNvbXBsZXRlPWZ1bmN0aW9uKCl7ZS5tLmRlYnVnKFwiU3RvcmluZyBzaXRlIG1hdGNoZWQgaXBzIFtcIit0LmpvaW4oXCIsXCIpK1wiXVwiKSxyLmNsb3NlKCl9fSkuZmFpbChmdW5jdGlvbih0KXtlLm0ud2FybihcIkRCIGlzIG5vdCBvcGVuIHdpdGggZXJyb3IgXCIrdC5tZXNzYWdlKX0pfSx0fSgpO2UuaGs9c30sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciByPWkoMSksbj1pKDIxKSxvPWkoMzYpLHM9aSgyKSxhPWkoMTMpLGM9aSgxMCksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLm09cy5GcmFtZXdvcmsucmVzb2x2ZShzLkZyYW1ld29yay5GZS53ZSkubG9nKCksdGhpcy5tLmRlYnVnKFwiSU5JVCBTRVJWSUNFIENMSUVOVFwiKX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXM7aWYodGhpcy5wayl0aGlzLnBrLnRoZW4oZnVuY3Rpb24oKXt2YXIgdD17cGFydG5lcklkOmUuYm4oKSxjdXN0b21lcklkOmUuRW4oKSxjb250ZW50SWQ6ZS5lcygpLHNlY3JldDplLldoKCl9LHI9bmV3IGMuWm4oU2VydmljZXMua2YsMSxKU09OLnN0cmluZ2lmeSh0KSk7aS5jb25uZWN0aW9uLnNlbmQocil9KTtlbHNle3ZhciBzPXIuZGVmZXIoKSxoPWEuS24uSm4ua287ZS56aCYmKHRoaXMubS53YXJuKFwiW0hpdmVDb21tXSBFcnJvciB0cnlpbmcgdG8gcmVzb2x2ZSB0ZXN0IHRpY2tldCBhZ2FpbnN0IHByb2R1Y3Rpb24gc2VydmljZXMgLSB1c2UgcHJvZHVjdGlvbiB0aWNrZXQgb3IgdGVzdCBwbHVnaW5cIikscy5yZWplY3QobmV3IEVycm9yKFwidGVzdCB0aWNrZXQgaW4gcHJvZHVjdGlvblwiKSkpO3ZhciBwPW5ldyBuKGgpLHU9cC5FdSh7XCJjb25uZWN0aW9uLWlkXCI6dCxwYXJ0bmVyX2lkOmUuYm4oKSxjdXN0b21lcl9pZDplLkVuKCksY29udGVudF9pZDplLmVzKCksdGlja2V0OmUuV2goKX0pLnRvU3RyaW5nKCk7dGhpcy5jb25uZWN0aW9uPW5ldyBvLkFJKHUsYS5Lbi5Kbi5BbyxhLktuLkpuLk5vLGEuS24uSm4ueG8pLHRoaXMuY29ubmVjdGlvbi5USShmdW5jdGlvbigpe2kubS5kZWJ1ZyhcIkhJVkUgU0VSVklDRVMgQ09OTkVDVEVEXCIpLHMucmVzb2x2ZShpLmNvbm5lY3Rpb24pfSksdGhpcy5jb25uZWN0aW9uLm9uZXJyb3IoZnVuY3Rpb24oKXtpLm0ud2FybihcIkhpdmUgU2VydmljZXMgQ29ubmVjdGlvbiBmYWlsZWRcIikscy5yZWplY3QoaS5jb25uZWN0aW9uKX0pLHRoaXMucGs9cy52dH1yZXR1cm57WW86dGhpcy5jb25uZWN0aW9uLHZ0OnRoaXMucGt9fSx0LnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKCl7dGhpcy5jb25uZWN0aW9uJiZ0aGlzLmNvbm5lY3Rpb24uY29ubmVjdCghMCl9LHQucHJvdG90eXBlLnNkPWZ1bmN0aW9uKHQpe30sdC5wcm90b3R5cGUuWG49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25uZWN0aW9ufSx0LnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuY29ubmVjdGlvbiYmdGhpcy5jb25uZWN0aW9uLmNsb3NlKCl9LHR9KCk7ZS5qUj1ofSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9aSg0KSxuPXIudmUsbz1pKDE2KTtpKDMxKSxpKDMwKTt2YXIgcyxhPWkoMiksYz1pKDUpLGg9aSgxMykscD1pKDEwKSx1PWkoMTQpLGw9aSgyMyk7IWZ1bmN0aW9uKHQpe3ZhciBlPVwiW1NOQVBdXCIsaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLm1ldHJpY3M9bmV3IGhpdmUuc25hcHNob3RzLk1ldHJpY3MsdGhpcy51az1uZXcgaGl2ZS5zbmFwc2hvdHMuVHJhZmZpYyx0aGlzLmxrPW5ldyBuLHRoaXMuZGs9bmV3IG4sdGhpcy5maz1uZXcgbix0aGlzLnBsYXllcj1uZXcgaGl2ZS5zbmFwc2hvdHMuUGxheWVyfXJldHVybiB0fSgpO3QuZ2s9aTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGkoKXt0aGlzLnRpY2tldD1udWxsLHRoaXMudms9MCx0aGlzLnlrPTAsdGhpcy5taygpfXJldHVybiBpLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHQsaSxyLG4pe3RoaXMubT1hLkZyYW1ld29yay5yZXNvbHZlKGEuRnJhbWV3b3JrLkZlLndlKS5sb2cobiksdGhpcy50bj1hLkZyYW1ld29yay5yZXNvbHZlKGMuZ2kuY2kpLHRoaXMubS5kZWJ1ZyhlK1wiIElOSVQgU1RBVFMgU1RPUkUgLSBJRDogXCIrdCksdGhpcy5zbj10LHRoaXMudGlja2V0PWksdGhpcy5hbihyKX0saS5wcm90b3R5cGUud2s9ZnVuY3Rpb24odCl7dGhpcy5Uaz10fSxpLnByb3RvdHlwZS5hbj1mdW5jdGlvbih0KXt0aGlzLmFwcD10fSxpLnByb3RvdHlwZS5taz1mdW5jdGlvbigpe3RoaXMuU2s9bmV3IHQuZ2ssdGhpcy5zbj1udWxsLHRoaXMudGlja2V0PW51bGwsdGhpcy5yZXNldCgpfSxpLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuQlI9bmV3IHQuZ2ssdGhpcy5iayh0aGlzLkJSLnVrKSx0aGlzLkVrKHRoaXMuQlIpfSxpLnByb3RvdHlwZS5iaz1mdW5jdGlvbih0KXt0LnJlc3BGYWxsYmFja049MCx0LnJlc3BGYWxsYmFja0Vyck49MCx0LnNyY1JlcU49MCx0LnNyY1Jlc3BFcnJOPTAsdC5zcmNSZXNwUXQ9MCx0LnNyY090aGVyUmVzcE49MCx0LnNyY1Jlc3BOPTAsdC5zcmNPdmVyUXQ9MCx0LnAycERpcmVjdFF0PTAsdC5wMnBOYXRRdD0wLHQucDJwVWRwYlF0PTAsdC5wMnBSZWxheVF0PTAsdC5wMnBPdXRTaXRlTG93UHJpbz0wLHQucmVzcFAycE49MCx0LnAycFN1YlJlcU49MCx0LnAycFN1YlJlc3BFcnJOPTAsdC5wMnBTdWJSZXNwUXQ9MCx0LnAycFN1YlJlc3BQYXJ0Tj0wfSxpLnByb3RvdHlwZS5Faz1mdW5jdGlvbih0KXt0Lm1ldHJpY3MudmlkZW9CdWZOPTAsdC5tZXRyaWNzLnZpZGVvQnVmUXQ9MCx0Lm1ldHJpY3MuY2xpZW50QnVmZmVyTXM9MCx0LnBsYXllci5idWZmZXJpbmdOPTAsdC5wbGF5ZXIuYnVmZmVyaW5nTXM9MH0saS5wcm90b3R5cGUuSWs9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGk9bmV3IGhpdmUuc25hcHNob3RzLk1ldHJpY1NuYXBzaG90O2kudGltZXN0YW1wPWEuRnJhbWV3b3JrLnRpbWUoKSxpLmd1aWQ9dGhpcy5zbixpLnNlc3Npb25JZD10aGlzLnRpY2tldC5zZXNzaW9uSWQsaS5ldmVudElkPW5ldyBFdmVudElkLGkuZXZlbnRJZC5wYXJ0bmVySWQ9dGhpcy50aWNrZXQuYm4oKSxpLmV2ZW50SWQuY3VzdG9tZXJJZD10aGlzLnRpY2tldC5FbigpLGkuZXZlbnRJZC5jb250ZW50SWQ9dGhpcy50aWNrZXQuZXMoKTt0cnl7dmFyIHI9bmV3IGhpdmUuc25hcHNob3RzLkNsaWVudEluZm87ci5jbGllbnRUeXBlPXRoaXMuUmsoKTt2YXIgbj10aGlzLmFwcC52ZXJzaW9uLnNwbGl0KFwiLlwiKTtyLm1ham9yVmVyc2lvbj1wYXJzZUludChuWzBdKSxyLm1pbm9yVmVyc2lvbj1wYXJzZUludChuWzFdKSxyLnBhdGNoVmVyc2lvbj1wYXJzZUludChuWzJdKSxpLmNsaWVudD1yfWNhdGNoKG8pe3RoaXMubS53YXJuKGUrXCIgZXJyb3Igc2V0dGluZyBTbmFwc2hvdCBDbGllbnRJbmZvXCIsbyl9aS5zdHJlYW1JbmZvPXRoaXMueFIua2soKSxpLnRyYWZmaWM9W107dmFyIHM9bmV3IGhpdmUuc25hcHNob3RzLlRyYWZmaWNLZXk7aWYoaS50cmFmZmljLnB1c2goe2tleTpzLHZhbHVlOnRoaXMuQlIudWt9KSx0aGlzLkJSLmxrLmZvckVhY2goZnVuY3Rpb24odCxlKXt2YXIgcj1uZXcgaGl2ZS5zbmFwc2hvdHMuVHJhZmZpY0tleTtyLmJpdHJhdGU9ZSxpLnRyYWZmaWMucHVzaCh7a2V5OnIsdmFsdWU6dH0pfSksaS5tZXRyaWNzPXRoaXMuQlIubWV0cmljcyx0aGlzLlRrJiYoaS5tZXRyaWNzLmNsaWVudEJ1ZmZlck1zPXRoaXMuVGsubWluKCkpLGkucGxheWVyPXRoaXMuQlIucGxheWVyLHRoaXMuQ2spe3ZhciBjPXRoaXMuQ2suZ2V0UGFydG5lclNuYXBzaG90cygpO2MuZm9yRWFjaChmdW5jdGlvbihlLHIpe3QuT2socixlLGkpfSksdGhpcy5CUi5may5maWx0ZXIoZnVuY3Rpb24odCxlKXtyZXR1cm4hYy5oYXMoZSl9KS5mb3JFYWNoKGZ1bmN0aW9uKGUscil7dC5PayhyLGUsaSl9KX1yZXR1cm4gaS5jb25uSW5mbz1uZXcgaGl2ZS5zbmFwc2hvdHMuQ29ubmVjdGl2aXR5SW5mbyx0aGlzLnRuLlBuKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gaS5jb25uSW5mby5wcml2YXRlSXA9ZS5ObigpLkJuKCksdC5QayhpKX0pLmZhaWwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuUGsoaSl9KX0saS5wcm90b3R5cGUuUGs9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29ubkluZm8uaW50ZXJuYWxBcz10aGlzLnZrLHQuY29ubkluZm8uZXh0ZXJuYWxBcz10aGlzLnlrLHQuY29ubkluZm8ucHVibGljSXA9dGhpcy5Bayx0fSxpLnByb3RvdHlwZS5Saz1mdW5jdGlvbigpe3ZhciB0O3N3aXRjaCh0aGlzLmFwcC5hcHApe2Nhc2VcIkpTXCI6dD1DbGllbnRUeXBlLkZmO2JyZWFrO2Nhc2VcIlBST1hZXCI6dD1DbGllbnRUeXBlLl9mO2JyZWFrO2RlZmF1bHQ6dD1DbGllbnRUeXBlLkJmfXJldHVybiB0fSxpLnByb3RvdHlwZS5Paz1mdW5jdGlvbih0LGUsaSl7dmFyIHI9dGhpcy5CUi5kay5nZXQodCk7ZS50cmFmZmljPXIsaS5wYXJ0bmVyc3x8KGkucGFydG5lcnM9W10pO3ZhciBuPW5ldyBoaXZlLnNuYXBzaG90cy5QYXJ0bmVyS2V5O24ucGFydG5lckd1aWQ9dCxpLnBhcnRuZXJzLnB1c2goe2tleTpuLHZhbHVlOmV9KX0saS5wcm90b3R5cGUuQ1I9ZnVuY3Rpb24odCxlKXt0PjAmJih0aGlzLkJSLm1ldHJpY3MudmlkZW9CdWZOKyssdGhpcy5CUi5tZXRyaWNzLnZpZGVvQnVmUXQrPXQsdGhpcy5CUi5wbGF5ZXIuYnVmZmVyaW5nTisrLHRoaXMuQlIucGxheWVyLmJ1ZmZlcmluZ01zKz10KSx0aGlzLkJSLnBsYXllci5wbGF5ZXJCdWZmZXJNcz1lfSxpLnByb3RvdHlwZS5IUj1mdW5jdGlvbigpe3JldHVybiB0aGlzLkJSLnVrfSxpLnByb3RvdHlwZS5Oaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLlNrLnVrfSxpLnByb3RvdHlwZS54az1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5Tay5say5oYXModCl8fHRoaXMuU2subGsuc2V0KHQsbmV3IGhpdmUuc25hcHNob3RzLlRyYWZmaWMpLHRoaXMuU2subGsuZ2V0KHQpfSxpLnByb3RvdHlwZS5fUj1mdW5jdGlvbih0KXtpZighdGhpcy5CUi5say5oYXModCkpe3ZhciBlPW5ldyBoaXZlLnNuYXBzaG90cy5UcmFmZmljO3RoaXMuYmsoZSksdGhpcy5CUi5say5zZXQodCxlKX1yZXR1cm4gdGhpcy5CUi5say5nZXQodCl9LGkucHJvdG90eXBlLkJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZGsuaGFzKHQpfHxlLmRrLnNldCh0LG5ldyBoaXZlLnNuYXBzaG90cy5QYXJ0bmVyVHJhZmZpYyksZS5kay5nZXQodCl9LGkucHJvdG90eXBlLkZrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkJrKHQsdGhpcy5CUil9LGkucHJvdG90eXBlLl9rPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkJrKHQsdGhpcy5Tayl9LGkucHJvdG90eXBlLkRrPWZ1bmN0aW9uKHQpe3RoaXMudG49dH0saS5wcm90b3R5cGUuSGs9ZnVuY3Rpb24odCl7dGhpcy5Daz10fSxpLnByb3RvdHlwZS5qbj1mdW5jdGlvbih0KXt9LGl9KCk7dC56Zj1yO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuTGs9aXNOYU4obC5IaXZlQ29uZmlnLkRlYnVnTG9ncy5NZXRyaWNTbmFwc2hvdExvZ3MpPzA6bC5IaXZlQ29uZmlnLkRlYnVnTG9ncy5NZXRyaWNTbmFwc2hvdExvZ3MsdGhpcy5zdGF0ZT11LkZvLkJvLHRoaXMuY2xpZW50PWEuRnJhbWV3b3JrLnJlc29sdmUoYy5naS5CZSksdGhpcy5YYT1uZXcgby5FYSx0aGlzLnByb3RvY29sPW5ldyBvLiRhKHRoaXMuWGEpfXJldHVybiB0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHQsaSl7dGhpcy5tPWEuRnJhbWV3b3JrLnJlc29sdmUoYS5GcmFtZXdvcmsuRmUud2UpLmxvZyhpKSx0aGlzLm0uZGVidWcoZStcIiBJTklUIENMSUVOVCBTVEFUU1wiKSx0aGlzLlZmPXQsdGhpcy5NaygpfSx0LnByb3RvdHlwZS5Naz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5qaz4tMSYmYS5GcmFtZXdvcmsuY2xlYXJJbnRlcnZhbCh0aGlzLmprKSx0aGlzLmprPWEuRnJhbWV3b3JrLnNldEludGVydmFsKGZ1bmN0aW9uKCl7dC5VaygpfSxoLktuLkpuLlBvKX0sdC5wcm90b3R5cGUuQ2k9ZnVuY3Rpb24odCl7dGhpcy5zdGF0ZT10fSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe2EuRnJhbWV3b3JrLmNsZWFySW50ZXJ2YWwodGhpcy5qayksdGhpcy5WZiYmdGhpcy5WZi5taygpfSx0LnByb3RvdHlwZS5Vaz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5tLmRlYnVnKFwiW1NOQVBdIFRBS0lORyBTTkFQU0hPVFwiKTt2YXIgZT10aGlzLlZmLklrKCk7ZS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LmZvcndhcmQoZSl9KS5mYWlsKGZ1bmN0aW9uKGUpe3QubS53YXJuKFwiW1NOQVBdIEVSUk9SIEZPUldBUkRJTkcgU05BUFNIT1RcIixlKX0pW1wiZmluYWxseVwiXShmdW5jdGlvbigpe3QuVmYucmVzZXQoKX0pfSx0LnByb3RvdHlwZS5mb3J3YXJkPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXM7aWYodGhpcy5zdGF0ZT09PXUuRm8uSURMRSlyZXR1cm4gdm9pZCB0aGlzLm0uZGVidWcoZStcIiBub3Qgc2VuZCAtIHN0YXRlIGlkbGVcIik7aWYodGhpcy5jbGllbnQmJnRoaXMuY2xpZW50LlhuKCkpe3N3aXRjaCh0aGlzLkxrKXtjYXNlIDA6ZGVmYXVsdDp0aGlzLm0uZGVidWcoZStcIiBTRU5ESU5HIFNOQVBTSE9UXCIpO2JyZWFrO2Nhc2UgMTp0aGlzLm0uZGVidWcoZStcIiBTRU5ESU5HIFNOQVBTSE9UIFwiK0pTT04uc3RyaW5naWZ5KHQpKTticmVhaztjYXNlIDI6dGhpcy5tLmRlYnVnKGUrXCIgU0VORElORyBTTkFQU0hPVFwiLHQpO2JyZWFrO2Nhc2UgMzp0aGlzLm0uZGVidWcoZStcIiBTRU5ESU5HIFNOQVBTSE9UIFwiK0pTT04uc3RyaW5naWZ5KHQpLHQpfXRoaXMucHJvdG9jb2wucGMoXCJTTkFQU0hPVFwiLG8uTHMuVnMsMCksdC53cml0ZSh0aGlzLnByb3RvY29sKSx0aGlzLnByb3RvY29sLmRjKCk7dmFyIHI9dGhpcy5YYS5IYSgpLG49dGhpcy5WayhyLFwiLFwiLDQpLHM9ci5zbGljZShuKzEsci5sZW5ndGgtMSksYT1uZXcgcC5abihTZXJ2aWNlcy50bywxLHMpO3RoaXMuY2xpZW50LlhuKCkuc2VuZChhKS5mYWlsKGZ1bmN0aW9uKHQpe2kubS53YXJuKGUrXCIgUFJPQkxFTTogXCIsdCl9KX19LHQucHJvdG90eXBlLlZrPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdC5zcGxpdChlLGkpLmpvaW4oZSkubGVuZ3RofSx0fSgpO3QuZW89c30ocz1lLlN0YXRzfHwoZS5TdGF0cz17fSkpfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9aSgxKSxuPWkoNCksbz1pKDIpLHM9aSg1KSxhPWkoNTgpLGM9aSg1NCksaD1pKDY1KSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuUWs9bnVsbCx0aGlzLnFrPW51bGwsdGhpcy5Kaz1udWxsLHRoaXMuS2s9bnVsbCx0aGlzLkdrPW5ldyBuLnZlLHRoaXMucHVibGljSXA9bnVsbCx0aGlzLnprPVtdLHRoaXMuX2k9ITEsdGhpcy5Xaz1udWxsLHRoaXMubT1vLkZyYW1ld29yay5yZXNvbHZlKG8uRnJhbWV3b3JrLkZlLndlKS5sb2coKSx0aGlzLmlrPW8uRnJhbWV3b3JrLnJlc29sdmUocy5naS5oaSksdGhpcy4kaz1uZXcgYy5oayx0aGlzLllrPVtdLHRoaXMuWGsoKX1yZXR1cm4gdC5wcm90b3R5cGUuWGs9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO28uRnJhbWV3b3JrLnNldEludGVydmFsKGZ1bmN0aW9uKCl7dC56az1bXSx0LllrPVtdLHQuR2s9bmV3IG4udmUsdC5wdWJsaWNJcD1udWxsLHQuWms9bnVsbH0sMTJlNCl9LHQucHJvdG90eXBlLlBuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWmt8fCh0aGlzLlprPXRoaXMudEMoKSksdGhpcy5aa30sdC5wcm90b3R5cGUudEM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9ci5kZWZlcigpO2lmKHRoaXMuV2s9by5GcmFtZXdvcmsuc2V0VGltZW91dChmdW5jdGlvbigpe2UucmVqZWN0KHtlQzohMCxtZXNzYWdlOlwiZXhwaXJlZFwifSl9LDRlMyksdGhpcy5pQygpKXRyeXt0aGlzLlFrPW5ldyBSVENQZWVyQ29ubmVjdGlvbihudWxsKSx0aGlzLkprPXRoaXMuUWsuY3JlYXRlRGF0YUNoYW5uZWwoXCJzZW5kQ2hhbm5lbFwiLHtyZWxpYWJsZTohMX0pLHRoaXMucWs9bmV3IFJUQ1BlZXJDb25uZWN0aW9uKG51bGwpLHRoaXMucWsub25kYXRhY2hhbm5lbD1mdW5jdGlvbihpKXt0LktrPWkuY2hhbm5lbCx0LktrLm9ub3Blbj1mdW5jdGlvbihpKXtcIm9wZW5cIj09PXQuS2sucmVhZHlTdGF0ZSYmKHQubS5kZWJ1ZyhcIkNvbGxlY3RlZCBpcHMgW1wiK3QuR2sua2V5cygpLmpvaW4oXCIsIFwiKStcIl1cIiksdC5xay5jbG9zZSgpLHQuJGsubmsoKS50aGVuKGZ1bmN0aW9uKGUpe3QuWWs9ZSx0Lm0uZGVidWcoXCJBbHJlYWR5IGtub3duIG1hdGNoaW5nIGlwcyBbXCIrdC5Zay5qb2luKFwiLFwiKStcIl1cIik7dmFyIGk9dC5Hay5rZXlzKCk7dC5Zay5mb3JFYWNoKGZ1bmN0aW9uKGUpe2kuaW5kZXhPZihlKT4wJiYodC56ay5wdXNoKGUpLHQuR2tbXCJkZWxldGVcIl0oZSkpfSksdC5Hay5rZXlzKCkuZm9yRWFjaChmdW5jdGlvbihlKXt0LnprLnB1c2goZSl9KX0pLmZhaWwoZnVuY3Rpb24oZSl7dC5tLndhcm4oXCJHZXQgUHJldmlvdXMgd29ya2luZyBpcHMgZmFpbGVkIHdpdGggZXJyb3IgXCIrZS5tZXNzYWdlKSx0LkdrLmtleXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuemsucHVzaChlKX0pfSlbXCJmaW5hbGx5XCJdKGZ1bmN0aW9uKCl7dC5tLmRlYnVnKFwiRmluYWwgcHJpdmF0ZSBpcCBsaXN0IFtcIit0LnprLmpvaW4oXCIsXCIpK1wiXVwiKSxlLnJlc29sdmUodC5yQygpKX0pKX19LHRoaXMuUWsub25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24oaSl7aS5jYW5kaWRhdGUmJnQuemIoaS5jYW5kaWRhdGUuY2FuZGlkYXRlKSwhaS5jYW5kaWRhdGV8fHQucWsuYWRkSWNlQ2FuZGlkYXRlKGkuY2FuZGlkYXRlKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGkpe2UucmVqZWN0KHtlQzohMCxtZXNzYWdlOmkubWVzc2FnZX0pLG8uRnJhbWV3b3JrLmNsZWFyVGltZW91dCh0LldrKSxjb25zb2xlLmxvZyhcIkVycm9yOiBGYWlsdXJlIGR1cmluZyBhZGRJY2VDYW5kaWRhdGUoKVwiKX0pfSx0aGlzLnFrLm9uaWNlY2FuZGlkYXRlPWZ1bmN0aW9uKGkpe2kuY2FuZGlkYXRlJiZ0LnpiKGkuY2FuZGlkYXRlLmNhbmRpZGF0ZSksIWkuY2FuZGlkYXRlfHx0LlFrLmFkZEljZUNhbmRpZGF0ZShpLmNhbmRpZGF0ZSlbXCJjYXRjaFwiXShmdW5jdGlvbihpKXtlLnJlamVjdCh7ZUM6ITAsbWVzc2FnZTppLm1lc3NhZ2V9KSxvLkZyYW1ld29yay5jbGVhclRpbWVvdXQodC5XayksY29uc29sZS5sb2coXCJFcnJvcjogRmFpbHVyZSBkdXJpbmcgYWRkSWNlQ2FuZGlkYXRlKClcIil9KX0sdGhpcy5Ray5jcmVhdGVPZmZlcigpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQuUWsuc2V0TG9jYWxEZXNjcmlwdGlvbihlKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC5xay5zZXRSZW1vdGVEZXNjcmlwdGlvbih0LlFrLmxvY2FsRGVzY3JpcHRpb24pfSkudGhlbihmdW5jdGlvbigpe3JldHVybiB0LnFrLmNyZWF0ZUFuc3dlcigpfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5xay5zZXRMb2NhbERlc2NyaXB0aW9uKGUpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiB0LlFrLnNldFJlbW90ZURlc2NyaXB0aW9uKHQucWsubG9jYWxEZXNjcmlwdGlvbil9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKGkpe2UucmVqZWN0KHtlQzohMCxtZXNzYWdlOmkubWVzc2FnZX0pLG8uRnJhbWV3b3JrLmNsZWFyVGltZW91dCh0LldrKSxjb25zb2xlLmxvZyhcIkVycm9yOiBGYWlsdXJlIGNyZWF0aW5nIG9mZmVyXCIpfSl9Y2F0Y2goaSl7ZS5yZWplY3Qoe2VDOiEwLG1lc3NhZ2U6aS5tZXNzYWdlfSl9ZWxzZSBvLkZyYW1ld29yay5jbGVhclRpbWVvdXQodGhpcy5XayksZS5yZWplY3Qoe2VDOiExLG1lc3NhZ2U6XCJ3ZWJydGMgZGF0YWNoYW5uZWwgbm90IHN1cHBvcnRlZFwifSk7cmV0dXJuIGUudnR9LHQucHJvdG90eXBlLmlDPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBudWxsIT1oLlhlJiZudWxsIT1oLm5DJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuZXcgUlRDUGVlckNvbm5lY3Rpb24obnVsbCxudWxsKS5jcmVhdGVEYXRhQ2hhbm5lbH1jYXRjaCh0KXtyZXR1cm4hMX19LHQucHJvdG90eXBlLnpiPWZ1bmN0aW9uKHQpe3ZhciBlPS8oWzAtOV17MSwzfShcXC5bMC05XXsxLDN9KXszfSkvLGk9ZS5leGVjKHQpO2lmKGkpe3ZhciByPWlbMF07dGhpcy5Hay5zZXQociwhMCl9fSx0LnByb3RvdHlwZS5yQz1mdW5jdGlvbigpe3ZhciB0PW5ldyBhLm9DO3JldHVybiB0aGlzLnprLmxlbmd0aD4wJiZ0LnNDKHRoaXMuemtbMF0pLHRoaXMucHVibGljSXAmJnQuYUModGhpcy5wdWJsaWNJcCksdGhpcy5pay5KUih0KSx0aGlzLmlrfSx0LnByb3RvdHlwZS5yaz1mdW5jdGlvbih0LGUsaSl7aWYodGhpcy5wdWJsaWNJcD10LHRoaXMuY0MoKSwwPT09aSYmdGhpcy56ay5sZW5ndGg+MSl0aGlzLnprLnNoaWZ0KCk7ZWxzZSBpZigwIT09aSYmdGhpcy5Zay5pbmRleE9mKHRoaXMuemtbMF0pPT0tMSl0aGlzLllrLnVuc2hpZnQodGhpcy56a1swXSksdGhpcy4kay5jayh0aGlzLllrLnNsaWNlKDAsMikpO2Vsc2UgaWYoMCE9PWkmJnRoaXMuWWsuaW5kZXhPZih0aGlzLnprWzBdKT4wKXt2YXIgcj10aGlzLllrLmluZGV4T2YodGhpcy56a1swXSk7dGhpcy5Zaz10aGlzLllrLnNwbGljZShyLDEpLHRoaXMuWWsudW5zaGlmdCh0aGlzLnprWzBdKSx0aGlzLiRrLmNrKHRoaXMuWWsuc2xpY2UoMCwyKSl9dGhpcy5yQygpfSx0LnByb3RvdHlwZS5jQz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuemsuaW5kZXhPZih0aGlzLnB1YmxpY0lwKTt0Pi0xJiZ0aGlzLnprLnNwbGljZSh0LDEpfSx0fSgpO2UuTVI9cH0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmFDPWZ1bmN0aW9uKHQpe3RoaXMucHVibGljSXA9dH0sdC5wcm90b3R5cGUueG49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdWJsaWNJcH0sdC5wcm90b3R5cGUuaEM9ZnVuY3Rpb24odCl7dGhpcy5wQz10fSx0LnByb3RvdHlwZS5Mbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBDfSx0LnByb3RvdHlwZS51Qz1mdW5jdGlvbih0KXt0aGlzLm5pYz10fSx0LnByb3RvdHlwZS5Ebj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5pY30sdC5wcm90b3R5cGUubEM9ZnVuY3Rpb24odCl7dGhpcy5uaWNOYW1lPXR9LHQucHJvdG90eXBlLkhuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmljTmFtZX0sdC5wcm90b3R5cGUuc0M9ZnVuY3Rpb24odCl7dGhpcy5wcml2YXRlSXA9dH0sdC5wcm90b3R5cGUuQm49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcml2YXRlSXB9LHQucHJvdG90eXBlLmRDPWZ1bmN0aW9uKHQpe3RoaXMubmV0bWFzaz10fSx0LnByb3RvdHlwZS5mQz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5ldG1hc2t9LHQucHJvdG90eXBlLmdDPWZ1bmN0aW9uKHQpe3RoaXMudkM9dH0sdC5wcm90b3R5cGUuX249ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sdH0oKTtlLm9DPWl9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpKXt0aGlzLmlzTGl2ZT10LHRoaXMucHJvdG9jb2w9ZSx0aGlzLnlDPWl9cmV0dXJuIHQucHJvdG90eXBlLmtrPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGhpdmUuc25hcHNob3RzLlN0cmVhbUluZm87cmV0dXJuIHQuc3RyZWFtVHlwZT10aGlzLmlzTGl2ZT9TdHJlYW1UeXBlLkxJVkU6U3RyZWFtVHlwZS5QZix0LnN0cmVhbVByb3RvY29sPXRoaXMucHJvdG9jb2wsdC51cmw9dGhpcy55Qyx0fSx0fSgpO2UuTlI9aX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2koMjkpO3ZhciByPWkoMSksbj1pKDQpLG89bi52ZSxzPWkoMiksYT1pKDIwKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmlvPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHRoaXMubUM9dH1yZXR1cm4gdH0oKSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMud0M9bmV3IG8sdGhpcy5tPShzLkZyYW1ld29yay5yZXNvbHZlKHMuRnJhbWV3b3JrLkZlLndlKXx8Y29uc29sZSkubG9nKCksdGhpcy5tLmRlYnVnKFwiSU5JVCBUSUNLRVQgUkVTT0xWRVJcIil9cmV0dXJuIHQucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMsbz1yLmRlZmVyKCk7cmV0dXJuIHQmJih0Lm9uKFNlcnZpY2VzLmtmLDAsZnVuY3Rpb24odCl7bi5UQyh0KX0pLHQub24oU2VydmljZXMua2YsMixmdW5jdGlvbih0KXtuLlRDKHQpfSksdGhpcy53Qy5zZXQoZSxuZXcgYyhvKSkpLG8udnR9LHQucHJvdG90eXBlLlRDPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT0obmV3IERhdGUpLmdldFRpbWUoKSxyPUpTT04ucGFyc2UodC5tc2cpLG49ITE7dGhpcy53Qy5mb3JFYWNoKGZ1bmN0aW9uKHQsbyl7aWYoZS5TQyhvLHIpKXtuPSEwO3ZhciBzPWUuJGwobyxyKTtzPyhzLmlvPXQuaW8scy5ybz1pLHQubUMucmVzb2x2ZShzKSk6dC5tQy5yZWplY3QoXCJUaWNrZXQgdmVyaWZpY2F0aW9uIGZhaWxlZFwiKSxlLndDW1wiZGVsZXRlXCJdKHMpfX0pLG58fHRoaXMubS53YXJuKFwibm8gcGVuZGluZyB0aWNrZXQgbWF0Y2hpbmc6IFwiK3QubXNnKX0sdC5wcm90b3R5cGUuR289ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFJlZ0V4cChcIl5odHRwcz86Ly9hcGkoPzotdGVzdCk/LmhpdmVzdHJlYW1pbmcuY29tL3YxL2V2ZW50cy8oPzp3aWxkY2FyZC8pP1wiKTtpZihlLnRlc3QodCkpe3ZhciBpPXRoaXMuYkMoKTtyZXR1cm4gaS5LaCh0KSxpfXJldHVybiBudWxsfSx0LnByb3RvdHlwZS5iQz1mdW5jdGlvbigpe3JldHVybiBuZXcgYS5hcH0sdC5wcm90b3R5cGUuU0M9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5ibigpPT09ZVthLmFwLm9wXSYmdC5FbigpPT09ZVthLmFwLm5wXSYmdC5lcygpPT09ZVthLmFwLnNwXX0sdC5wcm90b3R5cGUuJGw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5VaChlKSx0LlFoKCk/dDpudWxsfSx0fSgpO2UuVVI9aH0sZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuY3JlYXRlP3QudD1mdW5jdGlvbih0LGUpe3QuRUM9ZSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxBZzohMSxQZzohMCxOZzohMH19KX06dC50PWZ1bmN0aW9uKHQsZSl7dC5FQz1lO3ZhciBpPWZ1bmN0aW9uKCl7fTtpLnByb3RvdHlwZT1lLnByb3RvdHlwZSx0LnByb3RvdHlwZT1uZXcgaSx0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10fX0sZnVuY3Rpb24odCxlKXt0LnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNvcHkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZmlsbCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5yZWFkVUludDh9fSxmdW5jdGlvbih0LGUsaSl7ZnVuY3Rpb24gcih0LGkpe3ZhciByPXtJQzpbXSxSQzpvfTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD49MyYmKHIua0M9YXJndW1lbnRzWzJdKSxhcmd1bWVudHMubGVuZ3RoPj00JiYoci5DQz1hcmd1bWVudHNbM10pLGYoaSk/ci5PQz1pOmkmJmUuUEMocixpKSxUKHIuT0MpJiYoci5PQz0hMSksVChyLmtDKSYmKHIua0M9MiksVChyLkNDKSYmKHIuQ0M9ITEpLFQoci5BQykmJihyLkFDPSEwKSxyLkNDJiYoci5SQz1uKSxhKHIsdCxyLmtDKX1mdW5jdGlvbiBuKHQsZSl7dmFyIGk9ci5OQ1tlXTtyZXR1cm4gaT9cIlx1MDAxYltcIityLkNDW2ldWzBdK1wibVwiK3QrXCJcdTAwMWJbXCIrci5DQ1tpXVsxXStcIm1cIjp0fWZ1bmN0aW9uIG8odCxlKXtyZXR1cm4gdH1mdW5jdGlvbiBzKHQpe3ZhciBlPXt9O3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCxpKXtlW3RdPSEwfSksZX1mdW5jdGlvbiBhKHQsaSxyKXtpZih0LkFDJiZpJiZSKGkuZ3QpJiZpLmd0IT09ZS5ndCYmKCFpLmNvbnN0cnVjdG9yfHxpLmNvbnN0cnVjdG9yLnByb3RvdHlwZSE9PWkpKXt2YXIgbj1pLmd0KHIsdCk7cmV0dXJuIG0obil8fChuPWEodCxuLHIpKSxufXZhciBvPWModCxpKTtpZihvKXJldHVybiBvO3ZhciBmPU9iamVjdC5rZXlzKGkpLGc9cyhmKTtpZih0Lk9DJiYoZj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhpKSksSShpKSYmKGYuaW5kZXhPZihcIm1lc3NhZ2VcIik+PTB8fGYuaW5kZXhPZihcImRlc2NyaXB0aW9uXCIpPj0wKSlyZXR1cm4gaChpKTtpZigwPT09Zi5sZW5ndGgpe2lmKFIoaSkpe3ZhciB2PWkubmFtZT9cIjogXCIraS5uYW1lOlwiXCI7cmV0dXJuIHQuUkMoXCJbRnVuY3Rpb25cIit2K1wiXVwiLFwic3BlY2lhbFwiKX1pZihTKGkpKXJldHVybiB0LlJDKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpKSxcInJlZ2V4cFwiKTtpZihFKGkpKXJldHVybiB0LlJDKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaSksXCJkYXRlXCIpO2lmKEkoaSkpcmV0dXJuIGgoaSl9dmFyIHk9XCJcIix3PSExLFQ9W1wie1wiLFwifVwiXTtpZihkKGkpJiYodz0hMCxUPVtcIltcIixcIl1cIl0pLFIoaSkpe3ZhciBiPWkubmFtZT9cIjogXCIraS5uYW1lOlwiXCI7eT1cIiBbRnVuY3Rpb25cIitiK1wiXVwifWlmKFMoaSkmJih5PVwiIFwiK1JlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpKSksRShpKSYmKHk9XCIgXCIrRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbChpKSksSShpKSYmKHk9XCIgXCIraChpKSksMD09PWYubGVuZ3RoJiYoIXd8fDA9PWkubGVuZ3RoKSlyZXR1cm4gVFswXSt5K1RbMV07aWYocjwwKXJldHVybiBTKGkpP3QuUkMoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGkpLFwicmVnZXhwXCIpOnQuUkMoXCJbT2JqZWN0XVwiLFwic3BlY2lhbFwiKTt0LklDLnB1c2goaSk7dmFyIGs7cmV0dXJuIGs9dz9wKHQsaSxyLGcsZik6Zi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHUodCxpLHIsZyxlLHcpfSksdC5JQy5wb3AoKSxsKGsseSxUKX1mdW5jdGlvbiBjKHQsZSl7aWYoVChlKSlyZXR1cm4gdC5SQyhcInVuZGVmaW5lZFwiLFwidW5kZWZpbmVkXCIpO2lmKG0oZSkpe3ZhciBpPVwiJ1wiK0pTT04uc3RyaW5naWZ5KGUpLnJlcGxhY2UoL15cInxcIiQvZyxcIlwiKS5yZXBsYWNlKC8nL2csXCJcXFxcJ1wiKS5yZXBsYWNlKC9cXFxcXCIvZywnXCInKStcIidcIjtyZXR1cm4gdC5SQyhpLFwic3RyaW5nXCIpfXJldHVybiB5KGUpP3QuUkMoXCJcIitlLFwibnVtYmVyXCIpOmYoZSk/dC5SQyhcIlwiK2UsXCJib29sZWFuXCIpOmcoZSk/dC5SQyhcIm51bGxcIixcIm51bGxcIik6dm9pZCAwfWZ1bmN0aW9uIGgodCl7cmV0dXJuXCJbXCIrRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkrXCJdXCJ9ZnVuY3Rpb24gcCh0LGUsaSxyLG4pe2Zvcih2YXIgbz1bXSxzPTAsYT1lLmxlbmd0aDtzPGE7KytzKUEoZSxTdHJpbmcocykpP28ucHVzaCh1KHQsZSxpLHIsU3RyaW5nKHMpLCEwKSk6by5wdXNoKFwiXCIpO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24obil7bi5tYXRjaCgvXlxcZCskLyl8fG8ucHVzaCh1KHQsZSxpLHIsbiwhMCkpfSksb31mdW5jdGlvbiB1KHQsZSxpLHIsbixvKXt2YXIgcyxjLGg7aWYoaD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbil8fHt2YWx1ZTplW25dfSxoLmdldD9jPWguc2V0P3QuUkMoXCJbR2V0dGVyL1NldHRlcl1cIixcInNwZWNpYWxcIik6dC5SQyhcIltHZXR0ZXJdXCIsXCJzcGVjaWFsXCIpOmguc2V0JiYoYz10LlJDKFwiW1NldHRlcl1cIixcInNwZWNpYWxcIikpLEEocixuKXx8KHM9XCJbXCIrbitcIl1cIiksY3x8KHQuSUMuaW5kZXhPZihoLnZhbHVlKTwwPyhjPWcoaSk/YSh0LGgudmFsdWUsbnVsbCk6YSh0LGgudmFsdWUsaS0xKSxjLmluZGV4T2YoXCJcXG5cIik+LTEmJihjPW8/Yy5zcGxpdChcIlxcblwiKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCIgIFwiK3R9KS5qb2luKFwiXFxuXCIpLnN1YnN0cigyKTpcIlxcblwiK2Muc3BsaXQoXCJcXG5cIikubWFwKGZ1bmN0aW9uKHQpe3JldHVyblwiICAgXCIrdH0pLmpvaW4oXCJcXG5cIikpKTpjPXQuUkMoXCJbQ2lyY3VsYXJdXCIsXCJzcGVjaWFsXCIpKSxUKHMpKXtpZihvJiZuLm1hdGNoKC9eXFxkKyQvKSlyZXR1cm4gYztzPUpTT04uc3RyaW5naWZ5KFwiXCIrbikscy5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLyk/KHM9cy5zdWJzdHIoMSxzLmxlbmd0aC0yKSxzPXQuUkMocyxcIm5hbWVcIikpOihzPXMucmVwbGFjZSgvJy9nLFwiXFxcXCdcIikucmVwbGFjZSgvXFxcXFwiL2csJ1wiJykucmVwbGFjZSgvKF5cInxcIiQpL2csXCInXCIpLHM9dC5SQyhzLFwic3RyaW5nXCIpKX1yZXR1cm4gcytcIjogXCIrY31mdW5jdGlvbiBsKHQsZSxpKXt2YXIgcj0wLG49dC5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gcisrLGUuaW5kZXhPZihcIlxcblwiKT49MCYmcisrLHQrZS5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZyxcIlwiKS5sZW5ndGgrMX0sMCk7cmV0dXJuIG4+NjA/aVswXSsoXCJcIj09PWU/XCJcIjplK1wiXFxuIFwiKStcIiBcIit0LmpvaW4oXCIsXFxuICBcIikrXCIgXCIraVsxXTppWzBdK2UrXCIgXCIrdC5qb2luKFwiLCBcIikrXCIgXCIraVsxXX1mdW5jdGlvbiBkKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpfWZ1bmN0aW9uIGYodCl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGcodCl7cmV0dXJuIG51bGw9PT10fWZ1bmN0aW9uIHYodCl7cmV0dXJuIG51bGw9PXR9ZnVuY3Rpb24geSh0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdH1mdW5jdGlvbiBtKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIHcodCl7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIHR9ZnVuY3Rpb24gVCh0KXtyZXR1cm4gdm9pZCAwPT09dH1mdW5jdGlvbiBTKHQpe3JldHVybiBiKHQpJiZcIltvYmplY3QgUmVnRXhwXVwiPT09Qyh0KX1mdW5jdGlvbiBiKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dH1mdW5jdGlvbiBFKHQpe3JldHVybiBiKHQpJiZcIltvYmplY3QgRGF0ZV1cIj09PUModCl9ZnVuY3Rpb24gSSh0KXtyZXR1cm4gYih0KSYmKFwiW29iamVjdCBFcnJvcl1cIj09PUModCl8fHQgaW5zdGFuY2VvZiBFcnJvcil9ZnVuY3Rpb24gUih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGsodCl7cmV0dXJuIG51bGw9PT10fHxcImJvb2xlYW5cIj09dHlwZW9mIHR8fFwibnVtYmVyXCI9PXR5cGVvZiB0fHxcInN0cmluZ1wiPT10eXBlb2YgdHx8XCJzeW1ib2xcIj09dHlwZW9mIHR8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIEModCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1mdW5jdGlvbiBPKHQpe3JldHVybiB0PDEwP1wiMFwiK3QudG9TdHJpbmcoMTApOnQudG9TdHJpbmcoMTApfWZ1bmN0aW9uIFAoKXt2YXIgdD1uZXcgRGF0ZSxlPVtPKHQuZ2V0SG91cnMoKSksTyh0LmdldE1pbnV0ZXMoKSksTyh0LmdldFNlY29uZHMoKSldLmpvaW4oXCI6XCIpO3JldHVyblt0LmdldERhdGUoKSxGW3QuZ2V0TW9udGgoKV0sZV0uam9pbihcIiBcIil9ZnVuY3Rpb24gQSh0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX12YXIgTj0vJVtzZGolXS9nO2UuZm9ybWF0PWZ1bmN0aW9uKHQpe2lmKCFtKHQpKXtmb3IodmFyIGU9W10saT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspZS5wdXNoKHIoYXJndW1lbnRzW2ldKSk7cmV0dXJuIGUuam9pbihcIiBcIil9Zm9yKHZhciBpPTEsbj1hcmd1bWVudHMsbz1uLmxlbmd0aCxzPVN0cmluZyh0KS5yZXBsYWNlKE4sZnVuY3Rpb24odCl7aWYoXCIlJVwiPT09dClyZXR1cm5cIiVcIjtpZihpPj1vKXJldHVybiB0O3N3aXRjaCh0KXtjYXNlXCIlc1wiOnJldHVybiBTdHJpbmcobltpKytdKTtjYXNlXCIlZFwiOnJldHVybiBOdW1iZXIobltpKytdKTtjYXNlXCIlalwiOnRyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkobltpKytdKX1jYXRjaChlKXtyZXR1cm5cIltDaXJjdWxhcl1cIn1kZWZhdWx0OnJldHVybiB0fX0pLGE9bltpXTtpPG87YT1uWysraV0pcys9ZyhhKXx8IWIoYSk/XCIgXCIrYTpcIiBcIityKGEpO3JldHVybiBzfSxlLnhDPWZ1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gcigpe2lmKCFuKXtpZihwcm9jZXNzLnRocm93RGVwcmVjYXRpb24pdGhyb3cgbmV3IEVycm9yKGkpO3Byb2Nlc3MudHJhY2VEZXByZWNhdGlvbj9jb25zb2xlLnRyYWNlKGkpOmNvbnNvbGUuZXJyb3IoaSksbj0hMH1yZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9aWYoVChnbG9iYWwucHJvY2VzcykpcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUueEModCxpKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2lmKHByb2Nlc3Mubm9EZXByZWNhdGlvbj09PSEwKXJldHVybiB0O3ZhciBuPSExO3JldHVybiByfTt2YXIgeCxCPXt9O2UuQkM9ZnVuY3Rpb24odCl7aWYoVCh4KSYmKHg9cHJvY2Vzcy5PdC5OT0RFX0RFQlVHfHxcIlwiKSx0PXQudG9VcHBlckNhc2UoKSwhQlt0XSlpZihuZXcgUmVnRXhwKFwiXFxcXGJcIit0K1wiXFxcXGJcIixcImlcIikudGVzdCh4KSl7dmFyIGk9cHJvY2Vzcy5waWQ7Qlt0XT1mdW5jdGlvbigpe3ZhciByPWUuZm9ybWF0LmFwcGx5KGUsYXJndW1lbnRzKTtjb25zb2xlLmVycm9yKFwiJXMgJWQ6ICVzXCIsdCxpLHIpfX1lbHNlIEJbdF09ZnVuY3Rpb24oKXt9O3JldHVybiBCW3RdfSxlLmd0PXIsci5DQz17Ym9sZDpbMSwyMl0sRkM6WzMsMjNdLF9DOls0LDI0XSxpbnZlcnNlOls3LDI3XSxEQzpbMzcsMzldLEhDOls5MCwzOV0sTEM6WzMwLDM5XSxibHVlOlszNCwzOV0sTUM6WzM2LDM5XSxncmVlbjpbMzIsMzldLGpDOlszNSwzOV0scmVkOlszMSwzOV0sVUM6WzMzLDM5XX0sci5OQz17VkM6XCJjeWFuXCIsbnVtYmVyOlwieWVsbG93XCIsUUM6XCJ5ZWxsb3dcIix1bmRlZmluZWQ6XCJncmV5XCIscUM6XCJib2xkXCIsSkM6XCJncmVlblwiLHhUOlwibWFnZW50YVwiLEtDOlwicmVkXCJ9LGUuaXNBcnJheT1kLGUuT209ZixlLkFtPWcsZS5haz12LGUuTm09eSxlLnhtPW0sZS5HQz13LGUuQm09VCxlLnpDPVMsZS5vdj1iLGUuV0M9RSxlLiRDPUksZS5QbT1SLGUuWUM9ayxlLmlzQnVmZmVyPWkoNjIpO3ZhciBGPVtcIkphblwiLFwiRmViXCIsXCJNYXJcIixcIkFwclwiLFwiTWF5XCIsXCJKdW5cIixcIkp1bFwiLFwiQXVnXCIsXCJTZXBcIixcIk9jdFwiLFwiTm92XCIsXCJEZWNcIl07ZS5sb2c9ZnVuY3Rpb24oKXtjb25zb2xlLmxvZyhcIiVzIC0gJXNcIixQKCksZS5mb3JtYXQuYXBwbHkoZSxhcmd1bWVudHMpKX0sZS5xcz1pKDYxKSxlLlBDPWZ1bmN0aW9uKHQsZSl7aWYoIWV8fCFiKGUpKXJldHVybiB0O2Zvcih2YXIgaT1PYmplY3Qua2V5cyhlKSxyPWkubGVuZ3RoO3ItLTspdFtpW3JdXT1lW2lbcl1dO3JldHVybiB0fX0sZnVuY3Rpb24odCxlKXsoZnVuY3Rpb24oZSl7dC50PWV9KS5jYWxsKGUse30pfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7IWZ1bmN0aW9uKCl7dmFyIGU9aSgzKSxyPWUubG9nLG49ZS5yaTt0LnQucmk9bix0LnQuWGU9ZS5YZSx0LnQuWWU9ZS5ZZTt2YXIgbz1pKDY2KXx8bnVsbCxzPWkoNjgpfHxudWxsLGE9aSg3MCl8fG51bGwsYz1pKDcyKXx8bnVsbDtzd2l0Y2gobi50aSl7Y2FzZVwiY2hyb21lXCI6aWYoIW98fCFvLlhDKXJldHVybiB2b2lkIHIoXCJDaHJvbWUgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpO3IoXCJhZGFwdGVyLmpzIHNoaW1taW5nIGNocm9tZS5cIiksdC50Lm5DPW8sby5aQygpLG8udE8oKSxlLmVpKCksby5lTygpLG8uWEMoKSxvLmlPKCksby5yTygpO2JyZWFrO2Nhc2VcImZpcmVmb3hcIjppZighYXx8IWEuWEMpcmV0dXJuIHZvaWQgcihcIkZpcmVmb3ggc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpO3IoXCJhZGFwdGVyLmpzIHNoaW1taW5nIGZpcmVmb3guXCIpLHQudC5uQz1hLGEuWkMoKSxlLmVpKCksYS5lTygpLGEuWEMoKSxhLmlPKCk7YnJlYWs7Y2FzZVwiZWRnZVwiOmlmKCFzfHwhcy5YQylyZXR1cm4gdm9pZCByKFwiTVMgZWRnZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIik7cihcImFkYXB0ZXIuanMgc2hpbW1pbmcgZWRnZS5cIiksdC50Lm5DPXMscy5aQygpLGUuZWkoKSxzLlhDKCk7YnJlYWs7Y2FzZVwic2FmYXJpXCI6aWYoIWMpcmV0dXJuIHZvaWQgcihcIlNhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIik7cihcImFkYXB0ZXIuanMgc2hpbW1pbmcgc2FmYXJpLlwiKSx0LnQubkM9YyxjLlpDKCk7YnJlYWs7ZGVmYXVsdDpyKFwiVW5zdXBwb3J0ZWQgYnJvd3NlciFcIil9fSgpfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9aSgzKS5sb2csbj1pKDMpLnJpLG89e3RPOmZ1bmN0aW9uKCl7d2luZG93Lk1lZGlhU3RyZWFtPXdpbmRvdy5NZWRpYVN0cmVhbXx8d2luZG93LndlYmtpdE1lZGlhU3RyZWFtfSxpTzpmdW5jdGlvbigpe1wib2JqZWN0XCIhPXR5cGVvZiB3aW5kb3d8fCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb258fFwib250cmFja1wiaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJvbnRyYWNrXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5PfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm5PJiYodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLm5PKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhZGRzdHJlYW1cIix0aGlzLm9PKSksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLm5PPXQpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImFkZHN0cmVhbVwiLHRoaXMub089ZnVuY3Rpb24odCl7dC5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcImFkZHRyYWNrXCIsZnVuY3Rpb24oaSl7dmFyIHI9bmV3IEV2ZW50KFwidHJhY2tcIik7ci50cmFjaz1pLnRyYWNrLHIucmVjZWl2ZXI9e3RyYWNrOmkudHJhY2t9LHIuc089W3Quc3RyZWFtXSxlLmRpc3BhdGNoRXZlbnQocil9KSx0LnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBpPW5ldyBFdmVudChcInRyYWNrXCIpO2kudHJhY2s9ZSxpLnJlY2VpdmVyPXt0cmFjazplfSxpLnNPPVt0LnN0cmVhbV0sdGhpcy5kaXNwYXRjaEV2ZW50KGkpfS5iaW5kKHRoaXMpKX0uYmluZCh0aGlzKSl9fSl9LHJPOmZ1bmN0aW9uKCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uJiYhKFwiZ2V0U2VuZGVyc1wiaW4gUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSYmXCJjcmVhdGVEVE1GU2VuZGVyXCJpbiBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpe1JUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYU99O3ZhciB0PVJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0sZT1SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO1JUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcztpLmFPPWkuYU98fFtdLHQuYXBwbHkoaSxbZV0pLGUuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXtpLmFPLnB1c2goe3RyYWNrOnQsZ2V0IGNPKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuaE8mJihcImF1ZGlvXCI9PT10LmtpbmQ/dGhpcy5oTz1pLmNyZWF0ZURUTUZTZW5kZXIodCk6dGhpcy5oTz1udWxsKSx0aGlzLmhPfX0pfSl9LFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24odCl7dmFyIGk9dGhpcztpLmFPPWkuYU98fFtdLGUuYXBwbHkoaSxbdF0pLHQuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1pLmFPLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2s9PT10fSk7ZSYmaS5hTy5zcGxpY2UoaS5hTy5pbmRleE9mKGUpLDEpfSl9fX0sZU86ZnVuY3Rpb24oKXtcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiYoIXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50fHxcInNyY09iamVjdFwiaW4gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlfHxPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLFwic3JjT2JqZWN0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBPfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5wTz10LHRoaXMuc3JjJiZVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuc3JjKSx0Pyh0aGlzLnNyYz1VUkwuY3JlYXRlT2JqZWN0VVJMKHQpLHQuYWRkRXZlbnRMaXN0ZW5lcihcImFkZHRyYWNrXCIsZnVuY3Rpb24oKXtlLnNyYyYmVVJMLnJldm9rZU9iamVjdFVSTChlLnNyYyksZS5zcmM9VVJMLmNyZWF0ZU9iamVjdFVSTCh0KX0pLHZvaWQgdC5hZGRFdmVudExpc3RlbmVyKFwicmVtb3ZldHJhY2tcIixmdW5jdGlvbigpe2Uuc3JjJiZVUkwucmV2b2tlT2JqZWN0VVJMKGUuc3JjKSxlLnNyYz1VUkwuY3JlYXRlT2JqZWN0VVJMKHQpfSkpOnZvaWQodGhpcy5zcmM9XCJcIil9fSkpfSxYQzpmdW5jdGlvbigpe3dpbmRvdy5SVENQZWVyQ29ubmVjdGlvbnx8KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbih0LGUpe3JldHVybiByKFwiUGVlckNvbm5lY3Rpb25cIiksdCYmdC51TyYmKHQubE89dC51TyksbmV3IHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKHQsZSl9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU9d2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sXCJnZW5lcmF0ZUNlcnRpZmljYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlfX0pKTt2YXIgdD1SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKGUsaSxyKXt2YXIgbj10aGlzLG89YXJndW1lbnRzO2lmKGFyZ3VtZW50cy5sZW5ndGg+MCYmXCJmdW5jdGlvblwiPT10eXBlb2YgZSlyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoMD09PXQubGVuZ3RoJiYoMD09PWFyZ3VtZW50cy5sZW5ndGh8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGFyZ3VtZW50c1swXSkpcmV0dXJuIHQuYXBwbHkodGhpcyxbXSk7dmFyIHM9ZnVuY3Rpb24odCl7dmFyIGU9e30saT10LnJlc3VsdCgpO3JldHVybiBpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGk9e2lkOnQuaWQsdGltZXN0YW1wOnQudGltZXN0YW1wLHR5cGU6e2RPOlwibG9jYWwtY2FuZGlkYXRlXCIsZk86XCJyZW1vdGUtY2FuZGlkYXRlXCJ9W3QudHlwZV18fHQudHlwZX07dC5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24oZSl7aVtlXT10LnN0YXQoZSl9KSxlW2kuaWRdPWl9KSxlfSxhPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgTWFwKE9iamVjdC5rZXlzKHQpLm1hcChmdW5jdGlvbihlKXtyZXR1cm5bZSx0W2VdXX0pKX07aWYoYXJndW1lbnRzLmxlbmd0aD49Mil7dmFyIGM9ZnVuY3Rpb24odCl7b1sxXShhKHModCkpKX07cmV0dXJuIHQuYXBwbHkodGhpcyxbYyxhcmd1bWVudHNbMF1dKX1yZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSxpKXt0LmFwcGx5KG4sW2Z1bmN0aW9uKHQpe2UoYShzKHQpKSl9LGldKX0pLnRoZW4oaSxyKX0sbi52ZXJzaW9uPDUxJiZbXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLFwiYWRkSWNlQ2FuZGlkYXRlXCJdLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdO1JUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cyxpPXRoaXMscj1uZXcgUHJvbWlzZShmdW5jdGlvbihyLG4pe2UuYXBwbHkoaSxbdFswXSxyLG5dKX0pO3JldHVybiB0Lmxlbmd0aDwyP3I6ci50aGVuKGZ1bmN0aW9uKCl7dFsxXS5hcHBseShudWxsLFtdKX0sZnVuY3Rpb24oZSl7dC5sZW5ndGg+PTMmJnRbMl0uYXBwbHkobnVsbCxbZV0pfSl9fSksbi52ZXJzaW9uPDUyJiZbXCJjcmVhdGVPZmZlclwiLFwiY3JlYXRlQW5zd2VyXCJdLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdO1JUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoYXJndW1lbnRzLmxlbmd0aDwxfHwxPT09YXJndW1lbnRzLmxlbmd0aCYmXCJvYmplY3RcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIGk9MT09PWFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzBdOnZvaWQgMDtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocixuKXtlLmFwcGx5KHQsW3IsbixpXSl9KX1yZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSksW1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixcImFkZEljZUNhbmRpZGF0ZVwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPVJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XTtSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPW5ldyhcImFkZEljZUNhbmRpZGF0ZVwiPT09dD9SVENJY2VDYW5kaWRhdGU6UlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pO3ZhciBlPVJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU7UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF0/ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6KGFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLmFwcGx5KG51bGwpLFByb21pc2UucmVzb2x2ZSgpKX19fTt0LnQ9e3RPOm8udE8saU86by5pTyxyTzpvLnJPLGVPOm8uZU8sWEM6by5YQyxaQzppKDY3KX19LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1pKDMpLmxvZyxuPWkoMykucmk7dC50PWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24odCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHR8fHQuZ098fHQub3B0aW9uYWwpcmV0dXJuIHQ7dmFyIGU9e307cmV0dXJuIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24oaSl7aWYoXCJyZXF1aXJlXCIhPT1pJiZcImFkdmFuY2VkXCIhPT1pJiZcIm1lZGlhU291cmNlXCIhPT1pKXt2YXIgcj1cIm9iamVjdFwiPT10eXBlb2YgdFtpXT90W2ldOnt2Tzp0W2ldfTt2b2lkIDAhPT1yLnlPJiZcIm51bWJlclwiPT10eXBlb2Ygci55TyYmKHIubWluPXIubWF4PXIueU8pO3ZhciBuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ/dCtlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSk6XCJkZXZpY2VJZFwiPT09ZT9cInNvdXJjZUlkXCI6ZX07aWYodm9pZCAwIT09ci52Tyl7ZS5vcHRpb25hbD1lLm9wdGlvbmFsfHxbXTt2YXIgbz17fTtcIm51bWJlclwiPT10eXBlb2Ygci52Tz8ob1tuKFwibWluXCIsaSldPXIudk8sZS5vcHRpb25hbC5wdXNoKG8pLG89e30sb1tuKFwibWF4XCIsaSldPXIudk8sZS5vcHRpb25hbC5wdXNoKG8pKToob1tuKFwiXCIsaSldPXIudk8sZS5vcHRpb25hbC5wdXNoKG8pKX12b2lkIDAhPT1yLnlPJiZcIm51bWJlclwiIT10eXBlb2Ygci55Tz8oZS5nTz1lLmdPfHx7fSxlLmdPW24oXCJcIixpKV09ci55Tyk6W1wibWluXCIsXCJtYXhcIl0uZm9yRWFjaChmdW5jdGlvbih0KXt2b2lkIDAhPT1yW3RdJiYoZS5nTz1lLmdPfHx7fSxlLmdPW24odCxpKV09clt0XSl9KX19KSx0Lm1PJiYoZS5vcHRpb25hbD0oZS5vcHRpb25hbHx8W10pLmNvbmNhdCh0Lm1PKSksZX0sZT1mdW5jdGlvbihlLGkpe2lmKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSksZSYmZS5NcCYmKGUuTXA9dChlLk1wKSksZSYmXCJvYmplY3RcIj09dHlwZW9mIGUudmlkZW8pe3ZhciBvPWUudmlkZW8ud087bz1vJiYoXCJvYmplY3RcIj09dHlwZW9mIG8/bzp7dk86b30pO3ZhciBzPW4udmVyc2lvbjw1OTtpZihvJiYoXCJ1c2VyXCI9PT1vLnlPfHxcImVudmlyb25tZW50XCI9PT1vLnlPfHxcInVzZXJcIj09PW8udk98fFwiZW52aXJvbm1lbnRcIj09PW8udk8pJiYoIW5hdmlnYXRvci5tZWRpYURldmljZXMuVE98fCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLlRPKCkud098fHMpJiYoZGVsZXRlIGUudmlkZW8ud08sXCJlbnZpcm9ubWVudFwiPT09by55T3x8XCJlbnZpcm9ubWVudFwiPT09by52TykpcmV0dXJuIG5hdmlnYXRvci5tZWRpYURldmljZXMuU08oKS50aGVuKGZ1bmN0aW9uKG4pe249bi5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuXCJ2aWRlb2lucHV0XCI9PT10LmtpbmR9KTt2YXIgcz1uLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiYmFja1wiKSE9PS0xfSl8fG4ubGVuZ3RoJiZuW24ubGVuZ3RoLTFdO3JldHVybiBzJiYoZS52aWRlby5iTz1vLnlPP3t5TzpzLmJPfTp7dk86cy5iT30pLGUudmlkZW89dChlLnZpZGVvKSxyKFwiY2hyb21lOiBcIitKU09OLnN0cmluZ2lmeShlKSksaShlKX0pO2UudmlkZW89dChlLnZpZGVvKX1yZXR1cm4gcihcImNocm9tZTogXCIrSlNPTi5zdHJpbmdpZnkoZSkpLGkoZSl9LGk9ZnVuY3Rpb24odCl7cmV0dXJue25hbWU6e0VPOlwiTm90QWxsb3dlZEVycm9yXCIsSU86XCJPdmVyY29uc3RyYWluZWRFcnJvclwifVt0Lm5hbWVdfHx0Lm5hbWUsbWVzc2FnZTp0Lm1lc3NhZ2UsUk86dC5jb25zdHJhaW50TmFtZSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUrKHRoaXMubWVzc2FnZSYmXCI6IFwiKSt0aGlzLm1lc3NhZ2V9fX0sbz1mdW5jdGlvbih0LHIsbil7ZSh0LGZ1bmN0aW9uKHQpe25hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEodCxyLGZ1bmN0aW9uKHQpe24oaSh0KSl9KX0pfTtuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhPW87dmFyIHM9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsaSl7bmF2aWdhdG9yLmdldFVzZXJNZWRpYSh0LGUsaSl9KX07aWYobmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8KG5hdmlnYXRvci5tZWRpYURldmljZXM9e2dldFVzZXJNZWRpYTpzLFNPOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe3ZhciBlPXtNcDpcImF1ZGlvaW5wdXRcIix2aWRlbzpcInZpZGVvaW5wdXRcIn07cmV0dXJuIE1lZGlhU3RyZWFtVHJhY2suZ2V0U291cmNlcyhmdW5jdGlvbihpKXt0KGkubWFwKGZ1bmN0aW9uKHQpe3JldHVybntsYWJlbDp0LmxhYmVsLGtpbmQ6ZVt0LmtpbmRdLGJPOnQuaWQsa086XCJcIn19KSl9KX0pfSxUTzpmdW5jdGlvbigpe3JldHVybntiTzohMCxDTzohMCx3TzohMCxPTzohMCxoZWlnaHQ6ITAsd2lkdGg6ITB9fX0pLG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKXt2YXIgYT1uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO25hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKHQpe3JldHVybiBlKHQsZnVuY3Rpb24odCl7cmV0dXJuIGEodCkudGhlbihmdW5jdGlvbihlKXtpZih0Lk1wJiYhZS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aHx8dC52aWRlbyYmIWUuZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpdGhyb3cgZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Quc3RvcCgpfSksbmV3IERPTUV4Y2VwdGlvbihcIlwiLFwiTm90Rm91bmRFcnJvclwiKTtyZXR1cm4gZX0sZnVuY3Rpb24odCl7cmV0dXJuIFByb21pc2UucmVqZWN0KGkodCkpfSl9KX19ZWxzZSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbih0KXtyZXR1cm4gcyh0KX07XCJ1bmRlZmluZWRcIj09dHlwZW9mIG5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lciYmKG5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbigpe3IoXCJEdW1teSBtZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lciBjYWxsZWQuXCIpfSksXCJ1bmRlZmluZWRcIj09dHlwZW9mIG5hdmlnYXRvci5tZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lciYmKG5hdmlnYXRvci5tZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbigpe3IoXCJEdW1teSBtZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lciBjYWxsZWQuXCIpfSl9fSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0KXt2YXIgZT10LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm5cImF1ZGlvXCI9PT10LmtpbmR9KSxpPXQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwidmlkZW9cIj09PXQua2luZH0pO2Zvcih0PVtdO2UubGVuZ3RofHxpLmxlbmd0aDspZS5sZW5ndGgmJnQucHVzaChlLnNoaWZ0KCkpLFxuaS5sZW5ndGgmJnQucHVzaChpLnNoaWZ0KCkpO3JldHVybiB0fWZ1bmN0aW9uIG4odCl7dmFyIGU9ITE7cmV0dXJuIHQ9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSksdC5maWx0ZXIoZnVuY3Rpb24odCl7aWYodCYmKHQuUE98fHQudXJsKSl7dmFyIGk9dC5QT3x8dC51cmwscj1cInN0cmluZ1wiPT10eXBlb2YgaTtyZXR1cm4gciYmKGk9W2ldKSxpPWkuZmlsdGVyKGZ1bmN0aW9uKHQpe3ZhciBpPTA9PT10LmluZGV4T2YoXCJ0dXJuOlwiKSYmdC5pbmRleE9mKFwidHJhbnNwb3J0PXVkcFwiKSE9PS0xJiZ0LmluZGV4T2YoXCJ0dXJuOltcIik9PT0tMSYmIWU7cmV0dXJuIGk/KGU9ITAsITApOjA9PT10LmluZGV4T2YoXCJzdHVuOlwiKSYmcy52ZXJzaW9uPj0xNDM5M30pLGRlbGV0ZSB0LnVybCx0LlBPPXI/aVswXTppLCEhaS5sZW5ndGh9cmV0dXJuITF9KX12YXIgbz1pKDM1KSxzPWkoMykucmksYT17WEM6ZnVuY3Rpb24oKXtpZih3aW5kb3cuUlRDSWNlR2F0aGVyZXImJih3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlfHwod2luZG93LlJUQ0ljZUNhbmRpZGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdH0pLHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb258fCh3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0fSkscy52ZXJzaW9uPDE1MDI1KSl7dmFyIHQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZSxcImVuYWJsZWRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLFwiZW5hYmxlZFwiLHtzZXQ6ZnVuY3Rpb24oZSl7dC5zZXQuY2FsbCh0aGlzLGUpO3ZhciBpPW5ldyBFdmVudChcImVuYWJsZWRcIik7aS5lbmFibGVkPWUsdGhpcy5kaXNwYXRjaEV2ZW50KGkpfX0pfXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKFtcImFkZEV2ZW50TGlzdGVuZXJcIixcInJlbW92ZUV2ZW50TGlzdGVuZXJcIixcImRpc3BhdGNoRXZlbnRcIl0uZm9yRWFjaChmdW5jdGlvbih0KXtlW3RdPWlbdF0uYmluZChpKX0pLHRoaXMub25pY2VjYW5kaWRhdGU9bnVsbCx0aGlzLm9uYWRkc3RyZWFtPW51bGwsdGhpcy5BTz1udWxsLHRoaXMub25yZW1vdmVzdHJlYW09bnVsbCx0aGlzLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2U9bnVsbCx0aGlzLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPW51bGwsdGhpcy5OTz1udWxsLHRoaXMub25uZWdvdGlhdGlvbm5lZWRlZD1udWxsLHRoaXMub25kYXRhY2hhbm5lbD1udWxsLHRoaXMueE89W10sdGhpcy5CTz1bXSx0aGlzLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiBlLnhPfSx0aGlzLmdldFJlbW90ZVN0cmVhbXM9ZnVuY3Rpb24oKXtyZXR1cm4gZS5CT30sdGhpcy5sb2NhbERlc2NyaXB0aW9uPW5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJcIixzZHA6XCJcIn0pLHRoaXMucmVtb3RlRGVzY3JpcHRpb249bmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcIlwiLHNkcDpcIlwifSksdGhpcy5zaWduYWxpbmdTdGF0ZT1cInN0YWJsZVwiLHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlPVwibmV3XCIsdGhpcy5pY2VHYXRoZXJpbmdTdGF0ZT1cIm5ld1wiLHRoaXMuRk89e19POlwiYWxsXCIsaWNlU2VydmVyczpbXX0sdCYmdC51Tylzd2l0Y2godC51Tyl7Y2FzZVwiYWxsXCI6Y2FzZVwicmVsYXlcIjp0aGlzLkZPLl9PPXQudU99dGhpcy5ETz10JiZcIm1heC1idW5kbGVcIj09PXQuYnVuZGxlUG9saWN5LHQmJnQuaWNlU2VydmVycyYmKHRoaXMuRk8uaWNlU2VydmVycz1uKHQuaWNlU2VydmVycykpLHRoaXMuSE89dCx0aGlzLkxPPVtdLHRoaXMuTU89W119LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuak89ZnVuY3Rpb24oKXt2YXIgdD1uZXcgRXZlbnQoXCJpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZVwiKTt0aGlzLmRpc3BhdGNoRXZlbnQodCksbnVsbCE9PXRoaXMuTk8mJnRoaXMuTk8odCl9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuVU89ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9by5LYih0LmxvY2FsRGVzY3JpcHRpb24uc2RwKTt0aGlzLk1PLmZvckVhY2goZnVuY3Rpb24oaSl7dmFyIHI9IWkuY2FuZGlkYXRlfHwwPT09T2JqZWN0LmtleXMoaS5jYW5kaWRhdGUpLmxlbmd0aDtpZihyKWZvcih2YXIgbj0xO248ZS5sZW5ndGg7bisrKWVbbl0uaW5kZXhPZihcIlxcclxcbmE9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG5cIik9PT0tMSYmKGVbbl0rPVwiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiKTtlbHNlIGVbaS5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCsxXSs9XCJhPVwiK2kuY2FuZGlkYXRlLmNhbmRpZGF0ZStcIlxcclxcblwiO2lmKHQubG9jYWxEZXNjcmlwdGlvbi5zZHA9ZS5qb2luKFwiXCIpLHQuZGlzcGF0Y2hFdmVudChpKSxudWxsIT09dC5vbmljZWNhbmRpZGF0ZSYmdC5vbmljZWNhbmRpZGF0ZShpKSwhaS5jYW5kaWRhdGUmJlwiY29tcGxldGVcIiE9PXQuaWNlR2F0aGVyaW5nU3RhdGUpe3ZhciBvPXQuTE8uZXZlcnkoZnVuY3Rpb24odCl7cmV0dXJuIHQuWUUmJlwiY29tcGxldGVkXCI9PT10LllFLnN0YXRlfSk7byYmXCJjb21wbGV0ZVwiIT09dC5pY2VHYXRoZXJpbmdTdGF0ZUNoYW5nZSYmKHQuaWNlR2F0aGVyaW5nU3RhdGU9XCJjb21wbGV0ZVwiLHQuak8oKSl9fSksdGhpcy5NTz1bXX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuSE99LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKHQpe2lmKHMudmVyc2lvbj49MTUwMjUpdGhpcy54Ty5wdXNoKHQpO2Vsc2V7dmFyIGU9dC5jbG9uZSgpO3QuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0LGkpe3ZhciByPWUuZ2V0VHJhY2tzKClbaV07dC5hZGRFdmVudExpc3RlbmVyKFwiZW5hYmxlZFwiLGZ1bmN0aW9uKHQpe3IuZW5hYmxlZD10LmVuYWJsZWR9KX0pLHRoaXMueE8ucHVzaChlKX10aGlzLlZPKCl9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMueE8uaW5kZXhPZih0KTtlPi0xJiYodGhpcy54Ty5zcGxpY2UoZSwxKSx0aGlzLlZPKCkpfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5MTy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuISF0LnRJfSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRJfSl9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTE8uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiEhdC5lSX0pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5lSX0pfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLlFPPWZ1bmN0aW9uKHQsZSl7dmFyIGk9e05FOltdLHhFOltdLEJFOltdfSxyPWZ1bmN0aW9uKHQsZSl7dD1wYXJzZUludCh0LDEwKTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKylpZihlW2ldLm9FPT09dHx8ZVtpXS5oRT09PXQpcmV0dXJuIGVbaV19LG49ZnVuY3Rpb24odCxlLGksbil7dmFyIG89cih0LnBhcmFtZXRlcnMuYXB0LGkpLHM9cihlLnBhcmFtZXRlcnMuYXB0LG4pO3JldHVybiBvJiZzJiZvLm5hbWUudG9Mb3dlckNhc2UoKT09PXMubmFtZS50b0xvd2VyQ2FzZSgpfTtyZXR1cm4gdC5ORS5mb3JFYWNoKGZ1bmN0aW9uKHIpe2Zvcih2YXIgbz0wO288ZS5ORS5sZW5ndGg7bysrKXt2YXIgcz1lLk5FW29dO2lmKHIubmFtZS50b0xvd2VyQ2FzZSgpPT09cy5uYW1lLnRvTG93ZXJDYXNlKCkmJnIuc0U9PT1zLnNFKXtpZihcInJ0eFwiPT09ci5uYW1lLnRvTG93ZXJDYXNlKCkmJnIucGFyYW1ldGVycyYmcy5wYXJhbWV0ZXJzLmFwdCYmIW4ocixzLHQuTkUsZS5ORSkpY29udGludWU7cz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHMpKSxzLmFFPU1hdGgubWluKHIuYUUscy5hRSksaS5ORS5wdXNoKHMpLHMueUU9cy55RS5maWx0ZXIoZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTxyLnlFLmxlbmd0aDtlKyspaWYoci55RVtlXS50eXBlPT09dC50eXBlJiZyLnlFW2VdLmdFPT09dC5nRSlyZXR1cm4hMDtyZXR1cm4hMX0pO2JyZWFrfX19KSx0LnhFLmZvckVhY2goZnVuY3Rpb24odCl7Zm9yKHZhciByPTA7cjxlLnhFLmxlbmd0aDtyKyspe3ZhciBuPWUueEVbcl07aWYodC51cmk9PT1uLnVyaSl7aS54RS5wdXNoKG4pO2JyZWFrfX19KSxpfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnFPPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcyxyPW5ldyBSVENJY2VHYXRoZXJlcihpLkZPKSxuPW5ldyBSVENJY2VUcmFuc3BvcnQocik7ci5KTz1mdW5jdGlvbihzKXt2YXIgYT1uZXcgRXZlbnQoXCJpY2VjYW5kaWRhdGVcIik7YS5jYW5kaWRhdGU9e3NkcE1pZDp0LHNkcE1MaW5lSW5kZXg6ZX07dmFyIGM9cy5jYW5kaWRhdGUsaD0hY3x8MD09PU9iamVjdC5rZXlzKGMpLmxlbmd0aDtoP3ZvaWQgMD09PXIuc3RhdGUmJihyLnN0YXRlPVwiY29tcGxldGVkXCIpOihjLiRiPVwiUlRDUFwiPT09bi4kYj8yOjEsYS5jYW5kaWRhdGUuY2FuZGlkYXRlPW8uaUUoYykpO3ZhciBwPW8uS2IoaS5sb2NhbERlc2NyaXB0aW9uLnNkcCk7aD9wW2EuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgrMV0rPVwiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiOnBbYS5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCsxXSs9XCJhPVwiK2EuY2FuZGlkYXRlLmNhbmRpZGF0ZStcIlxcclxcblwiLGkubG9jYWxEZXNjcmlwdGlvbi5zZHA9cC5qb2luKFwiXCIpO3ZhciB1PWkuS08/aS5LTzppLkxPLGw9dS5ldmVyeShmdW5jdGlvbih0KXtyZXR1cm4gdC5ZRSYmXCJjb21wbGV0ZWRcIj09PXQuWUUuc3RhdGV9KTtzd2l0Y2goaS5pY2VHYXRoZXJpbmdTdGF0ZSl7Y2FzZVwibmV3XCI6aHx8aS5NTy5wdXNoKGEpLGgmJmwmJmkuTU8ucHVzaChuZXcgRXZlbnQoXCJpY2VjYW5kaWRhdGVcIikpO2JyZWFrO2Nhc2VcImdhdGhlcmluZ1wiOmkuVU8oKSxofHwoaS5kaXNwYXRjaEV2ZW50KGEpLG51bGwhPT1pLm9uaWNlY2FuZGlkYXRlJiZpLm9uaWNlY2FuZGlkYXRlKGEpKSxsJiYoaS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImljZWNhbmRpZGF0ZVwiKSksbnVsbCE9PWkub25pY2VjYW5kaWRhdGUmJmkub25pY2VjYW5kaWRhdGUobmV3IEV2ZW50KFwiaWNlY2FuZGlkYXRlXCIpKSxpLmljZUdhdGhlcmluZ1N0YXRlPVwiY29tcGxldGVcIixpLmpPKCkpO2JyZWFrO2Nhc2VcImNvbXBsZXRlXCI6fX0sbi5HTz1mdW5jdGlvbigpe2kuek8oKX07dmFyIHM9bmV3IFJUQ0R0bHNUcmFuc3BvcnQobik7cmV0dXJuIHMuV089ZnVuY3Rpb24oKXtpLnpPKCl9LHMub25lcnJvcj1mdW5jdGlvbigpe3Muc3RhdGU9XCJmYWlsZWRcIixpLnpPKCl9LHtZRTpyLCRPOm4sWEU6c319LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuWU89ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRoaXMuUU8odC5YTyx0LlpPKTtlJiZ0LnRJJiYoci50UD10LmlJLHIuRkU9e3FFOm8ucWJ9LHQuZVAubGVuZ3RoJiYoci5GRS53RT10LmVQWzBdLndFKSx0LnRJLnNlbmQocikpLGkmJnQuZUkmJihcInZpZGVvXCI9PT10LmtpbmQmJnQuZVAmJnMudmVyc2lvbjwxNTAxOSYmdC5lUC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2RlbGV0ZSB0Lk1FfSksci50UD10LmVQLHIuRkU9e3FFOnQucUV9LHQuaUkubGVuZ3RoJiYoci5GRS53RT10LmlJWzBdLndFKSx0LmVJLnJlY2VpdmUocikpfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb249ZnVuY3Rpb24odCl7dmFyIGUsaSxyPXRoaXM7aWYoXCJvZmZlclwiPT09dC50eXBlKXRoaXMuS08mJihlPW8uS2IodC5zZHApLGk9ZS5zaGlmdCgpLGUuZm9yRWFjaChmdW5jdGlvbih0LGUpe3ZhciBpPW8uQUUodCk7ci5LT1tlXS5YTz1pfSksdGhpcy5MTz10aGlzLktPLGRlbGV0ZSB0aGlzLktPKTtlbHNlIGlmKFwiYW5zd2VyXCI9PT10LnR5cGUpe2U9by5LYihyLnJlbW90ZURlc2NyaXB0aW9uLnNkcCksaT1lLnNoaWZ0KCk7dmFyIG49by5HYihpLFwiYT1pY2UtbGl0ZVwiKS5sZW5ndGg+MDtlLmZvckVhY2goZnVuY3Rpb24odCxlKXt2YXIgcz1yLkxPW2VdLGE9cy5ZRSxjPXMuJE8saD1zLlhFLHA9cy5YTyx1PXMuWk8sbD1cIjBcIj09PXQuc3BsaXQoXCJcXG5cIiwxKVswXS5zcGxpdChcIiBcIiwyKVsxXTtpZighbCYmIXMuaVApe3ZhciBkPW8uQ0UodCxpKSxmPW8uRUUodCxpKTtuJiYoZi5JRT1cInNlcnZlclwiKSxyLkRPJiYwIT09ZXx8KGMuc3RhcnQoYSxkLG4/XCJjb250cm9sbGluZ1wiOlwiY29udHJvbGxlZFwiKSxoLnN0YXJ0KGYpKTt2YXIgZz1yLlFPKHAsdSk7ci5ZTyhzLGcuTkUubGVuZ3RoPjAsITEpfX0pfXN3aXRjaCh0aGlzLmxvY2FsRGVzY3JpcHRpb249e3R5cGU6dC50eXBlLHNkcDp0LnNkcH0sdC50eXBlKXtjYXNlXCJvZmZlclwiOnRoaXMuclAoXCJoYXZlLWxvY2FsLW9mZmVyXCIpO2JyZWFrO2Nhc2VcImFuc3dlclwiOnRoaXMuclAoXCJzdGFibGVcIik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCd1bnN1cHBvcnRlZCB0eXBlIFwiJyt0LnR5cGUrJ1wiJyl9dmFyIHM9YXJndW1lbnRzLmxlbmd0aD4xJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhcmd1bWVudHNbMV07aWYocyl7dmFyIGE9YXJndW1lbnRzWzFdO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YSgpLFwibmV3XCI9PT1yLmljZUdhdGhlcmluZ1N0YXRlJiYoci5pY2VHYXRoZXJpbmdTdGF0ZT1cImdhdGhlcmluZ1wiLHIuak8oKSksci5VTygpfSwwKX12YXIgYz1Qcm9taXNlLnJlc29sdmUoKTtyZXR1cm4gYy50aGVuKGZ1bmN0aW9uKCl7c3x8KFwibmV3XCI9PT1yLmljZUdhdGhlcmluZ1N0YXRlJiYoci5pY2VHYXRoZXJpbmdTdGF0ZT1cImdhdGhlcmluZ1wiLHIuak8oKSksd2luZG93LnNldFRpbWVvdXQoci5VTy5iaW5kKHIpLDUwMCkpfSksY30sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9bmV3IE1lZGlhU3RyZWFtLHI9W10sbj1vLktiKHQuc2RwKSxhPW4uc2hpZnQoKSxjPW8uR2IoYSxcImE9aWNlLWxpdGVcIikubGVuZ3RoPjA7c3dpdGNoKHRoaXMuRE89by5HYihhLFwiYT1ncm91cDpCVU5ETEUgXCIpLmxlbmd0aD4wLG4uZm9yRWFjaChmdW5jdGlvbihuLGgpe3ZhciBwPW8uSmIobiksdT1wWzBdLnN1YnN0cigyKS5zcGxpdChcIiBcIiksbD11WzBdLGQ9XCIwXCI9PT11WzFdLGY9by5ySShuLGEpLGc9by5HYihuLFwiYT1taWQ6XCIpO2lmKGc9Zy5sZW5ndGg/Z1swXS5zdWJzdHIoNik6by5RYigpLFwiYXBwbGljYXRpb25cIj09PWwmJlwiRFRMUy9TQ1RQXCI9PT11WzJdKXJldHVybiB2b2lkKGUuTE9baF09e1pFOmcsaVA6ITB9KTt2YXIgdix5LG0sdyxULFMsYixFLEksUixrLEMsTz1vLkFFKG4pO2R8fChrPW8uQ0UobixhKSxDPW8uRUUobixhKSxDLklFPVwiY2xpZW50XCIpLEU9by5IRShuKTt2YXIgUCxBPW8uR2IobixcImE9c3NyYzpcIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBvLm1FKHQpfSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiY25hbWVcIj09PXQuVEV9KVswXTtBJiYoUD1BLnZhbHVlKTt2YXIgTj1vLkdiKG4sXCJhPWVuZC1vZi1jYW5kaWRhdGVzXCIsYSkubGVuZ3RoPjAseD1vLkdiKG4sXCJhPWNhbmRpZGF0ZTpcIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBvLnpiKHQpfSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiMVwiPT09dC4kYn0pO2lmKFwib2ZmZXJcIiE9PXQudHlwZXx8ZClcImFuc3dlclwiIT09dC50eXBlfHxkfHwodj1lLkxPW2hdLHk9di5ZRSxtPXYuJE8sdz12LlhFLFQ9di50SSxTPXYuZUksYj12LmlJLEk9di5YTyxlLkxPW2hdLmVQPUUsZS5MT1toXS5aTz1PLGUuTE9baF0ucUU9UCwoY3x8TikmJngubGVuZ3RoJiZtLnNldFJlbW90ZUNhbmRpZGF0ZXMoeCksZS5ETyYmMCE9PWh8fChtLnN0YXJ0KHksayxcImNvbnRyb2xsaW5nXCIpLHcuc3RhcnQoQykpLGUuWU8odixcInNlbmRyZWN2XCI9PT1mfHxcInJlY3Zvbmx5XCI9PT1mLFwic2VuZHJlY3ZcIj09PWZ8fFwic2VuZG9ubHlcIj09PWYpLCFTfHxcInNlbmRyZWN2XCIhPT1mJiZcInNlbmRvbmx5XCIhPT1mP2RlbGV0ZSB2LmVJOihSPVMudHJhY2ssci5wdXNoKFtSLFNdKSxpLmFkZFRyYWNrKFIpKSk7ZWxzZXt2YXIgQj1lLkRPJiZoPjA/e1lFOmUuTE9bMF0uWUUsJE86ZS5MT1swXS4kTyxYRTplLkxPWzBdLlhFfTplLnFPKGcsaCk7aWYoIU58fGUuRE8mJjAhPT1ofHxCLiRPLnNldFJlbW90ZUNhbmRpZGF0ZXMoeCksST1SVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXMobCkscy52ZXJzaW9uPDE1MDE5JiYoSS5ORT1JLk5FLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm5cInJ0eFwiIT09dC5uYW1lfSkpLGI9W3t3RToxMDAxKigyKmgrMil9XSxcInNlbmRyZWN2XCIhPT1mJiZcInNlbmRvbmx5XCIhPT1mfHwoUz1uZXcgUlRDUnRwUmVjZWl2ZXIoQi5YRSxsKSxSPVMudHJhY2ssci5wdXNoKFtSLFNdKSxpLmFkZFRyYWNrKFIpKSxlLnhPLmxlbmd0aD4wJiZlLnhPWzBdLmdldFRyYWNrcygpLmxlbmd0aD49aCl7dmFyIEY7XCJhdWRpb1wiPT09bD9GPWUueE9bMF0uZ2V0QXVkaW9UcmFja3MoKVswXTpcInZpZGVvXCI9PT1sJiYoRj1lLnhPWzBdLmdldFZpZGVvVHJhY2tzKClbMF0pLEYmJihzLnZlcnNpb24+PTE1MDE5JiZcInZpZGVvXCI9PT1sJiYoYlswXS5NRT17d0U6MTAwMSooMipoKzIpKzF9KSxUPW5ldyBSVENSdHBTZW5kZXIoRixCLlhFKSl9ZS5MT1toXT17WUU6Qi5ZRSwkTzpCLiRPLFhFOkIuWEUsWE86SSxaTzpPLHRJOlQsZUk6UyxraW5kOmwsWkU6ZyxxRTpQLGlJOmIsZVA6RX0sZS5ZTyhlLkxPW2hdLCExLFwic2VuZHJlY3ZcIj09PWZ8fFwic2VuZG9ubHlcIj09PWYpfX0pLHRoaXMucmVtb3RlRGVzY3JpcHRpb249e3R5cGU6dC50eXBlLHNkcDp0LnNkcH0sdC50eXBlKXtjYXNlXCJvZmZlclwiOnRoaXMuclAoXCJoYXZlLXJlbW90ZS1vZmZlclwiKTticmVhaztjYXNlXCJhbnN3ZXJcIjp0aGlzLnJQKFwic3RhYmxlXCIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigndW5zdXBwb3J0ZWQgdHlwZSBcIicrdC50eXBlKydcIicpfXJldHVybiBpLmdldFRyYWNrcygpLmxlbmd0aCYmKGUuQk8ucHVzaChpKSx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PW5ldyBFdmVudChcImFkZHN0cmVhbVwiKTt0LnN0cmVhbT1pLGUuZGlzcGF0Y2hFdmVudCh0KSxudWxsIT09ZS5vbmFkZHN0cmVhbSYmd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLm9uYWRkc3RyZWFtKHQpfSwwKSxyLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9dFswXSxuPXRbMV0sbz1uZXcgRXZlbnQoXCJ0cmFja1wiKTtvLnRyYWNrPXIsby5yZWNlaXZlcj1uLG8uc089W2ldLGUuZGlzcGF0Y2hFdmVudChvKSxudWxsIT09ZS5BTyYmd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLkFPKG8pfSwwKX0pfSwwKSksYXJndW1lbnRzLmxlbmd0aD4xJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0mJndpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1sxXSwwKSxQcm9taXNlLnJlc29sdmUoKX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuTE8uZm9yRWFjaChmdW5jdGlvbih0KXt0LiRPJiZ0LiRPLnN0b3AoKSx0LlhFJiZ0LlhFLnN0b3AoKSx0LnRJJiZ0LnRJLnN0b3AoKSx0LmVJJiZ0LmVJLnN0b3AoKX0pLHRoaXMuclAoXCJjbG9zZWRcIil9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuclA9ZnVuY3Rpb24odCl7dGhpcy5zaWduYWxpbmdTdGF0ZT10O3ZhciBlPW5ldyBFdmVudChcInNpZ25hbGluZ3N0YXRlY2hhbmdlXCIpO3RoaXMuZGlzcGF0Y2hFdmVudChlKSxudWxsIT09dGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlJiZ0aGlzLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UoZSl9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuVk89ZnVuY3Rpb24oKXt2YXIgdD1uZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKTt0aGlzLmRpc3BhdGNoRXZlbnQodCksbnVsbCE9PXRoaXMub25uZWdvdGlhdGlvbm5lZWRlZCYmdGhpcy5vbm5lZ290aWF0aW9ubmVlZGVkKHQpfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnpPPWZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLGk9e25QOjAsY2xvc2VkOjAsb1A6MCxzUDowLGNvbm5lY3RlZDowLGFQOjAsX2k6MH07aWYodGhpcy5MTy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lbdC4kTy5zdGF0ZV0rKyxpW3QuWEUuc3RhdGVdKyt9KSxpLmNvbm5lY3RlZCs9aS5hUCx0PVwibmV3XCIsaS5faT4wP3Q9XCJmYWlsZWRcIjppLm9QPjB8fGkuc1A+MD90PVwiY29ubmVjdGluZ1wiOmkuZGlzY29ubmVjdGVkPjA/dD1cImRpc2Nvbm5lY3RlZFwiOmlbXCJuUFwiXT4wP3Q9XCJuZXdcIjooaS5jb25uZWN0ZWQ+MHx8aS5hUD4wKSYmKHQ9XCJjb25uZWN0ZWRcIiksdCE9PWUuaWNlQ29ubmVjdGlvblN0YXRlKXtlLmljZUNvbm5lY3Rpb25TdGF0ZT10O3ZhciByPW5ldyBFdmVudChcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiKTt0aGlzLmRpc3BhdGNoRXZlbnQociksbnVsbCE9PXRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UmJnRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2Uocil9fSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLktPKXRocm93IG5ldyBFcnJvcihcImNyZWF0ZU9mZmVyIGNhbGxlZCB3aGlsZSB0aGVyZSBpcyBhIHBlbmRpbmcgb2ZmZXIuXCIpO3ZhciBlOzE9PT1hcmd1bWVudHMubGVuZ3RoJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBhcmd1bWVudHNbMF0/ZT1hcmd1bWVudHNbMF06Mz09PWFyZ3VtZW50cy5sZW5ndGgmJihlPWFyZ3VtZW50c1syXSk7dmFyIGk9W10sbj0wLGE9MDtpZih0aGlzLnhPLmxlbmd0aCYmKG49dGhpcy54T1swXS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCxhPXRoaXMueE9bMF0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpLGUpe2lmKGUuZ098fGUub3B0aW9uYWwpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkxlZ2FjeSBtYW5kYXRvcnkvb3B0aW9uYWwgY29uc3RyYWludHMgbm90IHN1cHBvcnRlZC5cIik7dm9pZCAwIT09ZS5jUCYmKG49ZS5jUCksdm9pZCAwIT09ZS5oUCYmKGE9ZS5oUCl9Zm9yKHRoaXMueE8ubGVuZ3RoJiZ0aGlzLnhPWzBdLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odCl7aS5wdXNoKHtraW5kOnQua2luZCx0cmFjazp0LHBQOlwiYXVkaW9cIj09PXQua2luZD9uPjA6YT4wfSksXCJhdWRpb1wiPT09dC5raW5kP24tLTpcInZpZGVvXCI9PT10LmtpbmQmJmEtLX0pO24+MHx8YT4wOyluPjAmJihpLnB1c2goe2tpbmQ6XCJhdWRpb1wiLHBQOiEwfSksbi0tKSxhPjAmJihpLnB1c2goe2tpbmQ6XCJ2aWRlb1wiLHBQOiEwfSksYS0tKTtpPXIoaSk7dmFyIGM9by5XRSgpLGg9W107aS5mb3JFYWNoKGZ1bmN0aW9uKGUsaSl7dmFyIHI9ZS50cmFjayxuPWUua2luZCxhPW8uUWIoKSxjPXQuRE8mJmk+MD97WUU6aFswXS5ZRSwkTzpoWzBdLiRPLFhFOmhbMF0uWEV9OnQucU8oYSxpKSxwPVJUQ1J0cFNlbmRlci5nZXRDYXBhYmlsaXRpZXMobik7cy52ZXJzaW9uPDE1MDE5JiYocC5ORT1wLk5FLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm5cInJ0eFwiIT09dC5uYW1lfSkpLHAuTkUuZm9yRWFjaChmdW5jdGlvbih0KXtcIkgyNjRcIj09PXQubmFtZSYmdm9pZCAwPT09dC5wYXJhbWV0ZXJzW1widVBcIl0mJih0LnBhcmFtZXRlcnNbXCJ1UFwiXT1cIjFcIil9KTt2YXIgdSxsLGQ9W3t3RToxMDAxKigyKmkrMSl9XTtyJiYocy52ZXJzaW9uPj0xNTAxOSYmXCJ2aWRlb1wiPT09biYmKGRbMF0uTUU9e3dFOjEwMDEqKDIqaSsxKSsxfSksdT1uZXcgUlRDUnRwU2VuZGVyKHIsYy5YRSkpLGUucFAmJihsPW5ldyBSVENSdHBSZWNlaXZlcihjLlhFLG4pKSxoW2ldPXtZRTpjLllFLCRPOmMuJE8sWEU6Yy5YRSxYTzpwLFpPOm51bGwsdEk6dSxlSTpsLGtpbmQ6bixaRTphLGlJOmQsZVA6bnVsbH19KSx0aGlzLkRPJiYoYys9XCJhPWdyb3VwOkJVTkRMRSBcIitoLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5aRX0pLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIpLGkuZm9yRWFjaChmdW5jdGlvbihlLGkpe3ZhciByPWhbaV07Yys9by4kRShyLHIuWE8sXCJvZmZlclwiLHQueE9bMF0pfSksdGhpcy5LTz1oO3ZhciBwPW5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJvZmZlclwiLHNkcDpjfSk7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1swXSYmd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzBdLDAscCksUHJvbWlzZS5yZXNvbHZlKHApfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1vLldFKCk7dGhpcy5ETyYmKGUrPVwiYT1ncm91cDpCVU5ETEUgXCIrdGhpcy5MTy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuWkV9KS5qb2luKFwiIFwiKStcIlxcclxcblwiKSx0aGlzLkxPLmZvckVhY2goZnVuY3Rpb24oaSl7aWYoaS5pUClyZXR1cm4gdm9pZChlKz1cIm09YXBwbGljYXRpb24gMCBEVExTL1NDVFAgNTAwMFxcclxcbmM9SU4gSVA0IDAuMC4wLjBcXHJcXG5hPW1pZDpcIitpLlpFK1wiXFxyXFxuXCIpO3ZhciByPXQuUU8oaS5YTyxpLlpPKTtlKz1vLiRFKGkscixcImFuc3dlclwiLHQueE9bMF0pfSk7dmFyIGk9bmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcImFuc3dlclwiLHNkcDplfSk7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1swXSYmd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzBdLDAsaSksUHJvbWlzZS5yZXNvbHZlKGkpfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbih0KXtpZih0KXt2YXIgZT10LnNkcE1MaW5lSW5kZXg7aWYodC5zZHBNaWQpZm9yKHZhciBpPTA7aTx0aGlzLkxPLmxlbmd0aDtpKyspaWYodGhpcy5MT1tpXS5aRT09PXQuc2RwTWlkKXtlPWk7YnJlYWt9dmFyIHI9dGhpcy5MT1tlXTtpZihyKXt2YXIgbj1PYmplY3Qua2V5cyh0LmNhbmRpZGF0ZSkubGVuZ3RoPjA/by56Yih0LmNhbmRpZGF0ZSk6e307aWYoXCJ0Y3BcIj09PW4ucHJvdG9jb2wmJigwPT09bi5wb3J0fHw5PT09bi5wb3J0KSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7aWYoXCIxXCIhPT1uLiRiKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtyLiRPLmFkZFJlbW90ZUNhbmRpZGF0ZShuKTt2YXIgcz1vLktiKHRoaXMucmVtb3RlRGVzY3JpcHRpb24uc2RwKTtzW2UrMV0rPShuLnR5cGU/dC5jYW5kaWRhdGUudHJpbSgpOlwiYT1lbmQtb2YtY2FuZGlkYXRlc1wiKStcIlxcclxcblwiLHRoaXMucmVtb3RlRGVzY3JpcHRpb24uc2RwPXMuam9pbihcIlwiKX19ZWxzZSBmb3IodmFyIGE9MDthPHRoaXMuTE8ubGVuZ3RoO2ErKylpZih0aGlzLkxPW2FdLiRPLmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSksdGhpcy5ETylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYXJndW1lbnRzWzFdJiZ3aW5kb3cuc2V0VGltZW91dChhcmd1bWVudHNbMV0sMCksUHJvbWlzZS5yZXNvbHZlKCl9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXt2YXIgdD1bXTt0aGlzLkxPLmZvckVhY2goZnVuY3Rpb24oZSl7W1wicnRwU2VuZGVyXCIsXCJydHBSZWNlaXZlclwiLFwiaWNlR2F0aGVyZXJcIixcImljZVRyYW5zcG9ydFwiLFwiZHRsc1RyYW5zcG9ydFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGkpe2VbaV0mJnQucHVzaChlW2ldLmdldFN0YXRzKCkpfSl9KTt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLGk9ZnVuY3Rpb24odCl7cmV0dXJue2xQOlwiaW5ib3VuZC1ydHBcIixkUDpcIm91dGJvdW5kLXJ0cFwiLGZQOlwiY2FuZGlkYXRlLXBhaXJcIixkTzpcImxvY2FsLWNhbmRpZGF0ZVwiLGZPOlwicmVtb3RlLWNhbmRpZGF0ZVwifVt0LnR5cGVdfHx0LnR5cGV9O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyKXt2YXIgbj1uZXcgTWFwO1Byb21pc2UuYWxsKHQpLnRoZW4oZnVuY3Rpb24odCl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe09iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXS50eXBlPWkodFtlXSksbi5zZXQoZSx0W2VdKX0pfSksZSYmd2luZG93LnNldFRpbWVvdXQoZSwwLG4pLHIobil9KX0pfX19O3QudD17WEM6YS5YQyxaQzppKDY5KX19LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dC50PWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24odCl7cmV0dXJue25hbWU6e0VPOlwiTm90QWxsb3dlZEVycm9yXCJ9W3QubmFtZV18fHQubmFtZSxtZXNzYWdlOnQubWVzc2FnZSxSTzp0LlJPLHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX19fSxlPW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oaSl7cmV0dXJuIGUoaSlbXCJjYXRjaFwiXShmdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QodChlKSl9KX19fSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9aSgzKS5yaSxuPXtpTzpmdW5jdGlvbigpe1wib2JqZWN0XCIhPXR5cGVvZiB3aW5kb3d8fCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb258fFwib250cmFja1wiaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJvbnRyYWNrXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5PfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5uTyYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5uTyksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWRkc3RyZWFtXCIsdGhpcy5vTykpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5uTz10KSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJhZGRzdHJlYW1cIix0aGlzLm9PPWZ1bmN0aW9uKHQpe3Quc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGk9bmV3IEV2ZW50KFwidHJhY2tcIik7aS50cmFjaz1lLGkucmVjZWl2ZXI9e3RyYWNrOmV9LGkuc089W3Quc3RyZWFtXSx0aGlzLmRpc3BhdGNoRXZlbnQoaSl9LmJpbmQodGhpcykpfS5iaW5kKHRoaXMpKX19KX0sZU86ZnVuY3Rpb24oKXtcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiYoIXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50fHxcInNyY09iamVjdFwiaW4gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlfHxPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLFwic3JjT2JqZWN0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1velNyY09iamVjdH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMubW96U3JjT2JqZWN0PXR9fSkpfSxYQzpmdW5jdGlvbigpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJih3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb258fHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbikpe3dpbmRvdy5SVENQZWVyQ29ubmVjdGlvbnx8KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbih0LGUpe2lmKHIudmVyc2lvbjwzOCYmdCYmdC5pY2VTZXJ2ZXJzKXtmb3IodmFyIGk9W10sbj0wO248dC5pY2VTZXJ2ZXJzLmxlbmd0aDtuKyspe3ZhciBvPXQuaWNlU2VydmVyc1tuXTtpZihvLmhhc093blByb3BlcnR5KFwidXJsc1wiKSlmb3IodmFyIHM9MDtzPG8uUE8ubGVuZ3RoO3MrKyl7dmFyIGE9e3VybDpvLlBPW3NdfTswPT09by5QT1tzXS5pbmRleE9mKFwidHVyblwiKSYmKGEudXNlcm5hbWU9by51c2VybmFtZSxhLmdQPW8uZ1ApLGkucHVzaChhKX1lbHNlIGkucHVzaCh0LmljZVNlcnZlcnNbbl0pfXQuaWNlU2VydmVycz1pfXJldHVybiBuZXcgbW96UlRDUGVlckNvbm5lY3Rpb24odCxlKX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZT1tb3pSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsbW96UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbixcImdlbmVyYXRlQ2VydGlmaWNhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGV9fSksd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbj1tb3pSVENTZXNzaW9uRGVzY3JpcHRpb24sd2luZG93LlJUQ0ljZUNhbmRpZGF0ZT1tb3pSVENJY2VDYW5kaWRhdGUpLFtcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF07UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1uZXcoXCJhZGRJY2VDYW5kaWRhdGVcIj09PXQ/UlRDSWNlQ2FuZGlkYXRlOlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KTt2YXIgdD1SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO1JUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdP3QuYXBwbHkodGhpcyxhcmd1bWVudHMpOihhcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXS5hcHBseShudWxsKSxQcm9taXNlLnJlc29sdmUoKSl9O3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBNYXA7cmV0dXJuIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24oaSl7ZS5zZXQoaSx0W2ldKSxlW2ldPXRbaV19KSxlfSxpPXtsUDpcImluYm91bmQtcnRwXCIsZFA6XCJvdXRib3VuZC1ydHBcIixmUDpcImNhbmRpZGF0ZS1wYWlyXCIsZE86XCJsb2NhbC1jYW5kaWRhdGVcIixmTzpcInJlbW90ZS1jYW5kaWRhdGVcIn0sbj1SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKHQsbyxzKXtyZXR1cm4gbi5hcHBseSh0aGlzLFt0fHxudWxsXSkudGhlbihmdW5jdGlvbih0KXtpZihyLnZlcnNpb248NDgmJih0PWUodCkpLHIudmVyc2lvbjw1MyYmIW8pdHJ5e3QuZm9yRWFjaChmdW5jdGlvbih0KXt0LnR5cGU9aVt0LnR5cGVdfHx0LnR5cGV9KX1jYXRjaChuKXtpZihcIlR5cGVFcnJvclwiIT09bi5uYW1lKXRocm93IG47dC5mb3JFYWNoKGZ1bmN0aW9uKGUscil7dC5zZXQocixPYmplY3QuYXNzaWduKHt9LGUse3R5cGU6aVtlLnR5cGVdfHxlLnR5cGV9KSl9KX1yZXR1cm4gdH0pLnRoZW4obyxzKX19fX07dC50PXtpTzpuLmlPLGVPOm4uZU8sWEM6bi5YQyxaQzppKDcxKX19LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1pKDMpLmxvZyxuPWkoMykucmk7dC50PWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24odCl7cmV0dXJue25hbWU6e3ZQOlwiTm90QWxsb3dlZEVycm9yXCIsRU86XCJOb3RBbGxvd2VkRXJyb3JcIn1bdC5uYW1lXXx8dC5uYW1lLG1lc3NhZ2U6e1wiVGhlIG9wZXJhdGlvbiBpcyBpbnNlY3VyZS5cIjpcIlRoZSByZXF1ZXN0IGlzIG5vdCBhbGxvd2VkIGJ5IHRoZSB1c2VyIGFnZW50IG9yIHRoZSBwbGF0Zm9ybSBpbiB0aGUgY3VycmVudCBjb250ZXh0LlwifVt0Lm1lc3NhZ2VdfHx0Lm1lc3NhZ2UsUk86dC5STyx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUrKHRoaXMubWVzc2FnZSYmXCI6IFwiKSt0aGlzLm1lc3NhZ2V9fX0sZT1mdW5jdGlvbihlLGksbyl7dmFyIHM9ZnVuY3Rpb24odCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHR8fHQueVApcmV0dXJuIHQ7dmFyIGU9W107cmV0dXJuIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24oaSl7aWYoXCJyZXF1aXJlXCIhPT1pJiZcImFkdmFuY2VkXCIhPT1pJiZcIm1lZGlhU291cmNlXCIhPT1pKXt2YXIgcj10W2ldPVwib2JqZWN0XCI9PXR5cGVvZiB0W2ldP3RbaV06e3ZPOnRbaV19O2lmKHZvaWQgMD09PXIubWluJiZ2b2lkIDA9PT1yLm1heCYmdm9pZCAwPT09ci55T3x8ZS5wdXNoKGkpLHZvaWQgMCE9PXIueU8mJihcIm51bWJlclwiPT10eXBlb2Ygci55Tz9yLm1pbj1yLm1heD1yLnlPOnRbaV09ci55TyxkZWxldGUgci55Tyksdm9pZCAwIT09ci52Tyl7dC5tTz10Lm1PfHxbXTt2YXIgbj17fTtcIm51bWJlclwiPT10eXBlb2Ygci52Tz9uW2ldPXttaW46ci52TyxtYXg6ci52T306bltpXT1yLnZPLHQubU8ucHVzaChuKSxkZWxldGUgci52TyxPYmplY3Qua2V5cyhyKS5sZW5ndGh8fGRlbGV0ZSB0W2ldfX19KSxlLmxlbmd0aCYmKHQueVA9ZSksdH07cmV0dXJuIGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSksbi52ZXJzaW9uPDM4JiYocihcInNwZWM6IFwiK0pTT04uc3RyaW5naWZ5KGUpKSxlLk1wJiYoZS5NcD1zKGUuTXApKSxlLnZpZGVvJiYoZS52aWRlbz1zKGUudmlkZW8pKSxyKFwiZmYzNzogXCIrSlNPTi5zdHJpbmdpZnkoZSkpKSxuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKGUsaSxmdW5jdGlvbihlKXtvKHQoZSkpfSl9LGk9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGkscil7ZSh0LGkscil9KX07aWYobmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8KG5hdmlnYXRvci5tZWRpYURldmljZXM9e2dldFVzZXJNZWRpYTppLGFkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oKXt9LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oKXt9fSksbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5TTz1uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLlNPfHxmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXt2YXIgZT1be2tpbmQ6XCJhdWRpb2lucHV0XCIsYk86XCJkZWZhdWx0XCIsbGFiZWw6XCJcIixrTzpcIlwifSx7a2luZDpcInZpZGVvaW5wdXRcIixiTzpcImRlZmF1bHRcIixsYWJlbDpcIlwiLGtPOlwiXCJ9XTt0KGUpfSl9LG4udmVyc2lvbjw0MSl7dmFyIG89bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5TTy5iaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO25hdmlnYXRvci5tZWRpYURldmljZXMuU089ZnVuY3Rpb24oKXtyZXR1cm4gbygpLnRoZW4odm9pZCAwLGZ1bmN0aW9uKHQpe2lmKFwiTm90Rm91bmRFcnJvclwiPT09dC5uYW1lKXJldHVybltdO3Rocm93IHR9KX19aWYobi52ZXJzaW9uPDQ5KXt2YXIgcz1uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO25hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUpe3JldHVybiBzKGUpLnRoZW4oZnVuY3Rpb24odCl7aWYoZS5NcCYmIXQuZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGh8fGUudmlkZW8mJiF0LmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKXRocm93IHQuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LnN0b3AoKX0pLG5ldyBET01FeGNlcHRpb24oXCJUaGUgb2JqZWN0IGNhbiBub3QgYmUgZm91bmQgaGVyZS5cIixcIk5vdEZvdW5kRXJyb3JcIik7cmV0dXJuIHR9LGZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLnJlamVjdCh0KGUpKX0pfX1uYXZpZ2F0b3IuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKHQsaSxyKXtyZXR1cm4gbi52ZXJzaW9uPDQ0P2UodCxpLHIpOihjb25zb2xlLndhcm4oXCJuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIGhhcyBiZWVuIHJlcGxhY2VkIGJ5IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhXCIpLHZvaWQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEodCkudGhlbihpLHIpKX19fSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3ZhciBpPXtaQzpmdW5jdGlvbigpe25hdmlnYXRvci5nZXRVc2VyTWVkaWF8fChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhP25hdmlnYXRvci5nZXRVc2VyTWVkaWE9bmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcik6bmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEmJihuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKHQsZSxpKXtuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh0KS50aGVuKGUsaSl9LmJpbmQobmF2aWdhdG9yKSkpfX07dC50PXtaQzppLlpDfX1dKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Yml0bW92aW4uaGl2ZS5taW4uanMubWFwXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvaGl2ZS9iaXRtb3Zpbi5oaXZlLm1pbi5qc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==