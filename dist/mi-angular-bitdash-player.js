!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=139)}([function(t,e,i){"use strict";i.r(e),i.d(e,"__extends",(function(){return n})),i.d(e,"__assign",(function(){return o})),i.d(e,"__rest",(function(){return s})),i.d(e,"__decorate",(function(){return a})),i.d(e,"__param",(function(){return u})),i.d(e,"__metadata",(function(){return h})),i.d(e,"__awaiter",(function(){return c})),i.d(e,"__generator",(function(){return l})),i.d(e,"__exportStar",(function(){return p})),i.d(e,"__values",(function(){return f})),i.d(e,"__read",(function(){return d})),i.d(e,"__spread",(function(){return g})),i.d(e,"__await",(function(){return v})),i.d(e,"__asyncGenerator",(function(){return y})),i.d(e,"__asyncDelegator",(function(){return m})),i.d(e,"__asyncValues",(function(){return E})),i.d(e,"__makeTemplateObject",(function(){return w})),i.d(e,"__importStar",(function(){return b})),i.d(e,"__importDefault",(function(){return S}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};function n(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var o=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t};function s(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&(i[r[n]]=t[r[n]])}return i}function a(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s}function u(t,e){return function(i,r){e(i,r,t)}}function h(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,i,r){return new(i||(i=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?n(t.value):new i((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function l(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[0,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function p(t,e){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function d(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function y(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){n[t]&&(r[t]=function(e){return new Promise((function(i,r){o.push([t,e,i,r])>1||a(t,e)}))})}function a(t,e){try{(i=n[t](e)).value instanceof v?Promise.resolve(i.value.v).then(u,h):c(o[0][2],i)}catch(t){c(o[0][3],t)}var i}function u(t){a("next",t)}function h(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function m(t){var e,i;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,n){t[r]&&(e[r]=function(e){return(i=!i)?{value:v(t[r](e)),done:"return"===r}:n?n(e):e})}}function E(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):f(t)}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function b(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){var r=i(14),n=i(36),o={_emitter:new r,on:function(){o._emitter.on.apply(o._emitter,arguments)},off:function(){o._emitter.off.apply(o._emitter,arguments)},emit:function(){o._emitter.emit.apply(o._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:!1,report:function(t,e,i){if(console&&console.log){i=i||"darkcyan";var r,s={5:"e",4:"w",3:"n",2:"d",1:"v"}[e=e||o.Level.NOTICE],a="[Youbora]"+o._getCurrentTime()+" "+s+":";if(this.emit("log",{level:e,msg:t,prefix:a}),o.logLevel<=e)if(o.plainLogs||document.documentMode)o._plainReport(t,a);else r=e===o.Level.ERROR&&console.error?console.error:e===o.Level.WARNING&&console.warn?console.warn:e===o.Level.DEBUG&&console.debug?console.debug:console.log,a="%c"+a,n(t)?(t.splice(0,0,a,"color: "+i),r.apply(console,t)):r.call(console,a,"color: "+i,t)}},_getCurrentTime:function(){var t=new Date;return"["+("0"+t.getDate()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"."+("00"+t.getMilliseconds()).slice(-3)+"]"},_plainReport:function(t,e){if(t instanceof Array)for(var i in t)o._plainReport(t[i],e);else"string"==typeof t?console.log(e+" "+t):(console.log(e+" <next line>"),console.log(t))},error:function(){o.report([].slice.call(arguments),o.Level.ERROR,"darkred")},warn:function(){o.report([].slice.call(arguments),o.Level.WARNING,"darkorange")},notice:function(){o.report([].slice.call(arguments),o.Level.NOTICE,"darkgreen")},debug:function(){o.report([].slice.call(arguments),o.Level.DEBUG,"indigo")},verbose:function(){o.report([].slice.call(arguments),o.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){if("undefined"!=typeof window&&window.location&&window.location.search){var t=/\?.*&*youbora-debug=(.+)/i.exec(window.location.search);null!==t&&(o.logLevel=t[1]),null!==/\?.*&*youbora-debug=plain/i.exec(window.location.search)&&(o.plainLogs=!0)}}};t.exports=o},function(t,e,i){var r=i(16),n=i(42),o={_emitter:new r,on:function(){o._emitter.on.apply(o._emitter,arguments)},off:function(){o._emitter.off.apply(o._emitter,arguments)},emit:function(){o._emitter.emit.apply(o._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:!1,report:function(t,e,i){if(console&&console.log){i=i||"darkcyan";var r,s={5:"e",4:"w",3:"n",2:"d",1:"v"}[e=e||o.Level.NOTICE],a="[Youbora]"+o._getCurrentTime()+" "+s+":";if(this.emit("log",{level:e,msg:t,prefix:a}),o.logLevel<=e)if(o.plainLogs||document.documentMode)o._plainReport(t,a);else r=e===o.Level.ERROR&&console.error?console.error:e===o.Level.WARNING&&console.warn?console.warn:e===o.Level.DEBUG&&console.debug?console.debug:console.log,a="%c"+a,n(t)?(t.splice(0,0,a,"color: "+i),r.apply(console,t)):r.call(console,a,"color: "+i,t)}},_getCurrentTime:function(){var t=new Date;return"["+("0"+t.getDate()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"."+("00"+t.getMilliseconds()).slice(-3)+"]"},_plainReport:function(t,e){if(t instanceof Array)for(var i in t)o._plainReport(t[i],e);else"string"==typeof t?console.log(e+" "+t):(console.log(e+" <next line>"),console.log(t))},error:function(){o.report([].slice.call(arguments),o.Level.ERROR,"darkred")},warn:function(){o.report([].slice.call(arguments),o.Level.WARNING,"darkorange")},notice:function(){o.report([].slice.call(arguments),o.Level.NOTICE,"darkgreen")},debug:function(){o.report([].slice.call(arguments),o.Level.DEBUG,"indigo")},verbose:function(){o.report([].slice.call(arguments),o.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){if("undefined"!=typeof window&&window.location&&window.location.search){var t=/\?.*&*youbora-debug=(.+)/i.exec(window.location.search);null!==t&&(o.logLevel=t[1]),null!==/\?.*&*youbora-debug=plain/i.exec(window.location.search)&&(o.plainLogs=!0)}}};t.exports=o},function(t,e,i){var r=i(74),n=i(176),o=function(){};o.prototype={constructor:function(){}},o.extend=function(t,e){var i,o=this;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return o.apply(this,arguments)},r(i,o,e),i.prototype=n(o.prototype),t&&r(i.prototype,t),i.prototype.constructor=i,i.__super__=o.prototype,i},t.exports=o},function(t,e,i){var r=i(88),n=i(206),o=function(){};o.prototype={constructor:function(){}},o.extend=function(t,e){var i,o=this;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return o.apply(this,arguments)},r(i,o,e),i.prototype=n(o.prototype),t&&r(i.prototype,t),i.prototype.constructor=i,i.__super__=o.prototype,i},t.exports=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(7),o=i(6),s=i(29),a=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-container",components:[]},i.config),i.componentsToAdd=[],i.componentsToRemove=[],i}return r.__extends(e,t),e.prototype.addComponent=function(t){this.config.components.push(t),this.componentsToAdd.push(t)},e.prototype.removeComponent=function(t){return null!=s.ArrayUtils.remove(this.config.components,t)&&(this.componentsToRemove.push(t),!0)},e.prototype.getComponents=function(){return this.config.components},e.prototype.removeComponents=function(){for(var t=0,e=this.getComponents().slice();t<e.length;t++){var i=e[t];this.removeComponent(i)}},e.prototype.updateComponents=function(){for(var t;t=this.componentsToRemove.shift();)t.getDomElement().remove();for(;t=this.componentsToAdd.shift();)this.innerContainerElement.append(t.getDomElement())},e.prototype.toDomElement=function(){var t=new o.DOM(this.config.tag,{id:this.config.id,class:this.getCssClasses()}),e=new o.DOM(this.config.tag,{class:this.prefixCss("container-wrapper")});this.innerContainerElement=e;for(var i=0,r=this.config.components;i<r.length;i++){var n=r[i];this.componentsToAdd.push(n)}return this.updateComponents(),t.append(e),t},e}(n.Component);e.Container=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){if(this.document=document,t instanceof Array){if(t.length>0&&t[0]instanceof HTMLElement){var i=t;this.elements=i}}else if(t instanceof HTMLElement){var r=t;this.elements=[r]}else if(t instanceof Document)this.elements=null;else if(e){var n=t;r=document.createElement(n);for(var o in e){var s=e[o];r.setAttribute(o,s)}this.elements=[r]}else{var a=t;this.elements=this.findChildElements(a)}}return Object.defineProperty(t.prototype,"length",{get:function(){return this.elements?this.elements.length:0},enumerable:!0,configurable:!0}),t.prototype.getElements=function(){return this.get()},t.prototype.get=function(t){return void 0===t?this.elements:!this.elements||t>=this.elements.length||t<-this.elements.length?void 0:t<0?this.elements[this.elements.length-t]:this.elements[t]},t.prototype.forEach=function(t){this.elements&&this.elements.forEach((function(e){t(e)}))},t.prototype.findChildElementsOfElement=function(t,e){var i=t.querySelectorAll(e);return[].slice.call(i)},t.prototype.findChildElements=function(t){var e=this,i=[];return this.elements?(this.forEach((function(r){i=i.concat(e.findChildElementsOfElement(r,t))})),i):this.findChildElementsOfElement(document,t)},t.prototype.find=function(e){return new t(this.findChildElements(e))},t.prototype.html=function(t){return arguments.length>0?this.setHtml(t):this.getHtml()},t.prototype.getHtml=function(){return this.elements[0].innerHTML},t.prototype.setHtml=function(t){return void 0!==t&&null!=t||(t=""),this.forEach((function(e){e.innerHTML=t})),this},t.prototype.empty=function(){return this.forEach((function(t){t.innerHTML=""})),this},t.prototype.val=function(){var t=this.elements[0];if(t instanceof HTMLSelectElement||t instanceof HTMLInputElement)return t.value;throw new Error("val() not supported for "+typeof t)},t.prototype.attr=function(t,e){return arguments.length>1?this.setAttr(t,e):this.getAttr(t)},t.prototype.getAttr=function(t){return this.elements[0].getAttribute(t)},t.prototype.setAttr=function(t,e){return this.forEach((function(i){i.setAttribute(t,e)})),this},t.prototype.data=function(t,e){return arguments.length>1?this.setData(t,e):this.getData(t)},t.prototype.getData=function(t){return this.elements[0].getAttribute("data-"+t)},t.prototype.setData=function(t,e){return this.forEach((function(i){i.setAttribute("data-"+t,e)})),this},t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.forEach((function(e){t.forEach((function(t){t.elements.forEach((function(i,r){e.appendChild(t.elements[r])}))}))})),this},t.prototype.remove=function(){this.forEach((function(t){var e=t.parentNode;e&&e.removeChild(t)}))},t.prototype.offset=function(){var t=this.elements[0].getBoundingClientRect(),e=document.body.parentElement.getBoundingClientRect();return{top:t.top-e.top,left:t.left-e.left}},t.prototype.width=function(){return this.elements[0].offsetWidth},t.prototype.height=function(){return this.elements[0].offsetHeight},t.prototype.on=function(t,e){var i=this;return t.split(" ").forEach((function(t){null==i.elements?i.document.addEventListener(t,e):i.forEach((function(i){i.addEventListener(t,e)}))})),this},t.prototype.off=function(t,e){var i=this;return t.split(" ").forEach((function(t){null==i.elements?i.document.removeEventListener(t,e):i.forEach((function(i){i.removeEventListener(t,e)}))})),this},t.prototype.addClass=function(t){return this.forEach((function(e){var i;if(e.classList){var r=t.split(" ").filter((function(t){return t.length>0}));r.length>0&&(i=e.classList).add.apply(i,r)}else e.className+=" "+t})),this},t.prototype.removeClass=function(t){return this.forEach((function(e){var i;if(e.classList){var r=t.split(" ").filter((function(t){return t.length>0}));r.length>0&&(i=e.classList).remove.apply(i,r)}else e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")})),this},t.prototype.hasClass=function(t){var e=!1;return this.forEach((function(i){i.classList?i.classList.contains(t)&&(e=!0):new RegExp("(^| )"+t+"( |$)","gi").test(i.className)&&(e=!0)})),e},t.prototype.css=function(t,e){if("string"==typeof t){var i=t;return 2===arguments.length?this.setCss(i,e):this.getCss(i)}var r=t;return this.setCssCollection(r)},t.prototype.getCss=function(t){return getComputedStyle(this.elements[0])[t]},t.prototype.setCss=function(t,e){return this.forEach((function(i){i.style[t]=e})),this},t.prototype.setCssCollection=function(t){return this.forEach((function(e){Object.assign(e.style,t)})),this},t}();e.DOM=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(236),n=i(6),o=i(13),s=function(){function t(t){void 0===t&&(t={}),this.componentEvents={onShow:new o.EventDispatcher,onHide:new o.EventDispatcher,onHoverChanged:new o.EventDispatcher},this.config=this.mergeConfig(t,{tag:"div",id:"mi-wbc-id-"+r.Guid.next(),cssPrefix:"mi-wbc",cssClass:"ui-component",cssClasses:[],hidden:!1},{})}return t.prototype.initialize=function(){this.hidden=this.config.hidden,this.isHidden()&&(this.hidden=!1,this.hide())},t.prototype.configure=function(t,e){var i=this;this.onShow.subscribe((function(){e.onComponentShow.dispatch(i)})),this.onHide.subscribe((function(){e.onComponentHide.dispatch(i)})),this.getDomElement().on("mouseenter",(function(){i.onHoverChangedEvent(!0)})),this.getDomElement().on("mouseleave",(function(){i.onHoverChangedEvent(!1)}))},t.prototype.release=function(){},t.prototype.toDomElement=function(){return new n.DOM(this.config.tag,{id:this.config.id,class:this.getCssClasses()})},t.prototype.getDomElement=function(){return this.element||(this.element=this.toDomElement()),this.element},t.prototype.mergeConfig=function(t,e,i){return Object.assign({},i,e,t)},t.prototype.getCssClasses=function(){var t=this,e=[this.config.cssClass].concat(this.config.cssClasses);return(e=e.map((function(e){return t.prefixCss(e)}))).join(" ").trim()},t.prototype.prefixCss=function(t){return this.config.cssPrefix+"-"+t},t.prototype.getConfig=function(){return this.config},t.prototype.hide=function(){this.hidden||(this.hidden=!0,this.getDomElement().addClass(this.prefixCss(t.CLASS_HIDDEN)),this.onHideEvent())},t.prototype.show=function(){this.hidden&&(this.getDomElement().removeClass(this.prefixCss(t.CLASS_HIDDEN)),this.hidden=!1,this.onShowEvent())},t.prototype.isHidden=function(){return this.hidden},t.prototype.isShown=function(){return!this.isHidden()},t.prototype.toggleHidden=function(){this.isHidden()?this.show():this.hide()},t.prototype.isHovered=function(){return this.hovered},t.prototype.onShowEvent=function(){this.componentEvents.onShow.dispatch(this)},t.prototype.onHideEvent=function(){this.componentEvents.onHide.dispatch(this)},t.prototype.onHoverChangedEvent=function(t){this.hovered=t,this.componentEvents.onHoverChanged.dispatch(this,{hovered:t})},Object.defineProperty(t.prototype,"onShow",{get:function(){return this.componentEvents.onShow.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHide",{get:function(){return this.componentEvents.onHide.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHoverChanged",{get:function(){return this.componentEvents.onHoverChanged.getEvent()},enumerable:!0,configurable:!0}),t.CLASS_HIDDEN="hidden",t}();e.Component=s},function(t,e,i){"use strict";var r=i(66),n=Object.prototype.toString;function o(t){return"[object Array]"===n.call(t)}function s(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===n.call(t)}function h(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===n.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:s,isDate:function(t){return"[object Date]"===n.call(t)},isFile:function(t){return"[object File]"===n.call(t)},isBlob:function(t){return"[object Blob]"===n.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:h,merge:function t(){var e={};function i(i,r){"object"==typeof e[r]&&"object"==typeof i?e[r]=t(e[r],i):e[r]=i}for(var r=0,n=arguments.length;r<n;r++)h(arguments[r],i);return e},deepMerge:function t(){var e={};function i(i,r){"object"==typeof e[r]&&"object"==typeof i?e[r]=t(e[r],i):e[r]="object"==typeof i?t({},i):i}for(var r=0,n=arguments.length;r<n;r++)h(arguments[r],i);return e},extend:function(t,e,i){return h(e,(function(e,n){t[n]=i&&"function"==typeof e?r(e,i):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,i){var r=i(1),n={stripProtocol:function(t){try{return t.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(e){return r.warn(e),t}},addProtocol:function(t,e){try{return!0===e?"https://"+t:0===window.location.protocol.indexOf("http")?"//"+t:"http://"+t}catch(t){return r.warn(t),"http://localhost/"}},parseNumber:function(t,e){return!isNaN(t)&&t>=0&&t!==1/0&&t!==-1/0&&null!=t?t:e},logAllEvents:function(t,e,i){try{if(r.logLevel<=r.Level.DEBUG){i=i||function(t){r.debug("Event: "+t.type)};var n=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];e&&(null===e[0]?(e.shift(),n=e):n=n.concat(e));for(var o=0;o<n.length;o++)"function"==typeof t?t.call(window,n[o],i):t.on?t.on(n[o],i):t.addEventListener&&t.addEventListener(n[o],i)}}catch(t){r.error(t)}},buildRenditionString:function(t,e,i){1===arguments.length&&(i=t,t=null,e=null);var r="";return t&&e&&(r=t+"x"+e),"number"!=typeof i||NaN==i||i<1?r:(r&&(r+="@"),(r+=i<1e3?Math.round(i)+"bps":i<1e6?(i=Math.round(i/1e3))+"Kbps":(i=Math.round(i/1e4)/100)+"Mbps")||null)},buildErrorParams:function(t,e,i,r){if("object"==typeof t)return t;var n={};return n.errorCode=t||"FAILURE",n.msg=e||n.errorCode,n.errorMetadata=i,n.errorLevel=r,n},assign:i(74),isArray:i(36)};t.exports=n},function(t,e,i){var r=i(2),n={stripProtocol:function(t){try{return t.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(e){return r.warn(e),t}},addProtocol:function(t,e){try{return!0===e?"https://"+t:0===window.location.protocol.indexOf("http")?"//"+t:"http://"+t}catch(t){return r.warn(t),"http://localhost/"}},parseNumber:function(t,e){return!isNaN(t)&&t>=0&&t!==1/0&&t!==-1/0&&null!=t?t:e},logAllEvents:function(t,e,i){try{if(r.logLevel<=r.Level.DEBUG){i=i||function(t){r.debug("Event: "+t.type)};var n=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];e&&(null===e[0]?(e.shift(),n=e):n=n.concat(e));for(var o=0;o<n.length;o++)"function"==typeof t?t.call(window,n[o],i):t.on?t.on(n[o],i):t.addEventListener&&t.addEventListener(n[o],i)}}catch(t){r.error(t)}},buildRenditionString:function(t,e,i){1===arguments.length&&(i=t,t=null,e=null);var r="";return t&&e&&(r=t+"x"+e),"number"!=typeof i||NaN==i||i<1?r:(r&&(r+="@"),(r+=i<1e3?Math.round(i)+"bps":i<1e6?(i=Math.round(i/1e3))+"Kbps":(i=Math.round(i/1e4)/100)+"Mbps")||null)},buildErrorParams:function(t,e,i,r){if("object"==typeof t)return t;var n={};return n.errorCode=t||"FAILURE",n.msg=e||n.errorCode,n.errorMetadata=i,n.errorLevel=r,n},assign:i(88),isArray:i(42)};t.exports=n},function(t,e){t.exports={Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_BLOCKED:"/adBlocked",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"},WillSendEvent:{WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_VIDEO_EVENT:"will-send-video-event",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_BLOCKED:"will-send-ad-blocked",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"}}},function(t,e){t.exports={Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_BLOCKED:"/adBlocked",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"},WillSendEvent:{WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_VIDEO_EVENT:"will-send-video-event",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_BLOCKED:"will-send-ad-blocked",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(29),o=function(){function t(){this.listeners=[]}return t.prototype.subscribe=function(t){this.listeners.push(new s(t))},t.prototype.subscribeOnce=function(t){this.listeners.push(new s(t,!0))},t.prototype.subscribeRateLimited=function(t,e){this.listeners.push(new a(t,e))},t.prototype.unsubscribe=function(t){for(var e=0;e<this.listeners.length;e++){var i=this.listeners[e];if(i.listener===t)return n.ArrayUtils.remove(this.listeners,i),!0}return!1},t.prototype.unsubscribeAll=function(){this.listeners=[]},t.prototype.dispatch=function(t,e){void 0===e&&(e=null);for(var i=[],r=0,o=this.listeners.slice(0);r<o.length;r++){var s=o[r];s.fire(t,e),s.isOnce()&&i.push(s)}for(var a=0,u=i;a<u.length;a++){var h=u[a];n.ArrayUtils.remove(this.listeners,h)}},t.prototype.getEvent=function(){return this},t}();e.EventDispatcher=o;var s=function(){function t(t,e){void 0===e&&(e=!1),this.eventListener=t,this.once=e}return Object.defineProperty(t.prototype,"listener",{get:function(){return this.eventListener},enumerable:!0,configurable:!0}),t.prototype.fire=function(t,e){this.eventListener(t,e)},t.prototype.isOnce=function(){return this.once},t}(),a=function(t){function e(e,i){var r=t.call(this,e)||this;return r.rateMs=i,r.lastFireTime=0,r.rateLimitingEventListener=function(t,e){Date.now()-r.lastFireTime>r.rateMs&&(r.fireSuper(t,e),r.lastFireTime=Date.now())},r}return r.__extends(e,t),e.prototype.fireSuper=function(e,i){t.prototype.fire.call(this,e,i)},e.prototype.fire=function(t,e){this.rateLimitingEventListener(t,e)},e}(s)},function(t,e,i){var r=i(3),n=i(36),o=r.extend({on:function(t,e){if(this._listeners=this._listeners||{},"function"==typeof e)return this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},off:function(t,e){if(this._listeners=this._listeners||{},this._listeners[t]){var i=this._listeners[t].indexOf(e);-1!==i&&this._listeners[t].splice(i,1)}return this},emit:function(t,e){return this._listeners=this._listeners||{},e=e||{},n(this._listeners[t])&&this._listeners[t].forEach(this._eachCallback.bind(this,t,e)),n(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,t,e)),this},_eachCallback:function(t,e,i){"function"==typeof i&&i({type:t,data:e,target:this})}});t.exports=o},function(t,e,i){var r=i(3),n=i(1),o=i(9),s=r.extend({constructor:function(t,e,i,r){this.xhr=this.createXHR(),this.host=t||"",this.service=e||"",this.params=i||{},this.options=o.assign({},s.defaultOptions,r),this.retries=0,this.options.cache||this.setParam("timemark",(new Date).getTime())},createXHR:function(){try{return XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return n.error(t),{}}},getXHR:function(){return this.xhr},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(t,e,i){return this.xhr.addEventListener(t,e.bind(this,this,i)),this},off:function(t,e){return this.xhr.removeEventListener(t,e),this},getParamString:function(){try{var t="?";for(var e in this.params){var i=this.params[e];if(null!==i&&"object"==typeof i){var r=JSON.stringify(i);"{}"!==r&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(r)+"&")}else null!=i&&""!==i&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(i)+"&")}return t.slice(0,-1)}catch(t){return n.error(t),""}},getParam:function(t){return this.params[t]},setParam:function(t,e){return this.params[t]=e,this},setBody:function(t){this.body=t},send:function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var t in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(t)&&this.xhr.setRequestHeader(t,this.options.requestHeaders[t]);if(this.options.retryAfter>0&&this.options.maxRetries>0){var e=function(){this.retries>=this.options.maxRetries?n.error('Aborting failed request "'+this.service+'". Max retries reached.'):(n.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms."),setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter))};0===this.retries&&(this.on(s.Event.ERROR,e.bind(this)),this.xhr.onreadystatechange=function(){4===this.xhr.readyState&&this.xhr.status>399&&e.bind(this)()}.bind(this))}for(var i in n.logLevel<=n.Level.VERBOSE&&n.verbose("XHR Req: "+this.getUrl()),s._globalListeners)s._globalListeners[i].forEach(function(t){this.on(i,t)}.bind(this));return this.xhr.send(this.body)}catch(t){n.error(t)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(t,e){s._globalListeners[t]=s._globalListeners[t]||[],s._globalListeners[t].push(e)},offEvery:function(t,e){if(s._globalListeners[t]){var i=s._globalListeners[t].indexOf(e);-1!==i&&s._globalListeners[t].splice(i,1)}}});t.exports=s},function(t,e,i){var r=i(4),n=i(42),o=r.extend({on:function(t,e){if(this._listeners=this._listeners||{},"function"==typeof e)return this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},off:function(t,e){if(this._listeners=this._listeners||{},this._listeners[t]){var i=this._listeners[t].indexOf(e);-1!==i&&this._listeners[t].splice(i,1)}return this},emit:function(t,e){return this._listeners=this._listeners||{},e=e||{},n(this._listeners[t])&&this._listeners[t].forEach(this._eachCallback.bind(this,t,e)),n(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,t,e)),this},_eachCallback:function(t,e,i){"function"==typeof i&&i({type:t,data:e,target:this})}});t.exports=o},function(t,e,i){var r=i(4),n=i(2),o=i(10),s=r.extend({constructor:function(t,e,i,r){this.xhr=this.createXHR(),this.host=t||"",this.service=e||"",this.params=i||{},this.options=o.assign({},s.defaultOptions,r),this.retries=0,this.options.cache||this.setParam("timemark",(new Date).getTime())},createXHR:function(){try{return XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return n.error(t),{}}},getXHR:function(){return this.xhr},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(t,e,i){return this.xhr.addEventListener(t,e.bind(this,this,i)),this},off:function(t,e){return this.xhr.removeEventListener(t,e),this},getParamString:function(){try{var t="?";for(var e in this.params){var i=this.params[e];if(null!==i&&"object"==typeof i){var r=JSON.stringify(i);"{}"!==r&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(r)+"&")}else null!=i&&""!==i&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(i)+"&")}return t.slice(0,-1)}catch(t){return n.error(t),""}},getParam:function(t){return this.params[t]},setParam:function(t,e){return this.params[t]=e,this},setBody:function(t){this.body=t},send:function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var t in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(t)&&this.xhr.setRequestHeader(t,this.options.requestHeaders[t]);if(this.options.retryAfter>0&&this.options.maxRetries>0){var e=function(){this.retries>=this.options.maxRetries?n.error('Aborting failed request "'+this.service+'". Max retries reached.'):(n.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms."),setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter))};0===this.retries&&(this.on(s.Event.ERROR,e.bind(this)),this.xhr.onreadystatechange=function(){4===this.xhr.readyState&&this.xhr.status>399&&e.bind(this)()}.bind(this))}for(var i in n.logLevel<=n.Level.VERBOSE&&n.verbose("XHR Req: "+this.getUrl()),s._globalListeners)s._globalListeners[i].forEach(function(t){this.on(i,t)}.bind(this));return this.xhr.send(this.body)}catch(t){n.error(t)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(t,e){s._globalListeners[t]=s._globalListeners[t]||[],s._globalListeners[t].push(e)},offEvery:function(t,e){if(s._globalListeners[t]){var i=s._globalListeners[t].indexOf(e);-1!==i&&s._globalListeners[t].splice(i,1)}}});t.exports=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){var i=t.call(this,e)||this;return i.settingsManager=e.settingsManager,i.overlay=e.overlay,i}return r.__extends(e,t),e.prototype.toggleOverlayClass=function(t){this.currentCssClass&&(this.overlay.getDomElement().removeClass(this.currentCssClass),this.currentCssClass=null),t&&(this.currentCssClass=this.prefixCss(t),this.overlay.getDomElement().addClass(this.currentCssClass))},e}(i(24).SelectBox);e.SubtitleSettingSelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(23),o=i(13),s=function(t){function e(e){var i=t.call(this,e)||this;i.toggleButtonEvents={onToggle:new o.EventDispatcher,onToggleOn:new o.EventDispatcher,onToggleOff:new o.EventDispatcher};return i.config=i.mergeConfig(e,{cssClass:"ui-togglebutton",onClass:"on",offClass:"off"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(t,e){var i=this.getConfig();this.getDomElement().addClass(this.prefixCss(i.offClass))},e.prototype.on=function(){if(this.isOff()){var t=this.getConfig();this.onState=!0,this.getDomElement().removeClass(this.prefixCss(t.offClass)),this.getDomElement().addClass(this.prefixCss(t.onClass)),this.onToggleEvent(),this.onToggleOnEvent()}},e.prototype.off=function(){if(this.isOn()){var t=this.getConfig();this.onState=!1,this.getDomElement().removeClass(this.prefixCss(t.onClass)),this.getDomElement().addClass(this.prefixCss(t.offClass)),this.onToggleEvent(),this.onToggleOffEvent()}},e.prototype.toggle=function(){this.isOn()?this.off():this.on()},e.prototype.isOn=function(){return this.onState},e.prototype.isOff=function(){return!this.isOn()},e.prototype.onClickEvent=function(){t.prototype.onClickEvent.call(this),this.onToggleEvent()},e.prototype.onToggleEvent=function(){this.toggleButtonEvents.onToggle.dispatch(this)},e.prototype.onToggleOnEvent=function(){this.toggleButtonEvents.onToggleOn.dispatch(this)},e.prototype.onToggleOffEvent=function(){this.toggleButtonEvents.onToggleOff.dispatch(this)},Object.defineProperty(e.prototype,"onToggle",{get:function(){return this.toggleButtonEvents.onToggle.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onToggleOn",{get:function(){return this.toggleButtonEvents.onToggleOn.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onToggleOff",{get:function(){return this.toggleButtonEvents.onToggleOff.getEvent()},enumerable:!0,configurable:!0}),e}(n.Button);e.ToggleButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(7),o=i(6),s=i(13),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.labelEvents={onClick:new s.EventDispatcher,onTextChanged:new s.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-label"},i.config),i.text=i.config.text,i}return r.__extends(e,t),e.prototype.toDomElement=function(){var t=this,e=new o.DOM("span",{id:this.config.id,class:this.getCssClasses()}).html(this.text);return e.on("click",(function(){t.onClickEvent()})),e},e.prototype.setText=function(t){this.text=t,this.getDomElement().html(t),this.onTextChangedEvent(t)},e.prototype.getText=function(){return this.text},e.prototype.clearText=function(){this.getDomElement().html(""),this.onTextChangedEvent(null)},e.prototype.isEmpty=function(){return!this.text},e.prototype.onClickEvent=function(){this.labelEvents.onClick.dispatch(this)},e.prototype.onTextChangedEvent=function(t){this.labelEvents.onTextChanged.dispatch(this,t)},Object.defineProperty(e.prototype,"onClick",{get:function(){return this.labelEvents.onClick.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTextChanged",{get:function(){return this.labelEvents.onTextChanged.getEvent()},enumerable:!0,configurable:!0}),e}(n.Component);e.Label=a},function(t,e,i){var r=i(14).extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(t){},isBlocking:function(t){return this._isBusy},done:function(){this._isBusy=!1,this.emit(r.Event.DONE)},hasToSend:function(t){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}});t.exports=r},function(t,e,i){var r=i(16).extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(t){},isBlocking:function(t){return this._isBusy},done:function(){this._isBusy=!1,this.emit(r.Event.DONE)},hasToSend:function(t){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}});t.exports=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(7),o=i(6),s=i(13),a=function(t){function e(e){var i=t.call(this,e)||this;return i.buttonEvents={onClick:new s.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-button"},i.config),i}return r.__extends(e,t),e.prototype.toDomElement=function(){var t=this,e=new o.DOM("button",{type:"button",id:this.config.id,class:this.getCssClasses()}).append(new o.DOM("span",{class:this.prefixCss("label")}).html(this.config.text));return e.on("click",(function(){t.onClickEvent()})),e},e.prototype.setText=function(t){this.getDomElement().find("."+this.prefixCss("label")).html(t)},e.prototype.onClickEvent=function(){this.buttonEvents.onClick.dispatch(this)},Object.defineProperty(e.prototype,"onClick",{get:function(){return this.buttonEvents.onClick.getEvent()},enumerable:!0,configurable:!0}),e}(n.Component);e.Button=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(106),o=i(6),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-selectbox"},i.config),i}return r.__extends(e,t),e.prototype.toDomElement=function(){var t=this,e=new o.DOM("select",{id:this.config.id,class:this.getCssClasses()});return this.selectElement=e,this.updateDomItems(),e.on("change",(function(){var i=e.val();t.onItemSelectedEvent(i,!1)})),e},e.prototype.updateDomItems=function(t){void 0===t&&(t=null),this.selectElement.empty();for(var e=0,i=this.items;e<i.length;e++){var r=i[e],n=new o.DOM("option",{value:r.key}).html(r.label);r.key===String(t)&&n.attr("selected","selected"),this.selectElement.append(n)}},e.prototype.onItemAddedEvent=function(e){t.prototype.onItemAddedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemRemovedEvent=function(e){t.prototype.onItemRemovedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemSelectedEvent=function(e,i){void 0===i&&(i=!0),t.prototype.onItemSelectedEvent.call(this,e),i&&this.updateDomItems(e)},e}(n.ListSelector);e.SelectBox=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,i){void 0===i&&(i=!1),this.delay=t,this.callback=e,this.repeat=i,this.timeoutHandle=0}return t.prototype.start=function(){return this.reset(),this},t.prototype.clear=function(){this.clearInternal()},t.prototype.reset=function(){var t=this,e=0,i=0;this.clearInternal();var r=function(){if(t.callback(),t.repeat){var n=Date.now(),o=n-e;i=t.delay-o+i,e=n,t.timeoutHandle=setTimeout(r,t.delay+i)}};e=Date.now(),this.timeoutHandle=setTimeout(r,this.delay)},t.prototype.clearInternal=function(){clearTimeout(this.timeoutHandle)},t}();e.Timeout=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(e,r){void 0===r&&(r=t.FORMAT_HHMMSS);var n=e<0;n&&(e=-e);var o=Math.floor(e/3600),s=Math.floor(e/60)-60*o,a=Math.floor(e)%60;return(n?"-":"")+r.replace("hh",i(o,2)).replace("mm",i(s,2)).replace("ss",i(a,2))}function i(t,e){var i=t+"";return"0000000000".substr(0,e-i.length)+i}t.FORMAT_HHMMSS="hh:mm:ss",t.FORMAT_MMSS="mm:ss",t.secondsToTime=e,t.replaceAdMessagePlaceholders=function(t,r,n){var o=new RegExp("\\{(remainingTime|playedTime|adDuration)(}|%((0[1-9]\\d*(\\.\\d+(d|f)|d|f)|\\.\\d+f|d|f)|hh:mm:ss|mm:ss)})","g");return t.replace(o,(function(t){var o=0;return t.indexOf("remainingTime")>-1?o=r?Math.ceil(r-n.getCurrentTime()):n.getDuration()-n.getCurrentTime():t.indexOf("playedTime")>-1?o=n.getCurrentTime():t.indexOf("adDuration")>-1&&(o=n.getDuration()),function(t,r){/%((0[1-9]\d*(\.\d+(d|f)|d|f)|\.\d+f|d|f)|hh:mm:ss|mm:ss)/.test(r)||(r="%d");var n=0,o=r.match(/(%0[1-9]\d*)(?=(\.\d+f|f|d))/);o&&(n=parseInt(o[0].substring(2)));var s=null,a=r.match(/\.\d*(?=f)/);a&&!isNaN(parseInt(a[0].substring(1)))&&(s=parseInt(a[0].substring(1)))>20&&(s=20);if(r.indexOf("f")>-1){var u="";return(u=null!==s?t.toFixed(s):""+t).indexOf(".")>-1?i(u,u.length+(n-u.indexOf("."))):i(u,n)}if(r.indexOf(":")>-1){var h=Math.ceil(t);if(r.indexOf("hh")>-1)return e(h);var c=Math.floor(h/60),l=h%60;return i(c,2)+":"+i(l,2)}return i(Math.ceil(t),n)}(o,t)}))}}(e.StringUtils||(e.StringUtils={}))},function(t,e,i){var r=i(3).extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(t){var e=(new Date).getTime();if(this.startTime){t&&!this.stopTime&&(this.stopTime=e);var i=this.pausetime?e-this.pausetime:0,r=this.stopTime?this.stopTime:e;return this.offset-i+(r-this.startTime)}return-1},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pausetime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var t=new r;return t.startTime=this.startTime,t.stopTime=this.stopTime,t.offset=this.offset,t}});t.exports=r},function(t,e,i){var r=i(4).extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(t){var e=(new Date).getTime();if(this.startTime){t&&!this.stopTime&&(this.stopTime=e);var i=this.pausetime?e-this.pausetime:0,r=this.stopTime?this.stopTime:e;return this.offset-i+(r-this.startTime)}return-1},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pausetime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var t=new r;return t.startTime=this.startTime,t.stopTime=this.stopTime,t.offset=this.offset,t}});t.exports=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.remove=function(t,e){var i=t.indexOf(e);return i>-1?t.splice(i,1)[0]:null}}(e.ArrayUtils||(e.ArrayUtils={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(13),n=i(49);!function(t){var e;!function(t){t[t.IDLE=0]="IDLE",t[t.PREPARED=1]="PREPARED",t[t.PLAYING=2]="PLAYING",t[t.PAUSED=3]="PAUSED",t[t.FINISHED=4]="FINISHED"}(e=t.PlayerState||(t.PlayerState={})),t.isTimeShiftAvailable=function(t){return t.isLive()&&0!==t.getMaxTimeShift()},t.getState=function(t){return t.hasEnded()?e.FINISHED:t.isPlaying()?e.PLAYING:t.isPaused()?e.PAUSED:t.isReady()?e.PREPARED:e.IDLE};var i=function(){function e(t){var e=this;this.timeShiftAvailabilityChangedEvent=new r.EventDispatcher,this.player=t,this.timeShiftAvailable=void 0;var i=function(){e.detect()};t.addEventHandler(t.EVENT.ON_READY,i),t.addEventHandler(t.EVENT.ON_TIME_CHANGED,i)}return e.prototype.detect=function(){if(this.player.isLive()){var e=t.isTimeShiftAvailable(this.player);e!==this.timeShiftAvailable&&(this.timeShiftAvailabilityChangedEvent.dispatch(this.player,{timeShiftAvailable:e}),this.timeShiftAvailable=e)}},Object.defineProperty(e.prototype,"onTimeShiftAvailabilityChanged",{get:function(){return this.timeShiftAvailabilityChangedEvent.getEvent()},enumerable:!0,configurable:!0}),e}();t.TimeShiftAvailabilityDetector=i;var o=function(){function t(t){var e=this;this.liveChangedEvent=new r.EventDispatcher,this.player=t,this.live=void 0;var i=function(){e.detect()};t.addEventHandler(t.EVENT.ON_READY,i),t.addEventHandler(t.EVENT.ON_PLAY,i),n.BrowserUtils.isAndroid&&n.BrowserUtils.isChrome&&t.addEventHandler(t.EVENT.ON_TIME_CHANGED,i)}return t.prototype.detect=function(){var t=this.player.isLive();t!==this.live&&(this.liveChangedEvent.dispatch(this.player,{live:t}),this.live=t)},Object.defineProperty(t.prototype,"onLiveChanged",{get:function(){return this.liveChangedEvent.getEvent()},enumerable:!0,configurable:!0}),t}();t.LiveStreamDetector=o}(e.PlayerUtils||(e.PlayerUtils={}))},function(t,e,i){t.exports=i(174).version},function(t,e,i){var r=i(14),n=i(1),o=i(9),s=i(75),a=i(31),u=i(192),h=i(193),c=i(86),l=r.extend({constructor:function(t){this.flags=new h,this.chronos=new u,this.monitor=null,this.plugin=null,this.player=null,this.setPlayer(t),this.tag=this.player,n.notice("Adapter "+this.getVersion()+" with Lib "+a+" is ready.")},setPlayer:function(t){this.unregisterListeners(),this.player="string"==typeof t?document.getElementById(t):t,this.initializeAdapter(),this.registerListeners()},initializeAdapter:function(){},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.monitor&&this.monitor.stop(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(t,e,i){var r=0;t&&(r|=c.Type.BUFFER),e&&(r|=c.Type.SEEK),this.monitor=new c(this,r,i)},getPlayhead:function(){return null},getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return a+"-generic-js"},getPosition:function(){return null},getCdnTraffic:function(){return s.getCdnTraffic()},getP2PTraffic:function(){return s.getP2PTraffic()},getUploadTraffic:function(){return s.getUploadTraffic()},getIsP2PEnabled:function(){return s.getIsP2PEnabled()},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},getMetrics:function(){return null},fireInit:function(t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start(),this.emit(l.Event.INIT,{params:t}),this.flags.isInited=!0)},fireStart:function(t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start()),this.emit(l.Event.START,{params:t}),this.flags.isInited=!1)},fireJoin:function(t){!this.flags.isStarted&&!this.flags.isInited||this.flags.isJoined||(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),this.emit(l.Event.JOIN,{params:t}))},firePause:function(t){this.flags.isBuffering&&this.fireBufferEnd(),this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),this.emit(l.Event.PAUSE,{params:t}))},fireResume:function(t){this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(l.Event.RESUME,{params:t}))},fireBufferBegin:function(t,e){if(this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!e)return;n.notice("Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();this.flags.isBuffering=!0,this.emit(l.Event.BUFFER_BEGIN,{params:t})}},fireBufferEnd:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(l.Event.BUFFER_END,{params:t}))},cancelBuffer:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},fireSeekBegin:function(t,e){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===e)return;n.notice("Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();this.flags.isSeeking=!0,this.emit(l.Event.SEEK_BEGIN,{params:t})}},fireSeekEnd:function(t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(l.Event.SEEK_END,{params:t}))},cancelSeek:function(t){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireStop:function(t){this.flags.isStarted||this.flags.isInited?(this.monitor&&this.monitor.stop(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),this.emit(l.Event.STOP,{params:t}),this.plugin&&this.plugin._adapter&&this.plugin._adapter.flags.isEnded&&!this.plugin._adapter.flags.isStopped&&(0===this.plugin.options["ad.afterStop"]?this.plugin.fireStop():this.plugin.options["ad.afterStop"]--),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset()):this.plugin&&this.plugin.isInitiated&&!this.getPosition()&&this.plugin.fireStop()},fireCasted:function(t){t||(t={}),t.casted=!0,this.fireStop(t)},fireError:function(t,e,i,r){var n=o.buildErrorParams(t,e,i,r);this.emit(l.Event.ERROR,{params:n})},fireNoServedAd:function(t,e,i,r){var n=o.buildErrorParams(t,e,i,r);n.errorSeverity="AdsNotServed",this.emit(l.Event.ERROR,{params:n})},fireFatalError:function(t,e,i,r){this.monitor&&this.monitor.stop(),this.fireError(t,e,i,r),this.fireStop()},fireClick:function(t){"string"==typeof t&&(t={url:t}),this.emit(l.Event.CLICK,{params:t})},fireBlocked:function(t){this.emit(l.Event.BLOCKED,{params:t})},fireSkip:function(t){null==t&&(t={}),t.skipped=!0,this.fireStop(t)},fireEvent:function(t,e,i){var r={};r.name=t||"",r.dimensions=e||{},r.values=i||{},this.emit(l.Event.VIDEO_EVENT,{params:r})}},{Event:{START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",BLOCKED:"blocked",VIDEO_EVENT:"video-event"},AdPosition:{PREROLL:"pre",MIDROLL:"mid",POSTROLL:"post"}});t.exports=l},function(t,e,i){t.exports=i(204).version},function(t,e,i){var r=i(16),n=i(2),o=i(10),s=i(89),a=i(33),u=i(222),h=i(223),c=i(100),l=r.extend({constructor:function(t){this.flags=new h,this.chronos=new u,this.monitor=null,this.plugin=null,this.player=null,this.setPlayer(t),this.tag=this.player,n.notice("Adapter "+this.getVersion()+" with Lib "+a+" is ready.")},setPlayer:function(t){this.unregisterListeners(),this.player="string"==typeof t?document.getElementById(t):t,this.initializeAdapter(),this.registerListeners()},initializeAdapter:function(){},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.monitor&&this.monitor.stop(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(t,e,i){var r=0;t&&(r|=c.Type.BUFFER),e&&(r|=c.Type.SEEK),this.monitor=new c(this,r,i)},getPlayhead:function(){return null},getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return a+"-generic-js"},getPosition:function(){return null},getCdnTraffic:function(){return s.getCdnTraffic()},getP2PTraffic:function(){return s.getP2PTraffic()},getUploadTraffic:function(){return s.getUploadTraffic()},getIsP2PEnabled:function(){return s.getIsP2PEnabled()},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},getMetrics:function(){return null},fireInit:function(t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start(),this.emit(l.Event.INIT,{params:t}),this.flags.isInited=!0)},fireStart:function(t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start()),this.emit(l.Event.START,{params:t}),this.flags.isInited=!1)},fireJoin:function(t){!this.flags.isStarted&&!this.flags.isInited||this.flags.isJoined||(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),this.emit(l.Event.JOIN,{params:t}))},firePause:function(t){this.flags.isBuffering&&this.fireBufferEnd(),this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),this.emit(l.Event.PAUSE,{params:t}))},fireResume:function(t){this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(l.Event.RESUME,{params:t}))},fireBufferBegin:function(t,e){if(this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!e)return;n.notice("Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();this.flags.isBuffering=!0,this.emit(l.Event.BUFFER_BEGIN,{params:t})}},fireBufferEnd:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(l.Event.BUFFER_END,{params:t}))},cancelBuffer:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},fireSeekBegin:function(t,e){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===e)return;n.notice("Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();this.flags.isSeeking=!0,this.emit(l.Event.SEEK_BEGIN,{params:t})}},fireSeekEnd:function(t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(l.Event.SEEK_END,{params:t}))},cancelSeek:function(t){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireStop:function(t){this.flags.isStarted||this.flags.isInited?(this.monitor&&this.monitor.stop(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),this.emit(l.Event.STOP,{params:t}),this.plugin&&this.plugin._adapter&&this.plugin._adapter.flags.isEnded&&!this.plugin._adapter.flags.isStopped&&(0===this.plugin.options["ad.afterStop"]?this.plugin.fireStop():this.plugin.options["ad.afterStop"]--),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset()):this.plugin&&this.plugin.isInitiated&&!this.getPosition()&&this.plugin.fireStop()},fireCasted:function(t){t||(t={}),t.casted=!0,this.fireStop(t)},fireError:function(t,e,i,r){var n=o.buildErrorParams(t,e,i,r);this.emit(l.Event.ERROR,{params:n})},fireNoServedAd:function(t,e,i,r){var n=o.buildErrorParams(t,e,i,r);n.errorSeverity="AdsNotServed",this.emit(l.Event.ERROR,{params:n})},fireFatalError:function(t,e,i,r){this.monitor&&this.monitor.stop(),this.fireError(t,e,i,r),this.fireStop()},fireClick:function(t){"string"==typeof t&&(t={url:t}),this.emit(l.Event.CLICK,{params:t})},fireBlocked:function(t){this.emit(l.Event.BLOCKED,{params:t})},fireSkip:function(t){null==t&&(t={}),t.skipped=!0,this.fireStop(t)},fireEvent:function(t,e,i){var r={};r.name=t||"",r.dimensions=e||{},r.values=i||{},this.emit(l.Event.VIDEO_EVENT,{params:r})}},{Event:{START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",BLOCKED:"blocked",VIDEO_EVENT:"video-event"},AdPosition:{PREROLL:"pre",MIDROLL:"mid",POSTROLL:"post"}});t.exports=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.TimeChanged="timechanged",t.PLAY="playing",t.ENDED="ended",t.ON_SOURCE_LOADED="onSourceLoaded",t.ON_SOURCE_UNLOADED="onSourceUnloaded"}(e.PlayerEvent||(e.PlayerEvent={}))},function(t,e){t.exports=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){var r=i(3),n=i(27),o=r.extend({constructor:function(t,e){this.callback=t,this.interval=e||5e3,this.isRunning=!1,this._timer=null,this.chrono=new n},start:function(){this.isRunning=!0,this._setTick()},stop:function(){this.isRunning=!1,this._timer&&clearTimeout(this._timer)},_setTick:function(){this.chrono.start(),this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}});t.exports=o},function(t,e,i){var r=i(3),n=i(1),o=i(15),s=i(21),a=r.extend({constructor:function(t){this.transforms=[],this.pluginRef=t,this._requests=[]},sendRequest:function(t,e,i){t&&("function"==typeof e&&t.on(o.Event.SUCCESS,e,i),this._registerRequest(t))},buildRequest:function(t,e,i,r){var n=new o(t,e,i=i||{});"function"==typeof r&&n.on(o.Event.SUCCESS,r),this._registerRequest(n)},addTransform:function(t){t.parse&&t.isBlocking?(this.transforms.push(t),t.on(s.Event.DONE,this._processRequests.bind(this))):n.warn(t+" is not a valid RequestTransform.")},removeTransform:function(t){var e=this.transforms.indexOf(t);-1!==e?this.transforms.splice(e,1):n.warn("Trying to remove unexisting Transform '"+t+"'.")},_registerRequest:function(t){this._requests.push(t),this._processRequests()},_processRequests:function(){var t=this._requests;this._requests=[];for(var e=[];t.length;){var i=t.shift(),r=this._transform(i);r===s.STATE_NO_BLOCKED?(this.pluginRef&&(i.host=this.pluginRef.getHost()),i.send()):r===s.STATE_BLOCKED&&e.push(i)}for(;e.length;)this._requests.push(e.shift())},_transform:function(t){var e=s.STATE_NO_BLOCKED;return this.transforms.forEach((function(i){i.isBlocking(t)?e=s.STATE_BLOCKED:(i.parse(t),i.getState()!==s.STATE_OFFLINE||(e=s.STATE_OFFLINE))})),e}});t.exports=a},function(t,e,i){var r=i(3),n=i(1),o=r.extend({constructor:function(t,e){this.prefix=t||"youbora",this.disableCookies=e},setLocal:function(t,e){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.setItem(this.prefix+"."+t,e);if(!this.disableCookies)return this._setCookie(this.prefix+"."+t,e)}catch(t){n.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},getLocal:function(t){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.getItem(this.prefix+"."+t);if(!this.disableCookies)return this._getCookie(this.prefix+"."+t)}catch(t){n.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},removeLocal:function(t){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.removeItem(this.prefix+"."+t);if(!this.disableCookies)return this._removeCookie(this.prefix+"."+t)}catch(t){n.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},setSession:function(t,e){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.setItem(this.prefix+"."+t,e);if(!this.disableCookies)return this._setCookie(this.prefix+".session."+t,e)}catch(t){n.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getSession:function(t){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.getItem(this.prefix+"."+t);if(!this.disableCookies)return this._getCookie(this.prefix+".session."+t)}catch(t){n.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},removeSession:function(t){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.removeItem(this.prefix+"."+t);if(!this.disableCookies)return this._removeCookie(this.prefix+".session."+t)}catch(t){n.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getStorages:function(t){return this.getSession(t)||this.getLocal(t)},setStorages:function(t,e){this.setSession(t,e),this.setLocal(t,e)},removeStorages:function(t){this.removeSession(t),this.removeLocal(t)},_setCookie:function(t,e){document.cookie=t+"="+e+";"},_getCookie:function(t){for(var e=t+"=",i=decodeURIComponent(document.cookie).split(";"),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null},_removeCookie:function(t){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}});t.exports=o},function(t,e,i){var r=i(3),n=i(1),o=["accountCode","username","anonymousUser","rendition","player","title","title2","live","mediaDuration","mediaResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","obfuscateIp","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","deviceCode","deviceInfo","preloadDuration","referer","userType","streamingProtocol","householdId","experiments","youboraId","fingerprint","npawPluginUUID","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode","libVersion","nodeHost","nodeType","appName","appReleaseVersion","package","saga","tvshow","season","titleEpisode","channel","imdbID","gracenoteID","contentType","genre","contentLanguage","subtitles","cost","price","playbackType","email","drm","videoCodec","audioCodec","codecSettings","codecProfile","containerFormat","contentId","contractedResolution"],s=["playhead","adTitle","adPosition","adDuration","adCampaign","adResource","adPlayerVersion","adProperties","adAdapterVersion","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10"],a=r.extend({constructor:function(t){this._plugin=t,this._adNumber=0,this.lastSent={}},fetchParams:function(t,e,i){t=t||{},e=e||[];for(var r=0;r<e.length;r++){var o=e[r];if(!t[o]){var s=a.getters[o];if(this._plugin[s]){var u=this._plugin[s]();null===u||i&&this.lastSent[o]===u||(t[o]=u,this.lastSent[o]=u)}else n.warn("Trying to call undefined getter "+o+":"+s)}}return t},getGetters:function(){return a.getters},buildBody:function(t){return this.fetchParams(null,a.bodyParams[t],!1)},buildParams:function(t,e){return t=t||{},this.fetchParams(t,a.params[e],!1),this.fetchParams(t,a.differentParams[e],!0),t},getNewAdNumber:function(){var t=this.lastSent.adNumber;return t&&this.lastSent.adPosition===this._plugin.getAdPosition()?t+=1:t=1,this.lastSent.adNumber=t,t},getChangedEntities:function(){return this.fetchParams({},a.differentParams.entities,!0)}},{params:{"/data":["system","pluginVersion","requestNumber","username","fingerprint","npawPluginUUID"],"/init":o,"/start":o,"/joinTime":["joinDuration","playhead","mediaDuration"],"/pause":["playhead"],"/resume":["pauseDuration","playhead"],"/seek":["seekDuration","playhead"],"/bufferUnderrun":["bufferDuration","playhead"],"/error":["player"].concat(o),"/stop":["bitrate","playhead","pauseDuration"],"/infinity/video/event":[],"/adInit":s,"/adStart":s,"/adJoin":["playhead","adPosition","adJoinDuration","adPlayhead"],"/adPause":["playhead","adPosition","adPlayhead"],"/adResume":["playhead","adPosition","adPlayhead","adPauseDuration"],"/adBufferUnderrun":["playhead","adPosition","adPlayhead","adBufferDuration"],"/adStop":["playhead","adPosition","adPlayhead","adBitrate","adTotalDuration","pauseDuration"],"/adClick":["playhead","adPosition","adPlayhead"],"/adError":s,"/adBlocked":s,"/ping":["droppedFrames","playrate","cdnDownloadedTraffic","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent","metrics"],"/infinity/session/start":["accountCode","username","anonymousUser","navContext","route","page","referer","referral","language","deviceCode","youboraId","fingerprint","npawPluginUUID","libVersion","appName","appReleaseVersion"],"/infinity/session/stop":[],"/infinity/session/nav":["navContext","route","page"],"/infinity/session/beat":["sessionMetrics"],"/infinity/event":["accountCode","navContext"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString","subtitles","contentLanguage"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",libVersion:"getLibVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",obfuscateIp:"getObfuscateIp",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",metrics:"getVideoMetrics",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",adPosition:"getAdPosition",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceCode:"getDeviceCode",deviceInfo:"getDeviceInfo",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",preloadDuration:"getPreloadDuration",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",navContext:"getContext",page:"getPageName",cdnDownloadedTraffic:"getCdnTraffic",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",viewJson:"getOfflineView",experiments:"getExperiments",fingerprint:"getFingerprint",npawPluginUUID:"getNpawPluginUUID",youboraId:"getYouboraId",isInfinity:"getIsInfinity",sessionMetrics:"getSessionMetrics",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode",appName:"getAppName",appReleaseVersion:"getAppReleaseVersion",package:"getPackage",saga:"getSaga",tvshow:"getTvShow",season:"getSeason",titleEpisode:"getEpisodeTitle",channel:"getChannel",drm:"getDRM",videoCodec:"getVideoCodec",audioCodec:"getAudioCodec",codecSettings:"getCodecSettings",codecProfile:"getCodecProfile",containerFormat:"getContainerFormat",contentId:"getID",imdbID:"getImdbId",gracenoteID:"getGracenoteID",contentType:"getType",genre:"getGenre",contentLanguage:"getVideoLanguage",subtitles:"getSubtitles",contractedResolution:"getContractedResolution",cost:"getCost",price:"getPrice",playbackType:"getPlaybackType",email:"getEmail"}});t.exports=a},function(t,e,i){var r=i(14),n=i(38),o=i(188),s=r.extend({constructor:function(t){this._plugin=t},andBeyond:function(){s.prototype.begin.apply(this,arguments)},begin:function(t,e){this._comm=new n(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new o(this._plugin)),this._plugin&&this._plugin.storage&&"function"==typeof this._plugin.storage.getLocal&&(this._registeredProperties=this._plugin.storage.getLocal("inifnityRegisteredProperties")),e||this._plugin.getIsSessionExpired()||!this._plugin.storage.getLocal("infinityStarted")?this.fireSessionStart(t,e):(this.fireNav(t),this._sendExtraBeat())},_generateNewContext:function(){var t=btoa((new Date).getTime());this._plugin.storage.setSession("context",t)},_setLastActive:function(){this._firstActive||(this._firstActive=this.getFirstActive()),this._plugin.storage.setStorages("lastactive",(new Date).getTime())},getFirstActive:function(){return Number(this._plugin.getLastActive())||0},getComm:function(){return this._comm},fireSessionStart:function(t,e){this._plugin.storage.setLocal("infinityStarted","true"),this._plugin.storage.removeLocal("infinityStopped"),this.infinityStarted=!0,this.infinityStopped=!1,this._generateNewContext(),this._plugin.viewTransform._parentId=e,this.emit(s.Event.SESSION_START,this._getParamsJson(t,null,null,!0,!0)),this._setLastActive()},fireSessionStop:function(t){this.infinityStopped=!0,this.emit(s.Event.SESSION_STOP,t),this._plugin.storage.removeStorages("data"),this._plugin.storage.removeStorages("session"),this._plugin.storage.removeStorages("lastactive")},newSession:function(t,e){this.fireSessionStop(),this._plugin.storage.removeLocal("data"),this._plugin.setOptions(t),this._plugin.restartViewTransform(),this.fireSessionStart(e)},fireNav:function(t){this.isActive()&&(this._plugin.getContext()||this._generateNewContext(),this.emit(s.Event.NAV,this._getParamsJson(t,null,null,!0)))},_sendExtraBeat:function(){var t=(new Date).getTime();if(this._plugin&&this._plugin._beat){var e=this._plugin._beat.chrono.startTime?t-this._plugin._beat.chrono.startTime:0;this._plugin._sendBeat(e),this._plugin._beat.chrono.startTime=t}this._setLastActive()},fireEvent:function(t,e,i){this.emit(s.Event.EVENT,this._getParamsJson(e,i,t)),this._setLastActive()},register:function(t,e){this._registeredProperties={dimensions:t,values:e},this._plugin.storage.setLocal("inifnityRegisteredProperties",JSON.stringify(this._registeredProperties))},registerOnce:function(t,e){this._registeredProperties||this.register(t,e)},unregister:function(){this._registeredProperties=null,this._plugin.storage.removeLocal("inifnityRegisteredProperties")},_getParamsJson:function(t,e,i,r,n){var o={};if(i&&(o.name=i),o.dimensions=t||{},o.values=e||{},this._registeredProperties){for(var s in this._registeredProperties.dimensions)o.dimensions[s]=this._registeredProperties.dimensions[s];for(var s in this._registeredProperties.values)o.values[s]=this._registeredProperties.values[s]}var a={params:o};return r&&(a.params.dimensions.page&&(a.params.page=a.params.dimensions.page,delete a.params.dimensions.page),a.params.dimensions.route&&(a.params.route=a.params.dimensions.route,delete a.params.dimensions.route),n||delete a.params.dimensions,delete a.params.values),a},isActive:function(){var t=(new Date).getTime();return null!=this._plugin.storage.getLocal("infinityStarted")&&!this._plugin.storage.getLocal("infinityStopped")||Number(this._plugin.getLastActive())+this._plugin.sessionExpire>t}},{Event:{NAV:"nav",SESSION_START:"sessionStart",SESSION_STOP:"sessionStop",BEAT:"beat",EVENT:"event"}});t.exports=s},function(t,e){t.exports=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){var r=i(4),n=i(28),o=r.extend({constructor:function(t,e){this.callback=t,this.interval=e||5e3,this.isRunning=!1,this._timer=null,this.chrono=new n},start:function(){this.isRunning=!0,this._setTick()},stop:function(){this.isRunning=!1,this._timer&&clearTimeout(this._timer)},_setTick:function(){this.chrono.start(),this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}});t.exports=o},function(t,e,i){var r=i(4),n=i(2),o=i(17),s=i(22),a=r.extend({constructor:function(t){this.transforms=[],this.pluginRef=t,this._requests=[]},sendRequest:function(t,e,i){t&&("function"==typeof e&&t.on(o.Event.SUCCESS,e,i),this._registerRequest(t))},buildRequest:function(t,e,i,r){var n=new o(t,e,i=i||{});"function"==typeof r&&n.on(o.Event.SUCCESS,r),this._registerRequest(n)},addTransform:function(t){t.parse&&t.isBlocking?(this.transforms.push(t),t.on(s.Event.DONE,this._processRequests.bind(this))):n.warn(t+" is not a valid RequestTransform.")},removeTransform:function(t){var e=this.transforms.indexOf(t);-1!==e?this.transforms.splice(e,1):n.warn("Trying to remove unexisting Transform '"+t+"'.")},_registerRequest:function(t){this._requests.push(t),this._processRequests()},_processRequests:function(){var t=this._requests;this._requests=[];for(var e=[];t.length;){var i=t.shift(),r=this._transform(i);r===s.STATE_NO_BLOCKED?(this.pluginRef&&(i.host=this.pluginRef.getHost()),i.send()):r===s.STATE_BLOCKED&&e.push(i)}for(;e.length;)this._requests.push(e.shift())},_transform:function(t){var e=s.STATE_NO_BLOCKED;return this.transforms.forEach((function(i){i.isBlocking(t)?e=s.STATE_BLOCKED:(i.parse(t),i.getState()!==s.STATE_OFFLINE||(e=s.STATE_OFFLINE))})),e}});t.exports=a},function(t,e,i){var r=i(4),n=i(2),o=r.extend({constructor:function(t,e){this.prefix=t||"youbora",this.disableCookies=e},setLocal:function(t,e){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.setItem(this.prefix+"."+t,e);if(!this.disableCookies)return this._setCookie(this.prefix+"."+t,e)}catch(t){n.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},getLocal:function(t){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.getItem(this.prefix+"."+t);if(!this.disableCookies)return this._getCookie(this.prefix+"."+t)}catch(t){n.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},removeLocal:function(t){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.removeItem(this.prefix+"."+t);if(!this.disableCookies)return this._removeCookie(this.prefix+"."+t)}catch(t){n.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},setSession:function(t,e){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.setItem(this.prefix+"."+t,e);if(!this.disableCookies)return this._setCookie(this.prefix+".session."+t,e)}catch(t){n.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getSession:function(t){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.getItem(this.prefix+"."+t);if(!this.disableCookies)return this._getCookie(this.prefix+".session."+t)}catch(t){n.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},removeSession:function(t){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.removeItem(this.prefix+"."+t);if(!this.disableCookies)return this._removeCookie(this.prefix+".session."+t)}catch(t){n.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getStorages:function(t){return this.getSession(t)||this.getLocal(t)},setStorages:function(t,e){this.setSession(t,e),this.setLocal(t,e)},removeStorages:function(t){this.removeSession(t),this.removeLocal(t)},_setCookie:function(t,e){document.cookie=t+"="+e+";"},_getCookie:function(t){for(var e=t+"=",i=decodeURIComponent(document.cookie).split(";"),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null},_removeCookie:function(t){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}});t.exports=o},function(t,e,i){var r=i(4),n=i(2),o=["accountCode","username","anonymousUser","rendition","player","title","title2","live","mediaDuration","mediaResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","obfuscateIp","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","deviceCode","deviceInfo","preloadDuration","referer","userType","streamingProtocol","householdId","experiments","youboraId","fingerprint","npawPluginUUID","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode","libVersion","nodeHost","nodeType","appName","appReleaseVersion","package","saga","tvshow","season","titleEpisode","channel","imdbID","gracenoteID","contentType","genre","contentLanguage","subtitles","cost","price","playbackType","email","drm","videoCodec","audioCodec","codecSettings","codecProfile","containerFormat","contentId","contractedResolution"],s=["playhead","adTitle","adPosition","adDuration","adCampaign","adResource","adPlayerVersion","adProperties","adAdapterVersion","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10"],a=r.extend({constructor:function(t){this._plugin=t,this._adNumber=0,this.lastSent={}},fetchParams:function(t,e,i){t=t||{},e=e||[];for(var r=0;r<e.length;r++){var o=e[r];if(!t[o]){var s=a.getters[o];if(this._plugin[s]){var u=this._plugin[s]();null===u||i&&this.lastSent[o]===u||(t[o]=u,this.lastSent[o]=u)}else n.warn("Trying to call undefined getter "+o+":"+s)}}return t},getGetters:function(){return a.getters},buildBody:function(t){return this.fetchParams(null,a.bodyParams[t],!1)},buildParams:function(t,e){return t=t||{},this.fetchParams(t,a.params[e],!1),this.fetchParams(t,a.differentParams[e],!0),t},getNewAdNumber:function(){var t=this.lastSent.adNumber;return t&&this.lastSent.adPosition===this._plugin.getAdPosition()?t+=1:t=1,this.lastSent.adNumber=t,t},getChangedEntities:function(){return this.fetchParams({},a.differentParams.entities,!0)}},{params:{"/data":["system","pluginVersion","requestNumber","username","fingerprint","npawPluginUUID"],"/init":o,"/start":o,"/joinTime":["joinDuration","playhead","mediaDuration"],"/pause":["playhead"],"/resume":["pauseDuration","playhead"],"/seek":["seekDuration","playhead"],"/bufferUnderrun":["bufferDuration","playhead"],"/error":["player"].concat(o),"/stop":["bitrate","playhead","pauseDuration"],"/infinity/video/event":[],"/adInit":s,"/adStart":s,"/adJoin":["playhead","adPosition","adJoinDuration","adPlayhead"],"/adPause":["playhead","adPosition","adPlayhead"],"/adResume":["playhead","adPosition","adPlayhead","adPauseDuration"],"/adBufferUnderrun":["playhead","adPosition","adPlayhead","adBufferDuration"],"/adStop":["playhead","adPosition","adPlayhead","adBitrate","adTotalDuration","pauseDuration"],"/adClick":["playhead","adPosition","adPlayhead"],"/adError":s,"/adBlocked":s,"/ping":["droppedFrames","playrate","cdnDownloadedTraffic","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent","metrics"],"/infinity/session/start":["accountCode","username","anonymousUser","navContext","route","page","referer","referral","language","deviceCode","youboraId","fingerprint","npawPluginUUID","libVersion","appName","appReleaseVersion"],"/infinity/session/stop":[],"/infinity/session/nav":["navContext","route","page"],"/infinity/session/beat":["sessionMetrics"],"/infinity/event":["accountCode","navContext"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString","subtitles","contentLanguage"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",libVersion:"getLibVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",obfuscateIp:"getObfuscateIp",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",metrics:"getVideoMetrics",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",adPosition:"getAdPosition",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceCode:"getDeviceCode",deviceInfo:"getDeviceInfo",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",preloadDuration:"getPreloadDuration",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",navContext:"getContext",page:"getPageName",cdnDownloadedTraffic:"getCdnTraffic",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",viewJson:"getOfflineView",experiments:"getExperiments",fingerprint:"getFingerprint",npawPluginUUID:"getNpawPluginUUID",youboraId:"getYouboraId",isInfinity:"getIsInfinity",sessionMetrics:"getSessionMetrics",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode",appName:"getAppName",appReleaseVersion:"getAppReleaseVersion",package:"getPackage",saga:"getSaga",tvshow:"getTvShow",season:"getSeason",titleEpisode:"getEpisodeTitle",channel:"getChannel",drm:"getDRM",videoCodec:"getVideoCodec",audioCodec:"getAudioCodec",codecSettings:"getCodecSettings",codecProfile:"getCodecProfile",containerFormat:"getContainerFormat",contentId:"getID",imdbID:"getImdbId",gracenoteID:"getGracenoteID",contentType:"getType",genre:"getGenre",contentLanguage:"getVideoLanguage",subtitles:"getSubtitles",contractedResolution:"getContractedResolution",cost:"getCost",price:"getPrice",playbackType:"getPlaybackType",email:"getEmail"}});t.exports=a},function(t,e,i){var r=i(16),n=i(44),o=i(218),s=r.extend({constructor:function(t){this._plugin=t},andBeyond:function(){s.prototype.begin.apply(this,arguments)},begin:function(t,e){this._comm=new n(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new o(this._plugin)),this._plugin&&this._plugin.storage&&"function"==typeof this._plugin.storage.getLocal&&(this._registeredProperties=this._plugin.storage.getLocal("inifnityRegisteredProperties")),e||this._plugin.getIsSessionExpired()||!this._plugin.storage.getLocal("infinityStarted")?this.fireSessionStart(t,e):(this.fireNav(t),this._sendExtraBeat())},_generateNewContext:function(){var t=btoa((new Date).getTime());this._plugin.storage.setSession("context",t)},_setLastActive:function(){this._firstActive||(this._firstActive=this.getFirstActive()),this._plugin.storage.setStorages("lastactive",(new Date).getTime())},getFirstActive:function(){return Number(this._plugin.getLastActive())||0},getComm:function(){return this._comm},fireSessionStart:function(t,e){this._plugin.storage.setLocal("infinityStarted","true"),this._plugin.storage.removeLocal("infinityStopped"),this.infinityStarted=!0,this.infinityStopped=!1,this._generateNewContext(),this._plugin.viewTransform._parentId=e,this.emit(s.Event.SESSION_START,this._getParamsJson(t,null,null,!0,!0)),this._setLastActive()},fireSessionStop:function(t){this.infinityStopped=!0,this.emit(s.Event.SESSION_STOP,t),this._plugin.storage.removeStorages("data"),this._plugin.storage.removeStorages("session"),this._plugin.storage.removeStorages("lastactive")},newSession:function(t,e){this.fireSessionStop(),this._plugin.storage.removeLocal("data"),this._plugin.setOptions(t),this._plugin.restartViewTransform(),this.fireSessionStart(e)},fireNav:function(t){this.isActive()&&(this._plugin.getContext()||this._generateNewContext(),this.emit(s.Event.NAV,this._getParamsJson(t,null,null,!0)))},_sendExtraBeat:function(){var t=(new Date).getTime();if(this._plugin&&this._plugin._beat){var e=this._plugin._beat.chrono.startTime?t-this._plugin._beat.chrono.startTime:0;this._plugin._sendBeat(e),this._plugin._beat.chrono.startTime=t}this._setLastActive()},fireEvent:function(t,e,i){this.emit(s.Event.EVENT,this._getParamsJson(e,i,t)),this._setLastActive()},register:function(t,e){this._registeredProperties={dimensions:t,values:e},this._plugin.storage.setLocal("inifnityRegisteredProperties",JSON.stringify(this._registeredProperties))},registerOnce:function(t,e){this._registeredProperties||this.register(t,e)},unregister:function(){this._registeredProperties=null,this._plugin.storage.removeLocal("inifnityRegisteredProperties")},_getParamsJson:function(t,e,i,r,n){var o={};if(i&&(o.name=i),o.dimensions=t||{},o.values=e||{},this._registeredProperties){for(var s in this._registeredProperties.dimensions)o.dimensions[s]=this._registeredProperties.dimensions[s];for(var s in this._registeredProperties.values)o.values[s]=this._registeredProperties.values[s]}var a={params:o};return r&&(a.params.dimensions.page&&(a.params.page=a.params.dimensions.page,delete a.params.dimensions.page),a.params.dimensions.route&&(a.params.route=a.params.dimensions.route,delete a.params.dimensions.route),n||delete a.params.dimensions,delete a.params.values),a},isActive:function(){var t=(new Date).getTime();return null!=this._plugin.storage.getLocal("infinityStarted")&&!this._plugin.storage.getLocal("infinityStopped")||Number(this._plugin.getLastActive())+this._plugin.sessionExpire>t}},{Event:{NAV:"nav",SESSION_START:"sessionStart",SESSION_STOP:"sessionStop",BEAT:"beat",EVENT:"event"}});t.exports=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(6),s=i(25),a=i(30),u=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-uicontainer",hideDelay:5e3},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i),this.configureUIShowHide(e,i),this.configurePlayerStates(e,i)},e.prototype.configureUIShowHide=function(t,e){var i=this,r=this.getDomElement(),n=this.getConfig();if(-1!==n.hideDelay){var o=!1,a=!1,u=!0,h=function(){o||(e.onControlsShow.dispatch(i),o=!0),a||t.isCasting()||i.uiHideTimeout.start()};this.uiHideTimeout=new s.Timeout(n.hideDelay,(function(){if(o&&!t.isCasting()){var r={};e.onPreviewControlsHide.dispatch(i,r),r.cancel?h():(e.onControlsHide.dispatch(i),o=!1)}})),r.on("touchend",(function(t){o||(u?u=!1:t.preventDefault(),h())})),r.on("mouseenter",(function(){h()})),r.on("mousemove",(function(){h()})),r.on("mouseleave",(function(){a||i.uiHideTimeout.start()})),e.onSeek.subscribe((function(){i.uiHideTimeout.clear(),a=!0})),e.onSeeked.subscribe((function(){a=!1,i.uiHideTimeout.start()})),t.addEventHandler(t.EVENT.ON_CAST_STARTED,(function(){h()}))}else e.onConfigured.subscribe((function(){return e.onControlsShow.dispatch(i)}))},e.prototype.configurePlayerStates=function(t,i){var r=this,n=this.getDomElement(),s=[];for(var u in a.PlayerUtils.PlayerState)if(isNaN(Number(u))){var h=a.PlayerUtils.PlayerState[a.PlayerUtils.PlayerState[u]];s[a.PlayerUtils.PlayerState[u]]=this.prefixCss(e.STATE_PREFIX+h.toLowerCase())}var c=function(){n.removeClass(s[a.PlayerUtils.PlayerState.IDLE]),n.removeClass(s[a.PlayerUtils.PlayerState.PREPARED]),n.removeClass(s[a.PlayerUtils.PlayerState.PLAYING]),n.removeClass(s[a.PlayerUtils.PlayerState.PAUSED]),n.removeClass(s[a.PlayerUtils.PlayerState.FINISHED])};t.addEventHandler(t.EVENT.ON_READY,(function(){c(),n.addClass(s[a.PlayerUtils.PlayerState.PREPARED])})),t.addEventHandler(t.EVENT.ON_PLAY,(function(){c(),n.addClass(s[a.PlayerUtils.PlayerState.PLAYING])})),t.addEventHandler(t.EVENT.ON_PAUSED,(function(){c(),n.addClass(s[a.PlayerUtils.PlayerState.PAUSED])})),t.addEventHandler(t.EVENT.ON_PLAYBACK_FINISHED,(function(){c(),n.addClass(s[a.PlayerUtils.PlayerState.FINISHED])})),t.addEventHandler(t.EVENT.ON_SOURCE_UNLOADED,(function(){c(),n.addClass(s[a.PlayerUtils.PlayerState.IDLE])})),n.addClass(s[a.PlayerUtils.getState(t)]),t.addEventHandler(t.EVENT.ON_FULLSCREEN_ENTER,(function(){n.addClass(r.prefixCss(e.FULLSCREEN))})),t.addEventHandler(t.EVENT.ON_FULLSCREEN_EXIT,(function(){n.removeClass(r.prefixCss(e.FULLSCREEN))})),t.isFullscreen()&&n.addClass(this.prefixCss(e.FULLSCREEN)),t.addEventHandler(t.EVENT.ON_STALL_STARTED,(function(){n.addClass(r.prefixCss(e.BUFFERING))})),t.addEventHandler(t.EVENT.ON_STALL_ENDED,(function(){n.removeClass(r.prefixCss(e.BUFFERING))})),t.isStalled()&&n.addClass(this.prefixCss(e.BUFFERING)),t.addEventHandler(t.EVENT.ON_CAST_STARTED,(function(){n.addClass(r.prefixCss(e.REMOTE_CONTROL))})),t.addEventHandler(t.EVENT.ON_CAST_STOPPED,(function(){n.removeClass(r.prefixCss(e.REMOTE_CONTROL))})),t.isCasting()&&n.addClass(this.prefixCss(e.REMOTE_CONTROL)),i.onControlsShow.subscribe((function(){n.removeClass(r.prefixCss(e.CONTROLS_HIDDEN)),n.addClass(r.prefixCss(e.CONTROLS_SHOWN))})),i.onControlsHide.subscribe((function(){n.removeClass(r.prefixCss(e.CONTROLS_SHOWN)),n.addClass(r.prefixCss(e.CONTROLS_HIDDEN))}));var l=function(t,e){n.removeClass(r.prefixCss("layout-max-width-400")),n.removeClass(r.prefixCss("layout-max-width-600")),n.removeClass(r.prefixCss("layout-max-width-800")),n.removeClass(r.prefixCss("layout-max-width-1200")),t<=400?n.addClass(r.prefixCss("layout-max-width-400")):t<=600?n.addClass(r.prefixCss("layout-max-width-600")):t<=800?n.addClass(r.prefixCss("layout-max-width-800")):t<=1200&&n.addClass(r.prefixCss("layout-max-width-1200"))};t.addEventHandler(t.EVENT.ON_PLAYER_RESIZE,(function(t){var e=Math.round(Number(t.width.substring(0,t.width.length-2)));Math.round(Number(t.height.substring(0,t.height.length-2)));l(e)})),l(new o.DOM(t.getFigure()).width(),new o.DOM(t.getFigure()).height())},e.prototype.release=function(){t.prototype.release.call(this),this.uiHideTimeout.clear()},e.prototype.toDomElement=function(){var e=t.prototype.toDomElement.call(this);return document&&void 0!==document.createElement("p").style.flex?e.addClass(this.prefixCss("flexbox")):e.addClass(this.prefixCss("no-flexbox")),e},e.STATE_PREFIX="player-state-",e.FULLSCREEN="fullscreen",e.BUFFERING="buffering",e.REMOTE_CONTROL="remote-control",e.CONTROLS_SHOWN="controls-shown",e.CONTROLS_HIDDEN="controls-hidden",e}(n.Container);e.UIContainer=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.isMobile=navigator&&navigator.userAgent&&/Mobi/.test(navigator.userAgent),t.isChrome=navigator&&navigator.userAgent&&/Chrome/.test(navigator.userAgent),t.isAndroid=navigator&&navigator.userAgent&&/Android/.test(navigator.userAgent)}(e.BrowserUtils||(e.BrowserUtils={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(19),o=i(30),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-playbacktogglebutton",text:"Play/Pause"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(i,r,n){var s=this;void 0===n&&(n=!0),t.prototype.configure.call(this,i,r);var a=!1,u=function(t){a||(i.isPlaying()?s.on():s.off())};i.addEventHandler(i.EVENT.ON_PLAY,u),i.addEventHandler(i.EVENT.ON_PAUSED,u),i.EVENT.ON_PLAYING&&i.addEventHandler(i.EVENT.ON_PLAYING,u),i.addEventHandler(i.EVENT.ON_SOURCE_LOADED,u),i.addEventHandler(i.EVENT.ON_SOURCE_UNLOADED,u),i.addEventHandler(i.EVENT.ON_PLAYBACK_FINISHED,u),i.addEventHandler(i.EVENT.ON_CAST_STARTED,u),i.addEventHandler(i.EVENT.ON_CAST_PLAYING,u),i.addEventHandler(i.EVENT.ON_CAST_PAUSED,u),i.addEventHandler(i.EVENT.ON_CAST_PLAYBACK_FINISHED,u),i.addEventHandler(i.EVENT.ON_WARNING,(function(t){5008===t.code&&s.off()}));var h=new o.PlayerUtils.TimeShiftAvailabilityDetector(i);h.onTimeShiftAvailabilityChanged.subscribe((function(t,i){i.timeShiftAvailable?s.getDomElement().removeClass(s.prefixCss(e.CLASS_STOPTOGGLE)):s.getDomElement().addClass(s.prefixCss(e.CLASS_STOPTOGGLE))})),h.detect(),n&&this.onClick.subscribe((function(){i.isPlaying()?i.pause("ui"):i.play("ui")})),r.onSeek.subscribe((function(){a=!0})),r.onSeeked.subscribe((function(){a=!1})),u()},e.CLASS_STOPTOGGLE="stoptoggle",e}(n.ToggleButton);e.PlaybackToggleButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-volumetogglebutton",text:"Volume/Mute",onClass:"muted",offClass:"unmuted"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=function(){e.isMuted()?(r.on(),e.getVolume()<10&&e.setVolume(10)):r.off()},o=function(){var t=Math.ceil(e.getVolume()/10);r.getDomElement().data(r.prefixCss("volume-level-tens"),String(t)),0===t&&r.off()};e.addEventHandler(e.EVENT.ON_MUTED,n),e.addEventHandler(e.EVENT.ON_UNMUTED,n),e.addEventHandler(e.EVENT.ON_VOLUME_CHANGED,o),this.onClick.subscribe((function(){e.isMuted()?e.unmute("ui-volumetogglebutton"):e.mute("ui-volumetogglebutton")})),n(),o()},e}(i(19).ToggleButton);e.VolumeToggleButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(7),o=i(6),s=i(13),a=i(25),u=i(30),h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.playbackPositionPercentage=0,i.touchSupported="ontouchstart"in window,i.seekBarEvents={onSeek:new s.EventDispatcher,onSeekPreview:new s.EventDispatcher,onSeeked:new s.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-seekbar",vertical:!1,smoothPlaybackPositionUpdateIntervalMs:50},i.config),i.label=i.config.label,i.timelineMarkers=[],i}return r.__extends(e,t),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.hasLabel()&&this.getLabel().initialize()},e.prototype.configure=function(i,r,n){var o=this;if(void 0===n&&(n=!0),t.prototype.configure.call(this,i,r),this.setPosition(this.seekBarBackdrop,100),n){var s=!1,a=!1,h=function(t,r){if(void 0===t&&(t=null),void 0===r&&(r=!1),!a)if(i.isLive()){if(0===i.getMaxTimeShift())o.setPlaybackPosition(100);else{var n=100-100/i.getMaxTimeShift()*i.getTimeShift();o.setPlaybackPosition(n)}o.setBufferPosition(100)}else{n=100/i.getDuration()*i.getCurrentTime();var s=i.getVideoBufferLength(),u=i.getAudioBufferLength(),h=Math.min(null!=s?s:Number.MAX_VALUE,null!=u?u:Number.MAX_VALUE);h===Number.MAX_VALUE&&(h=0);var c=100/i.getDuration()*h;(o.config.smoothPlaybackPositionUpdateIntervalMs===e.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED||r||i.isPaused()||i.isPaused()===i.isPlaying())&&o.setPlaybackPosition(n),o.setBufferPosition(n+c)}};i.addEventHandler(i.EVENT.ON_READY,h),i.addEventHandler(i.EVENT.ON_TIME_CHANGED,h),i.addEventHandler(i.EVENT.ON_STALL_ENDED,h),i.addEventHandler(i.EVENT.ON_SEEKED,h),i.addEventHandler(i.EVENT.ON_TIME_SHIFTED,h),i.addEventHandler(i.EVENT.ON_SEGMENT_REQUEST_FINISHED,h),i.addEventHandler(i.EVENT.ON_CAST_TIME_UPDATED,h),this.configureLivePausedTimeshiftUpdater(i,r,h),i.addEventHandler(i.EVENT.ON_SEEK,(function(){o.setSeeking(!0)})),i.addEventHandler(i.EVENT.ON_SEEKED,(function(){o.setSeeking(!1)})),i.addEventHandler(i.EVENT.ON_TIME_SHIFT,(function(){o.setSeeking(!0)})),i.addEventHandler(i.EVENT.ON_TIME_SHIFTED,(function(){o.setSeeking(!1)}));var c=function(t){i.isLive()?i.timeShift(i.getMaxTimeShift()-i.getMaxTimeShift()*(t/100),"ui"):i.seek(i.getDuration()*(t/100),"ui")};this.onSeek.subscribe((function(t){a=!0,r.onSeek.dispatch(t),(s=i.isPlaying())&&i.pause("ui")})),this.onSeekPreview.subscribe((function(t,e){r.onSeekPreview.dispatch(t,e)})),this.onSeekPreview.subscribeRateLimited((function(t,e){e.scrubbing&&c(e.position)}),200),this.onSeeked.subscribe((function(t,e){a=!1,c(e),s&&i.play("ui"),r.onSeeked.dispatch(t)})),this.hasLabel()&&this.getLabel().configure(i,r);var l=!1,p=!1,f=function(t,e){t&&!e?o.hide():o.show(),h(null,!0),o.refreshPlaybackPosition()},d=new u.PlayerUtils.LiveStreamDetector(i);d.onLiveChanged.subscribe((function(t,e){l=e.live,f(l,p)}));var g=new u.PlayerUtils.TimeShiftAvailabilityDetector(i);g.onTimeShiftAvailabilityChanged.subscribe((function(t,e){p=e.timeShiftAvailable,f(l,p)})),d.detect(),g.detect(),i.addEventHandler(i.EVENT.ON_PLAYER_RESIZE,(function(){o.refreshPlaybackPosition()})),r.onConfigured.subscribe((function(){o.refreshPlaybackPosition()})),i.addEventHandler(i.EVENT.ON_READY,(function(){o.refreshPlaybackPosition()})),h(),this.setBufferPosition(0),this.setSeekPosition(0),this.config.smoothPlaybackPositionUpdateIntervalMs!==e.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED&&this.configureSmoothPlaybackPositionUpdater(i,r),this.configureMarkers(i,r)}},e.prototype.configureLivePausedTimeshiftUpdater=function(t,e,i){var r=new a.Timeout(1e3,i,!0);t.addEventHandler(t.EVENT.ON_PAUSED,(function(){t.isLive()&&t.getMaxTimeShift()<0&&r.start()})),t.addEventHandler(t.EVENT.ON_PLAY,(function(){return r.clear()}))},e.prototype.configureSmoothPlaybackPositionUpdater=function(t,e){var i=this,r=0,n=0;this.smoothPlaybackPositionUpdater=new a.Timeout(50,(function(){r+=.05,n=t.getCurrentTime();var e=r-n;Math.abs(e)>2?r=n:e<=-.05?r+=.05:e>=.05&&(r-=.05);var o=100/t.getDuration()*r;i.setPlaybackPosition(o)}),!0);var o=function(){t.isLive()||(r=t.getCurrentTime(),i.smoothPlaybackPositionUpdater.start())},s=function(){i.smoothPlaybackPositionUpdater.clear()};t.addEventHandler(t.EVENT.ON_PLAY,o),t.addEventHandler(t.EVENT.ON_CAST_PLAYING,o),t.addEventHandler(t.EVENT.ON_PAUSED,s),t.addEventHandler(t.EVENT.ON_CAST_PAUSED,s),t.addEventHandler(t.EVENT.ON_PLAYBACK_FINISHED,s),t.addEventHandler(t.EVENT.ON_SEEKED,(function(){r=t.getCurrentTime()})),t.isPlaying()&&o()},e.prototype.configureMarkers=function(t,e){var i=this,r=function(){i.timelineMarkers=[],i.updateMarkers()},n=function(){r();var n=t.getDuration();if(n!==1/0){for(var o=0,s=e.getConfig().metadata.markers;o<s.length;o++){var a=s[o],u=100/n*a.time,h=100/n*a.duration;i.timelineMarkers.push({marker:a,position:u,duration:h})}i.updateMarkers()}};t.addEventHandler(t.EVENT.ON_READY,n),t.addEventHandler(t.EVENT.ON_SOURCE_UNLOADED,r),t.addEventHandler(t.EVENT.ON_PLAYER_RESIZE,(function(){return i.updateMarkers()})),e.getConfig().events.onUpdated.subscribe(n),e.onRelease.subscribe((function(){return e.getConfig().events.onUpdated.unsubscribe(n)})),n()},e.prototype.release=function(){t.prototype.release.call(this),this.smoothPlaybackPositionUpdater&&this.smoothPlaybackPositionUpdater.clear()},e.prototype.toDomElement=function(){var t=this;this.config.vertical&&this.config.cssClasses.push("vertical");var e=new o.DOM("div",{id:this.config.id,class:this.getCssClasses()}),i=new o.DOM("div",{class:this.prefixCss("seekbar")});this.seekBar=i;var r=new o.DOM("div",{class:this.prefixCss("seekbar-bufferlevel")});this.seekBarBufferPosition=r;var n=new o.DOM("div",{class:this.prefixCss("seekbar-playbackposition")});this.seekBarPlaybackPosition=n;var s=new o.DOM("div",{class:this.prefixCss("seekbar-playbackposition-marker")});this.seekBarPlaybackPositionMarker=s;var a=new o.DOM("div",{class:this.prefixCss("seekbar-seekposition")});this.seekBarSeekPosition=a;var u=new o.DOM("div",{class:this.prefixCss("seekbar-backdrop")});this.seekBarBackdrop=u;var h=new o.DOM("div",{class:this.prefixCss("seekbar-markers")});this.seekBarMarkersContainer=h,i.append(this.seekBarBackdrop,this.seekBarBufferPosition,this.seekBarSeekPosition,this.seekBarPlaybackPosition,this.seekBarMarkersContainer,this.seekBarPlaybackPositionMarker);var c=!1,l=function(e){e.preventDefault(),e.stopPropagation();var i=100*t.getOffset(e);t.setSeekPosition(i),t.setPlaybackPosition(i),t.onSeekPreviewEvent(i,!0)},p=function(e){e.preventDefault(),new o.DOM(document).off("touchmove mousemove",l),new o.DOM(document).off("touchend mouseup",p);var i=100*t.getOffset(e),r=t.getMarkerAtPosition(i);t.setSeeking(!1),c=!1,t.onSeekedEvent(r?r.position:i)};return i.on("touchstart mousedown",(function(e){var i=t.touchSupported&&e instanceof TouchEvent;e.preventDefault(),e.stopPropagation(),t.setSeeking(!0),c=!0,t.onSeekEvent(),new o.DOM(document).on(i?"touchmove":"mousemove",l),new o.DOM(document).on(i?"touchend":"mouseup",p)})),i.on("touchmove mousemove",(function(e){e.preventDefault(),c&&(e.stopPropagation(),l(e));var i=100*t.getOffset(e);t.setSeekPosition(i),t.onSeekPreviewEvent(i,!1),t.hasLabel()&&t.getLabel().isHidden()&&t.getLabel().show()})),i.on("touchend mouseleave",(function(e){e.preventDefault(),t.setSeekPosition(0),t.hasLabel()&&t.getLabel().hide()})),e.append(i),this.label&&e.append(this.label.getDomElement()),e},e.prototype.updateMarkers=function(){var t=this;this.seekBarMarkersContainer.empty();for(var e=this.seekBar.width(),i=0,r=this.timelineMarkers;i<r.length;i++){var n=r[i],s=["seekbar-marker"].concat(n.marker.cssClasses||[]).map((function(e){return t.prefixCss(e)})),a={width:n.position+"%"};if(n.duration>0){var u=Math.round(e/100*n.duration);a["border-right-width"]=u+"px",a["margin-left"]="0"}this.seekBarMarkersContainer.append(new o.DOM("div",{class:s.join(" "),"data-marker-time":String(n.marker.time),"data-marker-title":String(n.marker.title)}).css(a))}},e.prototype.getMarkerAtPosition=function(t){if(this.timelineMarkers.length>0)for(var e=0,i=this.timelineMarkers;e<i.length;e++){var r=i[e];if(r.duration>0&&t>=r.position-1&&t<=r.position+r.duration+1)return r;if(t>=r.position-1&&t<=r.position+1)return r}return null},e.prototype.getHorizontalOffset=function(t){var e=this.seekBar.offset().left,i=1/this.seekBar.width()*(t-e);return this.sanitizeOffset(i)},e.prototype.getVerticalOffset=function(t){var e=this.seekBar.offset().top,i=1/this.seekBar.height()*(t-e);return 1-this.sanitizeOffset(i)},e.prototype.getOffset=function(t){return this.touchSupported&&t instanceof TouchEvent?this.config.vertical?this.getVerticalOffset("touchend"===t.type?t.changedTouches[0].pageY:t.touches[0].pageY):this.getHorizontalOffset("touchend"===t.type?t.changedTouches[0].pageX:t.touches[0].pageX):t instanceof MouseEvent?this.config.vertical?this.getVerticalOffset(t.pageY):this.getHorizontalOffset(t.pageX):(console&&console.warn("invalid event"),0)},e.prototype.sanitizeOffset=function(t){return t<0?t=0:t>1&&(t=1),t},e.prototype.setPlaybackPosition=function(t){this.playbackPositionPercentage=t,this.setPosition(this.seekBarPlaybackPosition,t);var e=(this.config.vertical?this.seekBar.height()-this.seekBarPlaybackPositionMarker.height():this.seekBar.width())/100*t;this.config.vertical&&(e=this.seekBar.height()-e-this.seekBarPlaybackPositionMarker.height());var i=this.config.vertical?{transform:"translateY("+e+"px)","-ms-transform":"translateY("+e+"px)","-webkit-transform":"translateY("+e+"px)"}:{transform:"translateX("+e+"px)","-ms-transform":"translateX("+e+"px)","-webkit-transform":"translateX("+e+"px)"};this.seekBarPlaybackPositionMarker.css(i)},e.prototype.refreshPlaybackPosition=function(){this.setPlaybackPosition(this.playbackPositionPercentage)},e.prototype.setBufferPosition=function(t){this.setPosition(this.seekBarBufferPosition,t)},e.prototype.setSeekPosition=function(t){this.setPosition(this.seekBarSeekPosition,t)},e.prototype.setPosition=function(t,e){var i=e/100;i>=.99999&&i<=1.00001&&(i=.99999);var r=this.config.vertical?{transform:"scaleY("+i+")","-ms-transform":"scaleY("+i+")","-webkit-transform":"scaleY("+i+")"}:{transform:"scaleX("+i+")","-ms-transform":"scaleX("+i+")","-webkit-transform":"scaleX("+i+")"};t.css(r)},e.prototype.setSeeking=function(t){t?this.getDomElement().addClass(this.prefixCss(e.CLASS_SEEKING)):this.getDomElement().removeClass(this.prefixCss(e.CLASS_SEEKING))},e.prototype.isSeeking=function(){return this.getDomElement().hasClass(this.prefixCss(e.CLASS_SEEKING))},e.prototype.hasLabel=function(){return null!=this.label},e.prototype.getLabel=function(){return this.label},e.prototype.onSeekEvent=function(){this.seekBarEvents.onSeek.dispatch(this)},e.prototype.onSeekPreviewEvent=function(t,e){var i=this.getMarkerAtPosition(t),r=t;i&&(i.duration>0?t<i.position?r=i.position:t>i.position+i.duration&&(r=i.position+i.duration):r=i.position),this.label&&this.label.getDomElement().css({left:r+"%"}),this.seekBarEvents.onSeekPreview.dispatch(this,{scrubbing:e,position:r,marker:i})},e.prototype.onSeekedEvent=function(t){this.seekBarEvents.onSeeked.dispatch(this,t)},Object.defineProperty(e.prototype,"onSeek",{get:function(){return this.seekBarEvents.onSeek.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSeekPreview",{get:function(){return this.seekBarEvents.onSeekPreview.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSeeked",{get:function(){return this.seekBarEvents.onSeeked.getEvent()},enumerable:!0,configurable:!0}),e.prototype.onShowEvent=function(){t.prototype.onShowEvent.call(this),this.refreshPlaybackPosition()},e.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED=-1,e.CLASS_SEEKING="seeking",e}(n.Component);e.SeekBar=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(54),s=i(55),a=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-controlbar",hidden:!0},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var a=0;o.UIUtils.traverseTree(this,(function(t){t instanceof n.Container||t instanceof s.Spacer||t.onHoverChanged.subscribe((function(t,e){e.hovered?a++:a--}))})),i.onControlsShow.subscribe((function(){r.show()})),i.onPreviewControlsHide.subscribe((function(t,e){e.cancel=a>0})),i.onControlsHide.subscribe((function(){r.hide()}))},e}(n.Container);e.ControlBar=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(5);!function(t){t.traverseTree=function(t,e){var i=function(t,n){if(e(t,n),t instanceof r.Container)for(var o=0,s=t.getComponents();o<s.length;o++){var a=s[o];i(a,t)}};i(t)}}(e.UIUtils||(e.UIUtils={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-spacer"},i.config),i}return r.__extends(e,t),e.prototype.onShowEvent=function(){},e.prototype.onHideEvent=function(){},e.prototype.onHoverChangedEvent=function(t){},e}(i(7).Component);e.Spacer=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(7),s=i(24),a=i(20),u=i(57),h=i(58),c=i(25),l=i(13),p=function(t){function e(e){var i=t.call(this,e)||this;return i.settingsPanelEvents={onSettingsStateChanged:new l.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-settings-panel",hideDelay:3e3},i.config),i}return r.__extends(e,t),e.prototype.configure=function(i,r){var n=this;t.prototype.configure.call(this,i,r);var o=this.getConfig();o.hideDelay>-1&&(this.hideTimeout=new c.Timeout(o.hideDelay,(function(){n.hide(),n.hideHoveredSelectBoxes()})),this.onShow.subscribe((function(){n.hideTimeout.start()})),this.getDomElement().on("mouseenter",(function(){n.hideTimeout.clear()})),this.getDomElement().on("mouseleave",(function(){n.hideTimeout.reset()})),this.onHide.subscribe((function(){n.hideTimeout.clear()})));for(var s=function(){n.onSettingsStateChangedEvent();for(var t=null,i=0,r=n.getItems();i<r.length;i++){var o=r[i];o.getDomElement().removeClass(n.prefixCss(e.CLASS_LAST)),o.isShown()&&(t=o)}t&&t.getDomElement().addClass(n.prefixCss(e.CLASS_LAST))},a=0,u=this.getItems();a<u.length;a++){u[a].onActiveChanged.subscribe(s)}},e.prototype.hideHoveredSelectBoxes=function(){this.getItems().forEach((function(t){if(t.isActive()&&t.setting instanceof s.SelectBox){var e=t.setting,i=e.getDomElement().css("display");e.getDomElement().css("display","none"),window.requestAnimationFrame?requestAnimationFrame((function(){e.getDomElement().css("display",i)})):e.getDomElement().css("display",i)}}))},e.prototype.release=function(){t.prototype.release.call(this),this.hideTimeout&&this.hideTimeout.clear()},e.prototype.hasActiveSettings=function(){for(var t=0,e=this.getItems();t<e.length;t++){if(e[t].isActive())return!0}return!1},e.prototype.getItems=function(){return this.config.components.filter((function(t){return t instanceof f}))},e.prototype.onSettingsStateChangedEvent=function(){this.settingsPanelEvents.onSettingsStateChanged.dispatch(this)},Object.defineProperty(e.prototype,"onSettingsStateChanged",{get:function(){return this.settingsPanelEvents.onSettingsStateChanged.getEvent()},enumerable:!0,configurable:!0}),e.CLASS_LAST="last",e}(n.Container);e.SettingsPanel=p;var f=function(t){function e(e,i,r){void 0===r&&(r={});var n=t.call(this,r)||this;return n.settingsPanelItemEvents={onActiveChanged:new l.EventDispatcher},n.setting=i,n.config=n.mergeConfig(r,{cssClass:"ui-settings-panel-item"},n.config),null!==e&&(e instanceof o.Component?n.label=e:n.label=new a.Label({text:e}),n.addComponent(n.label)),n.addComponent(n.setting),n}return r.__extends(e,t),e.prototype.configure=function(t,e){var i=this;if(this.setting instanceof s.SelectBox){var r=function(){if(i.setting instanceof s.SelectBox){var t=2;(i.setting instanceof u.VideoQualitySelectBox&&i.setting.hasAutoItem()||i.setting instanceof h.AudioQualitySelectBox)&&(t=3),i.setting.itemCount()<t?i.hide():i.show(),i.onActiveChangedEvent()}};this.setting.onItemAdded.subscribe(r),this.setting.onItemRemoved.subscribe(r),r()}},e.prototype.isActive=function(){return this.isShown()},e.prototype.onActiveChangedEvent=function(){this.settingsPanelItemEvents.onActiveChanged.dispatch(this)},Object.defineProperty(e.prototype,"onActiveChanged",{get:function(){return this.settingsPanelItemEvents.onActiveChanged.getEvent()},enumerable:!0,configurable:!0}),e}(n.Container);e.SettingsPanelItem=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=function(){if(e.getVideoQuality)r.selectItem(e.getVideoQuality().id);else{var t=e.getDownloadedVideoData();r.selectItem(t.isAuto?"auto":t.id)}},o=function(){var t=e.getAvailableVideoQualities();r.clearItems(),r.hasAuto="progressive"!==e.getStreamType(),r.hasAuto&&r.addItem("auto","auto");for(var i=0,o=t;i<o.length;i++){var s=o[i];r.addItem(s.id,s.label)}n()};this.onItemSelected.subscribe((function(t,i){e.setVideoQuality(i)})),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),e.EVENT.ON_VIDEO_QUALITY_CHANGED?e.addEventHandler(e.EVENT.ON_VIDEO_QUALITY_CHANGED,n):e.addEventHandler(e.EVENT.ON_VIDEO_DOWNLOAD_QUALITY_CHANGE,n)},e.prototype.hasAutoItem=function(){return this.hasAuto},e}(i(24).SelectBox);e.VideoQualitySelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=function(){if(e.getAudioQuality)r.selectItem(e.getAudioQuality().id);else{var t=e.getDownloadedAudioData();r.selectItem(t.isAuto?"auto":t.id)}},o=function(){var t=e.getAvailableAudioQualities();r.clearItems(),r.addItem("auto","auto");for(var i=0,o=t;i<o.length;i++){var s=o[i];r.addItem(s.id,s.label)}n()};this.onItemSelected.subscribe((function(t,i){e.setAudioQuality(i)})),e.addEventHandler(e.EVENT.ON_AUDIO_CHANGED,o),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),e.EVENT.ON_AUDIO_QUALITY_CHANGED?e.addEventHandler(e.EVENT.ON_AUDIO_QUALITY_CHANGED,n):e.addEventHandler(e.EVENT.ON_AUDIO_DOWNLOAD_QUALITY_CHANGE,n)},e}(i(24).SelectBox);e.AudioQualitySelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){var i=t.call(this,e)||this;return i.subtitleSettingsPanel=e.subtitleSettingsPanel,i.settingsPanel=e.settingsPanel,i}return r.__extends(e,t),e}(i(23).Button);e.SubtitleSettingsButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-volumeslider",hideIfVolumeControlProhibited:!0},i.config),i}return r.__extends(e,t),e.prototype.configure=function(i,r){var n=this;if(t.prototype.configure.call(this,i,r,!1),!this.getConfig().hideIfVolumeControlProhibited||this.detectVolumeControlAvailability()){var o=function(){i.isMuted()?n.setPlaybackPosition(0):n.setPlaybackPosition(i.getVolume())};i.addEventHandler(i.EVENT.ON_READY,o),i.addEventHandler(i.EVENT.ON_VOLUME_CHANGED,o),i.addEventHandler(i.EVENT.ON_MUTED,o),i.addEventHandler(i.EVENT.ON_UNMUTED,o),this.onSeekPreview.subscribeRateLimited((function(t,r){r.scrubbing&&i.setVolume(r.position,e.issuerName)}),50),this.onSeeked.subscribe((function(t,r){i.setVolume(r,e.issuerName)})),i.addEventHandler(i.EVENT.ON_PLAYER_RESIZE,(function(){n.refreshPlaybackPosition()})),i.addEventHandler(i.EVENT.ON_READY,(function(){n.refreshPlaybackPosition()})),r.onConfigured.subscribe((function(){n.refreshPlaybackPosition()})),o()}else this.hide()},e.prototype.detectVolumeControlAvailability=function(){var t=document.createElement("video");return t.volume=.7,1!==t.volume},e.issuerName="ui",e}(i(52).SeekBar);e.VolumeSlider=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=i(0),o=i(20);!function(t){t[t.Title=0]="Title",t[t.Description=1]="Description"}(r=e.MetadataLabelContent||(e.MetadataLabelContent={}));var s=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClasses:["label-metadata","label-metadata-"+r[e.content].toLowerCase()]},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var o=this.getConfig(),s=i.getConfig(),a=function(){switch(o.content){case r.Title:n.setText(s.metadata.title);break;case r.Description:n.setText(s.metadata.description)}};a(),e.addEventHandler(e.EVENT.ON_SOURCE_LOADED,a),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,(function(){n.setText(null)}))},e}(o.Label);e.MetadataLabel=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-clickoverlay"},i.config),i}return r.__extends(e,t),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.setUrl(this.config.url);var e=this.getDomElement();e.on("click",(function(){e.data("url")&&window.open(e.data("url"),"_blank")}))},e.prototype.getUrl=function(){return this.getDomElement().data("url")},e.prototype.setUrl=function(t){void 0!==t&&null!=t||(t=""),this.getDomElement().data("url",t)},e}(i(23).Button);e.ClickOverlay=n},function(t,e){t.exports=angular},function(module,exports){!function(t){"object"==typeof exports&&void 0!==module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).adapter=t()}((function(){return function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[s]={exports:{}};e[s][0].call(c.exports,(function(t){return n(e[s][1][t]||t)}),c,c.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){"use strict";var r=(0,t("./adapter_factory.js").adapterFactory)({window:window});e.exports=r},{"./adapter_factory.js":2}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.adapterFactory=function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).window,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},i=r.log,h=r.detectBrowser(t),c={browserDetails:h,commonShim:u,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(h.browser){case"chrome":if(!n||!n.shimPeerConnection||!e.shimChrome)return i("Chrome shim is not included in this adapter release."),c;i("adapter.js shimming chrome."),(c.browserShim=n).shimGetUserMedia(t),n.shimMediaStream(t),n.shimPeerConnection(t),n.shimOnTrack(t),n.shimAddTrackRemoveTrack(t),n.shimGetSendersWithDtmf(t),n.shimGetStats(t),n.shimSenderReceiverGetStats(t),n.fixNegotiationNeeded(t),u.shimRTCIceCandidate(t),u.shimConnectionState(t),u.shimMaxMessageSize(t),u.shimSendThrowTypeError(t),u.removeAllowExtmapMixed(t);break;case"firefox":if(!s||!s.shimPeerConnection||!e.shimFirefox)return i("Firefox shim is not included in this adapter release."),c;i("adapter.js shimming firefox."),(c.browserShim=s).shimGetUserMedia(t),s.shimPeerConnection(t),s.shimOnTrack(t),s.shimRemoveStream(t),s.shimSenderGetStats(t),s.shimReceiverGetStats(t),s.shimRTCDataChannel(t),u.shimRTCIceCandidate(t),u.shimConnectionState(t),u.shimMaxMessageSize(t),u.shimSendThrowTypeError(t);break;case"edge":if(!o||!o.shimPeerConnection||!e.shimEdge)return i("MS edge shim is not included in this adapter release."),c;i("adapter.js shimming edge."),(c.browserShim=o).shimGetUserMedia(t),o.shimGetDisplayMedia(t),o.shimPeerConnection(t),o.shimReplaceTrack(t),u.shimMaxMessageSize(t),u.shimSendThrowTypeError(t);break;case"safari":if(!a||!e.shimSafari)return i("Safari shim is not included in this adapter release."),c;i("adapter.js shimming safari."),(c.browserShim=a).shimRTCIceServerUrls(t),a.shimCreateOfferLegacy(t),a.shimCallbacksAPI(t),a.shimLocalStreamsAPI(t),a.shimRemoteStreamsAPI(t),a.shimTrackEventTransceiver(t),a.shimGetUserMedia(t),u.shimRTCIceCandidate(t),u.shimMaxMessageSize(t),u.shimSendThrowTypeError(t),u.removeAllowExtmapMixed(t);break;default:i("Unsupported browser!")}return c};var r=h(t("./utils")),n=h(t("./chrome/chrome_shim")),o=h(t("./edge/edge_shim")),s=h(t("./firefox/firefox_shim")),a=h(t("./safari/safari_shim")),u=h(t("./common_shim"));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=t("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var o=t("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),i.shimMediaStream=function(t){t.MediaStream=t.MediaStream||t.webkitMediaStream},i.shimOnTrack=function(t){if("object"!==(void 0===t?"undefined":r(t))||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)s.wrapPeerConnectionEvent(t,"track",(function(t){return t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t}));else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});var e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return this._ontrackpoly||(this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",(function(r){var n;n=t.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(t){return t.track&&t.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=n,o.transceiver={receiver:n},o.streams=[e.stream],i.dispatchEvent(o)})),e.stream.getTracks().forEach((function(r){var n;n=t.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(t){return t.track&&t.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=n,o.transceiver={receiver:n},o.streams=[e.stream],i.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}},i.shimGetSendersWithDtmf=function(t){if("object"===(void 0===t?"undefined":r(t))&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){var e=function(t,e){return{track:e,get dtmf(){return void 0===this._dtmf&&("audio"===e.kind?this._dtmf=t.createDTMFSender(e):this._dtmf=null),this._dtmf},_pc:t}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,r){var n=i.apply(this,arguments);return n||(n=e(this,t),this._senders.push(n)),n};var n=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){n.apply(this,arguments);var e=this._senders.indexOf(t);-1!==e&&this._senders.splice(e,1)}}var o=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){var i=this;this._senders=this._senders||[],o.apply(this,[t]),t.getTracks().forEach((function(t){i._senders.push(e(i,t))}))};var s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){var e=this;this._senders=this._senders||[],s.apply(this,[t]),t.getTracks().forEach((function(t){var i=e._senders.find((function(e){return e.track===t}));i&&e._senders.splice(e._senders.indexOf(i),1)}))}}else if("object"===(void 0===t?"undefined":r(t))&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){var a=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=a.apply(this,[]);return e.forEach((function(e){return e._pc=t})),e},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},i.shimGetStats=function(t){if(t.RTCPeerConnection){var e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(t,i,r){var n=this,o=arguments;if(0<arguments.length&&"function"==typeof t)return e.apply(this,arguments);if(0===e.length&&(0===arguments.length||"function"!=typeof t))return e.apply(this,[]);function s(t){var e={};return t.result().forEach((function(t){var i={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach((function(e){i[e]=t.stat(e)})),e[i.id]=i})),e}function a(t){return new Map(Object.keys(t).map((function(e){return[e,t[e]]})))}return 2<=arguments.length?e.apply(this,[function(t){o[1](a(s(t)))},t]):new Promise((function(t,i){e.apply(n,[function(e){t(a(s(e)))},i])})).then(i,r)}}},i.shimSenderReceiverGetStats=function(t){if("object"===(void 0===t?"undefined":r(t))&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver){if(!("getStats"in t.RTCRtpSender.prototype)){var e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){var t=this,i=e.apply(this,[]);return i.forEach((function(e){return e._pc=t})),i});var i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){var t=i.apply(this,arguments);return t._pc=this,t}),t.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then((function(e){return s.filterStats(e,t.track,!0)}))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){var n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=n.apply(this,[]);return e.forEach((function(e){return e._pc=t})),e}),s.wrapPeerConnectionEvent(t,"track",(function(t){return t.receiver._pc=t.srcElement,t})),t.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then((function(e){return s.filterStats(e,t.track,!1)}))}}if("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype){var o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(0<arguments.length&&arguments[0]instanceof t.MediaStreamTrack){var e=arguments[0],i=void 0,r=void 0,n=void 0;return this.getSenders().forEach((function(t){t.track===e&&(i?n=!0:i=t)})),this.getReceivers().forEach((function(t){return t.track===e&&(r?n=!0:r=t),t.track===e})),n||i&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},i.shimAddTrackRemoveTrackWithNative=a,i.shimAddTrackRemoveTrack=function(t){if(t.RTCPeerConnection){var e=s.detectBrowser(t);if(t.RTCPeerConnection.prototype.addTrack&&65<=e.version)return a(t);var i=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this,e=i.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((function(e){return t._reverseStreams[e.id]}))};var r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(e){var i=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach((function(t){if(i.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[e.id]){var n=new t.MediaStream(e.getTracks());this._streams[e.id]=n,this._reverseStreams[n.id]=e,e=n}r.apply(this,[e])};var n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[t.id]||t]),delete this._reverseStreams[this._streams[t.id]?this._streams[t.id].id:t.id],delete this._streams[t.id]},t.RTCPeerConnection.prototype.addTrack=function(e,i){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find((function(t){return t===e})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[i.id];if(o)o.addTrack(e),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new t.MediaStream([e]);this._streams[i.id]=s,this._reverseStreams[s.id]=i,this.addStream(s)}return this.getSenders().find((function(t){return t.track===e}))},["createOffer","createAnswer"].forEach((function(e){var i=t.RTCPeerConnection.prototype[e];t.RTCPeerConnection.prototype[e]=function(){var t=this,e=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[function(i){var r=h(t,i);e[0].apply(null,[r])},function(t){e[1]&&e[1].apply(null,t)},arguments[2]]):i.apply(this,arguments).then((function(e){return h(t,e)}))}}));var o=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type&&(arguments[0]=function(t,e){var i=e.sdp;return Object.keys(t._reverseStreams||[]).forEach((function(e){var r=t._reverseStreams[e],n=t._streams[r.id];i=i.replace(new RegExp(r.id,"g"),n.id)})),new RTCSessionDescription({type:e.type,sdp:i})}(this,arguments[0])),o.apply(this,arguments)};var u=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get:function(){var t=u.get.apply(this);return""===t.type?t:h(this,t)}}),t.RTCPeerConnection.prototype.removeTrack=function(t){var e=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(t._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var i=void 0;Object.keys(this._streams).forEach((function(r){e._streams[r].getTracks().find((function(e){return t.track===e}))&&(i=e._streams[r])})),i&&(1===i.getTracks().length?this.removeStream(this._reverseStreams[i.id]):i.removeTrack(t.track),this.dispatchEvent(new Event("negotiationneeded")))}}function h(t,e){var i=e.sdp;return Object.keys(t._reverseStreams||[]).forEach((function(e){var r=t._reverseStreams[e],n=t._streams[r.id];i=i.replace(new RegExp(n.id,"g"),r.id)})),new RTCSessionDescription({type:e.type,sdp:i})}},i.shimPeerConnection=function(t){if(!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){var i=t.RTCPeerConnection.prototype[e];t.RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}}));var e=t.RTCPeerConnection.prototype.addIceCandidate;t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},i.fixNegotiationNeeded=function(t){s.wrapPeerConnectionEvent(t,"negotiationneeded",(function(t){if("stable"===t.target.signalingState)return t}))};var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../utils.js"));function a(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(e){return t._shimmedLocalStreams[e][0]}))};var e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,i){if(!i)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=e.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(r)&&this._shimmedLocalStreams[i.id].push(r):this._shimmedLocalStreams[i.id]=[i,r],r};var i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){var e=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},t.getTracks().forEach((function(t){if(e.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();i.apply(this,arguments);var n=this.getSenders().filter((function(t){return-1===r.indexOf(t)}));this._shimmedLocalStreams[t.id]=[t].concat(n)};var r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[t.id],r.apply(this,arguments)};var n=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},t&&Object.keys(this._shimmedLocalStreams).forEach((function(i){var r=e._shimmedLocalStreams[i].indexOf(t);-1!==r&&e._shimmedLocalStreams[i].splice(r,1),1===e._shimmedLocalStreams[i].length&&delete e._shimmedLocalStreams[i]})),n.apply(this,arguments)}}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=function(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&("function"==typeof e?t.navigator.mediaDevices.getDisplayMedia=function(i){return e(i).then((function(e){var r=i.video&&i.video.width,n=i.video&&i.video.height,o=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:o||3}},r&&(i.video.mandatory.maxWidth=r),n&&(i.video.mandatory.maxHeight=n),t.navigator.mediaDevices.getUserMedia(i)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.shimGetUserMedia=function(t){var e=t&&t.navigator;if(e.mediaDevices){var i=n.detectBrowser(t);if(e.getUserMedia=function(t,i,r){u(t,(function(t){e.webkitGetUserMedia(t,i,(function(t){r&&r(h(t))}))}))}.bind(e),e.mediaDevices.getUserMedia){var s=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(t){return u(t,(function(t){return s(t).then((function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((function(t){t.stop()})),new DOMException("","NotFoundError");return e}),(function(t){return Promise.reject(h(t))}))}))}}}function a(t){if("object"!==(void 0===t?"undefined":r(t))||t.mandatory||t.optional)return t;var e={};return Object.keys(t).forEach((function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n="object"===r(t[i])?t[i]:{ideal:t[i]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var o=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.slice(1):"deviceId"===e?"sourceId":e};if(void 0!==n.ideal){e.optional=e.optional||[];var s={};"number"==typeof n.ideal?(s[o("min",i)]=n.ideal,e.optional.push(s),(s={})[o("max",i)]=n.ideal):s[o("",i)]=n.ideal,e.optional.push(s)}void 0!==n.exact&&"number"!=typeof n.exact?(e.mandatory=e.mandatory||{},e.mandatory[o("",i)]=n.exact):["min","max"].forEach((function(t){void 0!==n[t]&&(e.mandatory=e.mandatory||{},e.mandatory[o(t,i)]=n[t])}))}})),t.advanced&&(e.optional=(e.optional||[]).concat(t.advanced)),e}function u(t,n){if(61<=i.version)return n(t);if((t=JSON.parse(JSON.stringify(t)))&&"object"===r(t.audio)){var s=function(t,e,i){e in t&&!(i in t)&&(t[i]=t[e],delete t[e])};s((t=JSON.parse(JSON.stringify(t))).audio,"autoGainControl","googAutoGainControl"),s(t.audio,"noiseSuppression","googNoiseSuppression"),t.audio=a(t.audio)}if(t&&"object"===r(t.video)){var u=t.video.facingMode;u=u&&("object"===(void 0===u?"undefined":r(u))?u:{ideal:u});var h=i.version<66;if(u&&("user"===u.exact||"environment"===u.exact||"user"===u.ideal||"environment"===u.ideal)&&(!e.mediaDevices.getSupportedConstraints||!e.mediaDevices.getSupportedConstraints().facingMode||h)){delete t.video.facingMode;var c=void 0;if("environment"===u.exact||"environment"===u.ideal?c=["back","rear"]:"user"!==u.exact&&"user"!==u.ideal||(c=["front"]),c)return e.mediaDevices.enumerateDevices().then((function(e){var i=(e=e.filter((function(t){return"videoinput"===t.kind}))).find((function(t){return c.some((function(e){return t.label.toLowerCase().includes(e)}))}));return!i&&e.length&&c.includes("back")&&(i=e[e.length-1]),i&&(t.video.deviceId=u.exact?{exact:i.deviceId}:{ideal:i.deviceId}),t.video=a(t.video),o("chrome: "+JSON.stringify(t)),n(t)}))}t.video=a(t.video)}return o("chrome: "+JSON.stringify(t)),n(t)}function h(t){return 64<=i.version?t:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[t.name]||t.name,message:t.message,constraint:t.constraint||t.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}}};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../utils.js")),o=n.log},{"../utils.js":15}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.shimRTCIceCandidate=function(t){if(t.RTCIceCandidate&&!(t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)){var e=t.RTCIceCandidate;t.RTCIceCandidate=function(t){if("object"===(void 0===t?"undefined":r(t))&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){var i=new e(t),n=o.default.parseCandidate(t.candidate),s=Object.assign(i,n);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(t)},t.RTCIceCandidate.prototype=e.prototype,s.wrapPeerConnectionEvent(t,"icecandidate",(function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e}))}},i.shimMaxMessageSize=function(t){if(!t.RTCSctpTransport&&t.RTCPeerConnection){var e=s.detectBrowser(t);"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var i=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,function(t){if(!t||!t.sdp)return!1;var e=o.default.splitSections(t.sdp);return e.shift(),e.some((function(t){var e=o.default.parseMLine(t);return e&&"application"===e.kind&&-1!==e.protocol.indexOf("SCTP")}))}(arguments[0])){var t=function(t){var e=t.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===e||e.length<2)return-1;var i=parseInt(e[1],10);return i!=i?-1:i}(arguments[0]),r=function(t){var i=65536;return"firefox"===e.browser&&(i=e.version<57?-1===t?16384:2147483637:e.version<60?57===e.version?65535:65536:2147483637),i}(t),n=function(t,i){var r=65536;"firefox"===e.browser&&57===e.version&&(r=65535);var n=o.default.matchPrefix(t.sdp,"a=max-message-size:");return 0<n.length?r=parseInt(n[0].substr(19),10):"firefox"===e.browser&&-1!==i&&(r=2147483637),r}(arguments[0],t),s=void 0;s=0===r&&0===n?Number.POSITIVE_INFINITY:0===r||0===n?Math.max(r,n):Math.min(r,n);var a={};Object.defineProperty(a,"maxMessageSize",{get:function(){return s}}),this._sctp=a}return i.apply(this,arguments)}}},i.shimSendThrowTypeError=function(t){if(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype){var e=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){var t=e.apply(this,arguments);return i(t,this),t},s.wrapPeerConnectionEvent(t,"datachannel",(function(t){return i(t.channel,t.target),t}))}function i(t,e){var i=t.send;t.send=function(){var r=arguments[0],n=r.length||r.size||r.byteLength;if("open"===t.readyState&&e.sctp&&n>e.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+e.sctp.maxMessageSize+" bytes)");return i.apply(t,arguments)}}},i.shimConnectionState=function(t){if(t.RTCPeerConnection&&!("connectionState"in t.RTCPeerConnection.prototype)){var e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(t){var i=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(t){var e=t.target;if(e._lastConnectionState!==e.connectionState){e._lastConnectionState=e.connectionState;var i=new Event("connectionstatechange",t);e.dispatchEvent(i)}return t},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}}))}},i.removeAllowExtmapMixed=function(t){if(t.RTCPeerConnection){var e=s.detectBrowser(t);if(!("chrome"===e.browser&&71<=e.version)){var i=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(t){return t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")&&(t.sdp=t.sdp.split("\n").filter((function(t){return"a=extmap-allow-mixed"!==t.trim()})).join("\n")),i.apply(this,arguments)}}}};var n,o=(n=t("sdp"))&&n.__esModule?n:{default:n},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("./utils"))},{"./utils":15,sdp:17}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var r=t("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var n=t("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return n.shimGetDisplayMedia}}),i.shimPeerConnection=function(t){var e=s.detectBrowser(t);if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(t){return t}),t.RTCSessionDescription||(t.RTCSessionDescription=function(t){return t}),e.version<15025)){var i=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set:function(t){i.set.call(this,t);var e=new Event("enabled");e.enabled=t,this.dispatchEvent(e)}})}!t.RTCRtpSender||"dtmf"in t.RTCRtpSender.prototype||Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new t.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);var r=(0,u.default)(t,e.version);t.RTCPeerConnection=function(t){return t&&t.iceServers&&(t.iceServers=(0,a.filterIceServers)(t.iceServers,e.version),s.log("ICE servers after filtering:",t.iceServers)),new r(t)},t.RTCPeerConnection.prototype=r.prototype},i.shimReplaceTrack=function(t){!t.RTCRtpSender||"replaceTrack"in t.RTCRtpSender.prototype||(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)};var o,s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../utils")),a=t("./filtericeservers"),u=(o=t("rtcpeerconnection-shim"))&&o.__esModule?o:{default:o}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.filterIceServers=function(t,e){var i=!1;return(t=JSON.parse(JSON.stringify(t))).filter((function(t){if(t&&(t.urls||t.url)){var e=t.urls||t.url;t.url&&!t.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var n="string"==typeof e;return n&&(e=[e]),e=e.filter((function(t){if(0===t.indexOf("stun:"))return!1;var e=t.startsWith("turn")&&!t.startsWith("turn:[")&&t.includes("transport=udp");return e&&!i?i=!0:e&&!i})),delete t.url,t.urls=n?e[0]:e,!!e.length}}))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../utils"))},{"../utils":15}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=function(t){"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}},{}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetUserMedia=function(t){var e=t&&t.navigator,i=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(t){return i(t).catch((function(t){return Promise.reject(function(t){return{name:{PermissionDeniedError:"NotAllowedError"}[t.name]||t.name,message:t.message,constraint:t.constraint,toString:function(){return this.name}}}(t))}))}}},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=t("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var o=t("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),i.shimOnTrack=function(t){"object"===(void 0===t?"undefined":r(t))&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},i.shimPeerConnection=function(t){var e=s.detectBrowser(t);if("object"===(void 0===t?"undefined":r(t))&&(t.RTCPeerConnection||t.mozRTCPeerConnection)){!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){var i=t.RTCPeerConnection.prototype[e];t.RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}}));var i=t.RTCPeerConnection.prototype.addIceCandidate;t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(t,i,r){return o.apply(this,[t||null]).then((function(t){if(e.version<53&&!i)try{t.forEach((function(t){t.type=n[t.type]||t.type}))}catch(e){if("TypeError"!==e.name)throw e;t.forEach((function(e,i){t.set(i,Object.assign({},e,{type:n[e.type]||e.type}))}))}return t})).then(i,r)}}},i.shimSenderGetStats=function(t){if("object"===(void 0===t?"undefined":r(t))&&t.RTCPeerConnection&&t.RTCRtpSender&&!(t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)){var e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){var t=this,i=e.apply(this,[]);return i.forEach((function(e){return e._pc=t})),i});var i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){var t=i.apply(this,arguments);return t._pc=this,t}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},i.shimReceiverGetStats=function(t){if("object"===(void 0===t?"undefined":r(t))&&t.RTCPeerConnection&&t.RTCRtpSender&&!(t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)){var e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){var t=this,i=e.apply(this,[]);return i.forEach((function(e){return e._pc=t})),i}),s.wrapPeerConnectionEvent(t,"track",(function(t){return t.receiver._pc=t.srcElement,t})),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},i.shimRemoveStream=function(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var e=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(i){i.track&&t.getTracks().includes(i.track)&&e.removeTrack(i)}))})},i.shimRTCDataChannel=function(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)};var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=function(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(i&&i.video)return!0===i.video?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i);var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)})}},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.shimGetUserMedia=function(t){var e=n.detectBrowser(t),i=t&&t.navigator,o=t&&t.MediaStreamTrack;if(i.getUserMedia=function(t,e,r){n.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(t).then(e,r)},!(55<e.version&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var s=function(t,e,i){e in t&&!(i in t)&&(t[i]=t[e],delete t[e])},a=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(t){return"object"===(void 0===t?"undefined":r(t))&&"object"===r(t.audio)&&(t=JSON.parse(JSON.stringify(t)),s(t.audio,"autoGainControl","mozAutoGainControl"),s(t.audio,"noiseSuppression","mozNoiseSuppression")),a(t)},o&&o.prototype.getSettings){var u=o.prototype.getSettings;o.prototype.getSettings=function(){var t=u.apply(this,arguments);return s(t,"mozAutoGainControl","autoGainControl"),s(t,"mozNoiseSuppression","noiseSuppression"),t}}if(o&&o.prototype.applyConstraints){var h=o.prototype.applyConstraints;o.prototype.applyConstraints=function(t){return"audio"===this.kind&&"object"===(void 0===t?"undefined":r(t))&&(t=JSON.parse(JSON.stringify(t)),s(t,"autoGainControl","mozAutoGainControl"),s(t,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[t])}}}};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../utils"))},{"../utils":15}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.shimLocalStreamsAPI=function(t){if("object"===(void 0===t?"undefined":r(t))&&t.RTCPeerConnection){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){var e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(t){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getTracks().forEach((function(r){return e.call(i,r,t)}))},t.RTCPeerConnection.prototype.addTrack=function(t,i){return i&&(this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]),e.call(this,t,i)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var e=this;this._localStreams||(this._localStreams=[]);var i=this._localStreams.indexOf(t);if(-1!==i){this._localStreams.splice(i,1);var r=t.getTracks();this.getSenders().forEach((function(t){r.includes(t.track)&&e.removeTrack(t)}))}})}},i.shimRemoteStreamsAPI=function(t){if("object"===(void 0===t?"undefined":r(t))&&t.RTCPeerConnection&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(t){var e=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!e._remoteStreams.includes(t)){e._remoteStreams.push(t);var i=new Event("addstream");i.stream=t,e.dispatchEvent(i)}}))})}});var e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!(0<=t._remoteStreams.indexOf(e))){t._remoteStreams.push(e);var i=new Event("addstream");i.stream=e,t.dispatchEvent(i)}}))}),e.apply(t,arguments)}}},i.shimCallbacksAPI=function(t){if("object"===(void 0===t?"undefined":r(t))&&t.RTCPeerConnection){var e=t.RTCPeerConnection.prototype,i=e.createOffer,n=e.createAnswer,o=e.setLocalDescription,s=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(t,e){var r=2<=arguments.length?arguments[2]:t,n=i.apply(this,[r]);return e?(n.then(t,e),Promise.resolve()):n},e.createAnswer=function(t,e){var i=2<=arguments.length?arguments[2]:t,r=n.apply(this,[i]);return e?(r.then(t,e),Promise.resolve()):r};var u=function(t,e,i){var r=o.apply(this,[t]);return i?(r.then(e,i),Promise.resolve()):r};e.setLocalDescription=u,u=function(t,e,i){var r=s.apply(this,[t]);return i?(r.then(e,i),Promise.resolve()):r},e.setRemoteDescription=u,u=function(t,e,i){var r=a.apply(this,[t]);return i?(r.then(e,i),Promise.resolve()):r},e.addIceCandidate=u}},i.shimGetUserMedia=function(t){var e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){var i=e.mediaDevices,r=i.getUserMedia.bind(i);e.mediaDevices.getUserMedia=function(t){return r(o(t))}}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(t,i,r){e.mediaDevices.getUserMedia(t).then(i,r)}.bind(e))},i.shimConstraints=o,i.shimRTCIceServerUrls=function(t){var e=t.RTCPeerConnection;t.RTCPeerConnection=function(t,i){if(t&&t.iceServers){for(var r=[],o=0;o<t.iceServers.length;o++){var s=t.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,r.push(s)):r.push(t.iceServers[o])}t.iceServers=r}return new e(t,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in t.RTCPeerConnection&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return e.generateCertificate}})},i.shimTrackEventTransceiver=function(t){"object"===(void 0===t?"undefined":r(t))&&t.RTCPeerConnection&&"receiver"in t.RTCTrackEvent.prototype&&!t.RTCTransceiver&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},i.shimCreateOfferLegacy=function(t){var e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(t){if(t){void 0!==t.offerToReceiveAudio&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);var i=this.getTransceivers().find((function(t){return"audio"===t.receiver.track.kind}));!1===t.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==t.offerToReceiveAudio||i||this.addTransceiver("audio"),void 0!==t.offerToReceiveVideo&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);var r=this.getTransceivers().find((function(t){return"video"===t.receiver.track.kind}));!1===t.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==t.offerToReceiveVideo||r||this.addTransceiver("video")}return e.apply(this,arguments)}};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../utils"));function o(t){return t&&void 0!==t.video?Object.assign({},t,{video:n.compactObject(t.video)}):t}},{"../utils":15}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.extractVersion=s,i.wrapPeerConnectionEvent=function(t,e,i){if(t.RTCPeerConnection){var r=t.RTCPeerConnection.prototype,n=r.addEventListener;r.addEventListener=function(t,r){if(t!==e)return n.apply(this,arguments);function o(t){var e=i(t);e&&r(e)}return this._eventMap=this._eventMap||{},this._eventMap[r]=o,n.apply(this,[t,o])};var o=r.removeEventListener;r.removeEventListener=function(t,i){if(t!==e||!this._eventMap||!this._eventMap[i])return o.apply(this,arguments);var r=this._eventMap[i];return delete this._eventMap[i],o.apply(this,[t,r])},Object.defineProperty(r,"on"+e,{get:function(){return this["_on"+e]},set:function(t){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),t&&this.addEventListener(e,this["_on"+e]=t)},enumerable:!0,configurable:!0})}},i.disableLog=function(t){return"boolean"==typeof t?(n=t)?"adapter.js logging disabled":"adapter.js logging enabled":new Error("Argument type: "+(void 0===t?"undefined":r(t))+". Please use a boolean.")},i.disableWarnings=function(t){return"boolean"==typeof t?(o=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled")):new Error("Argument type: "+(void 0===t?"undefined":r(t))+". Please use a boolean.")},i.log=function(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},i.deprecated=function(t,e){o&&console.warn(t+" is deprecated, please use "+e+" instead.")},i.detectBrowser=function(t){var e=t.navigator,i={browser:null,version:null};if(void 0===t||!t.navigator)return i.browser="Not a browser.",i;if(e.mozGetUserMedia)i.browser="firefox",i.version=s(e.userAgent,/Firefox\/(\d+)\./,1);else if(e.webkitGetUserMedia||!1===t.isSecureContext&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)i.browser="chrome",i.version=s(e.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.mediaDevices&&e.userAgent.match(/Edge\/(\d+).(\d+)$/))i.browser="edge",i.version=s(e.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!t.RTCPeerConnection||!e.userAgent.match(/AppleWebKit\/(\d+)\./))return i.browser="Not a supported browser.",i;i.browser="safari",i.version=s(e.userAgent,/AppleWebKit\/(\d+)\./,1)}return i},i.compactObject=function t(e){return"object"!==(void 0===e?"undefined":r(e))?e:Object.keys(e).reduce((function(i,n){var o="object"===r(e[n]),s=o?t(e[n]):e[n],a=o&&!Object.keys(s).length;return void 0===s||a?i:Object.assign(i,function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},n,s))}),{})},i.walkStats=a,i.filterStats=function(t,e,i){var r=i?"outbound-rtp":"inbound-rtp",n=new Map;if(null===e)return n;var o=[];return t.forEach((function(t){"track"===t.type&&t.trackIdentifier===e.id&&o.push(t)})),o.forEach((function(e){t.forEach((function(i){i.type===r&&i.trackId===e.id&&a(t,i,n)}))})),n};var n=!0,o=!0;function s(t,e,i){var r=t.match(e);return r&&r.length>=i&&parseInt(r[i],10)}function a(t,e,i){e&&!i.has(e.id)&&(i.set(e.id,e),Object.keys(e).forEach((function(r){r.endsWith("Id")?a(t,t.get(e[r]),i):r.endsWith("Ids")&&e[r].forEach((function(e){a(t,t.get(e),i)}))})))}},{}],16:[function(t,e,i){"use strict";var r=t("sdp");function n(t,e,i,n,o){var s=r.writeRtpDescription(t.kind,e);if(s+=r.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":o||"active"),s+="a=mid:"+t.mid+"\r\n",t.rtpSender&&t.rtpReceiver?s+="a=sendrecv\r\n":t.rtpSender?s+="a=sendonly\r\n":t.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",t.rtpSender){var a=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=a;var u="msid:"+(n?n.id:"-")+" "+a+"\r\n";s+="a="+u,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+u,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+u,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function o(t,e){function i(t,e){t=parseInt(t,10);for(var i=0;i<e.length;i++)if(e[i].payloadType===t||e[i].preferredPayloadType===t)return e[i]}var r={codecs:[],headerExtensions:[],fecMechanisms:[]};return t.codecs.forEach((function(n){for(var o=0;o<e.codecs.length;o++){var s=e.codecs[o];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&(a=n,u=s,h=t.codecs,c=e.codecs,p=l=void 0,l=i(a.parameters.apt,h),p=i(u.parameters.apt,c),!l||!p||l.name.toLowerCase()!==p.name.toLowerCase()))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(t){for(var e=0;e<n.rtcpFeedback.length;e++)if(n.rtcpFeedback[e].type===t.type&&n.rtcpFeedback[e].parameter===t.parameter)return!0;return!1}));break}}var a,u,h,c,l,p})),t.headerExtensions.forEach((function(t){for(var i=0;i<e.headerExtensions.length;i++){var n=e.headerExtensions[i];if(t.uri===n.uri){r.headerExtensions.push(n);break}}})),r}function s(t,e,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(i)}function a(t,e){var i=t.getRemoteCandidates().find((function(t){return e.foundation===t.foundation&&e.ip===t.ip&&e.port===t.port&&e.priority===t.priority&&e.protocol===t.protocol&&e.type===t.type}));return i||t.addRemoteCandidate(e),!i}function u(t,e){var i=new Error(e);return i.name=t,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],i}e.exports=function(t,e){function i(e,i){i.addTrack(e),i.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:e}))}function h(e,i,r,n){var o=new Event("track");o.track=i,o.receiver=r,o.transceiver={receiver:r},o.streams=n,t.setTimeout((function(){e._dispatchEvent("track",o)}))}function c(i){var n=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(t){n[t]=o[t].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",i=JSON.parse(JSON.stringify(i||{})),this.usingBundle="max-bundle"===i.bundlePolicy,"negotiate"===i.rtcpMuxPolicy)throw u("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(i.rtcpMuxPolicy||(i.rtcpMuxPolicy="require"),i.iceTransportPolicy){case"all":case"relay":break;default:i.iceTransportPolicy="all"}switch(i.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:i.bundlePolicy="balanced"}if(i.iceServers=function(t,e){var i=!1;return(t=JSON.parse(JSON.stringify(t))).filter((function(t){if(t&&(t.urls||t.url)){var r=t.urls||t.url;t.url&&!t.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var n="string"==typeof r;return n&&(r=[r]),r=r.filter((function(t){return 0!==t.indexOf("turn:")||-1===t.indexOf("transport=udp")||-1!==t.indexOf("turn:[")||i?0===t.indexOf("stun:")&&14393<=e&&-1===t.indexOf("?transport=udp"):i=!0})),delete t.url,t.urls=n?r[0]:r,!!r.length}}))}(i.iceServers||[],e),this._iceGatherers=[],i.iceCandidatePoolSize)for(var s=i.iceCandidatePoolSize;0<s;s--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:i.iceServers,gatherPolicy:i.iceTransportPolicy}));else i.iceCandidatePoolSize=0;this._config=i,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1}Object.defineProperty(c.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(c.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),c.prototype.onicecandidate=null,c.prototype.onaddstream=null,c.prototype.ontrack=null,c.prototype.onremovestream=null,c.prototype.onsignalingstatechange=null,c.prototype.oniceconnectionstatechange=null,c.prototype.onconnectionstatechange=null,c.prototype.onicegatheringstatechange=null,c.prototype.onnegotiationneeded=null,c.prototype.ondatachannel=null,c.prototype._dispatchEvent=function(t,e){this._isClosed||(this.dispatchEvent(e),"function"==typeof this["on"+t]&&this["on"+t](e))},c.prototype._emitGatheringStateChange=function(){var t=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",t)},c.prototype.getConfiguration=function(){return this._config},c.prototype.getLocalStreams=function(){return this.localStreams},c.prototype.getRemoteStreams=function(){return this.remoteStreams},c.prototype._createTransceiver=function(t,e){var i=0<this.transceivers.length,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:t,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&i)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var n=this._createIceAndDtlsTransports();r.iceTransport=n.iceTransport,r.dtlsTransport=n.dtlsTransport}return e||this.transceivers.push(r),r},c.prototype.addTrack=function(e,i){if(this._isClosed)throw u("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(t){return t.track===e})))throw u("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==e.kind||(r=this.transceivers[n]);return r=r||this._createTransceiver(e.kind),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(i)&&this.localStreams.push(i),r.track=e,r.stream=i,r.rtpSender=new t.RTCRtpSender(e,r.dtlsTransport),r.rtpSender},c.prototype.addStream=function(t){var i=this;if(15025<=e)t.getTracks().forEach((function(e){i.addTrack(e,t)}));else{var r=t.clone();t.getTracks().forEach((function(t,e){var i=r.getTracks()[e];t.addEventListener("enabled",(function(t){i.enabled=t.enabled}))})),r.getTracks().forEach((function(t){i.addTrack(t,r)}))}},c.prototype.removeTrack=function(e){if(this._isClosed)throw u("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(e instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var i=this.transceivers.find((function(t){return t.rtpSender===e}));if(!i)throw u("InvalidAccessError","Sender was not created by this connection.");var r=i.stream;i.rtpSender.stop(),i.rtpSender=null,i.track=null,i.stream=null,-1===this.transceivers.map((function(t){return t.stream})).indexOf(r)&&-1<this.localStreams.indexOf(r)&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},c.prototype.removeStream=function(t){var e=this;t.getTracks().forEach((function(t){var i=e.getSenders().find((function(e){return e.track===t}));i&&e.removeTrack(i)}))},c.prototype.getSenders=function(){return this.transceivers.filter((function(t){return!!t.rtpSender})).map((function(t){return t.rtpSender}))},c.prototype.getReceivers=function(){return this.transceivers.filter((function(t){return!!t.rtpReceiver})).map((function(t){return t.rtpReceiver}))},c.prototype._createIceGatherer=function(e,i){var r=this;if(i&&0<e)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[e].bufferedCandidateEvents=[],this.transceivers[e].bufferCandidates=function(t){var i=!t.candidate||0===Object.keys(t.candidate).length;n.state=i?"completed":"gathering",null!==r.transceivers[e].bufferedCandidateEvents&&r.transceivers[e].bufferedCandidateEvents.push(t)},n.addEventListener("localcandidate",this.transceivers[e].bufferCandidates),n},c.prototype._gather=function(e,i){var n=this,o=this.transceivers[i].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[i].bufferedCandidateEvents;this.transceivers[i].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[i].bufferCandidates),o.onlocalcandidate=function(t){if(!(n.usingBundle&&0<i)){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:i};var a=t.candidate,u=!a||0===Object.keys(a).length;if(u)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var h=r.writeCandidate(a);s.candidate=Object.assign(s.candidate,r.parseCandidate(h)),s.candidate.candidate=h,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var c=r.getMediaSections(n._localDescription.sdp);c[s.candidate.sdpMLineIndex]+=u?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",n._localDescription.sdp=r.getDescription(n._localDescription.sdp)+c.join("");var l=n.transceivers.every((function(t){return t.iceGatherer&&"completed"===t.iceGatherer.state}));"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),u||n._dispatchEvent("icecandidate",s),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},t.setTimeout((function(){s.forEach((function(t){o.onlocalcandidate(t)}))}),0)}},c.prototype._createIceAndDtlsTransports=function(){var e=this,i=new t.RTCIceTransport(null);i.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var r=new t.RTCDtlsTransport(i);return r.ondtlsstatechange=function(){e._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:i,dtlsTransport:r}},c.prototype._disposeIceAndDtlsTransports=function(t){var e=this.transceivers[t].iceGatherer;e&&(delete e.onlocalcandidate,delete this.transceivers[t].iceGatherer);var i=this.transceivers[t].iceTransport;i&&(delete i.onicestatechange,delete this.transceivers[t].iceTransport);var r=this.transceivers[t].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[t].dtlsTransport)},c.prototype._transceive=function(t,i,n){var s=o(t.localCapabilities,t.remoteCapabilities);i&&t.rtpSender&&(s.encodings=t.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:t.rtcpParameters.compound},t.recvEncodingParameters.length&&(s.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(s)),n&&t.rtpReceiver&&0<s.codecs.length&&("video"===t.kind&&t.recvEncodingParameters&&e<15019&&t.recvEncodingParameters.forEach((function(t){delete t.rtx})),t.recvEncodingParameters.length?s.encodings=t.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:t.rtcpParameters.compound},t.rtcpParameters.cname&&(s.rtcp.cname=t.rtcpParameters.cname),t.sendEncodingParameters.length&&(s.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(s))},c.prototype.setLocalDescription=function(t){var e,i,n=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(u("TypeError",'Unsupported type "'+t.type+'"'));if(!s("setLocalDescription",t.type,n.signalingState)||n._isClosed)return Promise.reject(u("InvalidStateError","Can not set local "+t.type+" in state "+n.signalingState));if("offer"===t.type)e=r.splitSections(t.sdp),i=e.shift(),e.forEach((function(t,e){var i=r.parseRtpParameters(t);n.transceivers[e].localCapabilities=i})),n.transceivers.forEach((function(t,e){n._gather(t.mid,e)}));else if("answer"===t.type){e=r.splitSections(n._remoteDescription.sdp),i=e.shift();var a=0<r.matchPrefix(i,"a=ice-lite").length;e.forEach((function(t,e){var s=n.transceivers[e],u=s.iceGatherer,h=s.iceTransport,c=s.dtlsTransport,l=s.localCapabilities,p=s.remoteCapabilities;if(!(r.isRejected(t)&&0===r.matchPrefix(t,"a=bundle-only").length||s.rejected)){var f=r.getIceParameters(t,i),d=r.getDtlsParameters(t,i);a&&(d.role="server"),n.usingBundle&&0!==e||(n._gather(s.mid,e),"new"===h.state&&h.start(u,f,a?"controlling":"controlled"),"new"===c.state&&c.start(d));var g=o(l,p);n._transceive(s,0<g.codecs.length,!1)}}))}return n._localDescription={type:t.type,sdp:t.sdp},"offer"===t.type?n._updateSignalingState("have-local-offer"):n._updateSignalingState("stable"),Promise.resolve()},c.prototype.setRemoteDescription=function(n){var c=this;if(-1===["offer","answer"].indexOf(n.type))return Promise.reject(u("TypeError",'Unsupported type "'+n.type+'"'));if(!s("setRemoteDescription",n.type,c.signalingState)||c._isClosed)return Promise.reject(u("InvalidStateError","Can not set remote "+n.type+" in state "+c.signalingState));var l={};c.remoteStreams.forEach((function(t){l[t.id]=t}));var p=[],f=r.splitSections(n.sdp),d=f.shift(),g=0<r.matchPrefix(d,"a=ice-lite").length,v=0<r.matchPrefix(d,"a=group:BUNDLE ").length;c.usingBundle=v;var y=r.matchPrefix(d,"a=ice-options:")[0];return c.canTrickleIceCandidates=!!y&&0<=y.substr(14).split(" ").indexOf("trickle"),f.forEach((function(s,u){var h=r.splitLines(s),f=r.getKind(s),y=r.isRejected(s)&&0===r.matchPrefix(s,"a=bundle-only").length,m=h[0].substr(2).split(" ")[2],E=r.getDirection(s,d),w=r.parseMsid(s),b=r.getMid(s)||r.generateIdentifier();if(y||"application"===f&&("DTLS/SCTP"===m||"UDP/DTLS/SCTP"===m))c.transceivers[u]={mid:b,kind:f,protocol:m,rejected:!0};else{var S,T,I,_,P,O,A,R,C;!y&&c.transceivers[u]&&c.transceivers[u].rejected&&(c.transceivers[u]=c._createTransceiver(f,!0));var N,k,D=r.parseRtpParameters(s);y||(N=r.getIceParameters(s,d),(k=r.getDtlsParameters(s,d)).role="client"),A=r.parseRtpEncodingParameters(s);var L=r.parseRtcpParameters(s),x=0<r.matchPrefix(s,"a=end-of-candidates",d).length,M=r.matchPrefix(s,"a=candidate:").map((function(t){return r.parseCandidate(t)})).filter((function(t){return 1===t.component}));if(("offer"===n.type||"answer"===n.type)&&!y&&v&&0<u&&c.transceivers[u]&&(c._disposeIceAndDtlsTransports(u),c.transceivers[u].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[u].iceTransport=c.transceivers[0].iceTransport,c.transceivers[u].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[u].rtpSender&&c.transceivers[u].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[u].rtpReceiver&&c.transceivers[u].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),"offer"!==n.type||y)"answer"!==n.type||y||(T=(S=c.transceivers[u]).iceGatherer,I=S.iceTransport,_=S.dtlsTransport,P=S.rtpReceiver,O=S.sendEncodingParameters,R=S.localCapabilities,c.transceivers[u].recvEncodingParameters=A,c.transceivers[u].remoteCapabilities=D,c.transceivers[u].rtcpParameters=L,M.length&&"new"===I.state&&(!g&&!x||v&&0!==u?M.forEach((function(t){a(S.iceTransport,t)})):I.setRemoteCandidates(M)),v&&0!==u||("new"===I.state&&I.start(T,N,"controlling"),"new"===_.state&&_.start(k)),!o(S.localCapabilities,S.remoteCapabilities).codecs.filter((function(t){return"rtx"===t.name.toLowerCase()})).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,c._transceive(S,"sendrecv"===E||"recvonly"===E,"sendrecv"===E||"sendonly"===E),!P||"sendrecv"!==E&&"sendonly"!==E?delete S.rtpReceiver:(C=P.track,w?(l[w.stream]||(l[w.stream]=new t.MediaStream),i(C,l[w.stream]),p.push([C,P,l[w.stream]])):(l.default||(l.default=new t.MediaStream),i(C,l.default),p.push([C,P,l.default]))));else{(S=c.transceivers[u]||c._createTransceiver(f)).mid=b,S.iceGatherer||(S.iceGatherer=c._createIceGatherer(u,v)),M.length&&"new"===S.iceTransport.state&&(!x||v&&0!==u?M.forEach((function(t){a(S.iceTransport,t)})):S.iceTransport.setRemoteCandidates(M)),R=t.RTCRtpReceiver.getCapabilities(f),e<15019&&(R.codecs=R.codecs.filter((function(t){return"rtx"!==t.name}))),O=S.sendEncodingParameters||[{ssrc:1001*(2*u+2)}];var B,H=!1;"sendrecv"===E||"sendonly"===E?(H=!S.rtpReceiver,P=S.rtpReceiver||new t.RTCRtpReceiver(S.dtlsTransport,f),H&&(C=P.track,w&&"-"===w.stream||(B=w?(l[w.stream]||(l[w.stream]=new t.MediaStream,Object.defineProperty(l[w.stream],"id",{get:function(){return w.stream}})),Object.defineProperty(C,"id",{get:function(){return w.track}}),l[w.stream]):(l.default||(l.default=new t.MediaStream),l.default)),B&&(i(C,B),S.associatedRemoteMediaStreams.push(B)),p.push([C,P,B]))):S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach((function(e){var i=e.getTracks().find((function(t){return t.id===S.rtpReceiver.track.id}));i&&function(e,i){i.removeTrack(e),i.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:e}))}(i,e)})),S.associatedRemoteMediaStreams=[]),S.localCapabilities=R,S.remoteCapabilities=D,S.rtpReceiver=P,S.rtcpParameters=L,S.sendEncodingParameters=O,S.recvEncodingParameters=A,c._transceive(c.transceivers[u],!1,H)}}})),void 0===c._dtlsRole&&(c._dtlsRole="offer"===n.type?"active":"passive"),c._remoteDescription={type:n.type,sdp:n.sdp},"offer"===n.type?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(l).forEach((function(e){var i=l[e];if(i.getTracks().length){if(-1===c.remoteStreams.indexOf(i)){c.remoteStreams.push(i);var r=new Event("addstream");r.stream=i,t.setTimeout((function(){c._dispatchEvent("addstream",r)}))}p.forEach((function(t){var e=t[0],r=t[1];i.id===t[2].id&&h(c,e,r,[i])}))}})),p.forEach((function(t){t[2]||h(c,t[0],t[1],[])})),t.setTimeout((function(){c&&c.transceivers&&c.transceivers.forEach((function(t){t.iceTransport&&"new"===t.iceTransport.state&&0<t.iceTransport.getRemoteCandidates().length&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),t.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},c.prototype.close=function(){this.transceivers.forEach((function(t){t.iceTransport&&t.iceTransport.stop(),t.dtlsTransport&&t.dtlsTransport.stop(),t.rtpSender&&t.rtpSender.stop(),t.rtpReceiver&&t.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},c.prototype._updateSignalingState=function(t){this.signalingState=t;var e=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",e)},c.prototype._maybeFireNegotiationNeeded=function(){var e=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,t.setTimeout((function(){if(e.needNegotiation){e.needNegotiation=!1;var t=new Event("negotiationneeded");e._dispatchEvent("negotiationneeded",t)}}),0))},c.prototype._updateIceConnectionState=function(){var t,e={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(t){t.iceTransport&&!t.rejected&&e[t.iceTransport.state]++})),t="new",0<e.failed?t="failed":0<e.checking?t="checking":0<e.disconnected?t="disconnected":0<e.new?t="new":0<e.connected?t="connected":0<e.completed&&(t="completed"),t!==this.iceConnectionState){this.iceConnectionState=t;var i=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",i)}},c.prototype._updateConnectionState=function(){var t,e={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(t){t.iceTransport&&t.dtlsTransport&&!t.rejected&&(e[t.iceTransport.state]++,e[t.dtlsTransport.state]++)})),e.connected+=e.completed,t="new",0<e.failed?t="failed":0<e.connecting?t="connecting":0<e.disconnected?t="disconnected":0<e.new?t="new":0<e.connected&&(t="connected"),t!==this.connectionState){this.connectionState=t;var i=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",i)}},c.prototype.createOffer=function(){var i=this;if(i._isClosed)return Promise.reject(u("InvalidStateError","Can not call createOffer after close"));var o=i.transceivers.filter((function(t){return"audio"===t.kind})).length,s=i.transceivers.filter((function(t){return"video"===t.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(i.transceivers.forEach((function(t){"audio"===t.kind?--o<0&&(t.wantReceive=!1):"video"===t.kind&&--s<0&&(t.wantReceive=!1)}));0<o||0<s;)0<o&&(i._createTransceiver("audio"),o--),0<s&&(i._createTransceiver("video"),s--);var h=r.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.transceivers.forEach((function(n,o){var s=n.track,a=n.kind,u=n.mid||r.generateIdentifier();n.mid=u,n.iceGatherer||(n.iceGatherer=i._createIceGatherer(o,i.usingBundle));var h=t.RTCRtpSender.getCapabilities(a);e<15019&&(h.codecs=h.codecs.filter((function(t){return"rtx"!==t.name}))),h.codecs.forEach((function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach((function(e){t.name.toLowerCase()===e.name.toLowerCase()&&t.clockRate===e.clockRate&&(t.preferredPayloadType=e.payloadType)}))})),h.headerExtensions.forEach((function(t){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach((function(e){t.uri===e.uri&&(t.id=e.id)}))}));var c=n.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&15019<=e&&"video"===a&&!c[0].rtx&&(c[0].rtx={ssrc:c[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new t.RTCRtpReceiver(n.dtlsTransport,a)),n.localCapabilities=h,n.sendEncodingParameters=c})),"max-compat"!==i._config.bundlePolicy&&(h+="a=group:BUNDLE "+i.transceivers.map((function(t){return t.mid})).join(" ")+"\r\n"),h+="a=ice-options:trickle\r\n",i.transceivers.forEach((function(t,e){h+=n(t,t.localCapabilities,"offer",t.stream,i._dtlsRole),h+="a=rtcp-rsize\r\n",!t.iceGatherer||"new"===i.iceGatheringState||0!==e&&i.usingBundle||(t.iceGatherer.getLocalCandidates().forEach((function(t){t.component=1,h+="a="+r.writeCandidate(t)+"\r\n"})),"completed"===t.iceGatherer.state&&(h+="a=end-of-candidates\r\n"))}));var c=new t.RTCSessionDescription({type:"offer",sdp:h});return Promise.resolve(c)},c.prototype.createAnswer=function(){var i=this;if(i._isClosed)return Promise.reject(u("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return Promise.reject(u("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var s=r.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(s+="a=group:BUNDLE "+i.transceivers.map((function(t){return t.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=r.getMediaSections(i._remoteDescription.sdp).length;i.transceivers.forEach((function(t,r){if(!(a<r+1)){if(t.rejected)return"application"===t.kind?"DTLS/SCTP"===t.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+t.protocol+" webrtc-datachannel\r\n":"audio"===t.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===t.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+t.mid+"\r\n");var u;t.stream&&("audio"===t.kind?u=t.stream.getAudioTracks()[0]:"video"===t.kind&&(u=t.stream.getVideoTracks()[0]),u&&15019<=e&&"video"===t.kind&&!t.sendEncodingParameters[0].rtx&&(t.sendEncodingParameters[0].rtx={ssrc:t.sendEncodingParameters[0].ssrc+1}));var h=o(t.localCapabilities,t.remoteCapabilities);!h.codecs.filter((function(t){return"rtx"===t.name.toLowerCase()})).length&&t.sendEncodingParameters[0].rtx&&delete t.sendEncodingParameters[0].rtx,s+=n(t,h,"answer",t.stream,i._dtlsRole),t.rtcpParameters&&t.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var h=new t.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(h)},c.prototype.addIceCandidate=function(t){var e,i=this;return t&&void 0===t.sdpMLineIndex&&!t.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(n,o){if(!i._remoteDescription)return o(u("InvalidStateError","Can not add ICE candidate without a remote description"));if(t&&""!==t.candidate){var s=t.sdpMLineIndex;if(t.sdpMid)for(var h=0;h<i.transceivers.length;h++)if(i.transceivers[h].mid===t.sdpMid){s=h;break}var c=i.transceivers[s];if(!c)return o(u("OperationError","Can not add ICE candidate"));if(c.rejected)return n();var l=0<Object.keys(t.candidate).length?r.parseCandidate(t.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return n();if(l.component&&1!==l.component)return n();if((0===s||0<s&&c.iceTransport!==i.transceivers[0].iceTransport)&&!a(c.iceTransport,l))return o(u("OperationError","Can not add ICE candidate"));var p=t.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(e=r.getMediaSections(i._remoteDescription.sdp))[s]+="a="+(l.type?p:"end-of-candidates")+"\r\n",i._remoteDescription.sdp=r.getDescription(i._remoteDescription.sdp)+e.join("")}else for(var f=0;f<i.transceivers.length&&(i.transceivers[f].rejected||(i.transceivers[f].iceTransport.addRemoteCandidate({}),(e=r.getMediaSections(i._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",i._remoteDescription.sdp=r.getDescription(i._remoteDescription.sdp)+e.join(""),!i.usingBundle));f++);n()}))},c.prototype.getStats=function(e){if(e&&e instanceof t.MediaStreamTrack){var i=null;if(this.transceivers.forEach((function(t){t.rtpSender&&t.rtpSender.track===e?i=t.rtpSender:t.rtpReceiver&&t.rtpReceiver.track===e&&(i=t.rtpReceiver)})),!i)throw u("InvalidAccessError","Invalid selector.");return i.getStats()}var r=[];return this.transceivers.forEach((function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(e){t[e]&&r.push(t[e].getStats())}))})),Promise.all(r).then((function(t){var e=new Map;return t.forEach((function(t){t.forEach((function(t){e.set(t.id,t)}))})),e}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(e){var i=t[e];if(i&&i.prototype&&i.prototype.getStats){var r=i.prototype.getStats;i.prototype.getStats=function(){return r.apply(this).then((function(t){var e=new Map;return Object.keys(t).forEach((function(i){t[i].type=function(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}(t[i]),e.set(i,t[i])})),e}))}}}));var l=["createOffer","createAnswer"];return l.forEach((function(t){var e=c.prototype[t];c.prototype[t]=function(){var t=arguments;return"function"==typeof t[0]||"function"==typeof t[1]?e.apply(this,[arguments[2]]).then((function(e){"function"==typeof t[0]&&t[0].apply(null,[e])}),(function(e){"function"==typeof t[1]&&t[1].apply(null,[e])})):e.apply(this,arguments)}})),(l=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(t){var e=c.prototype[t];c.prototype[t]=function(){var t=arguments;return"function"==typeof t[1]||"function"==typeof t[2]?e.apply(this,arguments).then((function(){"function"==typeof t[1]&&t[1].apply(null)}),(function(e){"function"==typeof t[2]&&t[2].apply(null,[e])})):e.apply(this,arguments)}})),["getStats"].forEach((function(t){var e=c.prototype[t];c.prototype[t]=function(){var t=arguments;return"function"==typeof t[1]?e.apply(this,arguments).then((function(){"function"==typeof t[1]&&t[1].apply(null)})):e.apply(this,arguments)}})),c}},{sdp:17}],17:[function(t,e,i){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(t){return t.trim().split("\n").map((function(t){return t.trim()}))},r.splitSections=function(t){return t.split("\nm=").map((function(t,e){return(0<e?"m="+t:t).trim()+"\r\n"}))},r.getDescription=function(t){var e=r.splitSections(t);return e&&e[0]},r.getMediaSections=function(t){var e=r.splitSections(t);return e.shift(),e},r.matchPrefix=function(t,e){return r.splitLines(t).filter((function(t){return 0===t.indexOf(e)}))},r.parseCandidate=function(t){for(var e,i={foundation:(e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},r=8;r<e.length;r+=2)switch(e[r]){case"raddr":i.relatedAddress=e[r+1];break;case"rport":i.relatedPort=parseInt(e[r+1],10);break;case"tcptype":i.tcpType=e[r+1];break;case"ufrag":i.ufrag=e[r+1],i.usernameFragment=e[r+1];break;default:i[e[r]]=e[r+1]}return i},r.writeCandidate=function(t){var e=[];e.push(t.foundation),e.push(t.component),e.push(t.protocol.toUpperCase()),e.push(t.priority),e.push(t.address||t.ip),e.push(t.port);var i=t.type;return e.push("typ"),e.push(i),"host"!==i&&t.relatedAddress&&t.relatedPort&&(e.push("raddr"),e.push(t.relatedAddress),e.push("rport"),e.push(t.relatedPort)),t.tcpType&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(e.push("ufrag"),e.push(t.usernameFragment||t.ufrag)),"candidate:"+e.join(" ")},r.parseIceOptions=function(t){return t.substr(14).split(" ")},r.parseRtpMap=function(t){var e=t.substr(9).split(" "),i={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),i.name=e[0],i.clockRate=parseInt(e[1],10),i.channels=3===e.length?parseInt(e[2],10):1,i.numChannels=i.channels,i},r.writeRtpMap=function(t){var e=t.payloadType;void 0!==t.preferredPayloadType&&(e=t.preferredPayloadType);var i=t.channels||t.numChannels||1;return"a=rtpmap:"+e+" "+t.name+"/"+t.clockRate+(1!==i?"/"+i:"")+"\r\n"},r.parseExtmap=function(t){var e=t.substr(9).split(" ");return{id:parseInt(e[0],10),direction:0<e[0].indexOf("/")?e[0].split("/")[1]:"sendrecv",uri:e[1]}},r.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+"\r\n"},r.parseFmtp=function(t){for(var e,i={},r=t.substr(t.indexOf(" ")+1).split(";"),n=0;n<r.length;n++)i[(e=r[n].trim().split("="))[0].trim()]=e[1];return i},r.writeFmtp=function(t){var e="",i=t.payloadType;if(void 0!==t.preferredPayloadType&&(i=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var r=[];Object.keys(t.parameters).forEach((function(e){t.parameters[e]?r.push(e+"="+t.parameters[e]):r.push(e)})),e+="a=fmtp:"+i+" "+r.join(";")+"\r\n"}return e},r.parseRtcpFb=function(t){var e=t.substr(t.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(t){var e="",i=t.payloadType;return void 0!==t.preferredPayloadType&&(i=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach((function(t){e+="a=rtcp-fb:"+i+" "+t.type+(t.parameter&&t.parameter.length?" "+t.parameter:"")+"\r\n"})),e},r.parseSsrcMedia=function(t){var e=t.indexOf(" "),i={ssrc:parseInt(t.substr(7,e-7),10)},r=t.indexOf(":",e);return-1<r?(i.attribute=t.substr(e+1,r-e-1),i.value=t.substr(r+1)):i.attribute=t.substr(e+1),i},r.parseSsrcGroup=function(t){var e=t.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map((function(t){return parseInt(t,10)}))}},r.getMid=function(t){var e=r.matchPrefix(t,"a=mid:")[0];if(e)return e.substr(6)},r.parseFingerprint=function(t){var e=t.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},r.getDtlsParameters=function(t,e){return{role:"auto",fingerprints:r.matchPrefix(t+e,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(t,e){var i="a=setup:"+e+"\r\n";return t.fingerprints.forEach((function(t){i+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"})),i},r.getIceParameters=function(t,e){var i=r.splitLines(t);return{usernameFragment:(i=i.concat(r.splitLines(e))).filter((function(t){return 0===t.indexOf("a=ice-ufrag:")}))[0].substr(12),password:i.filter((function(t){return 0===t.indexOf("a=ice-pwd:")}))[0].substr(10)}},r.writeIceParameters=function(t){return"a=ice-ufrag:"+t.usernameFragment+"\r\na=ice-pwd:"+t.password+"\r\n"},r.parseRtpParameters=function(t){for(var e={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=r.splitLines(t)[0].split(" "),n=3;n<i.length;n++){var o=i[n],s=r.matchPrefix(t,"a=rtpmap:"+o+" ")[0];if(s){var a=r.parseRtpMap(s),u=r.matchPrefix(t,"a=fmtp:"+o+" ");switch(a.parameters=u.length?r.parseFmtp(u[0]):{},a.rtcpFeedback=r.matchPrefix(t,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),e.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":e.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(t,"a=extmap:").forEach((function(t){e.headerExtensions.push(r.parseExtmap(t))})),e},r.writeRtpDescription=function(t,e){var i="";i+="m="+t+" ",i+=0<e.codecs.length?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=e.codecs.map((function(t){return void 0!==t.preferredPayloadType?t.preferredPayloadType:t.payloadType})).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",e.codecs.forEach((function(t){i+=r.writeRtpMap(t),i+=r.writeFmtp(t),i+=r.writeRtcpFb(t)}));var n=0;return e.codecs.forEach((function(t){t.maxptime>n&&(n=t.maxptime)})),0<n&&(i+="a=maxptime:"+n+"\r\n"),i+="a=rtcp-mux\r\n",e.headerExtensions&&e.headerExtensions.forEach((function(t){i+=r.writeExtmap(t)})),i},r.parseRtpEncodingParameters=function(t){var e,i=[],n=r.parseRtpParameters(t),o=-1!==n.fecMechanisms.indexOf("RED"),s=-1!==n.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(t,"a=ssrc:").map((function(t){return r.parseSsrcMedia(t)})).filter((function(t){return"cname"===t.attribute})),u=0<a.length&&a[0].ssrc,h=r.matchPrefix(t,"a=ssrc-group:FID").map((function(t){return t.substr(17).split(" ").map((function(t){return parseInt(t,10)}))}));0<h.length&&1<h[0].length&&h[0][0]===u&&(e=h[0][1]),n.codecs.forEach((function(t){if("RTX"===t.name.toUpperCase()&&t.parameters.apt){var r={ssrc:u,codecPayloadType:parseInt(t.parameters.apt,10)};u&&e&&(r.rtx={ssrc:e}),i.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:u,mechanism:s?"red+ulpfec":"red"},i.push(r))}})),0===i.length&&u&&i.push({ssrc:u});var c=r.matchPrefix(t,"b=");return c.length&&(c=0===c[0].indexOf("b=TIAS:")?parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,i.forEach((function(t){t.maxBitrate=c}))),i},r.parseRtcpParameters=function(t){var e={},i=r.matchPrefix(t,"a=ssrc:").map((function(t){return r.parseSsrcMedia(t)})).filter((function(t){return"cname"===t.attribute}))[0];i&&(e.cname=i.value,e.ssrc=i.ssrc);var n=r.matchPrefix(t,"a=rtcp-rsize");e.reducedSize=0<n.length,e.compound=0===n.length;var o=r.matchPrefix(t,"a=rtcp-mux");return e.mux=0<o.length,e},r.parseMsid=function(t){var e,i=r.matchPrefix(t,"a=msid:");if(1===i.length)return{stream:(e=i[0].substr(7).split(" "))[0],track:e[1]};var n=r.matchPrefix(t,"a=ssrc:").map((function(t){return r.parseSsrcMedia(t)})).filter((function(t){return"msid"===t.attribute}));return 0<n.length?{stream:(e=n[0].value.split(" "))[0],track:e[1]}:void 0},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(t,e,i){var n=void 0!==e?e:2;return"v=0\r\no="+(i||"thisisadapterortc")+" "+(t||r.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(t,e,i,n){var o=r.writeRtpDescription(t.kind,e);if(o+=r.writeIceParameters(t.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),o+="a=mid:"+t.mid+"\r\n",t.direction?o+="a="+t.direction+"\r\n":t.rtpSender&&t.rtpReceiver?o+="a=sendrecv\r\n":t.rtpSender?o+="a=sendonly\r\n":t.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",t.rtpSender){var s="msid:"+n.id+" "+t.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+s,t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(t,e){for(var i=r.splitLines(t),n=0;n<i.length;n++)switch(i[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[n].substr(2)}return e?r.getDirection(e):"sendrecv"},r.getKind=function(t){return r.splitLines(t)[0].split(" ")[0].substr(2)},r.isRejected=function(t){return"0"===t.split(" ",2)[1]},r.parseMLine=function(t){var e=r.splitLines(t)[0].substr(2).split(" ");return{kind:e[0],port:parseInt(e[1],10),protocol:e[2],fmt:e.slice(3).join(" ")}},r.parseOLine=function(t){var e=r.matchPrefix(t,"o=")[0].substr(2).split(" ");return{username:e[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},r.isValidSDP=function(t){if("string"!=typeof t||0===t.length)return!1;for(var e=r.splitLines(t),i=0;i<e.length;i++)if(e[i].length<2||"="!==e[i].charAt(1))return!1;return!0},"object"==typeof e&&(e.exports=r)},{}]},{},[1])(1)})),function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.i)define([],e);else{var i=e();for(var r in i)("object"==typeof exports?exports:t)[r]=i[r]}}(this,(function(){return f=[function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(42),n=i(4),o=(s.h="ws://127.0.0.1:8000/hive",s);function s(){}var a=(u.o="TimerScheduler",u.u="identityProvider",u.l="NetworkComponent",u.v="rtcManager",u.p="transport",u.g="httpManager",u.T="httpRequest",u.m="logger",u.O="serverManager",u.R="servicesClient",u);function u(){}var h,c,l=(p.prototype.apply=function(t){t.apply(this.context)},p);function p(t){this.id=t,this.context=new r.I}e._=l,(c=h=e.A||(e.A={}))[c.N=0]="HTTP",c[c.C=1]="RTC",c[c.k=2]="UDP";var f=(d.getId=function(){return"["+g.time()+"] ["+g.D().id+"]"},d);function d(){}var g=(v.M=function(t){this.startTime=new Date,t.apply(this.j),this.P=this.j.resolve(a.o),this.H=this.j.resolve(a.m),this.L=this.P.U()},v.F=function(t,e,i){this.G<1&&(this.M(e),this.B(t,i),this.V(t)),this.G+=1},v.q=function(){this.network=this.j.resolve(a.l),this.network.init()},v.net=function(){return this.network},v.system=function(){return this.j},v.logger=function(){return this.H},v.W=function(){return this.P},v.Y=function(t){return this.K.get(t)},v.B=function(t,e){var i=new l(t);return i.apply(e),this.K.set(t,i),i},v.V=function(t){this.$=this.Y(t)},v.resolve=function(t){return null!=this.$?this.$.context.resolve(t):(console.warn("undefined context"),null)},v.D=function(){return this.$},v.time=function(){if(this.P)return this.P.time()},v.setTimeout=function(t,e,i){return void 0===i&&(i=!1),this.P.setTimeout(t,e,i)},v.clearTimeout=function(t){return this.P.clearTimeout(t)},v.setInterval=function(t,e){return this.P.setInterval(t,e)},v.clearInterval=function(t){return this.P.clearInterval(t)},v.X=function(){return this.P.X()},v.J=function(t){if(void 0===t&&(t=!1),t)return this.Z(t),void(this.G=0);0!==this.G&&(this.G<=1&&this.Z(),this.G-=1)},v.Z=function(t){void 0===t&&(t=!1),this.P&&this.P.tt(t),this.j.it(),this.j=new r.I,this.K=new n,this.$=null,this.startTime=null,this.L=!1,this.seed=null,this.P=null,this.network=null,this.H=null},v.nt=function(t){this.seed=t},v.random=function(){return null==this.seed&&(this.seed=(new Date).getTime()),this.seed=(9301*this.seed+49297)%233280,this.seed/233280},v.rt=function(){return this.startTime},v.U=function(){return this.L},v.st=f,v.et=o,v.ht=a,v.A=h,v.G=0,v.j=new r.I,v.K=new n,v.L=!1,v);function v(){}e.Framework=g},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(111),n=i(21),o=i(7),s=i(2),a=i(2),u=o.ut.ot,h=(o.ut.at,o.ut.ft),c=o.ut.ct,l=(p.lt=function(t){return void 0===t&&(t="3.0.0"),void 0===this.vt&&(this.vt=new p(t)),this.vt},p.prototype.dt=function(){r.pt.lt().Et([16,17,88],(function(){try{throw new Error("Upload console logs")}catch(t){atatus.notify(t),window.console&&console.log("[HiveComm] console log uploaded for debugging")}}))},p.prototype.wt=function(){try{throw new Error("test")}catch(e){var t=e.stack.match(/(\/\/.*\.js)/i);if(t&&0<t.length)return t[0]}},p.prototype.setUser=function(t){this.gt&&this.isActive&&atatus.setUser(t)},p.prototype.bt=function(t){this.logger=t},p.prototype.setCustomData=function(t){this.gt&&this.isActive&&atatus.setCustomData(t)},p.prototype.yt=function(t){for(var e in t)this.Tt[e]=t[e]},p.prototype.Ot=function(t){this.St=t},p.prototype.Rt=function(){this.St=null},p.prototype.logError=function(t,e,i,r,n){var o="",u=i&&a.It[i]?a.It[i]:a.At._t;if("string"==typeof e?o=e.trim():void 0!==e&&(r=e),(r instanceof Error||r&&"object"!=typeof r)&&(r={error:r.toString()}),(r=r||{}).errorCode=i||s.GENERIC_ERROR,this.logger&&(0<Object.keys(r).length?this.logger.warn(o+" "+t,r):this.logger.warn(o+" "+t)),o&&(n=n?n.concat([o]):[o]),r.forceSend=!0,this.gt&&this.isActive)try{throw new Error(t)}catch(t){atatus.notify(t,r,n)}if(this.St)try{this.St({pluginVersion:this.version,reportingId:this.Tt?this.Tt.reportingGuid:"",p2pId:this.Tt?this.Tt.p2pId:"",message:t,severity:u,code:r.errorCode})}catch(t){this.logger.warn("Error in the onErrorCallback",t)}},p.prototype.setTags=function(t){this.gt&&this.isActive&&atatus.setTags(t)},p.prototype.notify=function(t,e){this.gt&&this.isActive&&((e=e||{}).forceSend=!0,atatus.notify(t,e))},p);function p(t){var e=this;if(this.version=t,this.isActive=!1,this.gt="undefined"!=typeof atatus&&null!=atatus,this.Tt={},p.vt)throw new Error("Error: Instantiation failed: Use AtatusLogger.getInstance() instead of new.");var i,r=null!=n.Nt.key?n.Nt.key:u,o=1==n.Nt.enabledRUM,s=1==n.Nt.enableKeyCombination,a=1==n.Nt.enabledErrorFilter;a&&(i=this.wt()),this.version=t,this.gt&&(null==n.Nt.enabled&&h||null!=n.Nt.enabled&&1==n.Nt.enabled)&&(atatus.config(r,{enableSourcemap:!0,disableRUM:!o,console:!1,version:t,beforeErrorSend:function(t){var r=!1;for(var n in t.customData=t.customData||{},void 0!==t.customData.forceSend&&(r=t.customData.forceSend,delete t.customData.forceSend,0===Object.keys(t.customData).length&&(t.customData=null)),e.Tt)t.customData[n]=e.Tt[n];if(!a||r)return!0;if(!i)return!1;try{var o=!1;if(t.backTraces){for(var s=0,u=t.backTraces;s<u.length;s++){var h=u[s];if(-1<h.f.indexOf(i)&&h.ln>c){o=!0;break}}o&&(t.name=t.name.replace(/%s \[[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]+] /,""),0<=t.name.indexOf("Status Code Error:")&&(t.tags=["Plugin Error Code",t.name.split(":")[1].trim()]))}return o}catch(t){return!1}}}).install(),s&&this.dt(),this.isActive=!0,window.console&&console.log("[HiveComm] Error Monitor installed [RUM:"+o+", KeyHandler:"+s+"]"),a&&!i&&this.logError("Could not extract error filter"))}e.ErrorMonitor=l},function(t,e,i){"use strict";var r,n,o,s,a,u,h,c,l,p,f,d,g,v,y,m,E,w,b,S,T,I,_,P,O,A,R,C,N,k,D,L,x,M,B,H,U,j,F,V,G,q,Y,W,J,Q,X,K,$,z,Z,tt,et,it,rt,nt,ot,st;Object.defineProperty(e,"s",{value:!0}),(s=o=e.At||(e.At={}))[s._t=0]="NORMAL",s[s.Ct=1]="HIGH",s[s.CRITICAL=2]="CRITICAL",(u=a=e.kt||(e.kt={}))[u.Dt=268435456]="BASE_CODE",u[u.Mt=268435457]="FIRE_SERVER_CONNECTED_WITH_SWARM",u[u.jt=268435458]="FIRE_SERVER_CONNECTED_WITHOUT_SWARM",u[u.Pt=268435459]="CONNECTION_NOT_ESTABLISHED",u[u.Ht=268435460]="SEND_MESSAGE_TO_NON_EXISTING_CHANNEL",u[u.Lt=268435461]="RECEIVED_MESSAGE_FROM_NON_EXISTING_CONNECTION",(h=e.Ut||(e.Ut={}))[h.Dt=536870912]="BASE_CODE",h[h.Ft=536870913]="CREATE_OFFER",h[h.Gt=536870914]="CREATE_ANSWER",h[h.xt=536870915]="SIGNALING_STATE_CLOSED",h[h.Bt=536870916]="SET_LOCAL_DESCRIPTION_FAILED",h[h.Vt=536870917]="NEGOTIATION_FAILURE",h[h.qt=536870918]="SETUP_CHANNEL_ERROR",h[h.Qt=536870919]="ICE_CONNECTION_FAILED",h[h.Wt=536870920]="SET_REMOTE_DESCRIPTION",h[h.Yt=536870921]="UPDATE_ICE_CANDIDATES",h[h.Kt=536870922]="ANSWER_RECEIVED",h[h.$t=536870923]="OFFER_RECEIVED",h[h.Xt=536870924]="SEND_CANDIDATES",h[h.Jt=536870925]="CLOSE_CONNECTION",h[h.zt=536870926]="SEND_DATA",(c=e.Zt||(e.Zt={}))[c.Dt=805306368]="BASE_CODE",c[c.ti=805306369]="SEND_MSG_WITHOUT_CHANNEL",c[c.ii=805306370]="MSG_TRIGGER_ERROR",c[c.ni=805306371]="CONNECTION_TIMEOUT",(l=e.ri||(e.ri={}))[l.Dt=1073741824]="BASE_CODE",l[l.Jt=1073741825]="CLOSE_CONNECTION",l[l.si=1073741826]="P2P_DISPATCHER_ERROR",(p=e.ei||(e.ei={}))[p.Dt=1342177280]="BASE_CODE",p[p.hi=1342177281]="CONSTRUCT_MESSAGE",p[p.oi=1342177282]="DROPPED_MESSAGE",p[p.ui=1342177283]="SEND_MESSAGE",p[p.ai=1342177284]="RECEIVE_MESSAGE",(f=e.fi||(e.fi={}))[f.Dt=1610612736]="BASE_CODE",f[f.ci=1610612737]="NEW_DISPATCHER",(d=e.li||(e.li={}))[d.Dt=1879048192]="BASE_CODE",d[d.vi=1879048193]="INIT_CACHE",d[d.di=1879048194]="PUT_OPERATION",d[d.Ei=1879048195]="GET_OPERATION",d[d.pi=1879048196]="CONTAINS_OPERATION",d[d.wi=1879048197]="GET_KEYS_OPERATION",d[d.gi=1879048198]="GET_ELEMENTS_OPERATION",(g=e.bi||(e.bi={}))[g.Dt=2147483648]="BASE_CODE",g[g.di=2147483649]="PUT_OPERATION",g[g.Ei=2147483650]="GET_OPERATION",g[g.pi=2147483651]="CONTAINS_OPERATION",g[g.wi=2147483652]="GET_KEYS_OPERATION",g[g.gi=2147483653]="GET_ELEMENTS_OPERATION",g[g.yi=2147483654]="PURGE_CACHE_OPERATION",(v=e.Ti||(e.Ti={}))[v.Dt=2415919104]="BASE_CODE",(y=e.mi||(e.mi={}))[y.Dt=2684354560]="BASE_CODE",y[y.Oi=2684354561]="DISCOVERED_PEERS",y[y.Si=2684354562]="LEADER_ELECTION",y[y.Ri=2684354563]="GC_MEMBERS",y[y.Ii=2684354564]="ADD_LAN_MEMBER",y[y._i=2684354565]="ADD_RANDOM_MEMBER",y[y.Ai=2684354566]="SAMPLE_MEMBERSHIP",(m=e.Ni||(e.Ni={}))[m.Dt=2952790016]="BASE_CODE",m[m.Ci=2952790017]="SEND_ALL_HAVES",m[m.ki=2952790018]="SEND_HAVE",m[m.Di=2952790019]="UNKNOWN_HAVE",m[m.Mi=2952790020]="UNKNOWN_HAVES",m[m.ji=2952790021]="RECEIVED_HAVE",m[m.Pi=2952790022]="RECEIVED_HAVES",m[m.Hi=2952790023]="NO_OUT_PARTNER",m[m.Li=2952790024]="CREATE_RANDOM_BUFFER",m[m.Ui=2952790025]="REQUEST_PING",m[m.Fi=2952790026]="RECEIVED_PING",m[m.Gi=2952790027]="UNKNOWN_PING",m[m.xi=2952790028]="SEND_PONG",m[m.Bi=2952790029]="UNKOWN_PONG",m[m.Vi=2952790030]="WRONG_PONG_SIZE",m[m.qi=2952790031]="WRONG_TIMESTAMP",m[m.Qi=2952790032]="RECEIVED_PONG",m[m.Wi=2952790033]="COLLECT_PARTNER_SNAPSHOTS",(w=E=e.Yi||(e.Yi={}))[w.Dt=3221225472]="BASE_CODE",w[w.Ki=3221225473]="START_PARTNERSHIP",w[w.$i=3221225474]="NEW_LAN_MEMBER",w[w.Xi=3221225475]="IN_PARTNER_CHOICE",w[w.Ji=3221225476]="IN_PARTNER_ADD_PROCESS",w[w.zi=3221225477]="IN_PARTNER_CONNECT",w[w.Zi=3221225478]="IN_PARTNERSHIP_REQUEST",w[w.tn=3221225479]="OUT_PARNTERSHIP_REQUEST_PROCESS",w[w.in=3221225480]="CONSTRUCT_DISCOVER_PEER_INFO",w[w.nn=3221225481]="SEND_PARTN_RESP",w[w.rn=3221225482]="NEW_IN_PARTNER_TO_LIST",w[w.sn=3221225483]="REMOVE_DISCONNECTED_PEER",w[w.en=3221225484]="REMOVE_IN_PARTNER",w[w.hn=3221225485]="CLOSE_RECEIVED",w[w.un=3221225486]="SEND_PART_REQUEST",w[w.an=3221225487]="PART_REQUEST_EXPIRED",w[w.fn=3221225488]="UNKNOWN_PARTNERSHIP_REQUEST_EXPIRED",w[w.cn=3221225489]="UNKNOWN_OUT_PART_RESP",w[w.vn=3221225490]="CLOSE_PARTNERSHIP",w[w.dn=3221225491]="ANNOUNCE_BITRATE",w[w.En=3221225492]="CONSTRUCT_ANNOUNCE_BITRATE_MSG",w[w.pn=3221225493]="RECEIVE_BITRATE_INFO",w[w.wn=3221225494]="PEER_INFO_RECEIVED",w[w.gn=3221225495]="PEER_INFO_ANNOUNCED",w[w.bn=3221225496]="COLLECT_ALL_PARTNERS",(b=e.yn||(e.yn={}))[b.Dt=3489660928]="BASE_CODE",b[b.Tn=3489660929]="UPDATE_IN_PARTNERS",(S=e.mn||(e.mn={}))[S.Dt=3758096384]="BASE_CODE",S[S.On=3758096385]="SELECT_PARTNERS_TO_REMOVE",S[S.Sn=3758096386]="SELECT_PARTNERS_TO_ADD",S[S.Rn=3758096387]="SELECT_UPDATE_OUT",(T=e.In||(e.In={}))[T.Dt=4026531840]="BASE_CODE",T[T.On=4026531841]="SELECT_PARTNERS_TO_REMOVE",T[T.Sn=4026531842]="SELECT_PARTNERS_TO_ADD",T[T.Rn=4026531843]="SELECT_UPDATE_OUT",(I=e._n||(e._n={}))[I.Dt=4294967296]="BASE_CODE",I[I.Tn=4294967297]="UPDATE_IN_PARTNERS",I[I.On=4294967298]="SELECT_PARTNERS_TO_REMOVE",I[I.Sn=4294967299]="SELECT_PARTNERS_TO_ADD",I[I.Rn=4294967300]="SELECT_UPDATE_OUT",I[I.An=4294967301]="GROUP_PARTNERS",I[I.Nn=4294967302]="IDENTIFY_MEMBER_AS_LEADER_OR_SAME_SITE",I[I.Cn=4294967303]="AHEAD_BUT_BEHIND_DELTA",I[I.kn=4294967304]="BEHIND_OR_NOT_RETRIEVING_BITRATE",I[I.Dn=4294967305]="GET_DELTA_FOR_BITRATE",(_=e.Mn||(e.Mn={}))[_.Dt=4563402752]="BASE_CODE",_[_.jn=4563402753]="UPDATE_OUT_PARTNERS",(P=e.Pn||(e.Pn={}))[P.Dt=4831838208]="BASE_CODE",P[P.Hn=4831838209]="ADD_FRAGMENT_TO_MAP",P[P.Ln=4831838210]="WRAP_CHUNK",P[P.Un=4831838211]="GENERATE_HASHMAPS",(O=e.Fn||(e.Fn={}))[O.Dt=5100273664]="BASE_CODE",O[O.Gn=5100273665]="INIT_AES_MANAGER",O[O.xn=5100273666]="INIT_KEY",O[O.Bn=5100273667]="INIT_IV",O[O.Vn=5100273668]="DECRYPT_BUFFER",O[O.qn=5100273669]="DOWNLOAD_KEY_ONLOAD",O[O.Qn=5100273670]="DOWNLOAD_KEY",(R=A=e.Wn||(e.Wn={}))[R.Dt=5368709120]="BASE_CODE",R[R.Yn=5368709121]="GET_ENTITY_TYPE",R[R.Kn=5368709122]="GET_ENTITY_CHARACTERISTICS",R[R.$n=5368709123]="GET_NEXT_ENTITY",R[R.Xn=5368709124]="IS_CURRENT_CONTEXT",R[R.Jn=5368709125]="PARSED_METADATA",R[R.zn=5368709126]="PREFETCH_METADATA_RECEIVED",R[R.Zn=5368709127]="FRAGMENT_RECEIVED",R[R.tr=5368709128]="EVALUATE_PROTECTION",R[R.ir=5368709129]="GET_DISTANCE_DURATION",(N=C=e.nr||(e.nr={}))[N.Dt=5637144576]="BASE_CODE",N[N.rr=5637144577]="PARSE_METADATA",N[N.sr=5637144578]="EXTRACT_SEGMENT_MAPS",N[N.er=5637144579]="INIT_PROTECTION",N[N.hr=5637144580]="GET_SEGMENT_INFO",N[N.ur=5637144581]="GET_SEGMENT_DISTANCE",N[N.ar=5637144582]="EXTRACT_DURATION",N[N.cr=5637144583]="EXTRACT_DURATION_OR_DECRYPT",N[N.lr=5637144584]="EXTRACT_DURATION_CANNOT_DECRYPT",N[N.vr=5637144585]="EXTRACT_DURATION_NON_ENCRYPTED",N[N.dr=5637144586]="GENERATE_MISSING_SEGMENTS",N[N.Er=5637144587]="REGENERATE_MANIFEST",N[N.pr=5637144588]="TRIM_MANIFEST",N[N.wr=5637144589]="PARSE_BITRATES_TO_FILTER",N[N.gr=5637144590]="FILTER_BITRATES",N[N.br=5637144591]="GET_DISTANCE_DURATION_BETWEEN_SEGMENTS",N[N.yr=5637144592]="GET_SEGMENT",(D=k=e.Tr||(e.Tr={}))[D.Dt=5905580032]="BASE_CODE",D[D.Xn=5905580033]="IS_CURRENT_CONTEXT",D[D.Yn=5905580034]="GET_ENTITY_TYPE",D[D.Kn=5905580035]="GET_ENTITY_CHARACTERISTICS",D[D.mr=5905580036]="METADATA_RECEIVED",D[D.Or=5905580037]="SCHEDULE_METADATA_PREFETCH",D[D.$n=5905580038]="GET_NEXT_ENTITY",D[D.ir=5905580039]="GET_DISTANCE_DURATION",(x=L=e.Sr||(e.Sr={}))[x.Dt=6174015488]="BASE_CODE",x[x.Rr=6174015489]="PLAYLIST_MISMATCH",x[x.Ir=6174015490]="FLOAT_BITRATE",x[x.rr=6174015491]="PARSE_METADATA",x[x.hr=6174015492]="GET_SEGMENT_INFO",x[x.Ar=6174015493]="UPDATE_PLAYLIST",x[x.Nr=6174015494]="TRIM_PLAYLIST",(M=e.Cr||(e.Cr={}))[M.Dt=6442450944]="BASE_CODE",M[M.kr=6442450945]="GET_P2P_TIMEOUT",M[M.Dr=6442450946]="DELIVER_DELAY",(B=e.Mr||(e.Mr={}))[B.Dt=6710886400]="BASE_CODE",B[B.jr=6710886401]="IS_PLAYER_BUFFERING_BASE",B[B.Pr=6710886402]="CONFIGURE_REQUEST_DIRECTIVE",B[B.Hr=6710886403]="ATTEMPT_TO_UPGRADE_PREFETCH",(H=e.Lr||(e.Lr={}))[H.Dt=6979321856]="BASE_CODE",H[H.Ur=6979321857]="PREPARE_REQUEST",H[H.Fr=6979321858]="GET_CONNECTIVITY_INFO",H[H.Gr=6979321859]="COLLECT_TRACKER_REQUEST_INFO",H[H.xr=6979321860]="PREPARE_QUERY",H[H.Br=6979321861]="PREPARE_BITRATE_QUERY",H[H.Vr=6979321862]="PREPARE_TRACKER_INFO",H[H.qr=6979321863]="SEND_REQUEST",H[H.Qr=6979321864]="HANDLE_RESPONSE",(U=e.Wr||(e.Wr={}))[U.Dt=7247757312]="BASE_CODE",U[U.Yr=7247757313]="NEW_TRACKER_CLIENT",U[U.Kr=7247757314]="SERIALIZE_REQUEST",U[U.$r=7247757315]="DESERIALIZE_RESPONSE",U[U.Xr=7247757316]="SERVICE_CONNECTION_DOWN",U[U.qr=7247757317]="SEND_REQUEST",U[U.Jr=7247757318]="TRACKER_MANAGER_INIT",(j=e.zr||(e.zr={}))[j.Dt=7516192768]="BASE_CODE",j[j.Zr=7516192769]="SORT_PARTNERS",(F=e.ns||(e.ns={}))[F.Dt=7784628224]="BASE_CODE",F[F.rs=7784628225]="CHOOSE_PARTNER",(V=e.ss||(e.ss={}))[V.Dt=8053063680]="BASE_CODE",V[V.es=8053063681]="CONSTRUCT_FRAGMENT_REQUEST_MESSAGE",V[V.hs=8053063682]="SEND_FRAGMENT_REQUEST",V[V.us=8053063683]="RECEIVE_CHUNK",V[V.fs=8053063684]="SEND_ACK",V[V.cs=8053063685]="CLEAN_UP_NOT_PENDING",V[V.ls=8053063686]="STOP_TRANSFER",V[V.vs=8053063687]="RECEIVE_EXPIRED_CHUNK",(G=e.ds||(e.ds={}))[G.Dt=8321499136]="BASE_CODE",G[G.Es=8321499137]="CONSTRUCT_CHUNK_RESPONSE",G[G.ps=8321499138]="START_SENDING_CHUNK",G[G.ws=8321499139]="SEND_CHUNK",G[G.gs=8321499140]="UNKNOWN_ACK",(q=e.bs||(e.bs={}))[q.Dt=8589934592]="BASE_CODE",q[q.ys=8589934593]="NO_PARTNER_FOUND",q[q.Ts=8589934594]="FILTER_IN_PARTNERS",q[q.ms=8589934595]="SET_REQUEST_TIMEOUT",q[q.Os=8589934596]="REMOVE_REQUEST",q[q.Ss=8589934597]="CANCEL_ON_NON_EXISTING_SESSION",q[q.Rs=8589934598]="DO_NOT_HAVE",q[q.Is=8589934599]="REQUESTED_TO_NON_PARTNER",(Y=e._s||(e._s={}))[Y.Dt=8858370048]="BASE_CODE",Y[Y.As=8858370049]="RESPOND_TO_PEER",Y[Y.Ns=8858370050]="REQUEST_SATISFIED",Y[Y.Cs=8858370051]="REQUEST_PARTIALLY_SATISFIED",Y[Y.ks=8858370052]="REQUEST_NOT_SATISFIED",Y[Y.Ds=8858370053]="SEND_DO_NOT_HAVE",Y[Y.Ms=8858370054]="SEND_NO_PARTNERS",(W=e.js||(e.js={}))[W.Dt=9126805504]="BASE_CODE",W[W.Ps=9126805505]="VIOLATE_SPOOFING_HANDLER",W[W.Hs=9126805506]="VIOLATE_SPOOFING_RULES",W[W.Ls=9126805507]="ADD_OR_UPDATE_SPOOFING_MAPS",W[W.Us=9126805508]="PERIODIC_CHECK_IP_SPOOFING",(J=e.Fs||(e.Fs={}))[J.Dt=9395240960]="BASE_CODE",J[J.Gs=9395240961]="REQUEST_COMPLETED",J[J.xs=9395240962]="REQUEST_NOT_EXISTING_COMPLETED",J[J.Bs=9395240963]="REQUEST_PARTIALLY_FAILED",J[J.Vs=9395240964]="REQUEST_NOT_EXISTING_PARTIALLY_FAILED",J[J.qs=9395240965]="REQUEST_FAILED",J[J.Qs=9395240966]="REQUEST_NOT_EXISTING_FAILED",(Q=e.Ws||(e.Ws={}))[Q.Dt=9663676416]="BASE_CODE",Q[Q.Ys=9663676417]="UPDATE_WANTED_SESSIONS",Q[Q.Ks=9663676418]="CONFIGURE_PREFETCHING",Q[Q.$s=9663676419]="START_PREFETCHING",Q[Q.Xs=9663676420]="FRAGMENT_RETRIEVED_SESSION_NOT_EXISTING",Q[Q.Js=9663676421]="ATTEMPT_PREFETCH_BEFORE_PLAYER_REQUEST",Q[Q.zs=9663676422]="FORWARD_IF_NECESSARY",Q[Q.Zs=9663676423]="IS_ALLOWED_TO_PREFETCH",Q[Q.te=9663676424]="PREFETCH_PROCESS",Q[Q.ie=9663676425]="CHECK_PLAYER_DISTANCE",Q[Q.ne=9663676426]="OFFLOAD_LEADER",Q[Q.re=9663676427]="UPGRADE_PREFETCH",(X=e.se||(e.se={}))[X.Dt=9932111872]="BASE_CODE",X[X.ee=9932111873]="REQUEST_TIMEOUT",(K=e.he||(e.he={}))[K.Dt=10200547328]="BASE_CODE",K[K.oe=10200547329]="PLAYER_REQUEST_ERROR",K[K.ue=10200547330]="PLAYER_ABORT_ERROR",($=e.ae||(e.ae={}))[$.Dt=10468982784]="BASE_CODE",$[$.fe=10468982785]="ADD_HAVE",$[$.ce=10468982786]="REMOVE_PEER",(Z=z=e.le||(e.le={}))[Z.Dt=10737418240]="BASE_CODE",Z[Z.ve=10737418241]="CONSTRUCT_SWARM",Z[Z.de=10737418242]="INIT_SWARM",Z[Z.Ee=10737418243]="SWITCH_STATE",Z[Z.ee=10737418244]="REQUEST_TIMEOUT",(tt=e.pe||(e.pe={}))[tt.Dt=11005853696]="BASE_CODE",tt[tt.we=11005853697]="SERIALIZE_MESSAGE",tt[tt.ge=11005853698]="EXTRACT_MESSAGE",(it=et=e.be||(e.be={}))[it.Dt=11274289152]="BASE_CODE",it[it.ye=11274289153]="NO_MATCHING_SESSION",it[it.Te=11274289154]="UNABLE_RESOLVE_TICKET",it[it.me=11274289155]="UNABLE_INIT_TECHS",it[it.Oe=11274289156]="NO_TOKEN_FOUND",it[it.Se=11274289157]="NO_VALID_TICKET",it[it.Re=11274289158]="ON_ACTIVE_SESSION_CB_ERROR",it[it.Ie=11274289159]="NO_VISIBILITY_LISTENER",it[it._e=11274289160]="STATUS_CODE",(rt=e.Ae||(e.Ae={}))[rt.Dt=11542724608]="BASE_CODE",rt[rt.Ne=11542724609]="CALCULATE_BATCH_LOCALITY",(ot=nt=e.Ce||(e.Ce={}))[ot.Dt=11811160064]="BASE_CODE",ot[ot.ke=11811160065]="BITRATE_TOO_HIGH",ot[ot.De=11811160066]="NUM_BITRATES_NONE",ot[ot.Me=11811160067]="NUM_BITRATES_OK",ot[ot.je=11811160068]="NUM_BITRATES_WARNING",ot[ot.Pe=11811160069]="NUM_BITRATES_ERROR",ot[ot.He=11811160070]="NUM_BITRATES_ATATUS_ERROR_NONE",ot[ot.Le=11811160071]="NUM_BITRATES_ATATUS_ERROR_HIGH",(st=e.Ue||(e.Ue={}))[st.Dt=12079595520]="BASE_CODE",st[st.we=12079595521]="SERIALIZE_MESSAGE",st[st.qr=12079595522]="SEND_REQUEST",st[st.Xr=12079595523]="SERVICE_CONNECTION_DOWN",st[st.Fr=12079595524]="GET_CONNECTIVITY_INFO",e.GENERIC_ERROR=1,e.Fe=((r={})[nt.ke]="The detected bitrate ({0}) is higher than the maximum certified bitrate ({1}). You may encounter issues watching the stream.",r[nt.De]="{0} stream detected with missing video bitrate metadata. This is likely caused by an incorrect manifest served by the video platform application.",r[nt.Me]="{0} stream detected {1} video bitrates: {2}",r[nt.je]="{0} stream detected with {1} video bitrates: {2}. Hive Streaming recommends four or fewer video bitrates to insure optimal networking savings.",r[nt.Pe]="{0} stream detected with {1} video bitrates: {2}. This is likely caused by an incorrect configuration in the video encoder, video streaming origin or transcoding service.",r[nt.He]="Stream has zero available bitrates.",r[nt.Le]="Stream has too many available bitrates.",r),e.It=((n={})[a.Mt]=o.Ct,n[a.jt]=o.Ct,n[E.Ki]=o.Ct,n[A.Xn]=o.Ct,n[C.Er]=o.Ct,n[k.Xn]=o.Ct,n[L.Rr]=o.Ct,n[z.ve]=o.Ct,n[et.ye]=o.Ct,n[et.Te]=o.Ct,n[et.me]=o.Ct,n[et.Oe]=o.Ct,n[et.Se]=o.Ct,n)},function(t,e,i){(function(e,i){
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e){"use strict";"function"==typeof bootstrap?bootstrap("promise",e):t.exports=e()}((function(){"use strict";var t=!1;try{throw new Error}catch(u){t=!!u.stack}function r(){}var n,o=S(),s=function(){var t={Ge:void 0,next:null},r=t,n=!1,o=void 0,a=!1,u=!1;try{u=navigator&&("Microsoft Internet Explorer"===navigator.appName||null!=navigator.appVersion.match(/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i))}catch(u){}var h=[];function c(){for(var e,i;t.next;)e=(t=t.next).Ge,t.Ge=void 0,(i=t.domain)&&(t.domain=void 0,i.xe()),l(e,i);for(;h.length;)l(e=h.pop());n=!1}function l(t,e){try{t()}catch(t){if(a)throw e&&e.Be(),setTimeout(c,0),e&&e.xe(),t;setTimeout((function(){throw t}),0)}e&&e.Be()}if(s=function(t){"undefined"!=typeof Framework&&Framework.U()?Framework.setTimeout(t,0):(r=r.next={Ge:t,domain:a&&e.domain,next:null},n||(n=!0,o()))},"object"==typeof e&&e&&"[object process]"===e.toString()&&e.Ve)a=!0,o=function(){e.Ve(c)};else if("function"!=typeof i||u)if("undefined"==typeof MessageChannel||u)o=function(){setTimeout(c,0)};else{var p=new MessageChannel;p.port1.onmessage=function(){o=f,(p.port1.onmessage=c)()};var f=function(){p.port2.postMessage(0)};o=function(){setTimeout(c,0),f()}}else o="undefined"!=typeof window?i.bind(window,c):function(){i(c)};return s.qe=function(t){h.push(t),n||(n=!0,o())},s}(),a=Function.call;function u(t){return function(){return a.apply(t,arguments)}}var h,c=u(Array.prototype.slice),l=u(Array.prototype.reduce||function(t,e){var i=0,r=this.length;if(1===arguments.length)for(;;){if(i in this){e=this[i++];break}if(++i>=r)throw new TypeError}for(;i<r;i++)i in this&&(e=t(e,this[i],i));return e}),p=u(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),f=u(Array.prototype.map||function(t,e){var i=this,r=[];return l(i,(function(n,o,s){r.push(t.call(e,o,s,i))}),void 0),r}),d=Object.create||function(t){function e(){}return e.prototype=t,new e},g=Object.defineProperty||function(t,e,i){return t[e]=i.value,t},v=u(Object.prototype.hasOwnProperty),y=Object.keys||function(t){var e=[];for(var i in t)v(t,i)&&e.push(i);return e},m=u(Object.prototype.toString);h="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};function E(e,i){if(t&&i.stack&&"object"==typeof e&&null!==e&&e.stack){for(var r=[],n=i;n;n=n.source)n.stack&&(!e.Qe||e.Qe>n.We)&&(g(e,"__minimumStackCounter__",{value:n.We,configurable:!0}),r.unshift(n.stack));r.unshift(e.stack);var o=function(t){for(var e=t.split("\n"),i=[],r=0;r<e.length;++r){var n=e[r];!b(n)&&-1===(o=n).indexOf("(module.js:")&&-1===o.indexOf("(node.js:")&&n&&i.push(n)}var o;return i.join("\n")}(r.join("\nFrom previous event:\n"));g(e,"stack",{value:o,configurable:!0})}}function w(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var i=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(i)return[i[1],Number(i[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function b(t){var e=w(t);if(!e)return!1;var i=e[0],r=e[1];return i===n&&o<=r&&r<=Q}function S(){if(t)try{throw new Error}catch(t){var e=t.stack.split("\n"),i=w(0<e[0].indexOf("@")?e[1]:e[2]);if(!i)return;return n=i[0],i[1]}}function T(t){return t instanceof A?t:k(t)?function(t){var e=_();return T.Ve((function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}})),e.promise}(t):V(t)}(T.resolve=T).Ve=s,T.Ye=!1;var I=1;function _(){var e,i=[],r=[],n=d(_.prototype),o=d(A.prototype);if(o.Ke=function(t,n,o){var s=c(arguments);i?(i.push(s),"when"===n&&o[1]&&r.push(o[1])):T.Ve((function(){e.Ke.apply(e,s)}))},o.valueOf=function(){if(i)return o;var t=C(e);return N(t)&&(e=t),t},o.$e=function(){return e?e.$e():{state:"pending"}},T.Ye&&t)try{throw new Error}catch(n){o.stack=n.stack.substring(n.stack.indexOf("\n")+1),o.We=I++}function s(n){e=n,T.Ye&&t&&(o.source=n),l(i,(function(t,e){T.Ve((function(){n.Ke.apply(n,e)}))}),void 0),r=i=void 0}return n.promise=o,n.resolve=function(t){e||s(T(t))},n.fulfill=function(t){e||s(V(t))},n.reject=function(t){e||s(F(t))},n.notify=function(t){e||l(r,(function(e,i){T.Ve((function(){i(t)}))}),void 0)},n}function P(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=_();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function O(t){return P((function(e,i){for(var r=0,n=t.length;r<n;r++)T(t[r]).then(e,i)}))}function A(t,e,i){void 0===e&&(e=function(t){return F(new Error("Promise does not support operation: "+t))}),void 0===i&&(i=function(){return{state:"unknown"}});var r=d(A.prototype);if(r.Ke=function(i,n,o){var s;try{s=t[n]?t[n].apply(r,o):e.call(r,n,o)}catch(i){s=F(i)}i&&i(s)},r.$e=i){var n=i();"rejected"===n.state&&(r.exception=n.reason),r.valueOf=function(){var t=i();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function R(t,e,i,r){return T(t).then(e,i,r)}function C(t){if(N(t)){var e=t.$e();if("fulfilled"===e.state)return e.value}return t}function N(t){return t instanceof A}function k(t){return function(t){return t===Object(t)}(t)&&"function"==typeof t.then}"object"==typeof e&&e&&e.Xe&&e.Xe.Je&&(T.Ye=!0),(T.defer=_).prototype.ze=function(){var t=this;return function(e,i){e?t.reject(e):2<arguments.length?t.resolve(c(arguments,1)):t.resolve(i)}},T.Promise=P,(T.promise=P).race=O,P.all=Y,P.reject=F,(P.resolve=T).Ze=function(t){return t},A.prototype.Ze=function(){return this},T.join=function(t,e){return T(t).join(e)},A.prototype.join=function(t){return T([this,t]).th((function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)}))},T.race=O,A.prototype.race=function(){return this.then(T.race)},(T.ih=A).prototype.toString=function(){return"[object Promise]"},A.prototype.then=function(t,e,i){var r=this,n=_(),o=!1;return T.Ve((function(){r.Ke((function(e){o||(o=!0,n.resolve(function(e){try{return"function"==typeof t?t(e):e}catch(e){return F(e)}}(e)))}),"when",[function(t){o||(o=!0,n.resolve(function(t){if("function"==typeof e){E(t,r);try{return e(t)}catch(t){return F(t)}}return F(t)}(t)))}])})),r.Ke(void 0,"when",[void 0,function(t){var e,r=!1;try{e=function(t){return"function"==typeof i?i(t):t}(t)}catch(t){if(r=!0,!T.onerror)throw t;T.onerror(t)}r||n.notify(e)}]),n.promise},T.nh=function(t,e){return T(t).nh(e)},A.prototype.nh=function(t){return t=T(t),this.then((function(e){return t.sh(e).rh(e)}))},T.when=R,A.prototype.rh=function(t){return this.then((function(){return t}))},T.rh=function(t,e){return T(t).rh(e)},A.prototype.eh=function(t){return this.then((function(){throw t}))},T.eh=function(t,e){return T(t).eh(e)},T.hh=C,T.oh=N,T.uh=k,T.ah=function(t){return N(t)&&"pending"===t.$e().state},A.prototype.ah=function(){return"pending"===this.$e().state},T.fh=function(t){return!N(t)||"fulfilled"===t.$e().state},A.prototype.fh=function(){return"fulfilled"===this.$e().state},T.lh=function(t){return N(t)&&"rejected"===t.$e().state},A.prototype.lh=function(){return"rejected"===this.$e().state};var D,L,x,M=[],B=[],H=[],U=!0;function j(){M.length=0,B.length=0,U=U||!0}function F(t){var i=A({when:function(i){return i&&function(t){if(U){var i=p(B,t);-1!==i&&("object"==typeof e&&e&&"function"==typeof e.vh&&T.Ve.qe((function(){var r=p(H,t);-1!==r&&(e.vh("rejectionHandled",M[i],t),H.splice(r,1))})),B.splice(i,1),M.splice(i,1))}}(this),i?i(t):this}},(function(){return this}),(function(){return{state:"rejected",reason:t}}));return function(t,i){U&&("object"==typeof e&&e&&"function"==typeof e.vh&&T.Ve.qe((function(){-1!==p(B,t)&&(e.vh("unhandledRejection",i,t),H.push(t))})),B.push(t),i&&void 0!==i.stack?M.push(i.stack):M.push("(no stack) "+i))}(i,t),i}function V(t){return A({when:function(){return t},get:function(e){return t[e]},set:function(e,i){t[e]=i},delete:function(e){delete t[e]},dh:function(e,i){return null==e?t.apply(void 0,i):t[e].apply(t,i)},apply:function(e,i){return t.apply(e,i)},keys:function(){return y(t)}},void 0,(function(){return{state:"fulfilled",value:t}}))}function G(t,e,i){return T(t).th(e,i)}function q(t,e,i){return T(t).Eh(e,i)}function Y(t){return R(t,(function(t){var e=0,i=_();return l(t,(function(r,n,o){var s;N(n)&&"fulfilled"===(s=n.$e()).state?t[o]=s.value:(++e,R(n,(function(r){t[o]=r,0==--e&&i.resolve(t)}),i.reject,(function(t){i.notify({index:o,value:t})})))}),void 0),0===e&&i.resolve(t),i.promise}))}function W(t){if(0===t.length)return T.resolve();var e=T.defer(),i=0;return l(t,(function(r,n,o){var s=t[o];i++,R(s,(function(t){e.resolve(t)}),(function(t){if(0==--i){var r=t||new Error(""+t);r.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+r.message,e.reject(r)}}),(function(t){e.notify({index:o,value:t})}))}),void 0),e.promise}function J(t){return R(t,(function(t){return t=f(t,T),R(Y(f(t,(function(t){return R(t,r,r)}))),(function(){return t}))}))}T.ph=j,T.wh=function(){return M.slice()},T.gh=function(){j(),U=!1},j(),T.reject=F,T.fulfill=V,T.bh=function(t){return A({yh:function(){}},(function(e,i){return q(t,e,i)}),(function(){return T(t).$e()}))},T.th=G,A.prototype.th=function(t,e){return this.all().then((function(e){return t.apply(void 0,e)}),e)},T.async=function(t){return function(){function e(t,e){var o;if("undefined"==typeof StopIteration){try{o=i[t](e)}catch(t){return F(t)}return o.done?T(o.value):R(o.value,r,n)}try{o=i[t](e)}catch(t){return function(t){return"[object StopIteration]"===m(t)||t instanceof h}(t)?T(t.value):F(t)}return R(o,r,n)}var i=t.apply(this,arguments),r=e.bind(e,"next"),n=e.bind(e,"throw");return r()}},T.Th=function(t){T.done(T.async(t)())},T.mh=function(t){throw new h(t)},T.Oh=function(t){return function(){return G([this,Y(arguments)],(function(e,i){return t.apply(e,i)}))}},T.Eh=q,A.prototype.Eh=function(t,e){var i=this,r=_();return T.Ve((function(){i.Ke(r.resolve,t,e)})),r.promise},T.get=function(t,e){return T(t).Eh("get",[e])},A.prototype.get=function(t){return this.Eh("get",[t])},T.set=function(t,e,i){return T(t).Eh("set",[e,i])},A.prototype.set=function(t,e){return this.Eh("set",[t,e])},T.Sh=T.delete=function(t,e){return T(t).Eh("delete",[e])},A.prototype.Sh=A.prototype.delete=function(t){return this.Eh("delete",[t])},T.Rh=T.dh=function(t,e,i){return T(t).Eh("post",[e,i])},A.prototype.Rh=A.prototype.dh=function(t,e){return this.Eh("post",[t,e])},T.send=T.Ih=T._h=function(t,e){return T(t).Eh("post",[e,c(arguments,2)])},A.prototype.send=A.prototype.Ih=A.prototype._h=function(t){return this.Eh("post",[t,c(arguments,1)])},T.Ah=function(t,e){return T(t).Eh("apply",[void 0,e])},A.prototype.Ah=function(t){return this.Eh("apply",[void 0,t])},T.Nh=T.sh=function(t){return T(t).Eh("apply",[void 0,c(arguments,1)])},A.prototype.sh=function(){return this.Eh("apply",[void 0,c(arguments)])},T.Ch=function(t){var e=T(t),i=c(arguments,1);return function(){return e.Eh("apply",[this,i.concat(c(arguments))])}},A.prototype.Ch=function(){var t=this,e=c(arguments);return function(){return t.Eh("apply",[this,e.concat(c(arguments))])}},T.keys=function(t){return T(t).Eh("keys",[])},A.prototype.keys=function(){return this.Eh("keys",[])},T.all=Y,A.prototype.all=function(){return Y(this)},T.kh=W,A.prototype.kh=function(){return W(this)},T.Dh=(D=J,L="allResolved",x="allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(L+" is deprecated, use "+x+" instead.",new Error("").stack),D.apply(D,arguments)}),A.prototype.Dh=function(){return J(this)},T.allSettled=function(t){return T(t).allSettled()},A.prototype.allSettled=function(){return this.then((function(t){return Y(f(t,(function(t){function e(){return t.$e()}return(t=T(t)).then(e,e)})))}))},T.fail=T.catch=function(t,e){return T(t).then(void 0,e)},A.prototype.fail=A.prototype.catch=function(t){return this.then(void 0,t)},T.progress=function(t,e){return T(t).then(void 0,void 0,e)},A.prototype.progress=function(t){return this.then(void 0,void 0,t)},T.Mh=T.finally=function(t,e){return T(t).finally(e)},A.prototype.Mh=A.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=T(t),this.then((function(e){return t.sh().then((function(){return e}))}),(function(e){return t.sh().then((function(){throw e}))}))},T.done=function(t,e,i,r){return T(t).done(e,i,r)},A.prototype.done=function(t,i,r){var n=function(t){T.Ve((function(){if(E(t,o),!T.onerror)throw t;T.onerror(t)}))},o=t||i||r?this.then(t,i,r):this;"object"==typeof e&&e&&e.domain&&(n=e.domain.bind(n)),o.then(void 0,n)},T.timeout=function(t,e,i){return T(t).timeout(e,i)},A.prototype.timeout=function(t,e){var i=_(),r=setTimeout((function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),i.reject(e)}),t);return this.then((function(t){clearTimeout(r),i.resolve(t)}),(function(t){clearTimeout(r),i.reject(t)}),i.notify),i.promise},T.delay=function(t,e){return void 0===e&&(e=t,t=void 0),T(t).delay(e)},A.prototype.delay=function(t){return this.then((function(e){var i=_();return setTimeout((function(){i.resolve(e)}),t),i.promise}))},T.jh=function(t,e){return T(t).jh(e)},A.prototype.jh=function(t){var e=_(),i=c(t);return i.push(e.ze()),this.Ah(i).fail(e.reject),e.promise},T.Ph=function(t){var e=c(arguments,1);return T(t).jh(e)},A.prototype.Ph=function(){var t=c(arguments),e=_();return t.push(e.ze()),this.Ah(t).fail(e.reject),e.promise},T.Hh=T.Lh=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=c(arguments,1);return function(){var i=e.concat(c(arguments)),r=_();return i.push(r.ze()),T(t).Ah(i).fail(r.reject),r.promise}},A.prototype.Hh=A.prototype.Lh=function(){var t=c(arguments);return t.unshift(this),T.Lh.apply(void 0,t)},T.Uh=function(t,e){var i=c(arguments,2);return function(){var r=i.concat(c(arguments)),n=_();return r.push(n.ze()),T((function(){return t.apply(e,arguments)})).Ah(r).fail(n.reject),n.promise}},A.prototype.Uh=function(){var t=c(arguments,0);return t.unshift(this),T.Uh.apply(void 0,t)},T.Fh=T.Gh=function(t,e,i){return T(t).Gh(e,i)},A.prototype.Fh=A.prototype.Gh=function(t,e){var i=c(e||[]),r=_();return i.push(r.ze()),this.Eh("post",[t,i]).fail(r.reject),r.promise},T.xh=T.Bh=T.Vh=function(t,e){var i=c(arguments,2),r=_();return i.push(r.ze()),T(t).Eh("post",[e,i]).fail(r.reject),r.promise},A.prototype.xh=A.prototype.Bh=A.prototype.Vh=function(t){var e=c(arguments,1),i=_();return e.push(i.ze()),this.Eh("post",[t,e]).fail(i.reject),i.promise},T.qh=function(t,e){return T(t).qh(e)},A.prototype.qh=function(t){if(!t)return this;this.then((function(e){T.Ve((function(){t(null,e)}))}),(function(e){T.Ve((function(){t(e)}))}))},T.Qh=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var Q=S();return T}))}).call(this,i(37),i(101).setImmediate)},function(t,e,i){"use strict";i(11);var r=i(71),n=i(12),o=i(53),s=i(13);function a(t,e,i,n){if(!(this instanceof a))return new a(t,e,i,n);e=e||Object.Wh,i=i||Object.hash,n=n||Function.Yh,this.Kh=e,this.$h=i,this.Xh=n,this.store=new r(void 0,(function(t,i){return e(t.key,i.key)}),(function(t){return i(t.key)})),this.length=0,this.hiveAddEach(t)}(t.exports=a).Map=a,Object.hiveAddEach(a.prototype,n.prototype),Object.hiveAddEach(a.prototype,o.prototype),Object.hiveAddEach(a.prototype,s.prototype),Object.defineProperty(a.prototype,"size",n.Jh),a.prototype.zh=function(t){return new this.constructor(t,this.Kh,this.$h,this.Xh)},a.prototype.log=function(t,e,i,r){e=e||this.Zh,this.store.log(t,(function(t,i,r){e(t.value.value,i,r)}),i,r)},a.prototype.Zh=function(t,e){e(" key: "+t.key),e(" value: "+t.value)}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(7),n=(o.to=5e3,o.io=6,o.no=1e4,o.ro=.2,o.so=10,o);function o(){}var s=(a.eo="0.0.1",a.ho=3e4,a.oo=4e7,a.uo=1,a.ao=.8,a.fo=!1,a.co=2e4,a.lo=1e4,a);function a(){}var u=(h.vo=r.ut.do,h.Eo=3,h.po=1e4,h);function h(){}var c=(l.wo=1.2,l.bo=1.5,l.yo=1.2,l.To=.5,l);function l(){}var p=(f.mo=r.ut.Oo,f.So=2e4,f.Ro=5e3,f);function f(){}var d=(g.Io=[412,404],g);function g(){}var v=(y._o=2e3,y.Ao=!0,y.No=!1,y.Co=!0,y.ko=1,y.Do=.04,y.Mo=2,y.jo=!0,y.Po=!1,y.Ho=!1,y.Lo=1e4,y.Uo=4e4,y.Fo=3700,y.Go=2e4,y.xo=1,y.Bo=5,y.Vo=.4,y.qo=1,y.Qo=!0,y.Wo=2,y.Yo=1.5,y);function y(){}var m=(E.Ko=30,E.$o=2e4,E.Xo=3e4,E);function E(){}var w=(b.Jo=3e7,b.zo=3e4,b.Zo=!1,b.tu=10,b);function b(){}var S=(T.iu=3,T.nu=!1,T.ru=3e4,T.su=3,T.eu=.2,T.hu=.2,T.ou=1e4,T);function T(){}var I=(_.uu=!1,_);function _(){}var P=(O.au=64e3,O.fu=5e3,O.cu=1,O.lu=1,O.vu=!1,O.du=!0,O);function O(){}var A=(R.Eu=4e3,R.pu=3e4,R.wu=4096,R.gu=!0,R.bu=5e3,R.yu=1e4,R);function R(){}var C=(N.Tu=100,N.mu=200,N);function N(){}var k=(D.Ou=20,D.Su=20,D.Ru=20,D.Iu=5,D.TIMEOUT=6e4,D);function D(){}var L=(x._u="site",x.Au="externalAs",x.Nu="availableSendRate",x.Cu="remoteAddress",x.ku="localAddress",x.Du=2e4,x);function x(){}var M=(B.Mu=3e4,B);function B(){}var H=(U.ju=300,U);function U(){}var j=(F.Pu=!0,F.Hu=!0,F);function F(){}var V=(G.Lu=1,G.Uu=6,G.Fu=12,G.Gu=4,G.xu=27,G);function G(){}var q=(Y.Bu=n,Y.Vu=s,Y.qu=u,Y.Qu=c,Y.Wu=p,Y.Yu=d,Y.Ku=v,Y.$u=m,Y.Cache=w,Y.Xu=S,Y.N=I,Y.Ju=P,Y.UDPBroadcast=A,Y.zu=C,Y.Zu=k,Y.ta=L,Y.ia=M,Y.na=H,Y.ra=j,Y.sa=V,Y);function Y(){}e.ea=q},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(30),n=i(0),o=i(19),s=(a.prototype.ha=function(){return void 0!==this.oa},a.prototype.ua=function(t,e){return this.oa=Math.min(this.aa,e/t*8e3),this},a.prototype.fa=function(t){return this.oa=Math.max(this.aa,t),this},a.prototype.ca=function(t){t.ha()&&(this.ha()?this.oa=this.oa*(1-this.ALPHA)+t.oa*this.ALPHA:this.oa=t.oa)},a.prototype.la=function(t){return this.ha()?Math.round(8e3*t/this.oa):NaN},a.prototype.va=function(){return this.ha()?this.oa:NaN},a.prototype.da=function(){return this.ha()?this.oa/1e3:NaN},a.prototype.Ea=function(){return this.ha()?this.oa/1e6:NaN},a.prototype.pa=function(){return this.ha()?1e6<this.oa?(this.oa/1e6).toFixed(2)+"Mb/s":1e3<this.oa?(this.oa/1e3).toFixed(2)+"Kb/s":this.oa+"b/s":"NaN"},a);function a(){this.ALPHA=.25,this.aa=1e8,this.wa=1e4}e.ga=s;var u=(h.ba=function(t,e){return e?t+"-"+e:t},h.appendBuffer=function(t,e){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(e),t.byteLength),i.buffer},h.ya=function(t){var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t),0),e.buffer},h.Ta=function(t,e,i){void 0===i&&(i=!0);for(var r=0;r<t.length;)if(t[r]===e){if(t.splice(r,1),i)break}else r++},h.ma=function(t){return String.fromCharCode.apply(null,new Uint16Array(t))},h.Oa=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))},h.Sa=function(t){for(var e=t.length-1;0<e;e--){var i=Math.floor(n.Framework.random()*(e+1)),r=t[e];t[e]=t[i],t[i]=r}return t},h.Ra=function(t){var e=new Array;for(var i in t)t.hasOwnProperty(i)&&!/^\d+$/.test(i)&&e.push(i);return e},h.Ia=function(t){return Object.keys(t).map((function(t){return parseInt(t,10)})).filter((function(t){return!isNaN(t)}))},h._a=function(t,e){return t[e]?t[e]:null},h.Aa=function(t,e){return new r(e).Na(t).toString()},h.Ca=function(t){void 0===t&&(t="");var e=t.toLowerCase().indexOf("(format=mpd-time-csf)");return-1!=e&&(t=t.substr(0,e)),-1==(e=t.indexOf("?"))&&(e=t.length),t.substr(0,e)},h.ka=function(t){var e,i,n,o,s=new r(t),a=s.origin(),u=s.path();for("/"!==u.charAt(0)&&(e=!0,u="/"+u),"/.."!==u.slice(-3)&&"/."!==u.slice(-2)||(u+="/"),u=u.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(i=(i=u.substring(1).match(/^(\.\.\/)+/)||"")&&i[0]);-1!==(n=u.search(/\/\.\.(\/|$)/));)u=0!==n?(-1===(o=u.substring(0,n).lastIndexOf("/"))&&(o=n),u.substring(0,o)+u.substring(n+3)):u.substring(3);return a+u},h.Da=function(t){return 0==t.length?0:t.reduce((function(t,e){return t+e}))/t.length},h.Ma=function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),r=0,n=t.length;r<n;r++)i[r]=t.charCodeAt(r);return e},h.createEvent=function(t,e,i,r){var n=new t(e,i),o=r||i.currentTarget;return o&&Object.defineProperties(n,{currentTarget:{value:o,enumerable:!0,writable:!1},target:{value:o,enumerable:!0,writable:!1}}),n},h.ja=function(t){return t.replace(this.Pa,"\\$&")},h.Ha=new o.Counter,h.Pa=/[-\/\\^$*+?.()|[\]{}]/g,h);function h(){}e.La=u},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.Ua=!0,n.Fa=!0,n.Ga="undefined"!=typeof HIVE_COMM_JS_PROXY&&HIVE_COMM_JS_PROXY,n.xa="3.13.3",n.Ba="bitmovin",n.Va="undefined"!=typeof HIVE_PLUGIN_TIMEOUT?HIVE_PLUGIN_TIMEOUT:3e4,n.qa="6.0.0",n.Qa=!1,n.Wa=!0,n.Ya="undefined"!=typeof INCLUDE_VOD_CACHE&&INCLUDE_VOD_CACHE,n.Ka="undefined"!=typeof INCLUDE_UDP_BROADCAST&&INCLUDE_UDP_BROADCAST,n.$a="undefined"!=typeof INCLUDE_UDP_LEADER_ELECTION&&INCLUDE_UDP_LEADER_ELECTION,n.Xa="undefined"!=typeof LEADER_SCORE_EQUALITY&&LEADER_SCORE_EQUALITY,n.Ja="undefined"!=typeof INCLUDE_DEFAULT_NETWORK&&INCLUDE_DEFAULT_NETWORK,n.za="undefined"!=typeof HIVE_RESTRICTED_CONNINFO&&HIVE_RESTRICTED_CONNINFO,n.Oo="undefined"!=typeof HIVE_DISCOVERY?HIVE_DISCOVERY:"ws://127.0.0.1:8000/hive",n.Za="undefined"!=typeof P2PDispatcherDetailedLog&&P2PDispatcherDetailedLog,n.if="undefined"!=typeof NetworkManagerDetailedLog&&NetworkManagerDetailedLog,n.ot="undefined"!=typeof ATATUS_KEY?ATATUS_KEY:"592835a6b4204dd197c00488610003e0",n.at="undefined"!=typeof ATATUS_VERSION?ATATUS_VERSION:"0.8",n.ft="undefined"==typeof ATATUS_DEFAULT_ENABLED||ATATUS_DEFAULT_ENABLED,n.ct="undefined"!=typeof ATATUS_ROWS_TO_EXCLUDE?ATATUS_ROWS_TO_EXCLUDE:5,n.nf="undefined"==typeof HIVE_DETECT_PRIVATEIP||HIVE_DETECT_PRIVATEIP,n.rf=!0,n.sf=!1,n.ef=!0,n.do="undefined"==typeof HIVE_IP_SPOOFING_ENABLED||HIVE_IP_SPOOFING_ENABLED,n);function n(){}e.ut=r},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.hf="statsClient",n.R="servicesClient",n.uf="ticketResolver",n.u="identityProvider",n.af="connInfoProvider",n.ff="peerInfo",n.cf="streamInfoProvider",n.lf="reporting",n.vf="statsStore",n.df="trackManager",n.Ef="trackClient",n);function n(){}e.pf=r},function(t,e,i){"use strict";var r;Object.defineProperty(e,"s",{value:!0}),(r=e.wf||(e.wf={}))[r.gf=0]="AUDIO",r[r.bf=1]="VIDEO",r[r.yf=2]="METADATA",r[r.Tf=3]="OTHER"},function(t,e,i){"use strict";var r,n;Object.defineProperty(e,"s",{value:!0}),i(60),(r=e.mf||(e.mf={}))[r.Of=0]="TRACKER",r[r.k=1]="UDP",(n=e.Sf||(e.Sf={}))[n.Rf=1]="PLAYER",n[n.If=2]="P2P_AGENT",n[n._f=3]="PREFETCHER_FIRST_TIER",n[n.Af=4]="PREFETCHER_SECOND_TIER",e.TrackerPeerStreamInfo=function(){},e.Nf=function(t,e,i){this.isLeader=i,this.internalAs=0,this.externalAs=0,this.type=t,i||(this.isLeader=!1),e&&(this.guid=e.guid,this.internalAs=e.internalAs,this.externalAs=e.externalAs,this.nat=e.nat,this.bandwidth=e.bandwidth,this.watchingBitrate=e.watchingBitrate,this.streams=e.streams,this.rankValue=e.rankValue,this.timestamp=e.timestamp,this.privateIpString=e.privateIpString,this.publicIpString=e.publicIpString)}},function(t,e,i){i(68),i(38),i(69),i(105)},function(t,e,i){"use strict";function r(){throw new Error("Can't construct. GenericCollection is a mixin.")}(t.exports=r).Cf=Object.freeze([]),r.prototype.hiveAddEach=function(t){if(t&&Object(t)===t)if("function"==typeof t.forEach)t.forEach(this.hiveAdd,this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.hiveAdd(t[e],e);else Object.keys(t).forEach((function(e){this.hiveAdd(t[e],e)}),this);else if(t&&"number"==typeof t.length)for(e=0;e<t.length;e++)this.hiveAdd(t[e],e);return this},r.prototype.kf=function(t,e){return t.forEach((function(t){this.delete(t,e)}),this),this},r.prototype.forEach=function(t){var e=arguments[1];return this.reduce((function(i,r,n,o,s){t.call(e,r,n,o,s)}),void 0)},r.prototype.map=function(t){var e=arguments[1],i=[];return this.reduce((function(r,n,o,s,a){i.push(t.call(e,n,o,s,a))}),void 0),i},r.prototype.enumerate=function(t){null==t&&(t=0);var e=[];return this.reduce((function(i,r){e.push([t++,r])}),void 0),e},r.prototype.group=function(t,e,i){i=i||Object.Wh;var r=[],n=[];return this.forEach((function(o,s,a){s=t.call(e,o,s,a);var u,h=n.indexOf(s,i);-1===h?(u=[],r.push([s,u]),n.push(s)):u=r[h][1],u.push(o)})),r},r.prototype.toArray=function(){return this.map(Function.identity)},r.prototype.Df=function(){var t={};return this.reduce((function(e,i,r){t[r]=i}),void 0),t},r.prototype.filter=function(t){var e=arguments[1],i=this.zh();return this.reduce((function(r,n,o,s,a){t.call(e,n,o,s,a)&&i.hiveAdd(n,o)}),void 0),i},r.prototype.every=function(t){var e=arguments[1];return this.reduce((function(i,r,n,o,s){return i&&t.call(e,r,n,o,s)}),!0)},r.prototype.some=function(t){var e=arguments[1];return this.reduce((function(i,r,n,o,s){return i||t.call(e,r,n,o,s)}),!1)},r.prototype.all=function(){return this.every(Boolean)},r.prototype.kh=function(){return this.some(Boolean)},r.prototype.min=function(t){t=t||this.Mf||Object.compare;var e=!0;return this.reduce((function(i,r){return e?(e=!1,r):t(r,i)<0?r:i}),void 0)},r.prototype.max=function(t){t=t||this.Mf||Object.compare;var e=!0;return this.reduce((function(i,r){return e?(e=!1,r):0<t(r,i)?r:i}),void 0)},r.prototype.jf=function(t){return t=void 0===t?0:t,this.reduce((function(t,e){return t+e}),t)},r.prototype.Pf=function(t){var e=void 0===t?0:t,i=void 0===t?0:t;return this.reduce((function(t,r){e+=r,i+=1}),void 0),e/i},r.prototype.concat=function(){for(var t=this.zh(this),e=0;e<arguments.length;e++)t.hiveAddEach(arguments[e]);return t},r.prototype.Hf=function(){var t=this;return this.reduce((function(e,i){return i.forEach((function(t){this.push(t)}),e,t),e}),[])},r.prototype.Lf=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),Array.Uf(t)},r.prototype.join=function(t){return this.reduce((function(e,i){return void 0===e?i:e+t+i}),void 0)},r.prototype.Ff=function(t,e,i){return(t=t||this.Mf||Object.compare).Gf?(e=t.Gf,t=t.compare||this.Mf||Object.compare):e=e||Function.identity,void 0===i&&(i=1),this.map((function(t){return{Gf:e(t),value:t}})).sort((function(e,r){return t(e.Gf,r.Gf)*i})).map((function(t){return t.value}))},r.prototype.reversed=function(){return this.zh(this).reverse()},r.prototype.clone=function(t,e){if(void 0===t)t=1/0;else if(0===t)return this;var i=this.zh();return this.forEach((function(r,n){i.hiveAdd(Object.clone(r,t-1,e),n)}),this),i},r.prototype.only=function(){if(1===this.length)return this.xf()},r.prototype.iterator=function(){return this.Bf.apply(this,arguments)},r.Jh={get:function(){return this.length},enumerable:!1,configurable:!0},Object.defineProperty(r.prototype,"size",r.Jh),i(68)},function(t,e,i){i(11);var r=Object.prototype.hasOwnProperty;function n(){throw new Error("This is an abstract interface. Mix it. Don't construct it")}function o(t,e,i,r){var n,o,s,a=t.active,u=t.Vf,h=u.length,c=h;for(a.length>h&&(a.length=h);h--;)a[h]=u[h];for(o=0;o<c;o++)if(s=a[o],!o||0<=u.indexOf(s)){if(!(n=s[t.qf]||s[t.Qf]||s).call)throw new Error("No event listener for "+t.Wf+" or "+t.Yf+" or call on "+n);n.call(s,i,e,r)}}(t.exports=n).debug=!0,n.prototype.Kf=function(t){this.$f||Object.defineProperty(this,"$f",{value:{},enumerable:!1,configurable:!0,writable:!0});var e=this.$f;if(!r.call(e,t)){var i=String(t);i=i&&i[0].toUpperCase()+i.slice(1),e[t]={Xf:{Vf:[],active:[],qf:"handle"+i+"WillChange",Qf:"handlePropertyWillChange"},Jf:{Vf:[],active:[],qf:"handle"+i+"Change",Qf:"handlePropertyChange"}}}return e[t]},n.prototype.zf=function(t){if(!this.$f)return!1;if(!t)return!0;var e=this.$f;return!!r.call(e,t)},n.prototype.Zf=function(t,e,i){this.tc&&!this.ic&&this.tc();var r,o=n.Kf(this,t);r=i?o.Xf:o.Jf,n.rc(this,t),r.Vf.push(e);var s=this;return function(){n.sc(s,t,e,i),s=null}},n.prototype.ec=function(t,e){return n.Zf(this,t,e,!0)},n.prototype.sc=function(t,e,i){var r,o=n.Kf(this,t),s=(r=i?o.Xf:o.Jf).Vf.lastIndexOf(e);if(-1===s)throw new Error("Can't remove property change listener: does not exist: property name"+JSON.stringify(t));r.Vf.splice(s,1)},n.prototype.hc=function(t,e){return n.sc(this,t,e,!0)},n.prototype.oc=function(t,e,i){var r,s=n.Kf(this,t);if(!s.isActive){s.isActive=!0,r=i?s.Xf:s.Jf;try{o(r,t,e,this)}finally{s.isActive=!1}}},n.prototype.uc=function(t,e){return n.oc(this,t,e,!0)},n.prototype.rc=function(t){var e,i,n=this.ac;if(n){if(r.call(n,t))return}else{if(Array.isArray(this))return;if(!Object.isExtensible(this))throw new Error("Can't make property "+JSON.stringify(t)+" observable on "+this+" because object is not extensible");n={},Object.defineProperty(this,"ac",{value:n,enumerable:!1,writable:!0,configurable:!0})}"object"==typeof this.fc?e=this.fc:(e={},Object.defineProperty(this,"fc",{value:e,writable:!0,enumerable:!1})),e[t]=this[t];var s,a=this;do{if(i=Object.getOwnPropertyDescriptor(a,t))break;a=Object.getPrototypeOf(a)}while(a);if(i){if(!i.configurable)return;if(!i.writable&&!i.set)return}else i={value:void 0,enumerable:!0,writable:!0,configurable:!0};s="value"in(n[t]=i)?{get:function(){return i.value},set:function(r){var n,s;if(r!==i.value){if(!(s=(n=this.$f[t]).isActive)){n.isActive=!0;try{o(n.Xf,t,i.value,this)}finally{}}if(i.value=r,e[t]=r,!s)try{o(n.Jf,t,r,this)}finally{n.isActive=!1}}},enumerable:i.enumerable,configurable:!0}:{get:i.get,set:function(r){var n,s,a=this[t];if(i.set.call(this,r),(r=this[t])!==a){if(!(s=(n=this.$f[t]).isActive)){n.isActive=!0;try{o(n.Xf,t,a,this)}finally{}}if(e[t]=r,!s)try{o(n.Jf,t,r,this)}finally{n.isActive=!1}}},enumerable:i.enumerable,configurable:!0},Object.defineProperty(this,t,s)},n.Kf=function(t,e){return t.Kf?t.Kf(e):n.prototype.Kf.call(t,e)},n.zf=function(t,e){return t.zf?t.zf(e):n.prototype.zf.call(t,e)},n.Zf=function(t,e,i,r){if(Object.cc(t))return t.Zf?t.Zf(e,i,r):n.prototype.Zf.call(t,e,i,r)},n.sc=function(t,e,i,r){if(Object.cc(t))return t.sc?t.sc(e,i,r):n.prototype.sc.call(t,e,i,r)},n.oc=function(t,e,i,r){if(Object.cc(t))return t.oc?t.oc(e,i,r):n.prototype.oc.call(t,e,i,r)},n.ec=function(t,e,i){return n.Zf(t,e,i,!0)},n.hc=function(t,e,i){return n.sc(t,e,i,!0)},n.uc=function(t,e,i){return n.oc(t,e,i,!0)},n.rc=function(t,e){return t.rc?t.rc(e):n.prototype.rc.call(t,e)}},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o=i(43),s=i(7),a=(u.DashFilterBitrates=null,u.DashRemoveBitrateSize=!1,u);function u(){}var h=(c.AudioAccounting=!0,c);function c(){}var l,p=(n(f,l=o.HiveConfig.DebugLogs),f.TrackerLogs=0,f);function f(){return null!==l&&l.apply(this,arguments)||this}var d=(g.usiz=null,g);function g(){}var v=(y.restrictedConnectivityInfo=s.ut.za,y.hiddenHostnameValue="[Hidden]",y);function y(){}var m=(E.vc=null,E.dc=null,E);function E(){}var w=(b.detectPrivateIP=s.ut.nf,b);function b(){}var S=(T.Dash=a,T.Stats=h,T.DebugLogs=p,T.UDPBroadcast=d,T.SensitiveInfo=v,T.ClientInfo=m,T.ConnInfo=w,T);function T(){}e.HiveConfig=S,"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Dash=S.Dash,window.HiveConfig.Stats=S.Stats,window.HiveConfig.UDPBroadcast=S.UDPBroadcast,window.HiveConfig.DebugLogs=S.DebugLogs,window.HiveConfig.SensitiveInfo=S.SensitiveInfo,window.HiveConfig.ClientInfo=S.ClientInfo,window.HiveConfig.ConnInfo=S.ConnInfo)},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(30);function o(t,e,i,r){function n(n){if(t.hasOwnProperty(n)){var s=t[n];Array.isArray(s)?s.forEach((function(t,s){"object"==typeof t&&o(t,e+"."+n+"["+s+"]",i,r)})):"object"==typeof s?o(s,e+"."+n,i,r):"number"==typeof s&&isNaN(s)&&(i.push(e+"."+n),r||(t[n]=null))}}for(var s in void 0===e&&(e=""),void 0===i&&(i=[]),void 0===r&&(r=!1),t)n(s);return i}function s(t,e){var i;switch(typeof e){case"number":i=parseInt(t);break;case"boolean":i="true"===t;break;default:i=t}return i}function a(t,e,i,n,o){void 0===n&&(n=!0),void 0===o&&(o={});var s=r.defer();try{var a=new XMLHttpRequest;if(a.open(t,e,n),null!=i&&null!=i&&a.setRequestHeader("Content-Type",i),o)for(var u in o)o.hasOwnProperty(u)&&null!==o[u]&&a.setRequestHeader(u,o[u]);a.onload=function(){200==a.status?s.resolve(a.response):s.reject({status:a.status,reason:a.statusText,body:a.responseText})},a.onerror=function(t){s.reject({status:-1,reason:"Network Error"})},a.send()}catch(t){s.reject({status:-1,reason:t})}return s.promise}e.pa=function(t,e){return void 0===e&&(e=2),1e6<t?(t/1e6).toFixed(e)+"MB":1e3<t?(t/1e3).toFixed(e)+"KB":t+"B"},e.Ec=function(t,e,i){return void 0===e&&(e=""),void 0===i&&(i=[]),o(t,e,i,!0)},e.pc=o,e.wc=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t[0],r=1;r<t.length;r++){var n=new RegExp("\\{"+(r-1)+"\\}","gm");i=i.replace(n,t[r])}return i},e.updateOptions=function(t,e){for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(e[i]=t[i])},e.parseParameterOptions=function(t,e,i){var r=new n(t).query(!0);for(var o in r)try{if(r.hasOwnProperty(o)&&e.hasOwnProperty(o)&&i.hasOwnProperty(e[o])){var a=e[o],u=r[o];i[a]=s(u,i[a])}}catch(t){}},e.gc=function(t,e){var i=r.defer();return r.Ve((function n(){if(!t())return i.resolve(!0);r.when(e(),n,i.reject)})),i.promise},e.bc=function(t,e,i,r){return void 0===i&&(i=!0),void 0===r&&(r={}),a("GET",t,e,i,r)},e.yc=a,e.Tc=function(t,e,i,n,o){void 0===o&&(o=!0);var s=r.defer();try{var a=new XMLHttpRequest;if(a.open("POST",t,o),null!=i&&null!=i&&a.setRequestHeader("Content-Type",i),null!=n&&null!=n)for(var u in n)n.hasOwnProperty(u)&&null!==n[u]&&a.setRequestHeader(u,n[u]);a.onload=function(){200==a.status?s.resolve(a.response):s.reject({status:a.status,reason:a.response})},a.onerror=function(t){s.reject({status:-1,reason:"Network Error"})},a.send(e)}catch(t){s.reject({status:-1,reason:t})}return s.promise},e.mc=function(){"function"!=typeof Object.assign&&(Object.assign=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i})},e.ya=function(t){var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t),0),e.buffer},e.Oc=function(t,e){var i=0,r=0,n=!1;if(e)for(;r<e.length&&!n;)t>=e.start(r)&&t<e.end(r)&&(i=e.end(r)-t,n=!0),r++;return i}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.Sc="snapAccountingManager",n.Rc="membership",n.Ic="partnership",n._c="inPartnership",n.Ac="outPartnership",n.Nc="inPrefetcherPartnership",n.Cc="outPrefetcherPartnership",n.kc="cache",n.Dc="livecache",n.Mc="vodcache",n.jc="objIndex",n.Pc="centrFragment",n.Hc="hcache",n.Lc="responder",n.Uc="requester",n.Fc="p2pRequester",n.Gc="peer",n.xc="contextResolver",n.Bc="videoPrefetcher",n.Vc="prefetchManager",n.qc="picker",n.Qc="trackerClient",n.Wc="scoreUpdater",n.O="serverManager",n.Yc="requestTracker",n.Kc="trackerManager",n.$c="renderStats",n.Xc="udpBroadcaster",n.Jc="udpDiscovery",n.$a="udpLeaderElection",n.zc="nodeInfo",n.Zc="ipspoofing",n.tl="localityScore",n.il="localityService",n);function n(){}e.nl=r},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(1),n=i(2);e.loggerId="[HiveServices] ";var o=(s.rl=250,s);function s(){}e.et=o;var a=(u.prototype.sl=function(){try{var t=[new Uint8Array([this.service>>8,255&this.service]),new Uint8Array([this.msgId]),this.msg];return new Blob(t,{type:"application/octet-binary"})}catch(t){throw r.ErrorMonitor.lt().logError("Error serializing message to send to the services",u.loggerId,n.pe.we,t),new Error(t)}},u.el=function(t){try{String.fromCharCode.apply(null,new Uint8Array(t));var e=String.fromCharCode.apply(null,new Uint8Array(t.slice(3))),i=new Uint8Array(t.slice(0,2)),o=new Uint8Array(t.slice(2,3));return new u((i[0]<<8)+i[1],o[0],e)}catch(t){throw r.ErrorMonitor.lt().logError("Error extracting message from the services",this.loggerId,n.pe.ge,t),new Error(t)}},u.loggerId="[Message] ",u);function u(t,e,i){this.msgId=e,this.service=t,this.msg=i}e.hl=a,e.logger=function(){if(this.H)return this.H;var t=window&&window.window?window.window.ol:void 0;if(void 0!==t&&t.log&&t.debug&&t.info&&t.warn&&t.error&&(this.H=t),!this.H){var e=!(void 0===window.console),i=e?console.log.bind(console):function(){};this.H={log:i,debug:e&&window.console.debug?window.console.debug.bind(console):i,info:e&&window.console.info?window.console.info.bind(console):i,warn:e&&window.console.warn?window.console.warn.bind(console):i,error:e&&window.console.error?window.console.error.bind(console):i}}return this.H}},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(4),a=i(3),u=i(0),h=i(24),c=i(8),l=i(31);(o=e.ul||(e.ul={}))[o.STOP=0]="STOP",o[o.IDLE=1]="IDLE",o[o.al=2]="PLAY";var p=(f.prototype.close=function(t){t?(this.fl.delete(t),0==this.fl.length&&this.cl.close()):(this.fl.clear(),this.cl.close())},f.prototype.ll=function(t){return this.fl.has(t)},f);function f(){this.p2pId=null,this.reportingId=null,this.fl=new s,this.logger=u.Framework.resolve(u.Framework.ht.m).log(),this.logger.debug("INIT REPORTING"),this.cl=u.Framework.resolve(c.pf.R),this.vl=u.Framework.resolve(c.pf.u)}e.dl=p;var d=(g.prototype.El=function(t,e,i){this.app=new v(t,e),this.pl.El(this.app),this.wl.El(this.app,i)},g.prototype.gl=function(t){this.bl.gl(t)},g.prototype.yl=function(){return this.renderStatsCallback},g.prototype.Tl=function(t){this.renderStatsCallback=t},g.prototype.ml=function(){this.Sl.Ol()},g);function g(t,e,i,r){this.ticket=t,this.cl=e,this.app=i,this.identity=r,this.pl=u.Framework.resolve(c.pf.vf),this.bl=u.Framework.resolve(c.pf.hf),this.wl=u.Framework.resolve(c.pf.df),this.Sl=new h.Rl(this.wl)}e.Il=d;var v=function(t,e){this.app=t,this.version=e};e._l=v;var y,m=(n(E,y=p),E.prototype.initSession=function(t,e,i,r,n){var o=this,s=a.defer(),u=this.vl.Al(),h=this.Cl.Nl(e);return h.pluginId=t,null!=r&&(h.testId=r),null!=h?u.then((function(t){return o.kl(t,h,s,i)})).fail(s.reject):s.reject("Ticket URL not valid"),s.promise},E.prototype.kl=function(t,e,i,r){var n=this;this.p2pId=t.Dl(),this.reportingId=t.Ml();var o=this.cl.init(this.p2pId,e),s=this.Cl.resolve(o.jl,e,r);o.promise.then((function(e){s.then((function(e){var r=e.sessionId;if(n.fl.has(r)){var o=n.fl.get(r);n.logger.warn("SESSION ALREADY EXISTING "+o.pl.ticket)}else{var s=new v(l.Hive.Pl(),l.Hive.getVersion()),a=new d(e,n.cl,s,t);a.pl.init(n.reportingId,e,s,r),a.wl.init(n.reportingId,s),a.wl.Hl(e),n.fl.set(r,a),n.logger.debug("SESSION SET ",r),i.resolve(a)}})).fail((function(t){return i.reject(t||"Error resolving the ticket")})),e.onerror((function(t){i.reject("Error establishing connection to Hive Services")}))})).fail((function(t){return i.reject(t)})),this.cl.connect()},E);function E(){var t=y.call(this)||this;return t.Cl=u.Framework.resolve(c.pf.uf),t}e.Ll=m;var w,b=(n(S,w=p),S.prototype.initSession=function(t,e,i,r,n){var o=this,s=this.vl.Al();return e.pluginId=t,null!=r&&(e.testId=r),s.then((function(t){return o.kl(t,e,null,!1,n)})).fail(a.reject)},S.prototype.kl=function(t,e,i,r,n){var o=this;this.p2pId=t.Dl(),this.reportingId=t.Ml();var s=this.cl.init(this.p2pId,e,n);return this.cl.connect(),s.then((function(i){var r=e.sessionId;if(o.fl.has(r)){var n=o.fl.get(r);o.logger.warn("SESSION ALREADY EXISTING "+n.pl.ticket)}else{var s=new v(l.Hive.Pl(),l.Hive.getVersion()),a=new d(e,o.cl,s,t);a.pl.init(o.reportingId,e,s,r),a.wl.init(o.reportingId,s),a.wl.Hl(e),o.fl.set(r,a),o.logger.debug("SESSION SET ",r)}return a})).fail((function(t){return a.reject(t)}))},S);function S(){return null!==w&&w.apply(this,arguments)||this}e.Ul=b},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(28),n=(o.prototype.next=function(){return this.count++,this.count},o);function o(){this.count=0}e.Counter=n;var s=(a.prototype.add=function(t){t<=0||(this.Fl+=t,this.Gl++,t>this.xl&&(this.xl=t),t<this.Bl&&(this.Bl=t))},a.prototype.min=function(t){void 0===t&&(t=!0);var e=this.Bl==Number.POSITIVE_INFINITY?0:this.Bl;return t&&this.reset(),e},a.prototype.max=function(t){void 0===t&&(t=!0);var e=this.xl==Number.NEGATIVE_INFINITY?0:this.xl;return t&&this.reset(),e},a.prototype.jf=function(t){void 0===t&&(t=!0);var e=this.Fl;return t&&this.reset(),e},a.prototype.Da=function(t){void 0===t&&(t=!0);var e=0<this.Gl?this.Fl/this.Gl:0;return t&&this.reset(),e},a.prototype.reset=function(){this.Bl=Number.POSITIVE_INFINITY,this.xl=Number.NEGATIVE_INFINITY,this.Fl=0,this.Gl=0},a);function a(){this.reset()}e.Vl=s;var u=(h.prototype.sl=function(t,e,i){this.protocol.ql(e,r.Ql.ONEWAY,i),t.write(this.protocol),this.protocol.Wl();var n=this.Kl.Yl(),o=this.$l(n,",",4);return n.slice(o+1,n.length-1)},h.prototype.Xl=function(t,e,i,r){var n="["+i+', "'+e+'", 4, 0,'+t+"]";this.Kl.Jl(n),this.protocol.zl();var o=new r;return o.read(this.protocol),this.protocol.Zl(),o},h.prototype.$l=function(t,e,i){return t.split(e,i).join(e).length},h);function h(){this.Kl=new r.tv,this.protocol=new r.nv(this.Kl)}e.rv=u},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r,n,o=i(3),s=i(159),a=i(36),u=i(4),h=i(32),c=i(0),l=i(161),p=i(168),f=i(5),d=i(6),g=i(16),v=i(1),y=i(2);e.sv=!1,(n=r=e.ev||(e.ev={}))[n.Have=1]="Have",n[n.Chunk=2]="Chunk",n[n.Request=3]="Request",n[n.Cancel=4]="Cancel",n[n.Ack=5]="Ack",n[n.Close=6]="Close",n[n.DoNotHave=7]="DoNotHave",n[n.hv=8]="OutPartRequest",n[n.ov=9]="OutPartResp",n[n.uv=10]="UDPHandshakeReq",n[n.UDPHandshakeResponse=11]="UDPHandshakeResponse",n[n.UDPSwitchLeadershipRequest=12]="UDPSwitchLeadershipRequest",n[n.av=13]="UDPSwitchAck",n[n.Bitrate=14]="Bitrate",n[n.Haves=15]="Haves",n[n.fv=16]="PeerInfo",n[n.Ping=17]="Ping",n[n.Pong=18]="Pong",n[n.cv=19]="NoPartnerResp";var m=(E.prototype.lv=function(t){try{var e=null,i=c.Framework.resolve(g.nl.Gc).vv(t);return null==i?(this.logger.warn("MSG RECEIVED FROM UNKNOWN SWARM"),null):(e=new l.dv(i,this.Kl.Ev,this.Kl.otherGuid,this.Kl),this.pv.has(t)||this.pv.set(t,e),this.pv.get(t))}catch(t){v.ErrorMonitor.lt().logError("Error creating new dispatcher",this.loggerId,y.fi.ci,t)}},E.prototype.wv=function(t){this.pv.delete(t)},E.prototype.gv=function(t){return this.pv.get(t)},E);function E(t){this.loggerId="[DispatcherManager] ",this.pv=new u,this.logger=c.Framework.resolve(c.Framework.ht.m).log(),this.Kl=t}e.bv=m;var w=(b.prototype.init=function(t,e){this.Ev=t,this.otherGuid=e,this.yv=c.Framework.resolve(c.Framework.ht.v)},b.prototype.Tv=function(){var t=!1;return this.mv.pv.forEach((function(e,i){(e.sender.Tv()||e.receiver.Tv())&&(t=!0)})),t},b.prototype.reset=function(){this.mv.pv.forEach((function(t,e){t.sender.Ov()}))},b.prototype.close=function(t){return this.mv.wv(t),0==this.mv.pv.length&&this.yv.disconnect(this.otherGuid),o("ok")},b.prototype.Sv=function(t,i,n){try{this.Rv=c.Framework.time();var o=n.Ma(),s=o.byteLength,u=h.Av._v.Iv.create(o),l=h.Av.Nv(u),p=new a;p.Cv(t),p.kv(i),p.Cv(s),p.kv(l.toString()),p.append(o),p.Dv();var d=p.Ma(),g=t===r.Chunk&&c.Framework.U()?d.byteLength+f.ea.Ju.au:d.byteLength;e.sv&&this.Mv.log(i).debug(this.vt+" SEND MSG ID "+t+","+g+" HASH "+l.toString()+" TO "+this.otherGuid)}catch(n){v.ErrorMonitor.lt().logError("Error constructing message",this.loggerId,y.ei.hi,{jv:r[t]})}try{var m=this.yv.send(this.otherGuid,d,g);return m||v.ErrorMonitor.lt().logError("Error message dropped",this.loggerId,y.ei.oi,{jv:r[t],otherGuid:this.otherGuid}),m}catch(n){v.ErrorMonitor.lt().logError("Error sending message",this.loggerId,y.ei.ui,{jv:r[t],otherGuid:this.otherGuid}),this.Mv.log(i).warn("ERROR SENDING MESSAGE TO "+this.otherGuid+" "+n.stack)}},b.prototype.Pv=function(){this.mv.pv.forEach((function(t){return t.Pv()}))},b.prototype.Hv=function(t){var i=this;e.sv&&this.Mv.log().debug(this.vt+" GOT MSG "+t.byteLength);try{var n=c.Framework.time();this.Rv=n,this.Lv(t).then((function(o){if(e.sv&&i.Mv.log().debug(i.vt+" RECEIVING "+o.byteLength+" after "+(c.Framework.time()-n)),o.byteLength>b.Uv)throw new RangeError("P2P Message too big to be processed");var s=i.message;if(null===s){var u=a.wrap(o),l=u.Fv();if(e.sv&&i.Mv.log().debug("MSG ID "+l),l>Object.keys(r).length)return i.Mv.log().warn("MSG OF WRONG ID RECEIVED: "+l),void(i.message=null);if((s=i.message=new p.xv).Gv=l,s.swarmId=u.Bv(),s.length=u.Fv(),s.hash=u.Bv(),s.Vv=u.Ma(),s.length>b.Uv)throw new RangeError("P2P Message too big to be processed");e.sv&&i.Mv.log(s.swarmId).debug("MSG ID "+s.Gv+" L "+s.length+" SWID "+s.swarmId+" H "+s.hash+" TR "+s.Vv.byteLength)}else{if(e.sv&&i.Mv.log().debug("APPENDING TO P2P MESSAGE "+s.Gv),null!=s.Vv.byteLength&&s.Vv.byteLength>b.Uv)throw new RangeError("P2P Message too big to be processed");s.Vv=d.La.appendBuffer(s.Vv,t)}if(s.Vv.byteLength===s.length){var f=h.Av._v.Iv.create(s.Vv);if(h.Av.Nv(f).toString()!==s.hash)return void i.Mv.log(s.swarmId).warn(" INTEGRITY CHECK FAILED ");var g=i.mv.gv(s.swarmId);g||(g=i.mv.lv(s.swarmId),i.Mv.log(s.swarmId).debug("CREATED NEW DISPATCHER FOR "+i.otherGuid)),g&&g.Eh(s),s.Vv=null,i.message=null}}))}catch(t){v.ErrorMonitor.lt().logError("Error receiving message",this.loggerId,y.ei.ai,t),this.message=null}},b.prototype.Lv=function(t){var e=!c.Framework.U()&&-1<navigator.userAgent.toLowerCase().indexOf("firefox"),i=o.defer();if(e){var r=new FileReader;r.onload=function(e){t=this.result,i.resolve(t)},r.onerror=i.reject,r.readAsArrayBuffer(t)}else i.resolve(t);return i.promise},b.prototype.qv=function(){return this.Rv},b.Qv=s.Yv(i(169)).Wv("HiveMsgs"),b.Kv=0,b.Uv=136+Math.ceil(1.2*f.ea.Ju.au),b);function b(){this.loggerId="[Transport] ",this.message=null,this.Mv=c.Framework.resolve(c.Framework.ht.m),this.mv=new m(this),this.vt=b.Kv++,this.Rv=c.Framework.time()}e.$v=w},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(43),n=i(29),o=i(44),s=i(7);e.Options=function(){this.monitorPort=n.et.Xv?o.zv.Jv:o.zv.Zv,this.playerPort=n.et.Xv?o.zv.td:o.zv.nd,this.feedbackPeriod=2e3,this.idleTimePeriod=6e4,this.useSessionCheck=n.et.rd,this.debugLevel="notice",this.isSDNDebug=!1,this.hiveTechOrder=[],this.telemetryId=null,this.silent=!1,this.loggerTimestamp=r.HiveConfig.Framework.LoggerTimestamp,this.testId=null,this.pluginTimeout=s.ut.Va,this.readyCheckTimeout=0,this.onSourceSetCompleted=function(t){},this.onLoadingCompleted=function(t){},this.detectPrivateIP=s.ut.nf,this.authTokenEnabled=!0,this.dashRemoveBitrateSize=!1,this.dashFilterBitrates=null,this.staticPartnerId=null,this.staticCustomerId=null,this.audioMetrics=!0,this.logJsonSnapshots=void 0,this.onActiveSession=function(t){},this.onError=function(t){}},e.HiveTechOptions=function(){this.initTimeout=3e4,this.onError=function(t){return!0},this.onActiveSession=function(t){}},e.UrlConfigurableOptions=function(){this.hivePlayerPort="playerPort",this.hiveMonitorPort="monitorPort",this.hiveSilent="silent",this.hiveDebugLevel="debugLevel",this.isSDNDebug="isSDNDebug",this.hiveDebugTimestamp="loggerTimestamp",this.hiveSetupTimeout="setupTimeout",this.hiveJavaTimeout="initTimeout",this.hiveWarnJavaTimeout="warnSlowRespTimeout",this.hiveTestId="testId",this.hiveDetectPrivateIP="detectPrivateIP",this.hiveAuthTokenEnabled="authTokenEnabled",this.hiveDashRemoveBitrateSize="dashRemoveBitrateSize",this.hiveDashFilterBitrates="dashFilterBitrates",this.hiveLogJsonSnapshots="logJsonSnapshots",this.hiveStaticPartnerId="staticPartnerId",this.hiveStaticCustomerId="staticCustomerId",this.hiveAudioMetrics="audioMetrics"};var a=(u.enabledRUM=!1,u.enableKeyCombination=!0,u.enabledErrorFilter=!0,u);function u(){}e.Nt=a;var h=(c.sd=function(t){"dashRemoveBitrateSize"in t&&t.dashRemoveBitrateSize&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashRemoveBitrateSize=t.dashRemoveBitrateSize),"dashFilterBitrates"in t&&t.dashFilterBitrates&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashFilterBitrates=t.dashFilterBitrates),"staticCustomerId"in t&&t.staticCustomerId&&window.HiveConfig&&window.HiveConfig.ClientInfo&&(window.HiveConfig.ClientInfo.dc=t.staticCustomerId),"staticPartnerId"in t&&t.staticPartnerId&&window.HiveConfig&&window.HiveConfig.ClientInfo&&(window.HiveConfig.ClientInfo.vc=t.staticPartnerId),"audioMetrics"in t&&!t.audioMetrics&&window.HiveConfig&&window.HiveConfig.Stats&&(window.HiveConfig.Stats.AudioAccounting=t.audioMetrics),"detectPrivateIP"in t&&"boolean"==typeof t.detectPrivateIP&&window.HiveConfig&&window.HiveConfig.ConnInfo&&(window.HiveConfig.ConnInfo.detectPrivateIP=t.detectPrivateIP),"logJsonSnapshots"in t&&t.logJsonSnapshots&&window.HiveConfig&&window.HiveConfig.DebugLogs&&(window.HiveConfig.DebugLogs.MetricSnapshotLogs=1,window.HiveConfig.DebugLogs.TrackSnapshotLogs=1,window.HiveConfig.DebugLogs.TrackerLogs=1)},c);function c(){}e.hd=h,"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.ErrorMonitor=a)},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(3),o=i(27),s=i(14),a=i(1),u=(h.od=function(t,e,i){this.ud[t]={ad:i,request:e}},h.getOriginalXhr=function(){return"undefined"!=typeof OriginalXMLHttpRequest?new OriginalXMLHttpRequest:new XMLHttpRequest},h.clear=function(){h.mapping={}},h.clearPluginState=function(t){if(t in h.mapping){var e=h.mapping[t];for(var i in e)"tech"!==i&&delete e[i]}},h.clearPlugin=function(t){t in h.mapping&&delete h.mapping[t]},h.registerTech=function(t,e){t in h.mapping||(h.mapping[t]={tech:null,fd:!1}),h.mapping[t].tech=e},h.mapping={},h.ld=!1,h.loggerId="[HiveRequestFactory]",h.ud={},h);function h(t){if(!t){if(0==Object.keys(h.mapping).length&&!h.ld)return a.ErrorMonitor.lt().logError("No registered default HiveRequestFactory tech",h.loggerId),h.ld=!0,h.getOriginalXhr();t=Object.keys(h.mapping)[0]}if(!(t in h.mapping))return h.ld||(a.ErrorMonitor.lt().logError("no registered HiveRequestFactory tech for plugin",{pluginId:t}),h.ld=!0),h.getOriginalXhr();var e=h.mapping[t],i=h.ud[e.tech];return i?e.fd?new i.request(t):(e.fd=!0,new i.ad(t)):h.getOriginalXhr()}e.HiveRequestFactory=u;var c=(l.prototype.isActive=function(t,e){return void 0===e&&(e=!1),null!==this.tech&&this.tech.isActive(t,this,e)},l.prototype.vd=function(t){this.dd!=t&&(this.dd=t,this.tech&&this.tech.gl(this,t))},l.prototype.getTechName=function(){return this.tech&&this.tech.getName()||void 0},l.prototype.Ed=function(){return this.dd},l.prototype.close=function(t,e){if(void 0===e&&(e=!0),this.dd=!0,null!=this.tech)return this.tech.pd(this,t,e)},l.prototype.toString=function(){return this.ticket.toString()},l.prototype.toHiveSession=function(){var t=new o.HiveSession;return t.id=this.id,t.ticketUrl=this.ticketUrl,t.manifest=this.manifest,t.tech=this.tech.getName(),t},l.prototype.wd=function(){return this.gd.promise},l.prototype.bd=function(t){this.yd=t,this.gd.resolve(this.yd)},l);function l(t,e,i,r){this.dd=!1,this.ticketUrl=t,this.ticket=e,this.manifest=i,this.gd=n.defer(),this.yd=r,this.yd&&this.gd.resolve(this.yd)}e.HiveSessionInternal=c;var p=(Object.defineProperty(f.prototype,"fullscreen",{get:function(){return this.Td},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"totalBuffering",{get:function(){return this.md},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"bufferLength",{get:function(){return this.Od},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"playingPoint",{get:function(){return this.Sd},enumerable:!0,configurable:!0}),f.prototype.Rd=function(){isNaN(this.playingPoint)&&(this.Sd=0),isNaN(this.bufferLength)&&(this.Od=0),isNaN(this.totalBuffering)&&(this.md=0)},f);function f(t,e,i,r,n,o){this.Sd=t,this.Od=e,this.md=i,this._width=r,this._height=n,this.Td=o,this.Rd()}e.Id=p;var d=function(){this.success=0,this.failed=0,this.bytes=0};e.Ad=d;var g=(v.prototype.accountCompleted=function(t,e,i,r){void 0===r&&(r=!0);var n=t?this.Nd:this.Cd;n.has(e)||n.set(e,new d);var o=n.get(e);isNaN(i)?a.ErrorMonitor.lt().logError("[ExtendedStats] Toal bytes of a downloaded fragment is NaN"):o.bytes+=i,r&&o.success++},v.prototype.accountFailed=function(t,e){var i=t?this.Nd:this.Cd;i.has(e)||i.set(e,new d),i.get(e).failed++},v.prototype.updateBandwidth=function(t){t===1/0||isNaN(t)||(this.bandwidth=t)},v.prototype.bitrateSwitchUp=function(){this.kd++},v.prototype.bitrateSwitchDown=function(){this.Dd++},v.prototype.getBandwidth=function(){return this.bandwidth},v.prototype.getVideoBitrates=function(){return this.Nd},v.prototype.getAudioBitrates=function(){return this.Cd},v.prototype.getBitrateSwitchUp=function(){return this.kd},v.prototype.getBitrateSwitchDown=function(){return this.Dd},v);function v(){this.kd=0,this.Dd=0,this.Nd=new r,this.Cd=new r}e.HivePlayerExtendedStats=g;var y=(m.lt=function(t){return t&&(this.logger=t),void 0===this.vt&&(this.vt=new m),this.vt},m.prototype.Md=function(){var t=this,e=!document[this.hidden];this.jd.forEach((function(i){i.call(t,e)}))},m.prototype.Pd=function(t){this.jd.push(t)},m.prototype.Hd=function(){document.removeEventListener(this.Ld,this.Md,!1),this.jd.length=0},m);function m(){if(m.vt)throw new Error("Error: Instantiation failed: Use VisibilityChangeListener.getInstance() instead of new.");void 0!==document.hidden?(this.hidden="hidden",this.Ld="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.Ld="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.Ld="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==document[this.hidden]?document.addEventListener(this.Ld,this.Md.bind(this),!1):m.logger&&m.logger.debug("warn - visibilityChange listener not supported"),this.jd=new Array}e.Ud=y;var E=(w.getItem=function(t){try{return window.sessionStorage?window.sessionStorage.getItem(t):null}catch(t){return null}},w.setItem=function(t,e){try{return!!window.sessionStorage&&(window.sessionStorage.setItem(t,e),!0)}catch(t){return!1}},w.removeItem=function(t){try{window.sessionStorage&&window.sessionStorage.removeItem(t)}catch(t){return null}},w);function w(){}e.Fd=E;var b=(S.prototype.check=function(t){var e=Date.now();return this.isEqual(this.Gd,t)||(this.xd=e),this.Gd=t,e-this.xd>=this.Bd},S.prototype.isEqual=function(t,e){return!(!t||!e)&&[e.playingPoint-t.playingPoint,e.bufferLength-t.bufferLength,e.totalBuffering-t.totalBuffering].reduce((function(t,e){return t&&Math.abs(e)<10}),!0)},S);function S(t){this.Bd=t}e.Vd=b;var T=(I.getPrivateIp=function(t){var e=t.getPrivateIp();return s.HiveConfig.SensitiveInfo.restrictedConnectivityInfo&&e&&(e=e.replace(/[0-9]*$/,"0")),e},I.qd=function(t){return s.HiveConfig.SensitiveInfo.restrictedConnectivityInfo?s.HiveConfig.SensitiveInfo.hiddenHostnameValue:t.getHostName()},I);function I(){}e.Qd=T},function(t,e){t.exports=void 0},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o=i(22),s=i(54),a=i(3),u=i(0),h=i(8),c=i(25),l=i(17),p=i(14),f=(d.Wd="hive-client-track",d.Yd="trackevent",d.Kd="NULLID",d.$d="",d);function d(){}var g,v="[TRACK] ";(g=e.PlayerEvents||(e.PlayerEvents={}))[g.PLAYING=0]="PLAYING",g[g.BUFFERING=1]="BUFFERING",g[g.PAUSED=2]="PAUSED",g[g.SKIP=3]="SKIP",g[g.STOPPED=4]="STOPPED",g[g.ERROR=5]="ERROR",g[g.WINDOW_SIZE=6]="WINDOW_SIZE",g[g.FULLSCREEN=7]="FULLSCREEN",g[g.VISIBLE=8]="VISIBLE",g[g.HIDDEN=9]="HIDDEN";var y=function(){};e.Xd=y;var m=function(){};e.Jd=function(){};var E=function(){this.type=2},w=(b.prototype.zd=function(t,e){var i;this.sessions.forEach((function(e){e.sessionId==t&&(i=e)})),i||((i=new S).sessionId=t,this.sessions.push(i)),i.events.push(e)},b);function b(){this.sessions=new Array}var S=function(){this.events=new Array},T=(I.prototype.Zd=function(t){this.client=t},I.prototype.init=function(t,e){this.tE=t,this.El(e),this.logger.debug(v+"INIT ID: "+t)},I.prototype.El=function(t,e){this.app=t,e&&(this.iE=e)},I.prototype.updatePlayerInfo=function(t){this.nE=t},I.prototype.Hl=function(t){var e=new O(t,this);this.rE.push(e),this.sE=null,this.client.eE(!0)},I.prototype.fd=function(t,e,i){if(!this.sE)for(var r=0;r<this.rE.length;r++){var n=this.rE[r];if(n.ticket.sessionId===t){this.logger.debug(v+"Activating Track for session "+t),this.sE=n;break}}if(this.sE)if(this.sE.ticket.sessionId==t){if(!this.sE.hE){var o=new R(t,e,i);this.sE.oE(o),this.client.eE()}}else this.logger.warn(v+"ignoring manifest not matching event "+this.sE.ticket.sessionId+" != "+t)},I.prototype.uE=function(t,e,i){null!=this.sE&&(this.sE.hE||this.sE.aE.push(new H(t,e,i)))},I.prototype.fE=function(t,e,i){this.cE.push(new D(t,e,i)),this.client.eE()},I.prototype.lE=function(t,e,i){this.vE.push(new M(t,e,i)),this.client.eE()},I.prototype.dE=function(t){var e=this;t&&t.forEach((function(t){e.vE.push(t)}))},I.prototype.EE=function(){var t=new m;this.iE?(t.partnerId=this.iE.partnerId,t.customerId=this.iE.customerId):p.HiveConfig.ClientInfo.vc&&p.HiveConfig.ClientInfo.dc?(t.partnerId=p.HiveConfig.ClientInfo.vc,t.customerId=p.HiveConfig.ClientInfo.dc):this.sE&&(t.partnerId=this.sE.ticket.pE(),t.customerId=this.sE.ticket.wE()),t.version=this.app.app+"_"+(this.iE?this.iE.version:this.app.version),this.iE&&(t.installVersion=this.iE.installVersion,t.installTs=this.iE.installTs);var e=new s.gE;return e.bE(navigator.userAgent),t.os=e.yE().name+" "+e.yE().version,this.nE&&(t.commVersion=this.nE.commVersion,t.pluginName=this.nE.pluginName,t.pluginVersion=this.nE.pluginVersion,t.playerTech=this.nE.playerTech,t.playerVersion=this.nE.playerVersion,this.nE.telemetryId&&(t.telemetryId=this.nE.telemetryId)),t},I.prototype.TE=function(){return this.sE?this.sE:this.rE&&0<this.rE.length?this.rE[this.rE.length-1]:void 0},I.prototype.mE=function(t){var e=this;if(void 0===t&&(t=!0),0==this.rE.length&&0==this.cE.length)return t?a.reject("nothing to send"):(this.logger.debug(v+" NOTHING TO SEND"),null);var i=new y;i.app=f.Wd,i.createdAt=u.Framework.time(),i.guid=this.tE,i.name=f.Yd;var r=this.TE();if(r){var n=r.ticket.OE().replace(/[\[\]]/g,"");i.tags=[n],i.tags.push(r.ticket.pE()),i.tags.push(r.ticket.wE())}else i.tags=new Array;var o=new w;if(o.peer=this.EE(),this.rE.forEach((function(t){t.hE||o.zd(t.ticket.sessionId,t)})),this.cE.forEach((function(t){o.zd(t.sessionId,t)})),this.vE.forEach((function(t){o.zd(t.sessionId,t)})),i.data=o,t)return this.SE.getConnectivityInfo().then((function(t){var r=e.RE(t);return o.zd("null",r),i})).fail((function(t){return i}));var s=this.RE(this.SE.IE());return o.zd("null",s),i},I.prototype.RE=function(t){var e=new E;e.ts=u.Framework.time();var i=t.getNetworkChanged();return i.getPublicIp()&&(e.pubIp=i.getPublicIp()),i.getPrivateIp()&&(e.privIp=o.Qd.getPrivateIp(i)),t.getHostName()&&(e.hostname=o.Qd.qd(t)),i.getCidr()&&(e.netmask=i.getCidr()),i.getNic()&&(e.nic=i.getNic()),i.getNicName()&&(e.nicName=i.getNicName()),i.getMacAddress()&&(e.mac=i.getMacAddress()),e},I.prototype._E=function(){return this.iE?this.iE.userAgent:navigator.userAgent},I.prototype.reset=function(){this.rE=new Array,this.cE=new Array,this.vE=new Array},I.prototype.AE=function(t){},I);function I(){this.logger=u.Framework.resolve(u.Framework.ht.m).log(),this.SE=u.Framework.resolve(h.pf.af),this.rE=new Array,this.cE=new Array,this.vE=new Array}e.NE=T;var _=(P.prototype.eE=function(t){void 0===t&&(t=!1);var e=t?c.DE.kE.CE:c.DE.kE.ME;this.jE?e<this.PE-(new Date).getTime()&&(u.Framework.clearTimeout(this.jE),this.PE=null,this.HE(e)):this.HE(e)},P.prototype.Ol=function(){this.jE&&(u.Framework.clearTimeout(this.jE),this.PE=this.jE=null)},P.prototype.HE=function(t,e){var i=this;void 0===e&&(e=!1),this.jE=u.Framework.setTimeout((function(){i.LE()}),t,e),this.PE=(new Date).getTime()+t},P.prototype.LE=function(t){var e=this;void 0===t&&(t=!0),this.jE=null,this.PE=null;var i=this.wl.mE(t);t?(this.logger.debug(v+"TAKING A TRACK SNAPSHOT"),i.then((function(t){return e.forward(t)})).fail((function(t){e.logger.debug(v+" ERROR GENERATING/SENDING THE TRACK SNAPSHOT: ",t)})).finally((function(){return e.wl.reset()})).done()):(this.logger.debug(v+"FLUSHING TRACK SNAPSHOT"),this.forward(i),this.wl.reset())},P.prototype.forward=function(t){if(this.client&&this.client.UE()&&t){var e=JSON.stringify(t);switch(this.FE){case 0:default:this.logger.debug(v+"TRACK EVENT");break;case 1:this.logger.debug(v+"TRACK EVENT:"+e)}var i=new l.hl(HiveStreamingServices.GE,2,e);this.client.UE().send(i)}},P.prototype.xE=function(t){void 0===t&&(t=!0),t?(this.Ol(),this.HE(c.DE.kE.BE,!0)):this.LE(!1)},P);function P(t){this.FE=isNaN(p.HiveConfig.DebugLogs.TrackSnapshotLogs)?0:p.HiveConfig.DebugLogs.TrackSnapshotLogs,this.wl=t,this.logger=u.Framework.resolve(u.Framework.ht.m).log(),this.client=u.Framework.resolve(h.pf.R),this.wl.Zd(this)}e.Rl=_;var O=(A.prototype.oE=function(t){this.manifests.push(t)},A.prototype.toJSON=function(){var t={type:0,ticket:{}};t.ticket.url=this.ticket.ticketUrl,t.ticket.reqTs=this.ticket.VE,t.ticket.respTs=this.ticket.qE,t.ticket.userAgent=this.wl._E(),null!=this.ticket.testId&&(t.ticket.testId=this.ticket.testId),t.manifests=[],this.manifests.forEach((function(e){var i={};i.url=e.url,i.respTs=e.qE,i.respCode=e.respCode,t.manifests.push(i)}));var e=-1,i=-1,r=-1;return this.aE.forEach((function(t){0<t.QE&&(-1==e&&(e=t.ts,i=t.QE),r=t.QE)})),-1!=e&&(t.playTs=e),-1!=r&&(t.buffTime=r),-1!=i&&(t.initBuffTime=i),t},A);function A(t,e){this.createdAt=(new Date).getTime(),this.hE=!1,this.ticket=t,this.manifests=new Array,this.aE=new Array,this.wl=e}e.WE=O;var R=function(t,e,i){this.eventId=t,this.url=e,this.qE=(new Date).getTime(),this.respCode=i},C=(N.prototype.toJSON=function(){var t={};return t.type=this.YE+this.event,t.ts=this.ts,this.KE&&(t.parameters=this.KE),t},N);function N(t,e,i,r){this.ts=(new Date).getTime(),this.sessionId=t,this.sessionId||(this.sessionId="null"),this.event=e,this.KE=i,r&&(this.ts=r)}var k,D=(n(L,k=C),L);function L(t,e,i,r){var n=k.call(this,t,e,i,r)||this;return n.YE=100,n}var x,M=(n(B,x=C),B);function B(t,e,i,r){var n=x.call(this,t,e,i,r)||this;return n.YE=200,n}e.$E=M;var H=function(t,e,i){this.ts=(new Date).getTime(),this.playingPoint=t,this.XE=e,this.QE=i}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(7),n=(o.JE="wss://bee.hivestreaming.com:443/v1/hivejs",o.zE="ws://127.0.0.1:8001/v1/hivejs",o.ZE="wss://bee-test.hivestreaming.com:443/v1/hivejs",o.tp="https://api-groot-test.hivestreaming.com/v1/auth/stream",o.np="https://api-groot-prod.hivestreaming.com/v1/auth/stream",o.rp={iceServers:[{url:"stun:stun.hivestreaming.com:3478"}]},o.sp=3e4,o.ME=3e5,o.CE=8e4,o.BE=1e3,o.ep=3e4,o.hp=100,o.op=1e4,o.up=!1,o.ap=!1,o);function o(){}var s=(a.kE=n,a.Wa=r.ut.Wa,a.rf=r.ut.rf,a);function a(){}e.DE=s},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r,n=i(0),o=i(6);(r=e.fp||(e.fp={}))[r.cp=0]="UPPER_LAYER",r[r.lp=1]="CDN",r[r.vp=2]="CDN_PREFETCH",r[r.dp=3]="CDN_COMPENSATION",r[r.Ep=4]="P2P",r[r.pp=5]="P2P_PREFETCH";var s=function(){this.wp=!1,this.gp=!1,this.bp=0,this.yp=0,this.Tp=0,this.mp=0,this.Op=0,this.p2pAgenTrafficSuccessQt=0,this.Sp=0,this.srcOtherRespQt=0,this.Rp=0,this.Ip=0,this._p=0,this.Ap=0,this.Np=0};e.Cp=s;var a=(u.prototype.kp=function(){return this.type},u.prototype.Dp=function(){return this.Mp.Dp()},u.prototype.jp=function(){return this.Mp.jp()},u.prototype.Pp=function(){return this.jp()+"-"+this.Hp},u.prototype.Lp=function(){return this.Mp.Up()},u.prototype.Fp=function(){return this.Mp.Gp()},u.prototype.loaded=function(){this.xp=n.Framework.time()},u.prototype.Bp=function(){return this.xp?Math.max(1,this.xp-this.Vp._p):Math.max(1,this.Vp.Ap-this.Vp._p)},u.prototype.qp=function(){return this.xp?Math.max(1,this.xp-this.Vp.Ip):Math.max(1,this.Vp.Ap-this.Vp.Ip)},u.prototype.Qp=function(){return 0!=this.Vp.Op?(new o.ga).ua(this.Bp(),this.Vp.Op):(new o.ga).ua(this.qp(),this.Vp.yp)},u);function u(t,e,i,r,o){this.Wp=!1,this.type=void 0,this.Vp=new s,this.Yp=!1,this.Kp=!1,this.$p="",this.Xp=new ArrayBuffer(0),this.Jp=0,this.type=i,this.zp=t,this.Hp=e,this.Zp=o,this.Mp=r,this.Vp.Rp=n.Framework.time()}e.tw=a},function(t,e,i){"use strict";var r,n,o,s;Object.defineProperty(e,"s",{value:!0}),e.iw=function(){this.savings=0,this.cdnRequests=0,this.cdnResponses=0,this.cdnResponseErrors=0,this.cdnResponseBytes=0,this.p2pRequests=0,this.p2pResponses=0,this.p2pResponseErrors=0,this.p2pResponseBytes=0,this.p2pPartnerTotalSentBytes=0,this.partners={}},e.rw=function(){this.uuid="",this.sentBytes=0,this.receivedBytes=0,this.successTransfers=0,this.failedTransfers=0,this.rateReceived=0,this.nw=0},e.HiveSession=function(){},(n=r=e.HiveSessionErrorCode||(e.HiveSessionErrorCode={}))[n.GENERIC_ERROR=0]="GENERIC_ERROR",n[n.NO_TECH_AVAILABLE=1]="NO_TECH_AVAILABLE",n[n.NO_TECH_RESOLVED=2]="NO_TECH_RESOLVED",n[n.TECH_ERROR=3]="TECH_ERROR",n[n.TICKET_ERROR=4]="TICKET_ERROR",(s=o=o||{})[s.sw=0]="Generic Undefined Error",s[s.ew=1]="No Tech available to resolve the ticket",s[s.hw=2]="No available Tech could resolved the ticket",s[s.ow=3]="Stopped resolving session on last tech onError",s[s.uw=4]="The ticket could not be resolved";var a,u,h,c=(l.getHiveSessionErrorMessage=function(t){return o[t]},l.getHiveSessionError=function(t,e,i){var r=new l;return r.ticketUrl=t,r.code=e,r.message=l.getHiveSessionErrorMessage(e),r.detailedMessage=i,r},l.HiveSessionErrorCode=r,l);function l(){}e.HiveSessionError=c,e.HiveTechError=function(t,e){this.code=t,this.message=e},(a=e.aw||(e.aw={}))[a.fw=0]="NOT_READY",a[a.cw=1]="PLUGIN_ERROR",a[a.lw=2]="SESSION_ERROR",a[a.TICKET_ERROR=3]="TICKET_ERROR",a[a.vw=4]="VERSION_ERROR",a[a.dw=5]="TIMEOUT_ERROR",(h=u=e.MainStatusCode||(e.MainStatusCode={}))[h.Ew=0]="OK",h[h.pw=1]="HIVE_NOT_ALLOWED",h[h.ww=2]="TICKET_NOT_RESOLVED",h[h.gw=3]="TIMEOUT_RESOLVING_TICKET",e.bw=function(t){switch(t){case u.Ew:return"OK";case u.pw:return"HIVE_NOT_ALLOWED";case u.ww:return"TICKET_NOT_RESOLVED";case u.gw:return"TIMEOUT_RESOLVING_TICKET";default:return}};var p=(f.prototype.getPluginStatusCode=function(){return this.yw.getStatusCode()},f);function f(t){this.yw=t}e.HivePluginReference=p},function(module,exports,__webpack_require__){var Thrift={Tw:"0.9.3",Type:{STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17},Ql:{CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},Ow:function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e},Sw:function(t,e,i){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.name=i||""}},copyList,copyMap;Thrift.Rw=function(t){this.message=t},Thrift.Sw(Thrift.Rw,Error,"TException"),Thrift.Rw.prototype.Iw=function(){return this.message},Thrift._w={Aw:0,Nw:1,Cw:2,kw:3,Dw:4,Mw:5,jw:6,Pw:7,Hw:8,Lw:9,Uw:10},Thrift.Fw=function(t,e){this.message=t,this.code="number"==typeof e?e:0},Thrift.Sw(Thrift.Fw,Thrift.Rw,"TApplicationException"),Thrift.Fw.prototype.read=function(t){for(;;){var e=t.Gw();if(e.ftype==Thrift.Type.STOP)break;switch(e.fid){case 1:e.ftype==Thrift.Type.STRING?(e=t.xw(),this.message=e.value):e=t.Bw(e.ftype);break;case 2:e.ftype==Thrift.Type.I32?(e=t.Vw(),this.code=e.value):e=t.Bw(e.ftype);break;default:e=t.Bw(e.ftype)}t.qw()}t.Qw()},Thrift.Fw.prototype.write=function(t){t.Ww("TApplicationException"),this.message&&(t.Yw("message",Thrift.Type.STRING,1),t.Kw(this.Iw()),t.$w()),this.code&&(t.Yw("type",Thrift.Type.I32,2),t.Xw(this.code),t.$w()),t.Jw(),t.zw()},Thrift.Fw.prototype.Zw=function(){return this.code},Thrift.Ju=Thrift.tv=function(t,e){this.url=t,this.tg=0,this.ig=0,this.ng=e&&e.ng,this.rg="",this.sg=""},Thrift.tv.prototype={eg:function(){try{return new XMLHttpRequest}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}throw"Your browser doesn't support XHR."},flush:function(t,e){var i=this;if(t&&!e||void 0===this.url||""===this.url)return this.rg;var r,n=this.eg();if(n.overrideMimeType&&n.overrideMimeType("application/vnd.apache.thrift.json; charset=utf-8"),e&&(n.onreadystatechange=(r=e,function(){4==this.readyState&&200==this.status&&(i.Jl(this.responseText),r())})),n.open("POST",this.url,!!t),n.setRequestHeader&&(n.setRequestHeader("Accept","application/vnd.apache.thrift.json; charset=utf-8"),n.setRequestHeader("Content-Type","application/vnd.apache.thrift.json; charset=utf-8")),n.send(this.rg),!t||!e){if(4!=n.readyState)throw"encountered an unknown ajax ready state: "+n.readyState;if(200!=n.status)throw"encountered a unknown request status: "+n.status;this.sg=n.responseText,this.hg=this.sg.length,this.tg=this.sg.length,this.ig=0}},og:function(t,e,i,r){if("undefined"==typeof jQuery||void 0===jQuery.ug)throw"Thrift.js requires jQuery 1.5+ to use asynchronous requests";var n=this;return jQuery.ag({url:this.url,data:e,type:"POST",fg:!1,contentType:"application/vnd.apache.thrift.json; charset=utf-8",cg:"text thrift",lg:{vg:function(e){return n.Jl(e),r.call(t)}},context:t,success:jQuery.dg(i).pop()})},Jl:function(t){this.sg=t,this.hg=this.sg.length,this.tg=this.sg.length,this.ig=0},isOpen:function(){return!0},open:function(){},close:function(){},read:function(t){var e=this.tg-this.ig;if(0==e)return"";var i=t;e<t&&(i=e);var r=this.Eg.substr(this.ig,i);return this.ig+=i,r},pg:function(){return this.sg},write:function(t){this.rg=t},Yl:function(){return this.rg}},Thrift.wg=function(t){this.gg(t)},Thrift.wg.prototype={gg:function(t){this.url=t,this.bg=null,this.callbacks=[],this.yg=[],this.rg="",this.sg="",this.Tg=0,this.mg=0},flush:function(t,e){var i,r=this;this.isOpen()?(this.bg.send(this.rg),this.callbacks.push((i=e,function(t){r.Jl(t),i()}))):this.yg.push({Og:this.rg,Sg:e})},Rg:function(){var t=this;0<this.yg.length&&(this.yg.forEach((function(e){var i;this.bg.send(e.Og),this.callbacks.push((i=e.Sg,function(e){t.Jl(e),i()}))})),this.yg=[])},Ig:function(t){this.gg(this.url)},_g:function(t){this.callbacks.length&&this.callbacks.shift()(t.data)},Ag:function(t){console.log("Thrift WebSocket Error: "+t.toString()),this.bg.close()},Jl:function(t){this.sg=t,this.hg=this.sg.length,this.tg=this.sg.length,this.ig=0},isOpen:function(){return this.bg&&this.bg.readyState==this.bg.OPEN},open:function(){this.bg&&this.bg.readyState!=this.bg.CLOSED||(this.bg=new WebSocket(this.url),this.bg.onopen=this.Rg.bind(this),this.bg.onmessage=this._g.bind(this),this.bg.onerror=this.Ag.bind(this),this.bg.onclose=this.Ig.bind(this))},close:function(){this.bg.close()},read:function(t){var e=this.tg-this.ig;if(0==e)return"";var i=t;e<t&&(i=e);var r=this.Eg.substr(this.ig,i);return this.ig+=i,r},pg:function(){return this.sg},write:function(t){this.rg=t},Yl:function(){return this.rg}},Thrift.nv=Thrift.Ng=function(t){this.Cg=[],this.kg=[],this.Kl=t},Thrift.Ng.Type={},Thrift.Ng.Type[Thrift.Type.BOOL]='"tf"',Thrift.Ng.Type[Thrift.Type.BYTE]='"i8"',Thrift.Ng.Type[Thrift.Type.I16]='"i16"',Thrift.Ng.Type[Thrift.Type.I32]='"i32"',Thrift.Ng.Type[Thrift.Type.I64]='"i64"',Thrift.Ng.Type[Thrift.Type.DOUBLE]='"dbl"',Thrift.Ng.Type[Thrift.Type.STRUCT]='"rec"',Thrift.Ng.Type[Thrift.Type.STRING]='"str"',Thrift.Ng.Type[Thrift.Type.MAP]='"map"',Thrift.Ng.Type[Thrift.Type.LIST]='"lst"',Thrift.Ng.Type[Thrift.Type.SET]='"set"',Thrift.Ng.Dg={},Thrift.Ng.Dg.tf=Thrift.Type.BOOL,Thrift.Ng.Dg.i8=Thrift.Type.BYTE,Thrift.Ng.Dg.i16=Thrift.Type.I16,Thrift.Ng.Dg.i32=Thrift.Type.I32,Thrift.Ng.Dg.i64=Thrift.Type.I64,Thrift.Ng.Dg.dbl=Thrift.Type.DOUBLE,Thrift.Ng.Dg.rec=Thrift.Type.STRUCT,Thrift.Ng.Dg.str=Thrift.Type.STRING,Thrift.Ng.Dg.map=Thrift.Type.MAP,Thrift.Ng.Dg.lst=Thrift.Type.LIST,Thrift.Ng.Dg.set=Thrift.Type.SET,Thrift.Ng.Tw=1,Thrift.Ng.prototype={Mg:function(){return this.Kl},ql:function(t,e,i){this.Cg=[],this.kg=[],this.Cg.push([Thrift.Ng.Tw,'"'+t+'"',e,i])},Wl:function(){var t=this.Cg.pop();this.jg=this.Cg.pop(),this.jg.push(t),this.Pg="["+this.jg.join(",")+"]",this.Kl.write(this.Pg)},Ww:function(t){this.kg.push(this.Cg.length),this.Cg.push({})},zw:function(){var t=this.kg.pop(),e=this.Cg[t],i="{",r=!0;for(var n in e)r?r=!1:i+=",",i+=n+":"+e[n];i+="}",this.Cg[t]=i},Yw:function(t,e,i){this.kg.push(this.Cg.length),this.Cg.push({Hg:'"'+i+'"',Lg:Thrift.Ng.Type[e]})},$w:function(){var t=this.Cg.pop(),e=this.Cg.pop();this.Cg[this.Cg.length-1][e.Hg]="{"+e.Lg+":"+t+"}",this.kg.pop()},Jw:function(){},Ug:function(t,e,i){this.kg.push(this.Cg.length),this.Cg.push([Thrift.Ng.Type[t],Thrift.Ng.Type[e],0])},Fg:function(){var t=this.kg.pop();if(t!=this.Cg.length){(this.Cg.length-t-1)%2!=0&&this.Cg.push("");var e=(this.Cg.length-t-1)/2;this.Cg[t][this.Cg[t].length-1]=e;for(var i="}",r=!0;this.Cg.length>t+1;){var n=this.Cg.pop(),o=this.Cg.pop();r?r=!1:i=","+i,isNaN(o)||(o='"'+o+'"'),i=o+":"+n+i}i="{"+i,this.Cg[t].push(i),this.Cg[t]="["+this.Cg[t].join(",")+"]"}},Gg:function(t,e){this.kg.push(this.Cg.length),this.Cg.push([Thrift.Ng.Type[t],e])},xg:function(){for(var t=this.kg.pop();this.Cg.length>t+1;){var e=this.Cg[t+1];this.Cg.splice(t+1,1),this.Cg[t].push(e)}this.Cg[t]="["+this.Cg[t].join(",")+"]"},Bg:function(t,e){this.kg.push(this.Cg.length),this.Cg.push([Thrift.Ng.Type[t],e])},Vg:function(){for(var t=this.kg.pop();this.Cg.length>t+1;){var e=this.Cg[t+1];this.Cg.splice(t+1,1),this.Cg[t].push(e)}this.Cg[t]="["+this.Cg[t].join(",")+"]"},qg:function(t){this.Cg.push(t?1:0)},Qg:function(t){this.Cg.push(t)},Wg:function(t){this.Cg.push(t)},Xw:function(t){this.Cg.push(t)},Yg:function(t){this.Cg.push(t)},Kg:function(t){this.Cg.push(t)},Kw:function(t){if(null===t)this.Cg.push(null);else{for(var e="",i=0;i<t.length;i++){var r=t.charAt(i);e+='"'===r?'\\"':"\\"===r?"\\\\":"\b"===r?"\\b":"\f"===r?"\\f":"\n"===r?"\\n":"\r"===r?"\\r":"\t"===r?"\\t":r}this.Cg.push('"'+e+'"')}},$g:function(t){this.Kw(t)},zl:function(){this.Xg=[],this.ig=[],"undefined"!=typeof JSON&&"function"==typeof JSON.parse?this.Jg=JSON.parse(this.Kl.pg()):"undefined"!=typeof jQuery?this.Jg=jQuery.zg(this.Kl.pg()):this.Jg=eval(this.Kl.pg());var r={},version=this.Jg.shift();if(version!=Thrift.Ng.Tw)throw"Wrong thrift protocol version: "+version;return r.fname=this.Jg.shift(),r.Zg=this.Jg.shift(),r.tb=this.Jg.shift(),this.Xg.push(this.Jg.shift()),r},Zl:function(){},ib:function(t){return this.Xg[this.Xg.length-1]instanceof Array&&this.Xg.push(this.Xg[this.Xg.length-1].shift()),{fname:""}},Qw:function(){this.Xg[this.Xg.length-2]instanceof Array&&this.Xg.pop()},Gw:function(){var t={},e=-1,i=Thrift.Type.STOP;for(var r in this.Xg[this.Xg.length-1])if(null!==r){e=parseInt(r,10),this.ig.push(this.Xg.length);var n=this.Xg[this.Xg.length-1][e];delete this.Xg[this.Xg.length-1][e],this.Xg.push(n);break}if(-1!=e)for(var o in this.Xg[this.Xg.length-1])null!==Thrift.Ng.Dg[o]&&(i=Thrift.Ng.Dg[o],this.Xg[this.Xg.length-1]=this.Xg[this.Xg.length-1][o]);return t.fname="",t.ftype=i,t.fid=e,t},qw:function(){for(var t=this.ig.pop();this.Xg.length>t;)this.Xg.pop()},nb:function(){var t=this.Xg.pop(),e=t.shift();e instanceof Array&&(this.Xg.push(t),e=(t=e).shift());var i={};return i.rb=Thrift.Ng.Dg[e],i.sb=Thrift.Ng.Dg[t.shift()],i.size=t.shift(),this.ig.push(this.Xg.length),this.Xg.push(t.shift()),i},eb:function(){this.qw()},hb:function(){var t=this.Xg[this.Xg.length-1],e={};return e.ob=Thrift.Ng.Dg[t.shift()],e.size=t.shift(),this.ig.push(this.Xg.length),this.Xg.push(t.shift()),e},ub:function(){this.qw()},ab:function(t,e){return this.hb(t,e)},fb:function(){return this.ub()},cb:function(){var t=this.Vw();return null!==t&&"1"==t.value?t.value=!0:t.value=!1,t},lb:function(){return this.Vw()},vb:function(){return this.Vw()},Vw:function(t){void 0===t&&(t=this.Xg[this.Xg.length-1]);var e={};if(t instanceof Array)0===t.length?e.value=void 0:e.value=t.shift();else if(t instanceof Object){for(var i in t)if(null!==i){this.Xg.push(t[i]),delete t[i],e.value=i;break}}else e.value=t,this.Xg.pop();return e},Eb:function(){return this.Vw()},pb:function(){return this.Vw()},xw:function(){return this.Vw()},wb:function(){return this.xw()},Bw:function(t){var e,i;switch(t){case Thrift.Type.STOP:return null;case Thrift.Type.BOOL:return this.cb();case Thrift.Type.BYTE:return this.lb();case Thrift.Type.I16:return this.vb();case Thrift.Type.I32:return this.Vw();case Thrift.Type.I64:return this.Eb();case Thrift.Type.DOUBLE:return this.pb();case Thrift.Type.STRING:return this.xw();case Thrift.Type.STRUCT:for(this.ib();(e=this.Gw()).ftype!=Thrift.Type.STOP;)this.Bw(e.ftype),this.qw();return this.Qw(),null;case Thrift.Type.MAP:for(e=this.nb(),i=0;i<e.size;i++)0<i&&this.Xg.length>this.ig[this.ig.length-1]+1&&this.Xg.pop(),this.Bw(e.rb),this.Bw(e.sb);return this.eb(),null;case Thrift.Type.SET:for(e=this.ab(),i=0;i<e.size;i++)this.Bw(e.ob);return this.fb(),null;case Thrift.Type.LIST:for(e=this.hb(),i=0;i<e.size;i++)this.Bw(e.ob);return this.ub(),null}}},Thrift.gb=function(t,e,i,r){Thrift.Ng.call(this,e,i,r),this.bb=t},Thrift.Sw(Thrift.gb,Thrift.Ng,"multiplexProtocol"),Thrift.gb.prototype.ql=function(t,e,i){e===Thrift.Ql.CALL||e===Thrift.Ql.ONEWAY?Thrift.Ng.prototype.ql.call(this,this.bb+":"+t,e,i):Thrift.Ng.prototype.ql.call(this,t,e,i)},Thrift.yb=function(){this.Tb=0},Thrift.yb.prototype.mb=function(t,e,i){e.Rl&&(e=e.Rl);var r=this;return e.prototype.Ob=function(){return r.Tb+=1,r.Tb},new e(new Thrift.gb(t,i))},copyList=function(t,e){if(!t)return t;var i,r,n,o=i=void 0===e.shift?e:e[0],s=t.length,a=[];for(r=0;r<s;r++)n=t[r],null===i?a.push(n):i===copyMap||i===copyList?a.push(i(n,e.slice(1))):a.push(new o(n));return a},copyMap=function(t,e){if(!t)return t;var i,r,n=i=void 0===e.shift?e:e[0],o={};for(var s in t)t.hasOwnProperty(s)&&(r=t[s],o[s]=null===i?r:i===copyMap||i===copyList?i(r,e.slice(1)):new n(r));return o},Thrift.Sb=copyMap,Thrift.Rb=copyList,module.exports=Thrift},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.Xv="undefined"!=typeof location&&"https:"===location.protocol,n.rd=!0,n.Ib=1e4,n.Mu=6e4,n._b="X-Hive-TestId",n);function n(){}e.et=r},function(t,e,i){var r,n,o;
/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */!function(s,a){"use strict";t.exports?t.exports=a(i(23),i(23),i(23)):(n=[i(23),i(23),i(23)],void 0===(o="function"==typeof(r=a)?r.apply(e,n):r)||(t.exports=o))}(0,(function(t,e,i,r){"use strict";var n=r&&r.Ab;function o(t,e){var i=1<=arguments.length;if(!(this instanceof o))return i?2<=arguments.length?new o(t,e):new o(t):new o;if(void 0===t){if(i)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&i)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.Na(e):this}o.version="1.19.1";var s=o.prototype,a=Object.prototype.hasOwnProperty;function u(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function h(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function c(t){return"Array"===h(t)}function l(t,e){var i,r,n={};if("RegExp"===h(e))n=null;else if(c(e))for(i=0,r=e.length;i<r;i++)n[e[i]]=!0;else n[e]=!0;for(i=0,r=t.length;i<r;i++)(n&&void 0!==n[t[i]]||!n&&e.test(t[i]))&&(t.splice(i,1),r--,i--);return t}function p(t,e){var i,r;if(c(e)){for(i=0,r=e.length;i<r;i++)if(!p(t,e[i]))return!1;return!0}var n=h(e);for(i=0,r=t.length;i<r;i++)if("RegExp"===n){if("string"==typeof t[i]&&t[i].match(e))return!0}else if(t[i]===e)return!0;return!1}function f(t,e){if(!c(t)||!c(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var i=0,r=t.length;i<r;i++)if(t[i]!==e[i])return!1;return!0}function d(t){return t.replace(/^\/+|\/+$/g,"")}function g(t){return escape(t)}function v(t){return encodeURIComponent(t).replace(/[!'()*]/g,g).replace(/\*/g,"%2A")}function y(t,e){return function(i){try{return o[e](i+"").replace(o.ay[t][e].ly,(function(i){return o.ay[t][e].map[i]}))}catch(t){return i}}}o.Nb=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,Cb:null,kb:o.kb,Db:o.Db,Mb:o.Mb}},o.kb=!1,o.Db=!1,o.Mb=!0,o.jb=/^[a-z][a-z0-9.+-]*$/i,o.Pb=/[^a-z0-9\._-]/i,o.Hb=/(xn--)/i,o.Lb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.Ub=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.Fb=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,o.Gb={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,xb:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.Bb={Vb:"80",qb:"443",Qb:"21",Wb:"70",Yb:"80",Kb:"443"},o.$b=["http","https"],o.Xb=/[^a-zA-Z0-9\.\-:_]/,o.Jb={a:"href",zb:"cite",link:"href",Zb:"href",ty:"src",form:"action",iy:"src",ny:"href",sy:"src",ey:"src",source:"src",track:"src",input:"src",hy:"src",video:"src"},o.oy=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return o.Jb[e]}},o.encode=v,o.decode=decodeURIComponent,o.uy=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=v,o.decode=decodeURIComponent},o.ay={pathname:{encode:{ly:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{ly:/[\/\?#]/g,map:{vy:"%2F",Ey:"%3F",py:"%23"}}},wy:{encode:{ly:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":",gy:"/",by:"?",yy:"#",Ty:"[",my:"]","%40":"@",Oy:"!","%24":"$","%26":"&",Sy:"'",Ry:"(",Iy:")",_y:"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},Ay:{encode:{ly:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{Oy:"!","%24":"$",Sy:"'",Ry:"(",Iy:")",_y:"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{ly:/[\/\?#:]/g,map:{vy:"%2F",Ey:"%3F",py:"%23",Ny:"%3A"}}}},o.Cy=function(t,e){var i=o.encode(t+"");return void 0===e&&(e=o.Mb),e?i.replace(/%20/g,"+"):i},o.ky=function(t,e){t+="",void 0===e&&(e=o.Mb);try{return o.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var m,E={encode:"encode",decode:"decode"};for(m in E)o[m+"PathSegment"]=y("pathname",E[m]),o[m+"UrnPathSegment"]=y("urnpath",E[m]);function w(t,e,i){return function(r){var n;n=i?function(t){return o[e](o[i](t))}:o[e];for(var s=(r+"").split(t),a=0,u=s.length;a<u;a++)s[a]=n(s[a]);return s.join(t)}}function b(t){return function(e,i){return void 0===e?this.Nb[t]||"":(this.Nb[t]=e||null,this.Wv(!i),this)}}function S(t,e){return function(i,r){return void 0===i?this.Nb[t]||"":(null!==i&&(i+="").charAt(0)===e&&(i=i.substring(1)),this.Nb[t]=i,this.Wv(!r),this)}}o.Dy=w("/","decodePathSegment"),o.My=w(":","decodeUrnPathSegment"),o.jy=w("/","encodePathSegment","decode"),o.Py=w(":","encodeUrnPathSegment","decode"),o.Hy=y("reserved","encode"),o.parse=function(t,e){var i;return e=e||{kb:o.kb},-1<(i=t.indexOf("#"))&&(e.Cb=t.substring(i+1)||null,t=t.substring(0,i)),-1<(i=t.indexOf("?"))&&(e.query=t.substring(i+1)||null,t=t.substring(0,i)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=o.Ly(t,e)):-1<(i=t.indexOf(":"))&&(e.protocol=t.substring(0,i)||null,e.protocol&&!e.protocol.match(o.jb)?e.protocol=void 0:"//"===t.substring(i+1,i+3)?(t=t.substring(i+3),t=o.Ly(t,e)):(t=t.substring(i+1),e.urn=!0)),e.path=t,e},o.Uy=function(t,e){var i,r,n=(t=(t=t||"").replace(/\\/g,"/")).indexOf("/");if(-1===n&&(n=t.length),"["===t.charAt(0))i=t.indexOf("]"),e.hostname=t.substring(1,i)||null,e.port=t.substring(i+2,n)||null,"/"===e.port&&(e.port=null);else{var s=t.indexOf(":"),a=t.indexOf("/"),u=t.indexOf(":",s+1);-1!==u&&(-1===a||u<a)?(e.hostname=t.substring(0,n)||null,e.port=null):(r=t.substring(0,n).split(":"),e.hostname=r[0]||null,e.port=r[1]||null)}return e.hostname&&"/"!==t.substring(n).charAt(0)&&(n++,t="/"+t),e.kb&&o.Fy(e.hostname,e.protocol),e.port&&o.Gy(e.port),t.substring(n)||"/"},o.Ly=function(t,e){return t=o.xy(t,e),o.Uy(t,e)},o.xy=function(t,e){var i,r=t.indexOf("/"),n=t.lastIndexOf("@",-1<r?r:t.length-1);return-1<n&&(-1===r||n<r)?(i=t.substring(0,n).split(":"),e.username=i[0]?o.decode(i[0]):null,i.shift(),e.password=i[0]?o.decode(i.join(":")):null,t=t.substring(n+1)):(e.username=null,e.password=null),t},o.By=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var i,r,n,s={},u=t.split("&"),h=u.length,c=0;c<h;c++)i=u[c].split("="),r=o.ky(i.shift(),e),n=i.length?o.ky(i.join("="),e):null,a.call(s,r)?("string"!=typeof s[r]&&null!==s[r]||(s[r]=[s[r]]),s[r].push(n)):s[r]=n;return s},o.Wv=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=o.Vy(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.Cb&&t.Cb&&(e+="#"+t.Cb),e},o.qy=function(t){var e="";return t.hostname?(o.Ub.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},o.Vy=function(t){return o.Qy(t)+o.qy(t)},o.Qy=function(t){var e="";return t.username&&(e+=o.encode(t.username)),t.password&&(e+=":"+o.encode(t.password)),e&&(e+="@"),e},o.Wy=function(t,e,i){var r,n,s,u,h="";for(n in t)if(a.call(t,n)&&n)if(c(t[n]))for(r={},s=0,u=t[n].length;s<u;s++)void 0!==t[n][s]&&void 0===r[t[n][s]+""]&&(h+="&"+o.Yy(n,t[n][s],i),!0!==e&&(r[t[n][s]+""]=!0));else void 0!==t[n]&&(h+="&"+o.Yy(n,t[n],i));return h.substring(1)},o.Yy=function(t,e,i){return o.Cy(t,i)+(null!==e?"="+o.Cy(e,i):"")},o.Ky=function(t,e,i){if("object"==typeof e)for(var r in e)a.call(e,r)&&o.Ky(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=i);"string"==typeof t[e]&&(t[e]=[t[e]]),c(i)||(i=[i]),t[e]=(t[e]||[]).concat(i)}},o.$y=function(t,e,i){if("object"==typeof e)for(var r in e)a.call(e,r)&&o.$y(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");t[e]=void 0===i?null:i}},o.Xy=function(t,e,i){var r,n,s;if(c(e))for(r=0,n=e.length;r<n;r++)t[e[r]]=void 0;else if("RegExp"===h(e))for(s in t)e.test(s)&&(t[s]=void 0);else if("object"==typeof e)for(s in e)a.call(e,s)&&o.Xy(t,s,e[s]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==i?"RegExp"===h(i)?!c(t[e])&&i.test(t[e])?t[e]=void 0:t[e]=l(t[e],i):t[e]!==String(i)||c(i)&&1!==i.length?c(t[e])&&(t[e]=l(t[e],i)):t[e]=void 0:t[e]=void 0}},o.Jy=function(t,e,i,r){switch(h(e)){case"String":break;case"RegExp":for(var n in t)if(a.call(t,n)&&e.test(n)&&(void 0===i||o.Jy(t,n,i)))return!0;return!1;case"Object":for(var s in e)if(a.call(e,s)&&!o.Jy(t,s,e[s]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(h(i)){case"Undefined":return e in t;case"Boolean":return i===Boolean(c(t[e])?t[e].length:t[e]);case"Function":return!!i(t[e],e,t);case"Array":return!!c(t[e])&&(r?p:f)(t[e],i);case"RegExp":return c(t[e])?!!r&&p(t[e],i):Boolean(t[e]&&t[e].match(i));case"Number":i=String(i);case"String":return c(t[e])?!!r&&p(t[e],i):t[e]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.zy=function(){for(var t=[],e=[],i=0,r=0;r<arguments.length;r++){var n=new o(arguments[r]);t.push(n);for(var s=n.Zy(),a=0;a<s.length;a++)"string"==typeof s[a]&&e.push(s[a]),s[a]&&i++}if(!e.length||!i)return new o("");var u=new o("").Zy(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},o.tT=function(t,e){var i,r=Math.min(t.length,e.length);for(i=0;i<r;i++)if(t.charAt(i)!==e.charAt(i)){i--;break}return i<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(i)&&"/"===e.charAt(i)||(i=t.substring(0,i).lastIndexOf("/")),t.substring(0,i+1))},o.iT=function(t,e,i){var r=(i=i||{}).start||o.Gb.start,n=i.end||o.Gb.end,s=i.trim||o.Gb.trim,a=i.xb||o.Gb.xb,u=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var h=r.exec(t);if(!h)break;var c=h.index;if(i.nT){var l=t.slice(Math.max(c-3,0),c);if(l&&u.test(l))continue}for(var p=c+t.slice(c).search(n),f=t.slice(c,p),d=-1;;){var g=a.exec(f);if(!g)break;var v=g.index+g[0].length;d=Math.max(d,v)}if(!((f=-1<d?f.slice(0,d)+f.slice(d).replace(s,""):f.replace(s,"")).length<=h[0].length||i.rT&&i.rT.test(f))){var y=e(f,c,p=c+f.length,t);void 0!==y?(y=String(y),t=t.slice(0,c)+y+t.slice(p),r.lastIndex=c+y.length):r.lastIndex=p}}return r.lastIndex=0,t},o.Fy=function(e,i){var r=!!e,n=!1;if(!!i&&(n=p(o.$b,i)),n&&!r)throw new TypeError("Hostname cannot be empty, if protocol is "+i);if(e&&e.match(o.Xb)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.sT(e).match(o.Xb))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_]')}},o.Gy=function(t){if(t){var e=Number(t);if(!(function(t){return/^[0-9]+$/.test(t)}(e)&&0<e&&e<65536))throw new TypeError('Port "'+t+'" is not a valid port')}},o.Qh=function(t){if(t){var e={Ab:this.Qh()};return r.eT&&"function"==typeof r.eT.Qh&&(e.eT=r.eT.Qh()),r.hT&&"function"==typeof r.hT.Qh&&(e.hT=r.hT.Qh()),r.oT&&"function"==typeof r.oT.Qh&&(e.oT=r.oT.Qh()),e}return r.Ab===this&&(r.Ab=n),this},s.Wv=function(t){return!0===t?this.uT=!0:void 0!==t&&!this.uT||(this.aT=o.Wv(this.Nb),this.uT=!1),this},s.clone=function(){return new o(this)},s.valueOf=s.toString=function(){return this.Wv(!1).aT},s.protocol=b("protocol"),s.username=b("username"),s.password=b("password"),s.hostname=b("hostname"),s.port=b("port"),s.query=S("query","?"),s.Cb=S("fragment","#"),s.search=function(t,e){var i=this.query(t,e);return"string"==typeof i&&i.length?"?"+i:i},s.hash=function(t,e){var i=this.Cb(t,e);return"string"==typeof i&&i.length?"#"+i:i},s.pathname=function(t,e){if(void 0!==t&&!0!==t)return this.Nb.urn?this.Nb.path=t?o.Py(t):"":this.Nb.path=t?o.jy(t):"/",this.Wv(!e),this;var i=this.Nb.path||(this.Nb.hostname?"/":"");return t?(this.Nb.urn?o.My:o.Dy)(i):i},s.path=s.pathname,s.href=function(t,e){var i;if(void 0===t)return this.toString();this.aT="",this.Nb=o.Nb();var r=t instanceof o,n="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName&&(t=t[o.oy(t)]||"",n=!1),!r&&n&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this.Nb=o.parse(String(t),this.Nb);else{if(!r&&!n)throw new TypeError("invalid input");var s=r?t.Nb:t;for(i in s)"query"!==i&&a.call(this.Nb,i)&&(this.Nb[i]=s[i]);s.query&&this.query(s.query,!1)}return this.Wv(!e),this},s.is=function(t){var e=!1,r=!1,n=!1,s=!1,a=!1,u=!1,h=!1,c=!this.Nb.urn;switch(this.Nb.hostname&&(c=!1,r=o.Lb.test(this.Nb.hostname),n=o.Ub.test(this.Nb.hostname),a=(s=!(e=r||n))&&i&&i.has(this.Nb.hostname),u=s&&o.Pb.test(this.Nb.hostname),h=s&&o.Hb.test(this.Nb.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return n;case"idn":return u;case"url":return!this.Nb.urn;case"urn":return!!this.Nb.urn;case"punycode":return h}return null};var T=s.protocol,I=s.port,_=s.hostname;s.protocol=function(t,e){if(t&&!(t=t.replace(/:(\/\/)?$/,"")).match(o.jb))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return T.call(this,t,e)},s.scheme=s.protocol,s.port=function(t,e){return this.Nb.urn?void 0===t?"":this:(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),o.Gy(t))),I.call(this,t,e))},s.hostname=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if(void 0!==t){var i={kb:this.Nb.kb};if("/"!==o.Uy(t,i))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=i.hostname,this.Nb.kb&&o.Fy(t,this.Nb.protocol)}return _.call(this,t,e)},s.origin=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if(void 0===t){var i=this.protocol();return this.fT()?(i?i+"://":"")+this.fT():""}var r=o(t);return this.protocol(r.protocol()).fT(r.fT()).Wv(!e),this},s.host=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if(void 0===t)return this.Nb.hostname?o.qy(this.Nb):"";if("/"!==o.Uy(t,this.Nb))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.Wv(!e),this},s.fT=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if(void 0===t)return this.Nb.hostname?o.Vy(this.Nb):"";if("/"!==o.Ly(t,this.Nb))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.Wv(!e),this},s.cT=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if(void 0!==t)return"@"!==t[t.length-1]&&(t+="@"),o.xy(t,this.Nb),this.Wv(!e),this;var i=o.Qy(this.Nb);return i?i.substring(0,i.length-1):i},s.lT=function(t,e){var i;return void 0===t?this.path()+this.search()+this.hash():(i=o.parse(t),this.Nb.path=i.path,this.Nb.query=i.query,this.Nb.Cb=i.Cb,this.Wv(!e),this)},s.vT=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if(void 0===t){if(!this.Nb.hostname||this.is("IP"))return"";var i=this.Nb.hostname.length-this.domain().length-1;return this.Nb.hostname.substring(0,i)||""}var r=this.Nb.hostname.length-this.domain().length,n=this.Nb.hostname.substring(0,r),s=new RegExp("^"+u(n));if(t&&"."!==t.charAt(t.length-1)&&(t+="."),-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");return t&&o.Fy(t,this.Nb.protocol),this.Nb.hostname=this.Nb.hostname.replace(s,t),this.Wv(!e),this},s.domain=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this.Nb.hostname||this.is("IP"))return"";var i=this.Nb.hostname.match(/\./g);if(i&&i.length<2)return this.Nb.hostname;var r=this.Nb.hostname.length-this.dT(e).length-1;return r=this.Nb.hostname.lastIndexOf(".",r-1)+1,this.Nb.hostname.substring(r)||""}if(!t)throw new TypeError("cannot set domain empty");if(-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(o.Fy(t,this.Nb.protocol),!this.Nb.hostname||this.is("IP"))this.Nb.hostname=t;else{var n=new RegExp(u(this.domain())+"$");this.Nb.hostname=this.Nb.hostname.replace(n,t)}return this.Wv(!e),this},s.dT=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this.Nb.hostname||this.is("IP"))return"";var r=this.Nb.hostname.lastIndexOf("."),n=this.Nb.hostname.substring(r+1);return!0!==e&&i&&i.list[n.toLowerCase()]&&i.get(this.Nb.hostname)||n}var o;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!i||!i.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');o=new RegExp(u(this.dT())+"$"),this.Nb.hostname=this.Nb.hostname.replace(o,t)}else{if(!this.Nb.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(u(this.dT())+"$"),this.Nb.hostname=this.Nb.hostname.replace(o,t)}return this.Wv(!e),this},s.ET=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this.Nb.path&&!this.Nb.hostname)return"";if("/"===this.Nb.path)return"/";var i=this.Nb.path.length-this.filename().length-1,r=this.Nb.path.substring(0,i)||(this.Nb.hostname?"/":"");return t?o.Dy(r):r}var n=this.Nb.path.length-this.filename().length,s=this.Nb.path.substring(0,n),a=new RegExp("^"+u(s));return this.is("relative")||"/"!==(t=t||"/").charAt(0)&&(t="/"+t),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=o.jy(t),this.Nb.path=this.Nb.path.replace(a,t),this.Wv(!e),this},s.filename=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this.Nb.path||"/"===this.Nb.path)return"";var i=this.Nb.path.lastIndexOf("/"),r=this.Nb.path.substring(i+1);return t?o.pT(r):r}var n=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(n=!0);var s=new RegExp(u(this.filename())+"$");return t=o.jy(t),this.Nb.path=this.Nb.path.replace(s,t),n?this.wT(e):this.Wv(!e),this},s.suffix=function(t,e){if(this.Nb.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this.Nb.path||"/"===this.Nb.path)return"";var i,r,n=this.filename(),s=n.lastIndexOf(".");return-1===s?"":(i=n.substring(s+1),r=/^[a-z0-9%]+$/i.test(i)?i:"",t?o.pT(r):r)}"."===t.charAt(0)&&(t=t.substring(1));var a,h=this.suffix();if(h)a=t?new RegExp(u(h)+"$"):new RegExp(u("."+h)+"$");else{if(!t)return this;this.Nb.path+="."+o.jy(t)}return a&&(t=o.jy(t),this.Nb.path=this.Nb.path.replace(a,t)),this.Wv(!e),this},s.Zy=function(t,e,i){var r=this.Nb.urn?":":"/",n=this.path(),o="/"===n.substring(0,1),s=n.split(r);if(void 0!==t&&"number"!=typeof t&&(i=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&s.shift(),t<0&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(c(e)){s=[];for(var a=0,u=e.length;a<u;a++)(e[a].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(d(e[a])))}else!e&&"string"!=typeof e||(e=d(e),""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e?s[t]=d(e):s.splice(t,1);return o&&s.unshift(""),this.path(s.join(r),i)},s.gT=function(t,e,i){var r,n,s;if("number"!=typeof t&&(i=e,e=t,t=void 0),void 0===e){if(c(r=this.Zy(t,e,i)))for(n=0,s=r.length;n<s;n++)r[n]=o.decode(r[n]);else r=void 0!==r?o.decode(r):void 0;return r}if(c(e))for(n=0,s=e.length;n<s;n++)e[n]=o.encode(e[n]);else e="string"==typeof e||e instanceof String?o.encode(e):e;return this.Zy(t,e,i)};var P=s.query;return s.query=function(t,e){if(!0===t)return o.By(this.Nb.query,this.Nb.Mb);if("function"!=typeof t)return void 0!==t&&"string"!=typeof t?(this.Nb.query=o.Wy(t,this.Nb.Db,this.Nb.Mb),this.Wv(!e),this):P.call(this,t,e);var i=o.By(this.Nb.query,this.Nb.Mb),r=t.call(this,i);return this.Nb.query=o.Wy(r||i,this.Nb.Db,this.Nb.Mb),this.Wv(!e),this},s.$y=function(t,e,i){var r=o.By(this.Nb.query,this.Nb.Mb);if("string"==typeof t||t instanceof String)r[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var n in t)a.call(t,n)&&(r[n]=t[n])}return this.Nb.query=o.Wy(r,this.Nb.Db,this.Nb.Mb),"string"!=typeof t&&(i=e),this.Wv(!i),this},s.Ky=function(t,e,i){var r=o.By(this.Nb.query,this.Nb.Mb);return o.Ky(r,t,void 0===e?null:e),this.Nb.query=o.Wy(r,this.Nb.Db,this.Nb.Mb),"string"!=typeof t&&(i=e),this.Wv(!i),this},s.Xy=function(t,e,i){var r=o.By(this.Nb.query,this.Nb.Mb);return o.Xy(r,t,e),this.Nb.query=o.Wy(r,this.Nb.Db,this.Nb.Mb),"string"!=typeof t&&(i=e),this.Wv(!i),this},s.Jy=function(t,e,i){var r=o.By(this.Nb.query,this.Nb.Mb);return o.Jy(r,t,e,i)},s.bT=s.$y,s.yT=s.Ky,s.TT=s.Xy,s.mT=s.Jy,s.normalize=function(){return this.Nb.urn?this.RT(!1).wT(!1).ST(!1).OT(!1).Wv():this.RT(!1)._T(!1).IT(!1).wT(!1).ST(!1).OT(!1).Wv()},s.RT=function(t){return"string"==typeof this.Nb.protocol&&(this.Nb.protocol=this.Nb.protocol.toLowerCase(),this.Wv(!t)),this},s._T=function(i){return this.Nb.hostname&&(this.is("IDN")&&t?this.Nb.hostname=t.sT(this.Nb.hostname):this.is("IPv6")&&e&&(this.Nb.hostname=e.AT(this.Nb.hostname)),this.Nb.hostname=this.Nb.hostname.toLowerCase(),this.Wv(!i)),this},s.IT=function(t){return"string"==typeof this.Nb.protocol&&this.Nb.port===o.Bb[this.Nb.protocol]&&(this.Nb.port=null,this.Wv(!t)),this},s.wT=function(t){var e,i=this.Nb.path;if(!i)return this;if(this.Nb.urn)return this.Nb.path=o.Py(this.Nb.path),this.Wv(!t),this;if("/"===this.Nb.path)return this;var r,n,s="";for("/"!==(i=o.jy(i)).charAt(0)&&(e=!0,i="/"+i),"/.."!==i.slice(-3)&&"/."!==i.slice(-2)||(i+="/"),i=i.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(s=(s=i.substring(1).match(/^(\.\.\/)+/)||"")&&s[0]);-1!==(r=i.search(/\/\.\.(\/|$)/));)i=0!==r?(-1===(n=i.substring(0,r).lastIndexOf("/"))&&(n=r),i.substring(0,n)+i.substring(r+3)):i.substring(3);return e&&this.is("relative")&&(i=s+i.substring(1)),this.Nb.path=i,this.Wv(!t),this},s.NT=s.wT,s.ST=function(t){return"string"==typeof this.Nb.query&&(this.Nb.query.length?this.query(o.By(this.Nb.query,this.Nb.Mb)):this.Nb.query=null,this.Wv(!t)),this},s.OT=function(t){return this.Nb.Cb||(this.Nb.Cb=null,this.Wv(!t)),this},s.CT=s.ST,s.kT=s.OT,s.uy=function(){var t=o.encode,e=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},s.unicode=function(){var t=o.encode,e=o.decode;o.encode=v,o.decode=unescape;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},s.readable=function(){var e=this.clone();e.username("").password("").normalize();var i="";if(e.Nb.protocol&&(i+=e.Nb.protocol+"://"),e.Nb.hostname&&(e.is("punycode")&&t?(i+=t.DT(e.Nb.hostname),e.Nb.port&&(i+=":"+e.Nb.port)):i+=e.host()),e.Nb.hostname&&e.Nb.path&&"/"!==e.Nb.path.charAt(0)&&(i+="/"),i+=e.path(!0),e.Nb.query){for(var r="",n=0,s=e.Nb.query.split("&"),a=s.length;n<a;n++){var u=(s[n]||"").split("=");r+="&"+o.ky(u[0],this.Nb.Mb).replace(/&/g,"%26"),void 0!==u[1]&&(r+="="+o.ky(u[1],this.Nb.Mb).replace(/&/g,"%26"))}i+="?"+r.substring(1)}return i+o.ky(e.hash(),!0)},s.Na=function(t){var e,i,r,n=this.clone(),s=["protocol","username","password","hostname","port"];if(this.Nb.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof o||(t=new o(t)),n.Nb.protocol)return n;if(n.Nb.protocol=t.Nb.protocol,this.Nb.hostname)return n;for(i=0;r=s[i];i++)n.Nb[r]=t.Nb[r];return n.Nb.path?(".."===n.Nb.path.substring(-2)&&(n.Nb.path+="/"),"/"!==n.path().charAt(0)&&(e=(e=t.ET())||(0===t.path().indexOf("/")?"/":""),n.Nb.path=(e?e+"/":"")+n.Nb.path,n.wT())):(n.Nb.path=t.Nb.path,n.Nb.query||(n.Nb.query=t.Nb.query)),n.Wv(),n},s.MT=function(t){var e,i,r,n,s,a=this.clone().normalize();if(a.Nb.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new o(t).normalize(),e=a.Nb,i=t.Nb,n=a.path(),s=t.path(),"/"!==n.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===i.protocol&&(e.protocol=null),e.username!==i.username||e.password!==i.password)return a.Wv();if(null!==e.protocol||null!==e.username||null!==e.password)return a.Wv();if(e.hostname!==i.hostname||e.port!==i.port)return a.Wv();if(e.hostname=null,e.port=null,n===s)return e.path="",a.Wv();if(!(r=o.tT(n,s)))return a.Wv();var u=i.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(r.length)||"./",a.Wv()},s.Wh=function(t){var e,i,r,n,s,u=this.clone(),h=new o(t),l={};if(u.normalize(),h.normalize(),u.toString()===h.toString())return!0;if(r=u.query(),n=h.query(),u.query(""),h.query(""),u.toString()!==h.toString())return!1;if(r.length!==n.length)return!1;for(s in e=o.By(r,this.Nb.Mb),i=o.By(n,this.Nb.Mb),e)if(a.call(e,s)){if(c(e[s])){if(!f(e[s],i[s]))return!1}else if(e[s]!==i[s])return!1;l[s]=!0}for(s in i)if(a.call(i,s)&&!l[s])return!1;return!0},s.kb=function(t){return this.Nb.kb=!!t,this},s.Db=function(t){return this.Nb.Db=!!t,this},s.Mb=function(t){return this.Nb.Mb=!!t,this},o}))},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(0),n=i(8),o=i(7).ut.xa,s=(a.Reporting=function(){return a.app="STATS",r.Framework.resolve(n.pf.lf)},a.Pl=function(){return this.app},a.getVersion=function(){return this.version},a.version=o,a);function a(){}e.Hive=s},function(t,e){var i,r,n,o,s,a,u,h={userAgent:!1},c={};if(void 0===l||!l)var l={};l.jT=function(){var t,e,i,r=arguments,n=null;for(t=0;t<r.length;t+=1)for(i=(""+r[t]).split("."),n=l,e="YAHOO"==i[0]?1:0;e<i.length;e+=1)n[i[e]]=n[i[e]]||{},n=n[i[e]];return n},l.log=function(t,e,i){var r=l.HT.PT;return!(!r||!r.log)&&r.log(t,e,i)},l.register=function(t,e,i){var r,n,o,s,a,u=l.Xe.LT;for(u[t]||(u[t]={UT:[],FT:[]}),r=u[t],n=i.version,o=i.Wv,s=l.Xe.jd,r.name=t,r.version=n,r.Wv=o,r.UT.push(n),r.FT.push(o),r.GT=e,a=0;a<s.length;a+=1)s[a](r);e?(e.VERSION=n,e.xT=o):l.log("mainClass is undefined for module "+t,"warn")},l.Xe=l.Xe||{LT:[],jd:[]},l.Xe.getVersion=function(t){return l.Xe.LT[t]||null},l.Xe.BT=function(t){function e(t){var e=0;return parseFloat(t.replace(/\./g,(function(){return 1==e++?"":"."})))}var i,r={VT:0,opera:0,qT:0,QT:0,chrome:0,WT:null,YT:0,KT:0,$T:0,XT:0,JT:null,zT:0,ZT:0,tm:h&&h.im,nm:!1,os:null},n=t||h&&h.userAgent,o=c.location,s=o&&o.href;return r.nm=s&&0===s.toLowerCase().indexOf("https"),n&&(/windows|win32/i.test(n)?r.os="windows":/macintosh/i.test(n)?r.os="macintosh":/rhino/i.test(n)&&(r.os="rhino"),/KHTML/.test(n)&&(r.QT=1),(i=n.match(/AppleWebKit\/([^\s]*)/))&&i[1]&&(r.QT=e(i[1]),/ Mobile\//.test(n)?(r.WT="Apple",(i=n.match(/OS ([^\s]*)/))&&i[1]&&(i=e(i[1].replace("_","."))),r.JT=i,r.KT=r.XT=r.$T=0,(i=n.match(/iPad|iPod|iPhone/))&&i[0]&&(r[i[0].toLowerCase()]=r.JT)):((i=n.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))&&(r.WT=i[0]),/webOS/.test(n)&&(r.WT="WebOS",(i=n.match(/webOS\/([^\s]*);/))&&i[1]&&(r.ZT=e(i[1]))),/ Android/.test(n)&&(r.WT="Android",(i=n.match(/Android ([^\s]*);/))&&i[1]&&(r.zT=e(i[1])))),(i=n.match(/Chrome\/([^\s]*)/))&&i[1]?r.chrome=e(i[1]):(i=n.match(/AdobeAIR\/([^\s]*)/))&&(r.YT=i[0])),r.QT||((i=n.match(/Opera[\s\/]([^\s]*)/))&&i[1]?(r.opera=e(i[1]),(i=n.match(/Version\/([^\s]*)/))&&i[1]&&(r.opera=e(i[1])),(i=n.match(/Opera Mini[^;]*/))&&(r.WT=i[0])):(i=n.match(/MSIE\s([^;]*)/))&&i[1]?r.VT=e(i[1]):(i=n.match(/Gecko\/([^\s]*)/))&&(r.qT=1,(i=n.match(/rv:([^\s\)]*)/))&&i[1]&&(r.qT=e(i[1]))))),r},l.Xe.rm=l.Xe.BT(),function(){if(l.jT("util","widget","example"),"undefined"!=typeof YAHOO_config){var t,e=YAHOO_config.listener,i=l.Xe.jd,r=!0;if(e){for(t=0;t<i.length;t++)if(i[t]==e){r=!1;break}r&&i.push(e)}}}(),l.lang=l.lang||{},r=l.lang,n=Object.prototype,o=[],s={sm:"&amp;",em:"&lt;",hm:"&gt;",om:"&quot;",um:"&#x27;",vy:"&#x2F;",am:"&#x60;"},a=["toString","valueOf"],u={isArray:function(t){return"[object Array]"===n.toString.apply(t)},fm:function(t){return"boolean"==typeof t},cm:function(t){return"function"==typeof t||"[object Function]"===n.toString.apply(t)},lm:function(t){return null===t},vm:function(t){return"number"==typeof t&&isFinite(t)},cc:function(t){return t&&("object"==typeof t||r.cm(t))||!1},dm:function(t){return"string"==typeof t},Em:function(t){return void 0===t},pm:l.Xe.rm.VT?function(t,e){var i,o,s;for(i=0;i<a.length;i+=1)s=e[o=a[i]],r.cm(s)&&s!=n[o]&&(t[o]=s)}:function(){},wm:function(t){return t.replace(/[&<>"'\/`]/g,(function(t){return s[t]}))},extend:function(t,e,i){if(!e||!t)throw new Error("extend failed, please check that all dependencies are included.");function o(){}var s;if(o.prototype=e.prototype,t.prototype=new o,(t.prototype.constructor=t).gm=e.prototype,e.prototype.constructor==n.constructor&&(e.prototype.constructor=e),i){for(s in i)r.hasOwnProperty(i,s)&&(t.prototype[s]=i[s]);r.pm(t.prototype,i)}},bm:function(t,e){if(!e||!t)throw new Error("Absorb failed, verify dependencies.");var i,n,o=arguments,s=o[2];if(s&&!0!==s)for(i=2;i<o.length;i+=1)t[o[i]]=e[o[i]];else{for(n in e)!s&&n in t||(t[n]=e[n]);r.pm(t,e)}return t},ym:function(t,e){if(!e||!t)throw new Error("Augment failed, verify dependencies.");var i,n=[t.prototype,e.prototype];for(i=2;i<arguments.length;i+=1)n.push(arguments[i]);return r.bm.apply(this,n),t},dump:function(t,e){var i,n,o=[];if(!r.cc(t))return t+"";if(t instanceof Date||"nodeType"in t&&"tagName"in t)return t;if(r.cm(t))return"f(){...}";if(e=r.vm(e)?e:3,r.isArray(t)){for(o.push("["),i=0,n=t.length;i<n;i+=1)r.cc(t[i])?o.push(0<e?r.dump(t[i],e-1):"{...}"):o.push(t[i]),o.push(", ");1<o.length&&o.pop(),o.push("]")}else{for(i in o.push("{"),t)r.hasOwnProperty(t,i)&&(o.push(i+" => "),r.cc(t[i])?o.push(0<e?r.dump(t[i],e-1):"{...}"):o.push(t[i]),o.push(", "));1<o.length&&o.pop(),o.push("}")}return o.join("")},Tm:function(t,e,i,n){for(var o,s,a,u,h,c,l,p,f,d=[],g=t.length;!((o=t.lastIndexOf("{",g))<0||(s=t.indexOf("}",o))<o+1);)c=null,-1<(a=(u=l=t.substring(o+1,s)).indexOf(" "))&&(c=u.substring(a+1),u=u.substring(0,a)),h=e[u],i&&(h=i(u,h,c)),r.cc(h)?h=r.isArray(h)?r.dump(h,parseInt(c,10)):(-1<(p=(c=c||"").indexOf("dump"))&&(c=c.substring(4)),"[object Object]"===(f=h.toString())||-1<p?r.dump(h,parseInt(c,10)):f):r.dm(h)||r.vm(h)||(h="~-"+d.length+"-~",d[d.length]=l),t=t.substring(0,o)+h+t.substring(s+1),!1===n&&(g=o-1);for(o=d.length-1;0<=o;o-=1)t=t.replace(new RegExp("~-"+o+"-~"),"{"+d[o]+"}","g");return t},trim:function(t){try{return t.replace(/^\s+|\s+$/g,"")}catch(e){return t}},mm:function(){var t,e={},i=arguments,n=i.length;for(t=0;t<n;t+=1)r.bm(e,i[t],!0);return e},Om:function(t,e,i,n,s){t=t||0,e=e||{};var a,u,h=i,c=n;if(r.dm(i)&&(h=e[i]),!h)throw new TypeError("method undefined");return r.Em(n)||r.isArray(c)||(c=[n]),a=function(){h.apply(e,c||o)},u=s?setInterval(a,t):setTimeout(a,t),{interval:s,cancel:function(){this.interval?clearInterval(u):clearTimeout(u)}}},Sm:function(t){return r.cc(t)||r.dm(t)||r.vm(t)||r.fm(t)}},r.hasOwnProperty=n.hasOwnProperty?function(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}:function(t,e){return!r.Em(t[e])&&t.constructor.prototype[e]!==t[e]},u.bm(r,u,!0),(l.util.Lang=r).Rm=r.ym,l.Rm=r.ym,l.extend=r.extend,l.register("yahoo",l,{version:"2.9.0",Wv:"2800"});
/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */
var p,f,d,g,v,y,m,E,w,b,S,T,I,_,P,O,A=A||(p=Math,d=(f={})._v={},g=d.Im={extend:function(t){R.prototype=this;var e=new R;return t&&e._m(t),e.hasOwnProperty("init")||(e.init=function(){e.Am.init.apply(this,arguments)}),(e.init.prototype=e).Am=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},_m:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},v=d.Iv=g.extend({init:function(t,e){t=this.Nm=t||[],this.Cm=null!=e?e:4*t.length},toString:function(t){return(t||m).stringify(this)},concat:function(t){var e=this.Nm,i=t.Nm,r=this.Cm,n=t.Cm;if(this.km(),r%4)for(var o=0;o<n;o++){var s=i[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<n;o+=4)e[r+o>>>2]=i[o>>>2];return this.Cm+=n,this},km:function(){var t=this.Nm,e=this.Cm;t[e>>>2]&=4294967295<<32-e%4*8,t.length=p.ceil(e/4)},clone:function(){var t=g.clone.call(this);return t.Nm=this.Nm.slice(0),t},random:function(t){for(var e=[],i=0;i<t;i+=4)e.push(4294967296*p.random()|0);return new v.init(e,t)}}),y=f.Dm={},m=y.Mm={stringify:function(t){for(var e=t.Nm,i=t.Cm,r=[],n=0;n<i;n++){var o=e[n>>>2]>>>24-n%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,i=[],r=0;r<e;r+=2)i[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new v.init(i,e/2)}},E=y.jm={stringify:function(t){for(var e=t.Nm,i=t.Cm,r=[],n=0;n<i;n++){var o=e[n>>>2]>>>24-n%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,i=[],r=0;r<e;r++)i[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new v.init(i,e)}},w=y.Pm={stringify:function(t){try{return decodeURIComponent(escape(E.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return E.parse(unescape(encodeURIComponent(t)))}},b=d.Hm=g.extend({reset:function(){this.Lm=new v.init,this.Um=0},Fm:function(t){"string"==typeof t&&(t=w.parse(t)),this.Lm.concat(t),this.Um+=t.Cm},Gm:function(t){var e=this.Lm,i=e.Nm,r=e.Cm,n=this.blockSize,o=r/(4*n),s=(o=t?p.ceil(o):p.max((0|o)-this.xm,0))*n,a=p.min(4*s,r);if(s){for(var u=0;u<s;u+=n)this.Bm(i,u);var h=i.splice(0,s);e.Cm-=a}return new v.init(h,a)},clone:function(){var t=g.clone.call(this);return t.Lm=this.Lm.clone(),t},xm:0}),d.Vm=b.extend({qm:g.extend(),init:function(t){this.qm=this.qm.extend(t),this.reset()},reset:function(){b.reset.call(this),this.Qm()},update:function(t){return this.Fm(t),this.Gm(),this},Wm:function(t){return t&&this.Fm(t),this.Ym()},blockSize:16,Km:function(t){return function(e,i){return new t.init(i).Wm(e)}},$m:function(t){return function(e,i){return new S.Xm.init(t,i).Wm(e)}}}),S=f.Jm={},f);function R(){}!function(t){function e(t,e,i,r,n,o,s){return((t=t+(e&i|~e&r)+n+s)<<o|t>>>32-o)+e}function i(t,e,i,r,n,o,s){return((t=t+(e&r|i&~r)+n+s)<<o|t>>>32-o)+e}function r(t,e,i,r,n,o,s){return((t=t+(e^i^r)+n+s)<<o|t>>>32-o)+e}function n(t,e,i,r,n,o,s){return((t=t+(i^(e|~r))+n+s)<<o|t>>>32-o)+e}for(var o=A,s=(u=o._v).Iv,a=u.Vm,u=o.Jm,h=[],c=0;c<64;c++)h[c]=4294967296*t.abs(t.sin(c+1))|0;u=u.Nv=a.extend({Qm:function(){this.zm=new s.init([1732584193,4023233417,2562383102,271733878])},Bm:function(t,o){for(var s=0;s<16;s++){var a=t[l=o+s];t[l]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}s=this.zm.Nm;var u,c,l=t[o+0],p=(a=t[o+1],t[o+2]),f=t[o+3],d=t[o+4],g=t[o+5],v=t[o+6],y=t[o+7],m=t[o+8],E=t[o+9],w=t[o+10],b=t[o+11],S=t[o+12],T=t[o+13],I=t[o+14],_=t[o+15],P=s[0],O=n(O=n(O=n(O=n(O=r(O=r(O=r(O=r(O=i(O=i(O=i(O=i(O=e(O=e(O=e(O=e(O=s[1],c=e(c=s[2],u=e(u=s[3],P=e(P,O,c,u,l,7,h[0]),O,c,a,12,h[1]),P,O,p,17,h[2]),u,P,f,22,h[3]),c=e(c,u=e(u,P=e(P,O,c,u,d,7,h[4]),O,c,g,12,h[5]),P,O,v,17,h[6]),u,P,y,22,h[7]),c=e(c,u=e(u,P=e(P,O,c,u,m,7,h[8]),O,c,E,12,h[9]),P,O,w,17,h[10]),u,P,b,22,h[11]),c=e(c,u=e(u,P=e(P,O,c,u,S,7,h[12]),O,c,T,12,h[13]),P,O,I,17,h[14]),u,P,_,22,h[15]),c=i(c,u=i(u,P=i(P,O,c,u,a,5,h[16]),O,c,v,9,h[17]),P,O,b,14,h[18]),u,P,l,20,h[19]),c=i(c,u=i(u,P=i(P,O,c,u,g,5,h[20]),O,c,w,9,h[21]),P,O,_,14,h[22]),u,P,d,20,h[23]),c=i(c,u=i(u,P=i(P,O,c,u,E,5,h[24]),O,c,I,9,h[25]),P,O,f,14,h[26]),u,P,m,20,h[27]),c=i(c,u=i(u,P=i(P,O,c,u,T,5,h[28]),O,c,p,9,h[29]),P,O,y,14,h[30]),u,P,S,20,h[31]),c=r(c,u=r(u,P=r(P,O,c,u,g,4,h[32]),O,c,m,11,h[33]),P,O,b,16,h[34]),u,P,I,23,h[35]),c=r(c,u=r(u,P=r(P,O,c,u,a,4,h[36]),O,c,d,11,h[37]),P,O,y,16,h[38]),u,P,w,23,h[39]),c=r(c,u=r(u,P=r(P,O,c,u,T,4,h[40]),O,c,l,11,h[41]),P,O,f,16,h[42]),u,P,v,23,h[43]),c=r(c,u=r(u,P=r(P,O,c,u,E,4,h[44]),O,c,S,11,h[45]),P,O,_,16,h[46]),u,P,p,23,h[47]),c=n(c,u=n(u,P=n(P,O,c,u,l,6,h[48]),O,c,y,10,h[49]),P,O,I,15,h[50]),u,P,g,21,h[51]),c=n(c,u=n(u,P=n(P,O,c,u,S,6,h[52]),O,c,f,10,h[53]),P,O,w,15,h[54]),u,P,a,21,h[55]),c=n(c,u=n(u,P=n(P,O,c,u,m,6,h[56]),O,c,_,10,h[57]),P,O,v,15,h[58]),u,P,T,21,h[59]),c=n(c,u=n(u,P=n(P,O,c,u,d,6,h[60]),O,c,b,10,h[61]),P,O,p,15,h[62]),u,P,E,21,h[63]);s[0]=s[0]+P|0,s[1]=s[1]+O|0,s[2]=s[2]+c|0,s[3]=s[3]+u|0},Ym:function(){var e=this.Lm,i=e.Nm,r=8*this.Um,n=8*e.Cm;i[n>>>5]|=128<<24-n%32;var o=t.floor(r/4294967296);for(i[15+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.Cm=4*(i.length+1),this.Gm(),i=(e=this.zm).Nm,r=0;r<4;r++)n=i[r],i[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var t=a.clone.call(this);return t.zm=this.zm.clone(),t}}),o.Nv=a.Km(u),o.Zm=a.$m(u)}(Math),I=(O=(T=A)._v).Iv,_=O.Vm,P=[],O=T.Jm.tO=_.extend({Qm:function(){this.zm=new I.init([1732584193,4023233417,2562383102,271733878,3285377520])},Bm:function(t,e){for(var i=this.zm.Nm,r=i[0],n=i[1],o=i[2],s=i[3],a=i[4],u=0;u<80;u++){if(u<16)P[u]=0|t[e+u];else{var h=P[u-3]^P[u-8]^P[u-14]^P[u-16];P[u]=h<<1|h>>>31}h=(r<<5|r>>>27)+a+P[u],h=u<20?h+(1518500249+(n&o|~n&s)):u<40?h+(1859775393+(n^o^s)):u<60?h+((n&o|n&s|o&s)-1894007588):h+((n^o^s)-899497514),a=s,s=o,o=n<<30|n>>>2,n=r,r=h}i[0]=i[0]+r|0,i[1]=i[1]+n|0,i[2]=i[2]+o|0,i[3]=i[3]+s|0,i[4]=i[4]+a|0},Ym:function(){var t=this.Lm,e=t.Nm,i=8*this.Um,r=8*t.Cm;return e[r>>>5]|=128<<24-r%32,e[14+(64+r>>>9<<4)]=Math.floor(i/4294967296),e[15+(64+r>>>9<<4)]=i,t.Cm=4*e.length,this.Gm(),this.zm},clone:function(){var t=_.clone.call(this);return t.zm=this.zm.clone(),t}}),T.tO=_.Km(O),T.iO=_.$m(O);
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
*/
var C;function N(t){var e,i,r,n="",o=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e)(r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t.charAt(e)))<0||(o=0==o?(n+=B(r>>2),i=3&r,1):1==o?(n+=B(i<<2|r>>4),i=15&r,2):2==o?(n+=B(i),n+=B(r>>2),i=3&r,3):(n+=B(i<<2|r>>4),n+=B(15&r),0));return 1==o&&(n+=B(i<<2)),n}function k(t,e,i){null!=t&&("number"==typeof t?this.nO(t,e,i):null==e&&"string"!=typeof t?this.rO(t,256):this.rO(t,e))}function D(){return new k(null)}C="Microsoft Internet Explorer"==h.appName?(k.prototype.sO=function(t,e,i,r,n,o){for(var s=32767&e,a=e>>15;0<=--o;){var u=32767&this[t],h=this[t++]>>15,c=a*u+h*s;n=((u=s*u+((32767&c)<<15)+i[r]+(1073741823&n))>>>30)+(c>>>15)+a*h+(n>>>30),i[r++]=1073741823&u}return n},30):"Netscape"!=h.appName?(k.prototype.sO=function(t,e,i,r,n,o){for(;0<=--o;){var s=e*this[t++]+i[r]+n;n=Math.floor(s/67108864),i[r++]=67108863&s}return n},26):(k.prototype.sO=function(t,e,i,r,n,o){for(var s=16383&e,a=e>>14;0<=--o;){var u=16383&this[t],h=this[t++]>>14,c=a*u+h*s;n=((u=s*u+((16383&c)<<14)+i[r]+n)>>28)+(c>>14)+a*h,i[r++]=268435455&u}return n},28),k.prototype.eO=C,k.prototype.hO=(1<<C)-1,k.prototype.oO=1<<C,k.prototype.uO=Math.pow(2,52),k.prototype.aO=52-C,k.prototype.fO=2*C-52;var L,x,M=new Array;for(L="0".charCodeAt(0),x=0;x<=9;++x)M[L++]=x;for(L="a".charCodeAt(0),x=10;x<36;++x)M[L++]=x;for(L="A".charCodeAt(0),x=10;x<36;++x)M[L++]=x;function B(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function H(t){var e=D();return e.cO(t),e}function U(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function j(t){this.lO=t}function F(t){this.lO=t,this.vO=t.dO(),this.EO=32767&this.vO,this.pO=this.vO>>15,this.wO=(1<<t.eO-15)-1,this.gO=2*t.t}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
*/function V(t,e){return new k(t,e)}function G(t,e,i){for(var r="",n=0;r.length<e;)r+=i(String.fromCharCode.apply(String,t.concat([(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n]))),n+=1;return r}j.prototype.bO=function(t){return t.yO<0||0<=t.TO(this.lO)?t.mO(this.lO):t},j.prototype.OO=function(t){return t},j.prototype.reduce=function(t){t.SO(this.lO,null,t)},j.prototype.RO=function(t,e,i){t.IO(e,i),this.reduce(i)},j.prototype._O=function(t,e){t.AO(e),this.reduce(e)},F.prototype.bO=function(t){var e=D();return t.abs().NO(this.lO.t,e),e.SO(this.lO,null,e),t.yO<0&&0<e.TO(k.ZERO)&&this.lO.CO(e,e),e},F.prototype.OO=function(t){var e=D();return t.kO(e),this.reduce(e),e},F.prototype.reduce=function(t){for(;t.t<=this.gO;)t[t.t++]=0;for(var e=0;e<this.lO.t;++e){var i=32767&t[e],r=i*this.EO+((i*this.pO+(t[e]>>15)*this.EO&this.wO)<<15)&t.hO;for(t[i=e+this.lO.t]+=this.lO.sO(0,r,t,e,0,this.lO.t);t[i]>=t.oO;)t[i]-=t.oO,t[++i]++}t.km(),t.DO(this.lO.t,t),0<=t.TO(this.lO)&&t.CO(this.lO,t)},F.prototype.RO=function(t,e,i){t.IO(e,i),this.reduce(i)},F.prototype._O=function(t,e){t.AO(e),this.reduce(e)},k.prototype.kO=function(t){for(var e=this.t-1;0<=e;--e)t[e]=this[e];t.t=this.t,t.yO=this.yO},k.prototype.cO=function(t){this.t=1,this.yO=t<0?-1:0,0<t?this[0]=t:t<-1?this[0]=t+this.oO:this.t=0},k.prototype.rO=function(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.MO(t,e);i=2}this.t=0,this.yO=0;for(var r,n,o=t.length,s=!1,a=0;0<=--o;){var u=8==i?255&t[o]:(r=o,null==(n=M[t.charCodeAt(r)])?-1:n);u<0?"-"==t.charAt(o)&&(s=!0):(s=!1,0==a?this[this.t++]=u:a+i>this.eO?(this[this.t-1]|=(u&(1<<this.eO-a)-1)<<a,this[this.t++]=u>>this.eO-a):this[this.t-1]|=u<<a,(a+=i)>=this.eO&&(a-=this.eO))}8==i&&0!=(128&t[0])&&(this.yO=-1,0<a&&(this[this.t-1]|=(1<<this.eO-a)-1<<a)),this.km(),s&&k.ZERO.CO(this,this)},k.prototype.km=function(){for(var t=this.yO&this.hO;0<this.t&&this[this.t-1]==t;)--this.t},k.prototype.NO=function(t,e){var i;for(i=this.t-1;0<=i;--i)e[i+t]=this[i];for(i=t-1;0<=i;--i)e[i]=0;e.t=this.t+t,e.yO=this.yO},k.prototype.DO=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.yO=this.yO},k.prototype.jO=function(t,e){var i,r=t%this.eO,n=this.eO-r,o=(1<<n)-1,s=Math.floor(t/this.eO),a=this.yO<<r&this.hO;for(i=this.t-1;0<=i;--i)e[i+s+1]=this[i]>>n|a,a=(this[i]&o)<<r;for(i=s-1;0<=i;--i)e[i]=0;e[s]=a,e.t=this.t+s+1,e.yO=this.yO,e.km()},k.prototype.PO=function(t,e){e.yO=this.yO;var i=Math.floor(t/this.eO);if(i>=this.t)e.t=0;else{var r=t%this.eO,n=this.eO-r,o=(1<<r)-1;e[0]=this[i]>>r;for(var s=i+1;s<this.t;++s)e[s-i-1]|=(this[s]&o)<<n,e[s-i]=this[s]>>r;0<r&&(e[this.t-i-1]|=(this.yO&o)<<n),e.t=this.t-i,e.km()}},k.prototype.CO=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]-t[i],e[i++]=r&this.hO,r>>=this.eO;if(t.t<this.t){for(r-=t.yO;i<this.t;)r+=this[i],e[i++]=r&this.hO,r>>=this.eO;r+=this.yO}else{for(r+=this.yO;i<t.t;)r-=t[i],e[i++]=r&this.hO,r>>=this.eO;r-=t.yO}e.yO=r<0?-1:0,r<-1?e[i++]=this.oO+r:0<r&&(e[i++]=r),e.t=i,e.km()},k.prototype.IO=function(t,e){var i=this.abs(),r=t.abs(),n=i.t;for(e.t=n+r.t;0<=--n;)e[n]=0;for(n=0;n<r.t;++n)e[n+i.t]=i.sO(0,r[n],e,n,0,i.t);e.yO=0,e.km(),this.yO!=t.yO&&k.ZERO.CO(e,e)},k.prototype.AO=function(t){for(var e=this.abs(),i=t.t=2*e.t;0<=--i;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.sO(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.sO(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.oO&&(t[i+e.t]-=e.oO,t[i+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.sO(i,e[i],t,2*i,0,1)),t.yO=0,t.km()},k.prototype.SO=function(t,e,i){var r=t.abs();if(!(r.t<=0)){var n=this.abs();if(n.t<r.t)return null!=e&&e.cO(0),void(null!=i&&this.kO(i));null==i&&(i=D());var o=D(),s=this.yO,a=t.yO,u=this.eO-U(r[r.t-1]);0<u?(r.jO(u,o),n.jO(u,i)):(r.kO(o),n.kO(i));var h=o.t,c=o[h-1];if(0!=c){var l=c*(1<<this.aO)+(1<h?o[h-2]>>this.fO:0),p=this.uO/l,f=(1<<this.aO)/l,d=1<<this.fO,g=i.t,v=g-h,y=null==e?D():e;for(o.NO(v,y),0<=i.TO(y)&&(i[i.t++]=1,i.CO(y,i)),k.ONE.NO(h,y),y.CO(o,o);o.t<h;)o[o.t++]=0;for(;0<=--v;){var m=i[--g]==c?this.hO:Math.floor(i[g]*p+(i[g-1]+d)*f);if((i[g]+=o.sO(0,m,i,v,0,h))<m)for(o.NO(v,y),i.CO(y,i);i[g]<--m;)i.CO(y,i)}null!=e&&(i.DO(h,e),s!=a&&k.ZERO.CO(e,e)),i.t=h,i.km(),0<u&&i.PO(u,i),s<0&&k.ZERO.CO(i,i)}}},k.prototype.dO=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return 0<(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.oO)%this.oO)?this.oO-e:-e},k.prototype.HO=function(){return 0==(0<this.t?1&this[0]:this.yO)},k.prototype.exp=function(t,e){if(4294967295<t||t<1)return k.ONE;var i=D(),r=D(),n=e.bO(this),o=U(t)-1;for(n.kO(i);0<=--o;)if(e._O(i,r),0<(t&1<<o))e.RO(r,n,i);else{var s=i;i=r,r=s}return e.OO(i)},k.prototype.toString=function(t){if(this.yO<0)return"-"+this.LO().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.UO(t);e=2}var i,r=(1<<e)-1,n=!1,o="",s=this.t,a=this.eO-s*this.eO%e;if(0<s--)for(a<this.eO&&0<(i=this[s]>>a)&&(n=!0,o=B(i));0<=s;)a<e?(i=(this[s]&(1<<a)-1)<<e-a,i|=this[--s]>>(a+=this.eO-e)):(i=this[s]>>(a-=e)&r,a<=0&&(a+=this.eO,--s)),0<i&&(n=!0),n&&(o+=B(i));return n?o:"0"},k.prototype.LO=function(){var t=D();return k.ZERO.CO(this,t),t},k.prototype.abs=function(){return this.yO<0?this.LO():this},k.prototype.TO=function(t){var e=this.yO-t.yO;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.yO<0?-e:e;for(;0<=--i;)if(0!=(e=this[i]-t[i]))return e;return 0},k.prototype.FO=function(){return this.t<=0?0:this.eO*(this.t-1)+U(this[this.t-1]^this.yO&this.hO)},k.prototype.mO=function(t){var e=D();return this.abs().SO(t,null,e),this.yO<0&&0<e.TO(k.ZERO)&&t.CO(e,e),e},k.prototype.GO=function(t,e){var i;return i=t<256||e.HO()?new j(e):new F(e),this.exp(t,i)},k.ZERO=H(0),k.ONE=H(1);function q(){this.n=null,this.e=0,this.d=null,this.xO=null,this.BO=null,this.VO=null,this.qO=null,this.QO=null}q.prototype.WO=function(t){return t.GO(this.e,this.n)},q.prototype.YO=function(t,e){this.KO=!0,"string"!=typeof t?(this.n=t,this.e=e):null!=t&&null!=e&&0<t.length&&0<e.length?(this.n=V(t,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")},q.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var i=new Array,r=t.length-1;0<=r&&0<e;){var n=t.charCodeAt(r--);n<128?i[--e]=n:127<n&&n<2048?(i[--e]=63&n|128,i[--e]=n>>6|192):(i[--e]=63&n|128,i[--e]=n>>6&63|128,i[--e]=n>>12|224)}i[--e]=0;for(var o=new SecureRandom,s=new Array;2<e;){for(s[0]=0;0==s[0];)o.$O(s);i[--e]=s[0]}return i[--e]=2,i[--e]=0,new k(i)}(t,this.n.FO()+7>>3);if(null==e)return null;var i=this.WO(e);if(null==i)return null;var r=i.toString(16);return 0==(1&r.length)?r:"0"+r},q.prototype.XO=function(t,e){var i=function(t,e,i){if(t.length+40+2>e)throw"Message too long for RSA";var r,n="";for(r=0;r<e-t.length-40-2;r+=1)n+="\0";var o=rstr_sha1("")+n+""+t,s=new Array(20);(new SecureRandom).$O(s);var a=G(s,o.length,i||rstr_sha1),u=[];for(r=0;r<o.length;r+=1)u[r]=o.charCodeAt(r)^a.charCodeAt(r);var h=G(u,s.length,rstr_sha1),c=[0];for(r=0;r<s.length;r+=1)c[r+1]=s[r]^h.charCodeAt(r);return new k(c.concat(u))}(t,this.n.FO()+7>>3,e);if(null==i)return null;var r=this.WO(i);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},q.prototype.type="RSA",
/*! asn1-1.0.9.js (c) 2013-2015 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
void 0!==i&&i||(i={}),void 0!==i.JO&&i.JO||(i.JO={}),i.JO.zO=new function(){this.ZO=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.tS=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var i=e.substr(1).length;i%2==1?i+=1:e.match(/^[0-7]/)||(i+=2);for(var r="",n=0;n<i;n++)r+="f";e=new k(r,16).xor(t).add(k.ONE).toString(16).replace(/^-/,"")}return e},this.iS=function(t,e){i.JO;var r=A.Dm.Mm.parse(t),n=A.Dm.nS.stringify(r).replace(/(.{64})/g,"$1\r\n");return"-----BEGIN "+e+"-----\r\n"+(n=n.replace(/\r\n$/,""))+"\r\n-----END "+e+"-----\r\n"},this.rS=function(t){var e=i.JO,r=Object.keys(t);if(1!=r.length)throw"key of param shall be only one.";var n=r[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+n+":"))throw"undefined key: "+n;if("bool"==n)return new e.sS(t[n]);if("int"==n)return new e.eS(t[n]);if("bitstr"==n)return new e.hS(t[n]);if("octstr"==n)return new e.oS(t[n]);if("null"==n)return new e.uS(t[n]);if("oid"==n)return new e.aS(t[n]);if("enum"==n)return new e.fS(t[n]);if("utf8str"==n)return new e.cS(t[n]);if("numstr"==n)return new e.lS(t[n]);if("prnstr"==n)return new e.vS(t[n]);if("telstr"==n)return new e.dS(t[n]);if("ia5str"==n)return new e.ES(t[n]);if("utctime"==n)return new e.pS(t[n]);if("gentime"==n)return new e.wS(t[n]);if("seq"==n){for(var o=t[n],s=[],a=0;a<o.length;a++){var u=e.zO.rS(o[a]);s.push(u)}return new e.gS({bS:s})}if("set"==n){for(o=t[n],s=[],a=0;a<o.length;a++)u=e.zO.rS(o[a]),s.push(u);return new e.yS({bS:s})}if("tag"==n){var h=t[n];if("[object Array]"===Object.prototype.toString.call(h)&&3==h.length){var c=e.zO.rS(h[2]);return new e.TS({tag:h[0],mS:h[1],OS:c})}var l={};if(void 0!==h.mS&&(l.mS=h.mS),void 0!==h.tag&&(l.tag=h.tag),void 0===h.OS)throw"obj shall be specified for 'tag'.";return l.OS=e.zO.rS(h.OS),new e.TS(l)}},this.RS=function(t){return this.rS(t).IS()}},i.JO.zO._S=function(t){for(var e="",i=parseInt(t.substr(0,2),16),r=(e=Math.floor(i/40)+"."+i%40,""),n=2;n<t.length;n+=2){var o=("00000000"+parseInt(t.substr(n,2),16).toString(2)).slice(-8);r+=o.substr(1,7),"0"==o.substr(0,1)&&(e=e+"."+new k(r,2).toString(10),r="")}return e},i.JO.zO.NS=function(t){function e(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e}function i(t){var i="",r=new k(t,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var o="",s=0;s<n;s++)o+="0";for(r=o+r,s=0;s<r.length-1;s+=7){var a=r.substr(s,7);s!=r.length-7&&(a="1"+a),i+=e(parseInt(a,2))}return i}if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",n=t.split(".");r+=e(40*parseInt(n[0])+parseInt(n[1])),n.splice(0,2);for(var o=0;o<n.length;o++)r+=i(n[o]);return r},i.JO.CS=function(){this.kS=function(){if(void 0===this.DS||null==this.DS)throw"this.hV is null or undefined.";if(this.DS.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.DS;var t=this.DS.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var i=e.length/2;if(15<i)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+i).toString(16)+e},this.IS=function(){return null!=this.MS&&!this.jS||(this.DS=this.PS(),this.HS=this.kS(),this.MS=this.LS+this.HS+this.DS,this.jS=!1),this.MS},this.US=function(){return this.IS(),this.DS},this.PS=function(){return""}},i.JO.FS=function(t){i.JO.FS.gm.constructor.call(this),this.GS=function(){return this.yO},this.xS=function(t){this.MS=null,this.jS=!0,this.yO=t,this.DS=stohex(this.yO)},this.BS=function(t){this.MS=null,this.jS=!0,this.yO=null,this.DS=t},this.PS=function(){return this.DS},void 0!==t&&("string"==typeof t?this.xS(t):void 0!==t.str?this.xS(t.str):void 0!==t.VS&&this.BS(t.VS))},l.lang.extend(i.JO.FS,i.JO.CS),i.JO.qS=function(t){i.JO.qS.gm.constructor.call(this),this.QS=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.WS=function(t,e,i){var r=this.YS,n=this.QS(t),o=String(n.getFullYear());"utc"==e&&(o=o.substr(2,2));var s=o+r(String(n.getMonth()+1),2)+r(String(n.getDate()),2)+r(String(n.getHours()),2)+r(String(n.getMinutes()),2)+r(String(n.getSeconds()),2);if(!0===i){var a=n.getMilliseconds();if(0!=a){var u=r(String(a),3);s=s+"."+(u=u.replace(/[0]+$/,""))}}return s+"Z"},this.YS=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.GS=function(){return this.yO},this.xS=function(t){this.MS=null,this.jS=!0,this.yO=t,this.DS=stohex(t)},this.KS=function(t,e,i,r,n,o){var s=new Date(Date.UTC(t,e-1,i,r,n,o,0));this.$S(s)},this.PS=function(){return this.DS}},l.lang.extend(i.JO.qS,i.JO.CS),i.JO.XS=function(t){i.JO.FS.gm.constructor.call(this),this.JS=function(t){this.MS=null,this.jS=!0,this.zS=t},this.ZS=function(t){this.MS=null,this.jS=!0,this.zS.push(t)},this.zS=new Array,void 0!==t&&void 0!==t.bS&&(this.zS=t.bS)},l.lang.extend(i.JO.XS,i.JO.CS),i.JO.sS=function(){i.JO.sS.gm.constructor.call(this),this.LS="01",this.MS="0101ff"},l.lang.extend(i.JO.sS,i.JO.CS),i.JO.eS=function(t){i.JO.eS.gm.constructor.call(this),this.LS="02",this.tR=function(t){this.MS=null,this.jS=!0,this.DS=i.JO.zO.tS(t)},this.iR=function(t){var e=new k(String(t),10);this.tR(e)},this.nR=function(t){this.DS=t},this.PS=function(){return this.DS},void 0!==t&&(void 0!==t.rR?this.tR(t.rR):void 0!==t.sR?this.iR(t.sR):"number"==typeof t?this.iR(t):void 0!==t.VS&&this.nR(t.VS))},l.lang.extend(i.JO.eS,i.JO.CS),i.JO.hS=function(t){i.JO.hS.gm.constructor.call(this),this.LS="03",this.eR=function(t){this.MS=null,this.jS=!0,this.DS=t},this.hR=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;this.MS=null,this.jS=!0,this.DS=i+e},this.oR=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var i=0;i<=e;i++)t+="0";var r="";for(i=0;i<t.length-1;i+=8){var n=t.substr(i,8),o=parseInt(n,2).toString(16);1==o.length&&(o="0"+o),r+=o}this.MS=null,this.jS=!0,this.DS="0"+e+r},this.uR=function(t){for(var e="",i=0;i<t.length;i++)1==t[i]?e+="1":e+="0";this.oR(e)},this.aR=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=!1;return e},this.PS=function(){return this.DS},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.eR(t):void 0!==t.VS?this.eR(t.VS):void 0!==t.fR?this.oR(t.fR):void 0!==t.bS&&this.uR(t.bS))},l.lang.extend(i.JO.hS,i.JO.CS),i.JO.oS=function(t){i.JO.oS.gm.constructor.call(this,t),this.LS="04"},l.lang.extend(i.JO.oS,i.JO.FS),i.JO.uS=function(){i.JO.uS.gm.constructor.call(this),this.LS="05",this.MS="0500"},l.lang.extend(i.JO.uS,i.JO.CS),i.JO.aS=function(t){function e(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e}function r(t){var i="",r=new k(t,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var o="",s=0;s<n;s++)o+="0";for(r=o+r,s=0;s<r.length-1;s+=7){var a=r.substr(s,7);s!=r.length-7&&(a="1"+a),i+=e(parseInt(a,2))}return i}i.JO.aS.gm.constructor.call(this),this.LS="06",this.nR=function(t){this.MS=null,this.jS=!0,this.yO=null,this.DS=t},this.cR=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var i="",n=t.split(".");i+=e(40*parseInt(n[0])+parseInt(n[1])),n.splice(0,2);for(var o=0;o<n.length;o++)i+=r(n[o]);this.MS=null,this.jS=!0,this.yO=null,this.DS=i},this.lR=function(t){if(void 0===i.JO.ER.dR.vR[t])throw"DERObjectIdentifier oidName undefined: "+t;var e=i.JO.ER.dR.vR[t];this.cR(e)},this.PS=function(){return this.DS},void 0!==t&&("string"==typeof t&&t.match(/^[0-2].[0-9.]+$/)?this.cR(t):void 0!==i.JO.ER.dR.vR[t]?this.cR(i.JO.ER.dR.vR[t]):void 0!==t.pR?this.cR(t.pR):void 0!==t.VS?this.nR(t.VS):void 0!==t.name&&this.lR(t.name))},l.lang.extend(i.JO.aS,i.JO.CS),i.JO.fS=function(t){i.JO.fS.gm.constructor.call(this),this.LS="0a",this.tR=function(t){this.MS=null,this.jS=!0,this.DS=i.JO.zO.tS(t)},this.iR=function(t){var e=new k(String(t),10);this.tR(e)},this.nR=function(t){this.DS=t},this.PS=function(){return this.DS},void 0!==t&&(void 0!==t.sR?this.iR(t.sR):"number"==typeof t?this.iR(t):void 0!==t.VS&&this.nR(t.VS))},l.lang.extend(i.JO.fS,i.JO.CS),i.JO.cS=function(t){i.JO.cS.gm.constructor.call(this,t),this.LS="0c"},l.lang.extend(i.JO.cS,i.JO.FS),i.JO.lS=function(t){i.JO.lS.gm.constructor.call(this,t),this.LS="12"},l.lang.extend(i.JO.lS,i.JO.FS),i.JO.vS=function(t){i.JO.vS.gm.constructor.call(this,t),this.LS="13"},l.lang.extend(i.JO.vS,i.JO.FS),i.JO.dS=function(t){i.JO.dS.gm.constructor.call(this,t),this.LS="14"},l.lang.extend(i.JO.dS,i.JO.FS),i.JO.ES=function(t){i.JO.ES.gm.constructor.call(this,t),this.LS="16"},l.lang.extend(i.JO.ES,i.JO.FS),i.JO.pS=function(t){i.JO.pS.gm.constructor.call(this,t),this.LS="17",this.$S=function(t){this.MS=null,this.jS=!0,this.wR=t,this.yO=this.WS(this.wR,"utc"),this.DS=stohex(this.yO)},this.PS=function(){return void 0===this.wR&&void 0===this.yO&&(this.wR=new Date,this.yO=this.WS(this.wR,"utc"),this.DS=stohex(this.yO)),this.DS},void 0!==t&&(void 0!==t.str?this.xS(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.xS(t):void 0!==t.VS?this.BS(t.VS):void 0!==t.wR&&this.$S(t.wR))},l.lang.extend(i.JO.pS,i.JO.qS),i.JO.wS=function(t){i.JO.wS.gm.constructor.call(this,t),this.LS="18",this.gR=!1,this.$S=function(t){this.MS=null,this.jS=!0,this.wR=t,this.yO=this.WS(this.wR,"gen",this.gR),this.DS=stohex(this.yO)},this.PS=function(){return void 0===this.wR&&void 0===this.yO&&(this.wR=new Date,this.yO=this.WS(this.wR,"gen",this.gR),this.DS=stohex(this.yO)),this.DS},void 0!==t&&(void 0!==t.str?this.xS(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.xS(t):void 0!==t.VS?this.BS(t.VS):void 0!==t.wR&&this.$S(t.wR),!0===t.bR&&(this.gR=!0))},l.lang.extend(i.JO.wS,i.JO.qS),i.JO.gS=function(t){i.JO.gS.gm.constructor.call(this,t),this.LS="30",this.PS=function(){for(var t="",e=0;e<this.zS.length;e++)t+=this.zS[e].IS();return this.DS=t,this.DS}},l.lang.extend(i.JO.gS,i.JO.XS),i.JO.yS=function(t){i.JO.yS.gm.constructor.call(this,t),this.LS="31",this.yR=!0,this.PS=function(){for(var t=new Array,e=0;e<this.zS.length;e++){var i=this.zS[e];t.push(i.IS())}return 1==this.yR&&t.sort(),this.DS=t.join(""),this.DS},void 0!==t&&void 0!==t.TR&&0==t.TR&&(this.yR=!1)},l.lang.extend(i.JO.yS,i.JO.XS),i.JO.TS=function(t){i.JO.TS.gm.constructor.call(this),this.LS="a0",this.DS="",this.mR=!0,this.OR=null,this.SR=function(t,e,i){this.LS=e,this.mR=t,this.OR=i,this.mR?(this.DS=this.OR.IS(),this.MS=null,this.jS=!0):(this.DS=null,this.MS=i.IS(),this.MS=this.MS.replace(/^../,e),this.jS=!1)},this.PS=function(){return this.DS},void 0!==t&&(void 0!==t.tag&&(this.LS=t.tag),void 0!==t.mS&&(this.mR=t.mS),void 0!==t.OS&&(this.OR=t.OS,this.SR(this.mR,this.LS,this.OR)))},l.lang.extend(i.JO.TS,i.JO.CS),
/*! crypto-1.1.8.js (c) 2013-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
void 0!==i&&i||(i={}),void 0!==i.crypto&&i.crypto||(i.crypto={}),i.crypto.RR=new function(){this.IR={sha1:"3021300906052b0e03021a05000414",_R:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",AR:"3041300d060960864801650304020205000430",NR:"3051300d060960864801650304020305000440",CR:"3020300c06082a864886f70d020205000410",kR:"3020300c06082a864886f70d020505000410",DR:"3021300906052b2403020105000414"},this.MR={kR:"cryptojs",sha1:"cryptojs",_R:"cryptojs",sha256:"cryptojs",AR:"cryptojs",NR:"cryptojs",DR:"cryptojs",jR:"cryptojs",PR:"cryptojs",HR:"cryptojs",LR:"cryptojs",UR:"cryptojs",FR:"cryptojs",GR:"cryptojs",xR:"cryptojs/jsrsa",BR:"cryptojs/jsrsa",VR:"cryptojs/jsrsa",qR:"cryptojs/jsrsa",QR:"cryptojs/jsrsa",WR:"cryptojs/jsrsa",YR:"cryptojs/jsrsa",KR:"cryptojs/jsrsa",$R:"cryptojs/jsrsa",XR:"cryptojs/jsrsa",JR:"cryptojs/jsrsa",zR:"cryptojs/jsrsa",ZR:"cryptojs/jsrsa",tI:"cryptojs/jsrsa",iI:"cryptojs/jsrsa",nI:"cryptojs/jsrsa",rI:"cryptojs/jsrsa",sI:"cryptojs/jsrsa",eI:"cryptojs/jsrsa",hI:"cryptojs/jsrsa",oI:"cryptojs/jsrsa",uI:"cryptojs/jsrsa",aI:"cryptojs/jsrsa",fI:"cryptojs/jsrsa"},this.cI={kR:A.Jm.Nv,sha1:A.Jm.tO,_R:A.Jm.lI,sha256:A.Jm.vI,AR:A.Jm.dI,NR:A.Jm.EI,DR:A.Jm.pI},this.wI=function(t,e){if(void 0===this.IR[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.IR[e]+t},this.gI=function(t,e,i){var r=this.wI(t,e),n=i/4;if(r.length+22>n)throw"key is too short for SigAlg: keylen="+i+","+e;for(var o="00"+r,s="",a=n-"0001".length-o.length,u=0;u<a;u+=2)s+="ff";return"0001"+s+o},this.bI=function(t,e){return new i.crypto.TI({mI:e}).yI(t)},this.OI=function(t,e){return new i.crypto.TI({mI:e}).SI(t)},this.sha1=function(t){return new i.crypto.TI({mI:"sha1",RI:"cryptojs"}).yI(t)},this.sha256=function(t){return new i.crypto.TI({mI:"sha256",RI:"cryptojs"}).yI(t)},this.II=function(t){return new i.crypto.TI({mI:"sha256",RI:"cryptojs"}).SI(t)},this.NR=function(t){return new i.crypto.TI({mI:"sha512",RI:"cryptojs"}).yI(t)},this._I=function(t){return new i.crypto.TI({mI:"sha512",RI:"cryptojs"}).SI(t)},this.kR=function(t){return new i.crypto.TI({mI:"md5",RI:"cryptojs"}).yI(t)},this.DR=function(t){return new i.crypto.TI({mI:"ripemd160",RI:"cryptojs"}).yI(t)},this.AI=function(t){}},i.crypto.TI=function(t){this.NI=function(t,e){if(null!=t&&void 0===e&&(e=i.crypto.RR.MR[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.CI=i.crypto.RR.cI[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.kI=function(t){this.CI.update(t)},this.DI=function(t){var e=A.Dm.Mm.parse(t);this.CI.update(e)},this.digest=function(){return this.CI.Wm().toString(A.Dm.Mm)},this.yI=function(t){return this.kI(t),this.digest()},this.SI=function(t){return this.DI(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.CI=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.kI=function(t){this.CI.update(t)},this.DI=function(t){var e=sjcl.jI.VS.MI(t);this.CI.update(e)},this.digest=function(){var t=this.CI.Wm();return sjcl.jI.VS.HI(t)},this.yI=function(t){return this.kI(t),this.digest()},this.SI=function(t){return this.DI(t),this.digest()}}},this.kI=function(t){throw"updateString(str) not supported for this alg/prov: "+this.LI+"/"+this.UI},this.DI=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.LI+"/"+this.UI},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.LI+"/"+this.UI},this.yI=function(t){throw"digestString(str) not supported for this alg/prov: "+this.LI+"/"+this.UI},this.SI=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.LI+"/"+this.UI},void 0!==t&&void 0!==t.mI&&(this.LI=t.mI,void 0===t.RI&&(this.UI=i.crypto.RR.MR[this.LI]),this.NI(this.LI,this.UI))},i.crypto.FI=function(t){this.NI=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=i.crypto.RR.MR[t]),this.GI=t+"/"+e;var r=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==e){try{var n=i.crypto.RR.cI[r];this.mac=A.Jm.Xm.create(n,this.xI)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+t}this.kI=function(t){this.mac.update(t)},this.DI=function(t){var e=A.Dm.Mm.parse(t);this.mac.update(e)},this.BI=function(){return this.mac.Wm().toString(A.Dm.Mm)},this.VI=function(t){return this.kI(t),this.BI()},this.qI=function(t){return this.DI(t),this.BI()}}},this.kI=function(t){throw"updateString(str) not supported for this alg/prov: "+this.GI},this.DI=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.GI},this.BI=function(){throw"digest() not supported for this alg/prov: "+this.GI},this.VI=function(t){throw"digestString(str) not supported for this alg/prov: "+this.GI},this.qI=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.GI},this.QI=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=rstrtohex(t)),void(this.xI=A.Dm.Mm.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;if(e=null,void 0!==t.VS){if(t.VS.length%2!=0||!t.VS.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.VS;e=t.VS}if(void 0!==t.WI&&(e=utf8tohex(t.WI)),void 0!==t.YI&&(e=rstrtohex(t.YI)),void 0!==t.KI&&(e=N(t.KI)),void 0!==t.$I&&(e=b64utohex(t.$I)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.xI=A.Dm.Mm.parse(e)},void 0!==t&&(void 0!==t.xI&&this.QI(t.xI),void 0!==t.mI&&(this.LI=t.mI,void 0===t.RI&&(this.UI=i.crypto.RR.MR[this.LI]),this.NI(this.LI,this.UI)))},i.crypto.Signature=function(t){var e=null;if(this.XI=function(){this.LI.match(/^(.+)with(.+)$/)&&(this.JI=RegExp.$1.toLowerCase(),this.zI=RegExp.$2.toLowerCase())},this.ZI=function(t,e){for(var i="",r=e/4-t.length,n=0;n<r;n++)i+="0";return i+t},this.NI=function(t,e){if(this.XI(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.JI)){try{this.CI=new i.crypto.TI({mI:this.JI})}catch(t){throw"setAlgAndProvider hash alg set fail alg="+this.JI+"/"+t}this.init=function(t,e){var i=null;try{i=void 0===e?KEYUTIL.getKey(t):KEYUTIL.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===i.t_)this.i_=i,this.state="SIGN";else{if(!0!==i.KO)throw"init failed.:"+i;this.n_=i,this.state="VERIFY"}},this.r_=function(t){"string"==typeof t.s_&&"string"==typeof t.e_?(this.s_=t.s_,this.e_=t.e_):this.i_=t,this.state="SIGN"},this.h_=function(t){"string"==typeof t.o_&&"string"==typeof t.e_?(this.o_=t.o_,this.e_=t.e_):t instanceof i.crypto.u_?this.n_=t:t instanceof q&&(this.n_=t),this.state="VERIFY"},this.a_=function(t){var e=new X509;e.f_(t),this.n_=e.c_,this.state="VERIFY"},this.kI=function(t){this.CI.kI(t)},this.DI=function(t){this.CI.DI(t)},this.sign=function(){if(this.l_=this.CI.digest(),void 0!==this.s_&&void 0!==this.e_){var t=new i.crypto.u_({curve:this.e_});this.v_=t.d_(this.l_,this.s_)}else if(this.i_ instanceof q&&"rsaandmgf1"==this.zI)this.v_=this.i_.E_(this.l_,this.JI,this.p_);else if(this.i_ instanceof q&&"rsa"==this.zI)this.v_=this.i_.w_(this.l_,this.JI);else if(this.i_ instanceof i.crypto.u_)this.v_=this.i_.w_(this.l_);else{if(!(this.i_ instanceof i.crypto.g_))throw"Signature: unsupported public key alg: "+this.zI;this.v_=this.i_.w_(this.l_)}return this.v_},this.b_=function(t){return this.kI(t),this.sign()},this.d_=function(t){return this.DI(t),this.sign()},this.verify=function(t){if(this.l_=this.CI.digest(),void 0!==this.o_&&void 0!==this.e_)return new i.crypto.u_({curve:this.e_}).y_(this.l_,t,this.o_);if(this.n_ instanceof q&&"rsaandmgf1"==this.zI)return this.n_.T_(this.l_,t,this.JI,this.p_);if(this.n_ instanceof q&&"rsa"==this.zI)return this.n_.m_(this.l_,t);if(this.n_ instanceof i.crypto.u_)return this.n_.m_(this.l_,t);if(this.n_ instanceof i.crypto.g_)return this.n_.m_(this.l_,t);throw"Signature: unsupported public key alg: "+this.zI}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.O_},this.h_=function(t){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.O_},this.a_=function(t){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.O_},this.r_=function(t){throw"initSign(prvKey) not supported for this alg:prov="+this.O_},this.kI=function(t){throw"updateString(str) not supported for this alg:prov="+this.O_},this.DI=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.O_},this.sign=function(){throw"sign() not supported for this alg:prov="+this.O_},this.b_=function(t){throw"digestString(str) not supported for this alg:prov="+this.O_},this.d_=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.O_},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.O_},void 0!==(this.S_=t)&&(void 0!==t.mI&&(this.LI=t.mI,void 0===t.RI?this.UI=i.crypto.RR.MR[this.LI]:this.UI=t.RI,this.O_=this.LI+":"+this.UI,this.NI(this.LI,this.UI),this.XI()),void 0!==t.R_&&(this.p_=t.R_),void 0!==t.I_)){if(void 0!==t.__)throw"both prvkeypem and prvkeypas parameters not supported";try{(e=new q).A_(t.I_),this.r_(e)}catch(t){throw"fatal error to load pem private key: "+t}}},i.crypto.dR=new function(){this.N_={C_:"rsaEncryption",k_:"ecPublicKey",D_:"dsa",M_:"secp256r1",j_:"secp192k1",P_:"secp224r1",H_:"secp256k1",L_:"secp521r1",U_:"secp384r1",F_:"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};
/*! rsasign-1.2.7.js (c) 2012 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
var Y=new RegExp("");function W(t,e){for(var i="",r=e/4-t.length,n=0;n<r;n++)i+="0";return i+t}function J(t,e){var r,n=(r=t,i.crypto.RR.bI(r,e));return this.w_(n,e)}function Q(t){return J.call(this,t,"sha1")}function X(t){return J.call(this,t,"sha256")}function K(t,e,i){for(var r="",n=0;r.length<e;)r+=hextorstr(i(rstrtohex(t+String.fromCharCode.apply(String,[(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n])))),n+=1;return r}function $(t,e,r){var n,o=(n=rstrtohex(t),i.crypto.RR.OI(n,e));return void 0===r&&(r=-1),this.E_(o,e,r)}function z(t){for(var e in i.crypto.RR.IR){var r=i.crypto.RR.IR[e],n=r.length;if(t.substring(0,n)==r)return[e,t.substring(n)]}return[]}function Z(t,e){return function(t,e,r,n){var o=z(function(t,e,i){return function(t,e,i){var r=new q;return r.YO(e,i),r.WO(t)}(t,e,i).toString(16).replace(/^1f+00/,"")}(e,r,n));if(0==o.length)return!1;var s,a=o[0];return o[1]==(s=t,i.crypto.RR.bI(s,a))}(e,V(t,16),this.n.toString(16),this.e.toString(16))}function tt(t,e){var r=V(e=(e=e.replace(Y,"")).replace(/[ \n]+/g,""),16);if(r.FO()>this.n.FO())return 0;var n=z(this.WO(r).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;var o,s=n[0];return n[1]==(o=t,i.crypto.RR.bI(o,s))}function et(t,e,r,n){var o,s=(o=rstrtohex(t),i.crypto.RR.OI(o,r));return void 0===n&&(n=-1),this.T_(s,e,r,n)}Y.compile("[^0-9a-f]","gi"),q.prototype.w_=function(t,e){var r=V(i.crypto.RR.gI(t,e,this.n.FO()),16);return W(this.G_(r).toString(16),this.n.FO())},q.prototype.b_=J,q.prototype.x_=Q,q.prototype.B_=X,q.prototype.sign=J,q.prototype.V_=Q,q.prototype.q_=X,q.prototype.E_=function(t,e,r){function n(t){return i.crypto.RR.OI(t,e)}var o,s=hextorstr(t),a=s.length,u=this.n.FO()-1,h=Math.ceil(u/8);if(-1===r||void 0===r)r=a;else if(-2===r)r=h-a-2;else if(r<-2)throw"invalid salt length";if(h<a+r+2)throw"data too long";var c="";0<r&&(c=new Array(r),(new SecureRandom).$O(c),c=String.fromCharCode.apply(String,c));var l=hextorstr(n(rstrtohex("\0\0\0\0\0\0\0\0"+s+c))),p=[];for(o=0;o<h-r-a-2;o+=1)p[o]=0;var f=String.fromCharCode.apply(String,p)+""+c,d=K(l,f.length,n),g=[];for(o=0;o<f.length;o+=1)g[o]=f.charCodeAt(o)^d.charCodeAt(o);var v=65280>>8*h-u&255;for(g[0]&=~v,o=0;o<a;o++)g.push(l.charCodeAt(o));return g.push(188),W(this.G_(new k(g)).toString(16),this.n.FO())},q.prototype.Q_=$,q.prototype.W_=$,q.Y_=-1,q.K_=-2,q.prototype.m_=function(t,e){var i=V(e=(e=e.replace(Y,"")).replace(/[ \n]+/g,""),16);if(i.FO()>this.n.FO())return 0;var r=z(this.WO(i).toString(16).replace(/^1f+00/,""));return 0!=r.length&&(r[0],r[1]==t)},q.prototype.X_=tt,q.prototype.J_=Z,q.prototype.verify=tt,q.prototype.z_=Z,q.prototype.T_=function(t,e,r,n){var o=new k(e,16);if(o.FO()>this.n.FO())return!1;function s(t){return i.crypto.RR.OI(t,r)}var a,u=hextorstr(t),h=u.length,c=this.n.FO()-1,l=Math.ceil(c/8);if(-1===n||void 0===n)n=h;else if(-2===n)n=l-h-2;else if(n<-2)throw"invalid salt length";if(l<h+n+2)throw"data too long";var p=this.WO(o).Z_();for(a=0;a<p.length;a+=1)p[a]&=255;for(;p.length<l;)p.unshift(0);if(188!==p[l-1])throw"encoded message does not end in 0xbc";var f=(p=String.fromCharCode.apply(String,p)).substr(0,l-h-1),d=p.substr(f.length,h),g=65280>>8*l-c&255;if(0!=(f.charCodeAt(0)&g))throw"bits beyond keysize not zero";var v=K(d,f.length,s),y=[];for(a=0;a<f.length;a+=1)y[a]=f.charCodeAt(a)^v.charCodeAt(a);y[0]&=~g;var m=l-h-n-2;for(a=0;a<m;a+=1)if(0!==y[a])throw"leftmost octets not zero";if(1!==y[m])throw"0x01 marker not found";return d===hextorstr(s(rstrtohex("\0\0\0\0\0\0\0\0"+u+String.fromCharCode.apply(String,y.slice(-n)))))},q.prototype.tA=et,q.prototype.iA=et,q.nA=-2,e.rA=k,e.sA=q,e.Signature=i.crypto.Signature,e.TI=i.crypto.TI,e.Av=A,e.eA=N,e.hA=function(t){var e,i=N(t),r=new Array;for(e=0;2*e<i.length;++e)r[e]=parseInt(i.substring(2*e,2*e+2),16);return r}},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(82),a=i(83),u=(n(h,o=a.oA),h.prototype.send=function(){if(this.readyState!==this.OPENED)throw new Error("The object's state must be OPENED.");if(!this.pluginId){var t=Object.keys(h.uA);0<t.length&&(this.pluginId=h.uA[t[0]])}s.aA.Api().request(this,this.pluginId)},h.prototype.abort=function(){s.aA.Api().abort(this,this.pluginId)},h.Kv=0,h);function h(t){var e=o.call(this,t)||this;return e.DONE=4,e.LOADING=3,e.HEADERS_RECEIVED=2,e.OPENED=1,e.UNSENT=0,e.internal=!1,e.id=h.Kv++,e}e.HiveRequest=u},function(t,e,i){"use strict";i(11);var r=i(134),n=i(12),o=i(53),s=i(13);function a(t,e,i,n){if(!(this instanceof a))return new a(t,e,i,n);e=e||Object.Wh,i=i||Object.compare,n=n||Function.Yh,this.Kh=e,this.Mf=i,this.Xh=n,this.store=new r(null,(function(t,i){return e(t.key,i.key)}),(function(t,e){return i(t.key,e.key)})),this.length=0,this.hiveAddEach(t)}(t.exports=a).SortedMap=a,Object.hiveAddEach(a.prototype,n.prototype),Object.hiveAddEach(a.prototype,o.prototype),Object.hiveAddEach(a.prototype,s.prototype),a.prototype.zh=function(t){return new this.constructor(t,this.Kh,this.Mf,this.Xh)},a.prototype.log=function(t,e,i,r){e=e||this.Zh,this.store.log(t,(function(t,i,r){e(t.value,i,r)}),i,r)},a.prototype.Zh=function(t,e){e(" key: "+t.key),e(" value: "+t.value)}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(9),n=i(32),o=(s.prototype.Dp=function(){return this.fA},s.prototype.cA=function(){return this.lA},s.prototype.getDuration=function(){return this.duration},s.prototype.getBitrate=function(){return this.bitrate},s.prototype.Gp=function(){return this.vA},s.prototype.dA=function(){return this.EA},s.prototype.jp=function(){return this.pA},s.prototype.Up=function(){return this.url},s.prototype.toString=function(){return r.wf[this.Dp()]+"-"+this.jp()},s);function s(t,e,i,r,o,s,a,u){this.contextId=u,this.url=t,this.EA=i,this.fA=e,this.lA=r,this.duration=o,this.bitrate=s,this.vA=a;var h=(this.contextId?this.contextId:this.url).replace(/http(s)?:\/\//,""),c=n.Av.tO(h).toString(n.Av.Dm.Mm);this.pA=c+"-"+this.lA+"-"+this.bitrate}e.wA=o},function(t,e,i){var r,n,o;
/**
 * @license ByteBuffer.js (c) 2015 Daniel Wirtz <dcode@dcode.io>
 * [BUILD] ByteBufferAB - Backing buffer: ArrayBuffer, Accessor: Uint8Array
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ByteBuffer.js for details
 */n=[i(160)],void 0===(o="function"==typeof(r=function(t){"use strict";var e=function(t,i,n){if(void 0===t&&(t=e.gA),void 0===i&&(i=e.bA),void 0===n&&(n=e.yA),!n){if((t|=0)<0)throw RangeError("Illegal capacity");i=!!i,n=!!n}this.buffer=0===t?r:new ArrayBuffer(t),this.view=0===t?null:new Uint8Array(this.buffer),this.offset=0,this.TA=-1,this.mA=t,this.OA=void 0!==i&&!!i,this.SA=!!n};e.VERSION="4.1.0",e.RA=!0,e.IA=!1,e.gA=16,e.bA=e.IA,e.yA=!1,e._A=t||null;var i=e.prototype;i.AA,Object.defineProperty(i,"AA",{value:!0,enumerable:!1,configurable:!1});var r=new ArrayBuffer(0),n=String.fromCharCode;function o(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function s(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+n.apply(String,t);1024<t.length+arguments.length&&(e.push(n.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}function a(t,e,i,r,n){var o,s,a=8*n-r-1,u=(1<<a)-1,h=u>>1,c=-7,l=i?n-1:0,p=i?-1:1,f=t[e+l];for(l+=p,o=f&(1<<-c)-1,f>>=-c,c+=a;0<c;o=256*o+t[e+l],l+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;0<c;s=256*s+t[e+l],l+=p,c-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=h}return(f?-1:1)*s*Math.pow(2,o-r)}function u(t,e,i,r,n,o){var s,a,u,h=8*o-n-1,c=(1<<h)-1,l=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(e+=1<=s+l?p/u:p*Math.pow(2,1-l))*u&&(s++,u/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(e*u-1)*Math.pow(2,n),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,n),s=0));8<=n;t[i+f]=255&a,f+=d,a/=256,n-=8);for(s=s<<n|a,h+=n;0<h;t[i+f]=255&s,f+=d,s/=256,h-=8);t[i+f-d]|=128*g}e.NA=function(){return Uint8Array},e.CA=function(t,i,r){return new e(t,i,r)},e.concat=function(t,i,r,n){"boolean"!=typeof i&&"string"==typeof i||(n=r,r=i,i=void 0);for(var o,s=0,a=0,u=t.length;a<u;++a)e.kA(t[a])||(t[a]=e.wrap(t[a],i)),0<(o=t[a].mA-t[a].offset)&&(s+=o);if(0===s)return new e(0,r,n);var h,c=new e(s,r,n);for(a=0;a<u;)(o=(h=t[a++]).mA-h.offset)<=0||(c.view.set(h.view.subarray(h.offset,h.mA),c.offset),c.offset+=o);return c.mA=c.offset,c.offset=0,c},e.kA=function(t){return!0===(t&&t.AA)},e.type=function(){return ArrayBuffer},e.wrap=function(t,r,n,o){if("string"!=typeof r&&(o=n,n=r,r=void 0),"string"==typeof t)switch(void 0===r&&(r="utf8"),r){case"base64":return e.DA(t,n);case"hex":return e.MA(t,n);case"binary":return e.jA(t,n);case"utf8":return e.PA(t,n);case"debug":return e.HA(t,n);default:throw Error("Unsupported encoding: "+r)}if(null===t||"object"!=typeof t)throw TypeError("Illegal buffer");var s;if(e.kA(t))return(s=i.clone.call(t)).TA=-1,s;if(t instanceof Uint8Array)s=new e(0,n,o),0<t.length&&(s.buffer=t.buffer,s.offset=t.byteOffset,s.mA=t.byteOffset+t.byteLength,s.view=new Uint8Array(t.buffer));else if(t instanceof ArrayBuffer)s=new e(0,n,o),0<t.byteLength&&(s.buffer=t,s.offset=0,s.mA=t.byteLength,s.view=0<t.byteLength?new Uint8Array(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");(s=new e(t.length,n,o)).mA=t.length;for(var a=0;a<t.length;++a)s.view[a]=t[a]}return s},i.LA=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+t+") <= "+this.buffer.byteLength)}var r=this.slice(e,e+t);return i&&(this.offset+=t),r},i.UA=i.append,i.FA=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=1,this.view[e]=t,i&&(this.offset+=1),this},i.Qg=i.FA,i.GA=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view[t];return 128==(128&i)&&(i=-(255-i+1)),e&&(this.offset+=1),i},i.lb=i.GA,i.xA=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=1,this.view[e]=t,i&&(this.offset+=1),this},i.BA=i.xA,i.VA=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view[t];return e&&(this.offset+=1),i},i.qA=i.VA,i.QA=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=2,this.OA?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),i&&(this.offset+=2),this},i.WA=i.QA,i.YA=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.OA?(i=this.view[t],i|=this.view[t+1]<<8):(i=this.view[t]<<8,i|=this.view[t+1]),32768==(32768&i)&&(i=-(65535-i+1)),e&&(this.offset+=2),i},i.KA=i.YA,i.$A=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=2,this.OA?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),i&&(this.offset+=2),this},i.XA=i.$A,i.JA=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.OA?(i=this.view[t],i|=this.view[t+1]<<8):(i=this.view[t]<<8,i|=this.view[t+1]),e&&(this.offset+=2),i},i.zA=i.JA,i.ZA=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=4,this.OA?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),i&&(this.offset+=4),this},i.Cv=i.ZA,i.tN=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.OA?(i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0),i|=0,e&&(this.offset+=4),i},i.Fv=i.tN,i.iN=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=4,this.OA?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),i&&(this.offset+=4),this},i.nN=i.iN,i.rN=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.OA?(i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0),e&&(this.offset+=4),i},i.sN=i.rN,t&&(i.eN=function(e,i){var r=void 0===i;if(r&&(i=this.offset),!this.SA){if("number"==typeof e)e=t.nO(e);else if("string"==typeof e)e=t.rO(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.nO(e):"string"==typeof e&&(e=t.rO(e)),i+=8;var n=this.buffer.byteLength;n<i&&this.resize((n*=2)>i?n:i),i-=8;var o=e.low,s=e.high;return this.OA?(this.view[i+3]=o>>>24&255,this.view[i+2]=o>>>16&255,this.view[i+1]=o>>>8&255,this.view[i]=255&o,i+=4,this.view[i+3]=s>>>24&255,this.view[i+2]=s>>>16&255,this.view[i+1]=s>>>8&255,this.view[i]=255&s):(this.view[i]=s>>>24&255,this.view[i+1]=s>>>16&255,this.view[i+2]=s>>>8&255,this.view[i+3]=255&s,i+=4,this.view[i]=o>>>24&255,this.view[i+1]=o>>>16&255,this.view[i+2]=o>>>8&255,this.view[i+3]=255&o),r&&(this.offset+=8),this},i.hN=i.eN,i.oN=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var r=0,n=0;this.OA?(r=this.view[e+2]<<16,r|=this.view[e+1]<<8,r|=this.view[e],r+=this.view[e+3]<<24>>>0,e+=4,n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0,e+=4,r=this.view[e+1]<<16,r|=this.view[e+2]<<8,r|=this.view[e+3],r+=this.view[e]<<24>>>0);var o=new t(r,n,!1);return i&&(this.offset+=8),o},i.uN=i.oN,i.aN=function(e,i){var r=void 0===i;if(r&&(i=this.offset),!this.SA){if("number"==typeof e)e=t.nO(e);else if("string"==typeof e)e=t.rO(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.nO(e):"string"==typeof e&&(e=t.rO(e)),i+=8;var n=this.buffer.byteLength;n<i&&this.resize((n*=2)>i?n:i),i-=8;var o=e.low,s=e.high;return this.OA?(this.view[i+3]=o>>>24&255,this.view[i+2]=o>>>16&255,this.view[i+1]=o>>>8&255,this.view[i]=255&o,i+=4,this.view[i+3]=s>>>24&255,this.view[i+2]=s>>>16&255,this.view[i+1]=s>>>8&255,this.view[i]=255&s):(this.view[i]=s>>>24&255,this.view[i+1]=s>>>16&255,this.view[i+2]=s>>>8&255,this.view[i+3]=255&s,i+=4,this.view[i]=o>>>24&255,this.view[i+1]=o>>>16&255,this.view[i+2]=o>>>8&255,this.view[i+3]=255&o),r&&(this.offset+=8),this},i.fN=i.aN,i.cN=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var r=0,n=0;this.OA?(r=this.view[e+2]<<16,r|=this.view[e+1]<<8,r|=this.view[e],r+=this.view[e+3]<<24>>>0,e+=4,n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0,e+=4,r=this.view[e+1]<<16,r|=this.view[e+2]<<8,r|=this.view[e+3],r+=this.view[e]<<24>>>0);var o=new t(r,n,!0);return i&&(this.offset+=8),o},i.lN=i.cN),i.vN=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=4,u(this.view,t,e,this.OA,23,4),i&&(this.offset+=4),this},i.dN=i.vN,i.EN=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=a(this.view,t,this.OA,23,4);return e&&(this.offset+=4),i},i.pN=i.EN,i.wN=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=8,u(this.view,t,e,this.OA,52,8),i&&(this.offset+=8),this},i.Kg=i.wN,i.gN=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=a(this.view,t,this.OA,52,8);return e&&(this.offset+=8),i},i.pb=i.gN,e.bN=5,e.yN=function(t){return(t>>>=0)<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},e.TN=function(t){return((t|=0)<<1^t>>31)>>>0},e.mN=function(t){return t>>>1^-(1&t)|0},i.ON=function(t,i){var r=void 0===i;if(r&&(i=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var n,o=e.yN(t);i+=o;var s=this.buffer.byteLength;for(s<i&&this.resize((s*=2)>i?s:i),i-=o,t>>>=0;128<=t;)n=127&t|128,this.view[i++]=n,t>>>=7;return this.view[i++]=t,r?(this.offset=i,this):o},i.SN=function(t,i){return this.ON(e.TN(t),i)},i.RN=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=0,n=0;do{if(!this.SA&&t>this.mA){var o=Error("Truncated");throw o.IN=!0,o}i=this.view[t++],r<5&&(n|=(127&i)<<7*r),++r}while(0!=(128&i));return n|=0,e?(this.offset=t,n):{value:n,length:r}},i._N=function(t){var i=this.RN(t);return"object"==typeof i?i.value=e.mN(i.value):i=e.mN(i),i},t&&(e.AN=10,e.NN=function(e){"number"==typeof e?e=t.nO(e):"string"==typeof e&&(e=t.rO(e));var i=e.CN()>>>0,r=e.kN(28).CN()>>>0,n=e.kN(56).CN()>>>0;return 0==n?0==r?i<16384?i<128?1:2:i<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:n<128?9:10},e.DN=function(e){return"number"==typeof e?e=t.nO(e,!1):"string"==typeof e?e=t.rO(e,!1):!1!==e.MN&&(e=e.jN()),e.shiftLeft(1).xor(e.HN(63)).PN()},e.LN=function(e){return"number"==typeof e?e=t.nO(e,!1):"string"==typeof e?e=t.rO(e,!1):!1!==e.MN&&(e=e.jN()),e.kN(1).xor(e.and(t.ONE).jN().LO()).jN()},i.UN=function(i,r){var n=void 0===r;if(n&&(r=this.offset),!this.SA){if("number"==typeof i)i=t.nO(i);else if("string"==typeof i)i=t.rO(i);else if(!(i&&i instanceof t))throw TypeError("Illegal value: "+i+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof i?i=t.nO(i,!1):"string"==typeof i?i=t.rO(i,!1):!1!==i.MN&&(i=i.jN());var o=e.NN(i),s=i.CN()>>>0,a=i.kN(28).CN()>>>0,u=i.kN(56).CN()>>>0;r+=o;var h=this.buffer.byteLength;switch(h<r&&this.resize((h*=2)>r?h:r),r-=o,o){case 10:this.view[r+9]=u>>>7&1;case 9:this.view[r+8]=9!==o?128|u:127&u;case 8:this.view[r+7]=8!==o?a>>>21|128:a>>>21&127;case 7:this.view[r+6]=7!==o?a>>>14|128:a>>>14&127;case 6:this.view[r+5]=6!==o?a>>>7|128:a>>>7&127;case 5:this.view[r+4]=5!==o?128|a:127&a;case 4:this.view[r+3]=4!==o?s>>>21|128:s>>>21&127;case 3:this.view[r+2]=3!==o?s>>>14|128:s>>>14&127;case 2:this.view[r+1]=2!==o?s>>>7|128:s>>>7&127;case 1:this.view[r]=1!==o?128|s:127&s}return n?(this.offset+=o,this):o},i.FN=function(t,i){return this.UN(e.DN(t),i)},i.GN=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=e,n=0,o=0,s=0,a=0;if(n=127&(a=this.view[e++]),128&a&&(n|=(127&(a=this.view[e++]))<<7,(128&a||this.SA&&void 0===a)&&(n|=(127&(a=this.view[e++]))<<14,(128&a||this.SA&&void 0===a)&&(n|=(127&(a=this.view[e++]))<<21,(128&a||this.SA&&void 0===a)&&(o=127&(a=this.view[e++]),(128&a||this.SA&&void 0===a)&&(o|=(127&(a=this.view[e++]))<<7,(128&a||this.SA&&void 0===a)&&(o|=(127&(a=this.view[e++]))<<14,(128&a||this.SA&&void 0===a)&&(o|=(127&(a=this.view[e++]))<<21,(128&a||this.SA&&void 0===a)&&(s=127&(a=this.view[e++]),(128&a||this.SA&&void 0===a)&&(s|=(127&(a=this.view[e++]))<<7,128&a||this.SA&&void 0===a))))))))))throw Error("Buffer overrun");var u=t.HI(n|o<<28,o>>>4|s<<24,!1);return i?(this.offset=e,u):{value:u,length:e-r}},i.xN=function(i){var r=this.GN(i);return r&&r.value instanceof t?r.value=e.LN(r.value):r=e.LN(r),r}),i.kv=function(t,e){var i=void 0===e;i&&(e=this.offset);var r,n=t.length;if(!this.SA){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(r=0;r<n;++r)if(0===t.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}n=c.BN(o(t))[1],e+=n+1;var s=this.buffer.byteLength;return s<e&&this.resize((s*=2)>e?s:e),e-=n+1,c.VN(o(t),function(t){this.view[e++]=t}.bind(this)),this.view[e++]=0,i?(this.offset=e,this):n},i.Bv=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=t,n=-1;return c.qN(function(){if(0===n)return null;if(t>=this.mA)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.mA);return 0===(n=this.view[t++])?null:n}.bind(this),i=s(),!0),e?(this.offset=t,i()):{string:i(),length:t-r}},i.QN=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.SA){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var r,n=e;r=c.BN(o(t),this.SA)[1],e+=4+r;var s=this.buffer.byteLength;if(s<e&&this.resize((s*=2)>e?s:e),e-=4+r,this.OA?(this.view[e+3]=r>>>24&255,this.view[e+2]=r>>>16&255,this.view[e+1]=r>>>8&255,this.view[e]=255&r):(this.view[e]=r>>>24&255,this.view[e+1]=r>>>16&255,this.view[e+2]=r>>>8&255,this.view[e+3]=255&r),e+=4,c.VN(o(t),function(t){this.view[e++]=t}.bind(this)),e!==n+4+r)throw RangeError("Illegal range: Truncated data, "+e+" == "+(e+4+r));return i?(this.offset=e,this):e-n},i.WN=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i,r=0,n=t;this.OA?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0):(r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0);var o,a=(t+=4)+r;return c.qN(function(){return t<a?this.view[t++]:null}.bind(this),o=s(),this.SA),i=o(),e?(this.offset=t,i):{string:i,length:t-n}},e.YN="c",e.KN="b",i.$N=function(t,e){var i,r=void 0===e;if(r&&(e=this.offset),!this.SA){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n=e;i=c.BN(o(t))[1],e+=i;var s=this.buffer.byteLength;return s<e&&this.resize((s*=2)>e?s:e),e-=i,c.VN(o(t),function(t){this.view[e++]=t}.bind(this)),r?(this.offset=e,this):e-n},i.Kw=i.$N,e.XN=function(t){return c.BN(o(t))[0]},e.JN=function(t){return c.BN(o(t))[1]},e.zN=e.JN,i.ZN=function(t,i,r){"number"==typeof i&&(r=i,i=void 0);var n=void 0===r;if(n&&(r=this.offset),void 0===i&&(i=e.YN),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var o,a=0,u=r;if(i===e.YN){if(o=s(),c.tC(function(){return a<t&&r<this.mA?this.view[r++]:null}.bind(this),(function(t){++a,c.iC(t,o)})),a!==t)throw RangeError("Illegal range: Truncated data, "+a+" == "+t);return n?(this.offset=r,o()):{string:o(),length:r-u}}if(i!==e.KN)throw TypeError("Unsupported metrics: "+i);if(!this.SA){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+t+") <= "+this.buffer.byteLength)}var h=r+t;if(c.qN(function(){return r<h?this.view[r++]:null}.bind(this),o=s(),this.SA),r!==h)throw RangeError("Illegal range: Truncated data, "+r+" == "+h);return n?(this.offset=r,o()):{string:o(),length:r-u}},i.xw=i.ZN,i.nC=function(t,i){var r=void 0===i;if(r&&(i=this.offset),!this.SA){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var n,s,a=i;n=c.BN(o(t),this.SA)[1],s=e.yN(n),i+=s+n;var u=this.buffer.byteLength;if(u<i&&this.resize((u*=2)>i?u:i),i-=s+n,i+=this.ON(n,i),c.VN(o(t),function(t){this.view[i++]=t}.bind(this)),i!==a+n+s)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+n+s));return r?(this.offset=i,this):i-a},i.rC=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=this.RN(t),n=t;t+=r.length,r=r.value;var o=t+r,a=s();return c.qN(function(){return t<o?this.view[t++]:null}.bind(this),a,this.SA),i=a(),e?(this.offset=t,i):{string:i,length:t-n}},i.append=function(t,i,r){"number"!=typeof i&&"string"==typeof i||(r=i,i=void 0);var n=void 0===r;if(n&&(r=this.offset),!this.SA){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}t instanceof e||(t=e.wrap(t,i));var o=t.mA-t.offset;if(o<=0)return this;r+=o;var s=this.buffer.byteLength;return s<r&&this.resize((s*=2)>r?s:r),r-=o,this.view.set(t.view.subarray(t.offset,t.mA),r),t.offset+=o,n&&(this.offset+=o),this},i.sC=function(t,e){return t.append(this,e),this},i.assert=function(t){return this.SA=!t,this},i.eC=function(){return this.buffer.byteLength},i.clear=function(){return this.offset=0,this.mA=this.buffer.byteLength,this.TA=-1,this},i.clone=function(t){var i=new e(0,this.OA,this.SA);return t?(i.buffer=new ArrayBuffer(this.buffer.byteLength),i.view=new Uint8Array(i.buffer)):(i.buffer=this.buffer,i.view=this.view),i.offset=this.offset,i.TA=this.TA,i.mA=this.mA,i},i.compact=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.mA),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||e<t||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var i=e-t;if(0==i)return this.buffer=r,this.view=null,0<=this.TA&&(this.TA-=t),this.offset=0,this.mA=0,this;var n=new ArrayBuffer(i),o=new Uint8Array(n);return o.set(this.view.subarray(t,e)),this.buffer=n,this.view=o,0<=this.TA&&(this.TA-=t),this.offset=0,this.mA=i,this},i.hC=function(t,i){if(void 0===t&&(t=this.offset),void 0===i&&(i=this.mA),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,t<0||i<t||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+i+" <= "+this.buffer.byteLength)}if(t===i)return new e(0,this.OA,this.SA);var r=i-t,n=new e(r,this.OA,this.SA);return n.offset=0,n.mA=r,0<=n.TA&&(n.TA-=t),this.kO(n,0,t,i),n},i.kO=function(t,i,r,n){var o,s;if(!this.SA&&!e.kA(t))throw TypeError("Illegal target: Not a ByteBuffer");if(i=(s=void 0===i)?t.offset:0|i,r=(o=void 0===r)?this.offset:0|r,n=void 0===n?this.mA:0|n,i<0||i>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+i+" <= "+t.buffer.byteLength);if(r<0||n>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var a=n-r;return 0==a?t:(t.oC(i+a),t.view.set(this.view.subarray(r,n),i),o&&(this.offset+=a),s&&(t.offset+=a),this)},i.oC=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},i.fill=function(t,e,i){var r=void 0===e;if(r&&(e=this.offset),"string"==typeof t&&0<t.length&&(t=t.charCodeAt(0)),void 0===e&&(e=this.offset),void 0===i&&(i=this.mA),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,e<0||i<e||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(i<=e)return this;for(;e<i;)this.view[e++]=t;return r&&(this.offset=e),this},i.Dv=function(){return this.mA=this.offset,this.offset=0,this},i.mark=function(t){if(t=void 0===t?this.offset:t,!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.TA=t,this},i.order=function(t){if(!this.SA&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.OA=!!t,this},i.uC=function(t){return this.OA=void 0===t||!!t,this},i.aC=function(t){return this.OA=void 0!==t&&!t,this},i.prepend=function(t,i,r){"number"!=typeof i&&"string"==typeof i||(r=i,i=void 0);var n=void 0===r;if(n&&(r=this.offset),!this.SA){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}t instanceof e||(t=e.wrap(t,i));var o=t.mA-t.offset;if(o<=0)return this;var s=o-r;if(0<s){var a=new ArrayBuffer(this.buffer.byteLength+s),u=new Uint8Array(a);u.set(this.view.subarray(r,this.buffer.byteLength),o),this.buffer=a,this.view=u,this.offset+=s,0<=this.TA&&(this.TA+=s),this.mA+=s,r+=s}else new Uint8Array(this.buffer);return this.view.set(t.view.subarray(t.offset,t.mA),r-o),t.offset=t.mA,n&&(this.offset-=o),this},i.fC=function(t,e){return t.prepend(this,e),this},i.cC=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.lC(!0))},i.vC=function(){return this.mA-this.offset},i.reset=function(){return 0<=this.TA?(this.offset=this.TA,this.TA=-1):this.offset=0,this},i.resize=function(t){if(!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if((t|=0)<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t),i=new Uint8Array(e);i.set(this.view),this.buffer=e,this.view=i}return this},i.reverse=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.mA),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||e<t||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e||Array.prototype.reverse.call(this.view.subarray(t,e)),this},i.Bw=function(t){if(!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.SA&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},i.slice=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.mA),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||e<t||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i=this.clone();return i.offset=t,i.mA=e,i},i.dC=function(t){var e=this.offset,i=this.mA;if(!this.SA){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,e<0||i<e||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(!t&&0===e&&i===this.buffer.byteLength)return this.buffer;if(e===i)return r;var n=new ArrayBuffer(i-e);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(e,i),0),n},i.Ma=i.dC,i.toString=function(t,e,i){if(void 0===t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.TA+",limit="+this.mA+",capacity="+this.eC()+")";switch("number"==typeof t&&(i=e=t="utf8"),t){case"utf8":return this.EC(e,i);case"base64":return this.pC(e,i);case"hex":return this.wC(e,i);case"binary":return this.gC(e,i);case"debug":return this.lC();case"columns":return this.bC();default:throw Error("Unsupported encoding: "+t)}};var h=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],i=[],r=0,n=e.length;r<n;++r)i[e[r]]=r;return t.encode=function(t,i){for(var r,n;null!==(r=t());)i(e[r>>2&63]),n=(3&r)<<4,null!==(r=t())?(i(e[63&((n|=r>>4&15)|r>>4&15)]),n=(15&r)<<2,null!==(r=t())?(i(e[63&(n|r>>6&3)]),i(e[63&r])):(i(e[63&n]),i(61))):(i(e[63&n]),i(61),i(61))},t.decode=function(t,e){var r,n,o;function s(t){throw Error("Illegal character code: "+t)}for(;null!==(r=t());)if(void 0===(n=i[r])&&s(r),null!==(r=t())&&(void 0===(o=i[r])&&s(r),e(n<<2>>>0|(48&o)>>4),null!==(r=t()))){if(void 0===(n=i[r])){if(61===r)break;s(r)}if(e((15&o)<<4>>>0|(60&n)>>2),null!==(r=t())){if(void 0===(o=i[r])){if(61===r)break;s(r)}e((3&n)<<6>>>0|o)}}},t.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)},t}();i.pC=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.mA),e|=0,(t|=0)<0||e>this.eC||e<t)throw RangeError("begin, end");var i;return h.encode(function(){return t<e?this.view[t++]:null}.bind(this),i=s()),i()},e.DA=function(t,i){if("string"!=typeof t)throw TypeError("str");var r=new e(t.length/4*3,i),n=0;return h.decode(o(t),(function(t){r.view[n++]=t})),r.mA=n,r},e.btoa=function(t){return e.jA(t).pC()},e.atob=function(t){return e.DA(t).gC()},i.gC=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.mA),e|=0,(t|=0)<0||e>this.eC()||e<t)throw RangeError("begin, end");if(t===e)return"";for(var i=[],r=[];t<e;)i.push(this.view[t++]),1024<=i.length&&(r.push(String.fromCharCode.apply(String,i)),i=[]);return r.join("")+String.fromCharCode.apply(String,i)},e.jA=function(t,i){if("string"!=typeof t)throw TypeError("str");for(var r,n=0,o=t.length,s=new e(o,i);n<o;){if(255<(r=t.charCodeAt(n)))throw RangeError("illegal char code: "+r);s.view[n++]=r}return s.mA=o,s},i.lC=function(t){for(var e,i=-1,r=this.buffer.byteLength,n="",o="",s="";i<r;){if(-1!==i&&(n+=(e=this.view[i])<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(o+=32<e&&e<127?String.fromCharCode(e):".")),++i,t&&0<i&&i%16==0&&i!==r){for(;n.length<51;)n+=" ";s+=n+o+"\n",n=o=""}i===this.offset&&i===this.mA?n+=i===this.TA?"!":"|":i===this.offset?n+=i===this.TA?"[":"<":i===this.mA?n+=i===this.TA?"]":">":n+=i===this.TA?"'":t||0!==i&&i!==r?" ":""}if(t&&" "!==n){for(;n.length<51;)n+=" ";s+=n+o+"\n"}return t?s:n},e.HA=function(t,i,r){for(var n,o,s=t.length,a=new e((s+1)/3|0,i,r),u=0,h=0,c=!1,l=!1,p=!1,f=!1,d=!1;u<s;){switch(n=t.charAt(u++)){case"!":if(!r){if(l||p||f){d=!0;break}l=p=f=!0}a.offset=a.TA=a.mA=h,c=!1;break;case"|":if(!r){if(l||f){d=!0;break}l=f=!0}a.offset=a.mA=h,c=!1;break;case"[":if(!r){if(l||p){d=!0;break}l=p=!0}a.offset=a.TA=h,c=!1;break;case"<":if(!r){if(l){d=!0;break}l=!0}a.offset=h,c=!1;break;case"]":if(!r){if(f||p){d=!0;break}f=p=!0}a.mA=a.TA=h,c=!1;break;case">":if(!r){if(f){d=!0;break}f=!0}a.mA=h,c=!1;break;case"'":if(!r){if(p){d=!0;break}p=!0}a.TA=h,c=!1;break;case" ":c=!1;break;default:if(!r&&c){d=!0;break}if(o=parseInt(n+t.charAt(u++),16),!r&&(isNaN(o)||o<0||255<o))throw TypeError("Illegal str: Not a debug encoded string");a.view[h++]=o,c=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+u)}if(!r){if(!l||!f)throw TypeError("Illegal str: Missing offset or limit");if(h<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+h+" < "+s)}return a},i.wC=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.mA:e,!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||e<t||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var i,r=new Array(e-t);t<e;)(i=this.view[t++])<16?r.push("0",i.toString(16)):r.push(i.toString(16));return r.join("")},e.MA=function(t,i,r){if(!r){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var n,o=t.length,s=new e(o/2|0,i),a=0,u=0;a<o;a+=2){if(n=parseInt(t.substring(a,a+2),16),!r&&(!isFinite(n)||n<0||255<n))throw TypeError("Illegal str: Contains non-hex characters");s.view[u++]=n}return s.mA=u,s};var c=function(){var t={yC:1114111,TC:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<128?e(127&i):(i<2048?e(i>>6&31|192):(i<65536?e(i>>12&15|224):(e(i>>18&7|240),e(i>>12&63|128)),e(i>>6&63|128)),e(63&i|128)),i=null},tC:function(t,e){for(var i,r,n,o,s=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(i=t());)if(0==(128&i))e(i);else if(192==(224&i))null===(r=t())&&s([i,r]),e((31&i)<<6|63&r);else if(224==(240&i))null!==(r=t())&&null!==(n=t())||s([i,r,n]),e((15&i)<<12|(63&r)<<6|63&n);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);null!==(r=t())&&null!==(n=t())&&null!==(o=t())||s([i,r,n,o]),e((7&i)<<18|(63&r)<<12|(63&n)<<6|63&o)}},mC:function(t,e){for(var i,r=null;null!==(i=null!==r?r:t());)55296<=i&&i<=57343&&null!==(r=t())&&56320<=r&&r<=57343?(e(1024*(i-55296)+r-56320+65536),r=null):e(i);null!==r&&e(r)},iC:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<=65535?e(i):(e(55296+((i-=65536)>>10)),e(i%1024+56320)),i=null},VN:function(e,i){t.mC(e,(function(e){t.TC(e,i)}))},qN:function(e,i){t.tC(e,(function(e){t.iC(e,i)}))},OC:function(t){return t<128?1:t<2048?2:t<65536?3:4},SC:function(t){for(var e,i=0;null!==(e=t());)i+=e<128?1:e<2048?2:e<65536?3:4;return i},BN:function(e){var i=0,r=0;return t.mC(e,(function(t){++i,r+=t<128?1:t<2048?2:t<65536?3:4})),[i,r]}};return t}();return i.EC=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.mA),!this.SA){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||e<t||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;try{c.qN(function(){return t<e?this.view[t++]:null}.bind(this),i=s())}catch(i){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return i()},e.PA=function(t,i,r){if(!r&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var n=new e(c.BN(o(t),!0)[1],i,r),s=0;return c.VN(o(t),(function(t){n.view[s++]=t})),n.mA=s,n},e})?r.apply(e,n):r)||(t.exports=o)},function(t,e){var i,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,h=[],c=!1,l=-1;function p(){c&&u&&(c=!1,u.length?h=u.concat(h):l=-1,h.length&&f())}function f(){if(!c){var t=a(p);c=!0;for(var e=h.length;e;){for(u=h,h=[];++l<e;)u&&u[l].RC();l=-1,e=h.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.IC=t,this.bS=e}function g(){}n.Ve=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new d(t,e)),1!==h.length||c||a(f)},d.prototype.RC=function(){this.IC.apply(null,this.bS)},n.title="browser",n._C=!0,n.Xe={},n.AC=[],n.version="",n.UT={},n.on=g,n.addListener=g,n.NC=g,n.off=g,n.removeListener=g,n.CC=g,n.vh=g,n.kC=g,n.DC=g,n.jd=function(t){return[]},n.MC=function(t){throw new Error("process.binding is not supported")},n.jC=function(){return"/"},n.PC=function(t){throw new Error("process.chdir is not supported")},n.HC=function(){return 0}},function(t,e,i){"use strict";var r=i(39);t.exports=Object,Object.empty=Object.freeze(Object.create(null)),Object.cc=function(t){return Object(t)===t},Object.LC=function(t){return t&&"function"==typeof t.valueOf&&(t=t.valueOf()),t};var n=new r;Object.hash=function(t){return t&&"function"==typeof t.hash?""+t.hash():Object(t)===t?(n.has(t)||n.set(t,Math.random().toString(36).slice(2)),n.get(t)):""+t};var o=Object.prototype.hasOwnProperty;Object.UC=function(t,e){return o.call(t,e)},Object.has=function(t,e){if("object"!=typeof t)throw new Error("Object.has can't accept non-object: "+typeof t);if(t&&"function"==typeof t.has)return t.has(e);if("string"==typeof e)return e in t&&t[e]!==Object.prototype[e];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(t,e,i){if("object"!=typeof t)throw new Error("Object.get can't accept non-object: "+typeof t);return t&&"function"==typeof t.get?t.get(e,i):Object.has(t,e)?t[e]:i},Object.set=function(t,e,i){t&&"function"==typeof t.set?t.set(e,i):t[e]=i},Object.hiveAddEach=function(t,e){if(e)if("function"!=typeof e.forEach||e.hasOwnProperty("forEach"))if("number"==typeof e.length)for(var i=0;i<e.length;i++)t[i]=e[i];else Object.keys(e).forEach((function(i){t[i]=e[i]}));else!0===e.isMap?e.forEach((function(e,i){t[i]=e})):e.forEach((function(e){t[e[0]]=e[1]}));return t},Object.forEach=function(t,e,i){for(var r,n=Object.keys(t),o=0;r=n[o];o++)e.call(i,t[r],r,t)},Object.map=function(t,e,i){for(var r,n=Object.keys(t),o=0,s=[];r=n[o];o++)s.push(e.call(i,t[r],r,t));return s},Object.values=function(t){return Object.map(t,Function.identity)},Object.concat=function(){for(var t={},e=0;e<arguments.length;e++)Object.hiveAddEach(t,arguments[e]);return t},Object.from=Object.concat,Object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},Object.Wh=function(t,e,i,n){if(i=i||Object.Wh,(t=Object.LC(t))===(e=Object.LC(e)))return!0;if(Object.cc(t)){if((n=n||new r).has(t))return!0;n.set(t,!0)}if(Object.cc(t)&&"function"==typeof t.Wh)return t.Wh(e,i,n);if(Object.cc(e)&&"function"==typeof e.Wh)return e.Wh(t,i,n);if(Object.cc(t)&&Object.cc(e)&&Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){for(var o in t)if(!i(t[o],e[o],i,n))return!1;for(var o in e)if(!(o in t&&i(e[o],t[o],i,n)))return!1;return!0}return t!=t&&e!=e||(!t||!e)&&t===e},Object.compare=function(t,e){if((t=Object.LC(t))===(e=Object.LC(e)))return 0;var i=typeof t,r=typeof e;return"number"==i&&"number"==r?t-e:"string"==i&&"string"==r?t<e?-1/0:1/0:t&&"function"==typeof t.compare?t.compare(e):e&&"function"==typeof e.compare?-e.compare(t):0},Object.clone=function(t,e,i){if(t=Object.LC(t),i=i||new r,void 0===e)e=1/0;else if(0===e)return t;if(Object.cc(t)){if(!i.has(t))if(t&&"function"==typeof t.clone)i.set(t,t.clone(e,i));else{var n=Object.getPrototypeOf(t);if(null!==n&&n!==Object.prototype)throw new Error("Can't clone "+t);var o=Object.create(n);for(var s in i.set(t,o),t)o[s]=Object.clone(t[s],e-1,i)}return i.get(t)}return t},Object.clear=function(t){if(t&&"function"==typeof t.clear)t.clear();else for(var e=Object.keys(t),i=e.length;i;)delete t[e[--i]];return t}},function(t,e){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.FC=v);var e=!1;if("function"==typeof WeakMap){var i=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var r=new i,n=Object.freeze({});if(r.set(n,1),1===r.get(n))return t.exports=WeakMap;e=!0}}Object.prototype.hasOwnProperty;var o=Object.getOwnPropertyNames,s=Object.defineProperty,a=Object.isExtensible,u="weakmap:",h=u+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var c=new ArrayBuffer(25),l=new Uint8Array(c);crypto.getRandomValues(l),h=u+"rand:"+Array.prototype.map.call(l,(function(t){return(t%36).toString(36)})).join("")+"___"}if(s(Object,"getOwnPropertyNames",{value:function(t){return o(t).filter(y)}}),"getPropertyNames"in Object){var p=Object.GC;s(Object,"getPropertyNames",{value:function(t){return p(t).filter(y)}})}!function(){var t=Object.freeze;s(Object,"freeze",{value:function(e){return m(e),t(e)}});var e=Object.seal;s(Object,"seal",{value:function(t){return m(t),e(t)}});var i=Object.preventExtensions;s(Object,"preventExtensions",{value:function(t){return m(t),i(t)}})}();var f=!1,d=0,g=function(){this instanceof g||w();var t=[],e=[],i=d++;return Object.create(g.prototype,{xC:{value:E((function(r,n){var o,s=m(r);return s?i in s?s[i]:n:0<=(o=t.indexOf(r))?e[o]:n}))},BC:{value:E((function(e){var r=m(e);return r?i in r:0<=t.indexOf(e)}))},VC:{value:E((function(r,n){var o,s=m(r);return s?s[i]=n:0<=(o=t.indexOf(r))?e[o]=n:(o=t.length,e[o]=n,t[o]=r),this}))},qC:{value:E((function(r){var n,o,s=m(r);return s?i in s&&delete s[i]:!((n=t.indexOf(r))<0||(o=t.length-1,t[n]=void 0,e[n]=e[o],t[n]=t[o],t.length=o,e.length=o,0))}))}})};g.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.xC(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.BC(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.VC(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.qC(t)},writable:!0,configurable:!0}}),"function"==typeof i?(e&&"undefined"!=typeof Proxy&&(Proxy=void 0),b.prototype=g.prototype,t.exports=b,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})):("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=g)}function v(t){t.QC&&t.QC(v)}function y(t){return!(t.substr(0,u.length)==u&&"___"===t.substr(t.length-3))}function m(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[h];if(e&&e.key===t)return e;if(a(t)){e={key:t};try{return s(t,h,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function E(t){return t.prototype=null,Object.freeze(t)}function w(){f||"undefined"==typeof console||(f=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}function b(){this instanceof g||w();var t,r=new i,n=void 0,o=!1;return t=e?function(t,e){return r.set(t,e),r.has(t)||(n=n||new g).set(t,e),this}:function(t,e){if(o)try{r.set(t,e)}catch(i){(n=n||new g).VC(t,e)}else r.set(t,e);return this},Object.create(g.prototype,{xC:{value:E((function(t,e){return n?r.has(t)?r.get(t):n.xC(t,e):r.get(t,e)}))},BC:{value:E((function(t){return r.has(t)||!!n&&n.BC(t)}))},VC:{value:E(t)},qC:{value:E((function(t){var e=!!r.delete(t);return n&&n.qC(t)||e}))},QC:{value:E((function(t){if(t!==v)throw new Error("bogus call to permitHostObjects___");o=!0}))}})}}()},function(t,e,i){"use strict";var r=i(39),n=i(52),o=new r;function s(){throw new Error("Can't construct. RangeChanges is a mixin.")}(t.exports=s).prototype.WC=function(){return o.has(this)||o.set(this,n()),o.get(this)},s.prototype.YC=function(t){var e=this.WC();return t=t||"",e.has(t)||e.set(t,{isActive:!1,Jf:[],Xf:[]}),e.get(t)},s.prototype.KC=function(t,e,i){!this.ic&&this.tc&&this.tc();var r=this.YC(e);(i?r.Xf:r.Jf).push(t),Object.defineProperty(this,"$C",{value:!0,writable:!0,configurable:!0,enumerable:!1});var n=this;return function(){n&&(n.XC(t,e,i),n=null)}},s.prototype.XC=function(t,e,i){var r,n=this.YC(e),o=(r=i?n.Xf:n.Jf).lastIndexOf(t);if(-1===o)throw new Error("Can't remove range change listener: does not exist: token "+JSON.stringify(e));r.splice(o,1)},s.prototype.JC=function(t,e,i,r){var n=this.WC(),o="Range"+(r?"WillChange":"Change");n.forEach((function(n,s){if(!n.isActive){var a;n.isActive=!0,a=r?n.Xf:n.Jf;var u="handle"+(s.slice(0,1).toUpperCase()+s.slice(1))+o;try{a.slice().forEach((function(n){if(!(a.indexOf(n)<0))if(n[u])n[u](t,e,i,this,r);else{if(!n.call)throw new Error("Handler "+n+" has no method "+u+" and is not callable");n.call(this,t,e,i,this,r)}}),this)}finally{n.isActive=!1}}}),this)},s.prototype.zC=function(t,e){return this.KC(t,e,!0)},s.prototype.ZC=function(t,e){return this.XC(t,e,!0)},s.prototype.tk=function(t,e,i){return this.JC(t,e,i,!0)}},function(t,e){function i(){throw new Error("Can't construct. GenericSet is a mixin.")}(t.exports=i).prototype.ik=!0,i.prototype.nk=function(t){var e=this.zh(this);return e.hiveAddEach(t),e},i.prototype.rk=function(t){return this.zh(this.filter((function(e){return t.has(e)})))},i.prototype.sk=function(t){var e=this.zh(this);return e.kf(t),e},i.prototype.ek=function(t){var e=this.nk(t),i=this.rk(t);return e.sk(i)},i.prototype.hk=function(t){return+this.delete(t)},i.prototype.Wh=function(t,e){var i=this;return t&&"function"==typeof t.reduce&&this.length===t.length&&t.reduce((function(t,r){return t&&i.has(r,e)}),!0)},i.prototype.toJSON=function(){return this.toArray()},i.prototype.contains=function(t){return this.has(t)},i.prototype.remove=function(t){return this.delete(t)},i.prototype.toggle=function(t){this.has(t)?this.delete(t):this.hiveAdd(t)}},function(t,e,i){t.exports=function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[s]={exports:{}};e[s][0].call(h.exports,(function(t){return n(e[s][1][t]||t)}),h,h.exports,t,e,i,r)}return i[s].exports}for(var o=!1,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){var r=t("./kernel");i.I=r.I;var n=t("./type_binding");i.uk=n.uk;var o=t("./type_binding_scope");i.ak=o.ak},{"./kernel":2,"./type_binding":4,"./type_binding_scope":5}],2:[function(t,e,i){var r=t("./type_binding_scope"),n=t("./lookup"),o=function(){function t(){this.fk=new n.ck}return t.prototype.bind=function(t){this.fk.add(t.lk,t)},t.prototype.vk=function(t){try{this.fk.remove(t)}catch(e){throw new Error("Could not resolve service "+t)}},t.prototype.it=function(){this.fk=new n.ck},t.prototype.resolve=function(t){if(!this.fk.dk(t))return null;var e=this.fk.get(t)[0];if(e.scope===r.ak.Ek&&null!==e.fg)return e.fg;var i=this.pk(e.wk);return e.fg=i},t.prototype.gk=function(t){var e,i,r,n,o,s;return o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,s=/([^\s,]+)/g,i=(e=t.toString().replace(o,"")).indexOf("(")+1,r=e.indexOf(")"),null===(n="function"==typeof Map&&-1!==e.indexOf("class")&&-1===e.indexOf("constructor")?null:e.slice(i,r).match(s))&&(n=[]),n},t.prototype.pk=function(t){var e=this.gk(t);if(0===e.length)return new t;for(var i=[],r=null,n=0;n<e.length;n++){var o=e[n];r=this.resolve(o),i.push(r)}return this.bk(t,i)},t.prototype.bk=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(e)))},t}();i.I=o},{"./lookup":3,"./type_binding_scope":5}],3:[function(t,e,i){var r=function(t,e){this.key=t,this.value=new Array,this.value.push(e)},n=function(){function t(){this.yk=new Array}return t.prototype.Tk=function(t){for(var e=-1,i=0;i<this.yk.length;i++){this.yk[i].key===t&&(e=i)}return e},t.prototype.add=function(t,e){if(null==t)throw new Error("Argument Null");if(null==e)throw new Error("Argument Null");var i=this.Tk(t);if(-1!==i){var n=this.yk[i];n.key===t&&n.value.push(e)}else this.yk.push(new r(t,e))},t.prototype.get=function(t){if(null==t)throw new Error("Argument Null");var e=this.Tk(t);if(-1===e)throw new Error("Key Not Found");var i=this.yk[e];return i.key===t?i.value:void 0},t.prototype.remove=function(t){if(null==t)throw new Error("Argument Null");var e=this.Tk(t);if(-1===e)throw new Error("Key Not Found");this.yk.splice(e,1)},t.prototype.dk=function(t){if(null==t)throw new Error("Argument Null");return-1!==this.Tk(t)},t}();i.ck=n},{}],4:[function(t,e,i){var r=t("./type_binding_scope");i.uk=function(t,e,i){if(this.lk=t,this.wk=e,this.fg=null,void 0===i)this.scope=r.ak.mk;else{if(!r.ak[i])throw new Error("Invalid scope type "+i);this.scope=i}}},{"./type_binding_scope":5}],5:[function(t,e,i){var r;!function(t){t[t.mk=0]="Transient",t[t.Ek=1]="Singleton"}(r=r||{}),i.ak=r},{}]},{},[1])(1)},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.LoggerTimestamp=!0,n);function n(){}var o=(s.MetricSnapshotLogs=0,s.TrackSnapshotLogs=0,s);function s(){}var a=(u.Framework=r,u.DebugLogs=o,u);function u(){}e.HiveConfig=a,"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Framework=a.Framework,window.HiveConfig.DebugLogs=a.DebugLogs)},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.Ok="127.0.0.1",n.nd=8999,n.td=8998,n.Zv=8899,n.Jv=8898,n.Sk="//{0}:{1}/?callback={2}{3}hivePluginId={4}",n.Rk="//{0}:{1}/?callback={2}",n.rd=!0,n.Ik=/((http|https):\/\/(.*):([0-9]*)\/([0-9a-z-]*).ism\/)(.*)/,n._k="2013.1.1",n.Ak="2018.1",n);function n(){}e.zv=r},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r,n,o=i(43),s=i(4);(n=r=e.Nk||(e.Nk={}))[n.off=0]="off",n[n.error=1]="error",n[n.warn=2]="warn",n[n.notice=3]="notice",n[n.info=4]="info",n[n.debug=5]="debug",n[n.trace=6]="trace";var a=(u.prototype.Ck=function(t,e){o.HiveConfig.Framework.HiveDebugLevel&&null!=r[o.HiveConfig.Framework.HiveDebugLevel]?this.level=r[o.HiveConfig.Framework.HiveDebugLevel]:null!=r[t]?this.level=r[t]:console.log("Wrong logging level: "+t,r),this.kk(e)},u.prototype.kk=function(t){var e={log:this.Dk(this.logger.log,r.error,t),error:this.Dk(this.logger.error,r.error,t),warn:this.Dk(this.logger.warn,r.warn,t),notice:this.Dk(this.logger.info,r.notice,t),info:this.Dk(this.logger.info,r.info,t),debug:this.Dk(this.logger.debug,r.debug,t),trace:this.Dk(this.logger.trace,r.trace,t)};t?this.Mk.set(t,e):this.jk=e},u.prototype.Dk=function(t,e,i){if(!(this.level>=e))return function(){};try{return o.HiveConfig.Framework.LoggerTimestamp?i?Function.prototype.bind.call(t,console,"S["+i+"] %s",this.timestamp):Function.prototype.bind.call(t,console,"%s",this.timestamp):i?Function.prototype.bind.call(t,console,"S["+i+"]"):Function.prototype.bind.call(t,console)}catch(t){}},u.prototype.log=function(t){return t?(this.Mk.has(t)||this.Ck(r[this.level],t),this.Mk.get(t)):this.jk},u);function u(){this.timestamp=function(){},this.Mk=new s,this.level=r.debug,this.timestamp.toString=function(){var t=new Date;return"["+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)+":"+("00"+t.getUTCMilliseconds()).slice(-3)+"]"},this.logger="undefined"==typeof console?{log:function(){}}:console,this.logger.trace||(this.logger.trace=this.logger.log),this.logger.debug||(this.logger.debug=this.logger.log),this.logger.info||(this.logger.info=this.logger.log),this.logger.warn||(this.logger.warn=this.logger.log),this.logger.error||(this.logger.error=this.logger.log),this.Ck(r[this.level])}e.Pk=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(50),n=i(30),o=i(32),s=(a.prototype.Hk=function(t,e,i){this.SiteId=t,this.CROId=e,this.ContentId=i,this.Lk()},a.prototype.Uk=function(t){for(var e in t)if("SourceURLParams"===e)for(var i in t[e])this[e][i]=t[e][i];else this[e]=t[e];this.Lk()},a.prototype.Fk=function(){var t=this.ContentId+this.SiteId+this.CROId+this.SourceURL,e=new o.sA;e.YO("b6614c3e4cd1d14eed6b39ef2bf6b9a3e3d6dfcd26699d7270d887923bcbf83efb3dadb717c0bafb1d48dce361eb369b7cc46e57405ebfbdd86c3175532fe56cc77f473d345b2cb6feafb5ab0e24f364a3d259f27e4a2fd97468265bddfd3ddd3ac64251db650ca0280af2b2c45e8b1c8f040f2c433ac0a157d2b3fd91517253","010001");var i=o.eA(this.Signature);return e.X_(t,i)},a.prototype.Gk=function(t){this.ticketUrl=t;var e=n.parse(t),i=e.path.split("/").slice(3);if(this.SiteId=i[0],this.CROId=i[1],this.ContentId=i[2],this.xk=i[3],e.query)try{var r=e.query.split("&");for(var o in r){var s=r[o].split(/=(.+)/);this.SourceURLParams[s[0]]=s[1]}}catch(t){}this.Bk=-1<t.indexOf("api-test")},a.prototype.pE=function(){return this.SiteId},a.prototype.wE=function(){return this.CROId},a.prototype.Vk=function(){return this.ContentId},a.prototype.qk=function(){return this.xk},a.prototype.Qk=function(){return this.SourceURL},a.prototype.Wk=function(){if(this.Yk=this.SourceURL,null!=this.SourceURLParams){var t=new Array;for(var e in this.SourceURLParams)t.push(e+"="+this.SourceURLParams[e]);0<t.length&&this.Yk&&(this.Yk+=(0<this.Yk.indexOf("?")?"&":"?")+t.join("&"))}},a.prototype.Lk=function(){this.sessionId=r.Kk()},a.prototype.$k=function(){return this.Yk||this.Wk(),this.Yk},a.prototype.OE=function(){return"["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},a.prototype.Xk=function(){return[this.SiteId,this.CROId,this.ContentId]},a.prototype.Jk=function(){return this.SourceURL+"-["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},a.prototype.toString=function(){return this.OE()},a.zk="^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?",a.Zk="CROId",a.tD="SiteId",a.iD="ContentId",a);function a(){this.SourceURLParams={},this.testId=null,this.originalManifest=null}e.Ticket=s},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(24),n=i(0),o=i(17),s=i(4),a=(u.Zd=function(t,e,i){this.client=t,this.nD=e,this.guid=i},u.rD=function(t,e,i,o,s){var a=new r.Xd;a.app=t||"CustomSnapshot",a.guid=o||this.guid,a.createdAt=n.Framework.time(),a.name=i,a.tags=e||this.nD,a.data="string"==typeof s?JSON.parse(s):s,this.send(a)},u.send=function(t){var e=new o.hl(HiveStreamingServices.GE,2,JSON.stringify(t));this.client&&this.client.UE().send(e)},u.sD=function(t,e,i,r,n,o){try{var s=t+(e?e.join():"")+i+r,a=this.eD.has(s)?this.eD.get(s):[];a.push("string"==typeof n?JSON.parse(n):n),a.length>=o?(this.rD(t,e,i,r,{buffer:a}),this.eD.delete(s)):this.eD.set(s,a)}catch(t){console.log(t)}},u.eD=new s,u);function u(){}e.hD=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.oD=55,n.uD=6e5,n.aD=5,n.fD=10,n.cD=2,n.lD=10,n.vD="dist",n.dD="../scenarios/BrokenUdp",n.ED=null,n.pD=null,n.wD=null,n.gD=!0,n.bD=!0,n.yD=6e4,n);function n(){}e.TD=r;var o=(s.mD="BwEmulation",s);function s(){}e.OD=o},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r,n,o,s,a=i(59),u=i(4),h=i(26),c=i(0),l=i(5),p=i(9),f=i(33),d=i(10),g=i(1),v=i(2);(n=r=e.SD||(e.SD={}))[n.Rf=0]="PLAYER",n[n.RD=1]="LAN",n[n.ID=2]="SITE",(s=o=o||{})[s.RD=0]="LAN",s[s.ID=1]="SITE",s[s.AS=2]="AS",s[s.Tf=3]="OTHER";var y=function(){this._D=!1,this.fA=null,this.AD=-1,this.ND=0};e.CD=y;var m=(E.prototype.init=function(t){this.logger=c.Framework.resolve(c.Framework.ht.m).log(t.sessionId),this.kD=t.DD,this.MD=t.MD,this.jD=t.jD,this.fg=t.fg,this.pluginId=t.yd.ticket.pluginId,this.PD=t.PD,this.HD=t.HD,this.LD=t.LD,this.UD=t.UD},E.prototype.FD=function(){this.isActive=!0},E.prototype.GD=function(t,e){this.context=t,this.xD=e,this.LD.GD(e)},E.prototype.BD=function(t){return this.VD.has(t)},E.prototype.qD=function(){return this.xD},E.prototype.QD=function(t,e,i){var n=this;try{var o=new a;this.VD.forEach((function(t,e){o.hiveAdd(e)}));var s=new a;if(s.hiveAddEach(t.keys()),this.xD.WD()){var h=this.xD.WD().bitrate;if(s.hiveAdd(h),s.forEach((function(t){o.delete(t)})),i){var c=[];o.forEach((function(t){n.VD.has(t)&&n.VD.get(t).YD==r.ID&&(c.push(t),s.hiveAdd(t))})),c.forEach((function(t){o.delete(t)}))}var l=new u;s.forEach((function(e){n.VD.has(e)&&n.VD.get(e).YD==r.ID?l.set(e,r.ID):l.set(e,t.get(e))})),this.KD(o),this.$D(l,e)}}catch(e){g.ErrorMonitor.lt().logError("Error updating the prefetch sessions",this.loggerId,v.Ws.Ys,e)}},E.prototype.$D=function(t,e){var i=this;t.forEach((function(t,r){0!=r&&i.XD(r,t,e)}))},E.prototype.KD=function(t){var e=this;t.forEach((function(t){e.PD.JD(t),e.logger.debug(e.loggerId+"Remove unwanted bitrate "+t),e.VD.delete(t)}))},E.prototype.XD=function(t,e,i){this.VD.has(t)?this.zD(t,i):this.VD.has(t)||this.ZD(t,e,i)},E.prototype.zD=function(t,e){try{var i=this.VD.get(t);i.type=e,i.type!=r.ID&&(i.AD=-1),this.PD.tM(t,i)}catch(t){g.ErrorMonitor.lt().logError("Error configuring already existing prefetch sessions",this.loggerId,v.Ws.Ks,t)}},E.prototype.ZD=function(t,e,i){var n=this;try{var o=new y;o.fA=null,o.type=i,o.bitrate=t,o.YD=e,this.VD.set(t,o),this.VD.forEach((function(t,e){n.logger.debug(n.loggerId+"ABT "+e+" S "+r[t.type]+" PREF REASON "+r[t.YD])})),this.PD.tM(t,o)}catch(t){g.ErrorMonitor.lt().logError("Error constructing a new prefetch session",this.loggerId,v.Ws.$s,t)}},E.prototype.iM=function(t){var e=this;if(this.VD.has(t.getBitrate())){var i=this.VD.get(t.getBitrate());0<i.AD&&i.nM&&(i.AD=t.duration-(c.Framework.time()-i.nM)-i.ND,i.ND=50),i.fA=t,this.rM(t.getBitrate()),this.VD.forEach((function(i,n){i&&i.type!=r.Rf&&n!=t.getBitrate()&&e.sM(i,n)}))}},E.prototype.eM=function(t){var e=this.VD.keys(),i=e.indexOf(t);return-1!=i&&e.splice(i,1),e},E.prototype.hM=function(t){var e=this;t.forEach((function(t){var i=e.VD.get(t);i&&i.type!=r.Rf&&e.sM(i,i.bitrate)}))},E.prototype.sM=function(t,e){if(t.type!=r.Rf){var i=this.xD.WD();if(null!=i){var n=this.xD.oM(i.lA,e,p.wf.bf);null==n?(this.logger.debug(this.loggerId+"PREFETCHING "+e+" MISSING METADATA "),this._D(e)):(t.fA=n,this.rM(n.getBitrate()))}else this.logger.debug(this.loggerId+"PLAYER NOT PLAYING "),this._D(e)}},E.prototype.uM=function(t){var e=this.VD.get(t);e&&e._D&&(null!=e.fA?(this.logger.debug(this.loggerId+"RESTART PREFETCHING ON AVAILABLE METADATA"),e._D=!1,this.rM(e.bitrate)):(e._D=!1,this.sM(e,t)))},E.prototype.aM=function(t){var e=this;t?this.uM(t):this.VD.forEach((function(t,i){e.uM(i)}))},E.prototype.rM=function(t){var e=this.xD.WD();if(e){var i=this.VD.get(t);if(i){if(i.fA&&e.getBitrate()==t){var r=this.fM(i.fA.cA(),t);this.PD.setDelta(r)}this.cM(i)}}else g.ErrorMonitor.lt().logError("Error attempting prefetch before having a player request",this.loggerId,v.Ws.Js)},E.prototype.cM=function(t){if(t.fA){var e=this.lM(t.fA);if(null!=e)this.vM(e,t);else{var i=t.bitrate;this.logger.debug(this.loggerId+"PREFETCHING "+i+" STOPPED BECAUSE OF MISSING METADATA "),this.VD.get(i)._D=!0,this._D(i)}}else t._D=!0,this._D(t.bitrate)},E.prototype.vM=function(t,e){var i=this,n=this.dM(t,e.type);if(n.EM)try{this.pM.has(t.jp())&&c.Framework.clearTimeout(this.pM.get(t.jp()));var o=n.type==h.fp.vp,s=1;if(o){var a=Math.max(0,e.AD);s=this.LD.wM(e.type,t.getBitrate(),t.cA(),a)}this.logger.debug(this.loggerId+"PREFETCHING "+t.url+" CDN PREFETCH "+o+" IN "+s+" MSECS");var u=this.VD.get(t.getBitrate());u.fA=t;var p=c.Framework.setTimeout((function(){i.pM.delete(t.jp());var o=new f.HiveRequest(i.pluginId);o.url=t.url,u.nM=c.Framework.time(),i.gM=0;var s=i.MD.bM(o,t,i.context,n.type);s&&(s.Yp=e.type==r.ID||e.type==r.RD,o.onerror=o.onload=function(){if(s.kp()==h.fp.vp&&(!o.status||o.status<200||299<o.status)){var e=i.VD.get(t.getBitrate());o=null;var r=e.fA.duration,n=e.fA.duration+l.ea.Ku._o,a=Math.floor(c.Framework.random()*(n-r))+r;e.AD=a-(c.Framework.time()-e.nM),e.ND=0,i.rM(e.fA.bitrate)}})}),s);this.pM.set(t.jp(),p)}catch(e){g.ErrorMonitor.lt().logError("Error requesting for prefetch",this.loggerId,v.Ws.te,e)}},E.prototype.yM=function(){var t=this;this.pM.forEach((function(e,i){t.logger.debug(t.loggerId+"Clearing delayed prefetch timer id "+e),c.Framework.clearTimeout(e),t.pM.delete(i)})),this.isActive=!1},E.prototype._D=function(t){this.VD.has(t)&&(this.VD.get(t)._D=!0,this.xD.TM(t))},E.prototype.lM=function(t){try{var e=this.VD.get(t.getBitrate()),i=t,r=this.mM(i);return r&&r.jp()!=t.jp()?r:r&&r.jp()==e.fA.jp()?t:null}catch(t){return g.ErrorMonitor.lt().logError("Error forwarding to next segment",this.loggerId,v.Ws.zs,t),null}},E.prototype.mM=function(t){if(null==t)return null;var e=this.fg.OM(!0),i=t;if(e)for(;null!=i&&-1!=e.indexOf(i.jp());)if(!(i=this.xD.SM(i)))return i;return i},E.prototype.dM=function(t,e){try{var i,n=this.RM(t),o=n?h.fp.pp:h.fp.vp;i=e!=r.Rf?!this.pM.has(t.jp())||o!=h.fp.vp:o==h.fp.pp;var s=this.xD.IM(),a=this._M(t.cA(),t.getBitrate(),o),u=e==r.ID;return this.logger.debug(this.loggerId+"PREFETCHING "+h.fp[o]+" (LAN LEADER: "+this.PD.AM()+" SITE LEADER: "+u+") CHECKS FOR "+t.jp()+" [HAVES:"+n+" NOTBUFFERING:"+s+" DISTANCE:"+a.valid+"("+a.NM+")]"),{EM:i&&s&&a.valid&&this.isActive,type:o}}catch(t){return g.ErrorMonitor.lt().logError("Error checking if allowed to prefetch",this.loggerId,v.Ws.Zs,t),{EM:!1,type:h.fp.vp}}},E.prototype._M=function(t,e,i){try{var r=this.xD.CM(t,e);return r<=this.xD.kM()?{NM:r,valid:!0}:{NM:r,valid:!1}}catch(t){return g.ErrorMonitor.lt().logError("Error checking the player distance",this.loggerId,v.Ws.ie,t),{NM:0,valid:!1}}},E.prototype.fM=function(t,e){var i=this.xD.WD();if(null==i)return-1;var r=i.cA();return this.xD.DM(r,e,t,e)},E.prototype.RM=function(t){var e=t.jp(),i=t.getDuration(),r=t.cA(),n=t.getBitrate();if(this.kD.contains(e)){var s=this.kD.MM(e),a=this.kD.jM(e);if(a.length>=l.ea.Ku.ko){if(l.ea.Ku.jo){var u=[];u[o.RD]=[],u[o.ID]=[],u[o.AS]=[],u[o.Tf]=[];var h=this.PD.PM(),c=this.PD.HM();a.forEach((function(t){if(t.LM.peerInfo.type!=d.mf.k){var e=t.LM.peerInfo.internalAs;if(0!=h&&e&&h==e)u[o.ID].push(t);else{if(l.ea.Ku.Qo){var i=t.LM.peerInfo.externalAs;if(0!=c&&c===i)return void u[o.AS].push(t)}t.LM.peerInfo.type==d.mf.Of&&u[o.Tf].push(t)}}else u[o.RD].push(t)}));var p=null,f=!1,g=!0;return 0<u[o.RD].length&&(f=this.UM?!this.FM(u[o.RD],e):(p=o.RD,!0)),!this.PD.AM()&&this.PD.GM()||0<u[o.ID].length&&(p=o.ID,f=!0),!this.PD.xM()&&this.PD.BM()&&0<u[o.AS].length&&(p=o.AS,f=!0),0<u[o.Tf].length&&(this.PD.VM()||!(this.PD.xM()||this.PD.BM()&&l.ea.Ku.Qo))&&(p=o.Tf,f=!0),f&&p>=l.ea.Ku.Wo&&(g=this.qM(u[p],s,i,r,n)),!(!f||!g||(this.logger.debug("down from "+o[p]+" with haves : "+u[o.RD].length+" "+u[o.ID].length+" "+u[o.AS].length+" "+u[o.Tf].length),0))}return!0}}return!1},E.prototype.qM=function(t,e,i,r,n){var o=this;return t.some((function(t){var s=t.QM();if(0<s){var a=e.size/s,u=o.xD.CM(r,n),h=!1;return u<i?(h=a<=u*l.ea.Ku.Yo,o.logger.debug("can download from "+t.guid+" size: "+e.size+" rate: "+s+" dTime: "+a+" fDistance: "+u*l.ea.Ku.Yo)):(h=a<=i*l.ea.Ku.Yo,o.logger.debug("can download from "+t.guid+" size: "+e.size+" rate: "+s+" dTime: "+a+" fDuration: "+i*l.ea.Ku.Yo)),h}}))},E.prototype.FM=function(t,e){try{return this.PD.WM().length>l.ea.Ku.Bo&&(this.PD.YM(),t.length==l.ea.Ku.xo&&t[0].guid==this.PD.KM().uuid&&c.Framework.random()>l.ea.Ku.Vo&&this.gM<l.ea.Ku.qo&&(this.logger.debug("SKIP PREFETCH CYCLE "+this.gM+" TO OFFLOAD LEADER"),this.gM++,!0))}catch(t){return g.ErrorMonitor.lt().logError("Error deciding to offload the leader",this.loggerId,v.Ws.ne,t),!1}},E.prototype.$M=function(t,e){try{t.XM=t.zp.id,t.zp=e,this.logger.debug(this.loggerId+"UPGRADE "+h.fp[t.kp()]+" REQ "+t.Hp+" FOR "+t.Mp.jp()),t.kp()==h.fp.pp?(t.Vp.p2pAgenTrafficSuccessQt=t.Jp,t.Kp?(t.type=h.fp.Ep,this.jD.JM(t)||(this.logger.debug(this.loggerId+"SET REQUEST TIMED-OUT WAS 0. CDN COMPENSATION"),this.jD.zM(t.ZM,"TIMED-OUT"))):(t.type=h.fp.cp,this.logger.debug(this.loggerId+"THE HIVE REQ "+t.jp()+" ARRIVED BEFORE THE P2P_PREFETCH INITIALIZED. CHANGE REQUEST TYPE TO "+h.fp[t.kp()]))):t.kp()==h.fp.vp&&(t.type=h.fp.cp)}catch(t){g.ErrorMonitor.lt().logError("Error upgrading prefetch",this.loggerId,v.Ws.re,t)}},E);function E(){this.loggerId="[Prefetcher] ",this.UM=!0,this.gM=0,this.isActive=!0,this.pM=new u,this.VD=new u}e.tj=m},function(t,e,i){var r=i(103),n=i(104),o=n;o.ij=r,o.Kk=n,t.exports=o},function(t,e,i){"use strict";t.exports=a,i(11);var r=i(12),n=i(70),o=i(13),s=i(40);function a(t,e,i){if(!(this instanceof a))return new a(t,e,i);var r=this.head=new this.Node;(r.next=r).nj=r,this.Kh=e||Object.Wh,this.Xh=i||Function.Yh,this.length=0,this.hiveAddEach(t)}function u(t){this.head=t,this.rj=t.next}function h(t){this.value=t,this.nj=null,this.next=null}a.sj=a,Object.hiveAddEach(a.prototype,r.prototype),Object.hiveAddEach(a.prototype,n.prototype),Object.hiveAddEach(a.prototype,o.prototype),Object.hiveAddEach(a.prototype,s.prototype),a.prototype.zh=function(t){return new this.constructor(t,this.Kh,this.Xh)},a.prototype.find=function(t,e,i){e=e||this.Kh;for(var r=this.head,n=this.ej(i,r.next);n!==r;){if(e(n.value,t))return n;n=n.next}},a.prototype.findLast=function(t,e,i){e=e||this.Kh;for(var r=this.head,n=this.ej(i,r.nj);n!==r;){if(e(n.value,t))return n;n=n.nj}},a.prototype.has=function(t,e){return!!this.find(t,e)},a.prototype.get=function(t,e){var i=this.find(t,e);return i?i.value:this.Xh(t)},a.prototype.delete=function(t,e){var i=this.findLast(t,e);if(i){if(this.$C){var r=[],n=[t];this.tk(r,n,i.index)}return i.delete(),this.length--,this.$C&&(this.hj(i.next,i.index),this.JC(r,n,i.index)),!0}return!1},a.prototype.hk=function(t,e){e=e||this.Kh;for(var i=this.head,r=i.next,n=0;r!==i;)e(t,r.value)&&(r.delete(),n++),r=r.next;return this.length-=n,n},a.prototype.clear=function(){var t,e;this.$C&&(e=this.toArray(),t=[],this.tk(t,e,0)),this.head.next=this.head.nj=this.head,this.length=0,this.$C&&this.JC(t,e,0)},a.prototype.hiveAdd=function(t){var e=new this.Node(t);return this.$C&&(e.index=this.length,this.tk([t],[],e.index)),this.head.oj(e),this.length++,this.$C&&this.JC([t],[],e.index),!0},a.prototype.push=function(){var t=this.head;if(this.$C){var e=Array.prototype.slice.call(arguments),i=[],r=this.length;this.tk(e,i,r);var n=this.head.nj}for(var o=0;o<arguments.length;o++){var s=arguments[o],a=new this.Node(s);t.oj(a)}this.length+=arguments.length,this.$C&&(this.hj(n.next,void 0===n.index?0:n.index+1),this.JC(e,i,r))},a.prototype.unshift=function(){if(this.$C){var t=Array.prototype.slice.call(arguments),e=[];this.tk(t,e,0)}for(var i=this.head,r=0;r<arguments.length;r++){var n=arguments[r],o=new this.Node(n);i.uj(o),i=o}this.length+=arguments.length,this.$C&&(this.hj(this.head.next,0),this.JC(t,e,0))},a.prototype.pop=function(){var t,e=this.head;if(e.nj!==e){if(t=e.nj.value,this.$C){var i=[],r=[t],n=this.length-1;this.tk(i,r,n)}e.nj.delete(),this.length--,this.$C&&this.JC(i,r,n)}return t},a.prototype.shift=function(){var t,e=this.head;if(e.nj!==e){if(t=e.next.value,this.$C){var i=[],r=[t];this.tk(i,r,0)}e.next.delete(),this.length--,this.$C&&(this.hj(this.head.next,0),this.JC(i,r,0))}return t},a.prototype.aj=function(){if(this.head!==this.head.next)return this.head.next.value},a.prototype.fj=function(t){this.head!==this.head.next?this.head.next.value=t:this.push(t)},a.prototype.xf=function(){return this.aj()},a.prototype.ej=function(t,e){var i=this.head;if("number"!=typeof t)return t||e;var r=t;if(0<=r)for(t=i.next;r&&(r--,(t=t.next)!=i););else for(t=i;r<0&&(r++,(t=t.nj)!=i););return t},a.prototype.slice=function(t,e){var i=[],r=this.head;for(t=this.ej(t,r.next),e=this.ej(e,r);t!==e&&t!==r;)i.push(t.value),t=t.next;return i},a.prototype.splice=function(t,e){return this.cj(t,e,Array.prototype.slice.call(arguments,2))},a.prototype.cj=function(t,e,i){var r=t;t=this.ej(t,this.head),null==e&&(e=1/0),i=Array.from(i);for(var n,o,s=[],a=t;e--&&0<=e&&a!==this.head;)s.push(a.value),a=a.next;this.$C&&(n=t===this.head?this.length:t.nj===this.head?0:t.index,o=t.nj,this.tk(i,s,n)),a=t;var u=0;for(a=t;u<s.length;u++,a=a.next)a.delete();for(null==r&&a===this.head&&(a=this.head.next),u=0;u<i.length;u++){var h=new this.Node(i[u]);a.oj(h)}return this.length+=i.length-s.length,this.$C&&(t===this.head?this.hj(this.head.next,0):this.hj(o.next,o.index+1),this.JC(i,s,n)),s},a.prototype.reverse=function(){if(this.$C){var t=this.toArray(),e=t.reversed();this.tk(e,t,0)}var i=this.head;do{var r=i.next;i.next=i.nj,i.nj=r,i=i.next}while(i!==this.head);return this.$C&&this.JC(e,t,0),this},a.prototype.sort=function(){this.cj(0,this.length,this.Ff())},a.prototype.reduce=function(t,e){for(var i=arguments[2],r=this.head,n=r.next;n!==r;)e=t.call(i,e,n.value,n,this),n=n.next;return e},a.prototype.reduceRight=function(t,e){for(var i=arguments[2],r=this.head,n=r.nj;n!==r;)e=t.call(i,e,n.value,n,this),n=n.nj;return e},a.prototype.hj=function(t,e){for(;t!==this.head;)t.index=e++,t=t.next},a.prototype.tc=function(){this.head.index=-1,this.hj(this.head.next,0),this.$C=!0},a.prototype.Bf=function(){return new u(this.head)},u.prototype.lj=null,Object.defineProperty(u.prototype,"vj",{get:function(){return this.lj||(this.lj={done:!1,value:null})}}),u.prototype.next=function(){if(this.rj===this.head)this.vj.done=!0,this.vj.value=void 0;else{var t=this.rj.value;this.rj=this.rj.next,this.vj.value=t}return this.vj},(a.prototype.Node=h).prototype.delete=function(){this.nj.next=this.next,this.next.nj=this.nj},h.prototype.oj=function(t){var e=this.nj;(((this.nj=t).nj=e).next=t).next=this},h.prototype.uj=function(t){var e=this.next;(((this.next=t).next=e).nj=t).nj=this}},function(t,e,i){"use strict";i(11);var r=i(12),n=i(53),o=i(13);function s(t,e){if(!(this instanceof s))return new s(t,e);e=e||Function.Yh,this.Xh=e,this.store=Object.create(null),this.length=0,this.hiveAddEach(t)}(t.exports=s).dj=s,Object.hiveAddEach(s.prototype,r.prototype),Object.hiveAddEach(s.prototype,n.prototype),Object.hiveAddEach(s.prototype,o.prototype),s.prototype.zh=function(t){return new this.constructor(t,this.Xh)},s.prototype.Ej=function(t){if("string"!=typeof t)throw new TypeError("key must be a string but Got "+t)},Object.defineProperty(s.prototype,"pj",{writable:!0}),Object.defineProperty(s.prototype,"wj",{get:function(){return this.hasOwnProperty("$__proto__")&&void 0!==this.gj}}),Object.defineProperty(s.prototype,"gj",{get:function(){return this.pj},set:function(t){this.pj=t}}),s.prototype.get=function(t,e){return this.Ej(t),"__proto__"===t?this.wj?this.gj:1<arguments.length?e:this.Xh(t):t in this.store?this.store[t]:1<arguments.length?e:this.Xh(t)},s.prototype.set=function(t,e){this.Ej(t);var i="__proto__"===t;return(i?this.wj:t in this.store)?(this.bj&&this.yj(t,i?this.gj:this.store[t]),i?this.gj=e:this.store[t]=e,this.bj&&this.Tj(t,e),!1):(this.bj&&this.yj(t,void 0),this.length++,i?this.gj=e:this.store[t]=e,this.bj&&this.Tj(t,e),!0)},s.prototype.has=function(t){return this.Ej(t),"__proto__"===t?this.wj:t in this.store},s.prototype.delete=function(t){return this.Ej(t),"__proto__"===t?!!this.wj&&(this.bj&&this.yj(t,this.gj),this.gj=void 0,this.length--,this.bj&&this.Tj(t,void 0),!0):t in this.store&&(this.bj&&this.yj(t,this.store[t]),delete this.store[t],this.length--,this.bj&&this.Tj(t,void 0),!0)},s.prototype.clear=function(){var t;for(t in this.wj&&(this.bj&&this.yj("__proto__",this.gj),this.gj=void 0,this.bj&&this.Tj("__proto__",void 0)),this.store)this.bj&&this.yj(t,this.store[t]),delete this.store[t],this.bj&&this.Tj(t,void 0);this.length=0},s.prototype.reduce=function(t,e,i){this.wj&&(e=t.call(i,e,"$__proto__","__proto__",this));var r=this.store;for(var n in this.store)e=t.call(i,e,r[n],n,this);return e},s.prototype.reduceRight=function(t,e,i){var r=this,n=this.store;return e=Object.keys(this.store).reduceRight((function(e,o){return t.call(i,e,n[o],o,r)}),e),this.wj?t.call(i,e,this.gj,"__proto__",r):e},s.prototype.xf=function(){var t;for(t in this.store)return this.store[t];return this.gj},s.prototype.toJSON=function(){return this.Df()}},function(t,e,i){"use strict";var r=i(38),n=i(106),o=i(13);function s(){throw new Error("Can't construct. GenericMap is a mixin.")}function a(t,e){this.key=t,this.value=e}t.exports=s,r.hiveAddEach(s.prototype,n.prototype),r.hiveAddEach(s.prototype,o.prototype),s.prototype.isMap=!0,s.prototype.hiveAddEach=function(t){if(t&&r(t)===t)if("function"==typeof t.forEach)!0===t.isMap?t.forEach((function(t,e){this.set(e,t)}),this):t.forEach((function(t){this.set(t[0],t[1])}),this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.hiveAdd(t[e],e);else r.keys(t).forEach((function(e){this.set(e,t[e])}),this);else if(t&&"number"==typeof t.length)for(e=0;e<t.length;e++)this.hiveAdd(t[e],e);return this},s.prototype.get=function(t,e){var i=this.store.get(new this.mj(t));return i?i.value:1<arguments.length?e:this.Xh(t)},s.prototype.set=function(t,e){var i=new this.mj(t,e),r=this.store.get(i),n=!1;return r?(this.bj&&this.yj(t,r.value),r.value=e):(this.bj&&this.yj(t,void 0),this.store.hiveAdd(i)&&(this.length++,n=!0)),this.bj&&this.Tj(t,e),n},s.prototype.hiveAdd=function(t,e){return this.set(e,t)},s.prototype.has=function(t){return this.store.has(new this.mj(t))},s.prototype.delete=function(t){var e=new this.mj(t);if(this.store.has(e)){var i=this.store.get(e).value;return this.bj&&this.yj(t,i),this.store.delete(e),this.length--,this.bj&&this.Tj(t,void 0),!0}return!1},s.prototype.clear=function(){var t;this.bj&&(this.forEach((function(t,e){this.yj(e,t)}),this),t=this.keys()),this.store.clear(),this.length=0,this.bj&&t.forEach((function(t){this.Tj(t)}),this)},s.prototype.reduce=function(t,e,i){return this.store.reduce((function(e,r){return t.call(i,e,r.value,r.key,this)}),e,this)},s.prototype.reduceRight=function(t,e,i){return this.store.reduceRight((function(e,r){return t.call(i,e,r.value,r.key,this)}),e,this)},s.prototype.keys=function(){return this.map((function(t,e){return e}))},s.prototype.values=function(){return this.map(Function.identity)},s.prototype.entries=function(){return this.map((function(t,e){return[e,t]}))},s.prototype.items=function(){return this.entries()},s.prototype.Wh=function(t,e){return e=e||r.Wh,this===t||(t&&"function"==typeof t.every?t.length===this.length&&t.every((function(t,i){return e(this.get(i),t)}),this):r.keys(t).length===this.length&&r.keys(t).every((function(i){return e(this.get(i),t[i])}),this))},s.prototype.toJSON=function(){return this.entries()},(s.prototype.mj=a).prototype.Wh=function(t){return r.Wh(this.key,t.key)&&r.Wh(this.value,t.value)},a.prototype.compare=function(t){return r.compare(this.key,t.key)}},function(t,e,i){var r;
/*!
 * UAParser.js v0.7.20
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */
/*!
 * UAParser.js v0.7.20
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */!function(n,o){"use strict";var s="undefined",a="model",u="name",h="type",c="vendor",l="version",p="architecture",f="console",d="mobile",g="tablet",v="smarttv",y="wearable",m={extend:function(t,e){var i={};for(var r in t)e[r]&&e[r].length%2==0?i[r]=e[r].concat(t[r]):i[r]=t[r];return i},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},Oj:function(t){return t.toLowerCase()},Sj:function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},E={Rj:function(t,e){for(var i,r,n,s,a,u,h=0;h<e.length&&!a;){var c=e[h],l=e[h+1];for(i=r=0;i<c.length&&!a;)if(a=c[i++].exec(t))for(n=0;n<l.length;n++)u=a[++r],"object"==typeof(s=l[n])&&0<s.length?2==s.length?"function"==typeof s[1]?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3==s.length?"function"!=typeof s[1]||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):o:this[s[0]]=u?s[1].call(this,u,s[2]):o:4==s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):o):this[s]=u||o;h+=2}},str:function(t,e){for(var i in e)if("object"==typeof e[i]&&0<e[i].length){for(var r=0;r<e[i].length;r++)if(m.has(e[i][r],t))return"?"===i?o:i}else if(m.has(e[i],t))return"?"===i?o:i;return t}},w={_C:{Ij:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419",Ey:"/"}}},_j:{Aj:{Nj:{Cj:["SD","KF"]}},kj:{Nj:{Dj:"7373KT"},vendor:{Mj:"APA",jj:"Sprint"}}},os:{Pj:{version:{Hj:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",Lj:["NT 5.1","NT 5.2"],Uj:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],Fj:"ARM"}}}},b={_C:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[u,l],[/(opios)[\/\s]+([\w\.]+)/i],[[u,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[u,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[u,l],[/(konqueror)\/([\w\.]+)/i],[[u,"Konqueror"],l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[u,"IE"],l],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[u,"Edge"],l],[/(yabrowser)\/([\w\.]+)/i],[[u,"Yandex"],l],[/(puffin)\/([\w\.]+)/i],[[u,"Puffin"],l],[/(focus)\/([\w\.]+)/i],[[u,"Firefox Focus"],l],[/(opt)\/([\w\.]+)/i],[[u,"Opera Touch"],l],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[u,"UCBrowser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],l],[/(windowswechat qbcore)\/([\w\.]+)/i],[[u,"WeChat(Win) Desktop"],l],[/(micromessenger)\/([\w\.]+)/i],[[u,"WeChat"],l],[/(brave)\/([\w\.]+)/i],[[u,"Brave"],l],[/(qqbrowserlite)\/([\w\.]+)/i],[u,l],[/(QQ)\/([\d\.]+)/i],[u,l],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[u,l],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[u,l],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[u,l],[/(MetaSr)[\/\s]?([\w\.]+)/i],[u],[/(LBBROWSER)/i],[u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[u,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[l,[u,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[u,l],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[u,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[u,/(.+)/,"$1 WebView"],l],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[u,/(.+(?:g|us))(.+)/,"$1 $2"],l],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[u,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[u,"Sailfish Browser"],l],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[u,l],[/(dolfin)\/([\w\.]+)/i],[[u,"Dolphin"],l],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[u,"Chrome"],l],[/(coast)\/([\w\.]+)/i],[[u,"Opera Coast"],l],[/fxios\/([\w\.-]+)/i],[l,[u,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[u,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,u],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[u,"GSA"],l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[u,[l,E.str,w._C.Ij.version]],[/(webkit|khtml)\/([\w\.]+)/i],[u,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[u,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[u,l]],Gj:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,m.Oj]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[p,/ower/,"",m.Oj]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[p,m.Oj]]],_j:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[a,c,[h,g]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[c,"Apple"],[h,g]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,a,[h,g]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[c,"Amazon"],[h,g]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,E.str,w._j.Aj.Nj],[c,"Amazon"],[h,d]],[/android.+aft([bms])\sbuild/i],[a,[c,"Amazon"],[h,v]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,c,[h,d]],[/\((ip[honed|\s\w*]+);/i],[a,[c,"Apple"],[h,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,a,[h,d]],[/\(bb10;\s(\w+)/i],[a,[c,"BlackBerry"],[h,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[a,[c,"Asus"],[h,g]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[a,"Xperia Tablet"],[h,g]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[c,"Sony"],[h,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,a,[h,f]],[/android.+;\s(shield)\sbuild/i],[a,[c,"Nvidia"],[h,f]],[/(playstation\s[34portablevi]+)/i],[a,[c,"Sony"],[h,f]],[/(sprint\s(\w+))/i],[[c,E.str,w._j.kj.vendor],[a,E.str,w._j.kj.Nj],[h,d]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[a,/_/g," "],[h,d]],[/(nexus\s9)/i],[a,[c,"HTC"],[h,g]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[a,[c,"Huawei"],[h,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,a,[h,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[c,"Microsoft"],[h,f]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[c,"Microsoft"],[h,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[c,"Motorola"],[h,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[c,"Motorola"],[h,g]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,m.trim],[a,m.trim],[h,v]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[c,"Samsung"],[h,v]],[/\(dtv[\);].+(aquos)/i],[a,[c,"Sharp"],[h,v]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],a,[h,g]],[/smart-tv.+(samsung)/i],[c,[h,v],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[c,"Samsung"],a,[h,d]],[/sie-(\w*)/i],[a,[c,"Siemens"],[h,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[c,"Nokia"],a,[h,d]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[c,"Acer"],[h,g]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[c,"LG"],[h,g]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],a,[h,g]],[/(lg) netcast\.tv/i],[c,a,[h,v]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[c,"LG"],[h,d]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[c,a,[h,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[c,"Lenovo"],[h,g]],[/(lenovo)[_\s-]?([\w-]+)/i],[c,a,[h,d]],[/linux;.+((jolla));/i],[c,a,[h,d]],[/((pebble))app\/[\d\.]+\s/i],[c,a,[h,y]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,a,[h,d]],[/crkey/i],[[a,"Chromecast"],[c,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[c,"Google"],[h,y]],[/android.+;\s(pixel c)[\s)]/i],[a,[c,"Google"],[h,g]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[a,[c,"Google"],[h,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[h,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[h,g]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[c,"Meizu"],[h,d]],[/(mz)-([\w-]{2,})/i],[[c,"Meizu"],a,[h,d]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[a,[c,"OnePlus"],[h,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[c,"RCA"],[h,g]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[c,"Dell"],[h,g]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[c,"Verizon"],[h,g]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],a,[h,g]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[c,"NuVision"],[h,g]],[/android.+;\s(k88)\sbuild/i],[a,[c,"ZTE"],[h,g]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[c,"Swiss"],[h,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[c,"Swiss"],[h,g]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[c,"Zeki"],[h,g]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[c,"Dragon Touch"],a,[h,g]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[c,"Insignia"],[h,g]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[c,"NextBook"],[h,g]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],a,[h,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[c,"LvTel"],a,[h,d]],[/android.+;\s(PH-1)\s/i],[a,[c,"Essential"],[h,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[c,"Envizen"],[h,g]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[c,a,[h,g]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[c,"MachSpeed"],[h,g]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,a,[h,g]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[c,"Rotor"],[h,g]],[/android.+(KS(.+))\s+build/i],[a,[c,"Amazon"],[h,g]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[c,a,[h,g]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,m.Oj],c,a],[/[\s\/\(](smart-?tv)[;\)]/i],[[h,v]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)/i],[[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[u,l],[/rv\:([\w\.]{1,9}).+(gecko)/i],[l,u]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[u,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[u,[l,E.str,w.os.Pj.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[u,"Windows"],[l,E.str,w.os.Pj.version]],[/\((bb)(10);/i],[[u,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[u,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[u,"Symbian"],l],[/\((series40);/i],[u],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[u,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[u,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[u,"Chromium OS"],l],[/(sunos)\s?([\w\.\d]*)/i],[[u,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[u,l],[/(haiku)\s(\w+)/i],[u,l],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[l,/_/g,"."],[u,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[u,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[u,l]]},S=function(t,e){if("object"==typeof t&&(e=t,t=o),!(this instanceof S))return new S(t,e).xj();var i=t||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),r=e?m.extend(b,e):b;return this.Bj=function(){var t={name:o,version:o};return E.Rj.call(t,i,r._C),t.Sj=m.Sj(t.version),t},this.Vj=function(){var t={qj:o};return E.Rj.call(t,i,r.Gj),t},this.Qj=function(){var t={vendor:o,Nj:o,type:o};return E.Rj.call(t,i,r._j),t},this.Wj=function(){var t={name:o,version:o};return E.Rj.call(t,i,r.engine),t},this.yE=function(){var t={name:o,version:o};return E.Rj.call(t,i,r.os),t},this.xj=function(){return{rm:this.Yj(),_C:this.Bj(),engine:this.Wj(),os:this.yE(),_j:this.Qj(),Gj:this.Vj()}},this.Yj=function(){return i},this.bE=function(t){return i=t,this},this};S.VERSION="0.7.20",S.Kj={$j:u,Xj:"major",VERSION:l},S.Jj={zj:p},S.Zj={tP:a,VENDOR:c,iP:h,nP:f,rP:d,sP:v,eP:g,hP:y,oP:"embedded"},S.uP={$j:u,VERSION:l},S.aP={$j:u,VERSION:l},typeof e!=s?(typeof t!=s&&t.exports&&(e=t.exports=S),e.gE=S):(r=function(){return S}.call(e,i,e,t))===o||(t.exports=r);var T=n&&(n.jQuery||n.fP);if(typeof T!=s&&!T.rm){var I=new S;T.rm=I.xj(),T.rm.get=function(){return I.Yj()},T.rm.set=function(t){I.bE(t);var e=I.xj();for(var i in e)T.rm[i]=e[i]}}}("object"==typeof window?window:this)},function(t,e,i){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),i={},r=0;r<e.length;r++)i[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return i},n=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(a(arguments[i]));return e.join(" ")}i=1;for(var r=arguments,o=r.length,s=String(t).replace(n,(function(t){if("%%"===t)return"%";if(o<=i)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return t}})),u=r[i];i<o;u=r[++i])g(u)||!w(u)?s+=" "+u:s+=" "+a(u);return s},e.cP=function(i,r){if(void 0!==t&&!0===t.lP)return i;if(void 0===t)return function(){return e.cP(i,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(t.vP)throw new Error(r);t.dP?console.trace(r):console.error(r),n=!0}return i.apply(this,arguments)}};var o,s={};function a(t,i){var r={EP:[],pP:h};return 3<=arguments.length&&(r.wP=arguments[2]),4<=arguments.length&&(r.gP=arguments[3]),d(i)?r.bP=i:i&&e.yP(r,i),m(r.bP)&&(r.bP=!1),m(r.wP)&&(r.wP=2),m(r.gP)&&(r.gP=!1),m(r.TP)&&(r.TP=!0),r.gP&&(r.pP=u),c(r,t,r.wP)}function u(t,e){var i=a.mP[e];return i?"["+a.gP[i][0]+"m"+t+"["+a.gP[i][1]+"m":t}function h(t,e){return t}function c(t,i,r){if(t.TP&&i&&T(i.$e)&&i.$e!==e.$e&&(!i.constructor||i.constructor.prototype!==i)){var n=i.$e(r,t);return y(n)||(n=c(t,n,r)),n}var o=function(t,e){if(m(e))return t.pP("undefined","undefined");if(y(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.pP(i,"string")}return v(e)?t.pP(""+e,"number"):d(e)?t.pP(""+e,"boolean"):g(e)?t.pP("null","null"):void 0}(t,i);if(o)return o;var s=Object.keys(i),a=function(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}(s);if(t.bP&&(s=Object.getOwnPropertyNames(i)),S(i)&&(0<=s.indexOf("message")||0<=s.indexOf("description")))return l(i);if(0===s.length){if(T(i)){var u=i.name?": "+i.name:"";return t.pP("[Function"+u+"]","special")}if(E(i))return t.pP(RegExp.prototype.toString.call(i),"regexp");if(b(i))return t.pP(Date.prototype.toString.call(i),"date");if(S(i))return l(i)}var h,w="",I=!1,_=["{","}"];return f(i)&&(I=!0,_=["[","]"]),T(i)&&(w=" [Function"+(i.name?": "+i.name:"")+"]"),E(i)&&(w=" "+RegExp.prototype.toString.call(i)),b(i)&&(w=" "+Date.prototype.toUTCString.call(i)),S(i)&&(w=" "+l(i)),0!==s.length||I&&0!=i.length?r<0?E(i)?t.pP(RegExp.prototype.toString.call(i),"regexp"):t.pP("[Object]","special"):(t.EP.push(i),h=I?function(t,e,i,r,n){for(var o=[],s=0,a=e.length;s<a;++s)O(e,String(s))?o.push(p(t,e,i,r,String(s),!0)):o.push("");return n.forEach((function(n){n.match(/^\d+$/)||o.push(p(t,e,i,r,n,!0))})),o}(t,i,r,a,s):s.map((function(e){return p(t,i,r,a,e,I)})),t.EP.pop(),function(t,e,i){return 60<t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(h,w,_)):_[0]+w+_[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,i,r,n,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?a=u.set?t.pP("[Getter/Setter]","special"):t.pP("[Getter]","special"):u.set&&(a=t.pP("[Setter]","special")),O(r,n)||(s="["+n+"]"),a||(t.EP.indexOf(u.value)<0?-1<(a=g(i)?c(t,u.value,null):c(t,u.value,i-1)).indexOf("\n")&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.pP("[Circular]","special")),m(s)){if(o&&n.match(/^\d+$/))return a;s=(s=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),t.pP(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.pP(s,"string"))}return s+": "+a}function f(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function g(t){return null===t}function v(t){return"number"==typeof t}function y(t){return"string"==typeof t}function m(t){return void 0===t}function E(t){return w(t)&&"[object RegExp]"===I(t)}function w(t){return"object"==typeof t&&null!==t}function b(t){return w(t)&&"[object Date]"===I(t)}function S(t){return w(t)&&("[object Error]"===I(t)||t instanceof Error)}function T(t){return"function"==typeof t}function I(t){return Object.prototype.toString.call(t)}function _(t){return t<10?"0"+t.toString(10):t.toString(10)}e.OP=function(i){if(m(o)&&(o=t.Xe.SP||""),i=i.toUpperCase(),!s[i])if(new RegExp("\\b"+i+"\\b","i").test(o)){var r=t.RP;s[i]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",i,r,t)}}else s[i]=function(){};return s[i]},(e.$e=a).gP={bold:[1,22],IP:[3,23],_P:[4,24],inverse:[7,27],AP:[37,39],NP:[90,39],CP:[30,39],blue:[34,39],kP:[36,39],green:[32,39],DP:[35,39],red:[31,39],MP:[33,39]},a.mP={jP:"cyan",number:"yellow",PP:"yellow",undefined:"grey",null:"bold",string:"green",wR:"magenta",HP:"red"},e.isArray=f,e.fm=d,e.lm=g,e.LP=function(t){return null==t},e.vm=v,e.dm=y,e.UP=function(t){return"symbol"==typeof t},e.Em=m,e.FP=E,e.cc=w,e.GP=b,e.xP=S,e.cm=T,e.BP=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(123);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[_(t.getHours()),_(t.getMinutes()),_(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.Sw=i(124),e.yP=function(t,e){if(!e||!w(e))return t;for(var i=Object.keys(e),r=i.length;r--;)t[i[r]]=e[i[r]];return t};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(t,e){if(!t){var i=new Error("Promise was rejected with a falsy value");i.reason=t,t=i}return e(t)}e.VP=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(A&&t[A]){var e;if("function"!=typeof(e=t[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,A,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,i,r=new Promise((function(t,r){e=t,i=r})),n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);n.push((function(t,r){t?i(t):e(r)}));try{t.apply(this,n)}catch(r){i(r)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),A&&Object.defineProperty(e,A,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.VP.qP=A,e.QP=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function i(){for(var i=[],r=0;r<arguments.length;r++)i.push(arguments[r]);var n=i.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");function o(){return n.apply(s,arguments)}var s=this;e.apply(this,i).then((function(e){t.Ve(o,null,e)}),(function(e){t.Ve(R,e,o)}))}return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),Object.defineProperties(i,r(e)),i}}).call(this,i(37))},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(31),n=i(3),o=i(22),s=i(15),a=i(125),u=i(18),h=i(126),c=i(1),l=(p.prototype.getName=function(){return p.WP},p.prototype.id=function(){return"["+p.WP+"] "},p.prototype.getVersion=function(){return this.YP.getPluginVersion()},p.prototype.KP=function(){return!0},p.prototype.$P=function(){return n.resolve(!0)},p.prototype.initSession=function(t,e){var i=this.XP(t,e.ticket,e.ticket.$k(),e);return o.HiveRequestFactory.registerTech(this.YP.getPluginId(),this.getName()),n.resolve(i)},p.prototype.JP=function(){return this.options().initTimeout},p.prototype.isActive=function(t,e,i){var r=e.manifest.toLowerCase().indexOf("/manifest");if(-1<r&&(!i||t===e.manifest)){var n=e.manifest.substring(0,r);if(-1<t.indexOf(n))return!0}else if(t==e.manifest)return!0;return!1},p.prototype.pd=function(t,e,i){void 0===i&&(i=!0),t.yd&&r.Hive.Reporting().ll(t.id)&&(this.YP.logger().debug("[StatsJS] stopping session ["+t.id+"] complete close: "+e),t.yd.Sl.xE(i),t.yd.bl.zP(),t.yd.bl.reset(e)),e?r.Hive.Reporting().close(t.id):this.gl(t,!0)},p.prototype.gl=function(t,e){var i=e?u.ul.IDLE:u.ul.al;this.YP.logger().notice("[HiveComm] client state: "+u.ul[i]),t.yd&&t.yd.gl(i)},p.prototype.ZP=function(t,e){var i=this,r=0;return this.tH<e.totalBuffering&&(r=e.totalBuffering-this.tH,this.tH=e.totalBuffering),t.wd().then((function(){t.yd.pl.iH(r,e.bufferLength),t.yd.wl.uE(e.playingPoint,e.bufferLength,e.totalBuffering),i.nH()})).done(),n.resolve(!0)},p.prototype.rH=function(t,e,i){return t.wd().then((function(){t.yd.wl.fE(t.ticket.sessionId,e,i)})).done(),n.resolve(!0)},p.prototype.lE=function(t,e){return t.wd().then((function(){t.yd.wl.dE([e])})).done(),n.resolve(!0)},p.prototype.onError=function(t){var e=!0;if(null!=this.options().onError)try{e=this.options().onError(t)}catch(t){c.ErrorMonitor.lt().logError("exception in user-defined onError callback",this.id(),t)}return e},p.prototype.onActiveSession=function(t){var e=this;this.sH(),t.wd().then((function(i){e.eH=i;var r=new h.hH(e.YP.isLive(),e.YP.getStreamProtocol(),t.ticket.$k());e.eH.oH=r,e.eH.pl.oH=r,e.YP.updatePlayerInfo(e.eH),e.eH.bl.init(e.eH.pl,t.id),e.YP.options().testId&&e.eH.pl.uH(e.YP.options().testId),e.eH.wl.fd(t.ticket.sessionId,e.YP.getPlayerSource(),200);var n=e.YP.flushTechEvents();if(n&&0<n.length&&e.eH.wl.dE(n),null!=e.options_.onActiveSession)try{e.options_.onActiveSession(t.toHiveSession())}catch(i){c.ErrorMonitor.lt().logError("exception in user-defined onActiveSession callback",e.id(),i)}})).done()},p.prototype.aH=function(){},p.prototype.fH=function(){},p.prototype.cH=function(t){this.YP=t},p.prototype.options=function(){return this.options_},p.prototype.sH=function(){this.tH=0},p.prototype.XP=function(t,e,i,r){var n=new o.HiveSessionInternal(t,e,i,r);return n.lH=!1,n.id=e.sessionId,n},p.prototype.nH=function(){try{var t=this.YP.getExtendedStats();null!=t&&(this.eH.pl.vH.metrics.bitrateUpN+=t.getBitrateSwitchUp(),this.eH.pl.vH.metrics.bitrateDwnN+=t.getBitrateSwitchDown(),null!=t.getBandwidth()&&(this.eH.pl.vH.metrics.srcThroughput=t.getBandwidth()),null!=t.getVideoBitrates()&&this.dH(!0,t.getVideoBitrates()),null!=t.getAudioBitrates()&&this.dH(!1,t.getAudioBitrates()))}catch(t){c.ErrorMonitor.lt().logError("Error accounting extended stats",this.id(),t)}},p.prototype.dH=function(t,e){var i=this,r=0,n=0,o=0,s=0;e.forEach((function(e,a){var u=e.success+e.failed;if(r+=u,s+=e.bytes,n+=e.success,o+=e.failed,t){var h=i.eH.pl.EH(Number(a));i.pH(h,u,e.success,e.failed,e.bytes)}}));var a=this.eH.pl.wH();this.pH(a,r,n,o,s)},p.prototype.pH=function(t,e,i,r,n){t.srcReqN+=e,t.srcRespN+=i,t.srcRespErrN+=r,t.srcRespQt+=n,t.respFallbackN+=i,t.respFallbackErrN+=r},p.WP="StatsJS",p);function p(t,e){this.YP=t,this.options_=new a.gH,void 0!==e[p.WP]&&s.updateOptions(e[p.WP],this.options_)}e.StatsJS=l},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o=i(58),s=i(137),a=i(9),u=i(35),h=i(33),c=i(0),l=i(1),p=i(2),f=i(138),d=i(147),g=i(6),v=i(87),y=(m.bH=function(t){return this.yH(t)||-1!=t.indexOf(m.TH)},m.yH=function(t){return-1!=t.toLowerCase().indexOf(m.mH.toLowerCase())||-1!=t.toLowerCase().indexOf(m.OH.toLowerCase())},m.SH=function(t,e){var i=e.replace("_definst_/","").match(new RegExp(t.replace(".mpd","")+m.RH));return i&&0<i.length},m.IH=1,m._H=2,m.AH=2e3,m.NH=3e4,m.CH=1e4,m.kH=!0,m.DH=!0,m.MH=500,m.jH=16,m.PH=3,m.HH=10,m.DASH_METADATA_MIN_FRAGMENTS=3,m.mH="(format=mpd-time-csf)",m.OH=".mpd",m.RH="_.*.mpd",m.TH=".m4s",m.LH=".ism/",m);function m(){}e.DASH=y;var E,w=(n(b,E=o.UH),b.prototype.YM=function(){return this.ticket},b.prototype.getStreamProtocol=function(){return StreamProtocol.DASH},b.prototype.FH=function(){return this.GH},b.prototype.xH=function(){return this.BH.xH()},b.prototype.isLive=function(){return this.BH.isLive()},b.prototype.VH=function(){return this.qH},b.prototype.Gp=function(t){var e=this.Dp(t);if(e==a.wf.bf||e==a.wf.gf)return!0},b.prototype.Dp=function(t){try{if(y.yH(t))return a.wf.yf;if(this.QH(t))return a.wf.Tf;var e=this.BH.WH(t);return null!=e?e.type:-1!=t.indexOf("audio")?a.wf.gf:a.wf.Tf}catch(e){return l.ErrorMonitor.lt().logError("Error getting the entity type based on a url",this.loggerId,p.Wn.Yn,{detailedError:e,url:t}),a.wf.Tf}},b.prototype.YH=function(t){var e=a.wf.Tf,i=0,r=0,n=0,o=!0,s=!1,h=0;try{if(e=this.Dp(t),this.QH(t))o=!0;else if(e!=a.wf.yf){var c=this.BH.WH(t);if(null!=c){i=c.duration,r=c.bitrate,n=c.id,s=this.Gp(t);var f=this.BH.KH(t)/1e3;h=Math.round(i/f)}else{this.TM(),this.logger.warn("could not extract segment info for "+t);var d=this.BH.$H(t);d?(this.logger.warn("representation is",d),this.logger.warn("representation holds",d.XH.map((function(t,e){return e+" => "+t.id})))):this.logger.warn("no representation found for "+t)}}else o=!1;return new u.wA(t,e,o,n,h,r,s,this.getContextId())}catch(e){return l.ErrorMonitor.lt().logError("Error getting the entity characteristics based on a url",this.loggerId,p.Wn.Kn,{detailedError:e,url:t}),new u.wA(t,a.wf.Tf,!1,0,0,0,!1,this.getContextId())}},b.prototype.SM=function(t){try{var e=t.url,i=this.BH.JH(e);return null!=i?this.YH(i.zH):null}catch(e){return l.ErrorMonitor.lt().logError("Error getting the next entity",this.loggerId,p.Wn.$n,{detailedError:e,url:t.url}),null}},b.prototype.IM=function(){return E.prototype.ZH.call(this,y.IH,y._H)},b.prototype.tL=function(t){try{var e=t.url,i=g.La.Ca(e);return g.La.Ca(this.BH.iL),i===g.La.Ca(this.GH)||!(null==this.BH||!this.BH.QH(e))||!(y.yH(e)&&this.BH.iL!==e&&!y.SH(this.BH.iL,e))}catch(e){return l.ErrorMonitor.lt().logError("Error identifying if is current context",this.loggerId,p.Wn.Xn,{detailedError:e,url:t.url}),!1}},b.prototype.nL=function(t){try{this.rL=c.Framework.time();var e=t.sL,i=t.zp.url,r=this.BH.parse(i,e,t.zp.internal);this.hL.eL(),t.zp.responseText=r,t.zp.response=r,this.oL()}catch(e){l.ErrorMonitor.lt().logError("Error parsing received metadata",this.loggerId,p.Wn.Jn,{detailedError:e,url:t.zp.url}),t.sL&&(t.zp.responseText=t.sL,t.zp.response=t.sL)}try{this.uL.aM()}catch(e){l.ErrorMonitor.lt().logError("Error starting prefetcher after fetching metadata",this.loggerId,p.Wn.zn,{detailedError:e,url:t.zp.url})}this.aL()},b.prototype.fL=function(t){var e=this;try{E.prototype.fL.call(this,t),t.Dp()!==a.wf.bf&&t.Dp()!==a.wf.gf||(t.Dp()===a.wf.bf&&this.qH.cL(t),this.BH.fL(t).then((function(i){i&&e.aL(),t.Dp()==a.wf.bf&&e.uL.iM(t.Mp)})).done())}catch(t){l.ErrorMonitor.lt().logError("Error when received a fragment",this.loggerId,p.Wn.Zn,t)}},b.prototype.getContextId=function(){return this.ticket.Jk()},b.prototype.lL=function(t,e){var i=t;return i.vL=c.Framework.time(),E.prototype.lL.call(this,i,e)},b.prototype.DM=function(t,e,i,r){return this.BH.DM(t,e,i,r)},b.prototype.QH=function(t){return this.BH.QH(t)},b.prototype.aL=function(){var t=this;try{this.BH.dL?this.BH.dL.EL().then((function(e){if(e)t.pL=!0,t.logger.debug("Protection evaluation: can decrypt");else{var i="Protection evaluation: cannot decrypt ["+(y.kH?"error":"disabled")+"]";y.DH?(t.pL=!0,t.logger.debug(i+", metadata prefetch enabled")):t.logger.warn(i+", metadata prefetch DISABLED")}})).done():this.logger.debug("Protection evaluation: not encrypted")}catch(t){if(l.ErrorMonitor.lt().logError("Error evaluating the protection",this.loggerId,p.Wn.tr,t),y.DH){var e="Protection evaluation: cannot decrypt ["+(y.kH?"error":"disabled")+"]";this.pL=!0,this.logger.debug(e+", metadata prefetch enabled")}}},b.prototype.TM=function(){this.pL&&(null==this.wL&&this.BH.isLive()?this.gL():this.logger.debug("DASH PRE-FETCHING METADATA ALREADY SCHEDULED OR NOT LIVE"))},b.prototype.oL=function(){this.pL&&null!=this.wL&&(c.Framework.clearTimeout(this.wL),this.wL=null)},b.prototype.gL=function(){var t=this,e=(null!=this.rL?this.rL:0)+y.AH,i=Math.max(1,e-c.Framework.time()+y.MH);this.logger.debug("DASH PREFETCHING METADATA "+this.BH.iL+" IN "+i),this.wL=c.Framework.setTimeout((function(){t.bL(t.BH.iL,c.Framework.time())}),i)},b.prototype.bL=function(t,e){var i=this.rL;if(null==i&&(i=0),e<i&&this.gL(),this.BH&&this.BH.yL)this.wL=null,this.rL=c.Framework.time();else{var r=new h.HiveRequest(this.ticket.pluginId);r.open("GET",t),r.internal=!0,r.send(),this.wL=null,this.rL=c.Framework.time()}},b.prototype.TL=function(t){this.BH.authenticationToken=t},b.prototype.CM=function(t,e){try{var i=this.WD(),r=this.mL(),n=i.cA(),o=this.BH.DM(n,i.bitrate,t,e),s=c.Framework.time()-r;return Math.max(0,o-s)}catch(t){return l.ErrorMonitor.lt().logError("Error calculating the distance duration",this.loggerId,p.Wn.ir,t),0}},b.prototype.OL=function(t,e){return this.BH.OL(t,e)},b.prototype.SL=function(){return y.CH},b.prototype.oM=function(t,e,i){var r=this.BH.RL(t,e);return null!=r?new u.wA(r.zH,i,!0,t,r.duration,e,!0,this.getContextId()):null},b.prototype.kM=function(){return y.NH},b);function b(t,e,i){var r=E.call(this,e)||this;return r.Kv=0,r.pL=!0,r.loggerId="[Dash Context] ",r.ticket=t,r.GH=t.$k(),r.qH=new s.IL(e.PD),0<r.GH.indexOf(y.OH)?r.BH=new f._L(e.sessionId,i):r.BH=new d.AL(e.sessionId,i),r.hL=new v.NL(r.BH),r}e.CL=w},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(34),n=i(35),o=i(0),s=i(135),a=i(9),u=i(26),h=i(49),c=i(5),l=i(2),p=i(1),f=(d.prototype.YM=function(){return null},d.prototype.kL=function(){return this.uL},d.prototype.ZH=function(t,e){try{var i=0,r=0;if(this.DL.length<e)return!0;for(var n=this.DL.keys().reverse(),o=n[0],s=this.DL.get(o).bitrate,a=n.slice(1),u=0;u<a.length;u++){var h=a[u],c=this.DL.get(h),f=c.vL,d=c.bitrate,g=Math.abs(c.vL-o);if(d!=s)return!1;if(g<t){if(++r>=e)return!1}else{if(++i>e)return!0;r=Math.max(0,r-1),o=f,s=d}}return!1}catch(t){return p.ErrorMonitor.lt().logError("Error calculating if the player is in buffering mode",this.ML,l.Mr.jr,t),!1}},d.prototype.getContextId=function(){return null},d.prototype.lL=function(t,e){if(this.jL(e)){var i=this.WD();if(i){var r=t.getBitrate(),n=i.getBitrate();n<r?this.HL.PL(!0):r<n&&this.HL.PL(!1)}else this.HL.PL(!0);if(this.DL.length>c.ea.$u.Ko){var s=this.DL.keys()[0];this.DL.delete(s)}this.DL.set(o.Framework.time(),t)}return this.LL(t,e)},d.prototype.LL=function(t,e){var i=new s.UL;try{if(this.uL.BD(t.bitrate)){if(this.GL.FL(t.jp())){i.xL=!0;var r=this.GL.BL(t.jp());this.VL(e,r,i)}if(this.GL.qL(t.jp()))for(var n=this.GL.QL(t.jp()),o=0,a=n;o<a.length;o++){var u=a[o];this.VL(e,u.kp(),i),i.WL=!0}}else{var c=h.SD.Rf;this.PD.AM()&&(c=h.SD.RD),this.uL.XD(t.bitrate,c,c)}return i}catch(t){return p.ErrorMonitor.lt().logError("Error configuring the request directive",this.ML,l.Mr.Pr,t),new s.UL}},d.prototype.VL=function(t,e,i){t!=u.fp.vp&&t!=u.fp.pp||e!=u.fp.cp&&e!=u.fp.pp&&e!=u.fp.vp||(i.YL=!0)},d.prototype.jL=function(t){return t!=u.fp.pp&&t!=u.fp.vp},d.prototype.KL=function(t,e,i){var r=[];try{for(var n=this.GL.QL(e.jp()),o=0,s=n;o<s.length;o++){var a=s[o];a.kp()!=u.fp.cp&&(this.uL.$M(a,t),r.push(a.XM))}return r}catch(t){return p.ErrorMonitor.lt().logError("Error attempting to upgrade prefetch",this.ML,l.Mr.Hr,t),[]}},d.prototype.$L=function(t){this.GL.$L(t)},d.prototype.XL=function(t,e){this.GL.XL(t,e)},d.prototype.JL=function(t){this.GL.JL(t)},d.prototype.zL=function(t){this.GL.ZL(t)},d.prototype.tU=function(t){this.GL.iU()||this.uL.rM(t)},d.prototype.WD=function(){var t=this.DL.keys();return 0<t.length?this.DL.get(t[t.length-1]):null},d.prototype.mL=function(){var t=this.DL.keys();if(0<t.length)return t[t.length-1]},d.prototype.nU=function(t){var e=this.rU(t);null!=e&&this.tU(e.bitrate)},d.prototype.rU=function(t){var e=t.fragmentId,i=e.slice(0,e.lastIndexOf("-")),r=i.slice(0,i.lastIndexOf("-")),o=t.getType();return new n.wA(r,o,!0,t.id,t.duration,t.bitrate,!0,this.getContextId())},d.prototype.fL=function(t){t.Dp()===a.wf.bf&&this.XL(t.jp(),t.Pp())},d);function d(t){this.ML="[VideoContext] ",this.DL=new r,this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.sessionId),this.PD=t.PD,this.HL=t.sU,this.GL=t.GL,this.uL=t.eU,this.uL.GD(this,this)}e.UH=f},function(t,e,i){"use strict";t.exports=s,i(11);var r=i(136),n=i(41),o=i(13);function s(t,e,i,n){if(!(this instanceof s))return new s(t,e,i,n);r.call(this,t,e,i,n)}((s.SortedArraySet=s).prototype=Object.create(r.prototype)).constructor=s,Object.hiveAddEach(s.prototype,n.prototype),Object.hiveAddEach(s.prototype,o.prototype),s.prototype.hU=!0,s.prototype.hiveAdd=function(t){return!this.has(t)&&(r.prototype.hiveAdd.call(this,t),!0)},s.prototype.reduce=function(t,e){var i=this,r=arguments[2];return this.bS.reduce((function(e,n,o){return t.call(r,e,n,o,i)}),e)},s.prototype.reduceRight=function(t,e){var i=this,r=arguments[2];return this.bS.reduceRight((function(e,n,o){return t.call(r,e,n,o,i)}),e)}},function(t,e,i){var r=i(28),n=window.hive;void 0===n&&(n=window.hive={}),void 0===n.services&&(n.services={}),void 0===n.services.protocol&&(n.services.protocol={}),void 0===n.services.protocol.oU&&(n.services.protocol.oU={}),n.services.protocol.oU.Sf={1:"PLAYER",Rf:1,2:"P2P_AGENT",If:2,3:"PREFETCHER_FIRST_TIER",_f:3,4:"PREFETCHER_SECOND_TIER",Af:4},n.services.protocol.oU.uU={1:"Global",Global:1,2:"InternalAs",aU:2,3:"ExternalAs",fU:3},n.services.protocol.oU.cU={1:"Internal",lU:1,2:"External",External:2},n.services.protocol.oU.TrackerPeerStreamInfo=function(t){this.state=null,this.bitrate=null,this.delta=null,t&&(void 0!==t.state&&(this.state=t.state),void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.delta&&(this.delta=t.delta))},n.services.protocol.oU.TrackerPeerStreamInfo.prototype={},n.services.protocol.oU.TrackerPeerStreamInfo.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I32?this.state=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.I32?this.bitrate=t.Vw().value:t.Bw(i);break;case 3:i==r.Type.I32?this.delta=t.Vw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.TrackerPeerStreamInfo.prototype.write=function(t){t.Ww("TrackerPeerStreamInfo"),null!==this.state&&void 0!==this.state&&(t.Yw("state",r.Type.I32,1),t.Xw(this.state),t.$w()),null!==this.bitrate&&void 0!==this.bitrate&&(t.Yw("bitrate",r.Type.I32,2),t.Xw(this.bitrate),t.$w()),null!==this.delta&&void 0!==this.delta&&(t.Yw("delta",r.Type.I32,3),t.Xw(this.delta),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.TrackerPeerInfo=function(t){this.guid=null,this.internalAs=null,this.externalAs=null,this.nat=null,this.bandwidth=null,this.watchingBitrate=null,this.privateIp=null,this.publicIp=null,this.streams=null,this.rankValue=null,this.timestamp=null,this.publicIpString=null,this.privateIpString=null,t&&(void 0!==t.guid&&(this.guid=t.guid),void 0!==t.internalAs&&(this.internalAs=t.internalAs),void 0!==t.externalAs&&(this.externalAs=t.externalAs),void 0!==t.nat&&(this.nat=t.nat),void 0!==t.bandwidth&&(this.bandwidth=t.bandwidth),void 0!==t.watchingBitrate&&(this.watchingBitrate=t.watchingBitrate),void 0!==t.privateIp&&(this.privateIp=t.privateIp),void 0!==t.publicIp&&(this.publicIp=t.publicIp),void 0!==t.streams&&(this.streams=t.streams),void 0!==t.rankValue&&(this.rankValue=t.rankValue),void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.publicIpString&&(this.publicIpString=t.publicIpString),void 0!==t.privateIpString&&(this.privateIpString=t.privateIpString))},n.services.protocol.oU.TrackerPeerInfo.prototype={},n.services.protocol.oU.TrackerPeerInfo.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.STRING?this.guid=t.wb().value:t.Bw(i);break;case 2:i==r.Type.I32?this.internalAs=t.Vw().value:t.Bw(i);break;case 3:i==r.Type.I32?this.externalAs=t.Vw().value:t.Bw(i);break;case 4:i==r.Type.I32?this.nat=t.Vw().value:t.Bw(i);break;case 5:i==r.Type.I32?this.bandwidth=t.Vw().value:t.Bw(i);break;case 6:i==r.Type.I32?this.watchingBitrate=t.Vw().value:t.Bw(i);break;case 7:i==r.Type.STRUCT?(this.privateIp=new InetAddress,this.privateIp.read(t)):t.Bw(i);break;case 8:i==r.Type.STRUCT?(this.publicIp=new InetAddress,this.publicIp.read(t)):t.Bw(i);break;case 9:if(i==r.Type.LIST){var s,a;this.streams=[],(a=t.hb()).ob,s=a.size;for(var u=0;u<s;++u){var h=null;(h=new n.services.protocol.oU.TrackerPeerStreamInfo).read(t),this.streams.push(h)}t.ub()}else t.Bw(i);break;case 10:i==r.Type.DOUBLE?this.rankValue=t.pb().value:t.Bw(i);break;case 11:i==r.Type.I64?this.timestamp=t.Eb().value:t.Bw(i);break;case 12:i==r.Type.STRING?this.publicIpString=t.xw().value:t.Bw(i);break;case 13:i==r.Type.STRING?this.privateIpString=t.xw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.TrackerPeerInfo.prototype.write=function(t){if(t.Ww("TrackerPeerInfo"),null!==this.guid&&void 0!==this.guid&&(t.Yw("guid",r.Type.STRING,1),t.$g(this.guid),t.$w()),null!==this.internalAs&&void 0!==this.internalAs&&(t.Yw("internalAs",r.Type.I32,2),t.Xw(this.internalAs),t.$w()),null!==this.externalAs&&void 0!==this.externalAs&&(t.Yw("externalAs",r.Type.I32,3),t.Xw(this.externalAs),t.$w()),null!==this.nat&&void 0!==this.nat&&(t.Yw("nat",r.Type.I32,4),t.Xw(this.nat),t.$w()),null!==this.bandwidth&&void 0!==this.bandwidth&&(t.Yw("bandwidth",r.Type.I32,5),t.Xw(this.bandwidth),t.$w()),null!==this.watchingBitrate&&void 0!==this.watchingBitrate&&(t.Yw("watchingBitrate",r.Type.I32,6),t.Xw(this.watchingBitrate),t.$w()),null!==this.privateIp&&void 0!==this.privateIp&&(t.Yw("privateIp",r.Type.STRUCT,7),this.privateIp.write(t),t.$w()),null!==this.publicIp&&void 0!==this.publicIp&&(t.Yw("publicIp",r.Type.STRUCT,8),this.publicIp.write(t),t.$w()),null!==this.streams&&void 0!==this.streams){for(var e in t.Yw("streams",r.Type.LIST,9),t.Gg(r.Type.STRUCT,this.streams.length),this.streams)this.streams.hasOwnProperty(e)&&(e=this.streams[e]).write(t);t.xg(),t.$w()}null!==this.rankValue&&void 0!==this.rankValue&&(t.Yw("rankValue",r.Type.DOUBLE,10),t.Kg(this.rankValue),t.$w()),null!==this.timestamp&&void 0!==this.timestamp&&(t.Yw("timestamp",r.Type.I64,11),t.Yg(this.timestamp),t.$w()),null!==this.publicIpString&&void 0!==this.publicIpString&&(t.Yw("publicIpString",r.Type.STRING,12),t.Kw(this.publicIpString),t.$w()),null!==this.privateIpString&&void 0!==this.privateIpString&&(t.Yw("privateIpString",r.Type.STRING,13),t.Kw(this.privateIpString),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.CustomerKey=function(t){this.partnerId=null,this.customerId=null,t&&(void 0!==t.partnerId&&(this.partnerId=t.partnerId),void 0!==t.customerId&&(this.customerId=t.customerId))},n.services.protocol.oU.CustomerKey.prototype={},n.services.protocol.oU.CustomerKey.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.STRING?this.partnerId=t.xw().value:t.Bw(i);break;case 2:i==r.Type.STRING?this.customerId=t.xw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.CustomerKey.prototype.write=function(t){t.Ww("CustomerKey"),null!==this.partnerId&&void 0!==this.partnerId&&(t.Yw("partnerId",r.Type.STRING,1),t.Kw(this.partnerId),t.$w()),null!==this.customerId&&void 0!==this.customerId&&(t.Yw("customerId",r.Type.STRING,2),t.Kw(this.customerId),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.TrackerAsQuery=function(t){this.asType=null,this.asn=null,t&&(void 0!==t.asType&&(this.asType=t.asType),void 0!==t.asn&&(this.asn=t.asn))},n.services.protocol.oU.TrackerAsQuery.prototype={},n.services.protocol.oU.TrackerAsQuery.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I32?this.asType=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.I32?this.asn=t.Vw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.TrackerAsQuery.prototype.write=function(t){t.Ww("TrackerAsQuery"),null!==this.asType&&void 0!==this.asType&&(t.Yw("asType",r.Type.I32,1),t.Xw(this.asType),t.$w()),null!==this.asn&&void 0!==this.asn&&(t.Yw("asn",r.Type.I32,2),t.Xw(this.asn),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.TrackerBitrateQuery=function(t){this.bitrate=null,this.asn=null,this.streamState=null,t&&(void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.asn&&(this.asn=t.asn),void 0!==t.streamState&&(this.streamState=t.streamState))},n.services.protocol.oU.TrackerBitrateQuery.prototype={},n.services.protocol.oU.TrackerBitrateQuery.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.I32?this.bitrate=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.STRUCT?(this.asn=new n.services.protocol.oU.TrackerAsQuery,this.asn.read(t)):t.Bw(i);break;case 3:i==r.Type.I32?this.streamState=t.Vw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.TrackerBitrateQuery.prototype.write=function(t){t.Ww("TrackerBitrateQuery"),null!==this.bitrate&&void 0!==this.bitrate&&(t.Yw("bitrate",r.Type.I32,1),t.Xw(this.bitrate),t.$w()),null!==this.asn&&void 0!==this.asn&&(t.Yw("asn",r.Type.STRUCT,2),this.asn.write(t),t.$w()),null!==this.streamState&&void 0!==this.streamState&&(t.Yw("streamState",r.Type.I32,3),t.Xw(this.streamState),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.TrackerRankQuery=function(t){this.rankType=null,this.asQuery=null,t&&(void 0!==t.rankType&&(this.rankType=t.rankType),void 0!==t.asQuery&&(this.asQuery=t.asQuery))},n.services.protocol.oU.TrackerRankQuery.prototype={},n.services.protocol.oU.TrackerRankQuery.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.I32?this.rankType=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.STRUCT?(this.asQuery=new n.services.protocol.oU.TrackerAsQuery,this.asQuery.read(t)):t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.TrackerRankQuery.prototype.write=function(t){t.Ww("TrackerRankQuery"),null!==this.rankType&&void 0!==this.rankType&&(t.Yw("rankType",r.Type.I32,1),t.Xw(this.rankType),t.$w()),null!==this.asQuery&&void 0!==this.asQuery&&(t.Yw("asQuery",r.Type.STRUCT,2),this.asQuery.write(t),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.TrackerQuery=function(t){this.random=null,this.asns=null,this.watchers=null,this.streamers=null,this.rankings=null,t&&(void 0!==t.random&&(this.random=t.random),void 0!==t.asns&&(this.asns=t.asns),void 0!==t.watchers&&(this.watchers=t.watchers),void 0!==t.streamers&&(this.streamers=t.streamers),void 0!==t.rankings&&(this.rankings=t.rankings))},n.services.protocol.oU.TrackerQuery.prototype={},n.services.protocol.oU.TrackerQuery.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.I32?this.random=t.Vw().value:t.Bw(i);break;case 2:if(i==r.Type.MAP){var s,a;this.asns={},(a=t.nb()).rb,a.sb,s=a.size;for(var u=0;u<s;++u){0<u&&t.Xg.length>t.ig[t.ig.length-1]+1&&t.Xg.pop();var h,c=null;(c=new n.services.protocol.oU.TrackerAsQuery).read(t),h=t.Vw().value,this.asns[c]=h}t.eb()}else t.Bw(i);break;case 3:if(i==r.Type.MAP){var l,p;this.watchers={},(p=t.nb()).rb,p.sb,l=p.size;for(var f=0;f<l;++f){0<f&&t.Xg.length>t.ig[t.ig.length-1]+1&&t.Xg.pop();var d,g=null;(g=new n.services.protocol.oU.TrackerBitrateQuery).read(t),d=t.Vw().value,this.watchers[g]=d}t.eb()}else t.Bw(i);break;case 4:if(i==r.Type.MAP){var v,y;this.streamers={},(y=t.nb()).rb,y.sb,v=y.size;for(var m=0;m<v;++m){0<m&&t.Xg.length>t.ig[t.ig.length-1]+1&&t.Xg.pop();var E,w=null;(w=new n.services.protocol.oU.TrackerBitrateQuery).read(t),E=t.Vw().value,this.streamers[w]=E}t.eb()}else t.Bw(i);break;case 5:if(i==r.Type.LIST){var b,S;this.rankings=[],(S=t.hb()).ob,b=S.size;for(var T=0;T<b;++T){var I;I=t.Vw().value,this.rankings.push(I)}t.ub()}else t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.TrackerQuery.prototype.write=function(t){if(t.Ww("TrackerQuery"),null!==this.random&&void 0!==this.random&&(t.Yw("random",r.Type.I32,1),t.Xw(this.random),t.$w()),null!==this.asns&&void 0!==this.asns){t.Yw("asns",r.Type.MAP,2),t.Ug(r.Type.STRUCT,r.Type.I32,r.Ow(this.asns));for(var e=0;e<this.asns.length;e++){var i=(a=this.asns[e]).key,n=a.value;i.write(t),t.Xw(n)}t.Fg(),t.$w()}if(null!==this.watchers&&void 0!==this.watchers){for(t.Yw("watchers",r.Type.MAP,3),t.Ug(r.Type.STRUCT,r.Type.I32,r.Ow(this.watchers)),e=0;e<this.watchers.length;e++){var o=(a=this.watchers[e]).key,s=a.value;o.write(t),t.Xw(s)}t.Fg(),t.$w()}if(null!==this.streamers&&void 0!==this.streamers){for(t.Yw("streamers",r.Type.MAP,4),t.Ug(r.Type.STRUCT,r.Type.I32,r.Ow(this.streamers)),e=0;e<this.streamers.length;e++){var a,u=(a=this.streamers[e]).key,h=a.value;u.write(t),t.Xw(h)}t.Fg(),t.$w()}if(null!==this.rankings&&void 0!==this.rankings){for(var c in t.Yw("rankings",r.Type.LIST,5),t.Gg(r.Type.I32,this.rankings.length),this.rankings)this.rankings.hasOwnProperty(c)&&(c=this.rankings[c],t.Xw(c));t.xg(),t.$w()}t.Jw(),t.zw()},n.services.protocol.oU.TrackerPeerRankingKey=function(t){this.rankType=null,this.internalAs=null,this.externalAs=null,t&&(void 0!==t.rankType&&(this.rankType=t.rankType),void 0!==t.internalAs&&(this.internalAs=t.internalAs),void 0!==t.externalAs&&(this.externalAs=t.externalAs))},n.services.protocol.oU.TrackerPeerRankingKey.prototype={},n.services.protocol.oU.TrackerPeerRankingKey.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I32?this.rankType=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.I32?this.internalAs=t.Vw().value:t.Bw(i);break;case 3:i==r.Type.I32?this.externalAs=t.Vw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.TrackerPeerRankingKey.prototype.write=function(t){t.Ww("TrackerPeerRankingKey"),null!==this.rankType&&void 0!==this.rankType&&(t.Yw("rankType",r.Type.I32,1),t.Xw(this.rankType),t.$w()),null!==this.internalAs&&void 0!==this.internalAs&&(t.Yw("internalAs",r.Type.I32,2),t.Xw(this.internalAs),t.$w()),null!==this.externalAs&&void 0!==this.externalAs&&(t.Yw("externalAs",r.Type.I32,3),t.Xw(this.externalAs),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.TrackerPeerRanking=function(t){this.key=null,this.ranking=null,this.groupSize=null,this.cumulatedRankValue=null,this.totalOfRankValues=null,t&&(void 0!==t.key&&(this.key=t.key),void 0!==t.ranking&&(this.ranking=t.ranking),void 0!==t.groupSize&&(this.groupSize=t.groupSize),void 0!==t.cumulatedRankValue&&(this.cumulatedRankValue=t.cumulatedRankValue),void 0!==t.totalOfRankValues&&(this.totalOfRankValues=t.totalOfRankValues))},n.services.protocol.oU.TrackerPeerRanking.prototype={},n.services.protocol.oU.TrackerPeerRanking.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.STRUCT?(this.key=new n.services.protocol.oU.TrackerPeerRankingKey,this.key.read(t)):t.Bw(i);break;case 2:i==r.Type.I32?this.ranking=t.Vw().value:t.Bw(i);break;case 3:i==r.Type.I32?this.groupSize=t.Vw().value:t.Bw(i);break;case 4:i==r.Type.DOUBLE?this.cumulatedRankValue=t.pb().value:t.Bw(i);break;case 5:i==r.Type.DOUBLE?this.totalOfRankValues=t.pb().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.TrackerPeerRanking.prototype.write=function(t){t.Ww("TrackerPeerRanking"),null!==this.key&&void 0!==this.key&&(t.Yw("key",r.Type.STRUCT,1),this.key.write(t),t.$w()),null!==this.ranking&&void 0!==this.ranking&&(t.Yw("ranking",r.Type.I32,2),t.Xw(this.ranking),t.$w()),null!==this.groupSize&&void 0!==this.groupSize&&(t.Yw("groupSize",r.Type.I32,3),t.Xw(this.groupSize),t.$w()),null!==this.cumulatedRankValue&&void 0!==this.cumulatedRankValue&&(t.Yw("cumulatedRankValue",r.Type.DOUBLE,4),t.Kg(this.cumulatedRankValue),t.$w()),null!==this.totalOfRankValues&&void 0!==this.totalOfRankValues&&(t.Yw("totalOfRankValues",r.Type.DOUBLE,5),t.Kg(this.totalOfRankValues),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.TrackerRequest=function(t){this.info=null,this.contentId=null,this.query=null,this.streamType=null,this.sessionId=null,this.customerKey=null,t&&(void 0!==t.info&&(this.info=t.info),void 0!==t.contentId&&(this.contentId=t.contentId),void 0!==t.query&&(this.query=t.query),void 0!==t.streamType&&(this.streamType=t.streamType),void 0!==t.sessionId&&(this.sessionId=t.sessionId),void 0!==t.customerKey&&(this.customerKey=t.customerKey))},n.services.protocol.oU.TrackerRequest.prototype={},n.services.protocol.oU.TrackerRequest.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.STRUCT?(this.info=new n.services.protocol.oU.TrackerPeerInfo,this.info.read(t)):t.Bw(i);break;case 2:i==r.Type.STRING?this.contentId=t.xw().value:t.Bw(i);break;case 3:i==r.Type.STRUCT?(this.query=new n.services.protocol.oU.TrackerQuery,this.query.read(t)):t.Bw(i);break;case 4:i==r.Type.I32?this.streamType=t.Vw().value:t.Bw(i);break;case 5:i==r.Type.STRING?this.sessionId=t.xw().value:t.Bw(i);break;case 6:i==r.Type.STRUCT?(this.customerKey=new n.services.protocol.oU.CustomerKey,this.customerKey.read(t)):t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.TrackerRequest.prototype.write=function(t){t.Ww("TrackerRequest"),null!==this.info&&void 0!==this.info&&(t.Yw("info",r.Type.STRUCT,1),this.info.write(t),t.$w()),null!==this.contentId&&void 0!==this.contentId&&(t.Yw("contentId",r.Type.STRING,2),t.Kw(this.contentId),t.$w()),null!==this.query&&void 0!==this.query&&(t.Yw("query",r.Type.STRUCT,3),this.query.write(t),t.$w()),null!==this.streamType&&void 0!==this.streamType&&(t.Yw("streamType",r.Type.I32,4),t.Xw(this.streamType),t.$w()),null!==this.sessionId&&void 0!==this.sessionId&&(t.Yw("sessionId",r.Type.STRING,5),t.Kw(this.sessionId),t.$w()),null!==this.customerKey&&void 0!==this.customerKey&&(t.Yw("customerKey",r.Type.STRUCT,6),this.customerKey.write(t),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.TrackerResponse=function(t){this.infos=null,this.rankings=null,this.peerInfo=null,this.sessionId=null,t&&(void 0!==t.infos&&(this.infos=t.infos),void 0!==t.rankings&&(this.rankings=t.rankings),void 0!==t.peerInfo&&(this.peerInfo=t.peerInfo),void 0!==t.sessionId&&(this.sessionId=t.sessionId))},n.services.protocol.oU.TrackerResponse.prototype={},n.services.protocol.oU.TrackerResponse.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:if(i==r.Type.LIST){var s,a;this.infos=[],(a=t.hb()).ob,s=a.size;for(var u=0;u<s;++u){var h=null;(h=new n.services.protocol.oU.TrackerPeerInfo).read(t),this.infos.push(h)}t.ub()}else t.Bw(i);break;case 2:if(i==r.Type.LIST){var c,l;this.rankings=[],(l=t.hb()).ob,c=l.size;for(var p=0;p<c;++p){var f=null;(f=new n.services.protocol.oU.TrackerPeerRanking).read(t),this.rankings.push(f)}t.ub()}else t.Bw(i);break;case 3:i==r.Type.STRUCT?(this.peerInfo=new n.services.protocol.oU.TrackerPeerInfo,this.peerInfo.read(t)):t.Bw(i);break;case 4:i==r.Type.STRING?this.sessionId=t.xw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.TrackerResponse.prototype.write=function(t){if(t.Ww("TrackerResponse"),null!==this.infos&&void 0!==this.infos){for(var e in t.Yw("infos",r.Type.LIST,1),t.Gg(r.Type.STRUCT,this.infos.length),this.infos)this.infos.hasOwnProperty(e)&&(e=this.infos[e]).write(t);t.xg(),t.$w()}if(null!==this.rankings&&void 0!==this.rankings){for(var i in t.Yw("rankings",r.Type.LIST,2),t.Gg(r.Type.STRUCT,this.rankings.length),this.rankings)this.rankings.hasOwnProperty(i)&&(i=this.rankings[i]).write(t);t.xg(),t.$w()}null!==this.peerInfo&&void 0!==this.peerInfo&&(t.Yw("peerInfo",r.Type.STRUCT,3),this.peerInfo.write(t),t.$w()),null!==this.sessionId&&void 0!==this.sessionId&&(t.Yw("sessionId",r.Type.STRING,4),t.Kw(this.sessionId),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.vU=function(t){this.timestamp=null,this.contentId=null,this.asType=null,this.asn=null,this.bitrate=null,this.streamState=null,this.rankType=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.contentId&&(this.contentId=t.contentId),void 0!==t.asType&&(this.asType=t.asType),void 0!==t.asn&&(this.asn=t.asn),void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.streamState&&(this.streamState=t.streamState),void 0!==t.rankType&&(this.rankType=t.rankType))},n.services.protocol.oU.vU.prototype={},n.services.protocol.oU.vU.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I32?this.timestamp=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.STRING?this.contentId=t.xw().value:t.Bw(i);break;case 3:i==r.Type.I32?this.asType=t.Vw().value:t.Bw(i);break;case 4:i==r.Type.I32?this.asn=t.Vw().value:t.Bw(i);break;case 5:i==r.Type.I32?this.bitrate=t.Vw().value:t.Bw(i);break;case 6:i==r.Type.I32?this.streamState=t.Vw().value:t.Bw(i);break;case 7:i==r.Type.I32?this.rankType=t.Vw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.vU.prototype.write=function(t){t.Ww("TrackerStoreIndexKey"),null!==this.timestamp&&void 0!==this.timestamp&&(t.Yw("timestamp",r.Type.I32,1),t.Xw(this.timestamp),t.$w()),null!==this.contentId&&void 0!==this.contentId&&(t.Yw("contentId",r.Type.STRING,2),t.Kw(this.contentId),t.$w()),null!==this.asType&&void 0!==this.asType&&(t.Yw("asType",r.Type.I32,3),t.Xw(this.asType),t.$w()),null!==this.asn&&void 0!==this.asn&&(t.Yw("asn",r.Type.I32,4),t.Xw(this.asn),t.$w()),null!==this.bitrate&&void 0!==this.bitrate&&(t.Yw("bitrate",r.Type.I32,5),t.Xw(this.bitrate),t.$w()),null!==this.streamState&&void 0!==this.streamState&&(t.Yw("streamState",r.Type.I32,6),t.Xw(this.streamState),t.$w()),null!==this.rankType&&void 0!==this.rankType&&(t.Yw("rankType",r.Type.I32,7),t.Xw(this.rankType),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.dU=function(t){this.guid=null,this.EU=null,this.key=null,t&&(void 0!==t.guid&&(this.guid=t.guid),void 0!==t.EU&&(this.EU=t.EU),void 0!==t.key&&(this.key=t.key))},n.services.protocol.oU.dU.prototype={},n.services.protocol.oU.dU.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.STRING?this.guid=t.wb().value:t.Bw(i);break;case 2:i==r.Type.DOUBLE?this.EU=t.pb().value:t.Bw(i);break;case 3:i==r.Type.STRUCT?(this.key=new n.services.protocol.oU.TrackerPeerRankingKey,this.key.read(t)):t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.dU.prototype.write=function(t){t.Ww("TrackerStoreRankPeer"),null!==this.guid&&void 0!==this.guid&&(t.Yw("guid",r.Type.STRING,1),t.$g(this.guid),t.$w()),null!==this.EU&&void 0!==this.EU&&(t.Yw("rank",r.Type.DOUBLE,2),t.Kg(this.EU),t.$w()),null!==this.key&&void 0!==this.key&&(t.Yw("key",r.Type.STRUCT,3),this.key.write(t),t.$w()),t.Jw(),t.zw()},n.services.protocol.oU.pU=function(t){this.timestamp=null,this.request=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.request&&(this.request=t.request))},n.services.protocol.oU.pU.prototype={},n.services.protocol.oU.pU.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.I64?this.timestamp=t.Eb().value:t.Bw(i);break;case 2:i==r.Type.STRUCT?(this.request=new n.services.protocol.oU.TrackerRequest,this.request.read(t)):t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.services.protocol.oU.pU.prototype.write=function(t){t.Ww("TrackerRequestQueueMessage"),null!==this.timestamp&&void 0!==this.timestamp&&(t.Yw("timestamp",r.Type.I64,1),t.Yg(this.timestamp),t.$w()),null!==this.request&&void 0!==this.request&&(t.Yw("request",r.Type.STRUCT,2),this.request.write(t),t.$w()),t.Jw(),t.zw()}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0}),e.wU=function(t,e,i,r,n){this.id=t,this.bitrate=e,this.duration=i,this.uri=r,this.zH=n}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(1),n=(o.prototype.size=function(){var t=this.end-this.start+1;return Number.isInteger(t)||(r.ErrorMonitor.lt().logError("Segment Size is a Float",{size:t}),t=Math.round(t)),0==this.end&&0==this.start?0:t},o.prototype.gU=function(){return 0==this.start&&(this.end==this.total-1||this.end==this.total&&0==this.total)},o.prototype.bU=function(){return this.end==this.total-1||this.end==this.total&&0==this.total},o.prototype.yU=function(t){return t.start<=this.start&&this.start<=t.end},o.prototype.toString=function(){return"R[S="+this.start+",E="+this.end+",T="+this.total+"]"},o);function o(t,e,i){this.start=t,this.end=e,this.total=i}e.TU=n;var s=(a.mU=function(t){return t.split("-")},a.OU=function(t){var e=t.split("=",4),i=e[1].substr(0,e[1].indexOf(",")),r=e[2].substr(0,e[2].indexOf(",")),o=e[3].substr(0,e[3].indexOf("]"));return new n(+i,+r,+o)},a);function a(){}e.SU=s},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.RU=function(t,e){var i=t._U.IU(!1),r=e._U.IU(!1);return r<i?1:i<r?0:-1},n);function n(){}e.AU=r;var o=(s.RU=function(t,e){var i=t.NU.IU(!1),r=e.NU.IU(!1);return r<i?1:i<r?0:-1},s);function s(){}e.CU=o},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.Ok="127.0.0.1",n.kU=11983,n.Sk="//{0}:{1}/proxy/?callback={2}{3}hivePluginId={4}",n.DU="//{0}:{1}/proxy/auth-token?hivePluginId={2}",n.MU="//{0}:{1}/proxy/{2}/session?manifest={3}",n.jU="//{0}:{1}/proxy/{2}/player?req={3}",n.PU="//{0}:{1}/proxy/{2}/info?{3}",n.HU="2018.1",n.LU="",n);function n(){}e.UU=r},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(50),n=i(3),o=i(4),s=i(109);e.FU=s.FU;var a=i(0),u=i(21);e.Options=u.Options,e.UrlConfigurableOptions=u.UrlConfigurableOptions;var h=i(110);e.TechName=h.TechName;var c=i(27);e.HiveSession=c.HiveSession,e.HivePluginReference=c.HivePluginReference,e.HiveSessionError=c.HiveSessionError,e.HiveSessionErrorCode=c.HiveSessionErrorCode,e.MainStatusCode=c.MainStatusCode;var l=i(43),p=i(22);e.HiveRequestFactory=p.HiveRequestFactory,e.HivePlayerExtendedStats=p.HivePlayerExtendedStats,e.HiveSessionInternal=p.HiveSessionInternal;var f=i(15);e.BasicUtils=f;var d=i(15),g=i(112),v=i(24),y=i(113),m=i(8),E=i(115),w=i(56);e.StatsJS=w.StatsJS;var b=i(31),S=i(1),T=i(2),I=i(46);e.Ticket=I.Ticket;var _=i(29),P=i(25),O=i(81),A=i(7);e.ut=A.ut;var R=i(127),C=A.ut.xa,N=A.ut.Fa,k=A.ut.Ua,D=A.ut.Ga;e.Tw=C,(k||D)&&i(14).HiveConfig;var L=(x.prototype.options=function(){return this.options_},x.prototype.logger=function(){return this.GU?this.H.log(this.GU.id):this.H.log()},x.prototype.loggerLevel=function(t){if("string"==typeof t&&this.H.Ck(t),this.logger)return this.H.level},x.prototype.getPluginId=function(){return this.pluginId},x.prototype.getPluginId4Java=function(){return this.xU},x.prototype.getCommVersion=function(){return C},x.prototype.updateCommsForInitSessions=function(){for(var t=0,e=this.initializedSessions;t<e.length;t++){var i=e[t];i.tech.cH(this),"HiveJS"===i.tech.getName()&&i.tech.BU&&i.tech.BU.cH(this)}},x.prototype.VU=function(t){var e=new w.StatsJS(this,t);if(this.qU.set(w.StatsJS.WP,e),k){var r=i(128).HiveJS;this.qU.set(r.WP,new r(this,t,e))}if(D){var n=i(201).HiveJsProxy;this.qU.set(n.WP,new n(this,t,e))}if(N){var o=i(204).HiveJava;this.qU.set(o.WP,new o(this,t))}var s=t.hiveTechOrder;if(!s||s instanceof Array)if(s&&0<s.length)for(var a=s.length;a--;){var u=s[a];"string"!=typeof u||-1==this.QU.indexOf(u)?(console.warn(this.loggerId+'The "'+u+'" Hive tech is undefined'),s.splice(a,1)):"string"==typeof u&&this.qU.has(u)||console.warn(this.loggerId+'The "'+u+'" Hive tech is not enabled on this plugin')}else s=this.QU;else console.warn(this.loggerId+"hiveTechOrder value not accepted. It must be an array of strings"),s=this.QU;t.hiveTechOrder=s},x.prototype.WU=function(){this.videoRepresentationsMap=new o({"qd-v":125e3,"ld-v":25e4,"md-v":5e5,"hd-v":12e5,"hd1-v":2e6,"a1-v":55e4,"b1-v":8e5,"c1-v":1e6,"d1-v":17e5,YU:11e5}),this.audioRepresentationsMap=new o({"qd-a":64e3,"ld-a":128e3,"md-a":256e3,"b1-a":68e3,KU:124e3})},x.prototype.$U=function(){return this.videoRepresentationsMap.concat(this.audioRepresentationsMap)},x.prototype.resolveTicketPromise=function(t){var e=this;this.logger().notice(this.loggerId+"resolving "+t);var i=n.defer();if(!t)return i.reject(c.HiveSessionError.getHiveSessionError("",c.HiveSessionErrorCode.TICKET_ERROR,"No ticket provided.")),i.promise;this.XU(t);var r=this.JU().values();0==r.length&&(S.ErrorMonitor.lt().logError("Error initializing all Techs",this.loggerId,T.be.me),i.reject(c.HiveSessionError.getHiveSessionError(t,c.HiveSessionErrorCode.NO_TECH_AVAILABLE)));var o,s,a=!1,u=!1,h=0,l=null;return d.gc((function(){return!a&&!u&&h<r.length&&!o}),(function(){var i=r[h++];return i.fH(),(i.KP()&&!s?e.zU(t,e.options().testId):n.resolve(null)).then((function(r){null!=r&&(s=r);var o=i.JP();return i.initSession(t,s).timeout(o,"["+i.getName()+"] Error: initialization timed out after "+o+"ms").then((function(t){l=t,e.ZU(l,i),a=!0,!i.KP()&&s&&s.wl.reset(),S.ErrorMonitor.lt().yt({sessionId:l.id}),e.logger().notice(e.loggerId+"initializing Session:["+l.id+"] Ticket:"+l.ticket.toString()+" HiveTech:["+l.tech.getName()+"]"),n.resolve(!0)}),(function(r){r instanceof Error&&(r=new c.HiveTechError(c.aw.dw,r.message),i.aH(r)),r.ticketUrl=t,u=!i.onError(r),e.logger().debug(e.loggerId+"tech "+i.getName()+": "+r.message),n.resolve(!0)}))}),(function(t){o=t,n.resolve(!0)}))})).then((function(){o?i.reject(c.HiveSessionError.getHiveSessionError(t,c.HiveSessionErrorCode.TICKET_ERROR,o)):u?i.reject(c.HiveSessionError.getHiveSessionError(t,c.HiveSessionErrorCode.TECH_ERROR)):a?i.resolve(l):(S.ErrorMonitor.lt().logError("Error initializing all Techs",e.loggerId,T.be.me),i.reject(c.HiveSessionError.getHiveSessionError(t,c.HiveSessionErrorCode.NO_TECH_AVAILABLE)))})).catch((function(r){S.ErrorMonitor.lt().logError("Error resolving ticket promise",e.loggerId,T.be.Te,r),i.reject(c.HiveSessionError.getHiveSessionError(t,c.HiveSessionErrorCode.GENERIC_ERROR,r.toString()))})).done(),i.promise},x.prototype.authenticate=function(t){var e=this,i=A.ut.Qa?P.DE.kE.tp:P.DE.kE.np;if(!this.tF(t))return n.reject({code:"Init Error",reason:JSON.stringify({code:"C_INVALID_DATA",description:"There are missing data in among the videoId, JWT or manifest lists"})});var r=(new Date).getTime();return d.Tc(i,JSON.stringify(t)).then((function(i){var o=Date.now();e.logger().warn("[Timing] Authentication request to service",o-r);var s=JSON.parse(i);e.logger().debug("Response: ",s),e.options().hiveTechOrder=s.techs;var a=n.defer(),u=e.JU().values(),h=!1,l=0,p=[];return d.gc((function(){return 0<p.length?(a.resolve(p),!1):!h&&l<u.length||(S.ErrorMonitor.lt().logError("Error initializing all Techs",e.loggerId,T.be.me),a.reject({code:"Init Error",reason:JSON.stringify({code:"C_"+c.HiveSessionErrorCode[c.HiveSessionErrorCode.NO_TECH_AVAILABLE],description:"No Tech successfully initialized"})}),!1)}),(function(){var i=u[l++];if(i.fH(),"HiveJsProxy"!==i.getName())return n.allSettled(s.validated.map((function(o){var a=o.videoId;if(0===t.filter((function(t){return t.videoId===a})).length)return S.ErrorMonitor.lt().logError("No Token found for the specific videoId",e.loggerId,T.be.Oe,{videoId:a}),n.reject(!1);var u=o.manifests;return e.logger().debug("Manifests: ",u),n.allSettled(u.map((function(t){var o,u=i.JP(),c=Date.now();if(i.KP()){var l=new I.Ticket;l.Hk(s.partnerId,s.customerId,s.validated[0].videoId),l.Yk=t.uri,l.VE=r,l.qE=(new Date).getTime(),o=b.Hive.Reporting().initSession(e.pluginId,l,!1,"",s.connectionEndpoint)}else o=n.resolve(null);var p=Date.now();return o.then((function(r){var n=Date.now();return e.logger().warn("[Timing] Init RI for "+i.getName(),n-c),r&&e.updatePlayerInfo(r),i.initSession(s.ticketEndpoint+"/"+t.jwt,r).timeout(u).then((function(n){e.ZU(n,i),h=!0,"HiveJava"===i.getName()&&n.ticket.Hk(s.partnerId,s.customerId,a),!i.KP()&&r&&r.wl.reset(),S.ErrorMonitor.lt().yt({sessionId:n.id}),e.logger().notice(e.loggerId+"initializing Session:["+n.id+"] Ticket:"+n.ticket.toString()+" HiveTech:["+n.tech.getName()+"]"),n.ticket.originalManifest=t.uri;var o=Date.now();return e.logger().warn("[Timing] Init Tech Successful for "+i.getName(),o-p),n}))})).fail((function(t){return t=e.iF(t,i,p),n.reject(t)}))}))).then((function(t){return e.nF(t,!1)}))}))).then((function(t){var i=e.nF(t,[],!1);i instanceof Array&&(p=i)}));var o=Date.now();return i.rF(e.pluginId,s).then((function(t){e.ZU(t,i),h=!0,p.push(t),S.ErrorMonitor.lt().yt({sessionId:t.id}),e.logger().notice(e.loggerId+"initializing Session:["+t.id+"] Ticket:"+t.ticket.toString()+" HiveTech:["+t.tech.getName()+"]");var r=Date.now();return e.logger().warn("[Timing] Init Tech Successful for "+i.getName(),r-o),t}),(function(t){return e.iF(t,i,o)}))})).done(),a.promise})).fail((function(t){return e.logger().debug("Authentication Failed",t),n.reject(t)}))},x.prototype.iF=function(t,e,i){this.logger().debug(this.loggerId+" init Session failed:",t.message),t instanceof Error&&(t=new c.HiveTechError(c.aw.dw,t.message),e.aH(t)),this.logger().debug(this.loggerId+"tech "+e.getName()+": "+t.message);var r=Date.now();return this.logger().warn("[Timing] Init Tech Failed for "+e.getName(),r-i),t},x.prototype.tF=function(t){return 0!==t.length&&t.every((function(t,e,i){return t.jwt&&t.videoId&&0<t.manifests.length}))},x.prototype.nF=function(t,e,i){void 0===i&&(i=!0);for(var r=[],o=0,s=t;o<s.length;o++){var a=s[o];"fulfilled"===a.state&&(i?r.push(a.value):r=r.concat(a.value))}return 0<r.length?r:n.reject(e)},x.prototype.zU=function(t,e){var i=this;return b.Hive.Reporting().initSession(this.pluginId,t,!1,e).then((function(e){return i.logger().debug(i.loggerId+"verified ticket "+t),i.updatePlayerInfo(e),e})).catch((function(t){return n.reject("Ticket not verified, error: "+t.message)}))},x.prototype.JU=function(){var t=JSON.parse(JSON.stringify(this.options().hiveTechOrder)),e=new o;for(var i in t)this.qU.has(t[i])&&e.set(t[i],this.qU.get(t[i]));return e},x.prototype.XU=function(t){var e=S.ErrorMonitor.lt();try{var i=new I.Ticket;i.Gk(t),i.pE()&&i.wE()&&i.Vk()?e.setTags([i.pE(),i.wE(),i.Vk()]):e.logError("Ticket not valid, we could not resolve the triple partnerId/CustomerId/ContentId",this.loggerId,T.be.Se,{partnerId:i.pE(),customerId:i.wE(),contentId:i.Vk()})}catch(t){this.logger().warn(this.loggerId+" "+t.message,t),e.notify(t)}},x.prototype.updatePlayerInfo=function(t){var e={commVersion:C,pluginName:this.getPluginName(),pluginVersion:this.getPluginVersion(),playerTech:this.getPlayerTech(),playerVersion:this.getPlayerVersion(),telemetryId:this.getTelemetryId()};t.wl.updatePlayerInfo(e)},x.prototype.onSetupTimeout=function(){window.HiveRequest=XMLHttpRequest,p.HiveRequestFactory.clear(),b.Hive.Reporting().close()},x.prototype.addTechEvent=function(t){this.GU&&this.GU.tech?(t.sessionId=this.GU.id,this.GU.tech.lE(this.GU,t)):this.sF.push(t)},x.prototype.flushTechEvents=function(){var t=this.sF;return this.sF=new Array,t},x.prototype.eF=function(){this.destroyHivePlugin(!1)},x.prototype.hF=function(){var t=window;this.eF=this.eF.bind(this),t.addEventListener?t.addEventListener("beforeunload",this.eF,!1):t.attachEvent("onbeforeunload",this.eF)},x.prototype.oF=function(){var t=window;t.removeEventListener?t.removeEventListener("beforeunload",this.eF,!1):t.detachEvent("onbeforeunload",this.eF)},x.prototype.closeHiveSession=function(t,e){void 0===e&&(e=!0),this.logger().debug("Manually Closing Session"+(t?" because: "+t:"")),this.aF.uF(),this.fF=null,this.getActiveSession()&&p.HiveRequestFactory.clearPluginState(this.pluginId),this.resetSession(!0,e)},x.prototype.destroyHivePlugin=function(t){return void 0===t&&(t=!0),this.oF(),this.aF.uF(!0),this.closeHiveSession("Invoked Plugin Destroy",t),p.Ud.lt(this.logger()).Hd(),a.Framework.J(),this.options_.onLoadingCompleted=null,this.options_.onSourceSetCompleted=null,this.options_.onActiveSession=null,this.options_.onError=null,S.ErrorMonitor.lt().Rt(),a.Framework.G},x.prototype.resetSession=function(t,e){var i=this;void 0===e&&(e=!0),this.cF(t,e),!1===t?this.GU&&this.initializedSessions.every((function(t){return t.id!==i.GU.id}))&&this.initializedSessions.unshift(this.GU):this.initializedSessions.length=0,this.lF(),this.GU=null,this.vF=0,this.dF=0},x.prototype.ZU=function(t,e){t.tech=e,this.initializedSessions.push(t)},x.prototype.onActivateSession=function(t,e){var i=this;if(void 0===e&&(e=!1),null==this.GU){for(var r=t||this.getPlayerSource(),n=0;n<this.initializedSessions.length;n++){var o=this.initializedSessions[n];if(o.isActive(r,e)){if(this.GU=o,this.GU.yd?this.GU.yd.cl.FD(this.GU.ticket):this.EF(),this.GU.tech.onActiveSession(this.GU),this.logger().notice(this.loggerId+"activating Session:["+this.GU.id+"] Ticket:"+this.GU.ticket.toString()+" HiveTech:["+this.GU.tech.getName()+"]"),this.options().onActiveSession)try{this.options().onActiveSession(o.toHiveSession())}catch(t){S.ErrorMonitor.lt().logError(this.loggerId+" exception in user-defined Generic onActiveSession callback: "+t,this.loggerId,T.be.Re)}break}}if(this.GU)return this.initializedSessions.forEach((function(t){t!=i.GU&&t.wd().then((function(t){return t.ml()}))})),!(this.initializedSessions.length=0);S.ErrorMonitor.lt().logError("No matching session found",this.loggerId,T.be.ye,{playerSource:r,initializedSessions:this.initializedSessions.map((function(t){return t.manifest}))}),this.resetSession()}return!1},x.prototype.getActiveSession=function(){if(this.GU)return this.GU.toHiveSession()},x.prototype.EF=function(){var t=!1;this.initializedSessions.forEach((function(e){e.yd&&(t=!0)})),t&&b.Hive.Reporting().close()},x.prototype.isSessionActive=function(){if(null!=this.GU){if(this.GU.isActive(this.getPlayerSource()))return!0;var t="Session src mismatch: "+this.getPlayerSource()+" != "+this.GU.manifest;this.logger().warn(this.loggerId+t),this.closeHiveSession(t)}return!1},x.prototype.cF=function(t,e){if(void 0===e&&(e=!0),null!=this.GU)this.logger().notice(this.loggerId+"Stopping session ["+this.GU.id+"]"),this.GU.close(t,e);else if(0<this.initializedSessions.length){var i=this.initializedSessions[0];this.logger().notice(this.loggerId+"Attempt to stopping session ["+i.id+"]"),i.close(t,e)}},x.prototype.pF=function(){var t=this;null==this.wF&&(this.wF=setInterval((function(){t.gF()}),this.options().feedbackPeriod),this.gF())},x.prototype.lF=function(){clearInterval(this.wF),this.wF=null},x.prototype.gF=function(){var t=this;if(this.isSessionActive()){if(!this.isActive())return void this.resetSession();var e=this.getWindowSize(),i=new p.Id(this.getCurrentTime(),this.getBufferLen(),this.vF,e.width,e.height,this.isFullscreen());this.GU.vd(this.bF.check(i)),this.GU.tech.ZP(this.GU,i).fail((function(e){t.logger().warn(t.loggerId+"stats handling failed",e),t.lF()}))}},x.prototype.registerGenericEvents=function(){var t=this;try{p.Ud.lt(this.logger()).Pd((function(e){var i=t.getPotentialSession();i&&!i.Ed()&&(t.onEventFeedback(e?v.PlayerEvents.VISIBLE:v.PlayerEvents.HIDDEN),t.logger().debug(e?"visible":"hidden"))}))}catch(t){S.ErrorMonitor.lt().logError("error setting up the visibilityChange listener",this.loggerId,T.be.Ie,{error:t})}},x.prototype.onStartBuffering=function(t,e){void 0===e&&(e=!1),(e||this.isSessionActive())&&this.dF<=0&&(this.dF=Date.now(),null!=t&&!t||this.onEventFeedback(v.PlayerEvents.BUFFERING))},x.prototype.onEndBuffering=function(){var t=0==this.vF;if(0<this.dF){var e=Date.now()-this.dF;return this.vF+=e,this.logger().debug(this.loggerId+"reporting new buffering event of "+e),this.dF=0,t&&this.gF(),!0}return!1},x.prototype.onError=function(t,e,i){void 0===i&&(i=!0),this.onEventFeedback(v.PlayerEvents.ERROR,{code:-1,"player-code":t}),i&&this.closeHiveSession(e)},x.prototype.onEventFeedback=function(t,e){var i=this,r=this.getPotentialSession();null==r||r!=this.GU&&r.tech.getName()===h.yF[h.yF.HiveJava]||r.tech.rH(r,t,e).fail((function(t){i.logger().warn(i.loggerId+"error in forwarding player event to tech",t)}))},x.prototype.TF=function(t,e){t!==this.fF&&this.onEventFeedback(t,e),this.fF=t},x.prototype.getPotentialSession=function(){return this.GU?this.GU:this.initializedSessions&&0<this.initializedSessions.length?this.initializedSessions[0]:void 0},x.prototype.initStatusCode=function(){this.mF=0},x.prototype.setStatusCode=function(t,e){this.initStatusCode(),this.mF+=t<<28,e&&0===t&&(this.mF+=1<<4*(6-h.yF[e.getName()])),0<t&&S.ErrorMonitor.lt().logError("Status Code Error",this.loggerId,T.be._e,{code:c.bw(t)},["Plugin Error Code",c.bw(t)])},x.prototype.getStatusCode=function(){return this.mF},x.prototype.getTelemetryId=function(){return this.options().telemetryId},x.logError=function(t,e,i,r){var n=S.ErrorMonitor.lt();n.logError.apply(n,arguments)},x.prototype.registerComm=function(t){O.OF.registerComm(this,t)},x.prototype.getPluginVersion=function(){return A.ut.qa},x);function x(t){this.QU=[h.yF[h.yF.HiveJava],h.yF[h.yF.HiveJsProxy],h.yF[h.yF.HiveJS],h.yF[h.yF.StatsJS]],this.qU=new o,this.sF=new Array,this.initializedSessions=new Array,this.GU=null,this.vF=0,this.dF=0,this.loggerId="[HiveComm] ",this.mF=0,this.videoRepresentationsMap=new o,this.audioRepresentationsMap=new o,this.aF=new R.default(this),this.pluginId=r.Kk(),a.Framework.F("peer0",new y.SF,new E.RF),this.xU=p.Fd.getItem("hivePluginId"),this.xU||(this.xU=Math.abs(Math.floor(68719476736*Math.random())).toString(16),p.Fd.setItem("hivePluginId",this.xU));var e=S.ErrorMonitor.lt(A.ut.qa);this.options_=new u.Options,this.VU(t),this.WU(),d.updateOptions(t,this.options_),d.parseParameterOptions(window.location.href,new u.UrlConfigurableOptions,this.options_),u.hd.sd(this.options_),this.H=a.Framework.resolve(a.Framework.ht.m),l.HiveConfig.Framework.LoggerTimestamp=this.options().loggerTimestamp,this.options().isSDNDebug&&(this.options().debugLevel="debug"),this.H.Ck(this.options().debugLevel),e.bt(this.H.log()),this.options().onError&&e.Ot(this.options().onError);var i=a.Framework.resolve(m.pf.u),n=a.Framework.resolve(m.pf.af);i.Al().then((function(t){e.setUser(t.Dl()),e.yt({reportingGuid:t.Ml()}),e.yt({p2pId:t.Dl()})}));var s={};new g.IF(this),n.getConnectivityInfo().then((function(t){s={pIPAddr:t.getNetworkChanged().getPrivateIp()},e.yt({privateIp:s.pIPAddr})})),window.ol=this.H.log(),this.hF(),this.pluginReference=new c.HivePluginReference(this);var f=this.options().idleTimePeriod>this.options().feedbackPeriod?this.options().idleTimePeriod:_.et.Mu;this.bF=new p.Vd(f),this.registerGenericEvents()}e.Plugin=L,"undefined"!=typeof window&&(window.HiveRequestFactory=p.HiveRequestFactory),e._F=T.be,e.PlayerEvents=v.PlayerEvents,e.logError=function(t,e,i,r){var n=S.ErrorMonitor.lt();n.logError.apply(n,arguments)}},function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var r=new Uint8Array(16);t.exports=function(){return i(r),r}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}},function(t,e){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,n=i;return[n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]]].join("")}},function(t,e,i){"use strict";i(69);var r=i(12),n=i(70),o=i(39);t.exports=Array;var s=Array.prototype.splice,a=Array.prototype.slice;function u(t,e){Array.prototype[t]||Object.defineProperty(Array.prototype,t,{value:e,writable:!0,configurable:!0,enumerable:!1})}function h(t,e,i){this.bS=t,this.start=null==e?0:e,this.end=i}Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=Array.from||function(t){var e=[];return e.hiveAddEach(t),e},Array.Uf=function(t){for(var e=[],i=1/0,r=0;r<t.length;r++){var n=t[r];t[r]=n.toArray(),n.length<i&&(i=n.length)}for(r=0;r<t.length;r++){n=t[r];for(var o=0;o<n.length;o++)o<i&&o in n&&(e[o]=e[o]||[],e[o][r]=n[o])}return e},u("hiveAddEach",r.prototype.hiveAddEach),u("deleteEach",r.prototype.kf),u("toArray",r.prototype.toArray),u("toObject",r.prototype.Df),u("all",r.prototype.all),u("any",r.prototype.kh),u("min",r.prototype.min),u("max",r.prototype.max),u("sum",r.prototype.jf),u("average",r.prototype.Pf),u("only",r.prototype.only),u("flatten",r.prototype.Hf),u("zip",r.prototype.Lf),u("enumerate",r.prototype.enumerate),u("group",r.prototype.group),u("sorted",r.prototype.Ff),u("reversed",r.prototype.reversed),u("constructClone",(function(t){var e=new this.constructor;return e.hiveAddEach(t),e})),u("has",(function(t,e){return-1!==this.find(t,e)})),u("set",(function(t,e){return this[t]=e,!0})),u("hiveAdd",(function(t){return this.push(t),!0})),u("delete",(function(t,e){var i=this.find(t,e);return-1!==i&&(this.splice(i,1),!0)})),u("deleteAll",(function(t,e){e=e||this.Kh||Object.Wh;for(var i=0,r=0;r<this.length;)e(t,this[r])?(this.cj(r,1),i++):r++;return i})),u("find",(function(t,e){e=e||this.Kh||Object.Wh;for(var i=0;i<this.length;i++)if(i in this&&e(t,this[i]))return i;return-1})),u("findLast",(function(t,e){e=e||this.Kh||Object.Wh;var i=this.length;do{if(--i in this&&e(this[i],t))return i}while(0<i);return-1})),u("swap",(function(t,e,i){var r,n,o,u,h;if(t>this.length&&(this.length=t),void 0===i)return void 0!==e?s.call(this,t,e):void 0!==t?s.call(this,t):[];if(r=[t,e],Array.isArray(i)||(i=a.call(i)),o=0,(n=i.length)<1e3){for(;o<n;o++)r[o+2]=i[o];return s.apply(this,r)}for(h=s.apply(this,r);o<n;){for(r=[t+o,0],u=2;u<1002&&o<n;u++,o++)r[u]=i[o];s.apply(this,r)}return h})),u("peek",(function(){return this[0]})),u("poke",(function(t){0<this.length&&(this[0]=t)})),u("peekBack",(function(){if(0<this.length)return this[this.length-1]})),u("pokeBack",(function(t){0<this.length&&(this[this.length-1]=t)})),u("one",(function(){for(var t in this)if(Object.UC(this,t))return this[t]})),Array.prototype.clear||u("clear",(function(){return this.length=0,this})),u("compare",(function(t,e){var i,r,o;if(e=e||Object.compare,this===t)return 0;if(!t||!Array.isArray(t))return n.prototype.compare.call(this,t,e);for(r=Math.min(this.length,t.length),i=0;i<r;i++)if(i in this){if(!(i in t))return-1;if(o=e(this[i],t[i]))return o}else if(i in t)return 1;return this.length-t.length})),u("equals",(function(t,e){e=e||Object.Wh;var i=0,r=this.length;if(this===t)return!0;if(!t||!Array.isArray(t))return n.prototype.Wh.call(this,t);if(r!==t.length)return!1;for(;i<r;++i)if(i in this){if(!(i in t))return!1;if(!e(this[i],t[i]))return!1}else if(i in t)return!1;return!0})),u("clone",(function(t,e){if(null==t)t=1/0;else if(0===t)return this;if((e=e||new o).has(this))return e.get(this);var i=new Array(this.length);for(var r in e.set(this,i),this)i[r]=Object.clone(this[r],t-1,e);return i})),u("iterate",(function(t,e){return new h(this,t,e)})),u("Iterator",h),h.prototype.lj=null,Object.defineProperty(h.prototype,"vj",{get:function(){return this.lj||(this.lj={done:!1,value:null})}}),h.prototype.next=function(){return this.start===(null==this.end?this.bS.length:this.end)?(this.vj.done=!0,this.vj.value=void 0):this.vj.value=this.bS[this.start++],this.vj}},function(t,e){t.exports=Function,Function.Yh=function(){},Function.identity=function(t){return t},Function.Gf=function(t,e){function i(i,r){return e(t(i),t(r))}return e=e||Object.compare,t=t||Function.identity,i.compare=e,i.Gf=t,i},Function.get=function(t){return function(e){return Object.get(e,t)}}},function(t,e,i){var r=i(38);function n(){throw new Error("Can't construct. GenericOrder is a mixin.")}(t.exports=n).prototype.Wh=function(t,e){return e=e||this.Kh||r.Wh,this===t||!!t&&(this.length===t.length&&this.Lf(t).every((function(t){return e(t[0],t[1])})))},n.prototype.compare=function(t,e){if(e=e||this.Mf||r.compare,this===t)return 0;if(!t)return 1;var i=Math.min(this.length,t.length),n=this.Lf(t).reduce((function(t,r,n){return 0===t?i<=n?t:e(r[0],r[1]):t}),0);return 0===n?this.length-t.length:n},n.prototype.toJSON=function(){return this.toArray()}},function(t,e,i){"use strict";i(11);var r=i(51),n=i(107),o=i(12),s=i(41),a=i(13),u=i(40),h=i(108);function c(t,e,i,r){if(!(this instanceof c))return new c(t,e,i,r);e=e||Object.Wh,i=i||Object.hash,r=r||Function.Yh,this.Kh=e,this.$h=i,this.Xh=r,this.order=new this.AF(void 0,e),this.store=new this.NF(void 0,(function(t,i){return e(t.value,i.value)}),(function(t){return i(t.value)})),this.length=0,this.hiveAddEach(t)}(t.exports=c).Set=c,Object.hiveAddEach(c.prototype,o.prototype),Object.hiveAddEach(c.prototype,s.prototype),Object.hiveAddEach(c.prototype,a.prototype),Object.hiveAddEach(c.prototype,u.prototype),Object.defineProperty(c.prototype,"size",o.Jh),c.prototype.AF=r,c.prototype.NF=n,c.prototype.zh=function(t){return new this.constructor(t,this.Kh,this.$h,this.Xh)},c.prototype.has=function(t){var e=new this.order.Node(t);return this.store.has(e)},c.prototype.get=function(t,e){if(e)throw new Error("Set#get does not support second argument: equals");var i=new this.order.Node(t);return(i=this.store.get(i))?i.value:this.Xh(t)},c.prototype.hiveAdd=function(t){var e=new this.order.Node(t);if(this.store.has(e))return!1;var i=this.length;return this.$C&&this.tk([t],[],i),this.order.hiveAdd(t),e=this.order.head.nj,this.store.hiveAdd(e),this.length++,this.$C&&this.JC([t],[],i),!0},c.prototype.delete=function(t,e){if(e)throw new Error("Set#delete does not support second argument: equals");var i=new this.order.Node(t);return!!this.store.has(i)&&(i=this.store.get(i),this.$C&&this.tk([],[t],i.index),this.store.delete(i),this.order.splice(i,1),this.length--,this.$C&&this.JC([],[t],i.index),!0)},c.prototype.pop=function(){if(this.length){var t=this.order.head.nj.value;return this.delete(t),t}},c.prototype.shift=function(){if(this.length){var t=this.order.head.next.value;return this.delete(t),t}},c.prototype.xf=function(){if(0<this.length)return this.store.xf().value},c.prototype.clear=function(){var t;this.$C&&(t=this.toArray(),this.tk([],t,0)),this.store.clear(),this.order.clear(),this.length=0,this.$C&&this.JC([],t,0)},c.prototype.reduce=function(t,e){var i=arguments[2],r=this.order,n=0;return r.reduce((function(e,r){return t.call(i,e,r,n++,this)}),e,this)},c.prototype.reduceRight=function(t,e){var i=arguments[2],r=this.order,n=this.length-1;return r.reduceRight((function(e,r){return t.call(i,e,r,n--,this)}),e,this)},c.prototype.Bf=function(){return this.order.Bf()},c.prototype.values=function(){return new h(this)},c.prototype.log=function(){var t=this.store;return t.log.apply(t,arguments)},c.prototype.tc=function(){this.order.tc()}},function(t,e,i){"use strict";function r(){}(t.exports=r).CF={rk:"+",kF:"-",DF:"+",MF:"+",jF:".",PF:"'",HF:"+",LF:"|"},r.UF={rk:"╋",kF:"━",DF:"┻",MF:"┳",jF:"╭",PF:"╰",HF:"┣",LF:"┃"},r.FF={rk:"╋",kF:"━",DF:"┻",MF:"┳",jF:"┏",PF:"┗",HF:"┣",LF:"┃"}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(22),n=i(4),o=i(28);i(116),i(117);var s=i(0),a=i(8),u=i(25),h=i(17),c=i(18),l=i(14),p=i(1),f=i(15),d="[SNAP]",g=function(){this.metrics=new hive.snapshots.Metrics,this.GF=new hive.snapshots.Traffic,this.xF=new n,this.BF=new n,this.VF=new n,this.qF=new n,this.player=new hive.snapshots.Player};e.QF=g;var v=(y.prototype.init=function(t,e,i,r){this.logger=s.Framework.resolve(s.Framework.ht.m).log(r),this.SE=s.Framework.resolve(a.pf.af),this.logger.debug(d+" INIT STATS STORE - ID: "+t),this.tE=t,this.ticket=e,this.El(i)},y.prototype.uH=function(t){this.testId=t},y.prototype.WF=function(t){this.YF=t},y.prototype.KF=function(t){this.$F=t},y.prototype.XF=function(t){this.JF=t},y.prototype.El=function(t){this.app=t},y.prototype.zF=function(t){this.PD=t},y.prototype.ZF=function(){this.tG=new g,this.tE=null,this.ticket=null,this.reset()},y.prototype.reset=function(){this.vH=new g,this.iG(this.vH.GF),this.nG(this.vH),this.rG.source=[]},y.prototype.iG=function(t){t.reqN=0,t.respFallbackN=0,t.respFallbackErrN=0,t.respP2pN=0,t.reqOtherN=0,t.respFallbackOtherN=0,t.respFallbackOthertErrN=0,t.srcReqN=0,t.srcRespN=0,t.srcRespErrN=0,t.srcReqQt=0,t.srcRespQt=0,t.srcOverQt=0,t.srcOtherReqN=0,t.srcOtherRespN=0,t.srcOtherRespErrN=0,t.srcOtherReqQt=0,t.srcOtherRespQt=0,t.srcOtherOverQt=0,t.p2pSubReqN=0,t.p2pSubRespN=0,t.p2pSubRespPartN=0,t.p2pSubRespErrN=0,t.p2pSubRespExpN=0,t.p2pSubReqQt=0,t.p2pSubRespQt=0,t.p2pDirectQt=0,t.p2pRelayQt=0,t.p2pNatQt=0,t.p2pUdpbQt=0,t.fallAgentRespN=0,t.fallAgentPredHitN=0,t.fallAgentFailedRespN=0,t.fallAgenTrafficSuccessQt=0,t.p2pAgentPredHitN=0,t.p2pAgentPredMissN=0,t.p2pAgentPredPartialHitN=0,t.p2pAgenTrafficSuccessQt=0,t.p2pAgenTrafficFailureQt=0},y.prototype.nG=function(t){t.metrics.videoBufN=0,t.metrics.videoBufQt=0,t.metrics.clientBufferMs=0,t.metrics.lookupNotFound=0,t.metrics.lookupTotal=0,t.metrics.lookupLatency=0,t.metrics.lookupReqAccept=0,t.metrics.lookupReqEstablished=0,t.metrics.lookupFailed=0,t.player.bufferingN=0,t.player.bufferingMs=0},y.prototype.Vf=function(t){var e=this;void 0===t&&(t=!0);var i=new hive.snapshots.MetricSnapshot;i.timestamp=s.Framework.time(),i.guid=this.tE,i.sessionId=this.ticket.sessionId,i.eventId=new EventId,i.eventId.partnerId=this.ticket.pE(),i.eventId.customerId=this.ticket.wE(),i.eventId.contentId=this.ticket.Vk();try{var n=new hive.snapshots.ClientInfo;n.clientType=this.sG();var o=this.app.version.split(".");if(n.majorVersion=parseInt(o[0]),n.minorVersion=parseInt(o[1]),n.patchVersion=parseInt(o[2]),i.client=n,null!=this.testId){var a=new TestInfo;a.testId=this.testId,i.testInfo=a}}catch(t){this.logger.warn(d+" error setting Snapshot ClientInfo",t)}if(this.PD){var u=new hive.snapshots.AgentInfo;u.firstTierBitrates=this.PD.eG(),u.secondTierBitrates=this.PD.hG(),i.agentInfo=u}i.streamInfo=this.oH.oG(),i.traffic=[];var h=new hive.snapshots.TrafficKey;if(i.traffic.push({key:h,value:this.vH.GF}),this.vH.xF.forEach((function(t,e){var r=new hive.snapshots.TrafficKey;r.bitrate=e,i.traffic.push({key:r,value:t})})),i.metrics=this.vH.metrics,this.YF&&(i.metrics.clientBufferMs=this.YF.min()),this.$F&&(i.metrics.trackerLatency=this.$F.min()),this.JF&&(i.metrics.uG=this.JF.min()),i.player=this.vH.player,0<this.rG.source.length&&(i.rG=this.rG),this.aG){var c=this.aG.fG();this.vH.metrics.prtOutN=c.cG+c.lG,this.vH.metrics.prtInN=c.vG+c.dG;var l=this.aG.EG();l.forEach((function(t,r){e.pG(r,t,i)})),this.vH.qF.filter((function(t,e){return!l.has(e)})).forEach((function(t,r){e.pG(r,t,i)}))}return i.connInfo=new hive.snapshots.ConnectivityInfo,t?this.SE.getConnectivityInfo().then((function(t){return i.connInfo.privateIp=r.Qd.getPrivateIp(t.getNetworkChanged()),e.wG(e.gG(i))})).fail((function(t){return e.wG(e.gG(i))})):(i.connInfo.privateIp=r.Qd.getPrivateIp(this.SE.IE().getNetworkChanged()),this.wG(i))},y.prototype.gG=function(t){return t.connInfo.internalAs=this.bG,t.connInfo.externalAs=this.yG,t.connInfo.publicIp=this.TG,t},y.prototype.wG=function(t,e){void 0===e&&(e=[]);var i=f.Ec(t,"snapshot");return i.length&&p.ErrorMonitor.lt().logError("NaN found in MetricSnapshot",d,{keysWithNaN:i,snapshot:t}),e.length=0,e.push.apply(e,i),t},y.prototype.sG=function(){var t;switch(this.app.app){case"JS":t=ClientType.mG;break;case"PROXY":t=ClientType.OG;break;default:t=ClientType.SG}return t},y.prototype.pG=function(t,e,i){var r=this.vH.BF.get(t);e.traffic=r,i.partners||(i.partners=[]);var n=new hive.snapshots.PartnerKey;n.partnerGuid=t,i.partners.push({key:n,value:e})},y.prototype.iH=function(t,e){0<t&&(this.vH.metrics.videoBufN++,this.vH.metrics.videoBufQt+=t,this.vH.player.bufferingN++,this.vH.player.bufferingMs+=t),this.vH.player.playerBufferMs=e},y.prototype.wH=function(){return this.vH.GF},y.prototype.RG=function(){return this.tG.GF},y.prototype.IG=function(t){return this.tG.xF.has(t)||this.tG.xF.set(t,new hive.snapshots.Traffic),this.tG.xF.get(t)},y.prototype.EH=function(t){if(!this.vH.xF.has(t)){var e=new hive.snapshots.Traffic;this.iG(e),this.vH.xF.set(t,e)}return this.vH.xF.get(t)},y.prototype._G=function(){var t=new hive.snapshots.PartnerTraffic;return t.p2pSuccReq=0,t.p2pFailReq=0,t.p2pPartReq=0,t.p2pSuccReceived=0,t.p2pSuccReceivedLow=0,t.p2pFailReceived=0,t.p2pSuccResp=0,t.p2pFailResp=0,t.p2pPartResp=0,t.p2pSuccSent=0,t.p2pSuccSentLow=0,t.p2pFailSent=0,t},y.prototype.AG=function(t,e){return e.BF.has(t)||e.BF.set(t,this._G()),e.BF.get(t)},y.prototype.NG=function(t){return this.AG(t,this.vH)},y.prototype.CG=function(t){return this.AG(t,this.tG)},y.prototype.kG=function(t){this.SE=t},y.prototype.DG=function(t){this.aG=t},y.prototype.AE=function(t){},y.prototype.MG=function(t){var e=!1;this.rG.source.forEach((function(i){i.mF==t&&(i.count++,e=!0)})),e||this.rG.source.push(new hive.snapshots.jG({mF:t,count:1}))},y);function y(){this.ticket=null,this.bG=0,this.yG=0,this.testId=null,this.rG=new hive.snapshots.PG,this.ZF()}e.NF=v;var m=(E.prototype.init=function(t,e){this.logger=s.Framework.resolve(s.Framework.ht.m).log(e),this.logger.debug(d+" INIT CLIENT STATS"),this.store=t,this.HG()},E.prototype.HG=function(){var t=this;-1<this.LG&&s.Framework.clearInterval(this.LG),this.LG=s.Framework.setInterval((function(){t.snapshot()}),u.DE.kE.sp)},E.prototype.gl=function(t){this.state=t},E.prototype.zP=function(){if(this.store)return this.snapshot(!1)},E.prototype.reset=function(t){s.Framework.clearInterval(this.LG),this.store&&(!1===t?this.store.reset():this.store.ZF())},E.prototype.snapshot=function(t){var e=this;void 0===t&&(t=!0);var i=this.store.Vf(t);t?(this.logger.debug("[SNAP] TAKING SNAPSHOT"),i.then((function(t){return e.forward(t)})).fail((function(t){e.logger.warn("[SNAP] ERROR FORWARDING SNAPSHOT",t)})).finally((function(){e.store.reset()}))):(this.logger.debug("[SNAP] FLUSHING SNAPSHOT"),this.forward(i))},E.prototype.forward=function(t){var e=this;if(this.state!==c.ul.IDLE&&this.state!==c.ul.STOP){if(this.client&&this.client.UE()){switch(this.UG){case 0:default:this.logger.debug(d+" SENDING SNAPSHOT");break;case 1:this.logger.debug(d+" SENDING SNAPSHOT "+JSON.stringify(t));break;case 2:this.logger.debug(d+" SENDING SNAPSHOT",t);break;case 3:this.logger.debug(d+" SENDING SNAPSHOT "+JSON.stringify(t),t)}this.protocol.ql("SNAPSHOT",o.Ql.ONEWAY,0),t.write(this.protocol),this.protocol.Wl();var i=this.Kl.Yl(),r=this.$l(i,",",4),n=i.slice(r+1,i.length-1),s=new h.hl(HiveStreamingServices.GE,1,n);this.client.UE().send(s).fail((function(t){e.logger.warn(d+" PROBLEM: ",t)}))}}else this.logger.debug(d+" not send - state "+c.ul[this.state])},E.prototype.$l=function(t,e,i){return t.split(e,i).join(e).length},E);function E(){this.UG=isNaN(l.HiveConfig.DebugLogs.MetricSnapshotLogs)?0:l.HiveConfig.DebugLogs.MetricSnapshotLogs,this.state=c.ul.al,this.client=s.Framework.resolve(a.pf.R),this.Kl=new o.tv,this.protocol=new o.nv(this.Kl)}e.Rl=m},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o=i(3),s=i(30),a=i(118),u=i(0),h=i(25),c=i(17),l=i(7).ut.Qa,p=(f.prototype.init=function(t,e){var i=this;if(this.FG)this.FG.then((function(){var t={partnerId:e.pE(),customerId:e.wE(),contentId:e.Vk(),secret:e.qk()},r=new c.hl(HiveStreamingServices.GG,1,JSON.stringify(t));i.connection.send(r)}));else{var r=o.defer(),n=h.DE.kE.JE;e.Bk&&(l?n=h.DE.kE.ZE:(this.logger.warn("[HiveComm] Error trying to resolve test ticket against production services - use production ticket or test plugin"),r.reject(new Error("test ticket in production"))));var u=new s(n).Ky({"connection-id":t,partner_id:e.pE(),customer_id:e.wE(),content_id:e.Vk(),ticket:e.qk()}).toString();this.connection=new a.xG(u,h.DE.kE.ep,h.DE.kE.hp,h.DE.kE.op),this.connection.onconnect((function(){i.logger.debug("HIVE SERVICES CONNECTED"),r.resolve(i.connection)})),this.connection.onerror((function(){i.logger.warn("Hive Services Connection failed"),r.reject(i.connection)})),this.FG=r.promise}return{jl:this.connection,promise:this.FG}},f.prototype.connect=function(){this.connection&&this.connection.connect(!0)},f.prototype.FD=function(t){},f.prototype.UE=function(){return this.connection},f.prototype.close=function(){this.connection&&(this.FG=null,this.connection.close(!1))},f);function f(){this.logger=u.Framework.resolve(u.Framework.ht.m).log(),this.logger.debug("INIT SERVICE CLIENT")}e.BG=p;var d,g=(n(v,d=p),v.prototype.init=function(t,e,i){var r=this;if(this.FG)return this.FG;var n=o.defer(),u=new s(i).Ky({"connection-id":t}).toString();return this.logger.debug(this.loggerId+" Connecting to serviceEndpoint "+u),this.connection=new a.xG(u,h.DE.kE.ep,h.DE.kE.hp,h.DE.kE.op),this.connection.onconnect((function(){r.logger.debug("HIVE SERVICES CONNECTED"),n.resolve(r.connection)})),this.connection.on(HiveStreamingServices.GG,0,(function(t){r.logger.debug("FAKED RESOLVING")})),this.connection.onerror((function(){r.logger.warn("Hive Services Connection failed"),n.reject(r.connection)})),this.FG=n.promise,this.FG},v);function v(){var t=null!==d&&d.apply(this,arguments)||this;return t.loggerId="[ServicesClientViaToken]",t}e.VG=g},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0}),i(119);var r=i(3),n=i(4),o=i(0),s=i(46),a=function(t){this.VE=(new Date).getTime(),this.qG=t},u=(h.prototype.resolve=function(t,e,i){var n=this,o=r.defer();return t&&(t.on(HiveStreamingServices.GG,0,(function(t){n.QG(t)})),t.on(HiveStreamingServices.GG,2,(function(t){n.QG(t)})),this.WG.set(e,new a(o))),o.promise},h.prototype.QG=function(t){var e=this,i=(new Date).getTime(),r=JSON.parse(t.msg),n=!1;this.WG.forEach((function(t,o){if(e.YG(o,r)){n=!0;var s=e.zU(o,r);s?(s.VE=t.VE,s.qE=i,t.qG.resolve(s)):t.qG.reject("Ticket verification failed"),e.WG.delete(s)}})),n||this.logger.warn("no pending ticket matching: "+t.msg)},h.prototype.Nl=function(t){if(new RegExp("^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?").test(t)){var e=this.KG();return e.Gk(t),e}return null},h.prototype.KG=function(){return new s.Ticket},h.prototype.YG=function(t,e){return t.pE()===e[s.Ticket.tD]&&t.wE()===e[s.Ticket.Zk]&&t.Vk()===e[s.Ticket.iD]},h.prototype.zU=function(t,e){return t.Uk(e),t.Fk()?t:null},h);function h(){this.WG=new n,this.logger=(o.Framework.resolve(o.Framework.ht.m)||console).log(),this.logger.debug("INIT TICKET RESOLVER")}e.$G=u},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o=i(50),s=i(3),a=i(0),u=i(25),h=i(120),c=(l.prototype.XG=function(){var t=this,e=s.defer(),i=indexedDB.open(this.JG);return i.onupgradeneeded=function(){i.result.createObjectStore(t.zG,{keyPath:"id"})},i.onsuccess=function(){var t=i.result;e.resolve(t)},i.onerror=function(t){e.reject(t)},e.promise},l.prototype.Al=function(){var t=this;if(this.ZG)return this.ZG;var e=s.defer();if(this.tE)e.resolve(new h.tx(this.tE));else if(u.DE.Wa&&this.indexedDB){var i=setTimeout((function(){t.logger.warn("[HiveComm] timeout retrieving persistent ID - generating random one"),t.tE=t.ix(),t.logger.debug("[HiveComm] Generated UUID: "+t.tE),e.resolve(new h.tx(t.tE))}),4e3);try{this.XG().then((function(r){var n=r.transaction(t.zG,"readwrite").objectStore(t.zG).get("MYID");n.onsuccess=function(){if(clearTimeout(i),t.tE)e.resolve(new h.tx(t.tE));else if(null!=n.result&&u.DE.Wa){var o=n.result.value;t.logger.debug("[HiveComm] Retrieved persistent UUID: "+o),t.tE=o,r.close(),e.resolve(new h.tx(t.tE))}else{var s=t.ix();t.nx(r,s),e.resolve(new h.tx(t.tE))}},n.onerror=function(r){clearTimeout(i),t.tE||(t.logger.warn("[HiveComm] error retrieving persistent UUID: "+r),t.tE=t.ix(),t.logger.debug("[HiveComm] Generated UUID: "+t.tE)),e.resolve(new h.tx(t.tE))}})).fail((function(r){clearTimeout(i),t.tE||(t.logger.warn("[HiveComm] error opening indexedDB - generating random id. Error: "+r),t.tE=t.ix(),t.logger.debug("[HiveComm] Generated UUID: "+t.tE)),e.resolve(new h.tx(t.tE))}))}catch(t){this.tE=this.ix(),this.logger.debug("[HiveComm] Persistence error - Generate UUID: "+this.tE,t),e.resolve(new h.tx(this.tE))}}else this.tE=this.ix(),this.logger.debug("[HiveComm] Persistence disabled - Generate UUID: "+this.tE),e.resolve(new h.tx(this.tE));return this.ZG=e.promise,this.ZG},l.prototype.nx=function(t,e){var i=this,r=t.transaction(this.zG,"readwrite");r.objectStore(this.zG).put({id:"MYID",value:e}),r.oncomplete=function(){i.logger.debug("[HiveComm] completed UUID persistence"),t.close()},this.logger.debug("[HiveComm] Generated UUID: "+e),this.tE=e},l.prototype.ix=function(){return o.Kk()},l);function l(){this.zG="IdentityStore",this.JG="IdentityDB",this.tE=null,this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,a.Framework&&a.Framework.resolve(a.Framework.ht.m)?this.logger=a.Framework.resolve(a.Framework.ht.m).log():this.logger=console}e.sx=c;var p,f=(n(d,p=c),d.prototype.Al=function(){var t=this;if(this.ex)return this.ex;var e=s.defer();return p.prototype.Al.call(this).then((function(i){var r=t.ix(),n=i.Ml(),o=new h.tx(r,n);e.resolve(o)})).fail((function(i){var r=t.ix(),n=new h.tx(r);e.resolve(n)})),this.ex=e.promise,this.ex},d);function d(){return p.call(this)||this}e.hx=f},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.prototype.ox=function(t){this.hostname=t},n.prototype.getHostName=function(){return this.hostname},n.prototype.ux=function(t){this.nc=t},n.prototype.getNetworkChanged=function(){return this.nc},n);function n(){}e.ax=r},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(0),o=i(8),s=i(121),a=i(1),u=(h.prototype.lx=function(){var t=new s.vx;this.Ex.ux(t)},h.prototype.IE=function(){return this.Ex},h.prototype.getConnectivityInfo=function(){var t=this;if(!this.connInfo)return r.reject("ConnInfo helper undefined");var e=setTimeout((function(){return t.logger.warn(t.loggerId+"Get connectivity info expired"),t.Ex?r.resolve(t.Ex):r.reject("expired")}),2e3);try{return this.connInfo.getConnectivityInfo().then((function(i){return clearTimeout(e),t.Ex=i})).fail((function(e){return t.logger.debug(t.loggerId+" get connectivity info failed with error 1: ",e),t.Ex?t.Ex:r.reject(e)}))}catch(t){return this.logger.debug(this.loggerId+" get connectivity info failed with error 2:",t),r.reject(t)}},h.prototype.px=function(t,e,i){},h.prototype.wx=function(t){},h);function h(){this.loggerId="[PreloadConnectivityInfoProvider] ",this.connInfo=window.myConnInfo,this.logger=n.Framework.resolve(n.Framework.ht.m).log(),this.Ex=n.Framework.resolve(o.pf.ff),this.connInfo||a.ErrorMonitor.lt().logError("helper undefined",this.loggerId),this.lx()}e.gx=u},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.prototype.bx=function(t){this.publicIp=t},n.prototype.getPublicIp=function(){return this.publicIp},n.prototype.yx=function(t){this.Tx=t},n.prototype.getMacAddress=function(){return this.Tx},n.prototype.mx=function(t){this.nic=t},n.prototype.getNic=function(){return this.nic},n.prototype.Ox=function(t){this.nicName=t},n.prototype.getNicName=function(){return this.nicName},n.prototype.Sx=function(t){this.privateIp=t},n.prototype.getPrivateIp=function(){return this.privateIp},n.prototype.Rx=function(t){this.netmask=t},n.prototype.getNetmask=function(){return this.netmask},n.prototype.Ix=function(t){this._x=t},n.prototype.getCidr=function(){return null},n);function n(){}e.Ax=r},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(4),o=i(0),s=i(8),a=i(79),u=i(122),h=i(14),c=i(25),l=i(47),p=(f.prototype.lx=function(){var t=new a.Ax;this.Ex.ux(t)},f.prototype.Nx=function(){var t=this;o.Framework.setInterval((function(){t.Cx=[],t.kx=[],t.Dx=new n,t.publicIp=null,t.Mx=null,t.getConnectivityInfo()}),12e4)},f.prototype.getConnectivityInfo=function(){return this.Mx||(this.Mx=this.jx()),this.Mx},f.prototype.IE=function(){return this.Ex},f.prototype.jx=function(){var t=this,e=r.defer();if(this.Px=o.Framework.setTimeout((function(){e.reject({Hx:!0,message:"expired"})}),4e3),h.HiveConfig.ConnInfo.detectPrivateIP&&this.Lx())try{this.Ux=new RTCPeerConnection(null),this.Fx=this.Ux.createDataChannel("sendChannel",{reliable:!1}),this.Gx=new RTCPeerConnection(null),this.Gx.ondatachannel=function(i){t.xx=i.channel,t.xx.onopen=function(i){if("open"===t.xx.readyState){if(t.Gx.close(),t.Ux.close(),t.Gx=null,t.Ux=null,t.logger.debug("Collected ips ["+t.Dx.map((function(t,e){return e+":"+t.Bx})).join(", ")+"]"),c.DE.kE.ap&&!t.Vx&&(setTimeout((function(){l.hD.rD(null,null,"local_ice",null,t.qx)}),5e3),t.Vx=!0),0<t.Dx.length&&c.DE.kE.up){var r=t.Dx.entries().sort((function(t,e){return e[1].Bx-t[1].Bx}));r=r.splice(0,1)[0],t.Dx.clear(),t.Dx.set(r[0],r[1])}t.Wx.Qx().then((function(e){t.kx=e,0<t.kx.length&&(t.logger.debug("Already known matching ips ["+t.kx.join(",")+"]"),t.kx.forEach((function(e){0<t.Dx.keys().indexOf(e)&&(t.Cx.push(e),t.Dx.delete(e))}))),t.Cx=t.Cx.concat(t.Dx.keys())})).fail((function(e){t.logger.warn("Get Previous working ips failed with error "+e.message),t.Cx=t.Cx.concat(t.Dx.keys())})).finally((function(){t.logger.debug("Final private ip list ["+t.Cx.join(",")+"]"),e.resolve(t.Yx())}))}}},this.Ux.onicecandidate=function(i){i.candidate&&t.Kx(i.candidate.candidate),i.candidate&&t.Gx.addIceCandidate(i.candidate).catch((function(i){e.reject({Hx:!0,message:i.message}),o.Framework.clearTimeout(t.Px),console.log("Error: Failure during addIceCandidate()")}))},this.Gx.onicecandidate=function(i){i.candidate&&t.Kx(i.candidate.candidate),i.candidate&&t.Ux.addIceCandidate(i.candidate).catch((function(i){e.reject({Hx:!0,message:i.message}),o.Framework.clearTimeout(t.Px),console.log("Error: Failure during addIceCandidate()")}))},this.Ux.createOffer().then((function(e){return t.Ux.setLocalDescription(e)})).then((function(){return t.Gx.setRemoteDescription(t.Ux.localDescription)})).then((function(){return t.Gx.createAnswer()})).then((function(e){return t.Gx.setLocalDescription(e)})).then((function(){return t.Ux.setRemoteDescription(t.Gx.localDescription)})).catch((function(i){e.reject({Hx:!0,message:i.message}),o.Framework.clearTimeout(t.Px),console.log("Error: Failure creating offer")}))}catch(i){e.reject({Hx:!0,message:i.message})}else{o.Framework.clearTimeout(this.Px);var i=h.HiveConfig.ConnInfo.detectPrivateIP?"webrtc datachannel not supported":"private IP detection disabled";e.reject({Hx:!1,message:i})}return e.promise},f.prototype.Lx=function(){try{return"function"==typeof RTCPeerConnection.prototype.createDataChannel}catch(t){return!1}},f.prototype.Kx=function(t){var e="candidate:",i=t.indexOf(e)+e.length,r=t.substr(i).split(" "),n=r[0],o=r[1],s=r[2],a=r[3],u=r[4],h=r[5],l={$x:o,type:r[7],Xx:n,protocol:s,address:u,port:h,Bx:a};c.DE.kE.ap&&!this.Vx&&this.qx.push(l),this.Jx(l)},f.prototype.Jx=function(t){var e=/([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(t.address);if(e){var i=e[0],r=this.Dx.get(i);(isNaN(r)||t.Bx>r)&&this.Dx.set(i,t)}},f.prototype.Yx=function(){var t=new a.Ax;return 0<this.Cx.length&&t.Sx(this.Cx[0]),this.publicIp&&t.bx(this.publicIp),this.Ex.ux(t),this.Ex},f.prototype.px=function(t,e,i){if(this.publicIp=t,this.zx(),0===i&&1<this.Cx.length)this.Cx.shift();else if(c.DE.rf&&0!==i&&-1==this.kx.indexOf(this.Cx[0]))this.kx.unshift(this.Cx[0]),this.Wx.Zx(this.kx.slice(0,2));else if(c.DE.rf&&0!==i&&0<this.kx.indexOf(this.Cx[0])){var r=this.kx.indexOf(this.Cx[0]);this.kx=this.kx.splice(r,1),this.kx.unshift(this.Cx[0]),this.Wx.Zx(this.kx.slice(0,2))}this.Yx()},f.prototype.zx=function(){var t=this.Cx.indexOf(this.publicIp);-1<t&&this.Cx.splice(t,1)},f.prototype.wx=function(t){},f);function f(){this.Ux=null,this.Gx=null,this.Fx=null,this.xx=null,this.Dx=new n,this.publicIp=null,this.Cx=[],this.failed=!1,this.Px=null,this.qx=[],this.Vx=!1,this.logger=o.Framework.resolve(o.Framework.ht.m).log(),this.Ex=o.Framework.resolve(s.pf.ff),this.Wx=new u.tB,this.kx=[],this.lx(),this.Nx()}e.iB=p},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(33),a=i(55),u=i(1),h=i(6),c=(n(l,o=s.HiveRequest),l.nB=function(t,e){l.rB[e]?l.rB[e].push(t):l.rB[e]=[t]},l.registerComm=function(t,e){l.sB[e]=t},l.eB=function(t,e){var i=l.rB[e],r=l.sB[e],n=i&&i.length||0;r?n?(l.rB[e]=l.rB[e].filter((function(e){return e.id!=t.id})),n===l.rB[e].length?r.logger().warn(l.loggerId+" Attempt to unregister a not found session (pluginId = "+e+", sessionId = "+t.id+")"):r.logger().debug(l.loggerId+" Unregistered session (pluginId = "+e+", sessionId = "+t.id+")")):r.logger().warn(l.loggerId+" Attempt to unregister a session for plugin with no sessions (pluginId = "+e+", sessionId = "+t.id+")"):console.log(l.loggerId+" Attempt to unregister session with no comm (pluginId = "+e+", sessionId = "+t.id+")")},l.prototype.send=function(){var t=this;if(!this.pluginId){var e=Object.keys(l.sB);0<e.length&&(this.pluginId=l.sB[e[0]])}var i=l.rB[this.pluginId],r=l.sB[this.pluginId],n=!1;i.forEach((function(e){a.LP(i)||a.LP(r)||e.ticket.Yk!==t.url||(r.logger().debug("Intercepted Manifest Request "+t.url),e.tech.hB(t),r.onActivateSession(t.url,!0),n=!0)})),n||(i.forEach((function(e){!a.LP(i)&&!a.LP(r)&&0<=t.url.indexOf(e.ticket.SourceURL)&&(r.logger().debug("Intercepted Manifest Request "+t.url),e.tech.hB(t),r.onActivateSession(t.url),n=!0)})),n||(u.ErrorMonitor.lt().logError("HiveJS Tech or Comm are not defined",this.loggerId),this.resolve()))},l.prototype.resolve=function(){var t=this,e=new XMLHttpRequest;e.open("GET",this.url),e.onreadystatechange=function(){4===e.readyState&&(t.response=e.responseText,t.responseText=e.responseText,t.readyState=4,t.status=e.status,t.dispatchEvent(h.La.createEvent(Event,"readystatechange",{currentTarget:t})),t.dispatchEvent(h.La.createEvent(ProgressEvent,"onload",{currentTarget:t})),console.debug("Returned Manifest Request "+t.url))},e.send()},l.sB={},l.rB={},l.loggerId="[HiveRequestManifest]",l);function l(){return null!==o&&o.apply(this,arguments)||this}e.OF=c},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(16),a=i(0),u=i(31),h=(n(c,o=u.Hive),c.Api=function(){return c.app="JS",a.Framework.resolve(s.nl.Gc)},c);function c(){return null!==o&&o.apply(this,arguments)||this}e.aA=h},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(6),n=i(1),o=(s.prototype.addEventListener=function(t,e,i){this.events[t]=this.events[t]||[],this.events[t].push(e)},s.prototype.removeEventListener=function(t,e,i){this.events[t]&&(this.events[t]=this.events[t].filter((function(t){return t!==e})))},s.prototype.dispatchEvent=function(t){var e=this;this.events[t.type]&&this.events[t.type].forEach((function(i){try{"function"==typeof i?i.call(e,t):"function"==typeof i.rH&&i.rH(t)}catch(i){n.ErrorMonitor.lt().logError(e.loggerId+"Error in callback handler '"+t.type+"'",{error:i})}}));var i=this["on"+t.type];if("function"==typeof i)try{i.call(this,t)}catch(i){n.ErrorMonitor.lt().logError(this.loggerId+"Error in callback handler '"+t.type+"'",{error:i})}return!1},s.prototype.msCachingEnabled=function(){return void 0!==this.msCaching},s.prototype.overrideMimeType=function(t){this.mimeType=t},s.register=function(t,e){s.uA[t]=e},s.prototype.oB=function(t){this.pluginId||(this.pluginId=s.uA[t])},s.prototype.open=function(t,e,i,n,o){void 0===i&&(i=!0),void 0===n&&(n=null),void 0===o&&(o=null),this.url=e.trim(),this.method=t,this.username=n,this.password=o,this.async=i,this.readyState=this.OPENED;var s=r.La.createEvent(Event,"readystatechange",{currentTarget:this});this.dispatchEvent(s)},s.prototype.setRequestHeader=function(t,e){if(this.readyState!==this.OPENED)throw new Error("The object's state must be OPENED.");this.uB.push({key:t,value:e})},s.prototype.getResponseHeader=function(t){var e=this.getAllResponseHeaders();if(e){var i=[];return e.split(/[\r\n]+/).forEach((function(t){var e=t.match(/^([^:]+): ?(.+)$/);e&&(i[e[1]]=e[2])})),i[t.toLowerCase()]}return null},s.prototype.getAllResponseHeaders=function(){return this.$p},s.prototype.onload=function(t){},s.prototype.onloadend=function(t){},s.prototype.onerror=function(t){},s.prototype.onprogress=function(t){},s.prototype.onreadystatechange=function(t){},s.prototype.onabort=function(t){},s.prototype.onloadstart=function(t){},s.prototype.ontimeout=function(t){},s.uA={},s.Kv=0,s);function s(t){this.loggerId="[HiveXHR] ",this.DONE=4,this.LOADING=3,this.HEADERS_RECEIVED=2,this.OPENED=1,this.UNSENT=0,this.username=null,this.password=null,this.uB=[],this.responseType="",this.readyState=this.UNSENT,this.status=0,this.async=!0,this.timeout=0,this.events={},t&&(this.pluginId=t)}e.oA=o},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(6),n=i(26),o=i(9),s=i(0),a=i(5),u=i(2),h=i(1),c=i(47),l=i(4),p=(f.prototype.aB=function(t,e){try{var i=void 0,r=t.Mp.duration,o=t.size,c=-1,l=0,p=-1;if(this.fB.ha()&&(c=Math.max(10,this.fB.la(o))),l=-1<c?Math.max(0,r-c*a.ea.Qu.wo):.5*r,f.cB){var d=t.lB.QM();0<d&&(p=e/d*a.ea.Qu.yo),i=t.type===n.fp.pp?r*a.ea.Qu.bo:-1<p&&p<=l?l:-1<p&&p<=r*a.ea.Qu.To?r*a.ea.Qu.To:0}else t.type==n.fp.pp&&(l*=2),i=Math.max(this.vB(),l);if(a.ea.ra.Pu){var g=this.dB.has(t.jp())?this.dB.get(t.jp()):this.EB(t);g.push([s.Framework.time(),e,c,l,p,t.type,i]),this.dB.set(t.jp(),g)}return this.logger.debug("TIMER DETAILS duration: "+r+" left/total: "+e+"/"+o+" cdn: "+c+" remaining: "+l+" p2p: "+p+" timeout: "+i),i}catch(t){return h.ErrorMonitor.lt().logError("Error calculating the p2p timeout",this.loggerId,u.Cr.kr,t),0}},f.prototype.pB=function(t,e){return 5e3},f.prototype.wB=function(t){try{return this.fB.ha()?Math.min(this.fB.la(t),this.gB()):this.bB()}catch(t){return h.ErrorMonitor.lt().logError("Error calculating the delivery delay",this.loggerId,u.Cr.Dr,t),this.bB()}},f.prototype.cL=function(t){if(t.Dp()===o.wf.bf)switch(t.kp()){case n.fp.lp:case n.fp.cp:case n.fp.vp:case n.fp.dp:this.fB.ca(t.Qp());break;case n.fp.Ep:case n.fp.pp:this.yB.ca(t.Qp())}if(a.ea.ra.Pu){var e=this.dB.has(t.jp())?this.dB.get(t.jp()):this.EB(t);e.push([s.Framework.time(),t.kp()]),c.hD.sD(null,null,"p2p_timer",this.PD.getReportingGuid(),e,10)}},f.prototype.vB=function(){return f.TB},f.prototype.bB=function(){return f.mB},f.prototype.gB=function(){return f.OB},f.prototype.EB=function(t){return[[t.jp(),t.Mp.duration,t.size]]},f.cB=!0,f.TB=500,f.OB=1500,f.mB=500,f);function f(t){this.loggerId="[TIMER HANDLER] ",this.fB=new r.ga,this.yB=new r.ga,this.dB=new l,this.logger=s.Framework.resolve(s.Framework.ht.m).log(),this.PD=t}e.SB=p},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(34),n=i(139),o=i(141),s=i(86),a=i(0),u=i(142),h=i(9),c=i(61),l=i(143),p=i(144),f=i(57),d=i(14),g=i(1),v=i(2),y=i(145),m=i(6),E=i(146),w=(b.prototype.RB=function(t){var e="";return-1!==t.indexOf("/")&&(-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),e=t.substring(0,t.lastIndexOf("/")+1)),e},b.prototype.isLive=function(){return this.live},b.prototype.xH=function(t){var e=[];return this.IB.forEach((function(i){void 0!==t&&i.type!==t||-1==e.indexOf(i.bandwidth)&&e.push(i.bandwidth)})),e},b.prototype.reset=function(){this.IB=[]},b.prototype._B=function(){return this.AB},b.prototype.parse=function(t,e,i){var r=this;try{this.reset(),this.iL=t,this.NB(t,e);var n=this.manifest.BaseURL;this.live="static"!==this.manifest.type;var o=this.manifest.Period_asArray[0];return o.AdaptationSet_asArray,o.AdaptationSet.forEach((function(t){var e=-1!=(t.mimeType?t.mimeType:t.Representation_asArray[0].mimeType).indexOf("audio")?h.wf.gf:h.wf.bf;e===h.wf.bf&&t.ContentProtection&&r.CB(t.ContentProtection);var i=t.SegmentTemplate;t.Representation_asArray&&t.Representation_asArray.forEach((function(t){var s=new u.kB,a=t.SegmentTemplate?t.SegmentTemplate:i;if(s.type=e,s.bandwidth=r.DB(t),s.timescale=parseInt(a.timescale)||1e3,s.MB=t.id,s.initialization=n+""+a.initialization,s.initialization=s.initialization.replace(b.jB,""+s.bandwidth),s.initialization=s.initialization.replace(b.PB,""+s.MB),s.initialization=m.La.ka(s.initialization),s.HB=n+""+a.media,s.HB=s.HB.replace(b.jB,""+s.bandwidth),s.HB=s.HB.replace(b.PB,""+s.MB),s.HB=m.La.ka(s.HB),s.LB=r.UB(s.HB),s.HB.match(b.FB)){if(s.GB=parseInt(a.duration),!s.GB)throw new Error("Expected duration on SegmentTemplate for Number-based template");s.startNumber=parseInt(a.startNumber)||0,s.xB=parseInt(o.start)||0,r.yL=!0}else{var h=r.BB(a.SegmentTimeline_asArray[0].S_asArray,s.HB,s.bandwidth,e);s.XH=h.VB,s.qB=h.QB}r.IB.push(s)}))})),this.AB=!0,this.WB(e,i)}catch(t){throw g.ErrorMonitor.lt().logError("Error parsing the metadata",this.loggerId,v.nr.rr,t),this.AB=!1,new Error(t)}},b.prototype.DB=function(t){if(this.YB&&this.KB){var e=t.id.match(this.KB),i=e?e[0]:t.id;if(this.YB.has(i))return this.YB.get(i)}return parseInt(t.bandwidth)},b.prototype.$B=function(){if(this.YB){var t=this.YB.keys();t.length&&(this.KB=new RegExp("\\b("+t.join("|")+")\\b"))}else this.KB=null},b.prototype.UB=function(t){var e=t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),i=e.match(/\\\$Number%(\d+)d\\\$/);return i&&(e=e.replace("\\$Number%"+i[1]+"d\\$","(\\d{"+parseInt(i[1])+"})")),e=(e=e.replace("\\$Time\\$","([0-9]*)")).replace("\\$Number\\$","([0-9]*)"),new RegExp(e,"i")},b.prototype.BB=function(t,e,i,n){var o=this;try{var s,a=new r,u=new r,h=0,l=0;return this.XB(1,"Extracting segments using template "+e+" for",t),t.forEach((function(t){if(t.d){t.t?h=parseInt(t.t):h+=l;var r=parseInt(t.d),p=e.replace(b.JB,h+"");(g=new c.wU(h,i,r,p,p)).type=n,s&&(s.next=g),a.set(p,g),u.set(h,g),s=g;var f=0;t.r&&(f=parseInt(t.r));for(var d=0;d<f;d++){var g;h+=r,p=e.replace(b.JB,h+""),(g=new c.wU(h,i,r,p,p)).type=n,s&&(s.next=g),a.set(p,g),u.set(h,g),s=g}o.XB(2,"Segment",t,"parsed to",g),l=r}})),{VB:a,QB:u}}catch(t){throw g.ErrorMonitor.lt().logError("Error extracting segment maps",this.loggerId,v.nr.sr,t),new Error(t)}},b.prototype.CB=function(t){try{if(t){if(t.CryptoPeriod){var e=t.CryptoPeriod;this.dL&&!this.dL.zB()&&this.dL instanceof l.ZB||(this.dL=new l.ZB(e.keyUriTemplate,e.IV,this.authenticationToken))}else this.dL&&this.dL instanceof p.tV||(this.dL=new p.tV);this.dL&&f.DASH.kH&&this.dL.init()}}catch(t){throw g.ErrorMonitor.lt().logError("Error initializing the protection",this.loggerId,v.nr.er,t),new Error(t)}},b.prototype.$H=function(t){return t=m.La.Ca(t),this.IB.find((function(e){return e.LB.test(t)}))},b.prototype.WH=function(t){t=m.La.Ca(t);try{var e=this.$H(t);if(e){var i;if(e.XH&&(i=e.XH.get(t)))return i;var r=t.match(e.LB);if(r){var n=parseInt(r[1]);return this.RL(n,e.bandwidth)}}throw new Error("No representation for "+t)}catch(t){return g.ErrorMonitor.lt().logError("Error getting the segment info",this.loggerId,v.nr.hr,t),null}},b.prototype.KH=function(t){t=m.La.Ca(t);try{return this.$H(t).timescale}catch(t){return g.ErrorMonitor.lt().logError("Error getting the representation for timescale",this.loggerId,v.nr.ur,t),1e4}},b.prototype.QH=function(t){return t=m.La.Ca(t),this.IB.some((function(e){return e.initialization===t}))},b.prototype.JH=function(t){t=m.La.Ca(t);var e=this.WH(t);return null!=e?e.next:null},b.prototype.OL=function(t,e){var i=this.IB.find((function(t){return t.bandwidth===e}));if(i){if(i.qB)return 1;var r=a.Framework.time(),n=this.manifest.availabilityStartTime.getTime()+(this.manifest.Period.start||0)+(t-i.startNumber+1)*i.GB*i.timescale;return Math.max(1,n-r)}return 1},b.prototype.DM=function(t,e,i,r){try{var n=this.IB.find((function(t){return t.bandwidth===r}));if(n){if(n.qB&&n.qB.has(t)&&n.qB.has(i)){for(var o=n.qB.get(t),s=n.qB.get(i),a=0,u=o;u&&u!=s;)a+=u.duration,u=u.next;return Math.round(a/(n.timescale/1e3))}if(n.GB)return(i-t)*n.GB*n.timescale}return 0}catch(t){return g.ErrorMonitor.lt().logError("Error extracting the segment distance",this.loggerId,v.nr.ur,t),0}},b.prototype.iV=function(t){try{t instanceof Uint8Array&&(t=t.buffer);var e=o.nV(t),i=e.fetch("tfhd"),r=e.fetch("trun"),n=i?i.default_sample_duration:0;if(r){var s=0;return r.rV.forEach((function(t){s+=t.sample_duration})),isNaN(s)&&0<n&&(s=n*r.rV.length),s}}catch(t){return g.ErrorMonitor.lt().logError("Error extracting duration from the buffer",this.loggerId,v.nr.ar,t),0}},b.prototype.WB=function(t,e){var i=this.sV();if(!e&&(this.live||i||d.HiveConfig.Dash.DashRemoveBitrateSize))try{var r=new s({}),n=r.eV(t);return this.live&&this.hV(n),(i||d.HiveConfig.Dash.DashRemoveBitrateSize)&&this.oV(n,i,d.HiveConfig.Dash.DashRemoveBitrateSize),r.uV(n)}catch(t){this.logger.error(t)}return t},b.prototype.hV=function(t){var e=this,i=Math.max(1,f.DASH.DASH_METADATA_MIN_FRAGMENTS),r=Math.max(1,f.DASH.HH),n=[],o=!1;return t.MPD&&t.MPD.Period&&t.MPD.Period.AdaptationSet&&t.MPD.Period.AdaptationSet.forEach((function(s){if(!o)if(s.SegmentTemplate&&s.SegmentTemplate._media&&s.SegmentTemplate._media.match(b.FB)){o=!0;var u=a.Framework.time();t.MPD.Period._start=t.MPD.Period._start||"PT0S";var h=t.MPD.Period._start,c=E.default(h),l=parseInt(s.SegmentTemplate._timescale)||1e3,p=parseInt(s.SegmentTemplate._duration)*l,d=Math.max(0,Math.floor((u-(new Date(t.MPD._availabilityStartTime).getTime()+1e3*c))/p)-f.DASH.PH),g=Math.ceil(1e3*f.DASH.jH/p),v=Math.max(0,Math.min(d,g)),y=0<v?v*p/1e3:0;try{t.MPD.Period._start="PT"+(c+y)+"S",e.logger.debug("Trimmed "+y+" from period start "+h+" => "+t.MPD.Period._start)}catch(s){e.logger.warn("Could not modify period: "+s)}}else if(e.aV(s)&&s.Representation_asArray){var m=e.fV(s.SegmentTemplate,r,i);s.Representation_asArray.forEach((function(t){m.bitrate=parseInt(t._bandwidth)||0,n.push(m)}))}else s.Representation_asArray&&0<s.Representation_asArray.length&&s.Representation_asArray.forEach((function(t){if(e.cV(t)){var o=e.fV(t.SegmentTemplate,r,i);o.bitrate=parseInt(t._bandwidth)||0,n.push(o)}}))})),t},b.prototype.cV=function(t){return t&&("video/mp4"===t._mimeType||"video"===t._contentType||t.SegmentTemplate&&t.SegmentTemplate._media&&-1<t.SegmentTemplate._media.indexOf("video"))},b.prototype.fV=function(t,e,i){for(var r=0,n=0,o=t.SegmentTimeline.S_asArray,s=e*parseInt(t._timescale),a=0,u=0,h=0;h<o.length&&0<i;h++)i<(f=(l=o[a=h])._r?parseInt(l._r):1)?(u=i,i=0):(i-=f,u=f);for(var c=o.length-1;0<=c&&0<s&&a<=c;c--){var l,p,f=(l=o[c])._r?parseInt(l._r):1;if(!l._d)throw new Error("missing segment duration");var d=f*(p=parseInt(l._d));if((a<c||c==a&&0==u)&&d<=s)s-=d,o.splice(c,1),r+=f,n+=d;else{var g=Math.ceil(s/p);c==a&&(g=Math.min(g,f-u));var v=p*g;l._r=f-g+"",s-=v,r+=g,n+=v}}return this.logger.debug("DASH trimmed "+r+" segments for total duration: "+n),{count:r,lV:n}},b.prototype.aV=function(t){return!!t&&!!("video/mp4"===t._mimeType||"video"===t._contentType||t.SegmentTemplate&&t.SegmentTemplate._media&&-1<t.SegmentTemplate._media.indexOf("video"))&&!!t.SegmentTemplate.SegmentTimeline},b.prototype.sV=function(){if(d.HiveConfig.Dash.DashFilterBitrates)try{var t=null;t="string"==typeof d.HiveConfig.Dash.DashFilterBitrates?d.HiveConfig.Dash.DashFilterBitrates.split(","):d.HiveConfig.Dash.DashFilterBitrates;var e=[];return t.forEach((function(t){var i=parseInt(t);isNaN(i)||e.push(i)})),e}catch(t){g.ErrorMonitor.lt().logError("Error parsing DashFilterBitrates",this.loggerId,v.nr.wr,t)}},b.prototype.oV=function(t,e,i){var r=this;if(t.MPD&&t.MPD.Period){var n=[];t.MPD.Period.AdaptationSet.forEach((function(t){if(t.Representation_asArray&&(r.aV(t)||t.Representation_asArray.every((function(t){return r.cV(t)})))){var o=t.Representation_asArray;o.sort((function(t,e){return isNaN(t._bandwidth)&&(t._bandwidth=parseInt(t._bandwidth)),isNaN(e._bandwidth)&&(e._bandwidth=parseInt(e._bandwidth)),t._bandwidth-e._bandwidth}));for(var s=o.length-1;0<=s;s--)i&&(delete o[s]._width,delete o[s]._height),e&&-1==e.indexOf(s)?o.splice(s,1):n.push(o[s]._bandwidth);r.logger.debug("DASH filtered-in bitrates: "+n.reverse().join(" ")+" - removed size: "+i)}}))}},b.prototype.RL=function(t,e){try{var i=this.IB.find((function(t){return t.bandwidth===e}));if(i&&i.qB&&i.qB.has(t))return i.qB.get(t);if(i&&i.GB){var r=i.HB.replace(b.FB,(function(e,i){return y.vV(i||"%d",t)})),n=new c.wU(t,i.bandwidth,i.GB*i.timescale,r,r),o=i.HB.replace(b.FB,(function(e,i){return y.vV(i||"%d",t+1)}));return n.next=new c.wU(t+1,i.bandwidth,i.GB*i.timescale,r,o),n.next.type=n.type=i.type,n}return null}catch(i){return g.ErrorMonitor.lt().logError("Error getting the segment",this.loggerId,v.nr.yr,i),null}},b.prototype.XB=function(t){void 0===t&&(t=0);for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i]},b.jB="$Bandwidth$",b.JB="$Time$",b.PB="$RepresentationID$",b.FB=/\$Number([^$]+)?\$/,b);function b(t,e){this.YB=e,this.loggerId="[DASH METADATA] ",this.yL=!1,this.live=!1,this.logger=a.Framework&&a.Framework.resolve(a.Framework.ht.m)?a.Framework.resolve(a.Framework.ht.m).log(t):console,this.dV=new n.EV,this.$B(),this.reset()}e.pV=w},function(t,e,i){t.exports=function(t,e,i){null==e&&(e="_"),null==i&&(i=!1);var r=!1,n=1,o=3,s=4,a=8,u=9;function h(t){var e=t.localName;return null==e&&(e=t.wV),null!=e&&""!=e||(e=t.nodeName),e}function c(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):t}function l(t,e,i,r){var n="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+e;if(null!=i)for(var o=0;o<i.length;o++){var s=i[o],a=t[s];n+=" "+s.substr(1)+"='"+a+"'"}return n+(r?"/>":">")}function p(t,e){return"</"+(null!=t.__prefix?t.__prefix+":":"")+e+">"}function f(t,e){return!!(function(t,e){return-1!==t.indexOf(e,t.length-e.length)}(e.toString(),"_asArray")||0==e.toString().indexOf("_")||t[e]instanceof Function)}function d(t){var e=0;if(t instanceof Object)for(var i in t)f(t,i)||e++;return e}function g(t){var e=[];if(t instanceof Object)for(var i in t)-1==i.toString().indexOf("__")&&0==i.toString().indexOf("_")&&e.push(i);return e}function v(t){var e="";return t instanceof Object?e+=function(t){var e="";return null!=t.__cdata&&(e+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e+=r?c(t.__text):t.__text),e}(t):null!=t&&(e+=r?c(t):t),e}function y(t,e,i){var r="";if(0==t.length)r+=l(t,e,i,!0);else for(var n=0;n<t.length;n++)r+=l(t[n],e,g(t[n]),!1),r+=m(t[n]),r+=p(t[n],e);return r}function m(t){var e="";if(0<d(t))for(var i in t)if(!f(t,i)){var r=t[i],n=g(r);null==r||null==r?e+=l(r,i,n,!0):r instanceof Object?r instanceof Array?e+=y(r,i,n):0<d(r)||null!=r.__text||null!=r.__cdata?(e+=l(r,i,n,!1),e+=m(r),e+=p(r,i)):e+=l(r,i,n,!0):(e+=l(r,i,n,!1),e+=v(r),e+=p(r,i))}return e+v(t)}this.gV=function(t){var e;return window.DOMParser?e=(new window.DOMParser).parseFromString(t,"text/xml"):(0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.bV(t)),e},this.yV=function(c){return function c(l){if(l.nodeType==u){var p,f,d=l.firstChild;for(p=0,f=l.childNodes.length;p<f;p+=1)if(l.childNodes[p].nodeType!==a){d=l.childNodes[p];break}return i?g=c(d):(g={})[m=h(d)]=c(d),g}if(l.nodeType!=n)return l.nodeType==o||l.nodeType==s?l.nodeValue:l.nodeType==a?null:void 0;var g;(g=new Object).__cnt=0;for(var v=l.childNodes,y=0;y<v.length;y++){var m=h(d=v.item(y));if(g.__cnt++,null==g[m])g[m]=c(d),g[m+"_asArray"]=new Array(1),g[m+"_asArray"][0]=g[m];else{if(null!=g[m]&&!(g[m]instanceof Array)){var E=g[m];g[m]=new Array,g[m][0]=E,g[m+"_asArray"]=g[m]}for(var w=0;null!=g[m][w];)w++;g[m][w]=c(d)}}for(var b=0;b<l.attributes.length;b++){var S=l.attributes.item(b);g.__cnt++;for(var T=S.value,I=0,_=t.length;I<_;I++){var P=t[I];try{P.test.call(this,S)&&(T=P.TV.call(this,S.value))}catch(c){P.test.call(this,S),console.error(c)}}g[e+S.name]=T}var O=function(t){return t.prefix}(l);return null!=O&&""!=O&&(g.__cnt++,g.__prefix=O),1==g.__cnt&&null!=g["#text"]&&(g=g["#text"]),null!=g["#text"]&&(g.__text=g["#text"],g.__text instanceof Array&&(g.__text=g.__text.join("\n")),r&&(g.__text=function(t){return t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}(g.__text)),delete g["#text"],delete g["#text_asArray"],""===g.__text.trim()&&delete g.__text),null!=g["#cdata-section"]&&(g.__cdata=g["#cdata-section"],delete g["#cdata-section"],delete g["#cdata-section_asArray"]),null==g.__text&&null==g.__cdata||(g.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),g}(c)},this.eV=function(t){var e=this.gV(t);return this.yV(e)},this.uV=function(t){return m(t)},this.mV=function(t){var e=this.uV(t);return this.gV(e)},this.getVersion=function(){return"1.0.11"},this.OV=function(t){r=t}}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r,n,o=i(2),s=i(2),a=i(0),u=i(15),h=i(1),c=s.Ce,l=i(9);(n=r=r||{})[n.SV=0]="INFO",n[n.RV=1]="WARN",n[n.ERROR=2]="ERROR";var p=(f.prototype.eL=function(){var t=this.metadata.xH(l.wf.bf),e=t.length,i=this.metadata.isLive();if(0===e||void 0!==i)for(var n=0;n<f._V.length;n++){var a=f._V[n],p=a[0],d=a[1],g=a[2];if(e<=p){if(-1===this.AV.indexOf(d)){var v=t.map((function(t){return u.pa(t)+"/s"})).join(", "),y=f.NV+u.wc(o.Fe[d],i?"Live":"VOD",e,v);switch(g){case r.SV:this.logger.info(y);break;case r.RV:this.logger.warn(y);break;default:this.logger.error(y);var m=0==e?c.He:c.Le;h.ErrorMonitor.lt().logError(o.Fe[m],f.NV,m,{isLive:i,CV:t})}this.AV.push(d)}break}}if(-1===this.AV.indexOf(c.ke)){var E=!1;for(n=0;n<t.length;n++){var w=t[n];if(f.kV<w){E=!0,y=f.NV+u.wc(o.Fe[s.Ce.ke],u.pa(w),u.pa(f.kV)),this.logger.warn(y);break}}E&&this.AV.push(c.ke)}},f.prototype.reset=function(){this.AV.length=0},f.NV="[StreamHealthChecker] ",f.kV=35e5,f._V=[[0,c.De,r.ERROR],[4,c.Me,r.SV],[7,c.je,r.RV],[1/0,c.Pe,r.ERROR]],f);function f(t){this.metadata=t,this.AV=[],this.logger=a.Framework.resolve(a.Framework.ht.m).log()}e.NL=p},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o=i(4),s=i(58),a=i(148),u=i(151),h=i(0),c=i(33),l=i(9),p=i(35),f=i(30),d=i(1),g=i(2),v=i(87),y=(m.bH=function(t){return this.yH(t)||-1!=t.indexOf(m.TH)},m.yH=function(t){return-1!=t.toLowerCase().indexOf(m.mH.toLowerCase())||-1!=t.toLowerCase().indexOf(m.DV.toLowerCase())||-1!=t.toLowerCase().indexOf(m.MV.toLowerCase())},m.jV=1,m.PV=2,m.HV=3e4,m.LV=4e3,m.UV=500,m.FV=!0,m.GV=1e4,m.xV=16,m.BV=3,m.mH=".m3u8",m.DV="(format=m3u8-aapl-v3)",m.MV="(video,format=m3u8-aapl-v3,audiotrack=audio)",m.TH=".ts",m);function m(){}e.HLS=y;var E,w=(n(b,E=s.UH),b.prototype.getStreamProtocol=function(){return StreamProtocol.HLS},b.prototype.VV=function(t){var e=t.lastIndexOf("/");return t.substr(0,e)},b.prototype.YM=function(){return this.ticket},b.prototype.xH=function(){return this.qV.xH()},b.prototype.isLive=function(){return this.qV.isLive()},b.prototype.VH=function(){return this.qH},b.prototype.getContextId=function(){return this.ticket.Jk()},b.prototype.FH=function(){return this.GH},b.prototype.tL=function(t){try{var e=t.url=this.QV(t.url);return e===this.GH?(this.WV&&this.logger.debug("SAME MANIFEST "+e+","+this.GH),!0):null!=this.qV&&this.qV.YV(e)?(this.WV&&this.logger.debug("CORRECT PLAYLIST "+e+","+this.GH),!0):null!=this.qV&&null!=this.qV.WH(e)?(this.WV&&this.logger.debug("CORRECT SEGMENT "+e+","+this.GH),!0):(y.yH(e)&&this.qV.KV()!==e&&this.WV&&this.logger.debug("FIRST REQUEST FOR MANIFEST "+e+","+this.GH),!1)}catch(e){return d.ErrorMonitor.lt().logError("Error getting the current context of the HiveRequest",this.loggerId,g.Tr.Xn,{detailedError:e,url:t.url}),!1}},b.prototype.QV=function(t){return f(t).NT().toString()},b.prototype.Dp=function(t){try{return y.yH(t)?l.wf.yf:null!=this.qV.WH(t)?l.wf.bf:l.wf.Tf}catch(e){return d.ErrorMonitor.lt().logError("Error getting the entityType",this.loggerId,g.Tr.Yn,{detailedError:e,url:t}),l.wf.Tf}},b.prototype.Gp=function(t){var e=this.Dp(t);if(e==l.wf.bf||e==l.wf.gf)return!0},b.prototype.YH=function(t){var e=0,i=0,r=0,n=!0,o=!1;try{var s=this.Dp(t);if(s!=l.wf.yf){var a=this.qV.WH(t);null!=a&&(e=a.duration,i=a.bitrate,r=a.id,o=this.Gp(t))}else n=!1,null!=this.qV&&this.qV.$V.has(t)&&(i=this.qV.$V.get(t).bitrate,this.rL.set(i,h.Framework.time()));return new p.wA(t,s,n,r,e,i,o,this.getContextId())}catch(e){return d.ErrorMonitor.lt().logError("Error getting the entityCharacteristics from the url",this.loggerId,g.Tr.Kn,{detailedError:e,url:t}),new p.wA(t,l.wf.Tf,!1,0,0,0,!1,this.getContextId())}},b.prototype.oM=function(t,e,i){var r=this.qV.RL(t,e);return null!=r?new p.wA(r.zH,i,!0,t,r.duration,e,!0,this.getContextId()):null},b.prototype.nL=function(t){try{var e=t.sL,i=t.Lp(),r=this.qV.parse(i,e);if(this.hL.eL(),this.qV.$V.has(i)){var n=this.qV.$V.get(i);this.uL.aM(n.bitrate)}t.zp.response=r,t.zp.responseText=r}catch(e){d.ErrorMonitor.lt().logError("Error receiving the metadata",this.loggerId,g.Tr.mr,{detailedError:e,url:t.Lp()}),t.sL&&(t.zp.responseText=t.sL,t.zp.response=t.sL)}},b.prototype.fL=function(t){E.prototype.fL.call(this,t),t.Dp()!=l.wf.yf&&t.Dp()!=l.wf.Tf&&(this.qH.cL(t),t.Dp()==l.wf.bf&&this.uL.iM(t.Mp))},b.prototype.lL=function(t,e){var i=t;return i.vL=h.Framework.time(),E.prototype.lL.call(this,i,e)},b.prototype.TM=function(t){y.FV&&(null==this.wL.get(t)&&this.qV.isLive()?this.gL(t):this.logger.debug("HLS PRE-FETCHING METADATA ALREADY SCHEDULED OR MISSING HLS INFO"))},b.prototype.gL=function(t){var e=this;try{var i=this.qV.XV.get(t);if(null!=i){var r=this.rL.has(t),n=this.rL.get(t),o=(r?n:0)+(null!=i.JV?i.JV[i.JV.length-1].duration:y.LV),s=Math.max(1,o-h.Framework.time()+y.UV);this.logger.info("HLS PREFETCHING METADATA "+i.zH+" BITRATE "+t+" IN "+s);var a=h.Framework.setTimeout((function(){e.bL(t,i.zH,h.Framework.time())}),s);this.wL.set(t,a)}else this.logger.warn("NO STREAM WITH BT "+t)}catch(t){d.ErrorMonitor.lt().logError("Error scheduling metadata prefetch",this.loggerId,g.Tr.Or,t)}},b.prototype.bL=function(t,e,i){var r=this.rL.get(t);if(null==r&&(r=0),i<r)this.gL(t);else{var n=new c.HiveRequest(this.ticket.pluginId);n.open("GET",e),n.internal=!0,n.send(),this.wL.delete(t),this.rL.set(t,h.Framework.time())}},b.prototype.oL=function(){var t=this;this.wL.keys().forEach((function(e){var i=t.wL.get(e);h.Framework.clearTimeout(i),t.wL.delete(e)}))},b.prototype.IM=function(){return E.prototype.ZH.call(this,y.jV,y.PV)},b.prototype.SM=function(t){try{var e=t.url,i=this.qV.JH(e);return null!=i?this.YH(i.zH):null}catch(t){return d.ErrorMonitor.lt().logError("Error getting the next entity",this.loggerId,g.Tr.$n,t),null}},b.prototype.DM=function(t,e,i,r){return i-t},b.prototype.kM=function(){return y.HV},b.prototype.SL=function(){return y.GV},b.prototype.TL=function(t){},b.prototype.CM=function(t,e){try{var i=this.WD(),r=this.mL(),n=i.cA(),o=0;if(n<t)for(var s=this.qV.RL(n,e);s&&s.id<t;)o+=s.duration,s=s.next;var a=h.Framework.time()-r;return Math.max(0,o-a)}catch(t){return d.ErrorMonitor.lt().logError("Error getting the distance duration",this.loggerId,g.Tr.ir,t),0}},b.prototype.OL=function(t,e){return 1},b);function b(t,e,i){var r=E.call(this,i)||this;return r.WV=!1,r.loggerId="[HLS Context] ",r.Kv=0,r.rL=new o,r.wL=new o,r.ticket=t,(r.zV=e)&&(r.ZV=r.VV(t.Qk())),r.GH=t.$k(),r.qH=new u.tq(i.PD),r.qV=new a.iq,r.hL=new v.NL(r.qV),r}e.CL=w},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(3),o=i(0),s=i(90),a=i(62),u=i(91),h=i(1),c=i(2),l=(p.prototype.init=function(t,e){this.nq=t,this.rq=e},p.prototype.put=function(t){var e=n.defer();try{var i=t.jp(),r=t.$p,o=t.Xp,l=t.Vp.bp-1,p=t.Vp.bp;-1==this.sq&&this.eq();var f=null,d=!1;if(this.hq.has(i)){f=this.hq.get(i);var g=new a.TU(0,l,p);d=!0,f.content.forEach((function(t,e){a.SU.OU(e).yU(g)&&(d=!1)}))}else{var v=new a.TU(0,l,p).toString();f=new u.oq(t.Mp),t.lB&&(f.uq=t.lB.LM.peerInfo),f.content.set(v,new s.aq(p,o,t.Vp,t.kp())),this.hq.set(i,f),d=!0,this.fq.unshift(i)}null==f.headers&&null!=r&&(f.headers=r),d?e.resolve(!0):e.reject(!1)}catch(t){h.ErrorMonitor.lt().logError("Error adding fragment in LiveCache",this.loggerId,c.bi.di,t),e.reject("CACHE PUT ERROR "+t)}return e.promise},p.prototype.get=function(t){var e=n.defer();try{var i=this.hq.get(t);if(null!=i){var r=null;i.content.forEach((function(t,e){if(a.SU.OU(e).gU())return(r=t).headers=i.headers,void(r.uq=i.uq)})),e.resolve(r)}else e.reject(!1)}catch(t){h.ErrorMonitor.lt().logError("Error getting fragment from LiveCache",this.loggerId,c.bi.Ei,t),e.reject("CACHE GET ERROR "+t)}return e.promise},p.prototype.OM=function(t){try{return this.hq.keys()}catch(t){return h.ErrorMonitor.lt().logError("Error getting keys from LiveCache",this.loggerId,c.bi.wi,t),[]}},p.prototype.cq=function(t){var e=n.defer();try{e.resolve(this.hq.values())}catch(t){h.ErrorMonitor.lt().logError("Error getting elements from LiveCache",this.loggerId,c.bi.gi,t),e.reject("CACHE GET ELEMENTS ERROR "+t)}return e.promise},p.prototype.contains=function(t){var e=n.defer();try{this.hq.has(t)?e.resolve(!0):e.resolve(!1)}catch(t){h.ErrorMonitor.lt().logError("Error checking if LiveCache contains the fragment",this.loggerId,c.bi.pi,t),e.reject("CACHE CONTAINS ERROR "+t)}return e.promise},p.prototype.eq=function(){var t=this;this.lq(),this.logger.debug(this.loggerId+"Starting cache periodic purge"),this.sq=o.Framework.setInterval((function(){t.J()}),this.rq)},p.prototype.lq=function(){-1!=this.sq&&(this.logger.debug(this.loggerId+" Stopping cache periodic purge"),o.Framework.clearInterval(this.sq),this.sq=-1)},p.prototype.J=function(){var t=this;try{var e=0,i=0,r=0;this.logger.debug(this.loggerId+" RUNNING GC"),this.fq.every((function(r,n){var o=t.hq.get(r).size();return e+o>t.nq?(i=n,!1):(e+=o,!0)}))||(r=this.fq.length-i,this.fq.splice(i,this.fq.length-1).forEach((function(e){t.hq.delete(e)}))),this.logger.debug(this.loggerId+" GC DONE - REMOVED: "+r+" - CURRENT ITEMS: "+this.hq.length+" SIZE: "+e+" "),0===this.hq.length&&(this.logger.debug(this.loggerId+" Cache contains no items, stopping purge timer"),this.lq())}catch(r){h.ErrorMonitor.lt().logError("Error purging LiveCache",this.loggerId,c.bi.yi,r)}},p.prototype.vq=function(){this.hq=new r,this.fq=[]},p.prototype.dq=function(){var t=this;this.hq.forEach((function(e,i){t.logger.debug("EID="+i),e.content.forEach((function(e,i){t.logger.debug("\tRANGE ",i)}))}))},p);function p(){this.loggerId="[LIVE CACHE] ",this.hq=new r,this.sq=-1,this.fq=[],this.logger=o.Framework.resolve(o.Framework.ht.m).log()}e.Eq=l},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0}),e.aq=function(t,e,i,r){this.length=t,this.data=e,this.Vp=i,this.pq=r}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(62),n=i(4),o=(s.prototype.size=function(){var t=0;return this.content.forEach((function(e,i){t+=r.SU.OU(i).size()})),t},s);function s(t){this.headers=null,this.uq=null,this.totalSize=0,this.wq=!1,this.Mp=t,this.content=new n}e.oq=o},function(t,e,i){"use strict";var r;Object.defineProperty(e,"s",{value:!0}),(r=e.gq||(e.gq={}))[r.bq=0]="ALL",r[r.AS=1]="AS",r[r.ID=2]="SITE"},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r,n,o=i(0),s=i(20),a=i(5),u=i(10),h=i(3),c=i(4),l=i(59),p=i(170),f=i(1),d=(g.prototype.init=function(t){this.yq=t,this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.sessionId),this.PD=t.PD,this.Tq=t.Tq,this.LD=t.LD},g.prototype.mq=function(t,e){var i=this,r=h.defer();try{if(this.Oq){var n=null;t.privateIpString&&(n=t.privateIpString);var o=new p.Sq(t.guid,t.rankValue,n,t.isLeader);if(this.Rq.has(o.uuid)){var s=this.Rq.get(o.uuid);s.udpScore==o.udpScore&&s.Iq==o.Iq?r.resolve():(this.Rq.set(o.uuid,o),this._q(),this.Aq(o).then((function(){r.resolve()})).fail((function(t){i.Rq.delete(o.uuid),i._q(),r.reject(t)})))}else e?(o.Nq=e,this.logger.info(this.loggerId+" NEW MEMBER GUID "+o.uuid+" RANKING "+o.udpScore+" LEADER "+o.Iq),this.Rq.set(o.uuid,o),this._q(),this.Aq(o).then((function(){i.Cq(i.Rq.get(o.uuid)),r.resolve()})).fail((function(t){i.Rq.delete(o.uuid),i._q(),r.reject(t)}))):this.kq(o).then((function(t){o.Nq=t,i.logger.info(i.loggerId+" NEW MEMBER GUID "+o.uuid+" RANKING "+o.udpScore+" LEADER "+o.Iq),i.Rq.set(o.uuid,o),i._q(),i.Aq(o).then((function(){r.resolve()})).fail((function(t){i.Rq.delete(o.uuid),i._q(),r.reject(t)}))})).fail((function(t){r.reject(t)}))}else r.reject("LEADER ELECTION NOT STARTED YET")}catch(t){r.reject("TRIGGER LEADER ELECTION ERROR "+t)}return r.promise},g.prototype.Cq=function(t){var e=new u.Nf(u.mf.k,null);e.guid=t.uuid,e.isLeader=t.Iq,e.rankValue=t.udpScore;var i=[e];this.Tq.Dq(i,!1)},g.prototype.kq=function(t){var e=this,i=h.defer();return this.Mq.has(t.uuid)||this.jq.has(t.uuid)?i.reject(r.Pq):(this.Mq.set(t.uuid,Date.now()),this.yv.connect(t.uuid).then((function(r){var n=r.mv.gv(e.yq.swarmId);null==n?(n=r.mv.lv(e.yq.swarmId),e.Hq(n).then((function(){i.resolve(r)})).fail((function(t){i.reject(t)})).done()):e.Lq.get(t.uuid)?i.resolve(r):(e.Mq.delete(t.uuid),e.Hq(n).then((function(){i.resolve(r)})).fail((function(t){i.reject(t)})).done())})).fail((function(r){e.Mq.delete(t.uuid),i.reject(r)})).done()),i.promise},g.prototype.Hq=function(t){var e=this,i=h.defer(),r=new s.$v.Qv.UDPHandshakeMessage;r.uuid=this.Uq.uuid,r.udpScore=this.Uq.udpScore,r.isLeader=this.Uq.Iq,r.streamId=this.Uq.streamId,this.logger.debug(this.loggerId+"MSG uuid "+r.uuid+" rankValue "+r.udpScore+" isLeader "+r.isLeader+" stream id "+r.streamId);var n=o.Framework.setTimeout((function(){e.Fq(t.otherGuid)}),a.ea.UDPBroadcast.yu);return this.jq.set(t.otherGuid,{Gq:n,defer:i}),t.Sv(s.ev.uv,r),i.promise},g.prototype.Fq=function(t){if(this.jq.has(t)){this.logger.debug(this.loggerId+" HANDSHAKE REQ EXPIRED TO "+t);var e=this.jq.get(t);this.jq.delete(t),e.defer.reject("EXPIRED")}},g.prototype.xq=function(t,e){try{this.logger.debug(this.loggerId+"HANDSHAKE RESP RECEIVED FROM "+e.otherGuid);var i=e.otherGuid,r=this.jq.get(i);o.Framework.clearTimeout(r.Gq),this.jq.delete(i),r.defer.resolve(e)}catch(t){f.ErrorMonitor.lt().logError("HANDSHAKE RESPONSE RECEIVED FAILED",this.loggerId,t)}},g.prototype.Bq=function(t,e){var i=this;try{var r=new u.Nf(u.mf.k,null,t.isLeader);if(r.guid=t.uuid,r.rankValue=t.udpScore,t.streamId===this.PD.getContextId()){var n=e.mv.gv(this.yq.swarmId);this.Lq.set(t.uuid,t.uuid),this.Vq(n,"OK"),this.mq(r,e).then((function(){})).fail((function(t){f.ErrorMonitor.lt().logError("LEADER ELECTION FAILED",i.loggerId,t)}))}}catch(t){f.ErrorMonitor.lt().logError("HANDSHAKE REQUEST FAILED",this.loggerId,t)}},g.prototype.Vq=function(t,e){var i=new s.$v.Qv.UDPHandshakeResponse;i.accept=e,t.Sv(s.ev.UDPHandshakeResponse,i),this.logger.debug(this.loggerId+"SEND HANDSHAKE RESPONSE TO "+t.otherGuid)},g.prototype.Aq=function(t){var e=this,i=h.defer();if(this.qq()){var r=!1;this.logger.info(this.loggerId+"I HAVE THE HIGHEST SCORE"),t.Iq&&!this.Qq.has(t.uuid)&&(r=!0,this.logger.info(this.loggerId+"SEND SWITCH REQUEST TO "+t.uuid),this.Wq(t).then((function(){i.resolve()})).fail((function(t){3==t.Yq?(e.logger.debug(e.loggerId+" SWITCH REQUEST WAS CANCELED."),i.resolve()):(t.Yq=2)&&i.reject(t)}))),this.Uq.Iq||null==this.Kq||this.Kq.uuid==t.uuid||this.Qq.has(this.Kq.uuid)||(this.logger.info("SEND SWITCH REQUEST TO THE ALREADY KNOWN LEADER"),r=!0,this.Wq(this.Kq).then((function(){i.resolve()})).fail((function(t){3==t.Yq?(e.logger.debug(e.loggerId+" SWITCH REQUEST WAS CANCELED."),i.resolve()):(t.Yq=2)&&i.reject(t)}))),null!=this.Kq||t.Iq||this.Uq.Iq||0!=this.Qq.length||(this.logger.info(this.loggerId+"BECOME LEADER"),this.$q()),r||i.resolve()}else this.Xq(t)&&(this.logger.info(this.loggerId+"PEER "+t.uuid+" HAS THE HIGHEST SCORE"),this.Jq(),this.Uq.Iq&&t.Iq&&this.stepDown(),this.zq(t)),i.resolve();return i.promise},g.prototype.zq=function(t){try{this.logger.info(this.loggerId+"UPDATE THE LEADERSHIP"),null!=this.Kq&&this.Rq.has(this.Kq.uuid)&&(this.Rq.get(this.Kq.uuid).Iq=!1),this.Rq.has(t.uuid)?(this.Rq.get(t.uuid).udpScore=t.udpScore,this.Kq=t,this.Rq.get(t.uuid).Iq=!0):(this.logger.warn(this.loggerId+"SET A LEADER THAT IS NOT A LAN MEMBER LIST. SHOULD NEVER HAPPEN"),this.Rq.set(t.uuid,t),this.Kq=t),this.PD.Zq(t),this.logger.info(this.loggerId+"NEW KNOWN LEADER "+this.PD.KM().uuid)}catch(t){f.ErrorMonitor.lt().logError(t,this.loggerId)}},g.prototype.stepDown=function(){this.logger.info(this.loggerId+"STEP DOWN"),this.Uq.Iq=!1,this.PD.tQ(!1),a.ea.Ku.jo&&(this.LD.iQ(),this.LD.nQ(!1))},g.prototype.Jq=function(){for(var t=0,e=this.Qq.keys();t<e.length;t++){var i=e[t],r=this.Qq.get(i);this.Qq.delete(i),o.Framework.clearTimeout(r.Gq),r.defer.reject({Yq:3,message:"CANCELED PENDING RESPONSES"})}},g.prototype.Xq=function(t){return t.uuid==this.rQ[0].uuid},g.prototype.qq=function(){return p.Sq.TO(this.Uq,this.rQ[0])<0},g.prototype._q=function(){var t=new l(this.Rq.values()),e=t.Ff(p.Sq.TO);t.push(this.Uq),this.PD.sQ(e);var i=new l(this.Rq.values());this.rQ=i.Ff(p.Sq.TO)},g.prototype.eQ=function(t){this.hQ(t)},g.prototype.hQ=function(t){this.logger.info(this.loggerId+"EVALUATE THE SWITCH REQUEST FROM "+t.uuid);var e=void 0;this.Rq.has(t.uuid)?e=this.Rq.get(t.uuid):this.logger.warn("I RECEIVED A SWITCH REQUEST FROM AN UNKNOWN MEMBER. THIS SHOULD NEVER HAPPEN"),e&&(this.Uq.Iq?this.qq()?this.oQ(e,!1):(this.stepDown(),this.Jq(),this.zq(e),this.oQ(e,!0)):this.Xq(e)?(this.zq(e),this.oQ(e,!0)):this.oQ(e,!1))},g.prototype.oQ=function(t,e){var i=this;this.uQ(t.Nq,e).then((function(){})).fail((function(t){f.ErrorMonitor.lt().logError("SEND SWITCH RESPONSE ERROR",i.loggerId,t)})).done()},g.prototype.uQ=function(t,e){var i=h.defer(),r=new s.$v.Qv.UDPSwitchLeadershipAck;return r.ok=e,t.mv.gv(this.yq.swarmId).Sv(s.ev.av,r),i.promise},g.prototype.Wq=function(t){var e=this,i=h.defer();return this.aQ(t.Nq).then((function(r){e.fQ(r,t),i.resolve()})).fail((function(t){i.reject(t)})).done(),i.promise},g.prototype.fQ=function(t,e){try{t?(this.Rq.get(e.uuid).Iq=!1,this.Kq=this.Uq,this.$q()):(this.Jq(),this.Rq.get(e.uuid).Iq=!0,this.stepDown(),this.zq(e))}catch(t){f.ErrorMonitor.lt().logError("HANDLE LEADERSHIP SWITCH RESPONSE ERROR",this.loggerId,t)}},g.prototype.cQ=function(t,e){if(this.Qq.has(e)){var i=this.Qq.get(e);o.Framework.clearTimeout(i.Gq),this.Qq.delete(e),i.defer.resolve(t.ok)}else this.logger.warn(this.loggerId+" SWITCH LEADERSHIP RESPONSE RECEIVED FROM UNKNOWN PEER "+e)},g.prototype.aQ=function(t){var e=this,i=h.defer(),r=new s.$v.Qv.UDPSwitchLeadershipRequest;r.uuid=this.Uq.uuid,r.udpScore=this.Uq.udpScore,this.logger.debug(this.loggerId+"SWITCH LEADERSHIP REQUEST TO "+t.otherGuid);var n=o.Framework.setTimeout((function(){e.lQ(t.otherGuid)}),a.ea.UDPBroadcast.bu);this.Qq.set(t.otherGuid,{Gq:n,defer:i});var u=t.mv.gv(this.yq.swarmId);return o.Framework.setTimeout((function(){u.Sv(s.ev.UDPSwitchLeadershipRequest,r)}),1),i.promise},g.prototype.lQ=function(t){if(this.Qq.has(t)){this.logger.info(this.loggerId+" SWITCH LEADERSHIP EXPIRED TO "+t);var e=this.Qq.get(t);this.Qq.delete(t),e.defer.reject({Yq:2,message:"EXPIRED"})}},g.prototype.$q=function(){this.logger.info(this.loggerId+"BECOMING LAN LEADER"),null!=this.Kq&&this.Rq.has(this.Kq.uuid)&&(this.Rq.get(this.Kq.uuid).Iq=!1),this.Uq.Iq=!0,this.Kq=this.Uq,this.PD.tQ(!0),this.PD.Zq(this.Uq),a.ea.Ku.jo&&(this.LD.iQ(),this.LD.nQ(!0))},g.prototype.AE=function(t){this.Uq=new p.Sq(this.PD.getId(),this.PD.vQ(),"",!1,this.PD.getContextId()),this.Oq=!0,this.logger.info(this.loggerId+" UDP LEADER ELECTION STARTED")},g.prototype.dQ=function(t){this.Rq.delete(t),this._q(),0==this.Rq.length?(this.Uq.Iq=!1,this.Kq=null,this.PD.tQ(!1),this.PD.EQ(!1),this.LD.iQ(),this.LD.nQ(!1)):this.qq()?this.$q():0<this.rQ.length&&this.zq(this.rQ[0])},g);function g(){this.Oq=!1,this.loggerId="[UDPLeaderElection] ",this.yv=o.Framework.resolve(o.Framework.ht.v),this.Rq=new c,this.Qq=new c,this.jq=new c,this.Mq=new c,this.Lq=new c,this.rQ=[]}e.pQ=d,(n=r=e.wQ||(e.wQ={}))[n.gQ=0]="FAILURE",n[n.Pq=1]="ALREADY_PENDING"},function(t,e){},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s,a,u,h=i(3),c=i(4),l=i(0),p=i(163),f=i(5),d=i(20),g=i(10),v=i(164),y=i(16),m=hive.services.protocol.oU.TrackerPeerInfo,E=i(7),w=i(1),b=i(2),S=E.ut.$a;(s=o=e.bQ||(e.bQ={}))[s.yQ=1]="ACCEPT",s[s.TQ=2]="REJECT",(u=a=e.mQ||(e.mQ={}))[u.bq=0]="ALL",u[u.OQ=1]="IN",u[u.SQ=2]="OUT";var T,I=(n(_,T=v.RQ),_.prototype.init=function(t){T.prototype.init.call(this,t),this.yq=t,this.ticket=t.yd.ticket,this.Tq=t.Tq,this.LD=t.LD,this.IQ=t.IQ,this._Q.init(t),this.AQ.init(t)},_.prototype.start=function(t){try{this.logger.info(this.loggerId+"PARTNERSHIP STARTED "+t.getContextId()),this.context=t,this.contextId=t.getContextId(),this.NQ(f.ea.Bu.no),this.CQ(f.ea.Ku.Uo),this.kQ(f.ea.Vu.ho),this.active=!0}catch(t){w.ErrorMonitor.lt().logError("Error in partnership initialization",this.loggerId,b.Yi.Ki,t)}},_.prototype.stop=function(){return l.Framework.clearInterval(this.DQ),l.Framework.clearInterval(this.MQ),l.Framework.clearInterval(this.jQ),this.context=null,this.contextId=null,this.active=!1,this.PQ()},_.prototype.AE=function(t){this.logger.info("PARTNERSHIP SERVER CONNECTED"),this.tE=t,this.connected=!0,null==this.PD.getId()&&this.PD.setId(this.tE)},_.prototype.HQ=function(){this.connected=!1},_.prototype.LQ=function(t){try{this.UQ(t)||this.FQ.has(t.peerInfo.guid)||this.Mq.has(t.peerInfo.guid)||t.peerInfo.guid==this.tE?this.GQ(t):this.xQ(t),this.BQ(t)&&this.VQ(t)}catch(e){w.ErrorMonitor.lt().logError("Error in discoering new lan peer",this.loggerId,b.Yi.$i,{detailedError:e,otherGuid:t.peerInfo.guid})}},_.prototype.GQ=function(t){if(this.qQ.has(t.peerInfo.guid)){var e=this.qQ.get(t.peerInfo.guid);this.qQ.delete(t.peerInfo.guid),this.vG.set(t.peerInfo.guid,e),this.PD.EQ(!0)}},_.prototype.VQ=function(t){if(this.cG.has(t.peerInfo.guid)){var e=this.cG.get(t.peerInfo.guid);this.cG.delete(t.peerInfo.guid),this.lG.set(t.peerInfo.guid,e)}},_.prototype.NQ=function(t){var e=this;-1!=this.DQ&&l.Framework.clearInterval(this.DQ),this.DQ=l.Framework.setInterval((function(){e.QQ(!1)}),t)},_.prototype.QQ=function(t){var e=this;t&&this.DQ&&(l.Framework.clearInterval(this.DQ),this.NQ(f.ea.Bu.no));try{if(this.connected){this.logger.debug(this.loggerId+"ADDING NEW PEERS IF POSSIBLE, NOW "+this.qQ.length+"/"+f.ea.Bu.io+","+this.vG.length+"/infinity OUT RND "+this.cG.length+" OUT LAN "+this.lG.length);var i=[].concat(this.FQ.keys()).concat(this.Mq.keys()),r=this.Tq.WQ(!0),n=void 0;n=this.PD.AM()||this.PD.VM()?this.AQ.YQ(f.ea.Bu.io,this.qQ.values(),i,r):this._Q.YQ(f.ea.Bu.io,this.qQ.values(),i,r),this.KQ=n.$Q(),n.XQ().forEach((function(t){e.xQ(t)}))}else this.logger.warn(this.loggerId+"NOT RUNNING IN PARTNER CHOICE, SRV DISCONNECTED")}catch(t){w.ErrorMonitor.lt().logError("Error in choosing in partners",this.loggerId,b.Yi.Xi,t)}},_.prototype.xQ=function(t){var e=this,i=t.peerInfo.guid,r=t.peerInfo.privateIpString,n=t.peerInfo.publicIpString;this.logger.debug(this.loggerId+"IN PARTNER ADD PROCESS "+i),this.UQ(t)||this.FQ.has(i)||this.Mq.has(i)||this.IQ.JQ(i,r,n)||(this.Mq.set(i,Date.now()),this.yv.connect(i).then((function(r){var n=r.mv.gv(e.yq.swarmId);if(null==n&&(n=r.mv.lv(e.yq.swarmId)),n){var o=e.Mq.get(i);e.Mq.delete(i),e.active&&e.zQ(n).then((function(r){if(e.ZQ(n,t,r.msg,o),e.iW.tW(!1,!1),e.IQ.nW(i,t.peerInfo.privateIpString,t.peerInfo.publicIpString),e.rW(n),0<e.KQ.length&&!t.sW()){var s=e.KQ[0];e.eW(s.guid),s.oW.hW(a.SQ),e.KQ.splice(0,1)}})).fail((function(t){t&&"NOT ACCEPTED"!=t&&w.ErrorMonitor.lt().logError("Error in requesting partnership",e.loggerId,b.Yi.Zi,{otherGuid:i}),e.iW.tW(!1,!0),e.uW(i)}))}})).fail((function(t){w.ErrorMonitor.lt().logError("Error in creating new p2p connection",e.loggerId,b.Yi.zi,{otherGuid:i}),e.iW.tW(!0,!0),e.Mq.delete(i),e.Tq.dQ(i)})).done())},_.prototype.aW=function(t,e){var i=this;try{var r=t.guid,n=null,s=null;if(t.privateIpString&&(s=t.privateIpString),t.publicIpString&&(n=t.publicIpString),this.fW(r))this.logger.info(this.loggerId+"ALREADY OUT PARTNER "+r);else{var u=t.contextId,h=e.mv.gv(this.yq.swarmId);if(this.contextId!==u||f.ea.Vu.eo!==t.p2pProtocolVersion||this.IQ.JQ(r,s,n))this.logger.info(this.loggerId+"PARTNERSHIP CANNOT BE ESTABLISHED WITH "+r+" CONTEXT ID "+u+" protocol version "+t.p2pProtocolVersion),this.cW(h,o.TQ);else{var c=this.lW(t),d=void 0,g=void 0;if(c){if(this.Tq.Dq([c],!1),!(d=(g=this.Tq.vW(r)).sW()||this.cG.length<f.ea.Bu.so)){this.logger.debug(this.loggerId+" got out part req from "+r+" - reached max "+this.cG.length+"/"+f.ea.Bu.so);var v=void 0;(v=this.PD.AM()||this.PD.VM()?this.EW.dW(this.PD,c,this.cG.values()):this.pW.dW(this.cG.values()))&&(this.logger.debug(this.loggerId+" chocking "+v.guid),this.cG.delete(v.guid),v.oW.hW(a.OQ),d=!0)}}else d=!1;if(d){var y=new p.Partner(r,this.iW,h,this.logger,!1,g);t.reportingGuid&&y.wW(t.reportingGuid),this.Tq.gW.has(r)?this.lG.set(r,y):this.cG.set(r,y),this.logger.info(this.loggerId+"ADDED OUT PART "+r),this.cW(h,o.yQ),this.IQ.nW(r,s,n),l.Framework.setTimeout((function(){i.bW(r)}),500),this.iW.yW()}else this.logger.info(this.loggerId+" cannot establish partnership to "+r+" - reached max "+this.cG.length+"/"+f.ea.Bu.so),this.cW(h,o.TQ)}}}catch(e){w.ErrorMonitor.lt().logError("Error receiving out partnership request",this.loggerId,b.Yi.tn,{detailedError:e,otherGuid:t.guid})}},_.prototype.lW=function(t){try{var e=new m;e.guid=t.guid,t.internalAs&&(e.internalAs=t.internalAs),t.externalAs&&(e.externalAs=t.externalAs),t.publicIpString&&(e.publicIpString=t.publicIpString),t.privateIpString&&(e.privateIpString=t.privateIpString);var i=!1,r=this.Tq.vW(t.guid);if(r&&(i=r.peerInfo.isLeader),t.streamCharacteristics){var n=[];t.streamCharacteristics.forEach((function(t){var e=new g.TrackerPeerStreamInfo;e.state=t.streamState,e.bitrate=t.bitrate,e.delta=t.delta,n.push(e)})),e.streams=n}return new g.Nf(g.mf.Of,e,i)}catch(e){return w.ErrorMonitor.lt().logError("Error constructing discovered peer info",this.loggerId,b.Yi.in,{detailedError:e,otherGuid:t.guid}),null}},_.prototype.cW=function(t,e){var i=this;this.logger.debug(this.loggerId+"SEND PART RESPONSE TO "+t.otherGuid);try{var r=new d.$v.Qv.OutPartnershipResponse;if(r.accept=e,r.accept===o.yQ){this.PD.PM()&&(r.internalAs=this.PD.PM()),this.PD.HM()&&(r.externalAs=this.PD.HM()),this.PD.getPublicIp()&&(r.publicIpString=this.PD.getPublicIp()),this.PD.getPrivateIp()&&(r.privateIpString=this.PD.getPrivateIp()),r.reportingGuid=this.PD.getReportingGuid();var n=this.PD.TW(),s=[];n.forEach((function(t,e){var r=new d.$v.Qv.StreamCharacteristics;r.bitrate=e,r.streamState=t.type,r.delta=null!=i.PD.getDelta()?i.PD.getDelta():-1,s.push(r)})),0<s.length&&r.setStreamCharacteristics(s)}t.Sv(d.ev.ov,r)}catch(e){w.ErrorMonitor.lt().logError("Error constructing partnership response message",this.loggerId,b.Yi.nn,{detailedError:e,otherGuid:t.otherGuid})}},_.prototype.mW=function(t){this.logger.warn(this.loggerId+t)},_.prototype.ZQ=function(t,e,i,r){var n=t.otherGuid;if(i.externalAs&&(e.peerInfo.externalAs=i.externalAs),i.internalAs&&(e.peerInfo.internalAs=i.internalAs),i.publicIpString&&(e.peerInfo.publicIpString=i.publicIpString),i.privateIpString&&(e.peerInfo.privateIpString=i.privateIpString),i.streamCharacteristics){var o=[];i.streamCharacteristics.forEach((function(t){var e=new g.TrackerPeerStreamInfo;e.state=t.streamState,e.bitrate=t.bitrate,e.delta=t.delta,o.push(e)})),e.peerInfo.streams=o}try{var s=new p.Partner(n,this.iW,t,this.logger,!0,e,r);return i.reportingGuid&&(s.reportingGuid=i.reportingGuid,t.receiver.setReportingGuid(i.reportingGuid),t.sender.setReportingGuid(i.reportingGuid)),e.peerInfo.type==g.mf.k?(this.vG.set(n,s),this.PD.OW(!0),this.PD.SW(!0),this.PD.EQ(!0)):(0!=this.PD.HM()&&this.PD.HM()===e.peerInfo.externalAs&&this.PD.OW(!0),0!=this.PD.PM()&&this.PD.PM()===e.peerInfo.internalAs&&this.PD.SW(!0),this.qQ.set(n,s)),this.logger.debug(this.loggerId+n+" IS NOW IN PARTNER"),s}catch(t){w.ErrorMonitor.lt().logError("Error adding a new partner object in the list",this.loggerId,b.Yi.rn,{detailedError:t,otherGuid:n})}},_.prototype.dQ=function(t){try{this.logger.info(this.loggerId+"GOT PEER DISC "+t),this.RW(t)&&(this.logger.info(this.loggerId+"IN PRT DISC "+t),this.eW(t)),this.fW(t)&&(this.logger.info(this.loggerId+"OUT PRT DISC "+t),this.cG.delete(t),this.lG.delete(t))}catch(e){w.ErrorMonitor.lt().logError("Error removing disconected partner from the list",this.loggerId,b.Yi.sn,{detailedError:e,otherGuid:t})}},_.prototype.eW=function(t){try{this.logger.debug(this.loggerId+"IN PARTNER REMOVE "+t);var e=this.IW(t);if(this.DD._W(e),this.qQ.delete(t),this.vG.delete(t),0<this.vG.length)this.PD.OW(!0),this.PD.SW(!0);else{var i=this.PD.PM(),r=this.PD.HM(),n=!1,o=!1;0!=i||0!=r?(this.qQ.forEach((function(t){0<i&&i===t.LM.peerInfo.internalAs&&(n=!0),0<r&&r===t.LM.peerInfo.externalAs&&(o=!0)})),this.PD.SW(n),this.PD.OW(o)):(this.PD.SW(!1),this.PD.OW(!1))}}catch(e){w.ErrorMonitor.lt().logError("Error removing the in partner",this.loggerId,b.Yi.en,{detailedError:e,otherGuid:t})}},_.prototype.AW=function(t,e){try{this.logger.debug(this.loggerId+"CLOSE RECEIVED FROM "+t+" TYPE "+a[e.getType()]),e.getType()!=a.bq&&e.getType()!=a.SQ||(this.cG.has(t)&&this.cG.delete(t),this.lG.has(t)&&this.lG.delete(t)),e.getType()!=a.bq&&e.getType()!=a.OQ||this.eW(t)}catch(e){w.ErrorMonitor.lt().logError("Error when close received",this.loggerId,b.Yi.hn,{detailedError:e,otherGuid:t})}},_.prototype.zQ=function(t){var e=this,i=h.defer();try{var r=new d.$v.Qv.OutPartnershipRequest;r.guid=this.tE,r.contextId=this.contextId,r.p2pProtocolVersion=f.ea.Vu.eo,r.reportingGuid=this.PD.getReportingGuid(),this.PD.PM()&&(r.internalAs=this.PD.PM()),this.PD.HM()&&(r.externalAs=this.PD.HM()),this.PD.getPrivateIp()&&(r.privateIpString=this.PD.getPrivateIp()),this.PD.getPublicIp()&&(r.publicIpString=this.PD.getPublicIp());var n=this.PD.TW(),o=[];n.forEach((function(t,i){var r=new d.$v.Qv.StreamCharacteristics;r.bitrate=i,r.streamState=t.type,r.delta=null!=e.PD.getDelta()?e.PD.getDelta():-1,o.push(r)})),0<o.length&&r.setStreamCharacteristics(o),this.logger.debug(this.loggerId+"SEND PART REQ TO "+t.otherGuid+" WITH ID "+r.contextId+" internalAS "+r.internalAs+" externalAs "+r.externalAs+" private ip "+r.privateIpString+" public ip "+r.publicIpString+" rGuid "+this.PD.getReportingGuid());var s=l.Framework.setTimeout((function(){e.NW(i,t.otherGuid)}),f.ea.Bu.to);this.FQ.set(t.otherGuid,{Gq:s,defer:i}),t.Sv(d.ev.hv,r)}catch(r){w.ErrorMonitor.lt().logError("Error sending partnership request",this.loggerId,b.Yi.un,{detailedError:r,otherGuid:t.otherGuid}),i.reject(r)}return i.promise},_.prototype.kW=function(t,e){var i=e.otherGuid,r=this.FQ.get(i);r?(l.Framework.clearTimeout(r.Gq),this.FQ.delete(i),t.accept===o.yQ?r.defer.resolve({Kl:e,msg:t}):r.defer.reject("NOT ACCEPTED")):w.ErrorMonitor.lt().logError("Error receiving out partnership response from an unknown peer",this.loggerId,b.Yi.cn,{otherGuid:i})},_.prototype.NW=function(t,e){if(this.FQ.has(e)){w.ErrorMonitor.lt().logError("Error partnership request expired",this.loggerId,b.Yi.an,{otherGuid:e});var i=this.FQ.get(e);this.FQ.delete(e),i.defer.reject("EXPIRED")}else w.ErrorMonitor.lt().logError("Error partnership request expired for unknown peer",this.loggerId,b.Yi.fn,{otherGuid:e})},_.prototype.PQ=function(){var t=this,e=h.defer(),i=this.qQ.values();this.vG.forEach((function(t,e){i.push(t)}));var r=i.slice().map((function(t){return t.oW.close()}));return h.all(r).then((function(t){e.resolve("resolved")})).fail((function(i){w.ErrorMonitor.lt().logError("Error closing partnership",t.loggerId,b.Yi.vn),e.reject("could not close")})),e.promise},_.prototype.uW=function(t){this.yv.disconnect(t)},_.prototype.CQ=function(t){var e=this;-1!=this.MQ&&l.Framework.clearInterval(this.MQ),this.MQ=l.Framework.setInterval((function(){e.DW()}),t)},_.prototype.DW=function(){try{if(this.PD.GM()&&!this.PD.AM()&&S){var t=this.PD.KM(),e=this.context.WD().bitrate;if(e&&this.RW(t.uuid)){var i=this.IW(t.uuid);this.MW(i.oW,e)}}}catch(t){w.ErrorMonitor.lt().logError("Error announcing bitrate",this.loggerId,b.Yi.dn,t)}},_.prototype.MW=function(t,e){try{var i=new d.$v.Qv.Bitrate;i.guid=this.tE,i.bitrate=e,this.logger.debug(this.loggerId+"ANNOUNCE BITRATE "+i.bitrate+" TO PEER GUID "+t.otherGuid),t.Sv(d.ev.Bitrate,i)}catch(e){w.ErrorMonitor.lt().logError("Error constructing bitrate announcement",this.loggerId,b.Yi.En,{detailedError:e,otherGuid:t.otherGuid})}},_.prototype.jW=function(t){try{this.logger.debug(this.loggerId+"RECEIVED BITRATE "+t.bitrate+" FROM PEER GUID "+t.guid),this.Tq.gW.has(t.getGuid())&&(this.Tq.gW.get(t.guid).PW(t.bitrate),this.LD.HW())}catch(e){w.ErrorMonitor.lt().logError("Error receiving bitrate info",this.loggerId,b.Yi.pn,{detailedError:e,otherGuid:t.guid})}},_.prototype.LW=function(t){try{var e=t.guid,i=this.IW(e);i&&this.UW(i,t),(i=this.FW(e))&&this.UW(i,t),this.IQ.nW(e,t.privateIpString,t.publicIpString)}catch(e){w.ErrorMonitor.lt().logError("Error receiving peer info",this.loggerId,b.Yi.wn,{detailedError:e,otherGuid:t.guid})}},_.prototype.UW=function(t,e){var i=t.LM.peerInfo;if(e.privateIpString&&(i.privateIpString=e.privateIpString),e.publicIpString&&(i.publicIpString=e.publicIpString),e.externalAs&&(i.externalAs=e.externalAs),e.internalAs&&(i.internalAs=e.internalAs),e.streamCharacteristics){var r=[];e.streamCharacteristics.forEach((function(t){var e=new g.TrackerPeerStreamInfo;e.bitrate=t.bitrate,e.delta=t.delta,e.state=t.streamState,r.push(e)})),i.streams=r}},_.prototype.kQ=function(t){var e=this;this.jQ&&l.Framework.clearInterval(this.jQ),this.jQ=l.Framework.setInterval((function(){e.GW()}),t)},_.prototype.GW=function(){var t=this;try{if(this.PD.getPrivateIp()||this.PD.getPublicIp()||this.PD.PM()||this.PD.HM()){var e=this.xW(),i=new d.$v.Qv.PeerInfoMessage;i.guid=this.PD.getId(),this.PD.getPrivateIp()&&(i.privateIpString=this.PD.getPrivateIp()),this.PD.getPublicIp()&&(i.publicIpString=this.PD.getPublicIp()),this.PD.HM()&&(i.externalAs=this.PD.HM()),this.PD.PM()&&(i.internalAs=this.PD.PM());var r=this.PD.TW(),n=[];r.forEach((function(e,i){var r=new d.$v.Qv.StreamCharacteristics;r.bitrate=i,r.streamState=e.type,r.delta=null!=t.PD.getDelta()?t.PD.getDelta():-1,n.push(r)})),0<n.length&&i.setStreamCharacteristics(n),e.forEach((function(t,e){t.oW.Sv(d.ev.fv,i)}))}}catch(e){w.ErrorMonitor.lt().logError("Error announcing peer info to all partners",this.loggerId,b.Yi.gn,e)}},_.prototype.xW=function(){try{var t=new c;return this.cG.forEach((function(e,i){t.has(i)||t.set(i,e)})),this.lG.forEach((function(e,i){t.has(i)||t.set(i,e)})),this.vG.forEach((function(e,i){t.has(i)||t.set(i,e)})),this.qQ.forEach((function(e,i){t.has(i)||t.set(i,e)})),t}catch(t){return w.ErrorMonitor.lt().logError("Error collecting all partners",this.loggerId,b.Yi.bn,t),new c}},_);function _(){var t=T.call(this)||this;return t.loggerId="[Partnership] ",t.FQ=new c,t.Mq=new c,t.DQ=-1,t.MQ=-1,t.jQ=-1,t.connected=!1,t.yv=l.Framework.resolve(l.Framework.ht.v),t._Q=l.Framework.resolve(y.nl._c),t.pW=l.Framework.resolve(y.nl.Ac),t.AQ=l.Framework.resolve(y.nl.Nc),t.EW=l.Framework.resolve(y.nl.Cc),t}e.BW=I},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.VW=!0,n.qW=3e4,n.QW=6e4,n.WW=3e4,n);function n(){}e.YW=r;var o=(s._u="site",s.Au="externalAs",s.Nu="availableSendRate",s.Cu="remoteAddress",s.ku="localAddress",s);function s(){}e.KW=o},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(98),n=i(5),o=i(0),s=i(1),a=i(2),u=(h.prototype.init=function(t){this.PD=t.PD},h.prototype.YQ=function(t,e,i,u){try{var h=[],c=[],l=Math.round(t*(1-n.ea.Bu.ro)),p=Math.max(e.length-l,0),f=t-e.length+p;if(0<p){var d=e.filter((function(t){return!t.oW.Kl.Tv()})),g=o.Framework.time(),v=d.filter((function(t){return g-t.$W>n.ea.Vu.co})),y=Math.min(v.length,p);c=this.XW(y,v);var m=[],E=[];c.forEach((function(t){m.push(t.guid),E.push(t._U.IU(!1))}))}return 0<f&&(h=this.JW(f,e,i,u)),this.logger.debug("[PART] A/R: "+f+"/"+p+" ["+h.map((function(t){return t.peerInfo.guid.substring(0,8)}))+"/"+c.map((function(t){return t.guid.substring(0,8)}))+"] P:["+e.map((function(t){return t.guid.substring(0,8)}))+"] M:["+u.map((function(t){return t.peerInfo.guid.substring(0,8)}))+"]"),new r.zW(h,c)}catch(t){return s.ErrorMonitor.lt().logError("Error updating in partners",this.ML,a.yn.Tn,t),new r.zW([],[])}},h);function h(){this.ML="[BaseInPartnerSelection] ",this.logger=o.Framework.resolve(o.Framework.ht.m).log()}e.ZW=u},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.prototype.$Q=function(){return this.tY},n.prototype.XQ=function(){return this.iY},n);function n(t,e){this.iY=t,this.tY=e}e.zW=r},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(64),a=i(15),u=i(83),h=i(6),c=(n(l,o=u.oA),l.bt=function(t){l.logger=t},l.prototype.send=function(){if(l.logger&&l.logger.debug(this.method+" "+this.url),!this.pluginId){var t=Object.keys(l.uA);0<t.length&&(this.pluginId=l.uA[t[0]])}var e=this,i=new XMLHttpRequest;0===this.url.indexOf("//")&&(this.url=location.protocol+this.url);var r=a.wc(s.UU.jU,s.UU.Ok,s.UU.kU,this.pluginId,encodeURIComponent(this.url));i.open("GET",r),this.responseType&&(i.responseType=this.responseType),i.onreadystatechange=function(){},i.onload=function(){if(4===i.readyState)try{e.$p=i.getAllResponseHeaders(),e.response=i.response;var t=i.response.byteLength;"arraybuffer"!==i.responseType&&(e.responseText=i.response),e.readyState=4,e.status=i.status,e.dispatchEvent(h.La.createEvent(ProgressEvent,"progress",{lengthComputable:!0,loaded:t,total:t,currentTarget:e})),e.dispatchEvent(h.La.createEvent(Event,"readystatechange",{currentTarget:e,bubbles:!1,cancelable:!1})),e.dispatchEvent(h.La.createEvent(ProgressEvent,"load",{currentTarget:e,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:t,total:0})),e.dispatchEvent(h.La.createEvent(ProgressEvent,"loadend",{currentTarget:e,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:t,total:0}))}catch(t){l.logger&&l.logger.warn(t)}},i.onerror=function(t){l.logger&&l.logger.warn("onError: "+JSON.stringify(t)),e.dispatchEvent(h.La.createEvent(ErrorEvent,"error",t,e))},i.onabort=function(t){l.logger&&l.logger.warn("onAbort: "+JSON.stringify(t)),e.dispatchEvent(h.La.createEvent(ProgressEvent,"abort",t,e))},i.send()},l.prototype.abort=function(){},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.nY=c},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.rY||function(){return(o=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"s",{value:!0});var s,a=i(3),u=i(65),h=i(207),c=(n(l,s=u.Plugin),l.prototype.sendHttpRequest=function(){var t=this;return function(e,i){return t.logger().debug("sendHttpRequest called",e,i),t.getPotentialSession()&&e.match(/manifest\/dash|manifest\/hls|audio|video/)?(t.logger().debug("Using HiveRequest",e,i),new h.sY(t,i)):null}},l.prototype.initSession=function(t,e){var i=this;return void 0===e&&(e=!1),this.getPlayerSource()&&!0!==e&&(this.player.unload(),this.logger().warn(this.loggerId+"Player already has a loaded source. Hive has unloaded source via `player.unload`. Perform this action manually to remove this warning.")),this.closeHiveSession("Starting a new session"),this.resolveTicketPromise(t).timeout(this.options().pluginTimeout).then((function(t){return i.eY(),t.toHiveSession()}))},l.prototype.hY=function(t){var e=this;if(!t)return a.resolve(void 0);var i=o({},t),r=[],n=!1;return t.dash_ticket&&(r.push(["dash",t.dash_ticket]),n=!0),t.hls_ticket&&(r.push(["hls",t.hls_ticket]),n=!0),n&&this.logger().warn(this.loggerId+"The use of tickets inside player.setup/player.load is deprecated. See Hive documentation for more details."),a.allSettled(r.map((function(t){return e.resolveTicketPromise(t[1])}))).timeout(this.options().pluginTimeout,"ticket resolution timeout").then((function(t){var n=!1;if(t.forEach((function(t,e){"fulfilled"===t.state&&(i[r[e][0]]=t.value.manifest,delete i[r[e][0]+"_ticket"]),n=!0})),!n&&r.length)throw new Error("Could not resolve any tickets.");return e.getPotentialSession()&&e.eY(),i}),(function(t){e.onSetupTimeout();var i=e.loggerId+"Could not resolve source config. Returning original source.";throw e.logger().warn(i,t),new Error(i)}))},l.prototype.oY=function(t,e){throw this.logger().debug(this.loggerId+"Unable to resolve the sources",t),e},Object.defineProperty(l.prototype,"uY",{get:function(){switch(this.aY){case"8":return{ready:l.fY.player.PlayerEvent.SourceLoaded,play:l.fY.player.PlayerEvent.Play,playing:l.fY.player.PlayerEvent.Playing,error:l.fY.player.PlayerEvent.Error,finished:l.fY.player.PlayerEvent.PlaybackFinished,cY:l.fY.player.PlayerEvent.Seek,lY:l.fY.player.PlayerEvent.SegmentRequestFinished,vY:l.fY.player.PlayerEvent.ViewModeChanged,destroy:l.fY.player.PlayerEvent.Destroy,dY:l.fY.player.PlayerEvent.StallStarted,EY:l.fY.player.PlayerEvent.StallEnded,paused:l.fY.player.PlayerEvent.Paused,unload:l.fY.player.PlayerEvent.SourceUnloaded,pY:l.fY.player.PlayerEvent.VideoQualityChanged};case"7":return{ready:"onReady",play:"onPlay",error:"onError",finished:"onPlaybackFinished",cY:"onSeek",lY:"onSegmentRequestFinished",wY:"onFullscreenEnter",gY:"onFullscreenExit",destroy:"onDestroy",dY:"onStallStarted",EY:"onStallEnded",paused:"onPaused",unload:"onSourceUnloaded",pY:"onVideoDownloadQualityChanged"};case"6":return{ready:"onReady",play:"onPlay",error:"onError",finished:"onPlaybackFinished",cY:"onSeek",lY:"onSegmentRequestFinished",wY:"onFullscreenEnter",gY:"onFullscreenExit",destroy:"onDestroy",dY:"onStartBuffering",EY:"onStopBuffering",paused:"onPause",unload:"onSourceUnloaded",pY:"onVideoDownloadQualityChange"};default:throw new Error("Unknown event names for player version "+this.getPlayerVersion())}},enumerable:!0,configurable:!0}),l.initHiveSDN=function(t){return!!l.bY||(t?l.fY=t:"undefined"!=typeof bitmovin&&(l.fY=bitmovin),void 0===l.fY?(console.error("Could not find global `bitmovin` object."),!1):("function"==typeof l.fY.player?(l.bY=l.fY.player,l.fY.player=function(){var t=l.bY.apply(bitmovin,arguments),e=t.setup;return t.setup=function(i){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var s=o({},i);return s.network=s.network||{},s.network.sendHttpRequest?console.error("Player configuration already contains a network configuration for sendHttpRequest, cannot utilize Hive WebRTC"):s.network.sendHttpRequest=function(){if(t.yw){var e=t.yw.getPotentialSession();if(e&&e.tech.getName()===u.TechName.HiveJS)return t.yw.sendHttpRequest().apply(t.yw,arguments)}},e.apply(t,[s].concat(r))},t}):"undefined"!==l.fY.player&&"function"==typeof l.fY.player.Player&&(l.bY=l.fY.player.Player,l.fY.player.Player=function(t,e){var i,r=o({},e);return r.network=r.network||{},r.network.sendHttpRequest?console.error("Player configuration already contains a network configuration for sendHttpRequest, cannot utilize Hive WebRTC"):r.network.sendHttpRequest=function(){if(i&&i.yw){var t=i.yw.getPotentialSession();if(t&&t.tech.getName()===u.TechName.HiveJS)return i.yw.sendHttpRequest().apply(i.yw,arguments)}},i=new l.bY(t,r)}),Boolean(l.bY)))},l.deinitHiveSDN=function(){return!l.bY||(void 0!==l.fY&&("function"==typeof l.fY.player?(l.fY.player=l.bY,l.bY=void 0):"undefined"!==l.fY.player&&"function"==typeof l.fY.player.Player&&(l.fY.player.Player=l.bY,l.bY=void 0)),l.fY=void 0,!l.bY)},l.prototype.destroyHivePlugin=function(t){return void 0===t&&(t=!0),this.player.yw=void 0,s.prototype.destroyHivePlugin.call(this,t)},l.prototype.onActivateSession=function(t,e){void 0===e&&(e=!1);var i=s.prototype.onActivateSession.call(this,t,e);return i&&Boolean(!!this.player.getConfig().playback&&this.player.getConfig().playback.autoplay)&&(this.onStartBuffering(!1,!0),this.yY="8"!==this.aY),i},l.prototype.eY=function(){var t,e=this.uY,i=((t={})[e.ready]=this.ready,t[e.play]=this.play,t[e.error]=this.error,t[e.finished]=this.finished,t[e.cY]=this.cY,t[e.lY]=this.lY,t[e.dY]=this.dY,t[e.EY]=this.EY,t[e.paused]=this.paused,t[e.pY]=this.pY,t[e.unload]=this.unload,t);"8"===this.aY?(i[e.playing]=this.playing,i[e.vY]=this.vY):(i[e.wY]=this.vY,i[e.gY]=this.vY),this.aF.eY(i)},l.prototype.ready=function(){this.logger().debug("bitmovin.player.EVENT.ON_READY"),this.onActivateSession()&&(this.TY=new u.HivePlayerExtendedStats),this.pF()},l.prototype.playing=function(){this.logger().debug("bitmovin.player.EVENT.PLAYING"),!1===this.yY&&(this.onEndBuffering(),this.yY=!0)},l.prototype.play=function(){this.logger().debug("bitmovin.player.EVENT.ON_PLAY"),this.TF(u.PlayerEvents.PLAYING)},l.prototype.error=function(t){this.logger().debug("bitmovin.player.EVENT.ON_ERROR");var e=-1,i=null;if(null!=t)try{e=t.code,i=JSON.stringify(t,null)}catch(e){i=t}this.onError(e,i,!0)},l.prototype.finished=function(){this.logger().debug("bitmovin.player.EVENT.ON_PLAYBACK_FINISHED"),this.onEventFeedback(u.PlayerEvents.STOPPED,{code:1})},l.prototype.cY=function(){this.logger().debug("bitmovin.player.EVENT.ON_SEEK"),this.onEventFeedback(u.PlayerEvents.SKIP)},l.prototype.vY=function(){var t=this.isFullscreen();this.logger().debug("bitmovin.player.EVENT.ON_FULLSCREEN_"+(t?"ENTER":"EXIT")),this.onEventFeedback(u.PlayerEvents.FULLSCREEN,{value:t})},l.prototype.lY=function(t){if(this.TY){var e=0<=t.mimeType.indexOf("video");if(void 0===this.mY){var i=this.player.getPlaybackVideoData();i&&i.bitrate&&this.OY(String(i.bitrate))}if(t.success){if(!t.isInit&&this.mY){var r=8*t.size/t.downloadTime;this.TY.accountCompleted(e,this.mY,t.size),this.TY.updateBandwidth(r)}}else this.mY&&this.TY.accountFailed(e,this.mY)}},l.prototype.unload=function(){this.logger().debug("bitmovin.player.EVENT.ON_SOURCE_UNLOAD"),this.getActiveSession()&&this.closeHiveSession("Source unload")},l.prototype.destroy=function(){this.logger().debug("bitmovin.player.EVENT.ON_DESTROY"),this.aF.reset(),this.destroyHivePlugin()},l.prototype.dY=function(){this.logger().debug("bitmovin.player.EVENT.ON_START_BUFFERING"),this.onStartBuffering()},l.prototype.EY=function(){this.logger().debug("bitmovin.player.EVENT.ON_STOP_BUFFERING"),this.onEndBuffering()},l.prototype.paused=function(){this.logger().debug("bitmovin.player.EVENT.ON_PAUSE"),this.TF(u.PlayerEvents.PAUSED)},l.prototype.pY=function(t){var e="object"==typeof t.targetQuality?t.targetQuality:"object"==typeof t.targetQualityId?t.targetQualityId:null,i="string"==typeof t.targetQualityId?t.targetQualityId:t.targetQuality,r=null;e&&(r=String(e.bitrate)),r||this.player.getAvailableVideoQualities().some((function(t){if(t.id===i)return r=String(t.bitrate),!0})),this.OY(r)},l.prototype.OY=function(t){isNaN(parseInt(t))||(this.logger().debug("newBitrate",t),this.mY&&t>this.mY&&this.TY?this.TY.bitrateSwitchUp():this.mY&&this.mY>t&&this.TY&&this.TY.bitrateSwitchDown(),this.mY=t)},l.prototype.getPlayerSource=function(){var t,e=this.getStreamProtocol();return(t="8"===this.aY?this.player.getSource():this.player.getConfig().source)?e===StreamProtocol.HLS&&t.hls?t.hls:e===StreamProtocol.DASH&&t.dash?t.dash:"":""},l.prototype.getCurrentTime=function(){return null!=this.player?Math.round(1e3*this.player.getCurrentTime()):0},l.prototype.getBufferLen=function(){return null!=this.player&&null!=this.player.getVideoBufferLength&&0<this.player.getVideoBufferLength()?Math.max(0,Math.round(1e3*this.player.getVideoBufferLength())):0},l.prototype.getWindowSize=function(){if(this.player){var t="function"==typeof this.player.getContainer?this.player.getContainer():this.player.getFigure();return{width:t.offsetWidth,height:t.offsetHeight}}},l.prototype.isFullscreen=function(){return"function"==typeof this.player.isFullscreen?this.player.isFullscreen():this.player.getViewMode()===l.fY.player.ViewMode.Fullscreen},l.prototype.isLive=function(){return this.player.isLive()},l.prototype.isActive=function(){return!0},l.prototype.getStreamProtocol=function(){if(this.player){var t=this.player.getStreamType();if("hls"===t)return StreamProtocol.HLS;if("dash"===t)return StreamProtocol.DASH}return null},l.prototype.getExtendedStats=function(){var t=this.TY;return this.TY=new u.HivePlayerExtendedStats,t},l.prototype.getPluginName=function(){return this.pluginName},l.prototype.getPlayerTech=function(){if(this.player)return this.player.getPlayerType()},l.prototype.getPlayerVersion=function(){return bitmovin.player&&bitmovin.player.version?bitmovin.player.version:"function"==typeof this.player.getVersion?this.player.getVersion():this.player.version?this.player.version:""},l);function l(t,e){var i,r=s.call(this,e)||this;if(r.pluginName="bitmovin",r.yY=null,r.player=t,r.player.yw)throw new Error("This player already has an attached Hive plugin instance.");(r.player.yw=r).aY=r.getPlayerVersion()[0],r.ready=r.ready.bind(r),r.play=r.play.bind(r),r.playing=r.playing.bind(r),r.error=r.error.bind(r),r.finished=r.finished.bind(r),r.cY=r.cY.bind(r),r.lY=r.lY.bind(r),r.vY=r.vY.bind(r),r.destroy=r.destroy.bind(r),r.dY=r.dY.bind(r),r.EY=r.EY.bind(r),r.paused=r.paused.bind(r),r.pY=r.pY.bind(r),r.unload=r.unload.bind(r),r.closeHiveSession=r.closeHiveSession.bind(r),r.destroyHivePlugin=r.destroyHivePlugin.bind(r),r.player.closeHiveSession=r.closeHiveSession,r.player.destroyHivePlugin=r.destroyHivePlugin,"8"===r.aY?r.aF.SY(t,"on","off"):r.aF.SY(t,"addEventHandler","removeEventHandler");var n=r.uY;return r.aF.eY(((i={})[n.destroy]={RY:r.destroy,IY:!0},i)),"8"===r.aY||l.bY||(r.player.originalSetup=r.player.setup,r.player._Y=r.player.load,r.player.load=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return r.getActiveSession()&&r.closeHiveSession("New source loaded"),r.hY(t).then((function(t){return r.logger().debug(r.loggerId+"Resolved sources",t),r.player._Y.apply(r.player,[t].concat(e))}),(function(e){r.oY(t,e)}))},r.player.setup=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.getActiveSession()&&(r.logger().debug("Plugin contains active HiveSession. Calling player.closeHiveSession..."),r.player.closeHiveSession());var n=o({},t);return-1<r.options().hiveTechOrder.indexOf(u.TechName.HiveJS)&&(n.network=n.network||{},n.network.sendHttpRequest?r.logger().error(r.loggerId+"Player configuration already contains a network configuration for sendHttpRequest, cannot utilize HiveJS"):n.network.sendHttpRequest=r.sendHttpRequest()),r.hY(t.source).then((function(t){return n.source=t,r.player.originalSetup.apply(r.player,[n].concat(e))}),(function(e){r.oY(t.source,e)}))}),r.logger().notice(r.loggerId+"registered plugin [name:"+r.getPluginName()+"][id: "+r.getPluginId()+"][version: "+r.getPluginVersion()+"]"),r}e.HiveBitmovin=c,"undefined"!=typeof bitmovin&&(bitmovin.initHiveSDN=function(t,e){var i=new c(t,e);return i.logger().warn("The use of bitmovin.initHiveSDN is deprecated. See Hive documentation for more details."),i})},function(t,e,i){var r="undefined"!=typeof global&&global||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function o(t,e){this.AY=t,this.NY=e}e.setTimeout=function(){return new o(n.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(n.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.CY=o.prototype.kY=function(){},o.prototype.close=function(){this.NY.call(r,this.AY)},e.DY=function(t,e){clearTimeout(t.MY),t.jY=e},e.PY=function(t){clearTimeout(t.MY),t.jY=-1},e.HY=e.active=function(t){clearTimeout(t.MY);var e=t.jY;0<=e&&(t.MY=setTimeout((function(){t.LY&&t.LY()}),e))},i(102),e.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof global&&global.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof global&&global.clearImmediate||this&&this.clearImmediate},function(t,e,i){(function(t){!function(e,i){"use strict";if(!e.setImmediate){var r,n,o,s,a=1,u={},h=!1,c=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,r="[object process]"==={}.toString.call(e.process)?function(e){t.Ve((function(){f(e)}))}:function(){if(e.postMessage&&!e.UY){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",d,!1):e.attachEvent("onmessage",d),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){f(t.data)},function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,function(t){var e=c.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):function(t){setTimeout(f,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={FY:t,GY:e};return u[a]=n,r(a),a++},l.clearImmediate=p}function p(t){delete u[t]}function f(t){if(h)setTimeout(f,0,t);else{var e=u[t];if(e){h=!0;try{!function(t){var e=t.FY,i=t.GY;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{p(t),h=!1}}}}function d(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))}}("undefined"==typeof self?"undefined"==typeof global?this:global:self)}).call(this,i(37))},function(t,e,i){var r,n,o=i(66),s=i(67),a=0,u=0;t.exports=function(t,e,i){var h=e&&i||0,c=e||[],l=(t=t||{}).xY||r,p=void 0!==t.BY?t.BY:n;if(null==l||null==p){var f=o();null==l&&(l=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=n=16383&(f[6]<<8|f[7]))}var d=void 0!==t.VY?t.VY:(new Date).getTime(),g=void 0!==t.qY?t.qY:u+1,v=d-a+(g-u)/1e4;if(v<0&&void 0===t.BY&&(p=p+1&16383),(v<0||a<d)&&void 0===t.qY&&(g=0),1e4<=g)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,n=p;var y=(1e4*(268435455&(d+=122192928e5))+(u=g))%4294967296;c[h++]=y>>>24&255,c[h++]=y>>>16&255,c[h++]=y>>>8&255,c[h++]=255&y;var m=d/4294967296*1e4&268435455;c[h++]=m>>>8&255,c[h++]=255&m,c[h++]=m>>>24&15|16,c[h++]=m>>>16&255,c[h++]=p>>>8|128,c[h++]=255&p;for(var E=0;E<6;++E)c[h+E]=l[E];return e||s(c)}},function(t,e,i){var r=i(66),n=i(67);t.exports=function(t,e,i){var o=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.QY||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[o+a]=s[a];return e||n(s)}},function(t,e){if(!RegExp.escape){var i=/[-[\]{}()*+?.\\^$|,#\s]/g;RegExp.escape=function(t){return t.replace(i,"\\$&")}}},function(t,e,i){"use strict";var r=i(39),n=i(51);function o(){throw new Error("Can't construct. MapChanges is a mixin.")}t.exports=o,Object.prototype.hasOwnProperty;var s=new r,a=null;o.prototype.WY=function(){return s.has(this)||(a=a||i(52),s.set(this,a())),s.get(this)},o.prototype.YY=function(t){var e=this.WY();return t=t||"",e.has(t)||e.set(t,{Xf:new n,Jf:new n}),e.get(t)},o.prototype.KY=function(t,e,i){!this.ic&&this.tc&&this.tc();var r=this.YY(e);(i?r.Xf:r.Jf).push(t),Object.defineProperty(this,"bj",{value:!0,writable:!0,configurable:!0,enumerable:!1});var n=this;return function(){n&&(n.$Y(t,e,i),n=null)}},o.prototype.$Y=function(t,e,i){var r=this.YY(e),n=(i?r.Xf:r.Jf).findLast(t);if(!n)throw new Error("Can't remove map change listener: does not exist: token "+JSON.stringify(e));n.delete()},o.prototype.Tj=function(t,e,i){var r=this.WY(),n="Map"+(i?"WillChange":"Change");r.forEach((function(r,o){if(!r.isActive){var s;r.isActive=!0,s=i?r.Xf:r.Jf;var a="handle"+(o.slice(0,1).toUpperCase()+o.slice(1))+n;try{s.forEach((function(i){if(i[a])i[a](e,t,this);else{if(!i.call)throw new Error("Handler "+i+" has no method "+a+" and is not callable");i.call(i,e,t,this)}}),this)}finally{r.isActive=!1}}}),this)},o.prototype.XY=function(t,e){return this.KY(t,e,!0)},o.prototype.JY=function(t,e){return this.$Y(t,e,!0)},o.prototype.yj=function(t,e){return this.Tj(t,e,!0)}},function(t,e,i){"use strict";i(11);var r=i(52),n=i(51),o=i(12),s=i(41),a=i(72),u=i(13);function h(t,e,i,r){if(!(this instanceof h))return new h(t,e,i,r);e=e||Object.Wh,i=i||Object.hash,r=r||Function.Yh,this.Kh=e,this.$h=i,this.Xh=r;var n=this;this.zY=new this.ZY(null,(function(){return new n.tK})),this.length=0,this.hiveAddEach(t)}Object.prototype.hasOwnProperty,(t.exports=h).iK=h,Object.hiveAddEach(h.prototype,o.prototype),Object.hiveAddEach(h.prototype,s.prototype),Object.hiveAddEach(h.prototype,u.prototype),h.prototype.ZY=r,h.prototype.tK=n,h.prototype.zh=function(t){return new this.constructor(t,this.Kh,this.$h,this.Xh)},h.prototype.has=function(t){var e=this.$h(t);return this.zY.get(e).has(t)},h.prototype.get=function(t,e){if(e)throw new Error("FastSet#get does not support second argument: equals");var i=this.$h(t),r=this.zY;return r.has(i)?r.get(i).get(t):this.Xh(t)},h.prototype.delete=function(t,e){if(e)throw new Error("FastSet#delete does not support second argument: equals");var i=this.$h(t),r=this.zY;if(r.has(i)){var n=r.get(i);if(n.delete(t))return this.length--,0===n.length&&r.delete(i),!0}return!1},h.prototype.clear=function(){this.zY.clear(),this.length=0},h.prototype.hiveAdd=function(t){var e=this.$h(t),i=this.zY;return i.has(e)||i.set(e,new this.tK(null,this.Kh)),!i.get(e).has(t)&&(i.get(e).hiveAdd(t),this.length++,!0)},h.prototype.reduce=function(t,e){var i=arguments[2],r=this.zY,n=0;return r.reduce((function(e,r){return r.reduce((function(e,r){return t.call(i,e,r,n++,this)}),e,this)}),e,this)},h.prototype.xf=function(){if(0<this.length)return this.zY.xf().xf()},h.prototype.Bf=function(){return this.zY.values().Hf().Bf()},h.prototype.log=function(t,e,i,r){t=t||a.FF,e=e||this.Zh,i||(i=console.log,r=console),i=i.bind(r);var n=this.zY,o=n.keys();o.forEach((function(s,a){var u,h;h=a===o.length-1?(u=t.PF," "):(u=0===a?t.MF:t.HF,t.LF);var c=n.get(s);i.call(r,u+t.kF+t.MF+" "+s),c.forEach((function(n,o){var s,a,u;a=o===c.head.nj?(s=t.PF," "):(s=t.HF,t.LF),e(o,(function(e){u?i.call(r,h+" "+a+"  "+e):(i.call(r,h+" "+s+t.kF+t.kF+e),u=!0)}),(function(e){i.call(r,h+" "+t.LF+"  "+e)}))}))}))},h.prototype.Zh=function(t,e){var i=t.value;Object(i)===i?JSON.stringify(i,null,4).split("\n").forEach((function(t){e(" "+t)})):e(" "+i)}},function(t,e,i){"use strict";t.exports=o;var r=i(38),n=i(12);function o(t){if(!(this instanceof o))return new o(t);if(Array.isArray(t)||"string"==typeof t)return o.Bf(t);if((t=r(t))instanceof o)return t;if(t.next)this.next=function(){return t.next()};else if(t.Bf){var e=t.Bf();this.next=function(){return e.next()}}else{if("[object Function]"!==r.prototype.toString.call(t))throw new TypeError("Can't iterate "+t);this.next=t}}o.prototype.forEach=n.prototype.forEach,o.prototype.map=n.prototype.map,o.prototype.filter=n.prototype.filter,o.prototype.every=n.prototype.every,o.prototype.some=n.prototype.some,o.prototype.kh=n.prototype.kh,o.prototype.all=n.prototype.all,o.prototype.min=n.prototype.min,o.prototype.max=n.prototype.max,o.prototype.jf=n.prototype.jf,o.prototype.Pf=n.prototype.Pf,o.prototype.Hf=n.prototype.Hf,o.prototype.Lf=n.prototype.Lf,o.prototype.enumerate=n.prototype.enumerate,o.prototype.Ff=n.prototype.Ff,o.prototype.group=n.prototype.group,o.prototype.reversed=n.prototype.reversed,o.prototype.toArray=n.prototype.toArray,o.prototype.Df=n.prototype.Df,o.prototype.iterator=n.prototype.iterator,o.prototype.lj=null,r.defineProperty(o.prototype,"_iterationObject",{get:function(){return this.lj||(this.lj={done:!1,value:void 0})}}),o.prototype.zh=function(t){var e=[];return e.hiveAddEach(t),e},o.prototype.nK=function(t){var e=o(this),i=arguments[1],n=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;return new e.constructor((function(){if(!0!==e.vj.done){var r=t.call(i,e.next().value,n++,e);e.vj.value=r}return e.vj}))},o.prototype.rK=function(t){var e=o(this),i=arguments[1],n=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;return new e.constructor((function(){for(var r;;){if(!0===(r=e.next()).done)return r;if(t.call(i,r.value,n++,e))return r}}))},o.prototype.reduce=function(t){var e,i=o(this),n=arguments[1],s=arguments[2],a=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;if(!0===(e=i.next()).done){if(1<arguments.length)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}for(n=1<arguments.length?t.call(s,n,e.value,a,i):e.value,a++;;){if(!0===(e=i.next()).done)return n;n=t.call(s,n,e.value,a,i),a++}},o.prototype.concat=function(){return o.concat(Array.prototype.concat.apply(this,arguments))},o.prototype.sK=function(t){var e,i,n=o(this),s=arguments[1],a=!1,u=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;for(;!0!==(i=n.next()).done;){if(!t.call(s,i.value,u,n)){a=!0,e=i.value;break}u++}return a?n.constructor([e]).concat(n):n.constructor([])},o.prototype.eK=function(t){var e=o(this),i=arguments[1],n=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;return new e.constructor((function(){if(!0!==e.vj.done){var r=e.next().value;t.call(i,r,n++,e)?e.vj.value=r:(e.vj.done=!0,e.vj.value=void 0)}return e.vj}))},o.prototype.hK=function(){return o.Uf(Array.prototype.concat.apply(this,arguments))},o.prototype.oK=function(t){return o.count(t).hK(this)},o.Bf=function(t){var e;return e=0,new o((function(){if("object"==typeof t)for(;!(e in t);){if(e>=t.length){this.vj.done=!0,this.vj.value=void 0;break}e+=1}else e>=t.length&&(this.vj.done=!0,this.vj.value=void 0);return this.vj.done||(this.vj.value=t[e],e+=1),this.vj}))},o.uK=function(t,e){var i;return arguments.length<2&&(e=1/0),new o((function(){var r,n;return i&&(n=i()),i&&!0!==n.done||(n=0<e?(e--,r=o.Bf(t),(i=r.next.bind(r))()):(this.vj.done=!0,this.vj)),n}))},o.concat=function(t){var e;return t=o(t),new o((function(){var i,r;return e&&(r=e()),r&&!0!==r.done?r:!1===(r=t.next()).done?(i=o(r.value),(e=i.next.bind(i))()):r}))},o.Uf=function(t){return 0===(t=o(t).map(o)).length?new o([]):new o((function(){var e,i,r=t.map((function(t){return!0===(i=t.next()).done&&(e=!0),i.value}));return e?(this.vj.done=!0,this.vj.value=void 0):this.vj.value=r,this.vj}))},o.Lf=function(){return o.Uf(Array.prototype.slice.call(arguments))},o.chain=function(){return o.concat(Array.prototype.slice.call(arguments))},o.range=function(t,e,i){return arguments.length<3&&(i=1),arguments.length<2&&(e=t,t=0),t=t||0,i=i||1,new o((function(){e<=t&&(this.vj.done=!0,this.vj.value=void 0);var r=t;return t+=i,this.vj.value=r,this.vj}))},o.count=function(t,e){return o.range(t,1/0,e)},o.repeat=function(t,e){return new o.range(e).nK((function(){return t}))}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.prototype.destroy=function(){this.abort(),this.loader=null,this.xhr=null},n.prototype.abort=function(){var t=this.loader||this.xhr;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},n.prototype.load=function(t,e,i){this.context=t,this.config=e,this.callbacks=i,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.aK()},n.prototype.aK=function(){this.xhr=null;var t=this.context,e=this.stats;e.tfirst=0,e.loaded=0,this.xhrSetup?this.xhr=this.xhrSetup(this.xhr,t):console.log(this.loggerId+"Hive XHR setup missing"),this.xhr.onreadystatechange=this.readystatechange.bind(this),this.xhr.onprogress=this.loadprogress.bind(this),this.config.timeout&&(this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout)),this.xhr.send()},n.prototype.readystatechange=function(t){var e=t.currentTarget,i=e.readyState,r=this.stats,n=this.context,o=this.config;if(!r.aborted&&2<=i)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===i){var s=e.status,a=e.getAllResponseHeaders()||"";a=a.replace(/[\r\n]{2,}Access-Control-Allow-Origin:\*/,"\naccess-control-allow-origin: *");var u=e.responseURL||e.url||"",h=e.statusText||(200===s?"OK":""),c=a.trim().split(/[\r\n]+/),l={};if(a&&c.forEach((function(t){var e=t.split(": "),i=e.shift(),r=e.join(": ");l[i]=r})),200<=s&&s<300){r.tload=Math.max(r.tfirst,performance.now());var p,f=void 0;p="arraybuffer"===n.responseType?(f=e.response).byteLength:(f=e.responseText).length,r.loaded=r.total=p;var d={url:u,code:s,text:h,responseHeaders:a,fK:l,data:f};this.callbacks.onSuccess(d,r,n)}else void 0===o.retryDelay||void 0===o.cK||r.retry>=o.lK||400<=s&&s<499?(console.warn(s+" while loading "+n.url),d={url:u,code:s,text:h,responseHeaders:a,fK:l,data:"arraybuffer"===n.responseType?e.response:e.responseText},this.callbacks.onError(d,n)):(console.warn(s+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.aK.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.cK),r.retry++)}else o.timeout&&(this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout))},n.prototype.loadtimeout=function(){console.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)},n.prototype.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total);var i=this.callbacks.onProgress;i&&i(e,this.context,null)},n);function n(t){this.loggerId="[HiveXhrLoader]",(this.vK=t)&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}e.FU=r},function(t,e,i){"use strict";var r;Object.defineProperty(e,"s",{value:!0}),(r=e.yF||(e.yF={}))[r.HiveJS=0]="HiveJS",r[r.HiveJava=1]="HiveJava",r[r.StatsJS=2]="StatsJS",r[r.HiveJsProxy=3]="HiveJsProxy";var n=(o.StatsJS="StatsJS",o.HiveJsProxy="HiveJsProxy",o.HiveJava="HiveJava",o.HiveJS="HiveJS",o);function o(){}e.TechName=n},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.lt=function(){return void 0===this.vt&&(this.vt=new n),this.vt},n.prototype.Et=function(t,e){this.dK.push(t),this.callbacks.push(e)},n.prototype.EK=function(t){for(var e=function(e){var r=!0;i.dK[e].forEach((function(e){null!=t[e]&&t[e]||(r=!1)})),r&&i.callbacks[e]()},i=this,r=0;r<this.dK.length;r++)e(r)},n);function n(){var t=this;if(this.dK=new Array,this.callbacks=new Array,n.vt)throw new Error("Error: Instantiation failed: Use KeyHandlerHiveComm.getInstance() instead of new.");var e={};document.addEventListener("keydown",(function(i){e[i.keyCode]=!0,t.EK(e)}),!0),document.addEventListener("keyup",(function(t){e={}}),!0)}e.pt=r},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(44),n=i(29),o=i(15),s=i(1),a=(u.prototype.pK=function(){var t=this;this.YP.options().silent&&(HiveConfig&&(HiveConfig.ConnInfo.detectPrivateIP=!0),void 0===this.wK&&(this.url="//"+r.zv.Ok+":"+this.gK+"/feedback",this.YP.logger().info("starting periodic alive ping to hive tester ["+this.url+"]"),this.wK=setInterval((function(){t.bK()}),n.et.Ib)))},u.prototype.bK=function(){var t=this,e=this.YP.getActiveSession(),i=void 0;e&&(i="S["+e.id+"]");var r=this.YP.getCurrentTime();r>this.yK?(this.YP.logger().info("sending hive tester ping ["+r+" > "+this.yK+"]"),o.bc(this.url).then((function(t){}),(function(e){s.ErrorMonitor.lt().logError("error sending hive tester ping",i,{error:e}),clearInterval(t.wK)}))):this.YP.logger().warn("not sending hive tester ping ["+r+" <= "+this.yK+"]"),this.yK=r},u);function u(t){this.gK=n.et.Xv?9989:9988,this.yK=-1,this.YP=t,this.pK()}e.IF=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(42),n=i(114),o=i(45),s=i(0),a=(u.prototype.apply=function(t){t.bind(new r.uk(s.Framework.ht.o,n.TK,r.ak.Ek)),t.bind(new r.uk(s.Framework.ht.m,o.Pk))},u);function u(){}e.SF=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(71),n=i(4),o=(s.prototype.U=function(){return!1},s.prototype.mK=function(t,e,i){},s.prototype.X=function(){return null},s.prototype.time=function(){return+new Date},s.prototype.setTimeout=function(t,e,i){var r=this;void 0===i&&(i=!1);var n=this.OK.setTimeout((function(){r.SK.delete(n),t()}),e);return this.SK.set(n,i),n},s.prototype.clearTimeout=function(t){return this.SK.delete(t),this.OK.clearTimeout(t),!0},s.prototype.setInterval=function(t,e){var i=this.OK.setInterval((function(){t()}),e);return this.RK.hiveAdd(i),i},s.prototype.clearInterval=function(t){return this.RK.delete(t),this.OK.clearInterval(t),!0},s.prototype.tt=function(t){var e=this;void 0===t&&(t=!1),this.SK.forEach((function(i,r){!t&&i||e.clearInterval(r)})),this.RK.forEach((function(t){return e.clearInterval(t)}))},s);function s(){this.SK=new n,this.RK=new r,"undefined"!=typeof global?this.OK=global:this.OK=window}e.TK=o},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(42),n=i(0),o=i(45),s=i(18),a=i(8),u=i(24),h=i(73),c=i(74),l=i(75),p=i(76),f=i(77),d=i(7),g=d.ut.Ja,v=d.ut.sf;if(g)var y=i(78).gx;else var m=i(80).iB;var E=(w.prototype.apply=function(t){v?(t.bind(new r.uk(a.pf.lf,s.Ul,r.ak.Ek)),t.bind(new r.uk(a.pf.R,c.VG,r.ak.Ek))):(t.bind(new r.uk(a.pf.lf,s.Ll,r.ak.Ek)),t.bind(new r.uk(a.pf.R,c.BG,r.ak.Ek))),t.bind(new r.uk(a.pf.uf,l.$G,r.ak.Ek)),t.bind(new r.uk(a.pf.u,p.hx,r.ak.Ek)),t.bind(new r.uk(n.Framework.ht.m,o.Pk,r.ak.Ek)),g?t.bind(new r.uk(a.pf.af,y,r.ak.Ek)):t.bind(new r.uk(a.pf.af,m,r.ak.Ek)),t.bind(new r.uk(a.pf.ff,f.ax,r.ak.Ek)),t.bind(new r.uk(a.pf.vf,h.NF,r.ak.mk)),t.bind(new r.uk(a.pf.hf,h.Rl,r.ak.mk)),t.bind(new r.uk(a.pf.df,u.NE,r.ak.mk)),t.bind(new r.uk(a.pf.Ef,u.Rl,r.ak.mk))},w);function w(){}e.RF=E},function(t,e,i){var r=i(28),n=window.hive;void 0===n&&(n=window.hive={}),void 0===n.snapshots&&(n.snapshots={}),n.snapshots.Traffic=function(t){this.reqN=null,this.respFallbackN=null,this.respFallbackErrN=null,this.respP2pN=null,this.reqOtherN=null,this.respFallbackOtherN=null,this.respFallbackOthertErrN=null,this.srcReqN=null,this.srcRespN=null,this.srcRespErrN=null,this.srcReqQt=null,this.srcRespQt=null,this.srcOverQt=null,this.srcOtherReqN=null,this.srcOtherRespN=null,this.srcOtherRespErrN=null,this.srcOtherReqQt=null,this.srcOtherRespQt=null,this.srcOtherOverQt=null,this.p2pSubReqN=null,this.p2pSubRespN=null,this.p2pSubRespPartN=null,this.p2pSubRespErrN=null,this.p2pSubRespExpN=null,this.p2pSubReqQt=null,this.p2pSubRespQt=null,this.p2pDirectQt=null,this.p2pRelayQt=null,this.p2pNatQt=null,this.p2pUdpbQt=null,this.fallAgentRespN=null,this.fallAgentPredHitN=null,this.fallAgentFailedRespN=null,this.fallAgentPredMissN=null,this.fallAgentPredPartialHitN=null,this.fallAgenTrafficSuccessQt=null,this.fallAgenTrafficFailureQt=null,this.p2pAgentPredHitN=null,this.p2pAgentPredMissN=null,this.p2pAgentPredPartialHitN=null,this.p2pAgenTrafficSuccessQt=null,this.p2pAgenTrafficFailureQt=null,this.respP2pOtherN=null,this.lCacheRespN=null,this.lCacheRespQt=null,this.p2pOutSiteLowPrio=null,t&&(void 0!==t.reqN&&null!==t.reqN&&(this.reqN=t.reqN),void 0!==t.respFallbackN&&null!==t.respFallbackN&&(this.respFallbackN=t.respFallbackN),void 0!==t.respFallbackErrN&&null!==t.respFallbackErrN&&(this.respFallbackErrN=t.respFallbackErrN),void 0!==t.respP2pN&&null!==t.respP2pN&&(this.respP2pN=t.respP2pN),void 0!==t.reqOtherN&&null!==t.reqOtherN&&(this.reqOtherN=t.reqOtherN),void 0!==t.respFallbackOtherN&&null!==t.respFallbackOtherN&&(this.respFallbackOtherN=t.respFallbackOtherN),void 0!==t.respFallbackOthertErrN&&null!==t.respFallbackOthertErrN&&(this.respFallbackOthertErrN=t.respFallbackOthertErrN),void 0!==t.srcReqN&&null!==t.srcReqN&&(this.srcReqN=t.srcReqN),void 0!==t.srcRespN&&null!==t.srcRespN&&(this.srcRespN=t.srcRespN),void 0!==t.srcRespErrN&&null!==t.srcRespErrN&&(this.srcRespErrN=t.srcRespErrN),void 0!==t.srcReqQt&&null!==t.srcReqQt&&(this.srcReqQt=t.srcReqQt),void 0!==t.srcRespQt&&null!==t.srcRespQt&&(this.srcRespQt=t.srcRespQt),void 0!==t.srcOverQt&&null!==t.srcOverQt&&(this.srcOverQt=t.srcOverQt),void 0!==t.srcOtherReqN&&null!==t.srcOtherReqN&&(this.srcOtherReqN=t.srcOtherReqN),void 0!==t.srcOtherRespN&&null!==t.srcOtherRespN&&(this.srcOtherRespN=t.srcOtherRespN),void 0!==t.srcOtherRespErrN&&null!==t.srcOtherRespErrN&&(this.srcOtherRespErrN=t.srcOtherRespErrN),void 0!==t.srcOtherReqQt&&null!==t.srcOtherReqQt&&(this.srcOtherReqQt=t.srcOtherReqQt),void 0!==t.srcOtherRespQt&&null!==t.srcOtherRespQt&&(this.srcOtherRespQt=t.srcOtherRespQt),void 0!==t.srcOtherOverQt&&null!==t.srcOtherOverQt&&(this.srcOtherOverQt=t.srcOtherOverQt),void 0!==t.p2pSubReqN&&null!==t.p2pSubReqN&&(this.p2pSubReqN=t.p2pSubReqN),void 0!==t.p2pSubRespN&&null!==t.p2pSubRespN&&(this.p2pSubRespN=t.p2pSubRespN),void 0!==t.p2pSubRespPartN&&null!==t.p2pSubRespPartN&&(this.p2pSubRespPartN=t.p2pSubRespPartN),void 0!==t.p2pSubRespErrN&&null!==t.p2pSubRespErrN&&(this.p2pSubRespErrN=t.p2pSubRespErrN),void 0!==t.p2pSubRespExpN&&null!==t.p2pSubRespExpN&&(this.p2pSubRespExpN=t.p2pSubRespExpN),void 0!==t.p2pSubReqQt&&null!==t.p2pSubReqQt&&(this.p2pSubReqQt=t.p2pSubReqQt),void 0!==t.p2pSubRespQt&&null!==t.p2pSubRespQt&&(this.p2pSubRespQt=t.p2pSubRespQt),void 0!==t.p2pDirectQt&&null!==t.p2pDirectQt&&(this.p2pDirectQt=t.p2pDirectQt),void 0!==t.p2pRelayQt&&null!==t.p2pRelayQt&&(this.p2pRelayQt=t.p2pRelayQt),void 0!==t.p2pNatQt&&null!==t.p2pNatQt&&(this.p2pNatQt=t.p2pNatQt),void 0!==t.p2pUdpbQt&&null!==t.p2pUdpbQt&&(this.p2pUdpbQt=t.p2pUdpbQt),void 0!==t.fallAgentRespN&&null!==t.fallAgentRespN&&(this.fallAgentRespN=t.fallAgentRespN),void 0!==t.fallAgentPredHitN&&null!==t.fallAgentPredHitN&&(this.fallAgentPredHitN=t.fallAgentPredHitN),void 0!==t.fallAgentFailedRespN&&null!==t.fallAgentFailedRespN&&(this.fallAgentFailedRespN=t.fallAgentFailedRespN),void 0!==t.fallAgentPredMissN&&null!==t.fallAgentPredMissN&&(this.fallAgentPredMissN=t.fallAgentPredMissN),void 0!==t.fallAgentPredPartialHitN&&null!==t.fallAgentPredPartialHitN&&(this.fallAgentPredPartialHitN=t.fallAgentPredPartialHitN),void 0!==t.fallAgenTrafficSuccessQt&&null!==t.fallAgenTrafficSuccessQt&&(this.fallAgenTrafficSuccessQt=t.fallAgenTrafficSuccessQt),void 0!==t.fallAgenTrafficFailureQt&&null!==t.fallAgenTrafficFailureQt&&(this.fallAgenTrafficFailureQt=t.fallAgenTrafficFailureQt),void 0!==t.p2pAgentPredHitN&&null!==t.p2pAgentPredHitN&&(this.p2pAgentPredHitN=t.p2pAgentPredHitN),void 0!==t.p2pAgentPredMissN&&null!==t.p2pAgentPredMissN&&(this.p2pAgentPredMissN=t.p2pAgentPredMissN),void 0!==t.p2pAgentPredPartialHitN&&null!==t.p2pAgentPredPartialHitN&&(this.p2pAgentPredPartialHitN=t.p2pAgentPredPartialHitN),void 0!==t.p2pAgenTrafficSuccessQt&&null!==t.p2pAgenTrafficSuccessQt&&(this.p2pAgenTrafficSuccessQt=t.p2pAgenTrafficSuccessQt),void 0!==t.p2pAgenTrafficFailureQt&&null!==t.p2pAgenTrafficFailureQt&&(this.p2pAgenTrafficFailureQt=t.p2pAgenTrafficFailureQt),void 0!==t.respP2pOtherN&&null!==t.respP2pOtherN&&(this.respP2pOtherN=t.respP2pOtherN),void 0!==t.lCacheRespN&&null!==t.lCacheRespN&&(this.lCacheRespN=t.lCacheRespN),void 0!==t.lCacheRespQt&&null!==t.lCacheRespQt&&(this.lCacheRespQt=t.lCacheRespQt),void 0!==t.p2pOutSiteLowPrio&&null!==t.p2pOutSiteLowPrio&&(this.p2pOutSiteLowPrio=t.p2pOutSiteLowPrio))},n.snapshots.Traffic.prototype={},n.snapshots.Traffic.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I32?this.reqN=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.DOUBLE?this.respFallbackN=t.pb().value:t.Bw(i);break;case 3:i==r.Type.I32?this.respFallbackErrN=t.Vw().value:t.Bw(i);break;case 4:i==r.Type.DOUBLE?this.respP2pN=t.pb().value:t.Bw(i);break;case 5:i==r.Type.I32?this.reqOtherN=t.Vw().value:t.Bw(i);break;case 6:i==r.Type.I32?this.respFallbackOtherN=t.Vw().value:t.Bw(i);break;case 7:i==r.Type.I32?this.respFallbackOthertErrN=t.Vw().value:t.Bw(i);break;case 8:i==r.Type.I32?this.srcReqN=t.Vw().value:t.Bw(i);break;case 9:i==r.Type.I32?this.srcRespN=t.Vw().value:t.Bw(i);break;case 10:i==r.Type.I32?this.srcRespErrN=t.Vw().value:t.Bw(i);break;case 11:i==r.Type.I64?this.srcReqQt=t.Eb().value:t.Bw(i);break;case 12:i==r.Type.I64?this.srcRespQt=t.Eb().value:t.Bw(i);break;case 13:i==r.Type.I64?this.srcOverQt=t.Eb().value:t.Bw(i);break;case 14:i==r.Type.I32?this.srcOtherReqN=t.Vw().value:t.Bw(i);break;case 15:i==r.Type.I32?this.srcOtherRespN=t.Vw().value:t.Bw(i);break;case 16:i==r.Type.I32?this.srcOtherRespErrN=t.Vw().value:t.Bw(i);break;case 17:i==r.Type.I64?this.srcOtherReqQt=t.Eb().value:t.Bw(i);break;case 18:i==r.Type.I64?this.srcOtherRespQt=t.Eb().value:t.Bw(i);break;case 19:i==r.Type.I64?this.srcOtherOverQt=t.Eb().value:t.Bw(i);break;case 20:i==r.Type.I32?this.p2pSubReqN=t.Vw().value:t.Bw(i);break;case 21:i==r.Type.I32?this.p2pSubRespN=t.Vw().value:t.Bw(i);break;case 22:i==r.Type.DOUBLE?this.p2pSubRespPartN=t.pb().value:t.Bw(i);break;case 23:i==r.Type.DOUBLE?this.p2pSubRespErrN=t.pb().value:t.Bw(i);break;case 24:i==r.Type.I32?this.p2pSubRespExpN=t.Vw().value:t.Bw(i);break;case 25:i==r.Type.I64?this.p2pSubReqQt=t.Eb().value:t.Bw(i);break;case 26:i==r.Type.I64?this.p2pSubRespQt=t.Eb().value:t.Bw(i);break;case 27:i==r.Type.I64?this.p2pDirectQt=t.Eb().value:t.Bw(i);break;case 28:i==r.Type.I64?this.p2pRelayQt=t.Eb().value:t.Bw(i);break;case 29:i==r.Type.I64?this.p2pNatQt=t.Eb().value:t.Bw(i);break;case 30:i==r.Type.I64?this.p2pUdpbQt=t.Eb().value:t.Bw(i);break;case 31:i==r.Type.I32?this.fallAgentRespN=t.Vw().value:t.Bw(i);break;case 32:i==r.Type.I32?this.fallAgentPredHitN=t.Vw().value:t.Bw(i);break;case 33:i==r.Type.I32?this.fallAgentFailedRespN=t.Vw().value:t.Bw(i);break;case 34:i==r.Type.I32?this.fallAgentPredMissN=t.Vw().value:t.Bw(i);break;case 35:i==r.Type.I32?this.fallAgentPredPartialHitN=t.Vw().value:t.Bw(i);break;case 36:i==r.Type.I64?this.fallAgenTrafficSuccessQt=t.Eb().value:t.Bw(i);break;case 37:i==r.Type.I64?this.fallAgenTrafficFailureQt=t.Eb().value:t.Bw(i);break;case 38:i==r.Type.I32?this.p2pAgentPredHitN=t.Vw().value:t.Bw(i);break;case 39:i==r.Type.I32?this.p2pAgentPredMissN=t.Vw().value:t.Bw(i);break;case 40:i==r.Type.I32?this.p2pAgentPredPartialHitN=t.Vw().value:t.Bw(i);break;case 41:i==r.Type.I64?this.p2pAgenTrafficSuccessQt=t.Eb().value:t.Bw(i);break;case 42:i==r.Type.I64?this.p2pAgenTrafficFailureQt=t.Eb().value:t.Bw(i);break;case 43:i==r.Type.I32?this.respP2pOtherN=t.Vw().value:t.Bw(i);break;case 44:i==r.Type.I32?this.lCacheRespN=t.Vw().value:t.Bw(i);break;case 45:i==r.Type.I64?this.lCacheRespQt=t.Eb().value:t.Bw(i);break;case 46:i==r.Type.I64?this.p2pOutSiteLowPrio=t.Eb().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.Traffic.prototype.write=function(t){t.Ww("Traffic"),null!==this.reqN&&void 0!==this.reqN&&(t.Yw("reqN",r.Type.I32,1),t.Xw(this.reqN),t.$w()),null!==this.respFallbackN&&void 0!==this.respFallbackN&&(t.Yw("respFallbackN",r.Type.DOUBLE,2),t.Kg(this.respFallbackN),t.$w()),null!==this.respFallbackErrN&&void 0!==this.respFallbackErrN&&(t.Yw("respFallbackErrN",r.Type.I32,3),t.Xw(this.respFallbackErrN),t.$w()),null!==this.respP2pN&&void 0!==this.respP2pN&&(t.Yw("respP2pN",r.Type.DOUBLE,4),t.Kg(this.respP2pN),t.$w()),null!==this.reqOtherN&&void 0!==this.reqOtherN&&(t.Yw("reqOtherN",r.Type.I32,5),t.Xw(this.reqOtherN),t.$w()),null!==this.respFallbackOtherN&&void 0!==this.respFallbackOtherN&&(t.Yw("respFallbackOtherN",r.Type.I32,6),t.Xw(this.respFallbackOtherN),t.$w()),null!==this.respFallbackOthertErrN&&void 0!==this.respFallbackOthertErrN&&(t.Yw("respFallbackOthertErrN",r.Type.I32,7),t.Xw(this.respFallbackOthertErrN),t.$w()),null!==this.srcReqN&&void 0!==this.srcReqN&&(t.Yw("srcReqN",r.Type.I32,8),t.Xw(this.srcReqN),t.$w()),null!==this.srcRespN&&void 0!==this.srcRespN&&(t.Yw("srcRespN",r.Type.I32,9),t.Xw(this.srcRespN),t.$w()),null!==this.srcRespErrN&&void 0!==this.srcRespErrN&&(t.Yw("srcRespErrN",r.Type.I32,10),t.Xw(this.srcRespErrN),t.$w()),null!==this.srcReqQt&&void 0!==this.srcReqQt&&(t.Yw("srcReqQt",r.Type.I64,11),t.Yg(this.srcReqQt),t.$w()),null!==this.srcRespQt&&void 0!==this.srcRespQt&&(t.Yw("srcRespQt",r.Type.I64,12),t.Yg(this.srcRespQt),t.$w()),null!==this.srcOverQt&&void 0!==this.srcOverQt&&(t.Yw("srcOverQt",r.Type.I64,13),t.Yg(this.srcOverQt),t.$w()),null!==this.srcOtherReqN&&void 0!==this.srcOtherReqN&&(t.Yw("srcOtherReqN",r.Type.I32,14),t.Xw(this.srcOtherReqN),t.$w()),null!==this.srcOtherRespN&&void 0!==this.srcOtherRespN&&(t.Yw("srcOtherRespN",r.Type.I32,15),t.Xw(this.srcOtherRespN),t.$w()),null!==this.srcOtherRespErrN&&void 0!==this.srcOtherRespErrN&&(t.Yw("srcOtherRespErrN",r.Type.I32,16),t.Xw(this.srcOtherRespErrN),t.$w()),null!==this.srcOtherReqQt&&void 0!==this.srcOtherReqQt&&(t.Yw("srcOtherReqQt",r.Type.I64,17),t.Yg(this.srcOtherReqQt),t.$w()),null!==this.srcOtherRespQt&&void 0!==this.srcOtherRespQt&&(t.Yw("srcOtherRespQt",r.Type.I64,18),t.Yg(this.srcOtherRespQt),t.$w()),null!==this.srcOtherOverQt&&void 0!==this.srcOtherOverQt&&(t.Yw("srcOtherOverQt",r.Type.I64,19),t.Yg(this.srcOtherOverQt),t.$w()),null!==this.p2pSubReqN&&void 0!==this.p2pSubReqN&&(t.Yw("p2pSubReqN",r.Type.I32,20),t.Xw(this.p2pSubReqN),t.$w()),null!==this.p2pSubRespN&&void 0!==this.p2pSubRespN&&(t.Yw("p2pSubRespN",r.Type.I32,21),t.Xw(this.p2pSubRespN),t.$w()),null!==this.p2pSubRespPartN&&void 0!==this.p2pSubRespPartN&&(t.Yw("p2pSubRespPartN",r.Type.DOUBLE,22),t.Kg(this.p2pSubRespPartN),t.$w()),null!==this.p2pSubRespErrN&&void 0!==this.p2pSubRespErrN&&(t.Yw("p2pSubRespErrN",r.Type.DOUBLE,23),t.Kg(this.p2pSubRespErrN),t.$w()),null!==this.p2pSubRespExpN&&void 0!==this.p2pSubRespExpN&&(t.Yw("p2pSubRespExpN",r.Type.I32,24),t.Xw(this.p2pSubRespExpN),t.$w()),null!==this.p2pSubReqQt&&void 0!==this.p2pSubReqQt&&(t.Yw("p2pSubReqQt",r.Type.I64,25),t.Yg(this.p2pSubReqQt),t.$w()),null!==this.p2pSubRespQt&&void 0!==this.p2pSubRespQt&&(t.Yw("p2pSubRespQt",r.Type.I64,26),t.Yg(this.p2pSubRespQt),t.$w()),null!==this.p2pDirectQt&&void 0!==this.p2pDirectQt&&(t.Yw("p2pDirectQt",r.Type.I64,27),t.Yg(this.p2pDirectQt),t.$w()),null!==this.p2pRelayQt&&void 0!==this.p2pRelayQt&&(t.Yw("p2pRelayQt",r.Type.I64,28),t.Yg(this.p2pRelayQt),t.$w()),null!==this.p2pNatQt&&void 0!==this.p2pNatQt&&(t.Yw("p2pNatQt",r.Type.I64,29),t.Yg(this.p2pNatQt),t.$w()),null!==this.p2pUdpbQt&&void 0!==this.p2pUdpbQt&&(t.Yw("p2pUdpbQt",r.Type.I64,30),t.Yg(this.p2pUdpbQt),t.$w()),null!==this.fallAgentRespN&&void 0!==this.fallAgentRespN&&(t.Yw("fallAgentRespN",r.Type.I32,31),t.Xw(this.fallAgentRespN),t.$w()),null!==this.fallAgentPredHitN&&void 0!==this.fallAgentPredHitN&&(t.Yw("fallAgentPredHitN",r.Type.I32,32),t.Xw(this.fallAgentPredHitN),t.$w()),null!==this.fallAgentFailedRespN&&void 0!==this.fallAgentFailedRespN&&(t.Yw("fallAgentFailedRespN",r.Type.I32,33),t.Xw(this.fallAgentFailedRespN),t.$w()),null!==this.fallAgentPredMissN&&void 0!==this.fallAgentPredMissN&&(t.Yw("fallAgentPredMissN",r.Type.I32,34),t.Xw(this.fallAgentPredMissN),t.$w()),null!==this.fallAgentPredPartialHitN&&void 0!==this.fallAgentPredPartialHitN&&(t.Yw("fallAgentPredPartialHitN",r.Type.I32,35),t.Xw(this.fallAgentPredPartialHitN),t.$w()),null!==this.fallAgenTrafficSuccessQt&&void 0!==this.fallAgenTrafficSuccessQt&&(t.Yw("fallAgenTrafficSuccessQt",r.Type.I64,36),t.Yg(this.fallAgenTrafficSuccessQt),t.$w()),null!==this.fallAgenTrafficFailureQt&&void 0!==this.fallAgenTrafficFailureQt&&(t.Yw("fallAgenTrafficFailureQt",r.Type.I64,37),t.Yg(this.fallAgenTrafficFailureQt),t.$w()),null!==this.p2pAgentPredHitN&&void 0!==this.p2pAgentPredHitN&&(t.Yw("p2pAgentPredHitN",r.Type.I32,38),t.Xw(this.p2pAgentPredHitN),t.$w()),null!==this.p2pAgentPredMissN&&void 0!==this.p2pAgentPredMissN&&(t.Yw("p2pAgentPredMissN",r.Type.I32,39),t.Xw(this.p2pAgentPredMissN),t.$w()),null!==this.p2pAgentPredPartialHitN&&void 0!==this.p2pAgentPredPartialHitN&&(t.Yw("p2pAgentPredPartialHitN",r.Type.I32,40),t.Xw(this.p2pAgentPredPartialHitN),t.$w()),null!==this.p2pAgenTrafficSuccessQt&&void 0!==this.p2pAgenTrafficSuccessQt&&(t.Yw("p2pAgenTrafficSuccessQt",r.Type.I64,41),t.Yg(this.p2pAgenTrafficSuccessQt),t.$w()),null!==this.p2pAgenTrafficFailureQt&&void 0!==this.p2pAgenTrafficFailureQt&&(t.Yw("p2pAgenTrafficFailureQt",r.Type.I64,42),t.Yg(this.p2pAgenTrafficFailureQt),t.$w()),null!==this.respP2pOtherN&&void 0!==this.respP2pOtherN&&(t.Yw("respP2pOtherN",r.Type.I32,43),t.Xw(this.respP2pOtherN),t.$w()),null!==this.lCacheRespN&&void 0!==this.lCacheRespN&&(t.Yw("lCacheRespN",r.Type.I32,44),t.Xw(this.lCacheRespN),t.$w()),null!==this.lCacheRespQt&&void 0!==this.lCacheRespQt&&(t.Yw("lCacheRespQt",r.Type.I64,45),t.Yg(this.lCacheRespQt),t.$w()),null!==this.p2pOutSiteLowPrio&&void 0!==this.p2pOutSiteLowPrio&&(t.Yw("p2pOutSiteLowPrio",r.Type.I64,46),t.Yg(this.p2pOutSiteLowPrio),t.$w()),t.Jw(),t.zw()},n.snapshots.Metrics=function(t){this.upBW=null,this.downBW=null,this.memN=null,this.prtInN=null,this.prtOutN=null,this.initVideoBufQt=null,this.videoAvgBufQt=null,this.videoBufQt=null,this.videoBufN=null,this.initAudioBufQt=null,this.audioAvgBufQt=null,this.audioBufQt=null,this.audioBufN=null,this.bitrateUpN=null,this.bitrateDwnN=null,this.delay=null,this.delayEnforcement=null,this.lookupReqEstablished=null,this.lookupReqAccept=null,this.fallbackAvgTp=null,this.srcThroughput=null,this.diskReadTimeout=null,this.diskReadRate=null,this.diskStoreRate=null,this.diskRemoveRate=null,this.diskCacheSize=null,this.clientBufferMs=null,this.lookupTotal=null,this.lookupNotFound=null,this.lookupFailed=null,this.lookupLatency=null,this.trackerFailed=null,this.trackerLatency=null,this.snapshotFailed=null,this.snapshotLatency=null,this.uG=null,t&&(void 0!==t.upBW&&null!==t.upBW&&(this.upBW=t.upBW),void 0!==t.downBW&&null!==t.downBW&&(this.downBW=t.downBW),void 0!==t.memN&&null!==t.memN&&(this.memN=t.memN),void 0!==t.prtInN&&null!==t.prtInN&&(this.prtInN=t.prtInN),void 0!==t.prtOutN&&null!==t.prtOutN&&(this.prtOutN=t.prtOutN),void 0!==t.initVideoBufQt&&null!==t.initVideoBufQt&&(this.initVideoBufQt=t.initVideoBufQt),void 0!==t.videoAvgBufQt&&null!==t.videoAvgBufQt&&(this.videoAvgBufQt=t.videoAvgBufQt),void 0!==t.videoBufQt&&null!==t.videoBufQt&&(this.videoBufQt=t.videoBufQt),void 0!==t.videoBufN&&null!==t.videoBufN&&(this.videoBufN=t.videoBufN),void 0!==t.initAudioBufQt&&null!==t.initAudioBufQt&&(this.initAudioBufQt=t.initAudioBufQt),void 0!==t.audioAvgBufQt&&null!==t.audioAvgBufQt&&(this.audioAvgBufQt=t.audioAvgBufQt),void 0!==t.audioBufQt&&null!==t.audioBufQt&&(this.audioBufQt=t.audioBufQt),void 0!==t.audioBufN&&null!==t.audioBufN&&(this.audioBufN=t.audioBufN),void 0!==t.bitrateUpN&&null!==t.bitrateUpN&&(this.bitrateUpN=t.bitrateUpN),void 0!==t.bitrateDwnN&&null!==t.bitrateDwnN&&(this.bitrateDwnN=t.bitrateDwnN),void 0!==t.delay&&null!==t.delay&&(this.delay=t.delay),void 0!==t.delayEnforcement&&null!==t.delayEnforcement&&(this.delayEnforcement=t.delayEnforcement),void 0!==t.lookupReqEstablished&&null!==t.lookupReqEstablished&&(this.lookupReqEstablished=t.lookupReqEstablished),void 0!==t.lookupReqAccept&&null!==t.lookupReqAccept&&(this.lookupReqAccept=t.lookupReqAccept),void 0!==t.fallbackAvgTp&&null!==t.fallbackAvgTp&&(this.fallbackAvgTp=t.fallbackAvgTp),void 0!==t.srcThroughput&&null!==t.srcThroughput&&(this.srcThroughput=t.srcThroughput),void 0!==t.diskReadTimeout&&null!==t.diskReadTimeout&&(this.diskReadTimeout=t.diskReadTimeout),void 0!==t.diskReadRate&&null!==t.diskReadRate&&(this.diskReadRate=t.diskReadRate),void 0!==t.diskStoreRate&&null!==t.diskStoreRate&&(this.diskStoreRate=t.diskStoreRate),void 0!==t.diskRemoveRate&&null!==t.diskRemoveRate&&(this.diskRemoveRate=t.diskRemoveRate),void 0!==t.diskCacheSize&&null!==t.diskCacheSize&&(this.diskCacheSize=t.diskCacheSize),void 0!==t.clientBufferMs&&null!==t.clientBufferMs&&(this.clientBufferMs=t.clientBufferMs),void 0!==t.lookupTotal&&null!==t.lookupTotal&&(this.lookupTotal=t.lookupTotal),void 0!==t.lookupNotFound&&null!==t.lookupNotFound&&(this.lookupNotFound=t.lookupNotFound),void 0!==t.lookupFailed&&null!==t.lookupFailed&&(this.lookupFailed=t.lookupFailed),void 0!==t.lookupLatency&&null!==t.lookupLatency&&(this.lookupLatency=t.lookupLatency),void 0!==t.trackerFailed&&null!==t.trackerFailed&&(this.trackerFailed=t.trackerFailed),void 0!==t.trackerLatency&&null!==t.trackerLatency&&(this.trackerLatency=t.trackerLatency),void 0!==t.snapshotFailed&&null!==t.snapshotFailed&&(this.snapshotFailed=t.snapshotFailed),void 0!==t.snapshotLatency&&null!==t.snapshotLatency&&(this.snapshotLatency=t.snapshotLatency),void 0!==t.uG&&null!==t.uG&&(this.uG=t.uG))},n.snapshots.Metrics.prototype={},n.snapshots.Metrics.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I32?this.upBW=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.I32?this.downBW=t.Vw().value:t.Bw(i);break;case 3:i==r.Type.I32?this.memN=t.Vw().value:t.Bw(i);break;case 4:i==r.Type.I32?this.prtInN=t.Vw().value:t.Bw(i);break;case 5:i==r.Type.I32?this.prtOutN=t.Vw().value:t.Bw(i);break;case 6:i==r.Type.I64?this.initVideoBufQt=t.Eb().value:t.Bw(i);break;case 7:i==r.Type.DOUBLE?this.videoAvgBufQt=t.pb().value:t.Bw(i);break;case 8:i==r.Type.I64?this.videoBufQt=t.Eb().value:t.Bw(i);break;case 9:i==r.Type.I32?this.videoBufN=t.Vw().value:t.Bw(i);break;case 10:i==r.Type.I32?this.initAudioBufQt=t.Vw().value:t.Bw(i);break;case 11:i==r.Type.DOUBLE?this.audioAvgBufQt=t.pb().value:t.Bw(i);break;case 12:i==r.Type.I64?this.audioBufQt=t.Eb().value:t.Bw(i);break;case 13:i==r.Type.I32?this.audioBufN=t.Vw().value:t.Bw(i);break;case 14:i==r.Type.I32?this.bitrateUpN=t.Vw().value:t.Bw(i);break;case 15:i==r.Type.I32?this.bitrateDwnN=t.Vw().value:t.Bw(i);break;case 16:i==r.Type.I32?this.delay=t.Vw().value:t.Bw(i);break;case 17:i==r.Type.I32?this.delayEnforcement=t.Vw().value:t.Bw(i);break;case 18:i==r.Type.I32?this.lookupReqEstablished=t.Vw().value:t.Bw(i);break;case 19:i==r.Type.I32?this.lookupReqAccept=t.Vw().value:t.Bw(i);break;case 20:i==r.Type.DOUBLE?this.fallbackAvgTp=t.pb().value:t.Bw(i);break;case 21:i==r.Type.DOUBLE?this.srcThroughput=t.pb().value:t.Bw(i);break;case 22:i==r.Type.I32?this.diskReadTimeout=t.Vw().value:t.Bw(i);break;case 23:i==r.Type.DOUBLE?this.diskReadRate=t.pb().value:t.Bw(i);break;case 24:i==r.Type.DOUBLE?this.diskStoreRate=t.pb().value:t.Bw(i);break;case 25:i==r.Type.DOUBLE?this.diskRemoveRate=t.pb().value:t.Bw(i);break;case 26:i==r.Type.I64?this.diskCacheSize=t.Eb().value:t.Bw(i);break;case 27:i==r.Type.I32?this.clientBufferMs=t.Vw().value:t.Bw(i);break;case 28:i==r.Type.I32?this.lookupTotal=t.Vw().value:t.Bw(i);break;case 29:i==r.Type.I32?this.lookupNotFound=t.Vw().value:t.Bw(i);break;case 30:i==r.Type.I32?this.lookupFailed=t.Vw().value:t.Bw(i);break;case 31:i==r.Type.I32?this.lookupLatency=t.Vw().value:t.Bw(i);break;case 32:i==r.Type.I32?this.trackerFailed=t.Vw().value:t.Bw(i);break;case 33:i==r.Type.I32?this.trackerLatency=t.Vw().value:t.Bw(i);break;case 34:i==r.Type.I32?this.snapshotFailed=t.Vw().value:t.Bw(i);break;case 35:i==r.Type.I32?this.snapshotLatency=t.Vw().value:t.Bw(i);break;case 36:i==r.Type.I32?this.uG=t.Vw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.Metrics.prototype.write=function(t){t.Ww("Metrics"),null!==this.upBW&&void 0!==this.upBW&&(t.Yw("upBW",r.Type.I32,1),t.Xw(this.upBW),t.$w()),null!==this.downBW&&void 0!==this.downBW&&(t.Yw("downBW",r.Type.I32,2),t.Xw(this.downBW),t.$w()),null!==this.memN&&void 0!==this.memN&&(t.Yw("memN",r.Type.I32,3),t.Xw(this.memN),t.$w()),null!==this.prtInN&&void 0!==this.prtInN&&(t.Yw("prtInN",r.Type.I32,4),t.Xw(this.prtInN),t.$w()),null!==this.prtOutN&&void 0!==this.prtOutN&&(t.Yw("prtOutN",r.Type.I32,5),t.Xw(this.prtOutN),t.$w()),null!==this.initVideoBufQt&&void 0!==this.initVideoBufQt&&(t.Yw("initVideoBufQt",r.Type.I64,6),t.Yg(this.initVideoBufQt),t.$w()),null!==this.videoAvgBufQt&&void 0!==this.videoAvgBufQt&&(t.Yw("videoAvgBufQt",r.Type.DOUBLE,7),t.Kg(this.videoAvgBufQt),t.$w()),null!==this.videoBufQt&&void 0!==this.videoBufQt&&(t.Yw("videoBufQt",r.Type.I64,8),t.Yg(this.videoBufQt),t.$w()),null!==this.videoBufN&&void 0!==this.videoBufN&&(t.Yw("videoBufN",r.Type.I32,9),t.Xw(this.videoBufN),t.$w()),null!==this.initAudioBufQt&&void 0!==this.initAudioBufQt&&(t.Yw("initAudioBufQt",r.Type.I32,10),t.Xw(this.initAudioBufQt),t.$w()),null!==this.audioAvgBufQt&&void 0!==this.audioAvgBufQt&&(t.Yw("audioAvgBufQt",r.Type.DOUBLE,11),t.Kg(this.audioAvgBufQt),t.$w()),null!==this.audioBufQt&&void 0!==this.audioBufQt&&(t.Yw("audioBufQt",r.Type.I64,12),t.Yg(this.audioBufQt),t.$w()),null!==this.audioBufN&&void 0!==this.audioBufN&&(t.Yw("audioBufN",r.Type.I32,13),t.Xw(this.audioBufN),t.$w()),null!==this.bitrateUpN&&void 0!==this.bitrateUpN&&(t.Yw("bitrateUpN",r.Type.I32,14),t.Xw(this.bitrateUpN),t.$w()),null!==this.bitrateDwnN&&void 0!==this.bitrateDwnN&&(t.Yw("bitrateDwnN",r.Type.I32,15),t.Xw(this.bitrateDwnN),t.$w()),null!==this.delay&&void 0!==this.delay&&(t.Yw("delay",r.Type.I32,16),t.Xw(this.delay),t.$w()),null!==this.delayEnforcement&&void 0!==this.delayEnforcement&&(t.Yw("delayEnforcement",r.Type.I32,17),t.Xw(this.delayEnforcement),t.$w()),null!==this.lookupReqEstablished&&void 0!==this.lookupReqEstablished&&(t.Yw("lookupReqEstablished",r.Type.I32,18),t.Xw(this.lookupReqEstablished),t.$w()),null!==this.lookupReqAccept&&void 0!==this.lookupReqAccept&&(t.Yw("lookupReqAccept",r.Type.I32,19),t.Xw(this.lookupReqAccept),t.$w()),null!==this.fallbackAvgTp&&void 0!==this.fallbackAvgTp&&(t.Yw("fallbackAvgTp",r.Type.DOUBLE,20),t.Kg(this.fallbackAvgTp),t.$w()),null!==this.srcThroughput&&void 0!==this.srcThroughput&&(t.Yw("srcThroughput",r.Type.DOUBLE,21),t.Kg(this.srcThroughput),t.$w()),null!==this.diskReadTimeout&&void 0!==this.diskReadTimeout&&(t.Yw("diskReadTimeout",r.Type.I32,22),t.Xw(this.diskReadTimeout),t.$w()),null!==this.diskReadRate&&void 0!==this.diskReadRate&&(t.Yw("diskReadRate",r.Type.DOUBLE,23),t.Kg(this.diskReadRate),t.$w()),null!==this.diskStoreRate&&void 0!==this.diskStoreRate&&(t.Yw("diskStoreRate",r.Type.DOUBLE,24),t.Kg(this.diskStoreRate),t.$w()),null!==this.diskRemoveRate&&void 0!==this.diskRemoveRate&&(t.Yw("diskRemoveRate",r.Type.DOUBLE,25),t.Kg(this.diskRemoveRate),t.$w()),null!==this.diskCacheSize&&void 0!==this.diskCacheSize&&(t.Yw("diskCacheSize",r.Type.I64,26),t.Yg(this.diskCacheSize),t.$w()),null!==this.clientBufferMs&&void 0!==this.clientBufferMs&&(t.Yw("clientBufferMs",r.Type.I32,27),t.Xw(this.clientBufferMs),t.$w()),null!==this.lookupTotal&&void 0!==this.lookupTotal&&(t.Yw("lookupTotal",r.Type.I32,28),t.Xw(this.lookupTotal),t.$w()),null!==this.lookupNotFound&&void 0!==this.lookupNotFound&&(t.Yw("lookupNotFound",r.Type.I32,29),t.Xw(this.lookupNotFound),t.$w()),null!==this.lookupFailed&&void 0!==this.lookupFailed&&(t.Yw("lookupFailed",r.Type.I32,30),t.Xw(this.lookupFailed),t.$w()),null!==this.lookupLatency&&void 0!==this.lookupLatency&&(t.Yw("lookupLatency",r.Type.I32,31),t.Xw(this.lookupLatency),t.$w()),null!==this.trackerFailed&&void 0!==this.trackerFailed&&(t.Yw("trackerFailed",r.Type.I32,32),t.Xw(this.trackerFailed),t.$w()),null!==this.trackerLatency&&void 0!==this.trackerLatency&&(t.Yw("trackerLatency",r.Type.I32,33),t.Xw(this.trackerLatency),t.$w()),null!==this.snapshotFailed&&void 0!==this.snapshotFailed&&(t.Yw("snapshotFailed",r.Type.I32,34),t.Xw(this.snapshotFailed),t.$w()),null!==this.snapshotLatency&&void 0!==this.snapshotLatency&&(t.Yw("snapshotLatency",r.Type.I32,35),t.Xw(this.snapshotLatency),t.$w()),null!==this.uG&&void 0!==this.uG&&(t.Yw("sourceLatency",r.Type.I32,36),t.Xw(this.uG),t.$w()),t.Jw(),t.zw()},n.snapshots.PartnerTraffic=function(t){this.p2pSuccReq=null,this.p2pFailReq=null,this.p2pPartReq=null,this.p2pSuccReceived=null,this.p2pSuccReceivedLow=null,this.p2pFailReceived=null,this.p2pSuccResp=null,this.p2pFailResp=null,this.p2pPartResp=null,this.p2pSuccSent=null,this.p2pSuccSentLow=null,this.p2pFailSent=null,t&&(void 0!==t.p2pSuccReq&&null!==t.p2pSuccReq&&(this.p2pSuccReq=t.p2pSuccReq),void 0!==t.p2pFailReq&&null!==t.p2pFailReq&&(this.p2pFailReq=t.p2pFailReq),void 0!==t.p2pPartReq&&null!==t.p2pPartReq&&(this.p2pPartReq=t.p2pPartReq),void 0!==t.p2pSuccReceived&&null!==t.p2pSuccReceived&&(this.p2pSuccReceived=t.p2pSuccReceived),void 0!==t.p2pSuccReceivedLow&&null!==t.p2pSuccReceivedLow&&(this.p2pSuccReceivedLow=t.p2pSuccReceivedLow),void 0!==t.p2pFailReceived&&null!==t.p2pFailReceived&&(this.p2pFailReceived=t.p2pFailReceived),void 0!==t.p2pSuccResp&&null!==t.p2pSuccResp&&(this.p2pSuccResp=t.p2pSuccResp),void 0!==t.p2pFailResp&&null!==t.p2pFailResp&&(this.p2pFailResp=t.p2pFailResp),void 0!==t.p2pPartResp&&null!==t.p2pPartResp&&(this.p2pPartResp=t.p2pPartResp),void 0!==t.p2pSuccSent&&null!==t.p2pSuccSent&&(this.p2pSuccSent=t.p2pSuccSent),void 0!==t.p2pSuccSentLow&&null!==t.p2pSuccSentLow&&(this.p2pSuccSentLow=t.p2pSuccSentLow),void 0!==t.p2pFailSent&&null!==t.p2pFailSent&&(this.p2pFailSent=t.p2pFailSent))},n.snapshots.PartnerTraffic.prototype={},n.snapshots.PartnerTraffic.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I64?this.p2pSuccReq=t.Eb().value:t.Bw(i);break;case 2:i==r.Type.I64?this.p2pFailReq=t.Eb().value:t.Bw(i);break;case 3:i==r.Type.I64?this.p2pPartReq=t.Eb().value:t.Bw(i);break;case 4:i==r.Type.I64?this.p2pSuccReceived=t.Eb().value:t.Bw(i);break;case 5:i==r.Type.I64?this.p2pSuccReceivedLow=t.Eb().value:t.Bw(i);break;case 10:i==r.Type.I64?this.p2pFailReceived=t.Eb().value:t.Bw(i);break;case 6:i==r.Type.I64?this.p2pSuccResp=t.Eb().value:t.Bw(i);break;case 11:i==r.Type.I64?this.p2pFailResp=t.Eb().value:t.Bw(i);break;case 7:i==r.Type.I64?this.p2pPartResp=t.Eb().value:t.Bw(i);break;case 8:i==r.Type.I64?this.p2pSuccSent=t.Eb().value:t.Bw(i);break;case 9:i==r.Type.I64?this.p2pSuccSentLow=t.Eb().value:t.Bw(i);break;case 12:i==r.Type.I64?this.p2pFailSent=t.Eb().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.PartnerTraffic.prototype.write=function(t){t.Ww("PartnerTraffic"),null!==this.p2pSuccReq&&void 0!==this.p2pSuccReq&&(t.Yw("p2pSuccReq",r.Type.I64,1),t.Yg(this.p2pSuccReq),t.$w()),null!==this.p2pFailReq&&void 0!==this.p2pFailReq&&(t.Yw("p2pFailReq",r.Type.I64,2),t.Yg(this.p2pFailReq),t.$w()),null!==this.p2pPartReq&&void 0!==this.p2pPartReq&&(t.Yw("p2pPartReq",r.Type.I64,3),t.Yg(this.p2pPartReq),t.$w()),null!==this.p2pSuccReceived&&void 0!==this.p2pSuccReceived&&(t.Yw("p2pSuccReceived",r.Type.I64,4),t.Yg(this.p2pSuccReceived),t.$w()),null!==this.p2pSuccReceivedLow&&void 0!==this.p2pSuccReceivedLow&&(t.Yw("p2pSuccReceivedLow",r.Type.I64,5),t.Yg(this.p2pSuccReceivedLow),t.$w()),null!==this.p2pFailReceived&&void 0!==this.p2pFailReceived&&(t.Yw("p2pFailReceived",r.Type.I64,10),t.Yg(this.p2pFailReceived),t.$w()),null!==this.p2pSuccResp&&void 0!==this.p2pSuccResp&&(t.Yw("p2pSuccResp",r.Type.I64,6),t.Yg(this.p2pSuccResp),t.$w()),null!==this.p2pFailResp&&void 0!==this.p2pFailResp&&(t.Yw("p2pFailResp",r.Type.I64,11),t.Yg(this.p2pFailResp),t.$w()),null!==this.p2pPartResp&&void 0!==this.p2pPartResp&&(t.Yw("p2pPartResp",r.Type.I64,7),t.Yg(this.p2pPartResp),t.$w()),null!==this.p2pSuccSent&&void 0!==this.p2pSuccSent&&(t.Yw("p2pSuccSent",r.Type.I64,8),t.Yg(this.p2pSuccSent),t.$w()),null!==this.p2pSuccSentLow&&void 0!==this.p2pSuccSentLow&&(t.Yw("p2pSuccSentLow",r.Type.I64,9),t.Yg(this.p2pSuccSentLow),t.$w()),null!==this.p2pFailSent&&void 0!==this.p2pFailSent&&(t.Yw("p2pFailSent",r.Type.I64,12),t.Yg(this.p2pFailSent),t.$w()),t.Jw(),t.zw()},n.snapshots.PartnerMetrics=function(t){this.rateReceived=null,this.rateSent=null,this.handshakeDelay=null,t&&(void 0!==t.rateReceived&&null!==t.rateReceived&&(this.rateReceived=t.rateReceived),void 0!==t.rateSent&&null!==t.rateSent&&(this.rateSent=t.rateSent),void 0!==t.handshakeDelay&&null!==t.handshakeDelay&&(this.handshakeDelay=t.handshakeDelay))},n.snapshots.PartnerMetrics.prototype={},n.snapshots.PartnerMetrics.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.DOUBLE?this.rateReceived=t.pb().value:t.Bw(i);break;case 2:i==r.Type.DOUBLE?this.rateSent=t.pb().value:t.Bw(i);break;case 3:i==r.Type.I64?this.handshakeDelay=t.Eb().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.PartnerMetrics.prototype.write=function(t){t.Ww("PartnerMetrics"),null!==this.rateReceived&&void 0!==this.rateReceived&&(t.Yw("rateReceived",r.Type.DOUBLE,1),t.Kg(this.rateReceived),t.$w()),null!==this.rateSent&&void 0!==this.rateSent&&(t.Yw("rateSent",r.Type.DOUBLE,2),t.Kg(this.rateSent),t.$w()),null!==this.handshakeDelay&&void 0!==this.handshakeDelay&&(t.Yw("handshakeDelay",r.Type.I64,3),t.Yg(this.handshakeDelay),t.$w()),t.Jw(),t.zw()},n.snapshots.ConnectivityInfo=function(t){this.upBW=null,this.downBW=null,this.externalAs=null,this.internalAs=null,this.publicIp=null,this.privateIp=null,t&&(void 0!==t.upBW&&null!==t.upBW&&(this.upBW=t.upBW),void 0!==t.downBW&&null!==t.downBW&&(this.downBW=t.downBW),void 0!==t.externalAs&&null!==t.externalAs&&(this.externalAs=t.externalAs),void 0!==t.internalAs&&null!==t.internalAs&&(this.internalAs=t.internalAs),void 0!==t.publicIp&&null!==t.publicIp&&(this.publicIp=t.publicIp),void 0!==t.privateIp&&null!==t.privateIp&&(this.privateIp=t.privateIp))},n.snapshots.ConnectivityInfo.prototype={},n.snapshots.ConnectivityInfo.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I32?this.upBW=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.I32?this.downBW=t.Vw().value:t.Bw(i);break;case 3:i==r.Type.I32?this.externalAs=t.Vw().value:t.Bw(i);break;case 4:i==r.Type.I32?this.internalAs=t.Vw().value:t.Bw(i);break;case 5:i==r.Type.STRING?this.publicIp=t.xw().value:t.Bw(i);break;case 6:i==r.Type.STRING?this.privateIp=t.xw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.ConnectivityInfo.prototype.write=function(t){t.Ww("ConnectivityInfo"),null!==this.upBW&&void 0!==this.upBW&&(t.Yw("upBW",r.Type.I32,1),t.Xw(this.upBW),t.$w()),null!==this.downBW&&void 0!==this.downBW&&(t.Yw("downBW",r.Type.I32,2),t.Xw(this.downBW),t.$w()),null!==this.externalAs&&void 0!==this.externalAs&&(t.Yw("externalAs",r.Type.I32,3),t.Xw(this.externalAs),t.$w()),null!==this.internalAs&&void 0!==this.internalAs&&(t.Yw("internalAs",r.Type.I32,4),t.Xw(this.internalAs),t.$w()),null!==this.publicIp&&void 0!==this.publicIp&&(t.Yw("publicIp",r.Type.STRING,5),t.Kw(this.publicIp),t.$w()),null!==this.privateIp&&void 0!==this.privateIp&&(t.Yw("privateIp",r.Type.STRING,6),t.Kw(this.privateIp),t.$w()),t.Jw(),t.zw()},n.snapshots.Partner=function(t){this.connInfo=null,this.traffic=null,this.metrics=null,this.inPart=null,this.outPart=null,this.udp=null,t&&(void 0!==t.connInfo&&null!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.traffic&&null!==t.traffic&&(this.traffic=t.traffic),void 0!==t.metrics&&null!==t.metrics&&(this.metrics=t.metrics),void 0!==t.inPart&&null!==t.inPart&&(this.inPart=t.inPart),void 0!==t.outPart&&null!==t.outPart&&(this.outPart=t.outPart),void 0!==t.udp&&null!==t.udp&&(this.udp=t.udp))},n.snapshots.Partner.prototype={},n.snapshots.Partner.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.STRUCT?(this.connInfo=new n.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.Bw(i);break;case 2:i==r.Type.STRUCT?(this.traffic=new n.snapshots.PartnerTraffic,this.traffic.read(t)):t.Bw(i);break;case 3:i==r.Type.STRUCT?(this.metrics=new n.snapshots.PartnerMetrics,this.metrics.read(t)):t.Bw(i);break;case 4:i==r.Type.BOOL?this.inPart=t.cb().value:t.Bw(i);break;case 5:i==r.Type.BOOL?this.outPart=t.cb().value:t.Bw(i);break;case 6:i==r.Type.BOOL?this.udp=t.cb().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.Partner.prototype.write=function(t){t.Ww("Partner"),null!==this.connInfo&&void 0!==this.connInfo&&(t.Yw("connInfo",r.Type.STRUCT,1),this.connInfo.write(t),t.$w()),null!==this.traffic&&void 0!==this.traffic&&(t.Yw("traffic",r.Type.STRUCT,2),this.traffic.write(t),t.$w()),null!==this.metrics&&void 0!==this.metrics&&(t.Yw("metrics",r.Type.STRUCT,3),this.metrics.write(t),t.$w()),null!==this.inPart&&void 0!==this.inPart&&(t.Yw("inPart",r.Type.BOOL,4),t.qg(this.inPart),t.$w()),null!==this.outPart&&void 0!==this.outPart&&(t.Yw("outPart",r.Type.BOOL,5),t.qg(this.outPart),t.$w()),null!==this.udp&&void 0!==this.udp&&(t.Yw("udp",r.Type.BOOL,6),t.qg(this.udp),t.$w()),t.Jw(),t.zw()},n.snapshots.StreamInfo=function(t){this.url=null,this.streamType=null,this.streamProtocol=null,t&&(void 0!==t.url&&null!==t.url&&(this.url=t.url),void 0!==t.streamType&&null!==t.streamType&&(this.streamType=t.streamType),void 0!==t.streamProtocol&&null!==t.streamProtocol&&(this.streamProtocol=t.streamProtocol))},n.snapshots.StreamInfo.prototype={},n.snapshots.StreamInfo.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.STRING?this.url=t.xw().value:t.Bw(i);break;case 2:i==r.Type.I32?this.streamType=t.Vw().value:t.Bw(i);break;case 3:i==r.Type.I32?this.streamProtocol=t.Vw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.StreamInfo.prototype.write=function(t){t.Ww("StreamInfo"),null!==this.url&&void 0!==this.url&&(t.Yw("url",r.Type.STRING,1),t.Kw(this.url),t.$w()),null!==this.streamType&&void 0!==this.streamType&&(t.Yw("streamType",r.Type.I32,2),t.Xw(this.streamType),t.$w()),null!==this.streamProtocol&&void 0!==this.streamProtocol&&(t.Yw("streamProtocol",r.Type.I32,3),t.Xw(this.streamProtocol),t.$w()),t.Jw(),t.zw()},n.snapshots.ClientInfo=function(t){this.clientType=null,this.majorVersion=null,this.minorVersion=null,this.patchVersion=null,t&&(void 0!==t.clientType&&null!==t.clientType&&(this.clientType=t.clientType),void 0!==t.majorVersion&&null!==t.majorVersion&&(this.majorVersion=t.majorVersion),void 0!==t.minorVersion&&null!==t.minorVersion&&(this.minorVersion=t.minorVersion),void 0!==t.patchVersion&&null!==t.patchVersion&&(this.patchVersion=t.patchVersion))},n.snapshots.ClientInfo.prototype={},n.snapshots.ClientInfo.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I32?this.clientType=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.BYTE?this.majorVersion=t.lb().value:t.Bw(i);break;case 3:i==r.Type.BYTE?this.minorVersion=t.lb().value:t.Bw(i);break;case 4:i==r.Type.I16?this.patchVersion=t.vb().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.ClientInfo.prototype.write=function(t){t.Ww("ClientInfo"),null!==this.clientType&&void 0!==this.clientType&&(t.Yw("clientType",r.Type.I32,1),t.Xw(this.clientType),t.$w()),null!==this.majorVersion&&void 0!==this.majorVersion&&(t.Yw("majorVersion",r.Type.BYTE,2),t.Qg(this.majorVersion),t.$w()),null!==this.minorVersion&&void 0!==this.minorVersion&&(t.Yw("minorVersion",r.Type.BYTE,3),t.Qg(this.minorVersion),t.$w()),null!==this.patchVersion&&void 0!==this.patchVersion&&(t.Yw("patchVersion",r.Type.I16,4),t.Wg(this.patchVersion),t.$w()),t.Jw(),t.zw()},n.snapshots.AgentInfo=function(t){this.firstTierBitrates=null,this.secondTierBitrates=null,t&&(void 0!==t.firstTierBitrates&&null!==t.firstTierBitrates&&(this.firstTierBitrates=t.firstTierBitrates),void 0!==t.secondTierBitrates&&null!==t.secondTierBitrates&&(this.secondTierBitrates=t.secondTierBitrates))},n.snapshots.AgentInfo.prototype={},n.snapshots.AgentInfo.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:if(i==r.Type.SET){var o,s;this.firstTierBitrates=[],(s=t.ab()).ob,o=s.size;for(var a=0;a<o;++a){var u;u=t.Vw().value,this.firstTierBitrates.push(u)}t.fb()}else t.Bw(i);break;case 2:if(i==r.Type.SET){var h,c;this.secondTierBitrates=[],(c=t.ab()).ob,h=c.size;for(var l=0;l<h;++l){var p;p=t.Vw().value,this.secondTierBitrates.push(p)}t.fb()}else t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.AgentInfo.prototype.write=function(t){if(t.Ww("AgentInfo"),null!==this.firstTierBitrates&&void 0!==this.firstTierBitrates){for(var e in t.Yw("firstTierBitrates",r.Type.SET,1),t.Bg(r.Type.I32,this.firstTierBitrates.length),this.firstTierBitrates)this.firstTierBitrates.hasOwnProperty(e)&&(e=this.firstTierBitrates[e],t.Xw(e));t.Vg(),t.$w()}if(null!==this.secondTierBitrates&&void 0!==this.secondTierBitrates){for(var i in t.Yw("secondTierBitrates",r.Type.SET,2),t.Bg(r.Type.I32,this.secondTierBitrates.length),this.secondTierBitrates)this.secondTierBitrates.hasOwnProperty(i)&&(i=this.secondTierBitrates[i],t.Xw(i));t.Vg(),t.$w()}t.Jw(),t.zw()},n.snapshots.TrafficKey=function(t){this.bitrate=null,this.AS=null,this.partnerGuid=null,t&&(void 0!==t.bitrate&&null!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.AS&&null!==t.AS&&(this.AS=t.AS),void 0!==t.partnerGuid&&null!==t.partnerGuid&&(this.partnerGuid=t.partnerGuid))},n.snapshots.TrafficKey.prototype={},n.snapshots.TrafficKey.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I32?this.bitrate=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.I32?this.AS=t.Vw().value:t.Bw(i);break;case 3:i==r.Type.STRING?this.partnerGuid=t.xw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.TrafficKey.prototype.write=function(t){t.Ww("TrafficKey"),null!==this.bitrate&&void 0!==this.bitrate&&(t.Yw("bitrate",r.Type.I32,1),t.Xw(this.bitrate),t.$w()),null!==this.AS&&void 0!==this.AS&&(t.Yw("AS",r.Type.I32,2),t.Xw(this.AS),t.$w()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(t.Yw("partnerGuid",r.Type.STRING,3),t.Kw(this.partnerGuid),t.$w()),t.Jw(),t.zw()},n.snapshots.PartnerKey=function(t){this.bitrate=null,this.AS=null,this.partnerGuid=null,t&&(void 0!==t.bitrate&&null!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.AS&&null!==t.AS&&(this.AS=t.AS),void 0!==t.partnerGuid&&null!==t.partnerGuid&&(this.partnerGuid=t.partnerGuid))},n.snapshots.PartnerKey.prototype={},n.snapshots.PartnerKey.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I32?this.bitrate=t.Vw().value:t.Bw(i);break;case 2:i==r.Type.I32?this.AS=t.Vw().value:t.Bw(i);break;case 3:i==r.Type.STRING?this.partnerGuid=t.xw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.PartnerKey.prototype.write=function(t){t.Ww("PartnerKey"),null!==this.bitrate&&void 0!==this.bitrate&&(t.Yw("bitrate",r.Type.I32,1),t.Xw(this.bitrate),t.$w()),null!==this.AS&&void 0!==this.AS&&(t.Yw("AS",r.Type.I32,2),t.Xw(this.AS),t.$w()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(t.Yw("partnerGuid",r.Type.STRING,3),t.Kw(this.partnerGuid),t.$w()),t.Jw(),t.zw()},n.snapshots.Player=function(t){this.bufferingN=null,this.bufferingMs=null,this.initBufferingN=null,this.initBufferingMs=null,this.seekBufferingN=null,this.seekBufferingMs=null,this.playerBufferMs=null,t&&(void 0!==t.bufferingN&&null!==t.bufferingN&&(this.bufferingN=t.bufferingN),void 0!==t.bufferingMs&&null!==t.bufferingMs&&(this.bufferingMs=t.bufferingMs),void 0!==t.initBufferingN&&null!==t.initBufferingN&&(this.initBufferingN=t.initBufferingN),void 0!==t.initBufferingMs&&null!==t.initBufferingMs&&(this.initBufferingMs=t.initBufferingMs),void 0!==t.seekBufferingN&&null!==t.seekBufferingN&&(this.seekBufferingN=t.seekBufferingN),void 0!==t.seekBufferingMs&&null!==t.seekBufferingMs&&(this.seekBufferingMs=t.seekBufferingMs),void 0!==t.playerBufferMs&&null!==t.playerBufferMs&&(this.playerBufferMs=t.playerBufferMs))},n.snapshots.Player.prototype={},n.snapshots.Player.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I16?this.bufferingN=t.vb().value:t.Bw(i);break;case 2:i==r.Type.I32?this.bufferingMs=t.Vw().value:t.Bw(i);break;case 3:i==r.Type.I16?this.initBufferingN=t.vb().value:t.Bw(i);break;case 4:i==r.Type.I32?this.initBufferingMs=t.Vw().value:t.Bw(i);break;case 5:i==r.Type.I16?this.seekBufferingN=t.vb().value:t.Bw(i);break;case 6:i==r.Type.I32?this.seekBufferingMs=t.Vw().value:t.Bw(i);break;case 36:i==r.Type.I32?this.playerBufferMs=t.Vw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.Player.prototype.write=function(t){t.Ww("Player"),null!==this.bufferingN&&void 0!==this.bufferingN&&(t.Yw("bufferingN",r.Type.I16,1),t.Wg(this.bufferingN),t.$w()),null!==this.bufferingMs&&void 0!==this.bufferingMs&&(t.Yw("bufferingMs",r.Type.I32,2),t.Xw(this.bufferingMs),t.$w()),null!==this.initBufferingN&&void 0!==this.initBufferingN&&(t.Yw("initBufferingN",r.Type.I16,3),t.Wg(this.initBufferingN),t.$w()),null!==this.initBufferingMs&&void 0!==this.initBufferingMs&&(t.Yw("initBufferingMs",r.Type.I32,4),t.Xw(this.initBufferingMs),t.$w()),null!==this.seekBufferingN&&void 0!==this.seekBufferingN&&(t.Yw("seekBufferingN",r.Type.I16,5),t.Wg(this.seekBufferingN),t.$w()),null!==this.seekBufferingMs&&void 0!==this.seekBufferingMs&&(t.Yw("seekBufferingMs",r.Type.I32,6),t.Xw(this.seekBufferingMs),t.$w()),null!==this.playerBufferMs&&void 0!==this.playerBufferMs&&(t.Yw("playerBufferMs",r.Type.I32,36),t.Xw(this.playerBufferMs),t.$w()),t.Jw(),t.zw()},n.snapshots.jG=function(t){this.mF=null,this.count=null,t&&(void 0!==t.mF&&null!==t.mF&&(this.mF=t.mF),void 0!==t.count&&null!==t.count&&(this.count=t.count))},n.snapshots.jG.prototype={},n.snapshots.jG.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I16?this.mF=t.vb().value:t.Bw(i);break;case 2:i==r.Type.I32?this.count=t.Vw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.jG.prototype.write=function(t){t.Ww("ResponseInfo"),null!==this.mF&&void 0!==this.mF&&(t.Yw("statusCode",r.Type.I16,1),t.Wg(this.mF),t.$w()),null!==this.count&&void 0!==this.count&&(t.Yw("count",r.Type.I32,2),t.Xw(this.count),t.$w()),t.Jw(),t.zw()},n.snapshots.PG=function(t){this.source=null,t&&void 0!==t.source&&null!==t.source&&(this.source=r.Rb(t.source,[n.snapshots.jG]))},n.snapshots.PG.prototype={},n.snapshots.PG.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:if(i==r.Type.LIST){var s,a;this.source=[],(a=t.hb()).ob,s=a.size;for(var u=0;u<s;++u){var h=null;(h=new n.snapshots.jG).read(t),this.source.push(h)}t.ub()}else t.Bw(i);break;case 0:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.PG.prototype.write=function(t){if(t.Ww("ServiceResponseInfo"),null!==this.source&&void 0!==this.source){for(var e in t.Yw("source",r.Type.LIST,1),t.Gg(r.Type.STRUCT,this.source.length),this.source)this.source.hasOwnProperty(e)&&(e=this.source[e]).write(t);t.xg(),t.$w()}t.Jw(),t.zw()},n.snapshots.MetricSnapshot=function(t){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,this.rG=null,this.testInfo=null,this.IK=null,t&&(void 0!==t.timestamp&&null!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.guid&&null!==t.guid&&(this.guid=t.guid),void 0!==t.eventId&&null!==t.eventId&&(this.eventId=t.eventId),void 0!==t.streamInfo&&null!==t.streamInfo&&(this.streamInfo=t.streamInfo),void 0!==t.metrics&&null!==t.metrics&&(this.metrics=t.metrics),void 0!==t.traffic&&null!==t.traffic&&(this.traffic=t.traffic),void 0!==t.snapshotInfo&&null!==t.snapshotInfo&&(this.snapshotInfo=t.snapshotInfo),void 0!==t.agentInfo&&null!==t.agentInfo&&(this.agentInfo=t.agentInfo),void 0!==t.connInfo&&null!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.partners&&null!==t.partners&&(this.partners=t.partners),void 0!==t.player&&null!==t.player&&(this.player=t.player),void 0!==t.client&&null!==t.client&&(this.client=t.client),void 0!==t.sessionId&&null!==t.sessionId&&(this.sessionId=t.sessionId),void 0!==t.rG&&null!==t.rG&&(this.rG=t.rG),void 0!==t.testInfo&&null!==t.testInfo&&(this.testInfo=t.testInfo),void 0!==t.IK&&null!==t.IK&&(this.IK=t.IK))},n.snapshots.MetricSnapshot.prototype={},n.snapshots.MetricSnapshot.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.I64?this.timestamp=t.Eb().value:t.Bw(i);break;case 2:i==r.Type.STRING?this.guid=t.xw().value:t.Bw(i);break;case 3:i==r.Type.STRUCT?(this.eventId=new EventId,this.eventId.read(t)):t.Bw(i);break;case 4:i==r.Type.STRUCT?(this.streamInfo=new n.snapshots.StreamInfo,this.streamInfo.read(t)):t.Bw(i);break;case 5:i==r.Type.STRUCT?(this.metrics=new n.snapshots.Metrics,this.metrics.read(t)):t.Bw(i);break;case 6:if(i==r.Type.MAP){var s,a;this.traffic={},(a=t.nb()).rb,a.sb,s=a.size;for(var u=0;u<s;++u){0<u&&t.Xg.length>t.ig[t.ig.length-1]+1&&t.Xg.pop();var h=null,c=null;(h=new n.snapshots.TrafficKey).read(t),(c=new n.snapshots.Traffic).read(t),this.traffic[h]=c}t.eb()}else t.Bw(i);break;case 7:i==r.Type.STRUCT?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(t)):t.Bw(i);break;case 8:i==r.Type.STRUCT?(this.agentInfo=new n.snapshots.AgentInfo,this.agentInfo.read(t)):t.Bw(i);break;case 9:i==r.Type.STRUCT?(this.connInfo=new n.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.Bw(i);break;case 10:if(i==r.Type.MAP){var l,p;this.partners={},(p=t.nb()).rb,p.sb,l=p.size;for(var f=0;f<l;++f){0<f&&t.Xg.length>t.ig[t.ig.length-1]+1&&t.Xg.pop();var d=null,g=null;(d=new n.snapshots.PartnerKey).read(t),(g=new n.snapshots.Partner).read(t),this.partners[d]=g}t.eb()}else t.Bw(i);break;case 11:i==r.Type.STRUCT?(this.player=new n.snapshots.Player,this.player.read(t)):t.Bw(i);break;case 12:i==r.Type.STRUCT?(this.client=new n.snapshots.ClientInfo,this.client.read(t)):t.Bw(i);break;case 13:i==r.Type.STRING?this.sessionId=t.xw().value:t.Bw(i);break;case 14:i==r.Type.STRUCT?(this.rG=new n.snapshots.PG,this.rG.read(t)):t.Bw(i);break;case 15:i==r.Type.STRUCT?(this.testInfo=new TestInfo,this.testInfo.read(t)):t.Bw(i);break;case 16:i==r.Type.I64?this.IK=t.Eb().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.MetricSnapshot.prototype.write=function(t){if(t.Ww("MetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(t.Yw("timestamp",r.Type.I64,1),t.Yg(this.timestamp),t.$w()),null!==this.guid&&void 0!==this.guid&&(t.Yw("guid",r.Type.STRING,2),t.Kw(this.guid),t.$w()),null!==this.eventId&&void 0!==this.eventId&&(t.Yw("eventId",r.Type.STRUCT,3),this.eventId.write(t),t.$w()),null!==this.streamInfo&&void 0!==this.streamInfo&&(t.Yw("streamInfo",r.Type.STRUCT,4),this.streamInfo.write(t),t.$w()),null!==this.metrics&&void 0!==this.metrics&&(t.Yw("metrics",r.Type.STRUCT,5),this.metrics.write(t),t.$w()),null!==this.traffic&&void 0!==this.traffic){for(var e in t.Yw("traffic",r.Type.MAP,6),t.Ug(r.Type.STRUCT,r.Type.STRUCT,r.Ow(this.traffic)),this.traffic)if(this.traffic.hasOwnProperty(e)){var i=this.traffic[e];i.key.write(t),i.value.write(t)}t.Fg(),t.$w()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(t.Yw("snapshotInfo",r.Type.STRUCT,7),this.snapshotInfo.write(t),t.$w()),null!==this.agentInfo&&void 0!==this.agentInfo&&(t.Yw("agentInfo",r.Type.STRUCT,8),this.agentInfo.write(t),t.$w()),null!==this.connInfo&&void 0!==this.connInfo&&(t.Yw("connInfo",r.Type.STRUCT,9),this.connInfo.write(t),t.$w()),null!==this.partners&&void 0!==this.partners){for(var n in t.Yw("partners",r.Type.MAP,10),t.Ug(r.Type.STRUCT,r.Type.STRUCT,r.Ow(this.partners)),this.partners)if(this.partners.hasOwnProperty(n)){var o=this.partners[n];o.key.write(t),o.value.write(t)}t.Fg(),t.$w()}null!==this.player&&void 0!==this.player&&(t.Yw("player",r.Type.STRUCT,11),this.player.write(t),t.$w()),null!==this.client&&void 0!==this.client&&(t.Yw("client",r.Type.STRUCT,12),this.client.write(t),t.$w()),null!==this.sessionId&&void 0!==this.sessionId&&(t.Yw("sessionId",r.Type.STRING,13),t.Kw(this.sessionId),t.$w()),null!==this.rG&&void 0!==this.rG&&(t.Yw("responseInfo",r.Type.STRUCT,14),this.rG.write(t),t.$w()),null!==this.testInfo&&void 0!==this.testInfo&&(t.Yw("testInfo",r.Type.STRUCT,15),this.testInfo.write(t),t.$w()),null!==this.IK&&void 0!==this.IK&&(t.Yw("clientId",r.Type.I64,16),t.Yg(this.IK),t.$w()),t.Jw(),t.zw()},n.snapshots.JsonMetricSnapshot=function(t){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,this.rG=null,this.testInfo=null,this.IK=null,t&&(void 0!==t.timestamp&&null!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.guid&&null!==t.guid&&(this.guid=t.guid),void 0!==t.eventId&&null!==t.eventId&&(this.eventId=t.eventId),void 0!==t.streamInfo&&null!==t.streamInfo&&(this.streamInfo=t.streamInfo),void 0!==t.metrics&&null!==t.metrics&&(this.metrics=t.metrics),void 0!==t.traffic&&null!==t.traffic&&(this.traffic=t.traffic),void 0!==t.snapshotInfo&&null!==t.snapshotInfo&&(this.snapshotInfo=t.snapshotInfo),void 0!==t.agentInfo&&null!==t.agentInfo&&(this.agentInfo=t.agentInfo),void 0!==t.connInfo&&null!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.partners&&null!==t.partners&&(this.partners=t.partners),void 0!==t.player&&null!==t.player&&(this.player=t.player),void 0!==t.client&&null!==t.client&&(this.client=t.client),void 0!==t.sessionId&&null!==t.sessionId&&(this.sessionId=t.sessionId),void 0!==t.rG&&null!==t.rG&&(this.rG=t.rG),void 0!==t.testInfo&&null!==t.testInfo&&(this.testInfo=t.testInfo),void 0!==t.IK&&null!==t.IK&&(this.IK=t.IK))},n.snapshots.JsonMetricSnapshot.prototype={},n.snapshots.JsonMetricSnapshot.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),o=e.fid;if(i==r.Type.STOP)break;switch(o){case 1:i==r.Type.I64?this.timestamp=t.Eb().value:t.Bw(i);break;case 2:i==r.Type.STRING?this.guid=t.xw().value:t.Bw(i);break;case 3:i==r.Type.STRUCT?(this.eventId=new EventId,this.eventId.read(t)):t.Bw(i);break;case 4:i==r.Type.STRUCT?(this.streamInfo=new n.snapshots.StreamInfo,this.streamInfo.read(t)):t.Bw(i);break;case 5:i==r.Type.STRUCT?(this.metrics=new n.snapshots.Metrics,this.metrics.read(t)):t.Bw(i);break;case 6:if(i==r.Type.MAP){var s,a;this.traffic={},(a=t.nb()).rb,a.sb,s=a.size;for(var u=0;u<s;++u){0<u&&t.Xg.length>t.ig[t.ig.length-1]+1&&t.Xg.pop();var h,c=null;h=t.xw().value,(c=new n.snapshots.Traffic).read(t),this.traffic[h]=c}t.eb()}else t.Bw(i);break;case 7:i==r.Type.STRUCT?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(t)):t.Bw(i);break;case 8:i==r.Type.STRUCT?(this.agentInfo=new n.snapshots.AgentInfo,this.agentInfo.read(t)):t.Bw(i);break;case 9:i==r.Type.STRUCT?(this.connInfo=new n.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.Bw(i);break;case 10:if(i==r.Type.MAP){var l,p;this.partners={},(p=t.nb()).rb,p.sb,l=p.size;for(var f=0;f<l;++f){0<f&&t.Xg.length>t.ig[t.ig.length-1]+1&&t.Xg.pop();var d,g=null;d=t.xw().value,(g=new n.snapshots.Partner).read(t),this.partners[d]=g}t.eb()}else t.Bw(i);break;case 11:i==r.Type.STRUCT?(this.player=new n.snapshots.Player,this.player.read(t)):t.Bw(i);break;case 12:i==r.Type.STRUCT?(this.client=new n.snapshots.ClientInfo,this.client.read(t)):t.Bw(i);break;case 13:i==r.Type.STRING?this.sessionId=t.xw().value:t.Bw(i);break;case 14:i==r.Type.STRUCT?(this.rG=new n.snapshots.PG,this.rG.read(t)):t.Bw(i);break;case 15:i==r.Type.STRUCT?(this.testInfo=new TestInfo,this.testInfo.read(t)):t.Bw(i);break;case 16:i==r.Type.I64?this.IK=t.Eb().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.snapshots.JsonMetricSnapshot.prototype.write=function(t){if(t.Ww("JsonMetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(t.Yw("timestamp",r.Type.I64,1),t.Yg(this.timestamp),t.$w()),null!==this.guid&&void 0!==this.guid&&(t.Yw("guid",r.Type.STRING,2),t.Kw(this.guid),t.$w()),null!==this.eventId&&void 0!==this.eventId&&(t.Yw("eventId",r.Type.STRUCT,3),this.eventId.write(t),t.$w()),null!==this.streamInfo&&void 0!==this.streamInfo&&(t.Yw("streamInfo",r.Type.STRUCT,4),this.streamInfo.write(t),t.$w()),null!==this.metrics&&void 0!==this.metrics&&(t.Yw("metrics",r.Type.STRUCT,5),this.metrics.write(t),t.$w()),null!==this.traffic&&void 0!==this.traffic){for(var e in t.Yw("traffic",r.Type.MAP,6),t.Ug(r.Type.STRING,r.Type.STRUCT,r.Ow(this.traffic)),this.traffic)if(this.traffic.hasOwnProperty(e)){var i=this.traffic[e];t.Kw(e),i.write(t)}t.Fg(),t.$w()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(t.Yw("snapshotInfo",r.Type.STRUCT,7),this.snapshotInfo.write(t),t.$w()),null!==this.agentInfo&&void 0!==this.agentInfo&&(t.Yw("agentInfo",r.Type.STRUCT,8),this.agentInfo.write(t),t.$w()),null!==this.connInfo&&void 0!==this.connInfo&&(t.Yw("connInfo",r.Type.STRUCT,9),this.connInfo.write(t),t.$w()),null!==this.partners&&void 0!==this.partners){for(var n in t.Yw("partners",r.Type.MAP,10),t.Ug(r.Type.STRING,r.Type.STRUCT,r.Ow(this.partners)),this.partners)if(this.partners.hasOwnProperty(n)){var o=this.partners[n];t.Kw(n),o.write(t)}t.Fg(),t.$w()}null!==this.player&&void 0!==this.player&&(t.Yw("player",r.Type.STRUCT,11),this.player.write(t),t.$w()),null!==this.client&&void 0!==this.client&&(t.Yw("client",r.Type.STRUCT,12),this.client.write(t),t.$w()),null!==this.sessionId&&void 0!==this.sessionId&&(t.Yw("sessionId",r.Type.STRING,13),t.Kw(this.sessionId),t.$w()),null!==this.rG&&void 0!==this.rG&&(t.Yw("responseInfo",r.Type.STRUCT,14),this.rG.write(t),t.$w()),null!==this.testInfo&&void 0!==this.testInfo&&(t.Yw("testInfo",r.Type.STRUCT,15),this.testInfo.write(t),t.$w()),null!==this.IK&&void 0!==this.IK&&(t.Yw("clientId",r.Type.I64,16),t.Yg(this.IK),t.$w()),t.Jw(),t.zw()}},function(t,e,i){var r=i(28),n=(window.StreamType={1:"LIVE",LIVE:1,2:"VOD",VOD:2},window.StreamProtocol={1:"DASH",DASH:1,2:"HDS",HDS:2,3:"HLS",HLS:3,4:"SS",SS:4},window.ClientType={1:"JAVA",_K:1,2:"STATS_ONLY",SG:2,3:"JS_DIRECT",mG:3,4:"JS_PROXY",OG:4},window.EventId=function(t){this.partnerId=null,this.customerId=null,this.contentId=null,this.tags=null,t&&(void 0!==t.partnerId&&null!==t.partnerId&&(this.partnerId=t.partnerId),void 0!==t.customerId&&null!==t.customerId&&(this.customerId=t.customerId),void 0!==t.contentId&&null!==t.contentId&&(this.contentId=t.contentId),void 0!==t.tags&&null!==t.tags&&(this.tags=t.tags))});n.prototype={},n.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.STRING?this.partnerId=t.xw().value:t.Bw(i);break;case 2:i==r.Type.STRING?this.customerId=t.xw().value:t.Bw(i);break;case 3:i==r.Type.STRING?this.contentId=t.xw().value:t.Bw(i);break;case 4:if(i==r.Type.LIST){var o,s;this.tags=[],(s=t.hb()).ob,o=s.size;for(var a=0;a<o;++a){var u;u=t.xw().value,this.tags.push(u)}t.ub()}else t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},n.prototype.write=function(t){if(t.Ww("EventId"),null!==this.partnerId&&void 0!==this.partnerId&&(t.Yw("partnerId",r.Type.STRING,1),t.Kw(this.partnerId),t.$w()),null!==this.customerId&&void 0!==this.customerId&&(t.Yw("customerId",r.Type.STRING,2),t.Kw(this.customerId),t.$w()),null!==this.contentId&&void 0!==this.contentId&&(t.Yw("contentId",r.Type.STRING,3),t.Kw(this.contentId),t.$w()),null!==this.tags&&void 0!==this.tags){for(var e in t.Yw("tags",r.Type.LIST,4),t.Gg(r.Type.STRING,this.tags.length),this.tags)this.tags.hasOwnProperty(e)&&(e=this.tags[e],t.Kw(e));t.xg(),t.$w()}t.Jw(),t.zw()};var o=window.SnapshotInfo=function(t){this.timestamp=null,this.apiServer=null,this.clientIp=null,t&&(void 0!==t.timestamp&&null!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.apiServer&&null!==t.apiServer&&(this.apiServer=t.apiServer),void 0!==t.clientIp&&null!==t.clientIp&&(this.clientIp=t.clientIp))};o.prototype={},o.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.I64?this.timestamp=t.Eb().value:t.Bw(i);break;case 2:i==r.Type.STRING?this.apiServer=t.xw().value:t.Bw(i);break;case 3:i==r.Type.STRING?this.clientIp=t.xw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},o.prototype.write=function(t){t.Ww("SnapshotInfo"),null!==this.timestamp&&void 0!==this.timestamp&&(t.Yw("timestamp",r.Type.I64,1),t.Yg(this.timestamp),t.$w()),null!==this.apiServer&&void 0!==this.apiServer&&(t.Yw("apiServer",r.Type.STRING,2),t.Kw(this.apiServer),t.$w()),null!==this.clientIp&&void 0!==this.clientIp&&(t.Yw("clientIp",r.Type.STRING,3),t.Kw(this.clientIp),t.$w()),t.Jw(),t.zw()};var s=window.TestInfo=function(t){this.testId=null,t&&void 0!==t.testId&&null!==t.testId&&(this.testId=t.testId)};s.prototype={},s.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.STRING?this.testId=t.xw().value:t.Bw(i);break;case 0:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},s.prototype.write=function(t){t.Ww("TestInfo"),null!==this.testId&&void 0!==this.testId&&(t.Yw("testId",r.Type.STRING,1),t.Kw(this.testId),t.$w()),t.Jw(),t.zw()};var a=window.InetAddress=function(t){this.address=null,this.port=null,t&&(void 0!==t.address&&null!==t.address&&(this.address=t.address),void 0!==t.port&&null!==t.port&&(this.port=t.port))};a.prototype={},a.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=(e.fname,e.ftype),n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.STRING?this.address=t.wb().value:t.Bw(i);break;case 2:i==r.Type.I32?this.port=t.Vw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},a.prototype.write=function(t){t.Ww("InetAddress"),null!==this.address&&void 0!==this.address&&(t.Yw("address",r.Type.STRING,1),t.$g(this.address),t.$w()),null!==this.port&&void 0!==this.port&&(t.Yw("port",r.Type.I32,2),t.Xw(this.port),t.$w()),t.Jw(),t.zw()}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(17),o=(s.prototype.AK=function(){return Date.now()>=this.NK},s);function s(t,e){this.msg=t,this.NK=Date.now()+e,this.CK=r.defer()}var a=(u.prototype.Eh=function(t){var e=t.service+"_"+t.msgId,i=this.oW[e];null!=i?i(t):n.logger().error(n.loggerId+"Could not find a dispatcher for ",t,e,this.oW)},u.prototype.on=function(t,e,i){this.oW[t+"_"+e]=i},u.prototype.onerror=function(t){this.kK.push(t)},u.prototype.onconnect=function(t){this.DK.push(t)},u.prototype.MK=function(){var t=this;if(window.WebSocket){var e=new WebSocket(this.jK);return e.binaryType="arraybuffer",e.onopen=function(e){t.PK(),n.logger().debug(n.loggerId+"HiveServicesConnection established to "+t.jK),t.HK=(new t.LK).getTime(),t.UK(),t.DK.forEach((function(e){return e(t)})),t.FK(),t.GK()},e.onclose=function(e){t.close(t.xK),t.connect()},e.onmessage=function(e){t.Eh(n.hl.el(e.data))},e.onerror=function(e){t.close(!0),t.kK.forEach((function(t){return t(e.toString())}))},e}this.kK.forEach((function(t){return t("WebSocket not defined")}))},u.prototype.isOpen=function(){return null!=this.Yb&&this.Yb.readyState==this.Yb.OPEN},u.prototype.connect=function(t){var e=this;t&&(this.xK=!0),this.xK&&1!=this.isOpen()&&(0<this.BK||(-1<this.HK&&(new this.LK).getTime()-this.HK>this.ep?(this.VK=n.et.rl,this.HK=-1):this.VK=Math.min(2*this.VK,this.ep),this.BK=window.setTimeout((function(){e.BK=-1,n.logger().debug(n.loggerId+"Connection attempt to "+e.jK+" [t:"+e.VK+" hb:"+e.qK+"]"),e.Yb=e.MK(),e.VK=Math.max(e.VK,n.et.rl)}),this.VK)))},u.prototype.PK=function(){-1<this.BK&&(clearTimeout(this.BK),this.BK=-1)},u.prototype.close=function(t){this.xK=null!=t&&t,n.logger().debug(n.loggerId+"Closing connection [reconnect:"+this.xK+"]"),this.PK(),null!=this.Yb&&(this.Yb.close(),this.Yb=null)},u.prototype.UK=function(){for(;0<this.QK.length;){var t=this.QK.pop();try{t.AK()?t.CK.reject(new Error("Message expired")):(this.FK(),this.Yb.send(t.msg.sl()))}catch(e){if(e.code===DOMException.INVALID_STATE_ERR){this.QK.push(t);break}n.logger().error(n.loggerId+"Failed to send the message, dropped: ",e.code,e.name),t.CK.reject(e)}}this.GK()},u.prototype.FK=function(){this.WK&&(clearTimeout(this.WK),this.WK=null)},u.prototype.GK=function(){var t=this;this.qK&&!this.WK&&(this.WK=window.setInterval((function(){t.send(new n.hl(HiveStreamingServices.YK,0,""))}),this.KK))},u.prototype.send=function(t,e){if(void 0===e&&(e=this.op),this.QK.length>=this.hp)throw new Error("HiveServices connection cannot queue more messages");var i=new o(t,e);return this.QK.push(i),this.Yb&&this.UK(),i.CK.promise},u.prototype.$K=function(t){this.qK=t,this.qK&&this.GK()},u.prototype.isConnected=function(){return null!=this.Yb},u);function u(t,e,i,r,n,o,s){void 0===e&&(e=3e4),void 0===i&&(i=100),void 0===r&&(r=3e4),void 0===n&&(n=15e3),void 0===o&&(o=Date),void 0===s&&(s=!1),this.VK=1,this.BK=-1,this.HK=-1,this.oW={},this.kK=[],this.DK=[],this.qK=!1,this.xK=!0,this.jK=t,this.QK=Array(),this.ep=e,this.hp=i,this.op=r,this.KK=n,this.LK=o,this.qK=s||/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge./i.test(navigator.userAgent)}e.xG=a},function(t,e){window.HiveStreamingServices={1:"REMOTE_EXECUTOR",XK:1,2:"PEER_FORWARDER",JK:2,3:"PEER_INDEX",zK:3,4:"PEER_BROADCAST",ZK:4,5:"PEER_FILTER",t$:5,6:"PEER_LOGGING",i$:6,7:"HIVEJS_TRACKER",n$:7,8:"PEER_SYSTEM",r$:8,9:"HIVEJS_SNAPSHOTS",GE:9,10:"HIVEJS_TICKETS",GG:10,11:"HIVEJS_KEEPALIVE",YK:11,12:"HIVEJS_FORWARDING",s$:12,13:"INTERNAL_TICKET",e$:13,14:"LOCALITY_SERVICE",h$:14}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.prototype.Dl=function(){return this.p2pId},n.prototype.Ml=function(){return this.reportingId?this.reportingId:this.p2pId},n);function n(t,e){this.p2pId=t,this.reportingId=e}e.tx=r},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(79),a=(n(u,o=s.Ax),u.prototype.getCidr=function(){return this._x?this._x:null},u);function u(){return null!==o&&o.apply(this,arguments)||this}e.vx=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(55),n=i(3),o=i(0),s=i(25),a=(u.prototype.XG=function(){var t=n.defer(),e=this.indexedDB.open("PrivateIPDB");return e.onupgradeneeded=function(){e.result.createObjectStore("PrivateIPStore",{keyPath:"id"})},e.onsuccess=function(){var i=e.result;t.resolve(i)},e.onerror=function(e){t.reject(e)},t.promise},u.prototype.Qx=function(){var t=this;if(this.o$)return this.o$;var e=setTimeout((function(){t.logger.warn("Private list retrieval timeout"),i.reject({message:"Private list timeout"})}),4e3),i=n.defer();return s.DE.rf&&this.indexedDB?this.XG().then((function(n){var o=n.transaction("PrivateIPStore","readwrite").objectStore("PrivateIPStore").get("iplist");o.onsuccess=function(){clearTimeout(e);var t=[];r.LP(o.result)||r.LP(o.result.value)||(t=o.result.value.split("|")),i.resolve(t),n.close()},o.onerror=function(r){clearTimeout(e),t.logger.warn("I got an error on indexed db "+r.message),i.reject({message:"Error on indexedDB "+r.message})}})).fail((function(r){clearTimeout(e),t.logger.warn("DB is not open with error"+r.message),i.reject({message:"DB is not open with error "+r.message})})):(clearTimeout(e),i.reject({message:"DB is not ready or enabled"})),this.o$=i.promise,this.o$},u.prototype.Zx=function(t){var e=this;if(s.DE.rf&&this.indexedDB){var i=t.join("|");this.XG().then((function(r){var n=r.transaction("PrivateIPStore","readwrite");n.objectStore("PrivateIPStore").put({id:"iplist",value:i}),n.oncomplete=function(){e.logger.debug("Storing site matched ips ["+t.join(",")+"]"),r.close()}})).fail((function(t){e.logger.warn("DB is not open with error "+t.message)}))}},u);function u(){this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.logger=o.Framework.resolve(o.Framework.ht.m).log()}e.tB=a},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.hC&&"function"==typeof t.fill&&"function"==typeof t.qA}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.u$=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){function i(){}t.u$=e,i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(21),a=(n(u,o=s.HiveTechOptions),u);function u(){return null!==o&&o.apply(this,arguments)||this}e.gH=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.prototype.oG=function(){var t=new hive.snapshots.StreamInfo;return t.streamType=this.isLive?StreamType.LIVE:StreamType.VOD,t.streamProtocol=this.protocol,t.url=this.iL,t},n);function n(t,e,i){this.isLive=t,this.protocol=e,this.iL=i}e.hH=r},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=(o.prototype.SY=function(t,e,i){if(!this.a$.has(t)){if(!t[e])throw new Error(o.loggerId+"- method "+e+" is undefined in event target.");if(!t[i])throw new Error(o.loggerId+"- method "+i+" is undefined in event target.");this.a$.set(t,{f$:o.c$++,l$:e,v$:i,events:{}})}return this},o.prototype.eY=function(t,e){if(!e){var i=this.a$.keys(),r=i.length;if(1!==r)throw new Error(o.loggerId+"Incorrect use of non-targeted registerEvents; "+r+" registered");e=t,t=i[0]}var n=this.a$.get(t);if(!n)throw new Error(o.loggerId+"- target not registered");for(var s=n.l$,a=n.f$,u=[],h=0,c=Object.keys(e);h<c.length;h++){var l,p=c[h],f=e[p];l="function"==typeof f?f:f.RY,n.events[p]||(t[s](p,l),n.events[p]=f,u.push(p))}return this.plugin&&this.plugin.logger().debug(o.loggerId+"Registering events ["+u.join(", ")+"] on target #"+a),0<u.length},o.prototype.uF=function(t){var e=this;void 0===t&&(t=!1),this.a$.forEach((function(i,r){for(var n=i.v$,s=i.events,a=i.f$,u=[],h=0,c=Object.keys(s);h<c.length;h++){var l=c[h],p=s[l],f=void 0,d=void 0;"function"==typeof p?f=p:(f=p.RY,d=p.IY),!t&&d||(r[n](l,f),u.push(l),delete s[l])}t&&e.a$.delete(r),e.plugin&&e.plugin.logger().debug(o.loggerId+"Unregistering events ["+u.join(", ")+"] on target #"+a+" [destroy: "+t+"]")}))},o.prototype.reset=function(){var t=this;this.a$.forEach((function(e,i){var r=e.f$;t.a$.delete(i),t.plugin&&t.plugin.logger().debug(o.loggerId+"Reset on target #"+r)}))},o.loggerId="[HiveEventsBinder] ",o.c$=0,o);function o(t,e,i,n){this.plugin=t,this.a$=new r,e&&this.SY(e,i,n)}e.default=n},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(3),a=i(54),u=i(0),h=i(129),c=i(82),l=i(18),p=i(56),f=i(200),d=i(27),g=i(22),v=i(15),y=i(81),m=i(1),E=i(45),w=i(33),b=(n(S,o=p.StatsJS),S.prototype.getName=function(){return S.WP},S.prototype.getVersion=function(){return this.YP.getPluginVersion()},S.prototype.KP=function(){return!0},S.prototype.$P=function(){return c.aA.Api?navigator&&navigator.userAgent&&this.d$(navigator.userAgent)?s.resolve(!0):s.reject(new d.HiveTechError(d.aw.fw,"WebRTC DataChannels not supported by browser")):s.reject(new d.HiveTechError(d.aw.fw,"Not included in the page"))},S.prototype.initSession=function(t,e){var i=this;return this.$P().then((function(){var r=e.ticket;i.sH();var n=r.$k();0===n.indexOf("//")&&(n=location.protocol+n);var o=i.XP(t,r,n,e),s=i.YP.getPluginId();return y.OF.nB(o,s),y.OF.registerComm(i.YP,s),g.HiveRequestFactory.registerTech(s,i.getName()),window&&window.activateXHRInterceptor&&window.activateXHRInterceptor(i.YP.loggerLevel()>E.Nk.info,s),o}))},S.prototype.isActive=function(t,e,i){void 0===i&&(i=!1);var r=e.manifest.toLowerCase(),n=t.toLowerCase(),o=r.indexOf(".ism/manifest");if(-1<o&&(!i||t===e.manifest)){var s=r.substring(0,o);if(-1<n.indexOf(s))return-1<n.indexOf(".ism/manifest(format=mpd-time-csf)")?this.ad?(e.ticket.SourceURL=t,!0):this.E$(e,"The player does not use HiveRequest, downgrading to StatsJS"):this.E$(e,"Protocol not supported by HiveJS tech, downgrading to StatsJS")}else if(n===r)return!!this.ad||this.E$(e,"The player does not use HiveRequest, downgrading to StatsJS");return!1},S.prototype.pd=function(t,e){window&&window.deactivateXHRInterceptor&&window.deactivateXHRInterceptor(),o.prototype.pd.call(this,t,e);var i=c.aA.Api();e?(g.HiveRequestFactory.clearPlugin(this.YP.getPluginId()),y.OF.eB(t,this.YP.getPluginId()),i&&(i.gl(this.YP.getPluginId(),l.ul.STOP),i.p$())):i&&i.gl(this.YP.getPluginId(),l.ul.IDLE)},S.prototype.E$=function(t,e){return t.tech=this.BU,g.HiveRequestFactory.registerTech(this.YP.getPluginId(),p.StatsJS.WP),this.ad&&this.ad.resolve(),this.ad=void 0,this.YP.logger().warn("[HiveJS] "+e),this.onError(new d.HiveTechError(d.aw.lw,e)),window&&window.deactivateXHRInterceptor&&window.deactivateXHRInterceptor(),!0},S.prototype.hB=function(t){this.ad=t},S.prototype.fH=function(){g.HiveRequestFactory.od(S.WP,w.HiveRequest,y.OF)},S.prototype.onActiveSession=function(t){var e=this;u.Framework.D().apply(new h.w$(!0));var i=c.aA.Api();if(i.gl(this.YP.getPluginId(),l.ul.STOP),this.g$()&&i.b$(!0),i.start(t.yd,!1,this.YP.$U()).then((function(r){if(e.sH(),e.eH=t.yd,e.eH.Tl(e.options_.renderStatsCallback),e.eH.El(c.aA.Pl(),c.aA.getVersion()),e.eH.bl.init(e.eH.pl,t.ticket.sessionId),e.YP.options().testId&&e.eH.pl.uH(e.YP.options().testId),t.authenticationToken){var n=i.y$(e.YP.getPluginId());n&&n.T$.$.TL(t.authenticationToken)}e.ad&&i.request(e.ad,e.YP.getPluginId()),e.eH.wl.fd(t.ticket.sessionId,e.YP.getPlayerSource(),200);var o=e.YP.flushTechEvents();o&&0<o.length&&e.eH.wl.dE(o),e.YP.updatePlayerInfo(e.eH)})),null!=this.options().onActiveSession)try{this.options().onActiveSession(t.toHiveSession())}catch(t){m.ErrorMonitor.lt().logError("exception in user-defined onActiveSession callback","[HiveJS]",t)}},S.prototype.gl=function(t,e){},S.prototype.XP=function(t,e,i,r){var n=new g.HiveSessionInternal(t,e,i,r);return n.lH=!0,n.id=n.ticket.sessionId,n},S.prototype.nH=function(){},S.prototype.g$=function(){var t=new a.gE;return t.bE(navigator.userAgent),"Android"==t.yE().name},S.prototype.d$=function(t){try{var e=new a.gE(t).Bj();return"Mobile Safari"!==e.name&&("Safari"===e.name?12<=parseInt(e.Sj,10):"function"==typeof RTCPeerConnection.prototype.createDataChannel)}catch(t){return!1}},S.WP="HiveJS",S);function S(t,e,i){var r=o.call(this,t,e)||this;return r.options_=new f.m$,null!=e[S.WP]&&v.updateOptions(e[S.WP],r.options_),r.BU=i,r}e.HiveJS=b},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(42),n=i(0),o=i(45),s=i(8),a=i(18),u=i(74),h=i(75),c=i(76),l=i(73),p=i(24),f=i(16),d=i(130),g=i(132),v=i(133),y=i(89),m=i(152),E=i(153),w=i(154),b=i(155),S=i(156),T=i(95),I=i(171),_=i(172),P=i(173),O=i(49),A=i(20),R=i(174),C=i(178),N=i(179),k=i(180),D=i(181),L=i(183),x=i(184),M=i(185),B=i(186),H=i(77),U=i(187),j=i(188),F=i(189),V=i(7),G=i(190),q=i(191),Y=i(192),W=i(193),J=V.ut.Ya,Q=V.ut.Ka,X=V.ut.$a,K=V.ut.Ja,$=i(195),z=i(196),Z=i(93),tt=i(198),et=i(78),it=i(80),rt=V.ut.sf,nt=(ot.prototype.apply=function(t){this.O$?K&&t.bind(new r.uk(s.pf.af,et.gx,r.ak.Ek)):(rt?(t.bind(new r.uk(s.pf.lf,a.Ul,r.ak.Ek)),t.bind(new r.uk(s.pf.R,u.VG,r.ak.Ek))):(t.bind(new r.uk(s.pf.lf,a.Ll,r.ak.Ek)),t.bind(new r.uk(s.pf.R,u.BG,r.ak.Ek))),t.bind(new r.uk(s.pf.uf,h.$G,r.ak.Ek)),t.bind(new r.uk(s.pf.u,c.hx,r.ak.Ek)),t.bind(new r.uk(n.Framework.ht.m,o.Pk,r.ak.Ek)),t.bind(new r.uk(s.pf.hf,l.Rl,r.ak.mk)),t.bind(new r.uk(s.pf.df,p.NE,r.ak.mk)),t.bind(new r.uk(s.pf.Ef,p.Rl,r.ak.mk)),K?t.bind(new r.uk(s.pf.af,et.gx,r.ak.Ek)):t.bind(new r.uk(s.pf.af,it.iB,r.ak.Ek))),t.bind(new r.uk(f.nl.il,W.S$,r.ak.mk)),t.bind(new r.uk(f.nl.Sc,G.R$,r.ak.mk)),t.bind(new r.uk(s.pf.ff,H.ax,r.ak.Ek)),t.bind(new r.uk(f.nl.$c,M.I$,r.ak.Ek)),t.bind(new r.uk(f.nl.Gc,d.ia,r.ak.Ek)),t.bind(new r.uk(f.nl.Hc,g._$,r.ak.mk)),t.bind(new r.uk(f.nl.xc,v.A$,r.ak.mk)),t.bind(new r.uk(f.nl.kc,m.Cache,r.ak.mk)),t.bind(new r.uk(f.nl.Dc,y.Eq,r.ak.mk)),J&&t.bind(new r.uk(f.nl.Mc,tt.N$,r.ak.mk)),t.bind(new r.uk(f.nl.Uc,E.C$,r.ak.mk)),"undefined"!=typeof HiveOriginalXMLHttpRequest?t.bind(new r.uk(n.Framework.ht.T,HiveOriginalXMLHttpRequest)):t.bind(new r.uk(n.Framework.ht.T,XMLHttpRequest)),t.bind(new r.uk(f.nl.Kc,x.k$,r.ak.Ek)),t.bind(new r.uk(f.nl.Qc,w.D$,r.ak.mk)),t.bind(new r.uk(n.Framework.ht.v,R.M$,r.ak.Ek)),t.bind(new r.uk(f.nl.O,C.j$,r.ak.Ek)),t.bind(new r.uk(f.nl.Pc,B.P$,r.ak.mk)),t.bind(new r.uk(f.nl.jc,b.H$,r.ak.mk)),t.bind(new r.uk(f.nl.Rc,S.zu,r.ak.mk)),t.bind(new r.uk(f.nl.Ic,T.BW,r.ak.mk)),t.bind(new r.uk(f.nl._c,q.L$,r.ak.mk)),t.bind(new r.uk(f.nl.Ac,j.U$,r.ak.mk)),t.bind(new r.uk(f.nl.Nc,F.F$,r.ak.mk)),t.bind(new r.uk(f.nl.Cc,F.G$,r.ak.mk)),t.bind(new r.uk(f.nl.Zc,U.qu,r.ak.mk)),t.bind(new r.uk(f.nl.Fc,I.x$,r.ak.mk)),t.bind(new r.uk(f.nl.Lc,_.B$,r.ak.mk)),t.bind(new r.uk(f.nl.Wc,P.V$,r.ak.mk)),t.bind(new r.uk(f.nl.qc,D.q$,r.ak.mk)),t.bind(new r.uk(f.nl.Bc,O.tj,r.ak.mk)),t.bind(new r.uk(f.nl.Vc,L.Q$,r.ak.mk)),t.bind(new r.uk(n.Framework.ht.p,A.$v,r.ak.mk)),t.bind(new r.uk(f.nl.Yc,N.$u,r.ak.mk)),t.bind(new r.uk(f.nl.tl,Y.W$,r.ak.mk)),Q&&(t.bind(new r.uk(f.nl.Jc,z.Y$,r.ak.mk)),t.bind(new r.uk(f.nl.Xc,$.K$,r.ak.mk))),X&&t.bind(new r.uk(f.nl.$a,Z.pQ,r.ak.mk)),t.bind(new r.uk(f.nl.zc,k.$$,r.ak.mk))},ot);function ot(t){this.O$=!1,t&&(this.O$=t)}e.w$=nt},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(32),o=i(0),s=i(19),a=i(16),u=i(5),h=i(18),c=i(4),l=i(131),p=i(48),f=i(8),d=i(47),g=i(7),v=i(1),y=i(2),m=g.ut.Ka,E=g.ut.$a,w=g.ut.Xa,b=(S.prototype.init=function(t,e,i,r){try{w?this.X$(!1):i?this.X$(!1):this.X$(!0),this.PD.setReportingGuid(this.yd.identity.Ml()),this.PD.J$(i),this.fg.init(u.ea.Cache.Jo,u.ea.Cache.zo);var n=this.T$.GD(t,e,r);this.PD.setContextId(this.T$.$.getContextId());var s=new l.z$(n);this.yd.oH=s,this.yd.pl.oH=s,this.Z$.start(this.T$,this.Tq),(m||o.Framework.U()&&p.TD.gD)&&this.iX.tX(this.Tq);var a=[this.nX,this.Tq,this.HD,this.Z$,this.yd.pl,this.yd.wl,this.IQ];(m||o.Framework.U()&&p.TD.gD)&&a.push(this.iX),(E||o.Framework.U()&&p.TD.bD)&&a.push(this.rX),this.yv.start(this.swarmId,a),this.yd.pl.DG(this.HD),this.yd.pl.zF(this.PD),this.PD.sX(t)}catch(t){throw v.ErrorMonitor.lt().logError("Error initializing swarm object",this.loggerId,y.le.de,t),new Error(t)}},S.prototype.X$=function(t){t&&"undefined"!=typeof navigator&&navigator.hardwareConcurrency?(this.PD.eX(navigator.hardwareConcurrency),this.PD.hX(navigator.hardwareConcurrency)):(this.PD.eX(1),this.PD.hX(1)),this.logger.debug(this.loggerId+"My score "+this.PD.vQ())},S.prototype.oX=function(t){return n.Av.tO(t).toString(n.Av.Dm.Mm)},S.prototype.request=function(t){this.uX(),this.MD.request(t)},S.prototype.aX=function(){this.state!==h.ul.STOP?(this.Tq.stop(),this.HD.stop(),this.LD.fX(),this.LD.cX(),this.Z$.lX(),this.iX&&this.iX.vX(),this.yd.gl(h.ul.IDLE),this.fg.vq(),this.UD.dX(),this.MD.EX(),this.sU.pX(),o.Framework.clearTimeout(this.requestTimeout)):this.logger.debug("Ignoring changing state from Stop to Idle")},S.prototype.gl=function(t,e){try{if(this.state!=t){switch(this.logger.info("Switching state "+h.ul[this.state]+" -> "+h.ul[t]),t){case h.ul.STOP:this.aX(),this.yv.stop(e);break;case h.ul.IDLE:this.aX();break;case h.ul.al:this.Tq.start(),this.HD.start(this.T$.$),this.LD.wX(),this.Z$.gX(),this.iX&&this.iX.bX(),this.yd.gl(h.ul.al),this.sU.yX()}this.state=t}}catch(t){v.ErrorMonitor.lt().logError("Error changing peer status",this.loggerId,y.le.Ee,t)}},S.prototype.uX=function(){var t=this;try{o.Framework.clearTimeout(this.requestTimeout),this.gl(h.ul.al),this.requestTimeout=o.Framework.setTimeout((function(){t.gl(h.ul.IDLE)}),u.ea.ia.Mu)}catch(t){v.ErrorMonitor.lt().logError("Error requesting timeout",this.loggerId,y.le.ee,t)}},S);function S(t){this.state=h.ul.al,this.requestTimeout=-1;try{this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.ticket.sessionId),this.loggerId="[SWARM] ",this.yv=o.Framework.resolve(o.Framework.ht.v),this.sessionId=t.ticket.sessionId,this.yd=t,this.MD=o.Framework.resolve(a.nl.Hc),this.fg=o.Framework.resolve(a.nl.kc),this.Tq=o.Framework.resolve(a.nl.Rc),this.TX=o.Framework.resolve(a.nl.Uc),this.DD=o.Framework.resolve(a.nl.jc),this.HD=o.Framework.resolve(a.nl.Ic),this.uploadScore=o.Framework.resolve(a.nl.Wc),this.mX=o.Framework.resolve(a.nl.Lc),this.Z$=o.Framework.resolve(a.nl.Qc),this.jD=o.Framework.resolve(a.nl.Fc),this.T$=o.Framework.resolve(a.nl.xc),this.GL=o.Framework.resolve(a.nl.Yc),this.PD=o.Framework.resolve(a.nl.zc),this.eU=o.Framework.resolve(a.nl.Bc),this.LD=o.Framework.resolve(a.nl.Vc),this.UD=o.Framework.resolve(a.nl.Pc),this.IQ=o.Framework.resolve(a.nl.Zc),this.sU=o.Framework.resolve(a.nl.Sc),this.OX=o.Framework.resolve(a.nl.tl),this.nX=o.Framework.resolve(a.nl.il),(m||o.Framework.U()&&p.TD.gD)&&(this.SX=o.Framework.resolve(a.nl.Xc),this.iX=o.Framework.resolve(a.nl.Jc)),(E||o.Framework.U()&&p.TD.bD)&&(this.rX=o.Framework.resolve(a.nl.$a)),this.swarmId=this.oX(t.ticket.OE()),this.sU.init(this),this.TX.init(this),this.UD.init(this),this.IQ.init(this),this.HD.init(this),this.mX.init(this),this.Z$.init(this),this.jD.init(this),this.T$.init(this),this.MD.init(this),this.Tq.init(this),this.eU.init(this),this.LD.init(this),this.GL.init(this),this.OX.init(this),this.nX.init(this),(E||o.Framework.U()&&p.TD.bD)&&this.rX.init(this),(m||o.Framework.U()&&p.TD.gD)&&this.iX.init(this)}catch(t){throw v.ErrorMonitor.lt().logError("Error constructing swarm object",this.loggerId,y.le.ve,t),new Error(t)}}e.RX=b;var T=(I.prototype.start=function(t,e,i){this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.ticket.sessionId);var n=t.ticket;this.renderStats.init(this,t);var s=n.pluginId;if(this.IX.has(s))this.logger.warn("SESSION ALREADY ACTIVE "+s);else{d.hD.Zd(t.Sl.client,n.Xk(),t.identity.Ml());var a=new b(t);a.init(n,e,this._X,i),this.SE.getConnectivityInfo().then((function(t){var e=t.getNetworkChanged().getPrivateIp();e&&a.PD.Sx(e)})).done(),t.pl.kG(this.SE),this.logger.info("PEER CONTEXT STARTED"),this.IX.set(s,a),this.AX.set(a.swarmId,s)}return 1!=this.IX.length&&!this.NX||o.Framework.U()||(this.CX.init(),this.NX=!1),r.resolve(n.SourceURL)},I.prototype.p$=function(){this.NX=!0},I.prototype.vv=function(t){if(this.AX.has(t)){var e=this.AX.get(t);return this.IX.get(e)}return null},I.prototype.y$=function(t){return this.IX.get(t)},I.prototype.kX=function(t){return this.IX.has(t)?this.IX.get(t).MD:null},I.prototype.request=function(t,e){this.y$(e).request(t)},I.prototype.gl=function(t,e){var i=this.y$(t);i&&(i.gl(e,i.swarmId),e===h.ul.STOP&&this.IX.delete(t))},I.prototype.abort=function(t,e){var i=this.kX(e);i&&i.abort(t)},I.prototype.b$=function(t){this._X=t},I.prototype.DX=function(t,e){this.SE.wx(t)},I);function I(){this.Kv=new s.Counter,this.IX=new c,this.AX=new c,this.MX=!1,this.NX=!1,this.CX=o.Framework.resolve(a.nl.Kc),this.renderStats=o.Framework.resolve(a.nl.$c),this.SE=o.Framework.resolve(f.pf.af),this._X=!1}e.ia=T},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.prototype.oG=function(){var t=new hive.snapshots.StreamInfo;return t.streamType=this.xD.isLive()?StreamType.LIVE:StreamType.VOD,t.streamProtocol=this.xD.getStreamProtocol(),t.url=this.xD.FH(),t},n);function n(t){this.xD=t}e.z$=r},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(3),o=i(26),s=i(6),a=i(5),u=i(0),h=i(9),c=i(16),l=i(19),p=i(1),f=i(2),d=(g.prototype.init=function(t){this.logger=u.Framework.resolve(u.Framework.ht.m).log(t.sessionId),this.DD=t.DD,this.fg=t.fg,this.HD=t.HD,this.pl=t.yd.pl,this.sessionId=t.yd.ticket.sessionId,this.TX=t.TX,this.jD=t.jD,this.jX=t.T$,this.PD=t.PD,this.UD=t.UD,this.sU=t.sU,this.PX=t.LD,this.pl.WF(this.HX)},g.prototype.request=function(t){try{var e=t.url;this.logger.info("HIVE REQ "+e),t.Np=u.Framework.time();var i=this.jX.LX(t),r=i.YH(t.url);this.sU.UX(r),this.bM(t,r,i,o.fp.cp)}catch(t){p.ErrorMonitor.lt().logError("Error on player request",this.loggerId,f.he.oe,t)}},g.prototype.bM=function(t,e,i,r){var n=this;if(e.Gp()){if(e.Dp()!=h.wf.bf)return this.FX(t,e,i,r);var a=i.lL(e,r);if(a.YL)return this.logger.debug("DO NOT CONTINUE WITH THE REQUEST "+e.jp()+". ALREADY REQUESTED  "+a.xL+" PENDING REQUEST "+a.WL),null;if(a.WL&&r==o.fp.cp){var u=this.GX(t,e,i,r);return 0<u.length?(u.forEach((function(e){var i=n.xX.get(e);n.xX.set(t.id,i),n.xX.delete(e)})),null):(this.logger.info("PREFETCH UPGRADE FAILED. THIS SHOULD NOT HAPPEN. CHECK FOR MULTIPLE PLAYER REQUESTS FOR THE SAME FRAGMENT"),this.FX(t,e,i,r))}return this.FX(t,e,i,r)}var c=s.La.Ha.next(),l=new o.tw(t,c,r,e,i);return this.xX.set(t.id,l),l.type=o.fp.lp,this.BX(l),l},g.prototype.FX=function(t,e,i,r){var n=this,a=s.La.Ha.next(),u=new o.tw(t,a,r,e,i);if(this.xX.set(t.id,u),e.Dp()==h.wf.bf&&(i.$L(u),r!==o.fp.vp&&r!==o.fp.pp)){var c=e.bitrate,l=this.PD.VX();0!=c&&(this.PD.qX(c),this.PX.nQ(this.PD.VM()||this.PD.AM()),c!=l&&(this.QX=!0,this.WX=0),this.QX&&this.WX++,this.WX==this.YX&&(this.HD.DW(),this.QX=!1,this.WX=0))}return this.KX(e.jp()).then((function(t){n.sU.$X(u,t),n.XX(u,t),i.XL(u.jp(),u.Pp()),i.tU(e.bitrate)})).catch((function(){n.JX(e,u),u.Dp()==h.wf.bf&&(i.zL(u),u.type==o.fp.cp&&n.HX.add(0))})),u},g.prototype.GX=function(t,e,i,r){return i.KL(t,e,r)},g.prototype.KX=function(t){return this.fg.get(t)},g.prototype.JX=function(t,e){this.DD.contains(t.jp())?(this.logger.debug("OBJ IDX CONTAINS "+e.jp()),e.kp()==o.fp.vp&&(e.type=o.fp.pp),this.wp(e)):e.kp()!=o.fp.pp?this.BX(e):(p.ErrorMonitor.lt().logError("P2P PREFETCH FAILED BECAUSE OBJECT INDEX DOES NOT CONTAIN REQUEST ENTITY",this.loggerId,{pA:e.jp()}),e.Zp.XL(e.jp(),e.Pp()))},g.prototype.EX=function(){var t=this;this.xX.forEach((function(e){return t.abort(e.zp)}))},g.prototype.abort=function(t){if(this.xX.has(t.id)){var e=this.xX.get(t.id);try{var i=e.Pp();this.logger.debug("REQUEST "+i+" ABORTED "),this.jD.ah(i)?this.jD.zX(i):this.TX.ah(i)&&this.TX.zX(i),this.xX.delete(t.id)}catch(t){p.ErrorMonitor.lt().logError("Error occurred while aborting the request",this.loggerId,f.he.ue,t)}}},g.prototype.wp=function(t){t.type==o.fp.cp&&(t.type=o.fp.Ep),t.type==o.fp.pp&&(t.Kp=!0),this.jD.request(t)},g.prototype.ZX=function(t){if(0!=t.Jp&&(t.Vp.yp=t.Jp,this.logger.info("ALREADY DOWNLOADED "+t.Vp.yp+" BYTES"),t.Vp.Tp=t.Jp),!a.ea.N.uu&&t.Jp&&(t.Vp.yp=0),this.sU.tJ(t),t.type!=o.fp.pp)t.type=o.fp.dp,this.BX(t);else if(t.Dp()==h.wf.bf){t.Zp.JL(t.jp()),t.Zp.XL(t.jp(),t.Pp());var e=t.Mp;e.bitrate&&t.Zp.tU(e.bitrate)}},g.prototype.iJ=function(t){var e=this;this.logger.info("SUCCESS FROM P2P FOR "+t.Lp()+" [REQ "+t.Hp+"] ["+o.fp[t.type]+"] AFTER "+t.qp()+" [bw:"+t.Qp().pa()+"]"),this.nJ(t),this.rJ(t,this.jL(t.type)),this.UD.sJ(t);var i=this.TX.eJ().va();this.sU.hJ(t,i),this.oJ(t).then((function(){t.Zp.fL(t),e.uJ()})).finally((function(){e.jL(t.type)&&e.aJ(t),e.xX.delete(t.zp.id)}))},g.prototype.fJ=function(t){if(t.type!=o.fp.pp)t.type=o.fp.cp,this.BX(t);else if(t.Dp()==h.wf.bf){t.Zp.JL(t.jp()),t.Zp.XL(t.jp(),t.Pp());var e=t.Mp;e.bitrate&&t.Zp.tU(e.bitrate)}},g.prototype.BX=function(t){this.sU.cJ(t),this.TX.request(t)},g.prototype.lJ=function(t){this.uJ();var e=this.TX.eJ().va();this.sU.vJ(t,e),t.Dp()==h.wf.bf&&(t.Zp.JL(t.jp()),t.Zp.XL(t.jp(),t.Pp())),this.dJ(t)},g.prototype.EJ=function(t){var e=this;this.nJ(t),this.rJ(t,this.jL(t.type)),t.type==o.fp.dp&&this.logger.debug("CDN COMPENSATION TIME "+(t.Vp.Ap-t.zp.Np)+" / "+(t.Vp.Ap-t.Vp.Rp)+" P2P TIME "+(t.Vp._p-t.Vp.Ip)),-1==[h.wf.yf,h.wf.Tf].indexOf(t.Dp())&&this.UD.sJ(t);var i=this.TX.eJ().va();this.sU.pJ(t,i),this.oJ(t).then((function(){t.Dp()==h.wf.yf&&t.Zp.nL(t),-1==[h.wf.yf,h.wf.Tf].indexOf(t.Dp())&&t.Zp.fL(t),e.uJ()})).catch((function(t){e.logger.error(t)})).finally((function(){e.jL(t.type)&&e.aJ(t),e.xX.delete(t.zp.id)}))},g.prototype.nJ=function(t){t.type==o.fp.pp&&(t.Vp.p2pAgenTrafficSuccessQt=t.Vp.yp),t.type==o.fp.vp&&(t.Vp.Sp=t.Vp.Op,t.Yp&&(t.Vp.srcOtherRespQt=t.Vp.Op)),t.Vp.bp=t.Vp.Op+t.Vp.yp,t.zp.total=t.Vp.bp},g.prototype.rJ=function(t,e){if(this.wJ(t),t.zp.total=t.size,e){var i=s.La.createEvent(ProgressEvent,"progress",{lengthComputable:!0,total:t.Vp.bp,loaded:t.Vp.bp,currentTarget:t.zp});t.zp.dispatchEvent(i),t.Mp.dA()||(t.zp.response=t.sL,t.zp.responseText=t.sL)}},g.prototype.aJ=function(t){var e=t.zp,i=u.Framework.U()?e.total:t.Xp?t.Xp.byteLength:0;this.logger.info("RESPOND TO THE PLAYER "+t.jp()+" SIZE "+i),e.status=200,e.statusText="OK",e.readyState=4,"string"==typeof e.response&&"arraybuffer"===e.responseType&&(e.response=s.La.Ma(e.response)),"text"!=e.responseType&&""!=e.responseType&&delete e.responseText,t.Mp.dA()&&(e.response=u.Framework.U()?null:s.La.ya(t.Xp));var r=s.La.createEvent(Event,"readystatechange",{currentTarget:e}),n=s.La.createEvent(ProgressEvent,"load",{bubbles:!1,cancelable:!1,lengthComputable:!1,total:i,currentTarget:e,loaded:i}),o=s.La.createEvent(ProgressEvent,"loadend",{bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:i,total:0,currentTarget:e});e.dispatchEvent(r),e.dispatchEvent(n),e.dispatchEvent(o)},g.prototype.dJ=function(t){this.xX.delete(t.zp.id);var e=t.zp,i={bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:e.total,total:0,currentTarget:e};t.xhr.status&&0<t.xhr.status?(e.status=t.xhr.status,e.$p=t.$p):e.status=404,e.readyState=4,e.dispatchEvent(s.La.createEvent(Event,"readystatechange",i)),e.dispatchEvent(s.La.createEvent(ProgressEvent,"load",i)),e.dispatchEvent(s.La.createEvent(ProgressEvent,"loadend",i))},g.prototype.oJ=function(t){var e=this;return t.Mp.Gp()?this.fg.put(t).then((function(){return e.HD.gJ(t.Mp,t.Vp.bp,t.lB)})).catch((function(t){n.resolve(!0)})):n.resolve(!0)},g.prototype.XX=function(t,e){var i=this;t.Xp=e.data,t.$p=e.headers,t.uq=e.uq,t.Vp=e.Vp,t.size=e.length;var r=t.Zp.VH().wB(e.length);this.logger.info("SCHEDULE DELIVERY OF "+t.jp()+" IN "+r+" SIZE "+(u.Framework.U()?e.length:t.Xp.byteLength)+" BYTES"),u.Framework.setTimeout((function(){i.bJ(t)}),r)},g.prototype.bJ=function(t){this.logger.debug("DELIVERY OF "+t.jp()),this.rJ(t,!0),this.xX.delete(t.zp.id);var e=t.zp.Np-t.Vp.Ap;this.logger.info("FRAGMENT PREFETCHED "+e+" MSECS BEFORE PLAYER REQUEST"),0<e&&t.Dp()==h.wf.bf&&this.HX.add(e);var i;i=0<t.Vp.Ip?t.zp.Np-t.Vp.Ip:t.zp.Np-t.Vp._p,this.logger.info("FRAGMENT REQUESTED "+i+" MSECS BEFORE PLAYER REQUEST"),this.aJ(t)},g.prototype.jL=function(t){return t!=o.fp.pp&&t!=o.fp.vp},g.prototype.wJ=function(t){if(t.type!==o.fp.dp)t.$p=t.zp.$p=t.$p;else{var e="\nContent-Range: bytes=0-"+(t.size-1)+"/"+t.size+"\n";e+="Content-Length: "+t.size+"\n",t.$p=t.zp.$p=e}null==t.$p?t.$p="access-control-allow-origin: *":-1==t.$p.toLowerCase().indexOf("access-control-allow-origin")&&(t.$p=t.$p.trim()+"\naccess-control-allow-origin: *\n")},g.prototype.uJ=function(){u.Framework.U()||this.renderStats.render()},g);function g(){this.xX=new r,this.QX=!1,this.WX=0,this.loggerId="[HiveCache] ",this.YX=5,this.renderStats=u.Framework.resolve(c.nl.$c),this.HX=new l.Vl}e._$=d},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(57),n=i(88),o=i(0),s=(a.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.sessionId),this.yq=t,this.HD=t.HD},a.prototype.GD=function(t,e,i){var o=null,s=t.Qk();return n.HLS.bH(s)?this.$=o=new n.CL(t,e,this.yq):r.DASH.bH(s)?this.$=o=new r.CL(t,this.yq,i):this.logger.warn("COULD NOT FIND A CONTEXT FOR "+s),null!=o&&this.yJ(this.$),o},a.prototype.yJ=function(t){var e=this;null!=this.HD?this.HD.stop().then((function(i){e.HD.start(t)})):this.HD.start(t)},a.prototype.LX=function(t){if(null==this.$)this.logger.warn("FIRST REQUEST, COULD NOT FIND RIGHT CONTEXT "+t.url);else if(!this.$.tL(t))return this.logger.warn("REQUEST DOES NOT BELONG TO THE CURRENT CONTEXT "+t.url),null;return this.$},a);function a(){this.HD=null,this.yv=o.Framework.resolve(o.Framework.ht.v)}e.A$=s},function(t,e,i){"use strict";t.exports=u,i(11);var r=i(12),n=i(41),o=i(13),s=i(40),a=i(72);function u(t,e,i,r){if(!(this instanceof u))return new u(t,e,i,r);this.Kh=e||Object.Wh,this.Mf=i||Object.compare,this.Xh=r||Function.Yh,this.root=null,this.length=0,this.hiveAddEach(t)}function h(t){this.value=t,this.left=null,this.right=null,this.length=1}function c(t,e,i){if(this.set=t,this.nj=null,this.end=i,e){var r=this.set.TJ(e);r&&(this.set.mJ(r.value),this.nj=r.OJ())}}u.SJ=u,Object.hiveAddEach(u.prototype,r.prototype),Object.hiveAddEach(u.prototype,n.prototype),Object.hiveAddEach(u.prototype,o.prototype),Object.hiveAddEach(u.prototype,s.prototype),u.prototype.hU=!0,u.prototype.zh=function(t){return new this.constructor(t,this.Kh,this.Mf,this.Xh)},u.prototype.has=function(t,e){if(e)throw new Error("SortedSet#has does not support second argument: equals");return!!this.root&&(this.mJ(t),this.Kh(t,this.root.value))},u.prototype.get=function(t,e){if(e)throw new Error("SortedSet#get does not support second argument: equals");return this.root&&(this.mJ(t),this.Kh(t,this.root.value))?this.root.value:this.Xh(t)},u.prototype.hiveAdd=function(t){var e=new this.Node(t);if(!this.root)return this.$C&&this.tk([t],[],0),this.root=e,this.length++,this.$C&&this.JC([t],[],0),!0;if(this.mJ(t),this.Kh(t,this.root.value))return!1;var i=this.Mf(t,this.root.value);if(0===i)throw new Error("SortedSet cannot contain incomparable but inequal values: "+t+" and "+this.root.value);return this.$C&&this.tk([t],[],this.root.index),i<0?(e.right=this.root,e.left=this.root.left,this.root.left=null):(e.left=this.root,e.right=this.root.right,this.root.right=null),this.root.RJ(),e.RJ(),this.root=e,this.length++,this.$C&&this.JC([t],[],this.root.index),!0},u.prototype.delete=function(t,e){if(e)throw new Error("SortedSet#delete does not support second argument: equals");if(this.root&&(this.mJ(t),this.Kh(t,this.root.value))){var i=this.root.index;if(this.$C&&this.tk([],[t],i),this.root.left){var r=this.root.right;this.root=this.root.left,this.mJ(t),this.root.right=r}else this.root=this.root.right;return this.length--,this.root&&this.root.RJ(),this.$C&&this.JC([],[t],i),!0}return!1},u.prototype.indexOf=function(t,e){if(e)throw new Error("SortedSet#indexOf does not support second argument: startIndex");return this.root&&(this.mJ(t),this.Kh(t,this.root.value))?this.root.index:-1},u.prototype.find=function(t,e,i){if(e)throw new Error("SortedSet#find does not support second argument: equals");if(i)throw new Error("SortedSet#find does not support third argument: index");if(this.root&&(this.mJ(t),this.Kh(t,this.root.value)))return this.root},u.prototype.IJ=function(t){if(this.root){for(t=t||this.root;t.right;)t=t.right;return t}},u.prototype._J=function(t){if(this.root){for(t=t||this.root;t.left;)t=t.left;return t}},u.prototype.AJ=function(t){if(this.root)return this.mJ(t),0<this.Mf(this.root.value,t)?this.root.OJ():this.root},u.prototype.NJ=function(t){if(this.root)return this.mJ(t),0<=this.Mf(this.root.value,t)?this.root.OJ():this.root},u.prototype.TJ=function(t){if(this.root)return this.mJ(t),0<=this.Mf(this.root.value,t)?this.root:this.root.CJ()},u.prototype.kJ=function(t){if(this.root)return this.mJ(t),this.Mf(this.root.value,t)<=0?this.root.CJ():this.root},u.prototype.pop=function(){if(this.root){var t=this.IJ();return this.delete(t.value),t.value}},u.prototype.shift=function(){if(this.root){var t=this._J();return this.delete(t.value),t.value}},u.prototype.push=function(){this.hiveAddEach(arguments)},u.prototype.unshift=function(){this.hiveAddEach(arguments)},u.prototype.slice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var i=[];if(this.root)for(this.DJ(t);this.root.index<e&&(i.push(this.root.value),this.root.right);)this.mJ(this.root.CJ().value);return i},u.prototype.splice=function(t,e){return this.cj(t,e,Array.prototype.slice.call(arguments,2))},u.prototype.cj=function(t,e,i){if(void 0===t&&void 0===e)return[];(t=t||0)<0&&(t+=this.length),void 0===e&&(e=1/0);var r=[];if(this.root){this.DJ(t);for(var n=0;n<e;n++){r.push(this.root.value);var o=this.root.CJ();if(this.delete(this.root.value),!o)break;this.mJ(o.value)}}return this.hiveAddEach(i),r},u.prototype.mJ=function(t){var e,i,r,n,o,s;if(this.root){for(e=i=r=new this.Node,s=new this.Node,o=this.root;;){var a=this.Mf(t,o.value);if(a<0){if(!o.left)break;if(this.Mf(t,o.left.value)<0&&(n=o.left,o.left=n.right,o.RJ(),n.right=o,n.RJ(),!(o=n).left))break;(n=new h).right=o,n.left=s.left,s.left=n,r.left=o,r.RJ(),o=(r=o).left}else{if(!(0<a))break;if(!o.right)break;if(0<this.Mf(t,o.right.value)&&(n=o.right,o.right=n.left,o.RJ(),n.left=o,n.RJ(),!(o=n).right))break;(n=new h).left=o,n.right=s.right,s.right=n,i.right=o,i.RJ(),o=(i=o).right}}for(i.right=o.left,i.RJ(),r.left=o.right,r.RJ(),o.left=e.right,o.right=e.left;s.left;)s.left.right.RJ(),s.left=s.left.left;for(;s.right;)s.right.left.RJ(),s.right=s.right.right;o.RJ(),this.root=o}},u.prototype.DJ=function(t){if(this.root){for(var e=this.root,i=this.root.index;i!==t;)if(t<i&&e.left)i-=1+((e=e.left).right?e.right.length:0);else{if(!(i<t&&e.right))break;i+=1+((e=e.right).left?e.left.length:0)}return this.mJ(e.value),this.root.index===t}return!1},u.prototype.reduce=function(t,e,i){return this.root&&(e=this.root.reduce(t,e,0,i,this)),e},u.prototype.reduceRight=function(t,e,i){return this.root&&(e=this.root.reduceRight(t,e,this.length-1,i,this)),e},u.prototype.min=function(t){var e=this._J(t);if(e)return e.value},u.prototype.max=function(t){var e=this.IJ(t);if(e)return e.value},u.prototype.xf=function(){return this.min()},u.prototype.clear=function(){var t;this.$C&&(t=this.toArray(),this.tk([],t,0)),this.root=null,this.length=0,this.$C&&this.JC([],t,0)},u.prototype.Bf=function(t,e){return new this.Iterator(this,t,e)},u.prototype.Iterator=c,u.prototype.summary=function(){return this.root?this.root.summary():"()"},u.prototype.log=function(t,e,i,r){t=t||a.UF,e=e||this.Zh,i||(i=console.log,r=console),i=i.bind(r),this.root&&this.root.log(t,e,i,i)},u.prototype.Zh=function(t,e,i){e(" "+t.value)},u.MJ=a,(u.prototype.Node=h).prototype.reduce=function(t,e,i,r,n,o){if(o=o||0,this.left){var s=this.left.length;e=this.left.reduce(t,e,i,r,n,o+1),i+=s}return e=t.call(r,e,this.value,i,n,this,o),i+=1,this.right&&(e=this.right.reduce(t,e,i,r,n,o+1)),e},h.prototype.reduceRight=function(t,e,i,r,n,o){return o=o||0,this.right&&(e=this.right.reduce(t,e,i,r,n,o+1),i-=this.right.length),e=t.call(r,e,this.value,this.value,n,this,o),i-=1,this.left&&(e=this.left.reduce(t,e,i,r,n,o+1)),e},h.prototype.RJ=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0),this.index=this.left?this.left.length:0},h.prototype.jJ=function(){var t=1;if(t+=this.left?this.left.jJ():0,t+=this.right?this.right.jJ():0,this.length!==t)throw new Error("Integrity check failed: "+this.summary());return t},h.prototype.CJ=function(){var t=this;if(t.right){for(t=t.right;t.left;)t=t.left;return t}},h.prototype.OJ=function(){var t=this;if(t.left){for(t=t.left;t.right;)t=t.right;return t}},h.prototype.summary=function(){var t=this.value||"-";return t+=" <"+this.length,this.left||this.right?"("+t+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")":"("+t+")"},h.prototype.log=function(t,e,i,r){var n,o,s,a,u=this;n=this.left&&this.right?t.rk:this.left?t.DF:this.right?t.MF:t.kF,this.left&&this.left.log(t,e,(function(e){o?r(t.LF+" "+e):(o=!0,r(t.jF+t.kF+e))}),(function(t){r("  "+t)})),e(this,(function(e){s?i((u.right?t.LF:" ")+e):(s=!0,i(n+e))}),(function(e){r((u.left?t.LF:" ")+e)})),this.right&&this.right.log(t,e,(function(e){a?i("  "+e):(a=!0,i(t.PF+t.kF+e))}),(function(e){i(t.LF+" "+e)}))},c.prototype.lj=null,Object.defineProperty(c.prototype,"vj",{get:function(){return this.lj||(this.lj={done:!1,value:null})}}),c.prototype.next=function(){var t;return(t=this.nj?this.set.kJ(this.nj.value):this.set._J())?void 0!==this.end&&0<=this.set.Mf(t.value,this.end)?(this.vj.done=!0,this.vj.value=void 0):(this.nj=t,this.vj.value=t.value):(this.vj.done=!0,this.vj.value=void 0),this.vj}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0}),e.UL=function(){this.xL=!1,this.WL=!1,this.YL=!1}},function(t,e,i){"use strict";t.exports=s,i(11);var r=i(12),n=i(13),o=i(40);function s(t,e,i,r){if(!(this instanceof s))return new s(t,e,i,r);Array.isArray(t)?t=(this.bS=t).splice(0,t.length):this.bS=[],this.Kh=e||Object.Wh,this.Mf=i||Object.compare,this.Xh=r||Function.Yh,this.length=0,this.hiveAddEach(t)}function a(t,e,i){for(var r=0,n=t.length-1;r<=n;){var o=r+n>>1,s=i(e,t[o]);if(0<s)r=1+o;else{if(!(s<0))return o;n=o-1}}return-(r+1)}function u(t,e,i,r){var n=a(t,e,i);if(n<0)return-1;for(;0<n&&r(e,t[n-1]);)n--;return r(e,t[n])?n:-1}function h(t,e,i,r){var n=a(t,e,i);if(n<0)return-1;for(;n<t.length-1&&r(e,t[n+1]);)n++;return r(e,t[n])?n:-1}s.PJ=s,Object.hiveAddEach(s.prototype,r.prototype),Object.hiveAddEach(s.prototype,n.prototype),Object.hiveAddEach(s.prototype,o.prototype),s.prototype.hU=!0,s.prototype.zh=function(t){return new this.constructor(t,this.Kh,this.Mf,this.Xh)},s.prototype.has=function(t,e){if(e)throw new Error("SortedSet#has does not support second argument: equals");var i=a(this.bS,t,this.Mf);return 0<=i&&this.Kh(this.bS[i],t)},s.prototype.get=function(t,e){if(e)throw new Error("SortedArray#get does not support second argument: equals");var i=u(this.bS,t,this.Mf,this.Kh);return-1!==i?this.bS[i]:this.Xh(t)},s.prototype.hiveAdd=function(t){var e=function(t,e,i){var r=a(t,e,i);if(r<0)return-r-1;for(var n=t.length-1;r<n&&0===i(e,t[r+1]);)r++;return r}(this.bS,t,this.Mf);return this.$C&&this.tk([t],[],e),this.bS.splice(e,0,t),this.length++,this.$C&&this.JC([t],[],e),!0},s.prototype.delete=function(t,e){if(e)throw new Error("SortedArray#delete does not support second argument: equals");var i=u(this.bS,t,this.Mf,this.Kh);return-1!==i&&(this.$C&&this.tk([],[t],i),this.bS.splice(i,1),this.length--,this.$C&&this.JC([],[t],i),!0)},s.prototype.hk=function(t,e){if(e){var i=this.bS.hk(t,e);return this.length-=i,i}var r=u(this.bS,t,this.Mf,this.Kh);if(-1===r)return 0;for(var n=r;this.Kh(t,this.bS[n]);)n++;var o=this.slice(r,n);return this.$C&&this.tk([],o,r),this.bS.splice(r,o.length),this.length-=o.length,this.$C&&this.JC([],o,r),o.length},s.prototype.indexOf=function(t){return u(this.bS,t,this.Mf,this.Kh)},s.prototype.lastIndexOf=function(t){return h(this.bS,t,this.Mf,this.Kh)},s.prototype.find=function(t,e,i){if(e)throw new Error("SortedArray#find does not support second argument: equals");if(i)throw new Error("SortedArray#find does not support third argument: index");return u(this.bS,t,this.Mf,this.Kh)},s.prototype.findLast=function(t,e,i){if(e)throw new Error("SortedArray#findLast does not support second argument: equals");if(i)throw new Error("SortedArray#findLast does not support third argument: index");return h(this.bS,t,this.Mf,this.Kh)},s.prototype.push=function(){this.hiveAddEach(arguments)},s.prototype.unshift=function(){this.hiveAddEach(arguments)},s.prototype.pop=function(){var t=this.bS.pop();return this.length=this.bS.length,t},s.prototype.shift=function(){var t=this.bS.shift();return this.length=this.bS.length,t},s.prototype.slice=function(){return this.bS.slice.apply(this.bS,arguments)},s.prototype.splice=function(t,e){return this.cj(t,e,Array.prototype.slice.call(arguments,2))},s.prototype.cj=function(t,e,i){if(void 0===t&&void 0===e)return[];(t=t||0)<0&&(t+=this.length),void 0===e&&(e=1/0);var r=this.slice(t,t+e);return this.$C&&this.tk(i,r,t),this.bS.splice(t,e),this.length-=r.length,this.$C&&this.JC([],r,t),this.hiveAddEach(i),r},s.prototype.reduce=function(t,e){var i=arguments[2];return this.bS.reduce((function(e,r,n){return t.call(i,e,r,n,this)}),e,this)},s.prototype.reduceRight=function(){var t=arguments[2];return this.bS.reduceRight((function(e,i,r){return callback.call(t,e,i,r,this)}),basis,this)},s.prototype.min=function(){if(this.length)return this.bS[0]},s.prototype.max=function(){if(this.length)return this.bS[this.length-1]},s.prototype.xf=function(){return this.bS.xf()},s.prototype.clear=function(){var t;this.$C&&(t=this.bS.slice(),this.tk([],t,0)),this.length=0,this.bS.clear(),this.$C&&this.JC([],t,0)},s.prototype.Wh=function(t,e){return this.bS.Wh(t,e)},s.prototype.compare=function(t,e){return this.bS.compare(t,e)},s.prototype.Bf=function(t,e){return new this.Iterator(this.bS,t,e)},s.prototype.toJSON=function(){return this.toArray()},s.prototype.Iterator=Array.prototype.Iterator},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(84),a=(n(u,o=s.SB),u);function u(){return null!==o&&o.apply(this,arguments)||this}e.IL=a},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(85),a=i(3),u=(n(h,o=s.pV),h.prototype.NB=function(t,e){if(DOMParser){var i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Location"),r="";if(i&&0<i.length&&0<i[0].childNodes.length){var n=i[0].childNodes[0];r=this.RB(n.data)}else r=this.RB(t);this.manifest=this.dV.parse(e,r)}},h.prototype.fL=function(t){return a.resolve(!1)},h);function h(){return null!==o&&o.apply(this,arguments)||this}e._L=u},function(t,e,i){var r=i(140),n=i(86);t.exports.EV=function(){var t=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,i=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,o=[{type:"duration",test:function(e){for(var i=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],r=i.length,n=0;n<r;n++)if(e.nodeName===i[n])return t.test(e.value);return!1},TV:function(e){var i=t.exec(e),r=31536e3*parseFloat(i[2]||0)+2592e3*parseFloat(i[4]||0)+86400*parseFloat(i[6]||0)+3600*parseFloat(i[8]||0)+60*parseFloat(i[10]||0)+parseFloat(i[12]||0);return void 0!==i[1]&&(r=-r),r}},{type:"datetime",test:function(t){return e.test(t.value)},TV:function(t){var i,r=e.exec(t);if(i=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&parseInt(r[6],10)||0,r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]){var n=60*parseInt(r[9],10)+parseInt(r[10],10);i+=("+"===r[8]?-1:1)*n*60*1e3}return new Date(i)}},{type:"numeric",test:function(t){return i.test(t.value)},TV:function(t){return parseFloat(t)}}];return{parse:function(t,e){var i,s=new n(o,"",!0),a=new r(function(){var t=[];return t.push(function(){var t,e,i,r;return r=[{name:"profiles",mm:!1},{name:"width",mm:!1},{name:"height",mm:!1},{name:"sar",mm:!1},{name:"frameRate",mm:!1},{name:"audioSamplingRate",mm:!1},{name:"mimeType",mm:!1},{name:"segmentProfiles",mm:!1},{name:"codecs",mm:!1},{name:"maximumSAPPeriod",mm:!1},{name:"startsWithSap",mm:!1},{name:"maxPlayoutRate",mm:!1},{name:"codingDependency",mm:!1},{name:"scanType",mm:!1},{name:"FramePacking",mm:!0},{name:"AudioChannelConfiguration",mm:!0},{name:"ContentProtection",mm:!0}],(t={}).name="AdaptationSet",t.HJ=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=r,(e={}).name="Representation",e.HJ=!1,e.isArray=!0,e.parent=t,e.children=[],e.properties=r,t.children.push(e),(i={name:"SubRepresentation",HJ:!1,isArray:!0}).parent=e,i.children=[],i.properties=r,e.children.push(i),t}()),t.push(function(){var t,e,i,r;return r=[{name:"SegmentBase",mm:!0},{name:"SegmentTemplate",mm:!0},{name:"SegmentList",mm:!0}],(t={}).name="Period",t.HJ=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=r,(e={}).name="AdaptationSet",e.HJ=!1,e.isArray=!0,e.parent=t,e.children=[],e.properties=r,t.children.push(e),(i={name:"Representation",HJ:!1,isArray:!0}).parent=e,i.children=[],i.properties=r,e.children.push(i),t}()),t.push(function(){var t,e,i,r,n;return n=[{name:"BaseURL",mm:!0,LJ:function(t,e){return 0===e.indexOf("http://")?e:t+e}}],(t={}).name="mpd",t.HJ=!0,t.isArray=!0,t.parent=null,t.children=[],t.properties=n,(e={}).name="Period",e.HJ=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=n,t.children.push(e),(i={}).name="AdaptationSet",i.HJ=!1,i.isArray=!0,i.parent=e,i.children=[],i.properties=n,e.children.push(i),(r={name:"Representation",HJ:!1,isArray:!0}).parent=i,r.children=[],r.properties=n,i.children.push(r),t}()),t}());new Date;try{i=s.eV(t),new Date,i.hasOwnProperty("BaseURL")?(i.BaseURL=i.BaseURL_asArray[0],0!==i.BaseURL.toString().indexOf("http")&&(i.BaseURL=e+i.BaseURL)):i.BaseURL=e,i.hasOwnProperty("Location")&&(i.Location=i.Location_asArray[0]),a.RC(i),new Date}catch(e){return console.log("parsing the manifest failed","parse",t),null}return i}}}},function(t,e,r){t.exports=function(t){var e;for(e=[],i=0,len=t.length;i<len;i+=1)t[i].HJ?e.push("root"):e.push(t[i].name);function r(t,e){var i;if(null!==t&&null!==e)for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)||(e[i]=t[i]))}function n(t,e,i){var n,o,s,a,u;if(null!==t&&0!==t.length)for(n=0,o=t.length;n<o;n+=1)s=t[n],e.hasOwnProperty(s.name)&&(i.hasOwnProperty(s.name)?s.mm&&(a=e[s.name],u=i[s.name],"object"==typeof a&&"object"==typeof u?r(a,u):null!=s.LJ?i[s.name]=s.LJ(a,u):i[s.name]=a+u):i[s.name]=e[s.name])}var o=function(t,e){var i,r,s,a,u,h,c,l=t;if(null!==l.children&&0!==l.children.length)for(i=0,r=l.children.length;i<r;i+=1)if(h=l.children[i],e.hasOwnProperty(h.name))if(h.isArray)for(s=0,a=(u=e[h.name+"_asArray"]).length;s<a;s+=1)c=u[s],n(l.properties,e,c),o(h,c);else c=e[h.name],n(l.properties,e,c),o(h,c)},s=function(i){var r,n,a,u,h,c,l;if(null===i)return i;if("object"!=typeof i)return i;for(r=0,n=e.length;r<n;r+=1)"root"===e[r]&&(h=t[r],o(h,c=i));for(u in i)if(i.hasOwnProperty(u)){if(-1!==(a=e.indexOf(u)))if((h=t[a]).isArray)for(r=0,n=(l=i[u+"_asArray"]).length;r<n;r+=1)c=l[r],o(h,c);else c=i[u],o(h,c);s(i[u])}return i};return{RC:s}}},function(t,e,i){
/*! codem-isoboxer v0.2.2 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
if(void 0===r)var r={};r.nV=function(t){return new n(t).parse()},r.La={},r.La.UJ=function(t,e){var i=e||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(i).decode(t);var r=[],n=0;if("utf-8"===i)for(;n<t.byteLength;){var o=t.getUint8(n++);o<128||(o<224?o=(31&o)<<6:(o<240?o=(15&o)<<12:(o=(7&o)<<18,o|=(63&t.getUint8(n++))<<12),o|=(63&t.getUint8(n++))<<6),o|=63&t.getUint8(n++)),r.push(String.fromCharCode(o))}else for(;n<t.byteLength;)r.push(String.fromCharCode(t.getUint8(n++)));return r.join("")},e.nV=r.nV,e.La=r.La,r.FJ=function(t){this.offset=void 0===t?0:t};var n=function(t){this.GJ=new DataView(t),this.xJ=new r.FJ,this.BJ=[]};n.prototype.fetch=function(t){var e=this.VJ(t,!0);return e.length?e[0]:null},n.prototype.VJ=function(t,e){var i=[];return n.qJ.call(this,t,i,e),i},n.prototype.parse=function(){for(this.xJ.offset=0,this.BJ=[];this.xJ.offset<this.GJ.byteLength;){var t=o.parse(this);if(void 0===t.type)break;this.BJ.push(t)}return this},n.qJ=function(t,e,i){for(var r in this.type&&this.type==t&&e.push(this),this.BJ){if(e.length&&i)return;n.qJ.call(this.BJ[r],t,e,i)}};var o=function(){this.xJ=new r.FJ};o.parse=function(t){var e=new o;return e.QJ=t.xJ.offset,e.WJ=t.WJ?t.WJ:t,e.GJ=t.GJ,e.YJ=t,e.KJ(),t.xJ.offset=e.GJ.byteOffset+e.GJ.byteLength,e},o.prototype.$J=function(t){var e=null;switch(t){case 8:e=this.GJ.getInt8(this.xJ.offset-this.GJ.byteOffset);break;case 16:e=this.GJ.getInt16(this.xJ.offset-this.GJ.byteOffset);break;case 32:e=this.GJ.getInt32(this.xJ.offset-this.GJ.byteOffset);break;case 64:var i=this.GJ.getInt32(this.xJ.offset-this.GJ.byteOffset),r=this.GJ.getInt32(this.xJ.offset-this.GJ.byteOffset+4);e=i*Math.pow(2,32)+r}return this.xJ.offset+=t>>3,e},o.prototype.XJ=function(t){var e=null;switch(t){case 8:e=this.GJ.getUint8(this.xJ.offset-this.GJ.byteOffset);break;case 16:e=this.GJ.getUint16(this.xJ.offset-this.GJ.byteOffset);break;case 24:e=((i=this.GJ.getUint16(this.xJ.offset-this.GJ.byteOffset))<<8)+(r=this.GJ.getUint8(this.xJ.offset-this.GJ.byteOffset+2));break;case 32:e=this.GJ.getUint32(this.xJ.offset-this.GJ.byteOffset);break;case 64:var i=this.GJ.getUint32(this.xJ.offset-this.GJ.byteOffset),r=this.GJ.getUint32(this.xJ.offset-this.GJ.byteOffset+4);e=i*Math.pow(2,32)+r}return this.xJ.offset+=t>>3,e},o.prototype.JJ=function(t){for(var e="",i=0;i<t;i++){var r=this.XJ(8);e+=String.fromCharCode(r)}return e},o.prototype.zJ=function(){for(var t="";;){var e=this.XJ(8);if(0==e)break;t+=String.fromCharCode(e)}return t},o.prototype.ZJ=function(t){return this.XJ(t/2)+this.XJ(t/2)/Math.pow(2,t/2)},o.prototype.KJ=function(){if(this.xJ.offset=this.QJ,this.QJ+8>this.GJ.buffer.byteLength)this.WJ.tz=!0;else{switch(this.size=this.XJ(32),this.type=this.JJ(4),1==this.size&&(this.iz=this.XJ(64)),"uuid"==this.type&&(this.nz=this.JJ(16)),this.size){case 0:this.GJ=new DataView(this.GJ.buffer,this.QJ,this.GJ.byteLength-this.xJ.offset);break;case 1:this.QJ+this.size>this.GJ.buffer.byteLength?(this.tz=!0,this.WJ.tz=!0):this.GJ=new DataView(this.GJ.buffer,this.QJ,this.iz);break;default:this.QJ+this.size>this.GJ.buffer.byteLength?(this.tz=!0,this.WJ.tz=!0):this.GJ=new DataView(this.GJ.buffer,this.QJ,this.size)}!this.tz&&this.rz[this.type]&&this.rz[this.type].call(this)}},o.prototype.sz=function(){this.version=this.XJ(8),this.flags=this.XJ(24)},o.prototype.rz={},["moov","trak","tref","mdia","minf","stbl","edts","dinf","mvex","moof","traf","mfra","udta","meco","strk","vttc"].forEach((function(t){o.prototype.rz[t]=function(){for(this.BJ=[];this.xJ.offset-this.GJ.byteOffset<this.GJ.byteLength;)this.BJ.push(o.parse(this))}})),o.prototype.rz.ez=function(){this.sz(),this.hz=this.XJ(32),this.entries=[];for(var t=1;t<=this.hz;t++){var e={};1==this.version?(e.oz=this.XJ(64),e.uz=this.$J(64)):(e.oz=this.XJ(32),e.uz=this.$J(32)),e.az=this.$J(16),e.fz=this.$J(16),this.entries.push(e)}},o.prototype.rz.cz=function(){this.sz(),this.lz=this.zJ(),this.value=this.zJ(),this.timescale=this.XJ(32),this.vz=this.XJ(32),this.dz=this.XJ(32),this.id=this.XJ(32),this.Ez=new DataView(this.GJ.buffer,this.xJ.offset,this.GJ.byteLength-(this.xJ.offset-this.QJ))},o.prototype.rz.pz=o.prototype.rz.Bw=function(){this.data=new DataView(this.GJ.buffer,this.xJ.offset,this.GJ.byteLength-(this.xJ.offset-this.QJ))},o.prototype.rz.wz=o.prototype.rz.gz=function(){for(this.bz=this.JJ(4),this.yz=this.XJ(32),this.Tz=[];this.xJ.offset-this.GJ.byteOffset<this.GJ.byteLength;)this.Tz.push(this.JJ(4))},o.prototype.rz.mz=function(){this.sz(),this.Oz=this.XJ(32),this.Sz=this.JJ(4),this.wy=[this.XJ(32),this.XJ(32),this.XJ(32)],this.name=this.zJ()},o.prototype.rz.Rz=function(){this.data=new DataView(this.GJ.buffer,this.xJ.offset,this.GJ.byteLength-(this.xJ.offset-this.QJ))},o.prototype.rz.Iz=function(){this.sz(),1==this.version?(this._z=this.XJ(64),this.Az=this.XJ(64),this.timescale=this.XJ(32),this.duration=this.XJ(64)):(this._z=this.XJ(32),this.Az=this.XJ(32),this.timescale=this.XJ(32),this.duration=this.XJ(32));var t=this.XJ(16);this.pad=t>>15,this.language=String.fromCharCode(96+(t>>10&31),96+(t>>5&31),96+(31&t)),this.Oz=this.XJ(16)},o.prototype.rz.Nz=function(){this.sz(),this.Cz=this.XJ(32)},o.prototype.rz.kz=function(){this.sz(),1==this.version?(this._z=this.XJ(64),this.Az=this.XJ(64),this.timescale=this.XJ(32),this.duration=this.XJ(64)):(this._z=this.XJ(32),this.Az=this.XJ(32),this.timescale=this.XJ(32),this.duration=this.XJ(32)),this.rate=this.ZJ(32),this.volume=this.ZJ(16),this.Dz=this.XJ(16),this.Mz=[this.XJ(32),this.XJ(32)],this.matrix=[];for(var t=0;t<9;t++)this.matrix.push(this.ZJ(32));for(this.Oz=[],t=0;t<6;t++)this.Oz.push(this.XJ(32));this.jz=this.XJ(32)},o.prototype.rz.Pz=function(){var t=new DataView(this.GJ.buffer,this.xJ.offset,this.GJ.byteLength-(this.xJ.offset-this.QJ));this.Hz=r.La.UJ(t)},o.prototype.rz.Lz=function(){this.sz(),this.Uz=this.XJ(32),this.timescale=this.XJ(32),0==this.version?(this.Fz=this.XJ(32),this.Gz=this.XJ(32)):(this.Fz=this.XJ(64),this.Gz=this.XJ(64)),this.wy=this.XJ(16),this.xz=this.XJ(16),this.Bz=[];for(var t=0;t<this.xz;t++){var e={},i=this.XJ(32);e.Vz=i>>31&1,e.qz=2147483647&i,e.Qz=this.XJ(32);var r=this.XJ(32);e.Wz=r>>31&1,e.Yz=r>>28&7,e.Kz=268435455&r,this.Bz.push(e)}},o.prototype.rz.$z=function(){this.sz(),this.Xz=this.XJ(32),this.Jz=[];for(var t=0;t<this.Xz;t++){var e={};e.zz=this.XJ(32),e.Zz=[];for(var i=0;i<e.zz;i++){var r={};r.level=this.XJ(8),r.tZ=this.XJ(24),e.Zz.push(r)}this.Jz.push(e)}},o.prototype.rz.iZ=function(){this.sz(),1==this.version?this.nZ=this.XJ(64):this.nZ=this.XJ(32)},o.prototype.rz.tfhd=function(){this.sz(),this.rZ=this.XJ(32),1&this.flags&&(this.sZ=this.XJ(64)),2&this.flags&&(this.eZ=this.XJ(32)),8&this.flags&&(this.default_sample_duration=this.XJ(32)),16&this.flags&&(this.hZ=this.XJ(32)),32&this.flags&&(this.oZ=this.XJ(32))},o.prototype.rz.uZ=function(){this.sz(),1==this.version?(this._z=this.XJ(64),this.Az=this.XJ(64),this.rZ=this.XJ(32),this.Dz=this.XJ(32),this.duration=this.XJ(64)):(this._z=this.XJ(32),this.Az=this.XJ(32),this.rZ=this.XJ(32),this.Dz=this.XJ(32),this.duration=this.XJ(32)),this.Mz=[this.XJ(32),this.XJ(32)],this.aZ=this.XJ(16),this.fZ=this.XJ(16),this.volume=this.ZJ(16),this.cZ=this.XJ(16),this.matrix=[];for(var t=0;t<9;t++)this.matrix.push(this.ZJ(32));this.width=this.XJ(32),this.height=this.XJ(32)},o.prototype.rz.trun=function(){this.sz(),this.lZ=this.XJ(32),1&this.flags&&(this.vZ=this.$J(32)),4&this.flags&&(this.dZ=this.XJ(32)),this.rV=[];for(var t=0;t<this.lZ;t++){var e={};256&this.flags&&(e.sample_duration=this.XJ(32)),512&this.flags&&(e.EZ=this.XJ(32)),1024&this.flags&&(e.pZ=this.XJ(32)),2048&this.flags&&(0==this.version?e.wZ=this.XJ(32):e.wZ=this.$J(32)),this.rV.push(e)}},o.prototype.rz.gZ=function(){var t=new DataView(this.GJ.buffer,this.xJ.offset,this.GJ.byteLength-(this.xJ.offset-this.QJ));this.bZ=r.La.UJ(t)},o.prototype.rz.yZ=function(){var t=new DataView(this.GJ.buffer,this.xJ.offset,this.GJ.byteLength-(this.xJ.offset-this.QJ));this.config=r.La.UJ(t)},o.prototype.rz.TZ=function(){}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0}),e.kB=function(){}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(0),o=i(1),s=i(2),a=function(t,e){this.name=t,this.iv=e},u=(h.prototype.init=function(){var t=this;try{this.mZ();var e=r.defer();this.OZ().then((function(){return e.resolve(!0)})).fail((function(i){o.ErrorMonitor.lt().logError("Error initializing key",t.loggerId,s.Fn.xn,i),e.resolve(!1)})),this.SZ=e.promise}catch(t){o.ErrorMonitor.lt().logError("Error initializing AES Manager",this.loggerId,s.Fn.Gn,t)}},h.prototype.EL=function(){return this.SZ?this.SZ:r.resolve(!1)},h.prototype.OZ=function(){var t=this;if(this.RZ)return this.RZ;var e=r.defer();return this.IZ().then((function(i){window.crypto.subtle.importKey("raw",i,t._Z,!1,["decrypt"]).then((function(t){e.resolve(t)}),(function(t){e.reject("error importing key: "+t.toString())}))})).fail((function(t){return e.reject(t)})),this.RZ=e.promise,this.RZ},h.prototype.mZ=function(){for(var t=2,e=this.AZ.length,i=[];t<e;t+=2)i.push(parseInt(this.AZ.substr(t,2),16));this.iv=new Uint8Array(i)},h.prototype.decrypt=function(t){var e=this,i=r.defer(),n=new a(this._Z,this.iv);return this.RZ.then((function(e){window.crypto.subtle.decrypt(n,e,t).then((function(t){i.resolve(t)}))})).catch((function(t){o.ErrorMonitor.lt().logError("Error decrypting arraybuffer",e.loggerId,s.Fn.Vn,t),e.failed=!0,e.SZ=r.resolve(!1),i.reject(t)})),i.promise},h.prototype.IZ=function(){var t=this,e=r.defer(),i=new XMLHttpRequest;return i.responseType="arraybuffer",i.open("GET",this.NZ),this.CZ&&i.setRequestHeader("Authorization",this.CZ),i.onload=function(){if(200===i.status){var r=new Uint8Array(i.response);e.resolve(r)}else o.ErrorMonitor.lt().logError("Error downloading key",t.loggerId,s.Fn.qn,i.status),e.reject("error downloading key - status: "+i.status)},i.onerror=function(){o.ErrorMonitor.lt().logError("Error downloading key",t.logger,s.Fn.Qn),e.reject("error downloading key")},i.send(),e.promise},h.prototype.zB=function(){return this.failed},h);function h(t,e,i){this.loggerId="[DASH AES Manager] ",this._Z="AES-CBC",this.failed=!1,this.logger=n.Framework&&n.Framework.resolve(n.Framework.ht.m)?n.Framework.resolve(n.Framework.ht.m).log():console,this.NZ=t,this.AZ=e,this.logger.debug(this.loggerId+"Starting Dash AES Manager"),i&&(this.CZ=i)}e.ZB=u},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=(o.prototype.init=function(){},o.prototype.EL=function(){return r.resolve(!1)},o.prototype.decrypt=function(t){return r.reject("unsupported")},o.prototype.zB=function(){return!1},o);function o(){}e.tV=n},function(t,e,i){var r;!function(){"use strict";var n={kZ:/[^s]/,DZ:/[^t]/,MZ:/[^T]/,jZ:/[^v]/,number:/[diefg]/,PZ:/[bcdiefguxX]/,json:/[j]/,HZ:/[^j]/,text:/^[^\x25]+/,LZ:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,UZ:/^\.([a-z_][a-z_\d]*)/i,FZ:/^\[(\d+)\]/,sign:/^[+-]/};function o(t){return function(t,e){var i,r,s,a,u,h,c,l,p,f=1,d=t.length,g="";for(r=0;r<d;r++)if("string"==typeof t[r])g+=t[r];else if("object"==typeof t[r]){if((a=t[r]).keys)for(i=e[f],s=0;s<a.keys.length;s++){if(null==i)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[s],a.keys[s-1]));i=i[a.keys[s]]}else i=a.GZ?e[a.GZ]:e[f++];if(n.MZ.test(a.type)&&n.jZ.test(a.type)&&i instanceof Function&&(i=i()),n.PZ.test(a.type)&&"number"!=typeof i&&isNaN(i))throw new TypeError(o("[sprintf] expecting number but found %T",i));switch(n.number.test(a.type)&&(l=0<=i),a.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,a.width?parseInt(a.width):0);break;case"e":i=a.precision?parseFloat(i).toExponential(a.precision):parseFloat(i).toExponential();break;case"f":i=a.precision?parseFloat(i).toFixed(a.precision):parseFloat(i);break;case"g":i=a.precision?String(Number(i.toPrecision(a.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=a.precision?i.substring(0,a.precision):i;break;case"t":i=String(!!i),i=a.precision?i.substring(0,a.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=a.precision?i.substring(0,a.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=a.precision?i.substring(0,a.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}n.json.test(a.type)?g+=i:(!n.number.test(a.type)||l&&!a.sign?p="":(p=l?"+":"-",i=i.toString().replace(n.sign,"")),h=a.xZ?"0"===a.xZ?"0":a.xZ.charAt(1):" ",c=a.width-(p+i).length,u=a.width&&0<c?h.repeat(c):"",g+=a.align?p+i+u:"0"===h?p+u+i:u+p+i)}return g}(function(t){if(a[t])return a[t];for(var e,i=t,r=[],o=0;i;){if(null!==(e=n.text.exec(i)))r.push(e[0]);else if(null!==(e=n.LZ.exec(i)))r.push("%");else{if(null===(e=n.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){o|=1;var s=[],u=e[2],h=[];if(null===(h=n.key.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(h[1]);""!==(u=u.substring(h[0].length));)if(null!==(h=n.UZ.exec(u)))s.push(h[1]);else{if(null===(h=n.FZ.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(h[1])}e[2]=s}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:e[0],GZ:e[1],keys:e[2],sign:e[3],xZ:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}i=i.substring(e[0].length)}return a[t]=r}(t),arguments)}function s(t,e){return o.apply(null,[t].concat(e||[]))}var a=Object.create(null);e.vV=o,e.BZ=s,"undefined"!=typeof window&&(window.vV=o,window.BZ=s,void 0===(r=function(){return{vV:o,BZ:s}}.call(e,i,e,t))||(t.exports=r))}()},function(t,e,i){var r,n;void 0===(n="function"==typeof(r=function(t){"use strict";var e,i;Object.defineProperty(t,"s",{value:!0});var r={YEAR:31536e3,MONTH:2628e3,DAY:86400,HOUR:3600,MINUTE:60,SECOND:1},n=((e={}).VZ=0,e.qZ=0,e.QZ=0,e),o=((i={}).WZ=0,i.YZ=0,i.KZ=0,i),s=function(t){return/^-?P((([0-9]+Y([0-9]+M)?([0-9]+D)?|([0-9]+M)([0-9]+D)?|([0-9]+D))(T(([0-9]+H)([0-9]+M)?([0-9]+(\.[0-9]+)?S)?|([0-9]+M)([0-9]+(\.[0-9]+)?S)?|([0-9]+(\.[0-9]+)?S)))?)|(T(([0-9]+H)([0-9]+M)?([0-9]+(\.[0-9]+)?S)?|([0-9]+M)([0-9]+(\.[0-9]+)?S)?|([0-9]+(\.[0-9]+)?S))))$/.test(t)},a=function(t){return"string"==typeof t&&0<t.length},u=function(t){return"-"===t[0]},h=function(t){return t.slice(1)},c=function(t,e){return function(t,e){return r[t.toUpperCase()]*e}(t,l(e))},l=function(t){var e=parseFloat(t);return isNaN(e)?0:e},p=function(t){var e=u(t),i=(e?h(t):t).split("T"),r=h(i[0]),n=i[1],o=0;return a(r)&&(o+=function(t){var e=/^(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?$/g.exec(t)||[],i=e[1],r=e[2],n=e[3];return c("year",i)+c("month",r)+c("day",n)}(r)),a(n)&&(o+=function(t){var e=/^(?:(\d+)H)?(?:(\d+)M)?(?:(\d+(?:\.\d+)?)S)?$/g.exec(t)||[],i=e[1],r=e[2],n=e[3];return c("hour",i)+c("minute",r)+c("second",n)}(n)),e?-o:o},f=t.$Z=function(t){var e,i=u(t),r=(i?h(t):t).split("T"),s=h(r[0]),c=r[1],p=((e={}).XZ=i,e);return p=a(s)?Object.assign(p,function(t){var e,i=/^(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?$/g.exec(t)||[],r=i[1],n=i[2],o=i[3];return(e={}).years=l(r),e.months=l(n),e.days=l(o),e}(s)):Object.assign(p,n),a(c)?Object.assign(p,function(t){var e,i=/^(?:(\d+)H)?(?:(\d+)M)?(?:(\d+(?:\.\d+)?)S)?$/g.exec(t)||[],r=i[1],n=i[2],o=i[3];return(e={}).hours=l(r),e.minutes=l(n),e.seconds=l(o),e}(c)):Object.assign(p,o)};t.default=function(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof t)return s(t)?e?f(t):p(t):null;throw new TypeError("expected input to be a string")}(t,e)}})?r.apply(e,[e]):r)||(t.exports=n)},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(85),a=i(61),u=i(57),h=i(3),c=(n(l,o=s.pV),l.prototype.NB=function(t,e){this.manifest=this.dV.parse(e,this.RB(t))},l.prototype.fL=function(t){var e=this,i=h.defer(),r=this.WH(t.Lp());if(!r||r.next)return i.resolve(!1),i.promise;var n=h.defer();if(this.dL)u.DASH.kH?this.dL.EL().then((function(i){i?e.dL.decrypt(t.Xp).then((function(t){n.resolve(e.iV(t))})).fail((function(t){return n.reject(!0)})):n.reject(!1)})):n.reject(!1);else try{var o=this.iV(t.Xp);n.resolve(o)}catch(o){this.logger.warn("error extracting duration",o),n.reject(!0)}return n.promise.then((function(t){if(!isNaN(t)){var n=r.id+t;e.logger.debug("found next fragment: "+r.id+" -> "+n+" duration: "+t),e.IB.forEach((function(e){if(e.type===r.type){var i=e.HB.replace(s.pV.JB,r.id+""),o=e.HB.replace(s.pV.JB,n+""),u=e.XH.get(i);if(!e.XH.has(o)&&u){u.duration=t;var h=new a.wU(n,e.bandwidth,t,o,o);h.type=u.type,u.next=h,e.XH.set(o,h),e.qB.set(n,h)}}}))}i.resolve(!1)})).fail((function(r){e.logger.debug("could not extract duration from "+t.Lp()+" [reevaluate: "+r+"]"),i.resolve(r)})),i.promise},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.AL=c},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(1),n=i(149),o=i(4),s=i(150),a=i(61),u=i(0),h=i(6),c=i(88),l=i(2),p=(f.prototype.parse=function(t,e){try{var i=new n.JZ;if(i.push(e),i.manifest.playlists)this.zZ(t,i.manifest);else{var o=this.ZZ(t,i.manifest);if(o&&o.t0&&(this.live=!o.t0.i0),this.live){var s=this.n0(i.manifest,e);return this.logger.debug("HLS manifest trimmed "+s.r0+" segments ("+s.r0+"s) - new segments:["+o.s0.map((function(t){return t.id+":"+t.duration}))+"]"),s.e0}}return e}catch(i){return r.ErrorMonitor.lt().logError("Error parsing metadata",this.loggerId,l.Sr.rr,{detailedError:i,url:t}),e}},f.prototype.RL=function(t,e){return this.XV.has(e)?this.XV.get(e).qB.get(t):null},f.prototype.xH=function(){return this.$V.values().map((function(t){return t.bitrate}))},f.prototype.isLive=function(){return this.live},f.prototype.WH=function(t){return null==this.XH?null:this.XH.get(t)},f.prototype.JH=function(t){try{var e=this.XH.get(t);if(e){var i=e.bitrate;return this.XV.get(i).qB.get(e.id+1)}return null}catch(e){return r.ErrorMonitor.lt().logError("Error getting the next segment info",this.loggerId,l.Sr.hr,{detailedError:e,url:t}),null}},f.prototype.YV=function(t){return this.$V.has(t)},f.prototype.KV=function(){return this.h0},f.prototype.zZ=function(t,e){var i=this;this.h0=t,this.o0=e,this.$V=new o,this.XH=new o,this.XV=new o,this.o0.playlists.forEach((function(e){var r=h.La.Aa(t,e.uri),n=e.attributes.BANDWIDTH,o=new s.u0(n,e.uri,r);i.$V.set(r,o),i.XV.set(n,o)}))},f.prototype.ZZ=function(t,e){var i=this;try{var n=this.$V.get(t);if(!n)return void r.ErrorMonitor.lt().logError("Playlist url does not match any playlist in the master file",this.loggerId,l.Sr.Rr,{url:t});var o=null!=e.mediaSequence?e.mediaSequence:0,s=[],u=o-1,c=n.qB.get(u),p=[];return e.JV.forEach((function(e){var u=h.La.Aa(t,e.uri),l=Math.round(1e3*e.duration),f=n.bitrate;Number.isInteger(f)||(r.ErrorMonitor.lt().logError("Segment Bitrate is a Float",{bitrate:f}),f=Math.round(f));var d=new a.wU(o,f,l,e.uri,u);i.XH.has(u)||p.push(d),i.XH.set(u,d),n.qB.set(o,d),s.push(d),c&&(c.next=d),c=d,o++})),(this.a0=n).update(e.mediaSequence,e.discontinuitySequence,e.i0,e.f0,s),{t0:n,s0:p}}catch(e){return r.ErrorMonitor.lt().logError("Error updating the playlist",this.loggerId,l.Sr.Ar,e),null}},f.prototype.n0=function(t,e){try{for(var i=e.split("\n"),n=Math.max(1,c.HLS.BV),o=null,s=0,a=0,u=t.JV.length-1;n-1<u&&(o=t.JV[u],!(s>=c.HLS.xV));u--)a++,s+=o.duration;var h="";if(o){for(u=0;u<i.length&&(h=h+i[u]+"\n",i[u].trim()!==o.uri);u++);this.logger.debug("HLS trimmed "+a+" segments for total duration: "+s)}else h=i.join("\n")+"\n",this.logger.debug("HLS trimming disabled (minFragments = "+n+", segments.length = "+t.JV.length+")");return{e0:h,r0:a,c0:s}}catch(t){throw r.ErrorMonitor.lt().logError("Error trimming the playlist",this.loggerId,l.Sr.Nr,t),new Error(t)}},f);function f(){this.loggerId="[HLS METADATA] ",this.$V=new o,this.a0=null,this.logger=(u.Framework.resolve(u.Framework.ht.m)||console).log()}e.iq=p},function(t,e,i){var r=function(){var t={OS:{}};function e(t){for(var e,i=t.split(o),r=i.length,n={};r--;)""!==i[r]&&((e=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),n[e[0]]=e[1]);return n}t.OS.create=Object.create||function(t){function e(){}return e.prototype=t,new e},t.OS.l0=function(t,e,i){for(var r in t)hasOwnProp.call(t,r)&&e.call(i||this,r,t[r])},t.OS.mm=function(t,e){if(!e)return t;for(var i in e)hasOwnProp.call(e,i)&&(t[i]=e[i]);return t},t.OS.v0=function(e,i){var r,n,o;for(r in e=t.OS.hC(e),i)hasOwnProp.call(i,r)&&(n=e[r],o=i[r],t.OS.d0(n)&&t.OS.d0(o)?e[r]=t.OS.v0(n,o):e[r]=i[r]);return e},t.OS.hC=function(e){return t.OS.mm({},e)},t.OS.d0=function(t){return!!t&&"object"==typeof t&&"[object Object]"===t.toString()&&t.constructor===Object},t.OS.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.mergeOptions=function(e,i){var r,n,o;for(r in e=t.OS.hC(e),i)i.hasOwnProperty(r)&&(n=e[r],o=i[r],t.OS.d0(n)&&t.OS.d0(o)?e[r]=t.util.mergeOptions(n,o):e[r]=i[r]);return e},(s=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e].push(i)},this.off=function(e,i){var r;return!!t[e]&&(r=t[e].indexOf(i),t[e].splice(r,1),-1<r)},this.trigger=function(e){var i,r,n,o;if(i=t[e])for(o=Array.prototype.slice.call(arguments,1),n=i.length,r=0;r<n;++r)i[r].apply(this,o)},this.p0=function(){t={}}}}).prototype.E0=function(t){this.on("data",(function(e){t.push(e)}))},t.w0=s;var i,r,n,o=new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'),s=t.w0;return(i=function(){var t="";i.prototype.init.call(this),this.push=function(e){var i;for(i=(t+=e).indexOf("\n");-1<i;i=t.indexOf("\n"))this.trigger("data",t.substring(0,i)),t=t.substring(i+1)}}).prototype=new s,(r=function(){r.prototype.init.call(this)}).prototype=new s,r.prototype.push=function(t){var i,r;if(0!==(t=t.replace(/^\s+|\s+$/g,"")).length)if("#"===t[0])if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),i=/^#EXTM3U/.exec(t))this.trigger("data",{type:"tag",g0:"m3u"});else{if(i=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return r={type:"tag",g0:"inf"},i[1]&&(r.duration=parseFloat(i[1])),i[2]&&(r.title=i[2]),void this.trigger("data",r);if(i=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return r={type:"tag",g0:"targetduration"},i[1]&&(r.duration=parseInt(i[1],10)),void this.trigger("data",r);if(i=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return r={type:"tag",g0:"totalduration"},i[1]&&(r.duration=parseInt(i[1],10)),void this.trigger("data",r);if(i=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return r={type:"tag",g0:"version"},i[1]&&(r.version=parseInt(i[1],10)),void this.trigger("data",r);if(i=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return r={type:"tag",g0:"media-sequence"},i[1]&&(r.number=parseInt(i[1],10)),void this.trigger("data",r);if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return r={type:"tag",g0:"discontinuity-sequence"},i[1]&&(r.number=parseInt(i[1],10)),void this.trigger("data",r);if(i=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return r={type:"tag",g0:"playlist-type"},i[1]&&(r.b0=i[1]),void this.trigger("data",r);if(i=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return r={type:"tag",g0:"byterange"},i[1]&&(r.length=parseInt(i[1],10)),i[2]&&(r.offset=parseInt(i[2],10)),void this.trigger("data",r);if(i=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return r={type:"tag",g0:"allow-cache"},i[1]&&(r.EM=!/NO/.test(i[1])),void this.trigger("data",r);if(i=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t))return r={type:"tag",g0:"stream-inf"},i[1]&&(r.attributes=e(i[1]),r.attributes.y0&&(o={},(n=r.attributes.y0.split("x"))[0]&&(o.width=parseInt(n[0],10)),n[1]&&(o.height=parseInt(n[1],10)),r.attributes.y0=o),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes.T0&&(r.attributes.T0=parseInt(r.attributes.T0,10))),void this.trigger("data",r);var n,o;if(i=/^#EXT-X-ENDLIST/.exec(t))this.trigger("data",{type:"tag",g0:"endlist"});else if(i=/^#EXT-X-DISCONTINUITY/.exec(t))this.trigger("data",{type:"tag",g0:"discontinuity"});else{if(i=/^#EXT-X-KEY:?(.*)$/.exec(t))return r={type:"tag",g0:"key"},i[1]&&(r.attributes=e(i[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2)&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r);this.trigger("data",{type:"tag",data:t.slice(4,t.length)})}}else this.trigger("data",{type:"comment",text:t.slice(1)});else this.trigger("data",{type:"uri",uri:t})},(n=function(){var e,o=this,s=[],a={};n.prototype.init.call(this),this.m0=new i,this.O0=new r,this.m0.E0(this.O0),this.manifest={S0:!0},this.O0.on("data",(function(i){({tag:function(){({"allow-cache":function(){this.manifest.S0=i.EM,"allowed"in i||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.S0=!0)},byterange:function(){var t={};"length"in i&&((a.byterange=t).length=i.length,"offset"in i||(this.trigger("info",{message:"defaulting offset to zero"}),i.offset=0)),"offset"in i&&((a.byterange=t).offset=i.offset)},endlist:function(){this.manifest.i0=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<=i.duration&&(a.duration=i.duration),this.manifest.JV=s},key:function(){i.attributes?"NONE"!==i.attributes.R0?i.attributes.Ab?(i.attributes.R0||this.trigger("warn",{message:"defaulting key method to AES-128"}),e={method:i.attributes.R0||"AES-128",uri:i.attributes.Ab},void 0!==i.attributes.IV&&(e.iv=i.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):e=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(i.number)?this.manifest.mediaSequence=i.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+i.number})},"discontinuity-sequence":function(){isFinite(i.number)?this.manifest.discontinuitySequence=i.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+i.number})},"playlist-type":function(){/VOD|EVENT/.test(i.b0)?this.manifest.b0=i.b0:this.trigger("warn",{message:"ignoring unknown playlist type: "+i.t0})},"stream-inf":function(){this.manifest.playlists=s,i.attributes?(a.attributes||(a.attributes={}),a.attributes=t.mergeOptions(a.attributes,i.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},discontinuity:function(){a.discontinuity=!0},targetduration:function(){!isFinite(i.duration)||i.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+i.duration}):this.manifest.f0=i.duration},totalduration:function(){!isFinite(i.duration)||i.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+i.duration}):this.manifest.I0=i.duration}}[i.g0]||function(){}).call(o)},uri:function(){a.uri=i.uri,s.push(a),!this.manifest.f0||"duration"in a||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.f0),e&&(a.key=e),a={}},_0:function(){}})[i.type].call(o)}))}).prototype=new s,n.prototype.push=function(t){this.m0.push(t)},n.prototype.end=function(){this.m0.push("\n")},t.A0=i,t.N0=r,t.JZ=n,t}();t.exports=r},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=(o.prototype.update=function(t,e,i,r,n){this.mediaSequence=t,this.discontinuitySequence=e,this.i0=i,this.f0=r,this.JV=n,this.updated=!0},o);function o(t,e,i){this.qB=new r,this.bitrate=t,this.uri=e,this.zH=i}e.u0=n},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(84),a=(n(u,o=s.SB),u);function u(){return null!==o&&o.apply(this,arguments)||this}e.tq=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(16),n=i(0),o=i(5),s=i(3),a=i(7),u=i(2),h=i(1),c=(l.prototype.init=function(t,e){try{this.C0.init(t,e),a.ut.Ya&&o.ea.Cache.Zo&&this.k0.init(t,e)}catch(t){h.ErrorMonitor.lt().logError("Error initializing cache",this.loggerId,u.li.vi,t)}},l.prototype.put=function(t){var e=this,i=s.defer();try{!t.Zp.isLive()&&a.ut.Ya&&o.ea.Cache.Zo?this.k0.put(t).then((function(){i.resolve(!0)})).catch((function(t){t&&h.ErrorMonitor.lt().logError("Error adding new fragment in cache",e.loggerId,u.li.di,t),i.reject(!1)})):this.C0.put(t).then((function(){i.resolve(!0)})).catch((function(t){t&&h.ErrorMonitor.lt().logError("Error adding new fragment in cache",e.loggerId,u.li.di,t),i.reject(!1)}))}catch(t){h.ErrorMonitor.lt().logError("Error adding new fragment in cache",this.loggerId,u.li.di,t),i.reject(!1)}return i.promise},l.prototype.get=function(t){var e=this,i=s.defer();try{this.contains(t).then((function(r){r?e.C0.get(t).then((function(t){i.resolve(t)})).catch((function(r){r&&h.ErrorMonitor.lt().logError("Error getting the fragment from cache",e.loggerId,u.li.Ei,r),a.ut.Ya&&o.ea.Cache.Zo?e.k0.get(t).then((function(t){i.resolve(t)})).catch((function(){i.reject(!1)})):i.reject(!1)})):i.reject(!1)})).catch((function(t){t&&h.ErrorMonitor.lt().logError("Error getting the fragment from cache",e.loggerId,u.li.Ei,t),i.reject(!1)}))}catch(t){h.ErrorMonitor.lt().logError("Error getting the fragment from cache",this.loggerId,u.li.Ei,t),i.reject(!1)}return i.promise},l.prototype.contains=function(t){var e=this,i=s.defer(),r=!1;try{this.C0.contains(t).then((function(i){!r&&a.ut.Ya&&o.ea.Cache.Zo?e.k0.contains(t).then((function(t){r=t})):r=i})).fail((function(t){e.logger.error(t)})).finally((function(){i.resolve(r)}))}catch(t){h.ErrorMonitor.lt().logError("Error checking if cache contains the fragment",this.loggerId,u.li.pi,t),i.resolve(!1)}return i.promise},l.prototype.OM=function(t){try{return!t&&a.ut.Ya&&o.ea.Cache.Zo?this.k0.OM(t):this.C0.OM(t)}catch(t){return h.ErrorMonitor.lt().logError("Error getting the keys from cache",this.loggerId,u.li.wi,t),[]}},l.prototype.cq=function(t){var e=this,i=s.defer(),r=[];try{!t&&a.ut.Ya&&o.ea.Cache.Zo?this.k0.cq(t).then((function(t){r=t})).fail((function(t){e.logger.error(t)})).finally((function(){i.resolve(r)})):this.C0.cq(t).then((function(t){r=t})).fail((function(t){e.logger.error(t)})).finally((function(){i.resolve(r)}))}catch(t){h.ErrorMonitor.lt().logError("Error getting the elements from cache ",this.loggerId,u.li.gi,t),i.resolve(r)}return i.promise},l.prototype.vq=function(){this.C0.vq()},l);function l(){this.loggerId="[CACHE] ",this.logger=n.Framework.resolve(n.Framework.ht.m).log(),this.C0=n.Framework.resolve(r.nl.Dc),a.ut.Ya&&o.ea.Cache.Zo&&(this.k0=n.Framework.resolve(r.nl.Mc))}e.Cache=c},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(26),o=i(6),s=i(5),a=i(0),u=i(9),h=i(1),c=i(2),l=i(19),p=(f.prototype.init=function(t){this.logger=a.Framework.resolve(a.Framework.ht.m).log(t.sessionId),this.D0=t.MD,this.PD=t.PD,this.PD&&(this.oa=this.PD.M0()),this.pl=t.yd.pl,this.pl.XF(this.JF)},f.prototype.request=function(t){var e=this,i=a.Framework.resolve(a.Framework.ht.T),r=!1,n=t.Pp(),l=t.zp,p=t.Lp();t.xhr=i,t.Vp._p=a.Framework.time(),this.logger.debug("FRL ISSUE REQ FOR FRAGMENT "+t.Mp.toString()+"-"+t.Vp.yp+" ["+u.wf[t.Dp()]+"] TO FALLBACK "),t.Mp.dA()&&(i.responseType="arraybuffer"),this.j0(t.type)&&l.range&&t.Dp()!=u.wf.yf&&i.setRequestHeader("Range","bytes="+l.range),s.ea.N.uu&&this.P0(t.type)&&0!=t.Vp.yp&&(this.logger.info("SET RANGE bytes="+t.Vp.yp+"-"),i.setRequestHeader("Range","bytes="+t.Vp.yp+"-")),l.uB.forEach((function(t){"range"!==t.key.toLowerCase()&&i.setRequestHeader(t.key,t.value)})),l.async&&0<l.timeout&&(i.timeout=l.timeout),l.mimeType&&i.overrideMimeType(l.mimeType),l.withCredentials&&(i.withCredentials=l.withCredentials),i.onloadstart=function(t){var e=o.La.createEvent(Event,"loadstart",t,l);l.dispatchEvent(e)},i.onabort=function(t){if(!r){var e=o.La.createEvent(Event,"abort",t,l);l.dispatchEvent(e)}},i.ontimeout=function(i){if(!r){e.error(t,n,10);var s=o.La.createEvent(ProgressEvent,"timeout",i,l);l.dispatchEvent(s),h.ErrorMonitor.lt().logError("Error on fallback request because of timeout",e.loggerId,c.se.ee)}},i.onreadystatechange=function(t){if(l&&(i.readyState===XMLHttpRequest.HEADERS_RECEIVED&&(l.$p=i.getAllResponseHeaders(),l.status=i.status,l.statusText=i.statusText),i.readyState<XMLHttpRequest.DONE||i.readyState===XMLHttpRequest.DONE&&0===i.status)){l.readyState=i.readyState;var e=o.La.createEvent(Event,"readystatechange",t,l);l.dispatchEvent(e)}},i.onprogress=function(r){if(!e.P0(t.type)){var n=o.La.createEvent(ProgressEvent,"progress",r,l);l.dispatchEvent(n),i.total=r.total}t.Vp.Op=r.total,t.size=r.total},i.onload=function(u){if(r=!0,l.status=i.status,u&&0!=u.total&&(t.Vp.Op=u.total),t.$p=i.getAllResponseHeaders(),i.status<200||299<i.status)return e.logger.debug("FRL SERVER RETURNED ERROR CODE "+i.status),void e.error(t,n);t.Mp.dA()?e.j0(t.type)?t.Xp=i.response:e.P0(t.type)&&(s.ea.N.uu?t.Xp=a.Framework.U()?null:o.La.appendBuffer(t.Xp,i.response):t.Xp=i.response):t.sL=i.responseText,t.loaded(),e.H0.delete(n),t.Vp.Ap=a.Framework.time(),e.L0(t),e.U0(t),e.D0.EJ(t),i=null},i.onerror=function(){r||e.error(t,n)},this.H0.set(n,t),i.open("GET",p,l.async,l.username,l.password),i.send()},f.prototype.error=function(t,e,i){this.pl&&-1==s.ea.Yu.Io.indexOf(t.xhr.status)&&(i&&0<i?this.pl.MG(i):t.xhr.status&&0<t.xhr.status?this.pl.MG(t.xhr.status):this.pl.MG(404));var r="COULD NOT DOWNLOAD "+t.Lp()+" status: "+t.xhr.status;t.type==n.fp.vp?this.logger.debug(r):this.logger.warn(r),this.F0(t),this.H0.delete(e),this.D0.lJ(t)},f.prototype.ah=function(t){return this.H0.has(t)},f.prototype.j0=function(t){return t==n.fp.vp||t==n.fp.lp||t==n.fp.cp},f.prototype.P0=function(t){return t==n.fp.dp},f.prototype.zX=function(t){var e=this.H0.get(t);this.H0.delete(t),e&&e.xhr&&e.xhr.abort()},f.prototype.U0=function(t){t.Mp.Dp()==u.wf.bf&&this.JF.add(t.Bp()),this.logger.info("SUCCESS FROM FALLBACK FOR "+t.Lp()+" ["+n.fp[t.type]+"]["+t.Vp.Op+"] AFTER "+t.Bp()+" [curr:"+t.Qp().pa()+" avg:"+this.oa.pa()+"]")},f.prototype.F0=function(t){},f.prototype.eJ=function(){return this.oa},f.prototype.L0=function(t){t.Dp()===u.wf.bf&&this.oa.ca(t.Qp())},f);function f(){this.loggerId="[FallbackRequester] ",this.H0=new r,this.oa=new o.ga,this.JF=new l.Vl}e.C$=p},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3);i(60);var n=i(0),o=i(5),s=i(16),a=i(49),u=i(58),h=i(10),c=i(92),l=hive.services.protocol.oU.CustomerKey,p=i(8),f=i(14),d=i(7),g=i(1),v=i(2),y=i(19),m=d.ut.$a,E=(w.prototype.init=function(t){this.logger=n.Framework.resolve(n.Framework.ht.m).log(t.sessionId),this.sessionId=t.sessionId,this.TX=t.TX,this.PD=t.PD,this.eU=t.eU,this.PX=t.LD,this.CX.G0(t.sessionId,this),this.x0=c.gq.bq,this.pl=t.yd.pl,this.pl.KF(this.B0)},w.prototype.start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.context=t,this.streamId=t.$.getContextId(),this.ticket=t.$.YM(),this.jd=e},w.prototype.V0=function(t){this.q0=t},w.prototype.gX=function(){var t=this;this.lX(),this.Q0=n.Framework.setInterval((function(){t.W0()}),o.ea.Wu.So),this.W0()},w.prototype.lX=function(){this.Q0&&n.Framework.clearInterval(this.Q0)},w.prototype.Y0=function(){var t=this,e=r.defer(),i=new hive.services.protocol.oU.TrackerRequest,n=this.context.$,o=n.isLive()?StreamType.LIVE:StreamType.VOD;i.sessionId=this.sessionId;var s=new l;return this.q0?(s.partnerId=this.q0.partnerId,s.customerId=this.q0.customerId):f.HiveConfig.ClientInfo.vc&&f.HiveConfig.ClientInfo.dc?(s.partnerId=f.HiveConfig.ClientInfo.vc,s.customerId=f.HiveConfig.ClientInfo.dc):(s.partnerId=this.ticket.pE(),s.customerId=this.ticket.wE()),i.customerKey=s,i.streamType=o,i.contentId=this.PD.getContextId(),this.SE.getConnectivityInfo().then((function(e){t.K0=e.getNetworkChanged().getPrivateIp(),t.PD.Sx(t.K0)})).fail((function(e){g.ErrorMonitor.lt().logError("Error getting connectivity info",t.loggerId,v.Lr.Fr)})).finally((function(){try{var r=new hive.snapshots.ConnectivityInfo;r.publicIp=t.TG,r.privateIp=t.K0,i.info=t.$0(r,n),i.query=t.X0(n,i.info),e.resolve(i)}catch(r){g.ErrorMonitor.lt().logError("Error collecting the data for the tracker request",t.loggerId,v.Lr.Gr,r),e.reject("ERROR")}})).done(),e.promise},w.prototype.J0=function(){var t=new Array;return this.x0==c.gq.bq?t.push(hive.services.protocol.oU.uU.Global):this.x0==c.gq.AS?t.push(hive.services.protocol.oU.uU.fU):this.x0==c.gq.ID?t.push(hive.services.protocol.oU.uU.aU):this.logger.warn("Wrong locality mode"),t},w.prototype.X0=function(t,e){var i=this,r=new hive.services.protocol.oU.TrackerQuery;try{return r.random=o.ea.Zu.Ou,e.externalAs&&!this.yG&&(this.yG=e.externalAs),e.internalAs&&!this.z0&&(this.z0=e.internalAs),r.rankings=this.J0(),r.asns=[],0<this.yG&&this.Z0(r.asns,hive.services.protocol.oU.cU.External,this.yG,o.ea.Zu.Su),0<this.z0&&(this.Z0(r.asns,hive.services.protocol.oU.cU.lU,this.z0,o.ea.Zu.Ru),r.watchers=[],t.xH().forEach((function(t){var e=i.t1(hive.services.protocol.oU.cU.lU,i.z0,t,-1);r.watchers.push({key:e,value:1})})),r.streamers=[],this.PD.TW().forEach((function(t,e){var n=i.t1(hive.services.protocol.oU.cU.lU,i.z0,e,t.type==a.SD.ID?hive.services.protocol.oU.Sf._f:-1);r.streamers.push({key:n,value:o.ea.Zu.Iu})}))),r}catch(t){throw g.ErrorMonitor.lt().logError("Error preparing tracker query",this.loggerId,v.Lr.xr,t),new Error(t)}},w.prototype.t1=function(t,e,i,r){var n=new hive.services.protocol.oU.TrackerBitrateQuery,o=new hive.services.protocol.oU.TrackerAsQuery;return o.asType=t,o.asn=e,n.bitrate=i,n.asn=o,-1!=r&&n.streamState,n},w.prototype.Z0=function(t,e,i,r){var n=new hive.services.protocol.oU.TrackerAsQuery;n.asType=e,n.asn=i,t.push({key:n,value:r})},w.prototype.$0=function(t,e){var i=new hive.services.protocol.oU.TrackerPeerInfo;try{if(n.Framework.U()?i.guid=this.tE:i.guid=btoa(this.tE),i.timestamp=n.Framework.time(),i.nat=void 0,this.PD.HM()&&(i.externalAs=this.PD.HM()),this.PD.PM()&&(i.internalAs=this.PD.PM()),null!=t){i.publicIpString=t.publicIp;var r=new InetAddress;r.address=t.publicIp,i.publicIp=r,i.privateIpString=t.privateIp;var o=new InetAddress;o.address=t.privateIp,i.privateIp=o}var s=Math.round(this.PD.M0().va()/8);if(i.bandwidth=isNaN(s)?null:s,!this.PD.AM()&&this.PD.GM()&&m?i.rankValue=1:i.rankValue=this.PD.i1(),this.context.$ instanceof u.UH){i.streams=new Array;var h=e.WD();null!=h&&(i.watchingBitrate=h.bitrate);var c=e.kL();this.PD.TW().forEach((function(t,e){if(t.fA){var r=new hive.services.protocol.oU.TrackerPeerStreamInfo;switch(r.bitrate=e,t.type){case a.SD.Rf:r.state=hive.services.protocol.oU.Sf.If;break;case a.SD.RD:r.state=hive.services.protocol.oU.Sf.Af;break;case a.SD.ID:r.state=hive.services.protocol.oU.Sf._f}r.delta=c.fM(t.fA.cA(),e),i.streams.push(r)}}))}return i}catch(t){throw g.ErrorMonitor.lt().logError("Error preparing tracker info",this.loggerId,v.Lr.Vr,t),new Error(t)}},w.prototype.W0=function(){var t=this;this.n1=n.Framework.time(),this.logger.debug(this.loggerId+" PREPARE REQUEST"),this.Y0().then((function(e){var i=t.loggerId+"SENDING TRACKER REQUEST [ privateIp:"+e.info.privateIpString+" rank:"+e.info.rankValue+"]";switch(t.s1){case 0:default:t.logger.debug(i);break;case 1:t.logger.debug(i+" "+JSON.stringify(e));break;case 2:t.logger.debug(i,e);break;case 3:t.logger.debug(i+" "+JSON.stringify(e),e)}t.CX.e1(e)}),(function(e){g.ErrorMonitor.lt().logError("Error preparing the tracker request",t.loggerId,v.Lr.Ur)})).catch((function(e){g.ErrorMonitor.lt().logError("Error sending tracker request",t.loggerId,v.Lr.qr,e)}))},w.prototype.h1=function(t){this.x0=t},w.prototype.o1=function(){var t=Math.max(0,n.Framework.time()-this.n1);0<t&&t<o.ea.Zu.TIMEOUT&&this.B0.add(t)},w.prototype.rJ=function(t){var e=this;try{switch(this.o1(),this.s1){case 1:this.logger.debug(this.loggerId+this.context.$.YM()+" Tracker Response: "+JSON.stringify(t));break;case 2:this.logger.debug(this.loggerId+this.context.$.YM()+" Tracker Response: ",t);break;case 3:this.logger.debug(this.loggerId+this.context.$.YM()+" Tracker Response: "+JSON.stringify(t),t)}this.yG=t.peerInfo.externalAs,this.z0=t.peerInfo.internalAs,this.TG=t.peerInfo.publicIpString,this.K0=t.peerInfo.privateIpString,this.PD.bx(this.TG),this.PD.u1(this.z0),this.PD.a1(this.yG),this.SE.px(this.TG,this.K0,this.z0),this.logger.debug(this.loggerId+"Reporting from tracker public IP:"+this.TG+" private IP: "+this.K0+" ExtAs:"+this.yG+" inAs:"+this.z0),!this.PD.AM()&&this.PD.GM()&&m?this.PX.nQ(!1):this.PX.f1(t.rankings,t.infos);var i=this.c1(t);this.jd.forEach((function(t){return t.Dq(i,e.l1)})),this.l1=!1}catch(t){g.ErrorMonitor.lt().logError("Error handling the response",this.loggerId,v.Lr.Qr,t)}},w.prototype.c1=function(t){for(var e=[],i=0,r=t.infos;i<r.length;i++){var n=r[i],o=new h.Nf(h.mf.Of,n);e.push(o)}return e},w.prototype.dQ=function(t){},w.prototype.AE=function(t){this.tE=t,this.logger.info(this.loggerId+"CONNECTED "+this.tE),this.PX.v1(),this.gX()},w.prototype.HQ=function(){},w);function w(){this.s1=isNaN(f.HiveConfig.DebugLogs.TrackerLogs)?0:f.HiveConfig.DebugLogs.TrackerLogs,this.loggerId="[TRACKER] ",this.yG=0,this.z0=0,this.d1=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{0,4}){5})/,this.l1=!0,this.yv=n.Framework.resolve(n.Framework.ht.v),this.SE=n.Framework.resolve(p.pf.af),this.CX=n.Framework.resolve(s.nl.Kc),this.B0=new y.Vl}e.D$=E},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(0),o=i(6),s=i(1),a=i(2),u=function(t,e){this.id=t,this.size=e};e.Element=u;var h=(c.prototype.put=function(t,e){try{var i=t.fragmentId,r=t.size;t.bitrate,this.E1.has(i)||(this.E1.set(i,new u(i,r)),this.w1.set(i,new Array)),this.w1.get(i).push(e)}catch(t){throw s.ErrorMonitor.lt().logError("Error adding new have in object index",this.loggerId,a.ae.fe,t),new Error(t)}},c.prototype.contains=function(t){return this.w1.has(t)},c.prototype.jM=function(t){return this.w1.get(t)},c.prototype.MM=function(t){return this.E1.get(t)},c.prototype._W=function(t){var e=this;try{this.w1.forEach((function(i,r){o.La.Ta(i,t,!1),0===i.length&&(e.w1.delete(r),e.E1.delete(r))}))}catch(t){s.ErrorMonitor.lt().logError("Error removing haves send from a specific peer",this.loggerId,a.ae.ce,t)}},c.prototype.dq=function(){var t=this;this.w1.forEach((function(e,i){t.logger.debug("OBJIDX FR "+i+" PS "+e.map((function(t){return t.oW.Kl.otherGuid})).reduce((function(t,e){return t+","+e})))}))},c);function c(){this.loggerId="[ObjectIndex] ",this.E1=new r,this.w1=new r,this.logger=n.Framework.resolve(n.Framework.ht.m).log()}e.H$=h},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(5),o=i(0),s=i(6),a=i(10),u=i(157),h=i(48),c=i(93),l=i(7),p=i(1),f=i(2),d=l.ut.$a,g=(v.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.sessionId),this.HD=t.HD,this.PD=t.PD,this.OX=t.OX,this.g1=t.sU,(d||o.Framework.U()&&h.TD.bD)&&(this.rX=t.rX),this.start()},v.prototype.start=function(){this.b1=!0},v.prototype.stop=function(){this.b1=!1},v.prototype.Dq=function(t,e){var i=this;try{if(this.b1){var r=[];t.forEach((function(t){var e=null;t.guid!=i.tE&&(t.type==a.mf.Of?e=i.T1(t):d||o.Framework.U()&&h.TD.bD?(e=i.m1(t),i.rX.mq(t).then((function(){i.HD.LQ(i.gW.get(t.guid))})).fail((function(e){e&&e!=c.wQ.Pq&&(i.gW.delete(t.guid),p.ErrorMonitor.lt().logError("Error electing lan leader",i.loggerId,f.mi.Si))}))):e=i.m1(t)),e&&r.push(e.peerInfo.guid)})),this.O1(),this.ZP(),e&&this.HD.QQ(e),0<r.length&&this.logger.debug("DISCOVERED NEW "+r.length+"/"+t.length+": ["+r.join(", ")+"]")}}catch(t){p.ErrorMonitor.lt().logError("Error discovering peers",this.loggerId,f.mi.Oi,t)}},v.prototype.ZP=function(){var t=this.S1.length+this.gW.length;this.g1.R1(t)},v.prototype.O1=function(){try{this.S1.length>n.ea.zu.Tu&&this.I1(this.S1,n.ea.zu.Tu),this.gW.length>=n.ea.zu.mu&&this._1(this.gW)}catch(t){p.ErrorMonitor.lt().logError("Error clearing membership views",this.loggerId,f.mi.Ri,t)}},v.prototype.I1=function(t,e){for(var i=t.values().sort((function(t,e){return t.peerInfo.timestamp-e.peerInfo.timestamp}));t.length>e;){var r=i.splice(0,1)[0];this.HD.UQ(r)||t.delete(r.peerInfo.guid)}},v.prototype._1=function(t){var e=t.keys()[o.Framework.random()*t.length];t.delete(e)},v.prototype.m1=function(t){var e=null;try{if(this.S1.has(t.guid)?(e=this.S1.get(t.guid),this.S1.delete(t.guid),this.gW.set(t.guid,e)):this.gW.has(t.guid)&&(e=this.gW.get(t.guid)),!e)return e=new u.A1(t),this.gW.set(t.guid,e),e;e.V0(t)}catch(t){return p.ErrorMonitor.lt().logError("Error adding peer to lan view",this.loggerId,f.mi.Ii,t),null}},v.prototype.T1=function(t){var e=null;try{if(this.gW.has(t.guid))this.m1(t);else{if(!this.S1.has(t.guid))return e=new u.A1(t),this.S1.set(t.guid,e),this.OX.N1(e),e;(e=this.S1.get(t.guid)).V0(t),this.OX.N1(e)}}catch(t){return p.ErrorMonitor.lt().logError("Error adding peer to random view",this.loggerId,f.mi._i,t),null}},v.prototype.WQ=function(t,e){var i=[];try{return this.b1&&(i=d||o.Framework.U()&&h.TD.bD?s.La.Sa(this.S1.values()):(i=this.S1.values(),this.gW.forEach((function(t,e){i.push(t)})),s.La.Sa(i))),t?i:e?i.slice(0,e):i.slice(0,2*n.ea.Bu.io)}catch(t){return p.ErrorMonitor.lt().logError("Error sampling membership",this.loggerId,f.mi.Ai,t),[]}},v.prototype.vW=function(t){return this.S1.has(t)?this.S1.get(t):this.gW.has(t)?this.gW.get(t):null},v.prototype.AE=function(t){this.logger.info("MEMBERSHIP SERVER CONNECTED"),this.tE=t,this.PD.setId(this.tE)},v.prototype.HQ=function(){},v.prototype.dQ=function(t){this.logger.debug("Peer "+t+" disconnected"),this.S1.delete(t),this.gW.delete(t),this.ZP()},v);function v(){this.loggerId="[Membership] ",this.tE=null,this.S1=new r,this.gW=new r}e.zu=g},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(10),n=i(158),o=(s.prototype.sW=function(){return this.peerInfo.type===r.mf.k},s.prototype.C1=function(t){this.D1=new n.M1([t])},s.prototype.j1=function(){return this.D1},s.prototype.P1=function(){return this.OX},s.prototype.H1=function(t){isNaN(t)||(this.OX=t)},s.prototype.V0=function(t){this.peerInfo.type==r.mf.Of&&t.type==r.mf.k?this.peerInfo.type=r.mf.k:this.peerInfo.type==r.mf.Of&&t.type==r.mf.Of||this.peerInfo.type==r.mf.k&&t.type==r.mf.k?this.L1(this.peerInfo,t):this.peerInfo.type==r.mf.k&&t.type==r.mf.Of&&(this.L1(this.peerInfo,t),this.peerInfo.type=r.mf.k)},s.prototype.PW=function(t){this.peerInfo.watchingBitrate=t},s.prototype.L1=function(t,e){t.internalAs=this.U1(t.internalAs,e.internalAs),t.externalAs=this.U1(t.externalAs,e.externalAs),t.nat=this.U1(t.nat,e.nat),t.bandwidth=this.U1(t.bandwidth,e.bandwidth),t.watchingBitrate=this.U1(t.watchingBitrate,e.watchingBitrate),t.privateIpString=this.U1(t.privateIpString,e.privateIpString),t.publicIpString=this.U1(t.publicIpString,e.publicIpString),t.rankValue=this.U1(t.rankValue,e.rankValue),t.timestamp=this.U1(t.timestamp,e.timestamp),e.isLeader&&(t.isLeader=this.U1(t.isLeader,e.isLeader)),e.streams&&(t.streams=e.streams)},s.prototype.U1=function(t,e){return t?e&&t!=e&&(t=e):e&&(t=e),t},s);function s(t){this.OX=0,this.peerInfo=t}e.A1=o},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.prototype.F1=function(){return this.G1||this.B1(),this.G1},n.prototype.B1=function(){for(var t=[],e=0;e<this.columns;e++){for(var i=[],r=0;r<this.rows;r++)i.push(this.matrix[r][e]);t.push(i)}this.G1=new n(t)},n.prototype.V1=function(t){for(var e=t.q1(),i=[],r=0;r<this.rows;r++){for(var o=[],s=0;s<this.columns;s++){var a=this.matrix[r][s]/e[r][s];o.push(a||0)}i.push(o)}return new n(i)},n.prototype.multiply=function(t){for(var e=t.q1(),i=t.Q1(),r=t.W1(),o=[],s=0;s<this.rows;s++){for(var a=this.matrix[s],u=[],h=0;h<r;h++){for(var c=0,l=0;l<i;l++)c+=a[l]*e[l][h];u.push(c)}o.push(u)}return new n(o)},n.prototype.Y1=function(t){for(var e=[],i=0;i<this.rows;i++){for(var r=[],o=0;o<this.columns;o++)r.push(this.matrix[i][o]*t);e.push(r)}return new n(e)},n.prototype.K1=function(t){for(var e=[],i=0;i<this.rows;i++){for(var r=[],o=0;o<this.columns;o++)r.push(this.matrix[i][o]+t);e.push(r)}return new n(e)},n.prototype.X1=function(){for(var t=[],e=0;e<this.rows;e++){for(var i=[],r=0;r<this.columns;r++)i.push(Math.exp(this.matrix[e][r]));t.push(i)}return new n(t)},n.prototype.J1=function(t){for(var e=[],i=0;i<this.rows;i++){var r=this.matrix[i];e.push([t]);for(var o=0;o<r.length;o++)e[i].push(r[o])}return new n(e)},n.prototype.q1=function(){return this.matrix},n.prototype.Q1=function(){return this.rows},n.prototype.W1=function(){return this.columns},n);function n(t){this.matrix=[],this.rows=0,this.columns=0,this.matrix=t,this.rows=this.matrix.length,this.columns=this.matrix[0].length}e.M1=r},function(t,e,i){(function(r){var n,o,s;
/**
 * @license ProtoBuf.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ProtoBuf.js for details
 */o=[i(36)],void 0===(s="function"==typeof(n=function(t,e){"use strict";var n={};return n.z1=t,n._A=t._A||null,n.VERSION="4.1.3",n.Z1={},n.Z1.t2=0,n.Z1.i2=1,n.Z1.n2=2,n.Z1.s2=3,n.Z1.e2=4,n.Z1.h2=5,n.o2=[n.Z1.t2,n.Z1.i2,n.Z1.h2],n.u2={int32:{name:"int32",a2:n.Z1.t2,defaultValue:0},uint32:{name:"uint32",a2:n.Z1.t2,defaultValue:0},sint32:{name:"sint32",a2:n.Z1.t2,defaultValue:0},int64:{name:"int64",a2:n.Z1.t2,defaultValue:n._A?n._A.ZERO:void 0},uint64:{name:"uint64",a2:n.Z1.t2,defaultValue:n._A?n._A.f2:void 0},sint64:{name:"sint64",a2:n.Z1.t2,defaultValue:n._A?n._A.ZERO:void 0},bool:{name:"bool",a2:n.Z1.t2,defaultValue:!1},double:{name:"double",a2:n.Z1.i2,defaultValue:0},string:{name:"string",a2:n.Z1.n2,defaultValue:""},bytes:{name:"bytes",a2:n.Z1.n2,defaultValue:null},fixed32:{name:"fixed32",a2:n.Z1.h2,defaultValue:0},sfixed32:{name:"sfixed32",a2:n.Z1.h2,defaultValue:0},fixed64:{name:"fixed64",a2:n.Z1.i2,defaultValue:n._A?n._A.f2:void 0},sfixed64:{name:"sfixed64",a2:n.Z1.i2,defaultValue:n._A?n._A.ZERO:void 0},float:{name:"float",a2:n.Z1.h2,defaultValue:0},enum:{name:"enum",a2:n.Z1.t2,defaultValue:0},message:{name:"message",a2:n.Z1.n2,defaultValue:null},group:{name:"group",a2:n.Z1.s2,defaultValue:null}},n.c2=[n.u2.int32,n.u2.sint32,n.u2.sfixed32,n.u2.uint32,n.u2.fixed32,n.u2.int64,n.u2.sint64,n.u2.sfixed64,n.u2.uint64,n.u2.fixed64,n.u2.bool,n.u2.string,n.u2.bytes],n.l2=1,n.v2=536870911,n.d2=!1,n.E2=!0,n.w2=!0,n.RR=function(){var t={};return t.g2=!("object"!=typeof r||r+""!="[object process]"||r._C),t.b2=function(){for(var t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],e=null,i=0;i<t.length;i++){try{e=t[i]()}catch(t){continue}break}if(!e)throw Error("XMLHttpRequest is not supported");return e},t.fetch=function(e,r){if(r&&"function"!=typeof r&&(r=null),t.g2){var n=i(23);if(r)n.T2(e,(function(t,e){r(t?null:""+e)}));else try{return n.m2(e)}catch(e){return null}}else{var o=t.b2();if(o.open("GET",e,!!r),o.setRequestHeader("Accept","text/plain"),"function"==typeof o.overrideMimeType&&o.overrideMimeType("text/plain"),!r)return o.send(null),200==o.status||0==o.status&&"string"==typeof o.responseText?o.responseText:null;if(o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0==o.status&&"string"==typeof o.responseText?r(o.responseText):r(null))},4==o.readyState)return;o.send(null)}},t.O2=function(t){return t.replace(/_([a-zA-Z])/g,(function(t,e){return e.toUpperCase()}))},t}(),n.Lang={S2:/[\s\{\}=;:\[\],'"\(\)<>]/g,R2:/^(?:required|optional|repeated|map)$/,iP:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,$j:/^[a-zA-Z_][a-zA-Z_0-9]*$/,I2:/^[a-zA-Z][a-zA-Z_0-9]*$/,_2:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,A2:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,N2:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,C2:/^(?:[1-9][0-9]*|0)$/,D2:/^0[xX][0-9a-fA-F]+$/,M2:/^0[0-7]+$/,j2:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,P2:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,H2:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,L2:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,U2:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,F2:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},n.G2=function(t,e){function i(t){this.source=t+"",this.index=0,this.line=1,this.stack=[],this.B2=null}var r={},n=i.prototype;function o(t){this.V2=new i(t),this.q2=!1}n.JJ=function(){var t='"'===this.B2?e.U2:e.F2;t.lastIndex=this.index-1;var i=t.exec(this.source);if(!i)throw Error("unterminated string");return this.index=t.lastIndex,this.stack.push(this.B2),this.B2=null,i[1]},n.next=function(){if(0<this.stack.length)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this.B2)return this.JJ();var t,i,r;do{for(t=!1;e.L2.test(r=this.source.charAt(this.index));)if("\n"===r&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,t=!0}else{if("*"!==(r=this.source.charAt(this.index)))return"/";do{if("\n"===r&&++this.line,++this.index===this.source.length)return null;i=r,r=this.source.charAt(this.index)}while("*"!==i||"/"!==r);++this.index,t=!0}}while(t);if(this.index===this.source.length)return null;var n=this.index;if(e.S2.lastIndex=0,!e.S2.test(this.source.charAt(n++)))for(;n<this.source.length&&!e.S2.test(this.source.charAt(n));)++n;var o=this.source.substring(this.index,this.index=n);return'"'!==o&&"'"!==o||(this.B2=o),o},n.aj=function(){if(0===this.stack.length){var t=this.next();if(null===t)return null;this.stack.push(t)}return this.stack[0]},n.Bw=function(t){var e=this.next();if(e!==t)throw Error("illegal '"+e+"', '"+t+"' expected")},n.Q2=function(t){return this.aj()===t&&(this.next(),!0)},n.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},r.W2=i;var s=o.prototype;function a(t,i){var r=-1,n=1;if("-"==t.charAt(0)&&(n=-1,t=t.substring(1)),e.C2.test(t))r=parseInt(t);else if(e.D2.test(t))r=parseInt(t.substring(2),16);else{if(!e.M2.test(t))throw Error("illegal id value: "+(n<0?"-":"")+t);r=parseInt(t.substring(1),8)}if(r=n*r|0,!i&&r<0)throw Error("illegal id value: "+(n<0?"-":"")+t);return r}function u(t){var i=1;if("-"==t.charAt(0)&&(i=-1,t=t.substring(1)),e.C2.test(t))return i*parseInt(t,10);if(e.D2.test(t))return i*parseInt(t.substring(2),16);if(e.M2.test(t))return i*parseInt(t.substring(1),8);if("inf"===t)return i*(1/0);if("nan"===t)return NaN;if(e.j2.test(t))return i*parseFloat(t);throw Error("illegal number value: "+(i<0?"-":"")+t)}function h(t,e,i){void 0===t[e]?t[e]=i:(Array.isArray(t[e])||(t[e]=[t[e]]),t[e].push(i))}return s.parse=function(){var t,i={name:"[ROOT]",package:null,messages:[],Y2:[],imports:[],options:{},services:[]},r=!0;try{for(;t=this.V2.next();)switch(t){case"package":if(!r||null!==i.package)throw Error("unexpected 'package'");if(t=this.V2.next(),!e._2.test(t))throw Error("illegal package name: "+t);this.V2.Bw(";"),i.package=t;break;case"import":if(!r)throw Error("unexpected 'import'");"public"===(t=this.V2.aj())&&this.V2.next(),t=this.JJ(),this.V2.Bw(";"),i.imports.push(t);break;case"syntax":if(!r)throw Error("unexpected 'syntax'");this.V2.Bw("="),"proto3"===(i.K2=this.JJ())&&(this.q2=!0),this.V2.Bw(";");break;case"message":this.X2(i,null),r=!1;break;case"enum":this.J2(i),r=!1;break;case"option":this.z2(i);break;case"service":this.Z2(i);break;case"extend":this.t3(i);break;default:throw Error("unexpected '"+t+"'")}}catch(t){throw t.message="Parse error at line "+this.V2.line+": "+t.message,t}return delete i.name,i},o.parse=function(t){return new o(t).parse()},s.JJ=function(){var t,e,i="";do{if("'"!==(e=this.V2.next())&&'"'!==e)throw Error("illegal string delimiter: "+e);i+=this.V2.next(),this.V2.Bw(e),t=this.V2.aj()}while('"'===t||'"'===t);return i},s.i3=function(t){var i=this.V2.aj();if('"'===i||"'"===i)return this.JJ();if(this.V2.next(),e.N2.test(i))return u(i);if(e.BOOL.test(i))return"true"===i.toLowerCase();if(t&&e._2.test(i))return i;throw Error("illegal value: "+i)},s.z2=function(t,i){var r=this.V2.next(),n=!1;if("("===r&&(n=!0,r=this.V2.next()),!e._2.test(r))throw Error("illegal option name: "+r);var o=r;n&&(this.V2.Bw(")"),o="("+o+")",r=this.V2.aj(),e.A2.test(r)&&(o+=r,this.V2.next())),this.V2.Bw("="),this.n3(t,o),i||this.V2.Bw(";")},s.n3=function(t,i){var r=this.V2.aj();if("{"!==r)h(t.options,i,this.i3(!0));else for(this.V2.Bw("{");"}"!==(r=this.V2.next());){if(!e.$j.test(r))throw Error("illegal option name: "+i+"."+r);this.V2.Q2(":")?h(t.options,i+"."+r,this.i3(!0)):this.n3(t,i+"."+r)}},s.Z2=function(t){var i=this.V2.next();if(!e.$j.test(i))throw Error("illegal service name at line "+this.V2.line+": "+i);var r={name:i,r3:{},options:{}};for(this.V2.Bw("{");"}"!==(i=this.V2.next());)if("option"===i)this.z2(r);else{if("rpc"!==i)throw Error("illegal service token: "+i);this.s3(r)}this.V2.Q2(";"),t.services.push(r)},s.s3=function(t){var i=this.V2.next();if(!e.$j.test(i))throw Error("illegal rpc service method name: "+i);var r=i,n={request:null,response:null,e3:!1,h3:!1,options:{}};if(this.V2.Bw("("),"stream"===(i=this.V2.next()).toLowerCase()&&(n.e3=!0,i=this.V2.next()),!e._2.test(i))throw Error("illegal rpc service request type: "+i);if(n.request=i,this.V2.Bw(")"),"returns"!==(i=this.V2.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+i);if(this.V2.Bw("("),"stream"===(i=this.V2.next()).toLowerCase()&&(n.h3=!0,i=this.V2.next()),n.response=i,this.V2.Bw(")"),"{"===(i=this.V2.aj())){for(this.V2.next();"}"!==(i=this.V2.next());){if("option"!==i)throw Error("illegal rpc service token: "+i);this.z2(n)}this.V2.Q2(";")}else this.V2.Bw(";");void 0===t.r3&&(t.r3={}),t.r3[r]=n},s.X2=function(t,i){var r=!!i,n=this.V2.next(),o={name:"",fields:[],Y2:[],messages:[],options:{},o3:{}};if(!e.$j.test(n))throw Error("illegal "+(r?"group":"message")+" name: "+n);for(o.name=n,r&&(this.V2.Bw("="),i.id=a(this.V2.next()),o.u3=!0),"["===(n=this.V2.aj())&&i&&this.a3(i),this.V2.Bw("{");"}"!==(n=this.V2.next());)if(e.R2.test(n))this.f3(o,n);else if("oneof"===n)this.c3(o);else if("enum"===n)this.J2(o);else if("message"===n)this.X2(o);else if("option"===n)this.z2(o);else if("extensions"===n)this.l3(o);else if("extend"===n)this.t3(o);else{if(!e._2.test(n))throw Error("illegal message token: "+n);if(!this.q2)throw Error("illegal field rule: "+n);this.f3(o,"optional",n)}return this.V2.Q2(";"),t.messages.push(o),o},s.f3=function(t,i,r){if(!e.R2.test(i))throw Error("illegal message field rule: "+i);var n,o={rule:i,type:"",name:"",options:{},id:0};if("map"===i){if(r)throw Error("illegal type: "+r);if(this.V2.Bw("<"),n=this.V2.next(),!e.iP.test(n)&&!e._2.test(n))throw Error("illegal message field type: "+n);if(o.keytype=n,this.V2.Bw(","),n=this.V2.next(),!e.iP.test(n)&&!e._2.test(n))throw Error("illegal message field: "+n);if(o.type=n,this.V2.Bw(">"),n=this.V2.next(),!e.$j.test(n))throw Error("illegal message field name: "+n);o.name=n,this.V2.Bw("="),o.id=a(this.V2.next()),"["===(n=this.V2.aj())&&this.a3(o),this.V2.Bw(";")}else if("group"===(r=void 0!==r?r:this.V2.next())){var s=this.X2(t,o);if(!/^[A-Z]/.test(s.name))throw Error("illegal group name: "+s.name);o.type=s.name,o.name=s.name.toLowerCase(),this.V2.Q2(";")}else{if(!e.iP.test(r)&&!e._2.test(r))throw Error("illegal message field type: "+r);if(o.type=r,n=this.V2.next(),!e.$j.test(n))throw Error("illegal message field name: "+n);o.name=n,this.V2.Bw("="),o.id=a(this.V2.next()),"["===(n=this.V2.aj())&&this.a3(o),this.V2.Bw(";")}return t.fields.push(o),o},s.c3=function(t){var i=this.V2.next();if(!e.$j.test(i))throw Error("illegal oneof name: "+i);var r,n=i,o=[];for(this.V2.Bw("{");"}"!==(i=this.V2.next());)(r=this.f3(t,"optional",i)).v3=n,o.push(r.id);this.V2.Q2(";"),t.o3[n]=o},s.a3=function(t){this.V2.Bw("[");for(var e=!0;"]"!==this.V2.aj();)e||this.V2.Bw(","),this.z2(t,!0),e=!1;this.V2.next()},s.J2=function(t){var i={name:"",values:[],options:{}},r=this.V2.next();if(!e.$j.test(r))throw Error("illegal name: "+r);for(i.name=r,this.V2.Bw("{");"}"!==(r=this.V2.next());)if("option"===r)this.z2(i);else{if(!e.$j.test(r))throw Error("illegal name: "+r);this.V2.Bw("=");var n={name:r,id:a(this.V2.next(),!0)};"["===(r=this.V2.aj())&&this.a3({options:{}}),this.V2.Bw(";"),i.values.push(n)}this.V2.Q2(";"),t.Y2.push(i)},s.l3=function(e){var i=this.V2.next(),r=[];"min"===i?r.push(t.l2):"max"===i?r.push(t.v2):r.push(u(i)),this.V2.Bw("to"),"min"===(i=this.V2.next())?r.push(t.l2):"max"===i?r.push(t.v2):r.push(u(i)),this.V2.Bw(";"),e.extensions=r},s.t3=function(t){var i=this.V2.next();if(!e._2.test(i))throw Error("illegal extend reference: "+i);var r={kY:i,fields:[]};for(this.V2.Bw("{");"}"!==(i=this.V2.next());)if(e.R2.test(i))this.f3(r,i);else{if(!e._2.test(i))throw Error("illegal extend token: "+i);if(!this.q2)throw Error("illegal field rule: "+i);this.f3(r,"optional",i)}return this.V2.Q2(";"),t.messages.push(r),r},s.toString=function(){return"Parser at line "+this.V2.line},r.JZ=o,r}(n,n.Lang),n.Reflect=function(e){function i(t,e,i){this.d3=t,this.parent=e,this.name=i,this.className}var r={},n=i.prototype;function o(t,e,r,n,o){i.call(this,t,e,r),this.className="Namespace",this.children=[],this.options=n||{},this.K2=o||"proto2"}n.E3=function(){for(var t=this.name,e=this;null!=(e=e.parent);)t=e.name+"."+t;return t},n.toString=function(t){return(t?this.className+" ":"")+this.E3()},n.Wv=function(){throw Error(this.toString(!0)+" cannot be built directly")},r.w3=i;var s=o.prototype=Object.create(i.prototype);function a(t,i,r,n){if(this.type=t,this.g3=i,this.b3=r,this.K2=n,r&&e.c2.indexOf(t)<0)throw Error("Invalid map key type: "+t.name)}s.y3=function(t){if(null==(t=t||null))return this.children.slice();for(var e=[],i=0,r=this.children.length;i<r;++i)this.children[i]instanceof t&&e.push(this.children[i]);return e},s.T3=function(t){var e;if(e=this.m3(t.name))if(e instanceof c.O3&&e.name!==e.S3&&null===this.m3(e.S3))e.name=e.S3;else{if(!(t instanceof c.O3&&t.name!==t.S3&&null===this.m3(t.S3)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+t.name);t.name=t.S3}this.children.push(t)},s.m3=function(t){for(var e="number"==typeof t?"id":"name",i=0,r=this.children.length;i<r;++i)if(this.children[i][e]===t)return this.children[i];return null},s.resolve=function(t,e){var i,n="string"==typeof t?t.split("."):t,o=this,s=0;if(""===n[s]){for(;null!==o.parent;)o=o.parent;s++}do{do{if(!(o instanceof r.R3)){o=null;break}if(!(i=o.m3(n[s]))||!(i instanceof r.w3)||e&&!(i instanceof r.R3)){o=null;break}o=i,s++}while(s<n.length);if(null!=o)break;if(null!==this.parent)return this.parent.resolve(t,e)}while(null!=o);return o},s.I3=function(t){for(var e=[],i=t;e.unshift(i.name),null!==(i=i.parent););for(var n=1;n<=e.length;n++){var o=e.slice(e.length-n);if(t===this.resolve(o,t instanceof r.R3))return o.join(".")}return t.E3()},s.Wv=function(){for(var t,e={},i=this.children,r=0,n=i.length;r<n;++r)(t=i[r])instanceof o&&(e[t.name]=t.Wv());return Object.defineProperty&&Object.defineProperty(e,"_3",{value:this.A3()}),e},s.A3=function(){for(var t={},e=Object.keys(this.options),i=0,r=e.length;i<r;++i){var n=e[i],o=this.options[e[i]];t[n]=o}return t},s.N3=function(t){return void 0===t?this.options:void 0!==this.options[t]?this.options[t]:null},r.R3=o;var u=a.prototype;function h(t,i){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.MN&&t.low==t.low&&t.high==t.high)return new e._A(t.low,t.high,void 0===i?t.MN:i);if("string"==typeof t)return e._A.rO(t,i||!1,10);if("number"==typeof t)return e._A.nO(t,i||!1);throw Error("not convertible to Long")}a.C3=function(i){if("string"==typeof i&&(i=e.u2[i]),void 0===i.defaultValue)throw Error("default value for type "+i.name+" is not supported");return i==e.u2.bytes?new t(0):i.defaultValue},u.D3=function(i){var r=function(t,e){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+t+" ("+e+")")}.bind(this);switch(this.type){case e.u2.int32:case e.u2.sint32:case e.u2.sfixed32:return("number"!=typeof i||i==i&&i%1!=0)&&r(typeof i,"not an integer"),4294967295<i?0|i:i;case e.u2.uint32:case e.u2.fixed32:return("number"!=typeof i||i==i&&i%1!=0)&&r(typeof i,"not an integer"),i<0?i>>>0:i;case e.u2.int64:case e.u2.sint64:case e.u2.sfixed64:if(e._A)try{return h(i,!1)}catch(n){r(typeof i,n.message)}else r(typeof i,"requires Long.js");case e.u2.uint64:case e.u2.fixed64:if(e._A)try{return h(i,!0)}catch(n){r(typeof i,n.message)}else r(typeof i,"requires Long.js");case e.u2.bool:return"boolean"!=typeof i&&r(typeof i,"not a boolean"),i;case e.u2.float:case e.u2.double:return"number"!=typeof i&&r(typeof i,"not a number"),i;case e.u2.string:return"string"==typeof i||i&&i instanceof String||r(typeof i,"not a string"),""+i;case e.u2.bytes:return t.kA(i)?i:t.wrap(i,"base64");case e.u2.enum:var n=this.g3.y3(e.Reflect.j3.M3);for(s=0;s<n.length;s++){if(n[s].name==i)return n[s].id;if(n[s].id==i)return n[s].id}if("proto3"===this.K2)return("number"!=typeof i||i==i&&i%1!=0)&&r(typeof i,"not an integer"),(4294967295<i||i<0)&&r(typeof i,"not in range for uint32"),i;r(i,"not a valid enum value");case e.u2.group:case e.u2.message:if(i&&"object"==typeof i||r(typeof i,"object expected"),i instanceof this.g3.P3)return i;if(i instanceof e.H3.hl){var o={};for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s]);i=o}return new this.g3.P3(i)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+i+" (undefined type "+this.type+")")},u.L3=function(i,r){if(null===r)return 0;var n;switch(this.type){case e.u2.int32:return r<0?t.NN(r):t.yN(r);case e.u2.uint32:return t.yN(r);case e.u2.sint32:return t.yN(t.TN(r));case e.u2.fixed32:case e.u2.sfixed32:case e.u2.float:return 4;case e.u2.int64:case e.u2.uint64:return t.NN(r);case e.u2.sint64:return t.NN(t.DN(r));case e.u2.fixed64:case e.u2.sfixed64:return 8;case e.u2.bool:return 1;case e.u2.enum:return t.yN(r);case e.u2.double:return 8;case e.u2.string:return n=t.JN(r),t.yN(n)+n;case e.u2.bytes:if(r.vC()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.vC()+" bytes remaining");return t.yN(r.vC())+r.vC();case e.u2.message:return n=this.g3.U3(r),t.yN(n)+n;case e.u2.group:return(n=this.g3.U3(r))+t.yN(i<<3|e.Z1.e2)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")},u.F3=function(i,r,n){if(null===r)return n;switch(this.type){case e.u2.int32:r<0?n.UN(r):n.ON(r);break;case e.u2.uint32:n.ON(r);break;case e.u2.sint32:n.SN(r);break;case e.u2.fixed32:n.iN(r);break;case e.u2.sfixed32:n.ZA(r);break;case e.u2.int64:case e.u2.uint64:n.UN(r);break;case e.u2.sint64:n.FN(r);break;case e.u2.fixed64:n.aN(r);break;case e.u2.sfixed64:n.eN(r);break;case e.u2.bool:"string"==typeof r?n.ON("false"===r.toLowerCase()?0:!!r):n.ON(r?1:0);break;case e.u2.enum:n.ON(r);break;case e.u2.float:n.vN(r);break;case e.u2.double:n.wN(r);break;case e.u2.string:n.nC(r);break;case e.u2.bytes:if(r.vC()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.vC()+" bytes remaining");var o=r.offset;n.ON(r.vC()),n.append(r),r.offset=o;break;case e.u2.message:var s=(new t).uC();this.g3.encode(r,s),n.ON(s.offset),n.append(s.Dv());break;case e.u2.group:this.g3.encode(r,n),n.ON(i<<3|e.Z1.e2);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")}return n},u.decode=function(t,i,r){if(i!=this.type.a2)throw Error("Unexpected wire type for element");var n,o;switch(this.type){case e.u2.int32:return 0|t.RN();case e.u2.uint32:return t.RN()>>>0;case e.u2.sint32:return 0|t._N();case e.u2.fixed32:return t.rN()>>>0;case e.u2.sfixed32:return 0|t.tN();case e.u2.int64:return t.GN();case e.u2.uint64:return t.GN().PN();case e.u2.sint64:return t.xN();case e.u2.fixed64:return t.cN();case e.u2.sfixed64:return t.oN();case e.u2.bool:return!!t.RN();case e.u2.enum:return t.RN();case e.u2.float:return t.pN();case e.u2.double:return t.pb();case e.u2.string:return t.rC();case e.u2.bytes:if(o=t.RN(),t.vC()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+t.vC());return(n=t.clone()).mA=n.offset+o,t.offset+=o,n;case e.u2.message:return o=t.RN(),this.g3.decode(t,o);case e.u2.group:return this.g3.decode(t,-1,r)}throw Error("[INTERNAL] Illegal decode type")},u.G3=function(i){if(!this.b3)throw Error("valueFromString() called on non-map-key element");switch(this.type){case e.u2.int32:case e.u2.sint32:case e.u2.sfixed32:case e.u2.uint32:case e.u2.fixed32:return this.D3(parseInt(i));case e.u2.int64:case e.u2.sint64:case e.u2.sfixed64:case e.u2.uint64:case e.u2.fixed64:return this.D3(i);case e.u2.bool:return"true"===i;case e.u2.string:return this.D3(i);case e.u2.bytes:return t.jA(i)}},u.x3=function(t){if(!this.b3)throw Error("valueToString() called on non-map-key element");return this.type===e.u2.bytes?t.toString("binary"):t.toString()},r.Element=a;var c=function(t,i,r,n,s,a){o.call(this,t,i,r,n,a),this.className="Message",this.extensions=[e.l2,e.v2],this.P3=null,this.u3=!!s,this.B3=null,this.V3=null,this.q3=null},l=c.prototype=Object.create(o.prototype);function p(t,i){var r=i.RN(),n=7&r,o=r>>>3;switch(n){case e.Z1.t2:for(;128==(128&(r=i.VA())););break;case e.Z1.i2:i.offset+=8;break;case e.Z1.n2:r=i.RN(),i.offset+=r;break;case e.Z1.s2:p(o,i);break;case e.Z1.e2:if(o===t)return!1;throw Error("Illegal GROUPEND after unknown group: "+o+" ("+t+" expected)");case e.Z1.h2:i.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+t+": "+n)}return!0}function f(t,r,n,o,s,a,u,h,l,p){i.call(this,t,r,a),this.className="Message.Field",this.required="required"===n,this.repeated="repeated"===n,this.map="map"===n,this.Q3=o||null,this.type=s,this.g3=null,this.id=u,this.options=h||{},this.defaultValue=null,this.v3=l||null,this.K2=p||"proto2",this.S3=this.name,this.W3=null,this.Y3=null,!this.d3.options.d2||this instanceof c.K3||(this.name=e.RR.O2(this.name))}l.Wv=function(i){if(this.P3&&!i)return this.P3;var r=function(e,i){var r=i.y3(e.Reflect.hl.O3),n=i.y3(e.Reflect.hl.X3),o=function(s,a){e.H3.hl.call(this);for(var u=0,h=n.length;u<h;++u)this[n[u].name]=null;for(u=0,h=r.length;u<h;++u){var c=r[u];this[c.name]=c.repeated?[]:c.map?new e.Map(c):null,!c.required&&"proto3"!==i.K2||null===c.defaultValue||(this[c.name]=c.defaultValue)}var l;if(0<arguments.length)if(1!==arguments.length||null===s||"object"!=typeof s||!("function"!=typeof s.encode||s instanceof o)||Array.isArray(s)||s instanceof e.Map||t.kA(s)||s instanceof ArrayBuffer||e._A&&s instanceof e._A)for(u=0,h=arguments.length;u<h;++u)void 0!==(l=arguments[u])&&this.J3(r[u].name,l);else this.J3(s)},s=o.prototype=Object.create(e.H3.hl.prototype);s.add=function(t,r,n){var o=i.q3[t];if(!n){if(!o)throw Error(this+"#"+t+" is undefined");if(!(o instanceof e.Reflect.hl.O3))throw Error(this+"#"+t+" is not a field: "+o.toString(!0));if(!o.repeated)throw Error(this+"#"+t+" is not a repeated field");r=o.D3(r,!0)}return null===this[t]&&(this[t]=[]),this[t].push(r),this},s.z3=s.add,s.set=function(t,r,n){if(t&&"object"==typeof t){for(var o in n=r,t)t.hasOwnProperty(o)&&void 0!==(r=t[o])&&this.J3(o,r,n);return this}var s=i.q3[t];if(n)this[t]=r;else{if(!s)throw Error(this+"#"+t+" is not a field: undefined");if(!(s instanceof e.Reflect.hl.O3))throw Error(this+"#"+t+" is not a field: "+s.toString(!0));this[s.name]=r=s.D3(r)}if(s&&s.v3){var a=this[s.v3.name];null!==r?(null!==a&&a!==s.name&&(this[a]=null),this[s.v3.name]=s.name):a===t&&(this[s.v3.name]=null)}return this},s.J3=s.set,s.get=function(t,r){if(r)return this[t];var n=i.q3[t];if(!(n&&n instanceof e.Reflect.hl.O3))throw Error(this+"#"+t+" is not a field: undefined");if(!(n instanceof e.Reflect.hl.O3))throw Error(this+"#"+t+" is not a field: "+n.toString(!0));return this[n.name]},s.Z3=s.get;for(var a=0;a<r.length;a++){var u=r[a];u instanceof e.Reflect.hl.K3||i.d3.options.E2&&function(t){var e=t.S3.replace(/(_[a-zA-Z])/g,(function(t){return t.toUpperCase().replace("_","")}));function r(e,i){return this[t.name]=i?e:t.D3(e),this}function n(){return this[t.name]}e=e.substring(0,1).toUpperCase()+e.substring(1);var o=t.S3.replace(/([A-Z])/g,(function(t){return"_"+t}));null===i.m3("set"+e)&&(s["set"+e]=r),null===i.m3("set_"+o)&&(s["set_"+o]=r),null===i.m3("get"+e)&&(s["get"+e]=n),null===i.m3("get_"+o)&&(s["get_"+o]=n)}(u)}function h(i,r,n,o){if(null===i||"object"!=typeof i){if(o&&o instanceof e.Reflect.j3){var s=e.Reflect.j3.getName(o.object,i);if(null!==s)return s}return i}if(t.kA(i))return r?i.pC():i.dC();if(e._A.t4(i))return n?i.toString():e._A.i4(i);var a;if(Array.isArray(i))return a=[],i.forEach((function(t,e){a[e]=h(t,r,n,o)})),a;if(a={},i instanceof e.Map){for(var u=i.entries(),c=u.next();!c.done;c=u.next())a[i.n4.x3(c.value[0])]=h(c.value[1],r,n,i.r4.g3);return a}var l=i.s4,p=void 0;for(var f in i)i.hasOwnProperty(f)&&(l&&(p=l.m3(f))?a[f]=h(i[f],r,n,p.g3):a[f]=h(i[f],r,n));return a}return s.encode=function(e,r){"boolean"==typeof e&&(r=e,e=void 0);var n=!1;e||(e=new t,n=!0);var o=e.OA;try{return i.encode(this,e.uC(),r),(n?e.Dv():e).uC(o)}catch(r){throw e.uC(o),r}},o.encode=function(t,e,i){return new o(t).encode(e,i)},s.U3=function(){return i.U3(this)},s.e4=function(e){var r=!1;e||(e=new t,r=!0);var n=(new t).uC();return i.encode(this,n).Dv(),e.ON(n.vC()),e.append(n),r?e.Dv():e},s.h4=function(){try{return this.encode().Ma()}catch(t){throw t.o4&&(t.o4=t.o4.Ma()),t}},s.Ma=s.h4,s.u4=function(){try{return this.encode().dC()}catch(t){throw t.o4&&(t.o4=t.o4.dC()),t}},s.dC=s.u4,s.a4=function(){try{return this.encode().pC()}catch(t){throw t.o4&&(t.o4=t.o4.pC()),t}},s.pC=s.a4,s.f4=function(){try{return this.encode().wC()}catch(t){throw t.o4&&(t.o4=t.o4.wC()),t}},s.wC=s.f4,s.c4=function(t,e){return h(this,!!t,!!e,this.s4)},s.l4=function(){return JSON.stringify(h(this,!0,!0,this.s4))},o.decode=function(e,r){"string"==typeof e&&(e=t.wrap(e,r||"base64"));var n=(e=t.kA(e)?e:t.wrap(e)).OA;try{var o=i.decode(e.uC());return e.uC(n),o}catch(r){throw e.uC(n),r}},o.v4=function(e,r){if("string"==typeof e&&(e=t.wrap(e,r||"base64")),(e=t.kA(e)?e:t.wrap(e)).vC()<1)return null;var n=e.offset,o=e.RN();if(e.vC()<o)return e.offset=n,null;try{var s=i.decode(e.slice(e.offset,e.offset+o).uC());return e.offset+=o,s}catch(r){throw e.offset+=o,r}},o.d4=function(t){return o.decode(t,"base64")},o.E4=function(t){return o.decode(t,"hex")},o.w4=function(t){return new o(JSON.parse(t))},s.toString=function(){return i.toString()},Object.defineProperty&&(Object.defineProperty(o,"_3",{value:i.A3()}),Object.defineProperty(s,"_3",{value:o._3}),Object.defineProperty(o,"s4",{value:i}),Object.defineProperty(s,"s4",{value:i})),o}(e,this);this.B3=[],this.V3={},this.q3={};for(var n,o=0,s=this.children.length;o<s;o++)if((n=this.children[o])instanceof v||n instanceof c||n instanceof E){if(r.hasOwnProperty(n.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+n.toString(!0)+" cannot override static property '"+n.name+"'");r[n.name]=n.Wv()}else if(n instanceof c.O3)n.Wv(),this.B3.push(n),this.V3[n.id]=n,this.q3[n.name]=n;else if(!(n instanceof c.X3||n instanceof m))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[o].toString(!0));return this.P3=r},l.encode=function(t,e,i){for(var r,n,o=null,s=0,a=this.B3.length;s<a;++s)n=t[(r=this.B3[s]).name],r.required&&null===n?null===o&&(o=r):r.encode(i?n:r.D3(n),e,t);if(null===o)return e;var u=Error("Missing at least one required field for "+this.toString(!0)+": "+o);throw u.o4=e,u},l.U3=function(t){for(var e,i,r=0,n=0,o=this.B3.length;n<o;++n){if(i=t[(e=this.B3[n]).name],e.required&&null===i)throw Error("Missing at least one required field for "+this.toString(!0)+": "+e);r+=e.U3(i,t)}return r},l.decode=function(t,i,r){i="number"==typeof i?i:-1;for(var n,o,s,a,u=t.offset,h=new this.P3;t.offset<u+i||-1===i&&0<t.vC();){if(s=(n=t.RN())>>>3,(o=7&n)===e.Z1.e2){if(s!==r)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+s+" ("+(r?r+" expected":"not a group")+")");break}if(a=this.V3[s]){if(a.repeated&&!a.options.g4)h[a.name].push(a.decode(o,t));else if(a.map){var c=a.decode(o,t);h[a.name].set(c[0],c[1])}else if(h[a.name]=a.decode(o,t),a.v3){var l=h[a.v3.name];null!==l&&l!==a.name&&(h[l]=null),h[a.v3.name]=a.name}}else switch(o){case e.Z1.t2:t.RN();break;case e.Z1.h2:t.offset+=4;break;case e.Z1.i2:t.offset+=8;break;case e.Z1.n2:var f=t.RN();t.offset+=f;break;case e.Z1.s2:for(;p(s,t););break;default:throw Error("Illegal wire type for unknown field "+s+" in "+this.toString(!0)+"#decode: "+o)}}for(var d=0,g=this.B3.length;d<g;++d)if(null===h[(a=this.B3[d]).name])if("proto3"===this.K2)h[a.name]=a.defaultValue;else{if(a.required){var v=Error("Missing at least one required field for "+this.toString(!0)+": "+a.name);throw v.b4=h,v}e.w2&&null!==a.defaultValue&&(h[a.name]=a.defaultValue)}return h},r.hl=c;var d=f.prototype=Object.create(i.prototype);function g(t,e,i,r,n,o,s){f.call(this,t,e,i,null,r,n,o,s),this.y4}d.Wv=function(){this.W3=new a(this.type,this.g3,!1,this.K2),this.map&&(this.Y3=new a(this.Q3,void 0,!0,this.K2)),"proto3"!==this.K2||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.D3(this.options.default)):this.defaultValue=a.C3(this.type)},d.D3=function(t,i){i=i||!1;var r,n=function(t,e){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+t+" ("+e+")")}.bind(this);if(null===t)return this.required&&n(typeof t,"required"),"proto3"===this.K2&&this.type!==e.u2.message&&n(typeof t,"proto3 field without field presence cannot be null"),null;if(!this.repeated||i)return this.map&&!i?t instanceof e.Map?t:(t instanceof Object||n(typeof t,"expected ProtoBuf.Map or raw object for map field"),new e.Map(this,t)):(!this.repeated&&Array.isArray(t)&&n(typeof t,"no array expected"),this.W3.D3(t));Array.isArray(t)||(t=[t]);var o=[];for(r=0;r<t.length;r++)o.push(this.W3.D3(t[r]));return o},d.T4=function(t,i){if("proto3"!==this.K2)return null!==t;if(this.v3&&i[this.v3.name]===this.name)return!0;switch(this.type){case e.u2.int32:case e.u2.sint32:case e.u2.sfixed32:case e.u2.uint32:case e.u2.fixed32:return 0!==t;case e.u2.int64:case e.u2.sint64:case e.u2.sfixed64:case e.u2.uint64:case e.u2.fixed64:return 0!==t.low||0!==t.high;case e.u2.bool:return t;case e.u2.float:case e.u2.double:return 0!==t;case e.u2.string:return 0<t.length;case e.u2.bytes:return 0<t.vC();case e.u2.enum:return 0!==t;case e.u2.message:return null!==t;default:return!0}},d.encode=function(i,r,n){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===i||this.repeated&&0==i.length)return r;try{var o;if(this.repeated)if(this.options.g4&&0<=e.o2.indexOf(this.type.a2)){r.ON(this.id<<3|e.Z1.n2),r.oC(r.offset+=1);var s=r.offset;for(o=0;o<i.length;o++)this.W3.F3(this.id,i[o],r);var a=r.offset-s,u=t.yN(a);if(1<u){var h=r.slice(s,r.offset);s+=u-1,r.offset=s,r.append(h)}r.ON(a,s-u)}else for(o=0;o<i.length;o++)r.ON(this.id<<3|this.type.a2),this.W3.F3(this.id,i[o],r);else this.map?i.forEach((function(i,n,o){var s=t.yN(8|this.Q3.a2)+this.Y3.L3(1,n)+t.yN(16|this.type.a2)+this.W3.L3(2,i);r.ON(this.id<<3|e.Z1.n2),r.ON(s),r.ON(8|this.Q3.a2),this.Y3.F3(1,n,r),r.ON(16|this.type.a2),this.W3.F3(2,i,r)}),this):this.T4(i,n)&&(r.ON(this.id<<3|this.type.a2),this.W3.F3(this.id,i,r))}catch(n){throw Error("Illegal value for "+this.toString(!0)+": "+i+" ("+n+")")}return r},d.U3=function(i,r){if(i=this.D3(i),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===i||this.repeated&&0==i.length)return 0;var n=0;try{var o,s;if(this.repeated)if(this.options.g4&&0<=e.o2.indexOf(this.type.a2)){for(n+=t.yN(this.id<<3|e.Z1.n2),o=s=0;o<i.length;o++)s+=this.W3.L3(this.id,i[o]);n+=t.yN(s),n+=s}else for(o=0;o<i.length;o++)n+=t.yN(this.id<<3|this.type.a2),n+=this.W3.L3(this.id,i[o]);else this.map?i.forEach((function(i,r,o){var s=t.yN(8|this.Q3.a2)+this.Y3.L3(1,r)+t.yN(16|this.type.a2)+this.W3.L3(2,i);n+=t.yN(this.id<<3|e.Z1.n2),n+=t.yN(s),n+=s}),this):this.T4(i,r)&&(n+=t.yN(this.id<<3|this.type.a2),n+=this.W3.L3(this.id,i))}catch(r){throw Error("Illegal value for "+this.toString(!0)+": "+i+" ("+r+")")}return n},d.decode=function(t,i,r){var n,o;if(!(!this.map&&t==this.type.a2||!r&&this.repeated&&this.options.g4&&t==e.Z1.n2||this.map&&t==e.Z1.n2))throw Error("Illegal wire type for field "+this.toString(!0)+": "+t+" ("+this.type.a2+" expected)");if(t==e.Z1.n2&&this.repeated&&this.options.g4&&0<=e.o2.indexOf(this.type.a2)&&!r){o=i.RN(),o=i.offset+o;for(var s=[];i.offset<o;)s.push(this.decode(this.type.a2,i,!0));return s}if(this.map){var u=a.C3(this.Q3);if(n=a.C3(this.type),o=i.RN(),i.vC()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+i.vC());var h=i.clone();for(h.mA=h.offset+o,i.offset+=o;0<h.vC();){var c=h.RN();t=7&c;var l=c>>>3;if(1==l)u=this.Y3.decode(h,t,l);else{if(2!=l)throw Error("Unexpected tag in map field key/value submessage");n=this.W3.decode(h,t,l)}}return[u,n]}return this.W3.decode(i,t,this.id)},r.hl.O3=f,g.prototype=Object.create(f.prototype),r.hl.K3=g,r.hl.X3=function(t,e,r){i.call(this,t,e,r),this.fields=[]};var v=function(t,e,i,r,n){o.call(this,t,e,i,r,n),this.className="Enum",this.object=null};function y(t,e,r,n){i.call(this,t,e,r),this.className="Enum.Value",this.id=n}v.getName=function(t,e){for(var i,r=Object.keys(t),n=0;n<r.length;++n)if(t[i=r[n]]===e)return i;return null},(v.prototype=Object.create(o.prototype)).Wv=function(t){if(this.object&&!t)return this.object;for(var i=new e.H3.j3,r=this.y3(v.M3),n=0,o=r.length;n<o;++n)i[r[n].name]=r[n].id;return Object.defineProperty&&Object.defineProperty(i,"_3",{value:this.A3(),enumerable:!1}),this.object=i},r.j3=v,y.prototype=Object.create(i.prototype),r.j3.M3=y;var m=function(t,e,r,n){i.call(this,t,e,r),this.m4=n};m.prototype=Object.create(i.prototype),r.O4=m;var E=function(t,e,i,r){o.call(this,t,e,i,r),this.className="Service",this.P3=null};function w(t,e,r,n){i.call(this,t,e,r),this.className="Service.Method",this.options=n||{}}function b(t,e,i,r,n,o,s,a){w.call(this,t,e,i,a),this.className="Service.RPCMethod",this.S4=r,this.R4=n,this.I4=o,this._4=s,this.A4=null,this.N4=null}return(E.prototype=Object.create(o.prototype)).Wv=function(i){return this.P3&&!i?this.P3:this.P3=function(e,i){for(var r=function(t){e.H3.C4.call(this),this.D4=t||function(t,e,i){setTimeout(i.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},n=r.prototype=Object.create(e.H3.C4.prototype),o=i.y3(e.Reflect.C4.M4),s=0;s<o.length;s++)!function(e){n[e.name]=function(r,n){try{try{r=e.A4.P3.decode(t.wrap(r))}catch(r){if(!(r instanceof TypeError))throw r}if(null===r||"object"!=typeof r)throw Error("Illegal arguments");r instanceof e.A4.P3||(r=new e.A4.P3(r)),this.D4(e.E3(),r,(function(t,r){if(t)n(t);else{try{r=e.N4.P3.decode(r)}catch(t){}r&&r instanceof e.N4.P3?n(null,r):n(Error("Illegal response type received in service method "+i.name+"#"+e.name))}}))}catch(r){setTimeout(n.bind(this,r),0)}},r[e.name]=function(t,i,n){new r(t)[e.name](i,n)},Object.defineProperty&&(Object.defineProperty(r[e.name],"_3",{value:e.A3()}),Object.defineProperty(n[e.name],"_3",{value:r[e.name]._3}))}(o[s]);return Object.defineProperty&&(Object.defineProperty(r,"_3",{value:i.A3()}),Object.defineProperty(n,"_3",{value:r._3}),Object.defineProperty(r,"s4",{value:i}),Object.defineProperty(n,"s4",{value:i})),r}(e,this)},r.C4=E,(w.prototype=Object.create(i.prototype)).A3=s.A3,r.C4.j4=w,b.prototype=Object.create(w.prototype),r.C4.M4=b,r}(n),n.H3=function(t,e,r){function n(t){this.P4=new r.R3(this,null,""),this.H4=this.P4,this.L4=!1,this.result=null,this.files={},this.U4=null,this.options=t||{}}var o=n.prototype;return n.F4=function(t){return"string"==typeof t.name&&void 0===t.values&&void 0===t.r3},n.G4=function(t){return"string"==typeof t.rule&&"string"==typeof t.name&&"string"==typeof t.type&&void 0!==t.id},n.x4=function(t){return"string"==typeof t.name&&!(void 0===t.values||!Array.isArray(t.values)||0===t.values.length)},n.B4=function(t){return!("string"!=typeof t.name||"object"!=typeof t.r3||!t.r3)},n.V4=function(t){return"string"==typeof t.kY},o.reset=function(){return this.H4=this.P4,this},o.define=function(t){if("string"!=typeof t||!e._2.test(t))throw Error("illegal namespace: "+t);return t.split(".").forEach((function(t){var e=this.H4.m3(t);null===e&&this.H4.T3(e=new r.R3(this,this.H4,t)),this.H4=e}),this),this},o.create=function(e){if(!e)return this;if(Array.isArray(e)){if(0===e.length)return this;e=e.slice()}else e=[e];for(var i=[e];0<i.length;){if(e=i.pop(),!Array.isArray(e))throw Error("not a valid namespace: "+JSON.stringify(e));for(;0<e.length;){var o=e.shift();if(n.F4(o)){var s=new r.hl(this,this.H4,o.name,o.options,o.u3,o.K2),a={};o.o3&&Object.keys(o.o3).forEach((function(t){s.T3(a[t]=new r.hl.X3(this,s,t))}),this),o.fields&&o.fields.forEach((function(t){if(null!==s.m3(0|t.id))throw Error("duplicate or invalid field id in "+s.name+": "+t.id);if(t.options&&"object"!=typeof t.options)throw Error("illegal field options in "+s.name+"#"+t.name);var e=null;if("string"==typeof t.v3&&!(e=a[t.v3]))throw Error("illegal oneof in "+s.name+"#"+t.name+": "+t.v3);t=new r.hl.O3(this,s,t.rule,t.keytype,t.type,t.name,t.id,t.options,e,o.K2),e&&e.fields.push(t),s.T3(t)}),this);var u=[];if(o.Y2&&o.Y2.forEach((function(t){u.push(t)})),o.messages&&o.messages.forEach((function(t){u.push(t)})),o.services&&o.services.forEach((function(t){u.push(t)})),o.extensions&&(s.extensions=o.extensions,s.extensions[0]<t.l2&&(s.extensions[0]=t.l2),s.extensions[1]>t.v2&&(s.extensions[1]=t.v2)),this.H4.T3(s),0<u.length){i.push(e),e=u,u=null,this.H4=s,s=null;continue}u=null}else if(n.x4(o))s=new r.j3(this,this.H4,o.name,o.options,o.K2),o.values.forEach((function(t){s.T3(new r.j3.M3(this,s,t.name,t.id))}),this),this.H4.T3(s);else if(n.B4(o))s=new r.C4(this,this.H4,o.name,o.options),Object.keys(o.r3).forEach((function(t){var e=o.r3[t];s.T3(new r.C4.M4(this,s,t,e.request,e.response,!!e.e3,!!e.h3,e.options))}),this),this.H4.T3(s);else{if(!n.V4(o))throw Error("not a valid definition: "+JSON.stringify(o));if(s=this.H4.resolve(o.kY,!0))o.fields.forEach((function(e){if(null!==s.m3(0|e.id))throw Error("duplicate extended field id in "+s.name+": "+e.id);if(e.id<s.extensions[0]||e.id>s.extensions[1])throw Error("illegal extended field id in "+s.name+": "+e.id+" ("+s.extensions.join(" to ")+" expected)");var i=e.name;this.options.d2&&(i=t.RR.O2(i));var n=new r.hl.K3(this,s,e.rule,e.type,this.H4.E3()+"."+i,e.id,e.options),o=new r.O4(this,this.H4,e.name,n);n.y4=o,this.H4.T3(o),s.T3(n)}),this);else if(!/\.?google\.protobuf\./.test(o.kY))throw Error("extended message "+o.kY+" is not defined")}s=o=null}e=null,this.H4=this.H4.parent}return this.L4=!1,this.result=null,this},o.import=function(e,r){var n="/";if("string"==typeof r){if(t.RR.g2&&(r=i(94).resolve(r)),!0===this.files[r])return this.reset();this.files[r]=!0}else if("object"==typeof r){var o=r.root;t.RR.g2&&(o=i(94).resolve(o)),(0<=o.indexOf("\\")||0<=r.q4.indexOf("\\"))&&(n="\\");var s=o+n+r.q4;if(!0===this.files[s])return this.reset();this.files[s]=!0}if(e.imports&&0<e.imports.length){var a,u=!1;"object"==typeof r?(this.U4=r.root,u=!0,a=this.U4,r=r.q4,(0<=a.indexOf("\\")||0<=r.indexOf("\\"))&&(n="\\")):"string"==typeof r?this.U4?a=this.U4:0<=r.indexOf("/")?""===(a=r.replace(/\/[^\/]*$/,""))&&(a="/"):0<=r.indexOf("\\")?(a=r.replace(/\\[^\\]*$/,""),n="\\"):a=".":a=null;for(var h=0;h<e.imports.length;h++)if("string"==typeof e.imports[h]){if(!a)throw Error("cannot determine import root");var c=e.imports[h];if("google/protobuf/descriptor.proto"===c)continue;if(c=a+n+c,!0===this.files[c])continue;/\.proto$/i.test(c)&&!t.G2&&(c=c.replace(/\.proto$/,".json"));var l=t.RR.fetch(c);if(null===l)throw Error("failed to import '"+c+"' in '"+r+"': file not found");/\.json$/i.test(c)?this.import(JSON.parse(l+""),c):this.import(t.G2.JZ.parse(l),c)}else r?/\.(\w+)$/.test(r)?this.import(e.imports[h],r.replace(/^(.+)\.(\w+)$/,(function(t,e,i){return e+"_import"+h+"."+i}))):this.import(e.imports[h],r+"_import"+h):this.import(e.imports[h]);u&&(this.U4=null)}e.package&&this.define(e.package),e.K2&&function t(e){e.messages&&e.messages.forEach((function(i){i.K2=e.K2,t(i)})),e.Y2&&e.Y2.forEach((function(t){t.K2=e.K2}))}(e);var p=this.H4;return e.options&&Object.keys(e.options).forEach((function(t){p.options[t]=e.options[t]})),e.messages&&(this.create(e.messages),this.H4=p),e.Y2&&(this.create(e.Y2),this.H4=p),e.services&&(this.create(e.services),this.H4=p),e.Q4&&this.create(e.Q4),this.reset()},o.W4=function(){var i;if(null==this.H4||"object"==typeof this.H4.type)return this;if(this.H4 instanceof r.R3)this.H4.children.forEach((function(t){this.H4=t,this.W4()}),this);else if(this.H4 instanceof r.hl.O3){if(e.iP.test(this.H4.type))this.H4.type=t.u2[this.H4.type];else{if(!e._2.test(this.H4.type))throw Error("illegal type reference in "+this.H4.toString(!0)+": "+this.H4.type);if(!(i=(this.H4 instanceof r.hl.K3?this.H4.y4.parent:this.H4.parent).resolve(this.H4.type,!0)))throw Error("unresolvable type reference in "+this.H4.toString(!0)+": "+this.H4.type);if((this.H4.g3=i)instanceof r.j3){if(this.H4.type=t.u2.enum,"proto3"===this.H4.K2&&"proto3"!==i.K2)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(i instanceof r.hl))throw Error("illegal type reference in "+this.H4.toString(!0)+": "+this.H4.type);this.H4.type=i.u3?t.u2.group:t.u2.message}}if(this.H4.map){if(!e.iP.test(this.H4.Q3))throw Error("illegal key type for map field in "+this.H4.toString(!0)+": "+this.H4.Q3);this.H4.Q3=t.u2[this.H4.Q3]}}else if(this.H4 instanceof t.Reflect.C4.j4){if(!(this.H4 instanceof t.Reflect.C4.M4))throw Error("illegal service type in "+this.H4.toString(!0));if(!((i=this.H4.parent.resolve(this.H4.S4,!0))&&i instanceof t.Reflect.hl))throw Error("Illegal type reference in "+this.H4.toString(!0)+": "+this.H4.S4);if(this.H4.A4=i,!((i=this.H4.parent.resolve(this.H4.R4,!0))&&i instanceof t.Reflect.hl))throw Error("Illegal type reference in "+this.H4.toString(!0)+": "+this.H4.R4);this.H4.N4=i}else if(!(this.H4 instanceof t.Reflect.hl.X3||this.H4 instanceof t.Reflect.O4||this.H4 instanceof t.Reflect.j3.M3))throw Error("illegal object in namespace: "+typeof this.H4+": "+this.H4);return this.reset()},o.Wv=function(t){if(this.reset(),this.L4||(this.W4(),this.L4=!0,this.result=null),null===this.result&&(this.result=this.P4.Wv()),!t)return this.result;for(var e="string"==typeof t?t.split("."):t,i=this.result,r=0;r<e.length;r++){if(!i[e[r]]){i=null;break}i=i[e[r]]}return i},o.Y4=function(t,e){return t?this.P4.resolve(t,e):this.P4},o.toString=function(){return"Builder"},n.hl=function(){},n.j3=function(){},n.C4=function(){},n}(n,n.Lang,n.Reflect),n.Map=function(t,e){function i(t,i){if(!t.map)throw Error("field is not a map");if(this.m4=t,this.n4=new e.Element(t.Q3,null,!0,t.K2),this.r4=new e.Element(t.type,t.g3,!1,t.K2),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),i)for(var r=Object.keys(i),n=0;n<r.length;n++){var o=this.n4.G3(r[n]),s=this.r4.D3(i[r[n]]);this.map[this.n4.x3(o)]={key:o,value:s}}}var r=i.prototype;function n(t){var e=0;return{next:function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}}return r.clear=function(){this.map={}},r.delete=function(t){var e=this.n4.x3(this.n4.D3(t)),i=e in this.map;return delete this.map[e],i},r.entries=function(){for(var t,e=[],i=Object.keys(this.map),r=0;r<i.length;r++)e.push([(t=this.map[i[r]]).key,t.value]);return n(e)},r.keys=function(){for(var t=[],e=Object.keys(this.map),i=0;i<e.length;i++)t.push(this.map[e[i]].key);return n(t)},r.values=function(){for(var t=[],e=Object.keys(this.map),i=0;i<e.length;i++)t.push(this.map[e[i]].value);return n(t)},r.forEach=function(t,e){for(var i,r=Object.keys(this.map),n=0;n<r.length;n++)t.call(e,(i=this.map[r[n]]).value,i.key,this)},r.set=function(t,e){var i=this.n4.D3(t),r=this.r4.D3(e);return this.map[this.n4.x3(i)]={key:i,value:r},this},r.get=function(t){var e=this.n4.x3(this.n4.D3(t));if(e in this.map)return this.map[e].value},r.has=function(t){return this.n4.x3(this.n4.D3(t))in this.map},i}(0,n.Reflect),n.K4=function(t,e,i){return("string"==typeof e||e&&"string"==typeof e.q4&&"string"==typeof e.root)&&(i=e,e=void 0),n.Yv(n.G2.JZ.parse(t),e,i)},n.X4=n.K4,n.J4=function(t,e,i){if(e&&"object"==typeof e?(i=e,e=null):e&&"function"==typeof e||(e=null),e)return n.RR.fetch("string"==typeof t?t:t.root+"/"+t.q4,(function(r){if(null!==r)try{e(null,n.K4(r,i,t))}catch(r){e(r)}else e(Error("Failed to fetch file"))}));var r=n.RR.fetch("object"==typeof t?t.root+"/"+t.q4:t);return null===r?null:n.K4(r,i,t)},n.z4=n.J4,n.Z4=function(t){return void 0===(t=t||{}).d2&&(t.d2=n.d2),void 0===t.E2&&(t.E2=n.E2),new n.H3(t)},n.Yv=function(t,e,i){return("string"==typeof e||e&&"string"==typeof e.q4&&"string"==typeof e.root)&&(i=e,e=null),e&&"object"==typeof e||(e=n.Z4()),"string"==typeof t&&(t=JSON.parse(t)),e.import(t,i),e.W4(),e},n.t5=function(t,e,i){if(e&&"object"==typeof e?(i=e,e=null):e&&"function"==typeof e||(e=null),e)return n.RR.fetch("string"==typeof t?t:t.root+"/"+t.q4,(function(r){if(null!==r)try{e(null,n.Yv(JSON.parse(r),i,t))}catch(r){e(r)}else e(Error("Failed to fetch file"))}));var r=n.RR.fetch("object"==typeof t?t.root+"/"+t.q4:t);return null===r?null:n.Yv(JSON.parse(r),i,t)},n})?n.apply(e,o):n)||(t.exports=s)}).call(this,i(37))},function(t,e,i){var r,n;
/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 */void 0===(n="function"==typeof(r=function(){"use strict";function t(t,e,i){this.low=0|t,this.high=0|e,this.MN=!!i}Object.defineProperty(t.prototype,"i5",{value:!0,enumerable:!1,configurable:!1}),t.t4=function(t){return!0===(t&&t.i5)};var e={},i={};t.cO=function(r,n){var o,s;return n?0<=(r>>>=0)&&r<256&&(s=i[r])?s:(o=new t(r,(0|r)<0?-1:0,!0),0<=r&&r<256&&(i[r]=o),o):-128<=(r|=0)&&r<128&&(s=e[r])?s:(o=new t(r,r<0?-1:0,!1),-128<=r&&r<128&&(e[r]=o),o)},t.nO=function(e,i){return i=!!i,isNaN(e)||!isFinite(e)?t.ZERO:!i&&e<=-o?t.MIN_VALUE:!i&&o<=e+1?t.MAX_VALUE:i&&n<=e?t.n5:e<0?t.nO(-e,i).LO():new t(e%r|0,e/r|0,i)},t.HI=function(e,i,r){return new t(e,i,r)},t.rO=function(e,i,r){if(0===e.length)throw Error("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof i&&(r=i,i=!1),(r=r||10)<2||36<r)throw Error("radix out of range: "+r);var n;if(0<(n=e.indexOf("-")))throw Error('number format error: interior "-" character: '+e);if(0===n)return t.rO(e.substring(1),i,r).LO();for(var o=t.nO(Math.pow(r,8)),s=t.ZERO,a=0;a<e.length;a+=8){var u=Math.min(8,e.length-a),h=parseInt(e.substring(a,a+u),r);if(u<8){var c=t.nO(Math.pow(r,u));s=s.multiply(c).add(t.nO(h))}else s=(s=s.multiply(o)).add(t.nO(h))}return s.MN=i,s},t.i4=function(e){return e instanceof t?e:"number"==typeof e?t.nO(e):"string"==typeof e?t.rO(e):new t(e.low,e.high,e.MN)};var r=4294967296,n=r*r,o=n/2,s=t.cO(1<<24);return t.ZERO=t.cO(0),t.f2=t.cO(0,!0),t.ONE=t.cO(1),t.r5=t.cO(1,!0),t.s5=t.cO(-1),t.MAX_VALUE=t.HI(-1,2147483647,!1),t.n5=t.HI(-1,-1,!0),t.MIN_VALUE=t.HI(0,-2147483648,!1),t.prototype.CN=function(){return this.MN?this.low>>>0:this.low},t.prototype.e5=function(){return this.MN?(this.high>>>0)*r+(this.low>>>0):this.high*r+(this.low>>>0)},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix out of range: "+e);if(this.h5())return"0";var i;if(this.XZ()){if(this.Wh(t.MIN_VALUE)){var r=t.nO(e),n=this.o5(r);return i=n.multiply(r).u5(this),n.toString(e)+i.CN().toString(e)}return"-"+this.LO().toString(e)}var o=t.nO(Math.pow(e,6),this.MN);i=this;for(var s="";;){var a=i.o5(o),u=(i.u5(a.multiply(o)).CN()>>>0).toString(e);if((i=a).h5())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},t.prototype.a5=function(){return this.high},t.prototype.f5=function(){return this.high>>>0},t.prototype.c5=function(){return this.low},t.prototype.l5=function(){return this.low>>>0},t.prototype.v5=function(){if(this.XZ())return this.Wh(t.MIN_VALUE)?64:this.LO().v5();for(var e=0!=this.high?this.high:this.low,i=31;0<i&&0==(e&1<<i);i--);return 0!=this.high?i+33:i+1},t.prototype.h5=function(){return 0===this.high&&0===this.low},t.prototype.XZ=function(){return!this.MN&&this.high<0},t.prototype.d5=function(){return this.MN||0<=this.high},t.prototype.E5=function(){return 1==(1&this.low)},t.prototype.HO=function(){return 0==(1&this.low)},t.p5=t.prototype.Wh=function(e){return t.t4(e)||(e=t.i4(e)),(this.MN===e.MN||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t.w5=t.prototype.g5=function(t){return!this.Wh(t)},t.prototype.b5=t.prototype.y5=function(t){return this.compare(t)<0},t.prototype.T5=t.prototype.m5=function(t){return this.compare(t)<=0},t.prototype.O5=t.prototype.S5=function(t){return 0<this.compare(t)},t.prototype.R5=t.prototype.I5=function(t){return 0<=this.compare(t)},t.prototype.compare=function(e){if(t.t4(e)||(e=t.i4(e)),this.Wh(e))return 0;var i=this.XZ(),r=e.XZ();return i&&!r?-1:!i&&r?1:this.MN?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.u5(e).XZ()?-1:1},t.prototype._5=t.prototype.LO=function(){return!this.MN&&this.Wh(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.add=function(e){t.t4(e)||(e=t.i4(e));var i=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,h=0,c=0,l=0,p=0;return l+=(p+=o+(65535&e.low))>>>16,c+=(l+=n+u)>>>16,h+=(c+=r+a)>>>16,h+=i+s,t.HI((l&=65535)<<16|(p&=65535),(h&=65535)<<16|(c&=65535),this.MN)},t.prototype.sub=t.prototype.u5=function(e){return t.t4(e)||(e=t.i4(e)),this.add(e.LO())},t.prototype.A5=t.prototype.multiply=function(e){if(this.h5())return t.ZERO;if(t.t4(e)||(e=t.i4(e)),e.h5())return t.ZERO;if(this.Wh(t.MIN_VALUE))return e.E5()?t.MIN_VALUE:t.ZERO;if(e.Wh(t.MIN_VALUE))return this.E5()?t.MIN_VALUE:t.ZERO;if(this.XZ())return e.XZ()?this.LO().multiply(e.LO()):this.LO().multiply(e).LO();if(e.XZ())return this.multiply(e.LO()).LO();if(this.y5(s)&&e.y5(s))return t.nO(this.e5()*e.e5(),this.MN);var i=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,a=e.high>>>16,u=65535&e.high,h=e.low>>>16,c=65535&e.low,l=0,p=0,f=0,d=0;return f+=(d+=o*c)>>>16,p+=(f+=n*c)>>>16,f&=65535,p+=(f+=o*h)>>>16,l+=(p+=r*c)>>>16,p&=65535,l+=(p+=n*h)>>>16,p&=65535,l+=(p+=o*u)>>>16,l+=i*c+r*h+n*u+o*a,t.HI((f&=65535)<<16|(d&=65535),(l&=65535)<<16|(p&=65535),this.MN)},t.prototype.N5=t.prototype.o5=function(e){if(t.t4(e)||(e=t.i4(e)),e.h5())throw new Error("division by zero");if(this.h5())return this.MN?t.f2:t.ZERO;var i,r,n;if(this.Wh(t.MIN_VALUE))return e.Wh(t.ONE)||e.Wh(t.s5)?t.MIN_VALUE:e.Wh(t.MIN_VALUE)?t.ONE:(i=this.HN(1).o5(e).shiftLeft(1)).Wh(t.ZERO)?e.XZ()?t.ONE:t.s5:(r=this.u5(e.multiply(i)),n=i.add(r.o5(e)));if(e.Wh(t.MIN_VALUE))return this.MN?t.f2:t.ZERO;if(this.XZ())return e.XZ()?this.LO().o5(e.LO()):this.LO().o5(e).LO();if(e.XZ())return this.o5(e.LO()).LO();for(n=t.ZERO,r=this;r.I5(e);){i=Math.max(1,Math.floor(r.e5()/e.e5()));for(var o=Math.ceil(Math.log(i)/Math.LN2),s=o<=48?1:Math.pow(2,o-48),a=t.nO(i),u=a.multiply(e);u.XZ()||u.S5(r);)u=(a=t.nO(i-=s,this.MN)).multiply(e);a.h5()&&(a=t.ONE),n=n.add(a),r=r.u5(u)}return n},t.prototype.mO=t.prototype.LZ=function(e){return t.t4(e)||(e=t.i4(e)),this.u5(this.o5(e).multiply(e))},t.prototype.not=function(){return t.HI(~this.low,~this.high,this.MN)},t.prototype.and=function(e){return t.t4(e)||(e=t.i4(e)),t.HI(this.low&e.low,this.high&e.high,this.MN)},t.prototype.or=function(e){return t.t4(e)||(e=t.i4(e)),t.HI(this.low|e.low,this.high|e.high,this.MN)},t.prototype.xor=function(e){return t.t4(e)||(e=t.i4(e)),t.HI(this.low^e.low,this.high^e.high,this.MN)},t.prototype.C5=t.prototype.shiftLeft=function(e){return t.t4(e)&&(e=e.CN()),0==(e&=63)?this:e<32?t.HI(this.low<<e,this.high<<e|this.low>>>32-e,this.MN):t.HI(0,this.low<<e-32,this.MN)},t.prototype.k5=t.prototype.HN=function(e){return t.t4(e)&&(e=e.CN()),0==(e&=63)?this:e<32?t.HI(this.low>>>e|this.high<<32-e,this.high>>e,this.MN):t.HI(this.high>>e-32,0<=this.high?0:-1,this.MN)},t.prototype.D5=t.prototype.kN=function(e){if(t.t4(e)&&(e=e.CN()),0==(e&=63))return this;var i=this.high;if(e<32){var r=this.low;return t.HI(r>>>e|i<<32-e,i>>>e,this.MN)}return t.HI(32===e?i:i>>>e-32,0,this.MN)},t.prototype.jN=function(){return this.MN?new t(this.low,this.high,!1):this},t.prototype.PN=function(){return this.MN?this:new t(this.low,this.high,!0)},t})?r.apply(e,[]):r)||(t.exports=n)},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(0),o=i(20),s=i(48),a=i(162),u=i(166),h=i(7),c=i(1),l=i(2),p=h.ut.Za,f=h.ut.$a,d=(g.prototype.Tv=function(){return this.sender.Tv()||this.receiver.Tv()},g.prototype.close=function(){var t=this,e=r.defer();return this.sender.M5().then((function(i){return t.receiver.close(i).then((function(i){return t.hW(i).then((function(i){return t.Kl.close(i).then((function(t){e.resolve(t)}))}))}))})).catch((function(i){c.ErrorMonitor.lt().logError("Error closing connection to peer",t.loggerId,l.ri.Jt,{detailedError:i,otherGuid:t.otherGuid}),e.reject("Close partnership failed")})),e.promise},g.prototype.hW=function(t){this.logger.debug("SEND CLOSE TO "+this.otherGuid);var e=new o.$v.Qv.Close;return e.setType(t),this.Sv(o.ev.Close,e),r(this.swarmId)},g.prototype.Eh=function(t){try{switch(p&&this.logger.debug("DISPATCH "+t.Gv),t.Gv){case o.ev.Chunk:var e=o.$v.Qv.Chunk.decode(t.Vv);this.receiver.j5(e);break;case o.ev.Ack:var i=o.$v.Qv.Ack.decode(t.Vv);this.sender.P5(i.transferId);break;case o.ev.Cancel:var r=o.$v.Qv.Cancel.decode(t.Vv);this.sender.H5(r.transferId);break;case o.ev.hv:p&&this.logger.debug("RECEIVED OUT PART,DECODING ");var n=o.$v.Qv.OutPartnershipRequest.decode(t.Vv);p&&this.logger.debug("RECEIVED OUT PART FROM "+n.guid),this.HD.aW(n,this.Kl);break;case o.ev.ov:p&&this.logger.debug("RECEIVED OUT PART RESP ");var s=o.$v.Qv.OutPartnershipResponse.decode(t.Vv);p&&this.logger.debug("RECEIVED OUT PART RESP FROM "+s.accept),this.HD.kW(s,this.Kl);break;case o.ev.Have:var a=o.$v.Qv.Have.decode(t.Vv);p&&this.logger.debug("RECEIVED HAVE FOR "+a.fragmentId+" FROM "+this.otherGuid),this.HD.L5(this.otherGuid,a);break;case o.ev.Close:var u=o.$v.Qv.Close.decode(t.Vv);p&&this.logger.debug("RECEIVED CLOSE FROM "+this.otherGuid),this.HD.AW(this.otherGuid,u);break;case o.ev.Request:var h=o.$v.Qv.Request.decode(t.Vv);p&&this.logger.debug("RECEIVED REQUEST FOR "+h.fragmentId+" FROM "+this.otherGuid),this.mX.lL(this.otherGuid,h,this);break;case o.ev.DoNotHave:var f=o.$v.Qv.DoNotHave.decode(t.Vv);p&&this.logger.debug("DoNotHave "+f.transferId),this.F5.U5(f);break;case o.ev.uv:var d=o.$v.Qv.UDPHandshakeMessage.decode(t.Vv);p&&this.logger.debug("UDP HANDSHAKE MESSAGE RECEIVED FROM "+d.uuid),this.rX.Bq(d,this.Kl);break;case o.ev.UDPHandshakeResponse:var g=o.$v.Qv.UDPHandshakeResponse.decode(t.Vv);p&&this.logger.debug("UDP HANDSHAKE MESSAGE RESPONSE RECEIVED FROM "+this.otherGuid),this.rX.xq(g,this.Kl);break;case o.ev.UDPSwitchLeadershipRequest:var v=o.$v.Qv.UDPSwitchLeadershipRequest.decode(t.Vv);p&&this.logger.debug("SWITCH LEADERSHIP REQUEST RECEIVED FROM "+this.otherGuid),this.rX.eQ(v);break;case o.ev.av:var y=o.$v.Qv.UDPSwitchLeadershipAck.decode(t.Vv);p&&this.logger.debug("UDP SWITCH ACKNOWLEDGMENT RESPONSE FROM "+this.otherGuid),this.rX.cQ(y,this.otherGuid);break;case o.ev.Bitrate:var m=o.$v.Qv.Bitrate.decode(t.Vv);p&&this.logger.debug("BITRATE INFO "+m.bitrate+" FROM "+m.guid),this.HD.jW(m);break;case o.ev.Haves:var E=o.$v.Qv.Haves.decode(t.Vv);p&&this.logger.debug("RECEIVED BATCH HAVES FOR FROM "+this.otherGuid),this.HD.G5(this.otherGuid,E);break;case o.ev.fv:var w=o.$v.Qv.PeerInfoMessage.decode(t.Vv);p&&this.logger.debug("RECEIVED PEER INFO FROM "+this.otherGuid),this.HD.LW(w);break;case o.ev.Ping:var b=o.$v.Qv.Ping.decode(t.Vv);p&&this.logger.debug("RECEIVED PING FROM "+this.otherGuid),this.HD.x5(b);break;case o.ev.Pong:var S=o.$v.Qv.Pong.decode(t.Vv);p&&this.logger.debug("RECEIVED PONG FROM "+this.otherGuid),this.HD.B5(S);break;case o.ev.cv:var T=o.$v.Qv.NoPartners.decode(t.Vv);p&&this.logger.debug("RECEIVED NON PARTNER MESSAGE FROM "+this.otherGuid),this.F5.V5(this.otherGuid,T);break;default:this.logger.warn("UNKNOWN MESSAGE TYPE "+t.Gv)}}catch(t){c.ErrorMonitor.lt().logError("Error dispatching message",this.loggerId,t,l.ri.si,t)}},g.prototype.Sv=function(t,e){return this.Kl.Sv(t,this.swarmId,e)},g.prototype.Pv=function(){this.sender.Pv()},g);function g(t,e,i,r){this.loggerId="[P2PDispatcher] ",this.logger=n.Framework.resolve(n.Framework.ht.m).log(t.sessionId),this.Ev=e,this.otherGuid=i,this.swarmId=t.swarmId,this.Kl=r,this.receiver=new a.q5(e,i,t),this.sender=new u.Q5(e,i,t,this),this.F5=t.jD,this.HD=t.HD,this.mX=t.mX,(f||n.Framework.U()&&s.TD.bD)&&(this.rX=t.rX)}e.dv=d},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(34),o=i(20),s=i(0),a=i(6),u=i(5),h=i(95),c=i(1),l=i(2),p=(f.prototype.setReportingGuid=function(t){this.W5=t},f.prototype.Tv=function(){return!(0===this.Y5.keys().length&&null===this.K5)},f.prototype.X5=function(t){var e=new o.$v.Qv.Request;try{e.fragmentId=t.jp(),e.transferId=t.ZM,this.sv&&this.logger.debug("INITIATING TR-"+t.ZM+" TIMEOUT: "+t.J5+" FRAGMENT: "+t.jp()+" FROM: "+this.otherGuid),this.Y5.set(t.ZM,t),this.z5.set(t.ZM,s.Framework.time())}catch(t){c.ErrorMonitor.lt().logError("Error constructing fragment request message",this.loggerId,l.ss.es,{detailedError:t,otherGuid:this.otherGuid}),e=null}try{e&&t.lB.oW.Sv(o.ev.Request,e)}catch(t){c.ErrorMonitor.lt().logError("Error sending fragment request",this.loggerId,l.ss.hs,{detailedError:t,otherGuid:this.otherGuid})}},f.prototype.j5=function(t){try{var e=t.transferId,i=t.data.dC(),r=t.chunkSize,n=t.totalSize,o=t.headers;if(this.sv&&this.logger.debug("RCV Chunk "+i.byteLength),!this.Y5.has(e))return;null==this.K5?(this.sv&&this.logger.debug("INITIATED TR-"+e+",SIZE="+n),this.K5=this.Y5.get(e),this.K5.ZM=e,u.ea.Ju.vu&&this.Z5(e,this.K5.lB),null!=o?this.K5.$p=o:this.logger.warn("HEADERS NULL IN FIRST CHUNK"),this.F5.l1(this.otherGuid,this.K5,r,n),this.K5.Jp=r,s.Framework.U()||(this.K5.Xp=i)):(u.ea.Ju.vu&&this.Z5(e,this.K5.lB),this.K5.Jp+=r,s.Framework.U()||(this.K5.Xp=a.La.appendBuffer(this.K5.Xp,i)));var h=s.Framework.U()?this.K5.Jp:this.K5.Xp.byteLength;if(this.sv&&this.logger.debug("RECEIVED "+h+"/"+n+" TRID "+e),h==n){this.sv&&this.logger.debug("RCV ALL DATA "+h+" TR-"+this.K5.Hp),this.K5.Vp.yp=h,s.Framework.clearTimeout(this.K5.Gq),this.Y5.delete(e);var p=s.Framework.time()-this.z5.get(e);this.logger.debug("RCV ALL DATA FROM "+this.otherGuid+" AFTER "+p+" mseconds"),this.z5.delete(e),this.F5.iM(e,this.K5),this.K5=null}}catch(t){c.ErrorMonitor.lt().logError("Error receiving chunk",this.loggerId,l.ss.us,{detailedError:t,otherGuid:this.otherGuid})}},f.prototype.Z5=function(t,e){try{this.sv&&this.logger.debug("SEND ACK "+t+" TO "+this.otherGuid);var i=new o.$v.Qv.Ack;i.transferId=t,e.oW.Sv(o.ev.Ack,i)}catch(t){c.ErrorMonitor.lt().logError("Error sending ack",this.loggerId,l.ss.fs,{detailedError:t,otherGuid:this.otherGuid})}},f.prototype.close=function(t){var e=this,i=r.defer();return null!=this.K5&&this.t6(this.K5.ZM),this.Y5.keys().slice().forEach((function(t){e.t6(t)})),i.resolve(h.mQ.bq),i.promise},f.prototype.t6=function(t){try{if(this.Y5.has(t)){var e=this.Y5.get(t);e.Vp.yp=e.Jp,this.logger.debug("SEND CANCEL FOR "+t+" TO "+this.otherGuid),this.z5.delete(t);var i=new o.$v.Qv.Cancel;i.transferId=t,e.lB.oW.Sv(o.ev.Cancel,i),null!==this.K5&&this.K5.Pp()===e.Pp()&&(this.K5=null),this.Y5.delete(t)}else c.ErrorMonitor.lt().logError("Error cleaning up a not pending transfer",this.loggerId,l.ss.cs)}catch(t){c.ErrorMonitor.lt().logError("Error sending stop transfer",this.loggerId,l.ss.ls,{detailedError:t,otherGuid:this.otherGuid})}},f);function f(t,e,i){this.loggerId="[FragmentRequester] ",this.Y5=new n,this.z5=new n,this.K5=null,this.sv=o.sv,this.Ev=t,this.otherGuid=e,this.F5=i.jD,this.PD=i.PD,this.yv=s.Framework.resolve(s.Framework.ht.v),this.logger=s.Framework.resolve(s.Framework.ht.m).log(i.sessionId)}e.q5=p},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(0),o=i(5),s=i(16),a=i(2),u=i(1),h=(c.prototype.wW=function(t){this.reportingGuid=t,this.oW&&(this.oW.receiver.setReportingGuid(this.reportingGuid),this.oW.sender.setReportingGuid(this.reportingGuid))},c.prototype.i6=function(t,e,i){var r=Math.max(1,e);for(i&&(this.n6+=r,this.r6+=t);this.s6.length>o.ea.Xu.iu;)this.s6.pop();var n=t/r;this.s6.unshift(n)},c.prototype.e6=function(t){this.Y5.has(t)?this.logger.warn(this.guid+" DUPLICATE {} PENDING REQUESTS "+t):this.Y5.set(t,n.Framework.time())},c.prototype.h6=function(t,e,i,r,o,s){try{if(this.Y5.has(t)){var h=this.Y5.get(t),c=n.Framework.time()-h;this.Y5.delete(t),r&&o&&this.i6(e,c,!0),this._U.success(e),this.HL.o6(this.reportingGuid,e,i,o,s)}else u.ErrorMonitor.lt().logError("Error completing a non-existing request",this.loggerId,a.Fs.xs,{otherGuid:this.guid,W5:this.reportingGuid})}catch(t){u.ErrorMonitor.lt().logError("Error handling request completed",this.loggerId,a.Fs.Gs,{detailedError:t,otherGuid:this.guid,W5:this.reportingGuid})}},c.prototype.u6=function(t,e,i,r,n,s){try{if(this.Y5.has(t)){var h=this.Y5.get(t);this.Y5.delete(t),o.ea.Xu.nu?this.i6(e,h,!0):this.i6(0,h,!0),this._U.a6(e,r),this.HL.f6(this.reportingGuid,e,i,r,n,s)}else u.ErrorMonitor.lt().logError("Error partially failed a non-existing request",this.loggerId,a.Fs.Vs,{otherGuid:this.guid,W5:this.reportingGuid})}catch(t){u.ErrorMonitor.lt().logError("Error handling request partially failed ",this.loggerId,a.Fs.Bs,{detailedError:t,otherGuid:this.guid})}},c.prototype.zM=function(t,e,i){try{if(this.Y5.has(t)){var r=this.Y5.get(t);this.Y5.delete(t),this.i6(0,r,!0),this._U.failed(),this.HL.c6(this.reportingGuid,i,e)}else u.ErrorMonitor.lt().logError("Error failed a non-existing request",this.loggerId,a.Fs.Qs,{otherGuid:this.guid,W5:this.reportingGuid})}catch(t){u.ErrorMonitor.lt().logError("Error handling request failed ",this.loggerId,a.Fs.qs,{detailedError:t,otherGuid:this.guid})}},c.prototype.l6=function(t,e){this.HL.v6(t,e,!0)},c.prototype.d6=function(t,e){this.HL.E6(t,e,!0)},c.prototype.p6=function(t,e,i){this.HL.w6(t,e,i,!0)},c.prototype.QM=function(){var t=this.s6.reduce((function(t,e){return t+e}),0);return 0<this.s6.length?t/this.s6.length:0},c.prototype.g6=function(t){this.b6=t},c.prototype.y6=function(){return this.b6},c.prototype.sW=function(){return this.LM.sW()},c.prototype.T6=function(){return this.handshakeDelay},c.prototype.m6=function(t){var e=Math.max(0,this.$W-t);0<e&&e<o.ea.Vu.lo&&(this.handshakeDelay=e)},c);function c(t,e,i,o,a,u,h){this.loggerId="[Partner] ",this.r6=0,this.n6=0,this.b6=0,this.s6=new Array,this.O6=new Array,this.Y5=new r,this.handshakeDelay=-1,this.logger=o,this.oW=i,this.guid=t,this.LM=u,this.S6=a,this.HL=e,this._U=n.Framework.resolve(s.nl.Wc),this.NU=n.Framework.resolve(s.nl.Wc),this.$W=n.Framework.time(),h&&this.m6(h)}e.Partner=h},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(36),n=i(4),o=i(0),s=i(10),a=i(20),u=i(5),h=i(1),c=i(165),l=i(2),p=(f.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.sessionId),this.PD=t.PD,this.fg=t.fg,this.uploadScore=t.uploadScore,this.DD=t.DD,this.iW=t.sU},f.prototype.BQ=function(t){return this.fW(t.peerInfo.guid)},f.prototype.fW=function(t){return this.lG.has(t)||this.cG.has(t)},f.prototype.FW=function(t){return this.cG.has(t)?this.cG.get(t):this.lG.get(t)},f.prototype.UQ=function(t){return this.RW(t.peerInfo.guid)},f.prototype.RW=function(t){return this.vG.has(t)||this.qQ.has(t)},f.prototype.IW=function(t){return this.vG.has(t)?this.vG.get(t):this.qQ.get(t)},f.prototype.bW=function(t){var e=this;try{var i=this.PD.R6();if(this.I6&&!i)if(this.fW(t)){var r=this.FW(t),n=this.uploadScore._6(!1),o=[];this.fg.cq(this.context.isLive()).then((function(i){e.logger.debug(e.ML+"SEND ALL HAVES TO "+t+","+i.length);for(var s=0;s<i.length;s++){var u;u=e.context.isLive()?i[s].size():i[s].totalSize;var h=i[s].Mp,c=new a.$v.Qv.Have;c.setFragmentId(h.jp()),c.setSize(u),c.setUploadScore(n);var l=h;c.setId(l.cA()),c.setBitrate(l.bitrate),c.setDuration(l.duration),c.setType(l.Dp()),o.push(c)}if(0<o.length){var p=new a.$v.Qv.Haves;p.setHave(o),r.oW.Sv(a.ev.Haves,p)}}))}else h.ErrorMonitor.lt().logError("Error sending all haves to peer who is not out partner",this.ML,l.Ni.Hi,{otherGuid:t})}catch(i){h.ErrorMonitor.lt().logError("Error sending all haves",this.ML,l.Ni.Ci,{detailedError:i,otherGuid:t})}},f.prototype.gJ=function(t,e,i){var r=this,n=this.PD.R6();if(this.I6&&!n){var o=this.cG.values();this.lG.forEach((function(t,e){o.push(t)}));var s=this.uploadScore._6(!1);o.forEach((function(n){(!i||i&&n.guid!=i.guid)&&r.A6(n.oW,t,e,s)}))}},f.prototype.A6=function(t,e,i,r){this.N6&&this.logger.debug(this.ML+"SEND HAVE TO "+t.otherGuid+" FOR "+e.jp());try{var n=new a.$v.Qv.Have;n.setFragmentId(e.jp()),n.setSize(i),n.setUploadScore(r);var o=e;n.setId(o.cA()),n.setBitrate(o.bitrate),n.setDuration(o.duration),n.setType(o.Dp()),t.Sv(a.ev.Have,n)}catch(e){h.ErrorMonitor.lt().logError("Error sending have ",this.ML,l.Ni.ki,{detailedError:e,otherGuid:t.otherGuid})}},f.prototype.L5=function(t,e){try{if(this.RW(t)){this.C6&&this.logger.debug(this.ML+"HAVE RECEIVED FROM "+t+": "+e.fragmentId);var i=this.IW(t);i.g6(e.getUploadScore()),this.DD.put(e,i),this.context.nU(e)}else h.ErrorMonitor.lt().logError("Error receiving have from unknown peer",this.ML,l.Ni.Di,{otherGuid:t})}catch(e){h.ErrorMonitor.lt().logError("Error handling received have",this.ML,l.Ni.ji,{detailedError:e,otherGuid:t})}},f.prototype.G5=function(t,e){var i=this;try{if(this.RW(t)){this.C6&&this.logger.debug(this.ML+"BATCH HAVES RECEIVED FROM "+t);var r=this.IW(t);e.getHave().forEach((function(t){r.g6(t.getUploadScore()),i.DD.put(t,r)})),this.context.nU(e.getHave()[0])}else h.ErrorMonitor.lt().logError("Error receiving haves from unknown peer",this.ML,l.Ni.Mi,{otherGuid:t})}catch(e){h.ErrorMonitor.lt().logError("Error handling received haves",this.ML,l.Ni.Pi,{detailedError:e,otherGuid:t})}},f.prototype.rW=function(t){try{var e=new a.$v.Qv.Ping;e.id=this.PD.getId(),e.startTs=o.Framework.time(),this.logger.debug(this.ML+"REQUEST PING TO PEER GUID "+t.otherGuid),t.Sv(a.ev.Ping,e)}catch(e){h.ErrorMonitor.lt().logError("Error requesting ping",this.ML,l.Ni.Ui,{detailedError:e,otherGuid:t.otherGuid})}},f.prototype.x5=function(t){try{var e=t.id;if(!this.fW(e))return void h.ErrorMonitor.lt().logError("Error receiving ping from an unknown peer",this.ML,l.Ni.Gi,{otherGuid:e});var i=-1;t.startTs&&(i=t.startTs),this.k6(this.FW(e).oW,i)}catch(e){h.ErrorMonitor.lt().logError("Error handling received ping",this.ML,l.Ni.Fi,{detailedError:e,otherGuid:t.id})}},f.prototype.D6=function(){try{for(var t="",e=0;e<u.ea.Ju.au;e++)t+=String.fromCharCode(33+93*Math.random());var i=new ArrayBuffer(t.length),n=new Uint8Array(i),o=t.length;for(e=0;e<o;e++)n[e]=t.charCodeAt(e);this.M6=r.wrap(n)}catch(t){h.ErrorMonitor.lt().logError("Error creating random buffer for ping pong",this.logger,l.Ni.Li,t)}},f.prototype.k6=function(t,e){try{var i=new a.$v.Qv.Pong;i.id=this.PD.getId(),i.startTs=e,this.M6||this.D6(),i.data=this.M6,i.dataSize=u.ea.Ju.au,this.logger.debug(this.ML+"SEND PONG TO PEER GUID "+t.otherGuid),t.Sv(a.ev.Pong,i)}catch(e){h.ErrorMonitor.lt().logError("Error sending pong",this.ML,l.Ni.xi,{detailedError:e,otherGuid:t.otherGuid})}},f.prototype.B5=function(t){try{var e=t.id;if(!this.RW(e))return void h.ErrorMonitor.lt().logError("Error receiving a pong from an unknown peer",this.ML,l.Ni.Bi,{otherGuid:e});var i=o.Framework.time();if(t.startTs&&0<t.startTs){var r=i-t.startTs,n=this.IW(e);t.dataSize==t.data.Ma().byteLength?n.i6(t.dataSize,r,!0):h.ErrorMonitor.lt().logError("Error receing pong with wrong data size",this.ML,l.Ni.Vi,{otherGuid:e})}else h.ErrorMonitor.lt().logError("Error receiving pong with wrong timestamp",this.ML,l.Ni.qi,{otherGuid:e})}catch(e){h.ErrorMonitor.lt().logError("Error receiving pong",this.ML,l.Ni.Qi,{detailedError:e,otherGuid:t.id})}},f.prototype.EG=function(){try{var t=new n;return this.j6(this.vG,t),this.j6(this.qQ,t),t}catch(t){return h.ErrorMonitor.lt().logError("Error getting partner snapshots",this.ML,l.Ni.Wi,t),new n}},f.prototype.j6=function(t,e){var i=this;t.forEach((function(t,r){var n=new hive.snapshots.Partner;n.inPart=!0,n.outPart=i.fW(r),n.connInfo=new hive.snapshots.ConnectivityInfo;var o=void 0;t.LM.peerInfo.publicIpString&&(o=t.LM.peerInfo.publicIpString);var a=void 0;t.LM.peerInfo.privateIpString&&(a=t.LM.peerInfo.privateIpString),n.connInfo.publicIp=o,n.connInfo.privateIp=a,n.connInfo.externalAs=t.LM.peerInfo.externalAs,n.connInfo.internalAs=t.LM.peerInfo.internalAs;var u=i.P6();u.rateReceived=t.QM(),n.metrics=u,-1!=t.T6()&&(n.metrics.handshakeDelay=t.T6()),n.udp=t.LM.peerInfo.type==s.mf.k,e.set(t.reportingGuid,n)}))},f.prototype.fG=function(){return new c.H6(this.vG.length,this.qQ.length,this.lG.length,this.cG.length)},f.prototype.P6=function(){var t=new hive.snapshots.PartnerMetrics;return t.rateReceived=0,t.rateSent=0,t.handshakeDelay=0,t},f);function f(){this.ML="[PARTNERSHIP] ",this.qQ=new n,this.vG=new n,this.cG=new n,this.lG=new n,this.N6=!1,this.C6=!1,this.I6=!0,this.active=!1,this.D6(),this.KQ=[]}e.RQ=p},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0}),e.H6=function(t,e,i,r){this.vG=t,this.dG=e,this.lG=i,this.cG=r}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(34),o=i(36),s=i(20),a=i(0),u=i(167),h=i(5),c=i(1),l=i(2),p=(f.prototype.setReportingGuid=function(t){this.W5=t},f.prototype.L6=function(t,e,i,r,n){var o=this;this.sv&&this.logger.info("SEND FRAGMENT "+t+" TO "+this.otherGuid);try{var s=new u.U6;s.transferId=e,s.fragmentId=t,s.F6=n,s.headers=r,s.G6=i,s.x6=Math.ceil(s.G6/h.ea.Ju.au),s.B6=0,this.V6.push(s),this.sv&&this.V6.forEach((function(t){o.logger.debug(o.otherGuid+" PENDING OUT "+t)}))}catch(t){c.ErrorMonitor.lt().logError("Error constructing chunk response",this.loggerId,l.ds.Es,{detailedError:t,otherGuid:this.otherGuid})}null===this.response?this.q6():this.sv&&this.logger.debug(this.otherGuid+" OUT MSG NOT NULL")},f.prototype.P5=function(t){this.sv&&this.logger.debug("ONGOING "+t+" GOT ACK"),null!==this.response&&this.response.transferId.toString()===t.toString()?this.Q6(!1):c.ErrorMonitor.lt().logError("Error receiving ack for unknown transfer",this.loggerId,l.ds.gs)},f.prototype.Pv=function(){null!=this.response&&this.Q6(!1)},f.prototype.H5=function(t){null!=this.response&&this.response.transferId===t?(this.logger.debug("GOT CANCEL FOR ONGOING TR-"+t),this.logger.debug("TRANSPORT CANCEL STATS "+this.Ev+","+this.otherGuid+","+t),this.W6.delete(t),0!=this.response.B6?this.mX.Y6(this.otherGuid,this.W5,this.response.B6,this.response.G6):this.mX.K6(this.otherGuid,this.W5,this.response.G6),this.response=null,this.q6()):this.V6=this.V6.filter((function(e){return e.transferId!==t}))},f.prototype.q6=function(){try{if(null===this.response&&0!==this.V6.length){var t=this.V6.shift();this.response=t,this.sv&&this.logger.debug("DATA TO SEND LENGTH "+this.response.G6+" IN "+this.response.x6+" CHUNKS WITH TR-"+this.response.transferId),this.Q6(!0)}}catch(t){c.ErrorMonitor.lt().logError("Error start sending chunks",this.loggerId,l.ds.ps,t),this.Ov()}},f.prototype.Q6=function(t){t&&(this.W6.set(this.response.transferId,a.Framework.time()),this.X6=this.response.x6);try{if(null!=this.response)if(0===this.response.x6)this.logger.debug("FINISHED SENDING TRANSFER "+this.response.transferId+" WITH "+this.response.B6+" BYTES"),this.W6.delete(this.response.transferId),this.mX.J6(this.otherGuid,this.W5,this.response.G6),this.response=null,this.z6(),this.q6();else{this.sv&&this.logger.debug("A CHUNK");var e=Math.min(this.response.B6+h.ea.Ju.au,this.response.G6),i=e-this.response.B6,r=new s.$v.Qv.Chunk;if(r.transferId=this.response.transferId,r.totalSize=this.response.G6,r.chunkSize=i,t&&null!=this.response.headers&&(r.headers=this.response.headers),a.Framework.U()||null==this.response.F6)r.data=o.wrap(new ArrayBuffer(0));else if(r.data=this.UD.Z6(this.response.fragmentId,this.X6-this.response.x6),null==r.data){var n=this.response.F6.slice(this.response.B6,e);r.data=o.wrap(n)}this.response.B6=this.response.B6+i,this.oW.Sv(s.ev.Chunk,r),this.sv&&this.logger.debug("SND ["+this.response.B6+"-"+(this.response.B6+i)+"/"+this.response.G6+"] TO "+this.otherGuid+" OF TR-"+this.response.transferId),this.response.x6--}else this.logger.debug("NO MESSAGE TO SEND")}catch(t){c.ErrorMonitor.lt().logError("Error sending chunk",this.loggerId,l.ds.ws,{detailedError:t,otherGuid:this.otherGuid}),this.Ov()}},f.prototype.Tv=function(){return!(0===this.V6.length&&null===this.response)},f.prototype.M5=function(){var t=r.defer();return this.V6.length=0,this.Tv()?this.close=t:t.resolve("CLOSE"),t.promise},f.prototype.z6=function(){this.close&&this.close.resolve("CLOSED")},f.prototype.Ov=function(){this.response=null},f);function f(t,e,i,r){this.loggerId="[FragmentSender] ",this.sv=s.sv,this.response=null,this.V6=new Array,this.W6=new n,this.X6=0,this.close=null,this.Ev=t,this.otherGuid=e,this.mX=i.mX,this.oW=r,this.UD=i.UD,this.logger=a.Framework.resolve(a.Framework.ht.m).log(i.sessionId),this.yv=a.Framework.resolve(a.Framework.ht.v)}e.Q5=p},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0}),e.U6=function(){this.headers=null}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0}),e.xv=function(){}},function(t){t.exports=JSON.parse('{"package":"HiveMsgs","messages":[{"name":"Chunk","fields":[{"rule":"required","type":"int32","name":"transferId","id":1},{"rule":"required","type":"int32","name":"totalSize","id":2},{"rule":"required","type":"int32","name":"chunkSize","id":3},{"rule":"required","type":"bytes","name":"data","id":4},{"rule":"optional","type":"string","name":"headers","id":5}]},{"name":"Haves","fields":[{"rule":"repeated","type":"Have","name":"have","id":1}]},{"name":"Have","fields":[{"rule":"required","type":"string","name":"fragmentId","id":1},{"rule":"required","type":"int32","name":"size","id":2},{"rule":"required","type":"int32","name":"type","id":3},{"rule":"required","type":"int32","name":"id","id":4},{"rule":"required","type":"int32","name":"bitrate","id":5},{"rule":"required","type":"int32","name":"duration","id":6},{"rule":"required","type":"float","name":"uploadScore","id":7}]},{"name":"Ping","fields":[{"rule":"required","type":"string","name":"id","id":1},{"rule":"required","type":"uint64","name":"startTs","id":2}]},{"name":"Pong","fields":[{"rule":"required","type":"string","name":"id","id":1},{"rule":"required","type":"bytes","name":"data","id":2},{"rule":"required","type":"int32","name":"dataSize","id":3},{"rule":"required","type":"uint64","name":"startTs","id":4}]},{"name":"Request","fields":[{"rule":"required","type":"string","name":"fragmentId","id":1},{"rule":"required","type":"int32","name":"transferId","id":2}]},{"name":"DoNotHave","fields":[{"rule":"required","type":"int32","name":"transferId","id":1}]},{"name":"NoPartners","fields":[{"rule":"required","type":"int32","name":"transferId","id":1}]},{"name":"Cancel","fields":[{"rule":"required","type":"int32","name":"transferId","id":1}]},{"name":"Ack","fields":[{"rule":"optional","type":"int32","name":"transferId","id":1}]},{"name":"Close","fields":[{"rule":"required","type":"int32","name":"type","id":1}]},{"name":"StreamCharacteristics","fields":[{"rule":"required","type":"int32","name":"streamState","id":1},{"rule":"required","type":"int32","name":"bitrate","id":2},{"rule":"required","type":"int32","name":"delta","id":3}]},{"name":"OutPartnershipRequest","fields":[{"rule":"required","type":"string","name":"guid","id":1},{"rule":"required","type":"string","name":"contextId","id":2},{"rule":"required","type":"string","name":"p2pProtocolVersion","id":3},{"rule":"optional","type":"int32","name":"internalAs","id":4},{"rule":"optional","type":"int32","name":"externalAs","id":5},{"rule":"optional","type":"string","name":"publicIpString","id":6},{"rule":"optional","type":"string","name":"privateIpString","id":7},{"rule":"required","type":"string","name":"reportingGuid","id":8},{"rule":"repeated","type":"StreamCharacteristics","name":"streamCharacteristics","id":9}]},{"name":"OutPartnershipResponse","fields":[{"rule":"required","type":"int32","name":"accept","id":1},{"rule":"optional","type":"int32","name":"internalAs","id":2},{"rule":"optional","type":"int32","name":"externalAs","id":3},{"rule":"optional","type":"string","name":"publicIpString","id":4},{"rule":"optional","type":"string","name":"privateIpString","id":5},{"rule":"optional","type":"string","name":"reportingGuid","id":6},{"rule":"repeated","type":"StreamCharacteristics","name":"streamCharacteristics","id":7}]},{"name":"PeerInfoMessage","fields":[{"rule":"required","type":"string","name":"guid","id":1},{"rule":"optional","type":"string","name":"publicIpString","id":2},{"rule":"optional","type":"string","name":"privateIpString","id":3},{"rule":"optional","type":"int32","name":"internalAs","id":4},{"rule":"optional","type":"int32","name":"externalAs","id":5},{"rule":"repeated","type":"StreamCharacteristics","name":"streamCharacteristics","id":6}]},{"name":"UDPHandshakeMessage","fields":[{"rule":"required","type":"string","name":"uuid","id":1},{"rule":"required","type":"string","name":"streamId","id":2},{"rule":"required","type":"float","name":"udpScore","id":3},{"rule":"required","type":"bool","name":"isLeader","id":4}]},{"name":"UDPHandshakeResponse","fields":[{"rule":"required","type":"string","name":"accept","id":1}]},{"name":"UDPSwitchLeadershipRequest","fields":[{"rule":"required","type":"string","name":"uuid","id":1},{"rule":"required","type":"float","name":"udpScore","id":2}]},{"name":"UDPSwitchLeadershipAck","fields":[{"rule":"required","type":"bool","name":"ok","id":1}]},{"name":"Bitrate","fields":[{"rule":"required","type":"string","name":"guid","id":1},{"rule":"required","type":"int32","name":"bitrate","id":2}]}]}')},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(5),n=(o.TO=function(t,e){var i;return 0!=(i=t.udpScore>e.udpScore?1:t.udpScore<e.udpScore?-1:0)?-i:r.ea.UDPBroadcast.gu?e.uuid.localeCompare(t.uuid):t.uuid.localeCompare(e.uuid)},o);function o(t,e,i,r,n){this.udpScore=0,this.Iq=!1,this.streamId="",this.uuid=t,this.udpScore=e,i&&(this.address=i),r&&(this.Iq=r),n&&(this.streamId=n)}e.Sq=n},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(19),o=i(0),s=i(16),a=i(9),u=i(10),h=i(1),c=i(2),l=(p.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.sessionId),this.DD=t.DD,this.HD=t.HD,this.MD=t.MD,this.PD=t.PD,this.HL=t.sU,this.n8.t8(t.PD)},p.prototype.request=function(t){this.logger.debug("FRL ISSUE REQ FOR FRAGMENT "+t.Mp.toString()+"-"+t.Vp.yp+" ["+a.wf[t.Dp()]+"] TO P2P"),this.Y5.set(t.Pp(),t);var e=this.Kv.next();t.ZM=e,this.r8.set(e,t.Pp()),this.Y0(t)},p.prototype.Y0=function(t){var e=t.jp(),i=t.Pp(),r=this.s8(e);t.size=this.DD.MM(e).size;var n=this.n8.e8(r,t.type);null!=n?(this.logger.info("SELECT "+n.oW.otherGuid+" (LAN LEADER "+n.LM.peerInfo.isLeader+" iAS "+n.LM.peerInfo.internalAs+" eAS "+n.LM.peerInfo.externalAs+" privateIp "+n.LM.peerInfo.privateIpString+" ) out of "+r.length+" type "+u.mf[n.LM.peerInfo.type]+" size:"+t.size+" FOR TRANSFER"+t.ZM+" REQUEST ID "+i),t.lB=n,t.uq=n.LM.peerInfo,t.lB.e6(t.ZM),t.Vp.wp=!0,t.Vp.Ip=o.Framework.time(),this.JM(t)?(this.HL.h8(t),n.oW.receiver.X5(t)):this.o8(t)):(h.ErrorMonitor.lt().logError("Error sending p2p request because we cannot find a partner",this.loggerId,c.bs.ys),this.zM(t.ZM,"NO PARTNERS FOUND FOR REQUEST"))},p.prototype.s8=function(t){var e=this,i=[];try{this.DD.jM(t).forEach((function(t){e.HD.RW(t.guid)?i.push(t):e.logger.warn("I HAVE A HAVE FROM A NON IN-PARTNER "+t.guid)}))}catch(t){h.ErrorMonitor.lt().logError("Error filtering in partners",this.loggerId,c.bs.Ts,t)}finally{return i}},p.prototype.o8=function(t){var e=t.ZM;if(this.logger.info("REQUEST "+t.ZM+" TO "+t.lB.guid+" ABORTED BECAUSE OF SLOW P2P CONNECTION"),this.r8.has(e)){var i=this.r8.get(e);this.r8.delete(e);var r=this.Y5.get(i);this.Y5.delete(i),this.MD.fJ(r)}},p.prototype.JM=function(t){var e=this,i=!1;try{var r=0;null==t.size?(r=this.DD.MM(t.jp()).size,t.size=r,this.logger.warn("request size not set - this should not happen")):r=t.size;var n=r-t.Jp,s=t.Zp.VH().aB(t,n);return 0<(t.J5=s)&&(i=!0,null==t.Gq&&(t.Gq=o.Framework.setTimeout((function(){e.u8(t)}),s))),i}catch(t){return h.ErrorMonitor.lt().logError("Error setting request timeout",this.loggerId,c.bs.ms,t),!1}},p.prototype.u8=function(t){this.HL.a8(t),this.zM(t.ZM,"TIMED-OUT")},p.prototype.zM=function(t,e){this.logger.info(e+" "+t);var i=this.f8(t,!0);this.logger.warn("REQUEST "+t+" FOR "+i.Pp()+" FAILED BECAUSE "+e),i&&this.MD.ZX(i)},p.prototype.f8=function(t,e){try{if(this.r8.has(t)){var i=this.r8.get(t);this.r8.delete(t);var r=this.Y5.get(i);if(this.Y5.delete(i),o.Framework.clearTimeout(r.Gq),e&&this.HD.RW(r.lB.oW.otherGuid)){r.lB.oW.receiver.t6(t);var n=r.Dp()==a.wf.bf;0!=r.Jp?r.lB.u6(r.ZM,r.Jp,r.Vp.p2pAgenTrafficSuccessQt,r.size,n,r.type):r.lB.zM(r.ZM,n,r.size)}return r}return h.ErrorMonitor.lt().logError("Error cancelling request on non existing session",this.loggerId,c.bs.Ss),null}catch(t){return h.ErrorMonitor.lt().logError("Error removing request",this.loggerId,c.bs.Os,t),null}},p.prototype.zX=function(t){if(this.Y5.has(t)){var e=this.Y5.get(t).ZM;this.f8(e,!0)}},p.prototype.l1=function(t,e,i,r){this.logger.debug("FRL DOWNLOADING "+e.Pp()+" FROM "+t+" P2P")},p.prototype.iM=function(t,e){if(this.logger.debug("FRL PROMISED FRAGMENT "+e.Pp()+" RETURNED FROM P2P SIZE "+e.Vp.yp),e=this.f8(t,!1)){e.Vp.Ap=o.Framework.time();var i=e.Dp()==a.wf.bf;e.lB.h6(e.ZM,e.size,e.Vp.p2pAgenTrafficSuccessQt,!0,i,e.type),this.MD.iJ(e)}else this.logger.warn("TRIED TO REMOVE A NON EXISTING REQUEST "+t+" (THIS SHOULD NOT HAPPEN. AT LEAST NOT TOO OFTEN)")},p.prototype.U5=function(t){var e=t.getTransferId();if(this.r8.has(e)){h.ErrorMonitor.lt().logError("Error receiving a do not have for my request",this.loggerId,c.bs.Rs),this.logger.debug("DO NOT HAVE RECEIVED FOR "+e);var i=this.f8(e,!1);if(i){var r=i.Dp()==a.wf.bf;i.lB.zM(i.ZM,r,i.size),this.MD.ZX(i)}}else this.logger.warn("UNKNOWN DO NOT HAVE "+e)},p.prototype.V5=function(t,e){var i=e.transferId;if(this.r8.has(i)){h.ErrorMonitor.lt().logError("Error rejected request by a non partner",this.loggerId,c.bs.Is),this.HD.eW(t);var r=this.f8(i,!1);r&&this.MD.ZX(r)}},p.prototype.ah=function(t){return this.Y5.has(t)},p);function p(){this.loggerId="[P2PRequester] ",this.Kv=new n.Counter,this.Y5=new r,this.r8=new r,this.n8=o.Framework.resolve(s.nl.qc)}e.x$=l},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(0),n=i(20),o=i(1),s=i(2),a=(u.prototype.init=function(t){this.logger=r.Framework.resolve(r.Framework.ht.m).log(t.sessionId),this.yq=t,this.DD=t.DD,this.fg=t.fg,this.HD=t.HD,this.uploadScore=t.uploadScore,this.PD=t.PD,this.HL=t.sU},u.prototype.lL=function(t,e,i){try{if(this.HD.fW(t)){var r=this.HD.FW(t);this.c8(t,e,r)}else this.l8(t,e,i)}catch(t){o.ErrorMonitor.lt().logError("Error on responding to p2p request",this.loggerId,s._s.As,t)}},u.prototype.J6=function(t,e,i){try{if(this.uploadScore.success(i),this.HD.fW(t)){var r=this.HD.FW(t);r.NU.success(i),r.l6(i,e)}}catch(t){o.ErrorMonitor.lt().logError("Error on request satisfied",this.loggerId,s._s.Ns,t)}},u.prototype.Y6=function(t,e,i,r){try{if(this.uploadScore.a6(i,r),this.HD.fW(t)){var n=this.HD.FW(t);n.NU.a6(i,r),n.p6(i,r,e)}}catch(t){o.ErrorMonitor.lt().logError("Error on request partially satisfied",this.loggerId,s._s.Cs,t)}},u.prototype.K6=function(t,e,i){try{if(this.uploadScore.failed(),this.HD.fW(t)){var r=this.HD.FW(t);r.NU.failed(),r.d6(i,e)}}catch(t){o.ErrorMonitor.lt().logError("Error on request not satisfied",this.loggerId,s._s.ks,t)}},u.prototype.c8=function(t,e,i){var r=this;this.fg.get(e.fragmentId).then((function(n){n?(r.logger.debug("SENDING TO "+t+","+e.fragmentId+","+e.transferId+","+n.length+" DL "+n.length),i.oW.sender.L6(e.fragmentId,e.transferId,n.length,n.headers,n.data)):(r.logger.debug("RECEIVED REQUEST FOR "+e.fragmentId+" FROM "+t+" CAN'T BE SERVED"),r.v8(e.transferId,i))}))},u.prototype.v8=function(t,e){try{this.logger.info("SEND DO NOT HAVE "+t+" TO "+e.oW.Ev);var i=new n.$v.Qv.DoNotHave;i.setTransferId(t),e.oW.Sv(n.ev.DoNotHave,i)}catch(t){o.ErrorMonitor.lt().logError("Error on sending do not have",this.loggerId,s._s.Ds,t)}},u.prototype.l8=function(t,e,i){try{this.logger.warn("GOT REQUEST FROM NON-PARTNER "+t+" FOR "+e.fragmentId);var r=new n.$v.Qv.NoPartners;r.setTransferId(e.transferId),i.Sv(n.ev.cv,r)}catch(t){o.ErrorMonitor.lt().logError("Error on send no partners",this.loggerId,s._s.Ms,t)}},u);function u(){this.loggerId="[P2PResponder] "}e.B$=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r,n,o=i(34),s=i(0),a=i(5);(n=r=e.d8||(e.d8={}))[n.S=0]="S",n[n.E8=1]="F",n[n.p8=2]="PF";var u=function(t){this.ts=t},h=function(){this.w8=0,this.g8=0,this.b8=0,this.y8=0,this.T8=0,this.m8=0};e.O8=h;var c=(l.prototype.success=function(t){this.event(r.S,t,t)},l.prototype.failed=function(){this.event(r.E8,0,0)},l.prototype.a6=function(t,e){this.event(r.p8,t,e)},l.prototype.event=function(t,e,i){var r=new u(s.Framework.time());r.t=t,r.S8=e,r.R8=e/i,r.I8=(i-e)/i,this._8.set(r.ts,r),this.A8()},l.prototype.A8=function(){var t=this,e=s.Framework.time()-2*a.ea.Xu.ru;if(0<e){var i=[];this._8.forEach((function(t,r){r<e&&i.push(r)})),i.forEach((function(e){t._8.delete(e)}))}},l.prototype.IU=function(t){var e=0,i=this.N8(t,a.ea.Xu.ru);return null!=i&&(e=0==i.g8+i.b8+i.y8?0:(i.g8-a.ea.Xu.su*(i.y8+i.b8))/(i.g8+a.ea.Xu.su*(i.y8+i.b8))),e},l.prototype._6=function(t){var e=0,i=this.N8(t,a.ea.Xu.ru);if(null!=i){var r=i.g8+i.b8+i.y8;e=0==r?0:(i.b8+i.y8*a.ea.Xu.hu)/r}return e},l.prototype.C8=function(t){var e=this.N8(!1,t);return null!=e?e.w8:0},l.prototype.N8=function(t,e){if(0==this._8.keys().length)return null;var i=new h,n=s.Framework.time()-e;n<0&&(n=0);var a=new o;return this._8.forEach((function(t,e){n<=e&&a.set(e,t)})),a.forEach((function(t,e){switch(i.w8+=t.S8,t.t){case r.S:i.g8++;break;case r.E8:i.b8++;break;default:i.y8++,i.T8+=t.R8,i.m8+=t.I8}})),i},l.hu=.2,l.eu=.2,l);function l(){this._8=new o}e.V$=c},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(4),a=i(3),u=i(0),h=i(175),c=i(177),l=i(96),p=i(2),f=i(1),d=(n(g,o=c.k8),g.prototype.start=function(t,e){void 0===e&&(e=[]);var i=u.Framework.resolve(u.Framework.ht.m).log(t),r=null;return 0==this.jd.keys().length?(i.debug("TRIGGERING CONNECT "),r=this.D8(),this.M8(t,e)):(i.debug("ALREADY CONNECTED "),r=this.vl.Al(),this.M8(t,e),this.j8.isConnected()&&this.P8(this.tE,t)),r},g.prototype.D8=function(){var t=this,e=u.Framework.et.h;return"localhost"===e&&(e="127.0.0.1:"+location.port),this.logger.debug("CONNECTING.."),this.vl.Al().then((function(i){var r=i.Dl();return t.logger.debug("MY IDENTITY ",r),t.tE=r,t.j8.start(e,r),i}))},g.prototype.H8=function(){return a.resolve(new s)},g.prototype.connect=function(t){var e=this,i=a.defer();return this.L8.has(t)?(this.logger.debug("Already connected to "+t+", ignoring"),i.resolve(this.L8.get(t))):this.channelManager.U8(this.tE,t).then((function(i){return e.connected(t,i)})).then((function(t){return i.resolve(t)})).fail((function(r){f.ErrorMonitor.lt().logError("Error establishing connection",e.loggerId,p.kt.Pt,{otherGuid:t}),i.reject("CONN TO "+t+" CANNOT BE ESTABLISHED ")})),i.promise},g.prototype.send=function(t,e,i){var r=this.channelManager.send(t,e);return r||(f.ErrorMonitor.lt().logError("Error sending message without channel established",this.loggerId,p.kt.Ht,{otherGuid:t}),this.F8(t)),r},g.prototype.G8=function(t,e,i){this.x8&&this.logger.debug("REC BUF "+i.byteLength+" "+i),this.L8.has(t)?(this.x8&&this.logger.debug("PROC MSG FROM "+t),this.L8.get(t).Hv(i)):f.ErrorMonitor.lt().logError("Error receiving msg without having a connection established",this.loggerId,p.kt.Ht,{otherGuid:t})},g.prototype.connected=function(t,e){if(this.L8.has(t))this.logger.debug("RECONNECTED TO "+t+", RESETTING STATE"),this.L8.get(t).reset();else{this.logger.info("CONNECTED TO "+t);var i=e.Nq;i.init(this.tE,t),this.L8.set(t,i)}return a.resolve(this.L8.get(t))},g.prototype.B8=function(t,e){this.logger.debug("FAILED CONN TO "+e),t.reject("CONN TO "+e+" CANNOT BE ESTABLISHED ")},g.prototype.V8=function(t,e){this.logger.info(t+" connected to me"),this.connected(t,e)},g.prototype.F8=function(t){this.L8.has(t)?(this.logger.info("Connection closed to "+t),this.L8.delete(t),this.q8(t)):this.logger.warn("TRYING TO REMOVE A PEER THAT IS NOT THERE: "+t)},g.prototype.Q8=function(){var t=this;l.YW.VW&&u.Framework.setInterval((function(){var e=u.Framework.time();t.L8.forEach((function(i,r){var n=e-i.qv();n>l.YW.QW&&(t.logger.debug("closing stale connection to "+r+" [unused for: "+n+"ms]"),t.disconnect(r))}))}),l.YW.qW)},g.prototype.stop=function(t){u.Framework.resolve(u.Framework.ht.m).log(t).debug("STOPPING CONNECTIONS AND REMOVING LISTENERS"),this.W8(t)},g.prototype.Y8=function(){},g.prototype.disconnect=function(t){this.L8.has(t)&&this.channelManager.disconnect(t)},g.Nu="availableSendRate",g.Cu="remoteAddress",g.ku="localAddress",g);function g(){var t=o.call(this)||this;return t.loggerId="[HiveNetworkManager] ",t.x8=!1,t.L8=new s,t.Kv=1,t.vl=u.Framework.resolve(u.Framework.ht.u),t.j8=u.Framework.resolve(u.Framework.ht.O),t.channelManager=new h.K8(t.logger,t.j8,t),t.j8.init(t,t.logger,t.channelManager),t.Q8(),t}e.M$=d},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(0),o=i(176),s=i(96),a=i(2),u=i(1),h=(c.prototype.U8=function(t,e){var i=null;if(e in this.X8){var n=r.defer();n.reject("OTHER ALREADY TRYING TO CONNECT"),i=n.promise}else{this.J8.x8&&this.logger.info("Initiating connection to "+e);var o=this.z8(t,e);i=this.Z8(o,e).connect(e)}return i},c.prototype.t9=function(t){t.i9 in this.X8&&(delete this.n9[t.label],delete this.X8[t.i9]),t.open&&(this.J8.F8(t.i9),t.open=!1)},c.prototype.send=function(t,e){this.J8.x8&&this.logger.debug("DATA "+e.byteLength+" "+e);var i=this.X8[t];return i&&i.channel?(i.send(e),!0):(u.ErrorMonitor.lt().logError("Error sending message wihtout channel established",this.loggerId,a.Zt.ti,{otherGuid:t}),!1)},c.prototype.trigger=function(t,e){var i=e.channel;if(i&&i.label&&this.n9[i.label]){var r=this.n9[i.label];(n=r[t]).call(r,e)}else{var n,o="handle_"+t;(n=this[o])?n.call(this,e):u.ErrorMonitor.lt().logError("Error received a message for a non existing function",this.loggerId,a.Zt.ii,{r9:o})}},c.prototype.handle_offer=function(t){if(this.J8.x8&&this.logger.info("received an offer from "+t.peer.guid+" on channel "+t.channel.label),this.X8[t.peer.guid]&&t.peer<this.J8.tE)this.j8.s9(this.J8.tE,t.peer.guid,t.channel.label);else{var e=this.Z8(t.channel.label,t.peer.guid),i=this.e9(e);e.offer(t,i)}},c.prototype.e9=function(t){var e=this;return n.Framework.setTimeout((function(){u.ErrorMonitor.lt().logError("Error incoming connection timedout",e.loggerId,a.Zt.ni,{otherGuid:t.i9}),t.close()}),s.YW.WW)},c.prototype.Z8=function(t,e){var i=new o.h9(this,this.J8,t,this.o9,this.u9,e);return this.n9[t]=i,this.X8[e]=i},c.prototype.handle_offer_rejected=function(t){this.J8.x8&&this.logger.debug("remote peer rejected ",t);var e=this.X8[t.a9];e&&e.close(),delete this.X8[t.a9],delete this.n9[t.channel]},c.prototype.z8=function(t,e){return t.substring(0,Math.max(8,t.length))+":"+e.substring(0,Math.max(8,e.length))+":"+this.Kv++},c.prototype.disconnect=function(t){var e=this.X8[t];e&&e.close()},c);function c(t,e,i){this.logger=t,this.j8=e,this.J8=i,this.loggerId="[ChannelManager] ",this.u9={iceServers:[{urls:"stun:stun.hivestreaming.com:3478"}]},this.Kv=1,this.o9=null,this.n9={},this.X8={}}e.K8=h},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(5),n=i(2),o=i(3),s=i(0),a=i(1),u=(h.prototype.f9=function(){var t=this;if(this.channel&&"open"!=this.channel.readyState){if(this.x8&&this.logger.debug(this.loggerId+"Check connection "+this.i9),this.c9<=0)return this.logger.debug(this.loggerId+"Closing channel since it couldnt be established to "+this.i9),void this.close();this.c9-=1,this.l9=s.Framework.setTimeout((function(){return t.f9()}),this.timeout)}},h.prototype.close=function(){try{this.x8&&this.logger.debug(this.loggerId+"Closing connection to "+this.i9),this.v9(!0),this.channelManager.t9(this),this.Ex&&"closed"!==this.Ex.signalingState&&(this.Ex.close(),this.Ex=null,this.channel&&(this.channel.close(),this.channel=null))}catch(t){a.ErrorMonitor.lt().logError("Error closing the connection",this.loggerId,n.Ut.Jt,{detailedError:t,otherGuid:this.i9})}},h.prototype.connect=function(t){var e=this;this.x8&&this.logger.debug(this.loggerId+"Connecting to "+t),this.i9=t,this.channel=this.Ex.createDataChannel(this.label);var i=this.d9(!0,-1);return this.l9=s.Framework.setTimeout((function(){return e.f9()}),this.timeout),i},h.prototype.E9=function(t){var e=this,i=o.defer();return this.Ex.setRemoteDescription(t).then((function(){i.resolve("OK")})).catch((function(t){a.ErrorMonitor.lt().logError("Error setting remote description",e.loggerId,n.Ut.xt,{detailedError:t,otherGuid:e.i9}),i.reject(t)})),i.promise},h.prototype.p9=function(t){var e=this,i=o.defer();return"closed"!==this.Ex.signalingState?this.Ex.setLocalDescription(t).then((function(){i.resolve(e.Ex.localDescription)})).catch((function(t){a.ErrorMonitor.lt().logError("Error setting local description",e.loggerId,n.Ut.Bt,{detailedError:t,otherGuid:e.i9}),i.reject(t)})):(a.ErrorMonitor.lt().logError("Signaling state is closed",this.loggerId,n.Ut.xt),i.reject("Signaling state is closed")),i.promise},h.prototype.createOffer=function(){var t=this,e=o.defer();return this.Ex.createOffer().then((function(t){e.resolve(new RTCSessionDescription(t))})).catch((function(e){a.ErrorMonitor.lt().logError("Error creating offer",t.loggerId,n.Ut.Ft,{detailedError:e,otherGuid:t.i9}),t.close()})),e.promise},h.prototype.createAnswer=function(){var t=this,e=o.defer();return this.Ex.createAnswer().then((function(t){e.resolve(new RTCSessionDescription(t))})).catch((function(i){a.ErrorMonitor.lt().logError("Error creating answer",t.loggerId,n.Ut.Gt,{detailedError:i,otherGuid:t.i9}),e.reject(i)})),e.promise},h.prototype.offer=function(t,e){var i=this;this.x8&&(this.logger.debug(this.loggerId+"Received an offer from "+this.i9),this.logger.debug(this.loggerId+"Offer:",t)),this.Ex.ondatachannel=function(t){i.channel=t.channel,i.d9(!1,e)};var r=new RTCSessionDescription(t.channel.offer);this.i9=t.peer.guid,this.E9(r).then((function(e){if("closed"!==i.Ex.signalingState)return i.update_ice_candidates(t),i.createAnswer()})).then((function(t){return i.p9(t)})).then((function(t){i.logger.debug(i.loggerId+"Sending back an answer [candidates: "+i.w9.length+"]");var e=i.w9;i.w9=new Array,i.channelManager.j8.answer(i,t,e,i.i9),i.g9=!0})).catch((function(t){a.ErrorMonitor.lt().logError("Error responding to offer",i.loggerId,n.Ut.$t,{detailedError:t,otherGuid:i.i9}),i.close()}))},h.prototype.answer=function(t){var e=this;this.x8&&this.logger.debug(this.loggerId+"Answer: ",t);var i=new RTCSessionDescription(t.answer);this.E9(i).then((function(){"closed"!==e.Ex.signalingState&&e.update_ice_candidates(t)})).catch((function(t){a.ErrorMonitor.lt().logError("Error setting remote descriptor for the answer received",e.logger,n.Ut.Kt,{detailedError:t,otherGuid:e.i9}),e.close()}))},h.prototype.update_ice_candidates=function(t){var e=this;t.channel.ice_candidates.forEach((function(t){e.x8&&e.logger.debug(e.loggerId+"got ICE cand: ",t);var i=new RTCIceCandidate(t);e.Ex.addIceCandidate(i).then((function(){})).catch((function(t){a.ErrorMonitor.lt().logError("Error updating ice candidates",e.loggerId,n.Ut.Yt,{detailedError:t,otherGuid:e.i9})}))}))},h.prototype.d9=function(t,e){var i=this,r=o.defer();return this.channel.onopen=function(n){return i.b9(r,t,e)},this.channel.onclose=function(t){i.close(),r.reject(i)},this.channel.onmessage=function(t){return i.Nq.Hv(t.data)},this.channel.onerror=function(t){a.ErrorMonitor.lt().logError("Error setting up channel",i.loggerId,n.Ut.qt,{detailedError:t,otherGuid:i.i9}),i.close()},r.promise},h.prototype.b9=function(t,e,i){var n=this;this.open=!0,this.channel.bufferedAmountLowThreshold=Math.min(this.Ex.sctp.maxMessageSize,r.ea.Ju.au),this.channel.addEventListener("bufferedamountlow",(function(){n.Nq.Pv()})),t.resolve(this),e||(this.J8.V8(this.i9,this),i&&s.Framework.clearTimeout(i))},h.prototype.y9=function(){var t=this;this.g9&&-1==this.T9&&(this.T9=s.Framework.setTimeout((function(){t.m9(),t.v9(!1)}),r.ea.na.ju))},h.prototype.m9=function(){var t=this,e=this.w9;if(this.w9=new Array,e&&0<e.length){var i=e.length;this.channelManager.j8.O9(this.J8.tE,this,e,this.i9).then((function(e){t.x8&&t.logger.debug(t.loggerId+"sent "+i+" more candidates")})).catch((function(e){a.ErrorMonitor.lt().logError("Error sending candidates",t.loggerId,n.Ut.qt,{detailedError:e,otherGuid:t.i9})}))}},h.prototype.v9=function(t){t&&-1!=this.T9&&s.Framework.clearTimeout(this.T9),this.T9=-1},h.prototype.send=function(t){var e=this;null!==this.S9&&(s.Framework.clearTimeout(this.S9),this.S9=null);try{this.channel.send(t),this.channel.bufferedAmount<=r.ea.Ju.au&&(this.S9=s.Framework.setTimeout((function(){return e.Nq.Pv()}),0))}catch(t){a.ErrorMonitor.lt().logError("Error setting sending ",this.loggerId,n.Ut.zt,{detailedError:t,otherGuid:this.i9}),this.close()}},h);function h(t,e,i,r,o,u){var h=this;this.channelManager=t,this.J8=e,this.label=i,this.o9=r,this.u9=o,this.i9=u,this.x8=!1,this.loggerId="[Channel] ",this.T9=-1,this.Ex=null,this.channel=null,this.S9=null,this.l9=null,this.c9=5,this.timeout=5e3,this.open=!1,this.g9=!1,this.w9=new Array,this.R9=function(){return!!this.channel&&"connecting"===this.channel.readyState},this.logger=s.Framework.resolve(s.Framework.ht.m).log(),this.Nq=s.Framework.resolve(s.Framework.ht.p),this.Nq.init(this.J8.tE,u),this.Ex=new RTCPeerConnection(this.u9),this.Ex.onicecandidate=function(t){t&&t.candidate&&(h.w9.push(t.candidate),h.y9())},this.Ex.onnegotiationneeded=function(){h.createOffer().then((function(t){return h.p9(t)})).then((function(t){h.x8&&h.logger.debug(h.loggerId+"Sending offer to "+h.i9+" [candidates: "+h.w9.length+"]");var e=h.w9;h.w9=new Array;var i=h.channelManager.j8.offer(h.J8.tE,h.i9,h,e,t);return h.g9=!0,i})).catch((function(t){a.ErrorMonitor.lt().logError("Error negotiating with peer",h.loggerId,n.Ut.Vt,{detailedError:t,otherGuid:h.i9}),h.close()}))},this.Ex.oniceconnectionstatechange=function(t){h.Ex&&"disconnected"===h.Ex.iceConnectionState&&h.close(),h.Ex&&"failed"===h.Ex.iceConnectionState&&(a.ErrorMonitor.lt().logError("Error establishing ICE connection",h.loggerId,n.Ut.Vt,{otherGuid:h.i9}),h.close())},this.Ex.onsignalingstatechange=function(t){"closed"===t.signalingState&&h.close()}}e.h9=u},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(0),o=i(2),s=i(1),a=(u.prototype.M8=function(t,e){void 0===e&&(e=[]),this.logger.info("SET LISTENERS FOR "+t+","+e.length),this.jd.set(t,e)},u.prototype.W8=function(t){this.jd.delete(t)},u.prototype.I9=function(){0<this.jd.length&&this.jd.forEach((function(t,e){t.forEach((function(t){t.HQ&&t.HQ()}))}))},u.prototype.P8=function(t,e){var i=this;0<this.jd.length&&(e?this.jd.get(e).forEach((function(e){try{e.AE&&e.AE(t)}catch(e){s.ErrorMonitor.lt().logError("Error firing server connect when we have swarm",i.ML,o.kt.Mt,e)}})):this.jd.forEach((function(e,r){e.forEach((function(e){try{e.AE&&e.AE(t)}catch(e){s.ErrorMonitor.lt().logError("Error firing server connect when we do not have swarm",i.ML,o.kt.jt,e)}}))})))},u.prototype.q8=function(t){0<this.jd.length&&this.jd.forEach((function(e,i){e.forEach((function(e){e.dQ&&e.dQ(t)}))}))},u);function u(){this.ML="[Base Network Manager] ",this.jd=new r,this.logger=n.Framework.resolve(n.Framework.ht.m).log()}e.k8=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(0),o=i(17),s=(a.prototype.init=function(t,e,i){this.J8=t,this.logger=e,this.channelManager=i},a.prototype.isConnected=function(){return this.client.UE().isConnected()},a.prototype.start=function(t,e){var i=this;this.logger.debug("MY ID "+e),this.tE=e,this.client&&this.client.UE()?this.client.UE().on(HiveStreamingServices.s$,1,(function(t){i._9(t.msg)})):this.logger.error("error getting active services connection"),this.J8.P8(this.tE)},a.prototype._9=function(t){var e=JSON.parse(t);this.J8.x8&&this.logger.debug("RCV MSG FROM SRV ",e),this.channelManager.trigger(e.msgName,e.msg)},a.prototype.A9=function(t,e,i){var n=this.wrap(e,t,i);if(this.client&&this.client.UE()){var s=JSON.stringify(n);this.J8.x8&&this.logger.debug(" FORWARDING REQUEST : "+s);var a=new o.hl(HiveStreamingServices.s$,0,s);return this.client.UE().send(a)}return r.reject()},a.prototype.wrap=function(t,e,i){return{msgId:this.Kv++,destination:i,msg:t,msgName:e}},a.prototype.O9=function(t,e,i,r){var n={channel:{label:e.label,ice_candidates:i}};return this.A9("update_ice_candidates",n,r)},a.prototype.offer=function(t,e,i,r,o){var s={peer:{guid:t,first_seen:n.Framework.time()},channel:{label:i.label,ice_candidates:r,offer:o}};return this.A9("offer",s,i.i9)},a.prototype.s9=function(t,e,i){this.J8.x8&&this.logger.debug("Discovery service rejects offer from peer "+e+" on channel "+i);var r={a9:t,channel:i};return this.A9("answer",r,e)},a.prototype.answer=function(t,e,i,r){var n={answer:e,N9:this.J8.tE,channel:{label:t.label,ice_candidates:i}};return this.A9("answer",n,r)},a);function a(){this.Kv=1,this.client=n.Framework.resolve(n.Framework.ht.R)}e.j$=s},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(5),o=i(0),s=(a.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.sessionId),this.MD=t.MD,this.C9()},a.prototype.C9=function(){var t=this;o.Framework.setInterval((function(){t.k9()}),n.ea.$u.$o)},a.prototype.k9=function(){var t=this;this.Y5.values().filter((function(t){return o.Framework.time()-t.Vp.Rp>n.ea.$u.Xo})).forEach((function(e){t.MD.abort(e.zp),t.XL(e.jp(),e.Pp())}))},a.prototype.$L=function(t){this.D9(t.jp(),t.Pp()),this.Y5.set(t.Pp(),t)},a.prototype.XL=function(t,e){this.Y5.delete(e),this.M9(t,e)},a.prototype.ZL=function(t){this.j9(t)},a.prototype.JL=function(t){this.xL.delete(t)},a.prototype.j9=function(t){if(this.xL.set(t.jp(),t.kp()),this.P9.push(t.jp()),this.xL.length>n.ea.$u.Ko){var e=this.P9[0];this.xL.delete(e),this.P9.splice(0,1)}},a.prototype.FL=function(t){return this.xL.has(t)},a.prototype.BL=function(t){return this.xL.get(t)},a.prototype.D9=function(t,e){if(this.H9.has(t))this.H9.get(t).push(e);else{var i=[];i.push(e),this.H9.set(t,i)}},a.prototype.M9=function(t,e){if(this.H9.has(t)){var i=this.H9.get(t),r=i.indexOf(e);-1==r?this.logger.warn("I CANNOT FIND THE REQUEST ID "+e):i.splice(r,1),0==i.length&&this.H9.delete(t)}else this.logger.warn("TRIED TO REMOVE AN OBJECT THAT DOES NOT EXIST")},a.prototype.QL=function(t){var e=[];if(this.L9(t))for(var i=this.H9.get(t),r=0;r<i.length;r++)this.Y5.has(i[r])&&e.push(this.Y5.get(i[r]));return e},a.prototype.L9=function(t){return this.H9.has(t)},a.prototype.iU=function(){return 0!=this.Y5.length},a.prototype.qL=function(t){return this.H9.has(t)},a);function a(){this.xL=new r,this.P9=[],this.Y5=new r,this.H9=new r}e.$u=s},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(5),o=i(6),s=i(32),a=(u.prototype.setId=function(t){this.U9=t},u.prototype.getId=function(){return this.U9},u.prototype.eX=function(t){this.udpScore=t},u.prototype.vQ=function(){return this.udpScore},u.prototype.hX=function(t){this.F9=t},u.prototype.i1=function(){return this.F9},u.prototype.setContextId=function(t){var e=s.Av.tO(t+"_"+n.ea.Vu.eo).toString(s.Av.Dm.Mm);this.contextId=e},u.prototype.getContextId=function(){return this.contextId},u.prototype.tQ=function(t){this.G9=t},u.prototype.AM=function(){return this.G9},u.prototype.EQ=function(t){this.x9=t},u.prototype.GM=function(){return this.x9},u.prototype.SW=function(t){this.B9=t},u.prototype.xM=function(){return this.B9},u.prototype.OW=function(t){this.V9=t},u.prototype.BM=function(){return this.V9},u.prototype.u1=function(t){this.q9=t},u.prototype.PM=function(){return this.q9},u.prototype.a1=function(t){this.Q9=t},u.prototype.HM=function(){return this.Q9},u.prototype.Zq=function(t){this.W9=t},u.prototype.KM=function(){return this.W9},u.prototype.Y9=function(t){this.K9=t},u.prototype.VM=function(){return this.K9},u.prototype.qX=function(t){this.watchingBitrate=t},u.prototype.VX=function(){return this.watchingBitrate},u.prototype.sQ=function(t){this.rQ=t},u.prototype.WM=function(){return this.rQ},u.prototype.Sx=function(t){this.privateIp=t},u.prototype.getPrivateIp=function(){return this.privateIp},u.prototype.bx=function(t){this.publicIp=t},u.prototype.getPublicIp=function(){return this.publicIp},u.prototype.setReportingGuid=function(t){this.reportingGuid=t},u.prototype.getReportingGuid=function(){return this.reportingGuid},u.prototype.setDelta=function(t){this.delta=t},u.prototype.getDelta=function(){return this.delta},u.prototype.tM=function(t,e){this.X9.set(t,e)},u.prototype.JD=function(t){this.X9.delete(t)},u.prototype.TW=function(){return this.X9},u.prototype.eG=function(){return this.VM()?this.X9.keys():[]},u.prototype.hG=function(){return this.VM()?[]:this.X9.keys()},u.prototype.sX=function(t){this.ticket=t},u.prototype.YM=function(){return this.ticket},u.prototype.J$=function(t){this._X=t},u.prototype.R6=function(){return this._X},u.prototype.M0=function(){return this.srcThroughput},u);function u(){this.udpScore=0,this.F9=0,this.watchingBitrate=-1,this.G9=!1,this.K9=!1,this.x9=!1,this.B9=!1,this.V9=!1,this.X9=new r,this.srcThroughput=new o.ga}e.$$=a},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(10),a=i(182),u=i(2),h=i(1),c=i(5),l=(n(p,o=a.J9),p.prototype.e8=function(t,e){var i=[],r=[],n=[],a=[];try{var l=this.PD.PM(),p=this.PD.HM();return t.forEach((function(t){t.LM.peerInfo.type==s.mf.k&&i.push(t);var e=t.LM.peerInfo.internalAs;if(0!=l&&l===e&&r.push(t),c.ea.Ju.du){var o=t.LM.peerInfo.externalAs;0!=p&&p===o&&n.push(t)}t.LM.peerInfo.type==s.mf.Of&&a.push(t)})),0<i.length?o.prototype.e8.call(this,i,e):0<r.length?o.prototype.e8.call(this,r,e):0<n.length?o.prototype.e8.call(this,n,e):o.prototype.e8.call(this,a,e)}catch(t){return h.ErrorMonitor.lt().logError("Error choosing partner for p2p",this.loggerId,u.ns.rs,t),null}},p);function p(){return null!==o&&o.apply(this,arguments)||this}e.q$=l},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(0),n=i(5),o=i(1),s=i(2),a=(u.prototype.t8=function(t){this.PD=t},u.prototype.e8=function(t,e){var i=this.z9(t);return i?i[0]:null},u.prototype.Z9=function(t,e){return n.ea.Ju.cu*(t.QM()/e)+n.ea.Ju.lu*(1-t.y6())},u.prototype.z9=function(t){var e=this;try{var i=.1;i+=t.map((function(t){return t.QM()})).reduce((function(t,e){return t+e}));var r=t.sort((function(t,r){return e.Z9(r,i)-e.Z9(t,i)})),n=[];return r.forEach((function(t){n.push(t.guid+":"+e.Z9(t,i))})),this.logger.debug("SC ["+n.join(", ")+"]"),r}catch(t){return o.ErrorMonitor.lt().logError("Error sorting the partners",this.loggerId,s.zr.Zr,t),null}},u);function u(){this.loggerId="[PickerTRSingle] ",this.logger=r.Framework.resolve(r.Framework.ht.m).log()}e.J9=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(49),n=i(4),o=i(59),s=i(6),a=i(5),u=i(0),h=i(48),c=i(92),l=i(7).ut.$a,p=(f.prototype.init=function(t){this.logger=u.Framework.resolve(u.Framework.ht.m).log(t.sessionId),this.PD=t.PD,this.Z$=t.Z$,this.Tq=t.Tq,this.eU=t.eU},f.prototype.GD=function(t){this.xD=t},f.prototype.v1=function(){this.t7=!0,this.wX()},f.prototype.iQ=function(){if(a.ea.Ku.Po)this.i7();else{var t=!this.PD.GM()||this.PD.AM()||!l;this.logger.debug("REQUEST REMOTE ELECTION "+t),t?this.i7():this.n7()}},f.prototype.i7=function(){var t=this.PD.PM(),e=t&&0!=t?c.gq.ID:c.gq.AS;this.Z$.h1(e)},f.prototype.n7=function(){this.Z$.h1(c.gq.bq)},f.prototype.wX=function(){var t=this;this.fX(),this.r7=u.Framework.setInterval((function(){t.iQ()}),a.ea.Ku.Lo),this.eU.FD(),this.iQ()},f.prototype.fX=function(){this.r7&&u.Framework.clearInterval(this.r7)},f.prototype.cX=function(){this.eU.yM(),this.xD.oL()},f.prototype.nQ=function(t){var e=new n;if(t){this.s7().forEach((function(t){e.set(t,r.SD.RD)}));var i=!1,o=r.SD.RD;this.PD.VM()&&(o=r.SD.ID,i=!0),this.eU.QD(e,o,i)}else this.eU.QD(e,r.SD.Rf,!1)},f.prototype.f1=function(t,e){var i=this,u=this.e7(e),h=this.eU.qD().isLive();if(t&&0<t.length){var c=new o;c.hiveAddEach(t);var l=a.ea.Ku.No||c.some((function(t){var e=s.La._a(hive.services.protocol.oU.uU,t.key.rankType);return i.logger.info("GOT RANKING "+e+",CRV "+t.cumulatedRankValue+",RV "+t.ranking+",GS "+t.groupSize),i.h7(t)}));a.ea.Ku.Co&&(l=this.o7(l));var p=null!=u&&0!=u.length;if(this.logger.debug("Tracker reports ["+u.keys().join(", ")+"]  bitrates"),this.logger.debug("ISLive "+h+" DoElect "+l),a.ea.Ku.Ao&&h){var f=this.s7();if(p&&l){this.PD.Y9(!0),this.logger.info("BECOMING SITE LEADER");var d=new n;f.forEach((function(t){d.set(t,r.SD.RD)})),u.forEach((function(t,e){i.Tq.gW.has(t)||d.set(e,r.SD.ID)})),this.eU.QD(d,r.SD.ID,!1)}else{this.PD.Y9(!1);var g=r.SD.Rf,v=new n;this.PD.GM()&&this.PD.AM()&&(g=r.SD.RD,f.forEach((function(t){v.set(t,r.SD.RD)}))),this.eU.QD(v,g,!1)}}}else if(h){a.ea.Ku.No?this.PD.Y9(!0):this.PD.Y9(!1);var y=new n;g=r.SD.Rf,this.PD.GM()&&this.PD.AM()&&(this.s7().forEach((function(t){y.set(t,r.SD.RD)})),g=r.SD.RD),a.ea.Ku.No&&(g=r.SD.ID),this.eU.QD(y,g,!1)}},f.prototype.o7=function(t){return t?!(this.u7=!1):this.PD.VM()?this.u7?this.u7=!1:this.u7=!0:void 0},f.prototype.HW=function(){var t=this.s7(),e=new n;t.forEach((function(t){e.set(t,r.SD.RD)}));var i=!1,o=r.SD.RD;this.PD.VM()&&(o=r.SD.ID,i=!0),this.eU.QD(e,o,i)},f.prototype.s7=function(){var t=new o;return this.Tq.gW.forEach((function(e,i){e.peerInfo.watchingBitrate&&!t.has(e.peerInfo.watchingBitrate)&&t.hiveAdd(e.peerInfo.watchingBitrate)})),t.toArray()},f.prototype.e7=function(t){var e=new n,i=this.PD.PM();return t.forEach((function(t){null!=t.watchingBitrate&&(0<i?i===t.internalAs&&e.set(t.watchingBitrate,t.guid):e.set(t.watchingBitrate,t.guid))})),e},f.prototype.h7=function(t){if(t.groupSize<2)return!1;var e=Math.max(a.ea.Ku.Mo,Math.round(t.groupSize*a.ea.Ku.Do));return l||u.Framework.U()&&h.TD.bD?t.ranking<e&&(this.PD.AM()||!this.PD.GM()):t.ranking<e},f.prototype.wM=function(t,e,i,n){var o=1,s=this.xD.CM(i,e),h=a.ea.Ku.Fo*u.Framework.random();if(t==r.SD.RD){var c=this.xD.SL()-h;o=Math.max(1,s-c)}else if(t==r.SD.ID){var l=a.ea.Ku.Go-h;o=Math.max(1,s-l)+n}return Math.round(o)},f);function f(){this.t7=!1,this.u7=!1}e.Q$=p},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(0),n=i(4),o=i(17),s=i(1),a=i(2);i(60);var u=i(19),h=(c.prototype.G0=function(t,e){try{return this.logger.debug("TRACKER CLIENT REGISTERED "+t),this.a7.has(t)||this.a7.set(t,e),this.a7.get(t)}catch(t){s.ErrorMonitor.lt().logError("Error adding new tracker client",this.loggerId,a.Wr.Yr,t)}},c.prototype.wv=function(t){this.a7.delete(t)},c.prototype.gv=function(t){return this.a7.get(t)},c.prototype.e1=function(t){var e=this;if(this.client&&this.client.UE()){try{var i=this.f7.sl(t,"TRACKER_REQ",0)}catch(t){s.ErrorMonitor.lt().logError("Error serializing the new request",this.loggerId,a.Wr.Kr,t)}if(i){var r=new o.hl(HiveStreamingServices.n$,1,i),n=this.client.UE().send(r);n.then((function(){return e.logger.info("TRACKER REQUEST SENT")})),n.fail((function(t){s.ErrorMonitor.lt().logError("Error sending tracker request",e.loggerId,a.Wr.qr)}))}}else s.ErrorMonitor.lt().logError("Error sending tracker request because of connection",this.loggerId,a.Wr.Xr)},c.prototype.c7=function(t){t.infos.map((function(t){t.guid=atob(t.guid),t.publicIp=new InetAddress,t.publicIp.address=t.publicIpString,t.privateIp=new InetAddress,t.privateIp.address=t.privateIpString})),t.peerInfo.guid=atob(t.peerInfo.guid),t.peerInfo.publicIp=new InetAddress,t.peerInfo.publicIp.address=t.peerInfo.publicIpString,t.peerInfo.privateIp=new InetAddress,t.peerInfo.privateIp.address=t.peerInfo.privateIpString},c.prototype.init=function(){var t=this;this.logger.debug("TRACKER MANAGER INIT"),this.client&&this.client.UE()?this.client.UE().on(HiveStreamingServices.n$,10,(function(e){try{var i=null;try{i=t.f7.Xl(e.msg,"TRACKER_RESP",1,hive.services.protocol.oU.TrackerResponse),t.c7(i)}catch(e){s.ErrorMonitor.lt().logError("Error deserializing the tracker response",t.loggerId,a.Wr.$r,e)}t.l7&&t.logger.debug("RESP "+JSON.stringify(i)),i&&t.a7.has(i.sessionId)?t.a7.get(i.sessionId).rJ(i):t.logger.warn("SESSION ID NOT VALID OR NULL "+i.sessionId)}catch(e){s.ErrorMonitor.lt().logError("Error initializing the tracker manager",t.loggerId,a.Wr.Jr,e)}})):r.Framework.U()||this.logger.warn(this.loggerId+" CANNOT GET ACTIVE CONNECTION")},c);function c(){this.l7=!1,this.loggerId="[TRACKER] ",this.a7=new n,this.f7=new u.rv,this.logger=r.Framework.resolve(r.Framework.ht.m).log(),r.Framework.U()||(this.client=r.Framework.resolve(r.Framework.ht.R))}e.k$=h},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(27),n=(o.prototype.init=function(t,e){this.peer=t,this.yd=e},o.prototype.v7=function(t){t.uuid=this.yd.pl.tE;var e=this.yd.pl.tG.GF,i=this.d7(e.p2pSubRespQt),r=this.d7(e.srcRespQt);t.cdnRequests+=this.d7(e.srcReqN),t.cdnResponses+=this.d7(e.srcRespN),t.cdnResponseErrors+=this.d7(e.srcRespErrN),t.cdnResponseBytes+=this.d7(e.srcRespQt),t.p2pRequests+=this.d7(e.p2pSubReqN),t.p2pResponses+=this.d7(e.p2pSubRespN),t.p2pResponseErrors+=this.d7(e.p2pSubRespErrN),t.p2pResponseBytes+=this.d7(e.p2pSubRespQt),t.savings=this.d7(i/(r+i)*100)},o.prototype.d7=function(t){return t||0},o.prototype.E7=function(t){var e=this;t.uuid=this.yd.pl.tE;var i=this.yd.pl.tG.BF,n=this.yd.pl.tG.VF;i.forEach((function(i,o){t.partners[o]||(t.partners[o]=new r.rw);var s=t.partners[o];s.uuid=o;var a=e.d7(i.p2pSuccSent);s.sentBytes+=a,t.p2pPartnerTotalSentBytes+=a;var u=e.d7(i.p2pSuccReceived);s.receivedBytes+=u,s.successTransfers+=e.d7(i.p2pSuccReq),s.failedTransfers+=e.d7(i.p2pFailReq),n.has(o)&&(s.rateReceived=n.get(o).rateReceived),s.nw=Date.now()}))},o.prototype.render=function(){var t=this.yd.renderStatsCallback;if(t){var e=new r.iw;this.v7(e),this.E7(e);try{t(e)}catch(t){console.warn("error in rendering local stats",t)}}},o);function o(){}e.I$=n},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(36),n=i(4),o=i(0),s=i(5),a=i(1),u=i(2),h=(c.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.sessionId)},c.prototype.sJ=function(t){try{var e=t.jp(),i=t.Xp,n=t.Vp.bp,h=Math.ceil(n/s.ea.Ju.au),c=t.Mp.bitrate,l=0,p=Math.min(s.ea.Ju.au,n);this.p7(e,c);for(var f=p-l;0<h;){var d=null;try{o.Framework.U()||(d=r.wrap(i.slice(l,p))),l+=f}catch(t){a.ErrorMonitor.lt().logError("Error wrapping chunk",this.loggerId,u.Pn.Ln,t)}this.w7.get(e).push(d),h--,f=(p=Math.min(l+s.ea.Ju.au,n))-l}}catch(t){a.ErrorMonitor.lt().logError("Error adding fragment to the fragmentMap",this.loggerId,u.Pn.Hn,t)}},c.prototype.p7=function(t,e){try{if(this.g7.has(e)&&this.g7.get(e).length>s.ea.Cache.tu){var i=this.g7.get(e)[0];this.w7.delete(i),this.g7.get(e).shift()}if(this.g7.has(e))this.g7.get(e).push(t),this.w7.set(t,[]);else{var r=[t];this.g7.set(e,r),this.w7.set(t,[])}}catch(t){a.ErrorMonitor.lt().logError("Error generating the chunk handler hashmaps",this.loggerId,u.Pn.Un,t)}},c.prototype.Z6=function(t,e){return this.w7.has(t)?this.w7.get(t)[e]:null},c.prototype.b7=function(t){return this.g7.get(t)},c.prototype.dX=function(){this.w7=new n,this.g7=new n},c);function c(){this.loggerId="[ChunkHandler] ",this.w7=new n,this.g7=new n}e.P$=h},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(5),o=i(0),s=i(2),a=i(1),u=(h.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.ht.m).log(t.sessionId),this.HD=t.HD,this.y7=new r,this.T7=new r,this.m7&&this.O7()},h.prototype.JQ=function(t,e,i){try{if(!this.m7)return!1;if(this.y7.has(t)||!e||!i)return!1;var r=this.S7(e,i);return!!(r&&this.T7.has(r)&&this.T7.get(r).length>=n.ea.qu.Eo)&&(a.ErrorMonitor.lt().logError("Error peer violates ip spoofing rules",this.loggerId,s.js.Hs,{privateIp:e,publicIp:i,otherGuid:t}),this.logger.debug(this.loggerId+"Spoofing rule violated for "+t+" with privateIp "+e+" publicIp "+i),!0)}catch(e){return a.ErrorMonitor.lt().logError("Error checking if peer violates ip spoofing rules",this.loggerId,s.js.Ps,{detailedError:e,otherGuid:t}),!1}},h.prototype.nW=function(t,e,i){try{if(this.m7&&i&&e){var r=this.S7(e,i),n=this.y7.get(t);n&&n!=r&&this.R7(t,n),this.I7(t,r)}}catch(e){a.ErrorMonitor.lt().logError("Error adding or updating ip spoofing maps",this.loggerId,s.js.Ls,{detailedError:e,otherGuid:t})}},h.prototype._7=function(t){this.m7&&this._W(t)},h.prototype.dQ=function(t){this.m7&&this._W(t)},h.prototype.I7=function(t,e){this.y7.set(t,e);var i=[];this.T7.has(e)&&-1!=(i=this.T7.get(e)).indexOf(t)||(i.push(t),this.T7.set(e,i))},h.prototype._W=function(t){var e=this.y7.get(t);e?(this.R7(t,e),this.y7.delete(t)):this.logger.warn(this.loggerId+"no ip pair for guid "+t)},h.prototype.R7=function(t,e){var i=this.T7.get(e),r=i.indexOf(t);-1!=r?(i.splice(r,1),0==i.length?this.T7.delete(e):this.T7.set(t,i)):this.logger.warn(this.loggerId+"pair list "+e+" does not contain guid "+t)},h.prototype.S7=function(t,e){return e+":"+t},h.prototype.O7=function(){var t=this;o.Framework.setInterval((function(){try{var e=[];t.T7.forEach((function(i,r){if(i.length>n.ea.qu.Eo){for(var o=[],s=n.ea.qu.Eo;s<i.length;s++)o.push(i[s]);t.logger.warn("IpSpoofing violation for "+r+" - closing: "+o),e.concat(o)}})),e.forEach((function(e){t.HD.uW(e)}))}catch(e){a.ErrorMonitor.lt().logError("Error checking periodic ip spoofing tables",t.loggerId,s.js.Us,e)}}),n.ea.qu.po)},h);function h(){this.loggerId="[IPSpoofing] ",this.m7=n.ea.qu.vo}e.qu=u},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(97),a=i(5),u=i(63),h=i(0),c=i(2),l=i(1),p=(n(f,o=s.ZW),f.prototype.XW=function(t,e){try{return e.sort(u.AU.RU),e.slice(0,t)}catch(t){return l.ErrorMonitor.lt().logError("Error selecting partners to remove",this.A7,c.In.On,t),[]}},f.prototype.JW=function(t,e,i,r){try{return r.filter((function(t){return e.every((function(e){return e.guid!=t.peerInfo.guid}))&&-1==i.indexOf(t.peerInfo.guid)})).slice(0,t)}catch(t){return l.ErrorMonitor.lt().logError("Error selecting partners to add",this.A7,c.In.Sn,t),[]}},f);function f(){var t=o.call(this)||this;return t.A7="[Score Partner Selection] ",t.type="Score",t}e.N7=p;var d=(g.prototype.dW=function(t){try{var e=t.filter((function(t){return!t.oW.Kl.Tv()})),i=h.Framework.time(),r=e.filter((function(t){return i-t.$W>a.ea.Vu.co}));return 0<r.length?(r.sort(u.CU.RU),r.slice(0,1)[0]):null}catch(t){return l.ErrorMonitor.lt().logError("Error updating partners out",this.A7,c.In.Rn,t),null}},g);function g(){this.A7="[Score Partner Selection] "}e.U$=d},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(4),n=i(98),o=i(5),s=i(0),a=i(6),u=i(63),h=i(2),c=i(1),l=(p.prototype.init=function(t){this.PD=t.PD},p.prototype.YQ=function(t,e,i,r){try{var a=[],u=[],l=Math.round(t*(1-o.ea.Bu.ro)),p=Math.max(e.length-l,0),f=t-e.length+p;if(0<p){var d=e.filter((function(t){return!t.oW.Kl.Tv()})),g=s.Framework.time(),v=d.filter((function(t){return g-t.$W>o.ea.Vu.co})),y=Math.min(v.length,p);(u=this.XW(y,v)).length>y&&(f+=u.length-y);var m=[],E=[];u.forEach((function(t){m.push(t.guid),E.push(t._U.IU(!1))}))}return 0<f&&(a=this.JW(f,e,i,r)),new n.zW(a,u)}catch(t){return c.ErrorMonitor.lt().logError("Error updating in partners",this.C7,h._n.Tn,t),new n.zW([],[])}},p.prototype.XW=function(t,e){var i=this;try{e.sort(u.AU.RU);var r=e.slice(0,t);return e.slice(t,e.length).forEach((function(t){i.k7(t.LM)&&r.push(t)})),r}catch(t){return c.ErrorMonitor.lt().logError("Error selecting partners to remove",this.C7,h._n.On,t),[]}},p.prototype.JW=function(t,e,i,r){var n=this;try{var s=[],a=[],u=[],l=[],p=[],f=[];e.forEach((function(t){f.push(t.guid)}));var d=Math.floor(t*o.ea.Vu.uo),g=this.PD.TW();r.forEach((function(t){var e=t.peerInfo.streams;if(e){var i=n.isLeader(t,e,g);i.Iq?i.D7?s.push(t):a.push(t):n.M7(t,o.ea.Vu.oo)?n.k7(t)?p.push(t):l.push(t):u.push(t)}else p.push(t)}));var v=this.j7(s,a,u,l,p,t,t,d);return v.slice(0,Math.min(v.length,t))}catch(t){return c.ErrorMonitor.lt().logError("Error selecting partners to add",this.C7,h._n.Sn,t),[]}},p.prototype.j7=function(t,e,i,r,n,u,l,p){try{var f=[],d=[];0<t.length&&s.Framework.random()<o.ea.Vu.ao&&(d=(t=a.La.Sa(t)).slice(0,Math.min(t.length,p)),f.push.apply(f,d),l=u-d.length);var g=[];0<e.length&&(g=(e=a.La.Sa(e)).slice(0,Math.min(e.length,p)),f.push.apply(f,g),l=u-g.length);var v=[];0<i.length&&(v=(i=a.La.Sa(i)).slice(0,Math.min(i.length,p)),f.push.apply(f,v),l=u-v.length);var y=null;0<r.length&&(y=(r=a.La.Sa(r)).slice(0,Math.min(r.length,l)),l=u-((0<v.length?v.length:0)-y.length));var m=[];return 0<l&&0<n.length&&(m=(n=a.La.Sa(n)).slice(0,Math.min(n.length,l)),f.push.apply(f,m)),f}catch(t){return c.ErrorMonitor.lt().logError("Error grouping partners",this.C7,h._n.An,t),[]}},p.prototype.isLeader=function(t,e,i){try{var n=!1,o=this.PD.PM(),s=this.PD.HM(),a=new r;e.forEach((function(t){a.set(t.bitrate,t)}));var u=new r;return a.forEach((function(t,e){i.has(e)&&u.set(e,t)})),0<u.keys().length&&u.forEach((function(e,r){var a=i.get(r);if(a&&2<=e.state&&1<=a.type){var u=t.peerInfo.internalAs,h=t.peerInfo.externalAs;n=0<o?o===u:0<s&&s===h}})),{Iq:!1,D7:n}}catch(e){return c.ErrorMonitor.lt().logError("Error identifying if member is leader or same site",this.C7,h._n.Nn,{detailedError:e,otherGuid:t.peerInfo.guid}),{Iq:!1,D7:!1}}},p.prototype.M7=function(t,e){try{var i=this.PD.getDelta(),r=this.PD.VX(),n=this.P7(t,r);return(0!=i||0!=n)&&i<n&&n+e<i}catch(e){return c.ErrorMonitor.lt().logError("Error identifying if member is ahead or behind delta",this.C7,h._n.Cn,{detailedError:e,otherGuid:t.peerInfo.guid}),!1}},p.prototype.k7=function(t){try{var e=this.PD.getDelta(),i=this.PD.VX(),r=this.P7(t,i);return 0==e&&0==r||r<e}catch(e){return c.ErrorMonitor.lt().logError("Error identifying if member is behind or not retrieveing the same bitrate",this.C7,h._n.kn,{detailedError:e,otherGuid:t.peerInfo.guid}),!1}},p.prototype.P7=function(t,e){try{var i=t.peerInfo.streams,r=0;return i&&i.forEach((function(t){t.bitrate==e&&(r=t.delta)})),r}catch(i){return c.ErrorMonitor.lt().logError("Error retrieving delta for member's bitrate",this.C7,h._n.Dn,{detailedError:i,otherGuid:t.peerInfo.guid}),0}},p);function p(){this.C7="[Delta Partner Selection] "}e.F$=l;var f=(d.prototype.dW=function(t,e,i){var n=this;try{this.PD=t;var a=this.PD.TW(),u=e.streams;if(u){var l=i.filter((function(t){return!t.oW.Kl.Tv()})),p=s.Framework.time(),f=l.filter((function(t){return p-t.$W>o.ea.Vu.co}));if(0==u.filter((function(t){return a.has(t.bitrate)})).length)return null;var d=this.H7(f),g=this.L7(a,d);if(g)return g;var v=a.keys().length,y=f.length,m=Math.round(y/v),E=d.keys().filter((function(t){return a.has(t)})),w=new r;E.forEach((function(t){w.set(t,d.get(t))}));var b=this.U7(w,m);return null!=b?b:(u.forEach((function(t){var e=w.get(t.bitrate);if(null!=e){var i=n.F7(e);if(0<i.length&&!o.ea.Vu.fo)return i[0]}})),null)}return null}catch(t){return c.ErrorMonitor.lt().logError("Error selecting partner to update out",this.loggerId,h.Mn.jn,t),null}},d.prototype.H7=function(t){var e=new r;return t.forEach((function(t){var i=t.LM.peerInfo.watchingBitrate;if(i=i||-1,e.has(i)){var r=e.get(i);r.push(t),e.set(i,r)}else e.set(i,[t])})),e},d.prototype.F7=function(t){return t.filter((function(t){if(0==t.NU.C8(o.ea.Xu.ou))return t}))},d.prototype.U7=function(t,e){var i=[];t.forEach((function(t,e){i.push({bitrate:e,G7:t.length})})),i.sort((function(t,e){return t.G7>e.G7?1:t.G7<e.G7?0:-1}));var r=null;return i.forEach((function(i){var n=t.get(i.bitrate).length;if(e<n){var o=t.get(i.bitrate);0<o.length&&(o.sort(u.CU.RU),r=o[0])}})),r},d.prototype.L7=function(t,e){var i=this,r=null;return e.has(-1)?r=e.get(-1)[0]:e.filter((function(e,i){return!t.has(i)})).forEach((function(t,e){var n=i.F7(t);0<n.length&&(r=n[0])})),r},d);function d(){this.loggerId="[Throughput Partner Selection] ",this.logger=s.Framework.resolve(s.Framework.ht.m).log()}e.G$=f},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(0),n=i(9),o=i(35),s=i(26),a=i(10),u=i(14),h=i(5),c=(l.prototype.init=function(t){this.logger=r.Framework.resolve(r.Framework.ht.m).log(t.sessionId),this.loggerId="S["+t.sessionId+"]",this.pl=t.yd.pl,this.PD=t.PD,this.yX()},l.prototype.R1=function(t){this.pl.vH.metrics.memN=t,this.pl.tG.metrics.memN=t},l.prototype.tW=function(t,e){this.pl.vH.metrics.lookupTotal++,this.pl.tG.metrics.lookupTotal++,t?(this.pl.vH.metrics.lookupNotFound++,this.pl.tG.metrics.lookupNotFound++,this.pl.vH.metrics.lookupFailed++,this.pl.tG.metrics.lookupFailed++):e?(this.pl.vH.metrics.lookupFailed++,this.pl.tG.metrics.lookupFailed++):(this.pl.vH.metrics.lookupReqEstablished++,this.pl.tG.metrics.lookupReqEstablished++)},l.prototype.yW=function(){this.pl.vH.metrics.lookupReqAccept++,this.pl.tG.metrics.lookupReqAccept++},l.prototype.o6=function(t,e,i,r,n){if(this.x7||r){var o=n==s.fp.pp,a=this.pl.CG(t),u=this.pl.NG(t);a.p2pSuccReq++,a.p2pSuccReceived+=e,u.p2pSuccReq++,u.p2pSuccReceived+=e,o&&(a.p2pSuccReceivedLow+=e,u.p2pSuccReceivedLow+=e),0<i&&!o&&(a.p2pSuccReceivedLow+=e,u.p2pSuccReceivedLow+=e)}},l.prototype.f6=function(t,e,i,r,n,o){if(this.x7||n){var a=o==s.fp.pp,u=this.pl.CG(t),h=this.pl.NG(t);u.p2pFailReq++,u.p2pSuccReceived+=e,u.p2pFailReceived+=r-e,h.p2pSuccReq++,h.p2pSuccReceived+=e,h.p2pFailReceived+=r-e,a&&(u.p2pSuccReceivedLow+=e,h.p2pSuccReceivedLow+=e),0<i&&!a&&(u.p2pSuccReceivedLow+=e,h.p2pSuccReceivedLow+=e)}},l.prototype.c6=function(t,e,i){if(this.x7||i){var r=this.pl.CG(t),n=this.pl.NG(t);r.p2pFailReq++,r.p2pFailReceived+=e,n.p2pFailReq++,n.p2pFailReceived+=e}},l.prototype.v6=function(t,e,i){if(this.x7||i){var r=this.pl.CG(e),n=this.pl.NG(e);r.p2pSuccResp++,r.p2pSuccSent+=t,n.p2pSuccResp++,n.p2pSuccSent+=t}},l.prototype.w6=function(t,e,i,r){if(this.x7||r){var n=this.pl.CG(i),o=this.pl.NG(i);n.p2pPartResp++,n.p2pSuccSent+=t,n.p2pFailSent+=e-t,o.p2pPartResp++,o.p2pSuccSent+=t,o.p2pFailSent+=e-t}},l.prototype.E6=function(t,e,i){if(this.x7||i){var r=this.pl.CG(e),n=this.pl.NG(e);r.p2pFailResp++,r.p2pFailSent+=t,n.p2pFailResp++,n.p2pFailSent+=t}},l.prototype.PL=function(t){t?this.pl.vH.metrics.bitrateUpN++:this.pl.vH.metrics.bitrateDwnN++},l.prototype.UX=function(t){if(-1==[n.wf.yf,n.wf.Tf].indexOf(t.Dp())){var e=t.Dp()!=n.wf.gf;if((this.x7||e)&&(this.pl.RG().reqN++,this.pl.wH().reqN++,t.Dp()==n.wf.bf)){var i=t;if(i.bitrate){var r=i.bitrate;this.pl.IG(r).reqN++,this.pl.EH(r).reqN++}}}else this.pl.RG().reqOtherN++,this.pl.wH().reqOtherN++},l.prototype.cJ=function(t){var e=t.Dp()!=n.wf.gf;if(this.x7||e){var i,r=this.pl.RG(),o=this.pl.wH(),a=null,u=null;-1==[n.wf.yf,n.wf.Tf].indexOf(t.Dp())&&(r.srcReqN++,o.srcReqN++,!e||(i=this.B7(t))&&(a=this.pl.IG(i),u=this.pl.EH(i),a.srcReqN++,u.srcReqN++),t.kp()==s.fp.vp&&(r.srcOtherReqN++,o.srcOtherReqN++,!e||(i=this.B7(t))&&(a.srcOtherReqN++,u.srcOtherReqN++)))}},l.prototype.h8=function(t){if(this.pl.RG().p2pSubReqN++,this.pl.wH().p2pSubReqN++,t.Dp()==n.wf.bf){var e=this.B7(t);e&&(this.pl.IG(e).p2pSubReqN++,this.pl.EH(e).p2pSubReqN++)}},l.prototype.V7=function(t,e){this.q7(t,this.pl.wH()),this.q7(t,this.pl.RG());var i=this.B7(t);i&&t.Dp()===n.wf.bf&&this.PD.VX()==i&&(this.q7(t,this.pl.IG(i)),this.q7(t,this.pl.EH(i))),isNaN(e)||(this.pl.vH.metrics.srcThroughput=e)},l.prototype.pJ=function(t,e){var i=t.Dp()!=n.wf.gf;(this.x7||i)&&(-1!=[n.wf.yf,n.wf.Tf].indexOf(t.Dp())?(this.pl.RG().respFallbackOtherN++,this.pl.wH().respFallbackOtherN++):this.V7(t,e))},l.prototype.vJ=function(t,e){if(-1!=[n.wf.yf,n.wf.Tf].indexOf(t.Dp()))this.pl.RG().respFallbackOthertErrN++,this.pl.wH().respFallbackOthertErrN++;else{var i=t.Dp()!=n.wf.gf;if(this.x7||i)if(this.jL(t.type))this.pl.wH().respFallbackErrN++,this.pl.RG().respFallbackErrN++,!i||(r=this.B7(t))&&(this.pl.IG(r).respFallbackErrN++,this.pl.EH(r).respFallbackErrN++),0==t.Vp.Op&&(this.pl.wH().srcRespErrN++,this.pl.RG().srcRespErrN++,!i||(r=this.B7(t))&&t.Dp()===n.wf.bf&&(this.pl.IG(r).srcRespErrN++,this.pl.EH(r).srcRespErrN++)),this.V7(t,e);else if(t.type==s.fp.vp&&-1!=h.ea.Yu.Io.indexOf(t.zp.status))this.pl.RG().fallAgentFailedRespN++,this.pl.wH().fallAgentFailedRespN++,this.pl.RG().reqN--,this.pl.wH().reqN--;else{var r;0==t.Vp.Op&&(this.pl.RG().srcOtherRespErrN++,this.pl.wH().srcOtherRespErrN++),i||(r=this.B7(t))&&t.Dp()===n.wf.bf&&(this.pl.IG(r).srcOtherRespErrN++,this.pl.EH(r).srcOtherRespErrN++),this.V7(t,e)}}},l.prototype.$X=function(t,e){if(e.pq==s.fp.pp)this.pl.wH().respP2pN++,this.pl.RG().respP2pN++;else if(e.pq==s.fp.vp)this.pl.wH().respFallbackN++,this.pl.RG().respFallbackN++;else if(e.pq==s.fp.cp){this.pl.wH().lCacheRespN++,this.pl.RG().lCacheRespN++;var i=r.Framework.U()?e.length:t.Xp.byteLength;this.pl.wH().lCacheRespQt+=i,this.pl.RG().lCacheRespQt+=i}},l.prototype.hJ=function(t,e){var i=t.Dp()!=n.wf.gf;(this.x7||i)&&this.V7(t,e);var r=new hive.snapshots.PartnerMetrics;r.rateReceived=t.lB.QM(),this.pl.tG.VF.set(t.lB.reportingGuid,r)},l.prototype.tJ=function(t){if(0!=t.Jp&&(this.pl.RG().p2pSubRespErrN++,this.pl.wH().p2pSubRespErrN++,t.Dp()==n.wf.bf)){var e=this.B7(t);e&&(this.pl.IG(e).p2pSubRespErrN++,this.pl.EH(e).p2pSubRespErrN++)}},l.prototype.a8=function(t){if(this.pl.RG().p2pSubRespExpN++,this.pl.wH().p2pSubRespExpN++,t.Dp()==n.wf.bf){var e=this.B7(t);e&&(this.pl.IG(e).p2pSubRespExpN++,this.pl.EH(e).p2pSubRespExpN++)}},l.prototype.q7=function(t,e){var i=t.Vp.bp,r=t.Vp.Op,o=t.Vp.yp,s=t.Vp.Tp,u=t.Vp.mp;if(t.Dp()!=n.wf.yf){if(t.Vp.wp&&s&&s<i){var h=s/i;e.p2pSubRespPartN+=h,this.jL(t.type)||(e.p2pAgenTrafficFailureQt+=i-o)}if(0!=u&&(u==i&&e.lCacheRespN++,e.lCacheRespQt+=t.Vp.mp),0!=o)if(o==i&&(this.jL(t.type)&&e.respP2pN++,e.p2pSubRespN++),e.p2pSubReqQt+=i,e.p2pSubRespQt+=o,e.p2pAgenTrafficSuccessQt+=t.Vp.p2pAgenTrafficSuccessQt,e.p2pDirectQt+=o,t.lB.LM.peerInfo.type==a.mf.k)e.p2pUdpbQt+=o,e.p2pNatQt+=o;else{var c=this.PD.PM();c&&0<c&&(null!=t.uq?c===t.uq.internalAs&&(e.p2pNatQt+=o):this.logger.warn("Missing partner info"))}}if(0!=r){if(this.Q7(t.type)&&(e.srcOtherReqQt+=t.Vp.Op),r==i)this.Q7(t.type)?(e.srcOtherRespN++,e.srcOtherRespQt+=t.Vp.Op,e.srcOtherOverQt+=t.Vp.Op,e.fallAgentRespN++):e.respFallbackN++,e.srcRespN++;else{e.srcRespErrN++;var l=r/(o+r);e.respFallbackN=l,e.respP2pN=1-l,this.Q7(t.type)&&(e.srcOtherRespErrN++,e.srcOtherRespQt+=t.Vp.Op,e.srcOtherOverQt+=t.Vp.Op,e.fallAgenTrafficFailureQt+=t.Vp.Op)}e.srcReqQt+=t.Vp.Op,e.srcRespQt+=t.Vp.Op,e.srcOverQt+=t.Vp.Op,this.Q7(t.type)&&(e.fallAgenTrafficSuccessQt+=t.Vp.Sp)}},l.prototype.B7=function(t){var e=null;if(t.Mp instanceof o.wA){var i=t.Mp;i.bitrate&&(e=i.bitrate)}return e},l.prototype.jL=function(t){return t!=s.fp.pp&&t!=s.fp.vp},l.prototype.Q7=function(t){return!this.jL(t)},l.prototype.yX=function(){this.W7()},l.prototype.pX=function(){r.Framework.clearInterval(this.Y7),this.Y7=null},l.prototype.W7=function(){var t=this;null==this.Y7&&(this.Y7=r.Framework.setInterval((function(){t.pl.yG=t.PD.HM(),t.pl.bG=t.PD.PM(),t.pl.TG=t.PD.getPublicIp()}),h.ea.ta.Du))},l);function l(){this.x7=!0===u.HiveConfig.Stats.AudioAccounting,this.Y7=null}e.R$=c},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(97),a=i(5),u=i(63),h=i(0),c=i(2),l=i(1),p=i(47),f=(n(d,o=s.ZW),d.prototype.init=function(t){o.prototype.init.call(this,t),this.OX=t.OX},d.prototype.XW=function(t,e){try{return e.sort(u.AU.RU),e.slice(0,t)}catch(t){return l.ErrorMonitor.lt().logError("Error selecting partners to remove",this.A7,c.In.On,t),[]}},d.prototype.JW=function(t,e,i,r){try{var n=r.filter((function(t){return e.every((function(e){return e.guid!=t.peerInfo.guid}))&&-1==i.indexOf(t.peerInfo.guid)}));if(0<n.length){this.OX.K7(),this.OX.X7(!0);var o=[],s=0;for(n.forEach((function(t){s+=t.P1(),t.P1()}));0<n.length&&o.length<t;)for(var u=h.Framework.random()*s,f=0,d=0;d<n.length;d++){var g=n[d];if(f<=u&&u<=f+g.P1()){o.push(g),s-=g.P1(),n.splice(d,1);break}f+=g.P1()}return a.ea.ra.Hu&&(n.sort((function(t,e){return e.P1()-t.P1()})),p.hD.sD(null,null,"local_score",this.PD.getReportingGuid(),[[n.length],o.map((function(t){return t.P1()})),n.reduce((function(t,e){return 0<e.P1()&&t.push(e.P1()),t}),[])],6)),o}return[]}catch(t){return l.ErrorMonitor.lt().logError("Error selecting partners to add",this.A7,c.In.Sn,t),[]}},d);function d(){var t=o.call(this)||this;return t.A7="[Score Partner Selection] ",t.type="Locality",t}e.L$=f},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(5),n=(o.prototype.init=function(t){this.PD=t.PD},o.prototype.K7=function(){},o.prototype.J7=function(t,e){var i=0,r=t.split("."),n=e.split(".");if(4==r.length&&4==n.length)for(var o=0;o<r.length&&i==o;)r[o]==n[o]&&i++,o++;return i},o.prototype.z7=function(t){var e=this,i=!1;return t.peerInfo.streams.forEach((function(t){t.bitrate==e.PD.VX()&&(i=!0)})),i},o.prototype.N1=function(t){var e=this.PD.getPrivateIp()?this.PD.getPrivateIp().split(".").slice(0,2).join("."):null,i=this.PD.PM(),n=this.PD.getPublicIp(),o=this.PD.HM(),s=!1,a=0;if(0<o&&o===t.peerInfo.externalAs&&(a+=r.ea.sa.Lu,s=!0,0==i&&(a+=r.ea.sa.Uu)),n&&t.peerInfo.publicIpString){var u=this.J7(n,t.peerInfo.publicIpString);a+=u,4===u&&(s=!0)}s&&0<i&&i===t.peerInfo.internalAs&&(a+=r.ea.sa.Uu),s&&t.peerInfo.privateIpString&&t.peerInfo.privateIpString.startsWith(e)&&(a+=r.ea.sa.Fu),this.z7(t)&&(a+=r.ea.sa.Gu),a/=r.ea.sa.xu,t.H1(a)},o.prototype.X7=function(t){void 0===t&&(t=!1)},o);function o(){}e.W$=n},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3);i(194);var n=i(0),o=i(1),s=i(2),a=i(17),u=i(8),h=i(19),c=(l.prototype.init=function(t){this.logger=n.Framework.resolve(n.Framework.ht.m).log(t.sessionId),this.PD=t.PD},l.prototype.Z7=function(){var t=this;this.client&&this.client.UE()?this.ttt().then((function(e){t.logger.debug(t.loggerId+"Peer Locality Info constructed with privateip "+e.itt.privateIp);var i=null;try{i=t.f7.sl(e,"LOCALITY_INFO",0)}catch(e){o.ErrorMonitor.lt().logError("Error serializing locality info update",t.loggerId,s.Ue.we)}if(i){var r=new a.hl(HiveStreamingServices.h$,0,i),n=t.client.UE().send(r);n.then((function(){return t.logger.info("LOCALITY INFO UPDATE SENT")})),n.fail((function(e){o.ErrorMonitor.lt().logError("Error sending locality update",t.loggerId,s.Ue.qr)}))}})):o.ErrorMonitor.lt().logError("Error sending locality update because of missing connection",this.loggerId,s.Ue.Xr)},l.prototype.ttt=function(){var t=this,e=r.defer(),i=new PeerLocalityInfo;i.ntt=this.PD.getReportingGuid();var n=new CustomerInfo;n.partnerId=this.PD.YM().pE(),n.customerId=this.PD.YM().wE(),i.stt=n;var a=new NetworkInfo;return this.SE.getConnectivityInfo().then((function(e){var i=e.getNetworkChanged().getPrivateIp();t.PD.Sx(i)})).fail((function(e){o.ErrorMonitor.lt().logError("Error getting connectivity info",t.loggerId,s.Ue.Fr)})).finally((function(){""!=t.PD.getPublicIp()&&(a.publicIp=t.PD.getPublicIp()),""!=t.PD.getPrivateIp()&&(a.privateIp=t.PD.getPrivateIp()),i.itt=a,e.resolve(i)})),e.promise},l.prototype.AE=function(t){this.Z7()},l);function l(){this.loggerId="[LocalityServiceClient] ",this.SE=n.Framework.resolve(u.pf.af),this.f7=new h.rv,n.Framework.U()||(this.client=n.Framework.resolve(n.Framework.ht.R))}e.S$=c},function(t,e,i){var r=i(28);CustomerInfo=function(t){this.partnerId=null,this.customerId=null,t&&(void 0!==t.partnerId&&null!==t.partnerId&&(this.partnerId=t.partnerId),void 0!==t.customerId&&null!==t.customerId&&(this.customerId=t.customerId))},CustomerInfo.prototype={},CustomerInfo.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=e.ftype,n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.STRING?this.partnerId=t.xw().value:t.Bw(i);break;case 2:i==r.Type.STRING?this.customerId=t.xw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},CustomerInfo.prototype.write=function(t){t.Ww("CustomerInfo"),null!==this.partnerId&&void 0!==this.partnerId&&(t.Yw("partnerId",r.Type.STRING,1),t.Kw(this.partnerId),t.$w()),null!==this.customerId&&void 0!==this.customerId&&(t.Yw("customerId",r.Type.STRING,2),t.Kw(this.customerId),t.$w()),t.Jw(),t.zw()},NetworkInfo=function(t){this.privateIp=null,this.publicIp=null,t&&(void 0!==t.privateIp&&null!==t.privateIp&&(this.privateIp=t.privateIp),void 0!==t.publicIp&&null!==t.publicIp&&(this.publicIp=t.publicIp))},NetworkInfo.prototype={},NetworkInfo.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=e.ftype,n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.STRING?this.privateIp=t.xw().value:t.Bw(i);break;case 2:i==r.Type.STRING?this.publicIp=t.xw().value:t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},NetworkInfo.prototype.write=function(t){t.Ww("NetworkInfo"),null!==this.privateIp&&void 0!==this.privateIp&&(t.Yw("privateIp",r.Type.STRING,1),t.Kw(this.privateIp),t.$w()),null!==this.publicIp&&void 0!==this.publicIp&&(t.Yw("publicIp",r.Type.STRING,2),t.Kw(this.publicIp),t.$w()),t.Jw(),t.zw()},PeerLocalityInfo=function(t){this.ntt=null,this.stt=null,this.itt=null,t&&(void 0!==t.ntt&&null!==t.ntt&&(this.ntt=t.ntt),void 0!==t.stt&&null!==t.stt&&(this.stt=new CustomerInfo(t.stt)),void 0!==t.itt&&null!==t.itt&&(this.itt=new NetworkInfo(t.itt)))},PeerLocalityInfo.prototype={},PeerLocalityInfo.prototype.read=function(t){for(t.ib();;){var e=t.Gw(),i=e.ftype,n=e.fid;if(i==r.Type.STOP)break;switch(n){case 1:i==r.Type.STRING?this.ntt=t.xw().value:t.Bw(i);break;case 2:i==r.Type.STRUCT?(this.stt=new CustomerInfo,this.stt.read(t)):t.Bw(i);break;case 3:i==r.Type.STRUCT?(this.itt=new NetworkInfo,this.itt.read(t)):t.Bw(i);break;default:t.Bw(i)}t.qw()}t.Qw()},PeerLocalityInfo.prototype.write=function(t){t.Ww("PeerLocalityInfo"),null!==this.ntt&&void 0!==this.ntt&&(t.Yw("agentId",r.Type.STRING,1),t.Kw(this.ntt),t.$w()),null!==this.stt&&void 0!==this.stt&&(t.Yw("customerInfo",r.Type.STRUCT,2),this.stt.write(t),t.$w()),null!==this.itt&&void 0!==this.itt&&(t.Yw("networkInfo",r.Type.STRUCT,3),this.itt.write(t),t.$w()),t.Jw(),t.zw()}},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(0),n=(o.prototype.startServer=function(t,e){try{this.ett&&this.ett.startServer(t,e)}catch(t){this.logger.warn(this.loggerId+t)}},o.prototype.htt=function(){try{this.ett&&this.ett.htt()}catch(t){this.logger.warn(this.loggerId+t)}},o.prototype.broadcast=function(t,e,i){try{this.ett&&this.ett.broadcast(t,e,i)}catch(t){this.logger.warn(this.loggerId+t)}},o.prototype.vX=function(){try{this.ett&&this.ett.vX()}catch(t){this.logger.warn(this.loggerId+t)}},o.prototype.ott=function(t,e){try{this.ett&&this.ett.ott(t,e)}catch(t){this.logger.warn(this.loggerId+t)}},o);function o(){this.loggerId="[ProxyUDPB]",this.logger=r.Framework.resolve(r.Framework.ht.m).log(),this.ett=window.myUdpBroadcaster,this.ett||this.logger.error(this.loggerId+" helper undefined")}e.K$=n},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(0),n=i(5),o=i(10),s=i(197),a=i(14),u=(h.prototype.init=function(t){this.logger=r.Framework.resolve(r.Framework.ht.m).log(t.sessionId),this.ett=t.SX,this.PD=t.PD},h.prototype.tX=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.jd=t,this.contextId=this.PD.getContextId()},h.prototype.startServer=function(){var t=this;this.logger.debug(this.loggerId+"START UDP BROADCAST SERVER"),this.ett.startServer(n.ea.UDPBroadcast.Eu,(function(e,i){if(-1<t.utt){var r=s.att.el(i);if(r.uuid!=t.guid&&r.streamId==t.contextId&&r.p2pProtocolVersion===n.ea.Vu.eo){t.logger.debug(t.loggerId+"I RECEIVED A MESSAGE FROM "+r.uuid);var a=new o.Nf(o.mf.k,null,r.isLeader);a.guid=r.uuid,a.privateIpString=e,a.rankValue=r.rankValue,t.jd.forEach((function(t){return t.Dq([a],!1)}))}}}))},h.prototype.bX=function(){var t=this;this.logger.info(this.loggerId+"START BROADCAST EVERY "+n.ea.UDPBroadcast.pu),-1!=this.utt&&r.Framework.clearInterval(this.utt),this.utt=r.Framework.setInterval((function(){t.ftt()}),n.ea.UDPBroadcast.pu),this.ftt()},h.prototype.vX=function(){-1!=this.utt&&r.Framework.clearInterval(this.utt)},h.prototype.ftt=function(){var t=new s.att(this.contextId,this.PD.getId(),this.PD.vQ(),this.PD.AM(),n.ea.Vu.eo);this.logger.info(this.loggerId+"BROADCAST MESSAGE contextId "+t.streamId+" id "+t.uuid+" udpscore "+t.rankValue+" lan leader "+t.isLeader+" protobufVersion "+t.p2pProtocolVersion),a.HiveConfig.UDPBroadcast.usiz&&(n.ea.UDPBroadcast.wu=a.HiveConfig.UDPBroadcast.usiz),this.ett.broadcast(n.ea.UDPBroadcast.Eu,n.ea.UDPBroadcast.wu,t.sl())},h.prototype.AE=function(t){this.logger.info("UDPDISCOVERY SERVER CONNECTED"),this.ctt||(this.guid=t,this.startServer(),this.bX())},h);function h(){this.ctt=!1,this.loggerId="[UDPBDiscovery] ",this.utt=-1}e.Y$=u},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.prototype.sl=function(){var t={streamId:this.streamId,uuid:this.uuid,rankValue:this.rankValue,isLeader:this.isLeader,p2pProtocolVersion:this.p2pProtocolVersion};return JSON.stringify(t,this.ltt)},n.prototype.ltt=function(t,e){if(null!==e)return e},n.el=function(t){var e=t,i=JSON.parse(e);return new n(i.streamId,i.uuid,i.rankValue,i.isLeader,i.p2pProtocolVersion)},n);function n(t,e,i,r,n){this.streamId=t,this.uuid=e,this.rankValue=i,this.isLeader=r,this.p2pProtocolVersion=n}e.att=r},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(89),a=i(199),u=i(90),h=i(91),c=i(62),l=i(26),p=i(35),f=i(3),d=i(1),g=(n(v,o=s.Eq),v.prototype.vtt=function(){var t=this;setTimeout((function(){t.dtt()}),1e3)},v.prototype.dtt=function(){var t=this;this.Ett.port.onmessage=function(e){t.logger.debug("LRU length : "+e.data.response)},this.logger.debug("Send message"),this.Ett.port.postMessage({type:a.wtt.ptt}),this.vtt()},v.prototype.contains=function(t){var e=this,i=f.defer();if(this.hq.has(t))i.resolve(!0);else{var r=!1,n=setTimeout((function(){r=!0,e.logger.debug("VOD CONTAINS TIMEDOUT : "+t),i.resolve(!1)}),1e3);this.Ett.port.onmessage=function(t){clearTimeout(n),r||(t.data.response?i.resolve(!0):i.resolve(!1))},this.Ett.onerror=function(t){e.logger.error(t)},this.Ett.port.postMessage({type:a.wtt.gtt,btt:t})}return i.promise},v.prototype.ytt=function(t){var e=f.defer(),i=this.hq.get(t);if(null!=i){var r=null;i.content.forEach((function(t,e){if(c.SU.OU(e).gU())return(r=t).headers=i.headers,void(r.uq=i.uq)})),e.resolve(r)}else e.resolve(null);return e.promise},v.prototype.get=function(t){var e=this,i=f.defer();if(this.hq.has(t))this.ytt(t).then((function(t){i.resolve(t)}));else{this.logger.debug("SHAREDWORKER: Permission Request to READ");var r=Date.now();this.Ttt(a.wtt.mtt,r).then((function(n){e.logger.debug("SHAREDWORKER: Permission Request To READ : "+n),n?e.Ott(t).then((function(t){e.logger.debug("SHAREDWORKER:  Read Completed "),e.Ett.port.postMessage({type:a.wtt.Stt,id:r}),i.resolve(t)})):i.reject(!1)}))}return i.promise},v.prototype.Ott=function(t){var e=this,i=f.defer(),r=null,n=!1,o=setTimeout((function(){n=!0,i.resolve(r)}),1e3);return this.Rtt.onmessage=function(s){if(clearTimeout(o),!n){if(s.data.response){var h=new l.Cp;h.wp=!1,h.gp=!0,h.bp=s.data.data.length,h.yp=0,h.mp=s.data.data.length,h.Op=0,(r=new u.aq(s.data.data.length,s.data.data.content,h,l.fp.cp)).headers=s.data.data.Itt}else e.Ett.port.postMessage({type:a.wtt._tt,btt:t});i.resolve(r)}},this.Rtt.postMessage({type:a.wtt.Att,btt:t}),i.promise},v.prototype.J=function(){var t=this;this.logger.debug("FLUSHING IN-MEMORY CACHE");for(var e=[],i=0;i<this.fq.length;i++)this.hq.get(this.fq[i]).wq||e.push(this.fq[i]);this.logger.debug("Flush "+e.length+" in memory"),0<e.length?this.Ntt(e).then((function(e){t.Ctt()})):this.Ctt()},v.prototype.Ctt=function(){var t=this,e=0,i=0;this.logger.debug("PURGING PERSISTENTDB's IN-MEMORY CACHE"),this.fq.every((function(r,n){var o=t.hq.get(r).size();return e+o>t.nq?(i=n,t.logger.debug("CACHE TOO BIG "+(e+o)),!1):(e+=o,!0)}))||this.fq.splice(i,this.fq.length-1).forEach((function(e){t.hq.delete(e)})),this.eq()},v.prototype.Ntt=function(t){var e=this,i=f.defer();this.logger.debug("SHAREDWORKER:  Permission Request To Write ");var r=Date.now();return this.Ttt(a.wtt.ktt,r).then((function(n){e.logger.debug("SHAREDWORKER:  Permission Request To WRITE : "+n),n?(e.logger.debug("Flush the contents"),e.Dtt(t).then((function(t){e.logger.debug("SHAREDWORKER:  WRITE COMPLETED"),e.Ett.port.postMessage({type:a.wtt.Mtt,id:r}),i.resolve(t)}))):i.resolve(n)})),i.promise},v.prototype.Dtt=function(t){var e=this,i=f.defer();return this.jtt(t[0]).then((function(r){if(r)t.shift(),0==t.length?i.resolve(!0):e.Dtt(t).then((function(t){i.resolve(t)}));else{var n=!1,o=setTimeout((function(){n=!0,t.shift(),0==t.length?i.resolve(!1):e.Dtt(t).then((function(t){i.resolve(t)}))}),1e3);e.Rtt.onmessage=function(r){r.data&&(e.hq.get(t[0]).wq=!0,e.Ett.port.postMessage({type:a.wtt.Ptt,btt:t[0],size:e.hq.get(t[0]).size()})),clearTimeout(o),n||(t.shift(),0==t.length?r.data?i.resolve(!0):i.resolve(!1):e.Dtt(t).then((function(t){i.resolve(t)})))},e.Rtt.onerror=function(t){e.logger.error(t)};var s=e.hq.get(t[0]),u=null,h=null;s.content.forEach((function(t,e){if(c.SU.OU(e).gU())return h=e,void((u=t).headers=s.headers)}));var l={pA:s.Mp.jp(),headers:s.headers,length:s.size(),Htt:h,content:u.data,Mp:s.Mp};e.Rtt.postMessage({type:a.wtt.Ltt,data:l})}})),i.promise},v.prototype.jtt=function(t){var e=this,i=f.defer(),r=!1,n=setTimeout((function(){r=!0,i.resolve(!1)}),1e3);return this.Ett.port.onmessage=function(o){clearTimeout(n),r||(e.logger.debug("SHAREDWORKER:  CONTAINS REQUEST : "+t+" : "+o.data.response),o.data.response?i.resolve(!0):i.resolve(!1))},this.Ett.onerror=function(t){e.logger.error(t),i.resolve(!1)},this.Ett.port.postMessage({type:a.wtt.gtt,btt:t}),i.promise},v.prototype.Ttt=function(t,e){var i=this,r=f.defer(),n=!1,o=setTimeout((function(){n=!0,r.resolve(!1)}),2e3);return this.Ett.port.onmessage=function(e){clearTimeout(o),n?t==a.wtt.mtt?i.Ett.port.postMessage({type:a.wtt.Stt}):t==a.wtt.ktt&&i.Ett.port.postMessage({type:a.wtt.Mtt}):r.resolve(e.data.response)},this.Ett.onerror=function(t){i.logger.error(t)},this.Ett.port.postMessage({type:t,id:e}),r.promise},v.prototype.OM=function(t){return[]},v.prototype.cq=function(t){var e=this,i=f.defer(),r=[],n=Date.now();return this.Ttt(a.wtt.mtt,n).then((function(t){if(t){var o=!1,s=setTimeout((function(){o=!0,e.Ett.port.postMessage({type:a.wtt.Stt,id:n}),i.resolve(r)}),4e3);e.Rtt.onmessage=function(t){if(clearTimeout(s),t.data.response&&null!=t.data)for(var u=0;u<t.data.elements.length;u++){var c=new p.wA(t.data.elements[u].url,t.data.elements[u].fA,t.data.elements[u].EA,t.data.elements[u].lA,t.data.elements[u].duration,t.data.elements[u].bitrate,t.data.elements[u].vA),l=new h.oq(c);l.headers=t.data.elements[u].Itt,l.totalSize=t.data.elements[u].length,r.push(l)}e.Ett.port.postMessage({type:a.wtt.Stt,id:n}),o||i.resolve(r)},e.Rtt.onerror=function(t){d.ErrorMonitor.lt().logError("GET ELEMENTS ERROR",{error:t}),e.Ett.port.postMessage({type:a.wtt.Stt,id:n})},e.Rtt.postMessage({type:a.wtt.Utt})}})),i.resolve(null),i.promise},v);function v(){return o.call(this)||this}e.N$=g},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=(n.ktt="write_request",n.gtt="contains_request",n.Ptt="write_id_operation",n.mtt="read_request",n.Stt="read_completed",n.Mtt="write_completed",n._tt="update_lru",n.ptt="lru_stats",n.Att="read_operation",n.Utt="read_elements_operation",n.Ftt="read_keys_operation",n.Ltt="write_operation",n);function n(){}e.wtt=r},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(21),a=(n(u,o=s.HiveTechOptions),u);function u(){var t=null!==o&&o.apply(this,arguments)||this;return t.minVersion="3.0.0",t.renderStatsCallback=void 0,t}e.m$=a},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(3),n=i(22),o=i(15),s=i(202),a=i(27),u=i(64),h=i(18),c=i(24),l=i(46),p=i(99),f=i(14),d=i(1),g=i(56),v=i(31),y=i(203),m=i(29),E=navigator,w=(b.prototype.getName=function(){return b.WP},b.prototype.getVersion=function(){return this.version},b.prototype.KP=function(){return!1},b.prototype.$P=function(){var t=this;if(null==this.Gtt||1e4<Date.now()-this.xtt){var e="//"+u.UU.Ok+":"+u.UU.kU+"/version.json";this.Gtt=o.bc(e).then((function(e){var i=JSON.parse(e);t.state=i.state,t.version=i.version;var n=i.app;return t.logger().debug(" Version: "+n+", Min: "+t.options_.minVersion+", Max: "+t.options_.Btt),n&&n>=t.options_.minVersion&&(""===t.options_.Btt||n<t.options_.Btt)?"ready"===t.state?"ready":(t.logger().warn(t.id()+"Client not ready: "+t.state),r.reject(new a.HiveTechError(a.aw.fw,"state "+t.state))):r.reject(new a.HiveTechError(a.aw.vw,"Hive Electron version "+n+" is not matching the version requirements MIN: "+t.options_.minVersion+", MAX: "+t.options_.Btt))}),(function(e){var i="Client not reachable";return null!=e&&null!=e.status&&-1!=e.status&&(i="Client check returned "+e.status),t.logger().warn(t.id()+i),r.reject(new a.HiveTechError(a.aw.fw,i))})).catch((function(t){return t instanceof a.HiveTechError?r.reject(t):r.reject(new a.HiveTechError(a.aw.fw,"error parsing response"))})),this.xtt=Date.now()}return this.Gtt},b.prototype.initSession=function(t,e){var i=this,n=this.YP.options().readyCheckTimeout,o="Client Ready check timed out after "+n;return(n&&0<n?this.$P().timeout(n,o):this.$P()).then((function(){return i.resolveTicketPromise(t).then((function(e){var r=i.XP(t,e);return i.Vtt(r)}))})).catch((function(t){return t instanceof a.HiveTechError?r.reject(t):r.reject(new a.HiveTechError(a.aw.TICKET_ERROR,"generic error resolving ticket"))}))},b.prototype.rF=function(t,e){var i=this,n=this.YP.options().readyCheckTimeout,o="Client Ready check timed out after "+n;return(n&&0<n?this.$P().timeout(n,o):this.$P()).then((function(){return i.qtt(e).then((function(t){var r=i.XP(null,t,e);return i.Vtt(r)}))})).catch((function(t){return t instanceof Error&&t.message===o?r.reject(new a.HiveTechError(a.aw.dw,t.message)):t instanceof Error?r.reject(new a.HiveTechError(a.aw.TICKET_ERROR,"generic error resolving ticket")):r.reject(t)}))},b.prototype.Vtt=function(t){if(null!=t)return y.Qtt.nB(t,this.YP.getPluginId()),y.Qtt.registerComm(this.YP,this.YP.getPluginId()),n.HiveRequestFactory.registerTech(this.YP.getPluginId(),this.getName()),t;throw new a.HiveTechError(a.aw.TICKET_ERROR,"error generating session")},b.prototype.hB=function(t){this.ad=t},b.prototype.JP=function(){return this.options_.initTimeout},b.prototype.isActive=function(t,e){var i=e.manifest.toLowerCase(),r=t.toLowerCase(),n=i.indexOf(".ism/manifest");if(-1<n){var o=i.substring(0,n);if(-1<r.indexOf(o))return-1<r.indexOf(".ism/manifest(format=mpd-time-csf)")?this.ad?(e.ticket.SourceURL=t,!0):this.E$(e,"The player does not use HiveRequest, downgrading to StatsJS"):this.E$(e,"Protocol not supported by HiveJsProxy tech, downgrading to StatsJS")}else if(r===i)return!!this.ad||this.E$(e,"The player does not use HiveRequest, downgrading to StatsJS");return!1},b.prototype.E$=function(t,e){var i=this;return t.tech=this.BU,v.Hive.Reporting().initSession(t.ticket.pluginId,t.ticket.ticketUrl,!1).then((function(e){t.bd(e),e.ticket,i.logger().debug("[HiveJSProxy] downgrade verified ticket "+t.ticket.ticketUrl),i.YP.updatePlayerInfo(e)})).fail((function(t){d.ErrorMonitor.lt().logError("Error initializing session when downgrading session tech",i.loggerId,{error:t})})),this.ad&&this.ad.Wtt(),this.ad=void 0,n.HiveRequestFactory.registerTech(this.YP.getPluginId(),g.StatsJS.WP),this.YP.logger().warn("[HiveJsProxy] "+e),this.onError(new a.HiveTechError(a.aw.lw,e)),!0},b.prototype.pd=function(t,e){var i=this;this.logger().debug(this.id()+"Stopping session "+t.id+" [onUnload:"+e+"]");var r="//"+u.UU.Ok+":"+u.UU.kU+"/proxy/"+this.YP.getPluginId()+"/stop";e&&E.sendBeacon?(E.sendBeacon(r),this.logger().debug(this.id()+"session stopped ["+t.id+"][beacon]")):o.bc(r,null,!e).then((function(){i.logger().debug(i.id()+"session stopped ["+t.id+"]"+(e?"[sync]":""))}),(function(r){i.logger().warn(i.id()+"session close error ["+t.id+"]"+(e?"[sync]":""),r)}))},b.prototype.gl=function(t,e){var i=e?h.ul.IDLE:h.ul.al;this.logger().debug(this.id()+"idle state: "+h.ul[i])},b.prototype.ZP=function(t,e){var i=this,n="playing-point="+e.playingPoint;n+="&buffer-length="+e.bufferLength,n+="&total-buffering="+e.totalBuffering,n+="&width="+e.width,n+="&height="+e.height,n+="&fullscreen="+e.fullscreen;var s="//"+u.UU.Ok+":"+u.UU.kU+"/proxy/"+this.YP.getPluginId()+"/stats/put?"+n;return o.bc(s).fail((function(t){return i.logger().warn(i.id()+"error sending feedback to Hive Client",t),r.reject(t)}))},b.prototype.rH=function(t,e,i){var n=this,s="//"+u.UU.Ok+":"+u.UU.kU+"/proxy/"+this.YP.getPluginId()+"/event?type="+e;if(null!=i)for(var a in i)s+="&"+a+"="+i[a];return this.logger().debug(this.id()+"event "+c.PlayerEvents[e],null!=i?i:""),o.bc(s).fail((function(t){return n.logger().warn(n.id()+"error sending feedback event to Hive Client",t),r.reject(t)}))},b.prototype.lE=function(t,e){return r.resolve(!0)},b.prototype.onError=function(t){var e=!0;if(null!=this.options_.onError)try{e=this.options_.onError(t)}catch(t){d.ErrorMonitor.lt().logError("exception in user-defined onError callback",this.id(),t)}return e},b.prototype.onActiveSession=function(t){var e=this.YP.getPlayerSource();0===e.indexOf("//")&&(e=location.protocol+e);var i=o.wc(u.UU.MU,u.UU.Ok,u.UU.kU,this.YP.getPluginId(),e);if(t.authenticationToken&&"3.0.1"<=this.version?o.Tc(i,JSON.stringify({authenticationToken:t.authenticationToken})):o.bc(i),this.updatePlayerInfo(t),p.nY.bt(this.logger()),this.ad&&this.ad.Ytt(),this.Ktt(t),null!=this.options_.onActiveSession)try{this.options_.onActiveSession(t.toHiveSession())}catch(t){d.ErrorMonitor.lt().logError("exception in user-defined onActiveSession callback",this.id(),t)}},b.prototype.aH=function(){},b.prototype.fH=function(){n.HiveRequestFactory.od(b.WP,p.nY,y.Qtt)},b.prototype.cH=function(t){this.YP=t},b.prototype.id=function(){return"["+b.WP+"] "},b.prototype.$tt=function(t){null!=t[b.WP]&&o.updateOptions(t[b.WP],this.options_)},b.prototype.resolveTicketPromise=function(t){var e,i=this;this.logger().debug(this.id()+"resolving ticket: "+t);var n=this.Xtt(t),s=JSON.stringify(this.Jtt()),u=null;return this.YP.options().testId&&((e={})[m.et._b]=this.YP.options().testId,u=e),o.Tc(n,s,"application/json",u).then((function(e){var r=JSON.parse(e);return i.logger().debug(i.id()+"resolved ticket "+t+" -> "+r.manifest),r}),(function(e){return i.logger().warn(i.id()+"ticket "+t+" resolve error: ",e),r.reject(new a.HiveTechError(a.aw.TICKET_ERROR,e))})).catch((function(t){return t instanceof a.HiveTechError?r.reject(t):r.reject(new a.HiveTechError(a.aw.cw,t))}))},b.prototype.qtt=function(t){var e,i=this;this.logger().debug(this.id()+"Initializing all the sessions via Electron: ",t);var n=this.ztt(),s=JSON.stringify({authResponse:t,configurations:this.Jtt()}),u=null;return this.YP.options().testId&&((e={})[m.et._b]=this.YP.options().testId,u=e),this.logger().debug("My header ",u),o.Tc(n,s,"application/json",u).then((function(t){var e=JSON.parse(t);return i.logger().debug("got all sessions",e),e}),(function(t){return i.logger().warn(i.id()+" init sessions error: ",t),r.reject(new a.HiveTechError(a.aw.TICKET_ERROR,t))})).catch((function(t){return t instanceof a.HiveTechError?r.reject(t):r.reject(new a.HiveTechError(a.aw.cw,t))}))},b.prototype.Xtt=function(t){return t=encodeURIComponent(t),o.wc(u.UU.Sk,u.UU.Ok,u.UU.kU,t,"&",this.YP.getPluginId())},b.prototype.ztt=function(){return o.wc(u.UU.DU,u.UU.Ok,u.UU.kU,this.YP.getPluginId())},b.prototype.XP=function(t,e,i){var r=new l.Ticket;t?r.Gk(t):(r.Hk(i.partnerId,i.customerId,i.validated[0].videoId),r.originalManifest=e.manifest);var o=new n.HiveSessionInternal(t,r,e.manifest,null);return o.lH=!0,o.id=e.sessionId,o.ticket.sessionId=o.id,o},b.prototype.Jtt=function(){var t={HiveConfig:{}};for(var e in window.HiveConfig)for(var i in t.HiveConfig[e]={},window.HiveConfig[e])t.HiveConfig[e][i]=window.HiveConfig[e][i];return t},b.prototype.Ktt=function(t){var e=this;if(void 0!==f.HiveConfig.Stats.render){var i="//"+u.UU.Ok+":"+u.UU.kU+"/proxy/"+this.YP.getPluginId()+"/stats/get";if("undefined"!=typeof EventSource){var r=new EventSource(i);r.onmessage=function(t){e.Ztt(t.data)},r.onerror=function(t){r.close()}}else this.tit=window.setInterval((function(){o.bc(i).then((function(t){e.Ztt(t)}))}),4e3)}},b.prototype.updatePlayerInfo=function(t){var e=this,i="comm-version="+this.YP.getCommVersion();i+="&plugin-name="+this.YP.getPluginName(),i+="&plugin-version="+this.YP.getPluginVersion(),i+="&player-tech="+this.YP.getPlayerTech(),i+="&player-version="+this.YP.getPlayerVersion(),this.YP.getTelemetryId()&&(i+="&telemetry-id="+this.YP.getTelemetryId());var n=o.wc(u.UU.PU,u.UU.Ok,u.UU.kU,this.YP.getPluginId(),i);return o.bc(n).fail((function(t){return e.logger().debug(e.id()+"error sending player Info to Hive Client",t),r.reject(t)}))},b.prototype.Ztt=function(t){try{var e=JSON.parse(t);for(var i in e)e.hasOwnProperty(i)&&(e[i].human=function(t){return 1e6<t?(t/1e6).toFixed(2)+"MB":1e3<t?(t/1e3).toFixed(2)+"KB":t+"B"});f.HiveConfig.Stats.render(e)}catch(t){console.trace(t)}},b.prototype.logger=function(){return this.YP.logger()},b.WP="HiveJsProxy",b);function b(t,e,i){this.loggerId="[HiveJsProxy]",this.xtt=0,this.YP=t,this.options_=new s.iit,this.$tt(e),this.BU=i}e.HiveJsProxy=w},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(21),a=i(64),u=(n(h,o=s.HiveTechOptions),h);function h(){var t=null!==o&&o.apply(this,arguments)||this;return t.minVersion=a.UU.HU,t.Btt=a.UU.LU,t}e.iit=u},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(99),a=i(6),u=i(55),h=i(1),c=(n(l,o=s.nY),l.nB=function(t,e){l.rB[e]?l.rB[e].push(t):l.rB[e]=[t]},l.registerTech=function(t,e){l.nit[e]=t},l.registerComm=function(t,e){l.sB[e]=t},l.prototype.send=function(){var t=this;if(!this.pluginId){var e=Object.keys(l.sB);0<e.length&&(this.pluginId=l.sB[e[0]])}var i=l.rB[this.pluginId],r=l.sB[this.pluginId],n=!1;i.forEach((function(e){u.LP(e)||u.LP(r)||e.manifest!==t.url||(r.logger().debug("Intercepted Manifest Request "+t.url),e.tech.hB(t),r.onActivateSession(t.url),n=!0)})),n||(i.forEach((function(e){!u.LP(e)&&!u.LP(r)&&0<=t.url.indexOf(e.manifest)&&(r.logger().debug("Intercepted Manifest Request "+t.url),e.tech.hB(t),r.onActivateSession(t.url),n=!0)})),n||(h.ErrorMonitor.lt().logError("HiveJS Tech or Comm are not defined",this.loggerId),this.Wtt()))},l.prototype.Wtt=function(){var t=this,e=new XMLHttpRequest;e.open("GET",this.url),e.onreadystatechange=function(i){4===e.readyState&&(t.response=e.responseText,t.responseText=e.responseText,t.readyState=4,t.status=e.status,t.onreadystatechange(a.La.createEvent(Event,"readystatechange",i,t)),t.onload(a.La.createEvent(ProgressEvent,"load",i,t)),console.debug("Returned Manifest Request "+t.url))},e.send()},l.prototype.Ytt=function(){o.prototype.send.call(this)},l.sB={},l.rB={},l.rit={},l.nit={},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.Qtt=c},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o=i(3),s=i(22),a=i(15),u=i(205),h=i(21),c=i(206),l=i(27),p=i(44),f=i(29),d=i(18),g=i(24),v=i(46),y=i(1),m=i(54);e.sit=navigator;var E,w=(n(b,E=s.HiveSessionInternal),b);function b(){return null!==E&&E.apply(this,arguments)||this}var S=(T.prototype.getName=function(){return T.WP},T.prototype.getVersion=function(){return this.version},T.prototype.KP=function(){return!1},T.prototype.$P=function(){var t=this;if(null==this.Gtt||1e4<Date.now()-this.xtt){var e=new m.gE;e.bE(navigator.userAgent);var i=e.Bj();if("IE"===i.name&&i.version&&parseInt(i.version)<10)return o.reject(new l.HiveTechError(l.aw.fw,"Internet Explorer < v.10 not supported"));this.eit=Date.now(),this.hit=0;var r="//"+p.zv.Ok+":"+this.YP.options().monitorPort+"/version.json";this.logger().debug(this.id()+"verifying Hive Client version"),this.Gtt=a.bc(r).then((function(e){var i=JSON.parse(e);return t.state=i.state,t.version=i.version,"ready"===t.state?"developer"===t.version||t.version>=t.options_.minVersion?(t.hit=Date.now(),t.logger().debug(t.id()+"Hive Client ready - version "+t.version+" ["+(t.hit-t.eit)+"]"),"ready"):(y.ErrorMonitor.lt().logError("Client version requirement not satisfied",t.id(),{version:t.version,minVersion:t.options_.minVersion}),t.YP.addTechEvent(new g.$E(null,2)),o.reject(new l.HiveTechError(l.aw.vw,"version "+t.version))):(y.ErrorMonitor.lt().logError("Cannot check version: client state not ready",t.id(),{state:t.state}),t.YP.addTechEvent(new g.$E(null,1)),t.hit=Date.now(),t.logger().debug("[Timing] Hive Client not ready",t.hit-t.eit),o.reject(new l.HiveTechError(l.aw.fw,"state "+t.state)))}),(function(e){var i="Client not reachable";return null!=e&&null!=e.status&&-1!=e.status&&(i="Client check returned error"),500===e.status?(y.ErrorMonitor.lt().logError(i,t.id(),{error:e}),t.YP.addTechEvent(new g.$E(null,1)),o.reject(new l.HiveTechError(l.aw.cw,i))):(y.ErrorMonitor.lt().logError(i,t.id(),null!=e&&null!=e.status&&-1!=e.status?{status:e.status}:void 0),t.YP.addTechEvent(new g.$E(null,0)),o.reject(new l.HiveTechError(l.aw.fw,i)))})).catch((function(e){if(e instanceof l.HiveTechError)return o.reject(e);var i="Error fetching Hive Client version";return y.ErrorMonitor.lt().logError(i,t.id(),e),o.reject(new l.HiveTechError(l.aw.fw,i))})),this.xtt=Date.now()}return this.Gtt},T.prototype.initSession=function(t,e){var i=this,r=this.YP.options().readyCheckTimeout;return(r&&0<r?this.$P().timeout(r,"Client Ready check timed out after "+r+"ms"):this.$P()).then((function(){return i.oit(t).catch((function(t){return o.reject(t)}))})).catch((function(t){return t instanceof Error&&(t=new l.HiveTechError(l.aw.dw,t.message)),o.reject(t)}))},T.prototype.JP=function(){return this.options_.initTimeout},T.prototype.isActive=function(t,e){return-1<t.indexOf(e.uit)},T.prototype.pd=function(t,i){var r=this;this.logger().debug(this.id()+"Stopping session "+t.id+" [complete close:"+i+"]");var n="//"+p.zv.Ok+":"+this.YP.options().playerPort+"/session?action=stop";n+="&currentSession="+t.id,i&&(n+="&completeStop=true"),i&&e.sit.sendBeacon?(e.sit.sendBeacon(n),this.logger().debug(this.id()+"session stopped ["+t.id+"][beacon]")):a.bc(n,null,!i).then((function(){r.logger().debug(r.id()+"session stopped ["+t.id+"]"+(i?"[sync]":""))}),(function(e){r.logger().warn(r.id()+"session close error ["+t.id+"]"+(i?"[sync]":""),e)}))},T.prototype.gl=function(t,e){this.ait=e?d.ul.IDLE:d.ul.al,this.logger().notice("[HiveComm] client state: "+d.ul[this.ait])},T.prototype.ZP=function(t,e){if(this.ait==d.ul.IDLE)return o.resolve(!0);var i="playing-point="+e.playingPoint;i+="&buffer-length="+e.bufferLength,i+="&total-buffering="+e.totalBuffering,i+="&width="+e.width,i+="&height="+e.height,i+="&fullscreen="+e.fullscreen;var r=t.uit+"stats?"+i;return this.logger().trace(r),a.bc(r)},T.prototype.rH=function(t,e,i){var r=this;if(!(e!==g.PlayerEvents.VISIBLE&&e!==g.PlayerEvents.HIDDEN||this.version&&("developer"===this.version||"2017"<=this.version)))return o.resolve(!0);var n=t.uit+"player-event?type="+g.PlayerEvents[e];if(null!=i)for(var s in i)n+="&"+s+"="+i[s];return this.logger().debug(this.id()+"event "+g.PlayerEvents[e],null!=i?i:""),a.bc(n).fail((function(t){return r.logger().warn(r.id()+"error sending feedback event to Hive Client",t),o.reject(t)}))},T.prototype.lE=function(t,e){return o.resolve(!0)},T.prototype.updatePlayerInfo=function(t){var e=this;if(this.fit())return this.logger().warn("Player info not supported in this Java client version"),o.resolve(!0);var i="comm-version="+this.YP.getCommVersion();i+="&plugin-name="+this.YP.getPluginName(),i+="&plugin-version="+this.YP.getPluginVersion(),i+="&player-tech="+this.YP.getPlayerTech(),i+="&player-version="+this.YP.getPlayerVersion(),this.YP.getTelemetryId()&&(i+="&telemetry-id="+this.YP.getTelemetryId());var r=t.uit+"player-info?"+i;return a.bc(r).fail((function(t){return e.logger().debug(e.id()+"error sending player Info to Hive Client",t),o.reject(t)}))},T.prototype.onError=function(t){var e=!0;if(null!=this.options_.onError)try{e=this.options_.onError(t)}catch(t){y.ErrorMonitor.lt().logError("Exception in user-defined onError callback",this.id(),t)}return e},T.prototype.aH=function(t,e,i){var r={isReadyIn:this.eit,isReadyOut:this.hit,leaseIn:this.cit,leaseOut:this.lit,resolveIn:this.vit,resolveOut:this.dit};void 0!==e&&null!=e&&(r.sessionId=e.id),void 0!==i&&(r.total=i);var n=JSON.parse(JSON.stringify(r));y.ErrorMonitor.lt().logError(t.message,this.id(),n),this.YP.addTechEvent(new g.$E(null,5,r)),this.Eit()},T.prototype.onActiveSession=function(t){if(this.updatePlayerInfo(t),s.Fd.setItem("hiveActiveSessionId",t.id),null!=this.options_.onActiveSession)try{this.options_.onActiveSession(t.toHiveSession())}catch(t){y.ErrorMonitor.lt().logError("Exception in user-defined onActiveSession callback",this.id(),t)}},T.prototype.cH=function(t){this.YP=t},T.prototype.id=function(){return"["+T.WP+"] "},T.prototype.$tt=function(t){null!=t[T.WP]&&a.updateOptions(t[T.WP],this.options_)},T.prototype.oit=function(t){var e=this,i=(new Date).getTime();return this.pit(t).then((function(r){return r?e.wit(t,r,i):e.resolveTicketPromise(t).then((function(r){return e.wit(t,r,i)}))}))},T.prototype.pit=function(t){var e=this;if(this.cit=Date.now(),this.YP.options().useSessionCheck){var i="//"+p.zv.Ok+":"+this.YP.options().playerPort+"/session?&action=check";i+="&hivePluginId="+this.YP.getPluginId(),i+="&callback="+encodeURIComponent(t);var r=s.Fd.getItem("hiveActiveSessionId");return s.Fd.removeItem("hiveActiveSessionId"),r&&(i+="&currentSession="+r),this.git(),this.bit(i).then((function(r){return e.lit=Date.now(),r?e.yit(r,i,t,e.cit):(e.logger().debug(e.id()+"session allowed ["+(e.lit-e.cit)+"]"),!1)}),(function(t){if(400==t.status)return e.Tit("bad request","error resolving ticket",t);if(401==t.status)return e.Tit("unauthorized","error verifying the ticket",t);if(403!=t.status)return 404==t.status?(e.logger().debug(e.id()+"installed version does not support active session check"),e.lit=Date.now(),!1):(y.ErrorMonitor.lt().logError("unhandled error from Java",e.id(),{error:t.status}),e.YP.addTechEvent(new g.$E(null,4)),o.reject(new l.HiveTechError(l.aw.cw,t)));var i=T.mit(t,void 0,"session"),r=i?{Oit:i}:void 0;return y.ErrorMonitor.lt().logError("reports another active session",e.id(),r),e.YP.addTechEvent(new g.$E(null,3,r)),o.reject(new l.HiveTechError(l.aw.lw,"another active session"+(r?" ["+r.Oit+"]":"")))})).catch((function(t){return t instanceof l.HiveTechError?o.reject(t):(y.ErrorMonitor.lt().logError("unhandled error on requestLeaseDirect",e.id(),{error:t}),e.YP.addTechEvent(new g.$E(null,4)),e.lit=Date.now(),e.YP.logger().warn("[Timing] unhandeled session request ",e.lit-e.cit),o.reject(new l.HiveTechError(l.aw.cw,t)))})).finally((function(){clearTimeout(e.Sit)}))}return this.logger().debug(this.id()+"Hive session check disabled - will directly resolve ticket (other active sessions may fail)"),o.resolve(!1)},T.prototype.bit=function(t){var e;if(this.YP.options().testId){if(!("developer"!==this.version||this.version<p.zv.Ak))return a.bc(t,void 0,!0,((e={})[f.et._b]=this.YP.options().testId,e));this.logger().warn(this.id()+"The Hive Client Version installed does not support the test id in its generated metrics")}return a.bc(t)},T.prototype.Tit=function(t,e,i){var r=T.mit(i,t);return y.ErrorMonitor.lt().logError(e,this.id()),this.dit=Date.now(),o.reject(new l.HiveTechError(l.aw.TICKET_ERROR,r))},T.mit=function(t,e,i){void 0===i&&(i="status");var r=e;if(t.body)try{r=JSON.parse(t.body)[i]}catch(t){}return r},T.prototype.resolveTicketPromise=function(t){var e=this;this.vit=Date.now(),this.logger().debug(this.id()+"resolving ticket: "+t);var i=this.Xtt(t);return a.bc(i,"application/json").then((function(r){return e.yit(r,i,t,e.vit)}),(function(i){return e.Rit(i,t)})).catch((function(t){return y.ErrorMonitor.lt().logError("error parsing ticket response",e.id(),t),o.reject(new l.HiveTechError(l.aw.cw,t))}))},T.prototype.Rit=function(t,e){return y.ErrorMonitor.lt().logError("error resolving ticket",this.id(),{ticket:e}),o.reject(new l.HiveTechError(l.aw.TICKET_ERROR,t))},T.prototype.yit=function(t,e,i,r){var n=JSON.parse(t),o=u.Iit((0===e.indexOf("//")?location.protocol:"")+e,n.location);return n.version&&!this.version&&(this.version=n.version),this.dit=Date.now(),this.logger().debug(this.id()+"resolved ticket "+i+" -> "+o+" ["+(this.dit-r)+"]"),o},T.prototype.wit=function(t,e,i){var r=this.XP(t,e);if(null==r)throw new l.HiveTechError(l.aw.TICKET_ERROR,"error generating session");var n=(new Date).getTime()-i;return n>=this.options_.warnSlowRespTimeout&&this.aH(new l.HiveTechError(l.aw.dw,this.id()+" The tech initialization took more than "+this.options_.warnSlowRespTimeout+" milliseconds"),r,n),s.HiveRequestFactory.registerTech(this.YP.getPluginId(),this.getName()),r},T.prototype.XP=function(t,e){var i=new v.Ticket;i.Gk(t);var r=new w(t,i,e,null);r.lH=!0;var n=p.zv.Ik.exec(r.manifest);return null!=n?(r.uit=n[1],r.id=n[5],r):null},T.prototype.Xtt=function(t){var e=-1==t.indexOf("?")?"?":"&";return this.fit()?a.wc(p.zv.Rk,p.zv.Ok,this.YP.options().playerPort,t):a.wc(p.zv.Sk,p.zv.Ok,this.YP.options().playerPort,t,e,this.YP.getPluginId4Java())},T.prototype.git=function(){var t=this;this.Sit&&clearTimeout(this.Sit),this.Sit=setTimeout((function(){y.ErrorMonitor.lt().logError("The Lease Request is taking more than "+t.options_.warnSlowRespTimeout+" secs",t.id())}),this.options_.warnSlowRespTimeout)},T.prototype.Eit=function(){this.cit=0,this.lit=0,this.vit=0,this.dit=0},T.prototype.logger=function(){return this.YP.logger()},T.prototype.fH=function(){this.Eit()},T.prototype.fit=function(){return this.options_.supportLegacyClient&&(!this.version||this.version.substr(0,4)<"2016")},T.WP="HiveJava",T);function T(t,e){this.xtt=0,this.YP=t,this.options_=new c._it,this.$tt(e),a.parseParameterOptions(window.location.href,new h.UrlConfigurableOptions,this.options_)}e.HiveJava=S},function(t,e,i){var r,n,o,s,a;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={Iit:function(t,e,i){if(i=i||{},t=t.trim(),!(e=e.trim())){if(!i.Ait)return t;var r=a.Nit(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.wT(r.path),a.Cit(r)}var o=a.Nit(e);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return i.Ait?(o.path=a.wT(o.path),a.Cit(o)):e;var s=a.Nit(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.kit&&s.path&&"/"!==s.path[0]){var u=n.exec(s.path);s.kit=u[1],s.path=u[2]}s.kit&&!s.path&&(s.path="/");var h={scheme:s.scheme,kit:o.kit,path:null,Dit:o.Dit,query:o.query,Cb:o.Cb};if(!o.kit&&(h.kit=s.kit,"/"!==o.path[0]))if(o.path){var c=s.path,l=c.substring(0,c.lastIndexOf("/")+1)+o.path;h.path=a.wT(l)}else h.path=s.path,o.Dit||(h.Dit=s.Dit,o.query||(h.query=s.query));return null===h.path&&(h.path=i.Ait?a.wT(o.path):o.path),a.Cit(h)},Nit:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",kit:e[2]||"",path:e[3]||"",Dit:e[4]||"",query:e[5]||"",Cb:e[6]||""}:null},wT:function(t){for(t=t.split("").reverse().join("").replace(o,"");t.length!==(t=t.replace(s,"")).length;);return t.split("").reverse().join("")},Cit:function(t){return t.scheme+t.kit+t.path+t.Dit+t.query+t.Cb}},t.exports=a},function(t,e,i){"use strict";var r,n=this&&this.lc||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"s",{value:!0});var o,s=i(21),a=i(44),u=(n(h,o=s.HiveTechOptions),h);function h(){var t=null!==o&&o.apply(this,arguments)||this;return t.minVersion=a.zv._k,t.initTimeout=6e4,t.warnSlowRespTimeout=5e3,t.supportLegacyClient=!1,t}e._it=u},function(t,e,i){"use strict";Object.defineProperty(e,"s",{value:!0});var r=i(65),n=(o.prototype.getResponse=function(){var t=this;return new Promise((function(e,i){t.Mit=new r.FU({xhrSetup:function(e,i){(e=new r.HiveRequestFactory(t.plugin.getPluginId())).open(t.request.method,i.url,!0);for(var n=0,o=t.request.headers;n<o.length;n++){var s=o[n];e.setRequestHeader(s.name,s.value)}return e.responseType=t.request.responseType,e}}),t.Mit.load(t.request,{lK:0,retryDelay:1e3,cK:1e3},{onSuccess:function(i,r,n){t.plugin.logger().debug("SUCCESS REQUEST",i,r,n);var o=Object.keys(i.fK).map((function(t){return{name:t,value:i.fK[t]}})),s={request:t.request,url:t.request.url,headers:o,status:i.code,length:i.data.length||i.data.byteLength,statusText:"OK",body:i.data,elapsedTime:(r.tload-r.trequest)/1e3,timeToFirstByte:(r.tfirst-r.trequest)/1e3};e(s)},onProgress:function(e,i,r){if(t.jit){var n={loadedBytes:e.loaded,totalBytes:e.total,responseTiming:{doneTimestamp:e.tload?e.tload:e.loaded===e.total?performance.now():void 0,headersReceivedTimestamp:e.tfirst,openedTimestamp:e.trequest,progressTimestamp:performance.now()}};t.jit.call(t,n)}},onError:function(e,r){var n=e.code,o=e.text,s=e.url,a=e.fK,u=e.data;t.plugin.logger().debug("FAILED REQUEST",t.request);var h=Object.keys(a).map((function(t){return{name:t,value:a[t]}}));i({response:{status:n,statusText:o,headers:h,request:r,url:s,data:u}})},onTimeout:function(e,r){t.plugin.logger().debug("TIMEOUT REQUEST",t.request),i({response:{status:0}})}})}))},o.prototype.setProgressListener=function(t){this.jit=t},o.prototype.cancel=function(){this.Mit&&this.Mit.abort()},o);function o(t,e){this.plugin=t,this.request=e,this.setProgressListener=this.setProgressListener.bind(this),this.cancel=this.cancel.bind(this)}e.sY=n}],g={},h.lO=f,h.c=g,h.d=function(t,e,i){h.Pit(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},h.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"s",{value:!0})},h.t=function(t,e){if(1&e&&(t=h(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.s)return t;var i=Object.create(null);if(h.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)h.d(i,r,function(e){return t[e]}.bind(null,r));return i},h.n=function(t){var e=t&&t.s?function(){return t.default}:function(){return t};return h.d(e,"a",e),e},h.Pit=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},h.xO="",h(h.yO=100);function h(t){if(g[t])return g[t].exports;var e=g[t]={Hit:t,Lit:!1,exports:{}};return f[t].call(e.exports,e,e.exports,h),e.Lit=!0,e.exports}var f,g}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.DEFAULT="default",t.HIVE="hive",t.HIVE_WEB_RTC="hiveWebRtc",t.KSDN="kollective"}(e.PlayerPlaybackType||(e.PlayerPlaybackType={}))},function(t,e,i){"use strict";t.exports=function(t,e){return function(){for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];return t.apply(e,i)}}},function(t,e,i){"use strict";var r=i(8);function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,i){if(!e)return t;var o;if(i)o=i(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(n(e)+"="+n(t))})))})),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},function(t,e,i){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,i){"use strict";(function(e){var r=i(8),n=i(161),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,u={adapter:("undefined"!=typeof XMLHttpRequest?a=i(70):void 0!==e&&"[object process]"===Object.prototype.toString.call(e)&&(a=i(70)),a),transformRequest:[function(t,e){return n(e,"Accept"),n(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){u.headers[t]=r.merge(o)})),t.exports=u}).call(this,i(160))},function(t,e,i){"use strict";var r=i(8),n=i(162),o=i(67),s=i(164),a=i(167),u=i(168),h=i(71);t.exports=function(t){return new Promise((function(e,c){var l=t.data,p=t.headers;r.isFormData(l)&&delete p["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",g=t.auth.password||"";p.Authorization="Basic "+btoa(d+":"+g)}var v=s(t.baseURL,t.url);if(f.open(t.method.toUpperCase(),o(v,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:i,config:t,request:f};n(e,c,r),f=null}},f.onabort=function(){f&&(c(h("Request aborted",t,"ECONNABORTED",f)),f=null)},f.onerror=function(){c(h("Network Error",t,null,f)),f=null},f.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),c(h(e,t,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var y=i(170),m=(t.withCredentials||u(v))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;m&&(p[t.xsrfHeaderName]=m)}if("setRequestHeader"in f&&r.forEach(p,(function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete p[e]:f.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){f&&(f.abort(),c(t),f=null)})),void 0===l&&(l=null),f.send(l)}))}},function(t,e,i){"use strict";var r=i(163);t.exports=function(t,e,i,n,o){var s=new Error(t);return r(s,e,i,n,o)}},function(t,e,i){"use strict";var r=i(8);t.exports=function(t,e){e=e||{};var i={},n=["url","method","params","data"],o=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(n,(function(t){void 0!==e[t]&&(i[t]=e[t])})),r.forEach(o,(function(n){r.isObject(e[n])?i[n]=r.deepMerge(t[n],e[n]):void 0!==e[n]?i[n]=e[n]:r.isObject(t[n])?i[n]=r.deepMerge(t[n]):void 0!==t[n]&&(i[n]=t[n])})),r.forEach(s,(function(r){void 0!==e[r]?i[r]=e[r]:void 0!==t[r]&&(i[r]=t[r])}));var a=n.concat(o).concat(s),u=Object.keys(e).filter((function(t){return-1===a.indexOf(t)}));return r.forEach(u,(function(r){void 0!==e[r]?i[r]=e[r]:void 0!==t[r]&&(i[r]=t[r])})),i}},function(t,e,i){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e){t.exports=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}},function(t,e){var i={getCdnTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)t+=Streamroot.peerAgents[e].stats.cdn;return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach((function(e){t+=e.stats.currentContent.cdnDownload})),t}}if("undefined"!=typeof peer5&&peer5.getStats)return peer5.getStats().totalHttpDownloaded;if("undefined"!=typeof teltoo&&teltoo.getStats){var i=teltoo.getStats();return i.totalReceivedBytes-i.p2pReceivedBytes}return null},getP2PTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)Streamroot.peerAgents[e].isP2PEnabled&&(t+=Streamroot.peerAgents[e].stats.p2p);return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach((function(e){t+=e.stats.currentContent.dnaDownload})),t}}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats?teltoo.getStats().p2pReceivedBytes:null},getUploadTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)Streamroot.peerAgents[e].isP2PEnabled&&(t+=Streamroot.peerAgents[e].stats.upload);return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach((function(e){t+=e.stats.currentContent.dnaUpload})),t}}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PUploaded:null},getIsP2PEnabled:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=!1;for(var e in Streamroot.peerAgents)t=t||Streamroot.peerAgents[e].isP2PEnabled;return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=!1;return Streamroot.instances.forEach((function(e){t=t||e.dnaDownloadEnabled||e.dnaUploadEnabled})),t}}return"undefined"!=typeof peer5&&peer5.isEnabled?peer5.isEnabled():null}};t.exports=i},function(t,e,i){var r=i(15),n=i(21),o=i(1),s=i(9),a=i(11),u=n.extend({constructor:function(t,e){n.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=(new Date).getTime(),this._session=e,this._httpSecure=t.options["app.https"]||t.options.httpSecure,this._plugin=t,this.transformName="View"},init:function(){if(this._plugin.options&&this._plugin.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,this.done(),null;if((new Date).getTime()<this._plugin.sessionExpire+(Number(this._plugin.getDataTime())||0)&&this._plugin.getStoredData())return this.setData(this._plugin.getStoredData()),null;var t=a.Service.DATA,e={apiVersion:"v7",outputformat:"json"};null!==(e=this._plugin.requestBuilder.buildParams(e,t))&&(o.notice(t+" "+e.system),"nicetest"===e.system&&o.error("No accountCode has been set. Please set your accountCode inside plugin's options."),new r(this._plugin.getHost(),t,e).on(r.Event.SUCCESS,this._receiveData.bind(this)).on(r.Event.ERROR,this._failedData.bind(this)).send())},setData:function(t){try{var e=JSON.parse(t);this.response.msg=t,this.response.host=s.addProtocol(e.q.h,this._httpSecure),this.response.code=e.q.c,this.response.pingTime=e.q.pt||5,this.response.beatTime=e.q.i&&e.q.i.bt||30,this.response.sessionExpire=e.q.i&&e.q.i.exp||300,e.q.f&&(this.response.youboraId=e.q.f.yid),this._plugin.storage.setLocal("sessionExpire",this.response.sessionExpire),this.done()}catch(t){o.error("Fastdata response is invalid.")}},_receiveData:function(t,e){var i=t.getXHR().response;this.setData(i)},_failedData:function(t,e){o.error("Fastdata request has failed.")},nextView:function(){return this._viewIndex=(new Date).getTime(),this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},getSessionId:function(){return this._session},setSessionId:function(t){this._session=t},getParentIdVideo:function(){return this._session},getParentIdSession:function(){return this._parentId},setParentId:function(t){this._parentId=t},getSessionRoot:function(){return this._plugin.infinity&&this._plugin.infinity.isActive()?this._session:null},setSessionRoot:function(t){this._session=t},parse:function(t){t.host=t.host||this.response.host,t.params.system=this._plugin.getAccountCode(),t.params.sessionRoot=t.params.sessionRoot||this.getSessionRoot(),-1!==u.EventList.PingTime.indexOf(t.service)&&(t.params.pingTime=t.params.pingTime||this.response.pingTime),a.Service.SESSION_STOP===t.service&&(t.params.sessionRoot=this._session),-1===u.EventList.Infinity.indexOf(t.service)?(t.params.code=t.params.code||this.getViewCode(),t.params.sessionRoot||(t.params.sessionRoot=t.params.code)):(t.params.sessionId=t.params.sessionId||this.getSessionId(),t.params.sessionRoot||(t.params.sessionRoot=t.params.sessionId)),a.Service.BEAT===t.service&&(t.params.sessions='["'+(t.params.sessionId||this.getSessionId())+'"]'),-1!==[a.Service.START,a.Service.INIT,a.Service.ERROR].indexOf(t.service)&&this._plugin.storage.getLocal("infinityStarted")&&(t.params.parentId=t.params.parentId||this.getParentIdVideo(),t.params.navContext=t.params.navContext||this._plugin.getContext()),a.Service.SESSION_START===t.service&&(t.params.parentId=t.params.parentId||this.getParentIdSession())}},{EventList:{CreateView:[a.Service.START,a.Service.INIT,a.Service.ERROR],Infinity:[a.Service.NAV,a.Service.SESSION_START,a.Service.SESSION_STOP,a.Service.EVENT,a.Service.BEAT],PingTime:[a.Service.START,a.Service.PING]}});t.exports=u},function(t,e,i){var r=i(21),n=i(78),o=i(79),s=i(184),a=i(80),u=i(1),h=i(11),c=r.extend({constructor:function(t){c.__super__.constructor.apply(this,arguments),this.isDone=!1,this._plugin=t,this._realResource=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){return this._plugin&&this._plugin.options&&this._plugin.options["content.resource"]&&!this._plugin.options["parse.locationHeader"]&&!this._plugin.options["parse.hls"]&&!this._plugin.options["parse.dashLocation"]?this._plugin.options["content.resource"]:this._realResource||this._initResource},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(t){this._isBusy||this.isDone||(this._isBusy=!0,this._initResource=t,this._hlsEnabled=this._plugin.isParseHls(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._locHeaderEnabled=this._plugin.isLocHeader(),this._dashLocationEnabled=this._plugin.isDashLoc(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),this._cdnNameHeader=this._plugin.getParseCdnNodeNameHeader(),o.setBalancerHeaderName(this._cdnNameHeader),this._setTimeout(),this._locHeaderEnabled&&this._parseLocHeader(),this._hlsEnabled?this._parseHLS():this._dashLocationEnabled?this._dashLocationParse():this._cdnEnabled?this._parseCDN():this.done())},done:function(){this.isDone=!1,r.prototype.done.apply(this,arguments)},_setTimeout:function(){this._parseTimeout=setTimeout(function(){this._isBusy&&(this.done(),u.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this),3e3)},_parseLocHeader:function(){var t=new a;t.parse(this._initResource),t.on(a.Event.DONE,function(){this._realResource=t.getResource(),this.done()}.bind(this))},_parseHLS:function(){var t=new n;t.on(n.Event.DONE,function(){this._realResource=t.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),t.parse(this._initResource)},_dashLocationParse:function(){var t=new s;t.on(s.Event.DONE,function(){this._realResource=t.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),t.parse(this._initResource)},_parseCDN:function(){if(this._cdnList.length>0){var t=this._cdnList.shift();if(this.getNodeHost())return;var e=o.create(t);e?(e.on(o.Event.DONE,function(){this._responses=e.getResponses(),this._cdnName=e.getParsedCdnName(),this._cdnNodeHost=e.getParsedNodeHost(),this._cdnNodeTypeString=e.getParsedNodeTypeString(),this._cdnNodeType=e.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),e.parse(this.getResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(t){if(t.service===h.Service.START){var e=this._plugin.requestBuilder.lastSent;e.mediaResource=t.params.mediaResource=this.getResource(),this._cdnEnabled&&(e.cdn=t.params.cdn=t.params.cdn||this.getCdnName(),e.nodeHost=t.params.nodeHost=this.getNodeHost(),e.nodeType=t.params.nodeType=this.getNodeType(),e.nodeTypeString=t.params.nodeTypeString=this.getNodeTypeString())}}});t.exports=c},function(t,e,i){var r=i(15),n=i(14),o=i(1),s=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(s.Event.DONE)},parse:function(t,e){e=e||"";try{var i=/((\S*?)(\.m3u8|\.m3u|\.ts|\.mp4)((\?|\;)\S*|\n|\r|$))/i.exec(t)}catch(t){o.warn("Parse HLS Regex failed",t),this.done()}if(null!==i){var n=i[1].trim(),s="",a=e.lastIndexOf("/");if(0!==n.indexOf("http")&&-1!==a&&(n=e.slice(0,a)+"/"+n,s=e.slice(0,a)+"/"),".m3u8"===i[3]||".m3u"===i[3]){var u=new r(n,null,null,{cache:!0});u.on(r.Event.SUCCESS,function(t){this.parse(t.getXHR().responseText,s+i[2])}.bind(this)),u.on(r.Event.ERROR,function(t){this.done()}.bind(this)),u.send()}else this._realResource=n,this.done()}else this.done()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=s},function(t,e,i){var r=i(14),n=i(1),o=i(9),s=i(15),a=r.extend({constructor:function(t){this._options=o.assign({cdnName:null,parsers:[],requestMethod:"HEAD",requestHeaders:{},parseType:function(){return 0}},t),this._responses={}},done:function(){this.emit(a.Event.DONE)},addParser:function(t){return this._options.parsers.push(t),this},setCdnName:function(t){return this._options.cdnName=t,this},setRequestMethod:function(t){return this._options.requestMethod=t,this},setRequestHeader:function(t,e){return this._options.requestHeaders[t]=e,this},setParseType:function(t){return this._options.parseType=t,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(t,e){this._responses=e||{};var i=JSON.stringify(this._options.requestHeaders);this._responses[i]?this._parseResponse(this._responses[i]):this._requestResponse(t)},_requestResponse:function(t){var e=JSON.stringify(this._options.requestHeaders),i=new s(t,null,null,{method:this._options.requestMethod,maxRetries:0,requestHeaders:this._options.requestHeaders});i.on(s.Event.SUCCESS,function(t){this._responses[e]=t.getXHR().getAllResponseHeaders(),this._parseResponse(this._responses[e])}.bind(this)),i.on(s.Event.ERROR,function(t){this.done()}.bind(this)),i.send()},_parseResponse:function(t){this._options.parsers.forEach(function(e){t.split("\n").forEach(function(t){var i=t.indexOf(":");-1!==i&&(t.slice(0,i)===e.headerName&&this._executeParser(e,t.slice(i+1)))}.bind(this))}.bind(this)),this.done()},_executeParser:function(t,e){try{var i=t.regex.exec(e.trim());if(null!==i)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),t.element){case a.ElementType.HOST:this._cdnNodeHost=i[1];break;case a.ElementType.TYPE:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case a.ElementType.HOST_AND_TYPE:this._cdnNodeHost=i[1],this._cdnNodeTypeString=i[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case a.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=i[2];break;case a.ElementType.NAME:this._cdnName=i[1].toUpperCase()}}catch(t){n.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+e)}}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(t){a._cdnConfigs.Balancer.parsers[0].headerName=t},create:function(t){if(a._cdnConfigs[t])return new a(a._cdnConfigs[t]);n.warn("Tried to create an unexisting CdnParser named "+t)},add:function(t,e){a._cdnConfigs[t]=e}});a.add("Level3",i(177)),a.add("Cloudfront",i(178)),a.add("Akamai",i(179)),a.add("Highwinds",i(180)),a.add("Fastly",i(181)),a.add("Telefonica",i(182)),a.add("Balancer",i(183)),t.exports=a},function(t,e,i){var r=i(14),n=(i(1),i(9),i(15)),o=r.extend({constructor:function(){this._realResource=null},done:function(){this.emit(o.Event.DONE)},parse:function(t){var e=new n(t,null,null,{method:"HEAD",maxRetries:0,requestHeaders:{},cache:!0});e.on(n.Event.SUCCESS,function(t){this._realResource=t.getXHR().responseURL,this.done()}.bind(this)),e.on(n.Event.ERROR,function(t){this.done()}.bind(this)),e.send()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=o},function(t,e,i){i(15);var r=i(21),n=(i(1),i(9),i(11),r.extend({constructor:function(t,e){this._sendRequest=!1,this._isBusy=!1,this.plugin=t,this.session=e,this.transformName="Offline"},parse:function(t){t&&this.plugin.offlineStorage.addEvent(t.service,t.params)},hasToSend:function(t){return!1},getState:function(){return r.STATE_OFFLINE}}));t.exports=n},function(t,e,i){var r=i(3).extend({constructor:function(t){this.enabled=!0,this.httpSecure=null,this.host="a-fds.youborafds01.com",this.accountCode="nicetest",this.username=null,this.anonymousUser=null,this.obfuscateIp=!1,this.preventZombieViews=!0,this.userType=null,this.offline=!1,this.referer=null,this.experiments=[],this.disableCookies=!0,this["user.email"]=null,this["user.type"]=null,this["user.name"]=null,this["user.obfuscateIp"]=!1,this["user.anonymousId"]=null,this["parse.hls"]=!1,this["parse.cdnNameHeader"]="x-cdn-forward",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Cloudfront","Level3","Fastly","Highwinds","Telefonica"],this["parse.locationHeader"]=!1,this["parse.dashLocation"]=!1,this["network.ip"]=null,this["network.isp"]=null,this["network.connectionType"]=null,this["device.code"]=null,this["device.model"]=null,this["device.brand"]=null,this["device.type"]=null,this["device.name"]=null,this["device.osName"]=null,this["device.osVersion"]=null,this["device.browserName"]=null,this["device.browserVersion"]=null,this["device.browserType"]=null,this["device.browserEngine"]=null,this["content.transactionCode"]=null,this["content.resource"]=null,this["content.isLive"]=null,this["content.isLive.noSeek"]=!1,this["content.title"]=null,this["content.title2"]=null,this["content.program"]=null,this["content.duration"]=null,this["content.fps"]=null,this["content.bitrate"]=null,this["content.throughput"]=null,this["content.rendition"]=null,this["content.cdn"]=null,this["content.cdnNode"]=null,this["content.cdnType"]=null,this["content.metadata"]={},this["content.metrics"]={},this["content.streamingProtocol"]=null,this["content.package"]=null,this["content.saga"]=null,this["content.tvShow"]=null,this["content.season"]=null,this["content.episodeTitle"]=null,this["content.channel"]=null,this["content.id"]=null,this["content.imdbId"]=null,this["content.gracenoteId"]=null,this["content.type"]=null,this["content.genre"]=null,this["content.language"]=null,this["content.subtitles"]=null,this["content.contractedResolution"]=null,this["content.cost"]=null,this["content.price"]=null,this["content.playbackType"]=null,this["content.drm"]=null,this["content.encoding.videoCodec"]=null,this["content.encoding.audioCodec"]=null,this["content.encoding.codecSettings"]=null,this["content.encoding.codecProfile"]=null,this["content.encoding.containerFormat"]=null,this["ad.metadata"]={},this["ad.campaign"]=null,this["ad.resource"]=null,this["ad.title"]=null,this["ad.ignore"]=!1,this["ad.afterStop"]=0,this["app.name"]=null,this["app.releaseVersion"]=null,this["app.https"]=!1,this["background.enabled"]=!0,this["background.settings"]=null,this["background.settings.android"]="stop",this["background.settings.iphone"]="stop",this["background.settings.iOS"]=null,this["background.settings.desktop"]=null,this["background.settings.tv"]="stop",this["smartswitch.configCode"]=null,this["smartswitch.groupCode"]=null,this["smartswitch.contractCode"]=null,this["extraparam.1"]=null,this["extraparam.2"]=null,this["extraparam.3"]=null,this["extraparam.4"]=null,this["extraparam.5"]=null,this["extraparam.6"]=null,this["extraparam.7"]=null,this["extraparam.8"]=null,this["extraparam.9"]=null,this["extraparam.10"]=null,this["extraparam.11"]=null,this["extraparam.12"]=null,this["extraparam.13"]=null,this["extraparam.14"]=null,this["extraparam.15"]=null,this["extraparam.16"]=null,this["extraparam.17"]=null,this["extraparam.18"]=null,this["extraparam.19"]=null,this["extraparam.20"]=null,this["ad.extraparam.1"]=null,this["ad.extraparam.2"]=null,this["ad.extraparam.3"]=null,this["ad.extraparam.4"]=null,this["ad.extraparam.5"]=null,this["ad.extraparam.6"]=null,this["ad.extraparam.7"]=null,this["ad.extraparam.8"]=null,this["ad.extraparam.9"]=null,this["ad.extraparam.10"]=null,this["content.customDimension.1"]=null,this["content.customDimension.2"]=null,this["content.customDimension.3"]=null,this["content.customDimension.4"]=null,this["content.customDimension.5"]=null,this["content.customDimension.6"]=null,this["content.customDimension.7"]=null,this["content.customDimension.8"]=null,this["content.customDimension.9"]=null,this["content.customDimension.10"]=null,this["content.customDimension.11"]=null,this["content.customDimension.12"]=null,this["content.customDimension.13"]=null,this["content.customDimension.14"]=null,this["content.customDimension.15"]=null,this["content.customDimension.16"]=null,this["content.customDimension.17"]=null,this["content.customDimension.18"]=null,this["content.customDimension.19"]=null,this["content.customDimension.20"]=null,this["ad.customDimension.1"]=null,this["ad.customDimension.2"]=null,this["ad.customDimension.3"]=null,this["ad.customDimension.4"]=null,this["ad.customDimension.5"]=null,this["ad.customDimension.6"]=null,this["ad.customDimension.7"]=null,this["ad.customDimension.8"]=null,this["ad.customDimension.9"]=null,this["ad.customDimension.10"]=null,this.forceInit=!1,this["session.metrics"]={},this["session.context"]=!1,this.waitForMetadata=!1,this.pendingMetadata=[],this.setOptions(t)},setOptions:function(t,e){if(e=e||this,void 0!==t)for(var i in t)"object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])||"parse.cdnNode.list"!==i?e[i]=t[i]:this.setOptions(t[i],e[i])},setExtraParams:function(t){if("object"==typeof t&&t.length){for(t.length>=20&&(t=t.slice(0,20));t.length<20;)t.push(null);t.forEach(function(t,e){this["content.customDimension."+(e+1).toString()]=t}.bind(this))}},setCustomDimensions:function(){r.prototype.setExtraParams.apply(this,arguments)},setAdExtraParams:function(t){if("object"==typeof t&&t.length){for(t.length>=10&&(t=t.slice(0,10));t.length<10;)t.push(null);t.forEach(function(t,e){this["ad.customDimension."+(e+1).toString()]=t}.bind(this))}},setAdCustomDimensions:function(){r.prototype.setAdExtraParams.apply(this,arguments)}});t.exports=r},function(t,e,i){var r=i(3).extend({constructor:function(t){this.plugin=t,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(t){this.isBackgroundDetectorStarted?t!=this.windowObject&&(this.stopDetection(),this.isBackgroundDetectorStarted=!1,this.startDetection(t)):(t&&(this.windowObject=t),this.windowObject&&this.windowObject.document&&(this.isBackgroundDetectorStarted=!0,this.windowObject.document.addEventListener("visibilitychange",this.listenerReference)))},stopDetection:function(){this.isBackgroundDetectorStarted&&(this.windowObject.document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1,this.windowObject="undefined"!=typeof window?window:void 0},_visibilityListener:function(t){if("hidden"===this.windowObject.document.visibilityState){if(this.isInBackground=!0,"string"==typeof(i=this._getSettings())){switch(i){case"stop":this._fireStop();break;case"pause":this._firePause()}if(null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped")){this.lastBeatTime=(new Date).getTime();var e=this.plugin._beat.chrono.startTime?this.lastBeatTime-this.plugin._beat.chrono.startTime:0;this.plugin._sendBeat(e),this.plugin._beat.stop()}}}else if("visible"===this.windowObject.document.visibilityState){var i;if(this.isInBackground=!1,"string"==typeof(i=this._getSettings())&&i&&null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped")){var r=(new Date).getTime();r-this.lastBeatTime<this.plugin.sessionExpire?(this.plugin._sendBeat(r-this.lastBeatTime),this.plugin._beat.start()):(this.plugin.restartViewTransform(),this.plugin.infinity.begin())}}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iOS"]||this.plugin.options["background.settings.iphone"]:void 0},_firePause:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded?this.adsAdapter.firePause():this.contentAdapter&&this.contentAdapter.flags.isStarted&&!this.contentAdapter.flags.isEnded&&this.contentAdapter.firePause()},_fireStop:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded&&this.adsAdapter.fireStop(),this.contentAdapter?this.contentAdapter.fireStop({end:!0}):this.plugin.fireStop({end:!0})},canBlockStartCalls:function(){return this.plugin.backgroundDetector.isInBackground&&!0===this.plugin.options["background.enabled"]&&this.plugin.backgroundDetector._getSettings()}});t.exports=r},function(t,e,i){var r=i(3).extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTV=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTV&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTV)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTV}});t.exports=r},function(t,e,i){var r=i(189),n=i(3),o=i(190),s=n.extend({constructor:function(t){this.plugin=t,this.dataExtractor=new r,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var t=this.dataExtractor.getAllData();this.key=this._hashFunction(t),this.plugin.storage.setLocal("youboraFingerprint",this.key)}},generateHashUUID:function(){var t=this.dataExtractor.getNonRandomData();this.uuid=this._hashFunction(t)},getKey:function(){return this.key||this.generateHashKey(),this.key},getUUID:function(){return this.uuid||this.generateHashUUID(),this.uuid},_hashFunction:function(t){var e="";return e="string"!=typeof t?JSON.stringify(t):t,o(e)},_reset:function(){this.key=void 0},getPreviousKey:function(){return this.plugin.storage.getLocal("youboraFingerprint")}});t.exports=s},function(t,e,i){var r=i(3),n=i(37),o=i(27),s=r.extend({constructor:function(t,e,i){this._adapter=t,this._seekEnabled=e&s.Type.SEEK,this._bufferEnabled=e&s.Type.BUFFER,i=i||800,this._chrono=new o,this._lastPlayhead=0,i>0&&(this._timer=new n(this.progress.bind(this),i))},start:function(){this._timer.start()},stop:function(){this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var t=this._chrono.stop();this._chrono.start();var e=t*s.kBUFFER_THRESHOLD_RATIO,i=t*s.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!=this._adapter.getPlayrate()&&(e*=this._adapter.getPlayrate(),i*=this._adapter.getPlayrate());var r=this._getPlayhead(),n=1e3*Math.abs(this._lastPlayhead-r);n<e?this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1):n>i?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1):(this._seekEnabled&&this._adapter.fireSeekEnd(),this._bufferEnabled&&this._adapter.fireBufferEnd()),this._lastPlayhead=r},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});t.exports=s},function(t,e,i){var r=n,n={noConflict:function(){return n=r,this}};n.VERSION=i(33),n.polyfills=i(205),n.polyfills(),n.Object=i(4),n.Emitter=i(16),n.Log=i(2),n.Log.loadLevelFromUrl(),n.Util=i(10),n.HybridNetwork=i(89),n.Chrono=i(28),n.Timer=i(43),n.Constants=i(12),n.Request=i(17),n.Communication=i(44),n.Transform=i(22),n.ViewTransform=i(90),n.ResourceTransform=i(91),n.CdnParser=i(93),n.HlsParser=i(92),n.OfflineParser=i(95),n.LocationheaderParser=i(94),n.Options=i(96),n.Plugin=i(215),n.Storage=i(45),n.RequestBuilder=i(46),n.PlayheadMonitor=i(100),n.Adapter=i(34),n.StandardAdapter=i(232),n.adapters={},n.Infinity=i(47),n.BackgroundDetector=i(97),n.DeviceDetector=i(98),n.Fingerprint=i(99),n.registerAdapter=function(t,e){this.adapters[t]=e}.bind(n),n.unregisterAdapter=function(t){this.adapters[t]=null}.bind(n),t.exports=n},function(t,e){t.exports=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}},function(t,e){var i={getCdnTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)t+=Streamroot.peerAgents[e].stats.cdn;return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach((function(e){t+=e.stats.currentContent.cdnDownload})),t}}if("undefined"!=typeof peer5&&peer5.getStats)return peer5.getStats().totalHttpDownloaded;if("undefined"!=typeof teltoo&&teltoo.getStats){var i=teltoo.getStats();return i.totalReceivedBytes-i.p2pReceivedBytes}return null},getP2PTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)Streamroot.peerAgents[e].isP2PEnabled&&(t+=Streamroot.peerAgents[e].stats.p2p);return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach((function(e){t+=e.stats.currentContent.dnaDownload})),t}}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats?teltoo.getStats().p2pReceivedBytes:null},getUploadTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)Streamroot.peerAgents[e].isP2PEnabled&&(t+=Streamroot.peerAgents[e].stats.upload);return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach((function(e){t+=e.stats.currentContent.dnaUpload})),t}}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PUploaded:null},getIsP2PEnabled:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=!1;for(var e in Streamroot.peerAgents)t=t||Streamroot.peerAgents[e].isP2PEnabled;return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=!1;return Streamroot.instances.forEach((function(e){t=t||e.dnaDownloadEnabled||e.dnaUploadEnabled})),t}}return"undefined"!=typeof peer5&&peer5.isEnabled?peer5.isEnabled():null}};t.exports=i},function(t,e,i){var r=i(17),n=i(22),o=i(2),s=i(10),a=i(12),u=n.extend({constructor:function(t,e){n.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=(new Date).getTime(),this._session=e,this._httpSecure=t.options["app.https"]||t.options.httpSecure,this._plugin=t,this.transformName="View"},init:function(){if(this._plugin.options&&this._plugin.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,this.done(),null;if((new Date).getTime()<this._plugin.sessionExpire+(Number(this._plugin.getDataTime())||0)&&this._plugin.getStoredData())return this.setData(this._plugin.getStoredData()),null;var t=a.Service.DATA,e={apiVersion:"v7",outputformat:"json"};null!==(e=this._plugin.requestBuilder.buildParams(e,t))&&(o.notice(t+" "+e.system),"nicetest"===e.system&&o.error("No accountCode has been set. Please set your accountCode inside plugin's options."),new r(this._plugin.getHost(),t,e).on(r.Event.SUCCESS,this._receiveData.bind(this)).on(r.Event.ERROR,this._failedData.bind(this)).send())},setData:function(t){try{var e=JSON.parse(t);this.response.msg=t,this.response.host=s.addProtocol(e.q.h,this._httpSecure),this.response.code=e.q.c,this.response.pingTime=e.q.pt||5,this.response.beatTime=e.q.i&&e.q.i.bt||30,this.response.sessionExpire=e.q.i&&e.q.i.exp||300,e.q.f&&(this.response.youboraId=e.q.f.yid),this._plugin.storage.setLocal("sessionExpire",this.response.sessionExpire),this.done()}catch(t){o.error("Fastdata response is invalid.")}},_receiveData:function(t,e){var i=t.getXHR().response;this.setData(i)},_failedData:function(t,e){o.error("Fastdata request has failed.")},nextView:function(){return this._viewIndex=(new Date).getTime(),this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},getSessionId:function(){return this._session},setSessionId:function(t){this._session=t},getParentIdVideo:function(){return this._session},getParentIdSession:function(){return this._parentId},setParentId:function(t){this._parentId=t},getSessionRoot:function(){return this._plugin.infinity&&this._plugin.infinity.isActive()?this._session:null},setSessionRoot:function(t){this._session=t},parse:function(t){t.host=t.host||this.response.host,t.params.system=this._plugin.getAccountCode(),t.params.sessionRoot=t.params.sessionRoot||this.getSessionRoot(),-1!==u.EventList.PingTime.indexOf(t.service)&&(t.params.pingTime=t.params.pingTime||this.response.pingTime),a.Service.SESSION_STOP===t.service&&(t.params.sessionRoot=this._session),-1===u.EventList.Infinity.indexOf(t.service)?(t.params.code=t.params.code||this.getViewCode(),t.params.sessionRoot||(t.params.sessionRoot=t.params.code)):(t.params.sessionId=t.params.sessionId||this.getSessionId(),t.params.sessionRoot||(t.params.sessionRoot=t.params.sessionId)),a.Service.BEAT===t.service&&(t.params.sessions='["'+(t.params.sessionId||this.getSessionId())+'"]'),-1!==[a.Service.START,a.Service.INIT,a.Service.ERROR].indexOf(t.service)&&this._plugin.storage.getLocal("infinityStarted")&&(t.params.parentId=t.params.parentId||this.getParentIdVideo(),t.params.navContext=t.params.navContext||this._plugin.getContext()),a.Service.SESSION_START===t.service&&(t.params.parentId=t.params.parentId||this.getParentIdSession())}},{EventList:{CreateView:[a.Service.START,a.Service.INIT,a.Service.ERROR],Infinity:[a.Service.NAV,a.Service.SESSION_START,a.Service.SESSION_STOP,a.Service.EVENT,a.Service.BEAT],PingTime:[a.Service.START,a.Service.PING]}});t.exports=u},function(t,e,i){var r=i(22),n=i(92),o=i(93),s=i(214),a=i(94),u=i(2),h=i(12),c=r.extend({constructor:function(t){c.__super__.constructor.apply(this,arguments),this.isDone=!1,this._plugin=t,this._realResource=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){return this._plugin&&this._plugin.options&&this._plugin.options["content.resource"]&&!this._plugin.options["parse.locationHeader"]&&!this._plugin.options["parse.hls"]&&!this._plugin.options["parse.dashLocation"]?this._plugin.options["content.resource"]:this._realResource||this._initResource},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(t){this._isBusy||this.isDone||(this._isBusy=!0,this._initResource=t,this._hlsEnabled=this._plugin.isParseHls(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._locHeaderEnabled=this._plugin.isLocHeader(),this._dashLocationEnabled=this._plugin.isDashLoc(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),this._cdnNameHeader=this._plugin.getParseCdnNodeNameHeader(),o.setBalancerHeaderName(this._cdnNameHeader),this._setTimeout(),this._locHeaderEnabled&&this._parseLocHeader(),this._hlsEnabled?this._parseHLS():this._dashLocationEnabled?this._dashLocationParse():this._cdnEnabled?this._parseCDN():this.done())},done:function(){this.isDone=!1,r.prototype.done.apply(this,arguments)},_setTimeout:function(){this._parseTimeout=setTimeout(function(){this._isBusy&&(this.done(),u.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this),3e3)},_parseLocHeader:function(){var t=new a;t.parse(this._initResource),t.on(a.Event.DONE,function(){this._realResource=t.getResource(),this.done()}.bind(this))},_parseHLS:function(){var t=new n;t.on(n.Event.DONE,function(){this._realResource=t.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),t.parse(this._initResource)},_dashLocationParse:function(){var t=new s;t.on(s.Event.DONE,function(){this._realResource=t.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),t.parse(this._initResource)},_parseCDN:function(){if(this._cdnList.length>0){var t=this._cdnList.shift();if(this.getNodeHost())return;var e=o.create(t);e?(e.on(o.Event.DONE,function(){this._responses=e.getResponses(),this._cdnName=e.getParsedCdnName(),this._cdnNodeHost=e.getParsedNodeHost(),this._cdnNodeTypeString=e.getParsedNodeTypeString(),this._cdnNodeType=e.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),e.parse(this.getResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(t){if(t.service===h.Service.START){var e=this._plugin.requestBuilder.lastSent;e.mediaResource=t.params.mediaResource=this.getResource(),this._cdnEnabled&&(e.cdn=t.params.cdn=t.params.cdn||this.getCdnName(),e.nodeHost=t.params.nodeHost=this.getNodeHost(),e.nodeType=t.params.nodeType=this.getNodeType(),e.nodeTypeString=t.params.nodeTypeString=this.getNodeTypeString())}}});t.exports=c},function(t,e,i){var r=i(17),n=i(16),o=i(2),s=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(s.Event.DONE)},parse:function(t,e){e=e||"";try{var i=/((\S*?)(\.m3u8|\.m3u|\.ts|\.mp4)((\?|\;)\S*|\n|\r|$))/i.exec(t)}catch(t){o.warn("Parse HLS Regex failed",t),this.done()}if(null!==i){var n=i[1].trim(),s="",a=e.lastIndexOf("/");if(0!==n.indexOf("http")&&-1!==a&&(n=e.slice(0,a)+"/"+n,s=e.slice(0,a)+"/"),".m3u8"===i[3]||".m3u"===i[3]){var u=new r(n,null,null,{cache:!0});u.on(r.Event.SUCCESS,function(t){this.parse(t.getXHR().responseText,s+i[2])}.bind(this)),u.on(r.Event.ERROR,function(t){this.done()}.bind(this)),u.send()}else this._realResource=n,this.done()}else this.done()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=s},function(t,e,i){var r=i(16),n=i(2),o=i(10),s=i(17),a=r.extend({constructor:function(t){this._options=o.assign({cdnName:null,parsers:[],requestMethod:"HEAD",requestHeaders:{},parseType:function(){return 0}},t),this._responses={}},done:function(){this.emit(a.Event.DONE)},addParser:function(t){return this._options.parsers.push(t),this},setCdnName:function(t){return this._options.cdnName=t,this},setRequestMethod:function(t){return this._options.requestMethod=t,this},setRequestHeader:function(t,e){return this._options.requestHeaders[t]=e,this},setParseType:function(t){return this._options.parseType=t,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(t,e){this._responses=e||{};var i=JSON.stringify(this._options.requestHeaders);this._responses[i]?this._parseResponse(this._responses[i]):this._requestResponse(t)},_requestResponse:function(t){var e=JSON.stringify(this._options.requestHeaders),i=new s(t,null,null,{method:this._options.requestMethod,maxRetries:0,requestHeaders:this._options.requestHeaders});i.on(s.Event.SUCCESS,function(t){this._responses[e]=t.getXHR().getAllResponseHeaders(),this._parseResponse(this._responses[e])}.bind(this)),i.on(s.Event.ERROR,function(t){this.done()}.bind(this)),i.send()},_parseResponse:function(t){this._options.parsers.forEach(function(e){t.split("\n").forEach(function(t){var i=t.indexOf(":");-1!==i&&(t.slice(0,i)===e.headerName&&this._executeParser(e,t.slice(i+1)))}.bind(this))}.bind(this)),this.done()},_executeParser:function(t,e){try{var i=t.regex.exec(e.trim());if(null!==i)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),t.element){case a.ElementType.HOST:this._cdnNodeHost=i[1];break;case a.ElementType.TYPE:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case a.ElementType.HOST_AND_TYPE:this._cdnNodeHost=i[1],this._cdnNodeTypeString=i[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case a.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=i[2];break;case a.ElementType.NAME:this._cdnName=i[1].toUpperCase()}}catch(t){n.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+e)}}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(t){a._cdnConfigs.Balancer.parsers[0].headerName=t},create:function(t){if(a._cdnConfigs[t])return new a(a._cdnConfigs[t]);n.warn("Tried to create an unexisting CdnParser named "+t)},add:function(t,e){a._cdnConfigs[t]=e}});a.add("Level3",i(207)),a.add("Cloudfront",i(208)),a.add("Akamai",i(209)),a.add("Highwinds",i(210)),a.add("Fastly",i(211)),a.add("Telefonica",i(212)),a.add("Balancer",i(213)),t.exports=a},function(t,e,i){var r=i(16),n=(i(2),i(10),i(17)),o=r.extend({constructor:function(){this._realResource=null},done:function(){this.emit(o.Event.DONE)},parse:function(t){var e=new n(t,null,null,{method:"HEAD",maxRetries:0,requestHeaders:{},cache:!0});e.on(n.Event.SUCCESS,function(t){this._realResource=t.getXHR().responseURL,this.done()}.bind(this)),e.on(n.Event.ERROR,function(t){this.done()}.bind(this)),e.send()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=o},function(t,e,i){i(17);var r=i(22),n=(i(2),i(10),i(12),r.extend({constructor:function(t,e){this._sendRequest=!1,this._isBusy=!1,this.plugin=t,this.session=e,this.transformName="Offline"},parse:function(t){t&&this.plugin.offlineStorage.addEvent(t.service,t.params)},hasToSend:function(t){return!1},getState:function(){return r.STATE_OFFLINE}}));t.exports=n},function(t,e,i){var r=i(4).extend({constructor:function(t){this.enabled=!0,this.httpSecure=null,this.host="a-fds.youborafds01.com",this.accountCode="nicetest",this.username=null,this.anonymousUser=null,this.obfuscateIp=!1,this.preventZombieViews=!0,this.userType=null,this.offline=!1,this.referer=null,this.experiments=[],this.disableCookies=!0,this["user.email"]=null,this["user.type"]=null,this["user.name"]=null,this["user.obfuscateIp"]=!1,this["user.anonymousId"]=null,this["parse.hls"]=!1,this["parse.cdnNameHeader"]="x-cdn-forward",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Cloudfront","Level3","Fastly","Highwinds","Telefonica"],this["parse.locationHeader"]=!1,this["parse.dashLocation"]=!1,this["network.ip"]=null,this["network.isp"]=null,this["network.connectionType"]=null,this["device.code"]=null,this["device.model"]=null,this["device.brand"]=null,this["device.type"]=null,this["device.name"]=null,this["device.osName"]=null,this["device.osVersion"]=null,this["device.browserName"]=null,this["device.browserVersion"]=null,this["device.browserType"]=null,this["device.browserEngine"]=null,this["content.transactionCode"]=null,this["content.resource"]=null,this["content.isLive"]=null,this["content.isLive.noSeek"]=!1,this["content.title"]=null,this["content.title2"]=null,this["content.program"]=null,this["content.duration"]=null,this["content.fps"]=null,this["content.bitrate"]=null,this["content.throughput"]=null,this["content.rendition"]=null,this["content.cdn"]=null,this["content.cdnNode"]=null,this["content.cdnType"]=null,this["content.metadata"]={},this["content.metrics"]={},this["content.streamingProtocol"]=null,this["content.package"]=null,this["content.saga"]=null,this["content.tvShow"]=null,this["content.season"]=null,this["content.episodeTitle"]=null,this["content.channel"]=null,this["content.id"]=null,this["content.imdbId"]=null,this["content.gracenoteId"]=null,this["content.type"]=null,this["content.genre"]=null,this["content.language"]=null,this["content.subtitles"]=null,this["content.contractedResolution"]=null,this["content.cost"]=null,this["content.price"]=null,this["content.playbackType"]=null,this["content.drm"]=null,this["content.encoding.videoCodec"]=null,this["content.encoding.audioCodec"]=null,this["content.encoding.codecSettings"]=null,this["content.encoding.codecProfile"]=null,this["content.encoding.containerFormat"]=null,this["ad.metadata"]={},this["ad.campaign"]=null,this["ad.resource"]=null,this["ad.title"]=null,this["ad.ignore"]=!1,this["ad.afterStop"]=0,this["app.name"]=null,this["app.releaseVersion"]=null,this["app.https"]=!1,this["background.enabled"]=!0,this["background.settings"]=null,this["background.settings.android"]="stop",this["background.settings.iphone"]="stop",this["background.settings.iOS"]=null,this["background.settings.desktop"]=null,this["background.settings.tv"]="stop",this["smartswitch.configCode"]=null,this["smartswitch.groupCode"]=null,this["smartswitch.contractCode"]=null,this["extraparam.1"]=null,this["extraparam.2"]=null,this["extraparam.3"]=null,this["extraparam.4"]=null,this["extraparam.5"]=null,this["extraparam.6"]=null,this["extraparam.7"]=null,this["extraparam.8"]=null,this["extraparam.9"]=null,this["extraparam.10"]=null,this["extraparam.11"]=null,this["extraparam.12"]=null,this["extraparam.13"]=null,this["extraparam.14"]=null,this["extraparam.15"]=null,this["extraparam.16"]=null,this["extraparam.17"]=null,this["extraparam.18"]=null,this["extraparam.19"]=null,this["extraparam.20"]=null,this["ad.extraparam.1"]=null,this["ad.extraparam.2"]=null,this["ad.extraparam.3"]=null,this["ad.extraparam.4"]=null,this["ad.extraparam.5"]=null,this["ad.extraparam.6"]=null,this["ad.extraparam.7"]=null,this["ad.extraparam.8"]=null,this["ad.extraparam.9"]=null,this["ad.extraparam.10"]=null,this["content.customDimension.1"]=null,this["content.customDimension.2"]=null,this["content.customDimension.3"]=null,this["content.customDimension.4"]=null,this["content.customDimension.5"]=null,this["content.customDimension.6"]=null,this["content.customDimension.7"]=null,this["content.customDimension.8"]=null,this["content.customDimension.9"]=null,this["content.customDimension.10"]=null,this["content.customDimension.11"]=null,this["content.customDimension.12"]=null,this["content.customDimension.13"]=null,this["content.customDimension.14"]=null,this["content.customDimension.15"]=null,this["content.customDimension.16"]=null,this["content.customDimension.17"]=null,this["content.customDimension.18"]=null,this["content.customDimension.19"]=null,this["content.customDimension.20"]=null,this["ad.customDimension.1"]=null,this["ad.customDimension.2"]=null,this["ad.customDimension.3"]=null,this["ad.customDimension.4"]=null,this["ad.customDimension.5"]=null,this["ad.customDimension.6"]=null,this["ad.customDimension.7"]=null,this["ad.customDimension.8"]=null,this["ad.customDimension.9"]=null,this["ad.customDimension.10"]=null,this.forceInit=!1,this["session.metrics"]={},this["session.context"]=!1,this.waitForMetadata=!1,this.pendingMetadata=[],this.setOptions(t)},setOptions:function(t,e){if(e=e||this,void 0!==t)for(var i in t)"object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])||"parse.cdnNode.list"!==i?e[i]=t[i]:this.setOptions(t[i],e[i])},setExtraParams:function(t){if("object"==typeof t&&t.length){for(t.length>=20&&(t=t.slice(0,20));t.length<20;)t.push(null);t.forEach(function(t,e){this["content.customDimension."+(e+1).toString()]=t}.bind(this))}},setCustomDimensions:function(){r.prototype.setExtraParams.apply(this,arguments)},setAdExtraParams:function(t){if("object"==typeof t&&t.length){for(t.length>=10&&(t=t.slice(0,10));t.length<10;)t.push(null);t.forEach(function(t,e){this["ad.customDimension."+(e+1).toString()]=t}.bind(this))}},setAdCustomDimensions:function(){r.prototype.setAdExtraParams.apply(this,arguments)}});t.exports=r},function(t,e,i){var r=i(4).extend({constructor:function(t){this.plugin=t,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(t){this.isBackgroundDetectorStarted?t!=this.windowObject&&(this.stopDetection(),this.isBackgroundDetectorStarted=!1,this.startDetection(t)):(t&&(this.windowObject=t),this.windowObject&&this.windowObject.document&&(this.isBackgroundDetectorStarted=!0,this.windowObject.document.addEventListener("visibilitychange",this.listenerReference)))},stopDetection:function(){this.isBackgroundDetectorStarted&&(this.windowObject.document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1,this.windowObject="undefined"!=typeof window?window:void 0},_visibilityListener:function(t){if("hidden"===this.windowObject.document.visibilityState){if(this.isInBackground=!0,"string"==typeof(i=this._getSettings())){switch(i){case"stop":this._fireStop();break;case"pause":this._firePause()}if(null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped")){this.lastBeatTime=(new Date).getTime();var e=this.plugin._beat.chrono.startTime?this.lastBeatTime-this.plugin._beat.chrono.startTime:0;this.plugin._sendBeat(e),this.plugin._beat.stop()}}}else if("visible"===this.windowObject.document.visibilityState){var i;if(this.isInBackground=!1,"string"==typeof(i=this._getSettings())&&i&&null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped")){var r=(new Date).getTime();r-this.lastBeatTime<this.plugin.sessionExpire?(this.plugin._sendBeat(r-this.lastBeatTime),this.plugin._beat.start()):(this.plugin.restartViewTransform(),this.plugin.infinity.begin())}}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iOS"]||this.plugin.options["background.settings.iphone"]:void 0},_firePause:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded?this.adsAdapter.firePause():this.contentAdapter&&this.contentAdapter.flags.isStarted&&!this.contentAdapter.flags.isEnded&&this.contentAdapter.firePause()},_fireStop:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded&&this.adsAdapter.fireStop(),this.contentAdapter?this.contentAdapter.fireStop({end:!0}):this.plugin.fireStop({end:!0})},canBlockStartCalls:function(){return this.plugin.backgroundDetector.isInBackground&&!0===this.plugin.options["background.enabled"]&&this.plugin.backgroundDetector._getSettings()}});t.exports=r},function(t,e,i){var r=i(4).extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTV=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTV&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTV)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTV}});t.exports=r},function(t,e,i){var r=i(219),n=i(4),o=i(220),s=n.extend({constructor:function(t){this.plugin=t,this.dataExtractor=new r,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var t=this.dataExtractor.getAllData();this.key=this._hashFunction(t),this.plugin.storage.setLocal("youboraFingerprint",this.key)}},generateHashUUID:function(){var t=this.dataExtractor.getNonRandomData();this.uuid=this._hashFunction(t)},getKey:function(){return this.key||this.generateHashKey(),this.key},getUUID:function(){return this.uuid||this.generateHashUUID(),this.uuid},_hashFunction:function(t){var e="";return e="string"!=typeof t?JSON.stringify(t):t,o(e)},_reset:function(){this.key=void 0},getPreviousKey:function(){return this.plugin.storage.getLocal("youboraFingerprint")}});t.exports=s},function(t,e,i){var r=i(4),n=i(43),o=i(28),s=r.extend({constructor:function(t,e,i){this._adapter=t,this._seekEnabled=e&s.Type.SEEK,this._bufferEnabled=e&s.Type.BUFFER,i=i||800,this._chrono=new o,this._lastPlayhead=0,i>0&&(this._timer=new n(this.progress.bind(this),i))},start:function(){this._timer.start()},stop:function(){this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var t=this._chrono.stop();this._chrono.start();var e=t*s.kBUFFER_THRESHOLD_RATIO,i=t*s.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!=this._adapter.getPlayrate()&&(e*=this._adapter.getPlayrate(),i*=this._adapter.getPlayrate());var r=this._getPlayhead(),n=1e3*Math.abs(this._lastPlayhead-r);n<e?this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1):n>i?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1):(this._seekEnabled&&this._adapter.fireSeekEnd(),this._bufferEnabled&&this._adapter.fireBufferEnd()),this._lastPlayhead=r},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});t.exports=s},function(t){t.exports=JSON.parse('{"name":"bitmovin","type":"adapter","tech":"js","author":"Jesus Lopez","version":"6.4.4","built":"2019-05-14","repo":"https://bitbucket.org/npaw/bitmovin-adapter-js","libVersion":"^6.4.28","features":{"buffer":"monitor","seek":"native","getters":["getPlayhead","getPlayrate","getDroppedFrames","getDuration","getBitrate","getRendition","getIsLive","getResource"]},"ads":[{"buffer":"monitor","seek":"monitor","getters":["getDuration","getPosition"],"filename":"nativeads.js"}]}')},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-fullscreentogglebutton",text:"Fullscreen"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=function(){e.isFullscreen()?r.on():r.off()};e.addEventHandler(e.EVENT.ON_FULLSCREEN_ENTER,n),e.addEventHandler(e.EVENT.ON_FULLSCREEN_EXIT,n),this.onClick.subscribe((function(){e.isFullscreen()?e.exitFullscreen():e.enterFullscreen()})),n()},e}(i(19).ToggleButton);e.FullscreenToggleButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-vrtogglebutton",text:"VR"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=function(){var t=e.getConfig();return t.source&&t.source.vr&&"none"!==t.source.vr.contentType},o=function(){return"none"!==e.getVRStatus().contentType},s=function(){n()&&o()?(r.show(),e.getVRStatus().isStereo?r.on():r.off()):r.hide()},a=function(){n()?r.show():r.hide()};e.addEventHandler(e.EVENT.ON_VR_MODE_CHANGED,s),e.addEventHandler(e.EVENT.ON_VR_STEREO_CHANGED,s),e.addEventHandler(e.EVENT.ON_VR_ERROR,s),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,a),e.addEventHandler(e.EVENT.ON_READY,a),this.onClick.subscribe((function(){o()?e.getVRStatus().isStereo?e.setVRStereo(!1):e.setVRStereo(!0):console&&console.log("No VR content")})),a()},e}(i(19).ToggleButton);e.VRToggleButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=i(0),o=i(20),s=i(30),a=i(26);!function(t){t[t.CurrentTime=0]="CurrentTime",t[t.TotalTime=1]="TotalTime",t[t.CurrentAndTotalTime=2]="CurrentAndTotalTime"}(r=e.PlaybackTimeLabelMode||(e.PlaybackTimeLabelMode={}));var u=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-playbacktimelabel",timeLabelMode:r.CurrentAndTotalTime,hideInLivePlayback:!1},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=this.getConfig(),o=!1,u=this.prefixCss("ui-playbacktimelabel-live"),h=this.prefixCss("ui-playbacktimelabel-live-edge"),c=0,l=function(){e.timeShift(0)},p=function(){if(o){var t=e.getTimeShift()<0,i=e.getMaxTimeShift()<0;t||e.isPaused()&&i?r.getDomElement().removeClass(h):r.getDomElement().addClass(h)}},f=new s.PlayerUtils.LiveStreamDetector(e);f.onLiveChanged.subscribe((function(t,i){o=i.live,(o=e.isLive())?(r.getDomElement().addClass(u),r.setText("Live"),n.hideInLivePlayback&&r.hide(),r.onClick.subscribe(l),p()):(r.getDomElement().removeClass(u),r.getDomElement().removeClass(h),r.show(),r.onClick.unsubscribe(l))})),f.detect();var d=function(){o||e.getDuration()===1/0||r.setTime(e.getCurrentTime(),e.getDuration());var t=r.getDomElement().width();t>c&&(c=t,r.getDomElement().css({"min-width":c+"px"}))};e.addEventHandler(e.EVENT.ON_TIME_CHANGED,d),e.addEventHandler(e.EVENT.ON_SEEKED,d),e.addEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,d),e.addEventHandler(e.EVENT.ON_TIME_SHIFT,p),e.addEventHandler(e.EVENT.ON_TIME_SHIFTED,p),e.addEventHandler(e.EVENT.ON_PLAY,p),e.addEventHandler(e.EVENT.ON_PAUSED,p);var g=function(){c=0,r.getDomElement().css({"min-width":null}),r.timeFormat=Math.abs(e.isLive()?e.getMaxTimeShift():e.getDuration())>=3600?a.StringUtils.FORMAT_HHMMSS:a.StringUtils.FORMAT_MMSS,d()};e.addEventHandler(e.EVENT.ON_READY,g),g()},e.prototype.setTime=function(t,e){var i=a.StringUtils.secondsToTime(t,this.timeFormat),n=a.StringUtils.secondsToTime(e,this.timeFormat);switch(this.config.timeLabelMode){case r.CurrentTime:this.setText(""+i);break;case r.TotalTime:this.setText(""+n);break;case r.CurrentAndTotalTime:this.setText(i+" / "+n)}},e.prototype.setTimeFormat=function(t){this.timeFormat=t},e}(o.Label);e.PlaybackTimeLabel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){var i=t.call(this,e)||this;if(!e.settingsPanel)throw new Error("Required SettingsPanel is missing");return i.config=i.mergeConfig(e,{cssClass:"ui-settingstogglebutton",text:"Settings",settingsPanel:null,autoHideWhenNoActiveSettings:!0},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=this.getConfig(),o=n.settingsPanel;if(this.onClick.subscribe((function(){o.toggleHidden()})),o.onShow.subscribe((function(){r.on()})),o.onHide.subscribe((function(){r.off()})),n.autoHideWhenNoActiveSettings){var s=function(){o.hasActiveSettings()?r.isHidden()&&r.show():r.isShown()&&r.hide()};o.onSettingsStateChanged.subscribe(s),s()}},e}(i(19).ToggleButton);e.SettingsToggleButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(7),o=i(13),s=i(29),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.listSelectorEvents={onItemAdded:new o.EventDispatcher,onItemRemoved:new o.EventDispatcher,onItemSelected:new o.EventDispatcher},i.config=i.mergeConfig(e,{items:[],cssClass:"ui-listselector"},i.config),i.items=i.config.items,i}return r.__extends(e,t),e.prototype.getItemIndex=function(t){for(var e in this.items)if(t===this.items[e].key)return parseInt(e);return-1},e.prototype.hasItem=function(t){return this.getItemIndex(t)>-1},e.prototype.addItem=function(t,e){var i={key:t,label:e};this.config.filter&&!this.config.filter(i)||(this.config.translator&&(i.label=this.config.translator(i)),this.removeItem(t),this.items.push(i),this.onItemAddedEvent(t))},e.prototype.removeItem=function(t){var e=this.getItemIndex(t);return e>-1&&(s.ArrayUtils.remove(this.items,this.items[e]),this.onItemRemovedEvent(t),!0)},e.prototype.selectItem=function(t){return t===this.selectedItem||this.getItemIndex(t)>-1&&(this.selectedItem=t,this.onItemSelectedEvent(t),!0)},e.prototype.getSelectedItem=function(){return this.selectedItem},e.prototype.clearItems=function(){var t=this.items;this.items=[],this.selectedItem=null;for(var e=0,i=t;e<i.length;e++){var r=i[e];this.onItemRemovedEvent(r.key)}},e.prototype.itemCount=function(){return Object.keys(this.items).length},e.prototype.onItemAddedEvent=function(t){this.listSelectorEvents.onItemAdded.dispatch(this,t)},e.prototype.onItemRemovedEvent=function(t){this.listSelectorEvents.onItemRemoved.dispatch(this,t)},e.prototype.onItemSelectedEvent=function(t){this.listSelectorEvents.onItemSelected.dispatch(this,t)},Object.defineProperty(e.prototype,"onItemAdded",{get:function(){return this.listSelectorEvents.onItemAdded.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onItemRemoved",{get:function(){return this.listSelectorEvents.onItemRemoved.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onItemSelected",{get:function(){return this.listSelectorEvents.onItemSelected.getEvent()},enumerable:!0,configurable:!0}),e}(n.Component);e.ListSelector=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(56),o=i(108),s=i(109),a=i(110),u=i(111),h=i(112),c=i(113),l=i(114),p=i(115),f=i(116),d=i(237),g=i(118),v=i(119),y=function(t){function e(e){var i=t.call(this,e)||this;i.overlay=e.overlay;var r=new d.SubtitleSettingsManager;return i.config=i.mergeConfig(e,{components:[new n.SettingsPanelItem("Font size",new u.FontSizeSelectBox({overlay:i.overlay,settingsManager:r})),new n.SettingsPanelItem("Font family",new a.FontFamilySelectBox({overlay:i.overlay,settingsManager:r})),new n.SettingsPanelItem("Font color",new o.FontColorSelectBox({overlay:i.overlay,settingsManager:r})),new n.SettingsPanelItem("Font opacity",new s.FontOpacitySelectBox({overlay:i.overlay,settingsManager:r})),new n.SettingsPanelItem("Character edge",new f.CharacterEdgeSelectBox({overlay:i.overlay,settingsManager:r})),new n.SettingsPanelItem("Background color",new h.BackgroundColorSelectBox({overlay:i.overlay,settingsManager:r})),new n.SettingsPanelItem("Background opacity",new c.BackgroundOpacitySelectBox({overlay:i.overlay,settingsManager:r})),new n.SettingsPanelItem("Window color",new l.WindowColorSelectBox({overlay:i.overlay,settingsManager:r})),new n.SettingsPanelItem("Window opacity",new p.WindowOpacitySelectBox({overlay:i.overlay,settingsManager:r})),new n.SettingsPanelItem(new g.SubtitleSettingsCloseButton({subtitleSettingsPanel:i,settingsPanel:e.settingsPanel}),new v.SubtitleSettingsResetButton({settingsManager:r}))]},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.onShow.subscribe((function(){r.overlay.enablePreviewSubtitleLabel()})),this.onHide.subscribe((function(){r.overlay.removePreviewSubtitleLabel()}))},e}(n.SettingsPanel);e.SubtitleSettingsPanel=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("white","white"),this.addItem("black","black"),this.addItem("red","red"),this.addItem("green","green"),this.addItem("blue","blue"),this.addItem("cyan","cyan"),this.addItem("yellow","yellow"),this.addItem("magenta","magenta");var n=function(){r.settingsManager.fontColor.isSet()&&r.settingsManager.fontOpacity.isSet()?r.toggleOverlayClass("fontcolor-"+r.settingsManager.fontColor.value+r.settingsManager.fontOpacity.value):r.toggleOverlayClass(null)};this.onItemSelected.subscribe((function(t,e){r.settingsManager.fontColor.value=e})),this.settingsManager.fontColor.onChanged.subscribe((function(t,e){r.settingsManager.fontColor.isSet()?r.settingsManager.fontOpacity.isSet()||(r.settingsManager.fontOpacity.value="100"):r.settingsManager.fontOpacity.clear(),r.selectItem(e.value),n()})),this.settingsManager.fontOpacity.onChanged.subscribe((function(){n()})),this.settingsManager.fontColor.isSet()&&this.selectItem(this.settingsManager.fontColor.value)},e}(i(18).SubtitleSettingSelectBox);e.FontColorSelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("100","100%"),this.addItem("75","75%"),this.addItem("50","50%"),this.addItem("25","25%"),this.onItemSelected.subscribe((function(t,e){r.settingsManager.fontOpacity.value=e,r.settingsManager.fontOpacity.isSet()?r.settingsManager.fontColor.isSet()||(r.settingsManager.fontColor.value="white"):r.settingsManager.fontColor.clear()})),this.settingsManager.fontOpacity.onChanged.subscribe((function(t,e){r.selectItem(e.value)})),this.settingsManager.fontOpacity.isSet()&&this.selectItem(this.settingsManager.fontOpacity.value)},e}(i(18).SubtitleSettingSelectBox);e.FontOpacitySelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("monospacedserif","monospaced serif"),this.addItem("proportionalserif","proportional serif"),this.addItem("monospacedsansserif","monospaced sans serif"),this.addItem("proportionalsansserif","proportional sans serif"),this.addItem("casual","casual"),this.addItem("cursive","cursive"),this.addItem("smallcapital","small capital"),this.settingsManager.fontFamily.onChanged.subscribe((function(t,e){e.isSet()?r.toggleOverlayClass("fontfamily-"+e.value):r.toggleOverlayClass(null),r.selectItem(e.value)})),this.onItemSelected.subscribe((function(t,e){r.settingsManager.fontFamily.value=e})),this.settingsManager.fontFamily.isSet()&&this.selectItem(this.settingsManager.fontFamily.value)},e}(i(18).SubtitleSettingSelectBox);e.FontFamilySelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("50","50%"),this.addItem("75","75%"),this.addItem("100","100%"),this.addItem("150","150%"),this.addItem("200","200%"),this.addItem("300","300%"),this.addItem("400","400%"),this.settingsManager.fontSize.onChanged.subscribe((function(t,e){e.isSet()?r.toggleOverlayClass("fontsize-"+e.value):r.toggleOverlayClass(null),r.selectItem(e.value)})),this.onItemSelected.subscribe((function(t,e){r.settingsManager.fontSize.value=e})),this.settingsManager.fontSize.isSet()&&this.selectItem(this.settingsManager.fontSize.value)},e}(i(18).SubtitleSettingSelectBox);e.FontSizeSelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("white","white"),this.addItem("black","black"),this.addItem("red","red"),this.addItem("green","green"),this.addItem("blue","blue"),this.addItem("cyan","cyan"),this.addItem("yellow","yellow"),this.addItem("magenta","magenta");var n=function(){r.settingsManager.backgroundColor.isSet()&&r.settingsManager.backgroundOpacity.isSet()?r.toggleOverlayClass("bgcolor-"+r.settingsManager.backgroundColor.value+r.settingsManager.backgroundOpacity.value):r.toggleOverlayClass(null)};this.onItemSelected.subscribe((function(t,e){r.settingsManager.backgroundColor.value=e})),this.settingsManager.backgroundColor.onChanged.subscribe((function(t,e){r.settingsManager.backgroundColor.isSet()?r.settingsManager.backgroundOpacity.isSet()||(r.settingsManager.backgroundOpacity.value="100"):r.settingsManager.backgroundOpacity.clear(),r.selectItem(e.value),n()})),this.settingsManager.backgroundOpacity.onChanged.subscribe((function(){n()})),this.settingsManager.backgroundColor.isSet()&&this.selectItem(this.settingsManager.backgroundColor.value)},e}(i(18).SubtitleSettingSelectBox);e.BackgroundColorSelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("100","100%"),this.addItem("75","75%"),this.addItem("50","50%"),this.addItem("25","25%"),this.addItem("0","0%"),this.onItemSelected.subscribe((function(t,e){r.settingsManager.backgroundOpacity.value=e,r.settingsManager.backgroundOpacity.isSet()?r.settingsManager.backgroundColor.isSet()||(r.settingsManager.backgroundColor.value="black"):r.settingsManager.backgroundColor.clear()})),this.settingsManager.backgroundOpacity.onChanged.subscribe((function(t,e){r.selectItem(e.value)})),this.settingsManager.backgroundOpacity.isSet()&&this.selectItem(this.settingsManager.backgroundOpacity.value)},e}(i(18).SubtitleSettingSelectBox);e.BackgroundOpacitySelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("white","white"),this.addItem("black","black"),this.addItem("red","red"),this.addItem("green","green"),this.addItem("blue","blue"),this.addItem("cyan","cyan"),this.addItem("yellow","yellow"),this.addItem("magenta","magenta");var n=function(){r.settingsManager.windowColor.isSet()&&r.settingsManager.windowOpacity.isSet()?r.toggleOverlayClass("windowcolor-"+r.settingsManager.windowColor.value+r.settingsManager.windowOpacity.value):r.toggleOverlayClass(null)};this.onItemSelected.subscribe((function(t,e){r.settingsManager.windowColor.value=e})),this.settingsManager.windowColor.onChanged.subscribe((function(t,e){r.settingsManager.windowColor.isSet()?r.settingsManager.windowOpacity.isSet()||(r.settingsManager.windowOpacity.value="100"):r.settingsManager.windowOpacity.clear(),r.selectItem(e.value),n()})),this.settingsManager.windowOpacity.onChanged.subscribe((function(){n()})),this.settingsManager.windowColor.isSet()&&this.selectItem(this.settingsManager.windowColor.value)},e}(i(18).SubtitleSettingSelectBox);e.WindowColorSelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("100","100%"),this.addItem("75","75%"),this.addItem("50","50%"),this.addItem("25","25%"),this.addItem("0","0%"),this.onItemSelected.subscribe((function(t,e){r.settingsManager.windowOpacity.value=e,r.settingsManager.windowOpacity.isSet()?r.settingsManager.windowColor.isSet()||(r.settingsManager.windowColor.value="black"):r.settingsManager.windowColor.clear()})),this.settingsManager.windowOpacity.onChanged.subscribe((function(t,e){r.selectItem(e.value)})),this.settingsManager.windowOpacity.isSet()&&this.selectItem(this.settingsManager.windowOpacity.value)},e}(i(18).SubtitleSettingSelectBox);e.WindowOpacitySelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("raised","raised"),this.addItem("depressed","depressed"),this.addItem("uniform","uniform"),this.addItem("dropshadowed","drop shadowed"),this.settingsManager.characterEdge.onChanged.subscribe((function(t,e){e.isSet()?r.toggleOverlayClass("characteredge-"+e.value):r.toggleOverlayClass(null),r.selectItem(e.value)})),this.onItemSelected.subscribe((function(t,e){r.settingsManager.characterEdge.value=e})),this.settingsManager.characterEdge.isSet()&&this.selectItem(this.settingsManager.characterEdge.value)},e}(i(18).SubtitleSettingSelectBox);e.CharacterEdgeSelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e;function i(e,i){t.hasLocalStorage()&&window.localStorage.setItem(e,i)}function r(e){return t.hasLocalStorage()?window.localStorage.getItem(e):null}t.hasLocalStorage=function(){if(e)return e;var t=window.localStorage;try{var i="__storage_test__";t.setItem(i,i),t.removeItem(i),e=!0}catch(i){e=i instanceof DOMException&&(22===i.code||1014===i.code||"QuotaExceededError"===i.name||"NS_ERROR_DOM_QUOTA_REACHED"===i.name)&&0!==t.length}return e},t.setItem=i,t.getItem=r,t.setObject=function(e,r){t.hasLocalStorage()&&i(e,JSON.stringify(r))},t.getObject=function(e){if(t.hasLocalStorage()){var i=r(e);if(e)return JSON.parse(i)}return null}}(e.StorageUtils||(e.StorageUtils={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitlesettingsclosebutton",text:"Back"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe((function(){r.subtitleSettingsPanel.hide(),r.settingsPanel.show()}))},e}(i(59).SubtitleSettingsButton);e.SubtitleSettingsCloseButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitlesettingsresetbutton",text:"Reset"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe((function(){r.config.settingsManager.reset()}))},e}(i(23).Button);e.SubtitleSettingsResetButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(6),s=function(t){function e(e){var i=t.call(this,e)||this;return i.opener=e.opener,i.text=e.text,i.config=i.mergeConfig(e,{cssClass:"ui-label",components:[i.opener]},i.config),i}return r.__extends(e,t),e.prototype.toDomElement=function(){return new o.DOM("span",{id:this.config.id,class:this.getCssClasses()}).append(new o.DOM("span",{}).html(this.text),this.opener.getDomElement())},e}(n.Container);e.SubtitleSettingsLabel=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitlesettingsopenbutton",text:"Subtitles settings"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe((function(){r.subtitleSettingsPanel.show(),r.settingsPanel.hide()}))},e}(i(59).SubtitleSettingsButton);e.SubtitleSettingsOpenButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=function(){var t=e.getAudio();t&&r.selectItem(t.id)},o=function(){var t=e.getAvailableAudio();r.clearItems();for(var i=0,o=t;i<o.length;i++){var s=o[i];r.addItem(s.id,s.label)}n()};this.onItemSelected.subscribe((function(t,i){e.setAudio(i)})),e.addEventHandler(e.EVENT.ON_AUDIO_CHANGED,n),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),e.EVENT.ON_AUDIO_ADDED&&e.EVENT.ON_AUDIO_REMOVED&&(e.addEventHandler(e.EVENT.ON_AUDIO_ADDED,o),e.addEventHandler(e.EVENT.ON_AUDIO_REMOVED,o)),o()},e}(i(24).SelectBox);e.AudioTrackSelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(20),s=i(7),a=i(26),u=i(238),h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.timeLabel=new o.Label({cssClasses:["seekbar-label-time"]}),i.titleLabel=new o.Label({cssClasses:["seekbar-label-title"]}),i.thumbnail=new s.Component({cssClasses:["seekbar-thumbnail"]}),i.thumbnailImageLoader=new u.ImageLoader,i.config=i.mergeConfig(e,{cssClass:"ui-seekbar-label",components:[new n.Container({components:[i.thumbnail,new n.Container({components:[i.titleLabel,i.timeLabel],cssClass:"seekbar-label-metadata"})],cssClass:"seekbar-label-inner"})],hidden:!0},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=[];i.onSeekPreview.subscribeRateLimited((function(t,i){if(e.isLive()){var o=e.getMaxTimeShift(),s=o-o*(i.position/100);r.setTime(s)}else{i.marker?r.setTitleText(i.marker.marker.title):r.setTitleText(null);s=e.getDuration()*(i.position/100);r.setTime(s),r.setThumbnail(e.getThumb(s))}if(n.length>0&&(r.getDomElement().removeClass(n.join(" ")),n=[]),i.marker){var a=(i.marker.marker.cssClasses||[]).map((function(t){return r.prefixCss(t)}));r.getDomElement().addClass(a.join(" ")),n=a}}),100);var o=function(){r.timeFormat=Math.abs(e.isLive()?e.getMaxTimeShift():e.getDuration())>=3600?a.StringUtils.FORMAT_HHMMSS:a.StringUtils.FORMAT_MMSS};e.addEventHandler(e.EVENT.ON_READY,o),o()},e.prototype.setText=function(t){this.timeLabel.setText(t)},e.prototype.setTime=function(t){this.setText(a.StringUtils.secondsToTime(t,this.timeFormat))},e.prototype.setTitleText=function(t){this.titleLabel.setText(t)},e.prototype.setThumbnail=function(t){void 0===t&&(t=null);var e=this.thumbnail.getDomElement();null==t?e.css({"background-image":null,display:null,width:null,height:null}):this.thumbnailImageLoader.load(t.url,(function(i,r,n){var o=100*(r/t.w),s=100*(n/t.h),a=100*(t.x/t.w),u=100*(t.y/t.h),h=1/t.w*t.h;e.css({display:"inherit","background-image":"url("+t.url+")","padding-bottom":100*h+"%","background-size":o+"% "+s+"%","background-position":"-"+a+"% -"+u+"%"})}))},e}(n.Container);e.SeekBarLabel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=function(){var t=e.getSubtitle();t&&r.selectItem(t.id)},o=function(){r.clearItems();for(var t=0,i=e.getAvailableSubtitles();t<i.length;t++){var o=i[t];r.addItem(o.id,o.label)}n()};this.onItemSelected.subscribe((function(t,i){e.setSubtitle("null"===i?null:i)})),e.addEventHandler(e.EVENT.ON_SUBTITLE_ADDED,o),e.addEventHandler(e.EVENT.ON_SUBTITLE_CHANGED,n),e.addEventHandler(e.EVENT.ON_SUBTITLE_REMOVED,o),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),o()},e}(i(24).SelectBox);e.SubtitleSelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(20),s=i(53),a=i(13),u=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.preprocessLabelEventCallback=new a.EventDispatcher,i.previewSubtitleActive=!1,i.previewSubtitle=new h({text:"example subtitle"}),i.config=i.mergeConfig(e,{cssClass:"ui-subtitle-overlay"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(i,r){var n=this;t.prototype.configure.call(this,i,r);var o=new c;this.subtitleManager=o,i.addEventHandler(i.EVENT.ON_CUE_ENTER,(function(t){t.position&&(t.position.row=t.position.row||0,t.position.column=t.position.column||0);var e=o.cueEnter(t);n.preprocessLabelEventCallback.dispatch(t,e),n.previewSubtitleActive&&n.removeComponent(n.previewSubtitle),n.addComponent(e),n.updateComponents(),n.show()})),i.addEventHandler(i.EVENT.ON_CUE_EXIT,(function(t){var e=o.cueExit(t);e&&(n.removeComponent(e),n.updateComponents()),o.hasCues||(n.previewSubtitleActive?(n.addComponent(n.previewSubtitle),n.updateComponents()):n.hide())}));var a=function(){n.hide(),o.clear(),n.removeComponents(),n.updateComponents()};i.addEventHandler(i.EVENT.ON_AUDIO_CHANGED,a),i.addEventHandler(i.EVENT.ON_SUBTITLE_CHANGED,a),i.addEventHandler(i.EVENT.ON_SEEK,a),i.addEventHandler(i.EVENT.ON_TIME_SHIFT,a),i.addEventHandler(i.EVENT.ON_PLAYBACK_FINISHED,a),i.addEventHandler(i.EVENT.ON_SOURCE_UNLOADED,a),r.onComponentShow.subscribe((function(t){t instanceof s.ControlBar&&n.getDomElement().addClass(n.prefixCss(e.CLASS_CONTROLBAR_VISIBLE))})),r.onComponentHide.subscribe((function(t){t instanceof s.ControlBar&&n.getDomElement().removeClass(n.prefixCss(e.CLASS_CONTROLBAR_VISIBLE))})),this.configureCea608Captions(i,r),a()},e.prototype.configureCea608Captions=function(t,i){var r=this,n=0,o=0,s=!0,a=!1,u=function(){var t=new h({text:"X"});t.getDomElement().css({"font-size":"200px","line-height":"200px",visibility:"hidden"}),r.addComponent(t),r.updateComponents(),r.show();var i=t.getDomElement().width(),s=t.getDomElement().height(),a=i/s;r.removeComponent(t),r.updateComponents(),r.subtitleManager.hasCues||r.hide();var u=r.getDomElement().width()-10,c=r.getDomElement().height();if(u/c>i*e.CEA608_NUM_COLUMNS/(s*e.CEA608_NUM_ROWS)){n=c/e.CEA608_NUM_ROWS;var l=u/e.CEA608_NUM_COLUMNS;o=l-n*a}else n=u/e.CEA608_NUM_COLUMNS/a,o=0;for(var p=0,f=r.getComponents();p<f.length;p++){var d=f[p];d instanceof h&&d.getDomElement().css({"font-size":n+"px","letter-spacing":o+"px"})}};t.addEventHandler(t.EVENT.ON_PLAYER_RESIZE,(function(){a?u():s=!0})),this.preprocessLabelEventCallback.subscribe((function(t,i){null!=t.position&&(a||(a=!0,r.getDomElement().addClass(r.prefixCss(e.CLASS_CEA_608)),s&&(u(),s=!1)),i.getDomElement().css({left:t.position.column*e.CEA608_COLUMN_OFFSET+"%",top:t.position.row*e.CEA608_ROW_OFFSET+"%","font-size":n+"px","letter-spacing":o+"px"}))}));var c=function(){r.getDomElement().removeClass(r.prefixCss(e.CLASS_CEA_608)),a=!1};t.addEventHandler(t.EVENT.ON_CUE_EXIT,(function(){r.subtitleManager.hasCues||c()})),t.addEventHandler(t.EVENT.ON_SOURCE_UNLOADED,c),t.addEventHandler(t.EVENT.ON_SUBTITLE_CHANGED,c)},e.prototype.enablePreviewSubtitleLabel=function(){this.previewSubtitleActive=!0,this.subtitleManager.hasCues||(this.addComponent(this.previewSubtitle),this.updateComponents(),this.show())},e.prototype.removePreviewSubtitleLabel=function(){this.previewSubtitleActive=!1,this.removeComponent(this.previewSubtitle),this.updateComponents()},e.CLASS_CONTROLBAR_VISIBLE="controlbar-visible",e.CLASS_CEA_608="cea608",e.CEA608_NUM_ROWS=15,e.CEA608_NUM_COLUMNS=32,e.CEA608_ROW_OFFSET=100/e.CEA608_NUM_ROWS,e.CEA608_COLUMN_OFFSET=100/e.CEA608_NUM_COLUMNS,e}(n.Container);e.SubtitleOverlay=u;var h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitle-label"},i.config),i}return r.__extends(e,t),e}(o.Label),c=function(){function t(){this.activeSubtitleCueMap={},this.activeSubtitleCueCount=0}return t.calculateId=function(t){var e=t.start+"-"+t.text;return t.position&&(e+="-"+t.position.row+"-"+t.position.column),e},t.prototype.cueEnter=function(e){var i=t.calculateId(e),r=new h({text:e.html||e.text});return this.activeSubtitleCueMap[i]=this.activeSubtitleCueMap[i]||[],this.activeSubtitleCueMap[i].push({event:e,label:r}),this.activeSubtitleCueCount++,r},t.prototype.getCues=function(e){var i=t.calculateId(e),r=this.activeSubtitleCueMap[i];return r&&r.length>0?r.map((function(t){return t.label})):null},t.prototype.cueExit=function(e){var i=t.calculateId(e),r=this.activeSubtitleCueMap[i];if(r&&r.length>0){var n=r.shift();return this.activeSubtitleCueCount--,n.label}return null},Object.defineProperty(t.prototype,"cueCount",{get:function(){return this.activeSubtitleCueCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasCues",{get:function(){return this.cueCount>0},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.activeSubtitleCueMap={},this.activeSubtitleCueCount=0},t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-casttogglebutton",text:"Google Cast"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe((function(){e.isCastAvailable()?e.isCasting()?e.castStop():e.castVideo():console&&console.log("Cast unavailable")}));var n=function(){e.isCastAvailable()?r.show():r.hide()};e.addEventHandler(e.EVENT.ON_CAST_AVAILABLE,n),e.addEventHandler(e.EVENT.ON_CAST_WAITING_FOR_DEVICE,(function(){r.on()})),e.addEventHandler(e.EVENT.ON_CAST_STARTED,(function(){r.on()})),e.addEventHandler(e.EVENT.ON_CAST_STOPPED,(function(){r.off()})),n(),e.isCasting()&&this.on()},e}(i(19).ToggleButton);e.CastToggleButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(20),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.statusLabel=new o.Label({cssClass:"ui-cast-status-label"}),i.config=i.mergeConfig(e,{cssClass:"ui-cast-status-overlay",components:[i.statusLabel],hidden:!0},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),e.addEventHandler(e.EVENT.ON_CAST_WAITING_FOR_DEVICE,(function(t){r.show();var e=t.castPayload.deviceName;r.statusLabel.setText("Connecting to <strong>"+e+"</strong>...")})),e.addEventHandler(e.EVENT.ON_CAST_STARTED,(function(t){r.show();var e=t.deviceName;r.statusLabel.setText("Playing on <strong>"+e+"</strong>")})),e.addEventHandler(e.EVENT.ON_CAST_STOPPED,(function(t){r.hide()}))},e}(n.Container);e.CastStatusOverlay=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(20),s=i(239),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.errorLabel=new o.Label({cssClass:"ui-errormessage-label"}),i.tvNoiseBackground=new s.TvNoiseCanvas,i.config=i.mergeConfig(e,{cssClass:"ui-errormessage-overlay",components:[i.tvNoiseBackground,i.errorLabel],hidden:!0},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=this.getConfig();e.addEventHandler(e.EVENT.ON_ERROR,(function(t){var e=t.message;if(n.messages)if("function"==typeof n.messages)e=n.messages(t);else if(n.messages[t.code]){var i=n.messages[t.code];e="string"==typeof i?i:i(t)}r.errorLabel.setText(e),r.tvNoiseBackground.start(),r.show()})),e.addEventHandler(e.EVENT.ON_SOURCE_LOADED,(function(t){r.isShown()&&(r.tvNoiseBackground.stop(),r.hide())}))},e.prototype.release=function(){t.prototype.release.call(this),this.tvNoiseBackground.stop()},e}(n.Container);e.ErrorMessageOverlay=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(61),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-titlebar",hidden:!0,components:[new o.MetadataLabel({content:o.MetadataLabelContent.Title}),new o.MetadataLabel({content:o.MetadataLabelContent.Description})],keepHiddenWithoutMetadata:!1},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);for(var n=this.getConfig(),s=!this.isHidden(),a=!0,u=function(){a=!1;for(var t=0,e=r.getComponents();t<e.length;t++){var i=e[t];if(i instanceof o.MetadataLabel&&!i.isEmpty()){a=!0;break}}r.isShown()?n.keepHiddenWithoutMetadata&&!a&&r.hide():s&&r.show()},h=0,c=this.getComponents();h<c.length;h++){var l=c[h];l instanceof o.MetadataLabel&&l.onTextChanged.subscribe(u)}i.onControlsShow.subscribe((function(){s=!0,n.keepHiddenWithoutMetadata&&!a||r.show()})),i.onControlsHide.subscribe((function(){s=!1,r.hide()})),u()},e}(n.Container);e.TitleBar=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(7),s=i(6),a=i(26),u=i(131),h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.replayButton=new u.HugeReplayButton,i.config=i.mergeConfig(e,{cssClass:"ui-recommendation-overlay",hidden:!0,components:[i.replayButton]},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=function(){for(var t=0,e=r.getComponents().slice();t<e.length;t++){var i=e[t];i instanceof c&&r.removeComponent(i)}r.updateComponents(),r.getDomElement().removeClass(r.prefixCss("recommendations"))},o=function(){n();var t=i.getConfig().recommendations;if(t.length>0){for(var e=1,o=0,s=t;o<s.length;o++){var a=s[o];r.addComponent(new c({itemConfig:a,cssClasses:["recommendation-item-"+e++]}))}r.updateComponents(),r.getDomElement().addClass(r.prefixCss("recommendations"))}};e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,(function(){n(),r.hide()})),e.addEventHandler(e.EVENT.ON_PLAYBACK_FINISHED,(function(){e.isAd()||r.show()})),e.addEventHandler(e.EVENT.ON_PLAY,(function(){r.hide()})),o()},e}(n.Container);e.RecommendationOverlay=h;var c=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-recommendation-item",itemConfig:null},i.config),i}return r.__extends(e,t),e.prototype.toDomElement=function(){var t=this.config.itemConfig,e=new s.DOM("a",{id:this.config.id,class:this.getCssClasses(),href:t.url}).css({"background-image":"url("+t.thumbnail+")"}),i=new s.DOM("div",{class:this.prefixCss("background")});e.append(i);var r=new s.DOM("span",{class:this.prefixCss("title")}).append(new s.DOM("span",{class:this.prefixCss("innertitle")}).html(t.title));e.append(r);var n=new s.DOM("span",{class:this.prefixCss("duration")}).append(new s.DOM("span",{class:this.prefixCss("innerduration")}).html(t.duration?a.StringUtils.secondsToTime(t.duration):""));return e.append(n),e},e}(o.Component)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(23),o=i(6),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-hugereplaybutton",text:"Replay"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i),this.onClick.subscribe((function(){e.play("ui")}))},e.prototype.toDomElement=function(){var e=t.prototype.toDomElement.call(this);return e.append(new o.DOM("div",{class:this.prefixCss("image")})),e},e}(n.Button);e.HugeReplayButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.defaultPlaybackSpeeds=[.25,.5,1,1.5,2],i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i),this.addDefaultItems(),this.onItemSelected.subscribe((function(t,i){e.setPlaybackSpeed(parseFloat(i)),r.selectItem(i)}));var n=function(){var t=e.getPlaybackSpeed();r.setSpeed(t)};e.addEventHandler(e.EVENT.ON_READY,n),e.EVENT.ON_PLAYBACK_SPEED_CHANGED&&e.addEventHandler(e.EVENT.ON_PLAYBACK_SPEED_CHANGED,n)},e.prototype.setSpeed=function(t){this.selectItem(String(t))||(this.clearItems(),this.addDefaultItems([t]),this.selectItem(String(t)))},e.prototype.addDefaultItems=function(t){var e=this;void 0===t&&(t=[]),this.defaultPlaybackSpeeds.concat(t).sort().forEach((function(t){1!==t?e.addItem(String(t),t+"x"):e.addItem(String(t),"Normal")}))},e.prototype.clearItems=function(){this.items=[],this.selectedItem=null},e}(i(24).SelectBox);e.PlaybackSpeedSelectBox=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(7),s=i(25),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.indicators=[new o.Component({tag:"div",cssClass:"ui-buffering-overlay-indicator"}),new o.Component({tag:"div",cssClass:"ui-buffering-overlay-indicator"}),new o.Component({tag:"div",cssClass:"ui-buffering-overlay-indicator"})],i.config=i.mergeConfig(e,{cssClass:"ui-buffering-overlay",hidden:!0,components:i.indicators,showDelayMs:1e3},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=this.getConfig(),o=new s.Timeout(n.showDelayMs,(function(){r.show()})),a=function(){o.clear(),r.hide()};e.addEventHandler(e.EVENT.ON_STALL_STARTED,(function(){o.start()})),e.addEventHandler(e.EVENT.ON_STALL_ENDED,a),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,a),e.isStalled()&&this.show()},e}(n.Container);e.BufferingOverlay=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(135),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.playbackToggleButton=new o.HugePlaybackToggleButton,i.config=i.mergeConfig(e,{cssClass:"ui-playbacktoggle-overlay",components:[i.playbackToggleButton]},i.config),i}return r.__extends(e,t),e}(n.Container);e.PlaybackToggleOverlay=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(50),o=i(6),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-hugeplaybacktogglebutton",text:"Play/Pause"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i,!1);var n=function(){e.isPlaying()?e.pause("ui"):e.play("ui")},o=function(){e.isFullscreen()?e.exitFullscreen():e.enterFullscreen()},s=!0,a=0,u=0;this.onClick.subscribe((function(){if(s)n();else{var t=Date.now();if(t-a<200)return o(),void(u=t);if(t-a<500)return o(),n(),void(u=t);a=t,setTimeout((function(){Date.now()-u>200&&n()}),200)}})),e.addEventHandler(e.EVENT.ON_PLAY,(function(){s=!1})),e.addEventHandler(e.EVENT.ON_WARNING,(function(t){5008===t.code&&(s=!0)}));var h=function(t){t.type===e.EVENT.ON_CAST_START?r.hide():r.show()};e.addEventHandler(e.EVENT.ON_CAST_START,h),e.addEventHandler(e.EVENT.ON_CAST_STARTED,h),e.addEventHandler(e.EVENT.ON_CAST_STOPPED,h);var c=function(){r.setTransitionAnimationsEnabled(!1),r.onToggle.subscribeOnce((function(){r.setTransitionAnimationsEnabled(!0)}))};c();var l=e.getConfig().playback&&Boolean(e.getConfig().playback.autoplay),p=!e.isReady()&&l;(e.isPlaying()||p)&&(this.on(),c(),e.addEventHandler(e.EVENT.ON_WARNING,(function(t){5008===t.code&&c()})))},e.prototype.toDomElement=function(){var e=t.prototype.toDomElement.call(this);return e.append(new o.DOM("div",{class:this.prefixCss("image")})),e},e.prototype.setTransitionAnimationsEnabled=function(t){var e=this.prefixCss("no-transition-animations");t?this.getDomElement().removeClass(e):this.getDomElement().hasClass(e)||this.getDomElement().addClass(e)},e}(n.PlaybackToggleButton);e.HugePlaybackToggleButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-closebutton",text:"Close"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i);var r=this.getConfig();this.onClick.subscribe((function(){r.target.hide()}))},e}(i(23).Button);e.CloseButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-airplaytogglebutton",text:"Apple AirPlay"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;if(t.prototype.configure.call(this,e,i),e.isAirplayAvailable){this.onClick.subscribe((function(){e.isAirplayAvailable()?e.showAirplayTargetPicker():console&&console.log("AirPlay unavailable")}));var n=function(){e.isAirplayAvailable()?r.show():r.hide()};e.addEventHandler(e.EVENT.ON_AIRPLAY_AVAILABLE,n),n()}else this.hide()},e}(i(19).ToggleButton);e.AirPlayToggleButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-piptogglebutton",text:"Picture-in-Picture"},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;if(t.prototype.configure.call(this,e,i),e.isPictureInPictureAvailable){this.onClick.subscribe((function(){e.isPictureInPictureAvailable()?e.isPictureInPicture()?e.exitPictureInPicture():e.enterPictureInPicture():console&&console.log("PIP unavailable")}));var n=function(){e.isPictureInPictureAvailable()?r.show():r.hide()};e.addEventHandler(e.EVENT.ON_READY,n),e.addEventHandler(e.EVENT.ON_PICTURE_IN_PICTURE_ENTER,(function(){r.on()})),e.addEventHandler(e.EVENT.ON_PICTURE_IN_PICTURE_EXIT,(function(){r.off()})),n(),e.isPictureInPicture()&&this.on()}else this.hide()},e}(i(19).ToggleButton);e.PictureInPictureToggleButton=n},function(t,e,i){i(140),i(234),t.exports=i(64)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(63),n=i(64),o=i(141),s=i(147),a=i(149);e.default=r.module("mi.BitdashPlayer",[]).controller("MiBitdashController",s.BitmovinPlayerController).directive("miBitdashPlayer",a.BitmovinPlayerDirective).factory("ksdn",(function(){return o.ksdn})).factory("HiveBitmovin",(function(){return n.HiveBitmovin})).factory("YouboraLib",(function(){return i(173)})).factory("YouboraAdapter",(function(){return i(203)}))},function(t,e,i){(function(t){e.ksdn=function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=10)}([function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.Strategy={AJAX:"AJAX",FLASH:"FLASH"};e.AgentRequestMode={Ajax:[r.AJAX],Flash:[r.FLASH],AjaxWithFlashFallback:[r.AJAX,r.FLASH]},e.PROTOCOL={HTTPS:"https://",HTTP:"http://",RTMP:"rtmp://"},e.MIME_TYPES={DASH:"application/dash+xml",HLS:"application/x-mpegURL"},e.STREAM_TYPE={FLASH:"FLASH",HDS:"HDS",HLS:"HLS",DASH:"DASH",SMOOTH:"SMOOTH",RTMP:"RTMP"},e.PLAYTYPE={VOD:"VOD",LIVE:"LIVE"},e.LIMITS={LIMIT_REPORT_EVENTS_INFO:4096,LIMIT_REPORT_SEGMENTS_INFO:4096,LIMIT_REPORT_NODE_NAME:16,LIMIT_REPORT_MACHINE_NAME:64},e.EVENT={player:{state_none:0,state_stop:1,state_pause:2,state_play:3,state_buffering:6,state_end:8,state_seek_forward:20,state_seek_reverse:21,state_reload:77,state_exit:99},agent:{detect_ajax:-61,detect_flash:-62,detect_success:-63,detect_timeout:-64,detect_error_ajax_cannot_open:-65,detect_error_invalid_version:-66,detect_error_flash_config:-67,detect_failure_ajax:-68,detect_failure_flash_load:-69,detect_failure_flash_embed:-70,detect_all_fail:-71}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,i){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e,i,r){if(!(e<=0)){var n="edge"===(0,s.default)().browser,o=function(e){(e||t.readyState!==XMLHttpRequest.DONE)&&(!(n&&r)&&(t.onreadystatechange=null),e&&t.abort(),i(t))};n?setTimeout(o,e):(t.ontimeout=o.bind(null,!0),t.timeout=e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.XHR_ERROR=void 0,e.default=function(e){var i=e.method||"GET",r=e.url+(0,o.default)(e.params),s=Object.assign({},e.headers),h=null==e.expectJson||e.expectJson,c=null==e.async||e.async,l=e.onSuccess||a,p=e.onFailure||a,f=e.onError||a,d=e.onTimeout||a,g=e.timeout||0,v=e.body,y=e.continueAfterTimeout||!1;try{var m=new XMLHttpRequest;m.onreadystatechange=function(){if(m&&m.readyState===XMLHttpRequest.DONE)if(m.status>=200&&m.status<400){var e=h&&m.responseText?JSON.parse(m.responseText):m.responseText;l(e,m)}else m.status>=400?p(m):m.status<100&&t((function(){m.onreadystatechange&&f(m,u.NO_RESPONSE)}))},m.open(i,r,c),n(m,g,d,y),h&&"GET"===i&&m.setRequestHeader("Accept","application/json");var E=s.auth;E&&(s.Authorization="Kontiki "+E,delete s.auth),Object.getOwnPropertyNames(s).forEach((function(t){m.setRequestHeader(t,s[t])})),m.send(v)}catch(t){f(null,u.CANNOT_OPEN)}};var o=r(i(9)),s=r(i(4)),a=function(){},u=e.XHR_ERROR={NO_RESPONSE:"no_ajax_response",CANNOT_OPEN:"ajax_cannot_open"}}).call(e,i(21).setImmediate)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function t(t,e){return t&&e&&t.length>e?t.substring(0,e):t}var e,i,r=navigator.appVersion,n=navigator.userAgent,o="other",s="-";-1!=(e=n.indexOf("Opera"))?(o="opera",s=n.substring(e+6),-1!=(e=n.indexOf("Version"))&&(s=n.substring(e+8))):-1!=(e=n.indexOf("MSIE"))?(o="ie",s=n.substring(e+5)):-1!=(e=n.indexOf("Edge"))?(o="edge",s=n.substring(e+5)):-1!=(e=n.indexOf("Chrome"))?(o="chrome",s=n.substring(e+7)):-1!=(e=n.indexOf("Safari"))?(o="safari",s=n.substring(e+7),-1!=(e=n.indexOf("Version"))&&(s=n.substring(e+8))):-1!=(e=n.indexOf("Firefox"))?(o="firefox",s=n.substring(e+8)):-1!=n.indexOf("Trident/")?(o="ie",s=n.substring(n.indexOf("rv:")+3)):(o="other",s="-"),-1!=(i=s.indexOf(";"))&&(s=s.substring(0,i)),-1!=(i=s.indexOf(" "))&&(s=s.substring(0,i)),-1!=(i=s.indexOf(")"))&&(s=s.substring(0,i));var a="other",u=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 10.0",r:/(Windows NT 10.0)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0)/},{s:"Windows windows",r:/(WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"OpenBSD",r:/OpenBSD/},{s:"SunOS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"MacOSX",r:/Mac OS X/},{s:"MacOS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"SearchBT",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var h in u){var c=u[h];if(c.r&&c.r.test(n)){a=c.s;break}}var l="";switch(/Windows/.test(a)&&(l=/Windows (.*)/.exec(a)[1],a="windows"),a){case"MacOSX":l=/Mac OS X (10[\.\_\d]+)/.exec(n)[1];break;case"Android":l=/Android ([\.\_\d]+)/.exec(n)[1];break;case"iOS":l=(l=/OS (\d+)_(\d+)_?(\d+)?/.exec(r))[1]+"."+l[2]+"."+(0|l[3])}return{browser:t(o,8),browserVersion:t(s,8),os:t(a,8),osVersion:t(l,8)}}},function(t,e,i){"use strict";function r(){}function n(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,t!==r&&c(t,this)}function o(t,e){for(;3===t._83;)t=t._18;if(n._47&&n._47(t),0===t._83)return 0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e);!function(t,e){l((function(){var i=1===t._83?e.onFulfilled:e.onRejected;if(null!==i){var r=function(t,e){try{return t(e)}catch(t){return p=t,f}}(i,t._18);r===f?a(e.promise,p):s(e.promise,r)}else 1===t._83?s(e.promise,t._18):a(e.promise,t._18)}))}(t,e)}function s(t,e){if(e===t)return a(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var i=function(t){try{return t.then}catch(t){return p=t,f}}(e);if(i===f)return a(t,p);if(i===t.then&&e instanceof n)return t._83=3,t._18=e,void u(t);if("function"==typeof i)return void c(i.bind(e),t)}t._83=1,t._18=e,u(t)}function a(t,e){t._83=2,t._18=e,n._71&&n._71(t,e),u(t)}function u(t){if(1===t._75&&(o(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)o(t,t._38[e]);t._38=null}}function h(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function c(t,e){var i=!1,r=function(t,e,i){try{t(e,i)}catch(t){return p=t,f}}(t,(function(t){i||(i=!0,s(e,t))}),(function(t){i||(i=!0,a(e,t))}));i||r!==f||(i=!0,a(e,p))}var l=i(13),p=null,f={};t.exports=n,n._47=null,n._71=null,n._44=r,n.prototype.then=function(t,e){if(this.constructor!==n)return function(t,e,i){return new t.constructor((function(s,a){var u=new n(r);u.then(s,a),o(t,new h(e,i,u))}))}(this,t,e);var i=new n(r);return o(this,new h(t,e,i)),i}},function(t,e,i){var r,n,o;n=[],void 0!==(o="function"==typeof(r=function(){function t(t){var e=t.replace(/^v/,"").replace(/\+.*$/,""),i=function(t,e){return-1===t.indexOf(e)?t.length:t.indexOf(e)}(e,"-"),r=e.substring(0,i).split(".");return r.push(e.substring(i+1)),r}function e(t){return isNaN(Number(t))?t:Number(t)}function i(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");if(!r.test(t))throw new Error("Invalid argument not valid semver")}var r=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;return function(r,n){[r,n].forEach(i);for(var o=t(r),s=t(n),a=0;a<Math.max(o.length-1,s.length-1);a++){var u=parseInt(o[a]||0,10),h=parseInt(s[a]||0,10);if(u>h)return 1;if(h>u)return-1}var c=o[o.length-1],l=s[s.length-1];if(c&&l){var p=c.split(".").map(e),f=l.split(".").map(e);for(a=0;a<Math.max(p.length,f.length);a++){if(void 0===p[a]||"string"==typeof f[a]&&"number"==typeof p[a])return-1;if(void 0===f[a]||"string"==typeof p[a]&&"number"==typeof f[a])return 1;if(p[a]>f[a])return 1;if(f[a]>p[a])return-1}}else if(c||l)return c?-1:1;return 0}})?r.apply(e,n):r)&&(t.exports=o)},function(t,e,i){(function(r){var n;!function(e,i){t.exports=i(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:this,(function(r){"use strict";var o,s=r.Base64;if(void 0!==t&&t.exports)try{o=i(20).Buffer}catch(t){}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(t){for(var e={},i=0,r=t.length;i<r;i++)e[t.charAt(i)]=i;return e}(a),h=String.fromCharCode,c=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?h(192|e>>>6)+h(128|63&e):h(224|e>>>12&15)+h(128|e>>>6&63)+h(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return h(240|e>>>18&7)+h(128|e>>>12&63)+h(128|e>>>6&63)+h(128|63&e)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,p=function(t){return t.replace(l,c)},f=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[a.charAt(i>>>18),a.charAt(i>>>12&63),e>=2?"=":a.charAt(i>>>6&63),e>=1?"=":a.charAt(63&i)].join("")},d=r.btoa?function(t){return r.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,f)},g=o?o.from&&Uint8Array&&o.from!==Uint8Array.from?function(t){return(t.constructor===o.constructor?t:o.from(t)).toString("base64")}:function(t){return(t.constructor===o.constructor?t:new o(t)).toString("base64")}:function(t){return d(p(t))},v=function(t,e){return e?g(String(t)).replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,""):g(String(t))},y=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),m=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return h(55296+(e>>>10))+h(56320+(1023&e));case 3:return h((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return h((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},E=function(t){return t.replace(y,m)},w=function(t){var e=t.length,i=e%4,r=(e>0?u[t.charAt(0)]<<18:0)|(e>1?u[t.charAt(1)]<<12:0)|(e>2?u[t.charAt(2)]<<6:0)|(e>3?u[t.charAt(3)]:0),n=[h(r>>>16),h(r>>>8&255),h(255&r)];return n.length-=[0,0,2,1][i],n.join("")},b=r.atob?function(t){return r.atob(t)}:function(t){return t.replace(/[\s\S]{1,4}/g,w)},S=o?o.from&&Uint8Array&&o.from!==Uint8Array.from?function(t){return(t.constructor===o.constructor?t:o.from(t,"base64")).toString()}:function(t){return(t.constructor===o.constructor?t:new o(t,"base64")).toString()}:function(t){return E(b(t))},T=function(t){return S(String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))};if(r.Base64={VERSION:"2.4.5",atob:b,btoa:d,fromBase64:T,toBase64:v,utob:p,encode:v,encodeURI:function(t){return v(t,!0)},btou:E,decode:T,noConflict:function(){var t=r.Base64;return r.Base64=s,t}},"function"==typeof Object.defineProperty){var I=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};r.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",I((function(){return T(this)}))),Object.defineProperty(String.prototype,"toBase64",I((function(t){return v(this,t)}))),Object.defineProperty(String.prototype,"toBase64URI",I((function(){return v(this,!0)})))}}return r.Meteor&&(Base64=r.Base64),void 0!==t&&t.exports?t.exports.Base64=r.Base64:void 0!==(n=function(){return r.Base64}.apply(e,[]))&&(t.exports=n),{Base64:r.Base64}}))}).call(e,i(0))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.replace(/^kontiki:/,"").split(":").reverse().slice(0,-2),i=e[3]||"prod1",o=r[i];return{moid:e[0],company:e[2],dms:i,host:n(null==o?i:o)}};var r={prod1:"",gmcorp:"wg1",eu:"eu1",lbg:"api.kontiki.service.group",vc10:"api-vc10.corp.kontiki.com",vc14:"api-vc14.kontiki.com",tc1rh5:"tc1"},n=function(t){return t.indexOf(".")>=0?"https://"+t:"https://api."+(t&&t+".")+"kontiki.com"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return null==t?"":(t=Object.getOwnPropertyNames(t).reduce((function(i,n){var s=t[n];return null==s?i:(!e&&o.has(n)&&(s=r.Base64.encodeURI(s)),i[n]=s,i)}),{}),(0,n.stringify)(t,!0))};var r=i(7),n=i(24),o=new Set(["format","realmId","realmTicket"])},function(t,e,i){i(11),i(16),t.exports=i(17)},function(t,e,i){"use strict";"undefined"==typeof Promise&&(i(12).enable(),window.Promise=i(14)),Object.assign=i(15)},function(t,e,i){"use strict";function r(){a=!1,o._47=null,o._71=null}function n(t,e){return e.some((function(e){return t instanceof e}))}var o=i(5),s=[ReferenceError,TypeError,RangeError],a=!1;e.disable=r,e.enable=function(t){function e(e){(t.allRejections||n(c[e].error,t.whitelist||s))&&(c[e].displayId=h++,t.onUnhandled?(c[e].logged=!0,t.onUnhandled(c[e].displayId,c[e].error)):(c[e].logged=!0,function(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach((function(t){console.warn("  "+t)}))}(c[e].displayId,c[e].error)))}function i(e){c[e].logged&&(t.onHandled?t.onHandled(c[e].displayId,c[e].error):c[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+c[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+c[e].displayId+".")))}t=t||{},a&&r(),a=!0;var u=0,h=0,c={};o._47=function(t){2===t._83&&c[t._56]&&(c[t._56].logged?i(t._56):clearTimeout(c[t._56].timeout),delete c[t._56])},o._71=function(t,i){0===t._75&&(t._56=u++,c[t._56]={displayId:null,error:i,timeout:setTimeout(e.bind(null,t._56),n(i,s)?100:2e3),logged:!1})}}},function(t,e,i){"use strict";(function(e){function i(t){s.length||(o(),!0),s[s.length]=t}function r(){for(;a<s.length;){var t=a;if(a+=1,s[t].call(),a>u){for(var e=0,i=s.length-a;e<i;e++)s[e]=s[e+a];s.length-=a,a=0}}s.length=0,a=0,!1}function n(t){return function(){function e(){clearTimeout(i),clearInterval(r),t()}var i=setTimeout(e,0),r=setInterval(e,50)}}t.exports=i;var o,s=[],a=0,u=1024,h=void 0!==e?e:self,c=h.MutationObserver||h.WebKitMutationObserver;o="function"==typeof c?function(t){var e=1,i=new c(t),r=document.createTextNode("");return i.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}(r):n(r),i.requestFlush=o,i.makeRequestCallFromTimer=n}).call(e,i(0))},function(t,e,i){"use strict";function r(t){var e=new n(n._44);return e._83=1,e._18=t,e}var n=i(5);t.exports=n;var o=r(!0),s=r(!1),a=r(null),u=r(void 0),h=r(0),c=r("");n.resolve=function(t){if(t instanceof n)return t;if(null===t)return a;if(void 0===t)return u;if(!0===t)return o;if(!1===t)return s;if(0===t)return h;if(""===t)return c;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new n(e.bind(t))}catch(t){return new n((function(e,i){i(t)}))}return r(t)},n.all=function(t){var e=Array.prototype.slice.call(t);return new n((function(t,i){function r(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof n&&a.then===n.prototype.then){for(;3===a._83;)a=a._18;return 1===a._83?r(s,a._18):(2===a._83&&i(a._18),void a.then((function(t){r(s,t)}),i))}var u=a.then;if("function"==typeof u)return void new n(u.bind(a)).then((function(t){r(s,t)}),i)}e[s]=a,0==--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,s=0;s<e.length;s++)r(s,e[s])}))},n.reject=function(t){return new n((function(e,i){i(t)}))},n.race=function(t){return new n((function(e,i){t.forEach((function(t){n.resolve(t).then(e,i)}))}))},n.prototype.catch=function(t){return this.then(null,t)}},function(t,e,i){"use strict";function r(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,u=r(t),h=1;h<arguments.length;h++){for(var c in i=Object(arguments[h]))o.call(i,c)&&(u[c]=i[c]);if(n){a=n(i);for(var l=0;l<a.length;l++)s.call(i,a[l])&&(u[a[l]]=i[a[l]])}}return u}},function(t,e,i){"use strict";(function(t){t.version="1.1.0"}).call(e,i(2))},function(t,e,i){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function n(t){if(!t.sdnData)return null;if(t.sdnData.constructor===Array)for(var e=0;e<t.sdnData.length;e++){var i=t.sdnData[e];if(i&&i.encodingInfo)return i.encodingInfo}return t.sdnData.encodingInfo}function o(t){var e=function(t){var e=g.default[t];if(null==e)throw"No player interface for "+t;if("function"!=typeof e.isPlaying||"function"!=typeof e.isLive||"function"!=typeof e.getPlayerPosition||"function"!=typeof e.getPlayerDuration||"function"!=typeof e.setEventHandlers)throw"Incomplete player interface: "+t;return e}(t),i=s.bind(null,t,e);return Object.defineProperty(i,"name",{value:t})}function s(e,i,r){function o(t){k=t,function(t){C=s(t),N=new v.default({hostHttp:t.clientHost,portHttp:t.clientPortHttp,portRtmp:t.clientPortRtmp,portHttps:t.clientPortHttps,timeout:P,flashTimeout:I,flashLoaderUrl:T,agentRequestMode:w,eventLogger:C&&C.logger,callback:function(e,i){if(t.urn===A)if(e.isInstalled()){D.agent=e;var r={provisionedForCurrentUrn:(0,l.default)(e.getNamespace(),t.urn),notBlackedOut:!e.getInBlackout()};if(!Object.getOwnPropertyNames(r).reduce((function(t,e){return t&&r[e]}),!0))return R.onAgentRejected&&R.onAgentRejected(D,r),void p(t);if(R.onAgentDetected){var o=!!e.getKToken();R.onAgentDetected(D,o,e)}!function(t){if(D.agent){D.agent.setSessionData({realmId:t.realmId,realmTicket:t.realmTicket,noPreroll:!0},(function(e){if(t.urn===A){var i=e&&e.success?R.onSessionStart:R.onSessionFailure;i&&i(D),function(t){(0,h.default)(D.getAgentData().version,"10.0")>=0?function(t){var e=n(t);D.agent.prefetchStream(e,t.urn,null,(function(e){if(D.agent&&t.urn===A){if(e.error&&!e.reasons.reduce((function(t,e){return t&&("timeout"===e.type||e.status>=400&&e.status<500)}),!0))return void(R.onPrimingFailure&&R.onPrimingFailure(D));R.onPrimingStart&&R.onPrimingStart(D),D.agent.startLongpoll((function(e,i){"string"==typeof e&&t.urn===A&&("manifestProgress"===e?(R.onProgress&&R.onProgress(D,i.progress,t.urn),i.ready&&g(t,a(t),!0)):R.onCommand&&R.onCommand(D,e,i))}))}}))}(t):g(t,a(t),!0)}(t)}}))}}(t)}else R.onAgentNotDetected&&R.onAgentNotDetected(D,i),p(t)}}),C&&C.setAgent(N)}(t)}function s(t){if(m&&D.player){var r=E||(0,f.default)(t.urn).host;return new y.default(D.player,e,i,t,m,r,_)}}function a(t){var e=!!D.agent.getKToken(),i=n(t),r=e?void 0:{noPreroll:!0},o=D.agent.getStreamUrl(i,t.urn,r);return 0===o.length?(console.log("Cannot play stream of type "+i),null):o}function p(t){var e=b||t.mediaCdnUrl;if(!e&&t.sdnData){var i=t.sdnData;i.length&&i.length>0&&(i=i[0]),i&&i.mediaCdnUrl&&(e=i.mediaCdnUrl)}g(t,e,!1)}function g(t,e,i){var r=!i&&b&&S?S:c.MIME_TYPES[n(t)];O&&e&&r&&D.player?(R.willSetSource&&R.willSetSource(D),O(D.player,e,r,i),C&&C.saveState(),R.didSetSource&&R.didSetSource(D)):console.log("Cannot play source: "+e)}var m,E,w,b,S,T,I,_,P,O,A,R,C,N,k,D=this;return this.player=null,this.agent=null,this.configure=function(t){var e=function(e,i){return void 0===t[e]?i:t[e]},i=E,r=m;E=e("host",i),m=e("auth",r);var n=!!A&&(E!=i||m!=r);w=e("agentRequestMode",w)||c.AgentRequestMode.NoFlash,b=e("fallbackSrc",b),S=e("fallbackType",S),T=e("flashLoaderUrl",T),I=e("flashTimeout",I),_=e("reportInterval",_),P=e("timeout",P),C&&C.setReportInterval(_),n&&this.stop()}.bind(this),this.play=function(t,e,r){if("function"!=typeof(O=r.setSource||i.setSource))throw"Missing setSource callback: requried when the player interface lacks an implementation";var n,s;if("string"==typeof e?n=e:"object"===(void 0===e?"undefined":u(e))&&(n=(s=e.playbackVideo||e).urn),n){if(A&&A!==n)return void this.stop(function(){this.play(t,e,r)}.bind(this));A=n,R=r,this.player=t,s?o(s):function(t,e,i){var r=(0,f.default)(i),n=function(t){i===A&&R.onPlaybackRequestFailure&&R.onPlaybackRequestFailure(D,t)&&b&&p()};(0,d.default)({url:(t||r.host)+"/api/v2/playback/video/"+r.moid,headers:{auth:e},onSuccess:function(t){if(i===A){var e=t.playbackVideo;R.onPlaybackRequestSuccess&&R.onPlaybackRequestSuccess(D,e),o(e)}},onFailure:n,onError:n})}(E,m,n)}}.bind(this),this.stop=function(t){A&&this.agent?(A=null,R=null,C.disconnect(),C=null,this.player=null,this.agent.stopStream(k.urn,t),this.agent.stopLongpoll(),k=null,this.agent=null):t&&t()}.bind(this),this.getAgentData=function(){return t.agentData},this.getLogs=function(){return t.agentLogs},this.flushLogs=function(){return t.agentLogs="",t.agentLogs},r&&D.configure(r),D}function a(t,e){g.default[t]=Object.assign(g.default[t]||{},e),m[t]=o(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.KollectiveAgent=e.AgentRequestMode=e.createPublicToken=e.installPlayerPlugin=e.Players=e.$g=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=r(i(6)),c=i(1),l=r(i(18)),p=r(i(19)),f=r(i(8)),d=r(i(3)),g=r(i(25)),v=r(i(26)),y=r(i(27));console.log("Kollective SDK v"+t.version);var m={};for(var E in g.default)g.default.hasOwnProperty(E)&&a(E,g.default[E]);e.$g=t,e.Players=m,e.installPlayerPlugin=a,e.createPublicToken=p.default,e.AgentRequestMode=c.AgentRequestMode,e.KollectiveAgent=v.default}).call(e,i(2))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=(e||"").split(":"),r=i.indexOf("moid");if(r<0)return!1;var n=i.slice(0,r).join(":")+":";return(t||"").split(",").filter(Boolean).reduce((function(t,e){return t||0===n.indexOf(e)}),!1)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=e;return e.indexOf(":")>=0&&(i=(0,n.default)(e).company),"pub-"+r.Base64.encode(t+"#"+i)};var r=i(7),n=function(t){return t&&t.__esModule?t:{default:t}}(i(8))},function(e,i){if(void 0===t){var r=new Error('Cannot find module "Buffer"');throw r.code="MODULE_NOT_FOUND",r}e.exports=t},function(t,e,i){(function(t){function r(t,e){this._id=t,this._clearFn=e}var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(22),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,i(0))},function(t,e,i){(function(t,e){!function(t,i){"use strict";function r(t){delete a[t]}function n(t){if(u)setTimeout(n,0,t);else{var e=a[t];if(e){u=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{r(t),u=!1}}}}if(!t.setImmediate){var o,s=1,a={},u=!1,h=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?o=function(t){e.nextTick((function(){n(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"==typeof i.data&&0===i.data.indexOf(e)&&n(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),o=function(i){t.postMessage(e+i,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){n(t.data)},o=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;o=function(e){var i=h.createElement("script");i.onreadystatechange=function(){n(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}():o=function(t){setTimeout(n,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return a[s]=r,o(s),s++},c.clearImmediate=r}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,i(0),i(23))},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function n(t){if(h===setTimeout)return setTimeout(t,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(){d&&p&&(d=!1,p.length?f=p.concat(f):g=-1,f.length&&s())}function s(){if(!d){var t=n(o);d=!0;for(var e=f.length;e;){for(p=f,f=[];++g<e;)p&&p[g].run();g=-1,e=f.length}p=null,d=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function u(){}var h,c,l=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(t){c=r}}();var p,f=[],d=!1,g=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];f.push(new a(t,e)),1!==f.length||d||n(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=u,l.addListener=u,l.once=u,l.off=u,l.removeListener=u,l.removeAllListeners=u,l.emit=u,l.prependListener=u,l.prependOnceListener=u,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,i){"use strict";function r(t){return decodeURIComponent(t.replace(/\+/g," "))}var n=Object.prototype.hasOwnProperty;e.stringify=function(t,e){e=e||"";var i=[];for(var r in"string"!=typeof e&&(e="?"),t)n.call(t,r)&&i.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return i.length?e+i.join("&"):""},e.parse=function(t){for(var e,i=/([^=?&]+)=?([^&]*)/g,n={};e=i.exec(t);){var o=r(e[1]),s=r(e[2]);o in n||(n[o]=s)}return n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(1);e.default={Amp:{isPlaying:function(t){return!(t.seeking||t.paused||t.ended)},isLive:function(t){return t.isLive()},getPlayerPosition:function(t){return 1e3*t.currentTime},getPlayerDuration:function(t){return 1e3*t.duration},setEventHandlers:function(t,e){var i=window.amp.eventName;t.addEventListener(i.timeupdate,e.onTimeUpdate),t.addEventListener(i.error,e.onError),t.addEventListener(i.pause,e.onPause),t.addEventListener(i.play,e.onPlay),t.addEventListener(i.ended,e.onEnd),t.addEventListener(i.seeked,e.onSeekEnd),t.addEventListener(i.waiting,e.onBuffering),t.addEventListener(i.canplaythrough,e.onCanPlay)},setSource:function(t,e,i){t.src([{src:e,type:i}])}},Bitmovin:{isPlaying:function(t){return t.isPlaying()},isLive:function(t){return t.isLive()},getPlayerPosition:function(t){return 1e3*t.getCurrentTime()},getPlayerDuration:function(t){return 1e3*t.getDuration()},setEventHandlers:function(t,e){var i=t.EVENT||window.bitmovin.player.PlayerEvent,r=t.EVENT?"addEventHandler":"on";t[r](i.ON_TIME_CHANGED||i.TimeChanged,e.onTimeUpdate),t[r](i.ON_ERROR||i.Error,e.onError),t[r](i.ON_PAUSED||i.Paused,e.onPause),t[r](i.ON_PLAY||i.Play,e.onPlay),t[r](i.ON_PLAYBACK_FINISHED||i.PlaybackFinished,e.onEnd),t[r](i.ON_SEEKED||i.Seeked,e.onSeekEnd),t[r](i.ON_TIME_SHIFTED||i.TimeShifted,e.onSeekEnd),t[r](i.ON_STALL_STARTED||i.StallStarted,e.onBuffering),t[r](i.ON_STALL_ENDED||i.StallEnded,e.onCanPlay)},setSource:function(t,e,i){var n=function(){switch(i){case r.MIME_TYPES.DASH:return"dash";default:return"hls"}}();t.load(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},n,e)).then((function(){return t.play()})).catch((function(t){console.log("Bitmovin player load error: "+t)}))}},Dashjs:{isPlaying:function(t){return!(t.isSeeking||t.isPaused)},isLive:function(t){return t.isDynamic()},getPlayerPosition:function(t){return 1e3*t.time()},getPlayerDuration:function(t){return 1e3*t.duration()},setEventHandlers:function(t,e){var i=window.dashjs.MediaPlayer.events;t.on(i.PLAYBACK_TIME_UPDATED,e.onTimeUpdate,this),t.on(i.ERROR,e.onError,this),t.on(i.PLAYBACK_PAUSED,e.onPause,this),t.on(i.PLAYBACK_PLAYING,e.onPlay,this),t.on(i.PLAYBACK_ENDED,e.onEnd,this),t.on(i.PLAYBACK_SEEKED,e.onSeekEnd,this),t.on(i.BUFFER_EMPTY,e.onBuffering,this),t.on(i.CAN_PLAY,e.onCanPlay,this)},setSource:function(t,e){t.setAutoPlay(!0),t.attachSource(e)}},Flow:{isPlaying:function(t){return t.playing},isLive:function(t){return t.live},getPlayerPosition:function(t){return t.ready?1e3*t.video.time:0},getPlayerDuration:function(t){return t.ready?1e3*t.video.duration:0},setEventHandlers:function(t,e){t.on("progress",e.onTimeUpdate),t.on("error",e.onError),t.on("pause",e.onPause),t.on("ready",e.onPlay),t.on("resume",e.onPlay),t.on("finish",e.onEnd),t.on("seek",e.onSeekEnd),t.on("buffer",(function(){t.video.buffer>t.video.time?e.onCanPlay():e.onBuffering()}))},setSource:function(t,e,i){t.load({sources:[{src:e,type:i}]})}},Jwplayer:{isPlaying:function(t){return"playing"===t.getState()},isLive:function(t){return!isFinite(t.duration())},getPlayerPosition:function(t){return 1e3*t.getPosition()},getPlayerDuration:function(t){return 1e3*t.getDuration()},setEventHandlers:function(t,e){t.on("time",e.onTimeUpdate),t.on("error",e.onError),t.on("pause",e.onPause),t.on("play",(function(t){"buffering"===t.oldstate&&e.onCanPlay(),e.onPlay()})),t.on("complete",e.onEnd),t.on("seeked",e.onSeekEnd),t.on("buffer",e.onBuffering),t.on("bufferChange",(function(i){100===i.bufferPercent&&"playing"!==t.getState()&&e.onCanPlay()}))},setSource:function(t,e){t.setup({file:e,autostart:"viewable"})}},Theo:{isPlaying:function(t){return!(t.seeking||t.paused||t.ended)},isLive:function(t){return!isFinite(t.duration)},getPlayerPosition:function(t){return 1e3*t.currentTime},getPlayerDuration:function(t){return 1e3*t.duration},setEventHandlers:function(t,e){t.addEventListener("timeupdate",e.onTimeUpdate),t.addEventListener("error",e.onError),t.addEventListener("pause",e.onPause),t.addEventListener("playing",e.onPlay),t.addEventListener("ended",e.onEnd),t.addEventListener("seeked",e.onSeekEnd),t.addEventListener("waiting",e.onBuffering),t.addEventListener("canplaythrough",e.onCanPlay)},setSource:function(t,e,i){t.source={sources:[{src:e,type:i}]},t.play()}},Videojs:{isPlaying:function(t){return!(t.seeking||t.paused||t.ended)},isLive:function(t){return!isFinite(t.duration())},getPlayerPosition:function(t){return 1e3*t.currentTime},getPlayerDuration:function(t){return 1e3*t.duration()},setEventHandlers:function(t,e){t.on("timeupdate",e.onTimeUpdate),t.on("error",e.onError),t.on("pause",e.onPause),t.on("play",e.onPlay),t.on("ended",e.onEnd),t.on("seeked",e.onSeekEnd),t.on("stalled",e.onBuffering),t.on("canplay",e.onCanPlay)},setSource:function(t,e,i){t.src({src:e,type:i}),t.play()}}}},function(t,e,i){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return"$g."+t+"Response"}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=r(i(6)),a=i(1),u=r(i(4)),h=i(3),c=r(h),l=r(i(9)),p="";e.default=function(e){function i(t,e){O[t]=O[t]||[],O[t].push(e)}function r(t){if(t.strategies=(t.strategies||(_.isInstalled()?function(t){t=t.slice();for(var e=[];t.length>0;){var i=t.shift();(function(t){switch(t){case a.Strategy.AJAX:return _.checkMinVersion("10.0");case a.Strategy.FLASH:return!0;default:return!1}})(i)&&e.push(i)}return e}(j):j)).slice(),0!==t.strategies.length){null==t.requestId&&(t.requestId=A,A++);var e=t.uri.split("/"),i=e[e.length-1],o=t.options||{};switch(t.callbackParam=t.callbackParam||n(i),t.expectJson=null==t.expectJson||t.expectJson,t.onStart=t.onStart||v,t.onTimeout=t.onTimeout||m,t.onError=t.onError||E,t.onFailure=t.onFailure||w,t.continueAfterTimeout=t.continueAfterTimeout||!1,t.flashDivId=o.flashDivId||"kollectiveAgent",t.flashTimeout=o.flashTimeout||B,t.timeout=o.timeout||t.defaultTimeout||H,t.strategies.shift()){case a.Strategy.AJAX:!function(t,e){var i=e.method,n=e.expectJson,o=e.timeout,s=e.continueAfterTimeout,u=e.uri,h=e.params,p=e.ignoreBase64Encoding,d=e.requestId,g=e.onStart,v=e.onSuccess,y=e.onFailure,m=e.onError,E=e.onTimeout,w=f(t,u)+(0,l.default)(h,p),b=a.Strategy.AJAX;g&&g(b,w),(0,c.default)({url:w,method:i,expectJson:n,timeout:o,continueAfterTimeout:s,onSuccess:v.bind(null,b),onFailure:function(t){y(b,d,t,"ajax"),r(e)},onError:function(t,i){m(b,d,t,i),r(e)},onTimeout:function(t){E(b,d,t),r(e)}})}(t.protocol||a.PROTOCOL.HTTPS,t);break;case a.Strategy.FLASH:d(t.protocol||a.PROTOCOL.HTTP,t);break;default:r(t)}}else t.onAllStrategiesFailed(O[t.requestId])}function f(t,e){switch(t){case a.PROTOCOL.HTTPS:return a.PROTOCOL.HTTPS+D+":"+M+e;case a.PROTOCOL.HTTP:return a.PROTOCOL.HTTP+k+":"+L+e;case a.PROTOCOL.RTMP:return a.PROTOCOL.RTMP+k+":"+x+e;default:return null}}function d(e,i){t.timeoutTripped=!1;var n=Object.assign({},i.params);n.callback=i.callbackParam,t.lastFlashUrl=(f(e,i.uri)+(0,l.default)(n,i.ignoreBase64Encoding)).replace("&","%26"),i.onStart&&i.onStart(a.Strategy.FLASH,t.lastFlashUrl),t.timeoutFlash=i.flashTimeout;var o=function(t){i.onFailure(a.Strategy.FLASH,i.requestId,null,t),r(i)};if(void 0!==window.swfobject){t.flashSuccessCallback=i.onSuccess.bind(null,a.Strategy.FLASH),t.flashFailureCallback=o,t.flashTimeoutCallback=function(){t.timeoutTripped=!0,i.onTimeout(a.Strategy.FLASH,i.requestId),r(i)};var s={url:t.lastFlashUrl};window.swfobject.embedSWF(U,i.flashDivId,"8","8","10.0.0","",s,{allowscriptaccess:"always"},"",(function(e){e.success?(t.timeoutTripped=!1,t.flashLoadTimeoutID=setTimeout(t.flashTimeoutCallback,t.timeoutFlash)):o("flash_embed")}))}else i.onError(a.Strategy.FLASH,i.requestId,"flash_config"),r(i)}function g(t){F&&F.addAgentEvent&&t&&F.addAgentEvent(t)}function v(e,i){switch(e){case a.Strategy.AJAX:t.agentLogs+="Attempting AJAX request";break;case a.Strategy.FLASH:t.agentLogs+="Attempting FLASH request"}t.agentLogs+=": "+i}function y(e,i){return e=e||function(){},i=i||function(){return null},function(r,n){switch(r){case a.Strategy.AJAX:t.agentLogs+="AJAX request succeeded\n",e(n);break;case a.Strategy.FLASH:t.agentLogs+="FLASH request succeeded\n",e(i())}}}function m(e,r,n){switch(i(r,{type:"timeout",reason:"timeout",strategy:e,status:n.status}),e){case a.Strategy.AJAX:t.agentLogs+="AJAX request timed out\n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH request timed out\n"}}function E(e,r,n,o){switch(i(r,{type:"error",reason:o,strategy:e,status:n?n.status:0}),e){case a.Strategy.AJAX:t.agentLogs+="AJAX request failed with error:"+o+"\n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH request failed due to improper Flash configuration\n"}}function w(e,r,n,o){switch(i(r,{type:"error",reason:o,strategy:e,status:n.status}),e){case a.Strategy.AJAX:t.agentLogs+="AJAX request failed:"+n.statusText+" \n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH request failed\n"}}function b(t){return function(e){t({error:"Request failed",reasons:e})}}function S(t){return Object.assign(Object.assign({},t),I)}function T(e,i,n){C=(new Date).getTime(),r({uri:"/api/v1/longpoll",params:i,defaultTimeout:3e4,continueAfterTimeout:!0,options:n,onSuccess:y((function(t){if(!R){var r=!!t&&t.ts,o=!!t&&t.cmd,s=!!t&&t.params;if("manifestProgress"===o){var a=s&&s.percent,u=!!a&&100===parseInt(a);e(o,{progress:parseInt(a),ready:u})}else e(o,s);if(!R){var h=Object.assign({},i);h.ts=r,T(e,h,n)}}}),(function(){return t.longpollData})),onAllStrategiesFailed:function(t){if(!R){var r=(t=t||[]).filter((function(t){return!("timeout"===t.reason||t.reason===h.XHR_ERROR.NO_RESPONSE)})),o=0;if(r.length>0)e({error:"Longpoll request failed. Attempting again.",reasons:r});else{var s=(new Date).getTime()-C;if(o=Math.max(0,3e4-s),"edge"===(0,u.default)().browser&&t.filter((function(t){return"timeout"===t.reason})).length>0)return}setTimeout((function(){R||T(e,i,n)}),o)}}})}if("object"!==(void 0===e?"undefined":o(e)))throw"KollectiveAgent Error: No parameter object passed in";t.agentData=null,t.agentLogs="",t.timeoutTripped=!1;var I,_=this,P=!1,O={},A=1,R=!0,C=null,N=e.callback||function(){},k=e.hostHttp||"127.0.0.1",D=e.hostHttps||"client.kontiki.com",L=""+(e.portHttp||"31013"),x=""+(e.portRtmp||"31014"),M=""+(e.portHttps||"31015"),B=e.flashTimeout||5e3,H=e.timeout||5e3,U=e.flashLoaderUrl||"flash/kontikiagentflashloader-3.swf",j=e.agentRequestMode||a.AgentRequestMode.Ajax,F=e.eventLogger;r({strategies:j,uri:"/kontiki/kontiki/cache/RetrieveAgentData",callbackParam:n("agent"),onStart:function(e){switch(e){case a.Strategy.AJAX:g(a.EVENT.agent.detect_sajax),t.agentLogs+="Attempting AJAX detection\n";break;case a.Strategy.FLASH:g(a.EVENT.agent.detect_flash),t.agentLogs+="Attempting FLASH detection\n"}},onSuccess:function(e,i,r){switch(e){case a.Strategy.AJAX:if(!i||!i.version)throw g(a.EVENT.agent.detect_error_invalid_version),"responseText lacked agent version: "+r.responseText;g(a.EVENT.agent.detect_success),t.agentLogs+="AJAX detection succeeded! Agent version:"+i.version+"\n",t.agentData=i,N(_);break;case a.Strategy.FLASH:g(a.EVENT.agent.detect_success),t.agentLogs+="FLASH detection has succeeded\n",P=!0,N(_)}},onTimeout:function(e,r,n){switch(i(r,{type:"timeout",reason:"timeout",strategy:e,status:n.status}),g(a.EVENT.agent.detect_timeout),e){case a.Strategy.AJAX:t.agentLogs+="AJAX detection timed out\n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH detection timed out\n"}},onError:function(e,r,n,o){i(r,{type:"error",reason:o,strategy:e,status:n?n.status:0});var s=o&&a.EVENT.agent["detect_error_"+o];switch(s&&g(s),t.agentData=null,e){case a.Strategy.AJAX:t.agentLogs+="AJAX detection has failed with error:"+s+"\n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH detection failed due to improper Flash configuration\n"}},onFailure:function(e,r,n,o){i(r,{type:"error",reason:o,strategy:e,status:n.status});var s=o&&a.EVENT.agent["detect_failure_"+o];switch(s&&g(s),t.agentData=null,e){case a.Strategy.AJAX:t.agentLogs+="AJAX detection has failed:"+n.statusText+" \n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH detection failed\n"}},onAllStrategiesFailed:function(t){g(a.EVENT.agent.detect_all_fail),N(_,t)}}),this.isInstalled=function(){return void 0!==t.agentData&&null!=t.agentData}.bind(this),this.getVersion=function(){return this.isInstalled()?t.agentData.version:p}.bind(this),this.getNamespace=function(){return this.isInstalled()?t.agentData.urn_namespace:p}.bind(this),this.getMachineName=function(){return this.isInstalled()?t.agentData.machine_name:p}.bind(this),this.getNodeId=function(){return this.isInstalled()?t.agentData.node_id:p}.bind(this),this.getRtmpClientPlaybackSupported=function(){return this.isInstalled()&&t.agentData.rtmp_mp4_vod}.bind(this),this.getInBlackout=function(){return this.isInstalled()?t.agentData.blackout:p}.bind(this),this.getStreamUri=function(t,e,i){if(!this.isInstalled())return p;switch(t){case a.STREAM_TYPE.FLASH:return"/stream/"+e+"/"+(i||"content.f4v");case a.STREAM_TYPE.HDS:return"/stream/"+e+"/"+(i||"manifest.f4m");case a.STREAM_TYPE.HLS:return"/stream/"+e+"/"+(i||"chunklist.m3u8");case a.STREAM_TYPE.DASH:return"/stream/"+e+"/"+(i||"playlist.ism/Manifest(format=mpd-time-csf)");case a.STREAM_TYPE.SMOOTH:return"/stream/"+e+"/"+(i||"playlist.ism/Manifest");case a.STREAM_TYPE.RTMP:return"/stream/"+e;default:return""}}.bind(this),this.getStreamUrl=function(t,e,i,r){if(!this.isInstalled())return p;var n=this.getStreamUri(t,e,r),o=this.checkMinVersion("10.0")?a.PROTOCOL.HTTPS:a.PROTOCOL.HTTP;return t===a.STREAM_TYPE.RTMP&&(o=a.PROTOCOL.RTMP),f(o,n)+(0,l.default)(S(i))}.bind(this),this.getKToken=function(){return this.isInstalled()?t.agentData.ktoken:null}.bind(this),this.isDetectViaFlash=function(){return P},this.checkMinVersion=function(e){return this.isInstalled()&&(0,s.default)(t.agentData.version,e)>=0}.bind(this),this.getAgentLogs=function(){return t.agentLogs},this.setSessionData=function(t,e,i){I={realmId:t.realmId,realmTicket:t.realmTicket,noPreroll:t.noPreroll};var n=this.getKToken();if(null==n)e();else{var o={ktoken:n},s=function(t){var i=null==t||null==t.error;i&&(I=o),e(i?{success:i}:t)};r({uri:"/api/v1/setSessionData",ignoreBase64Encoding:!0,method:"POST",params:S(o),options:i,onSuccess:y(s),onAllStrategiesFailed:b(s)})}}.bind(this),this.getContentStatus=function(e,i,n){r({uri:"/api/v1/contentStatus",params:{urn:e},options:n,onSuccess:y(i,(function(){return t.contentStatusData})),onAllStrategiesFailed:b(i)})},this.downloadMonitor=function(e,i,n){r({uri:"/api/v1/downloadMonitor",params:{urn:e},options:n,onSuccess:y(i,(function(){return t.downloadMonitorData})),onAllStrategiesFailed:b(i)})},this.isContentPrefetched=function(){return void 0!==t.contentStatusData&&"Complete"==t.contentStatusData.state},this.getContentProgress=function(){return void 0!==t.contentStatusData?t.contentStatusData.progress:-1},this.getDownloadMonitorData=function(){return t.downloadMonitorData},this.stopStream=function(t,e,i){r({uri:"/api/v1/stopStream",params:S({urn:t}),options:i,onSuccess:y(e),onAllStrategiesFailed:b(e)})},this.deleteContent=function(t,e,i){r({uri:"/api/v1/contentDelete",params:S({urn:t}),options:i,onSuccess:y(e),onAllStrategiesFailed:b(e)})},this.requestDeliveryGuid=function(e,i,n){r({uri:"/api/v1/contentDeliveryGuid",params:S({urn:e}),options:n,onSuccess:y(i,(function(){return t.contentDeliveryGuidData})),onAllStrategiesFailed:b(i)})},this.sendErrorLogs=function(e,i){r({uri:"/api/v1/sendErrorLogs",params:{_:1},options:i,onSuccess:y(e,(function(){return t.sendErrorLogsData})),onAllStrategiesFailed:b(e)})},this.prefetchStream=function(e,i,o,s,u){var h=this.getStreamUri(e,i,u&&u.file);r({expectJson:!1,protocol:e===a.STREAM_TYPE.RTMP?a.PROTOCOL.RTMP:null,uri:h,params:S(o),options:u,callbackParam:n("prefetchStream"),onSuccess:y(s,(function(){return t.prefetchStreamData})),onAllStrategiesFailed:b(s)})}.bind(this),this.startLongpoll=function(t,e){R=!1,T(t,S({ts:0}),e)}.bind(this),this.stopLongpoll=function(){R=!0}}}).call(e,i(2))},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(28)),o=i(1),s=r(i(4)),a=r(i(3)),u={NONE:0,DEFAULT:100};e.default=function(t,e,i,r,h,c,l){function p(){w.logger&&(w.logger.onPlayerStateChange(o.EVENT.player.state_exit),v(!0))}function f(t){w.logger&&(w.logger.onPlayerStateChange(t),w.saveState())}function d(t){w.agent&&setTimeout(w.agent.stopStream.bind(null,r.urn),t)}function g(){!S&&w.agent&&w.agent.requestDeliveryGuid(r.urn,(function(t){S=t.deliveryGuid}))}function v(t){if(w.agent&&w.logger){if(!S)return void g();E();var i=m(),n=new Date;w.logger.updateLastReportTime();var o=w.logger.getPlayDuration();o<=0&&(o=1);var a=(0,s.default)(),u={contentMoid:r.moid,formatMoid:r.formatMoid,playGuid:b,deliveryGuid:S,percentage:0,inProgress:i,playDuration:o,startTime:w.logger.getStartTime(),playType:w.logger.getPlayType(),endTime:n.getTime(),prepareTime:w.logger.getPrepareTime(),bufferTime:w.logger.getBufferTime(),stallCount:w.logger.getStallCount(),stallTime:w.logger.getStallTime(),segmentList:w.logger.getSegmentList(),eventList:w.logger.getEventList(),nodeId:w.agent.getNodeId(),machineName:w.agent.getMachineName(),playContext:e,browser:a.browser,browserVersion:a.browserVersion,os:a.os,osVersion:a.osVersion},l=JSON.stringify({reportPlay:u}),p=c+"/api/v2/playback/report";i&&!t?y(p,l,!0):navigator.sendBeacon?navigator.sendBeacon(p+"?_ctype=json&auth="+h,l):y(p,l,!1)}}function y(t,e,i){window.XMLHttpRequest&&t&&((0,a.default)({method:"POST",headers:{auth:h,"Content-Type":"application/json"},url:t,body:e,async:i}),i&&(T&&clearTimeout(T),T=setTimeout((function(){v(!1)}),l)))}function m(){return i.isLive(t)}function E(){w.logger&&w.logger.setPlayType(m()?o.PLAYTYPE.LIVE:o.PLAYTYPE.VOD)}var w=this;this.logger=new n.default(t,i);var b=r.guid,S=null,T=null;this.setReportInterval=function(t){l=1e3*Math.max(60,t||r.reportInterval||0)}.bind(this),this.setReportInterval(l),this.disconnect=function(){p(),this.agent=null,this.logger=null,T&&clearTimeout(T)}.bind(this),this.setAgent=function(t){this.agent=t}.bind(this),this.saveState=function(){this.logger&&this.logger.saveCurrentState(b)}.bind(this);var I={onTimeUpdate:function(){},onError:function(){},onPause:f.bind(null,o.EVENT.player.state_pause),onPlay:f.bind(null,o.EVENT.player.state_play),onBuffering:f.bind(null,o.EVENT.player.state_buffering),onEnd:function(){f(o.EVENT.player.state_end),d(u.DEFAULT),p()},onSeekEnd:function(){if(this.logger){var t=this.logger.lastSegmentPercentage,e=this.logger.getPlayerPercentage();if(0!==t||0!==e){var i=t<e?o.EVENT.player.state_seek_forward:o.EVENT.player.state_seek_reverse;this.logger.onPlayerStateChange(i,e,e),this.saveState()}}}.bind(this),onCanPlay:function(){g(),setTimeout((function(){v(!1)}),1e3)}};!function(){if(i.setEventHandlers&&i.setEventHandlers(t,I),window.onbeforeunload){var e=window.onbeforeunload;window.onbeforeunload=function(){d(u.NONE),p(),e()}}else window.onbeforeunload=function(){d(u.NONE),p()};if(window.onunload){var r=window.onunload;window.onunload=function(){d(u.NONE),p(),r()}}else window.onunload=function(){d(u.NONE),p()}}()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),n=function(t){return t&&t.__esModule?t:{default:t}}(i(29));e.default=function(t,e){var i=new Date;this.startTime=i.getTime(),this.playerState=r.EVENT.player.state_none,this.playType=r.PLAYTYPE.LIVE,this.firstEventTime=0,this.firstPlayTime=0,this.firstBufferTime=0,this.bufferTime=0,this.lastTime=0,this.lastEvent=0,this.stallCount=0,this.stallTime=0,this.agentEventList="",this.rawEventList="",this.resetPlayTime=!1,this.lastFlashPlayStateTime=0,this.mediaEnded=!1,this.playDuration=0,this.lastReportTime=-1,this.duration=0,this.percentage=0,this.maxPercentage=0,this.buffering=!1,this.segmentList="",this.lastSegmentEvent="",this.lastSegmentPercentage=0,this.playStateCallback=null,this.getTime=function(){return(new Date).getTime()-this.startTime},this.getLastEvent=function(){return this.lastEvent},this.timeToPercent=function(t){if(0==this.duration)return 0;var e=this.duration?Math.round(1e3*t/this.duration)/10:0;return Math.min(e,100)},this.getPlayerPercentage=function(){var i=e.getPlayerDuration(t),r=e.getPlayerPosition(t);return(0,n.default)(i)&&(0,n.default)(r)&&0!=i&&(this.duration=i,this.percentage=Math.round(r/this.duration)/10,this.percentage=Math.min(this.percentage,100),this.maxPercentage=Math.max(this.maxPercentage,this.percentage)),this.percentage},this.getCachedPlayerPercentage=function(){return this.percentage},this.getMaxPercentage=function(){return this.maxPercentage},this.getStartTime=function(){return this.startTime},this.getPlayDuration=function(){return this.lastEvent==r.EVENT.player.state_play&&this.onPlayerStateChange(r.EVENT.player.state_play),this.playDuration},this.isPlaying=function(){return e.isPlaying(t)},this.updateLastReportTime=function(){this.lastReportTime=this.getTime()},this.hasNewReportingData=function(){return this.isPlaying()||this.lastTime>this.lastReportTime},this.getBufferTime=function(){return this.bufferTime},this.getPrepareTime=function(){return this.firstPlayTime},this.getStallCount=function(){return this.stallCount},this.getStallTime=function(){return this.stallTime},this.getSegmentList=function(){return this.segmentList},this.getEventList=function(){var t=this.agentEventList+this.rawEventList;if(t.length>=r.LIMITS.LIMIT_REPORT_EVENTS_INFO){var e=(t=t.substring(0,r.LIMITS.LIMIT_REPORT_EVENTS_INFO)).lastIndexOf(":");e>0&&(t=t.substring(0,e))}return t},this.isMediaEnded=function(){return this.mediaEnded},this.isBuffering=function(){return this.buffering},this.addSegment=function(t,e,i){var n=this.segmentList+"("+t+","+e+","+i+")";n.length<r.LIMITS.LIMIT_REPORT_SEGMENTS_INFO&&(this.segmentList=n)},this.addAgentEvent=function(t){var e=this.agentEventList+":"+t+":"+this.getTime();e.length<r.LIMITS.LIMIT_REPORT_EVENTS_INFO&&(this.agentEventList=e)},this.onPlayerStateChange=function(t,e,i){if(t!=r.EVENT.player.state_ready){var n=this.getTime(),o=n-this.lastTime,s=this.getCachedPlayerPercentage();if(this.lastEvent==r.EVENT.player.state_play&&(this.playDuration+=n-this.lastTime),this.lastEvent==t)return void(this.lastTime=n);0==this.firstEventTime&&(this.firstEventTime=n),0==this.resetPlayTime&&0!=this.firstPlayTime&&this.lastEvent==r.EVENT.player.state_play&&t==r.EVENT.player.state_buffering&&o<10&&(this.resetPlayTime=!0,this.firstPlayTime=0),0==this.firstBufferTime&&t==r.EVENT.player.state_buffering&&(this.firstBufferTime=n),0!=this.firstPlayTime&&this.lastEvent==r.EVENT.player.state_buffering&&t!=r.EVENT.player.state_buffering&&o>10&&(this.stallCount++,this.stallTime+=n-this.lastTime),0===this.firstPlayTime&&t===r.EVENT.player.state_play&&(this.firstPlayTime=n,this.bufferTime=n-this.firstBufferTime),this.rawEventList+=":"+t+":"+n,t==r.EVENT.player.state_end&&(this.percentage=this.maxPercentage=100,this.mediaEnded=!0),this.buffering=t==r.EVENT.player.state_buffering,t==r.EVENT.player.state_stop&&(this.addSegment(this.lastSegmentPercentage,s,"st"),this.lastSegmentPercentage=0),t==r.EVENT.player.state_pause&&(this.addSegment(this.lastSegmentPercentage,s,"ps"),this.lastSegmentPercentage=s),t==r.EVENT.player.state_forward&&(this.addSegment(this.lastSegmentPercentage,e,"ff"),this.lastSegmentPercentage=i),t==r.EVENT.player.state_reverse&&(this.addSegment(this.lastSegmentPercentage,e,"rw"),this.lastSegmentPercentage=i),t==r.EVENT.player.state_exit&&(this.lastEvent==r.EVENT.player.state_stop&&o<100?this.addSegment(s,s,"ex"):this.addSegment(this.lastSegmentPercentage,s,"ex")),this.lastTime=n,this.lastEvent=t,this.playStateCallback&&this.playStateCallback(t)}},this.saveLocalStorage=function(t,e){if("undefined"!=typeof Storage)try{localStorage.setItem(t,e)}catch(t){return void console.log(t)}},this.readLocalStorage=function(t){if("undefined"!=typeof Storage)try{return localStorage.getItem(t)}catch(t){return console.log(t),null}},this.removeLocalStorage=function(t){if("undefined"!=typeof Storage)try{localStorage.removeItem(t)}catch(t){return void console.log(t)}},this.saveCurrentState=function(t){if(t){var e=this.readLocalStorage("ksdn.current.report.session.id");e&&e!=t&&this.removeLocalStorage("ksdn.report.session.data."+e),this.saveLocalStorage("ksdn.current.report.session.id",t);var i={startTime:this.startTime,playerState:this.playerState,firstEventTime:this.firstEventTime,firstPlayTime:this.firstPlayTime,firstBufferTime:this.firstBufferTime,segmentList:this.segmentList,stallCount:this.stallCount,stallTime:this.stallTime,bufferTime:this.getBufferTime(),playDuration:this.playDuration,agentEventList:this.agentEventList,rawEventList:this.rawEventList,lastTime:this.lastTime,lastEvent:this.lastEvent,playType:this.playType};this.saveLocalStorage("ksdn.report.session.data."+t,JSON.stringify(i))}},this.readSavedState=function(t){if(!t)return null;var e=this.readLocalStorage("ksdn.current.report.session.id");if(e){if(e==t){var i=this.readLocalStorage("ksdn.report.session.data."+t);return JSON.parse(i)}this.removeLocalStorage("ksdn.report.session.data."+e)}return null},this.restoreSavedState=function(t){if(t){var e=this.readSavedState(t);if(e){this.startTime=e.startTime,this.playerState=e.playerState,this.firstEventTime=e.firstEventTime,this.firstPlayTime=e.firstPlayTime,this.firstBufferTime=e.firstBufferTime,this.segmentList=e.segmentList,this.stallCount=e.stallCount,this.stallTime=e.stallTime,this.bufferTime=e.bufferTime,this.playDuration=e.playDuration,this.lastTime=e.lastTime,this.lastEvent=e.lastEvent,this.playType=e.playType,this.agentEventList=e.agentEventList;var i=this.getTime(),n=e.rawEventList+":"+r.EVENT.player.state_reload+":"+i;this.rawEventList=n}}},this.setPlayType=function(t){this.playType=t},this.getPlayType=function(){return this.playType}}},function(t,e,i){var r=i(30).isFinite;t.exports=function(t){return"number"==typeof t&&r(t)}},function(t,e,i){var r=i(31),n="object"==typeof self&&self&&self.Object===Object&&self,o=r||n||Function("return this")();t.exports=o},function(t,e,i){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(e,i(0))}])}).call(this,i(142).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=i(144),n=i(145),o=i(146);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,i){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return h(this,t,e,i)}function h(t,e,i,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,r){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,i):new Uint8Array(e,i,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=p(t,e);return t}(t,e,i,r):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!u.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,i),n=(t=a(t,r)).write(e,i);n!==r&&(t=t.slice(0,n));return t}(t,e,i):function(t,e){if(u.isBuffer(e)){var i=0|f(e.length);return 0===(t=a(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(c(e),t=a(t,e<0?0:0|f(e)),!u.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function p(t,e){var i=e.length<0?0:0|f(e.length);t=a(t,i);for(var r=0;r<i;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return F(t).length;default:if(r)return j(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,i){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,i);case"utf8":case"utf-8":return P(this,e,i);case"ascii":return O(this,e,i);case"latin1":case"binary":return A(this,e,i);case"base64":return _(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function y(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,i,r,n);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):m(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function m(t,e,i,r,n){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,i/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(n){var c=-1;for(o=i;o<a;o++)if(h(t,o)===h(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(i+u>a&&(i=a-u),o=i;o>=0;o--){for(var l=!0,p=0;p<u;p++)if(h(t,o+p)!==h(e,p)){l=!1;break}if(l)return o}return-1}function E(t,e,i,r){i=Number(i)||0;var n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[i+s]=a}return s}function w(t,e,i,r){return V(j(e,t.length-i),t,i,r)}function b(t,e,i,r){return V(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function S(t,e,i,r){return b(t,e,i,r)}function T(t,e,i,r){return V(F(e),t,i,r)}function I(t,e,i,r){return V(function(t,e){for(var i,r,n,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),r=i>>8,n=i%256,o.push(n),o.push(r);return o}(e,t.length-i),t,i,r)}function _(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function P(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var o,s,a,u,h=t[n],c=null,l=h>239?4:h>223?3:h>191?2:1;if(n+l<=i)switch(l){case 1:h<128&&(c=h);break;case 2:128==(192&(o=t[n+1]))&&(u=(31&h)<<6|63&o)>127&&(c=u);break;case 3:o=t[n+1],s=t[n+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[n+1],s=t[n+2],a=t[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,l=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),n+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return i}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,i){return h(null,t,e,i)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,i){return function(t,e,i,r){return c(e),e<=0?a(t,e):void 0!==i?"string"==typeof r?a(t,e).fill(i,r):a(t,e).fill(i):a(t,e)}(null,t,e,i)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,r=e.length,n=0,o=Math.min(i,r);n<o;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var r=u.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var s=t[i];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,i,r,n){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return-1;if(e>=i)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(r>>>=0),s=(i>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(r,n),c=t.slice(e,i),l=0;l<a;++l)if(h[l]!==c[l]){o=h[l],s=c[l];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},u.prototype.indexOf=function(t,e,i){return y(this,t,e,i,!0)},u.prototype.lastIndexOf=function(t,e,i){return y(this,t,e,i,!1)},u.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,t,e,i);case"utf8":case"utf-8":return w(this,t,e,i);case"ascii":return b(this,t,e,i);case"latin1":case"binary":return S(this,t,e,i);case"base64":return T(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function A(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function R(t,e,i){var r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);for(var n="",o=e;o<i;++o)n+=U(t[o]);return n}function C(t,e,i){for(var r=t.slice(e,i),n="",o=0;o<r.length;o+=2)n+=String.fromCharCode(r[o]+256*r[o+1]);return n}function N(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,i,r,n,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function D(t,e,i,r){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-i,2);n<o;++n)t[i+n]=(e&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function L(t,e,i,r){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-i,4);n<o;++n)t[i+n]=e>>>8*(r?n:3-n)&255}function x(t,e,i,r,n,o){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function M(t,e,i,r,o){return o||x(t,0,i,4),n.write(t,e,i,r,23,4),i+4}function B(t,e,i,r,o){return o||x(t,0,i,8),n.write(t,e,i,r,52,8),i+8}u.prototype.slice=function(t,e){var i,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=u.prototype;else{var n=e-t;i=new u(n,void 0);for(var o=0;o<n;++o)i[o]=this[o+t]}return i},u.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||N(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return r},u.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||N(t,e,this.length);for(var r=this[t+--e],n=1;e>0&&(n*=256);)r+=this[t+--e]*n;return r},u.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||N(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||N(t,e,this.length);for(var r=e,n=1,o=this[t+--r];r>0&&(n*=256);)o+=this[t+--r]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),n.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),n.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),n.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),n.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,i,r){(t=+t,e|=0,i|=0,r)||k(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,o=0;for(this[e]=255&t;++o<i&&(n*=256);)this[e+o]=t/n&255;return e+i},u.prototype.writeUIntBE=function(t,e,i,r){(t=+t,e|=0,i|=0,r)||k(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,o=1;for(this[e+n]=255&t;--n>=0&&(o*=256);)this[e+n]=t/o&255;return e+i},u.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e|=0,!r){var n=Math.pow(2,8*i-1);k(this,t,e,i,n-1,-n)}var o=0,s=1,a=0;for(this[e]=255&t;++o<i&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},u.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e|=0,!r){var n=Math.pow(2,8*i-1);k(this,t,e,i,n-1,-n)}var o=i-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},u.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,i){return M(this,t,e,!0,i)},u.prototype.writeFloatBE=function(t,e,i){return M(this,t,e,!1,i)},u.prototype.writeDoubleLE=function(t,e,i){return B(this,t,e,!0,i)},u.prototype.writeDoubleBE=function(t,e,i){return B(this,t,e,!1,i)},u.prototype.copy=function(t,e,i,r){if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);var n,o=r-i;if(this===t&&i<e&&e<r)for(n=o-1;n>=0;--n)t[n+e]=this[n+i];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},u.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var s=u.isBuffer(t)?t:j(new u(t,r).toString()),a=s.length;for(o=0;o<i-e;++o)this[o+e]=s[o%a]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){var i;e=e||1/0;for(var r=t.length,n=null,o=[],s=0;s<r;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function F(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}}).call(this,i(143))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";e.byteLength=function(t){return 3*t.length/4-h(t)},e.toByteArray=function(t){var e,i,r,s,a,u=t.length;s=h(t),a=new o(3*u/4-s),i=s>0?u-4:u;var c=0;for(e=0;e<i;e+=4)r=n[t.charCodeAt(e)]<<18|n[t.charCodeAt(e+1)]<<12|n[t.charCodeAt(e+2)]<<6|n[t.charCodeAt(e+3)],a[c++]=r>>16&255,a[c++]=r>>8&255,a[c++]=255&r;2===s?(r=n[t.charCodeAt(e)]<<2|n[t.charCodeAt(e+1)]>>4,a[c++]=255&r):1===s&&(r=n[t.charCodeAt(e)]<<10|n[t.charCodeAt(e+1)]<<4|n[t.charCodeAt(e+2)]>>2,a[c++]=r>>8&255,a[c++]=255&r);return a},e.fromByteArray=function(t){for(var e,i=t.length,n=i%3,o="",s=[],a=0,u=i-n;a<u;a+=16383)s.push(c(t,a,a+16383>u?u:a+16383));1===n?(e=t[i-1],o+=r[e>>2],o+=r[e<<4&63],o+="=="):2===n&&(e=(t[i-2]<<8)+t[i-1],o+=r[e>>10],o+=r[e>>4&63],o+=r[e<<2&63],o+="=");return s.push(o),s.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],n[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function c(t,e,i){for(var n,o,s=[],a=e;a<i;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],s.push(r[(o=n)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,r,n){var o,s,a=8*n-r-1,u=(1<<a)-1,h=u>>1,c=-7,l=i?n-1:0,p=i?-1:1,f=t[e+l];for(l+=p,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+l],l+=p,c-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=h}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,i,r,n,o){var s,a,u,h=8*o-n-1,c=(1<<h)-1,l=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(e*u-1)*Math.pow(2,n),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,n),s=0));n>=8;t[i+f]=255&a,f+=d,a/=256,n-=8);for(s=s<<n|a,h+=n;h>0;t[i+f]=255&s,f+=d,s/=256,h-=8);t[i+f-d]|=128*g}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(65),n=i(148),o=function(){function t(t,e,i){this.$scope=t,this.$log=e,this.ksdn=i,this.vm={playerConfig:null}}return t.prototype.$onInit=function(){this.$scope.config&&this.$scope.webcast?this.vm.playerConfig=this.getPlayerConfig(this.$scope.webcast):this.$log.error("basic config for bitdash player is missing!")},t.prototype.getAudioOnlyPlayerConfig=function(){return this.$scope.webcast.theme.audioOnlyFileUrl?{audioOnlyOverlayConfig:{backgroundImageUrl:this.$scope.webcast.theme.audioOnlyFileUrl,hiddeIndicator:!0}}:{}},t.prototype.getPlayerConfig=function(t){var e=this.$scope.options||{},i=this.getActiveLanguage(t.languages,t.language),o=i.player;return e.forcedState===n.WebcastState.LIVE&&i.playerLive&&(o=i.playerLive),e.forcedPlayer&&(o.type=e.forcedPlayer),o.type===r.PlayerPlaybackType.KSDN&&(o.p2p.token=this.createKSDNPublicToken(e.userId,o.p2p)),o},t.prototype.getActiveLanguage=function(t,e){return e?t.find((function(t){return e===t.language})):t[0]},t.prototype.createKSDNPublicToken=function(t,e){return this.ksdn.createPublicToken(t,e.urn)},t.$inject=["$scope","$log","ksdn"],t}();e.BitmovinPlayerController=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.LIVE="live",t.POST_LIVE="postlive",t.ONDEMAND="ondemand"}(e.WebcastState||(e.WebcastState={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(63),n=i(150),o=i(65),s=i(151);function a(t,i,n,a,u,h){return{controller:"MiBitdashController",controllerAs:"bitdashVm",replace:!0,restrict:"EA",scope:{config:"=",options:"=?",playerApiReady:"&?",webcast:"="},template:'<div id="mi-bitdash-player" width="100%" height="auto"></div>',link:function(c,l,p,f){var d,g=c.webcast,v=c.config,y=c.options&&c.options.recoverState?c.options.recoverState:null,m=c.options&&c.options.youbora?c.options.youbora:null;function E(){return t.window.bitmovin.player("mi-bitdash-player")}function w(){var t={hls:f.vm.playerConfig.hlsUrl};v.source={},T(E()).then((function(){return d.load(t).then((function(){return I()})).catch((function(){_()}))})).catch((function(t){return b(t)}))}function b(t){i.error("player error:",t)}function S(e){var i="audio-only"===g.layout.layout||"audio-only-compact"===g.layout.layout,r=t.window.miBitmovinUi.playerui.UIManager.Factory;i?r.buildAudioOnlyUI(e,f.getAudioOnlyPlayerConfig()):r.buildAudioVideoUI(e);var n,o=(n="bitmovinplayer-container",t.document.getElementsByClassName(n)[0]);o&&(o.style.minWidth="175px",o.style.minHeight="101px",t.document.getElementById("bitmovinplayer-video-mi-bitdash-player").setAttribute("title",g.name))}function T(t){var r=function(){var t=[];if(f.vm.playerConfig.videoId){var r=new s.AnalyticsPlugin(f.vm.playerConfig.videoId,i);t.push(r)}if(f.vm.playerConfig.videoTracks){var n=new e.deps.SubtitlesPlugin(f.vm.playerConfig.videoTracks);t.push(n)}return t}(),n=m?new a.Plugin(m):null;return v.style={ux:!1},t.setup(v).then((function(t){if(S(t),(d=new e.deps.PlayerApi(t)).setupPlugins(r,y),n){var i=new u(t);n.setAdapter(i)}return t}))}function I(){y&&(d.setVolume(y.volume),y.seekTo&&d.seek(y.seekTo),y.isMuted&&d.mute()),_()}function _(){var t={playerApi:d.getPublicApi()};(c.playerApiReady||r.noop)({$event:t})}!function(){if(!f.vm.playerConfig)return;switch(f.vm.playerConfig.type){case o.PlayerPlaybackType.KSDN:!function(){var t=E();v.source={};var e=f.vm.playerConfig.p2p.token,r=f.vm.playerConfig.p2p.urn,o=f.vm.playerConfig.p2p.host,s=f.vm.playerConfig.hlsUrl;T(t).then((function(t){var a,u=new n.Players.Bitmovin({auth:e,host:o,fallbackSrc:s}),h=(a="Kollective plugin error: ",{onAgentNotDetected:function(t,e){i.error(a+" Machine does not have a Kollective Agent installed. Reason:",e)},onAgentRejected:function(t,e){e.provisionedForCurrentUrn||i.error(a+" Agent detected but not provisioned for URN"),e.notBlackedOut||i.error(a+" Agent detected but is currently blacked out")},onPlaybackRequestFailure:function(t,e){return i.error(a+"  Failure to retrieve playback info for the provided URN:",e),!0},onPrimingFailure:function(t){i.error(a+"  Agent fails to start priming the stream through the Kollective ECDN")},onSessionFailure:function(){i.error(a+" Failure to start a session with the agent")},setSource:function(t,e){t.load({hls:e}).then((function(){return I()})).catch((function(t){return b(t)}))}});u.play(t,r,h)})).catch((function(t){return b(t)}))}();break;case o.PlayerPlaybackType.HIVE:case o.PlayerPlaybackType.HIVE_WEB_RTC:!function(){var t=f.vm.playerConfig.p2p.url,e=f.vm.playerConfig.p2p.techOrder||["HiveJava","HiveJS"];e.push("StatsJS");var r={debugLevel:"off",hiveTechOrder:e};h.initHiveSDN();var n=E(),o=new h(n,r);T(n).then((function(e){return function(t,e,r){return t.initSession(e).then((function(t){return r.load({hls:t.manifest}).then((function(){return I()})).catch((function(t){return b(t)}))})).catch((function(t){i.warn("Hive plugin failed, fallback to default player. Error: "+JSON.stringify(t)),r.destroy(),setTimeout((function(){w()}),60)}))}(o,t,e)})).catch((function(t){b(t)}))}();break;default:w()}}(),c.$on("$destroy",(function(){d&&(d.destroy(),d=null)}))}}}e.deps={SubtitlesPlugin:s.SubtitlesPlugin,PlayerApi:n.PlayerApi},a.$inject=["$window","$log","ksdn","YouboraLib","YouboraAdapter","HiveBitmovin"],e.BitmovinPlayerDirective=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(35),n=function(){function t(t){this.playerRef=t,this.eventListeners={ended:[],playing:[],timechanged:[],onSourceLoaded:[],onSourceUnloaded:[]},this.plugins=[],this.addListeners()}return t.prototype.setupPlugins=function(t,e){var i=this;this.plugins=t,this.plugins.forEach((function(t){return e?t.initRecovered(i,e):t.init(i)}))},t.prototype.seek=function(t,e){return this.playerRef.seek(t,e)},t.prototype.on=function(t,e){this.eventListeners[t].push(e)},t.prototype.off=function(t,e){this.eventListeners[t]=this.eventListeners[t].filter((function(t){return t!==e}))},t.prototype.pause=function(t){this.playerRef.isPlaying()&&this.playerRef.pause(t)},t.prototype.mute=function(t){this.playerRef.mute(t)},t.prototype.hasEnded=function(){return this.playerRef.hasEnded()},t.prototype.getCurrentTime=function(){return this.playerRef.getCurrentTime()},t.prototype.isPaused=function(){return this.playerRef.isPaused()},t.prototype.isMuted=function(){return this.playerRef.isMuted()},t.prototype.getVolume=function(){return this.playerRef.getVolume()},t.prototype.setVolume=function(t,e){this.playerRef.setVolume(t,e)},t.prototype.getDuration=function(){return this.playerRef.getDuration()},t.prototype.addSubtitle=function(t,e){var i=this.mapVideoTrackConfigToBitmovinSubtitle(t,e);this.playerRef.addSubtitle(i)},t.prototype.getSubtitle=function(){return this.playerRef.getSubtitle()},t.prototype.setSubtitle=function(t){return this.playerRef.setSubtitle(t)},t.prototype.load=function(t){return this.playerSource=t,this.playerRef.load(t)},t.prototype.reload=function(){var t=this;return this.playerSource?(this.playerRef.unload(),new Promise((function(e,i){t.load(t.playerSource).then((function(){e("loaded")})).catch((function(t){i(t)}))}))):Promise.reject()},t.prototype.destroy=function(t){var e=this;return this.isDestroyed?Promise.resolve():(this.isDestroyed=!0,new Promise((function(i){console.log("is destroying..."),e.playerRef.unload(),e.plugins.forEach((function(e){return e.destroy(t)})),console.log("is destroying... unloaded"),setTimeout((function(){e.playerRef.destroy(),console.log("is destroying... destroyed"),i()}),60)})))},t.prototype.getPublicApi=function(){var t=this;return{destroy:function(e){return t.destroy(e)},getCurrentTime:function(){return t.getCurrentTime()},getDuration:function(){return t.getDuration()},getVolume:function(){return t.getVolume()},hasEnded:function(){return t.hasEnded()},isMuted:function(){return t.isMuted()},isPaused:function(){return t.isPaused()},mute:function(e){return t.mute(e)},off:function(e,i){return t.off(e,i)},on:function(e,i){return t.on(e,i)},pause:function(e){return t.pause(e)},reload:function(){return t.reload()},seek:function(e,i){return t.seek(e,i)},setVolume:function(e,i){return t.setVolume(e,i)},getSubtitle:function(){return t.getSubtitle()}}},t.prototype.mapVideoTrackConfigToBitmovinSubtitle=function(t,e){return{id:e,lang:t.language.toLowerCase(),label:t.label,kind:this.mapVideoTrackType(t.type),url:t.source}},t.prototype.mapVideoTrackType=function(t){return t.toLowerCase().includes("caption")?"caption":"subtitle"},t.prototype.addListeners=function(){var t=this;this.playerRef.addEventHandler(this.playerRef.EVENT.ON_TIME_CHANGED,(function(e){return t.eventListeners[r.PlayerEvent.TimeChanged].forEach((function(t){return t({time:e.time})}))})),this.playerRef.addEventHandler(this.playerRef.EVENT.ON_PLAY,(function(){return t.eventListeners[r.PlayerEvent.PLAY].forEach((function(t){return t()}))})),this.playerRef.addEventHandler(this.playerRef.EVENT.ON_PLAYBACK_FINISHED,(function(){return t.eventListeners[r.PlayerEvent.ENDED].forEach((function(t){return t()}))})),this.playerRef.addEventHandler(this.playerRef.EVENT.ON_SOURCE_LOADED,(function(){return t.eventListeners[r.PlayerEvent.ON_SOURCE_LOADED].forEach((function(t){return t()}))})),this.playerRef.addEventHandler(this.playerRef.EVENT.ON_SOURCE_UNLOADED,(function(){return t.eventListeners[r.PlayerEvent.ON_SOURCE_UNLOADED].forEach((function(t){return t()}))}))},t}();e.PlayerApi=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0);r.__exportStar(i(152),e),r.__exportStar(i(153),e)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(35),n=function(){function t(t){var e=this;this.videoTrackConfigs=t,this.recoverSubtitleId=null,this.sourceLoadedHandler=function(){return e.addSubtitles()}}return t.prototype.init=function(t){this.playerApi=t,this.addListeners()},t.prototype.initRecovered=function(t,e){this.playerApi=t,this.recoverSubtitleId=e.selectedSubtitleId,this.addListeners()},t.prototype.destroy=function(){this.removeListeners()},t.prototype.addSubtitles=function(){var t=this;this.videoTrackConfigs.forEach((function(e,i){return t.playerApi.addSubtitle(e,"subtitle"+i)})),this.recoverSubtitleId&&(this.playerApi.setSubtitle(this.recoverSubtitleId),this.recoverSubtitleId=null)},t.prototype.addListeners=function(){this.playerApi.on(r.PlayerEvent.ON_SOURCE_LOADED,this.sourceLoadedHandler)},t.prototype.removeListeners=function(){this.playerApi.off(r.PlayerEvent.ON_SOURCE_LOADED,this.sourceLoadedHandler)},t}();e.SubtitlesPlugin=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(35),o=i(154);e.deps={axios:o,window:window};var s=function(){function t(t,i){var r=this;this.videoId=t,this.logger=i,this.time=0,this.videoPlayPressed=!1,this.http=e.deps.axios.create({baseURL:"https://c.video-cdn.net/"}),this.beforeUnloadHandler=function(){return r.sendExitEvent()},this.playHandler=function(){return r.sendPlayEvent()},this.endedHandler=function(){r.removeBeforeUnloadEvent(),r.videoPlayPressed=!1,r.playerApi.on(n.PlayerEvent.PLAY,r.playHandler),r.sendExitEvent()}}return t.prototype.init=function(t){this.playerApi=t,this.sendViewEvent(),this.addListeners()},t.prototype.initRecovered=function(t,e){var i=this;this.playerApi=t,this.time=e.seekTo||0,e.hasEnded||!e.playPressed?this.addListeners():(this.videoPlayPressed=!0,this.addBeforeUnloadEvent(),this.playerApi.on(n.PlayerEvent.ENDED,this.endedHandler),this.playerApi.on(n.PlayerEvent.TimeChanged,(function(t){return i.onTimeChanged(t)})))},t.prototype.destroy=function(t){t&&t.pageChange&&this.videoPlayPressed&&this.sendExitEvent(),this.removeBeforeUnloadEvent()},t.prototype.addListeners=function(){var t=this;this.playerApi.on(n.PlayerEvent.PLAY,this.playHandler),this.playerApi.on(n.PlayerEvent.ENDED,this.endedHandler),this.playerApi.on(n.PlayerEvent.TimeChanged,(function(e){return t.onTimeChanged(e)}))},t.prototype.sendViewEvent=function(){this.sendEvent("view",{url:document.location.href})},t.prototype.sendPlayEvent=function(){this.videoPlayPressed=!0,this.addBeforeUnloadEvent(),this.playerApi.off(n.PlayerEvent.PLAY,this.playHandler),this.sendEvent("play",{url:document.location.href})},t.prototype.sendExitEvent=function(){this.sendEvent("exit",{"current-time":this.time})},t.prototype.onTimeChanged=function(t){this.time=t.time},t.prototype.sendEvent=function(t,e){var i=this,n=r.__assign({event:t,"video-id":this.videoId},e);this.http.get("event?",{params:n}).catch((function(t){i.logger.error("mi-analytics error",t)}))},t.prototype.addBeforeUnloadEvent=function(){e.deps.window.addEventListener("beforeunload",this.beforeUnloadHandler)},t.prototype.removeBeforeUnloadEvent=function(){e.deps.window.removeEventListener("beforeunload",this.beforeUnloadHandler)},t}();e.AnalyticsPlugin=s},function(t,e,i){t.exports=i(155)},function(t,e,i){"use strict";var r=i(8),n=i(66),o=i(156),s=i(72);function a(t){var e=new o(t),i=n(o.prototype.request,e);return r.extend(i,o.prototype,e),r.extend(i,e),i}var u=a(i(69));u.Axios=o,u.create=function(t){return a(s(u.defaults,t))},u.Cancel=i(73),u.CancelToken=i(171),u.isCancel=i(68),u.all=function(t){return Promise.all(t)},u.spread=i(172),t.exports=u,t.exports.default=u},function(t,e,i){"use strict";var r=i(8),n=i(67),o=i(157),s=i(158),a=i(72);function u(t){this.defaults=t,this.interceptors={request:new o,response:new o}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],i=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)i=i.then(e.shift(),e.shift());return i},u.prototype.getUri=function(t){return t=a(this.defaults,t),n(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,i){return this.request(r.merge(i||{},{method:t,url:e}))}})),r.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,i,n){return this.request(r.merge(n||{},{method:t,url:e,data:i}))}})),t.exports=u},function(t,e,i){"use strict";var r=i(8);function n(){this.handlers=[]}n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=n},function(t,e,i){"use strict";var r=i(8),n=i(159),o=i(68),s=i(69);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return a(t),e.data=n(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,i){"use strict";var r=i(8);t.exports=function(t,e,i){return r.forEach(i,(function(i){t=i(t,e)})),t}},function(t,e){var i,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,h=[],c=!1,l=-1;function p(){c&&u&&(c=!1,u.length?h=u.concat(h):l=-1,h.length&&f())}function f(){if(!c){var t=a(p);c=!0;for(var e=h.length;e;){for(u=h,h=[];++l<e;)u&&u[l].run();l=-1,e=h.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new d(t,e)),1!==h.length||c||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){"use strict";var r=i(8);t.exports=function(t,e){r.forEach(t,(function(i,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[r])}))}},function(t,e,i){"use strict";var r=i(71);t.exports=function(t,e,i){var n=i.config.validateStatus;!n||n(i.status)?t(i):e(r("Request failed with status code "+i.status,i.config,null,i.request,i))}},function(t,e,i){"use strict";t.exports=function(t,e,i,r,n){return t.config=e,i&&(t.code=i),t.request=r,t.response=n,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,i){"use strict";var r=i(165),n=i(166);t.exports=function(t,e){return t&&!r(e)?n(t,e):e}},function(t,e,i){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,i){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,i){"use strict";var r=i(8),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,i,o,s={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),i=r.trim(t.substr(o+1)),e){if(s[e]&&n.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([i]):s[e]?s[e]+", "+i:i}})),s):s}},function(t,e,i){"use strict";var r=i(8),n=i(169);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function o(t){var r=t;if(n(t))throw new Error("URL contains XSS injection attempt");return e&&(i.setAttribute("href",r),r=i.href),i.setAttribute("href",r),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=o(window.location.href),function(e){var i=r.isString(e)?o(e):e;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0}},function(t,e,i){"use strict";t.exports=function(t){return/(\b)(on\w+)=|javascript|(<\s*)(\/*)script/gi.test(t)}},function(t,e,i){"use strict";var r=i(8);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,i,n,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),r.isString(n)&&a.push("path="+n),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,i){"use strict";var r=i(73);function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var i=this;t((function(t){i.reason||(i.reason=new r(t),e(i.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n((function(e){t=e})),cancel:t}},t.exports=n},function(t,e,i){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,i){var r=n,n={noConflict:function(){return n=r,this}};n.VERSION=i(31),n.polyfills=i(175),n.polyfills(),n.Object=i(3),n.Emitter=i(14),n.Log=i(1),n.Log.loadLevelFromUrl(),n.Util=i(9),n.HybridNetwork=i(75),n.Chrono=i(27),n.Timer=i(37),n.Constants=i(11),n.Request=i(15),n.Communication=i(38),n.Transform=i(21),n.ViewTransform=i(76),n.ResourceTransform=i(77),n.CdnParser=i(79),n.HlsParser=i(78),n.OfflineParser=i(81),n.LocationheaderParser=i(80),n.Options=i(82),n.Plugin=i(185),n.Storage=i(39),n.RequestBuilder=i(40),n.PlayheadMonitor=i(86),n.Adapter=i(32),n.StandardAdapter=i(202),n.adapters={},n.Infinity=i(41),n.BackgroundDetector=i(83),n.DeviceDetector=i(84),n.Fingerprint=i(85),n.registerAdapter=function(t,e){this.adapters[t]=e}.bind(n),n.unregisterAdapter=function(t){this.adapters[t]=null}.bind(n),t.exports=n},function(t){t.exports=JSON.parse('{"name":"youboralib","type":"lib","tech":"js","author":"Jordi Aguilar","version":"6.4.28","built":"2019-05-13","repo":"https://bitbucket.org/npaw/lib-plugin-js.git"}')},function(t,e){t.exports=function(){Function.prototype.bind=Function.prototype.bind||function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice,i=e.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n?this:t||window,i.concat(e.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o},Array.prototype.forEach=Array.prototype.forEach||function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function!");for(var i=this.length,r=0;r<i;r++)t.call(e,this[r],r,this)}}},function(t,e){var i=function(){};t.exports=function(t){if(arguments.length>1)throw Error("Second argument not supported");if(null===t)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof t)throw TypeError("Argument must be an object");return i.prototype=t,new i}},function(t,e){t.exports={cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(t){if(t){if(0===t.indexOf("TCP_HIT")||0===t.indexOf("TCP_MEM_HIT")||0===t.indexOf("TCP_IMS_HIT"))return 1;if(0===t.indexOf("TCP_MISS"))return 2}return 0}}},function(t,e){t.exports={cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(t){switch(t){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"AKAMAI",requestMethod:"GET",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom.+AkamaiGHost\/(.+)\).+/}],requestHeaders:{Pragma:"akamai-x-cache-on"},parseType:function(t){return-1!==t.indexOf("HIT")?1:-1!==t.indexOf("MISS")?2:0}}},function(t,e){t.exports={cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(t){switch(t){case"c":case"x":return 1;default:return 2}}}},function(t,e){t.exports={cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(t){switch(t){case"HIT":return 1;case"MISS":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"TELEFO",parsers:[{element:"host+type",headerName:"x-tcdn",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"x-tcdn":"host"},parseType:function(t){if(t){if(-1!==t.indexOf("p")||-1!==t.indexOf("c"))return 1;if(-1!==t.indexOf("i")||-1!==t.indexOf("m"))return 2}return 0}}},function(t,e){t.exports={parsers:[{element:"name",headerName:null,regex:/(.+)/}]}},function(t,e,i){var r=i(15),n=i(14),o=i(1),s=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(s.Event.DONE)},parse:function(t){var e=new r(t,null,null,{cache:!0});e.on(r.Event.SUCCESS,function(t){var e=t.getXHR().responseText,i=e.indexOf("<Location>"),r=e.indexOf("</Location>");i>-1&&r>-1?this._realResource=e.slice(i+10,r):o.warn("The Dash manifest doesnt contain Location tag"),this.done()}.bind(this)),e.on(r.Event.ERROR,function(t){this.done()}.bind(this)),e.send()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=s},function(t,e,i){var r=i(14),n=i(37),o=i(27),s=i(11),a=i(9),u=i(15),h=i(38),c=i(186),l=i(76),p=i(77),f=i(81),d=i(82),g=i(39),v=i(187),y=i(40),m=i(41),E=i(83),w=i(84),b=i(85),S=r.extend({constructor:function(t,e){this.storage=new g,this.fingerprint=new b(this),this.infinity=new m(this),this.isInitiated=!1,this.isPreloading=!1,this.preloadChrono=new o,this.initChrono=new o,this.options=new d(t),this.storage=new g(null,this.options.disableCookies),this.offlineStorage=new v,this._adapter=null,this._adsAdapter=null,this._ping=new n(this._sendPing.bind(this),5e3),this._beat=new n(this._sendBeat.bind(this),3e4),this._refreshData=new n(this._checkOldData.bind(this),36e5),this._refreshData.start(),this.sessionExpire=1e3*Number(this.storage.getLocal("sessionExpire"))||3e5,this.requestBuilder=new y(this),this.resourceTransform=new p(this),this.lastEventTime=null,e&&this.setAdapter(e),this.restartViewTransform(),this._initInfinity(),this.deviceDetector=new w,this.backgroundDetector=new E(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection()},_checkOldData:function(){this._adapter&&this._adapter.flags.isStarted||this.infinity.infinityStarted&&!this.infinity.infinityStopped||this.restartViewTransform()},restartViewTransform:function(){this.viewTransform=new l(this),this.viewTransform.on(l.Event.DONE,this._receiveData.bind(this)),this.getIsDataExpired()||this.storage.getLocal("accCode")!==this.options.accountCode&&this.storage.getSession("accCode")!==this.options.accountCode?(this.storage.removeStorages("data"),this.storage.removeStorages("session"),this.storage.removeLocal("infinityStarted"),this.storage.removeLocal("infinityStopped"),this.viewTransform.init()):this.viewTransform.setData(this.getStoredData())},_receiveData:function(t){this._ping.interval=1e3*t.target.response.pingTime,this._beat.interval=1e3*t.target.response.beatTime,this.sessionExpire=1e3*t.target.response.sessionExpire,this.youboraId=t.target.response.youboraId,this.storage.setStorages("data",t.target.response.msg),this.storage.setStorages("dataTime",(new Date).getTime()),this.storage.setStorages("accCode",this.options.accountCode),this.getIsSessionExpired()?(this.viewTransform.setSessionId(this.viewTransform.response.code),this.storage.setStorages("session",this.viewTransform.response.code)):this.viewTransform.setSessionId(this.getSessionId())},_reset:function(){this._stopPings(),this.resourceTransform=new p(this),this._adapter&&this._adapter.flags.reset(),this.isInitiated=!1,this.isStarted=!1,this.startDelayed=!1,this.isPreloading=!1,this.preloadChrono.reset(),this.initChrono.reset()},_send:function(t,e,i,r,n,o,a){var h=(new Date).getTime();this.options.preventZombieViews&&this.lastEventTime&&h>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=e===s.Service.STOP?null:h,i=this.requestBuilder.buildParams(i,e),this.getIsLive()&&(i.mediaDuration=void 0,i.playhead=void 0);var c={params:i,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(t,c),this._comm&&(null!==i||void 0!==n)&&this.options.enabled){this.lastServeiceSent=e;var l={};void 0!==n&&"GET"!=n&&(l.method=n);var p=new u(null,e,i,l);r&&p.setBody(r),this._comm.sendRequest(p,o,a)}},_initComm:function(){this.resourceTransform.init(this.getResource()),this._comm=new h,this._comm.addTransform(new c),this._comm.addTransform(this.viewTransform),this.options&&this.options.offline?this._comm.addTransform(new f(this)):this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(t){t&&(this.options.setOptions(t),"boolean"==typeof t["background.enabled"]&&(t["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection()))},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:s.WillSendEvent});a.assign(S.prototype,i(191)),a.assign(S.prototype,i(194)),a.assign(S.prototype,i(195)),a.assign(S.prototype,i(196)),a.assign(S.prototype,i(197)),a.assign(S.prototype,i(198)),a.assign(S.prototype,i(199)),a.assign(S.prototype,i(200)),a.assign(S.prototype,i(201)),t.exports=S},function(t,e,i){var r=i(21),n=i(11),o=r.extend({_services:[n.Service.INIT,n.Service.START,n.Service.OFFLINE_EVENTS],isBlocking:function(t){if(this._isBusy&&null!=t)if(-1!==this._services.indexOf(t.service))this.done();else if(t.service===n.Service.ERROR)return!1;return r.prototype.isBlocking.apply(this,arguments)}});t.exports=o},function(t,e,i){var r=i(3),n=i(39),o=r.extend({constructor:function(){this.storage=new n("youboraOffline",!0),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var t=this._getValidId();this.storage.setLocal(t,""),this.viewList.push(t),this.storage.setLocal("views",this.viewList),this.actualView=t},addEvent:function(t,e){if("/start"===t&&this._newView(),"/init"===t)return null;if(!this.actualView)return null;var i='{"request":"'+t.slice(1)+'",';for(var r in i+='"unixtime":'+Date.now()+",",e){if(void 0===e[r])break;i+='"'+r+'":',"code"===r?i+='"CODE_PLACEHOLDER",':"sessionId"===r?i+='"SESSION_PLACEHOLDER",':"parentId"===r?i+='"PARENT_PLACEHOLDER",':"sessionRoot"===r?i+='"ROOT_PLACEHOLDER",':"string"==typeof e[r]?i+='"'+e[r]+'",':"object"==typeof e[r]?i+='"'+JSON.stringify(e[r]).replace(/"/g,'\\"')+'",':i+=e[r]+","}i=i.slice(0,-1),i+="}";var n=this.storage.getLocal(this.actualView);""!=n&&(n+=","),this.storage.setLocal(this.actualView,n+i)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var t=0;;){var e=this.viewList[t];if(!this.givenIds.includes(e))return this.givenIds.push(e),["["+this.storage.getLocal(e)+"]",e];t++}return[null,null]},removeView:function(t){this.storage.removeLocal(t);var e=this.viewList.indexOf(t);-1!==e&&this.viewList.splice(e,1),-1!==(e=this.givenIds.indexOf(t))&&this.givenIds.splice(e,1),this.storage.setLocal("views",this.viewList.toString()),t===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var t="";this.storage.getLocal("views")?t=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===t?this.viewList=[]:"function"==typeof t.split&&(this.viewList=t.split(","))},_getValidId:function(){var t=Math.floor(1e8*Math.random()).toString();return this.viewList.indexOf(t)>=0?this._getValidId():t},sent:function(){this.givenIds=[]}});t.exports=o},function(t,e,i){var r=i(21),n=(i(11),r.extend({isBlocking:function(t){return!t.params.sessionId}}));t.exports=n},function(t,e,i){var r=i(3).extend({constructor:function(t){this.plugin=t},getAllData:function(){var t=this.getNonRandomData();return t.timestamp=this.getTimestamp(),t},getNonRandomData:function(){var t={};return t.userAgent=this.getUserAgent(),t.threads=this.getVirtualCores(),t.language=this.getLanguage(),t.langList=this.getAvailableLanguages(),t.resolution=this.getResolution(),t.colorDepth=this.getColorDepth(),t.deviceMemory=this.getMemory(),t.touchscreen=this.getTouchscreen(),t.localStorage=this.getLocalStorage(),t.sessionStorage=this.getSessionStorage(),t.cookiesAvailable=this.getCookiesAvailable(),t.flashAvailable=this.getHasFlash(),t.timeZone=this.getTimeZone(),t.plugins=this.getPluginList(),t},getUserAgent:function(){return this._navigatorCheck()?navigator.userAgent:null},getVirtualCores:function(){return this._navigatorCheck()?navigator.hardwareConcurrency:null},getLanguage:function(){return this._navigatorCheck()?navigator.language:null},getAvailableLanguages:function(){return this._navigatorCheck()?navigator.languages:null},getResolution:function(){return this._navigatorCheck()&&navigator.screen?navigator.screen.width.toString()+navigator.screen.height.toString():null},getColorDepth:function(){return this._navigatorCheck()&&navigator.screen?navigator.screen.colorDepth:null},getMemory:function(){return this._navigatorCheck()?navigator.deviceMemory:null},getTouchscreen:function(){return this._navigatorCheck()?navigator.maxTouchPoints:null},getLocalStorage:function(){return"undefined"!=typeof localStorage},getSessionStorage:function(){return"undefined"!=typeof sessionStorage},getCookiesAvailable:function(){return!!this._navigatorCheck()&&navigator.cookieEnabled},getHasFlash:function(){return!!this._navigatorCheck()&&(void 0!==navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||window.ActiveXObject&&0!=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))},getPluginList:function(){if(!this._navigatorCheck()||!navigator.plugins||0===navigator.plugins.length)return null;for(var t="",e=0;e<navigator.plugins.length;e++)t+=navigator.plugins[e].description+" "+navigator.plugins[e].filename+" "+navigator.plugins[e].name+" ";return t},getTimeZone:function(){return(new Date).getTimezoneOffset().toString()},getTimestamp:function(){return(new Date).getTime()},_navigatorCheck:function(){return"undefined"!=typeof navigator}});t.exports=r},function(t,e){t.exports=function(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){var i,r,n,o,s;return n=2147483648&t,o=2147483648&e,s=(1073741823&t)+(1073741823&e),(i=1073741824&t)&(r=1073741824&e)?2147483648^s^n^o:i|r?1073741824&s?3221225472^s^n^o:1073741824^s^n^o:s^n^o}function r(t,r,n,o,s,a,u){return t=i(t,i(i(function(t,e,i){return t&e|~t&i}(r,n,o),s),u)),i(e(t,a),r)}function n(t,r,n,o,s,a,u){return t=i(t,i(i(function(t,e,i){return t&i|e&~i}(r,n,o),s),u)),i(e(t,a),r)}function o(t,r,n,o,s,a,u){return t=i(t,i(i(function(t,e,i){return t^e^i}(r,n,o),s),u)),i(e(t,a),r)}function s(t,r,n,o,s,a,u){return t=i(t,i(i(function(t,e,i){return e^(t|~i)}(r,n,o),s),u)),i(e(t,a),r)}function a(t){var e,i="",r="";for(e=0;e<=3;e++)i+=(r="0"+(t>>>8*e&255).toString(16)).substr(r.length-2,2);return i}var u,h,c,l,p,f,d,g,v,y=Array();for(y=function(t){for(var e,i=t.length,r=i+8,n=16*((r-r%64)/64+1),o=Array(n-1),s=0,a=0;a<i;)s=a%4*8,o[e=(a-a%4)/4]=o[e]|t.charCodeAt(a)<<s,a++;return s=a%4*8,o[e=(a-a%4)/4]=o[e]|128<<s,o[n-2]=i<<3,o[n-1]=i>>>29,o}(t=function(t){t=t.replace(/rn/g,"n");for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),f=1732584193,d=4023233417,g=2562383102,v=271733878,u=0;u<y.length;u+=16)h=f,c=d,l=g,p=v,f=r(f,d,g,v,y[u+0],7,3614090360),v=r(v,f,d,g,y[u+1],12,3905402710),g=r(g,v,f,d,y[u+2],17,606105819),d=r(d,g,v,f,y[u+3],22,3250441966),f=r(f,d,g,v,y[u+4],7,4118548399),v=r(v,f,d,g,y[u+5],12,1200080426),g=r(g,v,f,d,y[u+6],17,2821735955),d=r(d,g,v,f,y[u+7],22,4249261313),f=r(f,d,g,v,y[u+8],7,1770035416),v=r(v,f,d,g,y[u+9],12,2336552879),g=r(g,v,f,d,y[u+10],17,4294925233),d=r(d,g,v,f,y[u+11],22,2304563134),f=r(f,d,g,v,y[u+12],7,1804603682),v=r(v,f,d,g,y[u+13],12,4254626195),g=r(g,v,f,d,y[u+14],17,2792965006),f=n(f,d=r(d,g,v,f,y[u+15],22,1236535329),g,v,y[u+1],5,4129170786),v=n(v,f,d,g,y[u+6],9,3225465664),g=n(g,v,f,d,y[u+11],14,643717713),d=n(d,g,v,f,y[u+0],20,3921069994),f=n(f,d,g,v,y[u+5],5,3593408605),v=n(v,f,d,g,y[u+10],9,38016083),g=n(g,v,f,d,y[u+15],14,3634488961),d=n(d,g,v,f,y[u+4],20,3889429448),f=n(f,d,g,v,y[u+9],5,568446438),v=n(v,f,d,g,y[u+14],9,3275163606),g=n(g,v,f,d,y[u+3],14,4107603335),d=n(d,g,v,f,y[u+8],20,1163531501),f=n(f,d,g,v,y[u+13],5,2850285829),v=n(v,f,d,g,y[u+2],9,4243563512),g=n(g,v,f,d,y[u+7],14,1735328473),f=o(f,d=n(d,g,v,f,y[u+12],20,2368359562),g,v,y[u+5],4,4294588738),v=o(v,f,d,g,y[u+8],11,2272392833),g=o(g,v,f,d,y[u+11],16,1839030562),d=o(d,g,v,f,y[u+14],23,4259657740),f=o(f,d,g,v,y[u+1],4,2763975236),v=o(v,f,d,g,y[u+4],11,1272893353),g=o(g,v,f,d,y[u+7],16,4139469664),d=o(d,g,v,f,y[u+10],23,3200236656),f=o(f,d,g,v,y[u+13],4,681279174),v=o(v,f,d,g,y[u+0],11,3936430074),g=o(g,v,f,d,y[u+3],16,3572445317),d=o(d,g,v,f,y[u+6],23,76029189),f=o(f,d,g,v,y[u+9],4,3654602809),v=o(v,f,d,g,y[u+12],11,3873151461),g=o(g,v,f,d,y[u+15],16,530742520),f=s(f,d=o(d,g,v,f,y[u+2],23,3299628645),g,v,y[u+0],6,4096336452),v=s(v,f,d,g,y[u+7],10,1126891415),g=s(g,v,f,d,y[u+14],15,2878612391),d=s(d,g,v,f,y[u+5],21,4237533241),f=s(f,d,g,v,y[u+12],6,1700485571),v=s(v,f,d,g,y[u+3],10,2399980690),g=s(g,v,f,d,y[u+10],15,4293915773),d=s(d,g,v,f,y[u+1],21,2240044497),f=s(f,d,g,v,y[u+8],6,1873313359),v=s(v,f,d,g,y[u+15],10,4264355552),g=s(g,v,f,d,y[u+6],15,2734768916),d=s(d,g,v,f,y[u+13],21,1309151649),f=s(f,d,g,v,y[u+4],6,4149444226),v=s(v,f,d,g,y[u+11],10,3174756917),g=s(g,v,f,d,y[u+2],15,718787259),d=s(d,g,v,f,y[u+9],21,3951481745),f=i(f,h),d=i(d,c),g=i(g,l),v=i(v,p);return(a(f)+a(d)+a(g)+a(v)).toLowerCase()}},function(t,e,i){var r=i(1),n=i(11),o=i(32),s={setAdapter:function(t){t.plugin?r.warn("Adapters can only be added to a single plugin"):(this.removeAdapter(),this._adapter=t,t.plugin=this,t.on(o.Event.INIT,this._initListener.bind(this)),t.on(o.Event.START,this._startListener.bind(this)),t.on(o.Event.JOIN,this._joinListener.bind(this)),t.on(o.Event.PAUSE,this._pauseListener.bind(this)),t.on(o.Event.RESUME,this._resumeListener.bind(this)),t.on(o.Event.SEEK_BEGIN,this._seekBeginListener.bind(this)),t.on(o.Event.SEEK_END,this._seekEndListener.bind(this)),t.on(o.Event.BUFFER_BEGIN,this._bufferBeginListener.bind(this)),t.on(o.Event.BUFFER_END,this._bufferEndListener.bind(this)),t.on(o.Event.ERROR,this._errorListener.bind(this)),t.on(o.Event.STOP,this._stopListener.bind(this)),t.on(o.Event.CLICK,this._clickListener.bind(this)),t.on(o.Event.BLOCKED,this._blockedListener.bind(this)),t.on(o.Event.VIDEO_EVENT,this._videoEventListener.bind(this)))},getAdapter:function(){return this._adapter},removeAdapter:function(){this._adapter&&(this._adapter.dispose(),this._adapter.plugin=null,this._adapter.off(o.Event.INIT,this._initListener),this._adapter.off(o.Event.START,this._startListener),this._adapter.off(o.Event.JOIN,this._joinListener),this._adapter.off(o.Event.PAUSE,this._pauseListener),this._adapter.off(o.Event.RESUME,this._resumeListener),this._adapter.off(o.Event.SEEK_BEGIN,this._seekBeginListener),this._adapter.off(o.Event.SEEK_END,this._seekEndListener),this._adapter.off(o.Event.BUFFER_BEGIN,this._bufferBeginListener),this._adapter.off(o.Event.BUFFER_END,this._bufferEndListener),this._adapter.off(o.Event.ERROR,this._errorListener),this._adapter.off(o.Event.STOP,this._stopListener),this._adapter.off(o.Event.VIDEO_EVENT,this._videoEventListener),this._adapter=null)},_initListener:function(t){if(!this._adapter||!this._adapter.flags.isInited){this.isInitiated&&this.lastServeiceSent!==n.Service.ERROR||(this.viewTransform.nextView(),this._initComm(),this._startPings());var e=t.data.params||{};this.isInitiated=!0,this._adapter?(this._adapter.flags.isInited=!0,this._adapter.chronos.join.start()):this.initChrono.start(),this._send(n.WillSendEvent.WILL_SEND_INIT,n.Service.INIT,e),r.notice(n.Service.INIT+" "+(e.title||e.mediaResource)),this._adSavedError()}},_startListener:function(t){this.isInitiated||(this.viewTransform.nextView(),this._initComm(),this._startPings());var e=t.data.params||{},i=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&this.getDuration()>0)&&this.getTitle();!(i=!this.options.forceInit&&(i&&this._isExtraMetadataReady()))||this._adapter.flags.isInited||this.isInitiated?this._adapter.flags.isInited||this.isInitiated||(this.isInitiated=!0,this._adapter.flags.isInited=!0,this._adapter.chronos.join.start(),this._send(n.WillSendEvent.WILL_SEND_START,n.Service.INIT,e),this._adSavedError(),r.notice(n.Service.INIT+" "+(e.title||e.mediaResource))):(this._send(n.WillSendEvent.WILL_SEND_START,n.Service.START,e),this._adSavedError(),r.notice(n.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0,this.isInitiated&&0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime))},_retryStart:function(t){this._isExtraMetadataReady()&&(this._send(n.WillSendEvent.WILL_SEND_START,n.Service.START,{}),this.startDelayed=!1)},_joinListener:function(t){var e=t.data.params||{};this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this.isInitiated&&!this.isStarted&&0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime),this._adsAdapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._adsAdapter.totalPrerolls||0),(new Date).getTime()),this._adsAdapter.totalPrerolls=0),this.isInitiated&&!this.isStarted&&(this._isExtraMetadataReady()?this._send(n.WillSendEvent.WILL_SEND_START,n.Service.START,e):this.startDelayed=!0,this._adSavedError(),r.notice(n.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0),e=t.data.params||{},this._send(n.WillSendEvent.WILL_SEND_JOIN,n.Service.JOIN,e),r.notice(n.Service.JOIN+" "+e.joinDuration+"ms"))},_pauseListener:function(t){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var e=t.data.params||{};this._send(n.WillSendEvent.WILL_SEND_PAUSE,n.Service.PAUSE,e),r.notice(n.Service.PAUSE+" at "+e.playhead+"s")},_resumeListener:function(t){var e=t.data.params||{};this._send(n.WillSendEvent.WILL_SEND_RESUME,n.Service.RESUME,e),r.notice(n.Service.RESUME+" "+e.pauseDuration+"ms"),this._adapter.chronos.pause.reset()},_seekBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),r.notice("Seek Begin")},_seekEndListener:function(t){var e=t.data.params||{};this._send(n.WillSendEvent.WILL_SEND_SEEK,n.Service.SEEK,e),r.notice(n.Service.SEEK+" to "+e.playhead+" in "+e.seekDuration+"ms")},_bufferBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),r.notice("Buffer Begin")},_bufferEndListener:function(t){var e=t.data.params||{};this._send(n.WillSendEvent.WILL_SEND_BUFFER,n.Service.BUFFER,e),r.notice(n.Service.BUFFER+" to "+e.playhead+" in "+e.bufferDuration+"ms")},_errorListener:function(t){this._blockError(t.data.params)||(this.fireError(t.data.params||{}),this._adSavedError())},_blockError:function(t){var e=Date.now();return!!this._lastErrorParams&&(this._lastErrorParams.errorCode===t.errorCode&&this._lastErrorParams.msg===t.msg)&&this._lastErrorTime+5e3>e?(this._lastErrorTime=e,!0):(this._lastErrorTime=e,this._lastErrorParams=t,!1)},_stopListener:function(t){this.fireStop(t.data.params||{})},_clickListener:function(t){r.warn("You have sent a CLICK event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.")},_blockedListener:function(t){r.warn("You have sent a BLOCKED event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.")},_videoEventListener:function(t){this._send(n.WillSendEvent.VIDEO_EVENT,n.Service.VIDEO_EVENT,t.data.params)},_isExtraMetadataReady:function(t){if(!this.options.waitForMetadata||this.options.pendingMetadata.length<1)return!0;var e=this.requestBuilder.getGetters();return this.options.pendingMetadata.map(function(t){if(e.hasOwnProperty(t))return!!this[e[t]]()}.bind(this)).indexOf(!1)<0}};t.exports=s},function(t,e,i){var r=i(3),n=i(27),o=r.extend({constructor:function(){this.reset()},reset:function(){this.join=new n,this.seek=new n,this.pause=new n,this.buffer=new n,this.total=new n}});t.exports=o},function(t,e,i){var r=i(3).extend({constructor:function(){this.reset()},reset:function(){this.isInited=!1,this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isEnded=!1,this.isStopped=!1}});t.exports=r},function(t,e,i){var r=i(9),n=i(31),o={getHost:function(){var t=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(t=this.viewTransform.response.host),r.addProtocol(r.stripProtocol(t),this.options["app.https"]||this.options.httpSecure)},getUserType:function(){return this.options["user.type"]||this.options.userType},isParseHls:function(){return this.options["parse.hls"]},isParseCdnNode:function(){return this.options["parse.cdnNode"]},isLocHeader:function(){return this.options["parse.locationHeader"]},isDashLoc:function(){return this.options["parse.dashLocation"]},getParseCdnNodeList:function(){return this.options["parse.cdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.cdnNameHeader"]},getObfuscateIp:function(){return this.options["user.obfuscateIp"]||this.options.obfuscateIp},getExtraparam1:function(){return this.options["content.customdimension.1"]||this.options["extraparam.1"]},getExtraparam2:function(){return this.options["content.customdimension.2"]||this.options["extraparam.2"]},getExtraparam3:function(){return this.options["content.customdimension.3"]||this.options["extraparam.3"]},getExtraparam4:function(){return this.options["content.customdimension.4"]||this.options["extraparam.4"]},getExtraparam5:function(){return this.options["content.customdimension.5"]||this.options["extraparam.5"]},getExtraparam6:function(){return this.options["content.customdimension.6"]||this.options["extraparam.6"]},getExtraparam7:function(){return this.options["content.customdimension.7"]||this.options["extraparam.7"]},getExtraparam8:function(){return this.options["content.customdimension.8"]||this.options["extraparam.8"]},getExtraparam9:function(){return this.options["content.customdimension.9"]||this.options["extraparam.9"]},getExtraparam10:function(){return this.options["content.customdimension.10"]||this.options["extraparam.10"]},getExtraparam11:function(){return this.options["content.customdimension.11"]||this.options["extraparam.11"]},getExtraparam12:function(){return this.options["content.customdimension.12"]||this.options["extraparam.12"]},getExtraparam13:function(){return this.options["content.customdimension.13"]||this.options["extraparam.13"]},getExtraparam14:function(){return this.options["content.customdimension.14"]||this.options["extraparam.14"]},getExtraparam15:function(){return this.options["content.customdimension.15"]||this.options["extraparam.15"]},getExtraparam16:function(){return this.options["content.customdimension.16"]||this.options["extraparam.16"]},getExtraparam17:function(){return this.options["content.customdimension.17"]||this.options["extraparam.17"]},getExtraparam18:function(){return this.options["content.customdimension.18"]||this.options["extraparam.18"]},getExtraparam19:function(){return this.options["content.customdimension.19"]||this.options["extraparam.19"]},getExtraparam20:function(){return this.options["content.customdimension.20"]||this.options["extraparam.20"]},getAdExtraparam1:function(){return this.options["ad.customDimension.1"]||this.options["ad.extraparam.1"]},getAdExtraparam2:function(){return this.options["ad.customDimension.2"]||this.options["ad.extraparam.2"]},getAdExtraparam3:function(){return this.options["ad.customDimension.3"]||this.options["ad.extraparam.3"]},getAdExtraparam4:function(){return this.options["ad.customDimension.4"]||this.options["ad.extraparam.4"]},getAdExtraparam5:function(){return this.options["ad.customDimension.5"]||this.options["ad.extraparam.5"]},getAdExtraparam6:function(){return this.options["ad.customDimension.6"]||this.options["ad.extraparam.6"]},getAdExtraparam7:function(){return this.options["ad.customDimension.7"]||this.options["ad.extraparam.7"]},getAdExtraparam8:function(){return this.options["ad.customDimension.8"]||this.options["ad.extraparam.8"]},getAdExtraparam9:function(){return this.options["ad.customDimension.9"]||this.options["ad.extraparam.9"]},getAdExtraparam10:function(){return this.options["ad.customDimension.10"]||this.options["ad.extraparam.10"]},getPluginInfo:function(){return{lib:n,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceInfo:function(){var t={};return this.getModel()&&(t.model=this.getModel()),this.getBrand()&&(t.brand=this.getBrand()),this.getDeviceType()&&(t.deviceType=this.getDeviceType()),this.getDeviceName()&&(t.deviceName=this.getDeviceName()),this.getOsName()&&(t.osName=this.getOsName()),this.getOsVersion()&&(t.osVersion=this.getOsVersion()),this.getBrowserName()&&(t.browserName=this.getBrowserName()),this.getBrowserVersion()&&(t.browserVersion=this.getBrowserVersion()),this.getBrowserType()&&(t.browserType=this.getBrowserType()),this.getBrowserEngine()&&(t.browserEngine=this.getBrowserEngine()),t!=={}?t:null},getDeviceCode:function(){return this.options["device.code"]},getModel:function(){return this.options["device.model"]},getBrand:function(){return this.options["device.brand"]},getDeviceType:function(){return this.options["device.type"]},getDeviceName:function(){return this.options["device.name"]},getOsName:function(){return this.options["device.osName"]},getOsVersion:function(){return this.options["device.osVersion"]},getBrowserName:function(){return this.options["device.browserName"]},getBrowserVersion:function(){return this.options["device.browserVersion"]},getBrowserType:function(){return this.options["device.browserType"]},getBrowserEngine:function(){return this.options["device.browserEngine"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options["user.name"]||this.options.username},getAnonymousUser:function(){return this.options["user.anonymousId"]||this.options.anonymousUser},getEmail:function(){return this.options["user.email"]},getReferer:function(){if(this.options.referer)return this.options.referer;var t="";return"undefined"!=typeof window&&window.location&&(t=window.location.href),t},getReferral:function(){return"undefined"!=typeof window&&window.document?window.document.referrer:null},getLanguage:function(){return"undefined"!=typeof navigator?navigator.language:null},getNodeHost:function(){return this.options["content.cdnNode"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){return this.offlineStorage.getView()},getExperiments:function(){return this.options.experiments.length>0?this.options.experiments:null},getFingerprint:function(){return this.fingerprint.getKey()},getNpawPluginUUID:function(){return this.fingerprint.getUUID()},getYouboraId:function(){return this.youboraId},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]},getAppName:function(){return this.options["app.name"]},getAppReleaseVersion:function(){return this.options["app.releaseVersion"]}};t.exports=o},function(t,e,i){var r=i(1),n=i(9),o=i(31),s={getPlayhead:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayhead()}catch(t){r.warn("An error occurred while calling getPlayhead",t)}return n.parseNumber(t,0)},getPlayrate:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayrate(),this._adapter.flags&&this._adapter.flags.isPaused&&(t=0)}catch(t){r.warn("An error occured while calling getPlayrate",t)}return t},getFramesPerSecond:function(){var t=this.options["content.fps"];if(null===t&&this._adapter)try{t=this._adapter.getFramesPerSecond()}catch(t){r.warn("An error occured while calling getFramesPerSecond",t)}return t},getDroppedFrames:function(){var t=null;if(this._adapter)try{t=this._adapter.getDroppedFrames()}catch(t){r.warn("An error occured while calling getDroppedFrames",t)}return t||(t=this.getWebkitDroppedFrames()),n.parseNumber(t,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var t=this.options["content.duration"];if(null===t&&this._adapter)try{t=this._adapter.getDuration()}catch(t){r.warn("An error occured while calling getDuration",t)}return 0===t&&(t=null),n.parseNumber(Math.round(t),null)},getBitrate:function(){var t=this.options["content.bitrate"];if(null===t&&this._adapter){try{t=this._adapter.getBitrate()}catch(t){r.warn("An error occured while calling getBitrate",t)}t&&-1!==t||(t=this.getWebkitBitrate())}return n.parseNumber(t,-1)},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getThroughput:function(){var t=this.options["content.throughput"];if(null===t&&this._adapter)try{t=this._adapter.getThroughput()}catch(t){r.warn("An error occured while calling getThroughput",t)}return n.parseNumber(t,-1)},getRendition:function(){var t=this.options["content.rendition"];if(null===t&&this._adapter)try{t=this._adapter.getRendition()}catch(t){r.warn("An error occured while calling getRendition",t)}return t},getTitle:function(){var t=this.options["content.title"];if(null===t&&this._adapter)try{t=this._adapter.getTitle()}catch(t){r.warn("An error occured while calling getTitle",t)}return t},getTitle2:function(){var t=this.options["content.program"]||this.options["content.title2"];if(null===t&&this._adapter)try{t=this._adapter.getTitle2()}catch(t){r.warn("An error occured while calling getTitle2",t)}return t},getIsLive:function(){var t=this.options["content.isLive"];if(null===t&&this._adapter)try{t=this._adapter.getIsLive()}catch(t){r.warn("An error occured while calling getIsLive",t)}return t||!1},getResource:function(){var t=null;return!this.resourceTransform.isBlocking()&&this.resourceTransform.isDone&&(t=this.resourceTransform.getResource()),t||this.getOriginalResource()},getOriginalResource:function(){var t=null;if(null===(t=this.options["content.resource"])&&this._adapter)try{t=this._adapter.getResource()}catch(e){r.warn("An error occured while calling getResource",e),t=null}return t||null},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerVersion()}catch(t){r.warn("An error occured while calling getPlayerVersion",t)}return t},getPlayerName:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerName()}catch(t){r.warn("An error occured while calling getPlayerName",t)}return t},getCdn:function(){var t=null;return this.resourceTransform.isBlocking()||(t=this.resourceTransform.getCdnName()),t||this.options["content.cdn"]},getPluginVersion:function(){var t=this.getAdapterVersion();return t||(t=o+"-adapterless"),t},getLibVersion:function(){return o},getAdapterVersion:function(){var t=null;if(this._adapter)try{t=this._adapter.getVersion()}catch(t){r.warn("An error occured while calling getPluginVersion",t)}return t},getCdnTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getCdnTraffic()}catch(t){r.warn("An error occured while calling getCdnTraffic",t)}return t},getP2PTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getP2PTraffic()}catch(t){r.warn("An error occured while calling getP2PTraffic",t)}return t},getUploadTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getUploadTraffic()}catch(t){r.warn("An error occured while calling getUploadTraffic",t)}return t},getIsP2PEnabled:function(){var t=null;if(this._adapter)try{t=this._adapter.getIsP2PEnabled()}catch(t){r.warn("An error occured while calling getIsP2PEnabled",t)}return t},getStreamingProtocol:function(){var t=this.options["content.streamingProtocol"];return"string"!=typeof t?null:"HDS"!=(t=t.toUpperCase())&&"HLS"!=t&&"MSS"!=t&&"DASH"!=t&&"RTMP"!=t&&"RTP"!=t&&"RTSP"!=t?(r.warn("Streaming protocol "+t+" is not a valid value"),null):t},getHouseholdId:function(){var t=null;if(this._adapter)try{t=this._adapter.getHouseholdId()}catch(t){r.warn("An error occurred while calling getHouseholdId",t)}return t},getLatency:function(){var t=null;if(this._adapter)try{t=this._adapter.getLatency()}catch(t){r.warn("An error occurred while calling getLatency",t)}return t},getPacketLoss:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketLoss()}catch(t){r.warn("An error occurred while calling getPacketLoss",t)}return t},getPacketSent:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketSent()}catch(t){r.warn("An error occurred while calling getPacketSent",t)}return t},getVideoMetrics:function(){var t=this._adapter?this._adapter.getMetrics():null;for(var e in t=t||this.options["content.metrics"])if("object"!=typeof t[e]||!t[e].value){var i={};i.value=t[e],t[e]=i}return t},getPreloadDuration:function(){return this.preloadChrono.getDeltaTime(!1)},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0},getPackage:function(){return this.options["content.package"]},getSaga:function(){return this.options["content.saga"]},getTvShow:function(){return this.options["content.tvShow"]},getSeason:function(){return this.options["content.season"]},getEpisodeTitle:function(){return this.options["content.episodeTitle"]},getChannel:function(){return this.options["content.channel"]},getID:function(){return this.options["content.id"]},getImdbId:function(){return this.options["content.imdbId"]},getGracenoteID:function(){return this.options["content.gracenoteId"]},getType:function(){return this.options["content.type"]},getGenre:function(){return this.options["content.genre"]},getVideoLanguage:function(){return this.options["content.language"]},getSubtitles:function(){return this.options["content.subtitles"]},getContractedResolution:function(){return this.options["content.contractedResolution"]},getCost:function(){return this.options["content.cost"]},getPrice:function(){return this.options["content.price"]},getPlaybackType:function(){return this.options["content.playbackType"]?this.options["content.playbackType"]:this.getIsLive()?"Live":"VoD"},getDRM:function(){return this.options["content.drm"]},getVideoCodec:function(){return this.options["content.encoding.videoCodec"]},getAudioCodec:function(){return this.options["content.encoding.audioCodec"]},getCodecSettings:function(){return this.options["content.encoding.codecSettings"]},getCodecProfile:function(){return this.options["content.encoding.codecProfile"]},getContainerFormat:function(){return this.options["content.encoding.containerFormat"]}};t.exports=s},function(t,e,i){var r=i(1),n=i(11),o=i(32),s={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(t){t.plugin?r.warn("Adapters can only be added to a single plugin"):(this.removeAdsAdapter(),t.plugin=this,this._adsAdapter=t,this._adsAdapter.on(o.Event.INIT,this._adInitListener.bind(this)),this._adsAdapter.on(o.Event.START,this._adStartListener.bind(this)),this._adsAdapter.on(o.Event.JOIN,this._adJoinListener.bind(this)),this._adsAdapter.on(o.Event.PAUSE,this._adPauseListener.bind(this)),this._adsAdapter.on(o.Event.RESUME,this._adResumeListener.bind(this)),this._adsAdapter.on(o.Event.BUFFER_BEGIN,this._adBufferBeginListener.bind(this)),this._adsAdapter.on(o.Event.BUFFER_END,this._adBufferEndListener.bind(this)),this._adsAdapter.on(o.Event.STOP,this._adStopListener.bind(this)),this._adsAdapter.on(o.Event.ERROR,this._adErrorListener.bind(this)),this._adsAdapter.on(o.Event.CLICK,this._adClickListener.bind(this)),this._adsAdapter.on(o.Event.BLOCKED,this._adBlockedListener.bind(this)))},removeAdsAdapter:function(){this._adsAdapter&&(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this._adsAdapter.off(o.Event.INIT,this._adInitListener),this._adsAdapter.off(o.Event.START,this._adStartListener),this._adsAdapter.off(o.Event.JOIN,this._adJoinListener),this._adsAdapter.off(o.Event.PAUSE,this._adPauseListener),this._adsAdapter.off(o.Event.RESUME,this._adResumeListener),this._adsAdapter.off(o.Event.BUFFER_BEGIN,this._adBufferBeginListener),this._adsAdapter.off(o.Event.BUFFER_END,this._adBufferEndListener),this._adsAdapter.off(o.Event.STOP,this._adStopListener),this._adsAdapter.off(o.Event.ERROR,this._adErrorListener),this._adsAdapter.off(o.Event.CLICK,this._adClickListener),this._adsAdapter.off(o.Event.BLOCKED,this._adBlockedListener),this._adsAdapter=null)},_adInitListener:function(t){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isInited||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this.adInitSent=!0;var e=t.data.params||{};e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_START,n.Service.AD_INIT,e),r.notice(n.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")},_adStartListener:function(t){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isInited||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit();var e=t.data.params||{};(this._adsAdapter.flags.isInited?e.adNumber=this.requestBuilder.lastSent.adNumber:e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"])||((this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._send(n.WillSendEvent.WILL_SEND_AD_START,n.Service.AD_START,e),r.notice(n.Service.AD_START+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")):this._adsAdapter.flags.isInited||(this.adInitSent=!0,this._send(n.WillSendEvent.WILL_SEND_AD_INIT,n.Service.AD_INIT,e),r.notice(n.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")))},_adJoinListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||!this.adInitSent||this.adStartSent||(this._send(n.WillSendEvent.WILL_SEND_AD_START,n.Service.AD_START,e),r.notice(n.Service.AD_START+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")),this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_JOIN,n.Service.AD_JOIN,e),r.notice(n.Service.AD_JOIN+" "+e.adJoinDuration+"ms"),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_PAUSE,n.Service.AD_PAUSE,e),r.notice(n.Service.AD_PAUSE+" at "+e.adPlayhead+"s")},_adResumeListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_RESUME,n.Service.AD_RESUME,e),r.notice(n.Service.AD_RESUME+" "+e.adPauseDuration+"ms")},_adBufferBeginListener:function(t){r.notice("Ad Buffer Begin"),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_BUFFER,n.Service.AD_BUFFER,e),r.notice(n.Service.AD_BUFFER+" "+e.adBufferDuration+"ms")},_adStopListener:function(t){this._adsAdapter.totalPrerolls=(this._adsAdapter.totalPrerolls||0)+this._adsAdapter.chronos.total.getDeltaTime();var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_STOP,n.Service.AD_STOP,e),r.notice(n.Service.AD_STOP+" "+e.adTotalDuration+"ms")},_adErrorListener:function(t){var e=t.data.params||{};return!this._adapter||this._adapter.flags.isStarted||this._adapter.flags.isInited||this.isInitiated?this._blockAdError(t.data.params)?null:(this._adsAdapter&&(this._adsAdapter.flags.isStarted||this._adsAdapter.flags.isInited)?e.adNumber=this.requestBuilder.lastSent.adNumber:e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_ERROR,n.Service.AD_ERROR,e),void r.notice(n.Service.AD_ERROR)):(this._savedAdError=t,null)},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_blockAdError:function(t){var e=Date.now();return!!this._lastAdErrorParams&&(this._lastAdErrorParams.errorCode===t.errorCode&&this._lastAdErrorParams.msg===t.msg)&&this._lastAdErrorTime+5e3>e?(this._lastAdErrorTime=e,!0):(this._lastAdErrorTime=e,this._lastAdErrorParams=t,!1)},_adClickListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_CLICK,n.Service.AD_CLICK,e),r.notice(n.Service.AD_CLICK)},_adBlockedListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_BLOCKED,n.Service.AD_BLOCKED,e),r.notice(n.Service.AD_BLOCKED)}};t.exports=s},function(t,e,i){var r=i(1),n=i(9),o={getAdPlayerVersion:function(){var t="";if(this._adsAdapter)try{t=this._adsAdapter.getPlayerVersion()}catch(t){r.warn("An error occured while calling getAdPlayerVersion",t)}return t},getAdPosition:function(){var t="pre";if(this._adsAdapter)try{var e=this._adsAdapter.getPosition();"pre"!==e&&"mid"!==e&&"post"!==e||(t=e)}catch(t){r.warn("An error occured while calling getAdPosition",t)}return!t&&this._adapter&&(t=this._adapter.flags.isJoined?"mid":"pre"),t},getAdPlayhead:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getPlayhead()}catch(t){r.warn("An error occured while calling getAdPlayhead",t)}return n.parseNumber(t,0)},getAdDuration:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getDuration()}catch(t){r.warn("An error occured while calling getAdDuration",t)}return n.parseNumber(t,0)},getAdBitrate:function(){var t=null;if(this._adsAdapter){try{t=this._adsAdapter.getBitrate()}catch(t){r.warn("An error occured while calling getAdBitrate",t)}t&&-1!==t||(t=this.getWebkitAdBitrate())}return n.parseNumber(t,-1)},getWebkitAdBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getAdTitle:function(){var t=null;if(this.options["ad.title"])return this.options["ad.title"];if(this._adsAdapter)try{t=this._adsAdapter.getTitle()}catch(t){r.warn("An error occured while calling getAdTitle",t)}return t},getAdResource:function(){var t=null;if(this.options["ad.resource"])return this.options["ad.resource"];if(this._adsAdapter)try{t=this._adsAdapter.getResource()}catch(t){r.warn("An error occured while calling getAdResource",t)}return t},getAdCampaign:function(){return this.options["ad.campaign"]?this.options["ad.campaign"]:null},getAdAdapterVersion:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getVersion()}catch(t){r.warn("An error occured while calling getAdsAdapterVersion",t)}return t},getAdMetadata:function(){return this.options["ad.metadata"]},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1}};t.exports=o},function(t,e,i){var r=i(1),n=i(11),o={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(t){var e={diffTime:t,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(e=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(e,["pauseDuration"]):this.requestBuilder.fetchParams(e,["bitrate","throughput","fps"]),this._adapter.flags.isJoined&&(e=this.requestBuilder.fetchParams(e,["playhead"])),this._adapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["bufferDuration"])),this._adapter.flags.isSeeking&&(e=this.requestBuilder.fetchParams(e,["seekDuration"])),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(e=this.requestBuilder.fetchParams(e,["adPlayhead"]),e=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(e,["adPauseDuration"]):this.requestBuilder.fetchParams(e,["adBitrate"])),this._adsAdapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["adBufferDuration"])))),this._send(n.WillSendEvent.WILL_SEND_PING,n.Service.PING,e),this.startDelayed&&this._retryStart(),r.verbose(n.Service.PING)}};t.exports=o},function(t,e,i){var r=i(1),n=i(9),o=i(11),s=(i(40),i(21)),a={firePreloadBegin:function(){this.isPreloading||(this.isPreloading=!0,this.preloadChrono.start())},firePreloadEnd:function(){this.isPreloading&&(this.isPreloading=!1,this.preloadChrono.stop())},fireInit:function(t){this.isInitiated||this.getAdapter()&&(!this.getAdapter()||this.getAdapter().flags.isInited||this.getAdapter().flags.isStarted)||(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,t=t||{},this._send(o.WillSendEvent.WILL_SEND_INIT,o.Service.INIT,t),this._adSavedError(),r.notice(o.Service.INIT+" "+(t.title||t.mediaResource)))},fireError:function(t,e,i,s){this.isInitiated||this.getAdapter()&&(this.getAdapter().flags.isStarted||this.getAdapter().flags.isInited)||this.viewTransform.nextView(),this._comm||this._initComm();var a=n.buildErrorParams(t,e,i,s);this._send(o.WillSendEvent.WILL_SEND_ERROR,o.Service.ERROR,a),this._adSavedError(),r.notice(o.Service.ERROR+" "+a.errorLevel+" "+a.errorCode),"fatal"===a.errorLevel&&(this._reset(),this.viewTransform.nextView())},fireFatalError:function(t,e,i){this.options["ad.afterStop"]=0,this.fireError(t,e,i,"fatal"),this._adapter?this._adapter.fireStop():this.fireStop()},fireStop:function(t){t&&void 0!==t.end&&t.end&&(t.end=void 0,this.options["ad.afterStop"]=0),this._adsAdapter||(this.options["ad.afterStop"]=0),0===this.options["ad.afterStop"]&&(this._adapter&&(this._adapter.flags.isStopped=!0),t=t||{},this._send(o.WillSendEvent.WILL_SEND_STOP,o.Service.STOP,t),r.notice(o.Service.STOP+" at "+t.playhead+"s"),this._reset())},fireOfflineEvents:function(t){this.options&&!this.options.offline?this._adapter&&(this._adapter.flags.isStarted||this._adapter.flags.isInited)||this._adsAdapter&&(this._adsAdapter.flags.isStarted||this._adsAdapter.flags.isInited)?r.error("Adapters have to be stopped"):(this._offlineParams=t,this.viewTransform.response.code&&this.viewTransform.response.host?this._generateAndSendOffline():(this.offlineReference=this._generateAndSendOffline.bind(this),this.viewTransform.on(s.Event.DONE,this.offlineReference))):r.error("To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){var t=this._offlineParams;for(this._initComm();;){var e=this.requestBuilder.buildBody(o.Service.OFFLINE_EVENTS).viewJson;if(null===e[0])break;var i=this.viewTransform.nextView(),r=e[0].replace(/CODE_PLACEHOLDER/g,i.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"").replace(/,"parentId":"PARENT_PLACEHOLDER"/g,"");this._send(o.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,o.Service.OFFLINE_EVENTS,t,r,"POST",function(t,e){this.offlineStorage.removeView(e.offlineId)}.bind(this),{offlineId:e[1]})}this.offlineStorage.sent(),this._offlineParams=null}};t.exports=a},function(t,e,i){var r=i(11),n=i(1),o=i(15),s=i(41),a={_initInfinity:function(){this.infinity.on(s.Event.NAV,this._navListener.bind(this)),this.infinity.on(s.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(s.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(s.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(t,e,i){var r={params:i=this.requestBuilder.buildParams(i,e),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(t,r),this.infinity._comm&&null!==i&&this.options.enabled&&(this.lastServeiceSent=e,this.infinity._comm.sendRequest(new o(null,e,i)))},_navListener:function(t){var e=t.data.params||{};this._sendInfinity(r.WillSendEvent.WILL_SEND_NAV,r.Service.NAV,e),this._beat.isRunning||this._beat.start(),n.notice(r.Service.NAV+" "+e.route)},_sessionStartListener:function(t){var e=t.data.params||{};this._sendInfinity(r.WillSendEvent.WILL_SEND_SESSION_START,r.Service.SESSION_START,e),this._beat.isRunning||this._beat.start(),n.notice(r.Service.SESSION_START+" "+e.route)},_sessionStopListener:function(t){var e=t.data.params||{};this._sendInfinity(r.WillSendEvent.WILL_SEND_SESSION_STOP,r.Service.SESSION_STOP,e),this._beat.isRunning&&this._beat.stop(),n.notice(r.Service.SESSION_STOP+" "+e.route)},_eventListener:function(t){var e=t.data.params||{};this._sendInfinity(r.WillSendEvent.WILL_SEND_EVENT,r.Service.EVENT,e),n.notice(r.Service.EVENT+" "+e.name)},_sendBeat:function(t){var e={diffTime:t,sessions:[this.getSessionId()]};this._sendInfinity(r.WillSendEvent.WILL_SEND_BEAT,r.Service.BEAT,e),this.infinity&&this.infinity._setLastActive(),n.verbose(r.Service.BEAT)},getSessionMetrics:function(){var t=this.options["session.metrics"];for(var e in t)if("object"!=typeof t[e]||!t[e].value){var i={};i.value=t[e],t[e]=i}return t}};t.exports=a},function(t,e){var i={getContext:function(){return this.options["session.context"]?this.storage.getSession("context"):"Default"},getSessionId:function(){return this.storage.getStorages("session")},getStoredData:function(){return this.storage.getStorages("data")},getDataTime:function(){return this.storage.getStorages("dataTime")},getLastActive:function(){return this.storage.getStorages("lastactive")},setStoredData:function(t){this.storage.setStorages("data",t)},setSessionId:function(t){this.storage.setStorages("session",t)},setDataTime:function(t){this.storage.setStorages("dataTime",t)},setLastActive:function(t){this.storage.setStorages("lastactive",t)},getPageName:function(){if(document&&document.title)return document.title},getIsSessionExpired:function(){var t=(new Date).getTime();return!this.getSessionId()||this.infinity.getFirstActive()<t-this.sessionExpire},getIsDataExpired:function(){var t=(new Date).getTime();return!this.getStoredData()||this.infinity.getFirstActive()<t-this.sessionExpire}};t.exports=i},function(t,e,i){var r=i(32),n=i(9),o=r.extend({getListenersList:function(){},registerListeners:function(){if(this._registeredListeners&&0!=this._registeredListeners.length)return null;var t=this.getListenersList();for(var e in this._registeredListeners=[],t){var i=t[e].object;if(i||(i=this.player),!i)return null;var r=t[e].suscriber;r||("function"==typeof i.addEventListener?r="addEventListener":"function"==typeof i.on&&(r="on"));var o=t[e].unsuscriber;o||("function"==typeof i.removeEventListener?o="removeEventListener":"function"==typeof i.off&&(o="off"));var s=t[e].events,a=[];for(var u in s)a.push(u);for(var h in"addEventListener"===r||"on"===r?n.logAllEvents(i,[null].concat(a)):n.logAllEvents(i[r],[null].concat(a)),s)if(s[h]){this._registeredListeners.push([i,o,h,s[h].bind(this)]);var c=this._registeredListeners.length-1;i[r](h,this._registeredListeners[c][3])}}},unregisterListeners:function(){if(this.monitor&&this.monitor.stop(),!this._registeredListeners||0===this._registeredListeners.length)return null;for(var t in this._registeredListeners){var e=this._registeredListeners[t],i=e[0],r=e[1],n=e[2],o=e[3];i&&i[r](n,o)}this._registeredListeners=[]}});t.exports=o},function(t,e,i){var r=i(87),n=i(101);r.adapters.Bitmovin=r.StandardAdapter.extend({getVersion:function(){return n.version+"-"+n.name+"-"+n.tech},getPlayhead:function(){return this.playingAds?this.lastPlayhead:this.player.getCurrentTime()},getDuration:function(){return this.player.getDuration()},getPlayrate:function(){return this.flags.isPaused?0:void 0!==this.player.getPlaybackSpeed()?this.player.getPlaybackSpeed():1},getDroppedFrames:function(){return this.player.getDroppedFrames()},getBitrate:function(){return this.player.getPlaybackVideoData&&this.player.getPlaybackVideoData()&&this.player.getPlaybackVideoData().bitrate?this.player.getPlaybackVideoData().bitrate:-1},getRendition:function(){if(this.player.getPlaybackVideoData&&this.player.getPlaybackVideoData()){var t=this.player.getPlaybackVideoData();return t.bitrate?t.width&&t.height?r.Util.buildRenditionString(t.width,t.height,t.bitrate):t.bitrate:this.player.getPlaybackVideoData().id}return-1},getIsLive:function(){return this.player.isLive()},getResource:function(){if(this.player.getConfig){var t=this.player.getConfig().source;if(t)return t.dash||t.hls||t.progressive}return"unknown"},getPlayerName:function(){return"Bitmovin"},getPlayerVersion:function(){return bitmovin.player.version},initializeAdapter:function(){this.monitorPlayhead(!0,!0)},getListenersList:function(){var t=this.player.EVENT||bitmovin.player.EVENT,e={};return e[t.ON_DOWNLOAD_FINISHED]=null,e[t.ON_DVR_WINDOW_EXCEEDED]=null,e[t.ON_ERROR]=this.errorListener,e[t.ON_FULLSCREEN_ENTER]=null,e[t.ON_FULLSCREEN_EXIT]=null,e[t.ON_HIDE_CONTROLS]=null,e[t.ON_METADATA]=null,e[t.ON_PAUSED]=this.pauseListener,e[t.ON_PLAY]=this.playListener,e[t.ON_PLAYING]=this.playingListener,e[t.ON_PLAYBACK_FINISHED]=this.endedListener,e[t.ON_PLAYER_CREATED]=null,e[t.ON_PLAYER_RESIZE]=null,e[t.ON_READY]=null,e[t.ON_SEEK]=this.seekingListener,e[t.ON_SEEKED]=this.seekedListener,e[t.ON_SEGMENT_PLAYBACK]=this.joinListener,e[t.ON_SEGMENT_REQUEST_FINISHED]=null,e[t.ON_SOURCE_LOADED]=null,e[t.ON_SOURCE_UNLOADED]=this.endedListener,e[t.ON_STALL_ENDED]=null,e[t.ON_STALL_STARTED]=null,e[t.ON_STOP_BUFFERING]=this.joinListener,e[t.ON_TIME_CHANGED]=this.joinChangedListener,e[t.ON_TIME_SHIFT]=null,e[t.ON_TIME_SHIFTED]=null,e[t.ON_VIDEO_ADAPTATION]=null,e[t.ON_VIDEO_DOWNLOAD_QUALITY_CHANGE]=null,e[t.ON_VIDEO_DOWNLOAD_QUALITY_CHANGED]=null,e[t.ON_VIDEO_PLAYBACK_QUALITY_CHANGED]=null,e[t.ON_VR_ERROR]=null,e[t.ON_VR_MODE_CHANGED]=null,e[t.ON_WARNING]=null,e[t.ON_SEGMENT_PLAYBACK]=null,e[t.ON_STALL_ENDED]=null,e[t.ON_STALL_STARTED]=null,e[t.ON_AD_BREAK_FINISHED]=this.endAdsListener,e[t.ON_AD_BREAK_STARTED]=this.startAdsListener,[{suscriber:"addEventHandler",unsuscriber:"removeEventHandler",events:e}]},playListener:function(t){this.plugin.getAdsAdapter()||this.plugin.setAdsAdapter(new r.adapters.Bitmovin.NativeAdsAdapter(this.player)),this.fireStart(),this.fireResume()},joinListener:function(t){this.fireJoin()},pauseListener:function(t){this.flags.isSeeking||this.firePause()},playingListener:function(t){this.fireStart()},errorListener:function(t){this.fireError(t.code,t.message),t.code>=1e3&&t.code<=4999&&this.fireStop()},seekingListener:function(t){this.fireSeekBegin()},seekedListener:function(t){this.monitor.skipNextTick()},endedListener:function(t){this.fireStop()},joinChangedListener:function(t){this.getPlayhead()>0&&(this.fireStart(),this.fireJoin()),this.lastPlayhead=this.getPlayhead()},endAdsListener:function(t){this.playingAds=!1,this.fireResume()},startAdsListener:function(t){this.playingAds=!0,this.firePause()}},{NativeAdsAdapter:i(233)}),t.exports=r.adapters.Bitmovin},function(t){t.exports=JSON.parse('{"name":"youboralib","type":"lib","tech":"js","author":"Jordi Aguilar","version":"6.4.28","built":"2019-05-13","repo":"https://bitbucket.org/npaw/lib-plugin-js.git"}')},function(t,e){t.exports=function(){Function.prototype.bind=Function.prototype.bind||function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice,i=e.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n?this:t||window,i.concat(e.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o},Array.prototype.forEach=Array.prototype.forEach||function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function!");for(var i=this.length,r=0;r<i;r++)t.call(e,this[r],r,this)}}},function(t,e){var i=function(){};t.exports=function(t){if(arguments.length>1)throw Error("Second argument not supported");if(null===t)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof t)throw TypeError("Argument must be an object");return i.prototype=t,new i}},function(t,e){t.exports={cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(t){if(t){if(0===t.indexOf("TCP_HIT")||0===t.indexOf("TCP_MEM_HIT")||0===t.indexOf("TCP_IMS_HIT"))return 1;if(0===t.indexOf("TCP_MISS"))return 2}return 0}}},function(t,e){t.exports={cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(t){switch(t){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"AKAMAI",requestMethod:"GET",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom.+AkamaiGHost\/(.+)\).+/}],requestHeaders:{Pragma:"akamai-x-cache-on"},parseType:function(t){return-1!==t.indexOf("HIT")?1:-1!==t.indexOf("MISS")?2:0}}},function(t,e){t.exports={cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(t){switch(t){case"c":case"x":return 1;default:return 2}}}},function(t,e){t.exports={cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(t){switch(t){case"HIT":return 1;case"MISS":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"TELEFO",parsers:[{element:"host+type",headerName:"x-tcdn",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"x-tcdn":"host"},parseType:function(t){if(t){if(-1!==t.indexOf("p")||-1!==t.indexOf("c"))return 1;if(-1!==t.indexOf("i")||-1!==t.indexOf("m"))return 2}return 0}}},function(t,e){t.exports={parsers:[{element:"name",headerName:null,regex:/(.+)/}]}},function(t,e,i){var r=i(17),n=i(16),o=i(2),s=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(s.Event.DONE)},parse:function(t){var e=new r(t,null,null,{cache:!0});e.on(r.Event.SUCCESS,function(t){var e=t.getXHR().responseText,i=e.indexOf("<Location>"),r=e.indexOf("</Location>");i>-1&&r>-1?this._realResource=e.slice(i+10,r):o.warn("The Dash manifest doesnt contain Location tag"),this.done()}.bind(this)),e.on(r.Event.ERROR,function(t){this.done()}.bind(this)),e.send()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=s},function(t,e,i){var r=i(16),n=i(43),o=i(28),s=i(12),a=i(10),u=i(17),h=i(44),c=i(216),l=i(90),p=i(91),f=i(95),d=i(96),g=i(45),v=i(217),y=i(46),m=i(47),E=i(97),w=i(98),b=i(99),S=r.extend({constructor:function(t,e){this.storage=new g,this.fingerprint=new b(this),this.infinity=new m(this),this.isInitiated=!1,this.isPreloading=!1,this.preloadChrono=new o,this.initChrono=new o,this.options=new d(t),this.storage=new g(null,this.options.disableCookies),this.offlineStorage=new v,this._adapter=null,this._adsAdapter=null,this._ping=new n(this._sendPing.bind(this),5e3),this._beat=new n(this._sendBeat.bind(this),3e4),this._refreshData=new n(this._checkOldData.bind(this),36e5),this._refreshData.start(),this.sessionExpire=1e3*Number(this.storage.getLocal("sessionExpire"))||3e5,this.requestBuilder=new y(this),this.resourceTransform=new p(this),this.lastEventTime=null,e&&this.setAdapter(e),this.restartViewTransform(),this._initInfinity(),this.deviceDetector=new w,this.backgroundDetector=new E(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection()},_checkOldData:function(){this._adapter&&this._adapter.flags.isStarted||this.infinity.infinityStarted&&!this.infinity.infinityStopped||this.restartViewTransform()},restartViewTransform:function(){this.viewTransform=new l(this),this.viewTransform.on(l.Event.DONE,this._receiveData.bind(this)),this.getIsDataExpired()||this.storage.getLocal("accCode")!==this.options.accountCode&&this.storage.getSession("accCode")!==this.options.accountCode?(this.storage.removeStorages("data"),this.storage.removeStorages("session"),this.storage.removeLocal("infinityStarted"),this.storage.removeLocal("infinityStopped"),this.viewTransform.init()):this.viewTransform.setData(this.getStoredData())},_receiveData:function(t){this._ping.interval=1e3*t.target.response.pingTime,this._beat.interval=1e3*t.target.response.beatTime,this.sessionExpire=1e3*t.target.response.sessionExpire,this.youboraId=t.target.response.youboraId,this.storage.setStorages("data",t.target.response.msg),this.storage.setStorages("dataTime",(new Date).getTime()),this.storage.setStorages("accCode",this.options.accountCode),this.getIsSessionExpired()?(this.viewTransform.setSessionId(this.viewTransform.response.code),this.storage.setStorages("session",this.viewTransform.response.code)):this.viewTransform.setSessionId(this.getSessionId())},_reset:function(){this._stopPings(),this.resourceTransform=new p(this),this._adapter&&this._adapter.flags.reset(),this.isInitiated=!1,this.isStarted=!1,this.startDelayed=!1,this.isPreloading=!1,this.preloadChrono.reset(),this.initChrono.reset()},_send:function(t,e,i,r,n,o,a){var h=(new Date).getTime();this.options.preventZombieViews&&this.lastEventTime&&h>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=e===s.Service.STOP?null:h,i=this.requestBuilder.buildParams(i,e),this.getIsLive()&&(i.mediaDuration=void 0,i.playhead=void 0);var c={params:i,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(t,c),this._comm&&(null!==i||void 0!==n)&&this.options.enabled){this.lastServeiceSent=e;var l={};void 0!==n&&"GET"!=n&&(l.method=n);var p=new u(null,e,i,l);r&&p.setBody(r),this._comm.sendRequest(p,o,a)}},_initComm:function(){this.resourceTransform.init(this.getResource()),this._comm=new h,this._comm.addTransform(new c),this._comm.addTransform(this.viewTransform),this.options&&this.options.offline?this._comm.addTransform(new f(this)):this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(t){t&&(this.options.setOptions(t),"boolean"==typeof t["background.enabled"]&&(t["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection()))},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:s.WillSendEvent});a.assign(S.prototype,i(221)),a.assign(S.prototype,i(224)),a.assign(S.prototype,i(225)),a.assign(S.prototype,i(226)),a.assign(S.prototype,i(227)),a.assign(S.prototype,i(228)),a.assign(S.prototype,i(229)),a.assign(S.prototype,i(230)),a.assign(S.prototype,i(231)),t.exports=S},function(t,e,i){var r=i(22),n=i(12),o=r.extend({_services:[n.Service.INIT,n.Service.START,n.Service.OFFLINE_EVENTS],isBlocking:function(t){if(this._isBusy&&null!=t)if(-1!==this._services.indexOf(t.service))this.done();else if(t.service===n.Service.ERROR)return!1;return r.prototype.isBlocking.apply(this,arguments)}});t.exports=o},function(t,e,i){var r=i(4),n=i(45),o=r.extend({constructor:function(){this.storage=new n("youboraOffline",!0),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var t=this._getValidId();this.storage.setLocal(t,""),this.viewList.push(t),this.storage.setLocal("views",this.viewList),this.actualView=t},addEvent:function(t,e){if("/start"===t&&this._newView(),"/init"===t)return null;if(!this.actualView)return null;var i='{"request":"'+t.slice(1)+'",';for(var r in i+='"unixtime":'+Date.now()+",",e){if(void 0===e[r])break;i+='"'+r+'":',"code"===r?i+='"CODE_PLACEHOLDER",':"sessionId"===r?i+='"SESSION_PLACEHOLDER",':"parentId"===r?i+='"PARENT_PLACEHOLDER",':"sessionRoot"===r?i+='"ROOT_PLACEHOLDER",':"string"==typeof e[r]?i+='"'+e[r]+'",':"object"==typeof e[r]?i+='"'+JSON.stringify(e[r]).replace(/"/g,'\\"')+'",':i+=e[r]+","}i=i.slice(0,-1),i+="}";var n=this.storage.getLocal(this.actualView);""!=n&&(n+=","),this.storage.setLocal(this.actualView,n+i)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var t=0;;){var e=this.viewList[t];if(!this.givenIds.includes(e))return this.givenIds.push(e),["["+this.storage.getLocal(e)+"]",e];t++}return[null,null]},removeView:function(t){this.storage.removeLocal(t);var e=this.viewList.indexOf(t);-1!==e&&this.viewList.splice(e,1),-1!==(e=this.givenIds.indexOf(t))&&this.givenIds.splice(e,1),this.storage.setLocal("views",this.viewList.toString()),t===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var t="";this.storage.getLocal("views")?t=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===t?this.viewList=[]:"function"==typeof t.split&&(this.viewList=t.split(","))},_getValidId:function(){var t=Math.floor(1e8*Math.random()).toString();return this.viewList.indexOf(t)>=0?this._getValidId():t},sent:function(){this.givenIds=[]}});t.exports=o},function(t,e,i){var r=i(22),n=(i(12),r.extend({isBlocking:function(t){return!t.params.sessionId}}));t.exports=n},function(t,e,i){var r=i(4).extend({constructor:function(t){this.plugin=t},getAllData:function(){var t=this.getNonRandomData();return t.timestamp=this.getTimestamp(),t},getNonRandomData:function(){var t={};return t.userAgent=this.getUserAgent(),t.threads=this.getVirtualCores(),t.language=this.getLanguage(),t.langList=this.getAvailableLanguages(),t.resolution=this.getResolution(),t.colorDepth=this.getColorDepth(),t.deviceMemory=this.getMemory(),t.touchscreen=this.getTouchscreen(),t.localStorage=this.getLocalStorage(),t.sessionStorage=this.getSessionStorage(),t.cookiesAvailable=this.getCookiesAvailable(),t.flashAvailable=this.getHasFlash(),t.timeZone=this.getTimeZone(),t.plugins=this.getPluginList(),t},getUserAgent:function(){return this._navigatorCheck()?navigator.userAgent:null},getVirtualCores:function(){return this._navigatorCheck()?navigator.hardwareConcurrency:null},getLanguage:function(){return this._navigatorCheck()?navigator.language:null},getAvailableLanguages:function(){return this._navigatorCheck()?navigator.languages:null},getResolution:function(){return this._navigatorCheck()&&navigator.screen?navigator.screen.width.toString()+navigator.screen.height.toString():null},getColorDepth:function(){return this._navigatorCheck()&&navigator.screen?navigator.screen.colorDepth:null},getMemory:function(){return this._navigatorCheck()?navigator.deviceMemory:null},getTouchscreen:function(){return this._navigatorCheck()?navigator.maxTouchPoints:null},getLocalStorage:function(){return"undefined"!=typeof localStorage},getSessionStorage:function(){return"undefined"!=typeof sessionStorage},getCookiesAvailable:function(){return!!this._navigatorCheck()&&navigator.cookieEnabled},getHasFlash:function(){return!!this._navigatorCheck()&&(void 0!==navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||window.ActiveXObject&&0!=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))},getPluginList:function(){if(!this._navigatorCheck()||!navigator.plugins||0===navigator.plugins.length)return null;for(var t="",e=0;e<navigator.plugins.length;e++)t+=navigator.plugins[e].description+" "+navigator.plugins[e].filename+" "+navigator.plugins[e].name+" ";return t},getTimeZone:function(){return(new Date).getTimezoneOffset().toString()},getTimestamp:function(){return(new Date).getTime()},_navigatorCheck:function(){return"undefined"!=typeof navigator}});t.exports=r},function(t,e){t.exports=function(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){var i,r,n,o,s;return n=2147483648&t,o=2147483648&e,s=(1073741823&t)+(1073741823&e),(i=1073741824&t)&(r=1073741824&e)?2147483648^s^n^o:i|r?1073741824&s?3221225472^s^n^o:1073741824^s^n^o:s^n^o}function r(t,r,n,o,s,a,u){return t=i(t,i(i(function(t,e,i){return t&e|~t&i}(r,n,o),s),u)),i(e(t,a),r)}function n(t,r,n,o,s,a,u){return t=i(t,i(i(function(t,e,i){return t&i|e&~i}(r,n,o),s),u)),i(e(t,a),r)}function o(t,r,n,o,s,a,u){return t=i(t,i(i(function(t,e,i){return t^e^i}(r,n,o),s),u)),i(e(t,a),r)}function s(t,r,n,o,s,a,u){return t=i(t,i(i(function(t,e,i){return e^(t|~i)}(r,n,o),s),u)),i(e(t,a),r)}function a(t){var e,i="",r="";for(e=0;e<=3;e++)i+=(r="0"+(t>>>8*e&255).toString(16)).substr(r.length-2,2);return i}var u,h,c,l,p,f,d,g,v,y=Array();for(y=function(t){for(var e,i=t.length,r=i+8,n=16*((r-r%64)/64+1),o=Array(n-1),s=0,a=0;a<i;)s=a%4*8,o[e=(a-a%4)/4]=o[e]|t.charCodeAt(a)<<s,a++;return s=a%4*8,o[e=(a-a%4)/4]=o[e]|128<<s,o[n-2]=i<<3,o[n-1]=i>>>29,o}(t=function(t){t=t.replace(/rn/g,"n");for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),f=1732584193,d=4023233417,g=2562383102,v=271733878,u=0;u<y.length;u+=16)h=f,c=d,l=g,p=v,f=r(f,d,g,v,y[u+0],7,3614090360),v=r(v,f,d,g,y[u+1],12,3905402710),g=r(g,v,f,d,y[u+2],17,606105819),d=r(d,g,v,f,y[u+3],22,3250441966),f=r(f,d,g,v,y[u+4],7,4118548399),v=r(v,f,d,g,y[u+5],12,1200080426),g=r(g,v,f,d,y[u+6],17,2821735955),d=r(d,g,v,f,y[u+7],22,4249261313),f=r(f,d,g,v,y[u+8],7,1770035416),v=r(v,f,d,g,y[u+9],12,2336552879),g=r(g,v,f,d,y[u+10],17,4294925233),d=r(d,g,v,f,y[u+11],22,2304563134),f=r(f,d,g,v,y[u+12],7,1804603682),v=r(v,f,d,g,y[u+13],12,4254626195),g=r(g,v,f,d,y[u+14],17,2792965006),f=n(f,d=r(d,g,v,f,y[u+15],22,1236535329),g,v,y[u+1],5,4129170786),v=n(v,f,d,g,y[u+6],9,3225465664),g=n(g,v,f,d,y[u+11],14,643717713),d=n(d,g,v,f,y[u+0],20,3921069994),f=n(f,d,g,v,y[u+5],5,3593408605),v=n(v,f,d,g,y[u+10],9,38016083),g=n(g,v,f,d,y[u+15],14,3634488961),d=n(d,g,v,f,y[u+4],20,3889429448),f=n(f,d,g,v,y[u+9],5,568446438),v=n(v,f,d,g,y[u+14],9,3275163606),g=n(g,v,f,d,y[u+3],14,4107603335),d=n(d,g,v,f,y[u+8],20,1163531501),f=n(f,d,g,v,y[u+13],5,2850285829),v=n(v,f,d,g,y[u+2],9,4243563512),g=n(g,v,f,d,y[u+7],14,1735328473),f=o(f,d=n(d,g,v,f,y[u+12],20,2368359562),g,v,y[u+5],4,4294588738),v=o(v,f,d,g,y[u+8],11,2272392833),g=o(g,v,f,d,y[u+11],16,1839030562),d=o(d,g,v,f,y[u+14],23,4259657740),f=o(f,d,g,v,y[u+1],4,2763975236),v=o(v,f,d,g,y[u+4],11,1272893353),g=o(g,v,f,d,y[u+7],16,4139469664),d=o(d,g,v,f,y[u+10],23,3200236656),f=o(f,d,g,v,y[u+13],4,681279174),v=o(v,f,d,g,y[u+0],11,3936430074),g=o(g,v,f,d,y[u+3],16,3572445317),d=o(d,g,v,f,y[u+6],23,76029189),f=o(f,d,g,v,y[u+9],4,3654602809),v=o(v,f,d,g,y[u+12],11,3873151461),g=o(g,v,f,d,y[u+15],16,530742520),f=s(f,d=o(d,g,v,f,y[u+2],23,3299628645),g,v,y[u+0],6,4096336452),v=s(v,f,d,g,y[u+7],10,1126891415),g=s(g,v,f,d,y[u+14],15,2878612391),d=s(d,g,v,f,y[u+5],21,4237533241),f=s(f,d,g,v,y[u+12],6,1700485571),v=s(v,f,d,g,y[u+3],10,2399980690),g=s(g,v,f,d,y[u+10],15,4293915773),d=s(d,g,v,f,y[u+1],21,2240044497),f=s(f,d,g,v,y[u+8],6,1873313359),v=s(v,f,d,g,y[u+15],10,4264355552),g=s(g,v,f,d,y[u+6],15,2734768916),d=s(d,g,v,f,y[u+13],21,1309151649),f=s(f,d,g,v,y[u+4],6,4149444226),v=s(v,f,d,g,y[u+11],10,3174756917),g=s(g,v,f,d,y[u+2],15,718787259),d=s(d,g,v,f,y[u+9],21,3951481745),f=i(f,h),d=i(d,c),g=i(g,l),v=i(v,p);return(a(f)+a(d)+a(g)+a(v)).toLowerCase()}},function(t,e,i){var r=i(2),n=i(12),o=i(34),s={setAdapter:function(t){t.plugin?r.warn("Adapters can only be added to a single plugin"):(this.removeAdapter(),this._adapter=t,t.plugin=this,t.on(o.Event.INIT,this._initListener.bind(this)),t.on(o.Event.START,this._startListener.bind(this)),t.on(o.Event.JOIN,this._joinListener.bind(this)),t.on(o.Event.PAUSE,this._pauseListener.bind(this)),t.on(o.Event.RESUME,this._resumeListener.bind(this)),t.on(o.Event.SEEK_BEGIN,this._seekBeginListener.bind(this)),t.on(o.Event.SEEK_END,this._seekEndListener.bind(this)),t.on(o.Event.BUFFER_BEGIN,this._bufferBeginListener.bind(this)),t.on(o.Event.BUFFER_END,this._bufferEndListener.bind(this)),t.on(o.Event.ERROR,this._errorListener.bind(this)),t.on(o.Event.STOP,this._stopListener.bind(this)),t.on(o.Event.CLICK,this._clickListener.bind(this)),t.on(o.Event.BLOCKED,this._blockedListener.bind(this)),t.on(o.Event.VIDEO_EVENT,this._videoEventListener.bind(this)))},getAdapter:function(){return this._adapter},removeAdapter:function(){this._adapter&&(this._adapter.dispose(),this._adapter.plugin=null,this._adapter.off(o.Event.INIT,this._initListener),this._adapter.off(o.Event.START,this._startListener),this._adapter.off(o.Event.JOIN,this._joinListener),this._adapter.off(o.Event.PAUSE,this._pauseListener),this._adapter.off(o.Event.RESUME,this._resumeListener),this._adapter.off(o.Event.SEEK_BEGIN,this._seekBeginListener),this._adapter.off(o.Event.SEEK_END,this._seekEndListener),this._adapter.off(o.Event.BUFFER_BEGIN,this._bufferBeginListener),this._adapter.off(o.Event.BUFFER_END,this._bufferEndListener),this._adapter.off(o.Event.ERROR,this._errorListener),this._adapter.off(o.Event.STOP,this._stopListener),this._adapter.off(o.Event.VIDEO_EVENT,this._videoEventListener),this._adapter=null)},_initListener:function(t){if(!this._adapter||!this._adapter.flags.isInited){this.isInitiated&&this.lastServeiceSent!==n.Service.ERROR||(this.viewTransform.nextView(),this._initComm(),this._startPings());var e=t.data.params||{};this.isInitiated=!0,this._adapter?(this._adapter.flags.isInited=!0,this._adapter.chronos.join.start()):this.initChrono.start(),this._send(n.WillSendEvent.WILL_SEND_INIT,n.Service.INIT,e),r.notice(n.Service.INIT+" "+(e.title||e.mediaResource)),this._adSavedError()}},_startListener:function(t){this.isInitiated||(this.viewTransform.nextView(),this._initComm(),this._startPings());var e=t.data.params||{},i=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&this.getDuration()>0)&&this.getTitle();!(i=!this.options.forceInit&&(i&&this._isExtraMetadataReady()))||this._adapter.flags.isInited||this.isInitiated?this._adapter.flags.isInited||this.isInitiated||(this.isInitiated=!0,this._adapter.flags.isInited=!0,this._adapter.chronos.join.start(),this._send(n.WillSendEvent.WILL_SEND_START,n.Service.INIT,e),this._adSavedError(),r.notice(n.Service.INIT+" "+(e.title||e.mediaResource))):(this._send(n.WillSendEvent.WILL_SEND_START,n.Service.START,e),this._adSavedError(),r.notice(n.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0,this.isInitiated&&0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime))},_retryStart:function(t){this._isExtraMetadataReady()&&(this._send(n.WillSendEvent.WILL_SEND_START,n.Service.START,{}),this.startDelayed=!1)},_joinListener:function(t){var e=t.data.params||{};this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this.isInitiated&&!this.isStarted&&0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime),this._adsAdapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._adsAdapter.totalPrerolls||0),(new Date).getTime()),this._adsAdapter.totalPrerolls=0),this.isInitiated&&!this.isStarted&&(this._isExtraMetadataReady()?this._send(n.WillSendEvent.WILL_SEND_START,n.Service.START,e):this.startDelayed=!0,this._adSavedError(),r.notice(n.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0),e=t.data.params||{},this._send(n.WillSendEvent.WILL_SEND_JOIN,n.Service.JOIN,e),r.notice(n.Service.JOIN+" "+e.joinDuration+"ms"))},_pauseListener:function(t){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var e=t.data.params||{};this._send(n.WillSendEvent.WILL_SEND_PAUSE,n.Service.PAUSE,e),r.notice(n.Service.PAUSE+" at "+e.playhead+"s")},_resumeListener:function(t){var e=t.data.params||{};this._send(n.WillSendEvent.WILL_SEND_RESUME,n.Service.RESUME,e),r.notice(n.Service.RESUME+" "+e.pauseDuration+"ms"),this._adapter.chronos.pause.reset()},_seekBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),r.notice("Seek Begin")},_seekEndListener:function(t){var e=t.data.params||{};this._send(n.WillSendEvent.WILL_SEND_SEEK,n.Service.SEEK,e),r.notice(n.Service.SEEK+" to "+e.playhead+" in "+e.seekDuration+"ms")},_bufferBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),r.notice("Buffer Begin")},_bufferEndListener:function(t){var e=t.data.params||{};this._send(n.WillSendEvent.WILL_SEND_BUFFER,n.Service.BUFFER,e),r.notice(n.Service.BUFFER+" to "+e.playhead+" in "+e.bufferDuration+"ms")},_errorListener:function(t){this._blockError(t.data.params)||(this.fireError(t.data.params||{}),this._adSavedError())},_blockError:function(t){var e=Date.now();return!!this._lastErrorParams&&(this._lastErrorParams.errorCode===t.errorCode&&this._lastErrorParams.msg===t.msg)&&this._lastErrorTime+5e3>e?(this._lastErrorTime=e,!0):(this._lastErrorTime=e,this._lastErrorParams=t,!1)},_stopListener:function(t){this.fireStop(t.data.params||{})},_clickListener:function(t){r.warn("You have sent a CLICK event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.")},_blockedListener:function(t){r.warn("You have sent a BLOCKED event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.")},_videoEventListener:function(t){this._send(n.WillSendEvent.VIDEO_EVENT,n.Service.VIDEO_EVENT,t.data.params)},_isExtraMetadataReady:function(t){if(!this.options.waitForMetadata||this.options.pendingMetadata.length<1)return!0;var e=this.requestBuilder.getGetters();return this.options.pendingMetadata.map(function(t){if(e.hasOwnProperty(t))return!!this[e[t]]()}.bind(this)).indexOf(!1)<0}};t.exports=s},function(t,e,i){var r=i(4),n=i(28),o=r.extend({constructor:function(){this.reset()},reset:function(){this.join=new n,this.seek=new n,this.pause=new n,this.buffer=new n,this.total=new n}});t.exports=o},function(t,e,i){var r=i(4).extend({constructor:function(){this.reset()},reset:function(){this.isInited=!1,this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isEnded=!1,this.isStopped=!1}});t.exports=r},function(t,e,i){var r=i(10),n=i(33),o={getHost:function(){var t=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(t=this.viewTransform.response.host),r.addProtocol(r.stripProtocol(t),this.options["app.https"]||this.options.httpSecure)},getUserType:function(){return this.options["user.type"]||this.options.userType},isParseHls:function(){return this.options["parse.hls"]},isParseCdnNode:function(){return this.options["parse.cdnNode"]},isLocHeader:function(){return this.options["parse.locationHeader"]},isDashLoc:function(){return this.options["parse.dashLocation"]},getParseCdnNodeList:function(){return this.options["parse.cdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.cdnNameHeader"]},getObfuscateIp:function(){return this.options["user.obfuscateIp"]||this.options.obfuscateIp},getExtraparam1:function(){return this.options["content.customdimension.1"]||this.options["extraparam.1"]},getExtraparam2:function(){return this.options["content.customdimension.2"]||this.options["extraparam.2"]},getExtraparam3:function(){return this.options["content.customdimension.3"]||this.options["extraparam.3"]},getExtraparam4:function(){return this.options["content.customdimension.4"]||this.options["extraparam.4"]},getExtraparam5:function(){return this.options["content.customdimension.5"]||this.options["extraparam.5"]},getExtraparam6:function(){return this.options["content.customdimension.6"]||this.options["extraparam.6"]},getExtraparam7:function(){return this.options["content.customdimension.7"]||this.options["extraparam.7"]},getExtraparam8:function(){return this.options["content.customdimension.8"]||this.options["extraparam.8"]},getExtraparam9:function(){return this.options["content.customdimension.9"]||this.options["extraparam.9"]},getExtraparam10:function(){return this.options["content.customdimension.10"]||this.options["extraparam.10"]},getExtraparam11:function(){return this.options["content.customdimension.11"]||this.options["extraparam.11"]},getExtraparam12:function(){return this.options["content.customdimension.12"]||this.options["extraparam.12"]},getExtraparam13:function(){return this.options["content.customdimension.13"]||this.options["extraparam.13"]},getExtraparam14:function(){return this.options["content.customdimension.14"]||this.options["extraparam.14"]},getExtraparam15:function(){return this.options["content.customdimension.15"]||this.options["extraparam.15"]},getExtraparam16:function(){return this.options["content.customdimension.16"]||this.options["extraparam.16"]},getExtraparam17:function(){return this.options["content.customdimension.17"]||this.options["extraparam.17"]},getExtraparam18:function(){return this.options["content.customdimension.18"]||this.options["extraparam.18"]},getExtraparam19:function(){return this.options["content.customdimension.19"]||this.options["extraparam.19"]},getExtraparam20:function(){return this.options["content.customdimension.20"]||this.options["extraparam.20"]},getAdExtraparam1:function(){return this.options["ad.customDimension.1"]||this.options["ad.extraparam.1"]},getAdExtraparam2:function(){return this.options["ad.customDimension.2"]||this.options["ad.extraparam.2"]},getAdExtraparam3:function(){return this.options["ad.customDimension.3"]||this.options["ad.extraparam.3"]},getAdExtraparam4:function(){return this.options["ad.customDimension.4"]||this.options["ad.extraparam.4"]},getAdExtraparam5:function(){return this.options["ad.customDimension.5"]||this.options["ad.extraparam.5"]},getAdExtraparam6:function(){return this.options["ad.customDimension.6"]||this.options["ad.extraparam.6"]},getAdExtraparam7:function(){return this.options["ad.customDimension.7"]||this.options["ad.extraparam.7"]},getAdExtraparam8:function(){return this.options["ad.customDimension.8"]||this.options["ad.extraparam.8"]},getAdExtraparam9:function(){return this.options["ad.customDimension.9"]||this.options["ad.extraparam.9"]},getAdExtraparam10:function(){return this.options["ad.customDimension.10"]||this.options["ad.extraparam.10"]},getPluginInfo:function(){return{lib:n,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceInfo:function(){var t={};return this.getModel()&&(t.model=this.getModel()),this.getBrand()&&(t.brand=this.getBrand()),this.getDeviceType()&&(t.deviceType=this.getDeviceType()),this.getDeviceName()&&(t.deviceName=this.getDeviceName()),this.getOsName()&&(t.osName=this.getOsName()),this.getOsVersion()&&(t.osVersion=this.getOsVersion()),this.getBrowserName()&&(t.browserName=this.getBrowserName()),this.getBrowserVersion()&&(t.browserVersion=this.getBrowserVersion()),this.getBrowserType()&&(t.browserType=this.getBrowserType()),this.getBrowserEngine()&&(t.browserEngine=this.getBrowserEngine()),t!=={}?t:null},getDeviceCode:function(){return this.options["device.code"]},getModel:function(){return this.options["device.model"]},getBrand:function(){return this.options["device.brand"]},getDeviceType:function(){return this.options["device.type"]},getDeviceName:function(){return this.options["device.name"]},getOsName:function(){return this.options["device.osName"]},getOsVersion:function(){return this.options["device.osVersion"]},getBrowserName:function(){return this.options["device.browserName"]},getBrowserVersion:function(){return this.options["device.browserVersion"]},getBrowserType:function(){return this.options["device.browserType"]},getBrowserEngine:function(){return this.options["device.browserEngine"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options["user.name"]||this.options.username},getAnonymousUser:function(){return this.options["user.anonymousId"]||this.options.anonymousUser},getEmail:function(){return this.options["user.email"]},getReferer:function(){if(this.options.referer)return this.options.referer;var t="";return"undefined"!=typeof window&&window.location&&(t=window.location.href),t},getReferral:function(){return"undefined"!=typeof window&&window.document?window.document.referrer:null},getLanguage:function(){return"undefined"!=typeof navigator?navigator.language:null},getNodeHost:function(){return this.options["content.cdnNode"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){return this.offlineStorage.getView()},getExperiments:function(){return this.options.experiments.length>0?this.options.experiments:null},getFingerprint:function(){return this.fingerprint.getKey()},getNpawPluginUUID:function(){return this.fingerprint.getUUID()},getYouboraId:function(){return this.youboraId},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]},getAppName:function(){return this.options["app.name"]},getAppReleaseVersion:function(){return this.options["app.releaseVersion"]}};t.exports=o},function(t,e,i){var r=i(2),n=i(10),o=i(33),s={getPlayhead:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayhead()}catch(t){r.warn("An error occurred while calling getPlayhead",t)}return n.parseNumber(t,0)},getPlayrate:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayrate(),this._adapter.flags&&this._adapter.flags.isPaused&&(t=0)}catch(t){r.warn("An error occured while calling getPlayrate",t)}return t},getFramesPerSecond:function(){var t=this.options["content.fps"];if(null===t&&this._adapter)try{t=this._adapter.getFramesPerSecond()}catch(t){r.warn("An error occured while calling getFramesPerSecond",t)}return t},getDroppedFrames:function(){var t=null;if(this._adapter)try{t=this._adapter.getDroppedFrames()}catch(t){r.warn("An error occured while calling getDroppedFrames",t)}return t||(t=this.getWebkitDroppedFrames()),n.parseNumber(t,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var t=this.options["content.duration"];if(null===t&&this._adapter)try{t=this._adapter.getDuration()}catch(t){r.warn("An error occured while calling getDuration",t)}return 0===t&&(t=null),n.parseNumber(Math.round(t),null)},getBitrate:function(){var t=this.options["content.bitrate"];if(null===t&&this._adapter){try{t=this._adapter.getBitrate()}catch(t){r.warn("An error occured while calling getBitrate",t)}t&&-1!==t||(t=this.getWebkitBitrate())}return n.parseNumber(t,-1)},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getThroughput:function(){var t=this.options["content.throughput"];if(null===t&&this._adapter)try{t=this._adapter.getThroughput()}catch(t){r.warn("An error occured while calling getThroughput",t)}return n.parseNumber(t,-1)},getRendition:function(){var t=this.options["content.rendition"];if(null===t&&this._adapter)try{t=this._adapter.getRendition()}catch(t){r.warn("An error occured while calling getRendition",t)}return t},getTitle:function(){var t=this.options["content.title"];if(null===t&&this._adapter)try{t=this._adapter.getTitle()}catch(t){r.warn("An error occured while calling getTitle",t)}return t},getTitle2:function(){var t=this.options["content.program"]||this.options["content.title2"];if(null===t&&this._adapter)try{t=this._adapter.getTitle2()}catch(t){r.warn("An error occured while calling getTitle2",t)}return t},getIsLive:function(){var t=this.options["content.isLive"];if(null===t&&this._adapter)try{t=this._adapter.getIsLive()}catch(t){r.warn("An error occured while calling getIsLive",t)}return t||!1},getResource:function(){var t=null;return!this.resourceTransform.isBlocking()&&this.resourceTransform.isDone&&(t=this.resourceTransform.getResource()),t||this.getOriginalResource()},getOriginalResource:function(){var t=null;if(null===(t=this.options["content.resource"])&&this._adapter)try{t=this._adapter.getResource()}catch(e){r.warn("An error occured while calling getResource",e),t=null}return t||null},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerVersion()}catch(t){r.warn("An error occured while calling getPlayerVersion",t)}return t},getPlayerName:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerName()}catch(t){r.warn("An error occured while calling getPlayerName",t)}return t},getCdn:function(){var t=null;return this.resourceTransform.isBlocking()||(t=this.resourceTransform.getCdnName()),t||this.options["content.cdn"]},getPluginVersion:function(){var t=this.getAdapterVersion();return t||(t=o+"-adapterless"),t},getLibVersion:function(){return o},getAdapterVersion:function(){var t=null;if(this._adapter)try{t=this._adapter.getVersion()}catch(t){r.warn("An error occured while calling getPluginVersion",t)}return t},getCdnTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getCdnTraffic()}catch(t){r.warn("An error occured while calling getCdnTraffic",t)}return t},getP2PTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getP2PTraffic()}catch(t){r.warn("An error occured while calling getP2PTraffic",t)}return t},getUploadTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getUploadTraffic()}catch(t){r.warn("An error occured while calling getUploadTraffic",t)}return t},getIsP2PEnabled:function(){var t=null;if(this._adapter)try{t=this._adapter.getIsP2PEnabled()}catch(t){r.warn("An error occured while calling getIsP2PEnabled",t)}return t},getStreamingProtocol:function(){var t=this.options["content.streamingProtocol"];return"string"!=typeof t?null:"HDS"!=(t=t.toUpperCase())&&"HLS"!=t&&"MSS"!=t&&"DASH"!=t&&"RTMP"!=t&&"RTP"!=t&&"RTSP"!=t?(r.warn("Streaming protocol "+t+" is not a valid value"),null):t},getHouseholdId:function(){var t=null;if(this._adapter)try{t=this._adapter.getHouseholdId()}catch(t){r.warn("An error occurred while calling getHouseholdId",t)}return t},getLatency:function(){var t=null;if(this._adapter)try{t=this._adapter.getLatency()}catch(t){r.warn("An error occurred while calling getLatency",t)}return t},getPacketLoss:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketLoss()}catch(t){r.warn("An error occurred while calling getPacketLoss",t)}return t},getPacketSent:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketSent()}catch(t){r.warn("An error occurred while calling getPacketSent",t)}return t},getVideoMetrics:function(){var t=this._adapter?this._adapter.getMetrics():null;for(var e in t=t||this.options["content.metrics"])if("object"!=typeof t[e]||!t[e].value){var i={};i.value=t[e],t[e]=i}return t},getPreloadDuration:function(){return this.preloadChrono.getDeltaTime(!1)},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0},getPackage:function(){return this.options["content.package"]},getSaga:function(){return this.options["content.saga"]},getTvShow:function(){return this.options["content.tvShow"]},getSeason:function(){return this.options["content.season"]},getEpisodeTitle:function(){return this.options["content.episodeTitle"]},getChannel:function(){return this.options["content.channel"]},getID:function(){return this.options["content.id"]},getImdbId:function(){return this.options["content.imdbId"]},getGracenoteID:function(){return this.options["content.gracenoteId"]},getType:function(){return this.options["content.type"]},getGenre:function(){return this.options["content.genre"]},getVideoLanguage:function(){return this.options["content.language"]},getSubtitles:function(){return this.options["content.subtitles"]},getContractedResolution:function(){return this.options["content.contractedResolution"]},getCost:function(){return this.options["content.cost"]},getPrice:function(){return this.options["content.price"]},getPlaybackType:function(){return this.options["content.playbackType"]?this.options["content.playbackType"]:this.getIsLive()?"Live":"VoD"},getDRM:function(){return this.options["content.drm"]},getVideoCodec:function(){return this.options["content.encoding.videoCodec"]},getAudioCodec:function(){return this.options["content.encoding.audioCodec"]},getCodecSettings:function(){return this.options["content.encoding.codecSettings"]},getCodecProfile:function(){return this.options["content.encoding.codecProfile"]},getContainerFormat:function(){return this.options["content.encoding.containerFormat"]}};t.exports=s},function(t,e,i){var r=i(2),n=i(12),o=i(34),s={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(t){t.plugin?r.warn("Adapters can only be added to a single plugin"):(this.removeAdsAdapter(),t.plugin=this,this._adsAdapter=t,this._adsAdapter.on(o.Event.INIT,this._adInitListener.bind(this)),this._adsAdapter.on(o.Event.START,this._adStartListener.bind(this)),this._adsAdapter.on(o.Event.JOIN,this._adJoinListener.bind(this)),this._adsAdapter.on(o.Event.PAUSE,this._adPauseListener.bind(this)),this._adsAdapter.on(o.Event.RESUME,this._adResumeListener.bind(this)),this._adsAdapter.on(o.Event.BUFFER_BEGIN,this._adBufferBeginListener.bind(this)),this._adsAdapter.on(o.Event.BUFFER_END,this._adBufferEndListener.bind(this)),this._adsAdapter.on(o.Event.STOP,this._adStopListener.bind(this)),this._adsAdapter.on(o.Event.ERROR,this._adErrorListener.bind(this)),this._adsAdapter.on(o.Event.CLICK,this._adClickListener.bind(this)),this._adsAdapter.on(o.Event.BLOCKED,this._adBlockedListener.bind(this)))},removeAdsAdapter:function(){this._adsAdapter&&(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this._adsAdapter.off(o.Event.INIT,this._adInitListener),this._adsAdapter.off(o.Event.START,this._adStartListener),this._adsAdapter.off(o.Event.JOIN,this._adJoinListener),this._adsAdapter.off(o.Event.PAUSE,this._adPauseListener),this._adsAdapter.off(o.Event.RESUME,this._adResumeListener),this._adsAdapter.off(o.Event.BUFFER_BEGIN,this._adBufferBeginListener),this._adsAdapter.off(o.Event.BUFFER_END,this._adBufferEndListener),this._adsAdapter.off(o.Event.STOP,this._adStopListener),this._adsAdapter.off(o.Event.ERROR,this._adErrorListener),this._adsAdapter.off(o.Event.CLICK,this._adClickListener),this._adsAdapter.off(o.Event.BLOCKED,this._adBlockedListener),this._adsAdapter=null)},_adInitListener:function(t){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isInited||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this.adInitSent=!0;var e=t.data.params||{};e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_START,n.Service.AD_INIT,e),r.notice(n.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")},_adStartListener:function(t){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isInited||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit();var e=t.data.params||{};(this._adsAdapter.flags.isInited?e.adNumber=this.requestBuilder.lastSent.adNumber:e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"])||((this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._send(n.WillSendEvent.WILL_SEND_AD_START,n.Service.AD_START,e),r.notice(n.Service.AD_START+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")):this._adsAdapter.flags.isInited||(this.adInitSent=!0,this._send(n.WillSendEvent.WILL_SEND_AD_INIT,n.Service.AD_INIT,e),r.notice(n.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")))},_adJoinListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||!this.adInitSent||this.adStartSent||(this._send(n.WillSendEvent.WILL_SEND_AD_START,n.Service.AD_START,e),r.notice(n.Service.AD_START+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")),this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_JOIN,n.Service.AD_JOIN,e),r.notice(n.Service.AD_JOIN+" "+e.adJoinDuration+"ms"),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_PAUSE,n.Service.AD_PAUSE,e),r.notice(n.Service.AD_PAUSE+" at "+e.adPlayhead+"s")},_adResumeListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_RESUME,n.Service.AD_RESUME,e),r.notice(n.Service.AD_RESUME+" "+e.adPauseDuration+"ms")},_adBufferBeginListener:function(t){r.notice("Ad Buffer Begin"),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_BUFFER,n.Service.AD_BUFFER,e),r.notice(n.Service.AD_BUFFER+" "+e.adBufferDuration+"ms")},_adStopListener:function(t){this._adsAdapter.totalPrerolls=(this._adsAdapter.totalPrerolls||0)+this._adsAdapter.chronos.total.getDeltaTime();var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_STOP,n.Service.AD_STOP,e),r.notice(n.Service.AD_STOP+" "+e.adTotalDuration+"ms")},_adErrorListener:function(t){var e=t.data.params||{};return!this._adapter||this._adapter.flags.isStarted||this._adapter.flags.isInited||this.isInitiated?this._blockAdError(t.data.params)?null:(this._adsAdapter&&(this._adsAdapter.flags.isStarted||this._adsAdapter.flags.isInited)?e.adNumber=this.requestBuilder.lastSent.adNumber:e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_ERROR,n.Service.AD_ERROR,e),void r.notice(n.Service.AD_ERROR)):(this._savedAdError=t,null)},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_blockAdError:function(t){var e=Date.now();return!!this._lastAdErrorParams&&(this._lastAdErrorParams.errorCode===t.errorCode&&this._lastAdErrorParams.msg===t.msg)&&this._lastAdErrorTime+5e3>e?(this._lastAdErrorTime=e,!0):(this._lastAdErrorTime=e,this._lastAdErrorParams=t,!1)},_adClickListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_CLICK,n.Service.AD_CLICK,e),r.notice(n.Service.AD_CLICK)},_adBlockedListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(n.WillSendEvent.WILL_SEND_AD_BLOCKED,n.Service.AD_BLOCKED,e),r.notice(n.Service.AD_BLOCKED)}};t.exports=s},function(t,e,i){var r=i(2),n=i(10),o={getAdPlayerVersion:function(){var t="";if(this._adsAdapter)try{t=this._adsAdapter.getPlayerVersion()}catch(t){r.warn("An error occured while calling getAdPlayerVersion",t)}return t},getAdPosition:function(){var t="pre";if(this._adsAdapter)try{var e=this._adsAdapter.getPosition();"pre"!==e&&"mid"!==e&&"post"!==e||(t=e)}catch(t){r.warn("An error occured while calling getAdPosition",t)}return!t&&this._adapter&&(t=this._adapter.flags.isJoined?"mid":"pre"),t},getAdPlayhead:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getPlayhead()}catch(t){r.warn("An error occured while calling getAdPlayhead",t)}return n.parseNumber(t,0)},getAdDuration:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getDuration()}catch(t){r.warn("An error occured while calling getAdDuration",t)}return n.parseNumber(t,0)},getAdBitrate:function(){var t=null;if(this._adsAdapter){try{t=this._adsAdapter.getBitrate()}catch(t){r.warn("An error occured while calling getAdBitrate",t)}t&&-1!==t||(t=this.getWebkitAdBitrate())}return n.parseNumber(t,-1)},getWebkitAdBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getAdTitle:function(){var t=null;if(this.options["ad.title"])return this.options["ad.title"];if(this._adsAdapter)try{t=this._adsAdapter.getTitle()}catch(t){r.warn("An error occured while calling getAdTitle",t)}return t},getAdResource:function(){var t=null;if(this.options["ad.resource"])return this.options["ad.resource"];if(this._adsAdapter)try{t=this._adsAdapter.getResource()}catch(t){r.warn("An error occured while calling getAdResource",t)}return t},getAdCampaign:function(){return this.options["ad.campaign"]?this.options["ad.campaign"]:null},getAdAdapterVersion:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getVersion()}catch(t){r.warn("An error occured while calling getAdsAdapterVersion",t)}return t},getAdMetadata:function(){return this.options["ad.metadata"]},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1}};t.exports=o},function(t,e,i){var r=i(2),n=i(12),o={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(t){var e={diffTime:t,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(e=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(e,["pauseDuration"]):this.requestBuilder.fetchParams(e,["bitrate","throughput","fps"]),this._adapter.flags.isJoined&&(e=this.requestBuilder.fetchParams(e,["playhead"])),this._adapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["bufferDuration"])),this._adapter.flags.isSeeking&&(e=this.requestBuilder.fetchParams(e,["seekDuration"])),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(e=this.requestBuilder.fetchParams(e,["adPlayhead"]),e=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(e,["adPauseDuration"]):this.requestBuilder.fetchParams(e,["adBitrate"])),this._adsAdapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["adBufferDuration"])))),this._send(n.WillSendEvent.WILL_SEND_PING,n.Service.PING,e),this.startDelayed&&this._retryStart(),r.verbose(n.Service.PING)}};t.exports=o},function(t,e,i){var r=i(2),n=i(10),o=i(12),s=(i(46),i(22)),a={firePreloadBegin:function(){this.isPreloading||(this.isPreloading=!0,this.preloadChrono.start())},firePreloadEnd:function(){this.isPreloading&&(this.isPreloading=!1,this.preloadChrono.stop())},fireInit:function(t){this.isInitiated||this.getAdapter()&&(!this.getAdapter()||this.getAdapter().flags.isInited||this.getAdapter().flags.isStarted)||(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,t=t||{},this._send(o.WillSendEvent.WILL_SEND_INIT,o.Service.INIT,t),this._adSavedError(),r.notice(o.Service.INIT+" "+(t.title||t.mediaResource)))},fireError:function(t,e,i,s){this.isInitiated||this.getAdapter()&&(this.getAdapter().flags.isStarted||this.getAdapter().flags.isInited)||this.viewTransform.nextView(),this._comm||this._initComm();var a=n.buildErrorParams(t,e,i,s);this._send(o.WillSendEvent.WILL_SEND_ERROR,o.Service.ERROR,a),this._adSavedError(),r.notice(o.Service.ERROR+" "+a.errorLevel+" "+a.errorCode),"fatal"===a.errorLevel&&(this._reset(),this.viewTransform.nextView())},fireFatalError:function(t,e,i){this.options["ad.afterStop"]=0,this.fireError(t,e,i,"fatal"),this._adapter?this._adapter.fireStop():this.fireStop()},fireStop:function(t){t&&void 0!==t.end&&t.end&&(t.end=void 0,this.options["ad.afterStop"]=0),this._adsAdapter||(this.options["ad.afterStop"]=0),0===this.options["ad.afterStop"]&&(this._adapter&&(this._adapter.flags.isStopped=!0),t=t||{},this._send(o.WillSendEvent.WILL_SEND_STOP,o.Service.STOP,t),r.notice(o.Service.STOP+" at "+t.playhead+"s"),this._reset())},fireOfflineEvents:function(t){this.options&&!this.options.offline?this._adapter&&(this._adapter.flags.isStarted||this._adapter.flags.isInited)||this._adsAdapter&&(this._adsAdapter.flags.isStarted||this._adsAdapter.flags.isInited)?r.error("Adapters have to be stopped"):(this._offlineParams=t,this.viewTransform.response.code&&this.viewTransform.response.host?this._generateAndSendOffline():(this.offlineReference=this._generateAndSendOffline.bind(this),this.viewTransform.on(s.Event.DONE,this.offlineReference))):r.error("To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){var t=this._offlineParams;for(this._initComm();;){var e=this.requestBuilder.buildBody(o.Service.OFFLINE_EVENTS).viewJson;if(null===e[0])break;var i=this.viewTransform.nextView(),r=e[0].replace(/CODE_PLACEHOLDER/g,i.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"").replace(/,"parentId":"PARENT_PLACEHOLDER"/g,"");this._send(o.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,o.Service.OFFLINE_EVENTS,t,r,"POST",function(t,e){this.offlineStorage.removeView(e.offlineId)}.bind(this),{offlineId:e[1]})}this.offlineStorage.sent(),this._offlineParams=null}};t.exports=a},function(t,e,i){var r=i(12),n=i(2),o=i(17),s=i(47),a={_initInfinity:function(){this.infinity.on(s.Event.NAV,this._navListener.bind(this)),this.infinity.on(s.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(s.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(s.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(t,e,i){var r={params:i=this.requestBuilder.buildParams(i,e),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(t,r),this.infinity._comm&&null!==i&&this.options.enabled&&(this.lastServeiceSent=e,this.infinity._comm.sendRequest(new o(null,e,i)))},_navListener:function(t){var e=t.data.params||{};this._sendInfinity(r.WillSendEvent.WILL_SEND_NAV,r.Service.NAV,e),this._beat.isRunning||this._beat.start(),n.notice(r.Service.NAV+" "+e.route)},_sessionStartListener:function(t){var e=t.data.params||{};this._sendInfinity(r.WillSendEvent.WILL_SEND_SESSION_START,r.Service.SESSION_START,e),this._beat.isRunning||this._beat.start(),n.notice(r.Service.SESSION_START+" "+e.route)},_sessionStopListener:function(t){var e=t.data.params||{};this._sendInfinity(r.WillSendEvent.WILL_SEND_SESSION_STOP,r.Service.SESSION_STOP,e),this._beat.isRunning&&this._beat.stop(),n.notice(r.Service.SESSION_STOP+" "+e.route)},_eventListener:function(t){var e=t.data.params||{};this._sendInfinity(r.WillSendEvent.WILL_SEND_EVENT,r.Service.EVENT,e),n.notice(r.Service.EVENT+" "+e.name)},_sendBeat:function(t){var e={diffTime:t,sessions:[this.getSessionId()]};this._sendInfinity(r.WillSendEvent.WILL_SEND_BEAT,r.Service.BEAT,e),this.infinity&&this.infinity._setLastActive(),n.verbose(r.Service.BEAT)},getSessionMetrics:function(){var t=this.options["session.metrics"];for(var e in t)if("object"!=typeof t[e]||!t[e].value){var i={};i.value=t[e],t[e]=i}return t}};t.exports=a},function(t,e){var i={getContext:function(){return this.options["session.context"]?this.storage.getSession("context"):"Default"},getSessionId:function(){return this.storage.getStorages("session")},getStoredData:function(){return this.storage.getStorages("data")},getDataTime:function(){return this.storage.getStorages("dataTime")},getLastActive:function(){return this.storage.getStorages("lastactive")},setStoredData:function(t){this.storage.setStorages("data",t)},setSessionId:function(t){this.storage.setStorages("session",t)},setDataTime:function(t){this.storage.setStorages("dataTime",t)},setLastActive:function(t){this.storage.setStorages("lastactive",t)},getPageName:function(){if(document&&document.title)return document.title},getIsSessionExpired:function(){var t=(new Date).getTime();return!this.getSessionId()||this.infinity.getFirstActive()<t-this.sessionExpire},getIsDataExpired:function(){var t=(new Date).getTime();return!this.getStoredData()||this.infinity.getFirstActive()<t-this.sessionExpire}};t.exports=i},function(t,e,i){var r=i(34),n=i(10),o=r.extend({getListenersList:function(){},registerListeners:function(){if(this._registeredListeners&&0!=this._registeredListeners.length)return null;var t=this.getListenersList();for(var e in this._registeredListeners=[],t){var i=t[e].object;if(i||(i=this.player),!i)return null;var r=t[e].suscriber;r||("function"==typeof i.addEventListener?r="addEventListener":"function"==typeof i.on&&(r="on"));var o=t[e].unsuscriber;o||("function"==typeof i.removeEventListener?o="removeEventListener":"function"==typeof i.off&&(o="off"));var s=t[e].events,a=[];for(var u in s)a.push(u);for(var h in"addEventListener"===r||"on"===r?n.logAllEvents(i,[null].concat(a)):n.logAllEvents(i[r],[null].concat(a)),s)if(s[h]){this._registeredListeners.push([i,o,h,s[h].bind(this)]);var c=this._registeredListeners.length-1;i[r](h,this._registeredListeners[c][3])}}},unregisterListeners:function(){if(this.monitor&&this.monitor.stop(),!this._registeredListeners||0===this._registeredListeners.length)return null;for(var t in this._registeredListeners){var e=this._registeredListeners[t],i=e[0],r=e[1],n=e[2],o=e[3];i&&i[r](n,o)}this._registeredListeners=[]}});t.exports=o},function(t,e,i){var r=i(87),n=i(101);r.adapters.Bitmovin=r.StandardAdapter.extend({getVersion:function(){return n.version+"-"+n.name+"-"+n.tech},getDuration:function(){return this.duration},getPosition:function(){return this.plugin.getAdapter().flags.isJoined?"mid":"pre"},getListenersList:function(){var t=this.player.EVENT||bitmovin.player.EVENT,e={};return e[t.ON_AD_CLICKED]=this.clickListener,e[t.ON_AD_ERROR]=this.errorListener,e[t.ON_AD_FINISHED]=this.endListener,e[t.ON_AD_LINEARITY_CHANGED]=null,e[t.ON_AD_MANIFEST_LOADED]=this.manifestListener,e[t.ON_AD_PLAYBACK_FINISHED]=this.endListener,e[t.ON_AD_SCHEDULED]=null,e[t.ON_AD_SKIPPED]=this.skipListener,e[t.ON_AD_STARTED]=this.joinListener,e[t.ON_AD_BREAK_FINISHED]=this.endListener,e[t.ON_AD_BREAK_STARTED]=this.playListener,e[t.ON_AD_QUARTILE]=this.quartileListener,e[t.ON_PAUSED]=this.pauseListener,e[t.ON_PLAYING]=this.playingListener,[{suscriber:"addEventHandler",unsuscriber:"removeEventHandler",events:e}]},playListener:function(t){this.fireStart(),this.fireResume()},pauseListener:function(t){this.firePause()},playingListener:function(t){this.fireResume()},joinListener:function(t){this.duration=t.duration,this.fireStart(),this.fireJoin()},clickListener:function(t){this.fireClick(t.clickThroughUrl)},endListener:function(t){this.fireStop(),this.duration=null},errorListener:function(t){t.code>=200&&t.code<=999&&(this.fireError(t.code,t.message),this.fireStop(),this.duration=null)},skipListener:function(t){this.fireSkip(),this.duration=null},manifestListener:function(t){r.Log.error(t)}}),t.exports=r.adapters.Bitmovin},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(235),n=i(23),o=i(53),s=i(102),a=i(135),u=i(104),h=i(50),c=i(52),l=i(24),p=i(241),f=i(56),d=i(105),g=i(19),v=i(57),y=i(51),m=i(103),E=i(242),w=i(48),b=i(5),S=i(20),T=i(58),I=i(122),_=i(127),P=i(126),O=i(7),A=i(128),R=i(130),C=i(123),N=i(125),k=i(124),D=i(129),L=i(243),x=i(62),M=i(244),B=i(245),H=i(246),U=i(132),j=i(131),F=i(133),V=i(247),G=i(134),q=i(136),Y=i(61),W=i(137),J=i(60),Q=i(138),X=i(55),K=i(112),$=i(113),z=i(116),Z=i(108),tt=i(110),et=i(109),it=i(111),rt=i(59),nt=i(118),ot=i(18),st=i(120),at=i(121),ut=i(107),ht=i(114),ct=i(115),lt=i(29),pt=i(26),ft=i(30),dt=i(54),gt=i(49),vt=i(117),yt=i(119);"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t});var mt={version:"{{VERSION}}",UIManager:r.UIManager,UIInstanceManager:r.UIInstanceManager,ArrayUtils:lt.ArrayUtils,StringUtils:pt.StringUtils,PlayerUtils:ft.PlayerUtils,UIUtils:dt.UIUtils,BrowserUtils:gt.BrowserUtils,StorageUtils:vt.StorageUtils,AdClickOverlay:H.AdClickOverlay,AdMessageLabel:B.AdMessageLabel,AdSkipButton:M.AdSkipButton,AirPlayToggleButton:W.AirPlayToggleButton,AudioQualitySelectBox:T.AudioQualitySelectBox,AudioTrackSelectBox:I.AudioTrackSelectBox,BufferingOverlay:F.BufferingOverlay,Button:n.Button,CastStatusOverlay:_.CastStatusOverlay,CastToggleButton:P.CastToggleButton,CastUIContainer:V.CastUIContainer,ClickOverlay:x.ClickOverlay,CloseButton:q.CloseButton,Component:O.Component,Container:b.Container,ControlBar:o.ControlBar,ErrorMessageOverlay:A.ErrorMessageOverlay,FullscreenToggleButton:s.FullscreenToggleButton,HugePlaybackToggleButton:a.HugePlaybackToggleButton,HugeReplayButton:j.HugeReplayButton,Label:S.Label,MetadataLabel:Y.MetadataLabel,MetadataLabelContent:Y.MetadataLabelContent,PictureInPictureToggleButton:Q.PictureInPictureToggleButton,PlaybackSpeedSelectBox:U.PlaybackSpeedSelectBox,PlaybackTimeLabel:u.PlaybackTimeLabel,PlaybackTimeLabelMode:u.PlaybackTimeLabelMode,PlaybackToggleButton:h.PlaybackToggleButton,PlaybackToggleOverlay:G.PlaybackToggleOverlay,RecommendationOverlay:R.RecommendationOverlay,SeekBar:c.SeekBar,SeekBarLabel:C.SeekBarLabel,SelectBox:l.SelectBox,ItemSelectionList:p.ItemSelectionList,SettingsPanel:f.SettingsPanel,SettingsPanelItem:f.SettingsPanelItem,SettingsToggleButton:d.SettingsToggleButton,Spacer:X.Spacer,SubtitleOverlay:N.SubtitleOverlay,SubtitleSelectBox:k.SubtitleSelectBox,TitleBar:D.TitleBar,ToggleButton:g.ToggleButton,UIContainer:w.UIContainer,VideoQualitySelectBox:v.VideoQualitySelectBox,VolumeControlButton:L.VolumeControlButton,VolumeSlider:J.VolumeSlider,VolumeToggleButton:y.VolumeToggleButton,VRToggleButton:m.VRToggleButton,Watermark:E.Watermark,subtitlesettings:{BackgroundColorSelectBox:K.BackgroundColorSelectBox,BackgroundOpacitySelectBox:$.BackgroundOpacitySelectBox,CharacterEdgeSelectBox:z.CharacterEdgeSelectBox,FontColorSelectBox:Z.FontColorSelectBox,FontFamilySelectBox:tt.FontFamilySelectBox,FontOpacitySelectBox:et.FontOpacitySelectBox,FontSizeSelectBox:it.FontSizeSelectBox,SubtitleSettingsButton:rt.SubtitleSettingsButton,SubtitleSettingsCloseButton:nt.SubtitleSettingsCloseButton,SubtitleSettingSelectBox:ot.SubtitleSettingSelectBox,SubtitleSettingsLabel:st.SubtitleSettingsLabel,SubtitleSettingsOpenButton:at.SubtitleSettingsOpenButton,SubtitleSettingsPanel:ut.SubtitleSettingsPanel,WindowColorSelectBox:ht.WindowColorSelectBox,WindowOpacitySelectBox:ct.WindowOpacitySelectBox,SubtitleSettingsResetButton:yt.SubtitleSettingsResetButton}};window.miBitmovinUi={playerui:mt},t.exports=mt},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(48),o=i(6),s=i(5),a=i(50),u=i(102),h=i(103),c=i(51),l=i(52),p=i(104),f=i(53),d=i(13),g=i(105),v=i(56),y=i(107),m=i(120),E=i(121),w=i(57),b=i(58),S=i(122),T=i(123),I=i(60),_=i(124),P=i(125),O=i(126),A=i(127),R=i(128),C=i(129),N=i(130),k=i(132),D=i(133),L=i(134),x=i(136),M=i(61),B=i(137),H=i(138),U=i(240),j=i(55),F=i(54),V=i(29),G=i(49),q=function(){function t(t,e,i){void 0===i&&(i={});var s=this;if(this.events={onUiVariantResolve:new d.EventDispatcher},e instanceof n.UIContainer){var a=e,u=[];u.push({ui:a}),this.uiVariants=u}else this.uiVariants=e;this.player=t,this.config=r.__assign({},i,{events:{onUpdated:new d.EventDispatcher}}),this.managerPlayerWrapper=new J(t);var h=function(){var e=t.getConfig().source||{},n=r.__assign({},i);n.metadata=n.metadata||{};var o={metadata:{title:e.title,description:e.description,markers:e.markers},recommendations:e.recommendations};s.config.metadata=s.config.metadata||{},s.config.metadata.title=o.metadata.title||n.metadata.title,s.config.metadata.description=o.metadata.description||n.metadata.description,s.config.metadata.markers=o.metadata.markers||n.metadata.markers||[],s.config.recommendations=o.recommendations||n.recommendations||[]};h(),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_SOURCE_LOADED,(function(){h(),s.config.events.onUpdated.dispatch(s)})),i.container?this.uiContainerElement=(i.container,HTMLElement,new o.DOM(i.container)):this.uiContainerElement=new o.DOM(t.getFigure()),this.uiInstanceManagers=[];for(var c=[],l=0,p=this.uiVariants;l<p.length;l++){var f=p[l];null==f.condition&&c.push(f),this.uiInstanceManagers.push(new W(t,f.ui,this.config))}if(c.length>1)throw Error("Too many UIs without a condition: You cannot have more than one default UI");if(c.length>0&&c[0]!==this.uiVariants[this.uiVariants.length-1])throw Error("Invalid UI variant order: the default UI (without condition) must be at the end of the list");void 0===i.autoUiVariantResolve&&(i.autoUiVariantResolve=!0);var g=null,v=function(e){if(null!=e)switch(e.type){case t.EVENT.ON_AD_STARTED:g=e;break;case t.EVENT.ON_AD_FINISHED:case t.EVENT.ON_AD_SKIPPED:case t.EVENT.ON_AD_ERROR:g=null;break;case t.EVENT.ON_READY:g&&!t.isAd()&&(g=null)}var i=null!=g,r=i&&"vast"===g.clientType;s.resolveUiVariant({isAd:i,isAdWithUI:r,adClientType:i?g.clientType:null},(function(t){t.isAd&&s.currentUi.getWrappedPlayer().fireEventInUI(s.player.EVENT.ON_AD_STARTED,g)}))};i.autoUiVariantResolve&&(this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_READY,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PLAY,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PAUSED,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_STARTED,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_FINISHED,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_SKIPPED,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_ERROR,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PLAYER_RESIZE,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT,v)),v(null)}return t.prototype.getConfig=function(){return this.config},t.prototype.getUiVariants=function(){return this.uiVariants},t.prototype.switchToUiVariant=function(t,e){var i=this.uiVariants.indexOf(t),r=this.uiInstanceManagers[i],n=!1;r!==this.currentUi&&(n=!0),n&&(this.currentUi&&this.currentUi.getUI().hide(),this.currentUi=r,null!=this.currentUi&&(this.currentUi.isConfigured()||this.addUi(this.currentUi),e&&e(),this.currentUi.getUI().show()))},t.prototype.resolveUiVariant=function(t,e){void 0===t&&(t={});var i={isAd:!1,isAdWithUI:!1,adClientType:null,isFullscreen:this.player.isFullscreen(),isMobile:G.BrowserUtils.isMobile,isPlaying:this.player.isPlaying(),width:this.uiContainerElement.width(),documentWidth:document.body.clientWidth},n=r.__assign({},i,t);this.events.onUiVariantResolve.dispatch(this,n);for(var o=null,s=0,a=this.uiVariants;s<a.length;s++){var u=a[s];if(null==u.condition||!0===u.condition(n)){o=u;break}}this.switchToUiVariant(o,(function(){e&&e(n)}))},t.prototype.addUi=function(t){var e=t.getUI().getDomElement(),i=t.getWrappedPlayer();t.configureControls(),this.uiContainerElement.append(e),i.isReady()&&i.fireEventInUI(i.EVENT.ON_READY,{}),window.requestAnimationFrame?requestAnimationFrame((function(){t.onConfigured.dispatch(t.getUI())})):setTimeout((function(){t.onConfigured.dispatch(t.getUI())}),0)},t.prototype.releaseUi=function(t){t.releaseControls(),t.getUI().getDomElement().remove(),t.clearEventHandlers()},t.prototype.release=function(){for(var t=0,e=this.uiInstanceManagers;t<e.length;t++){var i=e[t];this.releaseUi(i)}this.managerPlayerWrapper.clearEventHandlers()},Object.defineProperty(t.prototype,"onUiVariantResolve",{get:function(){return this.events.onUiVariantResolve},enumerable:!0,configurable:!0}),t.prototype.getTimelineMarkers=function(){return this.config.metadata.markers},t.prototype.addTimelineMarker=function(t){this.config.metadata.markers.push(t),this.config.events.onUpdated.dispatch(this)},t.prototype.removeTimelineMarker=function(t){return V.ArrayUtils.remove(this.config.metadata.markers,t)===t&&(this.config.events.onUpdated.dispatch(this),!0)},t}();e.UIManager=q,function(t){!function(e){function i(){var t=new P.SubtitleOverlay,e=new v.SettingsPanel({components:[new v.SettingsPanelItem("Video Quality",new w.VideoQualitySelectBox),new v.SettingsPanelItem("Speed",new k.PlaybackSpeedSelectBox),new v.SettingsPanelItem("Audio Track",new S.AudioTrackSelectBox),new v.SettingsPanelItem("Audio Quality",new b.AudioQualitySelectBox)],hidden:!0}),i=new y.SubtitleSettingsPanel({hidden:!0,overlay:t,settingsPanel:e}),r=new E.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new v.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:r}),new _.SubtitleSelectBox));var o=new f.ControlBar({components:[e,i,new s.Container({components:[new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new T.SeekBarLabel}),new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]}),new s.Container({components:[new a.PlaybackToggleButton,new c.VolumeToggleButton,new I.VolumeSlider,new j.Spacer,new H.PictureInPictureToggleButton,new B.AirPlayToggleButton,new O.CastToggleButton,new h.VRToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton],cssClasses:["controlbar-bottom"]})]});return new n.UIContainer({components:[t,new D.BufferingOverlay,new L.PlaybackToggleOverlay,new A.CastStatusOverlay,o,new N.RecommendationOverlay,new R.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc"]})}function r(){var t=new P.SubtitleOverlay,e=new v.SettingsPanel({components:[new v.SettingsPanelItem("Speed",new k.PlaybackSpeedSelectBox),new v.SettingsPanelItem("Audio Track",new S.AudioTrackSelectBox),new v.SettingsPanelItem("Audio Quality",new b.AudioQualitySelectBox)],hidden:!0}),i=new y.SubtitleSettingsPanel({hidden:!0,overlay:t,settingsPanel:e}),r=new E.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new v.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:r}),new _.SubtitleSelectBox));var o=new f.ControlBar({components:[e,i,new s.Container({components:[new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new T.SeekBarLabel}),new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]}),new s.Container({components:[new a.PlaybackToggleButton,new c.VolumeToggleButton,new I.VolumeSlider,new j.Spacer,new B.AirPlayToggleButton,new O.CastToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton],cssClasses:["controlbar-bottom"]})]});return new n.UIContainer({components:[new U.AudioOnlyOverlay,t,new D.BufferingOverlay,new L.PlaybackToggleOverlay,new A.CastStatusOverlay,o,new N.RecommendationOverlay,new R.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc"]})}function o(){var t=new P.SubtitleOverlay,e=new v.SettingsPanel({components:[new v.SettingsPanelItem("Video Quality",new w.VideoQualitySelectBox),new v.SettingsPanelItem("Speed",new k.PlaybackSpeedSelectBox),new v.SettingsPanelItem("Audio Track",new S.AudioTrackSelectBox),new v.SettingsPanelItem("Audio Quality",new b.AudioQualitySelectBox)],hidden:!0,hideDelay:-1}),i=new y.SubtitleSettingsPanel({hidden:!0,hideDelay:-1,overlay:t,settingsPanel:e}),r=new E.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new v.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:r}),new _.SubtitleSelectBox)),e.addComponent(new x.CloseButton({target:e})),i.addComponent(new x.CloseButton({target:i}));var o=new f.ControlBar({components:[new s.Container({components:[new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new T.SeekBarLabel}),new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]})]});return new n.UIContainer({components:[t,new D.BufferingOverlay,new A.CastStatusOverlay,new L.PlaybackToggleOverlay,o,new C.TitleBar({components:[new M.MetadataLabel({content:M.MetadataLabelContent.Title}),new O.CastToggleButton,new h.VRToggleButton,new c.VolumeToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton]}),e,i,new N.RecommendationOverlay,new R.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc","ui-skin-smallscreen"]})}function d(){var t=new P.SubtitleOverlay,e=new v.SettingsPanel({components:[new v.SettingsPanelItem("Speed",new k.PlaybackSpeedSelectBox),new v.SettingsPanelItem("Audio Track",new S.AudioTrackSelectBox),new v.SettingsPanelItem("Audio Quality",new b.AudioQualitySelectBox)],hidden:!0,hideDelay:-1}),i=new y.SubtitleSettingsPanel({hidden:!0,hideDelay:-1,overlay:t,settingsPanel:e}),r=new E.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new v.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:r}),new _.SubtitleSelectBox)),e.addComponent(new x.CloseButton({target:e})),i.addComponent(new x.CloseButton({target:i}));var o=new f.ControlBar({components:[new s.Container({components:[new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new T.SeekBarLabel}),new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]})]});return new n.UIContainer({components:[new U.AudioOnlyOverlay,t,new D.BufferingOverlay,new A.CastStatusOverlay,new L.PlaybackToggleOverlay,o,new C.TitleBar({components:[new M.MetadataLabel({content:M.MetadataLabelContent.Title}),new O.CastToggleButton,new h.VRToggleButton,new c.VolumeToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton]}),e,i,new N.RecommendationOverlay,new R.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc","ui-skin-smallscreen"]})}e.buildAudioVideoUI=function(e,r){return void 0===r&&(r={}),new t(e,[{ui:o(),condition:function(t){return t.isMobile&&t.documentWidth<600}},{ui:i()}],r)},e.buildAudioOnlyUI=function(e,i){return void 0===i&&(i={}),new t(e,[{ui:d(),condition:function(t){return t.isMobile&&t.documentWidth<600}},{ui:r()}],i)}}(t.Factory||(t.Factory={}))}(q=e.UIManager||(e.UIManager={})),e.UIManager=q;var Y=function(){function t(t,e,i){this.events={onConfigured:new d.EventDispatcher,onSeek:new d.EventDispatcher,onSeekPreview:new d.EventDispatcher,onSeeked:new d.EventDispatcher,onComponentShow:new d.EventDispatcher,onComponentHide:new d.EventDispatcher,onControlsShow:new d.EventDispatcher,onPreviewControlsHide:new d.EventDispatcher,onControlsHide:new d.EventDispatcher,onRelease:new d.EventDispatcher},this.playerWrapper=new J(t),this.ui=e,this.config=i}return t.prototype.getConfig=function(){return this.config},t.prototype.getUI=function(){return this.ui},t.prototype.getPlayer=function(){return this.playerWrapper.getPlayer()},Object.defineProperty(t.prototype,"onConfigured",{get:function(){return this.events.onConfigured},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSeek",{get:function(){return this.events.onSeek},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSeekPreview",{get:function(){return this.events.onSeekPreview},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSeeked",{get:function(){return this.events.onSeeked},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onComponentShow",{get:function(){return this.events.onComponentShow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onComponentHide",{get:function(){return this.events.onComponentHide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onControlsShow",{get:function(){return this.events.onControlsShow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPreviewControlsHide",{get:function(){return this.events.onPreviewControlsHide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onControlsHide",{get:function(){return this.events.onControlsHide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRelease",{get:function(){return this.events.onRelease},enumerable:!0,configurable:!0}),t.prototype.clearEventHandlers=function(){this.playerWrapper.clearEventHandlers();var t=this.events;for(var e in t){t[e].unsubscribeAll()}},t}();e.UIInstanceManager=Y;var W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.getWrappedPlayer=function(){return this.getPlayer()},e.prototype.configureControls=function(){this.configureControlsTree(this.getUI()),this.configured=!0},e.prototype.isConfigured=function(){return this.configured},e.prototype.configureControlsTree=function(t){var e=this,i=[];F.UIUtils.traverseTree(t,(function(t){for(var r=0,n=i;r<n.length;r++){if(n[r]===t)throw console&&console.error("Circular reference in UI tree",t),Error("Circular reference in UI tree: "+t.constructor.name)}t.initialize(),t.configure(e.getPlayer(),e),i.push(t)}))},e.prototype.releaseControls=function(){this.configured&&(this.onRelease.dispatch(this.getUI()),this.releaseControlsTree(this.getUI()),this.configured=!1),this.released=!0},e.prototype.isReleased=function(){return this.released},e.prototype.releaseControlsTree=function(t){if(t.release(),t instanceof s.Container)for(var e=0,i=t.getComponents();e<i.length;e++){var r=i[e];this.releaseControlsTree(r)}},e.prototype.clearEventHandlers=function(){t.prototype.clearEventHandlers.call(this)},e}(Y),J=function(){function t(t){var e=this;this.eventHandlers={},this.player=t;var i=[];for(var r in t)i.push(r);for(var n=[],o=[],s=0,a=i;s<a.length;s++){r=a[s];"function"==typeof t[r]?n.push(r):o.push(r)}for(var u={},h=function(e){u[e]=function(){return t[e].apply(t,arguments)}},c=0,l=n;c<l.length;c++){h(l[c])}for(var p=function(e){var i=Object.getOwnPropertyDescriptor(t,e)||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),e);i&&(i.get||i.set)?Object.defineProperty(u,e,{get:function(){return i.get.call(t)},set:function(e){return i.set.call(t,e)}}):u[e]=t[e]},f=0,d=o;f<d.length;f++){p(d[f])}u.addEventHandler=function(i,r){return t.on?t.on(i,r):t.addEventHandler(i,r),e.eventHandlers[i]||(e.eventHandlers[i]=[]),e.eventHandlers[i].push(r),u},u.removeEventHandler=function(i,r){return t.off?t.off(i,r):t.removeEventHandler(i,r),e.eventHandlers[i]&&V.ArrayUtils.remove(e.eventHandlers[i],r),u},u.fireEventInUI=function(t,i){if(e.eventHandlers[t])for(var r=Object.assign({},{timestamp:Date.now(),type:t,uiSourced:!0},i),n=0,o=e.eventHandlers[t];n<o.length;n++){(0,o[n])(r)}},this.wrapper=u}return t.prototype.getPlayer=function(){return this.wrapper},t.prototype.clearEventHandlers=function(){for(var t in this.eventHandlers)for(var e=0,i=this.eventHandlers[t];e<i.length;e++){var r=i[e];this.player.removeEventHandler(t,r)}},t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=1;t.next=function(){return e++}}(e.Guid||(e.Guid={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(117),o=i(7),s=i(13),a=function(){function t(){var t=this;this._properties={fontColor:new h(this),fontOpacity:new h(this),fontFamily:new h(this),fontSize:new h(this),characterEdge:new h(this),backgroundColor:new h(this),backgroundOpacity:new h(this),windowColor:new h(this),windowOpacity:new h(this)},this.userSettings={},this.localStorageKey=u.instance().prefixCss("subtitlesettings");var e=function(e){i._properties[e].onChanged.subscribe((function(i,r){r.isSet()?t.userSettings[e]=r.value:delete t.userSettings[e],t.save()}))},i=this;for(var r in this._properties)e(r);this.load()}return t.prototype.reset=function(){for(var t in this._properties)this._properties[t].clear()},Object.defineProperty(t.prototype,"fontColor",{get:function(){return this._properties.fontColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontOpacity",{get:function(){return this._properties.fontOpacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._properties.fontFamily},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._properties.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"characterEdge",{get:function(){return this._properties.characterEdge},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._properties.backgroundColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundOpacity",{get:function(){return this._properties.backgroundOpacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowColor",{get:function(){return this._properties.windowColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowOpacity",{get:function(){return this._properties.windowOpacity},enumerable:!0,configurable:!0}),t.prototype.save=function(){n.StorageUtils.setObject(this.localStorageKey,this.userSettings)},t.prototype.load=function(){for(var t in this.userSettings=n.StorageUtils.getObject(this.localStorageKey)||{},this.userSettings)this._properties[t].value=this.userSettings[t]},t}();e.SubtitleSettingsManager=a;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.instance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.prefixCss=function(e){return t.prototype.prefixCss.call(this,e)},e}(o.Component),h=function(){function t(t){this._manager=t,this._onChanged=new s.EventDispatcher}return t.prototype.isSet=function(){return null!=this._value},t.prototype.clear=function(){this._value=null,this.onChangedEvent(null)},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){"string"==typeof t&&"null"===t&&(t=null),this._value=t,this.onChangedEvent(t)},enumerable:!0,configurable:!0}),t.prototype.onChangedEvent=function(t){this._onChanged.dispatch(this._manager,this)},Object.defineProperty(t.prototype,"onChanged",{get:function(){return this._onChanged.getEvent()},enumerable:!0,configurable:!0}),t}();e.SubtitleSettingsProperty=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),n=function(){function t(){this.state={}}return t.prototype.load=function(t,e){var i=this;if(this.state[t]){var n=this.state[t];n.loadedCallback=e,n.loaded&&this.callLoadedCallback(n)}else{var o={url:t,image:new r.DOM("img",{}),loadedCallback:e,loaded:!1,width:0,height:0};this.state[t]=o,o.image.on("load",(function(t){o.loaded=!0,o.width=o.image.get(0).width,o.height=o.image.get(0).height,i.callLoadedCallback(o)})),o.image.attr("src",o.url)}},t.prototype.callLoadedCallback=function(t){t.loadedCallback(t.url,t.width,t.height)},t}();e.ImageLoader=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(7),o=i(6),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.canvasWidth=160,i.canvasHeight=90,i.interferenceHeight=50,i.lastFrameUpdate=0,i.frameInterval=60,i.useAnimationFrame=!!window.requestAnimationFrame,i.config=i.mergeConfig(e,{cssClass:"ui-tvnoisecanvas"},i.config),i}return r.__extends(e,t),e.prototype.toDomElement=function(){return this.canvas=new o.DOM("canvas",{class:this.getCssClasses()})},e.prototype.start=function(){this.canvasElement=this.canvas.get(0),this.canvasContext=this.canvasElement.getContext("2d"),this.noiseAnimationWindowPos=-this.canvasHeight,this.lastFrameUpdate=0,this.canvasElement.width=this.canvasWidth,this.canvasElement.height=this.canvasHeight,this.renderFrame()},e.prototype.stop=function(){this.useAnimationFrame?cancelAnimationFrame(this.frameUpdateHandlerId):clearTimeout(this.frameUpdateHandlerId)},e.prototype.renderFrame=function(){if(this.lastFrameUpdate+this.frameInterval>(new Date).getTime())this.scheduleNextRender();else{for(var t,e=this.canvasWidth,i=this.canvasHeight,r=this.canvasContext.createImageData(e,i),n=0;n<i;n++)for(var o=0;o<e;o++)t=e*n*4+4*o,r.data[t]=255*Math.random(),(n<this.noiseAnimationWindowPos||n>this.noiseAnimationWindowPos+this.interferenceHeight)&&(r.data[t]*=.85),r.data[t+1]=r.data[t],r.data[t+2]=r.data[t],r.data[t+3]=50;this.canvasContext.putImageData(r,0,0),this.lastFrameUpdate=(new Date).getTime(),this.noiseAnimationWindowPos+=7,this.noiseAnimationWindowPos>i&&(this.noiseAnimationWindowPos=-i),this.scheduleNextRender()}},e.prototype.scheduleNextRender=function(){this.useAnimationFrame?this.frameUpdateHandlerId=window.requestAnimationFrame(this.renderFrame.bind(this)):this.frameUpdateHandlerId=setTimeout(this.renderFrame.bind(this),this.frameInterval)},e}(n.Component);e.TvNoiseCanvas=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(7),s=i(25),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.indicatorConfig=[new o.Component({tag:"div",cssClass:"ui-audioonly-overlay-indicator",hidden:!0})],i.config=i.mergeConfig(e,{cssClass:"ui-audioonly-overlay",hidden:!1,components:i.indicatorConfig},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i),this.componentConfig=i.getConfig().audioOnlyOverlayConfig||{};var r=this.getConfig().components[0],n=this.componentConfig.backgroundImageUrl,o=this.getDomElement(),a=new s.Timeout(400,(function(){r.show()}));n&&(o.css("backgroundImage","url("+n+")"),o.css("backgroundSize","contain"),o.css("backgroundColor","#000000"),o.css("animation","none"),o.css("backgroundPosition","center")),this.componentConfig.hiddeIndicator||(e.addEventHandler(e.EVENT.ON_PLAY,(function(){a.start()})),e.addEventHandler(e.EVENT.ON_PAUSED,(function(){a.clear(),r.hide()})))},e}(n.Container);e.AudioOnlyOverlay=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(106),o=i(6),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{tag:"ul",cssClass:"ui-itemselectionlist"},i.config),i}return r.__extends(e,t),e.prototype.isActive=function(){return this.items.length>1},e.prototype.toDomElement=function(){var t=new o.DOM("ul",{id:this.config.id,class:this.getCssClasses()});return this.listElement=t,this.updateDomItems(),t},e.prototype.updateDomItems=function(t){var i=this;void 0===t&&(t=null),this.listElement.empty();for(var r=null,n=function(t){t.addClass(i.prefixCss(e.CLASS_SELECTED))},s=function(s){var u=new o.DOM("li",{type:"li",class:a.prefixCss("ui-selectionlistitem")}).append(new o.DOM("a",{}).html(s.label));r||(null==t?r=u:String(t)===s.key&&(r=u)),u.on("click",(function(){r&&function(t){t.removeClass(i.prefixCss(e.CLASS_SELECTED))}(r),r=u,n(u),i.onItemSelectedEvent(s.key,!1)})),r&&n(r),a.listElement.append(u)},a=this,u=0,h=this.items;u<h.length;u++){s(h[u])}},e.prototype.onItemAddedEvent=function(e){t.prototype.onItemAddedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemRemovedEvent=function(e){t.prototype.onItemRemovedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemSelectedEvent=function(e,i){void 0===i&&(i=!0),t.prototype.onItemSelectedEvent.call(this,e),i&&this.updateDomItems(e)},e.CLASS_SELECTED="selected",e}(n.ListSelector);e.ItemSelectionList=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-watermark",url:"http://bitmovin.com"},i.config),i}return r.__extends(e,t),e}(i(62).ClickOverlay);e.Watermark=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(5),o=i(60),s=i(51),a=i(25),u=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.volumeToggleButton=new s.VolumeToggleButton,i.volumeSlider=new o.VolumeSlider({vertical:null==e.vertical||e.vertical,hidden:!0}),i.config=i.mergeConfig(e,{cssClass:"ui-volumecontrolbutton",components:[i.volumeToggleButton,i.volumeSlider],hideDelay:500},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=this.getVolumeToggleButton(),o=this.getVolumeSlider();this.volumeSliderHideTimeout=new a.Timeout(this.getConfig().hideDelay,(function(){o.hide()}));var s=!1;n.getDomElement().on("mouseenter",(function(){o.isHidden()&&o.show(),r.volumeSliderHideTimeout.clear()})),n.getDomElement().on("mouseleave",(function(){r.volumeSliderHideTimeout.reset()})),o.getDomElement().on("mouseenter",(function(){r.volumeSliderHideTimeout.clear(),s=!0})),o.getDomElement().on("mouseleave",(function(){o.isSeeking()?r.volumeSliderHideTimeout.clear():r.volumeSliderHideTimeout.reset(),s=!1})),o.onSeeked.subscribe((function(){s||r.volumeSliderHideTimeout.reset()}))},e.prototype.release=function(){t.prototype.release.call(this),this.volumeSliderHideTimeout.clear()},e.prototype.getVolumeToggleButton=function(){return this.volumeToggleButton},e.prototype.getVolumeSlider=function(){return this.volumeSlider},e}(n.Container);e.VolumeControlButton=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(23),o=i(26),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-button-ad-skip",skipMessage:{countdown:"Skip ad in {remainingTime}",skip:"Skip ad"}},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=this.getConfig(),s=n.skipMessage,a=null,u=function(){a.skipOffset?r.show():r.hide(),e.getCurrentTime()<a.skipOffset?r.setText(o.StringUtils.replaceAdMessagePlaceholders(n.skipMessage.countdown,a.skipOffset,e)):r.setText(n.skipMessage.skip)},h=function(){e.removeEventHandler(e.EVENT.ON_TIME_CHANGED,u),e.removeEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,u)};e.addEventHandler(e.EVENT.ON_AD_STARTED,(function(t){s=(a=t).skipMessage||s,u(),e.addEventHandler(e.EVENT.ON_TIME_CHANGED,u),e.addEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,u)})),e.addEventHandler(e.EVENT.ON_AD_SKIPPED,h),e.addEventHandler(e.EVENT.ON_AD_ERROR,h),e.addEventHandler(e.EVENT.ON_AD_FINISHED,h),this.onClick.subscribe((function(){e.skipAd()}))},e}(n.Button);e.AdSkipButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(20),o=i(26),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-label-ad-message",text:"This ad will end in {remainingTime} seconds."},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=this.getConfig().text,s=function(){r.setText(o.StringUtils.replaceAdMessagePlaceholders(n,null,e))},a=function(){e.removeEventHandler(e.EVENT.ON_TIME_CHANGED,s),e.removeEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,s)};e.addEventHandler(e.EVENT.ON_AD_STARTED,(function(t){n=t.adMessage||n,s(),e.addEventHandler(e.EVENT.ON_TIME_CHANGED,s),e.addEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,s)})),e.addEventHandler(e.EVENT.ON_AD_SKIPPED,a),e.addEventHandler(e.EVENT.ON_AD_ERROR,a),e.addEventHandler(e.EVENT.ON_AD_FINISHED,a)},e}(n.Label);e.AdMessageLabel=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=null,o=!e.getConfig().advertising||!e.getConfig().advertising.hasOwnProperty("clickThroughEnabled")||e.getConfig().advertising.clickThroughEnabled;e.addEventHandler(e.EVENT.ON_AD_STARTED,(function(t){n=t.clickThroughUrl,o?r.setUrl(n):r.setUrl(null)}));var s=function(){r.setUrl(null)};e.addEventHandler(e.EVENT.ON_AD_FINISHED,s),e.addEventHandler(e.EVENT.ON_AD_SKIPPED,s),e.addEventHandler(e.EVENT.ON_AD_ERROR,s),this.onClick.subscribe((function(){e.pause("ui-content-click"),e.fireEvent(e.EVENT.ON_AD_CLICKED,{clickThroughUrl:n})}))},e}(i(62).ClickOverlay);e.AdClickOverlay=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(48),o=i(25),s=function(t){function e(e){return t.call(this,e)||this}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var n=this.getConfig(),s=!1;this.castUiHideTimeout=new o.Timeout(n.hideDelay,(function(){i.onControlsHide.dispatch(r),s=!1}));var a=function(){s||(i.onControlsShow.dispatch(r),s=!0)},u=function(){a(),r.castUiHideTimeout.clear()},h=function(){a(),r.castUiHideTimeout.start()};e.addEventHandler(e.EVENT.ON_READY,h),e.addEventHandler(e.EVENT.ON_SOURCE_LOADED,h),e.addEventHandler(e.EVENT.ON_PLAY,h),e.addEventHandler(e.EVENT.ON_PAUSED,u),e.addEventHandler(e.EVENT.ON_SEEK,u),e.addEventHandler(e.EVENT.ON_SEEKED,(function(){e.isPlaying()?h():u()}))},e.prototype.release=function(){t.prototype.release.call(this),this.castUiHideTimeout.clear()},e}(n.UIContainer);e.CastUIContainer=s}]);