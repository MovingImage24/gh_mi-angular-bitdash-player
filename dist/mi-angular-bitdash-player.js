/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 66);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(1);
var arrayutils_1 = __webpack_require__(11);
/**
 * A container component that can contain a collection of child components.
 * Components can be added at construction time through the {@link ContainerConfig#components} setting, or later
 * through the {@link Container#addComponent} method. The UIManager automatically takes care of all components, i.e. it
 * initializes and configures them automatically.
 *
 * In the DOM, the container consists of an outer <div> (that can be configured by the config) and an inner wrapper
 * <div> that contains the components. This double-<div>-structure is often required to achieve many advanced effects
 * in CSS and/or JS, e.g. animations and certain formatting with absolute positioning.
 *
 * DOM example:
 * <code>
 *     <div class='ui-container'>
 *         <div class='container-wrapper'>
 *             ... child components ...
 *         </div>
 *     </div>
 * </code>
 */
var Container = (function (_super) {
    __extends(Container, _super);
    function Container(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-container',
            components: [],
        }, _this.config);
        _this.componentsToAdd = [];
        _this.componentsToRemove = [];
        return _this;
    }
    /**
     * Adds a child component to the container.
     * @param component the component to add
     */
    Container.prototype.addComponent = function (component) {
        this.config.components.push(component);
        this.componentsToAdd.push(component);
    };
    /**
     * Removes a child component from the container.
     * @param component the component to remove
     * @returns {boolean} true if the component has been removed, false if it is not contained in this container
     */
    Container.prototype.removeComponent = function (component) {
        if (arrayutils_1.ArrayUtils.remove(this.config.components, component) != null) {
            this.componentsToRemove.push(component);
            return true;
        }
        else {
            return false;
        }
    };
    /**
     * Gets an array of all child components in this container.
     * @returns {Component<ComponentConfig>[]}
     */
    Container.prototype.getComponents = function () {
        return this.config.components;
    };
    /**
     * Removes all child components from the container.
     */
    Container.prototype.removeComponents = function () {
        for (var _i = 0, _a = this.getComponents().slice(); _i < _a.length; _i++) {
            var component = _a[_i];
            this.removeComponent(component);
        }
    };
    /**
     * Updates the DOM of the container with the current components.
     */
    Container.prototype.updateComponents = function () {
        /* We cannot just clear the container to remove all elements and then re-add those that should stay, because
         * IE looses the innerHTML of unattached elements, leading to empty elements within the container (e.g. missing
         * subtitle text in SubtitleLabel).
         * Instead, we keep a list of elements to add and remove, leaving remaining elements alone. By keeping them in
         * the DOM, their content gets preserved in all browsers.
         */
        var component;
        while (component = this.componentsToRemove.shift()) {
            component.getDomElement().remove();
        }
        while (component = this.componentsToAdd.shift()) {
            this.innerContainerElement.append(component.getDomElement());
        }
    };
    Container.prototype.toDomElement = function () {
        // Create the container element (the outer <div>)
        var containerElement = new dom_1.DOM(this.config.tag, {
            'id': this.config.id,
            'class': this.getCssClasses(),
        });
        // Create the inner container element (the inner <div>) that will contain the components
        var innerContainer = new dom_1.DOM(this.config.tag, {
            'class': this.prefixCss('container-wrapper'),
        });
        this.innerContainerElement = innerContainer;
        for (var _i = 0, _a = this.config.components; _i < _a.length; _i++) {
            var initialComponent = _a[_i];
            this.componentsToAdd.push(initialComponent);
        }
        this.updateComponents();
        containerElement.append(innerContainer);
        return containerElement;
    };
    return Container;
}(component_1.Component));
exports.Container = Container;


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Simple DOM manipulation and DOM element event handling modeled after jQuery (as replacement for jQuery).
 *
 * Like jQuery, DOM operates on single elements and lists of elements. For example: creating an element returns a DOM
 * instance with a single element, selecting elements returns a DOM instance with zero, one, or many elements. Similar
 * to jQuery, setters usually affect all elements, while getters operate on only the first element.
 * Also similar to jQuery, most methods (except getters) return the DOM instance facilitating easy chaining of method
 * calls.
 *
 * Built with the help of: http://youmightnotneedjquery.com/
 */
var DOM = (function () {
    function DOM(something, attributes) {
        this.document = document; // Set the global document to the local document field
        if (something instanceof Array) {
            if (something.length > 0 && something[0] instanceof HTMLElement) {
                var elements = something;
                this.elements = elements;
            }
        }
        else if (something instanceof HTMLElement) {
            var element = something;
            this.elements = [element];
        }
        else if (something instanceof Document) {
            // When a document is passed in, we do not do anything with it, but by setting this.elements to null
            // we give the event handling method a means to detect if the events should be registered on the document
            // instead of elements.
            this.elements = null;
        }
        else if (attributes) {
            var tagName = something;
            var element = document.createElement(tagName);
            for (var attributeName in attributes) {
                var attributeValue = attributes[attributeName];
                element.setAttribute(attributeName, attributeValue);
            }
            this.elements = [element];
        }
        else {
            var selector = something;
            this.elements = this.findChildElements(selector);
        }
    }
    Object.defineProperty(DOM.prototype, "length", {
        /**
         * Gets the number of elements that this DOM instance currently holds.
         * @returns {number} the number of elements
         */
        get: function () {
            return this.elements ? this.elements.length : 0;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Gets the HTML elements that this DOM instance currently holds.
     * @returns {HTMLElement[]} the raw HTML elements
     * @deprecated use {@link #get()} instead
     */
    DOM.prototype.getElements = function () {
        return this.get();
    };
    DOM.prototype.get = function (index) {
        if (index === undefined) {
            return this.elements;
        }
        else if (!this.elements || index >= this.elements.length || index < -this.elements.length) {
            return undefined;
        }
        else if (index < 0) {
            return this.elements[this.elements.length - index];
        }
        else {
            return this.elements[index];
        }
    };
    /**
     * A shortcut method for iterating all elements. Shorts this.elements.forEach(...) to this.forEach(...).
     * @param handler the handler to execute an operation on an element
     */
    DOM.prototype.forEach = function (handler) {
        if (!this.elements) {
            return;
        }
        this.elements.forEach(function (element) {
            handler(element);
        });
    };
    DOM.prototype.findChildElementsOfElement = function (element, selector) {
        var childElements = element.querySelectorAll(selector);
        // Convert NodeList to Array
        // https://toddmotto.com/a-comprehensive-dive-into-nodelists-arrays-converting-nodelists-and-understanding-the-dom/
        return [].slice.call(childElements);
    };
    DOM.prototype.findChildElements = function (selector) {
        var _this = this;
        var allChildElements = [];
        if (this.elements) {
            this.forEach(function (element) {
                allChildElements = allChildElements.concat(_this.findChildElementsOfElement(element, selector));
            });
        }
        else {
            return this.findChildElementsOfElement(document, selector);
        }
        return allChildElements;
    };
    /**
     * Finds all child elements of all elements matching the supplied selector.
     * @param selector the selector to match with child elements
     * @returns {DOM} a new DOM instance representing all matched children
     */
    DOM.prototype.find = function (selector) {
        var allChildElements = this.findChildElements(selector);
        return new DOM(allChildElements);
    };
    DOM.prototype.html = function (content) {
        if (arguments.length > 0) {
            return this.setHtml(content);
        }
        else {
            return this.getHtml();
        }
    };
    DOM.prototype.getHtml = function () {
        return this.elements[0].innerHTML;
    };
    DOM.prototype.setHtml = function (content) {
        if (content === undefined || content == null) {
            // Set to empty string to avoid innerHTML getting set to 'undefined' (all browsers) or 'null' (IE9)
            content = '';
        }
        this.forEach(function (element) {
            element.innerHTML = content;
        });
        return this;
    };
    /**
     * Clears the inner HTML of all elements (deletes all children).
     * @returns {DOM}
     */
    DOM.prototype.empty = function () {
        this.forEach(function (element) {
            element.innerHTML = '';
        });
        return this;
    };
    /**
     * Returns the current value of the first form element, e.g. the selected value of a select box or the text if an
     * input field.
     * @returns {string} the value of a form element
     */
    DOM.prototype.val = function () {
        var element = this.elements[0];
        if (element instanceof HTMLSelectElement || element instanceof HTMLInputElement) {
            return element.value;
        }
        else {
            // TODO add support for missing form elements
            throw new Error("val() not supported for " + typeof element);
        }
    };
    DOM.prototype.attr = function (attribute, value) {
        if (arguments.length > 1) {
            return this.setAttr(attribute, value);
        }
        else {
            return this.getAttr(attribute);
        }
    };
    DOM.prototype.getAttr = function (attribute) {
        return this.elements[0].getAttribute(attribute);
    };
    DOM.prototype.setAttr = function (attribute, value) {
        this.forEach(function (element) {
            element.setAttribute(attribute, value);
        });
        return this;
    };
    DOM.prototype.data = function (dataAttribute, value) {
        if (arguments.length > 1) {
            return this.setData(dataAttribute, value);
        }
        else {
            return this.getData(dataAttribute);
        }
    };
    DOM.prototype.getData = function (dataAttribute) {
        return this.elements[0].getAttribute('data-' + dataAttribute);
    };
    DOM.prototype.setData = function (dataAttribute, value) {
        this.forEach(function (element) {
            element.setAttribute('data-' + dataAttribute, value);
        });
        return this;
    };
    /**
     * Appends one or more DOM elements as children to all elements.
     * @param childElements the chrild elements to append
     * @returns {DOM}
     */
    DOM.prototype.append = function () {
        var childElements = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            childElements[_i] = arguments[_i];
        }
        this.forEach(function (element) {
            childElements.forEach(function (childElement) {
                childElement.elements.forEach(function (_, index) {
                    element.appendChild(childElement.elements[index]);
                });
            });
        });
        return this;
    };
    /**
     * Removes all elements from the DOM.
     */
    DOM.prototype.remove = function () {
        this.forEach(function (element) {
            var parent = element.parentNode;
            if (parent) {
                parent.removeChild(element);
            }
        });
    };
    /**
     * Returns the offset of the first element from the document's top left corner.
     * @returns {Offset}
     */
    DOM.prototype.offset = function () {
        var element = this.elements[0];
        var elementRect = element.getBoundingClientRect();
        var htmlRect = document.body.parentElement.getBoundingClientRect();
        // Virtual viewport scroll handling (e.g. pinch zoomed viewports in mobile browsers or desktop Chrome/Edge)
        // 'normal' zooms and virtual viewport zooms (aka layout viewport) result in different
        // element.getBoundingClientRect() results:
        //  - with normal scrolls, the clientRect decreases with an increase in scroll(Top|Left)/page(X|Y)Offset
        //  - with pinch zoom scrolls, the clientRect stays the same while scroll/pageOffset changes
        // This means, that the combination of clientRect + scroll/pageOffset does not work to calculate the offset
        // from the document's upper left origin when pinch zoom is used.
        // To work around this issue, we do not use scroll/pageOffset but get the clientRect of the html element and
        // subtract it from the element's rect, which always results in the offset from the document origin.
        // NOTE: the current way of offset calculation was implemented specifically to track event positions on the
        // seek bar, and it might break compatibility with jQuery's offset() method. If this ever turns out to be a
        // problem, this method should be reverted to the old version and the offset calculation moved to the seek bar.
        return {
            top: elementRect.top - htmlRect.top,
            left: elementRect.left - htmlRect.left,
        };
    };
    /**
     * Returns the width of the first element.
     * @returns {number} the width of the first element
     */
    DOM.prototype.width = function () {
        // TODO check if this is the same as jQuery's width() (probably not)
        return this.elements[0].offsetWidth;
    };
    /**
     * Returns the height of the first element.
     * @returns {number} the height of the first element
     */
    DOM.prototype.height = function () {
        // TODO check if this is the same as jQuery's height() (probably not)
        return this.elements[0].offsetHeight;
    };
    /**
     * Attaches an event handler to one or more events on all elements.
     * @param eventName the event name (or multiple names separated by space) to listen to
     * @param eventHandler the event handler to call when the event fires
     * @returns {DOM}
     */
    DOM.prototype.on = function (eventName, eventHandler) {
        var _this = this;
        var events = eventName.split(' ');
        events.forEach(function (event) {
            if (_this.elements == null) {
                _this.document.addEventListener(event, eventHandler);
            }
            else {
                _this.forEach(function (element) {
                    element.addEventListener(event, eventHandler);
                });
            }
        });
        return this;
    };
    /**
     * Removes an event handler from one or more events on all elements.
     * @param eventName the event name (or multiple names separated by space) to remove the handler from
     * @param eventHandler the event handler to remove
     * @returns {DOM}
     */
    DOM.prototype.off = function (eventName, eventHandler) {
        var _this = this;
        var events = eventName.split(' ');
        events.forEach(function (event) {
            if (_this.elements == null) {
                _this.document.removeEventListener(event, eventHandler);
            }
            else {
                _this.forEach(function (element) {
                    element.removeEventListener(event, eventHandler);
                });
            }
        });
        return this;
    };
    /**
     * Adds the specified class(es) to all elements.
     * @param className the class(es) to add, multiple classes separated by space
     * @returns {DOM}
     */
    DOM.prototype.addClass = function (className) {
        this.forEach(function (element) {
            if (element.classList) {
                var classNames = className.split(' ')
                    .filter(function (className) { return className.length > 0; });
                if (classNames.length > 0) {
                    (_a = element.classList).add.apply(_a, classNames);
                }
            }
            else {
                element.className += ' ' + className;
            }
            var _a;
        });
        return this;
    };
    /**
     * Removed the specified class(es) from all elements.
     * @param className the class(es) to remove, multiple classes separated by space
     * @returns {DOM}
     */
    DOM.prototype.removeClass = function (className) {
        this.forEach(function (element) {
            if (element.classList) {
                var classNames = className.split(' ')
                    .filter(function (className) { return className.length > 0; });
                if (classNames.length > 0) {
                    (_a = element.classList).remove.apply(_a, classNames);
                }
            }
            else {
                element.className = element.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
            }
            var _a;
        });
        return this;
    };
    /**
     * Checks if any of the elements has the specified class.
     * @param className the class name to check
     * @returns {boolean} true if one of the elements has the class attached, else if no element has it attached
     */
    DOM.prototype.hasClass = function (className) {
        var hasClass = false;
        this.forEach(function (element) {
            if (element.classList) {
                if (element.classList.contains(className)) {
                    // Since we are inside a handler, we can't just 'return true'. Instead, we save it to a variable
                    // and return it at the end of the function body.
                    hasClass = true;
                }
            }
            else {
                if (new RegExp('(^| )' + className + '( |$)', 'gi').test(element.className)) {
                    // See comment above
                    hasClass = true;
                }
            }
        });
        return hasClass;
    };
    DOM.prototype.css = function (propertyNameOrCollection, value) {
        if (typeof propertyNameOrCollection === 'string') {
            var propertyName = propertyNameOrCollection;
            if (arguments.length === 2) {
                return this.setCss(propertyName, value);
            }
            else {
                return this.getCss(propertyName);
            }
        }
        else {
            var propertyValueCollection = propertyNameOrCollection;
            return this.setCssCollection(propertyValueCollection);
        }
    };
    DOM.prototype.getCss = function (propertyName) {
        return getComputedStyle(this.elements[0])[propertyName];
    };
    DOM.prototype.setCss = function (propertyName, value) {
        this.forEach(function (element) {
            // <any> cast to resolve TS7015: http://stackoverflow.com/a/36627114/370252
            element.style[propertyName] = value;
        });
        return this;
    };
    DOM.prototype.setCssCollection = function (ruleValueCollection) {
        this.forEach(function (element) {
            // http://stackoverflow.com/a/34490573/370252
            Object.assign(element.style, ruleValueCollection);
        });
        return this;
    };
    return DOM;
}());
exports.DOM = DOM;


/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var guid_1 = __webpack_require__(72);
var dom_1 = __webpack_require__(1);
var eventdispatcher_1 = __webpack_require__(3);
/**
 * The base class of the UI framework.
 * Each component must extend this class and optionally the config interface.
 */
var Component = (function () {
    /**
     * Constructs a component with an optionally supplied config. All subclasses must call the constructor of their
     * superclass and then merge their configuration into the component's configuration.
     * @param config the configuration for the component
     */
    function Component(config) {
        if (config === void 0) { config = {}; }
        /**
         * The list of events that this component offers. These events should always be private and only directly
         * accessed from within the implementing component.
         *
         * Because TypeScript does not support private properties with the same name on different class hierarchy levels
         * (i.e. superclass and subclass cannot contain a private property with the same name), the default naming
         * convention for the event list of a component that should be followed by subclasses is the concatenation of the
         * camel-cased class name + 'Events' (e.g. SubClass extends Component => subClassEvents).
         * See {@link #componentEvents} for an example.
         *
         * Event properties should be named in camel case with an 'on' prefix and in the present tense. Async events may
         * have a start event (when the operation starts) in the present tense, and must have an end event (when the
         * operation ends) in the past tense (or present tense in special cases (e.g. onStart/onStarted or onPlay/onPlaying).
         * See {@link #componentEvents#onShow} for an example.
         *
         * Each event should be accompanied with a protected method named by the convention eventName + 'Event'
         * (e.g. onStartEvent), that actually triggers the event by calling {@link EventDispatcher#dispatch dispatch} and
         * passing a reference to the component as first parameter. Components should always trigger their events with these
         * methods. Implementing this pattern gives subclasses means to directly listen to the events by overriding the
         * method (and saving the overhead of passing a handler to the event dispatcher) and more importantly to trigger
         * these events without having access to the private event list.
         * See {@link #onShow} for an example.
         *
         * To provide external code the possibility to listen to this component's events (subscribe, unsubscribe, etc.),
         * each event should also be accompanied by a public getter function with the same name as the event's property,
         * that returns the {@link Event} obtained from the event dispatcher by calling {@link EventDispatcher#getEvent}.
         * See {@link #onShow} for an example.
         *
         * Full example for an event representing an example action in a example component:
         *
         * <code>
         * // Define an example component class with an example event
         * class ExampleComponent extends Component<ComponentConfig> {
           *
           *     private exampleComponentEvents = {
           *         onExampleAction: new EventDispatcher<ExampleComponent, NoArgs>()
           *     }
           *
           *     // constructor and other stuff...
           *
           *     protected onExampleActionEvent() {
           *        this.exampleComponentEvents.onExampleAction.dispatch(this);
           *    }
           *
           *    get onExampleAction(): Event<ExampleComponent, NoArgs> {
           *        return this.exampleComponentEvents.onExampleAction.getEvent();
           *    }
           * }
         *
         * // Create an instance of the component somewhere
         * var exampleComponentInstance = new ExampleComponent();
         *
         * // Subscribe to the example event on the component
         * exampleComponentInstance.onExampleAction.subscribe(function (sender: ExampleComponent) {
           *     console.log('onExampleAction of ' + sender + ' has fired!');
           * });
         * </code>
         */
        this.componentEvents = {
            onShow: new eventdispatcher_1.EventDispatcher(),
            onHide: new eventdispatcher_1.EventDispatcher(),
            onHoverChanged: new eventdispatcher_1.EventDispatcher(),
        };
        // Create the configuration for this component
        this.config = this.mergeConfig(config, {
            tag: 'div',
            id: 'mi-wbc-id-' + guid_1.Guid.next(),
            cssPrefix: 'mi-wbc',
            cssClass: 'ui-component',
            cssClasses: [],
            hidden: false,
        }, {});
    }
    /**
     * Initializes the component, e.g. by applying config settings.
     * This method must not be called from outside the UI framework.
     *
     * This method is automatically called by the {@link UIInstanceManager}. If the component is an inner component of
     * some component, and thus encapsulated abd managed internally and never directly exposed to the UIManager,
     * this method must be called from the managing component's {@link #initialize} method.
     */
    Component.prototype.initialize = function () {
        this.hidden = this.config.hidden;
        // Hide the component at initialization if it is configured to be hidden
        if (this.isHidden()) {
            this.hidden = false; // Set flag to false for the following hide() call to work (hide() checks the flag)
            this.hide();
        }
    };
    /**
     * Configures the component for the supplied Player and UIInstanceManager. This is the place where all the magic
     * happens, where components typically subscribe and react to events (on their DOM element, the Player, or the
     * UIInstanceManager), and basically everything that makes them interactive.
     * This method is called only once, when the UIManager initializes the UI.
     *
     * Subclasses usually overwrite this method to add their own functionality.
     *
     * @param player the player which this component controls
     * @param uimanager the UIInstanceManager that manages this component
     */
    Component.prototype.configure = function (player, uimanager) {
        var _this = this;
        this.onShow.subscribe(function () {
            uimanager.onComponentShow.dispatch(_this);
        });
        this.onHide.subscribe(function () {
            uimanager.onComponentHide.dispatch(_this);
        });
        // Track the hovered state of the element
        this.getDomElement().on('mouseenter', function () {
            _this.onHoverChangedEvent(true);
        });
        this.getDomElement().on('mouseleave', function () {
            _this.onHoverChangedEvent(false);
        });
    };
    /**
     * Releases all resources and dependencies that the component holds. Player, DOM, and UIManager events are
     * automatically removed during release and do not explicitly need to be removed here.
     * This method is called by the UIManager when it releases the UI.
     *
     * Subclasses that need to release resources should override this method and call super.release().
     */
    Component.prototype.release = function () {
        // Nothing to do here, override where necessary
    };
    /**
     * Generate the DOM element for this component.
     *
     * Subclasses usually overwrite this method to extend or replace the DOM element with their own design.
     */
    Component.prototype.toDomElement = function () {
        var element = new dom_1.DOM(this.config.tag, {
            'id': this.config.id,
            'class': this.getCssClasses(),
        });
        return element;
    };
    /**
     * Returns the DOM element of this component. Creates the DOM element if it does not yet exist.
     *
     * Should not be overwritten by subclasses.
     *
     * @returns {DOM}
     */
    Component.prototype.getDomElement = function () {
        if (!this.element) {
            this.element = this.toDomElement();
        }
        return this.element;
    };
    /**
     * Merges a configuration with a default configuration and a base configuration from the superclass.
     *
     * @param config the configuration settings for the components, as usually passed to the constructor
     * @param defaults a default configuration for settings that are not passed with the configuration
     * @param base configuration inherited from a superclass
     * @returns {Config}
     */
    Component.prototype.mergeConfig = function (config, defaults, base) {
        // Extend default config with supplied config
        var merged = Object.assign({}, base, defaults, config);
        // Return the extended config
        return merged;
    };
    /**
     * Helper method that returns a string of all CSS classes of the component.
     *
     * @returns {string}
     */
    Component.prototype.getCssClasses = function () {
        var _this = this;
        // Merge all CSS classes into single array
        var flattenedArray = [this.config.cssClass].concat(this.config.cssClasses);
        // Prefix classes
        flattenedArray = flattenedArray.map(function (css) {
            return _this.prefixCss(css);
        });
        // Join array values into a string
        var flattenedString = flattenedArray.join(' ');
        // Return trimmed string to prevent whitespace at the end from the join operation
        return flattenedString.trim();
    };
    Component.prototype.prefixCss = function (cssClassOrId) {
        return this.config.cssPrefix + '-' + cssClassOrId;
    };
    /**
     * Returns the configuration object of the component.
     * @returns {Config}
     */
    Component.prototype.getConfig = function () {
        return this.config;
    };
    /**
     * Hides the component if shown.
     * This method basically transfers the component into the hidden state. Actual hiding is done via CSS.
     */
    Component.prototype.hide = function () {
        if (!this.hidden) {
            this.hidden = true;
            this.getDomElement().addClass(this.prefixCss(Component.CLASS_HIDDEN));
            this.onHideEvent();
        }
    };
    /**
     * Shows the component if hidden.
     */
    Component.prototype.show = function () {
        if (this.hidden) {
            this.getDomElement().removeClass(this.prefixCss(Component.CLASS_HIDDEN));
            this.hidden = false;
            this.onShowEvent();
        }
    };
    /**
     * Determines if the component is hidden.
     * @returns {boolean} true if the component is hidden, else false
     */
    Component.prototype.isHidden = function () {
        return this.hidden;
    };
    /**
     * Determines if the component is shown.
     * @returns {boolean} true if the component is visible, else false
     */
    Component.prototype.isShown = function () {
        return !this.isHidden();
    };
    /**
     * Toggles the hidden state by hiding the component if it is shown, or showing it if hidden.
     */
    Component.prototype.toggleHidden = function () {
        if (this.isHidden()) {
            this.show();
        }
        else {
            this.hide();
        }
    };
    /**
     * Determines if the component is currently hovered.
     * @returns {boolean} true if the component is hovered, else false
     */
    Component.prototype.isHovered = function () {
        return this.hovered;
    };
    /**
     * Fires the onShow event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onShowEvent = function () {
        this.componentEvents.onShow.dispatch(this);
    };
    /**
     * Fires the onHide event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onHideEvent = function () {
        this.componentEvents.onHide.dispatch(this);
    };
    /**
     * Fires the onHoverChanged event.
     * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
     */
    Component.prototype.onHoverChangedEvent = function (hovered) {
        this.hovered = hovered;
        this.componentEvents.onHoverChanged.dispatch(this, { hovered: hovered });
    };
    Object.defineProperty(Component.prototype, "onShow", {
        /**
         * Gets the event that is fired when the component is showing.
         * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
         * @returns {Event<Component<Config>, NoArgs>}
         */
        get: function () {
            return this.componentEvents.onShow.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Component.prototype, "onHide", {
        /**
         * Gets the event that is fired when the component is hiding.
         * See the detailed explanation on event architecture on the {@link #componentEvents events list}.
         * @returns {Event<Component<Config>, NoArgs>}
         */
        get: function () {
            return this.componentEvents.onHide.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Component.prototype, "onHoverChanged", {
        /**
         * Gets the event that is fired when the component's hover-state is changing.
         * @returns {Event<Component<Config>, ComponentHoverChangedEventArgs>}
         */
        get: function () {
            return this.componentEvents.onHoverChanged.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return Component;
}());
/**
 * The classname that is attached to the element when it is in the hidden state.
 * @type {string}
 */
Component.CLASS_HIDDEN = 'hidden';
exports.Component = Component;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var arrayutils_1 = __webpack_require__(11);
/**
 * Event dispatcher to subscribe and trigger events. Each event should have its own dispatcher.
 */
var EventDispatcher = (function () {
    function EventDispatcher() {
        this.listeners = [];
    }
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.subscribe = function (listener) {
        this.listeners.push(new EventListenerWrapper(listener));
    };
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.subscribeOnce = function (listener) {
        this.listeners.push(new EventListenerWrapper(listener, true));
    };
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.subscribeRateLimited = function (listener, rateMs) {
        this.listeners.push(new RateLimitedEventListenerWrapper(listener, rateMs));
    };
    /**
     * {@inheritDoc}
     */
    EventDispatcher.prototype.unsubscribe = function (listener) {
        // Iterate through listeners, compare with parameter, and remove if found
        // NOTE: In case we ever remove all matching listeners instead of just the first, we need to reverse-iterate here
        for (var i = 0; i < this.listeners.length; i++) {
            var subscribedListener = this.listeners[i];
            if (subscribedListener.listener === listener) {
                arrayutils_1.ArrayUtils.remove(this.listeners, subscribedListener);
                return true;
            }
        }
        return false;
    };
    /**
     * Removes all listeners from this dispatcher.
     */
    EventDispatcher.prototype.unsubscribeAll = function () {
        this.listeners = [];
    };
    /**
     * Dispatches an event to all subscribed listeners.
     * @param sender the source of the event
     * @param args the arguments for the event
     */
    EventDispatcher.prototype.dispatch = function (sender, args) {
        if (args === void 0) { args = null; }
        var listenersToRemove = [];
        // Call every listener
        // We iterate over a copy of the array of listeners to avoid the case where events are not fired on listeners when
        // listeners are unsubscribed from within the event handlers during a dispatch (because the indices change and
        // listeners are shifted within the array).
        // This means that listener x+1 will still be called if unsubscribed from within the handler of listener x, as well
        // as listener y+1 will not be called when subscribed from within the handler of listener y.
        // Array.slice(0) is the fastest array copy method according to: https://stackoverflow.com/a/21514254/370252
        var listeners = this.listeners.slice(0);
        for (var _i = 0, listeners_1 = listeners; _i < listeners_1.length; _i++) {
            var listener = listeners_1[_i];
            listener.fire(sender, args);
            if (listener.isOnce()) {
                listenersToRemove.push(listener);
            }
        }
        // Remove one-time listener
        for (var _a = 0, listenersToRemove_1 = listenersToRemove; _a < listenersToRemove_1.length; _a++) {
            var listenerToRemove = listenersToRemove_1[_a];
            arrayutils_1.ArrayUtils.remove(this.listeners, listenerToRemove);
        }
    };
    /**
     * Returns the event that this dispatcher manages and on which listeners can subscribe and unsubscribe event handlers.
     * @returns {Event}
     */
    EventDispatcher.prototype.getEvent = function () {
        // For now, just cast the event dispatcher to the event interface. At some point in the future when the
        // codebase grows, it might make sense to split the dispatcher into separate dispatcher and event classes.
        return this;
    };
    return EventDispatcher;
}());
exports.EventDispatcher = EventDispatcher;
/**
 * A basic event listener wrapper to manage listeners within the {@link EventDispatcher}. This is a 'private' class
 * for internal dispatcher use and it is therefore not exported.
 */
var EventListenerWrapper = (function () {
    function EventListenerWrapper(listener, once) {
        if (once === void 0) { once = false; }
        this.eventListener = listener;
        this.once = once;
    }
    Object.defineProperty(EventListenerWrapper.prototype, "listener", {
        /**
         * Returns the wrapped event listener.
         * @returns {EventListener<Sender, Args>}
         */
        get: function () {
            return this.eventListener;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Fires the wrapped event listener with the given arguments.
     * @param sender
     * @param args
     */
    EventListenerWrapper.prototype.fire = function (sender, args) {
        this.eventListener(sender, args);
    };
    /**
     * Checks if this listener is scheduled to be called only once.
     * @returns {boolean} once if true
     */
    EventListenerWrapper.prototype.isOnce = function () {
        return this.once;
    };
    return EventListenerWrapper;
}());
/**
 * Extends the basic {@link EventListenerWrapper} with rate-limiting functionality.
 */
var RateLimitedEventListenerWrapper = (function (_super) {
    __extends(RateLimitedEventListenerWrapper, _super);
    function RateLimitedEventListenerWrapper(listener, rateMs) {
        var _this = _super.call(this, listener) || this;
        _this.rateMs = rateMs;
        _this.lastFireTime = 0;
        // Wrap the event listener with an event listener that does the rate-limiting
        _this.rateLimitingEventListener = function (sender, args) {
            if (Date.now() - _this.lastFireTime > _this.rateMs) {
                // Only if enough time since the previous call has passed, call the
                // actual event listener and record the current time
                _this.fireSuper(sender, args);
                _this.lastFireTime = Date.now();
            }
        };
        return _this;
    }
    RateLimitedEventListenerWrapper.prototype.fireSuper = function (sender, args) {
        // Fire the actual external event listener
        _super.prototype.fire.call(this, sender, args);
    };
    RateLimitedEventListenerWrapper.prototype.fire = function (sender, args) {
        // Fire the internal rate-limiting listener instead of the external event listener
        this.rateLimitingEventListener(sender, args);
    };
    return RateLimitedEventListenerWrapper;
}(EventListenerWrapper));


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var selectbox_1 = __webpack_require__(8);
/**
 * Base class for all subtitles settings select box
 **/
var SubtitleSettingSelectBox = (function (_super) {
    __extends(SubtitleSettingSelectBox, _super);
    function SubtitleSettingSelectBox(config) {
        var _this = _super.call(this, config) || this;
        _this.settingsManager = config.settingsManager;
        _this.overlay = config.overlay;
        return _this;
    }
    /**
     * Removes a previously set class and adds the passed in class.
     * @param cssClass The new class to replace the previous class with or null to just remove the previous class
     */
    SubtitleSettingSelectBox.prototype.toggleOverlayClass = function (cssClass) {
        // Remove previous class if existing
        if (this.currentCssClass) {
            this.overlay.getDomElement().removeClass(this.currentCssClass);
            this.currentCssClass = null;
        }
        // Add new class if specified. If the new class is null, we don't add anything.
        if (cssClass) {
            this.currentCssClass = this.prefixCss(cssClass);
            this.overlay.getDomElement().addClass(this.currentCssClass);
        }
    };
    return SubtitleSettingSelectBox;
}(selectbox_1.SelectBox));
exports.SubtitleSettingSelectBox = SubtitleSettingSelectBox;


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(7);
var eventdispatcher_1 = __webpack_require__(3);
/**
 * A button that can be toggled between 'on' and 'off' states.
 */
var ToggleButton = (function (_super) {
    __extends(ToggleButton, _super);
    function ToggleButton(config) {
        var _this = _super.call(this, config) || this;
        _this.toggleButtonEvents = {
            onToggle: new eventdispatcher_1.EventDispatcher(),
            onToggleOn: new eventdispatcher_1.EventDispatcher(),
            onToggleOff: new eventdispatcher_1.EventDispatcher(),
        };
        var defaultConfig = {
            cssClass: 'ui-togglebutton',
            onClass: 'on',
            offClass: 'off',
        };
        _this.config = _this.mergeConfig(config, defaultConfig, _this.config);
        return _this;
    }
    ToggleButton.prototype.configure = function (player, uimanager) {
        var config = this.getConfig();
        this.getDomElement().addClass(this.prefixCss(config.offClass));
    };
    /**
     * Toggles the button to the 'on' state.
     */
    ToggleButton.prototype.on = function () {
        if (this.isOff()) {
            var config = this.getConfig();
            this.onState = true;
            this.getDomElement().removeClass(this.prefixCss(config.offClass));
            this.getDomElement().addClass(this.prefixCss(config.onClass));
            this.onToggleEvent();
            this.onToggleOnEvent();
        }
    };
    /**
     * Toggles the button to the 'off' state.
     */
    ToggleButton.prototype.off = function () {
        if (this.isOn()) {
            var config = this.getConfig();
            this.onState = false;
            this.getDomElement().removeClass(this.prefixCss(config.onClass));
            this.getDomElement().addClass(this.prefixCss(config.offClass));
            this.onToggleEvent();
            this.onToggleOffEvent();
        }
    };
    /**
     * Toggle the button 'on' if it is 'off', or 'off' if it is 'on'.
     */
    ToggleButton.prototype.toggle = function () {
        if (this.isOn()) {
            this.off();
        }
        else {
            this.on();
        }
    };
    /**
     * Checks if the toggle button is in the 'on' state.
     * @returns {boolean} true if button is 'on', false if 'off'
     */
    ToggleButton.prototype.isOn = function () {
        return this.onState;
    };
    /**
     * Checks if the toggle button is in the 'off' state.
     * @returns {boolean} true if button is 'off', false if 'on'
     */
    ToggleButton.prototype.isOff = function () {
        return !this.isOn();
    };
    ToggleButton.prototype.onClickEvent = function () {
        _super.prototype.onClickEvent.call(this);
        // Fire the toggle event together with the click event
        // (they are technically the same, only the semantics are different)
        this.onToggleEvent();
    };
    ToggleButton.prototype.onToggleEvent = function () {
        this.toggleButtonEvents.onToggle.dispatch(this);
    };
    ToggleButton.prototype.onToggleOnEvent = function () {
        this.toggleButtonEvents.onToggleOn.dispatch(this);
    };
    ToggleButton.prototype.onToggleOffEvent = function () {
        this.toggleButtonEvents.onToggleOff.dispatch(this);
    };
    Object.defineProperty(ToggleButton.prototype, "onToggle", {
        /**
         * Gets the event that is fired when the button is toggled.
         * @returns {Event<ToggleButton<Config>, NoArgs>}
         */
        get: function () {
            return this.toggleButtonEvents.onToggle.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToggleButton.prototype, "onToggleOn", {
        /**
         * Gets the event that is fired when the button is toggled 'on'.
         * @returns {Event<ToggleButton<Config>, NoArgs>}
         */
        get: function () {
            return this.toggleButtonEvents.onToggleOn.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToggleButton.prototype, "onToggleOff", {
        /**
         * Gets the event that is fired when the button is toggled 'off'.
         * @returns {Event<ToggleButton<Config>, NoArgs>}
         */
        get: function () {
            return this.toggleButtonEvents.onToggleOff.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return ToggleButton;
}(button_1.Button));
exports.ToggleButton = ToggleButton;


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(1);
var eventdispatcher_1 = __webpack_require__(3);
/**
 * A simple text label.
 *
 * DOM example:
 * <code>
 *     <span class='ui-label'>...some text...</span>
 * </code>
 */
var Label = (function (_super) {
    __extends(Label, _super);
    function Label(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.labelEvents = {
            onClick: new eventdispatcher_1.EventDispatcher(),
            onTextChanged: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-label',
        }, _this.config);
        _this.text = _this.config.text;
        return _this;
    }
    Label.prototype.toDomElement = function () {
        var _this = this;
        var labelElement = new dom_1.DOM('span', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        }).html(this.text);
        labelElement.on('click', function () {
            _this.onClickEvent();
        });
        return labelElement;
    };
    /**
     * Set the text on this label.
     * @param text
     */
    Label.prototype.setText = function (text) {
        this.text = text;
        this.getDomElement().html(text);
        this.onTextChangedEvent(text);
    };
    /**
     * Gets the text on this label.
     * @return {string} The text on the label
     */
    Label.prototype.getText = function () {
        return this.text;
    };
    /**
     * Clears the text on this label.
     */
    Label.prototype.clearText = function () {
        this.getDomElement().html('');
        this.onTextChangedEvent(null);
    };
    /**
     * Tests if the label is empty and does not contain any text.
     * @return {boolean} True if the label is empty, else false
     */
    Label.prototype.isEmpty = function () {
        return !this.text;
    };
    /**
     * Fires the {@link #onClick} event.
     * Can be used by subclasses to listen to this event without subscribing an event listener by overwriting the method
     * and calling the super method.
     */
    Label.prototype.onClickEvent = function () {
        this.labelEvents.onClick.dispatch(this);
    };
    /**
     * Fires the {@link #onClick} event.
     * Can be used by subclasses to listen to this event without subscribing an event listener by overwriting the method
     * and calling the super method.
     */
    Label.prototype.onTextChangedEvent = function (text) {
        this.labelEvents.onTextChanged.dispatch(this, text);
    };
    Object.defineProperty(Label.prototype, "onClick", {
        /**
         * Gets the event that is fired when the label is clicked.
         * @returns {Event<Label<LabelConfig>, NoArgs>}
         */
        get: function () {
            return this.labelEvents.onClick.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Label.prototype, "onTextChanged", {
        /**
         * Gets the event that is fired when the text on the label is changed.
         * @returns {Event<Label<LabelConfig>, string>}
         */
        get: function () {
            return this.labelEvents.onTextChanged.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return Label;
}(component_1.Component));
exports.Label = Label;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(1);
var eventdispatcher_1 = __webpack_require__(3);
/**
 * A simple clickable button.
 */
var Button = (function (_super) {
    __extends(Button, _super);
    function Button(config) {
        var _this = _super.call(this, config) || this;
        _this.buttonEvents = {
            onClick: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-button',
        }, _this.config);
        return _this;
    }
    Button.prototype.toDomElement = function () {
        var _this = this;
        // Create the button element with the text label
        var buttonElement = new dom_1.DOM('button', {
            'type': 'button',
            'id': this.config.id,
            'class': this.getCssClasses(),
        }).append(new dom_1.DOM('span', {
            'class': this.prefixCss('label'),
        }).html(this.config.text));
        // Listen for the click event on the button element and trigger the corresponding event on the button component
        buttonElement.on('click', function () {
            _this.onClickEvent();
        });
        return buttonElement;
    };
    /**
     * Sets text on the label of the button.
     * @param text the text to put into the label of the button
     */
    Button.prototype.setText = function (text) {
        this.getDomElement().find('.' + this.prefixCss('label')).html(text);
    };
    Button.prototype.onClickEvent = function () {
        this.buttonEvents.onClick.dispatch(this);
    };
    Object.defineProperty(Button.prototype, "onClick", {
        /**
         * Gets the event that is fired when the button is clicked.
         * @returns {Event<Button<Config>, NoArgs>}
         */
        get: function () {
            return this.buttonEvents.onClick.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return Button;
}(component_1.Component));
exports.Button = Button;


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var listselector_1 = __webpack_require__(33);
var dom_1 = __webpack_require__(1);
/**
 * A simple select box providing the possibility to select a single item out of a list of available items.
 *
 * DOM example:
 * <code>
 *     <select class='ui-selectbox'>
 *         <option value='key'>label</option>
 *         ...
 *     </select>
 * </code>
 */
var SelectBox = (function (_super) {
    __extends(SelectBox, _super);
    function SelectBox(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-selectbox',
        }, _this.config);
        return _this;
    }
    SelectBox.prototype.toDomElement = function () {
        var _this = this;
        var selectElement = new dom_1.DOM('select', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        });
        this.selectElement = selectElement;
        this.updateDomItems();
        selectElement.on('change', function () {
            var value = selectElement.val();
            _this.onItemSelectedEvent(value, false);
        });
        return selectElement;
    };
    SelectBox.prototype.updateDomItems = function (selectedValue) {
        if (selectedValue === void 0) { selectedValue = null; }
        // Delete all children
        this.selectElement.empty();
        // Add updated children
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            var optionElement = new dom_1.DOM('option', {
                'value': item.key,
            }).html(item.label);
            if (item.key === String(selectedValue)) {
                optionElement.attr('selected', 'selected');
            }
            this.selectElement.append(optionElement);
        }
    };
    SelectBox.prototype.onItemAddedEvent = function (value) {
        _super.prototype.onItemAddedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    SelectBox.prototype.onItemRemovedEvent = function (value) {
        _super.prototype.onItemRemovedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    SelectBox.prototype.onItemSelectedEvent = function (value, updateDomItems) {
        if (updateDomItems === void 0) { updateDomItems = true; }
        _super.prototype.onItemSelectedEvent.call(this, value);
        if (updateDomItems) {
            this.updateDomItems(value);
        }
    };
    return SelectBox;
}(listselector_1.ListSelector));
exports.SelectBox = SelectBox;


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// TODO change to internal (not exported) class, how to use in other files?
/**
 * Executes a callback after a specified amount of time, optionally repeatedly until stopped.
 */
var Timeout = (function () {
    /**
     * Creates a new timeout callback handler.
     * @param delay the delay in milliseconds after which the callback should be executed
     * @param callback the callback to execute after the delay time
     * @param repeat if true, call the callback repeatedly in delay intervals
     */
    function Timeout(delay, callback, repeat) {
        if (repeat === void 0) { repeat = false; }
        this.delay = delay;
        this.callback = callback;
        this.repeat = repeat;
        this.timeoutHandle = 0;
    }
    /**
     * Starts the timeout and calls the callback when the timeout delay has passed.
     * @returns {Timeout} the current timeout (so the start call can be chained to the constructor)
     */
    Timeout.prototype.start = function () {
        this.reset();
        return this;
    };
    /**
     * Clears the timeout. The callback will not be called if clear is called during the timeout.
     */
    Timeout.prototype.clear = function () {
        this.clearInternal();
    };
    /**
     * Resets the passed timeout delay to zero. Can be used to defer the calling of the callback.
     */
    Timeout.prototype.reset = function () {
        var _this = this;
        var lastScheduleTime = 0;
        var delayAdjust = 0;
        this.clearInternal();
        var internalCallback = function () {
            _this.callback();
            if (_this.repeat) {
                var now = Date.now();
                // The time of one iteration from scheduling to executing the callback (usually a bit longer than the delay
                // time)
                var delta = now - lastScheduleTime;
                // Calculate the delay adjustment for the next schedule to keep a steady delay interval over time
                delayAdjust = _this.delay - delta + delayAdjust;
                lastScheduleTime = now;
                // Schedule next execution by the adjusted delay
                _this.timeoutHandle = setTimeout(internalCallback, _this.delay + delayAdjust);
            }
        };
        lastScheduleTime = Date.now();
        this.timeoutHandle = setTimeout(internalCallback, this.delay);
    };
    Timeout.prototype.clearInternal = function () {
        clearTimeout(this.timeoutHandle);
    };
    return Timeout;
}());
exports.Timeout = Timeout;


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var StringUtils;
(function (StringUtils) {
    StringUtils.FORMAT_HHMMSS = 'hh:mm:ss';
    StringUtils.FORMAT_MMSS = 'mm:ss';
    /**
     * Formats a number of seconds into a time string with the pattern hh:mm:ss.
     *
     * @param totalSeconds the total number of seconds to format to string
     * @param format the time format to output (default: hh:mm:ss)
     * @returns {string} the formatted time string
     */
    function secondsToTime(totalSeconds, format) {
        if (format === void 0) { format = StringUtils.FORMAT_HHMMSS; }
        var isNegative = totalSeconds < 0;
        if (isNegative) {
            // If the time is negative, we make it positive for the calculation below
            // (else we'd get all negative numbers) and reattach the negative sign later.
            totalSeconds = -totalSeconds;
        }
        // Split into separate time parts
        var hours = Math.floor(totalSeconds / 3600);
        var minutes = Math.floor(totalSeconds / 60) - hours * 60;
        var seconds = Math.floor(totalSeconds) % 60;
        return (isNegative ? '-' : '') + format
            .replace('hh', leftPadWithZeros(hours, 2))
            .replace('mm', leftPadWithZeros(minutes, 2))
            .replace('ss', leftPadWithZeros(seconds, 2));
    }
    StringUtils.secondsToTime = secondsToTime;
    /**
     * Converts a number to a string and left-pads it with zeros to the specified length.
     * Example: leftPadWithZeros(123, 5) => '00123'
     *
     * @param num the number to convert to string and pad with zeros
     * @param length the desired length of the padded string
     * @returns {string} the padded number as string
     */
    function leftPadWithZeros(num, length) {
        var text = num + '';
        var padding = '0000000000'.substr(0, length - text.length);
        return padding + text;
    }
    /**
     * Fills out placeholders in an ad message.
     *
     * Has the placeholders '{remainingTime[formatString]}', '{playedTime[formatString]}' and
     * '{adDuration[formatString]}', which are replaced by the remaining time until the ad can be skipped, the current
     * time or the ad duration. The format string is optional. If not specified, the placeholder is replaced by the time
     * in seconds. If specified, it must be of the following format:
     * - %d - Inserts the time as an integer.
     * - %0Nd - Inserts the time as an integer with leading zeroes, if the length of the time string is smaller than N.
     * - %f - Inserts the time as a float.
     * - %0Nf - Inserts the time as a float with leading zeroes.
     * - %.Mf - Inserts the time as a float with M decimal places. Can be combined with %0Nf, e.g. %04.2f (the time
     * 10.123
     * would be printed as 0010.12).
     * - %hh:mm:ss
     * - %mm:ss
     *
     * @param adMessage an ad message with optional placeholders to fill
     * @param skipOffset if specified, {remainingTime} will be filled with the remaining time until the ad can be skipped
     * @param player the player to get the time data from
     * @returns {string} the ad message with filled placeholders
     */
    function replaceAdMessagePlaceholders(adMessage, skipOffset, player) {
        var adMessagePlaceholderRegex = new RegExp('\\{(remainingTime|playedTime|adDuration)(}|%((0[1-9]\\d*(\\.\\d+(d|f)|d|f)|\\.\\d+f|d|f)|hh:mm:ss|mm:ss)})', 'g');
        return adMessage.replace(adMessagePlaceholderRegex, function (formatString) {
            var time = 0;
            if (formatString.indexOf('remainingTime') > -1) {
                if (skipOffset) {
                    time = Math.ceil(skipOffset - player.getCurrentTime());
                }
                else {
                    time = player.getDuration() - player.getCurrentTime();
                }
            }
            else if (formatString.indexOf('playedTime') > -1) {
                time = player.getCurrentTime();
            }
            else if (formatString.indexOf('adDuration') > -1) {
                time = player.getDuration();
            }
            return formatNumber(time, formatString);
        });
    }
    StringUtils.replaceAdMessagePlaceholders = replaceAdMessagePlaceholders;
    function formatNumber(time, format) {
        var formatStringValidationRegex = /%((0[1-9]\d*(\.\d+(d|f)|d|f)|\.\d+f|d|f)|hh:mm:ss|mm:ss)/;
        var leadingZeroesRegex = /(%0[1-9]\d*)(?=(\.\d+f|f|d))/;
        var decimalPlacesRegex = /\.\d*(?=f)/;
        if (!formatStringValidationRegex.test(format)) {
            // If the format is invalid, we set a default fallback format
            format = '%d';
        }
        // Determine the number of leading zeros
        var leadingZeroes = 0;
        var leadingZeroesMatches = format.match(leadingZeroesRegex);
        if (leadingZeroesMatches) {
            leadingZeroes = parseInt(leadingZeroesMatches[0].substring(2));
        }
        // Determine the number of decimal places
        var numDecimalPlaces = null;
        var decimalPlacesMatches = format.match(decimalPlacesRegex);
        if (decimalPlacesMatches && !isNaN(parseInt(decimalPlacesMatches[0].substring(1)))) {
            numDecimalPlaces = parseInt(decimalPlacesMatches[0].substring(1));
            if (numDecimalPlaces > 20) {
                numDecimalPlaces = 20;
            }
        }
        // Float format
        if (format.indexOf('f') > -1) {
            var timeString = '';
            if (numDecimalPlaces !== null) {
                // Apply fixed number of decimal places
                timeString = time.toFixed(numDecimalPlaces);
            }
            else {
                timeString = '' + time;
            }
            // Apply leading zeros
            if (timeString.indexOf('.') > -1) {
                return leftPadWithZeros(timeString, timeString.length + (leadingZeroes - timeString.indexOf('.')));
            }
            else {
                return leftPadWithZeros(timeString, leadingZeroes);
            }
        }
        else if (format.indexOf(':') > -1) {
            var totalSeconds = Math.ceil(time);
            // hh:mm:ss format
            if (format.indexOf('hh') > -1) {
                return secondsToTime(totalSeconds);
            }
            else {
                var minutes = Math.floor(totalSeconds / 60);
                var seconds = totalSeconds % 60;
                return leftPadWithZeros(minutes, 2) + ':' + leftPadWithZeros(seconds, 2);
            }
        }
        else {
            return leftPadWithZeros(Math.ceil(time), leadingZeroes);
        }
    }
})(StringUtils = exports.StringUtils || (exports.StringUtils = {}));


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ArrayUtils;
(function (ArrayUtils) {
    /**
     * Removes an item from an array.
     * @param array the array that may contain the item to remove
     * @param item the item to remove from the array
     * @returns {any} the removed item or null if it wasn't part of the array
     */
    function remove(array, item) {
        var index = array.indexOf(item);
        if (index > -1) {
            return array.splice(index, 1)[0];
        }
        else {
            return null;
        }
    }
    ArrayUtils.remove = remove;
})(ArrayUtils = exports.ArrayUtils || (exports.ArrayUtils = {}));


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var eventdispatcher_1 = __webpack_require__(3);
var browserutils_1 = __webpack_require__(15);
var PlayerUtils;
(function (PlayerUtils) {
    var PlayerState;
    (function (PlayerState) {
        PlayerState[PlayerState["IDLE"] = 0] = "IDLE";
        PlayerState[PlayerState["PREPARED"] = 1] = "PREPARED";
        PlayerState[PlayerState["PLAYING"] = 2] = "PLAYING";
        PlayerState[PlayerState["PAUSED"] = 3] = "PAUSED";
        PlayerState[PlayerState["FINISHED"] = 4] = "FINISHED";
    })(PlayerState = PlayerUtils.PlayerState || (PlayerUtils.PlayerState = {}));
    function isTimeShiftAvailable(player) {
        return player.isLive() && player.getMaxTimeShift() !== 0;
    }
    PlayerUtils.isTimeShiftAvailable = isTimeShiftAvailable;
    function getState(player) {
        if (player.hasEnded()) {
            return PlayerState.FINISHED;
        }
        else if (player.isPlaying()) {
            return PlayerState.PLAYING;
        }
        else if (player.isPaused()) {
            return PlayerState.PAUSED;
        }
        else if (player.isReady()) {
            return PlayerState.PREPARED;
        }
        else {
            return PlayerState.IDLE;
        }
    }
    PlayerUtils.getState = getState;
    var TimeShiftAvailabilityDetector = (function () {
        function TimeShiftAvailabilityDetector(player) {
            var _this = this;
            this.timeShiftAvailabilityChangedEvent = new eventdispatcher_1.EventDispatcher();
            this.player = player;
            this.timeShiftAvailable = undefined;
            var timeShiftDetector = function () {
                _this.detect();
            };
            // Try to detect timeshift availability in ON_READY, which works for DASH streams
            player.addEventHandler(player.EVENT.ON_READY, timeShiftDetector);
            // With HLS/NativePlayer streams, getMaxTimeShift can be 0 before the buffer fills, so we need to additionally
            // check timeshift availability in ON_TIME_CHANGED
            player.addEventHandler(player.EVENT.ON_TIME_CHANGED, timeShiftDetector);
        }
        TimeShiftAvailabilityDetector.prototype.detect = function () {
            if (this.player.isLive()) {
                var timeShiftAvailableNow = PlayerUtils.isTimeShiftAvailable(this.player);
                // When the availability changes, we fire the event
                if (timeShiftAvailableNow !== this.timeShiftAvailable) {
                    this.timeShiftAvailabilityChangedEvent.dispatch(this.player, { timeShiftAvailable: timeShiftAvailableNow });
                    this.timeShiftAvailable = timeShiftAvailableNow;
                }
            }
        };
        Object.defineProperty(TimeShiftAvailabilityDetector.prototype, "onTimeShiftAvailabilityChanged", {
            get: function () {
                return this.timeShiftAvailabilityChangedEvent.getEvent();
            },
            enumerable: true,
            configurable: true
        });
        return TimeShiftAvailabilityDetector;
    }());
    PlayerUtils.TimeShiftAvailabilityDetector = TimeShiftAvailabilityDetector;
    /**
     * Detects changes of the stream type, i.e. changes of the return value of the player#isLive method.
     * Normally, a stream cannot change its type during playback, it's either VOD or live. Due to bugs on some
     * platforms or browsers, it can still change. It is therefore unreliable to just check #isLive and this detector
     * should be used as a workaround instead.
     *
     * Known cases:
     *
     * - HLS VOD on Android 4.3
     * Video duration is initially 'Infinity' and only gets available after playback starts, so streams are wrongly
     * reported as 'live' before playback (the live-check in the player checks for infinite duration).
     */
    var LiveStreamDetector = (function () {
        function LiveStreamDetector(player) {
            var _this = this;
            this.liveChangedEvent = new eventdispatcher_1.EventDispatcher();
            this.player = player;
            this.live = undefined;
            var liveDetector = function () {
                _this.detect();
            };
            // Initialize when player is ready
            player.addEventHandler(player.EVENT.ON_READY, liveDetector);
            // Re-evaluate when playback starts
            player.addEventHandler(player.EVENT.ON_PLAY, liveDetector);
            // HLS live detection workaround for Android:
            // Also re-evaluate during playback, because that is when the live flag might change.
            // (Doing it only in Android Chrome saves unnecessary overhead on other plattforms)
            if (browserutils_1.BrowserUtils.isAndroid && browserutils_1.BrowserUtils.isChrome) {
                player.addEventHandler(player.EVENT.ON_TIME_CHANGED, liveDetector);
            }
        }
        LiveStreamDetector.prototype.detect = function () {
            var liveNow = this.player.isLive();
            // Compare current to previous live state flag and fire event when it changes. Since we initialize the flag
            // with undefined, there is always at least an initial event fired that tells listeners the live state.
            if (liveNow !== this.live) {
                this.liveChangedEvent.dispatch(this.player, { live: liveNow });
                this.live = liveNow;
            }
        };
        Object.defineProperty(LiveStreamDetector.prototype, "onLiveChanged", {
            get: function () {
                return this.liveChangedEvent.getEvent();
            },
            enumerable: true,
            configurable: true
        });
        return LiveStreamDetector;
    }());
    PlayerUtils.LiveStreamDetector = LiveStreamDetector;
})(PlayerUtils = exports.PlayerUtils || (exports.PlayerUtils = {}));


/***/ }),
/* 13 */
/***/ (function(module, exports) {

module.exports = angular;

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var dom_1 = __webpack_require__(1);
var timeout_1 = __webpack_require__(9);
var playerutils_1 = __webpack_require__(12);
/**
 * The base container that contains all of the UI. The UIContainer is passed to the {@link UIManager} to build and
 * setup the UI.
 */
var UIContainer = (function (_super) {
    __extends(UIContainer, _super);
    function UIContainer(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-uicontainer',
            hideDelay: 5000,
        }, _this.config);
        return _this;
    }
    UIContainer.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        this.configureUIShowHide(player, uimanager);
        this.configurePlayerStates(player, uimanager);
    };
    UIContainer.prototype.configureUIShowHide = function (player, uimanager) {
        var _this = this;
        var container = this.getDomElement();
        var config = this.getConfig();
        if (config.hideDelay === -1) {
            uimanager.onConfigured.subscribe(function () { return uimanager.onControlsShow.dispatch(_this); });
            return;
        }
        var isUiShown = false;
        var isSeeking = false;
        var isFirstTouch = true;
        var showUi = function () {
            if (!isUiShown) {
                // Let subscribers know that they should reveal themselves
                uimanager.onControlsShow.dispatch(_this);
                isUiShown = true;
            }
            // Don't trigger timeout while seeking (it will be triggered once the seek is finished) or casting
            if (!isSeeking && !player.isCasting()) {
                _this.uiHideTimeout.start();
            }
        };
        var hideUi = function () {
            // Hide the UI only if it is shown, and if not casting
            if (isUiShown && !player.isCasting()) {
                // Issue a preview event to check if we are good to hide the controls
                var previewHideEventArgs = {};
                uimanager.onPreviewControlsHide.dispatch(_this, previewHideEventArgs);
                if (!previewHideEventArgs.cancel) {
                    // If the preview wasn't canceled, let subscribers know that they should now hide themselves
                    uimanager.onControlsHide.dispatch(_this);
                    isUiShown = false;
                }
                else {
                    // If the hide preview was canceled, continue to show UI
                    showUi();
                }
            }
        };
        // Timeout to defer UI hiding by the configured delay time
        this.uiHideTimeout = new timeout_1.Timeout(config.hideDelay, hideUi);
        // On touch displays, the first touch reveals the UI
        container.on('touchend', function (e) {
            if (!isUiShown) {
                // Only if the UI is hidden, we prevent other actions (except for the first touch) and reveal the UI instead.
                // The first touch is not prevented to let other listeners receive the event and trigger an initial action, e.g.
                // the huge playback button can directly start playback instead of requiring a double tap which 1. reveals
                // the UI and 2. starts playback.
                if (isFirstTouch) {
                    isFirstTouch = false;
                }
                else {
                    e.preventDefault();
                }
                showUi();
            }
        });
        // When the mouse enters, we show the UI
        container.on('mouseenter', function () {
            showUi();
        });
        // When the mouse moves within, we show the UI
        container.on('mousemove', function () {
            showUi();
        });
        // When the mouse leaves, we can prepare to hide the UI, except a seek is going on
        container.on('mouseleave', function () {
            // When a seek is going on, the seek scrub pointer may exit the UI area while still seeking, and we do not hide
            // the UI in such cases
            if (!isSeeking) {
                _this.uiHideTimeout.start();
            }
        });
        uimanager.onSeek.subscribe(function () {
            _this.uiHideTimeout.clear(); // Don't hide UI while a seek is in progress
            isSeeking = true;
        });
        uimanager.onSeeked.subscribe(function () {
            isSeeking = false;
            _this.uiHideTimeout.start(); // Re-enable UI hide timeout after a seek
        });
        player.addEventHandler(player.EVENT.ON_CAST_STARTED, function () {
            showUi(); // Show UI when a Cast session has started (UI will then stay permanently on during the session)
        });
    };
    UIContainer.prototype.configurePlayerStates = function (player, uimanager) {
        var _this = this;
        var container = this.getDomElement();
        // Convert player states into CSS class names
        var stateClassNames = [];
        for (var state in playerutils_1.PlayerUtils.PlayerState) {
            if (isNaN(Number(state))) {
                var enumName = playerutils_1.PlayerUtils.PlayerState[playerutils_1.PlayerUtils.PlayerState[state]];
                stateClassNames[playerutils_1.PlayerUtils.PlayerState[state]] =
                    this.prefixCss(UIContainer.STATE_PREFIX + enumName.toLowerCase());
            }
        }
        var removeStates = function () {
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.IDLE]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PREPARED]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PLAYING]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PAUSED]);
            container.removeClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.FINISHED]);
        };
        player.addEventHandler(player.EVENT.ON_READY, function () {
            removeStates();
            container.addClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PREPARED]);
        });
        player.addEventHandler(player.EVENT.ON_PLAY, function () {
            removeStates();
            container.addClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PLAYING]);
        });
        player.addEventHandler(player.EVENT.ON_PAUSED, function () {
            removeStates();
            container.addClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.PAUSED]);
        });
        player.addEventHandler(player.EVENT.ON_PLAYBACK_FINISHED, function () {
            removeStates();
            container.addClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.FINISHED]);
        });
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, function () {
            removeStates();
            container.addClass(stateClassNames[playerutils_1.PlayerUtils.PlayerState.IDLE]);
        });
        // Init in current player state
        container.addClass(stateClassNames[playerutils_1.PlayerUtils.getState(player)]);
        // Fullscreen marker class
        player.addEventHandler(player.EVENT.ON_FULLSCREEN_ENTER, function () {
            container.addClass(_this.prefixCss(UIContainer.FULLSCREEN));
        });
        player.addEventHandler(player.EVENT.ON_FULLSCREEN_EXIT, function () {
            container.removeClass(_this.prefixCss(UIContainer.FULLSCREEN));
        });
        // Init fullscreen state
        if (player.isFullscreen()) {
            container.addClass(this.prefixCss(UIContainer.FULLSCREEN));
        }
        // Buffering marker class
        player.addEventHandler(player.EVENT.ON_STALL_STARTED, function () {
            container.addClass(_this.prefixCss(UIContainer.BUFFERING));
        });
        player.addEventHandler(player.EVENT.ON_STALL_ENDED, function () {
            container.removeClass(_this.prefixCss(UIContainer.BUFFERING));
        });
        // Init buffering state
        if (player.isStalled()) {
            container.addClass(this.prefixCss(UIContainer.BUFFERING));
        }
        // RemoteControl marker class
        player.addEventHandler(player.EVENT.ON_CAST_STARTED, function () {
            container.addClass(_this.prefixCss(UIContainer.REMOTE_CONTROL));
        });
        player.addEventHandler(player.EVENT.ON_CAST_STOPPED, function () {
            container.removeClass(_this.prefixCss(UIContainer.REMOTE_CONTROL));
        });
        // Init RemoteControl state
        if (player.isCasting()) {
            container.addClass(this.prefixCss(UIContainer.REMOTE_CONTROL));
        }
        // Controls visibility marker class
        uimanager.onControlsShow.subscribe(function () {
            container.removeClass(_this.prefixCss(UIContainer.CONTROLS_HIDDEN));
            container.addClass(_this.prefixCss(UIContainer.CONTROLS_SHOWN));
        });
        uimanager.onControlsHide.subscribe(function () {
            container.removeClass(_this.prefixCss(UIContainer.CONTROLS_SHOWN));
            container.addClass(_this.prefixCss(UIContainer.CONTROLS_HIDDEN));
        });
        // Layout size classes
        var updateLayoutSizeClasses = function (width, height) {
            container.removeClass(_this.prefixCss('layout-max-width-400'));
            container.removeClass(_this.prefixCss('layout-max-width-600'));
            container.removeClass(_this.prefixCss('layout-max-width-800'));
            container.removeClass(_this.prefixCss('layout-max-width-1200'));
            if (width <= 400) {
                container.addClass(_this.prefixCss('layout-max-width-400'));
            }
            else if (width <= 600) {
                container.addClass(_this.prefixCss('layout-max-width-600'));
            }
            else if (width <= 800) {
                container.addClass(_this.prefixCss('layout-max-width-800'));
            }
            else if (width <= 1200) {
                container.addClass(_this.prefixCss('layout-max-width-1200'));
            }
        };
        player.addEventHandler(player.EVENT.ON_PLAYER_RESIZE, function (e) {
            // Convert strings (with "px" suffix) to ints
            var width = Math.round(Number(e.width.substring(0, e.width.length - 2)));
            var height = Math.round(Number(e.height.substring(0, e.height.length - 2)));
            updateLayoutSizeClasses(width, height);
        });
        // Init layout state
        updateLayoutSizeClasses(new dom_1.DOM(player.getFigure()).width(), new dom_1.DOM(player.getFigure()).height());
    };
    UIContainer.prototype.release = function () {
        _super.prototype.release.call(this);
        this.uiHideTimeout.clear();
    };
    UIContainer.prototype.toDomElement = function () {
        var container = _super.prototype.toDomElement.call(this);
        // Detect flexbox support (not supported in IE9)
        if (document && typeof document.createElement('p').style.flex !== 'undefined') {
            container.addClass(this.prefixCss('flexbox'));
        }
        else {
            container.addClass(this.prefixCss('no-flexbox'));
        }
        return container;
    };
    return UIContainer;
}(container_1.Container));
UIContainer.STATE_PREFIX = 'player-state-';
UIContainer.FULLSCREEN = 'fullscreen';
UIContainer.BUFFERING = 'buffering';
UIContainer.REMOTE_CONTROL = 'remote-control';
UIContainer.CONTROLS_SHOWN = 'controls-shown';
UIContainer.CONTROLS_HIDDEN = 'controls-hidden';
exports.UIContainer = UIContainer;


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var BrowserUtils;
(function (BrowserUtils) {
    // isMobile only needs to be evaluated once (it cannot change during a browser session)
    // Mobile detection according to Mozilla recommendation: "In summary, we recommend looking for the string “Mobi”
    // anywhere in the User Agent to detect a mobile device."
    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent
    BrowserUtils.isMobile = navigator && navigator.userAgent && /Mobi/.test(navigator.userAgent);
    BrowserUtils.isChrome = navigator && navigator.userAgent && /Chrome/.test(navigator.userAgent);
    BrowserUtils.isAndroid = navigator && navigator.userAgent && /Android/.test(navigator.userAgent);
})(BrowserUtils = exports.BrowserUtils || (exports.BrowserUtils = {}));


/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(5);
var playerutils_1 = __webpack_require__(12);
/**
 * A button that toggles between playback and pause.
 */
var PlaybackToggleButton = (function (_super) {
    __extends(PlaybackToggleButton, _super);
    function PlaybackToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-playbacktogglebutton',
            text: 'Play/Pause',
        }, _this.config);
        return _this;
    }
    PlaybackToggleButton.prototype.configure = function (player, uimanager, handleClickEvent) {
        var _this = this;
        if (handleClickEvent === void 0) { handleClickEvent = true; }
        _super.prototype.configure.call(this, player, uimanager);
        var isSeeking = false;
        // Handler to update button state based on player state
        var playbackStateHandler = function (event) {
            // If the UI is currently seeking, playback is temporarily stopped but the buttons should
            // not reflect that and stay as-is (e.g indicate playback while seeking).
            if (isSeeking) {
                return;
            }
            if (player.isPlaying()) {
                _this.on();
            }
            else {
                _this.off();
            }
        };
        // Call handler upon these events
        player.addEventHandler(player.EVENT.ON_PLAY, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_PAUSED, playbackStateHandler);
        if (player.EVENT.ON_PLAYING) {
            // Since player 7.3. Not really necessary but just in case we ever miss the ON_PLAY event.
            player.addEventHandler(player.EVENT.ON_PLAYING, playbackStateHandler);
        }
        // after unloading + loading a new source, the player might be in a different playing state (from playing into stopped)
        player.addEventHandler(player.EVENT.ON_SOURCE_LOADED, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, playbackStateHandler);
        // when playback finishes, player turns to paused mode
        player.addEventHandler(player.EVENT.ON_PLAYBACK_FINISHED, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_CAST_STARTED, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_CAST_PLAYING, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_CAST_PAUSED, playbackStateHandler);
        player.addEventHandler(player.EVENT.ON_CAST_PLAYBACK_FINISHED, playbackStateHandler);
        // When a playback attempt is rejected with warning 5008, we switch the button state back to off
        // This is required for blocked autoplay, because there is no ON_PAUSED event in such case
        player.addEventHandler(player.EVENT.ON_WARNING, function (event) {
            if (event.code === 5008) {
                _this.off();
            }
        });
        // Detect absence of timeshifting on live streams and add tagging class to convert button icons to play/stop
        var timeShiftDetector = new playerutils_1.PlayerUtils.TimeShiftAvailabilityDetector(player);
        timeShiftDetector.onTimeShiftAvailabilityChanged.subscribe(function (sender, args) {
            if (!args.timeShiftAvailable) {
                _this.getDomElement().addClass(_this.prefixCss(PlaybackToggleButton.CLASS_STOPTOGGLE));
            }
            else {
                _this.getDomElement().removeClass(_this.prefixCss(PlaybackToggleButton.CLASS_STOPTOGGLE));
            }
        });
        timeShiftDetector.detect(); // Initial detection
        if (handleClickEvent) {
            // Control player by button events
            // When a button event triggers a player API call, events are fired which in turn call the event handler
            // above that updated the button state.
            this.onClick.subscribe(function () {
                if (player.isPlaying()) {
                    player.pause('ui');
                }
                else {
                    player.play('ui');
                }
            });
        }
        // Track UI seeking status
        uimanager.onSeek.subscribe(function () {
            isSeeking = true;
        });
        uimanager.onSeeked.subscribe(function () {
            isSeeking = false;
        });
        // Startup init
        playbackStateHandler(null);
    };
    return PlaybackToggleButton;
}(togglebutton_1.ToggleButton));
PlaybackToggleButton.CLASS_STOPTOGGLE = 'stoptoggle';
exports.PlaybackToggleButton = PlaybackToggleButton;


/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(5);
/**
 * A button that toggles audio muting.
 */
var VolumeToggleButton = (function (_super) {
    __extends(VolumeToggleButton, _super);
    function VolumeToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        var defaultConfig = {
            cssClass: 'ui-volumetogglebutton',
            text: 'Volume/Mute',
            onClass: 'muted',
            offClass: 'unmuted',
        };
        _this.config = _this.mergeConfig(config, defaultConfig, _this.config);
        return _this;
    }
    VolumeToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var muteStateHandler = function () {
            if (player.isMuted()) {
                _this.on();
                // When the volume is unmuted and the volume level is veeeery low, we increase it to 10%. This especially helps
                // in the case when the volume is first turned down to 0 and then the player is muted; when the player gets
                // unmuted it would switch to volume level 0 which would seem like unmuting did not work, and increasing the
                // level a bit helps to overcome this issue.
                if (player.getVolume() < 10) {
                    player.setVolume(10);
                }
            }
            else {
                _this.off();
            }
        };
        var volumeLevelHandler = function () {
            var volumeLevelTens = Math.ceil(player.getVolume() / 10);
            _this.getDomElement().data(_this.prefixCss('volume-level-tens'), String(volumeLevelTens));
            // When the volume is turned down to zero, switch into the mute state of the button. This avoids the usability
            // issue where the volume is turned down to zero, the button shows the muted icon but is not really unmuted, and
            // the next button press would switch it into the mute state, visually staying the same which would seem like
            // an expected unmute did not work.
            if (volumeLevelTens === 0) {
                _this.off();
            }
        };
        player.addEventHandler(player.EVENT.ON_MUTED, muteStateHandler);
        player.addEventHandler(player.EVENT.ON_UNMUTED, muteStateHandler);
        player.addEventHandler(player.EVENT.ON_VOLUME_CHANGED, volumeLevelHandler);
        this.onClick.subscribe(function () {
            if (player.isMuted()) {
                player.unmute('ui-volumetogglebutton');
            }
            else {
                player.mute('ui-volumetogglebutton');
            }
        });
        // Startup init
        muteStateHandler();
        volumeLevelHandler();
    };
    return VolumeToggleButton;
}(togglebutton_1.ToggleButton));
exports.VolumeToggleButton = VolumeToggleButton;


/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(1);
var eventdispatcher_1 = __webpack_require__(3);
var timeout_1 = __webpack_require__(9);
var playerutils_1 = __webpack_require__(12);
/**
 * A seek bar to seek within the player's media. It displays the current playback position, amount of buffed data, seek
 * target, and keeps status about an ongoing seek.
 *
 * The seek bar displays different 'bars':
 *  - the playback position, i.e. the position in the media at which the player current playback pointer is positioned
 *  - the buffer position, which usually is the playback position plus the time span that is already buffered ahead
 *  - the seek position, used to preview to where in the timeline a seek will jump to
 */
var SeekBar = (function (_super) {
    __extends(SeekBar, _super);
    function SeekBar(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        /**
         * Buffer of the the current playback position. The position must be buffered in case the element
         * needs to be refreshed with {@link #refreshPlaybackPosition}.
         * @type {number}
         */
        _this.playbackPositionPercentage = 0;
        // https://hacks.mozilla.org/2013/04/detecting-touch-its-the-why-not-the-how/
        _this.touchSupported = ('ontouchstart' in window);
        _this.seekBarEvents = {
            /**
             * Fired when a scrubbing seek operation is started.
             */
            onSeek: new eventdispatcher_1.EventDispatcher(),
            /**
             * Fired during a scrubbing seek to indicate that the seek preview (i.e. the video frame) should be updated.
             */
            onSeekPreview: new eventdispatcher_1.EventDispatcher(),
            /**
             * Fired when a scrubbing seek has finished or when a direct seek is issued.
             */
            onSeeked: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-seekbar',
            vertical: false,
            smoothPlaybackPositionUpdateIntervalMs: 50,
        }, _this.config);
        _this.label = _this.config.label;
        _this.timelineMarkers = [];
        return _this;
    }
    SeekBar.prototype.initialize = function () {
        _super.prototype.initialize.call(this);
        if (this.hasLabel()) {
            this.getLabel().initialize();
        }
    };
    SeekBar.prototype.configure = function (player, uimanager, configureSeek) {
        var _this = this;
        if (configureSeek === void 0) { configureSeek = true; }
        _super.prototype.configure.call(this, player, uimanager);
        // Apply scaling transform to the backdrop bar to have all bars rendered similarly
        // (the call must be up here to be executed for the volume slider as well)
        this.setPosition(this.seekBarBackdrop, 100);
        if (!configureSeek) {
            // The configureSeek flag can be used by subclasses to disable configuration as seek bar. E.g. the volume
            // slider is reusing this component but adds its own functionality, and does not need the seek functionality.
            // This is actually a hack, the proper solution would be for both seek bar and volume sliders to extend
            // a common base slider component and implement their functionality there.
            return;
        }
        var isPlaying = false;
        var isSeeking = false;
        // Update playback and buffer positions
        var playbackPositionHandler = function (event, forceUpdate) {
            if (event === void 0) { event = null; }
            if (forceUpdate === void 0) { forceUpdate = false; }
            if (isSeeking) {
                // We caught a seek preview seek, do not update the seekbar
                return;
            }
            if (player.isLive()) {
                if (player.getMaxTimeShift() === 0) {
                    // This case must be explicitly handled to avoid division by zero
                    _this.setPlaybackPosition(100);
                }
                else {
                    var playbackPositionPercentage = 100 - (100 / player.getMaxTimeShift() * player.getTimeShift());
                    _this.setPlaybackPosition(playbackPositionPercentage);
                }
                // Always show full buffer for live streams
                _this.setBufferPosition(100);
            }
            else {
                var playbackPositionPercentage = 100 / player.getDuration() * player.getCurrentTime();
                var videoBufferLength = player.getVideoBufferLength();
                var audioBufferLength = player.getAudioBufferLength();
                // Calculate the buffer length which is the smaller length of the audio and video buffers. If one of these
                // buffers is not available, we set it's value to MAX_VALUE to make sure that the other real value is taken
                // as the buffer length.
                var bufferLength = Math.min(videoBufferLength != null ? videoBufferLength : Number.MAX_VALUE, audioBufferLength != null ? audioBufferLength : Number.MAX_VALUE);
                // If both buffer lengths are missing, we set the buffer length to zero
                if (bufferLength === Number.MAX_VALUE) {
                    bufferLength = 0;
                }
                var bufferPercentage = 100 / player.getDuration() * bufferLength;
                // Update playback position only in paused state or in the initial startup state where player is neither
                // paused nor playing. Playback updates are handled in the Timeout below.
                if (_this.config.smoothPlaybackPositionUpdateIntervalMs === SeekBar.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED
                    || forceUpdate || player.isPaused() || (player.isPaused() === player.isPlaying())) {
                    _this.setPlaybackPosition(playbackPositionPercentage);
                }
                _this.setBufferPosition(playbackPositionPercentage + bufferPercentage);
            }
        };
        // Update seekbar upon these events
        // init playback position when the player is ready
        player.addEventHandler(player.EVENT.ON_READY, playbackPositionHandler);
        // update playback position when it changes
        player.addEventHandler(player.EVENT.ON_TIME_CHANGED, playbackPositionHandler);
        // update bufferlevel when buffering is complete
        player.addEventHandler(player.EVENT.ON_STALL_ENDED, playbackPositionHandler);
        // update playback position when a seek has finished
        player.addEventHandler(player.EVENT.ON_SEEKED, playbackPositionHandler);
        // update playback position when a timeshift has finished
        player.addEventHandler(player.EVENT.ON_TIME_SHIFTED, playbackPositionHandler);
        // update bufferlevel when a segment has been downloaded
        player.addEventHandler(player.EVENT.ON_SEGMENT_REQUEST_FINISHED, playbackPositionHandler);
        // update playback position of Cast playback
        player.addEventHandler(player.EVENT.ON_CAST_TIME_UPDATED, playbackPositionHandler);
        this.configureLivePausedTimeshiftUpdater(player, uimanager, playbackPositionHandler);
        // Seek handling
        player.addEventHandler(player.EVENT.ON_SEEK, function () {
            _this.setSeeking(true);
        });
        player.addEventHandler(player.EVENT.ON_SEEKED, function () {
            _this.setSeeking(false);
        });
        player.addEventHandler(player.EVENT.ON_TIME_SHIFT, function () {
            _this.setSeeking(true);
        });
        player.addEventHandler(player.EVENT.ON_TIME_SHIFTED, function () {
            _this.setSeeking(false);
        });
        var seek = function (percentage) {
            if (player.isLive()) {
                player.timeShift(player.getMaxTimeShift() - (player.getMaxTimeShift() * (percentage / 100)), 'ui');
            }
            else {
                player.seek(player.getDuration() * (percentage / 100), 'ui');
            }
        };
        this.onSeek.subscribe(function (sender) {
            isSeeking = true; // track seeking status so we can catch events from seek preview seeks
            // Notify UI manager of started seek
            uimanager.onSeek.dispatch(sender);
            // Save current playback state
            isPlaying = player.isPlaying();
            // Pause playback while seeking
            if (isPlaying) {
                player.pause('ui');
            }
        });
        this.onSeekPreview.subscribe(function (sender, args) {
            // Notify UI manager of seek preview
            uimanager.onSeekPreview.dispatch(sender, args);
        });
        this.onSeekPreview.subscribeRateLimited(function (sender, args) {
            // Rate-limited scrubbing seek
            if (args.scrubbing) {
                seek(args.position);
            }
        }, 200);
        this.onSeeked.subscribe(function (sender, percentage) {
            isSeeking = false;
            // Do the seek
            seek(percentage);
            // Continue playback after seek if player was playing when seek started
            if (isPlaying) {
                player.play('ui');
            }
            // Notify UI manager of finished seek
            uimanager.onSeeked.dispatch(sender);
        });
        if (this.hasLabel()) {
            // Configure a seekbar label that is internal to the seekbar)
            this.getLabel().configure(player, uimanager);
        }
        // Hide seekbar for live sources without timeshift
        var isLive = false;
        var hasTimeShift = false;
        var switchVisibility = function (isLive, hasTimeShift) {
            if (isLive && !hasTimeShift) {
                _this.hide();
            }
            else {
                _this.show();
            }
            playbackPositionHandler(null, true);
            _this.refreshPlaybackPosition();
        };
        var liveStreamDetector = new playerutils_1.PlayerUtils.LiveStreamDetector(player);
        liveStreamDetector.onLiveChanged.subscribe(function (sender, args) {
            isLive = args.live;
            switchVisibility(isLive, hasTimeShift);
        });
        var timeShiftDetector = new playerutils_1.PlayerUtils.TimeShiftAvailabilityDetector(player);
        timeShiftDetector.onTimeShiftAvailabilityChanged.subscribe(function (sender, args) {
            hasTimeShift = args.timeShiftAvailable;
            switchVisibility(isLive, hasTimeShift);
        });
        // Initial detection
        liveStreamDetector.detect();
        timeShiftDetector.detect();
        // Refresh the playback position when the player resized or the UI is configured. The playback position marker
        // is positioned absolutely and must therefore be updated when the size of the seekbar changes.
        player.addEventHandler(player.EVENT.ON_PLAYER_RESIZE, function () {
            _this.refreshPlaybackPosition();
        });
        // Additionally, when this code is called, the seekbar is not part of the UI yet and therefore does not have a size,
        // resulting in a wrong initial position of the marker. Refreshing it once the UI is configured solved this issue.
        uimanager.onConfigured.subscribe(function () {
            _this.refreshPlaybackPosition();
        });
        // It can also happen that the value changes once the player is ready, or when a new source is loaded, so we need
        // to update on ON_READY too
        player.addEventHandler(player.EVENT.ON_READY, function () {
            _this.refreshPlaybackPosition();
        });
        // Initialize seekbar
        playbackPositionHandler(); // Set the playback position
        this.setBufferPosition(0);
        this.setSeekPosition(0);
        if (this.config.smoothPlaybackPositionUpdateIntervalMs !== SeekBar.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED) {
            this.configureSmoothPlaybackPositionUpdater(player, uimanager);
        }
        this.configureMarkers(player, uimanager);
    };
    /**
     * Update seekbar while a live stream with DVR window is paused.
     * The playback position stays still and the position indicator visually moves towards the back.
     */
    SeekBar.prototype.configureLivePausedTimeshiftUpdater = function (player, uimanager, playbackPositionHandler) {
        // Regularly update the playback position while the timeout is active
        var pausedTimeshiftUpdater = new timeout_1.Timeout(1000, playbackPositionHandler, true);
        // Start updater when a live stream with timeshift window is paused
        player.addEventHandler(player.EVENT.ON_PAUSED, function () {
            if (player.isLive() && player.getMaxTimeShift() < 0) {
                pausedTimeshiftUpdater.start();
            }
        });
        // Stop updater when playback continues (no matter if the updater was started before)
        player.addEventHandler(player.EVENT.ON_PLAY, function () { return pausedTimeshiftUpdater.clear(); });
    };
    SeekBar.prototype.configureSmoothPlaybackPositionUpdater = function (player, uimanager) {
        var _this = this;
        /*
         * Playback position update
         *
         * We do not update the position directly from the ON_TIME_CHANGED event, because it arrives very jittery and
         * results in a jittery position indicator since the CSS transition time is statically set.
         * To work around this issue, we maintain a local playback position that is updated in a stable regular interval
         * and kept in sync with the player.
         */
        var currentTimeSeekBar = 0;
        var currentTimePlayer = 0;
        var updateIntervalMs = 50;
        var currentTimeUpdateDeltaSecs = updateIntervalMs / 1000;
        this.smoothPlaybackPositionUpdater = new timeout_1.Timeout(updateIntervalMs, function () {
            currentTimeSeekBar += currentTimeUpdateDeltaSecs;
            currentTimePlayer = player.getCurrentTime();
            // Sync currentTime of seekbar to player
            var currentTimeDelta = currentTimeSeekBar - currentTimePlayer;
            // If the delta is larger that 2 secs, directly jump the seekbar to the
            // player time instead of smoothly fast forwarding/rewinding.
            if (Math.abs(currentTimeDelta) > 2) {
                currentTimeSeekBar = currentTimePlayer;
            }
            else if (currentTimeDelta <= -currentTimeUpdateDeltaSecs) {
                currentTimeSeekBar += currentTimeUpdateDeltaSecs;
            }
            else if (currentTimeDelta >= currentTimeUpdateDeltaSecs) {
                currentTimeSeekBar -= currentTimeUpdateDeltaSecs;
            }
            var playbackPositionPercentage = 100 / player.getDuration() * currentTimeSeekBar;
            _this.setPlaybackPosition(playbackPositionPercentage);
        }, true);
        var startSmoothPlaybackPositionUpdater = function () {
            if (!player.isLive()) {
                currentTimeSeekBar = player.getCurrentTime();
                _this.smoothPlaybackPositionUpdater.start();
            }
        };
        var stopSmoothPlaybackPositionUpdater = function () {
            _this.smoothPlaybackPositionUpdater.clear();
        };
        player.addEventHandler(player.EVENT.ON_PLAY, startSmoothPlaybackPositionUpdater);
        player.addEventHandler(player.EVENT.ON_CAST_PLAYING, startSmoothPlaybackPositionUpdater);
        player.addEventHandler(player.EVENT.ON_PAUSED, stopSmoothPlaybackPositionUpdater);
        player.addEventHandler(player.EVENT.ON_CAST_PAUSED, stopSmoothPlaybackPositionUpdater);
        player.addEventHandler(player.EVENT.ON_PLAYBACK_FINISHED, stopSmoothPlaybackPositionUpdater);
        player.addEventHandler(player.EVENT.ON_SEEKED, function () {
            currentTimeSeekBar = player.getCurrentTime();
        });
        if (player.isPlaying()) {
            startSmoothPlaybackPositionUpdater();
        }
    };
    SeekBar.prototype.configureMarkers = function (player, uimanager) {
        var _this = this;
        var clearMarkers = function () {
            _this.timelineMarkers = [];
            _this.updateMarkers();
        };
        var setupMarkers = function () {
            clearMarkers();
            var duration = player.getDuration();
            if (duration === Infinity) {
                // Don't generate timeline markers if we don't yet have a duration
                // The duration check is for buggy platforms where the duration is not available instantly (Chrome on Android 4.3)
                return;
            }
            for (var _i = 0, _a = uimanager.getConfig().metadata.markers; _i < _a.length; _i++) {
                var marker = _a[_i];
                var markerPosition = 100 / duration * marker.time; // convert absolute time to percentage
                var markerDuration = 100 / duration * marker.duration;
                _this.timelineMarkers.push({ marker: marker, position: markerPosition, duration: markerDuration });
            }
            // Populate the timeline with the markers
            _this.updateMarkers();
        };
        // Add markers when a source is loaded
        player.addEventHandler(player.EVENT.ON_READY, setupMarkers);
        // Remove markers when unloaded
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, clearMarkers);
        // Update markers when the size of the seekbar changes
        player.addEventHandler(player.EVENT.ON_PLAYER_RESIZE, function () { return _this.updateMarkers(); });
        // Update markers when a marker is added or removed
        uimanager.getConfig().events.onUpdated.subscribe(setupMarkers);
        uimanager.onRelease.subscribe(function () { return uimanager.getConfig().events.onUpdated.unsubscribe(setupMarkers); });
        // Init markers at startup
        setupMarkers();
    };
    SeekBar.prototype.release = function () {
        _super.prototype.release.call(this);
        if (this.smoothPlaybackPositionUpdater) {
            this.smoothPlaybackPositionUpdater.clear();
        }
    };
    SeekBar.prototype.toDomElement = function () {
        var _this = this;
        if (this.config.vertical) {
            this.config.cssClasses.push('vertical');
        }
        var seekBarContainer = new dom_1.DOM('div', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        });
        var seekBar = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar'),
        });
        this.seekBar = seekBar;
        // Indicator that shows the buffer fill level
        var seekBarBufferLevel = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-bufferlevel'),
        });
        this.seekBarBufferPosition = seekBarBufferLevel;
        // Indicator that shows the current playback position
        var seekBarPlaybackPosition = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-playbackposition'),
        });
        this.seekBarPlaybackPosition = seekBarPlaybackPosition;
        // A marker of the current playback position, e.g. a dot or line
        var seekBarPlaybackPositionMarker = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-playbackposition-marker'),
        });
        this.seekBarPlaybackPositionMarker = seekBarPlaybackPositionMarker;
        // Indicator that show where a seek will go to
        var seekBarSeekPosition = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-seekposition'),
        });
        this.seekBarSeekPosition = seekBarSeekPosition;
        // Indicator that shows the full seekbar
        var seekBarBackdrop = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-backdrop'),
        });
        this.seekBarBackdrop = seekBarBackdrop;
        var seekBarChapterMarkersContainer = new dom_1.DOM('div', {
            'class': this.prefixCss('seekbar-markers'),
        });
        this.seekBarMarkersContainer = seekBarChapterMarkersContainer;
        seekBar.append(this.seekBarBackdrop, this.seekBarBufferPosition, this.seekBarSeekPosition, this.seekBarPlaybackPosition, this.seekBarMarkersContainer, this.seekBarPlaybackPositionMarker);
        var seeking = false;
        // Define handler functions so we can attach/remove them later
        var mouseTouchMoveHandler = function (e) {
            e.preventDefault();
            // Avoid propagation to VR handler
            e.stopPropagation();
            var targetPercentage = 100 * _this.getOffset(e);
            _this.setSeekPosition(targetPercentage);
            _this.setPlaybackPosition(targetPercentage);
            _this.onSeekPreviewEvent(targetPercentage, true);
        };
        var mouseTouchUpHandler = function (e) {
            e.preventDefault();
            // Remove handlers, seek operation is finished
            new dom_1.DOM(document).off('touchmove mousemove', mouseTouchMoveHandler);
            new dom_1.DOM(document).off('touchend mouseup', mouseTouchUpHandler);
            var targetPercentage = 100 * _this.getOffset(e);
            var snappedChapter = _this.getMarkerAtPosition(targetPercentage);
            _this.setSeeking(false);
            seeking = false;
            // Fire seeked event
            _this.onSeekedEvent(snappedChapter ? snappedChapter.position : targetPercentage);
        };
        // A seek always start with a touchstart or mousedown directly on the seekbar.
        // To track a mouse seek also outside the seekbar (for touch events this works automatically),
        // so the user does not need to take care that the mouse always stays on the seekbar, we attach the mousemove
        // and mouseup handlers to the whole document. A seek is triggered when the user lifts the mouse key.
        // A seek mouse gesture is thus basically a click with a long time frame between down and up events.
        seekBar.on('touchstart mousedown', function (e) {
            var isTouchEvent = _this.touchSupported && e instanceof TouchEvent;
            // Prevent selection of DOM elements (also prevents mousedown if current event is touchstart)
            e.preventDefault();
            // Avoid propagation to VR handler
            e.stopPropagation();
            _this.setSeeking(true); // Set seeking class on DOM element
            seeking = true; // Set seek tracking flag
            // Fire seeked event
            _this.onSeekEvent();
            // Add handler to track the seek operation over the whole document
            new dom_1.DOM(document).on(isTouchEvent ? 'touchmove' : 'mousemove', mouseTouchMoveHandler);
            new dom_1.DOM(document).on(isTouchEvent ? 'touchend' : 'mouseup', mouseTouchUpHandler);
        });
        // Display seek target indicator when mouse hovers or finger slides over seekbar
        seekBar.on('touchmove mousemove', function (e) {
            e.preventDefault();
            if (seeking) {
                // During a seek (when mouse is down or touch move active), we need to stop propagation to avoid
                // the VR viewport reacting to the moves.
                e.stopPropagation();
                // Because the stopped propagation inhibits the event on the document, we need to call it from here
                mouseTouchMoveHandler(e);
            }
            var position = 100 * _this.getOffset(e);
            _this.setSeekPosition(position);
            _this.onSeekPreviewEvent(position, false);
            if (_this.hasLabel() && _this.getLabel().isHidden()) {
                _this.getLabel().show();
            }
        });
        // Hide seek target indicator when mouse or finger leaves seekbar
        seekBar.on('touchend mouseleave', function (e) {
            e.preventDefault();
            _this.setSeekPosition(0);
            if (_this.hasLabel()) {
                _this.getLabel().hide();
            }
        });
        seekBarContainer.append(seekBar);
        if (this.label) {
            seekBarContainer.append(this.label.getDomElement());
        }
        return seekBarContainer;
    };
    SeekBar.prototype.updateMarkers = function () {
        var _this = this;
        this.seekBarMarkersContainer.empty();
        var seekBarWidthPx = this.seekBar.width();
        for (var _i = 0, _a = this.timelineMarkers; _i < _a.length; _i++) {
            var marker = _a[_i];
            var markerClasses = ['seekbar-marker'].concat(marker.marker.cssClasses || [])
                .map(function (cssClass) { return _this.prefixCss(cssClass); });
            var cssProperties = {
                'width': marker.position + '%',
            };
            if (marker.duration > 0) {
                var markerWidthPx = Math.round(seekBarWidthPx / 100 * marker.duration);
                cssProperties['border-right-width'] = markerWidthPx + 'px';
                cssProperties['margin-left'] = '0';
            }
            this.seekBarMarkersContainer.append(new dom_1.DOM('div', {
                'class': markerClasses.join(' '),
                'data-marker-time': String(marker.marker.time),
                'data-marker-title': String(marker.marker.title),
            }).css(cssProperties));
        }
    };
    SeekBar.prototype.getMarkerAtPosition = function (percentage) {
        var snappingRange = 1;
        if (this.timelineMarkers.length > 0) {
            for (var _i = 0, _a = this.timelineMarkers; _i < _a.length; _i++) {
                var marker = _a[_i];
                // Handle interval markers
                if (marker.duration > 0
                    && percentage >= marker.position - snappingRange
                    && percentage <= marker.position + marker.duration + snappingRange) {
                    return marker;
                }
                else if (percentage >= marker.position - snappingRange
                    && percentage <= marker.position + snappingRange) {
                    return marker;
                }
            }
        }
        return null;
    };
    /**
     * Gets the horizontal offset of a mouse/touch event point from the left edge of the seek bar.
     * @param eventPageX the pageX coordinate of an event to calculate the offset from
     * @returns {number} a number in the range of [0, 1], where 0 is the left edge and 1 is the right edge
     */
    SeekBar.prototype.getHorizontalOffset = function (eventPageX) {
        var elementOffsetPx = this.seekBar.offset().left;
        var widthPx = this.seekBar.width();
        var offsetPx = eventPageX - elementOffsetPx;
        var offset = 1 / widthPx * offsetPx;
        return this.sanitizeOffset(offset);
    };
    /**
     * Gets the vertical offset of a mouse/touch event point from the bottom edge of the seek bar.
     * @param eventPageY the pageX coordinate of an event to calculate the offset from
     * @returns {number} a number in the range of [0, 1], where 0 is the bottom edge and 1 is the top edge
     */
    SeekBar.prototype.getVerticalOffset = function (eventPageY) {
        var elementOffsetPx = this.seekBar.offset().top;
        var widthPx = this.seekBar.height();
        var offsetPx = eventPageY - elementOffsetPx;
        var offset = 1 / widthPx * offsetPx;
        return 1 - this.sanitizeOffset(offset);
    };
    /**
     * Gets the mouse or touch event offset for the current configuration (horizontal or vertical).
     * @param e the event to calculate the offset from
     * @returns {number} a number in the range of [0, 1]
     * @see #getHorizontalOffset
     * @see #getVerticalOffset
     */
    SeekBar.prototype.getOffset = function (e) {
        if (this.touchSupported && e instanceof TouchEvent) {
            if (this.config.vertical) {
                return this.getVerticalOffset(e.type === 'touchend' ? e.changedTouches[0].pageY : e.touches[0].pageY);
            }
            else {
                return this.getHorizontalOffset(e.type === 'touchend' ? e.changedTouches[0].pageX : e.touches[0].pageX);
            }
        }
        else if (e instanceof MouseEvent) {
            if (this.config.vertical) {
                return this.getVerticalOffset(e.pageY);
            }
            else {
                return this.getHorizontalOffset(e.pageX);
            }
        }
        else {
            if (console) {
                console.warn('invalid event');
            }
            return 0;
        }
    };
    /**
     * Sanitizes the mouse offset to the range of [0, 1].
     *
     * When tracking the mouse outside the seek bar, the offset can be outside the desired range and this method
     * limits it to the desired range. E.g. a mouse event left of the left edge of a seek bar yields an offset below
     * zero, but to display the seek target on the seek bar, we need to limit it to zero.
     *
     * @param offset the offset to sanitize
     * @returns {number} the sanitized offset.
     */
    SeekBar.prototype.sanitizeOffset = function (offset) {
        // Since we track mouse moves over the whole document, the target can be outside the seek range,
        // and we need to limit it to the [0, 1] range.
        if (offset < 0) {
            offset = 0;
        }
        else if (offset > 1) {
            offset = 1;
        }
        return offset;
    };
    /**
     * Sets the position of the playback position indicator.
     * @param percent a number between 0 and 100 as returned by the player
     */
    SeekBar.prototype.setPlaybackPosition = function (percent) {
        this.playbackPositionPercentage = percent;
        // Set position of the bar
        this.setPosition(this.seekBarPlaybackPosition, percent);
        // Set position of the marker
        var totalSize = (this.config.vertical ? (this.seekBar.height() - this.seekBarPlaybackPositionMarker.height()) : this.seekBar.width());
        var px = (totalSize) / 100 * percent;
        if (this.config.vertical) {
            px = this.seekBar.height() - px - this.seekBarPlaybackPositionMarker.height();
        }
        var style = this.config.vertical ?
            // -ms-transform required for IE9
            // -webkit-transform required for Android 4.4 WebView
            {
                'transform': 'translateY(' + px + 'px)',
                '-ms-transform': 'translateY(' + px + 'px)',
                '-webkit-transform': 'translateY(' + px + 'px)',
            } :
            {
                'transform': 'translateX(' + px + 'px)',
                '-ms-transform': 'translateX(' + px + 'px)',
                '-webkit-transform': 'translateX(' + px + 'px)',
            };
        this.seekBarPlaybackPositionMarker.css(style);
    };
    /**
     * Refreshes the playback position. Can be used by subclasses to refresh the position when
     * the size of the component changes.
     */
    SeekBar.prototype.refreshPlaybackPosition = function () {
        this.setPlaybackPosition(this.playbackPositionPercentage);
    };
    /**
     * Sets the position until which media is buffered.
     * @param percent a number between 0 and 100
     */
    SeekBar.prototype.setBufferPosition = function (percent) {
        this.setPosition(this.seekBarBufferPosition, percent);
    };
    /**
     * Sets the position where a seek, if executed, would jump to.
     * @param percent a number between 0 and 100
     */
    SeekBar.prototype.setSeekPosition = function (percent) {
        this.setPosition(this.seekBarSeekPosition, percent);
    };
    /**
     * Set the actual position (width or height) of a DOM element that represent a bar in the seek bar.
     * @param element the element to set the position for
     * @param percent a number between 0 and 100
     */
    SeekBar.prototype.setPosition = function (element, percent) {
        var scale = percent / 100;
        // When the scale is exactly 1 or very near 1 (and the browser internally rounds it to 1), browsers seem to render
        // the elements differently and the height gets slightly off, leading to mismatching heights when e.g. the buffer
        // level bar has a width of 1 and the playback position bar has a width < 1. A jittering buffer level around 1
        // leads to an even worse flickering effect.
        // Various changes in CSS styling and DOM hierarchy did not solve the issue so the workaround is to avoid a scale
        // of exactly 1.
        if (scale >= 0.99999 && scale <= 1.00001) {
            scale = 0.99999;
        }
        var style = this.config.vertical ?
            // -ms-transform required for IE9
            // -webkit-transform required for Android 4.4 WebView
            {
                'transform': 'scaleY(' + scale + ')',
                '-ms-transform': 'scaleY(' + scale + ')',
                '-webkit-transform': 'scaleY(' + scale + ')',
            } :
            {
                'transform': 'scaleX(' + scale + ')',
                '-ms-transform': 'scaleX(' + scale + ')',
                '-webkit-transform': 'scaleX(' + scale + ')',
            };
        element.css(style);
    };
    /**
     * Puts the seek bar into or out of seeking state by adding/removing a class to the DOM element. This can be used
     * to adjust the styling while seeking.
     *
     * @param seeking should be true when entering seek state, false when exiting the seek state
     */
    SeekBar.prototype.setSeeking = function (seeking) {
        if (seeking) {
            this.getDomElement().addClass(this.prefixCss(SeekBar.CLASS_SEEKING));
        }
        else {
            this.getDomElement().removeClass(this.prefixCss(SeekBar.CLASS_SEEKING));
        }
    };
    /**
     * Checks if the seek bar is currently in the seek state.
     * @returns {boolean} true if in seek state, else false
     */
    SeekBar.prototype.isSeeking = function () {
        return this.getDomElement().hasClass(this.prefixCss(SeekBar.CLASS_SEEKING));
    };
    /**
     * Checks if the seek bar has a {@link SeekBarLabel}.
     * @returns {boolean} true if the seek bar has a label, else false
     */
    SeekBar.prototype.hasLabel = function () {
        return this.label != null;
    };
    /**
     * Gets the label of this seek bar.
     * @returns {SeekBarLabel} the label if this seek bar has a label, else null
     */
    SeekBar.prototype.getLabel = function () {
        return this.label;
    };
    SeekBar.prototype.onSeekEvent = function () {
        this.seekBarEvents.onSeek.dispatch(this);
    };
    SeekBar.prototype.onSeekPreviewEvent = function (percentage, scrubbing) {
        var snappedMarker = this.getMarkerAtPosition(percentage);
        var seekPositionPercentage = percentage;
        if (snappedMarker) {
            if (snappedMarker.duration > 0) {
                if (percentage < snappedMarker.position) {
                    // Snap the position to the start of the interval if the seek is within the left snap margin
                    // We know that we are within a snap margin when we are outside the marker interval but still
                    // have a snappedMarker
                    seekPositionPercentage = snappedMarker.position;
                }
                else if (percentage > snappedMarker.position + snappedMarker.duration) {
                    // Snap the position to the end of the interval if the seek is within the right snap margin
                    seekPositionPercentage = snappedMarker.position + snappedMarker.duration;
                }
            }
            else {
                // Position markers always snap to their marker position
                seekPositionPercentage = snappedMarker.position;
            }
        }
        if (this.label) {
            this.label.getDomElement().css({
                'left': seekPositionPercentage + '%',
            });
        }
        this.seekBarEvents.onSeekPreview.dispatch(this, {
            scrubbing: scrubbing,
            position: seekPositionPercentage,
            marker: snappedMarker,
        });
    };
    SeekBar.prototype.onSeekedEvent = function (percentage) {
        this.seekBarEvents.onSeeked.dispatch(this, percentage);
    };
    Object.defineProperty(SeekBar.prototype, "onSeek", {
        /**
         * Gets the event that is fired when a scrubbing seek operation is started.
         * @returns {Event<SeekBar, NoArgs>}
         */
        get: function () {
            return this.seekBarEvents.onSeek.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SeekBar.prototype, "onSeekPreview", {
        /**
         * Gets the event that is fired during a scrubbing seek (to indicate that the seek preview, i.e. the video frame,
         * should be updated), or during a normal seek preview when the seek bar is hovered (and the seek target,
         * i.e. the seek bar label, should be updated).
         * @returns {Event<SeekBar, SeekPreviewEventArgs>}
         */
        get: function () {
            return this.seekBarEvents.onSeekPreview.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SeekBar.prototype, "onSeeked", {
        /**
         * Gets the event that is fired when a scrubbing seek has finished or when a direct seek is issued.
         * @returns {Event<SeekBar, number>}
         */
        get: function () {
            return this.seekBarEvents.onSeeked.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    SeekBar.prototype.onShowEvent = function () {
        _super.prototype.onShowEvent.call(this);
        // Refresh the position of the playback position when the seek bar becomes visible. To correctly set the position,
        // the DOM element must be fully initialized an have its size calculated, because the position is set as an absolute
        // value calculated from the size. This required size is not known when it is hidden.
        // For such cases, we refresh the position here in onShow because here it is guaranteed that the component knows
        // its size and can set the position correctly.
        this.refreshPlaybackPosition();
    };
    return SeekBar;
}(component_1.Component));
SeekBar.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED = -1;
/**
 * The CSS class that is added to the DOM element while the seek bar is in 'seeking' state.
 */
SeekBar.CLASS_SEEKING = 'seeking';
exports.SeekBar = SeekBar;


/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var uiutils_1 = __webpack_require__(20);
var spacer_1 = __webpack_require__(21);
/**
 * A container for main player control components, e.g. play toggle button, seek bar, volume control, fullscreen toggle
 * button.
 */
var ControlBar = (function (_super) {
    __extends(ControlBar, _super);
    function ControlBar(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-controlbar',
            hidden: true,
        }, _this.config);
        return _this;
    }
    ControlBar.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        // Counts how many components are hovered and block hiding of the control bar
        var hoverStackCount = 0;
        // Track hover status of child components
        uiutils_1.UIUtils.traverseTree(this, function (component) {
            // Do not track hover status of child containers or spacers, only of 'real' controls
            if (component instanceof container_1.Container || component instanceof spacer_1.Spacer) {
                return;
            }
            // Subscribe hover event and keep a count of the number of hovered children
            component.onHoverChanged.subscribe(function (sender, args) {
                if (args.hovered) {
                    hoverStackCount++;
                }
                else {
                    hoverStackCount--;
                }
            });
        });
        uimanager.onControlsShow.subscribe(function () {
            _this.show();
        });
        uimanager.onPreviewControlsHide.subscribe(function (sender, args) {
            // Cancel the hide event if hovered child components block hiding
            args.cancel = (hoverStackCount > 0);
        });
        uimanager.onControlsHide.subscribe(function () {
            _this.hide();
        });
    };
    return ControlBar;
}(container_1.Container));
exports.ControlBar = ControlBar;


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var UIUtils;
(function (UIUtils) {
    function traverseTree(component, visit) {
        var recursiveTreeWalker = function (component, parent) {
            visit(component, parent);
            // If the current component is a container, visit it's children
            if (component instanceof container_1.Container) {
                for (var _i = 0, _a = component.getComponents(); _i < _a.length; _i++) {
                    var childComponent = _a[_i];
                    recursiveTreeWalker(childComponent, component);
                }
            }
        };
        // Walk and configure the component tree
        recursiveTreeWalker(component);
    }
    UIUtils.traverseTree = traverseTree;
})(UIUtils = exports.UIUtils || (exports.UIUtils = {}));


/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
/**
 * A dummy component that just reserves some space and does nothing else.
 */
var Spacer = (function (_super) {
    __extends(Spacer, _super);
    function Spacer(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-spacer',
        }, _this.config);
        return _this;
    }
    Spacer.prototype.onShowEvent = function () {
        // disable event firing by overwriting and not calling super
    };
    Spacer.prototype.onHideEvent = function () {
        // disable event firing by overwriting and not calling super
    };
    Spacer.prototype.onHoverChangedEvent = function (hovered) {
        // disable event firing by overwriting and not calling super
    };
    return Spacer;
}(component_1.Component));
exports.Spacer = Spacer;


/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var component_1 = __webpack_require__(2);
var selectbox_1 = __webpack_require__(8);
var label_1 = __webpack_require__(6);
var videoqualityselectbox_1 = __webpack_require__(23);
var audioqualityselectbox_1 = __webpack_require__(24);
var timeout_1 = __webpack_require__(9);
var eventdispatcher_1 = __webpack_require__(3);
/**
 * A panel containing a list of {@link SettingsPanelItem items} that represent labelled settings.
 */
var SettingsPanel = (function (_super) {
    __extends(SettingsPanel, _super);
    function SettingsPanel(config) {
        var _this = _super.call(this, config) || this;
        _this.settingsPanelEvents = {
            onSettingsStateChanged: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-settings-panel',
            hideDelay: 3000,
        }, _this.config);
        return _this;
    }
    SettingsPanel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig(); // TODO fix generics type inference
        if (config.hideDelay > -1) {
            this.hideTimeout = new timeout_1.Timeout(config.hideDelay, function () {
                _this.hide();
                _this.hideHoveredSelectBoxes();
            });
            this.onShow.subscribe(function () {
                // Activate timeout when shown
                _this.hideTimeout.start();
            });
            this.getDomElement().on('mouseenter', function () {
                // On mouse enter clear the timeout
                _this.hideTimeout.clear();
            });
            this.getDomElement().on('mouseleave', function () {
                // On mouse leave activate the timeout
                _this.hideTimeout.reset();
            });
            this.onHide.subscribe(function () {
                // Clear timeout when hidden from outside
                _this.hideTimeout.clear();
            });
        }
        // Fire event when the state of a settings-item has changed
        var settingsStateChangedHandler = function () {
            _this.onSettingsStateChangedEvent();
            // Attach marker class to last visible item
            var lastShownItem = null;
            for (var _i = 0, _a = _this.getItems(); _i < _a.length; _i++) {
                var component = _a[_i];
                component.getDomElement().removeClass(_this.prefixCss(SettingsPanel.CLASS_LAST));
                if (component.isShown()) {
                    lastShownItem = component;
                }
            }
            if (lastShownItem) {
                lastShownItem.getDomElement().addClass(_this.prefixCss(SettingsPanel.CLASS_LAST));
            }
        };
        for (var _i = 0, _a = this.getItems(); _i < _a.length; _i++) {
            var component = _a[_i];
            component.onActiveChanged.subscribe(settingsStateChangedHandler);
        }
    };
    /**
     * Hack for IE + Firefox
     * when the settings panel fades out while an item of a select box is still hovered, the select box will not fade out
     * while the settings panel does. This would leave a floating select box, which is just weird
     */
    SettingsPanel.prototype.hideHoveredSelectBoxes = function () {
        this.getItems().forEach(function (item) {
            if (item.isActive() && item.setting instanceof selectbox_1.SelectBox) {
                var selectBox_1 = item.setting;
                var oldDisplay_1 = selectBox_1.getDomElement().css('display');
                // updating the display to none marks the select-box as inactive, so it will be hidden with the rest
                // we just have to make sure to reset this as soon as possible
                selectBox_1.getDomElement().css('display', 'none');
                if (window.requestAnimationFrame) {
                    requestAnimationFrame(function () { selectBox_1.getDomElement().css('display', oldDisplay_1); });
                }
                else {
                    // IE9 has no requestAnimationFrame, set the value directly. It has no optimization about ignoring DOM-changes
                    // between animationFrames
                    selectBox_1.getDomElement().css('display', oldDisplay_1);
                }
            }
        });
    };
    SettingsPanel.prototype.release = function () {
        _super.prototype.release.call(this);
        if (this.hideTimeout) {
            this.hideTimeout.clear();
        }
    };
    /**
     * Checks if there are active settings within this settings panel. An active setting is a setting that is visible
     * and enabled, which the user can interact with.
     * @returns {boolean} true if there are active settings, false if the panel is functionally empty to a user
     */
    SettingsPanel.prototype.hasActiveSettings = function () {
        for (var _i = 0, _a = this.getItems(); _i < _a.length; _i++) {
            var component = _a[_i];
            if (component.isActive()) {
                return true;
            }
        }
        return false;
    };
    SettingsPanel.prototype.getItems = function () {
        return this.config.components.filter(function (component) { return component instanceof SettingsPanelItem; });
    };
    SettingsPanel.prototype.onSettingsStateChangedEvent = function () {
        this.settingsPanelEvents.onSettingsStateChanged.dispatch(this);
    };
    Object.defineProperty(SettingsPanel.prototype, "onSettingsStateChanged", {
        /**
         * Gets the event that is fired when one or more {@link SettingsPanelItem items} have changed state.
         * @returns {Event<SettingsPanel, NoArgs>}
         */
        get: function () {
            return this.settingsPanelEvents.onSettingsStateChanged.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return SettingsPanel;
}(container_1.Container));
SettingsPanel.CLASS_LAST = 'last';
exports.SettingsPanel = SettingsPanel;
/**
 * An item for a {@link SettingsPanel},
 * Containing an optionnal {@link Label} and a component that configures a setting.
 * If the components is a {@link SelectBox} it will handle the logic of displaying it or not
 */
var SettingsPanelItem = (function (_super) {
    __extends(SettingsPanelItem, _super);
    function SettingsPanelItem(label, setting, config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.settingsPanelItemEvents = {
            onActiveChanged: new eventdispatcher_1.EventDispatcher(),
        };
        _this.setting = setting;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-settings-panel-item',
        }, _this.config);
        if (label !== null) {
            if (label instanceof component_1.Component) {
                _this.label = label;
            }
            else {
                _this.label = new label_1.Label({ text: label });
            }
            _this.addComponent(_this.label);
        }
        _this.addComponent(_this.setting);
        return _this;
    }
    SettingsPanelItem.prototype.configure = function (player, uimanager) {
        var _this = this;
        if (this.setting instanceof selectbox_1.SelectBox) {
            var handleConfigItemChanged = function () {
                if (!(_this.setting instanceof selectbox_1.SelectBox)) {
                    return;
                }
                // The minimum number of items that must be available for the setting to be displayed
                // By default, at least two items must be available, else a selection is not possible
                var minItemsToDisplay = 2;
                // Audio/video quality select boxes contain an additional 'auto' mode, which in combination with a single
                // available quality also does not make sense
                if ((_this.setting instanceof videoqualityselectbox_1.VideoQualitySelectBox && _this.setting.hasAutoItem())
                    || _this.setting instanceof audioqualityselectbox_1.AudioQualitySelectBox) {
                    minItemsToDisplay = 3;
                }
                // Hide the setting if no meaningful choice is available
                if (_this.setting.itemCount() < minItemsToDisplay) {
                    _this.hide();
                }
                else {
                    _this.show();
                }
                // Visibility might have changed and therefore the active state might have changed so we fire the event
                // TODO fire only when state has really changed (e.g. check if visibility has really changed)
                _this.onActiveChangedEvent();
            };
            this.setting.onItemAdded.subscribe(handleConfigItemChanged);
            this.setting.onItemRemoved.subscribe(handleConfigItemChanged);
            // Initialize hidden state
            handleConfigItemChanged();
        }
    };
    /**
     * Checks if this settings panel item is active, i.e. visible and enabled and a user can interact with it.
     * @returns {boolean} true if the panel is active, else false
     */
    SettingsPanelItem.prototype.isActive = function () {
        return this.isShown();
    };
    SettingsPanelItem.prototype.onActiveChangedEvent = function () {
        this.settingsPanelItemEvents.onActiveChanged.dispatch(this);
    };
    Object.defineProperty(SettingsPanelItem.prototype, "onActiveChanged", {
        /**
         * Gets the event that is fired when the 'active' state of this item changes.
         * @see #isActive
         * @returns {Event<SettingsPanelItem, NoArgs>}
         */
        get: function () {
            return this.settingsPanelItemEvents.onActiveChanged.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return SettingsPanelItem;
}(container_1.Container));
exports.SettingsPanelItem = SettingsPanelItem;


/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var selectbox_1 = __webpack_require__(8);
/**
 * A select box providing a selection between 'auto' and the available video qualities.
 */
var VideoQualitySelectBox = (function (_super) {
    __extends(VideoQualitySelectBox, _super);
    function VideoQualitySelectBox(config) {
        if (config === void 0) { config = {}; }
        return _super.call(this, config) || this;
    }
    VideoQualitySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var selectCurrentVideoQuality = function () {
            if (player.getVideoQuality) {
                // Since player 7.3.1
                _this.selectItem(player.getVideoQuality().id);
            }
            else {
                // Backwards compatibility for players <= 7.3.0
                // TODO remove in next major release
                var data = player.getDownloadedVideoData();
                _this.selectItem(data.isAuto ? 'auto' : data.id);
            }
        };
        var updateVideoQualities = function () {
            var videoQualities = player.getAvailableVideoQualities();
            _this.clearItems();
            // Progressive streams do not support automatic quality selection
            _this.hasAuto = player.getStreamType() !== 'progressive';
            if (_this.hasAuto) {
                // Add entry for automatic quality switching (default setting)
                _this.addItem('auto', 'auto');
            }
            // Add video qualities
            for (var _i = 0, videoQualities_1 = videoQualities; _i < videoQualities_1.length; _i++) {
                var videoQuality = videoQualities_1[_i];
                _this.addItem(videoQuality.id, videoQuality.label);
            }
            // Select initial quality
            selectCurrentVideoQuality();
        };
        this.onItemSelected.subscribe(function (sender, value) {
            player.setVideoQuality(value);
        });
        // Update qualities when source goes away
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, updateVideoQualities);
        // Update qualities when a new source is loaded
        player.addEventHandler(player.EVENT.ON_READY, updateVideoQualities);
        // Update qualities when the period within a source changes
        player.addEventHandler(player.EVENT.ON_PERIOD_SWITCHED, updateVideoQualities);
        // Update quality selection when quality is changed (from outside)
        if (player.EVENT.ON_VIDEO_QUALITY_CHANGED) {
            // Since player 7.3.1
            player.addEventHandler(player.EVENT.ON_VIDEO_QUALITY_CHANGED, selectCurrentVideoQuality);
        }
        else {
            // Backwards compatibility for players <= 7.3.0
            // TODO remove in next major release
            player.addEventHandler(player.EVENT.ON_VIDEO_DOWNLOAD_QUALITY_CHANGE, selectCurrentVideoQuality);
        }
    };
    /**
     * Returns true if the select box contains an 'auto' item for automatic quality selection mode.
     * @return {boolean}
     */
    VideoQualitySelectBox.prototype.hasAutoItem = function () {
        return this.hasAuto;
    };
    return VideoQualitySelectBox;
}(selectbox_1.SelectBox));
exports.VideoQualitySelectBox = VideoQualitySelectBox;


/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var selectbox_1 = __webpack_require__(8);
/**
 * A select box providing a selection between 'auto' and the available audio qualities.
 */
var AudioQualitySelectBox = (function (_super) {
    __extends(AudioQualitySelectBox, _super);
    function AudioQualitySelectBox(config) {
        if (config === void 0) { config = {}; }
        return _super.call(this, config) || this;
    }
    AudioQualitySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var selectCurrentAudioQuality = function () {
            if (player.getAudioQuality) {
                // Since player 7.3.1
                _this.selectItem(player.getAudioQuality().id);
            }
            else {
                // Backwards compatibility for players <= 7.3.0
                // TODO remove in next major release
                var data = player.getDownloadedAudioData();
                _this.selectItem(data.isAuto ? 'auto' : data.id);
            }
        };
        var updateAudioQualities = function () {
            var audioQualities = player.getAvailableAudioQualities();
            _this.clearItems();
            // Add entry for automatic quality switching (default setting)
            _this.addItem('auto', 'auto');
            // Add audio qualities
            for (var _i = 0, audioQualities_1 = audioQualities; _i < audioQualities_1.length; _i++) {
                var audioQuality = audioQualities_1[_i];
                _this.addItem(audioQuality.id, audioQuality.label);
            }
            // Select initial quality
            selectCurrentAudioQuality();
        };
        this.onItemSelected.subscribe(function (sender, value) {
            player.setAudioQuality(value);
        });
        // Update qualities when audio track has changed
        player.addEventHandler(player.EVENT.ON_AUDIO_CHANGED, updateAudioQualities);
        // Update qualities when source goes away
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, updateAudioQualities);
        // Update qualities when a new source is loaded
        player.addEventHandler(player.EVENT.ON_READY, updateAudioQualities);
        // Update qualities when the period within a source changes
        player.addEventHandler(player.EVENT.ON_PERIOD_SWITCHED, updateAudioQualities);
        // Update quality selection when quality is changed (from outside)
        if (player.EVENT.ON_AUDIO_QUALITY_CHANGED) {
            // Since player 7.3.1
            player.addEventHandler(player.EVENT.ON_AUDIO_QUALITY_CHANGED, selectCurrentAudioQuality);
        }
        else {
            // Backwards compatibility for players <= 7.3.0
            // TODO remove in next major release
            player.addEventHandler(player.EVENT.ON_AUDIO_DOWNLOAD_QUALITY_CHANGE, selectCurrentAudioQuality);
        }
    };
    return AudioQualitySelectBox;
}(selectbox_1.SelectBox));
exports.AudioQualitySelectBox = AudioQualitySelectBox;


/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(7);
var SubtitleSettingsButton = (function (_super) {
    __extends(SubtitleSettingsButton, _super);
    function SubtitleSettingsButton(config) {
        var _this = _super.call(this, config) || this;
        _this.subtitleSettingsPanel = config.subtitleSettingsPanel;
        _this.settingsPanel = config.settingsPanel;
        return _this;
    }
    return SubtitleSettingsButton;
}(button_1.Button));
exports.SubtitleSettingsButton = SubtitleSettingsButton;


/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var seekbar_1 = __webpack_require__(18);
/**
 * A simple volume slider component to adjust the player's volume setting.
 */
var VolumeSlider = (function (_super) {
    __extends(VolumeSlider, _super);
    function VolumeSlider(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-volumeslider',
            hideIfVolumeControlProhibited: true,
        }, _this.config);
        return _this;
    }
    VolumeSlider.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager, false);
        var config = this.getConfig();
        if (config.hideIfVolumeControlProhibited && !this.detectVolumeControlAvailability()) {
            this.hide();
            // We can just return from here, because the user will never interact with the control and any configured
            // functionality would only eat resources for no reason.
            return;
        }
        var volumeChangeHandler = function () {
            if (player.isMuted()) {
                _this.setPlaybackPosition(0);
            }
            else {
                _this.setPlaybackPosition(player.getVolume());
            }
        };
        player.addEventHandler(player.EVENT.ON_READY, volumeChangeHandler);
        player.addEventHandler(player.EVENT.ON_VOLUME_CHANGED, volumeChangeHandler);
        player.addEventHandler(player.EVENT.ON_MUTED, volumeChangeHandler);
        player.addEventHandler(player.EVENT.ON_UNMUTED, volumeChangeHandler);
        this.onSeekPreview.subscribeRateLimited(function (sender, args) {
            if (args.scrubbing) {
                player.setVolume(args.position, VolumeSlider.issuerName);
            }
        }, 50);
        this.onSeeked.subscribe(function (sender, percentage) {
            player.setVolume(percentage, VolumeSlider.issuerName);
        });
        // Update the volume slider marker when the player resized, a source is loaded and player is ready,
        // or the UI is configured. Check the seekbar for a detailed description.
        player.addEventHandler(player.EVENT.ON_PLAYER_RESIZE, function () {
            _this.refreshPlaybackPosition();
        });
        player.addEventHandler(player.EVENT.ON_READY, function () {
            _this.refreshPlaybackPosition();
        });
        uimanager.onConfigured.subscribe(function () {
            _this.refreshPlaybackPosition();
        });
        // Init volume bar
        volumeChangeHandler();
    };
    VolumeSlider.prototype.detectVolumeControlAvailability = function () {
        /*
         * "On iOS devices, the audio level is always under the user’s physical control. The volume property is not
         * settable in JavaScript. Reading the volume property always returns 1."
         * https://developer.apple.com/library/content/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html
         */
        // as muted autoplay gets paused as soon as we unmute it, we may not touch the volume of the actual player so we
        // probe a dummy audio element
        var dummyVideoElement = document.createElement('video');
        // try setting the volume to 0.7 and if it's still 1 we are on a volume control restricted device
        dummyVideoElement.volume = 0.7;
        return dummyVideoElement.volume !== 1;
    };
    return VolumeSlider;
}(seekbar_1.SeekBar));
VolumeSlider.issuerName = 'ui';
exports.VolumeSlider = VolumeSlider;


/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var label_1 = __webpack_require__(6);
/**
 * Enumerates the types of content that the {@link MetadataLabel} can display.
 */
var MetadataLabelContent;
(function (MetadataLabelContent) {
    /**
     * Title of the data source.
     */
    MetadataLabelContent[MetadataLabelContent["Title"] = 0] = "Title";
    /**
     * Description fo the data source.
     */
    MetadataLabelContent[MetadataLabelContent["Description"] = 1] = "Description";
})(MetadataLabelContent = exports.MetadataLabelContent || (exports.MetadataLabelContent = {}));
/**
 * A label that can be configured to display certain metadata.
 */
var MetadataLabel = (function (_super) {
    __extends(MetadataLabel, _super);
    function MetadataLabel(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClasses: ['label-metadata', 'label-metadata-' + MetadataLabelContent[config.content].toLowerCase()],
        }, _this.config);
        return _this;
    }
    MetadataLabel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var uiconfig = uimanager.getConfig();
        var init = function () {
            switch (config.content) {
                case MetadataLabelContent.Title:
                    _this.setText(uiconfig.metadata.title);
                    break;
                case MetadataLabelContent.Description:
                    _this.setText(uiconfig.metadata.description);
                    break;
            }
        };
        var unload = function () {
            _this.setText(null);
        };
        // Init label
        init();
        // Reinit label when a new source is loaded
        player.addEventHandler(player.EVENT.ON_SOURCE_LOADED, init);
        // Clear labels when source is unloaded
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, unload);
    };
    return MetadataLabel;
}(label_1.Label));
exports.MetadataLabel = MetadataLabel;


/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(7);
/**
 * A click overlay that opens an url in a new tab if clicked.
 */
var ClickOverlay = (function (_super) {
    __extends(ClickOverlay, _super);
    function ClickOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-clickoverlay',
        }, _this.config);
        return _this;
    }
    ClickOverlay.prototype.initialize = function () {
        _super.prototype.initialize.call(this);
        this.setUrl(this.config.url);
        var element = this.getDomElement();
        element.on('click', function () {
            if (element.data('url')) {
                window.open(element.data('url'), '_blank');
            }
        });
    };
    /**
     * Gets the URL that should be followed when the watermark is clicked.
     * @returns {string} the watermark URL
     */
    ClickOverlay.prototype.getUrl = function () {
        return this.getDomElement().data('url');
    };
    ClickOverlay.prototype.setUrl = function (url) {
        if (url === undefined || url == null) {
            url = '';
        }
        this.getDomElement().data('url', url);
    };
    return ClickOverlay;
}(button_1.Button));
exports.ClickOverlay = ClickOverlay;


/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(5);
/**
 * A button that toggles the player between windowed and fullscreen view.
 */
var FullscreenToggleButton = (function (_super) {
    __extends(FullscreenToggleButton, _super);
    function FullscreenToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-fullscreentogglebutton',
            text: 'Fullscreen',
        }, _this.config);
        return _this;
    }
    FullscreenToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var fullscreenStateHandler = function () {
            if (player.isFullscreen()) {
                _this.on();
            }
            else {
                _this.off();
            }
        };
        player.addEventHandler(player.EVENT.ON_FULLSCREEN_ENTER, fullscreenStateHandler);
        player.addEventHandler(player.EVENT.ON_FULLSCREEN_EXIT, fullscreenStateHandler);
        this.onClick.subscribe(function () {
            if (player.isFullscreen()) {
                player.exitFullscreen();
            }
            else {
                player.enterFullscreen();
            }
        });
        // Startup init
        fullscreenStateHandler();
    };
    return FullscreenToggleButton;
}(togglebutton_1.ToggleButton));
exports.FullscreenToggleButton = FullscreenToggleButton;


/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(5);
/**
 * A button that toggles the video view between normal/mono and VR/stereo.
 */
var VRToggleButton = (function (_super) {
    __extends(VRToggleButton, _super);
    function VRToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-vrtogglebutton',
            text: 'VR',
        }, _this.config);
        return _this;
    }
    VRToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var isVRConfigured = function () {
            // VR availability cannot be checked through getVRStatus() because it is asynchronously populated and not
            // available at UI initialization. As an alternative, we check the VR settings in the config.
            // TODO use getVRStatus() through isVRStereoAvailable() once the player has been rewritten and the status is
            // available in ON_READY
            var config = player.getConfig();
            return config.source && config.source.vr && config.source.vr.contentType !== 'none';
        };
        var isVRStereoAvailable = function () {
            return player.getVRStatus().contentType !== 'none';
        };
        var vrStateHandler = function () {
            if (isVRConfigured() && isVRStereoAvailable()) {
                _this.show(); // show button in case it is hidden
                if (player.getVRStatus().isStereo) {
                    _this.on();
                }
                else {
                    _this.off();
                }
            }
            else {
                _this.hide(); // hide button if no stereo mode available
            }
        };
        var vrButtonVisibilityHandler = function () {
            if (isVRConfigured()) {
                _this.show();
            }
            else {
                _this.hide();
            }
        };
        player.addEventHandler(player.EVENT.ON_VR_MODE_CHANGED, vrStateHandler);
        player.addEventHandler(player.EVENT.ON_VR_STEREO_CHANGED, vrStateHandler);
        player.addEventHandler(player.EVENT.ON_VR_ERROR, vrStateHandler);
        // Hide button when VR source goes away
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, vrButtonVisibilityHandler);
        // Show button when a new source is loaded and it's VR
        player.addEventHandler(player.EVENT.ON_READY, vrButtonVisibilityHandler);
        this.onClick.subscribe(function () {
            if (!isVRStereoAvailable()) {
                if (console) {
                    console.log('No VR content');
                }
            }
            else {
                if (player.getVRStatus().isStereo) {
                    player.setVRStereo(false);
                }
                else {
                    player.setVRStereo(true);
                }
            }
        });
        // Set startup visibility
        vrButtonVisibilityHandler();
    };
    return VRToggleButton;
}(togglebutton_1.ToggleButton));
exports.VRToggleButton = VRToggleButton;


/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var label_1 = __webpack_require__(6);
var playerutils_1 = __webpack_require__(12);
var stringutils_1 = __webpack_require__(10);
var PlaybackTimeLabelMode;
(function (PlaybackTimeLabelMode) {
    PlaybackTimeLabelMode[PlaybackTimeLabelMode["CurrentTime"] = 0] = "CurrentTime";
    PlaybackTimeLabelMode[PlaybackTimeLabelMode["TotalTime"] = 1] = "TotalTime";
    PlaybackTimeLabelMode[PlaybackTimeLabelMode["CurrentAndTotalTime"] = 2] = "CurrentAndTotalTime";
})(PlaybackTimeLabelMode = exports.PlaybackTimeLabelMode || (exports.PlaybackTimeLabelMode = {}));
/**
 * A label that display the current playback time and the total time through {@link PlaybackTimeLabel#setTime setTime}
 * or any string through {@link PlaybackTimeLabel#setText setText}.
 */
var PlaybackTimeLabel = (function (_super) {
    __extends(PlaybackTimeLabel, _super);
    function PlaybackTimeLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-playbacktimelabel',
            timeLabelMode: PlaybackTimeLabelMode.CurrentAndTotalTime,
            hideInLivePlayback: false,
        }, _this.config);
        return _this;
    }
    PlaybackTimeLabel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var live = false;
        var liveCssClass = this.prefixCss('ui-playbacktimelabel-live');
        var liveEdgeCssClass = this.prefixCss('ui-playbacktimelabel-live-edge');
        var minWidth = 0;
        var liveClickHandler = function () {
            player.timeShift(0);
        };
        var updateLiveState = function () {
            // Player is playing a live stream when the duration is infinite
            live = player.isLive();
            // Attach/detach live marker class
            if (live) {
                _this.getDomElement().addClass(liveCssClass);
                _this.setText('Live');
                if (config.hideInLivePlayback) {
                    _this.hide();
                }
                _this.onClick.subscribe(liveClickHandler);
                updateLiveTimeshiftState();
            }
            else {
                _this.getDomElement().removeClass(liveCssClass);
                _this.getDomElement().removeClass(liveEdgeCssClass);
                _this.show();
                _this.onClick.unsubscribe(liveClickHandler);
            }
        };
        var updateLiveTimeshiftState = function () {
            if (!live) {
                return;
            }
            // The player is only at the live edge iff the stream is not shifted and it is actually playing or playback has
            // never been started (meaning it isn't paused). A player that is paused is always behind the live edge.
            // An exception is made for live streams without a timeshift window, because here we "stop" playback instead
            // of pausing it (from a UI perspective), so we keep the live edge indicator on because a play would always
            // resume at the live edge.
            var isTimeshifted = player.getTimeShift() < 0;
            var isTimeshiftAvailable = player.getMaxTimeShift() < 0;
            if (!isTimeshifted && (!player.isPaused() || !isTimeshiftAvailable)) {
                _this.getDomElement().addClass(liveEdgeCssClass);
            }
            else {
                _this.getDomElement().removeClass(liveEdgeCssClass);
            }
        };
        var liveStreamDetector = new playerutils_1.PlayerUtils.LiveStreamDetector(player);
        liveStreamDetector.onLiveChanged.subscribe(function (sender, args) {
            live = args.live;
            updateLiveState();
        });
        liveStreamDetector.detect(); // Initial detection
        var playbackTimeHandler = function () {
            if (!live && player.getDuration() !== Infinity) {
                _this.setTime(player.getCurrentTime(), player.getDuration());
            }
            // To avoid 'jumping' in the UI by varying label sizes due to non-monospaced fonts,
            // we gradually increase the min-width with the content to reach a stable size.
            var width = _this.getDomElement().width();
            if (width > minWidth) {
                minWidth = width;
                _this.getDomElement().css({
                    'min-width': minWidth + 'px',
                });
            }
        };
        player.addEventHandler(player.EVENT.ON_TIME_CHANGED, playbackTimeHandler);
        player.addEventHandler(player.EVENT.ON_SEEKED, playbackTimeHandler);
        player.addEventHandler(player.EVENT.ON_CAST_TIME_UPDATED, playbackTimeHandler);
        player.addEventHandler(player.EVENT.ON_TIME_SHIFT, updateLiveTimeshiftState);
        player.addEventHandler(player.EVENT.ON_TIME_SHIFTED, updateLiveTimeshiftState);
        player.addEventHandler(player.EVENT.ON_PLAY, updateLiveTimeshiftState);
        player.addEventHandler(player.EVENT.ON_PAUSED, updateLiveTimeshiftState);
        var init = function () {
            // Reset min-width when a new source is ready (especially for switching VOD/Live modes where the label content
            // changes)
            minWidth = 0;
            _this.getDomElement().css({
                'min-width': null,
            });
            // Set time format depending on source duration
            _this.timeFormat = Math.abs(player.isLive() ? player.getMaxTimeShift() : player.getDuration()) >= 3600 ?
                stringutils_1.StringUtils.FORMAT_HHMMSS : stringutils_1.StringUtils.FORMAT_MMSS;
            // Update time after the format has been set
            playbackTimeHandler();
        };
        player.addEventHandler(player.EVENT.ON_READY, init);
        init();
    };
    /**
     * Sets the current playback time and total duration.
     * @param playbackSeconds the current playback time in seconds
     * @param durationSeconds the total duration in seconds
     */
    PlaybackTimeLabel.prototype.setTime = function (playbackSeconds, durationSeconds) {
        var currentTime = stringutils_1.StringUtils.secondsToTime(playbackSeconds, this.timeFormat);
        var totalTime = stringutils_1.StringUtils.secondsToTime(durationSeconds, this.timeFormat);
        switch (this.config.timeLabelMode) {
            case PlaybackTimeLabelMode.CurrentTime:
                this.setText("" + currentTime);
                break;
            case PlaybackTimeLabelMode.TotalTime:
                this.setText("" + totalTime);
                break;
            case PlaybackTimeLabelMode.CurrentAndTotalTime:
                this.setText(currentTime + " / " + totalTime);
                break;
        }
    };
    /**
     * Sets the current time format
     * @param timeFormat the time format
     */
    PlaybackTimeLabel.prototype.setTimeFormat = function (timeFormat) {
        this.timeFormat = timeFormat;
    };
    return PlaybackTimeLabel;
}(label_1.Label));
exports.PlaybackTimeLabel = PlaybackTimeLabel;


/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(5);
/**
 * A button that toggles visibility of a settings panel.
 */
var SettingsToggleButton = (function (_super) {
    __extends(SettingsToggleButton, _super);
    function SettingsToggleButton(config) {
        var _this = _super.call(this, config) || this;
        if (!config.settingsPanel) {
            throw new Error('Required SettingsPanel is missing');
        }
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-settingstogglebutton',
            text: 'Settings',
            settingsPanel: null,
            autoHideWhenNoActiveSettings: true,
        }, _this.config);
        return _this;
    }
    SettingsToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig(); // TODO fix generics type inference
        var settingsPanel = config.settingsPanel;
        this.onClick.subscribe(function () {
            settingsPanel.toggleHidden();
        });
        settingsPanel.onShow.subscribe(function () {
            // Set toggle status to on when the settings panel shows
            _this.on();
        });
        settingsPanel.onHide.subscribe(function () {
            // Set toggle status to off when the settings panel hides
            _this.off();
        });
        // Handle automatic hiding of the button if there are no settings for the user to interact with
        if (config.autoHideWhenNoActiveSettings) {
            // Setup handler to show/hide button when the settings change
            var settingsPanelItemsChangedHandler = function () {
                if (settingsPanel.hasActiveSettings()) {
                    if (_this.isHidden()) {
                        _this.show();
                    }
                }
                else {
                    if (_this.isShown()) {
                        _this.hide();
                    }
                }
            };
            // Wire the handler to the event
            settingsPanel.onSettingsStateChanged.subscribe(settingsPanelItemsChangedHandler);
            // Call handler for first init at startup
            settingsPanelItemsChangedHandler();
        }
    };
    return SettingsToggleButton;
}(togglebutton_1.ToggleButton));
exports.SettingsToggleButton = SettingsToggleButton;


/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var eventdispatcher_1 = __webpack_require__(3);
var arrayutils_1 = __webpack_require__(11);
var ListSelector = (function (_super) {
    __extends(ListSelector, _super);
    function ListSelector(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.listSelectorEvents = {
            onItemAdded: new eventdispatcher_1.EventDispatcher(),
            onItemRemoved: new eventdispatcher_1.EventDispatcher(),
            onItemSelected: new eventdispatcher_1.EventDispatcher(),
        };
        _this.config = _this.mergeConfig(config, {
            items: [],
            cssClass: 'ui-listselector',
        }, _this.config);
        _this.items = _this.config.items;
        return _this;
    }
    ListSelector.prototype.getItemIndex = function (key) {
        for (var index in this.items) {
            if (key === this.items[index].key) {
                return parseInt(index);
            }
        }
        return -1;
    };
    /**
     * Checks if the specified item is part of this selector.
     * @param key the key of the item to check
     * @returns {boolean} true if the item is part of this selector, else false
     */
    ListSelector.prototype.hasItem = function (key) {
        return this.getItemIndex(key) > -1;
    };
    /**
     * Adds an item to this selector by appending it to the end of the list of items. If an item with the specified
     * key already exists, it is replaced.
     * @param key the key of the item to add
     * @param label the (human-readable) label of the item to add
     */
    ListSelector.prototype.addItem = function (key, label) {
        var listItem = { key: key, label: label };
        // Apply filter function
        if (this.config.filter && !this.config.filter(listItem)) {
            return;
        }
        // Apply translator function
        if (this.config.translator) {
            listItem.label = this.config.translator(listItem);
        }
        this.removeItem(key); // Try to remove key first to get overwrite behavior and avoid duplicate keys
        this.items.push(listItem);
        this.onItemAddedEvent(key);
    };
    /**
     * Removes an item from this selector.
     * @param key the key of the item to remove
     * @returns {boolean} true if removal was successful, false if the item is not part of this selector
     */
    ListSelector.prototype.removeItem = function (key) {
        var index = this.getItemIndex(key);
        if (index > -1) {
            arrayutils_1.ArrayUtils.remove(this.items, this.items[index]);
            this.onItemRemovedEvent(key);
            return true;
        }
        return false;
    };
    /**
     * Selects an item from the items in this selector.
     * @param key the key of the item to select
     * @returns {boolean} true is the selection was successful, false if the selected item is not part of the selector
     */
    ListSelector.prototype.selectItem = function (key) {
        if (key === this.selectedItem) {
            // itemConfig is already selected, suppress any further action
            return true;
        }
        var index = this.getItemIndex(key);
        if (index > -1) {
            this.selectedItem = key;
            this.onItemSelectedEvent(key);
            return true;
        }
        return false;
    };
    /**
     * Returns the key of the selected item.
     * @returns {string} the key of the selected item or null if no item is selected
     */
    ListSelector.prototype.getSelectedItem = function () {
        return this.selectedItem;
    };
    /**
     * Removes all items from this selector.
     */
    ListSelector.prototype.clearItems = function () {
        // local copy for iteration after clear
        var items = this.items;
        // clear items
        this.items = [];
        // clear the selection as the selected item is also removed
        this.selectedItem = null;
        // fire events
        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
            var item = items_1[_i];
            this.onItemRemovedEvent(item.key);
        }
    };
    /**
     * Returns the number of items in this selector.
     * @returns {number}
     */
    ListSelector.prototype.itemCount = function () {
        return Object.keys(this.items).length;
    };
    ListSelector.prototype.onItemAddedEvent = function (key) {
        this.listSelectorEvents.onItemAdded.dispatch(this, key);
    };
    ListSelector.prototype.onItemRemovedEvent = function (key) {
        this.listSelectorEvents.onItemRemoved.dispatch(this, key);
    };
    ListSelector.prototype.onItemSelectedEvent = function (key) {
        this.listSelectorEvents.onItemSelected.dispatch(this, key);
    };
    Object.defineProperty(ListSelector.prototype, "onItemAdded", {
        /**
         * Gets the event that is fired when an item is added to the list of items.
         * @returns {Event<ListSelector<Config>, string>}
         */
        get: function () {
            return this.listSelectorEvents.onItemAdded.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListSelector.prototype, "onItemRemoved", {
        /**
         * Gets the event that is fired when an item is removed from the list of items.
         * @returns {Event<ListSelector<Config>, string>}
         */
        get: function () {
            return this.listSelectorEvents.onItemRemoved.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ListSelector.prototype, "onItemSelected", {
        /**
         * Gets the event that is fired when an item is selected from the list of items.
         * @returns {Event<ListSelector<Config>, string>}
         */
        get: function () {
            return this.listSelectorEvents.onItemSelected.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return ListSelector;
}(component_1.Component));
exports.ListSelector = ListSelector;


/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var settingspanel_1 = __webpack_require__(22);
var fontcolorselectbox_1 = __webpack_require__(35);
var fontopacityselectbox_1 = __webpack_require__(36);
var fontfamilyselectbox_1 = __webpack_require__(37);
var fontsizeselectbox_1 = __webpack_require__(38);
var backgroundcolorselectbox_1 = __webpack_require__(39);
var backgroundopacityselectbox_1 = __webpack_require__(40);
var windowcolorselectbox_1 = __webpack_require__(41);
var windowopacityselectbox_1 = __webpack_require__(42);
var characteredgeselectbox_1 = __webpack_require__(43);
var subtitlesettingsmanager_1 = __webpack_require__(73);
var subtitlesettingsclosebutton_1 = __webpack_require__(45);
var subtitlesettingsresetbutton_1 = __webpack_require__(46);
/**
 * SubtitleSettingsPanel is a settings panel specific to subtitles settings
 **/
var SubtitleSettingsPanel = (function (_super) {
    __extends(SubtitleSettingsPanel, _super);
    function SubtitleSettingsPanel(config) {
        var _this = _super.call(this, config) || this;
        _this.overlay = config.overlay;
        var manager = new subtitlesettingsmanager_1.SubtitleSettingsManager();
        _this.config = _this.mergeConfig(config, {
            components: [
                new settingspanel_1.SettingsPanelItem('Font size', new fontsizeselectbox_1.FontSizeSelectBox({
                    overlay: _this.overlay, settingsManager: manager,
                })),
                new settingspanel_1.SettingsPanelItem('Font family', new fontfamilyselectbox_1.FontFamilySelectBox({
                    overlay: _this.overlay, settingsManager: manager,
                })),
                new settingspanel_1.SettingsPanelItem('Font color', new fontcolorselectbox_1.FontColorSelectBox({
                    overlay: _this.overlay, settingsManager: manager,
                })),
                new settingspanel_1.SettingsPanelItem('Font opacity', new fontopacityselectbox_1.FontOpacitySelectBox({
                    overlay: _this.overlay, settingsManager: manager,
                })),
                new settingspanel_1.SettingsPanelItem('Character edge', new characteredgeselectbox_1.CharacterEdgeSelectBox({
                    overlay: _this.overlay, settingsManager: manager,
                })),
                new settingspanel_1.SettingsPanelItem('Background color', new backgroundcolorselectbox_1.BackgroundColorSelectBox({
                    overlay: _this.overlay, settingsManager: manager,
                })),
                new settingspanel_1.SettingsPanelItem('Background opacity', new backgroundopacityselectbox_1.BackgroundOpacitySelectBox({
                    overlay: _this.overlay, settingsManager: manager,
                })),
                new settingspanel_1.SettingsPanelItem('Window color', new windowcolorselectbox_1.WindowColorSelectBox({
                    overlay: _this.overlay, settingsManager: manager,
                })),
                new settingspanel_1.SettingsPanelItem('Window opacity', new windowopacityselectbox_1.WindowOpacitySelectBox({
                    overlay: _this.overlay, settingsManager: manager,
                })),
                new settingspanel_1.SettingsPanelItem(new subtitlesettingsclosebutton_1.SubtitleSettingsCloseButton({
                    subtitleSettingsPanel: _this, settingsPanel: config.settingsPanel,
                }), new subtitlesettingsresetbutton_1.SubtitleSettingsResetButton({
                    settingsManager: manager,
                })),
            ],
        }, _this.config);
        return _this;
    }
    SubtitleSettingsPanel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.onShow.subscribe(function () {
            _this.overlay.enablePreviewSubtitleLabel();
        });
        this.onHide.subscribe(function () {
            _this.overlay.removePreviewSubtitleLabel();
        });
    };
    return SubtitleSettingsPanel;
}(settingspanel_1.SettingsPanel));
exports.SubtitleSettingsPanel = SubtitleSettingsPanel;


/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingselectbox_1 = __webpack_require__(4);
/**
 * A select box providing a selection of different font colors.
 */
var FontColorSelectBox = (function (_super) {
    __extends(FontColorSelectBox, _super);
    function FontColorSelectBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FontColorSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, 'default');
        this.addItem('white', 'white');
        this.addItem('black', 'black');
        this.addItem('red', 'red');
        this.addItem('green', 'green');
        this.addItem('blue', 'blue');
        this.addItem('cyan', 'cyan');
        this.addItem('yellow', 'yellow');
        this.addItem('magenta', 'magenta');
        var setColorAndOpacity = function () {
            if (_this.settingsManager.fontColor.isSet() && _this.settingsManager.fontOpacity.isSet()) {
                _this.toggleOverlayClass('fontcolor-' + _this.settingsManager.fontColor.value + _this.settingsManager.fontOpacity.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
        };
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.fontColor.value = key;
        });
        this.settingsManager.fontColor.onChanged.subscribe(function (sender, property) {
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.fontColor.isSet()) {
                // ... clear the opacity when the color is not set
                _this.settingsManager.fontOpacity.clear();
            }
            else if (!_this.settingsManager.fontOpacity.isSet()) {
                // ... set an opacity when the color is set
                _this.settingsManager.fontOpacity.value = '100';
            }
            _this.selectItem(property.value);
            setColorAndOpacity();
        });
        this.settingsManager.fontOpacity.onChanged.subscribe(function () {
            setColorAndOpacity();
        });
        // Load initial value
        if (this.settingsManager.fontColor.isSet()) {
            this.selectItem(this.settingsManager.fontColor.value);
        }
    };
    return FontColorSelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.FontColorSelectBox = FontColorSelectBox;


/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingselectbox_1 = __webpack_require__(4);
/**
 * A select box providing a selection of different font colors.
 */
var FontOpacitySelectBox = (function (_super) {
    __extends(FontOpacitySelectBox, _super);
    function FontOpacitySelectBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FontOpacitySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, 'default');
        this.addItem('100', '100%');
        this.addItem('75', '75%');
        this.addItem('50', '50%');
        this.addItem('25', '25%');
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.fontOpacity.value = key;
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.fontOpacity.isSet()) {
                // ... clear the color when the opacity is not set
                _this.settingsManager.fontColor.clear();
            }
            else if (!_this.settingsManager.fontColor.isSet()) {
                // ... set a color when the opacity is set
                _this.settingsManager.fontColor.value = 'white';
            }
        });
        // Update selected item when value is set from somewhere else
        this.settingsManager.fontOpacity.onChanged.subscribe(function (sender, property) {
            _this.selectItem(property.value);
        });
        // Load initial value
        if (this.settingsManager.fontOpacity.isSet()) {
            this.selectItem(this.settingsManager.fontOpacity.value);
        }
    };
    return FontOpacitySelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.FontOpacitySelectBox = FontOpacitySelectBox;


/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingselectbox_1 = __webpack_require__(4);
/**
 * A select box providing a selection of different font family.
 */
var FontFamilySelectBox = (function (_super) {
    __extends(FontFamilySelectBox, _super);
    function FontFamilySelectBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FontFamilySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, 'default');
        this.addItem('monospacedserif', 'monospaced serif');
        this.addItem('proportionalserif', 'proportional serif');
        this.addItem('monospacedsansserif', 'monospaced sans serif');
        this.addItem('proportionalsansserif', 'proportional sans serif');
        this.addItem('casual', 'casual');
        this.addItem('cursive', 'cursive');
        this.addItem('smallcapital', 'small capital');
        this.settingsManager.fontFamily.onChanged.subscribe(function (sender, property) {
            if (property.isSet()) {
                _this.toggleOverlayClass('fontfamily-' + property.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
            // Select the item in case the property was set from outside
            _this.selectItem(property.value);
        });
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.fontFamily.value = key;
        });
        // Load initial value
        if (this.settingsManager.fontFamily.isSet()) {
            this.selectItem(this.settingsManager.fontFamily.value);
        }
    };
    return FontFamilySelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.FontFamilySelectBox = FontFamilySelectBox;


/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingselectbox_1 = __webpack_require__(4);
/**
 * A select box providing a selection of different font colors.
 */
var FontSizeSelectBox = (function (_super) {
    __extends(FontSizeSelectBox, _super);
    function FontSizeSelectBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FontSizeSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, 'default');
        this.addItem('50', '50%');
        this.addItem('75', '75%');
        this.addItem('100', '100%');
        this.addItem('150', '150%');
        this.addItem('200', '200%');
        this.addItem('300', '300%');
        this.addItem('400', '400%');
        this.settingsManager.fontSize.onChanged.subscribe(function (sender, property) {
            if (property.isSet()) {
                _this.toggleOverlayClass('fontsize-' + property.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
            // Select the item in case the property was set from outside
            _this.selectItem(property.value);
        });
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.fontSize.value = key;
        });
        // Load initial value
        if (this.settingsManager.fontSize.isSet()) {
            this.selectItem(this.settingsManager.fontSize.value);
        }
    };
    return FontSizeSelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.FontSizeSelectBox = FontSizeSelectBox;


/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingselectbox_1 = __webpack_require__(4);
/**
 * A select box providing a selection of different background colors.
 */
var BackgroundColorSelectBox = (function (_super) {
    __extends(BackgroundColorSelectBox, _super);
    function BackgroundColorSelectBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BackgroundColorSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, 'default');
        this.addItem('white', 'white');
        this.addItem('black', 'black');
        this.addItem('red', 'red');
        this.addItem('green', 'green');
        this.addItem('blue', 'blue');
        this.addItem('cyan', 'cyan');
        this.addItem('yellow', 'yellow');
        this.addItem('magenta', 'magenta');
        var setColorAndOpacity = function () {
            if (_this.settingsManager.backgroundColor.isSet() && _this.settingsManager.backgroundOpacity.isSet()) {
                _this.toggleOverlayClass('bgcolor-' + _this.settingsManager.backgroundColor.value + _this.settingsManager.backgroundOpacity.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
        };
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.backgroundColor.value = key;
        });
        this.settingsManager.backgroundColor.onChanged.subscribe(function (sender, property) {
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.backgroundColor.isSet()) {
                // ... clear the opacity when the color is not set
                _this.settingsManager.backgroundOpacity.clear();
            }
            else if (!_this.settingsManager.backgroundOpacity.isSet()) {
                // ... set an opacity when the color is set
                _this.settingsManager.backgroundOpacity.value = '100';
            }
            _this.selectItem(property.value);
            setColorAndOpacity();
        });
        this.settingsManager.backgroundOpacity.onChanged.subscribe(function () {
            setColorAndOpacity();
        });
        // Load initial value
        if (this.settingsManager.backgroundColor.isSet()) {
            this.selectItem(this.settingsManager.backgroundColor.value);
        }
    };
    return BackgroundColorSelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.BackgroundColorSelectBox = BackgroundColorSelectBox;


/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingselectbox_1 = __webpack_require__(4);
/**
 * A select box providing a selection of different background opacity.
 */
var BackgroundOpacitySelectBox = (function (_super) {
    __extends(BackgroundOpacitySelectBox, _super);
    function BackgroundOpacitySelectBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BackgroundOpacitySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, 'default');
        this.addItem('100', '100%');
        this.addItem('75', '75%');
        this.addItem('50', '50%');
        this.addItem('25', '25%');
        this.addItem('0', '0%');
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.backgroundOpacity.value = key;
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.backgroundOpacity.isSet()) {
                // ... clear the color when the opacity is not set
                _this.settingsManager.backgroundColor.clear();
            }
            else if (!_this.settingsManager.backgroundColor.isSet()) {
                // ... set a color when the opacity is set
                _this.settingsManager.backgroundColor.value = 'black';
            }
        });
        // Update selected item when value is set from somewhere else
        this.settingsManager.backgroundOpacity.onChanged.subscribe(function (sender, property) {
            _this.selectItem(property.value);
        });
        // Load initial value
        if (this.settingsManager.backgroundOpacity.isSet()) {
            this.selectItem(this.settingsManager.backgroundOpacity.value);
        }
    };
    return BackgroundOpacitySelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.BackgroundOpacitySelectBox = BackgroundOpacitySelectBox;


/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingselectbox_1 = __webpack_require__(4);
/**
 * A select box providing a selection of different background colors.
 */
var WindowColorSelectBox = (function (_super) {
    __extends(WindowColorSelectBox, _super);
    function WindowColorSelectBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    WindowColorSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, 'default');
        this.addItem('white', 'white');
        this.addItem('black', 'black');
        this.addItem('red', 'red');
        this.addItem('green', 'green');
        this.addItem('blue', 'blue');
        this.addItem('cyan', 'cyan');
        this.addItem('yellow', 'yellow');
        this.addItem('magenta', 'magenta');
        var setColorAndOpacity = function () {
            if (_this.settingsManager.windowColor.isSet() && _this.settingsManager.windowOpacity.isSet()) {
                _this.toggleOverlayClass('windowcolor-' + _this.settingsManager.windowColor.value + _this.settingsManager.windowOpacity.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
        };
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.windowColor.value = key;
        });
        this.settingsManager.windowColor.onChanged.subscribe(function (sender, property) {
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.windowColor.isSet()) {
                // ... clear the opacity when the color is not set
                _this.settingsManager.windowOpacity.clear();
            }
            else if (!_this.settingsManager.windowOpacity.isSet()) {
                // ... set an opacity when the color is set
                _this.settingsManager.windowOpacity.value = '100';
            }
            _this.selectItem(property.value);
            setColorAndOpacity();
        });
        this.settingsManager.windowOpacity.onChanged.subscribe(function () {
            setColorAndOpacity();
        });
        // Load initial value
        if (this.settingsManager.windowColor.isSet()) {
            this.selectItem(this.settingsManager.windowColor.value);
        }
    };
    return WindowColorSelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.WindowColorSelectBox = WindowColorSelectBox;


/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingselectbox_1 = __webpack_require__(4);
/**
 * A select box providing a selection of different background opacity.
 */
var WindowOpacitySelectBox = (function (_super) {
    __extends(WindowOpacitySelectBox, _super);
    function WindowOpacitySelectBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    WindowOpacitySelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, 'default');
        this.addItem('100', '100%');
        this.addItem('75', '75%');
        this.addItem('50', '50%');
        this.addItem('25', '25%');
        this.addItem('0', '0%');
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.windowOpacity.value = key;
            // Color and opacity go together, so we need to...
            if (!_this.settingsManager.windowOpacity.isSet()) {
                // ... clear the color when the opacity is not set
                _this.settingsManager.windowColor.clear();
            }
            else if (!_this.settingsManager.windowColor.isSet()) {
                // ... set a color when the opacity is set
                _this.settingsManager.windowColor.value = 'black';
            }
        });
        // Update selected item when value is set from somewhere else
        this.settingsManager.windowOpacity.onChanged.subscribe(function (sender, property) {
            _this.selectItem(property.value);
        });
        // Load initial value
        if (this.settingsManager.windowOpacity.isSet()) {
            this.selectItem(this.settingsManager.windowOpacity.value);
        }
    };
    return WindowOpacitySelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.WindowOpacitySelectBox = WindowOpacitySelectBox;


/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingselectbox_1 = __webpack_require__(4);
/**
 * A select box providing a selection of different character edge.
 */
var CharacterEdgeSelectBox = (function (_super) {
    __extends(CharacterEdgeSelectBox, _super);
    function CharacterEdgeSelectBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CharacterEdgeSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addItem(null, 'default');
        this.addItem('raised', 'raised');
        this.addItem('depressed', 'depressed');
        this.addItem('uniform', 'uniform');
        this.addItem('dropshadowed', 'drop shadowed');
        this.settingsManager.characterEdge.onChanged.subscribe(function (sender, property) {
            if (property.isSet()) {
                _this.toggleOverlayClass('characteredge-' + property.value);
            }
            else {
                _this.toggleOverlayClass(null);
            }
            // Select the item in case the property was set from outside
            _this.selectItem(property.value);
        });
        this.onItemSelected.subscribe(function (sender, key) {
            _this.settingsManager.characterEdge.value = key;
        });
        // Load initial value
        if (this.settingsManager.characterEdge.isSet()) {
            this.selectItem(this.settingsManager.characterEdge.value);
        }
    };
    return CharacterEdgeSelectBox;
}(subtitlesettingselectbox_1.SubtitleSettingSelectBox));
exports.CharacterEdgeSelectBox = CharacterEdgeSelectBox;


/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var StorageUtils;
(function (StorageUtils) {
    var hasLocalStorageCache;
    function hasLocalStorage() {
        if (hasLocalStorageCache) {
            return hasLocalStorageCache;
        }
        // hasLocalStorage is used to safely ensure we can use localStorage
        // taken from https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API#Feature-detecting_localStorage
        var storage = window['localStorage'];
        try {
            var x = '__storage_test__';
            storage.setItem(x, x);
            storage.removeItem(x);
            hasLocalStorageCache = true;
        }
        catch (e) {
            hasLocalStorageCache = e instanceof DOMException && (
            // everything except Firefox
            e.code === 22 ||
                // Firefox
                e.code === 1014 ||
                // test name field too, because code might not be present
                // everything except Firefox
                e.name === 'QuotaExceededError' ||
                // Firefox
                e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&
                // acknowledge QuotaExceededError only if there's something already stored
                storage.length !== 0;
        }
        return hasLocalStorageCache;
    }
    StorageUtils.hasLocalStorage = hasLocalStorage;
    /**
     * Stores a string item into localStorage.
     * @param key the item's key
     * @param data the item's data
     */
    function setItem(key, data) {
        if (StorageUtils.hasLocalStorage()) {
            window.localStorage.setItem(key, data);
        }
    }
    StorageUtils.setItem = setItem;
    /**
     * Gets an item's string value from the localStorage.
     * @param key the key to look up its associated value
     * @return {string | null} Returns the string if found, null if there is no data stored for the key
     */
    function getItem(key) {
        if (StorageUtils.hasLocalStorage()) {
            return window.localStorage.getItem(key);
        }
        else {
            return null;
        }
    }
    StorageUtils.getItem = getItem;
    /**
     * Stores an object into localStorage. The object will be serialized to JSON. The following types are supported
     * in addition to the default types:
     *  - ColorUtils.Color
     *
     * @param key the key to store the data to
     * @param data the object to store
     */
    function setObject(key, data) {
        if (StorageUtils.hasLocalStorage()) {
            var json = JSON.stringify(data);
            setItem(key, json);
        }
    }
    StorageUtils.setObject = setObject;
    /**
     * Gets an object for the given key from localStorage. The object will be deserialized from JSON. Beside the
     * default types, the following types are supported:
     *  - ColorUtils.Color
     *
     * @param key the key to look up its associated object
     * @return {any} Returns the object if found, null otherwise
     */
    function getObject(key) {
        if (StorageUtils.hasLocalStorage()) {
            var json = getItem(key);
            if (key) {
                var object = JSON.parse(json);
                return object;
            }
        }
        return null;
    }
    StorageUtils.getObject = getObject;
})(StorageUtils = exports.StorageUtils || (exports.StorageUtils = {}));


/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingsbutton_1 = __webpack_require__(25);
/**
 * A button that toggles the option menu for subtitles
 */
var SubtitleSettingsCloseButton = (function (_super) {
    __extends(SubtitleSettingsCloseButton, _super);
    function SubtitleSettingsCloseButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-subtitlesettingsclosebutton',
            text: 'Back',
        }, _this.config);
        return _this;
    }
    SubtitleSettingsCloseButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.onClick.subscribe(function () {
            _this.subtitleSettingsPanel.hide();
            _this.settingsPanel.show();
        });
    };
    return SubtitleSettingsCloseButton;
}(subtitlesettingsbutton_1.SubtitleSettingsButton));
exports.SubtitleSettingsCloseButton = SubtitleSettingsCloseButton;


/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(7);
/**
 * A button that resets all subtitle settings to their defaults.
 */
var SubtitleSettingsResetButton = (function (_super) {
    __extends(SubtitleSettingsResetButton, _super);
    function SubtitleSettingsResetButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-subtitlesettingsresetbutton',
            text: 'Reset',
        }, _this.config);
        return _this;
    }
    SubtitleSettingsResetButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.onClick.subscribe(function () {
            _this.config.settingsManager.reset();
        });
    };
    return SubtitleSettingsResetButton;
}(button_1.Button));
exports.SubtitleSettingsResetButton = SubtitleSettingsResetButton;


/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var dom_1 = __webpack_require__(1);
var SubtitleSettingsLabel = (function (_super) {
    __extends(SubtitleSettingsLabel, _super);
    function SubtitleSettingsLabel(config) {
        var _this = _super.call(this, config) || this;
        _this.opener = config.opener;
        _this.text = config.text;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-label',
            components: [
                _this.opener,
            ],
        }, _this.config);
        return _this;
    }
    SubtitleSettingsLabel.prototype.toDomElement = function () {
        var labelElement = new dom_1.DOM('span', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        }).append(new dom_1.DOM('span', {}).html(this.text), this.opener.getDomElement());
        return labelElement;
    };
    return SubtitleSettingsLabel;
}(container_1.Container));
exports.SubtitleSettingsLabel = SubtitleSettingsLabel;


/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var subtitlesettingsbutton_1 = __webpack_require__(25);
/**
 * A button that toggles the option menu for subtitles
 */
var SubtitleSettingsOpenButton = (function (_super) {
    __extends(SubtitleSettingsOpenButton, _super);
    function SubtitleSettingsOpenButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-subtitlesettingsopenbutton',
            text: 'Subtitles settings',
        }, _this.config);
        return _this;
    }
    SubtitleSettingsOpenButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.onClick.subscribe(function () {
            _this.subtitleSettingsPanel.show();
            _this.settingsPanel.hide();
        });
    };
    return SubtitleSettingsOpenButton;
}(subtitlesettingsbutton_1.SubtitleSettingsButton));
exports.SubtitleSettingsOpenButton = SubtitleSettingsOpenButton;


/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var selectbox_1 = __webpack_require__(8);
/**
 * A select box providing a selection between available audio tracks (e.g. different languages).
 */
var AudioTrackSelectBox = (function (_super) {
    __extends(AudioTrackSelectBox, _super);
    function AudioTrackSelectBox(config) {
        if (config === void 0) { config = {}; }
        return _super.call(this, config) || this;
    }
    AudioTrackSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var selectCurrentAudioTrack = function () {
            var currentAudioTrack = player.getAudio();
            // HLS streams don't always provide this, so we have to check
            if (currentAudioTrack) {
                _this.selectItem(currentAudioTrack.id);
            }
        };
        var updateAudioTracks = function () {
            var audioTracks = player.getAvailableAudio();
            _this.clearItems();
            // Add audio tracks
            for (var _i = 0, audioTracks_1 = audioTracks; _i < audioTracks_1.length; _i++) {
                var audioTrack = audioTracks_1[_i];
                _this.addItem(audioTrack.id, audioTrack.label);
            }
            // Select the correct audio track after the tracks have been added
            // This is also important in case we missed the `ON_AUDIO_CHANGED` event, e.g. when `playback.audioLanguage`
            // is configured but the event is fired before the UI is created.
            selectCurrentAudioTrack();
        };
        this.onItemSelected.subscribe(function (sender, value) {
            player.setAudio(value);
        });
        // Update selection when selected track has changed
        player.addEventHandler(player.EVENT.ON_AUDIO_CHANGED, selectCurrentAudioTrack);
        // Update tracks when source goes away
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, updateAudioTracks);
        // Update tracks when a new source is loaded
        player.addEventHandler(player.EVENT.ON_READY, updateAudioTracks);
        // Update tracks when the period within a source changes
        player.addEventHandler(player.EVENT.ON_PERIOD_SWITCHED, updateAudioTracks);
        // Update tracks when a track is added or removed (since player 7.1.4)
        if (player.EVENT.ON_AUDIO_ADDED && player.EVENT.ON_AUDIO_REMOVED) {
            player.addEventHandler(player.EVENT.ON_AUDIO_ADDED, updateAudioTracks);
            player.addEventHandler(player.EVENT.ON_AUDIO_REMOVED, updateAudioTracks);
        }
        // Populate tracks at startup
        updateAudioTracks();
    };
    return AudioTrackSelectBox;
}(selectbox_1.SelectBox));
exports.AudioTrackSelectBox = AudioTrackSelectBox;


/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var label_1 = __webpack_require__(6);
var component_1 = __webpack_require__(2);
var stringutils_1 = __webpack_require__(10);
var imageloader_1 = __webpack_require__(74);
/**
 * A label for a {@link SeekBar} that can display the seek target time, a thumbnail, and title (e.g. chapter title).
 */
var SeekBarLabel = (function (_super) {
    __extends(SeekBarLabel, _super);
    function SeekBarLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.timeLabel = new label_1.Label({ cssClasses: ['seekbar-label-time'] });
        _this.titleLabel = new label_1.Label({ cssClasses: ['seekbar-label-title'] });
        _this.thumbnail = new component_1.Component({ cssClasses: ['seekbar-thumbnail'] });
        _this.thumbnailImageLoader = new imageloader_1.ImageLoader();
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-seekbar-label',
            components: [new container_1.Container({
                    components: [
                        _this.thumbnail,
                        new container_1.Container({
                            components: [_this.titleLabel, _this.timeLabel],
                            cssClass: 'seekbar-label-metadata',
                        })
                    ],
                    cssClass: 'seekbar-label-inner',
                })],
            hidden: true,
        }, _this.config);
        return _this;
    }
    SeekBarLabel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var appliedMarkerCssClasses = [];
        uimanager.onSeekPreview.subscribeRateLimited(function (sender, args) {
            if (player.isLive()) {
                var maxTimeShift = player.getMaxTimeShift();
                var time = maxTimeShift - maxTimeShift * (args.position / 100);
                _this.setTime(time);
            }
            else {
                if (args.marker) {
                    _this.setTitleText(args.marker.marker.title);
                }
                else {
                    _this.setTitleText(null);
                }
                var time = player.getDuration() * (args.position / 100);
                _this.setTime(time);
                _this.setThumbnail(player.getThumb(time));
            }
            // Remove CSS classes from previous marker
            if (appliedMarkerCssClasses.length > 0) {
                _this.getDomElement().removeClass(appliedMarkerCssClasses.join(' '));
                appliedMarkerCssClasses = [];
            }
            // Add CSS classes of current marker
            if (args.marker) {
                var cssClasses = (args.marker.marker.cssClasses || []).map(function (cssClass) { return _this.prefixCss(cssClass); });
                _this.getDomElement().addClass(cssClasses.join(' '));
                appliedMarkerCssClasses = cssClasses;
            }
        }, 100);
        var init = function () {
            // Set time format depending on source duration
            _this.timeFormat = Math.abs(player.isLive() ? player.getMaxTimeShift() : player.getDuration()) >= 3600 ?
                stringutils_1.StringUtils.FORMAT_HHMMSS : stringutils_1.StringUtils.FORMAT_MMSS;
        };
        player.addEventHandler(player.EVENT.ON_READY, init);
        init();
    };
    /**
     * Sets arbitrary text on the label.
     * @param text the text to show on the label
     */
    SeekBarLabel.prototype.setText = function (text) {
        this.timeLabel.setText(text);
    };
    /**
     * Sets a time to be displayed on the label.
     * @param seconds the time in seconds to display on the label
     */
    SeekBarLabel.prototype.setTime = function (seconds) {
        this.setText(stringutils_1.StringUtils.secondsToTime(seconds, this.timeFormat));
    };
    /**
     * Sets the text on the title label.
     * @param text the text to show on the label
     */
    SeekBarLabel.prototype.setTitleText = function (text) {
        this.titleLabel.setText(text);
    };
    /**
     * Sets or removes a thumbnail on the label.
     * @param thumbnail the thumbnail to display on the label or null to remove a displayed thumbnail
     */
    SeekBarLabel.prototype.setThumbnail = function (thumbnail) {
        if (thumbnail === void 0) { thumbnail = null; }
        var thumbnailElement = this.thumbnail.getDomElement();
        if (thumbnail == null) {
            thumbnailElement.css({
                'background-image': null,
                'display': null,
                'width': null,
                'height': null,
            });
        }
        else {
            // We use the thumbnail image loader to make sure the thumbnail is loaded and it's size is known before be can
            // calculate the CSS properties and set them on the element.
            this.thumbnailImageLoader.load(thumbnail.url, function (url, width, height) {
                var thumbnailCountX = width / thumbnail.w;
                var thumbnailCountY = height / thumbnail.h;
                var thumbnailIndexX = thumbnail.x / thumbnail.w;
                var thumbnailIndexY = thumbnail.y / thumbnail.h;
                var sizeX = 100 * thumbnailCountX;
                var sizeY = 100 * thumbnailCountY;
                var offsetX = 100 * thumbnailIndexX;
                var offsetY = 100 * thumbnailIndexY;
                var aspectRatio = 1 / thumbnail.w * thumbnail.h;
                // The thumbnail size is set by setting the CSS 'width' and 'padding-bottom' properties. 'padding-bottom' is
                // used because it is relative to the width and can be used to set the aspect ratio of the thumbnail.
                // A default value for width is set in the stylesheet and can be overwritten from there or anywhere else.
                thumbnailElement.css({
                    'display': 'inherit',
                    'background-image': "url(" + thumbnail.url + ")",
                    'padding-bottom': 100 * aspectRatio + "%",
                    'background-size': sizeX + "% " + sizeY + "%",
                    'background-position': "-" + offsetX + "% -" + offsetY + "%",
                });
            });
        }
    };
    return SeekBarLabel;
}(container_1.Container));
exports.SeekBarLabel = SeekBarLabel;


/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var selectbox_1 = __webpack_require__(8);
/**
 * A select box providing a selection between available subtitle and caption tracks.
 */
var SubtitleSelectBox = (function (_super) {
    __extends(SubtitleSelectBox, _super);
    function SubtitleSelectBox(config) {
        if (config === void 0) { config = {}; }
        return _super.call(this, config) || this;
    }
    SubtitleSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var selectCurrentSubtitle = function () {
            var currentSubtitle = player.getSubtitle();
            if (currentSubtitle) {
                _this.selectItem(currentSubtitle.id);
            }
        };
        var updateSubtitles = function () {
            _this.clearItems();
            for (var _i = 0, _a = player.getAvailableSubtitles(); _i < _a.length; _i++) {
                var subtitle = _a[_i];
                _this.addItem(subtitle.id, subtitle.label);
            }
            // Select the correct subtitle after the subtitles have been added
            selectCurrentSubtitle();
        };
        this.onItemSelected.subscribe(function (sender, value) {
            player.setSubtitle(value === 'null' ? null : value);
        });
        // React to API events
        player.addEventHandler(player.EVENT.ON_SUBTITLE_ADDED, updateSubtitles);
        player.addEventHandler(player.EVENT.ON_SUBTITLE_CHANGED, selectCurrentSubtitle);
        player.addEventHandler(player.EVENT.ON_SUBTITLE_REMOVED, updateSubtitles);
        // Update subtitles when source goes away
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, updateSubtitles);
        // Update subtitles when a new source is loaded
        player.addEventHandler(player.EVENT.ON_READY, updateSubtitles);
        // Update subtitles when the period within a source changes
        player.addEventHandler(player.EVENT.ON_PERIOD_SWITCHED, updateSubtitles);
        // Populate subtitles at startup
        updateSubtitles();
    };
    return SubtitleSelectBox;
}(selectbox_1.SelectBox));
exports.SubtitleSelectBox = SubtitleSelectBox;


/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var label_1 = __webpack_require__(6);
var controlbar_1 = __webpack_require__(19);
var eventdispatcher_1 = __webpack_require__(3);
/**
 * Overlays the player to display subtitles.
 */
var SubtitleOverlay = (function (_super) {
    __extends(SubtitleOverlay, _super);
    function SubtitleOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.preprocessLabelEventCallback = new eventdispatcher_1.EventDispatcher();
        _this.previewSubtitleActive = false;
        _this.previewSubtitle = new SubtitleLabel({ text: 'example subtitle' });
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-subtitle-overlay',
        }, _this.config);
        return _this;
    }
    SubtitleOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var subtitleManager = new ActiveSubtitleManager();
        this.subtitleManager = subtitleManager;
        player.addEventHandler(player.EVENT.ON_CUE_ENTER, function (event) {
            // Sanitize cue data (must be done before the cue ID is generated in subtitleManager.cueEnter)
            if (event.position) {
                // Sometimes the positions are undefined, we assume them to be zero
                event.position.row = event.position.row || 0;
                event.position.column = event.position.column || 0;
            }
            var labelToAdd = subtitleManager.cueEnter(event);
            _this.preprocessLabelEventCallback.dispatch(event, labelToAdd);
            if (_this.previewSubtitleActive) {
                _this.removeComponent(_this.previewSubtitle);
            }
            _this.addComponent(labelToAdd);
            _this.updateComponents();
            _this.show();
        });
        player.addEventHandler(player.EVENT.ON_CUE_EXIT, function (event) {
            var labelToRemove = subtitleManager.cueExit(event);
            if (labelToRemove) {
                _this.removeComponent(labelToRemove);
                _this.updateComponents();
            }
            if (!subtitleManager.hasCues) {
                if (!_this.previewSubtitleActive) {
                    _this.hide();
                }
                else {
                    _this.addComponent(_this.previewSubtitle);
                    _this.updateComponents();
                }
            }
        });
        var subtitleClearHandler = function () {
            _this.hide();
            subtitleManager.clear();
            _this.removeComponents();
            _this.updateComponents();
        };
        player.addEventHandler(player.EVENT.ON_AUDIO_CHANGED, subtitleClearHandler);
        player.addEventHandler(player.EVENT.ON_SUBTITLE_CHANGED, subtitleClearHandler);
        player.addEventHandler(player.EVENT.ON_SEEK, subtitleClearHandler);
        player.addEventHandler(player.EVENT.ON_TIME_SHIFT, subtitleClearHandler);
        player.addEventHandler(player.EVENT.ON_PLAYBACK_FINISHED, subtitleClearHandler);
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, subtitleClearHandler);
        uimanager.onComponentShow.subscribe(function (component) {
            if (component instanceof controlbar_1.ControlBar) {
                _this.getDomElement().addClass(_this.prefixCss(SubtitleOverlay.CLASS_CONTROLBAR_VISIBLE));
            }
        });
        uimanager.onComponentHide.subscribe(function (component) {
            if (component instanceof controlbar_1.ControlBar) {
                _this.getDomElement().removeClass(_this.prefixCss(SubtitleOverlay.CLASS_CONTROLBAR_VISIBLE));
            }
        });
        this.configureCea608Captions(player, uimanager);
        // Init
        subtitleClearHandler();
    };
    SubtitleOverlay.prototype.configureCea608Captions = function (player, uimanager) {
        var _this = this;
        // The calculated font size
        var fontSize = 0;
        // The required letter spacing spread the text characters evenly across the grid
        var fontLetterSpacing = 0;
        // Flag telling if a font size calculation is required of if the current values are valid
        var fontSizeCalculationRequired = true;
        // Flag telling if the CEA-608 mode is enabled
        var enabled = false;
        var updateCEA608FontSize = function () {
            var dummyLabel = new SubtitleLabel({ text: 'X' });
            dummyLabel.getDomElement().css({
                // By using a large font size we do not need to use multiple letters and can get still an
                // accurate measurement even though the returned size is an integer value
                'font-size': '200px',
                'line-height': '200px',
                'visibility': 'hidden',
            });
            _this.addComponent(dummyLabel);
            _this.updateComponents();
            _this.show();
            var dummyLabelCharWidth = dummyLabel.getDomElement().width();
            var dummyLabelCharHeight = dummyLabel.getDomElement().height();
            var fontSizeRatio = dummyLabelCharWidth / dummyLabelCharHeight;
            _this.removeComponent(dummyLabel);
            _this.updateComponents();
            if (!_this.subtitleManager.hasCues) {
                _this.hide();
            }
            // We subtract 1px here to avoid line breaks at the right border of the subtitle overlay that can happen
            // when texts contain whitespaces. It's probably some kind of pixel rounding issue in the browser's
            // layouting, but the actual reason could not be determined. Aiming for a target width - 1px would work in
            // most browsers, but Safari has a "quantized" font size rendering with huge steps in between so we need
            // to subtract some more pixels to avoid line breaks there as well.
            var subtitleOverlayWidth = _this.getDomElement().width() - 10;
            var subtitleOverlayHeight = _this.getDomElement().height();
            // The size ratio of the letter grid
            var fontGridSizeRatio = (dummyLabelCharWidth * SubtitleOverlay.CEA608_NUM_COLUMNS) /
                (dummyLabelCharHeight * SubtitleOverlay.CEA608_NUM_ROWS);
            // The size ratio of the available space for the grid
            var subtitleOverlaySizeRatio = subtitleOverlayWidth / subtitleOverlayHeight;
            if (subtitleOverlaySizeRatio > fontGridSizeRatio) {
                // When the available space is wider than the text grid, the font size is simply
                // determined by the height of the available space.
                fontSize = subtitleOverlayHeight / SubtitleOverlay.CEA608_NUM_ROWS;
                // Calculate the additional letter spacing required to evenly spread the text across the grid's width
                var gridSlotWidth = subtitleOverlayWidth / SubtitleOverlay.CEA608_NUM_COLUMNS;
                var fontCharWidth = fontSize * fontSizeRatio;
                fontLetterSpacing = gridSlotWidth - fontCharWidth;
            }
            else {
                // When the available space is not wide enough, texts would vertically overlap if we take
                // the height as a base for the font size, so we need to limit the height. We do that
                // by determining the font size by the width of the available space.
                fontSize = subtitleOverlayWidth / SubtitleOverlay.CEA608_NUM_COLUMNS / fontSizeRatio;
                fontLetterSpacing = 0;
            }
            // Update font-size of all active subtitle labels
            for (var _i = 0, _a = _this.getComponents(); _i < _a.length; _i++) {
                var label = _a[_i];
                if (label instanceof SubtitleLabel) {
                    label.getDomElement().css({
                        'font-size': fontSize + "px",
                        'letter-spacing': fontLetterSpacing + "px",
                    });
                }
            }
        };
        player.addEventHandler(player.EVENT.ON_PLAYER_RESIZE, function () {
            if (enabled) {
                updateCEA608FontSize();
            }
            else {
                fontSizeCalculationRequired = true;
            }
        });
        this.preprocessLabelEventCallback.subscribe(function (event, label) {
            var isCEA608 = event.position != null;
            if (!isCEA608) {
                // Skip all non-CEA608 cues
                return;
            }
            if (!enabled) {
                enabled = true;
                _this.getDomElement().addClass(_this.prefixCss(SubtitleOverlay.CLASS_CEA_608));
                // We conditionally update the font size by this flag here to avoid updating every time a subtitle
                // is added into an empty overlay. Because we reset the overlay when all subtitles are gone, this
                // would trigger an unnecessary update every time, but it's only required under certain conditions,
                // e.g. after the player size has changed.
                if (fontSizeCalculationRequired) {
                    updateCEA608FontSize();
                    fontSizeCalculationRequired = false;
                }
            }
            label.getDomElement().css({
                'left': event.position.column * SubtitleOverlay.CEA608_COLUMN_OFFSET + "%",
                'top': event.position.row * SubtitleOverlay.CEA608_ROW_OFFSET + "%",
                'font-size': fontSize + "px",
                'letter-spacing': fontLetterSpacing + "px",
            });
        });
        var reset = function () {
            _this.getDomElement().removeClass(_this.prefixCss(SubtitleOverlay.CLASS_CEA_608));
            enabled = false;
        };
        player.addEventHandler(player.EVENT.ON_CUE_EXIT, function () {
            if (!_this.subtitleManager.hasCues) {
                // Disable CEA-608 mode when all subtitles are gone (to allow correct formatting and
                // display of other types of subtitles, e.g. the formatting preview subtitle)
                reset();
            }
        });
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, reset);
        player.addEventHandler(player.EVENT.ON_SUBTITLE_CHANGED, reset);
    };
    SubtitleOverlay.prototype.enablePreviewSubtitleLabel = function () {
        this.previewSubtitleActive = true;
        if (!this.subtitleManager.hasCues) {
            this.addComponent(this.previewSubtitle);
            this.updateComponents();
            this.show();
        }
    };
    SubtitleOverlay.prototype.removePreviewSubtitleLabel = function () {
        this.previewSubtitleActive = false;
        this.removeComponent(this.previewSubtitle);
        this.updateComponents();
    };
    return SubtitleOverlay;
}(container_1.Container));
SubtitleOverlay.CLASS_CONTROLBAR_VISIBLE = 'controlbar-visible';
SubtitleOverlay.CLASS_CEA_608 = 'cea608';
// The number of rows in a cea608 grid
SubtitleOverlay.CEA608_NUM_ROWS = 15;
// The number of columns in a cea608 grid
SubtitleOverlay.CEA608_NUM_COLUMNS = 32;
// The offset in percent for one row (which is also the height of a row)
SubtitleOverlay.CEA608_ROW_OFFSET = 100 / SubtitleOverlay.CEA608_NUM_ROWS;
// The offset in percent for one column (which is also the width of a column)
SubtitleOverlay.CEA608_COLUMN_OFFSET = 100 / SubtitleOverlay.CEA608_NUM_COLUMNS;
exports.SubtitleOverlay = SubtitleOverlay;
var SubtitleLabel = (function (_super) {
    __extends(SubtitleLabel, _super);
    function SubtitleLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-subtitle-label',
        }, _this.config);
        return _this;
    }
    return SubtitleLabel;
}(label_1.Label));
var ActiveSubtitleManager = (function () {
    function ActiveSubtitleManager() {
        this.activeSubtitleCueMap = {};
        this.activeSubtitleCueCount = 0;
    }
    /**
     * Calculates a unique ID for a subtitle cue, which is needed to associate an ON_CUE_ENTER with its ON_CUE_EXIT
     * event so we can remove the correct subtitle in ON_CUE_EXIT when multiple subtitles are active at the same time.
     * The start time plus the text should make a unique identifier, and in the only case where a collision
     * can happen, two similar texts will be displayed at a similar time and a similar position (or without position).
     * The start time should always be known, because it is required to schedule the ON_CUE_ENTER event. The end time
     * must not necessarily be known and therefore cannot be used for the ID.
     * @param event
     * @return {string}
     */
    ActiveSubtitleManager.calculateId = function (event) {
        var id = event.start + '-' + event.text;
        if (event.position) {
            id += '-' + event.position.row + '-' + event.position.column;
        }
        return id;
    };
    /**
     * Adds a subtitle cue to the manager and returns the label that should be added to the subtitle overlay.
     * @param event
     * @return {SubtitleLabel}
     */
    ActiveSubtitleManager.prototype.cueEnter = function (event) {
        var id = ActiveSubtitleManager.calculateId(event);
        var label = new SubtitleLabel({
            // Prefer the HTML subtitle text if set, else use the plain text
            text: event.html || event.text,
        });
        // Create array for id if it does not exist
        this.activeSubtitleCueMap[id] = this.activeSubtitleCueMap[id] || [];
        // Add cue
        this.activeSubtitleCueMap[id].push({ event: event, label: label });
        this.activeSubtitleCueCount++;
        return label;
    };
    /**
     * Returns the label associated with an already added cue.
     * @param event
     * @return {SubtitleLabel}
     */
    ActiveSubtitleManager.prototype.getCues = function (event) {
        var id = ActiveSubtitleManager.calculateId(event);
        var activeSubtitleCues = this.activeSubtitleCueMap[id];
        if (activeSubtitleCues && activeSubtitleCues.length > 0) {
            return activeSubtitleCues.map(function (cue) { return cue.label; });
        }
        else {
            return null;
        }
    };
    /**
     * Removes the subtitle cue from the manager and returns the label that should be removed from the subtitle overlay,
     * or null if there is no associated label existing (e.g. because all labels have been {@link #clear cleared}.
     * @param event
     * @return {SubtitleLabel|null}
     */
    ActiveSubtitleManager.prototype.cueExit = function (event) {
        var id = ActiveSubtitleManager.calculateId(event);
        var activeSubtitleCues = this.activeSubtitleCueMap[id];
        if (activeSubtitleCues && activeSubtitleCues.length > 0) {
            // Remove cue
            /* We apply the FIFO approach here and remove the oldest cue from the associated id. When there are multiple cues
             * with the same id, there is no way to know which one of the cues is to be deleted, so we just hope that FIFO
             * works fine. Theoretically it can happen that two cues with colliding ids are removed at different times, in
             * the wrong order. This rare case has yet to be observed. If it ever gets an issue, we can take the unstable
             * cue end time (which can change between ON_CUE_ENTER and ON_CUE_EXIT IN ON_CUE_UPDATE) and use it as an
             * additional hint to try and remove the correct one of the colliding cues.
             */
            var activeSubtitleCue = activeSubtitleCues.shift();
            this.activeSubtitleCueCount--;
            return activeSubtitleCue.label;
        }
        else {
            return null;
        }
    };
    Object.defineProperty(ActiveSubtitleManager.prototype, "cueCount", {
        /**
         * Returns the number of active subtitle cues.
         * @return {number}
         */
        get: function () {
            // We explicitly count the cues to save an Array.reduce on every cueCount call (which can happen frequently)
            return this.activeSubtitleCueCount;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ActiveSubtitleManager.prototype, "hasCues", {
        /**
         * Returns true if there are active subtitle cues, else false.
         * @return {boolean}
         */
        get: function () {
            return this.cueCount > 0;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Removes all subtitle cues from the manager.
     */
    ActiveSubtitleManager.prototype.clear = function () {
        this.activeSubtitleCueMap = {};
        this.activeSubtitleCueCount = 0;
    };
    return ActiveSubtitleManager;
}());


/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(5);
/**
 * A button that toggles casting to a Cast receiver.
 */
var CastToggleButton = (function (_super) {
    __extends(CastToggleButton, _super);
    function CastToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-casttogglebutton',
            text: 'Google Cast',
        }, _this.config);
        return _this;
    }
    CastToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.onClick.subscribe(function () {
            if (player.isCastAvailable()) {
                if (player.isCasting()) {
                    player.castStop();
                }
                else {
                    player.castVideo();
                }
            }
            else {
                if (console) {
                    console.log('Cast unavailable');
                }
            }
        });
        var castAvailableHander = function () {
            if (player.isCastAvailable()) {
                _this.show();
            }
            else {
                _this.hide();
            }
        };
        player.addEventHandler(player.EVENT.ON_CAST_AVAILABLE, castAvailableHander);
        // Toggle button 'on' state
        player.addEventHandler(player.EVENT.ON_CAST_WAITING_FOR_DEVICE, function () {
            _this.on();
        });
        player.addEventHandler(player.EVENT.ON_CAST_STARTED, function () {
            // When a session is resumed, there is no ON_CAST_START event, so we also need to toggle here for such cases
            _this.on();
        });
        player.addEventHandler(player.EVENT.ON_CAST_STOPPED, function () {
            _this.off();
        });
        // Startup init
        castAvailableHander(); // Hide button if Cast not available
        if (player.isCasting()) {
            this.on();
        }
    };
    return CastToggleButton;
}(togglebutton_1.ToggleButton));
exports.CastToggleButton = CastToggleButton;


/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var label_1 = __webpack_require__(6);
/**
 * Overlays the player and displays the status of a Cast session.
 */
var CastStatusOverlay = (function (_super) {
    __extends(CastStatusOverlay, _super);
    function CastStatusOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.statusLabel = new label_1.Label({ cssClass: 'ui-cast-status-label' });
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-cast-status-overlay',
            components: [_this.statusLabel],
            hidden: true,
        }, _this.config);
        return _this;
    }
    CastStatusOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        player.addEventHandler(player.EVENT.ON_CAST_WAITING_FOR_DEVICE, function (event) {
            _this.show();
            // Get device name and update status text while connecting
            var castDeviceName = event.castPayload.deviceName;
            _this.statusLabel.setText("Connecting to <strong>" + castDeviceName + "</strong>...");
        });
        player.addEventHandler(player.EVENT.ON_CAST_STARTED, function (event) {
            // Session is started or resumed
            // For cases when a session is resumed, we do not receive the previous events and therefore show the status panel
            // here too
            _this.show();
            var castDeviceName = event.deviceName;
            _this.statusLabel.setText("Playing on <strong>" + castDeviceName + "</strong>");
        });
        player.addEventHandler(player.EVENT.ON_CAST_STOPPED, function (event) {
            // Cast session gone, hide the status panel
            _this.hide();
        });
    };
    return CastStatusOverlay;
}(container_1.Container));
exports.CastStatusOverlay = CastStatusOverlay;


/***/ }),
/* 55 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var label_1 = __webpack_require__(6);
var tvnoisecanvas_1 = __webpack_require__(75);
/**
 * Overlays the player and displays error messages.
 */
var ErrorMessageOverlay = (function (_super) {
    __extends(ErrorMessageOverlay, _super);
    function ErrorMessageOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.errorLabel = new label_1.Label({ cssClass: 'ui-errormessage-label' });
        _this.tvNoiseBackground = new tvnoisecanvas_1.TvNoiseCanvas();
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-errormessage-overlay',
            components: [_this.tvNoiseBackground, _this.errorLabel],
            hidden: true,
        }, _this.config);
        return _this;
    }
    ErrorMessageOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        player.addEventHandler(player.EVENT.ON_ERROR, function (event) {
            var message = event.message;
            // Process message translations
            if (config.messages) {
                if (typeof config.messages === 'function') {
                    // Translation function for all errors
                    message = config.messages(event);
                }
                else if (config.messages[event.code]) {
                    // It's not a translation function, so it must be a map of strings or translation functions
                    var customMessage = config.messages[event.code];
                    if (typeof customMessage === 'string') {
                        message = customMessage;
                    }
                    else {
                        // The message is a translation function, so we call it
                        message = customMessage(event);
                    }
                }
            }
            _this.errorLabel.setText(message);
            _this.tvNoiseBackground.start();
            _this.show();
        });
        player.addEventHandler(player.EVENT.ON_SOURCE_LOADED, function (event) {
            if (_this.isShown()) {
                _this.tvNoiseBackground.stop();
                _this.hide();
            }
        });
    };
    ErrorMessageOverlay.prototype.release = function () {
        _super.prototype.release.call(this);
        // Canvas rendering must be explicitly stopped, else it just continues forever and hogs resources
        this.tvNoiseBackground.stop();
    };
    return ErrorMessageOverlay;
}(container_1.Container));
exports.ErrorMessageOverlay = ErrorMessageOverlay;


/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var metadatalabel_1 = __webpack_require__(27);
/**
 * Displays a title bar containing a label with the title of the video.
 */
var TitleBar = (function (_super) {
    __extends(TitleBar, _super);
    function TitleBar(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-titlebar',
            hidden: true,
            components: [
                new metadatalabel_1.MetadataLabel({ content: metadatalabel_1.MetadataLabelContent.Title }),
                new metadatalabel_1.MetadataLabel({ content: metadatalabel_1.MetadataLabelContent.Description }),
            ],
            keepHiddenWithoutMetadata: false,
        }, _this.config);
        return _this;
    }
    TitleBar.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var shouldBeShown = !this.isHidden();
        var hasMetadataText = true; // Flag to track if any metadata label contains text
        var checkMetadataTextAndUpdateVisibility = function () {
            hasMetadataText = false;
            // Iterate through metadata labels and check if at least one of them contains text
            for (var _i = 0, _a = _this.getComponents(); _i < _a.length; _i++) {
                var component = _a[_i];
                if (component instanceof metadatalabel_1.MetadataLabel) {
                    if (!component.isEmpty()) {
                        hasMetadataText = true;
                        break;
                    }
                }
            }
            if (_this.isShown()) {
                // Hide a visible titlebar if it does not contain any text and the hidden flag is set
                if (config.keepHiddenWithoutMetadata && !hasMetadataText) {
                    _this.hide();
                }
            }
            else if (shouldBeShown) {
                // Show a hidden titlebar if it should actually be shown
                _this.show();
            }
        };
        // Listen to text change events to update the hasMetadataText flag when the metadata dynamically changes
        for (var _i = 0, _a = this.getComponents(); _i < _a.length; _i++) {
            var component = _a[_i];
            if (component instanceof metadatalabel_1.MetadataLabel) {
                component.onTextChanged.subscribe(checkMetadataTextAndUpdateVisibility);
            }
        }
        uimanager.onControlsShow.subscribe(function () {
            shouldBeShown = true;
            if (!(config.keepHiddenWithoutMetadata && !hasMetadataText)) {
                _this.show();
            }
        });
        uimanager.onControlsHide.subscribe(function () {
            shouldBeShown = false;
            _this.hide();
        });
        // init
        checkMetadataTextAndUpdateVisibility();
    };
    return TitleBar;
}(container_1.Container));
exports.TitleBar = TitleBar;


/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(1);
var stringutils_1 = __webpack_require__(10);
var hugereplaybutton_1 = __webpack_require__(58);
/**
 * Overlays the player and displays recommended videos.
 */
var RecommendationOverlay = (function (_super) {
    __extends(RecommendationOverlay, _super);
    function RecommendationOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.replayButton = new hugereplaybutton_1.HugeReplayButton();
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-recommendation-overlay',
            hidden: true,
            components: [_this.replayButton],
        }, _this.config);
        return _this;
    }
    RecommendationOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var clearRecommendations = function () {
            for (var _i = 0, _a = _this.getComponents().slice(); _i < _a.length; _i++) {
                var component = _a[_i];
                if (component instanceof RecommendationItem) {
                    _this.removeComponent(component);
                }
            }
            _this.updateComponents();
            _this.getDomElement().removeClass(_this.prefixCss('recommendations'));
        };
        var setupRecommendations = function () {
            clearRecommendations();
            var recommendations = uimanager.getConfig().recommendations;
            if (recommendations.length > 0) {
                var index = 1;
                for (var _i = 0, recommendations_1 = recommendations; _i < recommendations_1.length; _i++) {
                    var item = recommendations_1[_i];
                    _this.addComponent(new RecommendationItem({
                        itemConfig: item,
                        cssClasses: ['recommendation-item-' + (index++)],
                    }));
                }
                _this.updateComponents(); // create container DOM elements
                _this.getDomElement().addClass(_this.prefixCss('recommendations'));
            }
        };
        // Add recommendation when a source is loaded
        player.addEventHandler(player.EVENT.ON_READY, setupRecommendations);
        // Remove recommendations and hide overlay when source is unloaded
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, function () {
            clearRecommendations();
            _this.hide();
        });
        // Display recommendations when playback has finished
        player.addEventHandler(player.EVENT.ON_PLAYBACK_FINISHED, function () {
            // Dismiss ON_PLAYBACK_FINISHED events at the end of ads
            // TODO remove this workaround once issue #1278 is solved
            if (player.isAd()) {
                return;
            }
            _this.show();
        });
        // Hide recommendations when playback starts, e.g. a restart
        player.addEventHandler(player.EVENT.ON_PLAY, function () {
            _this.hide();
        });
        // Init on startup
        setupRecommendations();
    };
    return RecommendationOverlay;
}(container_1.Container));
exports.RecommendationOverlay = RecommendationOverlay;
/**
 * An item of the {@link RecommendationOverlay}. Used only internally in {@link RecommendationOverlay}.
 */
var RecommendationItem = (function (_super) {
    __extends(RecommendationItem, _super);
    function RecommendationItem(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-recommendation-item',
            itemConfig: null,
        }, _this.config);
        return _this;
    }
    RecommendationItem.prototype.toDomElement = function () {
        var config = this.config.itemConfig; // TODO fix generics and get rid of cast
        var itemElement = new dom_1.DOM('a', {
            'id': this.config.id,
            'class': this.getCssClasses(),
            'href': config.url,
        }).css({ 'background-image': "url(" + config.thumbnail + ")" });
        var bgElement = new dom_1.DOM('div', {
            'class': this.prefixCss('background'),
        });
        itemElement.append(bgElement);
        var titleElement = new dom_1.DOM('span', {
            'class': this.prefixCss('title'),
        }).append(new dom_1.DOM('span', {
            'class': this.prefixCss('innertitle'),
        }).html(config.title));
        itemElement.append(titleElement);
        var timeElement = new dom_1.DOM('span', {
            'class': this.prefixCss('duration'),
        }).append(new dom_1.DOM('span', {
            'class': this.prefixCss('innerduration'),
        }).html(config.duration ? stringutils_1.StringUtils.secondsToTime(config.duration) : ''));
        itemElement.append(timeElement);
        return itemElement;
    };
    return RecommendationItem;
}(component_1.Component));


/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(7);
var dom_1 = __webpack_require__(1);
/**
 * A button to play/replay a video.
 */
var HugeReplayButton = (function (_super) {
    __extends(HugeReplayButton, _super);
    function HugeReplayButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-hugereplaybutton',
            text: 'Replay',
        }, _this.config);
        return _this;
    }
    HugeReplayButton.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        this.onClick.subscribe(function () {
            player.play('ui');
        });
    };
    HugeReplayButton.prototype.toDomElement = function () {
        var buttonElement = _super.prototype.toDomElement.call(this);
        // Add child that contains the play button image
        // Setting the image directly on the button does not work together with scaling animations, because the button
        // can cover the whole video player are and scaling would extend it beyond. By adding an inner element, confined
        // to the size if the image, it can scale inside the player without overshooting.
        buttonElement.append(new dom_1.DOM('div', {
            'class': this.prefixCss('image'),
        }));
        return buttonElement;
    };
    return HugeReplayButton;
}(button_1.Button));
exports.HugeReplayButton = HugeReplayButton;


/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var selectbox_1 = __webpack_require__(8);
/**
 * A select box providing a selection of different playback speeds.
 */
var PlaybackSpeedSelectBox = (function (_super) {
    __extends(PlaybackSpeedSelectBox, _super);
    function PlaybackSpeedSelectBox(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.defaultPlaybackSpeeds = [0.25, 0.5, 1, 1.5, 2];
        return _this;
    }
    PlaybackSpeedSelectBox.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        this.addDefaultItems();
        this.onItemSelected.subscribe(function (sender, value) {
            player.setPlaybackSpeed(parseFloat(value));
            _this.selectItem(value);
        });
        var setDefaultValue = function () {
            var playbackSpeed = player.getPlaybackSpeed();
            _this.setSpeed(playbackSpeed);
        };
        // when the player hits onReady again, adjust the playback speed selection
        player.addEventHandler(player.EVENT.ON_READY, setDefaultValue);
        if (player.EVENT.ON_PLAYBACK_SPEED_CHANGED) {
            // Since player 7.8.0
            player.addEventHandler(player.EVENT.ON_PLAYBACK_SPEED_CHANGED, setDefaultValue);
        }
    };
    PlaybackSpeedSelectBox.prototype.setSpeed = function (speed) {
        if (!this.selectItem(String(speed))) {
            // a playback speed was set which is not in the list, add it to the list to show it to the user
            this.clearItems();
            this.addDefaultItems([speed]);
            this.selectItem(String(speed));
        }
    };
    PlaybackSpeedSelectBox.prototype.addDefaultItems = function (customItems) {
        var _this = this;
        if (customItems === void 0) { customItems = []; }
        var sortedSpeeds = this.defaultPlaybackSpeeds.concat(customItems).sort();
        sortedSpeeds.forEach(function (element) {
            if (element !== 1) {
                _this.addItem(String(element), element + "x");
            }
            else {
                _this.addItem(String(element), 'Normal');
            }
        });
    };
    PlaybackSpeedSelectBox.prototype.clearItems = function () {
        this.items = [];
        this.selectedItem = null;
    };
    return PlaybackSpeedSelectBox;
}(selectbox_1.SelectBox));
exports.PlaybackSpeedSelectBox = PlaybackSpeedSelectBox;


/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var component_1 = __webpack_require__(2);
var timeout_1 = __webpack_require__(9);
/**
 * Overlays the player and displays a buffering indicator.
 */
var BufferingOverlay = (function (_super) {
    __extends(BufferingOverlay, _super);
    function BufferingOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.indicators = [
            new component_1.Component({ tag: 'div', cssClass: 'ui-buffering-overlay-indicator' }),
            new component_1.Component({ tag: 'div', cssClass: 'ui-buffering-overlay-indicator' }),
            new component_1.Component({ tag: 'div', cssClass: 'ui-buffering-overlay-indicator' }),
        ];
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-buffering-overlay',
            hidden: true,
            components: _this.indicators,
            showDelayMs: 1000,
        }, _this.config);
        return _this;
    }
    BufferingOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        var overlayShowTimeout = new timeout_1.Timeout(config.showDelayMs, function () {
            _this.show();
        });
        var showOverlay = function () {
            overlayShowTimeout.start();
        };
        var hideOverlay = function () {
            overlayShowTimeout.clear();
            _this.hide();
        };
        player.addEventHandler(player.EVENT.ON_STALL_STARTED, showOverlay);
        player.addEventHandler(player.EVENT.ON_STALL_ENDED, hideOverlay);
        player.addEventHandler(player.EVENT.ON_SOURCE_UNLOADED, hideOverlay);
        // Show overlay if player is already stalled at init
        if (player.isStalled()) {
            this.show();
        }
    };
    return BufferingOverlay;
}(container_1.Container));
exports.BufferingOverlay = BufferingOverlay;


/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var hugeplaybacktogglebutton_1 = __webpack_require__(62);
/**
 * Overlays the player and displays error messages.
 */
var PlaybackToggleOverlay = (function (_super) {
    __extends(PlaybackToggleOverlay, _super);
    function PlaybackToggleOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.playbackToggleButton = new hugeplaybacktogglebutton_1.HugePlaybackToggleButton();
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-playbacktoggle-overlay',
            components: [_this.playbackToggleButton],
        }, _this.config);
        return _this;
    }
    return PlaybackToggleOverlay;
}(container_1.Container));
exports.PlaybackToggleOverlay = PlaybackToggleOverlay;


/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var playbacktogglebutton_1 = __webpack_require__(16);
var dom_1 = __webpack_require__(1);
/**
 * A button that overlays the video and toggles between playback and pause.
 */
var HugePlaybackToggleButton = (function (_super) {
    __extends(HugePlaybackToggleButton, _super);
    function HugePlaybackToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-hugeplaybacktogglebutton',
            text: 'Play/Pause',
        }, _this.config);
        return _this;
    }
    HugePlaybackToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        // Update button state through API events
        _super.prototype.configure.call(this, player, uimanager, false);
        var togglePlayback = function () {
            if (player.isPlaying()) {
                player.pause('ui');
            }
            else {
                player.play('ui');
            }
        };
        var toggleFullscreen = function () {
            if (player.isFullscreen()) {
                player.exitFullscreen();
            }
            else {
                player.enterFullscreen();
            }
        };
        var firstPlay = true;
        var clickTime = 0;
        var doubleClickTime = 0;
        /*
         * YouTube-style toggle button handling
         *
         * The goal is to prevent a short pause or playback interval between a click, that toggles playback, and a
         * double click, that toggles fullscreen. In this naive approach, the first click would e.g. start playback,
         * the second click would be detected as double click and toggle to fullscreen, and as second normal click stop
         * playback, which results is a short playback interval with max length of the double click detection
         * period (usually 500ms).
         *
         * To solve this issue, we defer handling of the first click for 200ms, which is almost unnoticeable to the user,
         * and just toggle playback if no second click (double click) has been registered during this period. If a double
         * click is registered, we just toggle the fullscreen. In the first 200ms, undesired playback changes thus cannot
         * happen. If a double click is registered within 500ms, we undo the playback change and switch fullscreen mode.
         * In the end, this method basically introduces a 200ms observing interval in which playback changes are prevented
         * if a double click happens.
         */
        this.onClick.subscribe(function () {
            // Directly start playback on first click of the button.
            // This is a required workaround for mobile browsers where video playback needs to be triggered directly
            // by the user. A deferred playback start through the timeout below is not considered as user action and
            // therefore ignored by mobile browsers.
            if (firstPlay) {
                // Try to start playback. Then we wait for ON_PLAY and only when it arrives, we disable the firstPlay flag.
                // If we disable the flag here, onClick was triggered programmatically instead of by a user interaction, and
                // playback is blocked (e.g. on mobile devices due to the programmatic play() call), we loose the chance to
                // ever start playback through a user interaction again with this button.
                togglePlayback();
                return;
            }
            var now = Date.now();
            if (now - clickTime < 200) {
                // We have a double click inside the 200ms interval, just toggle fullscreen mode
                toggleFullscreen();
                doubleClickTime = now;
                return;
            }
            else if (now - clickTime < 500) {
                // We have a double click inside the 500ms interval, undo playback toggle and toggle fullscreen mode
                toggleFullscreen();
                togglePlayback();
                doubleClickTime = now;
                return;
            }
            clickTime = now;
            setTimeout(function () {
                if (Date.now() - doubleClickTime > 200) {
                    // No double click detected, so we toggle playback and wait what happens next
                    togglePlayback();
                }
            }, 200);
        });
        player.addEventHandler(player.EVENT.ON_PLAY, function () {
            // Playback has really started, we can disable the flag to switch to normal toggle button handling
            firstPlay = false;
        });
        player.addEventHandler(player.EVENT.ON_WARNING, function (event) {
            // 5008 == Playback could not be started
            if (event.code === 5008) {
                // if playback could not be started, reset the first play flag as we need the user interaction to start
                firstPlay = true;
            }
        });
        // Hide button while initializing a Cast session
        var castInitializationHandler = function (event) {
            if (event.type === player.EVENT.ON_CAST_START) {
                // Hide button when session is being initialized
                _this.hide();
            }
            else {
                // Show button when session is established or initialization was aborted
                _this.show();
            }
        };
        player.addEventHandler(player.EVENT.ON_CAST_START, castInitializationHandler);
        player.addEventHandler(player.EVENT.ON_CAST_STARTED, castInitializationHandler);
        player.addEventHandler(player.EVENT.ON_CAST_STOPPED, castInitializationHandler);
        var suppressPlayButtonTransitionAnimation = function () {
            // Disable the current animation
            _this.setTransitionAnimationsEnabled(false);
            // Enable the transition animations for the next state change
            _this.onToggle.subscribeOnce(function () {
                _this.setTransitionAnimationsEnabled(true);
            });
        };
        // Hide the play button animation when the UI is loaded (it should only be animated on state changes)
        suppressPlayButtonTransitionAnimation();
        var isAutoplayEnabled = player.getConfig().playback && Boolean(player.getConfig().playback.autoplay);
        // We only know if an autoplay attempt is upcoming if the player is not yet ready. It the player is already ready,
        // the attempt might be upcoming or might have already happened, but we don't have to handle that because we can
        // simply rely on isPlaying and the play state events.
        var isAutoplayUpcoming = !player.isReady() && isAutoplayEnabled;
        // Hide the play button when the player is already playing or autoplay is upcoming
        if (player.isPlaying() || isAutoplayUpcoming) {
            // Hide the play button (switch to playing state)
            this.on();
            // Disable the animation of the playing state switch
            suppressPlayButtonTransitionAnimation();
            // Show the play button without an animation if a play attempt is blocked
            player.addEventHandler(player.EVENT.ON_WARNING, function (event) {
                if (event.code === 5008) {
                    suppressPlayButtonTransitionAnimation();
                }
            });
        }
    };
    HugePlaybackToggleButton.prototype.toDomElement = function () {
        var buttonElement = _super.prototype.toDomElement.call(this);
        // Add child that contains the play button image
        // Setting the image directly on the button does not work together with scaling animations, because the button
        // can cover the whole video player are and scaling would extend it beyond. By adding an inner element, confined
        // to the size if the image, it can scale inside the player without overshooting.
        buttonElement.append(new dom_1.DOM('div', {
            'class': this.prefixCss('image'),
        }));
        return buttonElement;
    };
    /**
     * Enables or disables the play state transition animations of the play button image. Can be used to suppress
     * animations.
     * @param {boolean} enabled true to enable the animations (default), false to disable them
     */
    HugePlaybackToggleButton.prototype.setTransitionAnimationsEnabled = function (enabled) {
        var noTransitionAnimationsClass = this.prefixCss('no-transition-animations');
        if (enabled) {
            this.getDomElement().removeClass(noTransitionAnimationsClass);
        }
        else if (!this.getDomElement().hasClass(noTransitionAnimationsClass)) {
            this.getDomElement().addClass(noTransitionAnimationsClass);
        }
    };
    return HugePlaybackToggleButton;
}(playbacktogglebutton_1.PlaybackToggleButton));
exports.HugePlaybackToggleButton = HugePlaybackToggleButton;


/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(7);
/**
 * A button that closes (hides) a configured component.
 */
var CloseButton = (function (_super) {
    __extends(CloseButton, _super);
    function CloseButton(config) {
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-closebutton',
            text: 'Close',
        }, _this.config);
        return _this;
    }
    CloseButton.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        this.onClick.subscribe(function () {
            config.target.hide();
        });
    };
    return CloseButton;
}(button_1.Button));
exports.CloseButton = CloseButton;


/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(5);
/**
 * A button that toggles Apple AirPlay.
 */
var AirPlayToggleButton = (function (_super) {
    __extends(AirPlayToggleButton, _super);
    function AirPlayToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-airplaytogglebutton',
            text: 'Apple AirPlay',
        }, _this.config);
        return _this;
    }
    AirPlayToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        if (!player.isAirplayAvailable) {
            // If the player does not support Airplay (player 7.0), we just hide this component and skip configuration
            this.hide();
            return;
        }
        this.onClick.subscribe(function () {
            if (player.isAirplayAvailable()) {
                player.showAirplayTargetPicker();
            }
            else {
                if (console) {
                    console.log('AirPlay unavailable');
                }
            }
        });
        var airPlayAvailableHandler = function () {
            if (player.isAirplayAvailable()) {
                _this.show();
            }
            else {
                _this.hide();
            }
        };
        player.addEventHandler(player.EVENT.ON_AIRPLAY_AVAILABLE, airPlayAvailableHandler);
        // Startup init
        airPlayAvailableHandler(); // Hide button if AirPlay is not available
    };
    return AirPlayToggleButton;
}(togglebutton_1.ToggleButton));
exports.AirPlayToggleButton = AirPlayToggleButton;


/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var togglebutton_1 = __webpack_require__(5);
/**
 * A button that toggles Apple macOS picture-in-picture mode.
 */
var PictureInPictureToggleButton = (function (_super) {
    __extends(PictureInPictureToggleButton, _super);
    function PictureInPictureToggleButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-piptogglebutton',
            text: 'Picture-in-Picture',
        }, _this.config);
        return _this;
    }
    PictureInPictureToggleButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        if (!player.isPictureInPictureAvailable) {
            // If the player does not support PIP (player 7.0), we just hide this component and skip configuration
            this.hide();
            return;
        }
        this.onClick.subscribe(function () {
            if (player.isPictureInPictureAvailable()) {
                if (player.isPictureInPicture()) {
                    player.exitPictureInPicture();
                }
                else {
                    player.enterPictureInPicture();
                }
            }
            else {
                if (console) {
                    console.log('PIP unavailable');
                }
            }
        });
        var pipAvailableHander = function () {
            if (player.isPictureInPictureAvailable()) {
                _this.show();
            }
            else {
                _this.hide();
            }
        };
        player.addEventHandler(player.EVENT.ON_READY, pipAvailableHander);
        // Toggle button 'on' state
        player.addEventHandler(player.EVENT.ON_PICTURE_IN_PICTURE_ENTER, function () {
            _this.on();
        });
        player.addEventHandler(player.EVENT.ON_PICTURE_IN_PICTURE_EXIT, function () {
            _this.off();
        });
        // Startup init
        pipAvailableHander(); // Hide button if PIP not available
        if (player.isPictureInPicture()) {
            this.on();
        }
    };
    return PictureInPictureToggleButton;
}(togglebutton_1.ToggleButton));
exports.PictureInPictureToggleButton = PictureInPictureToggleButton;


/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(67);
__webpack_require__(70);
module.exports = __webpack_require__(84);


/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var angular = __webpack_require__(13);
var bitdash_controller_1 = __webpack_require__(68);
var bitdash_directive_1 = __webpack_require__(69);
exports.default = angular.module('mi.BitdashPlayer', [])
    .controller('MiBitdashController', bitdash_controller_1.default)
    .directive('miBitdashPlayer', bitdash_directive_1.default);


/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var angular = __webpack_require__(13);
var BitmovinController = (function () {
    function BitmovinController($scope, $log) {
        this.$scope = $scope;
        this.$log = $log;
        this.state = {};
        this.config = {};
        this.options = {};
    }
    BitmovinController.prototype.$onInit = function () {
        this.state = this.$scope.state = {};
        if (angular.isDefined(this.$scope.config) && angular.isDefined(this.$scope.config.key)) {
            this.config = this.$scope.config;
        }
        else {
            this.$log.error("basic config for bitdash player is missing!");
        }
        if (angular.isDefined(this.$scope.options)) {
            this.options = this.$scope.options;
        }
        if (angular.isDefined(this.$scope.webcast)) {
            this.processWebcast(this.$scope.webcast);
        }
    };
    BitmovinController.prototype.processWebcast = function (webcast) {
        var stateProperty = this.options.forcedState || webcast.state;
        if (stateProperty === 'ondemand') {
            var languageIndex_1 = 0;
            webcast.languages.some(function (lang, index) {
                if (webcast.language === lang.language) {
                    languageIndex_1 = index;
                    return true;
                }
            });
            this.state.data = webcast.languages[languageIndex_1].ondemandStateData;
        }
        else {
            this.state.data = webcast[stateProperty + 'StateData'];
        }
        this.config.source = this.getPlayerConfigSource(webcast);
        this.config.style = { ux: false };
    };
    BitmovinController.prototype.getPlayerConfigSource = function (webcast) {
        return webcast.useDVRPlaybackInPostlive && webcast.state === 'postlive' ?
            this.getDVRPlaybackToPostlive(webcast)
            : this.getPlayerConfigSourceByState(webcast);
    };
    BitmovinController.prototype.getDVRPlaybackToPostlive = function (webcast) {
        var hls = webcast['liveStateData'].playout.hlsDvrUrl;
        var title = webcast.name;
        if (angular.isDefined(webcast['postliveStateData'].playout.offset)) {
            var offset = parseInt(webcast['postliveStateData'].playout.offset, 10);
            if (offset) {
                var offsetPrefix = void 0;
                var parser = document.createElement('a');
                parser.href = webcast['liveStateData'].playout.hlsDvrUrl;
                offsetPrefix = (parser.search) ? '&' : '?';
                hls += offsetPrefix + "wowzadvrplayliststart=" + offset + "000";
            }
        }
        return { hls: hls, title: title };
    };
    BitmovinController.prototype.getPlayerConfigSourceByState = function (webcast) {
        var hls = this.state.data.playout.hlsUrl;
        var title = webcast.name;
        var hiveServiceUrl = this.getHiveServiceUrlByLang(webcast);
        if (angular.isDefined(this.state.data.playout.videoManagerHlsUrl) && this.state.data.playout.videoManagerHlsUrl) {
            hls = this.state.data.playout.videoManagerHlsUrl;
        }
        if (angular.isDefined(this.state.data.playout.offset)) {
            var offset = parseInt(this.state.data.playout.offset, 10);
            if (offset > 0) {
                var offsetPrefix = void 0;
                var parser = document.createElement('a');
                parser.href = hls;
                offsetPrefix = (parser.search) ? '&' : '?';
                hls += offsetPrefix + "start=" + offset;
            }
        }
        return hiveServiceUrl ? { title: title, hls_ticket: hiveServiceUrl } : { hls: hls, title: title };
    };
    BitmovinController.prototype.getHiveServiceUrlByLang = function (webcast) {
        var hiveServiceUrl = null;
        if (webcast.languages && webcast.language) {
            webcast.languages.forEach(function (item) {
                if (item.language === webcast.language) {
                    hiveServiceUrl = angular.copy(item.hiveServiceUrl);
                }
            });
        }
        return hiveServiceUrl;
    };
    return BitmovinController;
}());
BitmovinController.$inject = ['$scope', '$log'];
exports.default = BitmovinController;


/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var angular = __webpack_require__(13);
var BitdashDirective = function ($window, $log) { return ({
    controller: 'MiBitdashController',
    controllerAs: 'bitdashVm',
    replace: true,
    restrict: 'EA',
    scope: {
        config: '=',
        options: '=?',
        webcast: '=',
    },
    template: "<div id=\"mi-bitdash-player\" width=\"100%\" height=\"auto\"></div>",
    link: function (scope) {
        var bitmovinPlayer;
        var bitmovinUIManager;
        var bitmovinControlbar;
        var config = scope.config;
        var webcast = scope.webcast;
        buildPlayer();
        function buildPlayer() {
            bitmovinPlayer = $window.window.bitmovin.player('mi-bitdash-player');
            if (angular.isDefined(bitmovinPlayer) && bitmovinPlayer.isReady() === true) {
                bitmovinPlayer.destroy();
                bitmovinPlayer = $window.window.bitmovin.player('mi-bitdash-player');
            }
            if ((webcast.state === 'live') && config.source.hls_ticket) {
                // Get a hive-enabled player through bitdash.initHiveSDN
                $window.window.bitmovin.initHiveSDN(bitmovinPlayer, { debugLevel: 'off' });
            }
            loadPlayer(config);
        }
        function getAudioOnlyPlayerConfig() {
            return webcast.theme.audioOnlyFileUrl ? { audioOnlyOverlayConfig: { backgroundImageUrl: webcast.theme.audioOnlyFileUrl, hiddeIndicator: true } } : {};
        }
        function loadPlayer(conf) {
            bitmovinPlayer.setup(conf)
                .then(function () {
                bitmovinUIManager = $window.window.bitmovin.playerui.UIManager.Factory;
                if (isAudioOnly()) {
                    bitmovinUIManager.buildAudioOnlyUI(bitmovinPlayer, getAudioOnlyPlayerConfig());
                }
                else {
                    bitmovinUIManager.buildAudioVideoUI(bitmovinPlayer);
                }
                bitmovinControlbar = getElementsByClassName('bitmovinplayer-container');
                if (bitmovinControlbar) {
                    bitmovinControlbar.style.minWidth = '175px';
                    bitmovinControlbar.style.minHeight = '101px';
                    document.getElementById('bitmovinplayer-video-mi-bitdash-player').setAttribute('title', webcast.name);
                }
            }, function (reason) {
                $log.log("Error: " + reason.code + " - " + reason.message);
            });
        }
        function isAudioOnly() {
            return webcast.layout.layout === 'audio-only';
        }
        function getElementsByClassName(className) {
            return document.getElementsByClassName(className)[0];
        }
    }
}); };
exports.default = BitdashDirective;
BitdashDirective.$inject = ['$window', '$log'];


/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/// <reference path='player.d.ts' />
var uimanager_1 = __webpack_require__(71);
var button_1 = __webpack_require__(7);
var controlbar_1 = __webpack_require__(19);
var fullscreentogglebutton_1 = __webpack_require__(29);
var hugeplaybacktogglebutton_1 = __webpack_require__(62);
var playbacktimelabel_1 = __webpack_require__(31);
var playbacktogglebutton_1 = __webpack_require__(16);
var seekbar_1 = __webpack_require__(18);
var selectbox_1 = __webpack_require__(8);
var itemselectionlist_1 = __webpack_require__(77);
var settingspanel_1 = __webpack_require__(22);
var settingstogglebutton_1 = __webpack_require__(32);
var togglebutton_1 = __webpack_require__(5);
var videoqualityselectbox_1 = __webpack_require__(23);
var volumetogglebutton_1 = __webpack_require__(17);
var vrtogglebutton_1 = __webpack_require__(30);
var watermark_1 = __webpack_require__(78);
var uicontainer_1 = __webpack_require__(14);
var container_1 = __webpack_require__(0);
var label_1 = __webpack_require__(6);
var audioqualityselectbox_1 = __webpack_require__(24);
var audiotrackselectbox_1 = __webpack_require__(49);
var caststatusoverlay_1 = __webpack_require__(54);
var casttogglebutton_1 = __webpack_require__(53);
var component_1 = __webpack_require__(2);
var errormessageoverlay_1 = __webpack_require__(55);
var recommendationoverlay_1 = __webpack_require__(57);
var seekbarlabel_1 = __webpack_require__(50);
var subtitleoverlay_1 = __webpack_require__(52);
var subtitleselectbox_1 = __webpack_require__(51);
var titlebar_1 = __webpack_require__(56);
var volumecontrolbutton_1 = __webpack_require__(79);
var clickoverlay_1 = __webpack_require__(28);
var adskipbutton_1 = __webpack_require__(80);
var admessagelabel_1 = __webpack_require__(81);
var adclickoverlay_1 = __webpack_require__(82);
var playbackspeedselectbox_1 = __webpack_require__(59);
var hugereplaybutton_1 = __webpack_require__(58);
var bufferingoverlay_1 = __webpack_require__(60);
var castuicontainer_1 = __webpack_require__(83);
var playbacktoggleoverlay_1 = __webpack_require__(61);
var closebutton_1 = __webpack_require__(63);
var metadatalabel_1 = __webpack_require__(27);
var airplaytogglebutton_1 = __webpack_require__(64);
var volumeslider_1 = __webpack_require__(26);
var pictureinpicturetogglebutton_1 = __webpack_require__(65);
var spacer_1 = __webpack_require__(21);
var backgroundcolorselectbox_1 = __webpack_require__(39);
var backgroundopacityselectbox_1 = __webpack_require__(40);
var characteredgeselectbox_1 = __webpack_require__(43);
var fontcolorselectbox_1 = __webpack_require__(35);
var fontfamilyselectbox_1 = __webpack_require__(37);
var fontopacityselectbox_1 = __webpack_require__(36);
var fontsizeselectbox_1 = __webpack_require__(38);
var subtitlesettingsbutton_1 = __webpack_require__(25);
var subtitlesettingsclosebutton_1 = __webpack_require__(45);
var subtitlesettingselectbox_1 = __webpack_require__(4);
var subtitlesettingslabel_1 = __webpack_require__(47);
var subtitlesettingsopenbutton_1 = __webpack_require__(48);
var subtitlesettingspanel_1 = __webpack_require__(34);
var windowcolorselectbox_1 = __webpack_require__(41);
var windowopacityselectbox_1 = __webpack_require__(42);
var arrayutils_1 = __webpack_require__(11);
var stringutils_1 = __webpack_require__(10);
var playerutils_1 = __webpack_require__(12);
var uiutils_1 = __webpack_require__(20);
var browserutils_1 = __webpack_require__(15);
var storageutils_1 = __webpack_require__(44);
var subtitlesettingsresetbutton_1 = __webpack_require__(46);
// Object.assign polyfill for ES5/IE9
// https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/assign
if (typeof Object.assign !== 'function') {
    Object.assign = function (target) {
        'use strict';
        if (target == null) {
            throw new TypeError('Cannot convert undefined or null to object');
        }
        target = Object(target);
        for (var index = 1; index < arguments.length; index++) {
            var source = arguments[index];
            if (source != null) {
                for (var key in source) {
                    if (Object.prototype.hasOwnProperty.call(source, key)) {
                        target[key] = source[key];
                    }
                }
            }
        }
        return target;
    };
}
var playerui = {
    version: '{{VERSION}}',
    // Management
    UIManager: uimanager_1.UIManager,
    UIInstanceManager: uimanager_1.UIInstanceManager,
    // Utils
    ArrayUtils: arrayutils_1.ArrayUtils,
    StringUtils: stringutils_1.StringUtils,
    PlayerUtils: playerutils_1.PlayerUtils,
    UIUtils: uiutils_1.UIUtils,
    BrowserUtils: browserutils_1.BrowserUtils,
    StorageUtils: storageutils_1.StorageUtils,
    // Components
    AdClickOverlay: adclickoverlay_1.AdClickOverlay,
    AdMessageLabel: admessagelabel_1.AdMessageLabel,
    AdSkipButton: adskipbutton_1.AdSkipButton,
    AirPlayToggleButton: airplaytogglebutton_1.AirPlayToggleButton,
    AudioQualitySelectBox: audioqualityselectbox_1.AudioQualitySelectBox,
    AudioTrackSelectBox: audiotrackselectbox_1.AudioTrackSelectBox,
    BufferingOverlay: bufferingoverlay_1.BufferingOverlay,
    Button: button_1.Button,
    CastStatusOverlay: caststatusoverlay_1.CastStatusOverlay,
    CastToggleButton: casttogglebutton_1.CastToggleButton,
    CastUIContainer: castuicontainer_1.CastUIContainer,
    ClickOverlay: clickoverlay_1.ClickOverlay,
    CloseButton: closebutton_1.CloseButton,
    Component: component_1.Component,
    Container: container_1.Container,
    ControlBar: controlbar_1.ControlBar,
    ErrorMessageOverlay: errormessageoverlay_1.ErrorMessageOverlay,
    FullscreenToggleButton: fullscreentogglebutton_1.FullscreenToggleButton,
    HugePlaybackToggleButton: hugeplaybacktogglebutton_1.HugePlaybackToggleButton,
    HugeReplayButton: hugereplaybutton_1.HugeReplayButton,
    Label: label_1.Label,
    MetadataLabel: metadatalabel_1.MetadataLabel,
    MetadataLabelContent: metadatalabel_1.MetadataLabelContent,
    PictureInPictureToggleButton: pictureinpicturetogglebutton_1.PictureInPictureToggleButton,
    PlaybackSpeedSelectBox: playbackspeedselectbox_1.PlaybackSpeedSelectBox,
    PlaybackTimeLabel: playbacktimelabel_1.PlaybackTimeLabel,
    PlaybackTimeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode,
    PlaybackToggleButton: playbacktogglebutton_1.PlaybackToggleButton,
    PlaybackToggleOverlay: playbacktoggleoverlay_1.PlaybackToggleOverlay,
    RecommendationOverlay: recommendationoverlay_1.RecommendationOverlay,
    SeekBar: seekbar_1.SeekBar,
    SeekBarLabel: seekbarlabel_1.SeekBarLabel,
    SelectBox: selectbox_1.SelectBox,
    ItemSelectionList: itemselectionlist_1.ItemSelectionList,
    SettingsPanel: settingspanel_1.SettingsPanel,
    SettingsPanelItem: settingspanel_1.SettingsPanelItem,
    SettingsToggleButton: settingstogglebutton_1.SettingsToggleButton,
    Spacer: spacer_1.Spacer,
    SubtitleOverlay: subtitleoverlay_1.SubtitleOverlay,
    SubtitleSelectBox: subtitleselectbox_1.SubtitleSelectBox,
    TitleBar: titlebar_1.TitleBar,
    ToggleButton: togglebutton_1.ToggleButton,
    UIContainer: uicontainer_1.UIContainer,
    VideoQualitySelectBox: videoqualityselectbox_1.VideoQualitySelectBox,
    VolumeControlButton: volumecontrolbutton_1.VolumeControlButton,
    VolumeSlider: volumeslider_1.VolumeSlider,
    VolumeToggleButton: volumetogglebutton_1.VolumeToggleButton,
    VRToggleButton: vrtogglebutton_1.VRToggleButton,
    Watermark: watermark_1.Watermark,
    // Subtitle related components
    subtitlesettings: {
        BackgroundColorSelectBox: backgroundcolorselectbox_1.BackgroundColorSelectBox,
        BackgroundOpacitySelectBox: backgroundopacityselectbox_1.BackgroundOpacitySelectBox,
        CharacterEdgeSelectBox: characteredgeselectbox_1.CharacterEdgeSelectBox,
        FontColorSelectBox: fontcolorselectbox_1.FontColorSelectBox,
        FontFamilySelectBox: fontfamilyselectbox_1.FontFamilySelectBox,
        FontOpacitySelectBox: fontopacityselectbox_1.FontOpacitySelectBox,
        FontSizeSelectBox: fontsizeselectbox_1.FontSizeSelectBox,
        SubtitleSettingsButton: subtitlesettingsbutton_1.SubtitleSettingsButton,
        SubtitleSettingsCloseButton: subtitlesettingsclosebutton_1.SubtitleSettingsCloseButton,
        SubtitleSettingSelectBox: subtitlesettingselectbox_1.SubtitleSettingSelectBox,
        SubtitleSettingsLabel: subtitlesettingslabel_1.SubtitleSettingsLabel,
        SubtitleSettingsOpenButton: subtitlesettingsopenbutton_1.SubtitleSettingsOpenButton,
        SubtitleSettingsPanel: subtitlesettingspanel_1.SubtitleSettingsPanel,
        WindowColorSelectBox: windowcolorselectbox_1.WindowColorSelectBox,
        WindowOpacitySelectBox: windowopacityselectbox_1.WindowOpacitySelectBox,
        SubtitleSettingsResetButton: subtitlesettingsresetbutton_1.SubtitleSettingsResetButton,
    },
};
window.bitmovin.playerui = playerui;
module.exports = playerui;


/***/ }),
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var uicontainer_1 = __webpack_require__(14);
var dom_1 = __webpack_require__(1);
var container_1 = __webpack_require__(0);
var playbacktogglebutton_1 = __webpack_require__(16);
var fullscreentogglebutton_1 = __webpack_require__(29);
var vrtogglebutton_1 = __webpack_require__(30);
var volumetogglebutton_1 = __webpack_require__(17);
var seekbar_1 = __webpack_require__(18);
var playbacktimelabel_1 = __webpack_require__(31);
var controlbar_1 = __webpack_require__(19);
var eventdispatcher_1 = __webpack_require__(3);
var settingstogglebutton_1 = __webpack_require__(32);
var settingspanel_1 = __webpack_require__(22);
var subtitlesettingspanel_1 = __webpack_require__(34);
var subtitlesettingslabel_1 = __webpack_require__(47);
var subtitlesettingsopenbutton_1 = __webpack_require__(48);
var videoqualityselectbox_1 = __webpack_require__(23);
// import {Watermark} from './components/watermark';
var audioqualityselectbox_1 = __webpack_require__(24);
var audiotrackselectbox_1 = __webpack_require__(49);
var seekbarlabel_1 = __webpack_require__(50);
var volumeslider_1 = __webpack_require__(26);
var subtitleselectbox_1 = __webpack_require__(51);
var subtitleoverlay_1 = __webpack_require__(52);
// import {VolumeControlButton} from './components/volumecontrolbutton';
var casttogglebutton_1 = __webpack_require__(53);
var caststatusoverlay_1 = __webpack_require__(54);
var errormessageoverlay_1 = __webpack_require__(55);
var titlebar_1 = __webpack_require__(56);
var recommendationoverlay_1 = __webpack_require__(57);
var playbackspeedselectbox_1 = __webpack_require__(59);
var bufferingoverlay_1 = __webpack_require__(60);
// import {CastUIContainer} from './components/castuicontainer';
var playbacktoggleoverlay_1 = __webpack_require__(61);
var closebutton_1 = __webpack_require__(63);
var metadatalabel_1 = __webpack_require__(27);
var airplaytogglebutton_1 = __webpack_require__(64);
var pictureinpicturetogglebutton_1 = __webpack_require__(65);
var audioonlyoverlay_1 = __webpack_require__(76);
var spacer_1 = __webpack_require__(21);
var uiutils_1 = __webpack_require__(20);
var arrayutils_1 = __webpack_require__(11);
var browserutils_1 = __webpack_require__(15);
var UIManager = (function () {
    function UIManager(player, playerUiOrUiVariants, config) {
        if (config === void 0) { config = {}; }
        var _this = this;
        this.events = {
            onUiVariantResolve: new eventdispatcher_1.EventDispatcher(),
        };
        if (playerUiOrUiVariants instanceof uicontainer_1.UIContainer) {
            // Single-UI constructor has been called, transform arguments to UIVariant[] signature
            var playerUi = playerUiOrUiVariants;
            var uiVariants = [];
            // Add the default player UI
            uiVariants.push({ ui: playerUi });
            this.uiVariants = uiVariants;
        }
        else {
            // Default constructor (UIVariant[]) has been called
            this.uiVariants = playerUiOrUiVariants;
        }
        this.player = player;
        this.config = __assign({}, config, { events: {
                onUpdated: new eventdispatcher_1.EventDispatcher(),
            } });
        this.managerPlayerWrapper = new PlayerWrapper(player);
        /**
         * Gathers configuration data from the UI config and player source config and creates a merged UI config
         * that is used throughout the UI instance.
         */
        var updateConfig = function () {
            var playerSourceConfig = player.getConfig().source || {};
            var uiConfig = __assign({}, config);
            uiConfig.metadata = uiConfig.metadata || {};
            // Extract the UI-related config properties from the source config
            var playerSourceUiConfig = {
                metadata: {
                    // TODO move metadata into source.metadata namespace in player v8
                    title: playerSourceConfig.title,
                    description: playerSourceConfig.description,
                    markers: playerSourceConfig.markers,
                },
                recommendations: playerSourceConfig.recommendations,
            };
            // Player source config takes precedence over the UI config, because the config in the source is attached
            // to a source which changes with every player.load, whereas the UI config stays the same for the whole
            // lifetime of the player instance.
            _this.config.metadata = _this.config.metadata || {};
            _this.config.metadata.title = playerSourceUiConfig.metadata.title || uiConfig.metadata.title;
            _this.config.metadata.description = playerSourceUiConfig.metadata.description || uiConfig.metadata.description;
            _this.config.metadata.markers = playerSourceUiConfig.metadata.markers || uiConfig.metadata.markers || [];
            _this.config.recommendations = playerSourceUiConfig.recommendations || uiConfig.recommendations || [];
        };
        updateConfig();
        // Update the configuration when a new source is loaded
        this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_SOURCE_LOADED, function () {
            updateConfig();
            _this.config.events.onUpdated.dispatch(_this);
        });
        if (config.container) {
            // Unfortunately 'uiContainerElement = new DOM(config.container)' will not accept the container with
            // string|HTMLElement type directly, although it accepts both types, so we need to spit these two cases up here.
            // TODO check in upcoming TS versions if the container can be passed in directly, or fix the constructor
            this.uiContainerElement = config.container instanceof HTMLElement ?
                new dom_1.DOM(config.container) : new dom_1.DOM(config.container);
        }
        else {
            this.uiContainerElement = new dom_1.DOM(player.getFigure());
        }
        // Create UI instance managers for the UI variants
        // The instance managers map to the corresponding UI variants by their array index
        this.uiInstanceManagers = [];
        var uiVariantsWithoutCondition = [];
        for (var _i = 0, _a = this.uiVariants; _i < _a.length; _i++) {
            var uiVariant = _a[_i];
            if (uiVariant.condition == null) {
                // Collect variants without conditions for error checking
                uiVariantsWithoutCondition.push(uiVariant);
            }
            // Create the instance manager for a UI variant
            this.uiInstanceManagers.push(new InternalUIInstanceManager(player, uiVariant.ui, this.config));
        }
        // Make sure that there is only one UI variant without a condition
        // It does not make sense to have multiple variants without condition, because only the first one in the list
        // (the one with the lowest index) will ever be selected.
        if (uiVariantsWithoutCondition.length > 1) {
            throw Error('Too many UIs without a condition: You cannot have more than one default UI');
        }
        // Make sure that the default UI variant, if defined, is at the end of the list (last index)
        // If it comes earlier, the variants with conditions that come afterwards will never be selected because the
        // default variant without a condition always evaluates to 'true'
        if (uiVariantsWithoutCondition.length > 0
            && uiVariantsWithoutCondition[0] !== this.uiVariants[this.uiVariants.length - 1]) {
            throw Error('Invalid UI variant order: the default UI (without condition) must be at the end of the list');
        }
        // Switch on auto UI resolving by default
        if (config.autoUiVariantResolve === undefined) {
            config.autoUiVariantResolve = true;
        }
        var adStartedEvent = null; // keep the event stored here during ad playback
        // Dynamically select a UI variant that matches the current UI condition.
        var resolveUiVariant = function (event) {
            // Make sure that the ON_AD_STARTED event data is persisted through ad playback in case other events happen
            // in the meantime, e.g. player resize. We need to store this data because there is no other way to find out
            // ad details (e.g. the ad client) while an ad is playing.
            // Existing event data signals that an ad is currently active. We cannot use player.isAd() because it returns
            // true on ad start and also on ad end events, which is problematic.
            if (event != null) {
                switch (event.type) {
                    // When the ad starts, we store the event data
                    case player.EVENT.ON_AD_STARTED:
                        adStartedEvent = event;
                        break;
                    // When the ad ends, we delete the event data
                    case player.EVENT.ON_AD_FINISHED:
                    case player.EVENT.ON_AD_SKIPPED:
                    case player.EVENT.ON_AD_ERROR:
                        adStartedEvent = null;
                        break;
                    // When a new source is loaded during ad playback, there will be no ad end event so we detect the end
                    // of the ad playback by checking isAd() in ON_READY, because ON_READY always arrives when the source
                    // changes.
                    case player.EVENT.ON_READY:
                        if (adStartedEvent && !player.isAd()) {
                            adStartedEvent = null;
                        }
                }
            }
            // Detect if an ad has started
            var ad = adStartedEvent != null;
            var adWithUI = ad && adStartedEvent.clientType === 'vast';
            _this.resolveUiVariant({
                isAd: ad,
                isAdWithUI: adWithUI,
                adClientType: ad ? adStartedEvent.clientType : null,
            }, function (context) {
                // If this is an ad UI, we need to relay the saved ON_AD_STARTED event data so ad components can configure
                // themselves for the current ad.
                if (context.isAd) {
                    /* Relay the ON_AD_STARTED event to the ads UI
                     *
                     * Because the ads UI is initialized in the ON_AD_STARTED handler, i.e. when the ON_AD_STARTED event has
                     * already been fired, components in the ads UI that listen for the ON_AD_STARTED event never receive it.
                     * Since this can break functionality of components that rely on this event, we relay the event to the
                     * ads UI components with the following call.
                     */
                    _this.currentUi.getWrappedPlayer().fireEventInUI(_this.player.EVENT.ON_AD_STARTED, adStartedEvent);
                }
            });
        };
        // Listen to the following events to trigger UI variant resolution
        if (config.autoUiVariantResolve) {
            this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_READY, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PLAY, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PAUSED, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_STARTED, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_FINISHED, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_SKIPPED, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_ERROR, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PLAYER_RESIZE, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER, resolveUiVariant);
            this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT, resolveUiVariant);
        }
        // Initialize the UI
        resolveUiVariant(null);
    }
    UIManager.prototype.getConfig = function () {
        return this.config;
    };
    /**
     * Returns the list of UI variants as passed into the constructor of {@link UIManager}.
     * @returns {UIVariant[]} the list of available UI variants
     */
    UIManager.prototype.getUiVariants = function () {
        return this.uiVariants;
    };
    /**
     * Switches to a UI variant from the list returned by {@link getUiVariants}.
     * @param {UIVariant} uiVariant the UI variant to switch to
     * @param {() => void} onShow a callback that is executed just before the new UI variant is shown
     */
    UIManager.prototype.switchToUiVariant = function (uiVariant, onShow) {
        var uiVariantIndex = this.uiVariants.indexOf(uiVariant);
        var nextUi = this.uiInstanceManagers[uiVariantIndex];
        var uiVariantChanged = false;
        // Determine if the UI variant is changing
        if (nextUi !== this.currentUi) {
            uiVariantChanged = true;
            // console.log('switched from ', this.currentUi ? this.currentUi.getUI() : 'none',
            //   ' to ', nextUi ? nextUi.getUI() : 'none');
        }
        // Only if the UI variant is changing, we need to do some stuff. Else we just leave everything as-is.
        if (uiVariantChanged) {
            // Hide the currently active UI variant
            if (this.currentUi) {
                this.currentUi.getUI().hide();
            }
            // Assign the new UI variant as current UI
            this.currentUi = nextUi;
            // When we switch to a different UI instance, there's some additional stuff to manage. If we do not switch
            // to an instance, we're done here.
            if (this.currentUi != null) {
                // Add the UI to the DOM (and configure it) the first time it is selected
                if (!this.currentUi.isConfigured()) {
                    this.addUi(this.currentUi);
                }
                if (onShow) {
                    onShow();
                }
                this.currentUi.getUI().show();
            }
        }
    };
    /**
     * Triggers a UI variant switch as triggered by events when automatic switching is enabled. It allows to overwrite
     * properties of the {@link UIConditionContext}.
     * @param {Partial<UIConditionContext>} context an optional set of properties that overwrite properties of the
     *   automatically determined context
     * @param {(context: UIConditionContext) => void} onShow a callback that is executed just before the new UI variant
     *   is shown (if a switch is happening)
     */
    UIManager.prototype.resolveUiVariant = function (context, onShow) {
        if (context === void 0) { context = {}; }
        // Determine the current context for which the UI variant will be resolved
        var defaultContext = {
            isAd: false,
            isAdWithUI: false,
            adClientType: null,
            isFullscreen: this.player.isFullscreen(),
            isMobile: browserutils_1.BrowserUtils.isMobile,
            isPlaying: this.player.isPlaying(),
            width: this.uiContainerElement.width(),
            documentWidth: document.body.clientWidth,
        };
        // Overwrite properties of the default context with passed in context properties
        var switchingContext = __assign({}, defaultContext, context);
        // Fire the event and allow modification of the context before it is used to resolve the UI variant
        this.events.onUiVariantResolve.dispatch(this, switchingContext);
        var nextUiVariant = null;
        // Select new UI variant
        // If no variant condition is fulfilled, we switch to *no* UI
        for (var _i = 0, _a = this.uiVariants; _i < _a.length; _i++) {
            var uiVariant = _a[_i];
            if (uiVariant.condition == null || uiVariant.condition(switchingContext) === true) {
                nextUiVariant = uiVariant;
                break;
            }
        }
        this.switchToUiVariant(nextUiVariant, function () {
            if (onShow) {
                onShow(switchingContext);
            }
        });
    };
    UIManager.prototype.addUi = function (ui) {
        var dom = ui.getUI().getDomElement();
        var player = ui.getWrappedPlayer();
        ui.configureControls();
        /* Append the UI DOM after configuration to avoid CSS transitions at initialization
         * Example: Components are hidden during configuration and these hides may trigger CSS transitions that are
         * undesirable at this time. */
        this.uiContainerElement.append(dom);
        // Some components initialize their state on ON_READY. When the UI is loaded after the player is already ready,
        // they will never receive the event so we fire it from here in such cases.
        if (player.isReady()) {
            player.fireEventInUI(player.EVENT.ON_READY, {});
        }
        // Fire onConfigured after UI DOM elements are successfully added. When fired immediately, the DOM elements
        // might not be fully configured and e.g. do not have a size.
        // https://swizec.com/blog/how-to-properly-wait-for-dom-elements-to-show-up-in-modern-browsers/swizec/6663
        if (window.requestAnimationFrame) {
            requestAnimationFrame(function () { ui.onConfigured.dispatch(ui.getUI()); });
        }
        else {
            // IE9 fallback
            setTimeout(function () { ui.onConfigured.dispatch(ui.getUI()); }, 0);
        }
    };
    UIManager.prototype.releaseUi = function (ui) {
        ui.releaseControls();
        ui.getUI().getDomElement().remove();
        ui.clearEventHandlers();
    };
    UIManager.prototype.release = function () {
        for (var _i = 0, _a = this.uiInstanceManagers; _i < _a.length; _i++) {
            var uiInstanceManager = _a[_i];
            this.releaseUi(uiInstanceManager);
        }
        this.managerPlayerWrapper.clearEventHandlers();
    };
    Object.defineProperty(UIManager.prototype, "onUiVariantResolve", {
        /**
         * Fires just before UI variants are about to be resolved and the UI variant is possibly switched. It is fired when
         * the switch is triggered from an automatic switch and when calling {@link resolveUiVariant}.
         * Can be used to modify the {@link UIConditionContext} before resolving is done.
         * @returns {EventDispatcher<UIManager, UIConditionContext>}
         */
        get: function () {
            return this.events.onUiVariantResolve;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Returns the list of all added markers in undefined order.
     */
    UIManager.prototype.getTimelineMarkers = function () {
        return this.config.metadata.markers;
    };
    /**
     * Adds a marker to the timeline. Does not check for duplicates/overlaps at the `time`.
     */
    UIManager.prototype.addTimelineMarker = function (timelineMarker) {
        this.config.metadata.markers.push(timelineMarker);
        this.config.events.onUpdated.dispatch(this);
    };
    /**
     * Removes a marker from the timeline (by reference) and returns `true` if the marker has
     * been part of the timeline and successfully removed, or `false` if the marker could not
     * be found and thus not removed.
     */
    UIManager.prototype.removeTimelineMarker = function (timelineMarker) {
        if (arrayutils_1.ArrayUtils.remove(this.config.metadata.markers, timelineMarker) === timelineMarker) {
            this.config.events.onUpdated.dispatch(this);
            return true;
        }
        return false;
    };
    return UIManager;
}());
exports.UIManager = UIManager;
(function (UIManager) {
    var Factory;
    (function (Factory) {
        function buildAudioVideoUI(player, config) {
            if (config === void 0) { config = {}; }
            var smallScreenSwitchWidth = 600;
            return new UIManager(player, [{
                    ui: modernSmallScreenUI(),
                    condition: function (context) {
                        return context.isMobile && context.documentWidth < smallScreenSwitchWidth;
                    },
                }, {
                    ui: modernUI(),
                }], config);
        }
        Factory.buildAudioVideoUI = buildAudioVideoUI;
        function buildAudioOnlyUI(player, config) {
            if (config === void 0) { config = {}; }
            var smallScreenSwitchWidth = 600;
            return new UIManager(player, [{
                    ui: modernAudioOnlySmallScreenUI(),
                    condition: function (context) {
                        return context.isMobile && context.documentWidth < smallScreenSwitchWidth;
                    },
                }, {
                    ui: modernAudioOnlyUI(),
                }], config);
        }
        Factory.buildAudioOnlyUI = buildAudioOnlyUI;
        // export function buildDefaultUI(player: PlayerAPI, config: UIConfig = {}): UIManager {
        //   return UIManager.Factory.buildModernUI(player, config);
        // }
        // export function buildDefaultSmallScreenUI(player: PlayerAPI, config: UIConfig = {}): UIManager {
        //   return UIManager.Factory.buildModernSmallScreenUI(player, config);
        // }
        // export function buildDefaultCastReceiverUI(player: PlayerAPI, config: UIConfig = {}): UIManager {
        //   return UIManager.Factory.buildModernCastReceiverUI(player, config);
        // }
        function modernUI() {
            var subtitleOverlay = new subtitleoverlay_1.SubtitleOverlay();
            var settingsPanel = new settingspanel_1.SettingsPanel({
                components: [
                    new settingspanel_1.SettingsPanelItem('Video Quality', new videoqualityselectbox_1.VideoQualitySelectBox()),
                    new settingspanel_1.SettingsPanelItem('Speed', new playbackspeedselectbox_1.PlaybackSpeedSelectBox()),
                    new settingspanel_1.SettingsPanelItem('Audio Track', new audiotrackselectbox_1.AudioTrackSelectBox()),
                    new settingspanel_1.SettingsPanelItem('Audio Quality', new audioqualityselectbox_1.AudioQualitySelectBox()),
                ],
                hidden: true,
            });
            var subtitleSettingsPanel = new subtitlesettingspanel_1.SubtitleSettingsPanel({
                hidden: true,
                overlay: subtitleOverlay,
                settingsPanel: settingsPanel,
            });
            var subtitleSettingsOpenButton = new subtitlesettingsopenbutton_1.SubtitleSettingsOpenButton({
                subtitleSettingsPanel: subtitleSettingsPanel,
                settingsPanel: settingsPanel,
            });
            settingsPanel.addComponent(new settingspanel_1.SettingsPanelItem(new subtitlesettingslabel_1.SubtitleSettingsLabel({ text: 'Subtitles', opener: subtitleSettingsOpenButton }), new subtitleselectbox_1.SubtitleSelectBox()));
            var controlBar = new controlbar_1.ControlBar({
                components: [
                    settingsPanel,
                    subtitleSettingsPanel,
                    new container_1.Container({
                        components: [
                            new playbacktimelabel_1.PlaybackTimeLabel({ timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.CurrentTime, hideInLivePlayback: true }),
                            new seekbar_1.SeekBar({ label: new seekbarlabel_1.SeekBarLabel() }),
                            new playbacktimelabel_1.PlaybackTimeLabel({ timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.TotalTime, cssClasses: ['text-right'] }),
                        ],
                        cssClasses: ['controlbar-top'],
                    }),
                    new container_1.Container({
                        components: [
                            new playbacktogglebutton_1.PlaybackToggleButton(),
                            new volumetogglebutton_1.VolumeToggleButton(),
                            new volumeslider_1.VolumeSlider(),
                            new spacer_1.Spacer(),
                            new pictureinpicturetogglebutton_1.PictureInPictureToggleButton(),
                            new airplaytogglebutton_1.AirPlayToggleButton(),
                            new casttogglebutton_1.CastToggleButton(),
                            new vrtogglebutton_1.VRToggleButton(),
                            new settingstogglebutton_1.SettingsToggleButton({ settingsPanel: settingsPanel }),
                            new fullscreentogglebutton_1.FullscreenToggleButton(),
                        ],
                        cssClasses: ['controlbar-bottom'],
                    }),
                ],
            });
            return new uicontainer_1.UIContainer({
                components: [
                    subtitleOverlay,
                    new bufferingoverlay_1.BufferingOverlay(),
                    new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                    new caststatusoverlay_1.CastStatusOverlay(),
                    controlBar,
                    // new TitleBar(),
                    new recommendationoverlay_1.RecommendationOverlay(),
                    // new Watermark(),
                    new errormessageoverlay_1.ErrorMessageOverlay(),
                ],
                cssClasses: ['ui-skin-mi-wbc'],
            });
        }
        function modernAudioOnlyUI() {
            var subtitleOverlay = new subtitleoverlay_1.SubtitleOverlay();
            var settingsPanel = new settingspanel_1.SettingsPanel({
                components: [
                    new settingspanel_1.SettingsPanelItem('Speed', new playbackspeedselectbox_1.PlaybackSpeedSelectBox()),
                    new settingspanel_1.SettingsPanelItem('Audio Track', new audiotrackselectbox_1.AudioTrackSelectBox()),
                    new settingspanel_1.SettingsPanelItem('Audio Quality', new audioqualityselectbox_1.AudioQualitySelectBox()),
                ],
                hidden: true,
            });
            var subtitleSettingsPanel = new subtitlesettingspanel_1.SubtitleSettingsPanel({
                hidden: true,
                overlay: subtitleOverlay,
                settingsPanel: settingsPanel,
            });
            var subtitleSettingsOpenButton = new subtitlesettingsopenbutton_1.SubtitleSettingsOpenButton({
                subtitleSettingsPanel: subtitleSettingsPanel,
                settingsPanel: settingsPanel,
            });
            settingsPanel.addComponent(new settingspanel_1.SettingsPanelItem(new subtitlesettingslabel_1.SubtitleSettingsLabel({ text: 'Subtitles', opener: subtitleSettingsOpenButton }), new subtitleselectbox_1.SubtitleSelectBox()));
            var controlBar = new controlbar_1.ControlBar({
                components: [
                    settingsPanel,
                    subtitleSettingsPanel,
                    new container_1.Container({
                        components: [
                            new playbacktimelabel_1.PlaybackTimeLabel({ timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.CurrentTime, hideInLivePlayback: true }),
                            new seekbar_1.SeekBar({ label: new seekbarlabel_1.SeekBarLabel() }),
                            new playbacktimelabel_1.PlaybackTimeLabel({ timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.TotalTime, cssClasses: ['text-right'] }),
                        ],
                        cssClasses: ['controlbar-top'],
                    }),
                    new container_1.Container({
                        components: [
                            new playbacktogglebutton_1.PlaybackToggleButton(),
                            new volumetogglebutton_1.VolumeToggleButton(),
                            new volumeslider_1.VolumeSlider(),
                            new spacer_1.Spacer(),
                            new airplaytogglebutton_1.AirPlayToggleButton(),
                            new casttogglebutton_1.CastToggleButton(),
                            new settingstogglebutton_1.SettingsToggleButton({ settingsPanel: settingsPanel }),
                            new fullscreentogglebutton_1.FullscreenToggleButton(),
                        ],
                        cssClasses: ['controlbar-bottom'],
                    }),
                ],
            });
            return new uicontainer_1.UIContainer({
                components: [
                    new audioonlyoverlay_1.AudioOnlyOverlay(),
                    subtitleOverlay,
                    new bufferingoverlay_1.BufferingOverlay(),
                    new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                    new caststatusoverlay_1.CastStatusOverlay(),
                    controlBar,
                    // new TitleBar(),
                    new recommendationoverlay_1.RecommendationOverlay(),
                    // new Watermark(),
                    new errormessageoverlay_1.ErrorMessageOverlay(),
                ],
                cssClasses: ['ui-skin-mi-wbc'],
            });
        }
        // function modernAdsUI() {
        //   return new UIContainer({
        //     components: [
        //       new BufferingOverlay(),
        //       new AdClickOverlay(),
        //       new PlaybackToggleOverlay(),
        //       new Container({
        //         components: [
        //           new AdMessageLabel({ text: 'Ad: {remainingTime} secs' }),
        //           new AdSkipButton(),
        //         ],
        //         cssClass: 'ui-ads-status',
        //       }),
        //       new ControlBar({
        //         components: [
        //           new Container({
        //             components: [
        //               new PlaybackToggleButton(),
        //               new VolumeToggleButton(),
        //               new VolumeSlider(),
        //               new Spacer(),
        //               new FullscreenToggleButton(),
        //             ],
        //             cssClasses: ['controlbar-bottom'],
        //           }),
        //         ],
        //       }),
        //     ],
        //     cssClasses: ['ui-skin-mi-wbc', 'ui-skin-ads'],
        //   });
        // }
        function modernSmallScreenUI() {
            var subtitleOverlay = new subtitleoverlay_1.SubtitleOverlay();
            var settingsPanel = new settingspanel_1.SettingsPanel({
                components: [
                    new settingspanel_1.SettingsPanelItem('Video Quality', new videoqualityselectbox_1.VideoQualitySelectBox()),
                    new settingspanel_1.SettingsPanelItem('Speed', new playbackspeedselectbox_1.PlaybackSpeedSelectBox()),
                    new settingspanel_1.SettingsPanelItem('Audio Track', new audiotrackselectbox_1.AudioTrackSelectBox()),
                    new settingspanel_1.SettingsPanelItem('Audio Quality', new audioqualityselectbox_1.AudioQualitySelectBox()),
                ],
                hidden: true,
                hideDelay: -1,
            });
            var subtitleSettingsPanel = new subtitlesettingspanel_1.SubtitleSettingsPanel({
                hidden: true,
                hideDelay: -1,
                overlay: subtitleOverlay,
                settingsPanel: settingsPanel,
            });
            var subtitleSettingsOpenButton = new subtitlesettingsopenbutton_1.SubtitleSettingsOpenButton({
                subtitleSettingsPanel: subtitleSettingsPanel,
                settingsPanel: settingsPanel,
            });
            settingsPanel.addComponent(new settingspanel_1.SettingsPanelItem(new subtitlesettingslabel_1.SubtitleSettingsLabel({ text: 'Subtitles', opener: subtitleSettingsOpenButton }), new subtitleselectbox_1.SubtitleSelectBox()));
            settingsPanel.addComponent(new closebutton_1.CloseButton({ target: settingsPanel }));
            subtitleSettingsPanel.addComponent(new closebutton_1.CloseButton({ target: subtitleSettingsPanel }));
            var controlBar = new controlbar_1.ControlBar({
                components: [
                    new container_1.Container({
                        components: [
                            new playbacktimelabel_1.PlaybackTimeLabel({ timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.CurrentTime, hideInLivePlayback: true }),
                            new seekbar_1.SeekBar({ label: new seekbarlabel_1.SeekBarLabel() }),
                            new playbacktimelabel_1.PlaybackTimeLabel({ timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.TotalTime, cssClasses: ['text-right'] }),
                        ],
                        cssClasses: ['controlbar-top'],
                    }),
                ],
            });
            return new uicontainer_1.UIContainer({
                components: [
                    subtitleOverlay,
                    new bufferingoverlay_1.BufferingOverlay(),
                    new caststatusoverlay_1.CastStatusOverlay(),
                    new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                    controlBar,
                    new titlebar_1.TitleBar({
                        components: [
                            new metadatalabel_1.MetadataLabel({ content: metadatalabel_1.MetadataLabelContent.Title }),
                            new casttogglebutton_1.CastToggleButton(),
                            new vrtogglebutton_1.VRToggleButton(),
                            new volumetogglebutton_1.VolumeToggleButton(),
                            new settingstogglebutton_1.SettingsToggleButton({ settingsPanel: settingsPanel }),
                            new fullscreentogglebutton_1.FullscreenToggleButton(),
                        ],
                    }),
                    settingsPanel,
                    subtitleSettingsPanel,
                    new recommendationoverlay_1.RecommendationOverlay(),
                    // new Watermark(),
                    new errormessageoverlay_1.ErrorMessageOverlay(),
                ],
                cssClasses: ['ui-skin-mi-wbc', 'ui-skin-smallscreen'],
            });
        }
        function modernAudioOnlySmallScreenUI() {
            var subtitleOverlay = new subtitleoverlay_1.SubtitleOverlay();
            var settingsPanel = new settingspanel_1.SettingsPanel({
                components: [
                    new settingspanel_1.SettingsPanelItem('Speed', new playbackspeedselectbox_1.PlaybackSpeedSelectBox()),
                    new settingspanel_1.SettingsPanelItem('Audio Track', new audiotrackselectbox_1.AudioTrackSelectBox()),
                    new settingspanel_1.SettingsPanelItem('Audio Quality', new audioqualityselectbox_1.AudioQualitySelectBox()),
                ],
                hidden: true,
                hideDelay: -1,
            });
            var subtitleSettingsPanel = new subtitlesettingspanel_1.SubtitleSettingsPanel({
                hidden: true,
                hideDelay: -1,
                overlay: subtitleOverlay,
                settingsPanel: settingsPanel,
            });
            var subtitleSettingsOpenButton = new subtitlesettingsopenbutton_1.SubtitleSettingsOpenButton({
                subtitleSettingsPanel: subtitleSettingsPanel,
                settingsPanel: settingsPanel,
            });
            settingsPanel.addComponent(new settingspanel_1.SettingsPanelItem(new subtitlesettingslabel_1.SubtitleSettingsLabel({ text: 'Subtitles', opener: subtitleSettingsOpenButton }), new subtitleselectbox_1.SubtitleSelectBox()));
            settingsPanel.addComponent(new closebutton_1.CloseButton({ target: settingsPanel }));
            subtitleSettingsPanel.addComponent(new closebutton_1.CloseButton({ target: subtitleSettingsPanel }));
            var controlBar = new controlbar_1.ControlBar({
                components: [
                    new container_1.Container({
                        components: [
                            new playbacktimelabel_1.PlaybackTimeLabel({ timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.CurrentTime, hideInLivePlayback: true }),
                            new seekbar_1.SeekBar({ label: new seekbarlabel_1.SeekBarLabel() }),
                            new playbacktimelabel_1.PlaybackTimeLabel({ timeLabelMode: playbacktimelabel_1.PlaybackTimeLabelMode.TotalTime, cssClasses: ['text-right'] }),
                        ],
                        cssClasses: ['controlbar-top'],
                    }),
                ],
            });
            return new uicontainer_1.UIContainer({
                components: [
                    new audioonlyoverlay_1.AudioOnlyOverlay(),
                    subtitleOverlay,
                    new bufferingoverlay_1.BufferingOverlay(),
                    new caststatusoverlay_1.CastStatusOverlay(),
                    new playbacktoggleoverlay_1.PlaybackToggleOverlay(),
                    controlBar,
                    new titlebar_1.TitleBar({
                        components: [
                            new metadatalabel_1.MetadataLabel({ content: metadatalabel_1.MetadataLabelContent.Title }),
                            new casttogglebutton_1.CastToggleButton(),
                            new vrtogglebutton_1.VRToggleButton(),
                            new volumetogglebutton_1.VolumeToggleButton(),
                            new settingstogglebutton_1.SettingsToggleButton({ settingsPanel: settingsPanel }),
                            new fullscreentogglebutton_1.FullscreenToggleButton(),
                        ],
                    }),
                    settingsPanel,
                    subtitleSettingsPanel,
                    new recommendationoverlay_1.RecommendationOverlay(),
                    // new Watermark(),
                    new errormessageoverlay_1.ErrorMessageOverlay(),
                ],
                cssClasses: ['ui-skin-mi-wbc', 'ui-skin-smallscreen'],
            });
        }
        // function modernSmallScreenAdsUI() {
        //   return new UIContainer({
        //     components: [
        //       new BufferingOverlay(),
        //       new AdClickOverlay(),
        //       new PlaybackToggleOverlay(),
        //       new TitleBar({
        //         components: [
        //           // dummy label with no content to move buttons to the right
        //           new Label({ cssClass: 'label-metadata-title' }),
        //           new FullscreenToggleButton(),
        //         ],
        //       }),
        //       new Container({
        //         components: [
        //           new AdMessageLabel({ text: 'Ad: {remainingTime} secs' }),
        //           new AdSkipButton(),
        //         ],
        //         cssClass: 'ui-ads-status',
        //       }),
        //     ],
        //     cssClasses: ['ui-skin-mi-wbc', 'ui-skin-ads', 'ui-skin-smallscreen'],
        //   });
        // }
        // function modernCastReceiverUI() {
        //   let controlBar = new ControlBar({
        //     components: [
        //       new Container({
        //         components: [
        //           new PlaybackTimeLabel({ timeLabelMode: PlaybackTimeLabelMode.CurrentTime, hideInLivePlayback: true }),
        //           new SeekBar({ smoothPlaybackPositionUpdateIntervalMs: -1 }),
        //           new PlaybackTimeLabel({ timeLabelMode: PlaybackTimeLabelMode.TotalTime, cssClasses: ['text-right'] }),
        //         ],
        //         cssClasses: ['controlbar-top'],
        //       }),
        //     ],
        //   });
        //   return new CastUIContainer({
        //     components: [
        //       new SubtitleOverlay(),
        //       new BufferingOverlay(),
        //       new PlaybackToggleOverlay(),
        //       new Watermark(),
        //       controlBar,
        //       new TitleBar({ keepHiddenWithoutMetadata: true }),
        //       new ErrorMessageOverlay(),
        //     ],
        //     cssClasses: ['ui-skin-mi-wbc', 'ui-skin-cast-receiver'],
        //   });
        // }
        // export function buildModernUI(player: PlayerAPI, config: UIConfig = {}): UIManager {
        //   // show smallScreen UI only on mobile/handheld devices
        //   let smallScreenSwitchWidth = 600;
        //   return new UIManager(player, [{
        //     ui: modernSmallScreenAdsUI(),
        //     condition: (context: UIConditionContext) => {
        //       return context.isMobile && context.documentWidth < smallScreenSwitchWidth && context.isAdWithUI;
        //     },
        //   }, {
        //     ui: modernAdsUI(),
        //     condition: (context: UIConditionContext) => {
        //       return context.isAdWithUI;
        //     },
        //   }, {
        //     ui: modernSmallScreenUI(),
        //     condition: (context: UIConditionContext) => {
        //       return context.isMobile && context.documentWidth < smallScreenSwitchWidth;
        //     },
        //   }, {
        //     ui: modernUI(),
        //   }], config);
        // }
        // export function buildModernSmallScreenUI(player: PlayerAPI, config: UIConfig = {}): UIManager {
        //   return new UIManager(player, [{
        //     ui: modernSmallScreenAdsUI(),
        //     condition: (context: UIConditionContext) => {
        //       return context.isAdWithUI;
        //     },
        //   }, {
        //     ui: modernSmallScreenUI(),
        //   }], config);
        // }
        // export function buildModernCastReceiverUI(player: PlayerAPI, config: UIConfig = {}): UIManager {
        //   return new UIManager(player, modernCastReceiverUI(), config);
        // }
        // function legacyUI() {
        //   let settingsPanel = new SettingsPanel({
        //     components: [
        //       new SettingsPanelItem('Video Quality', new VideoQualitySelectBox()),
        //       new SettingsPanelItem('Audio Track', new AudioTrackSelectBox()),
        //       new SettingsPanelItem('Audio Quality', new AudioQualitySelectBox()),
        //       new SettingsPanelItem('Subtitles', new SubtitleSelectBox()),
        //     ],
        //     hidden: true,
        //   });
        //   let controlBar = new ControlBar({
        //     components: [
        //       settingsPanel,
        //       new PlaybackToggleButton(),
        //       new SeekBar({ label: new SeekBarLabel() }),
        //       new PlaybackTimeLabel(),
        //       new VRToggleButton(),
        //       new VolumeControlButton(),
        //       new SettingsToggleButton({ settingsPanel: settingsPanel }),
        //       new CastToggleButton(),
        //       new FullscreenToggleButton(),
        //     ],
        //   });
        //   return new UIContainer({
        //     components: [
        //       new SubtitleOverlay(),
        //       new CastStatusOverlay(),
        //       new PlaybackToggleOverlay(),
        //       new Watermark(),
        //       new RecommendationOverlay(),
        //       controlBar,
        //       new TitleBar(),
        //       new ErrorMessageOverlay(),
        //     ],
        //     cssClasses: ['ui-skin-legacy'],
        //   });
        // }
        // function legacyAdsUI() {
        //   return new UIContainer({
        //     components: [
        //       new AdClickOverlay(),
        //       new ControlBar({
        //         components: [
        //           new PlaybackToggleButton(),
        //           new AdMessageLabel(),
        //           new VolumeControlButton(),
        //           new FullscreenToggleButton(),
        //         ],
        //       }),
        //       new AdSkipButton(),
        //     ],
        //     cssClasses: ['ui-skin-legacy', 'ui-skin-ads'],
        //   });
        // }
        // function legacyCastReceiverUI() {
        //   let controlBar = new ControlBar({
        //     components: [
        //       new SeekBar(),
        //       new PlaybackTimeLabel(),
        //     ],
        //   });
        //   return new UIContainer({
        //     components: [
        //       new SubtitleOverlay(),
        //       new PlaybackToggleOverlay(),
        //       new Watermark(),
        //       controlBar,
        //       new TitleBar(),
        //       new ErrorMessageOverlay(),
        //     ],
        //     cssClasses: ['ui-skin-legacy', 'ui-skin-cast-receiver'],
        //   });
        // }
        // function legacyTestUI() {
        //   let settingsPanel = new SettingsPanel({
        //     components: [
        //       new SettingsPanelItem('Video Quality', new VideoQualitySelectBox()),
        //       new SettingsPanelItem('Audio Track', new AudioTrackSelectBox()),
        //       new SettingsPanelItem('Audio Quality', new AudioQualitySelectBox()),
        //       new SettingsPanelItem('Subtitles', new SubtitleSelectBox()),
        //     ],
        //     hidden: true,
        //   });
        //   let controlBar = new ControlBar({
        //     components: [settingsPanel,
        //       new PlaybackToggleButton(),
        //       new SeekBar({ label: new SeekBarLabel() }),
        //       new PlaybackTimeLabel(),
        //       new VRToggleButton(),
        //       new VolumeToggleButton(),
        //       new VolumeSlider(),
        //       new VolumeControlButton(),
        //       new VolumeControlButton({ vertical: false }),
        //       new SettingsToggleButton({ settingsPanel: settingsPanel }),
        //       new CastToggleButton(),
        //       new FullscreenToggleButton(),
        //     ],
        //   });
        //   return new UIContainer({
        //     components: [
        //       new SubtitleOverlay(),
        //       new CastStatusOverlay(),
        //       new PlaybackToggleOverlay(),
        //       new Watermark(),
        //       new RecommendationOverlay(),
        //       controlBar,
        //       new TitleBar(),
        //       new ErrorMessageOverlay(),
        //     ],
        //     cssClasses: ['ui-skin-legacy'],
        //   });
        // }
        // export function buildLegacyUI(player: PlayerAPI, config: UIConfig = {}): UIManager {
        //   return new UIManager(player, [{
        //     ui: legacyAdsUI(),
        //     condition: (context: UIConditionContext) => {
        //       return context.isAdWithUI;
        //     },
        //   }, {
        //     ui: legacyUI(),
        //   }], config);
        // }
        // export function buildLegacyCastReceiverUI(player: PlayerAPI, config: UIConfig = {}): UIManager {
        //   return new UIManager(player, legacyCastReceiverUI(), config);
        // }
        // export function buildLegacyTestUI(player: PlayerAPI, config: UIConfig = {}): UIManager {
        //   return new UIManager(player, legacyTestUI(), config);
        // }
    })(Factory = UIManager.Factory || (UIManager.Factory = {}));
})(UIManager = exports.UIManager || (exports.UIManager = {}));
exports.UIManager = UIManager;
/**
 * Encapsulates functionality to manage a UI instance. Used by the {@link UIManager} to manage multiple UI instances.
 */
var UIInstanceManager = (function () {
    function UIInstanceManager(player, ui, config) {
        this.events = {
            onConfigured: new eventdispatcher_1.EventDispatcher(),
            onSeek: new eventdispatcher_1.EventDispatcher(),
            onSeekPreview: new eventdispatcher_1.EventDispatcher(),
            onSeeked: new eventdispatcher_1.EventDispatcher(),
            onComponentShow: new eventdispatcher_1.EventDispatcher(),
            onComponentHide: new eventdispatcher_1.EventDispatcher(),
            onControlsShow: new eventdispatcher_1.EventDispatcher(),
            onPreviewControlsHide: new eventdispatcher_1.EventDispatcher(),
            onControlsHide: new eventdispatcher_1.EventDispatcher(),
            onRelease: new eventdispatcher_1.EventDispatcher(),
        };
        this.playerWrapper = new PlayerWrapper(player);
        this.ui = ui;
        this.config = config;
    }
    UIInstanceManager.prototype.getConfig = function () {
        return this.config;
    };
    UIInstanceManager.prototype.getUI = function () {
        return this.ui;
    };
    UIInstanceManager.prototype.getPlayer = function () {
        return this.playerWrapper.getPlayer();
    };
    Object.defineProperty(UIInstanceManager.prototype, "onConfigured", {
        /**
         * Fires when the UI is fully configured and added to the DOM.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onConfigured;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onSeek", {
        /**
         * Fires when a seek starts.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onSeek;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onSeekPreview", {
        /**
         * Fires when the seek timeline is scrubbed.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onSeekPreview;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onSeeked", {
        /**
         * Fires when a seek is finished.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onSeeked;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onComponentShow", {
        /**
         * Fires when a component is showing.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onComponentShow;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onComponentHide", {
        /**
         * Fires when a component is hiding.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onComponentHide;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onControlsShow", {
        /**
         * Fires when the UI controls are showing.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onControlsShow;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onPreviewControlsHide", {
        /**
         * Fires before the UI controls are hiding to check if they are allowed to hide.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onPreviewControlsHide;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onControlsHide", {
        /**
         * Fires when the UI controls are hiding.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onControlsHide;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UIInstanceManager.prototype, "onRelease", {
        /**
         * Fires when the UI controls are released.
         * @returns {EventDispatcher}
         */
        get: function () {
            return this.events.onRelease;
        },
        enumerable: true,
        configurable: true
    });
    UIInstanceManager.prototype.clearEventHandlers = function () {
        this.playerWrapper.clearEventHandlers();
        var events = this.events; // avoid TS7017
        for (var event_1 in events) {
            var dispatcher = events[event_1];
            dispatcher.unsubscribeAll();
        }
    };
    return UIInstanceManager;
}());
exports.UIInstanceManager = UIInstanceManager;
/**
 * Extends the {@link UIInstanceManager} for internal use in the {@link UIManager} and provides access to functionality
 * that components receiving a reference to the {@link UIInstanceManager} should not have access to.
 */
var InternalUIInstanceManager = (function (_super) {
    __extends(InternalUIInstanceManager, _super);
    function InternalUIInstanceManager() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    InternalUIInstanceManager.prototype.getWrappedPlayer = function () {
        // TODO find a non-hacky way to provide the WrappedPlayer to the UIManager without exporting it
        // getPlayer() actually returns the WrappedPlayer but its return type is set to Player so the WrappedPlayer does
        // not need to be exported
        return this.getPlayer();
    };
    InternalUIInstanceManager.prototype.configureControls = function () {
        this.configureControlsTree(this.getUI());
        this.configured = true;
    };
    InternalUIInstanceManager.prototype.isConfigured = function () {
        return this.configured;
    };
    InternalUIInstanceManager.prototype.configureControlsTree = function (component) {
        var _this = this;
        var configuredComponents = [];
        uiutils_1.UIUtils.traverseTree(component, function (component) {
            // First, check if we have already configured a component, and throw an error if we did. Multiple configuration
            // of the same component leads to unexpected UI behavior. Also, a component that is in the UI tree multiple
            // times hints at a wrong UI structure.
            // We could just skip configuration in such a case and not throw an exception, but enforcing a clean UI tree
            // seems like the better choice.
            for (var _i = 0, configuredComponents_1 = configuredComponents; _i < configuredComponents_1.length; _i++) {
                var configuredComponent = configuredComponents_1[_i];
                if (configuredComponent === component) {
                    // Write the component to the console to simplify identification of the culprit
                    // (e.g. by inspecting the config)
                    if (console) {
                        console.error('Circular reference in UI tree', component);
                    }
                    // Additionally throw an error, because this case must not happen and leads to unexpected UI behavior.
                    throw Error('Circular reference in UI tree: ' + component.constructor.name);
                }
            }
            component.initialize();
            component.configure(_this.getPlayer(), _this);
            configuredComponents.push(component);
        });
    };
    InternalUIInstanceManager.prototype.releaseControls = function () {
        // Do not call release methods if the components have never been configured; this can result in exceptions
        if (this.configured) {
            this.onRelease.dispatch(this.getUI());
            this.releaseControlsTree(this.getUI());
            this.configured = false;
        }
        this.released = true;
    };
    InternalUIInstanceManager.prototype.isReleased = function () {
        return this.released;
    };
    InternalUIInstanceManager.prototype.releaseControlsTree = function (component) {
        component.release();
        if (component instanceof container_1.Container) {
            for (var _i = 0, _a = component.getComponents(); _i < _a.length; _i++) {
                var childComponent = _a[_i];
                this.releaseControlsTree(childComponent);
            }
        }
    };
    InternalUIInstanceManager.prototype.clearEventHandlers = function () {
        _super.prototype.clearEventHandlers.call(this);
    };
    return InternalUIInstanceManager;
}(UIInstanceManager));
/**
 * Wraps the player to track event handlers and provide a simple method to remove all registered event
 * handlers from the player.
 */
var PlayerWrapper = (function () {
    function PlayerWrapper(player) {
        var _this = this;
        this.eventHandlers = {};
        this.player = player;
        // Collect all members of the player (public API methods and properties of the player)
        // (Object.getOwnPropertyNames(player) does not work with the player TypeScript class starting in 7.2)
        var members = [];
        for (var member in player) {
            members.push(member);
        }
        // Split the members into methods and properties
        var methods = [];
        var properties = [];
        for (var _i = 0, members_1 = members; _i < members_1.length; _i++) {
            var member = members_1[_i];
            if (typeof player[member] === 'function') {
                methods.push(member);
            }
            else {
                properties.push(member);
            }
        }
        // Create wrapper object
        var wrapper = {};
        var _loop_1 = function (method) {
            wrapper[method] = function () {
                // console.log('called ' + member); // track method calls on the player
                return player[method].apply(player, arguments);
            };
        };
        // Add function wrappers for all API methods that do nothing but calling the base method on the player
        for (var _a = 0, methods_1 = methods; _a < methods_1.length; _a++) {
            var method = methods_1[_a];
            _loop_1(method);
        }
        var _loop_2 = function (property) {
            // Get an eventually existing property descriptor to differentiate between plain properties and properties with
            // getters/setters.
            var propertyDescriptor = Object.getOwnPropertyDescriptor(player, property) ||
                Object.getOwnPropertyDescriptor(Object.getPrototypeOf(player), property);
            // If the property has getters/setters, wrap them accordingly...
            if (propertyDescriptor && (propertyDescriptor.get || propertyDescriptor.set)) {
                Object.defineProperty(wrapper, property, {
                    get: function () { return propertyDescriptor.get.call(player); },
                    set: function (value) { return propertyDescriptor.set.call(player, value); },
                });
            }
            else {
                wrapper[property] = player[property];
            }
        };
        // Add all public properties of the player to the wrapper
        for (var _b = 0, properties_1 = properties; _b < properties_1.length; _b++) {
            var property = properties_1[_b];
            _loop_2(property);
        }
        // Explicitly add a wrapper method for 'addEventHandler' that adds added event handlers to the event list
        wrapper.addEventHandler = function (eventType, callback) {
            // in player V8 addEventHandler was replaced by on
            if (player.on) {
                player.on(eventType, callback);
            }
            else {
                // keep backward compatibility for versions <7.7
                player.addEventHandler(eventType, callback);
            }
            if (!_this.eventHandlers[eventType]) {
                _this.eventHandlers[eventType] = [];
            }
            _this.eventHandlers[eventType].push(callback);
            return wrapper;
        };
        // Explicitly add a wrapper method for 'removeEventHandler' that removes removed event handlers from the event list
        wrapper.removeEventHandler = function (eventType, callback) {
            if (player.off) {
                player.off(eventType, callback);
            }
            else {
                // keep backward compatibility for versions <7.7
                player.removeEventHandler(eventType, callback);
            }
            if (_this.eventHandlers[eventType]) {
                arrayutils_1.ArrayUtils.remove(_this.eventHandlers[eventType], callback);
            }
            return wrapper;
        };
        wrapper.fireEventInUI = function (event, data) {
            if (_this.eventHandlers[event]) {
                // Extend the data object with default values to convert it to a {@link PlayerEvent} object.
                var playerEventData = Object.assign({}, {
                    timestamp: Date.now(),
                    type: event,
                    // Add a marker property so the UI can detect UI-internal player events
                    uiSourced: true,
                }, data);
                // Execute the registered callbacks
                for (var _i = 0, _a = _this.eventHandlers[event]; _i < _a.length; _i++) {
                    var callback = _a[_i];
                    callback(playerEventData);
                }
            }
        };
        this.wrapper = wrapper;
    }
    /**
     * Returns a wrapped player object that can be used on place of the normal player object.
     * @returns {WrappedPlayer} a wrapped player
     */
    PlayerWrapper.prototype.getPlayer = function () {
        return this.wrapper;
    };
    /**
     * Clears all registered event handlers from the player that were added through the wrapped player.
     */
    PlayerWrapper.prototype.clearEventHandlers = function () {
        for (var eventType in this.eventHandlers) {
            for (var _i = 0, _a = this.eventHandlers[eventType]; _i < _a.length; _i++) {
                var callback = _a[_i];
                this.player.removeEventHandler(eventType, callback);
            }
        }
    };
    return PlayerWrapper;
}());


/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Guid;
(function (Guid) {
    var guid = 1;
    function next() {
        return guid++;
    }
    Guid.next = next;
})(Guid = exports.Guid || (exports.Guid = {}));


/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var storageutils_1 = __webpack_require__(44);
var component_1 = __webpack_require__(2);
var eventdispatcher_1 = __webpack_require__(3);
var SubtitleSettingsManager = (function () {
    function SubtitleSettingsManager() {
        var _this = this;
        this._properties = {
            fontColor: new SubtitleSettingsProperty(this),
            fontOpacity: new SubtitleSettingsProperty(this),
            fontFamily: new SubtitleSettingsProperty(this),
            fontSize: new SubtitleSettingsProperty(this),
            characterEdge: new SubtitleSettingsProperty(this),
            backgroundColor: new SubtitleSettingsProperty(this),
            backgroundOpacity: new SubtitleSettingsProperty(this),
            windowColor: new SubtitleSettingsProperty(this),
            windowOpacity: new SubtitleSettingsProperty(this),
        };
        this.userSettings = {};
        this.localStorageKey = DummyComponent.instance().prefixCss('subtitlesettings');
        var _loop_1 = function (propertyName) {
            this_1._properties[propertyName].onChanged.subscribe(function (sender, property) {
                if (property.isSet()) {
                    _this.userSettings[propertyName] = property.value;
                }
                else {
                    // Delete the property from the settings object if unset to avoid serialization of null values
                    delete _this.userSettings[propertyName];
                }
                // Save the settings object when a property has changed
                _this.save();
            });
        };
        var this_1 = this;
        for (var propertyName in this._properties) {
            _loop_1(propertyName);
        }
        this.load();
    }
    SubtitleSettingsManager.prototype.reset = function () {
        for (var propertyName in this._properties) {
            this._properties[propertyName].clear();
        }
    };
    Object.defineProperty(SubtitleSettingsManager.prototype, "fontColor", {
        get: function () {
            return this._properties.fontColor;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "fontOpacity", {
        get: function () {
            return this._properties.fontOpacity;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "fontFamily", {
        get: function () {
            return this._properties.fontFamily;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "fontSize", {
        get: function () {
            return this._properties.fontSize;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "characterEdge", {
        get: function () {
            return this._properties.characterEdge;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "backgroundColor", {
        get: function () {
            return this._properties.backgroundColor;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "backgroundOpacity", {
        get: function () {
            return this._properties.backgroundOpacity;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "windowColor", {
        get: function () {
            return this._properties.windowColor;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SubtitleSettingsManager.prototype, "windowOpacity", {
        get: function () {
            return this._properties.windowOpacity;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Saves the settings to local storage.
     */
    SubtitleSettingsManager.prototype.save = function () {
        storageutils_1.StorageUtils.setObject(this.localStorageKey, this.userSettings);
    };
    /**
     * Loads the settings from local storage
     */
    SubtitleSettingsManager.prototype.load = function () {
        this.userSettings = storageutils_1.StorageUtils.getObject(this.localStorageKey) || {};
        // Apply the loaded settings
        for (var property in this.userSettings) {
            this._properties[property].value = this.userSettings[property];
        }
    };
    return SubtitleSettingsManager;
}());
exports.SubtitleSettingsManager = SubtitleSettingsManager;
/**
 * A dummy component whose sole purpose is to expose the {@link #prefixCss} method to the
 * {@link SubtitleSettingsManager}.
 */
var DummyComponent = (function (_super) {
    __extends(DummyComponent, _super);
    function DummyComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DummyComponent.instance = function () {
        if (!DummyComponent._instance) {
            DummyComponent._instance = new DummyComponent();
        }
        return DummyComponent._instance;
    };
    DummyComponent.prototype.prefixCss = function (cssClassOrId) {
        return _super.prototype.prefixCss.call(this, cssClassOrId);
    };
    return DummyComponent;
}(component_1.Component));
var SubtitleSettingsProperty = (function () {
    function SubtitleSettingsProperty(manager) {
        this._manager = manager;
        this._onChanged = new eventdispatcher_1.EventDispatcher();
    }
    SubtitleSettingsProperty.prototype.isSet = function () {
        return this._value != null;
    };
    SubtitleSettingsProperty.prototype.clear = function () {
        this._value = null;
        this.onChangedEvent(null);
    };
    Object.defineProperty(SubtitleSettingsProperty.prototype, "value", {
        get: function () {
            return this._value;
        },
        set: function (value) {
            if (typeof value === 'string' && value === 'null') {
                value = null;
            }
            this._value = value;
            this.onChangedEvent(value);
        },
        enumerable: true,
        configurable: true
    });
    SubtitleSettingsProperty.prototype.onChangedEvent = function (value) {
        this._onChanged.dispatch(this._manager, this);
    };
    Object.defineProperty(SubtitleSettingsProperty.prototype, "onChanged", {
        get: function () {
            return this._onChanged.getEvent();
        },
        enumerable: true,
        configurable: true
    });
    return SubtitleSettingsProperty;
}());
exports.SubtitleSettingsProperty = SubtitleSettingsProperty;


/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var dom_1 = __webpack_require__(1);
/**
 * Tracks the loading state of images.
 */
var ImageLoader = (function () {
    function ImageLoader() {
        this.state = {};
    }
    /**
     * Loads an image and call the callback once the image is loaded. If the image is already loaded, the callback
     * is called immediately, else it is called once loading has finished. Calling this method multiple times for the
     * same image while it is loading calls only let callback passed into the last call.
     * @param url The url to the image to load
     * @param loadedCallback The callback that is called when the image is loaded
     */
    ImageLoader.prototype.load = function (url, loadedCallback) {
        var _this = this;
        if (!this.state[url]) {
            // When the image was never attempted to be loaded before, we create a state and store it in the state map
            // for later use when the same image is requested to be loaded again.
            var state_1 = {
                url: url,
                image: new dom_1.DOM('img', {}),
                loadedCallback: loadedCallback,
                loaded: false,
                width: 0,
                height: 0,
            };
            this.state[url] = state_1;
            // Listen to the load event, update the state and call the callback once the image is loaded
            state_1.image.on('load', function (e) {
                state_1.loaded = true;
                state_1.width = state_1.image.get(0).width;
                state_1.height = state_1.image.get(0).height;
                _this.callLoadedCallback(state_1);
            });
            // Set the image URL to start the loading
            state_1.image.attr('src', state_1.url);
        }
        else {
            // We have a state for the requested image, so it is either already loaded or currently loading
            var state = this.state[url];
            // We overwrite the callback to make sure that only the callback of the latest call gets executed.
            // Earlier callbacks become invalid once a new load call arrives, and they are not called as long as the image
            // is not loaded.
            state.loadedCallback = loadedCallback;
            // When the image is already loaded, we directly execute the callback instead of waiting for the load event
            if (state.loaded) {
                this.callLoadedCallback(state);
            }
        }
    };
    ImageLoader.prototype.callLoadedCallback = function (state) {
        state.loadedCallback(state.url, state.width, state.height);
    };
    return ImageLoader;
}());
exports.ImageLoader = ImageLoader;


/***/ }),
/* 75 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = __webpack_require__(2);
var dom_1 = __webpack_require__(1);
/**
 * Animated analog TV static noise.
 */
var TvNoiseCanvas = (function (_super) {
    __extends(TvNoiseCanvas, _super);
    function TvNoiseCanvas(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.canvasWidth = 160;
        _this.canvasHeight = 90;
        _this.interferenceHeight = 50;
        _this.lastFrameUpdate = 0;
        _this.frameInterval = 60;
        _this.useAnimationFrame = !!window.requestAnimationFrame;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-tvnoisecanvas',
        }, _this.config);
        return _this;
    }
    TvNoiseCanvas.prototype.toDomElement = function () {
        return this.canvas = new dom_1.DOM('canvas', { 'class': this.getCssClasses() });
    };
    TvNoiseCanvas.prototype.start = function () {
        this.canvasElement = this.canvas.get(0);
        this.canvasContext = this.canvasElement.getContext('2d');
        this.noiseAnimationWindowPos = -this.canvasHeight;
        this.lastFrameUpdate = 0;
        this.canvasElement.width = this.canvasWidth;
        this.canvasElement.height = this.canvasHeight;
        this.renderFrame();
    };
    TvNoiseCanvas.prototype.stop = function () {
        if (this.useAnimationFrame) {
            cancelAnimationFrame(this.frameUpdateHandlerId);
        }
        else {
            clearTimeout(this.frameUpdateHandlerId);
        }
    };
    TvNoiseCanvas.prototype.renderFrame = function () {
        // This code has been copied from the player controls.js and simplified
        if (this.lastFrameUpdate + this.frameInterval > new Date().getTime()) {
            // It's too early to render the next frame
            this.scheduleNextRender();
            return;
        }
        var currentPixelOffset;
        var canvasWidth = this.canvasWidth;
        var canvasHeight = this.canvasHeight;
        // Create texture
        var noiseImage = this.canvasContext.createImageData(canvasWidth, canvasHeight);
        // Fill texture with noise
        for (var y = 0; y < canvasHeight; y++) {
            for (var x = 0; x < canvasWidth; x++) {
                currentPixelOffset = (canvasWidth * y * 4) + x * 4;
                noiseImage.data[currentPixelOffset] = Math.random() * 255;
                if (y < this.noiseAnimationWindowPos || y > this.noiseAnimationWindowPos + this.interferenceHeight) {
                    noiseImage.data[currentPixelOffset] *= 0.85;
                }
                noiseImage.data[currentPixelOffset + 1] = noiseImage.data[currentPixelOffset];
                noiseImage.data[currentPixelOffset + 2] = noiseImage.data[currentPixelOffset];
                noiseImage.data[currentPixelOffset + 3] = 50;
            }
        }
        // Put texture onto canvas
        this.canvasContext.putImageData(noiseImage, 0, 0);
        this.lastFrameUpdate = new Date().getTime();
        this.noiseAnimationWindowPos += 7;
        if (this.noiseAnimationWindowPos > canvasHeight) {
            this.noiseAnimationWindowPos = -canvasHeight;
        }
        this.scheduleNextRender();
    };
    TvNoiseCanvas.prototype.scheduleNextRender = function () {
        if (this.useAnimationFrame) {
            this.frameUpdateHandlerId = window.requestAnimationFrame(this.renderFrame.bind(this));
        }
        else {
            this.frameUpdateHandlerId = setTimeout(this.renderFrame.bind(this), this.frameInterval);
        }
    };
    return TvNoiseCanvas;
}(component_1.Component));
exports.TvNoiseCanvas = TvNoiseCanvas;


/***/ }),
/* 76 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var component_1 = __webpack_require__(2);
var timeout_1 = __webpack_require__(9);
/**
 * Overlays the player and displays an audio-only indicator.
 */
var AudioOnlyOverlay = (function (_super) {
    __extends(AudioOnlyOverlay, _super);
    function AudioOnlyOverlay(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.indicatorConfig = [
            new component_1.Component({ tag: 'div', cssClass: 'ui-audioonly-overlay-indicator', hidden: true }),
        ];
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-audioonly-overlay',
            hidden: false,
            components: _this.indicatorConfig,
        }, _this.config);
        return _this;
    }
    AudioOnlyOverlay.prototype.configure = function (player, uimanager) {
        _super.prototype.configure.call(this, player, uimanager);
        this.componentConfig = uimanager.getConfig().audioOnlyOverlayConfig || {};
        var config = this.getConfig();
        var indicator = config.components[0];
        var backgroundImageUrl = this.componentConfig.backgroundImageUrl;
        var element = this.getDomElement();
        var showBackgroundImage = function () {
            element.css('backgroundImage', "url(" + backgroundImageUrl + ")");
            element.css('backgroundSize', 'contain');
            element.css('backgroundColor', '#000000');
            element.css('animation', 'none');
            element.css('backgroundPosition', 'center');
        };
        var overlayShowTimeout = new timeout_1.Timeout(400, function () {
            indicator.show();
        });
        var showOverlay = function () {
            overlayShowTimeout.start();
        };
        var hideOverlay = function () {
            overlayShowTimeout.clear();
            indicator.hide();
        };
        if (backgroundImageUrl) {
            showBackgroundImage();
        }
        if (!this.componentConfig.hiddeIndicator) {
            player.addEventHandler(player.EVENT.ON_PLAY, showOverlay);
            player.addEventHandler(player.EVENT.ON_PAUSED, hideOverlay);
        }
    };
    return AudioOnlyOverlay;
}(container_1.Container));
exports.AudioOnlyOverlay = AudioOnlyOverlay;


/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var listselector_1 = __webpack_require__(33);
var dom_1 = __webpack_require__(1);
var ItemSelectionList = (function (_super) {
    __extends(ItemSelectionList, _super);
    function ItemSelectionList(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            tag: 'ul',
            cssClass: 'ui-itemselectionlist',
        }, _this.config);
        return _this;
    }
    ItemSelectionList.prototype.isActive = function () {
        return this.items.length > 1;
    };
    ItemSelectionList.prototype.toDomElement = function () {
        var listElement = new dom_1.DOM('ul', {
            'id': this.config.id,
            'class': this.getCssClasses(),
        });
        this.listElement = listElement;
        this.updateDomItems();
        return listElement;
    };
    ItemSelectionList.prototype.updateDomItems = function (selectedValue) {
        var _this = this;
        if (selectedValue === void 0) { selectedValue = null; }
        // Delete all children
        this.listElement.empty();
        var selectedListItem = null;
        var selectItem = function (listItem) {
            listItem.addClass(_this.prefixCss(ItemSelectionList.CLASS_SELECTED));
        };
        var deselectItem = function (listItem) {
            listItem.removeClass(_this.prefixCss(ItemSelectionList.CLASS_SELECTED));
        };
        var _loop_1 = function (item) {
            var listItem = new dom_1.DOM('li', {
                'type': 'li',
                'class': this_1.prefixCss('ui-selectionlistitem'),
            }).append(new dom_1.DOM('a', {}).html(item.label));
            if (!selectedListItem) {
                if (selectedValue == null) {
                    selectedListItem = listItem;
                }
                else if (String(selectedValue) === item.key) {
                    selectedListItem = listItem;
                }
            }
            // Handle list item selections
            listItem.on('click', function () {
                // Deselect the previous item (if there was a selected item)
                if (selectedListItem) {
                    deselectItem(selectedListItem);
                }
                // Select the clicked item
                selectedListItem = listItem;
                selectItem(listItem);
                // Fire the event
                _this.onItemSelectedEvent(item.key, false);
            });
            // Select default item
            if (selectedListItem) {
                selectItem(selectedListItem);
            }
            this_1.listElement.append(listItem);
        };
        var this_1 = this;
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            _loop_1(item);
        }
    };
    ItemSelectionList.prototype.onItemAddedEvent = function (value) {
        _super.prototype.onItemAddedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    ItemSelectionList.prototype.onItemRemovedEvent = function (value) {
        _super.prototype.onItemRemovedEvent.call(this, value);
        this.updateDomItems(this.selectedItem);
    };
    ItemSelectionList.prototype.onItemSelectedEvent = function (value, updateDomItems) {
        if (updateDomItems === void 0) { updateDomItems = true; }
        _super.prototype.onItemSelectedEvent.call(this, value);
        if (updateDomItems) {
            this.updateDomItems(value);
        }
    };
    return ItemSelectionList;
}(listselector_1.ListSelector));
ItemSelectionList.CLASS_SELECTED = 'selected';
exports.ItemSelectionList = ItemSelectionList;


/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var clickoverlay_1 = __webpack_require__(28);
/**
 * A watermark overlay with a clickable logo.
 */
var Watermark = (function (_super) {
    __extends(Watermark, _super);
    function Watermark(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-watermark',
            url: 'http://bitmovin.com',
        }, _this.config);
        return _this;
    }
    return Watermark;
}(clickoverlay_1.ClickOverlay));
exports.Watermark = Watermark;


/***/ }),
/* 79 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var container_1 = __webpack_require__(0);
var volumeslider_1 = __webpack_require__(26);
var volumetogglebutton_1 = __webpack_require__(17);
var timeout_1 = __webpack_require__(9);
/**
 * A composite volume control that consists of and internally manages a volume control button that can be used
 * for muting, and a (depending on the CSS style, e.g. slide-out) volume control bar.
 */
var VolumeControlButton = (function (_super) {
    __extends(VolumeControlButton, _super);
    function VolumeControlButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.volumeToggleButton = new volumetogglebutton_1.VolumeToggleButton();
        _this.volumeSlider = new volumeslider_1.VolumeSlider({
            vertical: config.vertical != null ? config.vertical : true,
            hidden: true,
        });
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-volumecontrolbutton',
            components: [_this.volumeToggleButton, _this.volumeSlider],
            hideDelay: 500,
        }, _this.config);
        return _this;
    }
    VolumeControlButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var volumeToggleButton = this.getVolumeToggleButton();
        var volumeSlider = this.getVolumeSlider();
        this.volumeSliderHideTimeout = new timeout_1.Timeout(this.getConfig().hideDelay, function () {
            volumeSlider.hide();
        });
        /*
         * Volume Slider visibility handling
         *
         * The volume slider shall be visible while the user hovers the mute toggle button, while the user hovers the
         * volume slider, and while the user slides the volume slider. If none of these situations are true, the slider
         * shall disappear.
         */
        var volumeSliderHovered = false;
        volumeToggleButton.getDomElement().on('mouseenter', function () {
            // Show volume slider when mouse enters the button area
            if (volumeSlider.isHidden()) {
                volumeSlider.show();
            }
            // Avoid hiding of the slider when button is hovered
            _this.volumeSliderHideTimeout.clear();
        });
        volumeToggleButton.getDomElement().on('mouseleave', function () {
            // Hide slider delayed when button is left
            _this.volumeSliderHideTimeout.reset();
        });
        volumeSlider.getDomElement().on('mouseenter', function () {
            // When the slider is entered, cancel the hide timeout activated by leaving the button
            _this.volumeSliderHideTimeout.clear();
            volumeSliderHovered = true;
        });
        volumeSlider.getDomElement().on('mouseleave', function () {
            // When mouse leaves the slider, only hide it if there is no slide operation in progress
            if (volumeSlider.isSeeking()) {
                _this.volumeSliderHideTimeout.clear();
            }
            else {
                _this.volumeSliderHideTimeout.reset();
            }
            volumeSliderHovered = false;
        });
        volumeSlider.onSeeked.subscribe(function () {
            // When a slide operation is done and the slider not hovered (mouse outside slider), hide slider delayed
            if (!volumeSliderHovered) {
                _this.volumeSliderHideTimeout.reset();
            }
        });
    };
    VolumeControlButton.prototype.release = function () {
        _super.prototype.release.call(this);
        this.volumeSliderHideTimeout.clear();
    };
    /**
     * Provides access to the internally managed volume toggle button.
     * @returns {VolumeToggleButton}
     */
    VolumeControlButton.prototype.getVolumeToggleButton = function () {
        return this.volumeToggleButton;
    };
    /**
     * Provides access to the internally managed volume silder.
     * @returns {VolumeSlider}
     */
    VolumeControlButton.prototype.getVolumeSlider = function () {
        return this.volumeSlider;
    };
    return VolumeControlButton;
}(container_1.Container));
exports.VolumeControlButton = VolumeControlButton;


/***/ }),
/* 80 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var button_1 = __webpack_require__(7);
var stringutils_1 = __webpack_require__(10);
/**
 * A button that is displayed during ads and can be used to skip the ad.
 */
var AdSkipButton = (function (_super) {
    __extends(AdSkipButton, _super);
    function AdSkipButton(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-button-ad-skip',
            skipMessage: {
                countdown: 'Skip ad in {remainingTime}',
                skip: 'Skip ad',
            },
        }, _this.config);
        return _this;
    }
    AdSkipButton.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig(); // TODO get rid of generic cast
        var skipMessage = config.skipMessage;
        var adEvent = null;
        var updateSkipMessageHandler = function () {
            // Display this button only if ad is skippable
            if (adEvent.skipOffset) {
                _this.show();
            }
            else {
                _this.hide();
            }
            // Update the skip message on the button
            if (player.getCurrentTime() < adEvent.skipOffset) {
                _this.setText(stringutils_1.StringUtils.replaceAdMessagePlaceholders(config.skipMessage.countdown, adEvent.skipOffset, player));
            }
            else {
                _this.setText(config.skipMessage.skip);
            }
        };
        var adStartHandler = function (event) {
            adEvent = event;
            skipMessage = adEvent.skipMessage || skipMessage;
            updateSkipMessageHandler();
            player.addEventHandler(player.EVENT.ON_TIME_CHANGED, updateSkipMessageHandler);
            player.addEventHandler(player.EVENT.ON_CAST_TIME_UPDATED, updateSkipMessageHandler);
        };
        var adEndHandler = function () {
            player.removeEventHandler(player.EVENT.ON_TIME_CHANGED, updateSkipMessageHandler);
            player.removeEventHandler(player.EVENT.ON_CAST_TIME_UPDATED, updateSkipMessageHandler);
        };
        player.addEventHandler(player.EVENT.ON_AD_STARTED, adStartHandler);
        player.addEventHandler(player.EVENT.ON_AD_SKIPPED, adEndHandler);
        player.addEventHandler(player.EVENT.ON_AD_ERROR, adEndHandler);
        player.addEventHandler(player.EVENT.ON_AD_FINISHED, adEndHandler);
        this.onClick.subscribe(function () {
            // Try to skip the ad (this only works if it is skippable so we don't need to take extra care of that here)
            player.skipAd();
        });
    };
    return AdSkipButton;
}(button_1.Button));
exports.AdSkipButton = AdSkipButton;


/***/ }),
/* 81 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var label_1 = __webpack_require__(6);
var stringutils_1 = __webpack_require__(10);
/**
 * A label that displays a message about a running ad, optionally with a countdown.
 */
var AdMessageLabel = (function (_super) {
    __extends(AdMessageLabel, _super);
    function AdMessageLabel(config) {
        if (config === void 0) { config = {}; }
        var _this = _super.call(this, config) || this;
        _this.config = _this.mergeConfig(config, {
            cssClass: 'ui-label-ad-message',
            text: 'This ad will end in {remainingTime} seconds.',
        }, _this.config);
        return _this;
    }
    AdMessageLabel.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var text = this.getConfig().text;
        var updateMessageHandler = function () {
            _this.setText(stringutils_1.StringUtils.replaceAdMessagePlaceholders(text, null, player));
        };
        var adStartHandler = function (event) {
            text = event.adMessage || text;
            updateMessageHandler();
            player.addEventHandler(player.EVENT.ON_TIME_CHANGED, updateMessageHandler);
            player.addEventHandler(player.EVENT.ON_CAST_TIME_UPDATED, updateMessageHandler);
        };
        var adEndHandler = function () {
            player.removeEventHandler(player.EVENT.ON_TIME_CHANGED, updateMessageHandler);
            player.removeEventHandler(player.EVENT.ON_CAST_TIME_UPDATED, updateMessageHandler);
        };
        player.addEventHandler(player.EVENT.ON_AD_STARTED, adStartHandler);
        player.addEventHandler(player.EVENT.ON_AD_SKIPPED, adEndHandler);
        player.addEventHandler(player.EVENT.ON_AD_ERROR, adEndHandler);
        player.addEventHandler(player.EVENT.ON_AD_FINISHED, adEndHandler);
    };
    return AdMessageLabel;
}(label_1.Label));
exports.AdMessageLabel = AdMessageLabel;


/***/ }),
/* 82 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var clickoverlay_1 = __webpack_require__(28);
/**
 * A simple click capture overlay for clickThroughUrls of ads.
 */
var AdClickOverlay = (function (_super) {
    __extends(AdClickOverlay, _super);
    function AdClickOverlay() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AdClickOverlay.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var clickThroughUrl = null;
        var clickThroughEnabled = !player.getConfig().advertising
            || !player.getConfig().advertising.hasOwnProperty('clickThroughEnabled')
            || player.getConfig().advertising.clickThroughEnabled;
        player.addEventHandler(player.EVENT.ON_AD_STARTED, function (event) {
            clickThroughUrl = event.clickThroughUrl;
            if (clickThroughEnabled) {
                _this.setUrl(clickThroughUrl);
            }
            else {
                // If click-through is disabled, we set the url to null to avoid it open
                _this.setUrl(null);
            }
        });
        // Clear click-through URL when ad has finished
        var adFinishedHandler = function () {
            _this.setUrl(null);
        };
        player.addEventHandler(player.EVENT.ON_AD_FINISHED, adFinishedHandler);
        player.addEventHandler(player.EVENT.ON_AD_SKIPPED, adFinishedHandler);
        player.addEventHandler(player.EVENT.ON_AD_ERROR, adFinishedHandler);
        this.onClick.subscribe(function () {
            // Pause the ad when overlay is clicked
            player.pause('ui-content-click');
            // Notify the player of the clicked ad
            player.fireEvent(player.EVENT.ON_AD_CLICKED, {
                clickThroughUrl: clickThroughUrl,
            });
        });
    };
    return AdClickOverlay;
}(clickoverlay_1.ClickOverlay));
exports.AdClickOverlay = AdClickOverlay;


/***/ }),
/* 83 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var uicontainer_1 = __webpack_require__(14);
var timeout_1 = __webpack_require__(9);
/**
 * The base container for Cast receivers that contains all of the UI and takes care that the UI is shown on
 * certain playback events.
 */
var CastUIContainer = (function (_super) {
    __extends(CastUIContainer, _super);
    function CastUIContainer(config) {
        return _super.call(this, config) || this;
    }
    CastUIContainer.prototype.configure = function (player, uimanager) {
        var _this = this;
        _super.prototype.configure.call(this, player, uimanager);
        var config = this.getConfig();
        /*
         * Show UI on Cast devices at certain playback events
         *
         * Since a Cast receiver does not have a direct HCI, we show the UI on certain playback events to give the user
         * a chance to see on the screen what's going on, e.g. on play/pause or a seek the UI is shown and the user can
         * see the current time and position on the seek bar.
         * The UI is shown permanently while playback is paused, otherwise hides automatically after the configured
         * hide delay time.
         */
        var isUiShown = false;
        var hideUi = function () {
            uimanager.onControlsHide.dispatch(_this);
            isUiShown = false;
        };
        this.castUiHideTimeout = new timeout_1.Timeout(config.hideDelay, hideUi);
        var showUi = function () {
            if (!isUiShown) {
                uimanager.onControlsShow.dispatch(_this);
                isUiShown = true;
            }
        };
        var showUiPermanently = function () {
            showUi();
            _this.castUiHideTimeout.clear();
        };
        var showUiWithTimeout = function () {
            showUi();
            _this.castUiHideTimeout.start();
        };
        var showUiAfterSeek = function () {
            if (player.isPlaying()) {
                showUiWithTimeout();
            }
            else {
                showUiPermanently();
            }
        };
        player.addEventHandler(player.EVENT.ON_READY, showUiWithTimeout);
        player.addEventHandler(player.EVENT.ON_SOURCE_LOADED, showUiWithTimeout);
        player.addEventHandler(player.EVENT.ON_PLAY, showUiWithTimeout);
        player.addEventHandler(player.EVENT.ON_PAUSED, showUiPermanently);
        player.addEventHandler(player.EVENT.ON_SEEK, showUiPermanently);
        player.addEventHandler(player.EVENT.ON_SEEKED, showUiAfterSeek);
    };
    CastUIContainer.prototype.release = function () {
        _super.prototype.release.call(this);
        this.castUiHideTimeout.clear();
    };
    return CastUIContainer;
}(uicontainer_1.UIContainer));
exports.CastUIContainer = CastUIContainer;


/***/ }),
/* 84 */
/***/ (function(module, exports) {

/*! Hive Stats Pack build 4.1.0 Copyright(c) 2015 HiveStreaming AB, All rights reserved.
 * Authors: mikael.hogqvist@hivestreaming.com - riccardo.reale@hivestreaming.com - roberto.roverso@hivestreaming.com */
/*! AtatusJs - v2.3.12 - 2016-07-03
 * Copyright (c) 2016 Atatus */
!function(a){function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function c(a){return"undefined"==typeof a}if(a){var d={},e=a.TraceKit,f=[].slice,g="?";d.noConflict=function(){return a.TraceKit=e,d},d.wrap=function(a){function b(){try{return a.apply(this,arguments)}catch(b){throw d.report(b),b}}return b},d.report=function(){function c(a){i(),m.push(a)}function e(a){for(var b=m.length-1;b>=0;--b)m[b]===a&&m.splice(b,1)}function g(a,c){var e=null;if(!c||d.collectWindowErrors){for(var g in m)if(b(m,g))try{m[g].apply(null,[a].concat(f.call(arguments,2)))}catch(h){e=h}if(e)throw e}}function h(a,b,c,e,f){var h=null;if(f)h=d.computeStackTrace(f);else if(o)d.computeStackTrace.augmentStackTraceWithInitialElement(o,b,c,a),h=o,o=null,n=null;else{var i={url:b,line:c,column:e};i.func=d.computeStackTrace.guessFunctionName(i.url,i.line),i.context=d.computeStackTrace.gatherContext(i.url,i.line),h={mode:"onerror",message:a,url:document.location.href,stack:[i],useragent:navigator.userAgent}}return g(h,"from window.onerror"),k?k.apply(this,arguments):!1}function i(){l!==!0&&(k=a.onerror,a.onerror=h,l=!0)}function j(b){var c=f.call(arguments,1);if(o){if(n===b)return;var e=o;o=null,n=null,g.apply(null,[e,null].concat(c))}var h=d.computeStackTrace(b);throw o=h,n=b,a.setTimeout(function(){n===b&&(o=null,n=null,g.apply(null,[h,null].concat(c)))},h.incomplete?2e3:0),b}var k,l,m=[],n=null,o=null;return j.subscribe=c,j.unsubscribe=e,j}(),d.computeStackTrace=function(){function e(b){if(!d.remoteFetching)return"";try{var c=function(){try{return new a.XMLHttpRequest}catch(b){return new a.ActiveXObject("Microsoft.XMLHTTP")}},e=c();return e.open("GET",b,!1),e.send(""),e.responseText}catch(f){return""}}function f(a){if("string"!=typeof a)return[];if(!b(w,a)){var c="",d="";try{d=document.domain}catch(f){}-1!==a.indexOf(d)&&(c=e(a)),w[a]=c?c.split("\n"):[]}return w[a]}function h(a,b){var d,e=/function ([^(]*)\(([^)]*)\)/,h=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,i="",j=10,k=f(a);if(!k.length)return g;for(var l=0;j>l;++l)if(i=k[b-l]+i,!c(i)){if(d=h.exec(i))return d[1];if(d=e.exec(i))return d[1]}return g}function i(a,b){var e=f(a);if(!e.length)return null;var g=[],h=Math.floor(d.linesOfContext/2),i=h+d.linesOfContext%2,j=Math.max(0,b-h-1),k=Math.min(e.length,b+i-1);b-=1;for(var l=j;k>l;++l)c(e[l])||g.push(e[l]);return g.length>0?g:null}function j(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function k(a){return j(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function l(a,b){for(var c,d,e=0,g=b.length;g>e;++e)if((c=f(b[e])).length&&(c=c.join("\n"),d=a.exec(c)))return{url:b[e],line:c.substring(0,d.index).split("\n").length,column:d.index-c.lastIndexOf("\n",d.index)-1};return null}function m(a,b,c){var d,e=f(b),g=new RegExp("\\b"+j(a)+"\\b");return c-=1,e&&e.length>c&&(d=g.exec(e[c]))?d.index:null}function n(b){for(var c,d,e,f,g=[a.location.href],h=document.getElementsByTagName("script"),i=""+b,m=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,n=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,o=0;o<h.length;++o){var p=h[o];p.src&&g.push(p.src)}if(e=m.exec(i)){var q=e[1]?"\\s+"+e[1]:"",r=e[2].split(",").join("\\s*,\\s*");c=j(e[3]).replace(/;$/,";?"),d=new RegExp("function"+q+"\\s*\\(\\s*"+r+"\\s*\\)\\s*{\\s*"+c+"\\s*}")}else d=new RegExp(j(i).replace(/\s+/g,"\\s+"));if(f=l(d,g))return f;if(e=n.exec(i)){var s=e[1];if(c=k(e[2]),d=new RegExp("on"+s+"=[\\'\"]\\s*"+c+"\\s*[\\'\"]","i"),f=l(d,g[0]))return f;if(d=new RegExp(c),f=l(d,g))return f}return null}function o(a){if(!a.stack)return null;for(var b,d,e=/^\s*at (.*?) ?\(?((?:file|https?|chrome-extension):.*?):(\d+)(?::(\d+))?\)?\s*$/i,f=/^\s*(.*?)(?:\((.*?)\))?@?((?:file|https?|chrome):.*?):(\d+)(?::(\d+))?\s*$/i,j=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,k=a.stack.split("\n"),l=[],n=/^(.*) is undefined$/.exec(a.message),o=0,p=k.length;p>o;++o){if(b=f.exec(k[o]))d={url:b[3],func:b[1]||g,args:b[2]?b[2].split(","):"",line:+b[4],column:b[5]?+b[5]:null};else if(b=e.exec(k[o]))d={url:b[2],func:b[1]||g,line:+b[3],column:b[4]?+b[4]:null};else{if(!(b=j.exec(k[o])))continue;d={url:b[2],func:b[1]||g,line:+b[3],column:b[4]?+b[4]:null}}!d.func&&d.line&&(d.func=h(d.url,d.line)),d.line&&(d.context=i(d.url,d.line)),l.push(d)}return l.length?(l[0]&&l[0].line&&!l[0].column&&n?l[0].column=m(n[1],l[0].url,l[0].line):l[0].column||c(a.columnNumber)||(l[0].column=a.columnNumber+1),{mode:"stack",name:a.name,message:a.message,url:document.location.href,stack:l,useragent:navigator.userAgent}):null}function p(a){for(var b,c=a.stacktrace,d=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,e=c.split("\n"),f=[],g=0,j=e.length;j>g;g+=2)if(b=d.exec(e[g])){var k={line:+b[1],column:+b[2],func:b[3]||b[4],args:b[5]?b[5].split(","):[],url:b[6]};if(!k.func&&k.line&&(k.func=h(k.url,k.line)),k.line)try{k.context=i(k.url,k.line)}catch(l){}k.context||(k.context=[e[g+1]]),f.push(k)}return f.length?{mode:"stacktrace",name:a.name,message:a.message,url:document.location.href,stack:f,useragent:navigator.userAgent}:null}function q(c){var d=c.message.split("\n");if(d.length<4)return null;var e,g,j,m,n=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,q=[],r=document.getElementsByTagName("script"),s=[];for(g in r)b(r,g)&&!r[g].src&&s.push(r[g]);for(g=2,j=d.length;j>g;g+=2){var t=null;if(e=n.exec(d[g]))t={url:e[2],func:e[3],line:+e[1]};else if(e=o.exec(d[g])){t={url:e[3],func:e[4]};var u=+e[1],v=s[e[2]-1];if(v&&(m=f(t.url))){m=m.join("\n");var w=m.indexOf(v.innerText);w>=0&&(t.line=u+m.substring(0,w).split("\n").length)}}else if(e=p.exec(d[g])){var x=a.location.href.replace(/#.*$/,""),y=e[1],z=new RegExp(k(d[g+1]));m=l(z,[x]),t={url:x,line:m?m.line:y,func:""}}if(t){t.func||(t.func=h(t.url,t.line));var A=i(t.url,t.line),B=A?A[Math.floor(A.length/2)]:null;t.context=A&&B.replace(/^\s*/,"")===d[g+1].replace(/^\s*/,"")?A:[d[g+1]],q.push(t)}}return q.length?{mode:"multiline",name:c.name,message:d[0],url:document.location.href,stack:q,useragent:navigator.userAgent}:null}function r(a,b,c,d){var e={url:b,line:c};if(e.url&&e.line){a.incomplete=!1,e.func||(e.func=h(e.url,e.line)),e.context||(e.context=i(e.url,e.line));var f=/ '([^']+)' /.exec(d);if(f&&(e.column=m(f[1],e.url,e.line)),a.stack.length>0&&a.stack[0].url===e.url){if(a.stack[0].line===e.line)return!1;if(!a.stack[0].line&&a.stack[0].func===e.func)return a.stack[0].line=e.line,a.stack[0].context=e.context,!1}return a.stack.unshift(e),a.partial=!0,!0}return a.incomplete=!0,!1}function s(a,b){for(var c,e,f,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,j=[],k={},l=!1,o=s.caller;o&&!l;o=o.caller)if(o!==t&&o!==d.report){if(e={url:null,func:g,line:null,column:null},o.name?e.func=o.name:(c=i.exec(o.toString()))&&(e.func=c[1]),"undefined"==typeof e.func)try{e.func=c.input.substring(0,c.input.indexOf("{"))}catch(p){}if(f=n(o)){e.url=f.url,e.line=f.line,e.func===g&&(e.func=h(e.url,e.line));var q=/ '([^']+)' /.exec(a.message||a.description);q&&(e.column=m(q[1],f.url,f.line))}k[""+o]?l=!0:k[""+o]=!0,j.push(e)}b&&j.splice(0,b);var u={mode:"callers",name:a.name,message:a.message,url:document.location.href,stack:j,useragent:navigator.userAgent};return r(u,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description),u}function t(a,b){var c=null;b=null==b?0:+b;try{if(c=p(a))return c}catch(d){if(v)throw d}try{if(c=o(a))return c}catch(d){if(v)throw d}try{if(c=q(a))return c}catch(d){if(v)throw d}try{if(c=s(a,b+1))return c}catch(d){if(v)throw d}return{mode:"failed"}}function u(a){a=(null==a?0:+a)+1;try{throw new Error}catch(b){return t(b,a+1)}}var v=!1,w={};return t.augmentStackTraceWithInitialElement=r,t.guessFunctionName=h,t.gatherContext=i,t.ofCaller=u,t.getSource=f,t}(),d.extendToAsynchronousCallbacks=function(){var b=function(b){var c=a[b];a[b]=function(){var a=f.call(arguments),b=a[0];return"function"==typeof b&&(a[0]=d.wrap(b)),c.apply?c.apply(this,a):c(a[0],a[1])}};b("setTimeout"),b("setInterval")},d.remoteFetching||(d.remoteFetching=!0),d.collectWindowErrors||(d.collectWindowErrors=!0),(!d.linesOfContext||d.linesOfContext<1)&&(d.linesOfContext=11),a.TraceKit=d}}("undefined"!=typeof window?window:global),function(a,b){"use strict";if(a){var c=a.event.add;a.event.add=function(d,e,f,g,h){if("function"!=typeof f&&"function"!=typeof f.handler)return c.call(this,d,e,f,g,h);var i;return f.handler?(i=f.handler,f.handler=b.wrap(f.handler)):(i=f,f=b.wrap(f)),f.guid=i.guid?i.guid:i.guid=a.guid++,c.call(this,d,e,f,g,h)};var d=a.fn.ready;a.fn.ready=function(a){return d.call(this,b.wrap(a))};var e=a.ajax;a.ajax=function(c,d){"object"==typeof c&&(d=c,c=void 0),d=d||{};for(var f,g=["complete","error","success"];f=g.pop();)a.isFunction(d[f])&&(d[f]=b.wrap(d[f]));try{return c?e.call(this,c,d):e.call(this,d)}catch(h){throw b.report(h),h}}}}(window.jQuery,window.TraceKit),function(a,b,c,d){function e(a){var b=a,c=a.split("//")[1];if(c){var d=c.indexOf("?"),e=c.toString().substring(0,d),f=e.split("/").slice(0,4).join("/"),g=e.substring(0,48);b=f.length<g.length?f:g,b!==e&&(b+="..")}return b}function f(a,b,c,f){if(K&&(L||b.getAllResponseHeaders())){var g="AJAX Error: "+(b.statusText||"unknown")+" "+(c.type||"unknown")+" "+(e(c.url)||"unknown");V.send(f||a.type,{status:b.status,statusText:b.statusText,type:c.type,url:c.url,ajaxErrorMessage:g,contentType:c.contentType,requestData:c.data&&c.data.slice?c.data.slice(0,10240):d,responseData:b.responseText&&b.responseText.slice?b.responseText.slice(0,10240):d,activeTarget:a.target&&a.target.activeElement?a.target.activeElement.outerHTML:d})}}function g(){return o&&""!==o?!0:(R.log("Atatus API key has not been configured, make sure you call atatus.config(yourApiKey)"),!1)}function h(){var c=b.documentElement,d=b.getElementsByTagName("body")[0],e=a.innerWidth||c.clientWidth||d.clientWidth,f=a.innerHeight||c.clientHeight||d.clientHeight;return{width:e,height:f}}function i(a){var b=(new Date).toJSON();try{var c="atatusjs="+b+"="+R.getRandomInt();"undefined"==typeof localStorage[c]&&(localStorage[c]=a)}catch(d){R.log("Atatus: LocalStorage full, cannot save exception")}}function j(){try{return"localStorage"in a&&null!==a.localStorage}catch(b){return!1}}function k(){if(j()&&localStorage.length>0)for(var a in localStorage)if("atatusjs="===a.substring(0,9)){try{var b=JSON.parse(localStorage[a]);"apikey"in b&&m(N,b)}catch(c){R.log("Atatus: Invalid JSON object in LocalStorage")}localStorage.removeItem(a)}}function l(a,c){if(c=c||{},!a.stack||!a.stack.length)return void R.log("Atatus: Canceling send due to no stacktrace.");R.isEmpty(c.customData)&&(c.customData="function"==typeof p?p():p),R.isEmpty(c.tags)&&(c.tags=E);var d=c.customData&&c.customData.ajaxErrorMessage||a.message;if(d&&0===d.indexOf("Uncaught ")&&(d=a.message.substring(9)),d=d||c.status||"Script error.",w&&w.test(d))return void R.log("Atatus: canceling send due to ignore errors");var e=[];a.stack&&a.stack.length&&R.forEach(a.stack,function(a,b){R.endsWith(b.url,"/atatus.js")||e.push({ln:b.line||0,cn:b.column||0,f:b.url||"anonymous",m:b.func||"[anonymous]"})});var f=[a.name,d,JSON.stringify(e)].join("|");if(f===x)return void R.log("Atatus: canceling send due to duplicate errors");x=f;var g=c.customData;try{JSON.stringify(g)}catch(h){var i="Cannot add custom data; may contain circular reference";g={error:i},R.log("Atatus: "+i)}var j=U.getAllEvents();S.clear();var k={"class":a.name,name:d,backTraces:e,userActions:j,net:null,customData:g||null,tags:c.tags,sourcemap:J,request:{url:b.location.href,ua:navigator.userAgent}};if("function"==typeof y&&(k.groupingKey=y(k)),"function"==typeof z){var l=z(k);l&&m(N,k)}else m(N,k)}function m(c,d){if(G&&G.length&&-1===G.indexOf(location.host))return void R.log("Atatus: canceling send due to not a allowed domain");if(g()){if(!d.ts){var e=a.screen||h();d.ts=(new Date).getTime(),d.apikey=o,d.request=d.request||{},d.request.url=d.request.url||b.location.href,d.request.ua=d.request.ua||navigator.userAgent,d.request.w=e.width,d.request.h=e.height,d.v=r||"",d._v=B||""}q&&(d.cid=q.userId||null),R.log("Sending data to Atatus Receiver:",d),n(c,JSON.stringify(d))}}function n(a,b){var c=new Image,d=M+a+"?data="+encodeURIComponent(b);c.crossOrigin="anonymous",c.onload=function(){k()},c.onerror=c.onabort=function(){I&&a===N&&i(b)},c.src=d}var o,p,q,r,s,t,u,v,w,x,y,z,A,B="2.3.12",C=TraceKit.noConflict(),D=a.atatus,E=[],F=!1,G=[],H=!1,I=!1,J=!1,K=!1,L=!1,M="https://br-rx.atatus.com",N="/track/browser/errors",O="/track/browser/perf",P="/track/browser/perf/ajax",Q="/track/browser/perf/txn";c&&(A=c(b));var R={isBoolean:function(a){return"undefined"!=typeof a&&"boolean"==typeof a},isString:function(a){return"string"==typeof a},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},endsWith:function(a,b){return a&&b?-1!==a.indexOf(b,a.length-b.length):!1},joinRegExp:function(a){for(var b,c=[],d=0,e=a.length;e>d;d++)b=a[d],R.isString(b)?c.push(b.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")):b&&b.source&&c.push(b.source);return new RegExp(c.join("|"),"i")},getTargetUrl:function(b){return a.XDomainRequest&&H&&(b=b.slice(6)),b},now:function(){return(new Date).getTime()},pad:function(a){return a=String(a),1===a.length&&(a="0"+a),a},merge:function(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d},mergeArray:function(a,b){return null!=b?a.concat(b):a},forEach:function(a,b){for(var c=0;c<a.length;c++)b.call(null,c,a[c])},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},getRandomInt:function(){return Math.floor(9007199254740992*Math.random())},log:function(b,c){F&&a.console&&a.console.log&&(a.console.log(b),c&&a.console.log(c))},bind:function(a,b){return function(){return a.apply(b,Array.prototype.slice.call(arguments))}},canAllowInsecureSubmissions:function(){var b=a.navigator.userAgent,c=b.match(/Trident\/([\d.]+)/),d=c&&"7.0"===c[1]?11:(b=b.match(/MSIE ([\d.]+)/))?parseInt(b[1],10):!1;return d&&9>=d},uuid4:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},addEventListener:function(b,c,d){return"undefined"!=typeof a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,d):void 0},arrayFromObject:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}},S={eventObject:{},all:function(a){for(var b=this.getEventObject(a),c=[],d=0;d<b.length;d++)c.push(b[d].value);return c},clear:function(){for(var a in this.eventObject)this.eventObject.hasOwnProperty(a)&&(this.eventObject[a].length=0)},add:function(a,b){var c=this.getEventObject(a),d=R.uuid4();return c.push({key:d,value:b}),this.truncateEventObject(a,10),d},get:function(a,b){for(var c=this.getEventObject(a),d=0;d<c.length;d++)if(c[d].key===b)return c[d].value;return!1},getEventObject:function(a){return this.eventObject[a]||(this.eventObject[a]=[]),this.eventObject[a]},truncateEventObject:function(a,b){var c=this.getEventObject(a);c.length>b&&(this.eventObject[a]=c.slice(c.length-b))}},T={attach:function(b,c,d,e,f){b=b||a.console||{};for(var g=f||["log","debug","info","warn","error"],h=g.pop(),i=function(a,b,d){c&&S.add("user",{ts:R.now(),c:"console",l:a,m:b}),"error"===a&&e&&V.notify(new Error(b),d)};h;)this.wrapConsoleMethod(b,h,d,i),h=g.pop()},wrapConsoleMethod:function(a,b,c,d){var e=a[b],f=a;b in a&&(a[b]=function(){var a=[].slice.call(arguments),g=""+a.join(" "),h={level:b,logger:"console"};d&&d(b,g,h),e&&c&&Function.prototype.apply.call(e,f,a)})}},U={attach:function(){var a=R.bind(this.onDocumentClicked,this),c=R.bind(this.onInputChanged,this);b.addEventListener?(b.addEventListener("click",a,!0),b.addEventListener("blur",c,!0)):b.attachEvent&&(b.attachEvent("onclick",a),b.attachEvent("onfocusout",c))},writeUserEvent:function(a,b,c,d){"password"===this.getElementType(a)&&(c=void 0),S.add("user",{ts:R.now(),a:b,e:this.getOuterHTML(a),v:this.getValueKind(c,d)})},onDocumentClicked:function(a){var b=this.getElementFromEvent(a);b&&b.tagName&&(this.isTarget(b,"a")||this.isTarget(b,"button")||this.isTarget(b,"input",["button","submit"])?this.writeUserEvent(b,"click"):this.isTarget(b,"input",["checkbox","radio"])&&this.writeUserEvent(b,"check",b.value,b.checked))},onInputChanged:function(a){var b=this.getElementFromEvent(a);b&&b.tagName&&(this.isTarget(b,"textarea")?this.writeUserEvent(b,"input",b.value):this.isTarget(b,"select")&&b.options&&b.options.length?this.onSelectInputChanged(b):this.isTarget(b,"input")&&!this.isTarget(b,"input",["button","submit","hidden","checkbox","radio"])&&this.writeUserEvent(b,"input",b.value))},onSelectInputChanged:function(a){if(a.multiple){for(var b=0;b<a.options.length;b++)if(a.options[b].selected){this.writeUserEvent(a,"select",a.options[b].value);break}}else 0<=a.selectedIndex&&a.options[a.selectedIndex]&&this.writeUserEvent(a,"select",a.options[a.selectedIndex].value)},getElementFromEvent:function(a){return a.target||b.elementFromPoint(a.clientX,a.clientY)},isTarget:function(a,b,c){if(a.tagName.toLowerCase()!==b.toLowerCase())return!1;if(!c)return!0;for(var d=this.getElementType(a),e=0;e<c.length;e++)if(c[e]===d)return!0;return!1},getElementType:function(a){return(a.getAttribute("type")||"").toLowerCase()},getOuterHTML:function(a){for(var b="<"+a.tagName.toLowerCase(),c=a.attributes,d=0,e=c.length;e>d;d++){var f=c[d].name;"value"!==f.toLowerCase()&&(b+=" "+f+'="'+c[d].value+'"')}return b+=" >"},getValueKind:function(a,b){return null==a?null:{length:a.length,checked:b,pattern:this.matchInputPattern(a)}},matchInputPattern:function(a){return""===a?"empty":/^[a-z0-9!#$%&'*+=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/.test(a)?"email":/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(a)||/^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(a)?"date":/^(?:(?:\+?1\s*(?:[.\-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.\-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.\-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(a)?"phone":/^\s*$/.test(a)?"whitespace":/^\d*$/.test(a)?"numeric":"character"},getAllEvents:function(){return S.all("user")}},V={noConflict:function(){return a.atatus=D,V},isConfigured:function(){return!!o},config:function(b,c){return c=c||{},o=b,C.remoteFetching=!1,w=[],c&&(p=c.customData,E=c.tags||[],J=!(!c.enableSourcemap&&!c.sourcemap),s=!!c.disableUserActions,t=!!c.disableAjaxMonitoring,u=!!c.disableRUM,F=!!c.debugMode,c.ignoreErrors&&R.isArray(c.ignoreErrors)&&(w=c.ignoreErrors),V.setAllowedDomains(c.allowedDomains),V.setVersion(c.version),V.enableOffline(c.enableOffline||c.offline),V.onBeforeErrorSend(c.beforeErrorSend),V.setGroupingKeyCallback(c.groupingKeyCallback)),H=R.canAllowInsecureSubmissions(),w.push(/^Script error\.?$/),w.push(/^Javascript error: Script error\.? on line 0$/),w=R.joinRegExp(w),k(),v={enabled:!0,timeline:!0,display:!0,error:!0,levels:null},R.isBoolean(c.console)&&(v.enabled=c.console),R.isBoolean(c.consoleTimeline)&&(v.timeline=c.consoleTimeline),R.isBoolean(c.consoleDisplay)&&(v.display=c.consoleDisplay),R.isBoolean(c.consoleErrorNotify)&&(v.error=c.consoleErrorNotify),R.isArray(c.consoleTimelineLevels)&&(v.levels=c.consoleTimelineLevels),v.enabled&&"console"in a&&a.console.log&&T.attach(a.console,v.timeline,v.display,v.error,v.levels),s||U.attach(),t||u||V.__attachAjaxHooks(),V},install:function(){return g()?(C.report.subscribe(l),C.extendToAsynchronousCallbacks(),A&&K&&A.ajaxError(f),V):void 0},uninstall:function(){return o=null,C.report.unsubscribe(l),A&&K&&A.unbind("ajaxError",f),V},setCustomData:function(a){return p=a,V},setTags:function(a){return E=a,V},setAllowedDomains:function(a){return a&&R.isArray(a)&&(G=a),V},getAllowedDomains:function(){return G},setUser:function(a,b,c,d){return q={},a&&(q.userId=""+a),b&&(q.email=""+b),c&&(q.firstName=""+c),d&&(q.lastName=""+d),V},setVersion:function(a){return a&&(r=""+a),V},enableOffline:function(a){return R.isBoolean(a)&&(I=a),V},onBeforeErrorSend:function(a){return"function"==typeof a&&(z=a),V},setGroupingKeyCallback:function(a){return"function"==typeof a&&(y=a),V},setAPIEndpoint:function(a){return M=a,V},init:function(a,b,c){return c&&(b=b||{},b.customData=c),V.config(a,b)},withCustomData:function(a){return V.setCustomData(a)},withTags:function(a){return V.setTags(a)},attach:function(){return V.install()},detach:function(){return V.uninstall()},notify:function(a,b,c){return V.send(a,b,c)},sendPerf:function(a){return u?void R.log("RUM is disabled. Please enable it in the config options."):m(O,a)},sendAjaxPerf:function(a){return u?void R.log("RUM is disabled. Please enable it in the config options."):m(P,a)},sendTxnPerf:function(a){return m(Q,a)},send:function(a,b,c){try{l(C.computeStackTrace(a),{customData:R.merge(p,b),tags:R.mergeArray(E,c)})}catch(d){if(a!==d)throw d}return V},_helper:R};a.atatus=V}(window,document,window.jQuery),function(a,b,c){function d(a){a.pl<=0||atatus.sendPerf(a)}function e(){var b=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance,c=b.timing,e=b.navigation;if(0===c.loadEventEnd)return!1;clearInterval(i),i=null;var f=c.navigationStart;0>=f&&(f=c.fetchStart);var g={};for(var h in j)g[j[h]]=-1,h in c&&(c[h]<=0||(g[j[h]]=c[h]-f));var k={nty:e.type,rc:e.redirectCount,nt:g.rps-g.ns,dp:g.dce-g.rps,pr:g.le-g.dce,fe:g.le-g.rps,pl:g.le-g.ns};d(k)}function f(){if(!h||!h.bDone)return!1;clearInterval(i),i=!1;var a=h.getMeasures();if(null!=a&&null!=a.backend&&null!=a.frontend&&null!=a["page load time"]&&null!=a["total load time"]){var b=a.backend,c=a.backend+a.frontend,e={nty:0,rc:0,nt:b,dp:c-b,pr:a["total load time"]-c,fe:a["total load time"]-b,pl:a["total load time"]};d(e)}}var g=(new Date).getTime(),h=h||{};h.q=h.q||[],h.version="0.3",h.targetOrigin=b.location.protocol+"//"+b.location.hostname,h.bPostMessage=!1,h.beaconUrl=h.beaconUrl||"/images/beacon.gif",h.autorun=!1,h.init=function(){if(h.bDone=!1,h.bUnloaded=!1,h.marks={},h.measures={},h.starts={},h.findStartTime(),h.addEventListener("beforeunload",h.beforeUnload,!1),h.addEventListener("pagehide",h.beforeUnload,!1),h.addEventListener("unload",h.beforeUnload,!1),h.processQ(),"complete"===b.readyState){var c=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;c&&"undefined"!=typeof c.timing&&"undefined"!=typeof c.timing.loadEventEnd&&(h.mark("firstbyte",c.timing.responseStart),h.mark("onload",c.timing.loadEventEnd)),h.done()}else h.addEventListener("load",h.onload,!1)},h.processQ=function(){for(var a=h.q.length,b=0;a>b;b++){var c=h.q[b],d=c[0];"mark"===d?h.mark(c[1],c[2]):"measure"===d?h.measure(c[1],c[2],c[3]):"done"===d&&h.done(c[1])}},h.mark=function(b,c){return h.dprint("RUM_EPISODES.mark: "+b+", "+c),b?(h.marks[b]=parseInt(c||(new Date).getTime()),h.bPostMessage&&a.postMessage("RUM_EPISODES:mark:"+b+":"+c,h.targetOrigin),void("firstbyte"===b?h.measure("backend","starttime","firstbyte"):"onload"===b?(h.measure("frontend","firstbyte","onload"),h.measure("page load time","starttime","onload")):"done"===b&&h.measure("total load time","starttime","done"))):void h.dprint("Error: markName is undefined in RUM_EPISODES.mark.")},h.measure=function(b,c,d){if(h.dprint("RUM_EPISODES.measure: "+b+", "+c+", "+d),!b)return void h.dprint("Error: episodeName is undefined in RUM_EPISODES.measure.");var e;if("undefined"==typeof c)e="number"==typeof h.marks[b]?h.marks[b]:(new Date).getTime();else if("number"==typeof h.marks[c])e=h.marks[c];else{if("number"!=typeof c)return void h.dprint("Error: unexpected startNameOrTime in RUM_EPISODES.measure: "+c);e=c}var f;if("undefined"==typeof d)f=(new Date).getTime();else if("number"==typeof h.marks[d])f=h.marks[d];else{if("number"!=typeof d)return void h.dprint("Error: unexpected endNameOrTime in RUM_EPISODES.measure: "+d);f=d}h.starts[b]=parseInt(e),h.measures[b]=parseInt(f-e),h.bPostMessage&&a.postMessage("RUM_EPISODES:measure:"+b+":"+e+":"+f,h.targetOrigin)},h.done=function(b){h.bDone=!0,h.mark("done"),h.bPostMessage&&a.postMessage("RUM_EPISODES:done",h.targetOrigin),"function"==typeof b&&b()},h.getMarks=function(){return h.marks},h.getMeasures=function(){return h.measures},h.getStarts=function(){return h.starts},h.findStartTime=function(){var a=h.findStartWebTiming()||h.findStartCookie();a&&h.mark("starttime",a)},h.findStartWebTiming=function(){var b,c=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;return c&&"undefined"!=typeof c.timing&&"undefined"!=typeof c.timing.navigationStart&&(b=c.timing.navigationStart,h.dprint("RUM_EPISODES.findStartWebTiming: startTime = "+b)),b},h.findStartCookie=function(){for(var d=b.cookie.split(" "),e=0;e<d.length;e++)if(0===d[e].indexOf("RUM_EPISODES=")){for(var f,g,i=d[e].substring("RUM_EPISODES=".length).split("&"),j=0;j<i.length;j++)if(0===i[j].indexOf("s="))f=i[j].substring(2);else if(0===i[j].indexOf("r=")){var k=i[j].substring(2);k=k.replace(/;$/,""),g=a.escape(b.referrer)===k}if(g&&f)return h.dprint("RUM_EPISODES.findStartCookie: startTime = "+f),f}return c},h.beforeUnload=function(){h.bUnloaded||(b.cookie="RUM_EPISODES=s="+Number(new Date)+"&r="+a.escape(b.location)+"; path=/",h.bUnloaded=!0)},h.onload=function(){h.mark("onload"),h.done()},h.addEventListener=function(b,c,d){return"undefined"!=typeof a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,d):void 0},h.dprint=function(){},h.init();var i=null,j={navigationStart:"ns",redirectStart:"rds",redirectEnd:"rde",unloadEventStart:"us",unloadEventEnd:"ue",fetchStart:"fs",domainLookupStart:"dls",domainLookupEnd:"dle",connectStart:"cs",secureConnectionStart:"scs",connectEnd:"ce",handshakeStart:"hs",requestStart:"rqs",responseStart:"rps",responseEnd:"rpe",domLoading:"dl",domInteractive:"di",domContentLoadedEventStart:"dcs",domContentLoadedEventEnd:"dce",domComplete:"dc",loadEventStart:"ls",loadEventEnd:"le"},k=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance;k&&"undefined"!=typeof k.timing&&"undefined"!=typeof k.navigation?i=setInterval(e,100):(h.mark("firstbyte",g),i=setInterval(f,100))}(window,document),atatus.__attachAjaxHooks=function(){!function(a,b){var c=atatus._helper,d={queue:[],batchSize:25,processing:!1,bUnloaded:!1,push:function(a){"string"==typeof a.url&&a.url.indexOf(".html")>0||(this.queue.push(a),this.queue.length>=this.batchSize&&this._processQueue())},_processQueue:function(){if(!this.processing&&this.queue.length){this.processing=!0;try{for(var a={},b={},d=0;d<this.queue.length;d++){var e,f=this.queue[d];if(f.status<400){e=f.method+f.url;var g=f.respAvailTime-f.sendTime,h=f.respProcTime-f.respAvailTime,i=f.receivedSize,j=f.sendSize,k=a[e];if(k){k.c++;var l=k.re;l.t=l.t+g,l.lo=l.lo<g?l.lo:g,l.hi=l.hi>g?l.hi:g,l.ssq=l.ssq+g*g;var m=k.cb;m.t=m.t+h,m.lo=m.lo<h?m.lo:h,m.hi=m.hi>h?m.hi:h,m.ssq=m.ssq+h*h;var n=k.rs;n.t=n.t+i,n.lo=n.lo<i?n.lo:i,n.hi=n.hi>i?n.hi:i,n.ssq=n.ssq+i*i;var o=k.ss;o.t=o.t+j,o.lo=o.lo<j?o.lo:j,o.hi=o.hi>j?o.hi:j,o.ssq=o.ssq+j*j}else a[e]={m:f.method,url:f.url,c:1,re:{t:g,lo:g,hi:g,ssq:g*g},cb:{t:h,lo:h,hi:h,ssq:h*h},rs:{t:f.receivedSize,lo:f.receivedSize,hi:f.receivedSize,ssq:f.receivedSize*f.receivedSize},ss:{t:f.sendSize,lo:f.sendSize,hi:f.sendSize,ssq:f.sendSize*f.sendSize}}}else e=f.method+f.status+f.url,b[e]?b[e].c++:b[e]={m:f.method,url:f.url,st:f.status,c:1}}var p={xhr:c.arrayFromObject(a),xhrError:c.arrayFromObject(b)};atatus.sendAjaxPerf(p)}catch(q){c.log("Error while processing queue: ",q)}finally{this.queue=[],this.processing=!1}}},beforeUnload:function(){d.bUnloaded||(d._processQueue(),d.bUnloaded=!0)}};c.addEventListener("beforeunload",d.beforeUnload,!1);var e={support:function(a){return!a||"apply"in a},around:function(a,b,d,e){return a=a||function(){},function(){var f,g=Array.prototype.slice.call(arguments);try{b&&(f=b.apply(this,g))}catch(h){c.log(e,h)}var i;try{i=a.apply(this,f||g)}finally{try{d&&d.apply(this,g)}catch(h){c.log(e,h)}}return i}},before:function(a,b){return e.around(a,b)},after:function(a,b){return e.around(a,null,b)},timeout:function(a){setTimeout(a,0)},wrapAddEventListener:function(){return function(a,b){if(("load"===a||"error"===a)&&b&&this._atrumXhrData){var c;b.__atrumInterceptor?c=b.__atrumInterceptor:e.support(b)?(c=g.wrapXHR(b,this,"XHR.invokeEventListener"),b.__atrumInterceptor=c):c=null;var d;return c&&(d=Array.prototype.slice.call(arguments),d[1]=c),d}}},wrapRemoveEventListener:function(){return function(a,b){if(this._atrumXhrData){var c=Array.prototype.slice.call(arguments);return b.__atrumInterceptor&&(c[1]=b.__atrumInterceptor),c}}},aroundWithHandleEvent:function(a,b,c,d){var f=a;return a&&"object"==typeof a&&"toString"in a&&"[xpconnect wrapped nsIDOMEventListener]"===a.toString()&&"handleEvent"in a&&(f=function(){a.handleEvent.apply(this,Array.prototype.slice.call(arguments))}),e.around(f,b,c,d)},getFullyQualifiedUrl:function(a){var c=b.createElement("a");return c.href=a,c.href}};if(a.XMLHttpRequest&&a.XMLHttpRequest.prototype){var f=a.XMLHttpRequest.prototype;if(!("open"in f&&"send"in f))return;if(!e.support(f.open)||!e.support(f.send))return;var g={};g.captureAjaxTimings=function(a){var b=a._atrumXhrData;if(b){var c=(new Date).getTime();2===a.readyState?b.firstByteTime=b.firstByteTime||c:4===a.readyState&&(b.respAvailTime=b.respAvailTime||c,b.firstByteTime=b.firstByteTime||c)}},g.sendPayload=function(a,b){b.receivedSize=0,a.responseType&&"text"!==a.responseType||"string"==typeof a.responseText&&(b.receivedSize=a.responseText.length),b.status=a.status,d.push(b)},g.wrapXHR=function(a,b,c){return e.aroundWithHandleEvent(a,function(){g.captureAjaxTimings(this)},function(){var a=b._atrumXhrData;if(a&&4===b.readyState){var c=(new Date).getTime();a.respProcTime=a.respProcTime||c,g.sendPayload(b,a),delete b._atrumXhrData}},c)},g.ajaxDone=function(a){if(a._atrumXhrData){var b=(new Date).getTime()+3e4,c=function(){g.captureAjaxTimings(a);var d=a._atrumXhrData;if(d){var e=(new Date).getTime();4===a.readyState?(d.respProcTime=d.respProcTime||e,g.sendPayload(a,d),delete a._atrumXhrData):b>e?setTimeout(c,50):delete a._atrumXhrData}};c()}},f.open=e.around(f.open,function(){var a=1<=arguments.length?String(arguments[0]):"",b=2<=arguments.length?String(arguments[1]):"",c=atatus.getAllowedDomains(),d=!0;if(b=e.getFullyQualifiedUrl(b),b&&c&&c.length){d=!1;for(var f=0;f<c.length;f++){var g=c[f];if(g&&b.indexOf(g)>-1){d=!0;break}}}d&&(b=b&&b.split("?")[0],this._atrumXhrData={method:a,url:b,sendTime:null,sendSize:null,firstByteTime:null,respAvailTime:null,respProcTime:null,receivedSize:null,parentPhase:null})},null,"XHR.open"),f.send=e.around(f.send,function(){var a=this,b=a._atrumXhrData;if(b){var c=(new Date).getTime();b.sendTime=b.sendTime||c,b.sendSize=1<=arguments.length&&arguments[0]?arguments[0].length||0:0;var d=0,f=function(){if(4===a.readyState)g.ajaxDone(a);else{var b=null;try{b=a.onreadystatechange}catch(c){return void g.ajaxDone(a)}d++,b?e.support(b)?a.onreadystatechange=g.wrapXHR(b,a,"XHR.onReadyStateChange"):g.ajaxDone(a):5>d?e.timeout(f):g.ajaxDone(a)}};f()}},null,"XHR.send"),"addEventListener"in f&&"removeEventListener"in f&&e.support(f.addEventListener)&&e.support(f.removeEventListener)&&(f.addEventListener=e.around(f.addEventListener,e.wrapAddEventListener(),null,"XHR.addEventListener"),f.removeEventListener=e.around(f.removeEventListener,e.wrapRemoveEventListener(),null,"XHR.removeEventListener"))}}(window,document)},function(a){function b(a,b,c){if(!(0>=b)){var d={name:a,dur:b,st:c};atatus.sendTxnPerf(d)}}function c(a){return h+" "+a}function d(){try{return"localStorage"in a&&null!==a.localStorage;}catch(b){return!1}}function e(a){var b=i.now();try{localStorage.setItem(c(a),b)}catch(d){}}function f(a){var b=null,d=c(a);try{b=localStorage.getItem(d),localStorage.removeItem(d)}catch(e){}var f=0;return b&&(f=i.now()-b),f}function g(a){try{var b=c(a);localStorage.removeItem(b)}catch(d){}}var h="atatus.com/",i=atatus._helper,j=1,k=0;atatus.beginTransaction=function(a){d()&&e(a)},atatus.endTransaction=function(a){if(d()){var c=f(a);b(a,c,j)}},atatus.failTransaction=function(a){if(d()){var c=f(a);b(a,c,k)}},atatus.cancelTransaction=function(a){d()&&g(a)}}(window,document);
/*! https://github.com/ttaubert/node-arraybuffer-slice
 * (c) 2014 Tim Taubert <tim@timtaubert.de>
 * arraybuffer-slice may be freely distributed under the MIT license.*/
!function(r){"use strict";function t(r,t){return r=0|r||0,r<0?Math.max(r+t,0):Math.min(r,t)}ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,n){var f=this.byteLength,i=t(e,f),a=f;if(n!==r&&(a=t(n,f)),i>a)return new ArrayBuffer(0);var u=a-i,y=new ArrayBuffer(u),o=new Uint8Array(y),s=new Uint8Array(this,i,u);return o.set(s),y})}();
!function(e){function t(i){if(r[i])return r[i].i;var n=r[i]={s:i,o:!1,i:{}};return e[i].call(n.i,n,n.i,t),n.o=!0,n.i}var r={};t.h=e,t.c=r,t.d=function(e,r,i){t.u(e,r)||Object.defineProperty(e,r,{l:!1,p:!0,get:i})},t.n=function(e){var r=e&&e.g?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.u=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.v="",t(t.T=99)}([function(e,t,r){"use strict";var i,n=r(40),s=r(3);!function(e){function t(t){N&&console.log("Framework already initialized"),e.m(),A=new Date,t.apply(L),N=L.resolve(C.I),k=L.resolve(C.R),F=N.C()}function r(){D=L.resolve(C._),D.init()}function i(){return D}function o(){return L}function a(){return k}function h(){return N}function c(e){return M.get(e)}function u(e,t){var r=new _(e);return r.apply(t),M.set(e,r),r}function l(t){P=e.P(t)}function p(e){return null!=P?P.context.resolve(e):(console.warn("undefined context"),null)}function d(){return P}function f(){return N.time()}function g(e,t){return N.setTimeout(e,t)}function E(e){return N.clearTimeout(e)}function v(e,t){return N.setInterval(e,t)}function y(e){return N.clearInterval(e)}function T(){N.A()}function m(){N&&N.O(),L.N(),L=new n.D,M=new s,P=null,A=null,F=!1,O=null,N=null,D=null,k=null}function I(e){O=e}function S(){return O||(O=(new Date).getTime()),(O=(9301*O+49297)%233280)/233280}function R(){return A}function w(){return F}var b=function(){function e(){}return e}();b.k="ws://127.0.0.1:8000/hive",e.L=b;var C=function(){function e(){}return e}();C.I="TimerScheduler",C.M="identityProvider",C._="NetworkComponent",C.F="rtcManager",C.U="transport",C.B="httpManager",C.H="httpRequest",C.R="logger",C.q="serverManager",C.G="servicesClient",e.V=C;var _=function(){function e(e){this.id=e,this.context=new n.D}return e.prototype.apply=function(e){e.apply(this.context)},e}();e.j=_;!function(e){e[e.K=0]="HTTP",e[e.Y=1]="RTC",e[e.W=2]="UDP"}(e.J||(e.J={}));!function(t){function r(){return"["+f()+"] ["+e.X().id+"]"}t.getId=r}(e.Z||(e.Z={}));var P,A,O,N,D,k,L=new n.D,M=new s,F=!1;e.$=t,e.ee=r,e.te=i,e.system=o,e.logger=a,e.re=h,e.P=c,e.ie=u,e.ne=l,e.resolve=p,e.X=d,e.time=f,e.setTimeout=g,e.clearTimeout=E,e.setInterval=v,e.clearInterval=y,e.A=T,e.m=m,e.se=I,e.random=S,e.oe=R,e.C=w}(i=t.Framework||(t.Framework={})),"undefined"!=typeof global&&(global.Framework=i)},function(e,t,r){"use strict";var i=r(106),n=r(20),s=r(6),o=s.he.ae,a=(s.he.ce,s.he.ue),h=s.he.le,c=function(){function e(t){var r=this;if(this.isActive=!1,this.pe="undefined"!=typeof atatus&&null!=atatus,this.de={},e.fe)throw new Error("Error: Instantiation failed: Use AtatusLogger.getInstance() instead of new.");var i,s=void 0!=n.HiveConfig.ErrorMonitor.key?n.HiveConfig.ErrorMonitor.key:o,c=1==n.HiveConfig.ErrorMonitor.enabledRUM,u=1==n.HiveConfig.ErrorMonitor.enableKeyCombination,l=1==n.HiveConfig.ErrorMonitor.enabledErrorFilter;l&&(i=this.ge()),this.version=t,this.pe&&(void 0==n.HiveConfig.ErrorMonitor.enabled&&a||void 0!=n.HiveConfig.ErrorMonitor.enabled&&1==n.HiveConfig.ErrorMonitor.enabled)&&(atatus.config(s,{enableSourcemap:!0,disableRUM:!c,console:!1,version:t,beforeErrorSend:function(e){var t=!1;e&&e.customData&&void 0!==e.customData.forceSend&&(t=e.customData.forceSend,delete e.customData.forceSend,0===Object.keys(e.customData).length&&(e.customData=null));for(var n in r.de)e.customData[n]=r.de[n];if(!l||t)return!0;if(!i)return!1;try{var s=!1;if(e.backTraces){for(var o=0,a=e.backTraces;o<a.length;o++){var c=a[o];if(c.f.indexOf(i)>-1&&c.ln>h){s=!0;break}}s&&(e.name=e.name.replace(/%s \[[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]+] /,""),e.name.indexOf("Status Code Error:")>=0&&(e.tags=["Plugin Error Code",e.name.split(":")[1].trim()]))}return s}catch(e){return!1}}}).install(),u&&this.Ee(),this.isActive=!0,window.console&&console.log("[HiveComm] Error Monitor installed [RUM:"+c+", KeyHandler:"+u+"]"),l&&!i&&this.logError("Could not extract error filter"))}return e.ve=function(t){return void 0===t&&(t="3.0.0"),void 0===this.fe&&(this.fe=new e(t)),this.fe},e.prototype.Ee=function(){i.Te.ve().ye([16,17,88],function(){try{throw new Error("Upload console logs")}catch(e){atatus.notify(e),window.console&&console.log("[HiveComm] console log uploaded for debugging")}})},e.prototype.ge=function(){try{throw new Error("test")}catch(t){var e=t.stack.match(/(\/\/.*\.js)/i);if(e&&e.length>0)return e[0]}},e.prototype.setUser=function(e){this.pe&&this.isActive&&atatus.setUser(e)},e.prototype.me=function(e){this.logger=e},e.prototype.setCustomData=function(e){this.pe&&this.isActive&&atatus.setCustomData(e)},e.prototype.Ie=function(e){for(var t in e)this.de[t]=e[t]},e.prototype.logError=function(e,t,r,i,n){var s="";if("string"==typeof t?s=t.trim():void 0!==t&&(i=t),(i instanceof Error||i&&"object"!=typeof i)&&(i={error:i.toString()}),i||(i={}),i.errorCode=r,this.logger&&(Object.keys(i).length>0?this.logger.warn(s+" "+e,i):this.logger.warn(s+" "+e)),s&&(n=n?n.concat([s]):[s]),i.forceSend=!0,this.pe&&this.isActive)try{throw new Error(e)}catch(e){atatus.notify(e,i,n)}},e.prototype.setTags=function(e){this.pe&&this.isActive&&atatus.setTags(e)},e.prototype.notify=function(e,t){this.pe&&this.isActive&&(t||(t={}),t.forceSend=!0,atatus.notify(e,t))},e}();t.ErrorMonitor=c},function(e,t,r){"use strict";!function(e){!function(e){e[e.Se=268435456]="BASE_CODE",e[e.Re=268435457]="FIRE_SERVER_CONNECTED_WITH_SWARM",e[e.we=268435458]="FIRE_SERVER_CONNECTED_WITHOUT_SWARM",e[e.be=268435459]="CONNECTION_NOT_ESTABLISHED",e[e.Ce=268435460]="SEND_MESSAGE_TO_NON_EXISTING_CHANNEL",e[e._e=268435461]="RECEIVED_MESSAGE_FROM_NON_EXISTING_CONNECTION"}(e.Pe||(e.Pe={}));!function(e){e[e.Se=536870912]="BASE_CODE",e[e.Ae=536870913]="CREATE_OFFER",e[e.Oe=536870914]="CREATE_ANSWER",e[e.Ne=536870915]="SIGNALING_STATE_CLOSED",e[e.De=536870916]="SET_LOCAL_DESCRIPTION_FAILED",e[e.ke=536870917]="NEGOTIATION_FAILURE",e[e.Le=536870918]="SETUP_CHANNEL_ERROR",e[e.Me=536870919]="ICE_CONNECTION_FAILED",e[e.Fe=536870920]="SET_REMOTE_DESCRIPTION",e[e.Ue=536870921]="UPDATE_ICE_CANDIDATES",e[e.Be=536870922]="ANSWER_RECEIVED",e[e.He=536870923]="OFFER_RECEIVED",e[e.xe=536870924]="SEND_CANDIDATES",e[e.qe=536870925]="CLOSE_CONNECTION"}(e.Ge||(e.Ge={}));!function(e){e[e.Se=805306368]="BASE_CODE",e[e.Ve=805306369]="SEND_MSG_WITHOUT_CHANNEL",e[e.je=805306370]="MSG_TRIGGER_ERROR",e[e.Qe=805306371]="CONNECTION_TIMEOUT"}(e.Ke||(e.Ke={}));!function(e){e[e.Se=1073741824]="BASE_CODE",e[e.qe=1073741825]="CLOSE_CONNECTION",e[e.Ye=1073741826]="P2P_DISPATCHER_ERROR"}(e.We||(e.We={}));!function(e){e[e.Se=1342177280]="BASE_CODE",e[e.ze=1342177281]="CONSTRUCT_MESSAGE",e[e.Je=1342177282]="DROPPED_MESSAGE",e[e.Xe=1342177283]="SEND_MESSAGE",e[e.Ze=1342177284]="RECEIVE_MESSAGE"}(e.$e||(e.$e={}));!function(e){e[e.Se=1610612736]="BASE_CODE",e[e.et=1610612737]="NEW_DISPATCHER"}(e.tt||(e.tt={}));!function(e){e[e.Se=1879048192]="BASE_CODE",e[e.rt=1879048193]="INIT_CACHE",e[e.it=1879048194]="PUT_OPERATION",e[e.nt=1879048195]="GET_OPERATION",e[e.st=1879048196]="CONTAINS_OPERATION",e[e.ot=1879048197]="GET_KEYS_OPERATION",e[e.at=1879048198]="GET_ELEMENTS_OPERATION"}(e.ht||(e.ht={}));!function(e){e[e.Se=2147483648]="BASE_CODE",e[e.it=2147483649]="PUT_OPERATION",e[e.nt=2147483650]="GET_OPERATION",e[e.st=2147483651]="CONTAINS_OPERATION",e[e.ot=2147483652]="GET_KEYS_OPERATION",e[e.at=2147483653]="GET_ELEMENTS_OPERATION",e[e.ct=2147483654]="PURGE_CACHE_OPERATION"}(e.ut||(e.ut={}));!function(e){e[e.Se=2415919104]="BASE_CODE"}(e.lt||(e.lt={}));!function(e){e[e.Se=2684354560]="BASE_CODE",e[e.pt=2684354561]="DISCOVERED_PEERS",e[e.dt=2684354562]="LEADER_ELECTION",e[e.ft=2684354563]="GC_MEMBERS",e[e.gt=2684354564]="ADD_LAN_MEMBER",e[e.Et=2684354565]="ADD_RANDOM_MEMBER",e[e.vt=2684354566]="SAMPLE_MEMBERSHIP"}(e.yt||(e.yt={}));!function(e){e[e.Se=2952790016]="BASE_CODE",e[e.Tt=2952790017]="SEND_ALL_HAVES",e[e.It=2952790018]="SEND_HAVE",e[e.St=2952790019]="UNKNOWN_HAVE",e[e.Rt=2952790020]="UNKNOWN_HAVES",e[e.wt=2952790021]="RECEIVED_HAVE",e[e.bt=2952790022]="RECEIVED_HAVES",e[e.Ct=2952790023]="NO_OUT_PARTNER",e[e._t=2952790024]="CREATE_RANDOM_BUFFER",e[e.Pt=2952790025]="REQUEST_PING",e[e.At=2952790026]="RECEIVED_PING",e[e.Ot=2952790027]="UNKNOWN_PING",e[e.Nt=2952790028]="SEND_PONG",e[e.Dt=2952790029]="UNKOWN_PONG",e[e.kt=2952790030]="WRONG_PONG_SIZE",e[e.Lt=2952790031]="WRONG_TIMESTAMP",e[e.Mt=2952790032]="RECEIVED_PONG",e[e.Ft=2952790033]="COLLECT_PARTNER_SNAPSHOTS"}(e.Ut||(e.Ut={}));!function(e){e[e.Se=3221225472]="BASE_CODE",e[e.Bt=3221225473]="START_PARTNERSHIP",e[e.Ht=3221225474]="NEW_LAN_MEMBER",e[e.xt=3221225475]="IN_PARTNER_CHOICE",e[e.qt=3221225476]="IN_PARTNER_ADD_PROCESS",e[e.Gt=3221225477]="IN_PARTNER_CONNECT",e[e.Vt=3221225478]="IN_PARTNERSHIP_REQUEST",e[e.jt=3221225479]="OUT_PARNTERSHIP_REQUEST_PROCESS",e[e.Qt=3221225480]="CONSTRUCT_DISCOVER_PEER_INFO",e[e.Kt=3221225481]="SEND_PARTN_RESP",e[e.Yt=3221225482]="NEW_IN_PARTNER_TO_LIST",e[e.Wt=3221225483]="REMOVE_DISCONNECTED_PEER",e[e.zt=3221225484]="REMOVE_IN_PARTNER",e[e.Jt=3221225485]="CLOSE_RECEIVED",e[e.Xt=3221225486]="SEND_PART_REQUEST",e[e.Zt=3221225487]="PART_REQUEST_EXPIRED",e[e.$t=3221225488]="UNKNOWN_PARTNERSHIP_REQUEST_EXPIRED",e[e.er=3221225489]="UNKNOWN_OUT_PART_RESP",e[e.tr=3221225490]="CLOSE_PARTNERSHIP",e[e.rr=3221225491]="ANNOUNCE_BITRATE",e[e.ir=3221225492]="CONSTRUCT_ANNOUNCE_BITRATE_MSG",e[e.nr=3221225493]="RECEIVE_BITRATE_INFO",e[e.sr=3221225494]="PEER_INFO_RECEIVED",e[e.ar=3221225495]="PEER_INFO_ANNOUNCED",e[e.hr=3221225496]="COLLECT_ALL_PARTNERS"}(e.cr||(e.cr={}));!function(e){e[e.Se=3489660928]="BASE_CODE",e[e.ur=3489660929]="UPDATE_IN_PARTNERS"}(e.lr||(e.lr={}));!function(e){e[e.Se=3758096384]="BASE_CODE",e[e.pr=3758096385]="SELECT_PARTNERS_TO_REMOVE",e[e.dr=3758096386]="SELECT_PARTNERS_TO_ADD",e[e.gr=3758096387]="SELECT_UPDATE_OUT"}(e.Er||(e.Er={}));!function(e){e[e.Se=4026531840]="BASE_CODE",e[e.pr=4026531841]="SELECT_PARTNERS_TO_REMOVE",e[e.dr=4026531842]="SELECT_PARTNERS_TO_ADD",e[e.gr=4026531843]="SELECT_UPDATE_OUT"}(e.vr||(e.vr={}));!function(e){e[e.Se=4294967296]="BASE_CODE",e[e.ur=4294967297]="UPDATE_IN_PARTNERS",e[e.pr=4294967298]="SELECT_PARTNERS_TO_REMOVE",e[e.dr=4294967299]="SELECT_PARTNERS_TO_ADD",e[e.gr=4294967300]="SELECT_UPDATE_OUT",e[e.yr=4294967301]="GROUP_PARTNERS",e[e.Tr=4294967302]="IDENTIFY_MEMBER_AS_LEADER_OR_SAME_SITE",e[e.mr=4294967303]="AHEAD_BUT_BEHIND_DELTA",e[e.Ir=4294967304]="BEHIND_OR_NOT_RETRIEVING_BITRATE",e[e.Sr=4294967305]="GET_DELTA_FOR_BITRATE"}(e.Rr||(e.Rr={}));!function(e){e[e.Se=4563402752]="BASE_CODE",e[e.wr=4563402753]="UPDATE_OUT_PARTNERS"}(e.br||(e.br={}));!function(e){e[e.Se=4831838208]="BASE_CODE",e[e.Cr=4831838209]="ADD_FRAGMENT_TO_MAP",e[e.Pr=4831838210]="WRAP_CHUNK",e[e.Ar=4831838211]="GENERATE_HASHMAPS"}(e.Or||(e.Or={}));!function(e){e[e.Se=5100273664]="BASE_CODE",e[e.Nr=5100273665]="INIT_AES_MANAGER",e[e.Dr=5100273666]="INIT_KEY",e[e.kr=5100273667]="INIT_IV",e[e.Lr=5100273668]="DECRYPT_BUFFER",e[e.Mr=5100273669]="DOWNLOAD_KEY_ONLOAD",e[e.Fr=5100273670]="DOWNLOAD_KEY"}(e.Ur||(e.Ur={}));!function(e){e[e.Se=5368709120]="BASE_CODE",e[e.Br=5368709121]="GET_ENTITY_TYPE",e[e.Hr=5368709122]="GET_ENTITY_CHARACTERISTICS",e[e.xr=5368709123]="GET_NEXT_ENTITY",e[e.qr=5368709124]="IS_CURRENT_CONTEXT",e[e.Gr=5368709125]="PARSED_METADATA",e[e.Vr=5368709126]="PREFETCH_METADATA_RECEIVED",e[e.jr=5368709127]="FRAGMENT_RECEIVED",e[e.Qr=5368709128]="EVALUATE_PROTECTION",e[e.Kr=5368709129]="GET_DISTANCE_DURATION"}(e.Yr||(e.Yr={}));!function(e){e[e.Se=5637144576]="BASE_CODE",e[e.Wr=5637144577]="PARSE_METADATA",e[e.zr=5637144578]="EXTRACT_SEGMENT_MAPS",e[e.Jr=5637144579]="INIT_PROTECTION",e[e.Xr=5637144580]="GET_SEGMENT_INFO",e[e.Zr=5637144581]="GET_SEGMENT_DISTANCE",e[e.$r=5637144582]="EXTRACT_DURATION",e[e.ei=5637144583]="EXTRACT_DURATION_OR_DECRYPT",e[e.ti=5637144584]="EXTRACT_DURATION_CANNOT_DECRYPT",e[e.ri=5637144585]="EXTRACT_DURATION_NON_ENCRYPTED",e[e.ii=5637144586]="GENERATE_MISSING_SEGMENTS",e[e.ni=5637144587]="REGENERATE_MANIFEST",e[e.si=5637144588]="TRIM_MANIFEST",e[e.oi=5637144589]="PARSE_BITRATES_TO_FILTER",e[e.ai=5637144590]="FILTER_BITRATES",e[e.hi=5637144591]="GET_DISTANCE_DURATION_BETWEEN_SEGMENTS",e[e.ci=5637144592]="GET_SEGMENT"}(e.ui||(e.ui={}));!function(e){e[e.Se=5905580032]="BASE_CODE",e[e.qr=5905580033]="IS_CURRENT_CONTEXT",e[e.Br=5905580034]="GET_ENTITY_TYPE",e[e.Hr=5905580035]="GET_ENTITY_CHARACTERISTICS",e[e.li=5905580036]="METADATA_RECEIVED",e[e.pi=5905580037]="SCHEDULE_METADATA_PREFETCH",e[e.xr=5905580038]="GET_NEXT_ENTITY",e[e.Kr=5905580039]="GET_DISTANCE_DURATION"}(e.di||(e.di={}));!function(e){e[e.Se=6174015488]="BASE_CODE",e[e.fi=6174015489]="PLAYLIST_MISMATCH",e[e.gi=6174015490]="FLOAT_BITRATE",e[e.Wr=6174015491]="PARSE_METADATA",e[e.Xr=6174015492]="GET_SEGMENT_INFO",e[e.Ei=6174015493]="UPDATE_PLAYLIST",e[e.vi=6174015494]="TRIM_PLAYLIST"}(e.yi||(e.yi={}));!function(e){e[e.Se=6442450944]="BASE_CODE",e[e.Ti=6442450945]="GET_P2P_TIMEOUT",e[e.mi=6442450946]="DELIVER_DELAY"}(e.Ii||(e.Ii={}));!function(e){e[e.Se=6710886400]="BASE_CODE",e[e.Si=6710886401]="IS_PLAYER_BUFFERING_BASE",e[e.Ri=6710886402]="CONFIGURE_REQUEST_DIRECTIVE",e[e.wi=6710886403]="ATTEMPT_TO_UPGRADE_PREFETCH"}(e.bi||(e.bi={}));!function(e){e[e.Se=6979321856]="BASE_CODE",e[e.Ci=6979321857]="PREPARE_REQUEST",e[e._i=6979321858]="GET_CONNECTIVITY_INFO",e[e.Pi=6979321859]="COLLECT_TRACKER_REQUEST_INFO",e[e.Ai=6979321860]="PREPARE_QUERY",e[e.Oi=6979321861]="PREPARE_BITRATE_QUERY",e[e.Ni=6979321862]="PREPARE_TRACKER_INFO",e[e.Di=6979321863]="SEND_REQUEST",e[e.ki=6979321864]="HANDLE_RESPONSE"}(e.Li||(e.Li={}));!function(e){e[e.Se=7247757312]="BASE_CODE",e[e.Mi=7247757313]="NEW_TRACKER_CLIENT",e[e.Fi=7247757314]="SERIALIZE_REQUEST",e[e.Ui=7247757315]="DESERIALIZE_RESPONSE",e[e.Bi=7247757316]="SERVICE_CONNECTION_DOWN",e[e.Di=7247757317]="SEND_REQUEST",e[e.Hi=7247757318]="TRACKER_MANAGER_INIT"}(e.xi||(e.xi={}));!function(e){e[e.Se=7516192768]="BASE_CODE",e[e.qi=7516192769]="SORT_PARTNERS"}(e.Gi||(e.Gi={}));!function(e){e[e.Se=7784628224]="BASE_CODE",e[e.Vi=7784628225]="CHOOSE_PARTNER"}(e.ji||(e.ji={}));!function(e){e[e.Se=8053063680]="BASE_CODE",e[e.Qi=8053063681]="CONSTRUCT_FRAGMENT_REQUEST_MESSAGE",e[e.Ki=8053063682]="SEND_FRAGMENT_REQUEST",e[e.Yi=8053063683]="RECEIVE_CHUNK",e[e.Wi=8053063684]="SEND_ACK",e[e.zi=8053063685]="CLEAN_UP_NOT_PENDING",e[e.Ji=8053063686]="STOP_TRANSFER",e[e.Xi=8053063687]="RECEIVE_EXPIRED_CHUNK"}(e.Zi||(e.Zi={}));!function(e){e[e.Se=8321499136]="BASE_CODE",e[e.$i=8321499137]="CONSTRUCT_CHUNK_RESPONSE",e[e.en=8321499138]="START_SENDING_CHUNK",e[e.tn=8321499139]="SEND_CHUNK",e[e.rn=8321499140]="UNKNOWN_ACK"}(e.in||(e.in={}));!function(e){e[e.Se=8589934592]="BASE_CODE",e[e.nn=8589934593]="NO_PARTNER_FOUND",e[e.sn=8589934594]="FILTER_IN_PARTNERS",e[e.an=8589934595]="SET_REQUEST_TIMEOUT",e[e.hn=8589934596]="REMOVE_REQUEST",e[e.cn=8589934597]="CANCEL_ON_NON_EXISTING_SESSION",e[e.un=8589934598]="DO_NOT_HAVE",e[e.pn=8589934599]="REQUESTED_TO_NON_PARTNER"}(e.dn||(e.dn={}));!function(e){e[e.Se=8858370048]="BASE_CODE",e[e.fn=8858370049]="RESPOND_TO_PEER",e[e.gn=8858370050]="REQUEST_SATISFIED",e[e.En=8858370051]="REQUEST_PARTIALLY_SATISFIED",e[e.vn=8858370052]="REQUEST_NOT_SATISFIED",e[e.yn=8858370053]="SEND_DO_NOT_HAVE",e[e.Tn=8858370054]="SEND_NO_PARTNERS"}(e.mn||(e.mn={}));!function(e){e[e.Se=9126805504]="BASE_CODE",e[e.In=9126805505]="VIOLATE_SPOOFING_HANDLER",e[e.Sn=9126805506]="VIOLATE_SPOOFING_RULES",e[e.Rn=9126805507]="ADD_OR_UPDATE_SPOOFING_MAPS",e[e.wn=9126805508]="PERIODIC_CHECK_IP_SPOOFING"}(e.bn||(e.bn={}));!function(e){e[e.Se=9395240960]="BASE_CODE",e[e.Cn=9395240961]="REQUEST_COMPLETED",e[e._n=9395240962]="REQUEST_NOT_EXISTING_COMPLETED",e[e.Pn=9395240963]="REQUEST_PARTIALLY_FAILED",e[e.An=9395240964]="REQUEST_NOT_EXISTING_PARTIALLY_FAILED",e[e.On=9395240965]="REQUEST_FAILED",e[e.Nn=9395240966]="REQUEST_NOT_EXISTING_FAILED"}(e.Dn||(e.Dn={}));!function(e){e[e.Se=9663676416]="BASE_CODE",e[e.kn=9663676417]="UPDATE_WANTED_SESSIONS",e[e.Ln=9663676418]="CONFIGURE_PREFETCHING",e[e.Mn=9663676419]="START_PREFETCHING",e[e.Fn=9663676420]="FRAGMENT_RETRIEVED_SESSION_NOT_EXISTING",e[e.Un=9663676421]="ATTEMPT_PREFETCH_BEFORE_PLAYER_REQUEST",e[e.Bn=9663676422]="FORWARD_IF_NECESSARY",e[e.Hn=9663676423]="IS_ALLOWED_TO_PREFETCH",e[e.xn=9663676424]="PREFETCH_PROCESS",e[e.qn=9663676425]="CHECK_PLAYER_DISTANCE",e[e.Gn=9663676426]="OFFLOAD_LEADER",e[e.Vn=9663676427]="UPGRADE_PREFETCH"}(e.jn||(e.jn={}));!function(e){e[e.Se=9932111872]="BASE_CODE",e[e.Qn=9932111873]="REQUEST_TIMEOUT"}(e.Kn||(e.Kn={}));!function(e){e[e.Se=10200547328]="BASE_CODE",e[e.Yn=10200547329]="PLAYER_REQUEST_ERROR"}(e.Wn||(e.Wn={}));!function(e){e[e.Se=10468982784]="BASE_CODE",e[e.zn=10468982785]="ADD_HAVE",e[e.Jn=10468982786]="REMOVE_PEER"}(e.Xn||(e.Xn={}));!function(e){e[e.Se=10737418240]="BASE_CODE",e[e.Zn=10737418241]="CONSTRUCT_SWARM",e[e.$n=10737418242]="INIT_SWARM",e[e.es=10737418243]="SWITCH_STATE",e[e.Qn=10737418244]="REQUEST_TIMEOUT"}(e.rs||(e.rs={}));!function(e){e[e.Se=11005853696]="BASE_CODE",e[e.ns=11005853697]="SERIALIZE_MESSAGE",e[e.ss=11005853698]="EXTRACT_MESSAGE"}(e.as||(e.as={}))}(t.hs||(t.hs={}))},function(e,t,r){"use strict";function i(e,t,r,s){if(!(this instanceof i))return new i(e,t,r,s);t=t||Object.cs,r=r||Object.hash,s=s||Function.us,this.ls=t,this.ps=r,this.ds=s,this.fs=new n(void 0,function(e,r){return t(e.key,r.key)},function(e){return r(e.key)}),this.length=0,this.addEach(e)}var n=(r(11),r(68)),s=r(12),o=r(52),a=r(13);e.i=i,i.Map=i,Object.addEach(i.prototype,s.prototype),Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,a.prototype),Object.defineProperty(i.prototype,"size",s.gs),i.prototype.Es=function(e){return new this.constructor(e,this.ls,this.ps,this.ds)},i.prototype.log=function(e,t,r,i){t=t||this.vs,this.fs.log(e,function(e,r,i){t(e.value.value,r,i)},r,i)},i.prototype.vs=function(e,t){t(" key: "+e.key),t(" value: "+e.value)}},function(e,t,r){/*!
 *
 * Copyright 2009-2016 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else{e.i=t()}}(function(){"use strict";function e(e){return function(){return K.apply(e,arguments)}}function t(e){return e===Object(e)}function r(e){return"[object StopIteration]"===ee(e)||e instanceof G}function i(e,t){if(x&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(te)){for(var r=[],i=t;i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(e.stack);var s=r.join("\n"+te+"\n");e.stack=n(s)}}function n(e){for(var t=e.split("\n"),r=[],i=0;i<t.length;++i){var n=t[i];a(n)||s(n)||!n||r.push(n)}return r.join("\n")}function s(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function o(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var i=/.*@(.+):(\d+)$/.exec(e);return i?[i[1],Number(i[2])]:void 0}function a(e){var t=o(e);if(!t)return!1;var r=t[0],i=t[1];return r===q&&i>=V&&i<=oe}function h(){if(x)try{throw new Error}catch(i){var e=i.stack.split("\n"),t=e[0].indexOf("@")>0?e[1]:e[2],r=o(t);if(!r)return;return q=r[0],r[1]}}function c(e){return e instanceof d?e:v(e)?C(e):b(e)}function u(){function e(e){t=e,c.ys&&x&&(s.source=e),W(r,function(t,r){c.Ts(function(){e.ms.apply(e,r)})},void 0),r=void 0,i=void 0}var t,r=[],i=[],n=X(u.prototype),s=X(d.prototype);if(s.ms=function(e,n,s){var o=Y(arguments);r?(r.push(o),"when"===n&&s[1]&&i.push(s[1])):c.Ts(function(){t.ms.apply(t,o)})},s.valueOf=function(){if(r)return s;var e=g(t);return E(e)&&(t=e),e},s.Is=function(){return t?t.Is():{state:"pending"}},c.ys&&x)try{throw new Error}catch(e){s.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return n.Ss=s,n.resolve=function(r){t||e(c(r))},n.Rs=function(r){t||e(b(r))},n.reject=function(r){t||e(w(r))},n.notify=function(e){t||W(i,function(t,r){c.Ts(function(){r(e)})},void 0)},n}function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=u();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.Ss}function p(e){return l(function(t,r){for(var i=0,n=e.length;i<n;i++)c(e[i]).then(t,r)})}function d(e,t,r){void 0===t&&(t=function(e){return w(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var i=X(d.prototype);if(i.ms=function(r,n,s){var o;try{o=e[n]?e[n].apply(i,s):t.call(i,n,s)}catch(e){o=w(e)}r&&r(o)},i.Is=r,r){var n=r();"rejected"===n.state&&(i.exception=n.reason),i.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?i:e.value}}return i}function f(e,t,r,i){return c(e).then(t,r,i)}function g(e){if(E(e)){var t=e.Is();if("fulfilled"===t.state)return t.value}return e}function E(e){return e instanceof d}function v(e){return t(e)&&"function"==typeof e.then}function y(e){return E(e)&&"pending"===e.Is().state}function T(e){return!E(e)||"fulfilled"===e.Is().state}function m(e){return E(e)&&"rejected"===e.Is().state}function I(){re.length=0,ie.length=0,se||(se=!0)}function S(e,t){se&&("object"==typeof process&&process&&"function"==typeof process.ws&&c.Ts.bs(function(){-1!==z(ie,e)&&(process.ws("unhandledRejection",t,e),ne.push(e))}),ie.push(e),t&&void 0!==t.stack?re.push(t.stack):re.push("(no stack) "+t))}function R(e){if(se){var t=z(ie,e);-1!==t&&("object"==typeof process&&process&&"function"==typeof process.ws&&c.Ts.bs(function(){var r=z(ne,e);-1!==r&&(process.ws("rejectionHandled",re[t],e),ne.splice(r,1))}),ie.splice(t,1),re.splice(t,1))}}function w(e){var t=d({when:function(t){return t&&R(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return S(t,e),t}function b(e){return d({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},delete:function(t){delete e[t]},Cs:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return $(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function C(e){var t=u();return c.Ts(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}),t.Ss}function _(e){return d({_s:function(){}},function(t,r){return k(e,t,r)},function(){return c(e).Is()})}function P(e,t,r){return c(e).Ps(t,r)}function A(e){return function(){function t(e,t){var o;if("undefined"==typeof StopIteration){try{o=i[e](t)}catch(e){return w(e)}return o.done?c(o.value):f(o.value,n,s)}try{o=i[e](t)}catch(e){return r(e)?c(e.value):w(e)}return f(o,n,s)}var i=e.apply(this,arguments),n=t.bind(t,"next"),s=t.bind(t,"throw");return n()}}function O(e){c.done(c.async(e)())}function N(e){throw new G(e)}function D(e){return function(){return P([this,L(arguments)],function(t,r){return e.apply(t,r)})}}function k(e,t,r){return c(e).As(t,r)}function L(e){return f(e,function(e){var t=0,r=u();return W(e,function(i,n,s){var o;E(n)&&"fulfilled"===(o=n.Is()).state?e[s]=o.value:(++t,f(n,function(i){e[s]=i,0==--t&&r.resolve(e)},r.reject,function(e){r.notify({index:s,value:e})}))},void 0),0===t&&r.resolve(e),r.Ss})}function M(e){if(0===e.length)return c.resolve();var t=c.defer(),r=0;return W(e,function(i,n,s){function o(e){t.resolve(e)}function a(e){0===--r&&(e.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+e.message,t.reject(e))}function h(e){t.notify({index:s,value:e})}var c=e[s];r++,f(c,o,a,h)},void 0),t.Ss}function F(e){return f(e,function(e){return e=J(e,c),f(L(J(e,function(e){return f(e,j,j)})),function(){return e})})}function U(e){return c(e).Os()}function B(e,t){return c(e).then(void 0,void 0,t)}function H(e,t){return c(e).Ns(t)}var x=!1;try{throw new Error}catch(e){x=!!e.stack}var q,G,V=h(),j=function(){},Q=function(){function e(){for(var e,i;r.next;)r=r.next,e=r.Ds,r.Ds=void 0,i=r.domain,i&&(r.domain=void 0,i.ks()),t(e,i);for(;h.length;)e=h.pop(),t(e);n=!1}function t(t,r){try{t()}catch(t){if(o)throw r&&r.Ls(),setTimeout(e,0),r&&r.ks(),t;setTimeout(function(){throw t},0)}r&&r.Ls()}var r={Ds:void 0,next:null},i=r,n=!1,s=void 0,o=!1,a=!1;try{a=navigator&&("Microsoft Internet Explorer"===navigator.appName||null!=navigator.appVersion.match(/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i))}catch(e){}var h=[];if(Q=function(e){"undefined"!=typeof Framework&&Framework.C()?Framework.setTimeout(e,0):(i=i.next={Ds:e,domain:o&&process.domain,next:null},n||(n=!0,s()))},"object"==typeof process&&process&&"[object process]"===process.toString()&&process.Ts)o=!0,s=function(){process.Ts(e)};else if("function"!=typeof setImmediate||a)if("undefined"==typeof MessageChannel||a)s=function(){setTimeout(e,0)};else{var c=new MessageChannel;c.port1.onmessage=function(){s=u,c.port1.onmessage=e,e()};var u=function(){c.port2.postMessage(0)};s=function(){setTimeout(e,0),u()}}else s="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};return Q.bs=function(e){h.push(e),n||(n=!0,s())},Q}(),K=Function.call,Y=e(Array.prototype.slice),W=e(Array.prototype.reduce||function(e,t){var r=0,i=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=i)throw new TypeError}for(;r<i;r++)r in this&&(t=e(t,this[r],r));return t}),z=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),J=e(Array.prototype.map||function(e,t){var r=this,i=[];return W(r,function(n,s,o){i.push(e.call(t,s,o,r))},void 0),i}),X=Object.create||function(e){function t(){}return t.prototype=e,new t},Z=e(Object.prototype.hasOwnProperty),$=Object.keys||function(e){var t=[];for(var r in e)Z(e,r)&&t.push(r);return t},ee=e(Object.prototype.toString);G="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var te="From previous event:";c.resolve=c,c.Ts=Q,c.ys=!1,"object"==typeof process&&process&&process.Ms&&process.Ms.Fs&&(c.ys=!0),c.defer=u,u.prototype.Us=function(){var e=this;return function(t,r){t?e.reject(t):arguments.length>2?e.resolve(Y(arguments,1)):e.resolve(r)}},c.Promise=l,c.Ss=l,l.race=p,l.all=L,l.reject=w,l.resolve=c,c.Bs=function(e){return e},d.prototype.Bs=function(){return this},c.join=function(e,t){return c(e).join(t)},d.prototype.join=function(e){return c([this,e]).Ps(function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)})},c.race=p,d.prototype.race=function(){return this.then(c.race)},c.Hs=d,d.prototype.toString=function(){return"[object Promise]"},d.prototype.then=function(e,t,r){function n(t){try{return"function"==typeof e?e(t):t}catch(e){return w(e)}}function s(e){if("function"==typeof t){i(e,a);try{return t(e)}catch(e){return w(e)}}return w(e)}function o(e){return"function"==typeof r?r(e):e}var a=this,h=u(),l=!1;return c.Ts(function(){a.ms(function(e){l||(l=!0,h.resolve(n(e)))},"when",[function(e){l||(l=!0,h.resolve(s(e)))}])}),a.ms(void 0,"when",[void 0,function(e){var t,r=!1;try{t=o(e)}catch(e){if(r=!0,!c.onerror)throw e;c.onerror(e)}r||h.notify(t)}]),h.Ss},c.xs=function(e,t){return c(e).xs(t)},d.prototype.xs=function(e){return e=c(e),this.then(function(t){return e.Gs(t).qs(t)})},c.when=f,d.prototype.qs=function(e){return this.then(function(){return e})},c.qs=function(e,t){return c(e).qs(t)},d.prototype.Vs=function(e){return this.then(function(){throw e})},c.Vs=function(e,t){return c(e).Vs(t)},c.js=g,c.Qs=E,c.Ks=v,c.Ys=y,d.prototype.Ys=function(){return"pending"===this.Is().state},c.Ws=T,d.prototype.Ws=function(){return"fulfilled"===this.Is().state},c.zs=m,d.prototype.zs=function(){return"rejected"===this.Is().state};var re=[],ie=[],ne=[],se=!0;c.Js=I,c.Xs=function(){return re.slice()},c.Zs=function(){I(),se=!1},I(),c.reject=w,c.Rs=b,c.$s=_,c.Ps=P,d.prototype.Ps=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},c.async=A,c.eo=O,c.to=N,c.ro=D,c.As=k,d.prototype.As=function(e,t){var r=this,i=u();return c.Ts(function(){r.ms(i.resolve,e,t)}),i.Ss},c.get=function(e,t){return c(e).As("get",[t])},d.prototype.get=function(e){return this.As("get",[e])},c.set=function(e,t,r){return c(e).As("set",[t,r])},d.prototype.set=function(e,t){return this.As("set",[e,t])},c.io=c.delete=function(e,t){return c(e).As("delete",[t])},d.prototype.io=d.prototype.delete=function(e){return this.As("delete",[e])},c.no=c.Cs=function(e,t,r){return c(e).As("post",[t,r])},d.prototype.no=d.prototype.Cs=function(e,t){return this.As("post",[e,t])},c.send=c.so=c.oo=function(e,t){return c(e).As("post",[t,Y(arguments,2)])},d.prototype.send=d.prototype.so=d.prototype.oo=function(e){return this.As("post",[e,Y(arguments,1)])},c.ao=function(e,t){return c(e).As("apply",[void 0,t])},d.prototype.ao=function(e){return this.As("apply",[void 0,e])},c.ho=c.Gs=function(e){return c(e).As("apply",[void 0,Y(arguments,1)])},d.prototype.Gs=function(){return this.As("apply",[void 0,Y(arguments)])},c.co=function(e){var t=c(e),r=Y(arguments,1);return function(){return t.As("apply",[this,r.concat(Y(arguments))])}},d.prototype.co=function(){var e=this,t=Y(arguments);return function(){return e.As("apply",[this,t.concat(Y(arguments))])}},c.keys=function(e){return c(e).As("keys",[])},d.prototype.keys=function(){return this.As("keys",[])},c.all=L,d.prototype.all=function(){return L(this)},c.uo=M,d.prototype.uo=function(){return M(this)},c.lo=function(e,t,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}(F,"allResolved","allSettled"),d.prototype.lo=function(){return F(this)},c.Os=U,d.prototype.Os=function(){return this.then(function(e){return L(J(e,function(e){function t(){return e.Is()}return e=c(e),e.then(t,t)}))})},c.fail=c.catch=function(e,t){return c(e).then(void 0,t)},d.prototype.fail=d.prototype.catch=function(e){return this.then(void 0,e)},c.progress=B,d.prototype.progress=function(e){return this.then(void 0,void 0,e)},c.po=c.finally=function(e,t){return c(e).finally(t)},d.prototype.po=d.prototype.finally=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=c(e),this.then(function(t){return e.Gs().then(function(){return t})},function(t){return e.Gs().then(function(){throw t})})},c.done=function(e,t,r,i){return c(e).done(t,r,i)},d.prototype.done=function(e,t,r){var n=function(e){c.Ts(function(){if(i(e,s),!c.onerror)throw e;c.onerror(e)})},s=e||t||r?this.then(e,t,r):this;"object"==typeof process&&process&&process.domain&&(n=process.domain.bind(n)),s.then(void 0,n)},c.timeout=function(e,t,r){return c(e).timeout(t,r)},d.prototype.timeout=function(e,t){var r=u(),i=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),r.reject(t)},e);return this.then(function(e){clearTimeout(i),r.resolve(e)},function(e){clearTimeout(i),r.reject(e)},r.notify),r.Ss},c.delay=function(e,t){return void 0===t&&(t=e,e=void 0),c(e).delay(t)},d.prototype.delay=function(e){return this.then(function(t){var r=u();return setTimeout(function(){r.resolve(t)},e),r.Ss})},c.do=function(e,t){return c(e).do(t)},d.prototype.do=function(e){var t=u(),r=Y(e);return r.push(t.Us()),this.ao(r).fail(t.reject),t.Ss},c.fo=function(e){var t=Y(arguments,1);return c(e).do(t)},d.prototype.fo=function(){var e=Y(arguments),t=u();return e.push(t.Us()),this.ao(e).fail(t.reject),t.Ss},c.Eo=c.vo=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=Y(arguments,1);return function(){var r=t.concat(Y(arguments)),i=u();return r.push(i.Us()),c(e).ao(r).fail(i.reject),i.Ss}},d.prototype.Eo=d.prototype.vo=function(){var e=Y(arguments);return e.unshift(this),c.vo.apply(void 0,e)},c.yo=function(e,t){var r=Y(arguments,2);return function(){function i(){return e.apply(t,arguments)}var n=r.concat(Y(arguments)),s=u();return n.push(s.Us()),c(i).ao(n).fail(s.reject),s.Ss}},d.prototype.yo=function(){var e=Y(arguments,0);return e.unshift(this),c.yo.apply(void 0,e)},c.To=c.mo=function(e,t,r){return c(e).mo(t,r)},d.prototype.To=d.prototype.mo=function(e,t){var r=Y(t||[]),i=u();return r.push(i.Us()),this.As("post",[e,r]).fail(i.reject),i.Ss},c.Io=c.So=c.Ro=function(e,t){var r=Y(arguments,2),i=u();return r.push(i.Us()),c(e).As("post",[t,r]).fail(i.reject),i.Ss},d.prototype.Io=d.prototype.So=d.prototype.Ro=function(e){var t=Y(arguments,1),r=u();return t.push(r.Us()),this.As("post",[e,t]).fail(r.reject),r.Ss},c.Ns=H,d.prototype.Ns=function(e){if(!e)return this;this.then(function(t){c.Ts(function(){e(null,t)})},function(t){c.Ts(function(){e(t)})})},c.wo=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var oe=h();return c})},function(e,t,r){"use strict";var i=r(6),n=i.he.bo;!function(e){var t=function(){function e(){}return e}();t.Co=5e3,t._o=6,t.Po=1e4,t.Ao=.2,t.Oo=10,e.No=t;var r=function(){function e(){}return e}();r.Do="0.0.1",r.ko=3e4,r.Lo=4e7,r.Mo=1,r.Fo=.8,r.Uo=!1,r.Bo=2e4,e.Ho=r;var i=function(){function e(){}return e}();i.xo=!0,i.qo=3,i.Go=1e4,e.Vo=i;var s=function(){function e(){}return e}();s.jo=1.1,e.Qo=s;var o=function(){function e(){}return e}();o.Ko=n,o.Yo=2e4,o.Wo=5e3,e.zo=o;var a=function(){function e(){}return e}();a.Jo=[412],e.Xo=a;var h=function(){function e(){}return e}();h.Zo=2e3,h.$o=!0,h.ea=!1,h.ta=1,h.ra=.02,h.ia=!0,h.na=!1,h.sa=!1,h.oa=1e4,h.aa=4e4,h.ha=3700,h.ca=2e4,h.ua=1,h.la=5,h.pa=.4,h.da=1,e.fa=h;var c=function(){function e(){}return e}();c.ga=30,c.Ea=2e4,c.va=3e4,e.ya=c;var u=function(){function e(){}return e}();u.Ta=3e7,u.ma=3e4,u.Ia=!1,u.Sa=10,e.Ra=u;var l=function(){function e(){}return e}();l.wa=3,l.ba=!1,l.Ca=3e4,l._a=.2,l.Pa=.2,l.Aa=1e4,e.Oa=l;var p=function(){function e(){}return e}();p.Na=!1,e.K=p;var d=function(){function e(){}return e}();d.Da=64e3,d.ka=5e3,d.La=1,d.Ma=1,e.Fa=d;var f=function(){function e(){}return e}();f.Ua=4e3,f.Ba=3e4,f.Ha=4096,f.xa=!0,f.qa=5e3,f.Ga=1e4,e.UDPBroadcast=f;var g=function(){function e(){}return e}();g.Va=100,g.ja=1e3,e.Qa=g;var E=function(){function e(){}return e}();E.Ka=20,E.Ya=20,E.Wa=20,E.za=5,e.Ja=E;var v=function(){function e(){}return e}();v.Xa="site",v.Za="externalAs",v.$a="availableSendRate",v.eh="remoteAddress",v.th="localAddress",v.rh=2e4,e.ih=v;var y=function(){function e(){}return e}();y.nh=3e4,e.sh=y;var T=function(){function e(){}return e}();T.oh=300,e.ah=T}(t.hh||(t.hh={}))},function(e,t,r){"use strict";var i=function(){function e(){}return e}();i.uh=!1,i.lh=!0,i.ph=!1,i.dh="4.1.0",i.fh="undefined"!=typeof core?core:"undefined",i.gh=!1,i.Eh=!0,i.vh="undefined"!=typeof INCLUDE_VOD_CACHE&&INCLUDE_VOD_CACHE,i.yh="undefined"!=typeof INCLUDE_UDP_BROADCAST&&INCLUDE_UDP_BROADCAST,i.Th="undefined"!=typeof INCLUDE_UDP_LEADER_ELECTION&&INCLUDE_UDP_LEADER_ELECTION,i.mh="undefined"!=typeof LEADER_SCORE_EQUALITY&&LEADER_SCORE_EQUALITY,i.Ih="undefined"!=typeof INCLUDE_DEFAULT_NETWORK&&INCLUDE_DEFAULT_NETWORK,i.Sh="undefined"!=typeof HIVE_RESTRICTED_CONNINFO&&HIVE_RESTRICTED_CONNINFO,i.bo="undefined"!=typeof HIVE_DISCOVERY?HIVE_DISCOVERY:"ws://127.0.0.1:8000/hive",i.Rh="undefined"!=typeof P2PDispatcherDetailedLog&&P2PDispatcherDetailedLog,i.wh="undefined"!=typeof NetworkManagerDetailedLog&&NetworkManagerDetailedLog,i.ae="undefined"!=typeof ATATUS_KEY?ATATUS_KEY:"592835a6b4204dd197c00488610003e0",i.ce="undefined"!=typeof ATATUS_VERSION?ATATUS_VERSION:"0.8",i.ue="undefined"==typeof ATATUS_DEFAULT_ENABLED||ATATUS_DEFAULT_ENABLED,i.le=5,i.bh="undefined"!=typeof HIVE_PLUGIN_TIMEOUT?HIVE_PLUGIN_TIMEOUT:-1,i.Ch="undefined"==typeof HIVE_DETECT_PRIVATEIP||HIVE_DETECT_PRIVATEIP,i._h=!0,t.he=i},function(e,t,r){"use strict";var i=r(0),n=r(43),s=r(30);!function(e){function t(e,t){return t?e+"-"+t:e}function r(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}function o(e){var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e),0),t.buffer}function a(e,t,r){void 0===r&&(r=!0);for(var i=0;i<e.length;)if(e[i]===t){if(e.splice(i,1),r)break}else i++}function h(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function c(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null==r?"":decodeURIComponent(r[1].replace(/\+/g," "))}function u(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(i.Framework.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function l(e){var t=new Array;for(var r in e)e.hasOwnProperty(r)&&!/^\d+$/.test(r)&&t.push(r);return t}function p(e){return Object.keys(e).map(function(e){return parseInt(e,10)}).filter(function(e){return!isNaN(e)})}function d(e,t){return e[t]?e[t]:null}function f(e,t){return new s(t).Ph(e).toString()}function g(e){return 0==e.length?0:e.reduce(function(e,t){return e+t})/e.length}function E(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0,n=e.length;i<n;i++)r[i]=e.charCodeAt(i);return t}function v(e,t,r,i){var n=new e(t,r),s=i||r.currentTarget;return s&&Object.defineProperties(n,{currentTarget:{value:s,p:!0,Ah:!1},target:{value:s,p:!0,Ah:!1}}),n}e.Oh=new n.Counter;var y=function(){function e(){this.ALPHA=.25,this.Nh=1e8,this.Dh=1e4}return e.prototype.kh=function(){return void 0!==this.Lh},e.prototype.Mh=function(e,t){return this.Lh=Math.min(this.Nh,t/e*8e3),this},e.prototype.Fh=function(e){return this.Lh=Math.max(this.Nh,e),this},e.prototype.Uh=function(e){e.kh()&&(this.kh()?this.Lh=this.Lh*(1-this.ALPHA)+e.Lh*this.ALPHA:this.Lh=e.Lh)},e.prototype.Bh=function(e){return this.kh()?Math.round(8e3*e/this.Lh):NaN},e.prototype.Hh=function(){return this.kh()?this.Lh:NaN},e.prototype.xh=function(){return this.kh()?this.Lh/1e3:NaN},e.prototype.qh=function(){return this.kh()?this.Lh/1e6:NaN},e.prototype.Gh=function(){return this.kh()?this.Lh>1e6?(this.Lh/1e6).toFixed(2)+"Mb/s":this.Lh>1e3?(this.Lh/1e3).toFixed(2)+"Kb/s":this.Lh+"b/s":"NaN"},e}();e.Vh=y,e.jh=t,e.appendBuffer=r,e.Qh=o,e.Kh=a,e.Yh=h,e.Wh=c,e.zh=u,e.Jh=l,e.Xh=p,e.Zh=d,e.$h=f,e.ec=g,e.tc=E,e.createEvent=v}(t.rc||(t.rc={}))},function(e,t,r){"use strict";!function(e){e.ic="statsClient",e.G="servicesClient",e.nc="ticketResolver",e.M="identityProvider",e.sc="connInfoProvider",e.oc="peerInfo",e.ac="streamInfoProvider",e.hc="reporting",e.cc="statsStore",e.uc="trackManager",e.lc="trackClient"}(t.pc||(t.pc={}))},function(e,t,r){"use strict";!function(e){e[e.dc=0]="AUDIO",e[e.fc=1]="VIDEO",e[e.gc=2]="METADATA",e[e.Ec=3]="OTHER"}(t.vc||(t.vc={}))},function(e,t,r){"use strict";r(60);!function(e){e[e.yc=0]="TRACKER",e[e.W=1]="UDP"}(t.Tc||(t.Tc={}));!function(e){e[e.mc=1]="PLAYER",e[e.Ic=2]="P2P_AGENT",e[e.Sc=3]="PREFETCHER_FIRST_TIER",e[e.Rc=4]="PREFETCHER_SECOND_TIER"}(t.wc||(t.wc={}));var i=function(){function e(){}return e}();t.TrackerPeerStreamInfo=i;var n=function(){function e(e,t,r){this.isLeader=r,this.internalAs=0,this.externalAs=0,this.type=e,r||(this.isLeader=!1),t&&(this.guid=t.guid,this.internalAs=t.internalAs,this.externalAs=t.externalAs,this.nat=t.nat,this.bandwidth=t.bandwidth,this.watchingBitrate=t.watchingBitrate,this.streams=t.streams,this.rankValue=t.rankValue,this.timestamp=t.timestamp,this.privateIpString=t.privateIpString,this.publicIpString=t.publicIpString)}return e}();t.bc=n},function(e,t,r){r(65),r(36),r(66),r(100)},function(e,t,r){"use strict";function i(){throw new Error("Can't construct. GenericCollection is a mixin.")}e.i=i,i.Cc=Object.freeze([]),i.prototype.addEach=function(e){if(e&&Object(e)===e)if("function"==typeof e.forEach)e.forEach(this.add,this);else if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);else Object.keys(e).forEach(function(t){this.add(e[t],t)},this);else if(e&&"number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);return this},i.prototype._c=function(e,t){return e.forEach(function(e){this.delete(e,t)},this),this},i.prototype.forEach=function(e){var t=arguments[1];return this.reduce(function(r,i,n,s,o){e.call(t,i,n,s,o)},void 0)},i.prototype.map=function(e){var t=arguments[1],r=[];return this.reduce(function(i,n,s,o,a){r.push(e.call(t,n,s,o,a))},void 0),r},i.prototype.enumerate=function(e){null==e&&(e=0);var t=[];return this.reduce(function(r,i){t.push([e++,i])},void 0),t},i.prototype.group=function(e,t,r){r=r||Object.cs;var i=[],n=[];return this.forEach(function(s,o,a){var h,o=e.call(t,s,o,a),c=n.indexOf(o,r);-1===c?(h=[],i.push([o,h]),n.push(o)):h=i[c][1],h.push(s)}),i},i.prototype.toArray=function(){return this.map(Function.identity)},i.prototype.Pc=function(){var e={};return this.reduce(function(t,r,i){e[i]=r},void 0),e},i.prototype.filter=function(e){var t=arguments[1],r=this.Es();return this.reduce(function(i,n,s,o,a){e.call(t,n,s,o,a)&&r.add(n,s)},void 0),r},i.prototype.every=function(e){var t=arguments[1];return this.reduce(function(r,i,n,s,o){return r&&e.call(t,i,n,s,o)},!0)},i.prototype.some=function(e){var t=arguments[1];return this.reduce(function(r,i,n,s,o){return r||e.call(t,i,n,s,o)},!1)},i.prototype.all=function(){return this.every(Boolean)},i.prototype.uo=function(){return this.some(Boolean)},i.prototype.min=function(e){e=e||this.Ac||Object.Oc;var t=!0;return this.reduce(function(r,i){return t?(t=!1,i):e(i,r)<0?i:r},void 0)},i.prototype.max=function(e){e=e||this.Ac||Object.Oc;var t=!0;return this.reduce(function(r,i){return t?(t=!1,i):e(i,r)>0?i:r},void 0)},i.prototype.Nc=function(e){return e=void 0===e?0:e,this.reduce(function(e,t){return e+t},e)},i.prototype.Dc=function(e){var t=void 0===e?0:e,r=void 0===e?0:e;return this.reduce(function(e,i){t+=i,r+=1},void 0),t/r},i.prototype.concat=function(){for(var e=this.Es(this),t=0;t<arguments.length;t++)e.addEach(arguments[t]);return e},i.prototype.kc=function(){var e=this;return this.reduce(function(t,r){return r.forEach(function(e){this.push(e)},t,e),t},[])},i.prototype.Lc=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),Array.Mc(e)},i.prototype.join=function(e){return this.reduce(function(t,r){return void 0===t?r:t+e+r},void 0)},i.prototype.Fc=function(e,t,r){return e=e||this.Ac||Object.Oc,e.Uc?(t=e.Uc,e=e.Oc||this.Ac||Object.Oc):t=t||Function.identity,void 0===r&&(r=1),this.map(function(e){return{Uc:t(e),value:e}}).sort(function(t,i){return e(t.Uc,i.Uc)*r}).map(function(e){return e.value})},i.prototype.reversed=function(){return this.Es(this).reverse()},i.prototype.clone=function(e,t){if(void 0===e)e=1/0;else if(0===e)return this;var r=this.Es();return this.forEach(function(i,n){r.add(Object.clone(i,e-1,t),n)},this),r},i.prototype.only=function(){if(1===this.length)return this.Bc()},i.prototype.iterator=function(){return this.Hc.apply(this,arguments)},i.gs={get:function(){return this.length},p:!1,l:!0},Object.defineProperty(i.prototype,"size",i.gs),r(65)},function(e,t,r){function i(){throw new Error("This is an abstract interface. Mix it. Don't construct it")}function n(e,t,r,i){var n,s,o,a=e.active,h=e.xc,c=h.length,u=c;for(a.length>c&&(a.length=c);c--;)a[c]=h[c];for(s=0;s<u;s++)if(o=a[s],!s||h.indexOf(o)>=0){if(n=o[e.qc]||o[e.Gc]||o,!n.call)throw new Error("No event listener for "+e.Vc+" or "+e.jc+" or call on "+n);n.call(o,r,t,i)}}r(11);var s=Object.prototype.hasOwnProperty;e.i=i,i.debug=!0,i.prototype.Qc=function(e){this.Kc||Object.defineProperty(this,"__propertyChangeListeners__",{value:{},p:!1,l:!0,Ah:!0});var t=this.Kc;if(!s.call(t,e)){var r=String(e);r=r&&r[0].toUpperCase()+r.slice(1),t[e]={Yc:{xc:[],active:[],qc:"handle"+r+"WillChange",Gc:"handlePropertyWillChange"},Wc:{xc:[],active:[],qc:"handle"+r+"Change",Gc:"handlePropertyChange"}}}return t[e]},i.prototype.zc=function(e){if(!this.Kc)return!1;if(!e)return!0;var t=this.Kc;return!!s.call(t,e)},i.prototype.Jc=function(e,t,r){this.Xc&&!this.Zc&&this.Xc();var n,s=i.Qc(this,e);n=r?s.Yc:s.Wc,i.$c(this,e),n.xc.push(t);var o=this;return function(){i.eu(o,e,t,r),o=null}},i.prototype.tu=function(e,t){return i.Jc(this,e,t,!0)},i.prototype.eu=function(e,t,r){var n,s=i.Qc(this,e);n=r?s.Yc:s.Wc;var o=n.xc.lastIndexOf(t);if(-1===o)throw new Error("Can't remove property change listener: does not exist: property name"+JSON.stringify(e));n.xc.splice(o,1)},i.prototype.ru=function(e,t){return i.eu(this,e,t,!0)},i.prototype.iu=function(e,t,r){var s,o=i.Qc(this,e);if(!o.isActive){o.isActive=!0,s=r?o.Yc:o.Wc;try{n(s,e,t,this)}finally{o.isActive=!1}}},i.prototype.nu=function(e,t){return i.iu(this,e,t,!0)},i.prototype.$c=function(e){var t=this.su;if(t){if(s.call(t,e))return}else{if(Array.isArray(this))return;if(!Object.isExtensible(this))throw new Error("Can't make property "+JSON.stringify(e)+" observable on "+this+" because object is not extensible");t={},Object.defineProperty(this,"__overriddenPropertyDescriptors__",{value:t,p:!1,Ah:!0,l:!0})}var r;"object"==typeof this.ou?r=this.ou:(r={},Object.defineProperty(this,"__state__",{value:r,Ah:!0,p:!1})),r[e]=this[e];var i,o=this;do{if(i=Object.getOwnPropertyDescriptor(o,e))break;o=Object.getPrototypeOf(o)}while(o);if(i){if(!i.l)return;if(!i.Ah&&!i.set)return}else i={value:void 0,p:!0,Ah:!0,l:!0};t[e]=i;var a;a="value"in i?{get:function(){return i.value},set:function(t){var s,o;if(t!==i.value){if(s=this.Kc[e],!(o=s.isActive)){s.isActive=!0;try{n(s.Yc,e,i.value,this)}finally{}}if(i.value=t,r[e]=t,!o)try{n(s.Wc,e,t,this)}finally{s.isActive=!1}}},p:i.p,l:!0}:{get:i.get,set:function(t){var s,o,a=this[e];if(i.set.call(this,t),(t=this[e])!==a){if(s=this.Kc[e],!(o=s.isActive)){s.isActive=!0;try{n(s.Yc,e,a,this)}finally{}}if(r[e]=t,!o)try{n(s.Wc,e,t,this)}finally{s.isActive=!1}}},p:i.p,l:!0},Object.defineProperty(this,e,a)},i.Qc=function(e,t){return e.Qc?e.Qc(t):i.prototype.Qc.call(e,t)},i.zc=function(e,t){return e.zc?e.zc(t):i.prototype.zc.call(e,t)},i.Jc=function(e,t,r,n){if(Object.au(e))return e.Jc?e.Jc(t,r,n):i.prototype.Jc.call(e,t,r,n)},i.eu=function(e,t,r,n){if(Object.au(e))return e.eu?e.eu(t,r,n):i.prototype.eu.call(e,t,r,n)},i.iu=function(e,t,r,n){if(Object.au(e))return e.iu?e.iu(t,r,n):i.prototype.iu.call(e,t,r,n)},i.tu=function(e,t,r){return i.Jc(e,t,r,!0)},i.ru=function(e,t,r){return i.eu(e,t,r,!0)},i.nu=function(e,t,r){return i.iu(e,t,r,!0)},i.$c=function(e,t){return e.$c?e.$c(t):i.prototype.$c.call(e,t)}},function(e,t,r){"use strict";var i,n=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(41),o=r(6),a=o.he.Sh,h=o.he.Ch;!function(e){var t=function(){function e(){}return e}();t.DashFilterBitrates=null,t.DashRemoveBitrateSize=!1,e.Dash=t;var r=function(){function e(){}return e}();r.AudioAccounting=!0,e.Stats=r;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(s.HiveConfig.DebugLogs);i.TrackerLogs=0,e.DebugLogs=i;var o=function(){function e(){}return e}();o.usiz=null,e.UDPBroadcast=o;var c=function(){function e(){}return e}();c.restrictedConnectivityInfo=a,c.hiddenHostnameValue="[Hidden]",e.SensitiveInfo=c;var u=function(){function e(){}return e}();u.cu=null,u.uu=null,e.ClientInfo=u;var l=function(){function e(){}return e}();l.detectPrivateIP=h,e.ConnInfo=l}(i=t.HiveConfig||(t.HiveConfig={})),"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Dash=i.Dash,window.HiveConfig.Stats=i.Stats,window.HiveConfig.UDPBroadcast=i.UDPBroadcast,window.HiveConfig.DebugLogs=i.DebugLogs,window.HiveConfig.SensitiveInfo=i.SensitiveInfo,window.HiveConfig.ClientInfo=i.ClientInfo,window.HiveConfig.ConnInfo=i.ConnInfo)},function(e,t,r){"use strict";!function(e){e.lu="snapAccountingManager",e.pu="membership",e.du="partnership",e.fu="inPartnership",e.gu="outPartnership",e.Eu="inPrefetcherPartnership",e.vu="outPrefetcherPartnership",e.yu="cache",e.Tu="livecache",e.mu="vodcache",e.Iu="objIndex",e.Su="centrFragment",e.Ru="hcache",e.wu="responder",e.bu="requester",e.Cu="p2pRequester",e._u="peer",e.Pu="contextResolver",e.Au="videoPrefetcher",e.Ou="prefetchManager",e.Nu="picker",e.Du="trackerClient",e.ku="scoreUpdater",e.q="serverManager",e.Lu="requestTracker",e.Mu="trackerManager",e.Fu="renderStats",e.Uu="udpBroadcaster",e.Bu="udpDiscovery",e.Th="udpLeaderElection",e.Hu="nodeInfo",e.xu="ipspoofing"}(t.qu||(t.qu={}))},function(e,t){e.i=function(){return new Function}},function(e,t,r){"use strict";var i=!0,n={Gu:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},Vu:function(e,t,r){var i=e.match(t);return i&&i.length>=r&&parseInt(i[r],10)},ju:function(){var e={};if(e.Qu=null,e.version=null,"undefined"==typeof window||!window.navigator)return e.Qu="Not a browser.",e;if(navigator.mozGetUserMedia)e.Qu="firefox",e.version=this.Vu(navigator.userAgent,/Firefox\/(\d+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.Qu="chrome",e.version=this.Vu(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.Qu="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.Qu="safari",e.version=this.Vu(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))e.Qu="edge",e.version=this.Vu(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!navigator.mediaDevices||!navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return e.Qu="Not a supported browser.",e;e.Qu="safari",e.version=this.Vu(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}return e},Ku:function(){if("object"==typeof window&&window.HTMLMediaElement&&"srcObject"in window.HTMLMediaElement.prototype){var e=URL.createObjectURL.bind(URL),t=URL.revokeObjectURL.bind(URL),r=new Map,i=0;URL.createObjectURL=function(t){if("getTracks"in t){var n="polyblob:"+ ++i;return r.set(n,t),console.log("URL.createObjectURL(stream) is deprecated! Use elem.srcObject = stream instead!"),n}return e(t)},URL.revokeObjectURL=function(e){t(e),r.delete(e)};var n=Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,"src");Object.defineProperty(window.HTMLMediaElement.prototype,"src",{get:function(){return n.get.apply(this)},set:function(e){return this.Yu=r.get(e)||null,n.set.apply(this,[e])}});var s=HTMLMediaElement.prototype.setAttribute;HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.Yu=r.get(arguments[1])||null),s.apply(this,arguments)}}}};e.i={log:n.log,Gu:n.Gu,Wu:n.ju(),Vu:n.Vu,Ku:n.Ku,ju:n.ju.bind(n)}},function(e,t,r){"use strict";function i(e,t,r){return void 0===t&&(t=""),void 0===r&&(r=[]),n(e,t,r,!0)}function n(e,t,r,i){void 0===t&&(t=""),void 0===r&&(r=[]),void 0===i&&(i=!1);for(var s in e)!function(s){if(e.hasOwnProperty(s)){var o=e[s];Array.isArray(o)?o.forEach(function(e,o){"object"==typeof e&&n(e,t+"."+s+"["+o+"]",r,i)}):"object"==typeof o?n(o,t+"."+s,r,i):"number"==typeof o&&isNaN(o)&&(r.push(t+"."+s),i||(e[s]=null))}}(s);return r}function s(e,t,r){var i=new c;return i.ticketUrl=e,i.code=t,i.message=u(t),i.detailedMessage=r,i}var o=r(3),a=r(4),h=r(26),c=h.HiveComm.HiveSessionError,u=h.HiveComm.getHiveSessionErrorMessage,l=h.HiveComm.HiveSession,p=r(53),d=r(72),f=r(14),g=r(6),E=r(1),v=g.he.uh;if(v)var y=r(31).HiveRequest,T=r(54).zu;var m=function(){function e(t){if(!t){if(0==Object.keys(e.mapping).length&&!e.Ju)return E.ErrorMonitor.ve().logError("No registered default HiveRequestFactory tech",e.loggerId),e.Ju=!0,e.getOriginalXhr();t=Object.keys(e.mapping)[0]}if(!(t in e.mapping))return e.Ju||(E.ErrorMonitor.ve().logError("no registered HiveRequestFactory tech for session",{sessionId:t}),e.Ju=!0),e.getOriginalXhr();var r=e.mapping[t];switch(r.tech){case"HiveJS":return v?r.Xu?new y(t):(r.Xu=!0,new T(t)):e.getOriginalXhr();case"HiveJsProxy":return r.Xu?new p.Zu(t):(r.Xu=!0,new d.$u(t));case"HiveJava":case"StatsJS":return e.getOriginalXhr()}}return e.getOriginalXhr=function(){return"undefined"!=typeof OriginalXMLHttpRequest?new OriginalXMLHttpRequest:new XMLHttpRequest},e.clear=function(){e.mapping={}},e.clearSessionState=function(t){if(t in e.mapping){var r=e.mapping[t];for(var i in r)"tech"!==i&&delete r[i]}},e.clearSession=function(t){t in e.mapping&&delete e.mapping[t]},e.registerTech=function(t,r){t in e.mapping||(e.mapping[t]={}),e.mapping[t].tech=r},e}();m.mapping={},m.Ju=!1,m.loggerId="[HiveRequestFactory]",t.HiveRequestFactory=m;var I=function(){function e(e,t,r,i){this.el=!1,this.ticketUrl=e,this.ticket=t,this.manifest=r,this.tl=a.defer(),this.rl=i,this.rl&&this.tl.resolve(this.rl)}return e.prototype.isActive=function(e){return null!==this.tech&&this.tech.isActive(e,this)},e.prototype.il=function(e){this.el!=e&&(this.el=e,this.tech&&this.tech.nl(this,e))},e.prototype.getTechName=function(){return this.tech&&this.tech.getName()||void 0},e.prototype.sl=function(){return this.el},e.prototype.close=function(e,t){if(void 0===t&&(t=!0),this.el=!0,null!=this.tech)return this.tech.ol(this,e,t)},e.prototype.toString=function(){return this.ticket.toString()},e.prototype.toHiveSession=function(){var e=new l;return e.id=this.id,e.ticketUrl=this.ticketUrl,e.manifest=this.manifest,e.tech=this.tech.getName(),e},e.prototype.al=function(){return this.tl.Ss},e.prototype.hl=function(e){this.rl=e,this.tl.resolve(this.rl)},e}();t.cl=I;var S=function(){function e(){}return e}();t.ul=S;var R=function(){function e(){this.success=0,this.ll=0,this.bytes=0}return e}();t.pl=R;var w=function(){function e(){this.dl=0,this.fl=0,this.gl=new o,this.El=new o}return e.prototype.accountCompleted=function(e,t,r,i){void 0===i&&(i=!0);var n=e?this.gl:this.El;n.has(t)||n.set(t,new R);var s=n.get(t);s.bytes+=r,i&&s.success++},e.prototype.accountFailed=function(e,t){var r=e?this.gl:this.El;r.has(t)||r.set(t,new R),r.get(t).ll++},e.prototype.updateBandwidth=function(e){this.bandwidth=e},e.prototype.bitrateSwitchUp=function(){this.dl++},e.prototype.bitrateSwitchDown=function(){this.fl++},e.prototype.getBandwidth=function(){return this.bandwidth},e.prototype.getVideoBitrates=function(){return this.gl},e.prototype.getAudioBitrates=function(){return this.El},e.prototype.getBitrateSwitchUp=function(){return this.dl},e.prototype.getBitrateSwitchDown=function(){return this.fl},e}();t.HivePlayerExtendedStats=w;var b=function(){function e(){var t=this;if(e.fe)throw new Error("Error: Instantiation failed: Use VisibilityChangeListener.getInstance() instead of new.");var r,i;void 0!==document.hidden?(r="hidden",i="visibilitychange"):void 0!==document.msHidden?(r="msHidden",i="msvisibilitychange"):void 0!==document.webkitHidden&&(r="webkitHidden",i="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==document[r]?document.addEventListener(i,function(){var e=!document[r];t.vl.forEach(function(r){r.call(t,e)})},!1):e.logger&&e.logger.debug("warn - visibilityChange listener not supported"),this.vl=new Array}return e.ve=function(t){return t&&(this.logger=t),void 0===this.fe&&(this.fe=new e),this.fe},e.prototype.yl=function(e){this.vl.push(e)},e}();t.Tl=b,t.ml=i,t.Il=n,t.Sl=s;var C=function(){function e(){}return e.getItem=function(e){try{return window.sessionStorage?window.sessionStorage.getItem(e):null}catch(e){return null}},e.setItem=function(e,t){try{return!!window.sessionStorage&&(window.sessionStorage.setItem(e,t),!0)}catch(e){return!1}},e.removeItem=function(e){try{window.sessionStorage&&window.sessionStorage.removeItem(e)}catch(e){return null}},e}();t.Rl=C;var _=function(){function e(e){this.wl=e}return e.prototype.bl=function(e){var t=Date.now();return this.isEqual(this.Cl,e)||(this._l=t),this.Cl=e,t-this._l>=this.wl},e.prototype.isEqual=function(e,t){if(e&&t){return[t.Pl-e.Pl,t.Al-e.Al,t.Ol-e.Ol].reduce(function(e,t){return e&&Math.abs(t)<10},!0)}return!1},e}();t.Nl=_;var P=function(){function e(){}return e.getPrivateIp=function(e){var t=e.getPrivateIp();return f.HiveConfig.SensitiveInfo.restrictedConnectivityInfo&&t&&(t=t.replace(/[0-9]*$/,"0")),t},e.Dl=function(e){return f.HiveConfig.SensitiveInfo.restrictedConnectivityInfo?f.HiveConfig.SensitiveInfo.hiddenHostnameValue:e.getHostName()},e}();t.kl=P},function(e,t,r){"use strict";var i=r(3),n=r(4),s=r(0),o=r(22),a=r(8),h=r(32);!function(e){e[e.STOP=0]="STOP",e[e.IDLE=1]="IDLE",e[e.Ll=2]="PLAY"}(t.Ml||(t.Ml={}));var c=function(){function e(e,t,r,i){this.ticket=e,this.Fl=t,this.app=r,this.identity=i,this.Ul=s.Framework.resolve(a.pc.cc),this.Bl=s.Framework.resolve(a.pc.ic),this.Hl=s.Framework.resolve(a.pc.uc),this.xl=new o.Gl.ql(this.Hl)}return e.prototype.Vl=function(e,t,r){this.app=new u(e,t),this.Ul.Vl(this.app),this.Hl.Vl(this.app,r)},e.prototype.nl=function(e){this.Bl.nl(e)},e.prototype.jl=function(){return this.renderStatsCallback},e.prototype.Ql=function(e){this.renderStatsCallback=e},e}();t.Kl=c;var u=function(){function e(e,t){this.app=e,this.version=t}return e}();t.Yl=u;var l=function(){function e(){this.p2pId=null,this.Wl=null,this.zl=new i,this.logger=s.Framework.resolve(s.Framework.V.R).log(),this.logger.debug("INIT REPORTING"),this.Fl=s.Framework.resolve(a.pc.G),this.Jl=s.Framework.resolve(a.pc.M),this.Xl=s.Framework.resolve(a.pc.nc)}return e.prototype.initSession=function(e,t,r){var i=this,s=n.defer(),o=this.Jl.Zl(),a=this.Xl.$l(e);return null!=r&&(a.testId=r),null!=a?o.then(function(e){return i.ep(e,a,s,t)}).fail(s.reject):s.reject("Ticket URL not valid"),s.Ss},e.prototype.close=function(e){e?(this.zl.delete(e),0==this.zl.length&&this.Fl.close()):(this.zl.clear(),this.Fl.close())},e.prototype.ep=function(e,t,r,i){var n=this;this.p2pId=e.tp(),this.Wl=e.rp();var s=this.Fl.init(this.p2pId,t),o=this.Xl.resolve(s.np,t,i);s.Ss.then(function(t){o.then(function(t){var i=t.sessionId;if(n.zl.has(i)){var s=n.zl.get(i);n.logger.warn("SESSION ALREADY EXISTING "+s.Ul.ticket)}else{var o=new u(h.Hive.sp(),h.Hive.getVersion()),a=new c(t,n.Fl,o,e);a.Ul.init(n.Wl,t,o,i),a.Hl.init(n.Wl,o),a.Hl.op(t),n.zl.set(i,a),n.logger.debug("SESSION SET ",i),r.resolve(a)}}).fail(function(e){return r.reject(e||"Error resolving the ticket")}),t.onerror(function(e){r.reject("Error establishing connection to Hive Services")})}).fail(function(e){return r.reject(e)}),this.Fl.connect()},e.prototype.ap=function(e,t){return e.hp()===t.hp()&&e.cp()===t.cp()&&e.up()===t.up()},e}();t.lp=l},function(e,t,r){"use strict";var i=r(41),n=r(29),s=r(42),o=r(6);o.he.lh,o.he.uh,o.he.ph;if(void 0===a)var a=3e4;!function(e){!function(e){var t=function(){function e(){this.monitorPort=n.L.pp?s.fp.dp:s.fp.gp,this.playerPort=n.L.pp?s.fp.Ep:s.fp.vp,this.feedbackPeriod=2e3,this.idleTimePeriod=6e4,this.useSessionCheck=n.L.yp,this.debugLevel="notice",this.hiveTechOrder=[],this.telemetryId=null,this.silent=!1,this.loggerTimestamp=i.HiveConfig.Framework.LoggerTimestamp,this.testId=null,this.pluginTimeout=a,this.onSourceSetCompleted=function(e){},this.onLoadingCompleted=function(e){},this.detectPrivateIP=o.he.Ch,this.onActiveSession=function(e){}}return e}();e.Options=t;var r=function(){function e(){this.initTimeout=3e4,this.onError=function(e){return!0},this.onActiveSession=function(e){}}return e}();e.Tp=r;var h=function(){function e(){this.hivePlayerPort="playerPort",this.hiveMonitorPort="monitorPort",this.hiveSilent="silent",this.hiveDebugLevel="debugLevel",this.hiveDebugTimestamp="loggerTimestamp",this.hiveSetupTimeout="setupTimeout",this.hiveJavaTimeout="initTimeout",this.hiveWarnJavaTimeout="warnSlowRespTimeout",this.hiveTestId="testId",this.hiveDetectPrivateIP="detectPrivateIP"}return e}();e.mp=h}(e.Options||(e.Options={}))}(t.HiveComm||(t.HiveComm={}));var h;!function(e){var t=function(){function e(){}return e}();t.enabledRUM=!1,t.enableKeyCombination=!0,t.enabledErrorFilter=!0,e.ErrorMonitor=t}(h=t.HiveConfig||(t.HiveConfig={})),"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.ErrorMonitor=h.ErrorMonitor)},function(e,t,r){"use strict";function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],i=1;i<e.length;i++){var n=new RegExp("\\{"+(i-1)+"\\}","gm");r=r.replace(n,e[i])}return r}function n(e,t){for(var r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(t[r]=e[r])}function s(e,t,r){var i=new d(e).query(!0);for(var n in i)try{if(i.hasOwnProperty(n)&&t.hasOwnProperty(n)&&r.hasOwnProperty(t[n])){var s=t[n],a=i[n];r[s]=o(a,r[s])}}catch(e){}}function o(e,t){var r;switch(typeof t){case"number":r=parseInt(e);break;case"boolean":r="true"===e;break;default:r=e}return r}function a(e,t){function r(){if(!e())return i.resolve(!0);p.when(t(),r,i.reject)}var i=p.defer();return p.Ts(r),i.Ss}function h(e,t,r,i){return void 0===r&&(r=!0),void 0===i&&(i={}),c("GET",e,t,r,i)}function c(e,t,r,i,n){void 0===i&&(i=!0),void 0===n&&(n={});var s=p.defer();try{var o=new XMLHttpRequest;if(o.open(e,t,i),void 0!=r&&null!=r&&o.setRequestHeader("Content-Type",r),n)for(var a in n)n.hasOwnProperty(a)&&null!==n[a]&&o.setRequestHeader(a,n[a]);o.onload=function(){200==o.status?s.resolve(o.response):s.reject({status:o.status,reason:o.statusText,body:o.responseText})},o.onerror=function(e){s.reject({status:-1,reason:"Network Error"})},o.send()}catch(e){s.reject({status:-1,reason:e})}return s.Ss}function u(e,t,r,i,n){void 0===n&&(n=!0);var s=p.defer();try{var o=new XMLHttpRequest;if(o.open("POST",e,n),void 0!=r&&null!=r&&o.setRequestHeader("Content-Type",r),void 0!=i&&null!=i)for(var a in i)i.hasOwnProperty(a)&&null!==i[a]&&o.setRequestHeader(a,i[a]);o.onload=function(){200==o.status?s.resolve(o.response):s.reject({status:o.status,reason:o.statusText})},o.onerror=function(e){s.reject({status:-1,reason:"Network Error"})},o.send(t)}catch(e){s.reject({status:-1,reason:e})}return s.Ss}function l(e,t){var r,i,n=document.querySelector("base"),s=document.querySelector("head"),o=document.createElement("a"),a=n;return n?r=n.href:a=s.appendChild(document.createElement("base")),a.href=e,o.href=t,i=o.href,n?n.href=r:s.removeChild(a),i}var p=r(4),d=r(30);t.Ip=i,t.Sp=n,t.Rp=s,t.wp=a,t.bp=h,t.Cp=c,t._p=u,t.$h=l},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(18),s=r(44).Pp,o=r(4),a=r(0),h=r(8),c=r(27),u=r(23),l=r(14);!function(e){e.Ap="hive-client-track",e.Op="trackevent",e.Np="NULLID",e.Dp="";var t=function(){function e(){}return e}();t.kp=0,t.Lp=1,t.Mp=2,t.Fp=100,t.Up=200,e.Bp=t;!function(e){e[e.Hp=0]="PLAYING",e[e.xp=1]="BUFFERING",e[e.qp=2]="PAUSED",e[e.Gp=3]="SKIP",e[e.Vp=4]="STOPPED",e[e.ERROR=5]="ERROR",e[e.jp=6]="WINDOW_SIZE",e[e.Qp=7]="FULLSCREEN",e[e.Kp=8]="VISIBLE",e[e.HIDDEN=9]="HIDDEN"}(e.Yp||(e.Yp={}));!function(e){e[e.Wp=0]="JAVA_NOT_REACHABLE",e[e.zp=1]="JAVA_NOT_READY",e[e.Jp=2]="JAVA_WRONG_VERSION",e[e.Xp=3]="JAVA_SESSION_BUSY",e[e.Zp=4]="JAVA_SESSION_ERROR",e[e.$p=5]="JAVA_TICKET_TIMEOUT"}(e.td||(e.td={}));var r=function(){function e(){}return e}();e.rd=r;var p=function(){function e(){}return e}();e.nd=p;var d=function(){function e(){}return e}();e.sd=d;var f=function(){function e(){this.type=t.Mp}return e}(),g=function(){function e(){this.sessions=new Array}return e.prototype.od=function(e,t){var r;this.sessions.forEach(function(t){t.sessionId==e&&(r=t)}),r||(r=new E,r.sessionId=e,this.sessions.push(r)),r.events.push(t)},e}();e.ad=g;var E=function(){function e(){this.events=new Array}return e}();e.hd=E;var v=function(){function t(){this.logger=a.Framework.resolve(a.Framework.V.R).log(),this.ud=a.Framework.resolve(h.pc.sc),this.ld=new Array,this.pd=new Array,this.dd=new Array}return t.prototype.fd=function(e){this.client=e},t.prototype.init=function(e,t){this.gd=e,this.Vl(t),this.logger.debug("[TRACK] INIT ID: "+e)},t.prototype.Vl=function(e,t){this.app=e,t&&(this.Ed=t)},t.prototype.updatePlayerInfo=function(e){this.vd=e},t.prototype.op=function(e){var t=new T(e,this);this.ld.push(t),this.yd=null,this.client.Td(!0)},t.prototype.Xu=function(e,t,r){if(!this.yd)for(var i=0;i<this.ld.length;i++){var n=this.ld[i];if(n.ticket.sessionId===e){this.logger.debug("[TRACK] Activating Track for session "+e),this.yd=n;break}}if(this.yd){if(this.yd.ticket.sessionId!=e)return void this.logger.warn("[TRACK] ignoring manifest not matching event "+this.yd.ticket.sessionId+" != "+e);if(!this.yd.md){var s=new m(e,t,r);this.yd.Id(s),this.client.Td()}}},t.prototype.Sd=function(e,t,r){null!=this.yd&&(this.yd.md||this.yd.Rd.push(new w(e,t,r)))},t.prototype.wd=function(e,t,r){this.pd.push(new S(e,t,r)),this.client.Td()},t.prototype.bd=function(e,t,r){this.dd.push(new R(e,t,r)),this.client.Td()},t.prototype.Cd=function(e){var t=this;e&&e.forEach(function(e){t.dd.push(e)})},t.prototype.Pd=function(){var e=new p;this.Ed?(e.partnerId=this.Ed.partnerId,e.customerId=this.Ed.customerId):l.HiveConfig.ClientInfo.cu&&l.HiveConfig.ClientInfo.uu?(e.partnerId=l.HiveConfig.ClientInfo.cu,e.customerId=l.HiveConfig.ClientInfo.uu):this.yd&&(e.partnerId=this.yd.ticket.up(),e.customerId=this.yd.ticket.cp()),e.version=this.app.app+"_"+(this.Ed?this.Ed.version:this.app.version),this.Ed&&(e.installVersion=this.Ed.installVersion,e.installTs=this.Ed.installTs);var t=new s;return t.Ad(navigator.userAgent),e.os=t.Od().name+" "+t.Od().version,this.vd&&(e.commVersion=this.vd.commVersion,e.pluginName=this.vd.pluginName,e.pluginVersion=this.vd.pluginVersion,e.playerTech=this.vd.playerTech,e.playerVersion=this.vd.playerVersion,this.vd.telemetryId&&(e.telemetryId=this.vd.telemetryId)),e},t.prototype.Nd=function(){return this.yd?this.yd:this.ld&&this.ld.length>0?this.ld[this.ld.length-1]:void 0},t.prototype.Dd=function(t){var i=this;if(void 0===t&&(t=!0),0==this.ld.length&&0==this.pd.length)return t?o.reject("nothing to send"):(this.logger.debug("[TRACK]  NOTHING TO SEND"),null);var n=new r;n.app=e.Ap,n.createdAt=a.Framework.time(),n.guid=this.gd,n.name=e.Op;var s=this.Nd();if(s){var h=s.ticket.kd().replace(/[\[\]]/g,"");n.tags=[h],n.tags.push(s.ticket.up()),n.tags.push(s.ticket.cp())}else n.tags=new Array;var c=new g;if(c.peer=this.Pd(),this.ld.forEach(function(e){e.md||c.od(e.ticket.sessionId,e)}),this.pd.forEach(function(e){c.od(e.sessionId,e)}),this.dd.forEach(function(e){c.od(e.sessionId,e)}),n.data=c,t)return this.ud.getConnectivityInfo().then(function(e){var t=i.Ld(e);return c.od("null",t),n}).fail(function(e){return n});var u=this.Ld(this.ud.Md());return c.od("null",u),n},t.prototype.Ld=function(e){var t=new f;t.ts=a.Framework.time();var r=e.getNetworkChanged();return r.getPublicIp()&&(t.pubIp=r.getPublicIp()),r.getPrivateIp()&&(t.privIp=n.kl.getPrivateIp(r)),e.getHostName()&&(t.hostname=n.kl.Dl(e)),r.getCidr()&&(t.netmask=r.getCidr()),r.getNic()&&(t.nic=r.getNic()),r.getNicName()&&(t.nicName=r.getNicName()),r.getMacAddress()&&(t.mac=r.getMacAddress()),t},t.prototype.Fd=function(){return this.Ed?this.Ed.userAgent:navigator.userAgent},t.prototype.reset=function(){this.ld=new Array,this.pd=new Array,this.dd=new Array},t.prototype.Ud=function(e){},t}();e.Bd=v;var y=function(){function e(e){this.Hd=isNaN(l.HiveConfig.DebugLogs.TrackSnapshotLogs)?0:l.HiveConfig.DebugLogs.TrackSnapshotLogs,this.Hl=e,this.logger=a.Framework.resolve(a.Framework.V.R).log(),this.client=a.Framework.resolve(h.pc.G),this.Hl.fd(this)}return e.prototype.Td=function(e){void 0===e&&(e=!1);var t=e?c.Gd.qd.xd:c.Gd.qd.Vd;if(this.jd){this.Qd-(new Date).getTime()>t&&(a.Framework.clearTimeout(this.jd),this.Qd=null,this.Kd(t))}else this.Kd(t)},e.prototype.Yd=function(){this.jd&&(a.Framework.clearTimeout(this.jd),this.Qd=this.jd=null)},e.prototype.Kd=function(e){var t=this;this.jd=a.Framework.setTimeout(function(){t.Wd()},e),this.Qd=(new Date).getTime()+e},e.prototype.Wd=function(e){var t=this;void 0===e&&(e=!0),this.jd=null,this.Qd=null;var r=this.Hl.Dd(e);e?(this.logger.debug("[TRACK] TAKING A TRACK SNAPSHOT"),r.then(function(e){return t.forward(e)}).fail(function(e){t.logger.debug("[TRACK]  ERROR GENERATING/SENDING THE TRACK SNAPSHOT: ",e)}).finally(function(){return t.Hl.reset()}).done()):(this.logger.debug("[TRACK] FLUSHING TRACK SNAPSHOT"),this.forward(r),this.Hl.reset())},e.prototype.forward=function(e){if(this.client&&this.client.zd()&&e){var t=JSON.stringify(e);switch(this.Hd){case 0:default:this.logger.debug("[TRACK] TRACK EVENT");break;case 1:this.logger.debug("[TRACK] TRACK EVENT:"+t)}var r=new u.Jd(Services.Xd,2,t);this.client.zd().send(r)}},e.prototype.Zd=function(e){void 0===e&&(e=!0),e?(this.Yd(),this.Kd(c.Gd.qd.$d)):this.Wd(!1)},e}();e.ql=y;var T=function(){function e(e,t){this.createdAt=(new Date).getTime(),this.md=!1,this.ticket=e,this.manifests=new Array,this.Rd=new Array,this.Hl=t}return e.prototype.Id=function(e){this.manifests.push(e)},e.prototype.toJSON=function(){var e={};e.type=t.kp,e.ticket={},e.ticket.url=this.ticket.ticketUrl,e.ticket.reqTs=this.ticket.ef,e.ticket.respTs=this.ticket.rf,e.ticket.userAgent=this.Hl.Fd(),null!=this.ticket.testId&&(e.ticket.testId=this.ticket.testId),e.manifests=[],this.manifests.forEach(function(t){var r={};r.url=t.url,r.respTs=t.rf,r.respCode=t.respCode,e.manifests.push(r)});var r=-1,i=-1,n=-1;return this.Rd.forEach(function(e){e.if>0&&(-1==r&&(r=e.ts,i=e.if),n=e.if)}),-1!=r&&(e.playTs=r),-1!=n&&(e.buffTime=n),-1!=i&&(e.initBuffTime=i),e},e}();e.nf=T;var m=function(){function e(e,t,r){this.eventId=e,this.url=t,this.rf=(new Date).getTime(),this.respCode=r}return e}();e.sf=m;var I=function(){function e(e,t,r,i){this.ts=(new Date).getTime(),this.sessionId=e,this.sessionId||(this.sessionId="null"),this.event=t,this.af=r,i&&(this.ts=i)}return e.prototype.toJSON=function(){var e={};return e.type=this.hf+this.event,e.ts=this.ts,this.af&&(e.parameters=this.af),e},e}();e.cf=I;var S=function(e){function r(r,i,n,s){var o=e.call(this,r,i,n,s)||this;return o.hf=t.Fp,o}return i(r,e),r}(I);e.uf=S;var R=function(e){function r(r,i,n,s){var o=e.call(this,r,i,n,s)||this;return o.hf=t.Up,o}return i(r,e),r}(I);e.lf=R;var w=function(){function e(e,t,r){this.ts=(new Date).getTime(),this.Pl=e,this.pf=t,this.if=r}return e}();e.df=w}(t.Gl||(t.Gl={}))},function(e,t,r){"use strict";function i(){if(this.ff)return this.ff;var e=window&&window.window?window.window.gf:void 0;if(void 0!==e&&e.log&&e.debug&&e.info&&e.warn&&e.error&&(this.ff=e),!this.ff){var t=!(void 0===window.console),r=t?console.log.bind(console):function(){};this.ff={log:r,debug:t&&window.console.debug?window.console.debug.bind(console):r,info:t&&window.console.info?window.console.info.bind(console):r,warn:t&&window.console.warn?window.console.warn.bind(console):r,error:t&&window.console.error?window.console.error.bind(console):r}}return this.ff}var n=r(1),s=r(2);t.loggerId="[HiveServices] ";var o=function(){function e(){}return e}();o.Ef=250,t.L=o;var a=function(){function e(e,t,r){this.msgId=t,this.service=e,this.msg=r}return e.prototype.vf=function(){try{var t=new Uint8Array([this.service>>8,255&this.service]),r=new Uint8Array([this.msgId]),i=[t,r,this.msg];return new Blob(i,{type:"application/octet-binary"})}catch(t){throw n.ErrorMonitor.ve().logError("Error serializing message to send to the services",e.loggerId,s.hs.as.ns,t),new Error(t)}},e.yf=function(t){try{var r=(String.fromCharCode.apply(null,new Uint8Array(t)),String.fromCharCode.apply(null,new Uint8Array(t.slice(3)))),i=new Uint8Array(t.slice(0,2)),o=new Uint8Array(t.slice(2,3));return new e((i[0]<<8)+i[1],o[0],r)}catch(e){throw n.ErrorMonitor.ve().logError("Error extracting message from the services",this.loggerId,s.hs.as.ss,e),new Error(e)}},e}();a.loggerId="[Message] ",t.Jd=a,t.logger=i},function(e,t,r){"use strict";var i=r(0),n=r(7);!function(e){e[e.Tf=0]="UPPER_LAYER",e[e.mf=1]="CDN",e[e.If=2]="CDN_PREFETCH",e[e.Sf=3]="CDN_COMPENSATION",e[e.Rf=4]="P2P",e[e.wf=5]="P2P_PREFETCH"}(t.bf||(t.bf={}));var s=function(){function e(){this.Cf=!1,this._f=!1,this.Pf=0,this.Af=0,this.Of=0,this.Nf=0,this.Df=0,this.p2pAgenTrafficSuccessQt=0,this.kf=0,this.srcOtherRespQt=0,this.Lf=0,this.Mf=0,this.Ff=0,this.Uf=0,this.Bf=0}return e}();t.Hf=s;var o=function(){function e(e,t,r,n,o){this.xf=!1,this.type=void 0,this.qf=new s,this.Gf=!1,this.Vf=!1,this.responseHeaders="",this.jf=new ArrayBuffer(0),this.Qf=0,this.type=r,this.Kf=e,this.Yf=t,this.Wf=o,this.zf=n,this.qf.Lf=i.Framework.time()}return e.prototype.Jf=function(){return this.type},e.prototype.Xf=function(){return this.zf.Xf()},e.prototype.Zf=function(){return this.zf.Zf()},e.prototype.$f=function(){return this.Zf()+"-"+this.Yf},e.prototype.eg=function(){return this.zf.tg()},e.prototype.rg=function(){return this.zf.ig()},e.prototype.loaded=function(){this.ng=i.Framework.time()},e.prototype.sg=function(){return this.ng?Math.max(1,this.ng-this.qf.Ff):Math.max(1,this.qf.Uf-this.qf.Ff)},e.prototype.og=function(){return this.ng?Math.max(1,this.ng-this.qf.Mf):Math.max(1,this.qf.Uf-this.qf.Mf)},e.prototype.ag=function(){return 0!=this.qf.Df?(new n.rc.Vh).Mh(this.sg(),this.qf.Df):(new n.rc.Vh).Mh(this.og(),this.qf.Af)},e}();t.hg=o},function(e,t,r){"use strict";var i=r(161),n=r(35),s=r(28),o=s.cg,a=r(4),h=r(0),c=r(163),u=r(169),l=r(5),p=r(7),d=r(3),f=r(15),g=r(1),E=r(2);!function(e){e.ug=!1;var t;!function(e){e[e.Have=1]="Have",e[e.Chunk=2]="Chunk",e[e.Request=3]="Request",e[e.Cancel=4]="Cancel",e[e.Ack=5]="Ack",e[e.Close=6]="Close",e[e.DoNotHave=7]="DoNotHave",e[e.lg=8]="OutPartRequest",e[e.pg=9]="OutPartResp",e[e.dg=10]="UDPHandshakeReq",e[e.UDPHandshakeResponse=11]="UDPHandshakeResponse",e[e.UDPSwitchLeadershipRequest=12]="UDPSwitchLeadershipRequest",e[e.fg=13]="UDPSwitchAck",e[e.Bitrate=14]="Bitrate",e[e.Haves=15]="Haves",e[e.nd=16]="PeerInfo",e[e.Ping=17]="Ping",e[e.Pong=18]="Pong",e[e.gg=19]="NoPartnerResp"}(t=e.Eg||(e.Eg={}));var s=function(){function e(e){this.loggerId="[DispatcherManager] ",this.vg=new d,this.logger=h.Framework.resolve(h.Framework.V.R).log(),this.yg=e}return e.prototype.Tg=function(e){try{var t=null,r=h.Framework.resolve(f.qu._u),i=r.mg(e);return null==i?(this.logger.warn("MSG RECEIVED FROM UNKNOWN SWARM"),null):(t=new c.Ig(i,this.yg.Sg,this.yg.otherGuid,this.yg),this.vg.has(e)||this.vg.set(e,t),this.vg.get(e))}catch(e){g.ErrorMonitor.ve().logError("Error creating new dispatcher",this.loggerId,E.hs.tt.et,e)}},e.prototype.Rg=function(e){this.vg.delete(e)},e.prototype.wg=function(e){return this.vg.get(e)},e}();e.bg=s;var v=function(){function r(){this.loggerId="[Transport] ",this.Cg=null,this._g=h.Framework.resolve(h.Framework.V.R),this.Pg=new s(this),this.fe=r.Ag++,this.Og=h.Framework.time()}return r.prototype.init=function(e,t){this.Sg=e,this.otherGuid=t,this.Ng=h.Framework.resolve(h.Framework.V.F)},r.prototype.Dg=function(){var e=!1;return this.Pg.vg.forEach(function(t,r){(t.sender.Dg()||t.receiver.Dg())&&(e=!0)}),e},r.prototype.reset=function(){this.Pg.vg.forEach(function(e,t){e.sender.kg()})},r.prototype.close=function(e){return this.Pg.Rg(e),0==this.Pg.vg.length&&this.Ng.disconnect(this.otherGuid),a("ok")},r.prototype.Lg=function(r,i,s){try{this.Og=h.Framework.time();var a=s.tc(),c=a.byteLength,u=o.Fg.Mg.create(a),p=o.Ug(u),d=new n;d.Bg(r),d.Hg(i),d.Bg(c),d.Hg(p.toString()),d.append(a),d.xg();var f=d.tc(),v=r===t.Chunk&&h.Framework.C()?f.byteLength+l.hh.Fa.Da:f.byteLength;e.ug&&this._g.log(i).debug(this.fe+" SEND MSG ID "+r+","+v+" HASH "+p.toString()+" TO "+this.otherGuid)}catch(t){g.ErrorMonitor.ve().logError("Error constructing message",this.loggerId,E.hs.$e.ze,{qg:e.Eg[r]})}try{this.Ng.send(this.otherGuid,f,v)||g.ErrorMonitor.ve().logError("Error message dropped",this.loggerId,E.hs.$e.Je,{qg:e.Eg[r],otherGuid:this.otherGuid})}catch(t){g.ErrorMonitor.ve().logError("Error sending message",this.loggerId,E.hs.$e.Xe,{qg:e.Eg[r],otherGuid:this.otherGuid}),this._g.log(i).warn("ERROR SENDING MESSAGE TO "+this.otherGuid+" "+t.stack)}},r.prototype.Gg=function(i){var s=this;e.ug&&this._g.log().debug(this.fe+" GOT MSG "+i.byteLength);try{var a=h.Framework.time();this.Og=a,this.Vg(i).then(function(c){if(e.ug&&s._g.log().debug(s.fe+" RECEIVING "+c.byteLength+" after "+(h.Framework.time()-a)),c.byteLength>r.jg)throw new RangeError("P2P Message too big to be processed");var l=s.Cg;if(null===l){var d=n.wrap(c),f=d.Qg();if(e.ug&&s._g.log().debug("MSG ID "+f),f>Object.keys(t).length)return s._g.log().warn("MSG OF WRONG ID RECEIVED: "+f),void(s.Cg=null);if(l=s.Cg=new u.Kg,l.msgId=f,l.swarmId=d.Yg(),l.length=d.Qg(),l.hash=d.Yg(),l.Wg=d.tc(),l.length>r.jg)throw new RangeError("P2P Message too big to be processed");e.ug&&s._g.log(l.swarmId).debug("MSG ID "+l.msgId+" L "+l.length+" SWID "+l.swarmId+" H "+l.hash+" TR "+l.Wg.byteLength)}else{if(e.ug&&s._g.log().debug("APPENDING TO P2P MESSAGE "+l.msgId),null!=l.Wg.byteLength&&l.Wg.byteLength>r.jg)throw new RangeError("P2P Message too big to be processed");l.Wg=p.rc.appendBuffer(l.Wg,i)}if(l.Wg.byteLength===l.length){var g=o.Fg.Mg.create(l.Wg);if(o.Ug(g).toString()!==l.hash){return void s._g.log(l.swarmId).warn(" INTEGRITY CHECK FAILED ")}var E=s.Pg.wg(l.swarmId);E||(E=s.Pg.Tg(l.swarmId),s._g.log(l.swarmId).debug("CREATED NEW DISPATCHER FOR "+s.otherGuid)),E&&E.As(l),l.Wg=null,s.Cg=null}})}catch(e){g.ErrorMonitor.ve().logError("Error receiving message",this.loggerId,E.hs.$e.Ze,e),this.Cg=null}},r.prototype.Vg=function(e){var t=!h.Framework.C()&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,r=a.defer();if(t){var i=new FileReader;i.onload=function(t){e=this.result,r.resolve(e)},i.onerror=r.reject,i.readAsArrayBuffer(e)}else r.resolve(e);return r.Ss},r.prototype.zg=function(){return this.Og},r}();v.Jg=i.Zg(r(170)).Xg("HiveMsgs"),v.Ag=0,v.jg=136+Math.ceil(1.2*l.hh.Fa.Da),e.Fa=v}(t.Rf||(t.Rf={}))},function(e,t,r){"use strict";var i;!function(e){function t(e){return o[e]}function r(e,r,i){var n=new a;return n.ticketUrl=e,n.code=r,n.message=t(r),n.detailedMessage=i,n}var i=function(){function e(){this.savings=0,this.cdnRequests=0,this.cdnResponses=0,this.cdnResponseErrors=0,this.cdnResponseBytes=0,this.p2pRequests=0,this.p2pResponses=0,this.p2pResponseErrors=0,this.p2pResponseBytes=0,this.partners={}}return e}();e.$g=i;var n=function(){function e(){this.uuid="",this.sentBytes=0,this.receivedBytes=0,this.successTransfers=0,this.failedTransfers=0}return e}();e.eE=n;var s=function(){function e(){}return e}();e.HiveSession=s;!function(e){e[e.tE=0]="GENERIC_ERROR",e[e.rE=1]="NO_TECH_AVAILABLE",e[e.iE=2]="NO_TECH_RESOLVED",e[e.nE=3]="TECH_ERROR",e[e.sE=4]="TICKET_ERROR"}(e.oE||(e.oE={}));var o;!function(e){e[e["aE"]=0]="Generic Undefined Error",e[e["hE"]=1]="No Tech available to resolve the ticket",e[e["cE"]=2]="No available Tech could resolved the ticket",e[e["uE"]=3]="Stopped resolving session on last tech onError",e[e["lE"]=4]="The ticket could not be resolved"}(o||(o={}));var a=function(){function e(){}return e}();e.HiveSessionError=a;var h=function(){function e(e,t){this.code=e,this.message=t}return e}();e.HiveTechError=h;!function(e){e[e.pE=0]="NOT_READY",e[e.dE=1]="PLUGIN_ERROR",e[e.fE=2]="SESSION_ERROR",e[e.sE=3]="TICKET_ERROR",e[e.gE=4]="VERSION_ERROR",e[e.EE=5]="TIMEOUT_ERROR"}(e.vE||(e.vE={}));!function(e){e[e.yE=0]="OK",e[e.TE=1]="HIVE_NOT_ALLOWED",e[e.mE=2]="TICKET_NOT_RESOLVED",e[e.IE=3]="TIMEOUT_RESOLVING_TICKET"}(e.SE||(e.SE={})),e.getHiveSessionErrorMessage=t,e.Sl=r;var c=function(){function e(e){this.RE=e}return e.prototype.getPluginStatusCode=function(){return this.RE.getStatusCode()},e}();e.wE=c}(i=t.HiveComm||(t.HiveComm={})),"undefined"!=typeof window&&(void 0===window.HiveComm&&(window.HiveComm={}),window.HiveComm.getHiveSessionErrorMessage=i.getHiveSessionErrorMessage)},function(e,t,r){"use strict";var i=r(6);!function(e){e.Eh=i.he.Eh,e._h=i.he._h;var t=function(){function e(){}return e}();t.bE="wss://bee.hivestreaming.com:443/v1/hivejs",t.CE="wss://bee-test.hivestreaming.com:443/v1/hivejs",t._E={iceServers:[{url:"stun:stun.hivestreaming.com:3478"}]},t.PE=3e4,t.Vd=3e5,t.xd=8e4,t.$d=1e3,t.AE=3e4,t.OE=100,t.NE=1e4,e.qd=t}(t.Gd||(t.Gd={}))},function(e,t){function r(e,t,r){null!=e&&("number"==typeof e?this.DE(e,t,r):null==t&&"string"!=typeof e?this.kE(e,256):this.kE(e,t))}function i(){return new r(null)}function n(e,t,r,i,n,s){for(;--s>=0;){var o=t*this[e++]+r[i]+n;n=Math.floor(o/67108864),r[i++]=67108863&o}return n}function s(e,t,r,i,n,s){for(var o=32767&t,a=t>>15;--s>=0;){var h=32767&this[e],c=this[e++]>>15,u=a*h+c*o;h=o*h+((32767&u)<<15)+r[i]+(1073741823&n),n=(h>>>30)+(u>>>15)+a*c+(n>>>30),r[i++]=1073741823&h}return n}function o(e,t,r,i,n,s){for(var o=16383&t,a=t>>14;--s>=0;){var h=16383&this[e],c=this[e++]>>14,u=a*h+c*o;h=o*h+((16383&u)<<14)+r[i]+n,n=(h>>28)+(u>>14)+a*c,r[i++]=268435455&h}return n}function a(e){return Ce.charAt(e)}function h(e,t){var r=_e[e.charCodeAt(t)];return null==r?-1:r}function c(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.T=this.T}function u(e){this.t=1,this.T=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.LE:this.t=0}function l(e){var t=i();return t.ME(e),t}function p(e,t){var i;if(16==t)i=4;else if(8==t)i=3;else if(256==t)i=8;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return void this.FE(e,t);i=2}this.t=0,this.T=0;for(var n=e.length,s=!1,o=0;--n>=0;){var a=8==i?255&e[n]:h(e,n);a<0?"-"==e.charAt(n)&&(s=!0):(s=!1,0==o?this[this.t++]=a:o+i>this.UE?(this[this.t-1]|=(a&(1<<this.UE-o)-1)<<o,this[this.t++]=a>>this.UE-o):this[this.t-1]|=a<<o,(o+=i)>=this.UE&&(o-=this.UE))}8==i&&0!=(128&e[0])&&(this.T=-1,o>0&&(this[this.t-1]|=(1<<this.UE-o)-1<<o)),this.BE(),s&&r.ZERO.HE(this,this)}function d(){for(var e=this.T&this.xE;this.t>0&&this[this.t-1]==e;)--this.t}function f(e){if(this.T<0)return"-"+this.qE().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.GE(e);t=2}var r,i=(1<<t)-1,n=!1,s="",o=this.t,h=this.UE-o*this.UE%t;if(o-- >0)for(h<this.UE&&(r=this[o]>>h)>0&&(n=!0,s=a(r));o>=0;)h<t?(r=(this[o]&(1<<h)-1)<<t-h,r|=this[--o]>>(h+=this.UE-t)):(r=this[o]>>(h-=t)&i,h<=0&&(h+=this.UE,--o)),r>0&&(n=!0),n&&(s+=a(r));return n?s:"0"}function g(){var e=i();return r.ZERO.HE(this,e),e}function E(){return this.T<0?this.qE():this}function v(e){var t=this.T-e.T;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.T<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0}function y(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function T(){return this.t<=0?0:this.UE*(this.t-1)+y(this[this.t-1]^this.T&this.xE)}function m(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.T=this.T}function I(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.T=this.T}function S(e,t){var r,i=e%this.UE,n=this.UE-i,s=(1<<n)-1,o=Math.floor(e/this.UE),a=this.T<<i&this.xE;for(r=this.t-1;r>=0;--r)t[r+o+1]=this[r]>>n|a,a=(this[r]&s)<<i;for(r=o-1;r>=0;--r)t[r]=0;t[o]=a,t.t=this.t+o+1,t.T=this.T,t.BE()}function R(e,t){t.T=this.T;var r=Math.floor(e/this.UE);if(r>=this.t)return void(t.t=0);var i=e%this.UE,n=this.UE-i,s=(1<<i)-1;t[0]=this[r]>>i;for(var o=r+1;o<this.t;++o)t[o-r-1]|=(this[o]&s)<<n,t[o-r]=this[o]>>i;i>0&&(t[this.t-r-1]|=(this.T&s)<<n),t.t=this.t-r,t.BE()}function w(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]-e[r],t[r++]=i&this.xE,i>>=this.UE;if(e.t<this.t){for(i-=e.T;r<this.t;)i+=this[r],t[r++]=i&this.xE,i>>=this.UE;i+=this.T}else{for(i+=this.T;r<e.t;)i-=e[r],t[r++]=i&this.xE,i>>=this.UE;i-=e.T}t.T=i<0?-1:0,i<-1?t[r++]=this.LE+i:i>0&&(t[r++]=i),t.t=r,t.BE()}function b(e,t){var i=this.abs(),n=e.abs(),s=i.t;for(t.t=s+n.t;--s>=0;)t[s]=0;for(s=0;s<n.t;++s)t[s+i.t]=i.VE(0,n[s],t,s,0,i.t);t.T=0,t.BE(),this.T!=e.T&&r.ZERO.HE(t,t)}function C(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.VE(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.VE(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.LE&&(e[r+t.t]-=t.LE,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.VE(r,t[r],e,2*r,0,1)),e.T=0,e.BE()}function _(e,t,n){var s=e.abs();if(!(s.t<=0)){var o=this.abs();if(o.t<s.t)return null!=t&&t.ME(0),void(null!=n&&this.jE(n));null==n&&(n=i());var a=i(),h=this.T,c=e.T,u=this.UE-y(s[s.t-1]);u>0?(s.QE(u,a),o.QE(u,n)):(s.jE(a),o.jE(n));var l=a.t,p=a[l-1];if(0!=p){var d=p*(1<<this.KE)+(l>1?a[l-2]>>this.YE:0),f=this.WE/d,g=(1<<this.KE)/d,E=1<<this.YE,v=n.t,T=v-l,m=null==t?i():t;for(a.zE(T,m),n.JE(m)>=0&&(n[n.t++]=1,n.HE(m,n)),r.ONE.zE(l,m),m.HE(a,a);a.t<l;)a[a.t++]=0;for(;--T>=0;){var I=n[--v]==p?this.xE:Math.floor(n[v]*f+(n[v-1]+E)*g);if((n[v]+=a.VE(0,I,n,T,0,l))<I)for(a.zE(T,m),n.HE(m,n);n[v]<--I;)n.HE(m,n)}null!=t&&(n.XE(l,t),h!=c&&r.ZERO.HE(t,t)),n.t=l,n.BE(),u>0&&n.ZE(u,n),h<0&&r.ZERO.HE(n,n)}}}function P(e){var t=i();return this.abs().$E(e,null,t),this.T<0&&t.JE(r.ZERO)>0&&e.HE(t,t),t}function A(e){this.h=e}function O(e){return e.T<0||e.JE(this.h)>=0?e.ev(this.h):e}function N(e){return e}function D(e){e.$E(this.h,null,e)}function k(e,t,r){e.tv(t,r),this.reduce(r)}function L(e,t){e.rv(t),this.reduce(t)}function M(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.LE)%this.LE,t>0?this.LE-t:-t}function F(e){this.h=e,this.nv=e.sv(),this.ov=32767&this.nv,this.av=this.nv>>15,this.hv=(1<<e.UE-15)-1,this.cv=2*e.t}function U(e){var t=i();return e.abs().zE(this.h.t,t),t.$E(this.h,null,t),e.T<0&&t.JE(r.ZERO)>0&&this.h.HE(t,t),t}function B(e){var t=i();return e.jE(t),this.reduce(t),t}function H(e){for(;e.t<=this.cv;)e[e.t++]=0;for(var t=0;t<this.h.t;++t){var r=32767&e[t],i=r*this.ov+((r*this.av+(e[t]>>15)*this.ov&this.hv)<<15)&e.xE;for(r=t+this.h.t,e[r]+=this.h.VE(0,i,e,t,0,this.h.t);e[r]>=e.LE;)e[r]-=e.LE,e[++r]++}e.BE(),e.XE(this.h.t,e),e.JE(this.h)>=0&&e.HE(this.h,e)}function x(e,t){e.rv(t),this.reduce(t)}function q(e,t,r){e.tv(t,r),this.reduce(r)}function G(){return 0==(this.t>0?1&this[0]:this.T)}function V(e,t){if(e>4294967295||e<1)return r.ONE;var n=i(),s=i(),o=t.uv(this),a=y(e)-1;for(o.jE(n);--a>=0;)if(t.lv(n,s),(e&1<<a)>0)t.pv(s,o,n);else{var h=n;n=s,s=h}return t.dv(n)}function j(e,t){var r;return r=e<256||t.fv()?new A(t):new F(t),this.exp(e,r)}function Q(e){var t,r,i,n="",s=0;for(t=0;t<e.length&&e.charAt(t)!=Ae;++t)(i=Pe.indexOf(e.charAt(t)))<0||(0==s?(n+=a(i>>2),r=3&i,s=1):1==s?(n+=a(r<<2|i>>4),r=15&i,s=2):2==s?(n+=a(r),n+=a(i>>2),r=3&i,s=3):(n+=a(r<<2|i>>4),n+=a(15&i),s=0));return 1==s&&(n+=a(r<<2)),n}function K(e){var t,r=Q(e),i=new Array;for(t=0;2*t<r.length;++t)i[t]=parseInt(r.substring(2*t,2*t+2),16);return i}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function Y(e,t){return new r(e,t)}function W(e,t){if(t<e.length+11)return alert("Message too long for RSA"),null;for(var i=new Array,n=e.length-1;n>=0&&t>0;){var s=e.charCodeAt(n--);s<128?i[--t]=s:s>127&&s<2048?(i[--t]=63&s|128,i[--t]=s>>6|192):(i[--t]=63&s|128,i[--t]=s>>6&63|128,i[--t]=s>>12|224)}i[--t]=0;for(var o=new SecureRandom,a=new Array;t>2;){for(a[0]=0;0==a[0];)o.gv(a);i[--t]=a[0]}return i[--t]=2,i[--t]=0,new r(i)}function z(e,t,r){for(var i="",n=0;i.length<t;)i+=r(String.fromCharCode.apply(String,e.concat([(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n]))),n+=1;return i}function J(e,t,i){if(e.length+2*Oe+2>t)throw"Message too long for RSA";var n,s="";for(n=0;n<t-e.length-2*Oe-2;n+=1)s+="\0";var o=rstr_sha1("")+s+""+e,a=new Array(Oe);(new SecureRandom).gv(a);var h=z(a,o.length,i||rstr_sha1),c=[];for(n=0;n<o.length;n+=1)c[n]=o.charCodeAt(n)^h.charCodeAt(n);var u=z(c,a.length,rstr_sha1),l=[0];for(n=0;n<a.length;n+=1)l[n+1]=a[n]^u.charCodeAt(n);return new r(l.concat(c))}function X(){this.n=null,this.e=0,this.d=null,this.v=null,this.Ev=null,this.vv=null,this.yv=null,this.Tv=null}function Z(e,t){this.mv=!0,"string"!=typeof e?(this.n=e,this.e=t):null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Y(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function $(e){return e.Iv(this.e,this.n)}function ee(e){var t=W(e,this.n.Sv()+7>>3);if(null==t)return null;var r=this.Rv(t);if(null==r)return null;var i=r.toString(16);return 0==(1&i.length)?i:"0"+i}function te(e,t){var r=J(e,this.n.Sv()+7>>3,t);if(null==r)return null;var i=this.Rv(r);if(null==i)return null;var n=i.toString(16);return 0==(1&n.length)?n:"0"+n}function re(e,t){for(var r="",i=t/4-e.length,n=0;n<i;n++)r+="0";return r+e}function ie(e,t){var r=function(e){return KJUR.crypto.bv.wv(e,t)}(e);return this.Cv(r,t)}function ne(e,t){var r=KJUR.crypto.bv._v(e,t,this.n.Sv()),i=Y(r,16);return re(this.Pv(i).toString(16),this.n.Sv())}function se(e){return ie.call(this,e,"sha1")}function oe(e){return ie.call(this,e,"sha256")}function ae(e,t,r){for(var i="",n=0;i.length<t;)i+=hextorstr(r(rstrtohex(e+String.fromCharCode.apply(String,[(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n])))),n+=1;return i}function he(e,t,r){var i=function(e){return KJUR.crypto.bv.Av(e,t)}(rstrtohex(e));return void 0===r&&(r=-1),this.Ov(i,t,r)}function ce(e,t,i){var n,s=hextorstr(e),o=s.length,a=this.n.Sv()-1,h=Math.ceil(a/8),c=function(e){return KJUR.crypto.bv.Av(e,t)};if(-1===i||void 0===i)i=o;else if(-2===i)i=h-o-2;else if(i<-2)throw"invalid salt length";if(h<o+i+2)throw"data too long";var u="";i>0&&(u=new Array(i),(new SecureRandom).gv(u),u=String.fromCharCode.apply(String,u));var l=hextorstr(c(rstrtohex("\0\0\0\0\0\0\0\0"+s+u))),p=[];for(n=0;n<h-i-o-2;n+=1)p[n]=0;var d=String.fromCharCode.apply(String,p)+""+u,f=ae(l,d.length,c),g=[];for(n=0;n<d.length;n+=1)g[n]=d.charCodeAt(n)^f.charCodeAt(n);var E=65280>>8*h-a&255;for(g[0]&=~E,n=0;n<o;n++)g.push(l.charCodeAt(n));return g.push(188),re(this.Pv(new r(g)).toString(16),this.n.Sv())}function ue(e,t,r){var i=new X;return i.Nv(t,r),i.Rv(e)}function le(e,t,r){return ue(e,t,r).toString(16).replace(/^1f+00/,"")}function pe(e){for(var t in KJUR.crypto.bv.Dv){var r=KJUR.crypto.bv.Dv[t],i=r.length;if(e.substring(0,i)==r){return[t,e.substring(i)]}}return[]}function de(e,t,r,i){var n=le(t,r,i),s=pe(n);if(0==s.length)return!1;var o=s[0],a=s[1];return a==function(e){return KJUR.crypto.bv.wv(e,o)}(e)}function fe(e,t){return de(t,Y(e,16),this.n.toString(16),this.e.toString(16))}function ge(e,t){t=t.replace(Ne,""),t=t.replace(/[ \n]+/g,"");var r=Y(t,16);if(r.Sv()>this.n.Sv())return 0;var i=this.Rv(r),n=i.toString(16).replace(/^1f+00/,""),s=pe(n);if(0==s.length)return!1;var o=s[0],a=s[1];return a==function(e){return KJUR.crypto.bv.wv(e,o)}(e)}function Ee(e,t){t=t.replace(Ne,""),t=t.replace(/[ \n]+/g,"");var r=Y(t,16);if(r.Sv()>this.n.Sv())return 0;var i=this.Rv(r),n=i.toString(16).replace(/^1f+00/,""),s=pe(n);if(0==s.length)return!1;s[0];return s[1]==e}function ve(e,t,r,i){var n=function(e){return KJUR.crypto.bv.Av(e,r)}(rstrtohex(e));return void 0===i&&(i=-1),this.kv(n,t,r,i)}function ye(e,t,i,n){var s=new r(t,16);if(s.Sv()>this.n.Sv())return!1;var o,a=function(e){return KJUR.crypto.bv.Av(e,i)},h=hextorstr(e),c=h.length,u=this.n.Sv()-1,l=Math.ceil(u/8);if(-1===n||void 0===n)n=c;else if(-2===n)n=l-c-2;else if(n<-2)throw"invalid salt length";if(l<c+n+2)throw"data too long";var p=this.Rv(s).Lv();for(o=0;o<p.length;o+=1)p[o]&=255;for(;p.length<l;)p.unshift(0);if(188!==p[l-1])throw"encoded message does not end in 0xbc";p=String.fromCharCode.apply(String,p);var d=p.substr(0,l-c-1),f=p.substr(d.length,c),g=65280>>8*l-u&255;if(0!=(d.charCodeAt(0)&g))throw"bits beyond keysize not zero";var E=ae(f,d.length,a),v=[];for(o=0;o<d.length;o+=1)v[o]=d.charCodeAt(o)^E.charCodeAt(o);v[0]&=~g;var y=l-c-n-2;for(o=0;o<y;o+=1)if(0!==v[o])throw"leftmost octets not zero";if(1!==v[y])throw"0x01 marker not found";return f===hextorstr(a(rstrtohex("\0\0\0\0\0\0\0\0"+h+String.fromCharCode.apply(String,v.slice(-n)))))}var Te={};Te.userAgent=!1;var me={};if(void 0===Ie||!Ie)var Ie={};Ie.Mv=function(){var e,t,r,i=arguments,n=null;for(e=0;e<i.length;e+=1)for(r=(""+i[e]).split("."),n=Ie,t="YAHOO"==r[0]?1:0;t<r.length;t+=1)n[r[t]]=n[r[t]]||{},n=n[r[t]];return n},Ie.log=function(e,t,r){var i=Ie.Uv.Fv;return!(!i||!i.log)&&i.log(e,t,r)},Ie.register=function(e,t,r){var i,n,s,o,a,h=Ie.Ms.Bv;for(h[e]||(h[e]={Hv:[],xv:[]}),i=h[e],n=r.version,s=r.Xg,o=Ie.Ms.vl,i.name=e,i.version=n,i.Xg=s,i.Hv.push(n),i.xv.push(s),i.qv=t,a=0;a<o.length;a+=1)o[a](i);t?(t.VERSION=n,t.Gv=s):Ie.log("mainClass is undefined for module "+e,"warn")},Ie.Ms=Ie.Ms||{Bv:[],vl:[]},Ie.Ms.getVersion=function(e){return Ie.Ms.Bv[e]||null},Ie.Ms.Vv=function(e){var t,r=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 1==t++?"":"."}))},i=Te,n={jv:0,opera:0,Qv:0,Kv:0,chrome:0,Yv:null,Wv:0,zv:0,Jv:0,Xv:0,Zv:null,$v:0,ey:0,ty:i&&i.iy,ny:!1,os:null},s=e||Te&&Te.userAgent,o=me&&me.location,a=o&&o.href;return n.ny=a&&0===a.toLowerCase().indexOf("https"),s&&(/windows|win32/i.test(s)?n.os="windows":/macintosh/i.test(s)?n.os="macintosh":/rhino/i.test(s)&&(n.os="rhino"),/KHTML/.test(s)&&(n.Kv=1),t=s.match(/AppleWebKit\/([^\s]*)/),t&&t[1]&&(n.Kv=r(t[1]),/ Mobile\//.test(s)?(n.Yv="Apple",t=s.match(/OS ([^\s]*)/),t&&t[1]&&(t=r(t[1].replace("_","."))),n.Zv=t,n.zv=n.Xv=n.Jv=0,(t=s.match(/iPad|iPod|iPhone/))&&t[0]&&(n[t[0].toLowerCase()]=n.Zv)):(t=s.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),t&&(n.Yv=t[0]),/webOS/.test(s)&&(n.Yv="WebOS",(t=s.match(/webOS\/([^\s]*);/))&&t[1]&&(n.ey=r(t[1]))),/ Android/.test(s)&&(n.Yv="Android",(t=s.match(/Android ([^\s]*);/))&&t[1]&&(n.$v=r(t[1])))),t=s.match(/Chrome\/([^\s]*)/),t&&t[1]?n.chrome=r(t[1]):(t=s.match(/AdobeAIR\/([^\s]*)/))&&(n.Wv=t[0])),n.Kv||(t=s.match(/Opera[\s\/]([^\s]*)/),t&&t[1]?(n.opera=r(t[1]),t=s.match(/Version\/([^\s]*)/),t&&t[1]&&(n.opera=r(t[1])),(t=s.match(/Opera Mini[^;]*/))&&(n.Yv=t[0])):(t=s.match(/MSIE\s([^;]*)/),t&&t[1]?n.jv=r(t[1]):(t=s.match(/Gecko\/([^\s]*)/))&&(n.Qv=1,(t=s.match(/rv:([^\s\)]*)/))&&t[1]&&(n.Qv=r(t[1])))))),n},Ie.Ms.sy=Ie.Ms.Vv(),function(){if(Ie.Mv("util","widget","example"),"undefined"!=typeof YAHOO_config){var e,t=YAHOO_config.listener,r=Ie.Ms.vl,i=!0;if(t){for(e=0;e<r.length;e++)if(r[e]==t){i=!1;break}i&&r.push(t)}}}(),Ie.lang=Ie.lang||{},function(){var e=Ie.lang,t=Object.prototype,r=[],i={oy:"&amp;",ay:"&lt;",hy:"&gt;",uy:"&quot;",ly:"&#x27;",py:"&#x2F;",gy:"&#x60;"},n=["toString","valueOf"],s={isArray:function(e){return"[object Array]"===t.toString.apply(e)},Ey:function(e){return"boolean"==typeof e},vy:function(e){return"function"==typeof e||"[object Function]"===t.toString.apply(e)},yy:function(e){return null===e},Ty:function(e){return"number"==typeof e&&isFinite(e)},au:function(t){return t&&("object"==typeof t||e.vy(t))||!1},my:function(e){return"string"==typeof e},Iy:function(e){return void 0===e},Sy:Ie.Ms.sy.jv?function(r,i){var s,o,a;for(s=0;s<n.length;s+=1)o=n[s],a=i[o],e.vy(a)&&a!=t[o]&&(r[o]=a)}:function(){},Ry:function(e){return e.replace(/[&<>"'\/`]/g,function(e){return i[e]})},extend:function(r,i,n){if(!i||!r)throw new Error("extend failed, please check that all dependencies are included.");var s,o=function(){};if(o.prototype=i.prototype,r.prototype=new o,r.prototype.constructor=r,r.wy=i.prototype,i.prototype.constructor==t.constructor&&(i.prototype.constructor=i),n){for(s in n)e.hasOwnProperty(n,s)&&(r.prototype[s]=n[s]);e.Sy(r.prototype,n)}},by:function(t,r){if(!r||!t)throw new Error("Absorb failed, verify dependencies.");var i,n,s=arguments,o=s[2];if(o&&!0!==o)for(i=2;i<s.length;i+=1)t[s[i]]=r[s[i]];else{for(n in r)!o&&n in t||(t[n]=r[n]);e.Sy(t,r)}return t},Cy:function(t,r){if(!r||!t)throw new Error("Augment failed, verify dependencies.");var i,n=[t.prototype,r.prototype];for(i=2;i<arguments.length;i+=1)n.push(arguments[i]);return e.by.apply(this,n),t},dump:function(t,r){var i,n,s=[],o="{...}";if(!e.au(t))return t+"";if(t instanceof Date||"nodeType"in t&&"tagName"in t)return t;if(e.vy(t))return"f(){...}";if(r=e.Ty(r)?r:3,e.isArray(t)){for(s.push("["),i=0,n=t.length;i<n;i+=1)e.au(t[i])?s.push(r>0?e.dump(t[i],r-1):o):s.push(t[i]),s.push(", ");s.length>1&&s.pop(),s.push("]")}else{s.push("{");for(i in t)e.hasOwnProperty(t,i)&&(s.push(i+" => "),e.au(t[i])?s.push(r>0?e.dump(t[i],r-1):o):s.push(t[i]),s.push(", "));s.length>1&&s.pop(),s.push("}")}return s.join("")},_y:function(t,r,i,n){for(var s,o,a,h,c,u,l,p,d,f=[],g=t.length;!((s=t.lastIndexOf("{",g))<0)&&(o=t.indexOf("}",s),!(s+1>o));)l=t.substring(s+1,o),h=l,u=null,a=h.indexOf(" "),a>-1&&(u=h.substring(a+1),h=h.substring(0,a)),c=r[h],i&&(c=i(h,c,u)),e.au(c)?e.isArray(c)?c=e.dump(c,parseInt(u,10)):(u=u||"",p=u.indexOf("dump"),p>-1&&(u=u.substring(4)),d=c.toString(),c="[object Object]"===d||p>-1?e.dump(c,parseInt(u,10)):d):e.my(c)||e.Ty(c)||(c="~-"+f.length+"-~",f[f.length]=l),t=t.substring(0,s)+c+t.substring(o+1),!1===n&&(g=s-1);for(s=f.length-1;s>=0;s-=1)t=t.replace(new RegExp("~-"+s+"-~"),"{"+f[s]+"}","g");return t},trim:function(e){try{return e.replace(/^\s+|\s+$/g,"")}catch(t){return e}},Py:function(){var t,r={},i=arguments,n=i.length;for(t=0;t<n;t+=1)e.by(r,i[t],!0);return r},Ay:function(t,i,n,s,o){t=t||0,i=i||{};var a,h,c=n,u=s;if(e.my(n)&&(c=i[n]),!c)throw new TypeError("method undefined");return e.Iy(s)||e.isArray(u)||(u=[s]),a=function(){c.apply(i,u||r)},h=o?setInterval(a,t):setTimeout(a,t),{interval:o,cancel:function(){this.interval?clearInterval(h):clearTimeout(h)}}},Oy:function(t){return e.au(t)||e.my(t)||e.Ty(t)||e.Ey(t)}};e.hasOwnProperty=t.hasOwnProperty?function(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}:function(t,r){return!e.Iy(t[r])&&t.constructor.prototype[r]!==t[r]},s.by(e,s,!0),Ie.util.Lang=e,e.Ny=e.Cy,Ie.Ny=e.Cy,Ie.extend=e.extend}(),Ie.register("yahoo",Ie,{version:"2.9.0",Xg:"2800"});/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */
var Se=Se||function(e,t){var r={},i=r.Fg={},n=i.Dy=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.ky(t),r.hasOwnProperty("init")||(r.init=function(){r.Ly.init.apply(this,arguments)}),r.init.prototype=r,r.Ly=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},ky:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=i.Mg=n.extend({init:function(e,t){e=this.My=e||[],this.Fy=void 0!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.My,r=e.My,i=this.Fy,n=e.Fy;if(this.BE(),i%4)for(var s=0;s<n;s++){var o=r[s>>>2]>>>24-s%4*8&255;t[i+s>>>2]|=o<<24-(i+s)%4*8}else for(var s=0;s<n;s+=4)t[i+s>>>2]=r[s>>>2];return this.Fy+=n,this},BE:function(){var t=this.My,r=this.Fy;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=n.clone.call(this);return e.My=this.My.slice(0),e},random:function(t){for(var r=[],i=0;i<t;i+=4)r.push(4294967296*e.random()|0);return new s.init(r,t)}}),o=r.Uy={},a=o.By={stringify:function(e){for(var t=e.My,r=e.Fy,i=[],n=0;n<r;n++){var s=t[n>>>2]>>>24-n%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(r,t/2)}},h=o.Hy={stringify:function(e){for(var t=e.My,r=e.Fy,i=[],n=0;n<r;n++){var s=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(r,t)}},c=o.xy={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},u=i.qy=n.extend({reset:function(){this.Gy=new s.init,this.Vy=0},jy:function(e){"string"==typeof e&&(e=c.parse(e)),this.Gy.concat(e),this.Vy+=e.Fy},Qy:function(t){var r=this.Gy,i=r.My,n=r.Fy,o=this.Ky,a=4*o,h=n/a;h=t?e.ceil(h):e.max((0|h)-this.Yy,0);var c=h*o,u=e.min(4*c,n);if(c){for(var l=0;l<c;l+=o)this.Wy(i,l);var p=i.splice(0,c);r.Fy-=u}return new s.init(p,u)},clone:function(){var e=n.clone.call(this);return e.Gy=this.Gy.clone(),e},Yy:0}),l=(i.zy=u.extend({Jy:n.extend(),init:function(e){this.Jy=this.Jy.extend(e),this.reset()},reset:function(){u.reset.call(this),this.Xy()},update:function(e){return this.jy(e),this.Qy(),this},Zy:function(e){return e&&this.jy(e),this.$y()},Ky:16,eT:function(e){return function(t,r){return new e.init(r).Zy(t)}},tT:function(e){return function(t,r){return new l.rT.init(e,r).Zy(t)}}}),r.iT={});return r}(Math);!function(e){function t(e,t,r,i,n,s,o){return((e=e+(t&r|~t&i)+n+o)<<s|e>>>32-s)+t}function r(e,t,r,i,n,s,o){return((e=e+(t&i|r&~i)+n+o)<<s|e>>>32-s)+t}function i(e,t,r,i,n,s,o){return((e=e+(t^r^i)+n+o)<<s|e>>>32-s)+t}function n(e,t,r,i,n,s,o){return((e=e+(r^(t|~i))+n+o)<<s|e>>>32-s)+t}for(var s=Se,o=s.Fg,a=o.Mg,h=o.zy,o=s.iT,c=[],u=0;64>u;u++)c[u]=4294967296*e.abs(e.sin(u+1))|0;o=o.Ug=h.extend({Xy:function(){this.nT=new a.init([1732584193,4023233417,2562383102,271733878])},Wy:function(e,s){for(var o=0;16>o;o++){var a=s+o,h=e[a];e[a]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var o=this.nT.My,a=e[s+0],h=e[s+1],u=e[s+2],l=e[s+3],p=e[s+4],d=e[s+5],f=e[s+6],g=e[s+7],E=e[s+8],v=e[s+9],y=e[s+10],T=e[s+11],m=e[s+12],I=e[s+13],S=e[s+14],R=e[s+15],w=o[0],b=o[1],C=o[2],_=o[3],w=t(w,b,C,_,a,7,c[0]),_=t(_,w,b,C,h,12,c[1]),C=t(C,_,w,b,u,17,c[2]),b=t(b,C,_,w,l,22,c[3]),w=t(w,b,C,_,p,7,c[4]),_=t(_,w,b,C,d,12,c[5]),C=t(C,_,w,b,f,17,c[6]),b=t(b,C,_,w,g,22,c[7]),w=t(w,b,C,_,E,7,c[8]),_=t(_,w,b,C,v,12,c[9]),C=t(C,_,w,b,y,17,c[10]),b=t(b,C,_,w,T,22,c[11]),w=t(w,b,C,_,m,7,c[12]),_=t(_,w,b,C,I,12,c[13]),C=t(C,_,w,b,S,17,c[14]),b=t(b,C,_,w,R,22,c[15]),w=r(w,b,C,_,h,5,c[16]),_=r(_,w,b,C,f,9,c[17]),C=r(C,_,w,b,T,14,c[18]),b=r(b,C,_,w,a,20,c[19]),w=r(w,b,C,_,d,5,c[20]),_=r(_,w,b,C,y,9,c[21]),C=r(C,_,w,b,R,14,c[22]),b=r(b,C,_,w,p,20,c[23]),w=r(w,b,C,_,v,5,c[24]),_=r(_,w,b,C,S,9,c[25]),C=r(C,_,w,b,l,14,c[26]),b=r(b,C,_,w,E,20,c[27]),w=r(w,b,C,_,I,5,c[28]),_=r(_,w,b,C,u,9,c[29]),C=r(C,_,w,b,g,14,c[30]),b=r(b,C,_,w,m,20,c[31]),w=i(w,b,C,_,d,4,c[32]),_=i(_,w,b,C,E,11,c[33]),C=i(C,_,w,b,T,16,c[34]),b=i(b,C,_,w,S,23,c[35]),w=i(w,b,C,_,h,4,c[36]),_=i(_,w,b,C,p,11,c[37]),C=i(C,_,w,b,g,16,c[38]),b=i(b,C,_,w,y,23,c[39]),w=i(w,b,C,_,I,4,c[40]),_=i(_,w,b,C,a,11,c[41]),C=i(C,_,w,b,l,16,c[42]),b=i(b,C,_,w,f,23,c[43]),w=i(w,b,C,_,v,4,c[44]),_=i(_,w,b,C,m,11,c[45]),C=i(C,_,w,b,R,16,c[46]),b=i(b,C,_,w,u,23,c[47]),w=n(w,b,C,_,a,6,c[48]),_=n(_,w,b,C,g,10,c[49]),C=n(C,_,w,b,S,15,c[50]),b=n(b,C,_,w,d,21,c[51]),w=n(w,b,C,_,m,6,c[52]),_=n(_,w,b,C,l,10,c[53]),C=n(C,_,w,b,y,15,c[54]),b=n(b,C,_,w,h,21,c[55]),w=n(w,b,C,_,E,6,c[56]),_=n(_,w,b,C,R,10,c[57]),C=n(C,_,w,b,f,15,c[58]),b=n(b,C,_,w,I,21,c[59]),w=n(w,b,C,_,p,6,c[60]),_=n(_,w,b,C,T,10,c[61]),C=n(C,_,w,b,u,15,c[62]),b=n(b,C,_,w,v,21,c[63]);o[0]=o[0]+w|0,o[1]=o[1]+b|0,o[2]=o[2]+C|0,o[3]=o[3]+_|0},$y:function(){var t=this.Gy,r=t.My,i=8*this.Vy,n=8*t.Fy;r[n>>>5]|=128<<24-n%32;var s=e.floor(i/4294967296);for(r[15+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.Fy=4*(r.length+1),this.Qy(),t=this.nT,r=t.My,i=0;4>i;i++)n=r[i],r[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var e=h.clone.call(this);return e.nT=this.nT.clone(),e}}),s.Ug=h.eT(o),s.sT=h.tT(o)}(Math),function(){var e=Se,t=e.Fg,r=t.Mg,i=t.zy,n=[],t=e.iT.oT=i.extend({Xy:function(){this.nT=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},Wy:function(e,t){for(var r=this.nT.My,i=r[0],s=r[1],o=r[2],a=r[3],h=r[4],c=0;80>c;c++){if(16>c)n[c]=0|e[t+c];else{var u=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=u<<1|u>>>31}u=(i<<5|i>>>27)+h+n[c],u=20>c?u+(1518500249+(s&o|~s&a)):40>c?u+(1859775393+(s^o^a)):60>c?u+((s&o|s&a|o&a)-1894007588):u+((s^o^a)-899497514),h=a,a=o,o=s<<30|s>>>2,s=i,i=u}r[0]=r[0]+i|0,r[1]=r[1]+s|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+h|0},$y:function(){var e=this.Gy,t=e.My,r=8*this.Vy,i=8*e.Fy;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(i+64>>>9<<4)]=r,e.Fy=4*t.length,this.Qy(),this.nT},clone:function(){var e=i.clone.call(this);return e.nT=this.nT.clone(),e}});e.oT=i.eT(t),e.aT=i.tT(t)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */
var Re;"Microsoft Internet Explorer"==Te.appName?(r.prototype.VE=s,Re=30):"Netscape"!=Te.appName?(r.prototype.VE=n,Re=26):(r.prototype.VE=o,Re=28),r.prototype.UE=Re,r.prototype.xE=(1<<Re)-1,r.prototype.LE=1<<Re;r.prototype.WE=Math.pow(2,52),r.prototype.KE=52-Re,r.prototype.YE=2*Re-52;var we,be,Ce="0123456789abcdefghijklmnopqrstuvwxyz",_e=new Array;for(we="0".charCodeAt(0),be=0;be<=9;++be)_e[we++]=be;for(we="a".charCodeAt(0),be=10;be<36;++be)_e[we++]=be;for(we="A".charCodeAt(0),be=10;be<36;++be)_e[we++]=be;A.prototype.uv=O,A.prototype.dv=N,A.prototype.reduce=D,A.prototype.pv=k,A.prototype.lv=L,F.prototype.uv=U,F.prototype.dv=B,F.prototype.reduce=H,F.prototype.pv=q,F.prototype.lv=x,r.prototype.jE=c,r.prototype.ME=u,r.prototype.kE=p,r.prototype.BE=d,r.prototype.zE=m,r.prototype.XE=I,r.prototype.QE=S,r.prototype.ZE=R,r.prototype.HE=w,r.prototype.tv=b,r.prototype.rv=C,r.prototype.$E=_,r.prototype.sv=M,r.prototype.fv=G,r.prototype.exp=V,r.prototype.toString=f,r.prototype.qE=g,r.prototype.abs=E,r.prototype.JE=v,r.prototype.Sv=T,r.prototype.ev=P,r.prototype.Iv=j,r.ZERO=l(0),r.ONE=l(1),/*! asn1-1.0.9.js (c) 2013-2015 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
"undefined"!=typeof KJUR&&KJUR||(KJUR={}),void 0!==KJUR.hT&&KJUR.hT||(KJUR.hT={}),KJUR.hT.cT=new function(){this.uT=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.lT=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var i=t.substr(1),n=i.length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var s="",o=0;o<n;o++)s+="f";t=new r(s,16).pT(e).add(r.ONE).toString(16).replace(/^-/,"")}return t},this.dT=function(e,t){var r=(KJUR.hT,Se.Uy.By.parse(e)),i=Se.Uy.fT.stringify(r),n=i.replace(/(.{64})/g,"$1\r\n");return n=n.replace(/\r\n$/,""),"-----BEGIN "+t+"-----\r\n"+n+"\r\n-----END "+t+"-----\r\n"},this.gT=function(e){var t=KJUR.hT,r=Object.keys(e);if(1!=r.length)throw"key of param shall be only one.";var i=r[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+i+":"))throw"undefined key: "+i;if("bool"==i)return new t.ET(e[i]);if("int"==i)return new t.vT(e[i]);if("bitstr"==i)return new t.yT(e[i]);if("octstr"==i)return new t.TT(e[i]);if("null"==i)return new t.mT(e[i]);if("oid"==i)return new t.IT(e[i]);if("enum"==i)return new t.ST(e[i]);if("utf8str"==i)return new t.RT(e[i]);if("numstr"==i)return new t.wT(e[i]);if("prnstr"==i)return new t.bT(e[i]);if("telstr"==i)return new t.CT(e[i]);if("ia5str"==i)return new t._T(e[i]);if("utctime"==i)return new t.PT(e[i]);if("gentime"==i)return new t.AT(e[i]);if("seq"==i){for(var n=e[i],s=[],o=0;o<n.length;o++){var a=t.cT.gT(n[o]);s.push(a)}return new t.OT({NT:s})}if("set"==i){for(var n=e[i],s=[],o=0;o<n.length;o++){var a=t.cT.gT(n[o]);s.push(a)}return new t.DT({NT:s})}if("tag"==i){var h=e[i];if("[object Array]"===Object.prototype.toString.call(h)&&3==h.length){var c=t.cT.gT(h[2]);return new t.kT({tag:h[0],LT:h[1],MT:c})}var u={};if(void 0!==h.LT&&(u.LT=h.LT),void 0!==h.tag&&(u.tag=h.tag),void 0===h.MT)throw"obj shall be specified for 'tag'.";return u.MT=t.cT.gT(h.MT),new t.kT(u)}},this.FT=function(e){return this.gT(e).UT()}},KJUR.hT.cT.BT=function(e){for(var t="",i=parseInt(e.substr(0,2),16),n=Math.floor(i/40),s=i%40,t=n+"."+s,o="",a=2;a<e.length;a+=2){var h=parseInt(e.substr(a,2),16),c=("00000000"+h.toString(2)).slice(-8);if(o+=c.substr(1,7),"0"==c.substr(0,1)){t=t+"."+new r(o,2).toString(10),o=""}}return t},KJUR.hT.cT.HT=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var i="",n=e.split("."),s=40*parseInt(n[0])+parseInt(n[1]);i+=t(s),n.splice(0,2);for(var o=0;o<n.length;o++)i+=function(e){var i="",n=new r(e,10),s=n.toString(2),o=7-s.length%7;7==o&&(o=0);for(var a="",h=0;h<o;h++)a+="0";s=a+s;for(var h=0;h<s.length-1;h+=7){var c=s.substr(h,7);h!=s.length-7&&(c="1"+c),i+=t(parseInt(c,2))}return i}(n[o]);return i},KJUR.hT.xT=function(){this.qT=function(){if(void 0===this.GT||null==this.GT)throw"this.hV is null or undefined.";if(this.GT.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.GT;var e=this.GT.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.UT=function(){return(null==this.VT||this.jT)&&(this.GT=this.QT(),this.KT=this.qT(),this.VT=this.YT+this.KT+this.GT,this.jT=!1),this.VT},this.WT=function(){return this.UT(),this.GT},this.QT=function(){return""}},KJUR.hT.zT=function(e){KJUR.hT.zT.wy.constructor.call(this);this.JT=function(){return this.T},this.XT=function(e){this.VT=null,this.jT=!0,this.T=e,this.GT=stohex(this.T)},this.ZT=function(e){this.VT=null,this.jT=!0,this.T=null,this.GT=e},this.QT=function(){return this.GT},void 0!==e&&("string"==typeof e?this.XT(e):void 0!==e.str?this.XT(e.str):void 0!==e.$T&&this.ZT(e.$T))},Ie.lang.extend(KJUR.hT.zT,KJUR.hT.xT),KJUR.hT.em=function(e){KJUR.hT.em.wy.constructor.call(this);this.tm=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.rm=function(e,t,r){var i=this.im,n=this.tm(e),s=String(n.getFullYear());"utc"==t&&(s=s.substr(2,2));var o=i(String(n.getMonth()+1),2),a=i(String(n.getDate()),2),h=i(String(n.getHours()),2),c=i(String(n.getMinutes()),2),u=i(String(n.getSeconds()),2),l=s+o+a+h+c+u;if(!0===r){var p=n.getMilliseconds();if(0!=p){var d=i(String(p),3);d=d.replace(/[0]+$/,""),l=l+"."+d}}return l+"Z"},this.im=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.JT=function(){return this.T},this.XT=function(e){this.VT=null,this.jT=!0,this.T=e,this.GT=stohex(e)},this.nm=function(e,t,r,i,n,s){var o=new Date(Date.UTC(e,t-1,r,i,n,s,0));this.sm(o)},this.QT=function(){return this.GT}},Ie.lang.extend(KJUR.hT.em,KJUR.hT.xT),KJUR.hT.om=function(e){KJUR.hT.zT.wy.constructor.call(this);this.am=function(e){this.VT=null,this.jT=!0,this.hm=e},this.cm=function(e){this.VT=null,this.jT=!0,this.hm.push(e)},this.hm=new Array,void 0!==e&&void 0!==e.NT&&(this.hm=e.NT)},Ie.lang.extend(KJUR.hT.om,KJUR.hT.xT),KJUR.hT.ET=function(){KJUR.hT.ET.wy.constructor.call(this),this.YT="01",this.VT="0101ff"},Ie.lang.extend(KJUR.hT.ET,KJUR.hT.xT),KJUR.hT.vT=function(e){KJUR.hT.vT.wy.constructor.call(this),this.YT="02",this.um=function(e){this.VT=null,this.jT=!0,this.GT=KJUR.hT.cT.lT(e)},this.lm=function(e){var t=new r(String(e),10);this.um(t)},this.pm=function(e){this.GT=e},this.QT=function(){return this.GT},void 0!==e&&(void 0!==e.dm?this.um(e.dm):void 0!==e.fm?this.lm(e.fm):"number"==typeof e?this.lm(e):void 0!==e.$T&&this.pm(e.$T))},Ie.lang.extend(KJUR.hT.vT,KJUR.hT.xT),KJUR.hT.yT=function(e){KJUR.hT.yT.wy.constructor.call(this),this.YT="03",this.gm=function(e){this.VT=null,this.jT=!0,this.GT=e},this.Em=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.VT=null,this.jT=!0,this.GT=r+t},this.vm=function(e){e=e.replace(/0+$/,"");var t=8-e.length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";for(var i="",r=0;r<e.length-1;r+=8){var n=e.substr(r,8),s=parseInt(n,2).toString(16);1==s.length&&(s="0"+s),i+=s}this.VT=null,this.jT=!0,this.GT="0"+t+i},this.ym=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.vm(t)},this.Tm=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.QT=function(){return this.GT},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.gm(e):void 0!==e.$T?this.gm(e.$T):void 0!==e.mm?this.vm(e.mm):void 0!==e.NT&&this.ym(e.NT))},Ie.lang.extend(KJUR.hT.yT,KJUR.hT.xT),KJUR.hT.TT=function(e){KJUR.hT.TT.wy.constructor.call(this,e),this.YT="04"},Ie.lang.extend(KJUR.hT.TT,KJUR.hT.zT),KJUR.hT.mT=function(){KJUR.hT.mT.wy.constructor.call(this),this.YT="05",this.VT="0500"},Ie.lang.extend(KJUR.hT.mT,KJUR.hT.xT),KJUR.hT.IT=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},i=function(e){var i="",n=new r(e,10),s=n.toString(2),o=7-s.length%7;7==o&&(o=0);for(var a="",h=0;h<o;h++)a+="0";s=a+s;for(var h=0;h<s.length-1;h+=7){var c=s.substr(h,7);h!=s.length-7&&(c="1"+c),i+=t(parseInt(c,2))}return i};KJUR.hT.IT.wy.constructor.call(this),this.YT="06",this.pm=function(e){this.VT=null,this.jT=!0,this.T=null,this.GT=e},this.Im=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",n=e.split("."),s=40*parseInt(n[0])+parseInt(n[1]);r+=t(s),n.splice(0,2);for(var o=0;o<n.length;o++)r+=i(n[o]);this.VT=null,this.jT=!0,this.T=null,this.GT=r},this.Sm=function(e){if(void 0===KJUR.hT.bm.wm.Rm[e])throw"DERObjectIdentifier oidName undefined: "+e;var t=KJUR.hT.bm.wm.Rm[e];this.Im(t)},this.QT=function(){return this.GT},void 0!==e&&("string"==typeof e&&e.match(/^[0-2].[0-9.]+$/)?this.Im(e):void 0!==KJUR.hT.bm.wm.Rm[e]?this.Im(KJUR.hT.bm.wm.Rm[e]):void 0!==e.Cm?this.Im(e.Cm):void 0!==e.$T?this.pm(e.$T):void 0!==e.name&&this.Sm(e.name))},Ie.lang.extend(KJUR.hT.IT,KJUR.hT.xT),KJUR.hT.ST=function(e){KJUR.hT.ST.wy.constructor.call(this),this.YT="0a",this.um=function(e){this.VT=null,this.jT=!0,this.GT=KJUR.hT.cT.lT(e)},this.lm=function(e){var t=new r(String(e),10);this.um(t)},this.pm=function(e){this.GT=e},this.QT=function(){return this.GT},void 0!==e&&(void 0!==e.fm?this.lm(e.fm):"number"==typeof e?this.lm(e):void 0!==e.$T&&this.pm(e.$T))},Ie.lang.extend(KJUR.hT.ST,KJUR.hT.xT),KJUR.hT.RT=function(e){KJUR.hT.RT.wy.constructor.call(this,e),this.YT="0c"},Ie.lang.extend(KJUR.hT.RT,KJUR.hT.zT),KJUR.hT.wT=function(e){KJUR.hT.wT.wy.constructor.call(this,e),this.YT="12"},Ie.lang.extend(KJUR.hT.wT,KJUR.hT.zT),KJUR.hT.bT=function(e){KJUR.hT.bT.wy.constructor.call(this,e),this.YT="13"},Ie.lang.extend(KJUR.hT.bT,KJUR.hT.zT),KJUR.hT.CT=function(e){KJUR.hT.CT.wy.constructor.call(this,e),this.YT="14"},Ie.lang.extend(KJUR.hT.CT,KJUR.hT.zT),KJUR.hT._T=function(e){KJUR.hT._T.wy.constructor.call(this,e),this.YT="16"},Ie.lang.extend(KJUR.hT._T,KJUR.hT.zT),KJUR.hT.PT=function(e){KJUR.hT.PT.wy.constructor.call(this,e),this.YT="17",this.sm=function(e){this.VT=null,this.jT=!0,this._m=e,this.T=this.rm(this._m,"utc"),this.GT=stohex(this.T)},this.QT=function(){return void 0===this._m&&void 0===this.T&&(this._m=new Date,this.T=this.rm(this._m,"utc"),this.GT=stohex(this.T)),this.GT},void 0!==e&&(void 0!==e.str?this.XT(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.XT(e):void 0!==e.$T?this.ZT(e.$T):void 0!==e._m&&this.sm(e._m))},Ie.lang.extend(KJUR.hT.PT,KJUR.hT.em),KJUR.hT.AT=function(e){KJUR.hT.AT.wy.constructor.call(this,e),this.YT="18",this.Pm=!1,this.sm=function(e){this.VT=null,this.jT=!0,this._m=e,this.T=this.rm(this._m,"gen",this.Pm),this.GT=stohex(this.T)},this.QT=function(){return void 0===this._m&&void 0===this.T&&(this._m=new Date,this.T=this.rm(this._m,"gen",this.Pm),this.GT=stohex(this.T)),this.GT},void 0!==e&&(void 0!==e.str?this.XT(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.XT(e):void 0!==e.$T?this.ZT(e.$T):void 0!==e._m&&this.sm(e._m),!0===e.Am&&(this.Pm=!0))},Ie.lang.extend(KJUR.hT.AT,KJUR.hT.em),KJUR.hT.OT=function(e){KJUR.hT.OT.wy.constructor.call(this,e),this.YT="30",this.QT=function(){for(var e="",t=0;t<this.hm.length;t++){e+=this.hm[t].UT()}return this.GT=e,this.GT}},Ie.lang.extend(KJUR.hT.OT,KJUR.hT.om),KJUR.hT.DT=function(e){KJUR.hT.DT.wy.constructor.call(this,e),this.YT="31",this.Om=!0,this.QT=function(){for(var e=new Array,t=0;t<this.hm.length;t++){var r=this.hm[t];e.push(r.UT())}return 1==this.Om&&e.sort(),this.GT=e.join(""),this.GT},void 0!==e&&void 0!==e.Nm&&0==e.Nm&&(this.Om=!1)},Ie.lang.extend(KJUR.hT.DT,KJUR.hT.om),KJUR.hT.kT=function(e){KJUR.hT.kT.wy.constructor.call(this),this.YT="a0",this.GT="",this.Dm=!0,this.km=null,this.Lm=function(e,t,r){this.YT=t,this.Dm=e,this.km=r,this.Dm?(this.GT=this.km.UT(),this.VT=null,this.jT=!0):(this.GT=null,this.VT=r.UT(),this.VT=this.VT.replace(/^../,t),this.jT=!1)},this.QT=function(){return this.GT},void 0!==e&&(void 0!==e.tag&&(this.YT=e.tag),void 0!==e.LT&&(this.Dm=e.LT),void 0!==e.MT&&(this.km=e.MT,this.Lm(this.Dm,this.YT,this.km)))},Ie.lang.extend(KJUR.hT.kT,KJUR.hT.xT);/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */
var Pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ae="=";/*! crypto-1.1.8.js (c) 2013-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
"undefined"!=typeof KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.bv=new function(){this.Dv={sha1:"3021300906052b0e03021a05000414",Mm:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",Fm:"3041300d060960864801650304020205000430",Um:"3051300d060960864801650304020305000440",Bm:"3020300c06082a864886f70d020205000410",Hm:"3020300c06082a864886f70d020505000410",xm:"3021300906052b2403020105000414"},this.qm={Hm:"cryptojs",sha1:"cryptojs",Mm:"cryptojs",sha256:"cryptojs",Fm:"cryptojs",Um:"cryptojs",xm:"cryptojs",Gm:"cryptojs",Vm:"cryptojs",jm:"cryptojs",Qm:"cryptojs",Km:"cryptojs",Ym:"cryptojs",Wm:"cryptojs",zm:"cryptojs/jsrsa",Jm:"cryptojs/jsrsa",Xm:"cryptojs/jsrsa",Zm:"cryptojs/jsrsa",$m:"cryptojs/jsrsa",eI:"cryptojs/jsrsa",tI:"cryptojs/jsrsa",rI:"cryptojs/jsrsa",iI:"cryptojs/jsrsa",nI:"cryptojs/jsrsa",sI:"cryptojs/jsrsa",oI:"cryptojs/jsrsa",aI:"cryptojs/jsrsa",hI:"cryptojs/jsrsa",cI:"cryptojs/jsrsa",uI:"cryptojs/jsrsa",lI:"cryptojs/jsrsa",pI:"cryptojs/jsrsa",dI:"cryptojs/jsrsa",fI:"cryptojs/jsrsa",gI:"cryptojs/jsrsa",EI:"cryptojs/jsrsa",vI:"cryptojs/jsrsa",yI:"cryptojs/jsrsa"},this.TI={Hm:Se.iT.Ug,sha1:Se.iT.oT,Mm:Se.iT.mI,sha256:Se.iT.II,Fm:Se.iT.SI,Um:Se.iT.RI,xm:Se.iT.wI},this.bI=function(e,t){if(void 0===this.Dv[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.Dv[t]+e},this._v=function(e,t,r){var i=this.bI(e,t),n=r/4;if(i.length+22>n)throw"key is too short for SigAlg: keylen="+r+","+t;for(var s="0001",o="00"+i,a="",h=n-s.length-o.length,c=0;c<h;c+=2)a+="ff";return s+a+o},this.wv=function(e,t){return new KJUR.crypto._I({AI:t}).CI(e)},this.Av=function(e,t){return new KJUR.crypto._I({AI:t}).OI(e)},this.sha1=function(e){return new KJUR.crypto._I({AI:"sha1",NI:"cryptojs"}).CI(e)},this.sha256=function(e){return new KJUR.crypto._I({AI:"sha256",NI:"cryptojs"}).CI(e)},this.DI=function(e){return new KJUR.crypto._I({AI:"sha256",NI:"cryptojs"}).OI(e)},this.Um=function(e){return new KJUR.crypto._I({AI:"sha512",NI:"cryptojs"}).CI(e)},this.kI=function(e){return new KJUR.crypto._I({AI:"sha512",NI:"cryptojs"}).OI(e)},this.Hm=function(e){return new KJUR.crypto._I({AI:"md5",NI:"cryptojs"}).CI(e)},this.xm=function(e){return new KJUR.crypto._I({AI:"ripemd160",NI:"cryptojs"}).CI(e)},this.LI=function(e){}},KJUR.crypto._I=function(e){this.MI=function(e,t){if(null!=e&&void 0===t&&(t=KJUR.crypto.bv.qm[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.FI=KJUR.crypto.bv.TI[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.UI=function(e){this.FI.update(e)},this.BI=function(e){var t=Se.Uy.By.parse(e);this.FI.update(t)},this.digest=function(){return this.FI.Zy().toString(Se.Uy.By)},this.CI=function(e){return this.UI(e),this.digest()},this.OI=function(e){return this.BI(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.FI=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.UI=function(e){this.FI.update(e)},this.BI=function(e){var t=sjcl.xI.$T.HI(e);this.FI.update(t)},this.digest=function(){var e=this.FI.Zy();return sjcl.xI.$T.qI(e)},this.CI=function(e){return this.UI(e),this.digest()},this.OI=function(e){return this.BI(e),this.digest()}}},this.UI=function(e){throw"updateString(str) not supported for this alg/prov: "+this.GI+"/"+this.VI},this.BI=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.GI+"/"+this.VI},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.GI+"/"+this.VI},this.CI=function(e){throw"digestString(str) not supported for this alg/prov: "+this.GI+"/"+this.VI},this.OI=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.GI+"/"+this.VI},void 0!==e&&void 0!==e.AI&&(this.GI=e.AI,void 0===e.NI&&(this.VI=KJUR.crypto.bv.qm[this.GI]),this.MI(this.GI,this.VI))},KJUR.crypto.jI=function(e){this.MI=function(e,t){if(e=e.toLowerCase(),null==e&&(e="hmacsha1"),e=e.toLowerCase(),"hmac"!=e.substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=KJUR.crypto.bv.qm[e]),this.QI=e+"/"+t;var r=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==t){try{var i=KJUR.crypto.bv.TI[r];this.mac=Se.iT.rT.create(i,this.KI)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+e}this.UI=function(e){this.mac.update(e)},this.BI=function(e){var t=Se.Uy.By.parse(e);this.mac.update(t)},this.YI=function(){return this.mac.Zy().toString(Se.Uy.By)},this.WI=function(e){return this.UI(e),this.YI()},this.zI=function(e){return this.BI(e),this.YI()}}},this.UI=function(e){throw"updateString(str) not supported for this alg/prov: "+this.QI},this.BI=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.QI},this.YI=function(){throw"digest() not supported for this alg/prov: "+this.QI},this.WI=function(e){throw"digestString(str) not supported for this alg/prov: "+this.QI},this.zI=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.QI},this.JI=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=rstrtohex(e)),void(this.KI=Se.Uy.By.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;var t=null;if(void 0!==e.$T){if(e.$T.length%2!=0||!e.$T.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.$T;t=e.$T}if(void 0!==e.XI&&(t=utf8tohex(e.XI)),void 0!==e.ZI&&(t=rstrtohex(e.ZI)),void 0!==e.$I&&(t=Q(e.$I)),void 0!==e.eS&&(t=b64utohex(e.eS)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.KI=Se.Uy.By.parse(t)},void 0!==e&&(void 0!==e.KI&&this.JI(e.KI),void 0!==e.AI&&(this.GI=e.AI,void 0===e.NI&&(this.VI=KJUR.crypto.bv.qm[this.GI]),this.MI(this.GI,this.VI)))},KJUR.crypto.Signature=function(e){var t=null;if(this.tS=function(){this.GI.match(/^(.+)with(.+)$/)&&(this.rS=RegExp.$1.toLowerCase(),this.iS=RegExp.$2.toLowerCase())},this.nS=function(e,t){for(var r="",i=t/4-e.length,n=0;n<i;n++)r+="0";return r+e},this.MI=function(e,t){if(this.tS(),"cryptojs/jsrsa"!=t)throw"provider not supported: "+t;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.rS)){try{this.FI=new KJUR.crypto._I({AI:this.rS})}catch(e){throw"setAlgAndProvider hash alg set fail alg="+this.rS+"/"+e}this.init=function(e,t){var r=null;try{r=void 0===t?KEYUTIL.getKey(e):KEYUTIL.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===r.sS)this.oS=r,this.state="SIGN";else{if(!0!==r.mv)throw"init failed.:"+r;this.aS=r,this.state="VERIFY"}},this.hS=function(e){"string"==typeof e.cS&&"string"==typeof e.uS?(this.cS=e.cS,this.uS=e.uS):this.oS=e,this.state="SIGN"},this.lS=function(e){"string"==typeof e.pS&&"string"==typeof e.uS?(this.pS=e.pS,this.uS=e.uS):e instanceof KJUR.crypto.dS?this.aS=e:e instanceof X&&(this.aS=e),this.state="VERIFY"},this.fS=function(e){var t=new X509;t.gS(e),this.aS=t.ES,this.state="VERIFY"},this.UI=function(e){this.FI.UI(e)},this.BI=function(e){this.FI.BI(e)},this.sign=function(){if(this.vS=this.FI.digest(),void 0!==this.cS&&void 0!==this.uS){var e=new KJUR.crypto.dS({curve:this.uS});this.yS=e.TS(this.vS,this.cS)}else if(this.oS instanceof X&&"rsaandmgf1"==this.iS)this.yS=this.oS.Ov(this.vS,this.rS,this.mS);else if(this.oS instanceof X&&"rsa"==this.iS)this.yS=this.oS.Cv(this.vS,this.rS);else if(this.oS instanceof KJUR.crypto.dS)this.yS=this.oS.Cv(this.vS);else{if(!(this.oS instanceof KJUR.crypto.IS))throw"Signature: unsupported public key alg: "+this.iS;this.yS=this.oS.Cv(this.vS)}return this.yS},this.SS=function(e){return this.UI(e),this.sign()},this.TS=function(e){return this.BI(e),this.sign()},this.verify=function(e){if(this.vS=this.FI.digest(),void 0!==this.pS&&void 0!==this.uS){return new KJUR.crypto.dS({curve:this.uS}).RS(this.vS,e,this.pS)}if(this.aS instanceof X&&"rsaandmgf1"==this.iS)return this.aS.kv(this.vS,e,this.rS,this.mS);if(this.aS instanceof X&&"rsa"==this.iS)return this.aS.wS(this.vS,e);if(this.aS instanceof KJUR.crypto.dS)return this.aS.wS(this.vS,e);if(this.aS instanceof KJUR.crypto.IS)return this.aS.wS(this.vS,e);throw"Signature: unsupported public key alg: "+this.iS}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.bS},this.lS=function(e){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.bS},this.fS=function(e){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.bS},this.hS=function(e){throw"initSign(prvKey) not supported for this alg:prov="+this.bS},this.UI=function(e){throw"updateString(str) not supported for this alg:prov="+this.bS},this.BI=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.bS},this.sign=function(){throw"sign() not supported for this alg:prov="+this.bS},this.SS=function(e){throw"digestString(str) not supported for this alg:prov="+this.bS},this.TS=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.bS},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.bS},this.CS=e,void 0!==e&&(void 0!==e.AI&&(this.GI=e.AI,void 0===e.NI?this.VI=KJUR.crypto.bv.qm[this.GI]:this.VI=e.NI,this.bS=this.GI+":"+this.VI,this.MI(this.GI,this.VI),this.tS()),void 0!==e._S&&(this.mS=e._S),void 0!==e.PS)){if(void 0!==e.OS)throw"both prvkeypem and prvkeypas parameters not supported";try{var t=new X;t.NS(e.PS),this.hS(t)}catch(e){throw"fatal error to load pem private key: "+e}}},KJUR.crypto.wm=new function(){this.DS={kS:"rsaEncryption",LS:"ecPublicKey",MS:"dsa",FS:"secp256r1",US:"secp192k1",BS:"secp224r1",HS:"secp256k1",xS:"secp521r1",qS:"secp384r1",GS:"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var Oe=20;X.prototype.Rv=$,X.prototype.Nv=Z,X.prototype.encrypt=ee,X.prototype.VS=te,X.prototype.type="RSA";/*! rsasign-1.2.7.js (c) 2012 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
var Ne=new RegExp("");Ne.compile("[^0-9a-f]","gi"),X.prototype.Cv=ne,X.prototype.SS=ie,X.prototype.jS=se,X.prototype.QS=oe,X.prototype.sign=ie,X.prototype.KS=se,X.prototype.YS=oe,X.prototype.Ov=ce,X.prototype.WS=he,X.prototype.zS=he,X.JS=-1,X.XS=-2,X.prototype.wS=Ee,X.prototype.ZS=ge,X.prototype.$S=fe,X.prototype.verify=ge,X.prototype.eR=fe,X.prototype.kv=ye,X.prototype.tR=ve,X.prototype.rR=ve,X.iR=-2,t.nR=r,t.sR=X,t.Signature=KJUR.crypto.Signature,t._I=KJUR.crypto._I,t.cg=Se,t.oR=Q,t.aR=K},function(e,t,r){"use strict";var i=function(){function e(){}return e}();i.pp="https:"===location.protocol,i.yp=!0,i.hR=1e4,i.nh=6e4,i.cR="X-Hive-TestId",t.L=i},function(e,t,r){var i,n,s;/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.18.10
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(o,a){"use strict";"object"==typeof e&&e.i?e.i=a(r(16),r(16),r(16)):(n=[r(16),r(16),r(16)],i=a,void 0!==(s="function"==typeof i?i.apply(t,n):i)&&(e.i=s))}(0,function(e,t,r,i){"use strict";function n(e,t){var r=arguments.length>=1,i=arguments.length>=2;if(!(this instanceof n))return r?i?new n(e,t):new n(e):new n;if(void 0===e){if(r)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&r)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.Ph(t):this}function s(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function o(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function a(e){return"Array"===o(e)}function h(e,t){var r,i,n={};if("RegExp"===o(t))n=null;else if(a(t))for(r=0,i=t.length;r<i;r++)n[t[r]]=!0;else n[t]=!0;for(r=0,i=e.length;r<i;r++){(n&&void 0!==n[e[r]]||!n&&t.test(e[r]))&&(e.splice(r,1),i--,r--)}return e}function c(e,t){var r,i;if(a(t)){for(r=0,i=t.length;r<i;r++)if(!c(e,t[r]))return!1;return!0}var n=o(t);for(r=0,i=e.length;r<i;r++)if("RegExp"===n){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function u(e,t){if(!a(e)||!a(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function l(e){var t=/^\/+|\/+$/g;return e.replace(t,"")}function p(e){return escape(e)}function d(e){return encodeURIComponent(e).replace(/[!'()*]/g,p).replace(/\*/g,"%2A")}function f(e){return function(t,r){return void 0===t?this.uR[e]||"":(this.uR[e]=t||null,this.Xg(!r),this)}}function g(e,t){return function(r,i){return void 0===r?this.uR[e]||"":(null!==r&&(r+="",r.charAt(0)===t&&(r=r.substring(1))),this.uR[e]=r,this.Xg(!i),this)}}var E=i&&i.lR;n.version="1.18.10";var v=n.prototype,y=Object.prototype.hasOwnProperty;n.uR=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,pR:null,dR:n.dR,fR:n.fR}},n.dR=!1,n.fR=!0,n.gR=/^[a-z][a-z0-9.+-]*$/i,n.ER=/[^a-z0-9\.-]/i,n.vR=/(xn--)/i,n.yR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n.TR=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.mR=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,n.IR={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,SR:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},n.RR={wR:"80",bR:"443",CR:"21",_R:"70",PR:"80",AR:"443"},n.OR=/[^a-zA-Z0-9\.-]/,n.NR={a:"href",DR:"cite",link:"href",kR:"href",LR:"src",form:"action",MR:"src",FR:"href",UR:"src",BR:"src",source:"src",track:"src",input:"src",HR:"src",video:"src"},n.xR=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return n.NR[t]}},n.encode=d,n.decode=decodeURIComponent,n.qR=function(){n.encode=escape,n.decode=unescape},n.GR=function(){n.encode=d,n.decode=decodeURIComponent},n.VR={pathname:{encode:{jR:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{jR:/[\/\?#]/g,map:{py:"%2F",QR:"%3F",KR:"%23"}}},YR:{encode:{jR:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":",WR:"/",zR:"?",JR:"#",XR:"[",ZR:"]","%40":"@",$R:"!","%24":"$","%26":"&",ew:"'",tw:"(",rw:")",iw:"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},nw:{encode:{jR:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{$R:"!","%24":"$",ew:"'",tw:"(",rw:")",iw:"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{jR:/[\/\?#:]/g,map:{py:"%2F",QR:"%3F",KR:"%23",sw:"%3A"}}}},n.ow=function(e,t){var r=n.encode(e+"");return void 0===t&&(t=n.fR),t?r.replace(/%20/g,"+"):r},n.aw=function(e,t){e+="",void 0===t&&(t=n.fR);try{return n.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var T,m={encode:"encode",decode:"decode"},I=function(e,t){return function(r){try{return n[t](r+"").replace(n.VR[e][t].jR,function(r){return n.VR[e][t].map[r]})}catch(e){return r}}};for(T in m)n[T+"PathSegment"]=I("pathname",m[T]),n[T+"UrnPathSegment"]=I("urnpath",m[T]);var S=function(e,t,r){return function(i){var s;s=r?function(e){return n[t](n[r](e))}:n[t];for(var o=(i+"").split(e),a=0,h=o.length;a<h;a++)o[a]=s(o[a]);return o.join(e)}};n.hw=S("/","decodePathSegment"),n.cw=S(":","decodeUrnPathSegment"),n.uw=S("/","encodePathSegment","decode"),n.lw=S(":","encodeUrnPathSegment","decode"),n.pw=I("reserved","encode"),n.parse=function(e,t){var r;return t||(t={}),r=e.indexOf("#"),r>-1&&(t.pR=e.substring(r+1)||null,e=e.substring(0,r)),r=e.indexOf("?"),r>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=n.dw(e,t)):(r=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(n.gR)?t.protocol=void 0:"//"===e.substring(r+1,r+3)?(e=e.substring(r+3),e=n.dw(e,t)):(e=e.substring(r+1),t.urn=!0)),t.path=e,t},n.fw=function(e,t){e=e.replace(/\\/g,"/");var r,i,n=e.indexOf("/");if(-1===n&&(n=e.length),"["===e.charAt(0))r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,n)||null,"/"===t.port&&(t.port=null);else{var s=e.indexOf(":"),o=e.indexOf("/"),a=e.indexOf(":",s+1);-1!==a&&(-1===o||a<o)?(t.hostname=e.substring(0,n)||null,t.port=null):(i=e.substring(0,n).split(":"),t.hostname=i[0]||null,t.port=i[1]||null)}return t.hostname&&"/"!==e.substring(n).charAt(0)&&(n++,e="/"+e),e.substring(n)||"/"},n.dw=function(e,t){return e=n.gw(e,t),n.fw(e,t)},n.gw=function(e,t){var r,i=e.indexOf("/"),s=e.lastIndexOf("@",i>-1?i:e.length-1);return s>-1&&(-1===i||s<i)?(r=e.substring(0,s).split(":"),t.username=r[0]?n.decode(r[0]):null,r.shift(),t.password=r[0]?n.decode(r.join(":")):null,e=e.substring(s+1)):(t.username=null,t.password=null),e},n.Ew=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,i,s,o={},a=e.split("&"),h=a.length,c=0;c<h;c++)r=a[c].split("="),i=n.aw(r.shift(),t),s=r.length?n.aw(r.join("="),t):null,y.call(o,i)?("string"!=typeof o[i]&&null!==o[i]||(o[i]=[o[i]]),o[i].push(s)):o[i]=s;return o},n.Xg=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=n.vw(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.pR&&e.pR&&(t+="#"+e.pR),t},n.yw=function(e){var t="";return e.hostname?(n.TR.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},n.vw=function(e){return n.Tw(e)+n.yw(e)},n.Tw=function(e){var t="";return e.username&&(t+=n.encode(e.username)),e.password&&(t+=":"+n.encode(e.password)),t&&(t+="@"),t},n.mw=function(e,t,r){var i,s,o,h,c="";for(s in e)if(y.call(e,s)&&s)if(a(e[s]))for(i={},o=0,h=e[s].length;o<h;o++)void 0!==e[s][o]&&void 0===i[e[s][o]+""]&&(c+="&"+n.Iw(s,e[s][o],r),!0!==t&&(i[e[s][o]+""]=!0));else void 0!==e[s]&&(c+="&"+n.Iw(s,e[s],r));return c.substring(1)},n.Iw=function(e,t,r){return n.ow(e,r)+(null!==t?"="+n.ow(t,r):"")},n.Sw=function(e,t,r){if("object"==typeof t)for(var i in t)y.call(t,i)&&n.Sw(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=r);"string"==typeof e[t]&&(e[t]=[e[t]]),a(r)||(r=[r]),e[t]=(e[t]||[]).concat(r)}},n.Rw=function(e,t,r){var i,s,c;if(a(t))for(i=0,s=t.length;i<s;i++)e[t[i]]=void 0;else if("RegExp"===o(t))for(c in e)t.test(c)&&(e[c]=void 0);else if("object"==typeof t)for(c in t)y.call(t,c)&&n.Rw(e,c,t[c]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===o(r)?!a(e[t])&&r.test(e[t])?e[t]=void 0:e[t]=h(e[t],r):e[t]!==String(r)||a(r)&&1!==r.length?a(e[t])&&(e[t]=h(e[t],r)):e[t]=void 0:e[t]=void 0}},n.ww=function(e,t,r,i){switch(o(t)){case"String":break;case"RegExp":for(var s in e)if(y.call(e,s)&&t.test(s)&&(void 0===r||n.ww(e,s,r)))return!0;return!1;case"Object":for(var h in t)if(y.call(t,h)&&!n.ww(e,h,t[h]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(o(r)){case"Undefined":return t in e;case"Boolean":return r===Boolean(a(e[t])?e[t].length:e[t]);case"Function":return!!r(e[t],t,e);case"Array":if(!a(e[t]))return!1;return(i?c:u)(e[t],r);case"RegExp":return a(e[t])?!!i&&c(e[t],r):Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return a(e[t])?!!i&&c(e[t],r):e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},n.bw=function(){for(var e=[],t=[],r=0,i=0;i<arguments.length;i++){var s=new n(arguments[i]);e.push(s);for(var o=s.Cw(),a=0;a<o.length;a++)"string"==typeof o[a]&&t.push(o[a]),o[a]&&r++}if(!t.length||!r)return new n("");var h=new n("").Cw(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||h.path("/"+h.path()),h.normalize()},n._w=function(e,t){var r,i=Math.min(e.length,t.length);for(r=0;r<i;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return r<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(r)&&"/"===t.charAt(r)||(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},n.Pw=function(e,t,r){r||(r={});var i=r.start||n.IR.start,s=r.end||n.IR.end,o=r.trim||n.IR.trim,a=r.SR||n.IR.SR,h=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var c=i.exec(e);if(!c)break;var u=c.index;if(r.Aw){var l=e.slice(Math.max(u-3,0),u);if(l&&h.test(l))continue}for(var p=u+e.slice(u).search(s),d=e.slice(u,p),f=-1;;){var g=a.exec(d);if(!g)break;var E=g.index+g[0].length;f=Math.max(f,E)}if(d=f>-1?d.slice(0,f)+d.slice(f).replace(o,""):d.replace(o,""),!(d.length<=c[0].length||r.Ow&&r.Ow.test(d))){p=u+d.length;var v=t(d,u,p,e);void 0!==v?(v=String(v),e=e.slice(0,u)+v+e.slice(p),i.lastIndex=u+v.length):i.lastIndex=p}}return i.lastIndex=0,e},n.Nw=function(t){if(t.match(n.OR)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(e.Dw(t).match(n.OR))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]')}},n.wo=function(e){if(e){var t={lR:this.wo()};return i.kw&&"function"==typeof i.kw.wo&&(t.kw=i.kw.wo()),i.Lw&&"function"==typeof i.Lw.wo&&(t.Lw=i.Lw.wo()),i.Mw&&"function"==typeof i.Mw.wo&&(t.Mw=i.Mw.wo()),t}return i.lR===this&&(i.lR=E),this},v.Xg=function(e){return!0===e?this.Fw=!0:(void 0===e||this.Fw)&&(this.Uw=n.Xg(this.uR),this.Fw=!1),this},v.clone=function(){return new n(this)},v.valueOf=v.toString=function(){return this.Xg(!1).Uw},v.protocol=f("protocol"),v.username=f("username"),v.password=f("password"),v.hostname=f("hostname"),v.port=f("port"),v.query=g("query","?"),v.pR=g("fragment","#"),v.search=function(e,t){var r=this.query(e,t);return"string"==typeof r&&r.length?"?"+r:r},v.hash=function(e,t){var r=this.pR(e,t);return"string"==typeof r&&r.length?"#"+r:r},v.pathname=function(e,t){if(void 0===e||!0===e){var r=this.uR.path||(this.uR.hostname?"/":"");return e?(this.uR.urn?n.cw:n.hw)(r):r}return this.uR.urn?this.uR.path=e?n.lw(e):"":this.uR.path=e?n.uw(e):"/",this.Xg(!t),this},v.path=v.pathname,v.href=function(e,t){var r;if(void 0===e)return this.toString();this.Uw="",this.uR=n.uR();var i=e instanceof n,s="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){e=e[n.xR(e)]||"",s=!1}if(!i&&s&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this.uR=n.parse(String(e),this.uR);else{if(!i&&!s)throw new TypeError("invalid input");var o=i?e.uR:e;for(r in o)y.call(this.uR,r)&&(this.uR[r]=o[r])}return this.Xg(!t),this},v.is=function(e){var t=!1,i=!1,s=!1,o=!1,a=!1,h=!1,c=!1,u=!this.uR.urn;switch(this.uR.hostname&&(u=!1,i=n.yR.test(this.uR.hostname),s=n.TR.test(this.uR.hostname),t=i||s,o=!t,a=o&&r&&r.has(this.uR.hostname),h=o&&n.ER.test(this.uR.hostname),c=o&&n.vR.test(this.uR.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return o;case"sld":return a;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return s;case"idn":return h;case"url":return!this.uR.urn;case"urn":return!!this.uR.urn;case"punycode":return c}return null};var R=v.protocol,w=v.port,b=v.hostname;v.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(n.gR)))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return R.call(this,e,t)},v.scheme=v.protocol,v.port=function(e,t){if(this.uR.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError('Port "'+e+'" contains characters other than [0-9]');return w.call(this,e,t)},v.hostname=function(e,t){if(this.uR.urn)return void 0===e?"":this;if(void 0!==e){var r={};if("/"!==n.fw(e,r))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=r.hostname}return b.call(this,e,t)},v.origin=function(e,t){if(this.uR.urn)return void 0===e?"":this;if(void 0===e){var r=this.protocol();return this.Bw()?(r?r+"://":"")+this.Bw():""}var i=n(e);return this.protocol(i.protocol()).Bw(i.Bw()).Xg(!t),this},v.host=function(e,t){if(this.uR.urn)return void 0===e?"":this;if(void 0===e)return this.uR.hostname?n.yw(this.uR):"";if("/"!==n.fw(e,this.uR))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.Xg(!t),this},v.Bw=function(e,t){if(this.uR.urn)return void 0===e?"":this;if(void 0===e)return this.uR.hostname?n.vw(this.uR):"";if("/"!==n.dw(e,this.uR))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.Xg(!t),this},v.Hw=function(e,t){if(this.uR.urn)return void 0===e?"":this;if(void 0===e){var r=n.Tw(this.uR);return r?r.substring(0,r.length-1):r}return"@"!==e[e.length-1]&&(e+="@"),n.gw(e,this.uR),this.Xg(!t),this},v.xw=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=n.parse(e),this.uR.path=r.path,this.uR.query=r.query,this.uR.pR=r.pR,this.Xg(!t),this)},v.qw=function(e,t){if(this.uR.urn)return void 0===e?"":this;if(void 0===e){if(!this.uR.hostname||this.is("IP"))return"";var r=this.uR.hostname.length-this.domain().length-1;return this.uR.hostname.substring(0,r)||""}var i=this.uR.hostname.length-this.domain().length,o=this.uR.hostname.substring(0,i),a=new RegExp("^"+s(o));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&n.Nw(e),this.uR.hostname=this.uR.hostname.replace(a,e),this.Xg(!t),this},v.domain=function(e,t){if(this.uR.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this.uR.hostname||this.is("IP"))return"";var r=this.uR.hostname.match(/\./g);if(r&&r.length<2)return this.uR.hostname;var i=this.uR.hostname.length-this.Gw(t).length-1;return i=this.uR.hostname.lastIndexOf(".",i-1)+1,this.uR.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(n.Nw(e),!this.uR.hostname||this.is("IP"))this.uR.hostname=e;else{var o=new RegExp(s(this.domain())+"$");this.uR.hostname=this.uR.hostname.replace(o,e)}return this.Xg(!t),this},v.Gw=function(e,t){if(this.uR.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this.uR.hostname||this.is("IP"))return"";var i=this.uR.hostname.lastIndexOf("."),n=this.uR.hostname.substring(i+1);return!0!==t&&r&&r.list[n.toLowerCase()]?r.get(this.uR.hostname)||n:n}var o;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');o=new RegExp(s(this.Gw())+"$"),this.uR.hostname=this.uR.hostname.replace(o,e)}else{if(!this.uR.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(s(this.Gw())+"$"),this.uR.hostname=this.uR.hostname.replace(o,e)}return this.Xg(!t),this},v.Vw=function(e,t){if(this.uR.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this.uR.path&&!this.uR.hostname)return"";if("/"===this.uR.path)return"/";var r=this.uR.path.length-this.filename().length-1,i=this.uR.path.substring(0,r)||(this.uR.hostname?"/":"");return e?n.hw(i):i}var o=this.uR.path.length-this.filename().length,a=this.uR.path.substring(0,o),h=new RegExp("^"+s(a));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=n.uw(e),this.uR.path=this.uR.path.replace(h,e),this.Xg(!t),this},v.filename=function(e,t){if(this.uR.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this.uR.path||"/"===this.uR.path)return"";var r=this.uR.path.lastIndexOf("/"),i=this.uR.path.substring(r+1);return e?n.jw(i):i}var o=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(o=!0);var a=new RegExp(s(this.filename())+"$");return e=n.uw(e),this.uR.path=this.uR.path.replace(a,e),o?this.Qw(t):this.Xg(!t),this},v.suffix=function(e,t){if(this.uR.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this.uR.path||"/"===this.uR.path)return"";var r,i,o=this.filename(),a=o.lastIndexOf(".");return-1===a?"":(r=o.substring(a+1),i=/^[a-z0-9%]+$/i.test(r)?r:"",e?n.jw(i):i)}"."===e.charAt(0)&&(e=e.substring(1));var h,c=this.suffix();if(c)h=e?new RegExp(s(c)+"$"):new RegExp(s("."+c)+"$");else{if(!e)return this;this.uR.path+="."+n.uw(e)}return h&&(e=n.uw(e),this.uR.path=this.uR.path.replace(h,e)),this.Xg(!t),this},v.Cw=function(e,t,r){var i=this.uR.urn?":":"/",n=this.path(),s="/"===n.substring(0,1),o=n.split(i);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(s&&o.shift(),e<0&&(e=Math.max(o.length+e,0)),void 0===t)return void 0===e?o:o[e];if(null===e||void 0===o[e])if(a(t)){o=[];for(var h=0,c=t.length;h<c;h++)(t[h].length||o.length&&o[o.length-1].length)&&(o.length&&!o[o.length-1].length&&o.pop(),o.push(l(t[h])))}else(t||"string"==typeof t)&&(t=l(t),""===o[o.length-1]?o[o.length-1]=t:o.push(t));else t?o[e]=l(t):o.splice(e,1);return s&&o.unshift(""),this.path(o.join(i),r)},v.Kw=function(e,t,r){var i,s,o;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(i=this.Cw(e,t,r),a(i))for(s=0,o=i.length;s<o;s++)i[s]=n.decode(i[s]);else i=void 0!==i?n.decode(i):void 0;return i}if(a(t))for(s=0,o=t.length;s<o;s++)t[s]=n.encode(t[s]);else t="string"==typeof t||t instanceof String?n.encode(t):t;return this.Cw(e,t,r)};var C=v.query;return v.query=function(e,t){if(!0===e)return n.Ew(this.uR.query,this.uR.fR);if("function"==typeof e){var r=n.Ew(this.uR.query,this.uR.fR),i=e.call(this,r);return this.uR.query=n.mw(i||r,this.uR.dR,this.uR.fR),this.Xg(!t),this}return void 0!==e&&"string"!=typeof e?(this.uR.query=n.mw(e,this.uR.dR,this.uR.fR),this.Xg(!t),this):C.call(this,e,t)},v.Yw=function(e,t,r){var i=n.Ew(this.uR.query,this.uR.fR);if("string"==typeof e||e instanceof String)i[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var s in e)y.call(e,s)&&(i[s]=e[s])}return this.uR.query=n.mw(i,this.uR.dR,this.uR.fR),"string"!=typeof e&&(r=t),this.Xg(!r),this},v.Sw=function(e,t,r){var i=n.Ew(this.uR.query,this.uR.fR);return n.Sw(i,e,void 0===t?null:t),this.uR.query=n.mw(i,this.uR.dR,this.uR.fR),"string"!=typeof e&&(r=t),this.Xg(!r),this},v.Rw=function(e,t,r){var i=n.Ew(this.uR.query,this.uR.fR);return n.Rw(i,e,t),this.uR.query=n.mw(i,this.uR.dR,this.uR.fR),"string"!=typeof e&&(r=t),this.Xg(!r),this},v.ww=function(e,t,r){var i=n.Ew(this.uR.query,this.uR.fR);return n.ww(i,e,t,r)},v.Ww=v.Yw,v.zw=v.Sw,v.Jw=v.Rw,v.Xw=v.ww,v.normalize=function(){return this.uR.urn?this.eb(!1).Qw(!1).$w(!1).Zw(!1).Xg():this.eb(!1).rb(!1).tb(!1).Qw(!1).$w(!1).Zw(!1).Xg()},v.eb=function(e){return"string"==typeof this.uR.protocol&&(this.uR.protocol=this.uR.protocol.toLowerCase(),this.Xg(!e)),this},v.rb=function(r){return this.uR.hostname&&(this.is("IDN")&&e?this.uR.hostname=e.Dw(this.uR.hostname):this.is("IPv6")&&t&&(this.uR.hostname=t.ib(this.uR.hostname)),this.uR.hostname=this.uR.hostname.toLowerCase(),this.Xg(!r)),this},v.tb=function(e){return"string"==typeof this.uR.protocol&&this.uR.port===n.RR[this.uR.protocol]&&(this.uR.port=null,this.Xg(!e)),this},v.Qw=function(e){var t=this.uR.path;if(!t)return this;if(this.uR.urn)return this.uR.path=n.lw(this.uR.path),this.Xg(!e),this;if("/"===this.uR.path)return this;t=n.uw(t);var r,i,s,o="";for("/"!==t.charAt(0)&&(r=!0,t="/"+t),"/.."!==t.slice(-3)&&"/."!==t.slice(-2)||(t+="/"),t=t.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),r&&(o=t.substring(1).match(/^(\.\.\/)+/)||"")&&(o=o[0]);;){if(-1===(i=t.search(/\/\.\.(\/|$)/)))break;0!==i?(s=t.substring(0,i).lastIndexOf("/"),-1===s&&(s=i),t=t.substring(0,s)+t.substring(i+3)):t=t.substring(3)}return r&&this.is("relative")&&(t=o+t.substring(1)),this.uR.path=t,this.Xg(!e),this},v.nb=v.Qw,v.$w=function(e){return"string"==typeof this.uR.query&&(this.uR.query.length?this.query(n.Ew(this.uR.query,this.uR.fR)):this.uR.query=null,this.Xg(!e)),this},v.Zw=function(e){return this.uR.pR||(this.uR.pR=null,this.Xg(!e)),this},v.sb=v.$w,v.ob=v.Zw,v.qR=function(){var e=n.encode,t=n.decode;n.encode=escape,n.decode=decodeURIComponent;try{this.normalize()}finally{n.encode=e,n.decode=t}return this},v.GR=function(){var e=n.encode,t=n.decode;n.encode=d,n.decode=unescape;try{this.normalize()}finally{n.encode=e,n.decode=t}return this},v.ab=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t.uR.protocol&&(r+=t.uR.protocol+"://"),t.uR.hostname&&(t.is("punycode")&&e?(r+=e.hb(t.uR.hostname),t.uR.port&&(r+=":"+t.uR.port)):r+=t.host()),t.uR.hostname&&t.uR.path&&"/"!==t.uR.path.charAt(0)&&(r+="/"),r+=t.path(!0),t.uR.query){for(var i="",s=0,o=t.uR.query.split("&"),a=o.length;s<a;s++){var h=(o[s]||"").split("=");i+="&"+n.aw(h[0],this.uR.fR).replace(/&/g,"%26"),void 0!==h[1]&&(i+="="+n.aw(h[1],this.uR.fR).replace(/&/g,"%26"))}r+="?"+i.substring(1)}return r+=n.aw(t.hash(),!0)},v.Ph=function(e){var t,r,i,s=this.clone(),o=["protocol","username","password","hostname","port"];if(this.uR.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof n||(e=new n(e)),s.uR.protocol)return s;if(s.uR.protocol=e.uR.protocol,this.uR.hostname)return s;for(r=0;i=o[r];r++)s.uR[i]=e.uR[i];return s.uR.path?(".."===s.uR.path.substring(-2)&&(s.uR.path+="/"),"/"!==s.path().charAt(0)&&(t=e.Vw(),t=t||(0===e.path().indexOf("/")?"/":""),s.uR.path=(t?t+"/":"")+s.uR.path,s.Qw())):(s.uR.path=e.uR.path,s.uR.query||(s.uR.query=e.uR.query)),s.Xg(),s},v.cb=function(e){var t,r,i,s,o,a=this.clone().normalize();if(a.uR.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new n(e).normalize(),t=a.uR,r=e.uR,s=a.path(),o=e.path(),"/"!==s.charAt(0))throw new Error("URI is already relative");if("/"!==o.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===r.protocol&&(t.protocol=null),t.username!==r.username||t.password!==r.password)return a.Xg();if(null!==t.protocol||null!==t.username||null!==t.password)return a.Xg();if(t.hostname!==r.hostname||t.port!==r.port)return a.Xg();if(t.hostname=null,t.port=null,s===o)return t.path="",a.Xg();if(!(i=n._w(s,o)))return a.Xg();var h=r.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=h+t.path.substring(i.length)||"./",a.Xg()},v.cs=function(e){var t,r,i,s=this.clone(),o=new n(e),h={},c={},l={};if(s.normalize(),o.normalize(),s.toString()===o.toString())return!0;if(t=s.query(),r=o.query(),s.query(""),o.query(""),s.toString()!==o.toString())return!1;if(t.length!==r.length)return!1;h=n.Ew(t,this.uR.fR),c=n.Ew(r,this.uR.fR);for(i in h)if(y.call(h,i)){if(a(h[i])){if(!u(h[i],c[i]))return!1}else if(h[i]!==c[i])return!1;l[i]=!0}for(i in c)if(y.call(c,i)&&!l[i])return!1;return!0},v.dR=function(e){return this.uR.dR=!!e,this},v.fR=function(e){return this.uR.fR=!!e,this},n})},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(73),s=r(71),o=function(e){function t(r){var i=e.call(this,r)||this;return i.DONE=4,i.LOADING=3,i.HEADERS_RECEIVED=2,i.OPENED=1,i.UNSENT=0,i.internal=!1,i.id=t.Ag++,i}return i(t,e),t.prototype.send=function(){if(this.readyState!==this.OPENED)throw new Error("The object's state must be OPENED.");if(!this.sessionId){var e=Object.keys(t.ub);e.length>0&&(this.sessionId=t.ub[e[0]])}n.lb.Api().request(this,this.sessionId)},t.prototype.abort=function(){n.lb.Api().abort(this,this.sessionId)},t}(s.pb);o.ub={},o.Ag=0,t.HiveRequest=o},function(e,t,r){"use strict";var i=r(0),n=r(8),s=r(6),o=s.he.dh,a=function(){function e(){}return e.Reporting=function(){return e.app="STATS",i.Framework.resolve(n.pc.hc)},e.sp=function(){return this.app},e.getVersion=function(){return this.version},e}();a.version=o,t.Hive=a},function(module,exports,__webpack_require__){var Thrift={fb:"0.9.2",Type:{STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17},gb:{CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},Eb:function(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&t++;return t},vb:function(e,t,r){function i(){}i.prototype=t.prototype,e.prototype=new i,e.prototype.name=r||""}};Thrift.yb=function(e){this.message=e},Thrift.vb(Thrift.yb,Error,"TException"),Thrift.yb.prototype.Tb=function(){return this.message},Thrift.mb={Ib:0,Sb:1,Rb:2,wb:3,bb:4,Cb:5,_b:6,Pb:7,Ab:8,Ob:9,Nb:10},Thrift.Db=function(e,t){this.message=e,this.code="number"==typeof t?t:0},Thrift.vb(Thrift.Db,Thrift.yb,"TApplicationException"),Thrift.Db.prototype.read=function(e){for(;;){var t=e.kb();if(t.ftype==Thrift.Type.STOP)break;switch(t.fid){case 1:t.ftype==Thrift.Type.STRING?(t=e.Lb(),this.message=t.value):t=e.Mb(t.ftype);break;case 2:t.ftype==Thrift.Type.I32?(t=e.Fb(),this.code=t.value):t=e.Mb(t.ftype);break;default:t=e.Mb(t.ftype)}e.Ub()}e.Bb()},Thrift.Db.prototype.write=function(e){e.Hb("TApplicationException"),this.message&&(e.xb("message",Thrift.Type.STRING,1),e.qb(this.Tb()),e.Gb()),this.code&&(e.xb("type",Thrift.Type.I32,2),e.Vb(this.code),e.Gb()),e.jb(),e.Qb()},Thrift.Db.prototype.Kb=function(){return this.code},Thrift.Fa=Thrift.Yb=function(e,t){this.url=e,this.Wb=0,this.zb=0,this.Jb=t&&t.Jb,this.Xb="",this.Zb=""},Thrift.Yb.prototype={$b:function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw"Your browser doesn't support XHR."},flush:function(e,t){var r=this;if(e&&!t||void 0===this.url||""===this.url)return this.Xb;var i=this.$b();if(i.overrideMimeType&&i.overrideMimeType("application/json"),t&&(i.onreadystatechange=function(){var e=t;return function(){4==this.readyState&&200==this.status&&(r.eC(this.responseText),e())}}()),i.open("POST",this.url,!!e),i.send(this.Xb),!e||!t){if(4!=i.readyState)throw"encountered an unknown ajax ready state: "+i.readyState;if(200!=i.status)throw"encountered a unknown request status: "+i.status;this.Zb=i.responseText,this.tC=this.Zb.length,this.Wb=this.Zb.length,this.zb=0}},rC:function(e,t,r,i){if("undefined"==typeof jQuery||void 0===jQuery.iC)throw"Thrift.js requires jQuery 1.5+ to use asynchronous requests";var n=this;return jQuery.nC({url:this.url,data:t,type:"POST",sC:!1,contentType:"application/json",oC:"text thrift",aC:{hC:function(t){return n.eC(t),i.call(e)}},context:e,success:jQuery.cC(r).pop()})},eC:function(e){this.Zb=e,this.tC=this.Zb.length,this.Wb=this.Zb.length,this.zb=0},isOpen:function(){return!0},open:function(){},close:function(){},read:function(e){var t=this.Wb-this.zb;if(0===t)return"";var r=e;t<e&&(r=t);var i=this.uC.substr(this.zb,r);return this.zb+=r,i},lC:function(){return this.Zb},write:function(e){this.Xb=e},pC:function(){return this.Xb}},Thrift.dC=function(e){this.fC(e)},Thrift.dC.prototype={fC:function(e){this.url=e,this.gC=null,this.callbacks=[],this.EC=[],this.Xb="",this.Zb="",this.vC=0,this.yC=0},flush:function(e,t){var r=this;this.isOpen()?(this.gC.send(this.Xb),this.callbacks.push(function(){var e=t;return function(t){r.eC(t),e()}}())):this.EC.push({TC:this.Xb,mC:t})},IC:function(){var e=this;this.EC.length>0&&(this.EC.forEach(function(t){this.gC.send(t.TC),this.callbacks.push(function(){var r=t.mC;return function(t){e.eC(t),r()}}())}),this.EC=[])},SC:function(e){this.fC(this.url)},RC:function(e){this.callbacks.length&&this.callbacks.shift()(e.data)},wC:function(e){console.log("Thrift WebSocket Error: "+e.toString()),this.gC.close()},eC:function(e){this.Zb=e,this.tC=this.Zb.length,this.Wb=this.Zb.length,this.zb=0},isOpen:function(){return this.gC&&this.gC.readyState==this.gC.OPEN},open:function(){this.gC&&this.gC.readyState!=this.gC.CLOSED||(this.gC=new WebSocket(this.url),this.gC.onopen=this.IC.bind(this),this.gC.onmessage=this.RC.bind(this),this.gC.onerror=this.wC.bind(this),this.gC.onclose=this.SC.bind(this))},close:function(){this.gC.close()},read:function(e){var t=this.Wb-this.zb;if(0===t)return"";var r=e;t<e&&(r=t);var i=this.uC.substr(this.zb,r);return this.zb+=r,i},lC:function(){return this.Zb},write:function(e){this.Xb=e},pC:function(){return this.Xb}},Thrift.bC=Thrift.CC=function(e){this.yg=e},Thrift.CC.Type={},Thrift.CC.Type[Thrift.Type.BOOL]='"tf"',Thrift.CC.Type[Thrift.Type.BYTE]='"i8"',Thrift.CC.Type[Thrift.Type.I16]='"i16"',Thrift.CC.Type[Thrift.Type.I32]='"i32"',Thrift.CC.Type[Thrift.Type.I64]='"i64"',Thrift.CC.Type[Thrift.Type.DOUBLE]='"dbl"',Thrift.CC.Type[Thrift.Type.STRUCT]='"rec"',Thrift.CC.Type[Thrift.Type.STRING]='"str"',Thrift.CC.Type[Thrift.Type.MAP]='"map"',Thrift.CC.Type[Thrift.Type.LIST]='"lst"',Thrift.CC.Type[Thrift.Type.SET]='"set"',Thrift.CC._C={},Thrift.CC._C.tf=Thrift.Type.BOOL,Thrift.CC._C.i8=Thrift.Type.BYTE,Thrift.CC._C.i16=Thrift.Type.I16,Thrift.CC._C.i32=Thrift.Type.I32,Thrift.CC._C.i64=Thrift.Type.I64,Thrift.CC._C.dbl=Thrift.Type.DOUBLE,Thrift.CC._C.rec=Thrift.Type.STRUCT,Thrift.CC._C.str=Thrift.Type.STRING,Thrift.CC._C.map=Thrift.Type.MAP,Thrift.CC._C.lst=Thrift.Type.LIST,Thrift.CC._C.set=Thrift.Type.SET,Thrift.CC.fb=1,Thrift.CC.prototype={PC:function(){return this.yg},AC:function(e,t,r){this.OC=[],this.NC=[],this.OC.push([Thrift.CC.fb,'"'+e+'"',t,r])},DC:function(){var e=this.OC.pop();this.kC=this.OC.pop(),this.kC.push(e),this.LC="["+this.kC.join(",")+"]",this.yg.write(this.LC)},Hb:function(e){this.NC.push(this.OC.length),this.OC.push({})},Qb:function(){var e=this.NC.pop(),t=this.OC[e],r="{",i=!0;for(var n in t)i?i=!1:r+=",",r+=n+":"+t[n];r+="}",this.OC[e]=r},xb:function(e,t,r){this.NC.push(this.OC.length),this.OC.push({MC:'"'+r+'"',FC:Thrift.CC.Type[t]})},Gb:function(){var e=this.OC.pop(),t=this.OC.pop();this.OC[this.OC.length-1][t.MC]="{"+t.FC+":"+e+"}",this.NC.pop()},jb:function(){},UC:function(e,t,r){this.NC.push(this.OC.length),this.OC.push([Thrift.CC.Type[e],Thrift.CC.Type[t],0])},BC:function(){var e=this.NC.pop();if(e!=this.OC.length){(this.OC.length-e-1)%2!=0&&this.OC.push("");var t=(this.OC.length-e-1)/2;this.OC[e][this.OC[e].length-1]=t;for(var r="}",i=!0;this.OC.length>e+1;){var n=this.OC.pop(),s=this.OC.pop();i?i=!1:r=","+r,isNaN(s)||(s='"'+s+'"'),r=s+":"+n+r}r="{"+r,this.OC[e].push(r),this.OC[e]="["+this.OC[e].join(",")+"]"}},HC:function(e,t){this.NC.push(this.OC.length),this.OC.push([Thrift.CC.Type[e],t])},xC:function(){for(var e=this.NC.pop();this.OC.length>e+1;){var t=this.OC[e+1];this.OC.splice(e+1,1),this.OC[e].push(t)}this.OC[e]="["+this.OC[e].join(",")+"]"},qC:function(e,t){this.NC.push(this.OC.length),this.OC.push([Thrift.CC.Type[e],t])},GC:function(){for(var e=this.NC.pop();this.OC.length>e+1;){var t=this.OC[e+1];this.OC.splice(e+1,1),this.OC[e].push(t)}this.OC[e]="["+this.OC[e].join(",")+"]"},VC:function(e){this.OC.push(e?1:0)},jC:function(e){this.OC.push(e)},QC:function(e){this.OC.push(e)},Vb:function(e){this.OC.push(e)},KC:function(e){this.OC.push(e)},YC:function(e){this.OC.push(e)},qb:function(e){if(null===e)this.OC.push(null);else{for(var t="",r=0;r<e.length;r++){var i=e.charAt(r);t+='"'===i?'\\"':"\\"===i?"\\\\":"\b"===i?"\\b":"\f"===i?"\\f":"\n"===i?"\\n":"\r"===i?"\\r":"\t"===i?"\\t":i}this.OC.push('"'+t+'"')}},WC:function(e){this.qb(e)},zC:function(){this.JC=[],this.zb=[],"undefined"!=typeof JSON&&"function"==typeof JSON.parse?this.XC=JSON.parse(this.yg.lC()):"undefined"!=typeof jQuery?this.XC=jQuery.ZC(this.yg.lC()):this.XC=eval(this.yg.lC());var r={},version=this.XC.shift();if(version!=Thrift.CC.fb)throw"Wrong thrift protocol version: "+version;return r.fname=this.XC.shift(),r.$C=this.XC.shift(),r.e_=this.XC.shift(),this.JC.push(this.XC.shift()),r},t_:function(){},r_:function(e){var t={};return t.fname="",this.JC[this.JC.length-1]instanceof Array&&this.JC.push(this.JC[this.JC.length-1].shift()),t},Bb:function(){this.JC[this.JC.length-2]instanceof Array&&this.JC.pop()},kb:function(){var e={},t=-1,r=Thrift.Type.STOP;for(var i in this.JC[this.JC.length-1])if(null!==i){t=parseInt(i,10),this.zb.push(this.JC.length);var n=this.JC[this.JC.length-1][t];delete this.JC[this.JC.length-1][t],this.JC.push(n);break}if(-1!=t)for(var s in this.JC[this.JC.length-1])null!==Thrift.CC._C[s]&&(r=Thrift.CC._C[s],this.JC[this.JC.length-1]=this.JC[this.JC.length-1][s]);return e.fname="",e.ftype=r,e.fid=t,e},Ub:function(){for(var e=this.zb.pop();this.JC.length>e;)this.JC.pop()},i_:function(){var e=this.JC.pop(),t=e.shift();t instanceof Array&&(this.JC.push(e),e=t,t=e.shift());var r={};return r.n_=Thrift.CC._C[t],r.s_=Thrift.CC._C[e.shift()],r.size=e.shift(),this.zb.push(this.JC.length),this.JC.push(e.shift()),r},o_:function(){this.Ub()},a_:function(){var e=this.JC[this.JC.length-1],t={};return t.h_=Thrift.CC._C[e.shift()],t.size=e.shift(),this.zb.push(this.JC.length),this.JC.push(e),t},c_:function(){this.Ub()},u_:function(e,t){return this.a_(e,t)},l_:function(){return this.c_()},p_:function(){var e=this.Fb();return null!==e&&"1"==e.value?e.value=!0:e.value=!1,e},d_:function(){return this.Fb()},f_:function(){return this.Fb()},Fb:function(e){void 0===e&&(e=this.JC[this.JC.length-1]);var t={};if(e instanceof Array)0===e.length?t.value=void 0:t.value=e.shift();else if(e instanceof Object){for(var r in e)if(null!==r){this.JC.push(e[r]),delete e[r],t.value=r;break}}else t.value=e,this.JC.pop();return t},g_:function(){return this.Fb()},E_:function(){return this.Fb()},Lb:function(){return this.Fb()},v_:function(){return this.Lb()},Mb:function(e){var t,r;switch(e){case Thrift.Type.STOP:return null;case Thrift.Type.BOOL:return this.p_();case Thrift.Type.BYTE:return this.d_();case Thrift.Type.I16:return this.f_();case Thrift.Type.I32:return this.Fb();case Thrift.Type.I64:return this.g_();case Thrift.Type.DOUBLE:return this.E_();case Thrift.Type.STRING:return this.Lb();case Thrift.Type.STRUCT:for(this.r_();;){if(t=this.kb(),t.ftype==Thrift.Type.STOP)break;this.Mb(t.ftype),this.Ub()}return this.Bb(),null;case Thrift.Type.MAP:for(t=this.i_(),r=0;r<t.size;r++)r>0&&this.JC.length>this.zb[this.zb.length-1]+1&&this.JC.pop(),this.Mb(t.n_),this.Mb(t.s_);return this.o_(),null;case Thrift.Type.SET:for(t=this.u_(),r=0;r<t.size;r++)this.Mb(t.h_);return this.l_(),null;case Thrift.Type.LIST:for(t=this.a_(),r=0;r<t.size;r++)this.Mb(t.h_);return this.c_(),null}}},Thrift.y_=function(e,t,r,i){Thrift.CC.call(this,t,r,i),this.T_=e},Thrift.vb(Thrift.y_,Thrift.CC,"multiplexProtocol"),Thrift.y_.prototype.AC=function(e,t,r){t===Thrift.gb.CALL||t===Thrift.gb.ONEWAY?Thrift.CC.prototype.AC.call(this,this.T_+":"+e,t,r):Thrift.CC.prototype.AC.call(this,e,t,r)},Thrift.m_=function(){this.I_=0},Thrift.m_.prototype.S_=function(e,t,r){t.ql&&(t=t.ql);var i=this;return t.prototype.R_=function(){return i.I_+=1,i.I_},new t(new Thrift.y_(e,r))},module.i=Thrift},function(e,t,r){"use strict";var i=r(9),n=r(28),s=n.cg,o=function(){function e(e,t,r,i,n,o,a,h){this.contextId=h,this.url=e,this.w_=r,this.b_=t,this.C_=i,this.duration=n,this.bitrate=o,this.__=a;var c=(this.contextId?this.contextId:this.url).replace(/http(s)?:\/\//,""),u=s.oT(c).toString(s.Uy.By);this.P_=u+"-"+this.C_+"-"+this.bitrate}return e.prototype.Xf=function(){return this.b_},e.prototype.A_=function(){return this.C_},e.prototype.getDuration=function(){return this.duration},e.prototype.getBitrate=function(){return this.bitrate},e.prototype.ig=function(){return this.__},e.prototype.O_=function(){return this.w_},e.prototype.Zf=function(){return this.P_},e.prototype.tg=function(){return this.url},e.prototype.toString=function(){return i.vc[this.Xf()]+"-"+this.Zf()},e}();t.N_=o},function(e,t,r){(function(e){var n,s;/**
 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
 * This version of ByteBuffer.js uses an ArrayBuffer as its backing buffer which is accessed through a DataView and is
 * compatible with modern browsers.
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ByteBuffer.js for details
 */
!function(o){"use strict";function a(e){function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function r(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+a.apply(String,e);e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}var n=function(e,t,r){if(void 0===e&&(e=n.D_),void 0===t&&(t=n.k_),void 0===r&&(r=n.L_),!r){if((e|=0)<0)throw RangeError("Illegal capacity");t=!!t,r=!!r}this.buffer=0===e?o:new ArrayBuffer(e),this.view=0===e?null:new DataView(this.buffer),this.offset=0,this.M_=-1,this.F_=e,this.U_=void 0!==t&&!!t,this.B_=!!r};n.VERSION="3.5.5",n.H_=!0,n.x_=!1,n.D_=16,n.k_=n.x_,n.L_=!1,n.q_=e||null;var s=n.prototype,o=new ArrayBuffer(0),a=String.fromCharCode;n.G_=function(e,t,r){return new n(e,t,r)},n.concat=function(e,t,r,i){"boolean"!=typeof t&&"string"==typeof t||(i=r,r=t,t=void 0);for(var s,o=0,a=0,h=e.length;a<h;++a)n.V_(e[a])||(e[a]=n.wrap(e[a],t)),(s=e[a].F_-e[a].offset)>0&&(o+=s);if(0===o)return new n(0,r,i);var c,u=new n(o,r,i),l=new Uint8Array(u.buffer);for(a=0;a<h;)c=e[a++],(s=c.F_-c.offset)<=0||(l.set(new Uint8Array(c.buffer).subarray(c.offset,c.F_),u.offset),u.offset+=s);return u.F_=u.offset,u.offset=0,u},n.V_=function(e){return!0===(e&&e instanceof n)},n.type=function(){return ArrayBuffer},n.wrap=function(e,t,r,o){if("string"!=typeof t&&(o=r,r=t,t=void 0),"string"==typeof e)switch(void 0===t&&(t="utf8"),t){case"base64":return n.j_(e,r);case"hex":return n.Q_(e,r);case"binary":return n.K_(e,r);case"utf8":return n.Y_(e,r);case"debug":return n.W_(e,r);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var a;if(n.V_(e))return a=s.clone.call(e),a.M_=-1,a;if(e instanceof Uint8Array)a=new n(0,r,o),e.length>0&&(a.buffer=e.buffer,a.offset=e.byteOffset,a.F_=e.byteOffset+e.length,a.view=e.length>0?new DataView(e.buffer):null);else if(e instanceof ArrayBuffer)a=new n(0,r,o),e.byteLength>0&&(a.buffer=e,a.offset=0,a.F_=e.byteLength,a.view=e.byteLength>0?new DataView(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");for(a=new n(e.length,r,o),a.F_=e.length,i=0;i<e.length;++i)a.view.setUint8(i,e[i])}return a},s.z_=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=1,this.view.setInt8(t,e),r&&(this.offset+=1),this},s.jC=s.z_,s.J_=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getInt8(e);return t&&(this.offset+=1),r},s.d_=s.J_,s.X_=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=1,this.view.setUint8(t,e),r&&(this.offset+=1),this},s.Z_=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getUint8(e);return t&&(this.offset+=1),r},s.eP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=2,this.view.setInt16(t,e,this.U_),r&&(this.offset+=2),this},s.tP=s.eP,s.rP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getInt16(e,this.U_);return t&&(this.offset+=2),r},s.iP=s.rP,s.nP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=2,this.view.setUint16(t,e,this.U_),r&&(this.offset+=2),this},s.sP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getUint16(e,this.U_);return t&&(this.offset+=2),r},s.oP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setInt32(t,e,this.U_),r&&(this.offset+=4),this},s.Bg=s.oP,s.aP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getInt32(e,this.U_);return t&&(this.offset+=4),r},s.Qg=s.aP,s.hP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setUint32(t,e,this.U_),r&&(this.offset+=4),this},s.cP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getUint32(e,this.U_);return t&&(this.offset+=4),r},e&&(s.uP=function(t,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"==typeof t)t=e.DE(t);else if("string"==typeof t)t=e.kE(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.DE(t):"string"==typeof t&&(t=e.kE(t)),r+=8;var n=this.buffer.byteLength;return r>n&&this.resize((n*=2)>r?n:r),r-=8,this.U_?(this.view.setInt32(r,t.low,!0),this.view.setInt32(r+4,t.high,!0)):(this.view.setInt32(r,t.high,!1),this.view.setInt32(r+4,t.low,!1)),i&&(this.offset+=8),this},s.lP=s.uP,s.pP=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.U_?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!1):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!1);return r&&(this.offset+=8),i},s.dP=s.pP,s.fP=function(t,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"==typeof t)t=e.DE(t);else if("string"==typeof t)t=e.kE(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.DE(t):"string"==typeof t&&(t=e.kE(t)),r+=8;var n=this.buffer.byteLength;return r>n&&this.resize((n*=2)>r?n:r),r-=8,this.U_?(this.view.setInt32(r,t.low,!0),this.view.setInt32(r+4,t.high,!0)):(this.view.setInt32(r,t.high,!1),this.view.setInt32(r+4,t.low,!1)),i&&(this.offset+=8),this},s.gP=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.U_?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!0):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!0);return r&&(this.offset+=8),i}),s.EP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setFloat32(t,e,this.U_),r&&(this.offset+=4),this},s.vP=s.EP,s.yP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getFloat32(e,this.U_);return t&&(this.offset+=4),r},s.TP=s.yP,s.mP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=8,this.view.setFloat64(t,e,this.U_),r&&(this.offset+=8),this},s.YC=s.mP,s.IP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var r=this.view.getFloat64(e,this.U_);return t&&(this.offset+=8),r},s.E_=s.IP,n.SP=5,n.RP=function(e){return e>>>=0,e<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},n.wP=function(e){return((e|=0)<<1^e>>31)>>>0},n.bP=function(e){return e>>>1^-(1&e)|0},s.CP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var i,s=n.RP(e);t+=s;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=s,this.view.setUint8(t,i=128|e),e>>>=0,e>=128?(i=e>>7|128,this.view.setUint8(t+1,i),e>=16384?(i=e>>14|128,this.view.setUint8(t+2,i),e>=1<<21?(i=e>>21|128,this.view.setUint8(t+3,i),e>=1<<28?(this.view.setUint8(t+4,e>>28&15),s=5):(this.view.setUint8(t+3,127&i),s=4)):(this.view.setUint8(t+2,127&i),s=3)):(this.view.setUint8(t+1,127&i),s=2)):(this.view.setUint8(t,127&i),s=1),r?(this.offset+=s,this):s},s._P=function(e,t){return this.CP(n.wP(e),t)},s.PP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,i,n=0,s=0;do{if(i=e+n,!this.B_&&i>this.F_){var o=Error("Truncated");throw o.AP=!0,o}r=this.view.getUint8(i),n<5&&(s|=(127&r)<<7*n>>>0),++n}while(128==(128&r));return s|=0,t?(this.offset+=n,s):{value:s,length:n}},s.OP=function(e){var t=this.PP(e);return"object"==typeof t?t.value=n.bP(t.value):t=n.bP(t),t},e&&(n.NP=10,n.DP=function(t){"number"==typeof t?t=e.DE(t):"string"==typeof t&&(t=e.kE(t));var r=t.kP()>>>0,i=t.LP(28).kP()>>>0,n=t.LP(56).kP()>>>0;return 0==n?0==i?r<16384?r<128?1:2:r<1<<21?3:4:i<16384?i<128?5:6:i<1<<21?7:8:n<128?9:10},n.MP=function(t){return"number"==typeof t?t=e.DE(t,!1):"string"==typeof t?t=e.kE(t,!1):!1!==t.FP&&(t=t.UP()),t.shiftLeft(1).pT(t.HP(63)).BP()},n.xP=function(t){return"number"==typeof t?t=e.DE(t,!1):"string"==typeof t?t=e.kE(t,!1):!1!==t.FP&&(t=t.UP()),t.LP(1).pT(t.qP(e.ONE).UP().qE()).UP()},s.GP=function(t,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"==typeof t)t=e.DE(t);else if("string"==typeof t)t=e.kE(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.DE(t,!1):"string"==typeof t?t=e.kE(t,!1):!1!==t.FP&&(t=t.UP());var s=n.DP(t),o=t.kP()>>>0,a=t.LP(28).kP()>>>0,h=t.LP(56).kP()>>>0;r+=s;var c=this.buffer.byteLength;switch(r>c&&this.resize((c*=2)>r?c:r),r-=s,s){case 10:this.view.setUint8(r+9,h>>>7&1);case 9:this.view.setUint8(r+8,9!==s?128|h:127&h);case 8:this.view.setUint8(r+7,8!==s?a>>>21|128:a>>>21&127);case 7:this.view.setUint8(r+6,7!==s?a>>>14|128:a>>>14&127);case 6:this.view.setUint8(r+5,6!==s?a>>>7|128:a>>>7&127);case 5:this.view.setUint8(r+4,5!==s?128|a:127&a);case 4:this.view.setUint8(r+3,4!==s?o>>>21|128:o>>>21&127);case 3:this.view.setUint8(r+2,3!==s?o>>>14|128:o>>>14&127);case 2:this.view.setUint8(r+1,2!==s?o>>>7|128:o>>>7&127);case 1:this.view.setUint8(r,1!==s?128|o:127&o)}return i?(this.offset+=s,this):s},s.VP=function(e,t){return this.GP(n.MP(e),t)},s.jP=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=t,n=0,s=0,o=0,a=0;if(a=this.view.getUint8(t++),n=127&a,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<7,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<14,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<21,128&a&&(a=this.view.getUint8(t++),s=127&a,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<7,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<14,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<21,128&a&&(a=this.view.getUint8(t++),o=127&a,128&a&&(a=this.view.getUint8(t++),o|=(127&a)<<7,128&a))))))))))throw Error("Buffer overrun");var h=e.qI(n|s<<28,s>>>4|o<<24,!1);return r?(this.offset=t,h):{value:h,length:t-i}},s.QP=function(t){var r=this.jP(t);return r&&r.value instanceof e?r.value=n.xP(r.value):r=n.xP(r),r}),s.Hg=function(e,r){var i=void 0===r;i&&(r=this.offset);var n,s=e.length;if(!this.B_){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(n=0;n<s;++n)if(0===e.charCodeAt(n))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}s=c.KP(t(e))[1],r+=s+1;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=s+1,c.YP(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),this.view.setUint8(r++,0),i?(this.offset=r,this):s},s.Yg=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,n=e,s=-1;return c.WP(function(){if(0===s)return null;if(e>=this.F_)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.F_);return 0===(s=this.view.getUint8(e++))?null:s}.bind(this),i=r(),!0),t?(this.offset=e,i()):{string:i(),length:e-n}},s.zP=function(e,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var n,s=r;n=c.KP(t(e),this.B_)[1],r+=4+n;var o=this.buffer.byteLength;if(r>o&&this.resize((o*=2)>r?o:r),r-=4+n,this.view.setUint32(r,n,this.U_),r+=4,c.YP(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),r!==s+4+n)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+4+n));return i?(this.offset=r,this):r-s},s.JP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i,n=0,s=e;n=this.view.getUint32(e,this.U_),e+=4;var o,a=e+n;return c.WP(function(){return e<a?this.view.getUint8(e++):null}.bind(this),o=r(),this.B_),i=o(),t?(this.offset=e,i):{string:i,length:e-s}},n.XP="c",n.ZP="b",s.$P=function(e,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var n,s=r;n=c.KP(t(e))[1],r+=n;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=n,c.YP(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),i?(this.offset=r,this):r-s},s.qb=s.$P,n.eA=function(e){return c.KP(t(e))[0]},n.tA=function(e){return c.KP(t(e))[1]},s.rA=function(e,t,i){"number"==typeof t&&(i=t,t=void 0);var s=void 0===i;if(s&&(i=this.offset),void 0===t&&(t=n.XP),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,a=0,h=i;if(t===n.XP){if(o=r(),c.iA(function(){return a<e&&i<this.F_?this.view.getUint8(i++):null}.bind(this),function(e){++a,c.nA(e,o)}.bind(this)),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return s?(this.offset=i,o()):{string:o(),length:i-h}}if(t===n.ZP){if(!this.B_){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+e+") <= "+this.buffer.byteLength)}var u=i+e;if(c.WP(function(){return i<u?this.view.getUint8(i++):null}.bind(this),o=r(),this.B_),i!==u)throw RangeError("Illegal range: Truncated data, "+i+" == "+u);return s?(this.offset=i,o()):{string:o(),length:i-h}}throw TypeError("Unsupported metrics: "+t)},s.Lb=s.rA,s.sA=function(e,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var s,o,a=r;s=c.KP(t(e),this.B_)[1],o=n.RP(s),r+=o+s;var h=this.buffer.byteLength;if(r>h&&this.resize((h*=2)>r?h:r),r-=o+s,r+=this.CP(s,r),c.YP(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),r!==a+s+o)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+s+o));return i?(this.offset=r,this):r-a},s.oA=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,n=this.PP(e),s=e;e+=n.length,n=n.value;var o=e+n,a=r();return c.WP(function(){return e<o?this.view.getUint8(e++):null}.bind(this),a,this.B_),i=a(),t?(this.offset=e,i):{string:i,length:e-s}},s.append=function(e,t,r){"number"!=typeof t&&"string"==typeof t||(r=t,t=void 0);var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof n||(e=n.wrap(e,t));var s=e.F_-e.offset;if(s<=0)return this;r+=s;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=s,new Uint8Array(this.buffer,r).set(new Uint8Array(e.buffer).subarray(e.offset,e.F_)),e.offset+=s,i&&(this.offset+=s),this},s.aA=function(e,t){return e.append(this,t),this},s.assert=function(e){return this.B_=!e,this},s.hA=function(){return this.buffer.byteLength},s.clear=function(){return this.offset=0,this.F_=this.buffer.byteLength,this.M_=-1,this},s.clone=function(e){var t=new n(0,this.U_,this.B_);if(e){var r=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(r).set(this.buffer),t.buffer=r,t.view=new DataView(r)}else t.buffer=this.buffer,t.view=this.view;return t.offset=this.offset,t.M_=this.M_,t.F_=this.F_,t},s.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var r=t-e;if(0===r)return this.buffer=o,this.view=null,this.M_>=0&&(this.M_-=e),this.offset=0,this.F_=0,this;var i=new ArrayBuffer(r);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(e,t)),this.buffer=i,this.view=new DataView(i),this.M_>=0&&(this.M_-=e),this.offset=0,this.F_=r,this},s.cA=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return new n(0,this.U_,this.B_);var r=t-e,i=new n(r,this.U_,this.B_);return i.offset=0,i.F_=r,i.M_>=0&&(i.M_-=e),this.jE(i,0,e,t),i},s.jE=function(e,t,r,i){var s,o;if(!this.B_&&!n.V_(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(o=void 0===t)?e.offset:0|t,r=(s=void 0===r)?this.offset:0|r,i=void 0===i?this.F_:0|i,t<0||t>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.byteLength);if(r<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var a=i-r;return 0===a?e:(e.uA(t+a),new Uint8Array(e.buffer).set(new Uint8Array(this.buffer).subarray(r,i),t),s&&(this.offset+=a),o&&(e.offset+=a),this)},s.uA=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},s.fill=function(e,t,r){var i=void 0===t;if(i&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===r&&(r=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(t>=r)return this;for(;t<r;)this.view.setUint8(t++,e);return i&&(this.offset=t),this},s.xg=function(){return this.F_=this.offset,this.offset=0,this},s.mark=function(e){if(e=void 0===e?this.offset:e,!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.M_=e,this},s.order=function(e){if(!this.B_&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.U_=!!e,this},s.lA=function(e){return this.U_=void 0===e||!!e,this},s.pA=function(e){return this.U_=void 0!==e&&!e,this},s.dA=function(e,t,r){"number"!=typeof t&&"string"==typeof t||(r=t,t=void 0);var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof n||(e=n.wrap(e,t));var s=e.F_-e.offset;if(s<=0)return this;var o,a=s-r;if(a>0){var h=new ArrayBuffer(this.buffer.byteLength+a);o=new Uint8Array(h),o.set(new Uint8Array(this.buffer).subarray(r,this.buffer.byteLength),s),this.buffer=h,this.view=new DataView(h),this.offset+=a,this.M_>=0&&(this.M_+=a),this.F_+=a,r+=a}else o=new Uint8Array(this.buffer);return o.set(new Uint8Array(e.buffer).subarray(e.offset,e.F_),r-s),e.offset=e.F_,i&&(this.offset-=s),this},s.fA=function(e,t){return e.dA(this,t),this},s.gA=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.EA(!0))},s.vA=function(){return this.F_-this.offset},s.reset=function(){return this.M_>=0?(this.offset=this.M_,this.M_=-1):this.offset=0,this},s.resize=function(e){if(!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t,this.view=new DataView(t)}return this},s.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(e,t)),this.view=new DataView(this.buffer),this)},s.Mb=function(e){if(!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.B_&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},s.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r=this.clone();return r.offset=e,r.F_=t,r},s.yA=function(e){var t=this.offset,r=this.F_;if(t>r){var i=t;t=r,r=i}if(!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal limit: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(!e&&0===t&&r===this.buffer.byteLength)return this.buffer;if(t===r)return o;var n=new ArrayBuffer(r-t);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t,r),0),n},s.tc=s.yA,s.toString=function(e,t,r){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.M_+",limit="+this.F_+",capacity="+this.hA()+")";switch("number"==typeof e&&(e="utf8",t=e,r=t),e){case"utf8":return this.TA(t,r);case"base64":return this.mA(t,r);case"hex":return this.IA(t,r);case"binary":return this.SA(t,r);case"debug":return this.EA();case"columns":return this.RA();default:throw Error("Unsupported encoding: "+e)}};var h=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[],i=0,n=t.length;i<n;++i)r[t[i]]=i;return e.encode=function(e,r){for(var i,n;null!==(i=e());)r(t[i>>2&63]),n=(3&i)<<4,null!==(i=e())?(n|=i>>4&15,r(t[63&(n|i>>4&15)]),n=(15&i)<<2,null!==(i=e())?(r(t[63&(n|i>>6&3)]),r(t[63&i])):(r(t[63&n]),r(61))):(r(t[63&n]),r(61),r(61))},e.decode=function(e,t){function i(e){throw Error("Illegal character code: "+e)}for(var n,s,o;null!==(n=e());)if(s=r[n],void 0===s&&i(n),null!==(n=e())&&(o=r[n],void 0===o&&i(n),t(s<<2>>>0|(48&o)>>4),null!==(n=e()))){if(void 0===(s=r[n])){if(61===n)break;i(n)}if(t((15&o)<<4>>>0|(60&s)>>2),null!==(n=e())){if(void 0===(o=r[n])){if(61===n)break;i(n)}t((3&s)<<6>>>0|o)}}},e.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)},e}();s.mA=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;return h.encode(function(){return e<t?this.view.getUint8(e++):null}.bind(this),i=r()),i()},n.j_=function(e,r,i){if(!i){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%4!=0)throw TypeError("Illegal str: Length not a multiple of 4")}var s=new n(e.length/4*3,r,i),o=0;return h.decode(t(e),function(e){s.view.setUint8(o++,e)}),s.F_=o,s},n.btoa=function(e){return n.K_(e).mA()},n.atob=function(e){return n.j_(e).SA()},s.SA=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.F_:t,!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return"";for(var r=[],i=[];e<t;)r.push(this.view.getUint8(e++)),r.length>=1024&&(i.push(String.fromCharCode.apply(String,r)),r=[]);return i.join("")+String.fromCharCode.apply(String,r)},n.K_=function(e,t,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");for(var i,s=0,o=e.length,a=new n(o,t,r);s<o;){if(i=e.charCodeAt(s),!r&&i>255)throw RangeError("Illegal charCode at "+s+": 0 <= "+i+" <= 255");a.view.setUint8(s++,i)}return a.F_=o,a},s.EA=function(e){for(var t,r=-1,i=this.buffer.byteLength,n="",s="",o="";r<i;){if(-1!==r&&(t=this.view.getUint8(r),n+=t<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(s+=t>32&&t<127?String.fromCharCode(t):".")),++r,e&&r>0&&r%16==0&&r!==i){for(;n.length<51;)n+=" ";o+=n+s+"\n",n=s=""}r===this.offset&&r===this.F_?n+=r===this.M_?"!":"|":r===this.offset?n+=r===this.M_?"[":"<":r===this.F_?n+=r===this.M_?"]":">":n+=r===this.M_?"'":e||0!==r&&r!==i?" ":""}if(e&&" "!==n){for(;n.length<51;)n+=" ";o+=n+s+"\n"}return e?o:n},n.W_=function(e,t,r){for(var i,s,o=e.length,a=new n((o+1)/3|0,t,r),h=0,c=0,u=!1,l=!1,p=!1,d=!1,f=!1;h<o;){switch(i=e.charAt(h++)){case"!":if(!r){if(l||p||d){f=!0;break}l=p=d=!0}a.offset=a.M_=a.F_=c,u=!1;break;case"|":if(!r){if(l||d){f=!0;break}l=d=!0}a.offset=a.F_=c,u=!1;break;case"[":if(!r){if(l||p){f=!0;break}l=p=!0}a.offset=a.M_=c,u=!1;break;case"<":if(!r){if(l){f=!0;break}l=!0}a.offset=c,u=!1;break;case"]":if(!r){if(d||p){f=!0;break}d=p=!0}a.F_=a.M_=c,u=!1;break;case">":if(!r){if(d){f=!0;break}d=!0}a.F_=c,u=!1;break;case"'":if(!r){if(p){f=!0;break}p=!0}a.M_=c,u=!1;break;case" ":u=!1;break;default:if(!r&&u){f=!0;break}if(s=parseInt(i+e.charAt(h++),16),!r&&(isNaN(s)||s<0||s>255))throw TypeError("Illegal str: Not a debug encoded string");a.view.setUint8(c++,s),u=!0}if(f)throw TypeError("Illegal str: Invalid symbol at "+h)}if(!r){if(!l||!d)throw TypeError("Illegal str: Missing offset or limit");if(c<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+c+" < "+o)}return a},s.IA=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.F_:t,!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var r,i=new Array(t-e);e<t;)r=this.view.getUint8(e++),r<16?i.push("0",r.toString(16)):i.push(r.toString(16));return i.join("")},n.Q_=function(e,t,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,s=e.length,o=new n(s/2|0,t),a=0,h=0;a<s;a+=2){if(i=parseInt(e.substring(a,a+2),16),!r&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");o.view.setUint8(h++,i)}return o.F_=h,o};var c=function(){var e={};return e.wA=1114111,e.bA=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<128?t(127&r):r<2048?(t(r>>6&31|192),t(63&r|128)):r<65536?(t(r>>12&15|224),t(r>>6&63|128),t(63&r|128)):(t(r>>18&7|240),t(r>>12&63|128),t(r>>6&63|128),t(63&r|128)),r=null},e.iA=function(e,t){for(var r,i,n,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(r=e());)if(0==(128&r))t(r);else if(192==(224&r))null===(i=e())&&o([r,i]),t((31&r)<<6|63&i);else if(224==(240&r))(null===(i=e())||null===(n=e()))&&o([r,i,n]),t((15&r)<<12|(63&i)<<6|63&n);else{if(240!=(248&r))throw RangeError("Illegal starting byte: "+r);(null===(i=e())||null===(n=e())||null===(s=e()))&&o([r,i,n,s]),t((7&r)<<18|(63&i)<<12|(63&n)<<6|63&s)}},e.CA=function(e,t){for(var r,i=null;;){if(null===(r=null!==i?i:e()))break;r>=55296&&r<=57343&&null!==(i=e())&&i>=56320&&i<=57343?(t(1024*(r-55296)+i-56320+65536),i=null):t(r)}null!==i&&t(i)},e.nA=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<=65535?t(r):(r-=65536,t(55296+(r>>10)),t(r%1024+56320)),r=null},e.YP=function(t,r){e.CA(t,function(t){e.bA(t,r)})},e.WP=function(t,r){e.iA(t,function(t){e.nA(t,r)})},e._A=function(e){return e<128?1:e<2048?2:e<65536?3:4},e.PA=function(t){for(var r,i=0;null!==(r=t());)i+=e._A(r);return i},e.KP=function(t){var r=0,i=0;return e.CA(t,function(t){++r,i+=e._A(t)}),[r,i]},e}();return s.TA=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;try{c.WP(function(){return e<t?this.view.getUint8(e++):null}.bind(this),i=r())}catch(r){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return i()},n.Y_=function(e,r,i){if(!i&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var s=new n(c.KP(t(e),!0)[1],r,i),o=0;return c.YP(t(e),function(e){s.view.setUint8(o++,e)}),s.F_=o,s},n}"object"==typeof e&&e&&"object"==typeof t&&t?e.i=function(){var e;try{e=r(93)}catch(e){}return a(e)}():(n=[r(94)],void 0!==(s=function(e){return a(e)}.apply(t,n))&&(e.i=s))}()}).call(t,r(63)(e))},function(e,t,r){"use strict";var i=r(37);e.i=Object,Object.empty=Object.freeze(Object.create(null)),Object.au=function(e){return Object(e)===e},Object.AA=function(e){return e&&"function"==typeof e.valueOf&&(e=e.valueOf()),e};var n=new i;Object.hash=function(e){return e&&"function"==typeof e.hash?""+e.hash():Object(e)===e?(n.has(e)||n.set(e,Math.random().toString(36).slice(2)),n.get(e)):""+e};var s=Object.prototype.hasOwnProperty;Object.OA=function(e,t){return s.call(e,t)},Object.has=function(e,t){if("object"!=typeof e)throw new Error("Object.has can't accept non-object: "+typeof e);if(e&&"function"==typeof e.has)return e.has(t);if("string"==typeof t)return t in e&&e[t]!==Object.prototype[t];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(e,t,r){if("object"!=typeof e)throw new Error("Object.get can't accept non-object: "+typeof e);return e&&"function"==typeof e.get?e.get(t,r):Object.has(e,t)?e[t]:r},Object.set=function(e,t,r){e&&"function"==typeof e.set?e.set(t,r):e[t]=r},Object.addEach=function(e,t){if(t)if("function"!=typeof t.forEach||t.hasOwnProperty("forEach"))if("number"==typeof t.length)for(var r=0;r<t.length;r++)e[r]=t[r];else Object.keys(t).forEach(function(r){e[r]=t[r]});else!0===t.isMap?t.forEach(function(t,r){e[r]=t}):t.forEach(function(t){e[t[0]]=t[1]});else;return e},Object.forEach=function(e,t,r){for(var i,n=Object.keys(e),s=0;i=n[s];s++)t.call(r,e[i],i,e)},Object.map=function(e,t,r){for(var i,n=Object.keys(e),s=0,o=[];i=n[s];s++)o.push(t.call(r,e[i],i,e));return o},Object.values=function(e){return Object.map(e,Function.identity)},Object.concat=function(){for(var e={},t=0;t<arguments.length;t++)Object.addEach(e,arguments[t]);return e},Object.from=Object.concat,Object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t},Object.cs=function(e,t,r,n){if(r=r||Object.cs,e=Object.AA(e),t=Object.AA(t),e===t)return!0;if(Object.au(e)){if(n=n||new i,n.has(e))return!0;n.set(e,!0)}if(Object.au(e)&&"function"==typeof e.cs)return e.cs(t,r,n);if(Object.au(t)&&"function"==typeof t.cs)return t.cs(e,r,n);if(Object.au(e)&&Object.au(t)&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){for(var s in e)if(!r(e[s],t[s],r,n))return!1;for(var s in t)if(!(s in e&&r(t[s],e[s],r,n)))return!1;return!0}return e!==e&&t!==t||(!e||!t)&&e===t},Object.Oc=function(e,t){if(e=Object.AA(e),t=Object.AA(t),e===t)return 0;var r=typeof e,i=typeof t;return"number"===r&&"number"===i?e-t:"string"===r&&"string"===i?e<t?-1/0:1/0:e&&"function"==typeof e.Oc?e.Oc(t):t&&"function"==typeof t.Oc?-t.Oc(e):0},Object.clone=function(e,t,r){if(e=Object.AA(e),r=r||new i,void 0===t)t=1/0;else if(0===t)return e;if(Object.au(e)){if(!r.has(e))if(e&&"function"==typeof e.clone)r.set(e,e.clone(t,r));else{var n=Object.getPrototypeOf(e);if(null!==n&&n!==Object.prototype)throw new Error("Can't clone "+e);var s=Object.create(n);r.set(e,s);for(var o in e)s[o]=Object.clone(e[o],t-1,r)}return r.get(e)}return e},Object.clear=function(e){if(e&&"function"==typeof e.clear)e.clear();else for(var t=Object.keys(e),r=t.length;r;)r--,delete e[t[r]];return e}},function(e,t){!function(){"use strict";function t(e){e.NA&&e.NA(t)}function r(e){return!(e.substr(0,d.length)==d&&"___"===e.substr(e.length-3))}function i(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[f];if(t&&t.key===e)return t;if(p(e)){t={key:e};try{return l(e,f,{value:t,Ah:!1,p:!1,l:!1}),t}catch(e){return}}}function n(e){return e.prototype=null,Object.freeze(e)}function s(){y||"undefined"==typeof console||(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.DA=t);var o=!1;if("function"==typeof WeakMap){var a=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var h=new a,c=Object.freeze({});if(h.set(c,1),1===h.get(c))return void(e.i=WeakMap);o=!0}}var u=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),l=Object.defineProperty,p=Object.isExtensible,d="weakmap:",f=d+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var g=new ArrayBuffer(25),E=new Uint8Array(g);crypto.getRandomValues(E),f=d+"rand:"+Array.prototype.map.call(E,function(e){return(e%36).toString(36)}).join("")+"___"}if(l(Object,"getOwnPropertyNames",{value:function(e){return u(e).filter(r)}}),"getPropertyNames"in Object){var v=Object.kA;l(Object,"getPropertyNames",{value:function(e){return v(e).filter(r)}})}!function(){var e=Object.freeze;l(Object,"freeze",{value:function(t){return i(t),e(t)}});var t=Object.seal;l(Object,"seal",{value:function(e){return i(e),t(e)}});var r=Object.preventExtensions;l(Object,"preventExtensions",{value:function(e){return i(e),r(e)}})}();var y=!1,T=0,m=function(){function e(e,t){var r,n=i(e);return n?c in n?n[c]:t:(r=a.indexOf(e),r>=0?h[r]:t)}function t(e){var t=i(e);return t?c in t:a.indexOf(e)>=0}function r(e,t){var r,n=i(e);return n?n[c]=t:(r=a.indexOf(e),r>=0?h[r]=t:(r=a.length,h[r]=t,a[r]=e)),this}function o(e){var t,r,n=i(e);return n?c in n&&delete n[c]:!((t=a.indexOf(e))<0)&&(r=a.length-1,a[t]=void 0,h[t]=h[r],a[t]=a[r],a.length=r,h.length=r,!0)}this instanceof m||s();var a=[],h=[],c=T++;return Object.create(m.prototype,{LA:{value:n(e)},MA:{value:n(t)},FA:{value:n(r)},UA:{value:n(o)}})};m.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.LA(e,t)},Ah:!0,l:!0},has:{value:function(e){return this.MA(e)},Ah:!0,l:!0},set:{value:function(e,t){return this.FA(e,t)},Ah:!0,l:!0},delete:{value:function(e){return this.UA(e)},Ah:!0,l:!0}}),"function"==typeof a?function(){function r(){function e(e,t){return u?c.has(e)?c.get(e):u.LA(e,t):c.get(e,t)}function r(e){return c.has(e)||!!u&&u.MA(e)}function i(e){var t=!!c.delete(e);return u?u.UA(e)||t:t}this instanceof m||s();var h,c=new a,u=void 0,l=!1;return h=o?function(e,t){return c.set(e,t),c.has(e)||(u||(u=new m),u.set(e,t)),this}:function(e,t){if(l)try{c.set(e,t)}catch(r){u||(u=new m),u.FA(e,t)}else c.set(e,t);return this},Object.create(m.prototype,{LA:{value:n(e)},MA:{value:n(r)},FA:{value:n(h)},UA:{value:n(i)},NA:{value:n(function(e){if(e!==t)throw new Error("bogus call to permitHostObjects___");l=!0})}})}o&&"undefined"!=typeof Proxy&&(Proxy=void 0),r.prototype=m.prototype,e.i=r,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,p:!1,l:!0,Ah:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.i=m)}}()},function(e,t,r){"use strict";function i(){throw new Error("Can't construct. RangeChanges is a mixin.")}var n=r(37),s=r(51),o=new n;e.i=i,i.prototype.BA=function(){return o.has(this)||o.set(this,s()),o.get(this)},i.prototype.HA=function(e){var t=this.BA();return e=e||"",t.has(e)||t.set(e,{isActive:!1,Wc:[],Yc:[]}),t.get(e)},i.prototype.xA=function(e,t,r){!this.Zc&&this.Xc&&this.Xc();var i,n=this.HA(t);i=r?n.Yc:n.Wc,i.push(e),Object.defineProperty(this,"dispatchesRangeChanges",{value:!0,Ah:!0,l:!0,p:!1});var s=this;return function(){s&&(s.qA(e,t,r),s=null)}},i.prototype.qA=function(e,t,r){var i,n=this.HA(t);i=r?n.Yc:n.Wc;var s=i.lastIndexOf(e);if(-1===s)throw new Error("Can't remove range change listener: does not exist: token "+JSON.stringify(t));i.splice(s,1)},i.prototype.GA=function(e,t,r,i){var n="Range"+(i?"WillChange":"Change");this.BA().forEach(function(s,o){if(!s.isActive){s.isActive=!0;var a;a=i?s.Yc:s.Wc;var h="handle"+(o.slice(0,1).toUpperCase()+o.slice(1))+n;try{a.slice().forEach(function(n){if(!(a.indexOf(n)<0))if(n[h])n[h](e,t,r,this,i);else{if(!n.call)throw new Error("Handler "+n+" has no method "+h+" and is not callable");n.call(this,e,t,r,this,i)}},this)}finally{s.isActive=!1}}},this)},i.prototype.VA=function(e,t){return this.xA(e,t,!0)},i.prototype.jA=function(e,t){return this.qA(e,t,!0)},i.prototype.QA=function(e,t,r){return this.GA(e,t,r,!0)}},function(e,t){function r(){throw new Error("Can't construct. GenericSet is a mixin.")}e.i=r,r.prototype.KA=!0,r.prototype.YA=function(e){var t=this.Es(this);return t.addEach(e),t},r.prototype.WA=function(e){return this.Es(this.filter(function(t){return e.has(t)}))},r.prototype.zA=function(e){var t=this.Es(this);return t._c(e),t},r.prototype.JA=function(e){var t=this.YA(e),r=this.WA(e);return t.zA(r)},r.prototype.XA=function(e){return+this.delete(e)},r.prototype.cs=function(e,t){var r=this;return e&&"function"==typeof e.reduce&&this.length===e.length&&e.reduce(function(e,i){return e&&r.has(i,t)},!0)},r.prototype.toJSON=function(){return this.toArray()},r.prototype.contains=function(e){return this.has(e)},r.prototype.remove=function(e){return this.delete(e)},r.prototype.toggle=function(e){this.has(e)?this.delete(e):this.add(e)}},function(e,t,r){var i,i;!function(t){e.i=t()}(function(){return function e(t,r,n){function s(a,h){if(!r[a]){if(!t[a]){var c="function"==typeof i&&i;if(!h&&c)return i(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[a]={i:{}};t[a][0].call(l.i,function(e){var r=t[a][1][e];return s(r||e)},l,l.i,e,t,r,n)}return r[a].i}for(var o="function"==typeof i&&i,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,r){var i=e("./kernel");r.D=i.D;var n=e("./type_binding");r.ZA=n.ZA;var s=e("./type_binding_scope");r.$A=s.$A},{"./kernel":2,"./type_binding":4,"./type_binding_scope":5}],2:[function(e,t,r){var i=e("./type_binding_scope"),n=e("./lookup"),s=function(){function e(){this.eO=new n.tO}return e.prototype.bind=function(e){this.eO.add(e.rO,e)},e.prototype.iO=function(e){try{this.eO.remove(e)}catch(t){throw new Error("Could not resolve service "+e)}},e.prototype.N=function(){this.eO=new n.tO},e.prototype.resolve=function(e){var t;if(!this.eO.nO(e))return null;t=this.eO.get(e);var r=t[0];if(r.scope===i.$A.sO&&null!==r.sC)return r.sC;var n=this.oO(r.aO);return r.sC=n,n},e.prototype.hO=function(e){var t,r,i,n,s,o;return s=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,o=/([^\s,]+)/g,t=e.toString().replace(s,""),r=t.indexOf("(")+1,i=t.indexOf(")"),n="function"==typeof Map&&-1!==t.indexOf("class")&&-1===t.indexOf("constructor")?null:t.slice(r,i).match(o),null===n&&(n=[]),n},e.prototype.oO=function(e){var t=this.hO(e);if(0===t.length)return new e;for(var r=[],i=null,n=0;n<t.length;n++){var s=t[n];i=this.resolve(s),r.push(i)}return this.cO(e,r)},e.prototype.cO=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(t)))},e}();r.D=s},{"./lookup":3,"./type_binding_scope":5}],3:[function(e,t,r){var i=function(){function e(e,t){this.key=e,this.value=new Array,this.value.push(t)}return e}(),n=function(){function e(){this.uO=new Array}return e.prototype.lO=function(e){for(var t=-1,r=0;r<this.uO.length;r++){this.uO[r].key===e&&(t=r)}return t},e.prototype.add=function(e,t){if(null===e||void 0===e)throw new Error("Argument Null");if(null===t||void 0===t)throw new Error("Argument Null");var r=this.lO(e);if(-1!==r){var n=this.uO[r];n.key===e&&n.value.push(t)}else this.uO.push(new i(e,t))},e.prototype.get=function(e){if(null===e||void 0===e)throw new Error("Argument Null");var t=this.lO(e);if(-1===t)throw new Error("Key Not Found");var r=this.uO[t];return r.key===e?r.value:void 0},e.prototype.remove=function(e){if(null===e||void 0===e)throw new Error("Argument Null");var t=this.lO(e);if(-1===t)throw new Error("Key Not Found");this.uO.splice(t,1)},e.prototype.nO=function(e){if(null===e||void 0===e)throw new Error("Argument Null");return-1!==this.lO(e)},e}();r.tO=n},{}],4:[function(e,t,r){var i=e("./type_binding_scope"),n=function(){function e(e,t,r){if(this.rO=e,this.aO=t,this.sC=null,void 0===r)this.scope=i.$A.pO;else{if(!i.$A[r]){var n="Invalid scope type "+r;throw new Error(n)}this.scope=r}}return e}();r.ZA=n},{"./type_binding_scope":5}],5:[function(e,t,r){var i;!function(e){e[e.pO=0]="Transient",e[e.sO=1]="Singleton"}(i||(i={})),r.$A=i},{}]},{},[1])(1)})},function(e,t,r){"use strict";var i;!function(e){var t=function(){function e(){}return e}();t.LoggerTimestamp=!0,e.Framework=t;var r=function(){function e(){}return e}();r.MetricSnapshotLogs=0,r.TrackSnapshotLogs=0,e.DebugLogs=r}(i=t.HiveConfig||(t.HiveConfig={})),"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Framework=i.Framework,window.HiveConfig.DebugLogs=i.DebugLogs)},function(e,t,r){"use strict";var i=function(){function e(){}return e}();i.dO="127.0.0.1",i.vp=8999,i.Ep=8998,i.gp=8899,i.dp=8898,i.fO="//{0}:{1}/?callback={2}{3}hivePluginId={4}",i.gO="//{0}:{1}/?callback={2}",i.yp=!0,i.EO=/((http|https):\/\/(.*):([0-9]*)\/([0-9a-z-]*).ism\/)(.*)/,i.vO="2013.1.1",i.yO="2018.1",t.fp=i},function(e,t,r){"use strict";var i=function(){function e(){this.count=0}return e.prototype.next=function(){return++this.count},e}();t.Counter=i;var n=function(){function e(){this.reset()}return e.prototype.add=function(e){e<=0||(this.TO+=e,this.mO++,e>this.IO&&(this.IO=e),e<this.SO&&(this.SO=e))},e.prototype.min=function(e){void 0===e&&(e=!0);var t=this.SO==Number.POSITIVE_INFINITY?0:this.SO;return e&&this.reset(),t},e.prototype.max=function(e){void 0===e&&(e=!0);var t=this.IO==Number.NEGATIVE_INFINITY?0:this.IO;return e&&this.reset(),t},e.prototype.Nc=function(e){void 0===e&&(e=!0);var t=this.TO;return e&&this.reset(),t},e.prototype.ec=function(e){void 0===e&&(e=!0);var t=this.mO>0?this.TO/this.mO:0;return e&&this.reset(),t},e.prototype.reset=function(){this.SO=Number.POSITIVE_INFINITY,this.IO=Number.NEGATIVE_INFINITY,this.TO=0,this.mO=0},e}();t.RO=n},function(e,t,r){var i;!function(n,s){"use strict";var o="model",a="name",h="type",c="vendor",u="version",l="mobile",p="tablet",d={extend:function(e,t){var r={};for(var i in e)t[i]&&t[i].length%2==0?r[i]=t[i].concat(e[i]):r[i]=e[i];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},wO:function(e){return e.toLowerCase()},bO:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},f={CO:function(){for(var e,t,r,i,n,s,o,a=0,h=arguments;a<h.length&&!s;){var c=h[a],u=h[a+1];if(void 0===e){e={};for(i in u)u.hasOwnProperty(i)&&(n=u[i],"object"==typeof n?e[n[0]]=void 0:e[n]=void 0)}for(t=r=0;t<c.length&&!s;)if(s=c[t++].exec(this._O()))for(i=0;i<u.length;i++)o=s[++r],n=u[i],"object"==typeof n&&n.length>0?2==n.length?"function"==typeof n[1]?e[n[0]]=n[1].call(this,o):e[n[0]]=n[1]:3==n.length?"function"!=typeof n[1]||n[1].exec&&n[1].test?e[n[0]]=o?o.replace(n[1],n[2]):void 0:e[n[0]]=o?n[1].call(this,o,n[2]):void 0:4==n.length&&(e[n[0]]=o?n[3].call(this,o.replace(n[1],n[2])):void 0):e[n]=o||void 0;a+=2}return e},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&t[r].length>0){for(var i=0;i<t[r].length;i++)if(d.has(t[r][i],e))return"?"===r?void 0:r}else if(d.has(t[r],e))return"?"===r?void 0:r;return e}},g={Qu:{PO:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419",QR:"/"}}},AO:{OO:{NO:{DO:["SD","KF"]}},kO:{NO:{LO:"7373KT"},vendor:{MO:"APA",FO:"Sprint"}}},os:{UO:{version:{BO:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",HO:["NT 5.1","NT 5.2"],xO:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],qO:"ARM"}}}},E={Qu:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,u],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[a,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],u],[/(edge)\/((\d+)?[\w\.]+)/i],[a,u],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[a,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],u],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[a,u],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],u],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],u],[/;fbav\/([\w\.]+);/i],[u,[a,"Facebook"]],[/fxios\/([\w\.-]+)/i],[u,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[u,f.str,g.Qu.PO.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[a,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,u]],GO:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.wO]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.wO]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.wO]]],AO:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,c,[h,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[c,"Apple"],[h,p]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,o,[h,p]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[o,[c,"Amazon"],[h,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[o,f.str,g.AO.OO.NO],[c,"Amazon"],[h,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,c,[h,l]],[/\((ip[honed|\s\w*]+);/i],[o,[c,"Apple"],[h,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,o,[h,l]],[/\(bb10;\s(\w+)/i],[o,[c,"BlackBerry"],[h,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[o,[c,"Asus"],[h,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[o,"Xperia Tablet"],[h,p]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[c,"Sony"],[o,"Xperia Phone"],[h,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,o,[h,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[c,"Nvidia"],[h,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[c,"Sony"],[h,"console"]],[/(sprint\s(\w+))/i],[[c,f.str,g.AO.kO.vendor],[o,f.str,g.AO.kO.NO],[h,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,o,[h,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[c,[o,/_/g," "],[h,l]],[/(nexus\s9)/i],[o,[c,"HTC"],[h,p]],[/(nexus\s6p)/i],[o,[c,"Huawei"],[h,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,o,[h,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[c,"Microsoft"],[h,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[c,"Microsoft"],[h,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[o,[c,"Motorola"],[h,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[c,"Motorola"],[h,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,d.trim],[o,d.trim],[h,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[c,"Samsung"],[h,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[c,"Sharp"],[h,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],o,[h,p]],[/smart-tv.+(samsung)/i],[c,[h,"smarttv"],o],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[c,"Samsung"],o,[h,l]],[/sie-(\w+)*/i],[o,[c,"Siemens"],[h,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[c,"Nokia"],o,[h,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[c,"Acer"],[h,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],o,[h,p]],[/(lg) netcast\.tv/i],[c,o,[h,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[o,[c,"LG"],[h,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[c,"Lenovo"],[h,p]],[/linux;.+((jolla));/i],[c,o,[h,l]],[/((pebble))app\/[\d\.]+\s/i],[c,o,[h,"wearable"]],[/android.+;\s(glass)\s\d/i],[o,[c,"Google"],[h,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[o,/_/g," "],[c,"Xiaomi"],[h,l]],[/android.+a000(1)\s+build/i],[o,[c,"OnePlus"],[h,l]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,d.wO],c,o]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[a,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,u],[/rv\:([\w\.]+).*(gecko)/i],[u,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[u,f.str,g.os.UO.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[u,f.str,g.os.UO.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[a,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[a,"Symbian"],u],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[a,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],u],[/(sunos)\s?([\w\.]+\d)*/i],[[a,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[a,u],[/(haiku)\s(\w+)/i],[a,u],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[a,"iOS"],[u,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[a,u]]},v=function(e,t){if(!(this instanceof v))return new v(e,t).VO();var r=e||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),i=t?d.extend(E,t):E;return this.jO=function(){var e=f.CO.apply(this,i.Qu);return e.bO=d.bO(e.version),e},this.QO=function(){return f.CO.apply(this,i.GO)},this.KO=function(){return f.CO.apply(this,i.AO)},this.YO=function(){return f.CO.apply(this,i.engine)},this.Od=function(){return f.CO.apply(this,i.os)},this.VO=function(){return{sy:this._O(),Qu:this.jO(),engine:this.YO(),os:this.Od(),AO:this.KO(),GO:this.QO()}},this._O=function(){return r},this.Ad=function(e){return r=e,this},this};v.VERSION="0.7.12",v.WO={zO:a,JO:"major",VERSION:u},v.XO={ZO:"architecture"},v.$O={eN:o,VENDOR:c,tN:h,rN:"console",iN:l,nN:"smarttv",sN:p,oN:"wearable",aN:"embedded"},v.hN={zO:a,VERSION:u},v.cN={zO:a,VERSION:u},void 0!==t?(void 0!==e&&e.i&&(t=e.i=v),t.Pp=v):r(110)?void 0!==(i=function(){return v}.call(t,r,t,e))&&(e.i=i):n.Pp=v;var y=n.uN||n.lN;if(void 0!==y){var T=new v;y.sy=T.VO(),y.sy.get=function(){return T._O()},y.sy.set=function(e){T.Ad(e);var t=T.VO();for(var r in t)y.sy[r]=t[r]}}}("object"==typeof window?window:this)},function(e,t,r){"use strict";var i=r(41),n=r(3);!function(e){var t;!function(e){e[e.off=0]="off",e[e.error=1]="error",e[e.warn=2]="warn",e[e.notice=3]="notice",e[e.info=4]="info",e[e.debug=5]="debug",e[e.trace=6]="trace"}(t=e.pN||(e.pN={}));var r=function(){function e(){this.timestamp=function(){},this.dN=new n,this.level=t.debug,this.timestamp.toString=function(){var e=new Date;return"["+("0"+e.getUTCHours()).slice(-2)+":"+("0"+e.getUTCMinutes()).slice(-2)+":"+("0"+e.getUTCSeconds()).slice(-2)+":"+("00"+e.getUTCMilliseconds()).slice(-3)+"]"},this.logger="undefined"==typeof console?{log:function(){}}:console,this.logger.trace||(this.logger.trace=this.logger.log),this.logger.debug||(this.logger.debug=this.logger.log),this.logger.info||(this.logger.info=this.logger.log),this.logger.warn||(this.logger.warn=this.logger.log),this.logger.error||(this.logger.error=this.logger.log),this.fN(t[this.level])}return e.prototype.fN=function(e,r){i.HiveConfig.Framework.HiveDebugLevel&&void 0!=t[i.HiveConfig.Framework.HiveDebugLevel]?this.level=t[i.HiveConfig.Framework.HiveDebugLevel]:void 0!=t[e]?this.level=t[e]:console.log("Wrong logging level: "+e,t),this.gN(r)},e.prototype.gN=function(e){var r={log:this.EN(this.logger.log,t.error,e),error:this.EN(this.logger.error,t.error,e),warn:this.EN(this.logger.warn,t.warn,e),notice:this.EN(this.logger.info,t.notice,e),info:this.EN(this.logger.info,t.info,e),debug:this.EN(this.logger.debug,t.debug,e),trace:this.EN(this.logger.trace,t.trace,e)};e?this.dN.set(e,r):this.vN=r},e.prototype.EN=function(e,t,r){if(!(this.level>=t))return function(){};try{return i.HiveConfig.Framework.LoggerTimestamp?r?Function.prototype.bind.call(e,console,"S["+r+"] %s",this.timestamp):Function.prototype.bind.call(e,console,"%s",this.timestamp):r?Function.prototype.bind.call(e,console,"S["+r+"]"):Function.prototype.bind.call(e,console)}catch(e){}},e.prototype.log=function(e){return e?(this.dN.has(e)||this.fN(t[this.level],e),this.dN.get(e)):this.vN},e}();e.yN=r}(t.TN||(t.TN={}))},function(e,t,r){"use strict";var i=r(30),n=r(28),s=n.sR,o=n.oR,a=function(){function e(){this.SourceURLParams={},this.testId=null}return e.prototype.mN=function(e){for(var t in e)if("SourceURLParams"===t)for(var r in e[t])this[t][r]=e[t][r];else this[t]=e[t];this.IN()},e.prototype.SN=function(){var e=this.ContentId+this.SiteId+this.CROId+this.SourceURL,t=new s;t.Nv("b6614c3e4cd1d14eed6b39ef2bf6b9a3e3d6dfcd26699d7270d887923bcbf83efb3dadb717c0bafb1d48dce361eb369b7cc46e57405ebfbdd86c3175532fe56cc77f473d345b2cb6feafb5ab0e24f364a3d259f27e4a2fd97468265bddfd3ddd3ac64251db650ca0280af2b2c45e8b1c8f040f2c433ac0a157d2b3fd91517253","010001");var r=o(this.Signature);return t.ZS(e,r)},e.prototype.RN=function(e){this.ticketUrl=e;var t=i.parse(e),r=t.path.split("/").slice(3);if(this.SiteId=r[0],this.CROId=r[1],this.ContentId=r[2],this.wN=r[3],t.query)try{var n=t.query.split("&");for(var s in n){var o=n[s].split(/=(.+)/);this.SourceURLParams[o[0]]=o[1]}}catch(e){}this.bN=e.indexOf("api-test")>-1},e.prototype.up=function(){return this.SiteId},e.prototype.cp=function(){return this.CROId},e.prototype.hp=function(){return this.ContentId},e.prototype.CN=function(){return this.wN},e.prototype._N=function(){return this.SourceURL},e.prototype.PN=function(){if(this.AN=this.SourceURL,void 0!=this.SourceURLParams){var e=new Array;for(var t in this.SourceURLParams)e.push(t+"="+this.SourceURLParams[t]);e.length>0&&this.AN&&(this.AN+=(this.AN.indexOf("?")>0?"&":"?")+e.join("&"))}},e.prototype.IN=function(){var e=r(78);this.sessionId=e.ON()},e.prototype.NN=function(){return this.AN||this.PN(),this.AN},e.prototype.kd=function(){return"["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},e.prototype.DN=function(){return[this.SiteId,this.CROId,this.ContentId]},e.prototype.kN=function(){return this.SourceURL+"-["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},e.prototype.toString=function(){return this.kd()},e}();a.LN="^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?",a.MN="CROId",a.FN="SiteId",a.UN="ContentId",t.BN=a},function(e,t,r){"use strict";var i=function(){function e(){}return e}();i.HN=55,i.xN=6e5,i.qN=5,i.GN=5,i.VN=5,i.jN=10,i.QN="dist",i.KN="./scenarios/BrokenUdp",i.YN=null,i.WN=null,i.zN=null,i.JN=!0,i.XN=!0,i.ZN=6e4,t.$N=i;var n=function(){function e(){}return e}();n.eD="BwEmulation",t.tD=n},function(e,t,r){"use strict";function i(e,t,r,s){if(!(this instanceof i))return new i(e,t,r,s);t=t||Object.cs,r=r||Object.Oc,s=s||Function.us,this.ls=t,this.Ac=r,this.ds=s,this.fs=new n(null,function(e,r){return t(e.key,r.key)},function(e,t){return r(e.key,t.key)}),this.length=0,this.addEach(e)}var n=(r(11),r(139)),s=r(12),o=r(52),a=r(13);e.i=i,i.rD=i,Object.addEach(i.prototype,s.prototype),Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,a.prototype),i.prototype.Es=function(e){return new this.constructor(e,this.ls,this.Ac,this.ds)},i.prototype.log=function(e,t,r,i){t=t||this.vs,this.fs.log(e,function(e,r,i){t(e.value,r,i)},r,i)},i.prototype.vs=function(e,t){t(" key: "+e.key),t(" value: "+e.value)}},function(e,t,r){"use strict";var i,n=r(59),s=r(3),o=r(24),a=r(0),h=r(5),c=r(9),u=r(31),l=r(10),p=r(1),d=r(2);!function(e){e[e.mc=0]="PLAYER",e[e.iD=1]="LAN",e[e.nD=2]="SITE"}(i=t.sD||(t.sD={}));var f=function(){function e(){this.oD=!1,this.b_=null,this.aD=-1,this.hD=0}return e}();t.cD=f;var g=function(){function e(){this.loggerId="[Prefetcher] ",this.uD=!0,this.lD=0,this.isActive=!0,this.pD=new s,this.dD=new s}return e.prototype.init=function(e){this.logger=a.Framework.resolve(a.Framework.V.R).log(e.sessionId),this.fD=e.gD,this.ED=e.ED,this.vD=e.vD,this.sC=e.sC,this.yD=e.yD,this.TD=e.TD,this.mD=e.mD,this.ID=e.ID},e.prototype.SD=function(){this.isActive=!0},e.prototype.RD=function(e,t){this.context=e,this.wD=t,this.mD.RD(t)},e.prototype.bD=function(e){return this.dD.has(e)},e.prototype.CD=function(){return this.wD},e.prototype._D=function(e,t,r){var o=this;try{var a=new n;this.dD.forEach(function(e,t){a.add(t)});var h=new n;if(h.addEach(e.keys()),this.wD.PD()){var c=this.wD.PD().bitrate;if(h.add(c),h.forEach(function(e){a.delete(e)}),r){var u=[];a.forEach(function(e){o.dD.has(e)&&o.dD.get(e).AD==i.nD&&(u.push(e),h.add(e))}),u.forEach(function(e){a.delete(e)})}var l=new s;h.forEach(function(t){o.dD.has(t)&&o.dD.get(t).AD==i.nD?l.set(t,i.nD):l.set(t,e.get(t))}),this.OD(a),this.ND(l,t)}}catch(e){p.ErrorMonitor.ve().logError("Error updating the prefetch sessions",this.loggerId,d.hs.jn.kn,e)}},e.prototype.ND=function(e,t){var r=this;e.forEach(function(e,i){0!=i&&r.DD(i,e,t)})},e.prototype.OD=function(e){var t=this;e.forEach(function(e){t.yD.kD(e),t.logger.debug(t.loggerId+"Remove unwanted bitrate "+e),t.dD.delete(e)})},e.prototype.DD=function(e,t,r){this.dD.has(e)?this.LD(e,r):this.dD.has(e)||this.MD(e,t,r)},e.prototype.LD=function(e,t){try{var r=this.dD.get(e);r.type=t,r.type!=i.nD&&(r.aD=-1),this.yD.FD(e,r)}catch(e){p.ErrorMonitor.ve().logError("Error configuring already existing prefetch sessions",this.loggerId,d.hs.jn.Ln,e)}},e.prototype.MD=function(e,t,r){var n=this;try{var s=new f;s.b_=null,s.type=r,s.bitrate=e,s.AD=t,this.dD.set(e,s),this.dD.forEach(function(e,t){n.logger.debug(n.loggerId+"ABT "+t+" S "+i[e.type]+" PREF REASON "+i[e.AD])}),this.yD.FD(e,s)}catch(e){p.ErrorMonitor.ve().logError("Error constructing a new prefetch session",this.loggerId,d.hs.jn.Mn,e)}},e.prototype.UD=function(e){var t=this;if(this.dD.has(e.getBitrate())){var r=this.dD.get(e.getBitrate());r.aD>0&&r.BD&&(r.aD=e.duration-(a.Framework.time()-r.BD)-r.hD,r.hD=50),r.b_=e,this.HD(e.getBitrate()),this.dD.forEach(function(r,n){r&&r.type!=i.mc&&n!=e.getBitrate()&&t.xD(r,n)})}else p.ErrorMonitor.ve().logError("Error retrieving a fragment without having a prefetch session",this.loggerId,d.hs.jn.Fn)},e.prototype.qD=function(e){var t=this.dD.keys(),r=t.indexOf(e);return-1!=r&&t.splice(r,1),t},e.prototype.GD=function(e){var t=this;e.forEach(function(e){var r=t.dD.get(e);r&&r.type!=i.mc&&t.xD(r,r.bitrate)})},e.prototype.xD=function(e,t){if(e.type!=i.mc){var r=this.wD.PD();if(null!=r){var n=this.wD.VD(r.C_,t,c.vc.fc);null==n?(this.logger.debug(this.loggerId+"PREFETCHING "+t+" MISSING METADATA "),this.oD(t)):(e.b_=n,this.HD(n.getBitrate()))}else this.logger.debug(this.loggerId+"PLAYER NOT PLAYING "),this.oD(t)}},e.prototype.jD=function(e){var t=this.dD.get(e);t&&t.oD&&(null!=t.b_?(this.logger.debug(this.loggerId+"RESTART PREFETCHING ON AVAILABLE METADATA"),t.oD=!1,this.HD(t.bitrate)):(t.oD=!1,this.xD(t,e)))},e.prototype.QD=function(e){var t=this;e?this.jD(e):this.dD.forEach(function(e,r){t.jD(r)})},e.prototype.HD=function(e){var t=this.wD.PD();if(t){var r=this.dD.get(e);if(r){if(r.b_&&t.getBitrate()==e){var i=this.KD(r.b_.A_(),e);this.yD.setDelta(i)}this.YD(r)}}else p.ErrorMonitor.ve().logError("Error attempting prefetch before having a player request",this.loggerId,d.hs.jn.Un)},e.prototype.YD=function(e){if(e.b_){var t=this.WD(e.b_);if(null!=t)this.zD(t,e);else{var r=e.bitrate;this.logger.debug(this.loggerId+"PREFETCHING "+r+" STOPPED BECAUSE OF MISSING METADATA "),this.dD.get(r).oD=!0,this.oD(r)}}else e.oD=!0,this.oD(e.bitrate)},e.prototype.zD=function(e,t){var r=this,n=this.JD(e.Zf(),e.getBitrate(),e.A_(),t.type);if(n.XD)try{this.pD.has(e.Zf())&&a.Framework.clearTimeout(this.pD.get(e.Zf()));var s=n.type==o.bf.If,c=1;if(s){var l=Math.max(0,t.aD);c=this.mD.ZD(t.type,e.getBitrate(),e.A_(),l)}this.logger.debug(this.loggerId+"PREFETCHING "+e.url+" CDN PREFETCH "+s+" IN "+c+" MSECS");var f=this.dD.get(e.getBitrate());f.b_=e;var g=a.Framework.setTimeout(function(){r.pD.delete(e.Zf());var s=new u.HiveRequest(r.ED.sessionId);s.url=e.url,f.BD=a.Framework.time(),r.lD=0;var c=r.ED.$D(s,e,r.context,n.type);c&&(c.Gf=t.type==i.nD||t.type==i.iD,s.onerror=s.onload=function(){if(c.Jf()==o.bf.If&&(!s.status||s.status<200||s.status>299)){var t=r.dD.get(e.getBitrate());s=null;var i=t.b_.duration,n=t.b_.duration+h.hh.fa.Zo,u=Math.floor(Math.random()*(n-i))+i;t.aD=u-(a.Framework.time()-t.BD),t.hD=0,r.HD(t.b_.bitrate)}})},c);this.pD.set(e.Zf(),g)}catch(e){p.ErrorMonitor.ve().logError("Error requesting for prefetch",this.loggerId,d.hs.jn.xn,e)}},e.prototype.ek=function(){var e=this;this.pD.forEach(function(t,r){e.logger.debug(e.loggerId+"Clearing delayed prefetch timer id "+t),a.Framework.clearTimeout(t),e.pD.delete(r)}),this.isActive=!1},e.prototype.oD=function(e){this.dD.has(e)&&(this.dD.get(e).oD=!0,this.wD.tk(e))},e.prototype.WD=function(e){try{var t=this.dD.get(e.getBitrate()),r=e,i=this.rk(r);return i&&i.Zf()!=e.Zf()?i:i&&i.Zf()==t.b_.Zf()?e:null}catch(e){return p.ErrorMonitor.ve().logError("Error forwarding to next segment",this.loggerId,d.hs.jn.Bn,e),null}},e.prototype.rk=function(e){if(null==e)return null;var t=this.sC.ik(!0),r=e;if(t)for(;null!=r&&-1!=t.indexOf(r.Zf());)if(!(r=this.wD.nk(r)))return r;return r},e.prototype.JD=function(e,t,r,n){try{var s=this.sk(e),a=s?o.bf.wf:o.bf.If,h=!1;h=n!=i.mc?!this.pD.has(e)||a!=o.bf.If:a==o.bf.wf;var c=this.wD.ak(),u=this.hk(r,t,a),l=n==i.nD;return this.logger.debug(this.loggerId+"PREFETCHING "+o.bf[a]+" (LAN LEADER: "+this.yD.ck()+" SITE LEADER: "+l+") CHECKS FOR "+e+" [HAVES:"+s+" NOTBUFFERING:"+c+" DISTANCE:"+u.valid+"("+u.uk+")]"),{XD:h&&c&&u.valid&&this.isActive,type:a}}catch(e){return p.ErrorMonitor.ve().logError("Error checking if allowed to prefetch",this.loggerId,d.hs.jn.Hn,e),{XD:!1,type:o.bf.If}}},e.prototype.hk=function(e,t,r){try{var i=this.wD.lk(e,t);return i<=this.wD.pk()?{uk:i,valid:!0}:{uk:i,valid:!1}}catch(e){return p.ErrorMonitor.ve().logError("Error checking the player distance",this.loggerId,d.hs.jn.qn,e),{uk:0,valid:!1}}},e.prototype.KD=function(e,t){var r=this.wD.PD();if(null!=r){var i=r.A_();return this.wD.dk(i,t,e,t)}return-1},e.prototype.sk=function(e){if(this.fD.contains(e)){var t=this.fD.fk(e);if(t.length>=h.hh.fa.ta){if(h.hh.fa.ia){var r=[],i=[],n=[],s=this.yD.gk();return t.forEach(function(e){e.Ek.peerInfo.type==l.Tc.W&&r.push(e);var t=e.Ek.peerInfo.internalAs;0!=s&&t&&s==t&&i.push(e),e.Ek.peerInfo.type==l.Tc.yc&&n.push(e)}),r.length>0?!this.uD||!this.vk(r,e):!(!this.yD.ck()&&this.yD.yk()||!(i.length>0))||!(!(n.length>0)||!this.yD.Tk()&&this.yD.mk())}return!0}}return!1},e.prototype.vk=function(e,t){try{if(this.yD.Ik().length>h.hh.fa.la){this.yD.Sk();return e.length==h.hh.fa.ua&&e[0].guid==this.yD.Rk().uuid&&(a.Framework.random()>h.hh.fa.pa&&this.lD<h.hh.fa.da&&(this.logger.debug("SKIP PREFETCH CYCLE "+this.lD+" TO OFFLOAD LEADER"),this.lD++,!0))}return!1}catch(e){return p.ErrorMonitor.ve().logError("Error deciding to offload the leader",this.loggerId,d.hs.jn.Gn,e),!1}},e.prototype.wk=function(e,t){try{e.bk=e.Kf.id,e.Kf=t,this.logger.debug(this.loggerId+"UPGRADE "+o.bf[e.Jf()]+" REQ "+e.Yf+" FOR "+e.zf.Zf()),e.Jf()==o.bf.wf?(e.qf.p2pAgenTrafficSuccessQt=e.Qf,e.Vf?(e.type=o.bf.Rf,this.vD.Ck(e)||(this.logger.debug(this.loggerId+"SET REQUEST TIMED-OUT WAS 0. CDN COMPENSATION"),this.vD._k(e.Pk,"TIMED-OUT"))):(e.type=o.bf.Tf,this.logger.debug(this.loggerId+"THE HIVE REQ "+e.Zf()+" ARRIVED BEFORE THE P2P_PREFETCH INITIALIZED. CHANGE REQUEST TYPE TO "+o.bf[e.Jf()]))):e.Jf()==o.bf.If&&(e.type=o.bf.Tf)}catch(e){p.ErrorMonitor.ve().logError("Error upgrading prefetch",this.loggerId,d.hs.jn.Vn,e)}},e}();t.Ak=g},function(e,t,r){"use strict";function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);var n=this.head=new this.Node;n.next=n,n.Ok=n,this.ls=t||Object.cs,this.ds=r||Function.us,this.length=0,this.addEach(e)}function n(e){this.head=e,this.Nk=e.next}function s(e){this.value=e,this.Ok=null,this.next=null}e.i=i;var o=(r(11),r(12)),a=r(67),h=r(13),c=r(38);i.Dk=i,Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,a.prototype),Object.addEach(i.prototype,h.prototype),Object.addEach(i.prototype,c.prototype),i.prototype.Es=function(e){return new this.constructor(e,this.ls,this.ds)},i.prototype.find=function(e,t,r){t=t||this.ls;for(var i=this.head,n=this.kk(r,i.next);n!==i;){if(t(n.value,e))return n;n=n.next}},i.prototype.Lk=function(e,t,r){t=t||this.ls;for(var i=this.head,n=this.kk(r,i.Ok);n!==i;){if(t(n.value,e))return n;n=n.Ok}},i.prototype.has=function(e,t){return!!this.find(e,t)},i.prototype.get=function(e,t){var r=this.find(e,t);return r?r.value:this.ds(e)},i.prototype.delete=function(e,t){var r=this.Lk(e,t);if(r){if(this.Mk){var i=[],n=[e];this.QA(i,n,r.index)}return r.delete(),this.length--,this.Mk&&(this.Fk(r.next,r.index),this.GA(i,n,r.index)),!0}return!1},i.prototype.XA=function(e,t){t=t||this.ls;for(var r=this.head,i=r.next,n=0;i!==r;)t(e,i.value)&&(i.delete(),n++),i=i.next;return this.length-=n,n},i.prototype.clear=function(){var e,t;this.Mk&&(t=this.toArray(),e=[],this.QA(e,t,0)),this.head.next=this.head.Ok=this.head,this.length=0,this.Mk&&this.GA(e,t,0)},i.prototype.add=function(e){var t=new this.Node(e);return this.Mk&&(t.index=this.length,this.QA([e],[],t.index)),this.head.Uk(t),this.length++,this.Mk&&this.GA([e],[],t.index),!0},i.prototype.push=function(){var e=this.head;if(this.Mk){var t=Array.prototype.slice.call(arguments),r=[],i=this.length;this.QA(t,r,i);var n=this.head.Ok}for(var s=0;s<arguments.length;s++){var o=arguments[s],a=new this.Node(o);e.Uk(a)}this.length+=arguments.length,this.Mk&&(this.Fk(n.next,void 0===n.index?0:n.index+1),this.GA(t,r,i))},i.prototype.unshift=function(){if(this.Mk){var e=Array.prototype.slice.call(arguments),t=[];this.QA(e,t,0)}for(var r=this.head,i=0;i<arguments.length;i++){var n=arguments[i],s=new this.Node(n);r.Bk(s),r=s}this.length+=arguments.length,this.Mk&&(this.Fk(this.head.next,0),this.GA(e,t,0))},i.prototype.pop=function(){var e,t=this.head;if(t.Ok!==t){if(e=t.Ok.value,this.Mk){var r=[],i=[e],n=this.length-1;this.QA(r,i,n)}t.Ok.delete(),this.length--,this.Mk&&this.GA(r,i,n)}return e},i.prototype.shift=function(){var e,t=this.head;if(t.Ok!==t){if(e=t.next.value,this.Mk){var r=[],i=[e];this.QA(r,i,0)}t.next.delete(),this.length--,this.Mk&&(this.Fk(this.head.next,0),this.GA(r,i,0))}return e},i.prototype.Hk=function(){if(this.head!==this.head.next)return this.head.next.value},i.prototype.xk=function(e){this.head!==this.head.next?this.head.next.value=e:this.push(e)},i.prototype.Bc=function(){return this.Hk()},i.prototype.kk=function(e,t){var r=this.head;if("number"==typeof e){var i=e;if(i>=0)for(e=r.next;i&&(i--,(e=e.next)!=r););else for(e=r;i<0&&(i++,(e=e.Ok)!=r););return e}return e||t},i.prototype.slice=function(e,t){var r=[],i=this.head;for(e=this.kk(e,i.next),t=this.kk(t,i);e!==t&&e!==i;)r.push(e.value),e=e.next;return r},i.prototype.splice=function(e,t){return this.qk(e,t,Array.prototype.slice.call(arguments,2))},i.prototype.qk=function(e,t,r){var i=e;e=this.kk(e,this.head),null==t&&(t=1/0),r=Array.from(r);for(var n=[],s=e;t--&&t>=0&&s!==this.head;)n.push(s.value),s=s.next;var o,a;this.Mk&&(o=e===this.head?this.length:e.Ok===this.head?0:e.index,a=e.Ok,this.QA(r,n,o));for(var s=e,h=0,s=e;h<n.length;h++,s=s.next)s.delete();null==i&&s===this.head&&(s=this.head.next);for(var h=0;h<r.length;h++){var c=new this.Node(r[h]);s.Uk(c)}return this.length+=r.length-n.length,this.Mk&&(e===this.head?this.Fk(this.head.next,0):this.Fk(a.next,a.index+1),this.GA(r,n,o)),n},i.prototype.reverse=function(){if(this.Mk){var e=this.toArray(),t=e.reversed();this.QA(t,e,0)}var r=this.head;do{var i=r.next;r.next=r.Ok,r.Ok=i,r=r.next}while(r!==this.head);return this.Mk&&this.GA(t,e,0),this},i.prototype.sort=function(){this.qk(0,this.length,this.Fc())},i.prototype.reduce=function(e,t){for(var r=arguments[2],i=this.head,n=i.next;n!==i;)t=e.call(r,t,n.value,n,this),n=n.next;return t},i.prototype.reduceRight=function(e,t){for(var r=arguments[2],i=this.head,n=i.Ok;n!==i;)t=e.call(r,t,n.value,n,this),n=n.Ok;return t},i.prototype.Fk=function(e,t){for(;e!==this.head;)e.index=t++,e=e.next},i.prototype.Xc=function(){this.head.index=-1,this.Fk(this.head.next,0),this.Mk=!0},i.prototype.Hc=function(){return new n(this.head)},n.prototype.Gk=null,Object.defineProperty(n.prototype,"_iterationObject",{get:function(){return this.Gk||(this.Gk={done:!1,value:null})}}),n.prototype.next=function(){if(this.Nk===this.head)this.Vk.done=!0,this.Vk.value=void 0;else{var e=this.Nk.value;this.Nk=this.Nk.next,this.Vk.value=e}return this.Vk},i.prototype.Node=s,s.prototype.delete=function(){this.Ok.next=this.next,this.next.Ok=this.Ok},s.prototype.Uk=function(e){var t=this.Ok;this.Ok=e,e.Ok=t,t.next=e,e.next=this},s.prototype.Bk=function(e){var t=this.next;this.next=e,e.next=t,t.Ok=e,e.Ok=this}},function(e,t,r){"use strict";function i(e,t){if(!(this instanceof i))return new i(e,t);t=t||Function.us,this.ds=t,this.fs=Object.create(null),this.length=0,this.addEach(e)}var n=(r(11),r(12)),s=r(52),o=r(13);e.i=i,i.jk=i,Object.addEach(i.prototype,n.prototype),Object.addEach(i.prototype,s.prototype),Object.addEach(i.prototype,o.prototype),i.prototype.Es=function(e){return new this.constructor(e,this.ds)},i.prototype.Qk=function(e){if("string"!=typeof e)throw new TypeError("key must be a string but Got "+e)},Object.defineProperty(i.prototype,"$__proto__",{Ah:!0}),Object.defineProperty(i.prototype,"_hasProto",{get:function(){return this.hasOwnProperty("$__proto__")&&void 0!==this.Kk}}),Object.defineProperty(i.prototype,"_protoValue",{get:function(){return this.Yk},set:function(e){this.Yk=e}}),i.prototype.get=function(e,t){return this.Qk(e),"__proto__"===e?this.Wk?this.Kk:arguments.length>1?t:this.ds(e):e in this.fs?this.fs[e]:arguments.length>1?t:this.ds(e)},i.prototype.set=function(e,t){this.Qk(e);var r="__proto__"===e;return(r?this.Wk:e in this.fs)?(this.zk&&this.Jk(e,r?this.Kk:this.fs[e]),r?this.Kk=t:this.fs[e]=t,this.zk&&this.Xk(e,t),!1):(this.zk&&this.Jk(e,void 0),this.length++,r?this.Kk=t:this.fs[e]=t,this.zk&&this.Xk(e,t),!0)},i.prototype.has=function(e){return this.Qk(e),"__proto__"===e?this.Wk:e in this.fs},i.prototype.delete=function(e){return this.Qk(e),"__proto__"===e?!!this.Wk&&(this.zk&&this.Jk(e,this.Kk),this.Kk=void 0,this.length--,this.zk&&this.Xk(e,void 0),!0):e in this.fs&&(this.zk&&this.Jk(e,this.fs[e]),delete this.fs[e],this.length--,this.zk&&this.Xk(e,void 0),!0)},i.prototype.clear=function(){var e;this.Wk&&(this.zk&&this.Jk("__proto__",this.Kk),this.Kk=void 0,this.zk&&this.Xk("__proto__",void 0));for(e in this.fs)this.zk&&this.Jk(e,this.fs[e]),delete this.fs[e],this.zk&&this.Xk(e,void 0);this.length=0},i.prototype.reduce=function(e,t,r){this.Wk&&(t=e.call(r,t,"$__proto__","__proto__",this));var i=this.fs;for(var n in this.fs)t=e.call(r,t,i[n],n,this);return t},i.prototype.reduceRight=function(e,t,r){var i=this,n=this.fs;return t=Object.keys(this.fs).reduceRight(function(t,s){return e.call(r,t,n[s],s,i)},t),this.Wk?e.call(r,t,this.Kk,"__proto__",i):t},i.prototype.Bc=function(){var e;for(e in this.fs)return this.fs[e];return this.Kk},i.prototype.toJSON=function(){return this.Pc()}},function(e,t,r){"use strict";function i(){throw new Error("Can't construct. GenericMap is a mixin.")}function n(e,t){this.key=e,this.value=t}var s=r(36),o=r(101),a=r(13);e.i=i,s.addEach(i.prototype,o.prototype),s.addEach(i.prototype,a.prototype),i.prototype.isMap=!0,i.prototype.addEach=function(e){if(e&&s(e)===e)if("function"==typeof e.forEach)!0===e.isMap?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this);else if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);else s.keys(e).forEach(function(t){this.set(t,e[t])},this);else if(e&&"number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);return this},i.prototype.get=function(e,t){var r=this.fs.get(new this.Zk(e));return r?r.value:arguments.length>1?t:this.ds(e)},i.prototype.set=function(e,t){var r=new this.Zk(e,t),i=this.fs.get(r),n=!1;return i?(this.zk&&this.Jk(e,i.value),i.value=t,this.zk&&this.Xk(e,t)):(this.zk&&this.Jk(e,void 0),this.fs.add(r)&&(this.length++,n=!0),this.zk&&this.Xk(e,t)),n},i.prototype.add=function(e,t){return this.set(t,e)},i.prototype.has=function(e){return this.fs.has(new this.Zk(e))},i.prototype.delete=function(e){var t=new this.Zk(e);if(this.fs.has(t)){var r=this.fs.get(t).value;return this.zk&&this.Jk(e,r),this.fs.delete(t),this.length--,this.zk&&this.Xk(e,void 0),!0}return!1},i.prototype.clear=function(){var e;this.zk&&(this.forEach(function(e,t){this.Jk(t,e)},this),e=this.keys()),this.fs.clear(),this.length=0,this.zk&&e.forEach(function(e){this.Xk(e)},this)},i.prototype.reduce=function(e,t,r){return this.fs.reduce(function(t,i){return e.call(r,t,i.value,i.key,this)},t,this)},i.prototype.reduceRight=function(e,t,r){return this.fs.reduceRight(function(t,i){return e.call(r,t,i.value,i.key,this)},t,this)},i.prototype.keys=function(){return this.map(function(e,t){return t})},i.prototype.values=function(){return this.map(Function.identity)},i.prototype.entries=function(){return this.map(function(e,t){return[t,e]})},i.prototype.$k=function(){return this.entries()},i.prototype.cs=function(e,t){return t=t||s.cs,this===e||(e&&"function"==typeof e.every?e.length===this.length&&e.every(function(e,r){return t(this.get(r),e)},this):s.keys(e).length===this.length&&s.keys(e).every(function(r){return t(this.get(r),e[r])},this))},i.prototype.toJSON=function(){return this.entries()},i.prototype.Zk=n,n.prototype.cs=function(e){return s.cs(this.key,e.key)&&s.cs(this.value,e.value)},n.prototype.Oc=function(e){return s.Oc(this.key,e.key)}},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(70),s=r(21),o=r(71),a=r(7),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.me=function(e){t.logger=e},t.prototype.send=function(){if(t.logger&&t.logger.debug(this.method+" "+this.url),!this.sessionId){var e=Object.keys(t.ub);e.length>0&&(this.sessionId=t.ub[e[0]])}var r=this,i=new XMLHttpRequest;0===this.url.indexOf("//")&&(this.url=location.protocol+this.url);var o=s.Ip(n.tL.eL,n.tL.dO,n.tL.rL,this.sessionId,encodeURIComponent(this.url));i.open("GET",o),this.responseType&&(i.responseType=this.responseType),i.onreadystatechange=function(){},i.onload=function(){if(4===i.readyState)try{r.responseHeaders=i.getAllResponseHeaders(),r.response=i.response;var e=i.response.byteLength;"arraybuffer"!==i.responseType&&(r.responseText=i.response),r.readyState=4,r.status=i.status,r.dispatchEvent(a.rc.createEvent(ProgressEvent,"progress",{lengthComputable:!0,loaded:e,total:e,currentTarget:r})),r.dispatchEvent(a.rc.createEvent(Event,"readystatechange",{currentTarget:r,bubbles:!1,cancelable:!1})),r.dispatchEvent(a.rc.createEvent(ProgressEvent,"load",{currentTarget:r,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:e,total:0})),r.dispatchEvent(a.rc.createEvent(ProgressEvent,"loadend",{currentTarget:r,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:e,total:0}))}catch(e){t.logger&&t.logger.warn(e)}},i.onerror=function(e){t.logger&&t.logger.warn("onError: "+JSON.stringify(e)),r.dispatchEvent(a.rc.createEvent(ErrorEvent,"error",e,r))},i.onabort=function(e){t.logger&&t.logger.warn("onAbort: "+JSON.stringify(e)),r.dispatchEvent(a.rc.createEvent(ProgressEvent,"abort",e,r))},i.send()},t.prototype.abort=function(){},t}(o.pb);t.Zu=h},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(31),s=r(74),o=r(1),a=r(7),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loggerId="[HiveRequestManifest]",t}return i(t,e),t.registerTech=function(e,r){t.iL[r]=e},t.registerComm=function(e,r){t.nL[r]=e},t.prototype.send=function(){if(!this.sessionId){var e=Object.keys(t.nL);e.length>0&&(this.sessionId=t.nL[e[0]])}var r=t.iL[this.sessionId],i=t.nL[this.sessionId];s.sL(r)||s.sL(i)?(o.ErrorMonitor.ve().logError("HiveJS Tech or Comm are not defined",this.loggerId),this.resolve()):(i.logger().debug("Intercepted Manifest Request "+this.url),r.oL(this),i.onActivateSession(this.url))},t.prototype.resolve=function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.url),t.onreadystatechange=function(){4===t.readyState&&(e.response=t.responseText,e.responseText=t.responseText,e.readyState=4,e.status=t.status,e.dispatchEvent(a.rc.createEvent(Event,"readystatechange",{currentTarget:e})),e.dispatchEvent(a.rc.createEvent(ProgressEvent,"onload",{currentTarget:e})),console.debug("Returned Manifest Request "+e.url))},t.send()},t}(n.HiveRequest);h.nL={},h.iL={},t.zu=h},function(e,t,r){"use strict";!function(){var t=r(17),i=t.log,n=t.Wu;e.i.Wu=n,e.i.Vu=t.Vu,e.i.Gu=t.Gu;var s=r(122)||null,o=r(124)||null,a=r(127)||null,h=r(129)||null;switch(n.Qu){case"chrome":if(!s||!s.aL)return void i("Chrome shim is not included in this adapter release.");i("adapter.js shimming chrome."),e.i.hL=s,s.cL(),s.uL(),t.Ku(),s.lL(),s.aL(),s.pL(),s.dL();break;case"firefox":if(!a||!a.aL)return void i("Firefox shim is not included in this adapter release.");i("adapter.js shimming firefox."),e.i.hL=a,a.cL(),t.Ku(),a.lL(),a.aL(),a.pL();break;case"edge":if(!o||!o.aL)return void i("MS edge shim is not included in this adapter release.");i("adapter.js shimming edge."),e.i.hL=o,o.cL(),t.Ku(),o.aL();break;case"safari":if(!h)return void i("Safari shim is not included in this adapter release.");i("adapter.js shimming safari."),e.i.hL=h,h.cL();break;default:i("Unsupported browser!")}}()},function(e,t,r){"use strict";var i=r(32),n=r(4),s=r(18),o=r(21),a=r(130),h=a.HiveComm.Options.fL,c=r(19),u=r(131),l=r(1),p=function(){function e(t,r){this.gL=t,this.options_=new h,void 0!==r[e.EL]&&o.Sp(r[e.EL],this.options_)}return e.prototype.getName=function(){return e.EL},e.prototype.id=function(){return"["+e.EL+"] "},e.prototype.getVersion=function(){return this.gL.getPluginVersion()},e.prototype.vL=function(){return!0},e.prototype.yL=function(){return n.resolve(!0)},e.prototype.initSession=function(e,t){var r=this.TL(e,t.ticket,t.ticket.NN(),t);return s.HiveRequestFactory.registerTech(r.id,this.getName()),n.resolve(r)},e.prototype.mL=function(){return this.options().initTimeout},e.prototype.isActive=function(e,t){var r=t.manifest.toLowerCase().indexOf("/manifest");if(r>-1){var i=t.manifest.substring(0,r);if(e.indexOf(i)>-1)return!0}else if(e==t.manifest)return!0;return!1},e.prototype.ol=function(e,t,r){void 0===r&&(r=!0),e.rl&&(this.gL.logger().debug("[StatsJS] stopping session ["+e.id+"] complete close: "+t),e.rl.xl.Zd(r),e.rl.Bl.IL(),e.rl.Bl.reset(t)),t?i.Hive.Reporting().close(e.id):this.nl(e,!0)},e.prototype.nl=function(e,t){var r=t?c.Ml.IDLE:c.Ml.Ll;this.gL.logger().notice("[HiveComm] client state: "+c.Ml[r]),e.rl&&e.rl.nl(r)},e.prototype.SL=function(e,t){var r=this,i=0;return this.RL<t.Ol&&(i=t.Ol-this.RL,this.RL=t.Ol),e.al().then(function(){e.rl.Ul.wL(i,t.Al),e.rl.Hl.Sd(t.Pl,t.Al,t.Ol),r.bL()}).done(),n.resolve(!0)},e.prototype.CL=function(e,t,r){return e.al().then(function(){e.rl.Hl.wd(e.ticket.sessionId,t,r)}).done(),n.resolve(!0)},e.prototype.bd=function(e,t){return e.al().then(function(){e.rl.Hl.Cd([t])}).done(),n.resolve(!0)},e.prototype.onError=function(e){var t=!0;if(void 0!=this.options().onError)try{t=this.options().onError(e)}catch(e){l.ErrorMonitor.ve().logError("exception in user-defined onError callback",this.id(),e)}return t},e.prototype.onActiveSession=function(e){var t=this;this._L(),e.al().then(function(r){t.PL=r;var i=new u.AL(t.gL.isLive(),t.gL.getStreamProtocol(),e.ticket.NN());t.PL.OL=i,t.PL.Ul.OL=i,t.gL.updatePlayerInfo(t.PL),t.PL.Bl.init(t.PL.Ul,e.id),t.gL.options().testId&&t.PL.Ul.NL(t.gL.options().testId),t.PL.Hl.Xu(e.ticket.sessionId,t.gL.getPlayerSource(),200);var n=t.gL.flushTechEvents();if(n&&n.length>0&&t.PL.Hl.Cd(n),void 0!=t.options_.onActiveSession)try{t.options_.onActiveSession(e.toHiveSession())}catch(e){l.ErrorMonitor.ve().logError("exception in user-defined onActiveSession callback",t.id(),e)}}).done()},e.prototype.DL=function(){},e.prototype.kL=function(){},e.prototype.LL=function(e){this.gL=e},e.prototype.options=function(){return this.options_},e.prototype._L=function(){this.RL=0},e.prototype.TL=function(e,t,r,i){var n=new s.cl(e,t,r,i);return n.ML=!1,n.id=t.sessionId,n},e.prototype.bL=function(){try{var e=this.gL.getExtendedStats();void 0!=e&&(this.PL.Ul.FL.metrics.bitrateUpN+=e.getBitrateSwitchUp(),this.PL.Ul.FL.metrics.bitrateDwnN+=e.getBitrateSwitchDown(),null!=e.getBandwidth()&&(this.PL.Ul.FL.metrics.srcThroughput=e.getBandwidth()),null!=e.getVideoBitrates()&&this.UL(!0,e.getVideoBitrates()),null!=e.getAudioBitrates()&&this.UL(!1,e.getAudioBitrates()))}catch(e){l.ErrorMonitor.ve().logError("Error accounting extended stats",this.id(),e)}},e.prototype.UL=function(e,t){var r=this,i=0,n=0,s=0,o=0;t.forEach(function(t,a){var h=t.success+t.ll;if(i+=h,o+=t.bytes,n+=t.success,s+=t.ll,e){var c=r.PL.Ul.BL(Number(a));r.HL(c,h,t.success,t.ll,t.bytes)}});var a=this.PL.Ul.xL();this.HL(a,i,n,s,o)},e.prototype.HL=function(e,t,r,i,n){e.srcReqN+=t,e.srcRespN+=r,e.srcRespErrN+=i,e.srcRespQt+=n,e.respFallbackN+=r,e.respFallbackErrN+=i},e}();p.EL="StatsJS",t.StatsJS=p},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(58),s=r(142),o=r(9),a=r(34),h=r(31),c=r(0),u=r(1),l=r(2),p=r(143),d=r(150);!function(e){function t(t){return this.qL(t)||-1!=t.indexOf(e.GL)}function r(t){return-1!=t.toLowerCase().indexOf(e.VL.toLowerCase())||-1!=t.toLowerCase().indexOf(e.jL.toLowerCase())}function f(t,r){var i=r.replace("_definst_/","").match(new RegExp(t.replace(".mpd","")+e.QL));return i&&i.length>0}e.KL=1,e.YL=2,e.WL=2e3,e.zL=3e4,e.JL=1e4,e.XL=!0,e.ZL=!0,e.$L=500,e.eM=10,e.DASH_METADATA_MIN_FRAGMENTS=3,e.VL="(format=mpd-time-csf)",e.jL=".mpd",e.QL="_.*.mpd",e.GL=".m4s",e.tM=".ism/",e.rM=t,e.qL=r;var g=function(t){function n(r,i){var n=t.call(this,i)||this;return n.Ag=0,n.iM=!0,n.loggerId="[Dash Context] ",n.ticket=r,n.nM=r._N(),n.sM=new s.oM,n.nM.indexOf(e.jL)>0?n.aM=new p.hM(i.sessionId):n.aM=new d.cM(i.sessionId),n}return i(n,t),n.prototype.Sk=function(){return this.ticket},n.prototype.getStreamProtocol=function(){return StreamProtocol.DASH},n.prototype.uM=function(){return this.nM},n.prototype.lM=function(){return this.aM.lM()},n.prototype.isLive=function(){return this.aM.pM()},n.prototype.dM=function(){return this.sM},n.prototype.ig=function(e){var t=this.Xf(e);if(t==o.vc.fc||t==o.vc.dc)return!0},n.prototype.Xf=function(e){try{if(r(e))return o.vc.gc;if(this.fM(e))return o.vc.Ec;var t=this.aM.gM(e);return null!=t?t.type:-1!=e.indexOf("audio")?o.vc.dc:o.vc.Ec}catch(t){return u.ErrorMonitor.ve().logError("Error getting the entity type based on a url",this.loggerId,l.hs.Yr.Br,{detailedError:t,url:e}),o.vc.Ec}},n.prototype.EM=function(e){var t=o.vc.Ec,r=0,i=0,n=0,s=!0,h=!1,c=0;try{if(t=this.Xf(e),this.fM(e))s=!0;else if(t!=o.vc.gc){var p=this.aM.gM(e);null!=p?(r=p.duration,i=p.bitrate,n=p.id,h=this.ig(e)):(this.tk(),this.logger.warn("could not extract segment info for "+e))}else s=!1;return c=Math.round(r/1e4),new a.N_(e,t,s,n,c,i,h,this.getContextId())}catch(t){return u.ErrorMonitor.ve().logError("Error getting the entity characteristics based on a url",this.loggerId,l.hs.Yr.Hr,{detailedError:t,url:e}),new a.N_(e,o.vc.Ec,!1,0,0,0,!1,this.getContextId())}},n.prototype.nk=function(e){try{var t=e.url,r=this.aM.vM(t);return null!=r?this.EM(r.yM):null}catch(t){return u.ErrorMonitor.ve().logError("Error getting the next entity",this.loggerId,l.hs.Yr.xr,{detailedError:t,url:e.url}),null}},n.prototype.ak=function(){return t.prototype.TM.call(this,e.KL,e.YL)},n.prototype.mM=function(e){try{var t=e.url;t.toLowerCase();return t===this.nM||(!(null==this.aM||!this.aM.fM(t))||!(r(t)&&this.aM.IM!==t&&!f(this.aM.IM,t)))}catch(t){return u.ErrorMonitor.ve().logError("Error identifying if is current context",this.loggerId,l.hs.Yr.qr,{detailedError:t,url:e.url}),!1}},n.prototype.SM=function(e){try{var t=e.RM,r=e.Kf.url,i=this.aM.parse(r,t,e.Kf.internal);e.Kf.responseText=i,e.Kf.response=i}catch(t){u.ErrorMonitor.ve().logError("Error parsing received metadata",this.loggerId,l.hs.Yr.Gr,{detailedError:t,url:e.Kf.url}),e.RM&&(e.Kf.responseText=e.RM,e.Kf.response=e.RM)}try{this.wM.QD()}catch(t){u.ErrorMonitor.ve().logError("Error starting prefetcher after fetching metadata",this.loggerId,l.hs.Yr.Vr,{detailedError:t,url:e.Kf.url})}this.bM()},n.prototype.CM=function(e){var r=this;try{t.prototype.CM.call(this,e),e.Xf()!==o.vc.fc&&e.Xf()!==o.vc.dc||(e.Xf()===o.vc.fc&&this.sM._M(e),this.aM.CM(e).then(function(t){t&&r.bM(),e.Xf()==o.vc.fc&&r.wM.UD(e.zf)}).done())}catch(e){u.ErrorMonitor.ve().logError("Error when received a fragment",this.loggerId,l.hs.Yr.jr,e)}},n.prototype.getContextId=function(){return this.ticket.kN()},n.prototype.PM=function(e,r){var i=e;return i.AM=c.Framework.time(),t.prototype.PM.call(this,i,r)},n.prototype.dk=function(e,t,r,i){return this.aM.dk(e,t,r,i)},n.prototype.fM=function(e){return this.aM.fM(e)},n.prototype.bM=function(){var t=this;try{this.aM.OM?this.aM.OM.NM().then(function(r){if(r)t.iM=!0,t.logger.debug("Protection evaluation: can decrypt");else{var i="Protection evaluation: cannot decrypt ["+(e.XL?"error":"disabled")+"]";e.ZL?(t.iM=!0,t.logger.debug(i+", metadata prefetch enabled")):t.logger.warn(i+", metadata prefetch DISABLED")}}).done():this.logger.debug("Protection evaluation: not encrypted")}catch(t){if(u.ErrorMonitor.ve().logError("Error evaluating the protection",this.loggerId,l.hs.Yr.Qr,t),e.ZL){var r="Protection evaluation: cannot decrypt ["+(e.XL?"error":"disabled")+"]";this.iM=!0,this.logger.debug(r+", metadata prefetch enabled")}}},n.prototype.tk=function(){this.iM&&(null==this.DM&&this.aM.pM()?this.kM():this.logger.debug("DASH PRE-FETCHING METADATA ALREADY SCHEDULED OR NOT LIVE"))},n.prototype.LM=function(){this.iM&&null!=this.DM&&c.Framework.clearTimeout(this.DM)},n.prototype.kM=function(){var t=this,r=void 0!=this.MM?this.MM:0,i=e.WL,n=r+i,s=Math.max(1,n-c.Framework.time()+e.$L);this.logger.debug("DASH PREFETCHING METADATA "+this.aM.IM+" IN "+s),this.DM=c.Framework.setTimeout(function(){t.FM(t.aM.IM,c.Framework.time())},s)},n.prototype.FM=function(e,t){var r=this.MM;if(null==r&&(r=0),r>t)this.kM();else{var i=new h.HiveRequest(this.ticket.sessionId);i.open("GET",e),i.internal=!0,i.send(),this.DM=null,this.MM=c.Framework.time()}},n.prototype.UM=function(e){this.aM.authenticationToken=e},n.prototype.lk=function(e,t){try{var r=this.PD(),i=this.BM(),n=r.A_(),s=this.aM.HM(n,r.getBitrate(),e,t),o=c.Framework.time()-i;return Math.max(0,s-o)}catch(e){return u.ErrorMonitor.ve().logError("Error calculating the distance duration",this.loggerId,l.hs.Yr.Kr,e),0}},n.prototype.xM=function(){return e.JL},n.prototype.VD=function(e,t,r){var i=this.aM.qM(e,t);return null!=i?new a.N_(i.yM,r,!0,e,i.duration,t,!0,this.getContextId()):null},n.prototype.pk=function(){return e.zL},n}(n.GM);e.VM=g}(t.DASH||(t.DASH={}))},function(e,t,r){"use strict";var i=r(48),n=r(34),s=r(0),o=r(140),a=r(9),h=r(24),c=r(49),u=r(5),l=r(2),p=r(1),d=function(){function e(e){this.jM="[VideoContext] ",this.QM=new i,this.logger=s.Framework.resolve(s.Framework.V.R).log(e.sessionId),this.yD=e.yD,this.KM=e.YM,this.WM=e.WM,this.wM=e.zM,this.wM.RD(this,this)}return e.prototype.Sk=function(){return null},e.prototype.JM=function(){return this.wM},e.prototype.TM=function(e,t){try{var r=0,i=0;if(this.QM.length<t)return!0;for(var n=this.QM.keys().reverse(),s=n[0],o=this.QM.get(s).bitrate,a=n.slice(1),h=0;h<a.length;h++){var c=a[h],u=this.QM.get(c),d=u.AM,f=u.bitrate,g=Math.abs(u.AM-s);if(f!=o)return!1;if(g<e){if(++i>=t)return!1}else{if(++r>t)return!0;i=Math.max(0,i-1),s=d,o=f}}return!1}catch(e){return p.ErrorMonitor.ve().logError("Error calculating if the player is in buffering mode",this.jM,l.hs.bi.Si,e),!1}},e.prototype.getContextId=function(){return null},e.prototype.PM=function(e,t){if(this.XM(t)){var r=this.PD();if(r){var i=e.getBitrate(),n=r.getBitrate();i>n?this.KM.ZM(!0):i<n&&this.KM.ZM(!1)}else this.KM.ZM(!0);if(this.QM.length>u.hh.ya.ga){var o=this.QM.keys()[0];this.QM.delete(o)}this.QM.set(s.Framework.time(),e)}return this.$M(e,t)},e.prototype.$M=function(e,t){var r=new o.eF;try{if(this.wM.bD(e.bitrate)){if(this.WM.tF(e.Zf())){r.rF=!0;var i=this.WM.iF(e.Zf());this.nF(t,i,r)}if(this.WM.sF(e.Zf()))for(var n=this.WM.oF(e.Zf()),s=0,a=n;s<a.length;s++){var h=a[s];this.nF(t,h.Jf(),r),r.aF=!0}}else{var u=c.sD.mc;this.yD.ck()&&(u=c.sD.iD),this.wM.DD(e.bitrate,u,u)}return r}catch(e){return p.ErrorMonitor.ve().logError("Error configuring the request directive",this.jM,l.hs.bi.Ri,e),new o.eF}},e.prototype.nF=function(e,t,r){e!=h.bf.If&&e!=h.bf.wf||t!=h.bf.Tf&&t!=h.bf.wf&&t!=h.bf.If||(r.hF=!0)},e.prototype.XM=function(e){return e!=h.bf.wf&&e!=h.bf.If},e.prototype.cF=function(e,t,r){var i=[];try{for(var n=this.WM.oF(t.Zf()),s=0,o=n;s<o.length;s++){var a=o[s];a.Jf()!=h.bf.Tf&&(this.wM.wk(a,e),i.push(a.bk))}return i}catch(e){return p.ErrorMonitor.ve().logError("Error attempting to upgrade prefetch",this.jM,l.hs.bi.wi,e),[]}},e.prototype.uF=function(e){this.WM.uF(e)},e.prototype.lF=function(e,t){this.WM.lF(e,t)},e.prototype.pF=function(e){this.WM.pF(e)},e.prototype.dF=function(e){this.WM.fF(e)},e.prototype.gF=function(e){this.WM.EF()||this.wM.HD(e)},e.prototype.PD=function(){var e=this.QM.keys();return e.length>0?this.QM.get(e[e.length-1]):null},e.prototype.BM=function(){var e=this.QM.keys();if(e.length>0)return e[e.length-1]},e.prototype.vF=function(e){var t=this.yF(e);null!=t&&this.gF(t.bitrate)},e.prototype.yF=function(e){var t=e.fragmentId,r=t.slice(0,t.lastIndexOf("-")),i=r.slice(0,r.lastIndexOf("-")),s=e.getType();return new n.N_(i,s,!0,e.id,e.duration,e.bitrate,!0,this.getContextId())},e.prototype.ak=function(){return!1},e.prototype.dk=function(e,t,r,i){return 0},e.prototype.pk=function(){return 3e4},e.prototype.xM=function(){return 1e4},e.prototype.nk=function(e){return null},e.prototype.VD=function(e,t,r){return null},e.prototype.getStreamProtocol=function(){return null},e.prototype.isLive=function(){return!1},e.prototype.tk=function(e){},e.prototype.LM=function(){},e.prototype.lM=function(){return null},e.prototype.mM=function(e){},e.prototype.dM=function(){},e.prototype.EM=function(e){},e.prototype.SM=function(e){},e.prototype.CM=function(e){e.Xf()===a.vc.fc&&this.lF(e.Zf(),e.$f())},e.prototype.uM=function(){return null},e.prototype.UM=function(e){},e.prototype.lk=function(e,t){return 0},e}();t.GM=d},function(e,t,r){"use strict";function i(e,t,r,s){if(!(this instanceof i))return new i(e,t,r,s);n.call(this,e,t,r,s)}e.i=i;var n=(r(11),r(141)),s=r(39),o=r(13);i.TF=i,i.prototype=Object.create(n.prototype),i.prototype.constructor=i,Object.addEach(i.prototype,s.prototype),Object.addEach(i.prototype,o.prototype),i.prototype.mF=!0,i.prototype.add=function(e){return!this.has(e)&&(n.prototype.add.call(this,e),!0)},i.prototype.reduce=function(e,t){var r=this,i=arguments[2];return this.NT.reduce(function(t,n,s){return e.call(i,t,n,s,r)},t)},i.prototype.reduceRight=function(e,t){var r=this,i=arguments[2];return this.NT.reduceRight(function(t,n,s){return e.call(i,t,n,s,r)},t)}},function(e,t,r){var i=r(33);"undefined"==typeof hive&&(hive={}),void 0===hive.services&&(hive.services={}),void 0===hive.services.protocol&&(hive.services.protocol={}),void 0===hive.services.protocol.IF&&(hive.services.protocol.IF={}),hive.services.protocol.IF.wc={1:"PLAYER",mc:1,2:"P2P_AGENT",Ic:2,3:"PREFETCHER_FIRST_TIER",Sc:3,4:"PREFETCHER_SECOND_TIER",Rc:4},hive.services.protocol.IF.SF={1:"Global",RF:1,2:"InternalAs",wF:2,3:"ExternalAs",bF:3},hive.services.protocol.IF.CF={1:"Internal",_F:1,2:"External",External:2},hive.services.protocol.IF.TrackerPeerStreamInfo=function(e){this.state=null,this.bitrate=null,this.delta=null,e&&(void 0!==e.state&&(this.state=e.state),void 0!==e.bitrate&&(this.bitrate=e.bitrate),void 0!==e.delta&&(this.delta=e.delta))},hive.services.protocol.IF.TrackerPeerStreamInfo.prototype={},hive.services.protocol.IF.TrackerPeerStreamInfo.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.state=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.I32?this.bitrate=e.Fb().value:e.Mb(r);break;case 3:r==i.Type.I32?this.delta=e.Fb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.TrackerPeerStreamInfo.prototype.write=function(e){e.Hb("TrackerPeerStreamInfo"),null!==this.state&&void 0!==this.state&&(e.xb("state",i.Type.I32,1),e.Vb(this.state),e.Gb()),null!==this.bitrate&&void 0!==this.bitrate&&(e.xb("bitrate",i.Type.I32,2),e.Vb(this.bitrate),e.Gb()),null!==this.delta&&void 0!==this.delta&&(e.xb("delta",i.Type.I32,3),e.Vb(this.delta),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.TrackerPeerInfo=function(e){this.guid=null,this.internalAs=null,this.externalAs=null,this.nat=null,this.bandwidth=null,this.watchingBitrate=null,this.privateIp=null,this.publicIp=null,this.streams=null,this.rankValue=null,this.timestamp=null,this.publicIpString=null,this.privateIpString=null,e&&(void 0!==e.guid&&(this.guid=e.guid),void 0!==e.internalAs&&(this.internalAs=e.internalAs),void 0!==e.externalAs&&(this.externalAs=e.externalAs),void 0!==e.nat&&(this.nat=e.nat),void 0!==e.bandwidth&&(this.bandwidth=e.bandwidth),void 0!==e.watchingBitrate&&(this.watchingBitrate=e.watchingBitrate),void 0!==e.privateIp&&(this.privateIp=e.privateIp),void 0!==e.publicIp&&(this.publicIp=e.publicIp),void 0!==e.streams&&(this.streams=e.streams),void 0!==e.rankValue&&(this.rankValue=e.rankValue),void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.publicIpString&&(this.publicIpString=e.publicIpString),void 0!==e.privateIpString&&(this.privateIpString=e.privateIpString))},hive.services.protocol.IF.TrackerPeerInfo.prototype={},hive.services.protocol.IF.TrackerPeerInfo.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.guid=e.v_().value:e.Mb(r);break;case 2:r==i.Type.I32?this.internalAs=e.Fb().value:e.Mb(r);break;case 3:r==i.Type.I32?this.externalAs=e.Fb().value:e.Mb(r);break;case 4:r==i.Type.I32?this.nat=e.Fb().value:e.Mb(r);break;case 5:r==i.Type.I32?this.bandwidth=e.Fb().value:e.Mb(r);break;case 6:r==i.Type.I32?this.watchingBitrate=e.Fb().value:e.Mb(r);break;case 7:r==i.Type.STRUCT?(this.privateIp=new InetAddress,this.privateIp.read(e)):e.Mb(r);break;case 8:r==i.Type.STRUCT?(this.publicIp=new InetAddress,this.publicIp.read(e)):e.Mb(r);break;case 9:if(r==i.Type.LIST){var s,o=0;this.streams=[];s=e.a_(),s.h_,o=s.size;for(var a=0;a<o;++a){var h=null;h=new hive.services.protocol.IF.TrackerPeerStreamInfo,h.read(e),this.streams.push(h)}e.c_()}else e.Mb(r);break;case 10:r==i.Type.DOUBLE?this.rankValue=e.E_().value:e.Mb(r);break;case 11:r==i.Type.I64?this.timestamp=e.g_().value:e.Mb(r);break;case 12:r==i.Type.STRING?this.publicIpString=e.Lb().value:e.Mb(r);break;case 13:r==i.Type.STRING?this.privateIpString=e.Lb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.TrackerPeerInfo.prototype.write=function(e){if(e.Hb("TrackerPeerInfo"),null!==this.guid&&void 0!==this.guid&&(e.xb("guid",i.Type.STRING,1),e.WC(this.guid),e.Gb()),null!==this.internalAs&&void 0!==this.internalAs&&(e.xb("internalAs",i.Type.I32,2),e.Vb(this.internalAs),e.Gb()),null!==this.externalAs&&void 0!==this.externalAs&&(e.xb("externalAs",i.Type.I32,3),e.Vb(this.externalAs),e.Gb()),null!==this.nat&&void 0!==this.nat&&(e.xb("nat",i.Type.I32,4),e.Vb(this.nat),e.Gb()),null!==this.bandwidth&&void 0!==this.bandwidth&&(e.xb("bandwidth",i.Type.I32,5),e.Vb(this.bandwidth),e.Gb()),null!==this.watchingBitrate&&void 0!==this.watchingBitrate&&(e.xb("watchingBitrate",i.Type.I32,6),e.Vb(this.watchingBitrate),e.Gb()),null!==this.privateIp&&void 0!==this.privateIp&&(e.xb("privateIp",i.Type.STRUCT,7),this.privateIp.write(e),e.Gb()),null!==this.publicIp&&void 0!==this.publicIp&&(e.xb("publicIp",i.Type.STRUCT,8),this.publicIp.write(e),e.Gb()),null!==this.streams&&void 0!==this.streams){e.xb("streams",i.Type.LIST,9),e.HC(i.Type.STRUCT,this.streams.length);for(var t in this.streams)this.streams.hasOwnProperty(t)&&(t=this.streams[t],t.write(e));e.xC(),e.Gb()}null!==this.rankValue&&void 0!==this.rankValue&&(e.xb("rankValue",i.Type.DOUBLE,10),e.YC(this.rankValue),e.Gb()),null!==this.timestamp&&void 0!==this.timestamp&&(e.xb("timestamp",i.Type.I64,11),e.KC(this.timestamp),e.Gb()),null!==this.publicIpString&&void 0!==this.publicIpString&&(e.xb("publicIpString",i.Type.STRING,12),e.qb(this.publicIpString),e.Gb()),null!==this.privateIpString&&void 0!==this.privateIpString&&(e.xb("privateIpString",i.Type.STRING,13),e.qb(this.privateIpString),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.CustomerKey=function(e){this.partnerId=null,this.customerId=null,e&&(void 0!==e.partnerId&&(this.partnerId=e.partnerId),void 0!==e.customerId&&(this.customerId=e.customerId))},hive.services.protocol.IF.CustomerKey.prototype={},hive.services.protocol.IF.CustomerKey.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.partnerId=e.Lb().value:e.Mb(r);break;case 2:r==i.Type.STRING?this.customerId=e.Lb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.CustomerKey.prototype.write=function(e){e.Hb("CustomerKey"),null!==this.partnerId&&void 0!==this.partnerId&&(e.xb("partnerId",i.Type.STRING,1),e.qb(this.partnerId),e.Gb()),null!==this.customerId&&void 0!==this.customerId&&(e.xb("customerId",i.Type.STRING,2),e.qb(this.customerId),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.TrackerAsQuery=function(e){this.asType=null,this.asn=null,e&&(void 0!==e.asType&&(this.asType=e.asType),void 0!==e.asn&&(this.asn=e.asn))},hive.services.protocol.IF.TrackerAsQuery.prototype={},hive.services.protocol.IF.TrackerAsQuery.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.asType=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.I32?this.asn=e.Fb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.TrackerAsQuery.prototype.write=function(e){e.Hb("TrackerAsQuery"),null!==this.asType&&void 0!==this.asType&&(e.xb("asType",i.Type.I32,1),e.Vb(this.asType),e.Gb()),null!==this.asn&&void 0!==this.asn&&(e.xb("asn",i.Type.I32,2),e.Vb(this.asn),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.TrackerBitrateQuery=function(e){this.bitrate=null,this.asn=null,this.streamState=null,e&&(void 0!==e.bitrate&&(this.bitrate=e.bitrate),void 0!==e.asn&&(this.asn=e.asn),void 0!==e.streamState&&(this.streamState=e.streamState))},hive.services.protocol.IF.TrackerBitrateQuery.prototype={},hive.services.protocol.IF.TrackerBitrateQuery.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.bitrate=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.STRUCT?(this.asn=new hive.services.protocol.IF.TrackerAsQuery,this.asn.read(e)):e.Mb(r);break;case 3:r==i.Type.I32?this.streamState=e.Fb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.TrackerBitrateQuery.prototype.write=function(e){e.Hb("TrackerBitrateQuery"),null!==this.bitrate&&void 0!==this.bitrate&&(e.xb("bitrate",i.Type.I32,1),e.Vb(this.bitrate),e.Gb()),null!==this.asn&&void 0!==this.asn&&(e.xb("asn",i.Type.STRUCT,2),this.asn.write(e),e.Gb()),null!==this.streamState&&void 0!==this.streamState&&(e.xb("streamState",i.Type.I32,3),e.Vb(this.streamState),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.TrackerRankQuery=function(e){this.rankType=null,this.asQuery=null,e&&(void 0!==e.rankType&&(this.rankType=e.rankType),void 0!==e.asQuery&&(this.asQuery=e.asQuery))},hive.services.protocol.IF.TrackerRankQuery.prototype={},hive.services.protocol.IF.TrackerRankQuery.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.rankType=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.STRUCT?(this.asQuery=new hive.services.protocol.IF.TrackerAsQuery,this.asQuery.read(e)):e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.TrackerRankQuery.prototype.write=function(e){e.Hb("TrackerRankQuery"),null!==this.rankType&&void 0!==this.rankType&&(e.xb("rankType",i.Type.I32,1),e.Vb(this.rankType),e.Gb()),null!==this.asQuery&&void 0!==this.asQuery&&(e.xb("asQuery",i.Type.STRUCT,2),this.asQuery.write(e),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.TrackerQuery=function(e){this.random=null,this.asns=null,this.watchers=null,this.streamers=null,this.rankings=null,e&&(void 0!==e.random&&(this.random=e.random),void 0!==e.asns&&(this.asns=e.asns),void 0!==e.watchers&&(this.watchers=e.watchers),void 0!==e.streamers&&(this.streamers=e.streamers),void 0!==e.rankings&&(this.rankings=e.rankings))},hive.services.protocol.IF.TrackerQuery.prototype={},hive.services.protocol.IF.TrackerQuery.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.random=e.Fb().value:e.Mb(r);break;case 2:if(r==i.Type.MAP){var s,o=0;this.asns={};s=e.i_(),s.n_,s.s_,o=s.size;for(var a=0;a<o;++a){a>0&&e.JC.length>e.zb[e.zb.length-1]+1&&e.JC.pop();var h=null,c=null;h=new hive.services.protocol.IF.TrackerAsQuery,h.read(e),c=e.Fb().value,this.asns[h]=c}e.o_()}else e.Mb(r);break;case 3:if(r==i.Type.MAP){var u,l=0;this.watchers={};u=e.i_(),u.n_,u.s_,l=u.size;for(var p=0;p<l;++p){p>0&&e.JC.length>e.zb[e.zb.length-1]+1&&e.JC.pop();var d=null,f=null;d=new hive.services.protocol.IF.TrackerBitrateQuery,d.read(e),f=e.Fb().value,this.watchers[d]=f}e.o_()}else e.Mb(r);break;case 4:if(r==i.Type.MAP){var g,E=0;this.streamers={};g=e.i_(),g.n_,g.s_,E=g.size;for(var v=0;v<E;++v){v>0&&e.JC.length>e.zb[e.zb.length-1]+1&&e.JC.pop();var y=null,T=null;y=new hive.services.protocol.IF.TrackerBitrateQuery,y.read(e),T=e.Fb().value,this.streamers[y]=T}e.o_()}else e.Mb(r);break;case 5:if(r==i.Type.LIST){var m,I=0;this.rankings=[];m=e.a_(),m.h_,I=m.size;for(var S=0;S<I;++S){var R=null;R=e.Fb().value,this.rankings.push(R)}e.c_()}else e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.TrackerQuery.prototype.write=function(e){if(e.Hb("TrackerQuery"),null!==this.random&&void 0!==this.random&&(e.xb("random",i.Type.I32,1),e.Vb(this.random),e.Gb()),null!==this.asns&&void 0!==this.asns){e.xb("asns",i.Type.MAP,2),e.UC(i.Type.STRUCT,i.Type.I32,i.Eb(this.asns));for(var t=0;t<this.asns.length;t++){var r=this.asns[t],n=r.key,s=r.value;n.write(e),e.Vb(s)}e.BC(),e.Gb()}if(null!==this.watchers&&void 0!==this.watchers){e.xb("watchers",i.Type.MAP,3),e.UC(i.Type.STRUCT,i.Type.I32,i.Eb(this.watchers));for(var t=0;t<this.watchers.length;t++){var r=this.watchers[t],o=r.key,a=r.value;o.write(e),e.Vb(a)}e.BC(),e.Gb()}if(null!==this.streamers&&void 0!==this.streamers){e.xb("streamers",i.Type.MAP,4),e.UC(i.Type.STRUCT,i.Type.I32,i.Eb(this.streamers));for(var t=0;t<this.streamers.length;t++){var r=this.streamers[t],h=r.key,c=r.value;h.write(e),e.Vb(c)}e.BC(),e.Gb()}if(null!==this.rankings&&void 0!==this.rankings){e.xb("rankings",i.Type.LIST,5),e.HC(i.Type.I32,this.rankings.length);for(var u in this.rankings)this.rankings.hasOwnProperty(u)&&(u=this.rankings[u],e.Vb(u));e.xC(),e.Gb()}e.jb(),e.Qb()},hive.services.protocol.IF.TrackerPeerRankingKey=function(e){this.rankType=null,this.internalAs=null,this.externalAs=null,e&&(void 0!==e.rankType&&(this.rankType=e.rankType),void 0!==e.internalAs&&(this.internalAs=e.internalAs),void 0!==e.externalAs&&(this.externalAs=e.externalAs))},hive.services.protocol.IF.TrackerPeerRankingKey.prototype={},hive.services.protocol.IF.TrackerPeerRankingKey.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.rankType=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.I32?this.internalAs=e.Fb().value:e.Mb(r);break;case 3:r==i.Type.I32?this.externalAs=e.Fb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.TrackerPeerRankingKey.prototype.write=function(e){e.Hb("TrackerPeerRankingKey"),null!==this.rankType&&void 0!==this.rankType&&(e.xb("rankType",i.Type.I32,1),e.Vb(this.rankType),e.Gb()),null!==this.internalAs&&void 0!==this.internalAs&&(e.xb("internalAs",i.Type.I32,2),e.Vb(this.internalAs),e.Gb()),null!==this.externalAs&&void 0!==this.externalAs&&(e.xb("externalAs",i.Type.I32,3),e.Vb(this.externalAs),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.TrackerPeerRanking=function(e){this.key=null,this.ranking=null,this.groupSize=null,this.cumulatedRankValue=null,this.totalOfRankValues=null,e&&(void 0!==e.key&&(this.key=e.key),void 0!==e.ranking&&(this.ranking=e.ranking),void 0!==e.groupSize&&(this.groupSize=e.groupSize),void 0!==e.cumulatedRankValue&&(this.cumulatedRankValue=e.cumulatedRankValue),void 0!==e.totalOfRankValues&&(this.totalOfRankValues=e.totalOfRankValues))},hive.services.protocol.IF.TrackerPeerRanking.prototype={},hive.services.protocol.IF.TrackerPeerRanking.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRUCT?(this.key=new hive.services.protocol.IF.TrackerPeerRankingKey,this.key.read(e)):e.Mb(r);break;case 2:r==i.Type.I32?this.ranking=e.Fb().value:e.Mb(r);break;case 3:r==i.Type.I32?this.groupSize=e.Fb().value:e.Mb(r);break;case 4:r==i.Type.DOUBLE?this.cumulatedRankValue=e.E_().value:e.Mb(r);break;case 5:r==i.Type.DOUBLE?this.totalOfRankValues=e.E_().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.TrackerPeerRanking.prototype.write=function(e){e.Hb("TrackerPeerRanking"),null!==this.key&&void 0!==this.key&&(e.xb("key",i.Type.STRUCT,1),this.key.write(e),e.Gb()),null!==this.ranking&&void 0!==this.ranking&&(e.xb("ranking",i.Type.I32,2),e.Vb(this.ranking),e.Gb()),null!==this.groupSize&&void 0!==this.groupSize&&(e.xb("groupSize",i.Type.I32,3),e.Vb(this.groupSize),e.Gb()),null!==this.cumulatedRankValue&&void 0!==this.cumulatedRankValue&&(e.xb("cumulatedRankValue",i.Type.DOUBLE,4),e.YC(this.cumulatedRankValue),e.Gb()),null!==this.totalOfRankValues&&void 0!==this.totalOfRankValues&&(e.xb("totalOfRankValues",i.Type.DOUBLE,5),e.YC(this.totalOfRankValues),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.TrackerRequest=function(e){this.info=null,this.contentId=null,this.query=null,this.streamType=null,this.sessionId=null,this.customerKey=null,e&&(void 0!==e.info&&(this.info=e.info),void 0!==e.contentId&&(this.contentId=e.contentId),void 0!==e.query&&(this.query=e.query),void 0!==e.streamType&&(this.streamType=e.streamType),void 0!==e.sessionId&&(this.sessionId=e.sessionId),void 0!==e.customerKey&&(this.customerKey=e.customerKey))},hive.services.protocol.IF.TrackerRequest.prototype={},hive.services.protocol.IF.TrackerRequest.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRUCT?(this.info=new hive.services.protocol.IF.TrackerPeerInfo,this.info.read(e)):e.Mb(r);break;case 2:r==i.Type.STRING?this.contentId=e.Lb().value:e.Mb(r);break;case 3:r==i.Type.STRUCT?(this.query=new hive.services.protocol.IF.TrackerQuery,this.query.read(e)):e.Mb(r);break;case 4:r==i.Type.I32?this.streamType=e.Fb().value:e.Mb(r);break;case 5:r==i.Type.STRING?this.sessionId=e.Lb().value:e.Mb(r);break;case 6:r==i.Type.STRUCT?(this.customerKey=new hive.services.protocol.IF.CustomerKey,this.customerKey.read(e)):e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.TrackerRequest.prototype.write=function(e){e.Hb("TrackerRequest"),null!==this.info&&void 0!==this.info&&(e.xb("info",i.Type.STRUCT,1),this.info.write(e),e.Gb()),null!==this.contentId&&void 0!==this.contentId&&(e.xb("contentId",i.Type.STRING,2),e.qb(this.contentId),e.Gb()),null!==this.query&&void 0!==this.query&&(e.xb("query",i.Type.STRUCT,3),this.query.write(e),e.Gb()),null!==this.streamType&&void 0!==this.streamType&&(e.xb("streamType",i.Type.I32,4),e.Vb(this.streamType),e.Gb()),null!==this.sessionId&&void 0!==this.sessionId&&(e.xb("sessionId",i.Type.STRING,5),e.qb(this.sessionId),e.Gb()),null!==this.customerKey&&void 0!==this.customerKey&&(e.xb("customerKey",i.Type.STRUCT,6),this.customerKey.write(e),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.TrackerResponse=function(e){this.infos=null,this.rankings=null,this.peerInfo=null,this.sessionId=null,e&&(void 0!==e.infos&&(this.infos=e.infos),void 0!==e.rankings&&(this.rankings=e.rankings),void 0!==e.peerInfo&&(this.peerInfo=e.peerInfo),void 0!==e.sessionId&&(this.sessionId=e.sessionId))},hive.services.protocol.IF.TrackerResponse.prototype={},hive.services.protocol.IF.TrackerResponse.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:if(r==i.Type.LIST){var s,o=0;this.infos=[];s=e.a_(),s.h_,o=s.size;for(var a=0;a<o;++a){var h=null;h=new hive.services.protocol.IF.TrackerPeerInfo,h.read(e),this.infos.push(h)}e.c_()}else e.Mb(r);break;case 2:if(r==i.Type.LIST){var c,u=0;this.rankings=[];c=e.a_(),c.h_,u=c.size;for(var l=0;l<u;++l){var p=null;p=new hive.services.protocol.IF.TrackerPeerRanking,p.read(e),this.rankings.push(p)}e.c_()}else e.Mb(r);break;case 3:r==i.Type.STRUCT?(this.peerInfo=new hive.services.protocol.IF.TrackerPeerInfo,this.peerInfo.read(e)):e.Mb(r);break;case 4:r==i.Type.STRING?this.sessionId=e.Lb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.TrackerResponse.prototype.write=function(e){if(e.Hb("TrackerResponse"),null!==this.infos&&void 0!==this.infos){e.xb("infos",i.Type.LIST,1),e.HC(i.Type.STRUCT,this.infos.length);for(var t in this.infos)this.infos.hasOwnProperty(t)&&(t=this.infos[t],t.write(e));e.xC(),e.Gb()}if(null!==this.rankings&&void 0!==this.rankings){e.xb("rankings",i.Type.LIST,2),e.HC(i.Type.STRUCT,this.rankings.length);for(var r in this.rankings)this.rankings.hasOwnProperty(r)&&(r=this.rankings[r],r.write(e));e.xC(),e.Gb()}null!==this.peerInfo&&void 0!==this.peerInfo&&(e.xb("peerInfo",i.Type.STRUCT,3),this.peerInfo.write(e),e.Gb()),null!==this.sessionId&&void 0!==this.sessionId&&(e.xb("sessionId",i.Type.STRING,4),e.qb(this.sessionId),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.PF=function(e){this.timestamp=null,this.contentId=null,this.asType=null,this.asn=null,this.bitrate=null,this.streamState=null,this.rankType=null,e&&(void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.contentId&&(this.contentId=e.contentId),void 0!==e.asType&&(this.asType=e.asType),void 0!==e.asn&&(this.asn=e.asn),void 0!==e.bitrate&&(this.bitrate=e.bitrate),void 0!==e.streamState&&(this.streamState=e.streamState),void 0!==e.rankType&&(this.rankType=e.rankType))},hive.services.protocol.IF.PF.prototype={},hive.services.protocol.IF.PF.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.timestamp=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.STRING?this.contentId=e.Lb().value:e.Mb(r);break;case 3:r==i.Type.I32?this.asType=e.Fb().value:e.Mb(r);break;case 4:r==i.Type.I32?this.asn=e.Fb().value:e.Mb(r);break;case 5:r==i.Type.I32?this.bitrate=e.Fb().value:e.Mb(r);break;case 6:r==i.Type.I32?this.streamState=e.Fb().value:e.Mb(r);break;case 7:r==i.Type.I32?this.rankType=e.Fb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.PF.prototype.write=function(e){e.Hb("TrackerStoreIndexKey"),null!==this.timestamp&&void 0!==this.timestamp&&(e.xb("timestamp",i.Type.I32,1),e.Vb(this.timestamp),e.Gb()),null!==this.contentId&&void 0!==this.contentId&&(e.xb("contentId",i.Type.STRING,2),e.qb(this.contentId),e.Gb()),null!==this.asType&&void 0!==this.asType&&(e.xb("asType",i.Type.I32,3),e.Vb(this.asType),e.Gb()),null!==this.asn&&void 0!==this.asn&&(e.xb("asn",i.Type.I32,4),e.Vb(this.asn),e.Gb()),null!==this.bitrate&&void 0!==this.bitrate&&(e.xb("bitrate",i.Type.I32,5),e.Vb(this.bitrate),e.Gb()),null!==this.streamState&&void 0!==this.streamState&&(e.xb("streamState",i.Type.I32,6),e.Vb(this.streamState),e.Gb()),null!==this.rankType&&void 0!==this.rankType&&(e.xb("rankType",i.Type.I32,7),e.Vb(this.rankType),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.AF=function(e){this.guid=null,this.OF=null,this.key=null,e&&(void 0!==e.guid&&(this.guid=e.guid),void 0!==e.OF&&(this.OF=e.OF),void 0!==e.key&&(this.key=e.key))},hive.services.protocol.IF.AF.prototype={},hive.services.protocol.IF.AF.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.guid=e.v_().value:e.Mb(r);break;case 2:r==i.Type.DOUBLE?this.OF=e.E_().value:e.Mb(r);break;case 3:r==i.Type.STRUCT?(this.key=new hive.services.protocol.IF.TrackerPeerRankingKey,this.key.read(e)):e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.AF.prototype.write=function(e){e.Hb("TrackerStoreRankPeer"),null!==this.guid&&void 0!==this.guid&&(e.xb("guid",i.Type.STRING,1),e.WC(this.guid),e.Gb()),null!==this.OF&&void 0!==this.OF&&(e.xb("rank",i.Type.DOUBLE,2),e.YC(this.OF),e.Gb()),null!==this.key&&void 0!==this.key&&(e.xb("key",i.Type.STRUCT,3),this.key.write(e),e.Gb()),e.jb(),e.Qb()},hive.services.protocol.IF.NF=function(e){this.timestamp=null,this.request=null,e&&(void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.request&&(this.request=e.request))},hive.services.protocol.IF.NF.prototype={},hive.services.protocol.IF.NF.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I64?this.timestamp=e.g_().value:e.Mb(r);break;case 2:r==i.Type.STRUCT?(this.request=new hive.services.protocol.IF.TrackerRequest,this.request.read(e)):e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.services.protocol.IF.NF.prototype.write=function(e){e.Hb("TrackerRequestQueueMessage"),null!==this.timestamp&&void 0!==this.timestamp&&(e.xb("timestamp",i.Type.I64,1),e.KC(this.timestamp),e.Gb()),null!==this.request&&void 0!==this.request&&(e.xb("request",i.Type.STRUCT,2),this.request.write(e),e.Gb()),e.jb(),e.Qb()}},function(e,t,r){"use strict";var i=function(){function e(e,t,r,i,n){this.id=e,this.bitrate=t,this.duration=r,this.uri=i,this.yM=n}return e}();t.DF=i},function(e,t,r){"use strict";var i=r(1),n=function(){function e(e,t,r){this.start=e,this.end=t,this.total=r}return e.prototype.size=function(){var e=this.end-this.start+1;return Number.isInteger(e)||(i.ErrorMonitor.ve().logError("Segment Size is a Float",{size:e}),e=Math.round(e)),0==this.end&&0==this.start?0:e},e.prototype.kF=function(){return 0==this.start&&(this.end==this.total-1||this.end==this.total&&0==this.total)},e.prototype.LF=function(){return this.end==this.total-1||this.end==this.total&&0==this.total},e.prototype.MF=function(e){return e.start<=this.start&&this.start<=e.end},e.prototype.toString=function(){return"R[S="+this.start+",E="+this.end+",T="+this.total+"]"},e}();t.FF=n;var s=function(){function e(){}return e.UF=function(e){return e.split("-")},e.BF=function(e){var t=e.split("=",4),r=t[1].substr(0,t[1].indexOf(",")),i=t[2].substr(0,t[2].indexOf(",")),s=t[3].substr(0,t[3].indexOf("]"));return new n(+r,+i,+s)},e}();t.HF=s},function(e,t){e.i=function(e){return e.xF||(e.qF=function(){},e.GF=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{p:!0,get:function(){return e.o}}),Object.defineProperty(e,"id",{p:!0,get:function(){return e.s}}),e.xF=1),e}},function(e,t){function r(e,t){for(var r=0,i=e.length-1;i>=0;i--){var n=e[i];"."===n?e.splice(i,1):".."===n?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)t(e[i],i,e)&&r.push(e[i]);return r}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return n.exec(e).slice(1)};t.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var s=n>=0?arguments[n]:process.VF();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,t="/"===s.charAt(0))}return e=r(i(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},t.normalize=function(e){var n=t.jF(e),s="/"===o(e,-1);return e=r(i(e.split("/"),function(e){return!!e}),!n).join("/"),e||n||(e="."),e&&s&&(e+="/"),(n?"/":"")+e},t.jF=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.QF=function(e,r){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var n=i(e.split("/")),s=i(r.split("/")),o=Math.min(n.length,s.length),a=o,h=0;h<o;h++)if(n[h]!==s[h]){a=h;break}for(var c=[],h=a;h<n.length;h++)c.push("..");return c=c.concat(s.slice(a)),c.join("/")},t.KF="/",t.YF=":",t.WF=function(e){var t=s(e),r=t[0],i=t[1];return r||i?(i&&(i=i.substr(0,i.length-1)),r+i):"."},t.zF=function(e,t){var r=s(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.JF=function(e){return s(e)[3]};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}},function(e,t,r){"use strict";function i(e,t){Array.prototype[e]||Object.defineProperty(Array.prototype,e,{value:t,Ah:!0,l:!0,p:!1})}function n(e,t,r){this.NT=e,this.start=null==t?0:t,this.end=r}var s=(r(66),r(12)),o=r(67),a=r(37);e.i=Array;var h=Array.prototype.splice,c=Array.prototype.slice;Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=Array.from||function(e){var t=[];return t.addEach(e),t},Array.Mc=function(e){for(var t=[],r=1/0,i=0;i<e.length;i++){var n=e[i];e[i]=n.toArray(),n.length<r&&(r=n.length)}for(var i=0;i<e.length;i++)for(var n=e[i],s=0;s<n.length;s++)s<r&&s in n&&(t[s]=t[s]||[],t[s][i]=n[s]);return t},i("addEach",s.prototype.addEach),i("deleteEach",s.prototype._c),i("toArray",s.prototype.toArray),i("toObject",s.prototype.Pc),i("all",s.prototype.all),i("any",s.prototype.uo),i("min",s.prototype.min),i("max",s.prototype.max),i("sum",s.prototype.Nc),i("average",s.prototype.Dc),i("only",s.prototype.only),i("flatten",s.prototype.kc),i("zip",s.prototype.Lc),i("enumerate",s.prototype.enumerate),i("group",s.prototype.group),i("sorted",s.prototype.Fc),i("reversed",s.prototype.reversed),i("constructClone",function(e){var t=new this.constructor;return t.addEach(e),t}),i("has",function(e,t){return-1!==this.find(e,t)}),i("set",function(e,t){return this[e]=t,!0}),i("add",function(e){return this.push(e),!0}),i("delete",function(e,t){var r=this.find(e,t);return-1!==r&&(this.splice(r,1),!0)}),i("deleteAll",function(e,t){t=t||this.ls||Object.cs;for(var r=0,i=0;i<this.length;)t(e,this[i])?(this.qk(i,1),r++):i++;return r}),i("find",function(e,t){t=t||this.ls||Object.cs;for(var r=0;r<this.length;r++)if(r in this&&t(e,this[r]))return r;return-1}),i("findLast",function(e,t){t=t||this.ls||Object.cs;var r=this.length;do{if(--r in this&&t(this[r],e))return r}while(r>0);return-1}),i("swap",function(e,t,r){var i,n,s,o,a;if(e>this.length&&(this.length=e),void 0!==r){if(i=[e,t],Array.isArray(r)||(r=c.call(r)),s=0,(n=r.length)<1e3){for(s;s<n;s++)i[s+2]=r[s];return h.apply(this,i)}for(a=h.apply(this,i),s;s<n;){for(i=[e+s,0],o=2;o<1002&&s<n;o++,s++)i[o]=r[s];h.apply(this,i)}return a}return void 0!==t?h.call(this,e,t):void 0!==e?h.call(this,e):[]}),i("peek",function(){return this[0]}),i("poke",function(e){this.length>0&&(this[0]=e)}),i("peekBack",function(){if(this.length>0)return this[this.length-1]}),i("pokeBack",function(e){this.length>0&&(this[this.length-1]=e)}),i("one",function(){for(var e in this)if(Object.OA(this,e))return this[e]}),Array.prototype.clear||i("clear",function(){return this.length=0,this}),i("compare",function(e,t){t=t||Object.Oc;var r,i,n,s,a;if(this===e)return 0;if(!e||!Array.isArray(e))return o.prototype.Oc.call(this,e,t);for(i=Math.min(this.length,e.length),r=0;r<i;r++)if(r in this){if(!(r in e))return-1;if(n=this[r],s=e[r],a=t(n,s))return a}else if(r in e)return 1;return this.length-e.length}),i("equals",function(e,t){t=t||Object.cs;var r,i,n=0,s=this.length;if(this===e)return!0;if(!e||!Array.isArray(e))return o.prototype.cs.call(this,e);if(s!==e.length)return!1;for(;n<s;++n)if(n in this){if(!(n in e))return!1;if(r=this[n],i=e[n],!t(r,i))return!1}else if(n in e)return!1;return!0}),i("clone",function(e,t){if(null==e)e=1/0;else if(0===e)return this;if(t=t||new a,t.has(this))return t.get(this);var r=new Array(this.length);t.set(this,r);for(var i in this)r[i]=Object.clone(this[i],e-1,t);return r}),i("iterate",function(e,t){return new n(this,e,t)}),i("Iterator",n),n.prototype.Gk=null,Object.defineProperty(n.prototype,"_iterationObject",{get:function(){return this.Gk||(this.Gk={done:!1,value:null})}}),n.prototype.next=function(){return this.start===(null==this.end?this.NT.length:this.end)?(this.Vk.done=!0,this.Vk.value=void 0):this.Vk.value=this.NT[this.start++],this.Vk}},function(e,t){e.i=Function,Function.us=function(){},Function.identity=function(e){return e},Function.Uc=function(e,t){t=t||Object.Oc,e=e||Function.identity;var r=function(r,i){return t(e(r),e(i))};return r.Oc=t,r.Uc=e,r},Function.get=function(e){return function(t){return Object.get(t,e)}}},function(e,t,r){function i(){throw new Error("Can't construct. GenericOrder is a mixin.")}var n=r(36);e.i=i,i.prototype.cs=function(e,t){if(t=t||this.ls||n.cs,this===e)return!0;if(!e)return!1;return this.length===e.length&&this.Lc(e).every(function(e){return t(e[0],e[1])})},i.prototype.Oc=function(e,t){if(t=t||this.Ac||n.Oc,this===e)return 0;if(!e)return 1;var r=Math.min(this.length,e.length),i=this.Lc(e).reduce(function(e,i,n){return 0===e?n>=r?e:t(i[0],i[1]):e},0);return 0===i?this.length-e.length:i},i.prototype.toJSON=function(){return this.toArray()}},function(e,t,r){"use strict";function i(e,t,r,n){if(!(this instanceof i))return new i(e,t,r,n);t=t||Object.cs,r=r||Object.hash,n=n||Function.us,this.ls=t,this.ps=r,this.ds=n,this.order=new this.XF(void 0,t),this.fs=new this.ZF(void 0,function(e,r){return t(e.value,r.value)},function(e){return r(e.value)}),this.length=0,this.addEach(e)}var n=(r(11),r(50)),s=r(102),o=r(12),a=r(39),h=r(13),c=r(38),u=r(103);e.i=i,i.Set=i,Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,a.prototype),Object.addEach(i.prototype,h.prototype),Object.addEach(i.prototype,c.prototype),Object.defineProperty(i.prototype,"size",o.gs),i.prototype.XF=n,i.prototype.ZF=s,i.prototype.Es=function(e){return new this.constructor(e,this.ls,this.ps,this.ds)},i.prototype.has=function(e){var t=new this.order.Node(e);return this.fs.has(t)},i.prototype.get=function(e,t){if(t)throw new Error("Set#get does not support second argument: equals");var r=new this.order.Node(e);return r=this.fs.get(r),r?r.value:this.ds(e)},i.prototype.add=function(e){var t=new this.order.Node(e);if(!this.fs.has(t)){var r=this.length;return this.Mk&&this.QA([e],[],r),this.order.add(e),t=this.order.head.Ok,this.fs.add(t),this.length++,this.Mk&&this.GA([e],[],r),!0}return!1},i.prototype.delete=function(e,t){if(t)throw new Error("Set#delete does not support second argument: equals");var r=new this.order.Node(e);return!!this.fs.has(r)&&(r=this.fs.get(r),this.Mk&&this.QA([],[e],r.index),this.fs.delete(r),this.order.splice(r,1),this.length--,this.Mk&&this.GA([],[e],r.index),!0)},i.prototype.pop=function(){if(this.length){var e=this.order.head.Ok.value;return this.delete(e),e}},i.prototype.shift=function(){if(this.length){var e=this.order.head.next.value;return this.delete(e),e}},i.prototype.Bc=function(){if(this.length>0)return this.fs.Bc().value},i.prototype.clear=function(){var e;this.Mk&&(e=this.toArray(),this.QA([],e,0)),this.fs.clear(),this.order.clear(),this.length=0,this.Mk&&this.GA([],e,0)},i.prototype.reduce=function(e,t){var r=arguments[2],i=0;return this.order.reduce(function(t,n){return e.call(r,t,n,i++,this)},t,this)},i.prototype.reduceRight=function(e,t){var r=arguments[2],i=this.order,n=this.length-1;return i.reduceRight(function(t,i){return e.call(r,t,i,n--,this)},t,this)},i.prototype.Hc=function(){return this.order.Hc()},i.prototype.values=function(){return new u(this)},i.prototype.log=function(){var e=this.fs;return e.log.apply(e,arguments)},i.prototype.Xc=function(){this.order.Xc()}},function(e,t,r){"use strict";function i(){}e.i=i,i.$F={WA:"+",eU:"-",tU:"+",rU:"+",iU:".",nU:"'",sU:"+",oU:"|"},i.aU={WA:"╋",eU:"━",tU:"┻",rU:"┳",iU:"╭",nU:"╰",sU:"┣",oU:"┃"},i.hU={WA:"╋",eU:"━",tU:"┻",rU:"┳",iU:"┏",nU:"┗",sU:"┣",oU:"┃"}},function(e,t,r){"use strict";var i=function(){function e(){}return e}();i.dO="127.0.0.1",i.rL=11983,i.fO="//{0}:{1}/proxy/?callback={2}{3}hivePluginId={4}",i.cU="//{0}:{1}/proxy/{2}/session?manifest={3}",i.eL="//{0}:{1}/proxy/{2}/player?req={3}",i.uU="//{0}:{1}/proxy/{2}/info?{3}",t.tL=i},function(e,t,r){"use strict";var i=r(7),n=r(1),s=function(){function e(e){this.loggerId="[HiveXHR] ",this.DONE=4,this.LOADING=3,this.HEADERS_RECEIVED=2,this.OPENED=1,this.UNSENT=0,this.username=null,this.password=null,this.lU=[],this.responseType="",this.readyState=this.UNSENT,this.status=0,this.async=!0,this.timeout=0,this.events={},e&&(this.sessionId=e)}return e.prototype.addEventListener=function(e,t,r){this.events[e]=this.events[e]||[],this.events[e].push(t)},e.prototype.removeEventListener=function(e,t,r){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}))},e.prototype.dispatchEvent=function(e){var t=this;this.events[e.type]&&this.events[e.type].forEach(function(r){try{"function"==typeof r?r.call(t,e):"function"==typeof r.CL&&r.CL(e)}catch(r){n.ErrorMonitor.ve().logError(t.loggerId+"Error in callback handler '"+e.type+"'",{error:r})}});var r=this["on"+e.type];if("function"==typeof r)try{r.call(this,e)}catch(t){n.ErrorMonitor.ve().logError(this.loggerId+"Error in callback handler '"+e.type+"'",{error:t})}return!1},e.prototype.msCachingEnabled=function(){return void 0!==this.msCaching},e.prototype.overrideMimeType=function(e){this.mimeType=e},e.register=function(t,r){e.ub[t]=r},e.prototype.pU=function(t){this.sessionId||(this.sessionId=e.ub[t])},e.prototype.open=function(e,t,r,n,s){void 0===r&&(r=!0),void 0===n&&(n=null),void 0===s&&(s=null),this.url=t.trim(),this.method=e,this.username=n,this.password=s,this.async=r,this.readyState=this.OPENED;var o=i.rc.createEvent(Event,"readystatechange",{currentTarget:this});this.dispatchEvent(o)},e.prototype.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("The object's state must be OPENED.");this.lU.push({key:e,value:t})},e.prototype.getResponseHeader=function(e){var t=this.getAllResponseHeaders();if(t){var r=[];return t.split(/[\r\n]+/).forEach(function(e){var t=e.match(/^([^:]+): ?(.+)$/);t&&(r[t[1]]=t[2])}),r[e.toLowerCase()]}return null},e.prototype.getAllResponseHeaders=function(){return this.responseHeaders},e.prototype.onload=function(e){},e.prototype.onloadend=function(e){},e.prototype.onerror=function(e){},e.prototype.onprogress=function(e){},e.prototype.onreadystatechange=function(e){},e.prototype.onabort=function(e){},e.prototype.onloadstart=function(e){},e.prototype.ontimeout=function(e){},e}();s.ub={},s.Ag=0,t.pb=s},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(53),s=r(7),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.registerTech=function(e,r){t.iL[r]=e},t.registerComm=function(e,r){t.nL[r]=e},t.prototype.send=function(){if(!this.sessionId){var e=Object.keys(t.nL);e.length>0&&(this.sessionId=t.nL[e[0]])}var r=t.iL[this.sessionId],i=t.nL[this.sessionId];i.logger().debug("Intercepted Manifest Request "+this.url),r.oL(this),i.onActivateSession(this.url)},t.prototype.dU=function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.url),t.onreadystatechange=function(r){4===t.readyState&&(e.response=t.responseText,e.responseText=t.responseText,e.readyState=4,e.status=t.status,e.onreadystatechange(s.rc.createEvent(Event,"readystatechange",r,e)),e.onload(s.rc.createEvent(ProgressEvent,"load",r,e)),console.debug("Returned Manifest Request "+e.url))},t.send()},t.prototype.fU=function(){e.prototype.send.call(this)},t}(n.Zu);o.nL={},o.iL={},t.$u=o},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(15),s=r(0),o=r(32),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.Api=function(){return t.app="JS",s.Framework.resolve(n.qu._u)},t}(o.Hive);t.lb=a},function(e,t,r){function i(e,r){var i={gU:[],EU:s};return arguments.length>=3&&(i.vU=arguments[2]),arguments.length>=4&&(i.yU=arguments[3]),f(r)?i.TU=r:r&&t.mU(i,r),m(i.TU)&&(i.TU=!1),m(i.vU)&&(i.vU=2),m(i.yU)&&(i.yU=!1),m(i.IU)&&(i.IU=!0),i.yU&&(i.EU=n),a(i,e,i.vU)}function n(e,t){var r=i.SU[t];return r?"["+i.yU[r][0]+"m"+e+"["+i.yU[r][1]+"m":e}function s(e,t){return e}function o(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function a(e,r,i){if(e.IU&&r&&b(r.Is)&&r.Is!==t.Is&&(!r.constructor||r.constructor.prototype!==r)){var n=r.Is(i,e);return y(n)||(n=a(e,n,i)),n}var s=h(e,r);if(s)return s;var f=Object.keys(r),g=o(f);if(e.TU&&(f=Object.getOwnPropertyNames(r)),w(r)&&(f.indexOf("message")>=0||f.indexOf("description")>=0))return c(r);if(0===f.length){if(b(r)){var E=r.name?": "+r.name:"";return e.EU("[Function"+E+"]","special")}if(I(r))return e.EU(RegExp.prototype.toString.call(r),"regexp");if(R(r))return e.EU(Date.prototype.toString.call(r),"date");if(w(r))return c(r)}var v="",T=!1,m=["{","}"];if(d(r)&&(T=!0,m=["[","]"]),b(r)){v=" [Function"+(r.name?": "+r.name:"")+"]"}if(I(r)&&(v=" "+RegExp.prototype.toString.call(r)),R(r)&&(v=" "+Date.prototype.toUTCString.call(r)),w(r)&&(v=" "+c(r)),0===f.length&&(!T||0==r.length))return m[0]+v+m[1];if(i<0)return I(r)?e.EU(RegExp.prototype.toString.call(r),"regexp"):e.EU("[Object]","special");e.gU.push(r);var S;return S=T?u(e,r,i,g,f):f.map(function(t){return l(e,r,i,g,t,T)}),e.gU.pop(),p(S,v,m)}function h(e,t){if(m(t))return e.EU("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.EU(r,"string")}return v(t)?e.EU(""+t,"number"):f(t)?e.EU(""+t,"boolean"):g(t)?e.EU("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,r,i,n){for(var s=[],o=0,a=t.length;o<a;++o)O(t,String(o))?s.push(l(e,t,r,i,String(o),!0)):s.push("");return n.forEach(function(n){n.match(/^\d+$/)||s.push(l(e,t,r,i,n,!0))}),s}function l(e,t,r,i,n,s){var o,h,c;if(c=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},c.get?h=c.set?e.EU("[Getter/Setter]","special"):e.EU("[Getter]","special"):c.set&&(h=e.EU("[Setter]","special")),O(i,n)||(o="["+n+"]"),h||(e.gU.indexOf(c.value)<0?(h=g(r)?a(e,c.value,null):a(e,c.value,r-1),h.indexOf("\n")>-1&&(h=s?h.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+h.split("\n").map(function(e){return"   "+e}).join("\n"))):h=e.EU("[Circular]","special")),m(o)){if(s&&n.match(/^\d+$/))return h;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.EU(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.EU(o,"string"))}return o+": "+h}function p(e,t,r){var i=0;return e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function g(e){return null===e}function E(e){return null==e}function v(e){return"number"==typeof e}function y(e){return"string"==typeof e}function T(e){return"symbol"==typeof e}function m(e){return void 0===e}function I(e){return S(e)&&"[object RegExp]"===_(e)}function S(e){return"object"==typeof e&&null!==e}function R(e){return S(e)&&"[object Date]"===_(e)}function w(e){return S(e)&&("[object Error]"===_(e)||e instanceof Error)}function b(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function _(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,s=n.length,o=String(e).replace(N,function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<s;a=n[++r])g(a)||!S(a)?o+=" "+a:o+=" "+i(a);return o},t.qF=function(e,r){function i(){if(!n){if(process.RU)throw new Error(r);process.wU?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}if(m(global.process))return function(){return t.qF(e,r).apply(this,arguments)};if(!0===process.bU)return e;var n=!1;return i};var D,k={};t.CU=function(e){if(m(D)&&(D=process.Ms._U||""),e=e.toUpperCase(),!k[e])if(new RegExp("\\b"+e+"\\b","i").test(D)){var r=process.PU;k[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,i)}}else k[e]=function(){};return k[e]},t.Is=i,i.yU={bold:[1,22],AU:[3,23],OU:[4,24],inverse:[7,27],NU:[37,39],DU:[90,39],kU:[30,39],blue:[34,39],LU:[36,39],green:[32,39],MU:[35,39],red:[31,39],FU:[33,39]},i.SU={UU:"cyan",number:"yellow",BU:"yellow",undefined:"grey",HU:"bold",string:"green",_m:"magenta",xU:"red"},t.isArray=d,t.Ey=f,t.yy=g,t.sL=E,t.Ty=v,t.my=y,t.qU=T,t.Iy=m,t.GU=I,t.au=S,t.VU=R,t.jU=w,t.vy=b,t.QU=C,t.isBuffer=r(107);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.vb=r(108),t.mU=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}},function(e,t,r){"use strict";var i=r(18),n=r(3),s=r(33);r(114),r(115);var o=r(0),a=r(8),h=r(27),c=r(23),u=r(19),l=r(14),p=r(1),d=r(18);!function(e){var t=function(){function e(){this.metrics=new hive.snapshots.Metrics,this.KU=new hive.snapshots.Traffic,this.YU=new n,this.WU=new n,this.zU=new n,this.player=new hive.snapshots.Player}return e}();e.JU=t;var r=function(){function t(){this.ticket=null,this.XU=0,this.ZU=0,this.testId=null,this.$U()}return t.prototype.init=function(e,t,r,i){this.logger=o.Framework.resolve(o.Framework.V.R).log(i),this.ud=o.Framework.resolve(a.pc.sc),this.logger.debug("[SNAP] INIT STATS STORE - ID: "+e),this.gd=e,this.ticket=t,this.Vl(r)},t.prototype.NL=function(e){this.testId=e},t.prototype.eB=function(e){this.tB=e},t.prototype.Vl=function(e){this.app=e},t.prototype.rB=function(e){this.yD=e},t.prototype.$U=function(){this.iB=new e.JU,this.gd=null,this.ticket=null,this.reset()},t.prototype.reset=function(){this.FL=new e.JU,this.nB(this.FL.KU),this.sB(this.FL)},t.prototype.nB=function(e){e.reqN=0,e.respFallbackN=0,e.respFallbackErrN=0,e.respP2pN=0,e.reqOtherN=0,e.respFallbackOtherN=0,e.respFallbackOthertErrN=0,e.srcReqN=0,e.srcRespN=0,e.srcRespErrN=0,e.srcReqQt=0,e.srcRespQt=0,e.srcOverQt=0,e.srcOtherReqN=0,e.srcOtherRespN=0,e.srcOtherRespErrN=0,e.srcOtherReqQt=0,e.srcOtherRespQt=0,e.srcOtherOverQt=0,e.p2pSubReqN=0,e.p2pSubRespN=0,e.p2pSubRespPartN=0,e.p2pSubRespErrN=0,e.p2pSubRespExpN=0,e.p2pSubReqQt=0,e.p2pSubRespQt=0,e.p2pDirectQt=0,e.p2pRelayQt=0,e.p2pNatQt=0,e.p2pUdpbQt=0,e.fallAgentRespN=0,e.fallAgentPredHitN=0,e.fallAgentFailedRespN=0,e.fallAgenTrafficSuccessQt=0,e.p2pAgentPredHitN=0,e.p2pAgentPredMissN=0,e.p2pAgentPredPartialHitN=0,e.p2pAgenTrafficSuccessQt=0,e.p2pAgenTrafficFailureQt=0},t.prototype.sB=function(e){e.metrics.videoBufN=0,e.metrics.videoBufQt=0,e.metrics.clientBufferMs=0,e.metrics.lookupNotFound=0,e.metrics.lookupTotal=0,e.metrics.lookupLatency=0,e.metrics.lookupReqAccept=0,e.metrics.lookupReqEstablished=0,e.metrics.lookupFailed=0,e.player.bufferingN=0,e.player.bufferingMs=0},t.prototype.xc=function(e){var t=this;void 0===e&&(e=!0);var r=new hive.snapshots.MetricSnapshot;r.timestamp=o.Framework.time(),r.guid=this.gd,r.sessionId=this.ticket.sessionId,r.eventId=new EventId,r.eventId.partnerId=this.ticket.up(),r.eventId.customerId=this.ticket.cp(),r.eventId.contentId=this.ticket.hp();try{var n=new hive.snapshots.ClientInfo;n.clientType=this.oB();var s=this.app.version.split(".");if(n.majorVersion=parseInt(s[0]),n.minorVersion=parseInt(s[1]),n.patchVersion=parseInt(s[2]),r.client=n,null!=this.testId){var a=new TestInfo;a.testId=this.testId,r.aB=a}}catch(e){this.logger.warn("[SNAP] error setting Snapshot ClientInfo",e)}if(this.yD){var h=new hive.snapshots.AgentInfo;h.firstTierBitrates=this.yD.hB(),h.secondTierBitrates=this.yD.cB(),r.agentInfo=h}r.streamInfo=this.OL.uB(),r.traffic=[];var c=new hive.snapshots.TrafficKey;if(r.traffic.push({key:c,value:this.FL.KU}),this.FL.YU.forEach(function(e,t){var i=new hive.snapshots.TrafficKey;i.bitrate=t,r.traffic.push({key:i,value:e})}),r.metrics=this.FL.metrics,this.tB&&(r.metrics.clientBufferMs=this.tB.min()),r.player=this.FL.player,this.lB){var u=this.lB.pB();this.FL.metrics.prtOutN=u.dB+u.fB,this.FL.metrics.prtInN=u.gB+u.EB;var l=this.lB.vB();l.forEach(function(e,i){t.yB(i,e,r)}),this.FL.zU.filter(function(e,t){return!l.has(t)}).forEach(function(e,i){t.yB(i,e,r)})}return r.connInfo=new hive.snapshots.ConnectivityInfo,e?this.ud.getConnectivityInfo().then(function(e){return r.connInfo.privateIp=i.kl.getPrivateIp(e.getNetworkChanged()),t.TB(t.mB(r))}).fail(function(e){return t.TB(t.mB(r))}):(r.connInfo.privateIp=i.kl.getPrivateIp(this.ud.Md().getNetworkChanged()),this.TB(r))},t.prototype.mB=function(e){return e.connInfo.internalAs=this.XU,e.connInfo.externalAs=this.ZU,e.connInfo.publicIp=this.IB,e},t.prototype.TB=function(e,t){void 0===t&&(t=[]);var r=d.ml(e,"snapshot");return r.length&&p.ErrorMonitor.ve().logError("NaN found in MetricSnapshot","[SNAP]",{keysWithNaN:r,snapshot:e}),t.length=0,t.push.apply(t,r),e},t.prototype.oB=function(){var e;switch(this.app.app){case"JS":e=ClientType.SB;break;case"PROXY":e=ClientType.RB;break;default:e=ClientType.wB}return e},t.prototype.yB=function(e,t,r){var i=this.FL.WU.get(e);t.traffic=i,r.partners||(r.partners=[]);var n=new hive.snapshots.PartnerKey;n.partnerGuid=e,r.partners.push({key:n,value:t})},t.prototype.wL=function(e,t){e>0&&(this.FL.metrics.videoBufN++,this.FL.metrics.videoBufQt+=e,this.FL.player.bufferingN++,this.FL.player.bufferingMs+=e),this.FL.player.playerBufferMs=t},t.prototype.xL=function(){return this.FL.KU},t.prototype.bB=function(){return this.iB.KU},t.prototype.CB=function(e){return this.iB.YU.has(e)||this.iB.YU.set(e,new hive.snapshots.Traffic),this.iB.YU.get(e)},t.prototype.BL=function(e){if(!this.FL.YU.has(e)){var t=new hive.snapshots.Traffic;this.nB(t),this.FL.YU.set(e,t)}return this.FL.YU.get(e)},t.prototype._B=function(){var e=new hive.snapshots.PartnerTraffic;return e.p2pSuccReq=0,e.p2pFailReq=0,e.p2pPartReq=0,e.p2pSuccReceived=0,e.p2pSuccReceivedLow=0,e.p2pFailReceived=0,e.p2pSuccResp=0,e.p2pFailResp=0,e.p2pPartResp=0,e.p2pSuccSent=0,e.p2pSuccSentLow=0,e.p2pFailSent=0,e},t.prototype.PB=function(e,t){return t.WU.has(e)||t.WU.set(e,this._B()),t.WU.get(e)},t.prototype.AB=function(e){return this.PB(e,this.FL)},t.prototype.OB=function(e){return this.PB(e,this.iB)},t.prototype.NB=function(e){this.ud=e},t.prototype.DB=function(e){this.lB=e},t.prototype.Ud=function(e){},t}();e.ZF=r;var f=function(){function e(){this.kB=isNaN(l.HiveConfig.DebugLogs.MetricSnapshotLogs)?0:l.HiveConfig.DebugLogs.MetricSnapshotLogs,this.state=u.Ml.Ll,this.client=o.Framework.resolve(a.pc.G),this.yg=new s.Yb,this.protocol=new s.bC(this.yg)}return e.prototype.init=function(e,t){this.logger=o.Framework.resolve(o.Framework.V.R).log(t),this.logger.debug("[SNAP] INIT CLIENT STATS"),this.fs=e,this.LB()},e.prototype.LB=function(){var e=this;this.MB>-1&&o.Framework.clearInterval(this.MB),this.MB=o.Framework.setInterval(function(){e.snapshot()},h.Gd.qd.PE)},e.prototype.nl=function(e){this.state=e},e.prototype.IL=function(){if(this.fs)return this.snapshot(!1)},e.prototype.reset=function(e){o.Framework.clearInterval(this.MB),this.fs&&(!1===e?this.fs.reset():this.fs.$U())},e.prototype.snapshot=function(e){var t=this;void 0===e&&(e=!0);var r=this.fs.xc(e);e?(this.logger.debug("[SNAP] TAKING SNAPSHOT"),r.then(function(e){return t.forward(e)}).fail(function(e){t.logger.warn("[SNAP] ERROR FORWARDING SNAPSHOT",e)}).finally(function(){t.fs.reset()})):(this.logger.debug("[SNAP] FLUSHING SNAPSHOT"),this.forward(r))},e.prototype.forward=function(e){var t=this;if(this.state===u.Ml.IDLE||this.state===u.Ml.STOP)return void this.logger.debug("[SNAP] not send - state "+u.Ml[this.state]);if(this.client&&this.client.zd()){switch(this.kB){case 0:default:this.logger.debug("[SNAP] SENDING SNAPSHOT");break;case 1:this.logger.debug("[SNAP] SENDING SNAPSHOT "+JSON.stringify(e));break;case 2:this.logger.debug("[SNAP] SENDING SNAPSHOT",e);break;case 3:this.logger.debug("[SNAP] SENDING SNAPSHOT "+JSON.stringify(e),e)}this.protocol.AC("SNAPSHOT",s.gb.ONEWAY,0),e.write(this.protocol),this.protocol.DC();var r=this.yg.pC(),i=this.FB(r,",",4),n=r.slice(i+1,r.length-1),o=new c.Jd(Services.Xd,1,n);this.client.zd().send(o).fail(function(e){t.logger.warn("[SNAP] PROBLEM: ",e)})}},e.prototype.FB=function(e,t,r){return e.split(t,r).join(t).length},e}();e.ql=f}(t.Stats||(t.Stats={}))},function(e,t,r){"use strict";var i=r(4),n=r(30),s=r(116),o=r(0),a=r(27),h=r(23),c=r(6),u=c.he.gh,l=function(){function e(){this.logger=o.Framework.resolve(o.Framework.V.R).log(),this.logger.debug("INIT SERVICE CLIENT")}return e.prototype.init=function(e,t){var r=this;if(this.UB)this.UB.then(function(){var e={partnerId:t.up(),customerId:t.cp(),contentId:t.hp(),secret:t.CN()},i=new h.Jd(Services.BB,1,JSON.stringify(e));r.connection.send(i)});else{var o=i.defer(),c=a.Gd.qd.bE;t.bN&&(u?c=a.Gd.qd.CE:(this.logger.warn("[HiveComm] Error trying to resolve test ticket against production services - use production ticket or test plugin"),o.reject(new Error("test ticket in production"))));var l=new n(c),p=l.Sw({"connection-id":e,partner_id:t.up(),customer_id:t.cp(),content_id:t.hp(),ticket:t.CN()}).toString();this.connection=new s.HB(p,a.Gd.qd.AE,a.Gd.qd.OE,a.Gd.qd.NE),this.connection.xB(function(){r.logger.debug("HIVE SERVICES CONNECTED"),o.resolve(r.connection)}),this.connection.onerror(function(){r.logger.warn("Hive Services Connection failed"),o.reject(r.connection)}),this.UB=o.Ss}return{np:this.connection,Ss:this.UB}},e.prototype.connect=function(){this.connection&&this.connection.connect(!0)},e.prototype.SD=function(e){},e.prototype.zd=function(){return this.connection},e.prototype.close=function(){this.connection&&(this.UB=null,this.connection.close(!1))},e}();t.qB=l},function(e,t,r){"use strict";r(117);var i=r(4),n=r(3),s=r(0),o=r(46),a=function(){function e(e){this.ef=(new Date).getTime(),this.GB=e}return e}(),h=function(){function e(){this.VB=new n,this.logger=(s.Framework.resolve(s.Framework.V.R)||console).log(),this.logger.debug("INIT TICKET RESOLVER")}return e.prototype.resolve=function(e,t,r){var n=this,s=i.defer();return e&&(e.on(Services.BB,0,function(e){n.jB(e)}),e.on(Services.BB,2,function(e){n.jB(e)}),this.VB.set(t,new a(s))),s.Ss},e.prototype.jB=function(e){var t=this,r=(new Date).getTime(),i=JSON.parse(e.msg),n=!1;this.VB.forEach(function(e,s){if(t.QB(s,i)){n=!0;var o=t.KB(s,i);o?(o.ef=e.ef,o.rf=r,e.GB.resolve(o)):e.GB.reject("Ticket verification failed"),t.VB.delete(o)}}),n||this.logger.warn("no pending ticket matching: "+e.msg)},e.prototype.$l=function(e){if(new RegExp("^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?").test(e)){var t=this.YB();return t.RN(e),t}return null},e.prototype.YB=function(){return new o.BN},e.prototype.QB=function(e,t){return e.up()===t[o.BN.FN]&&e.cp()===t[o.BN.MN]&&e.hp()===t[o.BN.UN]},e.prototype.KB=function(e,t){return e.mN(t),e.SN()?e:null},e}();t.WB=h},function(e,t,r){/*! uuid.js
 * Copyright (c) 2010-2012 Robert Kieffer
 * MIT License - http://opensource.org/licenses/mit-license.php
 */
!function(t){"use strict";function i(e,t,r){var i=t&&r||0,n=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){n<16&&(t[i+n++]=f[e])});n<16;)t[i+n++]=0;return t}function n(e,t){var r=t||0,i=d;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}function s(e,t,r){var i=t&&r||0,s=t||[];e=e||{};var o=null!=e.zB?e.zB:y,a=null!=e.JB?e.JB:(new Date).getTime(),h=null!=e.XB?e.XB:m+1,c=a-T+(h-m)/1e4;if(c<0&&null==e.zB&&(o=o+1&16383),(c<0||a>T)&&null==e.XB&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");T=a,m=h,y=o,a+=122192928e5;var u=(1e4*(268435455&a)+h)%4294967296;s[i++]=u>>>24&255,s[i++]=u>>>16&255,s[i++]=u>>>8&255,s[i++]=255&u;var l=a/4294967296*1e4&268435455;s[i++]=l>>>8&255,s[i++]=255&l,s[i++]=l>>>24&15|16,s[i++]=l>>>16&255,s[i++]=o>>>8|128,s[i++]=255&o;for(var p=e.ZB||v,d=0;d<6;d++)s[i+d]=p[d];return t||n(s)}function o(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new p(16):null,e=null),e=e||{};var s=e.random||(e.$B||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;o++)t[i+o]=s[o];return t||n(s)}var a,h,c,u,l;t?function(){var e=t.crypto||t.msCrypto;if(!a&&e&&e.getRandomValues)try{var r=new Uint8Array(16);u=a=function(){return e.getRandomValues(r),r},a()}catch(e){}if(!a){var i=new Array(16);h=a=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}():function(){try{var e=r(118).eH;c=a=e&&function(){return e(16)},a()}catch(e){}}();for(var p="function"==typeof Buffer?Buffer:Array,d=[],f={},g=0;g<256;g++)d[g]=(g+256).toString(16).substr(1),f[d[g]]=g;var E=a(),v=[1|E[0],E[1],E[2],E[3],E[4],E[5]],y=16383&(E[6]<<8|E[7]),T=0,m=0,I=o;I.tH=s,I.ON=o,I.parse=i,I.rH=n,I.iH=p,I.nH=a,I.sH=h,I.oH=c,I.aH=u,void 0!==e&&e.i?e.i=I:(l=t.uuid,I.wo=function(){return t.uuid=l,I},t.uuid=I)}("undefined"!=typeof window?window:null)},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(4),s=r(78),o=r(0),a=r(27),h=r(119),c=function(){function e(){this.hH="IdentityStore",this.cH="IdentityDB",this.gd=null,this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,o.Framework&&o.Framework.resolve(o.Framework.V.R)?this.logger=o.Framework.resolve(o.Framework.V.R).log():this.logger=console}return e.prototype.uH=function(){var e=this,t=n.defer(),r=indexedDB.open(this.cH);return r.onupgradeneeded=function(){var t=r.result;t.createObjectStore(e.hH,{keyPath:"id"})},r.onsuccess=function(){var e=r.result;t.resolve(e)},r.onerror=function(e){t.reject(e)},t.Ss},e.prototype.Zl=function(){var e=this;if(this.lH)return this.lH;var t=n.defer();if(this.gd)t.resolve(new h.pH(this.gd));else if(a.Gd.Eh&&this.indexedDB){var r=setTimeout(function(){e.logger.warn("[HiveComm] timeout retrieving persistent ID - generating random one"),e.gd=e.dH(),e.logger.debug("[HiveComm] Generated UUID: "+e.gd),t.resolve(new h.pH(e.gd))},4e3);try{var i=this.uH();i.then(function(i){var n=i.transaction(e.hH,"readwrite"),s=n.objectStore(e.hH),o=s.get("MYID");o.onsuccess=function(){if(clearTimeout(r),e.gd)t.resolve(new h.pH(e.gd));else if(null!=o.result&&a.Gd.Eh){var n=o.result.value;e.logger.debug("[HiveComm] Retrieved persistent UUID: "+n),e.gd=n,i.close(),t.resolve(new h.pH(e.gd))}else{var s=e.dH();e.fH(i,s),t.resolve(new h.pH(e.gd))}},o.onerror=function(i){clearTimeout(r),e.gd||(e.logger.warn("[HiveComm] error retrieving persistent UUID: "+i),e.gd=e.dH(),e.logger.debug("[HiveComm] Generated UUID: "+e.gd)),t.resolve(new h.pH(e.gd))}}).fail(function(i){clearTimeout(r),e.gd||(e.logger.warn("[HiveComm] error opening indexedDB - generating random id. Error: "+i),e.gd=e.dH(),e.logger.debug("[HiveComm] Generated UUID: "+e.gd)),t.resolve(new h.pH(e.gd))})}catch(e){this.gd=this.dH(),this.logger.debug("[HiveComm] Persistence error - Generate UUID: "+this.gd,e),t.resolve(new h.pH(this.gd))}}else this.gd=this.dH(),this.logger.debug("[HiveComm] Persistence disabled - Generate UUID: "+this.gd),t.resolve(new h.pH(this.gd));return this.lH=t.Ss,this.lH},e.prototype.fH=function(e,t){var r=this,i=e.transaction(this.hH,"readwrite");i.objectStore(this.hH).put({id:"MYID",value:t}),i.oncomplete=function(){r.logger.debug("[HiveComm] completed UUID persistence"),e.close()},this.logger.debug("[HiveComm] Generated UUID: "+t),this.gd=t},e.prototype.dH=function(){return s.ON()},e}();t.gH=c;var u=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.Zl=function(){var t=this;if(this.EH)return this.EH;var r=n.defer();return e.prototype.Zl.call(this).then(function(e){var i=t.dH(),n=e.rp(),s=new h.pH(i,n);r.resolve(s)}).fail(function(e){var i=t.dH(),n=new h.pH(i);r.resolve(n)}),this.EH=r.Ss,this.EH},t}(c);t.vH=u},function(e,t,r){"use strict";var i=function(){function e(){}return e.prototype.yH=function(e){this.hostname=e},e.prototype.getHostName=function(){return this.hostname},e.prototype.TH=function(e){this.mH=e},e.prototype.getNetworkChanged=function(){return this.mH},e}();t.IH=i},function(e,t,r){"use strict";var i=r(4),n=r(0),s=r(8),o=r(120),a=r(1),h=function(){function e(){this.loggerId="[PreloadConnectivityInfoProvider] ",this.connInfo=window.myConnInfo,this.logger=n.Framework.resolve(n.Framework.V.R).log(),this.SH=n.Framework.resolve(s.pc.oc),this.connInfo||a.ErrorMonitor.ve().logError("helper undefined",this.loggerId),this.RH()}return e.prototype.RH=function(){var e=new o.wH;this.SH.TH(e)},e.prototype.Md=function(){return this.SH},e.prototype.getConnectivityInfo=function(){var e=this;if(!this.connInfo)return i.reject("ConnInfo helper undefined");var t=setTimeout(function(){return e.logger.warn(e.loggerId+"Get connectivity info expired"),e.SH?i.resolve(e.SH):i.reject("expired")},2e3);try{return this.connInfo.getConnectivityInfo().then(function(r){return clearTimeout(t),e.SH=r,r}).fail(function(t){return e.logger.debug(e.loggerId+" get connectivity info failed with error 1: ",t),e.SH?e.SH:i.reject(t)})}catch(e){return this.logger.debug(this.loggerId+" get connectivity info failed with error 2:",e),i.reject(e)}},e.prototype.bH=function(e,t,r){},e}();t.CH=h},function(e,t,r){"use strict";var i=function(){function e(){}return e.prototype._H=function(e){this.publicIp=e},e.prototype.getPublicIp=function(){return this.publicIp},e.prototype.PH=function(e){this.AH=e},e.prototype.getMacAddress=function(){return this.AH},e.prototype.OH=function(e){this.nic=e},e.prototype.getNic=function(){return this.nic},e.prototype.NH=function(e){this.nicName=e},e.prototype.getNicName=function(){return this.nicName},e.prototype.DH=function(e){this.privateIp=e},e.prototype.getPrivateIp=function(){return this.privateIp},e.prototype.kH=function(e){this.netmask=e},e.prototype.getNetmask=function(){return this.netmask},e.prototype.LH=function(e){this.MH=e},e.prototype.getCidr=function(){return null},e}();t.FH=i},function(e,t,r){"use strict";var i=r(4),n=r(3),s=r(0),o=r(8),a=r(82),h=r(121),c=r(14),u=r(27),l=r(55),p=function(){function e(){this.UH=null,this.BH=null,this.HH=null,this.xH=null,this.qH=new n,this.publicIp=null,this.GH=[],this.ll=!1,this.VH=null,this.logger=s.Framework.resolve(s.Framework.V.R).log(),this.SH=s.Framework.resolve(o.pc.oc),this.jH=new h.QH,this.KH=[],this.RH(),this.YH()}return e.prototype.RH=function(){var e=new a.FH;this.SH.TH(e)},e.prototype.YH=function(){var e=this;s.Framework.setInterval(function(){e.GH=[],e.KH=[],e.qH=new n,e.publicIp=null,e.WH=null},12e4)},e.prototype.getConnectivityInfo=function(){return this.WH||(this.WH=this.zH()),this.WH},e.prototype.Md=function(){return this.SH},e.prototype.zH=function(){var e=this,t=i.defer();if(this.VH=s.Framework.setTimeout(function(){t.reject({JH:!0,message:"expired"})},4e3),c.HiveConfig.ConnInfo.detectPrivateIP&&this.XH())try{this.UH=new RTCPeerConnection(null),this.HH=this.UH.createDataChannel("sendChannel",{reliable:!1}),this.BH=new RTCPeerConnection(null),this.BH.ondatachannel=function(r){e.xH=r.channel,e.xH.onopen=function(r){"open"===e.xH.readyState&&(e.logger.debug("Collected ips ["+e.qH.keys().join(", ")+"]"),e.BH.close(),e.jH.ZH().then(function(t){e.KH=t,e.logger.debug("Already known matching ips ["+e.KH.join(",")+"]");var r=e.qH.keys();e.KH.forEach(function(t){r.indexOf(t)>0&&(e.GH.push(t),e.qH.delete(t))}),e.qH.keys().forEach(function(t){e.GH.push(t)})}).fail(function(t){e.logger.warn("Get Previous working ips failed with error "+t.message),e.qH.keys().forEach(function(t){e.GH.push(t)})}).finally(function(){e.logger.debug("Final private ip list ["+e.GH.join(",")+"]"),t.resolve(e.$H())}))}},this.UH.onicecandidate=function(r){r.candidate&&e.ex(r.candidate.candidate),!r.candidate||e.BH.addIceCandidate(r.candidate).catch(function(r){t.reject({JH:!0,message:r.message}),s.Framework.clearTimeout(e.VH),console.log("Error: Failure during addIceCandidate()")})},this.BH.onicecandidate=function(r){r.candidate&&e.ex(r.candidate.candidate),!r.candidate||e.UH.addIceCandidate(r.candidate).catch(function(r){t.reject({JH:!0,message:r.message}),s.Framework.clearTimeout(e.VH),console.log("Error: Failure during addIceCandidate()")})},this.UH.createOffer().then(function(t){return e.UH.setLocalDescription(t)}).then(function(){return e.BH.setRemoteDescription(e.UH.localDescription)}).then(function(){return e.BH.createAnswer()}).then(function(t){return e.BH.setLocalDescription(t)}).then(function(){return e.UH.setRemoteDescription(e.BH.localDescription)}).catch(function(r){t.reject({JH:!0,message:r.message}),s.Framework.clearTimeout(e.VH),console.log("Error: Failure creating offer")})}catch(e){t.reject({JH:!0,message:e.message})}else{s.Framework.clearTimeout(this.VH);var r=c.HiveConfig.ConnInfo.detectPrivateIP?"webrtc datachannel not supported":"private IP detection disabled";t.reject({JH:!1,message:r})}return t.Ss},e.prototype.XH=function(){try{return null!=l.Vu&&null!=l.hL&&"function"==typeof new RTCPeerConnection(null,null).createDataChannel}catch(e){return!1}},e.prototype.ex=function(e){var t=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,r=t.exec(e);if(r){var i=r[0];this.qH.set(i,!0)}},e.prototype.$H=function(){var e=new a.FH;return this.GH.length>0&&e.DH(this.GH[0]),this.publicIp&&e._H(this.publicIp),this.SH.TH(e),this.SH},e.prototype.bH=function(e,t,r){if(this.publicIp=e,this.tx(),0===r&&this.GH.length>1)this.GH.shift();else if(u.Gd._h&&0!==r&&-1==this.KH.indexOf(this.GH[0]))this.KH.unshift(this.GH[0]),this.jH.ix(this.KH.slice(0,2));else if(u.Gd._h&&0!==r&&this.KH.indexOf(this.GH[0])>0){var i=this.KH.indexOf(this.GH[0]);this.KH=this.KH.splice(i,1),this.KH.unshift(this.GH[0]),this.jH.ix(this.KH.slice(0,2))}this.$H()},e.prototype.tx=function(){var e=this.GH.indexOf(this.publicIp);e>-1&&this.GH.splice(e,1)},e}();t.nx=p},function(e,t,r){"use strict";var i=r(7),n=r(24),s=r(9),o=r(0),a=r(5),h=r(2),c=r(1),u=function(){function e(){this.loggerId="[TIMER HANDLER] ",this.sx=new i.rc.Vh,this.ox=new i.rc.Vh,this.logger=o.Framework.resolve(o.Framework.V.R).log()}return e.prototype.ax=function(e,t){try{var r=0,i=-1,s=e.zf.duration;this.sx.kh()?i=Math.max(10,this.sx.Bh(t)):this.ox.kh()&&(i=Math.max(10,this.ox.Bh(t))),r=i>-1?Math.max(0,s-i*a.hh.Qo.jo):s/2,e.type==n.bf.wf&&(r*=2);var o=Math.max(this.hx(),r);return this.logger.debug("TIMER DETAILS duration: "+s+" left: "+t+" downTime: "+i+" fallAvg: "+this.sx.Gh()+" timer: "+o),o}catch(e){return c.ErrorMonitor.ve().logError("Error calculating the p2p timeout",this.loggerId,h.hs.Ii.Ti,e),0}},e.prototype.ux=function(e,t){return 5e3},e.prototype.lx=function(e){try{return this.sx.kh()?Math.min(this.sx.Bh(e),this.px()):this.gx()}catch(e){return c.ErrorMonitor.ve().logError("Error calculating the delivery delay",this.loggerId,h.hs.Ii.mi,e),this.gx()}},e.prototype._M=function(e){if(e.Xf()===s.vc.fc)switch(e.Jf()){case n.bf.mf:case n.bf.Tf:case n.bf.If:this.sx.Uh(e.ag());break;case n.bf.Rf:case n.bf.wf:this.ox.Uh(e.ag())}},e.prototype.hx=function(){return e.Ex},e.prototype.gx=function(){return e.vx},e.prototype.px=function(){return e.yx},e}();u.Ex=500,u.yx=1500,u.vx=500,t.Tx=u},function(e,t,r){"use strict";var i=r(3),n=r(48);r(144),r(146);var s=r(86),o=r(0),a=r(147),h=r(9),c=r(61),u=r(148),l=r(149),p=r(57),d=r(14),f=r(1),g=r(2),E=function(){function e(e){this.loggerId="[DASH METADATA] ",this.isLive=!1,this.logger=o.Framework&&o.Framework.resolve(o.Framework.V.R)?o.Framework.resolve(o.Framework.V.R).log(e):console,this.mx=new DashParser,this.reset()}return e.prototype.Ix=function(e){var t="";return-1!==e.indexOf("/")&&(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),t=e.substring(0,e.lastIndexOf("/")+1)),t},e.prototype.pM=function(){return this.isLive},e.prototype.lM=function(){return this.Sx.values().map(function(e){return e.bandwidth})},e.prototype.reset=function(){this.Sx=new i},e.prototype.Rx=function(){return this.wx},e.prototype.parse=function(t,r,i){try{this.reset(),this.IM=t,this.bx(t,r),this.isLive="static"!==this.manifest.type;for(var n=this.manifest.BaseURL,s=this.manifest.Period_asArray[0],o=s.AdaptationSet_asArray,c=0;c<o.length;c++){var u=s.AdaptationSet[c],l=-1!=u.mimeType.indexOf("audio")?h.vc.dc:h.vc.fc;l===h.vc.fc&&u.ContentProtection&&this.Cx(u.ContentProtection);for(var p=u.SegmentTemplate.initialization,d=u.SegmentTemplate.media,E=parseInt(u.SegmentTemplate.timescale),v=0;v<u.Representation_asArray.length;v++){var y=u.Representation_asArray[v],T=new a._x;T.type=l,T.bandwidth=parseInt(y.bandwidth),T.timescale=E,T.Px=y.id,T.initialization=n+""+p,T.initialization=T.initialization.replace(e.Ax,""+T.bandwidth),T.initialization=T.initialization.replace(e.Ox,""+T.Px),i||this.logger.debug("QualityLevel "+h.vc[l]+" "+T.bandwidth);var m=n+""+d;m=m.replace(e.Ax,""+T.bandwidth),m=m.replace(e.Ox,""+T.Px),T.Nx=m;var I=parseInt(T.bandwidth+""),S=this.Dx(u.SegmentTemplate.SegmentTimeline_asArray[0].S_asArray,m,I,l);T.kx=S.Lx,T.Mx=S.Fx;var R=this.Ux(m);this.Sx.set(R,T)}}return this.wx=!0,this.Bx(r,i)}catch(e){throw f.ErrorMonitor.ve().logError("Error parsing the metadata",this.loggerId,g.hs.ui.Wr,e),this.wx=!1,new Error(e)}},e.prototype.Dx=function(t,r,i,s){try{var o,a=new n,h=new n,u=0,l=0;return t.forEach(function(t){if(t.d){t.t?u=parseInt(t.t):u+=l;var n=parseInt(t.d),p=r.replace(e.Hx,u+""),d=new c.DF(u,i,n,p,p);d.type=s,o&&(o.next=d),a.set(p,d),h.set(u,d),o=d;var f=0;t.r&&(f=parseInt(t.r));for(var g=0;g<f;g++){u+=n;var p=r.replace(e.Hx,u+""),d=new c.DF(u,i,n,p,p);d.type=s,o&&(o.next=d),a.set(p,d),h.set(u,d),o=d}l=n}}),{Lx:a,Fx:h}}catch(e){throw f.ErrorMonitor.ve().logError("Error extracting segment maps",this.loggerId,g.hs.ui.zr,e),new Error(e)}},e.prototype.Cx=function(e){try{if(e){if(e.CryptoPeriod){var t=e.CryptoPeriod;this.OM&&!this.OM.xx()&&this.OM instanceof u.qx||(this.OM=new u.qx(t.keyUriTemplate,t.IV,this.authenticationToken))}else this.OM&&this.OM instanceof l.Gx||(this.OM=new l.Gx);this.OM&&p.DASH.XL&&this.OM.init()}}catch(e){throw f.ErrorMonitor.ve().logError("Error initializing the protection",this.loggerId,g.hs.ui.Jr,e),new Error(e)}},e.prototype.Vx=function(e){var t=this.Ux(e);return this.Sx.get(t)},e.prototype.gM=function(e){try{return this.Vx(e).kx.get(e)}catch(e){return f.ErrorMonitor.ve().logError("Error getting the segment info",this.loggerId,g.hs.ui.Xr,e),null}},e.prototype.fM=function(e){var t=!1;return this.Sx.forEach(function(r,i){r.initialization===e&&(t=!0)}),t},e.prototype.vM=function(e){var t=this.gM(e);return null!=t?t.next:null},e.prototype.dk=function(e,t,r,i){try{var n;if(this.Sx.forEach(function(e,t){e.bandwidth===i&&(n=e)}),n&&n.Mx.has(e)&&n.Mx.has(r)){for(var s=n.Mx.get(e),o=n.Mx.get(r),a=0,h=s;h&&h!=o;)a+=h.duration,h=h.next;return Math.round(a/(n.timescale/1e3))}return 0}catch(e){return f.ErrorMonitor.ve().logError("Error extracting the segment distance",this.loggerId,g.hs.ui.Zr,e),0}},e.prototype.jx=function(e){try{e instanceof Uint8Array&&(e=e.buffer);var t=ISOBoxer.Qx(e),r=t.fetch("tfhd"),i=t.fetch("trun"),n=r?r.default_sample_duration:0;if(i){var s=0;return i.Kx.forEach(function(e){s+=e.sample_duration}),isNaN(s)&&n>0&&(s=n*i.Kx.length),s}}catch(e){return f.ErrorMonitor.ve().logError("Error extracting duration from the buffer",this.loggerId,g.hs.ui.$r,e),0}},e.prototype.Bx=function(e,t){var r=this.Yx();if(!t&&(this.isLive||r||d.HiveConfig.Dash.DashRemoveBitrateSize))try{var i=new s({}),n=i.Wx(e);this.isLive&&this.zx(n),(r||d.HiveConfig.Dash.DashRemoveBitrateSize)&&this.Jx(n,r,d.HiveConfig.Dash.DashRemoveBitrateSize);return i.Xx(n)}catch(e){this.logger.error(e)}return e},e.prototype.zx=function(e){var t=this;try{var r=Math.max(1,p.DASH.DASH_METADATA_MIN_FRAGMENTS),i=Math.max(1,p.DASH.eM),n=0,s=0;return e.MPD&&e.MPD.Period&&e.MPD.Period.AdaptationSet.forEach(function(e){if(t.Zx(e)){for(var o=e.SegmentTemplate.SegmentTimeline.S_asArray,a=parseInt(e.SegmentTemplate._timescale),h=i*a,c=0,u=0,l=0;l<o.length&&r>0;l++){var p=o[l];c=l;var d=p._r?parseInt(p._r):1;d>r?(u=r,r=0):(r-=d,u=d)}for(var f=o.length-1;f>=0&&(h>0&&f>=c);f--){var p=o[f],d=p._r?parseInt(p._r):1,g=0;if(!p._d)throw new Error("missing segment duration");g=parseInt(p._d);var E=d*g;if((f>c||f==c&&0==u)&&h>=E)h-=E,o.splice(f,1),n+=d,s+=E;else{var v=Math.ceil(h/g);f==c&&(v=Math.min(v,d-u));var y=g*v;p._r=d-v+"",h-=y,n+=v,s+=y}}t.logger.debug("DASH trimmed "+n+" segments for total duration: "+s)}}),e}catch(e){throw f.ErrorMonitor.ve().logError("Error trimming the manifest",this.loggerId,g.hs.ui.si,e),new Error(e)}},e.prototype.Zx=function(e){return!!e&&(!!("video/mp4"===e._mimeType||"video"===e._contentType||e.SegmentTemplate._media&&e.SegmentTemplate._media.indexOf("video")>-1)&&(e.SegmentTemplate&&e.SegmentTemplate.SegmentTimeline))},e.prototype.Yx=function(){if(d.HiveConfig.Dash.DashFilterBitrates)try{var e=null;e="string"==typeof d.HiveConfig.Dash.DashFilterBitrates?d.HiveConfig.Dash.DashFilterBitrates.split(","):d.HiveConfig.Dash.DashFilterBitrates;var t=[];return e.forEach(function(e){var r=parseInt(e);isNaN(r)||t.push(r)}),t}catch(e){f.ErrorMonitor.ve().logError("Error parsing DashFilterBitrates",this.loggerId,g.hs.ui.oi,e)}},e.prototype.Jx=function(e,t,r){var i=this;if(e.MPD&&e.MPD.Period){var n=[];e.MPD.Period.AdaptationSet.forEach(function(e){if(i.Zx(e)){var s=e.Representation_asArray;s.sort(function(e,t){return isNaN(e._bandwidth)&&(e._bandwidth=parseInt(e._bandwidth)),isNaN(t._bandwidth)&&(t._bandwidth=parseInt(t._bandwidth)),e._bandwidth-t._bandwidth});for(var o=s.length-1;o>=0;o--)r&&(delete s[o]._width,delete s[o]._height),t&&-1==t.indexOf(o)?s.splice(o,1):n.push(s[o]._bandwidth);i.logger.debug("DASH filtered-in bitrates: "+n.reverse().join(" ")+" - removed size: "+r)}})}},e.prototype.HM=function(e,t,r,i){try{var n;if(this.Sx.forEach(function(e,t){e.bandwidth===i&&(n=e)}),n&&n.Mx.has(e)&&n.Mx.has(r)){for(var s=n.Mx.get(e),o=n.Mx.get(r),a=0,h=s;h&&h!=o;)a+=h.duration,h=h.next;return Math.round(a/(n.timescale/1e3))}return 0}catch(e){return f.ErrorMonitor.ve().logError("Error getting the duration between two segments",this.loggerId,g.hs.ui.hi,e),0}},e.prototype.qM=function(e,t){try{var r;return this.Sx.forEach(function(e,i){e.bandwidth===t&&(r=e)}),r&&r.Mx.has(e)?r.Mx.get(e):null}catch(e){return f.ErrorMonitor.ve().logError("Error getting the segment",this.loggerId,g.hs.ui.ci,e),null}},e}();E.Ax="$Bandwidth$",E.Hx="$Time$",E.Ox="$RepresentationID$",t.$x=E},function(e,t,r){var i=function(e,t,r){function i(e){var t=e.localName;return null==t&&(t=e.eq),null!=t&&""!=t||(t=e.nodeName),t}function n(e){return e.prefix}function s(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}function o(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function a(s){if(s.nodeType==T.DOCUMENT_NODE){var h,c,u,l=s.firstChild;for(c=0,u=s.childNodes.length;c<u;c+=1)if(s.childNodes[c].nodeType!==T.COMMENT_NODE){l=s.childNodes[c];break}if(r)h=a(l);else{h={};var p=i(l);h[p]=a(l)}return h}if(s.nodeType==T.ELEMENT_NODE){var h=new Object;h.__cnt=0;for(var d=s.childNodes,f=0;f<d.length;f++){var l=d.item(f),p=i(l);if(h.__cnt++,null==h[p])h[p]=a(l),h[p+"_asArray"]=new Array(1),h[p+"_asArray"][0]=h[p];else{if(null!=h[p]&&!(h[p]instanceof Array)){var g=h[p];h[p]=new Array,h[p][0]=g,h[p+"_asArray"]=h[p]}for(var E=0;null!=h[p][E];)E++;h[p][E]=a(l)}}for(var v=0;v<s.attributes.length;v++){var m=s.attributes.item(v);h.__cnt++;for(var I=m.value,S=0,R=e.length;S<R;S++){var w=e[S];try{w.test.call(this,m)&&(I=w.tq.call(this,m.value))}catch(e){w.test.call(this,m),console.error(e)}}h[t+m.name]=I}var b=n(s);return null!=b&&""!=b&&(h.__cnt++,h.__prefix=b),1==h.__cnt&&null!=h["#text"]&&(h=h["#text"]),null!=h["#text"]&&(h.__text=h["#text"],h.__text instanceof Array&&(h.__text=h.__text.join("\n")),y&&(h.__text=o(h.__text)),delete h["#text"],delete h["#text_asArray"],""===h.__text.trim()&&delete h.__text),null!=h["#cdata-section"]&&(h.__cdata=h["#cdata-section"],delete h["#cdata-section"],delete h["#cdata-section_asArray"]),null==h.__text&&null==h.__cdata||(h.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),h}return s.nodeType==T.TEXT_NODE||s.nodeType==T.CDATA_SECTION_NODE?s.nodeValue:s.nodeType==T.COMMENT_NODE?null:void 0}function h(e,t,r,i){var n="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=r)for(var s=0;s<r.length;s++){var o=r[s],a=e[o];n+=" "+o.substr(1)+"='"+a+"'"}return n+=i?"/>":">"}function c(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function u(e,t){return-1!==e.indexOf(t,e.length-t.length)}function l(e,t){return!!(u(t.toString(),"_asArray")||0==t.toString().indexOf("_")||e[t]instanceof Function)}function p(e){var t=0;if(e instanceof Object)for(var r in e)l(e,r)||t++;return t}function d(e){var t=[];if(e instanceof Object)for(var r in e)-1==r.toString().indexOf("__")&&0==r.toString().indexOf("_")&&t.push(r);return t}function f(e){var t="";return null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(t+=y?s(e.__text):e.__text),t}function g(e){var t="";return e instanceof Object?t+=f(e):null!=e&&(t+=y?s(e):e),t}function E(e,t,r){var i="";if(0==e.length)i+=h(e,t,r,!0);else for(var n=0;n<e.length;n++)i+=h(e[n],t,d(e[n]),!1),i+=v(e[n]),i+=c(e[n],t);return i}function v(e){var t="";if(p(e)>0)for(var r in e)if(!l(e,r)){var i=e[r],n=d(i);if(null==i||void 0==i)t+=h(i,r,n,!0);else if(i instanceof Object)if(i instanceof Array)t+=E(i,r,n);else{var s=p(i);s>0||null!=i.__text||null!=i.__cdata?(t+=h(i,r,n,!1),t+=v(i),t+=c(i,r)):t+=h(i,r,n,!0)}else t+=h(i,r,n,!1),t+=g(i),t+=c(i,r)}return t+=g(e)}null!==t&&void 0!==t||(t="_"),null!==r&&void 0!==r||(r=!1);var y=!1,T={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.rq=function(e){var t;if(window.DOMParser){t=(new window.DOMParser).parseFromString(e,"text/xml")}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.iq(e);return t},this.nq=function(e){return a(e)},this.Wx=function(e){var t=this.rq(e);return this.nq(t)},this.Xx=function(e){return v(e)},this.sq=function(e){var t=this.Xx(e);return this.rq(t)},this.getVersion=function(){return"1.0.11"},this.oq=function(e){y=e}};e.i=i},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(3),s=r(58),o=r(151),a=r(154),h=r(0),c=r(31),u=r(9),l=r(34),p=r(30),d=r(1),f=r(2);!function(e){function t(t){return this.qL(t)||-1!=t.indexOf(e.GL)}function r(t){return-1!=t.toLowerCase().indexOf(e.VL.toLowerCase())||-1!=t.toLowerCase().indexOf(e.aq.toLowerCase())||-1!=t.toLowerCase().indexOf(e.hq.toLowerCase())}e.cq=1,e.uq=2,e.lq=3e4,e.pq=4e3,e.dq=500,e.fq=!0,e.gq=1e4,e.Eq=16,e.vq=3,e.VL=".m3u8",e.aq="(format=m3u8-aapl-v3)",e.hq="(video,format=m3u8-aapl-v3,audiotrack=audio)",e.GL=".ts",e.rM=t,e.qL=r;var g=function(t){function s(e,r,i){var s=t.call(this,i)||this;return s.yq=!1,s.loggerId="[HLS Context] ",s.Ag=0,s.MM=new n,s.DM=new n,s.ticket=e,s.Tq=r,r&&(s.mq=s.Iq(e._N())),s.nM=e.NN(),s.sM=new a.Sq,s.Rq=new o.wq,s}return i(s,t),s.prototype.getStreamProtocol=function(){return StreamProtocol.bq},s.prototype.Iq=function(e){var t=e.lastIndexOf("/");return e.substr(0,t)},s.prototype.Sk=function(){return this.ticket},s.prototype.lM=function(){return this.Rq.lM()},s.prototype.isLive=function(){return this.Rq.isLive()},s.prototype.dM=function(){return this.sM},s.prototype.getContextId=function(){return this.ticket.kN()},s.prototype.uM=function(){return this.nM},s.prototype.mM=function(e){try{var t=e.url=this.Cq(e.url);return t===this.nM?(this.yq&&this.logger.debug("SAME MANIFEST "+t+","+this.nM),!0):null!=this.Rq&&this.Rq._q(t)?(this.yq&&this.logger.debug("CORRECT PLAYLIST "+t+","+this.nM),!0):null!=this.Rq&&null!=this.Rq.gM(t)?(this.yq&&this.logger.debug("CORRECT SEGMENT "+t+","+this.nM),!0):!(!r(t)||this.Rq.Pq()===t)&&(this.yq&&this.logger.debug("FIRST REQUEST FOR MANIFEST "+t+","+this.nM),!1)}catch(t){return d.ErrorMonitor.ve().logError("Error getting the current context of the HiveRequest",this.loggerId,f.hs.di.qr,{detailedError:t,url:e.url}),!1}},s.prototype.Cq=function(e){return p(e).nb().toString()},s.prototype.Xf=function(e){try{if(r(e))return u.vc.gc;return null!=this.Rq.gM(e)?u.vc.fc:u.vc.Ec}catch(t){return d.ErrorMonitor.ve().logError("Error getting the entityType",this.loggerId,f.hs.di.Br,{detailedError:t,url:e}),u.vc.Ec}},s.prototype.ig=function(e){var t=this.Xf(e);if(t==u.vc.fc||t==u.vc.dc)return!0},s.prototype.EM=function(e){var t=0,r=0,i=0,n=!0,s=!1;try{var o=this.Xf(e);if(o!=u.vc.gc){var a=this.Rq.gM(e);null!=a&&(t=a.duration,r=a.bitrate,i=a.id,s=this.ig(e))}else n=!1,null!=this.Rq&&this.Rq.Aq.has(e)&&(r=this.Rq.Aq.get(e).bitrate,this.MM.set(r,h.Framework.time()));return new l.N_(e,o,n,i,t,r,s,this.getContextId())}catch(t){return d.ErrorMonitor.ve().logError("Error getting the entityCharacteristics from the url",this.loggerId,f.hs.di.Hr,{detailedError:t,url:e}),new l.N_(e,u.vc.Ec,!1,0,0,0,!1,this.getContextId())}},s.prototype.VD=function(e,t,r){var i=this.Rq.qM(e,t);return null!=i?new l.N_(i.yM,r,!0,e,i.duration,t,!0,this.getContextId()):null},s.prototype.SM=function(e){try{var t=e.RM,r=e.eg(),i=this.Rq.parse(r,t);if(this.Rq.Aq.has(r)){var n=this.Rq.Aq.get(r);this.wM.QD(n.bitrate)}e.Kf.response=i,e.Kf.responseText=i}catch(t){d.ErrorMonitor.ve().logError("Error receiving the metadata",this.loggerId,f.hs.di.li,{detailedError:t,url:e.eg()}),e.RM&&(e.Kf.responseText=e.RM,e.Kf.response=e.RM)}},s.prototype.CM=function(e){t.prototype.CM.call(this,e),e.Xf()!=u.vc.gc&&e.Xf()!=u.vc.Ec&&(this.sM._M(e),e.Xf()==u.vc.fc&&this.wM.UD(e.zf))},s.prototype.PM=function(e,r){var i=e;return i.AM=h.Framework.time(),t.prototype.PM.call(this,i,r)},s.prototype.tk=function(t){if(e.fq){null==this.DM.get(t)&&this.Rq.isLive()?this.kM(t):this.logger.debug("HLS PRE-FETCHING METADATA ALREADY SCHEDULED OR MISSING HLS INFO")}},s.prototype.kM=function(t){var r=this;try{var i=this.Rq.Oq.get(t);if(null!=i){var n=this.MM.has(t),s=this.MM.get(t),o=n?s:0,a=null!=i.Nq?i.Nq[i.Nq.length-1].duration:e.pq,c=o+a,u=Math.max(1,c-h.Framework.time()+e.dq);this.logger.info("HLS PREFETCHING METADATA "+i.yM+" BITRATE "+t+" IN "+u);var l=h.Framework.setTimeout(function(){r.FM(t,i.yM,h.Framework.time())},u);this.DM.set(t,l)}else this.logger.warn("NO STREAM WITH BT "+t)}catch(e){d.ErrorMonitor.ve().logError("Error scheduling metadata prefetch",this.loggerId,f.hs.di.pi,e)}},s.prototype.FM=function(e,t,r){var i=this.MM.get(e);if(null==i&&(i=0),i>r)this.kM(e);else{var n=new c.HiveRequest(this.ticket.sessionId);n.open("GET",t),n.internal=!0,n.send(),this.DM.delete(e),this.MM.set(e,h.Framework.time())}},s.prototype.LM=function(){var e=this;this.DM.keys().forEach(function(t){var r=e.DM.get(t);h.Framework.clearTimeout(r),e.DM.delete(t)})},s.prototype.ak=function(){return t.prototype.TM.call(this,e.cq,e.uq)},s.prototype.nk=function(e){try{var t=e.url,r=this.Rq.vM(t);return null!=r?this.EM(r.yM):null}catch(e){return d.ErrorMonitor.ve().logError("Error getting the next entity",this.loggerId,f.hs.di.xr,e),null}},s.prototype.dk=function(e,t,r,i){return r-e},s.prototype.pk=function(){return e.lq},s.prototype.xM=function(){return e.gq},s.prototype.lk=function(e,t){try{var r=this.PD(),i=this.BM(),n=r.A_(),s=0;if(e>n)for(var o=this.Rq.qM(n,t);o&&o.id<e;)s+=o.duration,this.logger.debug("Segment duration "+o.duration+" total msec "+s+"segment id "+o.id),o=o.next;var a=h.Framework.time()-i;return Math.max(0,s-a)}catch(e){return d.ErrorMonitor.ve().logError("Error getting the distance duration",this.loggerId,f.hs.di.Kr,e),0}},s}(s.GM);e.Dq=g}(t.bq||(t.bq={}))},function(e,t,r){"use strict";var i=r(3),n=r(4),s=r(0),o=r(89),a=r(62),h=r(90),c=r(1),u=r(2),l=function(){function e(){this.loggerId="[LIVE CACHE] ",this.kq=new i,this.Lq=-1,this.Mq=[],this.logger=s.Framework.resolve(s.Framework.V.R).log()}return e.prototype.init=function(e,t){this.Fq=e,this.Uq=t},e.prototype.put=function(e){var t=n.defer();try{var r=e.Zf(),i=e.responseHeaders,s=e.jf,l=e.qf.Pf-1,p=e.qf.Pf;-1==this.Lq&&this.Bq();var d=null,f=!1;if(this.kq.has(r)){d=this.kq.get(r);var g=new a.FF(0,l,p);f=!0,d.content.forEach(function(e,t){if(a.HF.BF(t).MF(g))return void(f=!1)})}else{var E=new a.FF(0,l,p).toString();d=new h.Hq(e.zf),e.xq&&(d.qq=e.xq.Ek.peerInfo),d.content.set(E,new o.Gq(p,s,e.qf,e.Jf())),this.kq.set(r,d),f=!0,this.Mq.unshift(r)}null==d.headers&&null!=i&&(d.headers=i),t.resolve(f)}catch(e){c.ErrorMonitor.ve().logError("Error adding fragment in LiveCache",this.loggerId,u.hs.ut.it,e),t.reject("CACHE PUT ERROR "+e)}return t.Ss},e.prototype.get=function(e){var t=n.defer();try{var r=this.kq.get(e);if(null!=r){var i=null;r.content.forEach(function(e,t){if(a.HF.BF(t).kF())return i=e,i.headers=r.headers,void(i.qq=r.qq)}),t.resolve(i)}else t.resolve(null)}catch(e){c.ErrorMonitor.ve().logError("Error getting fragment from LiveCache",this.loggerId,u.hs.ut.nt,e),t.reject("CACHE GET ERROR "+e)}return t.Ss},e.prototype.ik=function(e){try{return this.kq.keys()}catch(e){return c.ErrorMonitor.ve().logError("Error getting keys from LiveCache",this.loggerId,u.hs.ut.ot,e),[]}},e.prototype.Vq=function(e){var t=n.defer();try{t.resolve(this.kq.values())}catch(e){c.ErrorMonitor.ve().logError("Error getting elements from LiveCache",this.loggerId,u.hs.ut.at,e),t.reject("CACHE GET ELEMENTS ERROR "+e)}return t.Ss},e.prototype.contains=function(e){var t=n.defer();try{this.kq.has(e)?t.resolve(!0):t.resolve(!1)}catch(e){c.ErrorMonitor.ve().logError("Error checking if LiveCache contains the fragment",this.loggerId,u.hs.ut.st,e),t.reject("CACHE CONTAINS ERROR "+e)}return t.Ss},e.prototype.Bq=function(){var e=this;this.jq(),this.logger.debug(this.loggerId+"Starting cache periodic purge"),this.Lq=s.Framework.setInterval(function(){e.m()},this.Uq)},e.prototype.jq=function(){-1!=this.Lq&&(this.logger.debug(this.loggerId+" Stopping cache periodic purge"),s.Framework.clearInterval(this.Lq),this.Lq=-1)},e.prototype.m=function(){var e=this;try{var t=0,r=0,i=0;this.logger.debug(this.loggerId+" RUNNING GC"),this.Mq.every(function(i,n){var s=e.kq.get(i).size();return t+s>e.Fq?(r=n,!1):(t+=s,!0)})||(i=this.Mq.length-r,this.Mq.splice(r,this.Mq.length-1).forEach(function(t){e.kq.delete(t)})),this.logger.debug(this.loggerId+" GC DONE - REMOVED: "+i+" - CURRENT ITEMS: "+this.kq.length+" SIZE: "+t+" "),0===this.kq.length&&(this.logger.debug(this.loggerId+" Cache contains no items, stopping purge timer"),this.jq())}catch(e){c.ErrorMonitor.ve().logError("Error purging LiveCache",this.loggerId,u.hs.ut.ct,e)}},e.prototype.Qq=function(){this.kq=new i,this.Mq=[]},e.prototype.Kq=function(){var e=this;this.kq.forEach(function(t,r){e.logger.debug("EID="+r),t.content.forEach(function(t,r){e.logger.debug("\tRANGE ",r)})})},e}();t.Yq=l},function(e,t,r){"use strict";var i=function(){function e(e,t,r,i){this.length=e,this.data=t,this.qf=r,this.Wq=i}return e}();t.Gq=i},function(e,t,r){"use strict";var i=r(62),n=r(3),s=function(){function e(e){this.headers=null,this.qq=null,this.totalSize=0,this.zq=!1,this.zf=e,this.content=new n}return e.prototype.size=function(){var e=0;return this.content.forEach(function(t,r){e+=i.HF.BF(r).size()}),e},e}();t.Hq=s},function(e,t,r){"use strict";!function(e){e[e.Jq=0]="ALL",e[e.AS=1]="AS",e[e.nD=2]="SITE"}(t.Xq||(t.Xq={}))},function(e,t,r){"use strict";var i=r(0),n=r(25),s=r(5),o=r(10),a=r(4),h=r(3),c=r(59),u=r(171),l=r(1),p=function(){function e(){this.Zq=!1,this.loggerId="[UDPLeaderElection] ",this.Ng=i.Framework.resolve(i.Framework.V.F),this.$q=new h,this.eG=new h,this.tG=new h,this.rG=new h,this.iG=new h,this.nG=[]}return e.prototype.init=function(e){this.sG=e,this.logger=i.Framework.resolve(i.Framework.V.R).log(e.sessionId),this.yD=e.yD,this.oG=e.oG,this.mD=e.mD},e.prototype.aG=function(e,t){var r=this,i=a.defer();try{if(this.Zq){var n=null;e.privateIpString&&(n=e.privateIpString);var s=new u.hG(e.guid,e.rankValue,n,e.isLeader);if(this.$q.has(s.uuid)){var o=this.$q.get(s.uuid);o.udpScore==s.udpScore&&o.cG==s.cG?i.resolve():(this.$q.set(s.uuid,s),this.uG(),this.lG(s).then(function(){i.resolve()}).fail(function(e){r.$q.delete(s.uuid),r.uG(),i.reject(e)}))}else t?(s.pG=t,this.logger.info(this.loggerId+" NEW MEMBER GUID "+s.uuid+" RANKING "+s.udpScore+" LEADER "+s.cG),this.$q.set(s.uuid,s),this.uG(),this.lG(s).then(function(){r.dG(r.$q.get(s.uuid)),i.resolve()}).fail(function(e){r.$q.delete(s.uuid),r.uG(),i.reject(e)})):this.fG(s).then(function(e){s.pG=e,r.logger.info(r.loggerId+" NEW MEMBER GUID "+s.uuid+" RANKING "+s.udpScore+" LEADER "+s.cG),r.$q.set(s.uuid,s),r.uG(),r.lG(s).then(function(){i.resolve()}).fail(function(e){r.$q.delete(s.uuid),r.uG(),i.reject(e)})}).fail(function(e){i.reject(e)})}else i.reject("LEADER ELECTION NOT STARTED YET")}catch(e){i.reject("TRIGGER LEADER ELECTION ERROR "+e)}return i.Ss},e.prototype.dG=function(e){var t=new o.bc(o.Tc.W,null);t.guid=e.uuid,t.isLeader=e.cG,t.rankValue=e.udpScore;var r=[t];this.oG.gG(r,!1)},e.prototype.fG=function(e){var t=this,r=a.defer();return this.rG.has(e.uuid)||this.tG.has(e.uuid)?r.reject(d.EG):(this.rG.set(e.uuid,Date.now()),this.Ng.connect(e.uuid).then(function(i){var n=i.Pg.wg(t.sG.swarmId);null==n?(n=i.Pg.Tg(t.sG.swarmId),t.vG(n).then(function(){r.resolve(i)}).fail(function(e){r.reject(e)}).done()):t.iG.get(e.uuid)?r.resolve(i):(t.rG.delete(e.uuid),t.vG(n).then(function(){r.resolve(i)}).fail(function(e){r.reject(e)}).done())}).fail(function(i){t.rG.delete(e.uuid),r.reject(i)}).done()),r.Ss},e.prototype.vG=function(e){var t=this,r=a.defer(),o=new n.Rf.Fa.Jg.UDPHandshakeMessage;o.uuid=this.yG.uuid,o.udpScore=this.yG.udpScore,o.isLeader=this.yG.cG,o.streamId=this.yG.streamId,this.logger.debug(this.loggerId+"MSG uuid "+o.uuid+" rankValue "+o.udpScore+" isLeader "+o.isLeader+" stream id "+o.streamId);var h=i.Framework.setTimeout(function(){t.TG(e.otherGuid)},s.hh.UDPBroadcast.Ga);return this.tG.set(e.otherGuid,{mG:h,defer:r}),e.Lg(n.Rf.Eg.dg,o),r.Ss},e.prototype.TG=function(e){if(this.tG.has(e)){this.logger.debug(this.loggerId+" HANDSHAKE REQ EXPIRED TO "+e);var t=this.tG.get(e);this.tG.delete(e),t.defer.reject("EXPIRED")}},e.prototype.IG=function(e,t){try{this.logger.debug(this.loggerId+"HANDSHAKE RESP RECEIVED FROM "+t.otherGuid);var r=t.otherGuid,n=this.tG.get(r);i.Framework.clearTimeout(n.mG),this.tG.delete(r),n.defer.resolve(t)}catch(e){l.ErrorMonitor.ve().logError("HANDSHAKE RESPONSE RECEIVED FAILED",this.loggerId,e)}},e.prototype.SG=function(e,t){var r=this;try{var i=new o.bc(o.Tc.W,null,e.isLeader);if(i.guid=e.uuid,i.rankValue=e.udpScore,e.streamId===this.yD.getContextId()){var n=t.Pg.wg(this.sG.swarmId);this.iG.set(e.uuid,e.uuid),this.RG(n,"OK"),this.aG(i,t).then(function(){}).fail(function(e){l.ErrorMonitor.ve().logError("LEADER ELECTION FAILED",r.loggerId,e)})}}catch(e){l.ErrorMonitor.ve().logError("HANDSHAKE REQUEST FAILED",this.loggerId,e)}},e.prototype.RG=function(e,t){var r=new n.Rf.Fa.Jg.UDPHandshakeResponse;r.accept=t,e.Lg(n.Rf.Eg.UDPHandshakeResponse,r),this.logger.debug(this.loggerId+"SEND HANDSHAKE RESPONSE TO "+e.otherGuid)},e.prototype.lG=function(e){var t=this,r=a.defer();if(this.wG()){var i=!1;this.logger.info(this.loggerId+"I HAVE THE HIGHEST SCORE"),e.cG&&!this.eG.has(e.uuid)&&(i=!0,this.logger.info(this.loggerId+"SEND SWITCH REQUEST TO "+e.uuid),this.bG(e).then(function(){r.resolve()}).fail(function(e){3==e.CG?(t.logger.debug(t.loggerId+" SWITCH REQUEST WAS CANCELED."),r.resolve()):(e.CG=2)&&r.reject(e)})),this.yG.cG||null==this._G||this._G.uuid==e.uuid||this.eG.has(this._G.uuid)||(this.logger.info("SEND SWITCH REQUEST TO THE ALREADY KNOWN LEADER"),i=!0,this.bG(this._G).then(function(){r.resolve()}).fail(function(e){3==e.CG?(t.logger.debug(t.loggerId+" SWITCH REQUEST WAS CANCELED."),r.resolve()):(e.CG=2)&&r.reject(e)})),null!=this._G||e.cG||this.yG.cG||0!=this.eG.length||(this.logger.info(this.loggerId+"BECOME LEADER"),this.PG()),i||r.resolve()}else this.AG(e)?(this.logger.info(this.loggerId+"PEER "+e.uuid+" HAS THE HIGHEST SCORE"),this.OG(),this.yG.cG&&e.cG&&this.stepDown(),this.NG(e),r.resolve()):r.resolve();return r.Ss},e.prototype.NG=function(e){try{this.logger.info(this.loggerId+"UPDATE THE LEADERSHIP"),null!=this._G&&this.$q.has(this._G.uuid)&&(this.$q.get(this._G.uuid).cG=!1),this.$q.has(e.uuid)?(this.$q.get(e.uuid).udpScore=e.udpScore,this._G=e,this.$q.get(e.uuid).cG=!0):(this.logger.warn(this.loggerId+"SET A LEADER THAT IS NOT A LAN MEMBER LIST. SHOULD NEVER HAPPEN"),this.$q.set(e.uuid,e),this._G=e),this.yD.DG(e),this.logger.info(this.loggerId+"NEW KNOWN LEADER "+this.yD.Rk().uuid)}catch(e){l.ErrorMonitor.ve().logError(e,this.loggerId)}},e.prototype.stepDown=function(){this.logger.info(this.loggerId+"STEP DOWN"),this.yG.cG=!1,this.yD.kG(!1),s.hh.fa.ia&&(this.mD.LG(),this.mD.MG(!1))},e.prototype.OG=function(){for(var e=this.eG.keys(),t=0,r=e;t<r.length;t++){var n=r[t],s=this.eG.get(n);this.eG.delete(n),i.Framework.clearTimeout(s.mG),s.defer.reject({CG:3,message:"CANCELED PENDING RESPONSES"})}},e.prototype.AG=function(e){return e.uuid==this.nG[0].uuid},e.prototype.wG=function(){return u.hG.JE(this.yG,this.nG[0])<0},e.prototype.uG=function(){var e=new c(this.$q.values()),t=e.Fc(u.hG.JE);e.push(this.yG),this.yD.FG(t);var r=new c(this.$q.values());this.nG=r.Fc(u.hG.JE)},e.prototype.UG=function(e){this.BG(e)},e.prototype.BG=function(e){this.logger.info(this.loggerId+"EVALUATE THE SWITCH REQUEST FROM "+e.uuid);var t=void 0;this.$q.has(e.uuid)?t=this.$q.get(e.uuid):this.logger.warn("I RECEIVED A SWITCH REQUEST FROM AN UNKNOWN MEMBER. THIS SHOULD NEVER HAPPEN"),t&&(this.yG.cG?this.wG()?this.HG(t,!1):(this.stepDown(),this.OG(),this.NG(t),this.HG(t,!0)):this.AG(t)?(this.NG(t),this.HG(t,!0)):this.HG(t,!1))},e.prototype.HG=function(e,t){var r=this;this.xG(e.pG,t).then(function(){}).fail(function(e){l.ErrorMonitor.ve().logError("SEND SWITCH RESPONSE ERROR",r.loggerId,e)}).done()},e.prototype.xG=function(e,t){var r=a.defer(),i=new n.Rf.Fa.Jg.UDPSwitchLeadershipAck;return i.ok=t,e.Pg.wg(this.sG.swarmId).Lg(n.Rf.Eg.fg,i),r.Ss},e.prototype.bG=function(e){var t=this,r=a.defer();return this.qG(e.pG).then(function(i){t.GG(i,e),r.resolve()}).fail(function(e){r.reject(e)}).done(),r.Ss},e.prototype.GG=function(e,t){try{e?(this.$q.get(t.uuid).cG=!1,this._G=this.yG,this.PG()):(this.OG(),this.$q.get(t.uuid).cG=!0,this.stepDown(),this.NG(t))}catch(e){l.ErrorMonitor.ve().logError("HANDLE LEADERSHIP SWITCH RESPONSE ERROR",this.loggerId,e)}},e.prototype.VG=function(e,t){if(this.eG.has(t)){var r=this.eG.get(t);i.Framework.clearTimeout(r.mG),this.eG.delete(t),r.defer.resolve(e.ok)}else this.logger.warn(this.loggerId+" SWITCH LEADERSHIP RESPONSE RECEIVED FROM UNKNOWN PEER "+t)},e.prototype.qG=function(e){var t=this,r=a.defer(),o=new n.Rf.Fa.Jg.UDPSwitchLeadershipRequest;o.uuid=this.yG.uuid,o.udpScore=this.yG.udpScore,this.logger.debug(this.loggerId+"SWITCH LEADERSHIP REQUEST TO "+e.otherGuid);var h=i.Framework.setTimeout(function(){t.jG(e.otherGuid)},s.hh.UDPBroadcast.qa);this.eG.set(e.otherGuid,{mG:h,defer:r});var c=e.Pg.wg(this.sG.swarmId);return i.Framework.setTimeout(function(){c.Lg(n.Rf.Eg.UDPSwitchLeadershipRequest,o)},1),r.Ss},e.prototype.jG=function(e){if(this.eG.has(e)){this.logger.info(this.loggerId+" SWITCH LEADERSHIP EXPIRED TO "+e);var t=this.eG.get(e);this.eG.delete(e),t.defer.reject({CG:2,message:"EXPIRED"})}},e.prototype.PG=function(){this.logger.info(this.loggerId+"BECOMING LAN LEADER"),null!=this._G&&this.$q.has(this._G.uuid)&&(this.$q.get(this._G.uuid).cG=!1),this.yG.cG=!0,this._G=this.yG,this.yD.kG(!0),this.yD.DG(this.yG),s.hh.fa.ia&&(this.mD.LG(),this.mD.MG(!0))},e.prototype.Ud=function(e){this.yG=new u.hG(this.yD.getId(),this.yD.QG(),"",!1,this.yD.getContextId()),this.Zq=!0,this.logger.info(this.loggerId+" UDP LEADER ELECTION STARTED")},e.prototype.KG=function(e){this.$q.delete(e),this.uG(),0==this.$q.length?(this.yG.cG=!1,this._G=null,this.yD.kG(!1),this.yD.YG(!1),this.mD.LG(),this.mD.MG(!1)):this.wG()?this.PG():this.nG.length>0&&this.NG(this.nG[0])},e}();t.WG=p;var d;!function(e){e[e.zG=0]="FAILURE",e[e.EG=1]="ALREADY_PENDING"}(d=t.JG||(t.JG={}))},function(e,t,r){var i,n,s;/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 */
!function(r,o){n=[],i=o,void 0!==(s="function"==typeof i?i.apply(t,n):i)&&(e.i=s)}(0,function(){"use strict";function e(e,t,r){this.low=0|e,this.high=0|t,this.FP=!!r}e.XG,Object.defineProperty(e.prototype,"__isLong__",{value:!0,p:!1,l:!1}),e.ZG=function(e){return!0===(e&&e.XG)};var t={},r={};e.ME=function(i,n){var s,o;return n?0<=(i>>>=0)&&i<256&&(o=r[i])?o:(s=new e(i,(0|i)<0?-1:0,!0),0<=i&&i<256&&(r[i]=s),s):-128<=(i|=0)&&i<128&&(o=t[i])?o:(s=new e(i,i<0?-1:0,!1),-128<=i&&i<128&&(t[i]=s),s)},e.DE=function(t,r){return r=!!r,isNaN(t)||!isFinite(t)?e.ZERO:!r&&t<=-s?e.MIN_VALUE:!r&&t+1>=s?e.MAX_VALUE:r&&t>=n?e.$G:t<0?e.DE(-t,r).qE():new e(t%i|0,t/i|0,r)},e.qI=function(t,r,i){return new e(t,r,i)},e.kE=function(t,r,i){if(0===t.length)throw Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if("number"==typeof r&&(i=r,r=!1),(i=i||10)<2||36<i)throw Error("radix out of range: "+i);var n;if((n=t.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+t);if(0===n)return e.kE(t.substring(1),r,i).qE();for(var s=e.DE(Math.pow(i,8)),o=e.ZERO,a=0;a<t.length;a+=8){var h=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+h),i);if(h<8){var u=e.DE(Math.pow(i,h));o=o.multiply(u).add(e.DE(c))}else o=o.multiply(s),o=o.add(e.DE(c))}return o.FP=r,o},e.eV=function(t){return t instanceof e?t:"number"==typeof t?e.DE(t):"string"==typeof t?e.kE(t):new e(t.low,t.high,t.FP)};var i=4294967296,n=i*i,s=n/2,o=e.ME(1<<24);return e.ZERO=e.ME(0),e.tV=e.ME(0,!0),e.ONE=e.ME(1),e.rV=e.ME(1,!0),e.iV=e.ME(-1),e.MAX_VALUE=e.qI(-1,2147483647,!1),e.$G=e.qI(-1,-1,!0),e.MIN_VALUE=e.qI(0,-2147483648,!1),e.prototype.kP=function(){return this.FP?this.low>>>0:this.low},e.prototype.nV=function(){return this.FP?(this.high>>>0)*i+(this.low>>>0):this.high*i+(this.low>>>0)},e.prototype.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix out of range: "+t);if(this.sV())return"0";var r;if(this.oV()){if(this.cs(e.MIN_VALUE)){var i=e.DE(t),n=this.aV(i);return r=n.multiply(i).hV(this),n.toString(t)+r.kP().toString(t)}return"-"+this.qE().toString(t)}var s=e.DE(Math.pow(t,6),this.FP);r=this;for(var o="";;){var a=r.aV(s),h=r.hV(a.multiply(s)).kP()>>>0,c=h.toString(t);if(r=a,r.sV())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},e.prototype.cV=function(){return this.high},e.prototype.uV=function(){return this.high>>>0},e.prototype.lV=function(){return this.low},e.prototype.pV=function(){return this.low>>>0},e.prototype.dV=function(){if(this.oV())return this.cs(e.MIN_VALUE)?64:this.qE().dV();for(var t=0!=this.high?this.high:this.low,r=31;r>0&&0==(t&1<<r);r--);return 0!=this.high?r+33:r+1},e.prototype.sV=function(){return 0===this.high&&0===this.low},e.prototype.oV=function(){return!this.FP&&this.high<0},e.prototype.fV=function(){return this.FP||this.high>=0},e.prototype.gV=function(){return 1==(1&this.low)},e.prototype.fv=function(){return 0==(1&this.low)},e.prototype.cs=function(t){return e.ZG(t)||(t=e.eV(t)),(this.FP===t.FP||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},e.EV=e.prototype.cs,e.prototype.vV=function(e){return!this.cs(e)},e.yV=e.prototype.vV,e.prototype.TV=function(e){return this.Oc(e)<0},e.prototype.mV=e.prototype.TV,e.prototype.SV=function(e){return this.Oc(e)<=0},e.prototype.RV=e.prototype.SV,e.prototype.wV=function(e){return this.Oc(e)>0},e.prototype.bV=e.prototype.wV,e.prototype.CV=function(e){return this.Oc(e)>=0},e.prototype._V=e.prototype.CV,e.prototype.Oc=function(t){if(e.ZG(t)||(t=e.eV(t)),this.cs(t))return 0;var r=this.oV(),i=t.oV();return r&&!i?-1:!r&&i?1:this.FP?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.hV(t).oV()?-1:1},e.prototype.qE=function(){return!this.FP&&this.cs(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.PV=e.prototype.qE,e.prototype.add=function(t){e.ZG(t)||(t=e.eV(t));var r=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,o=t.high>>>16,a=65535&t.high,h=t.low>>>16,c=65535&t.low,u=0,l=0,p=0,d=0;return d+=s+c,p+=d>>>16,d&=65535,p+=n+h,l+=p>>>16,p&=65535,l+=i+a,u+=l>>>16,l&=65535,u+=r+o,u&=65535,e.qI(p<<16|d,u<<16|l,this.FP)},e.prototype.hV=function(t){return e.ZG(t)||(t=e.eV(t)),this.add(t.qE())},e.prototype.sub=e.prototype.hV,e.prototype.multiply=function(t){if(this.sV())return e.ZERO;if(e.ZG(t)||(t=e.eV(t)),t.sV())return e.ZERO;if(this.cs(e.MIN_VALUE))return t.gV()?e.MIN_VALUE:e.ZERO;if(t.cs(e.MIN_VALUE))return this.gV()?e.MIN_VALUE:e.ZERO;if(this.oV())return t.oV()?this.qE().multiply(t.qE()):this.qE().multiply(t).qE();if(t.oV())return this.multiply(t.qE()).qE();if(this.TV(o)&&t.TV(o))return e.DE(this.nV()*t.nV(),this.FP);var r=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,a=t.high>>>16,h=65535&t.high,c=t.low>>>16,u=65535&t.low,l=0,p=0,d=0,f=0;return f+=s*u,d+=f>>>16,f&=65535,d+=n*u,p+=d>>>16,d&=65535,d+=s*c,p+=d>>>16,d&=65535,p+=i*u,l+=p>>>16,p&=65535,p+=n*c,l+=p>>>16,p&=65535,p+=s*h,l+=p>>>16,p&=65535,l+=r*u+i*c+n*h+s*a,l&=65535,e.qI(d<<16|f,l<<16|p,this.FP)},e.prototype.AV=e.prototype.multiply,e.prototype.aV=function(t){if(e.ZG(t)||(t=e.eV(t)),t.sV())throw new Error("division by zero");if(this.sV())return this.FP?e.tV:e.ZERO;var r,i,n;if(this.cs(e.MIN_VALUE)){if(t.cs(e.ONE)||t.cs(e.iV))return e.MIN_VALUE;if(t.cs(e.MIN_VALUE))return e.ONE;return r=this.HP(1).aV(t).shiftLeft(1),r.cs(e.ZERO)?t.oV()?e.ONE:e.iV:(i=this.hV(t.multiply(r)),n=r.add(i.aV(t)))}if(t.cs(e.MIN_VALUE))return this.FP?e.tV:e.ZERO;if(this.oV())return t.oV()?this.qE().aV(t.qE()):this.qE().aV(t).qE();if(t.oV())return this.aV(t.qE()).qE();for(n=e.ZERO,i=this;i.CV(t);){r=Math.max(1,Math.floor(i.nV()/t.nV()));for(var s=Math.ceil(Math.log(r)/Math.LN2),o=s<=48?1:Math.pow(2,s-48),a=e.DE(r),h=a.multiply(t);h.oV()||h.wV(i);)r-=o,a=e.DE(r,this.FP),h=a.multiply(t);a.sV()&&(a=e.ONE),n=n.add(a),i=i.hV(h)}return n},e.prototype.OV=e.prototype.aV,e.prototype.NV=function(t){return e.ZG(t)||(t=e.eV(t)),this.hV(this.aV(t).multiply(t))},e.prototype.ev=e.prototype.NV,e.prototype.not=function(){return e.qI(~this.low,~this.high,this.FP)},e.prototype.qP=function(t){return e.ZG(t)||(t=e.eV(t)),e.qI(this.low&t.low,this.high&t.high,this.FP)},e.prototype.or=function(t){return e.ZG(t)||(t=e.eV(t)),e.qI(this.low|t.low,this.high|t.high,this.FP)},e.prototype.pT=function(t){return e.ZG(t)||(t=e.eV(t)),e.qI(this.low^t.low,this.high^t.high,this.FP)},e.prototype.shiftLeft=function(t){return e.ZG(t)&&(t=t.kP()),0==(t&=63)?this:t<32?e.qI(this.low<<t,this.high<<t|this.low>>>32-t,this.FP):e.qI(0,this.low<<t-32,this.FP)},e.prototype.DV=e.prototype.shiftLeft,e.prototype.HP=function(t){return e.ZG(t)&&(t=t.kP()),0==(t&=63)?this:t<32?e.qI(this.low>>>t|this.high<<32-t,this.high>>t,this.FP):e.qI(this.high>>t-32,this.high>=0?0:-1,this.FP)},e.prototype.kV=e.prototype.HP,e.prototype.LP=function(t){if(e.ZG(t)&&(t=t.kP()),0===(t&=63))return this;var r=this.high;if(t<32){var i=this.low;return e.qI(i>>>t|r<<32-t,r>>>t,this.FP)}return 32===t?e.qI(r,0,this.FP):e.qI(r>>>t-32,0,this.FP)},e.prototype.LV=e.prototype.LP,e.prototype.UP=function(){return this.FP?new e(this.low,this.high,!1):this},e.prototype.BP=function(){return this.FP?this:new e(this.low,this.high,!0)},e})},function(e,t,r){var i,n,s;/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 */
!function(r,o){n=[],i=o,void 0!==(s="function"==typeof i?i.apply(t,n):i)&&(e.i=s)}(0,function(){"use strict";function e(e,t,r){this.low=0|e,this.high=0|t,this.FP=!!r}e.XG,Object.defineProperty(e.prototype,"__isLong__",{value:!0,p:!1,l:!1}),e.ZG=function(e){return!0===(e&&e.XG)};var t={},r={};e.ME=function(i,n){var s,o;return n?0<=(i>>>=0)&&i<256&&(o=r[i])?o:(s=new e(i,(0|i)<0?-1:0,!0),0<=i&&i<256&&(r[i]=s),s):-128<=(i|=0)&&i<128&&(o=t[i])?o:(s=new e(i,i<0?-1:0,!1),-128<=i&&i<128&&(t[i]=s),s)},e.DE=function(t,r){return r=!!r,isNaN(t)||!isFinite(t)?e.ZERO:!r&&t<=-s?e.MIN_VALUE:!r&&t+1>=s?e.MAX_VALUE:r&&t>=n?e.$G:t<0?e.DE(-t,r).qE():new e(t%i|0,t/i|0,r)},e.qI=function(t,r,i){return new e(t,r,i)},e.kE=function(t,r,i){if(0===t.length)throw Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if("number"==typeof r&&(i=r,r=!1),(i=i||10)<2||36<i)throw Error("radix out of range: "+i);var n;if((n=t.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+t);if(0===n)return e.kE(t.substring(1),r,i).qE();for(var s=e.DE(Math.pow(i,8)),o=e.ZERO,a=0;a<t.length;a+=8){var h=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+h),i);if(h<8){var u=e.DE(Math.pow(i,h));o=o.multiply(u).add(e.DE(c))}else o=o.multiply(s),o=o.add(e.DE(c))}return o.FP=r,o},e.eV=function(t){return t instanceof e?t:"number"==typeof t?e.DE(t):"string"==typeof t?e.kE(t):new e(t.low,t.high,t.FP)};var i=4294967296,n=i*i,s=n/2,o=e.ME(1<<24);return e.ZERO=e.ME(0),e.tV=e.ME(0,!0),e.ONE=e.ME(1),e.rV=e.ME(1,!0),e.iV=e.ME(-1),e.MAX_VALUE=e.qI(-1,2147483647,!1),e.$G=e.qI(-1,-1,!0),e.MIN_VALUE=e.qI(0,-2147483648,!1),e.prototype.kP=function(){return this.FP?this.low>>>0:this.low},e.prototype.nV=function(){return this.FP?(this.high>>>0)*i+(this.low>>>0):this.high*i+(this.low>>>0)},e.prototype.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix out of range: "+t);if(this.sV())return"0";var r;if(this.oV()){if(this.cs(e.MIN_VALUE)){var i=e.DE(t),n=this.aV(i);return r=n.multiply(i).hV(this),n.toString(t)+r.kP().toString(t)}return"-"+this.qE().toString(t)}var s=e.DE(Math.pow(t,6),this.FP);r=this;for(var o="";;){var a=r.aV(s),h=r.hV(a.multiply(s)).kP()>>>0,c=h.toString(t);if(r=a,r.sV())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},e.prototype.cV=function(){return this.high},e.prototype.uV=function(){return this.high>>>0},e.prototype.lV=function(){return this.low},e.prototype.pV=function(){return this.low>>>0},e.prototype.dV=function(){if(this.oV())return this.cs(e.MIN_VALUE)?64:this.qE().dV();for(var t=0!=this.high?this.high:this.low,r=31;r>0&&0==(t&1<<r);r--);return 0!=this.high?r+33:r+1},e.prototype.sV=function(){return 0===this.high&&0===this.low},e.prototype.oV=function(){return!this.FP&&this.high<0},e.prototype.fV=function(){return this.FP||this.high>=0},e.prototype.gV=function(){return 1==(1&this.low)},e.prototype.fv=function(){return 0==(1&this.low)},e.prototype.cs=function(t){return e.ZG(t)||(t=e.eV(t)),(this.FP===t.FP||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},e.EV=e.prototype.cs,e.prototype.vV=function(e){return!this.cs(e)},e.yV=e.prototype.vV,e.prototype.TV=function(e){return this.Oc(e)<0},e.prototype.mV=e.prototype.TV,e.prototype.SV=function(e){return this.Oc(e)<=0},e.prototype.RV=e.prototype.SV,e.prototype.wV=function(e){return this.Oc(e)>0},e.prototype.bV=e.prototype.wV,e.prototype.CV=function(e){return this.Oc(e)>=0},e.prototype._V=e.prototype.CV,e.prototype.Oc=function(t){if(e.ZG(t)||(t=e.eV(t)),this.cs(t))return 0;var r=this.oV(),i=t.oV();return r&&!i?-1:!r&&i?1:this.FP?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.hV(t).oV()?-1:1},e.prototype.qE=function(){return!this.FP&&this.cs(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.PV=e.prototype.qE,e.prototype.add=function(t){e.ZG(t)||(t=e.eV(t));var r=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,o=t.high>>>16,a=65535&t.high,h=t.low>>>16,c=65535&t.low,u=0,l=0,p=0,d=0;return d+=s+c,p+=d>>>16,d&=65535,p+=n+h,l+=p>>>16,p&=65535,l+=i+a,u+=l>>>16,l&=65535,u+=r+o,u&=65535,e.qI(p<<16|d,u<<16|l,this.FP)},e.prototype.hV=function(t){return e.ZG(t)||(t=e.eV(t)),this.add(t.qE())},e.prototype.sub=e.prototype.hV,e.prototype.multiply=function(t){if(this.sV())return e.ZERO;if(e.ZG(t)||(t=e.eV(t)),t.sV())return e.ZERO;if(this.cs(e.MIN_VALUE))return t.gV()?e.MIN_VALUE:e.ZERO;if(t.cs(e.MIN_VALUE))return this.gV()?e.MIN_VALUE:e.ZERO;if(this.oV())return t.oV()?this.qE().multiply(t.qE()):this.qE().multiply(t).qE();if(t.oV())return this.multiply(t.qE()).qE();if(this.TV(o)&&t.TV(o))return e.DE(this.nV()*t.nV(),this.FP);var r=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,a=t.high>>>16,h=65535&t.high,c=t.low>>>16,u=65535&t.low,l=0,p=0,d=0,f=0;return f+=s*u,d+=f>>>16,f&=65535,d+=n*u,p+=d>>>16,d&=65535,d+=s*c,p+=d>>>16,d&=65535,p+=i*u,l+=p>>>16,p&=65535,p+=n*c,l+=p>>>16,p&=65535,p+=s*h,l+=p>>>16,p&=65535,l+=r*u+i*c+n*h+s*a,l&=65535,e.qI(d<<16|f,l<<16|p,this.FP)},e.prototype.AV=e.prototype.multiply,e.prototype.aV=function(t){if(e.ZG(t)||(t=e.eV(t)),t.sV())throw new Error("division by zero");if(this.sV())return this.FP?e.tV:e.ZERO;var r,i,n;if(this.cs(e.MIN_VALUE)){if(t.cs(e.ONE)||t.cs(e.iV))return e.MIN_VALUE;if(t.cs(e.MIN_VALUE))return e.ONE;return r=this.HP(1).aV(t).shiftLeft(1),r.cs(e.ZERO)?t.oV()?e.ONE:e.iV:(i=this.hV(t.multiply(r)),n=r.add(i.aV(t)))}if(t.cs(e.MIN_VALUE))return this.FP?e.tV:e.ZERO;if(this.oV())return t.oV()?this.qE().aV(t.qE()):this.qE().aV(t).qE();if(t.oV())return this.aV(t.qE()).qE();for(n=e.ZERO,i=this;i.CV(t);){r=Math.max(1,Math.floor(i.nV()/t.nV()));for(var s=Math.ceil(Math.log(r)/Math.LN2),o=s<=48?1:Math.pow(2,s-48),a=e.DE(r),h=a.multiply(t);h.oV()||h.wV(i);)r-=o,a=e.DE(r,this.FP),h=a.multiply(t);a.sV()&&(a=e.ONE),n=n.add(a),i=i.hV(h)}return n},e.prototype.OV=e.prototype.aV,e.prototype.NV=function(t){return e.ZG(t)||(t=e.eV(t)),this.hV(this.aV(t).multiply(t))},e.prototype.ev=e.prototype.NV,e.prototype.not=function(){return e.qI(~this.low,~this.high,this.FP)},e.prototype.qP=function(t){return e.ZG(t)||(t=e.eV(t)),e.qI(this.low&t.low,this.high&t.high,this.FP)},e.prototype.or=function(t){return e.ZG(t)||(t=e.eV(t)),e.qI(this.low|t.low,this.high|t.high,this.FP)},e.prototype.pT=function(t){return e.ZG(t)||(t=e.eV(t)),e.qI(this.low^t.low,this.high^t.high,this.FP)},e.prototype.shiftLeft=function(t){return e.ZG(t)&&(t=t.kP()),0==(t&=63)?this:t<32?e.qI(this.low<<t,this.high<<t|this.low>>>32-t,this.FP):e.qI(0,this.low<<t-32,this.FP)},e.prototype.DV=e.prototype.shiftLeft,e.prototype.HP=function(t){return e.ZG(t)&&(t=t.kP()),0==(t&=63)?this:t<32?e.qI(this.low>>>t|this.high<<32-t,this.high>>t,this.FP):e.qI(this.high>>t-32,this.high>=0?0:-1,this.FP)},e.prototype.kV=e.prototype.HP,e.prototype.LP=function(t){if(e.ZG(t)&&(t=t.kP()),0===(t&=63))return this;var r=this.high;if(t<32){var i=this.low;return e.qI(i>>>t|r<<32-t,r>>>t,this.FP)}return 32===t?e.qI(r,0,this.FP):e.qI(r>>>t-32,0,this.FP)},e.prototype.LV=e.prototype.LP,e.prototype.UP=function(){return this.FP?new e(this.low,this.high,!1):this},e.prototype.BP=function(){return this.FP?this:new e(this.low,this.high,!0)},e})},function(e,t,r){"use strict";var i,n=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=r(4),o=r(3),a=r(0),h=r(166),c=r(5),u=r(25),l=r(10),p=r(167),d=r(15),f=hive.services.protocol.IF.TrackerPeerInfo,g=r(6),E=r(1),v=r(2),y=g.he.Th;!function(e){e[e.MV=1]="ACCEPT",e[e.FV=2]="REJECT"}(i=t.UV||(t.UV={}));var T;!function(e){e[e.Jq=0]="ALL",e[e.BV=1]="IN",e[e.HV=2]="OUT"}(T=t.xV||(t.xV={}));var m=function(e){function t(){var t=e.call(this)||this;return t.loggerId="[Partnership] ",t.qV=new o,t.rG=new o,t.GV=-1,t.VV=-1,t.jV=-1,t.connected=!1,t.Ng=a.Framework.resolve(a.Framework.V.F),t.QV=a.Framework.resolve(d.qu.fu),t.KV=a.Framework.resolve(d.qu.gu),t.YV=a.Framework.resolve(d.qu.Eu),t.WV=a.Framework.resolve(d.qu.vu),t}return n(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),this.sG=t,this.ticket=t.rl.ticket,this.oG=t.oG,this.mD=t.mD,this.zV=t.zV},t.prototype.start=function(e){try{this.logger.info(this.loggerId+"PARTNERSHIP STARTED "+e.getContextId()),this.context=e,this.contextId=e.getContextId(),this.JV(c.hh.No.Po),this.XV(c.hh.fa.aa),this.ZV(c.hh.Ho.ko),this.active=!0}catch(e){E.ErrorMonitor.ve().logError("Error in partnership initialization",this.loggerId,v.hs.cr.Bt,e)}},t.prototype.stop=function(){return a.Framework.clearInterval(this.GV),a.Framework.clearInterval(this.VV),a.Framework.clearInterval(this.jV),this.context=null,this.contextId=null,this.active=!1,this.$V()},t.prototype.Ud=function(e){this.logger.info("PARTNERSHIP SERVER CONNECTED"),this.gd=e,this.connected=!0,null==this.yD.getId()&&this.yD.setId(this.gd)},t.prototype.ej=function(){this.connected=!1},t.prototype.tj=function(e){try{this.rj(e)||this.qV.has(e.peerInfo.guid)||this.rG.has(e.peerInfo.guid)||e.peerInfo.guid==this.gd?this.ij(e):this.nj(e),this.sj(e)&&this.oj(e)}catch(t){E.ErrorMonitor.ve().logError("Error in discoering new lan peer",this.loggerId,v.hs.cr.Ht,{detailedError:t,otherGuid:e.peerInfo.guid})}},t.prototype.ij=function(e){if(this.aj.has(e.peerInfo.guid)){var t=this.aj.get(e.peerInfo.guid);this.aj.delete(e.peerInfo.guid),this.gB.set(e.peerInfo.guid,t),this.yD.YG(!0)}},t.prototype.oj=function(e){if(this.dB.has(e.peerInfo.guid)){var t=this.dB.get(e.peerInfo.guid);this.dB.delete(e.peerInfo.guid),this.fB.set(e.peerInfo.guid,t)}},t.prototype.JV=function(e){var t=this;-1!=this.GV&&a.Framework.clearInterval(this.GV),this.GV=a.Framework.setInterval(function(){t.hj(!1)},e)},t.prototype.hj=function(e){var t=this;e&&this.GV&&(a.Framework.clearInterval(this.GV),this.JV(c.hh.No.Po));try{if(this.connected){this.logger.debug(this.loggerId+"ADDING NEW PEERS IF POSSIBLE, NOW "+this.aj.length+"/"+c.hh.No._o+","+this.gB.length+"/infinity OUT RND "+this.dB.length+" OUT LAN "+this.fB.length);var r=[].concat(this.qV.keys()).concat(this.rG.keys()),i=this.oG.cj(!0),n=void 0;n=this.yD.ck()||this.yD.Tk()?this.YV.uj(this.yD,c.hh.No._o,this.aj.values(),r,i):this.QV.uj(c.hh.No._o,this.aj.values(),r,i),this.lj=n.pj(),n.dj().forEach(function(e){t.nj(e)})}else this.logger.warn(this.loggerId+"NOT RUNNING IN PARTNER CHOICE, SRV DISCONNECTED")}catch(e){E.ErrorMonitor.ve().logError("Error in choosing in partners",this.loggerId,v.hs.cr.xt,e)}},t.prototype.nj=function(e){var t=this,r=e.peerInfo.guid,i=e.peerInfo.privateIpString,n=e.peerInfo.publicIpString;this.logger.debug(this.loggerId+"IN PARTNER ADD PROCESS "+r),this.rj(e)||this.qV.has(r)||this.rG.has(r)||this.zV.fj(r,i,n)||(this.rG.set(r,Date.now()),this.Ng.connect(r).then(function(i){var n=i.Pg.wg(t.sG.swarmId);if(null==n&&(n=i.Pg.Tg(t.sG.swarmId)),n){t.rG.get(r);t.rG.delete(r),t.active&&t.gj(n).then(function(i){if(t.Ej(n,e,i.msg),t.yj.vj(!1,!1),t.zV.Tj(r,e.peerInfo.privateIpString,e.peerInfo.publicIpString),t.mj(n),t.lj.length>0&&!e.Ij()){var s=t.lj[0];t.Sj(s.guid),s.wj.Rj(T.HV),t.lj.splice(0,1)}}).fail(function(e){E.ErrorMonitor.ve().logError("Error in requesting partnership",t.loggerId,v.hs.cr.Vt,{otherGuid:r}),t.yj.vj(!1,!0),t.bj(r)})}}).fail(function(e){E.ErrorMonitor.ve().logError("Error in creating new p2p connection",t.loggerId,v.hs.cr.Gt,{otherGuid:r}),t.yj.vj(!0,!0),t.rG.delete(r),t.oG.KG(r)}).done())},t.prototype.Cj=function(e,t){var r=this;try{var n=e.guid,s=null,o=null;if(e.privateIpString&&(o=e.privateIpString),e.publicIpString&&(s=e.publicIpString),this._j(n))this.logger.info(this.loggerId+"ALREADY OUT PARTNER "+n);else{var u=e.contextId,l=t.Pg.wg(this.sG.swarmId);if(this.contextId!==u||c.hh.Ho.Do!==e.p2pProtocolVersion||this.zV.fj(n,o,s))this.logger.info(this.loggerId+"PARTNERSHIP CANNOT BE ESTABLISHED WITH "+n+" CONTEXT ID "+u+" protocol version "+e.p2pProtocolVersion),this.Pj(l,i.FV);else{var p=this.Aj(e),d=void 0,f=void 0;if(p){if(this.oG.gG([p],!1),f=this.oG.Oj(n),!(d=f.Ij()||this.dB.length<c.hh.No.Oo)){this.logger.debug(this.loggerId+" got out part req from "+n+" - reached max "+this.dB.length+"/"+c.hh.No.Oo);var g=void 0;g=this.yD.ck()||this.yD.Tk()?this.WV.Nj(this.yD,p,this.dB.values()):this.KV.Nj(this.dB.values()),g&&(this.logger.debug(this.loggerId+" chocking "+g.guid),this.dB.delete(g.guid),g.wj.Rj(T.BV),d=!0)}}else d=!1;if(d){var y=new h.Partner(n,this.yj,l,this.logger,!1,f);e.reportingGuid&&y.Dj(e.reportingGuid),this.oG.kj.has(n)?this.fB.set(n,y):this.dB.set(n,y),this.logger.info(this.loggerId+"ADDED OUT PART "+n),this.Pj(l,i.MV),this.zV.Tj(n,o,s),a.Framework.setTimeout(function(){r.Lj(n)},500),this.yj.Mj()}else this.logger.info(this.loggerId+" cannot establish partnership to "+n+" - reached max "+this.dB.length+"/"+c.hh.No.Oo),this.Pj(l,i.FV)}}}catch(t){E.ErrorMonitor.ve().logError("Error receiving out partnership request",this.loggerId,v.hs.cr.jt,{detailedError:t,otherGuid:e.guid})}},t.prototype.Aj=function(e){try{var t=new f;t.guid=e.guid,e.internalAs&&(t.internalAs=e.internalAs),e.externalAs&&(t.externalAs=e.externalAs),e.publicIpString&&(t.publicIpString=e.publicIpString),e.privateIpString&&(t.privateIpString=e.privateIpString);var r=!1,i=this.oG.Oj(e.guid);if(i&&(r=i.peerInfo.isLeader),e.streamCharacteristics){var n=[];e.streamCharacteristics.forEach(function(e){var t=new l.TrackerPeerStreamInfo;t.state=e.streamState,t.bitrate=e.bitrate,t.delta=e.delta,n.push(t)}),t.streams=n}return new l.bc(l.Tc.yc,t,r)}catch(t){return E.ErrorMonitor.ve().logError("Error constructing discovered peer info",this.loggerId,v.hs.cr.Qt,{detailedError:t,otherGuid:e.guid}),null}},t.prototype.Pj=function(e,t){var r=this;this.logger.debug(this.loggerId+"SEND PART RESPONSE TO "+e.otherGuid);try{var n=new u.Rf.Fa.Jg.OutPartnershipResponse;if(n.accept=t,n.accept===i.MV){this.yD.gk()&&(n.internalAs=this.yD.gk()),this.yD.Fj()&&(n.externalAs=this.yD.Fj()),this.yD.getPublicIp()&&(n.publicIpString=this.yD.getPublicIp()),this.yD.getPrivateIp()&&(n.privateIpString=this.yD.getPrivateIp()),n.reportingGuid=this.yD.getReportingGuid();var s=this.yD.Uj(),o=[];s.forEach(function(e,t){var i=new u.Rf.Fa.Jg.StreamCharacteristics;i.bitrate=t,i.streamState=e.type,i.delta=null!=r.yD.getDelta()?r.yD.getDelta():-1,o.push(i)}),o.length>0&&n.setStreamCharacteristics(o)}e.Lg(u.Rf.Eg.pg,n)}catch(t){E.ErrorMonitor.ve().logError("Error constructing partnership response message",this.loggerId,v.hs.cr.Kt,{detailedError:t,otherGuid:e.otherGuid})}},t.prototype.Bj=function(e){this.logger.warn(this.loggerId+e)},t.prototype.Ej=function(e,t,r){var i=e.otherGuid;if(r.externalAs&&(t.peerInfo.externalAs=r.externalAs),r.internalAs&&(t.peerInfo.internalAs=r.internalAs),r.publicIpString&&(t.peerInfo.publicIpString=r.publicIpString),r.privateIpString&&(t.peerInfo.privateIpString=r.privateIpString),r.streamCharacteristics){var n=[];r.streamCharacteristics.forEach(function(e){var t=new l.TrackerPeerStreamInfo;t.state=e.streamState,t.bitrate=e.bitrate,t.delta=e.delta,n.push(t)}),t.peerInfo.streams=n}try{var s=new h.Partner(i,this.yj,e,this.logger,!0,t);return r.reportingGuid&&(s.reportingGuid=r.reportingGuid,e.receiver.setReportingGuid(r.reportingGuid),e.sender.setReportingGuid(r.reportingGuid)),t.peerInfo.type==l.Tc.W?(this.gB.set(i,s),this.yD.Hj(!0),this.yD.YG(!0)):(0!=this.yD.gk()&&this.yD.gk()===t.peerInfo.internalAs&&this.yD.Hj(!0),this.aj.set(i,s)),this.logger.debug(this.loggerId+i+" IS NOW IN PARTNER"),s}catch(e){E.ErrorMonitor.ve().logError("Error adding a new partner object in the list",this.loggerId,v.hs.cr.Yt,{detailedError:e,otherGuid:i})}},t.prototype.KG=function(e){try{this.logger.info(this.loggerId+"GOT PEER DISC "+e),this.xj(e)&&(this.logger.info(this.loggerId+"IN PRT DISC "+e),this.Sj(e)),this._j(e)&&(this.logger.info(this.loggerId+"OUT PRT DISC "+e),this.dB.delete(e),this.fB.delete(e))}catch(t){E.ErrorMonitor.ve().logError("Error removing disconected partner from the list",this.loggerId,v.hs.cr.Wt,{detailedError:t,otherGuid:e})}},t.prototype.Sj=function(e){var t=this;try{this.logger.debug(this.loggerId+"IN PARTNER REMOVE "+e);var r=this.qj(e);if(this.gD.Gj(r),this.aj.delete(e),this.gB.delete(e),this.gB.length>0)this.yD.Hj(!0);else if(0!=this.yD.gk()){var i=!1;this.aj.forEach(function(e){t.yD.gk()===e.Ek.peerInfo.internalAs&&(i=!0)}),this.yD.Hj(i)}else this.yD.Hj(!1)}catch(t){E.ErrorMonitor.ve().logError("Error removing the in partner",this.loggerId,v.hs.cr.zt,{detailedError:t,otherGuid:e})}},t.prototype.Vj=function(e,t){try{this.logger.debug(this.loggerId+"CLOSE RECEIVED FROM "+e+" TYPE "+T[t.getType()]),t.getType()!=T.Jq&&t.getType()!=T.HV||(this.dB.has(e)&&this.dB.delete(e),this.fB.has(e)&&this.fB.delete(e)),t.getType()!=T.Jq&&t.getType()!=T.BV||this.Sj(e)}catch(t){E.ErrorMonitor.ve().logError("Error when close received",this.loggerId,v.hs.cr.Jt,{detailedError:t,otherGuid:e})}},t.prototype.gj=function(e){var t=this,r=s.defer();try{var i=new u.Rf.Fa.Jg.OutPartnershipRequest;i.guid=this.gd,i.contextId=this.contextId,i.p2pProtocolVersion=c.hh.Ho.Do,i.reportingGuid=this.yD.getReportingGuid(),this.yD.gk()&&(i.internalAs=this.yD.gk()),this.yD.Fj()&&(i.externalAs=this.yD.Fj()),this.yD.getPrivateIp()&&(i.privateIpString=this.yD.getPrivateIp()),this.yD.getPublicIp()&&(i.publicIpString=this.yD.getPublicIp());var n=this.yD.Uj(),o=[];n.forEach(function(e,r){var i=new u.Rf.Fa.Jg.StreamCharacteristics;i.bitrate=r,i.streamState=e.type,i.delta=null!=t.yD.getDelta()?t.yD.getDelta():-1,o.push(i)}),o.length>0&&i.setStreamCharacteristics(o),this.logger.debug(this.loggerId+"SEND PART REQ TO "+e.otherGuid+" WITH ID "+i.contextId+" internalAS "+i.internalAs+" externalAs "+i.externalAs+" private ip "+i.privateIpString+" public ip "+i.publicIpString+" rGuid "+this.yD.getReportingGuid());var h=a.Framework.setTimeout(function(){t.jj(r,e.otherGuid)},c.hh.No.Co);this.qV.set(e.otherGuid,{mG:h,defer:r}),e.Lg(u.Rf.Eg.lg,i)}catch(t){E.ErrorMonitor.ve().logError("Error sending partnership request",this.loggerId,v.hs.cr.Xt,{detailedError:t,otherGuid:e.otherGuid}),r.reject(t)}return r.Ss},t.prototype.Qj=function(e,t){var r=t.otherGuid,n=this.qV.get(r);n?(a.Framework.clearTimeout(n.mG),this.qV.delete(r),e.accept===i.MV?n.defer.resolve({yg:t,msg:e}):n.defer.reject("NOT ACCEPTED")):E.ErrorMonitor.ve().logError("Error receiving out partnership response from an unknown peer",this.loggerId,v.hs.cr.er,{otherGuid:r})},t.prototype.jj=function(e,t){if(this.qV.has(t)){E.ErrorMonitor.ve().logError("Error partnership request expired",this.loggerId,v.hs.cr.Zt,{otherGuid:t});var r=this.qV.get(t);this.qV.delete(t),r.defer.reject("EXPIRED")}else E.ErrorMonitor.ve().logError("Error partnership request expired for unknown peer",this.loggerId,v.hs.cr.$t,{otherGuid:t})},t.prototype.$V=function(){var e=this,t=s.defer(),r=this.aj.values();this.gB.forEach(function(e,t){r.push(e)});var i=r.slice().map(function(e){return e.wj.close()});return s.all(i).then(function(e){t.resolve("resolved")}).fail(function(r){E.ErrorMonitor.ve().logError("Error closing partnership",e.loggerId,v.hs.cr.tr),t.reject("could not close")}),t.Ss},t.prototype.bj=function(e){this.Ng.disconnect(e)},t.prototype.XV=function(e){var t=this;-1!=this.VV&&a.Framework.clearInterval(this.VV),this.VV=a.Framework.setInterval(function(){t.Kj()},e)},t.prototype.Kj=function(){try{if(this.yD.yk()&&!this.yD.ck()&&y){var e=this.yD.Rk(),t=this.context.PD().bitrate;if(t&&this.xj(e.uuid)){var r=this.qj(e.uuid);this.Yj(r.wj,t)}}}catch(e){E.ErrorMonitor.ve().logError("Error announcing bitrate",this.loggerId,v.hs.cr.rr,e)}},t.prototype.Yj=function(e,t){try{var r=new u.Rf.Fa.Jg.Bitrate;r.guid=this.gd,r.bitrate=t,this.logger.debug(this.loggerId+"ANNOUNCE BITRATE "+r.bitrate+" TO PEER GUID "+e.otherGuid),e.Lg(u.Rf.Eg.Bitrate,r)}catch(t){E.ErrorMonitor.ve().logError("Error constructing bitrate announcement",this.loggerId,v.hs.cr.ir,{detailedError:t,otherGuid:e.otherGuid})}},t.prototype.Wj=function(e){try{this.logger.debug(this.loggerId+"RECEIVED BITRATE "+e.bitrate+" FROM PEER GUID "+e.guid),this.oG.kj.has(e.getGuid())&&(this.oG.kj.get(e.guid).zj(e.bitrate),this.mD.Jj())}catch(t){E.ErrorMonitor.ve().logError("Error receiving bitrate info",this.loggerId,v.hs.cr.nr,{detailedError:t,otherGuid:e.guid})}},t.prototype.Xj=function(e){try{var t=e.guid,r=this.qj(t);r&&this.Zj(r,e),r=this.$j(t),r&&this.Zj(r,e),this.zV.Tj(t,e.privateIpString,e.publicIpString)}catch(t){E.ErrorMonitor.ve().logError("Error receiving peer info",this.loggerId,v.hs.cr.sr,{detailedError:t,otherGuid:e.guid})}},t.prototype.Zj=function(e,t){var r=e.Ek.peerInfo;if(t.privateIpString&&(r.privateIpString=t.privateIpString),t.publicIpString&&(r.publicIpString=t.publicIpString),t.externalAs&&(r.externalAs=t.externalAs),t.internalAs&&(r.internalAs=t.internalAs),t.streamCharacteristics){var i=[];t.streamCharacteristics.forEach(function(e){var t=new l.TrackerPeerStreamInfo;t.bitrate=e.bitrate,t.delta=e.delta,t.state=e.streamState,i.push(t)}),r.streams=i}},t.prototype.ZV=function(e){var t=this;this.jV&&a.Framework.clearInterval(this.jV),this.jV=a.Framework.setInterval(function(){t.eQ()},e)},t.prototype.eQ=function(){var e=this;try{if(this.yD.getPrivateIp()||this.yD.getPublicIp()||this.yD.gk()||this.yD.Fj()){var t=this.tQ(),r=new u.Rf.Fa.Jg.PeerInfoMessage;r.guid=this.yD.getId(),this.yD.getPrivateIp()&&(r.privateIpString=this.yD.getPrivateIp()),this.yD.getPublicIp()&&(r.publicIpString=this.yD.getPublicIp()),this.yD.Fj()&&(r.externalAs=this.yD.Fj()),this.yD.gk()&&(r.internalAs=this.yD.gk());var i=this.yD.Uj(),n=[];i.forEach(function(t,r){var i=new u.Rf.Fa.Jg.StreamCharacteristics;i.bitrate=r,i.streamState=t.type,i.delta=null!=e.yD.getDelta()?e.yD.getDelta():-1,n.push(i)}),n.length>0&&r.setStreamCharacteristics(n),t.forEach(function(e,t){e.wj.Lg(u.Rf.Eg.nd,r)})}}catch(e){E.ErrorMonitor.ve().logError("Error announcing peer info to all partners",this.loggerId,v.hs.cr.ar,e)}},t.prototype.tQ=function(){try{var e=new o;return this.dB.forEach(function(t,r){e.has(r)||e.set(r,t)}),this.fB.forEach(function(t,r){e.has(r)||e.set(r,t)}),this.gB.forEach(function(t,r){e.has(r)||e.set(r,t)}),this.aj.forEach(function(t,r){e.has(r)||e.set(r,t)}),e}catch(e){return E.ErrorMonitor.ve().logError("Error collecting all partners",this.loggerId,v.hs.cr.hr,e),new o}},t}(p.rQ);t.iQ=m},function(e,t,r){"use strict";var i=function(){function e(){}return e}();i.nQ=!0,i.sQ=3e4,i.oQ=6e4,i.aQ=3e4,t.hQ=i;var n=function(){function e(){}return e}();n.Xa="site",n.Za="externalAs",n.$a="availableSendRate",n.eh="remoteAddress",n.th="localAddress",t.cQ=n},function(e,t,r){"use strict";var i=function(){function e(e,t){this.uQ=e,this.lQ=t}return e.prototype.pj=function(){return this.lQ},e.prototype.dj=function(){return this.uQ},e}();t.pQ=i},function(e,t,r){"use strict";var i=function(){function e(){}return e.dQ=function(e,t){var r=e.gQ.fQ(!1),i=t.gQ.fQ(!1);return r>i?1:r<i?0:-1},e}();t.EQ=i;var n=function(){function e(){}return e.dQ=function(e,t){var r=e.vQ.fQ(!1),i=t.vQ.fQ(!1);return r>i?1:r<i?0:-1},e}();t.yQ=n},function(e,t,r){"use strict";var i=r(3),n=r(4),s=r(0),o=r(104),a=r(105),h=r(26),c=r(41),u=r(18),l=r(21),p=r(109),d=r(22),f=r(111),g=r(8),E=r(113),v=r(56),y=r(32),T=r(1),m=r(46),I=r(29),S=r(6),R=o.HiveComm.Options,w=a.HiveComm.TQ,b=h.HiveComm.oE,C=h.HiveComm.SE,_=h.HiveComm.HiveTechError,P=h.HiveComm.vE,A=h.HiveComm.wE,O=r(54),N=S.he.dh,D=S.he.lh,k=S.he.uh,L=S.he.ph;(k||L)&&r(14).HiveConfig,t.version=N;var M;!function(e){var a=function(){function e(e){this.mQ=[w[w.HiveJava],w[w.HiveJsProxy],w[w.HiveJS],w[w.StatsJS]],this.IQ=new i,this.SQ=new Array,this.RQ=new Array,this.wQ=null,this.bQ=0,this.CQ=0,this.loggerId="[HiveComm] ",this._Q=0,this.PQ=u.Rl.getItem("hivePluginId"),this.PQ||(this.PQ=Math.abs(Math.floor(68719476736*Math.random())).toString(16),u.Rl.setItem("hivePluginId",this.PQ)),T.ErrorMonitor.ve(t.version),this.options_=new R.AQ,this.OQ(e),l.Sp(e,this.options_),l.Rp(window.location.href,new R.NQ,this.options_),o.kQ.DQ(this.options_),this.ff=s.Framework.resolve(s.Framework.V.R),c.HiveConfig.Framework.LoggerTimestamp=this.options().loggerTimestamp,this.ff.fN(this.options().debugLevel),T.ErrorMonitor.ve().me(this.ff.log());var r=s.Framework.resolve(g.pc.M),n=s.Framework.resolve(g.pc.sc);r.Zl().then(function(e){T.ErrorMonitor.ve().setUser(e.tp()),T.ErrorMonitor.ve().Ie({reportingGuid:e.rp()}),T.ErrorMonitor.ve().Ie({p2pId:e.tp()})});var a={};new p.LQ(this),n.getConnectivityInfo().then(function(e){a={pIPAddr:e.getNetworkChanged().getPrivateIp()},T.ErrorMonitor.ve().Ie({privateIp:a.pIPAddr})}),window.gf=this.ff.log(),this.MQ(),this.pluginReference=new A(this);var h=this.options().idleTimePeriod>this.options().feedbackPeriod?this.options().idleTimePeriod:I.L.nh;this.FQ=new u.Nl(h)}return e.prototype.options=function(){return this.options_},e.prototype.logger=function(){return this.wQ?this.ff.log(this.wQ.id):this.ff.log()},e.prototype.loggerLevel=function(){if(this.logger)return this.ff.level},e.prototype.getPluginId=function(){return this.PQ},e.prototype.getCommVersion=function(){return t.version},e.prototype.updateCommsForInitSessions=function(){for(var e=0,t=this.RQ;e<t.length;e++){var r=t[e];r.tech.LL(this),"HiveJS"===r.tech.getName()&&r.tech.UQ&&r.tech.UQ.LL(this)}},e.prototype.OQ=function(e){var t=new v.StatsJS(this,e);if(this.IQ.set(v.StatsJS.EL,t),k){var i=r(132).HiveJS;this.IQ.set(i.EL,new i(this,e,t))}if(L){var n=r(199).HiveJsProxy;this.IQ.set(n.EL,new n(this,e,t))}if(D){var s=r(201).HiveJava;this.IQ.set(s.EL,new s(this,e))}var o=e.hiveTechOrder;if(!o||o instanceof Array)if(o&&o.length>0)for(var a=o.length;a--;){var h=o[a];"string"!=typeof h||-1==this.mQ.indexOf(h)?(console.warn(this.loggerId+'The "'+h+'" Hive tech is undefined'),o.splice(a,1)):"string"==typeof h&&this.IQ.has(h)||console.warn(this.loggerId+'The "'+h+'" Hive tech is not enabled on this plugin')}else o=this.mQ;else console.warn(this.loggerId+"hiveTechOrder value not accepted. It must be an array of strings"),o=this.mQ;e.hiveTechOrder=o},e.prototype.resolveTicketPromise=function(e){var t=this;this.logger().notice(this.loggerId+"resolving "+e);var r=n.defer();if(!e)return r.reject(u.Sl("",b.sE,"No ticket provided.")),r.Ss;this.BQ(e);var i=this.HQ().values();0==i.length&&r.reject(u.Sl(e,b.rE));var s,o,a=!1,h=!1,c=0,p=null;return l.wp(function(){return!a&&!h&&c<i.length&&!s},function(){var r=i[c++];r.kL();var u;return u=r.vL()&&!o?t.KB(e,t.options().testId):n.resolve(null),u.then(function(i){null!=i&&(o=i);var s=r.mL();return r.initSession(e,o).timeout(s,"["+r.getName()+"] Error: initialization timed out after "+s+"ms").then(function(e){p=e,t.xQ(p,r),a=!0,!r.vL()&&o&&o.Hl.reset(),T.ErrorMonitor.ve().Ie({sessionId:p.id}),t.logger().notice(t.loggerId+"initializing Session:["+p.id+"] Ticket:"+p.ticket.toString()+" HiveTech:["+p.tech.getName()+"]"),n.resolve(!0)},function(i){i instanceof Error&&(i=new _(P.EE,i.message),r.DL(i)),i.ticketUrl=e,h=!r.onError(i),t.logger().debug(t.loggerId+"tech "+r.getName()+": "+i.message),n.resolve(!0)})},function(e){s=e,n.resolve(!0)})}).then(function(){s?r.reject(u.Sl(e,b.sE,s)):h?r.reject(u.Sl(e,b.nE)):a?r.resolve(p):r.reject(u.Sl(e,b.rE))}).catch(function(i){T.ErrorMonitor.ve().logError("Error resolving ticket promise",t.loggerId,i),r.reject(u.Sl(e,b.tE,i.toString()))}).done(),r.Ss},e.prototype.KB=function(e,t){var r=this;return y.Hive.Reporting().initSession(e,!1,t).then(function(t){return r.logger().debug(r.loggerId+"verified ticket "+e),r.updatePlayerInfo(t),t}).catch(function(e){return n.reject("Ticket not verified, error: "+e.message)})},e.prototype.HQ=function(){var e=JSON.parse(JSON.stringify(this.options().hiveTechOrder)),t=new i;for(var r in e)this.IQ.has(e[r])&&t.set(e[r],this.IQ.get(e[r]));return t},e.prototype.BQ=function(e){var t=T.ErrorMonitor.ve();try{var r=new m.BN;r.RN(e),r.up()&&r.cp()&&r.hp()?t.setTags([r.up(),r.cp(),r.hp()]):t.logError("Ticket not valid, we could not resolve the triple partnerId/CustomerId/ContentId",this.loggerId,{partnerId:r.up(),customerId:r.cp(),contentId:r.hp()})}catch(e){this.logger().warn(this.loggerId+" "+e.message,e),t.notify(e)}},e.prototype.updatePlayerInfo=function(e){var r={commVersion:t.version,pluginName:this.getPluginName(),pluginVersion:this.getPluginVersion(),playerTech:this.getPlayerTech(),playerVersion:this.getPlayerVersion(),telemetryId:this.getTelemetryId()};e.Hl.updatePlayerInfo(r)},e.prototype.onSetupTimeout=function(){window.HiveRequest=XMLHttpRequest,u.HiveRequestFactory.clear(),y.Hive.Reporting().close()},e.prototype.addTechEvent=function(e){this.wQ&&this.wQ.tech?(e.sessionId=this.wQ.id,this.wQ.tech.bd(this.wQ,e)):this.SQ.push(e)},e.prototype.flushTechEvents=function(){var e=this.SQ;return this.SQ=new Array,e},e.prototype.MQ=function(){var e=this,t=window;t.addEventListener?t.addEventListener("beforeunload",function(){e.qQ(!0,!1)},!1):t.attachEvent("onbeforeunload",function(){e.qQ(!0,!1)})},e.prototype.closeHiveSession=function(e){this.logger().debug("Manually Closing Session"+(e?" because: "+e:""));var t=this.getActiveSession();t&&u.HiveRequestFactory.clearSessionState(t.id),this.resetSession(!0)},e.prototype.resetSession=function(e){var t=this;this.qQ(e),!1===e?this.wQ&&this.RQ.every(function(e){return e.id!==t.wQ.id})&&this.RQ.unshift(this.wQ):this.RQ.length=0,this.GQ(),this.wQ=null,this.bQ=0,this.CQ=0},e.prototype.xQ=function(e,t){e.tech=t,this.RQ.push(e)},e.prototype.onActivateSession=function(e){if(null==this.wQ){for(var t=e||this.getPlayerSource(),r=0;r<this.RQ.length;r++){var i=this.RQ[r];if(i.isActive(t)){if(this.wQ=i,this.wQ.rl?this.wQ.rl.Fl.SD(this.wQ.ticket):this.VQ(),this.RQ.length=0,this.wQ.tech.onActiveSession(this.wQ),this.logger().notice(this.loggerId+"activating Session:["+this.wQ.id+"] Ticket:"+this.wQ.ticket.toString()+" HiveTech:["+this.wQ.tech.getName()+"]"),this.jQ(),this.options().onActiveSession)try{this.options().onActiveSession(i.toHiveSession())}catch(e){T.ErrorMonitor.ve().logError(this.loggerId+" exception in user-defined Generic onActiveSession callback: "+e)}return!0}}this.logger().warn(this.loggerId+"Closing sessions - the active stream doesn't match any initialized sessions"),this.logger().warn(this.loggerId+"Active:"+t+" - initialized: "+this.RQ.length),this.resetSession()}return!1},e.prototype.getActiveSession=function(){if(this.wQ)return this.wQ.toHiveSession()},e.prototype.VQ=function(){var e=!1;this.RQ.forEach(function(t){t.rl&&(e=!0)}),e&&y.Hive.Reporting().close()},e.prototype.isSessionActive=function(){if(null!=this.wQ){if(this.wQ.isActive(this.getPlayerSource()))return!0;this.logger().warn(this.loggerId+"Session src mismatch: "+this.getPlayerSource()+" != "+this.wQ.manifest),this.resetSession()}return!1},e.prototype.qQ=function(e,t){if(void 0===t&&(t=!0),null!=this.wQ)this.logger().notice(this.loggerId+"Stopping session ["+this.wQ.id+"]"),this.wQ.close(e,t);else if(this.RQ.length>0){var r=this.RQ[0];this.logger().notice(this.loggerId+"Attempt to stopping session ["+r.id+"]"),r.close(e,t)}},e.prototype.jQ=function(){var e=this;null==this.QQ&&(this.QQ=setInterval(function(){e.KQ()},this.options().feedbackPeriod),this.KQ())},e.prototype.GQ=function(){clearInterval(this.QQ),this.QQ=null},e.prototype.KQ=function(){var e=this;if(this.isSessionActive()){if(!this.isActive())return void this.resetSession();var t=new u.ul;t.Pl=this.getCurrentTime(),t.Al=this.getBufferLen(),t.Ol=this.bQ,t.width=this.getWindowSize().width,t.height=this.getWindowSize().height,t.YQ=this.isFullscreen(),this.wQ.il(this.FQ.bl(t)),this.wQ.tech.SL(this.wQ,t).fail(function(t){e.logger().warn(e.loggerId+"stats handling failed",t),e.GQ()})}},e.prototype.registerGenericEvents=function(){var e=this;try{u.Tl.ve(this.logger()).yl(function(t){var r=e.getPotentialSession();r&&!r.sl()&&(e.onEventFeedback(t?d.Gl.Yp.Kp:d.Gl.Yp.HIDDEN),e.logger().debug(t?"visible":"hidden"))})}catch(e){T.ErrorMonitor.ve().logError("error setting up the visibilityChange listener",this.loggerId,{error:e})}},e.prototype.onStartBuffering=function(e){this.isSessionActive()&&this.CQ<=0&&(this.CQ=Date.now(),(void 0==e||e)&&this.onEventFeedback(d.Gl.Yp.xp))},e.prototype.onEndBuffering=function(){var e=0==this.bQ;if(this.CQ>0){var t=Date.now()-this.CQ;return this.bQ+=t,this.logger().debug(this.loggerId+"reporting new buffering event of "+t),this.CQ=0,e&&this.KQ(),!0}return!1},e.prototype.onError=function(e,t,r){void 0===r&&(r=!0),this.onEventFeedback(d.Gl.Yp.ERROR,{code:-1,"player-code":e}),r&&this.resetSession()},e.prototype.onEventFeedback=function(e,t){var r=this,i=this.getPotentialSession();null==i||i!=this.wQ&&i.tech.getName()===w[w.HiveJava]||i.tech.CL(i,e,t).fail(function(e){r.logger().warn(r.loggerId+"error in forwarding player event to tech",e)})},e.prototype.getPotentialSession=function(){return this.wQ?this.wQ:this.RQ&&this.RQ.length>0?this.RQ[0]:void 0},e.prototype.initStatusCode=function(){this._Q=0},e.prototype.setStatusCode=function(e,t){this.initStatusCode();this._Q+=e<<28,t&&0===e&&(this._Q+=1<<4*(6-w[t.getName()])),e>0&&T.ErrorMonitor.ve().logError("Status Code Error",this.loggerId,{code:C[e]},["Plugin Error Code",C[e]])},e.prototype.getStatusCode=function(){return this._Q},e.prototype.getTelemetryId=function(){return this.options().telemetryId},e.logError=function(e,t,r,i){var n=T.ErrorMonitor.ve();n.logError.apply(n,arguments)},e.prototype.registerComm=function(e){O.zu.registerComm(this,e)},e}();e.Plugin=a}(M=t.HiveComm||(t.HiveComm={})),s.Framework.$(new f.WQ),s.Framework.ie("peer0",new E.zQ),s.Framework.ne("peer0"),"undefined"!=typeof window&&(window.HiveRequestFactory=u.HiveRequestFactory,void 0===window.HiveComm&&(window.HiveComm={}),window.HiveComm.Plugin=M.Plugin,window.HiveComm.Options=R.AQ,window.HiveComm.HiveRequestFactory=u.HiveRequestFactory,window.HiveComm.zu=O.zu,window.HiveComm.HivePlayerExtendedStats=u.HivePlayerExtendedStats,window.HiveComm.TechName=a.HiveComm.TechName,window.HiveComm.logError=M.Plugin.logError)},function(e,t){if(!RegExp.escape){var r=/[-[\]{}()*+?.\\^$|,#\s]/g;RegExp.escape=function(e){return e.replace(r,"\\$&")}}},function(e,t,r){"use strict";function i(){throw new Error("Can't construct. MapChanges is a mixin.")}var n=r(37),s=r(50);e.i=i;var o=(Object.prototype.hasOwnProperty,new n),a=null;i.prototype.JQ=function(){return o.has(this)||(a||(a=r(51)),o.set(this,a())),o.get(this)},i.prototype.XQ=function(e){var t=this.JQ();return e=e||"",t.has(e)||t.set(e,{Yc:new s,Wc:new s}),t.get(e)},i.prototype.ZQ=function(e,t,r){!this.Zc&&this.Xc&&this.Xc();var i,n=this.XQ(t);i=r?n.Yc:n.Wc,i.push(e),Object.defineProperty(this,"dispatchesMapChanges",{value:!0,Ah:!0,l:!0,p:!1});var s=this;return function(){s&&(s.$Q(e,t,r),s=null)}},i.prototype.$Q=function(e,t,r){var i,n=this.XQ(t);i=r?n.Yc:n.Wc;var s=i.Lk(e);if(!s)throw new Error("Can't remove map change listener: does not exist: token "+JSON.stringify(t));s.delete()},i.prototype.Xk=function(e,t,r){var i="Map"+(r?"WillChange":"Change");this.JQ().forEach(function(n,s){if(!n.isActive){n.isActive=!0;var o;o=r?n.Yc:n.Wc;var a="handle"+(s.slice(0,1).toUpperCase()+s.slice(1))+i;try{o.forEach(function(r){if(r[a])r[a](t,e,this);else{if(!r.call)throw new Error("Handler "+r+" has no method "+a+" and is not callable");r.call(r,t,e,this)}},this)}finally{n.isActive=!1}}},this)},i.prototype.eK=function(e,t){return this.ZQ(e,t,!0)},i.prototype.tK=function(e,t){return this.$Q(e,t,!0)},i.prototype.Jk=function(e,t){return this.Xk(e,t,!0)}},function(e,t,r){"use strict";function i(e,t,r,n){if(!(this instanceof i))return new i(e,t,r,n);t=t||Object.cs,r=r||Object.hash,n=n||Function.us,this.ls=t,this.ps=r,this.ds=n;var s=this;this.rK=new this.iK(null,function(){return new s.nK}),this.length=0,this.addEach(e)}var n=(r(11),r(51)),s=r(50),o=r(12),a=r(39),h=r(69),c=r(13);Object.prototype.hasOwnProperty;e.i=i,i.sK=i,Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,a.prototype),Object.addEach(i.prototype,c.prototype),i.prototype.iK=n,i.prototype.nK=s,i.prototype.Es=function(e){return new this.constructor(e,this.ls,this.ps,this.ds)},i.prototype.has=function(e){var t=this.ps(e);return this.rK.get(t).has(e)},i.prototype.get=function(e,t){if(t)throw new Error("FastSet#get does not support second argument: equals");var r=this.ps(e),i=this.rK;return i.has(r)?i.get(r).get(e):this.ds(e)},i.prototype.delete=function(e,t){if(t)throw new Error("FastSet#delete does not support second argument: equals");var r=this.ps(e),i=this.rK;if(i.has(r)){var n=i.get(r);if(n.delete(e))return this.length--,0===n.length&&i.delete(r),!0}return!1},i.prototype.clear=function(){this.rK.clear(),this.length=0},i.prototype.add=function(e){var t=this.ps(e),r=this.rK;return r.has(t)||r.set(t,new this.nK(null,this.ls)),!r.get(t).has(e)&&(r.get(t).add(e),this.length++,!0)},i.prototype.reduce=function(e,t){var r=arguments[2],i=0;return this.rK.reduce(function(t,n){return n.reduce(function(t,n){return e.call(r,t,n,i++,this)},t,this)},t,this)},i.prototype.Bc=function(){if(this.length>0)return this.rK.Bc().Bc()},i.prototype.Hc=function(){return this.rK.values().kc().Hc()},i.prototype.log=function(e,t,r,i){e=e||h.hU,t=t||this.vs,r||(r=console.log,i=console),r=r.bind(i);var n=this.rK,s=n.keys();s.forEach(function(o,a){var h,c;a===s.length-1?(h=e.nU,c=" "):0===a?(h=e.rU,c=e.oU):(h=e.sU,c=e.oU);var u=n.get(o);r.call(i,h+e.eU+e.rU+" "+o),u.forEach(function(n,s){var o,a;s===u.head.Ok?(o=e.nU,a=" "):(o=e.sU,a=e.oU);var h;t(s,function(t){h?r.call(i,c+" "+a+"  "+t):(r.call(i,c+" "+o+e.eU+e.eU+t),h=!0)},function(t){r.call(i,c+" "+e.oU+"  "+t)})})})},i.prototype.vs=function(e,t){var r=e.value;Object(r)===r?JSON.stringify(r,null,4).split("\n").forEach(function(e){t(" "+e)}):t(" "+r)}},function(e,t,r){"use strict";function i(e){if(!(this instanceof i))return new i(e);if(Array.isArray(e)||"string"==typeof e)return i.Hc(e);if((e=n(e))instanceof i)return e;if(e.next)this.next=function(){return e.next()};else if(e.Hc){var t=e.Hc();this.next=function(){return t.next()}}else{if("[object Function]"!==n.prototype.toString.call(e))throw new TypeError("Can't iterate "+e);this.next=e}}e.i=i;var n=r(36),s=r(12);i.prototype.forEach=s.prototype.forEach,i.prototype.map=s.prototype.map,i.prototype.filter=s.prototype.filter,i.prototype.every=s.prototype.every,i.prototype.some=s.prototype.some,i.prototype.uo=s.prototype.uo,i.prototype.all=s.prototype.all,i.prototype.min=s.prototype.min,i.prototype.max=s.prototype.max,i.prototype.Nc=s.prototype.Nc,i.prototype.Dc=s.prototype.Dc,i.prototype.kc=s.prototype.kc,i.prototype.Lc=s.prototype.Lc,i.prototype.enumerate=s.prototype.enumerate,i.prototype.Fc=s.prototype.Fc,i.prototype.group=s.prototype.group,i.prototype.reversed=s.prototype.reversed,i.prototype.toArray=s.prototype.toArray,i.prototype.Pc=s.prototype.Pc,i.prototype.iterator=s.prototype.iterator,i.prototype.Gk=null,n.defineProperty(i.prototype,"_iterationObject",{get:function(){return this.Gk||(this.Gk={done:!1,value:void 0})}}),i.prototype.Es=function(e){var t=[];return t.addEach(e),t},i.prototype.oK=function(e){var t=i(this),r=arguments[1],s=0;if("[object Function]"!=n.prototype.toString.call(e))throw new TypeError;return new t.constructor(function(){if(!0!==t.Vk.done){var i=e.call(r,t.next().value,s++,t);t.Vk.value=i}return t.Vk})},i.prototype.aK=function(e){var t=i(this),r=arguments[1],s=0;if("[object Function]"!=n.prototype.toString.call(e))throw new TypeError;return new t.constructor(function(){for(var i;;){if(i=t.next(),!0===i.done)return i;if(e.call(r,i.value,s++,t))return i}})},i.prototype.reduce=function(e){var t,r=i(this),s=arguments[1],o=arguments[2],a=0;if("[object Function]"!=n.prototype.toString.call(e))throw new TypeError;if(t=r.next(),!0===t.done){if(arguments.length>1)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}for(s=arguments.length>1?e.call(o,s,t.value,a,r):t.value,a++;;){if(t=r.next(),!0===t.done)return s;s=e.call(o,s,t.value,a,r),a++}},i.prototype.concat=function(){return i.concat(Array.prototype.concat.apply(this,arguments))},i.prototype.hK=function(e){var t,r,s=i(this),o=arguments[1],a=!1,h=0;if("[object Function]"!=n.prototype.toString.call(e))throw new TypeError;for(;;){if(r=s.next(),!0===r.done)break;if(!e.call(o,r.value,h,s)){a=!0,t=r.value;break}h++}return a?s.constructor([t]).concat(s):s.constructor([])},i.prototype.cK=function(e){var t=i(this),r=arguments[1],s=0;if("[object Function]"!=n.prototype.toString.call(e))throw new TypeError;return new t.constructor(function(){if(!0!==t.Vk.done){var i=t.next().value;e.call(r,i,s++,t)?t.Vk.value=i:(t.Vk.done=!0,t.Vk.value=void 0)}return t.Vk})},i.prototype.uK=function(){return i.Mc(Array.prototype.concat.apply(this,arguments))},i.prototype.lK=function(e){return i.count(e).uK(this)},i.Hc=function(e){var t;return t=0,new i(function(){if("object"==typeof e)for(;!(t in e);){if(t>=e.length){this.Vk.done=!0,this.Vk.value=void 0;break}t+=1}else t>=e.length&&(this.Vk.done=!0,this.Vk.value=void 0);return this.Vk.done||(this.Vk.value=e[t],t+=1),this.Vk})},i.pK=function(e,t){var r;return arguments.length<2&&(t=1/0),new i(function(){var n,s;return r&&(s=r()),r&&!0!==s.done||(t>0?(t--,n=i.Hc(e),s=(r=n.next.bind(n))()):(this.Vk.done=!0,s=this.Vk)),s})},i.concat=function(e){e=i(e);var t;return new i(function(){var r,n;return t&&(n=t()),n&&!0!==n.done?n:(n=e.next(),!1===n.done?(r=i(n.value),(t=r.next.bind(r))()):n)})},i.Mc=function(e){return e=i(e).map(i),new i(0===e.length?[]:function(){var t,r,i=e.map(function(e){return r=e.next(),!0===r.done&&(t=!0),r.value});return t?(this.Vk.done=!0,this.Vk.value=void 0):this.Vk.value=i,this.Vk})},i.Lc=function(){return i.Mc(Array.prototype.slice.call(arguments))},i.chain=function(){return i.concat(Array.prototype.slice.call(arguments))},i.range=function(e,t,r){return arguments.length<3&&(r=1),arguments.length<2&&(t=e,e=0),e=e||0,r=r||1,new i(function(){e>=t&&(this.Vk.done=!0,this.Vk.value=void 0);var i=e;return e+=r,this.Vk.value=i,this.Vk})},i.count=function(e,t){return i.range(e,1/0,t)},i.repeat=function(e,t){return new i.range(t).oK(function(){return e})}},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(20),s=n.HiveComm.Options.Options,o=n.HiveComm.Options.mp;!function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.authTokenEnabled=!0,t.dashRemoveBitrateSize=!1,t.dashFilterBitrates=null,t.staticPartnerId=null,t.staticCustomerId=null,t.audioMetrics=!0,t.logJsonSnapshots=void 0,t}return i(t,e),t}(s);e.AQ=t;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hiveAuthTokenEnabled="authTokenEnabled",t.hiveDashRemoveBitrateSize="dashRemoveBitrateSize",t.hiveDashFilterBitrates="dashFilterBitrates",t.hiveLogJsonSnapshots="logJsonSnapshots",t.hiveStaticPartnerId="staticPartnerId",t.hiveStaticCustomerId="staticCustomerId",t.hiveAudioMetrics="audioMetrics",t}return i(t,e),t}(o);e.NQ=r}(e.Options||(e.Options={}))}(t.HiveComm||(t.HiveComm={}));var a=function(){function e(){}return e.DQ=function(e){"dashRemoveBitrateSize"in e&&e.dashRemoveBitrateSize&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashRemoveBitrateSize=e.dashRemoveBitrateSize),"dashFilterBitrates"in e&&e.dashFilterBitrates&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashFilterBitrates=e.dashFilterBitrates),"staticCustomerId"in e&&e.staticCustomerId&&window.HiveConfig&&window.HiveConfig.ClientInfo&&(window.HiveConfig.ClientInfo.uu=e.staticCustomerId),"staticPartnerId"in e&&e.staticPartnerId&&window.HiveConfig&&window.HiveConfig.ClientInfo&&(window.HiveConfig.ClientInfo.cu=e.staticPartnerId),"audioMetrics"in e&&!e.audioMetrics&&window.HiveConfig&&window.HiveConfig.Stats&&(window.HiveConfig.Stats.AudioAccounting=e.audioMetrics),"detectPrivateIP"in e&&"boolean"==typeof e.detectPrivateIP&&window.HiveConfig&&window.HiveConfig.ConnInfo&&(window.HiveConfig.ConnInfo.detectPrivateIP=e.detectPrivateIP),"logJsonSnapshots"in e&&e.logJsonSnapshots&&window.HiveConfig&&window.HiveConfig.DebugLogs&&(window.HiveConfig.DebugLogs.MetricSnapshotLogs=1,window.HiveConfig.DebugLogs.TrackSnapshotLogs=1,window.HiveConfig.DebugLogs.TrackerLogs=1)},e}();t.kQ=a},function(e,t,r){"use strict";!function(e){!function(e){e[e.HiveJS=0]="HiveJS",e[e.HiveJava=1]="HiveJava",e[e.StatsJS=2]="StatsJS",e[e.HiveJsProxy=3]="HiveJsProxy"}(e.TQ||(e.TQ={}));!function(e){e.StatsJS="StatsJS",e.HiveJsProxy="HiveJsProxy",e.HiveJava="HiveJava",e.HiveJS="HiveJS"}(e.TechName||(e.TechName={}))}(t.HiveComm||(t.HiveComm={}))},function(e,t,r){"use strict";var i=function(){function e(){var t=this;if(this.dK=new Array,this.callbacks=new Array,e.fe)throw new Error("Error: Instantiation failed: Use KeyHandlerHiveComm.getInstance() instead of new.");var r={};document.addEventListener("keydown",function(e){r[e.keyCode]=!0,t.fK(r)},!0),document.addEventListener("keyup",function(e){r={}},!0)}return e.ve=function(){return void 0===this.fe&&(this.fe=new e),this.fe},e.prototype.ye=function(e,t){this.dK.push(e),this.callbacks.push(t)},e.prototype.fK=function(e){for(var t=this,r=0;r<this.dK.length;r++)!function(r){var i=!0;t.dK[r].forEach(function(t){void 0!=e[t]&&e[t]||(i=!1)}),i&&t.callbacks[r]()}(r)},e}();t.Te=i},function(e,t){e.i=function(e){return e&&"object"==typeof e&&"function"==typeof e.cA&&"function"==typeof e.fill&&"function"==typeof e.gK}},function(e,t){"function"==typeof Object.create?e.i=function(e,t){e.EK=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,p:!1,Ah:!0,l:!0}})}:e.i=function(e,t){e.EK=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";var i=r(42),n=r(29),s=r(21),o=r(1),a=function(){function e(e){this.vK=n.L.pp?9989:9988,this.yK=-1,this.gL=e,this.TK()}return e.prototype.TK=function(){var e=this;this.gL.options().silent&&(HiveConfig&&(HiveConfig.ConnInfo.detectPrivateIP=!0),void 0===this.mK&&(this.url="//"+i.fp.dO+":"+this.vK+"/feedback",this.gL.logger().info("starting periodic alive ping to hive tester ["+this.url+"]"),this.mK=setInterval(function(){e.IK()},n.L.hR)))},e.prototype.IK=function(){var e=this,t=this.gL.getActiveSession(),r=void 0;t&&(r="S["+t.id+"]");var i=this.gL.getCurrentTime();i>this.yK?(this.gL.logger().info("sending hive tester ping ["+i+" > "+this.yK+"]"),s.bp(this.url).then(function(e){},function(t){o.ErrorMonitor.ve().logError("error sending hive tester ping",r,{error:t}),clearInterval(e.mK)})):this.gL.logger().warn("not sending hive tester ping ["+i+" <= "+this.yK+"]"),this.yK=i},e}();t.LQ=a},function(e,t){(function(t){e.i=t}).call(t,{})},function(e,t,r){"use strict";var i=r(40),n=r(112),s=r(45),o=r(0),a=function(){function e(){}return e.prototype.apply=function(e){e.bind(new i.ZA(o.Framework.V.I,n.SK,i.$A.sO)),e.bind(new i.ZA(o.Framework.V.R,s.TN.yN))},e}();t.WQ=a},function(e,t,r){"use strict";var i=r(68),n=function(){function e(){this.RK=new i,this.wK=new i,"undefined"!=typeof global?this.bK=global:this.bK=window}return e.prototype.C=function(){return!1},e.prototype.CK=function(e,t,r){},e.prototype.A=function(){},e.prototype.time=function(){return+new Date},e.prototype.setTimeout=function(e,t){var r=this,i=this.bK.setTimeout(function(){r.RK.delete(i),e()},t);return this.RK.add(i),i},e.prototype.clearTimeout=function(e){return this.RK.delete(e),this.bK.clearTimeout(e),!0},e.prototype.setInterval=function(e,t){var r=this.bK.setInterval(function(){e()},t);return this.wK.add(r),r},e.prototype.clearInterval=function(e){return this.wK.delete(e),this.bK.clearInterval(e),!0},e.prototype.O=function(){var e=this;this.RK.forEach(function(t){return e.clearTimeout(t)}),this.wK.forEach(function(t){return e.clearInterval(t)})},e}();t.SK=n},function(e,t,r){"use strict";var i=r(40),n=r(0),s=r(45),o=r(19),a=r(8),h=r(22),c=r(75),u=r(76),l=r(77),p=r(79),d=r(80),f=r(6),g=f.he.Ih;if(g)var E=r(81).CH;else var v=r(83).nx;var y=function(){function e(){}return e.prototype.apply=function(e){e.bind(new i.ZA(a.pc.hc,o.lp,i.$A.sO)),e.bind(new i.ZA(a.pc.G,u.qB,i.$A.sO)),e.bind(new i.ZA(a.pc.nc,l.WB,i.$A.sO)),e.bind(new i.ZA(a.pc.M,p.vH,i.$A.sO)),e.bind(new i.ZA(n.Framework.V.R,s.TN.yN,i.$A.sO)),g?e.bind(new i.ZA(a.pc.sc,E,i.$A.sO)):e.bind(new i.ZA(a.pc.sc,v,i.$A.sO)),e.bind(new i.ZA(a.pc.oc,d.IH,i.$A.sO)),e.bind(new i.ZA(a.pc.cc,c.Stats.ZF,i.$A.pO)),e.bind(new i.ZA(a.pc.ic,c.Stats.ql,i.$A.pO)),e.bind(new i.ZA(a.pc.uc,h.Gl.Bd,i.$A.pO)),e.bind(new i.ZA(a.pc.lc,h.Gl.ql,i.$A.pO))},e}();t.zQ=y},function(e,t,r){var i=r(33);"undefined"==typeof hive&&(hive={}),void 0===hive.snapshots&&(hive.snapshots={}),hive.snapshots.Traffic=function(e){this.reqN=null,this.respFallbackN=null,this.respFallbackErrN=null,this.respP2pN=null,this.reqOtherN=null,this.respFallbackOtherN=null,this.respFallbackOthertErrN=null,this.srcReqN=null,this.srcRespN=null,this.srcRespErrN=null,this.srcReqQt=null,this.srcRespQt=null,this.srcOverQt=null,this.srcOtherReqN=null,this.srcOtherRespN=null,this.srcOtherRespErrN=null,this.srcOtherReqQt=null,this.srcOtherRespQt=null,this.srcOtherOverQt=null,this.p2pSubReqN=null,this.p2pSubRespN=null,this.p2pSubRespPartN=null,this.p2pSubRespErrN=null,this.p2pSubRespExpN=null,this.p2pSubReqQt=null,this.p2pSubRespQt=null,this.p2pDirectQt=null,this.p2pRelayQt=null,this.p2pNatQt=null,this.p2pUdpbQt=null,this.fallAgentRespN=null,this.fallAgentPredHitN=null,this.fallAgentFailedRespN=null,this.fallAgentPredMissN=null,this.fallAgentPredPartialHitN=null,this.fallAgenTrafficSuccessQt=null,this.fallAgenTrafficFailureQt=null,this.p2pAgentPredHitN=null,this.p2pAgentPredMissN=null,this.p2pAgentPredPartialHitN=null,this.p2pAgenTrafficSuccessQt=null,this.p2pAgenTrafficFailureQt=null,this.respP2pOtherN=null,this.lCacheRespN=null,this.lCacheRespQt=null,this.p2pOutSiteLowPrio=null,e&&(void 0!==e.reqN&&null!==e.reqN&&(this.reqN=e.reqN),void 0!==e.respFallbackN&&null!==e.respFallbackN&&(this.respFallbackN=e.respFallbackN),void 0!==e.respFallbackErrN&&null!==e.respFallbackErrN&&(this.respFallbackErrN=e.respFallbackErrN),void 0!==e.respP2pN&&null!==e.respP2pN&&(this.respP2pN=e.respP2pN),void 0!==e.reqOtherN&&null!==e.reqOtherN&&(this.reqOtherN=e.reqOtherN),void 0!==e.respFallbackOtherN&&null!==e.respFallbackOtherN&&(this.respFallbackOtherN=e.respFallbackOtherN),void 0!==e.respFallbackOthertErrN&&null!==e.respFallbackOthertErrN&&(this.respFallbackOthertErrN=e.respFallbackOthertErrN),void 0!==e.srcReqN&&null!==e.srcReqN&&(this.srcReqN=e.srcReqN),void 0!==e.srcRespN&&null!==e.srcRespN&&(this.srcRespN=e.srcRespN),void 0!==e.srcRespErrN&&null!==e.srcRespErrN&&(this.srcRespErrN=e.srcRespErrN),void 0!==e.srcReqQt&&null!==e.srcReqQt&&(this.srcReqQt=e.srcReqQt),void 0!==e.srcRespQt&&null!==e.srcRespQt&&(this.srcRespQt=e.srcRespQt),void 0!==e.srcOverQt&&null!==e.srcOverQt&&(this.srcOverQt=e.srcOverQt),void 0!==e.srcOtherReqN&&null!==e.srcOtherReqN&&(this.srcOtherReqN=e.srcOtherReqN),void 0!==e.srcOtherRespN&&null!==e.srcOtherRespN&&(this.srcOtherRespN=e.srcOtherRespN),void 0!==e.srcOtherRespErrN&&null!==e.srcOtherRespErrN&&(this.srcOtherRespErrN=e.srcOtherRespErrN),void 0!==e.srcOtherReqQt&&null!==e.srcOtherReqQt&&(this.srcOtherReqQt=e.srcOtherReqQt),void 0!==e.srcOtherRespQt&&null!==e.srcOtherRespQt&&(this.srcOtherRespQt=e.srcOtherRespQt),void 0!==e.srcOtherOverQt&&null!==e.srcOtherOverQt&&(this.srcOtherOverQt=e.srcOtherOverQt),void 0!==e.p2pSubReqN&&null!==e.p2pSubReqN&&(this.p2pSubReqN=e.p2pSubReqN),void 0!==e.p2pSubRespN&&null!==e.p2pSubRespN&&(this.p2pSubRespN=e.p2pSubRespN),void 0!==e.p2pSubRespPartN&&null!==e.p2pSubRespPartN&&(this.p2pSubRespPartN=e.p2pSubRespPartN),void 0!==e.p2pSubRespErrN&&null!==e.p2pSubRespErrN&&(this.p2pSubRespErrN=e.p2pSubRespErrN),void 0!==e.p2pSubRespExpN&&null!==e.p2pSubRespExpN&&(this.p2pSubRespExpN=e.p2pSubRespExpN),void 0!==e.p2pSubReqQt&&null!==e.p2pSubReqQt&&(this.p2pSubReqQt=e.p2pSubReqQt),void 0!==e.p2pSubRespQt&&null!==e.p2pSubRespQt&&(this.p2pSubRespQt=e.p2pSubRespQt),void 0!==e.p2pDirectQt&&null!==e.p2pDirectQt&&(this.p2pDirectQt=e.p2pDirectQt),void 0!==e.p2pRelayQt&&null!==e.p2pRelayQt&&(this.p2pRelayQt=e.p2pRelayQt),void 0!==e.p2pNatQt&&null!==e.p2pNatQt&&(this.p2pNatQt=e.p2pNatQt),void 0!==e.p2pUdpbQt&&null!==e.p2pUdpbQt&&(this.p2pUdpbQt=e.p2pUdpbQt),void 0!==e.fallAgentRespN&&null!==e.fallAgentRespN&&(this.fallAgentRespN=e.fallAgentRespN),void 0!==e.fallAgentPredHitN&&null!==e.fallAgentPredHitN&&(this.fallAgentPredHitN=e.fallAgentPredHitN),void 0!==e.fallAgentFailedRespN&&null!==e.fallAgentFailedRespN&&(this.fallAgentFailedRespN=e.fallAgentFailedRespN),void 0!==e.fallAgentPredMissN&&null!==e.fallAgentPredMissN&&(this.fallAgentPredMissN=e.fallAgentPredMissN),void 0!==e.fallAgentPredPartialHitN&&null!==e.fallAgentPredPartialHitN&&(this.fallAgentPredPartialHitN=e.fallAgentPredPartialHitN),void 0!==e.fallAgenTrafficSuccessQt&&null!==e.fallAgenTrafficSuccessQt&&(this.fallAgenTrafficSuccessQt=e.fallAgenTrafficSuccessQt),void 0!==e.fallAgenTrafficFailureQt&&null!==e.fallAgenTrafficFailureQt&&(this.fallAgenTrafficFailureQt=e.fallAgenTrafficFailureQt),void 0!==e.p2pAgentPredHitN&&null!==e.p2pAgentPredHitN&&(this.p2pAgentPredHitN=e.p2pAgentPredHitN),void 0!==e.p2pAgentPredMissN&&null!==e.p2pAgentPredMissN&&(this.p2pAgentPredMissN=e.p2pAgentPredMissN),void 0!==e.p2pAgentPredPartialHitN&&null!==e.p2pAgentPredPartialHitN&&(this.p2pAgentPredPartialHitN=e.p2pAgentPredPartialHitN),void 0!==e.p2pAgenTrafficSuccessQt&&null!==e.p2pAgenTrafficSuccessQt&&(this.p2pAgenTrafficSuccessQt=e.p2pAgenTrafficSuccessQt),void 0!==e.p2pAgenTrafficFailureQt&&null!==e.p2pAgenTrafficFailureQt&&(this.p2pAgenTrafficFailureQt=e.p2pAgenTrafficFailureQt),void 0!==e.respP2pOtherN&&null!==e.respP2pOtherN&&(this.respP2pOtherN=e.respP2pOtherN),void 0!==e.lCacheRespN&&null!==e.lCacheRespN&&(this.lCacheRespN=e.lCacheRespN),void 0!==e.lCacheRespQt&&null!==e.lCacheRespQt&&(this.lCacheRespQt=e.lCacheRespQt),void 0!==e.p2pOutSiteLowPrio&&null!==e.p2pOutSiteLowPrio&&(this.p2pOutSiteLowPrio=e.p2pOutSiteLowPrio))},hive.snapshots.Traffic.prototype={},hive.snapshots.Traffic.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.reqN=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.DOUBLE?this.respFallbackN=e.E_().value:e.Mb(r);break;case 3:r==i.Type.I32?this.respFallbackErrN=e.Fb().value:e.Mb(r);break;case 4:r==i.Type.DOUBLE?this.respP2pN=e.E_().value:e.Mb(r);break;case 5:r==i.Type.I32?this.reqOtherN=e.Fb().value:e.Mb(r);break;case 6:r==i.Type.I32?this.respFallbackOtherN=e.Fb().value:e.Mb(r);break;case 7:r==i.Type.I32?this.respFallbackOthertErrN=e.Fb().value:e.Mb(r);break;case 8:r==i.Type.I32?this.srcReqN=e.Fb().value:e.Mb(r);break;case 9:r==i.Type.I32?this.srcRespN=e.Fb().value:e.Mb(r);break;case 10:r==i.Type.I32?this.srcRespErrN=e.Fb().value:e.Mb(r);break;case 11:r==i.Type.I64?this.srcReqQt=e.g_().value:e.Mb(r);break;case 12:r==i.Type.I64?this.srcRespQt=e.g_().value:e.Mb(r);break;case 13:r==i.Type.I64?this.srcOverQt=e.g_().value:e.Mb(r);break;case 14:r==i.Type.I32?this.srcOtherReqN=e.Fb().value:e.Mb(r);break;case 15:r==i.Type.I32?this.srcOtherRespN=e.Fb().value:e.Mb(r);break;case 16:r==i.Type.I32?this.srcOtherRespErrN=e.Fb().value:e.Mb(r);break;case 17:r==i.Type.I64?this.srcOtherReqQt=e.g_().value:e.Mb(r);break;case 18:r==i.Type.I64?this.srcOtherRespQt=e.g_().value:e.Mb(r);break;case 19:r==i.Type.I64?this.srcOtherOverQt=e.g_().value:e.Mb(r);break;case 20:r==i.Type.I32?this.p2pSubReqN=e.Fb().value:e.Mb(r);break;case 21:r==i.Type.I32?this.p2pSubRespN=e.Fb().value:e.Mb(r);break;case 22:r==i.Type.DOUBLE?this.p2pSubRespPartN=e.E_().value:e.Mb(r);break;case 23:r==i.Type.DOUBLE?this.p2pSubRespErrN=e.E_().value:e.Mb(r);break;case 24:r==i.Type.I32?this.p2pSubRespExpN=e.Fb().value:e.Mb(r);break;case 25:r==i.Type.I64?this.p2pSubReqQt=e.g_().value:e.Mb(r);break;case 26:r==i.Type.I64?this.p2pSubRespQt=e.g_().value:e.Mb(r);break;case 27:r==i.Type.I64?this.p2pDirectQt=e.g_().value:e.Mb(r);break;case 28:r==i.Type.I64?this.p2pRelayQt=e.g_().value:e.Mb(r);break;case 29:r==i.Type.I64?this.p2pNatQt=e.g_().value:e.Mb(r);break;case 30:r==i.Type.I64?this.p2pUdpbQt=e.g_().value:e.Mb(r);break;case 31:r==i.Type.I32?this.fallAgentRespN=e.Fb().value:e.Mb(r);break;case 32:r==i.Type.I32?this.fallAgentPredHitN=e.Fb().value:e.Mb(r);break;case 33:r==i.Type.I32?this.fallAgentFailedRespN=e.Fb().value:e.Mb(r);break;case 34:r==i.Type.I32?this.fallAgentPredMissN=e.Fb().value:e.Mb(r);break;case 35:r==i.Type.I32?this.fallAgentPredPartialHitN=e.Fb().value:e.Mb(r);break;case 36:r==i.Type.I64?this.fallAgenTrafficSuccessQt=e.g_().value:e.Mb(r);break;case 37:r==i.Type.I64?this.fallAgenTrafficFailureQt=e.g_().value:e.Mb(r);break;case 38:r==i.Type.I32?this.p2pAgentPredHitN=e.Fb().value:e.Mb(r);break;case 39:r==i.Type.I32?this.p2pAgentPredMissN=e.Fb().value:e.Mb(r);break;case 40:r==i.Type.I32?this.p2pAgentPredPartialHitN=e.Fb().value:e.Mb(r);break;case 41:r==i.Type.I64?this.p2pAgenTrafficSuccessQt=e.g_().value:e.Mb(r);break;case 42:r==i.Type.I64?this.p2pAgenTrafficFailureQt=e.g_().value:e.Mb(r);break;case 43:r==i.Type.I32?this.respP2pOtherN=e.Fb().value:e.Mb(r);break;case 44:r==i.Type.I32?this.lCacheRespN=e.Fb().value:e.Mb(r);break;case 45:r==i.Type.I64?this.lCacheRespQt=e.g_().value:e.Mb(r);break;case 46:r==i.Type.I64?this.p2pOutSiteLowPrio=e.g_().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.Traffic.prototype.write=function(e){e.Hb("Traffic"),null!==this.reqN&&void 0!==this.reqN&&(e.xb("reqN",i.Type.I32,1),e.Vb(this.reqN),e.Gb()),null!==this.respFallbackN&&void 0!==this.respFallbackN&&(e.xb("respFallbackN",i.Type.DOUBLE,2),e.YC(this.respFallbackN),e.Gb()),null!==this.respFallbackErrN&&void 0!==this.respFallbackErrN&&(e.xb("respFallbackErrN",i.Type.I32,3),e.Vb(this.respFallbackErrN),e.Gb()),null!==this.respP2pN&&void 0!==this.respP2pN&&(e.xb("respP2pN",i.Type.DOUBLE,4),e.YC(this.respP2pN),e.Gb()),null!==this.reqOtherN&&void 0!==this.reqOtherN&&(e.xb("reqOtherN",i.Type.I32,5),e.Vb(this.reqOtherN),e.Gb()),null!==this.respFallbackOtherN&&void 0!==this.respFallbackOtherN&&(e.xb("respFallbackOtherN",i.Type.I32,6),e.Vb(this.respFallbackOtherN),e.Gb()),null!==this.respFallbackOthertErrN&&void 0!==this.respFallbackOthertErrN&&(e.xb("respFallbackOthertErrN",i.Type.I32,7),e.Vb(this.respFallbackOthertErrN),e.Gb()),null!==this.srcReqN&&void 0!==this.srcReqN&&(e.xb("srcReqN",i.Type.I32,8),e.Vb(this.srcReqN),e.Gb()),null!==this.srcRespN&&void 0!==this.srcRespN&&(e.xb("srcRespN",i.Type.I32,9),e.Vb(this.srcRespN),e.Gb()),null!==this.srcRespErrN&&void 0!==this.srcRespErrN&&(e.xb("srcRespErrN",i.Type.I32,10),e.Vb(this.srcRespErrN),e.Gb()),null!==this.srcReqQt&&void 0!==this.srcReqQt&&(e.xb("srcReqQt",i.Type.I64,11),e.KC(this.srcReqQt),e.Gb()),null!==this.srcRespQt&&void 0!==this.srcRespQt&&(e.xb("srcRespQt",i.Type.I64,12),e.KC(this.srcRespQt),e.Gb()),null!==this.srcOverQt&&void 0!==this.srcOverQt&&(e.xb("srcOverQt",i.Type.I64,13),e.KC(this.srcOverQt),e.Gb()),null!==this.srcOtherReqN&&void 0!==this.srcOtherReqN&&(e.xb("srcOtherReqN",i.Type.I32,14),e.Vb(this.srcOtherReqN),e.Gb()),null!==this.srcOtherRespN&&void 0!==this.srcOtherRespN&&(e.xb("srcOtherRespN",i.Type.I32,15),e.Vb(this.srcOtherRespN),e.Gb()),null!==this.srcOtherRespErrN&&void 0!==this.srcOtherRespErrN&&(e.xb("srcOtherRespErrN",i.Type.I32,16),e.Vb(this.srcOtherRespErrN),e.Gb()),null!==this.srcOtherReqQt&&void 0!==this.srcOtherReqQt&&(e.xb("srcOtherReqQt",i.Type.I64,17),e.KC(this.srcOtherReqQt),e.Gb()),null!==this.srcOtherRespQt&&void 0!==this.srcOtherRespQt&&(e.xb("srcOtherRespQt",i.Type.I64,18),e.KC(this.srcOtherRespQt),e.Gb()),null!==this.srcOtherOverQt&&void 0!==this.srcOtherOverQt&&(e.xb("srcOtherOverQt",i.Type.I64,19),e.KC(this.srcOtherOverQt),e.Gb()),null!==this.p2pSubReqN&&void 0!==this.p2pSubReqN&&(e.xb("p2pSubReqN",i.Type.I32,20),e.Vb(this.p2pSubReqN),e.Gb()),null!==this.p2pSubRespN&&void 0!==this.p2pSubRespN&&(e.xb("p2pSubRespN",i.Type.I32,21),e.Vb(this.p2pSubRespN),e.Gb()),null!==this.p2pSubRespPartN&&void 0!==this.p2pSubRespPartN&&(e.xb("p2pSubRespPartN",i.Type.DOUBLE,22),e.YC(this.p2pSubRespPartN),e.Gb()),null!==this.p2pSubRespErrN&&void 0!==this.p2pSubRespErrN&&(e.xb("p2pSubRespErrN",i.Type.DOUBLE,23),e.YC(this.p2pSubRespErrN),e.Gb()),null!==this.p2pSubRespExpN&&void 0!==this.p2pSubRespExpN&&(e.xb("p2pSubRespExpN",i.Type.I32,24),e.Vb(this.p2pSubRespExpN),e.Gb()),null!==this.p2pSubReqQt&&void 0!==this.p2pSubReqQt&&(e.xb("p2pSubReqQt",i.Type.I64,25),e.KC(this.p2pSubReqQt),e.Gb()),null!==this.p2pSubRespQt&&void 0!==this.p2pSubRespQt&&(e.xb("p2pSubRespQt",i.Type.I64,26),e.KC(this.p2pSubRespQt),e.Gb()),null!==this.p2pDirectQt&&void 0!==this.p2pDirectQt&&(e.xb("p2pDirectQt",i.Type.I64,27),e.KC(this.p2pDirectQt),e.Gb()),null!==this.p2pRelayQt&&void 0!==this.p2pRelayQt&&(e.xb("p2pRelayQt",i.Type.I64,28),e.KC(this.p2pRelayQt),e.Gb()),null!==this.p2pNatQt&&void 0!==this.p2pNatQt&&(e.xb("p2pNatQt",i.Type.I64,29),e.KC(this.p2pNatQt),e.Gb()),null!==this.p2pUdpbQt&&void 0!==this.p2pUdpbQt&&(e.xb("p2pUdpbQt",i.Type.I64,30),e.KC(this.p2pUdpbQt),e.Gb()),null!==this.fallAgentRespN&&void 0!==this.fallAgentRespN&&(e.xb("fallAgentRespN",i.Type.I32,31),e.Vb(this.fallAgentRespN),e.Gb()),null!==this.fallAgentPredHitN&&void 0!==this.fallAgentPredHitN&&(e.xb("fallAgentPredHitN",i.Type.I32,32),e.Vb(this.fallAgentPredHitN),e.Gb()),null!==this.fallAgentFailedRespN&&void 0!==this.fallAgentFailedRespN&&(e.xb("fallAgentFailedRespN",i.Type.I32,33),e.Vb(this.fallAgentFailedRespN),e.Gb()),null!==this.fallAgentPredMissN&&void 0!==this.fallAgentPredMissN&&(e.xb("fallAgentPredMissN",i.Type.I32,34),e.Vb(this.fallAgentPredMissN),e.Gb()),null!==this.fallAgentPredPartialHitN&&void 0!==this.fallAgentPredPartialHitN&&(e.xb("fallAgentPredPartialHitN",i.Type.I32,35),e.Vb(this.fallAgentPredPartialHitN),e.Gb()),null!==this.fallAgenTrafficSuccessQt&&void 0!==this.fallAgenTrafficSuccessQt&&(e.xb("fallAgenTrafficSuccessQt",i.Type.I64,36),e.KC(this.fallAgenTrafficSuccessQt),e.Gb()),null!==this.fallAgenTrafficFailureQt&&void 0!==this.fallAgenTrafficFailureQt&&(e.xb("fallAgenTrafficFailureQt",i.Type.I64,37),e.KC(this.fallAgenTrafficFailureQt),e.Gb()),null!==this.p2pAgentPredHitN&&void 0!==this.p2pAgentPredHitN&&(e.xb("p2pAgentPredHitN",i.Type.I32,38),e.Vb(this.p2pAgentPredHitN),e.Gb()),null!==this.p2pAgentPredMissN&&void 0!==this.p2pAgentPredMissN&&(e.xb("p2pAgentPredMissN",i.Type.I32,39),e.Vb(this.p2pAgentPredMissN),e.Gb()),null!==this.p2pAgentPredPartialHitN&&void 0!==this.p2pAgentPredPartialHitN&&(e.xb("p2pAgentPredPartialHitN",i.Type.I32,40),e.Vb(this.p2pAgentPredPartialHitN),e.Gb()),null!==this.p2pAgenTrafficSuccessQt&&void 0!==this.p2pAgenTrafficSuccessQt&&(e.xb("p2pAgenTrafficSuccessQt",i.Type.I64,41),e.KC(this.p2pAgenTrafficSuccessQt),e.Gb()),null!==this.p2pAgenTrafficFailureQt&&void 0!==this.p2pAgenTrafficFailureQt&&(e.xb("p2pAgenTrafficFailureQt",i.Type.I64,42),e.KC(this.p2pAgenTrafficFailureQt),e.Gb()),null!==this.respP2pOtherN&&void 0!==this.respP2pOtherN&&(e.xb("respP2pOtherN",i.Type.I32,43),e.Vb(this.respP2pOtherN),e.Gb()),null!==this.lCacheRespN&&void 0!==this.lCacheRespN&&(e.xb("lCacheRespN",i.Type.I32,44),e.Vb(this.lCacheRespN),e.Gb()),null!==this.lCacheRespQt&&void 0!==this.lCacheRespQt&&(e.xb("lCacheRespQt",i.Type.I64,45),e.KC(this.lCacheRespQt),e.Gb()),null!==this.p2pOutSiteLowPrio&&void 0!==this.p2pOutSiteLowPrio&&(e.xb("p2pOutSiteLowPrio",i.Type.I64,46),e.KC(this.p2pOutSiteLowPrio),e.Gb()),e.jb(),e.Qb()},hive.snapshots.Metrics=function(e){this.upBW=null,this.downBW=null,this.memN=null,this.prtInN=null,this.prtOutN=null,this.initVideoBufQt=null,this.videoAvgBufQt=null,this.videoBufQt=null,this.videoBufN=null,this.initAudioBufQt=null,this.audioAvgBufQt=null,this.audioBufQt=null,this.audioBufN=null,this.bitrateUpN=null,this.bitrateDwnN=null,this.delay=null,this.delayEnforcement=null,this.lookupReqEstablished=null,this.lookupReqAccept=null,this.fallbackAvgTp=null,this.srcThroughput=null,this.diskReadTimeout=null,this.diskReadRate=null,this.diskStoreRate=null,this.diskRemoveRate=null,this.diskCacheSize=null,this.clientBufferMs=null,this.lookupTotal=null,this.lookupNotFound=null,this.lookupFailed=null,this.lookupLatency=null,this.trackerFailed=null,this.trackerLatency=null,this.snapshotFailed=null,this.snapshotLatency=null,this._K=null,e&&(void 0!==e.upBW&&null!==e.upBW&&(this.upBW=e.upBW),void 0!==e.downBW&&null!==e.downBW&&(this.downBW=e.downBW),void 0!==e.memN&&null!==e.memN&&(this.memN=e.memN),void 0!==e.prtInN&&null!==e.prtInN&&(this.prtInN=e.prtInN),void 0!==e.prtOutN&&null!==e.prtOutN&&(this.prtOutN=e.prtOutN),void 0!==e.initVideoBufQt&&null!==e.initVideoBufQt&&(this.initVideoBufQt=e.initVideoBufQt),void 0!==e.videoAvgBufQt&&null!==e.videoAvgBufQt&&(this.videoAvgBufQt=e.videoAvgBufQt),void 0!==e.videoBufQt&&null!==e.videoBufQt&&(this.videoBufQt=e.videoBufQt),void 0!==e.videoBufN&&null!==e.videoBufN&&(this.videoBufN=e.videoBufN),void 0!==e.initAudioBufQt&&null!==e.initAudioBufQt&&(this.initAudioBufQt=e.initAudioBufQt),void 0!==e.audioAvgBufQt&&null!==e.audioAvgBufQt&&(this.audioAvgBufQt=e.audioAvgBufQt),void 0!==e.audioBufQt&&null!==e.audioBufQt&&(this.audioBufQt=e.audioBufQt),void 0!==e.audioBufN&&null!==e.audioBufN&&(this.audioBufN=e.audioBufN),void 0!==e.bitrateUpN&&null!==e.bitrateUpN&&(this.bitrateUpN=e.bitrateUpN),void 0!==e.bitrateDwnN&&null!==e.bitrateDwnN&&(this.bitrateDwnN=e.bitrateDwnN),void 0!==e.delay&&null!==e.delay&&(this.delay=e.delay),void 0!==e.delayEnforcement&&null!==e.delayEnforcement&&(this.delayEnforcement=e.delayEnforcement),void 0!==e.lookupReqEstablished&&null!==e.lookupReqEstablished&&(this.lookupReqEstablished=e.lookupReqEstablished),void 0!==e.lookupReqAccept&&null!==e.lookupReqAccept&&(this.lookupReqAccept=e.lookupReqAccept),void 0!==e.fallbackAvgTp&&null!==e.fallbackAvgTp&&(this.fallbackAvgTp=e.fallbackAvgTp),void 0!==e.srcThroughput&&null!==e.srcThroughput&&(this.srcThroughput=e.srcThroughput),void 0!==e.diskReadTimeout&&null!==e.diskReadTimeout&&(this.diskReadTimeout=e.diskReadTimeout),void 0!==e.diskReadRate&&null!==e.diskReadRate&&(this.diskReadRate=e.diskReadRate),void 0!==e.diskStoreRate&&null!==e.diskStoreRate&&(this.diskStoreRate=e.diskStoreRate),void 0!==e.diskRemoveRate&&null!==e.diskRemoveRate&&(this.diskRemoveRate=e.diskRemoveRate),void 0!==e.diskCacheSize&&null!==e.diskCacheSize&&(this.diskCacheSize=e.diskCacheSize),void 0!==e.clientBufferMs&&null!==e.clientBufferMs&&(this.clientBufferMs=e.clientBufferMs),void 0!==e.lookupTotal&&null!==e.lookupTotal&&(this.lookupTotal=e.lookupTotal),void 0!==e.lookupNotFound&&null!==e.lookupNotFound&&(this.lookupNotFound=e.lookupNotFound),void 0!==e.lookupFailed&&null!==e.lookupFailed&&(this.lookupFailed=e.lookupFailed),void 0!==e.lookupLatency&&null!==e.lookupLatency&&(this.lookupLatency=e.lookupLatency),void 0!==e.trackerFailed&&null!==e.trackerFailed&&(this.trackerFailed=e.trackerFailed),void 0!==e.trackerLatency&&null!==e.trackerLatency&&(this.trackerLatency=e.trackerLatency),void 0!==e.snapshotFailed&&null!==e.snapshotFailed&&(this.snapshotFailed=e.snapshotFailed),void 0!==e.snapshotLatency&&null!==e.snapshotLatency&&(this.snapshotLatency=e.snapshotLatency),void 0!==e._K&&null!==e._K&&(this._K=e._K))},hive.snapshots.Metrics.prototype={},hive.snapshots.Metrics.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.upBW=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.I32?this.downBW=e.Fb().value:e.Mb(r);break;case 3:r==i.Type.I32?this.memN=e.Fb().value:e.Mb(r);break;case 4:r==i.Type.I32?this.prtInN=e.Fb().value:e.Mb(r);break;case 5:r==i.Type.I32?this.prtOutN=e.Fb().value:e.Mb(r);break;case 6:r==i.Type.I64?this.initVideoBufQt=e.g_().value:e.Mb(r);break;case 7:r==i.Type.DOUBLE?this.videoAvgBufQt=e.E_().value:e.Mb(r);break;case 8:r==i.Type.I64?this.videoBufQt=e.g_().value:e.Mb(r);break;case 9:r==i.Type.I32?this.videoBufN=e.Fb().value:e.Mb(r);break;case 10:r==i.Type.I32?this.initAudioBufQt=e.Fb().value:e.Mb(r);break;case 11:r==i.Type.DOUBLE?this.audioAvgBufQt=e.E_().value:e.Mb(r);break;case 12:r==i.Type.I64?this.audioBufQt=e.g_().value:e.Mb(r);break;case 13:r==i.Type.I32?this.audioBufN=e.Fb().value:e.Mb(r);break;case 14:r==i.Type.I32?this.bitrateUpN=e.Fb().value:e.Mb(r);break;case 15:r==i.Type.I32?this.bitrateDwnN=e.Fb().value:e.Mb(r);break;case 16:r==i.Type.I32?this.delay=e.Fb().value:e.Mb(r);break;case 17:r==i.Type.I32?this.delayEnforcement=e.Fb().value:e.Mb(r);break;case 18:r==i.Type.I32?this.lookupReqEstablished=e.Fb().value:e.Mb(r);break;case 19:r==i.Type.I32?this.lookupReqAccept=e.Fb().value:e.Mb(r);break;case 20:r==i.Type.DOUBLE?this.fallbackAvgTp=e.E_().value:e.Mb(r);break;case 21:r==i.Type.DOUBLE?this.srcThroughput=e.E_().value:e.Mb(r);break;case 22:r==i.Type.I32?this.diskReadTimeout=e.Fb().value:e.Mb(r);break;case 23:r==i.Type.DOUBLE?this.diskReadRate=e.E_().value:e.Mb(r);break;case 24:r==i.Type.DOUBLE?this.diskStoreRate=e.E_().value:e.Mb(r);break;case 25:r==i.Type.DOUBLE?this.diskRemoveRate=e.E_().value:e.Mb(r);break;case 26:r==i.Type.I64?this.diskCacheSize=e.g_().value:e.Mb(r);break;case 27:r==i.Type.I32?this.clientBufferMs=e.Fb().value:e.Mb(r);break;case 28:r==i.Type.I32?this.lookupTotal=e.Fb().value:e.Mb(r);break;case 29:r==i.Type.I32?this.lookupNotFound=e.Fb().value:e.Mb(r);break;case 30:r==i.Type.I32?this.lookupFailed=e.Fb().value:e.Mb(r);break;case 31:r==i.Type.I32?this.lookupLatency=e.Fb().value:e.Mb(r);break;case 32:r==i.Type.I32?this.trackerFailed=e.Fb().value:e.Mb(r);break;case 33:r==i.Type.I32?this.trackerLatency=e.Fb().value:e.Mb(r);break;case 34:r==i.Type.I32?this.snapshotFailed=e.Fb().value:e.Mb(r);break;case 35:r==i.Type.I32?this.snapshotLatency=e.Fb().value:e.Mb(r);break;case 36:r==i.Type.I32?this._K=e.Fb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.Metrics.prototype.write=function(e){e.Hb("Metrics"),null!==this.upBW&&void 0!==this.upBW&&(e.xb("upBW",i.Type.I32,1),e.Vb(this.upBW),e.Gb()),null!==this.downBW&&void 0!==this.downBW&&(e.xb("downBW",i.Type.I32,2),e.Vb(this.downBW),e.Gb()),null!==this.memN&&void 0!==this.memN&&(e.xb("memN",i.Type.I32,3),e.Vb(this.memN),e.Gb()),null!==this.prtInN&&void 0!==this.prtInN&&(e.xb("prtInN",i.Type.I32,4),e.Vb(this.prtInN),e.Gb()),null!==this.prtOutN&&void 0!==this.prtOutN&&(e.xb("prtOutN",i.Type.I32,5),e.Vb(this.prtOutN),e.Gb()),null!==this.initVideoBufQt&&void 0!==this.initVideoBufQt&&(e.xb("initVideoBufQt",i.Type.I64,6),e.KC(this.initVideoBufQt),e.Gb()),null!==this.videoAvgBufQt&&void 0!==this.videoAvgBufQt&&(e.xb("videoAvgBufQt",i.Type.DOUBLE,7),e.YC(this.videoAvgBufQt),e.Gb()),null!==this.videoBufQt&&void 0!==this.videoBufQt&&(e.xb("videoBufQt",i.Type.I64,8),e.KC(this.videoBufQt),e.Gb()),null!==this.videoBufN&&void 0!==this.videoBufN&&(e.xb("videoBufN",i.Type.I32,9),e.Vb(this.videoBufN),e.Gb()),null!==this.initAudioBufQt&&void 0!==this.initAudioBufQt&&(e.xb("initAudioBufQt",i.Type.I32,10),e.Vb(this.initAudioBufQt),e.Gb()),null!==this.audioAvgBufQt&&void 0!==this.audioAvgBufQt&&(e.xb("audioAvgBufQt",i.Type.DOUBLE,11),e.YC(this.audioAvgBufQt),e.Gb()),null!==this.audioBufQt&&void 0!==this.audioBufQt&&(e.xb("audioBufQt",i.Type.I64,12),e.KC(this.audioBufQt),e.Gb()),null!==this.audioBufN&&void 0!==this.audioBufN&&(e.xb("audioBufN",i.Type.I32,13),e.Vb(this.audioBufN),e.Gb()),null!==this.bitrateUpN&&void 0!==this.bitrateUpN&&(e.xb("bitrateUpN",i.Type.I32,14),e.Vb(this.bitrateUpN),e.Gb()),null!==this.bitrateDwnN&&void 0!==this.bitrateDwnN&&(e.xb("bitrateDwnN",i.Type.I32,15),e.Vb(this.bitrateDwnN),e.Gb()),null!==this.delay&&void 0!==this.delay&&(e.xb("delay",i.Type.I32,16),e.Vb(this.delay),e.Gb()),null!==this.delayEnforcement&&void 0!==this.delayEnforcement&&(e.xb("delayEnforcement",i.Type.I32,17),e.Vb(this.delayEnforcement),e.Gb()),null!==this.lookupReqEstablished&&void 0!==this.lookupReqEstablished&&(e.xb("lookupReqEstablished",i.Type.I32,18),e.Vb(this.lookupReqEstablished),e.Gb()),null!==this.lookupReqAccept&&void 0!==this.lookupReqAccept&&(e.xb("lookupReqAccept",i.Type.I32,19),e.Vb(this.lookupReqAccept),e.Gb()),null!==this.fallbackAvgTp&&void 0!==this.fallbackAvgTp&&(e.xb("fallbackAvgTp",i.Type.DOUBLE,20),e.YC(this.fallbackAvgTp),e.Gb()),null!==this.srcThroughput&&void 0!==this.srcThroughput&&(e.xb("srcThroughput",i.Type.DOUBLE,21),e.YC(this.srcThroughput),e.Gb()),null!==this.diskReadTimeout&&void 0!==this.diskReadTimeout&&(e.xb("diskReadTimeout",i.Type.I32,22),e.Vb(this.diskReadTimeout),e.Gb()),null!==this.diskReadRate&&void 0!==this.diskReadRate&&(e.xb("diskReadRate",i.Type.DOUBLE,23),e.YC(this.diskReadRate),e.Gb()),null!==this.diskStoreRate&&void 0!==this.diskStoreRate&&(e.xb("diskStoreRate",i.Type.DOUBLE,24),e.YC(this.diskStoreRate),e.Gb()),null!==this.diskRemoveRate&&void 0!==this.diskRemoveRate&&(e.xb("diskRemoveRate",i.Type.DOUBLE,25),e.YC(this.diskRemoveRate),e.Gb()),null!==this.diskCacheSize&&void 0!==this.diskCacheSize&&(e.xb("diskCacheSize",i.Type.I64,26),e.KC(this.diskCacheSize),e.Gb()),null!==this.clientBufferMs&&void 0!==this.clientBufferMs&&(e.xb("clientBufferMs",i.Type.I32,27),e.Vb(this.clientBufferMs),e.Gb()),null!==this.lookupTotal&&void 0!==this.lookupTotal&&(e.xb("lookupTotal",i.Type.I32,28),e.Vb(this.lookupTotal),e.Gb()),null!==this.lookupNotFound&&void 0!==this.lookupNotFound&&(e.xb("lookupNotFound",i.Type.I32,29),e.Vb(this.lookupNotFound),e.Gb()),null!==this.lookupFailed&&void 0!==this.lookupFailed&&(e.xb("lookupFailed",i.Type.I32,30),e.Vb(this.lookupFailed),e.Gb()),null!==this.lookupLatency&&void 0!==this.lookupLatency&&(e.xb("lookupLatency",i.Type.I32,31),e.Vb(this.lookupLatency),e.Gb()),null!==this.trackerFailed&&void 0!==this.trackerFailed&&(e.xb("trackerFailed",i.Type.I32,32),e.Vb(this.trackerFailed),e.Gb()),null!==this.trackerLatency&&void 0!==this.trackerLatency&&(e.xb("trackerLatency",i.Type.I32,33),e.Vb(this.trackerLatency),e.Gb()),null!==this.snapshotFailed&&void 0!==this.snapshotFailed&&(e.xb("snapshotFailed",i.Type.I32,34),e.Vb(this.snapshotFailed),e.Gb()),null!==this.snapshotLatency&&void 0!==this.snapshotLatency&&(e.xb("snapshotLatency",i.Type.I32,35),e.Vb(this.snapshotLatency),e.Gb()),null!==this._K&&void 0!==this._K&&(e.xb("sourceLatency",i.Type.I32,36),e.Vb(this._K),e.Gb()),e.jb(),e.Qb()},hive.snapshots.PartnerTraffic=function(e){this.p2pSuccReq=null,this.p2pFailReq=null,this.p2pPartReq=null,this.p2pSuccReceived=null,this.p2pSuccReceivedLow=null,this.p2pFailReceived=null,this.p2pSuccResp=null,this.p2pFailResp=null,this.p2pPartResp=null,this.p2pSuccSent=null,this.p2pSuccSentLow=null,this.p2pFailSent=null,e&&(void 0!==e.p2pSuccReq&&null!==e.p2pSuccReq&&(this.p2pSuccReq=e.p2pSuccReq),void 0!==e.p2pFailReq&&null!==e.p2pFailReq&&(this.p2pFailReq=e.p2pFailReq),void 0!==e.p2pPartReq&&null!==e.p2pPartReq&&(this.p2pPartReq=e.p2pPartReq),void 0!==e.p2pSuccReceived&&null!==e.p2pSuccReceived&&(this.p2pSuccReceived=e.p2pSuccReceived),void 0!==e.p2pSuccReceivedLow&&null!==e.p2pSuccReceivedLow&&(this.p2pSuccReceivedLow=e.p2pSuccReceivedLow),void 0!==e.p2pFailReceived&&null!==e.p2pFailReceived&&(this.p2pFailReceived=e.p2pFailReceived),void 0!==e.p2pSuccResp&&null!==e.p2pSuccResp&&(this.p2pSuccResp=e.p2pSuccResp),void 0!==e.p2pFailResp&&null!==e.p2pFailResp&&(this.p2pFailResp=e.p2pFailResp),void 0!==e.p2pPartResp&&null!==e.p2pPartResp&&(this.p2pPartResp=e.p2pPartResp),void 0!==e.p2pSuccSent&&null!==e.p2pSuccSent&&(this.p2pSuccSent=e.p2pSuccSent),void 0!==e.p2pSuccSentLow&&null!==e.p2pSuccSentLow&&(this.p2pSuccSentLow=e.p2pSuccSentLow),void 0!==e.p2pFailSent&&null!==e.p2pFailSent&&(this.p2pFailSent=e.p2pFailSent))},hive.snapshots.PartnerTraffic.prototype={},hive.snapshots.PartnerTraffic.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I64?this.p2pSuccReq=e.g_().value:e.Mb(r);break;case 2:r==i.Type.I64?this.p2pFailReq=e.g_().value:e.Mb(r);break;case 3:r==i.Type.I64?this.p2pPartReq=e.g_().value:e.Mb(r);break;case 4:r==i.Type.I64?this.p2pSuccReceived=e.g_().value:e.Mb(r);break;case 5:r==i.Type.I64?this.p2pSuccReceivedLow=e.g_().value:e.Mb(r);break;case 10:r==i.Type.I64?this.p2pFailReceived=e.g_().value:e.Mb(r);break;case 6:r==i.Type.I64?this.p2pSuccResp=e.g_().value:e.Mb(r);break;case 11:r==i.Type.I64?this.p2pFailResp=e.g_().value:e.Mb(r);break;case 7:r==i.Type.I64?this.p2pPartResp=e.g_().value:e.Mb(r);break;case 8:r==i.Type.I64?this.p2pSuccSent=e.g_().value:e.Mb(r);break;case 9:r==i.Type.I64?this.p2pSuccSentLow=e.g_().value:e.Mb(r);break;case 12:r==i.Type.I64?this.p2pFailSent=e.g_().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.PartnerTraffic.prototype.write=function(e){e.Hb("PartnerTraffic"),null!==this.p2pSuccReq&&void 0!==this.p2pSuccReq&&(e.xb("p2pSuccReq",i.Type.I64,1),e.KC(this.p2pSuccReq),e.Gb()),null!==this.p2pFailReq&&void 0!==this.p2pFailReq&&(e.xb("p2pFailReq",i.Type.I64,2),e.KC(this.p2pFailReq),e.Gb()),null!==this.p2pPartReq&&void 0!==this.p2pPartReq&&(e.xb("p2pPartReq",i.Type.I64,3),e.KC(this.p2pPartReq),e.Gb()),null!==this.p2pSuccReceived&&void 0!==this.p2pSuccReceived&&(e.xb("p2pSuccReceived",i.Type.I64,4),e.KC(this.p2pSuccReceived),e.Gb()),null!==this.p2pSuccReceivedLow&&void 0!==this.p2pSuccReceivedLow&&(e.xb("p2pSuccReceivedLow",i.Type.I64,5),e.KC(this.p2pSuccReceivedLow),e.Gb()),null!==this.p2pFailReceived&&void 0!==this.p2pFailReceived&&(e.xb("p2pFailReceived",i.Type.I64,10),e.KC(this.p2pFailReceived),e.Gb()),null!==this.p2pSuccResp&&void 0!==this.p2pSuccResp&&(e.xb("p2pSuccResp",i.Type.I64,6),e.KC(this.p2pSuccResp),e.Gb()),null!==this.p2pFailResp&&void 0!==this.p2pFailResp&&(e.xb("p2pFailResp",i.Type.I64,11),e.KC(this.p2pFailResp),e.Gb()),null!==this.p2pPartResp&&void 0!==this.p2pPartResp&&(e.xb("p2pPartResp",i.Type.I64,7),e.KC(this.p2pPartResp),e.Gb()),null!==this.p2pSuccSent&&void 0!==this.p2pSuccSent&&(e.xb("p2pSuccSent",i.Type.I64,8),e.KC(this.p2pSuccSent),e.Gb()),null!==this.p2pSuccSentLow&&void 0!==this.p2pSuccSentLow&&(e.xb("p2pSuccSentLow",i.Type.I64,9),e.KC(this.p2pSuccSentLow),e.Gb()),null!==this.p2pFailSent&&void 0!==this.p2pFailSent&&(e.xb("p2pFailSent",i.Type.I64,12),e.KC(this.p2pFailSent),e.Gb()),e.jb(),e.Qb()},hive.snapshots.PartnerMetrics=function(e){this.rateReceived=null,this.rateSent=null,this.handshakeDelay=null,e&&(void 0!==e.rateReceived&&null!==e.rateReceived&&(this.rateReceived=e.rateReceived),void 0!==e.rateSent&&null!==e.rateSent&&(this.rateSent=e.rateSent),void 0!==e.handshakeDelay&&null!==e.handshakeDelay&&(this.handshakeDelay=e.handshakeDelay))},hive.snapshots.PartnerMetrics.prototype={},hive.snapshots.PartnerMetrics.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.DOUBLE?this.rateReceived=e.E_().value:e.Mb(r);break;case 2:r==i.Type.DOUBLE?this.rateSent=e.E_().value:e.Mb(r);break;case 3:r==i.Type.I64?this.handshakeDelay=e.g_().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.PartnerMetrics.prototype.write=function(e){e.Hb("PartnerMetrics"),null!==this.rateReceived&&void 0!==this.rateReceived&&(e.xb("rateReceived",i.Type.DOUBLE,1),e.YC(this.rateReceived),e.Gb()),null!==this.rateSent&&void 0!==this.rateSent&&(e.xb("rateSent",i.Type.DOUBLE,2),e.YC(this.rateSent),e.Gb()),null!==this.handshakeDelay&&void 0!==this.handshakeDelay&&(e.xb("handshakeDelay",i.Type.I64,3),e.KC(this.handshakeDelay),e.Gb()),e.jb(),e.Qb()},hive.snapshots.ConnectivityInfo=function(e){this.upBW=null,this.downBW=null,this.externalAs=null,this.internalAs=null,this.publicIp=null,this.privateIp=null,e&&(void 0!==e.upBW&&null!==e.upBW&&(this.upBW=e.upBW),void 0!==e.downBW&&null!==e.downBW&&(this.downBW=e.downBW),void 0!==e.externalAs&&null!==e.externalAs&&(this.externalAs=e.externalAs),void 0!==e.internalAs&&null!==e.internalAs&&(this.internalAs=e.internalAs),void 0!==e.publicIp&&null!==e.publicIp&&(this.publicIp=e.publicIp),void 0!==e.privateIp&&null!==e.privateIp&&(this.privateIp=e.privateIp))},hive.snapshots.ConnectivityInfo.prototype={},hive.snapshots.ConnectivityInfo.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.upBW=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.I32?this.downBW=e.Fb().value:e.Mb(r);break;case 3:r==i.Type.I32?this.externalAs=e.Fb().value:e.Mb(r);break;case 4:r==i.Type.I32?this.internalAs=e.Fb().value:e.Mb(r);break;case 5:r==i.Type.STRING?this.publicIp=e.Lb().value:e.Mb(r);break;case 6:r==i.Type.STRING?this.privateIp=e.Lb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.ConnectivityInfo.prototype.write=function(e){e.Hb("ConnectivityInfo"),null!==this.upBW&&void 0!==this.upBW&&(e.xb("upBW",i.Type.I32,1),e.Vb(this.upBW),e.Gb()),null!==this.downBW&&void 0!==this.downBW&&(e.xb("downBW",i.Type.I32,2),e.Vb(this.downBW),e.Gb()),null!==this.externalAs&&void 0!==this.externalAs&&(e.xb("externalAs",i.Type.I32,3),e.Vb(this.externalAs),e.Gb()),null!==this.internalAs&&void 0!==this.internalAs&&(e.xb("internalAs",i.Type.I32,4),e.Vb(this.internalAs),e.Gb()),null!==this.publicIp&&void 0!==this.publicIp&&(e.xb("publicIp",i.Type.STRING,5),e.qb(this.publicIp),e.Gb()),null!==this.privateIp&&void 0!==this.privateIp&&(e.xb("privateIp",i.Type.STRING,6),e.qb(this.privateIp),e.Gb()),e.jb(),e.Qb()},hive.snapshots.Partner=function(e){this.connInfo=null,this.traffic=null,this.metrics=null,this.inPart=null,this.outPart=null,this.udp=null,e&&(void 0!==e.connInfo&&null!==e.connInfo&&(this.connInfo=e.connInfo),void 0!==e.traffic&&null!==e.traffic&&(this.traffic=e.traffic),void 0!==e.metrics&&null!==e.metrics&&(this.metrics=e.metrics),void 0!==e.inPart&&null!==e.inPart&&(this.inPart=e.inPart),void 0!==e.outPart&&null!==e.outPart&&(this.outPart=e.outPart),void 0!==e.udp&&null!==e.udp&&(this.udp=e.udp))},hive.snapshots.Partner.prototype={},hive.snapshots.Partner.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRUCT?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(e)):e.Mb(r);break;case 2:r==i.Type.STRUCT?(this.traffic=new hive.snapshots.PartnerTraffic,this.traffic.read(e)):e.Mb(r);break;case 3:r==i.Type.STRUCT?(this.metrics=new hive.snapshots.PartnerMetrics,this.metrics.read(e)):e.Mb(r);break;case 4:r==i.Type.BOOL?this.inPart=e.p_().value:e.Mb(r);break;case 5:r==i.Type.BOOL?this.outPart=e.p_().value:e.Mb(r);break;case 6:r==i.Type.BOOL?this.udp=e.p_().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.Partner.prototype.write=function(e){e.Hb("Partner"),null!==this.connInfo&&void 0!==this.connInfo&&(e.xb("connInfo",i.Type.STRUCT,1),this.connInfo.write(e),e.Gb()),null!==this.traffic&&void 0!==this.traffic&&(e.xb("traffic",i.Type.STRUCT,2),this.traffic.write(e),e.Gb()),null!==this.metrics&&void 0!==this.metrics&&(e.xb("metrics",i.Type.STRUCT,3),this.metrics.write(e),e.Gb()),null!==this.inPart&&void 0!==this.inPart&&(e.xb("inPart",i.Type.BOOL,4),e.VC(this.inPart),e.Gb()),null!==this.outPart&&void 0!==this.outPart&&(e.xb("outPart",i.Type.BOOL,5),e.VC(this.outPart),e.Gb()),null!==this.udp&&void 0!==this.udp&&(e.xb("udp",i.Type.BOOL,6),e.VC(this.udp),e.Gb()),e.jb(),e.Qb()},hive.snapshots.StreamInfo=function(e){this.url=null,this.streamType=null,this.streamProtocol=null,e&&(void 0!==e.url&&null!==e.url&&(this.url=e.url),void 0!==e.streamType&&null!==e.streamType&&(this.streamType=e.streamType),void 0!==e.streamProtocol&&null!==e.streamProtocol&&(this.streamProtocol=e.streamProtocol))},hive.snapshots.StreamInfo.prototype={},hive.snapshots.StreamInfo.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.url=e.Lb().value:e.Mb(r);break;case 2:r==i.Type.I32?this.streamType=e.Fb().value:e.Mb(r);break;case 3:r==i.Type.I32?this.streamProtocol=e.Fb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.StreamInfo.prototype.write=function(e){e.Hb("StreamInfo"),null!==this.url&&void 0!==this.url&&(e.xb("url",i.Type.STRING,1),e.qb(this.url),e.Gb()),null!==this.streamType&&void 0!==this.streamType&&(e.xb("streamType",i.Type.I32,2),e.Vb(this.streamType),e.Gb()),null!==this.streamProtocol&&void 0!==this.streamProtocol&&(e.xb("streamProtocol",i.Type.I32,3),e.Vb(this.streamProtocol),e.Gb()),e.jb(),e.Qb()},hive.snapshots.ClientInfo=function(e){this.clientType=null,this.majorVersion=null,this.minorVersion=null,this.patchVersion=null,e&&(void 0!==e.clientType&&null!==e.clientType&&(this.clientType=e.clientType),void 0!==e.majorVersion&&null!==e.majorVersion&&(this.majorVersion=e.majorVersion),void 0!==e.minorVersion&&null!==e.minorVersion&&(this.minorVersion=e.minorVersion),void 0!==e.patchVersion&&null!==e.patchVersion&&(this.patchVersion=e.patchVersion))},hive.snapshots.ClientInfo.prototype={},hive.snapshots.ClientInfo.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.clientType=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.BYTE?this.majorVersion=e.d_().value:e.Mb(r);break;case 3:r==i.Type.BYTE?this.minorVersion=e.d_().value:e.Mb(r);break;case 4:r==i.Type.I16?this.patchVersion=e.f_().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.ClientInfo.prototype.write=function(e){e.Hb("ClientInfo"),null!==this.clientType&&void 0!==this.clientType&&(e.xb("clientType",i.Type.I32,1),e.Vb(this.clientType),e.Gb()),null!==this.majorVersion&&void 0!==this.majorVersion&&(e.xb("majorVersion",i.Type.BYTE,2),e.jC(this.majorVersion),e.Gb()),null!==this.minorVersion&&void 0!==this.minorVersion&&(e.xb("minorVersion",i.Type.BYTE,3),e.jC(this.minorVersion),e.Gb()),null!==this.patchVersion&&void 0!==this.patchVersion&&(e.xb("patchVersion",i.Type.I16,4),e.QC(this.patchVersion),e.Gb()),e.jb(),e.Qb()},hive.snapshots.AgentInfo=function(e){this.firstTierBitrates=null,this.secondTierBitrates=null,e&&(void 0!==e.firstTierBitrates&&null!==e.firstTierBitrates&&(this.firstTierBitrates=e.firstTierBitrates),void 0!==e.secondTierBitrates&&null!==e.secondTierBitrates&&(this.secondTierBitrates=e.secondTierBitrates))},hive.snapshots.AgentInfo.prototype={},hive.snapshots.AgentInfo.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:if(r==i.Type.SET){var s,o=0;this.firstTierBitrates=[];s=e.u_(),s.h_,o=s.size;for(var a=0;a<o;++a){var h=null;h=e.Fb().value,this.firstTierBitrates.push(h)}e.l_()}else e.Mb(r);break;case 2:if(r==i.Type.SET){var c,u=0;this.secondTierBitrates=[];c=e.u_(),c.h_,u=c.size;for(var l=0;l<u;++l){var p=null;p=e.Fb().value,this.secondTierBitrates.push(p)}e.l_()}else e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.AgentInfo.prototype.write=function(e){if(e.Hb("AgentInfo"),null!==this.firstTierBitrates&&void 0!==this.firstTierBitrates){e.xb("firstTierBitrates",i.Type.SET,1),e.qC(i.Type.I32,this.firstTierBitrates.length);for(var t in this.firstTierBitrates)this.firstTierBitrates.hasOwnProperty(t)&&(t=this.firstTierBitrates[t],e.Vb(t));e.GC(),e.Gb()}if(null!==this.secondTierBitrates&&void 0!==this.secondTierBitrates){e.xb("secondTierBitrates",i.Type.SET,2),e.qC(i.Type.I32,this.secondTierBitrates.length);for(var r in this.secondTierBitrates)this.secondTierBitrates.hasOwnProperty(r)&&(r=this.secondTierBitrates[r],e.Vb(r));e.GC(),e.Gb()}e.jb(),e.Qb()},hive.snapshots.TrafficKey=function(e){this.bitrate=null,this.AS=null,this.partnerGuid=null,e&&(void 0!==e.bitrate&&null!==e.bitrate&&(this.bitrate=e.bitrate),void 0!==e.AS&&null!==e.AS&&(this.AS=e.AS),void 0!==e.partnerGuid&&null!==e.partnerGuid&&(this.partnerGuid=e.partnerGuid))},hive.snapshots.TrafficKey.prototype={},hive.snapshots.TrafficKey.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.bitrate=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.I32?this.AS=e.Fb().value:e.Mb(r);break;case 3:r==i.Type.STRING?this.partnerGuid=e.Lb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.TrafficKey.prototype.write=function(e){e.Hb("TrafficKey"),null!==this.bitrate&&void 0!==this.bitrate&&(e.xb("bitrate",i.Type.I32,1),e.Vb(this.bitrate),e.Gb()),null!==this.AS&&void 0!==this.AS&&(e.xb("AS",i.Type.I32,2),e.Vb(this.AS),e.Gb()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(e.xb("partnerGuid",i.Type.STRING,3),e.qb(this.partnerGuid),e.Gb()),e.jb(),e.Qb()},hive.snapshots.PartnerKey=function(e){this.bitrate=null,this.AS=null,this.partnerGuid=null,e&&(void 0!==e.bitrate&&null!==e.bitrate&&(this.bitrate=e.bitrate),void 0!==e.AS&&null!==e.AS&&(this.AS=e.AS),void 0!==e.partnerGuid&&null!==e.partnerGuid&&(this.partnerGuid=e.partnerGuid))},hive.snapshots.PartnerKey.prototype={},hive.snapshots.PartnerKey.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I32?this.bitrate=e.Fb().value:e.Mb(r);break;case 2:r==i.Type.I32?this.AS=e.Fb().value:e.Mb(r);break;case 3:r==i.Type.STRING?this.partnerGuid=e.Lb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.PartnerKey.prototype.write=function(e){e.Hb("PartnerKey"),null!==this.bitrate&&void 0!==this.bitrate&&(e.xb("bitrate",i.Type.I32,1),e.Vb(this.bitrate),e.Gb()),null!==this.AS&&void 0!==this.AS&&(e.xb("AS",i.Type.I32,2),e.Vb(this.AS),e.Gb()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(e.xb("partnerGuid",i.Type.STRING,3),e.qb(this.partnerGuid),e.Gb()),e.jb(),e.Qb()},hive.snapshots.Player=function(e){this.bufferingN=null,this.bufferingMs=null,this.initBufferingN=null,this.initBufferingMs=null,this.seekBufferingN=null,this.seekBufferingMs=null,this.playerBufferMs=null,e&&(void 0!==e.bufferingN&&null!==e.bufferingN&&(this.bufferingN=e.bufferingN),void 0!==e.bufferingMs&&null!==e.bufferingMs&&(this.bufferingMs=e.bufferingMs),void 0!==e.initBufferingN&&null!==e.initBufferingN&&(this.initBufferingN=e.initBufferingN),void 0!==e.initBufferingMs&&null!==e.initBufferingMs&&(this.initBufferingMs=e.initBufferingMs),void 0!==e.seekBufferingN&&null!==e.seekBufferingN&&(this.seekBufferingN=e.seekBufferingN),void 0!==e.seekBufferingMs&&null!==e.seekBufferingMs&&(this.seekBufferingMs=e.seekBufferingMs),void 0!==e.playerBufferMs&&null!==e.playerBufferMs&&(this.playerBufferMs=e.playerBufferMs))},hive.snapshots.Player.prototype={},hive.snapshots.Player.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I16?this.bufferingN=e.f_().value:e.Mb(r);break;case 2:r==i.Type.I32?this.bufferingMs=e.Fb().value:e.Mb(r);break;case 3:r==i.Type.I16?this.initBufferingN=e.f_().value:e.Mb(r);break;case 4:r==i.Type.I32?this.initBufferingMs=e.Fb().value:e.Mb(r);break;case 5:r==i.Type.I16?this.seekBufferingN=e.f_().value:e.Mb(r);break;case 6:r==i.Type.I32?this.seekBufferingMs=e.Fb().value:e.Mb(r);break;case 36:r==i.Type.I32?this.playerBufferMs=e.Fb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.Player.prototype.write=function(e){e.Hb("Player"),null!==this.bufferingN&&void 0!==this.bufferingN&&(e.xb("bufferingN",i.Type.I16,1),e.QC(this.bufferingN),e.Gb()),null!==this.bufferingMs&&void 0!==this.bufferingMs&&(e.xb("bufferingMs",i.Type.I32,2),e.Vb(this.bufferingMs),e.Gb()),null!==this.initBufferingN&&void 0!==this.initBufferingN&&(e.xb("initBufferingN",i.Type.I16,3),e.QC(this.initBufferingN),e.Gb()),null!==this.initBufferingMs&&void 0!==this.initBufferingMs&&(e.xb("initBufferingMs",i.Type.I32,4),e.Vb(this.initBufferingMs),e.Gb()),null!==this.seekBufferingN&&void 0!==this.seekBufferingN&&(e.xb("seekBufferingN",i.Type.I16,5),e.QC(this.seekBufferingN),e.Gb()),null!==this.seekBufferingMs&&void 0!==this.seekBufferingMs&&(e.xb("seekBufferingMs",i.Type.I32,6),e.Vb(this.seekBufferingMs),e.Gb()),null!==this.playerBufferMs&&void 0!==this.playerBufferMs&&(e.xb("playerBufferMs",i.Type.I32,36),e.Vb(this.playerBufferMs),e.Gb()),e.jb(),e.Qb()},hive.snapshots.PK=function(e){this._Q=null,this.count=null,e&&(void 0!==e._Q&&null!==e._Q&&(this._Q=e._Q),void 0!==e.count&&null!==e.count&&(this.count=e.count))},hive.snapshots.PK.prototype={},hive.snapshots.PK.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I16?this._Q=e.f_().value:e.Mb(r);break;case 2:r==i.Type.I32?this.count=e.Fb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.PK.prototype.write=function(e){e.Hb("ResponseInfo"),null!==this._Q&&void 0!==this._Q&&(e.xb("statusCode",i.Type.I16,1),e.QC(this._Q),e.Gb()),null!==this.count&&void 0!==this.count&&(e.xb("count",i.Type.I32,2),e.Vb(this.count),e.Gb()),e.jb(),e.Qb()},hive.snapshots.AK=function(e){this.source=null,e&&void 0!==e.source&&null!==e.source&&(this.source=i.OK(e.source,[hive.snapshots.PK]))},hive.snapshots.AK.prototype={},hive.snapshots.AK.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:if(r==i.Type.LIST){var s,o=0;this.source=[];s=e.a_(),s.h_,o=s.size;for(var a=0;a<o;++a){var h=null;h=new hive.snapshots.PK,h.read(e),this.source.push(h)}e.c_()}else e.Mb(r);break;case 0:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.AK.prototype.write=function(e){if(e.Hb("ServiceResponseInfo"),null!==this.source&&void 0!==this.source){e.xb("source",i.Type.LIST,1),e.HC(i.Type.STRUCT,this.source.length);for(var t in this.source)this.source.hasOwnProperty(t)&&(t=this.source[t],t.write(e));e.xC(),e.Gb()}e.jb(),e.Qb()},hive.snapshots.MetricSnapshot=function(e){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,this.NK=null,this.aB=null,this.DK=null,e&&(void 0!==e.timestamp&&null!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.guid&&null!==e.guid&&(this.guid=e.guid),void 0!==e.eventId&&null!==e.eventId&&(this.eventId=e.eventId),void 0!==e.streamInfo&&null!==e.streamInfo&&(this.streamInfo=e.streamInfo),void 0!==e.metrics&&null!==e.metrics&&(this.metrics=e.metrics),void 0!==e.traffic&&null!==e.traffic&&(this.traffic=e.traffic),void 0!==e.snapshotInfo&&null!==e.snapshotInfo&&(this.snapshotInfo=e.snapshotInfo),void 0!==e.agentInfo&&null!==e.agentInfo&&(this.agentInfo=e.agentInfo),void 0!==e.connInfo&&null!==e.connInfo&&(this.connInfo=e.connInfo),void 0!==e.partners&&null!==e.partners&&(this.partners=e.partners),void 0!==e.player&&null!==e.player&&(this.player=e.player),void 0!==e.client&&null!==e.client&&(this.client=e.client),void 0!==e.sessionId&&null!==e.sessionId&&(this.sessionId=e.sessionId),void 0!==e.NK&&null!==e.NK&&(this.NK=e.NK),void 0!==e.aB&&null!==e.aB&&(this.aB=e.aB),void 0!==e.DK&&null!==e.DK&&(this.DK=e.DK))},hive.snapshots.MetricSnapshot.prototype={},hive.snapshots.MetricSnapshot.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I64?this.timestamp=e.g_().value:e.Mb(r);break;case 2:r==i.Type.STRING?this.guid=e.Lb().value:e.Mb(r);break;case 3:r==i.Type.STRUCT?(this.eventId=new EventId,this.eventId.read(e)):e.Mb(r);break;case 4:r==i.Type.STRUCT?(this.streamInfo=new hive.snapshots.StreamInfo,this.streamInfo.read(e)):e.Mb(r);break;case 5:r==i.Type.STRUCT?(this.metrics=new hive.snapshots.Metrics,this.metrics.read(e)):e.Mb(r);break;case 6:if(r==i.Type.MAP){var s,o=0;this.traffic={};s=e.i_(),s.n_,s.s_,o=s.size;for(var a=0;a<o;++a){a>0&&e.JC.length>e.zb[e.zb.length-1]+1&&e.JC.pop();var h=null,c=null;h=new hive.snapshots.TrafficKey,h.read(e),c=new hive.snapshots.Traffic,c.read(e),this.traffic[h]=c}e.o_()}else e.Mb(r);break;case 7:r==i.Type.STRUCT?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(e)):e.Mb(r);break;case 8:r==i.Type.STRUCT?(this.agentInfo=new hive.snapshots.AgentInfo,this.agentInfo.read(e)):e.Mb(r);break;case 9:r==i.Type.STRUCT?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(e)):e.Mb(r);break;case 10:if(r==i.Type.MAP){var u,l=0;this.partners={};u=e.i_(),u.n_,u.s_,l=u.size;for(var p=0;p<l;++p){p>0&&e.JC.length>e.zb[e.zb.length-1]+1&&e.JC.pop();var d=null,f=null;d=new hive.snapshots.PartnerKey,d.read(e),f=new hive.snapshots.Partner,f.read(e),this.partners[d]=f}e.o_()}else e.Mb(r);break;case 11:r==i.Type.STRUCT?(this.player=new hive.snapshots.Player,this.player.read(e)):e.Mb(r);break;case 12:r==i.Type.STRUCT?(this.client=new hive.snapshots.ClientInfo,this.client.read(e)):e.Mb(r);break;case 13:r==i.Type.STRING?this.sessionId=e.Lb().value:e.Mb(r);break;case 14:r==i.Type.STRUCT?(this.NK=new hive.snapshots.AK,this.NK.read(e)):e.Mb(r);break;case 15:r==i.Type.STRUCT?(this.aB=new TestInfo,this.aB.read(e)):e.Mb(r);break;case 16:r==i.Type.I64?this.DK=e.g_().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.MetricSnapshot.prototype.write=function(e){if(e.Hb("MetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(e.xb("timestamp",i.Type.I64,1),e.KC(this.timestamp),e.Gb()),null!==this.guid&&void 0!==this.guid&&(e.xb("guid",i.Type.STRING,2),e.qb(this.guid),e.Gb()),null!==this.eventId&&void 0!==this.eventId&&(e.xb("eventId",i.Type.STRUCT,3),this.eventId.write(e),e.Gb()),null!==this.streamInfo&&void 0!==this.streamInfo&&(e.xb("streamInfo",i.Type.STRUCT,4),this.streamInfo.write(e),e.Gb()),null!==this.metrics&&void 0!==this.metrics&&(e.xb("metrics",i.Type.STRUCT,5),this.metrics.write(e),e.Gb()),null!==this.traffic&&void 0!==this.traffic){e.xb("traffic",i.Type.MAP,6),e.UC(i.Type.STRUCT,i.Type.STRUCT,i.Eb(this.traffic));for(var t in this.traffic)if(this.traffic.hasOwnProperty(t)){var r=this.traffic[t];r.key.write(e),r.value.write(e)}e.BC(),e.Gb()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(e.xb("snapshotInfo",i.Type.STRUCT,7),this.snapshotInfo.write(e),e.Gb()),null!==this.agentInfo&&void 0!==this.agentInfo&&(e.xb("agentInfo",i.Type.STRUCT,8),this.agentInfo.write(e),e.Gb()),null!==this.connInfo&&void 0!==this.connInfo&&(e.xb("connInfo",i.Type.STRUCT,9),this.connInfo.write(e),e.Gb()),null!==this.partners&&void 0!==this.partners){e.xb("partners",i.Type.MAP,10),e.UC(i.Type.STRUCT,i.Type.STRUCT,i.Eb(this.partners));for(var n in this.partners)if(this.partners.hasOwnProperty(n)){var s=this.partners[n];s.key.write(e),s.value.write(e)}e.BC(),e.Gb()}null!==this.player&&void 0!==this.player&&(e.xb("player",i.Type.STRUCT,11),this.player.write(e),e.Gb()),null!==this.client&&void 0!==this.client&&(e.xb("client",i.Type.STRUCT,12),this.client.write(e),e.Gb()),null!==this.sessionId&&void 0!==this.sessionId&&(e.xb("sessionId",i.Type.STRING,13),e.qb(this.sessionId),e.Gb()),null!==this.NK&&void 0!==this.NK&&(e.xb("responseInfo",i.Type.STRUCT,14),this.NK.write(e),e.Gb()),null!==this.aB&&void 0!==this.aB&&(e.xb("testInfo",i.Type.STRUCT,15),this.aB.write(e),e.Gb()),null!==this.DK&&void 0!==this.DK&&(e.xb("clientId",i.Type.I64,16),e.KC(this.DK),e.Gb()),e.jb(),e.Qb()},hive.snapshots.JsonMetricSnapshot=function(e){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,this.NK=null,this.aB=null,this.DK=null,e&&(void 0!==e.timestamp&&null!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.guid&&null!==e.guid&&(this.guid=e.guid),void 0!==e.eventId&&null!==e.eventId&&(this.eventId=e.eventId),void 0!==e.streamInfo&&null!==e.streamInfo&&(this.streamInfo=e.streamInfo),void 0!==e.metrics&&null!==e.metrics&&(this.metrics=e.metrics),void 0!==e.traffic&&null!==e.traffic&&(this.traffic=e.traffic),void 0!==e.snapshotInfo&&null!==e.snapshotInfo&&(this.snapshotInfo=e.snapshotInfo),void 0!==e.agentInfo&&null!==e.agentInfo&&(this.agentInfo=e.agentInfo),void 0!==e.connInfo&&null!==e.connInfo&&(this.connInfo=e.connInfo),void 0!==e.partners&&null!==e.partners&&(this.partners=e.partners),void 0!==e.player&&null!==e.player&&(this.player=e.player),void 0!==e.client&&null!==e.client&&(this.client=e.client),void 0!==e.sessionId&&null!==e.sessionId&&(this.sessionId=e.sessionId),void 0!==e.NK&&null!==e.NK&&(this.NK=e.NK),void 0!==e.aB&&null!==e.aB&&(this.aB=e.aB),void 0!==e.DK&&null!==e.DK&&(this.DK=e.DK))},hive.snapshots.JsonMetricSnapshot.prototype={},hive.snapshots.JsonMetricSnapshot.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I64?this.timestamp=e.g_().value:e.Mb(r);break;case 2:r==i.Type.STRING?this.guid=e.Lb().value:e.Mb(r);break;case 3:r==i.Type.STRUCT?(this.eventId=new EventId,this.eventId.read(e)):e.Mb(r);break;case 4:r==i.Type.STRUCT?(this.streamInfo=new hive.snapshots.StreamInfo,this.streamInfo.read(e)):e.Mb(r);break;case 5:r==i.Type.STRUCT?(this.metrics=new hive.snapshots.Metrics,this.metrics.read(e)):e.Mb(r);break;case 6:if(r==i.Type.MAP){var s,o=0;this.traffic={};s=e.i_(),s.n_,s.s_,o=s.size;for(var a=0;a<o;++a){a>0&&e.JC.length>e.zb[e.zb.length-1]+1&&e.JC.pop();var h=null,c=null;h=e.Lb().value,c=new hive.snapshots.Traffic,c.read(e),this.traffic[h]=c}e.o_()}else e.Mb(r);break;case 7:r==i.Type.STRUCT?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(e)):e.Mb(r);break;case 8:r==i.Type.STRUCT?(this.agentInfo=new hive.snapshots.AgentInfo,this.agentInfo.read(e)):e.Mb(r);break;case 9:r==i.Type.STRUCT?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(e)):e.Mb(r);break;case 10:if(r==i.Type.MAP){var u,l=0;this.partners={};u=e.i_(),u.n_,u.s_,l=u.size;for(var p=0;p<l;++p){p>0&&e.JC.length>e.zb[e.zb.length-1]+1&&e.JC.pop();var d=null,f=null;d=e.Lb().value,f=new hive.snapshots.Partner,f.read(e),this.partners[d]=f}e.o_()}else e.Mb(r);break;case 11:r==i.Type.STRUCT?(this.player=new hive.snapshots.Player,this.player.read(e)):e.Mb(r);break;case 12:r==i.Type.STRUCT?(this.client=new hive.snapshots.ClientInfo,this.client.read(e)):e.Mb(r);break;case 13:r==i.Type.STRING?this.sessionId=e.Lb().value:e.Mb(r);break;case 14:r==i.Type.STRUCT?(this.NK=new hive.snapshots.AK,this.NK.read(e)):e.Mb(r);break;case 15:r==i.Type.STRUCT?(this.aB=new TestInfo,this.aB.read(e)):e.Mb(r);break;case 16:r==i.Type.I64?this.DK=e.g_().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},hive.snapshots.JsonMetricSnapshot.prototype.write=function(e){if(e.Hb("JsonMetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(e.xb("timestamp",i.Type.I64,1),e.KC(this.timestamp),e.Gb()),null!==this.guid&&void 0!==this.guid&&(e.xb("guid",i.Type.STRING,2),e.qb(this.guid),e.Gb()),null!==this.eventId&&void 0!==this.eventId&&(e.xb("eventId",i.Type.STRUCT,3),this.eventId.write(e),e.Gb()),null!==this.streamInfo&&void 0!==this.streamInfo&&(e.xb("streamInfo",i.Type.STRUCT,4),this.streamInfo.write(e),e.Gb()),null!==this.metrics&&void 0!==this.metrics&&(e.xb("metrics",i.Type.STRUCT,5),this.metrics.write(e),e.Gb()),null!==this.traffic&&void 0!==this.traffic){e.xb("traffic",i.Type.MAP,6),e.UC(i.Type.STRING,i.Type.STRUCT,i.Eb(this.traffic));for(var t in this.traffic)if(this.traffic.hasOwnProperty(t)){var r=this.traffic[t];e.qb(t),r.write(e)}e.BC(),e.Gb()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(e.xb("snapshotInfo",i.Type.STRUCT,7),this.snapshotInfo.write(e),e.Gb()),null!==this.agentInfo&&void 0!==this.agentInfo&&(e.xb("agentInfo",i.Type.STRUCT,8),this.agentInfo.write(e),e.Gb()),null!==this.connInfo&&void 0!==this.connInfo&&(e.xb("connInfo",i.Type.STRUCT,9),this.connInfo.write(e),e.Gb()),null!==this.partners&&void 0!==this.partners){e.xb("partners",i.Type.MAP,10),e.UC(i.Type.STRING,i.Type.STRUCT,i.Eb(this.partners));for(var n in this.partners)if(this.partners.hasOwnProperty(n)){var s=this.partners[n];e.qb(n),s.write(e)}e.BC(),e.Gb()}null!==this.player&&void 0!==this.player&&(e.xb("player",i.Type.STRUCT,11),this.player.write(e),e.Gb()),null!==this.client&&void 0!==this.client&&(e.xb("client",i.Type.STRUCT,12),this.client.write(e),e.Gb()),null!==this.sessionId&&void 0!==this.sessionId&&(e.xb("sessionId",i.Type.STRING,13),e.qb(this.sessionId),e.Gb()),null!==this.NK&&void 0!==this.NK&&(e.xb("responseInfo",i.Type.STRUCT,14),this.NK.write(e),e.Gb()),null!==this.aB&&void 0!==this.aB&&(e.xb("testInfo",i.Type.STRUCT,15),this.aB.write(e),e.Gb()),null!==this.DK&&void 0!==this.DK&&(e.xb("clientId",i.Type.I64,16),e.KC(this.DK),e.Gb()),e.jb(),e.Qb()}},function(e,t,r){var i=r(33);StreamType={1:"LIVE",LIVE:1,2:"VOD",kK:2},StreamProtocol={1:"DASH",DASH:1,2:"HDS",LK:2,3:"HLS",bq:3,4:"SS",MK:4},ClientType={1:"JAVA",FK:1,2:"STATS_ONLY",wB:2,3:"JS_DIRECT",SB:3,4:"JS_PROXY",RB:4},EventId=function(e){this.partnerId=null,this.customerId=null,this.contentId=null,this.tags=null,e&&(void 0!==e.partnerId&&null!==e.partnerId&&(this.partnerId=e.partnerId),void 0!==e.customerId&&null!==e.customerId&&(this.customerId=e.customerId),void 0!==e.contentId&&null!==e.contentId&&(this.contentId=e.contentId),void 0!==e.tags&&null!==e.tags&&(this.tags=e.tags))},EventId.prototype={},EventId.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.partnerId=e.Lb().value:e.Mb(r);break;case 2:r==i.Type.STRING?this.customerId=e.Lb().value:e.Mb(r);break;case 3:r==i.Type.STRING?this.contentId=e.Lb().value:e.Mb(r);break;case 4:if(r==i.Type.LIST){var s,o=0;this.tags=[];s=e.a_(),s.h_,o=s.size;for(var a=0;a<o;++a){var h=null;h=e.Lb().value,this.tags.push(h)}e.c_()}else e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},EventId.prototype.write=function(e){if(e.Hb("EventId"),null!==this.partnerId&&void 0!==this.partnerId&&(e.xb("partnerId",i.Type.STRING,1),e.qb(this.partnerId),e.Gb()),null!==this.customerId&&void 0!==this.customerId&&(e.xb("customerId",i.Type.STRING,2),e.qb(this.customerId),e.Gb()),null!==this.contentId&&void 0!==this.contentId&&(e.xb("contentId",i.Type.STRING,3),e.qb(this.contentId),e.Gb()),null!==this.tags&&void 0!==this.tags){e.xb("tags",i.Type.LIST,4),e.HC(i.Type.STRING,this.tags.length);for(var t in this.tags)this.tags.hasOwnProperty(t)&&(t=this.tags[t],e.qb(t));e.xC(),e.Gb()}e.jb(),e.Qb()},SnapshotInfo=function(e){this.timestamp=null,this.apiServer=null,this.clientIp=null,e&&(void 0!==e.timestamp&&null!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.apiServer&&null!==e.apiServer&&(this.apiServer=e.apiServer),void 0!==e.clientIp&&null!==e.clientIp&&(this.clientIp=e.clientIp))},SnapshotInfo.prototype={},SnapshotInfo.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.I64?this.timestamp=e.g_().value:e.Mb(r);break;case 2:r==i.Type.STRING?this.apiServer=e.Lb().value:e.Mb(r);break;case 3:r==i.Type.STRING?this.clientIp=e.Lb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},SnapshotInfo.prototype.write=function(e){e.Hb("SnapshotInfo"),null!==this.timestamp&&void 0!==this.timestamp&&(e.xb("timestamp",i.Type.I64,1),e.KC(this.timestamp),e.Gb()),null!==this.apiServer&&void 0!==this.apiServer&&(e.xb("apiServer",i.Type.STRING,2),e.qb(this.apiServer),e.Gb()),null!==this.clientIp&&void 0!==this.clientIp&&(e.xb("clientIp",i.Type.STRING,3),e.qb(this.clientIp),e.Gb()),e.jb(),e.Qb()},TestInfo=function(e){this.testId=null,e&&void 0!==e.testId&&null!==e.testId&&(this.testId=e.testId)},TestInfo.prototype={},TestInfo.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.testId=e.Lb().value:e.Mb(r);break;case 0:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},TestInfo.prototype.write=function(e){e.Hb("TestInfo"),null!==this.testId&&void 0!==this.testId&&(e.xb("testId",i.Type.STRING,1),e.qb(this.testId),e.Gb()),e.jb(),e.Qb()},InetAddress=function(e){this.address=null,this.port=null,e&&(void 0!==e.address&&null!==e.address&&(this.address=e.address),void 0!==e.port&&null!==e.port&&(this.port=e.port))},InetAddress.prototype={},InetAddress.prototype.read=function(e){for(e.r_();;){var t=e.kb(),r=(t.fname,t.ftype),n=t.fid;if(r==i.Type.STOP)break;switch(n){case 1:r==i.Type.STRING?this.address=e.v_().value:e.Mb(r);break;case 2:r==i.Type.I32?this.port=e.Fb().value:e.Mb(r);break;default:e.Mb(r)}e.Ub()}e.Bb()},InetAddress.prototype.write=function(e){e.Hb("InetAddress"),null!==this.address&&void 0!==this.address&&(e.xb("address",i.Type.STRING,1),e.WC(this.address),e.Gb()),null!==this.port&&void 0!==this.port&&(e.xb("port",i.Type.I32,2),e.Vb(this.port),e.Gb()),e.jb(),e.Qb()}},function(e,t,r){"use strict";var i=r(4),n=r(23),s=function(){function e(e,t){this.msg=e,this.UK=Date.now()+t,this.BK=i.defer()}return e.prototype.HK=function(){return Date.now()>=this.UK},e}(),o=function(){function e(e,t,r,i,n,s,o){void 0===t&&(t=3e4),void 0===r&&(r=100),void 0===i&&(i=3e4),void 0===n&&(n=15e3),void 0===s&&(s=Date),void 0===o&&(o=!1),this.xK=1,this.qK=-1,this.GK=-1,this.wj={},this.VK=[],this.jK=[],this.QK=!1,this.KK=!0,this.YK=e,this.WK=Array(),this.AE=t,this.OE=r,this.NE=i,this.zK=n,this.JK=s,this.QK=o||/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge./i.test(navigator.userAgent)}return e.prototype.As=function(e){var t=e.service+"_"+e.msgId,r=this.wj[t];null!=r?r(e):n.logger().error(n.loggerId+"Could not find a dispatcher for ",e,t,this.wj)},e.prototype.on=function(e,t,r){this.wj[e+"_"+t]=r},e.prototype.onerror=function(e){this.VK.push(e)},e.prototype.xB=function(e){this.jK.push(e)},e.prototype.XK=function(){var e=this;if(!window.WebSocket)return void this.VK.forEach(function(e){return e("WebSocket not defined")});var t=new WebSocket(this.YK);return t.binaryType="arraybuffer",t.onopen=function(t){e.ZK(),n.logger().debug(n.loggerId+"HiveServicesConnection established to "+e.YK),e.GK=(new e.JK).getTime(),e.$K(),e.jK.forEach(function(t){return t(e)}),e.eY(),e.tY()},t.onclose=function(t){e.close(e.KK),e.connect()},t.onmessage=function(t){e.As(n.Jd.yf(t.data))},t.onerror=function(t){e.close(!0),e.VK.forEach(function(e){return e(t.toString())})},t},e.prototype.isOpen=function(){return null!=this.PR&&this.PR.readyState==this.PR.OPEN},e.prototype.connect=function(e){var t=this;e&&(this.KK=!0),this.KK&&1!=this.isOpen()&&(this.qK>0||(this.GK>-1&&(new this.JK).getTime()-this.GK>this.AE?(this.xK=n.L.Ef,this.GK=-1):this.xK=Math.min(2*this.xK,this.AE),this.qK=window.setTimeout(function(){t.qK=-1,n.logger().debug(n.loggerId+"Connection attempt to "+t.YK+" [t:"+t.xK+" hb:"+t.QK+"]"),t.PR=t.XK(),t.xK=Math.max(t.xK,n.L.Ef)},this.xK)))},e.prototype.ZK=function(){this.qK>-1&&(clearTimeout(this.qK),this.qK=-1)},e.prototype.close=function(e){this.KK=void 0!=e&&e,n.logger().debug(n.loggerId+"Closing connection [reconnect:"+this.KK+"]"),this.ZK(),null!=this.PR&&(this.PR.close(),this.PR=null)},e.prototype.$K=function(){for(;this.WK.length>0;){var e=this.WK.pop();try{e.HK()?e.BK.reject(new Error("Message expired")):(this.eY(),this.PR.send(e.msg.vf()))}catch(t){if(t.code===DOMException.INVALID_STATE_ERR){this.WK.push(e);break}n.logger().error(n.loggerId+"Failed to send the message, dropped: ",t.code,t.name),e.BK.reject(t)}}this.tY()},e.prototype.eY=function(){this.rY&&(clearTimeout(this.rY),this.rY=null)},e.prototype.tY=function(){var e=this;this.QK&&!this.rY&&(this.rY=window.setInterval(function(){e.send(new n.Jd(Services.iY,0,""))},this.zK))},e.prototype.send=function(e,t){if(void 0===t&&(t=this.NE),this.WK.length>=this.OE)throw new Error("HiveServices connection cannot queue more messages");var r=new s(e,t);return this.WK.push(r),this.PR&&this.$K(),r.BK.Ss},e.prototype.nY=function(e){this.QK=e,this.QK&&this.tY()},e.prototype.sY=function(){return null!=this.PR},e}();t.HB=o},function(e,t){Services={1:"REMOTE_EXECUTOR",oY:1,2:"PEER_FORWARDER",aY:2,3:"PEER_INDEX",hY:3,4:"PEER_BROADCAST",cY:4,5:"PEER_FILTER",uY:5,6:"PEER_LOGGING",lY:6,7:"HIVEJS_TRACKER",pY:7,8:"PEER_SYSTEM",dY:8,9:"HIVEJS_SNAPSHOTS",Xd:9,10:"HIVEJS_TICKETS",BB:10,11:"HIVEJS_KEEPALIVE",iY:11,12:"HIVEJS_FORWARDING",fY:12}},function(e,t){e.i=function(){return new Function}},function(e,t,r){"use strict";var i=function(){function e(e,t){this.p2pId=e,this.Wl=t}return e.prototype.tp=function(){return this.p2pId},e.prototype.rp=function(){return this.Wl?this.Wl:this.p2pId},e}();t.pH=i},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(82),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getCidr=function(){return this.MH?this.MH:null},t}(n.FH);t.wH=s},function(e,t,r){"use strict";var i=r(74),n=r(4),s=r(0),o=r(27),a=function(){function e(){this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.logger=s.Framework.resolve(s.Framework.V.R).log()}return e.prototype.uH=function(){var e=n.defer(),t=this.indexedDB.open("PrivateIPDB");return t.onupgradeneeded=function(){t.result.createObjectStore("PrivateIPStore",{keyPath:"id"})},t.onsuccess=function(){var r=t.result;e.resolve(r)},t.onerror=function(t){e.reject(t)},e.Ss},e.prototype.ZH=function(){var e=this;if(this.gY)return this.gY;var t=setTimeout(function(){e.logger.warn("Private list retrieval timeout"),r.reject("Private list timeout")},4e3),r=n.defer();if(o.Gd._h&&this.indexedDB){this.uH().then(function(n){var s=n.transaction("PrivateIPStore","readwrite"),o=s.objectStore("PrivateIPStore"),a=o.get("iplist");a.onsuccess=function(){clearTimeout(t);var e=[];i.sL(a.result)||i.sL(a.result.value)||(e=a.result.value.split("|")),r.resolve(e),n.close()},a.onerror=function(i){clearTimeout(t),e.logger.warn("I got an error on indexed db "+i.message),r.reject("Error on indexedDB "+i.message)}}).fail(function(i){clearTimeout(t),e.logger.warn("DB is not open with error"+i.message),r.reject("DB is not open with error "+i.message)})}else clearTimeout(t),r.reject({message:"DB is not ready or enabled"});return this.gY=r.Ss,this.gY},e.prototype.ix=function(e){var t=this;if(o.Gd._h&&this.indexedDB){var r=e.join("|");this.uH().then(function(i){var n=i.transaction("PrivateIPStore","readwrite");n.objectStore("PrivateIPStore").put({id:"iplist",value:r}),n.oncomplete=function(){t.logger.debug("Storing site matched ips ["+e.join(",")+"]"),i.close()}}).fail(function(e){t.logger.warn("DB is not open with error "+e.message)})}},e}();t.QH=a},function(e,t,r){"use strict";var i=r(17).log,n=r(17).Wu,s={uL:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},pL:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this.EY},set:function(e){var t=this;this.EY&&(this.removeEventListener("track",this.EY),this.removeEventListener("addstream",this.vY)),this.addEventListener("track",this.EY=e),this.addEventListener("addstream",this.vY=function(e){e.stream.addEventListener("addtrack",function(r){var i=new Event("track");i.track=r.track,i.receiver={track:r.track},i.streams=[e.stream],t.dispatchEvent(i)}),e.stream.getTracks().forEach(function(t){var r=new Event("track");r.track=t,r.receiver={track:t},r.streams=[e.stream],this.dispatchEvent(r)}.bind(this))}.bind(this))}})},dL:function(){if("object"==typeof window&&window.RTCPeerConnection&&!("getSenders"in RTCPeerConnection.prototype)&&"createDTMFSender"in RTCPeerConnection.prototype){RTCPeerConnection.prototype.getSenders=function(){return this.yY};var e=RTCPeerConnection.prototype.addStream,t=RTCPeerConnection.prototype.removeStream;RTCPeerConnection.prototype.addStream=function(t){var r=this;r.yY=r.yY||[],e.apply(r,[t]),t.getTracks().forEach(function(e){r.yY.push({track:e,get TY(){return void 0===this.mY&&("audio"===e.kind?this.mY=r.createDTMFSender(e):this.mY=null),this.mY}})})},RTCPeerConnection.prototype.removeStream=function(e){var r=this;r.yY=r.yY||[],t.apply(r,[e]),e.getTracks().forEach(function(e){var t=r.yY.find(function(t){return t.track===e});t&&r.yY.splice(r.yY.indexOf(t),1)})}}},lL:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.IY},set:function(e){var t=this;if(this.IY=e,this.src&&URL.revokeObjectURL(this.src),!e)return void(this.src="");this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})}}))},aL:function(){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){return i("PeerConnection"),e&&e.SY&&(e.RY=e.SY),new webkitRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.wY&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.wY}}));var e=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(t,r,i){var n=this,s=arguments;if(arguments.length>0&&"function"==typeof t)return e.apply(this,arguments);if(0===e.length&&(0===arguments.length||"function"!=typeof arguments[0]))return e.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{bY:"local-candidate",CY:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e._Y(t)}),t[r.id]=r}),t},a=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){var h=function(e){s[1](a(o(e)))};return e.apply(this,[h,arguments[0]])}return new Promise(function(t,r){e.apply(n,[function(e){t(a(o(e)))},r])}).then(r,i)},n.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){var e=arguments,r=this,i=new Promise(function(i,n){t.apply(r,[e[0],i,n])});return e.length<2?i:i.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),n.version<52&&["createOffer","createAnswer"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var r=1===arguments.length?arguments[0]:void 0;return new Promise(function(i,n){t.apply(e,[i,n,r])})}return t.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var t=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};e.i={uL:s.uL,pL:s.pL,dL:s.dL,lL:s.lL,aL:s.aL,cL:r(123)}},function(e,t,r){"use strict";var i=r(17).log,n=r(17).Wu;e.i=function(){var e=function(e){if("object"!=typeof e||e.PY||e.optional)return e;var t={};return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var i="object"==typeof e[r]?e[r]:{AY:e[r]};void 0!==i.OY&&"number"==typeof i.OY&&(i.min=i.max=i.OY);var n=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.AY){t.optional=t.optional||[];var s={};"number"==typeof i.AY?(s[n("min",r)]=i.AY,t.optional.push(s),s={},s[n("max",r)]=i.AY,t.optional.push(s)):(s[n("",r)]=i.AY,t.optional.push(s))}void 0!==i.OY&&"number"!=typeof i.OY?(t.PY=t.PY||{},t.PY[n("",r)]=i.OY):["min","max"].forEach(function(e){void 0!==i[e]&&(t.PY=t.PY||{},t.PY[n(e,r)]=i[e])})}}),e.NY&&(t.optional=(t.optional||[]).concat(e.NY)),t},t=function(t,r){if(t=JSON.parse(JSON.stringify(t)),t&&t.HR&&(t.HR=e(t.HR)),t&&"object"==typeof t.video){var s=t.video.DY;s=s&&("object"==typeof s?s:{AY:s});var o=n.version<59;if(s&&("user"===s.OY||"environment"===s.OY||"user"===s.AY||"environment"===s.AY)&&(!navigator.mediaDevices.kY||!navigator.mediaDevices.kY().DY||o)&&(delete t.video.DY,"environment"===s.OY||"environment"===s.AY))return navigator.mediaDevices.LY().then(function(n){n=n.filter(function(e){return"videoinput"===e.kind});var o=n.find(function(e){return-1!==e.label.toLowerCase().indexOf("back")})||n.length&&n[n.length-1];return o&&(t.video.MY=s.OY?{OY:o.MY}:{AY:o.MY}),t.video=e(t.video),i("chrome: "+JSON.stringify(t)),r(t)});t.video=e(t.video)}return i("chrome: "+JSON.stringify(t)),r(t)},r=function(e){return{name:{FY:"NotAllowedError",UY:"OverconstrainedError"}[e.name]||e.name,message:e.message,BY:e.HY,toString:function(){return this.name+(this.message&&": ")+this.message}}},s=function(e,i,n){t(e,function(e){navigator.webkitGetUserMedia(e,i,function(e){n(r(e))})})};navigator.getUserMedia=s;var o=function(e){return new Promise(function(t,r){navigator.getUserMedia(e,t,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,LY:function(){return new Promise(function(e){var t={HR:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(r){e(r.map(function(e){return{label:e.label,kind:t[e.kind],MY:e.id,xY:""}}))})})},kY:function(){return{MY:!0,qY:!0,DY:!0,GY:!0,height:!0,width:!0}}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return a(e).then(function(t){if(e.HR&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(r(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return o(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){i("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){i("Dummy mediaDevices.removeEventListener called.")})}},function(e,t,r){"use strict";function i(e){var t=e.filter(function(e){return"audio"===e.kind}),r=e.filter(function(e){return"video"===e.kind});for(e=[];t.length||r.length;)t.length&&e.push(t.shift()),r.length&&e.push(r.shift());return e}function n(e){var t=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(e){if(e&&(e.VY||e.url)){var r=e.VY||e.url,i="string"==typeof r;return i&&(r=[r]),r=r.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||t?0===e.indexOf("stun:")&&o.version>=14393:(t=!0,!0)}),delete e.url,e.VY=i?r[0]:r,!!r.length}return!1})}var s=r(125),o=r(17).Wu,a={aL:function(){if(window.jY&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e}),o.version<15025)){var e=Object.getOwnPropertyDescriptor(MediaStreamTrack.prototype,"enabled");Object.defineProperty(MediaStreamTrack.prototype,"enabled",{set:function(t){e.set.call(this,t);var r=new Event("enabled");r.enabled=t,this.dispatchEvent(r)}})}window.RTCPeerConnection=function(e){var t=this,r=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=r[e].bind(r)}),this.onicecandidate=null,this.onaddstream=null,this.QY=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.KY=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.YY=[],this.WY=[],this.getLocalStreams=function(){return t.YY},this.getRemoteStreams=function(){return t.WY},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.zY={JY:"all",iceServers:[]},e&&e.SY)switch(e.SY){case"all":case"relay":this.zY.JY=e.SY}this.XY=e&&"max-bundle"===e.ZY,e&&e.iceServers&&(this.zY.iceServers=n(e.iceServers)),this.$Y=e,this.eW=[],this.tW=[]},window.RTCPeerConnection.prototype.rW=function(){var e=new Event("icegatheringstatechange");this.dispatchEvent(e),null!==this.KY&&this.KY(e)},window.RTCPeerConnection.prototype.iW=function(){var e=this,t=s.nW(e.localDescription.sdp);this.tW.forEach(function(r){if(r.candidate&&0!==Object.keys(r.candidate).length)t[r.candidate.sdpMLineIndex+1]+="a="+r.candidate.candidate+"\r\n";else for(var i=1;i<t.length;i++)-1===t[i].indexOf("\r\na=end-of-candidates\r\n")&&(t[i]+="a=end-of-candidates\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(r),null!==e.onicecandidate&&e.onicecandidate(r),!r.candidate&&"complete"!==e.iceGatheringState){e.eW.every(function(e){return e.sW&&"completed"===e.sW.state})&&"complete"!==e.oW&&(e.iceGatheringState="complete",e.rW())}}),this.tW=[]},window.RTCPeerConnection.prototype.getConfiguration=function(){return this.$Y},window.RTCPeerConnection.prototype.addStream=function(e){if(o.version>=15025)this.YY.push(e);else{var t=e.clone();e.getTracks().forEach(function(e,r){var i=t.getTracks()[r];e.addEventListener("enabled",function(e){i.enabled=e.enabled})}),this.YY.push(t)}this.aW()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.YY.indexOf(e);t>-1&&(this.YY.splice(t,1),this.aW())},window.RTCPeerConnection.prototype.getSenders=function(){return this.eW.filter(function(e){return!!e.hW}).map(function(e){return e.hW})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.eW.filter(function(e){return!!e.cW}).map(function(e){return e.cW})},window.RTCPeerConnection.prototype.uW=function(e,t){var r={lW:[],pW:[],dW:[]},i=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].fW===e||t[r].gW===e)return t[r]},n=function(e,t,r,n){var s=i(e.parameters.EW,r),o=i(t.parameters.EW,n);return s&&o&&s.name.toLowerCase()===o.name.toLowerCase()};return e.lW.forEach(function(i){for(var s=0;s<t.lW.length;s++){var o=t.lW[s];if(i.name.toLowerCase()===o.name.toLowerCase()&&i.vW===o.vW){if("rtx"===i.name.toLowerCase()&&i.parameters&&o.parameters.EW&&!n(i,o,e.lW,t.lW))continue;o=JSON.parse(JSON.stringify(o)),o.yW=Math.min(i.yW,o.yW),r.lW.push(o),o.TW=o.TW.filter(function(e){for(var t=0;t<i.TW.length;t++)if(i.TW[t].type===e.type&&i.TW[t].mW===e.mW)return!0;return!1});break}}}),e.pW.forEach(function(e){for(var i=0;i<t.pW.length;i++){var n=t.pW[i];if(e.uri===n.uri){r.pW.push(n);break}}}),r},window.RTCPeerConnection.prototype.IW=function(e,t){var r=this,i=new RTCIceGatherer(r.zY),n=new RTCIceTransport(i);i.SW=function(o){var a=new Event("icecandidate");a.candidate={sdpMid:e,sdpMLineIndex:t};var h=o.candidate,c=!h||0===Object.keys(h).length;c?void 0===i.state&&(i.state="completed"):(h.RW="RTCP"===n.RW?2:1,a.candidate.candidate=s.wW(h));var u=s.nW(r.localDescription.sdp);u[a.candidate.sdpMLineIndex+1]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",r.localDescription.sdp=u.join("");var l=r.bW?r.bW:r.eW,p=l.every(function(e){return e.sW&&"completed"===e.sW.state});switch(r.iceGatheringState){case"new":c||r.tW.push(a),c&&p&&r.tW.push(new Event("icecandidate"));break;case"gathering":r.iW(),c||(r.dispatchEvent(a),null!==r.onicecandidate&&r.onicecandidate(a)),p&&(r.dispatchEvent(new Event("icecandidate")),null!==r.onicecandidate&&r.onicecandidate(new Event("icecandidate")),r.iceGatheringState="complete",r.rW())}},n._W=function(){r.PW()};var o=new RTCDtlsTransport(n);return o.AW=function(){r.PW()},o.onerror=function(){o.state="failed",r.PW()},{sW:i,OW:n,NW:o}},window.RTCPeerConnection.prototype.DW=function(e,t,r){var i=this.uW(e.kW,e.LW);t&&e.hW&&(i.MW=e.FW,i.UW={BW:s.HW},e.xW.length&&(i.UW.qW=e.xW[0].qW),e.hW.send(i)),r&&e.cW&&("video"===e.kind&&e.xW&&o.version<15019&&e.xW.forEach(function(e){delete e.GW}),i.MW=e.xW,i.UW={BW:e.BW},e.FW.length&&(i.UW.qW=e.FW[0].qW),e.cW.VW(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,r,i=this;if("offer"===e.type)this.bW&&(t=s.nW(e.sdp),r=t.shift(),t.forEach(function(e,t){var r=s.jW(e);i.bW[t].kW=r}),this.eW=this.bW,delete this.bW);else if("answer"===e.type){t=s.nW(i.remoteDescription.sdp),r=t.shift();var n=s.QW(r,"a=ice-lite").length>0;t.forEach(function(e,t){var o=i.eW[t],a=o.sW,h=o.OW,c=o.NW,u=o.kW,l=o.LW;if("0"!==e.split("\n",1)[0].split(" ",2)[1]&&!o.KW){var p=s.YW(e,r),d=s.WW(e,r);n&&(d.zW="server"),i.XY&&0!==t||(h.start(a,p,n?"controlling":"controlled"),c.start(d));var f=i.uW(u,l);i.DW(o,f.lW.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this.JW("have-local-offer");break;case"answer":this.JW("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var o=arguments.length>1&&"function"==typeof arguments[1];if(o){var a=arguments[1];window.setTimeout(function(){a(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering",i.rW()),i.iW()},0)}var h=Promise.resolve();return h.then(function(){o||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering",i.rW()),window.setTimeout(i.iW.bind(i),500))}),h},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,r=new MediaStream,i=[],n=s.nW(e.sdp),a=n.shift(),h=s.QW(a,"a=ice-lite").length>0;switch(this.XY=s.QW(a,"a=group:BUNDLE ").length>0,n.forEach(function(n,c){var u=s.XW(n),l=u[0].substr(2).split(" "),p=l[0],d="0"===l[1],f=s.ZW(n,a),g=s.QW(n,"a=mid:");if(g=g.length?g[0].substr(6):s.$W(),"application"===p&&"DTLS/SCTP"===l[2])return void(t.eW[c]={ez:g,KW:!0});var E,v,y,T,m,I,S,R,w,b,C,_,P=s.jW(n);d||(C=s.YW(n,a),_=s.WW(n,a),_.zW="client"),R=s.tz(n);var A,O=s.QW(n,"a=ssrc:").map(function(e){return s.rz(e)}).filter(function(e){return"cname"===e.iz})[0];O&&(A=O.value);var N=s.QW(n,"a=end-of-candidates",a).length>0,D=s.QW(n,"a=candidate:").map(function(e){return s.ex(e)}).filter(function(e){return"1"===e.RW});if("offer"!==e.type||d)"answer"!==e.type||d||(E=t.eW[c],v=E.sW,y=E.OW,T=E.NW,m=E.hW,I=E.cW,S=E.FW,w=E.kW,t.eW[c].xW=R,t.eW[c].LW=P,t.eW[c].BW=A,(h||N)&&D.length&&y.nz(D),t.XY&&0!==c||(y.start(v,C,"controlling"),T.start(_)),t.DW(E,"sendrecv"===f||"recvonly"===f,"sendrecv"===f||"sendonly"===f),!I||"sendrecv"!==f&&"sendonly"!==f?delete E.cW:(b=I.track,i.push([b,I]),r.addTrack(b)));else{var k=t.XY&&c>0?{sW:t.eW[0].sW,OW:t.eW[0].OW,NW:t.eW[0].NW}:t.IW(g,c);if(!N||t.XY&&0!==c||k.OW.nz(D),w=RTCRtpReceiver.sz(p),o.version<15019&&(w.lW=w.lW.filter(function(e){return"rtx"!==e.name})),S=[{qW:1001*(2*c+2)}],"sendrecv"!==f&&"sendonly"!==f||(I=new RTCRtpReceiver(k.NW,p),b=I.track,i.push([b,I]),r.addTrack(b)),t.YY.length>0&&t.YY[0].getTracks().length>=c){var L;"audio"===p?L=t.YY[0].getAudioTracks()[0]:"video"===p&&(L=t.YY[0].getVideoTracks()[0]),L&&(o.version>=15019&&"video"===p&&(S[0].GW={qW:1001*(2*c+2)+1}),m=new RTCRtpSender(L,k.NW))}t.eW[c]={sW:k.sW,OW:k.OW,NW:k.NW,kW:w,LW:P,hW:m,cW:I,kind:p,ez:g,BW:A,FW:S,xW:R},t.DW(t.eW[c],!1,"sendrecv"===f||"sendonly"===f)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this.JW("have-remote-offer");break;case"answer":this.JW("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return r.getTracks().length&&(t.WY.push(r),window.setTimeout(function(){var e=new Event("addstream");e.stream=r,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(e){var i=e[0],n=e[1],s=new Event("track");s.track=i,s.receiver=n,s.streams=[r],t.dispatchEvent(s),null!==t.QY&&window.setTimeout(function(){t.QY(s)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.eW.forEach(function(e){e.OW&&e.OW.stop(),e.NW&&e.NW.stop(),e.hW&&e.hW.stop(),e.cW&&e.cW.stop()}),this.JW("closed")},window.RTCPeerConnection.prototype.JW=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype.aW=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype.PW=function(){var e,t=this,r={oz:0,closed:0,az:0,hz:0,connected:0,cz:0,ll:0};if(this.eW.forEach(function(e){r[e.OW.state]++,r[e.NW.state]++}),r.connected+=r.cz,e="new",r.ll>0?e="failed":r.az>0||r.hz>0?e="connecting":r.uz>0?e="disconnected":r.oz>0?e="new":(r.connected>0||r.cz>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this.dispatchEvent(i),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(i)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this.bW)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var r=[],n=0,a=0;if(this.YY.length&&(n=this.YY[0].getAudioTracks().length,a=this.YY[0].getVideoTracks().length),t){if(t.PY||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.lz&&(n=t.lz),void 0!==t.pz&&(a=t.pz)}for(this.YY.length&&this.YY[0].getTracks().forEach(function(e){r.push({kind:e.kind,track:e,dz:"audio"===e.kind?n>0:a>0}),"audio"===e.kind?n--:"video"===e.kind&&a--});n>0||a>0;)n>0&&(r.push({kind:"audio",dz:!0}),n--),a>0&&(r.push({kind:"video",dz:!0}),a--);r=i(r);var h=s.fz(),c=[];r.forEach(function(t,r){var i=t.track,n=t.kind,a=s.$W(),h=e.XY&&r>0?{sW:c[0].sW,OW:c[0].OW,NW:c[0].NW}:e.IW(a,r),u=RTCRtpSender.sz(n);o.version<15019&&(u.lW=u.lW.filter(function(e){return"rtx"!==e.name})),u.lW.forEach(function(e){"H264"===e.name&&void 0===e.parameters["gz"]&&(e.parameters["gz"]="1")});var l,p,d=[{qW:1001*(2*r+1)}];i&&(o.version>=15019&&"video"===n&&(d[0].GW={qW:1001*(2*r+1)+1}),l=new RTCRtpSender(i,h.NW)),t.dz&&(p=new RTCRtpReceiver(h.NW,n)),c[r]={sW:h.sW,OW:h.OW,NW:h.NW,kW:u,LW:null,hW:l,cW:p,kind:n,ez:a,FW:d,xW:null}}),this.XY&&(h+="a=group:BUNDLE "+c.map(function(e){return e.ez}).join(" ")+"\r\n"),r.forEach(function(t,r){var i=c[r];h+=s.Ez(i,i.kW,"offer",e.YY[0])}),this.bW=c;var u=new RTCSessionDescription({type:"offer",sdp:h});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,u),Promise.resolve(u)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=s.fz();this.XY&&(t+="a=group:BUNDLE "+this.eW.map(function(e){return e.ez}).join(" ")+"\r\n"),this.eW.forEach(function(r){if(r.KW)return void(t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+r.ez+"\r\n");var i=e.uW(r.kW,r.LW);t+=s.Ez(r,i,"answer",e.YY[0])});var r=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,r),Promise.resolve(r)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(e){var t=e.sdpMLineIndex;if(e.sdpMid)for(var r=0;r<this.eW.length;r++)if(this.eW[r].ez===e.sdpMid){t=r;break}var i=this.eW[t];if(i){var n=Object.keys(e.candidate).length>0?s.ex(e.candidate):{};if("tcp"===n.protocol&&(0===n.port||9===n.port))return Promise.resolve();if("1"!==n.RW)return Promise.resolve();i.OW.vz(n);var o=s.nW(this.remoteDescription.sdp);o[t+1]+=(n.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=o.join("")}}else for(var a=0;a<this.eW.length;a++)if(this.eW[a].OW.vz({}),this.XY)return Promise.resolve();return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.eW.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(r){t[r]&&e.push(t[r].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1],r=function(e){return{yz:"inbound-rtp",Tz:"outbound-rtp",mz:"candidate-pair",bY:"local-candidate",CY:"remote-candidate"}[e.type]||e.type};return new Promise(function(i){var n=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){e[t].type=r(e[t]),n.set(t,e[t])})}),t&&window.setTimeout(t,0,n),i(n)})})}}};e.i={aL:a.aL,cL:r(126)}},function(e,t,r){"use strict";var i={};i.$W=function(){return Math.random().toString(36).substr(2,10)},i.HW=i.$W(),i.XW=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},i.nW=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},i.QW=function(e,t){return i.XW(e).filter(function(e){return 0===e.indexOf(t)})},i.ex=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var r={Iz:t[0],RW:t[1],protocol:t[2].toLowerCase(),Sz:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":r.Rz=t[i+1];break;case"rport":r.wz=parseInt(t[i+1],10);break;case"tcptype":r.bz=t[i+1];break;default:r[t[i]]=t[i+1]}return r},i.wW=function(e){var t=[];t.push(e.Iz),t.push(e.RW),t.push(e.protocol.toUpperCase()),t.push(e.Sz),t.push(e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.Rz&&e.wz&&(t.push("raddr"),t.push(e.Rz),t.push("rport"),t.push(e.wz)),e.bz&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.bz)),"candidate:"+t.join(" ")},i.Cz=function(e){return e.substr(14).split(" ")},i._z=function(e){var t=e.substr(9).split(" "),r={fW:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.vW=parseInt(t[1],10),r.yW=3===t.length?parseInt(t[2],10):1,r},i.Pz=function(e){var t=e.fW;return void 0!==e.gW&&(t=e.gW),"a=rtpmap:"+t+" "+e.name+"/"+e.vW+(1!==e.yW?"/"+e.yW:"")+"\r\n"},i.Az=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},i.Oz=function(e){return"a=extmap:"+(e.id||e.Nz)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},i.Dz=function(e){for(var t,r={},i=e.substr(e.indexOf(" ")+1).split(";"),n=0;n<i.length;n++)t=i[n].trim().split("="),r[t[0].trim()]=t[1];return r},i.kz=function(e){var t="",r=e.fW;if(void 0!==e.gW&&(r=e.gW),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach(function(t){i.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+r+" "+i.join(";")+"\r\n"}return t},i.Lz=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),mW:t.join(" ")}},i.Mz=function(e){var t="",r=e.fW;return void 0!==e.gW&&(r=e.gW),e.TW&&e.TW.length&&e.TW.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.mW&&e.mW.length?" "+e.mW:"")+"\r\n"}),t},i.rz=function(e){var t=e.indexOf(" "),r={qW:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(r.iz=e.substr(t+1,i-t-1),r.value=e.substr(i+1)):r.iz=e.substr(t+1),r},i.Fz=function(e){var t=i.QW(e,"a=mid:")[0];if(t)return t.substr(6)},i.Uz=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},i.WW=function(e,t){return{zW:"auto",Bz:i.QW(e+t,"a=fingerprint:").map(i.Uz)}},i.Hz=function(e,t){var r="a=setup:"+t+"\r\n";return e.Bz.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),r},i.YW=function(e,t){var r=i.XW(e);return r=r.concat(i.XW(t)),{xz:r.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},i.qz=function(e){return"a=ice-ufrag:"+e.xz+"\r\na=ice-pwd:"+e.password+"\r\n"},i.jW=function(e){for(var t={lW:[],pW:[],dW:[],UW:[]},r=i.XW(e),n=r[0].split(" "),s=3;s<n.length;s++){var o=n[s],a=i.QW(e,"a=rtpmap:"+o+" ")[0];if(a){var h=i._z(a),c=i.QW(e,"a=fmtp:"+o+" ");switch(h.parameters=c.length?i.Dz(c[0]):{},h.TW=i.QW(e,"a=rtcp-fb:"+o+" ").map(i.Lz),t.lW.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":t.dW.push(h.name.toUpperCase())}}}return i.QW(e,"a=extmap:").forEach(function(e){t.pW.push(i.Az(e))}),t},i.Gz=function(e,t){var r="";r+="m="+e+" ",r+=t.lW.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.lW.map(function(e){return void 0!==e.gW?e.gW:e.fW}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.lW.forEach(function(e){r+=i.Pz(e),r+=i.kz(e),r+=i.Mz(e)});var n=0;return t.lW.forEach(function(e){e.Vz>n&&(n=e.Vz)}),n>0&&(r+="a=maxptime:"+n+"\r\n"),r+="a=rtcp-mux\r\n",t.pW.forEach(function(e){r+=i.Oz(e)}),r},i.tz=function(e){var t,r=[],n=i.jW(e),s=-1!==n.dW.indexOf("RED"),o=-1!==n.dW.indexOf("ULPFEC"),a=i.QW(e,"a=ssrc:").map(function(e){return i.rz(e)}).filter(function(e){return"cname"===e.iz}),h=a.length>0&&a[0].qW,c=i.QW(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});c.length>0&&c[0].length>1&&c[0][0]===h&&(t=c[0][1]),n.lW.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.EW){var i={qW:h,jz:parseInt(e.parameters.EW,10),GW:{qW:t}};r.push(i),s&&(i=JSON.parse(JSON.stringify(i)),i.Qz={qW:t,Kz:o?"red+ulpfec":"red"},r.push(i))}}),0===r.length&&h&&r.push({qW:h});var u=i.QW(e,"b=");return u.length&&(0===u[0].indexOf("b=TIAS:")?u=parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")&&(u=parseInt(u[0].substr(5),10)),r.forEach(function(e){e.Yz=u})),r},i.Wz=function(e){var t={},r=i.QW(e,"a=ssrc:").map(function(e){return i.rz(e)}).filter(function(e){return"cname"===e.iz})[0];r&&(t.BW=r.value,t.qW=r.qW);var n=i.QW(e,"a=rtcp-rsize");t.zz=n.length>0,t.Jz=0===n.length;var s=i.QW(e,"a=rtcp-mux");return t.Xz=s.length>0,t},i.Zz=function(e){var t,r=i.QW(e,"a=msid:");if(1===r.length)return t=r[0].substr(7).split(" "),{stream:t[0],track:t[1]};var n=i.QW(e,"a=ssrc:").map(function(e){return i.rz(e)}).filter(function(e){return"msid"===e.iz});return n.length>0?(t=n[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},i.fz=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.Ez=function(e,t,r,n){var s=i.Gz(e.kind,t);if(s+=i.qz(e.sW.$z()),s+=i.Hz(e.NW.$z(),"offer"===r?"actpass":"active"),s+="a=mid:"+e.ez+"\r\n",e.direction?s+="a="+e.direction+"\r\n":e.hW&&e.cW?s+="a=sendrecv\r\n":e.hW?s+="a=sendonly\r\n":e.cW?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.hW){var o="msid:"+n.id+" "+e.hW.track.id+"\r\n";s+="a="+o,s+="a=ssrc:"+e.FW[0].qW+" "+o,e.FW[0].GW&&(s+="a=ssrc:"+e.FW[0].GW.qW+" "+o,s+="a=ssrc-group:FID "+e.FW[0].qW+" "+e.FW[0].GW.qW+"\r\n")}return s+="a=ssrc:"+e.FW[0].qW+" cname:"+i.HW+"\r\n",e.hW&&e.FW[0].GW&&(s+="a=ssrc:"+e.FW[0].GW.qW+" cname:"+i.HW+"\r\n"),s},i.ZW=function(e,t){for(var r=i.XW(e),n=0;n<r.length;n++)switch(r[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[n].substr(2)}return t?i.ZW(t):"sendrecv"},i.eJ=function(e){return i.XW(e)[0].split(" ")[0].substr(2)},i.zs=function(e){return"0"===e.split(" ",2)[1]},e.i=i},function(e,t,r){"use strict";e.i=function(){var e=function(e){return{name:{FY:"NotAllowedError"}[e.name]||e.name,message:e.message,BY:e.BY,toString:function(){return this.name}}},t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(r){return t(r).catch(function(t){return Promise.reject(e(t))})}}},function(e,t,r){"use strict";var i=r(17).Wu,n={pL:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this.EY},set:function(e){this.EY&&(this.removeEventListener("track",this.EY),this.removeEventListener("addstream",this.vY)),this.addEventListener("track",this.EY=e),this.addEventListener("addstream",this.vY=function(e){e.stream.getTracks().forEach(function(t){var r=new Event("track");r.track=t,r.receiver={track:t},r.streams=[e.stream],this.dispatchEvent(r)}.bind(this))}.bind(this))}})},lL:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},aL:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(i.version<38&&e&&e.iceServers){for(var r=[],n=0;n<e.iceServers.length;n++){var s=e.iceServers[n];if(s.hasOwnProperty("urls"))for(var o=0;o<s.VY.length;o++){var a={url:s.VY[o]};0===s.VY[o].indexOf("turn")&&(a.username=s.username,a.tJ=s.tJ),r.push(a)}else r.push(e.iceServers[n])}e.iceServers=r}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.wY&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.wY}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var t=function(e){var t=new Map;return Object.keys(e).forEach(function(r){t.set(r,e[r]),t[r]=e[r]}),t},r={yz:"inbound-rtp",Tz:"outbound-rtp",mz:"candidate-pair",bY:"local-candidate",CY:"remote-candidate"},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,s,o){return n.apply(this,[e||null]).then(function(e){if(i.version<48&&(e=t(e)),i.version<53&&!s)try{e.forEach(function(e){e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,i){e.set(i,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(s,o)}}}};e.i={pL:n.pL,lL:n.lL,aL:n.aL,cL:r(128)}},function(e,t,r){"use strict";var i=r(17).log,n=r(17).Wu;e.i=function(){var e=function(e){return{name:{rJ:"NotAllowedError",FY:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,BY:e.BY,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,r,s){var o=function(e){if("object"!=typeof e||e.iJ)return e;var t=[];return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var i=e[r]="object"==typeof e[r]?e[r]:{AY:e[r]};if(void 0===i.min&&void 0===i.max&&void 0===i.OY||t.push(r),void 0!==i.OY&&("number"==typeof i.OY?i.min=i.max=i.OY:e[r]=i.OY,delete i.OY),void 0!==i.AY){e.NY=e.NY||[];var n={};"number"==typeof i.AY?n[r]={min:i.AY,max:i.AY}:n[r]=i.AY,e.NY.push(n),delete i.AY,Object.keys(i).length||delete e[r]}}}),t.length&&(e.iJ=t),e};return t=JSON.parse(JSON.stringify(t)),n.version<38&&(i("spec: "+JSON.stringify(t)),t.HR&&(t.HR=o(t.HR)),t.video&&(t.video=o(t.video)),i("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,r,function(t){s(e(t))})},r=function(e){return new Promise(function(r,i){t(e,r,i)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:r,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.LY=navigator.mediaDevices.LY||function(){return new Promise(function(e){e([{kind:"audioinput",MY:"default",label:"",xY:""},{kind:"videoinput",MY:"default",label:"",xY:""}])})},n.version<41){var s=navigator.mediaDevices.LY.bind(navigator.mediaDevices);navigator.mediaDevices.LY=function(){return s().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(n.version<49){var o=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return o(t).then(function(e){if(t.HR&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return e},function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,r,i){if(n.version<44)return t(e,r,i);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(e).then(r,i)}}},function(e,t,r){"use strict";var i={cL:function(){navigator.getUserMedia||(navigator.webkitGetUserMedia?navigator.getUserMedia=navigator.webkitGetUserMedia.bind(navigator):navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(navigator.getUserMedia=function(e,t,r){navigator.mediaDevices.getUserMedia(e).then(t,r)}.bind(navigator)))}};e.i={cL:i.cL}},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(20);!function(e){!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n.HiveComm.Options.Tp);e.fL=t}(e.Options||(e.Options={}))}(t.HiveComm||(t.HiveComm={}))},function(e,t,r){"use strict";var i=function(){function e(e,t,r){this.isLive=e,this.protocol=t,this.IM=r}return e.prototype.uB=function(){var e=new hive.snapshots.StreamInfo;return e.streamType=this.isLive?StreamType.LIVE:StreamType.kK,e.streamProtocol=this.protocol,e.url=this.IM,e},e}();t.AL=i},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(4),s=r(55),o=r(44).Pp,a=r(0),h=r(133),c=r(73),u=r(19),l=r(56),p=r(198),d=r(26),f=r(18),g=r(21),E=r(54),v=r(1),y=r(45),T=p.HiveComm.Options,m=d.HiveComm.HiveTechError,I=d.HiveComm.vE,S=function(e){function t(r,i,n){var s=e.call(this,r,i)||this;return s.options_=new T.nJ,void 0!=i[t.EL]&&g.Sp(i[t.EL],s.options_),s.UQ=n,s}return i(t,e),t.prototype.getName=function(){return t.EL},t.prototype.getVersion=function(){return this.gL.getPluginVersion()},t.prototype.vL=function(){return!0},t.prototype.yL=function(){return c.lb.Api?this.sJ()&&this.XH()?n.resolve(!0):n.reject(new m(I.pE,"WebRTC DataChannels not supported by browser")):n.reject(new m(I.pE,"Not included in the page"))},t.prototype.initSession=function(e,t){var r=this;return this.yL().then(function(){var i=t.ticket;r._L();var n=i.NN();0===n.indexOf("//")&&(n=location.protocol+n);var s=r.TL(e,i,n,t);return E.zu.registerTech(r,s.id),E.zu.registerComm(r.gL,s.id),f.HiveRequestFactory.registerTech(s.id,r.getName()),window&&window.activateXHRInterceptor&&window.activateXHRInterceptor(r.gL.loggerLevel()>y.TN.pN.info),s})},t.prototype.isActive=function(e,t){var r=t.manifest.toLowerCase(),i=e.toLowerCase(),n=r.indexOf(".ism/manifest");if(n>-1){var s=r.substring(0,n);if(i.indexOf(s)>-1)return i.indexOf(".ism/manifest(format=mpd-time-csf)")>-1?this.oJ?(t.ticket.SourceURL=e,!0):this.aJ(t,"The player does not use HiveRequest, downgrading to StatsJS"):this.aJ(t,"Protocol not supported by HiveJS tech, downgrading to StatsJS")}else if(i===r)return!!this.oJ||this.aJ(t,"The player does not use HiveRequest, downgrading to StatsJS");return!1},t.prototype.ol=function(t,r){window&&window.deactivateXHRInterceptor&&window.deactivateXHRInterceptor(),e.prototype.ol.call(this,t,r);var i=c.lb.Api();r?(f.HiveRequestFactory.clearSession(t.id),i&&(i.nl(t.id,u.Ml.STOP),i.hJ())):i&&i.nl(t.id,u.Ml.IDLE)},t.prototype.aJ=function(e,t){return e.tech=this.UQ,f.HiveRequestFactory.registerTech(e.id,l.StatsJS.EL),this.oJ&&this.oJ.resolve(),this.oJ=void 0,this.gL.logger().warn("[HiveJS] "+t),this.onError(new m(I.fE,t)),window&&window.deactivateXHRInterceptor&&window.deactivateXHRInterceptor(),!0},t.prototype.oL=function(e){this.oJ=e},t.prototype.onActiveSession=function(e){var t=this;a.Framework.X().apply(new h.cJ(!0));var r=c.lb.Api();if(this.uJ()&&r.lJ(!0),r.start(e.rl,!1).then(function(i){if(t._L(),t.PL=e.rl,t.PL.Ql(t.options_.renderStatsCallback),t.PL.Vl(c.lb.sp(),c.lb.getVersion()),t.PL.Bl.init(t.PL.Ul,e.ticket.sessionId),t.gL.options().testId&&t.PL.Ul.NL(t.gL.options().testId),e.authenticationToken){var n=r.pJ(e.ticket.sessionId);n&&n.fJ.dJ.UM(e.authenticationToken)}t.oJ&&r.request(t.oJ,e.rl.ticket.sessionId),t.PL.Hl.Xu(e.ticket.sessionId,t.gL.getPlayerSource(),200);var s=t.gL.flushTechEvents();s&&s.length>0&&t.PL.Hl.Cd(s),t.gL.updatePlayerInfo(t.PL)}),void 0!=this.options().onActiveSession)try{this.options().onActiveSession(e.toHiveSession())}catch(e){v.ErrorMonitor.ve().logError("exception in user-defined onActiveSession callback","[HiveJS]",e)}},t.prototype.nl=function(e,t){},t.prototype.TL=function(e,t,r,i){var n=new f.cl(e,t,r,i);return n.ML=!0,n.id=n.ticket.sessionId,n},t.prototype.bL=function(){},t.prototype.uJ=function(){var e=new o;return e.Ad(navigator.userAgent),"Android"==e.Od().name},t.prototype.sJ=function(){return"safari"!=s.Wu.Qu},t.prototype.XH=function(){try{return null!=s.Vu&&null!=s.hL&&"function"==typeof new RTCPeerConnection(null,null).createDataChannel}catch(e){return!1}},t}(l.StatsJS);S.EL="HiveJS",t.HiveJS=S},function(e,t,r){"use strict";var i=r(40),n=r(0),s=r(45),o=r(8),a=r(19),h=r(76),c=r(77),u=r(79),l=r(75),p=r(22),d=r(15),f=r(134),g=r(137),E=r(138),v=r(88),y=r(155),T=r(156),m=r(157),I=r(158),S=r(159),R=r(95),w=r(172),b=r(173),C=r(174),_=r(49),P=r(25),A=r(175),O=r(179),N=r(180),D=r(181),k=r(182),L=r(184),M=r(185),F=r(186),U=r(187),B=r(80),H=r(188),x=r(189),q=r(191),G=r(6),V=r(192),j=G.he.vh,Q=G.he.yh,K=G.he.Th,Y=G.he.Ih;if(Q)var W=r(193).gJ,z=r(195).EJ;if(K)var J=r(92).WG;if(j)var X=r(196).vJ;if(Y)var Z=r(81).CH;else var $=r(83).nx;var ee=function(){function e(e){this.yJ=!1,e&&(this.yJ=e)}return e.prototype.apply=function(e){this.yJ?Y&&e.bind(new i.ZA(o.pc.sc,Z,i.$A.sO)):(e.bind(new i.ZA(o.pc.hc,a.lp,i.$A.sO)),e.bind(new i.ZA(o.pc.G,h.qB,i.$A.sO)),e.bind(new i.ZA(o.pc.nc,c.WB,i.$A.sO)),e.bind(new i.ZA(o.pc.M,u.vH,i.$A.sO)),e.bind(new i.ZA(n.Framework.V.R,s.TN.yN,i.$A.sO)),e.bind(new i.ZA(o.pc.ic,l.Stats.ql,i.$A.pO)),e.bind(new i.ZA(o.pc.uc,p.Gl.Bd,i.$A.pO)),e.bind(new i.ZA(o.pc.lc,p.Gl.ql,i.$A.pO)),Y?e.bind(new i.ZA(o.pc.sc,Z,i.$A.sO)):e.bind(new i.ZA(o.pc.sc,$,i.$A.sO))),e.bind(new i.ZA(d.qu.lu,V.TJ,i.$A.pO)),e.bind(new i.ZA(o.pc.oc,B.IH,i.$A.sO)),e.bind(new i.ZA(d.qu.Fu,F.mJ,i.$A.sO)),e.bind(new i.ZA(d.qu._u,f.sh,i.$A.sO)),e.bind(new i.ZA(d.qu.Ru,g.IJ,i.$A.pO)),e.bind(new i.ZA(d.qu.Pu,E.SJ,i.$A.pO)),e.bind(new i.ZA(d.qu.yu,y.Ra,i.$A.pO)),e.bind(new i.ZA(d.qu.Tu,v.Yq,i.$A.pO)),j&&e.bind(new i.ZA(d.qu.mu,X,i.$A.pO)),e.bind(new i.ZA(d.qu.bu,T.RJ,i.$A.pO)),"undefined"!=typeof HiveOriginalXMLHttpRequest?e.bind(new i.ZA(n.Framework.V.H,HiveOriginalXMLHttpRequest)):e.bind(new i.ZA(n.Framework.V.H,XMLHttpRequest)),e.bind(new i.ZA(d.qu.Mu,M.wJ,i.$A.sO)),e.bind(new i.ZA(d.qu.Du,m.bJ,i.$A.pO)),e.bind(new i.ZA(n.Framework.V.F,A.CJ,i.$A.sO)),e.bind(new i.ZA(d.qu.q,O._J,i.$A.sO)),e.bind(new i.ZA(d.qu.Su,U.PJ,i.$A.pO)),e.bind(new i.ZA(d.qu.Iu,I.AJ,i.$A.pO)),e.bind(new i.ZA(d.qu.pu,S.Qa,i.$A.pO)),e.bind(new i.ZA(d.qu.du,R.iQ,i.$A.pO)),e.bind(new i.ZA(d.qu.fu,x.OJ,i.$A.pO)),e.bind(new i.ZA(d.qu.gu,x.NJ,i.$A.pO)),e.bind(new i.ZA(d.qu.Eu,q.DJ,i.$A.pO)),e.bind(new i.ZA(d.qu.vu,q.kJ,i.$A.pO)),e.bind(new i.ZA(d.qu.xu,H.Vo,i.$A.pO)),e.bind(new i.ZA(d.qu.Cu,w.LJ,i.$A.pO)),e.bind(new i.ZA(d.qu.wu,b.MJ,i.$A.pO)),e.bind(new i.ZA(d.qu.ku,C.FJ,i.$A.pO)),e.bind(new i.ZA(d.qu.Nu,k.UJ,i.$A.pO)),e.bind(new i.ZA(d.qu.Au,_.Ak,i.$A.pO)),e.bind(new i.ZA(d.qu.Ou,L.BJ,i.$A.pO)),e.bind(new i.ZA(n.Framework.V.U,P.Rf.Fa,i.$A.pO)),e.bind(new i.ZA(d.qu.Lu,N.ya,i.$A.pO)),Q&&(e.bind(new i.ZA(d.qu.Bu,W,i.$A.pO)),e.bind(new i.ZA(d.qu.Uu,z,i.$A.pO))),K&&e.bind(new i.ZA(d.qu.Th,J,i.$A.pO)),e.bind(new i.ZA(d.qu.Hu,D.HJ,i.$A.pO))},e}();t.cJ=ee},function(e,t,r){"use strict";var i=r(4),n=r(28),s=n.cg,o=r(0),a=r(43),h=r(15),c=r(5),u=r(19),l=r(3),p=r(135),d=r(47),f=r(8),g=r(136),E=r(6),v=r(1),y=r(2),T=E.he.yh,m=E.he.Th,I=E.he.mh,S=function(){function e(e){this.state=u.Ml.Ll,this.requestTimeout=-1;try{this.logger=o.Framework.resolve(o.Framework.V.R).log(e.ticket.sessionId),this.loggerId="[SWARM] ",this.Ng=o.Framework.resolve(o.Framework.V.F),this.sessionId=e.ticket.sessionId,this.rl=e,this.ED=o.Framework.resolve(h.qu.Ru),this.sC=o.Framework.resolve(h.qu.yu),this.oG=o.Framework.resolve(h.qu.pu),this.xJ=o.Framework.resolve(h.qu.bu),this.gD=o.Framework.resolve(h.qu.Iu),this.TD=o.Framework.resolve(h.qu.du),this.uploadScore=o.Framework.resolve(h.qu.ku),this.qJ=o.Framework.resolve(h.qu.wu),this.GJ=o.Framework.resolve(h.qu.Du),this.vD=o.Framework.resolve(h.qu.Cu),this.fJ=o.Framework.resolve(h.qu.Pu),this.WM=o.Framework.resolve(h.qu.Lu),this.yD=o.Framework.resolve(h.qu.Hu),this.zM=o.Framework.resolve(h.qu.Au),this.mD=o.Framework.resolve(h.qu.Ou),this.ID=o.Framework.resolve(h.qu.Su),this.zV=o.Framework.resolve(h.qu.xu),this.YM=o.Framework.resolve(h.qu.lu),(T||o.Framework.C()&&d.$N.JN)&&(this.VJ=o.Framework.resolve(h.qu.Uu),this.jJ=o.Framework.resolve(h.qu.Bu)),(m||o.Framework.C()&&d.$N.XN)&&(this.QJ=o.Framework.resolve(h.qu.Th)),this.swarmId=this.KJ(e.ticket.kd()),this.YM.init(this),this.xJ.init(this),this.ID.init(this),this.zV.init(this),this.TD.init(this),this.qJ.init(this),this.GJ.init(this),this.vD.init(this),this.fJ.init(this),this.ED.init(this),this.oG.init(this),this.zM.init(this),this.mD.init(this),this.WM.init(this),(m||o.Framework.C()&&d.$N.XN)&&this.QJ.init(this),(T||o.Framework.C()&&d.$N.JN)&&this.jJ.init(this)}catch(e){throw v.ErrorMonitor.ve().logError("Error constructing swarm object",this.loggerId,y.hs.rs.Zn,e),new Error(e)}}return e.prototype.init=function(e,t,r){try{I?this.YJ(!1):r?this.YJ(!1):this.YJ(!0),this.yD.setReportingGuid(this.rl.identity.rp()),this.yD.WJ(r),this.sC.init(c.hh.Ra.Ta,c.hh.Ra.ma);var i=this.fJ.RD(e,t);this.yD.setContextId(this.fJ.dJ.getContextId());var n=new p.zJ(i);this.rl.OL=n,this.rl.Ul.OL=n,this.GJ.start(this.fJ,this.oG),(T||o.Framework.C()&&d.$N.JN)&&this.jJ.JJ(this.oG);var s=[this.oG,this.TD,this.GJ,this.rl.Ul,this.rl.Hl,this.zV];(T||o.Framework.C()&&d.$N.JN)&&s.push(this.jJ),(m||o.Framework.C()&&d.$N.XN)&&s.push(this.QJ),(a=this.Ng).start.apply(a,[e.sessionId].concat(s)),this.rl.Ul.DB(this.TD),this.rl.Ul.rB(this.yD),this.yD.XJ(e)}catch(e){throw v.ErrorMonitor.ve().logError("Error initializing swarm object",this.loggerId,y.hs.rs.$n,e),new Error(e)}var a},e.prototype.YJ=function(e){e&&"undefined"!=typeof navigator&&navigator.hardwareConcurrency?(this.yD.ZJ(navigator.hardwareConcurrency),this.yD.$J(navigator.hardwareConcurrency)):(this.yD.ZJ(1),this.yD.$J(1)),this.logger.debug(this.loggerId+"My score "+this.yD.QG())},e.prototype.KJ=function(e){return s.oT(e).toString(s.Uy.By)},e.prototype.request=function(e){this.eX(),this.ED.request(e)},e.prototype.tX=function(){if(this.state===u.Ml.STOP)return void this.logger.debug("Ignoring changing state from Stop to Idle");this.oG.stop(),this.TD.stop(),this.mD.rX(),this.mD.iX(),this.GJ.nX(),this.jJ&&this.jJ.sX(),this.rl.nl(u.Ml.IDLE),this.sC.Qq(),this.ID.oX(),this.ED.aX(),this.YM.hX(),o.Framework.clearTimeout(this.requestTimeout)},e.prototype.nl=function(e,t){try{if(this.state!=e){switch(this.logger.info("Switching state "+u.Ml[this.state]+" -> "+u.Ml[e]),e){case u.Ml.STOP:this.tX(),this.Ng.stop(t);break;case u.Ml.IDLE:this.tX();break;case u.Ml.Ll:this.oG.start(),this.TD.start(this.fJ.dJ),this.mD.cX(),this.GJ.uX(),this.jJ&&this.jJ.lX(),this.rl.nl(u.Ml.Ll),this.YM.pX()}this.state=e}}catch(e){v.ErrorMonitor.ve().logError("Error changing peer status",this.loggerId,y.hs.rs.es,e)}},e.prototype.eX=function(){var e=this;try{o.Framework.clearTimeout(this.requestTimeout),this.nl(u.Ml.Ll),this.requestTimeout=o.Framework.setTimeout(function(){e.nl(u.Ml.IDLE)},c.hh.sh.nh)}catch(e){v.ErrorMonitor.ve().logError("Error requesting timeout",this.loggerId,y.hs.rs.Qn,e)}},e}();t.dX=S;var R=function(){function e(){this.Ag=new a.Counter,this.fX=!1,this.zl=new l,this.gX=new l,this.EX=!1,this.vX=!1,this.yX=o.Framework.resolve(h.qu.Mu),this.TX=o.Framework.resolve(h.qu.Fu),this.ud=o.Framework.resolve(f.pc.sc),this.mX=!1}return e.prototype.start=function(e,t){this.logger=o.Framework.resolve(o.Framework.V.R).log(e.ticket.sessionId);var r=e.ticket;this.TX.init(this,e);var n=r.sessionId;if(this.zl.has(n))this.logger.warn("SESSION ALREADY ACTIVE "+n);else{g.IX.fd(e.xl.client);var s=new S(e);s.init(r,t,this.mX),this.ud.getConnectivityInfo().then(function(e){var t=e.getNetworkChanged(),r=t.getPrivateIp();r&&s.yD.DH(r)}).done(),e.Ul.NB(this.ud),this.logger.info("PEER CONTEXT STARTED"),this.zl.set(n,s),this.gX.set(s.swarmId,n)}return 1!=this.zl.length&&!this.vX||o.Framework.C()||(this.yX.init(),this.vX=!1),i.resolve(r.SourceURL)},e.prototype.hJ=function(){this.vX=!0},e.prototype.mg=function(e){if(this.gX.has(e)){var t=this.gX.get(e);return this.zl.get(t)}return null},e.prototype.pJ=function(e){return this.zl.get(e)},e.prototype.SX=function(e){return this.zl.has(e)?this.zl.get(e).ED:null},e.prototype.request=function(e,t){this.pJ(t).request(e)},e.prototype.nl=function(e,t){this.pJ(e).nl(t,e)},e.prototype.abort=function(e,t){this.SX(t).abort(e)},e.prototype.lJ=function(e){this.mX=e},e}();t.sh=R},function(e,t,r){"use strict";var i=function(){function e(e){this.wD=e}return e.prototype.uB=function(){var e=new hive.snapshots.StreamInfo;return e.streamType=this.wD.isLive()?StreamType.LIVE:StreamType.kK,e.streamProtocol=this.wD.getStreamProtocol(),e.url=this.wD.uM(),e},e}();t.zJ=i},function(e,t,r){"use strict";var i=r(22),n=i.Gl.rd,s=r(0),o=r(23),a=function(){function e(){}return e.fd=function(e){this.client=e},e.RX=function(e,t,r,i,a){var h=new n;h.app=e,h.guid=i,h.createdAt=s.Framework.time(),h.name=r,h.tags=t,h.data=JSON.parse(a);var c=new o.Jd(Services.Xd,2,JSON.stringify(h));this.client&&this.client.zd().send(c)},e}();t.IX=a},function(e,t,r){"use strict";var i=r(3),n=r(4),s=r(24),o=r(7),a=r(5),h=r(0),c=r(9),u=r(15),l=r(43),p=r(1),d=r(2),f=function(){function e(){this.wX=new i,this.bX=!1,this.CX=0,this.loggerId="[HiveCache] ",this._X=5,this.TX=h.Framework.resolve(u.qu.Fu),this.PX=new l.RO}return e.prototype.init=function(e){this.logger=h.Framework.resolve(h.Framework.V.R).log(e.sessionId),this.gD=e.gD,this.sC=e.sC,this.TD=e.TD,this.Ul=e.rl.Ul,this.sessionId=e.rl.ticket.sessionId,this.xJ=e.xJ,this.vD=e.vD,this.AX=e.fJ,this.yD=e.yD,this.ID=e.ID,this.YM=e.YM,this.Ul.eB(this.PX)},e.prototype.request=function(e){try{var t=e.url;this.logger.info("HIVE REQ "+t),e.Bf=h.Framework.time();var r=this.AX.OX(e),i=r.EM(e.url);this.YM.NX(i),this.$D(e,i,r,s.bf.Tf)}catch(e){p.ErrorMonitor.ve().logError("Error on player request",this.loggerId,d.hs.Wn.Yn,e)}},e.prototype.$D=function(e,t,r,i){var n=this;if(t.ig()){if(t.Xf()==c.vc.fc){var a=r.PM(t,i);if(a.hF)return this.logger.debug("DO NOT CONTINUE WITH THE REQUEST "+t.Zf()+". ALREADY REQUESTED  "+a.rF+" PENDING REQUEST "+a.aF),null;if(a.aF&&i==s.bf.Tf){var h=this.DX(e,t,r,i);return h.length>0?(h.forEach(function(t){var r=n.wX.get(t);n.wX.set(e.id,r),n.wX.delete(t)}),null):(this.logger.info("PREFETCH UPGRADE FAILED. THIS SHOULD NOT HAPPEN. CHECK FOR MULTIPLE PLAYER REQUESTS FOR THE SAME FRAGMENT"),this.kX(e,t,r,i))}return this.kX(e,t,r,i)}return this.kX(e,t,r,i)}var u=o.rc.Oh.next(),l=new s.hg(e,u,i,t,r);return this.wX.set(e.id,l),l.type=s.bf.mf,this.LX(l),l},e.prototype.kX=function(e,t,r,i){var n=this,a=o.rc.Oh.next(),h=new s.hg(e,a,i,t,r);if(this.wX.set(e.id,h),t.Xf()==c.vc.fc&&(r.uF(h),i!==s.bf.If&&i!==s.bf.wf)){var u=t.bitrate,l=this.yD.MX();0!=u&&(this.yD.FX(u),u!=l&&(this.bX=!0,this.CX=0),this.bX&&this.CX++,this.CX==this._X&&(this.TD.Kj(),this.bX=!1,this.CX=0))}return this.UX(t.Zf()).then(function(e){null!=e?(n.YM.BX(h,e),n.HX(h,e),r.lF(h.Zf(),h.$f()),r.gF(t.bitrate)):(n.xX(t,h),h.Xf()==c.vc.fc&&(r.dF(h),h.type==s.bf.Tf&&n.PX.add(0)))}),h},e.prototype.DX=function(e,t,r,i){return r.cF(e,t,i)},e.prototype.UX=function(e){return this.sC.get(e)},e.prototype.xX=function(e,t){this.gD.contains(e.Zf())?(this.logger.debug("OBJ IDX CONTAINS "+t.Zf()),t.Jf()==s.bf.If&&(t.type=s.bf.wf),this.Cf(t)):t.Jf()!=s.bf.wf?this.LX(t):(p.ErrorMonitor.ve().logError("P2P PREFETCH FAILED BECAUSE OBJECT INDEX DOES NOT CONTAIN REQUEST ENTITY",this.loggerId,{P_:t.Zf()}),t.Wf.lF(t.Zf(),t.$f()))},e.prototype.aX=function(){var e=this;this.wX.forEach(function(t){return e.abort(t.Kf)})},e.prototype.abort=function(e){if(this.wX.has(e.id)){var t=this.wX.get(e.id),r=t.$f();this.logger.debug("REQUEST "+r+" ABORTED "),this.vD.Ys(r)?this.vD.qX(r):this.xJ.Ys(r)&&this.xJ.qX(r),this.wX.delete(e.id)}},e.prototype.Cf=function(e){e.type==s.bf.Tf&&(e.type=s.bf.Rf),e.type==s.bf.wf&&(e.Vf=!0),this.vD.request(e)},e.prototype.GX=function(e){if(0!=e.Qf&&(e.qf.Af=e.Qf,this.logger.info("ALREADY DOWNLOADED "+e.qf.Af+" BYTES"),e.qf.Of=e.Qf),!a.hh.K.Na&&e.Qf&&(e.qf.Af=0),this.YM.VX(e),e.type!=s.bf.wf)e.type=s.bf.Sf,this.LX(e);else if(e.Xf()==c.vc.fc){e.Wf.pF(e.Zf()),e.Wf.lF(e.Zf(),e.$f());var t=e.zf;t.bitrate&&e.Wf.gF(t.bitrate)}},e.prototype.jX=function(e){var t=this;this.logger.info("SUCCESS FROM P2P FOR "+e.eg()+" [REQ "+e.Yf+"] ["+s.bf[e.type]+"] AFTER "+e.og()+" [bw:"+e.ag().Gh()+"]"),this.QX(e),this.KX(e,this.XM(e.type)),this.ID.YX(e);var r=this.xJ.WX().Hh();this.YM.zX(e,r),this.JX(e).then(function(){e.Wf.CM(e),t.XX()}).finally(function(){t.XM(e.type)&&t.ZX(e),t.wX.delete(e.Kf.id)})},e.prototype.LX=function(e){this.YM.$X(e),this.xJ.request(e)},e.prototype.eZ=function(e){this.XX();var t=this.xJ.WX().Hh();this.YM.tZ(e,t),e.Xf()==c.vc.fc&&(e.Wf.pF(e.Zf()),e.Wf.lF(e.Zf(),e.$f())),this.rZ(e)},e.prototype.iZ=function(e){var t=this;this.QX(e),this.KX(e,this.XM(e.type)),e.type==s.bf.Sf&&this.logger.debug("CDN COMPENSATION TIME "+(e.qf.Uf-e.Kf.Bf)+" / "+(e.qf.Uf-e.qf.Lf)+" P2P TIME "+(e.qf.Ff-e.qf.Mf)),-1==[c.vc.gc,c.vc.Ec].indexOf(e.Xf())&&this.ID.YX(e);var r=this.xJ.WX().Hh();this.YM.nZ(e,r),this.JX(e).then(function(){e.Xf()==c.vc.gc&&e.Wf.SM(e),-1==[c.vc.gc,c.vc.Ec].indexOf(e.Xf())&&e.Wf.CM(e),t.XX()}).catch(function(e){t.logger.error(e)}).finally(function(){t.XM(e.type)&&t.ZX(e),t.wX.delete(e.Kf.id)})},e.prototype.QX=function(e){e.type==s.bf.wf&&(e.qf.p2pAgenTrafficSuccessQt=e.qf.Af),e.type==s.bf.If&&(e.qf.kf=e.qf.Df,e.Gf&&(e.qf.srcOtherRespQt=e.qf.Df)),e.qf.Pf=e.qf.Df+e.qf.Af,e.Kf.total=e.qf.Pf},e.prototype.KX=function(e,t){if(this.sZ(e),t){var r=o.rc.createEvent(ProgressEvent,"progress",{lengthComputable:!0,total:e.qf.Pf,loaded:e.qf.Pf,currentTarget:e.Kf});e.Kf.dispatchEvent(r),e.zf.O_()||(e.Kf.response=e.RM,e.Kf.responseText=e.RM)}},e.prototype.ZX=function(e){var t=e.Kf;this.logger.info("RESPOND TO THE PLAYER "+e.Zf()+" SIZE "+(h.Framework.C()?t.total:e.jf.byteLength)),t.status=200,t.readyState=4,"string"==typeof t.response&&"arraybuffer"===t.responseType&&(t.response=o.rc.tc(t.response)),"text"!=t.responseType&&""!=t.responseType&&delete t.responseText,e.zf.O_()&&(t.response=h.Framework.C()?null:o.rc.Qh(e.jf));var r=o.rc.createEvent(Event,"readystatechange",{currentTarget:t}),i=o.rc.createEvent(ProgressEvent,"load",{bubbles:!1,cancelable:!1,lengthComputable:!1,total:e.zf.O_()?e.jf.byteLength:e.RM.length,currentTarget:t}),n=o.rc.createEvent(ProgressEvent,"loadend",{bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:t.total,total:0,currentTarget:t});t.dispatchEvent(r),t.dispatchEvent(i),t.dispatchEvent(n)},e.prototype.rZ=function(e){this.wX.delete(e.Kf.id);var t=e.Kf,r={bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:t.total,total:0,currentTarget:t};e.xhr.status&&e.xhr.status>0?(t.status=e.xhr.status,t.responseHeaders=e.responseHeaders):t.status=404,t.readyState=4,t.dispatchEvent(o.rc.createEvent(Event,"readystatechange",r)),t.dispatchEvent(o.rc.createEvent(ProgressEvent,"load",r)),t.dispatchEvent(o.rc.createEvent(ProgressEvent,"loadend",r))},e.prototype.JX=function(e){var t=this;return e.zf.ig()?this.sC.put(e).then(function(r){r&&t.TD.oZ(e.zf,e.qf.Pf,e.xq)}):n.resolve(!0)},e.prototype.HX=function(e,t){var r=this;e.jf=t.data,e.responseHeaders=t.headers,e.qq=t.qq,e.qf=t.qf;var i=e.Wf.dM().lx(t.length);this.logger.info("SCHEDULE DELIVERY OF "+e.Zf()+" IN "+i+" SIZE "+(h.Framework.C()?t.length:e.jf.byteLength)+" BYTES"),h.Framework.setTimeout(function(){r.aZ(e)},i)},e.prototype.aZ=function(e){this.logger.debug("DELIVERY OF "+e.Zf()),this.KX(e,!0),this.wX.delete(e.Kf.id);var t=e.Kf.Bf-e.qf.Uf;this.logger.info("FRAGMENT PREFETCHED "+t+" MSECS BEFORE PLAYER REQUEST"),t>0&&e.Xf()==c.vc.fc&&this.PX.add(t);var r=0;r=e.qf.Mf>0?e.Kf.Bf-e.qf.Mf:e.Kf.Bf-e.qf.Ff,this.logger.info("FRAGMENT REQUESTED "+r+" MSECS BEFORE PLAYER REQUEST"),this.ZX(e)},e.prototype.XM=function(e){return e!=s.bf.wf&&e!=s.bf.If},e.prototype.sZ=function(e){if(e.type!==s.bf.Sf)e.responseHeaders=e.Kf.responseHeaders=e.responseHeaders;else{var t="\nContent-Range: bytes=0-"+(e.size-1)+"/"+e.size+"\n";t+="Content-Length: "+e.size+"\n",e.responseHeaders=e.Kf.responseHeaders=t}null!=e.responseHeaders&&-1!=e.responseHeaders.indexOf("Access-Control-Allow-Origin")||(e.responseHeaders+="\nAccess-Control-Allow-Origin:*")},e.prototype.XX=function(){h.Framework.C()||this.TX.render()},e}();t.IJ=f},function(e,t,r){"use strict";var i=r(57),n=r(87),s=r(0),o=function(){function e(){this.TD=null,this.Ng=s.Framework.resolve(s.Framework.V.F)}return e.prototype.init=function(e){this.logger=s.Framework.resolve(s.Framework.V.R).log(e.sessionId),this.sG=e,this.TD=e.TD},e.prototype.RD=function(e,t){var r=null,s=e._N();return n.bq.rM(s)?this.dJ=r=new n.bq.Dq(e,t,this.sG):i.DASH.rM(s)?this.dJ=r=new i.DASH.VM(e,this.sG):this.logger.warn("COULD NOT FIND A CONTEXT FOR "+s),null!=r&&this.hZ(this.dJ),r},e.prototype.hZ=function(e){var t=this;null!=this.TD?this.TD.stop().then(function(r){t.TD.start(e)}):this.TD.start(e)},e.prototype.OX=function(e){if(null==this.dJ)this.logger.warn("FIRST REQUEST, COULD NOT FIND RIGHT CONTEXT "+e.url);else if(!this.dJ.mM(e))return this.logger.warn("REQUEST DOES NOT BELONG TO THE CURRENT CONTEXT "+e.url),null;return this.dJ},e}();t.SJ=o},function(e,t,r){"use strict";function i(e,t,r,n){if(!(this instanceof i))return new i(e,t,r,n);this.ls=t||Object.cs,this.Ac=r||Object.Oc,this.ds=n||Function.us,this.root=null,this.length=0,this.addEach(e)}function n(e){this.value=e,this.left=null,this.right=null,this.length=1}function s(e,t,r){if(this.set=e,this.Ok=null,this.end=r,t){var i=this.set.cZ(t);i&&(this.set.uZ(i.value),this.Ok=i.lZ())}}e.i=i;var o=(r(11),r(12)),a=r(39),h=r(13),c=r(38),u=r(69);i.pZ=i,Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,a.prototype),Object.addEach(i.prototype,h.prototype),Object.addEach(i.prototype,c.prototype),i.prototype.mF=!0,i.prototype.Es=function(e){return new this.constructor(e,this.ls,this.Ac,this.ds)},i.prototype.has=function(e,t){if(t)throw new Error("SortedSet#has does not support second argument: equals");return!!this.root&&(this.uZ(e),this.ls(e,this.root.value))},i.prototype.get=function(e,t){if(t)throw new Error("SortedSet#get does not support second argument: equals");return this.root&&(this.uZ(e),this.ls(e,this.root.value))?this.root.value:this.ds(e)},i.prototype.add=function(e){var t=new this.Node(e);if(!this.root)return this.Mk&&this.QA([e],[],0),this.root=t,this.length++,this.Mk&&this.GA([e],[],0),!0;if(this.uZ(e),!this.ls(e,this.root.value)){var r=this.Ac(e,this.root.value);if(0===r)throw new Error("SortedSet cannot contain incomparable but inequal values: "+e+" and "+this.root.value);return this.Mk&&this.QA([e],[],this.root.index),r<0?(t.right=this.root,t.left=this.root.left,this.root.left=null,this.root.dZ()):(t.left=this.root,t.right=this.root.right,this.root.right=null,this.root.dZ()),t.dZ(),this.root=t,this.length++,this.Mk&&this.GA([e],[],this.root.index),!0}return!1},i.prototype.delete=function(e,t){if(t)throw new Error("SortedSet#delete does not support second argument: equals");if(this.root&&(this.uZ(e),this.ls(e,this.root.value))){var r=this.root.index;if(this.Mk&&this.QA([],[e],r),this.root.left){var i=this.root.right;this.root=this.root.left,this.uZ(e),this.root.right=i}else this.root=this.root.right;return this.length--,this.root&&this.root.dZ(),this.Mk&&this.GA([],[e],r),!0}return!1},i.prototype.indexOf=function(e,t){if(t)throw new Error("SortedSet#indexOf does not support second argument: startIndex");return this.root&&(this.uZ(e),this.ls(e,this.root.value))?this.root.index:-1},i.prototype.find=function(e,t,r){if(t)throw new Error("SortedSet#find does not support second argument: equals");if(r)throw new Error("SortedSet#find does not support third argument: index");if(this.root&&(this.uZ(e),this.ls(e,this.root.value)))return this.root},i.prototype.fZ=function(e){if(this.root){for(e=e||this.root;e.right;)e=e.right;return e}},i.prototype.gZ=function(e){if(this.root){for(e=e||this.root;e.left;)e=e.left;return e}},i.prototype.EZ=function(e){if(this.root)return this.uZ(e),this.Ac(this.root.value,e)>0?this.root.lZ():this.root},i.prototype.vZ=function(e){if(this.root)return this.uZ(e),this.Ac(this.root.value,e)>=0?this.root.lZ():this.root},i.prototype.cZ=function(e){if(this.root)return this.uZ(e),this.Ac(this.root.value,e)>=0?this.root:this.root.yZ()},i.prototype.TZ=function(e){if(this.root)return this.uZ(e),this.Ac(this.root.value,e)<=0?this.root.yZ():this.root},i.prototype.pop=function(){if(this.root){var e=this.fZ();return this.delete(e.value),e.value}},i.prototype.shift=function(){if(this.root){var e=this.gZ();return this.delete(e.value),e.value}},i.prototype.push=function(){this.addEach(arguments)},i.prototype.unshift=function(){this.addEach(arguments)},i.prototype.slice=function(e,t){e=e||0,t=t||this.length,e<0&&(e+=this.length),t<0&&(t+=this.length);var r=[];if(this.root)for(this.mZ(e);this.root.index<t&&(r.push(this.root.value),this.root.right);)this.uZ(this.root.yZ().value);return r},i.prototype.splice=function(e,t){return this.qk(e,t,Array.prototype.slice.call(arguments,2))},i.prototype.qk=function(e,t,r){if(void 0===e&&void 0===t)return[];e=e||0,e<0&&(e+=this.length),void 0===t&&(t=1/0);var i=[];if(this.root){this.mZ(e);for(var n=0;n<t;n++){i.push(this.root.value);var s=this.root.yZ();if(this.delete(this.root.value),!s)break;this.uZ(s.value)}}return this.addEach(r),i},i.prototype.uZ=function(e){var t,r,i,s,o,a;if(this.root){for(t=r=i=new this.Node,a=new this.Node,o=this.root;;){var h=this.Ac(e,o.value);if(h<0){if(!o.left)break;if(this.Ac(e,o.left.value)<0&&(s=o.left,o.left=s.right,o.dZ(),s.right=o,s.dZ(),o=s,!o.left))break;s=new n,s.right=o,s.left=a.left,a.left=s,i.left=o,i.dZ(),i=o,o=o.left}else{if(!(h>0))break;if(!o.right)break;if(this.Ac(e,o.right.value)>0&&(s=o.right,o.right=s.left,o.dZ(),s.left=o,s.dZ(),o=s,!o.right))break;s=new n,s.left=o,s.right=a.right,a.right=s,r.right=o,r.dZ(),r=o,o=o.right}}for(r.right=o.left,r.dZ(),i.left=o.right,i.dZ(),o.left=t.right,o.right=t.left;a.left;)a.left.right.dZ(),a.left=a.left.left;for(;a.right;)a.right.left.dZ(),a.right=a.right.right;o.dZ(),this.root=o}},i.prototype.mZ=function(e){if(this.root){for(var t=this.root,r=this.root.index;r!==e;)if(r>e&&t.left)t=t.left,r-=1+(t.right?t.right.length:0);else{if(!(r<e&&t.right))break;t=t.right,r+=1+(t.left?t.left.length:0)}return this.uZ(t.value),this.root.index===e}return!1},i.prototype.reduce=function(e,t,r){return this.root&&(t=this.root.reduce(e,t,0,r,this)),t},i.prototype.reduceRight=function(e,t,r){return this.root&&(t=this.root.reduceRight(e,t,this.length-1,r,this)),t},i.prototype.min=function(e){var t=this.gZ(e);if(t)return t.value},i.prototype.max=function(e){var t=this.fZ(e);if(t)return t.value},i.prototype.Bc=function(){return this.min()},i.prototype.clear=function(){var e;this.Mk&&(e=this.toArray(),this.QA([],e,0)),this.root=null,this.length=0,this.Mk&&this.GA([],e,0)},i.prototype.Hc=function(e,t){return new this.Iterator(this,e,t)},i.prototype.Iterator=s,i.prototype.summary=function(){return this.root?this.root.summary():"()"},i.prototype.log=function(e,t,r,i){e=e||u.aU,t=t||this.vs,r||(r=console.log,i=console),r=r.bind(i),this.root&&this.root.log(e,t,r,r)},i.prototype.vs=function(e,t,r){t(" "+e.value)},i.IZ=u,i.prototype.Node=n,n.prototype.reduce=function(e,t,r,i,n,s){if(s=s||0,this.left){var o=this.left.length;t=this.left.reduce(e,t,r,i,n,s+1),r+=o}return t=e.call(i,t,this.value,r,n,this,s),r+=1,this.right&&(t=this.right.reduce(e,t,r,i,n,s+1)),t},n.prototype.reduceRight=function(e,t,r,i,n,s){return s=s||0,this.right&&(t=this.right.reduce(e,t,r,i,n,s+1),r-=this.right.length),t=e.call(i,t,this.value,this.value,n,this,s),r-=1,this.left&&(t=this.left.reduce(e,t,r,i,n,s+1)),t},n.prototype.dZ=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0),this.index=this.left?this.left.length:0},n.prototype.SZ=function(){var e=1;if(e+=this.left?this.left.SZ():0,e+=this.right?this.right.SZ():0,this.length!==e)throw new Error("Integrity check failed: "+this.summary());return e},n.prototype.yZ=function(){var e=this;if(e.right){for(e=e.right;e.left;)e=e.left;return e}},n.prototype.lZ=function(){var e=this;if(e.left){for(e=e.left;e.right;)e=e.right;return e}},n.prototype.summary=function(){var e=this.value||"-";return e+=" <"+this.length,this.left||this.right?"("+e+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")":"("+e+")"},n.prototype.log=function(e,t,r,i){var n,s=this;n=this.left&&this.right?e.WA:this.left?e.tU:this.right?e.rU:e.eU;var o;this.left&&this.left.log(e,t,function(t){o?i(e.oU+" "+t):(o=!0,i(e.iU+e.eU+t))},function(e){i("  "+e)});var a;t(this,function(t){a?r((s.right?e.oU:" ")+t):(a=!0,r(n+t))},function(t){i((s.left?e.oU:" ")+t)});var h;this.right&&this.right.log(e,t,function(t){h?r("  "+t):(h=!0,r(e.nU+e.eU+t))},function(t){r(e.oU+" "+t)})},s.prototype.Gk=null,Object.defineProperty(s.prototype,"_iterationObject",{get:function(){return this.Gk||(this.Gk={done:!1,value:null})}}),s.prototype.next=function(){var e;return e=this.Ok?this.set.TZ(this.Ok.value):this.set.gZ(),e?void 0!==this.end&&this.set.Ac(e.value,this.end)>=0?(this.Vk.done=!0,this.Vk.value=void 0):(this.Ok=e,this.Vk.value=e.value):(this.Vk.done=!0,this.Vk.value=void 0),this.Vk}},function(e,t,r){"use strict";var i=function(){function e(){this.rF=!1,this.aF=!1,this.hF=!1}return e}();t.eF=i},function(e,t,r){"use strict";function i(e,t,r,n){if(!(this instanceof i))return new i(e,t,r,n);Array.isArray(e)?(this.NT=e,e=e.splice(0,e.length)):this.NT=[],this.ls=t||Object.cs,this.Ac=r||Object.Oc,this.ds=n||Function.us,this.length=0,this.addEach(e)}function n(e,t,r){for(var i=0,n=e.length-1;i<=n;){var s=i+n>>1,o=r(t,e[s]);if(o>0)i=s+1;else{if(!(o<0))return s;n=s-1}}return-(i+1)}function s(e,t,r,i){var s=n(e,t,r);if(s<0)return-1;for(;s>0&&i(t,e[s-1]);)s--;return i(t,e[s])?s:-1}function o(e,t,r,i){var s=n(e,t,r);if(s<0)return-1;for(;s<e.length-1&&i(t,e[s+1]);)s++;return i(t,e[s])?s:-1}function a(e,t,r){var i=n(e,t,r);if(i<0)return-i-1;for(var s=e.length-1;i<s&&0===r(t,e[i+1]);)i++;return i}e.i=i;var h=(r(11),r(12)),c=r(13),u=r(38);i.RZ=i,Object.addEach(i.prototype,h.prototype),Object.addEach(i.prototype,c.prototype),Object.addEach(i.prototype,u.prototype),i.prototype.mF=!0,i.prototype.Es=function(e){return new this.constructor(e,this.ls,this.Ac,this.ds)},i.prototype.has=function(e,t){if(t)throw new Error("SortedSet#has does not support second argument: equals");var r=n(this.NT,e,this.Ac);return r>=0&&this.ls(this.NT[r],e)},i.prototype.get=function(e,t){if(t)throw new Error("SortedArray#get does not support second argument: equals");var r=s(this.NT,e,this.Ac,this.ls);return-1!==r?this.NT[r]:this.ds(e)},i.prototype.add=function(e){var t=a(this.NT,e,this.Ac);return this.Mk&&this.QA([e],[],t),this.NT.splice(t,0,e),this.length++,this.Mk&&this.GA([e],[],t),!0},i.prototype.delete=function(e,t){if(t)throw new Error("SortedArray#delete does not support second argument: equals");var r=s(this.NT,e,this.Ac,this.ls);return-1!==r&&(this.Mk&&this.QA([],[e],r),this.NT.splice(r,1),this.length--,this.Mk&&this.GA([],[e],r),!0)},i.prototype.XA=function(e,t){if(t){var r=this.NT.XA(e,t);return this.length-=r,r}var i=s(this.NT,e,this.Ac,this.ls);if(-1!==i){for(var n=i;this.ls(e,this.NT[n]);)n++;var o=this.slice(i,n);return this.Mk&&this.QA([],o,i),this.NT.splice(i,o.length),this.length-=o.length,this.Mk&&this.GA([],o,i),o.length}return 0},i.prototype.indexOf=function(e){return s(this.NT,e,this.Ac,this.ls)},i.prototype.lastIndexOf=function(e){return o(this.NT,e,this.Ac,this.ls)},i.prototype.find=function(e,t,r){if(t)throw new Error("SortedArray#find does not support second argument: equals");if(r)throw new Error("SortedArray#find does not support third argument: index");return s(this.NT,e,this.Ac,this.ls)},i.prototype.Lk=function(e,t,r){if(t)throw new Error("SortedArray#findLast does not support second argument: equals");if(r)throw new Error("SortedArray#findLast does not support third argument: index");return o(this.NT,e,this.Ac,this.ls)},i.prototype.push=function(){this.addEach(arguments)},i.prototype.unshift=function(){this.addEach(arguments)},i.prototype.pop=function(){var e=this.NT.pop();return this.length=this.NT.length,e},i.prototype.shift=function(){var e=this.NT.shift();return this.length=this.NT.length,e},i.prototype.slice=function(){return this.NT.slice.apply(this.NT,arguments)},i.prototype.splice=function(e,t){return this.qk(e,t,Array.prototype.slice.call(arguments,2))},i.prototype.qk=function(e,t,r){if(void 0===e&&void 0===t)return[];e=e||0,e<0&&(e+=this.length),void 0===t&&(t=1/0);var i=this.slice(e,e+t);return this.Mk&&this.QA(r,i,e),this.NT.splice(e,t),this.length-=i.length,this.Mk&&this.GA([],i,e),this.addEach(r),i},i.prototype.reduce=function(e,t){var r=arguments[2];return this.NT.reduce(function(t,i,n){return e.call(r,t,i,n,this)},t,this)},i.prototype.reduceRight=function(){var e=arguments[2];return this.NT.reduceRight(function(t,r,i){return callback.call(e,t,r,i,this)},basis,this)},i.prototype.min=function(){if(this.length)return this.NT[0]},i.prototype.max=function(){if(this.length)return this.NT[this.length-1]},i.prototype.Bc=function(){return this.NT.Bc()},i.prototype.clear=function(){var e;this.Mk&&(e=this.NT.slice(),this.QA([],e,0)),this.length=0,this.NT.clear(),this.Mk&&this.GA([],e,0)},i.prototype.cs=function(e,t){return this.NT.cs(e,t)},i.prototype.Oc=function(e,t){return this.NT.Oc(e,t)},i.prototype.Hc=function(e,t){return new this.Iterator(this.NT,e,t)},i.prototype.toJSON=function(){return this.toArray()},i.prototype.Iterator=Array.prototype.Iterator},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(84),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n.Tx);t.oM=s},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(85),s=r(4),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bx=function(e,t){if(DOMParser){var r=(new DOMParser).parseFromString(t,"text/xml"),i=r.getElementsByTagName("Location"),n="";if(i&&i.length>0&&i[0].childNodes.length>0){var s=i[0].childNodes[0];n=this.Ix(s.data)}else n=this.Ix(e);this.manifest=this.mx.parse(t,n)}},t.prototype.Ux=function(e){return e.substr(0,e.lastIndexOf("_cs"))},t.prototype.CM=function(e){return s.resolve(!1)},t}(n.$x);t.hM=o},function(e,t,r){/*!
 * The copyright in this software is being made available under the BSD License,
 * included below. This software may be subject to other third party and contributor
 * rights, including patent rights, and no such rights are granted under this license.
 *
 * Copyright (c) 2013, Dash Industry Forum.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *  * Redistributions of source code must retain the above copyright notice, this
 *  list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright notice,
 *  this list of conditions and the following disclaimer in the documentation and/or
 *  other materials provided with the distribution.
 *  * Neither the name of Dash Industry Forum nor the names of its
 *  contributors may be used to endorse or promote products derived from this software
 *  without specific prior written permission.
 *
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY
 *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 *  POSSIBILITY OF SUCH DAMAGE.
 */
var i=r(145),n=r(86);DashParser=function(){var e=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,r=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,s=[{type:"duration",test:function(t){for(var r=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],i=r.length,n=0;n<i;n++)if(t.nodeName===r[n])return e.test(t.value);return!1},tq:function(t){var r=e.exec(t),i=31536e3*parseFloat(r[2]||0)+2592e3*parseFloat(r[4]||0)+86400*parseFloat(r[6]||0)+3600*parseFloat(r[8]||0)+60*parseFloat(r[10]||0)+parseFloat(r[12]||0);return void 0!==r[1]&&(i=-i),i}},{type:"datetime",test:function(e){return t.test(e.value)},tq:function(e){var r,i=t.exec(e);if(r=Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),i[6]&&parseInt(i[6],10)||0,i[7]&&1e3*parseFloat(i[7])||0),i[9]&&i[10]){var n=60*parseInt(i[9],10)+parseInt(i[10],10);r+=("+"===i[8]?-1:1)*n*60*1e3}return new Date(r)}},{type:"numeric",test:function(e){return r.test(e.value)},tq:function(e){return parseFloat(e)}}],o=function(){var e,t,r,i;return i=[{name:"profiles",Py:!1},{name:"width",Py:!1},{name:"height",Py:!1},{name:"sar",Py:!1},{name:"frameRate",Py:!1},{name:"audioSamplingRate",Py:!1},{name:"mimeType",Py:!1},{name:"segmentProfiles",Py:!1},{name:"codecs",Py:!1},{name:"maximumSAPPeriod",Py:!1},{name:"startsWithSap",Py:!1},{name:"maxPlayoutRate",Py:!1},{name:"codingDependency",Py:!1},{name:"scanType",Py:!1},{name:"FramePacking",Py:!0},{name:"AudioChannelConfiguration",Py:!0},{name:"ContentProtection",Py:!0}],e={},e.name="AdaptationSet",e.wZ=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=i,t={},t.name="Representation",t.wZ=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=i,e.children.push(t),r={},r.name="SubRepresentation",r.wZ=!1,r.isArray=!0,r.parent=t,r.children=[],r.properties=i,t.children.push(r),e},a=function(){var e,t,r,i;return i=[{name:"SegmentBase",Py:!0},{name:"SegmentTemplate",Py:!0},{name:"SegmentList",Py:!0}],e={},e.name="Period",e.wZ=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=i,t={},t.name="AdaptationSet",t.wZ=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=i,e.children.push(t),r={},r.name="Representation",r.wZ=!1,r.isArray=!0,r.parent=t,r.children=[],r.properties=i,t.children.push(r),e},h=function(){var e,t,r,i,n;return n=[{name:"BaseURL",Py:!0,bZ:function(e,t){return 0===t.indexOf("http://")?t:e+t}}],e={},e.name="mpd",e.wZ=!0,e.isArray=!0,e.parent=null,e.children=[],e.properties=n,t={},t.name="Period",t.wZ=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=n,e.children.push(t),r={},r.name="AdaptationSet",r.wZ=!1,r.isArray=!0,r.parent=t,r.children=[],r.properties=n,t.children.push(r),i={},i.name="Representation",i.wZ=!1,i.isArray=!0,i.parent=r,i.children=[],i.properties=n,r.children.push(i),e},c=function(){var e=[];return e.push(o()),e.push(a()),e.push(h()),e};return{parse:function(e,t){var r,o=new n(s,"",!0),a=new i(c());new Date;try{r=o.Wx(e),new Date,r.hasOwnProperty("BaseURL")?(r.BaseURL=r.CZ[0],0!==r.BaseURL.toString().indexOf("http")&&(r.BaseURL=t+r.BaseURL)):r.BaseURL=t,r.hasOwnProperty("Location")&&(r.Location=r.Location_asArray[0]),a._Z(r),new Date}catch(t){return console.log("parsing the manifest failed","parse",e),null}return r}}}},function(e,t,r){var n=function(e){var t;for(t=[],i=0,len=e.length;i<len;i+=1)e[i].wZ?t.push("root"):t.push(e[i].name);var r=function(e,t){var r;if(null!==e&&null!==t)for(r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)||(t[r]=e[r]))},n=function(e,t,i){var n,s,o,a,h;if(null!==e&&0!==e.length)for(n=0,s=e.length;n<s;n+=1)o=e[n],t.hasOwnProperty(o.name)&&(i.hasOwnProperty(o.name)?o.Py&&(a=t[o.name],h=i[o.name],"object"==typeof a&&"object"==typeof h?r(a,h):null!=o.bZ?i[o.name]=o.bZ(a,h):i[o.name]=a+h):i[o.name]=t[o.name])},s=function(e,t){var r,i,o,a,h,c,u,l=e;if(null!==l.children&&0!==l.children.length)for(r=0,i=l.children.length;r<i;r+=1)if(c=l.children[r],t.hasOwnProperty(c.name))if(c.isArray)for(h=t[c.name+"_asArray"],o=0,a=h.length;o<a;o+=1)u=h[o],n(l.properties,t,u),s(c,u);else u=t[c.name],n(l.properties,t,u),s(c,u)},o=function(r){var i,n,a,h,c,u,l;if(null===r)return r;if("object"!=typeof r)return r;for(i=0,n=t.length;i<n;i+=1)"root"===t[i]&&(c=e[i],u=r,s(c,u));for(h in r)if(r.hasOwnProperty(h)){if(-1!==(a=t.indexOf(h)))if(c=e[a],c.isArray)for(l=r[h+"_asArray"],i=0,n=l.length;i<n;i+=1)u=l[i],s(c,u);else u=r[h],s(c,u);o(r[h])}return r};return{_Z:o}};e.i=n},function(e,t,r){/*! codem-isoboxer v0.2.2 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
"undefined"==typeof ISOBoxer&&(ISOBoxer={}),ISOBoxer.Qx=function(e){return new i(e).parse()},ISOBoxer.rc={},ISOBoxer.rc.PZ=function(e,t){var r=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(r).decode(e);var i=[],n=0;if("utf-8"===r)for(;n<e.byteLength;){var s=e.getUint8(n++);s<128||(s<224?(s=(31&s)<<6,s|=63&e.getUint8(n++)):s<240?(s=(15&s)<<12,s|=(63&e.getUint8(n++))<<6,s|=63&e.getUint8(n++)):(s=(7&s)<<18,s|=(63&e.getUint8(n++))<<12,s|=(63&e.getUint8(n++))<<6,s|=63&e.getUint8(n++))),i.push(String.fromCharCode(s))}else for(;n<e.byteLength;)i.push(String.fromCharCode(e.getUint8(n++)));return i.join("")},t.Qx=ISOBoxer.Qx,t.rc=ISOBoxer.rc,ISOBoxer.AZ=function(e){this.offset=void 0===e?0:e};var i=function(e){this.OZ=new DataView(e),this.NZ=new ISOBoxer.AZ,this.DZ=[]};i.prototype.fetch=function(e){var t=this.kZ(e,!0);return t.length?t[0]:null},i.prototype.kZ=function(e,t){var r=[];return i.LZ.call(this,e,r,t),r},i.prototype.parse=function(){for(this.NZ.offset=0,this.DZ=[];this.NZ.offset<this.OZ.byteLength;){var e=n.parse(this);if(void 0===e.type)break;this.DZ.push(e)}return this},i.LZ=function(e,t,r){this.type&&this.type==e&&t.push(this);for(var n in this.DZ){if(t.length&&r)return;i.LZ.call(this.DZ[n],e,t,r)}};var n=function(){this.NZ=new ISOBoxer.AZ};n.parse=function(e){var t=new n;return t.MZ=e.NZ.offset,t.FZ=e.FZ?e.FZ:e,t.OZ=e.OZ,t.UZ=e,t.BZ(),e.NZ.offset=t.OZ.byteOffset+t.OZ.byteLength,t},n.prototype.HZ=function(e){var t=null;switch(e){case 8:t=this.OZ.getInt8(this.NZ.offset-this.OZ.byteOffset);break;case 16:t=this.OZ.getInt16(this.NZ.offset-this.OZ.byteOffset);break;case 32:t=this.OZ.getInt32(this.NZ.offset-this.OZ.byteOffset);break;case 64:var r=this.OZ.getInt32(this.NZ.offset-this.OZ.byteOffset),i=this.OZ.getInt32(this.NZ.offset-this.OZ.byteOffset+4);t=r*Math.pow(2,32)+i}return this.NZ.offset+=e>>3,t},n.prototype.xZ=function(e){var t=null;switch(e){case 8:t=this.OZ.getUint8(this.NZ.offset-this.OZ.byteOffset);break;case 16:t=this.OZ.getUint16(this.NZ.offset-this.OZ.byteOffset);break;case 24:var r=this.OZ.getUint16(this.NZ.offset-this.OZ.byteOffset),i=this.OZ.getUint8(this.NZ.offset-this.OZ.byteOffset+2);t=(r<<8)+i;break;case 32:t=this.OZ.getUint32(this.NZ.offset-this.OZ.byteOffset);break;case 64:var r=this.OZ.getUint32(this.NZ.offset-this.OZ.byteOffset),i=this.OZ.getUint32(this.NZ.offset-this.OZ.byteOffset+4);t=r*Math.pow(2,32)+i}return this.NZ.offset+=e>>3,t},n.prototype.qZ=function(e){for(var t="",r=0;r<e;r++){var i=this.xZ(8);t+=String.fromCharCode(i)}return t},n.prototype.GZ=function(){for(var e="";;){var t=this.xZ(8);if(0==t)break;e+=String.fromCharCode(t)}return e},n.prototype.VZ=function(e){return this.xZ(e/2)+this.xZ(e/2)/Math.pow(2,e/2)},n.prototype.BZ=function(){if(this.NZ.offset=this.MZ,this.MZ+8>this.OZ.buffer.byteLength)return void(this.FZ.jZ=!0);switch(this.size=this.xZ(32),this.type=this.qZ(4),1==this.size&&(this.QZ=this.xZ(64)),"uuid"==this.type&&(this.KZ=this.qZ(16)),this.size){case 0:this.OZ=new DataView(this.OZ.buffer,this.MZ,this.OZ.byteLength-this.NZ.offset);break;case 1:this.MZ+this.size>this.OZ.buffer.byteLength?(this.jZ=!0,this.FZ.jZ=!0):this.OZ=new DataView(this.OZ.buffer,this.MZ,this.QZ);break;default:this.MZ+this.size>this.OZ.buffer.byteLength?(this.jZ=!0,this.FZ.jZ=!0):this.OZ=new DataView(this.OZ.buffer,this.MZ,this.size)}!this.jZ&&this.YZ[this.type]&&this.YZ[this.type].call(this)},n.prototype.WZ=function(){this.version=this.xZ(8),this.zZ=this.xZ(24)},n.prototype.YZ={},["moov","trak","tref","mdia","minf","stbl","edts","dinf","mvex","moof","traf","mfra","udta","meco","strk","vttc"].forEach(function(e){n.prototype.YZ[e]=function(){for(this.DZ=[];this.NZ.offset-this.OZ.byteOffset<this.OZ.byteLength;)this.DZ.push(n.parse(this))}}),n.prototype.YZ.JZ=function(){this.WZ(),this.XZ=this.xZ(32),this.entries=[];for(var e=1;e<=this.XZ;e++){var t={};1==this.version?(t.ZZ=this.xZ(64),t.$Z=this.HZ(64)):(t.ZZ=this.xZ(32),t.$Z=this.HZ(32)),t.e$=this.HZ(16),t.t$=this.HZ(16),this.entries.push(t)}},n.prototype.YZ.r$=function(){this.WZ(),this.i$=this.GZ(),this.value=this.GZ(),this.timescale=this.xZ(32),this.n$=this.xZ(32),this.s$=this.xZ(32),this.id=this.xZ(32),this.o$=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ))},n.prototype.YZ.a$=n.prototype.YZ.Mb=function(){this.data=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ))},n.prototype.YZ.h$=n.prototype.YZ.c$=function(){for(this.u$=this.qZ(4),this.l$=this.xZ(32),this.p$=[];this.NZ.offset-this.OZ.byteOffset<this.OZ.byteLength;)this.p$.push(this.qZ(4))},n.prototype.YZ.d$=function(){this.WZ(),this.f$=this.xZ(32),this.g$=this.qZ(4),this.YR=[this.xZ(32),this.xZ(32),this.xZ(32)],this.name=this.GZ()},n.prototype.YZ.E$=function(){this.data=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ))},n.prototype.YZ.v$=function(){this.WZ(),1==this.version?(this.y$=this.xZ(64),this.T$=this.xZ(64),this.timescale=this.xZ(32),this.duration=this.xZ(64)):(this.y$=this.xZ(32),this.T$=this.xZ(32),this.timescale=this.xZ(32),this.duration=this.xZ(32));var e=this.xZ(16);this.pad=e>>15,this.language=String.fromCharCode(96+(e>>10&31),96+(e>>5&31),96+(31&e)),this.f$=this.xZ(16)},n.prototype.YZ.m$=function(){this.WZ(),this.I$=this.xZ(32)},n.prototype.YZ.S$=function(){this.WZ(),1==this.version?(this.y$=this.xZ(64),this.T$=this.xZ(64),this.timescale=this.xZ(32),this.duration=this.xZ(64)):(this.y$=this.xZ(32),this.T$=this.xZ(32),this.timescale=this.xZ(32),this.duration=this.xZ(32)),this.rate=this.VZ(32),this.volume=this.VZ(16),this.R$=this.xZ(16),this.w$=[this.xZ(32),this.xZ(32)],this.matrix=[];for(var e=0;e<9;e++)this.matrix.push(this.VZ(32));this.f$=[];for(var e=0;e<6;e++)this.f$.push(this.xZ(32));this.b$=this.xZ(32)},n.prototype.YZ.C$=function(){var e=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ));this._$=ISOBoxer.rc.PZ(e)},n.prototype.YZ.P$=function(){this.WZ(),this.A$=this.xZ(32),this.timescale=this.xZ(32),0==this.version?(this.O$=this.xZ(32),this.N$=this.xZ(32)):(this.O$=this.xZ(64),this.N$=this.xZ(64)),this.YR=this.xZ(16),this.D$=this.xZ(16),this.k$=[];for(var e=0;e<this.D$;e++){var t={},r=this.xZ(32);t.L$=r>>31&1,t.M$=2147483647&r,t.F$=this.xZ(32);var i=this.xZ(32);t.U$=i>>31&1,t.B$=i>>28&7,t.H$=268435455&i,this.k$.push(t)}},n.prototype.YZ.x$=function(){this.WZ(),this.q$=this.xZ(32),this.G$=[];for(var e=0;e<this.q$;e++){var t={};t.V$=this.xZ(32),t.j$=[];for(var r=0;r<t.V$;r++){var i={};i.level=this.xZ(8),i.Q$=this.xZ(24),t.j$.push(i)}this.G$.push(t)}},n.prototype.YZ.K$=function(){this.WZ(),1==this.version?this.Y$=this.xZ(64):this.Y$=this.xZ(32)},n.prototype.YZ.tfhd=function(){this.WZ(),this.W$=this.xZ(32),1&this.zZ&&(this.z$=this.xZ(64)),2&this.zZ&&(this.J$=this.xZ(32)),8&this.zZ&&(this.default_sample_duration=this.xZ(32)),16&this.zZ&&(this.X$=this.xZ(32)),32&this.zZ&&(this.Z$=this.xZ(32))},n.prototype.YZ.$$=function(){this.WZ(),1==this.version?(this.y$=this.xZ(64),this.T$=this.xZ(64),this.W$=this.xZ(32),this.R$=this.xZ(32),this.duration=this.xZ(64)):(this.y$=this.xZ(32),this.T$=this.xZ(32),this.W$=this.xZ(32),this.R$=this.xZ(32),this.duration=this.xZ(32)),this.w$=[this.xZ(32),this.xZ(32)],this.e0=this.xZ(16),this.t0=this.xZ(16),this.volume=this.VZ(16),this.r0=this.xZ(16),this.matrix=[];for(var e=0;e<9;e++)this.matrix.push(this.VZ(32));this.width=this.xZ(32),this.height=this.xZ(32)},n.prototype.YZ.trun=function(){this.WZ(),this.i0=this.xZ(32),1&this.zZ&&(this.n0=this.HZ(32)),4&this.zZ&&(this.s0=this.xZ(32)),this.Kx=[];for(var e=0;e<this.i0;e++){var t={};256&this.zZ&&(t.sample_duration=this.xZ(32)),512&this.zZ&&(t.o0=this.xZ(32)),1024&this.zZ&&(t.a0=this.xZ(32)),2048&this.zZ&&(0==this.version?t.h0=this.xZ(32):t.h0=this.HZ(32)),this.Kx.push(t)}},n.prototype.YZ.c0=function(){var e=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ));this.u0=ISOBoxer.rc.PZ(e)},n.prototype.YZ.l0=function(){var e=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ));this.config=ISOBoxer.rc.PZ(e)},n.prototype.YZ.p0=function(){}},function(e,t,r){"use strict";var i=function(){function e(){}return e}();t._x=i},function(e,t,r){"use strict";var i=r(4),n=r(0),s=r(1),o=r(2),a=function(){function e(e,t){this.name=e,this.iv=t}return e}(),h=function(){function e(e,t,r){this.loggerId="[DASH AES Manager] ",this.d0="AES-CBC",this.ll=!1,this.logger=n.Framework&&n.Framework.resolve(n.Framework.V.R)?n.Framework.resolve(n.Framework.V.R).log():console,this.f0=e,this.g0=t,this.logger.debug(this.loggerId+"Starting Dash AES Manager"),r&&(this.E0=r)}return e.prototype.init=function(){var e=this;try{this.v0();var t=i.defer();this.y0().then(function(){return t.resolve(!0)}).fail(function(r){s.ErrorMonitor.ve().logError("Error initializing key",e.loggerId,o.hs.Ur.Dr,r),t.resolve(!1)}),this.T0=t.Ss}catch(e){s.ErrorMonitor.ve().logError("Error initializing AES Manager",this.loggerId,o.hs.Ur.Nr,e)}},e.prototype.NM=function(){return this.T0?this.T0:i.resolve(!1)},e.prototype.y0=function(){var e=this;if(this.m0)return this.m0;var t=i.defer();return this.I0().then(function(r){window.crypto.subtle.importKey("raw",r,{name:e.d0},!1,["decrypt"]).then(function(e){t.resolve(e)},function(e){t.reject("error importing key: "+e.toString())})}).fail(function(e){return t.reject(e)}),this.m0=t.Ss,this.m0},e.prototype.v0=function(){for(var e=2,t=this.g0.length,r=[];e<t;e+=2)r.push(parseInt(this.g0.substr(e,2),16));this.iv=new Uint8Array(r)},e.prototype.decrypt=function(e){var t=this,r=i.defer(),n=new a(this.d0,this.iv);return this.m0.then(function(t){return window.crypto.subtle.decrypt(n,t,e).then(function(e){r.resolve(e)})}).catch(function(e){s.ErrorMonitor.ve().logError("Error decrypting arraybuffer",t.loggerId,o.hs.Ur.Lr,e),t.ll=!0,t.T0=i.resolve(!1),r.reject(e)}),r.Ss},e.prototype.I0=function(){var e=this,t=i.defer(),r=new XMLHttpRequest;return r.responseType="arraybuffer",r.open("GET",this.f0),this.E0&&r.setRequestHeader("Authorization",this.E0),r.onload=function(){if(200===r.status){var i=new Uint8Array(r.response);t.resolve(i)}else s.ErrorMonitor.ve().logError("Error downloading key",e.loggerId,o.hs.Ur.Mr,r.status),t.reject("error downloading key - status: "+r.status)},r.onerror=function(){s.ErrorMonitor.ve().logError("Error downloading key",e.logger,o.hs.Ur.Fr),t.reject("error downloading key")},r.send(),t.Ss},e.prototype.xx=function(){return this.ll},e}();t.qx=h},function(e,t,r){"use strict";var i=r(4),n=function(){function e(){}return e.prototype.init=function(){},e.prototype.NM=function(){return i.resolve(!1)},e.prototype.decrypt=function(e){return i.reject("unsupported")},e.prototype.xx=function(){return!1},e}();t.Gx=n},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(85),s=r(61),o=r(57),a=r(4),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bx=function(e,t){this.manifest=this.mx.parse(t,this.Ix(e))},t.prototype.Ux=function(e){var t=e.substr(0,e.lastIndexOf("="));return t=t.substr(0,t.lastIndexOf("="))},t.prototype.CM=function(e){var t=this,r=a.defer(),i=this.gM(e.eg());if(!i||i.next)return r.resolve(!1),r.Ss;var h=a.defer();if(this.OM)o.DASH.XL?this.OM.NM().then(function(r){r?t.OM.decrypt(e.jf).then(function(e){h.resolve(t.jx(e))}).fail(function(e){return h.reject(!0)}):h.reject(!1)}):h.reject(!1);else try{var c=this.jx(e.jf);h.resolve(c)}catch(e){this.logger.warn("error extracting duration",e),h.reject(!0)}return h.Ss.then(function(e){if(!isNaN(e)){var o=i.id+e;t.logger.debug("found next fragment: "+i.id+" -> "+o+" duration: "+e),t.Sx.forEach(function(t,r){if(t.type===i.type){var a=t.Nx.replace(n.$x.Hx,i.id+""),h=t.Nx.replace(n.$x.Hx,o+""),c=t.kx.get(a);if(!t.kx.has(h)&&c){c.duration=e;var u=new s.DF(o,t.bandwidth,e,h,h);u.type=c.type,c.next=u,t.kx.set(h,u),t.Mx.set(o,u)}}})}r.resolve(!1)}).fail(function(i){t.logger.debug("could not extract duration from "+e.eg()+" [reevaluate: "+i+"]"),r.resolve(i)}),r.Ss},t}(n.$x);t.cM=h},function(e,t,r){"use strict";var i=r(1),n=r(152),s=r(3),o=r(153),a=r(61),h=r(0),c=r(7),u=r(87),l=r(2),p=function(){function e(){this.loggerId="[HLS METADATA] ",this.Aq=new s,this.S0=null,this.logger=(h.Framework.resolve(h.Framework.V.R)||console).log()}return e.prototype.parse=function(e,t){try{var r=new n.R0;if(r.push(t),r.manifest.playlists)this.w0(e,r.manifest);else{var s=this.b0(e,r.manifest);if(s&&s.C0&&(this.live=!s.C0._0),this.live){var o=this.P0(r.manifest,t);return this.logger.debug("HLS manifest trimmed "+o.A0+" segments ("+o.A0+"s) - new segments:["+s.O0.map(function(e){return e.id+":"+e.duration})+"]"),o.N0}}return t}catch(r){return i.ErrorMonitor.ve().logError("Error parsing metadata",this.loggerId,l.hs.yi.Wr,{detailedError:r,url:e}),t}},e.prototype.qM=function(e,t){if(this.Oq.has(t)){return this.Oq.get(t).Mx.get(e)}return null},e.prototype.lM=function(){return this.Aq.values().map(function(e){return e.bitrate})},e.prototype.isLive=function(){return this.live},e.prototype.gM=function(e){return null==this.kx?null:this.kx.get(e)},e.prototype.vM=function(e){try{var t=this.kx.get(e);if(t){var r=t.bitrate;return this.Oq.get(r).Mx.get(t.id+1)}return null}catch(t){return i.ErrorMonitor.ve().logError("Error getting the next segment info",this.loggerId,l.hs.yi.Xr,{detailedError:t,url:e}),null}},e.prototype._q=function(e){return this.Aq.has(e)},e.prototype.Pq=function(){return this.D0},e.prototype.w0=function(e,t){var r=this;this.D0=e,this.k0=t,this.Aq=new s,this.kx=new s,this.Oq=new s,this.k0.playlists.forEach(function(t){var i=c.rc.$h(e,t.uri),n=t.attributes.BANDWIDTH,s=new o.L0(n,t.uri,i);r.Aq.set(i,s),r.Oq.set(n,s)})},e.prototype.b0=function(e,t){var r=this;try{var n=this.Aq.get(e);if(!n)return void i.ErrorMonitor.ve().logError("Playlist url does not match any playlist in the master file",this.loggerId,l.hs.yi.fi,{url:e});var s=null!=t.mediaSequence?t.mediaSequence:0,o=[],h=s-1,u=n.Mx.get(h),p=[];return t.Nq.forEach(function(t){var h=c.rc.$h(e,t.uri),l=Math.round(1e3*t.duration),d=n.bitrate;Number.isInteger(d)||(i.ErrorMonitor.ve().logError("Segment Bitrate is a Float",{bitrate:d}),d=Math.round(d));var f=new a.DF(s,d,l,t.uri,h);r.kx.has(h)||p.push(f),r.kx.set(h,f),n.Mx.set(s,f),o.push(f),u&&(u.next=f),u=f,s++}),this.S0=n,n.update(t.mediaSequence,t.discontinuitySequence,t._0,t.M0,o),{C0:n,O0:p}}catch(e){return i.ErrorMonitor.ve().logError("Error updating the playlist",this.loggerId,l.hs.yi.Ei,e),null}},e.prototype.P0=function(e,t){try{for(var r=t.split("\n"),n=Math.max(1,u.bq.vq),s=null,o=0,a=0,h=e.Nq.length-1;h>n-1&&(s=e.Nq[h],!(o>=u.bq.Eq));h--)a++,o+=s.duration;for(var c="",h=0;h<r.length&&(c=c+r[h]+"\n",r[h].trim()!==s.uri);h++);return this.logger.debug("HLS trimmed "+a+" segments for total duration: "+o),{N0:c,A0:a,F0:o}}catch(e){throw i.ErrorMonitor.ve().logError("Error trimming the playlist",this.loggerId,l.hs.yi.vi,e),new Error(e)}},e}();t.wq=p},function(e,t,r){var i=function(){var e={};e.MT={},e.MT.create=Object.create||function(e){function t(){}return t.prototype=e,new t},e.MT.U0=function(e,t,r){for(var i in e)hasOwnProp.call(e,i)&&t.call(r||this,i,e[i])},e.MT.Py=function(e,t){if(!t)return e;for(var r in t)hasOwnProp.call(t,r)&&(e[r]=t[r]);return e},e.MT.B0=function(t,r){var i,n,s;t=e.MT.cA(t);for(i in r)hasOwnProp.call(r,i)&&(n=t[i],s=r[i],e.MT.H0(n)&&e.MT.H0(s)?t[i]=e.MT.B0(n,s):t[i]=r[i]);return t},e.MT.cA=function(t){return e.MT.Py({},t)},e.MT.H0=function(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object},e.MT.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},mergeOptions=function(t,r){var i,n,s;t=e.MT.cA(t);for(i in r)r.hasOwnProperty(i)&&(n=t[i],s=r[i],e.MT.H0(n)&&e.MT.H0(s)?t[i]=e.util.x0(n,s):t[i]=r[i]);return t},e.x0=mergeOptions;var t=function(){this.init=function(){var e={};this.on=function(t,r){e[t]||(e[t]=[]),e[t].push(r)},this.off=function(t,r){var i;return!!e[t]&&(i=e[t].indexOf(r),e[t].splice(i,1),i>-1)},this.q0=function(t){var r,i,n,s;if(r=e[t])for(s=Array.prototype.slice.call(arguments,1),n=r.length,i=0;i<n;++i)r[i].apply(this,s)},this.G0=function(){e={}}}};t.prototype.V0=function(e){this.on("data",function(t){e.push(t)})},e.j0=t;var r,i,n,s=function(){},o=function(){return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')}(),a=function(e){for(var t,r=e.split(o),i=r.length,n={};i--;)""!==r[i]&&(t=/([^=]*)=(.*)/.exec(r[i]).slice(1),t[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},t=e.j0;return r=function(){var e="";r.prototype.init.call(this),this.push=function(t){var r;for(e+=t,r=e.indexOf("\n");r>-1;r=e.indexOf("\n"))this.q0("data",e.substring(0,r)),e=e.substring(r+1)}},r.prototype=new t,i=function(){i.prototype.init.call(this)},i.prototype=new t,i.prototype.push=function(e){var t,r;if(e=e.replace(/^\s+|\s+$/g,""),0!==e.length){if("#"!==e[0])return void this.q0("data",{type:"uri",uri:e});if(0!==e.indexOf("#EXT"))return void this.q0("data",{type:"comment",text:e.slice(1)});if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))return void this.q0("data",{type:"tag",Q0:"m3u"});if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return r={type:"tag",Q0:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void this.q0("data",r);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",Q0:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.q0("data",r);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",Q0:"totalduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.q0("data",r);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return r={type:"tag",Q0:"version"},t[1]&&(r.version=parseInt(t[1],10)),void this.q0("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",Q0:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.q0("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",Q0:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.q0("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return r={type:"tag",Q0:"playlist-type"},t[1]&&(r.K0=t[1]),void this.q0("data",r);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return r={type:"tag",Q0:"byterange"},t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),void this.q0("data",r);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return r={type:"tag",Q0:"allow-cache"},t[1]&&(r.XD=!/NO/.test(t[1])),void this.q0("data",r);if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e))return r={type:"tag",Q0:"stream-inf"},t[1]&&(r.attributes=a(t[1]),r.attributes.Y0&&function(){var e=r.attributes.Y0.split("x"),t={};e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),r.attributes.Y0=t}(),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["W0"]&&(r.attributes["W0"]=parseInt(r.attributes["W0"],10))),void this.q0("data",r);if(t=/^#EXT-X-ENDLIST/.exec(e))return void this.q0("data",{type:"tag",Q0:"endlist"});if(t=/^#EXT-X-DISCONTINUITY/.exec(e))return void this.q0("data",{type:"tag",Q0:"discontinuity"});if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return r={type:"tag",Q0:"key"},t[1]&&(r.attributes=a(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2)&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.q0("data",r);this.q0("data",{type:"tag",data:e.slice(4,e.length)})}},n=function(){var t,o=this,a=[],h={};n.prototype.init.call(this),this.z0=new r,this.J0=new i,this.z0.V0(this.J0),this.manifest={X0:!0},this.J0.on("data",function(r){({tag:function(){(({"allow-cache":function(){this.manifest.X0=r.XD,"allowed"in r||(this.q0("info",{message:"defaulting allowCache to YES"}),this.manifest.X0=!0)},byterange:function(){var e={};"length"in r&&(h.byterange=e,e.length=r.length,"offset"in r||(this.q0("info",{message:"defaulting offset to zero"}),r.offset=0)),"offset"in r&&(h.byterange=e,e.offset=r.offset)},endlist:function(){this.manifest._0=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.q0("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.q0("info",{message:"defaulting discontinuity sequence to zero"})),r.duration>=0&&(h.duration=r.duration),this.manifest.Nq=a},key:function(){return r.attributes?"NONE"===r.attributes.Z0?void(t=null):r.attributes.lR?(r.attributes.Z0||this.q0("warn",{message:"defaulting key method to AES-128"}),t={method:r.attributes.Z0||"AES-128",uri:r.attributes.lR},void(void 0!==r.attributes.IV&&(t.iv=r.attributes.IV))):void this.q0("warn",{message:"ignoring key declaration without URI"}):void this.q0("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){if(!isFinite(r.number))return void this.q0("warn",{message:"ignoring invalid media sequence: "+r.number});this.manifest.mediaSequence=r.number},"discontinuity-sequence":function(){if(!isFinite(r.number))return void this.q0("warn",{message:"ignoring invalid discontinuity sequence: "+r.number});this.manifest.discontinuitySequence=r.number},"playlist-type":function(){if(!/VOD|EVENT/.test(r.K0))return void this.q0("warn",{message:"ignoring unknown playlist type: "+r.C0});this.manifest.K0=r.K0},"stream-inf":function(){if(this.manifest.playlists=a,!r.attributes)return void this.q0("warn",{message:"ignoring empty stream-inf attributes"});h.attributes||(h.attributes={}),h.attributes=e.x0(h.attributes,r.attributes)},discontinuity:function(){h.discontinuity=!0},targetduration:function(){if(!isFinite(r.duration)||r.duration<0)return void this.q0("warn",{message:"ignoring invalid target duration: "+r.duration});this.manifest.M0=r.duration},totalduration:function(){if(!isFinite(r.duration)||r.duration<0)return void this.q0("warn",{message:"ignoring invalid total duration: "+r.duration});this.manifest.$0=r.duration}})[r.Q0]||s).call(o)},uri:function(){h.uri=r.uri,a.push(h),!this.manifest.M0||"duration"in h||(this.q0("warn",{message:"defaulting segment duration to the target duration"}),h.duration=this.manifest.M0),t&&(h.key=t),h={}},e1:function(){}})[r.type].call(o)})},n.prototype=new t,n.prototype.push=function(e){this.z0.push(e)},n.prototype.end=function(){this.z0.push("\n")},e.t1=r,e.i1=i,e.R0=n,e}();e.i=i},function(e,t,r){"use strict";var i=r(3),n=function(){function e(e,t,r){this.Mx=new i,this.bitrate=e,this.uri=t,this.yM=r}return e.prototype.update=function(e,t,r,i,n){this.mediaSequence=e,this.discontinuitySequence=t,this._0=r,this.M0=i,this.Nq=n,this.updated=!0},e}();t.L0=n},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(84),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n.Tx);t.Sq=s},function(e,t,r){"use strict";var i=r(15),n=r(0),s=r(5),o=r(4),a=r(6),h=r(2),c=r(1),u=a.he.vh,l=function(){function e(){this.loggerId="[CACHE] ",this.logger=n.Framework.resolve(n.Framework.V.R).log(),this.n1=n.Framework.resolve(i.qu.Tu),u&&s.hh.Ra.Ia&&(this.s1=n.Framework.resolve(i.qu.mu))}return e.prototype.init=function(e,t){try{this.n1.init(e,t),u&&s.hh.Ra.Ia&&this.s1.init(e,t)}catch(e){c.ErrorMonitor.ve().logError("Error initializing cache",this.loggerId,h.hs.ht.rt,e)}},e.prototype.put=function(e){var t=this,r=o.defer(),i=!1;try{!e.Wf.isLive()&&u&&s.hh.Ra.Ia?this.s1.put(e).then(function(e){i=e}).fail(function(e){t.logger.error(e)}).finally(function(){r.resolve(i)}):this.n1.put(e).then(function(e){i=e}).fail(function(e){t.logger.error(e)}).finally(function(){r.resolve(i)})}catch(e){c.ErrorMonitor.ve().logError("Error adding new fragment in cache",this.loggerId,h.hs.ht.it,e),r.resolve(i)}return r.Ss},e.prototype.get=function(e){var t=this,r=o.defer(),i=null;try{this.contains(e).then(function(n){n?t.n1.get(e).then(function(r){null==r&&u&&s.hh.Ra.Ia?t.s1.get(e).then(function(e){i=e}):i=r}).fail(function(e){t.logger.error(e)}).finally(function(){r.resolve(i)}):r.resolve(i)}).fail(function(e){t.logger.error(e)}).finally(function(){r.resolve(i)})}catch(e){c.ErrorMonitor.ve().logError("Error getting the fragment from cache",this.loggerId,h.hs.ht.nt,e),r.resolve(i)}return r.Ss},e.prototype.contains=function(e){var t=this,r=o.defer(),i=!1;try{this.n1.contains(e).then(function(r){!i&&u&&s.hh.Ra.Ia?t.s1.contains(e).then(function(e){i=e}):i=r}).fail(function(e){t.logger.error(e)}).finally(function(){r.resolve(i)})}catch(e){c.ErrorMonitor.ve().logError("Error checking if cache contains the fragment",this.loggerId,h.hs.ht.st,e),r.resolve(!1)}return r.Ss},e.prototype.ik=function(e){try{return!e&&u&&s.hh.Ra.Ia?this.s1.ik(e):this.n1.ik(e)}catch(e){return c.ErrorMonitor.ve().logError("Error getting the keys from cache",this.loggerId,h.hs.ht.ot,e),[]}},e.prototype.Vq=function(e){var t=this,r=o.defer(),i=[];try{!e&&u&&s.hh.Ra.Ia?this.s1.Vq(e).then(function(e){i=e}).fail(function(e){t.logger.error(e)}).finally(function(){r.resolve(i)}):this.n1.Vq(e).then(function(e){i=e}).fail(function(e){t.logger.error(e)}).finally(function(){r.resolve(i)})}catch(e){c.ErrorMonitor.ve().logError("Error getting the elements from cache ",this.loggerId,h.hs.ht.at,e),r.resolve(i)}return r.Ss},e.prototype.Qq=function(){this.n1.Qq()},e}();t.Ra=l},function(e,t,r){"use strict";var i=r(3),n=r(24),s=r(7),o=r(5),a=r(0),h=r(9),c=r(1),u=r(2),l=function(){function e(){this.loggerId="[FallbackRequester] ",this.o1=new i,this.Lh=new s.rc.Vh}return e.prototype.init=function(e){this.logger=a.Framework.resolve(a.Framework.V.R).log(e.sessionId),this.a1=e.ED},e.prototype.request=function(e){var t=this,r=a.Framework.resolve(a.Framework.V.H),i=!1,n=e.$f(),l=e.Kf,p=e.eg();e.xhr=r,e.qf.Ff=a.Framework.time(),this.logger.debug("FRL ISSUE REQ FOR FRAGMENT "+e.zf.toString()+"-"+e.qf.Af+" ["+h.vc[e.Xf()]+"] TO FALLBACK "),e.zf.O_()&&(r.responseType="arraybuffer"),this.h1(e.type)&&l.range&&e.Xf()!=h.vc.gc&&r.setRequestHeader("Range","bytes="+l.range),o.hh.K.Na&&this.c1(e.type)&&0!=e.qf.Af&&(this.logger.info("SET RANGE bytes="+e.qf.Af+"-"),r.setRequestHeader("Range","bytes="+e.qf.Af+"-")),l.lU.forEach(function(e){"range"!==e.key.toLowerCase()&&r.setRequestHeader(e.key,e.value)}),l.async&&l.timeout>0&&(r.timeout=l.timeout),l.mimeType&&r.overrideMimeType(l.mimeType),l.withCredentials&&(r.withCredentials=l.withCredentials),r.onloadstart=function(e){var t=s.rc.createEvent(Event,"loadstart",e,l);l.dispatchEvent(t)},r.onabort=function(e){if(!i){var t=s.rc.createEvent(Event,"abort",e,l);l.dispatchEvent(t)}},r.ontimeout=function(r){if(!i){t.error(e,n);var o=s.rc.createEvent(ProgressEvent,"timeout",r,l);l.dispatchEvent(o),c.ErrorMonitor.ve().logError("Error on fallback request because of timeout",t.loggerId,u.hs.Kn.Qn)}},r.onreadystatechange=function(e){if(l&&(r.readyState===XMLHttpRequest.HEADERS_RECEIVED&&(l.responseHeaders=r.getAllResponseHeaders()),r.readyState<XMLHttpRequest.DONE||r.readyState===XMLHttpRequest.DONE&&0===r.status)){l.readyState=r.readyState;var t=s.rc.createEvent(Event,"readystatechange",e,l);l.dispatchEvent(t)}},r.onprogress=function(i){if(!t.c1(e.type)){var n=s.rc.createEvent(ProgressEvent,"progress",i,l);l.dispatchEvent(n),r.total=i.total}e.qf.Df=i.total},r.onload=function(h){if(i=!0,l.status=r.status,h&&0!=h.total&&(e.qf.Df=h.total),e.responseHeaders=r.getAllResponseHeaders(),r.status<200||r.status>299)return t.logger.debug("FRL SERVER RETURNED ERROR CODE "+r.status),void t.error(e,n);e.zf.O_()?t.h1(e.type)?e.jf=r.response:t.c1(e.type)&&(o.hh.K.Na?e.jf=a.Framework.C()?null:s.rc.appendBuffer(e.jf,r.response):e.jf=r.response):e.RM=r.responseText,e.loaded(),t.o1.delete(n),e.qf.Uf=a.Framework.time(),t.u1(e),t.l1(e),t.a1.iZ(e),r=null},r.onerror=function(){i||t.error(e,n)},this.o1.set(n,e),r.open("GET",p,l.async,l.username,l.password),r.send()},e.prototype.error=function(e,t){var r="COULD NOT DOWNLOAD "+e.eg()+" status: "+e.xhr.status;e.type==n.bf.If?this.logger.debug(r):this.logger.warn(r),this.d1(e),this.o1.delete(t),this.a1.eZ(e)},e.prototype.Ys=function(e){return this.o1.has(e)},e.prototype.h1=function(e){return e==n.bf.If||e==n.bf.mf||e==n.bf.Tf},e.prototype.c1=function(e){return e==n.bf.Sf},e.prototype.qX=function(e){var t=this.o1.get(e);this.o1.delete(e),t&&t.xhr&&t.xhr.abort()},e.prototype.l1=function(e){this.logger.info("SUCCESS FROM FALLBACK FOR "+e.eg()+" ["+n.bf[e.type]+"]["+e.qf.Df+"] AFTER "+e.sg()+" [curr:"+e.ag().Gh()+" avg:"+this.Lh.Gh()+"]")},e.prototype.d1=function(e){},e.prototype.WX=function(){return this.Lh},e.prototype.u1=function(e){e.Xf()===h.vc.fc&&this.Lh.Uh(e.ag())},e}();t.RJ=l},function(e,t,r){"use strict";var i=r(4);r(60);var n=r(0),s=r(5),o=r(15),a=r(49),h=r(58),c=r(10),u=r(91),l=hive.services.protocol.IF.CustomerKey,p=r(8),d=r(14),f=r(6),g=r(1),E=r(2),v=f.he.Th,y=function(){function e(){this.f1=isNaN(d.HiveConfig.DebugLogs.TrackerLogs)?0:d.HiveConfig.DebugLogs.TrackerLogs,this.loggerId="[TRACKER] ",this.ZU=0,this.g1=0,this.E1=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{0,4}){5})/,this.v1=!0,this.Ng=n.Framework.resolve(n.Framework.V.F),this.ud=n.Framework.resolve(p.pc.sc),this.yX=n.Framework.resolve(o.qu.Mu)}return e.prototype.init=function(e){this.logger=n.Framework.resolve(n.Framework.V.R).log(e.sessionId),this.sessionId=e.sessionId,this.xJ=e.xJ,this.yD=e.yD,this.zM=e.zM,this.T1=e.mD,this.yX.m1(e.sessionId,this),this.I1=u.Xq.Jq},e.prototype.start=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.context=e,this.streamId=e.dJ.getContextId(),this.ticket=e.dJ.Sk(),this.vl=t},e.prototype.S1=function(e){this.R1=e},e.prototype.uX=function(){var e=this;this.nX(),this.w1=n.Framework.setInterval(function(){e.b1()},s.hh.zo.Yo),this.b1()},e.prototype.nX=function(){this.w1&&n.Framework.clearInterval(this.w1)},e.prototype.C1=function(){var e=this,t=i.defer(),r=new hive.services.protocol.IF.TrackerRequest,n=this.context.dJ,s=n.isLive()?StreamType.LIVE:StreamType.kK;r.sessionId=this.sessionId;var o=new l;return this.R1?(o.partnerId=this.R1.partnerId,o.customerId=this.R1.customerId):d.HiveConfig.ClientInfo.cu&&d.HiveConfig.ClientInfo.uu?(o.partnerId=d.HiveConfig.ClientInfo.cu,o.customerId=d.HiveConfig.ClientInfo.uu):(o.partnerId=this.ticket.up(),o.customerId=this.ticket.cp()),r.customerKey=o,r.streamType=s,r.contentId=this.yD.getContextId(),this.ud.getConnectivityInfo().then(function(t){e._1=t.getNetworkChanged().getPrivateIp(),e.yD.DH(e._1)}).fail(function(t){g.ErrorMonitor.ve().logError("Error getting connectivity info",e.loggerId,E.hs.Li._i)}).finally(function(){try{var i=new hive.snapshots.ConnectivityInfo;i.publicIp=e.IB,i.privateIp=e._1,r.info=e.P1(i,n),r.query=e.A1(n,r.info),t.resolve(r)}catch(r){g.ErrorMonitor.ve().logError("Error collecting the data for the tracker request",e.loggerId,E.hs.Li.Pi,r),t.reject("ERROR")}}).done(),t.Ss},e.prototype.O1=function(){var e=new Array;return this.I1==u.Xq.Jq?e.push(hive.services.protocol.IF.SF.RF):this.I1==u.Xq.AS?e.push(hive.services.protocol.IF.SF.bF):this.I1==u.Xq.nD?e.push(hive.services.protocol.IF.SF.wF):this.logger.warn("Wrong locality mode"),e},e.prototype.A1=function(e,t){var r=this,i=new hive.services.protocol.IF.TrackerQuery;try{return i.random=s.hh.Ja.Ka,t.externalAs&&!this.ZU&&(this.ZU=t.externalAs),t.internalAs&&!this.g1&&(this.g1=t.internalAs),i.rankings=this.O1(),i.asns=[],this.ZU>0&&this.N1(i.asns,hive.services.protocol.IF.CF.External,this.ZU,s.hh.Ja.Ya),this.g1>0&&(this.N1(i.asns,hive.services.protocol.IF.CF._F,this.g1,s.hh.Ja.Wa),i.watchers=[],e.lM().forEach(function(e){var t=r.D1(hive.services.protocol.IF.CF._F,r.g1,e,-1);i.watchers.push({key:t,value:1})}),i.streamers=[],this.yD.Uj().forEach(function(e,t){var n=r.D1(hive.services.protocol.IF.CF._F,r.g1,t,e.type==a.sD.nD?hive.services.protocol.IF.wc.Sc:-1);i.streamers.push({key:n,value:s.hh.Ja.za})})),i}catch(e){throw g.ErrorMonitor.ve().logError("Error preparing tracker query",this.loggerId,E.hs.Li.Ai,e),new Error(e)}},e.prototype.D1=function(e,t,r,i){var n=new hive.services.protocol.IF.TrackerBitrateQuery,s=new hive.services.protocol.IF.TrackerAsQuery;return s.asType=e,s.asn=t,n.bitrate=r,n.asn=s,-1!=i&&n.streamState,n},e.prototype.N1=function(e,t,r,i){var n=new hive.services.protocol.IF.TrackerAsQuery;n.asType=t,n.asn=r,e.push({key:n,value:i})},e.prototype.P1=function(e,t){var r=new hive.services.protocol.IF.TrackerPeerInfo;try{if(n.Framework.C()?r.guid=this.gd:r.guid=btoa(this.gd),r.timestamp=n.Framework.time(),r.nat=void 0,this.yD.Fj()&&(r.externalAs=this.yD.Fj()),this.yD.gk()&&(r.internalAs=this.yD.gk()),null!=e){r.publicIpString=e.publicIp;var i=new InetAddress;i.address=e.publicIp,r.publicIp=i,r.privateIpString=e.privateIp;var s=new InetAddress;s.address=e.privateIp,r.privateIp=s}if(!this.yD.ck()&&this.yD.yk()&&v?r.rankValue=1:r.rankValue=this.yD.L1(),this.context.dJ instanceof h.GM){r.streams=new Array;var o=t.PD();null!=o&&(r.watchingBitrate=o.bitrate);var c=t.JM();this.yD.Uj().forEach(function(e,t){if(e.b_){var i=new hive.services.protocol.IF.TrackerPeerStreamInfo;switch(i.bitrate=t,e.type){case a.sD.mc:i.state=hive.services.protocol.IF.wc.Ic;break;case a.sD.iD:i.state=hive.services.protocol.IF.wc.Rc;break;case a.sD.nD:i.state=hive.services.protocol.IF.wc.Sc}i.delta=c.KD(e.b_.A_(),t),r.streams.push(i)}})}return r}catch(e){throw g.ErrorMonitor.ve().logError("Error preparing tracker info",this.loggerId,E.hs.Li.Ni,e),new Error(e)}},e.prototype.b1=function(){var e=this;this.logger.debug(this.loggerId+" PREPARE REQUEST"),this.C1().then(function(t){var r=e.loggerId+"SENDING TRACKER REQUEST [ privateIp:"+t.info.privateIpString+" rank:"+t.info.rankValue+"]";switch(e.f1){case 0:default:e.logger.debug(r);break;case 1:e.logger.debug(r+" "+JSON.stringify(t));break;case 2:e.logger.debug(r,t);break;case 3:e.logger.debug(r+" "+JSON.stringify(t),t)}e.yX.M1(t)},function(t){g.ErrorMonitor.ve().logError("Error preparing the tracker request",e.loggerId,E.hs.Li.Ci)}).catch(function(t){g.ErrorMonitor.ve().logError("Error sending tracker request",e.loggerId,E.hs.Li.Di,t)})},e.prototype.F1=function(e){this.I1=e},e.prototype.KX=function(e){var t=this;try{switch(this.f1){case 1:this.logger.debug(this.loggerId+this.context.dJ.Sk()+" Tracker Response: "+JSON.stringify(e));break;case 2:this.logger.debug(this.loggerId+this.context.dJ.Sk()+" Tracker Response: ",e);break;case 3:this.logger.debug(this.loggerId+this.context.dJ.Sk()+" Tracker Response: "+JSON.stringify(e),e)}this.ZU=e.peerInfo.externalAs,this.g1=e.peerInfo.internalAs,this.IB=e.peerInfo.publicIpString,this._1=e.peerInfo.privateIpString,this.yD._H(this.IB),this.yD.U1(this.g1),this.yD.B1(this.ZU),this.ud.bH(this.IB,this._1,this.g1),this.logger.debug(this.loggerId+"Reporting from tracker public IP:"+this.IB+" private IP: "+this._1+" ExtAs:"+this.ZU+" inAs:"+this.g1),!this.yD.ck()&&this.yD.yk()&&v?this.T1.MG(!1):this.T1.H1(e.rankings,e.infos);var r=this.q1(e);this.vl.forEach(function(e){return e.gG(r,t.v1)}),this.v1=!1}catch(e){g.ErrorMonitor.ve().logError("Error handling the response",this.loggerId,E.hs.Li.ki,e)}},e.prototype.q1=function(e){for(var t=[],r=0,i=e.infos;r<i.length;r++){var n=i[r],s=new c.bc(c.Tc.yc,n);t.push(s)}return t},e.prototype.KG=function(e){},e.prototype.Ud=function(e){this.gd=e,this.logger.info(this.loggerId+"CONNECTED "+this.gd),this.T1.G1(),this.uX()},e.prototype.ej=function(){},e}();t.bJ=y},function(e,t,r){"use strict";var i=r(3),n=r(0),s=r(7),o=r(1),a=r(2),h=function(){function e(e,t){this.id=e,this.size=t}return e}(),c=function(){function e(){this.loggerId="[ObjectIndex] ",this.V1=new i,this.j1=new i,this.logger=n.Framework.resolve(n.Framework.V.R).log()}return e.prototype.put=function(e,t){try{var r=e.fragmentId,i=e.size;e.bitrate;this.V1.has(r)||(this.V1.set(r,new h(r,i)),this.j1.set(r,new Array)),this.j1.get(r).push(t)}catch(e){throw o.ErrorMonitor.ve().logError("Error adding new have in object index",this.loggerId,a.hs.Xn.zn,e),new Error(e)}},e.prototype.contains=function(e){return this.j1.has(e)},e.prototype.fk=function(e){return this.j1.get(e)},e.prototype.Q1=function(e){return this.V1.get(e)},e.prototype.Gj=function(e){var t=this;try{this.j1.forEach(function(r,i){s.rc.Kh(r,e,!1),0===r.length&&(t.j1.delete(i),t.V1.delete(i))})}catch(e){o.ErrorMonitor.ve().logError("Error removing haves send from a specific peer",this.loggerId,a.hs.Xn.Jn,e)}},e.prototype.Kq=function(){var e=this;this.j1.forEach(function(t,r){e.logger.debug("OBJIDX FR "+r+" PS "+t.map(function(e){return e.wj.yg.otherGuid}).reduce(function(e,t){return e+","+t}))})},e}();t.AJ=c},function(e,t,r){"use strict";var i=r(3),n=r(5),s=r(0),o=r(7),a=r(10),h=r(160),c=r(47),u=r(92),l=r(6),p=r(1),d=r(2),f=l.he.Th,g=function(){function e(){this.loggerId="[Membership] ",this.gd=null,this.K1=new i,this.kj=new i}return e.prototype.init=function(e){this.logger=s.Framework.resolve(s.Framework.V.R).log(e.sessionId),this.TD=e.TD,this.yD=e.yD,this.Y1=e.YM,(f||s.Framework.C()&&c.$N.XN)&&(this.QJ=e.QJ),this.start()},e.prototype.start=function(){this.W1=!0},e.prototype.stop=function(){this.W1=!1},e.prototype.gG=function(e,t){var r=this;try{if(this.W1){var i=[];e.forEach(function(e){var t=null;r.z1(),e.guid!=r.gd&&(e.type==a.Tc.yc?t=r.J1(e):f||s.Framework.C()&&c.$N.XN?(t=r.X1(e),r.QJ.aG(e).then(function(){r.TD.tj(r.kj.get(e.guid))}).fail(function(t){t&&t!=u.JG.EG&&(r.kj.delete(e.guid),p.ErrorMonitor.ve().logError("Error electing lan leader",r.loggerId,d.hs.yt.dt))})):t=r.X1(e)),t&&i.push(t.peerInfo.guid)}),this.SL(),t&&this.TD.hj(t),i.length>0&&this.logger.debug("DISCOVERED NEW "+i.length+"/"+e.length+": ["+i.join(", ")+"]")}}catch(e){p.ErrorMonitor.ve().logError("Error discovering peers",this.loggerId,d.hs.yt.pt,e)}},e.prototype.SL=function(){var e=this.K1.length+this.kj.length;this.Y1.Z1(e)},e.prototype.z1=function(){try{this.K1.length>=n.hh.Qa.Va&&this.e2(this.K1),this.kj.length>=n.hh.Qa.ja&&this.e2(this.kj)}catch(e){p.ErrorMonitor.ve().logError("Error clearing membership views",this.loggerId,d.hs.yt.ft,e)}},e.prototype.e2=function(e){var t=e.keys()[s.Framework.random()*this.K1.length];e.delete(t)},e.prototype.X1=function(e){var t=null;try{if(this.K1.has(e.guid)?(t=this.K1.get(e.guid),this.K1.delete(e.guid),this.kj.set(e.guid,t)):this.kj.has(e.guid)&&(t=this.kj.get(e.guid)),!t)return t=new h.t2(e),this.kj.set(e.guid,t),t;t.S1(e)}catch(e){return p.ErrorMonitor.ve().logError("Error adding peer to lan view",this.loggerId,d.hs.yt.gt,e),null}},e.prototype.J1=function(e){var t=null;try{if(this.kj.has(e.guid))this.X1(e);else{if(!this.K1.has(e.guid))return t=new h.t2(e),this.K1.set(e.guid,t),t;t=this.K1.get(e.guid),t.S1(e)}}catch(e){return p.ErrorMonitor.ve().logError("Error adding peer to random view",this.loggerId,d.hs.yt.Et,e),null}},e.prototype.cj=function(e,t){var r=[];try{return this.W1&&(f||s.Framework.C()&&c.$N.XN?r=o.rc.zh(this.K1.values()):(r=this.K1.values(),this.kj.forEach(function(e,t){r.push(e)}),r=o.rc.zh(r))),e?r:t?r.slice(0,t):r.slice(0,2*n.hh.No._o)}catch(e){return p.ErrorMonitor.ve().logError("Error sampling membership",this.loggerId,d.hs.yt.vt,e),[]}},e.prototype.Oj=function(e){return this.K1.has(e)?this.K1.get(e):this.kj.has(e)?this.kj.get(e):null},e.prototype.Ud=function(e){this.logger.info("MEMBERSHIP SERVER CONNECTED"),this.gd=e,this.yD.setId(this.gd)},e.prototype.ej=function(){},e.prototype.KG=function(e){this.logger.debug("Peer "+e+" disconnected"),this.K1.delete(e),this.kj.delete(e),this.SL()},e}();t.Qa=g},function(e,t,r){"use strict";var i=r(10),n=function(){function e(e){this.peerInfo=e}return e.prototype.Ij=function(){return this.peerInfo.type===i.Tc.W},e.prototype.S1=function(e){this.peerInfo.type==i.Tc.yc&&e.type==i.Tc.W?this.peerInfo.type=i.Tc.W:this.peerInfo.type==i.Tc.yc&&e.type==i.Tc.yc||this.peerInfo.type==i.Tc.W&&e.type==i.Tc.W?this.i2(this.peerInfo,e):this.peerInfo.type==i.Tc.W&&e.type==i.Tc.yc&&(this.i2(this.peerInfo,e),this.peerInfo.type=i.Tc.W)},e.prototype.zj=function(e){this.peerInfo.watchingBitrate=e},e.prototype.i2=function(e,t){e.internalAs=this.n2(e.internalAs,t.internalAs),e.externalAs=this.n2(e.externalAs,t.externalAs),e.nat=this.n2(e.nat,t.nat),e.bandwidth=this.n2(e.bandwidth,t.bandwidth),e.watchingBitrate=this.n2(e.watchingBitrate,t.watchingBitrate),e.privateIpString=this.n2(e.privateIpString,t.privateIpString),e.publicIpString=this.n2(e.publicIpString,t.publicIpString),e.rankValue=this.n2(e.rankValue,t.rankValue),e.timestamp=this.n2(e.timestamp,t.timestamp),t.isLeader&&(e.isLeader=this.n2(e.isLeader,t.isLeader)),t.streams&&(e.streams=t.streams)},e.prototype.n2=function(e,t){return e?t&&e!=t&&(e=t):t&&(e=t),e},e}();t.t2=n},function(e,t,r){(function(e){var i,n,s;/**
 * @license ProtoBuf.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ProtoBuf.js for details
 */
!function(o){"use strict";function a(e){var t={};return t.s2=e,t.q_=e.q_||null,t.VERSION="4.0.0-b3",t.o2={},t.o2.a2=0,t.o2.h2=1,t.o2.c2=2,t.o2.u2=3,t.o2.l2=4,t.o2.d2=5,t.f2=[t.o2.a2,t.o2.h2,t.o2.d2],t.g2={int32:{name:"int32",E2:t.o2.a2,defaultValue:0},uint32:{name:"uint32",E2:t.o2.a2,defaultValue:0},sint32:{name:"sint32",E2:t.o2.a2,defaultValue:0},int64:{name:"int64",E2:t.o2.a2,defaultValue:t.q_?t.q_.ZERO:void 0},uint64:{name:"uint64",E2:t.o2.a2,defaultValue:t.q_?t.q_.tV:void 0},sint64:{name:"sint64",E2:t.o2.a2,defaultValue:t.q_?t.q_.ZERO:void 0},bool:{name:"bool",E2:t.o2.a2,defaultValue:!1},double:{name:"double",E2:t.o2.h2,defaultValue:0},string:{name:"string",E2:t.o2.c2,defaultValue:""},bytes:{name:"bytes",E2:t.o2.c2,defaultValue:null},fixed32:{name:"fixed32",E2:t.o2.d2,defaultValue:0},sfixed32:{name:"sfixed32",E2:t.o2.d2,defaultValue:0},fixed64:{name:"fixed64",E2:t.o2.h2,defaultValue:t.q_?t.q_.tV:void 0},sfixed64:{name:"sfixed64",E2:t.o2.h2,defaultValue:t.q_?t.q_.ZERO:void 0},float:{name:"float",E2:t.o2.d2,defaultValue:0},enum:{name:"enum",E2:t.o2.a2,defaultValue:0},message:{name:"message",E2:t.o2.c2,defaultValue:null},group:{name:"group",E2:t.o2.u2,defaultValue:null}},t.v2=[t.g2.int32,t.g2.sint32,t.g2.sfixed32,t.g2.uint32,t.g2.fixed32,t.g2.int64,t.g2.sint64,t.g2.sfixed64,t.g2.uint64,t.g2.fixed64,t.g2.bool,t.g2.string,t.g2.bytes],t.T2=1,t.m2=536870911,t.I2=!1,t.S2=!0,t.R2=!0,t.bv=function(){Object.create||(Object.create=function(e){function t(){}if(arguments.length>1)throw Error("Object.create polyfill only accepts the first parameter.");return t.prototype=e,new t});var e={};e.w2=!1;try{e.w2="function"==typeof r(16).b2&&"function"==typeof r(64).resolve}catch(e){}return e.C2=function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null,r=0;r<e.length;r++){try{t=e[r]()}catch(e){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},e.fetch=function(t,i){if(i&&"function"!=typeof i&&(i=null),e.w2)if(i)r(16)._2(t,function(e,t){i(e?null:""+t)});else try{return r(16).b2(t)}catch(e){return null}else{var n=e.C2();if(n.open("GET",t,!!i),n.setRequestHeader("Accept","text/plain"),"function"==typeof n.overrideMimeType&&n.overrideMimeType("text/plain"),!i)return n.send(null),200==n.status||0==n.status&&"string"==typeof n.responseText?n.responseText:null;if(n.onreadystatechange=function(){4==n.readyState&&i(200==n.status||0==n.status&&"string"==typeof n.responseText?n.responseText:null)},4==n.readyState)return;n.send(null)}},e.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},e}(),t.Lang={OPEN:"{",P2:"}",A2:"[",O2:"]",N2:",",EQUAL:"=",D2:";",L2:",",M2:'"',F2:'"',U2:"'",B2:"'",H2:"(",q2:")",G2:"<",V2:">",j2:/[\s\{\}=;\[\],'"\(\)<>]/g,Q2:/^(?:required|optional|repeated|map)$/,tN:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,zO:/^[a-zA-Z_][a-zA-Z_0-9]*$/,K2:/^[a-zA-Z][a-zA-Z_0-9]*$/,Y2:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,W2:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,z2:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,J2:/^(?:[1-9][0-9]*|0)$/,X2:/^0[xX][0-9a-fA-F]+$/,Z2:/^0[0-7]+$/,e3:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,t3:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,r3:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,i3:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,BOOL:/^(?:true|false)$/i},t.n3=function(e,t){var r={},i=function(e){this.source=""+e,this.index=0,this.line=1,this.stack=[],this.s3=!1,this.o3=t.F2},n=i.prototype;n.qZ=function(){t.STRING.lastIndex=this.index-1;var e;if(null!==(e=t.STRING.exec(this.source))){var r=void 0!==e[1]?e[1]:e[2];return this.index=t.STRING.lastIndex,this.stack.push(this.o3),r}throw Error("Unterminated string at line "+this.line+", index "+this.index)},n.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(this.s3)return this.s3=!1,this.qZ();var e,r;do{for(e=!1;t.i3.test(r=this.source.charAt(this.index));)if(this.index++,"\n"===r&&this.line++,this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if("/"===this.source.charAt(++this.index)){for(;"\n"!==this.source.charAt(this.index);)if(++this.index==this.source.length)return null;this.index++,this.line++,e=!0}else{if("*"!==this.source.charAt(this.index))throw Error("Unterminated comment at line "+this.line+": /"+this.source.charAt(this.index));for(r="";r+(r=this.source.charAt(this.index))!=="*/";)if(this.index++,"\n"===r&&this.line++,this.index===this.source.length)return null;this.index++,e=!0}}while(e);if(this.index===this.source.length)return null;var i=this.index;if(t.j2.lastIndex=0,t.j2.test(this.source.charAt(i)))++i;else for(++i;i<this.source.length&&!t.j2.test(this.source.charAt(i));)i++;var n=this.source.substring(this.index,this.index=i);return n===t.M2?(this.s3=!0,this.o3=t.F2):n===t.U2&&(this.s3=!0,this.o3=t.B2),n},n.Hk=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},n.toString=function(){return"Tokenizer("+this.index+"/"+this.source.length+" at line "+this.line+")"},r.a3=i;var s=function(e){this.h3=new i(e)},o=s.prototype;return o.parse=function(){for(var e,t={name:"[ROOT]",package:null,messages:[],c3:[],imports:[],options:{},services:[]},r=!0;e=this.h3.next();)switch(e){case"package":if(!r||null!==t.package)throw Error("Unexpected package at line "+this.h3.line);t.package=this.u3(e);break;case"import":if(!r)throw Error("Unexpected import at line "+this.h3.line);t.imports.push(this.l3(e));break;case"message":this.d3(t,null,e),r=!1;break;case"enum":this.f3(t,e),r=!1;break;case"option":this.g3(t,e);break;case"service":this.E3(t,e);break;case"extend":this.v3(t,e);break;case"syntax":t.y3=this.T3(t);break;default:throw Error("Unexpected token at line "+this.h3.line+": "+e)}return delete t.name,t},o.m3=function(e){var r=1;if("-"==e.charAt(0)&&(r=-1,e=e.substring(1)),t.J2.test(e))return r*parseInt(e,10);if(t.X2.test(e))return r*parseInt(e.substring(2),16);if(t.Z2.test(e))return r*parseInt(e.substring(1),8);if(t.e3.test(e))return"inf"===e?r*(1/0):"nan"===e?NaN:r*parseFloat(e);throw Error("Illegal number at line "+this.h3.line+": "+(r<0?"-":"")+e)},o.I3=function(){var e,r,i="";do{if(r=this.h3.next(),i+=this.h3.next(),(e=this.h3.next())!==r)throw Error("Illegal end of string at line "+this.h3.line+": "+e);e=this.h3.Hk()}while(e===t.M2||e===t.U2);return i},o.S3=function(e,r){var i=-1,n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.J2.test(e))i=parseInt(e);else if(t.X2.test(e))i=parseInt(e.substring(2),16);else{if(!t.Z2.test(e))throw Error("Illegal id at line "+this.h3.line+": "+(n<0?"-":"")+e);i=parseInt(e.substring(1),8)}if(i=n*i|0,!r&&i<0)throw Error("Illegal id at line "+this.h3.line+": "+(n<0?"-":"")+e);return i},o.u3=function(e){if(e=this.h3.next(),!t.Y2.test(e))throw Error("Illegal package name at line "+this.h3.line+": "+e);var r=e;if((e=this.h3.next())!=t.D2)throw Error("Illegal end of package at line "+this.h3.line+": "+e);return r},o.l3=function(e){if(e=this.h3.Hk(),"public"===e&&(this.h3.next(),e=this.h3.Hk()),e!==t.M2&&e!==t.U2)throw Error("Illegal start of import at line "+this.h3.line+": "+e);var r=this.I3();if((e=this.h3.next())!==t.D2)throw Error("Illegal end of import at line "+this.h3.line+": "+e);return r},o.g3=function(e,r){r=this.h3.next();var i=!1;if(r==t.H2&&(i=!0,r=this.h3.next()),!t.Y2.test(r)&&!/google\.protobuf\./.test(r))throw Error("Illegal option name in message "+e.name+" at line "+this.h3.line+": "+r);var n=r;if(r=this.h3.next(),i){if(r!==t.q2)throw Error("Illegal end in message "+e.name+", option "+n+" at line "+this.h3.line+": "+r);n="("+n+")",r=this.h3.next(),t.W2.test(r)&&(n+=r,r=this.h3.next())}if(r!==t.EQUAL)throw Error("Illegal operator in message "+e.name+", option "+n+" at line "+this.h3.line+": "+r);var s;if((r=this.h3.Hk())===t.M2||r===t.U2)s=this.I3();else if(this.h3.next(),t.z2.test(r))s=this.m3(r,!0);else if(t.BOOL.test(r))s="true"===r;else{if(!t.Y2.test(r))throw Error("Illegal option value in message "+e.name+", option "+n+" at line "+this.h3.line+": "+r);s=r}if((r=this.h3.next())!==t.D2)throw Error("Illegal end of option in message "+e.name+", option "+n+" at line "+this.h3.line+": "+r);e.options[n]=s},o.R3=function(e,r){for(var i;;){if(null===(i=this.h3.next()))throw Error("Unexpected EOF in "+e.name+", "+r+" at line "+this.h3.line);if(i===t.D2)break}},o.E3=function(e,r){if(r=this.h3.next(),!t.zO.test(r))throw Error("Illegal service name at line "+this.h3.line+": "+r);var i=r,n={name:i,w3:{},options:{}};if((r=this.h3.next())!==t.OPEN)throw Error("Illegal start of service "+i+" at line "+this.h3.line+": "+r);do{if("option"===(r=this.h3.next()))this.g3(n,r);else if("rpc"===r)this.b3(n,r);else if(r!==t.P2)throw Error("Illegal type of service "+i+" at line "+this.h3.line+": "+r)}while(r!==t.P2);e.services.push(n)},o.b3=function(e,r){var i=r;if(r=this.h3.next(),!t.zO.test(r))throw Error("Illegal method name in service "+e.name+" at line "+this.h3.line+": "+r);var n=r,s={request:null,response:null,C3:!1,_3:!1,options:{}};if((r=this.h3.next())!==t.H2)throw Error("Illegal start of request type in service "+e.name+"#"+n+" at line "+this.h3.line+": "+r);if(r=this.h3.next(),"stream"===r.toLowerCase()&&(s.C3=!0,r=this.h3.next()),!t.Y2.test(r))throw Error("Illegal request type in service "+e.name+"#"+n+" at line "+this.h3.line+": "+r);if(s.request=r,(r=this.h3.next())!=t.q2)throw Error("Illegal end of request type in service "+e.name+"#"+n+" at line "+this.h3.line+": "+r);if(r=this.h3.next(),"returns"!==r.toLowerCase())throw Error("Illegal delimiter in service "+e.name+"#"+n+" at line "+this.h3.line+": "+r);if((r=this.h3.next())!=t.H2)throw Error("Illegal start of response type in service "+e.name+"#"+n+" at line "+this.h3.line+": "+r);if(r=this.h3.next(),"stream"===r.toLowerCase()&&(s._3=!0,r=this.h3.next()),s.response=r,(r=this.h3.next())!==t.q2)throw Error("Illegal end of response type in service "+e.name+"#"+n+" at line "+this.h3.line+": "+r);if((r=this.h3.next())===t.OPEN){do{if("option"===(r=this.h3.next()))this.g3(s,r);else if(r!==t.P2)throw Error("Illegal start of option inservice "+e.name+"#"+n+" at line "+this.h3.line+": "+r)}while(r!==t.P2);this.h3.Hk()===t.D2&&this.h3.next()}else if(r!==t.D2)throw Error("Illegal delimiter in service "+e.name+"#"+n+" at line "+this.h3.line+": "+r);void 0===e[i]&&(e[i]={}),e[i][n]=s},o.d3=function(e,r,i){var n={},s="group"===i;if(i=this.h3.next(),!t.zO.test(i))throw Error("Illegal "+(s?"group":"message")+" name"+(e?" in message "+e.name:"")+" at line "+this.h3.line+": "+i);if(n.name=i,s){if((i=this.h3.next())!==t.EQUAL)throw Error("Illegal id assignment after group "+n.name+" at line "+this.h3.line+": "+i);i=this.h3.next();try{r.id=this.S3(i)}catch(e){throw Error("Illegal field id value for group "+n.name+"#"+r.name+" at line "+this.h3.line+": "+i)}n.P3=!0}if(n.fields=[],n.c3=[],n.messages=[],n.options={},n.A3={},i=this.h3.next(),i===t.A2&&r&&(this.O3(n,r,i),i=this.h3.next()),i!==t.OPEN)throw Error("Illegal start of "+(s?"group":"message")+" "+n.name+" at line "+this.h3.line+": "+i);for(;;){if((i=this.h3.next())===t.P2){i=this.h3.Hk(),i===t.D2&&this.h3.next();break}if(t.Q2.test(i))this.N3(n,i);else if("oneof"===i)this.D3(n,i);else if("enum"===i)this.f3(n,i);else if("message"===i)this.d3(n,null,i);else if("option"===i)this.g3(n,i);else if("extensions"===i)n.extensions=this.L3(n,i);else if("extend"===i)this.v3(n,i);else{if(!t.Y2.test(i))throw Error("Illegal token in message "+n.name+" at line "+this.h3.line+": "+i);this.N3(n,"optional",i)}}return e.messages.push(n),n},o.N3=function(e,r,i){var n={},s=null;if(n.rule=r,n.options={},r=void 0!==i?i:this.h3.next(),"map"===n.rule){if(r!==t.G2)throw Error("Illegal token in message "+e.name+" at line "+this.h3.line+": "+r);if(r=this.h3.next(),!t.tN.test(r)&&!t.Y2.test(r))throw Error("Illegal token in message "+e.name+" at line "+this.h3.line+": "+r);if(n.keytype=r,(r=this.h3.next())!==t.L2)throw Error("Illegal token in message "+e.name+" at line "+this.h3.line+": "+r);if(r=this.h3.next(),!t.tN.test(r)&&!t.Y2.test(r))throw Error("Illegal token in message "+e.name+" at line "+this.h3.line+": "+r);if(n.type=r,(r=this.h3.next())!==t.V2)throw Error("Illegal token in message "+e.name+" at line "+this.h3.line+": "+r);if(r=this.h3.next(),!t.zO.test(r))throw Error("Illegal token in message "+e.name+" at line "+this.h3.line+": "+r);if(n.name=r,(r=this.h3.next())!==t.EQUAL)throw Error("Illegal token in field "+e.name+"#"+n.name+" at line "+this.line+": "+r);r=this.h3.next();try{n.id=this.S3(r)}catch(t){throw Error("Illegal field id in message "+e.name+"#"+n.name+" at line "+this.h3.line+": "+r)}if(r=this.h3.next(),r===t.A2&&(this.O3(e,n,r),r=this.h3.next()),r!==t.D2)throw Error("Illegal delimiter in message "+e.name+"#"+n.name+" at line "+this.h3.line+": "+r)}else if("group"===r){if(s=this.d3(e,n,r),!/^[A-Z]/.test(s.name))throw Error("Group names must start with a capital letter");n.type=s.name,n.name=s.name.toLowerCase(),r=this.h3.Hk(),r===t.D2&&this.h3.next()}else{if(!t.tN.test(r)&&!t.Y2.test(r))throw Error("Illegal field type in message "+e.name+" at line "+this.h3.line+": "+r);if(n.type=r,r=this.h3.next(),!t.zO.test(r))throw Error("Illegal field name in message "+e.name+" at line "+this.h3.line+": "+r);if(n.name=r,(r=this.h3.next())!==t.EQUAL)throw Error("Illegal token in field "+e.name+"#"+n.name+" at line "+this.h3.line+": "+r);r=this.h3.next();try{n.id=this.S3(r)}catch(t){throw Error("Illegal field id in message "+e.name+"#"+n.name+" at line "+this.h3.line+": "+r)}if(r=this.h3.next(),r===t.A2&&(this.O3(e,n,r),r=this.h3.next()),r!==t.D2)throw Error("Illegal delimiter in message "+e.name+"#"+n.name+" at line "+this.h3.line+": "+r)}return e.fields.push(n),n},o.D3=function(e,r){if(r=this.h3.next(),!t.zO.test(r))throw Error("Illegal oneof name in message "+e.name+" at line "+this.h3.line+": "+r);var i,n=r,s=[];if((r=this.h3.next())!==t.OPEN)throw Error("Illegal start of oneof "+n+" at line "+this.h3.line+": "+r);for(;this.h3.Hk()!==t.P2;)i=this.N3(e,"optional"),i.M3=n,s.push(i.id);this.h3.next(),e.A3[n]=s},o.O3=function(e,r,i){for(var n=!0;;){if((i=this.h3.next())===t.O2)break;if(i===t.N2){if(n)throw Error("Illegal start of options in message "+e.name+"#"+r.name+" at line "+this.h3.line+": "+i);i=this.h3.next()}this.F3(e,r,i),n=!1}},o.F3=function(e,r,i){var n=!1;if(i===t.H2&&(i=this.h3.next(),n=!0),!t.Y2.test(i))throw Error("Illegal field option in "+e.name+"#"+r.name+" at line "+this.h3.line+": "+i);var s=i;if(i=this.h3.next(),n){if(i!==t.q2)throw Error("Illegal delimiter in "+e.name+"#"+r.name+" at line "+this.h3.line+": "+i);s="("+s+")",i=this.h3.next(),t.W2.test(i)&&(s+=i,i=this.h3.next())}if(i!==t.EQUAL)throw Error("Illegal token in "+e.name+"#"+r.name+" at line "+this.h3.line+": "+i);var o;if((i=this.h3.Hk())===t.M2||i===t.U2)o=this.I3();else if(t.z2.test(i,!0))o=this.m3(this.h3.next(),!0);else if(t.BOOL.test(i))o="true"===this.h3.next().toLowerCase();else{if(!t.Y2.test(i))throw Error("Illegal value in message "+e.name+"#"+r.name+", option "+s+" at line "+this.h3.line+": "+i);o=this.h3.next()}r.options[s]=o},o.f3=function(e,r){var i={};if(r=this.h3.next(),!t.zO.test(r))throw Error("Illegal enum name in message "+e.name+" at line "+this.h3.line+": "+r);if(i.name=r,(r=this.h3.next())!==t.OPEN)throw Error("Illegal start of enum "+i.name+" at line "+this.h3.line+": "+r);for(i.values=[],i.options={};;){if((r=this.h3.next())===t.P2){r=this.h3.Hk(),r===t.D2&&this.h3.next();break}if("option"==r)this.g3(i,r);else{if(!t.zO.test(r))throw Error("Illegal name in enum "+i.name+" at line "+this.h3.line+": "+r);this.U3(i,r)}}e.c3.push(i)},o.U3=function(e,r){var i={};if(i.name=r,(r=this.h3.next())!==t.EQUAL)throw Error("Illegal token in enum "+e.name+" at line "+this.h3.line+": "+r);r=this.h3.next();try{i.id=this.S3(r,!0)}catch(t){throw Error("Illegal id in enum "+e.name+" at line "+this.h3.line+": "+r)}if(e.values.push(i),(r=this.h3.next())===t.A2){var n={options:{}};this.O3(e,n,r),r=this.h3.next()}if(r!==t.D2)throw Error("Illegal delimiter in enum "+e.name+" at line "+this.h3.line+": "+r)},o.L3=function(r,i){var n=[];if(i=this.h3.next(),"min"===i?n.push(e.T2):"max"===i?n.push(e.m2):n.push(this.m3(i)),"to"!==(i=this.h3.next()))throw Error("Illegal extensions delimiter in message "+r.name+" at line "+this.h3.line+": "+i);if(i=this.h3.next(),"min"===i?n.push(e.T2):"max"===i?n.push(e.m2):n.push(this.m3(i)),(i=this.h3.next())!==t.D2)throw Error("Illegal extensions delimiter in message "+r.name+" at line "+this.h3.line+": "+i);return n},o.v3=function(e,r){if(r=this.h3.next(),!t.Y2.test(r))throw Error("Illegal message name at line "+this.h3.line+": "+r);var i={};if(i.B3=r,i.fields=[],(r=this.h3.next())!==t.OPEN)throw Error("Illegal start of extend "+i.name+" at line "+this.h3.line+": "+r);for(;;){if((r=this.h3.next())===t.P2){r=this.h3.Hk(),r==t.D2&&this.h3.next();break}if(t.Q2.test(r))this.N3(i,r);else{if(!t.Y2.test(r))throw Error("Illegal token in extend "+i.name+" at line "+this.h3.line+": "+r);this.N3(i,"optional",r)}}return e.messages.push(i),i},o.T3=function(e){var r=this.h3.next();if(r!==t.EQUAL)throw Error("Illegal token at line "+this.h3.line+": "+r);if((r=this.h3.Hk())!==t.M2&&r!==t.U2)throw Error("Illegal token at line "+this.h3.line+": "+r);var i=this.I3();if((r=this.h3.next())!==t.D2)throw Error("Illegal token at line "+this.h3.line+": "+r);return i},o.toString=function(){return"Parser"},r.R0=s,r}(t,t.Lang),t.H3=function(t){function r(r){if("string"==typeof r&&(r=t.g2[r]),void 0===r.defaultValue)throw Error("default value for type "+r.name+" is not supported");return r==t.g2.bytes?new e(0):r.defaultValue}function i(e,r){if(e&&"number"==typeof e.low&&"number"==typeof e.high&&"boolean"==typeof e.FP&&e.low===e.low&&e.high===e.high)return new t.q_(e.low,e.high,void 0===r?e.FP:r);if("string"==typeof e)return t.q_.kE(e,r||!1,10);if("number"==typeof e)return t.q_.DE(e,r||!1);throw Error("not convertible to Long")}function n(e,r){var i=r.PP(),s=7&i,o=i>>>3;switch(s){case t.o2.a2:do{i=r.Z_()}while(128==(128&i));break;case t.o2.h2:r.offset+=8;break;case t.o2.c2:i=r.PP(),r.offset+=i;break;case t.o2.u2:n(o,r);break;case t.o2.l2:if(o===e)return!1;throw Error("Illegal GROUPEND after unknown group: "+o+" ("+e+" expected)");case t.o2.d2:r.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+e+": "+s)}return!0}var s={},o=function(e,t,r){this.x3=e,this.parent=t,this.name=r,this.className},a=o.prototype;a.q3=function(){for(var e=this.name,t=this;;){if(null==(t=t.parent))break;e=t.name+"."+e}return e},a.toString=function(e){return(e?this.className+" ":"")+this.q3()},a.Xg=function(){throw Error(this.toString(!0)+" cannot be built directly")},s.G3=o;var h=function(e,t,r,i,n){o.call(this,e,t,r),this.className="Namespace",this.children=[],this.options=i||{},this.y3=n||"proto2"},c=h.prototype=Object.create(o.prototype);c.V3=function(e){if(null==(e=e||null))return this.children.slice();for(var t=[],r=0,i=this.children.length;r<i;++r)this.children[r]instanceof e&&t.push(this.children[r]);return t},c.j3=function(e){var t;if(t=this.Q3(e.name))if(t instanceof p.K3&&t.name!==t.Y3&&null===this.Q3(t.Y3))t.name=t.Y3;else{if(!(e instanceof p.K3&&e.name!==e.Y3&&null===this.Q3(e.Y3)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.Y3}this.children.push(e)},c.Q3=function(e){for(var t="number"==typeof e?"id":"name",r=0,i=this.children.length;r<i;++r)if(this.children[r][t]===e)return this.children[r];return null},c.resolve=function(e,t){var r="string"==typeof e?e.split("."):e,i=this,n=0;if(""===r[n]){for(;null!==i.parent;)i=i.parent;n++}var o;do{do{if(!(o=i.Q3(r[n]))||!(o instanceof s.G3)||t&&o instanceof s.Jd.K3){i=null;break}i=o,n++}while(n<r.length);if(null!=i)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=i);return i},c.W3=function(e){var t=[],r=e;do{t.unshift(r.name),r=r.parent}while(null!==r);for(var i=1;i<=t.length;i++){var n=t.slice(t.length-i);if(e===this.resolve(n,!(e instanceof s.Jd.K3)))return n.join(".")}return e.q3()},c.Xg=function(){for(var e,t={},r=this.children,i=0,n=r.length;i<n;++i)(e=r[i])instanceof h&&(t[e.name]=e.Xg());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.z3()}),t},c.z3=function(){for(var e={},t=Object.keys(this.options),r=0,i=t.length;r<i;++r){var n=t[r],s=this.options[t[r]];e[n]=s}return e},c.J3=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},s.X3=h;var u=function(e,r,i,n){if(this.type=e,this.Z3=r,this.e4=i,this.y3=n,i&&t.v2.indexOf(e)<0)throw Error("Invalid map key type: "+e.name)},l=u.prototype;l.t4=r,l.r4=function(r){var n=function(e,t){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+e+" ("+t+")")}.bind(this);switch(this.type){case t.g2.int32:case t.g2.sint32:case t.g2.sfixed32:return("number"!=typeof r||r===r&&r%1!=0)&&n(typeof r,"not an integer"),r>4294967295?0|r:r;case t.g2.uint32:case t.g2.fixed32:return("number"!=typeof r||r===r&&r%1!=0)&&n(typeof r,"not an integer"),r<0?r>>>0:r;case t.g2.int64:case t.g2.sint64:case t.g2.sfixed64:if(t.q_)try{return i(r,!1)}catch(e){n(typeof r,e.message)}else n(typeof r,"requires Long.js");case t.g2.uint64:case t.g2.fixed64:if(t.q_)try{return i(r,!0)}catch(e){n(typeof r,e.message)}else n(typeof r,"requires Long.js");case t.g2.bool:return"boolean"!=typeof r&&n(typeof r,"not a boolean"),r;case t.g2.float:case t.g2.double:return"number"!=typeof r&&n(typeof r,"not a number"),r;case t.g2.string:return"string"==typeof r||r&&r instanceof String||n(typeof r,"not a string"),""+r;case t.g2.bytes:return e.V_(r)?r:e.wrap(r,"base64");case t.g2.enum:var s=this.Z3.V3(t.H3.n4.i4);for(a=0;a<s.length;a++){if(s[a].name==r)return s[a].id;if(s[a].id==r)return s[a].id}if("proto3"===this.y3)return("number"!=typeof r||r===r&&r%1!=0)&&n(typeof r,"not an integer"),(r>4294967295||r<0)&&n(typeof r,"not in range for uint32"),r;n(r,"not a valid enum value");case t.g2.group:case t.g2.message:if(r&&"object"==typeof r||n(typeof r,"object expected"),r instanceof this.Z3.s4)return r;if(r instanceof t.o4.Jd){var o={};for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);r=o}return new this.Z3.s4(r)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+r+" (undefined type "+this.type+")")},l.a4=function(r,i){if(null===i)return 0;var n;switch(this.type){case t.g2.int32:return i<0?e.DP(i):e.RP(i);case t.g2.uint32:return e.RP(i);case t.g2.sint32:return e.RP(e.wP(i));case t.g2.fixed32:case t.g2.sfixed32:case t.g2.float:return 4;case t.g2.int64:case t.g2.uint64:return e.DP(i);case t.g2.sint64:return e.DP(e.MP(i));case t.g2.fixed64:case t.g2.sfixed64:return 8;case t.g2.bool:return 1;case t.g2.enum:return e.RP(i);case t.g2.double:return 8;case t.g2.string:return n=e.tA(i),e.RP(n)+n;case t.g2.bytes:if(i.vA()<0)throw Error("Illegal value for "+this.toString(!0)+": "+i.vA()+" bytes remaining");return e.RP(i.vA())+i.vA();case t.g2.message:return n=this.Z3.h4(i),e.RP(n)+n;case t.g2.group:return(n=this.Z3.h4(i))+e.RP(r<<3|t.o2.l2)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+i+" (unknown type)")},l.c4=function(r,i,n){if(null===i)return n;switch(this.type){case t.g2.int32:i<0?n.GP(i):n.CP(i);break;case t.g2.uint32:n.CP(i);break;case t.g2.sint32:n._P(i);break;case t.g2.fixed32:n.hP(i);break;case t.g2.sfixed32:n.oP(i);break;case t.g2.int64:case t.g2.uint64:n.GP(i);break;case t.g2.sint64:n.VP(i);break;case t.g2.fixed64:n.fP(i);break;case t.g2.sfixed64:n.uP(i);break;case t.g2.bool:"string"==typeof i?n.CP("false"===i.toLowerCase()?0:!!i):n.CP(i?1:0);break;case t.g2.enum:n.CP(i);break;case t.g2.float:n.EP(i);break;case t.g2.double:n.mP(i);break;case t.g2.string:n.sA(i);break;case t.g2.bytes:if(i.vA()<0)throw Error("Illegal value for "+this.toString(!0)+": "+i.vA()+" bytes remaining");var s=i.offset;n.CP(i.vA()),n.append(i),i.offset=s;break;case t.g2.message:var o=(new e).lA();this.Z3.encode(i,o),n.CP(o.offset),n.append(o.xg());break;case t.g2.group:this.Z3.encode(i,n),n.CP(r<<3|t.o2.l2);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+i+" (unknown type)")}return n},l.decode=function(e,r,i){if(r!=this.type.E2)throw Error("Unexpected wire type for element");var n,s;switch(this.type){case t.g2.int32:return 0|e.PP();case t.g2.uint32:return e.PP()>>>0;case t.g2.sint32:return 0|e.OP();case t.g2.fixed32:return e.cP()>>>0;case t.g2.sfixed32:return 0|e.aP();case t.g2.int64:return e.jP();case t.g2.uint64:return e.jP().BP();case t.g2.sint64:return e.QP();case t.g2.fixed64:return e.gP();case t.g2.sfixed64:return e.pP();case t.g2.bool:return!!e.PP();case t.g2.enum:return e.PP();case t.g2.float:return e.TP();case t.g2.double:return e.E_();case t.g2.string:return e.oA();case t.g2.bytes:if(s=e.PP(),e.vA()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+e.vA());return n=e.clone(),n.F_=n.offset+s,e.offset+=s,n;case t.g2.message:return s=e.PP(),this.Z3.decode(e,s);case t.g2.group:return this.Z3.decode(e,-1,i)}throw Error("[INTERNAL] Illegal decode type")},l.u4=function(r){if(!this.e4)throw Error("valueFromString() called on non-map-key element");switch(this.type){case t.g2.int32:case t.g2.sint32:case t.g2.sfixed32:case t.g2.uint32:case t.g2.fixed32:return this.r4(parseInt(r));case t.g2.int64:case t.g2.sint64:case t.g2.sfixed64:case t.g2.uint64:case t.g2.fixed64:return this.r4(r);case t.g2.bool:return"true"===r;case t.g2.string:return this.r4(r);case t.g2.bytes:return e.K_(r)}},l.l4=function(e){if(!this.e4)throw Error("valueToString() called on non-map-key element");return this.type===t.g2.bytes?e.toString("binary"):e.toString()},s.Element=u;var p=function(e,r,i,n,s,o){h.call(this,e,r,i,n,o),this.className="Message",this.extensions=[t.T2,t.m2],this.s4=null,this.P3=!!s,this.d4=null,this.f4=null,this.g4=null},d=p.prototype=Object.create(h.prototype);d.Xg=function(r){if(this.s4&&!r)return this.s4;var i=function(t,r){function i(r,n,s,o,a){var h=void 0;if(null===r||"object"!=typeof r){if(o==t.g2.enum)for(var c=a.V3(t.H3.n4.i4),u=0;u<c.length;u++)if(c[u].id===r){r=c[u].name;break}h=r}else if(r instanceof e)h=n?r.mA():r.yA();else if(t.bv.isArray(r)){var l=r;h=[];for(var p=0;p<l.length;p++)h.push(i(l[p],n,s,o,a))}else if(r instanceof t.Map){var d=r.entries();h={};for(var f=d.next();!f.done;f=d.next())h[r.E4.l4(f.value[0])]=i(f.value[1],n,s,r.v4.type,r.v4.Z3)}else if(r instanceof t.q_)h=s?r.toString():new t.q_(r);else{h={};var g=r.y4,E=void 0;for(var u in r)if(r.hasOwnProperty(u)){var v=r[u];g&&(E=g.Q3(u)),h[u]=i(v,n,s,E.type,E.Z3)}}return h}var n=r.V3(t.H3.Jd.K3),s=r.V3(t.H3.Jd.T4),o=function(i,o){t.o4.Jd.call(this);for(var a=0,h=s.length;a<h;++a)this[s[a].name]=null;for(a=0,h=n.length;a<h;++a){var c=n[a];this[c.name]=c.repeated?[]:c.map?new t.Map(c):null,!c.required&&"proto3"!==r.y3||null===c.defaultValue||(this[c.name]=c.defaultValue)}if(arguments.length>0){var u;if(1!==arguments.length||"object"!=typeof i||"function"==typeof i.encode||t.bv.isArray(i)||i instanceof t.Map||i instanceof e||i instanceof ArrayBuffer||t.q_&&i instanceof t.q_)for(a=0,h=arguments.length;a<h;++a)void 0!==(u=arguments[a])&&this.m4(n[a].name,u);else this.m4(i)}},a=o.prototype=Object.create(t.o4.Jd.prototype);a.add=function(e,i,n){var s=r.g4[e];if(!n){if(!s)throw Error(this+"#"+e+" is undefined");if(!(s instanceof t.H3.Jd.K3))throw Error(this+"#"+e+" is not a field: "+s.toString(!0));if(!s.repeated)throw Error(this+"#"+e+" is not a repeated field")}null===this[s.name]&&(this[s.name]=[]),this[s.name].push(n?i:s.r4(i,!0))},a.I4=a.add,a.set=function(e,i,n){if(e&&"object"==typeof e){n=i;for(var s in e)e.hasOwnProperty(s)&&void 0!==(i=e[s])&&this.m4(s,i,n);return this}var o=r.g4[e];if(n)this[o.name]=i;else{if(!o)throw Error(this+"#"+e+" is not a field: undefined");if(!(o instanceof t.H3.Jd.K3))throw Error(this+"#"+e+" is not a field: "+o.toString(!0));this[o.name]=i=o.r4(i)}return o.M3&&(null!==i?(null!==this[o.M3.name]&&(this[this[o.M3.name]]=null),this[o.M3.name]=o.name):o.M3.name===e&&(this[o.M3.name]=null)),this},a.m4=a.set,a.get=function(e,i){if(i)return this[e];var n=r.g4[e];if(!(n&&n instanceof t.H3.Jd.K3))throw Error(this+"#"+e+" is not a field: undefined");if(!(n instanceof t.H3.Jd.K3))throw Error(this+"#"+e+" is not a field: "+n.toString(!0));return this[n.name]},a.S4=a.get;for(var h=0;h<n.length;h++){var c=n[h];c instanceof t.H3.Jd.R4||r.x3.options.S2&&function(e){var t=e.Y3.replace(/(_[a-zA-Z])/g,function(e){return e.toUpperCase().replace("_","")});t=t.substring(0,1).toUpperCase()+t.substring(1);var i=e.Y3.replace(/([A-Z])/g,function(e){return"_"+e}),n=function(t,r){return this[e.name]=r?t:e.r4(t),this},s=function(){return this[e.name]};null===r.Q3("set"+t)&&(a["set"+t]=n),null===r.Q3("set_"+i)&&(a["set_"+i]=n),null===r.Q3("get"+t)&&(a["get"+t]=s),null===r.Q3("get_"+i)&&(a["get_"+i]=s)}(c)}a.encode=function(t,i){"boolean"==typeof t&&(i=t,t=void 0);var n=!1;t||(t=new e,n=!0);var s=t.U_;try{return r.encode(this,t.lA(),i),(n?t.xg():t).lA(s)}catch(e){throw t.lA(s),e}},a.h4=function(){return r.h4(this)},a.w4=function(t){var i=!1;t||(t=new e,i=!0);var n=(new e).lA();return r.encode(this,n).xg(),t.CP(n.vA()),t.append(n),i?t.xg():t},a.b4=function(){try{return this.encode().tc()}catch(e){throw e.C4&&(e.C4=e.C4.tc()),e}},a.tc=a.b4,a._4=function(){try{return this.encode().yA()}catch(e){throw e.C4&&(e.C4=e.C4.yA()),e}},a.yA=a._4,a.P4=function(){try{return this.encode().mA()}catch(e){throw e.C4&&(e.C4=e.C4.mA()),e}},a.mA=a.P4,a.A4=function(){try{return this.encode().IA()}catch(e){throw e.C4&&(e.C4=e.C4.IA()),e}},a.IA=a.A4,a.O4=function(e,r){return i(this,!!e,!!r,t.g2.message,this.y4)},a.N4=function(){return JSON.stringify(i(this,!0,!0,t.g2.message,this.y4))},o.decode=function(t,i){"string"==typeof t&&(t=e.wrap(t,i||"base64")),t=t instanceof e?t:e.wrap(t);var n=t.U_;try{var s=r.decode(t.lA());return t.lA(n),s}catch(e){throw t.lA(n),e}},o.D4=function(t,i){if("string"==typeof t&&(t=e.wrap(t,i||"base64")),t=t instanceof e?t:e.wrap(t),t.vA()<1)return null;var n=t.offset,s=t.PP();if(t.vA()<s)return t.offset=n,null;try{var o=r.decode(t.slice(t.offset,t.offset+s).lA());return t.offset+=s,o}catch(e){throw t.offset+=s,e}},o.L4=function(e){return o.decode(e,"base64")},o.M4=function(e){return o.decode(e,"hex")},o.F4=function(e){return new o(JSON.parse(e))},a.toString=function(){return r.toString()};return Object.defineProperty&&(Object.defineProperty(o,"$options",{value:r.z3()}),Object.defineProperty(a,"$options",{value:o.U4}),Object.defineProperty(o,"$type",{value:r}),Object.defineProperty(a,"$type",{value:r})),o}(t,this);this.d4=[],this.f4={},this.g4={};for(var n,s=0,o=this.children.length;s<o;s++)if((n=this.children[s])instanceof y)i[n.name]=n.Xg();else if(n instanceof p)i[n.name]=n.Xg();else if(n instanceof p.K3)n.Xg(),this.d4.push(n),this.f4[n.id]=n,this.g4[n.name]=n;else if(!(n instanceof p.T4||n instanceof m))throw Error("Illegal reflect child of "+this.toString(!0)+": "+children[s].toString(!0));return this.s4=i},d.encode=function(e,t,r){for(var i,n,s=null,o=0,a=this.d4.length;o<a;++o)i=this.d4[o],n=e[i.name],i.required&&null===n?null===s&&(s=i):i.encode(r?n:i.r4(n),t);if(null!==s){var h=Error("Missing at least one required field for "+this.toString(!0)+": "+s);throw h.C4=t,h}return t},d.h4=function(e){for(var t,r,i=0,n=0,s=this.d4.length;n<s;++n){if(t=this.d4[n],r=e[t.name],t.required&&null===r)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);i+=t.h4(r)}return i},d.decode=function(e,r,i){r="number"==typeof r?r:-1;for(var s,o,a,h,c=e.offset,u=new this.s4;e.offset<c+r||-1===r&&e.vA()>0;){if(s=e.PP(),o=7&s,a=s>>>3,o===t.o2.l2){if(a!==i)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+a+" ("+(i?i+" expected":"not a group")+")");break}if(h=this.f4[a])if(h.repeated&&!h.options.B4)u[h.name].push(h.decode(o,e));else if(h.map){var l=h.decode(o,e);u[h.name].set(l[0],l[1])}else u[h.name]=h.decode(o,e),h.M3&&(null!==this[h.M3.name]&&(this[this[h.M3.name]]=null),u[h.M3.name]=h.name);else switch(o){case t.o2.a2:e.PP();break;case t.o2.d2:e.offset+=4;break;case t.o2.h2:e.offset+=8;break;case t.o2.c2:var p=e.PP();e.offset+=p;break;case t.o2.u2:for(;n(a,e););break;default:throw Error("Illegal wire type for unknown field "+a+" in "+this.toString(!0)+"#decode: "+o)}}for(var d=0,f=this.d4.length;d<f;++d)if(h=this.d4[d],null===u[h.name]){if(h.required){var g=Error("Missing at least one required field for "+this.toString(!0)+": "+h.name);throw g.H4=u,g}t.R2&&null!==h.defaultValue&&(u[h.name]=h.defaultValue)}return u},s.Jd=p;var f=function(e,t,r,i,n,s,a,h,c,u){o.call(this,e,t,s),this.className="Message.Field",this.required="required"===r,this.repeated="repeated"===r,this.map="map"===r,this.x4=i||null,this.type=n,this.Z3=null,this.id=a,this.options=h||{},this.defaultValue=null,this.M3=c||null,this.y3=u||"proto2",this.Y3=this.name,this.q4=null,this.G4=null,!this.x3.options.I2||this instanceof p.R4||(this.name=f.V4(this.name))};f.V4=function(e){return e.replace(/_([a-zA-Z])/g,function(e,t){return t.toUpperCase()})};var g=f.prototype=Object.create(o.prototype);g.Xg=function(){this.q4=new u(this.type,this.Z3,!1,this.y3),this.map&&(this.G4=new u(this.x4,void 0,!0,this.y3)),this.defaultValue=void 0!==this.options.default?this.r4(this.options.default):null,"proto3"!==this.y3||this.repeated||this.map||(this.defaultValue=this.q4.t4(this.type))},g.r4=function(e,r){r=r||!1;var i=function(e,t){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+e+" ("+t+")")}.bind(this);if(null===e)return this.required&&i(typeof e,"required"),"proto3"===this.y3&&this.type!==t.g2.message&&i(typeof e,"proto3 field without field presence cannot be null"),null;var n;if(this.repeated&&!r){t.bv.isArray(e)||(e=[e]);var s=[];for(n=0;n<e.length;n++)s.push(this.q4.r4(e[n]));return s}return this.map&&!r?e instanceof t.Map?e:(e instanceof Object||i(typeof e,"expected ProtoBuf.Map or raw object for map field"),new t.Map(this,e)):(!this.repeated&&t.bv.isArray(e)&&i(typeof e,"no array expected"),this.q4.r4(e))},g.j4=function(e){if("proto3"!==this.y3)return null!==e;switch(this.type){case t.g2.int32:case t.g2.sint32:case t.g2.sfixed32:case t.g2.uint32:case t.g2.fixed32:return 0!==e;case t.g2.int64:case t.g2.sint64:case t.g2.sfixed64:case t.g2.uint64:case t.g2.fixed64:return 0!==e.low||0!==e.high;case t.g2.bool:return e;case t.g2.float:case t.g2.double:return 0!==e;case t.g2.string:return e.length>0;case t.g2.bytes:return e.vA()>0;case t.g2.enum:return 0!==e;case t.g2.message:return null!==e;default:return!0}},g.encode=function(r,i){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===r||this.repeated&&0==r.length)return i;try{if(this.repeated){var n;if(this.options.B4&&t.f2.indexOf(this.type.E2)>=0){i.CP(this.id<<3|t.o2.c2),i.uA(i.offset+=1);var s=i.offset;for(n=0;n<r.length;n++)this.q4.c4(this.id,r[n],i);var o=i.offset-s,a=e.RP(o);if(a>1){var h=i.slice(s,i.offset);s+=a-1,i.offset=s,i.append(h)}i.CP(o,s-a)}else for(n=0;n<r.length;n++)i.CP(this.id<<3|this.type.E2),this.q4.c4(this.id,r[n],i)}else this.map?r.forEach(function(r,n,s){var o=e.RP(8|this.x4.E2)+this.G4.a4(1,n)+e.RP(16|this.type.E2)+this.q4.a4(2,r);i.CP(this.id<<3|t.o2.c2),i.CP(o),i.CP(8|this.x4.E2),this.G4.c4(1,n,i),i.CP(16|this.type.E2),this.q4.c4(2,r,i)},this):this.j4(r)&&(i.CP(this.id<<3|this.type.E2),this.q4.c4(this.id,r,i))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+r+" ("+e+")")}return i},g.h4=function(r){if(r=this.r4(r),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===r||this.repeated&&0==r.length)return 0;var i=0;try{if(this.repeated){var n,s;if(this.options.B4&&t.f2.indexOf(this.type.E2)>=0){for(i+=e.RP(this.id<<3|t.o2.c2),s=0,n=0;n<r.length;n++)s+=this.q4.a4(this.id,r[n]);i+=e.RP(s),i+=s}else for(n=0;n<r.length;n++)i+=e.RP(this.id<<3|this.type.E2),i+=this.q4.a4(this.id,r[n])}else this.map?r.forEach(function(r,n,s){var o=e.RP(8|this.x4.E2)+this.G4.a4(1,n)+e.RP(16|this.type.E2)+this.q4.a4(2,r);i+=e.RP(this.id<<3|t.o2.c2),i+=e.RP(o),i+=o},this):this.j4(r)&&(i+=e.RP(this.id<<3|this.type.E2),i+=this.q4.a4(this.id,r))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+r+" ("+e+")")}return i},g.decode=function(e,r,i){var n,s;if(!(!this.map&&e==this.type.E2||!i&&this.repeated&&this.options.B4&&e==t.o2.c2||this.map&&e==t.o2.c2))throw Error("Illegal wire type for field "+this.toString(!0)+": "+e+" ("+this.type.E2+" expected)");if(e==t.o2.c2&&this.repeated&&this.options.B4&&t.f2.indexOf(this.type.E2)>=0&&!i){s=r.PP(),s=r.offset+s;for(var o=[];r.offset<s;)o.push(this.decode(this.type.E2,r,!0));return o}if(this.map){var a=this.G4.t4(this.x4);if(n=this.q4.t4(this.type),s=r.PP(),r.vA()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+r.vA());var h=r.clone();for(h.F_=h.offset+s,r.offset+=s;h.vA()>0;){var c=h.PP();e=7&c;var u=c>>>3;if(1===u)a=this.G4.decode(h,e,u);else{if(2!==u)throw Error("Unexpected tag in map field key/value submessage");n=this.q4.decode(h,e,u)}}return[a,n]}return this.q4.decode(r,e,this.id)},s.Jd.K3=f;var E=function(e,t,r,i,n,s,o){f.call(this,e,t,r,null,i,n,s,o),this.Q4};E.prototype=Object.create(f.prototype),s.Jd.R4=E;var v=function(e,t,r){o.call(this,e,t,r),this.fields=[]};s.Jd.T4=v;var y=function(e,t,r,i,n){h.call(this,e,t,r,i,n),this.className="Enum",this.object=null};(y.prototype=Object.create(h.prototype)).Xg=function(){for(var e={},t=this.V3(y.i4),r=0,i=t.length;r<i;++r)e[t[r].name]=t[r].id;return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this.z3()}),this.object=e},s.n4=y;var T=function(e,t,r,i){o.call(this,e,t,r),this.className="Enum.Value",this.id=i};T.prototype=Object.create(o.prototype),s.n4.i4=T;var m=function(e,t,r,i){o.call(this,e,t,r),this.K4=i};m.prototype=Object.create(o.prototype),s.Y4=m;var I=function(e,t,r,i){h.call(this,e,t,r,i),this.className="Service",this.s4=null};(I.prototype=Object.create(h.prototype)).Xg=function(r){return this.s4&&!r?this.s4:this.s4=function(t,r){for(var i=function(e){t.o4.W4.call(this),this.z4=e||function(e,t,r){setTimeout(r.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},n=i.prototype=Object.create(t.o4.W4.prototype),s=r.V3(t.H3.W4.J4),o=0;o<s.length;o++)!function(t){n[t.name]=function(i,n){try{try{i=t.X4.s4.decode(e.wrap(i))}catch(e){if(!(e instanceof TypeError))throw e}if(!(i&&i instanceof t.X4.s4))return void setTimeout(n.bind(this,Error("Illegal request type provided to service method "+r.name+"#"+t.name)),0);this.z4(t.q3(),i,function(e,i){if(e)return void n(e);try{i=t.Z4.s4.decode(i)}catch(e){}if(!(i&&i instanceof t.Z4.s4))return void n(Error("Illegal response type received in service method "+r.name+"#"+t.name));n(null,i)})}catch(e){setTimeout(n.bind(this,e),0)}},i[t.name]=function(e,r,n){new i(e)[t.name](r,n)},Object.defineProperty&&(Object.defineProperty(i[t.name],"$options",{value:t.z3()}),Object.defineProperty(n[t.name],"$options",{value:i[t.name].U4}))}(s[o]);return Object.defineProperty&&(Object.defineProperty(i,"$options",{value:r.z3()}),Object.defineProperty(n,"$options",{value:i.U4}),Object.defineProperty(i,"$type",{value:r}),Object.defineProperty(n,"$type",{value:r})),i}(t,this)},s.W4=I;var S=function(e,t,r,i){o.call(this,e,t,r),this.className="Service.Method",this.options=i||{}};(S.prototype=Object.create(o.prototype)).z3=c.z3,s.W4.e6=S;var R=function(e,t,r,i,n,s,o,a){S.call(this,e,t,r,a),this.className="Service.RPCMethod",this.t6=i,this.r6=n,this.i6=s,this.n6=o,this.X4=null,this.Z4=null};return R.prototype=Object.create(S.prototype),s.W4.J4=R,s}(t),t.o4=function(e,t,i){function n(e,t){t.y3=e,t.messages&&t.messages.forEach(function(t){n(e,t)}),t.c3&&t.c3.forEach(function(t){n(e,t)})}var s=function(e){this.s6=new i.X3(this,null,""),this.o6=this.s6,this.a6=!1,this.result=null,this.files={},this.h6=null,this.options=e||{},this.y3="proto3"===this.options.y3?"proto3":"proto2"},o=s.prototype;return o.reset=function(){this.o6=this.s6},o.c6=function(e){if("string"!=typeof e||!t.Y2.test(e))throw Error("Illegal package: "+e);var r,n,s=e.split(".");for(r=0;r<s.length;r++)if(!t.zO.test(s[r]))throw Error("Illegal package: "+s[r]);for(r=0;r<s.length;r++)n=this.o6.Q3(s[r]),null===n&&this.o6.j3(n=new i.X3(this,this.o6,s[r])),this.o6=n;return this},s.u6=function(r){if("string"!=typeof r.name||!t.zO.test(r.name))return!1;if(void 0!==r.values||void 0!==r.w3)return!1;var i;if(void 0!==r.fields){if(!e.bv.isArray(r.fields))return!1;var n,o=[];for(i=0;i<r.fields.length;i++){if(!s.l6(r.fields[i]))return!1;if(n=parseInt(r.fields[i].id,10),o.indexOf(n)>=0)return!1;o.push(n)}o=null}if(void 0!==r.c3){if(!e.bv.isArray(r.c3))return!1;for(i=0;i<r.c3.length;i++)if(!s.p6(r.c3[i]))return!1}if(void 0!==r.messages){if(!e.bv.isArray(r.messages))return!1;for(i=0;i<r.messages.length;i++)if(!s.u6(r.messages[i])&&!s.d6(r.messages[i]))return!1}if(void 0!==r.extensions&&(!e.bv.isArray(r.extensions)||2!==r.extensions.length||"number"!=typeof r.extensions[0]||"number"!=typeof r.extensions[1]))return!1;if("proto3"===r.y3){for(i=0;i<r.fields.length;i++){var a=r.fields[i];if("required"===a.rule)return!1;if(a.default)return!1;if(a.options)for(var h=Object.keys(a.options),c=0;c<h.length;c++)if("default"===h[c])return!1}if(r.extensions)return!1}return!0},s.l6=function(e){if("string"!=typeof e.rule||"string"!=typeof e.name||"string"!=typeof e.type||void 0===e.id)return!1;if(!(t.Q2.test(e.rule)&&t.zO.test(e.name)&&t.Y2.test(e.type)&&t.t3.test(""+e.id)))return!1;if(void 0!==e.options){if("object"!=typeof e.options)return!1;for(var r,i=Object.keys(e.options),n=0;n<i.length;n++)if("string"!=typeof(r=i[n])||"string"!=typeof e.options[r]&&"number"!=typeof e.options[r]&&"boolean"!=typeof e.options[r])return!1}return!0},s.p6=function(r){if("string"!=typeof r.name||!t.zO.test(r.name))return!1;if(void 0===r.values||!e.bv.isArray(r.values)||0==r.values.length)return!1;for(var i=0;i<r.values.length;i++){if("object"!=typeof r.values[i])return!1;if("string"!=typeof r.values[i].name||void 0===r.values[i].id)return!1;if(!t.zO.test(r.values[i].name)||!t.r3.test(""+r.values[i].id))return!1}return"proto3"!==r.y3||0===r.values[0].id},o.create=function(t){if(!t)return this;if(e.bv.isArray(t)||(t=[t]),0===t.length)return this;var r=[];for(r.push(t);r.length>0;){if(t=r.pop(),!e.bv.isArray(t))throw Error("Not a valid namespace: "+JSON.stringify(t));for(;t.length>0;){var n=t.shift();if(s.u6(n)){var o=new i.Jd(this,this.o6,n.name,n.options,n.P3,n.y3),a={};if(n.A3)for(var h=Object.keys(n.A3),c=0,u=h.length;c<u;++c)o.j3(a[h[c]]=new i.Jd.T4(this,o,h[c]));if(n.fields&&n.fields.length>0)for(c=0,u=n.fields.length;c<u;++c){var l=n.fields[c];if(null!==o.Q3(l.id))throw Error("Duplicate field id in message "+o.name+": "+l.id);if(l.options)for(var p=Object.keys(l.options),d=0,f=p.length;d<f;++d){if("string"!=typeof p[d])throw Error("Illegal field option name in message "+o.name+"#"+l.name+": "+p[d]);if("string"!=typeof l.options[p[d]]&&"number"!=typeof l.options[p[d]]&&"boolean"!=typeof l.options[p[d]])throw Error("Illegal field option value in message "+o.name+"#"+l.name+"#"+p[d]+": "+l.options[p[d]])}var g=null;if("string"==typeof l.M3&&void 0===(g=a[l.M3]))throw Error("Illegal oneof in message "+o.name+"#"+l.name+": "+l.M3);l=new i.Jd.K3(this,o,l.rule,l.keytype,l.type,l.name,l.id,l.options,g,n.y3),g&&g.fields.push(l),o.j3(l)}var E=[];if(void 0!==n.c3&&n.c3.length>0)for(c=0;c<n.c3.length;c++)E.push(n.c3[c]);if(n.messages&&n.messages.length>0)for(c=0;c<n.messages.length;c++)E.push(n.messages[c]);if(n.extensions&&(o.extensions=n.extensions,o.extensions[0]<e.T2&&(o.extensions[0]=e.T2),o.extensions[1]>e.m2&&(o.extensions[1]=e.m2)),this.o6.j3(o),E.length>0){r.push(t),t=E,E=null,this.o6=o,o=null;continue}E=null,o=null}else if(s.p6(n)){for(o=new i.n4(this,this.o6,n.name,n.options,n.y3),c=0;c<n.values.length;c++)o.j3(new i.n4.i4(this,o,n.values[c].name,n.values[c].id));this.o6.j3(o),o=null}else if(s.f6(n)){o=new i.W4(this,this.o6,n.name,n.options);for(c in n.w3)n.w3.hasOwnProperty(c)&&o.j3(new i.W4.J4(this,o,c,n.w3[c].request,n.w3[c].response,n.w3[c].C3,n.w3[c]._3,n.w3[c].options));this.o6.j3(o),o=null}else{if(!s.d6(n))throw Error("Not a valid definition: "+JSON.stringify(n));if(o=this.o6.resolve(n.B3))for(c=0;c<n.fields.length;c++){if(null!==o.Q3(n.fields[c].id))throw Error("Duplicate extended field id in message "+o.name+": "+n.fields[c].id);if(n.fields[c].id<o.extensions[0]||n.fields[c].id>o.extensions[1])throw Error("Illegal extended field id in message "+o.name+": "+n.fields[c].id+" ("+o.extensions.join(" to ")+" expected)");var v=n.fields[c].name;this.options.I2&&(v=i.Jd.K3.V4(n.fields[c].name)),l=new i.Jd.R4(this,o,n.fields[c].rule,n.fields[c].type,this.o6.q3()+"."+v,n.fields[c].id,n.fields[c].options);var y=new i.Y4(this,this.o6,n.fields[c].name,l);l.Q4=y,this.o6.j3(y),o.j3(l)}else if(!/\.?google\.protobuf\./.test(n.B3))throw Error("Extended message "+n.B3+" is not defined")}n=null}t=null,this.o6=this.o6.parent}return this.a6=!1,this.result=null,this},o.g6=function(t,i){if("string"==typeof i){if(e.bv.w2&&(i=r(64).resolve(i)),!0===this.files[i])return this.reset(),this;this.files[i]=!0}else if("object"==typeof i){var s=i.root;e.bv.w2&&(s=r(64).resolve(s));var o=[s,i.E6].join("/");if(!0===this.files[o])return this.reset(),this;this.files[o]=!0}if(t.imports&&t.imports.length>0){var a,h="/",c=!1;"object"==typeof i?(this.h6=i.root,c=!0,a=this.h6,i=i.E6,(a.indexOf("\\")>=0||i.indexOf("\\")>=0)&&(h="\\")):"string"==typeof i?this.h6?a=this.h6:i.indexOf("/")>=0?""===(a=i.replace(/\/[^\/]*$/,""))&&(a="/"):i.indexOf("\\")>=0?(a=i.replace(/\\[^\\]*$/,""),h="\\"):a=".":a=null;for(var u=0;u<t.imports.length;u++)if("string"==typeof t.imports[u]){if(!a)throw Error("Cannot determine import root: File name is unknown");var l=t.imports[u];if(/^google\/protobuf\//.test(l))continue;if(l=a+h+l,!0===this.files[l])continue;/\.proto$/i.test(l)&&!e.n3&&(l=l.replace(/\.proto$/,".json"));var p=e.bv.fetch(l);if(null===p)throw Error("Failed to import '"+l+"' in '"+i+"': File not found");/\.json$/i.test(l)?this.g6(JSON.parse(p+""),l):this.g6(new e.n3.R0(p+"").parse(),l)}else i?/\.(\w+)$/.test(i)?this.g6(t.imports[u],i.replace(/^(.+)\.(\w+)$/,function(e,t,r){return t+"_import"+u+"."+r})):this.g6(t.imports[u],i+"_import"+u):this.g6(t.imports[u]);c&&(this.h6=null)}t.package&&this.c6(t.package),t.y3&&n(t.y3,t);var d=this.o6;return t.options&&Object.keys(t.options).forEach(function(e){d.options[e]=t.options[e]}),t.messages&&(this.create(t.messages),this.o6=d),t.c3&&(this.create(t.c3),this.o6=d),t.services&&(this.create(t.services),this.o6=d),t.v6&&this.create(t.v6),this.reset(),this},s.f6=function(e){return!("string"!=typeof e.name||!t.zO.test(e.name)||"object"!=typeof e.w3)},s.d6=function(r){if("string"!=typeof r.B3||!t.Y2.test(r.B3))return!1;var i;if(void 0!==r.fields){if(!e.bv.isArray(r.fields))return!1;var n,o=[];for(i=0;i<r.fields.length;i++){if(!s.l6(r.fields[i]))return!1;if(n=parseInt(r.id,10),o.indexOf(n)>=0)return!1;o.push(n)}o=null}return!0},o.y6=function(){var r;if(null!=this.o6&&"object"!=typeof this.o6.type){if(this.o6 instanceof i.X3)for(var n=this.o6.children,s=0,o=n.length;s<o;++s)this.o6=n[s],this.y6();else if(this.o6 instanceof i.Jd.K3){if(t.tN.test(this.o6.type))this.o6.type=e.g2[this.o6.type];else{if(!t.Y2.test(this.o6.type))throw Error("Illegal type reference in "+this.o6.toString(!0)+": "+this.o6.type);if(!(r=(this.o6 instanceof i.Jd.R4?this.o6.Q4.parent:this.o6.parent).resolve(this.o6.type,!0)))throw Error("Unresolvable type reference in "+this.o6.toString(!0)+": "+this.o6.type);if(this.o6.Z3=r,r instanceof i.n4){if(this.o6.type=e.g2.enum,"proto3"===this.o6.y3&&"proto3"!==r.y3)throw Error("Proto3 message refers to proto2 enum; this is not allowed due to differing enum semantics in proto3")}else{if(!(r instanceof i.Jd))throw Error("Illegal type reference in "+this.o6.toString(!0)+": "+this.o6.type);this.o6.type=r.P3?e.g2.group:e.g2.message}}if(this.o6.map){if(!t.tN.test(this.o6.x4))throw Error("Illegal key type for map field in "+this.o6.toString(!0)+": "+this.o6.type);this.o6.x4=e.g2[this.o6.x4]}}else if(this.o6 instanceof e.H3.n4.i4);else if(this.o6 instanceof e.H3.W4.e6){if(!(this.o6 instanceof e.H3.W4.J4))throw Error("Illegal service type in "+this.o6.toString(!0));if(!((r=this.o6.parent.resolve(this.o6.t6))&&r instanceof e.H3.Jd))throw Error("Illegal type reference in "+this.o6.toString(!0)+": "+this.o6.t6);if(this.o6.X4=r,!((r=this.o6.parent.resolve(this.o6.r6))&&r instanceof e.H3.Jd))throw Error("Illegal type reference in "+this.o6.toString(!0)+": "+this.o6.r6);this.o6.Z4=r}else if(!(this.o6 instanceof e.H3.Jd.T4||this.o6 instanceof e.H3.Y4))throw Error("Illegal object in namespace: "+typeof this.o6+":"+this.o6);this.reset()}},o.Xg=function(e){if(this.reset(),this.a6||(this.y6(),this.a6=!0,this.result=null),null===this.result&&(this.result=this.s6.Xg()),e){for(var t="string"==typeof e?e.split("."):e,r=this.result,i=0;i<t.length;i++){if(!r[t[i]]){r=null;break}r=r[t[i]]}return r}return this.result},o.T6=function(e){return e?this.s6.resolve(e):this.s6},o.toString=function(){return"Builder"},s.Jd=function(){},s.W4=function(){},s}(t,t.Lang,t.H3),t.Map=function(e){function t(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}var r=function(t,r){if(!t.map)throw Error("field is not a map");if(this.K4=t,this.E4=new e.H3.Element(t.x4,null,!0,t.y3),this.v4=new e.H3.Element(t.type,t.Z3,!1,t.y3),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),r)for(var i=Object.keys(r),n=0;n<i.length;n++){var s=this.E4.u4(i[n]),o=this.v4.r4(r[i[n]]);this.map[this.E4.l4(s)]={key:s,value:o}}},i=r.prototype;return i.clear=function(){this.map={}},i.delete=function(e){var t=this.E4.l4(this.E4.r4(e)),r=t in this.map;return delete this.map[t],r},i.entries=function(){for(var e,r=[],i=Object.keys(this.map),n=0;n<i.length;n++)r.push([(e=this.map[i[n]]).key,e.value]);return t(r)},i.keys=function(){for(var e=[],r=Object.keys(this.map),i=0;i<r.length;i++)e.push(this.map[r[i]].key);return t(e)},i.values=function(){for(var e=[],r=Object.keys(this.map),i=0;i<r.length;i++)e.push(this.map[r[i]].value);return t(e)},i.forEach=function(e,t){for(var r,i=Object.keys(this.map),n=0;n<i.length;n++)e.call(t,(r=this.map[i[n]]).value,r.key,this)},i.set=function(e,t){var r=this.E4.r4(e),i=this.v4.r4(t);return this.map[this.E4.l4(r)]={key:r,value:i},this},i.get=function(e){var t=this.E4.l4(this.E4.r4(e));if(t in this.map)return this.map[t].value},i.has=function(e){return this.E4.l4(this.E4.r4(e))in this.map},r}(t),t.m6=function(e,r,i){return("string"==typeof r||r&&"string"==typeof r.E6&&"string"==typeof r.root)&&(i=r,r=void 0),t.Zg(new t.n3.R0(e).parse(),r,i)},t.I6=t.m6,t.S6=function(e,r,i){if(r&&"object"==typeof r?(i=r,r=null):r&&"function"==typeof r||(r=null),r)return t.bv.fetch("string"==typeof e?e:e.root+"/"+e.E6,function(n){if(null===n)return void r(Error("Failed to fetch file"));try{r(null,t.m6(n,i,e))}catch(e){r(e)}});var n=t.bv.fetch("object"==typeof e?e.root+"/"+e.E6:e);return null===n?null:t.m6(n,i,e)},t.R6=t.S6,t.w6=function(e){return e=e||{},void 0===e.I2&&(e.I2=t.I2),void 0===e.S2&&(e.S2=t.S2),new t.o4(e)},t.Zg=function(e,r,i){return("string"==typeof r||r&&"string"==typeof r.E6&&"string"==typeof r.root)&&(i=r,r=null),r&&"object"==typeof r||(r=t.w6()),"string"==typeof e&&(e=JSON.parse(e)),r.g6(e,i),r.y6(),r},t.b6=function(e,r,i){if(r&&"object"==typeof r?(i=r,r=null):r&&"function"==typeof r||(r=null),r)return t.bv.fetch("string"==typeof e?e:e.root+"/"+e.E6,function(n){if(null===n)return void r(Error("Failed to fetch file"));try{r(null,t.Zg(JSON.parse(n),i,e))}catch(e){r(e)}});var n=t.bv.fetch("object"==typeof e?e.root+"/"+e.E6:e);return null===n?null:t.Zg(JSON.parse(n),i,e)},t}"object"==typeof e&&e&&"object"==typeof t&&t?e.i=a(r(35)):(n=[r(162)],i=a,void 0!==(s="function"==typeof i?i.apply(t,n):i)&&(e.i=s))}()}).call(t,r(63)(e))},function(e,t,r){(function(e){var n,s;/**
 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
 * This version of ByteBuffer.js uses an ArrayBuffer as its backing buffer which is accessed through a DataView and is
 * compatible with modern browsers.
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ByteBuffer.js for details
 */
!function(o){"use strict";function a(e){function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function r(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+a.apply(String,e);e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}var n=function(e,t,r){if(void 0===e&&(e=n.D_),void 0===t&&(t=n.k_),void 0===r&&(r=n.L_),!r){if((e|=0)<0)throw RangeError("Illegal capacity");t=!!t,r=!!r}this.buffer=0===e?o:new ArrayBuffer(e),this.view=0===e?null:new DataView(this.buffer),this.offset=0,this.M_=-1,this.F_=e,this.U_=void 0!==t&&!!t,this.B_=!!r};n.VERSION="3.5.5",n.H_=!0,n.x_=!1,n.D_=16,n.k_=n.x_,n.L_=!1,n.q_=e||null;var s=n.prototype,o=new ArrayBuffer(0),a=String.fromCharCode;n.G_=function(e,t,r){return new n(e,t,r)},n.concat=function(e,t,r,i){"boolean"!=typeof t&&"string"==typeof t||(i=r,r=t,t=void 0);for(var s,o=0,a=0,h=e.length;a<h;++a)n.V_(e[a])||(e[a]=n.wrap(e[a],t)),(s=e[a].F_-e[a].offset)>0&&(o+=s);if(0===o)return new n(0,r,i);var c,u=new n(o,r,i),l=new Uint8Array(u.buffer);for(a=0;a<h;)c=e[a++],(s=c.F_-c.offset)<=0||(l.set(new Uint8Array(c.buffer).subarray(c.offset,c.F_),u.offset),u.offset+=s);return u.F_=u.offset,u.offset=0,u},n.V_=function(e){return!0===(e&&e instanceof n)},n.type=function(){return ArrayBuffer},n.wrap=function(e,t,r,o){if("string"!=typeof t&&(o=r,r=t,t=void 0),"string"==typeof e)switch(void 0===t&&(t="utf8"),t){case"base64":return n.j_(e,r);case"hex":return n.Q_(e,r);case"binary":return n.K_(e,r);case"utf8":return n.Y_(e,r);case"debug":return n.W_(e,r);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var a;if(n.V_(e))return a=s.clone.call(e),a.M_=-1,a;if(e instanceof Uint8Array)a=new n(0,r,o),e.length>0&&(a.buffer=e.buffer,a.offset=e.byteOffset,a.F_=e.byteOffset+e.length,a.view=e.length>0?new DataView(e.buffer):null);else if(e instanceof ArrayBuffer)a=new n(0,r,o),e.byteLength>0&&(a.buffer=e,a.offset=0,a.F_=e.byteLength,a.view=e.byteLength>0?new DataView(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");for(a=new n(e.length,r,o),a.F_=e.length,i=0;i<e.length;++i)a.view.setUint8(i,e[i])}return a},s.z_=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=1,this.view.setInt8(t,e),r&&(this.offset+=1),this},s.jC=s.z_,s.J_=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getInt8(e);return t&&(this.offset+=1),r},s.d_=s.J_,s.X_=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=1,this.view.setUint8(t,e),r&&(this.offset+=1),this},s.Z_=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getUint8(e);return t&&(this.offset+=1),r},s.eP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=2,this.view.setInt16(t,e,this.U_),r&&(this.offset+=2),this},s.tP=s.eP,s.rP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getInt16(e,this.U_);return t&&(this.offset+=2),r},s.iP=s.rP,s.nP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=2,this.view.setUint16(t,e,this.U_),r&&(this.offset+=2),this},s.sP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getUint16(e,this.U_);return t&&(this.offset+=2),r},s.oP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setInt32(t,e,this.U_),r&&(this.offset+=4),this},s.Bg=s.oP,s.aP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getInt32(e,this.U_);return t&&(this.offset+=4),r},s.Qg=s.aP,s.hP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setUint32(t,e,this.U_),r&&(this.offset+=4),this},s.cP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getUint32(e,this.U_);return t&&(this.offset+=4),r},e&&(s.uP=function(t,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"==typeof t)t=e.DE(t);else if("string"==typeof t)t=e.kE(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.DE(t):"string"==typeof t&&(t=e.kE(t)),r+=8;var n=this.buffer.byteLength;return r>n&&this.resize((n*=2)>r?n:r),r-=8,this.U_?(this.view.setInt32(r,t.low,!0),this.view.setInt32(r+4,t.high,!0)):(this.view.setInt32(r,t.high,!1),this.view.setInt32(r+4,t.low,!1)),i&&(this.offset+=8),this},s.lP=s.uP,s.pP=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.U_?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!1):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!1);return r&&(this.offset+=8),i},s.dP=s.pP,s.fP=function(t,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"==typeof t)t=e.DE(t);else if("string"==typeof t)t=e.kE(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.DE(t):"string"==typeof t&&(t=e.kE(t)),r+=8;var n=this.buffer.byteLength;return r>n&&this.resize((n*=2)>r?n:r),r-=8,this.U_?(this.view.setInt32(r,t.low,!0),this.view.setInt32(r+4,t.high,!0)):(this.view.setInt32(r,t.high,!1),this.view.setInt32(r+4,t.low,!1)),i&&(this.offset+=8),this},s.gP=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.U_?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!0):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!0);return r&&(this.offset+=8),i}),s.EP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setFloat32(t,e,this.U_),r&&(this.offset+=4),this},s.vP=s.EP,s.yP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getFloat32(e,this.U_);return t&&(this.offset+=4),r},s.TP=s.yP,s.mP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=8,this.view.setFloat64(t,e,this.U_),r&&(this.offset+=8),this},s.YC=s.mP,s.IP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var r=this.view.getFloat64(e,this.U_);return t&&(this.offset+=8),r},s.E_=s.IP,n.SP=5,n.RP=function(e){return e>>>=0,e<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},n.wP=function(e){return((e|=0)<<1^e>>31)>>>0},n.bP=function(e){return e>>>1^-(1&e)|0},s.CP=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var i,s=n.RP(e);t+=s;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=s,this.view.setUint8(t,i=128|e),e>>>=0,e>=128?(i=e>>7|128,this.view.setUint8(t+1,i),e>=16384?(i=e>>14|128,this.view.setUint8(t+2,i),e>=1<<21?(i=e>>21|128,this.view.setUint8(t+3,i),e>=1<<28?(this.view.setUint8(t+4,e>>28&15),s=5):(this.view.setUint8(t+3,127&i),s=4)):(this.view.setUint8(t+2,127&i),s=3)):(this.view.setUint8(t+1,127&i),s=2)):(this.view.setUint8(t,127&i),s=1),r?(this.offset+=s,this):s},s._P=function(e,t){return this.CP(n.wP(e),t)},s.PP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,i,n=0,s=0;do{if(i=e+n,!this.B_&&i>this.F_){var o=Error("Truncated");throw o.AP=!0,o}r=this.view.getUint8(i),n<5&&(s|=(127&r)<<7*n>>>0),++n}while(128==(128&r));return s|=0,t?(this.offset+=n,s):{value:s,length:n}},s.OP=function(e){var t=this.PP(e);return"object"==typeof t?t.value=n.bP(t.value):t=n.bP(t),t},e&&(n.NP=10,n.DP=function(t){"number"==typeof t?t=e.DE(t):"string"==typeof t&&(t=e.kE(t));var r=t.kP()>>>0,i=t.LP(28).kP()>>>0,n=t.LP(56).kP()>>>0;return 0==n?0==i?r<16384?r<128?1:2:r<1<<21?3:4:i<16384?i<128?5:6:i<1<<21?7:8:n<128?9:10},n.MP=function(t){return"number"==typeof t?t=e.DE(t,!1):"string"==typeof t?t=e.kE(t,!1):!1!==t.FP&&(t=t.UP()),t.shiftLeft(1).pT(t.HP(63)).BP()},n.xP=function(t){return"number"==typeof t?t=e.DE(t,!1):"string"==typeof t?t=e.kE(t,!1):!1!==t.FP&&(t=t.UP()),t.LP(1).pT(t.qP(e.ONE).UP().qE()).UP()},s.GP=function(t,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"==typeof t)t=e.DE(t);else if("string"==typeof t)t=e.kE(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.DE(t,!1):"string"==typeof t?t=e.kE(t,!1):!1!==t.FP&&(t=t.UP());var s=n.DP(t),o=t.kP()>>>0,a=t.LP(28).kP()>>>0,h=t.LP(56).kP()>>>0;r+=s;var c=this.buffer.byteLength;switch(r>c&&this.resize((c*=2)>r?c:r),r-=s,s){case 10:this.view.setUint8(r+9,h>>>7&1);case 9:this.view.setUint8(r+8,9!==s?128|h:127&h);case 8:this.view.setUint8(r+7,8!==s?a>>>21|128:a>>>21&127);case 7:this.view.setUint8(r+6,7!==s?a>>>14|128:a>>>14&127);case 6:this.view.setUint8(r+5,6!==s?a>>>7|128:a>>>7&127);case 5:this.view.setUint8(r+4,5!==s?128|a:127&a);case 4:this.view.setUint8(r+3,4!==s?o>>>21|128:o>>>21&127);case 3:this.view.setUint8(r+2,3!==s?o>>>14|128:o>>>14&127);case 2:this.view.setUint8(r+1,2!==s?o>>>7|128:o>>>7&127);case 1:this.view.setUint8(r,1!==s?128|o:127&o)}return i?(this.offset+=s,this):s},s.VP=function(e,t){return this.GP(n.MP(e),t)},s.jP=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=t,n=0,s=0,o=0,a=0;if(a=this.view.getUint8(t++),n=127&a,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<7,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<14,128&a&&(a=this.view.getUint8(t++),n|=(127&a)<<21,128&a&&(a=this.view.getUint8(t++),s=127&a,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<7,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<14,128&a&&(a=this.view.getUint8(t++),s|=(127&a)<<21,128&a&&(a=this.view.getUint8(t++),o=127&a,128&a&&(a=this.view.getUint8(t++),o|=(127&a)<<7,128&a))))))))))throw Error("Buffer overrun");var h=e.qI(n|s<<28,s>>>4|o<<24,!1);return r?(this.offset=t,h):{value:h,length:t-i}},s.QP=function(t){var r=this.jP(t);return r&&r.value instanceof e?r.value=n.xP(r.value):r=n.xP(r),r}),s.Hg=function(e,r){var i=void 0===r;i&&(r=this.offset);var n,s=e.length;if(!this.B_){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(n=0;n<s;++n)if(0===e.charCodeAt(n))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}s=c.KP(t(e))[1],r+=s+1;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=s+1,c.YP(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),this.view.setUint8(r++,0),i?(this.offset=r,this):s},s.Yg=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,n=e,s=-1;return c.WP(function(){if(0===s)return null;if(e>=this.F_)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.F_);return 0===(s=this.view.getUint8(e++))?null:s}.bind(this),i=r(),!0),t?(this.offset=e,i()):{string:i(),length:e-n}},s.zP=function(e,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var n,s=r;n=c.KP(t(e),this.B_)[1],r+=4+n;var o=this.buffer.byteLength;if(r>o&&this.resize((o*=2)>r?o:r),r-=4+n,this.view.setUint32(r,n,this.U_),r+=4,c.YP(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),r!==s+4+n)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+4+n));return i?(this.offset=r,this):r-s},s.JP=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i,n=0,s=e;n=this.view.getUint32(e,this.U_),e+=4;var o,a=e+n;return c.WP(function(){return e<a?this.view.getUint8(e++):null}.bind(this),o=r(),this.B_),i=o(),t?(this.offset=e,i):{string:i,length:e-s}},n.XP="c",n.ZP="b",s.$P=function(e,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var n,s=r;n=c.KP(t(e))[1],r+=n;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=n,c.YP(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),i?(this.offset=r,this):r-s},s.qb=s.$P,n.eA=function(e){return c.KP(t(e))[0]},n.tA=function(e){return c.KP(t(e))[1]},s.rA=function(e,t,i){"number"==typeof t&&(i=t,t=void 0);var s=void 0===i;if(s&&(i=this.offset),void 0===t&&(t=n.XP),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,a=0,h=i;if(t===n.XP){if(o=r(),c.iA(function(){return a<e&&i<this.F_?this.view.getUint8(i++):null}.bind(this),function(e){++a,c.nA(e,o)}.bind(this)),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return s?(this.offset=i,o()):{string:o(),length:i-h}}if(t===n.ZP){if(!this.B_){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+e+") <= "+this.buffer.byteLength)}var u=i+e;if(c.WP(function(){return i<u?this.view.getUint8(i++):null}.bind(this),o=r(),this.B_),i!==u)throw RangeError("Illegal range: Truncated data, "+i+" == "+u);return s?(this.offset=i,o()):{string:o(),length:i-h}}throw TypeError("Unsupported metrics: "+t)},s.Lb=s.rA,s.sA=function(e,r){var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var s,o,a=r;s=c.KP(t(e),this.B_)[1],o=n.RP(s),r+=o+s;var h=this.buffer.byteLength;if(r>h&&this.resize((h*=2)>r?h:r),r-=o+s,r+=this.CP(s,r),c.YP(t(e),function(e){this.view.setUint8(r++,e)}.bind(this)),r!==a+s+o)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+s+o));return i?(this.offset=r,this):r-a},s.oA=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,n=this.PP(e),s=e;e+=n.length,n=n.value;var o=e+n,a=r();return c.WP(function(){return e<o?this.view.getUint8(e++):null}.bind(this),a,this.B_),i=a(),t?(this.offset=e,i):{string:i,length:e-s}},s.append=function(e,t,r){"number"!=typeof t&&"string"==typeof t||(r=t,t=void 0);var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof n||(e=n.wrap(e,t));var s=e.F_-e.offset;if(s<=0)return this;r+=s;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=s,new Uint8Array(this.buffer,r).set(new Uint8Array(e.buffer).subarray(e.offset,e.F_)),e.offset+=s,i&&(this.offset+=s),this},s.aA=function(e,t){return e.append(this,t),this},s.assert=function(e){return this.B_=!e,this},s.hA=function(){return this.buffer.byteLength},s.clear=function(){return this.offset=0,this.F_=this.buffer.byteLength,this.M_=-1,this},s.clone=function(e){var t=new n(0,this.U_,this.B_);if(e){var r=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(r).set(this.buffer),t.buffer=r,t.view=new DataView(r)}else t.buffer=this.buffer,t.view=this.view;return t.offset=this.offset,t.M_=this.M_,t.F_=this.F_,t},s.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var r=t-e;if(0===r)return this.buffer=o,this.view=null,this.M_>=0&&(this.M_-=e),this.offset=0,this.F_=0,this;var i=new ArrayBuffer(r);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(e,t)),this.buffer=i,this.view=new DataView(i),this.M_>=0&&(this.M_-=e),this.offset=0,this.F_=r,this},s.cA=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return new n(0,this.U_,this.B_);var r=t-e,i=new n(r,this.U_,this.B_);return i.offset=0,i.F_=r,i.M_>=0&&(i.M_-=e),this.jE(i,0,e,t),i},s.jE=function(e,t,r,i){var s,o;if(!this.B_&&!n.V_(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(o=void 0===t)?e.offset:0|t,r=(s=void 0===r)?this.offset:0|r,i=void 0===i?this.F_:0|i,t<0||t>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.byteLength);if(r<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var a=i-r;return 0===a?e:(e.uA(t+a),new Uint8Array(e.buffer).set(new Uint8Array(this.buffer).subarray(r,i),t),s&&(this.offset+=a),o&&(e.offset+=a),this)},s.uA=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},s.fill=function(e,t,r){var i=void 0===t;if(i&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===r&&(r=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(t>=r)return this;for(;t<r;)this.view.setUint8(t++,e);return i&&(this.offset=t),this},s.xg=function(){return this.F_=this.offset,this.offset=0,this},s.mark=function(e){if(e=void 0===e?this.offset:e,!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.M_=e,this},s.order=function(e){if(!this.B_&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.U_=!!e,this},s.lA=function(e){return this.U_=void 0===e||!!e,this},s.pA=function(e){return this.U_=void 0!==e&&!e,this},s.dA=function(e,t,r){"number"!=typeof t&&"string"==typeof t||(r=t,t=void 0);var i=void 0===r;if(i&&(r=this.offset),!this.B_){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof n||(e=n.wrap(e,t));var s=e.F_-e.offset;if(s<=0)return this;var o,a=s-r;if(a>0){var h=new ArrayBuffer(this.buffer.byteLength+a);o=new Uint8Array(h),o.set(new Uint8Array(this.buffer).subarray(r,this.buffer.byteLength),s),this.buffer=h,this.view=new DataView(h),this.offset+=a,this.M_>=0&&(this.M_+=a),this.F_+=a,r+=a}else o=new Uint8Array(this.buffer);return o.set(new Uint8Array(e.buffer).subarray(e.offset,e.F_),r-s),e.offset=e.F_,i&&(this.offset-=s),this},s.fA=function(e,t){return e.dA(this,t),this},s.gA=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.EA(!0))},s.vA=function(){return this.F_-this.offset},s.reset=function(){return this.M_>=0?(this.offset=this.M_,this.M_=-1):this.offset=0,this},s.resize=function(e){if(!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t,this.view=new DataView(t)}return this},s.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(e,t)),this.view=new DataView(this.buffer),this)},s.Mb=function(e){if(!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.B_&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},s.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r=this.clone();return r.offset=e,r.F_=t,r},s.yA=function(e){var t=this.offset,r=this.F_;if(t>r){var i=t;t=r,r=i}if(!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal limit: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(!e&&0===t&&r===this.buffer.byteLength)return this.buffer;if(t===r)return o;var n=new ArrayBuffer(r-t);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t,r),0),n},s.tc=s.yA,s.toString=function(e,t,r){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.M_+",limit="+this.F_+",capacity="+this.hA()+")";switch("number"==typeof e&&(e="utf8",t=e,r=t),e){case"utf8":return this.TA(t,r);case"base64":return this.mA(t,r);case"hex":return this.IA(t,r);case"binary":return this.SA(t,r);case"debug":return this.EA();case"columns":return this.RA();default:throw Error("Unsupported encoding: "+e)}};var h=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[],i=0,n=t.length;i<n;++i)r[t[i]]=i;return e.encode=function(e,r){for(var i,n;null!==(i=e());)r(t[i>>2&63]),n=(3&i)<<4,null!==(i=e())?(n|=i>>4&15,r(t[63&(n|i>>4&15)]),n=(15&i)<<2,null!==(i=e())?(r(t[63&(n|i>>6&3)]),r(t[63&i])):(r(t[63&n]),r(61))):(r(t[63&n]),r(61),r(61))},e.decode=function(e,t){function i(e){throw Error("Illegal character code: "+e)}for(var n,s,o;null!==(n=e());)if(s=r[n],void 0===s&&i(n),null!==(n=e())&&(o=r[n],void 0===o&&i(n),t(s<<2>>>0|(48&o)>>4),null!==(n=e()))){if(void 0===(s=r[n])){if(61===n)break;i(n)}if(t((15&o)<<4>>>0|(60&s)>>2),null!==(n=e())){if(void 0===(o=r[n])){if(61===n)break;i(n)}t((3&s)<<6>>>0|o)}}},e.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)},e}();s.mA=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;return h.encode(function(){return e<t?this.view.getUint8(e++):null}.bind(this),i=r()),i()},n.j_=function(e,r,i){if(!i){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%4!=0)throw TypeError("Illegal str: Length not a multiple of 4")}var s=new n(e.length/4*3,r,i),o=0;return h.decode(t(e),function(e){s.view.setUint8(o++,e)}),s.F_=o,s},n.btoa=function(e){return n.K_(e).mA()},n.atob=function(e){return n.j_(e).SA()},s.SA=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.F_:t,!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return"";for(var r=[],i=[];e<t;)r.push(this.view.getUint8(e++)),r.length>=1024&&(i.push(String.fromCharCode.apply(String,r)),r=[]);return i.join("")+String.fromCharCode.apply(String,r)},n.K_=function(e,t,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");for(var i,s=0,o=e.length,a=new n(o,t,r);s<o;){if(i=e.charCodeAt(s),!r&&i>255)throw RangeError("Illegal charCode at "+s+": 0 <= "+i+" <= 255");a.view.setUint8(s++,i)}return a.F_=o,a},s.EA=function(e){for(var t,r=-1,i=this.buffer.byteLength,n="",s="",o="";r<i;){if(-1!==r&&(t=this.view.getUint8(r),n+=t<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(s+=t>32&&t<127?String.fromCharCode(t):".")),++r,e&&r>0&&r%16==0&&r!==i){for(;n.length<51;)n+=" ";o+=n+s+"\n",n=s=""}r===this.offset&&r===this.F_?n+=r===this.M_?"!":"|":r===this.offset?n+=r===this.M_?"[":"<":r===this.F_?n+=r===this.M_?"]":">":n+=r===this.M_?"'":e||0!==r&&r!==i?" ":""}if(e&&" "!==n){for(;n.length<51;)n+=" ";o+=n+s+"\n"}return e?o:n},n.W_=function(e,t,r){for(var i,s,o=e.length,a=new n((o+1)/3|0,t,r),h=0,c=0,u=!1,l=!1,p=!1,d=!1,f=!1;h<o;){switch(i=e.charAt(h++)){case"!":if(!r){if(l||p||d){f=!0;break}l=p=d=!0}a.offset=a.M_=a.F_=c,u=!1;break;case"|":if(!r){if(l||d){f=!0;break}l=d=!0}a.offset=a.F_=c,u=!1;break;case"[":if(!r){if(l||p){f=!0;break}l=p=!0}a.offset=a.M_=c,u=!1;break;case"<":if(!r){if(l){f=!0;break}l=!0}a.offset=c,u=!1;break;case"]":if(!r){if(d||p){f=!0;break}d=p=!0}a.F_=a.M_=c,u=!1;break;case">":if(!r){if(d){f=!0;break}d=!0}a.F_=c,u=!1;break;case"'":if(!r){if(p){f=!0;break}p=!0}a.M_=c,u=!1;break;case" ":u=!1;break;default:if(!r&&u){f=!0;break}if(s=parseInt(i+e.charAt(h++),16),!r&&(isNaN(s)||s<0||s>255))throw TypeError("Illegal str: Not a debug encoded string");a.view.setUint8(c++,s),u=!0}if(f)throw TypeError("Illegal str: Invalid symbol at "+h)}if(!r){if(!l||!d)throw TypeError("Illegal str: Missing offset or limit");if(c<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+c+" < "+o)}return a},s.IA=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.F_:t,!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var r,i=new Array(t-e);e<t;)r=this.view.getUint8(e++),r<16?i.push("0",r.toString(16)):i.push(r.toString(16));return i.join("")},n.Q_=function(e,t,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,s=e.length,o=new n(s/2|0,t),a=0,h=0;a<s;a+=2){if(i=parseInt(e.substring(a,a+2),16),!r&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");o.view.setUint8(h++,i)}return o.F_=h,o};var c=function(){var e={};return e.wA=1114111,e.bA=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<128?t(127&r):r<2048?(t(r>>6&31|192),t(63&r|128)):r<65536?(t(r>>12&15|224),t(r>>6&63|128),t(63&r|128)):(t(r>>18&7|240),t(r>>12&63|128),t(r>>6&63|128),t(63&r|128)),r=null},e.iA=function(e,t){for(var r,i,n,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(r=e());)if(0==(128&r))t(r);else if(192==(224&r))null===(i=e())&&o([r,i]),t((31&r)<<6|63&i);else if(224==(240&r))(null===(i=e())||null===(n=e()))&&o([r,i,n]),t((15&r)<<12|(63&i)<<6|63&n);else{if(240!=(248&r))throw RangeError("Illegal starting byte: "+r);(null===(i=e())||null===(n=e())||null===(s=e()))&&o([r,i,n,s]),t((7&r)<<18|(63&i)<<12|(63&n)<<6|63&s)}},e.CA=function(e,t){for(var r,i=null;;){if(null===(r=null!==i?i:e()))break;r>=55296&&r<=57343&&null!==(i=e())&&i>=56320&&i<=57343?(t(1024*(r-55296)+i-56320+65536),i=null):t(r)}null!==i&&t(i)},e.nA=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<=65535?t(r):(r-=65536,t(55296+(r>>10)),t(r%1024+56320)),r=null},e.YP=function(t,r){e.CA(t,function(t){e.bA(t,r)})},e.WP=function(t,r){e.iA(t,function(t){e.nA(t,r)})},e._A=function(e){return e<128?1:e<2048?2:e<65536?3:4},e.PA=function(t){for(var r,i=0;null!==(r=t());)i+=e._A(r);return i},e.KP=function(t){var r=0,i=0;return e.CA(t,function(t){++r,i+=e._A(t)}),[r,i]},e}();return s.TA=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.F_),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;try{c.WP(function(){return e<t?this.view.getUint8(e++):null}.bind(this),i=r())}catch(r){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return i()},n.Y_=function(e,r,i){if(!i&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var s=new n(c.KP(t(e),!0)[1],r,i),o=0;return c.YP(t(e),function(e){s.view.setUint8(o++,e)}),s.F_=o,s},n}"object"==typeof e&&e&&"object"==typeof t&&t?e.i=function(){var e;try{e=r(93)}catch(e){}return a(e)}():(n=[r(94)],void 0!==(s=function(e){return a(e)}.apply(t,n))&&(e.i=s))}()}).call(t,r(63)(e))},function(e,t,r){"use strict";var i=r(4),n=r(0),s=r(25),o=r(47),a=r(164),h=r(6),c=r(1),u=r(2),l=h.he.Rh,p=h.he.Th,d=function(){function e(e,t,r,i){this.loggerId="[P2PDispatcher] ",this.logger=n.Framework.resolve(n.Framework.V.R).log(e.sessionId),this.Sg=t,this.otherGuid=r,this.swarmId=e.swarmId,this.yg=i,this.receiver=new a.C6(t,r,e),this.sender=new a._6(t,r,e,this),this.vD=e.vD,this.TD=e.TD,this.qJ=e.qJ,(p||n.Framework.C()&&o.$N.XN)&&(this.QJ=e.QJ)}return e.prototype.Dg=function(){return this.sender.Dg()||this.receiver.Dg()},e.prototype.close=function(){var e=this,t=i.defer();return this.sender.P6().then(function(r){return e.receiver.close(r).then(function(r){return e.Rj(r).then(function(r){return e.yg.close(r).then(function(e){t.resolve(e)})})})}).catch(function(r){c.ErrorMonitor.ve().logError("Error closing connection to peer",e.loggerId,u.hs.We.qe,{detailedError:r,otherGuid:e.otherGuid}),t.reject("Close partnership failed")}),t.Ss},e.prototype.Rj=function(e){this.logger.debug("SEND CLOSE TO "+this.otherGuid);var t=new s.Rf.Fa.Jg.Close;return t.setType(e),this.Lg(s.Rf.Eg.Close,t),i(this.swarmId)},e.prototype.As=function(e){try{switch(l&&this.logger.debug("DISPATCH "+e.msgId),e.msgId){case s.Rf.Eg.Chunk:var t=s.Rf.Fa.Jg.Chunk.decode(e.Wg);this.receiver.A6(t);break;case s.Rf.Eg.Ack:var r=s.Rf.Fa.Jg.Ack.decode(e.Wg);this.sender.O6(r.transferId);break;case s.Rf.Eg.Cancel:var i=s.Rf.Fa.Jg.Cancel.decode(e.Wg);this.sender.N6(i.transferId);break;case s.Rf.Eg.lg:l&&this.logger.debug("RECEIVED OUT PART,DECODING ");var n=s.Rf.Fa.Jg.OutPartnershipRequest.decode(e.Wg);l&&this.logger.debug("RECEIVED OUT PART FROM "+n.guid),this.TD.Cj(n,this.yg);break;case s.Rf.Eg.pg:l&&this.logger.debug("RECEIVED OUT PART RESP ");var o=s.Rf.Fa.Jg.OutPartnershipResponse.decode(e.Wg);l&&this.logger.debug("RECEIVED OUT PART RESP FROM "+o.accept),this.TD.Qj(o,this.yg);break;case s.Rf.Eg.Have:var a=s.Rf.Fa.Jg.Have.decode(e.Wg);l&&this.logger.debug("RECEIVED HAVE FOR "+a.fragmentId+" FROM "+this.otherGuid),this.TD.D6(this.otherGuid,a);break;case s.Rf.Eg.Close:var h=s.Rf.Fa.Jg.Close.decode(e.Wg);l&&this.logger.debug("RECEIVED CLOSE FROM "+this.otherGuid),this.TD.Vj(this.otherGuid,h);break;case s.Rf.Eg.Request:var p=s.Rf.Fa.Jg.Request.decode(e.Wg);l&&this.logger.debug("RECEIVED REQUEST FOR "+p.fragmentId+" FROM "+this.otherGuid),this.qJ.PM(this.otherGuid,p,this);break;case s.Rf.Eg.DoNotHave:var d=s.Rf.Fa.Jg.DoNotHave.decode(e.Wg);l&&this.logger.debug("DoNotHave "+d.transferId),this.vD.k6(d);break;case s.Rf.Eg.dg:var f=s.Rf.Fa.Jg.UDPHandshakeMessage.decode(e.Wg);l&&this.logger.debug("UDP HANDSHAKE MESSAGE RECEIVED FROM "+f.uuid),this.QJ.SG(f,this.yg);break;case s.Rf.Eg.UDPHandshakeResponse:var g=s.Rf.Fa.Jg.UDPHandshakeResponse.decode(e.Wg);l&&this.logger.debug("UDP HANDSHAKE MESSAGE RESPONSE RECEIVED FROM "+this.otherGuid),this.QJ.IG(g,this.yg);break;case s.Rf.Eg.UDPSwitchLeadershipRequest:var E=s.Rf.Fa.Jg.UDPSwitchLeadershipRequest.decode(e.Wg);l&&this.logger.debug("SWITCH LEADERSHIP REQUEST RECEIVED FROM "+this.otherGuid),this.QJ.UG(E);break;case s.Rf.Eg.fg:var v=s.Rf.Fa.Jg.UDPSwitchLeadershipAck.decode(e.Wg);l&&this.logger.debug("UDP SWITCH ACKNOWLEDGMENT RESPONSE FROM "+this.otherGuid),this.QJ.VG(v,this.otherGuid);break;case s.Rf.Eg.Bitrate:var y=s.Rf.Fa.Jg.Bitrate.decode(e.Wg);l&&this.logger.debug("BITRATE INFO "+y.bitrate+" FROM "+y.guid),this.TD.Wj(y);break;case s.Rf.Eg.Haves:var T=s.Rf.Fa.Jg.Haves.decode(e.Wg);l&&this.logger.debug("RECEIVED BATCH HAVES FOR FROM "+this.otherGuid),this.TD.L6(this.otherGuid,T);break;case s.Rf.Eg.nd:var m=s.Rf.Fa.Jg.PeerInfoMessage.decode(e.Wg);l&&this.logger.debug("RECEIVED PEER INFO FROM "+this.otherGuid),this.TD.Xj(m);break;case s.Rf.Eg.Ping:var I=s.Rf.Fa.Jg.Ping.decode(e.Wg);l&&this.logger.debug("RECEIVED PING FROM "+this.otherGuid),this.TD.M6(I);break;case s.Rf.Eg.Pong:var S=s.Rf.Fa.Jg.Pong.decode(e.Wg);l&&this.logger.debug("RECEIVED PONG FROM "+this.otherGuid),this.TD.F6(S);break;case s.Rf.Eg.gg:var R=s.Rf.Fa.Jg.NoPartners.decode(e.Wg);l&&this.logger.debug("RECEIVED NON PARTNER MESSAGE FROM "+this.otherGuid),this.vD.U6(this.otherGuid,R);break;default:this.logger.warn("UNKNOWN MESSAGE TYPE "+e.msgId)}}catch(e){c.ErrorMonitor.ve().logError("Error dispatching message",this.loggerId,e,u.hs.We.Ye,e)}},e.prototype.Lg=function(e,t){this.yg.Lg(e,this.swarmId,t)},e}();t.Ig=d},function(e,t,r){"use strict";var i=r(48),n=r(35),s=r(4),o=r(25),a=r(0),h=r(7),c=r(165),u=r(5),l=r(95),p=r(1),d=r(2),f=function(){function e(e,t,r){this.loggerId="[FragmentRequester] ",this.B6=new i,this.H6=new i,this.x6=null,this.ug=o.Rf.ug,this.Sg=e,this.otherGuid=t,this.vD=r.vD,this.yD=r.yD,this.Ng=a.Framework.resolve(a.Framework.V.F),this.logger=a.Framework.resolve(a.Framework.V.R).log(r.sessionId)}return e.prototype.setReportingGuid=function(e){this.q6=e},e.prototype.Dg=function(){return!(0===this.B6.keys().length&&null===this.x6)},e.prototype.G6=function(e){var t=new o.Rf.Fa.Jg.Request;try{t.fragmentId=e.Zf(),t.transferId=e.Pk,this.ug&&this.logger.debug("INITIATING TR-"+e.Pk+" TIMEOUT: "+e.V6+" FRAGMENT: "+e.Zf()+" FROM: "+this.otherGuid),this.B6.set(e.Pk,e),this.H6.set(e.Pk,a.Framework.time())}catch(e){p.ErrorMonitor.ve().logError("Error constructing fragment request message",this.loggerId,d.hs.Zi.Qi,{detailedError:e,otherGuid:this.otherGuid}),t=null}try{t&&e.xq.wj.Lg(o.Rf.Eg.Request,t)}catch(e){p.ErrorMonitor.ve().logError("Error sending fragment request",this.loggerId,d.hs.Zi.Ki,{detailedError:e,otherGuid:this.otherGuid})}},e.prototype.A6=function(e){try{var t=e.transferId,r=e.data.yA(),i=e.chunkSize,n=e.totalSize,s=e.headers;if(this.ug&&this.logger.debug("RCV Chunk "+r.byteLength),!this.B6.has(t))return;null==this.x6?(this.ug&&this.logger.debug("INITIATED TR-"+t+",SIZE="+n),this.x6=this.B6.get(t),this.x6.Pk=t,this.j6(t,this.x6.xq),null!=s?this.x6.responseHeaders=s:this.logger.warn("HEADERS NULL IN FIRST CHUNK"),this.vD.v1(this.otherGuid,this.x6,i,n),this.x6.Qf=i,a.Framework.C()||(this.x6.jf=r)):(this.j6(t,this.x6.xq),this.x6.Qf+=i,a.Framework.C()||(this.x6.jf=h.rc.appendBuffer(this.x6.jf,r)));var o=a.Framework.C()?this.x6.Qf:this.x6.jf.byteLength;if(this.ug&&this.logger.debug("RECEIVED "+o+"/"+n+" TRID "+t),o==n){this.ug&&this.logger.debug("RCV ALL DATA "+o+" TR-"+this.x6.Yf),this.x6.qf.Af=o,a.Framework.clearTimeout(this.x6.mG),this.B6.delete(t);var c=a.Framework.time()-this.H6.get(t);this.logger.debug("RCV ALL DATA FROM "+this.otherGuid+" AFTER "+c+" mseconds"),this.H6.delete(t),this.vD.UD(t,this.x6),this.x6=null}}catch(e){p.ErrorMonitor.ve().logError("Error receiving chunk",this.loggerId,d.hs.Zi.Yi,{detailedError:e,otherGuid:this.otherGuid})}},e.prototype.j6=function(e,t){try{this.ug&&this.logger.debug("SEND ACK "+e+" TO "+this.otherGuid);var r=new o.Rf.Fa.Jg.Ack;r.transferId=e,t.wj.Lg(o.Rf.Eg.Ack,r)}catch(e){p.ErrorMonitor.ve().logError("Error sending ack",this.loggerId,d.hs.Zi.Wi,{detailedError:e,otherGuid:this.otherGuid})}},e.prototype.close=function(e){var t=this,r=s.defer();return null!=this.x6&&this.Q6(this.x6.Pk),this.B6.keys().slice().forEach(function(e){t.Q6(e)}),r.resolve(l.xV.Jq),r.Ss},e.prototype.Q6=function(e){try{if(this.B6.has(e)){var t=this.B6.get(e);t.qf.Af=t.Qf,this.logger.debug("SEND CANCEL FOR "+e+" TO "+this.otherGuid),this.H6.delete(e);var r=new o.Rf.Fa.Jg.Cancel;r.transferId=e,t.xq.wj.Lg(o.Rf.Eg.Cancel,r),null!==this.x6&&this.x6.$f()===t.$f()&&(this.x6=null),this.B6.delete(e)}else p.ErrorMonitor.ve().logError("Error cleaning up a not pending transfer",this.loggerId,d.hs.Zi.zi)}catch(e){p.ErrorMonitor.ve().logError("Error sending stop transfer",this.loggerId,d.hs.Zi.Ji,{detailedError:e,otherGuid:this.otherGuid})}},e}();t.C6=f;var g=function(){function e(e,t,r,n){this.loggerId="[FragmentSender] ",this.ug=o.Rf.ug,this.K6=null,this.Y6=new Array,this.W6=new i,this.z6=0,this.close=null,this.Sg=e,this.otherGuid=t,this.J6=r.qJ,this.wj=n,this.ID=r.ID,this.logger=a.Framework.resolve(a.Framework.V.R).log(r.sessionId),this.Ng=a.Framework.resolve(a.Framework.V.F)}return e.prototype.setReportingGuid=function(e){this.q6=e},e.prototype.X6=function(e,t,r,i,n){var s=this;this.ug&&this.logger.info("SEND FRAGMENT "+e+" TO "+this.otherGuid);try{var o=new c.Z6;o.transferId=t,o.fragmentId=e,o.e8=n,o.headers=i,o.t8=r,o.r8=Math.ceil(o.t8/u.hh.Fa.Da),o.n8=0,this.Y6.push(o),this.ug&&this.Y6.forEach(function(e){s.logger.debug(s.otherGuid+" PENDING OUT "+e)})}catch(e){p.ErrorMonitor.ve().logError("Error constructing chunk response",this.loggerId,d.hs.in.$i,{detailedError:e,otherGuid:this.otherGuid})}null===this.K6?this.s8():this.ug&&this.logger.debug(this.otherGuid+" OUT MSG NOT NULL")},e.prototype.O6=function(e){this.ug&&this.logger.debug("ONGOING "+e+" GOT ACK"),null!==this.K6&&this.K6.transferId.toString()===e.toString()?this.o8(!1):p.ErrorMonitor.ve().logError("Error receiving ack for unknown transfer",this.loggerId,d.hs.in.rn)},e.prototype.N6=function(e){null!=this.K6&&this.K6.transferId===e?(this.logger.debug("GOT CANCEL FOR ONGOING TR-"+e),this.logger.debug("TRANSPORT CANCEL STATS "+this.Sg+","+this.otherGuid+","+e),this.W6.delete(e),0!=this.K6.n8?this.J6.a8(this.otherGuid,this.q6,this.K6.n8,this.K6.t8):this.J6.h8(this.otherGuid,this.q6,this.K6.t8),this.K6=null,this.s8()):this.Y6=this.Y6.filter(function(t){return t.transferId!==e})},e.prototype.s8=function(){try{if(null===this.K6&&0!==this.Y6.length){var e=this.Y6.shift();this.K6=e,this.ug&&this.logger.debug("DATA TO SEND LENGTH "+this.K6.t8+" IN "+this.K6.r8+" CHUNKS WITH TR-"+this.K6.transferId),this.o8(!0)}}catch(e){p.ErrorMonitor.ve().logError("Error start sending chunks",this.loggerId,d.hs.in.en,e),this.kg()}},e.prototype.o8=function(e){e&&(this.W6.set(this.K6.transferId,a.Framework.time()),this.z6=this.K6.r8);try{if(null!=this.K6)if(0===this.K6.r8)this.logger.debug("FINISHED SENDING TRANSFER "+this.K6.transferId+" WITH "+this.K6.n8+" BYTES"),this.W6.delete(this.K6.transferId),this.J6.c8(this.otherGuid,this.q6,this.K6.t8),this.K6=null,this.u8(),this.s8();else{this.ug&&this.logger.debug("A CHUNK");var t=Math.min(this.K6.n8+u.hh.Fa.Da,this.K6.t8),r=t-this.K6.n8,i=new o.Rf.Fa.Jg.Chunk;if(i.transferId=this.K6.transferId,i.totalSize=this.K6.t8,i.chunkSize=r,e&&null!=this.K6.headers&&(i.headers=this.K6.headers),a.Framework.C()||null==this.K6.e8)i.data=n.wrap(new ArrayBuffer(0));else if(i.data=this.ID.l8(this.K6.fragmentId,this.z6-this.K6.r8),null==i.data){var s=this.K6.e8.slice(this.K6.n8,t);i.data=n.wrap(s)}this.K6.n8=this.K6.n8+r,this.wj.Lg(o.Rf.Eg.Chunk,i),this.ug&&this.logger.debug("SND ["+this.K6.n8+"-"+(this.K6.n8+r)+"/"+this.K6.t8+"] TO "+this.otherGuid+" OF TR-"+this.K6.transferId),this.K6.r8--}else this.logger.debug("NO MESSAGE TO SEND")}catch(e){p.ErrorMonitor.ve().logError("Error sending chunk",this.loggerId,d.hs.in.tn,{detailedError:e,otherGuid:this.otherGuid}),this.kg()}},e.prototype.Dg=function(){return!(0===this.Y6.length&&null===this.K6)},e.prototype.P6=function(){var e=s.defer();return this.Y6.length=0,this.Dg()?this.close=e:e.resolve("CLOSE"),e.Ss},e.prototype.u8=function(){this.close&&this.close.resolve("CLOSED")},e.prototype.kg=function(){this.K6=null},e}();t._6=g},function(e,t,r){"use strict";var i=function(){function e(){this.headers=null}return e}();t.Z6=i},function(e,t,r){"use strict";var i=r(3),n=r(0),s=r(5),o=r(15),a=r(2),h=r(1),c=function(){function e(e,t,r,s,a,h){this.loggerId="[Partner] ",this.p8=0,this.d8=0,this.f8=0,this.g8=new Array,this.E8=new Array,this.B6=new i,this.logger=s,this.wj=r,this.guid=e,this.Ek=h,this.v8=a,this.KM=t,this.gQ=n.Framework.resolve(o.qu.ku),this.vQ=n.Framework.resolve(o.qu.ku),this.y8=n.Framework.time()}return e.prototype.Dj=function(e){this.reportingGuid=e,this.wj&&(this.wj.receiver.setReportingGuid(this.reportingGuid),this.wj.sender.setReportingGuid(this.reportingGuid))},e.prototype.T8=function(e,t,r){var i=Math.max(1,t);for(r&&(this.d8+=i,this.p8+=e);this.g8.length>s.hh.Oa.wa;)this.g8.pop();var n=e/i;this.g8.unshift(n)},e.prototype.m8=function(e){this.B6.has(e)?this.logger.warn(this.guid+" DUPLICATE {} PENDING REQUESTS "+e):this.B6.set(e,n.Framework.time())},e.prototype.I8=function(e,t,r,i,s,o){try{if(this.B6.has(e)){var c=this.B6.get(e),u=n.Framework.time()-c;this.B6.delete(e),i&&this.T8(t,u,!0),this.gQ.success(t),this.KM.S8(this.reportingGuid,t,r,s,o)}else h.ErrorMonitor.ve().logError("Error completing a non-existing request",this.loggerId,a.hs.Dn._n,{otherGuid:this.guid,q6:this.reportingGuid})}catch(e){h.ErrorMonitor.ve().logError("Error handling request completed",this.loggerId,a.hs.Dn.Cn,{detailedError:e,otherGuid:this.guid,q6:this.reportingGuid})}},e.prototype.R8=function(e,t,r,i,n,o){try{if(this.B6.has(e)){var c=this.B6.get(e);this.B6.delete(e),s.hh.Oa.ba?this.T8(t,c,!0):this.T8(0,c,!0),this.gQ.w8(t,i),this.KM.b8(this.reportingGuid,t,r,i,n,o)}else h.ErrorMonitor.ve().logError("Error partially failed a non-existing request",this.loggerId,a.hs.Dn.An,{otherGuid:this.guid,q6:this.reportingGuid})}catch(e){h.ErrorMonitor.ve().logError("Error handling request partially failed ",this.loggerId,a.hs.Dn.Pn,{detailedError:e,otherGuid:this.guid})}},e.prototype._k=function(e,t,r){try{if(this.B6.has(e)){var i=this.B6.get(e);this.B6.delete(e),this.T8(0,i,!0),this.gQ.ll(),this.KM.C8(this.reportingGuid,r,t)}else h.ErrorMonitor.ve().logError("Error failed a non-existing request",this.loggerId,a.hs.Dn.Nn,{otherGuid:this.guid,q6:this.reportingGuid})}catch(e){h.ErrorMonitor.ve().logError("Error handling request failed ",this.loggerId,a.hs.Dn.On,{detailedError:e,otherGuid:this.guid})}},e.prototype._8=function(e,t){this.KM.P8(e,t,!0)},e.prototype.A8=function(e,t){this.KM.O8(e,t,!0)},e.prototype.N8=function(e,t,r){this.KM.D8(e,t,r,!0)},e.prototype.k8=function(){var e=this.g8.reduce(function(e,t){return e+t},0);return this.g8.length>0?e/this.g8.length:0},e.prototype.L8=function(e){this.f8=e},e.prototype.M8=function(){return this.f8},e.prototype.Ij=function(){return this.Ek.Ij()},e}();t.Partner=c},function(e,t,r){"use strict";var i=r(35),n=r(3),s=r(0),o=r(10),a=r(25),h=r(5),c=r(1),u=r(168),l=r(2),p=function(){function e(){this.jM="[PARTNERSHIP] ",this.aj=new n,this.gB=new n,this.dB=new n,this.fB=new n,this.F8=!1,this.U8=!1,this.B8=!0,this.active=!1,this.H8(),this.lj=[]}return e.prototype.init=function(e){this.logger=s.Framework.resolve(s.Framework.V.R).log(e.sessionId),this.yD=e.yD,this.sC=e.sC,this.uploadScore=e.uploadScore,this.gD=e.gD,this.yj=e.YM},e.prototype.sj=function(e){return this._j(e.peerInfo.guid)},e.prototype._j=function(e){return this.fB.has(e)||this.dB.has(e)},e.prototype.$j=function(e){return this.dB.has(e)?this.dB.get(e):this.fB.get(e)},e.prototype.rj=function(e){return this.xj(e.peerInfo.guid)},e.prototype.xj=function(e){return this.gB.has(e)||this.aj.has(e)},e.prototype.qj=function(e){return this.gB.has(e)?this.gB.get(e):this.aj.get(e)},e.prototype.Lj=function(e){var t=this;try{var r=this.yD.x8();if(this.B8&&!r)if(this._j(e)){var i=this.$j(e),n=this.uploadScore.q8(!1),s=[];this.sC.Vq(this.context.isLive()).then(function(r){t.logger.debug(t.jM+"SEND ALL HAVES TO "+e+","+r.length);for(var o=0;o<r.length;o++){var h=0;h=t.context.isLive()?r[o].size():r[o].totalSize;var c=r[o].zf,u=new a.Rf.Fa.Jg.Have;u.setFragmentId(c.Zf()),u.setSize(h),u.setUploadScore(n);var l=c;u.setId(l.A_()),u.setBitrate(l.bitrate),u.setDuration(l.duration),u.setType(l.Xf()),s.push(u)}if(s.length>0){var p=new a.Rf.Fa.Jg.Haves;p.setHave(s),i.wj.Lg(a.Rf.Eg.Haves,p)}})}else c.ErrorMonitor.ve().logError("Error sending all haves to peer who is not out partner",this.jM,l.hs.Ut.Ct,{otherGuid:e})}catch(t){c.ErrorMonitor.ve().logError("Error sending all haves",this.jM,l.hs.Ut.Tt,{detailedError:t,otherGuid:e})}},e.prototype.oZ=function(e,t,r){var i=this,n=this.yD.x8();if(this.B8&&!n){var s=this.dB.values();this.fB.forEach(function(e,t){s.push(e)});var o=this.uploadScore.q8(!1);s.forEach(function(n){(!r||r&&n.guid!=r.guid)&&i.G8(n.wj,e,t,o)})}},e.prototype.G8=function(e,t,r,i){this.F8&&this.logger.debug(this.jM+"SEND HAVE TO "+e.otherGuid+" FOR "+t.Zf());try{var n=new a.Rf.Fa.Jg.Have;n.setFragmentId(t.Zf()),n.setSize(r),n.setUploadScore(i);var s=t;n.setId(s.A_()),n.setBitrate(s.bitrate),n.setDuration(s.duration),n.setType(s.Xf()),e.Lg(a.Rf.Eg.Have,n)}catch(t){c.ErrorMonitor.ve().logError("Error sending have ",this.jM,l.hs.Ut.It,{detailedError:t,otherGuid:e.otherGuid})}},e.prototype.D6=function(e,t){try{if(this.xj(e)){this.U8&&this.logger.debug(this.jM+"HAVE RECEIVED FROM "+e+": "+t.fragmentId);var r=this.qj(e);r.L8(t.getUploadScore()),this.gD.put(t,r),this.context.vF(t)}else c.ErrorMonitor.ve().logError("Error receiving have from unknown peer",this.jM,l.hs.Ut.St,{otherGuid:e})}catch(t){c.ErrorMonitor.ve().logError("Error handling received have",this.jM,l.hs.Ut.wt,{detailedError:t,otherGuid:e})}},e.prototype.L6=function(e,t){var r=this;try{if(this.xj(e)){this.U8&&this.logger.debug(this.jM+"BATCH HAVES RECEIVED FROM "+e);var i=this.qj(e);t.getHave().forEach(function(e){i.L8(e.getUploadScore()),r.gD.put(e,i)}),this.context.vF(t.getHave()[0])}else c.ErrorMonitor.ve().logError("Error receiving haves from unknown peer",this.jM,l.hs.Ut.Rt,{otherGuid:e})}catch(t){c.ErrorMonitor.ve().logError("Error handling received haves",this.jM,l.hs.Ut.bt,{detailedError:t,otherGuid:e})}},e.prototype.mj=function(e){try{var t=new a.Rf.Fa.Jg.Ping;t.id=this.yD.getId(),t.startTs=s.Framework.time(),this.logger.debug(this.jM+"REQUEST PING TO PEER GUID "+e.otherGuid),e.Lg(a.Rf.Eg.Ping,t)}catch(t){c.ErrorMonitor.ve().logError("Error requesting ping",this.jM,l.hs.Ut.Pt,{detailedError:t,otherGuid:e.otherGuid})}},e.prototype.M6=function(e){try{var t=e.id;if(!this._j(t))return void c.ErrorMonitor.ve().logError("Error receiving ping from an unknown peer",this.jM,l.hs.Ut.Ot,{otherGuid:t});var r=-1;e.startTs&&(r=e.startTs),this.V8(this.$j(t).wj,r)}catch(t){c.ErrorMonitor.ve().logError("Error handling received ping",this.jM,l.hs.Ut.At,{detailedError:t,otherGuid:e.id})}},e.prototype.H8=function(){try{for(var e="",t=0;t<h.hh.Fa.Da;t++)e+=String.fromCharCode(33+93*Math.random());for(var r=new ArrayBuffer(e.length),n=new Uint8Array(r),s=e.length,t=0;t<s;t++)n[t]=e.charCodeAt(t);this.j8=i.wrap(n)}catch(e){c.ErrorMonitor.ve().logError("Error creating random buffer for ping pong",this.logger,l.hs.Ut._t,e)}},e.prototype.V8=function(e,t){try{var r=new a.Rf.Fa.Jg.Pong;r.id=this.yD.getId(),r.startTs=t,this.j8||this.H8(),r.data=this.j8,r.dataSize=h.hh.Fa.Da,this.logger.debug(this.jM+"SEND PONG TO PEER GUID "+e.otherGuid),e.Lg(a.Rf.Eg.Pong,r)}catch(t){c.ErrorMonitor.ve().logError("Error sending pong",this.jM,l.hs.Ut.Nt,{detailedError:t,otherGuid:e.otherGuid})}},e.prototype.F6=function(e){try{var t=e.id;if(!this.xj(t))return void c.ErrorMonitor.ve().logError("Error receiving a pong from an unknown peer",this.jM,l.hs.Ut.Dt,{otherGuid:t});var r=s.Framework.time();if(e.startTs&&e.startTs>0){var i=r-e.startTs,n=this.qj(t);e.dataSize==e.data.tc().byteLength?n.T8(e.dataSize,i,!0):c.ErrorMonitor.ve().logError("Error receing pong with wrong data size",this.jM,l.hs.Ut.kt,{otherGuid:t})}else c.ErrorMonitor.ve().logError("Error receiving pong with wrong timestamp",this.jM,l.hs.Ut.Lt,{otherGuid:t})}catch(t){c.ErrorMonitor.ve().logError("Error receiving pong",this.jM,l.hs.Ut.Mt,{detailedError:t,otherGuid:e.id})}},e.prototype.vB=function(){try{var e=new n;return this.Q8(this.gB,e),this.Q8(this.aj,e),e}catch(e){return c.ErrorMonitor.ve().logError("Error getting partner snapshots",this.jM,l.hs.Ut.Ft,e),new n}},e.prototype.Q8=function(e,t){var r=this;e.forEach(function(e,i){var n=new hive.snapshots.Partner;n.inPart=!0,n.outPart=r._j(i),n.connInfo=new hive.snapshots.ConnectivityInfo;var s=void 0;e.Ek.peerInfo.publicIpString&&(s=e.Ek.peerInfo.publicIpString);var a=void 0;e.Ek.peerInfo.privateIpString&&(a=e.Ek.peerInfo.privateIpString),n.connInfo.publicIp=s,n.connInfo.privateIp=a,n.connInfo.externalAs=e.Ek.peerInfo.externalAs,n.connInfo.internalAs=e.Ek.peerInfo.internalAs;var h=r.K8();h.rateReceived=e.k8(),n.metrics=h,n.udp=e.Ek.peerInfo.type==o.Tc.W,t.set(e.reportingGuid,n)})},e.prototype.pB=function(){return new u.Y8(this.gB.length,this.aj.length,this.fB.length,this.dB.length)},e.prototype.K8=function(){var e=new hive.snapshots.PartnerMetrics;return e.rateReceived=0,e.rateSent=0,e.handshakeDelay=0,e},e}();t.rQ=p},function(e,t,r){"use strict";var i=function(){function e(e,t,r,i){this.gB=e,this.EB=t,this.fB=r,this.dB=i}return e}();t.Y8=i},function(e,t,r){"use strict";var i=function(){function e(){}return e}();t.Kg=i},function(e,t){e.i={package:"HiveMsgs",messages:[{name:"Chunk",fields:[{rule:"required",type:"int32",name:"transferId",id:1},{rule:"required",type:"int32",name:"totalSize",id:2},{rule:"required",type:"int32",name:"chunkSize",id:3},{rule:"required",type:"bytes",name:"data",id:4},{rule:"optional",type:"string",name:"headers",id:5}]},{name:"Haves",fields:[{rule:"repeated",type:"Have",name:"have",id:1}]},{name:"Have",fields:[{rule:"required",type:"string",name:"fragmentId",id:1},{rule:"required",type:"int32",name:"size",id:2},{rule:"required",type:"int32",name:"type",id:3},{rule:"required",type:"int32",name:"id",id:4},{rule:"required",type:"int32",name:"bitrate",id:5},{rule:"required",type:"int32",name:"duration",id:6},{rule:"required",type:"float",name:"uploadScore",id:7}]},{name:"Ping",fields:[{rule:"required",type:"string",name:"id",id:1},{rule:"required",type:"uint64",name:"startTs",id:2}]},{name:"Pong",fields:[{rule:"required",type:"string",name:"id",id:1},{rule:"required",type:"bytes",name:"data",id:2},{rule:"required",type:"int32",name:"dataSize",id:3},{rule:"required",type:"uint64",name:"startTs",id:4}]},{name:"Request",fields:[{rule:"required",type:"string",name:"fragmentId",id:1},{rule:"required",type:"int32",name:"transferId",id:2}]},{name:"DoNotHave",fields:[{rule:"required",type:"int32",name:"transferId",id:1}]},{name:"NoPartners",fields:[{rule:"required",type:"int32",name:"transferId",id:1}]},{name:"Cancel",fields:[{rule:"required",type:"int32",name:"transferId",id:1}]},{name:"Ack",fields:[{rule:"optional",type:"int32",name:"transferId",id:1}]},{name:"Close",fields:[{rule:"required",type:"int32",name:"type",id:1}]},{name:"StreamCharacteristics",fields:[{rule:"required",type:"int32",name:"streamState",id:1},{rule:"required",type:"int32",name:"bitrate",id:2},{rule:"required",type:"int32",name:"delta",id:3}]},{name:"OutPartnershipRequest",fields:[{rule:"required",type:"string",name:"guid",id:1},{rule:"required",type:"string",name:"contextId",id:2},{rule:"required",type:"string",name:"p2pProtocolVersion",id:3},{rule:"optional",type:"int32",name:"internalAs",id:4},{rule:"optional",type:"int32",name:"externalAs",id:5},{rule:"optional",type:"string",name:"publicIpString",id:6},{rule:"optional",type:"string",name:"privateIpString",id:7},{rule:"required",type:"string",name:"reportingGuid",id:8},{rule:"repeated",type:"StreamCharacteristics",name:"streamCharacteristics",id:9}]},{name:"OutPartnershipResponse",fields:[{rule:"required",type:"int32",name:"accept",id:1},{rule:"optional",type:"int32",name:"internalAs",id:2},{rule:"optional",type:"int32",name:"externalAs",id:3},{rule:"optional",type:"string",name:"publicIpString",id:4},{rule:"optional",type:"string",name:"privateIpString",id:5},{rule:"optional",type:"string",name:"reportingGuid",id:6},{rule:"repeated",type:"StreamCharacteristics",name:"streamCharacteristics",id:7}]},{name:"PeerInfoMessage",fields:[{rule:"required",type:"string",name:"guid",id:1},{rule:"optional",type:"string",name:"publicIpString",id:2},{rule:"optional",type:"string",name:"privateIpString",id:3},{rule:"optional",type:"int32",name:"internalAs",id:4},{rule:"optional",type:"int32",name:"externalAs",id:5},{rule:"repeated",type:"StreamCharacteristics",name:"streamCharacteristics",id:6}]},{name:"UDPHandshakeMessage",fields:[{rule:"required",type:"string",name:"uuid",id:1},{rule:"required",type:"string",name:"streamId",id:2},{rule:"required",type:"float",name:"udpScore",id:3},{rule:"required",type:"bool",name:"isLeader",id:4}]},{name:"UDPHandshakeResponse",fields:[{rule:"required",type:"string",name:"accept",id:1}]},{name:"UDPSwitchLeadershipRequest",fields:[{rule:"required",type:"string",name:"uuid",id:1},{rule:"required",type:"float",name:"udpScore",id:2}]},{name:"UDPSwitchLeadershipAck",fields:[{rule:"required",type:"bool",name:"ok",id:1}]},{name:"Bitrate",fields:[{rule:"required",type:"string",name:"guid",id:1},{rule:"required",type:"int32",name:"bitrate",id:2}]}]}},function(e,t,r){"use strict";var i=r(5),n=function(){function e(e,t,r,i,n){this.udpScore=0,this.cG=!1,this.streamId="",this.uuid=e,this.udpScore=t,r&&(this.address=r),i&&(this.cG=i),n&&(this.streamId=n)}return e.JE=function(e,t){var r=0;return r=e.udpScore>t.udpScore?1:e.udpScore<t.udpScore?-1:0,0!=r?-r:i.hh.UDPBroadcast.xa?t.uuid.localeCompare(e.uuid):e.uuid.localeCompare(t.uuid)},e}();t.hG=n},function(e,t,r){"use strict";var i=r(3),n=r(43),s=r(0),o=r(15),a=r(9),h=r(10),c=r(1),u=r(2),l=function(){function e(){this.loggerId="[P2PRequester] ",this.Ag=new n.Counter,this.W8=new i,this.z8=new i,this.J8=s.Framework.resolve(o.qu.Nu)}return e.prototype.init=function(e){this.logger=s.Framework.resolve(s.Framework.V.R).log(e.sessionId),this.gD=e.gD,this.TD=e.TD,this.ED=e.ED,this.yD=e.yD,this.KM=e.YM,this.J8.X8(e.yD)},e.prototype.request=function(e){this.logger.debug("FRL ISSUE REQ FOR FRAGMENT "+e.zf.toString()+"-"+e.qf.Af+" ["+a.vc[e.Xf()]+"] TO P2P"),this.W8.set(e.$f(),e);var t=this.Ag.next();e.Pk=t,this.z8.set(t,e.$f()),this.M1(e)},e.prototype.M1=function(e){var t=e.Zf(),r=e.$f(),i=this.Z8(t);e.size=this.gD.Q1(t).size;var n=this.J8.e5(i,e.type);null!=n?(this.logger.info("SEND REQUEST "+e.Pk+" FOR "+r+" TO "+n.wj.otherGuid+" (LAN LEADER "+n.Ek.peerInfo.isLeader+" iAS "+n.Ek.peerInfo.internalAs+" eAS "+n.Ek.peerInfo.externalAs+" privateIp "+n.Ek.peerInfo.privateIpString+" ) out of "+i.length+" type "+h.Tc[n.Ek.peerInfo.type]+" size:"+e.size),e.xq=n,e.qq=n.Ek.peerInfo,e.xq.m8(e.Pk),e.qf.Cf=!0,e.qf.Mf=s.Framework.time(),this.KM.t5(e),this.Ck(e)?n.wj.receiver.G6(e):this._k(e.Pk,"TIMED-OUT")):(c.ErrorMonitor.ve().logError("Error sending p2p request because we cannot find a partner",this.loggerId,u.hs.dn.nn),this._k(e.Pk,"NO PARTNERS FOUND FOR REQUEST"))},e.prototype.Z8=function(e){var t=this,r=[];try{this.gD.fk(e).forEach(function(e){t.TD.xj(e.guid)?r.push(e):t.logger.warn("I HAVE A HAVE FROM A NON IN-PARTNER "+e.guid)})}catch(e){c.ErrorMonitor.ve().logError("Error filtering in partners",this.loggerId,u.hs.dn.sn,e)}finally{return r}},e.prototype.Ck=function(e){var t=this,r=!1;try{var i=0;null==e.size?(i=this.gD.Q1(e.Zf()).size,this.logger.warn("request size not set - this should not happen")):i=e.size;var n=e.Wf.dM().ax(e,i);return e.V6=n,n>0&&(r=!0,null==e.mG&&(e.mG=s.Framework.setTimeout(function(){t.KM.r5(e),t._k(e.Pk,"TIMED-OUT")},n))),r}catch(e){return c.ErrorMonitor.ve().logError("Error setting request timeout",this.loggerId,u.hs.dn.an,e),!1}},e.prototype._k=function(e,t){this.logger.info(t+" "+e);var r=this.i5(e,!0);this.logger.info("REQUEST "+e+" FOR "+r.$f()+" FAILED BECAUSE "+t),r&&this.ED.GX(r)},e.prototype.i5=function(e,t){try{if(this.z8.has(e)){var r=this.z8.get(e);this.z8.delete(e);var i=this.W8.get(r);if(this.W8.delete(r),s.Framework.clearTimeout(i.mG),t&&this.TD.xj(i.xq.wj.otherGuid)){i.xq.wj.receiver.Q6(e);var n=i.Xf()==a.vc.fc;0!=i.Qf?i.xq.R8(i.Pk,i.Qf,i.qf.p2pAgenTrafficSuccessQt,i.size,n,i.type):i.xq._k(i.Pk,n,i.size)}return i}return c.ErrorMonitor.ve().logError("Error cancelling request on non existing session",this.loggerId,u.hs.dn.cn),null}catch(e){return c.ErrorMonitor.ve().logError("Error removing request",this.loggerId,u.hs.dn.hn,e),null}},e.prototype.qX=function(e){if(this.W8.has(e)){var t=this.W8.get(e).Pk;this.i5(t,!0)}},e.prototype.v1=function(e,t,r,i){this.logger.debug("FRL DOWNLOADING "+t.$f()+" FROM "+e+" P2P")},e.prototype.UD=function(e,t){if(this.logger.debug("FRL PROMISED FRAGMENT "+t.$f()+" RETURNED FROM P2P SIZE "+t.qf.Af),t=this.i5(e,!1)){t.qf.Uf=s.Framework.time();var r=t.Xf()==a.vc.fc;t.xq.I8(t.Pk,t.size,t.qf.p2pAgenTrafficSuccessQt,!0,r,t.type),this.ED.jX(t)}else this.logger.warn("TRIED TO REMOVE A NON EXISTING REQUEST "+e+" (THIS SHOULD NOT HAPPEN. AT LEAST NOT TOO OFTEN)")},e.prototype.k6=function(e){var t=e.getTransferId();if(this.z8.has(t)){c.ErrorMonitor.ve().logError("Error receiving a do not have for my request",this.loggerId,u.hs.dn.un),this.logger.debug("DO NOT HAVE RECEIVED FOR "+t);var r=this.i5(t,!1);if(r){var i=r.Xf()==a.vc.fc;r.xq._k(r.Pk,i,r.size),this.ED.GX(r)}}else this.logger.warn("UNKNOWN DO NOT HAVE "+t)},e.prototype.U6=function(e,t){var r=t.transferId;if(this.z8.has(r)){c.ErrorMonitor.ve().logError("Error rejected request by a non partner",this.loggerId,u.hs.dn.pn),this.TD.Sj(e);var i=this.i5(r,!1);i&&this.ED.GX(i)}},e.prototype.Ys=function(e){return this.W8.has(e)},e}();t.LJ=l},function(e,t,r){"use strict";var i=r(0),n=r(25),s=r(1),o=r(2),a=function(){function e(){this.loggerId="[P2PResponder] "}return e.prototype.init=function(e){this.logger=i.Framework.resolve(i.Framework.V.R).log(e.sessionId),this.sG=e,this.gD=e.gD,this.sC=e.sC,this.TD=e.TD,this.uploadScore=e.uploadScore,this.yD=e.yD,this.KM=e.YM},e.prototype.PM=function(e,t,r){try{if(this.TD._j(e)){var i=this.TD.$j(e);this.n5(e,t,i)}else this.s5(e,t,r)}catch(e){s.ErrorMonitor.ve().logError("Error on responding to p2p request",this.loggerId,o.hs.mn.fn,e)}},e.prototype.c8=function(e,t,r){try{if(this.uploadScore.success(r),this.TD._j(e)){var i=this.TD.$j(e);i.vQ.success(r),i._8(r,t)}}catch(e){s.ErrorMonitor.ve().logError("Error on request satisfied",this.loggerId,o.hs.mn.gn,e)}},e.prototype.a8=function(e,t,r,i){try{if(this.uploadScore.w8(r,i),this.TD._j(e)){var n=this.TD.$j(e);n.vQ.w8(r,i),n.N8(r,i,t)}}catch(e){s.ErrorMonitor.ve().logError("Error on request partially satisfied",this.loggerId,o.hs.mn.En,e)}},e.prototype.h8=function(e,t,r){try{if(this.uploadScore.ll(),this.TD._j(e)){var i=this.TD.$j(e);i.vQ.ll(),i.A8(r,t)}}catch(e){s.ErrorMonitor.ve().logError("Error on request not satisfied",this.loggerId,o.hs.mn.vn,e)}},e.prototype.n5=function(e,t,r){var i=this;this.sC.get(t.fragmentId).then(function(n){n?(i.logger.debug("SENDING TO "+e+","+t.fragmentId+","+t.transferId+","+n.length+" DL "+n.length),r.wj.sender.X6(t.fragmentId,t.transferId,n.length,n.headers,n.data)):(i.logger.debug("RECEIVED REQUEST FOR "+t.fragmentId+" FROM "+e+" CAN'T BE SERVED"),i.o5(t.transferId,r))})},e.prototype.o5=function(e,t){try{this.logger.info("SEND DO NOT HAVE "+e+" TO "+t.wj.Sg);var r=new n.Rf.Fa.Jg.DoNotHave;r.setTransferId(e),t.wj.Lg(n.Rf.Eg.DoNotHave,r)}catch(e){s.ErrorMonitor.ve().logError("Error on sending do not have",this.loggerId,o.hs.mn.yn,e)}},e.prototype.s5=function(e,t,r){try{this.logger.warn("GOT REQUEST FROM NON-PARTNER "+e+" FOR "+t.fragmentId);var i=new n.Rf.Fa.Jg.NoPartners;i.setTransferId(t.transferId),r.Lg(n.Rf.Eg.gg,i)}catch(e){s.ErrorMonitor.ve().logError("Error on send no partners",this.loggerId,o.hs.mn.Tn,e)}},e}();t.MJ=a},function(e,t,r){"use strict";var i,n=r(48),s=r(0),o=r(5);!function(e){e[e.S=0]="S",e[e.a5=1]="F",e[e.h5=2]="PF"}(i||(i={}));var a=function(){function e(e){this.ts=e}return e}(),h=function(){function e(){this.c5=0,this.u5=0,this.l5=0,this.p5=0,this.d5=0,this.f5=0}return e}(),c=function(){function e(){this.g5=new n}return e.prototype.success=function(e){this.event(i.S,e,e)},e.prototype.ll=function(){this.event(i.a5,0,0)},e.prototype.w8=function(e,t){this.event(i.h5,e,t)},e.prototype.event=function(e,t,r){var i=new a(s.Framework.time());i.t=e,i.E5=t,i.v5=t/r,i.y5=(r-t)/r,this.g5.set(i.ts,i),this.T5()},e.prototype.T5=function(){var e=this,t=s.Framework.time(),r=t-2*o.hh.Oa.Ca;if(r>0){var i=[];this.g5.forEach(function(e,t){t<r&&i.push(t)}),i.forEach(function(t){e.g5.delete(t)})}},e.prototype.fQ=function(e){var t=0,r=this.m5(e,o.hh.Oa.Ca);if(null!=r){var i=r.u5+r.l5+r.p5;t=0==i?0:(r.u5+r.p5*o.hh.Oa._a)/i}return t},e.prototype.q8=function(e){var t=0,r=this.m5(e,o.hh.Oa.Ca);if(null!=r){var i=r.u5+r.l5+r.p5;t=0==i?0:(r.l5+r.p5*o.hh.Oa.Pa)/i}return t},e.prototype.I5=function(e){var t=this.m5(!1,e);return null!=t?t.c5:0},e.prototype.m5=function(e,t){if(0!=this.g5.keys().length){var r=new h,o=s.Framework.time(),a=o-t;a<0&&(a=0);var c=new n;return this.g5.forEach(function(e,t){t>=a&&c.set(t,e)}),c.forEach(function(e,t){switch(r.c5+=e.E5,e.t){case i.S:r.u5++;break;case i.a5:r.l5++;break;default:r.p5++,r.d5+=e.v5,r.f5+=e.y5}}),r}return null},e}();c.Pa=.2,c._a=.2,t.FJ=c},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(3),s=r(4),o=r(0),a=r(176),h=r(178),c=r(96),u=r(2),l=r(1);t.S5||(t.S5={});var p=function(e){function t(){var t=e.call(this)||this;return t.loggerId="[HiveNetworkManager] ",t.R5=!1,t.w5=new n,t.Ag=1,t.Jl=o.Framework.resolve(o.Framework.V.M),t.b5=o.Framework.resolve(o.Framework.V.q),t.channelManager=new a.C5(t.logger,t.b5,t),t.b5.init(t,t.logger,t.channelManager),t._5(),t}return i(t,e),t.prototype.start=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=o.Framework.resolve(o.Framework.V.R).log(e),n=null;return 0==this.vl.keys().length?(i.debug("TRIGGERING CONNECT "),n=this.P5(),this.A5(e,t)):(i.debug("ALREADY CONNECTED "),n=this.Jl.Zl(),this.A5(e,t),this.b5.sY()&&this.O5(this.gd,e)),n},t.prototype.P5=function(){var e=this,t=o.Framework.L.k;return"localhost"===t&&(t="127.0.0.1:"+location.port),this.logger.debug("CONNECTING.."),this.Jl.Zl().then(function(r){var i=r.tp();return e.logger.debug("MY IDENTITY ",i),e.gd=i,e.b5.start(t,i),r})},t.prototype.N5=function(){return s.resolve(new n)},t.prototype.connect=function(e){var t=this,r=s.defer();return this.w5.has(e)?(this.logger.debug("Already connected to "+e+", ignoring"),r.resolve(this.w5.get(e))):this.channelManager.D5(this.gd,e).then(function(r){return t.connected(e,r)}).then(function(e){return r.resolve(e)}).fail(function(i){l.ErrorMonitor.ve().logError("Error establishing connection",t.loggerId,u.hs.Pe.be,{otherGuid:e}),r.reject("CONN TO "+e+" CANNOT BE ESTABLISHED ")}),r.Ss},t.prototype.send=function(e,t,r){return!!this.channelManager.send(e,t)||(l.ErrorMonitor.ve().logError("Error sending message without channel established",this.loggerId,u.hs.Pe.Ce,{otherGuid:e}),this.k5(e),!1)},t.prototype.L5=function(e,t,r){if(this.R5&&this.logger.debug("REC BUF "+r.byteLength+" "+r),this.w5.has(e)){this.R5&&this.logger.debug("PROC MSG FROM "+e);this.w5.get(e).Gg(r)}else l.ErrorMonitor.ve().logError("Error receiving msg without having a connection established",this.loggerId,u.hs.Pe.Ce,{otherGuid:e})},t.prototype.connected=function(e,t){if(this.w5.has(e))this.logger.debug("RECONNECTED TO "+e+", RESETTING STATE"),this.w5.get(e).reset();else{this.logger.info("CONNECTED TO "+e);var r=t.pG;r.init(this.gd,e),this.w5.set(e,r)}return s.resolve(this.w5.get(e))},t.prototype.M5=function(e,t){this.logger.debug("FAILED CONN TO "+t),e.reject("CONN TO "+t+" CANNOT BE ESTABLISHED ")},t.prototype.F5=function(e,t){this.logger.info(e+" connected to me"),this.connected(e,t)},t.prototype.k5=function(e){this.w5.has(e)?(this.logger.info("Connection closed to "+e),this.w5.delete(e),this.U5(e)):this.logger.warn("TRYING TO REMOVE A PEER THAT IS NOT THERE: "+e)},t.prototype._5=function(){var e=this;c.hQ.nQ&&o.Framework.setInterval(function(){var t=o.Framework.time();e.w5.forEach(function(r,i){var n=t-r.zg();n>c.hQ.oQ&&(e.logger.debug("closing stale connection to "+i+" [unused for: "+n+"ms]"),e.disconnect(i))})},c.hQ.sQ)},t.prototype.stop=function(e){o.Framework.resolve(o.Framework.V.R).log(e).debug("STOPPING CONNECTIONS AND REMOVING LISTENERS"),this.B5(e)},t.prototype.H5=function(){},t.prototype.disconnect=function(e){this.w5.has(e)&&this.channelManager.disconnect(e)},t}(h.x5);p.$a="availableSendRate",p.eh="remoteAddress",p.th="localAddress",t.CJ=p},function(e,t,r){"use strict";var i=r(4),n=r(0),s=r(177),o=r(96),a=r(2),h=r(1),c=function(){function e(e,t,r){this.logger=e,this.b5=t,this.q5=r,this.loggerId="[ChannelManager] ",this.G5={iceServers:[{url:"stun:stun.hivestreaming.com:3478"}]},this.Ag=1,this.V5=null,this.j5={},this.Q5={}}return e.prototype.D5=function(e,t){var r=null;if(t in this.Q5){var n=i.defer();n.reject("OTHER ALREADY TRYING TO CONNECT"),r=n.Ss}else{this.q5.R5&&this.logger.info("Initiating connection to "+t);var s=this.K5(e,t);r=this.Y5(s,t).connect(t)}return r},e.prototype.W5=function(e){e.z5 in this.Q5&&(delete this.j5[e.label],delete this.Q5[e.z5]),e.open&&(this.q5.k5(e.z5),e.open=!1)},e.prototype.send=function(e,t){this.q5.R5&&this.logger.debug("DATA "+t.byteLength+" "+t);var r=this.Q5[e];return r&&r.channel?(r.channel.send(t),!0):(h.ErrorMonitor.ve().logError("Error sending message wihtout channel established",this.loggerId,a.hs.Ke.Ve,{otherGuid:e}),!1)},e.prototype.q0=function(e,t){var r=t.channel;if(r&&r.label&&this.j5[r.label]){var i=this.j5[r.label],n=i[e];n.call(i,t)}else{var s="handle_"+e,n=this[s];n?n.call(this,t):h.ErrorMonitor.ve().logError("Error received a message for a non existing function",this.loggerId,a.hs.Ke.je,{J5:s})}},e.prototype.handle_offer=function(e){if(this.q5.R5&&this.logger.info("received an offer from "+e.peer.guid+" on channel "+e.channel.label),this.Q5[e.peer.guid]&&e.peer<this.q5.gd)this.b5.X5(this.q5.gd,e.peer.guid,e.channel.label);else{var t=this.Y5(e.channel.label,e.peer.guid),r=this.Z5(t);t.offer(e,r)}},e.prototype.Z5=function(e){var t=this;return n.Framework.setTimeout(function(){h.ErrorMonitor.ve().logError("Error incoming connection timedout",t.loggerId,a.hs.Ke.Qe,{otherGuid:e.z5}),e.close()},o.hQ.aQ)},e.prototype.Y5=function(e,t){var r=new s.e9(this,this.q5,e,this.V5,this.G5,t);return this.j5[e]=r,this.Q5[t]=r,r},e.prototype.handle_offer_rejected=function(e){this.q5.R5&&this.logger.debug("remote peer rejected ",e);var t=this.Q5[e.t9];t&&t.close(),delete this.Q5[e.t9],delete this.j5[e.channel]},e.prototype.K5=function(e,t){return e.substring(0,Math.max(8,e.length))+":"+t.substring(0,Math.max(8,t.length))+":"+this.Ag++},e.prototype.disconnect=function(e){var t=this.Q5[e];t&&t.close()},e}();t.C5=c},function(e,t,r){"use strict";var i=r(5),n=r(2),s=(r(55),r(4)),o=r(0),a=r(1),h=function(){function e(e,t,r,i,s,h){var c=this;this.channelManager=e,this.q5=t,this.label=r,this.V5=i,this.G5=s,this.z5=h,this.R5=!1,this.loggerId="[Channel] ",this.r9=-1,this.SH=null,this.channel=null,this.i9=null,this.n9=5,this.timeout=5e3,this.open=!1,this.s9=!1,this.o9=new Array,this.a9=function(){return!!this.channel&&"connecting"===this.channel.readyState},this.logger=o.Framework.resolve(o.Framework.V.R).log(),this.pG=o.Framework.resolve(o.Framework.V.U),this.pG.init(this.q5.gd,h),this.SH=new RTCPeerConnection(this.G5,this.V5),this.SH.onicecandidate=function(e){e&&e.candidate&&(c.o9.push(e.candidate),c.h9())},this.SH.onnegotiationneeded=function(){c.createOffer().then(function(e){return c.c9(e)}).then(function(e){c.R5&&c.logger.debug(c.loggerId+"Sending offer to "+c.z5+" [candidates: "+c.o9.length+"]");var t=c.o9;c.o9=new Array;var r=c.channelManager.b5.offer(c.q5.gd,c.z5,c,t,e);return c.s9=!0,r}).catch(function(e){a.ErrorMonitor.ve().logError("Error negotiating with peer",c.loggerId,n.hs.Ge.ke,{detailedError:e,otherGuid:c.z5}),c.close()})},this.SH.oniceconnectionstatechange=function(e){"disconnected"===c.SH.iceConnectionState&&c.close(),"failed"===c.SH.iceConnectionState&&(a.ErrorMonitor.ve().logError("Error establishing ICE connection",c.loggerId,n.hs.Ge.ke,{otherGuid:c.z5}),c.close())},this.SH.onsignalingstatechange=function(e){"closed"===e.signalingState&&c.close()}}return e.prototype.u9=function(){var e=this;if(this.channel&&"open"!=this.channel.readyState){if(this.R5&&this.logger.debug(this.loggerId+"Check connection "+this.z5),this.n9<=0)return this.logger.debug(this.loggerId+"Closing channel since it couldnt be established to "+this.z5),void this.close();this.n9-=1,this.i9=o.Framework.setTimeout(function(){return e.u9()},this.timeout)}},e.prototype.close=function(){try{this.R5&&this.logger.debug(this.loggerId+"Closing connection to "+this.z5),this.l9(!0),this.channelManager.W5(this),this.SH&&"closed"!==this.SH.signalingState&&(this.SH.close(),this.channel&&this.channel.close())}catch(e){a.ErrorMonitor.ve().logError("Error closing the connection",this.loggerId,n.hs.Ge.qe,{detailedError:e,otherGuid:this.z5})}},e.prototype.connect=function(e){var t=this;this.R5&&this.logger.debug(this.loggerId+"Connecting to "+e),this.z5=e,this.channel=this.SH.createDataChannel(this.label);var r=this.p9(!0,-1);return this.i9=o.Framework.setTimeout(function(){return t.u9()},this.timeout),r},e.prototype.d9=function(e){var t=this,r=s.defer();return this.SH.setRemoteDescription(e,function(){return r.resolve("OK")},function(e){a.ErrorMonitor.ve().logError("Error setting remote description",t.loggerId,n.hs.Ge.Ne,{detailedError:e,otherGuid:t.z5}),r.reject(e)}),r.Ss},e.prototype.c9=function(e){var t=this,r=s.defer();return"closed"!==this.SH.signalingState?this.SH.setLocalDescription(e,function(){return r.resolve(t.SH.localDescription)},function(e){a.ErrorMonitor.ve().logError("Error setting local description",t.loggerId,n.hs.Ge.De,{detailedError:e,otherGuid:t.z5}),r.reject(e)}):(a.ErrorMonitor.ve().logError("Signaling state is closed",this.loggerId,n.hs.Ge.Ne),r.reject("Signaling state is closed")),r.Ss},e.prototype.createOffer=function(){var e=this,t=s.defer();return this.SH.createOffer(t.resolve,function(t){a.ErrorMonitor.ve().logError("Error creating offer",e.loggerId,n.hs.Ge.Ae,{detailedError:t,otherGuid:e.z5}),e.close()}),t.Ss},e.prototype.createAnswer=function(){var e=this,t=s.defer();return this.SH.createAnswer(t.resolve,function(r){a.ErrorMonitor.ve().logError("Error creating answer",e.loggerId,n.hs.Ge.Oe,{detailedError:r,otherGuid:e.z5}),t.reject(r)}),t.Ss},e.prototype.offer=function(e,t){var r=this;this.R5&&(this.logger.debug(this.loggerId+"Received an offer from "+this.z5),this.logger.debug(this.loggerId+"Offer:",e)),this.SH.ondatachannel=function(e){r.channel=e.channel,r.p9(!1,t)};var i=new RTCSessionDescription(e.channel.offer);this.z5=e.peer.guid,this.d9(i).then(function(t){if("closed"!==r.SH.signalingState)return r.update_ice_candidates(e),r.createAnswer()}).then(function(e){return r.c9(e)}).then(function(e){r.logger.debug(r.loggerId+"Sending back an answer [candidates: "+r.o9.length+"]");var t=r.o9;r.o9=new Array,r.channelManager.b5.answer(r,e,t,r.z5),r.s9=!0}).catch(function(e){a.ErrorMonitor.ve().logError("Error responding to offer",r.loggerId,n.hs.Ge.He,{detailedError:e,otherGuid:r.z5}),r.close()})},e.prototype.answer=function(e){var t=this;this.R5&&this.logger.debug(this.loggerId+"Answer: ",e);var r=new RTCSessionDescription(e.answer);this.d9(r).then(function(){"closed"!==t.SH.signalingState&&t.update_ice_candidates(e)}).catch(function(e){a.ErrorMonitor.ve().logError("Error setting remote descriptor for the answer received",t.logger,n.hs.Ge.Be,{detailedError:e,otherGuid:t.z5}),t.close()})},e.prototype.update_ice_candidates=function(e){var t=this;e.channel.ice_candidates.forEach(function(e){t.R5&&t.logger.debug(t.loggerId+"got ICE cand: ",e);var r=new RTCIceCandidate(e);t.SH.addIceCandidate(r,function(){},function(e){return a.ErrorMonitor.ve().logError("Error updating ice candidates",t.loggerId,n.hs.Ge.Ue,{detailedError:e,otherGuid:t.z5})})})},e.prototype.p9=function(e,t){var r=this,i=s.defer();return this.channel.onopen=function(n){return r.f9(i,e,t)},this.channel.onclose=function(e){r.close(),i.reject(r)},this.channel.onmessage=function(e){return r.pG.Gg(e.data)},this.channel.onerror=function(e){a.ErrorMonitor.ve().logError("Error setting up channel",r.loggerId,n.hs.Ge.Le,{detailedError:e,otherGuid:r.z5}),r.close()},i.Ss},e.prototype.f9=function(e,t,r){this.open=!0,e.resolve(this),t||(this.q5.F5(this.z5,this),r&&o.Framework.clearTimeout(r))},e.prototype.h9=function(){var e=this;this.s9&&-1==this.r9&&(this.r9=o.Framework.setTimeout(function(){e.g9(),e.l9(!1)},i.hh.ah.oh))},e.prototype.g9=function(){var e=this,t=this.o9;if(this.o9=new Array,t&&t.length>0){var r=t.length;this.channelManager.b5.E9(this.q5.gd,this,t,this.z5).then(function(t){e.R5&&e.logger.debug(e.loggerId+"sent "+r+" more candidates")}).catch(function(t){a.ErrorMonitor.ve().logError("Error sending candidates",e.loggerId,n.hs.Ge.Le,{detailedError:t,otherGuid:e.z5})})}},e.prototype.l9=function(e){e&&-1!=this.r9&&o.Framework.clearTimeout(this.r9),this.r9=-1},e}();t.e9=h},function(e,t,r){"use strict";var i=r(3),n=r(0),s=r(2),o=r(1),a=function(){function e(){this.jM="[Base Network Manager] ",this.vl=new i,this.logger=n.Framework.resolve(n.Framework.V.R).log()}return e.prototype.A5=function(e,t){this.logger.info("SET LISTENERS FOR "+e+","+t.length),this.vl.set(e,t)},e.prototype.B5=function(e){this.vl.delete(e)},e.prototype.v9=function(){this.vl.length>0&&this.vl.forEach(function(e,t){e.forEach(function(e){e.ej&&e.ej()})})},e.prototype.O5=function(e,t){var r=this;this.vl.length>0&&(t?this.vl.get(t).forEach(function(t){try{t.Ud&&t.Ud(e)}catch(e){o.ErrorMonitor.ve().logError("Error firing server connect when we have swarm",r.jM,s.hs.Pe.Re,e)}}):this.vl.forEach(function(t,i){t.forEach(function(t){try{t.Ud&&t.Ud(e)}catch(e){o.ErrorMonitor.ve().logError("Error firing server connect when we do not have swarm",r.jM,s.hs.Pe.we,e)}})}))},e.prototype.U5=function(e){this.vl.length>0&&this.vl.forEach(function(t,r){t.forEach(function(t){t.KG&&t.KG(e)})})},e}();t.x5=a},function(e,t,r){"use strict";var i=r(4),n=r(0),s=r(23),o=function(){function e(){this.Ag=1,this.client=n.Framework.resolve(n.Framework.V.G)}return e.prototype.init=function(e,t,r){this.q5=e,this.logger=t,this.channelManager=r},e.prototype.sY=function(){return this.client.zd().sY()},e.prototype.start=function(e,t){var r=this;this.logger.debug("MY ID "+t),this.gd=t,this.client&&this.client.zd()?this.client.zd().on(Services.fY,1,function(e){r.y9(e.msg)}):this.logger.error("error getting active services connection"),this.q5.O5(this.gd)},e.prototype.y9=function(e){var t=JSON.parse(e);this.q5.R5&&this.logger.debug("RCV MSG FROM SRV ",t),this.channelManager.q0(t.msgName,t.msg)},e.prototype.T9=function(e,t,r){var n=this.wrap(t,e,r);if(this.client&&this.client.zd()){var o=JSON.stringify(n);this.q5.R5&&this.logger.debug(" FORWARDING REQUEST : "+o);var a=new s.Jd(Services.fY,0,o);return this.client.zd().send(a)}return i.reject()},e.prototype.wrap=function(e,t,r){return{msgId:this.Ag++,destination:r,msg:e,msgName:t}},e.prototype.E9=function(e,t,r,i){var n={channel:{label:t.label,ice_candidates:r}};return this.T9("update_ice_candidates",n,i)},e.prototype.offer=function(e,t,r,i,s){var o={peer:{guid:e,first_seen:n.Framework.time()},channel:{label:r.label,ice_candidates:i,offer:s}};return this.T9("offer",o,r.z5)},e.prototype.X5=function(e,t,r){this.q5.R5&&this.logger.debug("Discovery service rejects offer from peer "+t+" on channel "+r);var i={t9:e,channel:r};return this.T9("answer",i,t)},e.prototype.answer=function(e,t,r,i){var n={answer:t,m9:this.q5.gd,channel:{label:e.label,ice_candidates:r}};return this.T9("answer",n,i)},e}();t._J=o},function(e,t,r){"use strict";var i=r(3),n=r(5),s=r(0),o=function(){function e(){this.rF=new i,this.I9=[],this.B6=new i,this.S9=new i}return e.prototype.init=function(e){this.logger=s.Framework.resolve(s.Framework.V.R).log(e.sessionId),this.ED=e.ED,this.R9()},e.prototype.R9=function(){var e=this;s.Framework.setInterval(function(){e.w9()},n.hh.ya.Ea)},e.prototype.w9=function(){var e=this;this.B6.values().filter(function(e){return s.Framework.time()-e.qf.Lf>n.hh.ya.va}).forEach(function(t){e.ED.abort(t.Kf),e.lF(t.Zf(),t.$f())})},e.prototype.uF=function(e){this.b9(e.Zf(),e.$f()),this.B6.set(e.$f(),e)},e.prototype.lF=function(e,t){this.B6.delete(t),this.C9(e,t)},e.prototype.fF=function(e){this._9(e)},e.prototype.pF=function(e){this.rF.delete(e)},e.prototype._9=function(e){if(this.rF.set(e.Zf(),e.Jf()),this.I9.push(e.Zf()),this.rF.length>n.hh.ya.ga){var t=this.I9[0];this.rF.delete(t),this.I9.splice(0,1)}},e.prototype.tF=function(e){return this.rF.has(e)},e.prototype.iF=function(e){return this.rF.get(e)},e.prototype.b9=function(e,t){if(this.S9.has(e))this.S9.get(e).push(t);else{var r=[];r.push(t),this.S9.set(e,r)}},e.prototype.C9=function(e,t){if(this.S9.has(e)){var r=this.S9.get(e),i=r.indexOf(t);-1==i?this.logger.warn("I CANNOT FIND THE REQUEST ID "+t):r.splice(i,1),0==r.length&&this.S9.delete(e)}else this.logger.warn("TRIED TO REMOVE AN OBJECT THAT DOES NOT EXIST")},e.prototype.oF=function(e){var t=[];if(this.P9(e))for(var r=this.S9.get(e),i=0;i<r.length;i++)this.B6.has(r[i])&&t.push(this.B6.get(r[i]));return t},e.prototype.P9=function(e){return this.S9.has(e)},e.prototype.EF=function(){return 0!=this.B6.length},e.prototype.sF=function(e){return this.S9.has(e)},e}();t.ya=o},function(e,t,r){"use strict";var i=r(3),n=r(5),s=r(28),o=s.cg,a=function(){function e(){this.udpScore=0,this.A9=0,this.watchingBitrate=-1,this.O9=!1,this.N9=!1,this.D9=!1,this.k9=!1,this.L9=new i}return e.prototype.setId=function(e){this.M9=e},e.prototype.getId=function(){return this.M9},e.prototype.ZJ=function(e){this.udpScore=e},e.prototype.QG=function(){return this.udpScore},e.prototype.$J=function(e){this.A9=e},e.prototype.L1=function(){return this.A9},e.prototype.setContextId=function(e){var t=o.oT(e+"_"+n.hh.Ho.Do).toString(o.Uy.By);this.contextId=t},e.prototype.getContextId=function(){return this.contextId},e.prototype.kG=function(e){this.O9=e},e.prototype.ck=function(){return this.O9},e.prototype.YG=function(e){this.D9=e},e.prototype.yk=function(){return this.D9},e.prototype.Hj=function(e){this.k9=e},e.prototype.mk=function(){return this.k9},e.prototype.U1=function(e){this.F9=e},e.prototype.gk=function(){return this.F9},e.prototype.B1=function(e){this.U9=e},e.prototype.Fj=function(){return this.U9},e.prototype.DG=function(e){this.B9=e},e.prototype.Rk=function(){return this.B9},e.prototype.H9=function(e){this.N9=e},e.prototype.Tk=function(){return this.N9},e.prototype.FX=function(e){this.watchingBitrate=e},e.prototype.MX=function(){return this.watchingBitrate},e.prototype.FG=function(e){this.nG=e},e.prototype.Ik=function(){return this.nG},e.prototype.DH=function(e){this.privateIp=e},e.prototype.getPrivateIp=function(){return this.privateIp},e.prototype._H=function(e){this.publicIp=e},e.prototype.getPublicIp=function(){return this.publicIp},e.prototype.setReportingGuid=function(e){this.reportingGuid=e},e.prototype.getReportingGuid=function(){return this.reportingGuid},e.prototype.setDelta=function(e){this.delta=e},e.prototype.getDelta=function(){return this.delta},e.prototype.FD=function(e,t){this.L9.set(e,t)},e.prototype.kD=function(e){this.L9.delete(e)},e.prototype.Uj=function(){return this.L9},e.prototype.hB=function(){return this.Tk()?this.L9.keys():[]},e.prototype.cB=function(){return this.Tk()?[]:this.L9.keys()},e.prototype.XJ=function(e){this.ticket=e},e.prototype.Sk=function(){return this.ticket},e.prototype.WJ=function(e){this.mX=e},e.prototype.x8=function(){return this.mX},e}();t.HJ=a},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(10),s=r(183),o=r(2),a=r(1),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.e5=function(t,r){var i=[],s=[],h=[];try{var c=this.yD.gk();return t.forEach(function(e){e.Ek.peerInfo.type==n.Tc.W&&i.push(e);var t=e.Ek.peerInfo.internalAs;0!=c&&t&&c==t&&s.push(e),e.Ek.peerInfo.type==n.Tc.yc&&h.push(e)}),i.length>0?e.prototype.e5.call(this,i,r):s.length>0?e.prototype.e5.call(this,s,r):e.prototype.e5.call(this,h,r)}catch(e){return a.ErrorMonitor.ve().logError("Error choosing partner for p2p",this.loggerId,o.hs.ji.Vi,e),null}},t}(s.x9);t.UJ=h},function(e,t,r){"use strict";var i=r(0),n=r(5),s=r(1),o=r(2),a=function(){function e(){this.loggerId="[PickerTRSingle] ",this.logger=i.Framework.resolve(i.Framework.V.R).log()}return e.prototype.X8=function(e){this.yD=e},e.prototype.e5=function(e,t){var r=this.q9(e);return r?r[0]:null},e.prototype.G9=function(e,t){return n.hh.Fa.La*(e.k8()/t)+n.hh.Fa.Ma*(1-e.M8())},e.prototype.q9=function(e){var t=this;try{var r=.1;r+=e.map(function(e){return e.k8()}).reduce(function(e,t){return e+t});var i=e.sort(function(e,i){return t.G9(i,r)-t.G9(e,r)}),n=[];return i.forEach(function(e){n.push(e.guid+":"+t.G9(e,r))}),this.logger.debug("SC ["+n.join(", ")+"]"),i}catch(e){return s.ErrorMonitor.ve().logError("Error sorting the partners",this.loggerId,o.hs.Gi.qi,e),null}},e}();t.x9=a},function(e,t,r){"use strict";var i=r(49),n=r(3),s=r(59),o=r(7),a=r(5),h=r(0),c=r(47),u=r(91),l=r(6),p=l.he.Th,d=function(){function e(){this.V9=!1}return e.prototype.init=function(e){this.logger=h.Framework.resolve(h.Framework.V.R).log(e.sessionId),this.yD=e.yD,this.GJ=e.GJ,this.oG=e.oG,this.zM=e.zM},e.prototype.RD=function(e){this.wD=e},e.prototype.G1=function(){this.V9=!0,this.cX()},e.prototype.LG=function(){if(a.hh.fa.na)return void this.j9();var e=!this.yD.yk()||this.yD.ck()||!p;this.logger.debug("REQUEST REMOTE ELECTION "+e),e?this.j9():this.Q9()},e.prototype.j9=function(){var e=this.yD.gk(),t=e&&0!=e?u.Xq.nD:u.Xq.AS;this.GJ.F1(t)},e.prototype.Q9=function(){this.GJ.F1(u.Xq.Jq)},e.prototype.cX=function(){var e=this;this.rX(),this.K9=h.Framework.setInterval(function(){e.LG()},a.hh.fa.oa),this.zM.SD(),this.LG()},e.prototype.rX=function(){this.K9&&h.Framework.clearInterval(this.K9)},e.prototype.iX=function(){this.zM.ek(),this.wD.LM()},e.prototype.MG=function(e){var t=new n;if(e){this.Y9().forEach(function(e){t.set(e,i.sD.iD)});var r=!1,s=i.sD.iD;this.yD.Tk()&&(s=i.sD.nD,r=!0),this.zM._D(t,s,r)}else this.zM._D(t,i.sD.mc,!1)},e.prototype.H1=function(e,t){var r=this,h=this.W9(t),c=this.zM.CD().isLive();if(e&&e.length>0){var u=new s;u.addEach(e);var l=a.hh.fa.ea||u.some(function(e){var t=o.rc.Zh(hive.services.protocol.IF.SF,e.key.rankType);return r.logger.info("GOT RANKING "+t+",CRV "+e.cumulatedRankValue+",RV "+e.ranking+",GS "+e.groupSize),r.z9(e)}),p=null!=h&&0!=h.length;if(this.logger.debug("Tracker reports ["+h.keys().join(", ")+"]  bitrates"),this.logger.debug("ISLive "+c+" DoElect "+l),a.hh.fa.$o&&c){var d=this.Y9();if(p&&l){this.yD.H9(!0),this.logger.info("BECOMING SITE LEADER");var f=new n;d.forEach(function(e){f.set(e,i.sD.iD)}),h.forEach(function(e,t){r.oG.kj.has(e)||f.set(t,i.sD.nD)}),this.zM._D(f,i.sD.nD,!1)}else{this.yD.H9(!1);var g=i.sD.mc,E=new n;this.yD.yk()&&this.yD.ck()&&(g=i.sD.iD,d.forEach(function(e){E.set(e,i.sD.iD)})),this.zM._D(E,g,!1)}}}else if(c){a.hh.fa.ea?this.yD.H9(!0):this.yD.H9(!1);var v=new n,g=i.sD.mc;if(this.yD.yk()&&this.yD.ck()){var y=this.Y9();y.forEach(function(e){v.set(e,i.sD.iD)}),g=i.sD.iD}a.hh.fa.ea&&(g=i.sD.nD),this.zM._D(v,g,!1)}},e.prototype.Jj=function(){var e=this.Y9(),t=new n;e.forEach(function(e){t.set(e,i.sD.iD)});var r=!1,s=i.sD.iD;this.yD.Tk()&&(s=i.sD.nD,r=!0),this.zM._D(t,s,r)},e.prototype.Y9=function(){var e=new s;return this.oG.kj.forEach(function(t,r){t.peerInfo.watchingBitrate&&!e.has(t.peerInfo.watchingBitrate)&&e.add(t.peerInfo.watchingBitrate)}),e.toArray()},e.prototype.W9=function(e){var t=new n,r=this.yD.gk();return e.forEach(function(e){null!=e.watchingBitrate&&(r>0?r===e.internalAs&&t.set(e.watchingBitrate,e.guid):t.set(e.watchingBitrate,e.guid))}),t},e.prototype.z9=function(e){if(e.groupSize<2)return!1;var t=Math.max(1,Math.round(e.groupSize*a.hh.fa.ra));return p||h.Framework.C()&&c.$N.XN?e.ranking<t&&(this.yD.ck()||!this.yD.yk()):e.ranking<t},e.prototype.ZD=function(e,t,r,n){var s=1,o=this.wD.lk(r,t),c=a.hh.fa.ha*h.Framework.random();if(e==i.sD.iD){var u=this.wD.xM(),l=u-c;s=Math.max(1,o-l)}else if(e==i.sD.nD){var p=a.hh.fa.ca-c;s=Math.max(1,o-p)+n}return s=Math.round(s)},e}();t.BJ=d},function(e,t,r){"use strict";var i=r(0),n=r(3),s=r(23),o=r(33),a=r(1),h=r(2);r(60);var c=function(){function e(){this.J9=!1,this.loggerId="[TRACKER] ",this.X9=new n,this.yg=new o.Yb,this.protocol=new o.bC(this.yg),this.logger=i.Framework.resolve(i.Framework.V.R).log(),i.Framework.C()||(this.client=i.Framework.resolve(i.Framework.V.G))}return e.prototype.m1=function(e,t){try{return this.logger.debug("TRACKER CLIENT REGISTERED "+e),this.X9.has(e)||this.X9.set(e,t),this.X9.get(e)}catch(e){a.ErrorMonitor.ve().logError("Error adding new tracker client",this.loggerId,h.hs.xi.Mi,e)}},e.prototype.Rg=function(e){this.X9.delete(e)},e.prototype.wg=function(e){return this.X9.get(e)},e.prototype.M1=function(e){var t=this;if(this.client&&this.client.zd()){var r=this.Z9(e),i=new s.Jd(Services.pY,1,r),n=this.client.zd().send(i);n.then(function(){return t.logger.info("TRACKER REQUEST SENT")}),n.fail(function(e){a.ErrorMonitor.ve().logError("Error sending tracker request",t.loggerId,h.hs.xi.Di)})}else a.ErrorMonitor.ve().logError("Error sending tracker request because of connection",this.loggerId,h.hs.xi.Bi)},e.prototype.init=function(){var e=this;this.logger.debug("TRACKER MANAGER INIT"),this.client&&this.client.zd()?this.client.zd().on(Services.pY,10,function(t){try{var r=e.e7(t.msg);if(r&&e.X9.has(r.sessionId)){e.X9.get(r.sessionId).KX(r)}else e.logger.warn("SESSION ID NOT VALID OR NULL "+r.sessionId)}catch(t){a.ErrorMonitor.ve().logError("Error initializing the tracker manager",e.loggerId,h.hs.xi.Hi,t)}}):i.Framework.C()||this.logger.warn(this.loggerId+" CANNOT GET ACTIVE CONNECTION")},e.prototype.e7=function(e){try{var t='[1, "TRACKER_RESP", 4, 0,'+e+"]";this.yg.eC(t);var r=(this.protocol.zC(),new hive.services.protocol.IF.TrackerResponse);return r.read(this.protocol),r.infos.map(function(e){e.guid=atob(e.guid),e.publicIp=new InetAddress,e.publicIp.address=e.publicIpString,e.privateIp=new InetAddress,e.privateIp.address=e.privateIpString}),r.peerInfo.guid=atob(r.peerInfo.guid),r.peerInfo.publicIp=new InetAddress,r.peerInfo.publicIp.address=r.peerInfo.publicIpString,r.peerInfo.privateIp=new InetAddress,r.peerInfo.privateIp.address=r.peerInfo.privateIpString,this.protocol.t_(),this.J9&&this.logger.debug("RESP "+JSON.stringify(r)),r}catch(e){return a.ErrorMonitor.ve().logError("Error deserializing the tracker response",this.loggerId,h.hs.xi.Ui,e),null}},e.prototype.Z9=function(e){try{this.protocol.AC("TRACKER_REQ",o.gb.ONEWAY,0),e.write(this.protocol),this.protocol.DC();var t=this.yg.pC(),r=this.FB(t,",",4);return t.slice(r+1,t.length-1)}catch(e){throw a.ErrorMonitor.ve().logError("Error serializing the new request",this.loggerId,h.hs.xi.Fi,e),new Error(e)}},e.prototype.FB=function(e,t,r){return e.split(t,r).join(t).length},e}();t.wJ=c},function(e,t,r){"use strict";var i=r(26),n=i.HiveComm.$g,s=i.HiveComm.eE,o=function(){function e(){}return e.prototype.init=function(e,t){this.peer=e,this.rl=t},e.prototype.t7=function(e){e.uuid=this.rl.Ul.gd;var t=this.rl.Ul.iB.KU,r=this.r7(t.p2pSubRespQt),i=this.r7(t.srcRespQt);e.cdnRequests+=this.r7(t.srcReqN),e.cdnResponses+=this.r7(t.srcRespN),e.cdnResponseErrors+=this.r7(t.srcRespErrN),e.cdnResponseBytes+=this.r7(t.srcRespQt),e.p2pRequests+=this.r7(t.p2pSubReqN),e.p2pResponses+=this.r7(t.p2pSubRespN),e.p2pResponseErrors+=this.r7(t.p2pSubRespErrN),e.p2pResponseBytes+=this.r7(t.p2pSubRespQt),e.savings=this.r7(r/(i+r)*100)},e.prototype.r7=function(e){return e||0},e.prototype.i7=function(e){var t=this;e.uuid=this.rl.Ul.gd,this.rl.Ul.iB.WU.forEach(function(r,i){e.partners[i]||(e.partners[i]=new s);var n=e.partners[i];n.uuid=i,n.sentBytes+=t.r7(r.p2pSuccSent),n.receivedBytes+=t.r7(r.p2pSuccReceived),n.successTransfers+=t.r7(r.p2pSuccReq),n.failedTransfers+=t.r7(r.p2pFailReq)})},e.prototype.render=function(){var e=this.rl.renderStatsCallback;if(e){var t=new n;this.t7(t),this.i7(t);try{e(t)}catch(e){console.warn("error in rendering local stats",e)}}},e}();t.mJ=o},function(e,t,r){"use strict";var i=r(35),n=r(3),s=r(0),o=r(5),a=r(1),h=r(2),c=function(){function e(){this.loggerId="[ChunkHandler] ",this.n7=new n,this.s7=new n}return e.prototype.init=function(e){this.logger=s.Framework.resolve(s.Framework.V.R).log(e.sessionId)},e.prototype.YX=function(e){try{var t=e.Zf(),r=e.jf,n=e.qf.Pf,c=Math.ceil(n/o.hh.Fa.Da),u=e.zf.bitrate,l=0,p=Math.min(o.hh.Fa.Da,n);this.o7(t,u);for(var d=p-l;c>0;){var f=null;try{s.Framework.C()||(f=i.wrap(r.slice(l,p))),l+=d}catch(e){a.ErrorMonitor.ve().logError("Error wrapping chunk",this.loggerId,h.hs.Or.Pr,e)}this.n7.get(t).push(f),c--,p=Math.min(l+o.hh.Fa.Da,n),d=p-l}}catch(e){a.ErrorMonitor.ve().logError("Error adding fragment to the fragmentMap",this.loggerId,h.hs.Or.Cr,e)}},e.prototype.o7=function(e,t){try{if(this.s7.has(t)&&this.s7.get(t).length>o.hh.Ra.Sa){var r=this.s7.get(t)[0];this.n7.delete(r),this.s7.get(t).shift()}if(this.s7.has(t))this.s7.get(t).push(e),this.n7.set(e,[]);else{var i=[e];this.s7.set(t,i),this.n7.set(e,[])}}catch(e){a.ErrorMonitor.ve().logError("Error generating the chunk handler hashmaps",this.loggerId,h.hs.Or.Ar,e)}},e.prototype.l8=function(e,t){return this.n7.has(e)?this.n7.get(e)[t]:null},e.prototype.a7=function(e){return this.s7.get(e)},e.prototype.oX=function(){this.n7=new n,this.s7=new n},e}();t.PJ=c},function(e,t,r){"use strict";var i=r(3),n=r(5),s=r(0),o=r(2),a=r(1),h=r(28),c=(h.cg,function(){function e(){this.loggerId="[IPSpoofing] ",this.h7=n.hh.Vo.xo}return e.prototype.init=function(e){this.logger=s.Framework.resolve(s.Framework.V.R).log(e.sessionId),this.TD=e.TD,this.c7=new i,this.u7=new i,this.h7&&this.l7()},e.prototype.fj=function(e,t,r){try{if(!this.h7)return!1;if(this.c7.has(e)||!t||!r)return!1;var i=this.p7(t,r);if(i&&this.u7.has(i)){if(this.u7.get(i).length>=n.hh.Vo.qo)return a.ErrorMonitor.ve().logError("Error peer violates ip spoofing rules",this.loggerId,o.hs.bn.Sn,{privateIp:t,publicIp:r,otherGuid:e}),this.logger.debug(this.loggerId+"Spoofing rule violated for "+e+" with privateIp "+t+" publicIp "+r),!0}return!1}catch(t){return a.ErrorMonitor.ve().logError("Error checking if peer violates ip spoofing rules",this.loggerId,o.hs.bn.In,{detailedError:t,otherGuid:e}),!1}},e.prototype.Tj=function(e,t,r){try{if(this.h7&&r&&t){var i=this.p7(t,r),n=this.c7.get(e);n&&n!=i&&this.d7(e,n),this.f7(e,i)}}catch(t){a.ErrorMonitor.ve().logError("Error adding or updating ip spoofing maps",this.loggerId,o.hs.bn.Rn,{detailedError:t,otherGuid:e})}},e.prototype.g7=function(e){this.h7&&this.Gj(e)},e.prototype.KG=function(e){this.h7&&this.Gj(e)},e.prototype.f7=function(e,t){this.c7.set(e,t);var r=[];this.u7.has(t)&&(r=this.u7.get(t),-1!=r.indexOf(e))||(r.push(e),this.u7.set(t,r))},e.prototype.Gj=function(e){var t=this.c7.get(e);t?(this.d7(e,t),this.c7.delete(e)):this.logger.warn(this.loggerId+"no ip pair for guid "+e)},e.prototype.d7=function(e,t){var r=this.u7.get(t),i=r.indexOf(e);-1!=i?(r.splice(i,1),0==r.length?this.u7.delete(t):this.u7.set(e,r)):this.logger.warn(this.loggerId+"pair list "+t+" does not contain guid "+e)},e.prototype.p7=function(e,t){return t+":"+e},e.prototype.l7=function(){var e=this;s.Framework.setInterval(function(){try{var t=[];e.u7.forEach(function(r,i){if(r.length>n.hh.Vo.qo){for(var s=[],o=n.hh.Vo.qo;o<r.length;o++)s.push(r[o]);e.logger.warn("IpSpoofing violation for "+i+" - closing: "+s),t.concat(s)}}),t.forEach(function(t){e.TD.bj(t)})}catch(t){a.ErrorMonitor.ve().logError("Error checking periodic ip spoofing tables",e.loggerId,o.hs.bn.wn,t)}},n.hh.Vo.Go)},e}());t.Vo=c},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(190),s=r(5),o=r(98),a=r(0),h=r(2),c=r(1),u=function(e){function t(){var t=e.call(this)||this;return t.E7="[Score Partner Selection] ",t.type="Score",t}return i(t,e),t.prototype.v7=function(e,t){try{return t.sort(o.EQ.dQ),t.slice(0,e)}catch(e){return c.ErrorMonitor.ve().logError("Error selecting partners to remove",this.E7,h.hs.vr.pr,e),[]}},t.prototype.y7=function(e,t,r,i){try{return i.filter(function(e){return t.every(function(t){return t.guid!=e.peerInfo.guid})&&-1==r.indexOf(e.peerInfo.guid)}).slice(0,e)}catch(e){return c.ErrorMonitor.ve().logError("Error selecting partners to add",this.E7,h.hs.vr.dr,e),[]}},t}(n.T7);t.OJ=u;var l=function(){function e(){this.E7="[Score Partner Selection] "}return e.prototype.Nj=function(e){try{var t=e.filter(function(e){return!e.wj.yg.Dg()}),r=a.Framework.time(),i=t.filter(function(e){return r-e.y8>s.hh.Ho.Bo});return i.length>0?(i.sort(o.yQ.dQ),i.slice(0,1)[0]):null}catch(e){return c.ErrorMonitor.ve().logError("Error updating partners out",this.E7,h.hs.vr.gr,e),null}},e}();t.NJ=l},function(e,t,r){"use strict";var i=r(97),n=r(5),s=r(0),o=r(1),a=r(2),h=function(){function e(){this.jM="[BaseInPartnerSelection] ",this.logger=s.Framework.resolve(s.Framework.V.R).log()}return e.prototype.uj=function(e,t,r,h){try{var c=[],u=[],l=Math.round(e*(1-n.hh.No.Ao)),p=Math.max(t.length-l,0),d=e-t.length+p;if(p>0){var f=t.filter(function(e){return!e.wj.yg.Dg()}),g=s.Framework.time(),E=f.filter(function(e){return g-e.y8>n.hh.Ho.Bo}),v=Math.min(E.length,p);u=this.v7(v,E);var y=[],T=[];u.forEach(function(e){y.push(e.guid),T.push(e.gQ.fQ(!1))})}return d>0&&(c=this.y7(d,t,r,h)),this.logger.debug("[PART] A/R: "+d+"/"+p+" ["+c.map(function(e){return e.peerInfo.guid.substring(0,8)})+"/"+u.map(function(e){return e.guid.substring(0,8)})+"] P:["+t.map(function(e){return e.guid.substring(0,8)})+"] M:["+h.map(function(e){return e.peerInfo.guid.substring(0,8)})+"]"),new i.pQ(c,u)}catch(e){return o.ErrorMonitor.ve().logError("Error updating in partners",this.jM,a.hs.lr.ur,e),new i.pQ([],[])}},e}();t.T7=h},function(e,t,r){"use strict";var i=r(3),n=r(97),s=r(5),o=r(0),a=r(7),h=r(98),c=r(2),u=r(1),l=function(){function e(){this.m7="[Delta Partner Selection] "}return e.prototype.uj=function(e,t,r,i,a){try{this.yD=e;var h=[],l=[],p=Math.round(t*(1-s.hh.No.Ao)),d=Math.max(r.length-p,0),f=t-r.length+d;if(d>0){var g=r.filter(function(e){return!e.wj.yg.Dg()}),E=o.Framework.time(),v=g.filter(function(e){return E-e.y8>s.hh.Ho.Bo}),y=Math.min(v.length,d);l=this.v7(y,v),l.length>y&&(f+=l.length-y);var T=[],m=[];l.forEach(function(e){T.push(e.guid),m.push(e.gQ.fQ(!1))})}return f>0&&(h=this.y7(f,r,i,a)),new n.pQ(h,l)}catch(e){return u.ErrorMonitor.ve().logError("Error updating in partners",this.m7,c.hs.Rr.ur,e),new n.pQ([],[])}},e.prototype.v7=function(e,t){var r=this;try{t.sort(h.EQ.dQ);var i=t.slice(0,e);return t.slice(e,t.length).forEach(function(e){r.I7(e.Ek)&&i.push(e)}),i}catch(e){return u.ErrorMonitor.ve().logError("Error selecting partners to remove",this.m7,c.hs.Rr.pr,e),[]}},e.prototype.y7=function(e,t,r,i){var n=this;try{var o=[],a=[],h=[],l=[],p=[],d=this.yD.gk();d||(d=-1);var f=[];t.forEach(function(e){f.push(e.guid)});var g=Math.floor(e*s.hh.Ho.Mo),E=this.yD.Uj();i.forEach(function(e){var t=e.peerInfo.streams;if(t){var r=n.isLeader(e,t,d,E);r.cG?r.S7?o.push(e):a.push(e):n.R7(e,s.hh.Ho.Lo)?n.I7(e)?p.push(e):l.push(e):h.push(e)}else p.push(e)});var v=this.w7(o,a,h,l,p,e,e,g);return v.slice(0,Math.min(v.length,e))}catch(e){return u.ErrorMonitor.ve().logError("Error selecting partners to add",this.m7,c.hs.Rr.dr,e),[]}},e.prototype.w7=function(e,t,r,i,n,h,l,p){try{var d=[],f=[];e.length>0&&o.Framework.random()<s.hh.Ho.Fo&&(e=a.rc.zh(e),f=e.slice(0,Math.min(e.length,p)),d.push.apply(d,f),l=h-f.length);var g=[];t.length>0&&(t=a.rc.zh(t),g=t.slice(0,Math.min(t.length,p)),d.push.apply(d,g),l=h-g.length);var E=[];r.length>0&&(r=a.rc.zh(r),E=r.slice(0,Math.min(r.length,p)),d.push.apply(d,E),l=h-E.length);var v=null;if(i.length>0){i=a.rc.zh(i),v=i.slice(0,Math.min(i.length,l));l=h-((E.length>0?E.length:0)-v.length)}var y=[];return l>0&&n.length>0&&(n=a.rc.zh(n),y=n.slice(0,Math.min(n.length,l)),d.push.apply(d,y)),d}catch(e){return u.ErrorMonitor.ve().logError("Error grouping partners",this.m7,c.hs.Rr.yr,e),[]}},e.prototype.isLeader=function(e,t,r,n){try{var s=!1,o=!1,a=new i;t.forEach(function(e){a.set(e.bitrate,e)});var h=new i;return a.forEach(function(e,t){n.has(t)&&h.set(t,e)}),h.keys().length>0&&h.forEach(function(t,i){var a=n.get(i);if(a&&t.state>=2&&a.type>=1){var h=e.peerInfo.internalAs;h>0&&h==r&&(o=!0),s=!0}}),{cG:s,S7:o}}catch(t){return u.ErrorMonitor.ve().logError("Error identifying if member is leader or same site",this.m7,c.hs.Rr.Tr,{detailedError:t,otherGuid:e.peerInfo.guid}),{cG:!1,S7:!1}}},e.prototype.R7=function(e,t){try{var r=this.yD.getDelta(),i=this.yD.MX(),n=this.b7(e,i);return(0!=r||0!=n)&&(r<n&&r>n+t)}catch(t){return u.ErrorMonitor.ve().logError("Error identifying if member is ahead or behind delta",this.m7,c.hs.Rr.mr,{detailedError:t,otherGuid:e.peerInfo.guid}),!1}},e.prototype.I7=function(e){try{var t=this.yD.getDelta(),r=this.yD.MX(),i=this.b7(e,r);return 0==t&&0==i||t>i}catch(t){return u.ErrorMonitor.ve().logError("Error identifying if member is behind or not retrieveing the same bitrate",this.m7,c.hs.Rr.Ir,{detailedError:t,otherGuid:e.peerInfo.guid}),!1}},e.prototype.b7=function(e,t){try{var r=e.peerInfo.streams,i=0;return r&&r.forEach(function(e){e.bitrate==t&&(i=e.delta)}),i}catch(t){return u.ErrorMonitor.ve().logError("Error retrieving delta for member's bitrate",this.m7,c.hs.Rr.Sr,{detailedError:t,otherGuid:e.peerInfo.guid}),0}},e}();t.DJ=l;var p=function(){function e(){this.loggerId="[Throughput Partner Selection] ",this.logger=o.Framework.resolve(o.Framework.V.R).log()}return e.prototype.Nj=function(e,t,r){var n=this;try{this.yD=e;var a=this.yD.Uj(),h=t.streams;if(h){var l=r.filter(function(e){return!e.wj.yg.Dg()}),p=o.Framework.time(),d=l.filter(function(e){return p-e.y8>s.hh.Ho.Bo});if(0==h.filter(function(e){return a.has(e.bitrate)}).length)return null;var f=this.C7(d),g=this._7(a,f);if(g)return g;var E=a.keys().length,v=d.length,y=Math.round(v/E),T=f.keys().filter(function(e){return a.has(e)}),m=new i;T.forEach(function(e){m.set(e,f.get(e))});var I=this.P7(m,y);return null!=I?I:(h.forEach(function(e){var t=m.get(e.bitrate);if(null!=t){var r=n.A7(t);if(r.length>0&&!s.hh.Ho.Uo)return r[0]}}),null)}return null}catch(e){return u.ErrorMonitor.ve().logError("Error selecting partner to update out",this.loggerId,c.hs.br.wr,e),null}},e.prototype.C7=function(e){var t=new i;return e.forEach(function(e){var r=e.Ek.peerInfo.watchingBitrate;if(r||(r=-1),t.has(r)){var i=t.get(r);i.push(e),t.set(r,i)}else t.set(r,[e])}),t},e.prototype.A7=function(e){return e.filter(function(e){if(0==e.vQ.I5(s.hh.Oa.Aa))return e})},e.prototype.P7=function(e,t){var r=[];e.forEach(function(e,t){r.push({bitrate:t,O7:e.length})}),r.sort(function(e,t){return e.O7>t.O7?1:e.O7<t.O7?0:-1});var i=null;return r.forEach(function(r){if(e.get(r.bitrate).length>t){var n=e.get(r.bitrate);n.length>0&&(n.sort(h.yQ.dQ),i=n[0])}}),i},e.prototype._7=function(e,t){var r=this,i=null;if(t.has(-1))i=t.get(-1)[0];else{t.filter(function(t,r){return!e.has(r)}).forEach(function(e,t){var n=r.A7(e);if(n.length>0)return void(i=n[0])})}return i},e}();t.kJ=p},function(e,t,r){"use strict";var i=r(0),n=r(9),s=r(34),o=r(24),a=r(10),h=r(14),c=r(5),u=function(){function e(){this.N7=!0===h.HiveConfig.Stats.AudioAccounting,this.D7=null}return e.prototype.init=function(e){this.logger=i.Framework.resolve(i.Framework.V.R).log(e.sessionId),this.loggerId="S["+e.sessionId+"]",this.Ul=e.rl.Ul,this.yD=e.yD,this.pX()},e.prototype.Z1=function(e){this.Ul.FL.metrics.memN=e,this.Ul.iB.metrics.memN=e},e.prototype.vj=function(e,t){this.Ul.FL.metrics.lookupTotal++,this.Ul.iB.metrics.lookupTotal++,e?(this.Ul.FL.metrics.lookupNotFound++,this.Ul.iB.metrics.lookupNotFound++,this.Ul.FL.metrics.lookupFailed++,this.Ul.iB.metrics.lookupFailed++):t?(this.Ul.FL.metrics.lookupFailed++,this.Ul.iB.metrics.lookupFailed++):(this.Ul.FL.metrics.lookupReqEstablished++,this.Ul.iB.metrics.lookupReqEstablished++)},e.prototype.Mj=function(){this.Ul.FL.metrics.lookupReqAccept++,this.Ul.iB.metrics.lookupReqAccept++},e.prototype.S8=function(e,t,r,i,n){if(this.N7||i){var s=n==o.bf.wf,a=this.Ul.OB(e),h=this.Ul.AB(e);a.p2pSuccReq++,a.p2pSuccReceived+=t,h.p2pSuccReq++,h.p2pSuccReceived+=t,s&&(a.p2pSuccReceivedLow+=t,h.p2pSuccReceivedLow+=t),r>0&&!s&&(a.p2pSuccReceivedLow+=t,h.p2pSuccReceivedLow+=t)}},e.prototype.b8=function(e,t,r,i,n,s){if(this.N7||n){var a=s==o.bf.wf,h=this.Ul.OB(e),c=this.Ul.AB(e);h.p2pFailReq++,h.p2pSuccReceived+=t,h.p2pFailReceived+=i-t,c.p2pSuccReq++,c.p2pSuccReceived+=t,c.p2pFailReceived+=i-t,a&&(h.p2pSuccReceivedLow+=t,c.p2pSuccReceivedLow+=t),r>0&&!a&&(h.p2pSuccReceivedLow+=t,c.p2pSuccReceivedLow+=t)}},e.prototype.C8=function(e,t,r){if(this.N7||r){var i=this.Ul.OB(e),n=this.Ul.AB(e);i.p2pFailReq++,i.p2pFailReceived+=t,n.p2pFailReq++,n.p2pFailReceived+=t}},e.prototype.P8=function(e,t,r){if(this.N7||r){var i=this.Ul.OB(t),n=this.Ul.AB(t);i.p2pSuccResp++,i.p2pSuccSent+=e,n.p2pSuccResp++,n.p2pSuccSent+=e}},e.prototype.D8=function(e,t,r,i){if(this.N7||i){var n=this.Ul.OB(r),s=this.Ul.AB(r);n.p2pPartResp++,n.p2pSuccSent+=e,n.p2pFailSent+=t-e,s.p2pPartResp++,s.p2pSuccSent+=e,s.p2pFailSent+=t-e}},e.prototype.O8=function(e,t,r){if(this.N7||r){var i=this.Ul.OB(t),n=this.Ul.AB(t);i.p2pFailResp++,i.p2pFailSent+=e,n.p2pFailResp++,n.p2pFailSent+=e}},e.prototype.ZM=function(e){e?this.Ul.FL.metrics.bitrateUpN++:this.Ul.FL.metrics.bitrateDwnN++},e.prototype.NX=function(e){if(-1==[n.vc.gc,n.vc.Ec].indexOf(e.Xf())){var t=e.Xf()!=n.vc.dc;if((this.N7||t)&&(this.Ul.bB().reqN++,this.Ul.xL().reqN++,e.Xf()==n.vc.fc)){var r=e;if(r.bitrate){var i=r.bitrate;this.Ul.CB(i).reqN++,this.Ul.BL(i).reqN++}}}else this.Ul.bB().reqOtherN++,this.Ul.xL().reqOtherN++},e.prototype.$X=function(e){var t=e.Xf()!=n.vc.dc;if(this.N7||t){var r=this.Ul.bB(),i=this.Ul.xL(),s=null,a=null;if(-1==[n.vc.gc,n.vc.Ec].indexOf(e.Xf())){if(r.srcReqN++,i.srcReqN++,t){var h=this.k7(e);h&&(s=this.Ul.CB(h),a=this.Ul.BL(h),s.srcReqN++,a.srcReqN++)}if(e.Jf()==o.bf.If&&(r.srcOtherReqN++,i.srcOtherReqN++,t)){var h=this.k7(e);h&&(s.srcOtherReqN++,a.srcOtherReqN++)}}}},e.prototype.t5=function(e){if(this.Ul.bB().p2pSubReqN++,this.Ul.xL().p2pSubReqN++,e.Xf()==n.vc.fc){var t=this.k7(e);t&&(this.Ul.CB(t).p2pSubReqN++,this.Ul.BL(t).p2pSubReqN++)}},e.prototype.L7=function(e,t){this.M7(e,this.Ul.xL()),this.M7(e,this.Ul.bB());var r=this.k7(e);r&&e.Xf()===n.vc.fc&&(this.M7(e,this.Ul.CB(r)),this.M7(e,this.Ul.BL(r))),isNaN(t)||(this.Ul.FL.metrics.srcThroughput=t)},e.prototype.nZ=function(e,t){var r=e.Xf()!=n.vc.dc;(this.N7||r)&&(-1!=[n.vc.gc,n.vc.Ec].indexOf(e.Xf())?(this.Ul.bB().respFallbackOtherN++,this.Ul.xL().respFallbackOtherN++):this.L7(e,t))},e.prototype.tZ=function(e,t){if(-1!=[n.vc.gc,n.vc.Ec].indexOf(e.Xf()))this.Ul.bB().respFallbackOthertErrN++,this.Ul.xL().respFallbackOthertErrN++;else{var r=e.Xf()!=n.vc.dc;if(this.N7||r)if(this.XM(e.type)){if(this.Ul.xL().respFallbackErrN++,this.Ul.bB().respFallbackErrN++,r){var i=this.k7(e);i&&(this.Ul.CB(i).respFallbackErrN++,this.Ul.BL(i).respFallbackErrN++)}if(0==e.qf.Df&&(this.Ul.xL().srcRespErrN++,this.Ul.bB().srcRespErrN++,r)){var i=this.k7(e);i&&e.Xf()===n.vc.fc&&(this.Ul.CB(i).srcRespErrN++,this.Ul.BL(i).srcRespErrN++)}this.L7(e,t)}else if(-1!=c.hh.Xo.Jo.indexOf(e.Kf.status))this.Ul.bB().fallAgentFailedRespN++,this.Ul.xL().fallAgentFailedRespN++,this.Ul.bB().reqN--,this.Ul.xL().reqN--;else{if(0==e.qf.Df&&(this.Ul.bB().srcOtherRespErrN++,this.Ul.xL().srcOtherRespErrN++),!r){var i=this.k7(e);i&&e.Xf()===n.vc.fc&&(this.Ul.CB(i).srcOtherRespErrN++,this.Ul.BL(i).srcOtherRespErrN++)}this.L7(e,t)}}},e.prototype.BX=function(e,t){if(t.Wq==o.bf.wf)this.Ul.xL().respP2pN++,this.Ul.bB().respP2pN++;else if(t.Wq==o.bf.If)this.Ul.xL().respFallbackN++,this.Ul.bB().respFallbackN++;else if(t.Wq==o.bf.Tf){this.Ul.xL().lCacheRespN++,this.Ul.bB().lCacheRespN++;var r=i.Framework.C()?t.length:e.jf.byteLength;this.Ul.xL().lCacheRespQt+=r,this.Ul.bB().lCacheRespQt+=r}},e.prototype.zX=function(e,t){var r=e.Xf()!=n.vc.dc;(this.N7||r)&&this.L7(e,t)},e.prototype.VX=function(e){if(0!=e.Qf){this.Ul.bB().p2pSubRespErrN++,this.Ul.xL().p2pSubRespErrN++;if(e.Xf()==n.vc.fc){var t=this.k7(e);t&&(this.Ul.CB(t).p2pSubRespErrN++,this.Ul.BL(t).p2pSubRespErrN++)}}},e.prototype.r5=function(e){if(this.Ul.bB().p2pSubRespExpN++,this.Ul.xL().p2pSubRespExpN++,e.Xf()==n.vc.fc){var t=this.k7(e);t&&(this.Ul.CB(t).p2pSubRespExpN++,this.Ul.BL(t).p2pSubRespExpN++)}},e.prototype.M7=function(e,t){var r=e.qf.Pf,i=e.qf.Df,s=e.qf.Af,o=e.qf.Of,h=e.qf.Nf;if(e.Xf()!=n.vc.gc){if(e.qf.Cf&&o&&o<r){var c=o/r;t.p2pSubRespPartN+=c,this.XM(e.type)||(t.p2pAgenTrafficFailureQt+=r-s)}if(0!=h&&(h==r&&t.lCacheRespN++,t.lCacheRespQt+=e.qf.Nf),0!=s)if(s==r&&(this.XM(e.type)&&t.respP2pN++,t.p2pSubRespN++),t.p2pSubReqQt+=r,t.p2pSubRespQt+=s,t.p2pAgenTrafficSuccessQt+=e.qf.p2pAgenTrafficSuccessQt,t.p2pDirectQt+=s,e.xq.Ek.peerInfo.type==a.Tc.W)t.p2pUdpbQt+=s,t.p2pNatQt+=s;else{var u=this.yD.gk();if(u&&u>0)if(null!=e.qq){var l=e.qq.internalAs;u===l&&(t.p2pNatQt+=s)}else this.logger.warn("Missing partner info")}}if(0!=i){if(this.F7(e.type)&&(t.srcOtherReqQt+=e.qf.Df),i==r)this.F7(e.type)?(t.srcOtherRespN++,t.srcOtherRespQt+=e.qf.Df,t.srcOtherOverQt+=e.qf.Df,t.fallAgentRespN++):t.respFallbackN++,t.srcRespN++;else{t.srcRespErrN++;var p=i/(s+i);t.respFallbackN=p,t.respP2pN=1-p,this.F7(e.type)&&(t.srcOtherRespErrN++,t.srcOtherRespQt+=e.qf.Df,t.srcOtherOverQt+=e.qf.Df,t.fallAgenTrafficFailureQt+=e.qf.Df)}t.srcReqQt+=e.qf.Df,t.srcRespQt+=e.qf.Df,t.srcOverQt+=e.qf.Df,this.F7(e.type)&&(t.fallAgenTrafficSuccessQt+=e.qf.kf)}},e.prototype.k7=function(e){var t=null;if(e.zf instanceof s.N_){var r=e.zf;r.bitrate&&(t=r.bitrate)}return t},e.prototype.XM=function(e){return e!=o.bf.wf&&e!=o.bf.If},e.prototype.F7=function(e){return!this.XM(e)},e.prototype.pX=function(){this.U7()},e.prototype.hX=function(){i.Framework.clearInterval(this.D7),this.D7=null},e.prototype.U7=function(){var e=this;null!=this.D7&&(this.D7=i.Framework.setInterval(function(){e.Ul.ZU=e.yD.Fj(),e.Ul.XU=e.yD.gk(),e.Ul.IB=e.yD.getPublicIp()},c.hh.ih.rh))},e}();t.TJ=u},function(e,t,r){"use strict";var i=r(0),n=r(5),s=r(10),o=r(194),a=r(14),h=function(){function e(){this.B7=!1,this.loggerId="[UDPBDiscovery] ",this.H7=-1}return e.prototype.init=function(e){this.logger=i.Framework.resolve(i.Framework.V.R).log(e.sessionId),this.x7=e.VJ,this.yD=e.yD},e.prototype.JJ=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.vl=e,this.contextId=this.yD.getContextId()},e.prototype.startServer=function(){var e=this;this.logger.debug(this.loggerId+"START UDP BROADCAST SERVER"),this.x7.startServer(n.hh.UDPBroadcast.Ua,function(t,r){if(e.H7>-1){var i=o.q7.yf(r);if(i.uuid!=e.guid&&i.streamId==e.contextId&&i.p2pProtocolVersion===n.hh.Ho.Do){e.logger.debug(e.loggerId+"I RECEIVED A MESSAGE FROM "+i.uuid);var a=new s.bc(s.Tc.W,null,i.isLeader);a.guid=i.uuid,a.privateIpString=t,a.rankValue=i.rankValue,e.vl.forEach(function(e){return e.gG([a],!1)})}}})},e.prototype.lX=function(){var e=this;this.logger.info(this.loggerId+"START BROADCAST EVERY "+n.hh.UDPBroadcast.Ba),-1!=this.H7&&i.Framework.clearInterval(this.H7),this.H7=i.Framework.setInterval(function(){e.G7()},n.hh.UDPBroadcast.Ba),this.G7()},e.prototype.sX=function(){-1!=this.H7&&i.Framework.clearInterval(this.H7)},e.prototype.G7=function(){var e=new o.q7(this.contextId,this.yD.getId(),this.yD.QG(),this.yD.ck(),n.hh.Ho.Do);this.logger.info(this.loggerId+"BROADCAST MESSAGE contextId "+e.streamId+" id "+e.uuid+" udpscore "+e.rankValue+" lan leader "+e.isLeader+" protobufVersion "+e.p2pProtocolVersion),a.HiveConfig.UDPBroadcast.usiz&&(n.hh.UDPBroadcast.Ha=a.HiveConfig.UDPBroadcast.usiz),this.x7.broadcast(n.hh.UDPBroadcast.Ua,n.hh.UDPBroadcast.Ha,e.vf())},e.prototype.Ud=function(e){this.logger.info("UDPDISCOVERY SERVER CONNECTED"),this.B7||(this.guid=e,this.startServer(),this.lX())},e}();t.gJ=h},function(e,t,r){"use strict";var i=function(){function e(e,t,r,i,n){this.streamId=e,this.uuid=t,this.rankValue=r,this.isLeader=i,this.p2pProtocolVersion=n}return e.prototype.vf=function(){var e={streamId:this.streamId,uuid:this.uuid,rankValue:this.rankValue,isLeader:this.isLeader,p2pProtocolVersion:this.p2pProtocolVersion};return JSON.stringify(e,this.V7)},e.prototype.V7=function(e,t){if(null!==t)return t},e.yf=function(t){var r=t,i=JSON.parse(r);return new e(i.streamId,i.uuid,i.rankValue,i.isLeader,i.p2pProtocolVersion)},e}();t.q7=i},function(e,t,r){"use strict";var i=r(0),n=function(){function e(){this.loggerId="[ProxyUDPB]",this.logger=i.Framework.resolve(i.Framework.V.R).log(),this.x7=window.myUdpBroadcaster,this.x7||this.logger.error(this.loggerId+" helper undefined")}return e.prototype.startServer=function(e,t){try{this.x7&&this.x7.startServer(e,t)}catch(e){this.logger.warn(this.loggerId+e)}},e.prototype.j7=function(){try{this.x7&&this.x7.j7()}catch(e){this.logger.warn(this.loggerId+e)}},e.prototype.broadcast=function(e,t,r){try{this.x7&&this.x7.broadcast(e,t,r)}catch(e){this.logger.warn(this.loggerId+e)}},e.prototype.sX=function(){try{this.x7&&this.x7.sX()}catch(e){this.logger.warn(this.loggerId+e)}},e.prototype.Q7=function(e,t){try{this.x7&&this.x7.Q7(e,t)}catch(e){this.logger.warn(this.loggerId+e)}},e}();t.EJ=n},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(88),s=r(197),o=r(89),a=r(90),h=r(62),c=r(24),u=r(34),l=r(4),p=r(1),d=function(e){function t(){var t=e.call(this)||this;return t.K7.onerror=function(e){p.ErrorMonitor.ve().logError("Shared Worker error",{error:e.message})},t.Y7.onerror=function(e){p.ErrorMonitor.ve().logError("Web Worker error",{error:e.type})},t.K7.port.start(),t}return i(t,e),t.prototype.W7=function(){var e=this;setTimeout(function(){e.z7()},1e3)},t.prototype.z7=function(){var e=this;this.K7.port.onmessage=function(t){e.logger.debug("LRU length : "+t.data.response)},this.logger.debug("Send message"),this.K7.port.postMessage({type:s.X7.J7}),this.W7()},t.prototype.contains=function(e){var t=this,r=l.defer();if(this.kq.has(e))r.resolve(!0);else{var i=!1,n=setTimeout(function(){i=!0,t.logger.debug("VOD CONTAINS TIMEDOUT : "+e),r.resolve(!1)},1e3);this.K7.port.onmessage=function(e){clearTimeout(n),i||(e.data.response?r.resolve(!0):r.resolve(!1))},this.K7.onerror=function(e){t.logger.error(e)},this.K7.port.postMessage({type:s.X7.Z7,eee:e})}return r.Ss},t.prototype.tee=function(e){var t=l.defer(),r=this.kq.get(e);if(null!=r){var i=null;r.content.forEach(function(e,t){if(h.HF.BF(t).kF())return i=e,i.headers=r.headers,void(i.qq=r.qq)}),t.resolve(i)}else t.resolve(null);return t.Ss},t.prototype.get=function(e){var t=this,r=l.defer();if(this.kq.has(e))this.tee(e).then(function(e){r.resolve(e)});else{this.logger.debug("SHAREDWORKER: Permission Request to READ");var i=Date.now();this.ree(s.X7.iee,i).then(function(n){t.logger.debug("SHAREDWORKER: Permission Request To READ : "+n),n?t.nee(e).then(function(e){t.logger.debug("SHAREDWORKER:  Read Completed "),t.K7.port.postMessage({type:s.X7.see,id:i}),r.resolve(e)}):r.resolve(null)})}return r.Ss},t.prototype.nee=function(e){var t=this,r=l.defer(),i=null,n=!1,a=setTimeout(function(){n=!0,r.resolve(i)},1e3);return this.Y7.onmessage=function(h){if(clearTimeout(a),!n){if(h.data.response){var u=new c.Hf;u.Cf=!1,u._f=!0,u.Pf=h.data.data.length,u.Af=0,u.Nf=h.data.data.length,u.Df=0,i=new o.Gq(h.data.data.length,h.data.data.content,u,c.bf.Tf),i.headers=h.data.data.oee}else t.K7.port.postMessage({type:s.X7.aee,eee:e});r.resolve(i)}},this.Y7.postMessage({type:s.X7.hee,eee:e}),r.Ss},t.prototype.m=function(){var e=this;this.logger.debug("FLUSHING IN-MEMORY CACHE");for(var t=[],r=0;r<this.Mq.length;r++)this.kq.get(this.Mq[r]).zq||t.push(this.Mq[r]);this.logger.debug("Flush "+t.length+" in memory"),t.length>0?this.cee(t).then(function(t){e.uee()}):this.uee()},t.prototype.uee=function(){var e=this,t=0,r=0;this.logger.debug("PURGING PERSISTENTDB's IN-MEMORY CACHE"),this.Mq.every(function(i,n){var s=e.kq.get(i).size();return t+s>e.Fq?(r=n,e.logger.debug("CACHE TOO BIG "+(t+s)),!1):(t+=s,!0)})||this.Mq.splice(r,this.Mq.length-1).forEach(function(t){e.kq.delete(t)}),this.Bq()},t.prototype.cee=function(e){var t=this,r=l.defer();this.logger.debug("SHAREDWORKER:  Permission Request To Write ");var i=Date.now();return this.ree(s.X7.lee,i).then(function(n){t.logger.debug("SHAREDWORKER:  Permission Request To WRITE : "+n),n?(t.logger.debug("Flush the contents"),t.pee(e).then(function(e){t.logger.debug("SHAREDWORKER:  WRITE COMPLETED"),t.K7.port.postMessage({type:s.X7.dee,id:i}),r.resolve(e)})):r.resolve(n)}),r.Ss},t.prototype.pee=function(e){var t=this,r=l.defer();return this.fee(e[0]).then(function(i){if(i)e.shift(),0==e.length?r.resolve(!0):t.pee(e).then(function(e){r.resolve(e)});else{var n=!1,o=setTimeout(function(){n=!0,e.shift(),0==e.length?r.resolve(!1):t.pee(e).then(function(e){r.resolve(e)})},1e3);t.Y7.onmessage=function(i){i.data&&(t.kq.get(e[0]).zq=!0,t.K7.port.postMessage({type:s.X7.gee,eee:e[0],size:t.kq.get(e[0]).size()})),clearTimeout(o),n||(e.shift(),0==e.length?i.data?r.resolve(!0):r.resolve(!1):t.pee(e).then(function(e){r.resolve(e)}))},t.Y7.onerror=function(e){t.logger.error(e)};var a=t.kq.get(e[0]),c=null,u=null;a.content.forEach(function(e,t){if(h.HF.BF(t).kF())return c=e,u=t,void(c.headers=a.headers)});var l={P_:a.zf.Zf(),headers:a.headers,length:a.size(),Eee:u,content:c.data,zf:a.zf};t.Y7.postMessage({type:s.X7.vee,data:l})}}),r.Ss},t.prototype.fee=function(e){var t=this,r=l.defer(),i=!1,n=setTimeout(function(){i=!0,r.resolve(!1)},1e3);return this.K7.port.onmessage=function(s){clearTimeout(n),i||(t.logger.debug("SHAREDWORKER:  CONTAINS REQUEST : "+e+" : "+s.data.response),s.data.response?r.resolve(!0):r.resolve(!1))},this.K7.onerror=function(e){t.logger.error(e),r.resolve(!1)},this.K7.port.postMessage({type:s.X7.Z7,eee:e}),r.Ss},t.prototype.ree=function(e,t){var r=this,i=l.defer(),n=!1,o=setTimeout(function(){n=!0,i.resolve(!1)},2e3);return this.K7.port.onmessage=function(t){clearTimeout(o),n?e==s.X7.iee?r.K7.port.postMessage({type:s.X7.see}):e==s.X7.lee&&r.K7.port.postMessage({type:s.X7.dee}):i.resolve(t.data.response)},this.K7.onerror=function(e){r.logger.error(e)},this.K7.port.postMessage({type:e,id:t}),i.Ss},t.prototype.ik=function(e){return[]},t.prototype.Vq=function(e){var t=this,r=l.defer(),i=[],n=Date.now();return this.ree(s.X7.iee,n).then(function(e){if(e){var o=!1,h=setTimeout(function(){o=!0,t.K7.port.postMessage({type:s.X7.see,id:n}),r.resolve(i)},4e3);t.Y7.onmessage=function(e){if(clearTimeout(h),e.data.response&&null!=e.data)for(var c=0;c<e.data.elements.length;c++){var l=new u.N_(e.data.elements[c].url,e.data.elements[c].b_,e.data.elements[c].w_,e.data.elements[c].C_,e.data.elements[c].duration,e.data.elements[c].bitrate,e.data.elements[c].__),p=new a.Hq(l);p.headers=e.data.elements[c].oee,p.totalSize=e.data.elements[c].length,i.push(p)}t.K7.port.postMessage({type:s.X7.see,id:n}),o||r.resolve(i)},t.Y7.onerror=function(e){p.ErrorMonitor.ve().logError("GET ELEMENTS ERROR",{error:e}),t.K7.port.postMessage({type:s.X7.see,id:n})},t.Y7.postMessage({type:s.X7.yee})}}),r.resolve(null),r.Ss},t}(n.Yq);t.vJ=d},function(e,t,r){"use strict";var i=function(){function e(){}return e}();i.lee="write_request",i.Z7="contains_request",i.gee="write_id_operation",i.iee="read_request",i.see="read_completed",i.dee="write_completed",i.aee="update_lru",i.J7="lru_stats",i.hee="read_operation",i.yee="read_elements_operation",i.Tee="read_keys_operation",i.vee="write_operation",t.X7=i},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(20);!function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minVersion="3.0.0",t.renderStatsCallback=void 0,t}return i(t,e),t}(n.HiveComm.Options.Tp);e.nJ=t}(e.Options||(e.Options={}))}(t.HiveComm||(t.HiveComm={}))},function(e,t,r){"use strict";var i=r(4),n=r(18),s=r(21),o=r(200),a=r(26),h=a.HiveComm.HiveTechError,c=a.HiveComm.vE,u=r(70),l=r(19),p=r(22),d=r(46),f=r(53),g=r(14),E=r(1),v=r(56),y=r(32),T=r(72),m=r(29),I=(r(44),navigator),S=function(){function e(e,t,r){this.loggerId="[HiveJsProxy]",this.mee=0,this.gL=e,this.options_=new o.HiveComm.Options.Iee,this.See(t),this.yL(),this.UQ=r}return e.prototype.getName=function(){return e.EL},e.prototype.getVersion=function(){return this.version},e.prototype.vL=function(){return!1},e.prototype.yL=function(){var e=this;if(null==this.Ree||Date.now()-this.mee>1e4){var t="//"+u.tL.dO+":"+u.tL.rL+"/version.json";this.Ree=s.bp(t).then(function(t){var r=JSON.parse(t);return e.state=r.state,e.version=r.version,"ready"===e.state?"ready":(e.logger().warn(e.id()+"Client not ready: "+e.state),i.reject(new h(c.pE,"state "+e.state)))},function(t){var r="Client not reachable";return void 0!=t&&void 0!=t.status&&-1!=t.status&&(r="Client check returned "+t.status),e.logger().warn(e.id()+r),i.reject(new h(c.pE,r))}).catch(function(e){return e instanceof h?i.reject(e):i.reject(new h(c.pE,"error parsing response"))}),this.mee=Date.now()}return this.Ree},e.prototype.initSession=function(e,t){var r=this;return this.yL().then(function(){return r.resolveTicketPromise(e).then(function(t){var i=r.TL(e,t);if(null!=i)return T.$u.registerComm(r.gL,i.id),T.$u.registerTech(r,i.id),n.HiveRequestFactory.registerTech(i.id,r.getName()),i;throw new h(c.sE,"error generating session")})}).catch(function(e){return e instanceof h?i.reject(e):i.reject(new h(c.sE,"generic error resolving ticket"))})},e.prototype.oL=function(e){this.oJ=e},e.prototype.mL=function(){return this.options_.initTimeout},e.prototype.isActive=function(e,t){var r=t.manifest.toLowerCase(),i=e.toLowerCase(),n=r.indexOf(".ism/manifest");if(n>-1){var s=r.substring(0,n);if(i.indexOf(s)>-1)return i.indexOf(".ism/manifest(format=mpd-time-csf)")>-1?this.oJ?(t.ticket.SourceURL=e,!0):this.aJ(t,"The player does not use HiveRequest, downgrading to StatsJS"):this.aJ(t,"Protocol not supported by HiveJsProxy tech, downgrading to StatsJS")}else if(i===r)return!!this.oJ||this.aJ(t,"The player does not use HiveRequest, downgrading to StatsJS");return!1},e.prototype.aJ=function(e,t){var r=this;return e.tech=this.UQ,y.Hive.Reporting().initSession(e.ticket.ticketUrl,!1).then(function(t){e.hl(t);t.ticket;r.logger().debug("[HiveJSProxy] downgrade verified ticket "+e.ticket.ticketUrl),r.gL.updatePlayerInfo(t)}).fail(function(e){E.ErrorMonitor.ve().logError("Error initializing session when downgrading session tech",r.loggerId,{error:e})}),this.oJ&&this.oJ.dU(),this.oJ=void 0,n.HiveRequestFactory.registerTech(e.id,v.StatsJS.EL),this.gL.logger().warn("[HiveJsProxy] "+t),this.onError(new h(c.fE,t)),!0},e.prototype.ol=function(e,t){var r=this;this.logger().debug(this.id()+"Stopping session "+e.id+" [onUnload:"+t+"]");var i="//"+u.tL.dO+":"+u.tL.rL+"/proxy/"+e.id+"/stop";t&&I.sendBeacon?(I.sendBeacon(i),this.logger().debug(this.id()+"session stopped ["+e.id+"][beacon]")):s.bp(i,null,!t).then(function(){r.logger().debug(r.id()+"session stopped ["+e.id+"]"+(t?"[sync]":""))},function(i){r.logger().warn(r.id()+"session close error ["+e.id+"]"+(t?"[sync]":""),i)})},e.prototype.nl=function(e,t){var r=t?l.Ml.IDLE:l.Ml.Ll;this.logger().debug(this.id()+"idle state: "+l.Ml[r])},e.prototype.SL=function(e,t){var r=this,n="playing-point="+t.Pl;n+="&buffer-length="+t.Al,n+="&total-buffering="+t.Ol,n+="&width="+t.width,n+="&height="+t.height,n+="&fullscreen="+t.YQ;var o="//"+u.tL.dO+":"+u.tL.rL+"/proxy/"+e.id+"/stats/put?"+n;return s.bp(o).fail(function(e){return r.logger().warn(r.id()+"error sending feedback to Hive Client",e),i.reject(e)})},e.prototype.CL=function(e,t,r){var n=this,o="//"+u.tL.dO+":"+u.tL.rL+"/proxy/"+e.id+"/event?type="+t;if(void 0!=r)for(var a in r)o+="&"+a+"="+r[a];return this.logger().debug(this.id()+"event "+p.Gl.Yp[t],void 0!=r?r:""),s.bp(o).fail(function(e){return n.logger().warn(n.id()+"error sending feedback event to Hive Client",e),i.reject(e)})},e.prototype.bd=function(e,t){return i.resolve(!0)},e.prototype.onError=function(e){var t=!0;if(void 0!=this.options_.onError)try{t=this.options_.onError(e)}catch(e){E.ErrorMonitor.ve().logError("exception in user-defined onError callback",this.id(),e)}return t},e.prototype.onActiveSession=function(e){var t=this.gL.getPlayerSource();0===t.indexOf("//")&&(t=location.protocol+t);var r=s.Ip(u.tL.cU,u.tL.dO,u.tL.rL,e.id,t);if(e.authenticationToken&&this.version>="3.0.1"?s._p(r,JSON.stringify({authenticationToken:e.authenticationToken})):s.bp(r),this.updatePlayerInfo(e),f.Zu.me(this.logger()),this.oJ&&this.oJ.fU(),this.wee(e),void 0!=this.options_.onActiveSession)try{this.options_.onActiveSession(e.toHiveSession())}catch(e){E.ErrorMonitor.ve().logError("exception in user-defined onActiveSession callback",this.id(),e)}},e.prototype.DL=function(){},e.prototype.kL=function(){},e.prototype.LL=function(e){this.gL=e},e.prototype.id=function(){return"["+e.EL+"] "},e.prototype.See=function(t){void 0!=t[e.EL]&&s.Sp(t[e.EL],this.options_)},e.prototype.resolveTicketPromise=function(e){var t=this;this.logger().debug(this.id()+"resolving ticket: "+e);var r=this.bee(e),n=JSON.stringify(this.Cee()),o=null;return this.gL.options().testId&&(a={},a[m.L.cR]=this.gL.options().testId,o=a),this.logger().debug("My header ",o),s._p(r,n,"application/json",o).then(function(r){var i=JSON.parse(r);return t.logger().debug(t.id()+"resolved ticket "+e+" -> "+i.manifest),i},function(r){return t.logger().warn(t.id()+"ticket "+e+" resolve error: ",r),i.reject(new h(c.sE,r))}).catch(function(e){return e instanceof h?i.reject(e):i.reject(new h(c.dE,e))});var a},e.prototype.bee=function(e){return e=encodeURIComponent(e),s.Ip(u.tL.fO,u.tL.dO,u.tL.rL,e,"&",this.gL.getPluginId())},e.prototype.TL=function(e,t){var r=new d.BN;r.RN(e);var i=new n.cl(e,r,t.manifest,null);return i.ML=!0,i.id=t.sessionId,i.ticket.sessionId=i.id,i},e.prototype.Cee=function(){var e={};e.HiveConfig={};for(var t in window.HiveConfig){e.HiveConfig[t]={};for(var r in window.HiveConfig[t])e.HiveConfig[t][r]=window.HiveConfig[t][r]}return e},e.prototype.wee=function(e){var t=this;if(void 0!==g.HiveConfig.Stats.render){var r="//"+u.tL.dO+":"+u.tL.rL+"/proxy/"+e.id+"/stats/get";if("undefined"!=typeof EventSource){var i=new EventSource(r);i.onmessage=function(e){t._ee(e.data)},i.onerror=function(e){i.close()}}else this.Pee=window.setInterval(function(){s.bp(r).then(function(e){t._ee(e)})},4e3)}},e.prototype.updatePlayerInfo=function(e){var t=this,r="comm-version="+this.gL.getCommVersion();r+="&plugin-name="+this.gL.getPluginName(),r+="&plugin-version="+this.gL.getPluginVersion(),r+="&player-tech="+this.gL.getPlayerTech(),r+="&player-version="+this.gL.getPlayerVersion(),this.gL.getTelemetryId()&&(r+="&telemetry-id="+this.gL.getTelemetryId());var n=s.Ip(u.tL.uU,u.tL.dO,u.tL.rL,e.id,r);return s.bp(n).fail(function(e){return t.logger().debug(t.id()+"error sending player Info to Hive Client",e),i.reject(e)})},e.prototype._ee=function(e){try{var t=JSON.parse(e);for(var r in t)t.hasOwnProperty(r)&&(t[r].human=function(e){return e>1e6?(e/1e6).toFixed(2)+"MB":e>1e3?(e/1e3).toFixed(2)+"KB":e+"B"});g.HiveConfig.Stats.render(t)}catch(e){console.trace(e)}},e.prototype.logger=function(){return this.gL.logger()},e}();S.EL="HiveJsProxy",t.HiveJsProxy=S},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(20);!function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minVersion="3.3.0",t}return i(t,e),t}(n.HiveComm.Options.Tp);e.Iee=t}(e.Options||(e.Options={}))}(t.HiveComm||(t.HiveComm={}))},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(4),s=r(18),o=r(21),a=r(20),h=r(202),c=r(26),u=r(42),l=r(29),p=r(19),d=r(22),f=r(46),g=r(1),E=h.HiveComm.Options,v=a.HiveComm.Options.mp,y=c.HiveComm.HiveTechError,T=c.HiveComm.vE,m=r(44);t.Aee=navigator;var I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(s.cl),S=function(){function e(e,t){this.mee=0,this.gL=e,this.options_=new E.Oee,this.See(t),o.Rp(window.location.href,new v,this.options_)}return e.prototype.getName=function(){return e.EL},e.prototype.getVersion=function(){return this.version},e.prototype.vL=function(){return!1},e.prototype.yL=function(){var e=this;if(null==this.Ree||Date.now()-this.mee>1e4){var t=new m;t.Ad(navigator.userAgent);var r=t.jO();if("IE"===r.name&&r.version&&parseInt(r.version)<10)return n.reject(new y(T.pE,"Internet Explorer < v.10 not supported"));this.Nee=Date.now(),this.Dee=0;var i="//"+u.fp.dO+":"+this.gL.options().monitorPort+"/version.json";this.logger().debug(this.id()+"verifying Hive Client version"),this.Ree=o.bp(i).then(function(t){var r=JSON.parse(t);return e.state=r.state,e.version=r.version,"ready"===e.state?"developer"===e.version||e.version>=e.options_.minVersion?(e.Dee=Date.now(),e.logger().debug(e.id()+"Hive Client ready - version "+e.version+" ["+(e.Dee-e.Nee)+"]"),"ready"):(g.ErrorMonitor.ve().logError("Client version requirement not satisfied",e.id(),{version:e.version,minVersion:e.options_.minVersion}),e.gL.addTechEvent(new d.Gl.lf(null,d.Gl.td.Jp)),n.reject(new y(T.gE,"version "+e.version))):(g.ErrorMonitor.ve().logError("Cannot check version: client state not ready",e.id(),{state:e.state}),e.gL.addTechEvent(new d.Gl.lf(null,d.Gl.td.zp)),n.reject(new y(T.pE,"state "+e.state)))},function(t){var r="Client not reachable";return void 0!=t&&void 0!=t.status&&-1!=t.status&&(r="Client check returned error"),g.ErrorMonitor.ve().logError(r,e.id(),void 0!=t&&void 0!=t.status&&-1!=t.status?{status:t.status}:void 0),e.gL.addTechEvent(new d.Gl.lf(null,d.Gl.td.Wp)),n.reject(new y(T.pE,r))}).catch(function(t){if(t instanceof y)return n.reject(t);var r="Error fetching Hive Client version";return g.ErrorMonitor.ve().logError(r,e.id(),t),n.reject(new y(T.pE,r))}),this.mee=Date.now()}return this.Ree},e.prototype.initSession=function(e,t){var r=this;return this.options_.minVersion!=u.fp.vO||this.gL.options().testId?this.yL().then(function(){return r.kee(e).catch(function(e){return n.reject(e)})}):this.kee(e).catch(function(e){return n.reject(e)})},e.prototype.mL=function(){return this.options_.initTimeout},e.prototype.isActive=function(e,t){return e.indexOf(t.Lee)>-1},e.prototype.ol=function(e,r){var i=this;this.logger().debug(this.id()+"Stopping session "+e.id+" [complete close:"+r+"]");var n="//"+u.fp.dO+":"+this.gL.options().playerPort+"/session?action=stop";n+="&currentSession="+e.id,r&&(n+="&completeStop=true"),r&&t.Aee.sendBeacon?(t.Aee.sendBeacon(n),this.logger().debug(this.id()+"session stopped ["+e.id+"][beacon]")):o.bp(n,null,!r).then(function(){i.logger().debug(i.id()+"session stopped ["+e.id+"]"+(r?"[sync]":""))},function(t){i.logger().warn(i.id()+"session close error ["+e.id+"]"+(r?"[sync]":""),t)})},e.prototype.nl=function(e,t){this.Mee=t?p.Ml.IDLE:p.Ml.Ll,this.logger().notice("[HiveComm] client state: "+p.Ml[this.Mee])},e.prototype.SL=function(e,t){if(this.Mee==p.Ml.IDLE)return n.resolve(!0);var r="playing-point="+t.Pl;r+="&buffer-length="+t.Al,r+="&total-buffering="+t.Ol,r+="&width="+t.width,r+="&height="+t.height,r+="&fullscreen="+t.YQ;var i=e.Lee+"stats?"+r;return this.logger().trace(i),o.bp(i)},e.prototype.CL=function(e,t,r){var i=this;if(!(t!==d.Gl.Yp.Kp&&t!==d.Gl.Yp.HIDDEN||this.version&&("developer"===this.version||this.version>="2017")))return n.resolve(!0);var s=e.Lee+"player-event?type="+d.Gl.Yp[t];if(void 0!=r)for(var a in r)s+="&"+a+"="+r[a];return this.logger().debug(this.id()+"event "+d.Gl.Yp[t],void 0!=r?r:""),o.bp(s).fail(function(e){return i.logger().warn(i.id()+"error sending feedback event to Hive Client",e),n.reject(e)})},e.prototype.bd=function(e,t){return n.resolve(!0)},e.prototype.updatePlayerInfo=function(e){var t=this;if(this.Fee())return this.logger().warn("Player info not supported in this Java client version"),n.resolve(!0);var r="comm-version="+this.gL.getCommVersion();r+="&plugin-name="+this.gL.getPluginName(),r+="&plugin-version="+this.gL.getPluginVersion(),r+="&player-tech="+this.gL.getPlayerTech(),r+="&player-version="+this.gL.getPlayerVersion(),this.gL.getTelemetryId()&&(r+="&telemetry-id="+this.gL.getTelemetryId());var i=e.Lee+"player-info?"+r;return o.bp(i).fail(function(e){return t.logger().debug(t.id()+"error sending player Info to Hive Client",e),n.reject(e)})},e.prototype.onError=function(e){var t=!0;if(void 0!=this.options_.onError)try{t=this.options_.onError(e)}catch(e){g.ErrorMonitor.ve().logError("Exception in user-defined onError callback",this.id(),e)}return t},e.prototype.DL=function(e,t,r){var i={isReadyIn:this.Nee,isReadyOut:this.Dee,leaseIn:this.Uee,leaseOut:this.Bee,resolveIn:this.Hee,resolveOut:this.xee};void 0!==t&&null!=t&&(i.sessionId=t.id),void 0!==r&&(i.total=r);var n=JSON.parse(JSON.stringify(i));g.ErrorMonitor.ve().logError(e.message,this.id(),n),this.gL.addTechEvent(new d.Gl.lf(null,d.Gl.td.$p,i)),this.qee()},e.prototype.onActiveSession=function(e){if(this.updatePlayerInfo(e),s.Rl.setItem("hiveActiveSessionId",e.id),void 0!=this.options_.onActiveSession)try{this.options_.onActiveSession(e.toHiveSession())}catch(e){g.ErrorMonitor.ve().logError("Exception in user-defined onActiveSession callback",this.id(),e)}},e.prototype.LL=function(e){this.gL=e},e.prototype.id=function(){return"["+e.EL+"] "},e.prototype.See=function(t){void 0!=t[e.EL]&&o.Sp(t[e.EL],this.options_)},e.prototype.kee=function(e){var t=this,r=(new Date).getTime();return this.Gee(e).then(function(i){return i?t.Vee(e,i,r):t.resolveTicketPromise(e).then(function(i){return t.Vee(e,i,r)})})},e.prototype.Gee=function(t){var r=this;if(this.Uee=Date.now(),this.gL.options().useSessionCheck){var i="//"+u.fp.dO+":"+this.gL.options().playerPort+"/session?&action=check";i+="&hivePluginId="+this.gL.getPluginId(),i+="&callback="+encodeURIComponent(t);var o=s.Rl.getItem("hiveActiveSessionId");return s.Rl.removeItem("hiveActiveSessionId"),o&&(i+="&currentSession="+o),this.jee(),this.Qee(i).then(function(e){return r.Bee=Date.now(),e?r.Kee(e,i,t,r.Uee):(r.logger().debug(r.id()+"session allowed ["+(r.Bee-r.Uee)+"]"),!1)},function(t){if(400==t.status)return r.Yee("bad request","error resolving ticket",t);if(401==t.status)return r.Yee("unauthorized","error verifying the ticket",t);if(403==t.status){var i=e.Wee(t,void 0,"session"),s=i?{zee:i}:void 0;return g.ErrorMonitor.ve().logError("reports another active session",r.id(),s),r.gL.addTechEvent(new d.Gl.lf(null,d.Gl.td.Xp,s)),n.reject(new y(T.fE,"another active session"+(s?" ["+s.zee+"]":"")))}return 404==t.status?(r.logger().debug(r.id()+"installed version does not support active session check"),r.Bee=Date.now(),!1):-1==t.status?(clearTimeout(r.Jee),r.Xee()):(g.ErrorMonitor.ve().logError("unhandled error from Java",r.id(),{error:t.status}),r.gL.addTechEvent(new d.Gl.lf(null,d.Gl.td.Zp)),n.reject(new y(T.dE,t)))}).catch(function(e){return e instanceof y?n.reject(e):(g.ErrorMonitor.ve().logError("unhandled error on requestLeaseDirect",r.id(),{error:e}),r.gL.addTechEvent(new d.Gl.lf(null,d.Gl.td.Zp)),n.reject(new y(T.dE,e)))}).finally(function(){clearTimeout(r.Jee)})}return this.logger().debug(this.id()+"Hive session check disabled - will directly resolve ticket (other active sessions may fail)"),n.resolve(!1)},e.prototype.Qee=function(e){if(this.gL.options().testId){if(!("developer"!==this.version||this.version<u.fp.yO))return o.bp(e,void 0,!0,(t={},t[l.L.cR]=this.gL.options().testId,t));this.logger().warn(this.id()+"The Hive Client Version installed does not support the test id in its generated metrics")}return o.bp(e);var t},e.prototype.Yee=function(t,r,i){var s=e.Wee(i,t);return g.ErrorMonitor.ve().logError(r,this.id()),this.xee=Date.now(),n.reject(new y(T.sE,s))},e.Wee=function(e,t,r){void 0===r&&(r="status");var i=t;if(e.body)try{i=JSON.parse(e.body)[r]}catch(e){}return i},e.prototype.resolveTicketPromise=function(e){var t=this;this.Hee=Date.now(),this.logger().debug(this.id()+"resolving ticket: "+e);var r=this.bee(e);return o.bp(r,"application/json").then(function(i){return t.Kee(i,r,e,t.Hee)},function(r){return r&&-1==r.status?t.Xee():(g.ErrorMonitor.ve().logError("error resolving ticket",t.id(),{ticket:e}),n.reject(new y(T.sE,r)))}).catch(function(e){return g.ErrorMonitor.ve().logError("error parsing ticket response",t.id(),e),n.reject(new y(T.dE,e))})},e.prototype.Kee=function(e,t,r,i){var n=JSON.parse(e),s=o.$h(t,n.location);return n.version&&!this.version&&(this.version=n.version),this.xee=Date.now(),this.logger().debug(this.id()+"resolved ticket "+r+" -> "+s+" ["+(this.xee-i)+"]"),s},e.prototype.Vee=function(e,t,r){var i=this.TL(e,t);if(null!=i){var n=(new Date).getTime(),o=n-r;return o>=this.options_.warnSlowRespTimeout&&this.DL(new y(T.EE,this.id()+" The tech initialization took more than "+this.options_.warnSlowRespTimeout+" milliseconds"),i,o),s.HiveRequestFactory.registerTech(i.id,this.getName()),i}throw new y(T.sE,"error generating session")},e.prototype.TL=function(e,t){var r=new f.BN;r.RN(e);var i=new I(e,r,t,null);i.ML=!0;var n=u.fp.EO,s=n.exec(i.manifest);return null!=s?(i.Lee=s[1],i.id=s[5],i):null},e.prototype.bee=function(e){var t=-1==e.indexOf("?")?"?":"&";return this.Fee()?o.Ip(u.fp.gO,u.fp.dO,this.gL.options().playerPort,e):o.Ip(u.fp.fO,u.fp.dO,this.gL.options().playerPort,e,t,this.gL.getPluginId())},e.prototype.jee=function(){var e=this;this.Jee&&clearTimeout(this.Jee),this.Jee=setTimeout(function(){g.ErrorMonitor.ve().logError("The Lease Request is taking more than "+e.options_.warnSlowRespTimeout+" secs",e.id())},this.options_.warnSlowRespTimeout)},e.prototype.qee=function(){this.Uee=0,this.Bee=0,this.Hee=0,this.xee=0},e.prototype.logger=function(){return this.gL.logger()},e.prototype.kL=function(){this.qee()},e.prototype.Xee=function(){var e=this,t="//"+u.fp.dO+":"+this.gL.options().monitorPort+"/version.json";return this.logger().debug(this.id()+"checking if the monitor port is reachable"),o.bp(t).then(function(t){var r=JSON.parse(t);throw e.state=r.state,g.ErrorMonitor.ve().logError("Verify client state",e.id(),{state:e.state}),e.gL.addTechEvent(new d.Gl.lf(null,d.Gl.td.zp)),new y(T.pE,"state "+e.state)}).fail(function(t){if(t instanceof y)return n.reject(t);if(t&&-1==t.status){var r="client not reachable";return e.gL.addTechEvent(new d.Gl.lf(null,d.Gl.td.Wp)),e.logger().warn(e.id()+r),n.reject(new y(T.pE,r))}var r="VerifyClientState error";return g.ErrorMonitor.ve().logError(r,e.id(),{error:t}),e.gL.addTechEvent(new d.Gl.lf(null,d.Gl.td.zp)),n.reject(new y(T.dE,r))})},e.prototype.Fee=function(){return this.options_.supportLegacyClient&&(!this.version||this.version.substr(0,4)<"2016")},e}();S.EL="HiveJava",t.HiveJava=S},function(e,t,r){"use strict";var i=this&&this.hu||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=r(20),s=r(42);!function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minVersion=s.fp.vO,t.initTimeout=6e4,t.warnSlowRespTimeout=5e3,t.supportLegacyClient=!1,t}return i(t,e),t}(n.HiveComm.Options.Tp);e.Oee=t}(e.Options||(e.Options={}))}(t.HiveComm||(t.HiveComm={}))}]);
//# sourceMappingURL=core.hive.min.js.map
!function(t){function e(r){if(n[r])return n[r].o;var o=n[r]={i:r,s:!1,o:{}};return t[r].call(o.o,o,o.o,e),o.s=!0,o.o}var n={};e.u=t,e.c=n,e.d=function(t,n,r){e.p(t,n)||Object.defineProperty(t,n,{l:!1,h:!0,get:r})},e.n=function(t){var n=t&&t.v?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.p=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.g="",e(e.m=1)}([function(t,e,n){/*!
 *
 * Copyright 2009-2016 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else{t.o=e()}}(function(){"use strict";function t(t){return function(){return J.apply(t,arguments)}}function e(t){return t===Object(t)}function n(t){return"[object StopIteration]"===tt(t)||t instanceof F}function r(t,e){if(B&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(et)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+et+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var o=e[r];u(o)||i(o)||!o||n.push(o)}return n.join("\n")}function i(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function s(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function u(t){var e=s(t);if(!e)return!1;var n=e[0],r=e[1];return n===M&&r>=q&&r<=st}function a(){if(B)try{throw new Error}catch(r){var t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=s(e);if(!n)return;return M=n[0],n[1]}}function c(t){return t instanceof d?t:g(t)?N(t):w(t)}function p(){function t(t){e=t,c.T&&B&&(i.source=t),G(n,function(e,n){c._(function(){t.I.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],o=z(p.prototype),i=z(d.prototype);if(i.I=function(t,o,i){var s=X(arguments);n?(n.push(s),"when"===o&&i[1]&&r.push(i[1])):c._(function(){e.I.apply(e,s)})},i.valueOf=function(){if(n)return i;var t=y(e);return v(t)&&(e=t),t},i.N=function(){return e?e.N():{state:"pending"}},c.T&&B)try{throw new Error}catch(t){i.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return o.k=i,o.resolve=function(n){e||t(c(n))},o.R=function(n){e||t(w(n))},o.reject=function(n){e||t(I(n))},o.notify=function(t){e||G(r,function(e,n){c._(function(){n(t)})},void 0)},o}function f(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=p();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.k}function l(t){return f(function(e,n){for(var r=0,o=t.length;r<o;r++)c(t[r]).then(e,n)})}function d(t,e,n){void 0===e&&(e=function(t){return I(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=z(d.prototype);if(r.I=function(n,o,i){var s;try{s=t[o]?t[o].apply(r,i):e.call(r,o,i)}catch(t){s=I(t)}n&&n(s)},r.N=n,n){var o=n();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function h(t,e,n,r){return c(t).then(e,n,r)}function y(t){if(v(t)){var e=t.N();if("fulfilled"===e.state)return e.value}return t}function v(t){return t instanceof d}function g(t){return e(t)&&"function"==typeof t.then}function E(t){return v(t)&&"pending"===t.N().state}function m(t){return!v(t)||"fulfilled"===t.N().state}function T(t){return v(t)&&"rejected"===t.N().state}function S(){nt.length=0,rt.length=0,it||(it=!0)}function _(t,e){it&&("object"==typeof process&&process&&"function"==typeof process.O&&c._.D(function(){-1!==K(rt,t)&&(process.O("unhandledRejection",e,t),ot.push(t))}),rt.push(t),e&&void 0!==e.stack?nt.push(e.stack):nt.push("(no stack) "+e))}function b(t){if(it){var e=K(rt,t);-1!==e&&("object"==typeof process&&process&&"function"==typeof process.O&&c._.D(function(){var n=K(ot,t);-1!==n&&(process.O("rejectionHandled",nt[e],t),ot.splice(n,1))}),rt.splice(e,1),nt.splice(e,1))}}function I(t){var e=d({when:function(e){return e&&b(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return _(e,t),e}function w(t){return d({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},P:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return Z(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function N(t){var e=p();return c._(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.k}function k(t){return d({C:function(){}},function(e,n){return C(t,e,n)},function(){return c(t).N()})}function R(t,e,n){return c(t).A(e,n)}function x(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=r[t](e)}catch(t){return I(t)}return s.done?c(s.value):h(s.value,o,i)}try{s=r[t](e)}catch(t){return n(t)?c(t.value):I(t)}return h(s,o,i)}var r=t.apply(this,arguments),o=e.bind(e,"next"),i=e.bind(e,"throw");return o()}}function O(t){c.done(c.async(t)())}function D(t){throw new F(t)}function P(t){return function(){return R([this,A(arguments)],function(e,n){return t.apply(e,n)})}}function C(t,e,n){return c(t).L(e,n)}function A(t){return h(t,function(t){var e=0,n=p();return G(t,function(r,o,i){var s;v(o)&&"fulfilled"===(s=o.N()).state?t[i]=s.value:(++e,h(o,function(r){t[i]=r,0==--e&&n.resolve(t)},n.reject,function(t){n.notify({index:i,value:t})}))},void 0),0===e&&n.resolve(t),n.k})}function L(t){if(0===t.length)return c.resolve();var e=c.defer(),n=0;return G(t,function(r,o,i){function s(t){e.resolve(t)}function u(t){0===--n&&(t.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+t.message,e.reject(t))}function a(t){e.notify({index:i,value:t})}var c=t[i];n++,h(c,s,u,a)},void 0),e.k}function V(t){return h(t,function(t){return t=W(t,c),h(A(W(t,function(t){return h(t,Q,Q)})),function(){return t})})}function H(t){return c(t).V()}function U(t,e){return c(t).then(void 0,void 0,e)}function j(t,e){return c(t).H(e)}var B=!1;try{throw new Error}catch(t){B=!!t.stack}var M,F,q=a(),Q=function(){},Y=function(){function t(){for(var t,r;n.next;)n=n.next,t=n.U,n.U=void 0,r=n.domain,r&&(n.domain=void 0,r.j()),e(t,r);for(;a.length;)t=a.pop(),e(t);o=!1}function e(e,n){try{e()}catch(e){if(s)throw n&&n.B(),setTimeout(t,0),n&&n.j(),e;setTimeout(function(){throw e},0)}n&&n.B()}var n={U:void 0,next:null},r=n,o=!1,i=void 0,s=!1,u=!1;try{u=navigator&&("Microsoft Internet Explorer"===navigator.appName||null!=navigator.appVersion.match(/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i))}catch(t){}var a=[];if(Y=function(t){"undefined"!=typeof Framework&&Framework.M()?Framework.setTimeout(t,0):(r=r.next={U:t,domain:s&&process.domain,next:null},o||(o=!0,i()))},"object"==typeof process&&process&&"[object process]"===process.toString()&&process._)s=!0,i=function(){process._(t)};else if("function"!=typeof setImmediate||u)if("undefined"==typeof MessageChannel||u)i=function(){setTimeout(t,0)};else{var c=new MessageChannel;c.port1.onmessage=function(){i=p,c.port1.onmessage=t,t()};var p=function(){c.port2.postMessage(0)};i=function(){setTimeout(t,0),p()}}else i="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};return Y.D=function(t){a.push(t),o||(o=!0,i())},Y}(),J=Function.call,X=t(Array.prototype.slice),G=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),K=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),W=t(Array.prototype.map||function(t,e){var n=this,r=[];return G(n,function(o,i,s){r.push(t.call(e,i,s,n))},void 0),r}),z=Object.create||function(t){function e(){}return e.prototype=t,new e},$=t(Object.prototype.hasOwnProperty),Z=Object.keys||function(t){var e=[];for(var n in t)$(t,n)&&e.push(n);return e},tt=t(Object.prototype.toString);F="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var et="From previous event:";c.resolve=c,c._=Y,c.T=!1,"object"==typeof process&&process&&process.F&&process.F.q&&(c.T=!0),c.defer=p,p.prototype.Y=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(X(arguments,1)):t.resolve(n)}},c.Promise=f,c.k=f,f.race=l,f.all=A,f.reject=I,f.resolve=c,c.J=function(t){return t},d.prototype.J=function(){return this},c.join=function(t,e){return c(t).join(e)},d.prototype.join=function(t){return c([this,t]).A(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},c.race=l,d.prototype.race=function(){return this.then(c.race)},c.X=d,d.prototype.toString=function(){return"[object Promise]"},d.prototype.then=function(t,e,n){function o(e){try{return"function"==typeof t?t(e):e}catch(t){return I(t)}}function i(t){if("function"==typeof e){r(t,u);try{return e(t)}catch(t){return I(t)}}return I(t)}function s(t){return"function"==typeof n?n(t):t}var u=this,a=p(),f=!1;return c._(function(){u.I(function(t){f||(f=!0,a.resolve(o(t)))},"when",[function(t){f||(f=!0,a.resolve(i(t)))}])}),u.I(void 0,"when",[void 0,function(t){var e,n=!1;try{e=s(t)}catch(t){if(n=!0,!c.onerror)throw t;c.onerror(t)}n||a.notify(e)}]),a.k},c.G=function(t,e){return c(t).G(e)},d.prototype.G=function(t){return t=c(t),this.then(function(e){return t.W(e).K(e)})},c.when=h,d.prototype.K=function(t){return this.then(function(){return t})},c.K=function(t,e){return c(t).K(e)},d.prototype.$=function(t){return this.then(function(){throw t})},c.$=function(t,e){return c(t).$(e)},c.Z=y,c.tt=v,c.et=g,c.nt=E,d.prototype.nt=function(){return"pending"===this.N().state},c.rt=m,d.prototype.rt=function(){return"fulfilled"===this.N().state},c.ot=T,d.prototype.ot=function(){return"rejected"===this.N().state};var nt=[],rt=[],ot=[],it=!0;c.it=S,c.st=function(){return nt.slice()},c.ut=function(){S(),it=!1},S(),c.reject=I,c.R=w,c.at=k,c.A=R,d.prototype.A=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},c.async=x,c.ct=O,c.pt=D,c.ft=P,c.L=C,d.prototype.L=function(t,e){var n=this,r=p();return c._(function(){n.I(r.resolve,t,e)}),r.k},c.get=function(t,e){return c(t).L("get",[e])},d.prototype.get=function(t){return this.L("get",[t])},c.set=function(t,e,n){return c(t).L("set",[e,n])},d.prototype.set=function(t,e){return this.L("set",[t,e])},c.lt=c.delete=function(t,e){return c(t).L("delete",[e])},d.prototype.lt=d.prototype.delete=function(t){return this.L("delete",[t])},c.dt=c.P=function(t,e,n){return c(t).L("post",[e,n])},d.prototype.dt=d.prototype.P=function(t,e){return this.L("post",[t,e])},c.send=c.ht=c.yt=function(t,e){return c(t).L("post",[e,X(arguments,2)])},d.prototype.send=d.prototype.ht=d.prototype.yt=function(t){return this.L("post",[t,X(arguments,1)])},c.vt=function(t,e){return c(t).L("apply",[void 0,e])},d.prototype.vt=function(t){return this.L("apply",[void 0,t])},c.gt=c.W=function(t){return c(t).L("apply",[void 0,X(arguments,1)])},d.prototype.W=function(){return this.L("apply",[void 0,X(arguments)])},c.Et=function(t){var e=c(t),n=X(arguments,1);return function(){return e.L("apply",[this,n.concat(X(arguments))])}},d.prototype.Et=function(){var t=this,e=X(arguments);return function(){return t.L("apply",[this,e.concat(X(arguments))])}},c.keys=function(t){return c(t).L("keys",[])},d.prototype.keys=function(){return this.L("keys",[])},c.all=A,d.prototype.all=function(){return A(this)},c.Tt=L,d.prototype.Tt=function(){return L(this)},c.St=function(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}(V,"allResolved","allSettled"),d.prototype.St=function(){return V(this)},c.V=H,d.prototype.V=function(){return this.then(function(t){return A(W(t,function(t){function e(){return t.N()}return t=c(t),t.then(e,e)}))})},c.fail=c.catch=function(t,e){return c(t).then(void 0,e)},d.prototype.fail=d.prototype.catch=function(t){return this.then(void 0,t)},c.progress=U,d.prototype.progress=function(t){return this.then(void 0,void 0,t)},c._t=c.finally=function(t,e){return c(t).finally(e)},d.prototype._t=d.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=c(t),this.then(function(e){return t.W().then(function(){return e})},function(e){return t.W().then(function(){throw e})})},c.done=function(t,e,n,r){return c(t).done(e,n,r)},d.prototype.done=function(t,e,n){var o=function(t){c._(function(){if(r(t,i),!c.onerror)throw t;c.onerror(t)})},i=t||e||n?this.then(t,e,n):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},c.timeout=function(t,e,n){return c(t).timeout(e,n)},d.prototype.timeout=function(t,e){var n=p(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.k},c.delay=function(t,e){return void 0===e&&(e=t,t=void 0),c(t).delay(e)},d.prototype.delay=function(t){return this.then(function(e){var n=p();return setTimeout(function(){n.resolve(e)},t),n.k})},c.bt=function(t,e){return c(t).bt(e)},d.prototype.bt=function(t){var e=p(),n=X(t);return n.push(e.Y()),this.vt(n).fail(e.reject),e.k},c.It=function(t){var e=X(arguments,1);return c(t).bt(e)},d.prototype.It=function(){var t=X(arguments),e=p();return t.push(e.Y()),this.vt(t).fail(e.reject),e.k},c.wt=c.Nt=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=X(arguments,1);return function(){var n=e.concat(X(arguments)),r=p();return n.push(r.Y()),c(t).vt(n).fail(r.reject),r.k}},d.prototype.wt=d.prototype.Nt=function(){var t=X(arguments);return t.unshift(this),c.Nt.apply(void 0,t)},c.kt=function(t,e){var n=X(arguments,2);return function(){function r(){return t.apply(e,arguments)}var o=n.concat(X(arguments)),i=p();return o.push(i.Y()),c(r).vt(o).fail(i.reject),i.k}},d.prototype.kt=function(){var t=X(arguments,0);return t.unshift(this),c.kt.apply(void 0,t)},c.Rt=c.xt=function(t,e,n){return c(t).xt(e,n)},d.prototype.Rt=d.prototype.xt=function(t,e){var n=X(e||[]),r=p();return n.push(r.Y()),this.L("post",[t,n]).fail(r.reject),r.k},c.Ot=c.Dt=c.Pt=function(t,e){var n=X(arguments,2),r=p();return n.push(r.Y()),c(t).L("post",[e,n]).fail(r.reject),r.k},d.prototype.Ot=d.prototype.Dt=d.prototype.Pt=function(t){var e=X(arguments,1),n=p();return e.push(n.Y()),this.L("post",[t,e]).fail(n.reject),n.k},c.H=j,d.prototype.H=function(t){if(!t)return this;this.then(function(e){c._(function(){t(null,e)})},function(e){c._(function(){t(e)})})},c.Ct=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var st=a();return c})},function(t,e,n){"use strict";var r=this&&this.At||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(0),i=n(2),s=n(3),u=i.Vt.Lt;-1==u&&(u=3e4);var a=function(t){function e(e,n){var r=t.call(this,n)||this;return r.pluginName="bitmovin",r.Ht=[],r.Ut=void 0,r.player=e,r.player.originalSetup=r.player.setup,r.player.jt=r.player.load,r.player.load=function(t,e,n){return r.player.closeHiveSession(),r.player.jt(t,e,n)},r.player.closeHiveSession=function(t){void 0===t&&(t=!0),r.closeHiveSession(),t&&r.Bt()},r.player.setup=function(t,e){r.closeHiveSession(),t.source.hls_ticket&&t.source.dash_ticket&&(r.logger().warn("The Hive plugin does not support providing a ticket for both DASH and HLS simultaneously. Using HLS source."),delete t.source.dash_ticket);var n=t.source.hls_ticket?"hls":t.source.dash_ticket?"dash":"",i=t.source.hls_ticket||t.source.dash_ticket;return i?(delete t.source[n+"_ticket"],r.resolveTicketPromise(i).timeout(u,r.loggerId+"Hive Plugin initialization timeout").then(function(o){return r.Mt(),o.tech.getName()===HiveComm.TechName.HiveJS&&(t.network={sendHttpRequest:r.sendHttpRequest(o.id)}),t.source[n]=o.manifest,r.player.originalSetup(t,e)}).catch(function(t){return r.onSetupTimeout(),r.resetSession(),r.logger().debug(r.loggerId+"error occurred resolving the ticket - "+(t.stack||t.message||t)),o.reject(t)})):(r.logger().debug(r.loggerId+"No Hive ticket provided, falling back to originalSetup"),r.player.originalSetup(t,e))},r.logger().notice(r.loggerId+"registered plugin [name:"+r.getPluginName()+"][id: "+r.getPluginId()+"][version: "+r.getPluginVersion()+"]"),r}return r(e,t),e.prototype.sendHttpRequest=function(t){var e=this;return function(n,r){return e.logger().debug("sendHttpRequest called",n,r),e.getPotentialSession()&&n.match(/manifest\/dash|manifest\/hls|audio|video/)?(e.logger().debug("Using HiveRequest",n,r),new s.Ft(r,t)):null}},e.prototype.registerEvent=function(t,e){this.player.addEventHandler(t,e),this.Ht.push({qt:t,Qt:e})},e.prototype.Bt=function(){var t=this;this.logger().debug(this.loggerId+"Unregistering events"),this.Ht.forEach(function(e){var n=e.qt,r=e.Qt;t.player.removeEventHandler(n,r)}),this.Ht.length=0},e.prototype.Mt=function(){var t=this;this.Ht.length||(this.registerEvent("onReady",function(){if(t.logger().debug("bitmovin.player.EVENT.ON_READY"),t.onActivateSession()){!!t.player.getConfig().playback&&t.player.getConfig().playback.auto&&t.onStartBuffering(!1),t.getActiveSession()&&(t.Yt=new HiveComm.HivePlayerExtendedStats)}}),this.registerEvent("onPlay",function(){t.logger().debug("bitmovin.player.EVENT.ON_PLAY"),t.Jt(0)}),this.registerEvent("onError",function(e){t.logger().debug("bitmovin.player.EVENT.ON_ERROR");var n=-1,r=null;if(null!=e)try{n=e.code,r=JSON.stringify(e,null)}catch(t){r=e}t.onError(n,r),t.Bt()}),this.registerEvent("onPlaybackFinished",function(){t.logger().debug("bitmovin.player.EVENT.ON_PLAYBACK_FINISHED"),t.onEventFeedback(4,{code:1})}),this.registerEvent("onSeek",function(){t.logger().debug("bitmovin.player.EVENT.ON_SEEK"),t.onEventFeedback(3)}),this.registerEvent("onFullscreenEnter",function(){t.logger().debug("bitmovin.player.EVENT.ON_FULLSCREEN_ENTER"),t.onEventFeedback(7,{value:!0})}),this.registerEvent("onFullscreenExit",function(){t.logger().debug("bitmovin.player.EVENT.ON_FULLSCREEN_EXIT"),t.onEventFeedback(7,{value:!1})}),this.registerEvent("onSegmentRequestFinished",function(e){if(t.Yt){var n=e.mimeType.indexOf("video")>=0;if(void 0===t.Xt){var r=t.player.getPlaybackVideoData();r&&r.bitrate&&t.Gt(r.bitrate)}if(e.success){if(!e.isInit&&t.Xt){var o=8*e.size/e.downloadTime;t.Yt.accountCompleted(n,t.Xt,e.size),t.Yt.updateBandwidth(o)}}else t.Yt.accountFailed(n,t.Xt)}}),this.registerEvent("onDestroy",function(){t.logger().debug("bitmovin.player.EVENT.ON_DESTROY"),t.player.closeHiveSession(!1)}),0===this.getPlayerVersion().indexOf("7")?this.Kt():0===this.getPlayerVersion().indexOf("6")&&this.Wt())},e.prototype.Wt=function(){var t=this;this.registerEvent("onStartBuffering",function(){t.logger().debug("bitmovin.player.EVENT.ON_START_BUFFERING"),t.onStartBuffering()}),this.registerEvent("onStopBuffering",function(){t.logger().debug("bitmovin.player.EVENT.ON_STOP_BUFFERING"),t.onEndBuffering()}),this.registerEvent("onPause",function(){t.logger().debug("bitmovin.player.EVENT.ON_PAUSE"),t.Jt(2)}),this.registerEvent("onVideoDownloadQualityChange",function(e){t.getStreamProtocol()===StreamProtocol.zt?t.Gt(e.targetQuality):t.Gt(e.targetQuality.split("br")[1])})},e.prototype.Kt=function(){var t=this;this.registerEvent("onStallStarted",function(){t.logger().debug("bitmovin.player.EVENT.ON_STALL_STARTED"),t.onStartBuffering()}),this.registerEvent("onStallEnded",function(){t.logger().debug("bitmovin.player.EVENT.ON_STALL_ENDED"),t.onEndBuffering()}),this.registerEvent("onPaused",function(){t.logger().debug("bitmovin.player.EVENT.ON_PAUSED"),t.Jt(2)}),this.registerEvent("onVideoDownloadQualityChanged",function(e){t.Gt(e.targetQuality&&e.targetQuality.bitrate||e.targetQualityId&&e.targetQualityId.bitrate)})},e.prototype.Gt=function(t){this.logger().debug("newBitrate",t),this.Xt&&t>this.Xt&&this.Yt?this.Yt.bitrateSwitchUp():this.Xt&&this.Xt>t&&this.Yt&&this.Yt.bitrateSwitchDown(),this.Xt=t},e.prototype.Jt=function(t){void 0!=this.Ut&&this.Ut===t||(this.onEventFeedback(t),this.Ut=t)},e.prototype.getPlayerSource=function(){var t=this.getStreamProtocol();return t===StreamProtocol.zt?this.player.getConfig().source.hls:t===StreamProtocol.DASH?this.player.getConfig().source.dash:void 0},e.prototype.getCurrentTime=function(){return null!=this.player?Math.round(1e3*this.player.getCurrentTime()):0},e.prototype.getBufferLen=function(){return null!=this.player&&null!=this.player.getVideoBufferLength&&this.player.getVideoBufferLength()>0?Math.max(0,Math.round(1e3*this.player.getVideoBufferLength())):0},e.prototype.getWindowSize=function(){if(this.player){var t=this.player.getFigure();return{width:t.offsetWidth,height:t.offsetHeight}}},e.prototype.isFullscreen=function(){return this.player.isFullscreen()},e.prototype.isLive=function(){return this.player.isLive()},e.prototype.isActive=function(){return!0},e.prototype.getStreamProtocol=function(){if(this.player){var t=this.player.getStreamType();if("hls"===t)return StreamProtocol.zt;if("dash"===t)return StreamProtocol.DASH}return null},e.prototype.getExtendedStats=function(){var t=this.Yt;return this.Yt=new HiveComm.HivePlayerExtendedStats,t},e.prototype.getPluginName=function(){return this.pluginName},e.prototype.getPluginVersion=function(){return this.getCommVersion()},e.prototype.getPlayerTech=function(){if(this.player)return this.player.getPlayerType()},e.prototype.getPlayerVersion=function(){return void 0!==bitmovin.player.version?bitmovin.player.version:this.player.getVersion()},e}(HiveComm.Plugin);e.$t=a;var c=function(t,e){new a(t,e)};bitmovin.initHiveSDN=c},function(t,e,n){"use strict";var r=function(){function t(){}return t}();r.Zt="undefined"!=typeof HIVE_COMM_JS&&HIVE_COMM_JS,r.te="undefined"!=typeof HIVE_COMM_JAVA&&HIVE_COMM_JAVA,r.ee="undefined"!=typeof HIVE_COMM_JS_PROXY&&HIVE_COMM_JS_PROXY,r.ne="4.1.0",r.re="bitmovin",r.oe="undefined"!=typeof HIVE_SERVICE_ENDPOINT_TEST&&HIVE_SERVICE_ENDPOINT_TEST,r.ie="undefined"==typeof HIVE_PERSISTENT_IDENTITY||HIVE_PERSISTENT_IDENTITY,r.se="undefined"!=typeof INCLUDE_VOD_CACHE&&INCLUDE_VOD_CACHE,r.ue="undefined"!=typeof INCLUDE_UDP_BROADCAST&&INCLUDE_UDP_BROADCAST,r.ae="undefined"!=typeof INCLUDE_UDP_LEADER_ELECTION&&INCLUDE_UDP_LEADER_ELECTION,r.ce="undefined"!=typeof LEADER_SCORE_EQUALITY&&LEADER_SCORE_EQUALITY,r.pe="undefined"!=typeof INCLUDE_DEFAULT_NETWORK&&INCLUDE_DEFAULT_NETWORK,r.fe="undefined"!=typeof HIVE_RESTRICTED_CONNINFO&&HIVE_RESTRICTED_CONNINFO,r.le="undefined"!=typeof HIVE_DISCOVERY?HIVE_DISCOVERY:"ws://127.0.0.1:8000/hive",r.de="undefined"!=typeof P2PDispatcherDetailedLog&&P2PDispatcherDetailedLog,r.he="undefined"!=typeof NetworkManagerDetailedLog&&NetworkManagerDetailedLog,r.ye="undefined"!=typeof ATATUS_KEY?ATATUS_KEY:"592835a6b4204dd197c00488610003e0",r.ve="undefined"!=typeof ATATUS_VERSION?ATATUS_VERSION:"0.8",r.ge="undefined"==typeof ATATUS_DEFAULT_ENABLED||ATATUS_DEFAULT_ENABLED,r.Ee=5,r.Lt="undefined"!=typeof HIVE_PLUGIN_TIMEOUT?HIVE_PLUGIN_TIMEOUT:-1,r.me="undefined"==typeof HIVE_DETECT_PRIVATEIP||HIVE_DETECT_PRIVATEIP,r.Te="undefined"==typeof HIVE_STORE_IP_DB||HIVE_STORE_IP_DB,e.Vt=r},function(t,e,n){"use strict";var r=n(4),o=n(0),i=function(){function t(t,e){this.sessionId=e,this.request=t}return t.prototype.getResponse=function(){var t=this,e=o.defer();return this.Se=new r._e({xhrSetup:function(e,n){e=new HiveComm.HiveRequestFactory(t.sessionId),e.open(t.request.method,n.url,!0);for(var r=0,o=t.request.headers;r<o.length;r++){var i=o[r];e.setRequestHeader(i.name,i.value)}return e.responseType=t.request.responseType,e}}),this.Se.load(this.request,{},{onSuccess:function(n,r,o){console.log("SUCCESS REQUEST",n,r,o),e.resolve({request:t.request,url:t.request.url,headers:t.request.headers,status:n.status,length:n.data.length||n.data.byteLength,statusText:"OK",body:n.data})},onError:function(t,n){var r=t.code;t.text;e.reject(r)},onTimeout:function(t,n){e.reject("timeout")}}),e.k},t.prototype.setProgressListener=function(t){},t.prototype.cancel=function(){this.Se&&this.Se.abort()},t}();e.Ft=i},function(t,e,n){"use strict";var r=function(){function t(t){this.loggerId="[HiveXhrLoader]",this.be=t,t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null,this.xhr=null},t.prototype.abort=function(){var t=this.loader||this.xhr;t&&4!==t.readyState&&(this.stats.Ie=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.we()},t.prototype.we=function(){this.xhr=null;var t=this.context,e=this.stats;e.tfirst=0,e.loaded=0,this.xhrSetup?this.xhr=this.xhrSetup(this.xhr,t):HiveComm.logError("Hive XHR setup missing",this.loggerId),this.xhr.onreadystatechange=this.readystatechange.bind(this),this.xhr.onprogress=this.loadprogress.bind(this),this.config.timeout&&(this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout)),this.xhr.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,r=this.stats,o=this.context,i=this.config;if(!r.Ie&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===n){var s=e.status;if(s>=200&&s<300){r.tload=Math.max(r.tfirst,performance.now());var u=void 0,a=void 0;"arraybuffer"===o.responseType?(u=e.response,a=u.byteLength):(u=e.responseText,a=u.length),r.loaded=r.total=a;var c={url:e.responseURL,data:u};this.callbacks.onSuccess(c,r,o)}else r.retry>=i.Ne||s>=400&&s<499?(console.warn(s+" while loading "+o.url),this.callbacks.onError({code:s,text:e.statusText},o)):(console.warn(s+" while loading "+o.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.we.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,i.ke),r.retry++)}else i.timeout&&(this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),i.timeout))},t.prototype.loadtimeout=function(){console.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)},t.prototype.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total);var n=this.callbacks.onProgress;n&&n(e,this.context,null)},t}();e._e=r}]);
//# sourceMappingURL=bitmovin.comm.hive1532444576721.js.map

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgOWMzYTEwNzU2MDljMWM4ODIxMWMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jb250YWluZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvZG9tLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvY29tcG9uZW50LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2V2ZW50ZGlzcGF0Y2hlci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvdG9nZ2xlYnV0dG9uLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvbGFiZWwudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9idXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zZWxlY3Rib3gudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvdGltZW91dC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9zdHJpbmd1dGlscy50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9hcnJheXV0aWxzLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL3BsYXllcnV0aWxzLnRzIiwid2VicGFjazovLy9leHRlcm5hbCBcImFuZ3VsYXJcIiIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3VpY29udGFpbmVyLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2Jyb3dzZXJ1dGlscy50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3BsYXliYWNrdG9nZ2xlYnV0dG9uLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvdm9sdW1ldG9nZ2xlYnV0dG9uLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc2Vla2Jhci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2NvbnRyb2xiYXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvdWl1dGlscy50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3NwYWNlci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3NldHRpbmdzcGFuZWwudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy92aWRlb3F1YWxpdHlzZWxlY3Rib3gudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9hdWRpb3F1YWxpdHlzZWxlY3Rib3gudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy92b2x1bWVzbGlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9tZXRhZGF0YWxhYmVsLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvY2xpY2tvdmVybGF5LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3ZydG9nZ2xlYnV0dG9uLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvcGxheWJhY2t0aW1lbGFiZWwudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zZXR0aW5nc3RvZ2dsZWJ1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2xpc3RzZWxlY3Rvci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvc3VidGl0bGVzZXR0aW5nc3BhbmVsLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9mb250Y29sb3JzZWxlY3Rib3gudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL2ZvbnRvcGFjaXR5c2VsZWN0Ym94LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9mb250ZmFtaWx5c2VsZWN0Ym94LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9mb250c2l6ZXNlbGVjdGJveC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvYmFja2dyb3VuZGNvbG9yc2VsZWN0Ym94LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9iYWNrZ3JvdW5kb3BhY2l0eXNlbGVjdGJveC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvd2luZG93Y29sb3JzZWxlY3Rib3gudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3dpbmRvd29wYWNpdHlzZWxlY3Rib3gudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL2NoYXJhY3RlcmVkZ2VzZWxlY3Rib3gudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvc3RvcmFnZXV0aWxzLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzY2xvc2VidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NyZXNldGJ1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvc3VidGl0bGVzZXR0aW5nc2xhYmVsLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzb3BlbmJ1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2F1ZGlvdHJhY2tzZWxlY3Rib3gudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zZWVrYmFybGFiZWwudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNlbGVjdGJveC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlb3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2Nhc3R0b2dnbGVidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jYXN0c3RhdHVzb3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2Vycm9ybWVzc2FnZW92ZXJsYXkudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy90aXRsZWJhci50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3JlY29tbWVuZGF0aW9ub3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2h1Z2VyZXBsYXlidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9wbGF5YmFja3NwZWVkc2VsZWN0Ym94LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvYnVmZmVyaW5nb3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3BsYXliYWNrdG9nZ2xlb3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2h1Z2VwbGF5YmFja3RvZ2dsZWJ1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2Nsb3NlYnV0dG9uLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvYWlycGxheXRvZ2dsZWJ1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3BpY3R1cmVpbnBpY3R1cmV0b2dnbGVidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vYml0ZGFzaC1jb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL2JpdGRhc2gtZGlyZWN0aXZlLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvdWltYW5hZ2VyLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2d1aWQudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NtYW5hZ2VyLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2ltYWdlbG9hZGVyLnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvdHZub2lzZWNhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2F1ZGlvb25seW92ZXJsYXkudHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9pdGVtc2VsZWN0aW9ubGlzdC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3dhdGVybWFyay50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3ZvbHVtZWNvbnRyb2xidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9hZHNraXBidXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9hZG1lc3NhZ2VsYWJlbC50cyIsIndlYnBhY2s6Ly8vLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2FkY2xpY2tvdmVybGF5LnRzIiwid2VicGFjazovLy8uLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvY2FzdHVpY29udGFpbmVyLnRzIiwid2VicGFjazovLy8uLi9saWIvaGl2ZS9iaXRtb3Zpbi5oaXZlLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7O0FDN0RBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRix5QkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxpQ0FBaUM7QUFDOUYsZ0JBQWdCLDZCQUE2QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxnQkFBZ0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHFEQUFxRCxnQkFBZ0I7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7QUMzSEE7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsT0FBTztBQUM1QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUJBQWlCLGNBQWM7QUFDL0Isd0JBQXdCLGFBQWE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLElBQUk7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDZCQUE2QixFQUFFO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDZCQUE2QixFQUFFO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7Ozs7Ozs7O0FDNVpBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxhQUFhO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUJBQXVCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDhCQUE4QjtBQUM5QztBQUNBO0FBQ0EsNkVBQTZFLHdDQUF3QztBQUNySDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixZQUFZLGdEQUFnRCwrQkFBK0I7QUFDeEgsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCx3QkFBd0I7QUFDM0U7QUFDQSxpRUFBaUUsa0JBQWtCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxtQ0FBbUM7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLG1DQUFtQztBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsbUNBQW1DO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxtQkFBbUI7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsbUNBQW1DO0FBQ3pHLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsbUNBQW1DO0FBQ3pHLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7Ozs7Ozs7O0FDdlVBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRix5QkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJCQUEyQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGFBQWE7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHlCQUF5QjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxpQ0FBaUM7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxrRUFBa0Usc0JBQXNCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGNBQWM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLHNCQUFzQiwyQkFBMkI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7Ozs7QUN2S0Q7QUFDQTtBQUNBO0FBQ0EsVUFBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLHlCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLENBQUM7QUFDRCw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7OztBQzFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYseUJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNELDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7OztBQzNJQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYseUJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNELDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsYUFBYTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsZUFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixlQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7Ozs7Ozs7O0FDdkhBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRix5QkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7OztBQ3JFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYseUJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNELDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGFBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHNCQUFzQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsZ0JBQWdCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsdUJBQXVCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7QUNsRkE7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0JBQWdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7Ozs7Ozs7O0FDaEVBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBLGdDQUFnQyxvQ0FBb0M7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNEJBQTRCLEtBQUsseUJBQXlCO0FBQ3hGLFNBQVMseUJBQXlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGNBQWM7QUFDdEQ7QUFDQSxpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0EsdURBQXVELHVDQUF1QywrREFBK0Q7QUFDN0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnRUFBZ0U7Ozs7Ozs7O0FDakpqRTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixJQUFJO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDZEQUE2RDs7Ozs7Ozs7QUNwQjlEO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssd0VBQXdFO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRiw0Q0FBNEM7QUFDOUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGdCQUFnQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUMsZ0VBQWdFOzs7Ozs7O0FDMUhqRSx5Qjs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRix5QkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRixnQkFBZ0I7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxpREFBaUQsRUFBRTtBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxTQUFTO0FBQ1Q7QUFDQSxxQkFBcUI7QUFDckIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQzlQQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsbUVBQW1FOzs7Ozs7OztBQ1hwRTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYseUJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNELDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsYUFBYTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx5QkFBeUI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBOzs7Ozs7OztBQzNHQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYseUJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNELDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGFBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7OztBQzVFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYseUJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNELDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsYUFBYTtBQUM3QztBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsK0JBQStCO0FBQ3RFLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsc0JBQXNCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxjQUFjO0FBQ2pELHlDQUF5QyxxQkFBcUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGtFQUFrRSx1Q0FBdUMsRUFBRTtBQUMzRztB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsbUJBQW1CO0FBQ3hELGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixhQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxZQUFZO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxnQkFBZ0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNi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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGdCQUFnQix3QkFBd0IsMEJBQTBCLGdC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O0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLDBEQUEwRCxpQkFBaUI7QUFDM0UsSUFBSSw4QkFBOEI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7OztBQ25NQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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LGlCQUFpQixhQUFhLCtCQUErQixnQkFBZ0IsZ0NBQWdDLDBDQUEwQyx1QkFBdUIseUJBQXlCLHVCQUF1QixpRkFBaUYsZ0NBQWdDLFdBQVcsS0FBSyxXQUFXLG1DQUFtQyxnREFBZ0QsOEJBQThCLEVBQUUsMEJBQTBCLGdEQUFnRCxrSkFBa0osRUFBRSx1QkFBdUIsYUFBYSxPQUFPLFlBQVkseUJBQXlCLHFCQUFxQixNQUFNLDhDQUE4QywrQkFBK0IseUJBQXlCLEdBQUcsR0FBRyxPQUFPLGlCQUFpQixhQUFhLGlCQUFpQixjQUFjLG9GQUFvRixzQ0FBc0MsNENBQTRDLDhCQUE4Qiw0QkFBNEIsa0xBQWtMLGtDQUFrQywwREFBMEQsbUNBQW1DLHdDQUF3QywyQkFBMkIsY0FBYyxnQ0FBZ0MsNldBQTZXLDBDQUEwQywrRUFBK0Usa0lBQWtJLGVBQWUsa0JBQWtCLDZDQUE2QyxzQkFBc0IsOEdBQThHLE9BQU8sMEJBQTBCLGdDQUFnQyxtR0FBbUcseUJBQXlCLHdPQUF3TywrRkFBK0Ysb0NBQW9DLDBHQUEwRyxzQ0FBc0MsaUJBQWlCLHdEQUF3RCxnQ0FBZ0MsMEJBQTBCLEdBQUcsR0FBRyxPQUFPO0FBQzlwekIsMkQiLCJmaWxlIjoibWktYW5ndWxhci1iaXRkYXNoLXBsYXllci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDY2KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA5YzNhMTA3NTYwOWMxYzg4MjExYyIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRcIik7XHJcbnZhciBkb21fMSA9IHJlcXVpcmUoXCIuLi9kb21cIik7XHJcbnZhciBhcnJheXV0aWxzXzEgPSByZXF1aXJlKFwiLi4vYXJyYXl1dGlsc1wiKTtcclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGNvbXBvbmVudCB0aGF0IGNhbiBjb250YWluIGEgY29sbGVjdGlvbiBvZiBjaGlsZCBjb21wb25lbnRzLlxyXG4gKiBDb21wb25lbnRzIGNhbiBiZSBhZGRlZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSB0aHJvdWdoIHRoZSB7QGxpbmsgQ29udGFpbmVyQ29uZmlnI2NvbXBvbmVudHN9IHNldHRpbmcsIG9yIGxhdGVyXHJcbiAqIHRocm91Z2ggdGhlIHtAbGluayBDb250YWluZXIjYWRkQ29tcG9uZW50fSBtZXRob2QuIFRoZSBVSU1hbmFnZXIgYXV0b21hdGljYWxseSB0YWtlcyBjYXJlIG9mIGFsbCBjb21wb25lbnRzLCBpLmUuIGl0XHJcbiAqIGluaXRpYWxpemVzIGFuZCBjb25maWd1cmVzIHRoZW0gYXV0b21hdGljYWxseS5cclxuICpcclxuICogSW4gdGhlIERPTSwgdGhlIGNvbnRhaW5lciBjb25zaXN0cyBvZiBhbiBvdXRlciA8ZGl2PiAodGhhdCBjYW4gYmUgY29uZmlndXJlZCBieSB0aGUgY29uZmlnKSBhbmQgYW4gaW5uZXIgd3JhcHBlclxyXG4gKiA8ZGl2PiB0aGF0IGNvbnRhaW5zIHRoZSBjb21wb25lbnRzLiBUaGlzIGRvdWJsZS08ZGl2Pi1zdHJ1Y3R1cmUgaXMgb2Z0ZW4gcmVxdWlyZWQgdG8gYWNoaWV2ZSBtYW55IGFkdmFuY2VkIGVmZmVjdHNcclxuICogaW4gQ1NTIGFuZC9vciBKUywgZS5nLiBhbmltYXRpb25zIGFuZCBjZXJ0YWluIGZvcm1hdHRpbmcgd2l0aCBhYnNvbHV0ZSBwb3NpdGlvbmluZy5cclxuICpcclxuICogRE9NIGV4YW1wbGU6XHJcbiAqIDxjb2RlPlxyXG4gKiAgICAgPGRpdiBjbGFzcz0ndWktY29udGFpbmVyJz5cclxuICogICAgICAgICA8ZGl2IGNsYXNzPSdjb250YWluZXItd3JhcHBlcic+XHJcbiAqICAgICAgICAgICAgIC4uLiBjaGlsZCBjb21wb25lbnRzIC4uLlxyXG4gKiAgICAgICAgIDwvZGl2PlxyXG4gKiAgICAgPC9kaXY+XHJcbiAqIDwvY29kZT5cclxuICovXHJcbnZhciBDb250YWluZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENvbnRhaW5lciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENvbnRhaW5lcihjb25maWcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktY29udGFpbmVyJyxcclxuICAgICAgICAgICAgY29tcG9uZW50czogW10sXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICBfdGhpcy5jb21wb25lbnRzVG9BZGQgPSBbXTtcclxuICAgICAgICBfdGhpcy5jb21wb25lbnRzVG9SZW1vdmUgPSBbXTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBjaGlsZCBjb21wb25lbnQgdG8gdGhlIGNvbnRhaW5lci5cclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgdGhlIGNvbXBvbmVudCB0byBhZGRcclxuICAgICAqL1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5hZGRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcuY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzVG9BZGQucHVzaChjb21wb25lbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhIGNoaWxkIGNvbXBvbmVudCBmcm9tIHRoZSBjb250YWluZXIuXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IHRoZSBjb21wb25lbnQgdG8gcmVtb3ZlXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgY29tcG9uZW50IGhhcyBiZWVuIHJlbW92ZWQsIGZhbHNlIGlmIGl0IGlzIG5vdCBjb250YWluZWQgaW4gdGhpcyBjb250YWluZXJcclxuICAgICAqL1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5yZW1vdmVDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKGFycmF5dXRpbHNfMS5BcnJheVV0aWxzLnJlbW92ZSh0aGlzLmNvbmZpZy5jb21wb25lbnRzLCBjb21wb25lbnQpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzVG9SZW1vdmUucHVzaChjb21wb25lbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGFuIGFycmF5IG9mIGFsbCBjaGlsZCBjb21wb25lbnRzIGluIHRoaXMgY29udGFpbmVyLlxyXG4gICAgICogQHJldHVybnMge0NvbXBvbmVudDxDb21wb25lbnRDb25maWc+W119XHJcbiAgICAgKi9cclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuZ2V0Q29tcG9uZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcuY29tcG9uZW50cztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYWxsIGNoaWxkIGNvbXBvbmVudHMgZnJvbSB0aGUgY29udGFpbmVyLlxyXG4gICAgICovXHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnJlbW92ZUNvbXBvbmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZ2V0Q29tcG9uZW50cygpLnNsaWNlKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgRE9NIG9mIHRoZSBjb250YWluZXIgd2l0aCB0aGUgY3VycmVudCBjb21wb25lbnRzLlxyXG4gICAgICovXHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZUNvbXBvbmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLyogV2UgY2Fubm90IGp1c3QgY2xlYXIgdGhlIGNvbnRhaW5lciB0byByZW1vdmUgYWxsIGVsZW1lbnRzIGFuZCB0aGVuIHJlLWFkZCB0aG9zZSB0aGF0IHNob3VsZCBzdGF5LCBiZWNhdXNlXHJcbiAgICAgICAgICogSUUgbG9vc2VzIHRoZSBpbm5lckhUTUwgb2YgdW5hdHRhY2hlZCBlbGVtZW50cywgbGVhZGluZyB0byBlbXB0eSBlbGVtZW50cyB3aXRoaW4gdGhlIGNvbnRhaW5lciAoZS5nLiBtaXNzaW5nXHJcbiAgICAgICAgICogc3VidGl0bGUgdGV4dCBpbiBTdWJ0aXRsZUxhYmVsKS5cclxuICAgICAgICAgKiBJbnN0ZWFkLCB3ZSBrZWVwIGEgbGlzdCBvZiBlbGVtZW50cyB0byBhZGQgYW5kIHJlbW92ZSwgbGVhdmluZyByZW1haW5pbmcgZWxlbWVudHMgYWxvbmUuIEJ5IGtlZXBpbmcgdGhlbSBpblxyXG4gICAgICAgICAqIHRoZSBET00sIHRoZWlyIGNvbnRlbnQgZ2V0cyBwcmVzZXJ2ZWQgaW4gYWxsIGJyb3dzZXJzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBjb21wb25lbnQ7XHJcbiAgICAgICAgd2hpbGUgKGNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50c1RvUmVtb3ZlLnNoaWZ0KCkpIHtcclxuICAgICAgICAgICAgY29tcG9uZW50LmdldERvbUVsZW1lbnQoKS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKGNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50c1RvQWRkLnNoaWZ0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pbm5lckNvbnRhaW5lckVsZW1lbnQuYXBwZW5kKGNvbXBvbmVudC5nZXREb21FbGVtZW50KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBDcmVhdGUgdGhlIGNvbnRhaW5lciBlbGVtZW50ICh0aGUgb3V0ZXIgPGRpdj4pXHJcbiAgICAgICAgdmFyIGNvbnRhaW5lckVsZW1lbnQgPSBuZXcgZG9tXzEuRE9NKHRoaXMuY29uZmlnLnRhZywge1xyXG4gICAgICAgICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbm5lciBjb250YWluZXIgZWxlbWVudCAodGhlIGlubmVyIDxkaXY+KSB0aGF0IHdpbGwgY29udGFpbiB0aGUgY29tcG9uZW50c1xyXG4gICAgICAgIHZhciBpbm5lckNvbnRhaW5lciA9IG5ldyBkb21fMS5ET00odGhpcy5jb25maWcudGFnLCB7XHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdjb250YWluZXItd3JhcHBlcicpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW5uZXJDb250YWluZXJFbGVtZW50ID0gaW5uZXJDb250YWluZXI7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY29uZmlnLmNvbXBvbmVudHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsQ29tcG9uZW50ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHNUb0FkZC5wdXNoKGluaXRpYWxDb21wb25lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudHMoKTtcclxuICAgICAgICBjb250YWluZXJFbGVtZW50LmFwcGVuZChpbm5lckNvbnRhaW5lcik7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lckVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbnRhaW5lcjtcclxufShjb21wb25lbnRfMS5Db21wb25lbnQpKTtcclxuZXhwb3J0cy5Db250YWluZXIgPSBDb250YWluZXI7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jb250YWluZXIudHNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLyoqXHJcbiAqIFNpbXBsZSBET00gbWFuaXB1bGF0aW9uIGFuZCBET00gZWxlbWVudCBldmVudCBoYW5kbGluZyBtb2RlbGVkIGFmdGVyIGpRdWVyeSAoYXMgcmVwbGFjZW1lbnQgZm9yIGpRdWVyeSkuXHJcbiAqXHJcbiAqIExpa2UgalF1ZXJ5LCBET00gb3BlcmF0ZXMgb24gc2luZ2xlIGVsZW1lbnRzIGFuZCBsaXN0cyBvZiBlbGVtZW50cy4gRm9yIGV4YW1wbGU6IGNyZWF0aW5nIGFuIGVsZW1lbnQgcmV0dXJucyBhIERPTVxyXG4gKiBpbnN0YW5jZSB3aXRoIGEgc2luZ2xlIGVsZW1lbnQsIHNlbGVjdGluZyBlbGVtZW50cyByZXR1cm5zIGEgRE9NIGluc3RhbmNlIHdpdGggemVybywgb25lLCBvciBtYW55IGVsZW1lbnRzLiBTaW1pbGFyXHJcbiAqIHRvIGpRdWVyeSwgc2V0dGVycyB1c3VhbGx5IGFmZmVjdCBhbGwgZWxlbWVudHMsIHdoaWxlIGdldHRlcnMgb3BlcmF0ZSBvbiBvbmx5IHRoZSBmaXJzdCBlbGVtZW50LlxyXG4gKiBBbHNvIHNpbWlsYXIgdG8galF1ZXJ5LCBtb3N0IG1ldGhvZHMgKGV4Y2VwdCBnZXR0ZXJzKSByZXR1cm4gdGhlIERPTSBpbnN0YW5jZSBmYWNpbGl0YXRpbmcgZWFzeSBjaGFpbmluZyBvZiBtZXRob2RcclxuICogY2FsbHMuXHJcbiAqXHJcbiAqIEJ1aWx0IHdpdGggdGhlIGhlbHAgb2Y6IGh0dHA6Ly95b3VtaWdodG5vdG5lZWRqcXVlcnkuY29tL1xyXG4gKi9cclxudmFyIERPTSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBET00oc29tZXRoaW5nLCBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50OyAvLyBTZXQgdGhlIGdsb2JhbCBkb2N1bWVudCB0byB0aGUgbG9jYWwgZG9jdW1lbnQgZmllbGRcclxuICAgICAgICBpZiAoc29tZXRoaW5nIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKHNvbWV0aGluZy5sZW5ndGggPiAwICYmIHNvbWV0aGluZ1swXSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBzb21ldGhpbmc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc29tZXRoaW5nIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzb21ldGhpbmc7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMgPSBbZWxlbWVudF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHNvbWV0aGluZyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gYSBkb2N1bWVudCBpcyBwYXNzZWQgaW4sIHdlIGRvIG5vdCBkbyBhbnl0aGluZyB3aXRoIGl0LCBidXQgYnkgc2V0dGluZyB0aGlzLmVsZW1lbnRzIHRvIG51bGxcclxuICAgICAgICAgICAgLy8gd2UgZ2l2ZSB0aGUgZXZlbnQgaGFuZGxpbmcgbWV0aG9kIGEgbWVhbnMgdG8gZGV0ZWN0IGlmIHRoZSBldmVudHMgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgb24gdGhlIGRvY3VtZW50XHJcbiAgICAgICAgICAgIC8vIGluc3RlYWQgb2YgZWxlbWVudHMuXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgIHZhciB0YWdOYW1lID0gc29tZXRoaW5nO1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGF0dHJpYnV0ZU5hbWUgaW4gYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZVZhbHVlID0gYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzID0gW2VsZW1lbnRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gc29tZXRoaW5nO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzID0gdGhpcy5maW5kQ2hpbGRFbGVtZW50cyhzZWxlY3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERPTS5wcm90b3R5cGUsIFwibGVuZ3RoXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgdGhhdCB0aGlzIERPTSBpbnN0YW5jZSBjdXJyZW50bHkgaG9sZHMuXHJcbiAgICAgICAgICogQHJldHVybnMge251bWJlcn0gdGhlIG51bWJlciBvZiBlbGVtZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50cyA/IHRoaXMuZWxlbWVudHMubGVuZ3RoIDogMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgSFRNTCBlbGVtZW50cyB0aGF0IHRoaXMgRE9NIGluc3RhbmNlIGN1cnJlbnRseSBob2xkcy5cclxuICAgICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudFtdfSB0aGUgcmF3IEhUTUwgZWxlbWVudHNcclxuICAgICAqIEBkZXByZWNhdGVkIHVzZSB7QGxpbmsgI2dldCgpfSBpbnN0ZWFkXHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUuZ2V0RWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCk7XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50cztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuZWxlbWVudHMgfHwgaW5kZXggPj0gdGhpcy5lbGVtZW50cy5sZW5ndGggfHwgaW5kZXggPCAtdGhpcy5lbGVtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW3RoaXMuZWxlbWVudHMubGVuZ3RoIC0gaW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNbaW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEEgc2hvcnRjdXQgbWV0aG9kIGZvciBpdGVyYXRpbmcgYWxsIGVsZW1lbnRzLiBTaG9ydHMgdGhpcy5lbGVtZW50cy5mb3JFYWNoKC4uLikgdG8gdGhpcy5mb3JFYWNoKC4uLikuXHJcbiAgICAgKiBAcGFyYW0gaGFuZGxlciB0aGUgaGFuZGxlciB0byBleGVjdXRlIGFuIG9wZXJhdGlvbiBvbiBhbiBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXIoZWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5maW5kQ2hpbGRFbGVtZW50c09mRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHZhciBjaGlsZEVsZW1lbnRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxuICAgICAgICAvLyBDb252ZXJ0IE5vZGVMaXN0IHRvIEFycmF5XHJcbiAgICAgICAgLy8gaHR0cHM6Ly90b2RkbW90dG8uY29tL2EtY29tcHJlaGVuc2l2ZS1kaXZlLWludG8tbm9kZWxpc3RzLWFycmF5cy1jb252ZXJ0aW5nLW5vZGVsaXN0cy1hbmQtdW5kZXJzdGFuZGluZy10aGUtZG9tL1xyXG4gICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKGNoaWxkRWxlbWVudHMpO1xyXG4gICAgfTtcclxuICAgIERPTS5wcm90b3R5cGUuZmluZENoaWxkRWxlbWVudHMgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBhbGxDaGlsZEVsZW1lbnRzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBhbGxDaGlsZEVsZW1lbnRzID0gYWxsQ2hpbGRFbGVtZW50cy5jb25jYXQoX3RoaXMuZmluZENoaWxkRWxlbWVudHNPZkVsZW1lbnQoZWxlbWVudCwgc2VsZWN0b3IpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kQ2hpbGRFbGVtZW50c09mRWxlbWVudChkb2N1bWVudCwgc2VsZWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWxsQ2hpbGRFbGVtZW50cztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZpbmRzIGFsbCBjaGlsZCBlbGVtZW50cyBvZiBhbGwgZWxlbWVudHMgbWF0Y2hpbmcgdGhlIHN1cHBsaWVkIHNlbGVjdG9yLlxyXG4gICAgICogQHBhcmFtIHNlbGVjdG9yIHRoZSBzZWxlY3RvciB0byBtYXRjaCB3aXRoIGNoaWxkIGVsZW1lbnRzXHJcbiAgICAgKiBAcmV0dXJucyB7RE9NfSBhIG5ldyBET00gaW5zdGFuY2UgcmVwcmVzZW50aW5nIGFsbCBtYXRjaGVkIGNoaWxkcmVuXHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xyXG4gICAgICAgIHZhciBhbGxDaGlsZEVsZW1lbnRzID0gdGhpcy5maW5kQ2hpbGRFbGVtZW50cyhzZWxlY3Rvcik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBET00oYWxsQ2hpbGRFbGVtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5odG1sID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcclxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0SHRtbChjb250ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEh0bWwoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5nZXRIdG1sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzWzBdLmlubmVySFRNTDtcclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLnNldEh0bWwgPSBmdW5jdGlvbiAoY29udGVudCkge1xyXG4gICAgICAgIGlmIChjb250ZW50ID09PSB1bmRlZmluZWQgfHwgY29udGVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIFNldCB0byBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgaW5uZXJIVE1MIGdldHRpbmcgc2V0IHRvICd1bmRlZmluZWQnIChhbGwgYnJvd3NlcnMpIG9yICdudWxsJyAoSUU5KVxyXG4gICAgICAgICAgICBjb250ZW50ID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIGlubmVyIEhUTUwgb2YgYWxsIGVsZW1lbnRzIChkZWxldGVzIGFsbCBjaGlsZHJlbikuXHJcbiAgICAgKiBAcmV0dXJucyB7RE9NfVxyXG4gICAgICovXHJcbiAgICBET00ucHJvdG90eXBlLmVtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgZmlyc3QgZm9ybSBlbGVtZW50LCBlLmcuIHRoZSBzZWxlY3RlZCB2YWx1ZSBvZiBhIHNlbGVjdCBib3ggb3IgdGhlIHRleHQgaWYgYW5cclxuICAgICAqIGlucHV0IGZpZWxkLlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHZhbHVlIG9mIGEgZm9ybSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUudmFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50c1swXTtcclxuICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50IHx8IGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVE9ETyBhZGQgc3VwcG9ydCBmb3IgbWlzc2luZyBmb3JtIGVsZW1lbnRzXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInZhbCgpIG5vdCBzdXBwb3J0ZWQgZm9yIFwiICsgdHlwZW9mIGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLmF0dHIgPSBmdW5jdGlvbiAoYXR0cmlidXRlLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRBdHRyKGF0dHJpYnV0ZSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cihhdHRyaWJ1dGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBET00ucHJvdG90eXBlLmdldEF0dHIgPSBmdW5jdGlvbiAoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNbMF0uZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5zZXRBdHRyID0gZnVuY3Rpb24gKGF0dHJpYnV0ZSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gKGRhdGFBdHRyaWJ1dGUsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldERhdGEoZGF0YUF0dHJpYnV0ZSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0YShkYXRhQXR0cmlidXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKGRhdGFBdHRyaWJ1dGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c1swXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtJyArIGRhdGFBdHRyaWJ1dGUpO1xyXG4gICAgfTtcclxuICAgIERPTS5wcm90b3R5cGUuc2V0RGF0YSA9IGZ1bmN0aW9uIChkYXRhQXR0cmlidXRlLCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS0nICsgZGF0YUF0dHJpYnV0ZSwgdmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwZW5kcyBvbmUgb3IgbW9yZSBET00gZWxlbWVudHMgYXMgY2hpbGRyZW4gdG8gYWxsIGVsZW1lbnRzLlxyXG4gICAgICogQHBhcmFtIGNoaWxkRWxlbWVudHMgdGhlIGNocmlsZCBlbGVtZW50cyB0byBhcHBlbmRcclxuICAgICAqIEByZXR1cm5zIHtET019XHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjaGlsZEVsZW1lbnRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgY2hpbGRFbGVtZW50c1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY2hpbGRFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkRWxlbWVudC5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChfLCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGRFbGVtZW50LmVsZW1lbnRzW2luZGV4XSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFsbCBlbGVtZW50cyBmcm9tIHRoZSBET00uXHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG9mZnNldCBvZiB0aGUgZmlyc3QgZWxlbWVudCBmcm9tIHRoZSBkb2N1bWVudCdzIHRvcCBsZWZ0IGNvcm5lci5cclxuICAgICAqIEByZXR1cm5zIHtPZmZzZXR9XHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUub2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50c1swXTtcclxuICAgICAgICB2YXIgZWxlbWVudFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHZhciBodG1sUmVjdCA9IGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAvLyBWaXJ0dWFsIHZpZXdwb3J0IHNjcm9sbCBoYW5kbGluZyAoZS5nLiBwaW5jaCB6b29tZWQgdmlld3BvcnRzIGluIG1vYmlsZSBicm93c2VycyBvciBkZXNrdG9wIENocm9tZS9FZGdlKVxyXG4gICAgICAgIC8vICdub3JtYWwnIHpvb21zIGFuZCB2aXJ0dWFsIHZpZXdwb3J0IHpvb21zIChha2EgbGF5b3V0IHZpZXdwb3J0KSByZXN1bHQgaW4gZGlmZmVyZW50XHJcbiAgICAgICAgLy8gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSByZXN1bHRzOlxyXG4gICAgICAgIC8vICAtIHdpdGggbm9ybWFsIHNjcm9sbHMsIHRoZSBjbGllbnRSZWN0IGRlY3JlYXNlcyB3aXRoIGFuIGluY3JlYXNlIGluIHNjcm9sbChUb3B8TGVmdCkvcGFnZShYfFkpT2Zmc2V0XHJcbiAgICAgICAgLy8gIC0gd2l0aCBwaW5jaCB6b29tIHNjcm9sbHMsIHRoZSBjbGllbnRSZWN0IHN0YXlzIHRoZSBzYW1lIHdoaWxlIHNjcm9sbC9wYWdlT2Zmc2V0IGNoYW5nZXNcclxuICAgICAgICAvLyBUaGlzIG1lYW5zLCB0aGF0IHRoZSBjb21iaW5hdGlvbiBvZiBjbGllbnRSZWN0ICsgc2Nyb2xsL3BhZ2VPZmZzZXQgZG9lcyBub3Qgd29yayB0byBjYWxjdWxhdGUgdGhlIG9mZnNldFxyXG4gICAgICAgIC8vIGZyb20gdGhlIGRvY3VtZW50J3MgdXBwZXIgbGVmdCBvcmlnaW4gd2hlbiBwaW5jaCB6b29tIGlzIHVzZWQuXHJcbiAgICAgICAgLy8gVG8gd29yayBhcm91bmQgdGhpcyBpc3N1ZSwgd2UgZG8gbm90IHVzZSBzY3JvbGwvcGFnZU9mZnNldCBidXQgZ2V0IHRoZSBjbGllbnRSZWN0IG9mIHRoZSBodG1sIGVsZW1lbnQgYW5kXHJcbiAgICAgICAgLy8gc3VidHJhY3QgaXQgZnJvbSB0aGUgZWxlbWVudCdzIHJlY3QsIHdoaWNoIGFsd2F5cyByZXN1bHRzIGluIHRoZSBvZmZzZXQgZnJvbSB0aGUgZG9jdW1lbnQgb3JpZ2luLlxyXG4gICAgICAgIC8vIE5PVEU6IHRoZSBjdXJyZW50IHdheSBvZiBvZmZzZXQgY2FsY3VsYXRpb24gd2FzIGltcGxlbWVudGVkIHNwZWNpZmljYWxseSB0byB0cmFjayBldmVudCBwb3NpdGlvbnMgb24gdGhlXHJcbiAgICAgICAgLy8gc2VlayBiYXIsIGFuZCBpdCBtaWdodCBicmVhayBjb21wYXRpYmlsaXR5IHdpdGggalF1ZXJ5J3Mgb2Zmc2V0KCkgbWV0aG9kLiBJZiB0aGlzIGV2ZXIgdHVybnMgb3V0IHRvIGJlIGFcclxuICAgICAgICAvLyBwcm9ibGVtLCB0aGlzIG1ldGhvZCBzaG91bGQgYmUgcmV2ZXJ0ZWQgdG8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgb2Zmc2V0IGNhbGN1bGF0aW9uIG1vdmVkIHRvIHRoZSBzZWVrIGJhci5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3A6IGVsZW1lbnRSZWN0LnRvcCAtIGh0bWxSZWN0LnRvcCxcclxuICAgICAgICAgICAgbGVmdDogZWxlbWVudFJlY3QubGVmdCAtIGh0bWxSZWN0LmxlZnQsXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHdpZHRoIG9mIHRoZSBmaXJzdCBlbGVtZW50LlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gdGhlIHdpZHRoIG9mIHRoZSBmaXJzdCBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUud2lkdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gVE9ETyBjaGVjayBpZiB0aGlzIGlzIHRoZSBzYW1lIGFzIGpRdWVyeSdzIHdpZHRoKCkgKHByb2JhYmx5IG5vdClcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c1swXS5vZmZzZXRXaWR0aDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGhlaWdodCBvZiB0aGUgZmlyc3QgZWxlbWVudC5cclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBoZWlnaHQgb2YgdGhlIGZpcnN0IGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gVE9ETyBjaGVjayBpZiB0aGlzIGlzIHRoZSBzYW1lIGFzIGpRdWVyeSdzIGhlaWdodCgpIChwcm9iYWJseSBub3QpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNbMF0ub2Zmc2V0SGVpZ2h0O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXR0YWNoZXMgYW4gZXZlbnQgaGFuZGxlciB0byBvbmUgb3IgbW9yZSBldmVudHMgb24gYWxsIGVsZW1lbnRzLlxyXG4gICAgICogQHBhcmFtIGV2ZW50TmFtZSB0aGUgZXZlbnQgbmFtZSAob3IgbXVsdGlwbGUgbmFtZXMgc2VwYXJhdGVkIGJ5IHNwYWNlKSB0byBsaXN0ZW4gdG9cclxuICAgICAqIEBwYXJhbSBldmVudEhhbmRsZXIgdGhlIGV2ZW50IGhhbmRsZXIgdG8gY2FsbCB3aGVuIHRoZSBldmVudCBmaXJlc1xyXG4gICAgICogQHJldHVybnMge0RPTX1cclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGV2ZW50SGFuZGxlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGV2ZW50cyA9IGV2ZW50TmFtZS5zcGxpdCgnICcpO1xyXG4gICAgICAgIGV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuZWxlbWVudHMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbiBldmVudCBoYW5kbGVyIGZyb20gb25lIG9yIG1vcmUgZXZlbnRzIG9uIGFsbCBlbGVtZW50cy5cclxuICAgICAqIEBwYXJhbSBldmVudE5hbWUgdGhlIGV2ZW50IG5hbWUgKG9yIG11bHRpcGxlIG5hbWVzIHNlcGFyYXRlZCBieSBzcGFjZSkgdG8gcmVtb3ZlIHRoZSBoYW5kbGVyIGZyb21cclxuICAgICAqIEBwYXJhbSBldmVudEhhbmRsZXIgdGhlIGV2ZW50IGhhbmRsZXIgdG8gcmVtb3ZlXHJcbiAgICAgKiBAcmV0dXJucyB7RE9NfVxyXG4gICAgICovXHJcbiAgICBET00ucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGV2ZW50SGFuZGxlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGV2ZW50cyA9IGV2ZW50TmFtZS5zcGxpdCgnICcpO1xyXG4gICAgICAgIGV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuZWxlbWVudHMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgc3BlY2lmaWVkIGNsYXNzKGVzKSB0byBhbGwgZWxlbWVudHMuXHJcbiAgICAgKiBAcGFyYW0gY2xhc3NOYW1lIHRoZSBjbGFzcyhlcykgdG8gYWRkLCBtdWx0aXBsZSBjbGFzc2VzIHNlcGFyYXRlZCBieSBzcGFjZVxyXG4gICAgICogQHJldHVybnMge0RPTX1cclxuICAgICAqL1xyXG4gICAgRE9NLnByb3RvdHlwZS5hZGRDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xhc3NOYW1lcyA9IGNsYXNzTmFtZS5zcGxpdCgnICcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoY2xhc3NOYW1lKSB7IHJldHVybiBjbGFzc05hbWUubGVuZ3RoID4gMDsgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xhc3NOYW1lcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKF9hID0gZWxlbWVudC5jbGFzc0xpc3QpLmFkZC5hcHBseShfYSwgY2xhc3NOYW1lcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlZCB0aGUgc3BlY2lmaWVkIGNsYXNzKGVzKSBmcm9tIGFsbCBlbGVtZW50cy5cclxuICAgICAqIEBwYXJhbSBjbGFzc05hbWUgdGhlIGNsYXNzKGVzKSB0byByZW1vdmUsIG11bHRpcGxlIGNsYXNzZXMgc2VwYXJhdGVkIGJ5IHNwYWNlXHJcbiAgICAgKiBAcmV0dXJucyB7RE9NfVxyXG4gICAgICovXHJcbiAgICBET00ucHJvdG90eXBlLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbGFzc05hbWVzID0gY2xhc3NOYW1lLnNwbGl0KCcgJylcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChjbGFzc05hbWUpIHsgcmV0dXJuIGNsYXNzTmFtZS5sZW5ndGggPiAwOyB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAoX2EgPSBlbGVtZW50LmNsYXNzTGlzdCkucmVtb3ZlLmFwcGx5KF9hLCBjbGFzc05hbWVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXFxcYiknICsgY2xhc3NOYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyhcXFxcYnwkKScsICdnaScpLCAnICcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiBhbnkgb2YgdGhlIGVsZW1lbnRzIGhhcyB0aGUgc3BlY2lmaWVkIGNsYXNzLlxyXG4gICAgICogQHBhcmFtIGNsYXNzTmFtZSB0aGUgY2xhc3MgbmFtZSB0byBjaGVja1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgb25lIG9mIHRoZSBlbGVtZW50cyBoYXMgdGhlIGNsYXNzIGF0dGFjaGVkLCBlbHNlIGlmIG5vIGVsZW1lbnQgaGFzIGl0IGF0dGFjaGVkXHJcbiAgICAgKi9cclxuICAgIERPTS5wcm90b3R5cGUuaGFzQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgdmFyIGhhc0NsYXNzID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB3ZSBhcmUgaW5zaWRlIGEgaGFuZGxlciwgd2UgY2FuJ3QganVzdCAncmV0dXJuIHRydWUnLiBJbnN0ZWFkLCB3ZSBzYXZlIGl0IHRvIGEgdmFyaWFibGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgcmV0dXJuIGl0IGF0IHRoZSBlbmQgb2YgdGhlIGZ1bmN0aW9uIGJvZHkuXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzQ2xhc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoJyhefCApJyArIGNsYXNzTmFtZSArICcoIHwkKScsICdnaScpLnRlc3QoZWxlbWVudC5jbGFzc05hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VlIGNvbW1lbnQgYWJvdmVcclxuICAgICAgICAgICAgICAgICAgICBoYXNDbGFzcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gaGFzQ2xhc3M7XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5jc3MgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lT3JDb2xsZWN0aW9uLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHlOYW1lT3JDb2xsZWN0aW9uID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlOYW1lID0gcHJvcGVydHlOYW1lT3JDb2xsZWN0aW9uO1xyXG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0Q3NzKHByb3BlcnR5TmFtZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3NzKHByb3BlcnR5TmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eVZhbHVlQ29sbGVjdGlvbiA9IHByb3BlcnR5TmFtZU9yQ29sbGVjdGlvbjtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0Q3NzQ29sbGVjdGlvbihwcm9wZXJ0eVZhbHVlQ29sbGVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERPTS5wcm90b3R5cGUuZ2V0Q3NzID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xyXG4gICAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxlbWVudHNbMF0pW3Byb3BlcnR5TmFtZV07XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5zZXRDc3MgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAvLyA8YW55PiBjYXN0IHRvIHJlc29sdmUgVFM3MDE1OiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zNjYyNzExNC8zNzAyNTJcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wZXJ0eU5hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgRE9NLnByb3RvdHlwZS5zZXRDc3NDb2xsZWN0aW9uID0gZnVuY3Rpb24gKHJ1bGVWYWx1ZUNvbGxlY3Rpb24pIHtcclxuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzQ0OTA1NzMvMzcwMjUyXHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZWxlbWVudC5zdHlsZSwgcnVsZVZhbHVlQ29sbGVjdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERPTTtcclxufSgpKTtcclxuZXhwb3J0cy5ET00gPSBET007XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvZG9tLnRzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBndWlkXzEgPSByZXF1aXJlKFwiLi4vZ3VpZFwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4uL2RvbVwiKTtcclxudmFyIGV2ZW50ZGlzcGF0Y2hlcl8xID0gcmVxdWlyZShcIi4uL2V2ZW50ZGlzcGF0Y2hlclwiKTtcclxuLyoqXHJcbiAqIFRoZSBiYXNlIGNsYXNzIG9mIHRoZSBVSSBmcmFtZXdvcmsuXHJcbiAqIEVhY2ggY29tcG9uZW50IG11c3QgZXh0ZW5kIHRoaXMgY2xhc3MgYW5kIG9wdGlvbmFsbHkgdGhlIGNvbmZpZyBpbnRlcmZhY2UuXHJcbiAqL1xyXG52YXIgQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0cyBhIGNvbXBvbmVudCB3aXRoIGFuIG9wdGlvbmFsbHkgc3VwcGxpZWQgY29uZmlnLiBBbGwgc3ViY2xhc3NlcyBtdXN0IGNhbGwgdGhlIGNvbnN0cnVjdG9yIG9mIHRoZWlyXHJcbiAgICAgKiBzdXBlcmNsYXNzIGFuZCB0aGVuIG1lcmdlIHRoZWlyIGNvbmZpZ3VyYXRpb24gaW50byB0aGUgY29tcG9uZW50J3MgY29uZmlndXJhdGlvbi5cclxuICAgICAqIEBwYXJhbSBjb25maWcgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjb21wb25lbnRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsaXN0IG9mIGV2ZW50cyB0aGF0IHRoaXMgY29tcG9uZW50IG9mZmVycy4gVGhlc2UgZXZlbnRzIHNob3VsZCBhbHdheXMgYmUgcHJpdmF0ZSBhbmQgb25seSBkaXJlY3RseVxyXG4gICAgICAgICAqIGFjY2Vzc2VkIGZyb20gd2l0aGluIHRoZSBpbXBsZW1lbnRpbmcgY29tcG9uZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQmVjYXVzZSBUeXBlU2NyaXB0IGRvZXMgbm90IHN1cHBvcnQgcHJpdmF0ZSBwcm9wZXJ0aWVzIHdpdGggdGhlIHNhbWUgbmFtZSBvbiBkaWZmZXJlbnQgY2xhc3MgaGllcmFyY2h5IGxldmVsc1xyXG4gICAgICAgICAqIChpLmUuIHN1cGVyY2xhc3MgYW5kIHN1YmNsYXNzIGNhbm5vdCBjb250YWluIGEgcHJpdmF0ZSBwcm9wZXJ0eSB3aXRoIHRoZSBzYW1lIG5hbWUpLCB0aGUgZGVmYXVsdCBuYW1pbmdcclxuICAgICAgICAgKiBjb252ZW50aW9uIGZvciB0aGUgZXZlbnQgbGlzdCBvZiBhIGNvbXBvbmVudCB0aGF0IHNob3VsZCBiZSBmb2xsb3dlZCBieSBzdWJjbGFzc2VzIGlzIHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxyXG4gICAgICAgICAqIGNhbWVsLWNhc2VkIGNsYXNzIG5hbWUgKyAnRXZlbnRzJyAoZS5nLiBTdWJDbGFzcyBleHRlbmRzIENvbXBvbmVudCA9PiBzdWJDbGFzc0V2ZW50cykuXHJcbiAgICAgICAgICogU2VlIHtAbGluayAjY29tcG9uZW50RXZlbnRzfSBmb3IgYW4gZXhhbXBsZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEV2ZW50IHByb3BlcnRpZXMgc2hvdWxkIGJlIG5hbWVkIGluIGNhbWVsIGNhc2Ugd2l0aCBhbiAnb24nIHByZWZpeCBhbmQgaW4gdGhlIHByZXNlbnQgdGVuc2UuIEFzeW5jIGV2ZW50cyBtYXlcclxuICAgICAgICAgKiBoYXZlIGEgc3RhcnQgZXZlbnQgKHdoZW4gdGhlIG9wZXJhdGlvbiBzdGFydHMpIGluIHRoZSBwcmVzZW50IHRlbnNlLCBhbmQgbXVzdCBoYXZlIGFuIGVuZCBldmVudCAod2hlbiB0aGVcclxuICAgICAgICAgKiBvcGVyYXRpb24gZW5kcykgaW4gdGhlIHBhc3QgdGVuc2UgKG9yIHByZXNlbnQgdGVuc2UgaW4gc3BlY2lhbCBjYXNlcyAoZS5nLiBvblN0YXJ0L29uU3RhcnRlZCBvciBvblBsYXkvb25QbGF5aW5nKS5cclxuICAgICAgICAgKiBTZWUge0BsaW5rICNjb21wb25lbnRFdmVudHMjb25TaG93fSBmb3IgYW4gZXhhbXBsZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEVhY2ggZXZlbnQgc2hvdWxkIGJlIGFjY29tcGFuaWVkIHdpdGggYSBwcm90ZWN0ZWQgbWV0aG9kIG5hbWVkIGJ5IHRoZSBjb252ZW50aW9uIGV2ZW50TmFtZSArICdFdmVudCdcclxuICAgICAgICAgKiAoZS5nLiBvblN0YXJ0RXZlbnQpLCB0aGF0IGFjdHVhbGx5IHRyaWdnZXJzIHRoZSBldmVudCBieSBjYWxsaW5nIHtAbGluayBFdmVudERpc3BhdGNoZXIjZGlzcGF0Y2ggZGlzcGF0Y2h9IGFuZFxyXG4gICAgICAgICAqIHBhc3NpbmcgYSByZWZlcmVuY2UgdG8gdGhlIGNvbXBvbmVudCBhcyBmaXJzdCBwYXJhbWV0ZXIuIENvbXBvbmVudHMgc2hvdWxkIGFsd2F5cyB0cmlnZ2VyIHRoZWlyIGV2ZW50cyB3aXRoIHRoZXNlXHJcbiAgICAgICAgICogbWV0aG9kcy4gSW1wbGVtZW50aW5nIHRoaXMgcGF0dGVybiBnaXZlcyBzdWJjbGFzc2VzIG1lYW5zIHRvIGRpcmVjdGx5IGxpc3RlbiB0byB0aGUgZXZlbnRzIGJ5IG92ZXJyaWRpbmcgdGhlXHJcbiAgICAgICAgICogbWV0aG9kIChhbmQgc2F2aW5nIHRoZSBvdmVyaGVhZCBvZiBwYXNzaW5nIGEgaGFuZGxlciB0byB0aGUgZXZlbnQgZGlzcGF0Y2hlcikgYW5kIG1vcmUgaW1wb3J0YW50bHkgdG8gdHJpZ2dlclxyXG4gICAgICAgICAqIHRoZXNlIGV2ZW50cyB3aXRob3V0IGhhdmluZyBhY2Nlc3MgdG8gdGhlIHByaXZhdGUgZXZlbnQgbGlzdC5cclxuICAgICAgICAgKiBTZWUge0BsaW5rICNvblNob3d9IGZvciBhbiBleGFtcGxlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVG8gcHJvdmlkZSBleHRlcm5hbCBjb2RlIHRoZSBwb3NzaWJpbGl0eSB0byBsaXN0ZW4gdG8gdGhpcyBjb21wb25lbnQncyBldmVudHMgKHN1YnNjcmliZSwgdW5zdWJzY3JpYmUsIGV0Yy4pLFxyXG4gICAgICAgICAqIGVhY2ggZXZlbnQgc2hvdWxkIGFsc28gYmUgYWNjb21wYW5pZWQgYnkgYSBwdWJsaWMgZ2V0dGVyIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgbmFtZSBhcyB0aGUgZXZlbnQncyBwcm9wZXJ0eSxcclxuICAgICAgICAgKiB0aGF0IHJldHVybnMgdGhlIHtAbGluayBFdmVudH0gb2J0YWluZWQgZnJvbSB0aGUgZXZlbnQgZGlzcGF0Y2hlciBieSBjYWxsaW5nIHtAbGluayBFdmVudERpc3BhdGNoZXIjZ2V0RXZlbnR9LlxyXG4gICAgICAgICAqIFNlZSB7QGxpbmsgI29uU2hvd30gZm9yIGFuIGV4YW1wbGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBGdWxsIGV4YW1wbGUgZm9yIGFuIGV2ZW50IHJlcHJlc2VudGluZyBhbiBleGFtcGxlIGFjdGlvbiBpbiBhIGV4YW1wbGUgY29tcG9uZW50OlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogPGNvZGU+XHJcbiAgICAgICAgICogLy8gRGVmaW5lIGFuIGV4YW1wbGUgY29tcG9uZW50IGNsYXNzIHdpdGggYW4gZXhhbXBsZSBldmVudFxyXG4gICAgICAgICAqIGNsYXNzIEV4YW1wbGVDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQ8Q29tcG9uZW50Q29uZmlnPiB7XHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogICAgIHByaXZhdGUgZXhhbXBsZUNvbXBvbmVudEV2ZW50cyA9IHtcclxuICAgICAgICAgICAqICAgICAgICAgb25FeGFtcGxlQWN0aW9uOiBuZXcgRXZlbnREaXNwYXRjaGVyPEV4YW1wbGVDb21wb25lbnQsIE5vQXJncz4oKVxyXG4gICAgICAgICAgICogICAgIH1cclxuICAgICAgICAgICAqXHJcbiAgICAgICAgICAgKiAgICAgLy8gY29uc3RydWN0b3IgYW5kIG90aGVyIHN0dWZmLi4uXHJcbiAgICAgICAgICAgKlxyXG4gICAgICAgICAgICogICAgIHByb3RlY3RlZCBvbkV4YW1wbGVBY3Rpb25FdmVudCgpIHtcclxuICAgICAgICAgICAqICAgICAgICB0aGlzLmV4YW1wbGVDb21wb25lbnRFdmVudHMub25FeGFtcGxlQWN0aW9uLmRpc3BhdGNoKHRoaXMpO1xyXG4gICAgICAgICAgICogICAgfVxyXG4gICAgICAgICAgICpcclxuICAgICAgICAgICAqICAgIGdldCBvbkV4YW1wbGVBY3Rpb24oKTogRXZlbnQ8RXhhbXBsZUNvbXBvbmVudCwgTm9BcmdzPiB7XHJcbiAgICAgICAgICAgKiAgICAgICAgcmV0dXJuIHRoaXMuZXhhbXBsZUNvbXBvbmVudEV2ZW50cy5vbkV4YW1wbGVBY3Rpb24uZ2V0RXZlbnQoKTtcclxuICAgICAgICAgICAqICAgIH1cclxuICAgICAgICAgICAqIH1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC8vIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50IHNvbWV3aGVyZVxyXG4gICAgICAgICAqIHZhciBleGFtcGxlQ29tcG9uZW50SW5zdGFuY2UgPSBuZXcgRXhhbXBsZUNvbXBvbmVudCgpO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLy8gU3Vic2NyaWJlIHRvIHRoZSBleGFtcGxlIGV2ZW50IG9uIHRoZSBjb21wb25lbnRcclxuICAgICAgICAgKiBleGFtcGxlQ29tcG9uZW50SW5zdGFuY2Uub25FeGFtcGxlQWN0aW9uLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyOiBFeGFtcGxlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgKiAgICAgY29uc29sZS5sb2coJ29uRXhhbXBsZUFjdGlvbiBvZiAnICsgc2VuZGVyICsgJyBoYXMgZmlyZWQhJyk7XHJcbiAgICAgICAgICAgKiB9KTtcclxuICAgICAgICAgKiA8L2NvZGU+XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRFdmVudHMgPSB7XHJcbiAgICAgICAgICAgIG9uU2hvdzogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgICAgICBvbkhpZGU6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICAgICAgb25Ib3ZlckNoYW5nZWQ6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY29uZmlndXJhdGlvbiBmb3IgdGhpcyBjb21wb25lbnRcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIHRhZzogJ2RpdicsXHJcbiAgICAgICAgICAgIGlkOiAnbWktd2JjLWlkLScgKyBndWlkXzEuR3VpZC5uZXh0KCksXHJcbiAgICAgICAgICAgIGNzc1ByZWZpeDogJ21pLXdiYycsXHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktY29tcG9uZW50JyxcclxuICAgICAgICAgICAgY3NzQ2xhc3NlczogW10sXHJcbiAgICAgICAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgICAgfSwge30pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgY29tcG9uZW50LCBlLmcuIGJ5IGFwcGx5aW5nIGNvbmZpZyBzZXR0aW5ncy5cclxuICAgICAqIFRoaXMgbWV0aG9kIG11c3Qgbm90IGJlIGNhbGxlZCBmcm9tIG91dHNpZGUgdGhlIFVJIGZyYW1ld29yay5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCBieSB0aGUge0BsaW5rIFVJSW5zdGFuY2VNYW5hZ2VyfS4gSWYgdGhlIGNvbXBvbmVudCBpcyBhbiBpbm5lciBjb21wb25lbnQgb2ZcclxuICAgICAqIHNvbWUgY29tcG9uZW50LCBhbmQgdGh1cyBlbmNhcHN1bGF0ZWQgYWJkIG1hbmFnZWQgaW50ZXJuYWxseSBhbmQgbmV2ZXIgZGlyZWN0bHkgZXhwb3NlZCB0byB0aGUgVUlNYW5hZ2VyLFxyXG4gICAgICogdGhpcyBtZXRob2QgbXVzdCBiZSBjYWxsZWQgZnJvbSB0aGUgbWFuYWdpbmcgY29tcG9uZW50J3Mge0BsaW5rICNpbml0aWFsaXplfSBtZXRob2QuXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmhpZGRlbiA9IHRoaXMuY29uZmlnLmhpZGRlbjtcclxuICAgICAgICAvLyBIaWRlIHRoZSBjb21wb25lbnQgYXQgaW5pdGlhbGl6YXRpb24gaWYgaXQgaXMgY29uZmlndXJlZCB0byBiZSBoaWRkZW5cclxuICAgICAgICBpZiAodGhpcy5pc0hpZGRlbigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZGVuID0gZmFsc2U7IC8vIFNldCBmbGFnIHRvIGZhbHNlIGZvciB0aGUgZm9sbG93aW5nIGhpZGUoKSBjYWxsIHRvIHdvcmsgKGhpZGUoKSBjaGVja3MgdGhlIGZsYWcpXHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbmZpZ3VyZXMgdGhlIGNvbXBvbmVudCBmb3IgdGhlIHN1cHBsaWVkIFBsYXllciBhbmQgVUlJbnN0YW5jZU1hbmFnZXIuIFRoaXMgaXMgdGhlIHBsYWNlIHdoZXJlIGFsbCB0aGUgbWFnaWNcclxuICAgICAqIGhhcHBlbnMsIHdoZXJlIGNvbXBvbmVudHMgdHlwaWNhbGx5IHN1YnNjcmliZSBhbmQgcmVhY3QgdG8gZXZlbnRzIChvbiB0aGVpciBET00gZWxlbWVudCwgdGhlIFBsYXllciwgb3IgdGhlXHJcbiAgICAgKiBVSUluc3RhbmNlTWFuYWdlciksIGFuZCBiYXNpY2FsbHkgZXZlcnl0aGluZyB0aGF0IG1ha2VzIHRoZW0gaW50ZXJhY3RpdmUuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgb25seSBvbmNlLCB3aGVuIHRoZSBVSU1hbmFnZXIgaW5pdGlhbGl6ZXMgdGhlIFVJLlxyXG4gICAgICpcclxuICAgICAqIFN1YmNsYXNzZXMgdXN1YWxseSBvdmVyd3JpdGUgdGhpcyBtZXRob2QgdG8gYWRkIHRoZWlyIG93biBmdW5jdGlvbmFsaXR5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwbGF5ZXIgdGhlIHBsYXllciB3aGljaCB0aGlzIGNvbXBvbmVudCBjb250cm9sc1xyXG4gICAgICogQHBhcmFtIHVpbWFuYWdlciB0aGUgVUlJbnN0YW5jZU1hbmFnZXIgdGhhdCBtYW5hZ2VzIHRoaXMgY29tcG9uZW50XHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLm9uU2hvdy5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1aW1hbmFnZXIub25Db21wb25lbnRTaG93LmRpc3BhdGNoKF90aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uSGlkZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1aW1hbmFnZXIub25Db21wb25lbnRIaWRlLmRpc3BhdGNoKF90aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBUcmFjayB0aGUgaG92ZXJlZCBzdGF0ZSBvZiB0aGUgZWxlbWVudFxyXG4gICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vbkhvdmVyQ2hhbmdlZEV2ZW50KHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vbkhvdmVyQ2hhbmdlZEV2ZW50KGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2VzIGFsbCByZXNvdXJjZXMgYW5kIGRlcGVuZGVuY2llcyB0aGF0IHRoZSBjb21wb25lbnQgaG9sZHMuIFBsYXllciwgRE9NLCBhbmQgVUlNYW5hZ2VyIGV2ZW50cyBhcmVcclxuICAgICAqIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBkdXJpbmcgcmVsZWFzZSBhbmQgZG8gbm90IGV4cGxpY2l0bHkgbmVlZCB0byBiZSByZW1vdmVkIGhlcmUuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgdGhlIFVJTWFuYWdlciB3aGVuIGl0IHJlbGVhc2VzIHRoZSBVSS5cclxuICAgICAqXHJcbiAgICAgKiBTdWJjbGFzc2VzIHRoYXQgbmVlZCB0byByZWxlYXNlIHJlc291cmNlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgYW5kIGNhbGwgc3VwZXIucmVsZWFzZSgpLlxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gTm90aGluZyB0byBkbyBoZXJlLCBvdmVycmlkZSB3aGVyZSBuZWNlc3NhcnlcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIHRoZSBET00gZWxlbWVudCBmb3IgdGhpcyBjb21wb25lbnQuXHJcbiAgICAgKlxyXG4gICAgICogU3ViY2xhc3NlcyB1c3VhbGx5IG92ZXJ3cml0ZSB0aGlzIG1ldGhvZCB0byBleHRlbmQgb3IgcmVwbGFjZSB0aGUgRE9NIGVsZW1lbnQgd2l0aCB0aGVpciBvd24gZGVzaWduLlxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IG5ldyBkb21fMS5ET00odGhpcy5jb25maWcudGFnLCB7XHJcbiAgICAgICAgICAgICdpZCc6IHRoaXMuY29uZmlnLmlkLFxyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLmdldENzc0NsYXNzZXMoKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIERPTSBlbGVtZW50IG9mIHRoaXMgY29tcG9uZW50LiBDcmVhdGVzIHRoZSBET00gZWxlbWVudCBpZiBpdCBkb2VzIG5vdCB5ZXQgZXhpc3QuXHJcbiAgICAgKlxyXG4gICAgICogU2hvdWxkIG5vdCBiZSBvdmVyd3JpdHRlbiBieSBzdWJjbGFzc2VzLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtET019XHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuZ2V0RG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLnRvRG9tRWxlbWVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTWVyZ2VzIGEgY29uZmlndXJhdGlvbiB3aXRoIGEgZGVmYXVsdCBjb25maWd1cmF0aW9uIGFuZCBhIGJhc2UgY29uZmlndXJhdGlvbiBmcm9tIHRoZSBzdXBlcmNsYXNzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb25maWcgdGhlIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MgZm9yIHRoZSBjb21wb25lbnRzLCBhcyB1c3VhbGx5IHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBkZWZhdWx0cyBhIGRlZmF1bHQgY29uZmlndXJhdGlvbiBmb3Igc2V0dGluZ3MgdGhhdCBhcmUgbm90IHBhc3NlZCB3aXRoIHRoZSBjb25maWd1cmF0aW9uXHJcbiAgICAgKiBAcGFyYW0gYmFzZSBjb25maWd1cmF0aW9uIGluaGVyaXRlZCBmcm9tIGEgc3VwZXJjbGFzc1xyXG4gICAgICogQHJldHVybnMge0NvbmZpZ31cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5tZXJnZUNvbmZpZyA9IGZ1bmN0aW9uIChjb25maWcsIGRlZmF1bHRzLCBiYXNlKSB7XHJcbiAgICAgICAgLy8gRXh0ZW5kIGRlZmF1bHQgY29uZmlnIHdpdGggc3VwcGxpZWQgY29uZmlnXHJcbiAgICAgICAgdmFyIG1lcmdlZCA9IE9iamVjdC5hc3NpZ24oe30sIGJhc2UsIGRlZmF1bHRzLCBjb25maWcpO1xyXG4gICAgICAgIC8vIFJldHVybiB0aGUgZXh0ZW5kZWQgY29uZmlnXHJcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBtZXRob2QgdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9mIGFsbCBDU1MgY2xhc3NlcyBvZiB0aGUgY29tcG9uZW50LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuZ2V0Q3NzQ2xhc3NlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIE1lcmdlIGFsbCBDU1MgY2xhc3NlcyBpbnRvIHNpbmdsZSBhcnJheVxyXG4gICAgICAgIHZhciBmbGF0dGVuZWRBcnJheSA9IFt0aGlzLmNvbmZpZy5jc3NDbGFzc10uY29uY2F0KHRoaXMuY29uZmlnLmNzc0NsYXNzZXMpO1xyXG4gICAgICAgIC8vIFByZWZpeCBjbGFzc2VzXHJcbiAgICAgICAgZmxhdHRlbmVkQXJyYXkgPSBmbGF0dGVuZWRBcnJheS5tYXAoZnVuY3Rpb24gKGNzcykge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucHJlZml4Q3NzKGNzcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSm9pbiBhcnJheSB2YWx1ZXMgaW50byBhIHN0cmluZ1xyXG4gICAgICAgIHZhciBmbGF0dGVuZWRTdHJpbmcgPSBmbGF0dGVuZWRBcnJheS5qb2luKCcgJyk7XHJcbiAgICAgICAgLy8gUmV0dXJuIHRyaW1tZWQgc3RyaW5nIHRvIHByZXZlbnQgd2hpdGVzcGFjZSBhdCB0aGUgZW5kIGZyb20gdGhlIGpvaW4gb3BlcmF0aW9uXHJcbiAgICAgICAgcmV0dXJuIGZsYXR0ZW5lZFN0cmluZy50cmltKCk7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5wcmVmaXhDc3MgPSBmdW5jdGlvbiAoY3NzQ2xhc3NPcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmNzc1ByZWZpeCArICctJyArIGNzc0NsYXNzT3JJZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IG9mIHRoZSBjb21wb25lbnQuXHJcbiAgICAgKiBAcmV0dXJucyB7Q29uZmlnfVxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLmdldENvbmZpZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWc7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIaWRlcyB0aGUgY29tcG9uZW50IGlmIHNob3duLlxyXG4gICAgICogVGhpcyBtZXRob2QgYmFzaWNhbGx5IHRyYW5zZmVycyB0aGUgY29tcG9uZW50IGludG8gdGhlIGhpZGRlbiBzdGF0ZS4gQWN0dWFsIGhpZGluZyBpcyBkb25lIHZpYSBDU1MuXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGlkZGVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoQ29tcG9uZW50LkNMQVNTX0hJRERFTikpO1xyXG4gICAgICAgICAgICB0aGlzLm9uSGlkZUV2ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2hvd3MgdGhlIGNvbXBvbmVudCBpZiBoaWRkZW4uXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5oaWRkZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3ModGhpcy5wcmVmaXhDc3MoQ29tcG9uZW50LkNMQVNTX0hJRERFTikpO1xyXG4gICAgICAgICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm9uU2hvd0V2ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgY29tcG9uZW50IGlzIGhpZGRlbi5cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBjb21wb25lbnQgaXMgaGlkZGVuLCBlbHNlIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuaXNIaWRkZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlkZGVuO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgY29tcG9uZW50IGlzIHNob3duLlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIGNvbXBvbmVudCBpcyB2aXNpYmxlLCBlbHNlIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuaXNTaG93biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuaXNIaWRkZW4oKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRvZ2dsZXMgdGhlIGhpZGRlbiBzdGF0ZSBieSBoaWRpbmcgdGhlIGNvbXBvbmVudCBpZiBpdCBpcyBzaG93biwgb3Igc2hvd2luZyBpdCBpZiBoaWRkZW4uXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUudG9nZ2xlSGlkZGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzSGlkZGVuKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBjb21wb25lbnQgaXMgY3VycmVudGx5IGhvdmVyZWQuXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgY29tcG9uZW50IGlzIGhvdmVyZWQsIGVsc2UgZmFsc2VcclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5pc0hvdmVyZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaG92ZXJlZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZpcmVzIHRoZSBvblNob3cgZXZlbnQuXHJcbiAgICAgKiBTZWUgdGhlIGRldGFpbGVkIGV4cGxhbmF0aW9uIG9uIGV2ZW50IGFyY2hpdGVjdHVyZSBvbiB0aGUge0BsaW5rICNjb21wb25lbnRFdmVudHMgZXZlbnRzIGxpc3R9LlxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLm9uU2hvd0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50RXZlbnRzLm9uU2hvdy5kaXNwYXRjaCh0aGlzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZpcmVzIHRoZSBvbkhpZGUgZXZlbnQuXHJcbiAgICAgKiBTZWUgdGhlIGRldGFpbGVkIGV4cGxhbmF0aW9uIG9uIGV2ZW50IGFyY2hpdGVjdHVyZSBvbiB0aGUge0BsaW5rICNjb21wb25lbnRFdmVudHMgZXZlbnRzIGxpc3R9LlxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLm9uSGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50RXZlbnRzLm9uSGlkZS5kaXNwYXRjaCh0aGlzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZpcmVzIHRoZSBvbkhvdmVyQ2hhbmdlZCBldmVudC5cclxuICAgICAqIFNlZSB0aGUgZGV0YWlsZWQgZXhwbGFuYXRpb24gb24gZXZlbnQgYXJjaGl0ZWN0dXJlIG9uIHRoZSB7QGxpbmsgI2NvbXBvbmVudEV2ZW50cyBldmVudHMgbGlzdH0uXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUub25Ib3ZlckNoYW5nZWRFdmVudCA9IGZ1bmN0aW9uIChob3ZlcmVkKSB7XHJcbiAgICAgICAgdGhpcy5ob3ZlcmVkID0gaG92ZXJlZDtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudEV2ZW50cy5vbkhvdmVyQ2hhbmdlZC5kaXNwYXRjaCh0aGlzLCB7IGhvdmVyZWQ6IGhvdmVyZWQgfSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbXBvbmVudC5wcm90b3R5cGUsIFwib25TaG93XCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBzaG93aW5nLlxyXG4gICAgICAgICAqIFNlZSB0aGUgZGV0YWlsZWQgZXhwbGFuYXRpb24gb24gZXZlbnQgYXJjaGl0ZWN0dXJlIG9uIHRoZSB7QGxpbmsgI2NvbXBvbmVudEV2ZW50cyBldmVudHMgbGlzdH0uXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PENvbXBvbmVudDxDb25maWc+LCBOb0FyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRFdmVudHMub25TaG93LmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkhpZGVcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGhpZGluZy5cclxuICAgICAgICAgKiBTZWUgdGhlIGRldGFpbGVkIGV4cGxhbmF0aW9uIG9uIGV2ZW50IGFyY2hpdGVjdHVyZSBvbiB0aGUge0BsaW5rICNjb21wb25lbnRFdmVudHMgZXZlbnRzIGxpc3R9LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudDxDb21wb25lbnQ8Q29uZmlnPiwgTm9BcmdzPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50RXZlbnRzLm9uSGlkZS5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbXBvbmVudC5wcm90b3R5cGUsIFwib25Ib3ZlckNoYW5nZWRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgY29tcG9uZW50J3MgaG92ZXItc3RhdGUgaXMgY2hhbmdpbmcuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PENvbXBvbmVudDxDb25maWc+LCBDb21wb25lbnRIb3ZlckNoYW5nZWRFdmVudEFyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRFdmVudHMub25Ib3ZlckNoYW5nZWQuZ2V0RXZlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBDb21wb25lbnQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBUaGUgY2xhc3NuYW1lIHRoYXQgaXMgYXR0YWNoZWQgdG8gdGhlIGVsZW1lbnQgd2hlbiBpdCBpcyBpbiB0aGUgaGlkZGVuIHN0YXRlLlxyXG4gKiBAdHlwZSB7c3RyaW5nfVxyXG4gKi9cclxuQ29tcG9uZW50LkNMQVNTX0hJRERFTiA9ICdoaWRkZW4nO1xyXG5leHBvcnRzLkNvbXBvbmVudCA9IENvbXBvbmVudDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2NvbXBvbmVudC50c1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGFycmF5dXRpbHNfMSA9IHJlcXVpcmUoXCIuL2FycmF5dXRpbHNcIik7XHJcbi8qKlxyXG4gKiBFdmVudCBkaXNwYXRjaGVyIHRvIHN1YnNjcmliZSBhbmQgdHJpZ2dlciBldmVudHMuIEVhY2ggZXZlbnQgc2hvdWxkIGhhdmUgaXRzIG93biBkaXNwYXRjaGVyLlxyXG4gKi9cclxudmFyIEV2ZW50RGlzcGF0Y2hlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmVudERpc3BhdGNoZXIoKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICoge0Bpbmhlcml0RG9jfVxyXG4gICAgICovXHJcbiAgICBFdmVudERpc3BhdGNoZXIucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobmV3IEV2ZW50TGlzdGVuZXJXcmFwcGVyKGxpc3RlbmVyKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiB7QGluaGVyaXREb2N9XHJcbiAgICAgKi9cclxuICAgIEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuc3Vic2NyaWJlT25jZSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobmV3IEV2ZW50TGlzdGVuZXJXcmFwcGVyKGxpc3RlbmVyLCB0cnVlKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiB7QGluaGVyaXREb2N9XHJcbiAgICAgKi9cclxuICAgIEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuc3Vic2NyaWJlUmF0ZUxpbWl0ZWQgPSBmdW5jdGlvbiAobGlzdGVuZXIsIHJhdGVNcykge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobmV3IFJhdGVMaW1pdGVkRXZlbnRMaXN0ZW5lcldyYXBwZXIobGlzdGVuZXIsIHJhdGVNcykpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICoge0Bpbmhlcml0RG9jfVxyXG4gICAgICovXHJcbiAgICBFdmVudERpc3BhdGNoZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGxpc3RlbmVycywgY29tcGFyZSB3aXRoIHBhcmFtZXRlciwgYW5kIHJlbW92ZSBpZiBmb3VuZFxyXG4gICAgICAgIC8vIE5PVEU6IEluIGNhc2Ugd2UgZXZlciByZW1vdmUgYWxsIG1hdGNoaW5nIGxpc3RlbmVycyBpbnN0ZWFkIG9mIGp1c3QgdGhlIGZpcnN0LCB3ZSBuZWVkIHRvIHJldmVyc2UtaXRlcmF0ZSBoZXJlXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaWJlZExpc3RlbmVyID0gdGhpcy5saXN0ZW5lcnNbaV07XHJcbiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVkTGlzdGVuZXIubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheXV0aWxzXzEuQXJyYXlVdGlscy5yZW1vdmUodGhpcy5saXN0ZW5lcnMsIHN1YnNjcmliZWRMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFsbCBsaXN0ZW5lcnMgZnJvbSB0aGlzIGRpc3BhdGNoZXIuXHJcbiAgICAgKi9cclxuICAgIEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUudW5zdWJzY3JpYmVBbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgdG8gYWxsIHN1YnNjcmliZWQgbGlzdGVuZXJzLlxyXG4gICAgICogQHBhcmFtIHNlbmRlciB0aGUgc291cmNlIG9mIHRoZSBldmVudFxyXG4gICAgICogQHBhcmFtIGFyZ3MgdGhlIGFyZ3VtZW50cyBmb3IgdGhlIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgaWYgKGFyZ3MgPT09IHZvaWQgMCkgeyBhcmdzID0gbnVsbDsgfVxyXG4gICAgICAgIHZhciBsaXN0ZW5lcnNUb1JlbW92ZSA9IFtdO1xyXG4gICAgICAgIC8vIENhbGwgZXZlcnkgbGlzdGVuZXJcclxuICAgICAgICAvLyBXZSBpdGVyYXRlIG92ZXIgYSBjb3B5IG9mIHRoZSBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYXZvaWQgdGhlIGNhc2Ugd2hlcmUgZXZlbnRzIGFyZSBub3QgZmlyZWQgb24gbGlzdGVuZXJzIHdoZW5cclxuICAgICAgICAvLyBsaXN0ZW5lcnMgYXJlIHVuc3Vic2NyaWJlZCBmcm9tIHdpdGhpbiB0aGUgZXZlbnQgaGFuZGxlcnMgZHVyaW5nIGEgZGlzcGF0Y2ggKGJlY2F1c2UgdGhlIGluZGljZXMgY2hhbmdlIGFuZFxyXG4gICAgICAgIC8vIGxpc3RlbmVycyBhcmUgc2hpZnRlZCB3aXRoaW4gdGhlIGFycmF5KS5cclxuICAgICAgICAvLyBUaGlzIG1lYW5zIHRoYXQgbGlzdGVuZXIgeCsxIHdpbGwgc3RpbGwgYmUgY2FsbGVkIGlmIHVuc3Vic2NyaWJlZCBmcm9tIHdpdGhpbiB0aGUgaGFuZGxlciBvZiBsaXN0ZW5lciB4LCBhcyB3ZWxsXHJcbiAgICAgICAgLy8gYXMgbGlzdGVuZXIgeSsxIHdpbGwgbm90IGJlIGNhbGxlZCB3aGVuIHN1YnNjcmliZWQgZnJvbSB3aXRoaW4gdGhlIGhhbmRsZXIgb2YgbGlzdGVuZXIgeS5cclxuICAgICAgICAvLyBBcnJheS5zbGljZSgwKSBpcyB0aGUgZmFzdGVzdCBhcnJheSBjb3B5IG1ldGhvZCBhY2NvcmRpbmcgdG86IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTUxNDI1NC8zNzAyNTJcclxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMuc2xpY2UoMCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBsaXN0ZW5lcnNfMSA9IGxpc3RlbmVyczsgX2kgPCBsaXN0ZW5lcnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzXzFbX2ldO1xyXG4gICAgICAgICAgICBsaXN0ZW5lci5maXJlKHNlbmRlciwgYXJncyk7XHJcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lci5pc09uY2UoKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzVG9SZW1vdmUucHVzaChsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIG9uZS10aW1lIGxpc3RlbmVyXHJcbiAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBsaXN0ZW5lcnNUb1JlbW92ZV8xID0gbGlzdGVuZXJzVG9SZW1vdmU7IF9hIDwgbGlzdGVuZXJzVG9SZW1vdmVfMS5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgdmFyIGxpc3RlbmVyVG9SZW1vdmUgPSBsaXN0ZW5lcnNUb1JlbW92ZV8xW19hXTtcclxuICAgICAgICAgICAgYXJyYXl1dGlsc18xLkFycmF5VXRpbHMucmVtb3ZlKHRoaXMubGlzdGVuZXJzLCBsaXN0ZW5lclRvUmVtb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBldmVudCB0aGF0IHRoaXMgZGlzcGF0Y2hlciBtYW5hZ2VzIGFuZCBvbiB3aGljaCBsaXN0ZW5lcnMgY2FuIHN1YnNjcmliZSBhbmQgdW5zdWJzY3JpYmUgZXZlbnQgaGFuZGxlcnMuXHJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnR9XHJcbiAgICAgKi9cclxuICAgIEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUuZ2V0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCBjYXN0IHRoZSBldmVudCBkaXNwYXRjaGVyIHRvIHRoZSBldmVudCBpbnRlcmZhY2UuIEF0IHNvbWUgcG9pbnQgaW4gdGhlIGZ1dHVyZSB3aGVuIHRoZVxyXG4gICAgICAgIC8vIGNvZGViYXNlIGdyb3dzLCBpdCBtaWdodCBtYWtlIHNlbnNlIHRvIHNwbGl0IHRoZSBkaXNwYXRjaGVyIGludG8gc2VwYXJhdGUgZGlzcGF0Y2hlciBhbmQgZXZlbnQgY2xhc3Nlcy5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXZlbnREaXNwYXRjaGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkV2ZW50RGlzcGF0Y2hlciA9IEV2ZW50RGlzcGF0Y2hlcjtcclxuLyoqXHJcbiAqIEEgYmFzaWMgZXZlbnQgbGlzdGVuZXIgd3JhcHBlciB0byBtYW5hZ2UgbGlzdGVuZXJzIHdpdGhpbiB0aGUge0BsaW5rIEV2ZW50RGlzcGF0Y2hlcn0uIFRoaXMgaXMgYSAncHJpdmF0ZScgY2xhc3NcclxuICogZm9yIGludGVybmFsIGRpc3BhdGNoZXIgdXNlIGFuZCBpdCBpcyB0aGVyZWZvcmUgbm90IGV4cG9ydGVkLlxyXG4gKi9cclxudmFyIEV2ZW50TGlzdGVuZXJXcmFwcGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV2ZW50TGlzdGVuZXJXcmFwcGVyKGxpc3RlbmVyLCBvbmNlKSB7XHJcbiAgICAgICAgaWYgKG9uY2UgPT09IHZvaWQgMCkgeyBvbmNlID0gZmFsc2U7IH1cclxuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIgPSBsaXN0ZW5lcjtcclxuICAgICAgICB0aGlzLm9uY2UgPSBvbmNlO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50TGlzdGVuZXJXcmFwcGVyLnByb3RvdHlwZSwgXCJsaXN0ZW5lclwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0aGUgd3JhcHBlZCBldmVudCBsaXN0ZW5lci5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnRMaXN0ZW5lcjxTZW5kZXIsIEFyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ldmVudExpc3RlbmVyO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlcyB0aGUgd3JhcHBlZCBldmVudCBsaXN0ZW5lciB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHMuXHJcbiAgICAgKiBAcGFyYW0gc2VuZGVyXHJcbiAgICAgKiBAcGFyYW0gYXJnc1xyXG4gICAgICovXHJcbiAgICBFdmVudExpc3RlbmVyV3JhcHBlci5wcm90b3R5cGUuZmlyZSA9IGZ1bmN0aW9uIChzZW5kZXIsIGFyZ3MpIHtcclxuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIoc2VuZGVyLCBhcmdzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGlzIGxpc3RlbmVyIGlzIHNjaGVkdWxlZCB0byBiZSBjYWxsZWQgb25seSBvbmNlLlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IG9uY2UgaWYgdHJ1ZVxyXG4gICAgICovXHJcbiAgICBFdmVudExpc3RlbmVyV3JhcHBlci5wcm90b3R5cGUuaXNPbmNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uY2U7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV2ZW50TGlzdGVuZXJXcmFwcGVyO1xyXG59KCkpO1xyXG4vKipcclxuICogRXh0ZW5kcyB0aGUgYmFzaWMge0BsaW5rIEV2ZW50TGlzdGVuZXJXcmFwcGVyfSB3aXRoIHJhdGUtbGltaXRpbmcgZnVuY3Rpb25hbGl0eS5cclxuICovXHJcbnZhciBSYXRlTGltaXRlZEV2ZW50TGlzdGVuZXJXcmFwcGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhSYXRlTGltaXRlZEV2ZW50TGlzdGVuZXJXcmFwcGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUmF0ZUxpbWl0ZWRFdmVudExpc3RlbmVyV3JhcHBlcihsaXN0ZW5lciwgcmF0ZU1zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbGlzdGVuZXIpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMucmF0ZU1zID0gcmF0ZU1zO1xyXG4gICAgICAgIF90aGlzLmxhc3RGaXJlVGltZSA9IDA7XHJcbiAgICAgICAgLy8gV3JhcCB0aGUgZXZlbnQgbGlzdGVuZXIgd2l0aCBhbiBldmVudCBsaXN0ZW5lciB0aGF0IGRvZXMgdGhlIHJhdGUtbGltaXRpbmdcclxuICAgICAgICBfdGhpcy5yYXRlTGltaXRpbmdFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIF90aGlzLmxhc3RGaXJlVGltZSA+IF90aGlzLnJhdGVNcykge1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBpZiBlbm91Z2ggdGltZSBzaW5jZSB0aGUgcHJldmlvdXMgY2FsbCBoYXMgcGFzc2VkLCBjYWxsIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gYWN0dWFsIGV2ZW50IGxpc3RlbmVyIGFuZCByZWNvcmQgdGhlIGN1cnJlbnQgdGltZVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmlyZVN1cGVyKHNlbmRlciwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5sYXN0RmlyZVRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBSYXRlTGltaXRlZEV2ZW50TGlzdGVuZXJXcmFwcGVyLnByb3RvdHlwZS5maXJlU3VwZXIgPSBmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgLy8gRmlyZSB0aGUgYWN0dWFsIGV4dGVybmFsIGV2ZW50IGxpc3RlbmVyXHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5maXJlLmNhbGwodGhpcywgc2VuZGVyLCBhcmdzKTtcclxuICAgIH07XHJcbiAgICBSYXRlTGltaXRlZEV2ZW50TGlzdGVuZXJXcmFwcGVyLnByb3RvdHlwZS5maXJlID0gZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgIC8vIEZpcmUgdGhlIGludGVybmFsIHJhdGUtbGltaXRpbmcgbGlzdGVuZXIgaW5zdGVhZCBvZiB0aGUgZXh0ZXJuYWwgZXZlbnQgbGlzdGVuZXJcclxuICAgICAgICB0aGlzLnJhdGVMaW1pdGluZ0V2ZW50TGlzdGVuZXIoc2VuZGVyLCBhcmdzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmF0ZUxpbWl0ZWRFdmVudExpc3RlbmVyV3JhcHBlcjtcclxufShFdmVudExpc3RlbmVyV3JhcHBlcikpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2V2ZW50ZGlzcGF0Y2hlci50c1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4uL3NlbGVjdGJveFwiKTtcclxuLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBzdWJ0aXRsZXMgc2V0dGluZ3Mgc2VsZWN0IGJveFxyXG4gKiovXHJcbnZhciBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3ggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveChjb25maWcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyID0gY29uZmlnLnNldHRpbmdzTWFuYWdlcjtcclxuICAgICAgICBfdGhpcy5vdmVybGF5ID0gY29uZmlnLm92ZXJsYXk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGEgcHJldmlvdXNseSBzZXQgY2xhc3MgYW5kIGFkZHMgdGhlIHBhc3NlZCBpbiBjbGFzcy5cclxuICAgICAqIEBwYXJhbSBjc3NDbGFzcyBUaGUgbmV3IGNsYXNzIHRvIHJlcGxhY2UgdGhlIHByZXZpb3VzIGNsYXNzIHdpdGggb3IgbnVsbCB0byBqdXN0IHJlbW92ZSB0aGUgcHJldmlvdXMgY2xhc3NcclxuICAgICAqL1xyXG4gICAgU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94LnByb3RvdHlwZS50b2dnbGVPdmVybGF5Q2xhc3MgPSBmdW5jdGlvbiAoY3NzQ2xhc3MpIHtcclxuICAgICAgICAvLyBSZW1vdmUgcHJldmlvdXMgY2xhc3MgaWYgZXhpc3RpbmdcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q3NzQ2xhc3MpIHtcclxuICAgICAgICAgICAgdGhpcy5vdmVybGF5LmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRDc3NDbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENzc0NsYXNzID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkIG5ldyBjbGFzcyBpZiBzcGVjaWZpZWQuIElmIHRoZSBuZXcgY2xhc3MgaXMgbnVsbCwgd2UgZG9uJ3QgYWRkIGFueXRoaW5nLlxyXG4gICAgICAgIGlmIChjc3NDbGFzcykge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDc3NDbGFzcyA9IHRoaXMucHJlZml4Q3NzKGNzc0NsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5vdmVybGF5LmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyh0aGlzLmN1cnJlbnRDc3NDbGFzcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3g7XHJcbn0oc2VsZWN0Ym94XzEuU2VsZWN0Qm94KSk7XHJcbmV4cG9ydHMuU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94ID0gU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3gudHNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBidXR0b25fMSA9IHJlcXVpcmUoXCIuL2J1dHRvblwiKTtcclxudmFyIGV2ZW50ZGlzcGF0Y2hlcl8xID0gcmVxdWlyZShcIi4uL2V2ZW50ZGlzcGF0Y2hlclwiKTtcclxuLyoqXHJcbiAqIEEgYnV0dG9uIHRoYXQgY2FuIGJlIHRvZ2dsZWQgYmV0d2VlbiAnb24nIGFuZCAnb2ZmJyBzdGF0ZXMuXHJcbiAqL1xyXG52YXIgVG9nZ2xlQnV0dG9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUb2dnbGVCdXR0b24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUb2dnbGVCdXR0b24oY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnRvZ2dsZUJ1dHRvbkV2ZW50cyA9IHtcclxuICAgICAgICAgICAgb25Ub2dnbGU6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICAgICAgb25Ub2dnbGVPbjogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgICAgICBvblRvZ2dsZU9mZjogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGRlZmF1bHRDb25maWcgPSB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktdG9nZ2xlYnV0dG9uJyxcclxuICAgICAgICAgICAgb25DbGFzczogJ29uJyxcclxuICAgICAgICAgICAgb2ZmQ2xhc3M6ICdvZmYnLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCBkZWZhdWx0Q29uZmlnLCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XHJcbiAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoY29uZmlnLm9mZkNsYXNzKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUb2dnbGVzIHRoZSBidXR0b24gdG8gdGhlICdvbicgc3RhdGUuXHJcbiAgICAgKi9cclxuICAgIFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNPZmYoKSkge1xyXG4gICAgICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcclxuICAgICAgICAgICAgdGhpcy5vblN0YXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3ModGhpcy5wcmVmaXhDc3MoY29uZmlnLm9mZkNsYXNzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKGNvbmZpZy5vbkNsYXNzKSk7XHJcbiAgICAgICAgICAgIHRoaXMub25Ub2dnbGVFdmVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLm9uVG9nZ2xlT25FdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRvZ2dsZXMgdGhlIGJ1dHRvbiB0byB0aGUgJ29mZicgc3RhdGUuXHJcbiAgICAgKi9cclxuICAgIFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzT24oKSkge1xyXG4gICAgICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcclxuICAgICAgICAgICAgdGhpcy5vblN0YXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKHRoaXMucHJlZml4Q3NzKGNvbmZpZy5vbkNsYXNzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKGNvbmZpZy5vZmZDbGFzcykpO1xyXG4gICAgICAgICAgICB0aGlzLm9uVG9nZ2xlRXZlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5vblRvZ2dsZU9mZkV2ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVG9nZ2xlIHRoZSBidXR0b24gJ29uJyBpZiBpdCBpcyAnb2ZmJywgb3IgJ29mZicgaWYgaXQgaXMgJ29uJy5cclxuICAgICAqL1xyXG4gICAgVG9nZ2xlQnV0dG9uLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNPbigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2ZmKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIHRoZSB0b2dnbGUgYnV0dG9uIGlzIGluIHRoZSAnb24nIHN0YXRlLlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgYnV0dG9uIGlzICdvbicsIGZhbHNlIGlmICdvZmYnXHJcbiAgICAgKi9cclxuICAgIFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUuaXNPbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vblN0YXRlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIHRoZSB0b2dnbGUgYnV0dG9uIGlzIGluIHRoZSAnb2ZmJyBzdGF0ZS5cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGJ1dHRvbiBpcyAnb2ZmJywgZmFsc2UgaWYgJ29uJ1xyXG4gICAgICovXHJcbiAgICBUb2dnbGVCdXR0b24ucHJvdG90eXBlLmlzT2ZmID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5pc09uKCk7XHJcbiAgICB9O1xyXG4gICAgVG9nZ2xlQnV0dG9uLnByb3RvdHlwZS5vbkNsaWNrRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5vbkNsaWNrRXZlbnQuY2FsbCh0aGlzKTtcclxuICAgICAgICAvLyBGaXJlIHRoZSB0b2dnbGUgZXZlbnQgdG9nZXRoZXIgd2l0aCB0aGUgY2xpY2sgZXZlbnRcclxuICAgICAgICAvLyAodGhleSBhcmUgdGVjaG5pY2FsbHkgdGhlIHNhbWUsIG9ubHkgdGhlIHNlbWFudGljcyBhcmUgZGlmZmVyZW50KVxyXG4gICAgICAgIHRoaXMub25Ub2dnbGVFdmVudCgpO1xyXG4gICAgfTtcclxuICAgIFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUub25Ub2dnbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbkV2ZW50cy5vblRvZ2dsZS5kaXNwYXRjaCh0aGlzKTtcclxuICAgIH07XHJcbiAgICBUb2dnbGVCdXR0b24ucHJvdG90eXBlLm9uVG9nZ2xlT25FdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbkV2ZW50cy5vblRvZ2dsZU9uLmRpc3BhdGNoKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUub25Ub2dnbGVPZmZFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbkV2ZW50cy5vblRvZ2dsZU9mZi5kaXNwYXRjaCh0aGlzKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVG9nZ2xlQnV0dG9uLnByb3RvdHlwZSwgXCJvblRvZ2dsZVwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSBidXR0b24gaXMgdG9nZ2xlZC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnQ8VG9nZ2xlQnV0dG9uPENvbmZpZz4sIE5vQXJncz59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvZ2dsZUJ1dHRvbkV2ZW50cy5vblRvZ2dsZS5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUsIFwib25Ub2dnbGVPblwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIHRoZSBidXR0b24gaXMgdG9nZ2xlZCAnb24nLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudDxUb2dnbGVCdXR0b248Q29uZmlnPiwgTm9BcmdzPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlQnV0dG9uRXZlbnRzLm9uVG9nZ2xlT24uZ2V0RXZlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUb2dnbGVCdXR0b24ucHJvdG90eXBlLCBcIm9uVG9nZ2xlT2ZmXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIGJ1dHRvbiBpcyB0b2dnbGVkICdvZmYnLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudDxUb2dnbGVCdXR0b248Q29uZmlnPiwgTm9BcmdzPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlQnV0dG9uRXZlbnRzLm9uVG9nZ2xlT2ZmLmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gVG9nZ2xlQnV0dG9uO1xyXG59KGJ1dHRvbl8xLkJ1dHRvbikpO1xyXG5leHBvcnRzLlRvZ2dsZUJ1dHRvbiA9IFRvZ2dsZUJ1dHRvbjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3RvZ2dsZWJ1dHRvbi50c1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbXBvbmVudF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50XCIpO1xyXG52YXIgZG9tXzEgPSByZXF1aXJlKFwiLi4vZG9tXCIpO1xyXG52YXIgZXZlbnRkaXNwYXRjaGVyXzEgPSByZXF1aXJlKFwiLi4vZXZlbnRkaXNwYXRjaGVyXCIpO1xyXG4vKipcclxuICogQSBzaW1wbGUgdGV4dCBsYWJlbC5cclxuICpcclxuICogRE9NIGV4YW1wbGU6XHJcbiAqIDxjb2RlPlxyXG4gKiAgICAgPHNwYW4gY2xhc3M9J3VpLWxhYmVsJz4uLi5zb21lIHRleHQuLi48L3NwYW4+XHJcbiAqIDwvY29kZT5cclxuICovXHJcbnZhciBMYWJlbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoTGFiZWwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBMYWJlbChjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMubGFiZWxFdmVudHMgPSB7XHJcbiAgICAgICAgICAgIG9uQ2xpY2s6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICAgICAgb25UZXh0Q2hhbmdlZDogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktbGFiZWwnLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgX3RoaXMudGV4dCA9IF90aGlzLmNvbmZpZy50ZXh0O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIExhYmVsLnByb3RvdHlwZS50b0RvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgbGFiZWxFbGVtZW50ID0gbmV3IGRvbV8xLkRPTSgnc3BhbicsIHtcclxuICAgICAgICAgICAgJ2lkJzogdGhpcy5jb25maWcuaWQsXHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMuZ2V0Q3NzQ2xhc3NlcygpLFxyXG4gICAgICAgIH0pLmh0bWwodGhpcy50ZXh0KTtcclxuICAgICAgICBsYWJlbEVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vbkNsaWNrRXZlbnQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbGFiZWxFbGVtZW50O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSB0ZXh0IG9uIHRoaXMgbGFiZWwuXHJcbiAgICAgKiBAcGFyYW0gdGV4dFxyXG4gICAgICovXHJcbiAgICBMYWJlbC5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcclxuICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5odG1sKHRleHQpO1xyXG4gICAgICAgIHRoaXMub25UZXh0Q2hhbmdlZEV2ZW50KHRleHQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgdGV4dCBvbiB0aGlzIGxhYmVsLlxyXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdGV4dCBvbiB0aGUgbGFiZWxcclxuICAgICAqL1xyXG4gICAgTGFiZWwucHJvdG90eXBlLmdldFRleHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyB0aGUgdGV4dCBvbiB0aGlzIGxhYmVsLlxyXG4gICAgICovXHJcbiAgICBMYWJlbC5wcm90b3R5cGUuY2xlYXJUZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmh0bWwoJycpO1xyXG4gICAgICAgIHRoaXMub25UZXh0Q2hhbmdlZEV2ZW50KG51bGwpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGVzdHMgaWYgdGhlIGxhYmVsIGlzIGVtcHR5IGFuZCBkb2VzIG5vdCBjb250YWluIGFueSB0ZXh0LlxyXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgbGFiZWwgaXMgZW1wdHksIGVsc2UgZmFsc2VcclxuICAgICAqL1xyXG4gICAgTGFiZWwucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLnRleHQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlcyB0aGUge0BsaW5rICNvbkNsaWNrfSBldmVudC5cclxuICAgICAqIENhbiBiZSB1c2VkIGJ5IHN1YmNsYXNzZXMgdG8gbGlzdGVuIHRvIHRoaXMgZXZlbnQgd2l0aG91dCBzdWJzY3JpYmluZyBhbiBldmVudCBsaXN0ZW5lciBieSBvdmVyd3JpdGluZyB0aGUgbWV0aG9kXHJcbiAgICAgKiBhbmQgY2FsbGluZyB0aGUgc3VwZXIgbWV0aG9kLlxyXG4gICAgICovXHJcbiAgICBMYWJlbC5wcm90b3R5cGUub25DbGlja0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubGFiZWxFdmVudHMub25DbGljay5kaXNwYXRjaCh0aGlzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEZpcmVzIHRoZSB7QGxpbmsgI29uQ2xpY2t9IGV2ZW50LlxyXG4gICAgICogQ2FuIGJlIHVzZWQgYnkgc3ViY2xhc3NlcyB0byBsaXN0ZW4gdG8gdGhpcyBldmVudCB3aXRob3V0IHN1YnNjcmliaW5nIGFuIGV2ZW50IGxpc3RlbmVyIGJ5IG92ZXJ3cml0aW5nIHRoZSBtZXRob2RcclxuICAgICAqIGFuZCBjYWxsaW5nIHRoZSBzdXBlciBtZXRob2QuXHJcbiAgICAgKi9cclxuICAgIExhYmVsLnByb3RvdHlwZS5vblRleHRDaGFuZ2VkRXZlbnQgPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHRoaXMubGFiZWxFdmVudHMub25UZXh0Q2hhbmdlZC5kaXNwYXRjaCh0aGlzLCB0ZXh0KTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGFiZWwucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgbGFiZWwgaXMgY2xpY2tlZC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnQ8TGFiZWw8TGFiZWxDb25maWc+LCBOb0FyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYWJlbEV2ZW50cy5vbkNsaWNrLmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGFiZWwucHJvdG90eXBlLCBcIm9uVGV4dENoYW5nZWRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgdGV4dCBvbiB0aGUgbGFiZWwgaXMgY2hhbmdlZC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnQ8TGFiZWw8TGFiZWxDb25maWc+LCBzdHJpbmc+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYWJlbEV2ZW50cy5vblRleHRDaGFuZ2VkLmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gTGFiZWw7XHJcbn0oY29tcG9uZW50XzEuQ29tcG9uZW50KSk7XHJcbmV4cG9ydHMuTGFiZWwgPSBMYWJlbDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2xhYmVsLnRzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRcIik7XHJcbnZhciBkb21fMSA9IHJlcXVpcmUoXCIuLi9kb21cIik7XHJcbnZhciBldmVudGRpc3BhdGNoZXJfMSA9IHJlcXVpcmUoXCIuLi9ldmVudGRpc3BhdGNoZXJcIik7XHJcbi8qKlxyXG4gKiBBIHNpbXBsZSBjbGlja2FibGUgYnV0dG9uLlxyXG4gKi9cclxudmFyIEJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQnV0dG9uKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5idXR0b25FdmVudHMgPSB7XHJcbiAgICAgICAgICAgIG9uQ2xpY2s6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWJ1dHRvbicsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBCdXR0b24ucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYnV0dG9uIGVsZW1lbnQgd2l0aCB0aGUgdGV4dCBsYWJlbFxyXG4gICAgICAgIHZhciBidXR0b25FbGVtZW50ID0gbmV3IGRvbV8xLkRPTSgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICAndHlwZSc6ICdidXR0b24nLFxyXG4gICAgICAgICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCksXHJcbiAgICAgICAgfSkuYXBwZW5kKG5ldyBkb21fMS5ET00oJ3NwYW4nLCB7XHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdsYWJlbCcpLFxyXG4gICAgICAgIH0pLmh0bWwodGhpcy5jb25maWcudGV4dCkpO1xyXG4gICAgICAgIC8vIExpc3RlbiBmb3IgdGhlIGNsaWNrIGV2ZW50IG9uIHRoZSBidXR0b24gZWxlbWVudCBhbmQgdHJpZ2dlciB0aGUgY29ycmVzcG9uZGluZyBldmVudCBvbiB0aGUgYnV0dG9uIGNvbXBvbmVudFxyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vbkNsaWNrRXZlbnQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYnV0dG9uRWxlbWVudDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGV4dCBvbiB0aGUgbGFiZWwgb2YgdGhlIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSB0ZXh0IHRoZSB0ZXh0IHRvIHB1dCBpbnRvIHRoZSBsYWJlbCBvZiB0aGUgYnV0dG9uXHJcbiAgICAgKi9cclxuICAgIEJ1dHRvbi5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuZmluZCgnLicgKyB0aGlzLnByZWZpeENzcygnbGFiZWwnKSkuaHRtbCh0ZXh0KTtcclxuICAgIH07XHJcbiAgICBCdXR0b24ucHJvdG90eXBlLm9uQ2xpY2tFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbkV2ZW50cy5vbkNsaWNrLmRpc3BhdGNoKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdXR0b24ucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PEJ1dHRvbjxDb25maWc+LCBOb0FyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5idXR0b25FdmVudHMub25DbGljay5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEJ1dHRvbjtcclxufShjb21wb25lbnRfMS5Db21wb25lbnQpKTtcclxuZXhwb3J0cy5CdXR0b24gPSBCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9idXR0b24udHNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBsaXN0c2VsZWN0b3JfMSA9IHJlcXVpcmUoXCIuL2xpc3RzZWxlY3RvclwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4uL2RvbVwiKTtcclxuLyoqXHJcbiAqIEEgc2ltcGxlIHNlbGVjdCBib3ggcHJvdmlkaW5nIHRoZSBwb3NzaWJpbGl0eSB0byBzZWxlY3QgYSBzaW5nbGUgaXRlbSBvdXQgb2YgYSBsaXN0IG9mIGF2YWlsYWJsZSBpdGVtcy5cclxuICpcclxuICogRE9NIGV4YW1wbGU6XHJcbiAqIDxjb2RlPlxyXG4gKiAgICAgPHNlbGVjdCBjbGFzcz0ndWktc2VsZWN0Ym94Jz5cclxuICogICAgICAgICA8b3B0aW9uIHZhbHVlPSdrZXknPmxhYmVsPC9vcHRpb24+XHJcbiAqICAgICAgICAgLi4uXHJcbiAqICAgICA8L3NlbGVjdD5cclxuICogPC9jb2RlPlxyXG4gKi9cclxudmFyIFNlbGVjdEJveCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU2VsZWN0Qm94LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2VsZWN0Qm94KGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1zZWxlY3Rib3gnLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU2VsZWN0Qm94LnByb3RvdHlwZS50b0RvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc2VsZWN0RWxlbWVudCA9IG5ldyBkb21fMS5ET00oJ3NlbGVjdCcsIHtcclxuICAgICAgICAgICAgJ2lkJzogdGhpcy5jb25maWcuaWQsXHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMuZ2V0Q3NzQ2xhc3NlcygpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0RWxlbWVudCA9IHNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy51cGRhdGVEb21JdGVtcygpO1xyXG4gICAgICAgIHNlbGVjdEVsZW1lbnQub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gc2VsZWN0RWxlbWVudC52YWwoKTtcclxuICAgICAgICAgICAgX3RoaXMub25JdGVtU2VsZWN0ZWRFdmVudCh2YWx1ZSwgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzZWxlY3RFbGVtZW50O1xyXG4gICAgfTtcclxuICAgIFNlbGVjdEJveC5wcm90b3R5cGUudXBkYXRlRG9tSXRlbXMgPSBmdW5jdGlvbiAoc2VsZWN0ZWRWYWx1ZSkge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlID09PSB2b2lkIDApIHsgc2VsZWN0ZWRWYWx1ZSA9IG51bGw7IH1cclxuICAgICAgICAvLyBEZWxldGUgYWxsIGNoaWxkcmVuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RFbGVtZW50LmVtcHR5KCk7XHJcbiAgICAgICAgLy8gQWRkIHVwZGF0ZWQgY2hpbGRyZW5cclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5pdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25FbGVtZW50ID0gbmV3IGRvbV8xLkRPTSgnb3B0aW9uJywge1xyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogaXRlbS5rZXksXHJcbiAgICAgICAgICAgIH0pLmh0bWwoaXRlbS5sYWJlbCk7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmtleSA9PT0gU3RyaW5nKHNlbGVjdGVkVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LmF0dHIoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RFbGVtZW50LmFwcGVuZChvcHRpb25FbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU2VsZWN0Qm94LnByb3RvdHlwZS5vbkl0ZW1BZGRlZEV2ZW50ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5vbkl0ZW1BZGRlZEV2ZW50LmNhbGwodGhpcywgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRG9tSXRlbXModGhpcy5zZWxlY3RlZEl0ZW0pO1xyXG4gICAgfTtcclxuICAgIFNlbGVjdEJveC5wcm90b3R5cGUub25JdGVtUmVtb3ZlZEV2ZW50ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5vbkl0ZW1SZW1vdmVkRXZlbnQuY2FsbCh0aGlzLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVEb21JdGVtcyh0aGlzLnNlbGVjdGVkSXRlbSk7XHJcbiAgICB9O1xyXG4gICAgU2VsZWN0Qm94LnByb3RvdHlwZS5vbkl0ZW1TZWxlY3RlZEV2ZW50ID0gZnVuY3Rpb24gKHZhbHVlLCB1cGRhdGVEb21JdGVtcykge1xyXG4gICAgICAgIGlmICh1cGRhdGVEb21JdGVtcyA9PT0gdm9pZCAwKSB7IHVwZGF0ZURvbUl0ZW1zID0gdHJ1ZTsgfVxyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUub25JdGVtU2VsZWN0ZWRFdmVudC5jYWxsKHRoaXMsIHZhbHVlKTtcclxuICAgICAgICBpZiAodXBkYXRlRG9tSXRlbXMpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVEb21JdGVtcyh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTZWxlY3RCb3g7XHJcbn0obGlzdHNlbGVjdG9yXzEuTGlzdFNlbGVjdG9yKSk7XHJcbmV4cG9ydHMuU2VsZWN0Qm94ID0gU2VsZWN0Qm94O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc2VsZWN0Ym94LnRzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIFRPRE8gY2hhbmdlIHRvIGludGVybmFsIChub3QgZXhwb3J0ZWQpIGNsYXNzLCBob3cgdG8gdXNlIGluIG90aGVyIGZpbGVzP1xyXG4vKipcclxuICogRXhlY3V0ZXMgYSBjYWxsYmFjayBhZnRlciBhIHNwZWNpZmllZCBhbW91bnQgb2YgdGltZSwgb3B0aW9uYWxseSByZXBlYXRlZGx5IHVudGlsIHN0b3BwZWQuXHJcbiAqL1xyXG52YXIgVGltZW91dCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZW91dCBjYWxsYmFjayBoYW5kbGVyLlxyXG4gICAgICogQHBhcmFtIGRlbGF5IHRoZSBkZWxheSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgd2hpY2ggdGhlIGNhbGxiYWNrIHNob3VsZCBiZSBleGVjdXRlZFxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBjYWxsYmFjayB0byBleGVjdXRlIGFmdGVyIHRoZSBkZWxheSB0aW1lXHJcbiAgICAgKiBAcGFyYW0gcmVwZWF0IGlmIHRydWUsIGNhbGwgdGhlIGNhbGxiYWNrIHJlcGVhdGVkbHkgaW4gZGVsYXkgaW50ZXJ2YWxzXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFRpbWVvdXQoZGVsYXksIGNhbGxiYWNrLCByZXBlYXQpIHtcclxuICAgICAgICBpZiAocmVwZWF0ID09PSB2b2lkIDApIHsgcmVwZWF0ID0gZmFsc2U7IH1cclxuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHRoaXMucmVwZWF0ID0gcmVwZWF0O1xyXG4gICAgICAgIHRoaXMudGltZW91dEhhbmRsZSA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyB0aGUgdGltZW91dCBhbmQgY2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gdGhlIHRpbWVvdXQgZGVsYXkgaGFzIHBhc3NlZC5cclxuICAgICAqIEByZXR1cm5zIHtUaW1lb3V0fSB0aGUgY3VycmVudCB0aW1lb3V0IChzbyB0aGUgc3RhcnQgY2FsbCBjYW4gYmUgY2hhaW5lZCB0byB0aGUgY29uc3RydWN0b3IpXHJcbiAgICAgKi9cclxuICAgIFRpbWVvdXQucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyB0aGUgdGltZW91dC4gVGhlIGNhbGxiYWNrIHdpbGwgbm90IGJlIGNhbGxlZCBpZiBjbGVhciBpcyBjYWxsZWQgZHVyaW5nIHRoZSB0aW1lb3V0LlxyXG4gICAgICovXHJcbiAgICBUaW1lb3V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNsZWFySW50ZXJuYWwoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgcGFzc2VkIHRpbWVvdXQgZGVsYXkgdG8gemVyby4gQ2FuIGJlIHVzZWQgdG8gZGVmZXIgdGhlIGNhbGxpbmcgb2YgdGhlIGNhbGxiYWNrLlxyXG4gICAgICovXHJcbiAgICBUaW1lb3V0LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBsYXN0U2NoZWR1bGVUaW1lID0gMDtcclxuICAgICAgICB2YXIgZGVsYXlBZGp1c3QgPSAwO1xyXG4gICAgICAgIHRoaXMuY2xlYXJJbnRlcm5hbCgpO1xyXG4gICAgICAgIHZhciBpbnRlcm5hbENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jYWxsYmFjaygpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMucmVwZWF0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgIC8vIFRoZSB0aW1lIG9mIG9uZSBpdGVyYXRpb24gZnJvbSBzY2hlZHVsaW5nIHRvIGV4ZWN1dGluZyB0aGUgY2FsbGJhY2sgKHVzdWFsbHkgYSBiaXQgbG9uZ2VyIHRoYW4gdGhlIGRlbGF5XHJcbiAgICAgICAgICAgICAgICAvLyB0aW1lKVxyXG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gbm93IC0gbGFzdFNjaGVkdWxlVGltZTtcclxuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZGVsYXkgYWRqdXN0bWVudCBmb3IgdGhlIG5leHQgc2NoZWR1bGUgdG8ga2VlcCBhIHN0ZWFkeSBkZWxheSBpbnRlcnZhbCBvdmVyIHRpbWVcclxuICAgICAgICAgICAgICAgIGRlbGF5QWRqdXN0ID0gX3RoaXMuZGVsYXkgLSBkZWx0YSArIGRlbGF5QWRqdXN0O1xyXG4gICAgICAgICAgICAgICAgbGFzdFNjaGVkdWxlVGltZSA9IG5vdztcclxuICAgICAgICAgICAgICAgIC8vIFNjaGVkdWxlIG5leHQgZXhlY3V0aW9uIGJ5IHRoZSBhZGp1c3RlZCBkZWxheVxyXG4gICAgICAgICAgICAgICAgX3RoaXMudGltZW91dEhhbmRsZSA9IHNldFRpbWVvdXQoaW50ZXJuYWxDYWxsYmFjaywgX3RoaXMuZGVsYXkgKyBkZWxheUFkanVzdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxhc3RTY2hlZHVsZVRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMudGltZW91dEhhbmRsZSA9IHNldFRpbWVvdXQoaW50ZXJuYWxDYWxsYmFjaywgdGhpcy5kZWxheSk7XHJcbiAgICB9O1xyXG4gICAgVGltZW91dC5wcm90b3R5cGUuY2xlYXJJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SGFuZGxlKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGltZW91dDtcclxufSgpKTtcclxuZXhwb3J0cy5UaW1lb3V0ID0gVGltZW91dDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci90aW1lb3V0LnRzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTdHJpbmdVdGlscztcclxuKGZ1bmN0aW9uIChTdHJpbmdVdGlscykge1xyXG4gICAgU3RyaW5nVXRpbHMuRk9STUFUX0hITU1TUyA9ICdoaDptbTpzcyc7XHJcbiAgICBTdHJpbmdVdGlscy5GT1JNQVRfTU1TUyA9ICdtbTpzcyc7XHJcbiAgICAvKipcclxuICAgICAqIEZvcm1hdHMgYSBudW1iZXIgb2Ygc2Vjb25kcyBpbnRvIGEgdGltZSBzdHJpbmcgd2l0aCB0aGUgcGF0dGVybiBoaDptbTpzcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdG90YWxTZWNvbmRzIHRoZSB0b3RhbCBudW1iZXIgb2Ygc2Vjb25kcyB0byBmb3JtYXQgdG8gc3RyaW5nXHJcbiAgICAgKiBAcGFyYW0gZm9ybWF0IHRoZSB0aW1lIGZvcm1hdCB0byBvdXRwdXQgKGRlZmF1bHQ6IGhoOm1tOnNzKVxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIGZvcm1hdHRlZCB0aW1lIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzZWNvbmRzVG9UaW1lKHRvdGFsU2Vjb25kcywgZm9ybWF0KSB7XHJcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7IGZvcm1hdCA9IFN0cmluZ1V0aWxzLkZPUk1BVF9ISE1NU1M7IH1cclxuICAgICAgICB2YXIgaXNOZWdhdGl2ZSA9IHRvdGFsU2Vjb25kcyA8IDA7XHJcbiAgICAgICAgaWYgKGlzTmVnYXRpdmUpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHRpbWUgaXMgbmVnYXRpdmUsIHdlIG1ha2UgaXQgcG9zaXRpdmUgZm9yIHRoZSBjYWxjdWxhdGlvbiBiZWxvd1xyXG4gICAgICAgICAgICAvLyAoZWxzZSB3ZSdkIGdldCBhbGwgbmVnYXRpdmUgbnVtYmVycykgYW5kIHJlYXR0YWNoIHRoZSBuZWdhdGl2ZSBzaWduIGxhdGVyLlxyXG4gICAgICAgICAgICB0b3RhbFNlY29uZHMgPSAtdG90YWxTZWNvbmRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTcGxpdCBpbnRvIHNlcGFyYXRlIHRpbWUgcGFydHNcclxuICAgICAgICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDM2MDApO1xyXG4gICAgICAgIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcih0b3RhbFNlY29uZHMgLyA2MCkgLSBob3VycyAqIDYwO1xyXG4gICAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcih0b3RhbFNlY29uZHMpICUgNjA7XHJcbiAgICAgICAgcmV0dXJuIChpc05lZ2F0aXZlID8gJy0nIDogJycpICsgZm9ybWF0XHJcbiAgICAgICAgICAgIC5yZXBsYWNlKCdoaCcsIGxlZnRQYWRXaXRoWmVyb3MoaG91cnMsIDIpKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgnbW0nLCBsZWZ0UGFkV2l0aFplcm9zKG1pbnV0ZXMsIDIpKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgnc3MnLCBsZWZ0UGFkV2l0aFplcm9zKHNlY29uZHMsIDIpKTtcclxuICAgIH1cclxuICAgIFN0cmluZ1V0aWxzLnNlY29uZHNUb1RpbWUgPSBzZWNvbmRzVG9UaW1lO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0cyBhIG51bWJlciB0byBhIHN0cmluZyBhbmQgbGVmdC1wYWRzIGl0IHdpdGggemVyb3MgdG8gdGhlIHNwZWNpZmllZCBsZW5ndGguXHJcbiAgICAgKiBFeGFtcGxlOiBsZWZ0UGFkV2l0aFplcm9zKDEyMywgNSkgPT4gJzAwMTIzJ1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBudW0gdGhlIG51bWJlciB0byBjb252ZXJ0IHRvIHN0cmluZyBhbmQgcGFkIHdpdGggemVyb3NcclxuICAgICAqIEBwYXJhbSBsZW5ndGggdGhlIGRlc2lyZWQgbGVuZ3RoIG9mIHRoZSBwYWRkZWQgc3RyaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgcGFkZGVkIG51bWJlciBhcyBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbGVmdFBhZFdpdGhaZXJvcyhudW0sIGxlbmd0aCkge1xyXG4gICAgICAgIHZhciB0ZXh0ID0gbnVtICsgJyc7XHJcbiAgICAgICAgdmFyIHBhZGRpbmcgPSAnMDAwMDAwMDAwMCcuc3Vic3RyKDAsIGxlbmd0aCAtIHRleHQubGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gcGFkZGluZyArIHRleHQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEZpbGxzIG91dCBwbGFjZWhvbGRlcnMgaW4gYW4gYWQgbWVzc2FnZS5cclxuICAgICAqXHJcbiAgICAgKiBIYXMgdGhlIHBsYWNlaG9sZGVycyAne3JlbWFpbmluZ1RpbWVbZm9ybWF0U3RyaW5nXX0nLCAne3BsYXllZFRpbWVbZm9ybWF0U3RyaW5nXX0nIGFuZFxyXG4gICAgICogJ3thZER1cmF0aW9uW2Zvcm1hdFN0cmluZ119Jywgd2hpY2ggYXJlIHJlcGxhY2VkIGJ5IHRoZSByZW1haW5pbmcgdGltZSB1bnRpbCB0aGUgYWQgY2FuIGJlIHNraXBwZWQsIHRoZSBjdXJyZW50XHJcbiAgICAgKiB0aW1lIG9yIHRoZSBhZCBkdXJhdGlvbi4gVGhlIGZvcm1hdCBzdHJpbmcgaXMgb3B0aW9uYWwuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSBwbGFjZWhvbGRlciBpcyByZXBsYWNlZCBieSB0aGUgdGltZVxyXG4gICAgICogaW4gc2Vjb25kcy4gSWYgc3BlY2lmaWVkLCBpdCBtdXN0IGJlIG9mIHRoZSBmb2xsb3dpbmcgZm9ybWF0OlxyXG4gICAgICogLSAlZCAtIEluc2VydHMgdGhlIHRpbWUgYXMgYW4gaW50ZWdlci5cclxuICAgICAqIC0gJTBOZCAtIEluc2VydHMgdGhlIHRpbWUgYXMgYW4gaW50ZWdlciB3aXRoIGxlYWRpbmcgemVyb2VzLCBpZiB0aGUgbGVuZ3RoIG9mIHRoZSB0aW1lIHN0cmluZyBpcyBzbWFsbGVyIHRoYW4gTi5cclxuICAgICAqIC0gJWYgLSBJbnNlcnRzIHRoZSB0aW1lIGFzIGEgZmxvYXQuXHJcbiAgICAgKiAtICUwTmYgLSBJbnNlcnRzIHRoZSB0aW1lIGFzIGEgZmxvYXQgd2l0aCBsZWFkaW5nIHplcm9lcy5cclxuICAgICAqIC0gJS5NZiAtIEluc2VydHMgdGhlIHRpbWUgYXMgYSBmbG9hdCB3aXRoIE0gZGVjaW1hbCBwbGFjZXMuIENhbiBiZSBjb21iaW5lZCB3aXRoICUwTmYsIGUuZy4gJTA0LjJmICh0aGUgdGltZVxyXG4gICAgICogMTAuMTIzXHJcbiAgICAgKiB3b3VsZCBiZSBwcmludGVkIGFzIDAwMTAuMTIpLlxyXG4gICAgICogLSAlaGg6bW06c3NcclxuICAgICAqIC0gJW1tOnNzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFkTWVzc2FnZSBhbiBhZCBtZXNzYWdlIHdpdGggb3B0aW9uYWwgcGxhY2Vob2xkZXJzIHRvIGZpbGxcclxuICAgICAqIEBwYXJhbSBza2lwT2Zmc2V0IGlmIHNwZWNpZmllZCwge3JlbWFpbmluZ1RpbWV9IHdpbGwgYmUgZmlsbGVkIHdpdGggdGhlIHJlbWFpbmluZyB0aW1lIHVudGlsIHRoZSBhZCBjYW4gYmUgc2tpcHBlZFxyXG4gICAgICogQHBhcmFtIHBsYXllciB0aGUgcGxheWVyIHRvIGdldCB0aGUgdGltZSBkYXRhIGZyb21cclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBhZCBtZXNzYWdlIHdpdGggZmlsbGVkIHBsYWNlaG9sZGVyc1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiByZXBsYWNlQWRNZXNzYWdlUGxhY2Vob2xkZXJzKGFkTWVzc2FnZSwgc2tpcE9mZnNldCwgcGxheWVyKSB7XHJcbiAgICAgICAgdmFyIGFkTWVzc2FnZVBsYWNlaG9sZGVyUmVnZXggPSBuZXcgUmVnRXhwKCdcXFxceyhyZW1haW5pbmdUaW1lfHBsYXllZFRpbWV8YWREdXJhdGlvbikofXwlKCgwWzEtOV1cXFxcZCooXFxcXC5cXFxcZCsoZHxmKXxkfGYpfFxcXFwuXFxcXGQrZnxkfGYpfGhoOm1tOnNzfG1tOnNzKX0pJywgJ2cnKTtcclxuICAgICAgICByZXR1cm4gYWRNZXNzYWdlLnJlcGxhY2UoYWRNZXNzYWdlUGxhY2Vob2xkZXJSZWdleCwgZnVuY3Rpb24gKGZvcm1hdFN0cmluZykge1xyXG4gICAgICAgICAgICB2YXIgdGltZSA9IDA7XHJcbiAgICAgICAgICAgIGlmIChmb3JtYXRTdHJpbmcuaW5kZXhPZigncmVtYWluaW5nVGltZScpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChza2lwT2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZSA9IE1hdGguY2VpbChza2lwT2Zmc2V0IC0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZSA9IHBsYXllci5nZXREdXJhdGlvbigpIC0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZm9ybWF0U3RyaW5nLmluZGV4T2YoJ3BsYXllZFRpbWUnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lID0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZm9ybWF0U3RyaW5nLmluZGV4T2YoJ2FkRHVyYXRpb24nKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lID0gcGxheWVyLmdldER1cmF0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdE51bWJlcih0aW1lLCBmb3JtYXRTdHJpbmcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgU3RyaW5nVXRpbHMucmVwbGFjZUFkTWVzc2FnZVBsYWNlaG9sZGVycyA9IHJlcGxhY2VBZE1lc3NhZ2VQbGFjZWhvbGRlcnM7XHJcbiAgICBmdW5jdGlvbiBmb3JtYXROdW1iZXIodGltZSwgZm9ybWF0KSB7XHJcbiAgICAgICAgdmFyIGZvcm1hdFN0cmluZ1ZhbGlkYXRpb25SZWdleCA9IC8lKCgwWzEtOV1cXGQqKFxcLlxcZCsoZHxmKXxkfGYpfFxcLlxcZCtmfGR8Zil8aGg6bW06c3N8bW06c3MpLztcclxuICAgICAgICB2YXIgbGVhZGluZ1plcm9lc1JlZ2V4ID0gLyglMFsxLTldXFxkKikoPz0oXFwuXFxkK2Z8ZnxkKSkvO1xyXG4gICAgICAgIHZhciBkZWNpbWFsUGxhY2VzUmVnZXggPSAvXFwuXFxkKig/PWYpLztcclxuICAgICAgICBpZiAoIWZvcm1hdFN0cmluZ1ZhbGlkYXRpb25SZWdleC50ZXN0KGZvcm1hdCkpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGZvcm1hdCBpcyBpbnZhbGlkLCB3ZSBzZXQgYSBkZWZhdWx0IGZhbGxiYWNrIGZvcm1hdFxyXG4gICAgICAgICAgICBmb3JtYXQgPSAnJWQnO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBsZWFkaW5nIHplcm9zXHJcbiAgICAgICAgdmFyIGxlYWRpbmdaZXJvZXMgPSAwO1xyXG4gICAgICAgIHZhciBsZWFkaW5nWmVyb2VzTWF0Y2hlcyA9IGZvcm1hdC5tYXRjaChsZWFkaW5nWmVyb2VzUmVnZXgpO1xyXG4gICAgICAgIGlmIChsZWFkaW5nWmVyb2VzTWF0Y2hlcykge1xyXG4gICAgICAgICAgICBsZWFkaW5nWmVyb2VzID0gcGFyc2VJbnQobGVhZGluZ1plcm9lc01hdGNoZXNbMF0uc3Vic3RyaW5nKDIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXNcclxuICAgICAgICB2YXIgbnVtRGVjaW1hbFBsYWNlcyA9IG51bGw7XHJcbiAgICAgICAgdmFyIGRlY2ltYWxQbGFjZXNNYXRjaGVzID0gZm9ybWF0Lm1hdGNoKGRlY2ltYWxQbGFjZXNSZWdleCk7XHJcbiAgICAgICAgaWYgKGRlY2ltYWxQbGFjZXNNYXRjaGVzICYmICFpc05hTihwYXJzZUludChkZWNpbWFsUGxhY2VzTWF0Y2hlc1swXS5zdWJzdHJpbmcoMSkpKSkge1xyXG4gICAgICAgICAgICBudW1EZWNpbWFsUGxhY2VzID0gcGFyc2VJbnQoZGVjaW1hbFBsYWNlc01hdGNoZXNbMF0uc3Vic3RyaW5nKDEpKTtcclxuICAgICAgICAgICAgaWYgKG51bURlY2ltYWxQbGFjZXMgPiAyMCkge1xyXG4gICAgICAgICAgICAgICAgbnVtRGVjaW1hbFBsYWNlcyA9IDIwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEZsb2F0IGZvcm1hdFxyXG4gICAgICAgIGlmIChmb3JtYXQuaW5kZXhPZignZicpID4gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHRpbWVTdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgaWYgKG51bURlY2ltYWxQbGFjZXMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IGZpeGVkIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlc1xyXG4gICAgICAgICAgICAgICAgdGltZVN0cmluZyA9IHRpbWUudG9GaXhlZChudW1EZWNpbWFsUGxhY2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRpbWVTdHJpbmcgPSAnJyArIHRpbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQXBwbHkgbGVhZGluZyB6ZXJvc1xyXG4gICAgICAgICAgICBpZiAodGltZVN0cmluZy5pbmRleE9mKCcuJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxlZnRQYWRXaXRoWmVyb3ModGltZVN0cmluZywgdGltZVN0cmluZy5sZW5ndGggKyAobGVhZGluZ1plcm9lcyAtIHRpbWVTdHJpbmcuaW5kZXhPZignLicpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVmdFBhZFdpdGhaZXJvcyh0aW1lU3RyaW5nLCBsZWFkaW5nWmVyb2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmb3JtYXQuaW5kZXhPZignOicpID4gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsU2Vjb25kcyA9IE1hdGguY2VpbCh0aW1lKTtcclxuICAgICAgICAgICAgLy8gaGg6bW06c3MgZm9ybWF0XHJcbiAgICAgICAgICAgIGlmIChmb3JtYXQuaW5kZXhPZignaGgnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vjb25kc1RvVGltZSh0b3RhbFNlY29uZHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDYwKTtcclxuICAgICAgICAgICAgICAgIHZhciBzZWNvbmRzID0gdG90YWxTZWNvbmRzICUgNjA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVmdFBhZFdpdGhaZXJvcyhtaW51dGVzLCAyKSArICc6JyArIGxlZnRQYWRXaXRoWmVyb3Moc2Vjb25kcywgMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZWZ0UGFkV2l0aFplcm9zKE1hdGguY2VpbCh0aW1lKSwgbGVhZGluZ1plcm9lcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KShTdHJpbmdVdGlscyA9IGV4cG9ydHMuU3RyaW5nVXRpbHMgfHwgKGV4cG9ydHMuU3RyaW5nVXRpbHMgPSB7fSkpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL3N0cmluZ3V0aWxzLnRzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQXJyYXlVdGlscztcclxuKGZ1bmN0aW9uIChBcnJheVV0aWxzKSB7XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYW4gaXRlbSBmcm9tIGFuIGFycmF5LlxyXG4gICAgICogQHBhcmFtIGFycmF5IHRoZSBhcnJheSB0aGF0IG1heSBjb250YWluIHRoZSBpdGVtIHRvIHJlbW92ZVxyXG4gICAgICogQHBhcmFtIGl0ZW0gdGhlIGl0ZW0gdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5XHJcbiAgICAgKiBAcmV0dXJucyB7YW55fSB0aGUgcmVtb3ZlZCBpdGVtIG9yIG51bGwgaWYgaXQgd2Fzbid0IHBhcnQgb2YgdGhlIGFycmF5XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHJlbW92ZShhcnJheSwgaXRlbSkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IGFycmF5LmluZGV4T2YoaXRlbSk7XHJcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5LnNwbGljZShpbmRleCwgMSlbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBBcnJheVV0aWxzLnJlbW92ZSA9IHJlbW92ZTtcclxufSkoQXJyYXlVdGlscyA9IGV4cG9ydHMuQXJyYXlVdGlscyB8fCAoZXhwb3J0cy5BcnJheVV0aWxzID0ge30pKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9hcnJheXV0aWxzLnRzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgZXZlbnRkaXNwYXRjaGVyXzEgPSByZXF1aXJlKFwiLi9ldmVudGRpc3BhdGNoZXJcIik7XHJcbnZhciBicm93c2VydXRpbHNfMSA9IHJlcXVpcmUoXCIuL2Jyb3dzZXJ1dGlsc1wiKTtcclxudmFyIFBsYXllclV0aWxzO1xyXG4oZnVuY3Rpb24gKFBsYXllclV0aWxzKSB7XHJcbiAgICB2YXIgUGxheWVyU3RhdGU7XHJcbiAgICAoZnVuY3Rpb24gKFBsYXllclN0YXRlKSB7XHJcbiAgICAgICAgUGxheWVyU3RhdGVbUGxheWVyU3RhdGVbXCJJRExFXCJdID0gMF0gPSBcIklETEVcIjtcclxuICAgICAgICBQbGF5ZXJTdGF0ZVtQbGF5ZXJTdGF0ZVtcIlBSRVBBUkVEXCJdID0gMV0gPSBcIlBSRVBBUkVEXCI7XHJcbiAgICAgICAgUGxheWVyU3RhdGVbUGxheWVyU3RhdGVbXCJQTEFZSU5HXCJdID0gMl0gPSBcIlBMQVlJTkdcIjtcclxuICAgICAgICBQbGF5ZXJTdGF0ZVtQbGF5ZXJTdGF0ZVtcIlBBVVNFRFwiXSA9IDNdID0gXCJQQVVTRURcIjtcclxuICAgICAgICBQbGF5ZXJTdGF0ZVtQbGF5ZXJTdGF0ZVtcIkZJTklTSEVEXCJdID0gNF0gPSBcIkZJTklTSEVEXCI7XHJcbiAgICB9KShQbGF5ZXJTdGF0ZSA9IFBsYXllclV0aWxzLlBsYXllclN0YXRlIHx8IChQbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZSA9IHt9KSk7XHJcbiAgICBmdW5jdGlvbiBpc1RpbWVTaGlmdEF2YWlsYWJsZShwbGF5ZXIpIHtcclxuICAgICAgICByZXR1cm4gcGxheWVyLmlzTGl2ZSgpICYmIHBsYXllci5nZXRNYXhUaW1lU2hpZnQoKSAhPT0gMDtcclxuICAgIH1cclxuICAgIFBsYXllclV0aWxzLmlzVGltZVNoaWZ0QXZhaWxhYmxlID0gaXNUaW1lU2hpZnRBdmFpbGFibGU7XHJcbiAgICBmdW5jdGlvbiBnZXRTdGF0ZShwbGF5ZXIpIHtcclxuICAgICAgICBpZiAocGxheWVyLmhhc0VuZGVkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBsYXllclN0YXRlLkZJTklTSEVEO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwbGF5ZXIuaXNQbGF5aW5nKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBsYXllclN0YXRlLlBMQVlJTkc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBsYXllci5pc1BhdXNlZCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQbGF5ZXJTdGF0ZS5QQVVTRUQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBsYXllci5pc1JlYWR5KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBsYXllclN0YXRlLlBSRVBBUkVEO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBsYXllclN0YXRlLklETEU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgUGxheWVyVXRpbHMuZ2V0U3RhdGUgPSBnZXRTdGF0ZTtcclxuICAgIHZhciBUaW1lU2hpZnRBdmFpbGFiaWxpdHlEZXRlY3RvciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gVGltZVNoaWZ0QXZhaWxhYmlsaXR5RGV0ZWN0b3IocGxheWVyKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMudGltZVNoaWZ0QXZhaWxhYmlsaXR5Q2hhbmdlZEV2ZW50ID0gbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcclxuICAgICAgICAgICAgdGhpcy50aW1lU2hpZnRBdmFpbGFibGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHZhciB0aW1lU2hpZnREZXRlY3RvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmRldGVjdCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBUcnkgdG8gZGV0ZWN0IHRpbWVzaGlmdCBhdmFpbGFiaWxpdHkgaW4gT05fUkVBRFksIHdoaWNoIHdvcmtzIGZvciBEQVNIIHN0cmVhbXNcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUkVBRFksIHRpbWVTaGlmdERldGVjdG9yKTtcclxuICAgICAgICAgICAgLy8gV2l0aCBITFMvTmF0aXZlUGxheWVyIHN0cmVhbXMsIGdldE1heFRpbWVTaGlmdCBjYW4gYmUgMCBiZWZvcmUgdGhlIGJ1ZmZlciBmaWxscywgc28gd2UgbmVlZCB0byBhZGRpdGlvbmFsbHlcclxuICAgICAgICAgICAgLy8gY2hlY2sgdGltZXNoaWZ0IGF2YWlsYWJpbGl0eSBpbiBPTl9USU1FX0NIQU5HRURcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVElNRV9DSEFOR0VELCB0aW1lU2hpZnREZXRlY3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFRpbWVTaGlmdEF2YWlsYWJpbGl0eURldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYXllci5pc0xpdmUoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpbWVTaGlmdEF2YWlsYWJsZU5vdyA9IFBsYXllclV0aWxzLmlzVGltZVNoaWZ0QXZhaWxhYmxlKHRoaXMucGxheWVyKTtcclxuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIGF2YWlsYWJpbGl0eSBjaGFuZ2VzLCB3ZSBmaXJlIHRoZSBldmVudFxyXG4gICAgICAgICAgICAgICAgaWYgKHRpbWVTaGlmdEF2YWlsYWJsZU5vdyAhPT0gdGhpcy50aW1lU2hpZnRBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWRFdmVudC5kaXNwYXRjaCh0aGlzLnBsYXllciwgeyB0aW1lU2hpZnRBdmFpbGFibGU6IHRpbWVTaGlmdEF2YWlsYWJsZU5vdyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVTaGlmdEF2YWlsYWJsZSA9IHRpbWVTaGlmdEF2YWlsYWJsZU5vdztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbWVTaGlmdEF2YWlsYWJpbGl0eURldGVjdG9yLnByb3RvdHlwZSwgXCJvblRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWRcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWRFdmVudC5nZXRFdmVudCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gVGltZVNoaWZ0QXZhaWxhYmlsaXR5RGV0ZWN0b3I7XHJcbiAgICB9KCkpO1xyXG4gICAgUGxheWVyVXRpbHMuVGltZVNoaWZ0QXZhaWxhYmlsaXR5RGV0ZWN0b3IgPSBUaW1lU2hpZnRBdmFpbGFiaWxpdHlEZXRlY3RvcjtcclxuICAgIC8qKlxyXG4gICAgICogRGV0ZWN0cyBjaGFuZ2VzIG9mIHRoZSBzdHJlYW0gdHlwZSwgaS5lLiBjaGFuZ2VzIG9mIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIHBsYXllciNpc0xpdmUgbWV0aG9kLlxyXG4gICAgICogTm9ybWFsbHksIGEgc3RyZWFtIGNhbm5vdCBjaGFuZ2UgaXRzIHR5cGUgZHVyaW5nIHBsYXliYWNrLCBpdCdzIGVpdGhlciBWT0Qgb3IgbGl2ZS4gRHVlIHRvIGJ1Z3Mgb24gc29tZVxyXG4gICAgICogcGxhdGZvcm1zIG9yIGJyb3dzZXJzLCBpdCBjYW4gc3RpbGwgY2hhbmdlLiBJdCBpcyB0aGVyZWZvcmUgdW5yZWxpYWJsZSB0byBqdXN0IGNoZWNrICNpc0xpdmUgYW5kIHRoaXMgZGV0ZWN0b3JcclxuICAgICAqIHNob3VsZCBiZSB1c2VkIGFzIGEgd29ya2Fyb3VuZCBpbnN0ZWFkLlxyXG4gICAgICpcclxuICAgICAqIEtub3duIGNhc2VzOlxyXG4gICAgICpcclxuICAgICAqIC0gSExTIFZPRCBvbiBBbmRyb2lkIDQuM1xyXG4gICAgICogVmlkZW8gZHVyYXRpb24gaXMgaW5pdGlhbGx5ICdJbmZpbml0eScgYW5kIG9ubHkgZ2V0cyBhdmFpbGFibGUgYWZ0ZXIgcGxheWJhY2sgc3RhcnRzLCBzbyBzdHJlYW1zIGFyZSB3cm9uZ2x5XHJcbiAgICAgKiByZXBvcnRlZCBhcyAnbGl2ZScgYmVmb3JlIHBsYXliYWNrICh0aGUgbGl2ZS1jaGVjayBpbiB0aGUgcGxheWVyIGNoZWNrcyBmb3IgaW5maW5pdGUgZHVyYXRpb24pLlxyXG4gICAgICovXHJcbiAgICB2YXIgTGl2ZVN0cmVhbURldGVjdG9yID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBMaXZlU3RyZWFtRGV0ZWN0b3IocGxheWVyKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMubGl2ZUNoYW5nZWRFdmVudCA9IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgICAgIHRoaXMubGl2ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdmFyIGxpdmVEZXRlY3RvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmRldGVjdCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHdoZW4gcGxheWVyIGlzIHJlYWR5XHJcbiAgICAgICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1JFQURZLCBsaXZlRGV0ZWN0b3IpO1xyXG4gICAgICAgICAgICAvLyBSZS1ldmFsdWF0ZSB3aGVuIHBsYXliYWNrIHN0YXJ0c1xyXG4gICAgICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZLCBsaXZlRGV0ZWN0b3IpO1xyXG4gICAgICAgICAgICAvLyBITFMgbGl2ZSBkZXRlY3Rpb24gd29ya2Fyb3VuZCBmb3IgQW5kcm9pZDpcclxuICAgICAgICAgICAgLy8gQWxzbyByZS1ldmFsdWF0ZSBkdXJpbmcgcGxheWJhY2ssIGJlY2F1c2UgdGhhdCBpcyB3aGVuIHRoZSBsaXZlIGZsYWcgbWlnaHQgY2hhbmdlLlxyXG4gICAgICAgICAgICAvLyAoRG9pbmcgaXQgb25seSBpbiBBbmRyb2lkIENocm9tZSBzYXZlcyB1bm5lY2Vzc2FyeSBvdmVyaGVhZCBvbiBvdGhlciBwbGF0dGZvcm1zKVxyXG4gICAgICAgICAgICBpZiAoYnJvd3NlcnV0aWxzXzEuQnJvd3NlclV0aWxzLmlzQW5kcm9pZCAmJiBicm93c2VydXRpbHNfMS5Ccm93c2VyVXRpbHMuaXNDaHJvbWUpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1RJTUVfQ0hBTkdFRCwgbGl2ZURldGVjdG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBMaXZlU3RyZWFtRGV0ZWN0b3IucHJvdG90eXBlLmRldGVjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxpdmVOb3cgPSB0aGlzLnBsYXllci5pc0xpdmUoKTtcclxuICAgICAgICAgICAgLy8gQ29tcGFyZSBjdXJyZW50IHRvIHByZXZpb3VzIGxpdmUgc3RhdGUgZmxhZyBhbmQgZmlyZSBldmVudCB3aGVuIGl0IGNoYW5nZXMuIFNpbmNlIHdlIGluaXRpYWxpemUgdGhlIGZsYWdcclxuICAgICAgICAgICAgLy8gd2l0aCB1bmRlZmluZWQsIHRoZXJlIGlzIGFsd2F5cyBhdCBsZWFzdCBhbiBpbml0aWFsIGV2ZW50IGZpcmVkIHRoYXQgdGVsbHMgbGlzdGVuZXJzIHRoZSBsaXZlIHN0YXRlLlxyXG4gICAgICAgICAgICBpZiAobGl2ZU5vdyAhPT0gdGhpcy5saXZlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpdmVDaGFuZ2VkRXZlbnQuZGlzcGF0Y2godGhpcy5wbGF5ZXIsIHsgbGl2ZTogbGl2ZU5vdyB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGl2ZSA9IGxpdmVOb3c7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMaXZlU3RyZWFtRGV0ZWN0b3IucHJvdG90eXBlLCBcIm9uTGl2ZUNoYW5nZWRcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxpdmVDaGFuZ2VkRXZlbnQuZ2V0RXZlbnQoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIExpdmVTdHJlYW1EZXRlY3RvcjtcclxuICAgIH0oKSk7XHJcbiAgICBQbGF5ZXJVdGlscy5MaXZlU3RyZWFtRGV0ZWN0b3IgPSBMaXZlU3RyZWFtRGV0ZWN0b3I7XHJcbn0pKFBsYXllclV0aWxzID0gZXhwb3J0cy5QbGF5ZXJVdGlscyB8fCAoZXhwb3J0cy5QbGF5ZXJVdGlscyA9IHt9KSk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvcGxheWVydXRpbHMudHNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gYW5ndWxhcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImFuZ3VsYXJcIlxuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbnRhaW5lclwiKTtcclxudmFyIGRvbV8xID0gcmVxdWlyZShcIi4uL2RvbVwiKTtcclxudmFyIHRpbWVvdXRfMSA9IHJlcXVpcmUoXCIuLi90aW1lb3V0XCIpO1xyXG52YXIgcGxheWVydXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9wbGF5ZXJ1dGlsc1wiKTtcclxuLyoqXHJcbiAqIFRoZSBiYXNlIGNvbnRhaW5lciB0aGF0IGNvbnRhaW5zIGFsbCBvZiB0aGUgVUkuIFRoZSBVSUNvbnRhaW5lciBpcyBwYXNzZWQgdG8gdGhlIHtAbGluayBVSU1hbmFnZXJ9IHRvIGJ1aWxkIGFuZFxyXG4gKiBzZXR1cCB0aGUgVUkuXHJcbiAqL1xyXG52YXIgVUlDb250YWluZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFVJQ29udGFpbmVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVUlDb250YWluZXIoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXVpY29udGFpbmVyJyxcclxuICAgICAgICAgICAgaGlkZURlbGF5OiA1MDAwLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVUlDb250YWluZXIucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuY29uZmlndXJlVUlTaG93SGlkZShwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVQbGF5ZXJTdGF0ZXMocGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgfTtcclxuICAgIFVJQ29udGFpbmVyLnByb3RvdHlwZS5jb25maWd1cmVVSVNob3dIaWRlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5nZXREb21FbGVtZW50KCk7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5oaWRlRGVsYXkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHVpbWFuYWdlci5vbkNvbmZpZ3VyZWQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVpbWFuYWdlci5vbkNvbnRyb2xzU2hvdy5kaXNwYXRjaChfdGhpcyk7IH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpc1VpU2hvd24gPSBmYWxzZTtcclxuICAgICAgICB2YXIgaXNTZWVraW5nID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGlzRmlyc3RUb3VjaCA9IHRydWU7XHJcbiAgICAgICAgdmFyIHNob3dVaSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFpc1VpU2hvd24pIHtcclxuICAgICAgICAgICAgICAgIC8vIExldCBzdWJzY3JpYmVycyBrbm93IHRoYXQgdGhleSBzaG91bGQgcmV2ZWFsIHRoZW1zZWx2ZXNcclxuICAgICAgICAgICAgICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzU2hvdy5kaXNwYXRjaChfdGhpcyk7XHJcbiAgICAgICAgICAgICAgICBpc1VpU2hvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIERvbid0IHRyaWdnZXIgdGltZW91dCB3aGlsZSBzZWVraW5nIChpdCB3aWxsIGJlIHRyaWdnZXJlZCBvbmNlIHRoZSBzZWVrIGlzIGZpbmlzaGVkKSBvciBjYXN0aW5nXHJcbiAgICAgICAgICAgIGlmICghaXNTZWVraW5nICYmICFwbGF5ZXIuaXNDYXN0aW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnVpSGlkZVRpbWVvdXQuc3RhcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGhpZGVVaSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gSGlkZSB0aGUgVUkgb25seSBpZiBpdCBpcyBzaG93biwgYW5kIGlmIG5vdCBjYXN0aW5nXHJcbiAgICAgICAgICAgIGlmIChpc1VpU2hvd24gJiYgIXBsYXllci5pc0Nhc3RpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSXNzdWUgYSBwcmV2aWV3IGV2ZW50IHRvIGNoZWNrIGlmIHdlIGFyZSBnb29kIHRvIGhpZGUgdGhlIGNvbnRyb2xzXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJldmlld0hpZGVFdmVudEFyZ3MgPSB7fTtcclxuICAgICAgICAgICAgICAgIHVpbWFuYWdlci5vblByZXZpZXdDb250cm9sc0hpZGUuZGlzcGF0Y2goX3RoaXMsIHByZXZpZXdIaWRlRXZlbnRBcmdzKTtcclxuICAgICAgICAgICAgICAgIGlmICghcHJldmlld0hpZGVFdmVudEFyZ3MuY2FuY2VsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHByZXZpZXcgd2Fzbid0IGNhbmNlbGVkLCBsZXQgc3Vic2NyaWJlcnMga25vdyB0aGF0IHRoZXkgc2hvdWxkIG5vdyBoaWRlIHRoZW1zZWx2ZXNcclxuICAgICAgICAgICAgICAgICAgICB1aW1hbmFnZXIub25Db250cm9sc0hpZGUuZGlzcGF0Y2goX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzVWlTaG93biA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhpZGUgcHJldmlldyB3YXMgY2FuY2VsZWQsIGNvbnRpbnVlIHRvIHNob3cgVUlcclxuICAgICAgICAgICAgICAgICAgICBzaG93VWkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gVGltZW91dCB0byBkZWZlciBVSSBoaWRpbmcgYnkgdGhlIGNvbmZpZ3VyZWQgZGVsYXkgdGltZVxyXG4gICAgICAgIHRoaXMudWlIaWRlVGltZW91dCA9IG5ldyB0aW1lb3V0XzEuVGltZW91dChjb25maWcuaGlkZURlbGF5LCBoaWRlVWkpO1xyXG4gICAgICAgIC8vIE9uIHRvdWNoIGRpc3BsYXlzLCB0aGUgZmlyc3QgdG91Y2ggcmV2ZWFscyB0aGUgVUlcclxuICAgICAgICBjb250YWluZXIub24oJ3RvdWNoZW5kJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCFpc1VpU2hvd24pIHtcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgaWYgdGhlIFVJIGlzIGhpZGRlbiwgd2UgcHJldmVudCBvdGhlciBhY3Rpb25zIChleGNlcHQgZm9yIHRoZSBmaXJzdCB0b3VjaCkgYW5kIHJldmVhbCB0aGUgVUkgaW5zdGVhZC5cclxuICAgICAgICAgICAgICAgIC8vIFRoZSBmaXJzdCB0b3VjaCBpcyBub3QgcHJldmVudGVkIHRvIGxldCBvdGhlciBsaXN0ZW5lcnMgcmVjZWl2ZSB0aGUgZXZlbnQgYW5kIHRyaWdnZXIgYW4gaW5pdGlhbCBhY3Rpb24sIGUuZy5cclxuICAgICAgICAgICAgICAgIC8vIHRoZSBodWdlIHBsYXliYWNrIGJ1dHRvbiBjYW4gZGlyZWN0bHkgc3RhcnQgcGxheWJhY2sgaW5zdGVhZCBvZiByZXF1aXJpbmcgYSBkb3VibGUgdGFwIHdoaWNoIDEuIHJldmVhbHNcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBVSSBhbmQgMi4gc3RhcnRzIHBsYXliYWNrLlxyXG4gICAgICAgICAgICAgICAgaWYgKGlzRmlyc3RUb3VjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRmlyc3RUb3VjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2hvd1VpKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBXaGVuIHRoZSBtb3VzZSBlbnRlcnMsIHdlIHNob3cgdGhlIFVJXHJcbiAgICAgICAgY29udGFpbmVyLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzaG93VWkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBXaGVuIHRoZSBtb3VzZSBtb3ZlcyB3aXRoaW4sIHdlIHNob3cgdGhlIFVJXHJcbiAgICAgICAgY29udGFpbmVyLm9uKCdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNob3dVaSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFdoZW4gdGhlIG1vdXNlIGxlYXZlcywgd2UgY2FuIHByZXBhcmUgdG8gaGlkZSB0aGUgVUksIGV4Y2VwdCBhIHNlZWsgaXMgZ29pbmcgb25cclxuICAgICAgICBjb250YWluZXIub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gYSBzZWVrIGlzIGdvaW5nIG9uLCB0aGUgc2VlayBzY3J1YiBwb2ludGVyIG1heSBleGl0IHRoZSBVSSBhcmVhIHdoaWxlIHN0aWxsIHNlZWtpbmcsIGFuZCB3ZSBkbyBub3QgaGlkZVxyXG4gICAgICAgICAgICAvLyB0aGUgVUkgaW4gc3VjaCBjYXNlc1xyXG4gICAgICAgICAgICBpZiAoIWlzU2Vla2luZykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudWlIaWRlVGltZW91dC5zdGFydCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uU2Vlay5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy51aUhpZGVUaW1lb3V0LmNsZWFyKCk7IC8vIERvbid0IGhpZGUgVUkgd2hpbGUgYSBzZWVrIGlzIGluIHByb2dyZXNzXHJcbiAgICAgICAgICAgIGlzU2Vla2luZyA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uU2Vla2VkLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlzU2Vla2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBfdGhpcy51aUhpZGVUaW1lb3V0LnN0YXJ0KCk7IC8vIFJlLWVuYWJsZSBVSSBoaWRlIHRpbWVvdXQgYWZ0ZXIgYSBzZWVrXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9TVEFSVEVELCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNob3dVaSgpOyAvLyBTaG93IFVJIHdoZW4gYSBDYXN0IHNlc3Npb24gaGFzIHN0YXJ0ZWQgKFVJIHdpbGwgdGhlbiBzdGF5IHBlcm1hbmVudGx5IG9uIGR1cmluZyB0aGUgc2Vzc2lvbilcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBVSUNvbnRhaW5lci5wcm90b3R5cGUuY29uZmlndXJlUGxheWVyU3RhdGVzID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5nZXREb21FbGVtZW50KCk7XHJcbiAgICAgICAgLy8gQ29udmVydCBwbGF5ZXIgc3RhdGVzIGludG8gQ1NTIGNsYXNzIG5hbWVzXHJcbiAgICAgICAgdmFyIHN0YXRlQ2xhc3NOYW1lcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIHN0YXRlIGluIHBsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuUGxheWVyU3RhdGUpIHtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihzdGF0ZSkpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW51bU5hbWUgPSBwbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLlBsYXllclN0YXRlW3BsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuUGxheWVyU3RhdGVbc3RhdGVdXTtcclxuICAgICAgICAgICAgICAgIHN0YXRlQ2xhc3NOYW1lc1twbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLlBsYXllclN0YXRlW3N0YXRlXV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLlNUQVRFX1BSRUZJWCArIGVudW1OYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZW1vdmVTdGF0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5JRExFXSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QUkVQQVJFRF0pO1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3Moc3RhdGVDbGFzc05hbWVzW3BsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUExBWUlOR10pO1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3Moc3RhdGVDbGFzc05hbWVzW3BsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUEFVU0VEXSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5GSU5JU0hFRF0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUkVBRFksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVtb3ZlU3RhdGVzKCk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QUkVQQVJFRF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BMQVksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVtb3ZlU3RhdGVzKCk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5QTEFZSU5HXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUEFVU0VELCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVN0YXRlcygpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3Moc3RhdGVDbGFzc05hbWVzW3BsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuUGxheWVyU3RhdGUuUEFVU0VEXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWUJBQ0tfRklOSVNIRUQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVtb3ZlU3RhdGVzKCk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhzdGF0ZUNsYXNzTmFtZXNbcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5QbGF5ZXJTdGF0ZS5GSU5JU0hFRF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NPVVJDRV9VTkxPQURFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZW1vdmVTdGF0ZXMoKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHN0YXRlQ2xhc3NOYW1lc1twbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLlBsYXllclN0YXRlLklETEVdKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBJbml0IGluIGN1cnJlbnQgcGxheWVyIHN0YXRlXHJcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHN0YXRlQ2xhc3NOYW1lc1twbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLmdldFN0YXRlKHBsYXllcildKTtcclxuICAgICAgICAvLyBGdWxsc2NyZWVuIG1hcmtlciBjbGFzc1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0ZVTExTQ1JFRU5fRU5URVIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKF90aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5GVUxMU0NSRUVOKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fRlVMTFNDUkVFTl9FWElULCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhfdGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuRlVMTFNDUkVFTikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEluaXQgZnVsbHNjcmVlbiBzdGF0ZVxyXG4gICAgICAgIGlmIChwbGF5ZXIuaXNGdWxsc2NyZWVuKCkpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLkZVTExTQ1JFRU4pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQnVmZmVyaW5nIG1hcmtlciBjbGFzc1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NUQUxMX1NUQVJURUQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKF90aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5CVUZGRVJJTkcpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TVEFMTF9FTkRFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3MoX3RoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLkJVRkZFUklORykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEluaXQgYnVmZmVyaW5nIHN0YXRlXHJcbiAgICAgICAgaWYgKHBsYXllci5pc1N0YWxsZWQoKSkge1xyXG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuQlVGRkVSSU5HKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW90ZUNvbnRyb2wgbWFya2VyIGNsYXNzXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9TVEFSVEVELCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhfdGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuUkVNT1RFX0NPTlRST0wpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1NUT1BQRUQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5SRU1PVEVfQ09OVFJPTCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEluaXQgUmVtb3RlQ29udHJvbCBzdGF0ZVxyXG4gICAgICAgIGlmIChwbGF5ZXIuaXNDYXN0aW5nKCkpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLlJFTU9URV9DT05UUk9MKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENvbnRyb2xzIHZpc2liaWxpdHkgbWFya2VyIGNsYXNzXHJcbiAgICAgICAgdWltYW5hZ2VyLm9uQ29udHJvbHNTaG93LnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhfdGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuQ09OVFJPTFNfSElEREVOKSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhfdGhpcy5wcmVmaXhDc3MoVUlDb250YWluZXIuQ09OVFJPTFNfU0hPV04pKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB1aW1hbmFnZXIub25Db250cm9sc0hpZGUuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcyhVSUNvbnRhaW5lci5DT05UUk9MU19TSE9XTikpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoX3RoaXMucHJlZml4Q3NzKFVJQ29udGFpbmVyLkNPTlRST0xTX0hJRERFTikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIExheW91dCBzaXplIGNsYXNzZXNcclxuICAgICAgICB2YXIgdXBkYXRlTGF5b3V0U2l6ZUNsYXNzZXMgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3MoX3RoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTQwMCcpKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcygnbGF5b3V0LW1heC13aWR0aC02MDAnKSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhfdGhpcy5wcmVmaXhDc3MoJ2xheW91dC1tYXgtd2lkdGgtODAwJykpO1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3MoX3RoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTEyMDAnKSk7XHJcbiAgICAgICAgICAgIGlmICh3aWR0aCA8PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhfdGhpcy5wcmVmaXhDc3MoJ2xheW91dC1tYXgtd2lkdGgtNDAwJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHdpZHRoIDw9IDYwMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKF90aGlzLnByZWZpeENzcygnbGF5b3V0LW1heC13aWR0aC02MDAnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAod2lkdGggPD0gODAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoX3RoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTgwMCcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh3aWR0aCA8PSAxMjAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoX3RoaXMucHJlZml4Q3NzKCdsYXlvdXQtbWF4LXdpZHRoLTEyMDAnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BMQVlFUl9SRVNJWkUsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgc3RyaW5ncyAod2l0aCBcInB4XCIgc3VmZml4KSB0byBpbnRzXHJcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IE1hdGgucm91bmQoTnVtYmVyKGUud2lkdGguc3Vic3RyaW5nKDAsIGUud2lkdGgubGVuZ3RoIC0gMikpKTtcclxuICAgICAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoTnVtYmVyKGUuaGVpZ2h0LnN1YnN0cmluZygwLCBlLmhlaWdodC5sZW5ndGggLSAyKSkpO1xyXG4gICAgICAgICAgICB1cGRhdGVMYXlvdXRTaXplQ2xhc3Nlcyh3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBJbml0IGxheW91dCBzdGF0ZVxyXG4gICAgICAgIHVwZGF0ZUxheW91dFNpemVDbGFzc2VzKG5ldyBkb21fMS5ET00ocGxheWVyLmdldEZpZ3VyZSgpKS53aWR0aCgpLCBuZXcgZG9tXzEuRE9NKHBsYXllci5nZXRGaWd1cmUoKSkuaGVpZ2h0KCkpO1xyXG4gICAgfTtcclxuICAgIFVJQ29udGFpbmVyLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVsZWFzZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMudWlIaWRlVGltZW91dC5jbGVhcigpO1xyXG4gICAgfTtcclxuICAgIFVJQ29udGFpbmVyLnByb3RvdHlwZS50b0RvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IF9zdXBlci5wcm90b3R5cGUudG9Eb21FbGVtZW50LmNhbGwodGhpcyk7XHJcbiAgICAgICAgLy8gRGV0ZWN0IGZsZXhib3ggc3VwcG9ydCAobm90IHN1cHBvcnRlZCBpbiBJRTkpXHJcbiAgICAgICAgaWYgKGRvY3VtZW50ICYmIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykuc3R5bGUuZmxleCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKCdmbGV4Ym94JykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKHRoaXMucHJlZml4Q3NzKCduby1mbGV4Ym94JykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBVSUNvbnRhaW5lcjtcclxufShjb250YWluZXJfMS5Db250YWluZXIpKTtcclxuVUlDb250YWluZXIuU1RBVEVfUFJFRklYID0gJ3BsYXllci1zdGF0ZS0nO1xyXG5VSUNvbnRhaW5lci5GVUxMU0NSRUVOID0gJ2Z1bGxzY3JlZW4nO1xyXG5VSUNvbnRhaW5lci5CVUZGRVJJTkcgPSAnYnVmZmVyaW5nJztcclxuVUlDb250YWluZXIuUkVNT1RFX0NPTlRST0wgPSAncmVtb3RlLWNvbnRyb2wnO1xyXG5VSUNvbnRhaW5lci5DT05UUk9MU19TSE9XTiA9ICdjb250cm9scy1zaG93bic7XHJcblVJQ29udGFpbmVyLkNPTlRST0xTX0hJRERFTiA9ICdjb250cm9scy1oaWRkZW4nO1xyXG5leHBvcnRzLlVJQ29udGFpbmVyID0gVUlDb250YWluZXI7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy91aWNvbnRhaW5lci50c1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEJyb3dzZXJVdGlscztcclxuKGZ1bmN0aW9uIChCcm93c2VyVXRpbHMpIHtcclxuICAgIC8vIGlzTW9iaWxlIG9ubHkgbmVlZHMgdG8gYmUgZXZhbHVhdGVkIG9uY2UgKGl0IGNhbm5vdCBjaGFuZ2UgZHVyaW5nIGEgYnJvd3NlciBzZXNzaW9uKVxyXG4gICAgLy8gTW9iaWxlIGRldGVjdGlvbiBhY2NvcmRpbmcgdG8gTW96aWxsYSByZWNvbW1lbmRhdGlvbjogXCJJbiBzdW1tYXJ5LCB3ZSByZWNvbW1lbmQgbG9va2luZyBmb3IgdGhlIHN0cmluZyDigJxNb2Jp4oCdXHJcbiAgICAvLyBhbnl3aGVyZSBpbiB0aGUgVXNlciBBZ2VudCB0byBkZXRlY3QgYSBtb2JpbGUgZGV2aWNlLlwiXHJcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0Jyb3dzZXJfZGV0ZWN0aW9uX3VzaW5nX3RoZV91c2VyX2FnZW50XHJcbiAgICBCcm93c2VyVXRpbHMuaXNNb2JpbGUgPSBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAvTW9iaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgIEJyb3dzZXJVdGlscy5pc0Nocm9tZSA9IG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIC9DaHJvbWUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICBCcm93c2VyVXRpbHMuaXNBbmRyb2lkID0gbmF2aWdhdG9yICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgL0FuZHJvaWQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbn0pKEJyb3dzZXJVdGlscyA9IGV4cG9ydHMuQnJvd3NlclV0aWxzIHx8IChleHBvcnRzLkJyb3dzZXJVdGlscyA9IHt9KSk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvYnJvd3NlcnV0aWxzLnRzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vdG9nZ2xlYnV0dG9uXCIpO1xyXG52YXIgcGxheWVydXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9wbGF5ZXJ1dGlsc1wiKTtcclxuLyoqXHJcbiAqIEEgYnV0dG9uIHRoYXQgdG9nZ2xlcyBiZXR3ZWVuIHBsYXliYWNrIGFuZCBwYXVzZS5cclxuICovXHJcbnZhciBQbGF5YmFja1RvZ2dsZUJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUGxheWJhY2tUb2dnbGVCdXR0b24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQbGF5YmFja1RvZ2dsZUJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktcGxheWJhY2t0b2dnbGVidXR0b24nLFxyXG4gICAgICAgICAgICB0ZXh0OiAnUGxheS9QYXVzZScsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBQbGF5YmFja1RvZ2dsZUJ1dHRvbi5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyLCBoYW5kbGVDbGlja0V2ZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoaGFuZGxlQ2xpY2tFdmVudCA9PT0gdm9pZCAwKSB7IGhhbmRsZUNsaWNrRXZlbnQgPSB0cnVlOyB9XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIGlzU2Vla2luZyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEhhbmRsZXIgdG8gdXBkYXRlIGJ1dHRvbiBzdGF0ZSBiYXNlZCBvbiBwbGF5ZXIgc3RhdGVcclxuICAgICAgICB2YXIgcGxheWJhY2tTdGF0ZUhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIFVJIGlzIGN1cnJlbnRseSBzZWVraW5nLCBwbGF5YmFjayBpcyB0ZW1wb3JhcmlseSBzdG9wcGVkIGJ1dCB0aGUgYnV0dG9ucyBzaG91bGRcclxuICAgICAgICAgICAgLy8gbm90IHJlZmxlY3QgdGhhdCBhbmQgc3RheSBhcy1pcyAoZS5nIGluZGljYXRlIHBsYXliYWNrIHdoaWxlIHNlZWtpbmcpLlxyXG4gICAgICAgICAgICBpZiAoaXNTZWVraW5nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc1BsYXlpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9mZigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBDYWxsIGhhbmRsZXIgdXBvbiB0aGVzZSBldmVudHNcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZLCBwbGF5YmFja1N0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUEFVU0VELCBwbGF5YmFja1N0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgaWYgKHBsYXllci5FVkVOVC5PTl9QTEFZSU5HKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmNlIHBsYXllciA3LjMuIE5vdCByZWFsbHkgbmVjZXNzYXJ5IGJ1dCBqdXN0IGluIGNhc2Ugd2UgZXZlciBtaXNzIHRoZSBPTl9QTEFZIGV2ZW50LlxyXG4gICAgICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZSU5HLCBwbGF5YmFja1N0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFmdGVyIHVubG9hZGluZyArIGxvYWRpbmcgYSBuZXcgc291cmNlLCB0aGUgcGxheWVyIG1pZ2h0IGJlIGluIGEgZGlmZmVyZW50IHBsYXlpbmcgc3RhdGUgKGZyb20gcGxheWluZyBpbnRvIHN0b3BwZWQpXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU09VUkNFX0xPQURFRCwgcGxheWJhY2tTdGF0ZUhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NPVVJDRV9VTkxPQURFRCwgcGxheWJhY2tTdGF0ZUhhbmRsZXIpO1xyXG4gICAgICAgIC8vIHdoZW4gcGxheWJhY2sgZmluaXNoZXMsIHBsYXllciB0dXJucyB0byBwYXVzZWQgbW9kZVxyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BMQVlCQUNLX0ZJTklTSEVELCBwbGF5YmFja1N0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9TVEFSVEVELCBwbGF5YmFja1N0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9QTEFZSU5HLCBwbGF5YmFja1N0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9QQVVTRUQsIHBsYXliYWNrU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1BMQVlCQUNLX0ZJTklTSEVELCBwbGF5YmFja1N0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgLy8gV2hlbiBhIHBsYXliYWNrIGF0dGVtcHQgaXMgcmVqZWN0ZWQgd2l0aCB3YXJuaW5nIDUwMDgsIHdlIHN3aXRjaCB0aGUgYnV0dG9uIHN0YXRlIGJhY2sgdG8gb2ZmXHJcbiAgICAgICAgLy8gVGhpcyBpcyByZXF1aXJlZCBmb3IgYmxvY2tlZCBhdXRvcGxheSwgYmVjYXVzZSB0aGVyZSBpcyBubyBPTl9QQVVTRUQgZXZlbnQgaW4gc3VjaCBjYXNlXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fV0FSTklORywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5jb2RlID09PSA1MDA4KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vZmYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIERldGVjdCBhYnNlbmNlIG9mIHRpbWVzaGlmdGluZyBvbiBsaXZlIHN0cmVhbXMgYW5kIGFkZCB0YWdnaW5nIGNsYXNzIHRvIGNvbnZlcnQgYnV0dG9uIGljb25zIHRvIHBsYXkvc3RvcFxyXG4gICAgICAgIHZhciB0aW1lU2hpZnREZXRlY3RvciA9IG5ldyBwbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLlRpbWVTaGlmdEF2YWlsYWJpbGl0eURldGVjdG9yKHBsYXllcik7XHJcbiAgICAgICAgdGltZVNoaWZ0RGV0ZWN0b3Iub25UaW1lU2hpZnRBdmFpbGFiaWxpdHlDaGFuZ2VkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgICAgIGlmICghYXJncy50aW1lU2hpZnRBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyhfdGhpcy5wcmVmaXhDc3MoUGxheWJhY2tUb2dnbGVCdXR0b24uQ0xBU1NfU1RPUFRPR0dMRSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcyhQbGF5YmFja1RvZ2dsZUJ1dHRvbi5DTEFTU19TVE9QVE9HR0xFKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aW1lU2hpZnREZXRlY3Rvci5kZXRlY3QoKTsgLy8gSW5pdGlhbCBkZXRlY3Rpb25cclxuICAgICAgICBpZiAoaGFuZGxlQ2xpY2tFdmVudCkge1xyXG4gICAgICAgICAgICAvLyBDb250cm9sIHBsYXllciBieSBidXR0b24gZXZlbnRzXHJcbiAgICAgICAgICAgIC8vIFdoZW4gYSBidXR0b24gZXZlbnQgdHJpZ2dlcnMgYSBwbGF5ZXIgQVBJIGNhbGwsIGV2ZW50cyBhcmUgZmlyZWQgd2hpY2ggaW4gdHVybiBjYWxsIHRoZSBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgICAgIC8vIGFib3ZlIHRoYXQgdXBkYXRlZCB0aGUgYnV0dG9uIHN0YXRlLlxyXG4gICAgICAgICAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNQbGF5aW5nKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGF1c2UoJ3VpJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGxheSgndWknKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRyYWNrIFVJIHNlZWtpbmcgc3RhdHVzXHJcbiAgICAgICAgdWltYW5hZ2VyLm9uU2Vlay5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpc1NlZWtpbmcgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVpbWFuYWdlci5vblNlZWtlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpc1NlZWtpbmcgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTdGFydHVwIGluaXRcclxuICAgICAgICBwbGF5YmFja1N0YXRlSGFuZGxlcihudWxsKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGxheWJhY2tUb2dnbGVCdXR0b247XHJcbn0odG9nZ2xlYnV0dG9uXzEuVG9nZ2xlQnV0dG9uKSk7XHJcblBsYXliYWNrVG9nZ2xlQnV0dG9uLkNMQVNTX1NUT1BUT0dHTEUgPSAnc3RvcHRvZ2dsZSc7XHJcbmV4cG9ydHMuUGxheWJhY2tUb2dnbGVCdXR0b24gPSBQbGF5YmFja1RvZ2dsZUJ1dHRvbjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3BsYXliYWNrdG9nZ2xlYnV0dG9uLnRzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vdG9nZ2xlYnV0dG9uXCIpO1xyXG4vKipcclxuICogQSBidXR0b24gdGhhdCB0b2dnbGVzIGF1ZGlvIG11dGluZy5cclxuICovXHJcbnZhciBWb2x1bWVUb2dnbGVCdXR0b24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFZvbHVtZVRvZ2dsZUJ1dHRvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFZvbHVtZVRvZ2dsZUJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgdmFyIGRlZmF1bHRDb25maWcgPSB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktdm9sdW1ldG9nZ2xlYnV0dG9uJyxcclxuICAgICAgICAgICAgdGV4dDogJ1ZvbHVtZS9NdXRlJyxcclxuICAgICAgICAgICAgb25DbGFzczogJ211dGVkJyxcclxuICAgICAgICAgICAgb2ZmQ2xhc3M6ICd1bm11dGVkJyxcclxuICAgICAgICB9O1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywgZGVmYXVsdENvbmZpZywgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBWb2x1bWVUb2dnbGVCdXR0b24ucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIG11dGVTdGF0ZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNNdXRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vbigpO1xyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgdm9sdW1lIGlzIHVubXV0ZWQgYW5kIHRoZSB2b2x1bWUgbGV2ZWwgaXMgdmVlZWVyeSBsb3csIHdlIGluY3JlYXNlIGl0IHRvIDEwJS4gVGhpcyBlc3BlY2lhbGx5IGhlbHBzXHJcbiAgICAgICAgICAgICAgICAvLyBpbiB0aGUgY2FzZSB3aGVuIHRoZSB2b2x1bWUgaXMgZmlyc3QgdHVybmVkIGRvd24gdG8gMCBhbmQgdGhlbiB0aGUgcGxheWVyIGlzIG11dGVkOyB3aGVuIHRoZSBwbGF5ZXIgZ2V0c1xyXG4gICAgICAgICAgICAgICAgLy8gdW5tdXRlZCBpdCB3b3VsZCBzd2l0Y2ggdG8gdm9sdW1lIGxldmVsIDAgd2hpY2ggd291bGQgc2VlbSBsaWtlIHVubXV0aW5nIGRpZCBub3Qgd29yaywgYW5kIGluY3JlYXNpbmcgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBsZXZlbCBhIGJpdCBoZWxwcyB0byBvdmVyY29tZSB0aGlzIGlzc3VlLlxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5nZXRWb2x1bWUoKSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnNldFZvbHVtZSgxMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vZmYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHZvbHVtZUxldmVsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZvbHVtZUxldmVsVGVucyA9IE1hdGguY2VpbChwbGF5ZXIuZ2V0Vm9sdW1lKCkgLyAxMCk7XHJcbiAgICAgICAgICAgIF90aGlzLmdldERvbUVsZW1lbnQoKS5kYXRhKF90aGlzLnByZWZpeENzcygndm9sdW1lLWxldmVsLXRlbnMnKSwgU3RyaW5nKHZvbHVtZUxldmVsVGVucykpO1xyXG4gICAgICAgICAgICAvLyBXaGVuIHRoZSB2b2x1bWUgaXMgdHVybmVkIGRvd24gdG8gemVybywgc3dpdGNoIGludG8gdGhlIG11dGUgc3RhdGUgb2YgdGhlIGJ1dHRvbi4gVGhpcyBhdm9pZHMgdGhlIHVzYWJpbGl0eVxyXG4gICAgICAgICAgICAvLyBpc3N1ZSB3aGVyZSB0aGUgdm9sdW1lIGlzIHR1cm5lZCBkb3duIHRvIHplcm8sIHRoZSBidXR0b24gc2hvd3MgdGhlIG11dGVkIGljb24gYnV0IGlzIG5vdCByZWFsbHkgdW5tdXRlZCwgYW5kXHJcbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IGJ1dHRvbiBwcmVzcyB3b3VsZCBzd2l0Y2ggaXQgaW50byB0aGUgbXV0ZSBzdGF0ZSwgdmlzdWFsbHkgc3RheWluZyB0aGUgc2FtZSB3aGljaCB3b3VsZCBzZWVtIGxpa2VcclxuICAgICAgICAgICAgLy8gYW4gZXhwZWN0ZWQgdW5tdXRlIGRpZCBub3Qgd29yay5cclxuICAgICAgICAgICAgaWYgKHZvbHVtZUxldmVsVGVucyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub2ZmKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX01VVEVELCBtdXRlU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9VTk1VVEVELCBtdXRlU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9WT0xVTUVfQ0hBTkdFRCwgdm9sdW1lTGV2ZWxIYW5kbGVyKTtcclxuICAgICAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc011dGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci51bm11dGUoJ3VpLXZvbHVtZXRvZ2dsZWJ1dHRvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLm11dGUoJ3VpLXZvbHVtZXRvZ2dsZWJ1dHRvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gU3RhcnR1cCBpbml0XHJcbiAgICAgICAgbXV0ZVN0YXRlSGFuZGxlcigpO1xyXG4gICAgICAgIHZvbHVtZUxldmVsSGFuZGxlcigpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBWb2x1bWVUb2dnbGVCdXR0b247XHJcbn0odG9nZ2xlYnV0dG9uXzEuVG9nZ2xlQnV0dG9uKSk7XHJcbmV4cG9ydHMuVm9sdW1lVG9nZ2xlQnV0dG9uID0gVm9sdW1lVG9nZ2xlQnV0dG9uO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvdm9sdW1ldG9nZ2xlYnV0dG9uLnRzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbXBvbmVudF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50XCIpO1xyXG52YXIgZG9tXzEgPSByZXF1aXJlKFwiLi4vZG9tXCIpO1xyXG52YXIgZXZlbnRkaXNwYXRjaGVyXzEgPSByZXF1aXJlKFwiLi4vZXZlbnRkaXNwYXRjaGVyXCIpO1xyXG52YXIgdGltZW91dF8xID0gcmVxdWlyZShcIi4uL3RpbWVvdXRcIik7XHJcbnZhciBwbGF5ZXJ1dGlsc18xID0gcmVxdWlyZShcIi4uL3BsYXllcnV0aWxzXCIpO1xyXG4vKipcclxuICogQSBzZWVrIGJhciB0byBzZWVrIHdpdGhpbiB0aGUgcGxheWVyJ3MgbWVkaWEuIEl0IGRpc3BsYXlzIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uLCBhbW91bnQgb2YgYnVmZmVkIGRhdGEsIHNlZWtcclxuICogdGFyZ2V0LCBhbmQga2VlcHMgc3RhdHVzIGFib3V0IGFuIG9uZ29pbmcgc2Vlay5cclxuICpcclxuICogVGhlIHNlZWsgYmFyIGRpc3BsYXlzIGRpZmZlcmVudCAnYmFycyc6XHJcbiAqICAtIHRoZSBwbGF5YmFjayBwb3NpdGlvbiwgaS5lLiB0aGUgcG9zaXRpb24gaW4gdGhlIG1lZGlhIGF0IHdoaWNoIHRoZSBwbGF5ZXIgY3VycmVudCBwbGF5YmFjayBwb2ludGVyIGlzIHBvc2l0aW9uZWRcclxuICogIC0gdGhlIGJ1ZmZlciBwb3NpdGlvbiwgd2hpY2ggdXN1YWxseSBpcyB0aGUgcGxheWJhY2sgcG9zaXRpb24gcGx1cyB0aGUgdGltZSBzcGFuIHRoYXQgaXMgYWxyZWFkeSBidWZmZXJlZCBhaGVhZFxyXG4gKiAgLSB0aGUgc2VlayBwb3NpdGlvbiwgdXNlZCB0byBwcmV2aWV3IHRvIHdoZXJlIGluIHRoZSB0aW1lbGluZSBhIHNlZWsgd2lsbCBqdW1wIHRvXHJcbiAqL1xyXG52YXIgU2Vla0JhciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU2Vla0JhciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNlZWtCYXIoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJ1ZmZlciBvZiB0aGUgdGhlIGN1cnJlbnQgcGxheWJhY2sgcG9zaXRpb24uIFRoZSBwb3NpdGlvbiBtdXN0IGJlIGJ1ZmZlcmVkIGluIGNhc2UgdGhlIGVsZW1lbnRcclxuICAgICAgICAgKiBuZWVkcyB0byBiZSByZWZyZXNoZWQgd2l0aCB7QGxpbmsgI3JlZnJlc2hQbGF5YmFja1Bvc2l0aW9ufS5cclxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIF90aGlzLnBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlID0gMDtcclxuICAgICAgICAvLyBodHRwczovL2hhY2tzLm1vemlsbGEub3JnLzIwMTMvMDQvZGV0ZWN0aW5nLXRvdWNoLWl0cy10aGUtd2h5LW5vdC10aGUtaG93L1xyXG4gICAgICAgIF90aGlzLnRvdWNoU3VwcG9ydGVkID0gKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyk7XHJcbiAgICAgICAgX3RoaXMuc2Vla0JhckV2ZW50cyA9IHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZpcmVkIHdoZW4gYSBzY3J1YmJpbmcgc2VlayBvcGVyYXRpb24gaXMgc3RhcnRlZC5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIG9uU2VlazogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRmlyZWQgZHVyaW5nIGEgc2NydWJiaW5nIHNlZWsgdG8gaW5kaWNhdGUgdGhhdCB0aGUgc2VlayBwcmV2aWV3IChpLmUuIHRoZSB2aWRlbyBmcmFtZSkgc2hvdWxkIGJlIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBvblNlZWtQcmV2aWV3OiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGaXJlZCB3aGVuIGEgc2NydWJiaW5nIHNlZWsgaGFzIGZpbmlzaGVkIG9yIHdoZW4gYSBkaXJlY3Qgc2VlayBpcyBpc3N1ZWQuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBvblNlZWtlZDogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktc2Vla2JhcicsXHJcbiAgICAgICAgICAgIHZlcnRpY2FsOiBmYWxzZSxcclxuICAgICAgICAgICAgc21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZUludGVydmFsTXM6IDUwLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgX3RoaXMubGFiZWwgPSBfdGhpcy5jb25maWcubGFiZWw7XHJcbiAgICAgICAgX3RoaXMudGltZWxpbmVNYXJrZXJzID0gW107XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmluaXRpYWxpemUuY2FsbCh0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5oYXNMYWJlbCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0TGFiZWwoKS5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNlZWtCYXIucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlciwgY29uZmlndXJlU2Vlaykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGNvbmZpZ3VyZVNlZWsgPT09IHZvaWQgMCkgeyBjb25maWd1cmVTZWVrID0gdHJ1ZTsgfVxyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIC8vIEFwcGx5IHNjYWxpbmcgdHJhbnNmb3JtIHRvIHRoZSBiYWNrZHJvcCBiYXIgdG8gaGF2ZSBhbGwgYmFycyByZW5kZXJlZCBzaW1pbGFybHlcclxuICAgICAgICAvLyAodGhlIGNhbGwgbXVzdCBiZSB1cCBoZXJlIHRvIGJlIGV4ZWN1dGVkIGZvciB0aGUgdm9sdW1lIHNsaWRlciBhcyB3ZWxsKVxyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24odGhpcy5zZWVrQmFyQmFja2Ryb3AsIDEwMCk7XHJcbiAgICAgICAgaWYgKCFjb25maWd1cmVTZWVrKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBjb25maWd1cmVTZWVrIGZsYWcgY2FuIGJlIHVzZWQgYnkgc3ViY2xhc3NlcyB0byBkaXNhYmxlIGNvbmZpZ3VyYXRpb24gYXMgc2VlayBiYXIuIEUuZy4gdGhlIHZvbHVtZVxyXG4gICAgICAgICAgICAvLyBzbGlkZXIgaXMgcmV1c2luZyB0aGlzIGNvbXBvbmVudCBidXQgYWRkcyBpdHMgb3duIGZ1bmN0aW9uYWxpdHksIGFuZCBkb2VzIG5vdCBuZWVkIHRoZSBzZWVrIGZ1bmN0aW9uYWxpdHkuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYWN0dWFsbHkgYSBoYWNrLCB0aGUgcHJvcGVyIHNvbHV0aW9uIHdvdWxkIGJlIGZvciBib3RoIHNlZWsgYmFyIGFuZCB2b2x1bWUgc2xpZGVycyB0byBleHRlbmRcclxuICAgICAgICAgICAgLy8gYSBjb21tb24gYmFzZSBzbGlkZXIgY29tcG9uZW50IGFuZCBpbXBsZW1lbnQgdGhlaXIgZnVuY3Rpb25hbGl0eSB0aGVyZS5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGlzU2Vla2luZyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBwbGF5YmFjayBhbmQgYnVmZmVyIHBvc2l0aW9uc1xyXG4gICAgICAgIHZhciBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCwgZm9yY2VVcGRhdGUpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50ID09PSB2b2lkIDApIHsgZXZlbnQgPSBudWxsOyB9XHJcbiAgICAgICAgICAgIGlmIChmb3JjZVVwZGF0ZSA9PT0gdm9pZCAwKSB7IGZvcmNlVXBkYXRlID0gZmFsc2U7IH1cclxuICAgICAgICAgICAgaWYgKGlzU2Vla2luZykge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgY2F1Z2h0IGEgc2VlayBwcmV2aWV3IHNlZWssIGRvIG5vdCB1cGRhdGUgdGhlIHNlZWtiYXJcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzTGl2ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmdldE1heFRpbWVTaGlmdCgpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjYXNlIG11c3QgYmUgZXhwbGljaXRseSBoYW5kbGVkIHRvIGF2b2lkIGRpdmlzaW9uIGJ5IHplcm9cclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRQbGF5YmFja1Bvc2l0aW9uKDEwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWJhY2tQb3NpdGlvblBlcmNlbnRhZ2UgPSAxMDAgLSAoMTAwIC8gcGxheWVyLmdldE1heFRpbWVTaGlmdCgpICogcGxheWVyLmdldFRpbWVTaGlmdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRQbGF5YmFja1Bvc2l0aW9uKHBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBzaG93IGZ1bGwgYnVmZmVyIGZvciBsaXZlIHN0cmVhbXNcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldEJ1ZmZlclBvc2l0aW9uKDEwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGxheWJhY2tQb3NpdGlvblBlcmNlbnRhZ2UgPSAxMDAgLyBwbGF5ZXIuZ2V0RHVyYXRpb24oKSAqIHBsYXllci5nZXRDdXJyZW50VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZpZGVvQnVmZmVyTGVuZ3RoID0gcGxheWVyLmdldFZpZGVvQnVmZmVyTGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXVkaW9CdWZmZXJMZW5ndGggPSBwbGF5ZXIuZ2V0QXVkaW9CdWZmZXJMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgYnVmZmVyIGxlbmd0aCB3aGljaCBpcyB0aGUgc21hbGxlciBsZW5ndGggb2YgdGhlIGF1ZGlvIGFuZCB2aWRlbyBidWZmZXJzLiBJZiBvbmUgb2YgdGhlc2VcclxuICAgICAgICAgICAgICAgIC8vIGJ1ZmZlcnMgaXMgbm90IGF2YWlsYWJsZSwgd2Ugc2V0IGl0J3MgdmFsdWUgdG8gTUFYX1ZBTFVFIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBvdGhlciByZWFsIHZhbHVlIGlzIHRha2VuXHJcbiAgICAgICAgICAgICAgICAvLyBhcyB0aGUgYnVmZmVyIGxlbmd0aC5cclxuICAgICAgICAgICAgICAgIHZhciBidWZmZXJMZW5ndGggPSBNYXRoLm1pbih2aWRlb0J1ZmZlckxlbmd0aCAhPSBudWxsID8gdmlkZW9CdWZmZXJMZW5ndGggOiBOdW1iZXIuTUFYX1ZBTFVFLCBhdWRpb0J1ZmZlckxlbmd0aCAhPSBudWxsID8gYXVkaW9CdWZmZXJMZW5ndGggOiBOdW1iZXIuTUFYX1ZBTFVFKTtcclxuICAgICAgICAgICAgICAgIC8vIElmIGJvdGggYnVmZmVyIGxlbmd0aHMgYXJlIG1pc3NpbmcsIHdlIHNldCB0aGUgYnVmZmVyIGxlbmd0aCB0byB6ZXJvXHJcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyTGVuZ3RoID09PSBOdW1iZXIuTUFYX1ZBTFVFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBidWZmZXJQZXJjZW50YWdlID0gMTAwIC8gcGxheWVyLmdldER1cmF0aW9uKCkgKiBidWZmZXJMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcGxheWJhY2sgcG9zaXRpb24gb25seSBpbiBwYXVzZWQgc3RhdGUgb3IgaW4gdGhlIGluaXRpYWwgc3RhcnR1cCBzdGF0ZSB3aGVyZSBwbGF5ZXIgaXMgbmVpdGhlclxyXG4gICAgICAgICAgICAgICAgLy8gcGF1c2VkIG5vciBwbGF5aW5nLiBQbGF5YmFjayB1cGRhdGVzIGFyZSBoYW5kbGVkIGluIHRoZSBUaW1lb3V0IGJlbG93LlxyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlSW50ZXJ2YWxNcyA9PT0gU2Vla0Jhci5TTU9PVEhfUExBWUJBQ0tfUE9TSVRJT05fVVBEQVRFX0RJU0FCTEVEXHJcbiAgICAgICAgICAgICAgICAgICAgfHwgZm9yY2VVcGRhdGUgfHwgcGxheWVyLmlzUGF1c2VkKCkgfHwgKHBsYXllci5pc1BhdXNlZCgpID09PSBwbGF5ZXIuaXNQbGF5aW5nKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0UGxheWJhY2tQb3NpdGlvbihwbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRCdWZmZXJQb3NpdGlvbihwbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSArIGJ1ZmZlclBlcmNlbnRhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBVcGRhdGUgc2Vla2JhciB1cG9uIHRoZXNlIGV2ZW50c1xyXG4gICAgICAgIC8vIGluaXQgcGxheWJhY2sgcG9zaXRpb24gd2hlbiB0aGUgcGxheWVyIGlzIHJlYWR5XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUkVBRFksIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKTtcclxuICAgICAgICAvLyB1cGRhdGUgcGxheWJhY2sgcG9zaXRpb24gd2hlbiBpdCBjaGFuZ2VzXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVElNRV9DSEFOR0VELCBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlcik7XHJcbiAgICAgICAgLy8gdXBkYXRlIGJ1ZmZlcmxldmVsIHdoZW4gYnVmZmVyaW5nIGlzIGNvbXBsZXRlXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU1RBTExfRU5ERUQsIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKTtcclxuICAgICAgICAvLyB1cGRhdGUgcGxheWJhY2sgcG9zaXRpb24gd2hlbiBhIHNlZWsgaGFzIGZpbmlzaGVkXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU0VFS0VELCBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlcik7XHJcbiAgICAgICAgLy8gdXBkYXRlIHBsYXliYWNrIHBvc2l0aW9uIHdoZW4gYSB0aW1lc2hpZnQgaGFzIGZpbmlzaGVkXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVElNRV9TSElGVEVELCBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlcik7XHJcbiAgICAgICAgLy8gdXBkYXRlIGJ1ZmZlcmxldmVsIHdoZW4gYSBzZWdtZW50IGhhcyBiZWVuIGRvd25sb2FkZWRcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TRUdNRU5UX1JFUVVFU1RfRklOSVNIRUQsIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKTtcclxuICAgICAgICAvLyB1cGRhdGUgcGxheWJhY2sgcG9zaXRpb24gb2YgQ2FzdCBwbGF5YmFja1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfVElNRV9VUERBVEVELCBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVMaXZlUGF1c2VkVGltZXNoaWZ0VXBkYXRlcihwbGF5ZXIsIHVpbWFuYWdlciwgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIpO1xyXG4gICAgICAgIC8vIFNlZWsgaGFuZGxpbmdcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TRUVLLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFNlZWtpbmcodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU0VFS0VELCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFNlZWtpbmcoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1RJTUVfU0hJRlQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2V0U2Vla2luZyh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9USU1FX1NISUZURUQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2V0U2Vla2luZyhmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHNlZWsgPSBmdW5jdGlvbiAocGVyY2VudGFnZSkge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzTGl2ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIudGltZVNoaWZ0KHBsYXllci5nZXRNYXhUaW1lU2hpZnQoKSAtIChwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgKiAocGVyY2VudGFnZSAvIDEwMCkpLCAndWknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5zZWVrKHBsYXllci5nZXREdXJhdGlvbigpICogKHBlcmNlbnRhZ2UgLyAxMDApLCAndWknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vblNlZWsuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIpIHtcclxuICAgICAgICAgICAgaXNTZWVraW5nID0gdHJ1ZTsgLy8gdHJhY2sgc2Vla2luZyBzdGF0dXMgc28gd2UgY2FuIGNhdGNoIGV2ZW50cyBmcm9tIHNlZWsgcHJldmlldyBzZWVrc1xyXG4gICAgICAgICAgICAvLyBOb3RpZnkgVUkgbWFuYWdlciBvZiBzdGFydGVkIHNlZWtcclxuICAgICAgICAgICAgdWltYW5hZ2VyLm9uU2Vlay5kaXNwYXRjaChzZW5kZXIpO1xyXG4gICAgICAgICAgICAvLyBTYXZlIGN1cnJlbnQgcGxheWJhY2sgc3RhdGVcclxuICAgICAgICAgICAgaXNQbGF5aW5nID0gcGxheWVyLmlzUGxheWluZygpO1xyXG4gICAgICAgICAgICAvLyBQYXVzZSBwbGF5YmFjayB3aGlsZSBzZWVraW5nXHJcbiAgICAgICAgICAgIGlmIChpc1BsYXlpbmcpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5wYXVzZSgndWknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMub25TZWVrUHJldmlldy5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgICAgICAvLyBOb3RpZnkgVUkgbWFuYWdlciBvZiBzZWVrIHByZXZpZXdcclxuICAgICAgICAgICAgdWltYW5hZ2VyLm9uU2Vla1ByZXZpZXcuZGlzcGF0Y2goc2VuZGVyLCBhcmdzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uU2Vla1ByZXZpZXcuc3Vic2NyaWJlUmF0ZUxpbWl0ZWQoZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgICAgICAvLyBSYXRlLWxpbWl0ZWQgc2NydWJiaW5nIHNlZWtcclxuICAgICAgICAgICAgaWYgKGFyZ3Muc2NydWJiaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBzZWVrKGFyZ3MucG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICB0aGlzLm9uU2Vla2VkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBwZXJjZW50YWdlKSB7XHJcbiAgICAgICAgICAgIGlzU2Vla2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBEbyB0aGUgc2Vla1xyXG4gICAgICAgICAgICBzZWVrKHBlcmNlbnRhZ2UpO1xyXG4gICAgICAgICAgICAvLyBDb250aW51ZSBwbGF5YmFjayBhZnRlciBzZWVrIGlmIHBsYXllciB3YXMgcGxheWluZyB3aGVuIHNlZWsgc3RhcnRlZFxyXG4gICAgICAgICAgICBpZiAoaXNQbGF5aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxheSgndWknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBOb3RpZnkgVUkgbWFuYWdlciBvZiBmaW5pc2hlZCBzZWVrXHJcbiAgICAgICAgICAgIHVpbWFuYWdlci5vblNlZWtlZC5kaXNwYXRjaChzZW5kZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLmhhc0xhYmVsKCkpIHtcclxuICAgICAgICAgICAgLy8gQ29uZmlndXJlIGEgc2Vla2JhciBsYWJlbCB0aGF0IGlzIGludGVybmFsIHRvIHRoZSBzZWVrYmFyKVxyXG4gICAgICAgICAgICB0aGlzLmdldExhYmVsKCkuY29uZmlndXJlKHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSGlkZSBzZWVrYmFyIGZvciBsaXZlIHNvdXJjZXMgd2l0aG91dCB0aW1lc2hpZnRcclxuICAgICAgICB2YXIgaXNMaXZlID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGhhc1RpbWVTaGlmdCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBzd2l0Y2hWaXNpYmlsaXR5ID0gZnVuY3Rpb24gKGlzTGl2ZSwgaGFzVGltZVNoaWZ0KSB7XHJcbiAgICAgICAgICAgIGlmIChpc0xpdmUgJiYgIWhhc1RpbWVTaGlmdCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBsYXliYWNrUG9zaXRpb25IYW5kbGVyKG51bGwsIHRydWUpO1xyXG4gICAgICAgICAgICBfdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGxpdmVTdHJlYW1EZXRlY3RvciA9IG5ldyBwbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLkxpdmVTdHJlYW1EZXRlY3RvcihwbGF5ZXIpO1xyXG4gICAgICAgIGxpdmVTdHJlYW1EZXRlY3Rvci5vbkxpdmVDaGFuZ2VkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgICAgIGlzTGl2ZSA9IGFyZ3MubGl2ZTtcclxuICAgICAgICAgICAgc3dpdGNoVmlzaWJpbGl0eShpc0xpdmUsIGhhc1RpbWVTaGlmdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHRpbWVTaGlmdERldGVjdG9yID0gbmV3IHBsYXllcnV0aWxzXzEuUGxheWVyVXRpbHMuVGltZVNoaWZ0QXZhaWxhYmlsaXR5RGV0ZWN0b3IocGxheWVyKTtcclxuICAgICAgICB0aW1lU2hpZnREZXRlY3Rvci5vblRpbWVTaGlmdEF2YWlsYWJpbGl0eUNoYW5nZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIGFyZ3MpIHtcclxuICAgICAgICAgICAgaGFzVGltZVNoaWZ0ID0gYXJncy50aW1lU2hpZnRBdmFpbGFibGU7XHJcbiAgICAgICAgICAgIHN3aXRjaFZpc2liaWxpdHkoaXNMaXZlLCBoYXNUaW1lU2hpZnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEluaXRpYWwgZGV0ZWN0aW9uXHJcbiAgICAgICAgbGl2ZVN0cmVhbURldGVjdG9yLmRldGVjdCgpO1xyXG4gICAgICAgIHRpbWVTaGlmdERldGVjdG9yLmRldGVjdCgpO1xyXG4gICAgICAgIC8vIFJlZnJlc2ggdGhlIHBsYXliYWNrIHBvc2l0aW9uIHdoZW4gdGhlIHBsYXllciByZXNpemVkIG9yIHRoZSBVSSBpcyBjb25maWd1cmVkLiBUaGUgcGxheWJhY2sgcG9zaXRpb24gbWFya2VyXHJcbiAgICAgICAgLy8gaXMgcG9zaXRpb25lZCBhYnNvbHV0ZWx5IGFuZCBtdXN0IHRoZXJlZm9yZSBiZSB1cGRhdGVkIHdoZW4gdGhlIHNpemUgb2YgdGhlIHNlZWtiYXIgY2hhbmdlcy5cclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZRVJfUkVTSVpFLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gQWRkaXRpb25hbGx5LCB3aGVuIHRoaXMgY29kZSBpcyBjYWxsZWQsIHRoZSBzZWVrYmFyIGlzIG5vdCBwYXJ0IG9mIHRoZSBVSSB5ZXQgYW5kIHRoZXJlZm9yZSBkb2VzIG5vdCBoYXZlIGEgc2l6ZSxcclxuICAgICAgICAvLyByZXN1bHRpbmcgaW4gYSB3cm9uZyBpbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBtYXJrZXIuIFJlZnJlc2hpbmcgaXQgb25jZSB0aGUgVUkgaXMgY29uZmlndXJlZCBzb2x2ZWQgdGhpcyBpc3N1ZS5cclxuICAgICAgICB1aW1hbmFnZXIub25Db25maWd1cmVkLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSXQgY2FuIGFsc28gaGFwcGVuIHRoYXQgdGhlIHZhbHVlIGNoYW5nZXMgb25jZSB0aGUgcGxheWVyIGlzIHJlYWR5LCBvciB3aGVuIGEgbmV3IHNvdXJjZSBpcyBsb2FkZWQsIHNvIHdlIG5lZWRcclxuICAgICAgICAvLyB0byB1cGRhdGUgb24gT05fUkVBRFkgdG9vXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUkVBRFksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVmcmVzaFBsYXliYWNrUG9zaXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBJbml0aWFsaXplIHNlZWtiYXJcclxuICAgICAgICBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlcigpOyAvLyBTZXQgdGhlIHBsYXliYWNrIHBvc2l0aW9uXHJcbiAgICAgICAgdGhpcy5zZXRCdWZmZXJQb3NpdGlvbigwKTtcclxuICAgICAgICB0aGlzLnNldFNlZWtQb3NpdGlvbigwKTtcclxuICAgICAgICBpZiAodGhpcy5jb25maWcuc21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZUludGVydmFsTXMgIT09IFNlZWtCYXIuU01PT1RIX1BMQVlCQUNLX1BPU0lUSU9OX1VQREFURV9ESVNBQkxFRCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZVNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVNYXJrZXJzKHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBzZWVrYmFyIHdoaWxlIGEgbGl2ZSBzdHJlYW0gd2l0aCBEVlIgd2luZG93IGlzIHBhdXNlZC5cclxuICAgICAqIFRoZSBwbGF5YmFjayBwb3NpdGlvbiBzdGF5cyBzdGlsbCBhbmQgdGhlIHBvc2l0aW9uIGluZGljYXRvciB2aXN1YWxseSBtb3ZlcyB0b3dhcmRzIHRoZSBiYWNrLlxyXG4gICAgICovXHJcbiAgICBTZWVrQmFyLnByb3RvdHlwZS5jb25maWd1cmVMaXZlUGF1c2VkVGltZXNoaWZ0VXBkYXRlciA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlciwgcGxheWJhY2tQb3NpdGlvbkhhbmRsZXIpIHtcclxuICAgICAgICAvLyBSZWd1bGFybHkgdXBkYXRlIHRoZSBwbGF5YmFjayBwb3NpdGlvbiB3aGlsZSB0aGUgdGltZW91dCBpcyBhY3RpdmVcclxuICAgICAgICB2YXIgcGF1c2VkVGltZXNoaWZ0VXBkYXRlciA9IG5ldyB0aW1lb3V0XzEuVGltZW91dCgxMDAwLCBwbGF5YmFja1Bvc2l0aW9uSGFuZGxlciwgdHJ1ZSk7XHJcbiAgICAgICAgLy8gU3RhcnQgdXBkYXRlciB3aGVuIGEgbGl2ZSBzdHJlYW0gd2l0aCB0aW1lc2hpZnQgd2luZG93IGlzIHBhdXNlZFxyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BBVVNFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzTGl2ZSgpICYmIHBsYXllci5nZXRNYXhUaW1lU2hpZnQoKSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHBhdXNlZFRpbWVzaGlmdFVwZGF0ZXIuc3RhcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFN0b3AgdXBkYXRlciB3aGVuIHBsYXliYWNrIGNvbnRpbnVlcyAobm8gbWF0dGVyIGlmIHRoZSB1cGRhdGVyIHdhcyBzdGFydGVkIGJlZm9yZSlcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZLCBmdW5jdGlvbiAoKSB7IHJldHVybiBwYXVzZWRUaW1lc2hpZnRVcGRhdGVyLmNsZWFyKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIFNlZWtCYXIucHJvdG90eXBlLmNvbmZpZ3VyZVNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIFBsYXliYWNrIHBvc2l0aW9uIHVwZGF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogV2UgZG8gbm90IHVwZGF0ZSB0aGUgcG9zaXRpb24gZGlyZWN0bHkgZnJvbSB0aGUgT05fVElNRV9DSEFOR0VEIGV2ZW50LCBiZWNhdXNlIGl0IGFycml2ZXMgdmVyeSBqaXR0ZXJ5IGFuZFxyXG4gICAgICAgICAqIHJlc3VsdHMgaW4gYSBqaXR0ZXJ5IHBvc2l0aW9uIGluZGljYXRvciBzaW5jZSB0aGUgQ1NTIHRyYW5zaXRpb24gdGltZSBpcyBzdGF0aWNhbGx5IHNldC5cclxuICAgICAgICAgKiBUbyB3b3JrIGFyb3VuZCB0aGlzIGlzc3VlLCB3ZSBtYWludGFpbiBhIGxvY2FsIHBsYXliYWNrIHBvc2l0aW9uIHRoYXQgaXMgdXBkYXRlZCBpbiBhIHN0YWJsZSByZWd1bGFyIGludGVydmFsXHJcbiAgICAgICAgICogYW5kIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBwbGF5ZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGN1cnJlbnRUaW1lU2Vla0JhciA9IDA7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRUaW1lUGxheWVyID0gMDtcclxuICAgICAgICB2YXIgdXBkYXRlSW50ZXJ2YWxNcyA9IDUwO1xyXG4gICAgICAgIHZhciBjdXJyZW50VGltZVVwZGF0ZURlbHRhU2VjcyA9IHVwZGF0ZUludGVydmFsTXMgLyAxMDAwO1xyXG4gICAgICAgIHRoaXMuc21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIgPSBuZXcgdGltZW91dF8xLlRpbWVvdXQodXBkYXRlSW50ZXJ2YWxNcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjdXJyZW50VGltZVNlZWtCYXIgKz0gY3VycmVudFRpbWVVcGRhdGVEZWx0YVNlY3M7XHJcbiAgICAgICAgICAgIGN1cnJlbnRUaW1lUGxheWVyID0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgICAgIC8vIFN5bmMgY3VycmVudFRpbWUgb2Ygc2Vla2JhciB0byBwbGF5ZXJcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lRGVsdGEgPSBjdXJyZW50VGltZVNlZWtCYXIgLSBjdXJyZW50VGltZVBsYXllcjtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGRlbHRhIGlzIGxhcmdlciB0aGF0IDIgc2VjcywgZGlyZWN0bHkganVtcCB0aGUgc2Vla2JhciB0byB0aGVcclxuICAgICAgICAgICAgLy8gcGxheWVyIHRpbWUgaW5zdGVhZCBvZiBzbW9vdGhseSBmYXN0IGZvcndhcmRpbmcvcmV3aW5kaW5nLlxyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoY3VycmVudFRpbWVEZWx0YSkgPiAyKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50VGltZVNlZWtCYXIgPSBjdXJyZW50VGltZVBsYXllcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50VGltZURlbHRhIDw9IC1jdXJyZW50VGltZVVwZGF0ZURlbHRhU2Vjcykge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFRpbWVTZWVrQmFyICs9IGN1cnJlbnRUaW1lVXBkYXRlRGVsdGFTZWNzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnRUaW1lRGVsdGEgPj0gY3VycmVudFRpbWVVcGRhdGVEZWx0YVNlY3MpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lU2Vla0JhciAtPSBjdXJyZW50VGltZVVwZGF0ZURlbHRhU2VjcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcGxheWJhY2tQb3NpdGlvblBlcmNlbnRhZ2UgPSAxMDAgLyBwbGF5ZXIuZ2V0RHVyYXRpb24oKSAqIGN1cnJlbnRUaW1lU2Vla0JhcjtcclxuICAgICAgICAgICAgX3RoaXMuc2V0UGxheWJhY2tQb3NpdGlvbihwbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSk7XHJcbiAgICAgICAgfSwgdHJ1ZSk7XHJcbiAgICAgICAgdmFyIHN0YXJ0U21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghcGxheWVyLmlzTGl2ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50VGltZVNlZWtCYXIgPSBwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzdG9wU21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyLmNsZWFyKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZLCBzdGFydFNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1BMQVlJTkcsIHN0YXJ0U21vb3RoUGxheWJhY2tQb3NpdGlvblVwZGF0ZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BBVVNFRCwgc3RvcFNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1BBVVNFRCwgc3RvcFNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZQkFDS19GSU5JU0hFRCwgc3RvcFNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TRUVLRUQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY3VycmVudFRpbWVTZWVrQmFyID0gcGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHBsYXllci5pc1BsYXlpbmcoKSkge1xyXG4gICAgICAgICAgICBzdGFydFNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNlZWtCYXIucHJvdG90eXBlLmNvbmZpZ3VyZU1hcmtlcnMgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjbGVhck1hcmtlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnRpbWVsaW5lTWFya2VycyA9IFtdO1xyXG4gICAgICAgICAgICBfdGhpcy51cGRhdGVNYXJrZXJzKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2V0dXBNYXJrZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjbGVhck1hcmtlcnMoKTtcclxuICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gcGxheWVyLmdldER1cmF0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcclxuICAgICAgICAgICAgICAgIC8vIERvbid0IGdlbmVyYXRlIHRpbWVsaW5lIG1hcmtlcnMgaWYgd2UgZG9uJ3QgeWV0IGhhdmUgYSBkdXJhdGlvblxyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGR1cmF0aW9uIGNoZWNrIGlzIGZvciBidWdneSBwbGF0Zm9ybXMgd2hlcmUgdGhlIGR1cmF0aW9uIGlzIG5vdCBhdmFpbGFibGUgaW5zdGFudGx5IChDaHJvbWUgb24gQW5kcm9pZCA0LjMpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHVpbWFuYWdlci5nZXRDb25maWcoKS5tZXRhZGF0YS5tYXJrZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJQb3NpdGlvbiA9IDEwMCAvIGR1cmF0aW9uICogbWFya2VyLnRpbWU7IC8vIGNvbnZlcnQgYWJzb2x1dGUgdGltZSB0byBwZXJjZW50YWdlXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyRHVyYXRpb24gPSAxMDAgLyBkdXJhdGlvbiAqIG1hcmtlci5kdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRpbWVsaW5lTWFya2Vycy5wdXNoKHsgbWFya2VyOiBtYXJrZXIsIHBvc2l0aW9uOiBtYXJrZXJQb3NpdGlvbiwgZHVyYXRpb246IG1hcmtlckR1cmF0aW9uIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSB0aW1lbGluZSB3aXRoIHRoZSBtYXJrZXJzXHJcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZU1hcmtlcnMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEFkZCBtYXJrZXJzIHdoZW4gYSBzb3VyY2UgaXMgbG9hZGVkXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUkVBRFksIHNldHVwTWFya2Vycyk7XHJcbiAgICAgICAgLy8gUmVtb3ZlIG1hcmtlcnMgd2hlbiB1bmxvYWRlZFxyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NPVVJDRV9VTkxPQURFRCwgY2xlYXJNYXJrZXJzKTtcclxuICAgICAgICAvLyBVcGRhdGUgbWFya2VycyB3aGVuIHRoZSBzaXplIG9mIHRoZSBzZWVrYmFyIGNoYW5nZXNcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZRVJfUkVTSVpFLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy51cGRhdGVNYXJrZXJzKCk7IH0pO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBtYXJrZXJzIHdoZW4gYSBtYXJrZXIgaXMgYWRkZWQgb3IgcmVtb3ZlZFxyXG4gICAgICAgIHVpbWFuYWdlci5nZXRDb25maWcoKS5ldmVudHMub25VcGRhdGVkLnN1YnNjcmliZShzZXR1cE1hcmtlcnMpO1xyXG4gICAgICAgIHVpbWFuYWdlci5vblJlbGVhc2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVpbWFuYWdlci5nZXRDb25maWcoKS5ldmVudHMub25VcGRhdGVkLnVuc3Vic2NyaWJlKHNldHVwTWFya2Vycyk7IH0pO1xyXG4gICAgICAgIC8vIEluaXQgbWFya2VycyBhdCBzdGFydHVwXHJcbiAgICAgICAgc2V0dXBNYXJrZXJzKCk7XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbGVhc2UuY2FsbCh0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5zbW9vdGhQbGF5YmFja1Bvc2l0aW9uVXBkYXRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVyLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNlZWtCYXIucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy52ZXJ0aWNhbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jc3NDbGFzc2VzLnB1c2goJ3ZlcnRpY2FsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzZWVrQmFyQ29udGFpbmVyID0gbmV3IGRvbV8xLkRPTSgnZGl2Jywge1xyXG4gICAgICAgICAgICAnaWQnOiB0aGlzLmNvbmZpZy5pZCxcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5nZXRDc3NDbGFzc2VzKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHNlZWtCYXIgPSBuZXcgZG9tXzEuRE9NKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdzZWVrYmFyJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyID0gc2Vla0JhcjtcclxuICAgICAgICAvLyBJbmRpY2F0b3IgdGhhdCBzaG93cyB0aGUgYnVmZmVyIGZpbGwgbGV2ZWxcclxuICAgICAgICB2YXIgc2Vla0JhckJ1ZmZlckxldmVsID0gbmV3IGRvbV8xLkRPTSgnZGl2Jywge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnc2Vla2Jhci1idWZmZXJsZXZlbCcpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2Vla0JhckJ1ZmZlclBvc2l0aW9uID0gc2Vla0JhckJ1ZmZlckxldmVsO1xyXG4gICAgICAgIC8vIEluZGljYXRvciB0aGF0IHNob3dzIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uXHJcbiAgICAgICAgdmFyIHNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uID0gbmV3IGRvbV8xLkRPTSgnZGl2Jywge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnc2Vla2Jhci1wbGF5YmFja3Bvc2l0aW9uJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyUGxheWJhY2tQb3NpdGlvbiA9IHNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uO1xyXG4gICAgICAgIC8vIEEgbWFya2VyIG9mIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uLCBlLmcuIGEgZG90IG9yIGxpbmVcclxuICAgICAgICB2YXIgc2Vla0JhclBsYXliYWNrUG9zaXRpb25NYXJrZXIgPSBuZXcgZG9tXzEuRE9NKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdzZWVrYmFyLXBsYXliYWNrcG9zaXRpb24tbWFya2VyJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyUGxheWJhY2tQb3NpdGlvbk1hcmtlciA9IHNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uTWFya2VyO1xyXG4gICAgICAgIC8vIEluZGljYXRvciB0aGF0IHNob3cgd2hlcmUgYSBzZWVrIHdpbGwgZ28gdG9cclxuICAgICAgICB2YXIgc2Vla0JhclNlZWtQb3NpdGlvbiA9IG5ldyBkb21fMS5ET00oJ2RpdicsIHtcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ3NlZWtiYXItc2Vla3Bvc2l0aW9uJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyU2Vla1Bvc2l0aW9uID0gc2Vla0JhclNlZWtQb3NpdGlvbjtcclxuICAgICAgICAvLyBJbmRpY2F0b3IgdGhhdCBzaG93cyB0aGUgZnVsbCBzZWVrYmFyXHJcbiAgICAgICAgdmFyIHNlZWtCYXJCYWNrZHJvcCA9IG5ldyBkb21fMS5ET00oJ2RpdicsIHtcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ3NlZWtiYXItYmFja2Ryb3AnKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNlZWtCYXJCYWNrZHJvcCA9IHNlZWtCYXJCYWNrZHJvcDtcclxuICAgICAgICB2YXIgc2Vla0JhckNoYXB0ZXJNYXJrZXJzQ29udGFpbmVyID0gbmV3IGRvbV8xLkRPTSgnZGl2Jywge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnc2Vla2Jhci1tYXJrZXJzJyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyTWFya2Vyc0NvbnRhaW5lciA9IHNlZWtCYXJDaGFwdGVyTWFya2Vyc0NvbnRhaW5lcjtcclxuICAgICAgICBzZWVrQmFyLmFwcGVuZCh0aGlzLnNlZWtCYXJCYWNrZHJvcCwgdGhpcy5zZWVrQmFyQnVmZmVyUG9zaXRpb24sIHRoaXMuc2Vla0JhclNlZWtQb3NpdGlvbiwgdGhpcy5zZWVrQmFyUGxheWJhY2tQb3NpdGlvbiwgdGhpcy5zZWVrQmFyTWFya2Vyc0NvbnRhaW5lciwgdGhpcy5zZWVrQmFyUGxheWJhY2tQb3NpdGlvbk1hcmtlcik7XHJcbiAgICAgICAgdmFyIHNlZWtpbmcgPSBmYWxzZTtcclxuICAgICAgICAvLyBEZWZpbmUgaGFuZGxlciBmdW5jdGlvbnMgc28gd2UgY2FuIGF0dGFjaC9yZW1vdmUgdGhlbSBsYXRlclxyXG4gICAgICAgIHZhciBtb3VzZVRvdWNoTW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW9uIHRvIFZSIGhhbmRsZXJcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldFBlcmNlbnRhZ2UgPSAxMDAgKiBfdGhpcy5nZXRPZmZzZXQoZSk7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFNlZWtQb3NpdGlvbih0YXJnZXRQZXJjZW50YWdlKTtcclxuICAgICAgICAgICAgX3RoaXMuc2V0UGxheWJhY2tQb3NpdGlvbih0YXJnZXRQZXJjZW50YWdlKTtcclxuICAgICAgICAgICAgX3RoaXMub25TZWVrUHJldmlld0V2ZW50KHRhcmdldFBlcmNlbnRhZ2UsIHRydWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIG1vdXNlVG91Y2hVcEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBoYW5kbGVycywgc2VlayBvcGVyYXRpb24gaXMgZmluaXNoZWRcclxuICAgICAgICAgICAgbmV3IGRvbV8xLkRPTShkb2N1bWVudCkub2ZmKCd0b3VjaG1vdmUgbW91c2Vtb3ZlJywgbW91c2VUb3VjaE1vdmVIYW5kbGVyKTtcclxuICAgICAgICAgICAgbmV3IGRvbV8xLkRPTShkb2N1bWVudCkub2ZmKCd0b3VjaGVuZCBtb3VzZXVwJywgbW91c2VUb3VjaFVwSGFuZGxlcik7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRQZXJjZW50YWdlID0gMTAwICogX3RoaXMuZ2V0T2Zmc2V0KGUpO1xyXG4gICAgICAgICAgICB2YXIgc25hcHBlZENoYXB0ZXIgPSBfdGhpcy5nZXRNYXJrZXJBdFBvc2l0aW9uKHRhcmdldFBlcmNlbnRhZ2UpO1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRTZWVraW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgc2Vla2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBGaXJlIHNlZWtlZCBldmVudFxyXG4gICAgICAgICAgICBfdGhpcy5vblNlZWtlZEV2ZW50KHNuYXBwZWRDaGFwdGVyID8gc25hcHBlZENoYXB0ZXIucG9zaXRpb24gOiB0YXJnZXRQZXJjZW50YWdlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEEgc2VlayBhbHdheXMgc3RhcnQgd2l0aCBhIHRvdWNoc3RhcnQgb3IgbW91c2Vkb3duIGRpcmVjdGx5IG9uIHRoZSBzZWVrYmFyLlxyXG4gICAgICAgIC8vIFRvIHRyYWNrIGEgbW91c2Ugc2VlayBhbHNvIG91dHNpZGUgdGhlIHNlZWtiYXIgKGZvciB0b3VjaCBldmVudHMgdGhpcyB3b3JrcyBhdXRvbWF0aWNhbGx5KSxcclxuICAgICAgICAvLyBzbyB0aGUgdXNlciBkb2VzIG5vdCBuZWVkIHRvIHRha2UgY2FyZSB0aGF0IHRoZSBtb3VzZSBhbHdheXMgc3RheXMgb24gdGhlIHNlZWtiYXIsIHdlIGF0dGFjaCB0aGUgbW91c2Vtb3ZlXHJcbiAgICAgICAgLy8gYW5kIG1vdXNldXAgaGFuZGxlcnMgdG8gdGhlIHdob2xlIGRvY3VtZW50LiBBIHNlZWsgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIHVzZXIgbGlmdHMgdGhlIG1vdXNlIGtleS5cclxuICAgICAgICAvLyBBIHNlZWsgbW91c2UgZ2VzdHVyZSBpcyB0aHVzIGJhc2ljYWxseSBhIGNsaWNrIHdpdGggYSBsb25nIHRpbWUgZnJhbWUgYmV0d2VlbiBkb3duIGFuZCB1cCBldmVudHMuXHJcbiAgICAgICAgc2Vla0Jhci5vbigndG91Y2hzdGFydCBtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgaXNUb3VjaEV2ZW50ID0gX3RoaXMudG91Y2hTdXBwb3J0ZWQgJiYgZSBpbnN0YW5jZW9mIFRvdWNoRXZlbnQ7XHJcbiAgICAgICAgICAgIC8vIFByZXZlbnQgc2VsZWN0aW9uIG9mIERPTSBlbGVtZW50cyAoYWxzbyBwcmV2ZW50cyBtb3VzZWRvd24gaWYgY3VycmVudCBldmVudCBpcyB0b3VjaHN0YXJ0KVxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW9uIHRvIFZSIGhhbmRsZXJcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgX3RoaXMuc2V0U2Vla2luZyh0cnVlKTsgLy8gU2V0IHNlZWtpbmcgY2xhc3Mgb24gRE9NIGVsZW1lbnRcclxuICAgICAgICAgICAgc2Vla2luZyA9IHRydWU7IC8vIFNldCBzZWVrIHRyYWNraW5nIGZsYWdcclxuICAgICAgICAgICAgLy8gRmlyZSBzZWVrZWQgZXZlbnRcclxuICAgICAgICAgICAgX3RoaXMub25TZWVrRXZlbnQoKTtcclxuICAgICAgICAgICAgLy8gQWRkIGhhbmRsZXIgdG8gdHJhY2sgdGhlIHNlZWsgb3BlcmF0aW9uIG92ZXIgdGhlIHdob2xlIGRvY3VtZW50XHJcbiAgICAgICAgICAgIG5ldyBkb21fMS5ET00oZG9jdW1lbnQpLm9uKGlzVG91Y2hFdmVudCA/ICd0b3VjaG1vdmUnIDogJ21vdXNlbW92ZScsIG1vdXNlVG91Y2hNb3ZlSGFuZGxlcik7XHJcbiAgICAgICAgICAgIG5ldyBkb21fMS5ET00oZG9jdW1lbnQpLm9uKGlzVG91Y2hFdmVudCA/ICd0b3VjaGVuZCcgOiAnbW91c2V1cCcsIG1vdXNlVG91Y2hVcEhhbmRsZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIERpc3BsYXkgc2VlayB0YXJnZXQgaW5kaWNhdG9yIHdoZW4gbW91c2UgaG92ZXJzIG9yIGZpbmdlciBzbGlkZXMgb3ZlciBzZWVrYmFyXHJcbiAgICAgICAgc2Vla0Jhci5vbigndG91Y2htb3ZlIG1vdXNlbW92ZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKHNlZWtpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIER1cmluZyBhIHNlZWsgKHdoZW4gbW91c2UgaXMgZG93biBvciB0b3VjaCBtb3ZlIGFjdGl2ZSksIHdlIG5lZWQgdG8gc3RvcCBwcm9wYWdhdGlvbiB0byBhdm9pZFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIFZSIHZpZXdwb3J0IHJlYWN0aW5nIHRvIHRoZSBtb3Zlcy5cclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZWNhdXNlIHRoZSBzdG9wcGVkIHByb3BhZ2F0aW9uIGluaGliaXRzIHRoZSBldmVudCBvbiB0aGUgZG9jdW1lbnQsIHdlIG5lZWQgdG8gY2FsbCBpdCBmcm9tIGhlcmVcclxuICAgICAgICAgICAgICAgIG1vdXNlVG91Y2hNb3ZlSGFuZGxlcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSAxMDAgKiBfdGhpcy5nZXRPZmZzZXQoZSk7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFNlZWtQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIF90aGlzLm9uU2Vla1ByZXZpZXdFdmVudChwb3NpdGlvbiwgZmFsc2UpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuaGFzTGFiZWwoKSAmJiBfdGhpcy5nZXRMYWJlbCgpLmlzSGlkZGVuKCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldExhYmVsKCkuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSGlkZSBzZWVrIHRhcmdldCBpbmRpY2F0b3Igd2hlbiBtb3VzZSBvciBmaW5nZXIgbGVhdmVzIHNlZWtiYXJcclxuICAgICAgICBzZWVrQmFyLm9uKCd0b3VjaGVuZCBtb3VzZWxlYXZlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRTZWVrUG9zaXRpb24oMCk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5oYXNMYWJlbCgpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXRMYWJlbCgpLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlZWtCYXJDb250YWluZXIuYXBwZW5kKHNlZWtCYXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmxhYmVsKSB7XHJcbiAgICAgICAgICAgIHNlZWtCYXJDb250YWluZXIuYXBwZW5kKHRoaXMubGFiZWwuZ2V0RG9tRWxlbWVudCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlZWtCYXJDb250YWluZXI7XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUudXBkYXRlTWFya2VycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc2Vla0Jhck1hcmtlcnNDb250YWluZXIuZW1wdHkoKTtcclxuICAgICAgICB2YXIgc2Vla0JhcldpZHRoUHggPSB0aGlzLnNlZWtCYXIud2lkdGgoKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy50aW1lbGluZU1hcmtlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHZhciBtYXJrZXJDbGFzc2VzID0gWydzZWVrYmFyLW1hcmtlciddLmNvbmNhdChtYXJrZXIubWFya2VyLmNzc0NsYXNzZXMgfHwgW10pXHJcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChjc3NDbGFzcykgeyByZXR1cm4gX3RoaXMucHJlZml4Q3NzKGNzc0NsYXNzKTsgfSk7XHJcbiAgICAgICAgICAgIHZhciBjc3NQcm9wZXJ0aWVzID0ge1xyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogbWFya2VyLnBvc2l0aW9uICsgJyUnLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAobWFya2VyLmR1cmF0aW9uID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlcldpZHRoUHggPSBNYXRoLnJvdW5kKHNlZWtCYXJXaWR0aFB4IC8gMTAwICogbWFya2VyLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIGNzc1Byb3BlcnRpZXNbJ2JvcmRlci1yaWdodC13aWR0aCddID0gbWFya2VyV2lkdGhQeCArICdweCc7XHJcbiAgICAgICAgICAgICAgICBjc3NQcm9wZXJ0aWVzWydtYXJnaW4tbGVmdCddID0gJzAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2Vla0Jhck1hcmtlcnNDb250YWluZXIuYXBwZW5kKG5ldyBkb21fMS5ET00oJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICdjbGFzcyc6IG1hcmtlckNsYXNzZXMuam9pbignICcpLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEtbWFya2VyLXRpbWUnOiBTdHJpbmcobWFya2VyLm1hcmtlci50aW1lKSxcclxuICAgICAgICAgICAgICAgICdkYXRhLW1hcmtlci10aXRsZSc6IFN0cmluZyhtYXJrZXIubWFya2VyLnRpdGxlKSxcclxuICAgICAgICAgICAgfSkuY3NzKGNzc1Byb3BlcnRpZXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuZ2V0TWFya2VyQXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChwZXJjZW50YWdlKSB7XHJcbiAgICAgICAgdmFyIHNuYXBwaW5nUmFuZ2UgPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVsaW5lTWFya2Vycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnRpbWVsaW5lTWFya2VyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgaW50ZXJ2YWwgbWFya2Vyc1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hcmtlci5kdXJhdGlvbiA+IDBcclxuICAgICAgICAgICAgICAgICAgICAmJiBwZXJjZW50YWdlID49IG1hcmtlci5wb3NpdGlvbiAtIHNuYXBwaW5nUmFuZ2VcclxuICAgICAgICAgICAgICAgICAgICAmJiBwZXJjZW50YWdlIDw9IG1hcmtlci5wb3NpdGlvbiArIG1hcmtlci5kdXJhdGlvbiArIHNuYXBwaW5nUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocGVyY2VudGFnZSA+PSBtYXJrZXIucG9zaXRpb24gLSBzbmFwcGluZ1JhbmdlXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgcGVyY2VudGFnZSA8PSBtYXJrZXIucG9zaXRpb24gKyBzbmFwcGluZ1JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGhvcml6b250YWwgb2Zmc2V0IG9mIGEgbW91c2UvdG91Y2ggZXZlbnQgcG9pbnQgZnJvbSB0aGUgbGVmdCBlZGdlIG9mIHRoZSBzZWVrIGJhci5cclxuICAgICAqIEBwYXJhbSBldmVudFBhZ2VYIHRoZSBwYWdlWCBjb29yZGluYXRlIG9mIGFuIGV2ZW50IHRvIGNhbGN1bGF0ZSB0aGUgb2Zmc2V0IGZyb21cclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IGEgbnVtYmVyIGluIHRoZSByYW5nZSBvZiBbMCwgMV0sIHdoZXJlIDAgaXMgdGhlIGxlZnQgZWRnZSBhbmQgMSBpcyB0aGUgcmlnaHQgZWRnZVxyXG4gICAgICovXHJcbiAgICBTZWVrQmFyLnByb3RvdHlwZS5nZXRIb3Jpem9udGFsT2Zmc2V0ID0gZnVuY3Rpb24gKGV2ZW50UGFnZVgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudE9mZnNldFB4ID0gdGhpcy5zZWVrQmFyLm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgdmFyIHdpZHRoUHggPSB0aGlzLnNlZWtCYXIud2lkdGgoKTtcclxuICAgICAgICB2YXIgb2Zmc2V0UHggPSBldmVudFBhZ2VYIC0gZWxlbWVudE9mZnNldFB4O1xyXG4gICAgICAgIHZhciBvZmZzZXQgPSAxIC8gd2lkdGhQeCAqIG9mZnNldFB4O1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhbml0aXplT2Zmc2V0KG9mZnNldCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSB2ZXJ0aWNhbCBvZmZzZXQgb2YgYSBtb3VzZS90b3VjaCBldmVudCBwb2ludCBmcm9tIHRoZSBib3R0b20gZWRnZSBvZiB0aGUgc2VlayBiYXIuXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRQYWdlWSB0aGUgcGFnZVggY29vcmRpbmF0ZSBvZiBhbiBldmVudCB0byBjYWxjdWxhdGUgdGhlIG9mZnNldCBmcm9tXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBhIG51bWJlciBpbiB0aGUgcmFuZ2Ugb2YgWzAsIDFdLCB3aGVyZSAwIGlzIHRoZSBib3R0b20gZWRnZSBhbmQgMSBpcyB0aGUgdG9wIGVkZ2VcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuZ2V0VmVydGljYWxPZmZzZXQgPSBmdW5jdGlvbiAoZXZlbnRQYWdlWSkge1xyXG4gICAgICAgIHZhciBlbGVtZW50T2Zmc2V0UHggPSB0aGlzLnNlZWtCYXIub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgIHZhciB3aWR0aFB4ID0gdGhpcy5zZWVrQmFyLmhlaWdodCgpO1xyXG4gICAgICAgIHZhciBvZmZzZXRQeCA9IGV2ZW50UGFnZVkgLSBlbGVtZW50T2Zmc2V0UHg7XHJcbiAgICAgICAgdmFyIG9mZnNldCA9IDEgLyB3aWR0aFB4ICogb2Zmc2V0UHg7XHJcbiAgICAgICAgcmV0dXJuIDEgLSB0aGlzLnNhbml0aXplT2Zmc2V0KG9mZnNldCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBtb3VzZSBvciB0b3VjaCBldmVudCBvZmZzZXQgZm9yIHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24gKGhvcml6b250YWwgb3IgdmVydGljYWwpLlxyXG4gICAgICogQHBhcmFtIGUgdGhlIGV2ZW50IHRvIGNhbGN1bGF0ZSB0aGUgb2Zmc2V0IGZyb21cclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IGEgbnVtYmVyIGluIHRoZSByYW5nZSBvZiBbMCwgMV1cclxuICAgICAqIEBzZWUgI2dldEhvcml6b250YWxPZmZzZXRcclxuICAgICAqIEBzZWUgI2dldFZlcnRpY2FsT2Zmc2V0XHJcbiAgICAgKi9cclxuICAgIFNlZWtCYXIucHJvdG90eXBlLmdldE9mZnNldCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudG91Y2hTdXBwb3J0ZWQgJiYgZSBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLnZlcnRpY2FsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWZXJ0aWNhbE9mZnNldChlLnR5cGUgPT09ICd0b3VjaGVuZCcgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZIDogZS50b3VjaGVzWzBdLnBhZ2VZKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEhvcml6b250YWxPZmZzZXQoZS50eXBlID09PSAndG91Y2hlbmQnID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCA6IGUudG91Y2hlc1swXS5wYWdlWCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIE1vdXNlRXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLnZlcnRpY2FsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWZXJ0aWNhbE9mZnNldChlLnBhZ2VZKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEhvcml6b250YWxPZmZzZXQoZS5wYWdlWCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjb25zb2xlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2ludmFsaWQgZXZlbnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTYW5pdGl6ZXMgdGhlIG1vdXNlIG9mZnNldCB0byB0aGUgcmFuZ2Ugb2YgWzAsIDFdLlxyXG4gICAgICpcclxuICAgICAqIFdoZW4gdHJhY2tpbmcgdGhlIG1vdXNlIG91dHNpZGUgdGhlIHNlZWsgYmFyLCB0aGUgb2Zmc2V0IGNhbiBiZSBvdXRzaWRlIHRoZSBkZXNpcmVkIHJhbmdlIGFuZCB0aGlzIG1ldGhvZFxyXG4gICAgICogbGltaXRzIGl0IHRvIHRoZSBkZXNpcmVkIHJhbmdlLiBFLmcuIGEgbW91c2UgZXZlbnQgbGVmdCBvZiB0aGUgbGVmdCBlZGdlIG9mIGEgc2VlayBiYXIgeWllbGRzIGFuIG9mZnNldCBiZWxvd1xyXG4gICAgICogemVybywgYnV0IHRvIGRpc3BsYXkgdGhlIHNlZWsgdGFyZ2V0IG9uIHRoZSBzZWVrIGJhciwgd2UgbmVlZCB0byBsaW1pdCBpdCB0byB6ZXJvLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvZmZzZXQgdGhlIG9mZnNldCB0byBzYW5pdGl6ZVxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gdGhlIHNhbml0aXplZCBvZmZzZXQuXHJcbiAgICAgKi9cclxuICAgIFNlZWtCYXIucHJvdG90eXBlLnNhbml0aXplT2Zmc2V0ID0gZnVuY3Rpb24gKG9mZnNldCkge1xyXG4gICAgICAgIC8vIFNpbmNlIHdlIHRyYWNrIG1vdXNlIG1vdmVzIG92ZXIgdGhlIHdob2xlIGRvY3VtZW50LCB0aGUgdGFyZ2V0IGNhbiBiZSBvdXRzaWRlIHRoZSBzZWVrIHJhbmdlLFxyXG4gICAgICAgIC8vIGFuZCB3ZSBuZWVkIHRvIGxpbWl0IGl0IHRvIHRoZSBbMCwgMV0gcmFuZ2UuXHJcbiAgICAgICAgaWYgKG9mZnNldCA8IDApIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob2Zmc2V0ID4gMSkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2Zmc2V0O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIHBsYXliYWNrIHBvc2l0aW9uIGluZGljYXRvci5cclxuICAgICAqIEBwYXJhbSBwZXJjZW50IGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMTAwIGFzIHJldHVybmVkIGJ5IHRoZSBwbGF5ZXJcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuc2V0UGxheWJhY2tQb3NpdGlvbiA9IGZ1bmN0aW9uIChwZXJjZW50KSB7XHJcbiAgICAgICAgdGhpcy5wbGF5YmFja1Bvc2l0aW9uUGVyY2VudGFnZSA9IHBlcmNlbnQ7XHJcbiAgICAgICAgLy8gU2V0IHBvc2l0aW9uIG9mIHRoZSBiYXJcclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHRoaXMuc2Vla0JhclBsYXliYWNrUG9zaXRpb24sIHBlcmNlbnQpO1xyXG4gICAgICAgIC8vIFNldCBwb3NpdGlvbiBvZiB0aGUgbWFya2VyXHJcbiAgICAgICAgdmFyIHRvdGFsU2l6ZSA9ICh0aGlzLmNvbmZpZy52ZXJ0aWNhbCA/ICh0aGlzLnNlZWtCYXIuaGVpZ2h0KCkgLSB0aGlzLnNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uTWFya2VyLmhlaWdodCgpKSA6IHRoaXMuc2Vla0Jhci53aWR0aCgpKTtcclxuICAgICAgICB2YXIgcHggPSAodG90YWxTaXplKSAvIDEwMCAqIHBlcmNlbnQ7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnZlcnRpY2FsKSB7XHJcbiAgICAgICAgICAgIHB4ID0gdGhpcy5zZWVrQmFyLmhlaWdodCgpIC0gcHggLSB0aGlzLnNlZWtCYXJQbGF5YmFja1Bvc2l0aW9uTWFya2VyLmhlaWdodCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmNvbmZpZy52ZXJ0aWNhbCA/XHJcbiAgICAgICAgICAgIC8vIC1tcy10cmFuc2Zvcm0gcmVxdWlyZWQgZm9yIElFOVxyXG4gICAgICAgICAgICAvLyAtd2Via2l0LXRyYW5zZm9ybSByZXF1aXJlZCBmb3IgQW5kcm9pZCA0LjQgV2ViVmlld1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoJyArIHB4ICsgJ3B4KScsXHJcbiAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVZKCcgKyBweCArICdweCknLFxyXG4gICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoJyArIHB4ICsgJ3B4KScsXHJcbiAgICAgICAgICAgIH0gOlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArIHB4ICsgJ3B4KScsXHJcbiAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyBweCArICdweCknLFxyXG4gICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArIHB4ICsgJ3B4KScsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyUGxheWJhY2tQb3NpdGlvbk1hcmtlci5jc3Moc3R5bGUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaGVzIHRoZSBwbGF5YmFjayBwb3NpdGlvbi4gQ2FuIGJlIHVzZWQgYnkgc3ViY2xhc3NlcyB0byByZWZyZXNoIHRoZSBwb3NpdGlvbiB3aGVuXHJcbiAgICAgKiB0aGUgc2l6ZSBvZiB0aGUgY29tcG9uZW50IGNoYW5nZXMuXHJcbiAgICAgKi9cclxuICAgIFNlZWtCYXIucHJvdG90eXBlLnJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2V0UGxheWJhY2tQb3NpdGlvbih0aGlzLnBsYXliYWNrUG9zaXRpb25QZXJjZW50YWdlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHBvc2l0aW9uIHVudGlsIHdoaWNoIG1lZGlhIGlzIGJ1ZmZlcmVkLlxyXG4gICAgICogQHBhcmFtIHBlcmNlbnQgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxMDBcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuc2V0QnVmZmVyUG9zaXRpb24gPSBmdW5jdGlvbiAocGVyY2VudCkge1xyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24odGhpcy5zZWVrQmFyQnVmZmVyUG9zaXRpb24sIHBlcmNlbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgcG9zaXRpb24gd2hlcmUgYSBzZWVrLCBpZiBleGVjdXRlZCwgd291bGQganVtcCB0by5cclxuICAgICAqIEBwYXJhbSBwZXJjZW50IGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMTAwXHJcbiAgICAgKi9cclxuICAgIFNlZWtCYXIucHJvdG90eXBlLnNldFNlZWtQb3NpdGlvbiA9IGZ1bmN0aW9uIChwZXJjZW50KSB7XHJcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbih0aGlzLnNlZWtCYXJTZWVrUG9zaXRpb24sIHBlcmNlbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBhY3R1YWwgcG9zaXRpb24gKHdpZHRoIG9yIGhlaWdodCkgb2YgYSBET00gZWxlbWVudCB0aGF0IHJlcHJlc2VudCBhIGJhciBpbiB0aGUgc2VlayBiYXIuXHJcbiAgICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCB0byBzZXQgdGhlIHBvc2l0aW9uIGZvclxyXG4gICAgICogQHBhcmFtIHBlcmNlbnQgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxMDBcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgcGVyY2VudCkge1xyXG4gICAgICAgIHZhciBzY2FsZSA9IHBlcmNlbnQgLyAxMDA7XHJcbiAgICAgICAgLy8gV2hlbiB0aGUgc2NhbGUgaXMgZXhhY3RseSAxIG9yIHZlcnkgbmVhciAxIChhbmQgdGhlIGJyb3dzZXIgaW50ZXJuYWxseSByb3VuZHMgaXQgdG8gMSksIGJyb3dzZXJzIHNlZW0gdG8gcmVuZGVyXHJcbiAgICAgICAgLy8gdGhlIGVsZW1lbnRzIGRpZmZlcmVudGx5IGFuZCB0aGUgaGVpZ2h0IGdldHMgc2xpZ2h0bHkgb2ZmLCBsZWFkaW5nIHRvIG1pc21hdGNoaW5nIGhlaWdodHMgd2hlbiBlLmcuIHRoZSBidWZmZXJcclxuICAgICAgICAvLyBsZXZlbCBiYXIgaGFzIGEgd2lkdGggb2YgMSBhbmQgdGhlIHBsYXliYWNrIHBvc2l0aW9uIGJhciBoYXMgYSB3aWR0aCA8IDEuIEEgaml0dGVyaW5nIGJ1ZmZlciBsZXZlbCBhcm91bmQgMVxyXG4gICAgICAgIC8vIGxlYWRzIHRvIGFuIGV2ZW4gd29yc2UgZmxpY2tlcmluZyBlZmZlY3QuXHJcbiAgICAgICAgLy8gVmFyaW91cyBjaGFuZ2VzIGluIENTUyBzdHlsaW5nIGFuZCBET00gaGllcmFyY2h5IGRpZCBub3Qgc29sdmUgdGhlIGlzc3VlIHNvIHRoZSB3b3JrYXJvdW5kIGlzIHRvIGF2b2lkIGEgc2NhbGVcclxuICAgICAgICAvLyBvZiBleGFjdGx5IDEuXHJcbiAgICAgICAgaWYgKHNjYWxlID49IDAuOTk5OTkgJiYgc2NhbGUgPD0gMS4wMDAwMSkge1xyXG4gICAgICAgICAgICBzY2FsZSA9IDAuOTk5OTk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuY29uZmlnLnZlcnRpY2FsID9cclxuICAgICAgICAgICAgLy8gLW1zLXRyYW5zZm9ybSByZXF1aXJlZCBmb3IgSUU5XHJcbiAgICAgICAgICAgIC8vIC13ZWJraXQtdHJhbnNmb3JtIHJlcXVpcmVkIGZvciBBbmRyb2lkIDQuNCBXZWJWaWV3XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAnc2NhbGVZKCcgKyBzY2FsZSArICcpJyxcclxuICAgICAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3NjYWxlWSgnICsgc2NhbGUgKyAnKScsXHJcbiAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAnc2NhbGVZKCcgKyBzY2FsZSArICcpJyxcclxuICAgICAgICAgICAgfSA6XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAnc2NhbGVYKCcgKyBzY2FsZSArICcpJyxcclxuICAgICAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3NjYWxlWCgnICsgc2NhbGUgKyAnKScsXHJcbiAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAnc2NhbGVYKCcgKyBzY2FsZSArICcpJyxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICBlbGVtZW50LmNzcyhzdHlsZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQdXRzIHRoZSBzZWVrIGJhciBpbnRvIG9yIG91dCBvZiBzZWVraW5nIHN0YXRlIGJ5IGFkZGluZy9yZW1vdmluZyBhIGNsYXNzIHRvIHRoZSBET00gZWxlbWVudC4gVGhpcyBjYW4gYmUgdXNlZFxyXG4gICAgICogdG8gYWRqdXN0IHRoZSBzdHlsaW5nIHdoaWxlIHNlZWtpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNlZWtpbmcgc2hvdWxkIGJlIHRydWUgd2hlbiBlbnRlcmluZyBzZWVrIHN0YXRlLCBmYWxzZSB3aGVuIGV4aXRpbmcgdGhlIHNlZWsgc3RhdGVcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuc2V0U2Vla2luZyA9IGZ1bmN0aW9uIChzZWVraW5nKSB7XHJcbiAgICAgICAgaWYgKHNlZWtpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3ModGhpcy5wcmVmaXhDc3MoU2Vla0Jhci5DTEFTU19TRUVLSU5HKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyh0aGlzLnByZWZpeENzcyhTZWVrQmFyLkNMQVNTX1NFRUtJTkcpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIHNlZWsgYmFyIGlzIGN1cnJlbnRseSBpbiB0aGUgc2VlayBzdGF0ZS5cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGluIHNlZWsgc3RhdGUsIGVsc2UgZmFsc2VcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuaXNTZWVraW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERvbUVsZW1lbnQoKS5oYXNDbGFzcyh0aGlzLnByZWZpeENzcyhTZWVrQmFyLkNMQVNTX1NFRUtJTkcpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGUgc2VlayBiYXIgaGFzIGEge0BsaW5rIFNlZWtCYXJMYWJlbH0uXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgc2VlayBiYXIgaGFzIGEgbGFiZWwsIGVsc2UgZmFsc2VcclxuICAgICAqL1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUuaGFzTGFiZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWwgIT0gbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGxhYmVsIG9mIHRoaXMgc2VlayBiYXIuXHJcbiAgICAgKiBAcmV0dXJucyB7U2Vla0JhckxhYmVsfSB0aGUgbGFiZWwgaWYgdGhpcyBzZWVrIGJhciBoYXMgYSBsYWJlbCwgZWxzZSBudWxsXHJcbiAgICAgKi9cclxuICAgIFNlZWtCYXIucHJvdG90eXBlLmdldExhYmVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxhYmVsO1xyXG4gICAgfTtcclxuICAgIFNlZWtCYXIucHJvdG90eXBlLm9uU2Vla0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2Vla0JhckV2ZW50cy5vblNlZWsuZGlzcGF0Y2godGhpcyk7XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUub25TZWVrUHJldmlld0V2ZW50ID0gZnVuY3Rpb24gKHBlcmNlbnRhZ2UsIHNjcnViYmluZykge1xyXG4gICAgICAgIHZhciBzbmFwcGVkTWFya2VyID0gdGhpcy5nZXRNYXJrZXJBdFBvc2l0aW9uKHBlcmNlbnRhZ2UpO1xyXG4gICAgICAgIHZhciBzZWVrUG9zaXRpb25QZXJjZW50YWdlID0gcGVyY2VudGFnZTtcclxuICAgICAgICBpZiAoc25hcHBlZE1hcmtlcikge1xyXG4gICAgICAgICAgICBpZiAoc25hcHBlZE1hcmtlci5kdXJhdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChwZXJjZW50YWdlIDwgc25hcHBlZE1hcmtlci5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNuYXAgdGhlIHBvc2l0aW9uIHRvIHRoZSBzdGFydCBvZiB0aGUgaW50ZXJ2YWwgaWYgdGhlIHNlZWsgaXMgd2l0aGluIHRoZSBsZWZ0IHNuYXAgbWFyZ2luXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2Uga25vdyB0aGF0IHdlIGFyZSB3aXRoaW4gYSBzbmFwIG1hcmdpbiB3aGVuIHdlIGFyZSBvdXRzaWRlIHRoZSBtYXJrZXIgaW50ZXJ2YWwgYnV0IHN0aWxsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSBhIHNuYXBwZWRNYXJrZXJcclxuICAgICAgICAgICAgICAgICAgICBzZWVrUG9zaXRpb25QZXJjZW50YWdlID0gc25hcHBlZE1hcmtlci5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBlcmNlbnRhZ2UgPiBzbmFwcGVkTWFya2VyLnBvc2l0aW9uICsgc25hcHBlZE1hcmtlci5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNuYXAgdGhlIHBvc2l0aW9uIHRvIHRoZSBlbmQgb2YgdGhlIGludGVydmFsIGlmIHRoZSBzZWVrIGlzIHdpdGhpbiB0aGUgcmlnaHQgc25hcCBtYXJnaW5cclxuICAgICAgICAgICAgICAgICAgICBzZWVrUG9zaXRpb25QZXJjZW50YWdlID0gc25hcHBlZE1hcmtlci5wb3NpdGlvbiArIHNuYXBwZWRNYXJrZXIuZHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBQb3NpdGlvbiBtYXJrZXJzIGFsd2F5cyBzbmFwIHRvIHRoZWlyIG1hcmtlciBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgc2Vla1Bvc2l0aW9uUGVyY2VudGFnZSA9IHNuYXBwZWRNYXJrZXIucG9zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubGFiZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbC5nZXREb21FbGVtZW50KCkuY3NzKHtcclxuICAgICAgICAgICAgICAgICdsZWZ0Jzogc2Vla1Bvc2l0aW9uUGVyY2VudGFnZSArICclJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2Vla0JhckV2ZW50cy5vblNlZWtQcmV2aWV3LmRpc3BhdGNoKHRoaXMsIHtcclxuICAgICAgICAgICAgc2NydWJiaW5nOiBzY3J1YmJpbmcsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBzZWVrUG9zaXRpb25QZXJjZW50YWdlLFxyXG4gICAgICAgICAgICBtYXJrZXI6IHNuYXBwZWRNYXJrZXIsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2Vla0Jhci5wcm90b3R5cGUub25TZWVrZWRFdmVudCA9IGZ1bmN0aW9uIChwZXJjZW50YWdlKSB7XHJcbiAgICAgICAgdGhpcy5zZWVrQmFyRXZlbnRzLm9uU2Vla2VkLmRpc3BhdGNoKHRoaXMsIHBlcmNlbnRhZ2UpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZWVrQmFyLnByb3RvdHlwZSwgXCJvblNlZWtcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiBhIHNjcnViYmluZyBzZWVrIG9wZXJhdGlvbiBpcyBzdGFydGVkLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudDxTZWVrQmFyLCBOb0FyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWVrQmFyRXZlbnRzLm9uU2Vlay5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNlZWtCYXIucHJvdG90eXBlLCBcIm9uU2Vla1ByZXZpZXdcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgZHVyaW5nIGEgc2NydWJiaW5nIHNlZWsgKHRvIGluZGljYXRlIHRoYXQgdGhlIHNlZWsgcHJldmlldywgaS5lLiB0aGUgdmlkZW8gZnJhbWUsXHJcbiAgICAgICAgICogc2hvdWxkIGJlIHVwZGF0ZWQpLCBvciBkdXJpbmcgYSBub3JtYWwgc2VlayBwcmV2aWV3IHdoZW4gdGhlIHNlZWsgYmFyIGlzIGhvdmVyZWQgKGFuZCB0aGUgc2VlayB0YXJnZXQsXHJcbiAgICAgICAgICogaS5lLiB0aGUgc2VlayBiYXIgbGFiZWwsIHNob3VsZCBiZSB1cGRhdGVkKS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnQ8U2Vla0JhciwgU2Vla1ByZXZpZXdFdmVudEFyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWVrQmFyRXZlbnRzLm9uU2Vla1ByZXZpZXcuZ2V0RXZlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZWVrQmFyLnByb3RvdHlwZSwgXCJvblNlZWtlZFwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgZXZlbnQgdGhhdCBpcyBmaXJlZCB3aGVuIGEgc2NydWJiaW5nIHNlZWsgaGFzIGZpbmlzaGVkIG9yIHdoZW4gYSBkaXJlY3Qgc2VlayBpcyBpc3N1ZWQuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PFNlZWtCYXIsIG51bWJlcj59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlZWtCYXJFdmVudHMub25TZWVrZWQuZ2V0RXZlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFNlZWtCYXIucHJvdG90eXBlLm9uU2hvd0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUub25TaG93RXZlbnQuY2FsbCh0aGlzKTtcclxuICAgICAgICAvLyBSZWZyZXNoIHRoZSBwb3NpdGlvbiBvZiB0aGUgcGxheWJhY2sgcG9zaXRpb24gd2hlbiB0aGUgc2VlayBiYXIgYmVjb21lcyB2aXNpYmxlLiBUbyBjb3JyZWN0bHkgc2V0IHRoZSBwb3NpdGlvbixcclxuICAgICAgICAvLyB0aGUgRE9NIGVsZW1lbnQgbXVzdCBiZSBmdWxseSBpbml0aWFsaXplZCBhbiBoYXZlIGl0cyBzaXplIGNhbGN1bGF0ZWQsIGJlY2F1c2UgdGhlIHBvc2l0aW9uIGlzIHNldCBhcyBhbiBhYnNvbHV0ZVxyXG4gICAgICAgIC8vIHZhbHVlIGNhbGN1bGF0ZWQgZnJvbSB0aGUgc2l6ZS4gVGhpcyByZXF1aXJlZCBzaXplIGlzIG5vdCBrbm93biB3aGVuIGl0IGlzIGhpZGRlbi5cclxuICAgICAgICAvLyBGb3Igc3VjaCBjYXNlcywgd2UgcmVmcmVzaCB0aGUgcG9zaXRpb24gaGVyZSBpbiBvblNob3cgYmVjYXVzZSBoZXJlIGl0IGlzIGd1YXJhbnRlZWQgdGhhdCB0aGUgY29tcG9uZW50IGtub3dzXHJcbiAgICAgICAgLy8gaXRzIHNpemUgYW5kIGNhbiBzZXQgdGhlIHBvc2l0aW9uIGNvcnJlY3RseS5cclxuICAgICAgICB0aGlzLnJlZnJlc2hQbGF5YmFja1Bvc2l0aW9uKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNlZWtCYXI7XHJcbn0oY29tcG9uZW50XzEuQ29tcG9uZW50KSk7XHJcblNlZWtCYXIuU01PT1RIX1BMQVlCQUNLX1BPU0lUSU9OX1VQREFURV9ESVNBQkxFRCA9IC0xO1xyXG4vKipcclxuICogVGhlIENTUyBjbGFzcyB0aGF0IGlzIGFkZGVkIHRvIHRoZSBET00gZWxlbWVudCB3aGlsZSB0aGUgc2VlayBiYXIgaXMgaW4gJ3NlZWtpbmcnIHN0YXRlLlxyXG4gKi9cclxuU2Vla0Jhci5DTEFTU19TRUVLSU5HID0gJ3NlZWtpbmcnO1xyXG5leHBvcnRzLlNlZWtCYXIgPSBTZWVrQmFyO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc2Vla2Jhci50c1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbnRhaW5lclwiKTtcclxudmFyIHVpdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91aXV0aWxzXCIpO1xyXG52YXIgc3BhY2VyXzEgPSByZXF1aXJlKFwiLi9zcGFjZXJcIik7XHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgbWFpbiBwbGF5ZXIgY29udHJvbCBjb21wb25lbnRzLCBlLmcuIHBsYXkgdG9nZ2xlIGJ1dHRvbiwgc2VlayBiYXIsIHZvbHVtZSBjb250cm9sLCBmdWxsc2NyZWVuIHRvZ2dsZVxyXG4gKiBidXR0b24uXHJcbiAqL1xyXG52YXIgQ29udHJvbEJhciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQ29udHJvbEJhciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENvbnRyb2xCYXIoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWNvbnRyb2xiYXInLFxyXG4gICAgICAgICAgICBoaWRkZW46IHRydWUsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBDb250cm9sQmFyLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIC8vIENvdW50cyBob3cgbWFueSBjb21wb25lbnRzIGFyZSBob3ZlcmVkIGFuZCBibG9jayBoaWRpbmcgb2YgdGhlIGNvbnRyb2wgYmFyXHJcbiAgICAgICAgdmFyIGhvdmVyU3RhY2tDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gVHJhY2sgaG92ZXIgc3RhdHVzIG9mIGNoaWxkIGNvbXBvbmVudHNcclxuICAgICAgICB1aXV0aWxzXzEuVUlVdGlscy50cmF2ZXJzZVRyZWUodGhpcywgZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3QgdHJhY2sgaG92ZXIgc3RhdHVzIG9mIGNoaWxkIGNvbnRhaW5lcnMgb3Igc3BhY2Vycywgb25seSBvZiAncmVhbCcgY29udHJvbHNcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCBpbnN0YW5jZW9mIGNvbnRhaW5lcl8xLkNvbnRhaW5lciB8fCBjb21wb25lbnQgaW5zdGFuY2VvZiBzcGFjZXJfMS5TcGFjZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTdWJzY3JpYmUgaG92ZXIgZXZlbnQgYW5kIGtlZXAgYSBjb3VudCBvZiB0aGUgbnVtYmVyIG9mIGhvdmVyZWQgY2hpbGRyZW5cclxuICAgICAgICAgICAgY29tcG9uZW50Lm9uSG92ZXJDaGFuZ2VkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5ob3ZlcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJTdGFja0NvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBob3ZlclN0YWNrQ291bnQtLTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdWltYW5hZ2VyLm9uQ29udHJvbHNTaG93LnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNob3coKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB1aW1hbmFnZXIub25QcmV2aWV3Q29udHJvbHNIaWRlLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgICAgIC8vIENhbmNlbCB0aGUgaGlkZSBldmVudCBpZiBob3ZlcmVkIGNoaWxkIGNvbXBvbmVudHMgYmxvY2sgaGlkaW5nXHJcbiAgICAgICAgICAgIGFyZ3MuY2FuY2VsID0gKGhvdmVyU3RhY2tDb3VudCA+IDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzSGlkZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbnRyb2xCYXI7XHJcbn0oY29udGFpbmVyXzEuQ29udGFpbmVyKSk7XHJcbmV4cG9ydHMuQ29udHJvbEJhciA9IENvbnRyb2xCYXI7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jb250cm9sYmFyLnRzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29udGFpbmVyXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2NvbnRhaW5lclwiKTtcclxudmFyIFVJVXRpbHM7XHJcbihmdW5jdGlvbiAoVUlVdGlscykge1xyXG4gICAgZnVuY3Rpb24gdHJhdmVyc2VUcmVlKGNvbXBvbmVudCwgdmlzaXQpIHtcclxuICAgICAgICB2YXIgcmVjdXJzaXZlVHJlZVdhbGtlciA9IGZ1bmN0aW9uIChjb21wb25lbnQsIHBhcmVudCkge1xyXG4gICAgICAgICAgICB2aXNpdChjb21wb25lbnQsIHBhcmVudCk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IGNvbXBvbmVudCBpcyBhIGNvbnRhaW5lciwgdmlzaXQgaXQncyBjaGlsZHJlblxyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50IGluc3RhbmNlb2YgY29udGFpbmVyXzEuQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gY29tcG9uZW50LmdldENvbXBvbmVudHMoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRDb21wb25lbnQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlVHJlZVdhbGtlcihjaGlsZENvbXBvbmVudCwgY29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gV2FsayBhbmQgY29uZmlndXJlIHRoZSBjb21wb25lbnQgdHJlZVxyXG4gICAgICAgIHJlY3Vyc2l2ZVRyZWVXYWxrZXIoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIFVJVXRpbHMudHJhdmVyc2VUcmVlID0gdHJhdmVyc2VUcmVlO1xyXG59KShVSVV0aWxzID0gZXhwb3J0cy5VSVV0aWxzIHx8IChleHBvcnRzLlVJVXRpbHMgPSB7fSkpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL3VpdXRpbHMudHNcbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRcIik7XHJcbi8qKlxyXG4gKiBBIGR1bW15IGNvbXBvbmVudCB0aGF0IGp1c3QgcmVzZXJ2ZXMgc29tZSBzcGFjZSBhbmQgZG9lcyBub3RoaW5nIGVsc2UuXHJcbiAqL1xyXG52YXIgU3BhY2VyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTcGFjZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTcGFjZXIoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXNwYWNlcicsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTcGFjZXIucHJvdG90eXBlLm9uU2hvd0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGRpc2FibGUgZXZlbnQgZmlyaW5nIGJ5IG92ZXJ3cml0aW5nIGFuZCBub3QgY2FsbGluZyBzdXBlclxyXG4gICAgfTtcclxuICAgIFNwYWNlci5wcm90b3R5cGUub25IaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gZGlzYWJsZSBldmVudCBmaXJpbmcgYnkgb3ZlcndyaXRpbmcgYW5kIG5vdCBjYWxsaW5nIHN1cGVyXHJcbiAgICB9O1xyXG4gICAgU3BhY2VyLnByb3RvdHlwZS5vbkhvdmVyQ2hhbmdlZEV2ZW50ID0gZnVuY3Rpb24gKGhvdmVyZWQpIHtcclxuICAgICAgICAvLyBkaXNhYmxlIGV2ZW50IGZpcmluZyBieSBvdmVyd3JpdGluZyBhbmQgbm90IGNhbGxpbmcgc3VwZXJcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3BhY2VyO1xyXG59KGNvbXBvbmVudF8xLkNvbXBvbmVudCkpO1xyXG5leHBvcnRzLlNwYWNlciA9IFNwYWNlcjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3NwYWNlci50c1xuLy8gbW9kdWxlIGlkID0gMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbnRhaW5lclwiKTtcclxudmFyIGNvbXBvbmVudF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50XCIpO1xyXG52YXIgc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9zZWxlY3Rib3hcIik7XHJcbnZhciBsYWJlbF8xID0gcmVxdWlyZShcIi4vbGFiZWxcIik7XHJcbnZhciB2aWRlb3F1YWxpdHlzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL3ZpZGVvcXVhbGl0eXNlbGVjdGJveFwiKTtcclxudmFyIGF1ZGlvcXVhbGl0eXNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vYXVkaW9xdWFsaXR5c2VsZWN0Ym94XCIpO1xyXG52YXIgdGltZW91dF8xID0gcmVxdWlyZShcIi4uL3RpbWVvdXRcIik7XHJcbnZhciBldmVudGRpc3BhdGNoZXJfMSA9IHJlcXVpcmUoXCIuLi9ldmVudGRpc3BhdGNoZXJcIik7XHJcbi8qKlxyXG4gKiBBIHBhbmVsIGNvbnRhaW5pbmcgYSBsaXN0IG9mIHtAbGluayBTZXR0aW5nc1BhbmVsSXRlbSBpdGVtc30gdGhhdCByZXByZXNlbnQgbGFiZWxsZWQgc2V0dGluZ3MuXHJcbiAqL1xyXG52YXIgU2V0dGluZ3NQYW5lbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU2V0dGluZ3NQYW5lbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNldHRpbmdzUGFuZWwoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnNldHRpbmdzUGFuZWxFdmVudHMgPSB7XHJcbiAgICAgICAgICAgIG9uU2V0dGluZ3NTdGF0ZUNoYW5nZWQ6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXNldHRpbmdzLXBhbmVsJyxcclxuICAgICAgICAgICAgaGlkZURlbGF5OiAzMDAwLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU2V0dGluZ3NQYW5lbC5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTsgLy8gVE9ETyBmaXggZ2VuZXJpY3MgdHlwZSBpbmZlcmVuY2VcclxuICAgICAgICBpZiAoY29uZmlnLmhpZGVEZWxheSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZVRpbWVvdXQgPSBuZXcgdGltZW91dF8xLlRpbWVvdXQoY29uZmlnLmhpZGVEZWxheSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZUhvdmVyZWRTZWxlY3RCb3hlcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5vblNob3cuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFjdGl2YXRlIHRpbWVvdXQgd2hlbiBzaG93blxyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZVRpbWVvdXQuc3RhcnQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RG9tRWxlbWVudCgpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gT24gbW91c2UgZW50ZXIgY2xlYXIgdGhlIHRpbWVvdXRcclxuICAgICAgICAgICAgICAgIF90aGlzLmhpZGVUaW1lb3V0LmNsZWFyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIE9uIG1vdXNlIGxlYXZlIGFjdGl2YXRlIHRoZSB0aW1lb3V0XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlVGltZW91dC5yZXNldCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5vbkhpZGUuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRpbWVvdXQgd2hlbiBoaWRkZW4gZnJvbSBvdXRzaWRlXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlVGltZW91dC5jbGVhcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRmlyZSBldmVudCB3aGVuIHRoZSBzdGF0ZSBvZiBhIHNldHRpbmdzLWl0ZW0gaGFzIGNoYW5nZWRcclxuICAgICAgICB2YXIgc2V0dGluZ3NTdGF0ZUNoYW5nZWRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vblNldHRpbmdzU3RhdGVDaGFuZ2VkRXZlbnQoKTtcclxuICAgICAgICAgICAgLy8gQXR0YWNoIG1hcmtlciBjbGFzcyB0byBsYXN0IHZpc2libGUgaXRlbVxyXG4gICAgICAgICAgICB2YXIgbGFzdFNob3duSXRlbSA9IG51bGw7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy5nZXRJdGVtcygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3MoX3RoaXMucHJlZml4Q3NzKFNldHRpbmdzUGFuZWwuQ0xBU1NfTEFTVCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5pc1Nob3duKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0U2hvd25JdGVtID0gY29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsYXN0U2hvd25JdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2hvd25JdGVtLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyhfdGhpcy5wcmVmaXhDc3MoU2V0dGluZ3NQYW5lbC5DTEFTU19MQVNUKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmdldEl0ZW1zKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGNvbXBvbmVudC5vbkFjdGl2ZUNoYW5nZWQuc3Vic2NyaWJlKHNldHRpbmdzU3RhdGVDaGFuZ2VkSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSGFjayBmb3IgSUUgKyBGaXJlZm94XHJcbiAgICAgKiB3aGVuIHRoZSBzZXR0aW5ncyBwYW5lbCBmYWRlcyBvdXQgd2hpbGUgYW4gaXRlbSBvZiBhIHNlbGVjdCBib3ggaXMgc3RpbGwgaG92ZXJlZCwgdGhlIHNlbGVjdCBib3ggd2lsbCBub3QgZmFkZSBvdXRcclxuICAgICAqIHdoaWxlIHRoZSBzZXR0aW5ncyBwYW5lbCBkb2VzLiBUaGlzIHdvdWxkIGxlYXZlIGEgZmxvYXRpbmcgc2VsZWN0IGJveCwgd2hpY2ggaXMganVzdCB3ZWlyZFxyXG4gICAgICovXHJcbiAgICBTZXR0aW5nc1BhbmVsLnByb3RvdHlwZS5oaWRlSG92ZXJlZFNlbGVjdEJveGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ2V0SXRlbXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmlzQWN0aXZlKCkgJiYgaXRlbS5zZXR0aW5nIGluc3RhbmNlb2Ygc2VsZWN0Ym94XzEuU2VsZWN0Qm94KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0Qm94XzEgPSBpdGVtLnNldHRpbmc7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2xkRGlzcGxheV8xID0gc2VsZWN0Qm94XzEuZ2V0RG9tRWxlbWVudCgpLmNzcygnZGlzcGxheScpO1xyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRpbmcgdGhlIGRpc3BsYXkgdG8gbm9uZSBtYXJrcyB0aGUgc2VsZWN0LWJveCBhcyBpbmFjdGl2ZSwgc28gaXQgd2lsbCBiZSBoaWRkZW4gd2l0aCB0aGUgcmVzdFxyXG4gICAgICAgICAgICAgICAgLy8gd2UganVzdCBoYXZlIHRvIG1ha2Ugc3VyZSB0byByZXNldCB0aGlzIGFzIHNvb24gYXMgcG9zc2libGVcclxuICAgICAgICAgICAgICAgIHNlbGVjdEJveF8xLmdldERvbUVsZW1lbnQoKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgeyBzZWxlY3RCb3hfMS5nZXREb21FbGVtZW50KCkuY3NzKCdkaXNwbGF5Jywgb2xkRGlzcGxheV8xKTsgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJRTkgaGFzIG5vIHJlcXVlc3RBbmltYXRpb25GcmFtZSwgc2V0IHRoZSB2YWx1ZSBkaXJlY3RseS4gSXQgaGFzIG5vIG9wdGltaXphdGlvbiBhYm91dCBpZ25vcmluZyBET00tY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJldHdlZW4gYW5pbWF0aW9uRnJhbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0Qm94XzEuZ2V0RG9tRWxlbWVudCgpLmNzcygnZGlzcGxheScsIG9sZERpc3BsYXlfMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTZXR0aW5nc1BhbmVsLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVsZWFzZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGlmICh0aGlzLmhpZGVUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZVRpbWVvdXQuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlcmUgYXJlIGFjdGl2ZSBzZXR0aW5ncyB3aXRoaW4gdGhpcyBzZXR0aW5ncyBwYW5lbC4gQW4gYWN0aXZlIHNldHRpbmcgaXMgYSBzZXR0aW5nIHRoYXQgaXMgdmlzaWJsZVxyXG4gICAgICogYW5kIGVuYWJsZWQsIHdoaWNoIHRoZSB1c2VyIGNhbiBpbnRlcmFjdCB3aXRoLlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlcmUgYXJlIGFjdGl2ZSBzZXR0aW5ncywgZmFsc2UgaWYgdGhlIHBhbmVsIGlzIGZ1bmN0aW9uYWxseSBlbXB0eSB0byBhIHVzZXJcclxuICAgICAqL1xyXG4gICAgU2V0dGluZ3NQYW5lbC5wcm90b3R5cGUuaGFzQWN0aXZlU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZ2V0SXRlbXMoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5pc0FjdGl2ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgU2V0dGluZ3NQYW5lbC5wcm90b3R5cGUuZ2V0SXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmNvbXBvbmVudHMuZmlsdGVyKGZ1bmN0aW9uIChjb21wb25lbnQpIHsgcmV0dXJuIGNvbXBvbmVudCBpbnN0YW5jZW9mIFNldHRpbmdzUGFuZWxJdGVtOyB9KTtcclxuICAgIH07XHJcbiAgICBTZXR0aW5nc1BhbmVsLnByb3RvdHlwZS5vblNldHRpbmdzU3RhdGVDaGFuZ2VkRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc1BhbmVsRXZlbnRzLm9uU2V0dGluZ3NTdGF0ZUNoYW5nZWQuZGlzcGF0Y2godGhpcyk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldHRpbmdzUGFuZWwucHJvdG90eXBlLCBcIm9uU2V0dGluZ3NTdGF0ZUNoYW5nZWRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiBvbmUgb3IgbW9yZSB7QGxpbmsgU2V0dGluZ3NQYW5lbEl0ZW0gaXRlbXN9IGhhdmUgY2hhbmdlZCBzdGF0ZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnQ8U2V0dGluZ3NQYW5lbCwgTm9BcmdzPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NQYW5lbEV2ZW50cy5vblNldHRpbmdzU3RhdGVDaGFuZ2VkLmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gU2V0dGluZ3NQYW5lbDtcclxufShjb250YWluZXJfMS5Db250YWluZXIpKTtcclxuU2V0dGluZ3NQYW5lbC5DTEFTU19MQVNUID0gJ2xhc3QnO1xyXG5leHBvcnRzLlNldHRpbmdzUGFuZWwgPSBTZXR0aW5nc1BhbmVsO1xyXG4vKipcclxuICogQW4gaXRlbSBmb3IgYSB7QGxpbmsgU2V0dGluZ3NQYW5lbH0sXHJcbiAqIENvbnRhaW5pbmcgYW4gb3B0aW9ubmFsIHtAbGluayBMYWJlbH0gYW5kIGEgY29tcG9uZW50IHRoYXQgY29uZmlndXJlcyBhIHNldHRpbmcuXHJcbiAqIElmIHRoZSBjb21wb25lbnRzIGlzIGEge0BsaW5rIFNlbGVjdEJveH0gaXQgd2lsbCBoYW5kbGUgdGhlIGxvZ2ljIG9mIGRpc3BsYXlpbmcgaXQgb3Igbm90XHJcbiAqL1xyXG52YXIgU2V0dGluZ3NQYW5lbEl0ZW0gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFNldHRpbmdzUGFuZWxJdGVtLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2V0dGluZ3NQYW5lbEl0ZW0obGFiZWwsIHNldHRpbmcsIGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zZXR0aW5nc1BhbmVsSXRlbUV2ZW50cyA9IHtcclxuICAgICAgICAgICAgb25BY3RpdmVDaGFuZ2VkOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgfTtcclxuICAgICAgICBfdGhpcy5zZXR0aW5nID0gc2V0dGluZztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1zZXR0aW5ncy1wYW5lbC1pdGVtJyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIGlmIChsYWJlbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAobGFiZWwgaW5zdGFuY2VvZiBjb21wb25lbnRfMS5Db21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmxhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5sYWJlbCA9IG5ldyBsYWJlbF8xLkxhYmVsKHsgdGV4dDogbGFiZWwgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuYWRkQ29tcG9uZW50KF90aGlzLmxhYmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3RoaXMuYWRkQ29tcG9uZW50KF90aGlzLnNldHRpbmcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFNldHRpbmdzUGFuZWxJdGVtLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmcgaW5zdGFuY2VvZiBzZWxlY3Rib3hfMS5TZWxlY3RCb3gpIHtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZUNvbmZpZ0l0ZW1DaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMuc2V0dGluZyBpbnN0YW5jZW9mIHNlbGVjdGJveF8xLlNlbGVjdEJveCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgbWluaW11bSBudW1iZXIgb2YgaXRlbXMgdGhhdCBtdXN0IGJlIGF2YWlsYWJsZSBmb3IgdGhlIHNldHRpbmcgdG8gYmUgZGlzcGxheWVkXHJcbiAgICAgICAgICAgICAgICAvLyBCeSBkZWZhdWx0LCBhdCBsZWFzdCB0d28gaXRlbXMgbXVzdCBiZSBhdmFpbGFibGUsIGVsc2UgYSBzZWxlY3Rpb24gaXMgbm90IHBvc3NpYmxlXHJcbiAgICAgICAgICAgICAgICB2YXIgbWluSXRlbXNUb0Rpc3BsYXkgPSAyO1xyXG4gICAgICAgICAgICAgICAgLy8gQXVkaW8vdmlkZW8gcXVhbGl0eSBzZWxlY3QgYm94ZXMgY29udGFpbiBhbiBhZGRpdGlvbmFsICdhdXRvJyBtb2RlLCB3aGljaCBpbiBjb21iaW5hdGlvbiB3aXRoIGEgc2luZ2xlXHJcbiAgICAgICAgICAgICAgICAvLyBhdmFpbGFibGUgcXVhbGl0eSBhbHNvIGRvZXMgbm90IG1ha2Ugc2Vuc2VcclxuICAgICAgICAgICAgICAgIGlmICgoX3RoaXMuc2V0dGluZyBpbnN0YW5jZW9mIHZpZGVvcXVhbGl0eXNlbGVjdGJveF8xLlZpZGVvUXVhbGl0eVNlbGVjdEJveCAmJiBfdGhpcy5zZXR0aW5nLmhhc0F1dG9JdGVtKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgfHwgX3RoaXMuc2V0dGluZyBpbnN0YW5jZW9mIGF1ZGlvcXVhbGl0eXNlbGVjdGJveF8xLkF1ZGlvUXVhbGl0eVNlbGVjdEJveCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbkl0ZW1zVG9EaXNwbGF5ID0gMztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEhpZGUgdGhlIHNldHRpbmcgaWYgbm8gbWVhbmluZ2Z1bCBjaG9pY2UgaXMgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuc2V0dGluZy5pdGVtQ291bnQoKSA8IG1pbkl0ZW1zVG9EaXNwbGF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gVmlzaWJpbGl0eSBtaWdodCBoYXZlIGNoYW5nZWQgYW5kIHRoZXJlZm9yZSB0aGUgYWN0aXZlIHN0YXRlIG1pZ2h0IGhhdmUgY2hhbmdlZCBzbyB3ZSBmaXJlIHRoZSBldmVudFxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyBmaXJlIG9ubHkgd2hlbiBzdGF0ZSBoYXMgcmVhbGx5IGNoYW5nZWQgKGUuZy4gY2hlY2sgaWYgdmlzaWJpbGl0eSBoYXMgcmVhbGx5IGNoYW5nZWQpXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vbkFjdGl2ZUNoYW5nZWRFdmVudCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmcub25JdGVtQWRkZWQuc3Vic2NyaWJlKGhhbmRsZUNvbmZpZ0l0ZW1DaGFuZ2VkKTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5nLm9uSXRlbVJlbW92ZWQuc3Vic2NyaWJlKGhhbmRsZUNvbmZpZ0l0ZW1DaGFuZ2VkKTtcclxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBoaWRkZW4gc3RhdGVcclxuICAgICAgICAgICAgaGFuZGxlQ29uZmlnSXRlbUNoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhpcyBzZXR0aW5ncyBwYW5lbCBpdGVtIGlzIGFjdGl2ZSwgaS5lLiB2aXNpYmxlIGFuZCBlbmFibGVkIGFuZCBhIHVzZXIgY2FuIGludGVyYWN0IHdpdGggaXQuXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgcGFuZWwgaXMgYWN0aXZlLCBlbHNlIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIFNldHRpbmdzUGFuZWxJdGVtLnByb3RvdHlwZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc1Nob3duKCk7XHJcbiAgICB9O1xyXG4gICAgU2V0dGluZ3NQYW5lbEl0ZW0ucHJvdG90eXBlLm9uQWN0aXZlQ2hhbmdlZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NQYW5lbEl0ZW1FdmVudHMub25BY3RpdmVDaGFuZ2VkLmRpc3BhdGNoKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXR0aW5nc1BhbmVsSXRlbS5wcm90b3R5cGUsIFwib25BY3RpdmVDaGFuZ2VkXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlICdhY3RpdmUnIHN0YXRlIG9mIHRoaXMgaXRlbSBjaGFuZ2VzLlxyXG4gICAgICAgICAqIEBzZWUgI2lzQWN0aXZlXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PFNldHRpbmdzUGFuZWxJdGVtLCBOb0FyZ3M+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5nc1BhbmVsSXRlbUV2ZW50cy5vbkFjdGl2ZUNoYW5nZWQuZ2V0RXZlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBTZXR0aW5nc1BhbmVsSXRlbTtcclxufShjb250YWluZXJfMS5Db250YWluZXIpKTtcclxuZXhwb3J0cy5TZXR0aW5nc1BhbmVsSXRlbSA9IFNldHRpbmdzUGFuZWxJdGVtO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc2V0dGluZ3NwYW5lbC50c1xuLy8gbW9kdWxlIGlkID0gMjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL3NlbGVjdGJveFwiKTtcclxuLyoqXHJcbiAqIEEgc2VsZWN0IGJveCBwcm92aWRpbmcgYSBzZWxlY3Rpb24gYmV0d2VlbiAnYXV0bycgYW5kIHRoZSBhdmFpbGFibGUgdmlkZW8gcXVhbGl0aWVzLlxyXG4gKi9cclxudmFyIFZpZGVvUXVhbGl0eVNlbGVjdEJveCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVmlkZW9RdWFsaXR5U2VsZWN0Qm94LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVmlkZW9RdWFsaXR5U2VsZWN0Qm94KGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBWaWRlb1F1YWxpdHlTZWxlY3RCb3gucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIHNlbGVjdEN1cnJlbnRWaWRlb1F1YWxpdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuZ2V0VmlkZW9RdWFsaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSBwbGF5ZXIgNy4zLjFcclxuICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdEl0ZW0ocGxheWVyLmdldFZpZGVvUXVhbGl0eSgpLmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBwbGF5ZXJzIDw9IDcuMy4wXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPIHJlbW92ZSBpbiBuZXh0IG1ham9yIHJlbGVhc2VcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcGxheWVyLmdldERvd25sb2FkZWRWaWRlb0RhdGEoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdEl0ZW0oZGF0YS5pc0F1dG8gPyAnYXV0bycgOiBkYXRhLmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHVwZGF0ZVZpZGVvUXVhbGl0aWVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdmlkZW9RdWFsaXRpZXMgPSBwbGF5ZXIuZ2V0QXZhaWxhYmxlVmlkZW9RdWFsaXRpZXMoKTtcclxuICAgICAgICAgICAgX3RoaXMuY2xlYXJJdGVtcygpO1xyXG4gICAgICAgICAgICAvLyBQcm9ncmVzc2l2ZSBzdHJlYW1zIGRvIG5vdCBzdXBwb3J0IGF1dG9tYXRpYyBxdWFsaXR5IHNlbGVjdGlvblxyXG4gICAgICAgICAgICBfdGhpcy5oYXNBdXRvID0gcGxheWVyLmdldFN0cmVhbVR5cGUoKSAhPT0gJ3Byb2dyZXNzaXZlJztcclxuICAgICAgICAgICAgaWYgKF90aGlzLmhhc0F1dG8pIHtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBlbnRyeSBmb3IgYXV0b21hdGljIHF1YWxpdHkgc3dpdGNoaW5nIChkZWZhdWx0IHNldHRpbmcpXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hZGRJdGVtKCdhdXRvJywgJ2F1dG8nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBZGQgdmlkZW8gcXVhbGl0aWVzXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmlkZW9RdWFsaXRpZXNfMSA9IHZpZGVvUXVhbGl0aWVzOyBfaSA8IHZpZGVvUXVhbGl0aWVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmlkZW9RdWFsaXR5ID0gdmlkZW9RdWFsaXRpZXNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hZGRJdGVtKHZpZGVvUXVhbGl0eS5pZCwgdmlkZW9RdWFsaXR5LmxhYmVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTZWxlY3QgaW5pdGlhbCBxdWFsaXR5XHJcbiAgICAgICAgICAgIHNlbGVjdEN1cnJlbnRWaWRlb1F1YWxpdHkoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25JdGVtU2VsZWN0ZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5zZXRWaWRlb1F1YWxpdHkodmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBxdWFsaXRpZXMgd2hlbiBzb3VyY2UgZ29lcyBhd2F5XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU09VUkNFX1VOTE9BREVELCB1cGRhdGVWaWRlb1F1YWxpdGllcyk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHF1YWxpdGllcyB3aGVuIGEgbmV3IHNvdXJjZSBpcyBsb2FkZWRcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgdXBkYXRlVmlkZW9RdWFsaXRpZXMpO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBxdWFsaXRpZXMgd2hlbiB0aGUgcGVyaW9kIHdpdGhpbiBhIHNvdXJjZSBjaGFuZ2VzXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUEVSSU9EX1NXSVRDSEVELCB1cGRhdGVWaWRlb1F1YWxpdGllcyk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHF1YWxpdHkgc2VsZWN0aW9uIHdoZW4gcXVhbGl0eSBpcyBjaGFuZ2VkIChmcm9tIG91dHNpZGUpXHJcbiAgICAgICAgaWYgKHBsYXllci5FVkVOVC5PTl9WSURFT19RVUFMSVRZX0NIQU5HRUQpIHtcclxuICAgICAgICAgICAgLy8gU2luY2UgcGxheWVyIDcuMy4xXHJcbiAgICAgICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1ZJREVPX1FVQUxJVFlfQ0hBTkdFRCwgc2VsZWN0Q3VycmVudFZpZGVvUXVhbGl0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBmb3IgcGxheWVycyA8PSA3LjMuMFxyXG4gICAgICAgICAgICAvLyBUT0RPIHJlbW92ZSBpbiBuZXh0IG1ham9yIHJlbGVhc2VcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVklERU9fRE9XTkxPQURfUVVBTElUWV9DSEFOR0UsIHNlbGVjdEN1cnJlbnRWaWRlb1F1YWxpdHkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc2VsZWN0IGJveCBjb250YWlucyBhbiAnYXV0bycgaXRlbSBmb3IgYXV0b21hdGljIHF1YWxpdHkgc2VsZWN0aW9uIG1vZGUuXHJcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBWaWRlb1F1YWxpdHlTZWxlY3RCb3gucHJvdG90eXBlLmhhc0F1dG9JdGVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhc0F1dG87XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZpZGVvUXVhbGl0eVNlbGVjdEJveDtcclxufShzZWxlY3Rib3hfMS5TZWxlY3RCb3gpKTtcclxuZXhwb3J0cy5WaWRlb1F1YWxpdHlTZWxlY3RCb3ggPSBWaWRlb1F1YWxpdHlTZWxlY3RCb3g7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy92aWRlb3F1YWxpdHlzZWxlY3Rib3gudHNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9zZWxlY3Rib3hcIik7XHJcbi8qKlxyXG4gKiBBIHNlbGVjdCBib3ggcHJvdmlkaW5nIGEgc2VsZWN0aW9uIGJldHdlZW4gJ2F1dG8nIGFuZCB0aGUgYXZhaWxhYmxlIGF1ZGlvIHF1YWxpdGllcy5cclxuICovXHJcbnZhciBBdWRpb1F1YWxpdHlTZWxlY3RCb3ggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEF1ZGlvUXVhbGl0eVNlbGVjdEJveCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEF1ZGlvUXVhbGl0eVNlbGVjdEJveChjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgQXVkaW9RdWFsaXR5U2VsZWN0Qm94LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHZhciBzZWxlY3RDdXJyZW50QXVkaW9RdWFsaXR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmdldEF1ZGlvUXVhbGl0eSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgcGxheWVyIDcuMy4xXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZWxlY3RJdGVtKHBsYXllci5nZXRBdWRpb1F1YWxpdHkoKS5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBmb3IgcGxheWVycyA8PSA3LjMuMFxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyByZW1vdmUgaW4gbmV4dCBtYWpvciByZWxlYXNlXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHBsYXllci5nZXREb3dubG9hZGVkQXVkaW9EYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZWxlY3RJdGVtKGRhdGEuaXNBdXRvID8gJ2F1dG8nIDogZGF0YS5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB1cGRhdGVBdWRpb1F1YWxpdGllcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGF1ZGlvUXVhbGl0aWVzID0gcGxheWVyLmdldEF2YWlsYWJsZUF1ZGlvUXVhbGl0aWVzKCk7XHJcbiAgICAgICAgICAgIF90aGlzLmNsZWFySXRlbXMoKTtcclxuICAgICAgICAgICAgLy8gQWRkIGVudHJ5IGZvciBhdXRvbWF0aWMgcXVhbGl0eSBzd2l0Y2hpbmcgKGRlZmF1bHQgc2V0dGluZylcclxuICAgICAgICAgICAgX3RoaXMuYWRkSXRlbSgnYXV0bycsICdhdXRvJyk7XHJcbiAgICAgICAgICAgIC8vIEFkZCBhdWRpbyBxdWFsaXRpZXNcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhdWRpb1F1YWxpdGllc18xID0gYXVkaW9RdWFsaXRpZXM7IF9pIDwgYXVkaW9RdWFsaXRpZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBhdWRpb1F1YWxpdHkgPSBhdWRpb1F1YWxpdGllc18xW19pXTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmFkZEl0ZW0oYXVkaW9RdWFsaXR5LmlkLCBhdWRpb1F1YWxpdHkubGFiZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFNlbGVjdCBpbml0aWFsIHF1YWxpdHlcclxuICAgICAgICAgICAgc2VsZWN0Q3VycmVudEF1ZGlvUXVhbGl0eSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1TZWxlY3RlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgdmFsdWUpIHtcclxuICAgICAgICAgICAgcGxheWVyLnNldEF1ZGlvUXVhbGl0eSh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHF1YWxpdGllcyB3aGVuIGF1ZGlvIHRyYWNrIGhhcyBjaGFuZ2VkXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQVVESU9fQ0hBTkdFRCwgdXBkYXRlQXVkaW9RdWFsaXRpZXMpO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBxdWFsaXRpZXMgd2hlbiBzb3VyY2UgZ29lcyBhd2F5XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU09VUkNFX1VOTE9BREVELCB1cGRhdGVBdWRpb1F1YWxpdGllcyk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHF1YWxpdGllcyB3aGVuIGEgbmV3IHNvdXJjZSBpcyBsb2FkZWRcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgdXBkYXRlQXVkaW9RdWFsaXRpZXMpO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBxdWFsaXRpZXMgd2hlbiB0aGUgcGVyaW9kIHdpdGhpbiBhIHNvdXJjZSBjaGFuZ2VzXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUEVSSU9EX1NXSVRDSEVELCB1cGRhdGVBdWRpb1F1YWxpdGllcyk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHF1YWxpdHkgc2VsZWN0aW9uIHdoZW4gcXVhbGl0eSBpcyBjaGFuZ2VkIChmcm9tIG91dHNpZGUpXHJcbiAgICAgICAgaWYgKHBsYXllci5FVkVOVC5PTl9BVURJT19RVUFMSVRZX0NIQU5HRUQpIHtcclxuICAgICAgICAgICAgLy8gU2luY2UgcGxheWVyIDcuMy4xXHJcbiAgICAgICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0FVRElPX1FVQUxJVFlfQ0hBTkdFRCwgc2VsZWN0Q3VycmVudEF1ZGlvUXVhbGl0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBmb3IgcGxheWVycyA8PSA3LjMuMFxyXG4gICAgICAgICAgICAvLyBUT0RPIHJlbW92ZSBpbiBuZXh0IG1ham9yIHJlbGVhc2VcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQVVESU9fRE9XTkxPQURfUVVBTElUWV9DSEFOR0UsIHNlbGVjdEN1cnJlbnRBdWRpb1F1YWxpdHkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQXVkaW9RdWFsaXR5U2VsZWN0Qm94O1xyXG59KHNlbGVjdGJveF8xLlNlbGVjdEJveCkpO1xyXG5leHBvcnRzLkF1ZGlvUXVhbGl0eVNlbGVjdEJveCA9IEF1ZGlvUXVhbGl0eVNlbGVjdEJveDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2F1ZGlvcXVhbGl0eXNlbGVjdGJveC50c1xuLy8gbW9kdWxlIGlkID0gMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBidXR0b25fMSA9IHJlcXVpcmUoXCIuLi9idXR0b25cIik7XHJcbnZhciBTdWJ0aXRsZVNldHRpbmdzQnV0dG9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTdWJ0aXRsZVNldHRpbmdzQnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3VidGl0bGVTZXR0aW5nc0J1dHRvbihjb25maWcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc3VidGl0bGVTZXR0aW5nc1BhbmVsID0gY29uZmlnLnN1YnRpdGxlU2V0dGluZ3NQYW5lbDtcclxuICAgICAgICBfdGhpcy5zZXR0aW5nc1BhbmVsID0gY29uZmlnLnNldHRpbmdzUGFuZWw7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFN1YnRpdGxlU2V0dGluZ3NCdXR0b247XHJcbn0oYnV0dG9uXzEuQnV0dG9uKSk7XHJcbmV4cG9ydHMuU3VidGl0bGVTZXR0aW5nc0J1dHRvbiA9IFN1YnRpdGxlU2V0dGluZ3NCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NidXR0b24udHNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgc2Vla2Jhcl8xID0gcmVxdWlyZShcIi4vc2Vla2JhclwiKTtcclxuLyoqXHJcbiAqIEEgc2ltcGxlIHZvbHVtZSBzbGlkZXIgY29tcG9uZW50IHRvIGFkanVzdCB0aGUgcGxheWVyJ3Mgdm9sdW1lIHNldHRpbmcuXHJcbiAqL1xyXG52YXIgVm9sdW1lU2xpZGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhWb2x1bWVTbGlkZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBWb2x1bWVTbGlkZXIoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXZvbHVtZXNsaWRlcicsXHJcbiAgICAgICAgICAgIGhpZGVJZlZvbHVtZUNvbnRyb2xQcm9oaWJpdGVkOiB0cnVlLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVm9sdW1lU2xpZGVyLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIsIGZhbHNlKTtcclxuICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcclxuICAgICAgICBpZiAoY29uZmlnLmhpZGVJZlZvbHVtZUNvbnRyb2xQcm9oaWJpdGVkICYmICF0aGlzLmRldGVjdFZvbHVtZUNvbnRyb2xBdmFpbGFiaWxpdHkoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgLy8gV2UgY2FuIGp1c3QgcmV0dXJuIGZyb20gaGVyZSwgYmVjYXVzZSB0aGUgdXNlciB3aWxsIG5ldmVyIGludGVyYWN0IHdpdGggdGhlIGNvbnRyb2wgYW5kIGFueSBjb25maWd1cmVkXHJcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uYWxpdHkgd291bGQgb25seSBlYXQgcmVzb3VyY2VzIGZvciBubyByZWFzb24uXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZvbHVtZUNoYW5nZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNNdXRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRQbGF5YmFja1Bvc2l0aW9uKDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0UGxheWJhY2tQb3NpdGlvbihwbGF5ZXIuZ2V0Vm9sdW1lKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgdm9sdW1lQ2hhbmdlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVk9MVU1FX0NIQU5HRUQsIHZvbHVtZUNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX01VVEVELCB2b2x1bWVDaGFuZ2VIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9VTk1VVEVELCB2b2x1bWVDaGFuZ2VIYW5kbGVyKTtcclxuICAgICAgICB0aGlzLm9uU2Vla1ByZXZpZXcuc3Vic2NyaWJlUmF0ZUxpbWl0ZWQoZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgICAgICBpZiAoYXJncy5zY3J1YmJpbmcpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5zZXRWb2x1bWUoYXJncy5wb3NpdGlvbiwgVm9sdW1lU2xpZGVyLmlzc3Vlck5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgNTApO1xyXG4gICAgICAgIHRoaXMub25TZWVrZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIHBlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgcGxheWVyLnNldFZvbHVtZShwZXJjZW50YWdlLCBWb2x1bWVTbGlkZXIuaXNzdWVyTmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgc2xpZGVyIG1hcmtlciB3aGVuIHRoZSBwbGF5ZXIgcmVzaXplZCwgYSBzb3VyY2UgaXMgbG9hZGVkIGFuZCBwbGF5ZXIgaXMgcmVhZHksXHJcbiAgICAgICAgLy8gb3IgdGhlIFVJIGlzIGNvbmZpZ3VyZWQuIENoZWNrIHRoZSBzZWVrYmFyIGZvciBhIGRldGFpbGVkIGRlc2NyaXB0aW9uLlxyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BMQVlFUl9SRVNJWkUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVmcmVzaFBsYXliYWNrUG9zaXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZWZyZXNoUGxheWJhY2tQb3NpdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVpbWFuYWdlci5vbkNvbmZpZ3VyZWQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVmcmVzaFBsYXliYWNrUG9zaXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBJbml0IHZvbHVtZSBiYXJcclxuICAgICAgICB2b2x1bWVDaGFuZ2VIYW5kbGVyKCk7XHJcbiAgICB9O1xyXG4gICAgVm9sdW1lU2xpZGVyLnByb3RvdHlwZS5kZXRlY3RWb2x1bWVDb250cm9sQXZhaWxhYmlsaXR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogXCJPbiBpT1MgZGV2aWNlcywgdGhlIGF1ZGlvIGxldmVsIGlzIGFsd2F5cyB1bmRlciB0aGUgdXNlcuKAmXMgcGh5c2ljYWwgY29udHJvbC4gVGhlIHZvbHVtZSBwcm9wZXJ0eSBpcyBub3RcclxuICAgICAgICAgKiBzZXR0YWJsZSBpbiBKYXZhU2NyaXB0LiBSZWFkaW5nIHRoZSB2b2x1bWUgcHJvcGVydHkgYWx3YXlzIHJldHVybnMgMS5cIlxyXG4gICAgICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9saWJyYXJ5L2NvbnRlbnQvZG9jdW1lbnRhdGlvbi9BdWRpb1ZpZGVvL0NvbmNlcHR1YWwvVXNpbmdfSFRNTDVfQXVkaW9fVmlkZW8vRGV2aWNlLVNwZWNpZmljQ29uc2lkZXJhdGlvbnMvRGV2aWNlLVNwZWNpZmljQ29uc2lkZXJhdGlvbnMuaHRtbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC8vIGFzIG11dGVkIGF1dG9wbGF5IGdldHMgcGF1c2VkIGFzIHNvb24gYXMgd2UgdW5tdXRlIGl0LCB3ZSBtYXkgbm90IHRvdWNoIHRoZSB2b2x1bWUgb2YgdGhlIGFjdHVhbCBwbGF5ZXIgc28gd2VcclxuICAgICAgICAvLyBwcm9iZSBhIGR1bW15IGF1ZGlvIGVsZW1lbnRcclxuICAgICAgICB2YXIgZHVtbXlWaWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xyXG4gICAgICAgIC8vIHRyeSBzZXR0aW5nIHRoZSB2b2x1bWUgdG8gMC43IGFuZCBpZiBpdCdzIHN0aWxsIDEgd2UgYXJlIG9uIGEgdm9sdW1lIGNvbnRyb2wgcmVzdHJpY3RlZCBkZXZpY2VcclxuICAgICAgICBkdW1teVZpZGVvRWxlbWVudC52b2x1bWUgPSAwLjc7XHJcbiAgICAgICAgcmV0dXJuIGR1bW15VmlkZW9FbGVtZW50LnZvbHVtZSAhPT0gMTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVm9sdW1lU2xpZGVyO1xyXG59KHNlZWtiYXJfMS5TZWVrQmFyKSk7XHJcblZvbHVtZVNsaWRlci5pc3N1ZXJOYW1lID0gJ3VpJztcclxuZXhwb3J0cy5Wb2x1bWVTbGlkZXIgPSBWb2x1bWVTbGlkZXI7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy92b2x1bWVzbGlkZXIudHNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgbGFiZWxfMSA9IHJlcXVpcmUoXCIuL2xhYmVsXCIpO1xyXG4vKipcclxuICogRW51bWVyYXRlcyB0aGUgdHlwZXMgb2YgY29udGVudCB0aGF0IHRoZSB7QGxpbmsgTWV0YWRhdGFMYWJlbH0gY2FuIGRpc3BsYXkuXHJcbiAqL1xyXG52YXIgTWV0YWRhdGFMYWJlbENvbnRlbnQ7XHJcbihmdW5jdGlvbiAoTWV0YWRhdGFMYWJlbENvbnRlbnQpIHtcclxuICAgIC8qKlxyXG4gICAgICogVGl0bGUgb2YgdGhlIGRhdGEgc291cmNlLlxyXG4gICAgICovXHJcbiAgICBNZXRhZGF0YUxhYmVsQ29udGVudFtNZXRhZGF0YUxhYmVsQ29udGVudFtcIlRpdGxlXCJdID0gMF0gPSBcIlRpdGxlXCI7XHJcbiAgICAvKipcclxuICAgICAqIERlc2NyaXB0aW9uIGZvIHRoZSBkYXRhIHNvdXJjZS5cclxuICAgICAqL1xyXG4gICAgTWV0YWRhdGFMYWJlbENvbnRlbnRbTWV0YWRhdGFMYWJlbENvbnRlbnRbXCJEZXNjcmlwdGlvblwiXSA9IDFdID0gXCJEZXNjcmlwdGlvblwiO1xyXG59KShNZXRhZGF0YUxhYmVsQ29udGVudCA9IGV4cG9ydHMuTWV0YWRhdGFMYWJlbENvbnRlbnQgfHwgKGV4cG9ydHMuTWV0YWRhdGFMYWJlbENvbnRlbnQgPSB7fSkpO1xyXG4vKipcclxuICogQSBsYWJlbCB0aGF0IGNhbiBiZSBjb25maWd1cmVkIHRvIGRpc3BsYXkgY2VydGFpbiBtZXRhZGF0YS5cclxuICovXHJcbnZhciBNZXRhZGF0YUxhYmVsID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhNZXRhZGF0YUxhYmVsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTWV0YWRhdGFMYWJlbChjb25maWcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzZXM6IFsnbGFiZWwtbWV0YWRhdGEnLCAnbGFiZWwtbWV0YWRhdGEtJyArIE1ldGFkYXRhTGFiZWxDb250ZW50W2NvbmZpZy5jb250ZW50XS50b0xvd2VyQ2FzZSgpXSxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE1ldGFkYXRhTGFiZWwucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XHJcbiAgICAgICAgdmFyIHVpY29uZmlnID0gdWltYW5hZ2VyLmdldENvbmZpZygpO1xyXG4gICAgICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGNvbmZpZy5jb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1ldGFkYXRhTGFiZWxDb250ZW50LlRpdGxlOlxyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFRleHQodWljb25maWcubWV0YWRhdGEudGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXRhZGF0YUxhYmVsQ29udGVudC5EZXNjcmlwdGlvbjpcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRUZXh0KHVpY29uZmlnLm1ldGFkYXRhLmRlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHVubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2V0VGV4dChudWxsKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEluaXQgbGFiZWxcclxuICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgLy8gUmVpbml0IGxhYmVsIHdoZW4gYSBuZXcgc291cmNlIGlzIGxvYWRlZFxyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NPVVJDRV9MT0FERUQsIGluaXQpO1xyXG4gICAgICAgIC8vIENsZWFyIGxhYmVscyB3aGVuIHNvdXJjZSBpcyB1bmxvYWRlZFxyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NPVVJDRV9VTkxPQURFRCwgdW5sb2FkKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWV0YWRhdGFMYWJlbDtcclxufShsYWJlbF8xLkxhYmVsKSk7XHJcbmV4cG9ydHMuTWV0YWRhdGFMYWJlbCA9IE1ldGFkYXRhTGFiZWw7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9tZXRhZGF0YWxhYmVsLnRzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGJ1dHRvbl8xID0gcmVxdWlyZShcIi4vYnV0dG9uXCIpO1xyXG4vKipcclxuICogQSBjbGljayBvdmVybGF5IHRoYXQgb3BlbnMgYW4gdXJsIGluIGEgbmV3IHRhYiBpZiBjbGlja2VkLlxyXG4gKi9cclxudmFyIENsaWNrT3ZlcmxheSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQ2xpY2tPdmVybGF5LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ2xpY2tPdmVybGF5KGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1jbGlja292ZXJsYXknLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQ2xpY2tPdmVybGF5LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2V0VXJsKHRoaXMuY29uZmlnLnVybCk7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmdldERvbUVsZW1lbnQoKTtcclxuICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuZGF0YSgndXJsJykpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGVsZW1lbnQuZGF0YSgndXJsJyksICdfYmxhbmsnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgVVJMIHRoYXQgc2hvdWxkIGJlIGZvbGxvd2VkIHdoZW4gdGhlIHdhdGVybWFyayBpcyBjbGlja2VkLlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHdhdGVybWFyayBVUkxcclxuICAgICAqL1xyXG4gICAgQ2xpY2tPdmVybGF5LnByb3RvdHlwZS5nZXRVcmwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RG9tRWxlbWVudCgpLmRhdGEoJ3VybCcpO1xyXG4gICAgfTtcclxuICAgIENsaWNrT3ZlcmxheS5wcm90b3R5cGUuc2V0VXJsID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCB8fCB1cmwgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB1cmwgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZXREb21FbGVtZW50KCkuZGF0YSgndXJsJywgdXJsKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2xpY2tPdmVybGF5O1xyXG59KGJ1dHRvbl8xLkJ1dHRvbikpO1xyXG5leHBvcnRzLkNsaWNrT3ZlcmxheSA9IENsaWNrT3ZlcmxheTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2NsaWNrb3ZlcmxheS50c1xuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciB0b2dnbGVidXR0b25fMSA9IHJlcXVpcmUoXCIuL3RvZ2dsZWJ1dHRvblwiKTtcclxuLyoqXHJcbiAqIEEgYnV0dG9uIHRoYXQgdG9nZ2xlcyB0aGUgcGxheWVyIGJldHdlZW4gd2luZG93ZWQgYW5kIGZ1bGxzY3JlZW4gdmlldy5cclxuICovXHJcbnZhciBGdWxsc2NyZWVuVG9nZ2xlQnV0dG9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhGdWxsc2NyZWVuVG9nZ2xlQnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRnVsbHNjcmVlblRvZ2dsZUJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvbicsXHJcbiAgICAgICAgICAgIHRleHQ6ICdGdWxsc2NyZWVuJyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24ucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIGZ1bGxzY3JlZW5TdGF0ZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNGdWxsc2NyZWVuKCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vZmYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fRlVMTFNDUkVFTl9FTlRFUiwgZnVsbHNjcmVlblN0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fRlVMTFNDUkVFTl9FWElULCBmdWxsc2NyZWVuU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc0Z1bGxzY3JlZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmV4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZW50ZXJGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTdGFydHVwIGluaXRcclxuICAgICAgICBmdWxsc2NyZWVuU3RhdGVIYW5kbGVyKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b247XHJcbn0odG9nZ2xlYnV0dG9uXzEuVG9nZ2xlQnV0dG9uKSk7XHJcbmV4cG9ydHMuRnVsbHNjcmVlblRvZ2dsZUJ1dHRvbiA9IEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9mdWxsc2NyZWVudG9nZ2xlYnV0dG9uLnRzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vdG9nZ2xlYnV0dG9uXCIpO1xyXG4vKipcclxuICogQSBidXR0b24gdGhhdCB0b2dnbGVzIHRoZSB2aWRlbyB2aWV3IGJldHdlZW4gbm9ybWFsL21vbm8gYW5kIFZSL3N0ZXJlby5cclxuICovXHJcbnZhciBWUlRvZ2dsZUJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVlJUb2dnbGVCdXR0b24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBWUlRvZ2dsZUJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktdnJ0b2dnbGVidXR0b24nLFxyXG4gICAgICAgICAgICB0ZXh0OiAnVlInLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVlJUb2dnbGVCdXR0b24ucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIGlzVlJDb25maWd1cmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBWUiBhdmFpbGFiaWxpdHkgY2Fubm90IGJlIGNoZWNrZWQgdGhyb3VnaCBnZXRWUlN0YXR1cygpIGJlY2F1c2UgaXQgaXMgYXN5bmNocm9ub3VzbHkgcG9wdWxhdGVkIGFuZCBub3RcclxuICAgICAgICAgICAgLy8gYXZhaWxhYmxlIGF0IFVJIGluaXRpYWxpemF0aW9uLiBBcyBhbiBhbHRlcm5hdGl2ZSwgd2UgY2hlY2sgdGhlIFZSIHNldHRpbmdzIGluIHRoZSBjb25maWcuXHJcbiAgICAgICAgICAgIC8vIFRPRE8gdXNlIGdldFZSU3RhdHVzKCkgdGhyb3VnaCBpc1ZSU3RlcmVvQXZhaWxhYmxlKCkgb25jZSB0aGUgcGxheWVyIGhhcyBiZWVuIHJld3JpdHRlbiBhbmQgdGhlIHN0YXR1cyBpc1xyXG4gICAgICAgICAgICAvLyBhdmFpbGFibGUgaW4gT05fUkVBRFlcclxuICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHBsYXllci5nZXRDb25maWcoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5zb3VyY2UgJiYgY29uZmlnLnNvdXJjZS52ciAmJiBjb25maWcuc291cmNlLnZyLmNvbnRlbnRUeXBlICE9PSAnbm9uZSc7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgaXNWUlN0ZXJlb0F2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBsYXllci5nZXRWUlN0YXR1cygpLmNvbnRlbnRUeXBlICE9PSAnbm9uZSc7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdnJTdGF0ZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZSQ29uZmlndXJlZCgpICYmIGlzVlJTdGVyZW9BdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2hvdygpOyAvLyBzaG93IGJ1dHRvbiBpbiBjYXNlIGl0IGlzIGhpZGRlblxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5nZXRWUlN0YXR1cygpLmlzU3RlcmVvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9mZigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpOyAvLyBoaWRlIGJ1dHRvbiBpZiBubyBzdGVyZW8gbW9kZSBhdmFpbGFibGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHZyQnV0dG9uVmlzaWJpbGl0eUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZSQ29uZmlndXJlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1ZSX01PREVfQ0hBTkdFRCwgdnJTdGF0ZUhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1ZSX1NURVJFT19DSEFOR0VELCB2clN0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVlJfRVJST1IsIHZyU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICAvLyBIaWRlIGJ1dHRvbiB3aGVuIFZSIHNvdXJjZSBnb2VzIGF3YXlcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TT1VSQ0VfVU5MT0FERUQsIHZyQnV0dG9uVmlzaWJpbGl0eUhhbmRsZXIpO1xyXG4gICAgICAgIC8vIFNob3cgYnV0dG9uIHdoZW4gYSBuZXcgc291cmNlIGlzIGxvYWRlZCBhbmQgaXQncyBWUlxyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1JFQURZLCB2ckJ1dHRvblZpc2liaWxpdHlIYW5kbGVyKTtcclxuICAgICAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFpc1ZSU3RlcmVvQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb25zb2xlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIFZSIGNvbnRlbnQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuZ2V0VlJTdGF0dXMoKS5pc1N0ZXJlbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5zZXRWUlN0ZXJlbyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0VlJTdGVyZW8odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTZXQgc3RhcnR1cCB2aXNpYmlsaXR5XHJcbiAgICAgICAgdnJCdXR0b25WaXNpYmlsaXR5SGFuZGxlcigpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBWUlRvZ2dsZUJ1dHRvbjtcclxufSh0b2dnbGVidXR0b25fMS5Ub2dnbGVCdXR0b24pKTtcclxuZXhwb3J0cy5WUlRvZ2dsZUJ1dHRvbiA9IFZSVG9nZ2xlQnV0dG9uO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvdnJ0b2dnbGVidXR0b24udHNcbi8vIG1vZHVsZSBpZCA9IDMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgbGFiZWxfMSA9IHJlcXVpcmUoXCIuL2xhYmVsXCIpO1xyXG52YXIgcGxheWVydXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9wbGF5ZXJ1dGlsc1wiKTtcclxudmFyIHN0cmluZ3V0aWxzXzEgPSByZXF1aXJlKFwiLi4vc3RyaW5ndXRpbHNcIik7XHJcbnZhciBQbGF5YmFja1RpbWVMYWJlbE1vZGU7XHJcbihmdW5jdGlvbiAoUGxheWJhY2tUaW1lTGFiZWxNb2RlKSB7XHJcbiAgICBQbGF5YmFja1RpbWVMYWJlbE1vZGVbUGxheWJhY2tUaW1lTGFiZWxNb2RlW1wiQ3VycmVudFRpbWVcIl0gPSAwXSA9IFwiQ3VycmVudFRpbWVcIjtcclxuICAgIFBsYXliYWNrVGltZUxhYmVsTW9kZVtQbGF5YmFja1RpbWVMYWJlbE1vZGVbXCJUb3RhbFRpbWVcIl0gPSAxXSA9IFwiVG90YWxUaW1lXCI7XHJcbiAgICBQbGF5YmFja1RpbWVMYWJlbE1vZGVbUGxheWJhY2tUaW1lTGFiZWxNb2RlW1wiQ3VycmVudEFuZFRvdGFsVGltZVwiXSA9IDJdID0gXCJDdXJyZW50QW5kVG90YWxUaW1lXCI7XHJcbn0pKFBsYXliYWNrVGltZUxhYmVsTW9kZSA9IGV4cG9ydHMuUGxheWJhY2tUaW1lTGFiZWxNb2RlIHx8IChleHBvcnRzLlBsYXliYWNrVGltZUxhYmVsTW9kZSA9IHt9KSk7XHJcbi8qKlxyXG4gKiBBIGxhYmVsIHRoYXQgZGlzcGxheSB0aGUgY3VycmVudCBwbGF5YmFjayB0aW1lIGFuZCB0aGUgdG90YWwgdGltZSB0aHJvdWdoIHtAbGluayBQbGF5YmFja1RpbWVMYWJlbCNzZXRUaW1lIHNldFRpbWV9XHJcbiAqIG9yIGFueSBzdHJpbmcgdGhyb3VnaCB7QGxpbmsgUGxheWJhY2tUaW1lTGFiZWwjc2V0VGV4dCBzZXRUZXh0fS5cclxuICovXHJcbnZhciBQbGF5YmFja1RpbWVMYWJlbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUGxheWJhY2tUaW1lTGFiZWwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQbGF5YmFja1RpbWVMYWJlbChjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktcGxheWJhY2t0aW1lbGFiZWwnLFxyXG4gICAgICAgICAgICB0aW1lTGFiZWxNb2RlOiBQbGF5YmFja1RpbWVMYWJlbE1vZGUuQ3VycmVudEFuZFRvdGFsVGltZSxcclxuICAgICAgICAgICAgaGlkZUluTGl2ZVBsYXliYWNrOiBmYWxzZSxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFBsYXliYWNrVGltZUxhYmVsLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xyXG4gICAgICAgIHZhciBsaXZlID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGxpdmVDc3NDbGFzcyA9IHRoaXMucHJlZml4Q3NzKCd1aS1wbGF5YmFja3RpbWVsYWJlbC1saXZlJyk7XHJcbiAgICAgICAgdmFyIGxpdmVFZGdlQ3NzQ2xhc3MgPSB0aGlzLnByZWZpeENzcygndWktcGxheWJhY2t0aW1lbGFiZWwtbGl2ZS1lZGdlJyk7XHJcbiAgICAgICAgdmFyIG1pbldpZHRoID0gMDtcclxuICAgICAgICB2YXIgbGl2ZUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcGxheWVyLnRpbWVTaGlmdCgwKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB1cGRhdGVMaXZlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFBsYXllciBpcyBwbGF5aW5nIGEgbGl2ZSBzdHJlYW0gd2hlbiB0aGUgZHVyYXRpb24gaXMgaW5maW5pdGVcclxuICAgICAgICAgICAgbGl2ZSA9IHBsYXllci5pc0xpdmUoKTtcclxuICAgICAgICAgICAgLy8gQXR0YWNoL2RldGFjaCBsaXZlIG1hcmtlciBjbGFzc1xyXG4gICAgICAgICAgICBpZiAobGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKGxpdmVDc3NDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUZXh0KCdMaXZlJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmhpZGVJbkxpdmVQbGF5YmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF90aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGxpdmVDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlTGl2ZVRpbWVzaGlmdFN0YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3MobGl2ZUNzc0NsYXNzKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyhsaXZlRWRnZUNzc0NsYXNzKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNob3coKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9uQ2xpY2sudW5zdWJzY3JpYmUobGl2ZUNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB1cGRhdGVMaXZlVGltZXNoaWZ0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghbGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRoZSBwbGF5ZXIgaXMgb25seSBhdCB0aGUgbGl2ZSBlZGdlIGlmZiB0aGUgc3RyZWFtIGlzIG5vdCBzaGlmdGVkIGFuZCBpdCBpcyBhY3R1YWxseSBwbGF5aW5nIG9yIHBsYXliYWNrIGhhc1xyXG4gICAgICAgICAgICAvLyBuZXZlciBiZWVuIHN0YXJ0ZWQgKG1lYW5pbmcgaXQgaXNuJ3QgcGF1c2VkKS4gQSBwbGF5ZXIgdGhhdCBpcyBwYXVzZWQgaXMgYWx3YXlzIGJlaGluZCB0aGUgbGl2ZSBlZGdlLlxyXG4gICAgICAgICAgICAvLyBBbiBleGNlcHRpb24gaXMgbWFkZSBmb3IgbGl2ZSBzdHJlYW1zIHdpdGhvdXQgYSB0aW1lc2hpZnQgd2luZG93LCBiZWNhdXNlIGhlcmUgd2UgXCJzdG9wXCIgcGxheWJhY2sgaW5zdGVhZFxyXG4gICAgICAgICAgICAvLyBvZiBwYXVzaW5nIGl0IChmcm9tIGEgVUkgcGVyc3BlY3RpdmUpLCBzbyB3ZSBrZWVwIHRoZSBsaXZlIGVkZ2UgaW5kaWNhdG9yIG9uIGJlY2F1c2UgYSBwbGF5IHdvdWxkIGFsd2F5c1xyXG4gICAgICAgICAgICAvLyByZXN1bWUgYXQgdGhlIGxpdmUgZWRnZS5cclxuICAgICAgICAgICAgdmFyIGlzVGltZXNoaWZ0ZWQgPSBwbGF5ZXIuZ2V0VGltZVNoaWZ0KCkgPCAwO1xyXG4gICAgICAgICAgICB2YXIgaXNUaW1lc2hpZnRBdmFpbGFibGUgPSBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgPCAwO1xyXG4gICAgICAgICAgICBpZiAoIWlzVGltZXNoaWZ0ZWQgJiYgKCFwbGF5ZXIuaXNQYXVzZWQoKSB8fCAhaXNUaW1lc2hpZnRBdmFpbGFibGUpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXREb21FbGVtZW50KCkuYWRkQ2xhc3MobGl2ZUVkZ2VDc3NDbGFzcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3MobGl2ZUVkZ2VDc3NDbGFzcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBsaXZlU3RyZWFtRGV0ZWN0b3IgPSBuZXcgcGxheWVydXRpbHNfMS5QbGF5ZXJVdGlscy5MaXZlU3RyZWFtRGV0ZWN0b3IocGxheWVyKTtcclxuICAgICAgICBsaXZlU3RyZWFtRGV0ZWN0b3Iub25MaXZlQ2hhbmdlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgYXJncykge1xyXG4gICAgICAgICAgICBsaXZlID0gYXJncy5saXZlO1xyXG4gICAgICAgICAgICB1cGRhdGVMaXZlU3RhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBsaXZlU3RyZWFtRGV0ZWN0b3IuZGV0ZWN0KCk7IC8vIEluaXRpYWwgZGV0ZWN0aW9uXHJcbiAgICAgICAgdmFyIHBsYXliYWNrVGltZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghbGl2ZSAmJiBwbGF5ZXIuZ2V0RHVyYXRpb24oKSAhPT0gSW5maW5pdHkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldFRpbWUocGxheWVyLmdldEN1cnJlbnRUaW1lKCksIHBsYXllci5nZXREdXJhdGlvbigpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUbyBhdm9pZCAnanVtcGluZycgaW4gdGhlIFVJIGJ5IHZhcnlpbmcgbGFiZWwgc2l6ZXMgZHVlIHRvIG5vbi1tb25vc3BhY2VkIGZvbnRzLFxyXG4gICAgICAgICAgICAvLyB3ZSBncmFkdWFsbHkgaW5jcmVhc2UgdGhlIG1pbi13aWR0aCB3aXRoIHRoZSBjb250ZW50IHRvIHJlYWNoIGEgc3RhYmxlIHNpemUuXHJcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IF90aGlzLmdldERvbUVsZW1lbnQoKS53aWR0aCgpO1xyXG4gICAgICAgICAgICBpZiAod2lkdGggPiBtaW5XaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgbWluV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldERvbUVsZW1lbnQoKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdtaW4td2lkdGgnOiBtaW5XaWR0aCArICdweCcsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVElNRV9DSEFOR0VELCBwbGF5YmFja1RpbWVIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TRUVLRUQsIHBsYXliYWNrVGltZUhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfVElNRV9VUERBVEVELCBwbGF5YmFja1RpbWVIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9USU1FX1NISUZULCB1cGRhdGVMaXZlVGltZXNoaWZ0U3RhdGUpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1RJTUVfU0hJRlRFRCwgdXBkYXRlTGl2ZVRpbWVzaGlmdFN0YXRlKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZLCB1cGRhdGVMaXZlVGltZXNoaWZ0U3RhdGUpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BBVVNFRCwgdXBkYXRlTGl2ZVRpbWVzaGlmdFN0YXRlKTtcclxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gUmVzZXQgbWluLXdpZHRoIHdoZW4gYSBuZXcgc291cmNlIGlzIHJlYWR5IChlc3BlY2lhbGx5IGZvciBzd2l0Y2hpbmcgVk9EL0xpdmUgbW9kZXMgd2hlcmUgdGhlIGxhYmVsIGNvbnRlbnRcclxuICAgICAgICAgICAgLy8gY2hhbmdlcylcclxuICAgICAgICAgICAgbWluV2lkdGggPSAwO1xyXG4gICAgICAgICAgICBfdGhpcy5nZXREb21FbGVtZW50KCkuY3NzKHtcclxuICAgICAgICAgICAgICAgICdtaW4td2lkdGgnOiBudWxsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gU2V0IHRpbWUgZm9ybWF0IGRlcGVuZGluZyBvbiBzb3VyY2UgZHVyYXRpb25cclxuICAgICAgICAgICAgX3RoaXMudGltZUZvcm1hdCA9IE1hdGguYWJzKHBsYXllci5pc0xpdmUoKSA/IHBsYXllci5nZXRNYXhUaW1lU2hpZnQoKSA6IHBsYXllci5nZXREdXJhdGlvbigpKSA+PSAzNjAwID9cclxuICAgICAgICAgICAgICAgIHN0cmluZ3V0aWxzXzEuU3RyaW5nVXRpbHMuRk9STUFUX0hITU1TUyA6IHN0cmluZ3V0aWxzXzEuU3RyaW5nVXRpbHMuRk9STUFUX01NU1M7XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aW1lIGFmdGVyIHRoZSBmb3JtYXQgaGFzIGJlZW4gc2V0XHJcbiAgICAgICAgICAgIHBsYXliYWNrVGltZUhhbmRsZXIoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1JFQURZLCBpbml0KTtcclxuICAgICAgICBpbml0KCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IHBsYXliYWNrIHRpbWUgYW5kIHRvdGFsIGR1cmF0aW9uLlxyXG4gICAgICogQHBhcmFtIHBsYXliYWNrU2Vjb25kcyB0aGUgY3VycmVudCBwbGF5YmFjayB0aW1lIGluIHNlY29uZHNcclxuICAgICAqIEBwYXJhbSBkdXJhdGlvblNlY29uZHMgdGhlIHRvdGFsIGR1cmF0aW9uIGluIHNlY29uZHNcclxuICAgICAqL1xyXG4gICAgUGxheWJhY2tUaW1lTGFiZWwucHJvdG90eXBlLnNldFRpbWUgPSBmdW5jdGlvbiAocGxheWJhY2tTZWNvbmRzLCBkdXJhdGlvblNlY29uZHMpIHtcclxuICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBzdHJpbmd1dGlsc18xLlN0cmluZ1V0aWxzLnNlY29uZHNUb1RpbWUocGxheWJhY2tTZWNvbmRzLCB0aGlzLnRpbWVGb3JtYXQpO1xyXG4gICAgICAgIHZhciB0b3RhbFRpbWUgPSBzdHJpbmd1dGlsc18xLlN0cmluZ1V0aWxzLnNlY29uZHNUb1RpbWUoZHVyYXRpb25TZWNvbmRzLCB0aGlzLnRpbWVGb3JtYXQpO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5jb25maWcudGltZUxhYmVsTW9kZSkge1xyXG4gICAgICAgICAgICBjYXNlIFBsYXliYWNrVGltZUxhYmVsTW9kZS5DdXJyZW50VGltZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VGV4dChcIlwiICsgY3VycmVudFRpbWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUGxheWJhY2tUaW1lTGFiZWxNb2RlLlRvdGFsVGltZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VGV4dChcIlwiICsgdG90YWxUaW1lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFBsYXliYWNrVGltZUxhYmVsTW9kZS5DdXJyZW50QW5kVG90YWxUaW1lOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUZXh0KGN1cnJlbnRUaW1lICsgXCIgLyBcIiArIHRvdGFsVGltZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IHRpbWUgZm9ybWF0XHJcbiAgICAgKiBAcGFyYW0gdGltZUZvcm1hdCB0aGUgdGltZSBmb3JtYXRcclxuICAgICAqL1xyXG4gICAgUGxheWJhY2tUaW1lTGFiZWwucHJvdG90eXBlLnNldFRpbWVGb3JtYXQgPSBmdW5jdGlvbiAodGltZUZvcm1hdCkge1xyXG4gICAgICAgIHRoaXMudGltZUZvcm1hdCA9IHRpbWVGb3JtYXQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBsYXliYWNrVGltZUxhYmVsO1xyXG59KGxhYmVsXzEuTGFiZWwpKTtcclxuZXhwb3J0cy5QbGF5YmFja1RpbWVMYWJlbCA9IFBsYXliYWNrVGltZUxhYmVsO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvcGxheWJhY2t0aW1lbGFiZWwudHNcbi8vIG1vZHVsZSBpZCA9IDMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi90b2dnbGVidXR0b25cIik7XHJcbi8qKlxyXG4gKiBBIGJ1dHRvbiB0aGF0IHRvZ2dsZXMgdmlzaWJpbGl0eSBvZiBhIHNldHRpbmdzIHBhbmVsLlxyXG4gKi9cclxudmFyIFNldHRpbmdzVG9nZ2xlQnV0dG9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTZXR0aW5nc1RvZ2dsZUJ1dHRvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNldHRpbmdzVG9nZ2xlQnV0dG9uKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBpZiAoIWNvbmZpZy5zZXR0aW5nc1BhbmVsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgU2V0dGluZ3NQYW5lbCBpcyBtaXNzaW5nJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXNldHRpbmdzdG9nZ2xlYnV0dG9uJyxcclxuICAgICAgICAgICAgdGV4dDogJ1NldHRpbmdzJyxcclxuICAgICAgICAgICAgc2V0dGluZ3NQYW5lbDogbnVsbCxcclxuICAgICAgICAgICAgYXV0b0hpZGVXaGVuTm9BY3RpdmVTZXR0aW5nczogdHJ1ZSxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFNldHRpbmdzVG9nZ2xlQnV0dG9uLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLmdldENvbmZpZygpOyAvLyBUT0RPIGZpeCBnZW5lcmljcyB0eXBlIGluZmVyZW5jZVxyXG4gICAgICAgIHZhciBzZXR0aW5nc1BhbmVsID0gY29uZmlnLnNldHRpbmdzUGFuZWw7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzUGFuZWwudG9nZ2xlSGlkZGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2V0dGluZ3NQYW5lbC5vblNob3cuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gU2V0IHRvZ2dsZSBzdGF0dXMgdG8gb24gd2hlbiB0aGUgc2V0dGluZ3MgcGFuZWwgc2hvd3NcclxuICAgICAgICAgICAgX3RoaXMub24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZXR0aW5nc1BhbmVsLm9uSGlkZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBTZXQgdG9nZ2xlIHN0YXR1cyB0byBvZmYgd2hlbiB0aGUgc2V0dGluZ3MgcGFuZWwgaGlkZXNcclxuICAgICAgICAgICAgX3RoaXMub2ZmKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSGFuZGxlIGF1dG9tYXRpYyBoaWRpbmcgb2YgdGhlIGJ1dHRvbiBpZiB0aGVyZSBhcmUgbm8gc2V0dGluZ3MgZm9yIHRoZSB1c2VyIHRvIGludGVyYWN0IHdpdGhcclxuICAgICAgICBpZiAoY29uZmlnLmF1dG9IaWRlV2hlbk5vQWN0aXZlU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgLy8gU2V0dXAgaGFuZGxlciB0byBzaG93L2hpZGUgYnV0dG9uIHdoZW4gdGhlIHNldHRpbmdzIGNoYW5nZVxyXG4gICAgICAgICAgICB2YXIgc2V0dGluZ3NQYW5lbEl0ZW1zQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NQYW5lbC5oYXNBY3RpdmVTZXR0aW5ncygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzSGlkZGVuKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1Nob3duKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gV2lyZSB0aGUgaGFuZGxlciB0byB0aGUgZXZlbnRcclxuICAgICAgICAgICAgc2V0dGluZ3NQYW5lbC5vblNldHRpbmdzU3RhdGVDaGFuZ2VkLnN1YnNjcmliZShzZXR0aW5nc1BhbmVsSXRlbXNDaGFuZ2VkSGFuZGxlcik7XHJcbiAgICAgICAgICAgIC8vIENhbGwgaGFuZGxlciBmb3IgZmlyc3QgaW5pdCBhdCBzdGFydHVwXHJcbiAgICAgICAgICAgIHNldHRpbmdzUGFuZWxJdGVtc0NoYW5nZWRIYW5kbGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTZXR0aW5nc1RvZ2dsZUJ1dHRvbjtcclxufSh0b2dnbGVidXR0b25fMS5Ub2dnbGVCdXR0b24pKTtcclxuZXhwb3J0cy5TZXR0aW5nc1RvZ2dsZUJ1dHRvbiA9IFNldHRpbmdzVG9nZ2xlQnV0dG9uO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc2V0dGluZ3N0b2dnbGVidXR0b24udHNcbi8vIG1vZHVsZSBpZCA9IDMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRcIik7XHJcbnZhciBldmVudGRpc3BhdGNoZXJfMSA9IHJlcXVpcmUoXCIuLi9ldmVudGRpc3BhdGNoZXJcIik7XHJcbnZhciBhcnJheXV0aWxzXzEgPSByZXF1aXJlKFwiLi4vYXJyYXl1dGlsc1wiKTtcclxudmFyIExpc3RTZWxlY3RvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoTGlzdFNlbGVjdG9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTGlzdFNlbGVjdG9yKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5saXN0U2VsZWN0b3JFdmVudHMgPSB7XHJcbiAgICAgICAgICAgIG9uSXRlbUFkZGVkOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uSXRlbVJlbW92ZWQ6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICAgICAgb25JdGVtU2VsZWN0ZWQ6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktbGlzdHNlbGVjdG9yJyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIF90aGlzLml0ZW1zID0gX3RoaXMuY29uZmlnLml0ZW1zO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIExpc3RTZWxlY3Rvci5wcm90b3R5cGUuZ2V0SXRlbUluZGV4ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGZvciAodmFyIGluZGV4IGluIHRoaXMuaXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5pdGVtc1tpbmRleF0ua2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGUgc3BlY2lmaWVkIGl0ZW0gaXMgcGFydCBvZiB0aGlzIHNlbGVjdG9yLlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUga2V5IG9mIHRoZSBpdGVtIHRvIGNoZWNrXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgaXRlbSBpcyBwYXJ0IG9mIHRoaXMgc2VsZWN0b3IsIGVsc2UgZmFsc2VcclxuICAgICAqL1xyXG4gICAgTGlzdFNlbGVjdG9yLnByb3RvdHlwZS5oYXNJdGVtID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEl0ZW1JbmRleChrZXkpID4gLTE7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGFuIGl0ZW0gdG8gdGhpcyBzZWxlY3RvciBieSBhcHBlbmRpbmcgaXQgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdCBvZiBpdGVtcy4gSWYgYW4gaXRlbSB3aXRoIHRoZSBzcGVjaWZpZWRcclxuICAgICAqIGtleSBhbHJlYWR5IGV4aXN0cywgaXQgaXMgcmVwbGFjZWQuXHJcbiAgICAgKiBAcGFyYW0ga2V5IHRoZSBrZXkgb2YgdGhlIGl0ZW0gdG8gYWRkXHJcbiAgICAgKiBAcGFyYW0gbGFiZWwgdGhlIChodW1hbi1yZWFkYWJsZSkgbGFiZWwgb2YgdGhlIGl0ZW0gdG8gYWRkXHJcbiAgICAgKi9cclxuICAgIExpc3RTZWxlY3Rvci5wcm90b3R5cGUuYWRkSXRlbSA9IGZ1bmN0aW9uIChrZXksIGxhYmVsKSB7XHJcbiAgICAgICAgdmFyIGxpc3RJdGVtID0geyBrZXk6IGtleSwgbGFiZWw6IGxhYmVsIH07XHJcbiAgICAgICAgLy8gQXBwbHkgZmlsdGVyIGZ1bmN0aW9uXHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmZpbHRlciAmJiAhdGhpcy5jb25maWcuZmlsdGVyKGxpc3RJdGVtKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFwcGx5IHRyYW5zbGF0b3IgZnVuY3Rpb25cclxuICAgICAgICBpZiAodGhpcy5jb25maWcudHJhbnNsYXRvcikge1xyXG4gICAgICAgICAgICBsaXN0SXRlbS5sYWJlbCA9IHRoaXMuY29uZmlnLnRyYW5zbGF0b3IobGlzdEl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oa2V5KTsgLy8gVHJ5IHRvIHJlbW92ZSBrZXkgZmlyc3QgdG8gZ2V0IG92ZXJ3cml0ZSBiZWhhdmlvciBhbmQgYXZvaWQgZHVwbGljYXRlIGtleXNcclxuICAgICAgICB0aGlzLml0ZW1zLnB1c2gobGlzdEl0ZW0pO1xyXG4gICAgICAgIHRoaXMub25JdGVtQWRkZWRFdmVudChrZXkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbiBpdGVtIGZyb20gdGhpcyBzZWxlY3Rvci5cclxuICAgICAqIEBwYXJhbSBrZXkgdGhlIGtleSBvZiB0aGUgaXRlbSB0byByZW1vdmVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHJlbW92YWwgd2FzIHN1Y2Nlc3NmdWwsIGZhbHNlIGlmIHRoZSBpdGVtIGlzIG5vdCBwYXJ0IG9mIHRoaXMgc2VsZWN0b3JcclxuICAgICAqL1xyXG4gICAgTGlzdFNlbGVjdG9yLnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SXRlbUluZGV4KGtleSk7XHJcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgYXJyYXl1dGlsc18xLkFycmF5VXRpbHMucmVtb3ZlKHRoaXMuaXRlbXMsIHRoaXMuaXRlbXNbaW5kZXhdKTtcclxuICAgICAgICAgICAgdGhpcy5vbkl0ZW1SZW1vdmVkRXZlbnQoa2V5KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNlbGVjdHMgYW4gaXRlbSBmcm9tIHRoZSBpdGVtcyBpbiB0aGlzIHNlbGVjdG9yLlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUga2V5IG9mIHRoZSBpdGVtIHRvIHNlbGVjdFxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaXMgdGhlIHNlbGVjdGlvbiB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2UgaWYgdGhlIHNlbGVjdGVkIGl0ZW0gaXMgbm90IHBhcnQgb2YgdGhlIHNlbGVjdG9yXHJcbiAgICAgKi9cclxuICAgIExpc3RTZWxlY3Rvci5wcm90b3R5cGUuc2VsZWN0SXRlbSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBpZiAoa2V5ID09PSB0aGlzLnNlbGVjdGVkSXRlbSkge1xyXG4gICAgICAgICAgICAvLyBpdGVtQ29uZmlnIGlzIGFscmVhZHkgc2VsZWN0ZWQsIHN1cHByZXNzIGFueSBmdXJ0aGVyIGFjdGlvblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJdGVtSW5kZXgoa2V5KTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IGtleTtcclxuICAgICAgICAgICAgdGhpcy5vbkl0ZW1TZWxlY3RlZEV2ZW50KGtleSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBrZXkgb2YgdGhlIHNlbGVjdGVkIGl0ZW0uXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUga2V5IG9mIHRoZSBzZWxlY3RlZCBpdGVtIG9yIG51bGwgaWYgbm8gaXRlbSBpcyBzZWxlY3RlZFxyXG4gICAgICovXHJcbiAgICBMaXN0U2VsZWN0b3IucHJvdG90eXBlLmdldFNlbGVjdGVkSXRlbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEl0ZW07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFsbCBpdGVtcyBmcm9tIHRoaXMgc2VsZWN0b3IuXHJcbiAgICAgKi9cclxuICAgIExpc3RTZWxlY3Rvci5wcm90b3R5cGUuY2xlYXJJdGVtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBsb2NhbCBjb3B5IGZvciBpdGVyYXRpb24gYWZ0ZXIgY2xlYXJcclxuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLml0ZW1zO1xyXG4gICAgICAgIC8vIGNsZWFyIGl0ZW1zXHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gICAgICAgIC8vIGNsZWFyIHRoZSBzZWxlY3Rpb24gYXMgdGhlIHNlbGVjdGVkIGl0ZW0gaXMgYWxzbyByZW1vdmVkXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBudWxsO1xyXG4gICAgICAgIC8vIGZpcmUgZXZlbnRzXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpdGVtc18xID0gaXRlbXM7IF9pIDwgaXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc18xW19pXTtcclxuICAgICAgICAgICAgdGhpcy5vbkl0ZW1SZW1vdmVkRXZlbnQoaXRlbS5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGlzIHNlbGVjdG9yLlxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgTGlzdFNlbGVjdG9yLnByb3RvdHlwZS5pdGVtQ291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuaXRlbXMpLmxlbmd0aDtcclxuICAgIH07XHJcbiAgICBMaXN0U2VsZWN0b3IucHJvdG90eXBlLm9uSXRlbUFkZGVkRXZlbnQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdGhpcy5saXN0U2VsZWN0b3JFdmVudHMub25JdGVtQWRkZWQuZGlzcGF0Y2godGhpcywga2V5KTtcclxuICAgIH07XHJcbiAgICBMaXN0U2VsZWN0b3IucHJvdG90eXBlLm9uSXRlbVJlbW92ZWRFdmVudCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLmxpc3RTZWxlY3RvckV2ZW50cy5vbkl0ZW1SZW1vdmVkLmRpc3BhdGNoKHRoaXMsIGtleSk7XHJcbiAgICB9O1xyXG4gICAgTGlzdFNlbGVjdG9yLnByb3RvdHlwZS5vbkl0ZW1TZWxlY3RlZEV2ZW50ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHRoaXMubGlzdFNlbGVjdG9yRXZlbnRzLm9uSXRlbVNlbGVjdGVkLmRpc3BhdGNoKHRoaXMsIGtleSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpc3RTZWxlY3Rvci5wcm90b3R5cGUsIFwib25JdGVtQWRkZWRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiBhbiBpdGVtIGlzIGFkZGVkIHRvIHRoZSBsaXN0IG9mIGl0ZW1zLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudDxMaXN0U2VsZWN0b3I8Q29uZmlnPiwgc3RyaW5nPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdFNlbGVjdG9yRXZlbnRzLm9uSXRlbUFkZGVkLmdldEV2ZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTGlzdFNlbGVjdG9yLnByb3RvdHlwZSwgXCJvbkl0ZW1SZW1vdmVkXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBldmVudCB0aGF0IGlzIGZpcmVkIHdoZW4gYW4gaXRlbSBpcyByZW1vdmVkIGZyb20gdGhlIGxpc3Qgb2YgaXRlbXMuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PExpc3RTZWxlY3RvcjxDb25maWc+LCBzdHJpbmc+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0U2VsZWN0b3JFdmVudHMub25JdGVtUmVtb3ZlZC5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExpc3RTZWxlY3Rvci5wcm90b3R5cGUsIFwib25JdGVtU2VsZWN0ZWRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGV2ZW50IHRoYXQgaXMgZmlyZWQgd2hlbiBhbiBpdGVtIGlzIHNlbGVjdGVkIGZyb20gdGhlIGxpc3Qgb2YgaXRlbXMuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50PExpc3RTZWxlY3RvcjxDb25maWc+LCBzdHJpbmc+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0U2VsZWN0b3JFdmVudHMub25JdGVtU2VsZWN0ZWQuZ2V0RXZlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBMaXN0U2VsZWN0b3I7XHJcbn0oY29tcG9uZW50XzEuQ29tcG9uZW50KSk7XHJcbmV4cG9ydHMuTGlzdFNlbGVjdG9yID0gTGlzdFNlbGVjdG9yO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvbGlzdHNlbGVjdG9yLnRzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHNldHRpbmdzcGFuZWxfMSA9IHJlcXVpcmUoXCIuLi9zZXR0aW5nc3BhbmVsXCIpO1xyXG52YXIgZm9udGNvbG9yc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9mb250Y29sb3JzZWxlY3Rib3hcIik7XHJcbnZhciBmb250b3BhY2l0eXNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vZm9udG9wYWNpdHlzZWxlY3Rib3hcIik7XHJcbnZhciBmb250ZmFtaWx5c2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9mb250ZmFtaWx5c2VsZWN0Ym94XCIpO1xyXG52YXIgZm9udHNpemVzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2ZvbnRzaXplc2VsZWN0Ym94XCIpO1xyXG52YXIgYmFja2dyb3VuZGNvbG9yc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9iYWNrZ3JvdW5kY29sb3JzZWxlY3Rib3hcIik7XHJcbnZhciBiYWNrZ3JvdW5kb3BhY2l0eXNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vYmFja2dyb3VuZG9wYWNpdHlzZWxlY3Rib3hcIik7XHJcbnZhciB3aW5kb3djb2xvcnNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vd2luZG93Y29sb3JzZWxlY3Rib3hcIik7XHJcbnZhciB3aW5kb3dvcGFjaXR5c2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi93aW5kb3dvcGFjaXR5c2VsZWN0Ym94XCIpO1xyXG52YXIgY2hhcmFjdGVyZWRnZXNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vY2hhcmFjdGVyZWRnZXNlbGVjdGJveFwiKTtcclxudmFyIHN1YnRpdGxlc2V0dGluZ3NtYW5hZ2VyXzEgPSByZXF1aXJlKFwiLi9zdWJ0aXRsZXNldHRpbmdzbWFuYWdlclwiKTtcclxudmFyIHN1YnRpdGxlc2V0dGluZ3NjbG9zZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vc3VidGl0bGVzZXR0aW5nc2Nsb3NlYnV0dG9uXCIpO1xyXG52YXIgc3VidGl0bGVzZXR0aW5nc3Jlc2V0YnV0dG9uXzEgPSByZXF1aXJlKFwiLi9zdWJ0aXRsZXNldHRpbmdzcmVzZXRidXR0b25cIik7XHJcbi8qKlxyXG4gKiBTdWJ0aXRsZVNldHRpbmdzUGFuZWwgaXMgYSBzZXR0aW5ncyBwYW5lbCBzcGVjaWZpYyB0byBzdWJ0aXRsZXMgc2V0dGluZ3NcclxuICoqL1xyXG52YXIgU3VidGl0bGVTZXR0aW5nc1BhbmVsID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTdWJ0aXRsZVNldHRpbmdzUGFuZWwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTdWJ0aXRsZVNldHRpbmdzUGFuZWwoY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm92ZXJsYXkgPSBjb25maWcub3ZlcmxheTtcclxuICAgICAgICB2YXIgbWFuYWdlciA9IG5ldyBzdWJ0aXRsZXNldHRpbmdzbWFuYWdlcl8xLlN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyKCk7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ0ZvbnQgc2l6ZScsIG5ldyBmb250c2l6ZXNlbGVjdGJveF8xLkZvbnRTaXplU2VsZWN0Qm94KHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVybGF5OiBfdGhpcy5vdmVybGF5LCBzZXR0aW5nc01hbmFnZXI6IG1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICB9KSksXHJcbiAgICAgICAgICAgICAgICBuZXcgc2V0dGluZ3NwYW5lbF8xLlNldHRpbmdzUGFuZWxJdGVtKCdGb250IGZhbWlseScsIG5ldyBmb250ZmFtaWx5c2VsZWN0Ym94XzEuRm9udEZhbWlseVNlbGVjdEJveCh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheTogX3RoaXMub3ZlcmxheSwgc2V0dGluZ3NNYW5hZ2VyOiBtYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHNldHRpbmdzcGFuZWxfMS5TZXR0aW5nc1BhbmVsSXRlbSgnRm9udCBjb2xvcicsIG5ldyBmb250Y29sb3JzZWxlY3Rib3hfMS5Gb250Q29sb3JTZWxlY3RCb3goe1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXk6IF90aGlzLm92ZXJsYXksIHNldHRpbmdzTWFuYWdlcjogbWFuYWdlcixcclxuICAgICAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ0ZvbnQgb3BhY2l0eScsIG5ldyBmb250b3BhY2l0eXNlbGVjdGJveF8xLkZvbnRPcGFjaXR5U2VsZWN0Qm94KHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVybGF5OiBfdGhpcy5vdmVybGF5LCBzZXR0aW5nc01hbmFnZXI6IG1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICB9KSksXHJcbiAgICAgICAgICAgICAgICBuZXcgc2V0dGluZ3NwYW5lbF8xLlNldHRpbmdzUGFuZWxJdGVtKCdDaGFyYWN0ZXIgZWRnZScsIG5ldyBjaGFyYWN0ZXJlZGdlc2VsZWN0Ym94XzEuQ2hhcmFjdGVyRWRnZVNlbGVjdEJveCh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheTogX3RoaXMub3ZlcmxheSwgc2V0dGluZ3NNYW5hZ2VyOiBtYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHNldHRpbmdzcGFuZWxfMS5TZXR0aW5nc1BhbmVsSXRlbSgnQmFja2dyb3VuZCBjb2xvcicsIG5ldyBiYWNrZ3JvdW5kY29sb3JzZWxlY3Rib3hfMS5CYWNrZ3JvdW5kQ29sb3JTZWxlY3RCb3goe1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXk6IF90aGlzLm92ZXJsYXksIHNldHRpbmdzTWFuYWdlcjogbWFuYWdlcixcclxuICAgICAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ0JhY2tncm91bmQgb3BhY2l0eScsIG5ldyBiYWNrZ3JvdW5kb3BhY2l0eXNlbGVjdGJveF8xLkJhY2tncm91bmRPcGFjaXR5U2VsZWN0Qm94KHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVybGF5OiBfdGhpcy5vdmVybGF5LCBzZXR0aW5nc01hbmFnZXI6IG1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICB9KSksXHJcbiAgICAgICAgICAgICAgICBuZXcgc2V0dGluZ3NwYW5lbF8xLlNldHRpbmdzUGFuZWxJdGVtKCdXaW5kb3cgY29sb3InLCBuZXcgd2luZG93Y29sb3JzZWxlY3Rib3hfMS5XaW5kb3dDb2xvclNlbGVjdEJveCh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheTogX3RoaXMub3ZlcmxheSwgc2V0dGluZ3NNYW5hZ2VyOiBtYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHNldHRpbmdzcGFuZWxfMS5TZXR0aW5nc1BhbmVsSXRlbSgnV2luZG93IG9wYWNpdHknLCBuZXcgd2luZG93b3BhY2l0eXNlbGVjdGJveF8xLldpbmRvd09wYWNpdHlTZWxlY3RCb3goe1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXk6IF90aGlzLm92ZXJsYXksIHNldHRpbmdzTWFuYWdlcjogbWFuYWdlcixcclxuICAgICAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0obmV3IHN1YnRpdGxlc2V0dGluZ3NjbG9zZWJ1dHRvbl8xLlN1YnRpdGxlU2V0dGluZ3NDbG9zZUJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGVTZXR0aW5nc1BhbmVsOiBfdGhpcywgc2V0dGluZ3NQYW5lbDogY29uZmlnLnNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgICAgICAgICB9KSwgbmV3IHN1YnRpdGxlc2V0dGluZ3NyZXNldGJ1dHRvbl8xLlN1YnRpdGxlU2V0dGluZ3NSZXNldEJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NNYW5hZ2VyOiBtYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3VidGl0bGVTZXR0aW5nc1BhbmVsLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMub25TaG93LnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm92ZXJsYXkuZW5hYmxlUHJldmlld1N1YnRpdGxlTGFiZWwoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uSGlkZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vdmVybGF5LnJlbW92ZVByZXZpZXdTdWJ0aXRsZUxhYmVsKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN1YnRpdGxlU2V0dGluZ3NQYW5lbDtcclxufShzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbCkpO1xyXG5leHBvcnRzLlN1YnRpdGxlU2V0dGluZ3NQYW5lbCA9IFN1YnRpdGxlU2V0dGluZ3NQYW5lbDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvc3VidGl0bGVzZXR0aW5nc3BhbmVsLnRzXG4vLyBtb2R1bGUgaWQgPSAzNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHN1YnRpdGxlc2V0dGluZ3NlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94XCIpO1xyXG4vKipcclxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBvZiBkaWZmZXJlbnQgZm9udCBjb2xvcnMuXHJcbiAqL1xyXG52YXIgRm9udENvbG9yU2VsZWN0Qm94ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhGb250Q29sb3JTZWxlY3RCb3gsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBGb250Q29sb3JTZWxlY3RCb3goKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgRm9udENvbG9yU2VsZWN0Qm94LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbShudWxsLCAnZGVmYXVsdCcpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnd2hpdGUnLCAnd2hpdGUnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJ2JsYWNrJywgJ2JsYWNrJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdyZWQnLCAncmVkJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdncmVlbicsICdncmVlbicpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnYmx1ZScsICdibHVlJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdjeWFuJywgJ2N5YW4nKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJ3llbGxvdycsICd5ZWxsb3cnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJ21hZ2VudGEnLCAnbWFnZW50YScpO1xyXG4gICAgICAgIHZhciBzZXRDb2xvckFuZE9wYWNpdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udENvbG9yLmlzU2V0KCkgJiYgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRPcGFjaXR5LmlzU2V0KCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRvZ2dsZU92ZXJsYXlDbGFzcygnZm9udGNvbG9yLScgKyBfdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udENvbG9yLnZhbHVlICsgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRPcGFjaXR5LnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRvZ2dsZU92ZXJsYXlDbGFzcyhudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1TZWxlY3RlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwga2V5KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNldHRpbmdzTWFuYWdlci5mb250Q29sb3IudmFsdWUgPSBrZXk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udENvbG9yLm9uQ2hhbmdlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgLy8gQ29sb3IgYW5kIG9wYWNpdHkgZ28gdG9nZXRoZXIsIHNvIHdlIG5lZWQgdG8uLi5cclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udENvbG9yLmlzU2V0KCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIC4uLiBjbGVhciB0aGUgb3BhY2l0eSB3aGVuIHRoZSBjb2xvciBpcyBub3Qgc2V0XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udE9wYWNpdHkuY2xlYXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRPcGFjaXR5LmlzU2V0KCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIC4uLiBzZXQgYW4gb3BhY2l0eSB3aGVuIHRoZSBjb2xvciBpcyBzZXRcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldHRpbmdzTWFuYWdlci5mb250T3BhY2l0eS52YWx1ZSA9ICcxMDAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLnNlbGVjdEl0ZW0ocHJvcGVydHkudmFsdWUpO1xyXG4gICAgICAgICAgICBzZXRDb2xvckFuZE9wYWNpdHkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5mb250T3BhY2l0eS5vbkNoYW5nZWQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0Q29sb3JBbmRPcGFjaXR5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gTG9hZCBpbml0aWFsIHZhbHVlXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRDb2xvci5pc1NldCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0SXRlbSh0aGlzLnNldHRpbmdzTWFuYWdlci5mb250Q29sb3IudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRm9udENvbG9yU2VsZWN0Qm94O1xyXG59KHN1YnRpdGxlc2V0dGluZ3NlbGVjdGJveF8xLlN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCkpO1xyXG5leHBvcnRzLkZvbnRDb2xvclNlbGVjdEJveCA9IEZvbnRDb2xvclNlbGVjdEJveDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvZm9udGNvbG9yc2VsZWN0Ym94LnRzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHN1YnRpdGxlc2V0dGluZ3NlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94XCIpO1xyXG4vKipcclxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBvZiBkaWZmZXJlbnQgZm9udCBjb2xvcnMuXHJcbiAqL1xyXG52YXIgRm9udE9wYWNpdHlTZWxlY3RCb3ggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEZvbnRPcGFjaXR5U2VsZWN0Qm94LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRm9udE9wYWNpdHlTZWxlY3RCb3goKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgRm9udE9wYWNpdHlTZWxlY3RCb3gucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKG51bGwsICdkZWZhdWx0Jyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCcxMDAnLCAnMTAwJScpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnNzUnLCAnNzUlJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCc1MCcsICc1MCUnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJzI1JywgJzI1JScpO1xyXG4gICAgICAgIHRoaXMub25JdGVtU2VsZWN0ZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIGtleSkge1xyXG4gICAgICAgICAgICBfdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udE9wYWNpdHkudmFsdWUgPSBrZXk7XHJcbiAgICAgICAgICAgIC8vIENvbG9yIGFuZCBvcGFjaXR5IGdvIHRvZ2V0aGVyLCBzbyB3ZSBuZWVkIHRvLi4uXHJcbiAgICAgICAgICAgIGlmICghX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRPcGFjaXR5LmlzU2V0KCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIC4uLiBjbGVhciB0aGUgY29sb3Igd2hlbiB0aGUgb3BhY2l0eSBpcyBub3Qgc2V0XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udENvbG9yLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIV90aGlzLnNldHRpbmdzTWFuYWdlci5mb250Q29sb3IuaXNTZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gLi4uIHNldCBhIGNvbG9yIHdoZW4gdGhlIG9wYWNpdHkgaXMgc2V0XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udENvbG9yLnZhbHVlID0gJ3doaXRlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBzZWxlY3RlZCBpdGVtIHdoZW4gdmFsdWUgaXMgc2V0IGZyb20gc29tZXdoZXJlIGVsc2VcclxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5mb250T3BhY2l0eS5vbkNoYW5nZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNlbGVjdEl0ZW0ocHJvcGVydHkudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIExvYWQgaW5pdGlhbCB2YWx1ZVxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci5mb250T3BhY2l0eS5pc1NldCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0SXRlbSh0aGlzLnNldHRpbmdzTWFuYWdlci5mb250T3BhY2l0eS52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBGb250T3BhY2l0eVNlbGVjdEJveDtcclxufShzdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hfMS5TdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3gpKTtcclxuZXhwb3J0cy5Gb250T3BhY2l0eVNlbGVjdEJveCA9IEZvbnRPcGFjaXR5U2VsZWN0Qm94O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9mb250b3BhY2l0eXNlbGVjdGJveC50c1xuLy8gbW9kdWxlIGlkID0gMzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBzdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL3N1YnRpdGxlc2V0dGluZ3NlbGVjdGJveFwiKTtcclxuLyoqXHJcbiAqIEEgc2VsZWN0IGJveCBwcm92aWRpbmcgYSBzZWxlY3Rpb24gb2YgZGlmZmVyZW50IGZvbnQgZmFtaWx5LlxyXG4gKi9cclxudmFyIEZvbnRGYW1pbHlTZWxlY3RCb3ggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEZvbnRGYW1pbHlTZWxlY3RCb3gsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBGb250RmFtaWx5U2VsZWN0Qm94KCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIEZvbnRGYW1pbHlTZWxlY3RCb3gucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKG51bGwsICdkZWZhdWx0Jyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdtb25vc3BhY2Vkc2VyaWYnLCAnbW9ub3NwYWNlZCBzZXJpZicpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgncHJvcG9ydGlvbmFsc2VyaWYnLCAncHJvcG9ydGlvbmFsIHNlcmlmJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdtb25vc3BhY2Vkc2Fuc3NlcmlmJywgJ21vbm9zcGFjZWQgc2FucyBzZXJpZicpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgncHJvcG9ydGlvbmFsc2Fuc3NlcmlmJywgJ3Byb3BvcnRpb25hbCBzYW5zIHNlcmlmJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdjYXN1YWwnLCAnY2FzdWFsJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdjdXJzaXZlJywgJ2N1cnNpdmUnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJ3NtYWxsY2FwaXRhbCcsICdzbWFsbCBjYXBpdGFsJyk7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udEZhbWlseS5vbkNoYW5nZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eS5pc1NldCgpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50b2dnbGVPdmVybGF5Q2xhc3MoJ2ZvbnRmYW1pbHktJyArIHByb3BlcnR5LnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRvZ2dsZU92ZXJsYXlDbGFzcyhudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTZWxlY3QgdGhlIGl0ZW0gaW4gY2FzZSB0aGUgcHJvcGVydHkgd2FzIHNldCBmcm9tIG91dHNpZGVcclxuICAgICAgICAgICAgX3RoaXMuc2VsZWN0SXRlbShwcm9wZXJ0eS52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1TZWxlY3RlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwga2V5KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNldHRpbmdzTWFuYWdlci5mb250RmFtaWx5LnZhbHVlID0ga2V5O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIExvYWQgaW5pdGlhbCB2YWx1ZVxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci5mb250RmFtaWx5LmlzU2V0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RJdGVtKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRGYW1pbHkudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRm9udEZhbWlseVNlbGVjdEJveDtcclxufShzdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hfMS5TdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3gpKTtcclxuZXhwb3J0cy5Gb250RmFtaWx5U2VsZWN0Qm94ID0gRm9udEZhbWlseVNlbGVjdEJveDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvZm9udGZhbWlseXNlbGVjdGJveC50c1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBzdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL3N1YnRpdGxlc2V0dGluZ3NlbGVjdGJveFwiKTtcclxuLyoqXHJcbiAqIEEgc2VsZWN0IGJveCBwcm92aWRpbmcgYSBzZWxlY3Rpb24gb2YgZGlmZmVyZW50IGZvbnQgY29sb3JzLlxyXG4gKi9cclxudmFyIEZvbnRTaXplU2VsZWN0Qm94ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhGb250U2l6ZVNlbGVjdEJveCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEZvbnRTaXplU2VsZWN0Qm94KCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIEZvbnRTaXplU2VsZWN0Qm94LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbShudWxsLCAnZGVmYXVsdCcpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnNTAnLCAnNTAlJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCc3NScsICc3NSUnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJzEwMCcsICcxMDAlJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCcxNTAnLCAnMTUwJScpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnMjAwJywgJzIwMCUnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJzMwMCcsICczMDAlJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCc0MDAnLCAnNDAwJScpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmZvbnRTaXplLm9uQ2hhbmdlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5LmlzU2V0KCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRvZ2dsZU92ZXJsYXlDbGFzcygnZm9udHNpemUtJyArIHByb3BlcnR5LnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRvZ2dsZU92ZXJsYXlDbGFzcyhudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTZWxlY3QgdGhlIGl0ZW0gaW4gY2FzZSB0aGUgcHJvcGVydHkgd2FzIHNldCBmcm9tIG91dHNpZGVcclxuICAgICAgICAgICAgX3RoaXMuc2VsZWN0SXRlbShwcm9wZXJ0eS52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1TZWxlY3RlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwga2V5KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNldHRpbmdzTWFuYWdlci5mb250U2l6ZS52YWx1ZSA9IGtleTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBMb2FkIGluaXRpYWwgdmFsdWVcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udFNpemUuaXNTZXQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEl0ZW0odGhpcy5zZXR0aW5nc01hbmFnZXIuZm9udFNpemUudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRm9udFNpemVTZWxlY3RCb3g7XHJcbn0oc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94XzEuU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94KSk7XHJcbmV4cG9ydHMuRm9udFNpemVTZWxlY3RCb3ggPSBGb250U2l6ZVNlbGVjdEJveDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvZm9udHNpemVzZWxlY3Rib3gudHNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9zdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hcIik7XHJcbi8qKlxyXG4gKiBBIHNlbGVjdCBib3ggcHJvdmlkaW5nIGEgc2VsZWN0aW9uIG9mIGRpZmZlcmVudCBiYWNrZ3JvdW5kIGNvbG9ycy5cclxuICovXHJcbnZhciBCYWNrZ3JvdW5kQ29sb3JTZWxlY3RCb3ggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEJhY2tncm91bmRDb2xvclNlbGVjdEJveCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEJhY2tncm91bmRDb2xvclNlbGVjdEJveCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBCYWNrZ3JvdW5kQ29sb3JTZWxlY3RCb3gucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKG51bGwsICdkZWZhdWx0Jyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCd3aGl0ZScsICd3aGl0ZScpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnYmxhY2snLCAnYmxhY2snKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJ3JlZCcsICdyZWQnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJ2dyZWVuJywgJ2dyZWVuJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdibHVlJywgJ2JsdWUnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJ2N5YW4nLCAnY3lhbicpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgneWVsbG93JywgJ3llbGxvdycpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnbWFnZW50YScsICdtYWdlbnRhJyk7XHJcbiAgICAgICAgdmFyIHNldENvbG9yQW5kT3BhY2l0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kQ29sb3IuaXNTZXQoKSAmJiBfdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkuaXNTZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKCdiZ2NvbG9yLScgKyBfdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZENvbG9yLnZhbHVlICsgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRPcGFjaXR5LnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRvZ2dsZU92ZXJsYXlDbGFzcyhudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1TZWxlY3RlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwga2V5KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kQ29sb3IudmFsdWUgPSBrZXk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZENvbG9yLm9uQ2hhbmdlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgLy8gQ29sb3IgYW5kIG9wYWNpdHkgZ28gdG9nZXRoZXIsIHNvIHdlIG5lZWQgdG8uLi5cclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZENvbG9yLmlzU2V0KCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIC4uLiBjbGVhciB0aGUgb3BhY2l0eSB3aGVuIHRoZSBjb2xvciBpcyBub3Qgc2V0XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkuY2xlYXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRPcGFjaXR5LmlzU2V0KCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIC4uLiBzZXQgYW4gb3BhY2l0eSB3aGVuIHRoZSBjb2xvciBpcyBzZXRcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kT3BhY2l0eS52YWx1ZSA9ICcxMDAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLnNlbGVjdEl0ZW0ocHJvcGVydHkudmFsdWUpO1xyXG4gICAgICAgICAgICBzZXRDb2xvckFuZE9wYWNpdHkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kT3BhY2l0eS5vbkNoYW5nZWQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0Q29sb3JBbmRPcGFjaXR5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gTG9hZCBpbml0aWFsIHZhbHVlXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRDb2xvci5pc1NldCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0SXRlbSh0aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kQ29sb3IudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQmFja2dyb3VuZENvbG9yU2VsZWN0Qm94O1xyXG59KHN1YnRpdGxlc2V0dGluZ3NlbGVjdGJveF8xLlN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCkpO1xyXG5leHBvcnRzLkJhY2tncm91bmRDb2xvclNlbGVjdEJveCA9IEJhY2tncm91bmRDb2xvclNlbGVjdEJveDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvYmFja2dyb3VuZGNvbG9yc2VsZWN0Ym94LnRzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHN1YnRpdGxlc2V0dGluZ3NlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94XCIpO1xyXG4vKipcclxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBvZiBkaWZmZXJlbnQgYmFja2dyb3VuZCBvcGFjaXR5LlxyXG4gKi9cclxudmFyIEJhY2tncm91bmRPcGFjaXR5U2VsZWN0Qm94ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhCYWNrZ3JvdW5kT3BhY2l0eVNlbGVjdEJveCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEJhY2tncm91bmRPcGFjaXR5U2VsZWN0Qm94KCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIEJhY2tncm91bmRPcGFjaXR5U2VsZWN0Qm94LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbShudWxsLCAnZGVmYXVsdCcpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnMTAwJywgJzEwMCUnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJzc1JywgJzc1JScpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnNTAnLCAnNTAlJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCcyNScsICcyNSUnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJzAnLCAnMCUnKTtcclxuICAgICAgICB0aGlzLm9uSXRlbVNlbGVjdGVkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBrZXkpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRPcGFjaXR5LnZhbHVlID0ga2V5O1xyXG4gICAgICAgICAgICAvLyBDb2xvciBhbmQgb3BhY2l0eSBnbyB0b2dldGhlciwgc28gd2UgbmVlZCB0by4uLlxyXG4gICAgICAgICAgICBpZiAoIV90aGlzLnNldHRpbmdzTWFuYWdlci5iYWNrZ3JvdW5kT3BhY2l0eS5pc1NldCgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAuLi4gY2xlYXIgdGhlIGNvbG9yIHdoZW4gdGhlIG9wYWNpdHkgaXMgbm90IHNldFxyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRDb2xvci5jbGVhcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFfdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZENvbG9yLmlzU2V0KCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIC4uLiBzZXQgYSBjb2xvciB3aGVuIHRoZSBvcGFjaXR5IGlzIHNldFxyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLmJhY2tncm91bmRDb2xvci52YWx1ZSA9ICdibGFjayc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgaXRlbSB3aGVuIHZhbHVlIGlzIHNldCBmcm9tIHNvbWV3aGVyZSBlbHNlXHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkub25DaGFuZ2VkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICBfdGhpcy5zZWxlY3RJdGVtKHByb3BlcnR5LnZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBMb2FkIGluaXRpYWwgdmFsdWVcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkuaXNTZXQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEl0ZW0odGhpcy5zZXR0aW5nc01hbmFnZXIuYmFja2dyb3VuZE9wYWNpdHkudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQmFja2dyb3VuZE9wYWNpdHlTZWxlY3RCb3g7XHJcbn0oc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94XzEuU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94KSk7XHJcbmV4cG9ydHMuQmFja2dyb3VuZE9wYWNpdHlTZWxlY3RCb3ggPSBCYWNrZ3JvdW5kT3BhY2l0eVNlbGVjdEJveDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvYmFja2dyb3VuZG9wYWNpdHlzZWxlY3Rib3gudHNcbi8vIG1vZHVsZSBpZCA9IDQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9zdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hcIik7XHJcbi8qKlxyXG4gKiBBIHNlbGVjdCBib3ggcHJvdmlkaW5nIGEgc2VsZWN0aW9uIG9mIGRpZmZlcmVudCBiYWNrZ3JvdW5kIGNvbG9ycy5cclxuICovXHJcbnZhciBXaW5kb3dDb2xvclNlbGVjdEJveCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoV2luZG93Q29sb3JTZWxlY3RCb3gsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBXaW5kb3dDb2xvclNlbGVjdEJveCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBXaW5kb3dDb2xvclNlbGVjdEJveC5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0obnVsbCwgJ2RlZmF1bHQnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJ3doaXRlJywgJ3doaXRlJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdibGFjaycsICdibGFjaycpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgncmVkJywgJ3JlZCcpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnZ3JlZW4nLCAnZ3JlZW4nKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJ2JsdWUnLCAnYmx1ZScpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnY3lhbicsICdjeWFuJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCd5ZWxsb3cnLCAneWVsbG93Jyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdtYWdlbnRhJywgJ21hZ2VudGEnKTtcclxuICAgICAgICB2YXIgc2V0Q29sb3JBbmRPcGFjaXR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd0NvbG9yLmlzU2V0KCkgJiYgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkuaXNTZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKCd3aW5kb3djb2xvci0nICsgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd0NvbG9yLnZhbHVlICsgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9uSXRlbVNlbGVjdGVkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBrZXkpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd0NvbG9yLnZhbHVlID0ga2V5O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd0NvbG9yLm9uQ2hhbmdlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgLy8gQ29sb3IgYW5kIG9wYWNpdHkgZ28gdG9nZXRoZXIsIHNvIHdlIG5lZWQgdG8uLi5cclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5zZXR0aW5nc01hbmFnZXIud2luZG93Q29sb3IuaXNTZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gLi4uIGNsZWFyIHRoZSBvcGFjaXR5IHdoZW4gdGhlIGNvbG9yIGlzIG5vdCBzZXRcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dPcGFjaXR5LmNsZWFyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIV90aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dPcGFjaXR5LmlzU2V0KCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIC4uLiBzZXQgYW4gb3BhY2l0eSB3aGVuIHRoZSBjb2xvciBpcyBzZXRcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dPcGFjaXR5LnZhbHVlID0gJzEwMCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuc2VsZWN0SXRlbShwcm9wZXJ0eS52YWx1ZSk7XHJcbiAgICAgICAgICAgIHNldENvbG9yQW5kT3BhY2l0eSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkub25DaGFuZ2VkLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldENvbG9yQW5kT3BhY2l0eSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIExvYWQgaW5pdGlhbCB2YWx1ZVxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dDb2xvci5pc1NldCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0SXRlbSh0aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dDb2xvci52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBXaW5kb3dDb2xvclNlbGVjdEJveDtcclxufShzdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hfMS5TdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3gpKTtcclxuZXhwb3J0cy5XaW5kb3dDb2xvclNlbGVjdEJveCA9IFdpbmRvd0NvbG9yU2VsZWN0Qm94O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy93aW5kb3djb2xvcnNlbGVjdGJveC50c1xuLy8gbW9kdWxlIGlkID0gNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBzdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL3N1YnRpdGxlc2V0dGluZ3NlbGVjdGJveFwiKTtcclxuLyoqXHJcbiAqIEEgc2VsZWN0IGJveCBwcm92aWRpbmcgYSBzZWxlY3Rpb24gb2YgZGlmZmVyZW50IGJhY2tncm91bmQgb3BhY2l0eS5cclxuICovXHJcbnZhciBXaW5kb3dPcGFjaXR5U2VsZWN0Qm94ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhXaW5kb3dPcGFjaXR5U2VsZWN0Qm94LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gV2luZG93T3BhY2l0eVNlbGVjdEJveCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBXaW5kb3dPcGFjaXR5U2VsZWN0Qm94LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbShudWxsLCAnZGVmYXVsdCcpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnMTAwJywgJzEwMCUnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJzc1JywgJzc1JScpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnNTAnLCAnNTAlJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCcyNScsICcyNSUnKTtcclxuICAgICAgICB0aGlzLmFkZEl0ZW0oJzAnLCAnMCUnKTtcclxuICAgICAgICB0aGlzLm9uSXRlbVNlbGVjdGVkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBrZXkpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkudmFsdWUgPSBrZXk7XHJcbiAgICAgICAgICAgIC8vIENvbG9yIGFuZCBvcGFjaXR5IGdvIHRvZ2V0aGVyLCBzbyB3ZSBuZWVkIHRvLi4uXHJcbiAgICAgICAgICAgIGlmICghX3RoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkuaXNTZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gLi4uIGNsZWFyIHRoZSBjb2xvciB3aGVuIHRoZSBvcGFjaXR5IGlzIG5vdCBzZXRcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dDb2xvci5jbGVhcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFfdGhpcy5zZXR0aW5nc01hbmFnZXIud2luZG93Q29sb3IuaXNTZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gLi4uIHNldCBhIGNvbG9yIHdoZW4gdGhlIG9wYWNpdHkgaXMgc2V0XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXR0aW5nc01hbmFnZXIud2luZG93Q29sb3IudmFsdWUgPSAnYmxhY2snO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHNlbGVjdGVkIGl0ZW0gd2hlbiB2YWx1ZSBpcyBzZXQgZnJvbSBzb21ld2hlcmUgZWxzZVxyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLndpbmRvd09wYWNpdHkub25DaGFuZ2VkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICBfdGhpcy5zZWxlY3RJdGVtKHByb3BlcnR5LnZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBMb2FkIGluaXRpYWwgdmFsdWVcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nc01hbmFnZXIud2luZG93T3BhY2l0eS5pc1NldCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0SXRlbSh0aGlzLnNldHRpbmdzTWFuYWdlci53aW5kb3dPcGFjaXR5LnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdpbmRvd09wYWNpdHlTZWxlY3RCb3g7XHJcbn0oc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94XzEuU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94KSk7XHJcbmV4cG9ydHMuV2luZG93T3BhY2l0eVNlbGVjdEJveCA9IFdpbmRvd09wYWNpdHlTZWxlY3RCb3g7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3dpbmRvd29wYWNpdHlzZWxlY3Rib3gudHNcbi8vIG1vZHVsZSBpZCA9IDQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9zdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hcIik7XHJcbi8qKlxyXG4gKiBBIHNlbGVjdCBib3ggcHJvdmlkaW5nIGEgc2VsZWN0aW9uIG9mIGRpZmZlcmVudCBjaGFyYWN0ZXIgZWRnZS5cclxuICovXHJcbnZhciBDaGFyYWN0ZXJFZGdlU2VsZWN0Qm94ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDaGFyYWN0ZXJFZGdlU2VsZWN0Qm94LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ2hhcmFjdGVyRWRnZVNlbGVjdEJveCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBDaGFyYWN0ZXJFZGdlU2VsZWN0Qm94LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbShudWxsLCAnZGVmYXVsdCcpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgncmFpc2VkJywgJ3JhaXNlZCcpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgnZGVwcmVzc2VkJywgJ2RlcHJlc3NlZCcpO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgndW5pZm9ybScsICd1bmlmb3JtJyk7XHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKCdkcm9wc2hhZG93ZWQnLCAnZHJvcCBzaGFkb3dlZCcpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmNoYXJhY3RlckVkZ2Uub25DaGFuZ2VkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICBpZiAocHJvcGVydHkuaXNTZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudG9nZ2xlT3ZlcmxheUNsYXNzKCdjaGFyYWN0ZXJlZGdlLScgKyBwcm9wZXJ0eS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50b2dnbGVPdmVybGF5Q2xhc3MobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBpdGVtIGluIGNhc2UgdGhlIHByb3BlcnR5IHdhcyBzZXQgZnJvbSBvdXRzaWRlXHJcbiAgICAgICAgICAgIF90aGlzLnNlbGVjdEl0ZW0ocHJvcGVydHkudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMub25JdGVtU2VsZWN0ZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIGtleSkge1xyXG4gICAgICAgICAgICBfdGhpcy5zZXR0aW5nc01hbmFnZXIuY2hhcmFjdGVyRWRnZS52YWx1ZSA9IGtleTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBMb2FkIGluaXRpYWwgdmFsdWVcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nc01hbmFnZXIuY2hhcmFjdGVyRWRnZS5pc1NldCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0SXRlbSh0aGlzLnNldHRpbmdzTWFuYWdlci5jaGFyYWN0ZXJFZGdlLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENoYXJhY3RlckVkZ2VTZWxlY3RCb3g7XHJcbn0oc3VidGl0bGVzZXR0aW5nc2VsZWN0Ym94XzEuU3VidGl0bGVTZXR0aW5nU2VsZWN0Qm94KSk7XHJcbmV4cG9ydHMuQ2hhcmFjdGVyRWRnZVNlbGVjdEJveCA9IENoYXJhY3RlckVkZ2VTZWxlY3RCb3g7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL2NoYXJhY3RlcmVkZ2VzZWxlY3Rib3gudHNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTdG9yYWdlVXRpbHM7XHJcbihmdW5jdGlvbiAoU3RvcmFnZVV0aWxzKSB7XHJcbiAgICB2YXIgaGFzTG9jYWxTdG9yYWdlQ2FjaGU7XHJcbiAgICBmdW5jdGlvbiBoYXNMb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAgICAgaWYgKGhhc0xvY2FsU3RvcmFnZUNhY2hlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoYXNMb2NhbFN0b3JhZ2VDYWNoZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaGFzTG9jYWxTdG9yYWdlIGlzIHVzZWQgdG8gc2FmZWx5IGVuc3VyZSB3ZSBjYW4gdXNlIGxvY2FsU3RvcmFnZVxyXG4gICAgICAgIC8vIHRha2VuIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYl9TdG9yYWdlX0FQSS9Vc2luZ190aGVfV2ViX1N0b3JhZ2VfQVBJI0ZlYXR1cmUtZGV0ZWN0aW5nX2xvY2FsU3RvcmFnZVxyXG4gICAgICAgIHZhciBzdG9yYWdlID0gd2luZG93Wydsb2NhbFN0b3JhZ2UnXTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgeCA9ICdfX3N0b3JhZ2VfdGVzdF9fJztcclxuICAgICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKHgsIHgpO1xyXG4gICAgICAgICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XHJcbiAgICAgICAgICAgIGhhc0xvY2FsU3RvcmFnZUNhY2hlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaGFzTG9jYWxTdG9yYWdlQ2FjaGUgPSBlIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uICYmIChcclxuICAgICAgICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxyXG4gICAgICAgICAgICBlLmNvZGUgPT09IDIyIHx8XHJcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94XHJcbiAgICAgICAgICAgICAgICBlLmNvZGUgPT09IDEwMTQgfHxcclxuICAgICAgICAgICAgICAgIC8vIHRlc3QgbmFtZSBmaWVsZCB0b28sIGJlY2F1c2UgY29kZSBtaWdodCBub3QgYmUgcHJlc2VudFxyXG4gICAgICAgICAgICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxyXG4gICAgICAgICAgICAgICAgZS5uYW1lID09PSAnUXVvdGFFeGNlZWRlZEVycm9yJyB8fFxyXG4gICAgICAgICAgICAgICAgLy8gRmlyZWZveFxyXG4gICAgICAgICAgICAgICAgZS5uYW1lID09PSAnTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRUQnKSAmJlxyXG4gICAgICAgICAgICAgICAgLy8gYWNrbm93bGVkZ2UgUXVvdGFFeGNlZWRlZEVycm9yIG9ubHkgaWYgdGhlcmUncyBzb21ldGhpbmcgYWxyZWFkeSBzdG9yZWRcclxuICAgICAgICAgICAgICAgIHN0b3JhZ2UubGVuZ3RoICE9PSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGFzTG9jYWxTdG9yYWdlQ2FjaGU7XHJcbiAgICB9XHJcbiAgICBTdG9yYWdlVXRpbHMuaGFzTG9jYWxTdG9yYWdlID0gaGFzTG9jYWxTdG9yYWdlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9yZXMgYSBzdHJpbmcgaXRlbSBpbnRvIGxvY2FsU3RvcmFnZS5cclxuICAgICAqIEBwYXJhbSBrZXkgdGhlIGl0ZW0ncyBrZXlcclxuICAgICAqIEBwYXJhbSBkYXRhIHRoZSBpdGVtJ3MgZGF0YVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzZXRJdGVtKGtleSwgZGF0YSkge1xyXG4gICAgICAgIGlmIChTdG9yYWdlVXRpbHMuaGFzTG9jYWxTdG9yYWdlKCkpIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgU3RvcmFnZVV0aWxzLnNldEl0ZW0gPSBzZXRJdGVtO1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGFuIGl0ZW0ncyBzdHJpbmcgdmFsdWUgZnJvbSB0aGUgbG9jYWxTdG9yYWdlLlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUga2V5IHRvIGxvb2sgdXAgaXRzIGFzc29jaWF0ZWQgdmFsdWVcclxuICAgICAqIEByZXR1cm4ge3N0cmluZyB8IG51bGx9IFJldHVybnMgdGhlIHN0cmluZyBpZiBmb3VuZCwgbnVsbCBpZiB0aGVyZSBpcyBubyBkYXRhIHN0b3JlZCBmb3IgdGhlIGtleVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRJdGVtKGtleSkge1xyXG4gICAgICAgIGlmIChTdG9yYWdlVXRpbHMuaGFzTG9jYWxTdG9yYWdlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgU3RvcmFnZVV0aWxzLmdldEl0ZW0gPSBnZXRJdGVtO1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9yZXMgYW4gb2JqZWN0IGludG8gbG9jYWxTdG9yYWdlLiBUaGUgb2JqZWN0IHdpbGwgYmUgc2VyaWFsaXplZCB0byBKU09OLiBUaGUgZm9sbG93aW5nIHR5cGVzIGFyZSBzdXBwb3J0ZWRcclxuICAgICAqIGluIGFkZGl0aW9uIHRvIHRoZSBkZWZhdWx0IHR5cGVzOlxyXG4gICAgICogIC0gQ29sb3JVdGlscy5Db2xvclxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBrZXkgdGhlIGtleSB0byBzdG9yZSB0aGUgZGF0YSB0b1xyXG4gICAgICogQHBhcmFtIGRhdGEgdGhlIG9iamVjdCB0byBzdG9yZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzZXRPYmplY3Qoa2V5LCBkYXRhKSB7XHJcbiAgICAgICAgaWYgKFN0b3JhZ2VVdGlscy5oYXNMb2NhbFN0b3JhZ2UoKSkge1xyXG4gICAgICAgICAgICB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG4gICAgICAgICAgICBzZXRJdGVtKGtleSwganNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgU3RvcmFnZVV0aWxzLnNldE9iamVjdCA9IHNldE9iamVjdDtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBhbiBvYmplY3QgZm9yIHRoZSBnaXZlbiBrZXkgZnJvbSBsb2NhbFN0b3JhZ2UuIFRoZSBvYmplY3Qgd2lsbCBiZSBkZXNlcmlhbGl6ZWQgZnJvbSBKU09OLiBCZXNpZGUgdGhlXHJcbiAgICAgKiBkZWZhdWx0IHR5cGVzLCB0aGUgZm9sbG93aW5nIHR5cGVzIGFyZSBzdXBwb3J0ZWQ6XHJcbiAgICAgKiAgLSBDb2xvclV0aWxzLkNvbG9yXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGtleSB0aGUga2V5IHRvIGxvb2sgdXAgaXRzIGFzc29jaWF0ZWQgb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJuIHthbnl9IFJldHVybnMgdGhlIG9iamVjdCBpZiBmb3VuZCwgbnVsbCBvdGhlcndpc2VcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0T2JqZWN0KGtleSkge1xyXG4gICAgICAgIGlmIChTdG9yYWdlVXRpbHMuaGFzTG9jYWxTdG9yYWdlKCkpIHtcclxuICAgICAgICAgICAgdmFyIGpzb24gPSBnZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIFN0b3JhZ2VVdGlscy5nZXRPYmplY3QgPSBnZXRPYmplY3Q7XHJcbn0pKFN0b3JhZ2VVdGlscyA9IGV4cG9ydHMuU3RvcmFnZVV0aWxzIHx8IChleHBvcnRzLlN0b3JhZ2VVdGlscyA9IHt9KSk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvc3RvcmFnZXV0aWxzLnRzXG4vLyBtb2R1bGUgaWQgPSA0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHN1YnRpdGxlc2V0dGluZ3NidXR0b25fMSA9IHJlcXVpcmUoXCIuL3N1YnRpdGxlc2V0dGluZ3NidXR0b25cIik7XHJcbi8qKlxyXG4gKiBBIGJ1dHRvbiB0aGF0IHRvZ2dsZXMgdGhlIG9wdGlvbiBtZW51IGZvciBzdWJ0aXRsZXNcclxuICovXHJcbnZhciBTdWJ0aXRsZVNldHRpbmdzQ2xvc2VCdXR0b24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFN1YnRpdGxlU2V0dGluZ3NDbG9zZUJ1dHRvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFN1YnRpdGxlU2V0dGluZ3NDbG9zZUJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktc3VidGl0bGVzZXR0aW5nc2Nsb3NlYnV0dG9uJyxcclxuICAgICAgICAgICAgdGV4dDogJ0JhY2snLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3VidGl0bGVTZXR0aW5nc0Nsb3NlQnV0dG9uLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMub25DbGljay5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zdWJ0aXRsZVNldHRpbmdzUGFuZWwuaGlkZSgpO1xyXG4gICAgICAgICAgICBfdGhpcy5zZXR0aW5nc1BhbmVsLnNob3coKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3VidGl0bGVTZXR0aW5nc0Nsb3NlQnV0dG9uO1xyXG59KHN1YnRpdGxlc2V0dGluZ3NidXR0b25fMS5TdWJ0aXRsZVNldHRpbmdzQnV0dG9uKSk7XHJcbmV4cG9ydHMuU3VidGl0bGVTZXR0aW5nc0Nsb3NlQnV0dG9uID0gU3VidGl0bGVTZXR0aW5nc0Nsb3NlQnV0dG9uO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzY2xvc2VidXR0b24udHNcbi8vIG1vZHVsZSBpZCA9IDQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgYnV0dG9uXzEgPSByZXF1aXJlKFwiLi4vYnV0dG9uXCIpO1xyXG4vKipcclxuICogQSBidXR0b24gdGhhdCByZXNldHMgYWxsIHN1YnRpdGxlIHNldHRpbmdzIHRvIHRoZWlyIGRlZmF1bHRzLlxyXG4gKi9cclxudmFyIFN1YnRpdGxlU2V0dGluZ3NSZXNldEJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU3VidGl0bGVTZXR0aW5nc1Jlc2V0QnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3VidGl0bGVTZXR0aW5nc1Jlc2V0QnV0dG9uKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1zdWJ0aXRsZXNldHRpbmdzcmVzZXRidXR0b24nLFxyXG4gICAgICAgICAgICB0ZXh0OiAnUmVzZXQnLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3VidGl0bGVTZXR0aW5nc1Jlc2V0QnV0dG9uLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMub25DbGljay5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWcuc2V0dGluZ3NNYW5hZ2VyLnJlc2V0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN1YnRpdGxlU2V0dGluZ3NSZXNldEJ1dHRvbjtcclxufShidXR0b25fMS5CdXR0b24pKTtcclxuZXhwb3J0cy5TdWJ0aXRsZVNldHRpbmdzUmVzZXRCdXR0b24gPSBTdWJ0aXRsZVNldHRpbmdzUmVzZXRCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NyZXNldGJ1dHRvbi50c1xuLy8gbW9kdWxlIGlkID0gNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuLi9jb250YWluZXJcIik7XHJcbnZhciBkb21fMSA9IHJlcXVpcmUoXCIuLi8uLi9kb21cIik7XHJcbnZhciBTdWJ0aXRsZVNldHRpbmdzTGFiZWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFN1YnRpdGxlU2V0dGluZ3NMYWJlbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFN1YnRpdGxlU2V0dGluZ3NMYWJlbChjb25maWcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMub3BlbmVyID0gY29uZmlnLm9wZW5lcjtcclxuICAgICAgICBfdGhpcy50ZXh0ID0gY29uZmlnLnRleHQ7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktbGFiZWwnLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vcGVuZXIsXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTdWJ0aXRsZVNldHRpbmdzTGFiZWwucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGFiZWxFbGVtZW50ID0gbmV3IGRvbV8xLkRPTSgnc3BhbicsIHtcclxuICAgICAgICAgICAgJ2lkJzogdGhpcy5jb25maWcuaWQsXHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMuZ2V0Q3NzQ2xhc3NlcygpLFxyXG4gICAgICAgIH0pLmFwcGVuZChuZXcgZG9tXzEuRE9NKCdzcGFuJywge30pLmh0bWwodGhpcy50ZXh0KSwgdGhpcy5vcGVuZXIuZ2V0RG9tRWxlbWVudCgpKTtcclxuICAgICAgICByZXR1cm4gbGFiZWxFbGVtZW50O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdWJ0aXRsZVNldHRpbmdzTGFiZWw7XHJcbn0oY29udGFpbmVyXzEuQ29udGFpbmVyKSk7XHJcbmV4cG9ydHMuU3VidGl0bGVTZXR0aW5nc0xhYmVsID0gU3VidGl0bGVTZXR0aW5nc0xhYmVsO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzbGFiZWwudHNcbi8vIG1vZHVsZSBpZCA9IDQ3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgc3VidGl0bGVzZXR0aW5nc2J1dHRvbl8xID0gcmVxdWlyZShcIi4vc3VidGl0bGVzZXR0aW5nc2J1dHRvblwiKTtcclxuLyoqXHJcbiAqIEEgYnV0dG9uIHRoYXQgdG9nZ2xlcyB0aGUgb3B0aW9uIG1lbnUgZm9yIHN1YnRpdGxlc1xyXG4gKi9cclxudmFyIFN1YnRpdGxlU2V0dGluZ3NPcGVuQnV0dG9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFN1YnRpdGxlU2V0dGluZ3NPcGVuQnV0dG9uKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1zdWJ0aXRsZXNldHRpbmdzb3BlbmJ1dHRvbicsXHJcbiAgICAgICAgICAgIHRleHQ6ICdTdWJ0aXRsZXMgc2V0dGluZ3MnLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3VidGl0bGVTZXR0aW5nc09wZW5CdXR0b24ucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnN1YnRpdGxlU2V0dGluZ3NQYW5lbC5zaG93KCk7XHJcbiAgICAgICAgICAgIF90aGlzLnNldHRpbmdzUGFuZWwuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbjtcclxufShzdWJ0aXRsZXNldHRpbmdzYnV0dG9uXzEuU3VidGl0bGVTZXR0aW5nc0J1dHRvbikpO1xyXG5leHBvcnRzLlN1YnRpdGxlU2V0dGluZ3NPcGVuQnV0dG9uID0gU3VidGl0bGVTZXR0aW5nc09wZW5CdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NvcGVuYnV0dG9uLnRzXG4vLyBtb2R1bGUgaWQgPSA0OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vc2VsZWN0Ym94XCIpO1xyXG4vKipcclxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBiZXR3ZWVuIGF2YWlsYWJsZSBhdWRpbyB0cmFja3MgKGUuZy4gZGlmZmVyZW50IGxhbmd1YWdlcykuXHJcbiAqL1xyXG52YXIgQXVkaW9UcmFja1NlbGVjdEJveCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQXVkaW9UcmFja1NlbGVjdEJveCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEF1ZGlvVHJhY2tTZWxlY3RCb3goY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIEF1ZGlvVHJhY2tTZWxlY3RCb3gucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIHNlbGVjdEN1cnJlbnRBdWRpb1RyYWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudEF1ZGlvVHJhY2sgPSBwbGF5ZXIuZ2V0QXVkaW8oKTtcclxuICAgICAgICAgICAgLy8gSExTIHN0cmVhbXMgZG9uJ3QgYWx3YXlzIHByb3ZpZGUgdGhpcywgc28gd2UgaGF2ZSB0byBjaGVja1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEF1ZGlvVHJhY2spIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdEl0ZW0oY3VycmVudEF1ZGlvVHJhY2suaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdXBkYXRlQXVkaW9UcmFja3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhdWRpb1RyYWNrcyA9IHBsYXllci5nZXRBdmFpbGFibGVBdWRpbygpO1xyXG4gICAgICAgICAgICBfdGhpcy5jbGVhckl0ZW1zKCk7XHJcbiAgICAgICAgICAgIC8vIEFkZCBhdWRpbyB0cmFja3NcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhdWRpb1RyYWNrc18xID0gYXVkaW9UcmFja3M7IF9pIDwgYXVkaW9UcmFja3NfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBhdWRpb1RyYWNrID0gYXVkaW9UcmFja3NfMVtfaV07XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hZGRJdGVtKGF1ZGlvVHJhY2suaWQsIGF1ZGlvVHJhY2subGFiZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgY29ycmVjdCBhdWRpbyB0cmFjayBhZnRlciB0aGUgdHJhY2tzIGhhdmUgYmVlbiBhZGRlZFxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGFsc28gaW1wb3J0YW50IGluIGNhc2Ugd2UgbWlzc2VkIHRoZSBgT05fQVVESU9fQ0hBTkdFRGAgZXZlbnQsIGUuZy4gd2hlbiBgcGxheWJhY2suYXVkaW9MYW5ndWFnZWBcclxuICAgICAgICAgICAgLy8gaXMgY29uZmlndXJlZCBidXQgdGhlIGV2ZW50IGlzIGZpcmVkIGJlZm9yZSB0aGUgVUkgaXMgY3JlYXRlZC5cclxuICAgICAgICAgICAgc2VsZWN0Q3VycmVudEF1ZGlvVHJhY2soKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25JdGVtU2VsZWN0ZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5zZXRBdWRpbyh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHNlbGVjdGlvbiB3aGVuIHNlbGVjdGVkIHRyYWNrIGhhcyBjaGFuZ2VkXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQVVESU9fQ0hBTkdFRCwgc2VsZWN0Q3VycmVudEF1ZGlvVHJhY2spO1xyXG4gICAgICAgIC8vIFVwZGF0ZSB0cmFja3Mgd2hlbiBzb3VyY2UgZ29lcyBhd2F5XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU09VUkNFX1VOTE9BREVELCB1cGRhdGVBdWRpb1RyYWNrcyk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHRyYWNrcyB3aGVuIGEgbmV3IHNvdXJjZSBpcyBsb2FkZWRcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgdXBkYXRlQXVkaW9UcmFja3MpO1xyXG4gICAgICAgIC8vIFVwZGF0ZSB0cmFja3Mgd2hlbiB0aGUgcGVyaW9kIHdpdGhpbiBhIHNvdXJjZSBjaGFuZ2VzXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUEVSSU9EX1NXSVRDSEVELCB1cGRhdGVBdWRpb1RyYWNrcyk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHRyYWNrcyB3aGVuIGEgdHJhY2sgaXMgYWRkZWQgb3IgcmVtb3ZlZCAoc2luY2UgcGxheWVyIDcuMS40KVxyXG4gICAgICAgIGlmIChwbGF5ZXIuRVZFTlQuT05fQVVESU9fQURERUQgJiYgcGxheWVyLkVWRU5ULk9OX0FVRElPX1JFTU9WRUQpIHtcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQVVESU9fQURERUQsIHVwZGF0ZUF1ZGlvVHJhY2tzKTtcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQVVESU9fUkVNT1ZFRCwgdXBkYXRlQXVkaW9UcmFja3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3B1bGF0ZSB0cmFja3MgYXQgc3RhcnR1cFxyXG4gICAgICAgIHVwZGF0ZUF1ZGlvVHJhY2tzKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEF1ZGlvVHJhY2tTZWxlY3RCb3g7XHJcbn0oc2VsZWN0Ym94XzEuU2VsZWN0Qm94KSk7XHJcbmV4cG9ydHMuQXVkaW9UcmFja1NlbGVjdEJveCA9IEF1ZGlvVHJhY2tTZWxlY3RCb3g7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9hdWRpb3RyYWNrc2VsZWN0Ym94LnRzXG4vLyBtb2R1bGUgaWQgPSA0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29udGFpbmVyXCIpO1xyXG52YXIgbGFiZWxfMSA9IHJlcXVpcmUoXCIuL2xhYmVsXCIpO1xyXG52YXIgY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRcIik7XHJcbnZhciBzdHJpbmd1dGlsc18xID0gcmVxdWlyZShcIi4uL3N0cmluZ3V0aWxzXCIpO1xyXG52YXIgaW1hZ2Vsb2FkZXJfMSA9IHJlcXVpcmUoXCIuLi9pbWFnZWxvYWRlclwiKTtcclxuLyoqXHJcbiAqIEEgbGFiZWwgZm9yIGEge0BsaW5rIFNlZWtCYXJ9IHRoYXQgY2FuIGRpc3BsYXkgdGhlIHNlZWsgdGFyZ2V0IHRpbWUsIGEgdGh1bWJuYWlsLCBhbmQgdGl0bGUgKGUuZy4gY2hhcHRlciB0aXRsZSkuXHJcbiAqL1xyXG52YXIgU2Vla0JhckxhYmVsID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTZWVrQmFyTGFiZWwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTZWVrQmFyTGFiZWwoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnRpbWVMYWJlbCA9IG5ldyBsYWJlbF8xLkxhYmVsKHsgY3NzQ2xhc3NlczogWydzZWVrYmFyLWxhYmVsLXRpbWUnXSB9KTtcclxuICAgICAgICBfdGhpcy50aXRsZUxhYmVsID0gbmV3IGxhYmVsXzEuTGFiZWwoeyBjc3NDbGFzc2VzOiBbJ3NlZWtiYXItbGFiZWwtdGl0bGUnXSB9KTtcclxuICAgICAgICBfdGhpcy50aHVtYm5haWwgPSBuZXcgY29tcG9uZW50XzEuQ29tcG9uZW50KHsgY3NzQ2xhc3NlczogWydzZWVrYmFyLXRodW1ibmFpbCddIH0pO1xyXG4gICAgICAgIF90aGlzLnRodW1ibmFpbEltYWdlTG9hZGVyID0gbmV3IGltYWdlbG9hZGVyXzEuSW1hZ2VMb2FkZXIoKTtcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1zZWVrYmFyLWxhYmVsJyxcclxuICAgICAgICAgICAgY29tcG9uZW50czogW25ldyBjb250YWluZXJfMS5Db250YWluZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudGh1bWJuYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgY29udGFpbmVyXzEuQ29udGFpbmVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtfdGhpcy50aXRsZUxhYmVsLCBfdGhpcy50aW1lTGFiZWxdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdzZWVrYmFyLWxhYmVsLW1ldGFkYXRhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnc2Vla2Jhci1sYWJlbC1pbm5lcicsXHJcbiAgICAgICAgICAgICAgICB9KV0sXHJcbiAgICAgICAgICAgIGhpZGRlbjogdHJ1ZSxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFNlZWtCYXJMYWJlbC5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgYXBwbGllZE1hcmtlckNzc0NsYXNzZXMgPSBbXTtcclxuICAgICAgICB1aW1hbmFnZXIub25TZWVrUHJldmlldy5zdWJzY3JpYmVSYXRlTGltaXRlZChmdW5jdGlvbiAoc2VuZGVyLCBhcmdzKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNMaXZlKCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXhUaW1lU2hpZnQgPSBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGltZSA9IG1heFRpbWVTaGlmdCAtIG1heFRpbWVTaGlmdCAqIChhcmdzLnBvc2l0aW9uIC8gMTAwKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldFRpbWUodGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5tYXJrZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRUaXRsZVRleHQoYXJncy5tYXJrZXIubWFya2VyLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFRpdGxlVGV4dChudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB0aW1lID0gcGxheWVyLmdldER1cmF0aW9uKCkgKiAoYXJncy5wb3NpdGlvbiAvIDEwMCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUaW1lKHRpbWUpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0VGh1bWJuYWlsKHBsYXllci5nZXRUaHVtYih0aW1lKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIENTUyBjbGFzc2VzIGZyb20gcHJldmlvdXMgbWFya2VyXHJcbiAgICAgICAgICAgIGlmIChhcHBsaWVkTWFya2VyQ3NzQ2xhc3Nlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3MoYXBwbGllZE1hcmtlckNzc0NsYXNzZXMuam9pbignICcpKTtcclxuICAgICAgICAgICAgICAgIGFwcGxpZWRNYXJrZXJDc3NDbGFzc2VzID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQWRkIENTUyBjbGFzc2VzIG9mIGN1cnJlbnQgbWFya2VyXHJcbiAgICAgICAgICAgIGlmIChhcmdzLm1hcmtlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSAoYXJncy5tYXJrZXIubWFya2VyLmNzc0NsYXNzZXMgfHwgW10pLm1hcChmdW5jdGlvbiAoY3NzQ2xhc3MpIHsgcmV0dXJuIF90aGlzLnByZWZpeENzcyhjc3NDbGFzcyk7IH0pO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKGNzc0NsYXNzZXMuam9pbignICcpKTtcclxuICAgICAgICAgICAgICAgIGFwcGxpZWRNYXJrZXJDc3NDbGFzc2VzID0gY3NzQ2xhc3NlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFNldCB0aW1lIGZvcm1hdCBkZXBlbmRpbmcgb24gc291cmNlIGR1cmF0aW9uXHJcbiAgICAgICAgICAgIF90aGlzLnRpbWVGb3JtYXQgPSBNYXRoLmFicyhwbGF5ZXIuaXNMaXZlKCkgPyBwbGF5ZXIuZ2V0TWF4VGltZVNoaWZ0KCkgOiBwbGF5ZXIuZ2V0RHVyYXRpb24oKSkgPj0gMzYwMCA/XHJcbiAgICAgICAgICAgICAgICBzdHJpbmd1dGlsc18xLlN0cmluZ1V0aWxzLkZPUk1BVF9ISE1NU1MgOiBzdHJpbmd1dGlsc18xLlN0cmluZ1V0aWxzLkZPUk1BVF9NTVNTO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUkVBRFksIGluaXQpO1xyXG4gICAgICAgIGluaXQoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgYXJiaXRyYXJ5IHRleHQgb24gdGhlIGxhYmVsLlxyXG4gICAgICogQHBhcmFtIHRleHQgdGhlIHRleHQgdG8gc2hvdyBvbiB0aGUgbGFiZWxcclxuICAgICAqL1xyXG4gICAgU2Vla0JhckxhYmVsLnByb3RvdHlwZS5zZXRUZXh0ID0gZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICB0aGlzLnRpbWVMYWJlbC5zZXRUZXh0KHRleHQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBhIHRpbWUgdG8gYmUgZGlzcGxheWVkIG9uIHRoZSBsYWJlbC5cclxuICAgICAqIEBwYXJhbSBzZWNvbmRzIHRoZSB0aW1lIGluIHNlY29uZHMgdG8gZGlzcGxheSBvbiB0aGUgbGFiZWxcclxuICAgICAqL1xyXG4gICAgU2Vla0JhckxhYmVsLnByb3RvdHlwZS5zZXRUaW1lID0gZnVuY3Rpb24gKHNlY29uZHMpIHtcclxuICAgICAgICB0aGlzLnNldFRleHQoc3RyaW5ndXRpbHNfMS5TdHJpbmdVdGlscy5zZWNvbmRzVG9UaW1lKHNlY29uZHMsIHRoaXMudGltZUZvcm1hdCkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdGV4dCBvbiB0aGUgdGl0bGUgbGFiZWwuXHJcbiAgICAgKiBAcGFyYW0gdGV4dCB0aGUgdGV4dCB0byBzaG93IG9uIHRoZSBsYWJlbFxyXG4gICAgICovXHJcbiAgICBTZWVrQmFyTGFiZWwucHJvdG90eXBlLnNldFRpdGxlVGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLnNldFRleHQodGV4dCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIG9yIHJlbW92ZXMgYSB0aHVtYm5haWwgb24gdGhlIGxhYmVsLlxyXG4gICAgICogQHBhcmFtIHRodW1ibmFpbCB0aGUgdGh1bWJuYWlsIHRvIGRpc3BsYXkgb24gdGhlIGxhYmVsIG9yIG51bGwgdG8gcmVtb3ZlIGEgZGlzcGxheWVkIHRodW1ibmFpbFxyXG4gICAgICovXHJcbiAgICBTZWVrQmFyTGFiZWwucHJvdG90eXBlLnNldFRodW1ibmFpbCA9IGZ1bmN0aW9uICh0aHVtYm5haWwpIHtcclxuICAgICAgICBpZiAodGh1bWJuYWlsID09PSB2b2lkIDApIHsgdGh1bWJuYWlsID0gbnVsbDsgfVxyXG4gICAgICAgIHZhciB0aHVtYm5haWxFbGVtZW50ID0gdGhpcy50aHVtYm5haWwuZ2V0RG9tRWxlbWVudCgpO1xyXG4gICAgICAgIGlmICh0aHVtYm5haWwgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHVtYm5haWxFbGVtZW50LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1pbWFnZSc6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAnZGlzcGxheSc6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6IG51bGwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSB0aHVtYm5haWwgaW1hZ2UgbG9hZGVyIHRvIG1ha2Ugc3VyZSB0aGUgdGh1bWJuYWlsIGlzIGxvYWRlZCBhbmQgaXQncyBzaXplIGlzIGtub3duIGJlZm9yZSBiZSBjYW5cclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBDU1MgcHJvcGVydGllcyBhbmQgc2V0IHRoZW0gb24gdGhlIGVsZW1lbnQuXHJcbiAgICAgICAgICAgIHRoaXMudGh1bWJuYWlsSW1hZ2VMb2FkZXIubG9hZCh0aHVtYm5haWwudXJsLCBmdW5jdGlvbiAodXJsLCB3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsQ291bnRYID0gd2lkdGggLyB0aHVtYm5haWwudztcclxuICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxDb3VudFkgPSBoZWlnaHQgLyB0aHVtYm5haWwuaDtcclxuICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxJbmRleFggPSB0aHVtYm5haWwueCAvIHRodW1ibmFpbC53O1xyXG4gICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbEluZGV4WSA9IHRodW1ibmFpbC55IC8gdGh1bWJuYWlsLmg7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZVggPSAxMDAgKiB0aHVtYm5haWxDb3VudFg7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZVkgPSAxMDAgKiB0aHVtYm5haWxDb3VudFk7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WCA9IDEwMCAqIHRodW1ibmFpbEluZGV4WDtcclxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXRZID0gMTAwICogdGh1bWJuYWlsSW5kZXhZO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFzcGVjdFJhdGlvID0gMSAvIHRodW1ibmFpbC53ICogdGh1bWJuYWlsLmg7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgdGh1bWJuYWlsIHNpemUgaXMgc2V0IGJ5IHNldHRpbmcgdGhlIENTUyAnd2lkdGgnIGFuZCAncGFkZGluZy1ib3R0b20nIHByb3BlcnRpZXMuICdwYWRkaW5nLWJvdHRvbScgaXNcclxuICAgICAgICAgICAgICAgIC8vIHVzZWQgYmVjYXVzZSBpdCBpcyByZWxhdGl2ZSB0byB0aGUgd2lkdGggYW5kIGNhbiBiZSB1c2VkIHRvIHNldCB0aGUgYXNwZWN0IHJhdGlvIG9mIHRoZSB0aHVtYm5haWwuXHJcbiAgICAgICAgICAgICAgICAvLyBBIGRlZmF1bHQgdmFsdWUgZm9yIHdpZHRoIGlzIHNldCBpbiB0aGUgc3R5bGVzaGVldCBhbmQgY2FuIGJlIG92ZXJ3cml0dGVuIGZyb20gdGhlcmUgb3IgYW55d2hlcmUgZWxzZS5cclxuICAgICAgICAgICAgICAgIHRodW1ibmFpbEVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdpbmhlcml0JyxcclxuICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1pbWFnZSc6IFwidXJsKFwiICsgdGh1bWJuYWlsLnVybCArIFwiKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICdwYWRkaW5nLWJvdHRvbSc6IDEwMCAqIGFzcGVjdFJhdGlvICsgXCIlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtc2l6ZSc6IHNpemVYICsgXCIlIFwiICsgc2l6ZVkgKyBcIiVcIixcclxuICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1wb3NpdGlvbic6IFwiLVwiICsgb2Zmc2V0WCArIFwiJSAtXCIgKyBvZmZzZXRZICsgXCIlXCIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTZWVrQmFyTGFiZWw7XHJcbn0oY29udGFpbmVyXzEuQ29udGFpbmVyKSk7XHJcbmV4cG9ydHMuU2Vla0JhckxhYmVsID0gU2Vla0JhckxhYmVsO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc2Vla2JhcmxhYmVsLnRzXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vc2VsZWN0Ym94XCIpO1xyXG4vKipcclxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBiZXR3ZWVuIGF2YWlsYWJsZSBzdWJ0aXRsZSBhbmQgY2FwdGlvbiB0cmFja3MuXHJcbiAqL1xyXG52YXIgU3VidGl0bGVTZWxlY3RCb3ggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFN1YnRpdGxlU2VsZWN0Qm94LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3VidGl0bGVTZWxlY3RCb3goY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFN1YnRpdGxlU2VsZWN0Qm94LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHZhciBzZWxlY3RDdXJyZW50U3VidGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50U3VidGl0bGUgPSBwbGF5ZXIuZ2V0U3VidGl0bGUoKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRTdWJ0aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0SXRlbShjdXJyZW50U3VidGl0bGUuaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdXBkYXRlU3VidGl0bGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jbGVhckl0ZW1zKCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBwbGF5ZXIuZ2V0QXZhaWxhYmxlU3VidGl0bGVzKCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VidGl0bGUgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hZGRJdGVtKHN1YnRpdGxlLmlkLCBzdWJ0aXRsZS5sYWJlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBjb3JyZWN0IHN1YnRpdGxlIGFmdGVyIHRoZSBzdWJ0aXRsZXMgaGF2ZSBiZWVuIGFkZGVkXHJcbiAgICAgICAgICAgIHNlbGVjdEN1cnJlbnRTdWJ0aXRsZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkl0ZW1TZWxlY3RlZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHNlbmRlciwgdmFsdWUpIHtcclxuICAgICAgICAgICAgcGxheWVyLnNldFN1YnRpdGxlKHZhbHVlID09PSAnbnVsbCcgPyBudWxsIDogdmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFJlYWN0IHRvIEFQSSBldmVudHNcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TVUJUSVRMRV9BRERFRCwgdXBkYXRlU3VidGl0bGVzKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TVUJUSVRMRV9DSEFOR0VELCBzZWxlY3RDdXJyZW50U3VidGl0bGUpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NVQlRJVExFX1JFTU9WRUQsIHVwZGF0ZVN1YnRpdGxlcyk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHN1YnRpdGxlcyB3aGVuIHNvdXJjZSBnb2VzIGF3YXlcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TT1VSQ0VfVU5MT0FERUQsIHVwZGF0ZVN1YnRpdGxlcyk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHN1YnRpdGxlcyB3aGVuIGEgbmV3IHNvdXJjZSBpcyBsb2FkZWRcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgdXBkYXRlU3VidGl0bGVzKTtcclxuICAgICAgICAvLyBVcGRhdGUgc3VidGl0bGVzIHdoZW4gdGhlIHBlcmlvZCB3aXRoaW4gYSBzb3VyY2UgY2hhbmdlc1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BFUklPRF9TV0lUQ0hFRCwgdXBkYXRlU3VidGl0bGVzKTtcclxuICAgICAgICAvLyBQb3B1bGF0ZSBzdWJ0aXRsZXMgYXQgc3RhcnR1cFxyXG4gICAgICAgIHVwZGF0ZVN1YnRpdGxlcygpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdWJ0aXRsZVNlbGVjdEJveDtcclxufShzZWxlY3Rib3hfMS5TZWxlY3RCb3gpKTtcclxuZXhwb3J0cy5TdWJ0aXRsZVNlbGVjdEJveCA9IFN1YnRpdGxlU2VsZWN0Qm94O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVzZWxlY3Rib3gudHNcbi8vIG1vZHVsZSBpZCA9IDUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29udGFpbmVyXzEgPSByZXF1aXJlKFwiLi9jb250YWluZXJcIik7XHJcbnZhciBsYWJlbF8xID0gcmVxdWlyZShcIi4vbGFiZWxcIik7XHJcbnZhciBjb250cm9sYmFyXzEgPSByZXF1aXJlKFwiLi9jb250cm9sYmFyXCIpO1xyXG52YXIgZXZlbnRkaXNwYXRjaGVyXzEgPSByZXF1aXJlKFwiLi4vZXZlbnRkaXNwYXRjaGVyXCIpO1xyXG4vKipcclxuICogT3ZlcmxheXMgdGhlIHBsYXllciB0byBkaXNwbGF5IHN1YnRpdGxlcy5cclxuICovXHJcbnZhciBTdWJ0aXRsZU92ZXJsYXkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFN1YnRpdGxlT3ZlcmxheSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFN1YnRpdGxlT3ZlcmxheShjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMucHJlcHJvY2Vzc0xhYmVsRXZlbnRDYWxsYmFjayA9IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKTtcclxuICAgICAgICBfdGhpcy5wcmV2aWV3U3VidGl0bGVBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBfdGhpcy5wcmV2aWV3U3VidGl0bGUgPSBuZXcgU3VidGl0bGVMYWJlbCh7IHRleHQ6ICdleGFtcGxlIHN1YnRpdGxlJyB9KTtcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1zdWJ0aXRsZS1vdmVybGF5JyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFN1YnRpdGxlT3ZlcmxheS5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgc3VidGl0bGVNYW5hZ2VyID0gbmV3IEFjdGl2ZVN1YnRpdGxlTWFuYWdlcigpO1xyXG4gICAgICAgIHRoaXMuc3VidGl0bGVNYW5hZ2VyID0gc3VidGl0bGVNYW5hZ2VyO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NVRV9FTlRFUiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIFNhbml0aXplIGN1ZSBkYXRhIChtdXN0IGJlIGRvbmUgYmVmb3JlIHRoZSBjdWUgSUQgaXMgZ2VuZXJhdGVkIGluIHN1YnRpdGxlTWFuYWdlci5jdWVFbnRlcilcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21ldGltZXMgdGhlIHBvc2l0aW9ucyBhcmUgdW5kZWZpbmVkLCB3ZSBhc3N1bWUgdGhlbSB0byBiZSB6ZXJvXHJcbiAgICAgICAgICAgICAgICBldmVudC5wb3NpdGlvbi5yb3cgPSBldmVudC5wb3NpdGlvbi5yb3cgfHwgMDtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnBvc2l0aW9uLmNvbHVtbiA9IGV2ZW50LnBvc2l0aW9uLmNvbHVtbiB8fCAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBsYWJlbFRvQWRkID0gc3VidGl0bGVNYW5hZ2VyLmN1ZUVudGVyKGV2ZW50KTtcclxuICAgICAgICAgICAgX3RoaXMucHJlcHJvY2Vzc0xhYmVsRXZlbnRDYWxsYmFjay5kaXNwYXRjaChldmVudCwgbGFiZWxUb0FkZCk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2aWV3U3VidGl0bGVBY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZUNvbXBvbmVudChfdGhpcy5wcmV2aWV3U3VidGl0bGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmFkZENvbXBvbmVudChsYWJlbFRvQWRkKTtcclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlQ29tcG9uZW50cygpO1xyXG4gICAgICAgICAgICBfdGhpcy5zaG93KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ1VFX0VYSVQsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgbGFiZWxUb1JlbW92ZSA9IHN1YnRpdGxlTWFuYWdlci5jdWVFeGl0KGV2ZW50KTtcclxuICAgICAgICAgICAgaWYgKGxhYmVsVG9SZW1vdmUpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZUNvbXBvbmVudChsYWJlbFRvUmVtb3ZlKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZUNvbXBvbmVudHMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXN1YnRpdGxlTWFuYWdlci5oYXNDdWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnByZXZpZXdTdWJ0aXRsZUFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZENvbXBvbmVudChfdGhpcy5wcmV2aWV3U3VidGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZUNvbXBvbmVudHMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBzdWJ0aXRsZUNsZWFySGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICBzdWJ0aXRsZU1hbmFnZXIuY2xlYXIoKTtcclxuICAgICAgICAgICAgX3RoaXMucmVtb3ZlQ29tcG9uZW50cygpO1xyXG4gICAgICAgICAgICBfdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9BVURJT19DSEFOR0VELCBzdWJ0aXRsZUNsZWFySGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU1VCVElUTEVfQ0hBTkdFRCwgc3VidGl0bGVDbGVhckhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NFRUssIHN1YnRpdGxlQ2xlYXJIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9USU1FX1NISUZULCBzdWJ0aXRsZUNsZWFySGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWUJBQ0tfRklOSVNIRUQsIHN1YnRpdGxlQ2xlYXJIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TT1VSQ0VfVU5MT0FERUQsIHN1YnRpdGxlQ2xlYXJIYW5kbGVyKTtcclxuICAgICAgICB1aW1hbmFnZXIub25Db21wb25lbnRTaG93LnN1YnNjcmliZShmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgaW5zdGFuY2VvZiBjb250cm9sYmFyXzEuQ29udHJvbEJhcikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKF90aGlzLnByZWZpeENzcyhTdWJ0aXRsZU92ZXJsYXkuQ0xBU1NfQ09OVFJPTEJBUl9WSVNJQkxFKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB1aW1hbmFnZXIub25Db21wb25lbnRIaWRlLnN1YnNjcmliZShmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgaW5zdGFuY2VvZiBjb250cm9sYmFyXzEuQ29udHJvbEJhcikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcyhTdWJ0aXRsZU92ZXJsYXkuQ0xBU1NfQ09OVFJPTEJBUl9WSVNJQkxFKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbmZpZ3VyZUNlYTYwOENhcHRpb25zKHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICAvLyBJbml0XHJcbiAgICAgICAgc3VidGl0bGVDbGVhckhhbmRsZXIoKTtcclxuICAgIH07XHJcbiAgICBTdWJ0aXRsZU92ZXJsYXkucHJvdG90eXBlLmNvbmZpZ3VyZUNlYTYwOENhcHRpb25zID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBUaGUgY2FsY3VsYXRlZCBmb250IHNpemVcclxuICAgICAgICB2YXIgZm9udFNpemUgPSAwO1xyXG4gICAgICAgIC8vIFRoZSByZXF1aXJlZCBsZXR0ZXIgc3BhY2luZyBzcHJlYWQgdGhlIHRleHQgY2hhcmFjdGVycyBldmVubHkgYWNyb3NzIHRoZSBncmlkXHJcbiAgICAgICAgdmFyIGZvbnRMZXR0ZXJTcGFjaW5nID0gMDtcclxuICAgICAgICAvLyBGbGFnIHRlbGxpbmcgaWYgYSBmb250IHNpemUgY2FsY3VsYXRpb24gaXMgcmVxdWlyZWQgb2YgaWYgdGhlIGN1cnJlbnQgdmFsdWVzIGFyZSB2YWxpZFxyXG4gICAgICAgIHZhciBmb250U2l6ZUNhbGN1bGF0aW9uUmVxdWlyZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIEZsYWcgdGVsbGluZyBpZiB0aGUgQ0VBLTYwOCBtb2RlIGlzIGVuYWJsZWRcclxuICAgICAgICB2YXIgZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciB1cGRhdGVDRUE2MDhGb250U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGR1bW15TGFiZWwgPSBuZXcgU3VidGl0bGVMYWJlbCh7IHRleHQ6ICdYJyB9KTtcclxuICAgICAgICAgICAgZHVtbXlMYWJlbC5nZXREb21FbGVtZW50KCkuY3NzKHtcclxuICAgICAgICAgICAgICAgIC8vIEJ5IHVzaW5nIGEgbGFyZ2UgZm9udCBzaXplIHdlIGRvIG5vdCBuZWVkIHRvIHVzZSBtdWx0aXBsZSBsZXR0ZXJzIGFuZCBjYW4gZ2V0IHN0aWxsIGFuXHJcbiAgICAgICAgICAgICAgICAvLyBhY2N1cmF0ZSBtZWFzdXJlbWVudCBldmVuIHRob3VnaCB0aGUgcmV0dXJuZWQgc2l6ZSBpcyBhbiBpbnRlZ2VyIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAnZm9udC1zaXplJzogJzIwMHB4JyxcclxuICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCc6ICcyMDBweCcsXHJcbiAgICAgICAgICAgICAgICAndmlzaWJpbGl0eSc6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3RoaXMuYWRkQ29tcG9uZW50KGR1bW15TGFiZWwpO1xyXG4gICAgICAgICAgICBfdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XHJcbiAgICAgICAgICAgIF90aGlzLnNob3coKTtcclxuICAgICAgICAgICAgdmFyIGR1bW15TGFiZWxDaGFyV2lkdGggPSBkdW1teUxhYmVsLmdldERvbUVsZW1lbnQoKS53aWR0aCgpO1xyXG4gICAgICAgICAgICB2YXIgZHVtbXlMYWJlbENoYXJIZWlnaHQgPSBkdW1teUxhYmVsLmdldERvbUVsZW1lbnQoKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgdmFyIGZvbnRTaXplUmF0aW8gPSBkdW1teUxhYmVsQ2hhcldpZHRoIC8gZHVtbXlMYWJlbENoYXJIZWlnaHQ7XHJcbiAgICAgICAgICAgIF90aGlzLnJlbW92ZUNvbXBvbmVudChkdW1teUxhYmVsKTtcclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlQ29tcG9uZW50cygpO1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLnN1YnRpdGxlTWFuYWdlci5oYXNDdWVzKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gV2Ugc3VidHJhY3QgMXB4IGhlcmUgdG8gYXZvaWQgbGluZSBicmVha3MgYXQgdGhlIHJpZ2h0IGJvcmRlciBvZiB0aGUgc3VidGl0bGUgb3ZlcmxheSB0aGF0IGNhbiBoYXBwZW5cclxuICAgICAgICAgICAgLy8gd2hlbiB0ZXh0cyBjb250YWluIHdoaXRlc3BhY2VzLiBJdCdzIHByb2JhYmx5IHNvbWUga2luZCBvZiBwaXhlbCByb3VuZGluZyBpc3N1ZSBpbiB0aGUgYnJvd3NlcidzXHJcbiAgICAgICAgICAgIC8vIGxheW91dGluZywgYnV0IHRoZSBhY3R1YWwgcmVhc29uIGNvdWxkIG5vdCBiZSBkZXRlcm1pbmVkLiBBaW1pbmcgZm9yIGEgdGFyZ2V0IHdpZHRoIC0gMXB4IHdvdWxkIHdvcmsgaW5cclxuICAgICAgICAgICAgLy8gbW9zdCBicm93c2VycywgYnV0IFNhZmFyaSBoYXMgYSBcInF1YW50aXplZFwiIGZvbnQgc2l6ZSByZW5kZXJpbmcgd2l0aCBodWdlIHN0ZXBzIGluIGJldHdlZW4gc28gd2UgbmVlZFxyXG4gICAgICAgICAgICAvLyB0byBzdWJ0cmFjdCBzb21lIG1vcmUgcGl4ZWxzIHRvIGF2b2lkIGxpbmUgYnJlYWtzIHRoZXJlIGFzIHdlbGwuXHJcbiAgICAgICAgICAgIHZhciBzdWJ0aXRsZU92ZXJsYXlXaWR0aCA9IF90aGlzLmdldERvbUVsZW1lbnQoKS53aWR0aCgpIC0gMTA7XHJcbiAgICAgICAgICAgIHZhciBzdWJ0aXRsZU92ZXJsYXlIZWlnaHQgPSBfdGhpcy5nZXREb21FbGVtZW50KCkuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIC8vIFRoZSBzaXplIHJhdGlvIG9mIHRoZSBsZXR0ZXIgZ3JpZFxyXG4gICAgICAgICAgICB2YXIgZm9udEdyaWRTaXplUmF0aW8gPSAoZHVtbXlMYWJlbENoYXJXaWR0aCAqIFN1YnRpdGxlT3ZlcmxheS5DRUE2MDhfTlVNX0NPTFVNTlMpIC9cclxuICAgICAgICAgICAgICAgIChkdW1teUxhYmVsQ2hhckhlaWdodCAqIFN1YnRpdGxlT3ZlcmxheS5DRUE2MDhfTlVNX1JPV1MpO1xyXG4gICAgICAgICAgICAvLyBUaGUgc2l6ZSByYXRpbyBvZiB0aGUgYXZhaWxhYmxlIHNwYWNlIGZvciB0aGUgZ3JpZFxyXG4gICAgICAgICAgICB2YXIgc3VidGl0bGVPdmVybGF5U2l6ZVJhdGlvID0gc3VidGl0bGVPdmVybGF5V2lkdGggLyBzdWJ0aXRsZU92ZXJsYXlIZWlnaHQ7XHJcbiAgICAgICAgICAgIGlmIChzdWJ0aXRsZU92ZXJsYXlTaXplUmF0aW8gPiBmb250R3JpZFNpemVSYXRpbykge1xyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYXZhaWxhYmxlIHNwYWNlIGlzIHdpZGVyIHRoYW4gdGhlIHRleHQgZ3JpZCwgdGhlIGZvbnQgc2l6ZSBpcyBzaW1wbHlcclxuICAgICAgICAgICAgICAgIC8vIGRldGVybWluZWQgYnkgdGhlIGhlaWdodCBvZiB0aGUgYXZhaWxhYmxlIHNwYWNlLlxyXG4gICAgICAgICAgICAgICAgZm9udFNpemUgPSBzdWJ0aXRsZU92ZXJsYXlIZWlnaHQgLyBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X05VTV9ST1dTO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBhZGRpdGlvbmFsIGxldHRlciBzcGFjaW5nIHJlcXVpcmVkIHRvIGV2ZW5seSBzcHJlYWQgdGhlIHRleHQgYWNyb3NzIHRoZSBncmlkJ3Mgd2lkdGhcclxuICAgICAgICAgICAgICAgIHZhciBncmlkU2xvdFdpZHRoID0gc3VidGl0bGVPdmVybGF5V2lkdGggLyBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X05VTV9DT0xVTU5TO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZvbnRDaGFyV2lkdGggPSBmb250U2l6ZSAqIGZvbnRTaXplUmF0aW87XHJcbiAgICAgICAgICAgICAgICBmb250TGV0dGVyU3BhY2luZyA9IGdyaWRTbG90V2lkdGggLSBmb250Q2hhcldpZHRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYXZhaWxhYmxlIHNwYWNlIGlzIG5vdCB3aWRlIGVub3VnaCwgdGV4dHMgd291bGQgdmVydGljYWxseSBvdmVybGFwIGlmIHdlIHRha2VcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBoZWlnaHQgYXMgYSBiYXNlIGZvciB0aGUgZm9udCBzaXplLCBzbyB3ZSBuZWVkIHRvIGxpbWl0IHRoZSBoZWlnaHQuIFdlIGRvIHRoYXRcclxuICAgICAgICAgICAgICAgIC8vIGJ5IGRldGVybWluaW5nIHRoZSBmb250IHNpemUgYnkgdGhlIHdpZHRoIG9mIHRoZSBhdmFpbGFibGUgc3BhY2UuXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZSA9IHN1YnRpdGxlT3ZlcmxheVdpZHRoIC8gU3VidGl0bGVPdmVybGF5LkNFQTYwOF9OVU1fQ09MVU1OUyAvIGZvbnRTaXplUmF0aW87XHJcbiAgICAgICAgICAgICAgICBmb250TGV0dGVyU3BhY2luZyA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVXBkYXRlIGZvbnQtc2l6ZSBvZiBhbGwgYWN0aXZlIHN1YnRpdGxlIGxhYmVsc1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMuZ2V0Q29tcG9uZW50cygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsIGluc3RhbmNlb2YgU3VidGl0bGVMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsLmdldERvbUVsZW1lbnQoKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZm9udC1zaXplJzogZm9udFNpemUgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdsZXR0ZXItc3BhY2luZyc6IGZvbnRMZXR0ZXJTcGFjaW5nICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZRVJfUkVTSVpFLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChlbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVDRUE2MDhGb250U2l6ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9udFNpemVDYWxjdWxhdGlvblJlcXVpcmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucHJlcHJvY2Vzc0xhYmVsRXZlbnRDYWxsYmFjay5zdWJzY3JpYmUoZnVuY3Rpb24gKGV2ZW50LCBsYWJlbCkge1xyXG4gICAgICAgICAgICB2YXIgaXNDRUE2MDggPSBldmVudC5wb3NpdGlvbiAhPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoIWlzQ0VBNjA4KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTa2lwIGFsbCBub24tQ0VBNjA4IGN1ZXNcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKF90aGlzLnByZWZpeENzcyhTdWJ0aXRsZU92ZXJsYXkuQ0xBU1NfQ0VBXzYwOCkpO1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgY29uZGl0aW9uYWxseSB1cGRhdGUgdGhlIGZvbnQgc2l6ZSBieSB0aGlzIGZsYWcgaGVyZSB0byBhdm9pZCB1cGRhdGluZyBldmVyeSB0aW1lIGEgc3VidGl0bGVcclxuICAgICAgICAgICAgICAgIC8vIGlzIGFkZGVkIGludG8gYW4gZW1wdHkgb3ZlcmxheS4gQmVjYXVzZSB3ZSByZXNldCB0aGUgb3ZlcmxheSB3aGVuIGFsbCBzdWJ0aXRsZXMgYXJlIGdvbmUsIHRoaXNcclxuICAgICAgICAgICAgICAgIC8vIHdvdWxkIHRyaWdnZXIgYW4gdW5uZWNlc3NhcnkgdXBkYXRlIGV2ZXJ5IHRpbWUsIGJ1dCBpdCdzIG9ubHkgcmVxdWlyZWQgdW5kZXIgY2VydGFpbiBjb25kaXRpb25zLFxyXG4gICAgICAgICAgICAgICAgLy8gZS5nLiBhZnRlciB0aGUgcGxheWVyIHNpemUgaGFzIGNoYW5nZWQuXHJcbiAgICAgICAgICAgICAgICBpZiAoZm9udFNpemVDYWxjdWxhdGlvblJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ0VBNjA4Rm9udFNpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICBmb250U2l6ZUNhbGN1bGF0aW9uUmVxdWlyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYWJlbC5nZXREb21FbGVtZW50KCkuY3NzKHtcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogZXZlbnQucG9zaXRpb24uY29sdW1uICogU3VidGl0bGVPdmVybGF5LkNFQTYwOF9DT0xVTU5fT0ZGU0VUICsgXCIlXCIsXHJcbiAgICAgICAgICAgICAgICAndG9wJzogZXZlbnQucG9zaXRpb24ucm93ICogU3VidGl0bGVPdmVybGF5LkNFQTYwOF9ST1dfT0ZGU0VUICsgXCIlXCIsXHJcbiAgICAgICAgICAgICAgICAnZm9udC1zaXplJzogZm9udFNpemUgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICAnbGV0dGVyLXNwYWNpbmcnOiBmb250TGV0dGVyU3BhY2luZyArIFwicHhcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5nZXREb21FbGVtZW50KCkucmVtb3ZlQ2xhc3MoX3RoaXMucHJlZml4Q3NzKFN1YnRpdGxlT3ZlcmxheS5DTEFTU19DRUFfNjA4KSk7XHJcbiAgICAgICAgICAgIGVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NVRV9FWElULCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghX3RoaXMuc3VidGl0bGVNYW5hZ2VyLmhhc0N1ZXMpIHtcclxuICAgICAgICAgICAgICAgIC8vIERpc2FibGUgQ0VBLTYwOCBtb2RlIHdoZW4gYWxsIHN1YnRpdGxlcyBhcmUgZ29uZSAodG8gYWxsb3cgY29ycmVjdCBmb3JtYXR0aW5nIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gZGlzcGxheSBvZiBvdGhlciB0eXBlcyBvZiBzdWJ0aXRsZXMsIGUuZy4gdGhlIGZvcm1hdHRpbmcgcHJldmlldyBzdWJ0aXRsZSlcclxuICAgICAgICAgICAgICAgIHJlc2V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TT1VSQ0VfVU5MT0FERUQsIHJlc2V0KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TVUJUSVRMRV9DSEFOR0VELCByZXNldCk7XHJcbiAgICB9O1xyXG4gICAgU3VidGl0bGVPdmVybGF5LnByb3RvdHlwZS5lbmFibGVQcmV2aWV3U3VidGl0bGVMYWJlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnByZXZpZXdTdWJ0aXRsZUFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN1YnRpdGxlTWFuYWdlci5oYXNDdWVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KHRoaXMucHJldmlld1N1YnRpdGxlKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTdWJ0aXRsZU92ZXJsYXkucHJvdG90eXBlLnJlbW92ZVByZXZpZXdTdWJ0aXRsZUxhYmVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucHJldmlld1N1YnRpdGxlQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVDb21wb25lbnQodGhpcy5wcmV2aWV3U3VidGl0bGUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50cygpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdWJ0aXRsZU92ZXJsYXk7XHJcbn0oY29udGFpbmVyXzEuQ29udGFpbmVyKSk7XHJcblN1YnRpdGxlT3ZlcmxheS5DTEFTU19DT05UUk9MQkFSX1ZJU0lCTEUgPSAnY29udHJvbGJhci12aXNpYmxlJztcclxuU3VidGl0bGVPdmVybGF5LkNMQVNTX0NFQV82MDggPSAnY2VhNjA4JztcclxuLy8gVGhlIG51bWJlciBvZiByb3dzIGluIGEgY2VhNjA4IGdyaWRcclxuU3VidGl0bGVPdmVybGF5LkNFQTYwOF9OVU1fUk9XUyA9IDE1O1xyXG4vLyBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gYSBjZWE2MDggZ3JpZFxyXG5TdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X05VTV9DT0xVTU5TID0gMzI7XHJcbi8vIFRoZSBvZmZzZXQgaW4gcGVyY2VudCBmb3Igb25lIHJvdyAod2hpY2ggaXMgYWxzbyB0aGUgaGVpZ2h0IG9mIGEgcm93KVxyXG5TdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X1JPV19PRkZTRVQgPSAxMDAgLyBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X05VTV9ST1dTO1xyXG4vLyBUaGUgb2Zmc2V0IGluIHBlcmNlbnQgZm9yIG9uZSBjb2x1bW4gKHdoaWNoIGlzIGFsc28gdGhlIHdpZHRoIG9mIGEgY29sdW1uKVxyXG5TdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X0NPTFVNTl9PRkZTRVQgPSAxMDAgLyBTdWJ0aXRsZU92ZXJsYXkuQ0VBNjA4X05VTV9DT0xVTU5TO1xyXG5leHBvcnRzLlN1YnRpdGxlT3ZlcmxheSA9IFN1YnRpdGxlT3ZlcmxheTtcclxudmFyIFN1YnRpdGxlTGFiZWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFN1YnRpdGxlTGFiZWwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTdWJ0aXRsZUxhYmVsKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1zdWJ0aXRsZS1sYWJlbCcsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gU3VidGl0bGVMYWJlbDtcclxufShsYWJlbF8xLkxhYmVsKSk7XHJcbnZhciBBY3RpdmVTdWJ0aXRsZU1hbmFnZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQWN0aXZlU3VidGl0bGVNYW5hZ2VyKCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlU3VidGl0bGVDdWVNYXAgPSB7fTtcclxuICAgICAgICB0aGlzLmFjdGl2ZVN1YnRpdGxlQ3VlQ291bnQgPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIGEgdW5pcXVlIElEIGZvciBhIHN1YnRpdGxlIGN1ZSwgd2hpY2ggaXMgbmVlZGVkIHRvIGFzc29jaWF0ZSBhbiBPTl9DVUVfRU5URVIgd2l0aCBpdHMgT05fQ1VFX0VYSVRcclxuICAgICAqIGV2ZW50IHNvIHdlIGNhbiByZW1vdmUgdGhlIGNvcnJlY3Qgc3VidGl0bGUgaW4gT05fQ1VFX0VYSVQgd2hlbiBtdWx0aXBsZSBzdWJ0aXRsZXMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLlxyXG4gICAgICogVGhlIHN0YXJ0IHRpbWUgcGx1cyB0aGUgdGV4dCBzaG91bGQgbWFrZSBhIHVuaXF1ZSBpZGVudGlmaWVyLCBhbmQgaW4gdGhlIG9ubHkgY2FzZSB3aGVyZSBhIGNvbGxpc2lvblxyXG4gICAgICogY2FuIGhhcHBlbiwgdHdvIHNpbWlsYXIgdGV4dHMgd2lsbCBiZSBkaXNwbGF5ZWQgYXQgYSBzaW1pbGFyIHRpbWUgYW5kIGEgc2ltaWxhciBwb3NpdGlvbiAob3Igd2l0aG91dCBwb3NpdGlvbikuXHJcbiAgICAgKiBUaGUgc3RhcnQgdGltZSBzaG91bGQgYWx3YXlzIGJlIGtub3duLCBiZWNhdXNlIGl0IGlzIHJlcXVpcmVkIHRvIHNjaGVkdWxlIHRoZSBPTl9DVUVfRU5URVIgZXZlbnQuIFRoZSBlbmQgdGltZVxyXG4gICAgICogbXVzdCBub3QgbmVjZXNzYXJpbHkgYmUga25vd24gYW5kIHRoZXJlZm9yZSBjYW5ub3QgYmUgdXNlZCBmb3IgdGhlIElELlxyXG4gICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5jYWxjdWxhdGVJZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBpZCA9IGV2ZW50LnN0YXJ0ICsgJy0nICsgZXZlbnQudGV4dDtcclxuICAgICAgICBpZiAoZXZlbnQucG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWQgKz0gJy0nICsgZXZlbnQucG9zaXRpb24ucm93ICsgJy0nICsgZXZlbnQucG9zaXRpb24uY29sdW1uO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgc3VidGl0bGUgY3VlIHRvIHRoZSBtYW5hZ2VyIGFuZCByZXR1cm5zIHRoZSBsYWJlbCB0aGF0IHNob3VsZCBiZSBhZGRlZCB0byB0aGUgc3VidGl0bGUgb3ZlcmxheS5cclxuICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICogQHJldHVybiB7U3VidGl0bGVMYWJlbH1cclxuICAgICAqL1xyXG4gICAgQWN0aXZlU3VidGl0bGVNYW5hZ2VyLnByb3RvdHlwZS5jdWVFbnRlciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBpZCA9IEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5jYWxjdWxhdGVJZChldmVudCk7XHJcbiAgICAgICAgdmFyIGxhYmVsID0gbmV3IFN1YnRpdGxlTGFiZWwoe1xyXG4gICAgICAgICAgICAvLyBQcmVmZXIgdGhlIEhUTUwgc3VidGl0bGUgdGV4dCBpZiBzZXQsIGVsc2UgdXNlIHRoZSBwbGFpbiB0ZXh0XHJcbiAgICAgICAgICAgIHRleHQ6IGV2ZW50Lmh0bWwgfHwgZXZlbnQudGV4dCxcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBDcmVhdGUgYXJyYXkgZm9yIGlkIGlmIGl0IGRvZXMgbm90IGV4aXN0XHJcbiAgICAgICAgdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZU1hcFtpZF0gPSB0aGlzLmFjdGl2ZVN1YnRpdGxlQ3VlTWFwW2lkXSB8fCBbXTtcclxuICAgICAgICAvLyBBZGQgY3VlXHJcbiAgICAgICAgdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZU1hcFtpZF0ucHVzaCh7IGV2ZW50OiBldmVudCwgbGFiZWw6IGxhYmVsIH0pO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlU3VidGl0bGVDdWVDb3VudCsrO1xyXG4gICAgICAgIHJldHVybiBsYWJlbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGxhYmVsIGFzc29jaWF0ZWQgd2l0aCBhbiBhbHJlYWR5IGFkZGVkIGN1ZS5cclxuICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICogQHJldHVybiB7U3VidGl0bGVMYWJlbH1cclxuICAgICAqL1xyXG4gICAgQWN0aXZlU3VidGl0bGVNYW5hZ2VyLnByb3RvdHlwZS5nZXRDdWVzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGlkID0gQWN0aXZlU3VidGl0bGVNYW5hZ2VyLmNhbGN1bGF0ZUlkKGV2ZW50KTtcclxuICAgICAgICB2YXIgYWN0aXZlU3VidGl0bGVDdWVzID0gdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZU1hcFtpZF07XHJcbiAgICAgICAgaWYgKGFjdGl2ZVN1YnRpdGxlQ3VlcyAmJiBhY3RpdmVTdWJ0aXRsZUN1ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYWN0aXZlU3VidGl0bGVDdWVzLm1hcChmdW5jdGlvbiAoY3VlKSB7IHJldHVybiBjdWUubGFiZWw7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgc3VidGl0bGUgY3VlIGZyb20gdGhlIG1hbmFnZXIgYW5kIHJldHVybnMgdGhlIGxhYmVsIHRoYXQgc2hvdWxkIGJlIHJlbW92ZWQgZnJvbSB0aGUgc3VidGl0bGUgb3ZlcmxheSxcclxuICAgICAqIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gYXNzb2NpYXRlZCBsYWJlbCBleGlzdGluZyAoZS5nLiBiZWNhdXNlIGFsbCBsYWJlbHMgaGF2ZSBiZWVuIHtAbGluayAjY2xlYXIgY2xlYXJlZH0uXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAqIEByZXR1cm4ge1N1YnRpdGxlTGFiZWx8bnVsbH1cclxuICAgICAqL1xyXG4gICAgQWN0aXZlU3VidGl0bGVNYW5hZ2VyLnByb3RvdHlwZS5jdWVFeGl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGlkID0gQWN0aXZlU3VidGl0bGVNYW5hZ2VyLmNhbGN1bGF0ZUlkKGV2ZW50KTtcclxuICAgICAgICB2YXIgYWN0aXZlU3VidGl0bGVDdWVzID0gdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZU1hcFtpZF07XHJcbiAgICAgICAgaWYgKGFjdGl2ZVN1YnRpdGxlQ3VlcyAmJiBhY3RpdmVTdWJ0aXRsZUN1ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgY3VlXHJcbiAgICAgICAgICAgIC8qIFdlIGFwcGx5IHRoZSBGSUZPIGFwcHJvYWNoIGhlcmUgYW5kIHJlbW92ZSB0aGUgb2xkZXN0IGN1ZSBmcm9tIHRoZSBhc3NvY2lhdGVkIGlkLiBXaGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBjdWVzXHJcbiAgICAgICAgICAgICAqIHdpdGggdGhlIHNhbWUgaWQsIHRoZXJlIGlzIG5vIHdheSB0byBrbm93IHdoaWNoIG9uZSBvZiB0aGUgY3VlcyBpcyB0byBiZSBkZWxldGVkLCBzbyB3ZSBqdXN0IGhvcGUgdGhhdCBGSUZPXHJcbiAgICAgICAgICAgICAqIHdvcmtzIGZpbmUuIFRoZW9yZXRpY2FsbHkgaXQgY2FuIGhhcHBlbiB0aGF0IHR3byBjdWVzIHdpdGggY29sbGlkaW5nIGlkcyBhcmUgcmVtb3ZlZCBhdCBkaWZmZXJlbnQgdGltZXMsIGluXHJcbiAgICAgICAgICAgICAqIHRoZSB3cm9uZyBvcmRlci4gVGhpcyByYXJlIGNhc2UgaGFzIHlldCB0byBiZSBvYnNlcnZlZC4gSWYgaXQgZXZlciBnZXRzIGFuIGlzc3VlLCB3ZSBjYW4gdGFrZSB0aGUgdW5zdGFibGVcclxuICAgICAgICAgICAgICogY3VlIGVuZCB0aW1lICh3aGljaCBjYW4gY2hhbmdlIGJldHdlZW4gT05fQ1VFX0VOVEVSIGFuZCBPTl9DVUVfRVhJVCBJTiBPTl9DVUVfVVBEQVRFKSBhbmQgdXNlIGl0IGFzIGFuXHJcbiAgICAgICAgICAgICAqIGFkZGl0aW9uYWwgaGludCB0byB0cnkgYW5kIHJlbW92ZSB0aGUgY29ycmVjdCBvbmUgb2YgdGhlIGNvbGxpZGluZyBjdWVzLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdmFyIGFjdGl2ZVN1YnRpdGxlQ3VlID0gYWN0aXZlU3VidGl0bGVDdWVzLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU3VidGl0bGVDdWVDb3VudC0tO1xyXG4gICAgICAgICAgICByZXR1cm4gYWN0aXZlU3VidGl0bGVDdWUubGFiZWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5wcm90b3R5cGUsIFwiY3VlQ291bnRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBhY3RpdmUgc3VidGl0bGUgY3Vlcy5cclxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGV4cGxpY2l0bHkgY291bnQgdGhlIGN1ZXMgdG8gc2F2ZSBhbiBBcnJheS5yZWR1Y2Ugb24gZXZlcnkgY3VlQ291bnQgY2FsbCAod2hpY2ggY2FuIGhhcHBlbiBmcmVxdWVudGx5KVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZUNvdW50O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFjdGl2ZVN1YnRpdGxlTWFuYWdlci5wcm90b3R5cGUsIFwiaGFzQ3Vlc1wiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZXJlIGFyZSBhY3RpdmUgc3VidGl0bGUgY3VlcywgZWxzZSBmYWxzZS5cclxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdWVDb3VudCA+IDA7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYWxsIHN1YnRpdGxlIGN1ZXMgZnJvbSB0aGUgbWFuYWdlci5cclxuICAgICAqL1xyXG4gICAgQWN0aXZlU3VidGl0bGVNYW5hZ2VyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVN1YnRpdGxlQ3VlTWFwID0ge307XHJcbiAgICAgICAgdGhpcy5hY3RpdmVTdWJ0aXRsZUN1ZUNvdW50ID0gMDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQWN0aXZlU3VidGl0bGVNYW5hZ2VyO1xyXG59KCkpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvc3VidGl0bGVvdmVybGF5LnRzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vdG9nZ2xlYnV0dG9uXCIpO1xyXG4vKipcclxuICogQSBidXR0b24gdGhhdCB0b2dnbGVzIGNhc3RpbmcgdG8gYSBDYXN0IHJlY2VpdmVyLlxyXG4gKi9cclxudmFyIENhc3RUb2dnbGVCdXR0b24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENhc3RUb2dnbGVCdXR0b24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDYXN0VG9nZ2xlQnV0dG9uKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1jYXN0dG9nZ2xlYnV0dG9uJyxcclxuICAgICAgICAgICAgdGV4dDogJ0dvb2dsZSBDYXN0JyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENhc3RUb2dnbGVCdXR0b24ucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNDYXN0QXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNDYXN0aW5nKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuY2FzdFN0b3AoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5jYXN0VmlkZW8oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb25zb2xlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Nhc3QgdW5hdmFpbGFibGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBjYXN0QXZhaWxhYmxlSGFuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzQ2FzdEF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfQVZBSUxBQkxFLCBjYXN0QXZhaWxhYmxlSGFuZGVyKTtcclxuICAgICAgICAvLyBUb2dnbGUgYnV0dG9uICdvbicgc3RhdGVcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1dBSVRJTkdfRk9SX0RFVklDRSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfU1RBUlRFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIGEgc2Vzc2lvbiBpcyByZXN1bWVkLCB0aGVyZSBpcyBubyBPTl9DQVNUX1NUQVJUIGV2ZW50LCBzbyB3ZSBhbHNvIG5lZWQgdG8gdG9nZ2xlIGhlcmUgZm9yIHN1Y2ggY2FzZXNcclxuICAgICAgICAgICAgX3RoaXMub24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1NUT1BQRUQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMub2ZmKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gU3RhcnR1cCBpbml0XHJcbiAgICAgICAgY2FzdEF2YWlsYWJsZUhhbmRlcigpOyAvLyBIaWRlIGJ1dHRvbiBpZiBDYXN0IG5vdCBhdmFpbGFibGVcclxuICAgICAgICBpZiAocGxheWVyLmlzQ2FzdGluZygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub24oKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENhc3RUb2dnbGVCdXR0b247XHJcbn0odG9nZ2xlYnV0dG9uXzEuVG9nZ2xlQnV0dG9uKSk7XHJcbmV4cG9ydHMuQ2FzdFRvZ2dsZUJ1dHRvbiA9IENhc3RUb2dnbGVCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jYXN0dG9nZ2xlYnV0dG9uLnRzXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29udGFpbmVyXCIpO1xyXG52YXIgbGFiZWxfMSA9IHJlcXVpcmUoXCIuL2xhYmVsXCIpO1xyXG4vKipcclxuICogT3ZlcmxheXMgdGhlIHBsYXllciBhbmQgZGlzcGxheXMgdGhlIHN0YXR1cyBvZiBhIENhc3Qgc2Vzc2lvbi5cclxuICovXHJcbnZhciBDYXN0U3RhdHVzT3ZlcmxheSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQ2FzdFN0YXR1c092ZXJsYXksIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDYXN0U3RhdHVzT3ZlcmxheShjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc3RhdHVzTGFiZWwgPSBuZXcgbGFiZWxfMS5MYWJlbCh7IGNzc0NsYXNzOiAndWktY2FzdC1zdGF0dXMtbGFiZWwnIH0pO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWNhc3Qtc3RhdHVzLW92ZXJsYXknLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBbX3RoaXMuc3RhdHVzTGFiZWxdLFxyXG4gICAgICAgICAgICBoaWRkZW46IHRydWUsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBDYXN0U3RhdHVzT3ZlcmxheS5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1dBSVRJTkdfRk9SX0RFVklDRSwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNob3coKTtcclxuICAgICAgICAgICAgLy8gR2V0IGRldmljZSBuYW1lIGFuZCB1cGRhdGUgc3RhdHVzIHRleHQgd2hpbGUgY29ubmVjdGluZ1xyXG4gICAgICAgICAgICB2YXIgY2FzdERldmljZU5hbWUgPSBldmVudC5jYXN0UGF5bG9hZC5kZXZpY2VOYW1lO1xyXG4gICAgICAgICAgICBfdGhpcy5zdGF0dXNMYWJlbC5zZXRUZXh0KFwiQ29ubmVjdGluZyB0byA8c3Ryb25nPlwiICsgY2FzdERldmljZU5hbWUgKyBcIjwvc3Ryb25nPi4uLlwiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9DQVNUX1NUQVJURUQsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAvLyBTZXNzaW9uIGlzIHN0YXJ0ZWQgb3IgcmVzdW1lZFxyXG4gICAgICAgICAgICAvLyBGb3IgY2FzZXMgd2hlbiBhIHNlc3Npb24gaXMgcmVzdW1lZCwgd2UgZG8gbm90IHJlY2VpdmUgdGhlIHByZXZpb3VzIGV2ZW50cyBhbmQgdGhlcmVmb3JlIHNob3cgdGhlIHN0YXR1cyBwYW5lbFxyXG4gICAgICAgICAgICAvLyBoZXJlIHRvb1xyXG4gICAgICAgICAgICBfdGhpcy5zaG93KCk7XHJcbiAgICAgICAgICAgIHZhciBjYXN0RGV2aWNlTmFtZSA9IGV2ZW50LmRldmljZU5hbWU7XHJcbiAgICAgICAgICAgIF90aGlzLnN0YXR1c0xhYmVsLnNldFRleHQoXCJQbGF5aW5nIG9uIDxzdHJvbmc+XCIgKyBjYXN0RGV2aWNlTmFtZSArIFwiPC9zdHJvbmc+XCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfU1RPUFBFRCwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIENhc3Qgc2Vzc2lvbiBnb25lLCBoaWRlIHRoZSBzdGF0dXMgcGFuZWxcclxuICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDYXN0U3RhdHVzT3ZlcmxheTtcclxufShjb250YWluZXJfMS5Db250YWluZXIpKTtcclxuZXhwb3J0cy5DYXN0U3RhdHVzT3ZlcmxheSA9IENhc3RTdGF0dXNPdmVybGF5O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvY2FzdHN0YXR1c292ZXJsYXkudHNcbi8vIG1vZHVsZSBpZCA9IDU0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY29udGFpbmVyXzEgPSByZXF1aXJlKFwiLi9jb250YWluZXJcIik7XHJcbnZhciBsYWJlbF8xID0gcmVxdWlyZShcIi4vbGFiZWxcIik7XHJcbnZhciB0dm5vaXNlY2FudmFzXzEgPSByZXF1aXJlKFwiLi90dm5vaXNlY2FudmFzXCIpO1xyXG4vKipcclxuICogT3ZlcmxheXMgdGhlIHBsYXllciBhbmQgZGlzcGxheXMgZXJyb3IgbWVzc2FnZXMuXHJcbiAqL1xyXG52YXIgRXJyb3JNZXNzYWdlT3ZlcmxheSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoRXJyb3JNZXNzYWdlT3ZlcmxheSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEVycm9yTWVzc2FnZU92ZXJsYXkoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmVycm9yTGFiZWwgPSBuZXcgbGFiZWxfMS5MYWJlbCh7IGNzc0NsYXNzOiAndWktZXJyb3JtZXNzYWdlLWxhYmVsJyB9KTtcclxuICAgICAgICBfdGhpcy50dk5vaXNlQmFja2dyb3VuZCA9IG5ldyB0dm5vaXNlY2FudmFzXzEuVHZOb2lzZUNhbnZhcygpO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWVycm9ybWVzc2FnZS1vdmVybGF5JyxcclxuICAgICAgICAgICAgY29tcG9uZW50czogW190aGlzLnR2Tm9pc2VCYWNrZ3JvdW5kLCBfdGhpcy5lcnJvckxhYmVsXSxcclxuICAgICAgICAgICAgaGlkZGVuOiB0cnVlLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRXJyb3JNZXNzYWdlT3ZlcmxheS5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9FUlJPUiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gZXZlbnQubWVzc2FnZTtcclxuICAgICAgICAgICAgLy8gUHJvY2VzcyBtZXNzYWdlIHRyYW5zbGF0aW9uc1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnLm1lc3NhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5tZXNzYWdlcyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRyYW5zbGF0aW9uIGZ1bmN0aW9uIGZvciBhbGwgZXJyb3JzXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGNvbmZpZy5tZXNzYWdlcyhldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb25maWcubWVzc2FnZXNbZXZlbnQuY29kZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIG5vdCBhIHRyYW5zbGF0aW9uIGZ1bmN0aW9uLCBzbyBpdCBtdXN0IGJlIGEgbWFwIG9mIHN0cmluZ3Mgb3IgdHJhbnNsYXRpb24gZnVuY3Rpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1c3RvbU1lc3NhZ2UgPSBjb25maWcubWVzc2FnZXNbZXZlbnQuY29kZV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXN0b21NZXNzYWdlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gY3VzdG9tTWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBtZXNzYWdlIGlzIGEgdHJhbnNsYXRpb24gZnVuY3Rpb24sIHNvIHdlIGNhbGwgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGN1c3RvbU1lc3NhZ2UoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5lcnJvckxhYmVsLnNldFRleHQobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIF90aGlzLnR2Tm9pc2VCYWNrZ3JvdW5kLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIF90aGlzLnNob3coKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TT1VSQ0VfTE9BREVELCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmlzU2hvd24oKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudHZOb2lzZUJhY2tncm91bmQuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRXJyb3JNZXNzYWdlT3ZlcmxheS5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlbGVhc2UuY2FsbCh0aGlzKTtcclxuICAgICAgICAvLyBDYW52YXMgcmVuZGVyaW5nIG11c3QgYmUgZXhwbGljaXRseSBzdG9wcGVkLCBlbHNlIGl0IGp1c3QgY29udGludWVzIGZvcmV2ZXIgYW5kIGhvZ3MgcmVzb3VyY2VzXHJcbiAgICAgICAgdGhpcy50dk5vaXNlQmFja2dyb3VuZC5zdG9wKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEVycm9yTWVzc2FnZU92ZXJsYXk7XHJcbn0oY29udGFpbmVyXzEuQ29udGFpbmVyKSk7XHJcbmV4cG9ydHMuRXJyb3JNZXNzYWdlT3ZlcmxheSA9IEVycm9yTWVzc2FnZU92ZXJsYXk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9lcnJvcm1lc3NhZ2VvdmVybGF5LnRzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29udGFpbmVyXCIpO1xyXG52YXIgbWV0YWRhdGFsYWJlbF8xID0gcmVxdWlyZShcIi4vbWV0YWRhdGFsYWJlbFwiKTtcclxuLyoqXHJcbiAqIERpc3BsYXlzIGEgdGl0bGUgYmFyIGNvbnRhaW5pbmcgYSBsYWJlbCB3aXRoIHRoZSB0aXRsZSBvZiB0aGUgdmlkZW8uXHJcbiAqL1xyXG52YXIgVGl0bGVCYXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFRpdGxlQmFyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVGl0bGVCYXIoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXRpdGxlYmFyJyxcclxuICAgICAgICAgICAgaGlkZGVuOiB0cnVlLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgICAgICAgICBuZXcgbWV0YWRhdGFsYWJlbF8xLk1ldGFkYXRhTGFiZWwoeyBjb250ZW50OiBtZXRhZGF0YWxhYmVsXzEuTWV0YWRhdGFMYWJlbENvbnRlbnQuVGl0bGUgfSksXHJcbiAgICAgICAgICAgICAgICBuZXcgbWV0YWRhdGFsYWJlbF8xLk1ldGFkYXRhTGFiZWwoeyBjb250ZW50OiBtZXRhZGF0YWxhYmVsXzEuTWV0YWRhdGFMYWJlbENvbnRlbnQuRGVzY3JpcHRpb24gfSksXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIGtlZXBIaWRkZW5XaXRob3V0TWV0YWRhdGE6IGZhbHNlLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVGl0bGVCYXIucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XHJcbiAgICAgICAgdmFyIHNob3VsZEJlU2hvd24gPSAhdGhpcy5pc0hpZGRlbigpO1xyXG4gICAgICAgIHZhciBoYXNNZXRhZGF0YVRleHQgPSB0cnVlOyAvLyBGbGFnIHRvIHRyYWNrIGlmIGFueSBtZXRhZGF0YSBsYWJlbCBjb250YWlucyB0ZXh0XHJcbiAgICAgICAgdmFyIGNoZWNrTWV0YWRhdGFUZXh0QW5kVXBkYXRlVmlzaWJpbGl0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaGFzTWV0YWRhdGFUZXh0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBtZXRhZGF0YSBsYWJlbHMgYW5kIGNoZWNrIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGVtIGNvbnRhaW5zIHRleHRcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLmdldENvbXBvbmVudHMoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50IGluc3RhbmNlb2YgbWV0YWRhdGFsYWJlbF8xLk1ldGFkYXRhTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzTWV0YWRhdGFUZXh0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc1Nob3duKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEhpZGUgYSB2aXNpYmxlIHRpdGxlYmFyIGlmIGl0IGRvZXMgbm90IGNvbnRhaW4gYW55IHRleHQgYW5kIHRoZSBoaWRkZW4gZmxhZyBpcyBzZXRcclxuICAgICAgICAgICAgICAgIGlmIChjb25maWcua2VlcEhpZGRlbldpdGhvdXRNZXRhZGF0YSAmJiAhaGFzTWV0YWRhdGFUZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNob3VsZEJlU2hvd24pIHtcclxuICAgICAgICAgICAgICAgIC8vIFNob3cgYSBoaWRkZW4gdGl0bGViYXIgaWYgaXQgc2hvdWxkIGFjdHVhbGx5IGJlIHNob3duXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIExpc3RlbiB0byB0ZXh0IGNoYW5nZSBldmVudHMgdG8gdXBkYXRlIHRoZSBoYXNNZXRhZGF0YVRleHQgZmxhZyB3aGVuIHRoZSBtZXRhZGF0YSBkeW5hbWljYWxseSBjaGFuZ2VzXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZ2V0Q29tcG9uZW50cygpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50IGluc3RhbmNlb2YgbWV0YWRhdGFsYWJlbF8xLk1ldGFkYXRhTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5vblRleHRDaGFuZ2VkLnN1YnNjcmliZShjaGVja01ldGFkYXRhVGV4dEFuZFVwZGF0ZVZpc2liaWxpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzU2hvdy5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzaG91bGRCZVNob3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKCEoY29uZmlnLmtlZXBIaWRkZW5XaXRob3V0TWV0YWRhdGEgJiYgIWhhc01ldGFkYXRhVGV4dCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzSGlkZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzaG91bGRCZVNob3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBpbml0XHJcbiAgICAgICAgY2hlY2tNZXRhZGF0YVRleHRBbmRVcGRhdGVWaXNpYmlsaXR5KCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRpdGxlQmFyO1xyXG59KGNvbnRhaW5lcl8xLkNvbnRhaW5lcikpO1xyXG5leHBvcnRzLlRpdGxlQmFyID0gVGl0bGVCYXI7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy90aXRsZWJhci50c1xuLy8gbW9kdWxlIGlkID0gNTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbnRhaW5lclwiKTtcclxudmFyIGNvbXBvbmVudF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50XCIpO1xyXG52YXIgZG9tXzEgPSByZXF1aXJlKFwiLi4vZG9tXCIpO1xyXG52YXIgc3RyaW5ndXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9zdHJpbmd1dGlsc1wiKTtcclxudmFyIGh1Z2VyZXBsYXlidXR0b25fMSA9IHJlcXVpcmUoXCIuL2h1Z2VyZXBsYXlidXR0b25cIik7XHJcbi8qKlxyXG4gKiBPdmVybGF5cyB0aGUgcGxheWVyIGFuZCBkaXNwbGF5cyByZWNvbW1lbmRlZCB2aWRlb3MuXHJcbiAqL1xyXG52YXIgUmVjb21tZW5kYXRpb25PdmVybGF5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhSZWNvbW1lbmRhdGlvbk92ZXJsYXksIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBSZWNvbW1lbmRhdGlvbk92ZXJsYXkoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnJlcGxheUJ1dHRvbiA9IG5ldyBodWdlcmVwbGF5YnV0dG9uXzEuSHVnZVJlcGxheUJ1dHRvbigpO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXJlY29tbWVuZGF0aW9uLW92ZXJsYXknLFxyXG4gICAgICAgICAgICBoaWRkZW46IHRydWUsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IFtfdGhpcy5yZXBsYXlCdXR0b25dLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUmVjb21tZW5kYXRpb25PdmVybGF5LnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHZhciBjbGVhclJlY29tbWVuZGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLmdldENvbXBvbmVudHMoKS5zbGljZSgpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnQgaW5zdGFuY2VvZiBSZWNvbW1lbmRhdGlvbkl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy51cGRhdGVDb21wb25lbnRzKCk7XHJcbiAgICAgICAgICAgIF90aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyhfdGhpcy5wcmVmaXhDc3MoJ3JlY29tbWVuZGF0aW9ucycpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzZXR1cFJlY29tbWVuZGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2xlYXJSZWNvbW1lbmRhdGlvbnMoKTtcclxuICAgICAgICAgICAgdmFyIHJlY29tbWVuZGF0aW9ucyA9IHVpbWFuYWdlci5nZXRDb25maWcoKS5yZWNvbW1lbmRhdGlvbnM7XHJcbiAgICAgICAgICAgIGlmIChyZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcmVjb21tZW5kYXRpb25zXzEgPSByZWNvbW1lbmRhdGlvbnM7IF9pIDwgcmVjb21tZW5kYXRpb25zXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSByZWNvbW1lbmRhdGlvbnNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkQ29tcG9uZW50KG5ldyBSZWNvbW1lbmRhdGlvbkl0ZW0oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtQ29uZmlnOiBpdGVtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3NDbGFzc2VzOiBbJ3JlY29tbWVuZGF0aW9uLWl0ZW0tJyArIChpbmRleCsrKV0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlQ29tcG9uZW50cygpOyAvLyBjcmVhdGUgY29udGFpbmVyIERPTSBlbGVtZW50c1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0RG9tRWxlbWVudCgpLmFkZENsYXNzKF90aGlzLnByZWZpeENzcygncmVjb21tZW5kYXRpb25zJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBBZGQgcmVjb21tZW5kYXRpb24gd2hlbiBhIHNvdXJjZSBpcyBsb2FkZWRcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9SRUFEWSwgc2V0dXBSZWNvbW1lbmRhdGlvbnMpO1xyXG4gICAgICAgIC8vIFJlbW92ZSByZWNvbW1lbmRhdGlvbnMgYW5kIGhpZGUgb3ZlcmxheSB3aGVuIHNvdXJjZSBpcyB1bmxvYWRlZFxyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NPVVJDRV9VTkxPQURFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjbGVhclJlY29tbWVuZGF0aW9ucygpO1xyXG4gICAgICAgICAgICBfdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gRGlzcGxheSByZWNvbW1lbmRhdGlvbnMgd2hlbiBwbGF5YmFjayBoYXMgZmluaXNoZWRcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QTEFZQkFDS19GSU5JU0hFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBEaXNtaXNzIE9OX1BMQVlCQUNLX0ZJTklTSEVEIGV2ZW50cyBhdCB0aGUgZW5kIG9mIGFkc1xyXG4gICAgICAgICAgICAvLyBUT0RPIHJlbW92ZSB0aGlzIHdvcmthcm91bmQgb25jZSBpc3N1ZSAjMTI3OCBpcyBzb2x2ZWRcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc0FkKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5zaG93KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSGlkZSByZWNvbW1lbmRhdGlvbnMgd2hlbiBwbGF5YmFjayBzdGFydHMsIGUuZy4gYSByZXN0YXJ0XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSW5pdCBvbiBzdGFydHVwXHJcbiAgICAgICAgc2V0dXBSZWNvbW1lbmRhdGlvbnMoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVjb21tZW5kYXRpb25PdmVybGF5O1xyXG59KGNvbnRhaW5lcl8xLkNvbnRhaW5lcikpO1xyXG5leHBvcnRzLlJlY29tbWVuZGF0aW9uT3ZlcmxheSA9IFJlY29tbWVuZGF0aW9uT3ZlcmxheTtcclxuLyoqXHJcbiAqIEFuIGl0ZW0gb2YgdGhlIHtAbGluayBSZWNvbW1lbmRhdGlvbk92ZXJsYXl9LiBVc2VkIG9ubHkgaW50ZXJuYWxseSBpbiB7QGxpbmsgUmVjb21tZW5kYXRpb25PdmVybGF5fS5cclxuICovXHJcbnZhciBSZWNvbW1lbmRhdGlvbkl0ZW0gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFJlY29tbWVuZGF0aW9uSXRlbSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFJlY29tbWVuZGF0aW9uSXRlbShjb25maWcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktcmVjb21tZW5kYXRpb24taXRlbScsXHJcbiAgICAgICAgICAgIGl0ZW1Db25maWc6IG51bGwsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBSZWNvbW1lbmRhdGlvbkl0ZW0ucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5jb25maWcuaXRlbUNvbmZpZzsgLy8gVE9ETyBmaXggZ2VuZXJpY3MgYW5kIGdldCByaWQgb2YgY2FzdFxyXG4gICAgICAgIHZhciBpdGVtRWxlbWVudCA9IG5ldyBkb21fMS5ET00oJ2EnLCB7XHJcbiAgICAgICAgICAgICdpZCc6IHRoaXMuY29uZmlnLmlkLFxyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLmdldENzc0NsYXNzZXMoKSxcclxuICAgICAgICAgICAgJ2hyZWYnOiBjb25maWcudXJsLFxyXG4gICAgICAgIH0pLmNzcyh7ICdiYWNrZ3JvdW5kLWltYWdlJzogXCJ1cmwoXCIgKyBjb25maWcudGh1bWJuYWlsICsgXCIpXCIgfSk7XHJcbiAgICAgICAgdmFyIGJnRWxlbWVudCA9IG5ldyBkb21fMS5ET00oJ2RpdicsIHtcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ2JhY2tncm91bmQnKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBpdGVtRWxlbWVudC5hcHBlbmQoYmdFbGVtZW50KTtcclxuICAgICAgICB2YXIgdGl0bGVFbGVtZW50ID0gbmV3IGRvbV8xLkRPTSgnc3BhbicsIHtcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ3RpdGxlJyksXHJcbiAgICAgICAgfSkuYXBwZW5kKG5ldyBkb21fMS5ET00oJ3NwYW4nLCB7XHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMucHJlZml4Q3NzKCdpbm5lcnRpdGxlJyksXHJcbiAgICAgICAgfSkuaHRtbChjb25maWcudGl0bGUpKTtcclxuICAgICAgICBpdGVtRWxlbWVudC5hcHBlbmQodGl0bGVFbGVtZW50KTtcclxuICAgICAgICB2YXIgdGltZUVsZW1lbnQgPSBuZXcgZG9tXzEuRE9NKCdzcGFuJywge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnZHVyYXRpb24nKSxcclxuICAgICAgICB9KS5hcHBlbmQobmV3IGRvbV8xLkRPTSgnc3BhbicsIHtcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ2lubmVyZHVyYXRpb24nKSxcclxuICAgICAgICB9KS5odG1sKGNvbmZpZy5kdXJhdGlvbiA/IHN0cmluZ3V0aWxzXzEuU3RyaW5nVXRpbHMuc2Vjb25kc1RvVGltZShjb25maWcuZHVyYXRpb24pIDogJycpKTtcclxuICAgICAgICBpdGVtRWxlbWVudC5hcHBlbmQodGltZUVsZW1lbnQpO1xyXG4gICAgICAgIHJldHVybiBpdGVtRWxlbWVudDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVjb21tZW5kYXRpb25JdGVtO1xyXG59KGNvbXBvbmVudF8xLkNvbXBvbmVudCkpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvcmVjb21tZW5kYXRpb25vdmVybGF5LnRzXG4vLyBtb2R1bGUgaWQgPSA1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGJ1dHRvbl8xID0gcmVxdWlyZShcIi4vYnV0dG9uXCIpO1xyXG52YXIgZG9tXzEgPSByZXF1aXJlKFwiLi4vZG9tXCIpO1xyXG4vKipcclxuICogQSBidXR0b24gdG8gcGxheS9yZXBsYXkgYSB2aWRlby5cclxuICovXHJcbnZhciBIdWdlUmVwbGF5QnV0dG9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhIdWdlUmVwbGF5QnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSHVnZVJlcGxheUJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktaHVnZXJlcGxheWJ1dHRvbicsXHJcbiAgICAgICAgICAgIHRleHQ6ICdSZXBsYXknLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgSHVnZVJlcGxheUJ1dHRvbi5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5wbGF5KCd1aScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEh1Z2VSZXBsYXlCdXR0b24ucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYnV0dG9uRWxlbWVudCA9IF9zdXBlci5wcm90b3R5cGUudG9Eb21FbGVtZW50LmNhbGwodGhpcyk7XHJcbiAgICAgICAgLy8gQWRkIGNoaWxkIHRoYXQgY29udGFpbnMgdGhlIHBsYXkgYnV0dG9uIGltYWdlXHJcbiAgICAgICAgLy8gU2V0dGluZyB0aGUgaW1hZ2UgZGlyZWN0bHkgb24gdGhlIGJ1dHRvbiBkb2VzIG5vdCB3b3JrIHRvZ2V0aGVyIHdpdGggc2NhbGluZyBhbmltYXRpb25zLCBiZWNhdXNlIHRoZSBidXR0b25cclxuICAgICAgICAvLyBjYW4gY292ZXIgdGhlIHdob2xlIHZpZGVvIHBsYXllciBhcmUgYW5kIHNjYWxpbmcgd291bGQgZXh0ZW5kIGl0IGJleW9uZC4gQnkgYWRkaW5nIGFuIGlubmVyIGVsZW1lbnQsIGNvbmZpbmVkXHJcbiAgICAgICAgLy8gdG8gdGhlIHNpemUgaWYgdGhlIGltYWdlLCBpdCBjYW4gc2NhbGUgaW5zaWRlIHRoZSBwbGF5ZXIgd2l0aG91dCBvdmVyc2hvb3RpbmcuXHJcbiAgICAgICAgYnV0dG9uRWxlbWVudC5hcHBlbmQobmV3IGRvbV8xLkRPTSgnZGl2Jywge1xyXG4gICAgICAgICAgICAnY2xhc3MnOiB0aGlzLnByZWZpeENzcygnaW1hZ2UnKSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuIGJ1dHRvbkVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEh1Z2VSZXBsYXlCdXR0b247XHJcbn0oYnV0dG9uXzEuQnV0dG9uKSk7XHJcbmV4cG9ydHMuSHVnZVJlcGxheUJ1dHRvbiA9IEh1Z2VSZXBsYXlCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9odWdlcmVwbGF5YnV0dG9uLnRzXG4vLyBtb2R1bGUgaWQgPSA1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vc2VsZWN0Ym94XCIpO1xyXG4vKipcclxuICogQSBzZWxlY3QgYm94IHByb3ZpZGluZyBhIHNlbGVjdGlvbiBvZiBkaWZmZXJlbnQgcGxheWJhY2sgc3BlZWRzLlxyXG4gKi9cclxudmFyIFBsYXliYWNrU3BlZWRTZWxlY3RCb3ggPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFBsYXliYWNrU3BlZWRTZWxlY3RCb3gsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQbGF5YmFja1NwZWVkU2VsZWN0Qm94KGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5kZWZhdWx0UGxheWJhY2tTcGVlZHMgPSBbMC4yNSwgMC41LCAxLCAxLjUsIDJdO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFBsYXliYWNrU3BlZWRTZWxlY3RCb3gucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5hZGREZWZhdWx0SXRlbXMoKTtcclxuICAgICAgICB0aGlzLm9uSXRlbVNlbGVjdGVkLnN1YnNjcmliZShmdW5jdGlvbiAoc2VuZGVyLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBwbGF5ZXIuc2V0UGxheWJhY2tTcGVlZChwYXJzZUZsb2F0KHZhbHVlKSk7XHJcbiAgICAgICAgICAgIF90aGlzLnNlbGVjdEl0ZW0odmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBzZXREZWZhdWx0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwbGF5YmFja1NwZWVkID0gcGxheWVyLmdldFBsYXliYWNrU3BlZWQoKTtcclxuICAgICAgICAgICAgX3RoaXMuc2V0U3BlZWQocGxheWJhY2tTcGVlZCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyB3aGVuIHRoZSBwbGF5ZXIgaGl0cyBvblJlYWR5IGFnYWluLCBhZGp1c3QgdGhlIHBsYXliYWNrIHNwZWVkIHNlbGVjdGlvblxyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1JFQURZLCBzZXREZWZhdWx0VmFsdWUpO1xyXG4gICAgICAgIGlmIChwbGF5ZXIuRVZFTlQuT05fUExBWUJBQ0tfU1BFRURfQ0hBTkdFRCkge1xyXG4gICAgICAgICAgICAvLyBTaW5jZSBwbGF5ZXIgNy44LjBcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWUJBQ0tfU1BFRURfQ0hBTkdFRCwgc2V0RGVmYXVsdFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGxheWJhY2tTcGVlZFNlbGVjdEJveC5wcm90b3R5cGUuc2V0U3BlZWQgPSBmdW5jdGlvbiAoc3BlZWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0SXRlbShTdHJpbmcoc3BlZWQpKSkge1xyXG4gICAgICAgICAgICAvLyBhIHBsYXliYWNrIHNwZWVkIHdhcyBzZXQgd2hpY2ggaXMgbm90IGluIHRoZSBsaXN0LCBhZGQgaXQgdG8gdGhlIGxpc3QgdG8gc2hvdyBpdCB0byB0aGUgdXNlclxyXG4gICAgICAgICAgICB0aGlzLmNsZWFySXRlbXMoKTtcclxuICAgICAgICAgICAgdGhpcy5hZGREZWZhdWx0SXRlbXMoW3NwZWVkXSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0SXRlbShTdHJpbmcoc3BlZWQpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGxheWJhY2tTcGVlZFNlbGVjdEJveC5wcm90b3R5cGUuYWRkRGVmYXVsdEl0ZW1zID0gZnVuY3Rpb24gKGN1c3RvbUl0ZW1zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoY3VzdG9tSXRlbXMgPT09IHZvaWQgMCkgeyBjdXN0b21JdGVtcyA9IFtdOyB9XHJcbiAgICAgICAgdmFyIHNvcnRlZFNwZWVkcyA9IHRoaXMuZGVmYXVsdFBsYXliYWNrU3BlZWRzLmNvbmNhdChjdXN0b21JdGVtcykuc29ydCgpO1xyXG4gICAgICAgIHNvcnRlZFNwZWVkcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hZGRJdGVtKFN0cmluZyhlbGVtZW50KSwgZWxlbWVudCArIFwieFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmFkZEl0ZW0oU3RyaW5nKGVsZW1lbnQpLCAnTm9ybWFsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQbGF5YmFja1NwZWVkU2VsZWN0Qm94LnByb3RvdHlwZS5jbGVhckl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBsYXliYWNrU3BlZWRTZWxlY3RCb3g7XHJcbn0oc2VsZWN0Ym94XzEuU2VsZWN0Qm94KSk7XHJcbmV4cG9ydHMuUGxheWJhY2tTcGVlZFNlbGVjdEJveCA9IFBsYXliYWNrU3BlZWRTZWxlY3RCb3g7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9wbGF5YmFja3NwZWVkc2VsZWN0Ym94LnRzXG4vLyBtb2R1bGUgaWQgPSA1OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29udGFpbmVyXCIpO1xyXG52YXIgY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRcIik7XHJcbnZhciB0aW1lb3V0XzEgPSByZXF1aXJlKFwiLi4vdGltZW91dFwiKTtcclxuLyoqXHJcbiAqIE92ZXJsYXlzIHRoZSBwbGF5ZXIgYW5kIGRpc3BsYXlzIGEgYnVmZmVyaW5nIGluZGljYXRvci5cclxuICovXHJcbnZhciBCdWZmZXJpbmdPdmVybGF5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhCdWZmZXJpbmdPdmVybGF5LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQnVmZmVyaW5nT3ZlcmxheShjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW5kaWNhdG9ycyA9IFtcclxuICAgICAgICAgICAgbmV3IGNvbXBvbmVudF8xLkNvbXBvbmVudCh7IHRhZzogJ2RpdicsIGNzc0NsYXNzOiAndWktYnVmZmVyaW5nLW92ZXJsYXktaW5kaWNhdG9yJyB9KSxcclxuICAgICAgICAgICAgbmV3IGNvbXBvbmVudF8xLkNvbXBvbmVudCh7IHRhZzogJ2RpdicsIGNzc0NsYXNzOiAndWktYnVmZmVyaW5nLW92ZXJsYXktaW5kaWNhdG9yJyB9KSxcclxuICAgICAgICAgICAgbmV3IGNvbXBvbmVudF8xLkNvbXBvbmVudCh7IHRhZzogJ2RpdicsIGNzc0NsYXNzOiAndWktYnVmZmVyaW5nLW92ZXJsYXktaW5kaWNhdG9yJyB9KSxcclxuICAgICAgICBdO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWJ1ZmZlcmluZy1vdmVybGF5JyxcclxuICAgICAgICAgICAgaGlkZGVuOiB0cnVlLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBfdGhpcy5pbmRpY2F0b3JzLFxyXG4gICAgICAgICAgICBzaG93RGVsYXlNczogMTAwMCxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEJ1ZmZlcmluZ092ZXJsYXkucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XHJcbiAgICAgICAgdmFyIG92ZXJsYXlTaG93VGltZW91dCA9IG5ldyB0aW1lb3V0XzEuVGltZW91dChjb25maWcuc2hvd0RlbGF5TXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2hvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBzaG93T3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgb3ZlcmxheVNob3dUaW1lb3V0LnN0YXJ0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgaGlkZU92ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG92ZXJsYXlTaG93VGltZW91dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBfdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TVEFMTF9TVEFSVEVELCBzaG93T3ZlcmxheSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fU1RBTExfRU5ERUQsIGhpZGVPdmVybGF5KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TT1VSQ0VfVU5MT0FERUQsIGhpZGVPdmVybGF5KTtcclxuICAgICAgICAvLyBTaG93IG92ZXJsYXkgaWYgcGxheWVyIGlzIGFscmVhZHkgc3RhbGxlZCBhdCBpbml0XHJcbiAgICAgICAgaWYgKHBsYXllci5pc1N0YWxsZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJ1ZmZlcmluZ092ZXJsYXk7XHJcbn0oY29udGFpbmVyXzEuQ29udGFpbmVyKSk7XHJcbmV4cG9ydHMuQnVmZmVyaW5nT3ZlcmxheSA9IEJ1ZmZlcmluZ092ZXJsYXk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9idWZmZXJpbmdvdmVybGF5LnRzXG4vLyBtb2R1bGUgaWQgPSA2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29udGFpbmVyXCIpO1xyXG52YXIgaHVnZXBsYXliYWNrdG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9odWdlcGxheWJhY2t0b2dnbGVidXR0b25cIik7XHJcbi8qKlxyXG4gKiBPdmVybGF5cyB0aGUgcGxheWVyIGFuZCBkaXNwbGF5cyBlcnJvciBtZXNzYWdlcy5cclxuICovXHJcbnZhciBQbGF5YmFja1RvZ2dsZU92ZXJsYXkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFBsYXliYWNrVG9nZ2xlT3ZlcmxheSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFBsYXliYWNrVG9nZ2xlT3ZlcmxheShjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMucGxheWJhY2tUb2dnbGVCdXR0b24gPSBuZXcgaHVnZXBsYXliYWNrdG9nZ2xlYnV0dG9uXzEuSHVnZVBsYXliYWNrVG9nZ2xlQnV0dG9uKCk7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktcGxheWJhY2t0b2dnbGUtb3ZlcmxheScsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IFtfdGhpcy5wbGF5YmFja1RvZ2dsZUJ1dHRvbl0sXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUGxheWJhY2tUb2dnbGVPdmVybGF5O1xyXG59KGNvbnRhaW5lcl8xLkNvbnRhaW5lcikpO1xyXG5leHBvcnRzLlBsYXliYWNrVG9nZ2xlT3ZlcmxheSA9IFBsYXliYWNrVG9nZ2xlT3ZlcmxheTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3BsYXliYWNrdG9nZ2xlb3ZlcmxheS50c1xuLy8gbW9kdWxlIGlkID0gNjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBwbGF5YmFja3RvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vcGxheWJhY2t0b2dnbGVidXR0b25cIik7XHJcbnZhciBkb21fMSA9IHJlcXVpcmUoXCIuLi9kb21cIik7XHJcbi8qKlxyXG4gKiBBIGJ1dHRvbiB0aGF0IG92ZXJsYXlzIHRoZSB2aWRlbyBhbmQgdG9nZ2xlcyBiZXR3ZWVuIHBsYXliYWNrIGFuZCBwYXVzZS5cclxuICovXHJcbnZhciBIdWdlUGxheWJhY2tUb2dnbGVCdXR0b24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEh1Z2VQbGF5YmFja1RvZ2dsZUJ1dHRvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEh1Z2VQbGF5YmFja1RvZ2dsZUJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktaHVnZXBsYXliYWNrdG9nZ2xlYnV0dG9uJyxcclxuICAgICAgICAgICAgdGV4dDogJ1BsYXkvUGF1c2UnLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgSHVnZVBsYXliYWNrVG9nZ2xlQnV0dG9uLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFVwZGF0ZSBidXR0b24gc3RhdGUgdGhyb3VnaCBBUEkgZXZlbnRzXHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlciwgZmFsc2UpO1xyXG4gICAgICAgIHZhciB0b2dnbGVQbGF5YmFjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc1BsYXlpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnBhdXNlKCd1aScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYXkoJ3VpJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB0b2dnbGVGdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzRnVsbHNjcmVlbigpKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZXhpdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5lbnRlckZ1bGxzY3JlZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGZpcnN0UGxheSA9IHRydWU7XHJcbiAgICAgICAgdmFyIGNsaWNrVGltZSA9IDA7XHJcbiAgICAgICAgdmFyIGRvdWJsZUNsaWNrVGltZSA9IDA7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBZb3VUdWJlLXN0eWxlIHRvZ2dsZSBidXR0b24gaGFuZGxpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZSBnb2FsIGlzIHRvIHByZXZlbnQgYSBzaG9ydCBwYXVzZSBvciBwbGF5YmFjayBpbnRlcnZhbCBiZXR3ZWVuIGEgY2xpY2ssIHRoYXQgdG9nZ2xlcyBwbGF5YmFjaywgYW5kIGFcclxuICAgICAgICAgKiBkb3VibGUgY2xpY2ssIHRoYXQgdG9nZ2xlcyBmdWxsc2NyZWVuLiBJbiB0aGlzIG5haXZlIGFwcHJvYWNoLCB0aGUgZmlyc3QgY2xpY2sgd291bGQgZS5nLiBzdGFydCBwbGF5YmFjayxcclxuICAgICAgICAgKiB0aGUgc2Vjb25kIGNsaWNrIHdvdWxkIGJlIGRldGVjdGVkIGFzIGRvdWJsZSBjbGljayBhbmQgdG9nZ2xlIHRvIGZ1bGxzY3JlZW4sIGFuZCBhcyBzZWNvbmQgbm9ybWFsIGNsaWNrIHN0b3BcclxuICAgICAgICAgKiBwbGF5YmFjaywgd2hpY2ggcmVzdWx0cyBpcyBhIHNob3J0IHBsYXliYWNrIGludGVydmFsIHdpdGggbWF4IGxlbmd0aCBvZiB0aGUgZG91YmxlIGNsaWNrIGRldGVjdGlvblxyXG4gICAgICAgICAqIHBlcmlvZCAodXN1YWxseSA1MDBtcykuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUbyBzb2x2ZSB0aGlzIGlzc3VlLCB3ZSBkZWZlciBoYW5kbGluZyBvZiB0aGUgZmlyc3QgY2xpY2sgZm9yIDIwMG1zLCB3aGljaCBpcyBhbG1vc3QgdW5ub3RpY2VhYmxlIHRvIHRoZSB1c2VyLFxyXG4gICAgICAgICAqIGFuZCBqdXN0IHRvZ2dsZSBwbGF5YmFjayBpZiBubyBzZWNvbmQgY2xpY2sgKGRvdWJsZSBjbGljaykgaGFzIGJlZW4gcmVnaXN0ZXJlZCBkdXJpbmcgdGhpcyBwZXJpb2QuIElmIGEgZG91YmxlXHJcbiAgICAgICAgICogY2xpY2sgaXMgcmVnaXN0ZXJlZCwgd2UganVzdCB0b2dnbGUgdGhlIGZ1bGxzY3JlZW4uIEluIHRoZSBmaXJzdCAyMDBtcywgdW5kZXNpcmVkIHBsYXliYWNrIGNoYW5nZXMgdGh1cyBjYW5ub3RcclxuICAgICAgICAgKiBoYXBwZW4uIElmIGEgZG91YmxlIGNsaWNrIGlzIHJlZ2lzdGVyZWQgd2l0aGluIDUwMG1zLCB3ZSB1bmRvIHRoZSBwbGF5YmFjayBjaGFuZ2UgYW5kIHN3aXRjaCBmdWxsc2NyZWVuIG1vZGUuXHJcbiAgICAgICAgICogSW4gdGhlIGVuZCwgdGhpcyBtZXRob2QgYmFzaWNhbGx5IGludHJvZHVjZXMgYSAyMDBtcyBvYnNlcnZpbmcgaW50ZXJ2YWwgaW4gd2hpY2ggcGxheWJhY2sgY2hhbmdlcyBhcmUgcHJldmVudGVkXHJcbiAgICAgICAgICogaWYgYSBkb3VibGUgY2xpY2sgaGFwcGVucy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gRGlyZWN0bHkgc3RhcnQgcGxheWJhY2sgb24gZmlyc3QgY2xpY2sgb2YgdGhlIGJ1dHRvbi5cclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHJlcXVpcmVkIHdvcmthcm91bmQgZm9yIG1vYmlsZSBicm93c2VycyB3aGVyZSB2aWRlbyBwbGF5YmFjayBuZWVkcyB0byBiZSB0cmlnZ2VyZWQgZGlyZWN0bHlcclxuICAgICAgICAgICAgLy8gYnkgdGhlIHVzZXIuIEEgZGVmZXJyZWQgcGxheWJhY2sgc3RhcnQgdGhyb3VnaCB0aGUgdGltZW91dCBiZWxvdyBpcyBub3QgY29uc2lkZXJlZCBhcyB1c2VyIGFjdGlvbiBhbmRcclxuICAgICAgICAgICAgLy8gdGhlcmVmb3JlIGlnbm9yZWQgYnkgbW9iaWxlIGJyb3dzZXJzLlxyXG4gICAgICAgICAgICBpZiAoZmlyc3RQbGF5KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gc3RhcnQgcGxheWJhY2suIFRoZW4gd2Ugd2FpdCBmb3IgT05fUExBWSBhbmQgb25seSB3aGVuIGl0IGFycml2ZXMsIHdlIGRpc2FibGUgdGhlIGZpcnN0UGxheSBmbGFnLlxyXG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgZGlzYWJsZSB0aGUgZmxhZyBoZXJlLCBvbkNsaWNrIHdhcyB0cmlnZ2VyZWQgcHJvZ3JhbW1hdGljYWxseSBpbnN0ZWFkIG9mIGJ5IGEgdXNlciBpbnRlcmFjdGlvbiwgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBwbGF5YmFjayBpcyBibG9ja2VkIChlLmcuIG9uIG1vYmlsZSBkZXZpY2VzIGR1ZSB0byB0aGUgcHJvZ3JhbW1hdGljIHBsYXkoKSBjYWxsKSwgd2UgbG9vc2UgdGhlIGNoYW5jZSB0b1xyXG4gICAgICAgICAgICAgICAgLy8gZXZlciBzdGFydCBwbGF5YmFjayB0aHJvdWdoIGEgdXNlciBpbnRlcmFjdGlvbiBhZ2FpbiB3aXRoIHRoaXMgYnV0dG9uLlxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlUGxheWJhY2soKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgaWYgKG5vdyAtIGNsaWNrVGltZSA8IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGRvdWJsZSBjbGljayBpbnNpZGUgdGhlIDIwMG1zIGludGVydmFsLCBqdXN0IHRvZ2dsZSBmdWxsc2NyZWVuIG1vZGVcclxuICAgICAgICAgICAgICAgIHRvZ2dsZUZ1bGxzY3JlZW4oKTtcclxuICAgICAgICAgICAgICAgIGRvdWJsZUNsaWNrVGltZSA9IG5vdztcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChub3cgLSBjbGlja1RpbWUgPCA1MDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBkb3VibGUgY2xpY2sgaW5zaWRlIHRoZSA1MDBtcyBpbnRlcnZhbCwgdW5kbyBwbGF5YmFjayB0b2dnbGUgYW5kIHRvZ2dsZSBmdWxsc2NyZWVuIG1vZGVcclxuICAgICAgICAgICAgICAgIHRvZ2dsZUZ1bGxzY3JlZW4oKTtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZVBsYXliYWNrKCk7XHJcbiAgICAgICAgICAgICAgICBkb3VibGVDbGlja1RpbWUgPSBub3c7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2xpY2tUaW1lID0gbm93O1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gZG91YmxlQ2xpY2tUaW1lID4gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm8gZG91YmxlIGNsaWNrIGRldGVjdGVkLCBzbyB3ZSB0b2dnbGUgcGxheWJhY2sgYW5kIHdhaXQgd2hhdCBoYXBwZW5zIG5leHRcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVQbGF5YmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAyMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BMQVksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gUGxheWJhY2sgaGFzIHJlYWxseSBzdGFydGVkLCB3ZSBjYW4gZGlzYWJsZSB0aGUgZmxhZyB0byBzd2l0Y2ggdG8gbm9ybWFsIHRvZ2dsZSBidXR0b24gaGFuZGxpbmdcclxuICAgICAgICAgICAgZmlyc3RQbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fV0FSTklORywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIDUwMDggPT0gUGxheWJhY2sgY291bGQgbm90IGJlIHN0YXJ0ZWRcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09IDUwMDgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHBsYXliYWNrIGNvdWxkIG5vdCBiZSBzdGFydGVkLCByZXNldCB0aGUgZmlyc3QgcGxheSBmbGFnIGFzIHdlIG5lZWQgdGhlIHVzZXIgaW50ZXJhY3Rpb24gdG8gc3RhcnRcclxuICAgICAgICAgICAgICAgIGZpcnN0UGxheSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBIaWRlIGJ1dHRvbiB3aGlsZSBpbml0aWFsaXppbmcgYSBDYXN0IHNlc3Npb25cclxuICAgICAgICB2YXIgY2FzdEluaXRpYWxpemF0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gcGxheWVyLkVWRU5ULk9OX0NBU1RfU1RBUlQpIHtcclxuICAgICAgICAgICAgICAgIC8vIEhpZGUgYnV0dG9uIHdoZW4gc2Vzc2lvbiBpcyBiZWluZyBpbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gU2hvdyBidXR0b24gd2hlbiBzZXNzaW9uIGlzIGVzdGFibGlzaGVkIG9yIGluaXRpYWxpemF0aW9uIHdhcyBhYm9ydGVkXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfU1RBUlQsIGNhc3RJbml0aWFsaXphdGlvbkhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfU1RBUlRFRCwgY2FzdEluaXRpYWxpemF0aW9uSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9TVE9QUEVELCBjYXN0SW5pdGlhbGl6YXRpb25IYW5kbGVyKTtcclxuICAgICAgICB2YXIgc3VwcHJlc3NQbGF5QnV0dG9uVHJhbnNpdGlvbkFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gRGlzYWJsZSB0aGUgY3VycmVudCBhbmltYXRpb25cclxuICAgICAgICAgICAgX3RoaXMuc2V0VHJhbnNpdGlvbkFuaW1hdGlvbnNFbmFibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgLy8gRW5hYmxlIHRoZSB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgZm9yIHRoZSBuZXh0IHN0YXRlIGNoYW5nZVxyXG4gICAgICAgICAgICBfdGhpcy5vblRvZ2dsZS5zdWJzY3JpYmVPbmNlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldFRyYW5zaXRpb25BbmltYXRpb25zRW5hYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBIaWRlIHRoZSBwbGF5IGJ1dHRvbiBhbmltYXRpb24gd2hlbiB0aGUgVUkgaXMgbG9hZGVkIChpdCBzaG91bGQgb25seSBiZSBhbmltYXRlZCBvbiBzdGF0ZSBjaGFuZ2VzKVxyXG4gICAgICAgIHN1cHByZXNzUGxheUJ1dHRvblRyYW5zaXRpb25BbmltYXRpb24oKTtcclxuICAgICAgICB2YXIgaXNBdXRvcGxheUVuYWJsZWQgPSBwbGF5ZXIuZ2V0Q29uZmlnKCkucGxheWJhY2sgJiYgQm9vbGVhbihwbGF5ZXIuZ2V0Q29uZmlnKCkucGxheWJhY2suYXV0b3BsYXkpO1xyXG4gICAgICAgIC8vIFdlIG9ubHkga25vdyBpZiBhbiBhdXRvcGxheSBhdHRlbXB0IGlzIHVwY29taW5nIGlmIHRoZSBwbGF5ZXIgaXMgbm90IHlldCByZWFkeS4gSXQgdGhlIHBsYXllciBpcyBhbHJlYWR5IHJlYWR5LFxyXG4gICAgICAgIC8vIHRoZSBhdHRlbXB0IG1pZ2h0IGJlIHVwY29taW5nIG9yIG1pZ2h0IGhhdmUgYWxyZWFkeSBoYXBwZW5lZCwgYnV0IHdlIGRvbid0IGhhdmUgdG8gaGFuZGxlIHRoYXQgYmVjYXVzZSB3ZSBjYW5cclxuICAgICAgICAvLyBzaW1wbHkgcmVseSBvbiBpc1BsYXlpbmcgYW5kIHRoZSBwbGF5IHN0YXRlIGV2ZW50cy5cclxuICAgICAgICB2YXIgaXNBdXRvcGxheVVwY29taW5nID0gIXBsYXllci5pc1JlYWR5KCkgJiYgaXNBdXRvcGxheUVuYWJsZWQ7XHJcbiAgICAgICAgLy8gSGlkZSB0aGUgcGxheSBidXR0b24gd2hlbiB0aGUgcGxheWVyIGlzIGFscmVhZHkgcGxheWluZyBvciBhdXRvcGxheSBpcyB1cGNvbWluZ1xyXG4gICAgICAgIGlmIChwbGF5ZXIuaXNQbGF5aW5nKCkgfHwgaXNBdXRvcGxheVVwY29taW5nKSB7XHJcbiAgICAgICAgICAgIC8vIEhpZGUgdGhlIHBsYXkgYnV0dG9uIChzd2l0Y2ggdG8gcGxheWluZyBzdGF0ZSlcclxuICAgICAgICAgICAgdGhpcy5vbigpO1xyXG4gICAgICAgICAgICAvLyBEaXNhYmxlIHRoZSBhbmltYXRpb24gb2YgdGhlIHBsYXlpbmcgc3RhdGUgc3dpdGNoXHJcbiAgICAgICAgICAgIHN1cHByZXNzUGxheUJ1dHRvblRyYW5zaXRpb25BbmltYXRpb24oKTtcclxuICAgICAgICAgICAgLy8gU2hvdyB0aGUgcGxheSBidXR0b24gd2l0aG91dCBhbiBhbmltYXRpb24gaWYgYSBwbGF5IGF0dGVtcHQgaXMgYmxvY2tlZFxyXG4gICAgICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9XQVJOSU5HLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5jb2RlID09PSA1MDA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VwcHJlc3NQbGF5QnV0dG9uVHJhbnNpdGlvbkFuaW1hdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSHVnZVBsYXliYWNrVG9nZ2xlQnV0dG9uLnByb3RvdHlwZS50b0RvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJ1dHRvbkVsZW1lbnQgPSBfc3VwZXIucHJvdG90eXBlLnRvRG9tRWxlbWVudC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIC8vIEFkZCBjaGlsZCB0aGF0IGNvbnRhaW5zIHRoZSBwbGF5IGJ1dHRvbiBpbWFnZVxyXG4gICAgICAgIC8vIFNldHRpbmcgdGhlIGltYWdlIGRpcmVjdGx5IG9uIHRoZSBidXR0b24gZG9lcyBub3Qgd29yayB0b2dldGhlciB3aXRoIHNjYWxpbmcgYW5pbWF0aW9ucywgYmVjYXVzZSB0aGUgYnV0dG9uXHJcbiAgICAgICAgLy8gY2FuIGNvdmVyIHRoZSB3aG9sZSB2aWRlbyBwbGF5ZXIgYXJlIGFuZCBzY2FsaW5nIHdvdWxkIGV4dGVuZCBpdCBiZXlvbmQuIEJ5IGFkZGluZyBhbiBpbm5lciBlbGVtZW50LCBjb25maW5lZFxyXG4gICAgICAgIC8vIHRvIHRoZSBzaXplIGlmIHRoZSBpbWFnZSwgaXQgY2FuIHNjYWxlIGluc2lkZSB0aGUgcGxheWVyIHdpdGhvdXQgb3ZlcnNob290aW5nLlxyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuYXBwZW5kKG5ldyBkb21fMS5ET00oJ2RpdicsIHtcclxuICAgICAgICAgICAgJ2NsYXNzJzogdGhpcy5wcmVmaXhDc3MoJ2ltYWdlJyksXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBidXR0b25FbGVtZW50O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRW5hYmxlcyBvciBkaXNhYmxlcyB0aGUgcGxheSBzdGF0ZSB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgb2YgdGhlIHBsYXkgYnV0dG9uIGltYWdlLiBDYW4gYmUgdXNlZCB0byBzdXBwcmVzc1xyXG4gICAgICogYW5pbWF0aW9ucy5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCB0cnVlIHRvIGVuYWJsZSB0aGUgYW5pbWF0aW9ucyAoZGVmYXVsdCksIGZhbHNlIHRvIGRpc2FibGUgdGhlbVxyXG4gICAgICovXHJcbiAgICBIdWdlUGxheWJhY2tUb2dnbGVCdXR0b24ucHJvdG90eXBlLnNldFRyYW5zaXRpb25BbmltYXRpb25zRW5hYmxlZCA9IGZ1bmN0aW9uIChlbmFibGVkKSB7XHJcbiAgICAgICAgdmFyIG5vVHJhbnNpdGlvbkFuaW1hdGlvbnNDbGFzcyA9IHRoaXMucHJlZml4Q3NzKCduby10cmFuc2l0aW9uLWFuaW1hdGlvbnMnKTtcclxuICAgICAgICBpZiAoZW5hYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5yZW1vdmVDbGFzcyhub1RyYW5zaXRpb25BbmltYXRpb25zQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghdGhpcy5nZXREb21FbGVtZW50KCkuaGFzQ2xhc3Mobm9UcmFuc2l0aW9uQW5pbWF0aW9uc0NsYXNzKSkge1xyXG4gICAgICAgICAgICB0aGlzLmdldERvbUVsZW1lbnQoKS5hZGRDbGFzcyhub1RyYW5zaXRpb25BbmltYXRpb25zQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gSHVnZVBsYXliYWNrVG9nZ2xlQnV0dG9uO1xyXG59KHBsYXliYWNrdG9nZ2xlYnV0dG9uXzEuUGxheWJhY2tUb2dnbGVCdXR0b24pKTtcclxuZXhwb3J0cy5IdWdlUGxheWJhY2tUb2dnbGVCdXR0b24gPSBIdWdlUGxheWJhY2tUb2dnbGVCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9odWdlcGxheWJhY2t0b2dnbGVidXR0b24udHNcbi8vIG1vZHVsZSBpZCA9IDYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9idXR0b25cIik7XHJcbi8qKlxyXG4gKiBBIGJ1dHRvbiB0aGF0IGNsb3NlcyAoaGlkZXMpIGEgY29uZmlndXJlZCBjb21wb25lbnQuXHJcbiAqL1xyXG52YXIgQ2xvc2VCdXR0b24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENsb3NlQnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ2xvc2VCdXR0b24oY29uZmlnKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLWNsb3NlYnV0dG9uJyxcclxuICAgICAgICAgICAgdGV4dDogJ0Nsb3NlJyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENsb3NlQnV0dG9uLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTtcclxuICAgICAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uZmlnLnRhcmdldC5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENsb3NlQnV0dG9uO1xyXG59KGJ1dHRvbl8xLkJ1dHRvbikpO1xyXG5leHBvcnRzLkNsb3NlQnV0dG9uID0gQ2xvc2VCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jbG9zZWJ1dHRvbi50c1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciB0b2dnbGVidXR0b25fMSA9IHJlcXVpcmUoXCIuL3RvZ2dsZWJ1dHRvblwiKTtcclxuLyoqXHJcbiAqIEEgYnV0dG9uIHRoYXQgdG9nZ2xlcyBBcHBsZSBBaXJQbGF5LlxyXG4gKi9cclxudmFyIEFpclBsYXlUb2dnbGVCdXR0b24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEFpclBsYXlUb2dnbGVCdXR0b24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBaXJQbGF5VG9nZ2xlQnV0dG9uKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1haXJwbGF5dG9nZ2xlYnV0dG9uJyxcclxuICAgICAgICAgICAgdGV4dDogJ0FwcGxlIEFpclBsYXknLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQWlyUGxheVRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICBpZiAoIXBsYXllci5pc0FpcnBsYXlBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHBsYXllciBkb2VzIG5vdCBzdXBwb3J0IEFpcnBsYXkgKHBsYXllciA3LjApLCB3ZSBqdXN0IGhpZGUgdGhpcyBjb21wb25lbnQgYW5kIHNraXAgY29uZmlndXJhdGlvblxyXG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uQ2xpY2suc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc0FpcnBsYXlBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnNob3dBaXJwbGF5VGFyZ2V0UGlja2VyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uc29sZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBaXJQbGF5IHVuYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgYWlyUGxheUF2YWlsYWJsZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNBaXJwbGF5QXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQUlSUExBWV9BVkFJTEFCTEUsIGFpclBsYXlBdmFpbGFibGVIYW5kbGVyKTtcclxuICAgICAgICAvLyBTdGFydHVwIGluaXRcclxuICAgICAgICBhaXJQbGF5QXZhaWxhYmxlSGFuZGxlcigpOyAvLyBIaWRlIGJ1dHRvbiBpZiBBaXJQbGF5IGlzIG5vdCBhdmFpbGFibGVcclxuICAgIH07XHJcbiAgICByZXR1cm4gQWlyUGxheVRvZ2dsZUJ1dHRvbjtcclxufSh0b2dnbGVidXR0b25fMS5Ub2dnbGVCdXR0b24pKTtcclxuZXhwb3J0cy5BaXJQbGF5VG9nZ2xlQnV0dG9uID0gQWlyUGxheVRvZ2dsZUJ1dHRvbjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2FpcnBsYXl0b2dnbGVidXR0b24udHNcbi8vIG1vZHVsZSBpZCA9IDY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi90b2dnbGVidXR0b25cIik7XHJcbi8qKlxyXG4gKiBBIGJ1dHRvbiB0aGF0IHRvZ2dsZXMgQXBwbGUgbWFjT1MgcGljdHVyZS1pbi1waWN0dXJlIG1vZGUuXHJcbiAqL1xyXG52YXIgUGljdHVyZUluUGljdHVyZVRvZ2dsZUJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUGljdHVyZUluUGljdHVyZVRvZ2dsZUJ1dHRvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFBpY3R1cmVJblBpY3R1cmVUb2dnbGVCdXR0b24oY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICBjc3NDbGFzczogJ3VpLXBpcHRvZ2dsZWJ1dHRvbicsXHJcbiAgICAgICAgICAgIHRleHQ6ICdQaWN0dXJlLWluLVBpY3R1cmUnLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUGljdHVyZUluUGljdHVyZVRvZ2dsZUJ1dHRvbi5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICBpZiAoIXBsYXllci5pc1BpY3R1cmVJblBpY3R1cmVBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHBsYXllciBkb2VzIG5vdCBzdXBwb3J0IFBJUCAocGxheWVyIDcuMCksIHdlIGp1c3QgaGlkZSB0aGlzIGNvbXBvbmVudCBhbmQgc2tpcCBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25DbGljay5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzUGljdHVyZUluUGljdHVyZUF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmlzUGljdHVyZUluUGljdHVyZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLmV4aXRQaWN0dXJlSW5QaWN0dXJlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZW50ZXJQaWN0dXJlSW5QaWN0dXJlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uc29sZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQSVAgdW5hdmFpbGFibGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBwaXBBdmFpbGFibGVIYW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuaXNQaWN0dXJlSW5QaWN0dXJlQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUkVBRFksIHBpcEF2YWlsYWJsZUhhbmRlcik7XHJcbiAgICAgICAgLy8gVG9nZ2xlIGJ1dHRvbiAnb24nIHN0YXRlXHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUElDVFVSRV9JTl9QSUNUVVJFX0VOVEVSLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUElDVFVSRV9JTl9QSUNUVVJFX0VYSVQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMub2ZmKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gU3RhcnR1cCBpbml0XHJcbiAgICAgICAgcGlwQXZhaWxhYmxlSGFuZGVyKCk7IC8vIEhpZGUgYnV0dG9uIGlmIFBJUCBub3QgYXZhaWxhYmxlXHJcbiAgICAgICAgaWYgKHBsYXllci5pc1BpY3R1cmVJblBpY3R1cmUoKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBQaWN0dXJlSW5QaWN0dXJlVG9nZ2xlQnV0dG9uO1xyXG59KHRvZ2dsZWJ1dHRvbl8xLlRvZ2dsZUJ1dHRvbikpO1xyXG5leHBvcnRzLlBpY3R1cmVJblBpY3R1cmVUb2dnbGVCdXR0b24gPSBQaWN0dXJlSW5QaWN0dXJlVG9nZ2xlQnV0dG9uO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvcGljdHVyZWlucGljdHVyZXRvZ2dsZWJ1dHRvbi50c1xuLy8gbW9kdWxlIGlkID0gNjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKFwiYW5ndWxhclwiKTtcclxudmFyIGJpdGRhc2hfY29udHJvbGxlcl8xID0gcmVxdWlyZShcIi4vYml0ZGFzaC1jb250cm9sbGVyXCIpO1xyXG52YXIgYml0ZGFzaF9kaXJlY3RpdmVfMSA9IHJlcXVpcmUoXCIuL2JpdGRhc2gtZGlyZWN0aXZlXCIpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBhbmd1bGFyLm1vZHVsZSgnbWkuQml0ZGFzaFBsYXllcicsIFtdKVxyXG4gICAgLmNvbnRyb2xsZXIoJ01pQml0ZGFzaENvbnRyb2xsZXInLCBiaXRkYXNoX2NvbnRyb2xsZXJfMS5kZWZhdWx0KVxyXG4gICAgLmRpcmVjdGl2ZSgnbWlCaXRkYXNoUGxheWVyJywgYml0ZGFzaF9kaXJlY3RpdmVfMS5kZWZhdWx0KTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9pbmRleC50c1xuLy8gbW9kdWxlIGlkID0gNjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKFwiYW5ndWxhclwiKTtcclxudmFyIEJpdG1vdmluQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCaXRtb3ZpbkNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgdGhpcy4kbG9nID0gJGxvZztcclxuICAgICAgICB0aGlzLnN0YXRlID0ge307XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSB7fTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcclxuICAgIH1cclxuICAgIEJpdG1vdmluQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy4kc2NvcGUuc3RhdGUgPSB7fTtcclxuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGhpcy4kc2NvcGUuY29uZmlnKSAmJiBhbmd1bGFyLmlzRGVmaW5lZCh0aGlzLiRzY29wZS5jb25maWcua2V5KSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMuJHNjb3BlLmNvbmZpZztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuJGxvZy5lcnJvcihcImJhc2ljIGNvbmZpZyBmb3IgYml0ZGFzaCBwbGF5ZXIgaXMgbWlzc2luZyFcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0aGlzLiRzY29wZS5vcHRpb25zKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLiRzY29wZS5vcHRpb25zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGhpcy4kc2NvcGUud2ViY2FzdCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzV2ViY2FzdCh0aGlzLiRzY29wZS53ZWJjYXN0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQml0bW92aW5Db250cm9sbGVyLnByb3RvdHlwZS5wcm9jZXNzV2ViY2FzdCA9IGZ1bmN0aW9uICh3ZWJjYXN0KSB7XHJcbiAgICAgICAgdmFyIHN0YXRlUHJvcGVydHkgPSB0aGlzLm9wdGlvbnMuZm9yY2VkU3RhdGUgfHwgd2ViY2FzdC5zdGF0ZTtcclxuICAgICAgICBpZiAoc3RhdGVQcm9wZXJ0eSA9PT0gJ29uZGVtYW5kJykge1xyXG4gICAgICAgICAgICB2YXIgbGFuZ3VhZ2VJbmRleF8xID0gMDtcclxuICAgICAgICAgICAgd2ViY2FzdC5sYW5ndWFnZXMuc29tZShmdW5jdGlvbiAobGFuZywgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh3ZWJjYXN0Lmxhbmd1YWdlID09PSBsYW5nLmxhbmd1YWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VJbmRleF8xID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRhdGEgPSB3ZWJjYXN0Lmxhbmd1YWdlc1tsYW5ndWFnZUluZGV4XzFdLm9uZGVtYW5kU3RhdGVEYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kYXRhID0gd2ViY2FzdFtzdGF0ZVByb3BlcnR5ICsgJ1N0YXRlRGF0YSddO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbmZpZy5zb3VyY2UgPSB0aGlzLmdldFBsYXllckNvbmZpZ1NvdXJjZSh3ZWJjYXN0KTtcclxuICAgICAgICB0aGlzLmNvbmZpZy5zdHlsZSA9IHsgdXg6IGZhbHNlIH07XHJcbiAgICB9O1xyXG4gICAgQml0bW92aW5Db250cm9sbGVyLnByb3RvdHlwZS5nZXRQbGF5ZXJDb25maWdTb3VyY2UgPSBmdW5jdGlvbiAod2ViY2FzdCkge1xyXG4gICAgICAgIHJldHVybiB3ZWJjYXN0LnVzZURWUlBsYXliYWNrSW5Qb3N0bGl2ZSAmJiB3ZWJjYXN0LnN0YXRlID09PSAncG9zdGxpdmUnID9cclxuICAgICAgICAgICAgdGhpcy5nZXREVlJQbGF5YmFja1RvUG9zdGxpdmUod2ViY2FzdClcclxuICAgICAgICAgICAgOiB0aGlzLmdldFBsYXllckNvbmZpZ1NvdXJjZUJ5U3RhdGUod2ViY2FzdCk7XHJcbiAgICB9O1xyXG4gICAgQml0bW92aW5Db250cm9sbGVyLnByb3RvdHlwZS5nZXREVlJQbGF5YmFja1RvUG9zdGxpdmUgPSBmdW5jdGlvbiAod2ViY2FzdCkge1xyXG4gICAgICAgIHZhciBobHMgPSB3ZWJjYXN0WydsaXZlU3RhdGVEYXRhJ10ucGxheW91dC5obHNEdnJVcmw7XHJcbiAgICAgICAgdmFyIHRpdGxlID0gd2ViY2FzdC5uYW1lO1xyXG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh3ZWJjYXN0Wydwb3N0bGl2ZVN0YXRlRGF0YSddLnBsYXlvdXQub2Zmc2V0KSkge1xyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQod2ViY2FzdFsncG9zdGxpdmVTdGF0ZURhdGEnXS5wbGF5b3V0Lm9mZnNldCwgMTApO1xyXG4gICAgICAgICAgICBpZiAob2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0UHJlZml4ID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgICAgIHBhcnNlci5ocmVmID0gd2ViY2FzdFsnbGl2ZVN0YXRlRGF0YSddLnBsYXlvdXQuaGxzRHZyVXJsO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0UHJlZml4ID0gKHBhcnNlci5zZWFyY2gpID8gJyYnIDogJz8nO1xyXG4gICAgICAgICAgICAgICAgaGxzICs9IG9mZnNldFByZWZpeCArIFwid293emFkdnJwbGF5bGlzdHN0YXJ0PVwiICsgb2Zmc2V0ICsgXCIwMDBcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBobHM6IGhscywgdGl0bGU6IHRpdGxlIH07XHJcbiAgICB9O1xyXG4gICAgQml0bW92aW5Db250cm9sbGVyLnByb3RvdHlwZS5nZXRQbGF5ZXJDb25maWdTb3VyY2VCeVN0YXRlID0gZnVuY3Rpb24gKHdlYmNhc3QpIHtcclxuICAgICAgICB2YXIgaGxzID0gdGhpcy5zdGF0ZS5kYXRhLnBsYXlvdXQuaGxzVXJsO1xyXG4gICAgICAgIHZhciB0aXRsZSA9IHdlYmNhc3QubmFtZTtcclxuICAgICAgICB2YXIgaGl2ZVNlcnZpY2VVcmwgPSB0aGlzLmdldEhpdmVTZXJ2aWNlVXJsQnlMYW5nKHdlYmNhc3QpO1xyXG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0aGlzLnN0YXRlLmRhdGEucGxheW91dC52aWRlb01hbmFnZXJIbHNVcmwpICYmIHRoaXMuc3RhdGUuZGF0YS5wbGF5b3V0LnZpZGVvTWFuYWdlckhsc1VybCkge1xyXG4gICAgICAgICAgICBobHMgPSB0aGlzLnN0YXRlLmRhdGEucGxheW91dC52aWRlb01hbmFnZXJIbHNVcmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0aGlzLnN0YXRlLmRhdGEucGxheW91dC5vZmZzZXQpKSB7XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBwYXJzZUludCh0aGlzLnN0YXRlLmRhdGEucGxheW91dC5vZmZzZXQsIDEwKTtcclxuICAgICAgICAgICAgaWYgKG9mZnNldCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXRQcmVmaXggPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyc2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgICAgICAgICAgcGFyc2VyLmhyZWYgPSBobHM7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRQcmVmaXggPSAocGFyc2VyLnNlYXJjaCkgPyAnJicgOiAnPyc7XHJcbiAgICAgICAgICAgICAgICBobHMgKz0gb2Zmc2V0UHJlZml4ICsgXCJzdGFydD1cIiArIG9mZnNldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGl2ZVNlcnZpY2VVcmwgPyB7IHRpdGxlOiB0aXRsZSwgaGxzX3RpY2tldDogaGl2ZVNlcnZpY2VVcmwgfSA6IHsgaGxzOiBobHMsIHRpdGxlOiB0aXRsZSB9O1xyXG4gICAgfTtcclxuICAgIEJpdG1vdmluQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0SGl2ZVNlcnZpY2VVcmxCeUxhbmcgPSBmdW5jdGlvbiAod2ViY2FzdCkge1xyXG4gICAgICAgIHZhciBoaXZlU2VydmljZVVybCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHdlYmNhc3QubGFuZ3VhZ2VzICYmIHdlYmNhc3QubGFuZ3VhZ2UpIHtcclxuICAgICAgICAgICAgd2ViY2FzdC5sYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ubGFuZ3VhZ2UgPT09IHdlYmNhc3QubGFuZ3VhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBoaXZlU2VydmljZVVybCA9IGFuZ3VsYXIuY29weShpdGVtLmhpdmVTZXJ2aWNlVXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoaXZlU2VydmljZVVybDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQml0bW92aW5Db250cm9sbGVyO1xyXG59KCkpO1xyXG5CaXRtb3ZpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQml0bW92aW5Db250cm9sbGVyO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2JpdGRhc2gtY29udHJvbGxlci50c1xuLy8gbW9kdWxlIGlkID0gNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKFwiYW5ndWxhclwiKTtcclxudmFyIEJpdGRhc2hEaXJlY3RpdmUgPSBmdW5jdGlvbiAoJHdpbmRvdywgJGxvZykgeyByZXR1cm4gKHtcclxuICAgIGNvbnRyb2xsZXI6ICdNaUJpdGRhc2hDb250cm9sbGVyJyxcclxuICAgIGNvbnRyb2xsZXJBczogJ2JpdGRhc2hWbScsXHJcbiAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICBzY29wZToge1xyXG4gICAgICAgIGNvbmZpZzogJz0nLFxyXG4gICAgICAgIG9wdGlvbnM6ICc9PycsXHJcbiAgICAgICAgd2ViY2FzdDogJz0nLFxyXG4gICAgfSxcclxuICAgIHRlbXBsYXRlOiBcIjxkaXYgaWQ9XFxcIm1pLWJpdGRhc2gtcGxheWVyXFxcIiB3aWR0aD1cXFwiMTAwJVxcXCIgaGVpZ2h0PVxcXCJhdXRvXFxcIj48L2Rpdj5cIixcclxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xyXG4gICAgICAgIHZhciBiaXRtb3ZpblBsYXllcjtcclxuICAgICAgICB2YXIgYml0bW92aW5VSU1hbmFnZXI7XHJcbiAgICAgICAgdmFyIGJpdG1vdmluQ29udHJvbGJhcjtcclxuICAgICAgICB2YXIgY29uZmlnID0gc2NvcGUuY29uZmlnO1xyXG4gICAgICAgIHZhciB3ZWJjYXN0ID0gc2NvcGUud2ViY2FzdDtcclxuICAgICAgICBidWlsZFBsYXllcigpO1xyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkUGxheWVyKCkge1xyXG4gICAgICAgICAgICBiaXRtb3ZpblBsYXllciA9ICR3aW5kb3cud2luZG93LmJpdG1vdmluLnBsYXllcignbWktYml0ZGFzaC1wbGF5ZXInKTtcclxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGJpdG1vdmluUGxheWVyKSAmJiBiaXRtb3ZpblBsYXllci5pc1JlYWR5KCkgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGJpdG1vdmluUGxheWVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIGJpdG1vdmluUGxheWVyID0gJHdpbmRvdy53aW5kb3cuYml0bW92aW4ucGxheWVyKCdtaS1iaXRkYXNoLXBsYXllcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgod2ViY2FzdC5zdGF0ZSA9PT0gJ2xpdmUnKSAmJiBjb25maWcuc291cmNlLmhsc190aWNrZXQpIHtcclxuICAgICAgICAgICAgICAgIC8vIEdldCBhIGhpdmUtZW5hYmxlZCBwbGF5ZXIgdGhyb3VnaCBiaXRkYXNoLmluaXRIaXZlU0ROXHJcbiAgICAgICAgICAgICAgICAkd2luZG93LndpbmRvdy5iaXRtb3Zpbi5pbml0SGl2ZVNETihiaXRtb3ZpblBsYXllciwgeyBkZWJ1Z0xldmVsOiAnb2ZmJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsb2FkUGxheWVyKGNvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEF1ZGlvT25seVBsYXllckNvbmZpZygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdlYmNhc3QudGhlbWUuYXVkaW9Pbmx5RmlsZVVybCA/IHsgYXVkaW9Pbmx5T3ZlcmxheUNvbmZpZzogeyBiYWNrZ3JvdW5kSW1hZ2VVcmw6IHdlYmNhc3QudGhlbWUuYXVkaW9Pbmx5RmlsZVVybCwgaGlkZGVJbmRpY2F0b3I6IHRydWUgfSB9IDoge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRQbGF5ZXIoY29uZikge1xyXG4gICAgICAgICAgICBiaXRtb3ZpblBsYXllci5zZXR1cChjb25mKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYml0bW92aW5VSU1hbmFnZXIgPSAkd2luZG93LndpbmRvdy5iaXRtb3Zpbi5wbGF5ZXJ1aS5VSU1hbmFnZXIuRmFjdG9yeTtcclxuICAgICAgICAgICAgICAgIGlmIChpc0F1ZGlvT25seSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYml0bW92aW5VSU1hbmFnZXIuYnVpbGRBdWRpb09ubHlVSShiaXRtb3ZpblBsYXllciwgZ2V0QXVkaW9Pbmx5UGxheWVyQ29uZmlnKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYml0bW92aW5VSU1hbmFnZXIuYnVpbGRBdWRpb1ZpZGVvVUkoYml0bW92aW5QbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYml0bW92aW5Db250cm9sYmFyID0gZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYml0bW92aW5wbGF5ZXItY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYml0bW92aW5Db250cm9sYmFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYml0bW92aW5Db250cm9sYmFyLnN0eWxlLm1pbldpZHRoID0gJzE3NXB4JztcclxuICAgICAgICAgICAgICAgICAgICBiaXRtb3ZpbkNvbnRyb2xiYXIuc3R5bGUubWluSGVpZ2h0ID0gJzEwMXB4JztcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYml0bW92aW5wbGF5ZXItdmlkZW8tbWktYml0ZGFzaC1wbGF5ZXInKS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgd2ViY2FzdC5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgJGxvZy5sb2coXCJFcnJvcjogXCIgKyByZWFzb24uY29kZSArIFwiIC0gXCIgKyByZWFzb24ubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBpc0F1ZGlvT25seSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdlYmNhc3QubGF5b3V0LmxheW91dCA9PT0gJ2F1ZGlvLW9ubHknO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpWzBdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7IH07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEJpdGRhc2hEaXJlY3RpdmU7XHJcbkJpdGRhc2hEaXJlY3RpdmUuJGluamVjdCA9IFsnJHdpbmRvdycsICckbG9nJ107XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vYml0ZGFzaC1kaXJlY3RpdmUudHNcbi8vIG1vZHVsZSBpZCA9IDY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9J3BsYXllci5kLnRzJyAvPlxyXG52YXIgdWltYW5hZ2VyXzEgPSByZXF1aXJlKFwiLi91aW1hbmFnZXJcIik7XHJcbnZhciBidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvYnV0dG9uXCIpO1xyXG52YXIgY29udHJvbGJhcl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9jb250cm9sYmFyXCIpO1xyXG52YXIgZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9mdWxsc2NyZWVudG9nZ2xlYnV0dG9uXCIpO1xyXG52YXIgaHVnZXBsYXliYWNrdG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2h1Z2VwbGF5YmFja3RvZ2dsZWJ1dHRvblwiKTtcclxudmFyIHBsYXliYWNrdGltZWxhYmVsXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3BsYXliYWNrdGltZWxhYmVsXCIpO1xyXG52YXIgcGxheWJhY2t0b2dnbGVidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvcGxheWJhY2t0b2dnbGVidXR0b25cIik7XHJcbnZhciBzZWVrYmFyXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3NlZWtiYXJcIik7XHJcbnZhciBzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc2VsZWN0Ym94XCIpO1xyXG52YXIgaXRlbXNlbGVjdGlvbmxpc3RfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvaXRlbXNlbGVjdGlvbmxpc3RcIik7XHJcbnZhciBzZXR0aW5nc3BhbmVsXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3NldHRpbmdzcGFuZWxcIik7XHJcbnZhciBzZXR0aW5nc3RvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zZXR0aW5nc3RvZ2dsZWJ1dHRvblwiKTtcclxudmFyIHRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy90b2dnbGVidXR0b25cIik7XHJcbnZhciB2aWRlb3F1YWxpdHlzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdmlkZW9xdWFsaXR5c2VsZWN0Ym94XCIpO1xyXG52YXIgdm9sdW1ldG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3ZvbHVtZXRvZ2dsZWJ1dHRvblwiKTtcclxudmFyIHZydG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3ZydG9nZ2xlYnV0dG9uXCIpO1xyXG52YXIgd2F0ZXJtYXJrXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3dhdGVybWFya1wiKTtcclxudmFyIHVpY29udGFpbmVyXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3VpY29udGFpbmVyXCIpO1xyXG52YXIgY29udGFpbmVyXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2NvbnRhaW5lclwiKTtcclxudmFyIGxhYmVsXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2xhYmVsXCIpO1xyXG52YXIgYXVkaW9xdWFsaXR5c2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2F1ZGlvcXVhbGl0eXNlbGVjdGJveFwiKTtcclxudmFyIGF1ZGlvdHJhY2tzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvYXVkaW90cmFja3NlbGVjdGJveFwiKTtcclxudmFyIGNhc3RzdGF0dXNvdmVybGF5XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2Nhc3RzdGF0dXNvdmVybGF5XCIpO1xyXG52YXIgY2FzdHRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9jYXN0dG9nZ2xlYnV0dG9uXCIpO1xyXG52YXIgY29tcG9uZW50XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2NvbXBvbmVudFwiKTtcclxudmFyIGVycm9ybWVzc2FnZW92ZXJsYXlfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvZXJyb3JtZXNzYWdlb3ZlcmxheVwiKTtcclxudmFyIHJlY29tbWVuZGF0aW9ub3ZlcmxheV8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9yZWNvbW1lbmRhdGlvbm92ZXJsYXlcIik7XHJcbnZhciBzZWVrYmFybGFiZWxfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc2Vla2JhcmxhYmVsXCIpO1xyXG52YXIgc3VidGl0bGVvdmVybGF5XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3N1YnRpdGxlb3ZlcmxheVwiKTtcclxudmFyIHN1YnRpdGxlc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3N1YnRpdGxlc2VsZWN0Ym94XCIpO1xyXG52YXIgdGl0bGViYXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdGl0bGViYXJcIik7XHJcbnZhciB2b2x1bWVjb250cm9sYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3ZvbHVtZWNvbnRyb2xidXR0b25cIik7XHJcbnZhciBjbGlja292ZXJsYXlfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvY2xpY2tvdmVybGF5XCIpO1xyXG52YXIgYWRza2lwYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2Fkc2tpcGJ1dHRvblwiKTtcclxudmFyIGFkbWVzc2FnZWxhYmVsXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2FkbWVzc2FnZWxhYmVsXCIpO1xyXG52YXIgYWRjbGlja292ZXJsYXlfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvYWRjbGlja292ZXJsYXlcIik7XHJcbnZhciBwbGF5YmFja3NwZWVkc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3BsYXliYWNrc3BlZWRzZWxlY3Rib3hcIik7XHJcbnZhciBodWdlcmVwbGF5YnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2h1Z2VyZXBsYXlidXR0b25cIik7XHJcbnZhciBidWZmZXJpbmdvdmVybGF5XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2J1ZmZlcmluZ292ZXJsYXlcIik7XHJcbnZhciBjYXN0dWljb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvY2FzdHVpY29udGFpbmVyXCIpO1xyXG52YXIgcGxheWJhY2t0b2dnbGVvdmVybGF5XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3BsYXliYWNrdG9nZ2xlb3ZlcmxheVwiKTtcclxudmFyIGNsb3NlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2Nsb3NlYnV0dG9uXCIpO1xyXG52YXIgbWV0YWRhdGFsYWJlbF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9tZXRhZGF0YWxhYmVsXCIpO1xyXG52YXIgYWlycGxheXRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9haXJwbGF5dG9nZ2xlYnV0dG9uXCIpO1xyXG52YXIgdm9sdW1lc2xpZGVyXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3ZvbHVtZXNsaWRlclwiKTtcclxudmFyIHBpY3R1cmVpbnBpY3R1cmV0b2dnbGVidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvcGljdHVyZWlucGljdHVyZXRvZ2dsZWJ1dHRvblwiKTtcclxudmFyIHNwYWNlcl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zcGFjZXJcIik7XHJcbnZhciBiYWNrZ3JvdW5kY29sb3JzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9iYWNrZ3JvdW5kY29sb3JzZWxlY3Rib3hcIik7XHJcbnZhciBiYWNrZ3JvdW5kb3BhY2l0eXNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL2JhY2tncm91bmRvcGFjaXR5c2VsZWN0Ym94XCIpO1xyXG52YXIgY2hhcmFjdGVyZWRnZXNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL2NoYXJhY3RlcmVkZ2VzZWxlY3Rib3hcIik7XHJcbnZhciBmb250Y29sb3JzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9mb250Y29sb3JzZWxlY3Rib3hcIik7XHJcbnZhciBmb250ZmFtaWx5c2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvZm9udGZhbWlseXNlbGVjdGJveFwiKTtcclxudmFyIGZvbnRvcGFjaXR5c2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3MvZm9udG9wYWNpdHlzZWxlY3Rib3hcIik7XHJcbnZhciBmb250c2l6ZXNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL2ZvbnRzaXplc2VsZWN0Ym94XCIpO1xyXG52YXIgc3VidGl0bGVzZXR0aW5nc2J1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NidXR0b25cIik7XHJcbnZhciBzdWJ0aXRsZXNldHRpbmdzY2xvc2VidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzY2xvc2VidXR0b25cIik7XHJcbnZhciBzdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzZWxlY3Rib3hcIik7XHJcbnZhciBzdWJ0aXRsZXNldHRpbmdzbGFiZWxfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy9zdWJ0aXRsZXNldHRpbmdzbGFiZWxcIik7XHJcbnZhciBzdWJ0aXRsZXNldHRpbmdzb3BlbmJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NvcGVuYnV0dG9uXCIpO1xyXG52YXIgc3VidGl0bGVzZXR0aW5nc3BhbmVsXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvc3VidGl0bGVzZXR0aW5nc3BhbmVsXCIpO1xyXG52YXIgd2luZG93Y29sb3JzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy93aW5kb3djb2xvcnNlbGVjdGJveFwiKTtcclxudmFyIHdpbmRvd29wYWNpdHlzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc3VidGl0bGVzZXR0aW5ncy93aW5kb3dvcGFjaXR5c2VsZWN0Ym94XCIpO1xyXG52YXIgYXJyYXl1dGlsc18xID0gcmVxdWlyZShcIi4vYXJyYXl1dGlsc1wiKTtcclxudmFyIHN0cmluZ3V0aWxzXzEgPSByZXF1aXJlKFwiLi9zdHJpbmd1dGlsc1wiKTtcclxudmFyIHBsYXllcnV0aWxzXzEgPSByZXF1aXJlKFwiLi9wbGF5ZXJ1dGlsc1wiKTtcclxudmFyIHVpdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3VpdXRpbHNcIik7XHJcbnZhciBicm93c2VydXRpbHNfMSA9IHJlcXVpcmUoXCIuL2Jyb3dzZXJ1dGlsc1wiKTtcclxudmFyIHN0b3JhZ2V1dGlsc18xID0gcmVxdWlyZShcIi4vc3RvcmFnZXV0aWxzXCIpO1xyXG52YXIgc3VidGl0bGVzZXR0aW5nc3Jlc2V0YnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvc3VidGl0bGVzZXR0aW5nc3Jlc2V0YnV0dG9uXCIpO1xyXG4vLyBPYmplY3QuYXNzaWduIHBvbHlmaWxsIGZvciBFUzUvSUU5XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RlL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ25cclxuaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgICd1c2Ugc3RyaWN0JztcclxuICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldCA9IE9iamVjdCh0YXJnZXQpO1xyXG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoc291cmNlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgfTtcclxufVxyXG52YXIgcGxheWVydWkgPSB7XHJcbiAgICB2ZXJzaW9uOiAne3tWRVJTSU9OfX0nLFxyXG4gICAgLy8gTWFuYWdlbWVudFxyXG4gICAgVUlNYW5hZ2VyOiB1aW1hbmFnZXJfMS5VSU1hbmFnZXIsXHJcbiAgICBVSUluc3RhbmNlTWFuYWdlcjogdWltYW5hZ2VyXzEuVUlJbnN0YW5jZU1hbmFnZXIsXHJcbiAgICAvLyBVdGlsc1xyXG4gICAgQXJyYXlVdGlsczogYXJyYXl1dGlsc18xLkFycmF5VXRpbHMsXHJcbiAgICBTdHJpbmdVdGlsczogc3RyaW5ndXRpbHNfMS5TdHJpbmdVdGlscyxcclxuICAgIFBsYXllclV0aWxzOiBwbGF5ZXJ1dGlsc18xLlBsYXllclV0aWxzLFxyXG4gICAgVUlVdGlsczogdWl1dGlsc18xLlVJVXRpbHMsXHJcbiAgICBCcm93c2VyVXRpbHM6IGJyb3dzZXJ1dGlsc18xLkJyb3dzZXJVdGlscyxcclxuICAgIFN0b3JhZ2VVdGlsczogc3RvcmFnZXV0aWxzXzEuU3RvcmFnZVV0aWxzLFxyXG4gICAgLy8gQ29tcG9uZW50c1xyXG4gICAgQWRDbGlja092ZXJsYXk6IGFkY2xpY2tvdmVybGF5XzEuQWRDbGlja092ZXJsYXksXHJcbiAgICBBZE1lc3NhZ2VMYWJlbDogYWRtZXNzYWdlbGFiZWxfMS5BZE1lc3NhZ2VMYWJlbCxcclxuICAgIEFkU2tpcEJ1dHRvbjogYWRza2lwYnV0dG9uXzEuQWRTa2lwQnV0dG9uLFxyXG4gICAgQWlyUGxheVRvZ2dsZUJ1dHRvbjogYWlycGxheXRvZ2dsZWJ1dHRvbl8xLkFpclBsYXlUb2dnbGVCdXR0b24sXHJcbiAgICBBdWRpb1F1YWxpdHlTZWxlY3RCb3g6IGF1ZGlvcXVhbGl0eXNlbGVjdGJveF8xLkF1ZGlvUXVhbGl0eVNlbGVjdEJveCxcclxuICAgIEF1ZGlvVHJhY2tTZWxlY3RCb3g6IGF1ZGlvdHJhY2tzZWxlY3Rib3hfMS5BdWRpb1RyYWNrU2VsZWN0Qm94LFxyXG4gICAgQnVmZmVyaW5nT3ZlcmxheTogYnVmZmVyaW5nb3ZlcmxheV8xLkJ1ZmZlcmluZ092ZXJsYXksXHJcbiAgICBCdXR0b246IGJ1dHRvbl8xLkJ1dHRvbixcclxuICAgIENhc3RTdGF0dXNPdmVybGF5OiBjYXN0c3RhdHVzb3ZlcmxheV8xLkNhc3RTdGF0dXNPdmVybGF5LFxyXG4gICAgQ2FzdFRvZ2dsZUJ1dHRvbjogY2FzdHRvZ2dsZWJ1dHRvbl8xLkNhc3RUb2dnbGVCdXR0b24sXHJcbiAgICBDYXN0VUlDb250YWluZXI6IGNhc3R1aWNvbnRhaW5lcl8xLkNhc3RVSUNvbnRhaW5lcixcclxuICAgIENsaWNrT3ZlcmxheTogY2xpY2tvdmVybGF5XzEuQ2xpY2tPdmVybGF5LFxyXG4gICAgQ2xvc2VCdXR0b246IGNsb3NlYnV0dG9uXzEuQ2xvc2VCdXR0b24sXHJcbiAgICBDb21wb25lbnQ6IGNvbXBvbmVudF8xLkNvbXBvbmVudCxcclxuICAgIENvbnRhaW5lcjogY29udGFpbmVyXzEuQ29udGFpbmVyLFxyXG4gICAgQ29udHJvbEJhcjogY29udHJvbGJhcl8xLkNvbnRyb2xCYXIsXHJcbiAgICBFcnJvck1lc3NhZ2VPdmVybGF5OiBlcnJvcm1lc3NhZ2VvdmVybGF5XzEuRXJyb3JNZXNzYWdlT3ZlcmxheSxcclxuICAgIEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b246IGZ1bGxzY3JlZW50b2dnbGVidXR0b25fMS5GdWxsc2NyZWVuVG9nZ2xlQnV0dG9uLFxyXG4gICAgSHVnZVBsYXliYWNrVG9nZ2xlQnV0dG9uOiBodWdlcGxheWJhY2t0b2dnbGVidXR0b25fMS5IdWdlUGxheWJhY2tUb2dnbGVCdXR0b24sXHJcbiAgICBIdWdlUmVwbGF5QnV0dG9uOiBodWdlcmVwbGF5YnV0dG9uXzEuSHVnZVJlcGxheUJ1dHRvbixcclxuICAgIExhYmVsOiBsYWJlbF8xLkxhYmVsLFxyXG4gICAgTWV0YWRhdGFMYWJlbDogbWV0YWRhdGFsYWJlbF8xLk1ldGFkYXRhTGFiZWwsXHJcbiAgICBNZXRhZGF0YUxhYmVsQ29udGVudDogbWV0YWRhdGFsYWJlbF8xLk1ldGFkYXRhTGFiZWxDb250ZW50LFxyXG4gICAgUGljdHVyZUluUGljdHVyZVRvZ2dsZUJ1dHRvbjogcGljdHVyZWlucGljdHVyZXRvZ2dsZWJ1dHRvbl8xLlBpY3R1cmVJblBpY3R1cmVUb2dnbGVCdXR0b24sXHJcbiAgICBQbGF5YmFja1NwZWVkU2VsZWN0Qm94OiBwbGF5YmFja3NwZWVkc2VsZWN0Ym94XzEuUGxheWJhY2tTcGVlZFNlbGVjdEJveCxcclxuICAgIFBsYXliYWNrVGltZUxhYmVsOiBwbGF5YmFja3RpbWVsYWJlbF8xLlBsYXliYWNrVGltZUxhYmVsLFxyXG4gICAgUGxheWJhY2tUaW1lTGFiZWxNb2RlOiBwbGF5YmFja3RpbWVsYWJlbF8xLlBsYXliYWNrVGltZUxhYmVsTW9kZSxcclxuICAgIFBsYXliYWNrVG9nZ2xlQnV0dG9uOiBwbGF5YmFja3RvZ2dsZWJ1dHRvbl8xLlBsYXliYWNrVG9nZ2xlQnV0dG9uLFxyXG4gICAgUGxheWJhY2tUb2dnbGVPdmVybGF5OiBwbGF5YmFja3RvZ2dsZW92ZXJsYXlfMS5QbGF5YmFja1RvZ2dsZU92ZXJsYXksXHJcbiAgICBSZWNvbW1lbmRhdGlvbk92ZXJsYXk6IHJlY29tbWVuZGF0aW9ub3ZlcmxheV8xLlJlY29tbWVuZGF0aW9uT3ZlcmxheSxcclxuICAgIFNlZWtCYXI6IHNlZWtiYXJfMS5TZWVrQmFyLFxyXG4gICAgU2Vla0JhckxhYmVsOiBzZWVrYmFybGFiZWxfMS5TZWVrQmFyTGFiZWwsXHJcbiAgICBTZWxlY3RCb3g6IHNlbGVjdGJveF8xLlNlbGVjdEJveCxcclxuICAgIEl0ZW1TZWxlY3Rpb25MaXN0OiBpdGVtc2VsZWN0aW9ubGlzdF8xLkl0ZW1TZWxlY3Rpb25MaXN0LFxyXG4gICAgU2V0dGluZ3NQYW5lbDogc2V0dGluZ3NwYW5lbF8xLlNldHRpbmdzUGFuZWwsXHJcbiAgICBTZXR0aW5nc1BhbmVsSXRlbTogc2V0dGluZ3NwYW5lbF8xLlNldHRpbmdzUGFuZWxJdGVtLFxyXG4gICAgU2V0dGluZ3NUb2dnbGVCdXR0b246IHNldHRpbmdzdG9nZ2xlYnV0dG9uXzEuU2V0dGluZ3NUb2dnbGVCdXR0b24sXHJcbiAgICBTcGFjZXI6IHNwYWNlcl8xLlNwYWNlcixcclxuICAgIFN1YnRpdGxlT3ZlcmxheTogc3VidGl0bGVvdmVybGF5XzEuU3VidGl0bGVPdmVybGF5LFxyXG4gICAgU3VidGl0bGVTZWxlY3RCb3g6IHN1YnRpdGxlc2VsZWN0Ym94XzEuU3VidGl0bGVTZWxlY3RCb3gsXHJcbiAgICBUaXRsZUJhcjogdGl0bGViYXJfMS5UaXRsZUJhcixcclxuICAgIFRvZ2dsZUJ1dHRvbjogdG9nZ2xlYnV0dG9uXzEuVG9nZ2xlQnV0dG9uLFxyXG4gICAgVUlDb250YWluZXI6IHVpY29udGFpbmVyXzEuVUlDb250YWluZXIsXHJcbiAgICBWaWRlb1F1YWxpdHlTZWxlY3RCb3g6IHZpZGVvcXVhbGl0eXNlbGVjdGJveF8xLlZpZGVvUXVhbGl0eVNlbGVjdEJveCxcclxuICAgIFZvbHVtZUNvbnRyb2xCdXR0b246IHZvbHVtZWNvbnRyb2xidXR0b25fMS5Wb2x1bWVDb250cm9sQnV0dG9uLFxyXG4gICAgVm9sdW1lU2xpZGVyOiB2b2x1bWVzbGlkZXJfMS5Wb2x1bWVTbGlkZXIsXHJcbiAgICBWb2x1bWVUb2dnbGVCdXR0b246IHZvbHVtZXRvZ2dsZWJ1dHRvbl8xLlZvbHVtZVRvZ2dsZUJ1dHRvbixcclxuICAgIFZSVG9nZ2xlQnV0dG9uOiB2cnRvZ2dsZWJ1dHRvbl8xLlZSVG9nZ2xlQnV0dG9uLFxyXG4gICAgV2F0ZXJtYXJrOiB3YXRlcm1hcmtfMS5XYXRlcm1hcmssXHJcbiAgICAvLyBTdWJ0aXRsZSByZWxhdGVkIGNvbXBvbmVudHNcclxuICAgIHN1YnRpdGxlc2V0dGluZ3M6IHtcclxuICAgICAgICBCYWNrZ3JvdW5kQ29sb3JTZWxlY3RCb3g6IGJhY2tncm91bmRjb2xvcnNlbGVjdGJveF8xLkJhY2tncm91bmRDb2xvclNlbGVjdEJveCxcclxuICAgICAgICBCYWNrZ3JvdW5kT3BhY2l0eVNlbGVjdEJveDogYmFja2dyb3VuZG9wYWNpdHlzZWxlY3Rib3hfMS5CYWNrZ3JvdW5kT3BhY2l0eVNlbGVjdEJveCxcclxuICAgICAgICBDaGFyYWN0ZXJFZGdlU2VsZWN0Qm94OiBjaGFyYWN0ZXJlZGdlc2VsZWN0Ym94XzEuQ2hhcmFjdGVyRWRnZVNlbGVjdEJveCxcclxuICAgICAgICBGb250Q29sb3JTZWxlY3RCb3g6IGZvbnRjb2xvcnNlbGVjdGJveF8xLkZvbnRDb2xvclNlbGVjdEJveCxcclxuICAgICAgICBGb250RmFtaWx5U2VsZWN0Qm94OiBmb250ZmFtaWx5c2VsZWN0Ym94XzEuRm9udEZhbWlseVNlbGVjdEJveCxcclxuICAgICAgICBGb250T3BhY2l0eVNlbGVjdEJveDogZm9udG9wYWNpdHlzZWxlY3Rib3hfMS5Gb250T3BhY2l0eVNlbGVjdEJveCxcclxuICAgICAgICBGb250U2l6ZVNlbGVjdEJveDogZm9udHNpemVzZWxlY3Rib3hfMS5Gb250U2l6ZVNlbGVjdEJveCxcclxuICAgICAgICBTdWJ0aXRsZVNldHRpbmdzQnV0dG9uOiBzdWJ0aXRsZXNldHRpbmdzYnV0dG9uXzEuU3VidGl0bGVTZXR0aW5nc0J1dHRvbixcclxuICAgICAgICBTdWJ0aXRsZVNldHRpbmdzQ2xvc2VCdXR0b246IHN1YnRpdGxlc2V0dGluZ3NjbG9zZWJ1dHRvbl8xLlN1YnRpdGxlU2V0dGluZ3NDbG9zZUJ1dHRvbixcclxuICAgICAgICBTdWJ0aXRsZVNldHRpbmdTZWxlY3RCb3g6IHN1YnRpdGxlc2V0dGluZ3NlbGVjdGJveF8xLlN1YnRpdGxlU2V0dGluZ1NlbGVjdEJveCxcclxuICAgICAgICBTdWJ0aXRsZVNldHRpbmdzTGFiZWw6IHN1YnRpdGxlc2V0dGluZ3NsYWJlbF8xLlN1YnRpdGxlU2V0dGluZ3NMYWJlbCxcclxuICAgICAgICBTdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbjogc3VidGl0bGVzZXR0aW5nc29wZW5idXR0b25fMS5TdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbixcclxuICAgICAgICBTdWJ0aXRsZVNldHRpbmdzUGFuZWw6IHN1YnRpdGxlc2V0dGluZ3NwYW5lbF8xLlN1YnRpdGxlU2V0dGluZ3NQYW5lbCxcclxuICAgICAgICBXaW5kb3dDb2xvclNlbGVjdEJveDogd2luZG93Y29sb3JzZWxlY3Rib3hfMS5XaW5kb3dDb2xvclNlbGVjdEJveCxcclxuICAgICAgICBXaW5kb3dPcGFjaXR5U2VsZWN0Qm94OiB3aW5kb3dvcGFjaXR5c2VsZWN0Ym94XzEuV2luZG93T3BhY2l0eVNlbGVjdEJveCxcclxuICAgICAgICBTdWJ0aXRsZVNldHRpbmdzUmVzZXRCdXR0b246IHN1YnRpdGxlc2V0dGluZ3NyZXNldGJ1dHRvbl8xLlN1YnRpdGxlU2V0dGluZ3NSZXNldEJ1dHRvbixcclxuICAgIH0sXHJcbn07XHJcbndpbmRvdy5iaXRtb3Zpbi5wbGF5ZXJ1aSA9IHBsYXllcnVpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IHBsYXllcnVpO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL21haW4udHNcbi8vIG1vZHVsZSBpZCA9IDcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XHJcbiAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcclxuICAgICAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdWljb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdWljb250YWluZXJcIik7XHJcbnZhciBkb21fMSA9IHJlcXVpcmUoXCIuL2RvbVwiKTtcclxudmFyIGNvbnRhaW5lcl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9jb250YWluZXJcIik7XHJcbnZhciBwbGF5YmFja3RvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9wbGF5YmFja3RvZ2dsZWJ1dHRvblwiKTtcclxudmFyIGZ1bGxzY3JlZW50b2dnbGVidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvblwiKTtcclxudmFyIHZydG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3ZydG9nZ2xlYnV0dG9uXCIpO1xyXG52YXIgdm9sdW1ldG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3ZvbHVtZXRvZ2dsZWJ1dHRvblwiKTtcclxudmFyIHNlZWtiYXJfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc2Vla2JhclwiKTtcclxudmFyIHBsYXliYWNrdGltZWxhYmVsXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3BsYXliYWNrdGltZWxhYmVsXCIpO1xyXG52YXIgY29udHJvbGJhcl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9jb250cm9sYmFyXCIpO1xyXG52YXIgZXZlbnRkaXNwYXRjaGVyXzEgPSByZXF1aXJlKFwiLi9ldmVudGRpc3BhdGNoZXJcIik7XHJcbnZhciBzZXR0aW5nc3RvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zZXR0aW5nc3RvZ2dsZWJ1dHRvblwiKTtcclxudmFyIHNldHRpbmdzcGFuZWxfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc2V0dGluZ3NwYW5lbFwiKTtcclxudmFyIHN1YnRpdGxlc2V0dGluZ3NwYW5lbF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NwYW5lbFwiKTtcclxudmFyIHN1YnRpdGxlc2V0dGluZ3NsYWJlbF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NsYWJlbFwiKTtcclxudmFyIHN1YnRpdGxlc2V0dGluZ3NvcGVuYnV0dG9uXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3N1YnRpdGxlc2V0dGluZ3Mvc3VidGl0bGVzZXR0aW5nc29wZW5idXR0b25cIik7XHJcbnZhciB2aWRlb3F1YWxpdHlzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdmlkZW9xdWFsaXR5c2VsZWN0Ym94XCIpO1xyXG4vLyBpbXBvcnQge1dhdGVybWFya30gZnJvbSAnLi9jb21wb25lbnRzL3dhdGVybWFyayc7XHJcbnZhciBhdWRpb3F1YWxpdHlzZWxlY3Rib3hfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvYXVkaW9xdWFsaXR5c2VsZWN0Ym94XCIpO1xyXG52YXIgYXVkaW90cmFja3NlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9hdWRpb3RyYWNrc2VsZWN0Ym94XCIpO1xyXG52YXIgc2Vla2JhcmxhYmVsXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3NlZWtiYXJsYWJlbFwiKTtcclxudmFyIHZvbHVtZXNsaWRlcl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy92b2x1bWVzbGlkZXJcIik7XHJcbnZhciBzdWJ0aXRsZXNlbGVjdGJveF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zdWJ0aXRsZXNlbGVjdGJveFwiKTtcclxudmFyIHN1YnRpdGxlb3ZlcmxheV8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zdWJ0aXRsZW92ZXJsYXlcIik7XHJcbi8vIGltcG9ydCB7Vm9sdW1lQ29udHJvbEJ1dHRvbn0gZnJvbSAnLi9jb21wb25lbnRzL3ZvbHVtZWNvbnRyb2xidXR0b24nO1xyXG52YXIgY2FzdHRvZ2dsZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9jYXN0dG9nZ2xlYnV0dG9uXCIpO1xyXG52YXIgY2FzdHN0YXR1c292ZXJsYXlfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvY2FzdHN0YXR1c292ZXJsYXlcIik7XHJcbnZhciBlcnJvcm1lc3NhZ2VvdmVybGF5XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2Vycm9ybWVzc2FnZW92ZXJsYXlcIik7XHJcbnZhciB0aXRsZWJhcl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy90aXRsZWJhclwiKTtcclxudmFyIHJlY29tbWVuZGF0aW9ub3ZlcmxheV8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9yZWNvbW1lbmRhdGlvbm92ZXJsYXlcIik7XHJcbnZhciBwbGF5YmFja3NwZWVkc2VsZWN0Ym94XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3BsYXliYWNrc3BlZWRzZWxlY3Rib3hcIik7XHJcbnZhciBidWZmZXJpbmdvdmVybGF5XzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL2J1ZmZlcmluZ292ZXJsYXlcIik7XHJcbi8vIGltcG9ydCB7Q2FzdFVJQ29udGFpbmVyfSBmcm9tICcuL2NvbXBvbmVudHMvY2FzdHVpY29udGFpbmVyJztcclxudmFyIHBsYXliYWNrdG9nZ2xlb3ZlcmxheV8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9wbGF5YmFja3RvZ2dsZW92ZXJsYXlcIik7XHJcbnZhciBjbG9zZWJ1dHRvbl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9jbG9zZWJ1dHRvblwiKTtcclxudmFyIG1ldGFkYXRhbGFiZWxfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvbWV0YWRhdGFsYWJlbFwiKTtcclxudmFyIGFpcnBsYXl0b2dnbGVidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvYWlycGxheXRvZ2dsZWJ1dHRvblwiKTtcclxudmFyIHBpY3R1cmVpbnBpY3R1cmV0b2dnbGVidXR0b25fMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvcGljdHVyZWlucGljdHVyZXRvZ2dsZWJ1dHRvblwiKTtcclxudmFyIGF1ZGlvb25seW92ZXJsYXlfMSA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvYXVkaW9vbmx5b3ZlcmxheVwiKTtcclxudmFyIHNwYWNlcl8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9zcGFjZXJcIik7XHJcbnZhciB1aXV0aWxzXzEgPSByZXF1aXJlKFwiLi91aXV0aWxzXCIpO1xyXG52YXIgYXJyYXl1dGlsc18xID0gcmVxdWlyZShcIi4vYXJyYXl1dGlsc1wiKTtcclxudmFyIGJyb3dzZXJ1dGlsc18xID0gcmVxdWlyZShcIi4vYnJvd3NlcnV0aWxzXCIpO1xyXG52YXIgVUlNYW5hZ2VyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFVJTWFuYWdlcihwbGF5ZXIsIHBsYXllclVpT3JVaVZhcmlhbnRzLCBjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0ge1xyXG4gICAgICAgICAgICBvblVpVmFyaWFudFJlc29sdmU6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChwbGF5ZXJVaU9yVWlWYXJpYW50cyBpbnN0YW5jZW9mIHVpY29udGFpbmVyXzEuVUlDb250YWluZXIpIHtcclxuICAgICAgICAgICAgLy8gU2luZ2xlLVVJIGNvbnN0cnVjdG9yIGhhcyBiZWVuIGNhbGxlZCwgdHJhbnNmb3JtIGFyZ3VtZW50cyB0byBVSVZhcmlhbnRbXSBzaWduYXR1cmVcclxuICAgICAgICAgICAgdmFyIHBsYXllclVpID0gcGxheWVyVWlPclVpVmFyaWFudHM7XHJcbiAgICAgICAgICAgIHZhciB1aVZhcmlhbnRzID0gW107XHJcbiAgICAgICAgICAgIC8vIEFkZCB0aGUgZGVmYXVsdCBwbGF5ZXIgVUlcclxuICAgICAgICAgICAgdWlWYXJpYW50cy5wdXNoKHsgdWk6IHBsYXllclVpIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnVpVmFyaWFudHMgPSB1aVZhcmlhbnRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRGVmYXVsdCBjb25zdHJ1Y3RvciAoVUlWYXJpYW50W10pIGhhcyBiZWVuIGNhbGxlZFxyXG4gICAgICAgICAgICB0aGlzLnVpVmFyaWFudHMgPSBwbGF5ZXJVaU9yVWlWYXJpYW50cztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBfX2Fzc2lnbih7fSwgY29uZmlnLCB7IGV2ZW50czoge1xyXG4gICAgICAgICAgICAgICAgb25VcGRhdGVkOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIH0gfSk7XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlciA9IG5ldyBQbGF5ZXJXcmFwcGVyKHBsYXllcik7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2F0aGVycyBjb25maWd1cmF0aW9uIGRhdGEgZnJvbSB0aGUgVUkgY29uZmlnIGFuZCBwbGF5ZXIgc291cmNlIGNvbmZpZyBhbmQgY3JlYXRlcyBhIG1lcmdlZCBVSSBjb25maWdcclxuICAgICAgICAgKiB0aGF0IGlzIHVzZWQgdGhyb3VnaG91dCB0aGUgVUkgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHVwZGF0ZUNvbmZpZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBsYXllclNvdXJjZUNvbmZpZyA9IHBsYXllci5nZXRDb25maWcoKS5zb3VyY2UgfHwge307XHJcbiAgICAgICAgICAgIHZhciB1aUNvbmZpZyA9IF9fYXNzaWduKHt9LCBjb25maWcpO1xyXG4gICAgICAgICAgICB1aUNvbmZpZy5tZXRhZGF0YSA9IHVpQ29uZmlnLm1ldGFkYXRhIHx8IHt9O1xyXG4gICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBVSS1yZWxhdGVkIGNvbmZpZyBwcm9wZXJ0aWVzIGZyb20gdGhlIHNvdXJjZSBjb25maWdcclxuICAgICAgICAgICAgdmFyIHBsYXllclNvdXJjZVVpQ29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIG1vdmUgbWV0YWRhdGEgaW50byBzb3VyY2UubWV0YWRhdGEgbmFtZXNwYWNlIGluIHBsYXllciB2OFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBwbGF5ZXJTb3VyY2VDb25maWcudGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHBsYXllclNvdXJjZUNvbmZpZy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJzOiBwbGF5ZXJTb3VyY2VDb25maWcubWFya2VycyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IHBsYXllclNvdXJjZUNvbmZpZy5yZWNvbW1lbmRhdGlvbnMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIFBsYXllciBzb3VyY2UgY29uZmlnIHRha2VzIHByZWNlZGVuY2Ugb3ZlciB0aGUgVUkgY29uZmlnLCBiZWNhdXNlIHRoZSBjb25maWcgaW4gdGhlIHNvdXJjZSBpcyBhdHRhY2hlZFxyXG4gICAgICAgICAgICAvLyB0byBhIHNvdXJjZSB3aGljaCBjaGFuZ2VzIHdpdGggZXZlcnkgcGxheWVyLmxvYWQsIHdoZXJlYXMgdGhlIFVJIGNvbmZpZyBzdGF5cyB0aGUgc2FtZSBmb3IgdGhlIHdob2xlXHJcbiAgICAgICAgICAgIC8vIGxpZmV0aW1lIG9mIHRoZSBwbGF5ZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZy5tZXRhZGF0YSA9IF90aGlzLmNvbmZpZy5tZXRhZGF0YSB8fCB7fTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnLm1ldGFkYXRhLnRpdGxlID0gcGxheWVyU291cmNlVWlDb25maWcubWV0YWRhdGEudGl0bGUgfHwgdWlDb25maWcubWV0YWRhdGEudGl0bGU7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZy5tZXRhZGF0YS5kZXNjcmlwdGlvbiA9IHBsYXllclNvdXJjZVVpQ29uZmlnLm1ldGFkYXRhLmRlc2NyaXB0aW9uIHx8IHVpQ29uZmlnLm1ldGFkYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWcubWV0YWRhdGEubWFya2VycyA9IHBsYXllclNvdXJjZVVpQ29uZmlnLm1ldGFkYXRhLm1hcmtlcnMgfHwgdWlDb25maWcubWV0YWRhdGEubWFya2VycyB8fCBbXTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnLnJlY29tbWVuZGF0aW9ucyA9IHBsYXllclNvdXJjZVVpQ29uZmlnLnJlY29tbWVuZGF0aW9ucyB8fCB1aUNvbmZpZy5yZWNvbW1lbmRhdGlvbnMgfHwgW107XHJcbiAgICAgICAgfTtcclxuICAgICAgICB1cGRhdGVDb25maWcoKTtcclxuICAgICAgICAvLyBVcGRhdGUgdGhlIGNvbmZpZ3VyYXRpb24gd2hlbiBhIG5ldyBzb3VyY2UgaXMgbG9hZGVkXHJcbiAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5hZGRFdmVudEhhbmRsZXIodGhpcy5wbGF5ZXIuRVZFTlQuT05fU09VUkNFX0xPQURFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1cGRhdGVDb25maWcoKTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnLmV2ZW50cy5vblVwZGF0ZWQuZGlzcGF0Y2goX3RoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChjb25maWcuY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIC8vIFVuZm9ydHVuYXRlbHkgJ3VpQ29udGFpbmVyRWxlbWVudCA9IG5ldyBET00oY29uZmlnLmNvbnRhaW5lciknIHdpbGwgbm90IGFjY2VwdCB0aGUgY29udGFpbmVyIHdpdGhcclxuICAgICAgICAgICAgLy8gc3RyaW5nfEhUTUxFbGVtZW50IHR5cGUgZGlyZWN0bHksIGFsdGhvdWdoIGl0IGFjY2VwdHMgYm90aCB0eXBlcywgc28gd2UgbmVlZCB0byBzcGl0IHRoZXNlIHR3byBjYXNlcyB1cCBoZXJlLlxyXG4gICAgICAgICAgICAvLyBUT0RPIGNoZWNrIGluIHVwY29taW5nIFRTIHZlcnNpb25zIGlmIHRoZSBjb250YWluZXIgY2FuIGJlIHBhc3NlZCBpbiBkaXJlY3RseSwgb3IgZml4IHRoZSBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAgICB0aGlzLnVpQ29udGFpbmVyRWxlbWVudCA9IGNvbmZpZy5jb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA/XHJcbiAgICAgICAgICAgICAgICBuZXcgZG9tXzEuRE9NKGNvbmZpZy5jb250YWluZXIpIDogbmV3IGRvbV8xLkRPTShjb25maWcuY29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudWlDb250YWluZXJFbGVtZW50ID0gbmV3IGRvbV8xLkRPTShwbGF5ZXIuZ2V0RmlndXJlKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgVUkgaW5zdGFuY2UgbWFuYWdlcnMgZm9yIHRoZSBVSSB2YXJpYW50c1xyXG4gICAgICAgIC8vIFRoZSBpbnN0YW5jZSBtYW5hZ2VycyBtYXAgdG8gdGhlIGNvcnJlc3BvbmRpbmcgVUkgdmFyaWFudHMgYnkgdGhlaXIgYXJyYXkgaW5kZXhcclxuICAgICAgICB0aGlzLnVpSW5zdGFuY2VNYW5hZ2VycyA9IFtdO1xyXG4gICAgICAgIHZhciB1aVZhcmlhbnRzV2l0aG91dENvbmRpdGlvbiA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnVpVmFyaWFudHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB1aVZhcmlhbnQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmICh1aVZhcmlhbnQuY29uZGl0aW9uID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIENvbGxlY3QgdmFyaWFudHMgd2l0aG91dCBjb25kaXRpb25zIGZvciBlcnJvciBjaGVja2luZ1xyXG4gICAgICAgICAgICAgICAgdWlWYXJpYW50c1dpdGhvdXRDb25kaXRpb24ucHVzaCh1aVZhcmlhbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgaW5zdGFuY2UgbWFuYWdlciBmb3IgYSBVSSB2YXJpYW50XHJcbiAgICAgICAgICAgIHRoaXMudWlJbnN0YW5jZU1hbmFnZXJzLnB1c2gobmV3IEludGVybmFsVUlJbnN0YW5jZU1hbmFnZXIocGxheWVyLCB1aVZhcmlhbnQudWksIHRoaXMuY29uZmlnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZXJlIGlzIG9ubHkgb25lIFVJIHZhcmlhbnQgd2l0aG91dCBhIGNvbmRpdGlvblxyXG4gICAgICAgIC8vIEl0IGRvZXMgbm90IG1ha2Ugc2Vuc2UgdG8gaGF2ZSBtdWx0aXBsZSB2YXJpYW50cyB3aXRob3V0IGNvbmRpdGlvbiwgYmVjYXVzZSBvbmx5IHRoZSBmaXJzdCBvbmUgaW4gdGhlIGxpc3RcclxuICAgICAgICAvLyAodGhlIG9uZSB3aXRoIHRoZSBsb3dlc3QgaW5kZXgpIHdpbGwgZXZlciBiZSBzZWxlY3RlZC5cclxuICAgICAgICBpZiAodWlWYXJpYW50c1dpdGhvdXRDb25kaXRpb24ubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignVG9vIG1hbnkgVUlzIHdpdGhvdXQgYSBjb25kaXRpb246IFlvdSBjYW5ub3QgaGF2ZSBtb3JlIHRoYW4gb25lIGRlZmF1bHQgVUknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGRlZmF1bHQgVUkgdmFyaWFudCwgaWYgZGVmaW5lZCwgaXMgYXQgdGhlIGVuZCBvZiB0aGUgbGlzdCAobGFzdCBpbmRleClcclxuICAgICAgICAvLyBJZiBpdCBjb21lcyBlYXJsaWVyLCB0aGUgdmFyaWFudHMgd2l0aCBjb25kaXRpb25zIHRoYXQgY29tZSBhZnRlcndhcmRzIHdpbGwgbmV2ZXIgYmUgc2VsZWN0ZWQgYmVjYXVzZSB0aGVcclxuICAgICAgICAvLyBkZWZhdWx0IHZhcmlhbnQgd2l0aG91dCBhIGNvbmRpdGlvbiBhbHdheXMgZXZhbHVhdGVzIHRvICd0cnVlJ1xyXG4gICAgICAgIGlmICh1aVZhcmlhbnRzV2l0aG91dENvbmRpdGlvbi5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICYmIHVpVmFyaWFudHNXaXRob3V0Q29uZGl0aW9uWzBdICE9PSB0aGlzLnVpVmFyaWFudHNbdGhpcy51aVZhcmlhbnRzLmxlbmd0aCAtIDFdKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdJbnZhbGlkIFVJIHZhcmlhbnQgb3JkZXI6IHRoZSBkZWZhdWx0IFVJICh3aXRob3V0IGNvbmRpdGlvbikgbXVzdCBiZSBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFN3aXRjaCBvbiBhdXRvIFVJIHJlc29sdmluZyBieSBkZWZhdWx0XHJcbiAgICAgICAgaWYgKGNvbmZpZy5hdXRvVWlWYXJpYW50UmVzb2x2ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvVWlWYXJpYW50UmVzb2x2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhZFN0YXJ0ZWRFdmVudCA9IG51bGw7IC8vIGtlZXAgdGhlIGV2ZW50IHN0b3JlZCBoZXJlIGR1cmluZyBhZCBwbGF5YmFja1xyXG4gICAgICAgIC8vIER5bmFtaWNhbGx5IHNlbGVjdCBhIFVJIHZhcmlhbnQgdGhhdCBtYXRjaGVzIHRoZSBjdXJyZW50IFVJIGNvbmRpdGlvbi5cclxuICAgICAgICB2YXIgcmVzb2x2ZVVpVmFyaWFudCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgT05fQURfU1RBUlRFRCBldmVudCBkYXRhIGlzIHBlcnNpc3RlZCB0aHJvdWdoIGFkIHBsYXliYWNrIGluIGNhc2Ugb3RoZXIgZXZlbnRzIGhhcHBlblxyXG4gICAgICAgICAgICAvLyBpbiB0aGUgbWVhbnRpbWUsIGUuZy4gcGxheWVyIHJlc2l6ZS4gV2UgbmVlZCB0byBzdG9yZSB0aGlzIGRhdGEgYmVjYXVzZSB0aGVyZSBpcyBubyBvdGhlciB3YXkgdG8gZmluZCBvdXRcclxuICAgICAgICAgICAgLy8gYWQgZGV0YWlscyAoZS5nLiB0aGUgYWQgY2xpZW50KSB3aGlsZSBhbiBhZCBpcyBwbGF5aW5nLlxyXG4gICAgICAgICAgICAvLyBFeGlzdGluZyBldmVudCBkYXRhIHNpZ25hbHMgdGhhdCBhbiBhZCBpcyBjdXJyZW50bHkgYWN0aXZlLiBXZSBjYW5ub3QgdXNlIHBsYXllci5pc0FkKCkgYmVjYXVzZSBpdCByZXR1cm5zXHJcbiAgICAgICAgICAgIC8vIHRydWUgb24gYWQgc3RhcnQgYW5kIGFsc28gb24gYWQgZW5kIGV2ZW50cywgd2hpY2ggaXMgcHJvYmxlbWF0aWMuXHJcbiAgICAgICAgICAgIGlmIChldmVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBhZCBzdGFydHMsIHdlIHN0b3JlIHRoZSBldmVudCBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBwbGF5ZXIuRVZFTlQuT05fQURfU1RBUlRFRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRTdGFydGVkRXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYWQgZW5kcywgd2UgZGVsZXRlIHRoZSBldmVudCBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBwbGF5ZXIuRVZFTlQuT05fQURfRklOSVNIRUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBwbGF5ZXIuRVZFTlQuT05fQURfU0tJUFBFRDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIHBsYXllci5FVkVOVC5PTl9BRF9FUlJPUjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRTdGFydGVkRXZlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIGEgbmV3IHNvdXJjZSBpcyBsb2FkZWQgZHVyaW5nIGFkIHBsYXliYWNrLCB0aGVyZSB3aWxsIGJlIG5vIGFkIGVuZCBldmVudCBzbyB3ZSBkZXRlY3QgdGhlIGVuZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mIHRoZSBhZCBwbGF5YmFjayBieSBjaGVja2luZyBpc0FkKCkgaW4gT05fUkVBRFksIGJlY2F1c2UgT05fUkVBRFkgYWx3YXlzIGFycml2ZXMgd2hlbiB0aGUgc291cmNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hhbmdlcy5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIHBsYXllci5FVkVOVC5PTl9SRUFEWTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkU3RhcnRlZEV2ZW50ICYmICFwbGF5ZXIuaXNBZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZFN0YXJ0ZWRFdmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBEZXRlY3QgaWYgYW4gYWQgaGFzIHN0YXJ0ZWRcclxuICAgICAgICAgICAgdmFyIGFkID0gYWRTdGFydGVkRXZlbnQgIT0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIGFkV2l0aFVJID0gYWQgJiYgYWRTdGFydGVkRXZlbnQuY2xpZW50VHlwZSA9PT0gJ3Zhc3QnO1xyXG4gICAgICAgICAgICBfdGhpcy5yZXNvbHZlVWlWYXJpYW50KHtcclxuICAgICAgICAgICAgICAgIGlzQWQ6IGFkLFxyXG4gICAgICAgICAgICAgICAgaXNBZFdpdGhVSTogYWRXaXRoVUksXHJcbiAgICAgICAgICAgICAgICBhZENsaWVudFR5cGU6IGFkID8gYWRTdGFydGVkRXZlbnQuY2xpZW50VHlwZSA6IG51bGwsXHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGFkIFVJLCB3ZSBuZWVkIHRvIHJlbGF5IHRoZSBzYXZlZCBPTl9BRF9TVEFSVEVEIGV2ZW50IGRhdGEgc28gYWQgY29tcG9uZW50cyBjYW4gY29uZmlndXJlXHJcbiAgICAgICAgICAgICAgICAvLyB0aGVtc2VsdmVzIGZvciB0aGUgY3VycmVudCBhZC5cclxuICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LmlzQWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBSZWxheSB0aGUgT05fQURfU1RBUlRFRCBldmVudCB0byB0aGUgYWRzIFVJXHJcbiAgICAgICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAgICAgKiBCZWNhdXNlIHRoZSBhZHMgVUkgaXMgaW5pdGlhbGl6ZWQgaW4gdGhlIE9OX0FEX1NUQVJURUQgaGFuZGxlciwgaS5lLiB3aGVuIHRoZSBPTl9BRF9TVEFSVEVEIGV2ZW50IGhhc1xyXG4gICAgICAgICAgICAgICAgICAgICAqIGFscmVhZHkgYmVlbiBmaXJlZCwgY29tcG9uZW50cyBpbiB0aGUgYWRzIFVJIHRoYXQgbGlzdGVuIGZvciB0aGUgT05fQURfU1RBUlRFRCBldmVudCBuZXZlciByZWNlaXZlIGl0LlxyXG4gICAgICAgICAgICAgICAgICAgICAqIFNpbmNlIHRoaXMgY2FuIGJyZWFrIGZ1bmN0aW9uYWxpdHkgb2YgY29tcG9uZW50cyB0aGF0IHJlbHkgb24gdGhpcyBldmVudCwgd2UgcmVsYXkgdGhlIGV2ZW50IHRvIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAqIGFkcyBVSSBjb21wb25lbnRzIHdpdGggdGhlIGZvbGxvd2luZyBjYWxsLlxyXG4gICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRVaS5nZXRXcmFwcGVkUGxheWVyKCkuZmlyZUV2ZW50SW5VSShfdGhpcy5wbGF5ZXIuRVZFTlQuT05fQURfU1RBUlRFRCwgYWRTdGFydGVkRXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIExpc3RlbiB0byB0aGUgZm9sbG93aW5nIGV2ZW50cyB0byB0cmlnZ2VyIFVJIHZhcmlhbnQgcmVzb2x1dGlvblxyXG4gICAgICAgIGlmIChjb25maWcuYXV0b1VpVmFyaWFudFJlc29sdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5hZGRFdmVudEhhbmRsZXIodGhpcy5wbGF5ZXIuRVZFTlQuT05fUkVBRFksIHJlc29sdmVVaVZhcmlhbnQpO1xyXG4gICAgICAgICAgICB0aGlzLm1hbmFnZXJQbGF5ZXJXcmFwcGVyLmdldFBsYXllcigpLmFkZEV2ZW50SGFuZGxlcih0aGlzLnBsYXllci5FVkVOVC5PTl9QTEFZLCByZXNvbHZlVWlWYXJpYW50KTtcclxuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5hZGRFdmVudEhhbmRsZXIodGhpcy5wbGF5ZXIuRVZFTlQuT05fUEFVU0VELCByZXNvbHZlVWlWYXJpYW50KTtcclxuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5hZGRFdmVudEhhbmRsZXIodGhpcy5wbGF5ZXIuRVZFTlQuT05fQURfU1RBUlRFRCwgcmVzb2x2ZVVpVmFyaWFudCk7XHJcbiAgICAgICAgICAgIHRoaXMubWFuYWdlclBsYXllcldyYXBwZXIuZ2V0UGxheWVyKCkuYWRkRXZlbnRIYW5kbGVyKHRoaXMucGxheWVyLkVWRU5ULk9OX0FEX0ZJTklTSEVELCByZXNvbHZlVWlWYXJpYW50KTtcclxuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5hZGRFdmVudEhhbmRsZXIodGhpcy5wbGF5ZXIuRVZFTlQuT05fQURfU0tJUFBFRCwgcmVzb2x2ZVVpVmFyaWFudCk7XHJcbiAgICAgICAgICAgIHRoaXMubWFuYWdlclBsYXllcldyYXBwZXIuZ2V0UGxheWVyKCkuYWRkRXZlbnRIYW5kbGVyKHRoaXMucGxheWVyLkVWRU5ULk9OX0FEX0VSUk9SLCByZXNvbHZlVWlWYXJpYW50KTtcclxuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyUGxheWVyV3JhcHBlci5nZXRQbGF5ZXIoKS5hZGRFdmVudEhhbmRsZXIodGhpcy5wbGF5ZXIuRVZFTlQuT05fUExBWUVSX1JFU0laRSwgcmVzb2x2ZVVpVmFyaWFudCk7XHJcbiAgICAgICAgICAgIHRoaXMubWFuYWdlclBsYXllcldyYXBwZXIuZ2V0UGxheWVyKCkuYWRkRXZlbnRIYW5kbGVyKHRoaXMucGxheWVyLkVWRU5ULk9OX0ZVTExTQ1JFRU5fRU5URVIsIHJlc29sdmVVaVZhcmlhbnQpO1xyXG4gICAgICAgICAgICB0aGlzLm1hbmFnZXJQbGF5ZXJXcmFwcGVyLmdldFBsYXllcigpLmFkZEV2ZW50SGFuZGxlcih0aGlzLnBsYXllci5FVkVOVC5PTl9GVUxMU0NSRUVOX0VYSVQsIHJlc29sdmVVaVZhcmlhbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBVSVxyXG4gICAgICAgIHJlc29sdmVVaVZhcmlhbnQobnVsbCk7XHJcbiAgICB9XHJcbiAgICBVSU1hbmFnZXIucHJvdG90eXBlLmdldENvbmZpZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWc7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIFVJIHZhcmlhbnRzIGFzIHBhc3NlZCBpbnRvIHRoZSBjb25zdHJ1Y3RvciBvZiB7QGxpbmsgVUlNYW5hZ2VyfS5cclxuICAgICAqIEByZXR1cm5zIHtVSVZhcmlhbnRbXX0gdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIFVJIHZhcmlhbnRzXHJcbiAgICAgKi9cclxuICAgIFVJTWFuYWdlci5wcm90b3R5cGUuZ2V0VWlWYXJpYW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51aVZhcmlhbnRzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3dpdGNoZXMgdG8gYSBVSSB2YXJpYW50IGZyb20gdGhlIGxpc3QgcmV0dXJuZWQgYnkge0BsaW5rIGdldFVpVmFyaWFudHN9LlxyXG4gICAgICogQHBhcmFtIHtVSVZhcmlhbnR9IHVpVmFyaWFudCB0aGUgVUkgdmFyaWFudCB0byBzd2l0Y2ggdG9cclxuICAgICAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gb25TaG93IGEgY2FsbGJhY2sgdGhhdCBpcyBleGVjdXRlZCBqdXN0IGJlZm9yZSB0aGUgbmV3IFVJIHZhcmlhbnQgaXMgc2hvd25cclxuICAgICAqL1xyXG4gICAgVUlNYW5hZ2VyLnByb3RvdHlwZS5zd2l0Y2hUb1VpVmFyaWFudCA9IGZ1bmN0aW9uICh1aVZhcmlhbnQsIG9uU2hvdykge1xyXG4gICAgICAgIHZhciB1aVZhcmlhbnRJbmRleCA9IHRoaXMudWlWYXJpYW50cy5pbmRleE9mKHVpVmFyaWFudCk7XHJcbiAgICAgICAgdmFyIG5leHRVaSA9IHRoaXMudWlJbnN0YW5jZU1hbmFnZXJzW3VpVmFyaWFudEluZGV4XTtcclxuICAgICAgICB2YXIgdWlWYXJpYW50Q2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIERldGVybWluZSBpZiB0aGUgVUkgdmFyaWFudCBpcyBjaGFuZ2luZ1xyXG4gICAgICAgIGlmIChuZXh0VWkgIT09IHRoaXMuY3VycmVudFVpKSB7XHJcbiAgICAgICAgICAgIHVpVmFyaWFudENoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc3dpdGNoZWQgZnJvbSAnLCB0aGlzLmN1cnJlbnRVaSA/IHRoaXMuY3VycmVudFVpLmdldFVJKCkgOiAnbm9uZScsXHJcbiAgICAgICAgICAgIC8vICAgJyB0byAnLCBuZXh0VWkgPyBuZXh0VWkuZ2V0VUkoKSA6ICdub25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE9ubHkgaWYgdGhlIFVJIHZhcmlhbnQgaXMgY2hhbmdpbmcsIHdlIG5lZWQgdG8gZG8gc29tZSBzdHVmZi4gRWxzZSB3ZSBqdXN0IGxlYXZlIGV2ZXJ5dGhpbmcgYXMtaXMuXHJcbiAgICAgICAgaWYgKHVpVmFyaWFudENoYW5nZWQpIHtcclxuICAgICAgICAgICAgLy8gSGlkZSB0aGUgY3VycmVudGx5IGFjdGl2ZSBVSSB2YXJpYW50XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRVaSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VWkuZ2V0VUkoKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQXNzaWduIHRoZSBuZXcgVUkgdmFyaWFudCBhcyBjdXJyZW50IFVJXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFVpID0gbmV4dFVpO1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIHN3aXRjaCB0byBhIGRpZmZlcmVudCBVSSBpbnN0YW5jZSwgdGhlcmUncyBzb21lIGFkZGl0aW9uYWwgc3R1ZmYgdG8gbWFuYWdlLiBJZiB3ZSBkbyBub3Qgc3dpdGNoXHJcbiAgICAgICAgICAgIC8vIHRvIGFuIGluc3RhbmNlLCB3ZSdyZSBkb25lIGhlcmUuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRVaSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIFVJIHRvIHRoZSBET00gKGFuZCBjb25maWd1cmUgaXQpIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudFVpLmlzQ29uZmlndXJlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRVaSh0aGlzLmN1cnJlbnRVaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob25TaG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25TaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRVaS5nZXRVSSgpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRyaWdnZXJzIGEgVUkgdmFyaWFudCBzd2l0Y2ggYXMgdHJpZ2dlcmVkIGJ5IGV2ZW50cyB3aGVuIGF1dG9tYXRpYyBzd2l0Y2hpbmcgaXMgZW5hYmxlZC4gSXQgYWxsb3dzIHRvIG92ZXJ3cml0ZVxyXG4gICAgICogcHJvcGVydGllcyBvZiB0aGUge0BsaW5rIFVJQ29uZGl0aW9uQ29udGV4dH0uXHJcbiAgICAgKiBAcGFyYW0ge1BhcnRpYWw8VUlDb25kaXRpb25Db250ZXh0Pn0gY29udGV4dCBhbiBvcHRpb25hbCBzZXQgb2YgcHJvcGVydGllcyB0aGF0IG92ZXJ3cml0ZSBwcm9wZXJ0aWVzIG9mIHRoZVxyXG4gICAgICogICBhdXRvbWF0aWNhbGx5IGRldGVybWluZWQgY29udGV4dFxyXG4gICAgICogQHBhcmFtIHsoY29udGV4dDogVUlDb25kaXRpb25Db250ZXh0KSA9PiB2b2lkfSBvblNob3cgYSBjYWxsYmFjayB0aGF0IGlzIGV4ZWN1dGVkIGp1c3QgYmVmb3JlIHRoZSBuZXcgVUkgdmFyaWFudFxyXG4gICAgICogICBpcyBzaG93biAoaWYgYSBzd2l0Y2ggaXMgaGFwcGVuaW5nKVxyXG4gICAgICovXHJcbiAgICBVSU1hbmFnZXIucHJvdG90eXBlLnJlc29sdmVVaVZhcmlhbnQgPSBmdW5jdGlvbiAoY29udGV4dCwgb25TaG93KSB7XHJcbiAgICAgICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgeyBjb250ZXh0ID0ge307IH1cclxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGN1cnJlbnQgY29udGV4dCBmb3Igd2hpY2ggdGhlIFVJIHZhcmlhbnQgd2lsbCBiZSByZXNvbHZlZFxyXG4gICAgICAgIHZhciBkZWZhdWx0Q29udGV4dCA9IHtcclxuICAgICAgICAgICAgaXNBZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzQWRXaXRoVUk6IGZhbHNlLFxyXG4gICAgICAgICAgICBhZENsaWVudFR5cGU6IG51bGwsXHJcbiAgICAgICAgICAgIGlzRnVsbHNjcmVlbjogdGhpcy5wbGF5ZXIuaXNGdWxsc2NyZWVuKCksXHJcbiAgICAgICAgICAgIGlzTW9iaWxlOiBicm93c2VydXRpbHNfMS5Ccm93c2VyVXRpbHMuaXNNb2JpbGUsXHJcbiAgICAgICAgICAgIGlzUGxheWluZzogdGhpcy5wbGF5ZXIuaXNQbGF5aW5nKCksXHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnVpQ29udGFpbmVyRWxlbWVudC53aWR0aCgpLFxyXG4gICAgICAgICAgICBkb2N1bWVudFdpZHRoOiBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gT3ZlcndyaXRlIHByb3BlcnRpZXMgb2YgdGhlIGRlZmF1bHQgY29udGV4dCB3aXRoIHBhc3NlZCBpbiBjb250ZXh0IHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgc3dpdGNoaW5nQ29udGV4dCA9IF9fYXNzaWduKHt9LCBkZWZhdWx0Q29udGV4dCwgY29udGV4dCk7XHJcbiAgICAgICAgLy8gRmlyZSB0aGUgZXZlbnQgYW5kIGFsbG93IG1vZGlmaWNhdGlvbiBvZiB0aGUgY29udGV4dCBiZWZvcmUgaXQgaXMgdXNlZCB0byByZXNvbHZlIHRoZSBVSSB2YXJpYW50XHJcbiAgICAgICAgdGhpcy5ldmVudHMub25VaVZhcmlhbnRSZXNvbHZlLmRpc3BhdGNoKHRoaXMsIHN3aXRjaGluZ0NvbnRleHQpO1xyXG4gICAgICAgIHZhciBuZXh0VWlWYXJpYW50ID0gbnVsbDtcclxuICAgICAgICAvLyBTZWxlY3QgbmV3IFVJIHZhcmlhbnRcclxuICAgICAgICAvLyBJZiBubyB2YXJpYW50IGNvbmRpdGlvbiBpcyBmdWxmaWxsZWQsIHdlIHN3aXRjaCB0byAqbm8qIFVJXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMudWlWYXJpYW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHVpVmFyaWFudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKHVpVmFyaWFudC5jb25kaXRpb24gPT0gbnVsbCB8fCB1aVZhcmlhbnQuY29uZGl0aW9uKHN3aXRjaGluZ0NvbnRleHQpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0VWlWYXJpYW50ID0gdWlWYXJpYW50O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hUb1VpVmFyaWFudChuZXh0VWlWYXJpYW50LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvblNob3cpIHtcclxuICAgICAgICAgICAgICAgIG9uU2hvdyhzd2l0Y2hpbmdDb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFVJTWFuYWdlci5wcm90b3R5cGUuYWRkVWkgPSBmdW5jdGlvbiAodWkpIHtcclxuICAgICAgICB2YXIgZG9tID0gdWkuZ2V0VUkoKS5nZXREb21FbGVtZW50KCk7XHJcbiAgICAgICAgdmFyIHBsYXllciA9IHVpLmdldFdyYXBwZWRQbGF5ZXIoKTtcclxuICAgICAgICB1aS5jb25maWd1cmVDb250cm9scygpO1xyXG4gICAgICAgIC8qIEFwcGVuZCB0aGUgVUkgRE9NIGFmdGVyIGNvbmZpZ3VyYXRpb24gdG8gYXZvaWQgQ1NTIHRyYW5zaXRpb25zIGF0IGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgICogRXhhbXBsZTogQ29tcG9uZW50cyBhcmUgaGlkZGVuIGR1cmluZyBjb25maWd1cmF0aW9uIGFuZCB0aGVzZSBoaWRlcyBtYXkgdHJpZ2dlciBDU1MgdHJhbnNpdGlvbnMgdGhhdCBhcmVcclxuICAgICAgICAgKiB1bmRlc2lyYWJsZSBhdCB0aGlzIHRpbWUuICovXHJcbiAgICAgICAgdGhpcy51aUNvbnRhaW5lckVsZW1lbnQuYXBwZW5kKGRvbSk7XHJcbiAgICAgICAgLy8gU29tZSBjb21wb25lbnRzIGluaXRpYWxpemUgdGhlaXIgc3RhdGUgb24gT05fUkVBRFkuIFdoZW4gdGhlIFVJIGlzIGxvYWRlZCBhZnRlciB0aGUgcGxheWVyIGlzIGFscmVhZHkgcmVhZHksXHJcbiAgICAgICAgLy8gdGhleSB3aWxsIG5ldmVyIHJlY2VpdmUgdGhlIGV2ZW50IHNvIHdlIGZpcmUgaXQgZnJvbSBoZXJlIGluIHN1Y2ggY2FzZXMuXHJcbiAgICAgICAgaWYgKHBsYXllci5pc1JlYWR5KCkpIHtcclxuICAgICAgICAgICAgcGxheWVyLmZpcmVFdmVudEluVUkocGxheWVyLkVWRU5ULk9OX1JFQURZLCB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEZpcmUgb25Db25maWd1cmVkIGFmdGVyIFVJIERPTSBlbGVtZW50cyBhcmUgc3VjY2Vzc2Z1bGx5IGFkZGVkLiBXaGVuIGZpcmVkIGltbWVkaWF0ZWx5LCB0aGUgRE9NIGVsZW1lbnRzXHJcbiAgICAgICAgLy8gbWlnaHQgbm90IGJlIGZ1bGx5IGNvbmZpZ3VyZWQgYW5kIGUuZy4gZG8gbm90IGhhdmUgYSBzaXplLlxyXG4gICAgICAgIC8vIGh0dHBzOi8vc3dpemVjLmNvbS9ibG9nL2hvdy10by1wcm9wZXJseS13YWl0LWZvci1kb20tZWxlbWVudHMtdG8tc2hvdy11cC1pbi1tb2Rlcm4tYnJvd3NlcnMvc3dpemVjLzY2NjNcclxuICAgICAgICBpZiAod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgeyB1aS5vbkNvbmZpZ3VyZWQuZGlzcGF0Y2godWkuZ2V0VUkoKSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSUU5IGZhbGxiYWNrXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB1aS5vbkNvbmZpZ3VyZWQuZGlzcGF0Y2godWkuZ2V0VUkoKSk7IH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBVSU1hbmFnZXIucHJvdG90eXBlLnJlbGVhc2VVaSA9IGZ1bmN0aW9uICh1aSkge1xyXG4gICAgICAgIHVpLnJlbGVhc2VDb250cm9scygpO1xyXG4gICAgICAgIHVpLmdldFVJKCkuZ2V0RG9tRWxlbWVudCgpLnJlbW92ZSgpO1xyXG4gICAgICAgIHVpLmNsZWFyRXZlbnRIYW5kbGVycygpO1xyXG4gICAgfTtcclxuICAgIFVJTWFuYWdlci5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy51aUluc3RhbmNlTWFuYWdlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB1aUluc3RhbmNlTWFuYWdlciA9IF9hW19pXTtcclxuICAgICAgICAgICAgdGhpcy5yZWxlYXNlVWkodWlJbnN0YW5jZU1hbmFnZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1hbmFnZXJQbGF5ZXJXcmFwcGVyLmNsZWFyRXZlbnRIYW5kbGVycygpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSU1hbmFnZXIucHJvdG90eXBlLCBcIm9uVWlWYXJpYW50UmVzb2x2ZVwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlyZXMganVzdCBiZWZvcmUgVUkgdmFyaWFudHMgYXJlIGFib3V0IHRvIGJlIHJlc29sdmVkIGFuZCB0aGUgVUkgdmFyaWFudCBpcyBwb3NzaWJseSBzd2l0Y2hlZC4gSXQgaXMgZmlyZWQgd2hlblxyXG4gICAgICAgICAqIHRoZSBzd2l0Y2ggaXMgdHJpZ2dlcmVkIGZyb20gYW4gYXV0b21hdGljIHN3aXRjaCBhbmQgd2hlbiBjYWxsaW5nIHtAbGluayByZXNvbHZlVWlWYXJpYW50fS5cclxuICAgICAgICAgKiBDYW4gYmUgdXNlZCB0byBtb2RpZnkgdGhlIHtAbGluayBVSUNvbmRpdGlvbkNvbnRleHR9IGJlZm9yZSByZXNvbHZpbmcgaXMgZG9uZS5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnREaXNwYXRjaGVyPFVJTWFuYWdlciwgVUlDb25kaXRpb25Db250ZXh0Pn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uVWlWYXJpYW50UmVzb2x2ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBhbGwgYWRkZWQgbWFya2VycyBpbiB1bmRlZmluZWQgb3JkZXIuXHJcbiAgICAgKi9cclxuICAgIFVJTWFuYWdlci5wcm90b3R5cGUuZ2V0VGltZWxpbmVNYXJrZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5tZXRhZGF0YS5tYXJrZXJzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIG1hcmtlciB0byB0aGUgdGltZWxpbmUuIERvZXMgbm90IGNoZWNrIGZvciBkdXBsaWNhdGVzL292ZXJsYXBzIGF0IHRoZSBgdGltZWAuXHJcbiAgICAgKi9cclxuICAgIFVJTWFuYWdlci5wcm90b3R5cGUuYWRkVGltZWxpbmVNYXJrZXIgPSBmdW5jdGlvbiAodGltZWxpbmVNYXJrZXIpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZy5tZXRhZGF0YS5tYXJrZXJzLnB1c2godGltZWxpbmVNYXJrZXIpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLmV2ZW50cy5vblVwZGF0ZWQuZGlzcGF0Y2godGhpcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGEgbWFya2VyIGZyb20gdGhlIHRpbWVsaW5lIChieSByZWZlcmVuY2UpIGFuZCByZXR1cm5zIGB0cnVlYCBpZiB0aGUgbWFya2VyIGhhc1xyXG4gICAgICogYmVlbiBwYXJ0IG9mIHRoZSB0aW1lbGluZSBhbmQgc3VjY2Vzc2Z1bGx5IHJlbW92ZWQsIG9yIGBmYWxzZWAgaWYgdGhlIG1hcmtlciBjb3VsZCBub3RcclxuICAgICAqIGJlIGZvdW5kIGFuZCB0aHVzIG5vdCByZW1vdmVkLlxyXG4gICAgICovXHJcbiAgICBVSU1hbmFnZXIucHJvdG90eXBlLnJlbW92ZVRpbWVsaW5lTWFya2VyID0gZnVuY3Rpb24gKHRpbWVsaW5lTWFya2VyKSB7XHJcbiAgICAgICAgaWYgKGFycmF5dXRpbHNfMS5BcnJheVV0aWxzLnJlbW92ZSh0aGlzLmNvbmZpZy5tZXRhZGF0YS5tYXJrZXJzLCB0aW1lbGluZU1hcmtlcikgPT09IHRpbWVsaW5lTWFya2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmV2ZW50cy5vblVwZGF0ZWQuZGlzcGF0Y2godGhpcyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFVJTWFuYWdlcjtcclxufSgpKTtcclxuZXhwb3J0cy5VSU1hbmFnZXIgPSBVSU1hbmFnZXI7XHJcbihmdW5jdGlvbiAoVUlNYW5hZ2VyKSB7XHJcbiAgICB2YXIgRmFjdG9yeTtcclxuICAgIChmdW5jdGlvbiAoRmFjdG9yeSkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkQXVkaW9WaWRlb1VJKHBsYXllciwgY29uZmlnKSB7XHJcbiAgICAgICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgICAgICB2YXIgc21hbGxTY3JlZW5Td2l0Y2hXaWR0aCA9IDYwMDtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVSU1hbmFnZXIocGxheWVyLCBbe1xyXG4gICAgICAgICAgICAgICAgICAgIHVpOiBtb2Rlcm5TbWFsbFNjcmVlblVJKCksXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uOiBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5pc01vYmlsZSAmJiBjb250ZXh0LmRvY3VtZW50V2lkdGggPCBzbWFsbFNjcmVlblN3aXRjaFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdWk6IG1vZGVyblVJKCksXHJcbiAgICAgICAgICAgICAgICB9XSwgY29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgRmFjdG9yeS5idWlsZEF1ZGlvVmlkZW9VSSA9IGJ1aWxkQXVkaW9WaWRlb1VJO1xyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkQXVkaW9Pbmx5VUkocGxheWVyLCBjb25maWcpIHtcclxuICAgICAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgICAgIHZhciBzbWFsbFNjcmVlblN3aXRjaFdpZHRoID0gNjAwO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVJTWFuYWdlcihwbGF5ZXIsIFt7XHJcbiAgICAgICAgICAgICAgICAgICAgdWk6IG1vZGVybkF1ZGlvT25seVNtYWxsU2NyZWVuVUkoKSxcclxuICAgICAgICAgICAgICAgICAgICBjb25kaXRpb246IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmlzTW9iaWxlICYmIGNvbnRleHQuZG9jdW1lbnRXaWR0aCA8IHNtYWxsU2NyZWVuU3dpdGNoV2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICB1aTogbW9kZXJuQXVkaW9Pbmx5VUkoKSxcclxuICAgICAgICAgICAgICAgIH1dLCBjb25maWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBGYWN0b3J5LmJ1aWxkQXVkaW9Pbmx5VUkgPSBidWlsZEF1ZGlvT25seVVJO1xyXG4gICAgICAgIC8vIGV4cG9ydCBmdW5jdGlvbiBidWlsZERlZmF1bHRVSShwbGF5ZXI6IFBsYXllckFQSSwgY29uZmlnOiBVSUNvbmZpZyA9IHt9KTogVUlNYW5hZ2VyIHtcclxuICAgICAgICAvLyAgIHJldHVybiBVSU1hbmFnZXIuRmFjdG9yeS5idWlsZE1vZGVyblVJKHBsYXllciwgY29uZmlnKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRGVmYXVsdFNtYWxsU2NyZWVuVUkocGxheWVyOiBQbGF5ZXJBUEksIGNvbmZpZzogVUlDb25maWcgPSB7fSk6IFVJTWFuYWdlciB7XHJcbiAgICAgICAgLy8gICByZXR1cm4gVUlNYW5hZ2VyLkZhY3RvcnkuYnVpbGRNb2Rlcm5TbWFsbFNjcmVlblVJKHBsYXllciwgY29uZmlnKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRGVmYXVsdENhc3RSZWNlaXZlclVJKHBsYXllcjogUGxheWVyQVBJLCBjb25maWc6IFVJQ29uZmlnID0ge30pOiBVSU1hbmFnZXIge1xyXG4gICAgICAgIC8vICAgcmV0dXJuIFVJTWFuYWdlci5GYWN0b3J5LmJ1aWxkTW9kZXJuQ2FzdFJlY2VpdmVyVUkocGxheWVyLCBjb25maWcpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBmdW5jdGlvbiBtb2Rlcm5VSSgpIHtcclxuICAgICAgICAgICAgdmFyIHN1YnRpdGxlT3ZlcmxheSA9IG5ldyBzdWJ0aXRsZW92ZXJsYXlfMS5TdWJ0aXRsZU92ZXJsYXkoKTtcclxuICAgICAgICAgICAgdmFyIHNldHRpbmdzUGFuZWwgPSBuZXcgc2V0dGluZ3NwYW5lbF8xLlNldHRpbmdzUGFuZWwoe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ1ZpZGVvIFF1YWxpdHknLCBuZXcgdmlkZW9xdWFsaXR5c2VsZWN0Ym94XzEuVmlkZW9RdWFsaXR5U2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ1NwZWVkJywgbmV3IHBsYXliYWNrc3BlZWRzZWxlY3Rib3hfMS5QbGF5YmFja1NwZWVkU2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ0F1ZGlvIFRyYWNrJywgbmV3IGF1ZGlvdHJhY2tzZWxlY3Rib3hfMS5BdWRpb1RyYWNrU2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ0F1ZGlvIFF1YWxpdHknLCBuZXcgYXVkaW9xdWFsaXR5c2VsZWN0Ym94XzEuQXVkaW9RdWFsaXR5U2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBzdWJ0aXRsZVNldHRpbmdzUGFuZWwgPSBuZXcgc3VidGl0bGVzZXR0aW5nc3BhbmVsXzEuU3VidGl0bGVTZXR0aW5nc1BhbmVsKHtcclxuICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG92ZXJsYXk6IHN1YnRpdGxlT3ZlcmxheSxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzUGFuZWw6IHNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgc3VidGl0bGVTZXR0aW5nc09wZW5CdXR0b24gPSBuZXcgc3VidGl0bGVzZXR0aW5nc29wZW5idXR0b25fMS5TdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZVNldHRpbmdzUGFuZWw6IHN1YnRpdGxlU2V0dGluZ3NQYW5lbCxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzUGFuZWw6IHNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZXR0aW5nc1BhbmVsLmFkZENvbXBvbmVudChuZXcgc2V0dGluZ3NwYW5lbF8xLlNldHRpbmdzUGFuZWxJdGVtKG5ldyBzdWJ0aXRsZXNldHRpbmdzbGFiZWxfMS5TdWJ0aXRsZVNldHRpbmdzTGFiZWwoeyB0ZXh0OiAnU3VidGl0bGVzJywgb3BlbmVyOiBzdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbiB9KSwgbmV3IHN1YnRpdGxlc2VsZWN0Ym94XzEuU3VidGl0bGVTZWxlY3RCb3goKSkpO1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbEJhciA9IG5ldyBjb250cm9sYmFyXzEuQ29udHJvbEJhcih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NQYW5lbCxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZVNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGNvbnRhaW5lcl8xLkNvbnRhaW5lcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBwbGF5YmFja3RpbWVsYWJlbF8xLlBsYXliYWNrVGltZUxhYmVsKHsgdGltZUxhYmVsTW9kZTogcGxheWJhY2t0aW1lbGFiZWxfMS5QbGF5YmFja1RpbWVMYWJlbE1vZGUuQ3VycmVudFRpbWUsIGhpZGVJbkxpdmVQbGF5YmFjazogdHJ1ZSB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBzZWVrYmFyXzEuU2Vla0Jhcih7IGxhYmVsOiBuZXcgc2Vla2JhcmxhYmVsXzEuU2Vla0JhckxhYmVsKCkgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgcGxheWJhY2t0aW1lbGFiZWxfMS5QbGF5YmFja1RpbWVMYWJlbCh7IHRpbWVMYWJlbE1vZGU6IHBsYXliYWNrdGltZWxhYmVsXzEuUGxheWJhY2tUaW1lTGFiZWxNb2RlLlRvdGFsVGltZSwgY3NzQ2xhc3NlczogWyd0ZXh0LXJpZ2h0J10gfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzZXM6IFsnY29udHJvbGJhci10b3AnXSxcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgY29udGFpbmVyXzEuQ29udGFpbmVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHBsYXliYWNrdG9nZ2xlYnV0dG9uXzEuUGxheWJhY2tUb2dnbGVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyB2b2x1bWV0b2dnbGVidXR0b25fMS5Wb2x1bWVUb2dnbGVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyB2b2x1bWVzbGlkZXJfMS5Wb2x1bWVTbGlkZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBzcGFjZXJfMS5TcGFjZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBwaWN0dXJlaW5waWN0dXJldG9nZ2xlYnV0dG9uXzEuUGljdHVyZUluUGljdHVyZVRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGFpcnBsYXl0b2dnbGVidXR0b25fMS5BaXJQbGF5VG9nZ2xlQnV0dG9uKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgY2FzdHRvZ2dsZWJ1dHRvbl8xLkNhc3RUb2dnbGVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyB2cnRvZ2dsZWJ1dHRvbl8xLlZSVG9nZ2xlQnV0dG9uKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgc2V0dGluZ3N0b2dnbGVidXR0b25fMS5TZXR0aW5nc1RvZ2dsZUJ1dHRvbih7IHNldHRpbmdzUGFuZWw6IHNldHRpbmdzUGFuZWwgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvbl8xLkZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3NlczogWydjb250cm9sYmFyLWJvdHRvbSddLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgdWljb250YWluZXJfMS5VSUNvbnRhaW5lcih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGVPdmVybGF5LFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBidWZmZXJpbmdvdmVybGF5XzEuQnVmZmVyaW5nT3ZlcmxheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBwbGF5YmFja3RvZ2dsZW92ZXJsYXlfMS5QbGF5YmFja1RvZ2dsZU92ZXJsYXkoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgY2FzdHN0YXR1c292ZXJsYXlfMS5DYXN0U3RhdHVzT3ZlcmxheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xCYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbmV3IFRpdGxlQmFyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHJlY29tbWVuZGF0aW9ub3ZlcmxheV8xLlJlY29tbWVuZGF0aW9uT3ZlcmxheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5ldyBXYXRlcm1hcmsoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgZXJyb3JtZXNzYWdlb3ZlcmxheV8xLkVycm9yTWVzc2FnZU92ZXJsYXkoKSxcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBjc3NDbGFzc2VzOiBbJ3VpLXNraW4tbWktd2JjJ10sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBtb2Rlcm5BdWRpb09ubHlVSSgpIHtcclxuICAgICAgICAgICAgdmFyIHN1YnRpdGxlT3ZlcmxheSA9IG5ldyBzdWJ0aXRsZW92ZXJsYXlfMS5TdWJ0aXRsZU92ZXJsYXkoKTtcclxuICAgICAgICAgICAgdmFyIHNldHRpbmdzUGFuZWwgPSBuZXcgc2V0dGluZ3NwYW5lbF8xLlNldHRpbmdzUGFuZWwoe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ1NwZWVkJywgbmV3IHBsYXliYWNrc3BlZWRzZWxlY3Rib3hfMS5QbGF5YmFja1NwZWVkU2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ0F1ZGlvIFRyYWNrJywgbmV3IGF1ZGlvdHJhY2tzZWxlY3Rib3hfMS5BdWRpb1RyYWNrU2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ0F1ZGlvIFF1YWxpdHknLCBuZXcgYXVkaW9xdWFsaXR5c2VsZWN0Ym94XzEuQXVkaW9RdWFsaXR5U2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBzdWJ0aXRsZVNldHRpbmdzUGFuZWwgPSBuZXcgc3VidGl0bGVzZXR0aW5nc3BhbmVsXzEuU3VidGl0bGVTZXR0aW5nc1BhbmVsKHtcclxuICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG92ZXJsYXk6IHN1YnRpdGxlT3ZlcmxheSxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzUGFuZWw6IHNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgc3VidGl0bGVTZXR0aW5nc09wZW5CdXR0b24gPSBuZXcgc3VidGl0bGVzZXR0aW5nc29wZW5idXR0b25fMS5TdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZVNldHRpbmdzUGFuZWw6IHN1YnRpdGxlU2V0dGluZ3NQYW5lbCxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzUGFuZWw6IHNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZXR0aW5nc1BhbmVsLmFkZENvbXBvbmVudChuZXcgc2V0dGluZ3NwYW5lbF8xLlNldHRpbmdzUGFuZWxJdGVtKG5ldyBzdWJ0aXRsZXNldHRpbmdzbGFiZWxfMS5TdWJ0aXRsZVNldHRpbmdzTGFiZWwoeyB0ZXh0OiAnU3VidGl0bGVzJywgb3BlbmVyOiBzdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbiB9KSwgbmV3IHN1YnRpdGxlc2VsZWN0Ym94XzEuU3VidGl0bGVTZWxlY3RCb3goKSkpO1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbEJhciA9IG5ldyBjb250cm9sYmFyXzEuQ29udHJvbEJhcih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NQYW5lbCxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZVNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGNvbnRhaW5lcl8xLkNvbnRhaW5lcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBwbGF5YmFja3RpbWVsYWJlbF8xLlBsYXliYWNrVGltZUxhYmVsKHsgdGltZUxhYmVsTW9kZTogcGxheWJhY2t0aW1lbGFiZWxfMS5QbGF5YmFja1RpbWVMYWJlbE1vZGUuQ3VycmVudFRpbWUsIGhpZGVJbkxpdmVQbGF5YmFjazogdHJ1ZSB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBzZWVrYmFyXzEuU2Vla0Jhcih7IGxhYmVsOiBuZXcgc2Vla2JhcmxhYmVsXzEuU2Vla0JhckxhYmVsKCkgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgcGxheWJhY2t0aW1lbGFiZWxfMS5QbGF5YmFja1RpbWVMYWJlbCh7IHRpbWVMYWJlbE1vZGU6IHBsYXliYWNrdGltZWxhYmVsXzEuUGxheWJhY2tUaW1lTGFiZWxNb2RlLlRvdGFsVGltZSwgY3NzQ2xhc3NlczogWyd0ZXh0LXJpZ2h0J10gfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzZXM6IFsnY29udHJvbGJhci10b3AnXSxcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgY29udGFpbmVyXzEuQ29udGFpbmVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHBsYXliYWNrdG9nZ2xlYnV0dG9uXzEuUGxheWJhY2tUb2dnbGVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyB2b2x1bWV0b2dnbGVidXR0b25fMS5Wb2x1bWVUb2dnbGVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyB2b2x1bWVzbGlkZXJfMS5Wb2x1bWVTbGlkZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBzcGFjZXJfMS5TcGFjZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBhaXJwbGF5dG9nZ2xlYnV0dG9uXzEuQWlyUGxheVRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGNhc3R0b2dnbGVidXR0b25fMS5DYXN0VG9nZ2xlQnV0dG9uKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgc2V0dGluZ3N0b2dnbGVidXR0b25fMS5TZXR0aW5nc1RvZ2dsZUJ1dHRvbih7IHNldHRpbmdzUGFuZWw6IHNldHRpbmdzUGFuZWwgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgZnVsbHNjcmVlbnRvZ2dsZWJ1dHRvbl8xLkZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3NlczogWydjb250cm9sYmFyLWJvdHRvbSddLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgdWljb250YWluZXJfMS5VSUNvbnRhaW5lcih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGF1ZGlvb25seW92ZXJsYXlfMS5BdWRpb09ubHlPdmVybGF5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGVPdmVybGF5LFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBidWZmZXJpbmdvdmVybGF5XzEuQnVmZmVyaW5nT3ZlcmxheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBwbGF5YmFja3RvZ2dsZW92ZXJsYXlfMS5QbGF5YmFja1RvZ2dsZU92ZXJsYXkoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgY2FzdHN0YXR1c292ZXJsYXlfMS5DYXN0U3RhdHVzT3ZlcmxheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xCYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbmV3IFRpdGxlQmFyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHJlY29tbWVuZGF0aW9ub3ZlcmxheV8xLlJlY29tbWVuZGF0aW9uT3ZlcmxheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5ldyBXYXRlcm1hcmsoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgZXJyb3JtZXNzYWdlb3ZlcmxheV8xLkVycm9yTWVzc2FnZU92ZXJsYXkoKSxcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBjc3NDbGFzc2VzOiBbJ3VpLXNraW4tbWktd2JjJ10sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBmdW5jdGlvbiBtb2Rlcm5BZHNVSSgpIHtcclxuICAgICAgICAvLyAgIHJldHVybiBuZXcgVUlDb250YWluZXIoe1xyXG4gICAgICAgIC8vICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgbmV3IEJ1ZmZlcmluZ092ZXJsYXkoKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgQWRDbGlja092ZXJsYXkoKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgUGxheWJhY2tUb2dnbGVPdmVybGF5KCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IENvbnRhaW5lcih7XHJcbiAgICAgICAgLy8gICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgICAgIG5ldyBBZE1lc3NhZ2VMYWJlbCh7IHRleHQ6ICdBZDoge3JlbWFpbmluZ1RpbWV9IHNlY3MnIH0pLFxyXG4gICAgICAgIC8vICAgICAgICAgICBuZXcgQWRTa2lwQnV0dG9uKCksXHJcbiAgICAgICAgLy8gICAgICAgICBdLFxyXG4gICAgICAgIC8vICAgICAgICAgY3NzQ2xhc3M6ICd1aS1hZHMtc3RhdHVzJyxcclxuICAgICAgICAvLyAgICAgICB9KSxcclxuICAgICAgICAvLyAgICAgICBuZXcgQ29udHJvbEJhcih7XHJcbiAgICAgICAgLy8gICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgICAgIG5ldyBDb250YWluZXIoe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgIG5ldyBQbGF5YmFja1RvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgbmV3IFZvbHVtZVRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgbmV3IFZvbHVtZVNsaWRlcigpLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgbmV3IFNwYWNlcigpLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgbmV3IEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24oKSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBdLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGNzc0NsYXNzZXM6IFsnY29udHJvbGJhci1ib3R0b20nXSxcclxuICAgICAgICAvLyAgICAgICAgICAgfSksXHJcbiAgICAgICAgLy8gICAgICAgICBdLFxyXG4gICAgICAgIC8vICAgICAgIH0pLFxyXG4gICAgICAgIC8vICAgICBdLFxyXG4gICAgICAgIC8vICAgICBjc3NDbGFzc2VzOiBbJ3VpLXNraW4tbWktd2JjJywgJ3VpLXNraW4tYWRzJ10sXHJcbiAgICAgICAgLy8gICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgZnVuY3Rpb24gbW9kZXJuU21hbGxTY3JlZW5VSSgpIHtcclxuICAgICAgICAgICAgdmFyIHN1YnRpdGxlT3ZlcmxheSA9IG5ldyBzdWJ0aXRsZW92ZXJsYXlfMS5TdWJ0aXRsZU92ZXJsYXkoKTtcclxuICAgICAgICAgICAgdmFyIHNldHRpbmdzUGFuZWwgPSBuZXcgc2V0dGluZ3NwYW5lbF8xLlNldHRpbmdzUGFuZWwoe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ1ZpZGVvIFF1YWxpdHknLCBuZXcgdmlkZW9xdWFsaXR5c2VsZWN0Ym94XzEuVmlkZW9RdWFsaXR5U2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ1NwZWVkJywgbmV3IHBsYXliYWNrc3BlZWRzZWxlY3Rib3hfMS5QbGF5YmFja1NwZWVkU2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ0F1ZGlvIFRyYWNrJywgbmV3IGF1ZGlvdHJhY2tzZWxlY3Rib3hfMS5BdWRpb1RyYWNrU2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0oJ0F1ZGlvIFF1YWxpdHknLCBuZXcgYXVkaW9xdWFsaXR5c2VsZWN0Ym94XzEuQXVkaW9RdWFsaXR5U2VsZWN0Qm94KCkpLFxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGhpZGVEZWxheTogLTEsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgc3VidGl0bGVTZXR0aW5nc1BhbmVsID0gbmV3IHN1YnRpdGxlc2V0dGluZ3NwYW5lbF8xLlN1YnRpdGxlU2V0dGluZ3NQYW5lbCh7XHJcbiAgICAgICAgICAgICAgICBoaWRkZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICBoaWRlRGVsYXk6IC0xLFxyXG4gICAgICAgICAgICAgICAgb3ZlcmxheTogc3VidGl0bGVPdmVybGF5LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NQYW5lbDogc2V0dGluZ3NQYW5lbCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBzdWJ0aXRsZVNldHRpbmdzT3BlbkJ1dHRvbiA9IG5ldyBzdWJ0aXRsZXNldHRpbmdzb3BlbmJ1dHRvbl8xLlN1YnRpdGxlU2V0dGluZ3NPcGVuQnV0dG9uKHtcclxuICAgICAgICAgICAgICAgIHN1YnRpdGxlU2V0dGluZ3NQYW5lbDogc3VidGl0bGVTZXR0aW5nc1BhbmVsLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NQYW5lbDogc2V0dGluZ3NQYW5lbCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNldHRpbmdzUGFuZWwuYWRkQ29tcG9uZW50KG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbEl0ZW0obmV3IHN1YnRpdGxlc2V0dGluZ3NsYWJlbF8xLlN1YnRpdGxlU2V0dGluZ3NMYWJlbCh7IHRleHQ6ICdTdWJ0aXRsZXMnLCBvcGVuZXI6IHN1YnRpdGxlU2V0dGluZ3NPcGVuQnV0dG9uIH0pLCBuZXcgc3VidGl0bGVzZWxlY3Rib3hfMS5TdWJ0aXRsZVNlbGVjdEJveCgpKSk7XHJcbiAgICAgICAgICAgIHNldHRpbmdzUGFuZWwuYWRkQ29tcG9uZW50KG5ldyBjbG9zZWJ1dHRvbl8xLkNsb3NlQnV0dG9uKHsgdGFyZ2V0OiBzZXR0aW5nc1BhbmVsIH0pKTtcclxuICAgICAgICAgICAgc3VidGl0bGVTZXR0aW5nc1BhbmVsLmFkZENvbXBvbmVudChuZXcgY2xvc2VidXR0b25fMS5DbG9zZUJ1dHRvbih7IHRhcmdldDogc3VidGl0bGVTZXR0aW5nc1BhbmVsIH0pKTtcclxuICAgICAgICAgICAgdmFyIGNvbnRyb2xCYXIgPSBuZXcgY29udHJvbGJhcl8xLkNvbnRyb2xCYXIoe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBjb250YWluZXJfMS5Db250YWluZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgcGxheWJhY2t0aW1lbGFiZWxfMS5QbGF5YmFja1RpbWVMYWJlbCh7IHRpbWVMYWJlbE1vZGU6IHBsYXliYWNrdGltZWxhYmVsXzEuUGxheWJhY2tUaW1lTGFiZWxNb2RlLkN1cnJlbnRUaW1lLCBoaWRlSW5MaXZlUGxheWJhY2s6IHRydWUgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgc2Vla2Jhcl8xLlNlZWtCYXIoeyBsYWJlbDogbmV3IHNlZWtiYXJsYWJlbF8xLlNlZWtCYXJMYWJlbCgpIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHBsYXliYWNrdGltZWxhYmVsXzEuUGxheWJhY2tUaW1lTGFiZWwoeyB0aW1lTGFiZWxNb2RlOiBwbGF5YmFja3RpbWVsYWJlbF8xLlBsYXliYWNrVGltZUxhYmVsTW9kZS5Ub3RhbFRpbWUsIGNzc0NsYXNzZXM6IFsndGV4dC1yaWdodCddIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3NDbGFzc2VzOiBbJ2NvbnRyb2xiYXItdG9wJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyB1aWNvbnRhaW5lcl8xLlVJQ29udGFpbmVyKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZU92ZXJsYXksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGJ1ZmZlcmluZ292ZXJsYXlfMS5CdWZmZXJpbmdPdmVybGF5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGNhc3RzdGF0dXNvdmVybGF5XzEuQ2FzdFN0YXR1c092ZXJsYXkoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgcGxheWJhY2t0b2dnbGVvdmVybGF5XzEuUGxheWJhY2tUb2dnbGVPdmVybGF5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbEJhcixcclxuICAgICAgICAgICAgICAgICAgICBuZXcgdGl0bGViYXJfMS5UaXRsZUJhcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBtZXRhZGF0YWxhYmVsXzEuTWV0YWRhdGFMYWJlbCh7IGNvbnRlbnQ6IG1ldGFkYXRhbGFiZWxfMS5NZXRhZGF0YUxhYmVsQ29udGVudC5UaXRsZSB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBjYXN0dG9nZ2xlYnV0dG9uXzEuQ2FzdFRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHZydG9nZ2xlYnV0dG9uXzEuVlJUb2dnbGVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyB2b2x1bWV0b2dnbGVidXR0b25fMS5Wb2x1bWVUb2dnbGVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBzZXR0aW5nc3RvZ2dsZWJ1dHRvbl8xLlNldHRpbmdzVG9nZ2xlQnV0dG9uKHsgc2V0dGluZ3NQYW5lbDogc2V0dGluZ3NQYW5lbCB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBmdWxsc2NyZWVudG9nZ2xlYnV0dG9uXzEuRnVsbHNjcmVlblRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGVTZXR0aW5nc1BhbmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyByZWNvbW1lbmRhdGlvbm92ZXJsYXlfMS5SZWNvbW1lbmRhdGlvbk92ZXJsYXkoKSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBuZXcgV2F0ZXJtYXJrKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGVycm9ybWVzc2FnZW92ZXJsYXlfMS5FcnJvck1lc3NhZ2VPdmVybGF5KCksXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3NlczogWyd1aS1za2luLW1pLXdiYycsICd1aS1za2luLXNtYWxsc2NyZWVuJ10sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBtb2Rlcm5BdWRpb09ubHlTbWFsbFNjcmVlblVJKCkge1xyXG4gICAgICAgICAgICB2YXIgc3VidGl0bGVPdmVybGF5ID0gbmV3IHN1YnRpdGxlb3ZlcmxheV8xLlN1YnRpdGxlT3ZlcmxheSgpO1xyXG4gICAgICAgICAgICB2YXIgc2V0dGluZ3NQYW5lbCA9IG5ldyBzZXR0aW5nc3BhbmVsXzEuU2V0dGluZ3NQYW5lbCh7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHNldHRpbmdzcGFuZWxfMS5TZXR0aW5nc1BhbmVsSXRlbSgnU3BlZWQnLCBuZXcgcGxheWJhY2tzcGVlZHNlbGVjdGJveF8xLlBsYXliYWNrU3BlZWRTZWxlY3RCb3goKSksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHNldHRpbmdzcGFuZWxfMS5TZXR0aW5nc1BhbmVsSXRlbSgnQXVkaW8gVHJhY2snLCBuZXcgYXVkaW90cmFja3NlbGVjdGJveF8xLkF1ZGlvVHJhY2tTZWxlY3RCb3goKSksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHNldHRpbmdzcGFuZWxfMS5TZXR0aW5nc1BhbmVsSXRlbSgnQXVkaW8gUXVhbGl0eScsIG5ldyBhdWRpb3F1YWxpdHlzZWxlY3Rib3hfMS5BdWRpb1F1YWxpdHlTZWxlY3RCb3goKSksXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgaGlkZGVuOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaGlkZURlbGF5OiAtMSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBzdWJ0aXRsZVNldHRpbmdzUGFuZWwgPSBuZXcgc3VidGl0bGVzZXR0aW5nc3BhbmVsXzEuU3VidGl0bGVTZXR0aW5nc1BhbmVsKHtcclxuICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGhpZGVEZWxheTogLTEsXHJcbiAgICAgICAgICAgICAgICBvdmVybGF5OiBzdWJ0aXRsZU92ZXJsYXksXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nc1BhbmVsOiBzZXR0aW5nc1BhbmVsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIHN1YnRpdGxlU2V0dGluZ3NPcGVuQnV0dG9uID0gbmV3IHN1YnRpdGxlc2V0dGluZ3NvcGVuYnV0dG9uXzEuU3VidGl0bGVTZXR0aW5nc09wZW5CdXR0b24oe1xyXG4gICAgICAgICAgICAgICAgc3VidGl0bGVTZXR0aW5nc1BhbmVsOiBzdWJ0aXRsZVNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nc1BhbmVsOiBzZXR0aW5nc1BhbmVsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2V0dGluZ3NQYW5lbC5hZGRDb21wb25lbnQobmV3IHNldHRpbmdzcGFuZWxfMS5TZXR0aW5nc1BhbmVsSXRlbShuZXcgc3VidGl0bGVzZXR0aW5nc2xhYmVsXzEuU3VidGl0bGVTZXR0aW5nc0xhYmVsKHsgdGV4dDogJ1N1YnRpdGxlcycsIG9wZW5lcjogc3VidGl0bGVTZXR0aW5nc09wZW5CdXR0b24gfSksIG5ldyBzdWJ0aXRsZXNlbGVjdGJveF8xLlN1YnRpdGxlU2VsZWN0Qm94KCkpKTtcclxuICAgICAgICAgICAgc2V0dGluZ3NQYW5lbC5hZGRDb21wb25lbnQobmV3IGNsb3NlYnV0dG9uXzEuQ2xvc2VCdXR0b24oeyB0YXJnZXQ6IHNldHRpbmdzUGFuZWwgfSkpO1xyXG4gICAgICAgICAgICBzdWJ0aXRsZVNldHRpbmdzUGFuZWwuYWRkQ29tcG9uZW50KG5ldyBjbG9zZWJ1dHRvbl8xLkNsb3NlQnV0dG9uKHsgdGFyZ2V0OiBzdWJ0aXRsZVNldHRpbmdzUGFuZWwgfSkpO1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbEJhciA9IG5ldyBjb250cm9sYmFyXzEuQ29udHJvbEJhcih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IGNvbnRhaW5lcl8xLkNvbnRhaW5lcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBwbGF5YmFja3RpbWVsYWJlbF8xLlBsYXliYWNrVGltZUxhYmVsKHsgdGltZUxhYmVsTW9kZTogcGxheWJhY2t0aW1lbGFiZWxfMS5QbGF5YmFja1RpbWVMYWJlbE1vZGUuQ3VycmVudFRpbWUsIGhpZGVJbkxpdmVQbGF5YmFjazogdHJ1ZSB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBzZWVrYmFyXzEuU2Vla0Jhcih7IGxhYmVsOiBuZXcgc2Vla2JhcmxhYmVsXzEuU2Vla0JhckxhYmVsKCkgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgcGxheWJhY2t0aW1lbGFiZWxfMS5QbGF5YmFja1RpbWVMYWJlbCh7IHRpbWVMYWJlbE1vZGU6IHBsYXliYWNrdGltZWxhYmVsXzEuUGxheWJhY2tUaW1lTGFiZWxNb2RlLlRvdGFsVGltZSwgY3NzQ2xhc3NlczogWyd0ZXh0LXJpZ2h0J10gfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzZXM6IFsnY29udHJvbGJhci10b3AnXSxcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IHVpY29udGFpbmVyXzEuVUlDb250YWluZXIoe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBhdWRpb29ubHlvdmVybGF5XzEuQXVkaW9Pbmx5T3ZlcmxheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlT3ZlcmxheSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgYnVmZmVyaW5nb3ZlcmxheV8xLkJ1ZmZlcmluZ092ZXJsYXkoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgY2FzdHN0YXR1c292ZXJsYXlfMS5DYXN0U3RhdHVzT3ZlcmxheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBwbGF5YmFja3RvZ2dsZW92ZXJsYXlfMS5QbGF5YmFja1RvZ2dsZU92ZXJsYXkoKSxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sQmFyLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyB0aXRsZWJhcl8xLlRpdGxlQmFyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IG1ldGFkYXRhbGFiZWxfMS5NZXRhZGF0YUxhYmVsKHsgY29udGVudDogbWV0YWRhdGFsYWJlbF8xLk1ldGFkYXRhTGFiZWxDb250ZW50LlRpdGxlIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGNhc3R0b2dnbGVidXR0b25fMS5DYXN0VG9nZ2xlQnV0dG9uKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgdnJ0b2dnbGVidXR0b25fMS5WUlRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHZvbHVtZXRvZ2dsZWJ1dHRvbl8xLlZvbHVtZVRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHNldHRpbmdzdG9nZ2xlYnV0dG9uXzEuU2V0dGluZ3NUb2dnbGVCdXR0b24oeyBzZXR0aW5nc1BhbmVsOiBzZXR0aW5nc1BhbmVsIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGZ1bGxzY3JlZW50b2dnbGVidXR0b25fMS5GdWxsc2NyZWVuVG9nZ2xlQnV0dG9uKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NQYW5lbCxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZVNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IHJlY29tbWVuZGF0aW9ub3ZlcmxheV8xLlJlY29tbWVuZGF0aW9uT3ZlcmxheSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5ldyBXYXRlcm1hcmsoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgZXJyb3JtZXNzYWdlb3ZlcmxheV8xLkVycm9yTWVzc2FnZU92ZXJsYXkoKSxcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBjc3NDbGFzc2VzOiBbJ3VpLXNraW4tbWktd2JjJywgJ3VpLXNraW4tc21hbGxzY3JlZW4nXSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZ1bmN0aW9uIG1vZGVyblNtYWxsU2NyZWVuQWRzVUkoKSB7XHJcbiAgICAgICAgLy8gICByZXR1cm4gbmV3IFVJQ29udGFpbmVyKHtcclxuICAgICAgICAvLyAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgIC8vICAgICAgIG5ldyBCdWZmZXJpbmdPdmVybGF5KCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IEFkQ2xpY2tPdmVybGF5KCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFBsYXliYWNrVG9nZ2xlT3ZlcmxheSgpLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBUaXRsZUJhcih7XHJcbiAgICAgICAgLy8gICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgICAgIC8vIGR1bW15IGxhYmVsIHdpdGggbm8gY29udGVudCB0byBtb3ZlIGJ1dHRvbnMgdG8gdGhlIHJpZ2h0XHJcbiAgICAgICAgLy8gICAgICAgICAgIG5ldyBMYWJlbCh7IGNzc0NsYXNzOiAnbGFiZWwtbWV0YWRhdGEtdGl0bGUnIH0pLFxyXG4gICAgICAgIC8vICAgICAgICAgICBuZXcgRnVsbHNjcmVlblRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgIC8vICAgICAgICAgXSxcclxuICAgICAgICAvLyAgICAgICB9KSxcclxuICAgICAgICAvLyAgICAgICBuZXcgQ29udGFpbmVyKHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAvLyAgICAgICAgICAgbmV3IEFkTWVzc2FnZUxhYmVsKHsgdGV4dDogJ0FkOiB7cmVtYWluaW5nVGltZX0gc2VjcycgfSksXHJcbiAgICAgICAgLy8gICAgICAgICAgIG5ldyBBZFNraXBCdXR0b24oKSxcclxuICAgICAgICAvLyAgICAgICAgIF0sXHJcbiAgICAgICAgLy8gICAgICAgICBjc3NDbGFzczogJ3VpLWFkcy1zdGF0dXMnLFxyXG4gICAgICAgIC8vICAgICAgIH0pLFxyXG4gICAgICAgIC8vICAgICBdLFxyXG4gICAgICAgIC8vICAgICBjc3NDbGFzc2VzOiBbJ3VpLXNraW4tbWktd2JjJywgJ3VpLXNraW4tYWRzJywgJ3VpLXNraW4tc21hbGxzY3JlZW4nXSxcclxuICAgICAgICAvLyAgIH0pO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBmdW5jdGlvbiBtb2Rlcm5DYXN0UmVjZWl2ZXJVSSgpIHtcclxuICAgICAgICAvLyAgIGxldCBjb250cm9sQmFyID0gbmV3IENvbnRyb2xCYXIoe1xyXG4gICAgICAgIC8vICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgbmV3IENvbnRhaW5lcih7XHJcbiAgICAgICAgLy8gICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgICAgIG5ldyBQbGF5YmFja1RpbWVMYWJlbCh7IHRpbWVMYWJlbE1vZGU6IFBsYXliYWNrVGltZUxhYmVsTW9kZS5DdXJyZW50VGltZSwgaGlkZUluTGl2ZVBsYXliYWNrOiB0cnVlIH0pLFxyXG4gICAgICAgIC8vICAgICAgICAgICBuZXcgU2Vla0Jhcih7IHNtb290aFBsYXliYWNrUG9zaXRpb25VcGRhdGVJbnRlcnZhbE1zOiAtMSB9KSxcclxuICAgICAgICAvLyAgICAgICAgICAgbmV3IFBsYXliYWNrVGltZUxhYmVsKHsgdGltZUxhYmVsTW9kZTogUGxheWJhY2tUaW1lTGFiZWxNb2RlLlRvdGFsVGltZSwgY3NzQ2xhc3NlczogWyd0ZXh0LXJpZ2h0J10gfSksXHJcbiAgICAgICAgLy8gICAgICAgICBdLFxyXG4gICAgICAgIC8vICAgICAgICAgY3NzQ2xhc3NlczogWydjb250cm9sYmFyLXRvcCddLFxyXG4gICAgICAgIC8vICAgICAgIH0pLFxyXG4gICAgICAgIC8vICAgICBdLFxyXG4gICAgICAgIC8vICAgfSk7XHJcbiAgICAgICAgLy8gICByZXR1cm4gbmV3IENhc3RVSUNvbnRhaW5lcih7XHJcbiAgICAgICAgLy8gICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAvLyAgICAgICBuZXcgU3VidGl0bGVPdmVybGF5KCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IEJ1ZmZlcmluZ092ZXJsYXkoKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgUGxheWJhY2tUb2dnbGVPdmVybGF5KCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFdhdGVybWFyaygpLFxyXG4gICAgICAgIC8vICAgICAgIGNvbnRyb2xCYXIsXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFRpdGxlQmFyKHsga2VlcEhpZGRlbldpdGhvdXRNZXRhZGF0YTogdHJ1ZSB9KSxcclxuICAgICAgICAvLyAgICAgICBuZXcgRXJyb3JNZXNzYWdlT3ZlcmxheSgpLFxyXG4gICAgICAgIC8vICAgICBdLFxyXG4gICAgICAgIC8vICAgICBjc3NDbGFzc2VzOiBbJ3VpLXNraW4tbWktd2JjJywgJ3VpLXNraW4tY2FzdC1yZWNlaXZlciddLFxyXG4gICAgICAgIC8vICAgfSk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGV4cG9ydCBmdW5jdGlvbiBidWlsZE1vZGVyblVJKHBsYXllcjogUGxheWVyQVBJLCBjb25maWc6IFVJQ29uZmlnID0ge30pOiBVSU1hbmFnZXIge1xyXG4gICAgICAgIC8vICAgLy8gc2hvdyBzbWFsbFNjcmVlbiBVSSBvbmx5IG9uIG1vYmlsZS9oYW5kaGVsZCBkZXZpY2VzXHJcbiAgICAgICAgLy8gICBsZXQgc21hbGxTY3JlZW5Td2l0Y2hXaWR0aCA9IDYwMDtcclxuICAgICAgICAvLyAgIHJldHVybiBuZXcgVUlNYW5hZ2VyKHBsYXllciwgW3tcclxuICAgICAgICAvLyAgICAgdWk6IG1vZGVyblNtYWxsU2NyZWVuQWRzVUkoKSxcclxuICAgICAgICAvLyAgICAgY29uZGl0aW9uOiAoY29udGV4dDogVUlDb25kaXRpb25Db250ZXh0KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgcmV0dXJuIGNvbnRleHQuaXNNb2JpbGUgJiYgY29udGV4dC5kb2N1bWVudFdpZHRoIDwgc21hbGxTY3JlZW5Td2l0Y2hXaWR0aCAmJiBjb250ZXh0LmlzQWRXaXRoVUk7XHJcbiAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgLy8gICB9LCB7XHJcbiAgICAgICAgLy8gICAgIHVpOiBtb2Rlcm5BZHNVSSgpLFxyXG4gICAgICAgIC8vICAgICBjb25kaXRpb246IChjb250ZXh0OiBVSUNvbmRpdGlvbkNvbnRleHQpID0+IHtcclxuICAgICAgICAvLyAgICAgICByZXR1cm4gY29udGV4dC5pc0FkV2l0aFVJO1xyXG4gICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgIC8vICAgfSwge1xyXG4gICAgICAgIC8vICAgICB1aTogbW9kZXJuU21hbGxTY3JlZW5VSSgpLFxyXG4gICAgICAgIC8vICAgICBjb25kaXRpb246IChjb250ZXh0OiBVSUNvbmRpdGlvbkNvbnRleHQpID0+IHtcclxuICAgICAgICAvLyAgICAgICByZXR1cm4gY29udGV4dC5pc01vYmlsZSAmJiBjb250ZXh0LmRvY3VtZW50V2lkdGggPCBzbWFsbFNjcmVlblN3aXRjaFdpZHRoO1xyXG4gICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgIC8vICAgfSwge1xyXG4gICAgICAgIC8vICAgICB1aTogbW9kZXJuVUkoKSxcclxuICAgICAgICAvLyAgIH1dLCBjb25maWcpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBleHBvcnQgZnVuY3Rpb24gYnVpbGRNb2Rlcm5TbWFsbFNjcmVlblVJKHBsYXllcjogUGxheWVyQVBJLCBjb25maWc6IFVJQ29uZmlnID0ge30pOiBVSU1hbmFnZXIge1xyXG4gICAgICAgIC8vICAgcmV0dXJuIG5ldyBVSU1hbmFnZXIocGxheWVyLCBbe1xyXG4gICAgICAgIC8vICAgICB1aTogbW9kZXJuU21hbGxTY3JlZW5BZHNVSSgpLFxyXG4gICAgICAgIC8vICAgICBjb25kaXRpb246IChjb250ZXh0OiBVSUNvbmRpdGlvbkNvbnRleHQpID0+IHtcclxuICAgICAgICAvLyAgICAgICByZXR1cm4gY29udGV4dC5pc0FkV2l0aFVJO1xyXG4gICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgIC8vICAgfSwge1xyXG4gICAgICAgIC8vICAgICB1aTogbW9kZXJuU21hbGxTY3JlZW5VSSgpLFxyXG4gICAgICAgIC8vICAgfV0sIGNvbmZpZyk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGV4cG9ydCBmdW5jdGlvbiBidWlsZE1vZGVybkNhc3RSZWNlaXZlclVJKHBsYXllcjogUGxheWVyQVBJLCBjb25maWc6IFVJQ29uZmlnID0ge30pOiBVSU1hbmFnZXIge1xyXG4gICAgICAgIC8vICAgcmV0dXJuIG5ldyBVSU1hbmFnZXIocGxheWVyLCBtb2Rlcm5DYXN0UmVjZWl2ZXJVSSgpLCBjb25maWcpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBmdW5jdGlvbiBsZWdhY3lVSSgpIHtcclxuICAgICAgICAvLyAgIGxldCBzZXR0aW5nc1BhbmVsID0gbmV3IFNldHRpbmdzUGFuZWwoe1xyXG4gICAgICAgIC8vICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFNldHRpbmdzUGFuZWxJdGVtKCdWaWRlbyBRdWFsaXR5JywgbmV3IFZpZGVvUXVhbGl0eVNlbGVjdEJveCgpKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oJ0F1ZGlvIFRyYWNrJywgbmV3IEF1ZGlvVHJhY2tTZWxlY3RCb3goKSksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFNldHRpbmdzUGFuZWxJdGVtKCdBdWRpbyBRdWFsaXR5JywgbmV3IEF1ZGlvUXVhbGl0eVNlbGVjdEJveCgpKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oJ1N1YnRpdGxlcycsIG5ldyBTdWJ0aXRsZVNlbGVjdEJveCgpKSxcclxuICAgICAgICAvLyAgICAgXSxcclxuICAgICAgICAvLyAgICAgaGlkZGVuOiB0cnVlLFxyXG4gICAgICAgIC8vICAgfSk7XHJcbiAgICAgICAgLy8gICBsZXQgY29udHJvbEJhciA9IG5ldyBDb250cm9sQmFyKHtcclxuICAgICAgICAvLyAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgIC8vICAgICAgIHNldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFBsYXliYWNrVG9nZ2xlQnV0dG9uKCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFNlZWtCYXIoeyBsYWJlbDogbmV3IFNlZWtCYXJMYWJlbCgpIH0pLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBQbGF5YmFja1RpbWVMYWJlbCgpLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBWUlRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBWb2x1bWVDb250cm9sQnV0dG9uKCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFNldHRpbmdzVG9nZ2xlQnV0dG9uKHsgc2V0dGluZ3NQYW5lbDogc2V0dGluZ3NQYW5lbCB9KSxcclxuICAgICAgICAvLyAgICAgICBuZXcgQ2FzdFRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBGdWxsc2NyZWVuVG9nZ2xlQnV0dG9uKCksXHJcbiAgICAgICAgLy8gICAgIF0sXHJcbiAgICAgICAgLy8gICB9KTtcclxuICAgICAgICAvLyAgIHJldHVybiBuZXcgVUlDb250YWluZXIoe1xyXG4gICAgICAgIC8vICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFN1YnRpdGxlT3ZlcmxheSgpLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBDYXN0U3RhdHVzT3ZlcmxheSgpLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBQbGF5YmFja1RvZ2dsZU92ZXJsYXkoKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgV2F0ZXJtYXJrKCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFJlY29tbWVuZGF0aW9uT3ZlcmxheSgpLFxyXG4gICAgICAgIC8vICAgICAgIGNvbnRyb2xCYXIsXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFRpdGxlQmFyKCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IEVycm9yTWVzc2FnZU92ZXJsYXkoKSxcclxuICAgICAgICAvLyAgICAgXSxcclxuICAgICAgICAvLyAgICAgY3NzQ2xhc3NlczogWyd1aS1za2luLWxlZ2FjeSddLFxyXG4gICAgICAgIC8vICAgfSk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGZ1bmN0aW9uIGxlZ2FjeUFkc1VJKCkge1xyXG4gICAgICAgIC8vICAgcmV0dXJuIG5ldyBVSUNvbnRhaW5lcih7XHJcbiAgICAgICAgLy8gICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAvLyAgICAgICBuZXcgQWRDbGlja092ZXJsYXkoKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgQ29udHJvbEJhcih7XHJcbiAgICAgICAgLy8gICAgICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgICAgIG5ldyBQbGF5YmFja1RvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgIC8vICAgICAgICAgICBuZXcgQWRNZXNzYWdlTGFiZWwoKSxcclxuICAgICAgICAvLyAgICAgICAgICAgbmV3IFZvbHVtZUNvbnRyb2xCdXR0b24oKSxcclxuICAgICAgICAvLyAgICAgICAgICAgbmV3IEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24oKSxcclxuICAgICAgICAvLyAgICAgICAgIF0sXHJcbiAgICAgICAgLy8gICAgICAgfSksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IEFkU2tpcEJ1dHRvbigpLFxyXG4gICAgICAgIC8vICAgICBdLFxyXG4gICAgICAgIC8vICAgICBjc3NDbGFzc2VzOiBbJ3VpLXNraW4tbGVnYWN5JywgJ3VpLXNraW4tYWRzJ10sXHJcbiAgICAgICAgLy8gICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZnVuY3Rpb24gbGVnYWN5Q2FzdFJlY2VpdmVyVUkoKSB7XHJcbiAgICAgICAgLy8gICBsZXQgY29udHJvbEJhciA9IG5ldyBDb250cm9sQmFyKHtcclxuICAgICAgICAvLyAgICAgY29tcG9uZW50czogW1xyXG4gICAgICAgIC8vICAgICAgIG5ldyBTZWVrQmFyKCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFBsYXliYWNrVGltZUxhYmVsKCksXHJcbiAgICAgICAgLy8gICAgIF0sXHJcbiAgICAgICAgLy8gICB9KTtcclxuICAgICAgICAvLyAgIHJldHVybiBuZXcgVUlDb250YWluZXIoe1xyXG4gICAgICAgIC8vICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFN1YnRpdGxlT3ZlcmxheSgpLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBQbGF5YmFja1RvZ2dsZU92ZXJsYXkoKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgV2F0ZXJtYXJrKCksXHJcbiAgICAgICAgLy8gICAgICAgY29udHJvbEJhcixcclxuICAgICAgICAvLyAgICAgICBuZXcgVGl0bGVCYXIoKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgRXJyb3JNZXNzYWdlT3ZlcmxheSgpLFxyXG4gICAgICAgIC8vICAgICBdLFxyXG4gICAgICAgIC8vICAgICBjc3NDbGFzc2VzOiBbJ3VpLXNraW4tbGVnYWN5JywgJ3VpLXNraW4tY2FzdC1yZWNlaXZlciddLFxyXG4gICAgICAgIC8vICAgfSk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGZ1bmN0aW9uIGxlZ2FjeVRlc3RVSSgpIHtcclxuICAgICAgICAvLyAgIGxldCBzZXR0aW5nc1BhbmVsID0gbmV3IFNldHRpbmdzUGFuZWwoe1xyXG4gICAgICAgIC8vICAgICBjb21wb25lbnRzOiBbXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFNldHRpbmdzUGFuZWxJdGVtKCdWaWRlbyBRdWFsaXR5JywgbmV3IFZpZGVvUXVhbGl0eVNlbGVjdEJveCgpKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oJ0F1ZGlvIFRyYWNrJywgbmV3IEF1ZGlvVHJhY2tTZWxlY3RCb3goKSksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFNldHRpbmdzUGFuZWxJdGVtKCdBdWRpbyBRdWFsaXR5JywgbmV3IEF1ZGlvUXVhbGl0eVNlbGVjdEJveCgpKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgU2V0dGluZ3NQYW5lbEl0ZW0oJ1N1YnRpdGxlcycsIG5ldyBTdWJ0aXRsZVNlbGVjdEJveCgpKSxcclxuICAgICAgICAvLyAgICAgXSxcclxuICAgICAgICAvLyAgICAgaGlkZGVuOiB0cnVlLFxyXG4gICAgICAgIC8vICAgfSk7XHJcbiAgICAgICAgLy8gICBsZXQgY29udHJvbEJhciA9IG5ldyBDb250cm9sQmFyKHtcclxuICAgICAgICAvLyAgICAgY29tcG9uZW50czogW3NldHRpbmdzUGFuZWwsXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFBsYXliYWNrVG9nZ2xlQnV0dG9uKCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFNlZWtCYXIoeyBsYWJlbDogbmV3IFNlZWtCYXJMYWJlbCgpIH0pLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBQbGF5YmFja1RpbWVMYWJlbCgpLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBWUlRvZ2dsZUJ1dHRvbigpLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBWb2x1bWVUb2dnbGVCdXR0b24oKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgVm9sdW1lU2xpZGVyKCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFZvbHVtZUNvbnRyb2xCdXR0b24oKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgVm9sdW1lQ29udHJvbEJ1dHRvbih7IHZlcnRpY2FsOiBmYWxzZSB9KSxcclxuICAgICAgICAvLyAgICAgICBuZXcgU2V0dGluZ3NUb2dnbGVCdXR0b24oeyBzZXR0aW5nc1BhbmVsOiBzZXR0aW5nc1BhbmVsIH0pLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBDYXN0VG9nZ2xlQnV0dG9uKCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IEZ1bGxzY3JlZW5Ub2dnbGVCdXR0b24oKSxcclxuICAgICAgICAvLyAgICAgXSxcclxuICAgICAgICAvLyAgIH0pO1xyXG4gICAgICAgIC8vICAgcmV0dXJuIG5ldyBVSUNvbnRhaW5lcih7XHJcbiAgICAgICAgLy8gICAgIGNvbXBvbmVudHM6IFtcclxuICAgICAgICAvLyAgICAgICBuZXcgU3VidGl0bGVPdmVybGF5KCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IENhc3RTdGF0dXNPdmVybGF5KCksXHJcbiAgICAgICAgLy8gICAgICAgbmV3IFBsYXliYWNrVG9nZ2xlT3ZlcmxheSgpLFxyXG4gICAgICAgIC8vICAgICAgIG5ldyBXYXRlcm1hcmsoKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgUmVjb21tZW5kYXRpb25PdmVybGF5KCksXHJcbiAgICAgICAgLy8gICAgICAgY29udHJvbEJhcixcclxuICAgICAgICAvLyAgICAgICBuZXcgVGl0bGVCYXIoKSxcclxuICAgICAgICAvLyAgICAgICBuZXcgRXJyb3JNZXNzYWdlT3ZlcmxheSgpLFxyXG4gICAgICAgIC8vICAgICBdLFxyXG4gICAgICAgIC8vICAgICBjc3NDbGFzc2VzOiBbJ3VpLXNraW4tbGVnYWN5J10sXHJcbiAgICAgICAgLy8gICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTGVnYWN5VUkocGxheWVyOiBQbGF5ZXJBUEksIGNvbmZpZzogVUlDb25maWcgPSB7fSk6IFVJTWFuYWdlciB7XHJcbiAgICAgICAgLy8gICByZXR1cm4gbmV3IFVJTWFuYWdlcihwbGF5ZXIsIFt7XHJcbiAgICAgICAgLy8gICAgIHVpOiBsZWdhY3lBZHNVSSgpLFxyXG4gICAgICAgIC8vICAgICBjb25kaXRpb246IChjb250ZXh0OiBVSUNvbmRpdGlvbkNvbnRleHQpID0+IHtcclxuICAgICAgICAvLyAgICAgICByZXR1cm4gY29udGV4dC5pc0FkV2l0aFVJO1xyXG4gICAgICAgIC8vICAgICB9LFxyXG4gICAgICAgIC8vICAgfSwge1xyXG4gICAgICAgIC8vICAgICB1aTogbGVnYWN5VUkoKSxcclxuICAgICAgICAvLyAgIH1dLCBjb25maWcpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBleHBvcnQgZnVuY3Rpb24gYnVpbGRMZWdhY3lDYXN0UmVjZWl2ZXJVSShwbGF5ZXI6IFBsYXllckFQSSwgY29uZmlnOiBVSUNvbmZpZyA9IHt9KTogVUlNYW5hZ2VyIHtcclxuICAgICAgICAvLyAgIHJldHVybiBuZXcgVUlNYW5hZ2VyKHBsYXllciwgbGVnYWN5Q2FzdFJlY2VpdmVyVUkoKSwgY29uZmlnKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTGVnYWN5VGVzdFVJKHBsYXllcjogUGxheWVyQVBJLCBjb25maWc6IFVJQ29uZmlnID0ge30pOiBVSU1hbmFnZXIge1xyXG4gICAgICAgIC8vICAgcmV0dXJuIG5ldyBVSU1hbmFnZXIocGxheWVyLCBsZWdhY3lUZXN0VUkoKSwgY29uZmlnKTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9KShGYWN0b3J5ID0gVUlNYW5hZ2VyLkZhY3RvcnkgfHwgKFVJTWFuYWdlci5GYWN0b3J5ID0ge30pKTtcclxufSkoVUlNYW5hZ2VyID0gZXhwb3J0cy5VSU1hbmFnZXIgfHwgKGV4cG9ydHMuVUlNYW5hZ2VyID0ge30pKTtcclxuZXhwb3J0cy5VSU1hbmFnZXIgPSBVSU1hbmFnZXI7XHJcbi8qKlxyXG4gKiBFbmNhcHN1bGF0ZXMgZnVuY3Rpb25hbGl0eSB0byBtYW5hZ2UgYSBVSSBpbnN0YW5jZS4gVXNlZCBieSB0aGUge0BsaW5rIFVJTWFuYWdlcn0gdG8gbWFuYWdlIG11bHRpcGxlIFVJIGluc3RhbmNlcy5cclxuICovXHJcbnZhciBVSUluc3RhbmNlTWFuYWdlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBVSUluc3RhbmNlTWFuYWdlcihwbGF5ZXIsIHVpLCBjb25maWcpIHtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IHtcclxuICAgICAgICAgICAgb25Db25maWd1cmVkOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uU2VlazogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgICAgICBvblNlZWtQcmV2aWV3OiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uU2Vla2VkOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uQ29tcG9uZW50U2hvdzogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgICAgICBvbkNvbXBvbmVudEhpZGU6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICAgICAgb25Db250cm9sc1Nob3c6IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKSxcclxuICAgICAgICAgICAgb25QcmV2aWV3Q29udHJvbHNIaWRlOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uQ29udHJvbHNIaWRlOiBuZXcgZXZlbnRkaXNwYXRjaGVyXzEuRXZlbnREaXNwYXRjaGVyKCksXHJcbiAgICAgICAgICAgIG9uUmVsZWFzZTogbmV3IGV2ZW50ZGlzcGF0Y2hlcl8xLkV2ZW50RGlzcGF0Y2hlcigpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJXcmFwcGVyID0gbmV3IFBsYXllcldyYXBwZXIocGxheWVyKTtcclxuICAgICAgICB0aGlzLnVpID0gdWk7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICB9XHJcbiAgICBVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUuZ2V0Q29uZmlnID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZztcclxuICAgIH07XHJcbiAgICBVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUuZ2V0VUkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudWk7XHJcbiAgICB9O1xyXG4gICAgVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLmdldFBsYXllciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXJXcmFwcGVyLmdldFBsYXllcigpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUsIFwib25Db25maWd1cmVkXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaXJlcyB3aGVuIHRoZSBVSSBpcyBmdWxseSBjb25maWd1cmVkIGFuZCBhZGRlZCB0byB0aGUgRE9NLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50cy5vbkNvbmZpZ3VyZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLCBcIm9uU2Vla1wiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlyZXMgd2hlbiBhIHNlZWsgc3RhcnRzLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50cy5vblNlZWs7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLCBcIm9uU2Vla1ByZXZpZXdcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIHNlZWsgdGltZWxpbmUgaXMgc2NydWJiZWQuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uU2Vla1ByZXZpZXc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLCBcIm9uU2Vla2VkXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaXJlcyB3aGVuIGEgc2VlayBpcyBmaW5pc2hlZC5cclxuICAgICAgICAgKiBAcmV0dXJucyB7RXZlbnREaXNwYXRjaGVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ldmVudHMub25TZWVrZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLCBcIm9uQ29tcG9uZW50U2hvd1wiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlyZXMgd2hlbiBhIGNvbXBvbmVudCBpcyBzaG93aW5nLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50cy5vbkNvbXBvbmVudFNob3c7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLCBcIm9uQ29tcG9uZW50SGlkZVwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlyZXMgd2hlbiBhIGNvbXBvbmVudCBpcyBoaWRpbmcuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uQ29tcG9uZW50SGlkZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUsIFwib25Db250cm9sc1Nob3dcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIFVJIGNvbnRyb2xzIGFyZSBzaG93aW5nLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50cy5vbkNvbnRyb2xzU2hvdztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUsIFwib25QcmV2aWV3Q29udHJvbHNIaWRlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaXJlcyBiZWZvcmUgdGhlIFVJIGNvbnRyb2xzIGFyZSBoaWRpbmcgdG8gY2hlY2sgaWYgdGhleSBhcmUgYWxsb3dlZCB0byBoaWRlLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50cy5vblByZXZpZXdDb250cm9sc0hpZGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLCBcIm9uQ29udHJvbHNIaWRlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaXJlcyB3aGVuIHRoZSBVSSBjb250cm9scyBhcmUgaGlkaW5nLlxyXG4gICAgICAgICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50cy5vbkNvbnRyb2xzSGlkZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUsIFwib25SZWxlYXNlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaXJlcyB3aGVuIHRoZSBVSSBjb250cm9scyBhcmUgcmVsZWFzZWQuXHJcbiAgICAgICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRzLm9uUmVsZWFzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZS5jbGVhckV2ZW50SGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJXcmFwcGVyLmNsZWFyRXZlbnRIYW5kbGVycygpO1xyXG4gICAgICAgIHZhciBldmVudHMgPSB0aGlzLmV2ZW50czsgLy8gYXZvaWQgVFM3MDE3XHJcbiAgICAgICAgZm9yICh2YXIgZXZlbnRfMSBpbiBldmVudHMpIHtcclxuICAgICAgICAgICAgdmFyIGRpc3BhdGNoZXIgPSBldmVudHNbZXZlbnRfMV07XHJcbiAgICAgICAgICAgIGRpc3BhdGNoZXIudW5zdWJzY3JpYmVBbGwoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFVJSW5zdGFuY2VNYW5hZ2VyO1xyXG59KCkpO1xyXG5leHBvcnRzLlVJSW5zdGFuY2VNYW5hZ2VyID0gVUlJbnN0YW5jZU1hbmFnZXI7XHJcbi8qKlxyXG4gKiBFeHRlbmRzIHRoZSB7QGxpbmsgVUlJbnN0YW5jZU1hbmFnZXJ9IGZvciBpbnRlcm5hbCB1c2UgaW4gdGhlIHtAbGluayBVSU1hbmFnZXJ9IGFuZCBwcm92aWRlcyBhY2Nlc3MgdG8gZnVuY3Rpb25hbGl0eVxyXG4gKiB0aGF0IGNvbXBvbmVudHMgcmVjZWl2aW5nIGEgcmVmZXJlbmNlIHRvIHRoZSB7QGxpbmsgVUlJbnN0YW5jZU1hbmFnZXJ9IHNob3VsZCBub3QgaGF2ZSBhY2Nlc3MgdG8uXHJcbiAqL1xyXG52YXIgSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEludGVybmFsVUlJbnN0YW5jZU1hbmFnZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUuZ2V0V3JhcHBlZFBsYXllciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUT0RPIGZpbmQgYSBub24taGFja3kgd2F5IHRvIHByb3ZpZGUgdGhlIFdyYXBwZWRQbGF5ZXIgdG8gdGhlIFVJTWFuYWdlciB3aXRob3V0IGV4cG9ydGluZyBpdFxyXG4gICAgICAgIC8vIGdldFBsYXllcigpIGFjdHVhbGx5IHJldHVybnMgdGhlIFdyYXBwZWRQbGF5ZXIgYnV0IGl0cyByZXR1cm4gdHlwZSBpcyBzZXQgdG8gUGxheWVyIHNvIHRoZSBXcmFwcGVkUGxheWVyIGRvZXNcclxuICAgICAgICAvLyBub3QgbmVlZCB0byBiZSBleHBvcnRlZFxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFBsYXllcigpO1xyXG4gICAgfTtcclxuICAgIEludGVybmFsVUlJbnN0YW5jZU1hbmFnZXIucHJvdG90eXBlLmNvbmZpZ3VyZUNvbnRyb2xzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY29uZmlndXJlQ29udHJvbHNUcmVlKHRoaXMuZ2V0VUkoKSk7XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVkID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBJbnRlcm5hbFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZS5pc0NvbmZpZ3VyZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJlZDtcclxuICAgIH07XHJcbiAgICBJbnRlcm5hbFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZS5jb25maWd1cmVDb250cm9sc1RyZWUgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY29uZmlndXJlZENvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICB1aXV0aWxzXzEuVUlVdGlscy50cmF2ZXJzZVRyZWUoY29tcG9uZW50LCBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIC8vIEZpcnN0LCBjaGVjayBpZiB3ZSBoYXZlIGFscmVhZHkgY29uZmlndXJlZCBhIGNvbXBvbmVudCwgYW5kIHRocm93IGFuIGVycm9yIGlmIHdlIGRpZC4gTXVsdGlwbGUgY29uZmlndXJhdGlvblxyXG4gICAgICAgICAgICAvLyBvZiB0aGUgc2FtZSBjb21wb25lbnQgbGVhZHMgdG8gdW5leHBlY3RlZCBVSSBiZWhhdmlvci4gQWxzbywgYSBjb21wb25lbnQgdGhhdCBpcyBpbiB0aGUgVUkgdHJlZSBtdWx0aXBsZVxyXG4gICAgICAgICAgICAvLyB0aW1lcyBoaW50cyBhdCBhIHdyb25nIFVJIHN0cnVjdHVyZS5cclxuICAgICAgICAgICAgLy8gV2UgY291bGQganVzdCBza2lwIGNvbmZpZ3VyYXRpb24gaW4gc3VjaCBhIGNhc2UgYW5kIG5vdCB0aHJvdyBhbiBleGNlcHRpb24sIGJ1dCBlbmZvcmNpbmcgYSBjbGVhbiBVSSB0cmVlXHJcbiAgICAgICAgICAgIC8vIHNlZW1zIGxpa2UgdGhlIGJldHRlciBjaG9pY2UuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29uZmlndXJlZENvbXBvbmVudHNfMSA9IGNvbmZpZ3VyZWRDb21wb25lbnRzOyBfaSA8IGNvbmZpZ3VyZWRDb21wb25lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlndXJlZENvbXBvbmVudCA9IGNvbmZpZ3VyZWRDb21wb25lbnRzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3VyZWRDb21wb25lbnQgPT09IGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBjb21wb25lbnQgdG8gdGhlIGNvbnNvbGUgdG8gc2ltcGxpZnkgaWRlbnRpZmljYXRpb24gb2YgdGhlIGN1bHByaXRcclxuICAgICAgICAgICAgICAgICAgICAvLyAoZS5nLiBieSBpbnNwZWN0aW5nIHRoZSBjb25maWcpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnNvbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2lyY3VsYXIgcmVmZXJlbmNlIGluIFVJIHRyZWUnLCBjb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGRpdGlvbmFsbHkgdGhyb3cgYW4gZXJyb3IsIGJlY2F1c2UgdGhpcyBjYXNlIG11c3Qgbm90IGhhcHBlbiBhbmQgbGVhZHMgdG8gdW5leHBlY3RlZCBVSSBiZWhhdmlvci5cclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcignQ2lyY3VsYXIgcmVmZXJlbmNlIGluIFVJIHRyZWU6ICcgKyBjb21wb25lbnQuY29uc3RydWN0b3IubmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29tcG9uZW50LmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgY29tcG9uZW50LmNvbmZpZ3VyZShfdGhpcy5nZXRQbGF5ZXIoKSwgX3RoaXMpO1xyXG4gICAgICAgICAgICBjb25maWd1cmVkQ29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUucmVsZWFzZUNvbnRyb2xzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIERvIG5vdCBjYWxsIHJlbGVhc2UgbWV0aG9kcyBpZiB0aGUgY29tcG9uZW50cyBoYXZlIG5ldmVyIGJlZW4gY29uZmlndXJlZDsgdGhpcyBjYW4gcmVzdWx0IGluIGV4Y2VwdGlvbnNcclxuICAgICAgICBpZiAodGhpcy5jb25maWd1cmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25SZWxlYXNlLmRpc3BhdGNoKHRoaXMuZ2V0VUkoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVsZWFzZUNvbnRyb2xzVHJlZSh0aGlzLmdldFVJKCkpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZWxlYXNlZCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUuaXNSZWxlYXNlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWxlYXNlZDtcclxuICAgIH07XHJcbiAgICBJbnRlcm5hbFVJSW5zdGFuY2VNYW5hZ2VyLnByb3RvdHlwZS5yZWxlYXNlQ29udHJvbHNUcmVlID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbXBvbmVudC5yZWxlYXNlKCk7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudCBpbnN0YW5jZW9mIGNvbnRhaW5lcl8xLkNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gY29tcG9uZW50LmdldENvbXBvbmVudHMoKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZENvbXBvbmVudCA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVsZWFzZUNvbnRyb2xzVHJlZShjaGlsZENvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW50ZXJuYWxVSUluc3RhbmNlTWFuYWdlci5wcm90b3R5cGUuY2xlYXJFdmVudEhhbmRsZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xlYXJFdmVudEhhbmRsZXJzLmNhbGwodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEludGVybmFsVUlJbnN0YW5jZU1hbmFnZXI7XHJcbn0oVUlJbnN0YW5jZU1hbmFnZXIpKTtcclxuLyoqXHJcbiAqIFdyYXBzIHRoZSBwbGF5ZXIgdG8gdHJhY2sgZXZlbnQgaGFuZGxlcnMgYW5kIHByb3ZpZGUgYSBzaW1wbGUgbWV0aG9kIHRvIHJlbW92ZSBhbGwgcmVnaXN0ZXJlZCBldmVudFxyXG4gKiBoYW5kbGVycyBmcm9tIHRoZSBwbGF5ZXIuXHJcbiAqL1xyXG52YXIgUGxheWVyV3JhcHBlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQbGF5ZXJXcmFwcGVyKHBsYXllcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgLy8gQ29sbGVjdCBhbGwgbWVtYmVycyBvZiB0aGUgcGxheWVyIChwdWJsaWMgQVBJIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgb2YgdGhlIHBsYXllcilcclxuICAgICAgICAvLyAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocGxheWVyKSBkb2VzIG5vdCB3b3JrIHdpdGggdGhlIHBsYXllciBUeXBlU2NyaXB0IGNsYXNzIHN0YXJ0aW5nIGluIDcuMilcclxuICAgICAgICB2YXIgbWVtYmVycyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIG1lbWJlciBpbiBwbGF5ZXIpIHtcclxuICAgICAgICAgICAgbWVtYmVycy5wdXNoKG1lbWJlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNwbGl0IHRoZSBtZW1iZXJzIGludG8gbWV0aG9kcyBhbmQgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBtZXRob2RzID0gW107XHJcbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG1lbWJlcnNfMSA9IG1lbWJlcnM7IF9pIDwgbWVtYmVyc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgbWVtYmVyID0gbWVtYmVyc18xW19pXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwbGF5ZXJbbWVtYmVyXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kcy5wdXNoKG1lbWJlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2gobWVtYmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgd3JhcHBlciBvYmplY3RcclxuICAgICAgICB2YXIgd3JhcHBlciA9IHt9O1xyXG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKG1ldGhvZCkge1xyXG4gICAgICAgICAgICB3cmFwcGVyW21ldGhvZF0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2FsbGVkICcgKyBtZW1iZXIpOyAvLyB0cmFjayBtZXRob2QgY2FsbHMgb24gdGhlIHBsYXllclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXllclttZXRob2RdLmFwcGx5KHBsYXllciwgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEFkZCBmdW5jdGlvbiB3cmFwcGVycyBmb3IgYWxsIEFQSSBtZXRob2RzIHRoYXQgZG8gbm90aGluZyBidXQgY2FsbGluZyB0aGUgYmFzZSBtZXRob2Qgb24gdGhlIHBsYXllclxyXG4gICAgICAgIGZvciAodmFyIF9hID0gMCwgbWV0aG9kc18xID0gbWV0aG9kczsgX2EgPCBtZXRob2RzXzEubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzXzFbX2FdO1xyXG4gICAgICAgICAgICBfbG9vcF8xKG1ldGhvZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBfbG9vcF8yID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBhbiBldmVudHVhbGx5IGV4aXN0aW5nIHByb3BlcnR5IGRlc2NyaXB0b3IgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIHBsYWluIHByb3BlcnRpZXMgYW5kIHByb3BlcnRpZXMgd2l0aFxyXG4gICAgICAgICAgICAvLyBnZXR0ZXJzL3NldHRlcnMuXHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHBsYXllciwgcHJvcGVydHkpIHx8XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5nZXRQcm90b3R5cGVPZihwbGF5ZXIpLCBwcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBwcm9wZXJ0eSBoYXMgZ2V0dGVycy9zZXR0ZXJzLCB3cmFwIHRoZW0gYWNjb3JkaW5nbHkuLi5cclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5RGVzY3JpcHRvciAmJiAocHJvcGVydHlEZXNjcmlwdG9yLmdldCB8fCBwcm9wZXJ0eURlc2NyaXB0b3Iuc2V0KSkge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdyYXBwZXIsIHByb3BlcnR5LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwcm9wZXJ0eURlc2NyaXB0b3IuZ2V0LmNhbGwocGxheWVyKTsgfSxcclxuICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gcHJvcGVydHlEZXNjcmlwdG9yLnNldC5jYWxsKHBsYXllciwgdmFsdWUpOyB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyW3Byb3BlcnR5XSA9IHBsYXllcltwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEFkZCBhbGwgcHVibGljIHByb3BlcnRpZXMgb2YgdGhlIHBsYXllciB0byB0aGUgd3JhcHBlclxyXG4gICAgICAgIGZvciAodmFyIF9iID0gMCwgcHJvcGVydGllc18xID0gcHJvcGVydGllczsgX2IgPCBwcm9wZXJ0aWVzXzEubGVuZ3RoOyBfYisrKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eSA9IHByb3BlcnRpZXNfMVtfYl07XHJcbiAgICAgICAgICAgIF9sb29wXzIocHJvcGVydHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFeHBsaWNpdGx5IGFkZCBhIHdyYXBwZXIgbWV0aG9kIGZvciAnYWRkRXZlbnRIYW5kbGVyJyB0aGF0IGFkZHMgYWRkZWQgZXZlbnQgaGFuZGxlcnMgdG8gdGhlIGV2ZW50IGxpc3RcclxuICAgICAgICB3cmFwcGVyLmFkZEV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChldmVudFR5cGUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIC8vIGluIHBsYXllciBWOCBhZGRFdmVudEhhbmRsZXIgd2FzIHJlcGxhY2VkIGJ5IG9uXHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIub24pIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5vbihldmVudFR5cGUsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGtlZXAgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBmb3IgdmVyc2lvbnMgPDcuN1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihldmVudFR5cGUsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnRUeXBlXSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZXZlbnRIYW5kbGVyc1tldmVudFR5cGVdID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuZXZlbnRIYW5kbGVyc1tldmVudFR5cGVdLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JhcHBlcjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEV4cGxpY2l0bHkgYWRkIGEgd3JhcHBlciBtZXRob2QgZm9yICdyZW1vdmVFdmVudEhhbmRsZXInIHRoYXQgcmVtb3ZlcyByZW1vdmVkIGV2ZW50IGhhbmRsZXJzIGZyb20gdGhlIGV2ZW50IGxpc3RcclxuICAgICAgICB3cmFwcGVyLnJlbW92ZUV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChldmVudFR5cGUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIub2ZmKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIub2ZmKGV2ZW50VHlwZSwgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8ga2VlcCBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciB2ZXJzaW9ucyA8Ny43XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRIYW5kbGVyKGV2ZW50VHlwZSwgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50VHlwZV0pIHtcclxuICAgICAgICAgICAgICAgIGFycmF5dXRpbHNfMS5BcnJheVV0aWxzLnJlbW92ZShfdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50VHlwZV0sIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gd3JhcHBlcjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHdyYXBwZXIuZmlyZUV2ZW50SW5VSSA9IGZ1bmN0aW9uIChldmVudCwgZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuZXZlbnRIYW5kbGVyc1tldmVudF0pIHtcclxuICAgICAgICAgICAgICAgIC8vIEV4dGVuZCB0aGUgZGF0YSBvYmplY3Qgd2l0aCBkZWZhdWx0IHZhbHVlcyB0byBjb252ZXJ0IGl0IHRvIGEge0BsaW5rIFBsYXllckV2ZW50fSBvYmplY3QuXHJcbiAgICAgICAgICAgICAgICB2YXIgcGxheWVyRXZlbnREYXRhID0gT2JqZWN0LmFzc2lnbih7fSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBldmVudCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBtYXJrZXIgcHJvcGVydHkgc28gdGhlIFVJIGNhbiBkZXRlY3QgVUktaW50ZXJuYWwgcGxheWVyIGV2ZW50c1xyXG4gICAgICAgICAgICAgICAgICAgIHVpU291cmNlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgcmVnaXN0ZXJlZCBjYWxsYmFja3NcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50XTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socGxheWVyRXZlbnREYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy53cmFwcGVyID0gd3JhcHBlcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHdyYXBwZWQgcGxheWVyIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIG9uIHBsYWNlIG9mIHRoZSBub3JtYWwgcGxheWVyIG9iamVjdC5cclxuICAgICAqIEByZXR1cm5zIHtXcmFwcGVkUGxheWVyfSBhIHdyYXBwZWQgcGxheWVyXHJcbiAgICAgKi9cclxuICAgIFBsYXllcldyYXBwZXIucHJvdG90eXBlLmdldFBsYXllciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIGFsbCByZWdpc3RlcmVkIGV2ZW50IGhhbmRsZXJzIGZyb20gdGhlIHBsYXllciB0aGF0IHdlcmUgYWRkZWQgdGhyb3VnaCB0aGUgd3JhcHBlZCBwbGF5ZXIuXHJcbiAgICAgKi9cclxuICAgIFBsYXllcldyYXBwZXIucHJvdG90eXBlLmNsZWFyRXZlbnRIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBldmVudFR5cGUgaW4gdGhpcy5ldmVudEhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnRUeXBlXTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnJlbW92ZUV2ZW50SGFuZGxlcihldmVudFR5cGUsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gUGxheWVyV3JhcHBlcjtcclxufSgpKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci91aW1hbmFnZXIudHNcbi8vIG1vZHVsZSBpZCA9IDcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBHdWlkO1xyXG4oZnVuY3Rpb24gKEd1aWQpIHtcclxuICAgIHZhciBndWlkID0gMTtcclxuICAgIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGd1aWQrKztcclxuICAgIH1cclxuICAgIEd1aWQubmV4dCA9IG5leHQ7XHJcbn0pKEd1aWQgPSBleHBvcnRzLkd1aWQgfHwgKGV4cG9ydHMuR3VpZCA9IHt9KSk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvZ3VpZC50c1xuLy8gbW9kdWxlIGlkID0gNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBzdG9yYWdldXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9zdG9yYWdldXRpbHNcIik7XHJcbnZhciBjb21wb25lbnRfMSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRcIik7XHJcbnZhciBldmVudGRpc3BhdGNoZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi9ldmVudGRpc3BhdGNoZXJcIik7XHJcbnZhciBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlcigpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSB7XHJcbiAgICAgICAgICAgIGZvbnRDb2xvcjogbmV3IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eSh0aGlzKSxcclxuICAgICAgICAgICAgZm9udE9wYWNpdHk6IG5ldyBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHkodGhpcyksXHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6IG5ldyBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHkodGhpcyksXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiBuZXcgU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5KHRoaXMpLFxyXG4gICAgICAgICAgICBjaGFyYWN0ZXJFZGdlOiBuZXcgU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5KHRoaXMpLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IG5ldyBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHkodGhpcyksXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRPcGFjaXR5OiBuZXcgU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5KHRoaXMpLFxyXG4gICAgICAgICAgICB3aW5kb3dDb2xvcjogbmV3IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eSh0aGlzKSxcclxuICAgICAgICAgICAgd2luZG93T3BhY2l0eTogbmV3IFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eSh0aGlzKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudXNlclNldHRpbmdzID0ge307XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JhZ2VLZXkgPSBEdW1teUNvbXBvbmVudC5pbnN0YW5jZSgpLnByZWZpeENzcygnc3VidGl0bGVzZXR0aW5ncycpO1xyXG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzXzEuX3Byb3BlcnRpZXNbcHJvcGVydHlOYW1lXS5vbkNoYW5nZWQuc3Vic2NyaWJlKGZ1bmN0aW9uIChzZW5kZXIsIHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydHkuaXNTZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVzZXJTZXR0aW5nc1twcm9wZXJ0eU5hbWVdID0gcHJvcGVydHkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgdGhlIHByb3BlcnR5IGZyb20gdGhlIHNldHRpbmdzIG9iamVjdCBpZiB1bnNldCB0byBhdm9pZCBzZXJpYWxpemF0aW9uIG9mIG51bGwgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLnVzZXJTZXR0aW5nc1twcm9wZXJ0eU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgc2V0dGluZ3Mgb2JqZWN0IHdoZW4gYSBwcm9wZXJ0eSBoYXMgY2hhbmdlZFxyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2F2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB0aGlzXzEgPSB0aGlzO1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5TmFtZSBpbiB0aGlzLl9wcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIF9sb29wXzEocHJvcGVydHlOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sb2FkKCk7XHJcbiAgICB9XHJcbiAgICBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIHRoaXMuX3Byb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllc1twcm9wZXJ0eU5hbWVdLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdWJ0aXRsZVNldHRpbmdzTWFuYWdlci5wcm90b3R5cGUsIFwiZm9udENvbG9yXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZm9udENvbG9yO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyLnByb3RvdHlwZSwgXCJmb250T3BhY2l0eVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmZvbnRPcGFjaXR5O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyLnByb3RvdHlwZSwgXCJmb250RmFtaWx5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZm9udEZhbWlseTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdWJ0aXRsZVNldHRpbmdzTWFuYWdlci5wcm90b3R5cGUsIFwiZm9udFNpemVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcy5mb250U2l6ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdWJ0aXRsZVNldHRpbmdzTWFuYWdlci5wcm90b3R5cGUsIFwiY2hhcmFjdGVyRWRnZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmNoYXJhY3RlckVkZ2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VidGl0bGVTZXR0aW5nc01hbmFnZXIucHJvdG90eXBlLCBcImJhY2tncm91bmRDb2xvclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmJhY2tncm91bmRDb2xvcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdWJ0aXRsZVNldHRpbmdzTWFuYWdlci5wcm90b3R5cGUsIFwiYmFja2dyb3VuZE9wYWNpdHlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcy5iYWNrZ3JvdW5kT3BhY2l0eTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdWJ0aXRsZVNldHRpbmdzTWFuYWdlci5wcm90b3R5cGUsIFwid2luZG93Q29sb3JcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcy53aW5kb3dDb2xvcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdWJ0aXRsZVNldHRpbmdzTWFuYWdlci5wcm90b3R5cGUsIFwid2luZG93T3BhY2l0eVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzLndpbmRvd09wYWNpdHk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFNhdmVzIHRoZSBzZXR0aW5ncyB0byBsb2NhbCBzdG9yYWdlLlxyXG4gICAgICovXHJcbiAgICBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlci5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzdG9yYWdldXRpbHNfMS5TdG9yYWdlVXRpbHMuc2V0T2JqZWN0KHRoaXMubG9jYWxTdG9yYWdlS2V5LCB0aGlzLnVzZXJTZXR0aW5ncyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkcyB0aGUgc2V0dGluZ3MgZnJvbSBsb2NhbCBzdG9yYWdlXHJcbiAgICAgKi9cclxuICAgIFN1YnRpdGxlU2V0dGluZ3NNYW5hZ2VyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudXNlclNldHRpbmdzID0gc3RvcmFnZXV0aWxzXzEuU3RvcmFnZVV0aWxzLmdldE9iamVjdCh0aGlzLmxvY2FsU3RvcmFnZUtleSkgfHwge307XHJcbiAgICAgICAgLy8gQXBwbHkgdGhlIGxvYWRlZCBzZXR0aW5nc1xyXG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHRoaXMudXNlclNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXNbcHJvcGVydHldLnZhbHVlID0gdGhpcy51c2VyU2V0dGluZ3NbcHJvcGVydHldO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gU3VidGl0bGVTZXR0aW5nc01hbmFnZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuU3VidGl0bGVTZXR0aW5nc01hbmFnZXIgPSBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlcjtcclxuLyoqXHJcbiAqIEEgZHVtbXkgY29tcG9uZW50IHdob3NlIHNvbGUgcHVycG9zZSBpcyB0byBleHBvc2UgdGhlIHtAbGluayAjcHJlZml4Q3NzfSBtZXRob2QgdG8gdGhlXHJcbiAqIHtAbGluayBTdWJ0aXRsZVNldHRpbmdzTWFuYWdlcn0uXHJcbiAqL1xyXG52YXIgRHVtbXlDb21wb25lbnQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKER1bW15Q29tcG9uZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRHVtbXlDb21wb25lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgRHVtbXlDb21wb25lbnQuaW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCFEdW1teUNvbXBvbmVudC5faW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgRHVtbXlDb21wb25lbnQuX2luc3RhbmNlID0gbmV3IER1bW15Q29tcG9uZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBEdW1teUNvbXBvbmVudC5faW5zdGFuY2U7XHJcbiAgICB9O1xyXG4gICAgRHVtbXlDb21wb25lbnQucHJvdG90eXBlLnByZWZpeENzcyA9IGZ1bmN0aW9uIChjc3NDbGFzc09ySWQpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5wcmVmaXhDc3MuY2FsbCh0aGlzLCBjc3NDbGFzc09ySWQpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEdW1teUNvbXBvbmVudDtcclxufShjb21wb25lbnRfMS5Db21wb25lbnQpKTtcclxudmFyIFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHkobWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuX21hbmFnZXIgPSBtYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuX29uQ2hhbmdlZCA9IG5ldyBldmVudGRpc3BhdGNoZXJfMS5FdmVudERpc3BhdGNoZXIoKTtcclxuICAgIH1cclxuICAgIFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eS5wcm90b3R5cGUuaXNTZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlICE9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vbkNoYW5nZWRFdmVudChudWxsKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VidGl0bGVTZXR0aW5nc1Byb3BlcnR5LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlID09PSAnbnVsbCcpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlZEV2ZW50KHZhbHVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eS5wcm90b3R5cGUub25DaGFuZ2VkRXZlbnQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9vbkNoYW5nZWQuZGlzcGF0Y2godGhpcy5fbWFuYWdlciwgdGhpcyk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eS5wcm90b3R5cGUsIFwib25DaGFuZ2VkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29uQ2hhbmdlZC5nZXRFdmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFN1YnRpdGxlU2V0dGluZ3NQcm9wZXJ0eTtcclxufSgpKTtcclxuZXhwb3J0cy5TdWJ0aXRsZVNldHRpbmdzUHJvcGVydHkgPSBTdWJ0aXRsZVNldHRpbmdzUHJvcGVydHk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9zdWJ0aXRsZXNldHRpbmdzL3N1YnRpdGxlc2V0dGluZ3NtYW5hZ2VyLnRzXG4vLyBtb2R1bGUgaWQgPSA3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgZG9tXzEgPSByZXF1aXJlKFwiLi9kb21cIik7XHJcbi8qKlxyXG4gKiBUcmFja3MgdGhlIGxvYWRpbmcgc3RhdGUgb2YgaW1hZ2VzLlxyXG4gKi9cclxudmFyIEltYWdlTG9hZGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEltYWdlTG9hZGVyKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7fTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTG9hZHMgYW4gaW1hZ2UgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIG9uY2UgdGhlIGltYWdlIGlzIGxvYWRlZC4gSWYgdGhlIGltYWdlIGlzIGFscmVhZHkgbG9hZGVkLCB0aGUgY2FsbGJhY2tcclxuICAgICAqIGlzIGNhbGxlZCBpbW1lZGlhdGVseSwgZWxzZSBpdCBpcyBjYWxsZWQgb25jZSBsb2FkaW5nIGhhcyBmaW5pc2hlZC4gQ2FsbGluZyB0aGlzIG1ldGhvZCBtdWx0aXBsZSB0aW1lcyBmb3IgdGhlXHJcbiAgICAgKiBzYW1lIGltYWdlIHdoaWxlIGl0IGlzIGxvYWRpbmcgY2FsbHMgb25seSBsZXQgY2FsbGJhY2sgcGFzc2VkIGludG8gdGhlIGxhc3QgY2FsbC5cclxuICAgICAqIEBwYXJhbSB1cmwgVGhlIHVybCB0byB0aGUgaW1hZ2UgdG8gbG9hZFxyXG4gICAgICogQHBhcmFtIGxvYWRlZENhbGxiYWNrIFRoZSBjYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSBpbWFnZSBpcyBsb2FkZWRcclxuICAgICAqL1xyXG4gICAgSW1hZ2VMb2FkZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAodXJsLCBsb2FkZWRDYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlW3VybF0pIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB0aGUgaW1hZ2Ugd2FzIG5ldmVyIGF0dGVtcHRlZCB0byBiZSBsb2FkZWQgYmVmb3JlLCB3ZSBjcmVhdGUgYSBzdGF0ZSBhbmQgc3RvcmUgaXQgaW4gdGhlIHN0YXRlIG1hcFxyXG4gICAgICAgICAgICAvLyBmb3IgbGF0ZXIgdXNlIHdoZW4gdGhlIHNhbWUgaW1hZ2UgaXMgcmVxdWVzdGVkIHRvIGJlIGxvYWRlZCBhZ2Fpbi5cclxuICAgICAgICAgICAgdmFyIHN0YXRlXzEgPSB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIGltYWdlOiBuZXcgZG9tXzEuRE9NKCdpbWcnLCB7fSksXHJcbiAgICAgICAgICAgICAgICBsb2FkZWRDYWxsYmFjazogbG9hZGVkQ2FsbGJhY2ssXHJcbiAgICAgICAgICAgICAgICBsb2FkZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDAsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDAsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVbdXJsXSA9IHN0YXRlXzE7XHJcbiAgICAgICAgICAgIC8vIExpc3RlbiB0byB0aGUgbG9hZCBldmVudCwgdXBkYXRlIHRoZSBzdGF0ZSBhbmQgY2FsbCB0aGUgY2FsbGJhY2sgb25jZSB0aGUgaW1hZ2UgaXMgbG9hZGVkXHJcbiAgICAgICAgICAgIHN0YXRlXzEuaW1hZ2Uub24oJ2xvYWQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgc3RhdGVfMS5sb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc3RhdGVfMS53aWR0aCA9IHN0YXRlXzEuaW1hZ2UuZ2V0KDApLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgc3RhdGVfMS5oZWlnaHQgPSBzdGF0ZV8xLmltYWdlLmdldCgwKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jYWxsTG9hZGVkQ2FsbGJhY2soc3RhdGVfMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGltYWdlIFVSTCB0byBzdGFydCB0aGUgbG9hZGluZ1xyXG4gICAgICAgICAgICBzdGF0ZV8xLmltYWdlLmF0dHIoJ3NyYycsIHN0YXRlXzEudXJsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBzdGF0ZSBmb3IgdGhlIHJlcXVlc3RlZCBpbWFnZSwgc28gaXQgaXMgZWl0aGVyIGFscmVhZHkgbG9hZGVkIG9yIGN1cnJlbnRseSBsb2FkaW5nXHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGVbdXJsXTtcclxuICAgICAgICAgICAgLy8gV2Ugb3ZlcndyaXRlIHRoZSBjYWxsYmFjayB0byBtYWtlIHN1cmUgdGhhdCBvbmx5IHRoZSBjYWxsYmFjayBvZiB0aGUgbGF0ZXN0IGNhbGwgZ2V0cyBleGVjdXRlZC5cclxuICAgICAgICAgICAgLy8gRWFybGllciBjYWxsYmFja3MgYmVjb21lIGludmFsaWQgb25jZSBhIG5ldyBsb2FkIGNhbGwgYXJyaXZlcywgYW5kIHRoZXkgYXJlIG5vdCBjYWxsZWQgYXMgbG9uZyBhcyB0aGUgaW1hZ2VcclxuICAgICAgICAgICAgLy8gaXMgbm90IGxvYWRlZC5cclxuICAgICAgICAgICAgc3RhdGUubG9hZGVkQ2FsbGJhY2sgPSBsb2FkZWRDYWxsYmFjaztcclxuICAgICAgICAgICAgLy8gV2hlbiB0aGUgaW1hZ2UgaXMgYWxyZWFkeSBsb2FkZWQsIHdlIGRpcmVjdGx5IGV4ZWN1dGUgdGhlIGNhbGxiYWNrIGluc3RlYWQgb2Ygd2FpdGluZyBmb3IgdGhlIGxvYWQgZXZlbnRcclxuICAgICAgICAgICAgaWYgKHN0YXRlLmxvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsTG9hZGVkQ2FsbGJhY2soc3RhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEltYWdlTG9hZGVyLnByb3RvdHlwZS5jYWxsTG9hZGVkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICBzdGF0ZS5sb2FkZWRDYWxsYmFjayhzdGF0ZS51cmwsIHN0YXRlLndpZHRoLCBzdGF0ZS5oZWlnaHQpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbWFnZUxvYWRlcjtcclxufSgpKTtcclxuZXhwb3J0cy5JbWFnZUxvYWRlciA9IEltYWdlTG9hZGVyO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2ltYWdlbG9hZGVyLnRzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbXBvbmVudF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50XCIpO1xyXG52YXIgZG9tXzEgPSByZXF1aXJlKFwiLi4vZG9tXCIpO1xyXG4vKipcclxuICogQW5pbWF0ZWQgYW5hbG9nIFRWIHN0YXRpYyBub2lzZS5cclxuICovXHJcbnZhciBUdk5vaXNlQ2FudmFzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUdk5vaXNlQ2FudmFzLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVHZOb2lzZUNhbnZhcyhjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY2FudmFzV2lkdGggPSAxNjA7XHJcbiAgICAgICAgX3RoaXMuY2FudmFzSGVpZ2h0ID0gOTA7XHJcbiAgICAgICAgX3RoaXMuaW50ZXJmZXJlbmNlSGVpZ2h0ID0gNTA7XHJcbiAgICAgICAgX3RoaXMubGFzdEZyYW1lVXBkYXRlID0gMDtcclxuICAgICAgICBfdGhpcy5mcmFtZUludGVydmFsID0gNjA7XHJcbiAgICAgICAgX3RoaXMudXNlQW5pbWF0aW9uRnJhbWUgPSAhIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktdHZub2lzZWNhbnZhcycsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBUdk5vaXNlQ2FudmFzLnByb3RvdHlwZS50b0RvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzID0gbmV3IGRvbV8xLkRPTSgnY2FudmFzJywgeyAnY2xhc3MnOiB0aGlzLmdldENzc0NsYXNzZXMoKSB9KTtcclxuICAgIH07XHJcbiAgICBUdk5vaXNlQ2FudmFzLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNhbnZhc0VsZW1lbnQgPSB0aGlzLmNhbnZhcy5nZXQoMCk7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDb250ZXh0ID0gdGhpcy5jYW52YXNFbGVtZW50LmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgdGhpcy5ub2lzZUFuaW1hdGlvbldpbmRvd1BvcyA9IC10aGlzLmNhbnZhc0hlaWdodDtcclxuICAgICAgICB0aGlzLmxhc3RGcmFtZVVwZGF0ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5jYW52YXNFbGVtZW50LndpZHRoID0gdGhpcy5jYW52YXNXaWR0aDtcclxuICAgICAgICB0aGlzLmNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gdGhpcy5jYW52YXNIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJGcmFtZSgpO1xyXG4gICAgfTtcclxuICAgIFR2Tm9pc2VDYW52YXMucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlQW5pbWF0aW9uRnJhbWUpIHtcclxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5mcmFtZVVwZGF0ZUhhbmRsZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5mcmFtZVVwZGF0ZUhhbmRsZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFR2Tm9pc2VDYW52YXMucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFRoaXMgY29kZSBoYXMgYmVlbiBjb3BpZWQgZnJvbSB0aGUgcGxheWVyIGNvbnRyb2xzLmpzIGFuZCBzaW1wbGlmaWVkXHJcbiAgICAgICAgaWYgKHRoaXMubGFzdEZyYW1lVXBkYXRlICsgdGhpcy5mcmFtZUludGVydmFsID4gbmV3IERhdGUoKS5nZXRUaW1lKCkpIHtcclxuICAgICAgICAgICAgLy8gSXQncyB0b28gZWFybHkgdG8gcmVuZGVyIHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVOZXh0UmVuZGVyKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGN1cnJlbnRQaXhlbE9mZnNldDtcclxuICAgICAgICB2YXIgY2FudmFzV2lkdGggPSB0aGlzLmNhbnZhc1dpZHRoO1xyXG4gICAgICAgIHZhciBjYW52YXNIZWlnaHQgPSB0aGlzLmNhbnZhc0hlaWdodDtcclxuICAgICAgICAvLyBDcmVhdGUgdGV4dHVyZVxyXG4gICAgICAgIHZhciBub2lzZUltYWdlID0gdGhpcy5jYW52YXNDb250ZXh0LmNyZWF0ZUltYWdlRGF0YShjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KTtcclxuICAgICAgICAvLyBGaWxsIHRleHR1cmUgd2l0aCBub2lzZVxyXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgY2FudmFzSGVpZ2h0OyB5KyspIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBjYW52YXNXaWR0aDsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UGl4ZWxPZmZzZXQgPSAoY2FudmFzV2lkdGggKiB5ICogNCkgKyB4ICogNDtcclxuICAgICAgICAgICAgICAgIG5vaXNlSW1hZ2UuZGF0YVtjdXJyZW50UGl4ZWxPZmZzZXRdID0gTWF0aC5yYW5kb20oKSAqIDI1NTtcclxuICAgICAgICAgICAgICAgIGlmICh5IDwgdGhpcy5ub2lzZUFuaW1hdGlvbldpbmRvd1BvcyB8fCB5ID4gdGhpcy5ub2lzZUFuaW1hdGlvbldpbmRvd1BvcyArIHRoaXMuaW50ZXJmZXJlbmNlSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9pc2VJbWFnZS5kYXRhW2N1cnJlbnRQaXhlbE9mZnNldF0gKj0gMC44NTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5vaXNlSW1hZ2UuZGF0YVtjdXJyZW50UGl4ZWxPZmZzZXQgKyAxXSA9IG5vaXNlSW1hZ2UuZGF0YVtjdXJyZW50UGl4ZWxPZmZzZXRdO1xyXG4gICAgICAgICAgICAgICAgbm9pc2VJbWFnZS5kYXRhW2N1cnJlbnRQaXhlbE9mZnNldCArIDJdID0gbm9pc2VJbWFnZS5kYXRhW2N1cnJlbnRQaXhlbE9mZnNldF07XHJcbiAgICAgICAgICAgICAgICBub2lzZUltYWdlLmRhdGFbY3VycmVudFBpeGVsT2Zmc2V0ICsgM10gPSA1MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQdXQgdGV4dHVyZSBvbnRvIGNhbnZhc1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEobm9pc2VJbWFnZSwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5sYXN0RnJhbWVVcGRhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICB0aGlzLm5vaXNlQW5pbWF0aW9uV2luZG93UG9zICs9IDc7XHJcbiAgICAgICAgaWYgKHRoaXMubm9pc2VBbmltYXRpb25XaW5kb3dQb3MgPiBjYW52YXNIZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5ub2lzZUFuaW1hdGlvbldpbmRvd1BvcyA9IC1jYW52YXNIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVOZXh0UmVuZGVyKCk7XHJcbiAgICB9O1xyXG4gICAgVHZOb2lzZUNhbnZhcy5wcm90b3R5cGUuc2NoZWR1bGVOZXh0UmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnVzZUFuaW1hdGlvbkZyYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWVVcGRhdGVIYW5kbGVySWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyRnJhbWUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZyYW1lVXBkYXRlSGFuZGxlcklkID0gc2V0VGltZW91dCh0aGlzLnJlbmRlckZyYW1lLmJpbmQodGhpcyksIHRoaXMuZnJhbWVJbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBUdk5vaXNlQ2FudmFzO1xyXG59KGNvbXBvbmVudF8xLkNvbXBvbmVudCkpO1xyXG5leHBvcnRzLlR2Tm9pc2VDYW52YXMgPSBUdk5vaXNlQ2FudmFzO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvdHZub2lzZWNhbnZhcy50c1xuLy8gbW9kdWxlIGlkID0gNzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbnRhaW5lclwiKTtcclxudmFyIGNvbXBvbmVudF8xID0gcmVxdWlyZShcIi4vY29tcG9uZW50XCIpO1xyXG52YXIgdGltZW91dF8xID0gcmVxdWlyZShcIi4uL3RpbWVvdXRcIik7XHJcbi8qKlxyXG4gKiBPdmVybGF5cyB0aGUgcGxheWVyIGFuZCBkaXNwbGF5cyBhbiBhdWRpby1vbmx5IGluZGljYXRvci5cclxuICovXHJcbnZhciBBdWRpb09ubHlPdmVybGF5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhBdWRpb09ubHlPdmVybGF5LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQXVkaW9Pbmx5T3ZlcmxheShjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW5kaWNhdG9yQ29uZmlnID0gW1xyXG4gICAgICAgICAgICBuZXcgY29tcG9uZW50XzEuQ29tcG9uZW50KHsgdGFnOiAnZGl2JywgY3NzQ2xhc3M6ICd1aS1hdWRpb29ubHktb3ZlcmxheS1pbmRpY2F0b3InLCBoaWRkZW46IHRydWUgfSksXHJcbiAgICAgICAgXTtcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1hdWRpb29ubHktb3ZlcmxheScsXHJcbiAgICAgICAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IF90aGlzLmluZGljYXRvckNvbmZpZyxcclxuICAgICAgICB9LCBfdGhpcy5jb25maWcpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEF1ZGlvT25seU92ZXJsYXkucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50Q29uZmlnID0gdWltYW5hZ2VyLmdldENvbmZpZygpLmF1ZGlvT25seU92ZXJsYXlDb25maWcgfHwge307XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XHJcbiAgICAgICAgdmFyIGluZGljYXRvciA9IGNvbmZpZy5jb21wb25lbnRzWzBdO1xyXG4gICAgICAgIHZhciBiYWNrZ3JvdW5kSW1hZ2VVcmwgPSB0aGlzLmNvbXBvbmVudENvbmZpZy5iYWNrZ3JvdW5kSW1hZ2VVcmw7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmdldERvbUVsZW1lbnQoKTtcclxuICAgICAgICB2YXIgc2hvd0JhY2tncm91bmRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jc3MoJ2JhY2tncm91bmRJbWFnZScsIFwidXJsKFwiICsgYmFja2dyb3VuZEltYWdlVXJsICsgXCIpXCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNzcygnYmFja2dyb3VuZFNpemUnLCAnY29udGFpbicpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNzcygnYmFja2dyb3VuZENvbG9yJywgJyMwMDAwMDAnKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jc3MoJ2FuaW1hdGlvbicsICdub25lJyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKCdiYWNrZ3JvdW5kUG9zaXRpb24nLCAnY2VudGVyJyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgb3ZlcmxheVNob3dUaW1lb3V0ID0gbmV3IHRpbWVvdXRfMS5UaW1lb3V0KDQwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpbmRpY2F0b3Iuc2hvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBzaG93T3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgb3ZlcmxheVNob3dUaW1lb3V0LnN0YXJ0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgaGlkZU92ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG92ZXJsYXlTaG93VGltZW91dC5jbGVhcigpO1xyXG4gICAgICAgICAgICBpbmRpY2F0b3IuaGlkZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGJhY2tncm91bmRJbWFnZVVybCkge1xyXG4gICAgICAgICAgICBzaG93QmFja2dyb3VuZEltYWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5jb21wb25lbnRDb25maWcuaGlkZGVJbmRpY2F0b3IpIHtcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWSwgc2hvd092ZXJsYXkpO1xyXG4gICAgICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9QQVVTRUQsIGhpZGVPdmVybGF5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEF1ZGlvT25seU92ZXJsYXk7XHJcbn0oY29udGFpbmVyXzEuQ29udGFpbmVyKSk7XHJcbmV4cG9ydHMuQXVkaW9Pbmx5T3ZlcmxheSA9IEF1ZGlvT25seU92ZXJsYXk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9hdWRpb29ubHlvdmVybGF5LnRzXG4vLyBtb2R1bGUgaWQgPSA3NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGxpc3RzZWxlY3Rvcl8xID0gcmVxdWlyZShcIi4vbGlzdHNlbGVjdG9yXCIpO1xyXG52YXIgZG9tXzEgPSByZXF1aXJlKFwiLi4vZG9tXCIpO1xyXG52YXIgSXRlbVNlbGVjdGlvbkxpc3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEl0ZW1TZWxlY3Rpb25MaXN0LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSXRlbVNlbGVjdGlvbkxpc3QoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvbmZpZyA9IF90aGlzLm1lcmdlQ29uZmlnKGNvbmZpZywge1xyXG4gICAgICAgICAgICB0YWc6ICd1bCcsXHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktaXRlbXNlbGVjdGlvbmxpc3QnLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgSXRlbVNlbGVjdGlvbkxpc3QucHJvdG90eXBlLmlzQWN0aXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aCA+IDE7XHJcbiAgICB9O1xyXG4gICAgSXRlbVNlbGVjdGlvbkxpc3QucHJvdG90eXBlLnRvRG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGlzdEVsZW1lbnQgPSBuZXcgZG9tXzEuRE9NKCd1bCcsIHtcclxuICAgICAgICAgICAgJ2lkJzogdGhpcy5jb25maWcuaWQsXHJcbiAgICAgICAgICAgICdjbGFzcyc6IHRoaXMuZ2V0Q3NzQ2xhc3NlcygpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubGlzdEVsZW1lbnQgPSBsaXN0RWxlbWVudDtcclxuICAgICAgICB0aGlzLnVwZGF0ZURvbUl0ZW1zKCk7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RFbGVtZW50O1xyXG4gICAgfTtcclxuICAgIEl0ZW1TZWxlY3Rpb25MaXN0LnByb3RvdHlwZS51cGRhdGVEb21JdGVtcyA9IGZ1bmN0aW9uIChzZWxlY3RlZFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoc2VsZWN0ZWRWYWx1ZSA9PT0gdm9pZCAwKSB7IHNlbGVjdGVkVmFsdWUgPSBudWxsOyB9XHJcbiAgICAgICAgLy8gRGVsZXRlIGFsbCBjaGlsZHJlblxyXG4gICAgICAgIHRoaXMubGlzdEVsZW1lbnQuZW1wdHkoKTtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRMaXN0SXRlbSA9IG51bGw7XHJcbiAgICAgICAgdmFyIHNlbGVjdEl0ZW0gPSBmdW5jdGlvbiAobGlzdEl0ZW0pIHtcclxuICAgICAgICAgICAgbGlzdEl0ZW0uYWRkQ2xhc3MoX3RoaXMucHJlZml4Q3NzKEl0ZW1TZWxlY3Rpb25MaXN0LkNMQVNTX1NFTEVDVEVEKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgZGVzZWxlY3RJdGVtID0gZnVuY3Rpb24gKGxpc3RJdGVtKSB7XHJcbiAgICAgICAgICAgIGxpc3RJdGVtLnJlbW92ZUNsYXNzKF90aGlzLnByZWZpeENzcyhJdGVtU2VsZWN0aW9uTGlzdC5DTEFTU19TRUxFQ1RFRCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgbGlzdEl0ZW0gPSBuZXcgZG9tXzEuRE9NKCdsaScsIHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2xpJyxcclxuICAgICAgICAgICAgICAgICdjbGFzcyc6IHRoaXNfMS5wcmVmaXhDc3MoJ3VpLXNlbGVjdGlvbmxpc3RpdGVtJyksXHJcbiAgICAgICAgICAgIH0pLmFwcGVuZChuZXcgZG9tXzEuRE9NKCdhJywge30pLmh0bWwoaXRlbS5sYWJlbCkpO1xyXG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkTGlzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExpc3RJdGVtID0gbGlzdEl0ZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChTdHJpbmcoc2VsZWN0ZWRWYWx1ZSkgPT09IGl0ZW0ua2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMaXN0SXRlbSA9IGxpc3RJdGVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSBsaXN0IGl0ZW0gc2VsZWN0aW9uc1xyXG4gICAgICAgICAgICBsaXN0SXRlbS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEZXNlbGVjdCB0aGUgcHJldmlvdXMgaXRlbSAoaWYgdGhlcmUgd2FzIGEgc2VsZWN0ZWQgaXRlbSlcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZExpc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzZWxlY3RJdGVtKHNlbGVjdGVkTGlzdEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBjbGlja2VkIGl0ZW1cclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkTGlzdEl0ZW0gPSBsaXN0SXRlbTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdEl0ZW0obGlzdEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgLy8gRmlyZSB0aGUgZXZlbnRcclxuICAgICAgICAgICAgICAgIF90aGlzLm9uSXRlbVNlbGVjdGVkRXZlbnQoaXRlbS5rZXksIGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIFNlbGVjdCBkZWZhdWx0IGl0ZW1cclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkTGlzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdEl0ZW0oc2VsZWN0ZWRMaXN0SXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpc18xLmxpc3RFbGVtZW50LmFwcGVuZChsaXN0SXRlbSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5pdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIF9sb29wXzEoaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEl0ZW1TZWxlY3Rpb25MaXN0LnByb3RvdHlwZS5vbkl0ZW1BZGRlZEV2ZW50ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5vbkl0ZW1BZGRlZEV2ZW50LmNhbGwodGhpcywgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRG9tSXRlbXModGhpcy5zZWxlY3RlZEl0ZW0pO1xyXG4gICAgfTtcclxuICAgIEl0ZW1TZWxlY3Rpb25MaXN0LnByb3RvdHlwZS5vbkl0ZW1SZW1vdmVkRXZlbnQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLm9uSXRlbVJlbW92ZWRFdmVudC5jYWxsKHRoaXMsIHZhbHVlKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZURvbUl0ZW1zKHRoaXMuc2VsZWN0ZWRJdGVtKTtcclxuICAgIH07XHJcbiAgICBJdGVtU2VsZWN0aW9uTGlzdC5wcm90b3R5cGUub25JdGVtU2VsZWN0ZWRFdmVudCA9IGZ1bmN0aW9uICh2YWx1ZSwgdXBkYXRlRG9tSXRlbXMpIHtcclxuICAgICAgICBpZiAodXBkYXRlRG9tSXRlbXMgPT09IHZvaWQgMCkgeyB1cGRhdGVEb21JdGVtcyA9IHRydWU7IH1cclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLm9uSXRlbVNlbGVjdGVkRXZlbnQuY2FsbCh0aGlzLCB2YWx1ZSk7XHJcbiAgICAgICAgaWYgKHVwZGF0ZURvbUl0ZW1zKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRG9tSXRlbXModmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gSXRlbVNlbGVjdGlvbkxpc3Q7XHJcbn0obGlzdHNlbGVjdG9yXzEuTGlzdFNlbGVjdG9yKSk7XHJcbkl0ZW1TZWxlY3Rpb25MaXN0LkNMQVNTX1NFTEVDVEVEID0gJ3NlbGVjdGVkJztcclxuZXhwb3J0cy5JdGVtU2VsZWN0aW9uTGlzdCA9IEl0ZW1TZWxlY3Rpb25MaXN0O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvaXRlbXNlbGVjdGlvbmxpc3QudHNcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY2xpY2tvdmVybGF5XzEgPSByZXF1aXJlKFwiLi9jbGlja292ZXJsYXlcIik7XHJcbi8qKlxyXG4gKiBBIHdhdGVybWFyayBvdmVybGF5IHdpdGggYSBjbGlja2FibGUgbG9nby5cclxuICovXHJcbnZhciBXYXRlcm1hcmsgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFdhdGVybWFyaywgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFdhdGVybWFyayhjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktd2F0ZXJtYXJrJyxcclxuICAgICAgICAgICAgdXJsOiAnaHR0cDovL2JpdG1vdmluLmNvbScsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gV2F0ZXJtYXJrO1xyXG59KGNsaWNrb3ZlcmxheV8xLkNsaWNrT3ZlcmxheSkpO1xyXG5leHBvcnRzLldhdGVybWFyayA9IFdhdGVybWFyaztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL3dhdGVybWFyay50c1xuLy8gbW9kdWxlIGlkID0gNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL2NvbnRhaW5lclwiKTtcclxudmFyIHZvbHVtZXNsaWRlcl8xID0gcmVxdWlyZShcIi4vdm9sdW1lc2xpZGVyXCIpO1xyXG52YXIgdm9sdW1ldG9nZ2xlYnV0dG9uXzEgPSByZXF1aXJlKFwiLi92b2x1bWV0b2dnbGVidXR0b25cIik7XHJcbnZhciB0aW1lb3V0XzEgPSByZXF1aXJlKFwiLi4vdGltZW91dFwiKTtcclxuLyoqXHJcbiAqIEEgY29tcG9zaXRlIHZvbHVtZSBjb250cm9sIHRoYXQgY29uc2lzdHMgb2YgYW5kIGludGVybmFsbHkgbWFuYWdlcyBhIHZvbHVtZSBjb250cm9sIGJ1dHRvbiB0aGF0IGNhbiBiZSB1c2VkXHJcbiAqIGZvciBtdXRpbmcsIGFuZCBhIChkZXBlbmRpbmcgb24gdGhlIENTUyBzdHlsZSwgZS5nLiBzbGlkZS1vdXQpIHZvbHVtZSBjb250cm9sIGJhci5cclxuICovXHJcbnZhciBWb2x1bWVDb250cm9sQnV0dG9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhWb2x1bWVDb250cm9sQnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVm9sdW1lQ29udHJvbEJ1dHRvbihjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudm9sdW1lVG9nZ2xlQnV0dG9uID0gbmV3IHZvbHVtZXRvZ2dsZWJ1dHRvbl8xLlZvbHVtZVRvZ2dsZUJ1dHRvbigpO1xyXG4gICAgICAgIF90aGlzLnZvbHVtZVNsaWRlciA9IG5ldyB2b2x1bWVzbGlkZXJfMS5Wb2x1bWVTbGlkZXIoe1xyXG4gICAgICAgICAgICB2ZXJ0aWNhbDogY29uZmlnLnZlcnRpY2FsICE9IG51bGwgPyBjb25maWcudmVydGljYWwgOiB0cnVlLFxyXG4gICAgICAgICAgICBoaWRkZW46IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktdm9sdW1lY29udHJvbGJ1dHRvbicsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IFtfdGhpcy52b2x1bWVUb2dnbGVCdXR0b24sIF90aGlzLnZvbHVtZVNsaWRlcl0sXHJcbiAgICAgICAgICAgIGhpZGVEZWxheTogNTAwLFxyXG4gICAgICAgIH0sIF90aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVm9sdW1lQ29udHJvbEJ1dHRvbi5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgdm9sdW1lVG9nZ2xlQnV0dG9uID0gdGhpcy5nZXRWb2x1bWVUb2dnbGVCdXR0b24oKTtcclxuICAgICAgICB2YXIgdm9sdW1lU2xpZGVyID0gdGhpcy5nZXRWb2x1bWVTbGlkZXIoKTtcclxuICAgICAgICB0aGlzLnZvbHVtZVNsaWRlckhpZGVUaW1lb3V0ID0gbmV3IHRpbWVvdXRfMS5UaW1lb3V0KHRoaXMuZ2V0Q29uZmlnKCkuaGlkZURlbGF5LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZvbHVtZVNsaWRlci5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBWb2x1bWUgU2xpZGVyIHZpc2liaWxpdHkgaGFuZGxpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZSB2b2x1bWUgc2xpZGVyIHNoYWxsIGJlIHZpc2libGUgd2hpbGUgdGhlIHVzZXIgaG92ZXJzIHRoZSBtdXRlIHRvZ2dsZSBidXR0b24sIHdoaWxlIHRoZSB1c2VyIGhvdmVycyB0aGVcclxuICAgICAgICAgKiB2b2x1bWUgc2xpZGVyLCBhbmQgd2hpbGUgdGhlIHVzZXIgc2xpZGVzIHRoZSB2b2x1bWUgc2xpZGVyLiBJZiBub25lIG9mIHRoZXNlIHNpdHVhdGlvbnMgYXJlIHRydWUsIHRoZSBzbGlkZXJcclxuICAgICAgICAgKiBzaGFsbCBkaXNhcHBlYXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIHZvbHVtZVNsaWRlckhvdmVyZWQgPSBmYWxzZTtcclxuICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24uZ2V0RG9tRWxlbWVudCgpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBTaG93IHZvbHVtZSBzbGlkZXIgd2hlbiBtb3VzZSBlbnRlcnMgdGhlIGJ1dHRvbiBhcmVhXHJcbiAgICAgICAgICAgIGlmICh2b2x1bWVTbGlkZXIuaXNIaWRkZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgdm9sdW1lU2xpZGVyLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBdm9pZCBoaWRpbmcgb2YgdGhlIHNsaWRlciB3aGVuIGJ1dHRvbiBpcyBob3ZlcmVkXHJcbiAgICAgICAgICAgIF90aGlzLnZvbHVtZVNsaWRlckhpZGVUaW1lb3V0LmNsZWFyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gSGlkZSBzbGlkZXIgZGVsYXllZCB3aGVuIGJ1dHRvbiBpcyBsZWZ0XHJcbiAgICAgICAgICAgIF90aGlzLnZvbHVtZVNsaWRlckhpZGVUaW1lb3V0LnJlc2V0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdm9sdW1lU2xpZGVyLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB0aGUgc2xpZGVyIGlzIGVudGVyZWQsIGNhbmNlbCB0aGUgaGlkZSB0aW1lb3V0IGFjdGl2YXRlZCBieSBsZWF2aW5nIHRoZSBidXR0b25cclxuICAgICAgICAgICAgX3RoaXMudm9sdW1lU2xpZGVySGlkZVRpbWVvdXQuY2xlYXIoKTtcclxuICAgICAgICAgICAgdm9sdW1lU2xpZGVySG92ZXJlZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdm9sdW1lU2xpZGVyLmdldERvbUVsZW1lbnQoKS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiBtb3VzZSBsZWF2ZXMgdGhlIHNsaWRlciwgb25seSBoaWRlIGl0IGlmIHRoZXJlIGlzIG5vIHNsaWRlIG9wZXJhdGlvbiBpbiBwcm9ncmVzc1xyXG4gICAgICAgICAgICBpZiAodm9sdW1lU2xpZGVyLmlzU2Vla2luZygpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy52b2x1bWVTbGlkZXJIaWRlVGltZW91dC5jbGVhcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudm9sdW1lU2xpZGVySGlkZVRpbWVvdXQucmVzZXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2b2x1bWVTbGlkZXJIb3ZlcmVkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdm9sdW1lU2xpZGVyLm9uU2Vla2VkLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gYSBzbGlkZSBvcGVyYXRpb24gaXMgZG9uZSBhbmQgdGhlIHNsaWRlciBub3QgaG92ZXJlZCAobW91c2Ugb3V0c2lkZSBzbGlkZXIpLCBoaWRlIHNsaWRlciBkZWxheWVkXHJcbiAgICAgICAgICAgIGlmICghdm9sdW1lU2xpZGVySG92ZXJlZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudm9sdW1lU2xpZGVySGlkZVRpbWVvdXQucmVzZXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFZvbHVtZUNvbnRyb2xCdXR0b24ucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWxlYXNlLmNhbGwodGhpcyk7XHJcbiAgICAgICAgdGhpcy52b2x1bWVTbGlkZXJIaWRlVGltZW91dC5jbGVhcigpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBpbnRlcm5hbGx5IG1hbmFnZWQgdm9sdW1lIHRvZ2dsZSBidXR0b24uXHJcbiAgICAgKiBAcmV0dXJucyB7Vm9sdW1lVG9nZ2xlQnV0dG9ufVxyXG4gICAgICovXHJcbiAgICBWb2x1bWVDb250cm9sQnV0dG9uLnByb3RvdHlwZS5nZXRWb2x1bWVUb2dnbGVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudm9sdW1lVG9nZ2xlQnV0dG9uO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBpbnRlcm5hbGx5IG1hbmFnZWQgdm9sdW1lIHNpbGRlci5cclxuICAgICAqIEByZXR1cm5zIHtWb2x1bWVTbGlkZXJ9XHJcbiAgICAgKi9cclxuICAgIFZvbHVtZUNvbnRyb2xCdXR0b24ucHJvdG90eXBlLmdldFZvbHVtZVNsaWRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52b2x1bWVTbGlkZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZvbHVtZUNvbnRyb2xCdXR0b247XHJcbn0oY29udGFpbmVyXzEuQ29udGFpbmVyKSk7XHJcbmV4cG9ydHMuVm9sdW1lQ29udHJvbEJ1dHRvbiA9IFZvbHVtZUNvbnRyb2xCdXR0b247XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy92b2x1bWVjb250cm9sYnV0dG9uLnRzXG4vLyBtb2R1bGUgaWQgPSA3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGJ1dHRvbl8xID0gcmVxdWlyZShcIi4vYnV0dG9uXCIpO1xyXG52YXIgc3RyaW5ndXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9zdHJpbmd1dGlsc1wiKTtcclxuLyoqXHJcbiAqIEEgYnV0dG9uIHRoYXQgaXMgZGlzcGxheWVkIGR1cmluZyBhZHMgYW5kIGNhbiBiZSB1c2VkIHRvIHNraXAgdGhlIGFkLlxyXG4gKi9cclxudmFyIEFkU2tpcEJ1dHRvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQWRTa2lwQnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQWRTa2lwQnV0dG9uKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbmZpZykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb25maWcgPSBfdGhpcy5tZXJnZUNvbmZpZyhjb25maWcsIHtcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICd1aS1idXR0b24tYWQtc2tpcCcsXHJcbiAgICAgICAgICAgIHNraXBNZXNzYWdlOiB7XHJcbiAgICAgICAgICAgICAgICBjb3VudGRvd246ICdTa2lwIGFkIGluIHtyZW1haW5pbmdUaW1lfScsXHJcbiAgICAgICAgICAgICAgICBza2lwOiAnU2tpcCBhZCcsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBBZFNraXBCdXR0b24ucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwbGF5ZXIsIHVpbWFuYWdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb25maWd1cmUuY2FsbCh0aGlzLCBwbGF5ZXIsIHVpbWFuYWdlcik7XHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7IC8vIFRPRE8gZ2V0IHJpZCBvZiBnZW5lcmljIGNhc3RcclxuICAgICAgICB2YXIgc2tpcE1lc3NhZ2UgPSBjb25maWcuc2tpcE1lc3NhZ2U7XHJcbiAgICAgICAgdmFyIGFkRXZlbnQgPSBudWxsO1xyXG4gICAgICAgIHZhciB1cGRhdGVTa2lwTWVzc2FnZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIERpc3BsYXkgdGhpcyBidXR0b24gb25seSBpZiBhZCBpcyBza2lwcGFibGVcclxuICAgICAgICAgICAgaWYgKGFkRXZlbnQuc2tpcE9mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgc2tpcCBtZXNzYWdlIG9uIHRoZSBidXR0b25cclxuICAgICAgICAgICAgaWYgKHBsYXllci5nZXRDdXJyZW50VGltZSgpIDwgYWRFdmVudC5za2lwT2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUZXh0KHN0cmluZ3V0aWxzXzEuU3RyaW5nVXRpbHMucmVwbGFjZUFkTWVzc2FnZVBsYWNlaG9sZGVycyhjb25maWcuc2tpcE1lc3NhZ2UuY291bnRkb3duLCBhZEV2ZW50LnNraXBPZmZzZXQsIHBsYXllcikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0VGV4dChjb25maWcuc2tpcE1lc3NhZ2Uuc2tpcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBhZFN0YXJ0SGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBhZEV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgIHNraXBNZXNzYWdlID0gYWRFdmVudC5za2lwTWVzc2FnZSB8fCBza2lwTWVzc2FnZTtcclxuICAgICAgICAgICAgdXBkYXRlU2tpcE1lc3NhZ2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1RJTUVfQ0hBTkdFRCwgdXBkYXRlU2tpcE1lc3NhZ2VIYW5kbGVyKTtcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9USU1FX1VQREFURUQsIHVwZGF0ZVNraXBNZXNzYWdlSGFuZGxlcik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgYWRFbmRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9USU1FX0NIQU5HRUQsIHVwZGF0ZVNraXBNZXNzYWdlSGFuZGxlcik7XHJcbiAgICAgICAgICAgIHBsYXllci5yZW1vdmVFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfVElNRV9VUERBVEVELCB1cGRhdGVTa2lwTWVzc2FnZUhhbmRsZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQURfU1RBUlRFRCwgYWRTdGFydEhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0FEX1NLSVBQRUQsIGFkRW5kSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQURfRVJST1IsIGFkRW5kSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQURfRklOSVNIRUQsIGFkRW5kSGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFRyeSB0byBza2lwIHRoZSBhZCAodGhpcyBvbmx5IHdvcmtzIGlmIGl0IGlzIHNraXBwYWJsZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHRha2UgZXh0cmEgY2FyZSBvZiB0aGF0IGhlcmUpXHJcbiAgICAgICAgICAgIHBsYXllci5za2lwQWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQWRTa2lwQnV0dG9uO1xyXG59KGJ1dHRvbl8xLkJ1dHRvbikpO1xyXG5leHBvcnRzLkFkU2tpcEJ1dHRvbiA9IEFkU2tpcEJ1dHRvbjtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2Fkc2tpcGJ1dHRvbi50c1xuLy8gbW9kdWxlIGlkID0gODBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBsYWJlbF8xID0gcmVxdWlyZShcIi4vbGFiZWxcIik7XHJcbnZhciBzdHJpbmd1dGlsc18xID0gcmVxdWlyZShcIi4uL3N0cmluZ3V0aWxzXCIpO1xyXG4vKipcclxuICogQSBsYWJlbCB0aGF0IGRpc3BsYXlzIGEgbWVzc2FnZSBhYm91dCBhIHJ1bm5pbmcgYWQsIG9wdGlvbmFsbHkgd2l0aCBhIGNvdW50ZG93bi5cclxuICovXHJcbnZhciBBZE1lc3NhZ2VMYWJlbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQWRNZXNzYWdlTGFiZWwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBZE1lc3NhZ2VMYWJlbChjb25maWcpIHtcclxuICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb25maWcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29uZmlnID0gX3RoaXMubWVyZ2VDb25maWcoY29uZmlnLCB7XHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAndWktbGFiZWwtYWQtbWVzc2FnZScsXHJcbiAgICAgICAgICAgIHRleHQ6ICdUaGlzIGFkIHdpbGwgZW5kIGluIHtyZW1haW5pbmdUaW1lfSBzZWNvbmRzLicsXHJcbiAgICAgICAgfSwgX3RoaXMuY29uZmlnKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBBZE1lc3NhZ2VMYWJlbC5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgdGV4dCA9IHRoaXMuZ2V0Q29uZmlnKCkudGV4dDtcclxuICAgICAgICB2YXIgdXBkYXRlTWVzc2FnZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFRleHQoc3RyaW5ndXRpbHNfMS5TdHJpbmdVdGlscy5yZXBsYWNlQWRNZXNzYWdlUGxhY2Vob2xkZXJzKHRleHQsIG51bGwsIHBsYXllcikpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGFkU3RhcnRIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRleHQgPSBldmVudC5hZE1lc3NhZ2UgfHwgdGV4dDtcclxuICAgICAgICAgICAgdXBkYXRlTWVzc2FnZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fVElNRV9DSEFOR0VELCB1cGRhdGVNZXNzYWdlSGFuZGxlcik7XHJcbiAgICAgICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0NBU1RfVElNRV9VUERBVEVELCB1cGRhdGVNZXNzYWdlSGFuZGxlcik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgYWRFbmRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBwbGF5ZXIucmVtb3ZlRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9USU1FX0NIQU5HRUQsIHVwZGF0ZU1lc3NhZ2VIYW5kbGVyKTtcclxuICAgICAgICAgICAgcGxheWVyLnJlbW92ZUV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQ0FTVF9USU1FX1VQREFURUQsIHVwZGF0ZU1lc3NhZ2VIYW5kbGVyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0FEX1NUQVJURUQsIGFkU3RhcnRIYW5kbGVyKTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9BRF9TS0lQUEVELCBhZEVuZEhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0FEX0VSUk9SLCBhZEVuZEhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0FEX0ZJTklTSEVELCBhZEVuZEhhbmRsZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBZE1lc3NhZ2VMYWJlbDtcclxufShsYWJlbF8xLkxhYmVsKSk7XHJcbmV4cG9ydHMuQWRNZXNzYWdlTGFiZWwgPSBBZE1lc3NhZ2VMYWJlbDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbGliL3VpbWFuYWdlci9jb21wb25lbnRzL2FkbWVzc2FnZWxhYmVsLnRzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNsaWNrb3ZlcmxheV8xID0gcmVxdWlyZShcIi4vY2xpY2tvdmVybGF5XCIpO1xyXG4vKipcclxuICogQSBzaW1wbGUgY2xpY2sgY2FwdHVyZSBvdmVybGF5IGZvciBjbGlja1Rocm91Z2hVcmxzIG9mIGFkcy5cclxuICovXHJcbnZhciBBZENsaWNrT3ZlcmxheSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQWRDbGlja092ZXJsYXksIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBZENsaWNrT3ZlcmxheSgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBBZENsaWNrT3ZlcmxheS5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKHBsYXllciwgdWltYW5hZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNvbmZpZ3VyZS5jYWxsKHRoaXMsIHBsYXllciwgdWltYW5hZ2VyKTtcclxuICAgICAgICB2YXIgY2xpY2tUaHJvdWdoVXJsID0gbnVsbDtcclxuICAgICAgICB2YXIgY2xpY2tUaHJvdWdoRW5hYmxlZCA9ICFwbGF5ZXIuZ2V0Q29uZmlnKCkuYWR2ZXJ0aXNpbmdcclxuICAgICAgICAgICAgfHwgIXBsYXllci5nZXRDb25maWcoKS5hZHZlcnRpc2luZy5oYXNPd25Qcm9wZXJ0eSgnY2xpY2tUaHJvdWdoRW5hYmxlZCcpXHJcbiAgICAgICAgICAgIHx8IHBsYXllci5nZXRDb25maWcoKS5hZHZlcnRpc2luZy5jbGlja1Rocm91Z2hFbmFibGVkO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0FEX1NUQVJURUQsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBjbGlja1Rocm91Z2hVcmwgPSBldmVudC5jbGlja1Rocm91Z2hVcmw7XHJcbiAgICAgICAgICAgIGlmIChjbGlja1Rocm91Z2hFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRVcmwoY2xpY2tUaHJvdWdoVXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIGNsaWNrLXRocm91Z2ggaXMgZGlzYWJsZWQsIHdlIHNldCB0aGUgdXJsIHRvIG51bGwgdG8gYXZvaWQgaXQgb3BlblxyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0VXJsKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gQ2xlYXIgY2xpY2stdGhyb3VnaCBVUkwgd2hlbiBhZCBoYXMgZmluaXNoZWRcclxuICAgICAgICB2YXIgYWRGaW5pc2hlZEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFVybChudWxsKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0FEX0ZJTklTSEVELCBhZEZpbmlzaGVkSGFuZGxlcik7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fQURfU0tJUFBFRCwgYWRGaW5pc2hlZEhhbmRsZXIpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX0FEX0VSUk9SLCBhZEZpbmlzaGVkSGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFBhdXNlIHRoZSBhZCB3aGVuIG92ZXJsYXkgaXMgY2xpY2tlZFxyXG4gICAgICAgICAgICBwbGF5ZXIucGF1c2UoJ3VpLWNvbnRlbnQtY2xpY2snKTtcclxuICAgICAgICAgICAgLy8gTm90aWZ5IHRoZSBwbGF5ZXIgb2YgdGhlIGNsaWNrZWQgYWRcclxuICAgICAgICAgICAgcGxheWVyLmZpcmVFdmVudChwbGF5ZXIuRVZFTlQuT05fQURfQ0xJQ0tFRCwge1xyXG4gICAgICAgICAgICAgICAgY2xpY2tUaHJvdWdoVXJsOiBjbGlja1Rocm91Z2hVcmwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBZENsaWNrT3ZlcmxheTtcclxufShjbGlja292ZXJsYXlfMS5DbGlja092ZXJsYXkpKTtcclxuZXhwb3J0cy5BZENsaWNrT3ZlcmxheSA9IEFkQ2xpY2tPdmVybGF5O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvdWltYW5hZ2VyL2NvbXBvbmVudHMvYWRjbGlja292ZXJsYXkudHNcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdWljb250YWluZXJfMSA9IHJlcXVpcmUoXCIuL3VpY29udGFpbmVyXCIpO1xyXG52YXIgdGltZW91dF8xID0gcmVxdWlyZShcIi4uL3RpbWVvdXRcIik7XHJcbi8qKlxyXG4gKiBUaGUgYmFzZSBjb250YWluZXIgZm9yIENhc3QgcmVjZWl2ZXJzIHRoYXQgY29udGFpbnMgYWxsIG9mIHRoZSBVSSBhbmQgdGFrZXMgY2FyZSB0aGF0IHRoZSBVSSBpcyBzaG93biBvblxyXG4gKiBjZXJ0YWluIHBsYXliYWNrIGV2ZW50cy5cclxuICovXHJcbnZhciBDYXN0VUlDb250YWluZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENhc3RVSUNvbnRhaW5lciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENhc3RVSUNvbnRhaW5lcihjb25maWcpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uZmlnKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgQ2FzdFVJQ29udGFpbmVyLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocGxheWVyLCB1aW1hbmFnZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29uZmlndXJlLmNhbGwodGhpcywgcGxheWVyLCB1aW1hbmFnZXIpO1xyXG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLmdldENvbmZpZygpO1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogU2hvdyBVSSBvbiBDYXN0IGRldmljZXMgYXQgY2VydGFpbiBwbGF5YmFjayBldmVudHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFNpbmNlIGEgQ2FzdCByZWNlaXZlciBkb2VzIG5vdCBoYXZlIGEgZGlyZWN0IEhDSSwgd2Ugc2hvdyB0aGUgVUkgb24gY2VydGFpbiBwbGF5YmFjayBldmVudHMgdG8gZ2l2ZSB0aGUgdXNlclxyXG4gICAgICAgICAqIGEgY2hhbmNlIHRvIHNlZSBvbiB0aGUgc2NyZWVuIHdoYXQncyBnb2luZyBvbiwgZS5nLiBvbiBwbGF5L3BhdXNlIG9yIGEgc2VlayB0aGUgVUkgaXMgc2hvd24gYW5kIHRoZSB1c2VyIGNhblxyXG4gICAgICAgICAqIHNlZSB0aGUgY3VycmVudCB0aW1lIGFuZCBwb3NpdGlvbiBvbiB0aGUgc2VlayBiYXIuXHJcbiAgICAgICAgICogVGhlIFVJIGlzIHNob3duIHBlcm1hbmVudGx5IHdoaWxlIHBsYXliYWNrIGlzIHBhdXNlZCwgb3RoZXJ3aXNlIGhpZGVzIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgdGhlIGNvbmZpZ3VyZWRcclxuICAgICAgICAgKiBoaWRlIGRlbGF5IHRpbWUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFyIGlzVWlTaG93biA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBoaWRlVWkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHVpbWFuYWdlci5vbkNvbnRyb2xzSGlkZS5kaXNwYXRjaChfdGhpcyk7XHJcbiAgICAgICAgICAgIGlzVWlTaG93biA9IGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jYXN0VWlIaWRlVGltZW91dCA9IG5ldyB0aW1lb3V0XzEuVGltZW91dChjb25maWcuaGlkZURlbGF5LCBoaWRlVWkpO1xyXG4gICAgICAgIHZhciBzaG93VWkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNVaVNob3duKSB7XHJcbiAgICAgICAgICAgICAgICB1aW1hbmFnZXIub25Db250cm9sc1Nob3cuZGlzcGF0Y2goX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgaXNVaVNob3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNob3dVaVBlcm1hbmVudGx5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzaG93VWkoKTtcclxuICAgICAgICAgICAgX3RoaXMuY2FzdFVpSGlkZVRpbWVvdXQuY2xlYXIoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzaG93VWlXaXRoVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2hvd1VpKCk7XHJcbiAgICAgICAgICAgIF90aGlzLmNhc3RVaUhpZGVUaW1lb3V0LnN0YXJ0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2hvd1VpQWZ0ZXJTZWVrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzUGxheWluZygpKSB7XHJcbiAgICAgICAgICAgICAgICBzaG93VWlXaXRoVGltZW91dCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2hvd1VpUGVybWFuZW50bHkoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUkVBRFksIHNob3dVaVdpdGhUaW1lb3V0KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TT1VSQ0VfTE9BREVELCBzaG93VWlXaXRoVGltZW91dCk7XHJcbiAgICAgICAgcGxheWVyLmFkZEV2ZW50SGFuZGxlcihwbGF5ZXIuRVZFTlQuT05fUExBWSwgc2hvd1VpV2l0aFRpbWVvdXQpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1BBVVNFRCwgc2hvd1VpUGVybWFuZW50bHkpO1xyXG4gICAgICAgIHBsYXllci5hZGRFdmVudEhhbmRsZXIocGxheWVyLkVWRU5ULk9OX1NFRUssIHNob3dVaVBlcm1hbmVudGx5KTtcclxuICAgICAgICBwbGF5ZXIuYWRkRXZlbnRIYW5kbGVyKHBsYXllci5FVkVOVC5PTl9TRUVLRUQsIHNob3dVaUFmdGVyU2Vlayk7XHJcbiAgICB9O1xyXG4gICAgQ2FzdFVJQ29udGFpbmVyLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVsZWFzZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY2FzdFVpSGlkZVRpbWVvdXQuY2xlYXIoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2FzdFVJQ29udGFpbmVyO1xyXG59KHVpY29udGFpbmVyXzEuVUlDb250YWluZXIpKTtcclxuZXhwb3J0cy5DYXN0VUlDb250YWluZXIgPSBDYXN0VUlDb250YWluZXI7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xpYi91aW1hbmFnZXIvY29tcG9uZW50cy9jYXN0dWljb250YWluZXIudHNcbi8vIG1vZHVsZSBpZCA9IDgzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qISBIaXZlIFN0YXRzIFBhY2sgYnVpbGQgNC4xLjAgQ29weXJpZ2h0KGMpIDIwMTUgSGl2ZVN0cmVhbWluZyBBQiwgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEF1dGhvcnM6IG1pa2FlbC5ob2dxdmlzdEBoaXZlc3RyZWFtaW5nLmNvbSAtIHJpY2NhcmRvLnJlYWxlQGhpdmVzdHJlYW1pbmcuY29tIC0gcm9iZXJ0by5yb3ZlcnNvQGhpdmVzdHJlYW1pbmcuY29tICovXG4vKiEgQXRhdHVzSnMgLSB2Mi4zLjEyIC0gMjAxNi0wNy0wM1xuICogQ29weXJpZ2h0IChjKSAyMDE2IEF0YXR1cyAqL1xuIWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYil9ZnVuY3Rpb24gYyhhKXtyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgYX1pZihhKXt2YXIgZD17fSxlPWEuVHJhY2VLaXQsZj1bXS5zbGljZSxnPVwiP1wiO2Qubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLlRyYWNlS2l0PWUsZH0sZC53cmFwPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0cnl7cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfWNhdGNoKGIpe3Rocm93IGQucmVwb3J0KGIpLGJ9fXJldHVybiBifSxkLnJlcG9ydD1mdW5jdGlvbigpe2Z1bmN0aW9uIGMoYSl7aSgpLG0ucHVzaChhKX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj1tLmxlbmd0aC0xO2I+PTA7LS1iKW1bYl09PT1hJiZtLnNwbGljZShiLDEpfWZ1bmN0aW9uIGcoYSxjKXt2YXIgZT1udWxsO2lmKCFjfHxkLmNvbGxlY3RXaW5kb3dFcnJvcnMpe2Zvcih2YXIgZyBpbiBtKWlmKGIobSxnKSl0cnl7bVtnXS5hcHBseShudWxsLFthXS5jb25jYXQoZi5jYWxsKGFyZ3VtZW50cywyKSkpfWNhdGNoKGgpe2U9aH1pZihlKXRocm93IGV9fWZ1bmN0aW9uIGgoYSxiLGMsZSxmKXt2YXIgaD1udWxsO2lmKGYpaD1kLmNvbXB1dGVTdGFja1RyYWNlKGYpO2Vsc2UgaWYobylkLmNvbXB1dGVTdGFja1RyYWNlLmF1Z21lbnRTdGFja1RyYWNlV2l0aEluaXRpYWxFbGVtZW50KG8sYixjLGEpLGg9byxvPW51bGwsbj1udWxsO2Vsc2V7dmFyIGk9e3VybDpiLGxpbmU6Yyxjb2x1bW46ZX07aS5mdW5jPWQuY29tcHV0ZVN0YWNrVHJhY2UuZ3Vlc3NGdW5jdGlvbk5hbWUoaS51cmwsaS5saW5lKSxpLmNvbnRleHQ9ZC5jb21wdXRlU3RhY2tUcmFjZS5nYXRoZXJDb250ZXh0KGkudXJsLGkubGluZSksaD17bW9kZTpcIm9uZXJyb3JcIixtZXNzYWdlOmEsdXJsOmRvY3VtZW50LmxvY2F0aW9uLmhyZWYsc3RhY2s6W2ldLHVzZXJhZ2VudDpuYXZpZ2F0b3IudXNlckFnZW50fX1yZXR1cm4gZyhoLFwiZnJvbSB3aW5kb3cub25lcnJvclwiKSxrP2suYXBwbHkodGhpcyxhcmd1bWVudHMpOiExfWZ1bmN0aW9uIGkoKXtsIT09ITAmJihrPWEub25lcnJvcixhLm9uZXJyb3I9aCxsPSEwKX1mdW5jdGlvbiBqKGIpe3ZhciBjPWYuY2FsbChhcmd1bWVudHMsMSk7aWYobyl7aWYobj09PWIpcmV0dXJuO3ZhciBlPW87bz1udWxsLG49bnVsbCxnLmFwcGx5KG51bGwsW2UsbnVsbF0uY29uY2F0KGMpKX12YXIgaD1kLmNvbXB1dGVTdGFja1RyYWNlKGIpO3Rocm93IG89aCxuPWIsYS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bj09PWImJihvPW51bGwsbj1udWxsLGcuYXBwbHkobnVsbCxbaCxudWxsXS5jb25jYXQoYykpKX0saC5pbmNvbXBsZXRlPzJlMzowKSxifXZhciBrLGwsbT1bXSxuPW51bGwsbz1udWxsO3JldHVybiBqLnN1YnNjcmliZT1jLGoudW5zdWJzY3JpYmU9ZSxqfSgpLGQuY29tcHV0ZVN0YWNrVHJhY2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGIpe2lmKCFkLnJlbW90ZUZldGNoaW5nKXJldHVyblwiXCI7dHJ5e3ZhciBjPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgYS5YTUxIdHRwUmVxdWVzdH1jYXRjaChiKXtyZXR1cm4gbmV3IGEuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfX0sZT1jKCk7cmV0dXJuIGUub3BlbihcIkdFVFwiLGIsITEpLGUuc2VuZChcIlwiKSxlLnJlc3BvbnNlVGV4dH1jYXRjaChmKXtyZXR1cm5cIlwifX1mdW5jdGlvbiBmKGEpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybltdO2lmKCFiKHcsYSkpe3ZhciBjPVwiXCIsZD1cIlwiO3RyeXtkPWRvY3VtZW50LmRvbWFpbn1jYXRjaChmKXt9LTEhPT1hLmluZGV4T2YoZCkmJihjPWUoYSkpLHdbYV09Yz9jLnNwbGl0KFwiXFxuXCIpOltdfXJldHVybiB3W2FdfWZ1bmN0aW9uIGgoYSxiKXt2YXIgZCxlPS9mdW5jdGlvbiAoW14oXSopXFwoKFteKV0qKVxcKS8saD0vWydcIl0/KFswLTlBLVphLXokX10rKVsnXCJdP1xccypbOj1dXFxzKihmdW5jdGlvbnxldmFsfG5ldyBGdW5jdGlvbikvLGk9XCJcIixqPTEwLGs9ZihhKTtpZighay5sZW5ndGgpcmV0dXJuIGc7Zm9yKHZhciBsPTA7aj5sOysrbClpZihpPWtbYi1sXStpLCFjKGkpKXtpZihkPWguZXhlYyhpKSlyZXR1cm4gZFsxXTtpZihkPWUuZXhlYyhpKSlyZXR1cm4gZFsxXX1yZXR1cm4gZ31mdW5jdGlvbiBpKGEsYil7dmFyIGU9ZihhKTtpZighZS5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIGc9W10saD1NYXRoLmZsb29yKGQubGluZXNPZkNvbnRleHQvMiksaT1oK2QubGluZXNPZkNvbnRleHQlMixqPU1hdGgubWF4KDAsYi1oLTEpLGs9TWF0aC5taW4oZS5sZW5ndGgsYitpLTEpO2ItPTE7Zm9yKHZhciBsPWo7az5sOysrbCljKGVbbF0pfHxnLnB1c2goZVtsXSk7cmV0dXJuIGcubGVuZ3RoPjA/ZzpudWxsfWZ1bmN0aW9uIGooYSl7cmV0dXJuIGEucmVwbGFjZSgvW1xcLVxcW1xcXXt9KCkqKz8uLFxcXFxcXF4kfCNdL2csXCJcXFxcJCZcIil9ZnVuY3Rpb24gayhhKXtyZXR1cm4gaihhKS5yZXBsYWNlKFwiPFwiLFwiKD86PHwmbHQ7KVwiKS5yZXBsYWNlKFwiPlwiLFwiKD86PnwmZ3Q7KVwiKS5yZXBsYWNlKFwiJlwiLFwiKD86JnwmYW1wOylcIikucmVwbGFjZSgnXCInLCcoPzpcInwmcXVvdDspJykucmVwbGFjZSgvXFxzKy9nLFwiXFxcXHMrXCIpfWZ1bmN0aW9uIGwoYSxiKXtmb3IodmFyIGMsZCxlPTAsZz1iLmxlbmd0aDtnPmU7KytlKWlmKChjPWYoYltlXSkpLmxlbmd0aCYmKGM9Yy5qb2luKFwiXFxuXCIpLGQ9YS5leGVjKGMpKSlyZXR1cm57dXJsOmJbZV0sbGluZTpjLnN1YnN0cmluZygwLGQuaW5kZXgpLnNwbGl0KFwiXFxuXCIpLmxlbmd0aCxjb2x1bW46ZC5pbmRleC1jLmxhc3RJbmRleE9mKFwiXFxuXCIsZC5pbmRleCktMX07cmV0dXJuIG51bGx9ZnVuY3Rpb24gbShhLGIsYyl7dmFyIGQsZT1mKGIpLGc9bmV3IFJlZ0V4cChcIlxcXFxiXCIraihhKStcIlxcXFxiXCIpO3JldHVybiBjLT0xLGUmJmUubGVuZ3RoPmMmJihkPWcuZXhlYyhlW2NdKSk/ZC5pbmRleDpudWxsfWZ1bmN0aW9uIG4oYil7Zm9yKHZhciBjLGQsZSxmLGc9W2EubG9jYXRpb24uaHJlZl0saD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSxpPVwiXCIrYixtPS9eZnVuY3Rpb24oPzpcXHMrKFtcXHckXSspKT9cXHMqXFwoKFtcXHdcXHMsXSopXFwpXFxzKlxce1xccyooXFxTW1xcc1xcU10qXFxTKVxccypcXH1cXHMqJC8sbj0vXmZ1bmN0aW9uIG9uKFtcXHckXSspXFxzKlxcKGV2ZW50XFwpXFxzKlxce1xccyooXFxTW1xcc1xcU10qXFxTKVxccypcXH1cXHMqJC8sbz0wO288aC5sZW5ndGg7KytvKXt2YXIgcD1oW29dO3Auc3JjJiZnLnB1c2gocC5zcmMpfWlmKGU9bS5leGVjKGkpKXt2YXIgcT1lWzFdP1wiXFxcXHMrXCIrZVsxXTpcIlwiLHI9ZVsyXS5zcGxpdChcIixcIikuam9pbihcIlxcXFxzKixcXFxccypcIik7Yz1qKGVbM10pLnJlcGxhY2UoLzskLyxcIjs/XCIpLGQ9bmV3IFJlZ0V4cChcImZ1bmN0aW9uXCIrcStcIlxcXFxzKlxcXFwoXFxcXHMqXCIrcitcIlxcXFxzKlxcXFwpXFxcXHMqe1xcXFxzKlwiK2MrXCJcXFxccyp9XCIpfWVsc2UgZD1uZXcgUmVnRXhwKGooaSkucmVwbGFjZSgvXFxzKy9nLFwiXFxcXHMrXCIpKTtpZihmPWwoZCxnKSlyZXR1cm4gZjtpZihlPW4uZXhlYyhpKSl7dmFyIHM9ZVsxXTtpZihjPWsoZVsyXSksZD1uZXcgUmVnRXhwKFwib25cIitzK1wiPVtcXFxcJ1xcXCJdXFxcXHMqXCIrYytcIlxcXFxzKltcXFxcJ1xcXCJdXCIsXCJpXCIpLGY9bChkLGdbMF0pKXJldHVybiBmO2lmKGQ9bmV3IFJlZ0V4cChjKSxmPWwoZCxnKSlyZXR1cm4gZn1yZXR1cm4gbnVsbH1mdW5jdGlvbiBvKGEpe2lmKCFhLnN0YWNrKXJldHVybiBudWxsO2Zvcih2YXIgYixkLGU9L15cXHMqYXQgKC4qPykgP1xcKD8oKD86ZmlsZXxodHRwcz98Y2hyb21lLWV4dGVuc2lvbik6Lio/KTooXFxkKykoPzo6KFxcZCspKT9cXCk/XFxzKiQvaSxmPS9eXFxzKiguKj8pKD86XFwoKC4qPylcXCkpP0A/KCg/OmZpbGV8aHR0cHM/fGNocm9tZSk6Lio/KTooXFxkKykoPzo6KFxcZCspKT9cXHMqJC9pLGo9L15cXHMqYXQgKD86KCg/OlxcW29iamVjdCBvYmplY3RcXF0pPy4rKSApP1xcKD8oKD86bXMtYXBweHxodHRwfGh0dHBzKTouKj8pOihcXGQrKSg/OjooXFxkKykpP1xcKT9cXHMqJC9pLGs9YS5zdGFjay5zcGxpdChcIlxcblwiKSxsPVtdLG49L14oLiopIGlzIHVuZGVmaW5lZCQvLmV4ZWMoYS5tZXNzYWdlKSxvPTAscD1rLmxlbmd0aDtwPm87KytvKXtpZihiPWYuZXhlYyhrW29dKSlkPXt1cmw6YlszXSxmdW5jOmJbMV18fGcsYXJnczpiWzJdP2JbMl0uc3BsaXQoXCIsXCIpOlwiXCIsbGluZTorYls0XSxjb2x1bW46Yls1XT8rYls1XTpudWxsfTtlbHNlIGlmKGI9ZS5leGVjKGtbb10pKWQ9e3VybDpiWzJdLGZ1bmM6YlsxXXx8ZyxsaW5lOitiWzNdLGNvbHVtbjpiWzRdPytiWzRdOm51bGx9O2Vsc2V7aWYoIShiPWouZXhlYyhrW29dKSkpY29udGludWU7ZD17dXJsOmJbMl0sZnVuYzpiWzFdfHxnLGxpbmU6K2JbM10sY29sdW1uOmJbNF0/K2JbNF06bnVsbH19IWQuZnVuYyYmZC5saW5lJiYoZC5mdW5jPWgoZC51cmwsZC5saW5lKSksZC5saW5lJiYoZC5jb250ZXh0PWkoZC51cmwsZC5saW5lKSksbC5wdXNoKGQpfXJldHVybiBsLmxlbmd0aD8obFswXSYmbFswXS5saW5lJiYhbFswXS5jb2x1bW4mJm4/bFswXS5jb2x1bW49bShuWzFdLGxbMF0udXJsLGxbMF0ubGluZSk6bFswXS5jb2x1bW58fGMoYS5jb2x1bW5OdW1iZXIpfHwobFswXS5jb2x1bW49YS5jb2x1bW5OdW1iZXIrMSkse21vZGU6XCJzdGFja1wiLG5hbWU6YS5uYW1lLG1lc3NhZ2U6YS5tZXNzYWdlLHVybDpkb2N1bWVudC5sb2NhdGlvbi5ocmVmLHN0YWNrOmwsdXNlcmFnZW50Om5hdmlnYXRvci51c2VyQWdlbnR9KTpudWxsfWZ1bmN0aW9uIHAoYSl7Zm9yKHZhciBiLGM9YS5zdGFja3RyYWNlLGQ9LyBsaW5lIChcXGQrKSwgY29sdW1uIChcXGQrKSBpbiAoPzo8YW5vbnltb3VzIGZ1bmN0aW9uOiAoW14+XSspPnwoW15cXCldKykpXFwoKC4qKVxcKSBpbiAoLiopOlxccyokL2ksZT1jLnNwbGl0KFwiXFxuXCIpLGY9W10sZz0wLGo9ZS5sZW5ndGg7aj5nO2crPTIpaWYoYj1kLmV4ZWMoZVtnXSkpe3ZhciBrPXtsaW5lOitiWzFdLGNvbHVtbjorYlsyXSxmdW5jOmJbM118fGJbNF0sYXJnczpiWzVdP2JbNV0uc3BsaXQoXCIsXCIpOltdLHVybDpiWzZdfTtpZighay5mdW5jJiZrLmxpbmUmJihrLmZ1bmM9aChrLnVybCxrLmxpbmUpKSxrLmxpbmUpdHJ5e2suY29udGV4dD1pKGsudXJsLGsubGluZSl9Y2F0Y2gobCl7fWsuY29udGV4dHx8KGsuY29udGV4dD1bZVtnKzFdXSksZi5wdXNoKGspfXJldHVybiBmLmxlbmd0aD97bW9kZTpcInN0YWNrdHJhY2VcIixuYW1lOmEubmFtZSxtZXNzYWdlOmEubWVzc2FnZSx1cmw6ZG9jdW1lbnQubG9jYXRpb24uaHJlZixzdGFjazpmLHVzZXJhZ2VudDpuYXZpZ2F0b3IudXNlckFnZW50fTpudWxsfWZ1bmN0aW9uIHEoYyl7dmFyIGQ9Yy5tZXNzYWdlLnNwbGl0KFwiXFxuXCIpO2lmKGQubGVuZ3RoPDQpcmV0dXJuIG51bGw7dmFyIGUsZyxqLG0sbj0vXlxccypMaW5lIChcXGQrKSBvZiBsaW5rZWQgc2NyaXB0ICgoPzpmaWxlfGh0dHBzPylcXFMrKSg/OjogaW4gZnVuY3Rpb24gKFxcUyspKT9cXHMqJC9pLG89L15cXHMqTGluZSAoXFxkKykgb2YgaW5saW5lIyhcXGQrKSBzY3JpcHQgaW4gKCg/OmZpbGV8aHR0cHM/KVxcUyspKD86OiBpbiBmdW5jdGlvbiAoXFxTKykpP1xccyokL2kscD0vXlxccypMaW5lIChcXGQrKSBvZiBmdW5jdGlvbiBzY3JpcHRcXHMqJC9pLHE9W10scj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSxzPVtdO2ZvcihnIGluIHIpYihyLGcpJiYhcltnXS5zcmMmJnMucHVzaChyW2ddKTtmb3IoZz0yLGo9ZC5sZW5ndGg7aj5nO2crPTIpe3ZhciB0PW51bGw7aWYoZT1uLmV4ZWMoZFtnXSkpdD17dXJsOmVbMl0sZnVuYzplWzNdLGxpbmU6K2VbMV19O2Vsc2UgaWYoZT1vLmV4ZWMoZFtnXSkpe3Q9e3VybDplWzNdLGZ1bmM6ZVs0XX07dmFyIHU9K2VbMV0sdj1zW2VbMl0tMV07aWYodiYmKG09Zih0LnVybCkpKXttPW0uam9pbihcIlxcblwiKTt2YXIgdz1tLmluZGV4T2Yodi5pbm5lclRleHQpO3c+PTAmJih0LmxpbmU9dSttLnN1YnN0cmluZygwLHcpLnNwbGl0KFwiXFxuXCIpLmxlbmd0aCl9fWVsc2UgaWYoZT1wLmV4ZWMoZFtnXSkpe3ZhciB4PWEubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiokLyxcIlwiKSx5PWVbMV0sej1uZXcgUmVnRXhwKGsoZFtnKzFdKSk7bT1sKHosW3hdKSx0PXt1cmw6eCxsaW5lOm0/bS5saW5lOnksZnVuYzpcIlwifX1pZih0KXt0LmZ1bmN8fCh0LmZ1bmM9aCh0LnVybCx0LmxpbmUpKTt2YXIgQT1pKHQudXJsLHQubGluZSksQj1BP0FbTWF0aC5mbG9vcihBLmxlbmd0aC8yKV06bnVsbDt0LmNvbnRleHQ9QSYmQi5yZXBsYWNlKC9eXFxzKi8sXCJcIik9PT1kW2crMV0ucmVwbGFjZSgvXlxccyovLFwiXCIpP0E6W2RbZysxXV0scS5wdXNoKHQpfX1yZXR1cm4gcS5sZW5ndGg/e21vZGU6XCJtdWx0aWxpbmVcIixuYW1lOmMubmFtZSxtZXNzYWdlOmRbMF0sdXJsOmRvY3VtZW50LmxvY2F0aW9uLmhyZWYsc3RhY2s6cSx1c2VyYWdlbnQ6bmF2aWdhdG9yLnVzZXJBZ2VudH06bnVsbH1mdW5jdGlvbiByKGEsYixjLGQpe3ZhciBlPXt1cmw6YixsaW5lOmN9O2lmKGUudXJsJiZlLmxpbmUpe2EuaW5jb21wbGV0ZT0hMSxlLmZ1bmN8fChlLmZ1bmM9aChlLnVybCxlLmxpbmUpKSxlLmNvbnRleHR8fChlLmNvbnRleHQ9aShlLnVybCxlLmxpbmUpKTt2YXIgZj0vICcoW14nXSspJyAvLmV4ZWMoZCk7aWYoZiYmKGUuY29sdW1uPW0oZlsxXSxlLnVybCxlLmxpbmUpKSxhLnN0YWNrLmxlbmd0aD4wJiZhLnN0YWNrWzBdLnVybD09PWUudXJsKXtpZihhLnN0YWNrWzBdLmxpbmU9PT1lLmxpbmUpcmV0dXJuITE7aWYoIWEuc3RhY2tbMF0ubGluZSYmYS5zdGFja1swXS5mdW5jPT09ZS5mdW5jKXJldHVybiBhLnN0YWNrWzBdLmxpbmU9ZS5saW5lLGEuc3RhY2tbMF0uY29udGV4dD1lLmNvbnRleHQsITF9cmV0dXJuIGEuc3RhY2sudW5zaGlmdChlKSxhLnBhcnRpYWw9ITAsITB9cmV0dXJuIGEuaW5jb21wbGV0ZT0hMCwhMX1mdW5jdGlvbiBzKGEsYil7Zm9yKHZhciBjLGUsZixpPS9mdW5jdGlvblxccysoW18kYS16QS1aXFx4QTAtXFx1RkZGRl1bXyRhLXpBLVowLTlcXHhBMC1cXHVGRkZGXSopP1xccypcXCgvaSxqPVtdLGs9e30sbD0hMSxvPXMuY2FsbGVyO28mJiFsO289by5jYWxsZXIpaWYobyE9PXQmJm8hPT1kLnJlcG9ydCl7aWYoZT17dXJsOm51bGwsZnVuYzpnLGxpbmU6bnVsbCxjb2x1bW46bnVsbH0sby5uYW1lP2UuZnVuYz1vLm5hbWU6KGM9aS5leGVjKG8udG9TdHJpbmcoKSkpJiYoZS5mdW5jPWNbMV0pLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBlLmZ1bmMpdHJ5e2UuZnVuYz1jLmlucHV0LnN1YnN0cmluZygwLGMuaW5wdXQuaW5kZXhPZihcIntcIikpfWNhdGNoKHApe31pZihmPW4obykpe2UudXJsPWYudXJsLGUubGluZT1mLmxpbmUsZS5mdW5jPT09ZyYmKGUuZnVuYz1oKGUudXJsLGUubGluZSkpO3ZhciBxPS8gJyhbXiddKyknIC8uZXhlYyhhLm1lc3NhZ2V8fGEuZGVzY3JpcHRpb24pO3EmJihlLmNvbHVtbj1tKHFbMV0sZi51cmwsZi5saW5lKSl9a1tcIlwiK29dP2w9ITA6a1tcIlwiK29dPSEwLGoucHVzaChlKX1iJiZqLnNwbGljZSgwLGIpO3ZhciB1PXttb2RlOlwiY2FsbGVyc1wiLG5hbWU6YS5uYW1lLG1lc3NhZ2U6YS5tZXNzYWdlLHVybDpkb2N1bWVudC5sb2NhdGlvbi5ocmVmLHN0YWNrOmosdXNlcmFnZW50Om5hdmlnYXRvci51c2VyQWdlbnR9O3JldHVybiByKHUsYS5zb3VyY2VVUkx8fGEuZmlsZU5hbWUsYS5saW5lfHxhLmxpbmVOdW1iZXIsYS5tZXNzYWdlfHxhLmRlc2NyaXB0aW9uKSx1fWZ1bmN0aW9uIHQoYSxiKXt2YXIgYz1udWxsO2I9bnVsbD09Yj8wOitiO3RyeXtpZihjPXAoYSkpcmV0dXJuIGN9Y2F0Y2goZCl7aWYodil0aHJvdyBkfXRyeXtpZihjPW8oYSkpcmV0dXJuIGN9Y2F0Y2goZCl7aWYodil0aHJvdyBkfXRyeXtpZihjPXEoYSkpcmV0dXJuIGN9Y2F0Y2goZCl7aWYodil0aHJvdyBkfXRyeXtpZihjPXMoYSxiKzEpKXJldHVybiBjfWNhdGNoKGQpe2lmKHYpdGhyb3cgZH1yZXR1cm57bW9kZTpcImZhaWxlZFwifX1mdW5jdGlvbiB1KGEpe2E9KG51bGw9PWE/MDorYSkrMTt0cnl7dGhyb3cgbmV3IEVycm9yfWNhdGNoKGIpe3JldHVybiB0KGIsYSsxKX19dmFyIHY9ITEsdz17fTtyZXR1cm4gdC5hdWdtZW50U3RhY2tUcmFjZVdpdGhJbml0aWFsRWxlbWVudD1yLHQuZ3Vlc3NGdW5jdGlvbk5hbWU9aCx0LmdhdGhlckNvbnRleHQ9aSx0Lm9mQ2FsbGVyPXUsdC5nZXRTb3VyY2U9Zix0fSgpLGQuZXh0ZW5kVG9Bc3luY2hyb25vdXNDYWxsYmFja3M9ZnVuY3Rpb24oKXt2YXIgYj1mdW5jdGlvbihiKXt2YXIgYz1hW2JdO2FbYl09ZnVuY3Rpb24oKXt2YXIgYT1mLmNhbGwoYXJndW1lbnRzKSxiPWFbMF07cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgYiYmKGFbMF09ZC53cmFwKGIpKSxjLmFwcGx5P2MuYXBwbHkodGhpcyxhKTpjKGFbMF0sYVsxXSl9fTtiKFwic2V0VGltZW91dFwiKSxiKFwic2V0SW50ZXJ2YWxcIil9LGQucmVtb3RlRmV0Y2hpbmd8fChkLnJlbW90ZUZldGNoaW5nPSEwKSxkLmNvbGxlY3RXaW5kb3dFcnJvcnN8fChkLmNvbGxlY3RXaW5kb3dFcnJvcnM9ITApLCghZC5saW5lc09mQ29udGV4dHx8ZC5saW5lc09mQ29udGV4dDwxKSYmKGQubGluZXNPZkNvbnRleHQ9MTEpLGEuVHJhY2VLaXQ9ZH19KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Omdsb2JhbCksZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtpZihhKXt2YXIgYz1hLmV2ZW50LmFkZDthLmV2ZW50LmFkZD1mdW5jdGlvbihkLGUsZixnLGgpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGYmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGYuaGFuZGxlcilyZXR1cm4gYy5jYWxsKHRoaXMsZCxlLGYsZyxoKTt2YXIgaTtyZXR1cm4gZi5oYW5kbGVyPyhpPWYuaGFuZGxlcixmLmhhbmRsZXI9Yi53cmFwKGYuaGFuZGxlcikpOihpPWYsZj1iLndyYXAoZikpLGYuZ3VpZD1pLmd1aWQ/aS5ndWlkOmkuZ3VpZD1hLmd1aWQrKyxjLmNhbGwodGhpcyxkLGUsZixnLGgpfTt2YXIgZD1hLmZuLnJlYWR5O2EuZm4ucmVhZHk9ZnVuY3Rpb24oYSl7cmV0dXJuIGQuY2FsbCh0aGlzLGIud3JhcChhKSl9O3ZhciBlPWEuYWpheDthLmFqYXg9ZnVuY3Rpb24oYyxkKXtcIm9iamVjdFwiPT10eXBlb2YgYyYmKGQ9YyxjPXZvaWQgMCksZD1kfHx7fTtmb3IodmFyIGYsZz1bXCJjb21wbGV0ZVwiLFwiZXJyb3JcIixcInN1Y2Nlc3NcIl07Zj1nLnBvcCgpOylhLmlzRnVuY3Rpb24oZFtmXSkmJihkW2ZdPWIud3JhcChkW2ZdKSk7dHJ5e3JldHVybiBjP2UuY2FsbCh0aGlzLGMsZCk6ZS5jYWxsKHRoaXMsZCl9Y2F0Y2goaCl7dGhyb3cgYi5yZXBvcnQoaCksaH19fX0od2luZG93LmpRdWVyeSx3aW5kb3cuVHJhY2VLaXQpLGZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9YSxjPWEuc3BsaXQoXCIvL1wiKVsxXTtpZihjKXt2YXIgZD1jLmluZGV4T2YoXCI/XCIpLGU9Yy50b1N0cmluZygpLnN1YnN0cmluZygwLGQpLGY9ZS5zcGxpdChcIi9cIikuc2xpY2UoMCw0KS5qb2luKFwiL1wiKSxnPWUuc3Vic3RyaW5nKDAsNDgpO2I9Zi5sZW5ndGg8Zy5sZW5ndGg/ZjpnLGIhPT1lJiYoYis9XCIuLlwiKX1yZXR1cm4gYn1mdW5jdGlvbiBmKGEsYixjLGYpe2lmKEsmJihMfHxiLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl7dmFyIGc9XCJBSkFYIEVycm9yOiBcIisoYi5zdGF0dXNUZXh0fHxcInVua25vd25cIikrXCIgXCIrKGMudHlwZXx8XCJ1bmtub3duXCIpK1wiIFwiKyhlKGMudXJsKXx8XCJ1bmtub3duXCIpO1Yuc2VuZChmfHxhLnR5cGUse3N0YXR1czpiLnN0YXR1cyxzdGF0dXNUZXh0OmIuc3RhdHVzVGV4dCx0eXBlOmMudHlwZSx1cmw6Yy51cmwsYWpheEVycm9yTWVzc2FnZTpnLGNvbnRlbnRUeXBlOmMuY29udGVudFR5cGUscmVxdWVzdERhdGE6Yy5kYXRhJiZjLmRhdGEuc2xpY2U/Yy5kYXRhLnNsaWNlKDAsMTAyNDApOmQscmVzcG9uc2VEYXRhOmIucmVzcG9uc2VUZXh0JiZiLnJlc3BvbnNlVGV4dC5zbGljZT9iLnJlc3BvbnNlVGV4dC5zbGljZSgwLDEwMjQwKTpkLGFjdGl2ZVRhcmdldDphLnRhcmdldCYmYS50YXJnZXQuYWN0aXZlRWxlbWVudD9hLnRhcmdldC5hY3RpdmVFbGVtZW50Lm91dGVySFRNTDpkfSl9fWZ1bmN0aW9uIGcoKXtyZXR1cm4gbyYmXCJcIiE9PW8/ITA6KFIubG9nKFwiQXRhdHVzIEFQSSBrZXkgaGFzIG5vdCBiZWVuIGNvbmZpZ3VyZWQsIG1ha2Ugc3VyZSB5b3UgY2FsbCBhdGF0dXMuY29uZmlnKHlvdXJBcGlLZXkpXCIpLCExKX1mdW5jdGlvbiBoKCl7dmFyIGM9Yi5kb2N1bWVudEVsZW1lbnQsZD1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSxlPWEuaW5uZXJXaWR0aHx8Yy5jbGllbnRXaWR0aHx8ZC5jbGllbnRXaWR0aCxmPWEuaW5uZXJIZWlnaHR8fGMuY2xpZW50SGVpZ2h0fHxkLmNsaWVudEhlaWdodDtyZXR1cm57d2lkdGg6ZSxoZWlnaHQ6Zn19ZnVuY3Rpb24gaShhKXt2YXIgYj0obmV3IERhdGUpLnRvSlNPTigpO3RyeXt2YXIgYz1cImF0YXR1c2pzPVwiK2IrXCI9XCIrUi5nZXRSYW5kb21JbnQoKTtcInVuZGVmaW5lZFwiPT10eXBlb2YgbG9jYWxTdG9yYWdlW2NdJiYobG9jYWxTdG9yYWdlW2NdPWEpfWNhdGNoKGQpe1IubG9nKFwiQXRhdHVzOiBMb2NhbFN0b3JhZ2UgZnVsbCwgY2Fubm90IHNhdmUgZXhjZXB0aW9uXCIpfX1mdW5jdGlvbiBqKCl7dHJ5e3JldHVyblwibG9jYWxTdG9yYWdlXCJpbiBhJiZudWxsIT09YS5sb2NhbFN0b3JhZ2V9Y2F0Y2goYil7cmV0dXJuITF9fWZ1bmN0aW9uIGsoKXtpZihqKCkmJmxvY2FsU3RvcmFnZS5sZW5ndGg+MClmb3IodmFyIGEgaW4gbG9jYWxTdG9yYWdlKWlmKFwiYXRhdHVzanM9XCI9PT1hLnN1YnN0cmluZygwLDkpKXt0cnl7dmFyIGI9SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbYV0pO1wiYXBpa2V5XCJpbiBiJiZtKE4sYil9Y2F0Y2goYyl7Ui5sb2coXCJBdGF0dXM6IEludmFsaWQgSlNPTiBvYmplY3QgaW4gTG9jYWxTdG9yYWdlXCIpfWxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGEpfX1mdW5jdGlvbiBsKGEsYyl7aWYoYz1jfHx7fSwhYS5zdGFja3x8IWEuc3RhY2subGVuZ3RoKXJldHVybiB2b2lkIFIubG9nKFwiQXRhdHVzOiBDYW5jZWxpbmcgc2VuZCBkdWUgdG8gbm8gc3RhY2t0cmFjZS5cIik7Ui5pc0VtcHR5KGMuY3VzdG9tRGF0YSkmJihjLmN1c3RvbURhdGE9XCJmdW5jdGlvblwiPT10eXBlb2YgcD9wKCk6cCksUi5pc0VtcHR5KGMudGFncykmJihjLnRhZ3M9RSk7dmFyIGQ9Yy5jdXN0b21EYXRhJiZjLmN1c3RvbURhdGEuYWpheEVycm9yTWVzc2FnZXx8YS5tZXNzYWdlO2lmKGQmJjA9PT1kLmluZGV4T2YoXCJVbmNhdWdodCBcIikmJihkPWEubWVzc2FnZS5zdWJzdHJpbmcoOSkpLGQ9ZHx8Yy5zdGF0dXN8fFwiU2NyaXB0IGVycm9yLlwiLHcmJncudGVzdChkKSlyZXR1cm4gdm9pZCBSLmxvZyhcIkF0YXR1czogY2FuY2VsaW5nIHNlbmQgZHVlIHRvIGlnbm9yZSBlcnJvcnNcIik7dmFyIGU9W107YS5zdGFjayYmYS5zdGFjay5sZW5ndGgmJlIuZm9yRWFjaChhLnN0YWNrLGZ1bmN0aW9uKGEsYil7Ui5lbmRzV2l0aChiLnVybCxcIi9hdGF0dXMuanNcIil8fGUucHVzaCh7bG46Yi5saW5lfHwwLGNuOmIuY29sdW1ufHwwLGY6Yi51cmx8fFwiYW5vbnltb3VzXCIsbTpiLmZ1bmN8fFwiW2Fub255bW91c11cIn0pfSk7dmFyIGY9W2EubmFtZSxkLEpTT04uc3RyaW5naWZ5KGUpXS5qb2luKFwifFwiKTtpZihmPT09eClyZXR1cm4gdm9pZCBSLmxvZyhcIkF0YXR1czogY2FuY2VsaW5nIHNlbmQgZHVlIHRvIGR1cGxpY2F0ZSBlcnJvcnNcIik7eD1mO3ZhciBnPWMuY3VzdG9tRGF0YTt0cnl7SlNPTi5zdHJpbmdpZnkoZyl9Y2F0Y2goaCl7dmFyIGk9XCJDYW5ub3QgYWRkIGN1c3RvbSBkYXRhOyBtYXkgY29udGFpbiBjaXJjdWxhciByZWZlcmVuY2VcIjtnPXtlcnJvcjppfSxSLmxvZyhcIkF0YXR1czogXCIraSl9dmFyIGo9VS5nZXRBbGxFdmVudHMoKTtTLmNsZWFyKCk7dmFyIGs9e1wiY2xhc3NcIjphLm5hbWUsbmFtZTpkLGJhY2tUcmFjZXM6ZSx1c2VyQWN0aW9uczpqLG5ldDpudWxsLGN1c3RvbURhdGE6Z3x8bnVsbCx0YWdzOmMudGFncyxzb3VyY2VtYXA6SixyZXF1ZXN0Ont1cmw6Yi5sb2NhdGlvbi5ocmVmLHVhOm5hdmlnYXRvci51c2VyQWdlbnR9fTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB5JiYoay5ncm91cGluZ0tleT15KGspKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB6KXt2YXIgbD16KGspO2wmJm0oTixrKX1lbHNlIG0oTixrKX1mdW5jdGlvbiBtKGMsZCl7aWYoRyYmRy5sZW5ndGgmJi0xPT09Ry5pbmRleE9mKGxvY2F0aW9uLmhvc3QpKXJldHVybiB2b2lkIFIubG9nKFwiQXRhdHVzOiBjYW5jZWxpbmcgc2VuZCBkdWUgdG8gbm90IGEgYWxsb3dlZCBkb21haW5cIik7aWYoZygpKXtpZighZC50cyl7dmFyIGU9YS5zY3JlZW58fGgoKTtkLnRzPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGQuYXBpa2V5PW8sZC5yZXF1ZXN0PWQucmVxdWVzdHx8e30sZC5yZXF1ZXN0LnVybD1kLnJlcXVlc3QudXJsfHxiLmxvY2F0aW9uLmhyZWYsZC5yZXF1ZXN0LnVhPWQucmVxdWVzdC51YXx8bmF2aWdhdG9yLnVzZXJBZ2VudCxkLnJlcXVlc3Qudz1lLndpZHRoLGQucmVxdWVzdC5oPWUuaGVpZ2h0LGQudj1yfHxcIlwiLGQuX3Y9Qnx8XCJcIn1xJiYoZC5jaWQ9cS51c2VySWR8fG51bGwpLFIubG9nKFwiU2VuZGluZyBkYXRhIHRvIEF0YXR1cyBSZWNlaXZlcjpcIixkKSxuKGMsSlNPTi5zdHJpbmdpZnkoZCkpfX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9bmV3IEltYWdlLGQ9TSthK1wiP2RhdGE9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpO2MuY3Jvc3NPcmlnaW49XCJhbm9ueW1vdXNcIixjLm9ubG9hZD1mdW5jdGlvbigpe2soKX0sYy5vbmVycm9yPWMub25hYm9ydD1mdW5jdGlvbigpe0kmJmE9PT1OJiZpKGIpfSxjLnNyYz1kfXZhciBvLHAscSxyLHMsdCx1LHYsdyx4LHkseixBLEI9XCIyLjMuMTJcIixDPVRyYWNlS2l0Lm5vQ29uZmxpY3QoKSxEPWEuYXRhdHVzLEU9W10sRj0hMSxHPVtdLEg9ITEsST0hMSxKPSExLEs9ITEsTD0hMSxNPVwiaHR0cHM6Ly9ici1yeC5hdGF0dXMuY29tXCIsTj1cIi90cmFjay9icm93c2VyL2Vycm9yc1wiLE89XCIvdHJhY2svYnJvd3Nlci9wZXJmXCIsUD1cIi90cmFjay9icm93c2VyL3BlcmYvYWpheFwiLFE9XCIvdHJhY2svYnJvd3Nlci9wZXJmL3R4blwiO2MmJihBPWMoYikpO3ZhciBSPXtpc0Jvb2xlYW46ZnVuY3Rpb24oYSl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEmJlwiYm9vbGVhblwiPT10eXBlb2YgYX0saXNTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGF9LGlzQXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfSxlbmRzV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiBhJiZiPy0xIT09YS5pbmRleE9mKGIsYS5sZW5ndGgtYi5sZW5ndGgpOiExfSxqb2luUmVnRXhwOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPVtdLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYj1hW2RdLFIuaXNTdHJpbmcoYik/Yy5wdXNoKGIucmVwbGFjZSgvKFsuKis/XFxePSE6JHt9KCl8XFxbXFxdXFwvXFxcXF0pL2csXCJcXFxcJDFcIikpOmImJmIuc291cmNlJiZjLnB1c2goYi5zb3VyY2UpO3JldHVybiBuZXcgUmVnRXhwKGMuam9pbihcInxcIiksXCJpXCIpfSxnZXRUYXJnZXRVcmw6ZnVuY3Rpb24oYil7cmV0dXJuIGEuWERvbWFpblJlcXVlc3QmJkgmJihiPWIuc2xpY2UoNikpLGJ9LG5vdzpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfSxwYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9U3RyaW5nKGEpLDE9PT1hLmxlbmd0aCYmKGE9XCIwXCIrYSksYX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPXt9O2ZvcihjIGluIGEpZFtjXT1hW2NdO2ZvcihjIGluIGIpZFtjXT1iW2NdO3JldHVybiBkfSxtZXJnZUFycmF5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGwhPWI/YS5jb25jYXQoYik6YX0sZm9yRWFjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWIuY2FsbChudWxsLGMsYVtjXSl9LGlzRW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShiKSlyZXR1cm4hMTtyZXR1cm4hMH0sZ2V0UmFuZG9tSW50OmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguZmxvb3IoOTAwNzE5OTI1NDc0MDk5MipNYXRoLnJhbmRvbSgpKX0sbG9nOmZ1bmN0aW9uKGIsYyl7RiYmYS5jb25zb2xlJiZhLmNvbnNvbGUubG9nJiYoYS5jb25zb2xlLmxvZyhiKSxjJiZhLmNvbnNvbGUubG9nKGMpKX0sYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9fSxjYW5BbGxvd0luc2VjdXJlU3VibWlzc2lvbnM6ZnVuY3Rpb24oKXt2YXIgYj1hLm5hdmlnYXRvci51c2VyQWdlbnQsYz1iLm1hdGNoKC9UcmlkZW50XFwvKFtcXGQuXSspLyksZD1jJiZcIjcuMFwiPT09Y1sxXT8xMTooYj1iLm1hdGNoKC9NU0lFIChbXFxkLl0rKS8pKT9wYXJzZUludChiWzFdLDEwKTohMTtyZXR1cm4gZCYmOT49ZH0sdXVpZDQ6ZnVuY3Rpb24oKXtyZXR1cm5cInh4eHh4eHh4eHh4eDR4eHh5eHh4eHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLGZ1bmN0aW9uKGEpe3ZhciBiPTE2Kk1hdGgucmFuZG9tKCl8MCxjPVwieFwiPT09YT9iOjMmYnw4O3JldHVybiBjLnRvU3RyaW5nKDE2KX0pfSxhZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGIsYyxkKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5hdHRhY2hFdmVudD9hLmF0dGFjaEV2ZW50KFwib25cIitiLGMpOmEuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoYixjLGQpOnZvaWQgMH0sYXJyYXlGcm9tT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJmIucHVzaChhW2NdKTtyZXR1cm4gYn19LFM9e2V2ZW50T2JqZWN0Ont9LGFsbDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5nZXRFdmVudE9iamVjdChhKSxjPVtdLGQ9MDtkPGIubGVuZ3RoO2QrKyljLnB1c2goYltkXS52YWx1ZSk7cmV0dXJuIGN9LGNsZWFyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMuZXZlbnRPYmplY3QpdGhpcy5ldmVudE9iamVjdC5oYXNPd25Qcm9wZXJ0eShhKSYmKHRoaXMuZXZlbnRPYmplY3RbYV0ubGVuZ3RoPTApfSxhZGQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEV2ZW50T2JqZWN0KGEpLGQ9Ui51dWlkNCgpO3JldHVybiBjLnB1c2goe2tleTpkLHZhbHVlOmJ9KSx0aGlzLnRydW5jYXRlRXZlbnRPYmplY3QoYSwxMCksZH0sZ2V0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuZ2V0RXZlbnRPYmplY3QoYSksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKGNbZF0ua2V5PT09YilyZXR1cm4gY1tkXS52YWx1ZTtyZXR1cm4hMX0sZ2V0RXZlbnRPYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZXZlbnRPYmplY3RbYV18fCh0aGlzLmV2ZW50T2JqZWN0W2FdPVtdKSx0aGlzLmV2ZW50T2JqZWN0W2FdfSx0cnVuY2F0ZUV2ZW50T2JqZWN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRFdmVudE9iamVjdChhKTtjLmxlbmd0aD5iJiYodGhpcy5ldmVudE9iamVjdFthXT1jLnNsaWNlKGMubGVuZ3RoLWIpKX19LFQ9e2F0dGFjaDpmdW5jdGlvbihiLGMsZCxlLGYpe2I9Ynx8YS5jb25zb2xlfHx7fTtmb3IodmFyIGc9Znx8W1wibG9nXCIsXCJkZWJ1Z1wiLFwiaW5mb1wiLFwid2FyblwiLFwiZXJyb3JcIl0saD1nLnBvcCgpLGk9ZnVuY3Rpb24oYSxiLGQpe2MmJlMuYWRkKFwidXNlclwiLHt0czpSLm5vdygpLGM6XCJjb25zb2xlXCIsbDphLG06Yn0pLFwiZXJyb3JcIj09PWEmJmUmJlYubm90aWZ5KG5ldyBFcnJvcihiKSxkKX07aDspdGhpcy53cmFwQ29uc29sZU1ldGhvZChiLGgsZCxpKSxoPWcucG9wKCl9LHdyYXBDb25zb2xlTWV0aG9kOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWFbYl0sZj1hO2IgaW4gYSYmKGFbYl09ZnVuY3Rpb24oKXt2YXIgYT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cyksZz1cIlwiK2Euam9pbihcIiBcIiksaD17bGV2ZWw6Yixsb2dnZXI6XCJjb25zb2xlXCJ9O2QmJmQoYixnLGgpLGUmJmMmJkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGUsZixhKX0pfX0sVT17YXR0YWNoOmZ1bmN0aW9uKCl7dmFyIGE9Ui5iaW5kKHRoaXMub25Eb2N1bWVudENsaWNrZWQsdGhpcyksYz1SLmJpbmQodGhpcy5vbklucHV0Q2hhbmdlZCx0aGlzKTtiLmFkZEV2ZW50TGlzdGVuZXI/KGIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsYSwhMCksYi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLGMsITApKTpiLmF0dGFjaEV2ZW50JiYoYi5hdHRhY2hFdmVudChcIm9uY2xpY2tcIixhKSxiLmF0dGFjaEV2ZW50KFwib25mb2N1c291dFwiLGMpKX0sd3JpdGVVc2VyRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7XCJwYXNzd29yZFwiPT09dGhpcy5nZXRFbGVtZW50VHlwZShhKSYmKGM9dm9pZCAwKSxTLmFkZChcInVzZXJcIix7dHM6Ui5ub3coKSxhOmIsZTp0aGlzLmdldE91dGVySFRNTChhKSx2OnRoaXMuZ2V0VmFsdWVLaW5kKGMsZCl9KX0sb25Eb2N1bWVudENsaWNrZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRFbGVtZW50RnJvbUV2ZW50KGEpO2ImJmIudGFnTmFtZSYmKHRoaXMuaXNUYXJnZXQoYixcImFcIil8fHRoaXMuaXNUYXJnZXQoYixcImJ1dHRvblwiKXx8dGhpcy5pc1RhcmdldChiLFwiaW5wdXRcIixbXCJidXR0b25cIixcInN1Ym1pdFwiXSk/dGhpcy53cml0ZVVzZXJFdmVudChiLFwiY2xpY2tcIik6dGhpcy5pc1RhcmdldChiLFwiaW5wdXRcIixbXCJjaGVja2JveFwiLFwicmFkaW9cIl0pJiZ0aGlzLndyaXRlVXNlckV2ZW50KGIsXCJjaGVja1wiLGIudmFsdWUsYi5jaGVja2VkKSl9LG9uSW5wdXRDaGFuZ2VkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0RWxlbWVudEZyb21FdmVudChhKTtiJiZiLnRhZ05hbWUmJih0aGlzLmlzVGFyZ2V0KGIsXCJ0ZXh0YXJlYVwiKT90aGlzLndyaXRlVXNlckV2ZW50KGIsXCJpbnB1dFwiLGIudmFsdWUpOnRoaXMuaXNUYXJnZXQoYixcInNlbGVjdFwiKSYmYi5vcHRpb25zJiZiLm9wdGlvbnMubGVuZ3RoP3RoaXMub25TZWxlY3RJbnB1dENoYW5nZWQoYik6dGhpcy5pc1RhcmdldChiLFwiaW5wdXRcIikmJiF0aGlzLmlzVGFyZ2V0KGIsXCJpbnB1dFwiLFtcImJ1dHRvblwiLFwic3VibWl0XCIsXCJoaWRkZW5cIixcImNoZWNrYm94XCIsXCJyYWRpb1wiXSkmJnRoaXMud3JpdGVVc2VyRXZlbnQoYixcImlucHV0XCIsYi52YWx1ZSkpfSxvblNlbGVjdElucHV0Q2hhbmdlZDpmdW5jdGlvbihhKXtpZihhLm11bHRpcGxlKXtmb3IodmFyIGI9MDtiPGEub3B0aW9ucy5sZW5ndGg7YisrKWlmKGEub3B0aW9uc1tiXS5zZWxlY3RlZCl7dGhpcy53cml0ZVVzZXJFdmVudChhLFwic2VsZWN0XCIsYS5vcHRpb25zW2JdLnZhbHVlKTticmVha319ZWxzZSAwPD1hLnNlbGVjdGVkSW5kZXgmJmEub3B0aW9uc1thLnNlbGVjdGVkSW5kZXhdJiZ0aGlzLndyaXRlVXNlckV2ZW50KGEsXCJzZWxlY3RcIixhLm9wdGlvbnNbYS5zZWxlY3RlZEluZGV4XS52YWx1ZSl9LGdldEVsZW1lbnRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudGFyZ2V0fHxiLmVsZW1lbnRGcm9tUG9pbnQoYS5jbGllbnRYLGEuY2xpZW50WSl9LGlzVGFyZ2V0OmZ1bmN0aW9uKGEsYixjKXtpZihhLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9PWIudG9Mb3dlckNhc2UoKSlyZXR1cm4hMTtpZighYylyZXR1cm4hMDtmb3IodmFyIGQ9dGhpcy5nZXRFbGVtZW50VHlwZShhKSxlPTA7ZTxjLmxlbmd0aDtlKyspaWYoY1tlXT09PWQpcmV0dXJuITA7cmV0dXJuITF9LGdldEVsZW1lbnRUeXBlOmZ1bmN0aW9uKGEpe3JldHVybihhLmdldEF0dHJpYnV0ZShcInR5cGVcIil8fFwiXCIpLnRvTG93ZXJDYXNlKCl9LGdldE91dGVySFRNTDpmdW5jdGlvbihhKXtmb3IodmFyIGI9XCI8XCIrYS50YWdOYW1lLnRvTG93ZXJDYXNlKCksYz1hLmF0dHJpYnV0ZXMsZD0wLGU9Yy5sZW5ndGg7ZT5kO2QrKyl7dmFyIGY9Y1tkXS5uYW1lO1widmFsdWVcIiE9PWYudG9Mb3dlckNhc2UoKSYmKGIrPVwiIFwiK2YrJz1cIicrY1tkXS52YWx1ZSsnXCInKX1yZXR1cm4gYis9XCIgPlwifSxnZXRWYWx1ZUtpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YT9udWxsOntsZW5ndGg6YS5sZW5ndGgsY2hlY2tlZDpiLHBhdHRlcm46dGhpcy5tYXRjaElucHV0UGF0dGVybihhKX19LG1hdGNoSW5wdXRQYXR0ZXJuOmZ1bmN0aW9uKGEpe3JldHVyblwiXCI9PT1hP1wiZW1wdHlcIjovXlthLXowLTkhIyQlJicqKz0/XFxeX2B7fH1+XFwtXSsoPzpcXC5bYS16MC05ISMkJSYnKis9P1xcXl9ge3x9flxcLV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05XFwtXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTlcXC1dKlthLXowLTldKT8kLy50ZXN0KGEpP1wiZW1haWxcIjovXigwP1sxLTldfFsxMl1bMC05XXwzWzAxXSlbXFwvXFwtXSgwP1sxLTldfDFbMDEyXSlbXFwvXFwtXVxcZHs0fSQvLnRlc3QoYSl8fC9eKFxcZHs0fVtcXC9cXC1dKDA/WzEtOV18MVswMTJdKVtcXC9cXC1dMD9bMS05XXxbMTJdWzAtOV18M1swMV0pJC8udGVzdChhKT9cImRhdGVcIjovXig/Oig/OlxcKz8xXFxzKig/OlsuXFwtXVxccyopPyk/KD86XFwoXFxzKihbMi05XTFbMDItOV18WzItOV1bMDItOF0xfFsyLTldWzAyLThdWzAyLTldKVxccypcXCl8KFsyLTldMVswMi05XXxbMi05XVswMi04XTF8WzItOV1bMDItOF1bMDItOV0pKVxccyooPzpbLlxcLV1cXHMqKT8pPyhbMi05XTFbMDItOV18WzItOV1bMDItOV0xfFsyLTldWzAyLTldezJ9KVxccyooPzpbLlxcLV1cXHMqKT8oWzAtOV17NH0pKD86XFxzKig/OiN8eFxcLj98ZXh0XFwuP3xleHRlbnNpb24pXFxzKihcXGQrKSk/JC8udGVzdChhKT9cInBob25lXCI6L15cXHMqJC8udGVzdChhKT9cIndoaXRlc3BhY2VcIjovXlxcZCokLy50ZXN0KGEpP1wibnVtZXJpY1wiOlwiY2hhcmFjdGVyXCJ9LGdldEFsbEV2ZW50czpmdW5jdGlvbigpe3JldHVybiBTLmFsbChcInVzZXJcIil9fSxWPXtub0NvbmZsaWN0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuYXRhdHVzPUQsVn0saXNDb25maWd1cmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFvfSxjb25maWc6ZnVuY3Rpb24oYixjKXtyZXR1cm4gYz1jfHx7fSxvPWIsQy5yZW1vdGVGZXRjaGluZz0hMSx3PVtdLGMmJihwPWMuY3VzdG9tRGF0YSxFPWMudGFnc3x8W10sSj0hKCFjLmVuYWJsZVNvdXJjZW1hcCYmIWMuc291cmNlbWFwKSxzPSEhYy5kaXNhYmxlVXNlckFjdGlvbnMsdD0hIWMuZGlzYWJsZUFqYXhNb25pdG9yaW5nLHU9ISFjLmRpc2FibGVSVU0sRj0hIWMuZGVidWdNb2RlLGMuaWdub3JlRXJyb3JzJiZSLmlzQXJyYXkoYy5pZ25vcmVFcnJvcnMpJiYodz1jLmlnbm9yZUVycm9ycyksVi5zZXRBbGxvd2VkRG9tYWlucyhjLmFsbG93ZWREb21haW5zKSxWLnNldFZlcnNpb24oYy52ZXJzaW9uKSxWLmVuYWJsZU9mZmxpbmUoYy5lbmFibGVPZmZsaW5lfHxjLm9mZmxpbmUpLFYub25CZWZvcmVFcnJvclNlbmQoYy5iZWZvcmVFcnJvclNlbmQpLFYuc2V0R3JvdXBpbmdLZXlDYWxsYmFjayhjLmdyb3VwaW5nS2V5Q2FsbGJhY2spKSxIPVIuY2FuQWxsb3dJbnNlY3VyZVN1Ym1pc3Npb25zKCksdy5wdXNoKC9eU2NyaXB0IGVycm9yXFwuPyQvKSx3LnB1c2goL15KYXZhc2NyaXB0IGVycm9yOiBTY3JpcHQgZXJyb3JcXC4/IG9uIGxpbmUgMCQvKSx3PVIuam9pblJlZ0V4cCh3KSxrKCksdj17ZW5hYmxlZDohMCx0aW1lbGluZTohMCxkaXNwbGF5OiEwLGVycm9yOiEwLGxldmVsczpudWxsfSxSLmlzQm9vbGVhbihjLmNvbnNvbGUpJiYodi5lbmFibGVkPWMuY29uc29sZSksUi5pc0Jvb2xlYW4oYy5jb25zb2xlVGltZWxpbmUpJiYodi50aW1lbGluZT1jLmNvbnNvbGVUaW1lbGluZSksUi5pc0Jvb2xlYW4oYy5jb25zb2xlRGlzcGxheSkmJih2LmRpc3BsYXk9Yy5jb25zb2xlRGlzcGxheSksUi5pc0Jvb2xlYW4oYy5jb25zb2xlRXJyb3JOb3RpZnkpJiYodi5lcnJvcj1jLmNvbnNvbGVFcnJvck5vdGlmeSksUi5pc0FycmF5KGMuY29uc29sZVRpbWVsaW5lTGV2ZWxzKSYmKHYubGV2ZWxzPWMuY29uc29sZVRpbWVsaW5lTGV2ZWxzKSx2LmVuYWJsZWQmJlwiY29uc29sZVwiaW4gYSYmYS5jb25zb2xlLmxvZyYmVC5hdHRhY2goYS5jb25zb2xlLHYudGltZWxpbmUsdi5kaXNwbGF5LHYuZXJyb3Isdi5sZXZlbHMpLHN8fFUuYXR0YWNoKCksdHx8dXx8Vi5fX2F0dGFjaEFqYXhIb29rcygpLFZ9LGluc3RhbGw6ZnVuY3Rpb24oKXtyZXR1cm4gZygpPyhDLnJlcG9ydC5zdWJzY3JpYmUobCksQy5leHRlbmRUb0FzeW5jaHJvbm91c0NhbGxiYWNrcygpLEEmJksmJkEuYWpheEVycm9yKGYpLFYpOnZvaWQgMH0sdW5pbnN0YWxsOmZ1bmN0aW9uKCl7cmV0dXJuIG89bnVsbCxDLnJlcG9ydC51bnN1YnNjcmliZShsKSxBJiZLJiZBLnVuYmluZChcImFqYXhFcnJvclwiLGYpLFZ9LHNldEN1c3RvbURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHA9YSxWfSxzZXRUYWdzOmZ1bmN0aW9uKGEpe3JldHVybiBFPWEsVn0sc2V0QWxsb3dlZERvbWFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJlIuaXNBcnJheShhKSYmKEc9YSksVn0sZ2V0QWxsb3dlZERvbWFpbnM6ZnVuY3Rpb24oKXtyZXR1cm4gR30sc2V0VXNlcjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gcT17fSxhJiYocS51c2VySWQ9XCJcIithKSxiJiYocS5lbWFpbD1cIlwiK2IpLGMmJihxLmZpcnN0TmFtZT1cIlwiK2MpLGQmJihxLmxhc3ROYW1lPVwiXCIrZCksVn0sc2V0VmVyc2lvbjpmdW5jdGlvbihhKXtyZXR1cm4gYSYmKHI9XCJcIithKSxWfSxlbmFibGVPZmZsaW5lOmZ1bmN0aW9uKGEpe3JldHVybiBSLmlzQm9vbGVhbihhKSYmKEk9YSksVn0sb25CZWZvcmVFcnJvclNlbmQ6ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgYSYmKHo9YSksVn0sc2V0R3JvdXBpbmdLZXlDYWxsYmFjazpmdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiYoeT1hKSxWfSxzZXRBUElFbmRwb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gTT1hLFZ9LGluaXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjJiYoYj1ifHx7fSxiLmN1c3RvbURhdGE9YyksVi5jb25maWcoYSxiKX0sd2l0aEN1c3RvbURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIFYuc2V0Q3VzdG9tRGF0YShhKX0sd2l0aFRhZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIFYuc2V0VGFncyhhKX0sYXR0YWNoOmZ1bmN0aW9uKCl7cmV0dXJuIFYuaW5zdGFsbCgpfSxkZXRhY2g6ZnVuY3Rpb24oKXtyZXR1cm4gVi51bmluc3RhbGwoKX0sbm90aWZ5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gVi5zZW5kKGEsYixjKX0sc2VuZFBlcmY6ZnVuY3Rpb24oYSl7cmV0dXJuIHU/dm9pZCBSLmxvZyhcIlJVTSBpcyBkaXNhYmxlZC4gUGxlYXNlIGVuYWJsZSBpdCBpbiB0aGUgY29uZmlnIG9wdGlvbnMuXCIpOm0oTyxhKX0sc2VuZEFqYXhQZXJmOmZ1bmN0aW9uKGEpe3JldHVybiB1P3ZvaWQgUi5sb2coXCJSVU0gaXMgZGlzYWJsZWQuIFBsZWFzZSBlbmFibGUgaXQgaW4gdGhlIGNvbmZpZyBvcHRpb25zLlwiKTptKFAsYSl9LHNlbmRUeG5QZXJmOmZ1bmN0aW9uKGEpe3JldHVybiBtKFEsYSl9LHNlbmQ6ZnVuY3Rpb24oYSxiLGMpe3RyeXtsKEMuY29tcHV0ZVN0YWNrVHJhY2UoYSkse2N1c3RvbURhdGE6Ui5tZXJnZShwLGIpLHRhZ3M6Ui5tZXJnZUFycmF5KEUsYyl9KX1jYXRjaChkKXtpZihhIT09ZCl0aHJvdyBkfXJldHVybiBWfSxfaGVscGVyOlJ9O2EuYXRhdHVzPVZ9KHdpbmRvdyxkb2N1bWVudCx3aW5kb3cualF1ZXJ5KSxmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXthLnBsPD0wfHxhdGF0dXMuc2VuZFBlcmYoYSl9ZnVuY3Rpb24gZSgpe3ZhciBiPWEucGVyZm9ybWFuY2V8fGEubW96UGVyZm9ybWFuY2V8fGEubXNQZXJmb3JtYW5jZXx8YS53ZWJraXRQZXJmb3JtYW5jZSxjPWIudGltaW5nLGU9Yi5uYXZpZ2F0aW9uO2lmKDA9PT1jLmxvYWRFdmVudEVuZClyZXR1cm4hMTtjbGVhckludGVydmFsKGkpLGk9bnVsbDt2YXIgZj1jLm5hdmlnYXRpb25TdGFydDswPj1mJiYoZj1jLmZldGNoU3RhcnQpO3ZhciBnPXt9O2Zvcih2YXIgaCBpbiBqKWdbaltoXV09LTEsaCBpbiBjJiYoY1toXTw9MHx8KGdbaltoXV09Y1toXS1mKSk7dmFyIGs9e250eTplLnR5cGUscmM6ZS5yZWRpcmVjdENvdW50LG50OmcucnBzLWcubnMsZHA6Zy5kY2UtZy5ycHMscHI6Zy5sZS1nLmRjZSxmZTpnLmxlLWcucnBzLHBsOmcubGUtZy5uc307ZChrKX1mdW5jdGlvbiBmKCl7aWYoIWh8fCFoLmJEb25lKXJldHVybiExO2NsZWFySW50ZXJ2YWwoaSksaT0hMTt2YXIgYT1oLmdldE1lYXN1cmVzKCk7aWYobnVsbCE9YSYmbnVsbCE9YS5iYWNrZW5kJiZudWxsIT1hLmZyb250ZW5kJiZudWxsIT1hW1wicGFnZSBsb2FkIHRpbWVcIl0mJm51bGwhPWFbXCJ0b3RhbCBsb2FkIHRpbWVcIl0pe3ZhciBiPWEuYmFja2VuZCxjPWEuYmFja2VuZCthLmZyb250ZW5kLGU9e250eTowLHJjOjAsbnQ6YixkcDpjLWIscHI6YVtcInRvdGFsIGxvYWQgdGltZVwiXS1jLGZlOmFbXCJ0b3RhbCBsb2FkIHRpbWVcIl0tYixwbDphW1widG90YWwgbG9hZCB0aW1lXCJdfTtkKGUpfX12YXIgZz0obmV3IERhdGUpLmdldFRpbWUoKSxoPWh8fHt9O2gucT1oLnF8fFtdLGgudmVyc2lvbj1cIjAuM1wiLGgudGFyZ2V0T3JpZ2luPWIubG9jYXRpb24ucHJvdG9jb2wrXCIvL1wiK2IubG9jYXRpb24uaG9zdG5hbWUsaC5iUG9zdE1lc3NhZ2U9ITEsaC5iZWFjb25Vcmw9aC5iZWFjb25Vcmx8fFwiL2ltYWdlcy9iZWFjb24uZ2lmXCIsaC5hdXRvcnVuPSExLGguaW5pdD1mdW5jdGlvbigpe2lmKGguYkRvbmU9ITEsaC5iVW5sb2FkZWQ9ITEsaC5tYXJrcz17fSxoLm1lYXN1cmVzPXt9LGguc3RhcnRzPXt9LGguZmluZFN0YXJ0VGltZSgpLGguYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLGguYmVmb3JlVW5sb2FkLCExKSxoLmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLGguYmVmb3JlVW5sb2FkLCExKSxoLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixoLmJlZm9yZVVubG9hZCwhMSksaC5wcm9jZXNzUSgpLFwiY29tcGxldGVcIj09PWIucmVhZHlTdGF0ZSl7dmFyIGM9YS5wZXJmb3JtYW5jZXx8YS5tb3pQZXJmb3JtYW5jZXx8YS5tc1BlcmZvcm1hbmNlfHxhLndlYmtpdFBlcmZvcm1hbmNlO2MmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjLnRpbWluZyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGMudGltaW5nLmxvYWRFdmVudEVuZCYmKGgubWFyayhcImZpcnN0Ynl0ZVwiLGMudGltaW5nLnJlc3BvbnNlU3RhcnQpLGgubWFyayhcIm9ubG9hZFwiLGMudGltaW5nLmxvYWRFdmVudEVuZCkpLGguZG9uZSgpfWVsc2UgaC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGgub25sb2FkLCExKX0saC5wcm9jZXNzUT1mdW5jdGlvbigpe2Zvcih2YXIgYT1oLnEubGVuZ3RoLGI9MDthPmI7YisrKXt2YXIgYz1oLnFbYl0sZD1jWzBdO1wibWFya1wiPT09ZD9oLm1hcmsoY1sxXSxjWzJdKTpcIm1lYXN1cmVcIj09PWQ/aC5tZWFzdXJlKGNbMV0sY1syXSxjWzNdKTpcImRvbmVcIj09PWQmJmguZG9uZShjWzFdKX19LGgubWFyaz1mdW5jdGlvbihiLGMpe3JldHVybiBoLmRwcmludChcIlJVTV9FUElTT0RFUy5tYXJrOiBcIitiK1wiLCBcIitjKSxiPyhoLm1hcmtzW2JdPXBhcnNlSW50KGN8fChuZXcgRGF0ZSkuZ2V0VGltZSgpKSxoLmJQb3N0TWVzc2FnZSYmYS5wb3N0TWVzc2FnZShcIlJVTV9FUElTT0RFUzptYXJrOlwiK2IrXCI6XCIrYyxoLnRhcmdldE9yaWdpbiksdm9pZChcImZpcnN0Ynl0ZVwiPT09Yj9oLm1lYXN1cmUoXCJiYWNrZW5kXCIsXCJzdGFydHRpbWVcIixcImZpcnN0Ynl0ZVwiKTpcIm9ubG9hZFwiPT09Yj8oaC5tZWFzdXJlKFwiZnJvbnRlbmRcIixcImZpcnN0Ynl0ZVwiLFwib25sb2FkXCIpLGgubWVhc3VyZShcInBhZ2UgbG9hZCB0aW1lXCIsXCJzdGFydHRpbWVcIixcIm9ubG9hZFwiKSk6XCJkb25lXCI9PT1iJiZoLm1lYXN1cmUoXCJ0b3RhbCBsb2FkIHRpbWVcIixcInN0YXJ0dGltZVwiLFwiZG9uZVwiKSkpOnZvaWQgaC5kcHJpbnQoXCJFcnJvcjogbWFya05hbWUgaXMgdW5kZWZpbmVkIGluIFJVTV9FUElTT0RFUy5tYXJrLlwiKX0saC5tZWFzdXJlPWZ1bmN0aW9uKGIsYyxkKXtpZihoLmRwcmludChcIlJVTV9FUElTT0RFUy5tZWFzdXJlOiBcIitiK1wiLCBcIitjK1wiLCBcIitkKSwhYilyZXR1cm4gdm9pZCBoLmRwcmludChcIkVycm9yOiBlcGlzb2RlTmFtZSBpcyB1bmRlZmluZWQgaW4gUlVNX0VQSVNPREVTLm1lYXN1cmUuXCIpO3ZhciBlO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBjKWU9XCJudW1iZXJcIj09dHlwZW9mIGgubWFya3NbYl0/aC5tYXJrc1tiXToobmV3IERhdGUpLmdldFRpbWUoKTtlbHNlIGlmKFwibnVtYmVyXCI9PXR5cGVvZiBoLm1hcmtzW2NdKWU9aC5tYXJrc1tjXTtlbHNle2lmKFwibnVtYmVyXCIhPXR5cGVvZiBjKXJldHVybiB2b2lkIGguZHByaW50KFwiRXJyb3I6IHVuZXhwZWN0ZWQgc3RhcnROYW1lT3JUaW1lIGluIFJVTV9FUElTT0RFUy5tZWFzdXJlOiBcIitjKTtlPWN9dmFyIGY7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGQpZj0obmV3IERhdGUpLmdldFRpbWUoKTtlbHNlIGlmKFwibnVtYmVyXCI9PXR5cGVvZiBoLm1hcmtzW2RdKWY9aC5tYXJrc1tkXTtlbHNle2lmKFwibnVtYmVyXCIhPXR5cGVvZiBkKXJldHVybiB2b2lkIGguZHByaW50KFwiRXJyb3I6IHVuZXhwZWN0ZWQgZW5kTmFtZU9yVGltZSBpbiBSVU1fRVBJU09ERVMubWVhc3VyZTogXCIrZCk7Zj1kfWguc3RhcnRzW2JdPXBhcnNlSW50KGUpLGgubWVhc3VyZXNbYl09cGFyc2VJbnQoZi1lKSxoLmJQb3N0TWVzc2FnZSYmYS5wb3N0TWVzc2FnZShcIlJVTV9FUElTT0RFUzptZWFzdXJlOlwiK2IrXCI6XCIrZStcIjpcIitmLGgudGFyZ2V0T3JpZ2luKX0saC5kb25lPWZ1bmN0aW9uKGIpe2guYkRvbmU9ITAsaC5tYXJrKFwiZG9uZVwiKSxoLmJQb3N0TWVzc2FnZSYmYS5wb3N0TWVzc2FnZShcIlJVTV9FUElTT0RFUzpkb25lXCIsaC50YXJnZXRPcmlnaW4pLFwiZnVuY3Rpb25cIj09dHlwZW9mIGImJmIoKX0saC5nZXRNYXJrcz1mdW5jdGlvbigpe3JldHVybiBoLm1hcmtzfSxoLmdldE1lYXN1cmVzPWZ1bmN0aW9uKCl7cmV0dXJuIGgubWVhc3VyZXN9LGguZ2V0U3RhcnRzPWZ1bmN0aW9uKCl7cmV0dXJuIGguc3RhcnRzfSxoLmZpbmRTdGFydFRpbWU9ZnVuY3Rpb24oKXt2YXIgYT1oLmZpbmRTdGFydFdlYlRpbWluZygpfHxoLmZpbmRTdGFydENvb2tpZSgpO2EmJmgubWFyayhcInN0YXJ0dGltZVwiLGEpfSxoLmZpbmRTdGFydFdlYlRpbWluZz1mdW5jdGlvbigpe3ZhciBiLGM9YS5wZXJmb3JtYW5jZXx8YS5tb3pQZXJmb3JtYW5jZXx8YS5tc1BlcmZvcm1hbmNlfHxhLndlYmtpdFBlcmZvcm1hbmNlO3JldHVybiBjJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYy50aW1pbmcmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQmJihiPWMudGltaW5nLm5hdmlnYXRpb25TdGFydCxoLmRwcmludChcIlJVTV9FUElTT0RFUy5maW5kU3RhcnRXZWJUaW1pbmc6IHN0YXJ0VGltZSA9IFwiK2IpKSxifSxoLmZpbmRTdGFydENvb2tpZT1mdW5jdGlvbigpe2Zvcih2YXIgZD1iLmNvb2tpZS5zcGxpdChcIiBcIiksZT0wO2U8ZC5sZW5ndGg7ZSsrKWlmKDA9PT1kW2VdLmluZGV4T2YoXCJSVU1fRVBJU09ERVM9XCIpKXtmb3IodmFyIGYsZyxpPWRbZV0uc3Vic3RyaW5nKFwiUlVNX0VQSVNPREVTPVwiLmxlbmd0aCkuc3BsaXQoXCImXCIpLGo9MDtqPGkubGVuZ3RoO2orKylpZigwPT09aVtqXS5pbmRleE9mKFwicz1cIikpZj1pW2pdLnN1YnN0cmluZygyKTtlbHNlIGlmKDA9PT1pW2pdLmluZGV4T2YoXCJyPVwiKSl7dmFyIGs9aVtqXS5zdWJzdHJpbmcoMik7az1rLnJlcGxhY2UoLzskLyxcIlwiKSxnPWEuZXNjYXBlKGIucmVmZXJyZXIpPT09a31pZihnJiZmKXJldHVybiBoLmRwcmludChcIlJVTV9FUElTT0RFUy5maW5kU3RhcnRDb29raWU6IHN0YXJ0VGltZSA9IFwiK2YpLGZ9cmV0dXJuIGN9LGguYmVmb3JlVW5sb2FkPWZ1bmN0aW9uKCl7aC5iVW5sb2FkZWR8fChiLmNvb2tpZT1cIlJVTV9FUElTT0RFUz1zPVwiK051bWJlcihuZXcgRGF0ZSkrXCImcj1cIithLmVzY2FwZShiLmxvY2F0aW9uKStcIjsgcGF0aD0vXCIsaC5iVW5sb2FkZWQ9ITApfSxoLm9ubG9hZD1mdW5jdGlvbigpe2gubWFyayhcIm9ubG9hZFwiKSxoLmRvbmUoKX0saC5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5hdHRhY2hFdmVudD9hLmF0dGFjaEV2ZW50KFwib25cIitiLGMpOmEuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoYixjLGQpOnZvaWQgMH0saC5kcHJpbnQ9ZnVuY3Rpb24oKXt9LGguaW5pdCgpO3ZhciBpPW51bGwsaj17bmF2aWdhdGlvblN0YXJ0OlwibnNcIixyZWRpcmVjdFN0YXJ0OlwicmRzXCIscmVkaXJlY3RFbmQ6XCJyZGVcIix1bmxvYWRFdmVudFN0YXJ0OlwidXNcIix1bmxvYWRFdmVudEVuZDpcInVlXCIsZmV0Y2hTdGFydDpcImZzXCIsZG9tYWluTG9va3VwU3RhcnQ6XCJkbHNcIixkb21haW5Mb29rdXBFbmQ6XCJkbGVcIixjb25uZWN0U3RhcnQ6XCJjc1wiLHNlY3VyZUNvbm5lY3Rpb25TdGFydDpcInNjc1wiLGNvbm5lY3RFbmQ6XCJjZVwiLGhhbmRzaGFrZVN0YXJ0OlwiaHNcIixyZXF1ZXN0U3RhcnQ6XCJycXNcIixyZXNwb25zZVN0YXJ0OlwicnBzXCIscmVzcG9uc2VFbmQ6XCJycGVcIixkb21Mb2FkaW5nOlwiZGxcIixkb21JbnRlcmFjdGl2ZTpcImRpXCIsZG9tQ29udGVudExvYWRlZEV2ZW50U3RhcnQ6XCJkY3NcIixkb21Db250ZW50TG9hZGVkRXZlbnRFbmQ6XCJkY2VcIixkb21Db21wbGV0ZTpcImRjXCIsbG9hZEV2ZW50U3RhcnQ6XCJsc1wiLGxvYWRFdmVudEVuZDpcImxlXCJ9LGs9YS5wZXJmb3JtYW5jZXx8YS5tb3pQZXJmb3JtYW5jZXx8YS5tc1BlcmZvcm1hbmNlfHxhLndlYmtpdFBlcmZvcm1hbmNlO2smJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBrLnRpbWluZyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGsubmF2aWdhdGlvbj9pPXNldEludGVydmFsKGUsMTAwKTooaC5tYXJrKFwiZmlyc3RieXRlXCIsZyksaT1zZXRJbnRlcnZhbChmLDEwMCkpfSh3aW5kb3csZG9jdW1lbnQpLGF0YXR1cy5fX2F0dGFjaEFqYXhIb29rcz1mdW5jdGlvbigpeyFmdW5jdGlvbihhLGIpe3ZhciBjPWF0YXR1cy5faGVscGVyLGQ9e3F1ZXVlOltdLGJhdGNoU2l6ZToyNSxwcm9jZXNzaW5nOiExLGJVbmxvYWRlZDohMSxwdXNoOmZ1bmN0aW9uKGEpe1wic3RyaW5nXCI9PXR5cGVvZiBhLnVybCYmYS51cmwuaW5kZXhPZihcIi5odG1sXCIpPjB8fCh0aGlzLnF1ZXVlLnB1c2goYSksdGhpcy5xdWV1ZS5sZW5ndGg+PXRoaXMuYmF0Y2hTaXplJiZ0aGlzLl9wcm9jZXNzUXVldWUoKSl9LF9wcm9jZXNzUXVldWU6ZnVuY3Rpb24oKXtpZighdGhpcy5wcm9jZXNzaW5nJiZ0aGlzLnF1ZXVlLmxlbmd0aCl7dGhpcy5wcm9jZXNzaW5nPSEwO3RyeXtmb3IodmFyIGE9e30sYj17fSxkPTA7ZDx0aGlzLnF1ZXVlLmxlbmd0aDtkKyspe3ZhciBlLGY9dGhpcy5xdWV1ZVtkXTtpZihmLnN0YXR1czw0MDApe2U9Zi5tZXRob2QrZi51cmw7dmFyIGc9Zi5yZXNwQXZhaWxUaW1lLWYuc2VuZFRpbWUsaD1mLnJlc3BQcm9jVGltZS1mLnJlc3BBdmFpbFRpbWUsaT1mLnJlY2VpdmVkU2l6ZSxqPWYuc2VuZFNpemUsaz1hW2VdO2lmKGspe2suYysrO3ZhciBsPWsucmU7bC50PWwudCtnLGwubG89bC5sbzxnP2wubG86ZyxsLmhpPWwuaGk+Zz9sLmhpOmcsbC5zc3E9bC5zc3ErZypnO3ZhciBtPWsuY2I7bS50PW0udCtoLG0ubG89bS5sbzxoP20ubG86aCxtLmhpPW0uaGk+aD9tLmhpOmgsbS5zc3E9bS5zc3EraCpoO3ZhciBuPWsucnM7bi50PW4udCtpLG4ubG89bi5sbzxpP24ubG86aSxuLmhpPW4uaGk+aT9uLmhpOmksbi5zc3E9bi5zc3EraSppO3ZhciBvPWsuc3M7by50PW8udCtqLG8ubG89by5sbzxqP28ubG86aixvLmhpPW8uaGk+aj9vLmhpOmosby5zc3E9by5zc3EraipqfWVsc2UgYVtlXT17bTpmLm1ldGhvZCx1cmw6Zi51cmwsYzoxLHJlOnt0OmcsbG86ZyxoaTpnLHNzcTpnKmd9LGNiOnt0OmgsbG86aCxoaTpoLHNzcTpoKmh9LHJzOnt0OmYucmVjZWl2ZWRTaXplLGxvOmYucmVjZWl2ZWRTaXplLGhpOmYucmVjZWl2ZWRTaXplLHNzcTpmLnJlY2VpdmVkU2l6ZSpmLnJlY2VpdmVkU2l6ZX0sc3M6e3Q6Zi5zZW5kU2l6ZSxsbzpmLnNlbmRTaXplLGhpOmYuc2VuZFNpemUsc3NxOmYuc2VuZFNpemUqZi5zZW5kU2l6ZX19fWVsc2UgZT1mLm1ldGhvZCtmLnN0YXR1cytmLnVybCxiW2VdP2JbZV0uYysrOmJbZV09e206Zi5tZXRob2QsdXJsOmYudXJsLHN0OmYuc3RhdHVzLGM6MX19dmFyIHA9e3hocjpjLmFycmF5RnJvbU9iamVjdChhKSx4aHJFcnJvcjpjLmFycmF5RnJvbU9iamVjdChiKX07YXRhdHVzLnNlbmRBamF4UGVyZihwKX1jYXRjaChxKXtjLmxvZyhcIkVycm9yIHdoaWxlIHByb2Nlc3NpbmcgcXVldWU6IFwiLHEpfWZpbmFsbHl7dGhpcy5xdWV1ZT1bXSx0aGlzLnByb2Nlc3Npbmc9ITF9fX0sYmVmb3JlVW5sb2FkOmZ1bmN0aW9uKCl7ZC5iVW5sb2FkZWR8fChkLl9wcm9jZXNzUXVldWUoKSxkLmJVbmxvYWRlZD0hMCl9fTtjLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIixkLmJlZm9yZVVubG9hZCwhMSk7dmFyIGU9e3N1cHBvcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fFwiYXBwbHlcImluIGF9LGFyb3VuZDpmdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gYT1hfHxmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt2YXIgZixnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7dHJ5e2ImJihmPWIuYXBwbHkodGhpcyxnKSl9Y2F0Y2goaCl7Yy5sb2coZSxoKX12YXIgaTt0cnl7aT1hLmFwcGx5KHRoaXMsZnx8Zyl9ZmluYWxseXt0cnl7ZCYmZC5hcHBseSh0aGlzLGcpfWNhdGNoKGgpe2MubG9nKGUsaCl9fXJldHVybiBpfX0sYmVmb3JlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUuYXJvdW5kKGEsYil9LGFmdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUuYXJvdW5kKGEsbnVsbCxiKX0sdGltZW91dDpmdW5jdGlvbihhKXtzZXRUaW1lb3V0KGEsMCl9LHdyYXBBZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYil7aWYoKFwibG9hZFwiPT09YXx8XCJlcnJvclwiPT09YSkmJmImJnRoaXMuX2F0cnVtWGhyRGF0YSl7dmFyIGM7Yi5fX2F0cnVtSW50ZXJjZXB0b3I/Yz1iLl9fYXRydW1JbnRlcmNlcHRvcjplLnN1cHBvcnQoYik/KGM9Zy53cmFwWEhSKGIsdGhpcyxcIlhIUi5pbnZva2VFdmVudExpc3RlbmVyXCIpLGIuX19hdHJ1bUludGVyY2VwdG9yPWMpOmM9bnVsbDt2YXIgZDtyZXR1cm4gYyYmKGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxkWzFdPWMpLGR9fX0sd3JhcFJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiKXtpZih0aGlzLl9hdHJ1bVhockRhdGEpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIGIuX19hdHJ1bUludGVyY2VwdG9yJiYoY1sxXT1iLl9fYXRydW1JbnRlcmNlcHRvciksY319fSxhcm91bmRXaXRoSGFuZGxlRXZlbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGY9YTtyZXR1cm4gYSYmXCJvYmplY3RcIj09dHlwZW9mIGEmJlwidG9TdHJpbmdcImluIGEmJlwiW3hwY29ubmVjdCB3cmFwcGVkIG5zSURPTUV2ZW50TGlzdGVuZXJdXCI9PT1hLnRvU3RyaW5nKCkmJlwiaGFuZGxlRXZlbnRcImluIGEmJihmPWZ1bmN0aW9uKCl7YS5oYW5kbGVFdmVudC5hcHBseSh0aGlzLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfSksZS5hcm91bmQoZixiLGMsZCl9LGdldEZ1bGx5UXVhbGlmaWVkVXJsOmZ1bmN0aW9uKGEpe3ZhciBjPWIuY3JlYXRlRWxlbWVudChcImFcIik7cmV0dXJuIGMuaHJlZj1hLGMuaHJlZn19O2lmKGEuWE1MSHR0cFJlcXVlc3QmJmEuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlKXt2YXIgZj1hLlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZTtpZighKFwib3BlblwiaW4gZiYmXCJzZW5kXCJpbiBmKSlyZXR1cm47aWYoIWUuc3VwcG9ydChmLm9wZW4pfHwhZS5zdXBwb3J0KGYuc2VuZCkpcmV0dXJuO3ZhciBnPXt9O2cuY2FwdHVyZUFqYXhUaW1pbmdzPWZ1bmN0aW9uKGEpe3ZhciBiPWEuX2F0cnVtWGhyRGF0YTtpZihiKXt2YXIgYz0obmV3IERhdGUpLmdldFRpbWUoKTsyPT09YS5yZWFkeVN0YXRlP2IuZmlyc3RCeXRlVGltZT1iLmZpcnN0Qnl0ZVRpbWV8fGM6ND09PWEucmVhZHlTdGF0ZSYmKGIucmVzcEF2YWlsVGltZT1iLnJlc3BBdmFpbFRpbWV8fGMsYi5maXJzdEJ5dGVUaW1lPWIuZmlyc3RCeXRlVGltZXx8Yyl9fSxnLnNlbmRQYXlsb2FkPWZ1bmN0aW9uKGEsYil7Yi5yZWNlaXZlZFNpemU9MCxhLnJlc3BvbnNlVHlwZSYmXCJ0ZXh0XCIhPT1hLnJlc3BvbnNlVHlwZXx8XCJzdHJpbmdcIj09dHlwZW9mIGEucmVzcG9uc2VUZXh0JiYoYi5yZWNlaXZlZFNpemU9YS5yZXNwb25zZVRleHQubGVuZ3RoKSxiLnN0YXR1cz1hLnN0YXR1cyxkLnB1c2goYil9LGcud3JhcFhIUj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGUuYXJvdW5kV2l0aEhhbmRsZUV2ZW50KGEsZnVuY3Rpb24oKXtnLmNhcHR1cmVBamF4VGltaW5ncyh0aGlzKX0sZnVuY3Rpb24oKXt2YXIgYT1iLl9hdHJ1bVhockRhdGE7aWYoYSYmND09PWIucmVhZHlTdGF0ZSl7dmFyIGM9KG5ldyBEYXRlKS5nZXRUaW1lKCk7YS5yZXNwUHJvY1RpbWU9YS5yZXNwUHJvY1RpbWV8fGMsZy5zZW5kUGF5bG9hZChiLGEpLGRlbGV0ZSBiLl9hdHJ1bVhockRhdGF9fSxjKX0sZy5hamF4RG9uZT1mdW5jdGlvbihhKXtpZihhLl9hdHJ1bVhockRhdGEpe3ZhciBiPShuZXcgRGF0ZSkuZ2V0VGltZSgpKzNlNCxjPWZ1bmN0aW9uKCl7Zy5jYXB0dXJlQWpheFRpbWluZ3MoYSk7dmFyIGQ9YS5fYXRydW1YaHJEYXRhO2lmKGQpe3ZhciBlPShuZXcgRGF0ZSkuZ2V0VGltZSgpOzQ9PT1hLnJlYWR5U3RhdGU/KGQucmVzcFByb2NUaW1lPWQucmVzcFByb2NUaW1lfHxlLGcuc2VuZFBheWxvYWQoYSxkKSxkZWxldGUgYS5fYXRydW1YaHJEYXRhKTpiPmU/c2V0VGltZW91dChjLDUwKTpkZWxldGUgYS5fYXRydW1YaHJEYXRhfX07YygpfX0sZi5vcGVuPWUuYXJvdW5kKGYub3BlbixmdW5jdGlvbigpe3ZhciBhPTE8PWFyZ3VtZW50cy5sZW5ndGg/U3RyaW5nKGFyZ3VtZW50c1swXSk6XCJcIixiPTI8PWFyZ3VtZW50cy5sZW5ndGg/U3RyaW5nKGFyZ3VtZW50c1sxXSk6XCJcIixjPWF0YXR1cy5nZXRBbGxvd2VkRG9tYWlucygpLGQ9ITA7aWYoYj1lLmdldEZ1bGx5UXVhbGlmaWVkVXJsKGIpLGImJmMmJmMubGVuZ3RoKXtkPSExO2Zvcih2YXIgZj0wO2Y8Yy5sZW5ndGg7ZisrKXt2YXIgZz1jW2ZdO2lmKGcmJmIuaW5kZXhPZihnKT4tMSl7ZD0hMDticmVha319fWQmJihiPWImJmIuc3BsaXQoXCI/XCIpWzBdLHRoaXMuX2F0cnVtWGhyRGF0YT17bWV0aG9kOmEsdXJsOmIsc2VuZFRpbWU6bnVsbCxzZW5kU2l6ZTpudWxsLGZpcnN0Qnl0ZVRpbWU6bnVsbCxyZXNwQXZhaWxUaW1lOm51bGwscmVzcFByb2NUaW1lOm51bGwscmVjZWl2ZWRTaXplOm51bGwscGFyZW50UGhhc2U6bnVsbH0pfSxudWxsLFwiWEhSLm9wZW5cIiksZi5zZW5kPWUuYXJvdW5kKGYuc2VuZCxmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLl9hdHJ1bVhockRhdGE7aWYoYil7dmFyIGM9KG5ldyBEYXRlKS5nZXRUaW1lKCk7Yi5zZW5kVGltZT1iLnNlbmRUaW1lfHxjLGIuc2VuZFNpemU9MTw9YXJndW1lbnRzLmxlbmd0aCYmYXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXS5sZW5ndGh8fDA6MDt2YXIgZD0wLGY9ZnVuY3Rpb24oKXtpZig0PT09YS5yZWFkeVN0YXRlKWcuYWpheERvbmUoYSk7ZWxzZXt2YXIgYj1udWxsO3RyeXtiPWEub25yZWFkeXN0YXRlY2hhbmdlfWNhdGNoKGMpe3JldHVybiB2b2lkIGcuYWpheERvbmUoYSl9ZCsrLGI/ZS5zdXBwb3J0KGIpP2Eub25yZWFkeXN0YXRlY2hhbmdlPWcud3JhcFhIUihiLGEsXCJYSFIub25SZWFkeVN0YXRlQ2hhbmdlXCIpOmcuYWpheERvbmUoYSk6NT5kP2UudGltZW91dChmKTpnLmFqYXhEb25lKGEpfX07ZigpfX0sbnVsbCxcIlhIUi5zZW5kXCIpLFwiYWRkRXZlbnRMaXN0ZW5lclwiaW4gZiYmXCJyZW1vdmVFdmVudExpc3RlbmVyXCJpbiBmJiZlLnN1cHBvcnQoZi5hZGRFdmVudExpc3RlbmVyKSYmZS5zdXBwb3J0KGYucmVtb3ZlRXZlbnRMaXN0ZW5lcikmJihmLmFkZEV2ZW50TGlzdGVuZXI9ZS5hcm91bmQoZi5hZGRFdmVudExpc3RlbmVyLGUud3JhcEFkZEV2ZW50TGlzdGVuZXIoKSxudWxsLFwiWEhSLmFkZEV2ZW50TGlzdGVuZXJcIiksZi5yZW1vdmVFdmVudExpc3RlbmVyPWUuYXJvdW5kKGYucmVtb3ZlRXZlbnRMaXN0ZW5lcixlLndyYXBSZW1vdmVFdmVudExpc3RlbmVyKCksbnVsbCxcIlhIUi5yZW1vdmVFdmVudExpc3RlbmVyXCIpKX19KHdpbmRvdyxkb2N1bWVudCl9LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe2lmKCEoMD49Yikpe3ZhciBkPXtuYW1lOmEsZHVyOmIsc3Q6Y307YXRhdHVzLnNlbmRUeG5QZXJmKGQpfX1mdW5jdGlvbiBjKGEpe3JldHVybiBoK1wiIFwiK2F9ZnVuY3Rpb24gZCgpe3RyeXtyZXR1cm5cImxvY2FsU3RvcmFnZVwiaW4gYSYmbnVsbCE9PWEubG9jYWxTdG9yYWdlO31jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gZShhKXt2YXIgYj1pLm5vdygpO3RyeXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjKGEpLGIpfWNhdGNoKGQpe319ZnVuY3Rpb24gZihhKXt2YXIgYj1udWxsLGQ9YyhhKTt0cnl7Yj1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShkKSxsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShkKX1jYXRjaChlKXt9dmFyIGY9MDtyZXR1cm4gYiYmKGY9aS5ub3coKS1iKSxmfWZ1bmN0aW9uIGcoYSl7dHJ5e3ZhciBiPWMoYSk7bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYil9Y2F0Y2goZCl7fX12YXIgaD1cImF0YXR1cy5jb20vXCIsaT1hdGF0dXMuX2hlbHBlcixqPTEsaz0wO2F0YXR1cy5iZWdpblRyYW5zYWN0aW9uPWZ1bmN0aW9uKGEpe2QoKSYmZShhKX0sYXRhdHVzLmVuZFRyYW5zYWN0aW9uPWZ1bmN0aW9uKGEpe2lmKGQoKSl7dmFyIGM9ZihhKTtiKGEsYyxqKX19LGF0YXR1cy5mYWlsVHJhbnNhY3Rpb249ZnVuY3Rpb24oYSl7aWYoZCgpKXt2YXIgYz1mKGEpO2IoYSxjLGspfX0sYXRhdHVzLmNhbmNlbFRyYW5zYWN0aW9uPWZ1bmN0aW9uKGEpe2QoKSYmZyhhKX19KHdpbmRvdyxkb2N1bWVudCk7XG4vKiEgaHR0cHM6Ly9naXRodWIuY29tL3R0YXViZXJ0L25vZGUtYXJyYXlidWZmZXItc2xpY2VcbiAqIChjKSAyMDE0IFRpbSBUYXViZXJ0IDx0aW1AdGltdGF1YmVydC5kZT5cbiAqIGFycmF5YnVmZmVyLXNsaWNlIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLiovXG4hZnVuY3Rpb24ocil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChyLHQpe3JldHVybiByPTB8cnx8MCxyPDA/TWF0aC5tYXgocit0LDApOk1hdGgubWluKHIsdCl9QXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlfHwoQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGUsbil7dmFyIGY9dGhpcy5ieXRlTGVuZ3RoLGk9dChlLGYpLGE9ZjtpZihuIT09ciYmKGE9dChuLGYpKSxpPmEpcmV0dXJuIG5ldyBBcnJheUJ1ZmZlcigwKTt2YXIgdT1hLWkseT1uZXcgQXJyYXlCdWZmZXIodSksbz1uZXcgVWludDhBcnJheSh5KSxzPW5ldyBVaW50OEFycmF5KHRoaXMsaSx1KTtyZXR1cm4gby5zZXQocykseX0pfSgpO1xuIWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoaSl7aWYocltpXSlyZXR1cm4gcltpXS5pO3ZhciBuPXJbaV09e3M6aSxvOiExLGk6e319O3JldHVybiBlW2ldLmNhbGwobi5pLG4sbi5pLHQpLG4ubz0hMCxuLml9dmFyIHI9e307dC5oPWUsdC5jPXIsdC5kPWZ1bmN0aW9uKGUscixpKXt0LnUoZSxyKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUscix7bDohMSxwOiEwLGdldDppfSl9LHQubj1mdW5jdGlvbihlKXt2YXIgcj1lJiZlLmc/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gdC5kKHIsXCJhXCIscikscn0sdC51PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSx0LnY9XCJcIix0KHQuVD05OSl9KFtmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGksbj1yKDQwKSxzPXIoMyk7IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7TiYmY29uc29sZS5sb2coXCJGcmFtZXdvcmsgYWxyZWFkeSBpbml0aWFsaXplZFwiKSxlLm0oKSxBPW5ldyBEYXRlLHQuYXBwbHkoTCksTj1MLnJlc29sdmUoQy5JKSxrPUwucmVzb2x2ZShDLlIpLEY9Ti5DKCl9ZnVuY3Rpb24gcigpe0Q9TC5yZXNvbHZlKEMuXyksRC5pbml0KCl9ZnVuY3Rpb24gaSgpe3JldHVybiBEfWZ1bmN0aW9uIG8oKXtyZXR1cm4gTH1mdW5jdGlvbiBhKCl7cmV0dXJuIGt9ZnVuY3Rpb24gaCgpe3JldHVybiBOfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIE0uZ2V0KGUpfWZ1bmN0aW9uIHUoZSx0KXt2YXIgcj1uZXcgXyhlKTtyZXR1cm4gci5hcHBseSh0KSxNLnNldChlLHIpLHJ9ZnVuY3Rpb24gbCh0KXtQPWUuUCh0KX1mdW5jdGlvbiBwKGUpe3JldHVybiBudWxsIT1QP1AuY29udGV4dC5yZXNvbHZlKGUpOihjb25zb2xlLndhcm4oXCJ1bmRlZmluZWQgY29udGV4dFwiKSxudWxsKX1mdW5jdGlvbiBkKCl7cmV0dXJuIFB9ZnVuY3Rpb24gZigpe3JldHVybiBOLnRpbWUoKX1mdW5jdGlvbiBnKGUsdCl7cmV0dXJuIE4uc2V0VGltZW91dChlLHQpfWZ1bmN0aW9uIEUoZSl7cmV0dXJuIE4uY2xlYXJUaW1lb3V0KGUpfWZ1bmN0aW9uIHYoZSx0KXtyZXR1cm4gTi5zZXRJbnRlcnZhbChlLHQpfWZ1bmN0aW9uIHkoZSl7cmV0dXJuIE4uY2xlYXJJbnRlcnZhbChlKX1mdW5jdGlvbiBUKCl7Ti5BKCl9ZnVuY3Rpb24gbSgpe04mJk4uTygpLEwuTigpLEw9bmV3IG4uRCxNPW5ldyBzLFA9bnVsbCxBPW51bGwsRj0hMSxPPW51bGwsTj1udWxsLEQ9bnVsbCxrPW51bGx9ZnVuY3Rpb24gSShlKXtPPWV9ZnVuY3Rpb24gUygpe3JldHVybiBPfHwoTz0obmV3IERhdGUpLmdldFRpbWUoKSksKE89KDkzMDEqTys0OTI5NyklMjMzMjgwKS8yMzMyODB9ZnVuY3Rpb24gUigpe3JldHVybiBBfWZ1bmN0aW9uIHcoKXtyZXR1cm4gRn12YXIgYj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7Yi5rPVwid3M6Ly8xMjcuMC4wLjE6ODAwMC9oaXZlXCIsZS5MPWI7dmFyIEM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO0MuST1cIlRpbWVyU2NoZWR1bGVyXCIsQy5NPVwiaWRlbnRpdHlQcm92aWRlclwiLEMuXz1cIk5ldHdvcmtDb21wb25lbnRcIixDLkY9XCJydGNNYW5hZ2VyXCIsQy5VPVwidHJhbnNwb3J0XCIsQy5CPVwiaHR0cE1hbmFnZXJcIixDLkg9XCJodHRwUmVxdWVzdFwiLEMuUj1cImxvZ2dlclwiLEMucT1cInNlcnZlck1hbmFnZXJcIixDLkc9XCJzZXJ2aWNlc0NsaWVudFwiLGUuVj1DO3ZhciBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmlkPWUsdGhpcy5jb250ZXh0PW5ldyBuLkR9cmV0dXJuIGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKGUpe2UuYXBwbHkodGhpcy5jb250ZXh0KX0sZX0oKTtlLmo9XzshZnVuY3Rpb24oZSl7ZVtlLks9MF09XCJIVFRQXCIsZVtlLlk9MV09XCJSVENcIixlW2UuVz0yXT1cIlVEUFwifShlLkp8fChlLko9e30pKTshZnVuY3Rpb24odCl7ZnVuY3Rpb24gcigpe3JldHVyblwiW1wiK2YoKStcIl0gW1wiK2UuWCgpLmlkK1wiXVwifXQuZ2V0SWQ9cn0oZS5afHwoZS5aPXt9KSk7dmFyIFAsQSxPLE4sRCxrLEw9bmV3IG4uRCxNPW5ldyBzLEY9ITE7ZS4kPXQsZS5lZT1yLGUudGU9aSxlLnN5c3RlbT1vLGUubG9nZ2VyPWEsZS5yZT1oLGUuUD1jLGUuaWU9dSxlLm5lPWwsZS5yZXNvbHZlPXAsZS5YPWQsZS50aW1lPWYsZS5zZXRUaW1lb3V0PWcsZS5jbGVhclRpbWVvdXQ9RSxlLnNldEludGVydmFsPXYsZS5jbGVhckludGVydmFsPXksZS5BPVQsZS5tPW0sZS5zZT1JLGUucmFuZG9tPVMsZS5vZT1SLGUuQz13fShpPXQuRnJhbWV3b3JrfHwodC5GcmFtZXdvcms9e30pKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsJiYoZ2xvYmFsLkZyYW1ld29yaz1pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMTA2KSxuPXIoMjApLHM9cig2KSxvPXMuaGUuYWUsYT0ocy5oZS5jZSxzLmhlLnVlKSxoPXMuaGUubGUsYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dmFyIHI9dGhpcztpZih0aGlzLmlzQWN0aXZlPSExLHRoaXMucGU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGF0YXR1cyYmbnVsbCE9YXRhdHVzLHRoaXMuZGU9e30sZS5mZSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvcjogSW5zdGFudGlhdGlvbiBmYWlsZWQ6IFVzZSBBdGF0dXNMb2dnZXIuZ2V0SW5zdGFuY2UoKSBpbnN0ZWFkIG9mIG5ldy5cIik7dmFyIGkscz12b2lkIDAhPW4uSGl2ZUNvbmZpZy5FcnJvck1vbml0b3Iua2V5P24uSGl2ZUNvbmZpZy5FcnJvck1vbml0b3Iua2V5Om8sYz0xPT1uLkhpdmVDb25maWcuRXJyb3JNb25pdG9yLmVuYWJsZWRSVU0sdT0xPT1uLkhpdmVDb25maWcuRXJyb3JNb25pdG9yLmVuYWJsZUtleUNvbWJpbmF0aW9uLGw9MT09bi5IaXZlQ29uZmlnLkVycm9yTW9uaXRvci5lbmFibGVkRXJyb3JGaWx0ZXI7bCYmKGk9dGhpcy5nZSgpKSx0aGlzLnZlcnNpb249dCx0aGlzLnBlJiYodm9pZCAwPT1uLkhpdmVDb25maWcuRXJyb3JNb25pdG9yLmVuYWJsZWQmJmF8fHZvaWQgMCE9bi5IaXZlQ29uZmlnLkVycm9yTW9uaXRvci5lbmFibGVkJiYxPT1uLkhpdmVDb25maWcuRXJyb3JNb25pdG9yLmVuYWJsZWQpJiYoYXRhdHVzLmNvbmZpZyhzLHtlbmFibGVTb3VyY2VtYXA6ITAsZGlzYWJsZVJVTTohYyxjb25zb2xlOiExLHZlcnNpb246dCxiZWZvcmVFcnJvclNlbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ITE7ZSYmZS5jdXN0b21EYXRhJiZ2b2lkIDAhPT1lLmN1c3RvbURhdGEuZm9yY2VTZW5kJiYodD1lLmN1c3RvbURhdGEuZm9yY2VTZW5kLGRlbGV0ZSBlLmN1c3RvbURhdGEuZm9yY2VTZW5kLDA9PT1PYmplY3Qua2V5cyhlLmN1c3RvbURhdGEpLmxlbmd0aCYmKGUuY3VzdG9tRGF0YT1udWxsKSk7Zm9yKHZhciBuIGluIHIuZGUpZS5jdXN0b21EYXRhW25dPXIuZGVbbl07aWYoIWx8fHQpcmV0dXJuITA7aWYoIWkpcmV0dXJuITE7dHJ5e3ZhciBzPSExO2lmKGUuYmFja1RyYWNlcyl7Zm9yKHZhciBvPTAsYT1lLmJhY2tUcmFjZXM7bzxhLmxlbmd0aDtvKyspe3ZhciBjPWFbb107aWYoYy5mLmluZGV4T2YoaSk+LTEmJmMubG4+aCl7cz0hMDticmVha319cyYmKGUubmFtZT1lLm5hbWUucmVwbGFjZSgvJXMgXFxbWzAtOV17Mn06WzAtOV17Mn06WzAtOV17Mn06WzAtOV0rXSAvLFwiXCIpLGUubmFtZS5pbmRleE9mKFwiU3RhdHVzIENvZGUgRXJyb3I6XCIpPj0wJiYoZS50YWdzPVtcIlBsdWdpbiBFcnJvciBDb2RlXCIsZS5uYW1lLnNwbGl0KFwiOlwiKVsxXS50cmltKCldKSl9cmV0dXJuIHN9Y2F0Y2goZSl7cmV0dXJuITF9fX0pLmluc3RhbGwoKSx1JiZ0aGlzLkVlKCksdGhpcy5pc0FjdGl2ZT0hMCx3aW5kb3cuY29uc29sZSYmY29uc29sZS5sb2coXCJbSGl2ZUNvbW1dIEVycm9yIE1vbml0b3IgaW5zdGFsbGVkIFtSVU06XCIrYytcIiwgS2V5SGFuZGxlcjpcIit1K1wiXVwiKSxsJiYhaSYmdGhpcy5sb2dFcnJvcihcIkNvdWxkIG5vdCBleHRyYWN0IGVycm9yIGZpbHRlclwiKSl9cmV0dXJuIGUudmU9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PVwiMy4wLjBcIiksdm9pZCAwPT09dGhpcy5mZSYmKHRoaXMuZmU9bmV3IGUodCkpLHRoaXMuZmV9LGUucHJvdG90eXBlLkVlPWZ1bmN0aW9uKCl7aS5UZS52ZSgpLnllKFsxNiwxNyw4OF0sZnVuY3Rpb24oKXt0cnl7dGhyb3cgbmV3IEVycm9yKFwiVXBsb2FkIGNvbnNvbGUgbG9nc1wiKX1jYXRjaChlKXthdGF0dXMubm90aWZ5KGUpLHdpbmRvdy5jb25zb2xlJiZjb25zb2xlLmxvZyhcIltIaXZlQ29tbV0gY29uc29sZSBsb2cgdXBsb2FkZWQgZm9yIGRlYnVnZ2luZ1wiKX19KX0sZS5wcm90b3R5cGUuZ2U9ZnVuY3Rpb24oKXt0cnl7dGhyb3cgbmV3IEVycm9yKFwidGVzdFwiKX1jYXRjaCh0KXt2YXIgZT10LnN0YWNrLm1hdGNoKC8oXFwvXFwvLipcXC5qcykvaSk7aWYoZSYmZS5sZW5ndGg+MClyZXR1cm4gZVswXX19LGUucHJvdG90eXBlLnNldFVzZXI9ZnVuY3Rpb24oZSl7dGhpcy5wZSYmdGhpcy5pc0FjdGl2ZSYmYXRhdHVzLnNldFVzZXIoZSl9LGUucHJvdG90eXBlLm1lPWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyPWV9LGUucHJvdG90eXBlLnNldEN1c3RvbURhdGE9ZnVuY3Rpb24oZSl7dGhpcy5wZSYmdGhpcy5pc0FjdGl2ZSYmYXRhdHVzLnNldEN1c3RvbURhdGEoZSl9LGUucHJvdG90eXBlLkllPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXMuZGVbdF09ZVt0XX0sZS5wcm90b3R5cGUubG9nRXJyb3I9ZnVuY3Rpb24oZSx0LHIsaSxuKXt2YXIgcz1cIlwiO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0P3M9dC50cmltKCk6dm9pZCAwIT09dCYmKGk9dCksKGkgaW5zdGFuY2VvZiBFcnJvcnx8aSYmXCJvYmplY3RcIiE9dHlwZW9mIGkpJiYoaT17ZXJyb3I6aS50b1N0cmluZygpfSksaXx8KGk9e30pLGkuZXJyb3JDb2RlPXIsdGhpcy5sb2dnZXImJihPYmplY3Qua2V5cyhpKS5sZW5ndGg+MD90aGlzLmxvZ2dlci53YXJuKHMrXCIgXCIrZSxpKTp0aGlzLmxvZ2dlci53YXJuKHMrXCIgXCIrZSkpLHMmJihuPW4/bi5jb25jYXQoW3NdKTpbc10pLGkuZm9yY2VTZW5kPSEwLHRoaXMucGUmJnRoaXMuaXNBY3RpdmUpdHJ5e3Rocm93IG5ldyBFcnJvcihlKX1jYXRjaChlKXthdGF0dXMubm90aWZ5KGUsaSxuKX19LGUucHJvdG90eXBlLnNldFRhZ3M9ZnVuY3Rpb24oZSl7dGhpcy5wZSYmdGhpcy5pc0FjdGl2ZSYmYXRhdHVzLnNldFRhZ3MoZSl9LGUucHJvdG90eXBlLm5vdGlmeT1mdW5jdGlvbihlLHQpe3RoaXMucGUmJnRoaXMuaXNBY3RpdmUmJih0fHwodD17fSksdC5mb3JjZVNlbmQ9ITAsYXRhdHVzLm5vdGlmeShlLHQpKX0sZX0oKTt0LkVycm9yTW9uaXRvcj1jfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXtlW2UuU2U9MjY4NDM1NDU2XT1cIkJBU0VfQ09ERVwiLGVbZS5SZT0yNjg0MzU0NTddPVwiRklSRV9TRVJWRVJfQ09OTkVDVEVEX1dJVEhfU1dBUk1cIixlW2Uud2U9MjY4NDM1NDU4XT1cIkZJUkVfU0VSVkVSX0NPTk5FQ1RFRF9XSVRIT1VUX1NXQVJNXCIsZVtlLmJlPTI2ODQzNTQ1OV09XCJDT05ORUNUSU9OX05PVF9FU1RBQkxJU0hFRFwiLGVbZS5DZT0yNjg0MzU0NjBdPVwiU0VORF9NRVNTQUdFX1RPX05PTl9FWElTVElOR19DSEFOTkVMXCIsZVtlLl9lPTI2ODQzNTQ2MV09XCJSRUNFSVZFRF9NRVNTQUdFX0ZST01fTk9OX0VYSVNUSU5HX0NPTk5FQ1RJT05cIn0oZS5QZXx8KGUuUGU9e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTUzNjg3MDkxMl09XCJCQVNFX0NPREVcIixlW2UuQWU9NTM2ODcwOTEzXT1cIkNSRUFURV9PRkZFUlwiLGVbZS5PZT01MzY4NzA5MTRdPVwiQ1JFQVRFX0FOU1dFUlwiLGVbZS5OZT01MzY4NzA5MTVdPVwiU0lHTkFMSU5HX1NUQVRFX0NMT1NFRFwiLGVbZS5EZT01MzY4NzA5MTZdPVwiU0VUX0xPQ0FMX0RFU0NSSVBUSU9OX0ZBSUxFRFwiLGVbZS5rZT01MzY4NzA5MTddPVwiTkVHT1RJQVRJT05fRkFJTFVSRVwiLGVbZS5MZT01MzY4NzA5MThdPVwiU0VUVVBfQ0hBTk5FTF9FUlJPUlwiLGVbZS5NZT01MzY4NzA5MTldPVwiSUNFX0NPTk5FQ1RJT05fRkFJTEVEXCIsZVtlLkZlPTUzNjg3MDkyMF09XCJTRVRfUkVNT1RFX0RFU0NSSVBUSU9OXCIsZVtlLlVlPTUzNjg3MDkyMV09XCJVUERBVEVfSUNFX0NBTkRJREFURVNcIixlW2UuQmU9NTM2ODcwOTIyXT1cIkFOU1dFUl9SRUNFSVZFRFwiLGVbZS5IZT01MzY4NzA5MjNdPVwiT0ZGRVJfUkVDRUlWRURcIixlW2UueGU9NTM2ODcwOTI0XT1cIlNFTkRfQ0FORElEQVRFU1wiLGVbZS5xZT01MzY4NzA5MjVdPVwiQ0xPU0VfQ09OTkVDVElPTlwifShlLkdlfHwoZS5HZT17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9ODA1MzA2MzY4XT1cIkJBU0VfQ09ERVwiLGVbZS5WZT04MDUzMDYzNjldPVwiU0VORF9NU0dfV0lUSE9VVF9DSEFOTkVMXCIsZVtlLmplPTgwNTMwNjM3MF09XCJNU0dfVFJJR0dFUl9FUlJPUlwiLGVbZS5RZT04MDUzMDYzNzFdPVwiQ09OTkVDVElPTl9USU1FT1VUXCJ9KGUuS2V8fChlLktlPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT0xMDczNzQxODI0XT1cIkJBU0VfQ09ERVwiLGVbZS5xZT0xMDczNzQxODI1XT1cIkNMT1NFX0NPTk5FQ1RJT05cIixlW2UuWWU9MTA3Mzc0MTgyNl09XCJQMlBfRElTUEFUQ0hFUl9FUlJPUlwifShlLldlfHwoZS5XZT17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9MTM0MjE3NzI4MF09XCJCQVNFX0NPREVcIixlW2UuemU9MTM0MjE3NzI4MV09XCJDT05TVFJVQ1RfTUVTU0FHRVwiLGVbZS5KZT0xMzQyMTc3MjgyXT1cIkRST1BQRURfTUVTU0FHRVwiLGVbZS5YZT0xMzQyMTc3MjgzXT1cIlNFTkRfTUVTU0FHRVwiLGVbZS5aZT0xMzQyMTc3Mjg0XT1cIlJFQ0VJVkVfTUVTU0FHRVwifShlLiRlfHwoZS4kZT17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9MTYxMDYxMjczNl09XCJCQVNFX0NPREVcIixlW2UuZXQ9MTYxMDYxMjczN109XCJORVdfRElTUEFUQ0hFUlwifShlLnR0fHwoZS50dD17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9MTg3OTA0ODE5Ml09XCJCQVNFX0NPREVcIixlW2UucnQ9MTg3OTA0ODE5M109XCJJTklUX0NBQ0hFXCIsZVtlLml0PTE4NzkwNDgxOTRdPVwiUFVUX09QRVJBVElPTlwiLGVbZS5udD0xODc5MDQ4MTk1XT1cIkdFVF9PUEVSQVRJT05cIixlW2Uuc3Q9MTg3OTA0ODE5Nl09XCJDT05UQUlOU19PUEVSQVRJT05cIixlW2Uub3Q9MTg3OTA0ODE5N109XCJHRVRfS0VZU19PUEVSQVRJT05cIixlW2UuYXQ9MTg3OTA0ODE5OF09XCJHRVRfRUxFTUVOVFNfT1BFUkFUSU9OXCJ9KGUuaHR8fChlLmh0PXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT0yMTQ3NDgzNjQ4XT1cIkJBU0VfQ09ERVwiLGVbZS5pdD0yMTQ3NDgzNjQ5XT1cIlBVVF9PUEVSQVRJT05cIixlW2UubnQ9MjE0NzQ4MzY1MF09XCJHRVRfT1BFUkFUSU9OXCIsZVtlLnN0PTIxNDc0ODM2NTFdPVwiQ09OVEFJTlNfT1BFUkFUSU9OXCIsZVtlLm90PTIxNDc0ODM2NTJdPVwiR0VUX0tFWVNfT1BFUkFUSU9OXCIsZVtlLmF0PTIxNDc0ODM2NTNdPVwiR0VUX0VMRU1FTlRTX09QRVJBVElPTlwiLGVbZS5jdD0yMTQ3NDgzNjU0XT1cIlBVUkdFX0NBQ0hFX09QRVJBVElPTlwifShlLnV0fHwoZS51dD17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9MjQxNTkxOTEwNF09XCJCQVNFX0NPREVcIn0oZS5sdHx8KGUubHQ9e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTI2ODQzNTQ1NjBdPVwiQkFTRV9DT0RFXCIsZVtlLnB0PTI2ODQzNTQ1NjFdPVwiRElTQ09WRVJFRF9QRUVSU1wiLGVbZS5kdD0yNjg0MzU0NTYyXT1cIkxFQURFUl9FTEVDVElPTlwiLGVbZS5mdD0yNjg0MzU0NTYzXT1cIkdDX01FTUJFUlNcIixlW2UuZ3Q9MjY4NDM1NDU2NF09XCJBRERfTEFOX01FTUJFUlwiLGVbZS5FdD0yNjg0MzU0NTY1XT1cIkFERF9SQU5ET01fTUVNQkVSXCIsZVtlLnZ0PTI2ODQzNTQ1NjZdPVwiU0FNUExFX01FTUJFUlNISVBcIn0oZS55dHx8KGUueXQ9e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTI5NTI3OTAwMTZdPVwiQkFTRV9DT0RFXCIsZVtlLlR0PTI5NTI3OTAwMTddPVwiU0VORF9BTExfSEFWRVNcIixlW2UuSXQ9Mjk1Mjc5MDAxOF09XCJTRU5EX0hBVkVcIixlW2UuU3Q9Mjk1Mjc5MDAxOV09XCJVTktOT1dOX0hBVkVcIixlW2UuUnQ9Mjk1Mjc5MDAyMF09XCJVTktOT1dOX0hBVkVTXCIsZVtlLnd0PTI5NTI3OTAwMjFdPVwiUkVDRUlWRURfSEFWRVwiLGVbZS5idD0yOTUyNzkwMDIyXT1cIlJFQ0VJVkVEX0hBVkVTXCIsZVtlLkN0PTI5NTI3OTAwMjNdPVwiTk9fT1VUX1BBUlRORVJcIixlW2UuX3Q9Mjk1Mjc5MDAyNF09XCJDUkVBVEVfUkFORE9NX0JVRkZFUlwiLGVbZS5QdD0yOTUyNzkwMDI1XT1cIlJFUVVFU1RfUElOR1wiLGVbZS5BdD0yOTUyNzkwMDI2XT1cIlJFQ0VJVkVEX1BJTkdcIixlW2UuT3Q9Mjk1Mjc5MDAyN109XCJVTktOT1dOX1BJTkdcIixlW2UuTnQ9Mjk1Mjc5MDAyOF09XCJTRU5EX1BPTkdcIixlW2UuRHQ9Mjk1Mjc5MDAyOV09XCJVTktPV05fUE9OR1wiLGVbZS5rdD0yOTUyNzkwMDMwXT1cIldST05HX1BPTkdfU0laRVwiLGVbZS5MdD0yOTUyNzkwMDMxXT1cIldST05HX1RJTUVTVEFNUFwiLGVbZS5NdD0yOTUyNzkwMDMyXT1cIlJFQ0VJVkVEX1BPTkdcIixlW2UuRnQ9Mjk1Mjc5MDAzM109XCJDT0xMRUNUX1BBUlRORVJfU05BUFNIT1RTXCJ9KGUuVXR8fChlLlV0PXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT0zMjIxMjI1NDcyXT1cIkJBU0VfQ09ERVwiLGVbZS5CdD0zMjIxMjI1NDczXT1cIlNUQVJUX1BBUlRORVJTSElQXCIsZVtlLkh0PTMyMjEyMjU0NzRdPVwiTkVXX0xBTl9NRU1CRVJcIixlW2UueHQ9MzIyMTIyNTQ3NV09XCJJTl9QQVJUTkVSX0NIT0lDRVwiLGVbZS5xdD0zMjIxMjI1NDc2XT1cIklOX1BBUlRORVJfQUREX1BST0NFU1NcIixlW2UuR3Q9MzIyMTIyNTQ3N109XCJJTl9QQVJUTkVSX0NPTk5FQ1RcIixlW2UuVnQ9MzIyMTIyNTQ3OF09XCJJTl9QQVJUTkVSU0hJUF9SRVFVRVNUXCIsZVtlLmp0PTMyMjEyMjU0NzldPVwiT1VUX1BBUk5URVJTSElQX1JFUVVFU1RfUFJPQ0VTU1wiLGVbZS5RdD0zMjIxMjI1NDgwXT1cIkNPTlNUUlVDVF9ESVNDT1ZFUl9QRUVSX0lORk9cIixlW2UuS3Q9MzIyMTIyNTQ4MV09XCJTRU5EX1BBUlROX1JFU1BcIixlW2UuWXQ9MzIyMTIyNTQ4Ml09XCJORVdfSU5fUEFSVE5FUl9UT19MSVNUXCIsZVtlLld0PTMyMjEyMjU0ODNdPVwiUkVNT1ZFX0RJU0NPTk5FQ1RFRF9QRUVSXCIsZVtlLnp0PTMyMjEyMjU0ODRdPVwiUkVNT1ZFX0lOX1BBUlRORVJcIixlW2UuSnQ9MzIyMTIyNTQ4NV09XCJDTE9TRV9SRUNFSVZFRFwiLGVbZS5YdD0zMjIxMjI1NDg2XT1cIlNFTkRfUEFSVF9SRVFVRVNUXCIsZVtlLlp0PTMyMjEyMjU0ODddPVwiUEFSVF9SRVFVRVNUX0VYUElSRURcIixlW2UuJHQ9MzIyMTIyNTQ4OF09XCJVTktOT1dOX1BBUlRORVJTSElQX1JFUVVFU1RfRVhQSVJFRFwiLGVbZS5lcj0zMjIxMjI1NDg5XT1cIlVOS05PV05fT1VUX1BBUlRfUkVTUFwiLGVbZS50cj0zMjIxMjI1NDkwXT1cIkNMT1NFX1BBUlRORVJTSElQXCIsZVtlLnJyPTMyMjEyMjU0OTFdPVwiQU5OT1VOQ0VfQklUUkFURVwiLGVbZS5pcj0zMjIxMjI1NDkyXT1cIkNPTlNUUlVDVF9BTk5PVU5DRV9CSVRSQVRFX01TR1wiLGVbZS5ucj0zMjIxMjI1NDkzXT1cIlJFQ0VJVkVfQklUUkFURV9JTkZPXCIsZVtlLnNyPTMyMjEyMjU0OTRdPVwiUEVFUl9JTkZPX1JFQ0VJVkVEXCIsZVtlLmFyPTMyMjEyMjU0OTVdPVwiUEVFUl9JTkZPX0FOTk9VTkNFRFwiLGVbZS5ocj0zMjIxMjI1NDk2XT1cIkNPTExFQ1RfQUxMX1BBUlRORVJTXCJ9KGUuY3J8fChlLmNyPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT0zNDg5NjYwOTI4XT1cIkJBU0VfQ09ERVwiLGVbZS51cj0zNDg5NjYwOTI5XT1cIlVQREFURV9JTl9QQVJUTkVSU1wifShlLmxyfHwoZS5scj17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9Mzc1ODA5NjM4NF09XCJCQVNFX0NPREVcIixlW2UucHI9Mzc1ODA5NjM4NV09XCJTRUxFQ1RfUEFSVE5FUlNfVE9fUkVNT1ZFXCIsZVtlLmRyPTM3NTgwOTYzODZdPVwiU0VMRUNUX1BBUlRORVJTX1RPX0FERFwiLGVbZS5ncj0zNzU4MDk2Mzg3XT1cIlNFTEVDVF9VUERBVEVfT1VUXCJ9KGUuRXJ8fChlLkVyPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT00MDI2NTMxODQwXT1cIkJBU0VfQ09ERVwiLGVbZS5wcj00MDI2NTMxODQxXT1cIlNFTEVDVF9QQVJUTkVSU19UT19SRU1PVkVcIixlW2UuZHI9NDAyNjUzMTg0Ml09XCJTRUxFQ1RfUEFSVE5FUlNfVE9fQUREXCIsZVtlLmdyPTQwMjY1MzE4NDNdPVwiU0VMRUNUX1VQREFURV9PVVRcIn0oZS52cnx8KGUudnI9e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTQyOTQ5NjcyOTZdPVwiQkFTRV9DT0RFXCIsZVtlLnVyPTQyOTQ5NjcyOTddPVwiVVBEQVRFX0lOX1BBUlRORVJTXCIsZVtlLnByPTQyOTQ5NjcyOThdPVwiU0VMRUNUX1BBUlRORVJTX1RPX1JFTU9WRVwiLGVbZS5kcj00Mjk0OTY3Mjk5XT1cIlNFTEVDVF9QQVJUTkVSU19UT19BRERcIixlW2UuZ3I9NDI5NDk2NzMwMF09XCJTRUxFQ1RfVVBEQVRFX09VVFwiLGVbZS55cj00Mjk0OTY3MzAxXT1cIkdST1VQX1BBUlRORVJTXCIsZVtlLlRyPTQyOTQ5NjczMDJdPVwiSURFTlRJRllfTUVNQkVSX0FTX0xFQURFUl9PUl9TQU1FX1NJVEVcIixlW2UubXI9NDI5NDk2NzMwM109XCJBSEVBRF9CVVRfQkVISU5EX0RFTFRBXCIsZVtlLklyPTQyOTQ5NjczMDRdPVwiQkVISU5EX09SX05PVF9SRVRSSUVWSU5HX0JJVFJBVEVcIixlW2UuU3I9NDI5NDk2NzMwNV09XCJHRVRfREVMVEFfRk9SX0JJVFJBVEVcIn0oZS5Scnx8KGUuUnI9e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTQ1NjM0MDI3NTJdPVwiQkFTRV9DT0RFXCIsZVtlLndyPTQ1NjM0MDI3NTNdPVwiVVBEQVRFX09VVF9QQVJUTkVSU1wifShlLmJyfHwoZS5icj17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9NDgzMTgzODIwOF09XCJCQVNFX0NPREVcIixlW2UuQ3I9NDgzMTgzODIwOV09XCJBRERfRlJBR01FTlRfVE9fTUFQXCIsZVtlLlByPTQ4MzE4MzgyMTBdPVwiV1JBUF9DSFVOS1wiLGVbZS5Bcj00ODMxODM4MjExXT1cIkdFTkVSQVRFX0hBU0hNQVBTXCJ9KGUuT3J8fChlLk9yPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT01MTAwMjczNjY0XT1cIkJBU0VfQ09ERVwiLGVbZS5Ocj01MTAwMjczNjY1XT1cIklOSVRfQUVTX01BTkFHRVJcIixlW2UuRHI9NTEwMDI3MzY2Nl09XCJJTklUX0tFWVwiLGVbZS5rcj01MTAwMjczNjY3XT1cIklOSVRfSVZcIixlW2UuTHI9NTEwMDI3MzY2OF09XCJERUNSWVBUX0JVRkZFUlwiLGVbZS5Ncj01MTAwMjczNjY5XT1cIkRPV05MT0FEX0tFWV9PTkxPQURcIixlW2UuRnI9NTEwMDI3MzY3MF09XCJET1dOTE9BRF9LRVlcIn0oZS5Vcnx8KGUuVXI9e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTUzNjg3MDkxMjBdPVwiQkFTRV9DT0RFXCIsZVtlLkJyPTUzNjg3MDkxMjFdPVwiR0VUX0VOVElUWV9UWVBFXCIsZVtlLkhyPTUzNjg3MDkxMjJdPVwiR0VUX0VOVElUWV9DSEFSQUNURVJJU1RJQ1NcIixlW2UueHI9NTM2ODcwOTEyM109XCJHRVRfTkVYVF9FTlRJVFlcIixlW2UucXI9NTM2ODcwOTEyNF09XCJJU19DVVJSRU5UX0NPTlRFWFRcIixlW2UuR3I9NTM2ODcwOTEyNV09XCJQQVJTRURfTUVUQURBVEFcIixlW2UuVnI9NTM2ODcwOTEyNl09XCJQUkVGRVRDSF9NRVRBREFUQV9SRUNFSVZFRFwiLGVbZS5qcj01MzY4NzA5MTI3XT1cIkZSQUdNRU5UX1JFQ0VJVkVEXCIsZVtlLlFyPTUzNjg3MDkxMjhdPVwiRVZBTFVBVEVfUFJPVEVDVElPTlwiLGVbZS5Lcj01MzY4NzA5MTI5XT1cIkdFVF9ESVNUQU5DRV9EVVJBVElPTlwifShlLllyfHwoZS5Zcj17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9NTYzNzE0NDU3Nl09XCJCQVNFX0NPREVcIixlW2UuV3I9NTYzNzE0NDU3N109XCJQQVJTRV9NRVRBREFUQVwiLGVbZS56cj01NjM3MTQ0NTc4XT1cIkVYVFJBQ1RfU0VHTUVOVF9NQVBTXCIsZVtlLkpyPTU2MzcxNDQ1NzldPVwiSU5JVF9QUk9URUNUSU9OXCIsZVtlLlhyPTU2MzcxNDQ1ODBdPVwiR0VUX1NFR01FTlRfSU5GT1wiLGVbZS5acj01NjM3MTQ0NTgxXT1cIkdFVF9TRUdNRU5UX0RJU1RBTkNFXCIsZVtlLiRyPTU2MzcxNDQ1ODJdPVwiRVhUUkFDVF9EVVJBVElPTlwiLGVbZS5laT01NjM3MTQ0NTgzXT1cIkVYVFJBQ1RfRFVSQVRJT05fT1JfREVDUllQVFwiLGVbZS50aT01NjM3MTQ0NTg0XT1cIkVYVFJBQ1RfRFVSQVRJT05fQ0FOTk9UX0RFQ1JZUFRcIixlW2Uucmk9NTYzNzE0NDU4NV09XCJFWFRSQUNUX0RVUkFUSU9OX05PTl9FTkNSWVBURURcIixlW2UuaWk9NTYzNzE0NDU4Nl09XCJHRU5FUkFURV9NSVNTSU5HX1NFR01FTlRTXCIsZVtlLm5pPTU2MzcxNDQ1ODddPVwiUkVHRU5FUkFURV9NQU5JRkVTVFwiLGVbZS5zaT01NjM3MTQ0NTg4XT1cIlRSSU1fTUFOSUZFU1RcIixlW2Uub2k9NTYzNzE0NDU4OV09XCJQQVJTRV9CSVRSQVRFU19UT19GSUxURVJcIixlW2UuYWk9NTYzNzE0NDU5MF09XCJGSUxURVJfQklUUkFURVNcIixlW2UuaGk9NTYzNzE0NDU5MV09XCJHRVRfRElTVEFOQ0VfRFVSQVRJT05fQkVUV0VFTl9TRUdNRU5UU1wiLGVbZS5jaT01NjM3MTQ0NTkyXT1cIkdFVF9TRUdNRU5UXCJ9KGUudWl8fChlLnVpPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT01OTA1NTgwMDMyXT1cIkJBU0VfQ09ERVwiLGVbZS5xcj01OTA1NTgwMDMzXT1cIklTX0NVUlJFTlRfQ09OVEVYVFwiLGVbZS5Ccj01OTA1NTgwMDM0XT1cIkdFVF9FTlRJVFlfVFlQRVwiLGVbZS5Icj01OTA1NTgwMDM1XT1cIkdFVF9FTlRJVFlfQ0hBUkFDVEVSSVNUSUNTXCIsZVtlLmxpPTU5MDU1ODAwMzZdPVwiTUVUQURBVEFfUkVDRUlWRURcIixlW2UucGk9NTkwNTU4MDAzN109XCJTQ0hFRFVMRV9NRVRBREFUQV9QUkVGRVRDSFwiLGVbZS54cj01OTA1NTgwMDM4XT1cIkdFVF9ORVhUX0VOVElUWVwiLGVbZS5Lcj01OTA1NTgwMDM5XT1cIkdFVF9ESVNUQU5DRV9EVVJBVElPTlwifShlLmRpfHwoZS5kaT17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9NjE3NDAxNTQ4OF09XCJCQVNFX0NPREVcIixlW2UuZmk9NjE3NDAxNTQ4OV09XCJQTEFZTElTVF9NSVNNQVRDSFwiLGVbZS5naT02MTc0MDE1NDkwXT1cIkZMT0FUX0JJVFJBVEVcIixlW2UuV3I9NjE3NDAxNTQ5MV09XCJQQVJTRV9NRVRBREFUQVwiLGVbZS5Ycj02MTc0MDE1NDkyXT1cIkdFVF9TRUdNRU5UX0lORk9cIixlW2UuRWk9NjE3NDAxNTQ5M109XCJVUERBVEVfUExBWUxJU1RcIixlW2Uudmk9NjE3NDAxNTQ5NF09XCJUUklNX1BMQVlMSVNUXCJ9KGUueWl8fChlLnlpPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT02NDQyNDUwOTQ0XT1cIkJBU0VfQ09ERVwiLGVbZS5UaT02NDQyNDUwOTQ1XT1cIkdFVF9QMlBfVElNRU9VVFwiLGVbZS5taT02NDQyNDUwOTQ2XT1cIkRFTElWRVJfREVMQVlcIn0oZS5JaXx8KGUuSWk9e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTY3MTA4ODY0MDBdPVwiQkFTRV9DT0RFXCIsZVtlLlNpPTY3MTA4ODY0MDFdPVwiSVNfUExBWUVSX0JVRkZFUklOR19CQVNFXCIsZVtlLlJpPTY3MTA4ODY0MDJdPVwiQ09ORklHVVJFX1JFUVVFU1RfRElSRUNUSVZFXCIsZVtlLndpPTY3MTA4ODY0MDNdPVwiQVRURU1QVF9UT19VUEdSQURFX1BSRUZFVENIXCJ9KGUuYml8fChlLmJpPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT02OTc5MzIxODU2XT1cIkJBU0VfQ09ERVwiLGVbZS5DaT02OTc5MzIxODU3XT1cIlBSRVBBUkVfUkVRVUVTVFwiLGVbZS5faT02OTc5MzIxODU4XT1cIkdFVF9DT05ORUNUSVZJVFlfSU5GT1wiLGVbZS5QaT02OTc5MzIxODU5XT1cIkNPTExFQ1RfVFJBQ0tFUl9SRVFVRVNUX0lORk9cIixlW2UuQWk9Njk3OTMyMTg2MF09XCJQUkVQQVJFX1FVRVJZXCIsZVtlLk9pPTY5NzkzMjE4NjFdPVwiUFJFUEFSRV9CSVRSQVRFX1FVRVJZXCIsZVtlLk5pPTY5NzkzMjE4NjJdPVwiUFJFUEFSRV9UUkFDS0VSX0lORk9cIixlW2UuRGk9Njk3OTMyMTg2M109XCJTRU5EX1JFUVVFU1RcIixlW2Uua2k9Njk3OTMyMTg2NF09XCJIQU5ETEVfUkVTUE9OU0VcIn0oZS5MaXx8KGUuTGk9e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTcyNDc3NTczMTJdPVwiQkFTRV9DT0RFXCIsZVtlLk1pPTcyNDc3NTczMTNdPVwiTkVXX1RSQUNLRVJfQ0xJRU5UXCIsZVtlLkZpPTcyNDc3NTczMTRdPVwiU0VSSUFMSVpFX1JFUVVFU1RcIixlW2UuVWk9NzI0Nzc1NzMxNV09XCJERVNFUklBTElaRV9SRVNQT05TRVwiLGVbZS5CaT03MjQ3NzU3MzE2XT1cIlNFUlZJQ0VfQ09OTkVDVElPTl9ET1dOXCIsZVtlLkRpPTcyNDc3NTczMTddPVwiU0VORF9SRVFVRVNUXCIsZVtlLkhpPTcyNDc3NTczMThdPVwiVFJBQ0tFUl9NQU5BR0VSX0lOSVRcIn0oZS54aXx8KGUueGk9e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTc1MTYxOTI3NjhdPVwiQkFTRV9DT0RFXCIsZVtlLnFpPTc1MTYxOTI3NjldPVwiU09SVF9QQVJUTkVSU1wifShlLkdpfHwoZS5HaT17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9Nzc4NDYyODIyNF09XCJCQVNFX0NPREVcIixlW2UuVmk9Nzc4NDYyODIyNV09XCJDSE9PU0VfUEFSVE5FUlwifShlLmppfHwoZS5qaT17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9ODA1MzA2MzY4MF09XCJCQVNFX0NPREVcIixlW2UuUWk9ODA1MzA2MzY4MV09XCJDT05TVFJVQ1RfRlJBR01FTlRfUkVRVUVTVF9NRVNTQUdFXCIsZVtlLktpPTgwNTMwNjM2ODJdPVwiU0VORF9GUkFHTUVOVF9SRVFVRVNUXCIsZVtlLllpPTgwNTMwNjM2ODNdPVwiUkVDRUlWRV9DSFVOS1wiLGVbZS5XaT04MDUzMDYzNjg0XT1cIlNFTkRfQUNLXCIsZVtlLnppPTgwNTMwNjM2ODVdPVwiQ0xFQU5fVVBfTk9UX1BFTkRJTkdcIixlW2UuSmk9ODA1MzA2MzY4Nl09XCJTVE9QX1RSQU5TRkVSXCIsZVtlLlhpPTgwNTMwNjM2ODddPVwiUkVDRUlWRV9FWFBJUkVEX0NIVU5LXCJ9KGUuWml8fChlLlppPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT04MzIxNDk5MTM2XT1cIkJBU0VfQ09ERVwiLGVbZS4kaT04MzIxNDk5MTM3XT1cIkNPTlNUUlVDVF9DSFVOS19SRVNQT05TRVwiLGVbZS5lbj04MzIxNDk5MTM4XT1cIlNUQVJUX1NFTkRJTkdfQ0hVTktcIixlW2UudG49ODMyMTQ5OTEzOV09XCJTRU5EX0NIVU5LXCIsZVtlLnJuPTgzMjE0OTkxNDBdPVwiVU5LTk9XTl9BQ0tcIn0oZS5pbnx8KGUuaW49e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTg1ODk5MzQ1OTJdPVwiQkFTRV9DT0RFXCIsZVtlLm5uPTg1ODk5MzQ1OTNdPVwiTk9fUEFSVE5FUl9GT1VORFwiLGVbZS5zbj04NTg5OTM0NTk0XT1cIkZJTFRFUl9JTl9QQVJUTkVSU1wiLGVbZS5hbj04NTg5OTM0NTk1XT1cIlNFVF9SRVFVRVNUX1RJTUVPVVRcIixlW2UuaG49ODU4OTkzNDU5Nl09XCJSRU1PVkVfUkVRVUVTVFwiLGVbZS5jbj04NTg5OTM0NTk3XT1cIkNBTkNFTF9PTl9OT05fRVhJU1RJTkdfU0VTU0lPTlwiLGVbZS51bj04NTg5OTM0NTk4XT1cIkRPX05PVF9IQVZFXCIsZVtlLnBuPTg1ODk5MzQ1OTldPVwiUkVRVUVTVEVEX1RPX05PTl9QQVJUTkVSXCJ9KGUuZG58fChlLmRuPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT04ODU4MzcwMDQ4XT1cIkJBU0VfQ09ERVwiLGVbZS5mbj04ODU4MzcwMDQ5XT1cIlJFU1BPTkRfVE9fUEVFUlwiLGVbZS5nbj04ODU4MzcwMDUwXT1cIlJFUVVFU1RfU0FUSVNGSUVEXCIsZVtlLkVuPTg4NTgzNzAwNTFdPVwiUkVRVUVTVF9QQVJUSUFMTFlfU0FUSVNGSUVEXCIsZVtlLnZuPTg4NTgzNzAwNTJdPVwiUkVRVUVTVF9OT1RfU0FUSVNGSUVEXCIsZVtlLnluPTg4NTgzNzAwNTNdPVwiU0VORF9ET19OT1RfSEFWRVwiLGVbZS5Ubj04ODU4MzcwMDU0XT1cIlNFTkRfTk9fUEFSVE5FUlNcIn0oZS5tbnx8KGUubW49e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTkxMjY4MDU1MDRdPVwiQkFTRV9DT0RFXCIsZVtlLkluPTkxMjY4MDU1MDVdPVwiVklPTEFURV9TUE9PRklOR19IQU5ETEVSXCIsZVtlLlNuPTkxMjY4MDU1MDZdPVwiVklPTEFURV9TUE9PRklOR19SVUxFU1wiLGVbZS5Sbj05MTI2ODA1NTA3XT1cIkFERF9PUl9VUERBVEVfU1BPT0ZJTkdfTUFQU1wiLGVbZS53bj05MTI2ODA1NTA4XT1cIlBFUklPRElDX0NIRUNLX0lQX1NQT09GSU5HXCJ9KGUuYm58fChlLmJuPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT05Mzk1MjQwOTYwXT1cIkJBU0VfQ09ERVwiLGVbZS5Dbj05Mzk1MjQwOTYxXT1cIlJFUVVFU1RfQ09NUExFVEVEXCIsZVtlLl9uPTkzOTUyNDA5NjJdPVwiUkVRVUVTVF9OT1RfRVhJU1RJTkdfQ09NUExFVEVEXCIsZVtlLlBuPTkzOTUyNDA5NjNdPVwiUkVRVUVTVF9QQVJUSUFMTFlfRkFJTEVEXCIsZVtlLkFuPTkzOTUyNDA5NjRdPVwiUkVRVUVTVF9OT1RfRVhJU1RJTkdfUEFSVElBTExZX0ZBSUxFRFwiLGVbZS5Pbj05Mzk1MjQwOTY1XT1cIlJFUVVFU1RfRkFJTEVEXCIsZVtlLk5uPTkzOTUyNDA5NjZdPVwiUkVRVUVTVF9OT1RfRVhJU1RJTkdfRkFJTEVEXCJ9KGUuRG58fChlLkRuPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT05NjYzNjc2NDE2XT1cIkJBU0VfQ09ERVwiLGVbZS5rbj05NjYzNjc2NDE3XT1cIlVQREFURV9XQU5URURfU0VTU0lPTlNcIixlW2UuTG49OTY2MzY3NjQxOF09XCJDT05GSUdVUkVfUFJFRkVUQ0hJTkdcIixlW2UuTW49OTY2MzY3NjQxOV09XCJTVEFSVF9QUkVGRVRDSElOR1wiLGVbZS5Gbj05NjYzNjc2NDIwXT1cIkZSQUdNRU5UX1JFVFJJRVZFRF9TRVNTSU9OX05PVF9FWElTVElOR1wiLGVbZS5Vbj05NjYzNjc2NDIxXT1cIkFUVEVNUFRfUFJFRkVUQ0hfQkVGT1JFX1BMQVlFUl9SRVFVRVNUXCIsZVtlLkJuPTk2NjM2NzY0MjJdPVwiRk9SV0FSRF9JRl9ORUNFU1NBUllcIixlW2UuSG49OTY2MzY3NjQyM109XCJJU19BTExPV0VEX1RPX1BSRUZFVENIXCIsZVtlLnhuPTk2NjM2NzY0MjRdPVwiUFJFRkVUQ0hfUFJPQ0VTU1wiLGVbZS5xbj05NjYzNjc2NDI1XT1cIkNIRUNLX1BMQVlFUl9ESVNUQU5DRVwiLGVbZS5Hbj05NjYzNjc2NDI2XT1cIk9GRkxPQURfTEVBREVSXCIsZVtlLlZuPTk2NjM2NzY0MjddPVwiVVBHUkFERV9QUkVGRVRDSFwifShlLmpufHwoZS5qbj17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9OTkzMjExMTg3Ml09XCJCQVNFX0NPREVcIixlW2UuUW49OTkzMjExMTg3M109XCJSRVFVRVNUX1RJTUVPVVRcIn0oZS5Lbnx8KGUuS249e30pKTshZnVuY3Rpb24oZSl7ZVtlLlNlPTEwMjAwNTQ3MzI4XT1cIkJBU0VfQ09ERVwiLGVbZS5Zbj0xMDIwMDU0NzMyOV09XCJQTEFZRVJfUkVRVUVTVF9FUlJPUlwifShlLldufHwoZS5Xbj17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9MTA0Njg5ODI3ODRdPVwiQkFTRV9DT0RFXCIsZVtlLnpuPTEwNDY4OTgyNzg1XT1cIkFERF9IQVZFXCIsZVtlLkpuPTEwNDY4OTgyNzg2XT1cIlJFTU9WRV9QRUVSXCJ9KGUuWG58fChlLlhuPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5TZT0xMDczNzQxODI0MF09XCJCQVNFX0NPREVcIixlW2UuWm49MTA3Mzc0MTgyNDFdPVwiQ09OU1RSVUNUX1NXQVJNXCIsZVtlLiRuPTEwNzM3NDE4MjQyXT1cIklOSVRfU1dBUk1cIixlW2UuZXM9MTA3Mzc0MTgyNDNdPVwiU1dJVENIX1NUQVRFXCIsZVtlLlFuPTEwNzM3NDE4MjQ0XT1cIlJFUVVFU1RfVElNRU9VVFwifShlLnJzfHwoZS5ycz17fSkpOyFmdW5jdGlvbihlKXtlW2UuU2U9MTEwMDU4NTM2OTZdPVwiQkFTRV9DT0RFXCIsZVtlLm5zPTExMDA1ODUzNjk3XT1cIlNFUklBTElaRV9NRVNTQUdFXCIsZVtlLnNzPTExMDA1ODUzNjk4XT1cIkVYVFJBQ1RfTUVTU0FHRVwifShlLmFzfHwoZS5hcz17fSkpfSh0LmhzfHwodC5ocz17fSkpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlLHQscixzKXtpZighKHRoaXMgaW5zdGFuY2VvZiBpKSlyZXR1cm4gbmV3IGkoZSx0LHIscyk7dD10fHxPYmplY3QuY3Mscj1yfHxPYmplY3QuaGFzaCxzPXN8fEZ1bmN0aW9uLnVzLHRoaXMubHM9dCx0aGlzLnBzPXIsdGhpcy5kcz1zLHRoaXMuZnM9bmV3IG4odm9pZCAwLGZ1bmN0aW9uKGUscil7cmV0dXJuIHQoZS5rZXksci5rZXkpfSxmdW5jdGlvbihlKXtyZXR1cm4gcihlLmtleSl9KSx0aGlzLmxlbmd0aD0wLHRoaXMuYWRkRWFjaChlKX12YXIgbj0ocigxMSkscig2OCkpLHM9cigxMiksbz1yKDUyKSxhPXIoMTMpO2UuaT1pLGkuTWFwPWksT2JqZWN0LmFkZEVhY2goaS5wcm90b3R5cGUscy5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKGkucHJvdG90eXBlLG8ucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChpLnByb3RvdHlwZSxhLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwic2l6ZVwiLHMuZ3MpLGkucHJvdG90eXBlLkVzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcihlLHRoaXMubHMsdGhpcy5wcyx0aGlzLmRzKX0saS5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKGUsdCxyLGkpe3Q9dHx8dGhpcy52cyx0aGlzLmZzLmxvZyhlLGZ1bmN0aW9uKGUscixpKXt0KGUudmFsdWUudmFsdWUscixpKX0scixpKX0saS5wcm90b3R5cGUudnM9ZnVuY3Rpb24oZSx0KXt0KFwiIGtleTogXCIrZS5rZXkpLHQoXCIgdmFsdWU6IFwiK2UudmFsdWUpfX0sZnVuY3Rpb24oZSx0LHIpey8qIVxuICpcbiAqIENvcHlyaWdodCAyMDA5LTIwMTYgS3JpcyBLb3dhbCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVFxuICogbGljZW5zZSBmb3VuZCBhdCBodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EvYmxvYi92MS9MSUNFTlNFXG4gKlxuICogV2l0aCBwYXJ0cyBieSBUeWxlciBDbG9zZVxuICogQ29weXJpZ2h0IDIwMDctMjAwOSBUeWxlciBDbG9zZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVCBYIGxpY2Vuc2UgZm91bmRcbiAqIGF0IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UuaHRtbFxuICogRm9ya2VkIGF0IHJlZl9zZW5kLmpzIHZlcnNpb246IDIwMDktMDUtMTFcbiAqXG4gKiBXaXRoIHBhcnRzIGJ5IE1hcmsgTWlsbGVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTEgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cbiFmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBib290c3RyYXApYm9vdHN0cmFwKFwicHJvbWlzZVwiLHQpO2Vsc2V7ZS5pPXQoKX19KGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gSy5hcHBseShlLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHQoZSl7cmV0dXJuIGU9PT1PYmplY3QoZSl9ZnVuY3Rpb24gcihlKXtyZXR1cm5cIltvYmplY3QgU3RvcEl0ZXJhdGlvbl1cIj09PWVlKGUpfHxlIGluc3RhbmNlb2YgR31mdW5jdGlvbiBpKGUsdCl7aWYoeCYmdC5zdGFjayYmXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZlLnN0YWNrJiYtMT09PWUuc3RhY2suaW5kZXhPZih0ZSkpe2Zvcih2YXIgcj1bXSxpPXQ7aTtpPWkuc291cmNlKWkuc3RhY2smJnIudW5zaGlmdChpLnN0YWNrKTtyLnVuc2hpZnQoZS5zdGFjayk7dmFyIHM9ci5qb2luKFwiXFxuXCIrdGUrXCJcXG5cIik7ZS5zdGFjaz1uKHMpfX1mdW5jdGlvbiBuKGUpe2Zvcih2YXIgdD1lLnNwbGl0KFwiXFxuXCIpLHI9W10saT0wO2k8dC5sZW5ndGg7KytpKXt2YXIgbj10W2ldO2Eobil8fHMobil8fCFufHxyLnB1c2gobil9cmV0dXJuIHIuam9pbihcIlxcblwiKX1mdW5jdGlvbiBzKGUpe3JldHVybi0xIT09ZS5pbmRleE9mKFwiKG1vZHVsZS5qczpcIil8fC0xIT09ZS5pbmRleE9mKFwiKG5vZGUuanM6XCIpfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9L2F0IC4rIFxcKCguKyk6KFxcZCspOig/OlxcZCspXFwpJC8uZXhlYyhlKTtpZih0KXJldHVyblt0WzFdLE51bWJlcih0WzJdKV07dmFyIHI9L2F0IChbXiBdKyk6KFxcZCspOig/OlxcZCspJC8uZXhlYyhlKTtpZihyKXJldHVybltyWzFdLE51bWJlcihyWzJdKV07dmFyIGk9Ly4qQCguKyk6KFxcZCspJC8uZXhlYyhlKTtyZXR1cm4gaT9baVsxXSxOdW1iZXIoaVsyXSldOnZvaWQgMH1mdW5jdGlvbiBhKGUpe3ZhciB0PW8oZSk7aWYoIXQpcmV0dXJuITE7dmFyIHI9dFswXSxpPXRbMV07cmV0dXJuIHI9PT1xJiZpPj1WJiZpPD1vZX1mdW5jdGlvbiBoKCl7aWYoeCl0cnl7dGhyb3cgbmV3IEVycm9yfWNhdGNoKGkpe3ZhciBlPWkuc3RhY2suc3BsaXQoXCJcXG5cIiksdD1lWzBdLmluZGV4T2YoXCJAXCIpPjA/ZVsxXTplWzJdLHI9byh0KTtpZighcilyZXR1cm47cmV0dXJuIHE9clswXSxyWzFdfX1mdW5jdGlvbiBjKGUpe3JldHVybiBlIGluc3RhbmNlb2YgZD9lOnYoZSk/QyhlKTpiKGUpfWZ1bmN0aW9uIHUoKXtmdW5jdGlvbiBlKGUpe3Q9ZSxjLnlzJiZ4JiYocy5zb3VyY2U9ZSksVyhyLGZ1bmN0aW9uKHQscil7Yy5UcyhmdW5jdGlvbigpe2UubXMuYXBwbHkoZSxyKX0pfSx2b2lkIDApLHI9dm9pZCAwLGk9dm9pZCAwfXZhciB0LHI9W10saT1bXSxuPVgodS5wcm90b3R5cGUpLHM9WChkLnByb3RvdHlwZSk7aWYocy5tcz1mdW5jdGlvbihlLG4scyl7dmFyIG89WShhcmd1bWVudHMpO3I/KHIucHVzaChvKSxcIndoZW5cIj09PW4mJnNbMV0mJmkucHVzaChzWzFdKSk6Yy5UcyhmdW5jdGlvbigpe3QubXMuYXBwbHkodCxvKX0pfSxzLnZhbHVlT2Y9ZnVuY3Rpb24oKXtpZihyKXJldHVybiBzO3ZhciBlPWcodCk7cmV0dXJuIEUoZSkmJih0PWUpLGV9LHMuSXM9ZnVuY3Rpb24oKXtyZXR1cm4gdD90LklzKCk6e3N0YXRlOlwicGVuZGluZ1wifX0sYy55cyYmeCl0cnl7dGhyb3cgbmV3IEVycm9yfWNhdGNoKGUpe3Muc3RhY2s9ZS5zdGFjay5zdWJzdHJpbmcoZS5zdGFjay5pbmRleE9mKFwiXFxuXCIpKzEpfXJldHVybiBuLlNzPXMsbi5yZXNvbHZlPWZ1bmN0aW9uKHIpe3R8fGUoYyhyKSl9LG4uUnM9ZnVuY3Rpb24ocil7dHx8ZShiKHIpKX0sbi5yZWplY3Q9ZnVuY3Rpb24ocil7dHx8ZSh3KHIpKX0sbi5ub3RpZnk9ZnVuY3Rpb24oZSl7dHx8VyhpLGZ1bmN0aW9uKHQscil7Yy5UcyhmdW5jdGlvbigpe3IoZSl9KX0sdm9pZCAwKX0sbn1mdW5jdGlvbiBsKGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlc29sdmVyIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7dmFyIHQ9dSgpO3RyeXtlKHQucmVzb2x2ZSx0LnJlamVjdCx0Lm5vdGlmeSl9Y2F0Y2goZSl7dC5yZWplY3QoZSl9cmV0dXJuIHQuU3N9ZnVuY3Rpb24gcChlKXtyZXR1cm4gbChmdW5jdGlvbih0LHIpe2Zvcih2YXIgaT0wLG49ZS5sZW5ndGg7aTxuO2krKyljKGVbaV0pLnRoZW4odCxyKX0pfWZ1bmN0aW9uIGQoZSx0LHIpe3ZvaWQgMD09PXQmJih0PWZ1bmN0aW9uKGUpe3JldHVybiB3KG5ldyBFcnJvcihcIlByb21pc2UgZG9lcyBub3Qgc3VwcG9ydCBvcGVyYXRpb246IFwiK2UpKX0pLHZvaWQgMD09PXImJihyPWZ1bmN0aW9uKCl7cmV0dXJue3N0YXRlOlwidW5rbm93blwifX0pO3ZhciBpPVgoZC5wcm90b3R5cGUpO2lmKGkubXM9ZnVuY3Rpb24ocixuLHMpe3ZhciBvO3RyeXtvPWVbbl0/ZVtuXS5hcHBseShpLHMpOnQuY2FsbChpLG4scyl9Y2F0Y2goZSl7bz13KGUpfXImJnIobyl9LGkuSXM9cixyKXt2YXIgbj1yKCk7XCJyZWplY3RlZFwiPT09bi5zdGF0ZSYmKGkuZXhjZXB0aW9uPW4ucmVhc29uKSxpLnZhbHVlT2Y9ZnVuY3Rpb24oKXt2YXIgZT1yKCk7cmV0dXJuXCJwZW5kaW5nXCI9PT1lLnN0YXRlfHxcInJlamVjdGVkXCI9PT1lLnN0YXRlP2k6ZS52YWx1ZX19cmV0dXJuIGl9ZnVuY3Rpb24gZihlLHQscixpKXtyZXR1cm4gYyhlKS50aGVuKHQscixpKX1mdW5jdGlvbiBnKGUpe2lmKEUoZSkpe3ZhciB0PWUuSXMoKTtpZihcImZ1bGZpbGxlZFwiPT09dC5zdGF0ZSlyZXR1cm4gdC52YWx1ZX1yZXR1cm4gZX1mdW5jdGlvbiBFKGUpe3JldHVybiBlIGluc3RhbmNlb2YgZH1mdW5jdGlvbiB2KGUpe3JldHVybiB0KGUpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRoZW59ZnVuY3Rpb24geShlKXtyZXR1cm4gRShlKSYmXCJwZW5kaW5nXCI9PT1lLklzKCkuc3RhdGV9ZnVuY3Rpb24gVChlKXtyZXR1cm4hRShlKXx8XCJmdWxmaWxsZWRcIj09PWUuSXMoKS5zdGF0ZX1mdW5jdGlvbiBtKGUpe3JldHVybiBFKGUpJiZcInJlamVjdGVkXCI9PT1lLklzKCkuc3RhdGV9ZnVuY3Rpb24gSSgpe3JlLmxlbmd0aD0wLGllLmxlbmd0aD0wLHNlfHwoc2U9ITApfWZ1bmN0aW9uIFMoZSx0KXtzZSYmKFwib2JqZWN0XCI9PXR5cGVvZiBwcm9jZXNzJiZwcm9jZXNzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwcm9jZXNzLndzJiZjLlRzLmJzKGZ1bmN0aW9uKCl7LTEhPT16KGllLGUpJiYocHJvY2Vzcy53cyhcInVuaGFuZGxlZFJlamVjdGlvblwiLHQsZSksbmUucHVzaChlKSl9KSxpZS5wdXNoKGUpLHQmJnZvaWQgMCE9PXQuc3RhY2s/cmUucHVzaCh0LnN0YWNrKTpyZS5wdXNoKFwiKG5vIHN0YWNrKSBcIit0KSl9ZnVuY3Rpb24gUihlKXtpZihzZSl7dmFyIHQ9eihpZSxlKTstMSE9PXQmJihcIm9iamVjdFwiPT10eXBlb2YgcHJvY2VzcyYmcHJvY2VzcyYmXCJmdW5jdGlvblwiPT10eXBlb2YgcHJvY2Vzcy53cyYmYy5Ucy5icyhmdW5jdGlvbigpe3ZhciByPXoobmUsZSk7LTEhPT1yJiYocHJvY2Vzcy53cyhcInJlamVjdGlvbkhhbmRsZWRcIixyZVt0XSxlKSxuZS5zcGxpY2UociwxKSl9KSxpZS5zcGxpY2UodCwxKSxyZS5zcGxpY2UodCwxKSl9fWZ1bmN0aW9uIHcoZSl7dmFyIHQ9ZCh7d2hlbjpmdW5jdGlvbih0KXtyZXR1cm4gdCYmUih0aGlzKSx0P3QoZSk6dGhpc319LGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGZ1bmN0aW9uKCl7cmV0dXJue3N0YXRlOlwicmVqZWN0ZWRcIixyZWFzb246ZX19KTtyZXR1cm4gUyh0LGUpLHR9ZnVuY3Rpb24gYihlKXtyZXR1cm4gZCh7d2hlbjpmdW5jdGlvbigpe3JldHVybiBlfSxnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19LHNldDpmdW5jdGlvbih0LHIpe2VbdF09cn0sZGVsZXRlOmZ1bmN0aW9uKHQpe2RlbGV0ZSBlW3RdfSxDczpmdW5jdGlvbih0LHIpe3JldHVybiBudWxsPT09dHx8dm9pZCAwPT09dD9lLmFwcGx5KHZvaWQgMCxyKTplW3RdLmFwcGx5KGUscil9LGFwcGx5OmZ1bmN0aW9uKHQscil7cmV0dXJuIGUuYXBwbHkodCxyKX0sa2V5czpmdW5jdGlvbigpe3JldHVybiAkKGUpfX0sdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJue3N0YXRlOlwiZnVsZmlsbGVkXCIsdmFsdWU6ZX19KX1mdW5jdGlvbiBDKGUpe3ZhciB0PXUoKTtyZXR1cm4gYy5UcyhmdW5jdGlvbigpe3RyeXtlLnRoZW4odC5yZXNvbHZlLHQucmVqZWN0LHQubm90aWZ5KX1jYXRjaChlKXt0LnJlamVjdChlKX19KSx0LlNzfWZ1bmN0aW9uIF8oZSl7cmV0dXJuIGQoe19zOmZ1bmN0aW9uKCl7fX0sZnVuY3Rpb24odCxyKXtyZXR1cm4gayhlLHQscil9LGZ1bmN0aW9uKCl7cmV0dXJuIGMoZSkuSXMoKX0pfWZ1bmN0aW9uIFAoZSx0LHIpe3JldHVybiBjKGUpLlBzKHQscil9ZnVuY3Rpb24gQShlKXtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsdCl7dmFyIG87aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFN0b3BJdGVyYXRpb24pe3RyeXtvPWlbZV0odCl9Y2F0Y2goZSl7cmV0dXJuIHcoZSl9cmV0dXJuIG8uZG9uZT9jKG8udmFsdWUpOmYoby52YWx1ZSxuLHMpfXRyeXtvPWlbZV0odCl9Y2F0Y2goZSl7cmV0dXJuIHIoZSk/YyhlLnZhbHVlKTp3KGUpfXJldHVybiBmKG8sbixzKX12YXIgaT1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPXQuYmluZCh0LFwibmV4dFwiKSxzPXQuYmluZCh0LFwidGhyb3dcIik7cmV0dXJuIG4oKX19ZnVuY3Rpb24gTyhlKXtjLmRvbmUoYy5hc3luYyhlKSgpKX1mdW5jdGlvbiBOKGUpe3Rocm93IG5ldyBHKGUpfWZ1bmN0aW9uIEQoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIFAoW3RoaXMsTChhcmd1bWVudHMpXSxmdW5jdGlvbih0LHIpe3JldHVybiBlLmFwcGx5KHQscil9KX19ZnVuY3Rpb24gayhlLHQscil7cmV0dXJuIGMoZSkuQXModCxyKX1mdW5jdGlvbiBMKGUpe3JldHVybiBmKGUsZnVuY3Rpb24oZSl7dmFyIHQ9MCxyPXUoKTtyZXR1cm4gVyhlLGZ1bmN0aW9uKGksbixzKXt2YXIgbztFKG4pJiZcImZ1bGZpbGxlZFwiPT09KG89bi5JcygpKS5zdGF0ZT9lW3NdPW8udmFsdWU6KCsrdCxmKG4sZnVuY3Rpb24oaSl7ZVtzXT1pLDA9PS0tdCYmci5yZXNvbHZlKGUpfSxyLnJlamVjdCxmdW5jdGlvbihlKXtyLm5vdGlmeSh7aW5kZXg6cyx2YWx1ZTplfSl9KSl9LHZvaWQgMCksMD09PXQmJnIucmVzb2x2ZShlKSxyLlNzfSl9ZnVuY3Rpb24gTShlKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIGMucmVzb2x2ZSgpO3ZhciB0PWMuZGVmZXIoKSxyPTA7cmV0dXJuIFcoZSxmdW5jdGlvbihpLG4scyl7ZnVuY3Rpb24gbyhlKXt0LnJlc29sdmUoZSl9ZnVuY3Rpb24gYShlKXswPT09LS1yJiYoZS5tZXNzYWdlPVwiUSBjYW4ndCBnZXQgZnVsZmlsbG1lbnQgdmFsdWUgZnJvbSBhbnkgcHJvbWlzZSwgYWxsIHByb21pc2VzIHdlcmUgcmVqZWN0ZWQuIExhc3QgZXJyb3IgbWVzc2FnZTogXCIrZS5tZXNzYWdlLHQucmVqZWN0KGUpKX1mdW5jdGlvbiBoKGUpe3Qubm90aWZ5KHtpbmRleDpzLHZhbHVlOmV9KX12YXIgYz1lW3NdO3IrKyxmKGMsbyxhLGgpfSx2b2lkIDApLHQuU3N9ZnVuY3Rpb24gRihlKXtyZXR1cm4gZihlLGZ1bmN0aW9uKGUpe3JldHVybiBlPUooZSxjKSxmKEwoSihlLGZ1bmN0aW9uKGUpe3JldHVybiBmKGUsaixqKX0pKSxmdW5jdGlvbigpe3JldHVybiBlfSl9KX1mdW5jdGlvbiBVKGUpe3JldHVybiBjKGUpLk9zKCl9ZnVuY3Rpb24gQihlLHQpe3JldHVybiBjKGUpLnRoZW4odm9pZCAwLHZvaWQgMCx0KX1mdW5jdGlvbiBIKGUsdCl7cmV0dXJuIGMoZSkuTnModCl9dmFyIHg9ITE7dHJ5e3Rocm93IG5ldyBFcnJvcn1jYXRjaChlKXt4PSEhZS5zdGFja312YXIgcSxHLFY9aCgpLGo9ZnVuY3Rpb24oKXt9LFE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7Zm9yKHZhciBlLGk7ci5uZXh0OylyPXIubmV4dCxlPXIuRHMsci5Ecz12b2lkIDAsaT1yLmRvbWFpbixpJiYoci5kb21haW49dm9pZCAwLGkua3MoKSksdChlLGkpO2Zvcig7aC5sZW5ndGg7KWU9aC5wb3AoKSx0KGUpO249ITF9ZnVuY3Rpb24gdCh0LHIpe3RyeXt0KCl9Y2F0Y2godCl7aWYobyl0aHJvdyByJiZyLkxzKCksc2V0VGltZW91dChlLDApLHImJnIua3MoKSx0O3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyB0fSwwKX1yJiZyLkxzKCl9dmFyIHI9e0RzOnZvaWQgMCxuZXh0Om51bGx9LGk9cixuPSExLHM9dm9pZCAwLG89ITEsYT0hMTt0cnl7YT1uYXZpZ2F0b3ImJihcIk1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlclwiPT09bmF2aWdhdG9yLmFwcE5hbWV8fG51bGwhPW5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC8odHJpZGVudCkuK3J2WzpcXHNdKFtcXHdcXC5dKykuK2xpa2VcXHNnZWNrby9pKSl9Y2F0Y2goZSl7fXZhciBoPVtdO2lmKFE9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEZyYW1ld29yayYmRnJhbWV3b3JrLkMoKT9GcmFtZXdvcmsuc2V0VGltZW91dChlLDApOihpPWkubmV4dD17RHM6ZSxkb21haW46byYmcHJvY2Vzcy5kb21haW4sbmV4dDpudWxsfSxufHwobj0hMCxzKCkpKX0sXCJvYmplY3RcIj09dHlwZW9mIHByb2Nlc3MmJnByb2Nlc3MmJlwiW29iamVjdCBwcm9jZXNzXVwiPT09cHJvY2Vzcy50b1N0cmluZygpJiZwcm9jZXNzLlRzKW89ITAscz1mdW5jdGlvbigpe3Byb2Nlc3MuVHMoZSl9O2Vsc2UgaWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygc2V0SW1tZWRpYXRlfHxhKWlmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBNZXNzYWdlQ2hhbm5lbHx8YSlzPWZ1bmN0aW9uKCl7c2V0VGltZW91dChlLDApfTtlbHNle3ZhciBjPW5ldyBNZXNzYWdlQ2hhbm5lbDtjLnBvcnQxLm9ubWVzc2FnZT1mdW5jdGlvbigpe3M9dSxjLnBvcnQxLm9ubWVzc2FnZT1lLGUoKX07dmFyIHU9ZnVuY3Rpb24oKXtjLnBvcnQyLnBvc3RNZXNzYWdlKDApfTtzPWZ1bmN0aW9uKCl7c2V0VGltZW91dChlLDApLHUoKX19ZWxzZSBzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/c2V0SW1tZWRpYXRlLmJpbmQod2luZG93LGUpOmZ1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKGUpfTtyZXR1cm4gUS5icz1mdW5jdGlvbihlKXtoLnB1c2goZSksbnx8KG49ITAscygpKX0sUX0oKSxLPUZ1bmN0aW9uLmNhbGwsWT1lKEFycmF5LnByb3RvdHlwZS5zbGljZSksVz1lKEFycmF5LnByb3RvdHlwZS5yZWR1Y2V8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9MCxpPXRoaXMubGVuZ3RoO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWZvcig7Oyl7aWYociBpbiB0aGlzKXt0PXRoaXNbcisrXTticmVha31pZigrK3I+PWkpdGhyb3cgbmV3IFR5cGVFcnJvcn1mb3IoO3I8aTtyKyspciBpbiB0aGlzJiYodD1lKHQsdGhpc1tyXSxyKSk7cmV0dXJuIHR9KSx6PWUoQXJyYXkucHJvdG90eXBlLmluZGV4T2Z8fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8dGhpcy5sZW5ndGg7dCsrKWlmKHRoaXNbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSksSj1lKEFycmF5LnByb3RvdHlwZS5tYXB8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxpPVtdO3JldHVybiBXKHIsZnVuY3Rpb24obixzLG8pe2kucHVzaChlLmNhbGwodCxzLG8scikpfSx2b2lkIDApLGl9KSxYPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlPWUsbmV3IHR9LFo9ZShPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KSwkPU9iamVjdC5rZXlzfHxmdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gZSlaKGUscikmJnQucHVzaChyKTtyZXR1cm4gdH0sZWU9ZShPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKTtHPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZXR1cm5WYWx1ZT9SZXR1cm5WYWx1ZTpmdW5jdGlvbihlKXt0aGlzLnZhbHVlPWV9O3ZhciB0ZT1cIkZyb20gcHJldmlvdXMgZXZlbnQ6XCI7Yy5yZXNvbHZlPWMsYy5Ucz1RLGMueXM9ITEsXCJvYmplY3RcIj09dHlwZW9mIHByb2Nlc3MmJnByb2Nlc3MmJnByb2Nlc3MuTXMmJnByb2Nlc3MuTXMuRnMmJihjLnlzPSEwKSxjLmRlZmVyPXUsdS5wcm90b3R5cGUuVXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbih0LHIpe3Q/ZS5yZWplY3QodCk6YXJndW1lbnRzLmxlbmd0aD4yP2UucmVzb2x2ZShZKGFyZ3VtZW50cywxKSk6ZS5yZXNvbHZlKHIpfX0sYy5Qcm9taXNlPWwsYy5Tcz1sLGwucmFjZT1wLGwuYWxsPUwsbC5yZWplY3Q9dyxsLnJlc29sdmU9YyxjLkJzPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxkLnByb3RvdHlwZS5Ccz1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxjLmpvaW49ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYyhlKS5qb2luKHQpfSxkLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uKGUpe3JldHVybiBjKFt0aGlzLGVdKS5QcyhmdW5jdGlvbihlLHQpe2lmKGU9PT10KXJldHVybiBlO3Rocm93IG5ldyBFcnJvcihcIlEgY2FuJ3Qgam9pbjogbm90IHRoZSBzYW1lOiBcIitlK1wiIFwiK3QpfSl9LGMucmFjZT1wLGQucHJvdG90eXBlLnJhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aGVuKGMucmFjZSl9LGMuSHM9ZCxkLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBQcm9taXNlXVwifSxkLnByb3RvdHlwZS50aGVuPWZ1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBuKHQpe3RyeXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2UodCk6dH1jYXRjaChlKXtyZXR1cm4gdyhlKX19ZnVuY3Rpb24gcyhlKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KXtpKGUsYSk7dHJ5e3JldHVybiB0KGUpfWNhdGNoKGUpe3JldHVybiB3KGUpfX1yZXR1cm4gdyhlKX1mdW5jdGlvbiBvKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHI/cihlKTplfXZhciBhPXRoaXMsaD11KCksbD0hMTtyZXR1cm4gYy5UcyhmdW5jdGlvbigpe2EubXMoZnVuY3Rpb24oZSl7bHx8KGw9ITAsaC5yZXNvbHZlKG4oZSkpKX0sXCJ3aGVuXCIsW2Z1bmN0aW9uKGUpe2x8fChsPSEwLGgucmVzb2x2ZShzKGUpKSl9XSl9KSxhLm1zKHZvaWQgMCxcIndoZW5cIixbdm9pZCAwLGZ1bmN0aW9uKGUpe3ZhciB0LHI9ITE7dHJ5e3Q9byhlKX1jYXRjaChlKXtpZihyPSEwLCFjLm9uZXJyb3IpdGhyb3cgZTtjLm9uZXJyb3IoZSl9cnx8aC5ub3RpZnkodCl9XSksaC5Tc30sYy54cz1mdW5jdGlvbihlLHQpe3JldHVybiBjKGUpLnhzKHQpfSxkLnByb3RvdHlwZS54cz1mdW5jdGlvbihlKXtyZXR1cm4gZT1jKGUpLHRoaXMudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZS5Hcyh0KS5xcyh0KX0pfSxjLndoZW49ZixkLnByb3RvdHlwZS5xcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGV9KX0sYy5xcz1mdW5jdGlvbihlLHQpe3JldHVybiBjKGUpLnFzKHQpfSxkLnByb3RvdHlwZS5Wcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgZX0pfSxjLlZzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGMoZSkuVnModCl9LGMuanM9ZyxjLlFzPUUsYy5Lcz12LGMuWXM9eSxkLnByb3RvdHlwZS5Zcz1mdW5jdGlvbigpe3JldHVyblwicGVuZGluZ1wiPT09dGhpcy5JcygpLnN0YXRlfSxjLldzPVQsZC5wcm90b3R5cGUuV3M9ZnVuY3Rpb24oKXtyZXR1cm5cImZ1bGZpbGxlZFwiPT09dGhpcy5JcygpLnN0YXRlfSxjLnpzPW0sZC5wcm90b3R5cGUuenM9ZnVuY3Rpb24oKXtyZXR1cm5cInJlamVjdGVkXCI9PT10aGlzLklzKCkuc3RhdGV9O3ZhciByZT1bXSxpZT1bXSxuZT1bXSxzZT0hMDtjLkpzPUksYy5Ycz1mdW5jdGlvbigpe3JldHVybiByZS5zbGljZSgpfSxjLlpzPWZ1bmN0aW9uKCl7SSgpLHNlPSExfSxJKCksYy5yZWplY3Q9dyxjLlJzPWIsYy4kcz1fLGMuUHM9UCxkLnByb3RvdHlwZS5Qcz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmFsbCgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkodm9pZCAwLHQpfSx0KX0sYy5hc3luYz1BLGMuZW89TyxjLnRvPU4sYy5ybz1ELGMuQXM9ayxkLnByb3RvdHlwZS5Bcz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT11KCk7cmV0dXJuIGMuVHMoZnVuY3Rpb24oKXtyLm1zKGkucmVzb2x2ZSxlLHQpfSksaS5Tc30sYy5nZXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYyhlKS5BcyhcImdldFwiLFt0XSl9LGQucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5BcyhcImdldFwiLFtlXSl9LGMuc2V0PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gYyhlKS5BcyhcInNldFwiLFt0LHJdKX0sZC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuQXMoXCJzZXRcIixbZSx0XSl9LGMuaW89Yy5kZWxldGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYyhlKS5BcyhcImRlbGV0ZVwiLFt0XSl9LGQucHJvdG90eXBlLmlvPWQucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5BcyhcImRlbGV0ZVwiLFtlXSl9LGMubm89Yy5Dcz1mdW5jdGlvbihlLHQscil7cmV0dXJuIGMoZSkuQXMoXCJwb3N0XCIsW3Qscl0pfSxkLnByb3RvdHlwZS5ubz1kLnByb3RvdHlwZS5Dcz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLkFzKFwicG9zdFwiLFtlLHRdKX0sYy5zZW5kPWMuc289Yy5vbz1mdW5jdGlvbihlLHQpe3JldHVybiBjKGUpLkFzKFwicG9zdFwiLFt0LFkoYXJndW1lbnRzLDIpXSl9LGQucHJvdG90eXBlLnNlbmQ9ZC5wcm90b3R5cGUuc289ZC5wcm90b3R5cGUub289ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuQXMoXCJwb3N0XCIsW2UsWShhcmd1bWVudHMsMSldKX0sYy5hbz1mdW5jdGlvbihlLHQpe3JldHVybiBjKGUpLkFzKFwiYXBwbHlcIixbdm9pZCAwLHRdKX0sZC5wcm90b3R5cGUuYW89ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuQXMoXCJhcHBseVwiLFt2b2lkIDAsZV0pfSxjLmhvPWMuR3M9ZnVuY3Rpb24oZSl7cmV0dXJuIGMoZSkuQXMoXCJhcHBseVwiLFt2b2lkIDAsWShhcmd1bWVudHMsMSldKX0sZC5wcm90b3R5cGUuR3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5BcyhcImFwcGx5XCIsW3ZvaWQgMCxZKGFyZ3VtZW50cyldKX0sYy5jbz1mdW5jdGlvbihlKXt2YXIgdD1jKGUpLHI9WShhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuQXMoXCJhcHBseVwiLFt0aGlzLHIuY29uY2F0KFkoYXJndW1lbnRzKSldKX19LGQucHJvdG90eXBlLmNvPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVkoYXJndW1lbnRzKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5BcyhcImFwcGx5XCIsW3RoaXMsdC5jb25jYXQoWShhcmd1bWVudHMpKV0pfX0sYy5rZXlzPWZ1bmN0aW9uKGUpe3JldHVybiBjKGUpLkFzKFwia2V5c1wiLFtdKX0sZC5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkFzKFwia2V5c1wiLFtdKX0sYy5hbGw9TCxkLnByb3RvdHlwZS5hbGw9ZnVuY3Rpb24oKXtyZXR1cm4gTCh0aGlzKX0sYy51bz1NLGQucHJvdG90eXBlLnVvPWZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyl9LGMubG89ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBmdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjb25zb2xlLndhcm4mJmNvbnNvbGUud2Fybih0K1wiIGlzIGRlcHJlY2F0ZWQsIHVzZSBcIityK1wiIGluc3RlYWQuXCIsbmV3IEVycm9yKFwiXCIpLnN0YWNrKSxlLmFwcGx5KGUsYXJndW1lbnRzKX19KEYsXCJhbGxSZXNvbHZlZFwiLFwiYWxsU2V0dGxlZFwiKSxkLnByb3RvdHlwZS5sbz1mdW5jdGlvbigpe3JldHVybiBGKHRoaXMpfSxjLk9zPVUsZC5wcm90b3R5cGUuT3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBMKEooZSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGUuSXMoKX1yZXR1cm4gZT1jKGUpLGUudGhlbih0LHQpfSkpfSl9LGMuZmFpbD1jLmNhdGNoPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGMoZSkudGhlbih2b2lkIDAsdCl9LGQucHJvdG90eXBlLmZhaWw9ZC5wcm90b3R5cGUuY2F0Y2g9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9LGMucHJvZ3Jlc3M9QixkLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCx2b2lkIDAsZSl9LGMucG89Yy5maW5hbGx5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGMoZSkuZmluYWxseSh0KX0sZC5wcm90b3R5cGUucG89ZC5wcm90b3R5cGUuZmluYWxseT1mdW5jdGlvbihlKXtpZighZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgZS5hcHBseSl0aHJvdyBuZXcgRXJyb3IoXCJRIGNhbid0IGFwcGx5IGZpbmFsbHkgY2FsbGJhY2tcIik7cmV0dXJuIGU9YyhlKSx0aGlzLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuR3MoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX0sZnVuY3Rpb24odCl7cmV0dXJuIGUuR3MoKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgdH0pfSl9LGMuZG9uZT1mdW5jdGlvbihlLHQscixpKXtyZXR1cm4gYyhlKS5kb25lKHQscixpKX0sZC5wcm90b3R5cGUuZG9uZT1mdW5jdGlvbihlLHQscil7dmFyIG49ZnVuY3Rpb24oZSl7Yy5UcyhmdW5jdGlvbigpe2lmKGkoZSxzKSwhYy5vbmVycm9yKXRocm93IGU7Yy5vbmVycm9yKGUpfSl9LHM9ZXx8dHx8cj90aGlzLnRoZW4oZSx0LHIpOnRoaXM7XCJvYmplY3RcIj09dHlwZW9mIHByb2Nlc3MmJnByb2Nlc3MmJnByb2Nlc3MuZG9tYWluJiYobj1wcm9jZXNzLmRvbWFpbi5iaW5kKG4pKSxzLnRoZW4odm9pZCAwLG4pfSxjLnRpbWVvdXQ9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBjKGUpLnRpbWVvdXQodCxyKX0sZC5wcm90b3R5cGUudGltZW91dD1mdW5jdGlvbihlLHQpe3ZhciByPXUoKSxpPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0JiZcInN0cmluZ1wiIT10eXBlb2YgdHx8KHQ9bmV3IEVycm9yKHR8fFwiVGltZWQgb3V0IGFmdGVyIFwiK2UrXCIgbXNcIiksdC5jb2RlPVwiRVRJTUVET1VUXCIpLHIucmVqZWN0KHQpfSxlKTtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dChpKSxyLnJlc29sdmUoZSl9LGZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dChpKSxyLnJlamVjdChlKX0sci5ub3RpZnkpLHIuU3N9LGMuZGVsYXk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ZSxlPXZvaWQgMCksYyhlKS5kZWxheSh0KX0sZC5wcm90b3R5cGUuZGVsYXk9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih0KXt2YXIgcj11KCk7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLnJlc29sdmUodCl9LGUpLHIuU3N9KX0sYy5kbz1mdW5jdGlvbihlLHQpe3JldHVybiBjKGUpLmRvKHQpfSxkLnByb3RvdHlwZS5kbz1mdW5jdGlvbihlKXt2YXIgdD11KCkscj1ZKGUpO3JldHVybiByLnB1c2godC5VcygpKSx0aGlzLmFvKHIpLmZhaWwodC5yZWplY3QpLHQuU3N9LGMuZm89ZnVuY3Rpb24oZSl7dmFyIHQ9WShhcmd1bWVudHMsMSk7cmV0dXJuIGMoZSkuZG8odCl9LGQucHJvdG90eXBlLmZvPWZ1bmN0aW9uKCl7dmFyIGU9WShhcmd1bWVudHMpLHQ9dSgpO3JldHVybiBlLnB1c2godC5VcygpKSx0aGlzLmFvKGUpLmZhaWwodC5yZWplY3QpLHQuU3N9LGMuRW89Yy52bz1mdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcihcIlEgY2FuJ3Qgd3JhcCBhbiB1bmRlZmluZWQgZnVuY3Rpb25cIik7dmFyIHQ9WShhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9dC5jb25jYXQoWShhcmd1bWVudHMpKSxpPXUoKTtyZXR1cm4gci5wdXNoKGkuVXMoKSksYyhlKS5hbyhyKS5mYWlsKGkucmVqZWN0KSxpLlNzfX0sZC5wcm90b3R5cGUuRW89ZC5wcm90b3R5cGUudm89ZnVuY3Rpb24oKXt2YXIgZT1ZKGFyZ3VtZW50cyk7cmV0dXJuIGUudW5zaGlmdCh0aGlzKSxjLnZvLmFwcGx5KHZvaWQgMCxlKX0sYy55bz1mdW5jdGlvbihlLHQpe3ZhciByPVkoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIGkoKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9dmFyIG49ci5jb25jYXQoWShhcmd1bWVudHMpKSxzPXUoKTtyZXR1cm4gbi5wdXNoKHMuVXMoKSksYyhpKS5hbyhuKS5mYWlsKHMucmVqZWN0KSxzLlNzfX0sZC5wcm90b3R5cGUueW89ZnVuY3Rpb24oKXt2YXIgZT1ZKGFyZ3VtZW50cywwKTtyZXR1cm4gZS51bnNoaWZ0KHRoaXMpLGMueW8uYXBwbHkodm9pZCAwLGUpfSxjLlRvPWMubW89ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBjKGUpLm1vKHQscil9LGQucHJvdG90eXBlLlRvPWQucHJvdG90eXBlLm1vPWZ1bmN0aW9uKGUsdCl7dmFyIHI9WSh0fHxbXSksaT11KCk7cmV0dXJuIHIucHVzaChpLlVzKCkpLHRoaXMuQXMoXCJwb3N0XCIsW2Uscl0pLmZhaWwoaS5yZWplY3QpLGkuU3N9LGMuSW89Yy5Tbz1jLlJvPWZ1bmN0aW9uKGUsdCl7dmFyIHI9WShhcmd1bWVudHMsMiksaT11KCk7cmV0dXJuIHIucHVzaChpLlVzKCkpLGMoZSkuQXMoXCJwb3N0XCIsW3Qscl0pLmZhaWwoaS5yZWplY3QpLGkuU3N9LGQucHJvdG90eXBlLklvPWQucHJvdG90eXBlLlNvPWQucHJvdG90eXBlLlJvPWZ1bmN0aW9uKGUpe3ZhciB0PVkoYXJndW1lbnRzLDEpLHI9dSgpO3JldHVybiB0LnB1c2goci5VcygpKSx0aGlzLkFzKFwicG9zdFwiLFtlLHRdKS5mYWlsKHIucmVqZWN0KSxyLlNzfSxjLk5zPUgsZC5wcm90b3R5cGUuTnM9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIHRoaXM7dGhpcy50aGVuKGZ1bmN0aW9uKHQpe2MuVHMoZnVuY3Rpb24oKXtlKG51bGwsdCl9KX0sZnVuY3Rpb24odCl7Yy5UcyhmdW5jdGlvbigpe2UodCl9KX0pfSxjLndvPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiUS5ub0NvbmZsaWN0IG9ubHkgd29ya3Mgd2hlbiBRIGlzIHVzZWQgYXMgYSBnbG9iYWxcIil9O3ZhciBvZT1oKCk7cmV0dXJuIGN9KX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNiksbj1pLmhlLmJvOyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7dC5Dbz01ZTMsdC5fbz02LHQuUG89MWU0LHQuQW89LjIsdC5Pbz0xMCxlLk5vPXQ7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO3IuRG89XCIwLjAuMVwiLHIua289M2U0LHIuTG89NGU3LHIuTW89MSxyLkZvPS44LHIuVW89ITEsci5Cbz0yZTQsZS5Ibz1yO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtpLnhvPSEwLGkucW89MyxpLkdvPTFlNCxlLlZvPWk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO3Muam89MS4xLGUuUW89czt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7by5Lbz1uLG8uWW89MmU0LG8uV289NWUzLGUuem89bzt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7YS5Kbz1bNDEyXSxlLlhvPWE7dmFyIGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO2guWm89MmUzLGguJG89ITAsaC5lYT0hMSxoLnRhPTEsaC5yYT0uMDIsaC5pYT0hMCxoLm5hPSExLGguc2E9ITEsaC5vYT0xZTQsaC5hYT00ZTQsaC5oYT0zNzAwLGguY2E9MmU0LGgudWE9MSxoLmxhPTUsaC5wYT0uNCxoLmRhPTEsZS5mYT1oO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtjLmdhPTMwLGMuRWE9MmU0LGMudmE9M2U0LGUueWE9Yzt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7dS5UYT0zZTcsdS5tYT0zZTQsdS5JYT0hMSx1LlNhPTEwLGUuUmE9dTt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7bC53YT0zLGwuYmE9ITEsbC5DYT0zZTQsbC5fYT0uMixsLlBhPS4yLGwuQWE9MWU0LGUuT2E9bDt2YXIgcD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7cC5OYT0hMSxlLks9cDt2YXIgZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7ZC5EYT02NGUzLGQua2E9NWUzLGQuTGE9MSxkLk1hPTEsZS5GYT1kO3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtmLlVhPTRlMyxmLkJhPTNlNCxmLkhhPTQwOTYsZi54YT0hMCxmLnFhPTVlMyxmLkdhPTFlNCxlLlVEUEJyb2FkY2FzdD1mO3ZhciBnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtnLlZhPTEwMCxnLmphPTFlMyxlLlFhPWc7dmFyIEU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO0UuS2E9MjAsRS5ZYT0yMCxFLldhPTIwLEUuemE9NSxlLkphPUU7dmFyIHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO3YuWGE9XCJzaXRlXCIsdi5aYT1cImV4dGVybmFsQXNcIix2LiRhPVwiYXZhaWxhYmxlU2VuZFJhdGVcIix2LmVoPVwicmVtb3RlQWRkcmVzc1wiLHYudGg9XCJsb2NhbEFkZHJlc3NcIix2LnJoPTJlNCxlLmloPXY7dmFyIHk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO3kubmg9M2U0LGUuc2g9eTt2YXIgVD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7VC5vaD0zMDAsZS5haD1UfSh0LmhofHwodC5oaD17fSkpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO2kudWg9ITEsaS5saD0hMCxpLnBoPSExLGkuZGg9XCI0LjEuMFwiLGkuZmg9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvcmU/Y29yZTpcInVuZGVmaW5lZFwiLGkuZ2g9ITEsaS5FaD0hMCxpLnZoPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBJTkNMVURFX1ZPRF9DQUNIRSYmSU5DTFVERV9WT0RfQ0FDSEUsaS55aD1cInVuZGVmaW5lZFwiIT10eXBlb2YgSU5DTFVERV9VRFBfQlJPQURDQVNUJiZJTkNMVURFX1VEUF9CUk9BRENBU1QsaS5UaD1cInVuZGVmaW5lZFwiIT10eXBlb2YgSU5DTFVERV9VRFBfTEVBREVSX0VMRUNUSU9OJiZJTkNMVURFX1VEUF9MRUFERVJfRUxFQ1RJT04saS5taD1cInVuZGVmaW5lZFwiIT10eXBlb2YgTEVBREVSX1NDT1JFX0VRVUFMSVRZJiZMRUFERVJfU0NPUkVfRVFVQUxJVFksaS5JaD1cInVuZGVmaW5lZFwiIT10eXBlb2YgSU5DTFVERV9ERUZBVUxUX05FVFdPUksmJklOQ0xVREVfREVGQVVMVF9ORVRXT1JLLGkuU2g9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEhJVkVfUkVTVFJJQ1RFRF9DT05OSU5GTyYmSElWRV9SRVNUUklDVEVEX0NPTk5JTkZPLGkuYm89XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEhJVkVfRElTQ09WRVJZP0hJVkVfRElTQ09WRVJZOlwid3M6Ly8xMjcuMC4wLjE6ODAwMC9oaXZlXCIsaS5SaD1cInVuZGVmaW5lZFwiIT10eXBlb2YgUDJQRGlzcGF0Y2hlckRldGFpbGVkTG9nJiZQMlBEaXNwYXRjaGVyRGV0YWlsZWRMb2csaS53aD1cInVuZGVmaW5lZFwiIT10eXBlb2YgTmV0d29ya01hbmFnZXJEZXRhaWxlZExvZyYmTmV0d29ya01hbmFnZXJEZXRhaWxlZExvZyxpLmFlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBBVEFUVVNfS0VZP0FUQVRVU19LRVk6XCI1OTI4MzVhNmI0MjA0ZGQxOTdjMDA0ODg2MTAwMDNlMFwiLGkuY2U9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFUQVRVU19WRVJTSU9OP0FUQVRVU19WRVJTSU9OOlwiMC44XCIsaS51ZT1cInVuZGVmaW5lZFwiPT10eXBlb2YgQVRBVFVTX0RFRkFVTFRfRU5BQkxFRHx8QVRBVFVTX0RFRkFVTFRfRU5BQkxFRCxpLmxlPTUsaS5iaD1cInVuZGVmaW5lZFwiIT10eXBlb2YgSElWRV9QTFVHSU5fVElNRU9VVD9ISVZFX1BMVUdJTl9USU1FT1VUOi0xLGkuQ2g9XCJ1bmRlZmluZWRcIj09dHlwZW9mIEhJVkVfREVURUNUX1BSSVZBVEVJUHx8SElWRV9ERVRFQ1RfUFJJVkFURUlQLGkuX2g9ITAsdC5oZT1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigwKSxuPXIoNDMpLHM9cigzMCk7IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtyZXR1cm4gdD9lK1wiLVwiK3Q6ZX1mdW5jdGlvbiByKGUsdCl7dmFyIHI9bmV3IFVpbnQ4QXJyYXkoZS5ieXRlTGVuZ3RoK3QuYnl0ZUxlbmd0aCk7cmV0dXJuIHIuc2V0KG5ldyBVaW50OEFycmF5KGUpLDApLHIuc2V0KG5ldyBVaW50OEFycmF5KHQpLGUuYnl0ZUxlbmd0aCksci5idWZmZXJ9ZnVuY3Rpb24gbyhlKXt2YXIgdD1uZXcgVWludDhBcnJheShlLmJ5dGVMZW5ndGgpO3JldHVybiB0LnNldChuZXcgVWludDhBcnJheShlKSwwKSx0LmJ1ZmZlcn1mdW5jdGlvbiBhKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0hMCk7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDspaWYoZVtpXT09PXQpe2lmKGUuc3BsaWNlKGksMSkscilicmVha31lbHNlIGkrK31mdW5jdGlvbiBoKGUpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQxNkFycmF5KGUpKX1mdW5jdGlvbiBjKGUpe2U9ZS5yZXBsYWNlKC9bXFxbXS8sXCJcXFxcW1wiKS5yZXBsYWNlKC9bXFxdXS8sXCJcXFxcXVwiKTt2YXIgdD1uZXcgUmVnRXhwKFwiW1xcXFw/Jl1cIitlK1wiPShbXiYjXSopXCIpLHI9dC5leGVjKGxvY2F0aW9uLnNlYXJjaCk7cmV0dXJuIG51bGw9PXI/XCJcIjpkZWNvZGVVUklDb21wb25lbnQoclsxXS5yZXBsYWNlKC9cXCsvZyxcIiBcIikpfWZ1bmN0aW9uIHUoZSl7Zm9yKHZhciB0PWUubGVuZ3RoLTE7dD4wO3QtLSl7dmFyIHI9TWF0aC5mbG9vcihpLkZyYW1ld29yay5yYW5kb20oKSoodCsxKSksbj1lW3RdO2VbdF09ZVtyXSxlW3JdPW59cmV0dXJuIGV9ZnVuY3Rpb24gbChlKXt2YXIgdD1uZXcgQXJyYXk7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmIS9eXFxkKyQvLnRlc3QocikmJnQucHVzaChyKTtyZXR1cm4gdH1mdW5jdGlvbiBwKGUpe3JldHVybiBPYmplY3Qua2V5cyhlKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlSW50KGUsMTApfSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFpc05hTihlKX0pfWZ1bmN0aW9uIGQoZSx0KXtyZXR1cm4gZVt0XT9lW3RdOm51bGx9ZnVuY3Rpb24gZihlLHQpe3JldHVybiBuZXcgcyh0KS5QaChlKS50b1N0cmluZygpfWZ1bmN0aW9uIGcoZSl7cmV0dXJuIDA9PWUubGVuZ3RoPzA6ZS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0fSkvZS5sZW5ndGh9ZnVuY3Rpb24gRShlKXtmb3IodmFyIHQ9bmV3IEFycmF5QnVmZmVyKGUubGVuZ3RoKSxyPW5ldyBVaW50OEFycmF5KHQpLGk9MCxuPWUubGVuZ3RoO2k8bjtpKyspcltpXT1lLmNoYXJDb2RlQXQoaSk7cmV0dXJuIHR9ZnVuY3Rpb24gdihlLHQscixpKXt2YXIgbj1uZXcgZSh0LHIpLHM9aXx8ci5jdXJyZW50VGFyZ2V0O3JldHVybiBzJiZPYmplY3QuZGVmaW5lUHJvcGVydGllcyhuLHtjdXJyZW50VGFyZ2V0Ont2YWx1ZTpzLHA6ITAsQWg6ITF9LHRhcmdldDp7dmFsdWU6cyxwOiEwLEFoOiExfX0pLG59ZS5PaD1uZXcgbi5Db3VudGVyO3ZhciB5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuQUxQSEE9LjI1LHRoaXMuTmg9MWU4LHRoaXMuRGg9MWU0fXJldHVybiBlLnByb3RvdHlwZS5raD1mdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT10aGlzLkxofSxlLnByb3RvdHlwZS5NaD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLkxoPU1hdGgubWluKHRoaXMuTmgsdC9lKjhlMyksdGhpc30sZS5wcm90b3R5cGUuRmg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuTGg9TWF0aC5tYXgodGhpcy5OaCxlKSx0aGlzfSxlLnByb3RvdHlwZS5VaD1mdW5jdGlvbihlKXtlLmtoKCkmJih0aGlzLmtoKCk/dGhpcy5MaD10aGlzLkxoKigxLXRoaXMuQUxQSEEpK2UuTGgqdGhpcy5BTFBIQTp0aGlzLkxoPWUuTGgpfSxlLnByb3RvdHlwZS5CaD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5raCgpP01hdGgucm91bmQoOGUzKmUvdGhpcy5MaCk6TmFOfSxlLnByb3RvdHlwZS5IaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmtoKCk/dGhpcy5MaDpOYU59LGUucHJvdG90eXBlLnhoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2goKT90aGlzLkxoLzFlMzpOYU59LGUucHJvdG90eXBlLnFoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2goKT90aGlzLkxoLzFlNjpOYU59LGUucHJvdG90eXBlLkdoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2goKT90aGlzLkxoPjFlNj8odGhpcy5MaC8xZTYpLnRvRml4ZWQoMikrXCJNYi9zXCI6dGhpcy5MaD4xZTM/KHRoaXMuTGgvMWUzKS50b0ZpeGVkKDIpK1wiS2Ivc1wiOnRoaXMuTGgrXCJiL3NcIjpcIk5hTlwifSxlfSgpO2UuVmg9eSxlLmpoPXQsZS5hcHBlbmRCdWZmZXI9cixlLlFoPW8sZS5LaD1hLGUuWWg9aCxlLldoPWMsZS56aD11LGUuSmg9bCxlLlhoPXAsZS5aaD1kLGUuJGg9ZixlLmVjPWcsZS50Yz1FLGUuY3JlYXRlRXZlbnQ9dn0odC5yY3x8KHQucmM9e30pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiOyFmdW5jdGlvbihlKXtlLmljPVwic3RhdHNDbGllbnRcIixlLkc9XCJzZXJ2aWNlc0NsaWVudFwiLGUubmM9XCJ0aWNrZXRSZXNvbHZlclwiLGUuTT1cImlkZW50aXR5UHJvdmlkZXJcIixlLnNjPVwiY29ubkluZm9Qcm92aWRlclwiLGUub2M9XCJwZWVySW5mb1wiLGUuYWM9XCJzdHJlYW1JbmZvUHJvdmlkZXJcIixlLmhjPVwicmVwb3J0aW5nXCIsZS5jYz1cInN0YXRzU3RvcmVcIixlLnVjPVwidHJhY2tNYW5hZ2VyXCIsZS5sYz1cInRyYWNrQ2xpZW50XCJ9KHQucGN8fCh0LnBjPXt9KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjshZnVuY3Rpb24oZSl7ZVtlLmRjPTBdPVwiQVVESU9cIixlW2UuZmM9MV09XCJWSURFT1wiLGVbZS5nYz0yXT1cIk1FVEFEQVRBXCIsZVtlLkVjPTNdPVwiT1RIRVJcIn0odC52Y3x8KHQudmM9e30pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3IoNjApOyFmdW5jdGlvbihlKXtlW2UueWM9MF09XCJUUkFDS0VSXCIsZVtlLlc9MV09XCJVRFBcIn0odC5UY3x8KHQuVGM9e30pKTshZnVuY3Rpb24oZSl7ZVtlLm1jPTFdPVwiUExBWUVSXCIsZVtlLkljPTJdPVwiUDJQX0FHRU5UXCIsZVtlLlNjPTNdPVwiUFJFRkVUQ0hFUl9GSVJTVF9USUVSXCIsZVtlLlJjPTRdPVwiUFJFRkVUQ0hFUl9TRUNPTkRfVElFUlwifSh0LndjfHwodC53Yz17fSkpO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTt0LlRyYWNrZXJQZWVyU3RyZWFtSW5mbz1pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5pc0xlYWRlcj1yLHRoaXMuaW50ZXJuYWxBcz0wLHRoaXMuZXh0ZXJuYWxBcz0wLHRoaXMudHlwZT1lLHJ8fCh0aGlzLmlzTGVhZGVyPSExKSx0JiYodGhpcy5ndWlkPXQuZ3VpZCx0aGlzLmludGVybmFsQXM9dC5pbnRlcm5hbEFzLHRoaXMuZXh0ZXJuYWxBcz10LmV4dGVybmFsQXMsdGhpcy5uYXQ9dC5uYXQsdGhpcy5iYW5kd2lkdGg9dC5iYW5kd2lkdGgsdGhpcy53YXRjaGluZ0JpdHJhdGU9dC53YXRjaGluZ0JpdHJhdGUsdGhpcy5zdHJlYW1zPXQuc3RyZWFtcyx0aGlzLnJhbmtWYWx1ZT10LnJhbmtWYWx1ZSx0aGlzLnRpbWVzdGFtcD10LnRpbWVzdGFtcCx0aGlzLnByaXZhdGVJcFN0cmluZz10LnByaXZhdGVJcFN0cmluZyx0aGlzLnB1YmxpY0lwU3RyaW5nPXQucHVibGljSXBTdHJpbmcpfXJldHVybiBlfSgpO3QuYmM9bn0sZnVuY3Rpb24oZSx0LHIpe3IoNjUpLHIoMzYpLHIoNjYpLHIoMTAwKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoKXt0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBjb25zdHJ1Y3QuIEdlbmVyaWNDb2xsZWN0aW9uIGlzIGEgbWl4aW4uXCIpfWUuaT1pLGkuQ2M9T2JqZWN0LmZyZWV6ZShbXSksaS5wcm90b3R5cGUuYWRkRWFjaD1mdW5jdGlvbihlKXtpZihlJiZPYmplY3QoZSk9PT1lKWlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUuZm9yRWFjaCllLmZvckVhY2godGhpcy5hZGQsdGhpcyk7ZWxzZSBpZihcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpZm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspdGhpcy5hZGQoZVt0XSx0KTtlbHNlIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5hZGQoZVt0XSx0KX0sdGhpcyk7ZWxzZSBpZihlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpZm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspdGhpcy5hZGQoZVt0XSx0KTtyZXR1cm4gdGhpc30saS5wcm90b3R5cGUuX2M9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RoaXMuZGVsZXRlKGUsdCl9LHRoaXMpLHRoaXN9LGkucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLnJlZHVjZShmdW5jdGlvbihyLGksbixzLG8pe2UuY2FsbCh0LGksbixzLG8pfSx2b2lkIDApfSxpLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzWzFdLHI9W107cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKGksbixzLG8sYSl7ci5wdXNoKGUuY2FsbCh0LG4scyxvLGEpKX0sdm9pZCAwKSxyfSxpLnByb3RvdHlwZS5lbnVtZXJhdGU9ZnVuY3Rpb24oZSl7bnVsbD09ZSYmKGU9MCk7dmFyIHQ9W107cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKHIsaSl7dC5wdXNoKFtlKyssaV0pfSx2b2lkIDApLHR9LGkucHJvdG90eXBlLmdyb3VwPWZ1bmN0aW9uKGUsdCxyKXtyPXJ8fE9iamVjdC5jczt2YXIgaT1bXSxuPVtdO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24ocyxvLGEpe3ZhciBoLG89ZS5jYWxsKHQscyxvLGEpLGM9bi5pbmRleE9mKG8scik7LTE9PT1jPyhoPVtdLGkucHVzaChbbyxoXSksbi5wdXNoKG8pKTpoPWlbY11bMV0saC5wdXNoKHMpfSksaX0saS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChGdW5jdGlvbi5pZGVudGl0eSl9LGkucHJvdG90eXBlLlBjPWZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKHQscixpKXtlW2ldPXJ9LHZvaWQgMCksZX0saS5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50c1sxXSxyPXRoaXMuRXMoKTtyZXR1cm4gdGhpcy5yZWR1Y2UoZnVuY3Rpb24oaSxuLHMsbyxhKXtlLmNhbGwodCxuLHMsbyxhKSYmci5hZGQobixzKX0sdm9pZCAwKSxyfSxpLnByb3RvdHlwZS5ldmVyeT1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKHIsaSxuLHMsbyl7cmV0dXJuIHImJmUuY2FsbCh0LGksbixzLG8pfSwhMCl9LGkucHJvdG90eXBlLnNvbWU9ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLnJlZHVjZShmdW5jdGlvbihyLGksbixzLG8pe3JldHVybiByfHxlLmNhbGwodCxpLG4scyxvKX0sITEpfSxpLnByb3RvdHlwZS5hbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ldmVyeShCb29sZWFuKX0saS5wcm90b3R5cGUudW89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb21lKEJvb2xlYW4pfSxpLnByb3RvdHlwZS5taW49ZnVuY3Rpb24oZSl7ZT1lfHx0aGlzLkFjfHxPYmplY3QuT2M7dmFyIHQ9ITA7cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKHIsaSl7cmV0dXJuIHQ/KHQ9ITEsaSk6ZShpLHIpPDA/aTpyfSx2b2lkIDApfSxpLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24oZSl7ZT1lfHx0aGlzLkFjfHxPYmplY3QuT2M7dmFyIHQ9ITA7cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKHIsaSl7cmV0dXJuIHQ/KHQ9ITEsaSk6ZShpLHIpPjA/aTpyfSx2b2lkIDApfSxpLnByb3RvdHlwZS5OYz1mdW5jdGlvbihlKXtyZXR1cm4gZT12b2lkIDA9PT1lPzA6ZSx0aGlzLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiBlK3R9LGUpfSxpLnByb3RvdHlwZS5EYz1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lPzA6ZSxyPXZvaWQgMD09PWU/MDplO3JldHVybiB0aGlzLnJlZHVjZShmdW5jdGlvbihlLGkpe3QrPWkscis9MX0sdm9pZCAwKSx0L3J9LGkucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLkVzKHRoaXMpLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWUuYWRkRWFjaChhcmd1bWVudHNbdF0pO3JldHVybiBlfSxpLnByb3RvdHlwZS5rYz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMucmVkdWNlKGZ1bmN0aW9uKHQscil7cmV0dXJuIHIuZm9yRWFjaChmdW5jdGlvbihlKXt0aGlzLnB1c2goZSl9LHQsZSksdH0sW10pfSxpLnByb3RvdHlwZS5MYz1mdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIGUudW5zaGlmdCh0aGlzKSxBcnJheS5NYyhlKX0saS5wcm90b3R5cGUuam9pbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWR1Y2UoZnVuY3Rpb24odCxyKXtyZXR1cm4gdm9pZCAwPT09dD9yOnQrZStyfSx2b2lkIDApfSxpLnByb3RvdHlwZS5GYz1mdW5jdGlvbihlLHQscil7cmV0dXJuIGU9ZXx8dGhpcy5BY3x8T2JqZWN0Lk9jLGUuVWM/KHQ9ZS5VYyxlPWUuT2N8fHRoaXMuQWN8fE9iamVjdC5PYyk6dD10fHxGdW5jdGlvbi5pZGVudGl0eSx2b2lkIDA9PT1yJiYocj0xKSx0aGlzLm1hcChmdW5jdGlvbihlKXtyZXR1cm57VWM6dChlKSx2YWx1ZTplfX0pLnNvcnQoZnVuY3Rpb24odCxpKXtyZXR1cm4gZSh0LlVjLGkuVWMpKnJ9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUudmFsdWV9KX0saS5wcm90b3R5cGUucmV2ZXJzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5Fcyh0aGlzKS5yZXZlcnNlKCl9LGkucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSllPTEvMDtlbHNlIGlmKDA9PT1lKXJldHVybiB0aGlzO3ZhciByPXRoaXMuRXMoKTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGksbil7ci5hZGQoT2JqZWN0LmNsb25lKGksZS0xLHQpLG4pfSx0aGlzKSxyfSxpLnByb3RvdHlwZS5vbmx5PWZ1bmN0aW9uKCl7aWYoMT09PXRoaXMubGVuZ3RoKXJldHVybiB0aGlzLkJjKCl9LGkucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuSGMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLmdzPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LHA6ITEsbDohMH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwic2l6ZVwiLGkuZ3MpLHIoNjUpfSxmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gaSgpe3Rocm93IG5ldyBFcnJvcihcIlRoaXMgaXMgYW4gYWJzdHJhY3QgaW50ZXJmYWNlLiBNaXggaXQuIERvbid0IGNvbnN0cnVjdCBpdFwiKX1mdW5jdGlvbiBuKGUsdCxyLGkpe3ZhciBuLHMsbyxhPWUuYWN0aXZlLGg9ZS54YyxjPWgubGVuZ3RoLHU9Yztmb3IoYS5sZW5ndGg+YyYmKGEubGVuZ3RoPWMpO2MtLTspYVtjXT1oW2NdO2ZvcihzPTA7czx1O3MrKylpZihvPWFbc10sIXN8fGguaW5kZXhPZihvKT49MCl7aWYobj1vW2UucWNdfHxvW2UuR2NdfHxvLCFuLmNhbGwpdGhyb3cgbmV3IEVycm9yKFwiTm8gZXZlbnQgbGlzdGVuZXIgZm9yIFwiK2UuVmMrXCIgb3IgXCIrZS5qYytcIiBvciBjYWxsIG9uIFwiK24pO24uY2FsbChvLHIsdCxpKX19cigxMSk7dmFyIHM9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtlLmk9aSxpLmRlYnVnPSEwLGkucHJvdG90eXBlLlFjPWZ1bmN0aW9uKGUpe3RoaXMuS2N8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiX19wcm9wZXJ0eUNoYW5nZUxpc3RlbmVyc19fXCIse3ZhbHVlOnt9LHA6ITEsbDohMCxBaDohMH0pO3ZhciB0PXRoaXMuS2M7aWYoIXMuY2FsbCh0LGUpKXt2YXIgcj1TdHJpbmcoZSk7cj1yJiZyWzBdLnRvVXBwZXJDYXNlKCkrci5zbGljZSgxKSx0W2VdPXtZYzp7eGM6W10sYWN0aXZlOltdLHFjOlwiaGFuZGxlXCIrcitcIldpbGxDaGFuZ2VcIixHYzpcImhhbmRsZVByb3BlcnR5V2lsbENoYW5nZVwifSxXYzp7eGM6W10sYWN0aXZlOltdLHFjOlwiaGFuZGxlXCIrcitcIkNoYW5nZVwiLEdjOlwiaGFuZGxlUHJvcGVydHlDaGFuZ2VcIn19fXJldHVybiB0W2VdfSxpLnByb3RvdHlwZS56Yz1mdW5jdGlvbihlKXtpZighdGhpcy5LYylyZXR1cm4hMTtpZighZSlyZXR1cm4hMDt2YXIgdD10aGlzLktjO3JldHVybiEhcy5jYWxsKHQsZSl9LGkucHJvdG90eXBlLkpjPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLlhjJiYhdGhpcy5aYyYmdGhpcy5YYygpO3ZhciBuLHM9aS5RYyh0aGlzLGUpO249cj9zLlljOnMuV2MsaS4kYyh0aGlzLGUpLG4ueGMucHVzaCh0KTt2YXIgbz10aGlzO3JldHVybiBmdW5jdGlvbigpe2kuZXUobyxlLHQsciksbz1udWxsfX0saS5wcm90b3R5cGUudHU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaS5KYyh0aGlzLGUsdCwhMCl9LGkucHJvdG90eXBlLmV1PWZ1bmN0aW9uKGUsdCxyKXt2YXIgbixzPWkuUWModGhpcyxlKTtuPXI/cy5ZYzpzLldjO3ZhciBvPW4ueGMubGFzdEluZGV4T2YodCk7aWYoLTE9PT1vKXRocm93IG5ldyBFcnJvcihcIkNhbid0IHJlbW92ZSBwcm9wZXJ0eSBjaGFuZ2UgbGlzdGVuZXI6IGRvZXMgbm90IGV4aXN0OiBwcm9wZXJ0eSBuYW1lXCIrSlNPTi5zdHJpbmdpZnkoZSkpO24ueGMuc3BsaWNlKG8sMSl9LGkucHJvdG90eXBlLnJ1PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkuZXUodGhpcyxlLHQsITApfSxpLnByb3RvdHlwZS5pdT1mdW5jdGlvbihlLHQscil7dmFyIHMsbz1pLlFjKHRoaXMsZSk7aWYoIW8uaXNBY3RpdmUpe28uaXNBY3RpdmU9ITAscz1yP28uWWM6by5XYzt0cnl7bihzLGUsdCx0aGlzKX1maW5hbGx5e28uaXNBY3RpdmU9ITF9fX0saS5wcm90b3R5cGUubnU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaS5pdSh0aGlzLGUsdCwhMCl9LGkucHJvdG90eXBlLiRjPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3U7aWYodCl7aWYocy5jYWxsKHQsZSkpcmV0dXJufWVsc2V7aWYoQXJyYXkuaXNBcnJheSh0aGlzKSlyZXR1cm47aWYoIU9iamVjdC5pc0V4dGVuc2libGUodGhpcykpdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgbWFrZSBwcm9wZXJ0eSBcIitKU09OLnN0cmluZ2lmeShlKStcIiBvYnNlcnZhYmxlIG9uIFwiK3RoaXMrXCIgYmVjYXVzZSBvYmplY3QgaXMgbm90IGV4dGVuc2libGVcIik7dD17fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcIl9fb3ZlcnJpZGRlblByb3BlcnR5RGVzY3JpcHRvcnNfX1wiLHt2YWx1ZTp0LHA6ITEsQWg6ITAsbDohMH0pfXZhciByO1wib2JqZWN0XCI9PXR5cGVvZiB0aGlzLm91P3I9dGhpcy5vdToocj17fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcIl9fc3RhdGVfX1wiLHt2YWx1ZTpyLEFoOiEwLHA6ITF9KSkscltlXT10aGlzW2VdO3ZhciBpLG89dGhpcztkb3tpZihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxlKSlicmVhaztvPU9iamVjdC5nZXRQcm90b3R5cGVPZihvKX13aGlsZShvKTtpZihpKXtpZighaS5sKXJldHVybjtpZighaS5BaCYmIWkuc2V0KXJldHVybn1lbHNlIGk9e3ZhbHVlOnZvaWQgMCxwOiEwLEFoOiEwLGw6ITB9O3RbZV09aTt2YXIgYTthPVwidmFsdWVcImluIGk/e2dldDpmdW5jdGlvbigpe3JldHVybiBpLnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIHMsbztpZih0IT09aS52YWx1ZSl7aWYocz10aGlzLktjW2VdLCEobz1zLmlzQWN0aXZlKSl7cy5pc0FjdGl2ZT0hMDt0cnl7bihzLlljLGUsaS52YWx1ZSx0aGlzKX1maW5hbGx5e319aWYoaS52YWx1ZT10LHJbZV09dCwhbyl0cnl7bihzLldjLGUsdCx0aGlzKX1maW5hbGx5e3MuaXNBY3RpdmU9ITF9fX0scDppLnAsbDohMH06e2dldDppLmdldCxzZXQ6ZnVuY3Rpb24odCl7dmFyIHMsbyxhPXRoaXNbZV07aWYoaS5zZXQuY2FsbCh0aGlzLHQpLCh0PXRoaXNbZV0pIT09YSl7aWYocz10aGlzLktjW2VdLCEobz1zLmlzQWN0aXZlKSl7cy5pc0FjdGl2ZT0hMDt0cnl7bihzLlljLGUsYSx0aGlzKX1maW5hbGx5e319aWYocltlXT10LCFvKXRyeXtuKHMuV2MsZSx0LHRoaXMpfWZpbmFsbHl7cy5pc0FjdGl2ZT0hMX19fSxwOmkucCxsOiEwfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxlLGEpfSxpLlFjPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuUWM/ZS5RYyh0KTppLnByb3RvdHlwZS5RYy5jYWxsKGUsdCl9LGkuemM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS56Yz9lLnpjKHQpOmkucHJvdG90eXBlLnpjLmNhbGwoZSx0KX0saS5KYz1mdW5jdGlvbihlLHQscixuKXtpZihPYmplY3QuYXUoZSkpcmV0dXJuIGUuSmM/ZS5KYyh0LHIsbik6aS5wcm90b3R5cGUuSmMuY2FsbChlLHQscixuKX0saS5ldT1mdW5jdGlvbihlLHQscixuKXtpZihPYmplY3QuYXUoZSkpcmV0dXJuIGUuZXU/ZS5ldSh0LHIsbik6aS5wcm90b3R5cGUuZXUuY2FsbChlLHQscixuKX0saS5pdT1mdW5jdGlvbihlLHQscixuKXtpZihPYmplY3QuYXUoZSkpcmV0dXJuIGUuaXU/ZS5pdSh0LHIsbik6aS5wcm90b3R5cGUuaXUuY2FsbChlLHQscixuKX0saS50dT1mdW5jdGlvbihlLHQscil7cmV0dXJuIGkuSmMoZSx0LHIsITApfSxpLnJ1PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gaS5ldShlLHQsciwhMCl9LGkubnU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBpLml1KGUsdCxyLCEwKX0saS4kYz1mdW5jdGlvbihlLHQpe3JldHVybiBlLiRjP2UuJGModCk6aS5wcm90b3R5cGUuJGMuY2FsbChlLHQpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpLG49dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0scz1yKDQxKSxvPXIoNiksYT1vLmhlLlNoLGg9by5oZS5DaDshZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO3QuRGFzaEZpbHRlckJpdHJhdGVzPW51bGwsdC5EYXNoUmVtb3ZlQml0cmF0ZVNpemU9ITEsZS5EYXNoPXQ7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO3IuQXVkaW9BY2NvdW50aW5nPSEwLGUuU3RhdHM9cjt2YXIgaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbih0LGUpLHR9KHMuSGl2ZUNvbmZpZy5EZWJ1Z0xvZ3MpO2kuVHJhY2tlckxvZ3M9MCxlLkRlYnVnTG9ncz1pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtvLnVzaXo9bnVsbCxlLlVEUEJyb2FkY2FzdD1vO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtjLnJlc3RyaWN0ZWRDb25uZWN0aXZpdHlJbmZvPWEsYy5oaWRkZW5Ib3N0bmFtZVZhbHVlPVwiW0hpZGRlbl1cIixlLlNlbnNpdGl2ZUluZm89Yzt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7dS5jdT1udWxsLHUudXU9bnVsbCxlLkNsaWVudEluZm89dTt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7bC5kZXRlY3RQcml2YXRlSVA9aCxlLkNvbm5JbmZvPWx9KGk9dC5IaXZlQ29uZmlnfHwodC5IaXZlQ29uZmlnPXt9KSksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmKHZvaWQgMD09PXdpbmRvdy5IaXZlQ29uZmlnJiYod2luZG93LkhpdmVDb25maWc9e30pLHdpbmRvdy5IaXZlQ29uZmlnLkRhc2g9aS5EYXNoLHdpbmRvdy5IaXZlQ29uZmlnLlN0YXRzPWkuU3RhdHMsd2luZG93LkhpdmVDb25maWcuVURQQnJvYWRjYXN0PWkuVURQQnJvYWRjYXN0LHdpbmRvdy5IaXZlQ29uZmlnLkRlYnVnTG9ncz1pLkRlYnVnTG9ncyx3aW5kb3cuSGl2ZUNvbmZpZy5TZW5zaXRpdmVJbmZvPWkuU2Vuc2l0aXZlSW5mbyx3aW5kb3cuSGl2ZUNvbmZpZy5DbGllbnRJbmZvPWkuQ2xpZW50SW5mbyx3aW5kb3cuSGl2ZUNvbmZpZy5Db25uSW5mbz1pLkNvbm5JbmZvKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiOyFmdW5jdGlvbihlKXtlLmx1PVwic25hcEFjY291bnRpbmdNYW5hZ2VyXCIsZS5wdT1cIm1lbWJlcnNoaXBcIixlLmR1PVwicGFydG5lcnNoaXBcIixlLmZ1PVwiaW5QYXJ0bmVyc2hpcFwiLGUuZ3U9XCJvdXRQYXJ0bmVyc2hpcFwiLGUuRXU9XCJpblByZWZldGNoZXJQYXJ0bmVyc2hpcFwiLGUudnU9XCJvdXRQcmVmZXRjaGVyUGFydG5lcnNoaXBcIixlLnl1PVwiY2FjaGVcIixlLlR1PVwibGl2ZWNhY2hlXCIsZS5tdT1cInZvZGNhY2hlXCIsZS5JdT1cIm9iakluZGV4XCIsZS5TdT1cImNlbnRyRnJhZ21lbnRcIixlLlJ1PVwiaGNhY2hlXCIsZS53dT1cInJlc3BvbmRlclwiLGUuYnU9XCJyZXF1ZXN0ZXJcIixlLkN1PVwicDJwUmVxdWVzdGVyXCIsZS5fdT1cInBlZXJcIixlLlB1PVwiY29udGV4dFJlc29sdmVyXCIsZS5BdT1cInZpZGVvUHJlZmV0Y2hlclwiLGUuT3U9XCJwcmVmZXRjaE1hbmFnZXJcIixlLk51PVwicGlja2VyXCIsZS5EdT1cInRyYWNrZXJDbGllbnRcIixlLmt1PVwic2NvcmVVcGRhdGVyXCIsZS5xPVwic2VydmVyTWFuYWdlclwiLGUuTHU9XCJyZXF1ZXN0VHJhY2tlclwiLGUuTXU9XCJ0cmFja2VyTWFuYWdlclwiLGUuRnU9XCJyZW5kZXJTdGF0c1wiLGUuVXU9XCJ1ZHBCcm9hZGNhc3RlclwiLGUuQnU9XCJ1ZHBEaXNjb3ZlcnlcIixlLlRoPVwidWRwTGVhZGVyRWxlY3Rpb25cIixlLkh1PVwibm9kZUluZm9cIixlLnh1PVwiaXBzcG9vZmluZ1wifSh0LnF1fHwodC5xdT17fSkpfSxmdW5jdGlvbihlLHQpe2UuaT1mdW5jdGlvbigpe3JldHVybiBuZXcgRnVuY3Rpb259fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ITAsbj17R3U6ZnVuY3Rpb24oZSl7cmV0dXJuXCJib29sZWFuXCIhPXR5cGVvZiBlP25ldyBFcnJvcihcIkFyZ3VtZW50IHR5cGU6IFwiK3R5cGVvZiBlK1wiLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi5cIik6KGk9ZSxlP1wiYWRhcHRlci5qcyBsb2dnaW5nIGRpc2FibGVkXCI6XCJhZGFwdGVyLmpzIGxvZ2dpbmcgZW5hYmxlZFwiKX0sbG9nOmZ1bmN0aW9uKCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyl7aWYoaSlyZXR1cm47XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGNvbnNvbGUubG9nJiZjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9fSxWdTpmdW5jdGlvbihlLHQscil7dmFyIGk9ZS5tYXRjaCh0KTtyZXR1cm4gaSYmaS5sZW5ndGg+PXImJnBhcnNlSW50KGlbcl0sMTApfSxqdTpmdW5jdGlvbigpe3ZhciBlPXt9O2lmKGUuUXU9bnVsbCxlLnZlcnNpb249bnVsbCxcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93fHwhd2luZG93Lm5hdmlnYXRvcilyZXR1cm4gZS5RdT1cIk5vdCBhIGJyb3dzZXIuXCIsZTtpZihuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKWUuUXU9XCJmaXJlZm94XCIsZS52ZXJzaW9uPXRoaXMuVnUobmF2aWdhdG9yLnVzZXJBZ2VudCwvRmlyZWZveFxcLyhcXGQrKVxcLi8sMSk7ZWxzZSBpZihuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKWlmKHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbillLlF1PVwiY2hyb21lXCIsZS52ZXJzaW9uPXRoaXMuVnUobmF2aWdhdG9yLnVzZXJBZ2VudCwvQ2hyb20oZXxpdW0pXFwvKFxcZCspXFwuLywyKTtlbHNle2lmKCFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9WZXJzaW9uXFwvKFxcZCspLihcXGQrKS8pKXJldHVybiBlLlF1PVwiVW5zdXBwb3J0ZWQgd2Via2l0LWJhc2VkIGJyb3dzZXIgd2l0aCBHVU0gc3VwcG9ydCBidXQgbm8gV2ViUlRDIHN1cHBvcnQuXCIsZTtlLlF1PVwic2FmYXJpXCIsZS52ZXJzaW9uPXRoaXMuVnUobmF2aWdhdG9yLnVzZXJBZ2VudCwvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vLDEpfWVsc2UgaWYobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRWRnZVxcLyhcXGQrKS4oXFxkKykkLykpZS5RdT1cImVkZ2VcIixlLnZlcnNpb249dGhpcy5WdShuYXZpZ2F0b3IudXNlckFnZW50LC9FZGdlXFwvKFxcZCspLihcXGQrKSQvLDIpO2Vsc2V7aWYoIW5hdmlnYXRvci5tZWRpYURldmljZXN8fCFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8pKXJldHVybiBlLlF1PVwiTm90IGEgc3VwcG9ydGVkIGJyb3dzZXIuXCIsZTtlLlF1PVwic2FmYXJpXCIsZS52ZXJzaW9uPXRoaXMuVnUobmF2aWdhdG9yLnVzZXJBZ2VudCwvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vLDEpfXJldHVybiBlfSxLdTpmdW5jdGlvbigpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5IVE1MTWVkaWFFbGVtZW50JiZcInNyY09iamVjdFwiaW4gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlKXt2YXIgZT1VUkwuY3JlYXRlT2JqZWN0VVJMLmJpbmQoVVJMKSx0PVVSTC5yZXZva2VPYmplY3RVUkwuYmluZChVUkwpLHI9bmV3IE1hcCxpPTA7VVJMLmNyZWF0ZU9iamVjdFVSTD1mdW5jdGlvbih0KXtpZihcImdldFRyYWNrc1wiaW4gdCl7dmFyIG49XCJwb2x5YmxvYjpcIisgKytpO3JldHVybiByLnNldChuLHQpLGNvbnNvbGUubG9nKFwiVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pIGlzIGRlcHJlY2F0ZWQhIFVzZSBlbGVtLnNyY09iamVjdCA9IHN0cmVhbSBpbnN0ZWFkIVwiKSxufXJldHVybiBlKHQpfSxVUkwucmV2b2tlT2JqZWN0VVJMPWZ1bmN0aW9uKGUpe3QoZSksci5kZWxldGUoZSl9O3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLFwic3JjXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsXCJzcmNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0LmFwcGx5KHRoaXMpfSxzZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuWXU9ci5nZXQoZSl8fG51bGwsbi5zZXQuYXBwbHkodGhpcyxbZV0pfX0pO3ZhciBzPUhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZTtIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGU9ZnVuY3Rpb24oKXtyZXR1cm4gMj09PWFyZ3VtZW50cy5sZW5ndGgmJlwic3JjXCI9PT0oXCJcIithcmd1bWVudHNbMF0pLnRvTG93ZXJDYXNlKCkmJih0aGlzLll1PXIuZ2V0KGFyZ3VtZW50c1sxXSl8fG51bGwpLHMuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19fTtlLmk9e2xvZzpuLmxvZyxHdTpuLkd1LFd1Om4uanUoKSxWdTpuLlZ1LEt1Om4uS3UsanU6bi5qdS5iaW5kKG4pfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoZSx0LHIpe3JldHVybiB2b2lkIDA9PT10JiYodD1cIlwiKSx2b2lkIDA9PT1yJiYocj1bXSksbihlLHQsciwhMCl9ZnVuY3Rpb24gbihlLHQscixpKXt2b2lkIDA9PT10JiYodD1cIlwiKSx2b2lkIDA9PT1yJiYocj1bXSksdm9pZCAwPT09aSYmKGk9ITEpO2Zvcih2YXIgcyBpbiBlKSFmdW5jdGlvbihzKXtpZihlLmhhc093blByb3BlcnR5KHMpKXt2YXIgbz1lW3NdO0FycmF5LmlzQXJyYXkobyk/by5mb3JFYWNoKGZ1bmN0aW9uKGUsbyl7XCJvYmplY3RcIj09dHlwZW9mIGUmJm4oZSx0K1wiLlwiK3MrXCJbXCIrbytcIl1cIixyLGkpfSk6XCJvYmplY3RcIj09dHlwZW9mIG8/bihvLHQrXCIuXCIrcyxyLGkpOlwibnVtYmVyXCI9PXR5cGVvZiBvJiZpc05hTihvKSYmKHIucHVzaCh0K1wiLlwiK3MpLGl8fChlW3NdPW51bGwpKX19KHMpO3JldHVybiByfWZ1bmN0aW9uIHMoZSx0LHIpe3ZhciBpPW5ldyBjO3JldHVybiBpLnRpY2tldFVybD1lLGkuY29kZT10LGkubWVzc2FnZT11KHQpLGkuZGV0YWlsZWRNZXNzYWdlPXIsaX12YXIgbz1yKDMpLGE9cig0KSxoPXIoMjYpLGM9aC5IaXZlQ29tbS5IaXZlU2Vzc2lvbkVycm9yLHU9aC5IaXZlQ29tbS5nZXRIaXZlU2Vzc2lvbkVycm9yTWVzc2FnZSxsPWguSGl2ZUNvbW0uSGl2ZVNlc3Npb24scD1yKDUzKSxkPXIoNzIpLGY9cigxNCksZz1yKDYpLEU9cigxKSx2PWcuaGUudWg7aWYodil2YXIgeT1yKDMxKS5IaXZlUmVxdWVzdCxUPXIoNTQpLnp1O3ZhciBtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtpZighdCl7aWYoMD09T2JqZWN0LmtleXMoZS5tYXBwaW5nKS5sZW5ndGgmJiFlLkp1KXJldHVybiBFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiTm8gcmVnaXN0ZXJlZCBkZWZhdWx0IEhpdmVSZXF1ZXN0RmFjdG9yeSB0ZWNoXCIsZS5sb2dnZXJJZCksZS5KdT0hMCxlLmdldE9yaWdpbmFsWGhyKCk7dD1PYmplY3Qua2V5cyhlLm1hcHBpbmcpWzBdfWlmKCEodCBpbiBlLm1hcHBpbmcpKXJldHVybiBlLkp1fHwoRS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIm5vIHJlZ2lzdGVyZWQgSGl2ZVJlcXVlc3RGYWN0b3J5IHRlY2ggZm9yIHNlc3Npb25cIix7c2Vzc2lvbklkOnR9KSxlLkp1PSEwKSxlLmdldE9yaWdpbmFsWGhyKCk7dmFyIHI9ZS5tYXBwaW5nW3RdO3N3aXRjaChyLnRlY2gpe2Nhc2VcIkhpdmVKU1wiOnJldHVybiB2P3IuWHU/bmV3IHkodCk6KHIuWHU9ITAsbmV3IFQodCkpOmUuZ2V0T3JpZ2luYWxYaHIoKTtjYXNlXCJIaXZlSnNQcm94eVwiOnJldHVybiByLlh1P25ldyBwLlp1KHQpOihyLlh1PSEwLG5ldyBkLiR1KHQpKTtjYXNlXCJIaXZlSmF2YVwiOmNhc2VcIlN0YXRzSlNcIjpyZXR1cm4gZS5nZXRPcmlnaW5hbFhocigpfX1yZXR1cm4gZS5nZXRPcmlnaW5hbFhocj1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBPcmlnaW5hbFhNTEh0dHBSZXF1ZXN0P25ldyBPcmlnaW5hbFhNTEh0dHBSZXF1ZXN0Om5ldyBYTUxIdHRwUmVxdWVzdH0sZS5jbGVhcj1mdW5jdGlvbigpe2UubWFwcGluZz17fX0sZS5jbGVhclNlc3Npb25TdGF0ZT1mdW5jdGlvbih0KXtpZih0IGluIGUubWFwcGluZyl7dmFyIHI9ZS5tYXBwaW5nW3RdO2Zvcih2YXIgaSBpbiByKVwidGVjaFwiIT09aSYmZGVsZXRlIHJbaV19fSxlLmNsZWFyU2Vzc2lvbj1mdW5jdGlvbih0KXt0IGluIGUubWFwcGluZyYmZGVsZXRlIGUubWFwcGluZ1t0XX0sZS5yZWdpc3RlclRlY2g9ZnVuY3Rpb24odCxyKXt0IGluIGUubWFwcGluZ3x8KGUubWFwcGluZ1t0XT17fSksZS5tYXBwaW5nW3RdLnRlY2g9cn0sZX0oKTttLm1hcHBpbmc9e30sbS5KdT0hMSxtLmxvZ2dlcklkPVwiW0hpdmVSZXF1ZXN0RmFjdG9yeV1cIix0LkhpdmVSZXF1ZXN0RmFjdG9yeT1tO3ZhciBJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpKXt0aGlzLmVsPSExLHRoaXMudGlja2V0VXJsPWUsdGhpcy50aWNrZXQ9dCx0aGlzLm1hbmlmZXN0PXIsdGhpcy50bD1hLmRlZmVyKCksdGhpcy5ybD1pLHRoaXMucmwmJnRoaXMudGwucmVzb2x2ZSh0aGlzLnJsKX1yZXR1cm4gZS5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT10aGlzLnRlY2gmJnRoaXMudGVjaC5pc0FjdGl2ZShlLHRoaXMpfSxlLnByb3RvdHlwZS5pbD1mdW5jdGlvbihlKXt0aGlzLmVsIT1lJiYodGhpcy5lbD1lLHRoaXMudGVjaCYmdGhpcy50ZWNoLm5sKHRoaXMsZSkpfSxlLnByb3RvdHlwZS5nZXRUZWNoTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRlY2gmJnRoaXMudGVjaC5nZXROYW1lKCl8fHZvaWQgMH0sZS5wcm90b3R5cGUuc2w9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sZS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD0hMCksdGhpcy5lbD0hMCxudWxsIT10aGlzLnRlY2gpcmV0dXJuIHRoaXMudGVjaC5vbCh0aGlzLGUsdCl9LGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGlja2V0LnRvU3RyaW5nKCl9LGUucHJvdG90eXBlLnRvSGl2ZVNlc3Npb249ZnVuY3Rpb24oKXt2YXIgZT1uZXcgbDtyZXR1cm4gZS5pZD10aGlzLmlkLGUudGlja2V0VXJsPXRoaXMudGlja2V0VXJsLGUubWFuaWZlc3Q9dGhpcy5tYW5pZmVzdCxlLnRlY2g9dGhpcy50ZWNoLmdldE5hbWUoKSxlfSxlLnByb3RvdHlwZS5hbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRsLlNzfSxlLnByb3RvdHlwZS5obD1mdW5jdGlvbihlKXt0aGlzLnJsPWUsdGhpcy50bC5yZXNvbHZlKHRoaXMucmwpfSxlfSgpO3QuY2w9STt2YXIgUz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7dC51bD1TO3ZhciBSPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuc3VjY2Vzcz0wLHRoaXMubGw9MCx0aGlzLmJ5dGVzPTB9cmV0dXJuIGV9KCk7dC5wbD1SO3ZhciB3PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuZGw9MCx0aGlzLmZsPTAsdGhpcy5nbD1uZXcgbyx0aGlzLkVsPW5ldyBvfXJldHVybiBlLnByb3RvdHlwZS5hY2NvdW50Q29tcGxldGVkPWZ1bmN0aW9uKGUsdCxyLGkpe3ZvaWQgMD09PWkmJihpPSEwKTt2YXIgbj1lP3RoaXMuZ2w6dGhpcy5FbDtuLmhhcyh0KXx8bi5zZXQodCxuZXcgUik7dmFyIHM9bi5nZXQodCk7cy5ieXRlcys9cixpJiZzLnN1Y2Nlc3MrK30sZS5wcm90b3R5cGUuYWNjb3VudEZhaWxlZD1mdW5jdGlvbihlLHQpe3ZhciByPWU/dGhpcy5nbDp0aGlzLkVsO3IuaGFzKHQpfHxyLnNldCh0LG5ldyBSKSxyLmdldCh0KS5sbCsrfSxlLnByb3RvdHlwZS51cGRhdGVCYW5kd2lkdGg9ZnVuY3Rpb24oZSl7dGhpcy5iYW5kd2lkdGg9ZX0sZS5wcm90b3R5cGUuYml0cmF0ZVN3aXRjaFVwPWZ1bmN0aW9uKCl7dGhpcy5kbCsrfSxlLnByb3RvdHlwZS5iaXRyYXRlU3dpdGNoRG93bj1mdW5jdGlvbigpe3RoaXMuZmwrK30sZS5wcm90b3R5cGUuZ2V0QmFuZHdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmFuZHdpZHRofSxlLnByb3RvdHlwZS5nZXRWaWRlb0JpdHJhdGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2x9LGUucHJvdG90eXBlLmdldEF1ZGlvQml0cmF0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5FbH0sZS5wcm90b3R5cGUuZ2V0Qml0cmF0ZVN3aXRjaFVwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGx9LGUucHJvdG90eXBlLmdldEJpdHJhdGVTd2l0Y2hEb3duPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmx9LGV9KCk7dC5IaXZlUGxheWVyRXh0ZW5kZWRTdGF0cz13O3ZhciBiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciB0PXRoaXM7aWYoZS5mZSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvcjogSW5zdGFudGlhdGlvbiBmYWlsZWQ6IFVzZSBWaXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIuZ2V0SW5zdGFuY2UoKSBpbnN0ZWFkIG9mIG5ldy5cIik7dmFyIHIsaTt2b2lkIDAhPT1kb2N1bWVudC5oaWRkZW4/KHI9XCJoaWRkZW5cIixpPVwidmlzaWJpbGl0eWNoYW5nZVwiKTp2b2lkIDAhPT1kb2N1bWVudC5tc0hpZGRlbj8ocj1cIm1zSGlkZGVuXCIsaT1cIm1zdmlzaWJpbGl0eWNoYW5nZVwiKTp2b2lkIDAhPT1kb2N1bWVudC53ZWJraXRIaWRkZW4mJihyPVwid2Via2l0SGlkZGVuXCIsaT1cIndlYmtpdHZpc2liaWxpdHljaGFuZ2VcIiksdm9pZCAwIT09ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciYmdm9pZCAwIT09ZG9jdW1lbnRbcl0/ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihpLGZ1bmN0aW9uKCl7dmFyIGU9IWRvY3VtZW50W3JdO3QudmwuZm9yRWFjaChmdW5jdGlvbihyKXtyLmNhbGwodCxlKX0pfSwhMSk6ZS5sb2dnZXImJmUubG9nZ2VyLmRlYnVnKFwid2FybiAtIHZpc2liaWxpdHlDaGFuZ2UgbGlzdGVuZXIgbm90IHN1cHBvcnRlZFwiKSx0aGlzLnZsPW5ldyBBcnJheX1yZXR1cm4gZS52ZT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmKHRoaXMubG9nZ2VyPXQpLHZvaWQgMD09PXRoaXMuZmUmJih0aGlzLmZlPW5ldyBlKSx0aGlzLmZlfSxlLnByb3RvdHlwZS55bD1mdW5jdGlvbihlKXt0aGlzLnZsLnB1c2goZSl9LGV9KCk7dC5UbD1iLHQubWw9aSx0LklsPW4sdC5TbD1zO3ZhciBDPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5nZXRJdGVtPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gd2luZG93LnNlc3Npb25TdG9yYWdlP3dpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGUpOm51bGx9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fSxlLnNldEl0ZW09ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuISF3aW5kb3cuc2Vzc2lvblN0b3JhZ2UmJih3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShlLHQpLCEwKX1jYXRjaChlKXtyZXR1cm4hMX19LGUucmVtb3ZlSXRlbT1mdW5jdGlvbihlKXt0cnl7d2luZG93LnNlc3Npb25TdG9yYWdlJiZ3aW5kb3cuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShlKX1jYXRjaChlKXtyZXR1cm4gbnVsbH19LGV9KCk7dC5SbD1DO3ZhciBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLndsPWV9cmV0dXJuIGUucHJvdG90eXBlLmJsPWZ1bmN0aW9uKGUpe3ZhciB0PURhdGUubm93KCk7cmV0dXJuIHRoaXMuaXNFcXVhbCh0aGlzLkNsLGUpfHwodGhpcy5fbD10KSx0aGlzLkNsPWUsdC10aGlzLl9sPj10aGlzLndsfSxlLnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKGUsdCl7aWYoZSYmdCl7cmV0dXJuW3QuUGwtZS5QbCx0LkFsLWUuQWwsdC5PbC1lLk9sXS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmTWF0aC5hYnModCk8MTB9LCEwKX1yZXR1cm4hMX0sZX0oKTt0Lk5sPV87dmFyIFA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmdldFByaXZhdGVJcD1mdW5jdGlvbihlKXt2YXIgdD1lLmdldFByaXZhdGVJcCgpO3JldHVybiBmLkhpdmVDb25maWcuU2Vuc2l0aXZlSW5mby5yZXN0cmljdGVkQ29ubmVjdGl2aXR5SW5mbyYmdCYmKHQ9dC5yZXBsYWNlKC9bMC05XSokLyxcIjBcIikpLHR9LGUuRGw9ZnVuY3Rpb24oZSl7cmV0dXJuIGYuSGl2ZUNvbmZpZy5TZW5zaXRpdmVJbmZvLnJlc3RyaWN0ZWRDb25uZWN0aXZpdHlJbmZvP2YuSGl2ZUNvbmZpZy5TZW5zaXRpdmVJbmZvLmhpZGRlbkhvc3RuYW1lVmFsdWU6ZS5nZXRIb3N0TmFtZSgpfSxlfSgpO3Qua2w9UH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMyksbj1yKDQpLHM9cigwKSxvPXIoMjIpLGE9cig4KSxoPXIoMzIpOyFmdW5jdGlvbihlKXtlW2UuU1RPUD0wXT1cIlNUT1BcIixlW2UuSURMRT0xXT1cIklETEVcIixlW2UuTGw9Ml09XCJQTEFZXCJ9KHQuTWx8fCh0Lk1sPXt9KSk7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGkpe3RoaXMudGlja2V0PWUsdGhpcy5GbD10LHRoaXMuYXBwPXIsdGhpcy5pZGVudGl0eT1pLHRoaXMuVWw9cy5GcmFtZXdvcmsucmVzb2x2ZShhLnBjLmNjKSx0aGlzLkJsPXMuRnJhbWV3b3JrLnJlc29sdmUoYS5wYy5pYyksdGhpcy5IbD1zLkZyYW1ld29yay5yZXNvbHZlKGEucGMudWMpLHRoaXMueGw9bmV3IG8uR2wucWwodGhpcy5IbCl9cmV0dXJuIGUucHJvdG90eXBlLlZsPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmFwcD1uZXcgdShlLHQpLHRoaXMuVWwuVmwodGhpcy5hcHApLHRoaXMuSGwuVmwodGhpcy5hcHAscil9LGUucHJvdG90eXBlLm5sPWZ1bmN0aW9uKGUpe3RoaXMuQmwubmwoZSl9LGUucHJvdG90eXBlLmpsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyU3RhdHNDYWxsYmFja30sZS5wcm90b3R5cGUuUWw9ZnVuY3Rpb24oZSl7dGhpcy5yZW5kZXJTdGF0c0NhbGxiYWNrPWV9LGV9KCk7dC5LbD1jO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuYXBwPWUsdGhpcy52ZXJzaW9uPXR9cmV0dXJuIGV9KCk7dC5ZbD11O3ZhciBsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMucDJwSWQ9bnVsbCx0aGlzLldsPW51bGwsdGhpcy56bD1uZXcgaSx0aGlzLmxvZ2dlcj1zLkZyYW1ld29yay5yZXNvbHZlKHMuRnJhbWV3b3JrLlYuUikubG9nKCksdGhpcy5sb2dnZXIuZGVidWcoXCJJTklUIFJFUE9SVElOR1wiKSx0aGlzLkZsPXMuRnJhbWV3b3JrLnJlc29sdmUoYS5wYy5HKSx0aGlzLkpsPXMuRnJhbWV3b3JrLnJlc29sdmUoYS5wYy5NKSx0aGlzLlhsPXMuRnJhbWV3b3JrLnJlc29sdmUoYS5wYy5uYyl9cmV0dXJuIGUucHJvdG90eXBlLmluaXRTZXNzaW9uPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLHM9bi5kZWZlcigpLG89dGhpcy5KbC5abCgpLGE9dGhpcy5YbC4kbChlKTtyZXR1cm4gbnVsbCE9ciYmKGEudGVzdElkPXIpLG51bGwhPWE/by50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBpLmVwKGUsYSxzLHQpfSkuZmFpbChzLnJlamVjdCk6cy5yZWplY3QoXCJUaWNrZXQgVVJMIG5vdCB2YWxpZFwiKSxzLlNzfSxlLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihlKXtlPyh0aGlzLnpsLmRlbGV0ZShlKSwwPT10aGlzLnpsLmxlbmd0aCYmdGhpcy5GbC5jbG9zZSgpKToodGhpcy56bC5jbGVhcigpLHRoaXMuRmwuY2xvc2UoKSl9LGUucHJvdG90eXBlLmVwPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPXRoaXM7dGhpcy5wMnBJZD1lLnRwKCksdGhpcy5XbD1lLnJwKCk7dmFyIHM9dGhpcy5GbC5pbml0KHRoaXMucDJwSWQsdCksbz10aGlzLlhsLnJlc29sdmUocy5ucCx0LGkpO3MuU3MudGhlbihmdW5jdGlvbih0KXtvLnRoZW4oZnVuY3Rpb24odCl7dmFyIGk9dC5zZXNzaW9uSWQ7aWYobi56bC5oYXMoaSkpe3ZhciBzPW4uemwuZ2V0KGkpO24ubG9nZ2VyLndhcm4oXCJTRVNTSU9OIEFMUkVBRFkgRVhJU1RJTkcgXCIrcy5VbC50aWNrZXQpfWVsc2V7dmFyIG89bmV3IHUoaC5IaXZlLnNwKCksaC5IaXZlLmdldFZlcnNpb24oKSksYT1uZXcgYyh0LG4uRmwsbyxlKTthLlVsLmluaXQobi5XbCx0LG8saSksYS5IbC5pbml0KG4uV2wsbyksYS5IbC5vcCh0KSxuLnpsLnNldChpLGEpLG4ubG9nZ2VyLmRlYnVnKFwiU0VTU0lPTiBTRVQgXCIsaSksci5yZXNvbHZlKGEpfX0pLmZhaWwoZnVuY3Rpb24oZSl7cmV0dXJuIHIucmVqZWN0KGV8fFwiRXJyb3IgcmVzb2x2aW5nIHRoZSB0aWNrZXRcIil9KSx0Lm9uZXJyb3IoZnVuY3Rpb24oZSl7ci5yZWplY3QoXCJFcnJvciBlc3RhYmxpc2hpbmcgY29ubmVjdGlvbiB0byBIaXZlIFNlcnZpY2VzXCIpfSl9KS5mYWlsKGZ1bmN0aW9uKGUpe3JldHVybiByLnJlamVjdChlKX0pLHRoaXMuRmwuY29ubmVjdCgpfSxlLnByb3RvdHlwZS5hcD1mdW5jdGlvbihlLHQpe3JldHVybiBlLmhwKCk9PT10LmhwKCkmJmUuY3AoKT09PXQuY3AoKSYmZS51cCgpPT09dC51cCgpfSxlfSgpO3QubHA9bH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNDEpLG49cigyOSkscz1yKDQyKSxvPXIoNik7by5oZS5saCxvLmhlLnVoLG8uaGUucGg7aWYodm9pZCAwPT09YSl2YXIgYT0zZTQ7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLm1vbml0b3JQb3J0PW4uTC5wcD9zLmZwLmRwOnMuZnAuZ3AsdGhpcy5wbGF5ZXJQb3J0PW4uTC5wcD9zLmZwLkVwOnMuZnAudnAsdGhpcy5mZWVkYmFja1BlcmlvZD0yZTMsdGhpcy5pZGxlVGltZVBlcmlvZD02ZTQsdGhpcy51c2VTZXNzaW9uQ2hlY2s9bi5MLnlwLHRoaXMuZGVidWdMZXZlbD1cIm5vdGljZVwiLHRoaXMuaGl2ZVRlY2hPcmRlcj1bXSx0aGlzLnRlbGVtZXRyeUlkPW51bGwsdGhpcy5zaWxlbnQ9ITEsdGhpcy5sb2dnZXJUaW1lc3RhbXA9aS5IaXZlQ29uZmlnLkZyYW1ld29yay5Mb2dnZXJUaW1lc3RhbXAsdGhpcy50ZXN0SWQ9bnVsbCx0aGlzLnBsdWdpblRpbWVvdXQ9YSx0aGlzLm9uU291cmNlU2V0Q29tcGxldGVkPWZ1bmN0aW9uKGUpe30sdGhpcy5vbkxvYWRpbmdDb21wbGV0ZWQ9ZnVuY3Rpb24oZSl7fSx0aGlzLmRldGVjdFByaXZhdGVJUD1vLmhlLkNoLHRoaXMub25BY3RpdmVTZXNzaW9uPWZ1bmN0aW9uKGUpe319cmV0dXJuIGV9KCk7ZS5PcHRpb25zPXQ7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5pbml0VGltZW91dD0zZTQsdGhpcy5vbkVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiEwfSx0aGlzLm9uQWN0aXZlU2Vzc2lvbj1mdW5jdGlvbihlKXt9fXJldHVybiBlfSgpO2UuVHA9cjt2YXIgaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmhpdmVQbGF5ZXJQb3J0PVwicGxheWVyUG9ydFwiLHRoaXMuaGl2ZU1vbml0b3JQb3J0PVwibW9uaXRvclBvcnRcIix0aGlzLmhpdmVTaWxlbnQ9XCJzaWxlbnRcIix0aGlzLmhpdmVEZWJ1Z0xldmVsPVwiZGVidWdMZXZlbFwiLHRoaXMuaGl2ZURlYnVnVGltZXN0YW1wPVwibG9nZ2VyVGltZXN0YW1wXCIsdGhpcy5oaXZlU2V0dXBUaW1lb3V0PVwic2V0dXBUaW1lb3V0XCIsdGhpcy5oaXZlSmF2YVRpbWVvdXQ9XCJpbml0VGltZW91dFwiLHRoaXMuaGl2ZVdhcm5KYXZhVGltZW91dD1cIndhcm5TbG93UmVzcFRpbWVvdXRcIix0aGlzLmhpdmVUZXN0SWQ9XCJ0ZXN0SWRcIix0aGlzLmhpdmVEZXRlY3RQcml2YXRlSVA9XCJkZXRlY3RQcml2YXRlSVBcIn1yZXR1cm4gZX0oKTtlLm1wPWh9KGUuT3B0aW9uc3x8KGUuT3B0aW9ucz17fSkpfSh0LkhpdmVDb21tfHwodC5IaXZlQ29tbT17fSkpO3ZhciBoOyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7dC5lbmFibGVkUlVNPSExLHQuZW5hYmxlS2V5Q29tYmluYXRpb249ITAsdC5lbmFibGVkRXJyb3JGaWx0ZXI9ITAsZS5FcnJvck1vbml0b3I9dH0oaD10LkhpdmVDb25maWd8fCh0LkhpdmVDb25maWc9e30pKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYodm9pZCAwPT09d2luZG93LkhpdmVDb25maWcmJih3aW5kb3cuSGl2ZUNvbmZpZz17fSksd2luZG93LkhpdmVDb25maWcuRXJyb3JNb25pdG9yPWguRXJyb3JNb25pdG9yKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZVt0XT1hcmd1bWVudHNbdF07Zm9yKHZhciByPWVbMF0saT0xO2k8ZS5sZW5ndGg7aSsrKXt2YXIgbj1uZXcgUmVnRXhwKFwiXFxcXHtcIisoaS0xKStcIlxcXFx9XCIsXCJnbVwiKTtyPXIucmVwbGFjZShuLGVbaV0pfXJldHVybiByfWZ1bmN0aW9uIG4oZSx0KXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiZ0Lmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX1mdW5jdGlvbiBzKGUsdCxyKXt2YXIgaT1uZXcgZChlKS5xdWVyeSghMCk7Zm9yKHZhciBuIGluIGkpdHJ5e2lmKGkuaGFzT3duUHJvcGVydHkobikmJnQuaGFzT3duUHJvcGVydHkobikmJnIuaGFzT3duUHJvcGVydHkodFtuXSkpe3ZhciBzPXRbbl0sYT1pW25dO3Jbc109byhhLHJbc10pfX1jYXRjaChlKXt9fWZ1bmN0aW9uIG8oZSx0KXt2YXIgcjtzd2l0Y2godHlwZW9mIHQpe2Nhc2VcIm51bWJlclwiOnI9cGFyc2VJbnQoZSk7YnJlYWs7Y2FzZVwiYm9vbGVhblwiOnI9XCJ0cnVlXCI9PT1lO2JyZWFrO2RlZmF1bHQ6cj1lfXJldHVybiByfWZ1bmN0aW9uIGEoZSx0KXtmdW5jdGlvbiByKCl7aWYoIWUoKSlyZXR1cm4gaS5yZXNvbHZlKCEwKTtwLndoZW4odCgpLHIsaS5yZWplY3QpfXZhciBpPXAuZGVmZXIoKTtyZXR1cm4gcC5UcyhyKSxpLlNzfWZ1bmN0aW9uIGgoZSx0LHIsaSl7cmV0dXJuIHZvaWQgMD09PXImJihyPSEwKSx2b2lkIDA9PT1pJiYoaT17fSksYyhcIkdFVFwiLGUsdCxyLGkpfWZ1bmN0aW9uIGMoZSx0LHIsaSxuKXt2b2lkIDA9PT1pJiYoaT0hMCksdm9pZCAwPT09biYmKG49e30pO3ZhciBzPXAuZGVmZXIoKTt0cnl7dmFyIG89bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKG8ub3BlbihlLHQsaSksdm9pZCAwIT1yJiZudWxsIT1yJiZvLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixyKSxuKWZvcih2YXIgYSBpbiBuKW4uaGFzT3duUHJvcGVydHkoYSkmJm51bGwhPT1uW2FdJiZvLnNldFJlcXVlc3RIZWFkZXIoYSxuW2FdKTtvLm9ubG9hZD1mdW5jdGlvbigpezIwMD09by5zdGF0dXM/cy5yZXNvbHZlKG8ucmVzcG9uc2UpOnMucmVqZWN0KHtzdGF0dXM6by5zdGF0dXMscmVhc29uOm8uc3RhdHVzVGV4dCxib2R5Om8ucmVzcG9uc2VUZXh0fSl9LG8ub25lcnJvcj1mdW5jdGlvbihlKXtzLnJlamVjdCh7c3RhdHVzOi0xLHJlYXNvbjpcIk5ldHdvcmsgRXJyb3JcIn0pfSxvLnNlbmQoKX1jYXRjaChlKXtzLnJlamVjdCh7c3RhdHVzOi0xLHJlYXNvbjplfSl9cmV0dXJuIHMuU3N9ZnVuY3Rpb24gdShlLHQscixpLG4pe3ZvaWQgMD09PW4mJihuPSEwKTt2YXIgcz1wLmRlZmVyKCk7dHJ5e3ZhciBvPW5ldyBYTUxIdHRwUmVxdWVzdDtpZihvLm9wZW4oXCJQT1NUXCIsZSxuKSx2b2lkIDAhPXImJm51bGwhPXImJm8uc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLHIpLHZvaWQgMCE9aSYmbnVsbCE9aSlmb3IodmFyIGEgaW4gaSlpLmhhc093blByb3BlcnR5KGEpJiZudWxsIT09aVthXSYmby5zZXRSZXF1ZXN0SGVhZGVyKGEsaVthXSk7by5vbmxvYWQ9ZnVuY3Rpb24oKXsyMDA9PW8uc3RhdHVzP3MucmVzb2x2ZShvLnJlc3BvbnNlKTpzLnJlamVjdCh7c3RhdHVzOm8uc3RhdHVzLHJlYXNvbjpvLnN0YXR1c1RleHR9KX0sby5vbmVycm9yPWZ1bmN0aW9uKGUpe3MucmVqZWN0KHtzdGF0dXM6LTEscmVhc29uOlwiTmV0d29yayBFcnJvclwifSl9LG8uc2VuZCh0KX1jYXRjaChlKXtzLnJlamVjdCh7c3RhdHVzOi0xLHJlYXNvbjplfSl9cmV0dXJuIHMuU3N9ZnVuY3Rpb24gbChlLHQpe3ZhciByLGksbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYmFzZVwiKSxzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIpLG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksYT1uO3JldHVybiBuP3I9bi5ocmVmOmE9cy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYmFzZVwiKSksYS5ocmVmPWUsby5ocmVmPXQsaT1vLmhyZWYsbj9uLmhyZWY9cjpzLnJlbW92ZUNoaWxkKGEpLGl9dmFyIHA9cig0KSxkPXIoMzApO3QuSXA9aSx0LlNwPW4sdC5ScD1zLHQud3A9YSx0LmJwPWgsdC5DcD1jLHQuX3A9dSx0LiRoPWx9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLmh1fHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKGVbaV09dFtpXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXIoMTgpLHM9cig0NCkuUHAsbz1yKDQpLGE9cigwKSxoPXIoOCksYz1yKDI3KSx1PXIoMjMpLGw9cigxNCk7IWZ1bmN0aW9uKGUpe2UuQXA9XCJoaXZlLWNsaWVudC10cmFja1wiLGUuT3A9XCJ0cmFja2V2ZW50XCIsZS5OcD1cIk5VTExJRFwiLGUuRHA9XCJcIjt2YXIgdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7dC5rcD0wLHQuTHA9MSx0Lk1wPTIsdC5GcD0xMDAsdC5VcD0yMDAsZS5CcD10OyFmdW5jdGlvbihlKXtlW2UuSHA9MF09XCJQTEFZSU5HXCIsZVtlLnhwPTFdPVwiQlVGRkVSSU5HXCIsZVtlLnFwPTJdPVwiUEFVU0VEXCIsZVtlLkdwPTNdPVwiU0tJUFwiLGVbZS5WcD00XT1cIlNUT1BQRURcIixlW2UuRVJST1I9NV09XCJFUlJPUlwiLGVbZS5qcD02XT1cIldJTkRPV19TSVpFXCIsZVtlLlFwPTddPVwiRlVMTFNDUkVFTlwiLGVbZS5LcD04XT1cIlZJU0lCTEVcIixlW2UuSElEREVOPTldPVwiSElEREVOXCJ9KGUuWXB8fChlLllwPXt9KSk7IWZ1bmN0aW9uKGUpe2VbZS5XcD0wXT1cIkpBVkFfTk9UX1JFQUNIQUJMRVwiLGVbZS56cD0xXT1cIkpBVkFfTk9UX1JFQURZXCIsZVtlLkpwPTJdPVwiSkFWQV9XUk9OR19WRVJTSU9OXCIsZVtlLlhwPTNdPVwiSkFWQV9TRVNTSU9OX0JVU1lcIixlW2UuWnA9NF09XCJKQVZBX1NFU1NJT05fRVJST1JcIixlW2UuJHA9NV09XCJKQVZBX1RJQ0tFVF9USU1FT1VUXCJ9KGUudGR8fChlLnRkPXt9KSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO2UucmQ9cjt2YXIgcD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7ZS5uZD1wO3ZhciBkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtlLnNkPWQ7dmFyIGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy50eXBlPXQuTXB9cmV0dXJuIGV9KCksZz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLnNlc3Npb25zPW5ldyBBcnJheX1yZXR1cm4gZS5wcm90b3R5cGUub2Q9ZnVuY3Rpb24oZSx0KXt2YXIgcjt0aGlzLnNlc3Npb25zLmZvckVhY2goZnVuY3Rpb24odCl7dC5zZXNzaW9uSWQ9PWUmJihyPXQpfSkscnx8KHI9bmV3IEUsci5zZXNzaW9uSWQ9ZSx0aGlzLnNlc3Npb25zLnB1c2gocikpLHIuZXZlbnRzLnB1c2godCl9LGV9KCk7ZS5hZD1nO3ZhciBFPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuZXZlbnRzPW5ldyBBcnJheX1yZXR1cm4gZX0oKTtlLmhkPUU7dmFyIHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5sb2dnZXI9YS5GcmFtZXdvcmsucmVzb2x2ZShhLkZyYW1ld29yay5WLlIpLmxvZygpLHRoaXMudWQ9YS5GcmFtZXdvcmsucmVzb2x2ZShoLnBjLnNjKSx0aGlzLmxkPW5ldyBBcnJheSx0aGlzLnBkPW5ldyBBcnJheSx0aGlzLmRkPW5ldyBBcnJheX1yZXR1cm4gdC5wcm90b3R5cGUuZmQ9ZnVuY3Rpb24oZSl7dGhpcy5jbGllbnQ9ZX0sdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihlLHQpe3RoaXMuZ2Q9ZSx0aGlzLlZsKHQpLHRoaXMubG9nZ2VyLmRlYnVnKFwiW1RSQUNLXSBJTklUIElEOiBcIitlKX0sdC5wcm90b3R5cGUuVmw9ZnVuY3Rpb24oZSx0KXt0aGlzLmFwcD1lLHQmJih0aGlzLkVkPXQpfSx0LnByb3RvdHlwZS51cGRhdGVQbGF5ZXJJbmZvPWZ1bmN0aW9uKGUpe3RoaXMudmQ9ZX0sdC5wcm90b3R5cGUub3A9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFQoZSx0aGlzKTt0aGlzLmxkLnB1c2godCksdGhpcy55ZD1udWxsLHRoaXMuY2xpZW50LlRkKCEwKX0sdC5wcm90b3R5cGUuWHU9ZnVuY3Rpb24oZSx0LHIpe2lmKCF0aGlzLnlkKWZvcih2YXIgaT0wO2k8dGhpcy5sZC5sZW5ndGg7aSsrKXt2YXIgbj10aGlzLmxkW2ldO2lmKG4udGlja2V0LnNlc3Npb25JZD09PWUpe3RoaXMubG9nZ2VyLmRlYnVnKFwiW1RSQUNLXSBBY3RpdmF0aW5nIFRyYWNrIGZvciBzZXNzaW9uIFwiK2UpLHRoaXMueWQ9bjticmVha319aWYodGhpcy55ZCl7aWYodGhpcy55ZC50aWNrZXQuc2Vzc2lvbklkIT1lKXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLndhcm4oXCJbVFJBQ0tdIGlnbm9yaW5nIG1hbmlmZXN0IG5vdCBtYXRjaGluZyBldmVudCBcIit0aGlzLnlkLnRpY2tldC5zZXNzaW9uSWQrXCIgIT0gXCIrZSk7aWYoIXRoaXMueWQubWQpe3ZhciBzPW5ldyBtKGUsdCxyKTt0aGlzLnlkLklkKHMpLHRoaXMuY2xpZW50LlRkKCl9fX0sdC5wcm90b3R5cGUuU2Q9ZnVuY3Rpb24oZSx0LHIpe251bGwhPXRoaXMueWQmJih0aGlzLnlkLm1kfHx0aGlzLnlkLlJkLnB1c2gobmV3IHcoZSx0LHIpKSl9LHQucHJvdG90eXBlLndkPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLnBkLnB1c2gobmV3IFMoZSx0LHIpKSx0aGlzLmNsaWVudC5UZCgpfSx0LnByb3RvdHlwZS5iZD1mdW5jdGlvbihlLHQscil7dGhpcy5kZC5wdXNoKG5ldyBSKGUsdCxyKSksdGhpcy5jbGllbnQuVGQoKX0sdC5wcm90b3R5cGUuQ2Q9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlJiZlLmZvckVhY2goZnVuY3Rpb24oZSl7dC5kZC5wdXNoKGUpfSl9LHQucHJvdG90eXBlLlBkPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IHA7dGhpcy5FZD8oZS5wYXJ0bmVySWQ9dGhpcy5FZC5wYXJ0bmVySWQsZS5jdXN0b21lcklkPXRoaXMuRWQuY3VzdG9tZXJJZCk6bC5IaXZlQ29uZmlnLkNsaWVudEluZm8uY3UmJmwuSGl2ZUNvbmZpZy5DbGllbnRJbmZvLnV1PyhlLnBhcnRuZXJJZD1sLkhpdmVDb25maWcuQ2xpZW50SW5mby5jdSxlLmN1c3RvbWVySWQ9bC5IaXZlQ29uZmlnLkNsaWVudEluZm8udXUpOnRoaXMueWQmJihlLnBhcnRuZXJJZD10aGlzLnlkLnRpY2tldC51cCgpLGUuY3VzdG9tZXJJZD10aGlzLnlkLnRpY2tldC5jcCgpKSxlLnZlcnNpb249dGhpcy5hcHAuYXBwK1wiX1wiKyh0aGlzLkVkP3RoaXMuRWQudmVyc2lvbjp0aGlzLmFwcC52ZXJzaW9uKSx0aGlzLkVkJiYoZS5pbnN0YWxsVmVyc2lvbj10aGlzLkVkLmluc3RhbGxWZXJzaW9uLGUuaW5zdGFsbFRzPXRoaXMuRWQuaW5zdGFsbFRzKTt2YXIgdD1uZXcgcztyZXR1cm4gdC5BZChuYXZpZ2F0b3IudXNlckFnZW50KSxlLm9zPXQuT2QoKS5uYW1lK1wiIFwiK3QuT2QoKS52ZXJzaW9uLHRoaXMudmQmJihlLmNvbW1WZXJzaW9uPXRoaXMudmQuY29tbVZlcnNpb24sZS5wbHVnaW5OYW1lPXRoaXMudmQucGx1Z2luTmFtZSxlLnBsdWdpblZlcnNpb249dGhpcy52ZC5wbHVnaW5WZXJzaW9uLGUucGxheWVyVGVjaD10aGlzLnZkLnBsYXllclRlY2gsZS5wbGF5ZXJWZXJzaW9uPXRoaXMudmQucGxheWVyVmVyc2lvbix0aGlzLnZkLnRlbGVtZXRyeUlkJiYoZS50ZWxlbWV0cnlJZD10aGlzLnZkLnRlbGVtZXRyeUlkKSksZX0sdC5wcm90b3R5cGUuTmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy55ZD90aGlzLnlkOnRoaXMubGQmJnRoaXMubGQubGVuZ3RoPjA/dGhpcy5sZFt0aGlzLmxkLmxlbmd0aC0xXTp2b2lkIDB9LHQucHJvdG90eXBlLkRkPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXM7aWYodm9pZCAwPT09dCYmKHQ9ITApLDA9PXRoaXMubGQubGVuZ3RoJiYwPT10aGlzLnBkLmxlbmd0aClyZXR1cm4gdD9vLnJlamVjdChcIm5vdGhpbmcgdG8gc2VuZFwiKToodGhpcy5sb2dnZXIuZGVidWcoXCJbVFJBQ0tdICBOT1RISU5HIFRPIFNFTkRcIiksbnVsbCk7dmFyIG49bmV3IHI7bi5hcHA9ZS5BcCxuLmNyZWF0ZWRBdD1hLkZyYW1ld29yay50aW1lKCksbi5ndWlkPXRoaXMuZ2Qsbi5uYW1lPWUuT3A7dmFyIHM9dGhpcy5OZCgpO2lmKHMpe3ZhciBoPXMudGlja2V0LmtkKCkucmVwbGFjZSgvW1xcW1xcXV0vZyxcIlwiKTtuLnRhZ3M9W2hdLG4udGFncy5wdXNoKHMudGlja2V0LnVwKCkpLG4udGFncy5wdXNoKHMudGlja2V0LmNwKCkpfWVsc2Ugbi50YWdzPW5ldyBBcnJheTt2YXIgYz1uZXcgZztpZihjLnBlZXI9dGhpcy5QZCgpLHRoaXMubGQuZm9yRWFjaChmdW5jdGlvbihlKXtlLm1kfHxjLm9kKGUudGlja2V0LnNlc3Npb25JZCxlKX0pLHRoaXMucGQuZm9yRWFjaChmdW5jdGlvbihlKXtjLm9kKGUuc2Vzc2lvbklkLGUpfSksdGhpcy5kZC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Mub2QoZS5zZXNzaW9uSWQsZSl9KSxuLmRhdGE9Yyx0KXJldHVybiB0aGlzLnVkLmdldENvbm5lY3Rpdml0eUluZm8oKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PWkuTGQoZSk7cmV0dXJuIGMub2QoXCJudWxsXCIsdCksbn0pLmZhaWwoZnVuY3Rpb24oZSl7cmV0dXJuIG59KTt2YXIgdT10aGlzLkxkKHRoaXMudWQuTWQoKSk7cmV0dXJuIGMub2QoXCJudWxsXCIsdSksbn0sdC5wcm90b3R5cGUuTGQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGY7dC50cz1hLkZyYW1ld29yay50aW1lKCk7dmFyIHI9ZS5nZXROZXR3b3JrQ2hhbmdlZCgpO3JldHVybiByLmdldFB1YmxpY0lwKCkmJih0LnB1YklwPXIuZ2V0UHVibGljSXAoKSksci5nZXRQcml2YXRlSXAoKSYmKHQucHJpdklwPW4ua2wuZ2V0UHJpdmF0ZUlwKHIpKSxlLmdldEhvc3ROYW1lKCkmJih0Lmhvc3RuYW1lPW4ua2wuRGwoZSkpLHIuZ2V0Q2lkcigpJiYodC5uZXRtYXNrPXIuZ2V0Q2lkcigpKSxyLmdldE5pYygpJiYodC5uaWM9ci5nZXROaWMoKSksci5nZXROaWNOYW1lKCkmJih0Lm5pY05hbWU9ci5nZXROaWNOYW1lKCkpLHIuZ2V0TWFjQWRkcmVzcygpJiYodC5tYWM9ci5nZXRNYWNBZGRyZXNzKCkpLHR9LHQucHJvdG90eXBlLkZkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRWQ/dGhpcy5FZC51c2VyQWdlbnQ6bmF2aWdhdG9yLnVzZXJBZ2VudH0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmxkPW5ldyBBcnJheSx0aGlzLnBkPW5ldyBBcnJheSx0aGlzLmRkPW5ldyBBcnJheX0sdC5wcm90b3R5cGUuVWQ9ZnVuY3Rpb24oZSl7fSx0fSgpO2UuQmQ9djt2YXIgeT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5IZD1pc05hTihsLkhpdmVDb25maWcuRGVidWdMb2dzLlRyYWNrU25hcHNob3RMb2dzKT8wOmwuSGl2ZUNvbmZpZy5EZWJ1Z0xvZ3MuVHJhY2tTbmFwc2hvdExvZ3MsdGhpcy5IbD1lLHRoaXMubG9nZ2VyPWEuRnJhbWV3b3JrLnJlc29sdmUoYS5GcmFtZXdvcmsuVi5SKS5sb2coKSx0aGlzLmNsaWVudD1hLkZyYW1ld29yay5yZXNvbHZlKGgucGMuRyksdGhpcy5IbC5mZCh0aGlzKX1yZXR1cm4gZS5wcm90b3R5cGUuVGQ9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9ITEpO3ZhciB0PWU/Yy5HZC5xZC54ZDpjLkdkLnFkLlZkO2lmKHRoaXMuamQpe3RoaXMuUWQtKG5ldyBEYXRlKS5nZXRUaW1lKCk+dCYmKGEuRnJhbWV3b3JrLmNsZWFyVGltZW91dCh0aGlzLmpkKSx0aGlzLlFkPW51bGwsdGhpcy5LZCh0KSl9ZWxzZSB0aGlzLktkKHQpfSxlLnByb3RvdHlwZS5ZZD1mdW5jdGlvbigpe3RoaXMuamQmJihhLkZyYW1ld29yay5jbGVhclRpbWVvdXQodGhpcy5qZCksdGhpcy5RZD10aGlzLmpkPW51bGwpfSxlLnByb3RvdHlwZS5LZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuamQ9YS5GcmFtZXdvcmsuc2V0VGltZW91dChmdW5jdGlvbigpe3QuV2QoKX0sZSksdGhpcy5RZD0obmV3IERhdGUpLmdldFRpbWUoKStlfSxlLnByb3RvdHlwZS5XZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3ZvaWQgMD09PWUmJihlPSEwKSx0aGlzLmpkPW51bGwsdGhpcy5RZD1udWxsO3ZhciByPXRoaXMuSGwuRGQoZSk7ZT8odGhpcy5sb2dnZXIuZGVidWcoXCJbVFJBQ0tdIFRBS0lORyBBIFRSQUNLIFNOQVBTSE9UXCIpLHIudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5mb3J3YXJkKGUpfSkuZmFpbChmdW5jdGlvbihlKXt0LmxvZ2dlci5kZWJ1ZyhcIltUUkFDS10gIEVSUk9SIEdFTkVSQVRJTkcvU0VORElORyBUSEUgVFJBQ0sgU05BUFNIT1Q6IFwiLGUpfSkuZmluYWxseShmdW5jdGlvbigpe3JldHVybiB0LkhsLnJlc2V0KCl9KS5kb25lKCkpOih0aGlzLmxvZ2dlci5kZWJ1ZyhcIltUUkFDS10gRkxVU0hJTkcgVFJBQ0sgU05BUFNIT1RcIiksdGhpcy5mb3J3YXJkKHIpLHRoaXMuSGwucmVzZXQoKSl9LGUucHJvdG90eXBlLmZvcndhcmQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5jbGllbnQmJnRoaXMuY2xpZW50LnpkKCkmJmUpe3ZhciB0PUpTT04uc3RyaW5naWZ5KGUpO3N3aXRjaCh0aGlzLkhkKXtjYXNlIDA6ZGVmYXVsdDp0aGlzLmxvZ2dlci5kZWJ1ZyhcIltUUkFDS10gVFJBQ0sgRVZFTlRcIik7YnJlYWs7Y2FzZSAxOnRoaXMubG9nZ2VyLmRlYnVnKFwiW1RSQUNLXSBUUkFDSyBFVkVOVDpcIit0KX12YXIgcj1uZXcgdS5KZChTZXJ2aWNlcy5YZCwyLHQpO3RoaXMuY2xpZW50LnpkKCkuc2VuZChyKX19LGUucHJvdG90eXBlLlpkPWZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPSEwKSxlPyh0aGlzLllkKCksdGhpcy5LZChjLkdkLnFkLiRkKSk6dGhpcy5XZCghMSl9LGV9KCk7ZS5xbD15O3ZhciBUPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuY3JlYXRlZEF0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLHRoaXMubWQ9ITEsdGhpcy50aWNrZXQ9ZSx0aGlzLm1hbmlmZXN0cz1uZXcgQXJyYXksdGhpcy5SZD1uZXcgQXJyYXksdGhpcy5IbD10fXJldHVybiBlLnByb3RvdHlwZS5JZD1mdW5jdGlvbihlKXt0aGlzLm1hbmlmZXN0cy5wdXNoKGUpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT17fTtlLnR5cGU9dC5rcCxlLnRpY2tldD17fSxlLnRpY2tldC51cmw9dGhpcy50aWNrZXQudGlja2V0VXJsLGUudGlja2V0LnJlcVRzPXRoaXMudGlja2V0LmVmLGUudGlja2V0LnJlc3BUcz10aGlzLnRpY2tldC5yZixlLnRpY2tldC51c2VyQWdlbnQ9dGhpcy5IbC5GZCgpLG51bGwhPXRoaXMudGlja2V0LnRlc3RJZCYmKGUudGlja2V0LnRlc3RJZD10aGlzLnRpY2tldC50ZXN0SWQpLGUubWFuaWZlc3RzPVtdLHRoaXMubWFuaWZlc3RzLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9e307ci51cmw9dC51cmwsci5yZXNwVHM9dC5yZixyLnJlc3BDb2RlPXQucmVzcENvZGUsZS5tYW5pZmVzdHMucHVzaChyKX0pO3ZhciByPS0xLGk9LTEsbj0tMTtyZXR1cm4gdGhpcy5SZC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaWY+MCYmKC0xPT1yJiYocj1lLnRzLGk9ZS5pZiksbj1lLmlmKX0pLC0xIT1yJiYoZS5wbGF5VHM9ciksLTEhPW4mJihlLmJ1ZmZUaW1lPW4pLC0xIT1pJiYoZS5pbml0QnVmZlRpbWU9aSksZX0sZX0oKTtlLm5mPVQ7dmFyIG09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLmV2ZW50SWQ9ZSx0aGlzLnVybD10LHRoaXMucmY9KG5ldyBEYXRlKS5nZXRUaW1lKCksdGhpcy5yZXNwQ29kZT1yfXJldHVybiBlfSgpO2Uuc2Y9bTt2YXIgST1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSl7dGhpcy50cz0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLnNlc3Npb25JZD1lLHRoaXMuc2Vzc2lvbklkfHwodGhpcy5zZXNzaW9uSWQ9XCJudWxsXCIpLHRoaXMuZXZlbnQ9dCx0aGlzLmFmPXIsaSYmKHRoaXMudHM9aSl9cmV0dXJuIGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBlLnR5cGU9dGhpcy5oZit0aGlzLmV2ZW50LGUudHM9dGhpcy50cyx0aGlzLmFmJiYoZS5wYXJhbWV0ZXJzPXRoaXMuYWYpLGV9LGV9KCk7ZS5jZj1JO3ZhciBTPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIocixpLG4scyl7dmFyIG89ZS5jYWxsKHRoaXMscixpLG4scyl8fHRoaXM7cmV0dXJuIG8uaGY9dC5GcCxvfXJldHVybiBpKHIsZSkscn0oSSk7ZS51Zj1TO3ZhciBSPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIocixpLG4scyl7dmFyIG89ZS5jYWxsKHRoaXMscixpLG4scyl8fHRoaXM7cmV0dXJuIG8uaGY9dC5VcCxvfXJldHVybiBpKHIsZSkscn0oSSk7ZS5sZj1SO3ZhciB3PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy50cz0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLlBsPWUsdGhpcy5wZj10LHRoaXMuaWY9cn1yZXR1cm4gZX0oKTtlLmRmPXd9KHQuR2x8fCh0LkdsPXt9KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKCl7aWYodGhpcy5mZilyZXR1cm4gdGhpcy5mZjt2YXIgZT13aW5kb3cmJndpbmRvdy53aW5kb3c/d2luZG93LndpbmRvdy5nZjp2b2lkIDA7aWYodm9pZCAwIT09ZSYmZS5sb2cmJmUuZGVidWcmJmUuaW5mbyYmZS53YXJuJiZlLmVycm9yJiYodGhpcy5mZj1lKSwhdGhpcy5mZil7dmFyIHQ9ISh2b2lkIDA9PT13aW5kb3cuY29uc29sZSkscj10P2NvbnNvbGUubG9nLmJpbmQoY29uc29sZSk6ZnVuY3Rpb24oKXt9O3RoaXMuZmY9e2xvZzpyLGRlYnVnOnQmJndpbmRvdy5jb25zb2xlLmRlYnVnP3dpbmRvdy5jb25zb2xlLmRlYnVnLmJpbmQoY29uc29sZSk6cixpbmZvOnQmJndpbmRvdy5jb25zb2xlLmluZm8/d2luZG93LmNvbnNvbGUuaW5mby5iaW5kKGNvbnNvbGUpOnIsd2Fybjp0JiZ3aW5kb3cuY29uc29sZS53YXJuP3dpbmRvdy5jb25zb2xlLndhcm4uYmluZChjb25zb2xlKTpyLGVycm9yOnQmJndpbmRvdy5jb25zb2xlLmVycm9yP3dpbmRvdy5jb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSk6cn19cmV0dXJuIHRoaXMuZmZ9dmFyIG49cigxKSxzPXIoMik7dC5sb2dnZXJJZD1cIltIaXZlU2VydmljZXNdIFwiO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtvLkVmPTI1MCx0Lkw9bzt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMubXNnSWQ9dCx0aGlzLnNlcnZpY2U9ZSx0aGlzLm1zZz1yfXJldHVybiBlLnByb3RvdHlwZS52Zj1mdW5jdGlvbigpe3RyeXt2YXIgdD1uZXcgVWludDhBcnJheShbdGhpcy5zZXJ2aWNlPj44LDI1NSZ0aGlzLnNlcnZpY2VdKSxyPW5ldyBVaW50OEFycmF5KFt0aGlzLm1zZ0lkXSksaT1bdCxyLHRoaXMubXNnXTtyZXR1cm4gbmV3IEJsb2IoaSx7dHlwZTpcImFwcGxpY2F0aW9uL29jdGV0LWJpbmFyeVwifSl9Y2F0Y2godCl7dGhyb3cgbi5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHNlcmlhbGl6aW5nIG1lc3NhZ2UgdG8gc2VuZCB0byB0aGUgc2VydmljZXNcIixlLmxvZ2dlcklkLHMuaHMuYXMubnMsdCksbmV3IEVycm9yKHQpfX0sZS55Zj1mdW5jdGlvbih0KXt0cnl7dmFyIHI9KFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheSh0KSksU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KHQuc2xpY2UoMykpKSksaT1uZXcgVWludDhBcnJheSh0LnNsaWNlKDAsMikpLG89bmV3IFVpbnQ4QXJyYXkodC5zbGljZSgyLDMpKTtyZXR1cm4gbmV3IGUoKGlbMF08PDgpK2lbMV0sb1swXSxyKX1jYXRjaChlKXt0aHJvdyBuLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZXh0cmFjdGluZyBtZXNzYWdlIGZyb20gdGhlIHNlcnZpY2VzXCIsdGhpcy5sb2dnZXJJZCxzLmhzLmFzLnNzLGUpLG5ldyBFcnJvcihlKX19LGV9KCk7YS5sb2dnZXJJZD1cIltNZXNzYWdlXSBcIix0LkpkPWEsdC5sb2dnZXI9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMCksbj1yKDcpOyFmdW5jdGlvbihlKXtlW2UuVGY9MF09XCJVUFBFUl9MQVlFUlwiLGVbZS5tZj0xXT1cIkNETlwiLGVbZS5JZj0yXT1cIkNETl9QUkVGRVRDSFwiLGVbZS5TZj0zXT1cIkNETl9DT01QRU5TQVRJT05cIixlW2UuUmY9NF09XCJQMlBcIixlW2Uud2Y9NV09XCJQMlBfUFJFRkVUQ0hcIn0odC5iZnx8KHQuYmY9e30pKTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLkNmPSExLHRoaXMuX2Y9ITEsdGhpcy5QZj0wLHRoaXMuQWY9MCx0aGlzLk9mPTAsdGhpcy5OZj0wLHRoaXMuRGY9MCx0aGlzLnAycEFnZW5UcmFmZmljU3VjY2Vzc1F0PTAsdGhpcy5rZj0wLHRoaXMuc3JjT3RoZXJSZXNwUXQ9MCx0aGlzLkxmPTAsdGhpcy5NZj0wLHRoaXMuRmY9MCx0aGlzLlVmPTAsdGhpcy5CZj0wfXJldHVybiBlfSgpO3QuSGY9czt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbixvKXt0aGlzLnhmPSExLHRoaXMudHlwZT12b2lkIDAsdGhpcy5xZj1uZXcgcyx0aGlzLkdmPSExLHRoaXMuVmY9ITEsdGhpcy5yZXNwb25zZUhlYWRlcnM9XCJcIix0aGlzLmpmPW5ldyBBcnJheUJ1ZmZlcigwKSx0aGlzLlFmPTAsdGhpcy50eXBlPXIsdGhpcy5LZj1lLHRoaXMuWWY9dCx0aGlzLldmPW8sdGhpcy56Zj1uLHRoaXMucWYuTGY9aS5GcmFtZXdvcmsudGltZSgpfXJldHVybiBlLnByb3RvdHlwZS5KZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGV9LGUucHJvdG90eXBlLlhmPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuemYuWGYoKX0sZS5wcm90b3R5cGUuWmY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56Zi5aZigpfSxlLnByb3RvdHlwZS4kZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLlpmKCkrXCItXCIrdGhpcy5ZZn0sZS5wcm90b3R5cGUuZWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56Zi50ZygpfSxlLnByb3RvdHlwZS5yZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnpmLmlnKCl9LGUucHJvdG90eXBlLmxvYWRlZD1mdW5jdGlvbigpe3RoaXMubmc9aS5GcmFtZXdvcmsudGltZSgpfSxlLnByb3RvdHlwZS5zZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5nP01hdGgubWF4KDEsdGhpcy5uZy10aGlzLnFmLkZmKTpNYXRoLm1heCgxLHRoaXMucWYuVWYtdGhpcy5xZi5GZil9LGUucHJvdG90eXBlLm9nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmc/TWF0aC5tYXgoMSx0aGlzLm5nLXRoaXMucWYuTWYpOk1hdGgubWF4KDEsdGhpcy5xZi5VZi10aGlzLnFmLk1mKX0sZS5wcm90b3R5cGUuYWc9ZnVuY3Rpb24oKXtyZXR1cm4gMCE9dGhpcy5xZi5EZj8obmV3IG4ucmMuVmgpLk1oKHRoaXMuc2coKSx0aGlzLnFmLkRmKToobmV3IG4ucmMuVmgpLk1oKHRoaXMub2coKSx0aGlzLnFmLkFmKX0sZX0oKTt0LmhnPW99LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDE2MSksbj1yKDM1KSxzPXIoMjgpLG89cy5jZyxhPXIoNCksaD1yKDApLGM9cigxNjMpLHU9cigxNjkpLGw9cig1KSxwPXIoNyksZD1yKDMpLGY9cigxNSksZz1yKDEpLEU9cigyKTshZnVuY3Rpb24oZSl7ZS51Zz0hMTt2YXIgdDshZnVuY3Rpb24oZSl7ZVtlLkhhdmU9MV09XCJIYXZlXCIsZVtlLkNodW5rPTJdPVwiQ2h1bmtcIixlW2UuUmVxdWVzdD0zXT1cIlJlcXVlc3RcIixlW2UuQ2FuY2VsPTRdPVwiQ2FuY2VsXCIsZVtlLkFjaz01XT1cIkFja1wiLGVbZS5DbG9zZT02XT1cIkNsb3NlXCIsZVtlLkRvTm90SGF2ZT03XT1cIkRvTm90SGF2ZVwiLGVbZS5sZz04XT1cIk91dFBhcnRSZXF1ZXN0XCIsZVtlLnBnPTldPVwiT3V0UGFydFJlc3BcIixlW2UuZGc9MTBdPVwiVURQSGFuZHNoYWtlUmVxXCIsZVtlLlVEUEhhbmRzaGFrZVJlc3BvbnNlPTExXT1cIlVEUEhhbmRzaGFrZVJlc3BvbnNlXCIsZVtlLlVEUFN3aXRjaExlYWRlcnNoaXBSZXF1ZXN0PTEyXT1cIlVEUFN3aXRjaExlYWRlcnNoaXBSZXF1ZXN0XCIsZVtlLmZnPTEzXT1cIlVEUFN3aXRjaEFja1wiLGVbZS5CaXRyYXRlPTE0XT1cIkJpdHJhdGVcIixlW2UuSGF2ZXM9MTVdPVwiSGF2ZXNcIixlW2UubmQ9MTZdPVwiUGVlckluZm9cIixlW2UuUGluZz0xN109XCJQaW5nXCIsZVtlLlBvbmc9MThdPVwiUG9uZ1wiLGVbZS5nZz0xOV09XCJOb1BhcnRuZXJSZXNwXCJ9KHQ9ZS5FZ3x8KGUuRWc9e30pKTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5sb2dnZXJJZD1cIltEaXNwYXRjaGVyTWFuYWdlcl0gXCIsdGhpcy52Zz1uZXcgZCx0aGlzLmxvZ2dlcj1oLkZyYW1ld29yay5yZXNvbHZlKGguRnJhbWV3b3JrLlYuUikubG9nKCksdGhpcy55Zz1lfXJldHVybiBlLnByb3RvdHlwZS5UZz1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9bnVsbCxyPWguRnJhbWV3b3JrLnJlc29sdmUoZi5xdS5fdSksaT1yLm1nKGUpO3JldHVybiBudWxsPT1pPyh0aGlzLmxvZ2dlci53YXJuKFwiTVNHIFJFQ0VJVkVEIEZST00gVU5LTk9XTiBTV0FSTVwiKSxudWxsKToodD1uZXcgYy5JZyhpLHRoaXMueWcuU2csdGhpcy55Zy5vdGhlckd1aWQsdGhpcy55ZyksdGhpcy52Zy5oYXMoZSl8fHRoaXMudmcuc2V0KGUsdCksdGhpcy52Zy5nZXQoZSkpfWNhdGNoKGUpe2cuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjcmVhdGluZyBuZXcgZGlzcGF0Y2hlclwiLHRoaXMubG9nZ2VySWQsRS5ocy50dC5ldCxlKX19LGUucHJvdG90eXBlLlJnPWZ1bmN0aW9uKGUpe3RoaXMudmcuZGVsZXRlKGUpfSxlLnByb3RvdHlwZS53Zz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy52Zy5nZXQoZSl9LGV9KCk7ZS5iZz1zO3ZhciB2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcigpe3RoaXMubG9nZ2VySWQ9XCJbVHJhbnNwb3J0XSBcIix0aGlzLkNnPW51bGwsdGhpcy5fZz1oLkZyYW1ld29yay5yZXNvbHZlKGguRnJhbWV3b3JrLlYuUiksdGhpcy5QZz1uZXcgcyh0aGlzKSx0aGlzLmZlPXIuQWcrKyx0aGlzLk9nPWguRnJhbWV3b3JrLnRpbWUoKX1yZXR1cm4gci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihlLHQpe3RoaXMuU2c9ZSx0aGlzLm90aGVyR3VpZD10LHRoaXMuTmc9aC5GcmFtZXdvcmsucmVzb2x2ZShoLkZyYW1ld29yay5WLkYpfSxyLnByb3RvdHlwZS5EZz1mdW5jdGlvbigpe3ZhciBlPSExO3JldHVybiB0aGlzLlBnLnZnLmZvckVhY2goZnVuY3Rpb24odCxyKXsodC5zZW5kZXIuRGcoKXx8dC5yZWNlaXZlci5EZygpKSYmKGU9ITApfSksZX0sci5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLlBnLnZnLmZvckVhY2goZnVuY3Rpb24oZSx0KXtlLnNlbmRlci5rZygpfSl9LHIucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLlBnLlJnKGUpLDA9PXRoaXMuUGcudmcubGVuZ3RoJiZ0aGlzLk5nLmRpc2Nvbm5lY3QodGhpcy5vdGhlckd1aWQpLGEoXCJva1wiKX0sci5wcm90b3R5cGUuTGc9ZnVuY3Rpb24ocixpLHMpe3RyeXt0aGlzLk9nPWguRnJhbWV3b3JrLnRpbWUoKTt2YXIgYT1zLnRjKCksYz1hLmJ5dGVMZW5ndGgsdT1vLkZnLk1nLmNyZWF0ZShhKSxwPW8uVWcodSksZD1uZXcgbjtkLkJnKHIpLGQuSGcoaSksZC5CZyhjKSxkLkhnKHAudG9TdHJpbmcoKSksZC5hcHBlbmQoYSksZC54ZygpO3ZhciBmPWQudGMoKSx2PXI9PT10LkNodW5rJiZoLkZyYW1ld29yay5DKCk/Zi5ieXRlTGVuZ3RoK2wuaGguRmEuRGE6Zi5ieXRlTGVuZ3RoO2UudWcmJnRoaXMuX2cubG9nKGkpLmRlYnVnKHRoaXMuZmUrXCIgU0VORCBNU0cgSUQgXCIrcitcIixcIit2K1wiIEhBU0ggXCIrcC50b1N0cmluZygpK1wiIFRPIFwiK3RoaXMub3RoZXJHdWlkKX1jYXRjaCh0KXtnLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY29uc3RydWN0aW5nIG1lc3NhZ2VcIix0aGlzLmxvZ2dlcklkLEUuaHMuJGUuemUse3FnOmUuRWdbcl19KX10cnl7dGhpcy5OZy5zZW5kKHRoaXMub3RoZXJHdWlkLGYsdil8fGcuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBtZXNzYWdlIGRyb3BwZWRcIix0aGlzLmxvZ2dlcklkLEUuaHMuJGUuSmUse3FnOmUuRWdbcl0sb3RoZXJHdWlkOnRoaXMub3RoZXJHdWlkfSl9Y2F0Y2godCl7Zy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHNlbmRpbmcgbWVzc2FnZVwiLHRoaXMubG9nZ2VySWQsRS5ocy4kZS5YZSx7cWc6ZS5FZ1tyXSxvdGhlckd1aWQ6dGhpcy5vdGhlckd1aWR9KSx0aGlzLl9nLmxvZyhpKS53YXJuKFwiRVJST1IgU0VORElORyBNRVNTQUdFIFRPIFwiK3RoaXMub3RoZXJHdWlkK1wiIFwiK3Quc3RhY2spfX0sci5wcm90b3R5cGUuR2c9ZnVuY3Rpb24oaSl7dmFyIHM9dGhpcztlLnVnJiZ0aGlzLl9nLmxvZygpLmRlYnVnKHRoaXMuZmUrXCIgR09UIE1TRyBcIitpLmJ5dGVMZW5ndGgpO3RyeXt2YXIgYT1oLkZyYW1ld29yay50aW1lKCk7dGhpcy5PZz1hLHRoaXMuVmcoaSkudGhlbihmdW5jdGlvbihjKXtpZihlLnVnJiZzLl9nLmxvZygpLmRlYnVnKHMuZmUrXCIgUkVDRUlWSU5HIFwiK2MuYnl0ZUxlbmd0aCtcIiBhZnRlciBcIisoaC5GcmFtZXdvcmsudGltZSgpLWEpKSxjLmJ5dGVMZW5ndGg+ci5qZyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlAyUCBNZXNzYWdlIHRvbyBiaWcgdG8gYmUgcHJvY2Vzc2VkXCIpO3ZhciBsPXMuQ2c7aWYobnVsbD09PWwpe3ZhciBkPW4ud3JhcChjKSxmPWQuUWcoKTtpZihlLnVnJiZzLl9nLmxvZygpLmRlYnVnKFwiTVNHIElEIFwiK2YpLGY+T2JqZWN0LmtleXModCkubGVuZ3RoKXJldHVybiBzLl9nLmxvZygpLndhcm4oXCJNU0cgT0YgV1JPTkcgSUQgUkVDRUlWRUQ6IFwiK2YpLHZvaWQocy5DZz1udWxsKTtpZihsPXMuQ2c9bmV3IHUuS2csbC5tc2dJZD1mLGwuc3dhcm1JZD1kLllnKCksbC5sZW5ndGg9ZC5RZygpLGwuaGFzaD1kLllnKCksbC5XZz1kLnRjKCksbC5sZW5ndGg+ci5qZyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlAyUCBNZXNzYWdlIHRvbyBiaWcgdG8gYmUgcHJvY2Vzc2VkXCIpO2UudWcmJnMuX2cubG9nKGwuc3dhcm1JZCkuZGVidWcoXCJNU0cgSUQgXCIrbC5tc2dJZCtcIiBMIFwiK2wubGVuZ3RoK1wiIFNXSUQgXCIrbC5zd2FybUlkK1wiIEggXCIrbC5oYXNoK1wiIFRSIFwiK2wuV2cuYnl0ZUxlbmd0aCl9ZWxzZXtpZihlLnVnJiZzLl9nLmxvZygpLmRlYnVnKFwiQVBQRU5ESU5HIFRPIFAyUCBNRVNTQUdFIFwiK2wubXNnSWQpLG51bGwhPWwuV2cuYnl0ZUxlbmd0aCYmbC5XZy5ieXRlTGVuZ3RoPnIuamcpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJQMlAgTWVzc2FnZSB0b28gYmlnIHRvIGJlIHByb2Nlc3NlZFwiKTtsLldnPXAucmMuYXBwZW5kQnVmZmVyKGwuV2csaSl9aWYobC5XZy5ieXRlTGVuZ3RoPT09bC5sZW5ndGgpe3ZhciBnPW8uRmcuTWcuY3JlYXRlKGwuV2cpO2lmKG8uVWcoZykudG9TdHJpbmcoKSE9PWwuaGFzaCl7cmV0dXJuIHZvaWQgcy5fZy5sb2cobC5zd2FybUlkKS53YXJuKFwiIElOVEVHUklUWSBDSEVDSyBGQUlMRUQgXCIpfXZhciBFPXMuUGcud2cobC5zd2FybUlkKTtFfHwoRT1zLlBnLlRnKGwuc3dhcm1JZCkscy5fZy5sb2cobC5zd2FybUlkKS5kZWJ1ZyhcIkNSRUFURUQgTkVXIERJU1BBVENIRVIgRk9SIFwiK3Mub3RoZXJHdWlkKSksRSYmRS5BcyhsKSxsLldnPW51bGwscy5DZz1udWxsfX0pfWNhdGNoKGUpe2cuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZWNlaXZpbmcgbWVzc2FnZVwiLHRoaXMubG9nZ2VySWQsRS5ocy4kZS5aZSxlKSx0aGlzLkNnPW51bGx9fSxyLnByb3RvdHlwZS5WZz1mdW5jdGlvbihlKXt2YXIgdD0haC5GcmFtZXdvcmsuQygpJiZuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImZpcmVmb3hcIik+LTEscj1hLmRlZmVyKCk7aWYodCl7dmFyIGk9bmV3IEZpbGVSZWFkZXI7aS5vbmxvYWQ9ZnVuY3Rpb24odCl7ZT10aGlzLnJlc3VsdCxyLnJlc29sdmUoZSl9LGkub25lcnJvcj1yLnJlamVjdCxpLnJlYWRBc0FycmF5QnVmZmVyKGUpfWVsc2Ugci5yZXNvbHZlKGUpO3JldHVybiByLlNzfSxyLnByb3RvdHlwZS56Zz1mdW5jdGlvbigpe3JldHVybiB0aGlzLk9nfSxyfSgpO3YuSmc9aS5aZyhyKDE3MCkpLlhnKFwiSGl2ZU1zZ3NcIiksdi5BZz0wLHYuamc9MTM2K01hdGguY2VpbCgxLjIqbC5oaC5GYS5EYSksZS5GYT12fSh0LlJmfHwodC5SZj17fSkpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk7IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIG9bZV19ZnVuY3Rpb24gcihlLHIsaSl7dmFyIG49bmV3IGE7cmV0dXJuIG4udGlja2V0VXJsPWUsbi5jb2RlPXIsbi5tZXNzYWdlPXQociksbi5kZXRhaWxlZE1lc3NhZ2U9aSxufXZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuc2F2aW5ncz0wLHRoaXMuY2RuUmVxdWVzdHM9MCx0aGlzLmNkblJlc3BvbnNlcz0wLHRoaXMuY2RuUmVzcG9uc2VFcnJvcnM9MCx0aGlzLmNkblJlc3BvbnNlQnl0ZXM9MCx0aGlzLnAycFJlcXVlc3RzPTAsdGhpcy5wMnBSZXNwb25zZXM9MCx0aGlzLnAycFJlc3BvbnNlRXJyb3JzPTAsdGhpcy5wMnBSZXNwb25zZUJ5dGVzPTAsdGhpcy5wYXJ0bmVycz17fX1yZXR1cm4gZX0oKTtlLiRnPWk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy51dWlkPVwiXCIsdGhpcy5zZW50Qnl0ZXM9MCx0aGlzLnJlY2VpdmVkQnl0ZXM9MCx0aGlzLnN1Y2Nlc3NUcmFuc2ZlcnM9MCx0aGlzLmZhaWxlZFRyYW5zZmVycz0wfXJldHVybiBlfSgpO2UuZUU9bjt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7ZS5IaXZlU2Vzc2lvbj1zOyFmdW5jdGlvbihlKXtlW2UudEU9MF09XCJHRU5FUklDX0VSUk9SXCIsZVtlLnJFPTFdPVwiTk9fVEVDSF9BVkFJTEFCTEVcIixlW2UuaUU9Ml09XCJOT19URUNIX1JFU09MVkVEXCIsZVtlLm5FPTNdPVwiVEVDSF9FUlJPUlwiLGVbZS5zRT00XT1cIlRJQ0tFVF9FUlJPUlwifShlLm9FfHwoZS5vRT17fSkpO3ZhciBvOyFmdW5jdGlvbihlKXtlW2VbXCJhRVwiXT0wXT1cIkdlbmVyaWMgVW5kZWZpbmVkIEVycm9yXCIsZVtlW1wiaEVcIl09MV09XCJObyBUZWNoIGF2YWlsYWJsZSB0byByZXNvbHZlIHRoZSB0aWNrZXRcIixlW2VbXCJjRVwiXT0yXT1cIk5vIGF2YWlsYWJsZSBUZWNoIGNvdWxkIHJlc29sdmVkIHRoZSB0aWNrZXRcIixlW2VbXCJ1RVwiXT0zXT1cIlN0b3BwZWQgcmVzb2x2aW5nIHNlc3Npb24gb24gbGFzdCB0ZWNoIG9uRXJyb3JcIixlW2VbXCJsRVwiXT00XT1cIlRoZSB0aWNrZXQgY291bGQgbm90IGJlIHJlc29sdmVkXCJ9KG98fChvPXt9KSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO2UuSGl2ZVNlc3Npb25FcnJvcj1hO3ZhciBoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuY29kZT1lLHRoaXMubWVzc2FnZT10fXJldHVybiBlfSgpO2UuSGl2ZVRlY2hFcnJvcj1oOyFmdW5jdGlvbihlKXtlW2UucEU9MF09XCJOT1RfUkVBRFlcIixlW2UuZEU9MV09XCJQTFVHSU5fRVJST1JcIixlW2UuZkU9Ml09XCJTRVNTSU9OX0VSUk9SXCIsZVtlLnNFPTNdPVwiVElDS0VUX0VSUk9SXCIsZVtlLmdFPTRdPVwiVkVSU0lPTl9FUlJPUlwiLGVbZS5FRT01XT1cIlRJTUVPVVRfRVJST1JcIn0oZS52RXx8KGUudkU9e30pKTshZnVuY3Rpb24oZSl7ZVtlLnlFPTBdPVwiT0tcIixlW2UuVEU9MV09XCJISVZFX05PVF9BTExPV0VEXCIsZVtlLm1FPTJdPVwiVElDS0VUX05PVF9SRVNPTFZFRFwiLGVbZS5JRT0zXT1cIlRJTUVPVVRfUkVTT0xWSU5HX1RJQ0tFVFwifShlLlNFfHwoZS5TRT17fSkpLGUuZ2V0SGl2ZVNlc3Npb25FcnJvck1lc3NhZ2U9dCxlLlNsPXI7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuUkU9ZX1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0UGx1Z2luU3RhdHVzQ29kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLlJFLmdldFN0YXR1c0NvZGUoKX0sZX0oKTtlLndFPWN9KGk9dC5IaXZlQ29tbXx8KHQuSGl2ZUNvbW09e30pKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYodm9pZCAwPT09d2luZG93LkhpdmVDb21tJiYod2luZG93LkhpdmVDb21tPXt9KSx3aW5kb3cuSGl2ZUNvbW0uZ2V0SGl2ZVNlc3Npb25FcnJvck1lc3NhZ2U9aS5nZXRIaXZlU2Vzc2lvbkVycm9yTWVzc2FnZSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDYpOyFmdW5jdGlvbihlKXtlLkVoPWkuaGUuRWgsZS5faD1pLmhlLl9oO3ZhciB0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTt0LmJFPVwid3NzOi8vYmVlLmhpdmVzdHJlYW1pbmcuY29tOjQ0My92MS9oaXZlanNcIix0LkNFPVwid3NzOi8vYmVlLXRlc3QuaGl2ZXN0cmVhbWluZy5jb206NDQzL3YxL2hpdmVqc1wiLHQuX0U9e2ljZVNlcnZlcnM6W3t1cmw6XCJzdHVuOnN0dW4uaGl2ZXN0cmVhbWluZy5jb206MzQ3OFwifV19LHQuUEU9M2U0LHQuVmQ9M2U1LHQueGQ9OGU0LHQuJGQ9MWUzLHQuQUU9M2U0LHQuT0U9MTAwLHQuTkU9MWU0LGUucWQ9dH0odC5HZHx8KHQuR2Q9e30pKX0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKGUsdCxyKXtudWxsIT1lJiYoXCJudW1iZXJcIj09dHlwZW9mIGU/dGhpcy5ERShlLHQscik6bnVsbD09dCYmXCJzdHJpbmdcIiE9dHlwZW9mIGU/dGhpcy5rRShlLDI1Nik6dGhpcy5rRShlLHQpKX1mdW5jdGlvbiBpKCl7cmV0dXJuIG5ldyByKG51bGwpfWZ1bmN0aW9uIG4oZSx0LHIsaSxuLHMpe2Zvcig7LS1zPj0wOyl7dmFyIG89dCp0aGlzW2UrK10rcltpXStuO249TWF0aC5mbG9vcihvLzY3MTA4ODY0KSxyW2krK109NjcxMDg4NjMmb31yZXR1cm4gbn1mdW5jdGlvbiBzKGUsdCxyLGksbixzKXtmb3IodmFyIG89MzI3NjcmdCxhPXQ+PjE1Oy0tcz49MDspe3ZhciBoPTMyNzY3JnRoaXNbZV0sYz10aGlzW2UrK10+PjE1LHU9YSpoK2MqbztoPW8qaCsoKDMyNzY3JnUpPDwxNSkrcltpXSsoMTA3Mzc0MTgyMyZuKSxuPShoPj4+MzApKyh1Pj4+MTUpK2EqYysobj4+PjMwKSxyW2krK109MTA3Mzc0MTgyMyZofXJldHVybiBufWZ1bmN0aW9uIG8oZSx0LHIsaSxuLHMpe2Zvcih2YXIgbz0xNjM4MyZ0LGE9dD4+MTQ7LS1zPj0wOyl7dmFyIGg9MTYzODMmdGhpc1tlXSxjPXRoaXNbZSsrXT4+MTQsdT1hKmgrYypvO2g9bypoKygoMTYzODMmdSk8PDE0KStyW2ldK24sbj0oaD4+MjgpKyh1Pj4xNCkrYSpjLHJbaSsrXT0yNjg0MzU0NTUmaH1yZXR1cm4gbn1mdW5jdGlvbiBhKGUpe3JldHVybiBDZS5jaGFyQXQoZSl9ZnVuY3Rpb24gaChlLHQpe3ZhciByPV9lW2UuY2hhckNvZGVBdCh0KV07cmV0dXJuIG51bGw9PXI/LTE6cn1mdW5jdGlvbiBjKGUpe2Zvcih2YXIgdD10aGlzLnQtMTt0Pj0wOy0tdCllW3RdPXRoaXNbdF07ZS50PXRoaXMudCxlLlQ9dGhpcy5UfWZ1bmN0aW9uIHUoZSl7dGhpcy50PTEsdGhpcy5UPWU8MD8tMTowLGU+MD90aGlzWzBdPWU6ZTwtMT90aGlzWzBdPWUrdGhpcy5MRTp0aGlzLnQ9MH1mdW5jdGlvbiBsKGUpe3ZhciB0PWkoKTtyZXR1cm4gdC5NRShlKSx0fWZ1bmN0aW9uIHAoZSx0KXt2YXIgaTtpZigxNj09dClpPTQ7ZWxzZSBpZig4PT10KWk9MztlbHNlIGlmKDI1Nj09dClpPTg7ZWxzZSBpZigyPT10KWk9MTtlbHNlIGlmKDMyPT10KWk9NTtlbHNle2lmKDQhPXQpcmV0dXJuIHZvaWQgdGhpcy5GRShlLHQpO2k9Mn10aGlzLnQ9MCx0aGlzLlQ9MDtmb3IodmFyIG49ZS5sZW5ndGgscz0hMSxvPTA7LS1uPj0wOyl7dmFyIGE9OD09aT8yNTUmZVtuXTpoKGUsbik7YTwwP1wiLVwiPT1lLmNoYXJBdChuKSYmKHM9ITApOihzPSExLDA9PW8/dGhpc1t0aGlzLnQrK109YTpvK2k+dGhpcy5VRT8odGhpc1t0aGlzLnQtMV18PShhJigxPDx0aGlzLlVFLW8pLTEpPDxvLHRoaXNbdGhpcy50KytdPWE+PnRoaXMuVUUtbyk6dGhpc1t0aGlzLnQtMV18PWE8PG8sKG8rPWkpPj10aGlzLlVFJiYoby09dGhpcy5VRSkpfTg9PWkmJjAhPSgxMjgmZVswXSkmJih0aGlzLlQ9LTEsbz4wJiYodGhpc1t0aGlzLnQtMV18PSgxPDx0aGlzLlVFLW8pLTE8PG8pKSx0aGlzLkJFKCkscyYmci5aRVJPLkhFKHRoaXMsdGhpcyl9ZnVuY3Rpb24gZCgpe2Zvcih2YXIgZT10aGlzLlQmdGhpcy54RTt0aGlzLnQ+MCYmdGhpc1t0aGlzLnQtMV09PWU7KS0tdGhpcy50fWZ1bmN0aW9uIGYoZSl7aWYodGhpcy5UPDApcmV0dXJuXCItXCIrdGhpcy5xRSgpLnRvU3RyaW5nKGUpO3ZhciB0O2lmKDE2PT1lKXQ9NDtlbHNlIGlmKDg9PWUpdD0zO2Vsc2UgaWYoMj09ZSl0PTE7ZWxzZSBpZigzMj09ZSl0PTU7ZWxzZXtpZig0IT1lKXJldHVybiB0aGlzLkdFKGUpO3Q9Mn12YXIgcixpPSgxPDx0KS0xLG49ITEscz1cIlwiLG89dGhpcy50LGg9dGhpcy5VRS1vKnRoaXMuVUUldDtpZihvLS0gPjApZm9yKGg8dGhpcy5VRSYmKHI9dGhpc1tvXT4+aCk+MCYmKG49ITAscz1hKHIpKTtvPj0wOyloPHQ/KHI9KHRoaXNbb10mKDE8PGgpLTEpPDx0LWgscnw9dGhpc1stLW9dPj4oaCs9dGhpcy5VRS10KSk6KHI9dGhpc1tvXT4+KGgtPXQpJmksaDw9MCYmKGgrPXRoaXMuVUUsLS1vKSkscj4wJiYobj0hMCksbiYmKHMrPWEocikpO3JldHVybiBuP3M6XCIwXCJ9ZnVuY3Rpb24gZygpe3ZhciBlPWkoKTtyZXR1cm4gci5aRVJPLkhFKHRoaXMsZSksZX1mdW5jdGlvbiBFKCl7cmV0dXJuIHRoaXMuVDwwP3RoaXMucUUoKTp0aGlzfWZ1bmN0aW9uIHYoZSl7dmFyIHQ9dGhpcy5ULWUuVDtpZigwIT10KXJldHVybiB0O3ZhciByPXRoaXMudDtpZigwIT0odD1yLWUudCkpcmV0dXJuIHRoaXMuVDwwPy10OnQ7Zm9yKDstLXI+PTA7KWlmKDAhPSh0PXRoaXNbcl0tZVtyXSkpcmV0dXJuIHQ7cmV0dXJuIDB9ZnVuY3Rpb24geShlKXt2YXIgdCxyPTE7cmV0dXJuIDAhPSh0PWU+Pj4xNikmJihlPXQscis9MTYpLDAhPSh0PWU+PjgpJiYoZT10LHIrPTgpLDAhPSh0PWU+PjQpJiYoZT10LHIrPTQpLDAhPSh0PWU+PjIpJiYoZT10LHIrPTIpLDAhPSh0PWU+PjEpJiYoZT10LHIrPTEpLHJ9ZnVuY3Rpb24gVCgpe3JldHVybiB0aGlzLnQ8PTA/MDp0aGlzLlVFKih0aGlzLnQtMSkreSh0aGlzW3RoaXMudC0xXV50aGlzLlQmdGhpcy54RSl9ZnVuY3Rpb24gbShlLHQpe3ZhciByO2ZvcihyPXRoaXMudC0xO3I+PTA7LS1yKXRbcitlXT10aGlzW3JdO2ZvcihyPWUtMTtyPj0wOy0tcil0W3JdPTA7dC50PXRoaXMudCtlLHQuVD10aGlzLlR9ZnVuY3Rpb24gSShlLHQpe2Zvcih2YXIgcj1lO3I8dGhpcy50Oysrcil0W3ItZV09dGhpc1tyXTt0LnQ9TWF0aC5tYXgodGhpcy50LWUsMCksdC5UPXRoaXMuVH1mdW5jdGlvbiBTKGUsdCl7dmFyIHIsaT1lJXRoaXMuVUUsbj10aGlzLlVFLWkscz0oMTw8biktMSxvPU1hdGguZmxvb3IoZS90aGlzLlVFKSxhPXRoaXMuVDw8aSZ0aGlzLnhFO2ZvcihyPXRoaXMudC0xO3I+PTA7LS1yKXRbcitvKzFdPXRoaXNbcl0+Pm58YSxhPSh0aGlzW3JdJnMpPDxpO2ZvcihyPW8tMTtyPj0wOy0tcil0W3JdPTA7dFtvXT1hLHQudD10aGlzLnQrbysxLHQuVD10aGlzLlQsdC5CRSgpfWZ1bmN0aW9uIFIoZSx0KXt0LlQ9dGhpcy5UO3ZhciByPU1hdGguZmxvb3IoZS90aGlzLlVFKTtpZihyPj10aGlzLnQpcmV0dXJuIHZvaWQodC50PTApO3ZhciBpPWUldGhpcy5VRSxuPXRoaXMuVUUtaSxzPSgxPDxpKS0xO3RbMF09dGhpc1tyXT4+aTtmb3IodmFyIG89cisxO288dGhpcy50Oysrbyl0W28tci0xXXw9KHRoaXNbb10mcyk8PG4sdFtvLXJdPXRoaXNbb10+Pmk7aT4wJiYodFt0aGlzLnQtci0xXXw9KHRoaXMuVCZzKTw8biksdC50PXRoaXMudC1yLHQuQkUoKX1mdW5jdGlvbiB3KGUsdCl7Zm9yKHZhciByPTAsaT0wLG49TWF0aC5taW4oZS50LHRoaXMudCk7cjxuOylpKz10aGlzW3JdLWVbcl0sdFtyKytdPWkmdGhpcy54RSxpPj49dGhpcy5VRTtpZihlLnQ8dGhpcy50KXtmb3IoaS09ZS5UO3I8dGhpcy50OylpKz10aGlzW3JdLHRbcisrXT1pJnRoaXMueEUsaT4+PXRoaXMuVUU7aSs9dGhpcy5UfWVsc2V7Zm9yKGkrPXRoaXMuVDtyPGUudDspaS09ZVtyXSx0W3IrK109aSZ0aGlzLnhFLGk+Pj10aGlzLlVFO2ktPWUuVH10LlQ9aTwwPy0xOjAsaTwtMT90W3IrK109dGhpcy5MRStpOmk+MCYmKHRbcisrXT1pKSx0LnQ9cix0LkJFKCl9ZnVuY3Rpb24gYihlLHQpe3ZhciBpPXRoaXMuYWJzKCksbj1lLmFicygpLHM9aS50O2Zvcih0LnQ9cytuLnQ7LS1zPj0wOyl0W3NdPTA7Zm9yKHM9MDtzPG4udDsrK3MpdFtzK2kudF09aS5WRSgwLG5bc10sdCxzLDAsaS50KTt0LlQ9MCx0LkJFKCksdGhpcy5UIT1lLlQmJnIuWkVSTy5IRSh0LHQpfWZ1bmN0aW9uIEMoZSl7Zm9yKHZhciB0PXRoaXMuYWJzKCkscj1lLnQ9Mip0LnQ7LS1yPj0wOyllW3JdPTA7Zm9yKHI9MDtyPHQudC0xOysrcil7dmFyIGk9dC5WRShyLHRbcl0sZSwyKnIsMCwxKTsoZVtyK3QudF0rPXQuVkUocisxLDIqdFtyXSxlLDIqcisxLGksdC50LXItMSkpPj10LkxFJiYoZVtyK3QudF0tPXQuTEUsZVtyK3QudCsxXT0xKX1lLnQ+MCYmKGVbZS50LTFdKz10LlZFKHIsdFtyXSxlLDIqciwwLDEpKSxlLlQ9MCxlLkJFKCl9ZnVuY3Rpb24gXyhlLHQsbil7dmFyIHM9ZS5hYnMoKTtpZighKHMudDw9MCkpe3ZhciBvPXRoaXMuYWJzKCk7aWYoby50PHMudClyZXR1cm4gbnVsbCE9dCYmdC5NRSgwKSx2b2lkKG51bGwhPW4mJnRoaXMuakUobikpO251bGw9PW4mJihuPWkoKSk7dmFyIGE9aSgpLGg9dGhpcy5ULGM9ZS5ULHU9dGhpcy5VRS15KHNbcy50LTFdKTt1PjA/KHMuUUUodSxhKSxvLlFFKHUsbikpOihzLmpFKGEpLG8uakUobikpO3ZhciBsPWEudCxwPWFbbC0xXTtpZigwIT1wKXt2YXIgZD1wKigxPDx0aGlzLktFKSsobD4xP2FbbC0yXT4+dGhpcy5ZRTowKSxmPXRoaXMuV0UvZCxnPSgxPDx0aGlzLktFKS9kLEU9MTw8dGhpcy5ZRSx2PW4udCxUPXYtbCxtPW51bGw9PXQ/aSgpOnQ7Zm9yKGEuekUoVCxtKSxuLkpFKG0pPj0wJiYobltuLnQrK109MSxuLkhFKG0sbikpLHIuT05FLnpFKGwsbSksbS5IRShhLGEpO2EudDxsOylhW2EudCsrXT0wO2Zvcig7LS1UPj0wOyl7dmFyIEk9blstLXZdPT1wP3RoaXMueEU6TWF0aC5mbG9vcihuW3ZdKmYrKG5bdi0xXStFKSpnKTtpZigoblt2XSs9YS5WRSgwLEksbixULDAsbCkpPEkpZm9yKGEuekUoVCxtKSxuLkhFKG0sbik7blt2XTwtLUk7KW4uSEUobSxuKX1udWxsIT10JiYobi5YRShsLHQpLGghPWMmJnIuWkVSTy5IRSh0LHQpKSxuLnQ9bCxuLkJFKCksdT4wJiZuLlpFKHUsbiksaDwwJiZyLlpFUk8uSEUobixuKX19fWZ1bmN0aW9uIFAoZSl7dmFyIHQ9aSgpO3JldHVybiB0aGlzLmFicygpLiRFKGUsbnVsbCx0KSx0aGlzLlQ8MCYmdC5KRShyLlpFUk8pPjAmJmUuSEUodCx0KSx0fWZ1bmN0aW9uIEEoZSl7dGhpcy5oPWV9ZnVuY3Rpb24gTyhlKXtyZXR1cm4gZS5UPDB8fGUuSkUodGhpcy5oKT49MD9lLmV2KHRoaXMuaCk6ZX1mdW5jdGlvbiBOKGUpe3JldHVybiBlfWZ1bmN0aW9uIEQoZSl7ZS4kRSh0aGlzLmgsbnVsbCxlKX1mdW5jdGlvbiBrKGUsdCxyKXtlLnR2KHQsciksdGhpcy5yZWR1Y2Uocil9ZnVuY3Rpb24gTChlLHQpe2UucnYodCksdGhpcy5yZWR1Y2UodCl9ZnVuY3Rpb24gTSgpe2lmKHRoaXMudDwxKXJldHVybiAwO3ZhciBlPXRoaXNbMF07aWYoMD09KDEmZSkpcmV0dXJuIDA7dmFyIHQ9MyZlO3JldHVybiB0PXQqKDItKDE1JmUpKnQpJjE1LHQ9dCooMi0oMjU1JmUpKnQpJjI1NSx0PXQqKDItKCg2NTUzNSZlKSp0JjY1NTM1KSkmNjU1MzUsdD10KigyLWUqdCV0aGlzLkxFKSV0aGlzLkxFLHQ+MD90aGlzLkxFLXQ6LXR9ZnVuY3Rpb24gRihlKXt0aGlzLmg9ZSx0aGlzLm52PWUuc3YoKSx0aGlzLm92PTMyNzY3JnRoaXMubnYsdGhpcy5hdj10aGlzLm52Pj4xNSx0aGlzLmh2PSgxPDxlLlVFLTE1KS0xLHRoaXMuY3Y9MiplLnR9ZnVuY3Rpb24gVShlKXt2YXIgdD1pKCk7cmV0dXJuIGUuYWJzKCkuekUodGhpcy5oLnQsdCksdC4kRSh0aGlzLmgsbnVsbCx0KSxlLlQ8MCYmdC5KRShyLlpFUk8pPjAmJnRoaXMuaC5IRSh0LHQpLHR9ZnVuY3Rpb24gQihlKXt2YXIgdD1pKCk7cmV0dXJuIGUuakUodCksdGhpcy5yZWR1Y2UodCksdH1mdW5jdGlvbiBIKGUpe2Zvcig7ZS50PD10aGlzLmN2OyllW2UudCsrXT0wO2Zvcih2YXIgdD0wO3Q8dGhpcy5oLnQ7Kyt0KXt2YXIgcj0zMjc2NyZlW3RdLGk9cip0aGlzLm92Kygocip0aGlzLmF2KyhlW3RdPj4xNSkqdGhpcy5vdiZ0aGlzLmh2KTw8MTUpJmUueEU7Zm9yKHI9dCt0aGlzLmgudCxlW3JdKz10aGlzLmguVkUoMCxpLGUsdCwwLHRoaXMuaC50KTtlW3JdPj1lLkxFOyllW3JdLT1lLkxFLGVbKytyXSsrfWUuQkUoKSxlLlhFKHRoaXMuaC50LGUpLGUuSkUodGhpcy5oKT49MCYmZS5IRSh0aGlzLmgsZSl9ZnVuY3Rpb24geChlLHQpe2UucnYodCksdGhpcy5yZWR1Y2UodCl9ZnVuY3Rpb24gcShlLHQscil7ZS50dih0LHIpLHRoaXMucmVkdWNlKHIpfWZ1bmN0aW9uIEcoKXtyZXR1cm4gMD09KHRoaXMudD4wPzEmdGhpc1swXTp0aGlzLlQpfWZ1bmN0aW9uIFYoZSx0KXtpZihlPjQyOTQ5NjcyOTV8fGU8MSlyZXR1cm4gci5PTkU7dmFyIG49aSgpLHM9aSgpLG89dC51dih0aGlzKSxhPXkoZSktMTtmb3Ioby5qRShuKTstLWE+PTA7KWlmKHQubHYobixzKSwoZSYxPDxhKT4wKXQucHYocyxvLG4pO2Vsc2V7dmFyIGg9bjtuPXMscz1ofXJldHVybiB0LmR2KG4pfWZ1bmN0aW9uIGooZSx0KXt2YXIgcjtyZXR1cm4gcj1lPDI1Nnx8dC5mdigpP25ldyBBKHQpOm5ldyBGKHQpLHRoaXMuZXhwKGUscil9ZnVuY3Rpb24gUShlKXt2YXIgdCxyLGksbj1cIlwiLHM9MDtmb3IodD0wO3Q8ZS5sZW5ndGgmJmUuY2hhckF0KHQpIT1BZTsrK3QpKGk9UGUuaW5kZXhPZihlLmNoYXJBdCh0KSkpPDB8fCgwPT1zPyhuKz1hKGk+PjIpLHI9MyZpLHM9MSk6MT09cz8obis9YShyPDwyfGk+PjQpLHI9MTUmaSxzPTIpOjI9PXM/KG4rPWEociksbis9YShpPj4yKSxyPTMmaSxzPTMpOihuKz1hKHI8PDJ8aT4+NCksbis9YSgxNSZpKSxzPTApKTtyZXR1cm4gMT09cyYmKG4rPWEocjw8MikpLG59ZnVuY3Rpb24gSyhlKXt2YXIgdCxyPVEoZSksaT1uZXcgQXJyYXk7Zm9yKHQ9MDsyKnQ8ci5sZW5ndGg7Kyt0KWlbdF09cGFyc2VJbnQoci5zdWJzdHJpbmcoMip0LDIqdCsyKSwxNik7cmV0dXJuIGl9LyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4gKi9cbmZ1bmN0aW9uIFkoZSx0KXtyZXR1cm4gbmV3IHIoZSx0KX1mdW5jdGlvbiBXKGUsdCl7aWYodDxlLmxlbmd0aCsxMSlyZXR1cm4gYWxlcnQoXCJNZXNzYWdlIHRvbyBsb25nIGZvciBSU0FcIiksbnVsbDtmb3IodmFyIGk9bmV3IEFycmF5LG49ZS5sZW5ndGgtMTtuPj0wJiZ0PjA7KXt2YXIgcz1lLmNoYXJDb2RlQXQobi0tKTtzPDEyOD9pWy0tdF09czpzPjEyNyYmczwyMDQ4PyhpWy0tdF09NjMmc3wxMjgsaVstLXRdPXM+PjZ8MTkyKTooaVstLXRdPTYzJnN8MTI4LGlbLS10XT1zPj42JjYzfDEyOCxpWy0tdF09cz4+MTJ8MjI0KX1pWy0tdF09MDtmb3IodmFyIG89bmV3IFNlY3VyZVJhbmRvbSxhPW5ldyBBcnJheTt0PjI7KXtmb3IoYVswXT0wOzA9PWFbMF07KW8uZ3YoYSk7aVstLXRdPWFbMF19cmV0dXJuIGlbLS10XT0yLGlbLS10XT0wLG5ldyByKGkpfWZ1bmN0aW9uIHooZSx0LHIpe2Zvcih2YXIgaT1cIlwiLG49MDtpLmxlbmd0aDx0OylpKz1yKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGUuY29uY2F0KFsoNDI3ODE5MDA4MCZuKT4+MjQsKDE2NzExNjgwJm4pPj4xNiwoNjUyODAmbik+PjgsMjU1Jm5dKSkpLG4rPTE7cmV0dXJuIGl9ZnVuY3Rpb24gSihlLHQsaSl7aWYoZS5sZW5ndGgrMipPZSsyPnQpdGhyb3dcIk1lc3NhZ2UgdG9vIGxvbmcgZm9yIFJTQVwiO3ZhciBuLHM9XCJcIjtmb3Iobj0wO248dC1lLmxlbmd0aC0yKk9lLTI7bis9MSlzKz1cIlxcMFwiO3ZhciBvPXJzdHJfc2hhMShcIlwiKStzK1wiXHUwMDAxXCIrZSxhPW5ldyBBcnJheShPZSk7KG5ldyBTZWN1cmVSYW5kb20pLmd2KGEpO3ZhciBoPXooYSxvLmxlbmd0aCxpfHxyc3RyX3NoYTEpLGM9W107Zm9yKG49MDtuPG8ubGVuZ3RoO24rPTEpY1tuXT1vLmNoYXJDb2RlQXQobileaC5jaGFyQ29kZUF0KG4pO3ZhciB1PXooYyxhLmxlbmd0aCxyc3RyX3NoYTEpLGw9WzBdO2ZvcihuPTA7bjxhLmxlbmd0aDtuKz0xKWxbbisxXT1hW25dXnUuY2hhckNvZGVBdChuKTtyZXR1cm4gbmV3IHIobC5jb25jYXQoYykpfWZ1bmN0aW9uIFgoKXt0aGlzLm49bnVsbCx0aGlzLmU9MCx0aGlzLmQ9bnVsbCx0aGlzLnY9bnVsbCx0aGlzLkV2PW51bGwsdGhpcy52dj1udWxsLHRoaXMueXY9bnVsbCx0aGlzLlR2PW51bGx9ZnVuY3Rpb24gWihlLHQpe3RoaXMubXY9ITAsXCJzdHJpbmdcIiE9dHlwZW9mIGU/KHRoaXMubj1lLHRoaXMuZT10KTpudWxsIT1lJiZudWxsIT10JiZlLmxlbmd0aD4wJiZ0Lmxlbmd0aD4wPyh0aGlzLm49WShlLDE2KSx0aGlzLmU9cGFyc2VJbnQodCwxNikpOmFsZXJ0KFwiSW52YWxpZCBSU0EgcHVibGljIGtleVwiKX1mdW5jdGlvbiAkKGUpe3JldHVybiBlLkl2KHRoaXMuZSx0aGlzLm4pfWZ1bmN0aW9uIGVlKGUpe3ZhciB0PVcoZSx0aGlzLm4uU3YoKSs3Pj4zKTtpZihudWxsPT10KXJldHVybiBudWxsO3ZhciByPXRoaXMuUnYodCk7aWYobnVsbD09cilyZXR1cm4gbnVsbDt2YXIgaT1yLnRvU3RyaW5nKDE2KTtyZXR1cm4gMD09KDEmaS5sZW5ndGgpP2k6XCIwXCIraX1mdW5jdGlvbiB0ZShlLHQpe3ZhciByPUooZSx0aGlzLm4uU3YoKSs3Pj4zLHQpO2lmKG51bGw9PXIpcmV0dXJuIG51bGw7dmFyIGk9dGhpcy5SdihyKTtpZihudWxsPT1pKXJldHVybiBudWxsO3ZhciBuPWkudG9TdHJpbmcoMTYpO3JldHVybiAwPT0oMSZuLmxlbmd0aCk/bjpcIjBcIitufWZ1bmN0aW9uIHJlKGUsdCl7Zm9yKHZhciByPVwiXCIsaT10LzQtZS5sZW5ndGgsbj0wO248aTtuKyspcis9XCIwXCI7cmV0dXJuIHIrZX1mdW5jdGlvbiBpZShlLHQpe3ZhciByPWZ1bmN0aW9uKGUpe3JldHVybiBLSlVSLmNyeXB0by5idi53dihlLHQpfShlKTtyZXR1cm4gdGhpcy5DdihyLHQpfWZ1bmN0aW9uIG5lKGUsdCl7dmFyIHI9S0pVUi5jcnlwdG8uYnYuX3YoZSx0LHRoaXMubi5TdigpKSxpPVkociwxNik7cmV0dXJuIHJlKHRoaXMuUHYoaSkudG9TdHJpbmcoMTYpLHRoaXMubi5TdigpKX1mdW5jdGlvbiBzZShlKXtyZXR1cm4gaWUuY2FsbCh0aGlzLGUsXCJzaGExXCIpfWZ1bmN0aW9uIG9lKGUpe3JldHVybiBpZS5jYWxsKHRoaXMsZSxcInNoYTI1NlwiKX1mdW5jdGlvbiBhZShlLHQscil7Zm9yKHZhciBpPVwiXCIsbj0wO2kubGVuZ3RoPHQ7KWkrPWhleHRvcnN0cihyKHJzdHJ0b2hleChlK1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLFsoNDI3ODE5MDA4MCZuKT4+MjQsKDE2NzExNjgwJm4pPj4xNiwoNjUyODAmbik+PjgsMjU1Jm5dKSkpKSxuKz0xO3JldHVybiBpfWZ1bmN0aW9uIGhlKGUsdCxyKXt2YXIgaT1mdW5jdGlvbihlKXtyZXR1cm4gS0pVUi5jcnlwdG8uYnYuQXYoZSx0KX0ocnN0cnRvaGV4KGUpKTtyZXR1cm4gdm9pZCAwPT09ciYmKHI9LTEpLHRoaXMuT3YoaSx0LHIpfWZ1bmN0aW9uIGNlKGUsdCxpKXt2YXIgbixzPWhleHRvcnN0cihlKSxvPXMubGVuZ3RoLGE9dGhpcy5uLlN2KCktMSxoPU1hdGguY2VpbChhLzgpLGM9ZnVuY3Rpb24oZSl7cmV0dXJuIEtKVVIuY3J5cHRvLmJ2LkF2KGUsdCl9O2lmKC0xPT09aXx8dm9pZCAwPT09aSlpPW87ZWxzZSBpZigtMj09PWkpaT1oLW8tMjtlbHNlIGlmKGk8LTIpdGhyb3dcImludmFsaWQgc2FsdCBsZW5ndGhcIjtpZihoPG8raSsyKXRocm93XCJkYXRhIHRvbyBsb25nXCI7dmFyIHU9XCJcIjtpPjAmJih1PW5ldyBBcnJheShpKSwobmV3IFNlY3VyZVJhbmRvbSkuZ3YodSksdT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyx1KSk7dmFyIGw9aGV4dG9yc3RyKGMocnN0cnRvaGV4KFwiXFwwXFwwXFwwXFwwXFwwXFwwXFwwXFwwXCIrcyt1KSkpLHA9W107Zm9yKG49MDtuPGgtaS1vLTI7bis9MSlwW25dPTA7dmFyIGQ9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcscCkrXCJcdTAwMDFcIit1LGY9YWUobCxkLmxlbmd0aCxjKSxnPVtdO2ZvcihuPTA7bjxkLmxlbmd0aDtuKz0xKWdbbl09ZC5jaGFyQ29kZUF0KG4pXmYuY2hhckNvZGVBdChuKTt2YXIgRT02NTI4MD4+OCpoLWEmMjU1O2ZvcihnWzBdJj1+RSxuPTA7bjxvO24rKylnLnB1c2gobC5jaGFyQ29kZUF0KG4pKTtyZXR1cm4gZy5wdXNoKDE4OCkscmUodGhpcy5QdihuZXcgcihnKSkudG9TdHJpbmcoMTYpLHRoaXMubi5TdigpKX1mdW5jdGlvbiB1ZShlLHQscil7dmFyIGk9bmV3IFg7cmV0dXJuIGkuTnYodCxyKSxpLlJ2KGUpfWZ1bmN0aW9uIGxlKGUsdCxyKXtyZXR1cm4gdWUoZSx0LHIpLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLFwiXCIpfWZ1bmN0aW9uIHBlKGUpe2Zvcih2YXIgdCBpbiBLSlVSLmNyeXB0by5idi5Edil7dmFyIHI9S0pVUi5jcnlwdG8uYnYuRHZbdF0saT1yLmxlbmd0aDtpZihlLnN1YnN0cmluZygwLGkpPT1yKXtyZXR1cm5bdCxlLnN1YnN0cmluZyhpKV19fXJldHVybltdfWZ1bmN0aW9uIGRlKGUsdCxyLGkpe3ZhciBuPWxlKHQscixpKSxzPXBlKG4pO2lmKDA9PXMubGVuZ3RoKXJldHVybiExO3ZhciBvPXNbMF0sYT1zWzFdO3JldHVybiBhPT1mdW5jdGlvbihlKXtyZXR1cm4gS0pVUi5jcnlwdG8uYnYud3YoZSxvKX0oZSl9ZnVuY3Rpb24gZmUoZSx0KXtyZXR1cm4gZGUodCxZKGUsMTYpLHRoaXMubi50b1N0cmluZygxNiksdGhpcy5lLnRvU3RyaW5nKDE2KSl9ZnVuY3Rpb24gZ2UoZSx0KXt0PXQucmVwbGFjZShOZSxcIlwiKSx0PXQucmVwbGFjZSgvWyBcXG5dKy9nLFwiXCIpO3ZhciByPVkodCwxNik7aWYoci5TdigpPnRoaXMubi5TdigpKXJldHVybiAwO3ZhciBpPXRoaXMuUnYociksbj1pLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLFwiXCIpLHM9cGUobik7aWYoMD09cy5sZW5ndGgpcmV0dXJuITE7dmFyIG89c1swXSxhPXNbMV07cmV0dXJuIGE9PWZ1bmN0aW9uKGUpe3JldHVybiBLSlVSLmNyeXB0by5idi53dihlLG8pfShlKX1mdW5jdGlvbiBFZShlLHQpe3Q9dC5yZXBsYWNlKE5lLFwiXCIpLHQ9dC5yZXBsYWNlKC9bIFxcbl0rL2csXCJcIik7dmFyIHI9WSh0LDE2KTtpZihyLlN2KCk+dGhpcy5uLlN2KCkpcmV0dXJuIDA7dmFyIGk9dGhpcy5SdihyKSxuPWkudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14xZiswMC8sXCJcIikscz1wZShuKTtpZigwPT1zLmxlbmd0aClyZXR1cm4hMTtzWzBdO3JldHVybiBzWzFdPT1lfWZ1bmN0aW9uIHZlKGUsdCxyLGkpe3ZhciBuPWZ1bmN0aW9uKGUpe3JldHVybiBLSlVSLmNyeXB0by5idi5BdihlLHIpfShyc3RydG9oZXgoZSkpO3JldHVybiB2b2lkIDA9PT1pJiYoaT0tMSksdGhpcy5rdihuLHQscixpKX1mdW5jdGlvbiB5ZShlLHQsaSxuKXt2YXIgcz1uZXcgcih0LDE2KTtpZihzLlN2KCk+dGhpcy5uLlN2KCkpcmV0dXJuITE7dmFyIG8sYT1mdW5jdGlvbihlKXtyZXR1cm4gS0pVUi5jcnlwdG8uYnYuQXYoZSxpKX0saD1oZXh0b3JzdHIoZSksYz1oLmxlbmd0aCx1PXRoaXMubi5TdigpLTEsbD1NYXRoLmNlaWwodS84KTtpZigtMT09PW58fHZvaWQgMD09PW4pbj1jO2Vsc2UgaWYoLTI9PT1uKW49bC1jLTI7ZWxzZSBpZihuPC0yKXRocm93XCJpbnZhbGlkIHNhbHQgbGVuZ3RoXCI7aWYobDxjK24rMil0aHJvd1wiZGF0YSB0b28gbG9uZ1wiO3ZhciBwPXRoaXMuUnYocykuTHYoKTtmb3Iobz0wO288cC5sZW5ndGg7bys9MSlwW29dJj0yNTU7Zm9yKDtwLmxlbmd0aDxsOylwLnVuc2hpZnQoMCk7aWYoMTg4IT09cFtsLTFdKXRocm93XCJlbmNvZGVkIG1lc3NhZ2UgZG9lcyBub3QgZW5kIGluIDB4YmNcIjtwPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLHApO3ZhciBkPXAuc3Vic3RyKDAsbC1jLTEpLGY9cC5zdWJzdHIoZC5sZW5ndGgsYyksZz02NTI4MD4+OCpsLXUmMjU1O2lmKDAhPShkLmNoYXJDb2RlQXQoMCkmZykpdGhyb3dcImJpdHMgYmV5b25kIGtleXNpemUgbm90IHplcm9cIjt2YXIgRT1hZShmLGQubGVuZ3RoLGEpLHY9W107Zm9yKG89MDtvPGQubGVuZ3RoO28rPTEpdltvXT1kLmNoYXJDb2RlQXQobyleRS5jaGFyQ29kZUF0KG8pO3ZbMF0mPX5nO3ZhciB5PWwtYy1uLTI7Zm9yKG89MDtvPHk7bys9MSlpZigwIT09dltvXSl0aHJvd1wibGVmdG1vc3Qgb2N0ZXRzIG5vdCB6ZXJvXCI7aWYoMSE9PXZbeV0pdGhyb3dcIjB4MDEgbWFya2VyIG5vdCBmb3VuZFwiO3JldHVybiBmPT09aGV4dG9yc3RyKGEocnN0cnRvaGV4KFwiXFwwXFwwXFwwXFwwXFwwXFwwXFwwXFwwXCIraCtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyx2LnNsaWNlKC1uKSkpKSl9dmFyIFRlPXt9O1RlLnVzZXJBZ2VudD0hMTt2YXIgbWU9e307aWYodm9pZCAwPT09SWV8fCFJZSl2YXIgSWU9e307SWUuTXY9ZnVuY3Rpb24oKXt2YXIgZSx0LHIsaT1hcmd1bWVudHMsbj1udWxsO2ZvcihlPTA7ZTxpLmxlbmd0aDtlKz0xKWZvcihyPShcIlwiK2lbZV0pLnNwbGl0KFwiLlwiKSxuPUllLHQ9XCJZQUhPT1wiPT1yWzBdPzE6MDt0PHIubGVuZ3RoO3QrPTEpbltyW3RdXT1uW3JbdF1dfHx7fSxuPW5bclt0XV07cmV0dXJuIG59LEllLmxvZz1mdW5jdGlvbihlLHQscil7dmFyIGk9SWUuVXYuRnY7cmV0dXJuISghaXx8IWkubG9nKSYmaS5sb2coZSx0LHIpfSxJZS5yZWdpc3Rlcj1mdW5jdGlvbihlLHQscil7dmFyIGksbixzLG8sYSxoPUllLk1zLkJ2O2ZvcihoW2VdfHwoaFtlXT17SHY6W10seHY6W119KSxpPWhbZV0sbj1yLnZlcnNpb24scz1yLlhnLG89SWUuTXMudmwsaS5uYW1lPWUsaS52ZXJzaW9uPW4saS5YZz1zLGkuSHYucHVzaChuKSxpLnh2LnB1c2gocyksaS5xdj10LGE9MDthPG8ubGVuZ3RoO2ErPTEpb1thXShpKTt0Pyh0LlZFUlNJT049bix0Lkd2PXMpOkllLmxvZyhcIm1haW5DbGFzcyBpcyB1bmRlZmluZWQgZm9yIG1vZHVsZSBcIitlLFwid2FyblwiKX0sSWUuTXM9SWUuTXN8fHtCdjpbXSx2bDpbXX0sSWUuTXMuZ2V0VmVyc2lvbj1mdW5jdGlvbihlKXtyZXR1cm4gSWUuTXMuQnZbZV18fG51bGx9LEllLk1zLlZ2PWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZnVuY3Rpb24oZSl7dmFyIHQ9MDtyZXR1cm4gcGFyc2VGbG9hdChlLnJlcGxhY2UoL1xcLi9nLGZ1bmN0aW9uKCl7cmV0dXJuIDE9PXQrKz9cIlwiOlwiLlwifSkpfSxpPVRlLG49e2p2OjAsb3BlcmE6MCxRdjowLEt2OjAsY2hyb21lOjAsWXY6bnVsbCxXdjowLHp2OjAsSnY6MCxYdjowLFp2Om51bGwsJHY6MCxleTowLHR5OmkmJmkuaXksbnk6ITEsb3M6bnVsbH0scz1lfHxUZSYmVGUudXNlckFnZW50LG89bWUmJm1lLmxvY2F0aW9uLGE9byYmby5ocmVmO3JldHVybiBuLm55PWEmJjA9PT1hLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImh0dHBzXCIpLHMmJigvd2luZG93c3x3aW4zMi9pLnRlc3Qocyk/bi5vcz1cIndpbmRvd3NcIjovbWFjaW50b3NoL2kudGVzdChzKT9uLm9zPVwibWFjaW50b3NoXCI6L3JoaW5vL2kudGVzdChzKSYmKG4ub3M9XCJyaGlub1wiKSwvS0hUTUwvLnRlc3QocykmJihuLkt2PTEpLHQ9cy5tYXRjaCgvQXBwbGVXZWJLaXRcXC8oW15cXHNdKikvKSx0JiZ0WzFdJiYobi5Ldj1yKHRbMV0pLC8gTW9iaWxlXFwvLy50ZXN0KHMpPyhuLll2PVwiQXBwbGVcIix0PXMubWF0Y2goL09TIChbXlxcc10qKS8pLHQmJnRbMV0mJih0PXIodFsxXS5yZXBsYWNlKFwiX1wiLFwiLlwiKSkpLG4uWnY9dCxuLnp2PW4uWHY9bi5Kdj0wLCh0PXMubWF0Y2goL2lQYWR8aVBvZHxpUGhvbmUvKSkmJnRbMF0mJihuW3RbMF0udG9Mb3dlckNhc2UoKV09bi5adikpOih0PXMubWF0Y2goL05va2lhTlteXFwvXSp8QW5kcm9pZCBcXGRcXC5cXGR8d2ViT1NcXC9cXGRcXC5cXGQvKSx0JiYobi5Zdj10WzBdKSwvd2ViT1MvLnRlc3QocykmJihuLll2PVwiV2ViT1NcIiwodD1zLm1hdGNoKC93ZWJPU1xcLyhbXlxcc10qKTsvKSkmJnRbMV0mJihuLmV5PXIodFsxXSkpKSwvIEFuZHJvaWQvLnRlc3QocykmJihuLll2PVwiQW5kcm9pZFwiLCh0PXMubWF0Y2goL0FuZHJvaWQgKFteXFxzXSopOy8pKSYmdFsxXSYmKG4uJHY9cih0WzFdKSkpKSx0PXMubWF0Y2goL0Nocm9tZVxcLyhbXlxcc10qKS8pLHQmJnRbMV0/bi5jaHJvbWU9cih0WzFdKToodD1zLm1hdGNoKC9BZG9iZUFJUlxcLyhbXlxcc10qKS8pKSYmKG4uV3Y9dFswXSkpLG4uS3Z8fCh0PXMubWF0Y2goL09wZXJhW1xcc1xcL10oW15cXHNdKikvKSx0JiZ0WzFdPyhuLm9wZXJhPXIodFsxXSksdD1zLm1hdGNoKC9WZXJzaW9uXFwvKFteXFxzXSopLyksdCYmdFsxXSYmKG4ub3BlcmE9cih0WzFdKSksKHQ9cy5tYXRjaCgvT3BlcmEgTWluaVteO10qLykpJiYobi5Zdj10WzBdKSk6KHQ9cy5tYXRjaCgvTVNJRVxccyhbXjtdKikvKSx0JiZ0WzFdP24uanY9cih0WzFdKToodD1zLm1hdGNoKC9HZWNrb1xcLyhbXlxcc10qKS8pKSYmKG4uUXY9MSwodD1zLm1hdGNoKC9ydjooW15cXHNcXCldKikvKSkmJnRbMV0mJihuLlF2PXIodFsxXSkpKSkpKSxufSxJZS5Ncy5zeT1JZS5Ncy5WdigpLGZ1bmN0aW9uKCl7aWYoSWUuTXYoXCJ1dGlsXCIsXCJ3aWRnZXRcIixcImV4YW1wbGVcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFlBSE9PX2NvbmZpZyl7dmFyIGUsdD1ZQUhPT19jb25maWcubGlzdGVuZXIscj1JZS5Ncy52bCxpPSEwO2lmKHQpe2ZvcihlPTA7ZTxyLmxlbmd0aDtlKyspaWYocltlXT09dCl7aT0hMTticmVha31pJiZyLnB1c2godCl9fX0oKSxJZS5sYW5nPUllLmxhbmd8fHt9LGZ1bmN0aW9uKCl7dmFyIGU9SWUubGFuZyx0PU9iamVjdC5wcm90b3R5cGUscj1bXSxpPXtveTpcIiZhbXA7XCIsYXk6XCImbHQ7XCIsaHk6XCImZ3Q7XCIsdXk6XCImcXVvdDtcIixseTpcIiYjeDI3O1wiLHB5OlwiJiN4MkY7XCIsZ3k6XCImI3g2MDtcIn0sbj1bXCJ0b1N0cmluZ1wiLFwidmFsdWVPZlwiXSxzPXtpc0FycmF5OmZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PXQudG9TdHJpbmcuYXBwbHkoZSl9LEV5OmZ1bmN0aW9uKGUpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZX0sdnk6ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZXx8XCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT09dC50b1N0cmluZy5hcHBseShlKX0seXk6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lfSxUeTpmdW5jdGlvbihlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmaXNGaW5pdGUoZSl9LGF1OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYoXCJvYmplY3RcIj09dHlwZW9mIHR8fGUudnkodCkpfHwhMX0sbXk6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9LEl5OmZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lfSxTeTpJZS5Ncy5zeS5qdj9mdW5jdGlvbihyLGkpe3ZhciBzLG8sYTtmb3Iocz0wO3M8bi5sZW5ndGg7cys9MSlvPW5bc10sYT1pW29dLGUudnkoYSkmJmEhPXRbb10mJihyW29dPWEpfTpmdW5jdGlvbigpe30sUnk6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvWyY8PlwiJ1xcL2BdL2csZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV19KX0sZXh0ZW5kOmZ1bmN0aW9uKHIsaSxuKXtpZighaXx8IXIpdGhyb3cgbmV3IEVycm9yKFwiZXh0ZW5kIGZhaWxlZCwgcGxlYXNlIGNoZWNrIHRoYXQgYWxsIGRlcGVuZGVuY2llcyBhcmUgaW5jbHVkZWQuXCIpO3ZhciBzLG89ZnVuY3Rpb24oKXt9O2lmKG8ucHJvdG90eXBlPWkucHJvdG90eXBlLHIucHJvdG90eXBlPW5ldyBvLHIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXIsci53eT1pLnByb3RvdHlwZSxpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj09dC5jb25zdHJ1Y3RvciYmKGkucHJvdG90eXBlLmNvbnN0cnVjdG9yPWkpLG4pe2ZvcihzIGluIG4pZS5oYXNPd25Qcm9wZXJ0eShuLHMpJiYoci5wcm90b3R5cGVbc109bltzXSk7ZS5TeShyLnByb3RvdHlwZSxuKX19LGJ5OmZ1bmN0aW9uKHQscil7aWYoIXJ8fCF0KXRocm93IG5ldyBFcnJvcihcIkFic29yYiBmYWlsZWQsIHZlcmlmeSBkZXBlbmRlbmNpZXMuXCIpO3ZhciBpLG4scz1hcmd1bWVudHMsbz1zWzJdO2lmKG8mJiEwIT09bylmb3IoaT0yO2k8cy5sZW5ndGg7aSs9MSl0W3NbaV1dPXJbc1tpXV07ZWxzZXtmb3IobiBpbiByKSFvJiZuIGluIHR8fCh0W25dPXJbbl0pO2UuU3kodCxyKX1yZXR1cm4gdH0sQ3k6ZnVuY3Rpb24odCxyKXtpZighcnx8IXQpdGhyb3cgbmV3IEVycm9yKFwiQXVnbWVudCBmYWlsZWQsIHZlcmlmeSBkZXBlbmRlbmNpZXMuXCIpO3ZhciBpLG49W3QucHJvdG90eXBlLHIucHJvdG90eXBlXTtmb3IoaT0yO2k8YXJndW1lbnRzLmxlbmd0aDtpKz0xKW4ucHVzaChhcmd1bWVudHNbaV0pO3JldHVybiBlLmJ5LmFwcGx5KHRoaXMsbiksdH0sZHVtcDpmdW5jdGlvbih0LHIpe3ZhciBpLG4scz1bXSxvPVwiey4uLn1cIjtpZighZS5hdSh0KSlyZXR1cm4gdCtcIlwiO2lmKHQgaW5zdGFuY2VvZiBEYXRlfHxcIm5vZGVUeXBlXCJpbiB0JiZcInRhZ05hbWVcImluIHQpcmV0dXJuIHQ7aWYoZS52eSh0KSlyZXR1cm5cImYoKXsuLi59XCI7aWYocj1lLlR5KHIpP3I6MyxlLmlzQXJyYXkodCkpe2ZvcihzLnB1c2goXCJbXCIpLGk9MCxuPXQubGVuZ3RoO2k8bjtpKz0xKWUuYXUodFtpXSk/cy5wdXNoKHI+MD9lLmR1bXAodFtpXSxyLTEpOm8pOnMucHVzaCh0W2ldKSxzLnB1c2goXCIsIFwiKTtzLmxlbmd0aD4xJiZzLnBvcCgpLHMucHVzaChcIl1cIil9ZWxzZXtzLnB1c2goXCJ7XCIpO2ZvcihpIGluIHQpZS5oYXNPd25Qcm9wZXJ0eSh0LGkpJiYocy5wdXNoKGkrXCIgPT4gXCIpLGUuYXUodFtpXSk/cy5wdXNoKHI+MD9lLmR1bXAodFtpXSxyLTEpOm8pOnMucHVzaCh0W2ldKSxzLnB1c2goXCIsIFwiKSk7cy5sZW5ndGg+MSYmcy5wb3AoKSxzLnB1c2goXCJ9XCIpfXJldHVybiBzLmpvaW4oXCJcIil9LF95OmZ1bmN0aW9uKHQscixpLG4pe2Zvcih2YXIgcyxvLGEsaCxjLHUsbCxwLGQsZj1bXSxnPXQubGVuZ3RoOyEoKHM9dC5sYXN0SW5kZXhPZihcIntcIixnKSk8MCkmJihvPXQuaW5kZXhPZihcIn1cIixzKSwhKHMrMT5vKSk7KWw9dC5zdWJzdHJpbmcocysxLG8pLGg9bCx1PW51bGwsYT1oLmluZGV4T2YoXCIgXCIpLGE+LTEmJih1PWguc3Vic3RyaW5nKGErMSksaD1oLnN1YnN0cmluZygwLGEpKSxjPXJbaF0saSYmKGM9aShoLGMsdSkpLGUuYXUoYyk/ZS5pc0FycmF5KGMpP2M9ZS5kdW1wKGMscGFyc2VJbnQodSwxMCkpOih1PXV8fFwiXCIscD11LmluZGV4T2YoXCJkdW1wXCIpLHA+LTEmJih1PXUuc3Vic3RyaW5nKDQpKSxkPWMudG9TdHJpbmcoKSxjPVwiW29iamVjdCBPYmplY3RdXCI9PT1kfHxwPi0xP2UuZHVtcChjLHBhcnNlSW50KHUsMTApKTpkKTplLm15KGMpfHxlLlR5KGMpfHwoYz1cIn4tXCIrZi5sZW5ndGgrXCItflwiLGZbZi5sZW5ndGhdPWwpLHQ9dC5zdWJzdHJpbmcoMCxzKStjK3Quc3Vic3RyaW5nKG8rMSksITE9PT1uJiYoZz1zLTEpO2ZvcihzPWYubGVuZ3RoLTE7cz49MDtzLT0xKXQ9dC5yZXBsYWNlKG5ldyBSZWdFeHAoXCJ+LVwiK3MrXCItflwiKSxcIntcIitmW3NdK1wifVwiLFwiZ1wiKTtyZXR1cm4gdH0sdHJpbTpmdW5jdGlvbihlKXt0cnl7cmV0dXJuIGUucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX1jYXRjaCh0KXtyZXR1cm4gZX19LFB5OmZ1bmN0aW9uKCl7dmFyIHQscj17fSxpPWFyZ3VtZW50cyxuPWkubGVuZ3RoO2Zvcih0PTA7dDxuO3QrPTEpZS5ieShyLGlbdF0sITApO3JldHVybiByfSxBeTpmdW5jdGlvbih0LGksbixzLG8pe3Q9dHx8MCxpPWl8fHt9O3ZhciBhLGgsYz1uLHU9cztpZihlLm15KG4pJiYoYz1pW25dKSwhYyl0aHJvdyBuZXcgVHlwZUVycm9yKFwibWV0aG9kIHVuZGVmaW5lZFwiKTtyZXR1cm4gZS5JeShzKXx8ZS5pc0FycmF5KHUpfHwodT1bc10pLGE9ZnVuY3Rpb24oKXtjLmFwcGx5KGksdXx8cil9LGg9bz9zZXRJbnRlcnZhbChhLHQpOnNldFRpbWVvdXQoYSx0KSx7aW50ZXJ2YWw6byxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmludGVydmFsP2NsZWFySW50ZXJ2YWwoaCk6Y2xlYXJUaW1lb3V0KGgpfX19LE95OmZ1bmN0aW9uKHQpe3JldHVybiBlLmF1KHQpfHxlLm15KHQpfHxlLlR5KHQpfHxlLkV5KHQpfX07ZS5oYXNPd25Qcm9wZXJ0eT10Lmhhc093blByb3BlcnR5P2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJmUuaGFzT3duUHJvcGVydHkmJmUuaGFzT3duUHJvcGVydHkodCl9OmZ1bmN0aW9uKHQscil7cmV0dXJuIWUuSXkodFtyXSkmJnQuY29uc3RydWN0b3IucHJvdG90eXBlW3JdIT09dFtyXX0scy5ieShlLHMsITApLEllLnV0aWwuTGFuZz1lLGUuTnk9ZS5DeSxJZS5OeT1lLkN5LEllLmV4dGVuZD1lLmV4dGVuZH0oKSxJZS5yZWdpc3RlcihcInlhaG9vXCIsSWUse3ZlcnNpb246XCIyLjkuMFwiLFhnOlwiMjgwMFwifSk7LyohIENyeXB0b0pTIHYzLjEuMiBjb3JlLWZpeC5qc1xuICogY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzXG4gKiAoYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIGNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2VcbiAqIFRISVMgSVMgRklYIG9mICdjb3JlLmpzJyB0byBmaXggSG1hYyBpc3N1ZS5cbiAqIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL2lzc3Vlcy9kZXRhaWw/aWQ9ODRcbiAqIGh0dHBzOi8vY3J5cHRvLWpzLmdvb2dsZWNvZGUuY29tL3N2bi1oaXN0b3J5L3I2NjcvYnJhbmNoZXMvMy54L3NyYy9jb3JlLmpzXG4gKi9cbnZhciBTZT1TZXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj17fSxpPXIuRmc9e30sbj1pLkR5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm57ZXh0ZW5kOmZ1bmN0aW9uKHQpe2UucHJvdG90eXBlPXRoaXM7dmFyIHI9bmV3IGU7cmV0dXJuIHQmJnIua3kodCksci5oYXNPd25Qcm9wZXJ0eShcImluaXRcIil8fChyLmluaXQ9ZnVuY3Rpb24oKXtyLkx5LmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksci5pbml0LnByb3RvdHlwZT1yLHIuTHk9dGhpcyxyfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmV4dGVuZCgpO3JldHVybiBlLmluaXQuYXBwbHkoZSxhcmd1bWVudHMpLGV9LGluaXQ6ZnVuY3Rpb24oKXt9LGt5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKWUuaGFzT3duUHJvcGVydHkodCkmJih0aGlzW3RdPWVbdF0pO2UuaGFzT3duUHJvcGVydHkoXCJ0b1N0cmluZ1wiKSYmKHRoaXMudG9TdHJpbmc9ZS50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX19KCkscz1pLk1nPW4uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7ZT10aGlzLk15PWV8fFtdLHRoaXMuRnk9dm9pZCAwIT10P3Q6NCplLmxlbmd0aH0sdG9TdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuKGV8fGEpLnN0cmluZ2lmeSh0aGlzKX0sY29uY2F0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuTXkscj1lLk15LGk9dGhpcy5GeSxuPWUuRnk7aWYodGhpcy5CRSgpLGklNClmb3IodmFyIHM9MDtzPG47cysrKXt2YXIgbz1yW3M+Pj4yXT4+PjI0LXMlNCo4JjI1NTt0W2krcz4+PjJdfD1vPDwyNC0oaStzKSU0Kjh9ZWxzZSBmb3IodmFyIHM9MDtzPG47cys9NCl0W2krcz4+PjJdPXJbcz4+PjJdO3JldHVybiB0aGlzLkZ5Kz1uLHRoaXN9LEJFOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5NeSxyPXRoaXMuRnk7dFtyPj4+Ml0mPTQyOTQ5NjcyOTU8PDMyLXIlNCo4LHQubGVuZ3RoPWUuY2VpbChyLzQpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPW4uY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gZS5NeT10aGlzLk15LnNsaWNlKDApLGV9LHJhbmRvbTpmdW5jdGlvbih0KXtmb3IodmFyIHI9W10saT0wO2k8dDtpKz00KXIucHVzaCg0Mjk0OTY3Mjk2KmUucmFuZG9tKCl8MCk7cmV0dXJuIG5ldyBzLmluaXQocix0KX19KSxvPXIuVXk9e30sYT1vLkJ5PXtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuTXkscj1lLkZ5LGk9W10sbj0wO248cjtuKyspe3ZhciBzPXRbbj4+PjJdPj4+MjQtbiU0KjgmMjU1O2kucHVzaCgocz4+PjQpLnRvU3RyaW5nKDE2KSksaS5wdXNoKCgxNSZzKS50b1N0cmluZygxNikpfXJldHVybiBpLmpvaW4oXCJcIil9LHBhcnNlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxyPVtdLGk9MDtpPHQ7aSs9MilyW2k+Pj4zXXw9cGFyc2VJbnQoZS5zdWJzdHIoaSwyKSwxNik8PDI0LWklOCo0O3JldHVybiBuZXcgcy5pbml0KHIsdC8yKX19LGg9by5IeT17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLk15LHI9ZS5GeSxpPVtdLG49MDtuPHI7bisrKXt2YXIgcz10W24+Pj4yXT4+PjI0LW4lNCo4JjI1NTtpLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShzKSl9cmV0dXJuIGkuam9pbihcIlwiKX0scGFyc2U6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLHI9W10saT0wO2k8dDtpKyspcltpPj4+Ml18PSgyNTUmZS5jaGFyQ29kZUF0KGkpKTw8MjQtaSU0Kjg7cmV0dXJuIG5ldyBzLmluaXQocix0KX19LGM9by54eT17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShoLnN0cmluZ2lmeShlKSkpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBVVEYtOCBkYXRhXCIpfX0scGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGgucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGUpKSl9fSx1PWkucXk9bi5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5HeT1uZXcgcy5pbml0LHRoaXMuVnk9MH0sank6ZnVuY3Rpb24oZSl7XCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPWMucGFyc2UoZSkpLHRoaXMuR3kuY29uY2F0KGUpLHRoaXMuVnkrPWUuRnl9LFF5OmZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuR3ksaT1yLk15LG49ci5GeSxvPXRoaXMuS3ksYT00Km8saD1uL2E7aD10P2UuY2VpbChoKTplLm1heCgoMHxoKS10aGlzLll5LDApO3ZhciBjPWgqbyx1PWUubWluKDQqYyxuKTtpZihjKXtmb3IodmFyIGw9MDtsPGM7bCs9byl0aGlzLld5KGksbCk7dmFyIHA9aS5zcGxpY2UoMCxjKTtyLkZ5LT11fXJldHVybiBuZXcgcy5pbml0KHAsdSl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGU9bi5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiBlLkd5PXRoaXMuR3kuY2xvbmUoKSxlfSxZeTowfSksbD0oaS56eT11LmV4dGVuZCh7Snk6bi5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKGUpe3RoaXMuSnk9dGhpcy5KeS5leHRlbmQoZSksdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3UucmVzZXQuY2FsbCh0aGlzKSx0aGlzLlh5KCl9LHVwZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5qeShlKSx0aGlzLlF5KCksdGhpc30sWnk6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJnRoaXMuankoZSksdGhpcy4keSgpfSxLeToxNixlVDpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXtyZXR1cm4gbmV3IGUuaW5pdChyKS5aeSh0KX19LHRUOmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBuZXcgbC5yVC5pbml0KGUscikuWnkodCl9fX0pLHIuaVQ9e30pO3JldHVybiByfShNYXRoKTshZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQscixpLG4scyxvKXtyZXR1cm4oKGU9ZSsodCZyfH50JmkpK24rbyk8PHN8ZT4+PjMyLXMpK3R9ZnVuY3Rpb24gcihlLHQscixpLG4scyxvKXtyZXR1cm4oKGU9ZSsodCZpfHImfmkpK24rbyk8PHN8ZT4+PjMyLXMpK3R9ZnVuY3Rpb24gaShlLHQscixpLG4scyxvKXtyZXR1cm4oKGU9ZSsodF5yXmkpK24rbyk8PHN8ZT4+PjMyLXMpK3R9ZnVuY3Rpb24gbihlLHQscixpLG4scyxvKXtyZXR1cm4oKGU9ZSsocl4odHx+aSkpK24rbyk8PHN8ZT4+PjMyLXMpK3R9Zm9yKHZhciBzPVNlLG89cy5GZyxhPW8uTWcsaD1vLnp5LG89cy5pVCxjPVtdLHU9MDs2ND51O3UrKyljW3VdPTQyOTQ5NjcyOTYqZS5hYnMoZS5zaW4odSsxKSl8MDtvPW8uVWc9aC5leHRlbmQoe1h5OmZ1bmN0aW9uKCl7dGhpcy5uVD1uZXcgYS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzhdKX0sV3k6ZnVuY3Rpb24oZSxzKXtmb3IodmFyIG89MDsxNj5vO28rKyl7dmFyIGE9cytvLGg9ZVthXTtlW2FdPTE2NzExOTM1JihoPDw4fGg+Pj4yNCl8NDI3ODI1NTM2MCYoaDw8MjR8aD4+PjgpfXZhciBvPXRoaXMublQuTXksYT1lW3MrMF0saD1lW3MrMV0sdT1lW3MrMl0sbD1lW3MrM10scD1lW3MrNF0sZD1lW3MrNV0sZj1lW3MrNl0sZz1lW3MrN10sRT1lW3MrOF0sdj1lW3MrOV0seT1lW3MrMTBdLFQ9ZVtzKzExXSxtPWVbcysxMl0sST1lW3MrMTNdLFM9ZVtzKzE0XSxSPWVbcysxNV0sdz1vWzBdLGI9b1sxXSxDPW9bMl0sXz1vWzNdLHc9dCh3LGIsQyxfLGEsNyxjWzBdKSxfPXQoXyx3LGIsQyxoLDEyLGNbMV0pLEM9dChDLF8sdyxiLHUsMTcsY1syXSksYj10KGIsQyxfLHcsbCwyMixjWzNdKSx3PXQodyxiLEMsXyxwLDcsY1s0XSksXz10KF8sdyxiLEMsZCwxMixjWzVdKSxDPXQoQyxfLHcsYixmLDE3LGNbNl0pLGI9dChiLEMsXyx3LGcsMjIsY1s3XSksdz10KHcsYixDLF8sRSw3LGNbOF0pLF89dChfLHcsYixDLHYsMTIsY1s5XSksQz10KEMsXyx3LGIseSwxNyxjWzEwXSksYj10KGIsQyxfLHcsVCwyMixjWzExXSksdz10KHcsYixDLF8sbSw3LGNbMTJdKSxfPXQoXyx3LGIsQyxJLDEyLGNbMTNdKSxDPXQoQyxfLHcsYixTLDE3LGNbMTRdKSxiPXQoYixDLF8sdyxSLDIyLGNbMTVdKSx3PXIodyxiLEMsXyxoLDUsY1sxNl0pLF89cihfLHcsYixDLGYsOSxjWzE3XSksQz1yKEMsXyx3LGIsVCwxNCxjWzE4XSksYj1yKGIsQyxfLHcsYSwyMCxjWzE5XSksdz1yKHcsYixDLF8sZCw1LGNbMjBdKSxfPXIoXyx3LGIsQyx5LDksY1syMV0pLEM9cihDLF8sdyxiLFIsMTQsY1syMl0pLGI9cihiLEMsXyx3LHAsMjAsY1syM10pLHc9cih3LGIsQyxfLHYsNSxjWzI0XSksXz1yKF8sdyxiLEMsUyw5LGNbMjVdKSxDPXIoQyxfLHcsYixsLDE0LGNbMjZdKSxiPXIoYixDLF8sdyxFLDIwLGNbMjddKSx3PXIodyxiLEMsXyxJLDUsY1syOF0pLF89cihfLHcsYixDLHUsOSxjWzI5XSksQz1yKEMsXyx3LGIsZywxNCxjWzMwXSksYj1yKGIsQyxfLHcsbSwyMCxjWzMxXSksdz1pKHcsYixDLF8sZCw0LGNbMzJdKSxfPWkoXyx3LGIsQyxFLDExLGNbMzNdKSxDPWkoQyxfLHcsYixULDE2LGNbMzRdKSxiPWkoYixDLF8sdyxTLDIzLGNbMzVdKSx3PWkodyxiLEMsXyxoLDQsY1szNl0pLF89aShfLHcsYixDLHAsMTEsY1szN10pLEM9aShDLF8sdyxiLGcsMTYsY1szOF0pLGI9aShiLEMsXyx3LHksMjMsY1szOV0pLHc9aSh3LGIsQyxfLEksNCxjWzQwXSksXz1pKF8sdyxiLEMsYSwxMSxjWzQxXSksQz1pKEMsXyx3LGIsbCwxNixjWzQyXSksYj1pKGIsQyxfLHcsZiwyMyxjWzQzXSksdz1pKHcsYixDLF8sdiw0LGNbNDRdKSxfPWkoXyx3LGIsQyxtLDExLGNbNDVdKSxDPWkoQyxfLHcsYixSLDE2LGNbNDZdKSxiPWkoYixDLF8sdyx1LDIzLGNbNDddKSx3PW4odyxiLEMsXyxhLDYsY1s0OF0pLF89bihfLHcsYixDLGcsMTAsY1s0OV0pLEM9bihDLF8sdyxiLFMsMTUsY1s1MF0pLGI9bihiLEMsXyx3LGQsMjEsY1s1MV0pLHc9bih3LGIsQyxfLG0sNixjWzUyXSksXz1uKF8sdyxiLEMsbCwxMCxjWzUzXSksQz1uKEMsXyx3LGIseSwxNSxjWzU0XSksYj1uKGIsQyxfLHcsaCwyMSxjWzU1XSksdz1uKHcsYixDLF8sRSw2LGNbNTZdKSxfPW4oXyx3LGIsQyxSLDEwLGNbNTddKSxDPW4oQyxfLHcsYixmLDE1LGNbNThdKSxiPW4oYixDLF8sdyxJLDIxLGNbNTldKSx3PW4odyxiLEMsXyxwLDYsY1s2MF0pLF89bihfLHcsYixDLFQsMTAsY1s2MV0pLEM9bihDLF8sdyxiLHUsMTUsY1s2Ml0pLGI9bihiLEMsXyx3LHYsMjEsY1s2M10pO29bMF09b1swXSt3fDAsb1sxXT1vWzFdK2J8MCxvWzJdPW9bMl0rQ3wwLG9bM109b1szXStffDB9LCR5OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5HeSxyPXQuTXksaT04KnRoaXMuVnksbj04KnQuRnk7cltuPj4+NV18PTEyODw8MjQtbiUzMjt2YXIgcz1lLmZsb29yKGkvNDI5NDk2NzI5Nik7Zm9yKHJbMTUrKG4rNjQ+Pj45PDw0KV09MTY3MTE5MzUmKHM8PDh8cz4+PjI0KXw0Mjc4MjU1MzYwJihzPDwyNHxzPj4+OCksclsxNCsobis2ND4+Pjk8PDQpXT0xNjcxMTkzNSYoaTw8OHxpPj4+MjQpfDQyNzgyNTUzNjAmKGk8PDI0fGk+Pj44KSx0LkZ5PTQqKHIubGVuZ3RoKzEpLHRoaXMuUXkoKSx0PXRoaXMublQscj10Lk15LGk9MDs0Pmk7aSsrKW49cltpXSxyW2ldPTE2NzExOTM1JihuPDw4fG4+Pj4yNCl8NDI3ODI1NTM2MCYobjw8MjR8bj4+PjgpO3JldHVybiB0fSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPWguY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gZS5uVD10aGlzLm5ULmNsb25lKCksZX19KSxzLlVnPWguZVQobykscy5zVD1oLnRUKG8pfShNYXRoKSxmdW5jdGlvbigpe3ZhciBlPVNlLHQ9ZS5GZyxyPXQuTWcsaT10Lnp5LG49W10sdD1lLmlULm9UPWkuZXh0ZW5kKHtYeTpmdW5jdGlvbigpe3RoaXMublQ9bmV3IHIuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4LDMyODUzNzc1MjBdKX0sV3k6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy5uVC5NeSxpPXJbMF0scz1yWzFdLG89clsyXSxhPXJbM10saD1yWzRdLGM9MDs4MD5jO2MrKyl7aWYoMTY+YyluW2NdPTB8ZVt0K2NdO2Vsc2V7dmFyIHU9bltjLTNdXm5bYy04XV5uW2MtMTRdXm5bYy0xNl07bltjXT11PDwxfHU+Pj4zMX11PShpPDw1fGk+Pj4yNykraCtuW2NdLHU9MjA+Yz91KygxNTE4NTAwMjQ5KyhzJm98fnMmYSkpOjQwPmM/dSsoMTg1OTc3NTM5Mysoc15vXmEpKTo2MD5jP3UrKChzJm98cyZhfG8mYSktMTg5NDAwNzU4OCk6dSsoKHNeb15hKS04OTk0OTc1MTQpLGg9YSxhPW8sbz1zPDwzMHxzPj4+MixzPWksaT11fXJbMF09clswXStpfDAsclsxXT1yWzFdK3N8MCxyWzJdPXJbMl0rb3wwLHJbM109clszXSthfDAscls0XT1yWzRdK2h8MH0sJHk6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLkd5LHQ9ZS5NeSxyPTgqdGhpcy5WeSxpPTgqZS5GeTtyZXR1cm4gdFtpPj4+NV18PTEyODw8MjQtaSUzMix0WzE0KyhpKzY0Pj4+OTw8NCldPU1hdGguZmxvb3Ioci80Mjk0OTY3Mjk2KSx0WzE1KyhpKzY0Pj4+OTw8NCldPXIsZS5GeT00KnQubGVuZ3RoLHRoaXMuUXkoKSx0aGlzLm5UfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPWkuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gZS5uVD10aGlzLm5ULmNsb25lKCksZX19KTtlLm9UPWkuZVQodCksZS5hVD1pLnRUKHQpfSgpOy8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuLyAqL1xudmFyIFJlO1wiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCI9PVRlLmFwcE5hbWU/KHIucHJvdG90eXBlLlZFPXMsUmU9MzApOlwiTmV0c2NhcGVcIiE9VGUuYXBwTmFtZT8oci5wcm90b3R5cGUuVkU9bixSZT0yNik6KHIucHJvdG90eXBlLlZFPW8sUmU9MjgpLHIucHJvdG90eXBlLlVFPVJlLHIucHJvdG90eXBlLnhFPSgxPDxSZSktMSxyLnByb3RvdHlwZS5MRT0xPDxSZTtyLnByb3RvdHlwZS5XRT1NYXRoLnBvdygyLDUyKSxyLnByb3RvdHlwZS5LRT01Mi1SZSxyLnByb3RvdHlwZS5ZRT0yKlJlLTUyO3ZhciB3ZSxiZSxDZT1cIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiLF9lPW5ldyBBcnJheTtmb3Iod2U9XCIwXCIuY2hhckNvZGVBdCgwKSxiZT0wO2JlPD05OysrYmUpX2Vbd2UrK109YmU7Zm9yKHdlPVwiYVwiLmNoYXJDb2RlQXQoMCksYmU9MTA7YmU8MzY7KytiZSlfZVt3ZSsrXT1iZTtmb3Iod2U9XCJBXCIuY2hhckNvZGVBdCgwKSxiZT0xMDtiZTwzNjsrK2JlKV9lW3dlKytdPWJlO0EucHJvdG90eXBlLnV2PU8sQS5wcm90b3R5cGUuZHY9TixBLnByb3RvdHlwZS5yZWR1Y2U9RCxBLnByb3RvdHlwZS5wdj1rLEEucHJvdG90eXBlLmx2PUwsRi5wcm90b3R5cGUudXY9VSxGLnByb3RvdHlwZS5kdj1CLEYucHJvdG90eXBlLnJlZHVjZT1ILEYucHJvdG90eXBlLnB2PXEsRi5wcm90b3R5cGUubHY9eCxyLnByb3RvdHlwZS5qRT1jLHIucHJvdG90eXBlLk1FPXUsci5wcm90b3R5cGUua0U9cCxyLnByb3RvdHlwZS5CRT1kLHIucHJvdG90eXBlLnpFPW0sci5wcm90b3R5cGUuWEU9SSxyLnByb3RvdHlwZS5RRT1TLHIucHJvdG90eXBlLlpFPVIsci5wcm90b3R5cGUuSEU9dyxyLnByb3RvdHlwZS50dj1iLHIucHJvdG90eXBlLnJ2PUMsci5wcm90b3R5cGUuJEU9XyxyLnByb3RvdHlwZS5zdj1NLHIucHJvdG90eXBlLmZ2PUcsci5wcm90b3R5cGUuZXhwPVYsci5wcm90b3R5cGUudG9TdHJpbmc9ZixyLnByb3RvdHlwZS5xRT1nLHIucHJvdG90eXBlLmFicz1FLHIucHJvdG90eXBlLkpFPXYsci5wcm90b3R5cGUuU3Y9VCxyLnByb3RvdHlwZS5ldj1QLHIucHJvdG90eXBlLkl2PWosci5aRVJPPWwoMCksci5PTkU9bCgxKSwvKiEgYXNuMS0xLjAuOS5qcyAoYykgMjAxMy0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlXG4gKi9cblwidW5kZWZpbmVkXCIhPXR5cGVvZiBLSlVSJiZLSlVSfHwoS0pVUj17fSksdm9pZCAwIT09S0pVUi5oVCYmS0pVUi5oVHx8KEtKVVIuaFQ9e30pLEtKVVIuaFQuY1Q9bmV3IGZ1bmN0aW9uKCl7dGhpcy51VD1mdW5jdGlvbihlKXt2YXIgdD1lLnRvU3RyaW5nKDE2KTtyZXR1cm4gdC5sZW5ndGglMj09MSYmKHQ9XCIwXCIrdCksdH0sdGhpcy5sVD1mdW5jdGlvbihlKXt2YXIgdD1lLnRvU3RyaW5nKDE2KTtpZihcIi1cIiE9dC5zdWJzdHIoMCwxKSl0Lmxlbmd0aCUyPT0xP3Q9XCIwXCIrdDp0Lm1hdGNoKC9eWzAtN10vKXx8KHQ9XCIwMFwiK3QpO2Vsc2V7dmFyIGk9dC5zdWJzdHIoMSksbj1pLmxlbmd0aDtuJTI9PTE/bis9MTp0Lm1hdGNoKC9eWzAtN10vKXx8KG4rPTIpO2Zvcih2YXIgcz1cIlwiLG89MDtvPG47bysrKXMrPVwiZlwiO3Q9bmV3IHIocywxNikucFQoZSkuYWRkKHIuT05FKS50b1N0cmluZygxNikucmVwbGFjZSgvXi0vLFwiXCIpfXJldHVybiB0fSx0aGlzLmRUPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KEtKVVIuaFQsU2UuVXkuQnkucGFyc2UoZSkpLGk9U2UuVXkuZlQuc3RyaW5naWZ5KHIpLG49aS5yZXBsYWNlKC8oLns2NH0pL2csXCIkMVxcclxcblwiKTtyZXR1cm4gbj1uLnJlcGxhY2UoL1xcclxcbiQvLFwiXCIpLFwiLS0tLS1CRUdJTiBcIit0K1wiLS0tLS1cXHJcXG5cIituK1wiXFxyXFxuLS0tLS1FTkQgXCIrdCtcIi0tLS0tXFxyXFxuXCJ9LHRoaXMuZ1Q9ZnVuY3Rpb24oZSl7dmFyIHQ9S0pVUi5oVCxyPU9iamVjdC5rZXlzKGUpO2lmKDEhPXIubGVuZ3RoKXRocm93XCJrZXkgb2YgcGFyYW0gc2hhbGwgYmUgb25seSBvbmUuXCI7dmFyIGk9clswXTtpZigtMT09XCI6Ym9vbDppbnQ6Yml0c3RyOm9jdHN0cjpudWxsOm9pZDplbnVtOnV0ZjhzdHI6bnVtc3RyOnBybnN0cjp0ZWxzdHI6aWE1c3RyOnV0Y3RpbWU6Z2VudGltZTpzZXE6c2V0OnRhZzpcIi5pbmRleE9mKFwiOlwiK2krXCI6XCIpKXRocm93XCJ1bmRlZmluZWQga2V5OiBcIitpO2lmKFwiYm9vbFwiPT1pKXJldHVybiBuZXcgdC5FVChlW2ldKTtpZihcImludFwiPT1pKXJldHVybiBuZXcgdC52VChlW2ldKTtpZihcImJpdHN0clwiPT1pKXJldHVybiBuZXcgdC55VChlW2ldKTtpZihcIm9jdHN0clwiPT1pKXJldHVybiBuZXcgdC5UVChlW2ldKTtpZihcIm51bGxcIj09aSlyZXR1cm4gbmV3IHQubVQoZVtpXSk7aWYoXCJvaWRcIj09aSlyZXR1cm4gbmV3IHQuSVQoZVtpXSk7aWYoXCJlbnVtXCI9PWkpcmV0dXJuIG5ldyB0LlNUKGVbaV0pO2lmKFwidXRmOHN0clwiPT1pKXJldHVybiBuZXcgdC5SVChlW2ldKTtpZihcIm51bXN0clwiPT1pKXJldHVybiBuZXcgdC53VChlW2ldKTtpZihcInBybnN0clwiPT1pKXJldHVybiBuZXcgdC5iVChlW2ldKTtpZihcInRlbHN0clwiPT1pKXJldHVybiBuZXcgdC5DVChlW2ldKTtpZihcImlhNXN0clwiPT1pKXJldHVybiBuZXcgdC5fVChlW2ldKTtpZihcInV0Y3RpbWVcIj09aSlyZXR1cm4gbmV3IHQuUFQoZVtpXSk7aWYoXCJnZW50aW1lXCI9PWkpcmV0dXJuIG5ldyB0LkFUKGVbaV0pO2lmKFwic2VxXCI9PWkpe2Zvcih2YXIgbj1lW2ldLHM9W10sbz0wO288bi5sZW5ndGg7bysrKXt2YXIgYT10LmNULmdUKG5bb10pO3MucHVzaChhKX1yZXR1cm4gbmV3IHQuT1Qoe05UOnN9KX1pZihcInNldFwiPT1pKXtmb3IodmFyIG49ZVtpXSxzPVtdLG89MDtvPG4ubGVuZ3RoO28rKyl7dmFyIGE9dC5jVC5nVChuW29dKTtzLnB1c2goYSl9cmV0dXJuIG5ldyB0LkRUKHtOVDpzfSl9aWYoXCJ0YWdcIj09aSl7dmFyIGg9ZVtpXTtpZihcIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaCkmJjM9PWgubGVuZ3RoKXt2YXIgYz10LmNULmdUKGhbMl0pO3JldHVybiBuZXcgdC5rVCh7dGFnOmhbMF0sTFQ6aFsxXSxNVDpjfSl9dmFyIHU9e307aWYodm9pZCAwIT09aC5MVCYmKHUuTFQ9aC5MVCksdm9pZCAwIT09aC50YWcmJih1LnRhZz1oLnRhZyksdm9pZCAwPT09aC5NVCl0aHJvd1wib2JqIHNoYWxsIGJlIHNwZWNpZmllZCBmb3IgJ3RhZycuXCI7cmV0dXJuIHUuTVQ9dC5jVC5nVChoLk1UKSxuZXcgdC5rVCh1KX19LHRoaXMuRlQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ1QoZSkuVVQoKX19LEtKVVIuaFQuY1QuQlQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVwiXCIsaT1wYXJzZUludChlLnN1YnN0cigwLDIpLDE2KSxuPU1hdGguZmxvb3IoaS80MCkscz1pJTQwLHQ9bitcIi5cIitzLG89XCJcIixhPTI7YTxlLmxlbmd0aDthKz0yKXt2YXIgaD1wYXJzZUludChlLnN1YnN0cihhLDIpLDE2KSxjPShcIjAwMDAwMDAwXCIraC50b1N0cmluZygyKSkuc2xpY2UoLTgpO2lmKG8rPWMuc3Vic3RyKDEsNyksXCIwXCI9PWMuc3Vic3RyKDAsMSkpe3Q9dCtcIi5cIituZXcgcihvLDIpLnRvU3RyaW5nKDEwKSxvPVwiXCJ9fXJldHVybiB0fSxLSlVSLmhULmNULkhUPWZ1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKGUpe3ZhciB0PWUudG9TdHJpbmcoMTYpO3JldHVybiAxPT10Lmxlbmd0aCYmKHQ9XCIwXCIrdCksdH07aWYoIWUubWF0Y2goL15bMC05Ll0rJC8pKXRocm93XCJtYWxmb3JtZWQgb2lkIHN0cmluZzogXCIrZTt2YXIgaT1cIlwiLG49ZS5zcGxpdChcIi5cIikscz00MCpwYXJzZUludChuWzBdKStwYXJzZUludChuWzFdKTtpKz10KHMpLG4uc3BsaWNlKDAsMik7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspaSs9ZnVuY3Rpb24oZSl7dmFyIGk9XCJcIixuPW5ldyByKGUsMTApLHM9bi50b1N0cmluZygyKSxvPTctcy5sZW5ndGglNzs3PT1vJiYobz0wKTtmb3IodmFyIGE9XCJcIixoPTA7aDxvO2grKylhKz1cIjBcIjtzPWErcztmb3IodmFyIGg9MDtoPHMubGVuZ3RoLTE7aCs9Nyl7dmFyIGM9cy5zdWJzdHIoaCw3KTtoIT1zLmxlbmd0aC03JiYoYz1cIjFcIitjKSxpKz10KHBhcnNlSW50KGMsMikpfXJldHVybiBpfShuW29dKTtyZXR1cm4gaX0sS0pVUi5oVC54VD1mdW5jdGlvbigpe3RoaXMucVQ9ZnVuY3Rpb24oKXtpZih2b2lkIDA9PT10aGlzLkdUfHxudWxsPT10aGlzLkdUKXRocm93XCJ0aGlzLmhWIGlzIG51bGwgb3IgdW5kZWZpbmVkLlwiO2lmKHRoaXMuR1QubGVuZ3RoJTI9PTEpdGhyb3dcInZhbHVlIGhleCBtdXN0IGJlIGV2ZW4gbGVuZ3RoOiBuPVwiK1wiXCIubGVuZ3RoK1wiLHY9XCIrdGhpcy5HVDt2YXIgZT10aGlzLkdULmxlbmd0aC8yLHQ9ZS50b1N0cmluZygxNik7aWYodC5sZW5ndGglMj09MSYmKHQ9XCIwXCIrdCksZTwxMjgpcmV0dXJuIHQ7dmFyIHI9dC5sZW5ndGgvMjtpZihyPjE1KXRocm93XCJBU04uMSBsZW5ndGggdG9vIGxvbmcgdG8gcmVwcmVzZW50IGJ5IDh4OiBuID0gXCIrZS50b1N0cmluZygxNik7cmV0dXJuKDEyOCtyKS50b1N0cmluZygxNikrdH0sdGhpcy5VVD1mdW5jdGlvbigpe3JldHVybihudWxsPT10aGlzLlZUfHx0aGlzLmpUKSYmKHRoaXMuR1Q9dGhpcy5RVCgpLHRoaXMuS1Q9dGhpcy5xVCgpLHRoaXMuVlQ9dGhpcy5ZVCt0aGlzLktUK3RoaXMuR1QsdGhpcy5qVD0hMSksdGhpcy5WVH0sdGhpcy5XVD1mdW5jdGlvbigpe3JldHVybiB0aGlzLlVUKCksdGhpcy5HVH0sdGhpcy5RVD1mdW5jdGlvbigpe3JldHVyblwiXCJ9fSxLSlVSLmhULnpUPWZ1bmN0aW9uKGUpe0tKVVIuaFQuelQud3kuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLkpUPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuVH0sdGhpcy5YVD1mdW5jdGlvbihlKXt0aGlzLlZUPW51bGwsdGhpcy5qVD0hMCx0aGlzLlQ9ZSx0aGlzLkdUPXN0b2hleCh0aGlzLlQpfSx0aGlzLlpUPWZ1bmN0aW9uKGUpe3RoaXMuVlQ9bnVsbCx0aGlzLmpUPSEwLHRoaXMuVD1udWxsLHRoaXMuR1Q9ZX0sdGhpcy5RVD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkdUfSx2b2lkIDAhPT1lJiYoXCJzdHJpbmdcIj09dHlwZW9mIGU/dGhpcy5YVChlKTp2b2lkIDAhPT1lLnN0cj90aGlzLlhUKGUuc3RyKTp2b2lkIDAhPT1lLiRUJiZ0aGlzLlpUKGUuJFQpKX0sSWUubGFuZy5leHRlbmQoS0pVUi5oVC56VCxLSlVSLmhULnhUKSxLSlVSLmhULmVtPWZ1bmN0aW9uKGUpe0tKVVIuaFQuZW0ud3kuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLnRtPWZ1bmN0aW9uKGUpe3JldHVybiB1dGM9ZS5nZXRUaW1lKCkrNmU0KmUuZ2V0VGltZXpvbmVPZmZzZXQoKSxuZXcgRGF0ZSh1dGMpfSx0aGlzLnJtPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLmltLG49dGhpcy50bShlKSxzPVN0cmluZyhuLmdldEZ1bGxZZWFyKCkpO1widXRjXCI9PXQmJihzPXMuc3Vic3RyKDIsMikpO3ZhciBvPWkoU3RyaW5nKG4uZ2V0TW9udGgoKSsxKSwyKSxhPWkoU3RyaW5nKG4uZ2V0RGF0ZSgpKSwyKSxoPWkoU3RyaW5nKG4uZ2V0SG91cnMoKSksMiksYz1pKFN0cmluZyhuLmdldE1pbnV0ZXMoKSksMiksdT1pKFN0cmluZyhuLmdldFNlY29uZHMoKSksMiksbD1zK28rYStoK2MrdTtpZighMD09PXIpe3ZhciBwPW4uZ2V0TWlsbGlzZWNvbmRzKCk7aWYoMCE9cCl7dmFyIGQ9aShTdHJpbmcocCksMyk7ZD1kLnJlcGxhY2UoL1swXSskLyxcIlwiKSxsPWwrXCIuXCIrZH19cmV0dXJuIGwrXCJaXCJ9LHRoaXMuaW09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5sZW5ndGg+PXQ/ZTpuZXcgQXJyYXkodC1lLmxlbmd0aCsxKS5qb2luKFwiMFwiKStlfSx0aGlzLkpUPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuVH0sdGhpcy5YVD1mdW5jdGlvbihlKXt0aGlzLlZUPW51bGwsdGhpcy5qVD0hMCx0aGlzLlQ9ZSx0aGlzLkdUPXN0b2hleChlKX0sdGhpcy5ubT1mdW5jdGlvbihlLHQscixpLG4scyl7dmFyIG89bmV3IERhdGUoRGF0ZS5VVEMoZSx0LTEscixpLG4scywwKSk7dGhpcy5zbShvKX0sdGhpcy5RVD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkdUfX0sSWUubGFuZy5leHRlbmQoS0pVUi5oVC5lbSxLSlVSLmhULnhUKSxLSlVSLmhULm9tPWZ1bmN0aW9uKGUpe0tKVVIuaFQuelQud3kuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmFtPWZ1bmN0aW9uKGUpe3RoaXMuVlQ9bnVsbCx0aGlzLmpUPSEwLHRoaXMuaG09ZX0sdGhpcy5jbT1mdW5jdGlvbihlKXt0aGlzLlZUPW51bGwsdGhpcy5qVD0hMCx0aGlzLmhtLnB1c2goZSl9LHRoaXMuaG09bmV3IEFycmF5LHZvaWQgMCE9PWUmJnZvaWQgMCE9PWUuTlQmJih0aGlzLmhtPWUuTlQpfSxJZS5sYW5nLmV4dGVuZChLSlVSLmhULm9tLEtKVVIuaFQueFQpLEtKVVIuaFQuRVQ9ZnVuY3Rpb24oKXtLSlVSLmhULkVULnd5LmNvbnN0cnVjdG9yLmNhbGwodGhpcyksdGhpcy5ZVD1cIjAxXCIsdGhpcy5WVD1cIjAxMDFmZlwifSxJZS5sYW5nLmV4dGVuZChLSlVSLmhULkVULEtKVVIuaFQueFQpLEtKVVIuaFQudlQ9ZnVuY3Rpb24oZSl7S0pVUi5oVC52VC53eS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuWVQ9XCIwMlwiLHRoaXMudW09ZnVuY3Rpb24oZSl7dGhpcy5WVD1udWxsLHRoaXMualQ9ITAsdGhpcy5HVD1LSlVSLmhULmNULmxUKGUpfSx0aGlzLmxtPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyByKFN0cmluZyhlKSwxMCk7dGhpcy51bSh0KX0sdGhpcy5wbT1mdW5jdGlvbihlKXt0aGlzLkdUPWV9LHRoaXMuUVQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5HVH0sdm9pZCAwIT09ZSYmKHZvaWQgMCE9PWUuZG0/dGhpcy51bShlLmRtKTp2b2lkIDAhPT1lLmZtP3RoaXMubG0oZS5mbSk6XCJudW1iZXJcIj09dHlwZW9mIGU/dGhpcy5sbShlKTp2b2lkIDAhPT1lLiRUJiZ0aGlzLnBtKGUuJFQpKX0sSWUubGFuZy5leHRlbmQoS0pVUi5oVC52VCxLSlVSLmhULnhUKSxLSlVSLmhULnlUPWZ1bmN0aW9uKGUpe0tKVVIuaFQueVQud3kuY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLllUPVwiMDNcIix0aGlzLmdtPWZ1bmN0aW9uKGUpe3RoaXMuVlQ9bnVsbCx0aGlzLmpUPSEwLHRoaXMuR1Q9ZX0sdGhpcy5FbT1mdW5jdGlvbihlLHQpe2lmKGU8MHx8NzxlKXRocm93XCJ1bnVzZWQgYml0cyBzaGFsbCBiZSBmcm9tIDAgdG8gNzogdSA9IFwiK2U7dmFyIHI9XCIwXCIrZTt0aGlzLlZUPW51bGwsdGhpcy5qVD0hMCx0aGlzLkdUPXIrdH0sdGhpcy52bT1mdW5jdGlvbihlKXtlPWUucmVwbGFjZSgvMCskLyxcIlwiKTt2YXIgdD04LWUubGVuZ3RoJTg7OD09dCYmKHQ9MCk7Zm9yKHZhciByPTA7cjw9dDtyKyspZSs9XCIwXCI7Zm9yKHZhciBpPVwiXCIscj0wO3I8ZS5sZW5ndGgtMTtyKz04KXt2YXIgbj1lLnN1YnN0cihyLDgpLHM9cGFyc2VJbnQobiwyKS50b1N0cmluZygxNik7MT09cy5sZW5ndGgmJihzPVwiMFwiK3MpLGkrPXN9dGhpcy5WVD1udWxsLHRoaXMualQ9ITAsdGhpcy5HVD1cIjBcIit0K2l9LHRoaXMueW09ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVwiXCIscj0wO3I8ZS5sZW5ndGg7cisrKTE9PWVbcl0/dCs9XCIxXCI6dCs9XCIwXCI7dGhpcy52bSh0KX0sdGhpcy5UbT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IEFycmF5KGUpLHI9MDtyPGU7cisrKXRbcl09ITE7cmV0dXJuIHR9LHRoaXMuUVQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5HVH0sdm9pZCAwIT09ZSYmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiZlLnRvTG93ZXJDYXNlKCkubWF0Y2goL15bMC05YS1mXSskLyk/dGhpcy5nbShlKTp2b2lkIDAhPT1lLiRUP3RoaXMuZ20oZS4kVCk6dm9pZCAwIT09ZS5tbT90aGlzLnZtKGUubW0pOnZvaWQgMCE9PWUuTlQmJnRoaXMueW0oZS5OVCkpfSxJZS5sYW5nLmV4dGVuZChLSlVSLmhULnlULEtKVVIuaFQueFQpLEtKVVIuaFQuVFQ9ZnVuY3Rpb24oZSl7S0pVUi5oVC5UVC53eS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsZSksdGhpcy5ZVD1cIjA0XCJ9LEllLmxhbmcuZXh0ZW5kKEtKVVIuaFQuVFQsS0pVUi5oVC56VCksS0pVUi5oVC5tVD1mdW5jdGlvbigpe0tKVVIuaFQubVQud3kuY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLllUPVwiMDVcIix0aGlzLlZUPVwiMDUwMFwifSxJZS5sYW5nLmV4dGVuZChLSlVSLmhULm1ULEtKVVIuaFQueFQpLEtKVVIuaFQuSVQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50b1N0cmluZygxNik7cmV0dXJuIDE9PXQubGVuZ3RoJiYodD1cIjBcIit0KSx0fSxpPWZ1bmN0aW9uKGUpe3ZhciBpPVwiXCIsbj1uZXcgcihlLDEwKSxzPW4udG9TdHJpbmcoMiksbz03LXMubGVuZ3RoJTc7Nz09byYmKG89MCk7Zm9yKHZhciBhPVwiXCIsaD0wO2g8bztoKyspYSs9XCIwXCI7cz1hK3M7Zm9yKHZhciBoPTA7aDxzLmxlbmd0aC0xO2grPTcpe3ZhciBjPXMuc3Vic3RyKGgsNyk7aCE9cy5sZW5ndGgtNyYmKGM9XCIxXCIrYyksaSs9dChwYXJzZUludChjLDIpKX1yZXR1cm4gaX07S0pVUi5oVC5JVC53eS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuWVQ9XCIwNlwiLHRoaXMucG09ZnVuY3Rpb24oZSl7dGhpcy5WVD1udWxsLHRoaXMualQ9ITAsdGhpcy5UPW51bGwsdGhpcy5HVD1lfSx0aGlzLkltPWZ1bmN0aW9uKGUpe2lmKCFlLm1hdGNoKC9eWzAtOS5dKyQvKSl0aHJvd1wibWFsZm9ybWVkIG9pZCBzdHJpbmc6IFwiK2U7dmFyIHI9XCJcIixuPWUuc3BsaXQoXCIuXCIpLHM9NDAqcGFyc2VJbnQoblswXSkrcGFyc2VJbnQoblsxXSk7cis9dChzKSxuLnNwbGljZSgwLDIpO2Zvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXIrPWkobltvXSk7dGhpcy5WVD1udWxsLHRoaXMualQ9ITAsdGhpcy5UPW51bGwsdGhpcy5HVD1yfSx0aGlzLlNtPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PUtKVVIuaFQuYm0ud20uUm1bZV0pdGhyb3dcIkRFUk9iamVjdElkZW50aWZpZXIgb2lkTmFtZSB1bmRlZmluZWQ6IFwiK2U7dmFyIHQ9S0pVUi5oVC5ibS53bS5SbVtlXTt0aGlzLkltKHQpfSx0aGlzLlFUPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuR1R9LHZvaWQgMCE9PWUmJihcInN0cmluZ1wiPT10eXBlb2YgZSYmZS5tYXRjaCgvXlswLTJdLlswLTkuXSskLyk/dGhpcy5JbShlKTp2b2lkIDAhPT1LSlVSLmhULmJtLndtLlJtW2VdP3RoaXMuSW0oS0pVUi5oVC5ibS53bS5SbVtlXSk6dm9pZCAwIT09ZS5DbT90aGlzLkltKGUuQ20pOnZvaWQgMCE9PWUuJFQ/dGhpcy5wbShlLiRUKTp2b2lkIDAhPT1lLm5hbWUmJnRoaXMuU20oZS5uYW1lKSl9LEllLmxhbmcuZXh0ZW5kKEtKVVIuaFQuSVQsS0pVUi5oVC54VCksS0pVUi5oVC5TVD1mdW5jdGlvbihlKXtLSlVSLmhULlNULnd5LmNvbnN0cnVjdG9yLmNhbGwodGhpcyksdGhpcy5ZVD1cIjBhXCIsdGhpcy51bT1mdW5jdGlvbihlKXt0aGlzLlZUPW51bGwsdGhpcy5qVD0hMCx0aGlzLkdUPUtKVVIuaFQuY1QubFQoZSl9LHRoaXMubG09ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHIoU3RyaW5nKGUpLDEwKTt0aGlzLnVtKHQpfSx0aGlzLnBtPWZ1bmN0aW9uKGUpe3RoaXMuR1Q9ZX0sdGhpcy5RVD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkdUfSx2b2lkIDAhPT1lJiYodm9pZCAwIT09ZS5mbT90aGlzLmxtKGUuZm0pOlwibnVtYmVyXCI9PXR5cGVvZiBlP3RoaXMubG0oZSk6dm9pZCAwIT09ZS4kVCYmdGhpcy5wbShlLiRUKSl9LEllLmxhbmcuZXh0ZW5kKEtKVVIuaFQuU1QsS0pVUi5oVC54VCksS0pVUi5oVC5SVD1mdW5jdGlvbihlKXtLSlVSLmhULlJULnd5LmNvbnN0cnVjdG9yLmNhbGwodGhpcyxlKSx0aGlzLllUPVwiMGNcIn0sSWUubGFuZy5leHRlbmQoS0pVUi5oVC5SVCxLSlVSLmhULnpUKSxLSlVSLmhULndUPWZ1bmN0aW9uKGUpe0tKVVIuaFQud1Qud3kuY29uc3RydWN0b3IuY2FsbCh0aGlzLGUpLHRoaXMuWVQ9XCIxMlwifSxJZS5sYW5nLmV4dGVuZChLSlVSLmhULndULEtKVVIuaFQuelQpLEtKVVIuaFQuYlQ9ZnVuY3Rpb24oZSl7S0pVUi5oVC5iVC53eS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsZSksdGhpcy5ZVD1cIjEzXCJ9LEllLmxhbmcuZXh0ZW5kKEtKVVIuaFQuYlQsS0pVUi5oVC56VCksS0pVUi5oVC5DVD1mdW5jdGlvbihlKXtLSlVSLmhULkNULnd5LmNvbnN0cnVjdG9yLmNhbGwodGhpcyxlKSx0aGlzLllUPVwiMTRcIn0sSWUubGFuZy5leHRlbmQoS0pVUi5oVC5DVCxLSlVSLmhULnpUKSxLSlVSLmhULl9UPWZ1bmN0aW9uKGUpe0tKVVIuaFQuX1Qud3kuY29uc3RydWN0b3IuY2FsbCh0aGlzLGUpLHRoaXMuWVQ9XCIxNlwifSxJZS5sYW5nLmV4dGVuZChLSlVSLmhULl9ULEtKVVIuaFQuelQpLEtKVVIuaFQuUFQ9ZnVuY3Rpb24oZSl7S0pVUi5oVC5QVC53eS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsZSksdGhpcy5ZVD1cIjE3XCIsdGhpcy5zbT1mdW5jdGlvbihlKXt0aGlzLlZUPW51bGwsdGhpcy5qVD0hMCx0aGlzLl9tPWUsdGhpcy5UPXRoaXMucm0odGhpcy5fbSxcInV0Y1wiKSx0aGlzLkdUPXN0b2hleCh0aGlzLlQpfSx0aGlzLlFUPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX20mJnZvaWQgMD09PXRoaXMuVCYmKHRoaXMuX209bmV3IERhdGUsdGhpcy5UPXRoaXMucm0odGhpcy5fbSxcInV0Y1wiKSx0aGlzLkdUPXN0b2hleCh0aGlzLlQpKSx0aGlzLkdUfSx2b2lkIDAhPT1lJiYodm9pZCAwIT09ZS5zdHI/dGhpcy5YVChlLnN0cik6XCJzdHJpbmdcIj09dHlwZW9mIGUmJmUubWF0Y2goL15bMC05XXsxMn1aJC8pP3RoaXMuWFQoZSk6dm9pZCAwIT09ZS4kVD90aGlzLlpUKGUuJFQpOnZvaWQgMCE9PWUuX20mJnRoaXMuc20oZS5fbSkpfSxJZS5sYW5nLmV4dGVuZChLSlVSLmhULlBULEtKVVIuaFQuZW0pLEtKVVIuaFQuQVQ9ZnVuY3Rpb24oZSl7S0pVUi5oVC5BVC53eS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsZSksdGhpcy5ZVD1cIjE4XCIsdGhpcy5QbT0hMSx0aGlzLnNtPWZ1bmN0aW9uKGUpe3RoaXMuVlQ9bnVsbCx0aGlzLmpUPSEwLHRoaXMuX209ZSx0aGlzLlQ9dGhpcy5ybSh0aGlzLl9tLFwiZ2VuXCIsdGhpcy5QbSksdGhpcy5HVD1zdG9oZXgodGhpcy5UKX0sdGhpcy5RVD1mdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9tJiZ2b2lkIDA9PT10aGlzLlQmJih0aGlzLl9tPW5ldyBEYXRlLHRoaXMuVD10aGlzLnJtKHRoaXMuX20sXCJnZW5cIix0aGlzLlBtKSx0aGlzLkdUPXN0b2hleCh0aGlzLlQpKSx0aGlzLkdUfSx2b2lkIDAhPT1lJiYodm9pZCAwIT09ZS5zdHI/dGhpcy5YVChlLnN0cik6XCJzdHJpbmdcIj09dHlwZW9mIGUmJmUubWF0Y2goL15bMC05XXsxNH1aJC8pP3RoaXMuWFQoZSk6dm9pZCAwIT09ZS4kVD90aGlzLlpUKGUuJFQpOnZvaWQgMCE9PWUuX20mJnRoaXMuc20oZS5fbSksITA9PT1lLkFtJiYodGhpcy5QbT0hMCkpfSxJZS5sYW5nLmV4dGVuZChLSlVSLmhULkFULEtKVVIuaFQuZW0pLEtKVVIuaFQuT1Q9ZnVuY3Rpb24oZSl7S0pVUi5oVC5PVC53eS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsZSksdGhpcy5ZVD1cIjMwXCIsdGhpcy5RVD1mdW5jdGlvbigpe2Zvcih2YXIgZT1cIlwiLHQ9MDt0PHRoaXMuaG0ubGVuZ3RoO3QrKyl7ZSs9dGhpcy5obVt0XS5VVCgpfXJldHVybiB0aGlzLkdUPWUsdGhpcy5HVH19LEllLmxhbmcuZXh0ZW5kKEtKVVIuaFQuT1QsS0pVUi5oVC5vbSksS0pVUi5oVC5EVD1mdW5jdGlvbihlKXtLSlVSLmhULkRULnd5LmNvbnN0cnVjdG9yLmNhbGwodGhpcyxlKSx0aGlzLllUPVwiMzFcIix0aGlzLk9tPSEwLHRoaXMuUVQ9ZnVuY3Rpb24oKXtmb3IodmFyIGU9bmV3IEFycmF5LHQ9MDt0PHRoaXMuaG0ubGVuZ3RoO3QrKyl7dmFyIHI9dGhpcy5obVt0XTtlLnB1c2goci5VVCgpKX1yZXR1cm4gMT09dGhpcy5PbSYmZS5zb3J0KCksdGhpcy5HVD1lLmpvaW4oXCJcIiksdGhpcy5HVH0sdm9pZCAwIT09ZSYmdm9pZCAwIT09ZS5ObSYmMD09ZS5ObSYmKHRoaXMuT209ITEpfSxJZS5sYW5nLmV4dGVuZChLSlVSLmhULkRULEtKVVIuaFQub20pLEtKVVIuaFQua1Q9ZnVuY3Rpb24oZSl7S0pVUi5oVC5rVC53eS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuWVQ9XCJhMFwiLHRoaXMuR1Q9XCJcIix0aGlzLkRtPSEwLHRoaXMua209bnVsbCx0aGlzLkxtPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLllUPXQsdGhpcy5EbT1lLHRoaXMua209cix0aGlzLkRtPyh0aGlzLkdUPXRoaXMua20uVVQoKSx0aGlzLlZUPW51bGwsdGhpcy5qVD0hMCk6KHRoaXMuR1Q9bnVsbCx0aGlzLlZUPXIuVVQoKSx0aGlzLlZUPXRoaXMuVlQucmVwbGFjZSgvXi4uLyx0KSx0aGlzLmpUPSExKX0sdGhpcy5RVD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkdUfSx2b2lkIDAhPT1lJiYodm9pZCAwIT09ZS50YWcmJih0aGlzLllUPWUudGFnKSx2b2lkIDAhPT1lLkxUJiYodGhpcy5EbT1lLkxUKSx2b2lkIDAhPT1lLk1UJiYodGhpcy5rbT1lLk1ULHRoaXMuTG0odGhpcy5EbSx0aGlzLllULHRoaXMua20pKSl9LEllLmxhbmcuZXh0ZW5kKEtKVVIuaFQua1QsS0pVUi5oVC54VCk7LyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vICovXG52YXIgUGU9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIsQWU9XCI9XCI7LyohIGNyeXB0by0xLjEuOC5qcyAoYykgMjAxMy0yMDE2IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlXG4gKi9cblwidW5kZWZpbmVkXCIhPXR5cGVvZiBLSlVSJiZLSlVSfHwoS0pVUj17fSksdm9pZCAwIT09S0pVUi5jcnlwdG8mJktKVVIuY3J5cHRvfHwoS0pVUi5jcnlwdG89e30pLEtKVVIuY3J5cHRvLmJ2PW5ldyBmdW5jdGlvbigpe3RoaXMuRHY9e3NoYTE6XCIzMDIxMzAwOTA2MDUyYjBlMDMwMjFhMDUwMDA0MTRcIixNbTpcIjMwMmQzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwNDA1MDAwNDFjXCIsc2hhMjU2OlwiMzAzMTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAxMDUwMDA0MjBcIixGbTpcIjMwNDEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMjA1MDAwNDMwXCIsVW06XCIzMDUxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDMwNTAwMDQ0MFwiLEJtOlwiMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwMjA1MDAwNDEwXCIsSG06XCIzMDIwMzAwYzA2MDgyYTg2NDg4NmY3MGQwMjA1MDUwMDA0MTBcIix4bTpcIjMwMjEzMDA5MDYwNTJiMjQwMzAyMDEwNTAwMDQxNFwifSx0aGlzLnFtPXtIbTpcImNyeXB0b2pzXCIsc2hhMTpcImNyeXB0b2pzXCIsTW06XCJjcnlwdG9qc1wiLHNoYTI1NjpcImNyeXB0b2pzXCIsRm06XCJjcnlwdG9qc1wiLFVtOlwiY3J5cHRvanNcIix4bTpcImNyeXB0b2pzXCIsR206XCJjcnlwdG9qc1wiLFZtOlwiY3J5cHRvanNcIixqbTpcImNyeXB0b2pzXCIsUW06XCJjcnlwdG9qc1wiLEttOlwiY3J5cHRvanNcIixZbTpcImNyeXB0b2pzXCIsV206XCJjcnlwdG9qc1wiLHptOlwiY3J5cHRvanMvanNyc2FcIixKbTpcImNyeXB0b2pzL2pzcnNhXCIsWG06XCJjcnlwdG9qcy9qc3JzYVwiLFptOlwiY3J5cHRvanMvanNyc2FcIiwkbTpcImNyeXB0b2pzL2pzcnNhXCIsZUk6XCJjcnlwdG9qcy9qc3JzYVwiLHRJOlwiY3J5cHRvanMvanNyc2FcIixySTpcImNyeXB0b2pzL2pzcnNhXCIsaUk6XCJjcnlwdG9qcy9qc3JzYVwiLG5JOlwiY3J5cHRvanMvanNyc2FcIixzSTpcImNyeXB0b2pzL2pzcnNhXCIsb0k6XCJjcnlwdG9qcy9qc3JzYVwiLGFJOlwiY3J5cHRvanMvanNyc2FcIixoSTpcImNyeXB0b2pzL2pzcnNhXCIsY0k6XCJjcnlwdG9qcy9qc3JzYVwiLHVJOlwiY3J5cHRvanMvanNyc2FcIixsSTpcImNyeXB0b2pzL2pzcnNhXCIscEk6XCJjcnlwdG9qcy9qc3JzYVwiLGRJOlwiY3J5cHRvanMvanNyc2FcIixmSTpcImNyeXB0b2pzL2pzcnNhXCIsZ0k6XCJjcnlwdG9qcy9qc3JzYVwiLEVJOlwiY3J5cHRvanMvanNyc2FcIix2STpcImNyeXB0b2pzL2pzcnNhXCIseUk6XCJjcnlwdG9qcy9qc3JzYVwifSx0aGlzLlRJPXtIbTpTZS5pVC5VZyxzaGExOlNlLmlULm9ULE1tOlNlLmlULm1JLHNoYTI1NjpTZS5pVC5JSSxGbTpTZS5pVC5TSSxVbTpTZS5pVC5SSSx4bTpTZS5pVC53SX0sdGhpcy5iST1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXRoaXMuRHZbdF0pdGhyb3dcImFsZyBub3Qgc3VwcG9ydGVkIGluIFV0aWwuRElHRVNUSU5GT0hFQUQ6IFwiK3Q7cmV0dXJuIHRoaXMuRHZbdF0rZX0sdGhpcy5fdj1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcy5iSShlLHQpLG49ci80O2lmKGkubGVuZ3RoKzIyPm4pdGhyb3dcImtleSBpcyB0b28gc2hvcnQgZm9yIFNpZ0FsZzoga2V5bGVuPVwiK3IrXCIsXCIrdDtmb3IodmFyIHM9XCIwMDAxXCIsbz1cIjAwXCIraSxhPVwiXCIsaD1uLXMubGVuZ3RoLW8ubGVuZ3RoLGM9MDtjPGg7Yys9MilhKz1cImZmXCI7cmV0dXJuIHMrYStvfSx0aGlzLnd2PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBLSlVSLmNyeXB0by5fSSh7QUk6dH0pLkNJKGUpfSx0aGlzLkF2PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBLSlVSLmNyeXB0by5fSSh7QUk6dH0pLk9JKGUpfSx0aGlzLnNoYTE9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBLSlVSLmNyeXB0by5fSSh7QUk6XCJzaGExXCIsTkk6XCJjcnlwdG9qc1wifSkuQ0koZSl9LHRoaXMuc2hhMjU2PWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgS0pVUi5jcnlwdG8uX0koe0FJOlwic2hhMjU2XCIsTkk6XCJjcnlwdG9qc1wifSkuQ0koZSl9LHRoaXMuREk9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBLSlVSLmNyeXB0by5fSSh7QUk6XCJzaGEyNTZcIixOSTpcImNyeXB0b2pzXCJ9KS5PSShlKX0sdGhpcy5VbT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IEtKVVIuY3J5cHRvLl9JKHtBSTpcInNoYTUxMlwiLE5JOlwiY3J5cHRvanNcIn0pLkNJKGUpfSx0aGlzLmtJPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgS0pVUi5jcnlwdG8uX0koe0FJOlwic2hhNTEyXCIsTkk6XCJjcnlwdG9qc1wifSkuT0koZSl9LHRoaXMuSG09ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBLSlVSLmNyeXB0by5fSSh7QUk6XCJtZDVcIixOSTpcImNyeXB0b2pzXCJ9KS5DSShlKX0sdGhpcy54bT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IEtKVVIuY3J5cHRvLl9JKHtBSTpcInJpcGVtZDE2MFwiLE5JOlwiY3J5cHRvanNcIn0pLkNJKGUpfSx0aGlzLkxJPWZ1bmN0aW9uKGUpe319LEtKVVIuY3J5cHRvLl9JPWZ1bmN0aW9uKGUpe3RoaXMuTUk9ZnVuY3Rpb24oZSx0KXtpZihudWxsIT1lJiZ2b2lkIDA9PT10JiYodD1LSlVSLmNyeXB0by5idi5xbVtlXSksLTEhPVwiOm1kNTpzaGExOnNoYTIyNDpzaGEyNTY6c2hhMzg0OnNoYTUxMjpyaXBlbWQxNjA6XCIuaW5kZXhPZihlKSYmXCJjcnlwdG9qc1wiPT10KXt0cnl7dGhpcy5GST1LSlVSLmNyeXB0by5idi5USVtlXS5jcmVhdGUoKX1jYXRjaCh0KXt0aHJvd1wic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPVwiK2UrXCIvXCIrdH10aGlzLlVJPWZ1bmN0aW9uKGUpe3RoaXMuRkkudXBkYXRlKGUpfSx0aGlzLkJJPWZ1bmN0aW9uKGUpe3ZhciB0PVNlLlV5LkJ5LnBhcnNlKGUpO3RoaXMuRkkudXBkYXRlKHQpfSx0aGlzLmRpZ2VzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkZJLlp5KCkudG9TdHJpbmcoU2UuVXkuQnkpfSx0aGlzLkNJPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLlVJKGUpLHRoaXMuZGlnZXN0KCl9LHRoaXMuT0k9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuQkkoZSksdGhpcy5kaWdlc3QoKX19aWYoLTEhPVwiOnNoYTI1NjpcIi5pbmRleE9mKGUpJiZcInNqY2xcIj09dCl7dHJ5e3RoaXMuRkk9bmV3IHNqY2wuaGFzaC5zaGEyNTZ9Y2F0Y2godCl7dGhyb3dcInNldEFsZ0FuZFByb3ZpZGVyIGhhc2ggYWxnIHNldCBmYWlsIGFsZz1cIitlK1wiL1wiK3R9dGhpcy5VST1mdW5jdGlvbihlKXt0aGlzLkZJLnVwZGF0ZShlKX0sdGhpcy5CST1mdW5jdGlvbihlKXt2YXIgdD1zamNsLnhJLiRULkhJKGUpO3RoaXMuRkkudXBkYXRlKHQpfSx0aGlzLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuRkkuWnkoKTtyZXR1cm4gc2pjbC54SS4kVC5xSShlKX0sdGhpcy5DST1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5VSShlKSx0aGlzLmRpZ2VzdCgpfSx0aGlzLk9JPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLkJJKGUpLHRoaXMuZGlnZXN0KCl9fX0sdGhpcy5VST1mdW5jdGlvbihlKXt0aHJvd1widXBkYXRlU3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5HSStcIi9cIit0aGlzLlZJfSx0aGlzLkJJPWZ1bmN0aW9uKGUpe3Rocm93XCJ1cGRhdGVIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIit0aGlzLkdJK1wiL1wiK3RoaXMuVkl9LHRoaXMuZGlnZXN0PWZ1bmN0aW9uKCl7dGhyb3dcImRpZ2VzdCgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMuR0krXCIvXCIrdGhpcy5WSX0sdGhpcy5DST1mdW5jdGlvbihlKXt0aHJvd1wiZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5HSStcIi9cIit0aGlzLlZJfSx0aGlzLk9JPWZ1bmN0aW9uKGUpe3Rocm93XCJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIit0aGlzLkdJK1wiL1wiK3RoaXMuVkl9LHZvaWQgMCE9PWUmJnZvaWQgMCE9PWUuQUkmJih0aGlzLkdJPWUuQUksdm9pZCAwPT09ZS5OSSYmKHRoaXMuVkk9S0pVUi5jcnlwdG8uYnYucW1bdGhpcy5HSV0pLHRoaXMuTUkodGhpcy5HSSx0aGlzLlZJKSl9LEtKVVIuY3J5cHRvLmpJPWZ1bmN0aW9uKGUpe3RoaXMuTUk9ZnVuY3Rpb24oZSx0KXtpZihlPWUudG9Mb3dlckNhc2UoKSxudWxsPT1lJiYoZT1cImhtYWNzaGExXCIpLGU9ZS50b0xvd2VyQ2FzZSgpLFwiaG1hY1wiIT1lLnN1YnN0cigwLDQpKXRocm93XCJzZXRBbGdBbmRQcm92aWRlciB1bnN1cHBvcnRlZCBITUFDIGFsZzogXCIrZTt2b2lkIDA9PT10JiYodD1LSlVSLmNyeXB0by5idi5xbVtlXSksdGhpcy5RST1lK1wiL1wiK3Q7dmFyIHI9ZS5zdWJzdHIoNCk7aWYoLTEhPVwiOm1kNTpzaGExOnNoYTIyNDpzaGEyNTY6c2hhMzg0OnNoYTUxMjpyaXBlbWQxNjA6XCIuaW5kZXhPZihyKSYmXCJjcnlwdG9qc1wiPT10KXt0cnl7dmFyIGk9S0pVUi5jcnlwdG8uYnYuVElbcl07dGhpcy5tYWM9U2UuaVQuclQuY3JlYXRlKGksdGhpcy5LSSl9Y2F0Y2goZSl7dGhyb3dcInNldEFsZ0FuZFByb3ZpZGVyIGhhc2ggYWxnIHNldCBmYWlsIGhhc2hBbGc9XCIrcitcIi9cIitlfXRoaXMuVUk9ZnVuY3Rpb24oZSl7dGhpcy5tYWMudXBkYXRlKGUpfSx0aGlzLkJJPWZ1bmN0aW9uKGUpe3ZhciB0PVNlLlV5LkJ5LnBhcnNlKGUpO3RoaXMubWFjLnVwZGF0ZSh0KX0sdGhpcy5ZST1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hYy5aeSgpLnRvU3RyaW5nKFNlLlV5LkJ5KX0sdGhpcy5XST1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5VSShlKSx0aGlzLllJKCl9LHRoaXMuekk9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuQkkoZSksdGhpcy5ZSSgpfX19LHRoaXMuVUk9ZnVuY3Rpb24oZSl7dGhyb3dcInVwZGF0ZVN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMuUUl9LHRoaXMuQkk9ZnVuY3Rpb24oZSl7dGhyb3dcInVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiK3RoaXMuUUl9LHRoaXMuWUk9ZnVuY3Rpb24oKXt0aHJvd1wiZGlnZXN0KCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5RSX0sdGhpcy5XST1mdW5jdGlvbihlKXt0aHJvd1wiZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5RSX0sdGhpcy56ST1mdW5jdGlvbihlKXt0aHJvd1wiZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIrdGhpcy5RSX0sdGhpcy5KST1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7dmFyIHQ9ZTtyZXR1cm4gZS5sZW5ndGglMiE9MSYmZS5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKXx8KHQ9cnN0cnRvaGV4KGUpKSx2b2lkKHRoaXMuS0k9U2UuVXkuQnkucGFyc2UodCkpfWlmKFwib2JqZWN0XCIhPXR5cGVvZiBlKXRocm93XCJLSlVSLmNyeXB0by5NYWMgdW5zdXBwb3J0ZWQgcGFzc3dvcmQgdHlwZTogXCIrZTt2YXIgdD1udWxsO2lmKHZvaWQgMCE9PWUuJFQpe2lmKGUuJFQubGVuZ3RoJTIhPTB8fCFlLiRULm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKXRocm93XCJNYWM6IHdyb25nIGhleCBwYXNzd29yZDogXCIrZS4kVDt0PWUuJFR9aWYodm9pZCAwIT09ZS5YSSYmKHQ9dXRmOHRvaGV4KGUuWEkpKSx2b2lkIDAhPT1lLlpJJiYodD1yc3RydG9oZXgoZS5aSSkpLHZvaWQgMCE9PWUuJEkmJih0PVEoZS4kSSkpLHZvaWQgMCE9PWUuZVMmJih0PWI2NHV0b2hleChlLmVTKSksbnVsbD09dCl0aHJvd1wiS0pVUi5jcnlwdG8uTWFjIHVuc3VwcG9ydGVkIHBhc3N3b3JkIHR5cGU6IFwiK2U7dGhpcy5LST1TZS5VeS5CeS5wYXJzZSh0KX0sdm9pZCAwIT09ZSYmKHZvaWQgMCE9PWUuS0kmJnRoaXMuSkkoZS5LSSksdm9pZCAwIT09ZS5BSSYmKHRoaXMuR0k9ZS5BSSx2b2lkIDA9PT1lLk5JJiYodGhpcy5WST1LSlVSLmNyeXB0by5idi5xbVt0aGlzLkdJXSksdGhpcy5NSSh0aGlzLkdJLHRoaXMuVkkpKSl9LEtKVVIuY3J5cHRvLlNpZ25hdHVyZT1mdW5jdGlvbihlKXt2YXIgdD1udWxsO2lmKHRoaXMudFM9ZnVuY3Rpb24oKXt0aGlzLkdJLm1hdGNoKC9eKC4rKXdpdGgoLispJC8pJiYodGhpcy5yUz1SZWdFeHAuJDEudG9Mb3dlckNhc2UoKSx0aGlzLmlTPVJlZ0V4cC4kMi50b0xvd2VyQ2FzZSgpKX0sdGhpcy5uUz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1cIlwiLGk9dC80LWUubGVuZ3RoLG49MDtuPGk7bisrKXIrPVwiMFwiO3JldHVybiByK2V9LHRoaXMuTUk9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLnRTKCksXCJjcnlwdG9qcy9qc3JzYVwiIT10KXRocm93XCJwcm92aWRlciBub3Qgc3VwcG9ydGVkOiBcIit0O2lmKC0xIT1cIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOlwiLmluZGV4T2YodGhpcy5yUykpe3RyeXt0aGlzLkZJPW5ldyBLSlVSLmNyeXB0by5fSSh7QUk6dGhpcy5yU30pfWNhdGNoKGUpe3Rocm93XCJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBhbGc9XCIrdGhpcy5yUytcIi9cIitlfXRoaXMuaW5pdD1mdW5jdGlvbihlLHQpe3ZhciByPW51bGw7dHJ5e3I9dm9pZCAwPT09dD9LRVlVVElMLmdldEtleShlKTpLRVlVVElMLmdldEtleShlLHQpfWNhdGNoKGUpe3Rocm93XCJpbml0IGZhaWxlZDpcIitlfWlmKCEwPT09ci5zUyl0aGlzLm9TPXIsdGhpcy5zdGF0ZT1cIlNJR05cIjtlbHNle2lmKCEwIT09ci5tdil0aHJvd1wiaW5pdCBmYWlsZWQuOlwiK3I7dGhpcy5hUz1yLHRoaXMuc3RhdGU9XCJWRVJJRllcIn19LHRoaXMuaFM9ZnVuY3Rpb24oZSl7XCJzdHJpbmdcIj09dHlwZW9mIGUuY1MmJlwic3RyaW5nXCI9PXR5cGVvZiBlLnVTPyh0aGlzLmNTPWUuY1MsdGhpcy51Uz1lLnVTKTp0aGlzLm9TPWUsdGhpcy5zdGF0ZT1cIlNJR05cIn0sdGhpcy5sUz1mdW5jdGlvbihlKXtcInN0cmluZ1wiPT10eXBlb2YgZS5wUyYmXCJzdHJpbmdcIj09dHlwZW9mIGUudVM/KHRoaXMucFM9ZS5wUyx0aGlzLnVTPWUudVMpOmUgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5kUz90aGlzLmFTPWU6ZSBpbnN0YW5jZW9mIFgmJih0aGlzLmFTPWUpLHRoaXMuc3RhdGU9XCJWRVJJRllcIn0sdGhpcy5mUz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgWDUwOTt0LmdTKGUpLHRoaXMuYVM9dC5FUyx0aGlzLnN0YXRlPVwiVkVSSUZZXCJ9LHRoaXMuVUk9ZnVuY3Rpb24oZSl7dGhpcy5GSS5VSShlKX0sdGhpcy5CST1mdW5jdGlvbihlKXt0aGlzLkZJLkJJKGUpfSx0aGlzLnNpZ249ZnVuY3Rpb24oKXtpZih0aGlzLnZTPXRoaXMuRkkuZGlnZXN0KCksdm9pZCAwIT09dGhpcy5jUyYmdm9pZCAwIT09dGhpcy51Uyl7dmFyIGU9bmV3IEtKVVIuY3J5cHRvLmRTKHtjdXJ2ZTp0aGlzLnVTfSk7dGhpcy55Uz1lLlRTKHRoaXMudlMsdGhpcy5jUyl9ZWxzZSBpZih0aGlzLm9TIGluc3RhbmNlb2YgWCYmXCJyc2FhbmRtZ2YxXCI9PXRoaXMuaVMpdGhpcy55Uz10aGlzLm9TLk92KHRoaXMudlMsdGhpcy5yUyx0aGlzLm1TKTtlbHNlIGlmKHRoaXMub1MgaW5zdGFuY2VvZiBYJiZcInJzYVwiPT10aGlzLmlTKXRoaXMueVM9dGhpcy5vUy5Ddih0aGlzLnZTLHRoaXMuclMpO2Vsc2UgaWYodGhpcy5vUyBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLmRTKXRoaXMueVM9dGhpcy5vUy5Ddih0aGlzLnZTKTtlbHNle2lmKCEodGhpcy5vUyBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLklTKSl0aHJvd1wiU2lnbmF0dXJlOiB1bnN1cHBvcnRlZCBwdWJsaWMga2V5IGFsZzogXCIrdGhpcy5pUzt0aGlzLnlTPXRoaXMub1MuQ3YodGhpcy52Uyl9cmV0dXJuIHRoaXMueVN9LHRoaXMuU1M9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuVUkoZSksdGhpcy5zaWduKCl9LHRoaXMuVFM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuQkkoZSksdGhpcy5zaWduKCl9LHRoaXMudmVyaWZ5PWZ1bmN0aW9uKGUpe2lmKHRoaXMudlM9dGhpcy5GSS5kaWdlc3QoKSx2b2lkIDAhPT10aGlzLnBTJiZ2b2lkIDAhPT10aGlzLnVTKXtyZXR1cm4gbmV3IEtKVVIuY3J5cHRvLmRTKHtjdXJ2ZTp0aGlzLnVTfSkuUlModGhpcy52UyxlLHRoaXMucFMpfWlmKHRoaXMuYVMgaW5zdGFuY2VvZiBYJiZcInJzYWFuZG1nZjFcIj09dGhpcy5pUylyZXR1cm4gdGhpcy5hUy5rdih0aGlzLnZTLGUsdGhpcy5yUyx0aGlzLm1TKTtpZih0aGlzLmFTIGluc3RhbmNlb2YgWCYmXCJyc2FcIj09dGhpcy5pUylyZXR1cm4gdGhpcy5hUy53Uyh0aGlzLnZTLGUpO2lmKHRoaXMuYVMgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5kUylyZXR1cm4gdGhpcy5hUy53Uyh0aGlzLnZTLGUpO2lmKHRoaXMuYVMgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5JUylyZXR1cm4gdGhpcy5hUy53Uyh0aGlzLnZTLGUpO3Rocm93XCJTaWduYXR1cmU6IHVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgYWxnOiBcIit0aGlzLmlTfX19LHRoaXMuaW5pdD1mdW5jdGlvbihlLHQpe3Rocm93XCJpbml0KGtleSwgcGFzcykgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIit0aGlzLmJTfSx0aGlzLmxTPWZ1bmN0aW9uKGUpe3Rocm93XCJpbml0VmVyaWZ5QnlQdWJsaWNLZXkocnNhUHViS2V5eSkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIit0aGlzLmJTfSx0aGlzLmZTPWZ1bmN0aW9uKGUpe3Rocm93XCJpbml0VmVyaWZ5QnlDZXJ0aWZpY2F0ZVBFTShjZXJ0UEVNKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiK3RoaXMuYlN9LHRoaXMuaFM9ZnVuY3Rpb24oZSl7dGhyb3dcImluaXRTaWduKHBydktleSkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIit0aGlzLmJTfSx0aGlzLlVJPWZ1bmN0aW9uKGUpe3Rocm93XCJ1cGRhdGVTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiK3RoaXMuYlN9LHRoaXMuQkk9ZnVuY3Rpb24oZSl7dGhyb3dcInVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIrdGhpcy5iU30sdGhpcy5zaWduPWZ1bmN0aW9uKCl7dGhyb3dcInNpZ24oKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiK3RoaXMuYlN9LHRoaXMuU1M9ZnVuY3Rpb24oZSl7dGhyb3dcImRpZ2VzdFN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIrdGhpcy5iU30sdGhpcy5UUz1mdW5jdGlvbihlKXt0aHJvd1wiZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIit0aGlzLmJTfSx0aGlzLnZlcmlmeT1mdW5jdGlvbihlKXt0aHJvd1widmVyaWZ5KGhTaWdWYWwpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIrdGhpcy5iU30sdGhpcy5DUz1lLHZvaWQgMCE9PWUmJih2b2lkIDAhPT1lLkFJJiYodGhpcy5HST1lLkFJLHZvaWQgMD09PWUuTkk/dGhpcy5WST1LSlVSLmNyeXB0by5idi5xbVt0aGlzLkdJXTp0aGlzLlZJPWUuTkksdGhpcy5iUz10aGlzLkdJK1wiOlwiK3RoaXMuVkksdGhpcy5NSSh0aGlzLkdJLHRoaXMuVkkpLHRoaXMudFMoKSksdm9pZCAwIT09ZS5fUyYmKHRoaXMubVM9ZS5fUyksdm9pZCAwIT09ZS5QUykpe2lmKHZvaWQgMCE9PWUuT1MpdGhyb3dcImJvdGggcHJ2a2V5cGVtIGFuZCBwcnZrZXlwYXMgcGFyYW1ldGVycyBub3Qgc3VwcG9ydGVkXCI7dHJ5e3ZhciB0PW5ldyBYO3QuTlMoZS5QUyksdGhpcy5oUyh0KX1jYXRjaChlKXt0aHJvd1wiZmF0YWwgZXJyb3IgdG8gbG9hZCBwZW0gcHJpdmF0ZSBrZXk6IFwiK2V9fX0sS0pVUi5jcnlwdG8ud209bmV3IGZ1bmN0aW9uKCl7dGhpcy5EUz17a1M6XCJyc2FFbmNyeXB0aW9uXCIsTFM6XCJlY1B1YmxpY0tleVwiLE1TOlwiZHNhXCIsRlM6XCJzZWNwMjU2cjFcIixVUzpcInNlY3AxOTJrMVwiLEJTOlwic2VjcDIyNHIxXCIsSFM6XCJzZWNwMjU2azFcIix4UzpcInNlY3A1MjFyMVwiLHFTOlwic2VjcDM4NHIxXCIsR1M6XCJTSEExd2l0aERTQVwiLFwiNjA4NjQ4MDE2NTAzMDQwMzAxXCI6XCJTSEEyMjR3aXRoRFNBXCIsXCI2MDg2NDgwMTY1MDMwNDAzMDJcIjpcIlNIQTI1NndpdGhEU0FcIn19O3ZhciBPZT0yMDtYLnByb3RvdHlwZS5Sdj0kLFgucHJvdG90eXBlLk52PVosWC5wcm90b3R5cGUuZW5jcnlwdD1lZSxYLnByb3RvdHlwZS5WUz10ZSxYLnByb3RvdHlwZS50eXBlPVwiUlNBXCI7LyohIHJzYXNpZ24tMS4yLjcuanMgKGMpIDIwMTIgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2VcbiAqL1xudmFyIE5lPW5ldyBSZWdFeHAoXCJcIik7TmUuY29tcGlsZShcIlteMC05YS1mXVwiLFwiZ2lcIiksWC5wcm90b3R5cGUuQ3Y9bmUsWC5wcm90b3R5cGUuU1M9aWUsWC5wcm90b3R5cGUualM9c2UsWC5wcm90b3R5cGUuUVM9b2UsWC5wcm90b3R5cGUuc2lnbj1pZSxYLnByb3RvdHlwZS5LUz1zZSxYLnByb3RvdHlwZS5ZUz1vZSxYLnByb3RvdHlwZS5Pdj1jZSxYLnByb3RvdHlwZS5XUz1oZSxYLnByb3RvdHlwZS56Uz1oZSxYLkpTPS0xLFguWFM9LTIsWC5wcm90b3R5cGUud1M9RWUsWC5wcm90b3R5cGUuWlM9Z2UsWC5wcm90b3R5cGUuJFM9ZmUsWC5wcm90b3R5cGUudmVyaWZ5PWdlLFgucHJvdG90eXBlLmVSPWZlLFgucHJvdG90eXBlLmt2PXllLFgucHJvdG90eXBlLnRSPXZlLFgucHJvdG90eXBlLnJSPXZlLFguaVI9LTIsdC5uUj1yLHQuc1I9WCx0LlNpZ25hdHVyZT1LSlVSLmNyeXB0by5TaWduYXR1cmUsdC5fST1LSlVSLmNyeXB0by5fSSx0LmNnPVNlLHQub1I9USx0LmFSPUt9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7aS5wcD1cImh0dHBzOlwiPT09bG9jYXRpb24ucHJvdG9jb2wsaS55cD0hMCxpLmhSPTFlNCxpLm5oPTZlNCxpLmNSPVwiWC1IaXZlLVRlc3RJZFwiLHQuTD1pfSxmdW5jdGlvbihlLHQscil7dmFyIGksbixzOy8qIVxuICogVVJJLmpzIC0gTXV0YXRpbmcgVVJMc1xuICpcbiAqIFZlcnNpb246IDEuMTguMTBcbiAqXG4gKiBBdXRob3I6IFJvZG5leSBSZWhtXG4gKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy9cbiAqXG4gKiBMaWNlbnNlZCB1bmRlclxuICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKlxuICovXG4hZnVuY3Rpb24obyxhKXtcInVzZSBzdHJpY3RcIjtcIm9iamVjdFwiPT10eXBlb2YgZSYmZS5pP2UuaT1hKHIoMTYpLHIoMTYpLHIoMTYpKToobj1bcigxNikscigxNikscigxNildLGk9YSx2b2lkIDAhPT0ocz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kuYXBwbHkodCxuKTppKSYmKGUuaT1zKSl9KDAsZnVuY3Rpb24oZSx0LHIsaSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlLHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+PTEsaT1hcmd1bWVudHMubGVuZ3RoPj0yO2lmKCEodGhpcyBpbnN0YW5jZW9mIG4pKXJldHVybiByP2k/bmV3IG4oZSx0KTpuZXcgbihlKTpuZXcgbjtpZih2b2lkIDA9PT1lKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJ1bmRlZmluZWQgaXMgbm90IGEgdmFsaWQgYXJndW1lbnQgZm9yIFVSSVwiKTtlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBsb2NhdGlvbj9sb2NhdGlvbi5ocmVmK1wiXCI6XCJcIn1pZihudWxsPT09ZSYmcil0aHJvdyBuZXcgVHlwZUVycm9yKFwibnVsbCBpcyBub3QgYSB2YWxpZCBhcmd1bWVudCBmb3IgVVJJXCIpO3JldHVybiB0aGlzLmhyZWYoZSksdm9pZCAwIT09dD90aGlzLlBoKHQpOnRoaXN9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZS5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8W1xcXVxcL1xcXFxdKS9nLFwiXFxcXCQxXCIpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIHZvaWQgMD09PWU/XCJVbmRlZmluZWRcIjpTdHJpbmcoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKS5zbGljZSg4LC0xKX1mdW5jdGlvbiBhKGUpe3JldHVyblwiQXJyYXlcIj09PW8oZSl9ZnVuY3Rpb24gaChlLHQpe3ZhciByLGksbj17fTtpZihcIlJlZ0V4cFwiPT09byh0KSluPW51bGw7ZWxzZSBpZihhKHQpKWZvcihyPTAsaT10Lmxlbmd0aDtyPGk7cisrKW5bdFtyXV09ITA7ZWxzZSBuW3RdPSEwO2ZvcihyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXsobiYmdm9pZCAwIT09bltlW3JdXXx8IW4mJnQudGVzdChlW3JdKSkmJihlLnNwbGljZShyLDEpLGktLSxyLS0pfXJldHVybiBlfWZ1bmN0aW9uIGMoZSx0KXt2YXIgcixpO2lmKGEodCkpe2ZvcihyPTAsaT10Lmxlbmd0aDtyPGk7cisrKWlmKCFjKGUsdFtyXSkpcmV0dXJuITE7cmV0dXJuITB9dmFyIG49byh0KTtmb3Iocj0wLGk9ZS5sZW5ndGg7cjxpO3IrKylpZihcIlJlZ0V4cFwiPT09bil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGVbcl0mJmVbcl0ubWF0Y2godCkpcmV0dXJuITB9ZWxzZSBpZihlW3JdPT09dClyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiB1KGUsdCl7aWYoIWEoZSl8fCFhKHQpKXJldHVybiExO2lmKGUubGVuZ3RoIT09dC5sZW5ndGgpcmV0dXJuITE7ZS5zb3J0KCksdC5zb3J0KCk7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKWlmKGVbcl0hPT10W3JdKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9L15cXC8rfFxcLyskL2c7cmV0dXJuIGUucmVwbGFjZSh0LFwiXCIpfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGVzY2FwZShlKX1mdW5jdGlvbiBkKGUpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoZSkucmVwbGFjZSgvWyEnKCkqXS9nLHApLnJlcGxhY2UoL1xcKi9nLFwiJTJBXCIpfWZ1bmN0aW9uIGYoZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIHZvaWQgMD09PXQ/dGhpcy51UltlXXx8XCJcIjoodGhpcy51UltlXT10fHxudWxsLHRoaXMuWGcoIXIpLHRoaXMpfX1mdW5jdGlvbiBnKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7cmV0dXJuIHZvaWQgMD09PXI/dGhpcy51UltlXXx8XCJcIjoobnVsbCE9PXImJihyKz1cIlwiLHIuY2hhckF0KDApPT09dCYmKHI9ci5zdWJzdHJpbmcoMSkpKSx0aGlzLnVSW2VdPXIsdGhpcy5YZyghaSksdGhpcyl9fXZhciBFPWkmJmkubFI7bi52ZXJzaW9uPVwiMS4xOC4xMFwiO3ZhciB2PW4ucHJvdG90eXBlLHk9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtuLnVSPWZ1bmN0aW9uKCl7cmV0dXJue3Byb3RvY29sOm51bGwsdXNlcm5hbWU6bnVsbCxwYXNzd29yZDpudWxsLGhvc3RuYW1lOm51bGwsdXJuOm51bGwscG9ydDpudWxsLHBhdGg6bnVsbCxxdWVyeTpudWxsLHBSOm51bGwsZFI6bi5kUixmUjpuLmZSfX0sbi5kUj0hMSxuLmZSPSEwLG4uZ1I9L15bYS16XVthLXowLTkuKy1dKiQvaSxuLkVSPS9bXmEtejAtOVxcLi1dL2ksbi52Uj0vKHhuLS0pL2ksbi55Uj0vXlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9JC8sbi5UUj0vXlxccyooKChbMC05QS1GYS1mXXsxLDR9Oil7N30oWzAtOUEtRmEtZl17MSw0fXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Nn0oOlswLTlBLUZhLWZdezEsNH18KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs1fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDJ9KXw6KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs0fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDN9KXwoKDpbMC05QS1GYS1mXXsxLDR9KT86KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7M30oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw0fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCwyfTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXsyfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDV9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDN9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezF9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNn0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsNH06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KDooKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw3fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw1fTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKSkoJS4rKT9cXHMqJC8sbi5tUj0vXFxiKCg/OlthLXpdW1xcdy1dKzooPzpcXC97MSwzfXxbYS16MC05JV0pfHd3d1xcZHswLDN9Wy5dfFthLXowLTkuXFwtXStbLl1bYS16XXsyLDR9XFwvKSg/OlteXFxzKCk8Pl0rfFxcKChbXlxccygpPD5dK3woXFwoW15cXHMoKTw+XStcXCkpKSpcXCkpKyg/OlxcKChbXlxccygpPD5dK3woXFwoW15cXHMoKTw+XStcXCkpKSpcXCl8W15cXHNgISgpXFxbXFxde307OidcIi4sPD4/wqvCu+KAnOKAneKAmOKAmV0pKS9naSxuLklSPXtzdGFydDovXFxiKD86KFthLXpdW2EtejAtOS4rLV0qOlxcL1xcLyl8d3d3XFwuKS9naSxlbmQ6L1tcXHNcXHJcXG5dfCQvLHRyaW06L1tgISgpXFxbXFxde307OidcIi4sPD4/wqvCu+KAnOKAneKAnuKAmOKAmV0rJC8sU1I6LyhcXChbXlxcKV0qXFwpfFxcW1teXFxdXSpcXF18XFx7W159XSpcXH18PFtePl0qPikvZ30sbi5SUj17d1I6XCI4MFwiLGJSOlwiNDQzXCIsQ1I6XCIyMVwiLF9SOlwiNzBcIixQUjpcIjgwXCIsQVI6XCI0NDNcIn0sbi5PUj0vW15hLXpBLVowLTlcXC4tXS8sbi5OUj17YTpcImhyZWZcIixEUjpcImNpdGVcIixsaW5rOlwiaHJlZlwiLGtSOlwiaHJlZlwiLExSOlwic3JjXCIsZm9ybTpcImFjdGlvblwiLE1SOlwic3JjXCIsRlI6XCJocmVmXCIsVVI6XCJzcmNcIixCUjpcInNyY1wiLHNvdXJjZTpcInNyY1wiLHRyYWNrOlwic3JjXCIsaW5wdXQ6XCJzcmNcIixIUjpcInNyY1wiLHZpZGVvOlwic3JjXCJ9LG4ueFI9ZnVuY3Rpb24oZSl7aWYoZSYmZS5ub2RlTmFtZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKFwiaW5wdXRcIiE9PXR8fFwiaW1hZ2VcIj09PWUudHlwZSlyZXR1cm4gbi5OUlt0XX19LG4uZW5jb2RlPWQsbi5kZWNvZGU9ZGVjb2RlVVJJQ29tcG9uZW50LG4ucVI9ZnVuY3Rpb24oKXtuLmVuY29kZT1lc2NhcGUsbi5kZWNvZGU9dW5lc2NhcGV9LG4uR1I9ZnVuY3Rpb24oKXtuLmVuY29kZT1kLG4uZGVjb2RlPWRlY29kZVVSSUNvbXBvbmVudH0sbi5WUj17cGF0aG5hbWU6e2VuY29kZTp7alI6LyUoMjR8MjZ8MkJ8MkN8M0J8M0R8M0F8NDApL2dpLG1hcDp7XCIlMjRcIjpcIiRcIixcIiUyNlwiOlwiJlwiLFwiJTJCXCI6XCIrXCIsXCIlMkNcIjpcIixcIixcIiUzQlwiOlwiO1wiLFwiJTNEXCI6XCI9XCIsXCIlM0FcIjpcIjpcIixcIiU0MFwiOlwiQFwifX0sZGVjb2RlOntqUjovW1xcL1xcPyNdL2csbWFwOntweTpcIiUyRlwiLFFSOlwiJTNGXCIsS1I6XCIlMjNcIn19fSxZUjp7ZW5jb2RlOntqUjovJSgyMXwyM3wyNHwyNnwyN3wyOHwyOXwyQXwyQnwyQ3wyRnwzQXwzQnwzRHwzRnw0MHw1Qnw1RCkvZ2ksbWFwOntcIiUzQVwiOlwiOlwiLFdSOlwiL1wiLHpSOlwiP1wiLEpSOlwiI1wiLFhSOlwiW1wiLFpSOlwiXVwiLFwiJTQwXCI6XCJAXCIsJFI6XCIhXCIsXCIlMjRcIjpcIiRcIixcIiUyNlwiOlwiJlwiLGV3OlwiJ1wiLHR3OlwiKFwiLHJ3OlwiKVwiLGl3OlwiKlwiLFwiJTJCXCI6XCIrXCIsXCIlMkNcIjpcIixcIixcIiUzQlwiOlwiO1wiLFwiJTNEXCI6XCI9XCJ9fX0sbnc6e2VuY29kZTp7alI6LyUoMjF8MjR8Mjd8Mjh8Mjl8MkF8MkJ8MkN8M0J8M0R8NDApL2dpLG1hcDp7JFI6XCIhXCIsXCIlMjRcIjpcIiRcIixldzpcIidcIix0dzpcIihcIixydzpcIilcIixpdzpcIipcIixcIiUyQlwiOlwiK1wiLFwiJTJDXCI6XCIsXCIsXCIlM0JcIjpcIjtcIixcIiUzRFwiOlwiPVwiLFwiJTQwXCI6XCJAXCJ9fSxkZWNvZGU6e2pSOi9bXFwvXFw/IzpdL2csbWFwOntweTpcIiUyRlwiLFFSOlwiJTNGXCIsS1I6XCIlMjNcIixzdzpcIiUzQVwifX19fSxuLm93PWZ1bmN0aW9uKGUsdCl7dmFyIHI9bi5lbmNvZGUoZStcIlwiKTtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bi5mUiksdD9yLnJlcGxhY2UoLyUyMC9nLFwiK1wiKTpyfSxuLmF3PWZ1bmN0aW9uKGUsdCl7ZSs9XCJcIix2b2lkIDA9PT10JiYodD1uLmZSKTt0cnl7cmV0dXJuIG4uZGVjb2RlKHQ/ZS5yZXBsYWNlKC9cXCsvZyxcIiUyMFwiKTplKX1jYXRjaCh0KXtyZXR1cm4gZX19O3ZhciBULG09e2VuY29kZTpcImVuY29kZVwiLGRlY29kZTpcImRlY29kZVwifSxJPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIpe3RyeXtyZXR1cm4gblt0XShyK1wiXCIpLnJlcGxhY2Uobi5WUltlXVt0XS5qUixmdW5jdGlvbihyKXtyZXR1cm4gbi5WUltlXVt0XS5tYXBbcl19KX1jYXRjaChlKXtyZXR1cm4gcn19fTtmb3IoVCBpbiBtKW5bVCtcIlBhdGhTZWdtZW50XCJdPUkoXCJwYXRobmFtZVwiLG1bVF0pLG5bVCtcIlVyblBhdGhTZWdtZW50XCJdPUkoXCJ1cm5wYXRoXCIsbVtUXSk7dmFyIFM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBmdW5jdGlvbihpKXt2YXIgcztzPXI/ZnVuY3Rpb24oZSl7cmV0dXJuIG5bdF0obltyXShlKSl9Om5bdF07Zm9yKHZhciBvPShpK1wiXCIpLnNwbGl0KGUpLGE9MCxoPW8ubGVuZ3RoO2E8aDthKyspb1thXT1zKG9bYV0pO3JldHVybiBvLmpvaW4oZSl9fTtuLmh3PVMoXCIvXCIsXCJkZWNvZGVQYXRoU2VnbWVudFwiKSxuLmN3PVMoXCI6XCIsXCJkZWNvZGVVcm5QYXRoU2VnbWVudFwiKSxuLnV3PVMoXCIvXCIsXCJlbmNvZGVQYXRoU2VnbWVudFwiLFwiZGVjb2RlXCIpLG4ubHc9UyhcIjpcIixcImVuY29kZVVyblBhdGhTZWdtZW50XCIsXCJkZWNvZGVcIiksbi5wdz1JKFwicmVzZXJ2ZWRcIixcImVuY29kZVwiKSxuLnBhcnNlPWZ1bmN0aW9uKGUsdCl7dmFyIHI7cmV0dXJuIHR8fCh0PXt9KSxyPWUuaW5kZXhPZihcIiNcIikscj4tMSYmKHQucFI9ZS5zdWJzdHJpbmcocisxKXx8bnVsbCxlPWUuc3Vic3RyaW5nKDAscikpLHI9ZS5pbmRleE9mKFwiP1wiKSxyPi0xJiYodC5xdWVyeT1lLnN1YnN0cmluZyhyKzEpfHxudWxsLGU9ZS5zdWJzdHJpbmcoMCxyKSksXCIvL1wiPT09ZS5zdWJzdHJpbmcoMCwyKT8odC5wcm90b2NvbD1udWxsLGU9ZS5zdWJzdHJpbmcoMiksZT1uLmR3KGUsdCkpOihyPWUuaW5kZXhPZihcIjpcIikpPi0xJiYodC5wcm90b2NvbD1lLnN1YnN0cmluZygwLHIpfHxudWxsLHQucHJvdG9jb2wmJiF0LnByb3RvY29sLm1hdGNoKG4uZ1IpP3QucHJvdG9jb2w9dm9pZCAwOlwiLy9cIj09PWUuc3Vic3RyaW5nKHIrMSxyKzMpPyhlPWUuc3Vic3RyaW5nKHIrMyksZT1uLmR3KGUsdCkpOihlPWUuc3Vic3RyaW5nKHIrMSksdC51cm49ITApKSx0LnBhdGg9ZSx0fSxuLmZ3PWZ1bmN0aW9uKGUsdCl7ZT1lLnJlcGxhY2UoL1xcXFwvZyxcIi9cIik7dmFyIHIsaSxuPWUuaW5kZXhPZihcIi9cIik7aWYoLTE9PT1uJiYobj1lLmxlbmd0aCksXCJbXCI9PT1lLmNoYXJBdCgwKSlyPWUuaW5kZXhPZihcIl1cIiksdC5ob3N0bmFtZT1lLnN1YnN0cmluZygxLHIpfHxudWxsLHQucG9ydD1lLnN1YnN0cmluZyhyKzIsbil8fG51bGwsXCIvXCI9PT10LnBvcnQmJih0LnBvcnQ9bnVsbCk7ZWxzZXt2YXIgcz1lLmluZGV4T2YoXCI6XCIpLG89ZS5pbmRleE9mKFwiL1wiKSxhPWUuaW5kZXhPZihcIjpcIixzKzEpOy0xIT09YSYmKC0xPT09b3x8YTxvKT8odC5ob3N0bmFtZT1lLnN1YnN0cmluZygwLG4pfHxudWxsLHQucG9ydD1udWxsKTooaT1lLnN1YnN0cmluZygwLG4pLnNwbGl0KFwiOlwiKSx0Lmhvc3RuYW1lPWlbMF18fG51bGwsdC5wb3J0PWlbMV18fG51bGwpfXJldHVybiB0Lmhvc3RuYW1lJiZcIi9cIiE9PWUuc3Vic3RyaW5nKG4pLmNoYXJBdCgwKSYmKG4rKyxlPVwiL1wiK2UpLGUuc3Vic3RyaW5nKG4pfHxcIi9cIn0sbi5kdz1mdW5jdGlvbihlLHQpe3JldHVybiBlPW4uZ3coZSx0KSxuLmZ3KGUsdCl9LG4uZ3c9ZnVuY3Rpb24oZSx0KXt2YXIgcixpPWUuaW5kZXhPZihcIi9cIikscz1lLmxhc3RJbmRleE9mKFwiQFwiLGk+LTE/aTplLmxlbmd0aC0xKTtyZXR1cm4gcz4tMSYmKC0xPT09aXx8czxpKT8ocj1lLnN1YnN0cmluZygwLHMpLnNwbGl0KFwiOlwiKSx0LnVzZXJuYW1lPXJbMF0/bi5kZWNvZGUoclswXSk6bnVsbCxyLnNoaWZ0KCksdC5wYXNzd29yZD1yWzBdP24uZGVjb2RlKHIuam9pbihcIjpcIikpOm51bGwsZT1lLnN1YnN0cmluZyhzKzEpKToodC51c2VybmFtZT1udWxsLHQucGFzc3dvcmQ9bnVsbCksZX0sbi5Fdz1mdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybnt9O2lmKCEoZT1lLnJlcGxhY2UoLyYrL2csXCImXCIpLnJlcGxhY2UoL15cXD8qJip8JiskL2csXCJcIikpKXJldHVybnt9O2Zvcih2YXIgcixpLHMsbz17fSxhPWUuc3BsaXQoXCImXCIpLGg9YS5sZW5ndGgsYz0wO2M8aDtjKyspcj1hW2NdLnNwbGl0KFwiPVwiKSxpPW4uYXcoci5zaGlmdCgpLHQpLHM9ci5sZW5ndGg/bi5hdyhyLmpvaW4oXCI9XCIpLHQpOm51bGwseS5jYWxsKG8saSk/KFwic3RyaW5nXCIhPXR5cGVvZiBvW2ldJiZudWxsIT09b1tpXXx8KG9baV09W29baV1dKSxvW2ldLnB1c2gocykpOm9baV09cztyZXR1cm4gb30sbi5YZz1mdW5jdGlvbihlKXt2YXIgdD1cIlwiO3JldHVybiBlLnByb3RvY29sJiYodCs9ZS5wcm90b2NvbCtcIjpcIiksZS51cm58fCF0JiYhZS5ob3N0bmFtZXx8KHQrPVwiLy9cIiksdCs9bi52dyhlKXx8XCJcIixcInN0cmluZ1wiPT10eXBlb2YgZS5wYXRoJiYoXCIvXCIhPT1lLnBhdGguY2hhckF0KDApJiZcInN0cmluZ1wiPT10eXBlb2YgZS5ob3N0bmFtZSYmKHQrPVwiL1wiKSx0Kz1lLnBhdGgpLFwic3RyaW5nXCI9PXR5cGVvZiBlLnF1ZXJ5JiZlLnF1ZXJ5JiYodCs9XCI/XCIrZS5xdWVyeSksXCJzdHJpbmdcIj09dHlwZW9mIGUucFImJmUucFImJih0Kz1cIiNcIitlLnBSKSx0fSxuLnl3PWZ1bmN0aW9uKGUpe3ZhciB0PVwiXCI7cmV0dXJuIGUuaG9zdG5hbWU/KG4uVFIudGVzdChlLmhvc3RuYW1lKT90Kz1cIltcIitlLmhvc3RuYW1lK1wiXVwiOnQrPWUuaG9zdG5hbWUsZS5wb3J0JiYodCs9XCI6XCIrZS5wb3J0KSx0KTpcIlwifSxuLnZ3PWZ1bmN0aW9uKGUpe3JldHVybiBuLlR3KGUpK24ueXcoZSl9LG4uVHc9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIjtyZXR1cm4gZS51c2VybmFtZSYmKHQrPW4uZW5jb2RlKGUudXNlcm5hbWUpKSxlLnBhc3N3b3JkJiYodCs9XCI6XCIrbi5lbmNvZGUoZS5wYXNzd29yZCkpLHQmJih0Kz1cIkBcIiksdH0sbi5tdz1mdW5jdGlvbihlLHQscil7dmFyIGkscyxvLGgsYz1cIlwiO2ZvcihzIGluIGUpaWYoeS5jYWxsKGUscykmJnMpaWYoYShlW3NdKSlmb3IoaT17fSxvPTAsaD1lW3NdLmxlbmd0aDtvPGg7bysrKXZvaWQgMCE9PWVbc11bb10mJnZvaWQgMD09PWlbZVtzXVtvXStcIlwiXSYmKGMrPVwiJlwiK24uSXcocyxlW3NdW29dLHIpLCEwIT09dCYmKGlbZVtzXVtvXStcIlwiXT0hMCkpO2Vsc2Ugdm9pZCAwIT09ZVtzXSYmKGMrPVwiJlwiK24uSXcocyxlW3NdLHIpKTtyZXR1cm4gYy5zdWJzdHJpbmcoMSl9LG4uSXc9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLm93KGUscikrKG51bGwhPT10P1wiPVwiK24ub3codCxyKTpcIlwiKX0sbi5Tdz1mdW5jdGlvbihlLHQscil7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpZm9yKHZhciBpIGluIHQpeS5jYWxsKHQsaSkmJm4uU3coZSxpLHRbaV0pO2Vsc2V7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyXCIpO2lmKHZvaWQgMD09PWVbdF0pcmV0dXJuIHZvaWQoZVt0XT1yKTtcInN0cmluZ1wiPT10eXBlb2YgZVt0XSYmKGVbdF09W2VbdF1dKSxhKHIpfHwocj1bcl0pLGVbdF09KGVbdF18fFtdKS5jb25jYXQocil9fSxuLlJ3PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxzLGM7aWYoYSh0KSlmb3IoaT0wLHM9dC5sZW5ndGg7aTxzO2krKyllW3RbaV1dPXZvaWQgMDtlbHNlIGlmKFwiUmVnRXhwXCI9PT1vKHQpKWZvcihjIGluIGUpdC50ZXN0KGMpJiYoZVtjXT12b2lkIDApO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIHQpZm9yKGMgaW4gdCl5LmNhbGwodCxjKSYmbi5SdyhlLGMsdFtjXSk7ZWxzZXtpZihcInN0cmluZ1wiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVVJJLnJlbW92ZVF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZywgUmVnRXhwIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXJcIik7dm9pZCAwIT09cj9cIlJlZ0V4cFwiPT09byhyKT8hYShlW3RdKSYmci50ZXN0KGVbdF0pP2VbdF09dm9pZCAwOmVbdF09aChlW3RdLHIpOmVbdF0hPT1TdHJpbmcocil8fGEocikmJjEhPT1yLmxlbmd0aD9hKGVbdF0pJiYoZVt0XT1oKGVbdF0scikpOmVbdF09dm9pZCAwOmVbdF09dm9pZCAwfX0sbi53dz1mdW5jdGlvbihlLHQscixpKXtzd2l0Y2gobyh0KSl7Y2FzZVwiU3RyaW5nXCI6YnJlYWs7Y2FzZVwiUmVnRXhwXCI6Zm9yKHZhciBzIGluIGUpaWYoeS5jYWxsKGUscykmJnQudGVzdChzKSYmKHZvaWQgMD09PXJ8fG4ud3coZSxzLHIpKSlyZXR1cm4hMDtyZXR1cm4hMTtjYXNlXCJPYmplY3RcIjpmb3IodmFyIGggaW4gdClpZih5LmNhbGwodCxoKSYmIW4ud3coZSxoLHRbaF0pKXJldHVybiExO3JldHVybiEwO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihcIlVSSS5oYXNRdWVyeSgpIGFjY2VwdHMgYSBzdHJpbmcsIHJlZ3VsYXIgZXhwcmVzc2lvbiBvciBvYmplY3QgYXMgdGhlIG5hbWUgcGFyYW1ldGVyXCIpfXN3aXRjaChvKHIpKXtjYXNlXCJVbmRlZmluZWRcIjpyZXR1cm4gdCBpbiBlO2Nhc2VcIkJvb2xlYW5cIjpyZXR1cm4gcj09PUJvb2xlYW4oYShlW3RdKT9lW3RdLmxlbmd0aDplW3RdKTtjYXNlXCJGdW5jdGlvblwiOnJldHVybiEhcihlW3RdLHQsZSk7Y2FzZVwiQXJyYXlcIjppZighYShlW3RdKSlyZXR1cm4hMTtyZXR1cm4oaT9jOnUpKGVbdF0scik7Y2FzZVwiUmVnRXhwXCI6cmV0dXJuIGEoZVt0XSk/ISFpJiZjKGVbdF0scik6Qm9vbGVhbihlW3RdJiZlW3RdLm1hdGNoKHIpKTtjYXNlXCJOdW1iZXJcIjpyPVN0cmluZyhyKTtjYXNlXCJTdHJpbmdcIjpyZXR1cm4gYShlW3RdKT8hIWkmJmMoZVt0XSxyKTplW3RdPT09cjtkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoXCJVUkkuaGFzUXVlcnkoKSBhY2NlcHRzIHVuZGVmaW5lZCwgYm9vbGVhbiwgc3RyaW5nLCBudW1iZXIsIFJlZ0V4cCwgRnVuY3Rpb24gYXMgdGhlIHZhbHVlIHBhcmFtZXRlclwiKX19LG4uYnc9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD1bXSxyPTAsaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzPW5ldyBuKGFyZ3VtZW50c1tpXSk7ZS5wdXNoKHMpO2Zvcih2YXIgbz1zLkN3KCksYT0wO2E8by5sZW5ndGg7YSsrKVwic3RyaW5nXCI9PXR5cGVvZiBvW2FdJiZ0LnB1c2gob1thXSksb1thXSYmcisrfWlmKCF0Lmxlbmd0aHx8IXIpcmV0dXJuIG5ldyBuKFwiXCIpO3ZhciBoPW5ldyBuKFwiXCIpLkN3KHQpO3JldHVyblwiXCIhPT1lWzBdLnBhdGgoKSYmXCIvXCIhPT1lWzBdLnBhdGgoKS5zbGljZSgwLDEpfHxoLnBhdGgoXCIvXCIraC5wYXRoKCkpLGgubm9ybWFsaXplKCl9LG4uX3c9ZnVuY3Rpb24oZSx0KXt2YXIgcixpPU1hdGgubWluKGUubGVuZ3RoLHQubGVuZ3RoKTtmb3Iocj0wO3I8aTtyKyspaWYoZS5jaGFyQXQocikhPT10LmNoYXJBdChyKSl7ci0tO2JyZWFrfXJldHVybiByPDE/ZS5jaGFyQXQoMCk9PT10LmNoYXJBdCgwKSYmXCIvXCI9PT1lLmNoYXJBdCgwKT9cIi9cIjpcIlwiOihcIi9cIj09PWUuY2hhckF0KHIpJiZcIi9cIj09PXQuY2hhckF0KHIpfHwocj1lLnN1YnN0cmluZygwLHIpLmxhc3RJbmRleE9mKFwiL1wiKSksZS5zdWJzdHJpbmcoMCxyKzEpKX0sbi5Qdz1mdW5jdGlvbihlLHQscil7cnx8KHI9e30pO3ZhciBpPXIuc3RhcnR8fG4uSVIuc3RhcnQscz1yLmVuZHx8bi5JUi5lbmQsbz1yLnRyaW18fG4uSVIudHJpbSxhPXIuU1J8fG4uSVIuU1IsaD0vW2EtejAtOS1dPVtcIiddPyQvaTtmb3IoaS5sYXN0SW5kZXg9MDs7KXt2YXIgYz1pLmV4ZWMoZSk7aWYoIWMpYnJlYWs7dmFyIHU9Yy5pbmRleDtpZihyLkF3KXt2YXIgbD1lLnNsaWNlKE1hdGgubWF4KHUtMywwKSx1KTtpZihsJiZoLnRlc3QobCkpY29udGludWV9Zm9yKHZhciBwPXUrZS5zbGljZSh1KS5zZWFyY2gocyksZD1lLnNsaWNlKHUscCksZj0tMTs7KXt2YXIgZz1hLmV4ZWMoZCk7aWYoIWcpYnJlYWs7dmFyIEU9Zy5pbmRleCtnWzBdLmxlbmd0aDtmPU1hdGgubWF4KGYsRSl9aWYoZD1mPi0xP2Quc2xpY2UoMCxmKStkLnNsaWNlKGYpLnJlcGxhY2UobyxcIlwiKTpkLnJlcGxhY2UobyxcIlwiKSwhKGQubGVuZ3RoPD1jWzBdLmxlbmd0aHx8ci5PdyYmci5Pdy50ZXN0KGQpKSl7cD11K2QubGVuZ3RoO3ZhciB2PXQoZCx1LHAsZSk7dm9pZCAwIT09dj8odj1TdHJpbmcodiksZT1lLnNsaWNlKDAsdSkrditlLnNsaWNlKHApLGkubGFzdEluZGV4PXUrdi5sZW5ndGgpOmkubGFzdEluZGV4PXB9fXJldHVybiBpLmxhc3RJbmRleD0wLGV9LG4uTnc9ZnVuY3Rpb24odCl7aWYodC5tYXRjaChuLk9SKSl7aWYoIWUpdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgXCInK3QrJ1wiIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dIGFuZCBQdW55Y29kZS5qcyBpcyBub3QgYXZhaWxhYmxlJyk7aWYoZS5Edyh0KS5tYXRjaChuLk9SKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSBcIicrdCsnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKX19LG4ud289ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHQ9e2xSOnRoaXMud28oKX07cmV0dXJuIGkua3cmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkua3cud28mJih0Lmt3PWkua3cud28oKSksaS5MdyYmXCJmdW5jdGlvblwiPT10eXBlb2YgaS5Mdy53byYmKHQuTHc9aS5Mdy53bygpKSxpLk13JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpLk13LndvJiYodC5Ndz1pLk13LndvKCkpLHR9cmV0dXJuIGkubFI9PT10aGlzJiYoaS5sUj1FKSx0aGlzfSx2LlhnPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09ZT90aGlzLkZ3PSEwOih2b2lkIDA9PT1lfHx0aGlzLkZ3KSYmKHRoaXMuVXc9bi5YZyh0aGlzLnVSKSx0aGlzLkZ3PSExKSx0aGlzfSx2LmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMpfSx2LnZhbHVlT2Y9di50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLlhnKCExKS5Vd30sdi5wcm90b2NvbD1mKFwicHJvdG9jb2xcIiksdi51c2VybmFtZT1mKFwidXNlcm5hbWVcIiksdi5wYXNzd29yZD1mKFwicGFzc3dvcmRcIiksdi5ob3N0bmFtZT1mKFwiaG9zdG5hbWVcIiksdi5wb3J0PWYoXCJwb3J0XCIpLHYucXVlcnk9ZyhcInF1ZXJ5XCIsXCI/XCIpLHYucFI9ZyhcImZyYWdtZW50XCIsXCIjXCIpLHYuc2VhcmNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5xdWVyeShlLHQpO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiByJiZyLmxlbmd0aD9cIj9cIityOnJ9LHYuaGFzaD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMucFIoZSx0KTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgciYmci5sZW5ndGg/XCIjXCIrcjpyfSx2LnBhdGhuYW1lPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZXx8ITA9PT1lKXt2YXIgcj10aGlzLnVSLnBhdGh8fCh0aGlzLnVSLmhvc3RuYW1lP1wiL1wiOlwiXCIpO3JldHVybiBlPyh0aGlzLnVSLnVybj9uLmN3Om4uaHcpKHIpOnJ9cmV0dXJuIHRoaXMudVIudXJuP3RoaXMudVIucGF0aD1lP24ubHcoZSk6XCJcIjp0aGlzLnVSLnBhdGg9ZT9uLnV3KGUpOlwiL1wiLHRoaXMuWGcoIXQpLHRoaXN9LHYucGF0aD12LnBhdGhuYW1lLHYuaHJlZj1mdW5jdGlvbihlLHQpe3ZhciByO2lmKHZvaWQgMD09PWUpcmV0dXJuIHRoaXMudG9TdHJpbmcoKTt0aGlzLlV3PVwiXCIsdGhpcy51Uj1uLnVSKCk7dmFyIGk9ZSBpbnN0YW5jZW9mIG4scz1cIm9iamVjdFwiPT10eXBlb2YgZSYmKGUuaG9zdG5hbWV8fGUucGF0aHx8ZS5wYXRobmFtZSk7aWYoZS5ub2RlTmFtZSl7ZT1lW24ueFIoZSldfHxcIlwiLHM9ITF9aWYoIWkmJnMmJnZvaWQgMCE9PWUucGF0aG5hbWUmJihlPWUudG9TdHJpbmcoKSksXCJzdHJpbmdcIj09dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBTdHJpbmcpdGhpcy51Uj1uLnBhcnNlKFN0cmluZyhlKSx0aGlzLnVSKTtlbHNle2lmKCFpJiYhcyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiaW52YWxpZCBpbnB1dFwiKTt2YXIgbz1pP2UudVI6ZTtmb3IociBpbiBvKXkuY2FsbCh0aGlzLnVSLHIpJiYodGhpcy51UltyXT1vW3JdKX1yZXR1cm4gdGhpcy5YZyghdCksdGhpc30sdi5pcz1mdW5jdGlvbihlKXt2YXIgdD0hMSxpPSExLHM9ITEsbz0hMSxhPSExLGg9ITEsYz0hMSx1PSF0aGlzLnVSLnVybjtzd2l0Y2godGhpcy51Ui5ob3N0bmFtZSYmKHU9ITEsaT1uLnlSLnRlc3QodGhpcy51Ui5ob3N0bmFtZSkscz1uLlRSLnRlc3QodGhpcy51Ui5ob3N0bmFtZSksdD1pfHxzLG89IXQsYT1vJiZyJiZyLmhhcyh0aGlzLnVSLmhvc3RuYW1lKSxoPW8mJm4uRVIudGVzdCh0aGlzLnVSLmhvc3RuYW1lKSxjPW8mJm4udlIudGVzdCh0aGlzLnVSLmhvc3RuYW1lKSksZS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJyZWxhdGl2ZVwiOnJldHVybiB1O2Nhc2VcImFic29sdXRlXCI6cmV0dXJuIXU7Y2FzZVwiZG9tYWluXCI6Y2FzZVwibmFtZVwiOnJldHVybiBvO2Nhc2VcInNsZFwiOnJldHVybiBhO2Nhc2VcImlwXCI6cmV0dXJuIHQ7Y2FzZVwiaXA0XCI6Y2FzZVwiaXB2NFwiOmNhc2VcImluZXQ0XCI6cmV0dXJuIGk7Y2FzZVwiaXA2XCI6Y2FzZVwiaXB2NlwiOmNhc2VcImluZXQ2XCI6cmV0dXJuIHM7Y2FzZVwiaWRuXCI6cmV0dXJuIGg7Y2FzZVwidXJsXCI6cmV0dXJuIXRoaXMudVIudXJuO2Nhc2VcInVyblwiOnJldHVybiEhdGhpcy51Ui51cm47Y2FzZVwicHVueWNvZGVcIjpyZXR1cm4gY31yZXR1cm4gbnVsbH07dmFyIFI9di5wcm90b2NvbCx3PXYucG9ydCxiPXYuaG9zdG5hbWU7di5wcm90b2NvbD1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PWUmJmUmJihlPWUucmVwbGFjZSgvOihcXC9cXC8pPyQvLFwiXCIpLCFlLm1hdGNoKG4uZ1IpKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm90b2NvbCBcIicrZStcIlxcXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuKy1dIG9yIGRvZXNuJ3Qgc3RhcnQgd2l0aCBbQS1aXVwiKTtyZXR1cm4gUi5jYWxsKHRoaXMsZSx0KX0sdi5zY2hlbWU9di5wcm90b2NvbCx2LnBvcnQ9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLnVSLnVybilyZXR1cm4gdm9pZCAwPT09ZT9cIlwiOnRoaXM7aWYodm9pZCAwIT09ZSYmKDA9PT1lJiYoZT1udWxsKSxlJiYoZSs9XCJcIixcIjpcIj09PWUuY2hhckF0KDApJiYoZT1lLnN1YnN0cmluZygxKSksZS5tYXRjaCgvW14wLTldLykpKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdQb3J0IFwiJytlKydcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gWzAtOV0nKTtyZXR1cm4gdy5jYWxsKHRoaXMsZSx0KX0sdi5ob3N0bmFtZT1mdW5jdGlvbihlLHQpe2lmKHRoaXMudVIudXJuKXJldHVybiB2b2lkIDA9PT1lP1wiXCI6dGhpcztpZih2b2lkIDAhPT1lKXt2YXIgcj17fTtpZihcIi9cIiE9PW4uZncoZSxyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSBcIicrZSsnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTtlPXIuaG9zdG5hbWV9cmV0dXJuIGIuY2FsbCh0aGlzLGUsdCl9LHYub3JpZ2luPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy51Ui51cm4pcmV0dXJuIHZvaWQgMD09PWU/XCJcIjp0aGlzO2lmKHZvaWQgMD09PWUpe3ZhciByPXRoaXMucHJvdG9jb2woKTtyZXR1cm4gdGhpcy5CdygpPyhyP3IrXCI6Ly9cIjpcIlwiKSt0aGlzLkJ3KCk6XCJcIn12YXIgaT1uKGUpO3JldHVybiB0aGlzLnByb3RvY29sKGkucHJvdG9jb2woKSkuQncoaS5CdygpKS5YZyghdCksdGhpc30sdi5ob3N0PWZ1bmN0aW9uKGUsdCl7aWYodGhpcy51Ui51cm4pcmV0dXJuIHZvaWQgMD09PWU/XCJcIjp0aGlzO2lmKHZvaWQgMD09PWUpcmV0dXJuIHRoaXMudVIuaG9zdG5hbWU/bi55dyh0aGlzLnVSKTpcIlwiO2lmKFwiL1wiIT09bi5mdyhlLHRoaXMudVIpKXRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lIFwiJytlKydcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXScpO3JldHVybiB0aGlzLlhnKCF0KSx0aGlzfSx2LkJ3PWZ1bmN0aW9uKGUsdCl7aWYodGhpcy51Ui51cm4pcmV0dXJuIHZvaWQgMD09PWU/XCJcIjp0aGlzO2lmKHZvaWQgMD09PWUpcmV0dXJuIHRoaXMudVIuaG9zdG5hbWU/bi52dyh0aGlzLnVSKTpcIlwiO2lmKFwiL1wiIT09bi5kdyhlLHRoaXMudVIpKXRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lIFwiJytlKydcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXScpO3JldHVybiB0aGlzLlhnKCF0KSx0aGlzfSx2Lkh3PWZ1bmN0aW9uKGUsdCl7aWYodGhpcy51Ui51cm4pcmV0dXJuIHZvaWQgMD09PWU/XCJcIjp0aGlzO2lmKHZvaWQgMD09PWUpe3ZhciByPW4uVHcodGhpcy51Uik7cmV0dXJuIHI/ci5zdWJzdHJpbmcoMCxyLmxlbmd0aC0xKTpyfXJldHVyblwiQFwiIT09ZVtlLmxlbmd0aC0xXSYmKGUrPVwiQFwiKSxuLmd3KGUsdGhpcy51UiksdGhpcy5YZyghdCksdGhpc30sdi54dz1mdW5jdGlvbihlLHQpe3ZhciByO3JldHVybiB2b2lkIDA9PT1lP3RoaXMucGF0aCgpK3RoaXMuc2VhcmNoKCkrdGhpcy5oYXNoKCk6KHI9bi5wYXJzZShlKSx0aGlzLnVSLnBhdGg9ci5wYXRoLHRoaXMudVIucXVlcnk9ci5xdWVyeSx0aGlzLnVSLnBSPXIucFIsdGhpcy5YZyghdCksdGhpcyl9LHYucXc9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLnVSLnVybilyZXR1cm4gdm9pZCAwPT09ZT9cIlwiOnRoaXM7aWYodm9pZCAwPT09ZSl7aWYoIXRoaXMudVIuaG9zdG5hbWV8fHRoaXMuaXMoXCJJUFwiKSlyZXR1cm5cIlwiO3ZhciByPXRoaXMudVIuaG9zdG5hbWUubGVuZ3RoLXRoaXMuZG9tYWluKCkubGVuZ3RoLTE7cmV0dXJuIHRoaXMudVIuaG9zdG5hbWUuc3Vic3RyaW5nKDAscil8fFwiXCJ9dmFyIGk9dGhpcy51Ui5ob3N0bmFtZS5sZW5ndGgtdGhpcy5kb21haW4oKS5sZW5ndGgsbz10aGlzLnVSLmhvc3RuYW1lLnN1YnN0cmluZygwLGkpLGE9bmV3IFJlZ0V4cChcIl5cIitzKG8pKTtyZXR1cm4gZSYmXCIuXCIhPT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmKGUrPVwiLlwiKSxlJiZuLk53KGUpLHRoaXMudVIuaG9zdG5hbWU9dGhpcy51Ui5ob3N0bmFtZS5yZXBsYWNlKGEsZSksdGhpcy5YZyghdCksdGhpc30sdi5kb21haW49ZnVuY3Rpb24oZSx0KXtpZih0aGlzLnVSLnVybilyZXR1cm4gdm9pZCAwPT09ZT9cIlwiOnRoaXM7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBlJiYodD1lLGU9dm9pZCAwKSx2b2lkIDA9PT1lKXtpZighdGhpcy51Ui5ob3N0bmFtZXx8dGhpcy5pcyhcIklQXCIpKXJldHVyblwiXCI7dmFyIHI9dGhpcy51Ui5ob3N0bmFtZS5tYXRjaCgvXFwuL2cpO2lmKHImJnIubGVuZ3RoPDIpcmV0dXJuIHRoaXMudVIuaG9zdG5hbWU7dmFyIGk9dGhpcy51Ui5ob3N0bmFtZS5sZW5ndGgtdGhpcy5Hdyh0KS5sZW5ndGgtMTtyZXR1cm4gaT10aGlzLnVSLmhvc3RuYW1lLmxhc3RJbmRleE9mKFwiLlwiLGktMSkrMSx0aGlzLnVSLmhvc3RuYW1lLnN1YnN0cmluZyhpKXx8XCJcIn1pZighZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2Fubm90IHNldCBkb21haW4gZW1wdHlcIik7aWYobi5OdyhlKSwhdGhpcy51Ui5ob3N0bmFtZXx8dGhpcy5pcyhcIklQXCIpKXRoaXMudVIuaG9zdG5hbWU9ZTtlbHNle3ZhciBvPW5ldyBSZWdFeHAocyh0aGlzLmRvbWFpbigpKStcIiRcIik7dGhpcy51Ui5ob3N0bmFtZT10aGlzLnVSLmhvc3RuYW1lLnJlcGxhY2UobyxlKX1yZXR1cm4gdGhpcy5YZyghdCksdGhpc30sdi5Hdz1mdW5jdGlvbihlLHQpe2lmKHRoaXMudVIudXJuKXJldHVybiB2b2lkIDA9PT1lP1wiXCI6dGhpcztpZihcImJvb2xlYW5cIj09dHlwZW9mIGUmJih0PWUsZT12b2lkIDApLHZvaWQgMD09PWUpe2lmKCF0aGlzLnVSLmhvc3RuYW1lfHx0aGlzLmlzKFwiSVBcIikpcmV0dXJuXCJcIjt2YXIgaT10aGlzLnVSLmhvc3RuYW1lLmxhc3RJbmRleE9mKFwiLlwiKSxuPXRoaXMudVIuaG9zdG5hbWUuc3Vic3RyaW5nKGkrMSk7cmV0dXJuITAhPT10JiZyJiZyLmxpc3Rbbi50b0xvd2VyQ2FzZSgpXT9yLmdldCh0aGlzLnVSLmhvc3RuYW1lKXx8bjpufXZhciBvO2lmKCFlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3Qgc2V0IFRMRCBlbXB0eVwiKTtpZihlLm1hdGNoKC9bXmEtekEtWjAtOS1dLykpe2lmKCFyfHwhci5pcyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUTEQgXCInK2UrJ1wiIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05XScpO289bmV3IFJlZ0V4cChzKHRoaXMuR3coKSkrXCIkXCIpLHRoaXMudVIuaG9zdG5hbWU9dGhpcy51Ui5ob3N0bmFtZS5yZXBsYWNlKG8sZSl9ZWxzZXtpZighdGhpcy51Ui5ob3N0bmFtZXx8dGhpcy5pcyhcIklQXCIpKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcImNhbm5vdCBzZXQgVExEIG9uIG5vbi1kb21haW4gaG9zdFwiKTtvPW5ldyBSZWdFeHAocyh0aGlzLkd3KCkpK1wiJFwiKSx0aGlzLnVSLmhvc3RuYW1lPXRoaXMudVIuaG9zdG5hbWUucmVwbGFjZShvLGUpfXJldHVybiB0aGlzLlhnKCF0KSx0aGlzfSx2LlZ3PWZ1bmN0aW9uKGUsdCl7aWYodGhpcy51Ui51cm4pcmV0dXJuIHZvaWQgMD09PWU/XCJcIjp0aGlzO2lmKHZvaWQgMD09PWV8fCEwPT09ZSl7aWYoIXRoaXMudVIucGF0aCYmIXRoaXMudVIuaG9zdG5hbWUpcmV0dXJuXCJcIjtpZihcIi9cIj09PXRoaXMudVIucGF0aClyZXR1cm5cIi9cIjt2YXIgcj10aGlzLnVSLnBhdGgubGVuZ3RoLXRoaXMuZmlsZW5hbWUoKS5sZW5ndGgtMSxpPXRoaXMudVIucGF0aC5zdWJzdHJpbmcoMCxyKXx8KHRoaXMudVIuaG9zdG5hbWU/XCIvXCI6XCJcIik7cmV0dXJuIGU/bi5odyhpKTppfXZhciBvPXRoaXMudVIucGF0aC5sZW5ndGgtdGhpcy5maWxlbmFtZSgpLmxlbmd0aCxhPXRoaXMudVIucGF0aC5zdWJzdHJpbmcoMCxvKSxoPW5ldyBSZWdFeHAoXCJeXCIrcyhhKSk7cmV0dXJuIHRoaXMuaXMoXCJyZWxhdGl2ZVwiKXx8KGV8fChlPVwiL1wiKSxcIi9cIiE9PWUuY2hhckF0KDApJiYoZT1cIi9cIitlKSksZSYmXCIvXCIhPT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmKGUrPVwiL1wiKSxlPW4udXcoZSksdGhpcy51Ui5wYXRoPXRoaXMudVIucGF0aC5yZXBsYWNlKGgsZSksdGhpcy5YZyghdCksdGhpc30sdi5maWxlbmFtZT1mdW5jdGlvbihlLHQpe2lmKHRoaXMudVIudXJuKXJldHVybiB2b2lkIDA9PT1lP1wiXCI6dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgZSl7aWYoIXRoaXMudVIucGF0aHx8XCIvXCI9PT10aGlzLnVSLnBhdGgpcmV0dXJuXCJcIjt2YXIgcj10aGlzLnVSLnBhdGgubGFzdEluZGV4T2YoXCIvXCIpLGk9dGhpcy51Ui5wYXRoLnN1YnN0cmluZyhyKzEpO3JldHVybiBlP24uancoaSk6aX12YXIgbz0hMTtcIi9cIj09PWUuY2hhckF0KDApJiYoZT1lLnN1YnN0cmluZygxKSksZS5tYXRjaCgvXFwuP1xcLy8pJiYobz0hMCk7dmFyIGE9bmV3IFJlZ0V4cChzKHRoaXMuZmlsZW5hbWUoKSkrXCIkXCIpO3JldHVybiBlPW4udXcoZSksdGhpcy51Ui5wYXRoPXRoaXMudVIucGF0aC5yZXBsYWNlKGEsZSksbz90aGlzLlF3KHQpOnRoaXMuWGcoIXQpLHRoaXN9LHYuc3VmZml4PWZ1bmN0aW9uKGUsdCl7aWYodGhpcy51Ui51cm4pcmV0dXJuIHZvaWQgMD09PWU/XCJcIjp0aGlzO2lmKHZvaWQgMD09PWV8fCEwPT09ZSl7aWYoIXRoaXMudVIucGF0aHx8XCIvXCI9PT10aGlzLnVSLnBhdGgpcmV0dXJuXCJcIjt2YXIgcixpLG89dGhpcy5maWxlbmFtZSgpLGE9by5sYXN0SW5kZXhPZihcIi5cIik7cmV0dXJuLTE9PT1hP1wiXCI6KHI9by5zdWJzdHJpbmcoYSsxKSxpPS9eW2EtejAtOSVdKyQvaS50ZXN0KHIpP3I6XCJcIixlP24uancoaSk6aSl9XCIuXCI9PT1lLmNoYXJBdCgwKSYmKGU9ZS5zdWJzdHJpbmcoMSkpO3ZhciBoLGM9dGhpcy5zdWZmaXgoKTtpZihjKWg9ZT9uZXcgUmVnRXhwKHMoYykrXCIkXCIpOm5ldyBSZWdFeHAocyhcIi5cIitjKStcIiRcIik7ZWxzZXtpZighZSlyZXR1cm4gdGhpczt0aGlzLnVSLnBhdGgrPVwiLlwiK24udXcoZSl9cmV0dXJuIGgmJihlPW4udXcoZSksdGhpcy51Ui5wYXRoPXRoaXMudVIucGF0aC5yZXBsYWNlKGgsZSkpLHRoaXMuWGcoIXQpLHRoaXN9LHYuQ3c9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMudVIudXJuP1wiOlwiOlwiL1wiLG49dGhpcy5wYXRoKCkscz1cIi9cIj09PW4uc3Vic3RyaW5nKDAsMSksbz1uLnNwbGl0KGkpO2lmKHZvaWQgMCE9PWUmJlwibnVtYmVyXCIhPXR5cGVvZiBlJiYocj10LHQ9ZSxlPXZvaWQgMCksdm9pZCAwIT09ZSYmXCJudW1iZXJcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCdCYWQgc2VnbWVudCBcIicrZSsnXCIsIG11c3QgYmUgMC1iYXNlZCBpbnRlZ2VyJyk7aWYocyYmby5zaGlmdCgpLGU8MCYmKGU9TWF0aC5tYXgoby5sZW5ndGgrZSwwKSksdm9pZCAwPT09dClyZXR1cm4gdm9pZCAwPT09ZT9vOm9bZV07aWYobnVsbD09PWV8fHZvaWQgMD09PW9bZV0paWYoYSh0KSl7bz1bXTtmb3IodmFyIGg9MCxjPXQubGVuZ3RoO2g8YztoKyspKHRbaF0ubGVuZ3RofHxvLmxlbmd0aCYmb1tvLmxlbmd0aC0xXS5sZW5ndGgpJiYoby5sZW5ndGgmJiFvW28ubGVuZ3RoLTFdLmxlbmd0aCYmby5wb3AoKSxvLnB1c2gobCh0W2hdKSkpfWVsc2UodHx8XCJzdHJpbmdcIj09dHlwZW9mIHQpJiYodD1sKHQpLFwiXCI9PT1vW28ubGVuZ3RoLTFdP29bby5sZW5ndGgtMV09dDpvLnB1c2godCkpO2Vsc2UgdD9vW2VdPWwodCk6by5zcGxpY2UoZSwxKTtyZXR1cm4gcyYmby51bnNoaWZ0KFwiXCIpLHRoaXMucGF0aChvLmpvaW4oaSkscil9LHYuS3c9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLHMsbztpZihcIm51bWJlclwiIT10eXBlb2YgZSYmKHI9dCx0PWUsZT12b2lkIDApLHZvaWQgMD09PXQpe2lmKGk9dGhpcy5DdyhlLHQsciksYShpKSlmb3Iocz0wLG89aS5sZW5ndGg7czxvO3MrKylpW3NdPW4uZGVjb2RlKGlbc10pO2Vsc2UgaT12b2lkIDAhPT1pP24uZGVjb2RlKGkpOnZvaWQgMDtyZXR1cm4gaX1pZihhKHQpKWZvcihzPTAsbz10Lmxlbmd0aDtzPG87cysrKXRbc109bi5lbmNvZGUodFtzXSk7ZWxzZSB0PVwic3RyaW5nXCI9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgU3RyaW5nP24uZW5jb2RlKHQpOnQ7cmV0dXJuIHRoaXMuQ3coZSx0LHIpfTt2YXIgQz12LnF1ZXJ5O3JldHVybiB2LnF1ZXJ5PWZ1bmN0aW9uKGUsdCl7aWYoITA9PT1lKXJldHVybiBuLkV3KHRoaXMudVIucXVlcnksdGhpcy51Ui5mUik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZSl7dmFyIHI9bi5Fdyh0aGlzLnVSLnF1ZXJ5LHRoaXMudVIuZlIpLGk9ZS5jYWxsKHRoaXMscik7cmV0dXJuIHRoaXMudVIucXVlcnk9bi5tdyhpfHxyLHRoaXMudVIuZFIsdGhpcy51Ui5mUiksdGhpcy5YZyghdCksdGhpc31yZXR1cm4gdm9pZCAwIT09ZSYmXCJzdHJpbmdcIiE9dHlwZW9mIGU/KHRoaXMudVIucXVlcnk9bi5tdyhlLHRoaXMudVIuZFIsdGhpcy51Ui5mUiksdGhpcy5YZyghdCksdGhpcyk6Qy5jYWxsKHRoaXMsZSx0KX0sdi5Zdz1mdW5jdGlvbihlLHQscil7dmFyIGk9bi5Fdyh0aGlzLnVSLnF1ZXJ5LHRoaXMudVIuZlIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlfHxlIGluc3RhbmNlb2YgU3RyaW5nKWlbZV09dm9pZCAwIT09dD90Om51bGw7ZWxzZXtpZihcIm9iamVjdFwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVVJJLmFkZFF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgbmFtZSBwYXJhbWV0ZXJcIik7Zm9yKHZhciBzIGluIGUpeS5jYWxsKGUscykmJihpW3NdPWVbc10pfXJldHVybiB0aGlzLnVSLnF1ZXJ5PW4ubXcoaSx0aGlzLnVSLmRSLHRoaXMudVIuZlIpLFwic3RyaW5nXCIhPXR5cGVvZiBlJiYocj10KSx0aGlzLlhnKCFyKSx0aGlzfSx2LlN3PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1uLkV3KHRoaXMudVIucXVlcnksdGhpcy51Ui5mUik7cmV0dXJuIG4uU3coaSxlLHZvaWQgMD09PXQ/bnVsbDp0KSx0aGlzLnVSLnF1ZXJ5PW4ubXcoaSx0aGlzLnVSLmRSLHRoaXMudVIuZlIpLFwic3RyaW5nXCIhPXR5cGVvZiBlJiYocj10KSx0aGlzLlhnKCFyKSx0aGlzfSx2LlJ3PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1uLkV3KHRoaXMudVIucXVlcnksdGhpcy51Ui5mUik7cmV0dXJuIG4uUncoaSxlLHQpLHRoaXMudVIucXVlcnk9bi5tdyhpLHRoaXMudVIuZFIsdGhpcy51Ui5mUiksXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihyPXQpLHRoaXMuWGcoIXIpLHRoaXN9LHYud3c9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPW4uRXcodGhpcy51Ui5xdWVyeSx0aGlzLnVSLmZSKTtyZXR1cm4gbi53dyhpLGUsdCxyKX0sdi5Xdz12Lll3LHYuenc9di5Tdyx2Lkp3PXYuUncsdi5Ydz12Lnd3LHYubm9ybWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudVIudXJuP3RoaXMuZWIoITEpLlF3KCExKS4kdyghMSkuWncoITEpLlhnKCk6dGhpcy5lYighMSkucmIoITEpLnRiKCExKS5RdyghMSkuJHcoITEpLlp3KCExKS5YZygpfSx2LmViPWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLnVSLnByb3RvY29sJiYodGhpcy51Ui5wcm90b2NvbD10aGlzLnVSLnByb3RvY29sLnRvTG93ZXJDYXNlKCksdGhpcy5YZyghZSkpLHRoaXN9LHYucmI9ZnVuY3Rpb24ocil7cmV0dXJuIHRoaXMudVIuaG9zdG5hbWUmJih0aGlzLmlzKFwiSUROXCIpJiZlP3RoaXMudVIuaG9zdG5hbWU9ZS5Edyh0aGlzLnVSLmhvc3RuYW1lKTp0aGlzLmlzKFwiSVB2NlwiKSYmdCYmKHRoaXMudVIuaG9zdG5hbWU9dC5pYih0aGlzLnVSLmhvc3RuYW1lKSksdGhpcy51Ui5ob3N0bmFtZT10aGlzLnVSLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCksdGhpcy5YZyghcikpLHRoaXN9LHYudGI9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMudVIucHJvdG9jb2wmJnRoaXMudVIucG9ydD09PW4uUlJbdGhpcy51Ui5wcm90b2NvbF0mJih0aGlzLnVSLnBvcnQ9bnVsbCx0aGlzLlhnKCFlKSksdGhpc30sdi5Rdz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnVSLnBhdGg7aWYoIXQpcmV0dXJuIHRoaXM7aWYodGhpcy51Ui51cm4pcmV0dXJuIHRoaXMudVIucGF0aD1uLmx3KHRoaXMudVIucGF0aCksdGhpcy5YZyghZSksdGhpcztpZihcIi9cIj09PXRoaXMudVIucGF0aClyZXR1cm4gdGhpczt0PW4udXcodCk7dmFyIHIsaSxzLG89XCJcIjtmb3IoXCIvXCIhPT10LmNoYXJBdCgwKSYmKHI9ITAsdD1cIi9cIit0KSxcIi8uLlwiIT09dC5zbGljZSgtMykmJlwiLy5cIiE9PXQuc2xpY2UoLTIpfHwodCs9XCIvXCIpLHQ9dC5yZXBsYWNlKC8oXFwvKFxcLlxcLykrKXwoXFwvXFwuJCkvZyxcIi9cIikucmVwbGFjZSgvXFwvezIsfS9nLFwiL1wiKSxyJiYobz10LnN1YnN0cmluZygxKS5tYXRjaCgvXihcXC5cXC5cXC8pKy8pfHxcIlwiKSYmKG89b1swXSk7Oyl7aWYoLTE9PT0oaT10LnNlYXJjaCgvXFwvXFwuXFwuKFxcL3wkKS8pKSlicmVhazswIT09aT8ocz10LnN1YnN0cmluZygwLGkpLmxhc3RJbmRleE9mKFwiL1wiKSwtMT09PXMmJihzPWkpLHQ9dC5zdWJzdHJpbmcoMCxzKSt0LnN1YnN0cmluZyhpKzMpKTp0PXQuc3Vic3RyaW5nKDMpfXJldHVybiByJiZ0aGlzLmlzKFwicmVsYXRpdmVcIikmJih0PW8rdC5zdWJzdHJpbmcoMSkpLHRoaXMudVIucGF0aD10LHRoaXMuWGcoIWUpLHRoaXN9LHYubmI9di5Rdyx2LiR3PWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLnVSLnF1ZXJ5JiYodGhpcy51Ui5xdWVyeS5sZW5ndGg/dGhpcy5xdWVyeShuLkV3KHRoaXMudVIucXVlcnksdGhpcy51Ui5mUikpOnRoaXMudVIucXVlcnk9bnVsbCx0aGlzLlhnKCFlKSksdGhpc30sdi5adz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy51Ui5wUnx8KHRoaXMudVIucFI9bnVsbCx0aGlzLlhnKCFlKSksdGhpc30sdi5zYj12LiR3LHYub2I9di5adyx2LnFSPWZ1bmN0aW9uKCl7dmFyIGU9bi5lbmNvZGUsdD1uLmRlY29kZTtuLmVuY29kZT1lc2NhcGUsbi5kZWNvZGU9ZGVjb2RlVVJJQ29tcG9uZW50O3RyeXt0aGlzLm5vcm1hbGl6ZSgpfWZpbmFsbHl7bi5lbmNvZGU9ZSxuLmRlY29kZT10fXJldHVybiB0aGlzfSx2LkdSPWZ1bmN0aW9uKCl7dmFyIGU9bi5lbmNvZGUsdD1uLmRlY29kZTtuLmVuY29kZT1kLG4uZGVjb2RlPXVuZXNjYXBlO3RyeXt0aGlzLm5vcm1hbGl6ZSgpfWZpbmFsbHl7bi5lbmNvZGU9ZSxuLmRlY29kZT10fXJldHVybiB0aGlzfSx2LmFiPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jbG9uZSgpO3QudXNlcm5hbWUoXCJcIikucGFzc3dvcmQoXCJcIikubm9ybWFsaXplKCk7dmFyIHI9XCJcIjtpZih0LnVSLnByb3RvY29sJiYocis9dC51Ui5wcm90b2NvbCtcIjovL1wiKSx0LnVSLmhvc3RuYW1lJiYodC5pcyhcInB1bnljb2RlXCIpJiZlPyhyKz1lLmhiKHQudVIuaG9zdG5hbWUpLHQudVIucG9ydCYmKHIrPVwiOlwiK3QudVIucG9ydCkpOnIrPXQuaG9zdCgpKSx0LnVSLmhvc3RuYW1lJiZ0LnVSLnBhdGgmJlwiL1wiIT09dC51Ui5wYXRoLmNoYXJBdCgwKSYmKHIrPVwiL1wiKSxyKz10LnBhdGgoITApLHQudVIucXVlcnkpe2Zvcih2YXIgaT1cIlwiLHM9MCxvPXQudVIucXVlcnkuc3BsaXQoXCImXCIpLGE9by5sZW5ndGg7czxhO3MrKyl7dmFyIGg9KG9bc118fFwiXCIpLnNwbGl0KFwiPVwiKTtpKz1cIiZcIituLmF3KGhbMF0sdGhpcy51Ui5mUikucmVwbGFjZSgvJi9nLFwiJTI2XCIpLHZvaWQgMCE9PWhbMV0mJihpKz1cIj1cIituLmF3KGhbMV0sdGhpcy51Ui5mUikucmVwbGFjZSgvJi9nLFwiJTI2XCIpKX1yKz1cIj9cIitpLnN1YnN0cmluZygxKX1yZXR1cm4gcis9bi5hdyh0Lmhhc2goKSwhMCl9LHYuUGg9ZnVuY3Rpb24oZSl7dmFyIHQscixpLHM9dGhpcy5jbG9uZSgpLG89W1wicHJvdG9jb2xcIixcInVzZXJuYW1lXCIsXCJwYXNzd29yZFwiLFwiaG9zdG5hbWVcIixcInBvcnRcIl07aWYodGhpcy51Ui51cm4pdGhyb3cgbmV3IEVycm9yKFwiVVJOcyBkbyBub3QgaGF2ZSBhbnkgZ2VuZXJhbGx5IGRlZmluZWQgaGllcmFyY2hpY2FsIGNvbXBvbmVudHNcIik7aWYoZSBpbnN0YW5jZW9mIG58fChlPW5ldyBuKGUpKSxzLnVSLnByb3RvY29sKXJldHVybiBzO2lmKHMudVIucHJvdG9jb2w9ZS51Ui5wcm90b2NvbCx0aGlzLnVSLmhvc3RuYW1lKXJldHVybiBzO2ZvcihyPTA7aT1vW3JdO3IrKylzLnVSW2ldPWUudVJbaV07cmV0dXJuIHMudVIucGF0aD8oXCIuLlwiPT09cy51Ui5wYXRoLnN1YnN0cmluZygtMikmJihzLnVSLnBhdGgrPVwiL1wiKSxcIi9cIiE9PXMucGF0aCgpLmNoYXJBdCgwKSYmKHQ9ZS5WdygpLHQ9dHx8KDA9PT1lLnBhdGgoKS5pbmRleE9mKFwiL1wiKT9cIi9cIjpcIlwiKSxzLnVSLnBhdGg9KHQ/dCtcIi9cIjpcIlwiKStzLnVSLnBhdGgscy5RdygpKSk6KHMudVIucGF0aD1lLnVSLnBhdGgscy51Ui5xdWVyeXx8KHMudVIucXVlcnk9ZS51Ui5xdWVyeSkpLHMuWGcoKSxzfSx2LmNiPWZ1bmN0aW9uKGUpe3ZhciB0LHIsaSxzLG8sYT10aGlzLmNsb25lKCkubm9ybWFsaXplKCk7aWYoYS51Ui51cm4pdGhyb3cgbmV3IEVycm9yKFwiVVJOcyBkbyBub3QgaGF2ZSBhbnkgZ2VuZXJhbGx5IGRlZmluZWQgaGllcmFyY2hpY2FsIGNvbXBvbmVudHNcIik7aWYoZT1uZXcgbihlKS5ub3JtYWxpemUoKSx0PWEudVIscj1lLnVSLHM9YS5wYXRoKCksbz1lLnBhdGgoKSxcIi9cIiE9PXMuY2hhckF0KDApKXRocm93IG5ldyBFcnJvcihcIlVSSSBpcyBhbHJlYWR5IHJlbGF0aXZlXCIpO2lmKFwiL1wiIT09by5jaGFyQXQoMCkpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNhbGN1bGF0ZSBhIFVSSSByZWxhdGl2ZSB0byBhbm90aGVyIHJlbGF0aXZlIFVSSVwiKTtpZih0LnByb3RvY29sPT09ci5wcm90b2NvbCYmKHQucHJvdG9jb2w9bnVsbCksdC51c2VybmFtZSE9PXIudXNlcm5hbWV8fHQucGFzc3dvcmQhPT1yLnBhc3N3b3JkKXJldHVybiBhLlhnKCk7aWYobnVsbCE9PXQucHJvdG9jb2x8fG51bGwhPT10LnVzZXJuYW1lfHxudWxsIT09dC5wYXNzd29yZClyZXR1cm4gYS5YZygpO2lmKHQuaG9zdG5hbWUhPT1yLmhvc3RuYW1lfHx0LnBvcnQhPT1yLnBvcnQpcmV0dXJuIGEuWGcoKTtpZih0Lmhvc3RuYW1lPW51bGwsdC5wb3J0PW51bGwscz09PW8pcmV0dXJuIHQucGF0aD1cIlwiLGEuWGcoKTtpZighKGk9bi5fdyhzLG8pKSlyZXR1cm4gYS5YZygpO3ZhciBoPXIucGF0aC5zdWJzdHJpbmcoaS5sZW5ndGgpLnJlcGxhY2UoL1teXFwvXSokLyxcIlwiKS5yZXBsYWNlKC8uKj9cXC8vZyxcIi4uL1wiKTtyZXR1cm4gdC5wYXRoPWgrdC5wYXRoLnN1YnN0cmluZyhpLmxlbmd0aCl8fFwiLi9cIixhLlhnKCl9LHYuY3M9ZnVuY3Rpb24oZSl7dmFyIHQscixpLHM9dGhpcy5jbG9uZSgpLG89bmV3IG4oZSksaD17fSxjPXt9LGw9e307aWYocy5ub3JtYWxpemUoKSxvLm5vcm1hbGl6ZSgpLHMudG9TdHJpbmcoKT09PW8udG9TdHJpbmcoKSlyZXR1cm4hMDtpZih0PXMucXVlcnkoKSxyPW8ucXVlcnkoKSxzLnF1ZXJ5KFwiXCIpLG8ucXVlcnkoXCJcIikscy50b1N0cmluZygpIT09by50b1N0cmluZygpKXJldHVybiExO2lmKHQubGVuZ3RoIT09ci5sZW5ndGgpcmV0dXJuITE7aD1uLkV3KHQsdGhpcy51Ui5mUiksYz1uLkV3KHIsdGhpcy51Ui5mUik7Zm9yKGkgaW4gaClpZih5LmNhbGwoaCxpKSl7aWYoYShoW2ldKSl7aWYoIXUoaFtpXSxjW2ldKSlyZXR1cm4hMX1lbHNlIGlmKGhbaV0hPT1jW2ldKXJldHVybiExO2xbaV09ITB9Zm9yKGkgaW4gYylpZih5LmNhbGwoYyxpKSYmIWxbaV0pcmV0dXJuITE7cmV0dXJuITB9LHYuZFI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudVIuZFI9ISFlLHRoaXN9LHYuZlI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudVIuZlI9ISFlLHRoaXN9LG59KX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuaHV8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiYoZVtpXT10W2ldKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cig3Mykscz1yKDcxKSxvPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQocil7dmFyIGk9ZS5jYWxsKHRoaXMscil8fHRoaXM7cmV0dXJuIGkuRE9ORT00LGkuTE9BRElORz0zLGkuSEVBREVSU19SRUNFSVZFRD0yLGkuT1BFTkVEPTEsaS5VTlNFTlQ9MCxpLmludGVybmFsPSExLGkuaWQ9dC5BZysrLGl9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7aWYodGhpcy5yZWFkeVN0YXRlIT09dGhpcy5PUEVORUQpdGhyb3cgbmV3IEVycm9yKFwiVGhlIG9iamVjdCdzIHN0YXRlIG11c3QgYmUgT1BFTkVELlwiKTtpZighdGhpcy5zZXNzaW9uSWQpe3ZhciBlPU9iamVjdC5rZXlzKHQudWIpO2UubGVuZ3RoPjAmJih0aGlzLnNlc3Npb25JZD10LnViW2VbMF1dKX1uLmxiLkFwaSgpLnJlcXVlc3QodGhpcyx0aGlzLnNlc3Npb25JZCl9LHQucHJvdG90eXBlLmFib3J0PWZ1bmN0aW9uKCl7bi5sYi5BcGkoKS5hYm9ydCh0aGlzLHRoaXMuc2Vzc2lvbklkKX0sdH0ocy5wYik7by51Yj17fSxvLkFnPTAsdC5IaXZlUmVxdWVzdD1vfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigwKSxuPXIoOCkscz1yKDYpLG89cy5oZS5kaCxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5SZXBvcnRpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHA9XCJTVEFUU1wiLGkuRnJhbWV3b3JrLnJlc29sdmUobi5wYy5oYyl9LGUuc3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcHB9LGUuZ2V0VmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZlcnNpb259LGV9KCk7YS52ZXJzaW9uPW8sdC5IaXZlPWF9LGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBUaHJpZnQ9e2ZiOlwiMC45LjJcIixUeXBlOntTVE9QOjAsVk9JRDoxLEJPT0w6MixCWVRFOjMsSTA4OjMsRE9VQkxFOjQsSTE2OjYsSTMyOjgsSTY0OjEwLFNUUklORzoxMSxVVEY3OjExLFNUUlVDVDoxMixNQVA6MTMsU0VUOjE0LExJU1Q6MTUsVVRGODoxNixVVEYxNjoxN30sZ2I6e0NBTEw6MSxSRVBMWToyLEVYQ0VQVElPTjozLE9ORVdBWTo0fSxFYjpmdW5jdGlvbihlKXt2YXIgdD0wO2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJnQrKztyZXR1cm4gdH0sdmI6ZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIGkoKXt9aS5wcm90b3R5cGU9dC5wcm90b3R5cGUsZS5wcm90b3R5cGU9bmV3IGksZS5wcm90b3R5cGUubmFtZT1yfHxcIlwifX07VGhyaWZ0LnliPWZ1bmN0aW9uKGUpe3RoaXMubWVzc2FnZT1lfSxUaHJpZnQudmIoVGhyaWZ0LnliLEVycm9yLFwiVEV4Y2VwdGlvblwiKSxUaHJpZnQueWIucHJvdG90eXBlLlRiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWVzc2FnZX0sVGhyaWZ0Lm1iPXtJYjowLFNiOjEsUmI6Mix3YjozLGJiOjQsQ2I6NSxfYjo2LFBiOjcsQWI6OCxPYjo5LE5iOjEwfSxUaHJpZnQuRGI9ZnVuY3Rpb24oZSx0KXt0aGlzLm1lc3NhZ2U9ZSx0aGlzLmNvZGU9XCJudW1iZXJcIj09dHlwZW9mIHQ/dDowfSxUaHJpZnQudmIoVGhyaWZ0LkRiLFRocmlmdC55YixcIlRBcHBsaWNhdGlvbkV4Y2VwdGlvblwiKSxUaHJpZnQuRGIucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKDs7KXt2YXIgdD1lLmtiKCk7aWYodC5mdHlwZT09VGhyaWZ0LlR5cGUuU1RPUClicmVhaztzd2l0Y2godC5maWQpe2Nhc2UgMTp0LmZ0eXBlPT1UaHJpZnQuVHlwZS5TVFJJTkc/KHQ9ZS5MYigpLHRoaXMubWVzc2FnZT10LnZhbHVlKTp0PWUuTWIodC5mdHlwZSk7YnJlYWs7Y2FzZSAyOnQuZnR5cGU9PVRocmlmdC5UeXBlLkkzMj8odD1lLkZiKCksdGhpcy5jb2RlPXQudmFsdWUpOnQ9ZS5NYih0LmZ0eXBlKTticmVhaztkZWZhdWx0OnQ9ZS5NYih0LmZ0eXBlKX1lLlViKCl9ZS5CYigpfSxUaHJpZnQuRGIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJUQXBwbGljYXRpb25FeGNlcHRpb25cIiksdGhpcy5tZXNzYWdlJiYoZS54YihcIm1lc3NhZ2VcIixUaHJpZnQuVHlwZS5TVFJJTkcsMSksZS5xYih0aGlzLlRiKCkpLGUuR2IoKSksdGhpcy5jb2RlJiYoZS54YihcInR5cGVcIixUaHJpZnQuVHlwZS5JMzIsMiksZS5WYih0aGlzLmNvZGUpLGUuR2IoKSksZS5qYigpLGUuUWIoKX0sVGhyaWZ0LkRiLnByb3RvdHlwZS5LYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvZGV9LFRocmlmdC5GYT1UaHJpZnQuWWI9ZnVuY3Rpb24oZSx0KXt0aGlzLnVybD1lLHRoaXMuV2I9MCx0aGlzLnpiPTAsdGhpcy5KYj10JiZ0LkpiLHRoaXMuWGI9XCJcIix0aGlzLlpiPVwiXCJ9LFRocmlmdC5ZYi5wcm90b3R5cGU9eyRiOmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9Y2F0Y2goZSl7fXRyeXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNc3htbDIuWE1MSFRUUFwiKX1jYXRjaChlKXt9dHJ5e3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfWNhdGNoKGUpe310aHJvd1wiWW91ciBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBYSFIuXCJ9LGZsdXNoOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihlJiYhdHx8dm9pZCAwPT09dGhpcy51cmx8fFwiXCI9PT10aGlzLnVybClyZXR1cm4gdGhpcy5YYjt2YXIgaT10aGlzLiRiKCk7aWYoaS5vdmVycmlkZU1pbWVUeXBlJiZpLm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi9qc29uXCIpLHQmJihpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3ZhciBlPXQ7cmV0dXJuIGZ1bmN0aW9uKCl7ND09dGhpcy5yZWFkeVN0YXRlJiYyMDA9PXRoaXMuc3RhdHVzJiYoci5lQyh0aGlzLnJlc3BvbnNlVGV4dCksZSgpKX19KCkpLGkub3BlbihcIlBPU1RcIix0aGlzLnVybCwhIWUpLGkuc2VuZCh0aGlzLlhiKSwhZXx8IXQpe2lmKDQhPWkucmVhZHlTdGF0ZSl0aHJvd1wiZW5jb3VudGVyZWQgYW4gdW5rbm93biBhamF4IHJlYWR5IHN0YXRlOiBcIitpLnJlYWR5U3RhdGU7aWYoMjAwIT1pLnN0YXR1cyl0aHJvd1wiZW5jb3VudGVyZWQgYSB1bmtub3duIHJlcXVlc3Qgc3RhdHVzOiBcIitpLnN0YXR1czt0aGlzLlpiPWkucmVzcG9uc2VUZXh0LHRoaXMudEM9dGhpcy5aYi5sZW5ndGgsdGhpcy5XYj10aGlzLlpiLmxlbmd0aCx0aGlzLnpiPTB9fSxyQzpmdW5jdGlvbihlLHQscixpKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgalF1ZXJ5fHx2b2lkIDA9PT1qUXVlcnkuaUMpdGhyb3dcIlRocmlmdC5qcyByZXF1aXJlcyBqUXVlcnkgMS41KyB0byB1c2UgYXN5bmNocm9ub3VzIHJlcXVlc3RzXCI7dmFyIG49dGhpcztyZXR1cm4galF1ZXJ5Lm5DKHt1cmw6dGhpcy51cmwsZGF0YTp0LHR5cGU6XCJQT1NUXCIsc0M6ITEsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi9qc29uXCIsb0M6XCJ0ZXh0IHRocmlmdFwiLGFDOntoQzpmdW5jdGlvbih0KXtyZXR1cm4gbi5lQyh0KSxpLmNhbGwoZSl9fSxjb250ZXh0OmUsc3VjY2VzczpqUXVlcnkuY0MocikucG9wKCl9KX0sZUM6ZnVuY3Rpb24oZSl7dGhpcy5aYj1lLHRoaXMudEM9dGhpcy5aYi5sZW5ndGgsdGhpcy5XYj10aGlzLlpiLmxlbmd0aCx0aGlzLnpiPTB9LGlzT3BlbjpmdW5jdGlvbigpe3JldHVybiEwfSxvcGVuOmZ1bmN0aW9uKCl7fSxjbG9zZTpmdW5jdGlvbigpe30scmVhZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLldiLXRoaXMuemI7aWYoMD09PXQpcmV0dXJuXCJcIjt2YXIgcj1lO3Q8ZSYmKHI9dCk7dmFyIGk9dGhpcy51Qy5zdWJzdHIodGhpcy56YixyKTtyZXR1cm4gdGhpcy56Yis9cixpfSxsQzpmdW5jdGlvbigpe3JldHVybiB0aGlzLlpifSx3cml0ZTpmdW5jdGlvbihlKXt0aGlzLlhiPWV9LHBDOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWGJ9fSxUaHJpZnQuZEM9ZnVuY3Rpb24oZSl7dGhpcy5mQyhlKX0sVGhyaWZ0LmRDLnByb3RvdHlwZT17ZkM6ZnVuY3Rpb24oZSl7dGhpcy51cmw9ZSx0aGlzLmdDPW51bGwsdGhpcy5jYWxsYmFja3M9W10sdGhpcy5FQz1bXSx0aGlzLlhiPVwiXCIsdGhpcy5aYj1cIlwiLHRoaXMudkM9MCx0aGlzLnlDPTB9LGZsdXNoOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0aGlzLmlzT3BlbigpPyh0aGlzLmdDLnNlbmQodGhpcy5YYiksdGhpcy5jYWxsYmFja3MucHVzaChmdW5jdGlvbigpe3ZhciBlPXQ7cmV0dXJuIGZ1bmN0aW9uKHQpe3IuZUModCksZSgpfX0oKSkpOnRoaXMuRUMucHVzaCh7VEM6dGhpcy5YYixtQzp0fSl9LElDOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLkVDLmxlbmd0aD4wJiYodGhpcy5FQy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXMuZ0Muc2VuZCh0LlRDKSx0aGlzLmNhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uKCl7dmFyIHI9dC5tQztyZXR1cm4gZnVuY3Rpb24odCl7ZS5lQyh0KSxyKCl9fSgpKX0pLHRoaXMuRUM9W10pfSxTQzpmdW5jdGlvbihlKXt0aGlzLmZDKHRoaXMudXJsKX0sUkM6ZnVuY3Rpb24oZSl7dGhpcy5jYWxsYmFja3MubGVuZ3RoJiZ0aGlzLmNhbGxiYWNrcy5zaGlmdCgpKGUuZGF0YSl9LHdDOmZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKFwiVGhyaWZ0IFdlYlNvY2tldCBFcnJvcjogXCIrZS50b1N0cmluZygpKSx0aGlzLmdDLmNsb3NlKCl9LGVDOmZ1bmN0aW9uKGUpe3RoaXMuWmI9ZSx0aGlzLnRDPXRoaXMuWmIubGVuZ3RoLHRoaXMuV2I9dGhpcy5aYi5sZW5ndGgsdGhpcy56Yj0wfSxpc09wZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nQyYmdGhpcy5nQy5yZWFkeVN0YXRlPT10aGlzLmdDLk9QRU59LG9wZW46ZnVuY3Rpb24oKXt0aGlzLmdDJiZ0aGlzLmdDLnJlYWR5U3RhdGUhPXRoaXMuZ0MuQ0xPU0VEfHwodGhpcy5nQz1uZXcgV2ViU29ja2V0KHRoaXMudXJsKSx0aGlzLmdDLm9ub3Blbj10aGlzLklDLmJpbmQodGhpcyksdGhpcy5nQy5vbm1lc3NhZ2U9dGhpcy5SQy5iaW5kKHRoaXMpLHRoaXMuZ0Mub25lcnJvcj10aGlzLndDLmJpbmQodGhpcyksdGhpcy5nQy5vbmNsb3NlPXRoaXMuU0MuYmluZCh0aGlzKSl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5nQy5jbG9zZSgpfSxyZWFkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuV2ItdGhpcy56YjtpZigwPT09dClyZXR1cm5cIlwiO3ZhciByPWU7dDxlJiYocj10KTt2YXIgaT10aGlzLnVDLnN1YnN0cih0aGlzLnpiLHIpO3JldHVybiB0aGlzLnpiKz1yLGl9LGxDOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWmJ9LHdyaXRlOmZ1bmN0aW9uKGUpe3RoaXMuWGI9ZX0scEM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5YYn19LFRocmlmdC5iQz1UaHJpZnQuQ0M9ZnVuY3Rpb24oZSl7dGhpcy55Zz1lfSxUaHJpZnQuQ0MuVHlwZT17fSxUaHJpZnQuQ0MuVHlwZVtUaHJpZnQuVHlwZS5CT09MXT0nXCJ0ZlwiJyxUaHJpZnQuQ0MuVHlwZVtUaHJpZnQuVHlwZS5CWVRFXT0nXCJpOFwiJyxUaHJpZnQuQ0MuVHlwZVtUaHJpZnQuVHlwZS5JMTZdPSdcImkxNlwiJyxUaHJpZnQuQ0MuVHlwZVtUaHJpZnQuVHlwZS5JMzJdPSdcImkzMlwiJyxUaHJpZnQuQ0MuVHlwZVtUaHJpZnQuVHlwZS5JNjRdPSdcImk2NFwiJyxUaHJpZnQuQ0MuVHlwZVtUaHJpZnQuVHlwZS5ET1VCTEVdPSdcImRibFwiJyxUaHJpZnQuQ0MuVHlwZVtUaHJpZnQuVHlwZS5TVFJVQ1RdPSdcInJlY1wiJyxUaHJpZnQuQ0MuVHlwZVtUaHJpZnQuVHlwZS5TVFJJTkddPSdcInN0clwiJyxUaHJpZnQuQ0MuVHlwZVtUaHJpZnQuVHlwZS5NQVBdPSdcIm1hcFwiJyxUaHJpZnQuQ0MuVHlwZVtUaHJpZnQuVHlwZS5MSVNUXT0nXCJsc3RcIicsVGhyaWZ0LkNDLlR5cGVbVGhyaWZ0LlR5cGUuU0VUXT0nXCJzZXRcIicsVGhyaWZ0LkNDLl9DPXt9LFRocmlmdC5DQy5fQy50Zj1UaHJpZnQuVHlwZS5CT09MLFRocmlmdC5DQy5fQy5pOD1UaHJpZnQuVHlwZS5CWVRFLFRocmlmdC5DQy5fQy5pMTY9VGhyaWZ0LlR5cGUuSTE2LFRocmlmdC5DQy5fQy5pMzI9VGhyaWZ0LlR5cGUuSTMyLFRocmlmdC5DQy5fQy5pNjQ9VGhyaWZ0LlR5cGUuSTY0LFRocmlmdC5DQy5fQy5kYmw9VGhyaWZ0LlR5cGUuRE9VQkxFLFRocmlmdC5DQy5fQy5yZWM9VGhyaWZ0LlR5cGUuU1RSVUNULFRocmlmdC5DQy5fQy5zdHI9VGhyaWZ0LlR5cGUuU1RSSU5HLFRocmlmdC5DQy5fQy5tYXA9VGhyaWZ0LlR5cGUuTUFQLFRocmlmdC5DQy5fQy5sc3Q9VGhyaWZ0LlR5cGUuTElTVCxUaHJpZnQuQ0MuX0Muc2V0PVRocmlmdC5UeXBlLlNFVCxUaHJpZnQuQ0MuZmI9MSxUaHJpZnQuQ0MucHJvdG90eXBlPXtQQzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnlnfSxBQzpmdW5jdGlvbihlLHQscil7dGhpcy5PQz1bXSx0aGlzLk5DPVtdLHRoaXMuT0MucHVzaChbVGhyaWZ0LkNDLmZiLCdcIicrZSsnXCInLHQscl0pfSxEQzpmdW5jdGlvbigpe3ZhciBlPXRoaXMuT0MucG9wKCk7dGhpcy5rQz10aGlzLk9DLnBvcCgpLHRoaXMua0MucHVzaChlKSx0aGlzLkxDPVwiW1wiK3RoaXMua0Muam9pbihcIixcIikrXCJdXCIsdGhpcy55Zy53cml0ZSh0aGlzLkxDKX0sSGI6ZnVuY3Rpb24oZSl7dGhpcy5OQy5wdXNoKHRoaXMuT0MubGVuZ3RoKSx0aGlzLk9DLnB1c2goe30pfSxRYjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuTkMucG9wKCksdD10aGlzLk9DW2VdLHI9XCJ7XCIsaT0hMDtmb3IodmFyIG4gaW4gdClpP2k9ITE6cis9XCIsXCIscis9bitcIjpcIit0W25dO3IrPVwifVwiLHRoaXMuT0NbZV09cn0seGI6ZnVuY3Rpb24oZSx0LHIpe3RoaXMuTkMucHVzaCh0aGlzLk9DLmxlbmd0aCksdGhpcy5PQy5wdXNoKHtNQzonXCInK3IrJ1wiJyxGQzpUaHJpZnQuQ0MuVHlwZVt0XX0pfSxHYjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuT0MucG9wKCksdD10aGlzLk9DLnBvcCgpO3RoaXMuT0NbdGhpcy5PQy5sZW5ndGgtMV1bdC5NQ109XCJ7XCIrdC5GQytcIjpcIitlK1wifVwiLHRoaXMuTkMucG9wKCl9LGpiOmZ1bmN0aW9uKCl7fSxVQzpmdW5jdGlvbihlLHQscil7dGhpcy5OQy5wdXNoKHRoaXMuT0MubGVuZ3RoKSx0aGlzLk9DLnB1c2goW1RocmlmdC5DQy5UeXBlW2VdLFRocmlmdC5DQy5UeXBlW3RdLDBdKX0sQkM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLk5DLnBvcCgpO2lmKGUhPXRoaXMuT0MubGVuZ3RoKXsodGhpcy5PQy5sZW5ndGgtZS0xKSUyIT0wJiZ0aGlzLk9DLnB1c2goXCJcIik7dmFyIHQ9KHRoaXMuT0MubGVuZ3RoLWUtMSkvMjt0aGlzLk9DW2VdW3RoaXMuT0NbZV0ubGVuZ3RoLTFdPXQ7Zm9yKHZhciByPVwifVwiLGk9ITA7dGhpcy5PQy5sZW5ndGg+ZSsxOyl7dmFyIG49dGhpcy5PQy5wb3AoKSxzPXRoaXMuT0MucG9wKCk7aT9pPSExOnI9XCIsXCIrcixpc05hTihzKXx8KHM9J1wiJytzKydcIicpLHI9cytcIjpcIituK3J9cj1cIntcIityLHRoaXMuT0NbZV0ucHVzaChyKSx0aGlzLk9DW2VdPVwiW1wiK3RoaXMuT0NbZV0uam9pbihcIixcIikrXCJdXCJ9fSxIQzpmdW5jdGlvbihlLHQpe3RoaXMuTkMucHVzaCh0aGlzLk9DLmxlbmd0aCksdGhpcy5PQy5wdXNoKFtUaHJpZnQuQ0MuVHlwZVtlXSx0XSl9LHhDOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuTkMucG9wKCk7dGhpcy5PQy5sZW5ndGg+ZSsxOyl7dmFyIHQ9dGhpcy5PQ1tlKzFdO3RoaXMuT0Muc3BsaWNlKGUrMSwxKSx0aGlzLk9DW2VdLnB1c2godCl9dGhpcy5PQ1tlXT1cIltcIit0aGlzLk9DW2VdLmpvaW4oXCIsXCIpK1wiXVwifSxxQzpmdW5jdGlvbihlLHQpe3RoaXMuTkMucHVzaCh0aGlzLk9DLmxlbmd0aCksdGhpcy5PQy5wdXNoKFtUaHJpZnQuQ0MuVHlwZVtlXSx0XSl9LEdDOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuTkMucG9wKCk7dGhpcy5PQy5sZW5ndGg+ZSsxOyl7dmFyIHQ9dGhpcy5PQ1tlKzFdO3RoaXMuT0Muc3BsaWNlKGUrMSwxKSx0aGlzLk9DW2VdLnB1c2godCl9dGhpcy5PQ1tlXT1cIltcIit0aGlzLk9DW2VdLmpvaW4oXCIsXCIpK1wiXVwifSxWQzpmdW5jdGlvbihlKXt0aGlzLk9DLnB1c2goZT8xOjApfSxqQzpmdW5jdGlvbihlKXt0aGlzLk9DLnB1c2goZSl9LFFDOmZ1bmN0aW9uKGUpe3RoaXMuT0MucHVzaChlKX0sVmI6ZnVuY3Rpb24oZSl7dGhpcy5PQy5wdXNoKGUpfSxLQzpmdW5jdGlvbihlKXt0aGlzLk9DLnB1c2goZSl9LFlDOmZ1bmN0aW9uKGUpe3RoaXMuT0MucHVzaChlKX0scWI6ZnVuY3Rpb24oZSl7aWYobnVsbD09PWUpdGhpcy5PQy5wdXNoKG51bGwpO2Vsc2V7Zm9yKHZhciB0PVwiXCIscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lLmNoYXJBdChyKTt0Kz0nXCInPT09aT8nXFxcXFwiJzpcIlxcXFxcIj09PWk/XCJcXFxcXFxcXFwiOlwiXFxiXCI9PT1pP1wiXFxcXGJcIjpcIlxcZlwiPT09aT9cIlxcXFxmXCI6XCJcXG5cIj09PWk/XCJcXFxcblwiOlwiXFxyXCI9PT1pP1wiXFxcXHJcIjpcIlxcdFwiPT09aT9cIlxcXFx0XCI6aX10aGlzLk9DLnB1c2goJ1wiJyt0KydcIicpfX0sV0M6ZnVuY3Rpb24oZSl7dGhpcy5xYihlKX0sekM6ZnVuY3Rpb24oKXt0aGlzLkpDPVtdLHRoaXMuemI9W10sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEpTT04mJlwiZnVuY3Rpb25cIj09dHlwZW9mIEpTT04ucGFyc2U/dGhpcy5YQz1KU09OLnBhcnNlKHRoaXMueWcubEMoKSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGpRdWVyeT90aGlzLlhDPWpRdWVyeS5aQyh0aGlzLnlnLmxDKCkpOnRoaXMuWEM9ZXZhbCh0aGlzLnlnLmxDKCkpO3ZhciByPXt9LHZlcnNpb249dGhpcy5YQy5zaGlmdCgpO2lmKHZlcnNpb24hPVRocmlmdC5DQy5mYil0aHJvd1wiV3JvbmcgdGhyaWZ0IHByb3RvY29sIHZlcnNpb246IFwiK3ZlcnNpb247cmV0dXJuIHIuZm5hbWU9dGhpcy5YQy5zaGlmdCgpLHIuJEM9dGhpcy5YQy5zaGlmdCgpLHIuZV89dGhpcy5YQy5zaGlmdCgpLHRoaXMuSkMucHVzaCh0aGlzLlhDLnNoaWZ0KCkpLHJ9LHRfOmZ1bmN0aW9uKCl7fSxyXzpmdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gdC5mbmFtZT1cIlwiLHRoaXMuSkNbdGhpcy5KQy5sZW5ndGgtMV1pbnN0YW5jZW9mIEFycmF5JiZ0aGlzLkpDLnB1c2godGhpcy5KQ1t0aGlzLkpDLmxlbmd0aC0xXS5zaGlmdCgpKSx0fSxCYjpmdW5jdGlvbigpe3RoaXMuSkNbdGhpcy5KQy5sZW5ndGgtMl1pbnN0YW5jZW9mIEFycmF5JiZ0aGlzLkpDLnBvcCgpfSxrYjpmdW5jdGlvbigpe3ZhciBlPXt9LHQ9LTEscj1UaHJpZnQuVHlwZS5TVE9QO2Zvcih2YXIgaSBpbiB0aGlzLkpDW3RoaXMuSkMubGVuZ3RoLTFdKWlmKG51bGwhPT1pKXt0PXBhcnNlSW50KGksMTApLHRoaXMuemIucHVzaCh0aGlzLkpDLmxlbmd0aCk7dmFyIG49dGhpcy5KQ1t0aGlzLkpDLmxlbmd0aC0xXVt0XTtkZWxldGUgdGhpcy5KQ1t0aGlzLkpDLmxlbmd0aC0xXVt0XSx0aGlzLkpDLnB1c2gobik7YnJlYWt9aWYoLTEhPXQpZm9yKHZhciBzIGluIHRoaXMuSkNbdGhpcy5KQy5sZW5ndGgtMV0pbnVsbCE9PVRocmlmdC5DQy5fQ1tzXSYmKHI9VGhyaWZ0LkNDLl9DW3NdLHRoaXMuSkNbdGhpcy5KQy5sZW5ndGgtMV09dGhpcy5KQ1t0aGlzLkpDLmxlbmd0aC0xXVtzXSk7cmV0dXJuIGUuZm5hbWU9XCJcIixlLmZ0eXBlPXIsZS5maWQ9dCxlfSxVYjpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnpiLnBvcCgpO3RoaXMuSkMubGVuZ3RoPmU7KXRoaXMuSkMucG9wKCl9LGlfOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5KQy5wb3AoKSx0PWUuc2hpZnQoKTt0IGluc3RhbmNlb2YgQXJyYXkmJih0aGlzLkpDLnB1c2goZSksZT10LHQ9ZS5zaGlmdCgpKTt2YXIgcj17fTtyZXR1cm4gci5uXz1UaHJpZnQuQ0MuX0NbdF0sci5zXz1UaHJpZnQuQ0MuX0NbZS5zaGlmdCgpXSxyLnNpemU9ZS5zaGlmdCgpLHRoaXMuemIucHVzaCh0aGlzLkpDLmxlbmd0aCksdGhpcy5KQy5wdXNoKGUuc2hpZnQoKSkscn0sb186ZnVuY3Rpb24oKXt0aGlzLlViKCl9LGFfOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5KQ1t0aGlzLkpDLmxlbmd0aC0xXSx0PXt9O3JldHVybiB0LmhfPVRocmlmdC5DQy5fQ1tlLnNoaWZ0KCldLHQuc2l6ZT1lLnNoaWZ0KCksdGhpcy56Yi5wdXNoKHRoaXMuSkMubGVuZ3RoKSx0aGlzLkpDLnB1c2goZSksdH0sY186ZnVuY3Rpb24oKXt0aGlzLlViKCl9LHVfOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuYV8oZSx0KX0sbF86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jXygpfSxwXzpmdW5jdGlvbigpe3ZhciBlPXRoaXMuRmIoKTtyZXR1cm4gbnVsbCE9PWUmJlwiMVwiPT1lLnZhbHVlP2UudmFsdWU9ITA6ZS52YWx1ZT0hMSxlfSxkXzpmdW5jdGlvbigpe3JldHVybiB0aGlzLkZiKCl9LGZfOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRmIoKX0sRmI6ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9dGhpcy5KQ1t0aGlzLkpDLmxlbmd0aC0xXSk7dmFyIHQ9e307aWYoZSBpbnN0YW5jZW9mIEFycmF5KTA9PT1lLmxlbmd0aD90LnZhbHVlPXZvaWQgMDp0LnZhbHVlPWUuc2hpZnQoKTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBPYmplY3Qpe2Zvcih2YXIgciBpbiBlKWlmKG51bGwhPT1yKXt0aGlzLkpDLnB1c2goZVtyXSksZGVsZXRlIGVbcl0sdC52YWx1ZT1yO2JyZWFrfX1lbHNlIHQudmFsdWU9ZSx0aGlzLkpDLnBvcCgpO3JldHVybiB0fSxnXzpmdW5jdGlvbigpe3JldHVybiB0aGlzLkZiKCl9LEVfOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRmIoKX0sTGI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5GYigpfSx2XzpmdW5jdGlvbigpe3JldHVybiB0aGlzLkxiKCl9LE1iOmZ1bmN0aW9uKGUpe3ZhciB0LHI7c3dpdGNoKGUpe2Nhc2UgVGhyaWZ0LlR5cGUuU1RPUDpyZXR1cm4gbnVsbDtjYXNlIFRocmlmdC5UeXBlLkJPT0w6cmV0dXJuIHRoaXMucF8oKTtjYXNlIFRocmlmdC5UeXBlLkJZVEU6cmV0dXJuIHRoaXMuZF8oKTtjYXNlIFRocmlmdC5UeXBlLkkxNjpyZXR1cm4gdGhpcy5mXygpO2Nhc2UgVGhyaWZ0LlR5cGUuSTMyOnJldHVybiB0aGlzLkZiKCk7Y2FzZSBUaHJpZnQuVHlwZS5JNjQ6cmV0dXJuIHRoaXMuZ18oKTtjYXNlIFRocmlmdC5UeXBlLkRPVUJMRTpyZXR1cm4gdGhpcy5FXygpO2Nhc2UgVGhyaWZ0LlR5cGUuU1RSSU5HOnJldHVybiB0aGlzLkxiKCk7Y2FzZSBUaHJpZnQuVHlwZS5TVFJVQ1Q6Zm9yKHRoaXMucl8oKTs7KXtpZih0PXRoaXMua2IoKSx0LmZ0eXBlPT1UaHJpZnQuVHlwZS5TVE9QKWJyZWFrO3RoaXMuTWIodC5mdHlwZSksdGhpcy5VYigpfXJldHVybiB0aGlzLkJiKCksbnVsbDtjYXNlIFRocmlmdC5UeXBlLk1BUDpmb3IodD10aGlzLmlfKCkscj0wO3I8dC5zaXplO3IrKylyPjAmJnRoaXMuSkMubGVuZ3RoPnRoaXMuemJbdGhpcy56Yi5sZW5ndGgtMV0rMSYmdGhpcy5KQy5wb3AoKSx0aGlzLk1iKHQubl8pLHRoaXMuTWIodC5zXyk7cmV0dXJuIHRoaXMub18oKSxudWxsO2Nhc2UgVGhyaWZ0LlR5cGUuU0VUOmZvcih0PXRoaXMudV8oKSxyPTA7cjx0LnNpemU7cisrKXRoaXMuTWIodC5oXyk7cmV0dXJuIHRoaXMubF8oKSxudWxsO2Nhc2UgVGhyaWZ0LlR5cGUuTElTVDpmb3IodD10aGlzLmFfKCkscj0wO3I8dC5zaXplO3IrKyl0aGlzLk1iKHQuaF8pO3JldHVybiB0aGlzLmNfKCksbnVsbH19fSxUaHJpZnQueV89ZnVuY3Rpb24oZSx0LHIsaSl7VGhyaWZ0LkNDLmNhbGwodGhpcyx0LHIsaSksdGhpcy5UXz1lfSxUaHJpZnQudmIoVGhyaWZ0LnlfLFRocmlmdC5DQyxcIm11bHRpcGxleFByb3RvY29sXCIpLFRocmlmdC55Xy5wcm90b3R5cGUuQUM9ZnVuY3Rpb24oZSx0LHIpe3Q9PT1UaHJpZnQuZ2IuQ0FMTHx8dD09PVRocmlmdC5nYi5PTkVXQVk/VGhyaWZ0LkNDLnByb3RvdHlwZS5BQy5jYWxsKHRoaXMsdGhpcy5UXytcIjpcIitlLHQscik6VGhyaWZ0LkNDLnByb3RvdHlwZS5BQy5jYWxsKHRoaXMsZSx0LHIpfSxUaHJpZnQubV89ZnVuY3Rpb24oKXt0aGlzLklfPTB9LFRocmlmdC5tXy5wcm90b3R5cGUuU189ZnVuY3Rpb24oZSx0LHIpe3QucWwmJih0PXQucWwpO3ZhciBpPXRoaXM7cmV0dXJuIHQucHJvdG90eXBlLlJfPWZ1bmN0aW9uKCl7cmV0dXJuIGkuSV8rPTEsaS5JX30sbmV3IHQobmV3IFRocmlmdC55XyhlLHIpKX0sbW9kdWxlLmk9VGhyaWZ0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cig5KSxuPXIoMjgpLHM9bi5jZyxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpLG4sbyxhLGgpe3RoaXMuY29udGV4dElkPWgsdGhpcy51cmw9ZSx0aGlzLndfPXIsdGhpcy5iXz10LHRoaXMuQ189aSx0aGlzLmR1cmF0aW9uPW4sdGhpcy5iaXRyYXRlPW8sdGhpcy5fXz1hO3ZhciBjPSh0aGlzLmNvbnRleHRJZD90aGlzLmNvbnRleHRJZDp0aGlzLnVybCkucmVwbGFjZSgvaHR0cChzKT86XFwvXFwvLyxcIlwiKSx1PXMub1QoYykudG9TdHJpbmcocy5VeS5CeSk7dGhpcy5QXz11K1wiLVwiK3RoaXMuQ18rXCItXCIrdGhpcy5iaXRyYXRlfXJldHVybiBlLnByb3RvdHlwZS5YZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJffSxlLnByb3RvdHlwZS5BXz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkNffSxlLnByb3RvdHlwZS5nZXREdXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmR1cmF0aW9ufSxlLnByb3RvdHlwZS5nZXRCaXRyYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYml0cmF0ZX0sZS5wcm90b3R5cGUuaWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX30sZS5wcm90b3R5cGUuT189ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53X30sZS5wcm90b3R5cGUuWmY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5QX30sZS5wcm90b3R5cGUudGc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51cmx9LGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGkudmNbdGhpcy5YZigpXStcIi1cIit0aGlzLlpmKCl9LGV9KCk7dC5OXz1vfSxmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKGUpe3ZhciBuLHM7LyoqXG4gKiBAbGljZW5zZSBCeXRlQnVmZmVyLmpzIChjKSAyMDEzLTIwMTQgRGFuaWVsIFdpcnR6IDxkY29kZUBkY29kZS5pbz5cbiAqIFRoaXMgdmVyc2lvbiBvZiBCeXRlQnVmZmVyLmpzIHVzZXMgYW4gQXJyYXlCdWZmZXIgYXMgaXRzIGJhY2tpbmcgYnVmZmVyIHdoaWNoIGlzIGFjY2Vzc2VkIHRocm91Z2ggYSBEYXRhVmlldyBhbmQgaXNcbiAqIGNvbXBhdGlibGUgd2l0aCBtb2Rlcm4gYnJvd3NlcnMuXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wXG4gKiBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kY29kZUlPL0J5dGVCdWZmZXIuanMgZm9yIGRldGFpbHNcbiAqL1xuIWZ1bmN0aW9uKG8pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGEoZSl7ZnVuY3Rpb24gdChlKXt2YXIgdD0wO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0PGUubGVuZ3RoP2UuY2hhckNvZGVBdCh0KyspOm51bGx9fWZ1bmN0aW9uIHIoKXt2YXIgZT1bXSx0PVtdO3JldHVybiBmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0LmpvaW4oXCJcIikrYS5hcHBseShTdHJpbmcsZSk7ZS5sZW5ndGgrYXJndW1lbnRzLmxlbmd0aD4xMDI0JiYodC5wdXNoKGEuYXBwbHkoU3RyaW5nLGUpKSxlLmxlbmd0aD0wKSxBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShlLGFyZ3VtZW50cyl9fXZhciBuPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT1lJiYoZT1uLkRfKSx2b2lkIDA9PT10JiYodD1uLmtfKSx2b2lkIDA9PT1yJiYocj1uLkxfKSwhcil7aWYoKGV8PTApPDApdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgY2FwYWNpdHlcIik7dD0hIXQscj0hIXJ9dGhpcy5idWZmZXI9MD09PWU/bzpuZXcgQXJyYXlCdWZmZXIoZSksdGhpcy52aWV3PTA9PT1lP251bGw6bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyKSx0aGlzLm9mZnNldD0wLHRoaXMuTV89LTEsdGhpcy5GXz1lLHRoaXMuVV89dm9pZCAwIT09dCYmISF0LHRoaXMuQl89ISFyfTtuLlZFUlNJT049XCIzLjUuNVwiLG4uSF89ITAsbi54Xz0hMSxuLkRfPTE2LG4ua189bi54XyxuLkxfPSExLG4ucV89ZXx8bnVsbDt2YXIgcz1uLnByb3RvdHlwZSxvPW5ldyBBcnJheUJ1ZmZlcigwKSxhPVN0cmluZy5mcm9tQ2hhckNvZGU7bi5HXz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG5ldyBuKGUsdCxyKX0sbi5jb25jYXQ9ZnVuY3Rpb24oZSx0LHIsaSl7XCJib29sZWFuXCIhPXR5cGVvZiB0JiZcInN0cmluZ1wiPT10eXBlb2YgdHx8KGk9cixyPXQsdD12b2lkIDApO2Zvcih2YXIgcyxvPTAsYT0wLGg9ZS5sZW5ndGg7YTxoOysrYSluLlZfKGVbYV0pfHwoZVthXT1uLndyYXAoZVthXSx0KSksKHM9ZVthXS5GXy1lW2FdLm9mZnNldCk+MCYmKG8rPXMpO2lmKDA9PT1vKXJldHVybiBuZXcgbigwLHIsaSk7dmFyIGMsdT1uZXcgbihvLHIsaSksbD1uZXcgVWludDhBcnJheSh1LmJ1ZmZlcik7Zm9yKGE9MDthPGg7KWM9ZVthKytdLChzPWMuRl8tYy5vZmZzZXQpPD0wfHwobC5zZXQobmV3IFVpbnQ4QXJyYXkoYy5idWZmZXIpLnN1YmFycmF5KGMub2Zmc2V0LGMuRl8pLHUub2Zmc2V0KSx1Lm9mZnNldCs9cyk7cmV0dXJuIHUuRl89dS5vZmZzZXQsdS5vZmZzZXQ9MCx1fSxuLlZfPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09KGUmJmUgaW5zdGFuY2VvZiBuKX0sbi50eXBlPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5QnVmZmVyfSxuLndyYXA9ZnVuY3Rpb24oZSx0LHIsbyl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQmJihvPXIscj10LHQ9dm9pZCAwKSxcInN0cmluZ1wiPT10eXBlb2YgZSlzd2l0Y2godm9pZCAwPT09dCYmKHQ9XCJ1dGY4XCIpLHQpe2Nhc2VcImJhc2U2NFwiOnJldHVybiBuLmpfKGUscik7Y2FzZVwiaGV4XCI6cmV0dXJuIG4uUV8oZSxyKTtjYXNlXCJiaW5hcnlcIjpyZXR1cm4gbi5LXyhlLHIpO2Nhc2VcInV0ZjhcIjpyZXR1cm4gbi5ZXyhlLHIpO2Nhc2VcImRlYnVnXCI6cmV0dXJuIG4uV18oZSxyKTtkZWZhdWx0OnRocm93IEVycm9yKFwiVW5zdXBwb3J0ZWQgZW5jb2Rpbmc6IFwiK3QpfWlmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJ1ZmZlclwiKTt2YXIgYTtpZihuLlZfKGUpKXJldHVybiBhPXMuY2xvbmUuY2FsbChlKSxhLk1fPS0xLGE7aWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpYT1uZXcgbigwLHIsbyksZS5sZW5ndGg+MCYmKGEuYnVmZmVyPWUuYnVmZmVyLGEub2Zmc2V0PWUuYnl0ZU9mZnNldCxhLkZfPWUuYnl0ZU9mZnNldCtlLmxlbmd0aCxhLnZpZXc9ZS5sZW5ndGg+MD9uZXcgRGF0YVZpZXcoZS5idWZmZXIpOm51bGwpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKWE9bmV3IG4oMCxyLG8pLGUuYnl0ZUxlbmd0aD4wJiYoYS5idWZmZXI9ZSxhLm9mZnNldD0wLGEuRl89ZS5ieXRlTGVuZ3RoLGEudmlldz1lLmJ5dGVMZW5ndGg+MD9uZXcgRGF0YVZpZXcoZSk6bnVsbCk7ZWxzZXtpZihcIltvYmplY3QgQXJyYXldXCIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBidWZmZXJcIik7Zm9yKGE9bmV3IG4oZS5sZW5ndGgscixvKSxhLkZfPWUubGVuZ3RoLGk9MDtpPGUubGVuZ3RoOysraSlhLnZpZXcuc2V0VWludDgoaSxlW2ldKX1yZXR1cm4gYX0scy56Xz1mdW5jdGlvbihlLHQpe3ZhciByPXZvaWQgMD09PXQ7aWYociYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlfD0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXQrPTE7dmFyIGk9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtyZXR1cm4gdD5pJiZ0aGlzLnJlc2l6ZSgoaSo9Mik+dD9pOnQpLHQtPTEsdGhpcy52aWV3LnNldEludDgodCxlKSxyJiYodGhpcy5vZmZzZXQrPTEpLHRoaXN9LHMuakM9cy56XyxzLkpfPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMD09PWU7aWYodCYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSsxPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCsxKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgcj10aGlzLnZpZXcuZ2V0SW50OChlKTtyZXR1cm4gdCYmKHRoaXMub2Zmc2V0Kz0xKSxyfSxzLmRfPXMuSl8scy5YXz1mdW5jdGlvbihlLHQpe3ZhciByPXZvaWQgMD09PXQ7aWYociYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dCs9MTt2YXIgaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO3JldHVybiB0PmkmJnRoaXMucmVzaXplKChpKj0yKT50P2k6dCksdC09MSx0aGlzLnZpZXcuc2V0VWludDgodCxlKSxyJiYodGhpcy5vZmZzZXQrPTEpLHRoaXN9LHMuWl89ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZTtpZih0JiYoZT10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzE+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzEpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciByPXRoaXMudmlldy5nZXRVaW50OChlKTtyZXR1cm4gdCYmKHRoaXMub2Zmc2V0Kz0xKSxyfSxzLmVQPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dm9pZCAwPT09dDtpZihyJiYodD10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dCs9Mjt2YXIgaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO3JldHVybiB0PmkmJnRoaXMucmVzaXplKChpKj0yKT50P2k6dCksdC09Mix0aGlzLnZpZXcuc2V0SW50MTYodCxlLHRoaXMuVV8pLHImJih0aGlzLm9mZnNldCs9MiksdGhpc30scy50UD1zLmVQLHMuclA9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZTtpZih0JiYoZT10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzI+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzIpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciByPXRoaXMudmlldy5nZXRJbnQxNihlLHRoaXMuVV8pO3JldHVybiB0JiYodGhpcy5vZmZzZXQrPTIpLHJ9LHMuaVA9cy5yUCxzLm5QPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dm9pZCAwPT09dDtpZihyJiYodD10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX10Kz0yO3ZhciBpPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHQ+aSYmdGhpcy5yZXNpemUoKGkqPTIpPnQ/aTp0KSx0LT0yLHRoaXMudmlldy5zZXRVaW50MTYodCxlLHRoaXMuVV8pLHImJih0aGlzLm9mZnNldCs9MiksdGhpc30scy5zUD1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lO2lmKHQmJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMj50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMikgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIHI9dGhpcy52aWV3LmdldFVpbnQxNihlLHRoaXMuVV8pO3JldHVybiB0JiYodGhpcy5vZmZzZXQrPTIpLHJ9LHMub1A9ZnVuY3Rpb24oZSx0KXt2YXIgcj12b2lkIDA9PT10O2lmKHImJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZXw9MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX10Kz00O3ZhciBpPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHQ+aSYmdGhpcy5yZXNpemUoKGkqPTIpPnQ/aTp0KSx0LT00LHRoaXMudmlldy5zZXRJbnQzMih0LGUsdGhpcy5VXyksciYmKHRoaXMub2Zmc2V0Kz00KSx0aGlzfSxzLkJnPXMub1Ascy5hUD1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lO2lmKHQmJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrND50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrNCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIHI9dGhpcy52aWV3LmdldEludDMyKGUsdGhpcy5VXyk7cmV0dXJuIHQmJih0aGlzLm9mZnNldCs9NCkscn0scy5RZz1zLmFQLHMuaFA9ZnVuY3Rpb24oZSx0KXt2YXIgcj12b2lkIDA9PT10O2lmKHImJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXQrPTQ7dmFyIGk9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtyZXR1cm4gdD5pJiZ0aGlzLnJlc2l6ZSgoaSo9Mik+dD9pOnQpLHQtPTQsdGhpcy52aWV3LnNldFVpbnQzMih0LGUsdGhpcy5VXyksciYmKHRoaXMub2Zmc2V0Kz00KSx0aGlzfSxzLmNQPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMD09PWU7aWYodCYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSs0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCs0KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgcj10aGlzLnZpZXcuZ2V0VWludDMyKGUsdGhpcy5VXyk7cmV0dXJuIHQmJih0aGlzLm9mZnNldCs9NCkscn0sZSYmKHMudVA9ZnVuY3Rpb24odCxyKXt2YXIgaT12b2lkIDA9PT1yO2lmKGkmJihyPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpdD1lLkRFKHQpO2Vsc2UgaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpdD1lLmtFKHQpO2Vsc2UgaWYoISh0JiZ0IGluc3RhbmNlb2YgZSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrdCtcIiAobm90IGFuIGludGVnZXIgb3IgTG9uZylcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHIlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrcitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChyPj4+PTApPDB8fHIrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIityK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9XCJudW1iZXJcIj09dHlwZW9mIHQ/dD1lLkRFKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1lLmtFKHQpKSxyKz04O3ZhciBuPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHI+biYmdGhpcy5yZXNpemUoKG4qPTIpPnI/bjpyKSxyLT04LHRoaXMuVV8/KHRoaXMudmlldy5zZXRJbnQzMihyLHQubG93LCEwKSx0aGlzLnZpZXcuc2V0SW50MzIocis0LHQuaGlnaCwhMCkpOih0aGlzLnZpZXcuc2V0SW50MzIocix0LmhpZ2gsITEpLHRoaXMudmlldy5zZXRJbnQzMihyKzQsdC5sb3csITEpKSxpJiYodGhpcy5vZmZzZXQrPTgpLHRoaXN9LHMubFA9cy51UCxzLnBQPWZ1bmN0aW9uKHQpe3ZhciByPXZvaWQgMD09PXQ7aWYociYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCs4PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCs4KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgaT10aGlzLlVfP25ldyBlKHRoaXMudmlldy5nZXRJbnQzMih0LCEwKSx0aGlzLnZpZXcuZ2V0SW50MzIodCs0LCEwKSwhMSk6bmV3IGUodGhpcy52aWV3LmdldEludDMyKHQrNCwhMSksdGhpcy52aWV3LmdldEludDMyKHQsITEpLCExKTtyZXR1cm4gciYmKHRoaXMub2Zmc2V0Kz04KSxpfSxzLmRQPXMucFAscy5mUD1mdW5jdGlvbih0LHIpe3ZhciBpPXZvaWQgMD09PXI7aWYoaSYmKHI9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiPT10eXBlb2YgdCl0PWUuREUodCk7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgdCl0PWUua0UodCk7ZWxzZSBpZighKHQmJnQgaW5zdGFuY2VvZiBlKSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIit0K1wiIChub3QgYW4gaW50ZWdlciBvciBMb25nKVwiKTtpZihcIm51bWJlclwiIT10eXBlb2Ygcnx8ciUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIityK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHI+Pj49MCk8MHx8ciswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3IrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1cIm51bWJlclwiPT10eXBlb2YgdD90PWUuREUodCk6XCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PWUua0UodCkpLHIrPTg7dmFyIG49dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtyZXR1cm4gcj5uJiZ0aGlzLnJlc2l6ZSgobio9Mik+cj9uOnIpLHItPTgsdGhpcy5VXz8odGhpcy52aWV3LnNldEludDMyKHIsdC5sb3csITApLHRoaXMudmlldy5zZXRJbnQzMihyKzQsdC5oaWdoLCEwKSk6KHRoaXMudmlldy5zZXRJbnQzMihyLHQuaGlnaCwhMSksdGhpcy52aWV3LnNldEludDMyKHIrNCx0LmxvdywhMSkpLGkmJih0aGlzLm9mZnNldCs9OCksdGhpc30scy5nUD1mdW5jdGlvbih0KXt2YXIgcj12b2lkIDA9PT10O2lmKHImJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrOD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrOCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIGk9dGhpcy5VXz9uZXcgZSh0aGlzLnZpZXcuZ2V0SW50MzIodCwhMCksdGhpcy52aWV3LmdldEludDMyKHQrNCwhMCksITApOm5ldyBlKHRoaXMudmlldy5nZXRJbnQzMih0KzQsITEpLHRoaXMudmlldy5nZXRJbnQzMih0LCExKSwhMCk7cmV0dXJuIHImJih0aGlzLm9mZnNldCs9OCksaX0pLHMuRVA9ZnVuY3Rpb24oZSx0KXt2YXIgcj12b2lkIDA9PT10O2lmKHImJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGEgbnVtYmVyKVwiKTtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX10Kz00O3ZhciBpPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHQ+aSYmdGhpcy5yZXNpemUoKGkqPTIpPnQ/aTp0KSx0LT00LHRoaXMudmlldy5zZXRGbG9hdDMyKHQsZSx0aGlzLlVfKSxyJiYodGhpcy5vZmZzZXQrPTQpLHRoaXN9LHMudlA9cy5FUCxzLnlQPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMD09PWU7aWYodCYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSs0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCs0KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgcj10aGlzLnZpZXcuZ2V0RmxvYXQzMihlLHRoaXMuVV8pO3JldHVybiB0JiYodGhpcy5vZmZzZXQrPTQpLHJ9LHMuVFA9cy55UCxzLm1QPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dm9pZCAwPT09dDtpZihyJiYodD10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhIG51bWJlcilcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dCs9ODt2YXIgaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO3JldHVybiB0PmkmJnRoaXMucmVzaXplKChpKj0yKT50P2k6dCksdC09OCx0aGlzLnZpZXcuc2V0RmxvYXQ2NCh0LGUsdGhpcy5VXyksciYmKHRoaXMub2Zmc2V0Kz04KSx0aGlzfSxzLllDPXMubVAscy5JUD1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lO2lmKHQmJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrOD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrOCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIHI9dGhpcy52aWV3LmdldEZsb2F0NjQoZSx0aGlzLlVfKTtyZXR1cm4gdCYmKHRoaXMub2Zmc2V0Kz04KSxyfSxzLkVfPXMuSVAsbi5TUD01LG4uUlA9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+Pj49MCxlPDEyOD8xOmU8MTYzODQ/MjplPDE8PDIxPzM6ZTwxPDwyOD80OjV9LG4ud1A9ZnVuY3Rpb24oZSl7cmV0dXJuKChlfD0wKTw8MV5lPj4zMSk+Pj4wfSxuLmJQPWZ1bmN0aW9uKGUpe3JldHVybiBlPj4+MV4tKDEmZSl8MH0scy5DUD1mdW5jdGlvbihlLHQpe3ZhciByPXZvaWQgMD09PXQ7aWYociYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlfD0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBpLHM9bi5SUChlKTt0Kz1zO3ZhciBvPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHQ+byYmdGhpcy5yZXNpemUoKG8qPTIpPnQ/bzp0KSx0LT1zLHRoaXMudmlldy5zZXRVaW50OCh0LGk9MTI4fGUpLGU+Pj49MCxlPj0xMjg/KGk9ZT4+N3wxMjgsdGhpcy52aWV3LnNldFVpbnQ4KHQrMSxpKSxlPj0xNjM4ND8oaT1lPj4xNHwxMjgsdGhpcy52aWV3LnNldFVpbnQ4KHQrMixpKSxlPj0xPDwyMT8oaT1lPj4yMXwxMjgsdGhpcy52aWV3LnNldFVpbnQ4KHQrMyxpKSxlPj0xPDwyOD8odGhpcy52aWV3LnNldFVpbnQ4KHQrNCxlPj4yOCYxNSkscz01KToodGhpcy52aWV3LnNldFVpbnQ4KHQrMywxMjcmaSkscz00KSk6KHRoaXMudmlldy5zZXRVaW50OCh0KzIsMTI3JmkpLHM9MykpOih0aGlzLnZpZXcuc2V0VWludDgodCsxLDEyNyZpKSxzPTIpKToodGhpcy52aWV3LnNldFVpbnQ4KHQsMTI3JmkpLHM9MSkscj8odGhpcy5vZmZzZXQrPXMsdGhpcyk6c30scy5fUD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLkNQKG4ud1AoZSksdCl9LHMuUFA9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZTtpZih0JiYoZT10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzE+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzEpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciByLGksbj0wLHM9MDtkb3tpZihpPWUrbiwhdGhpcy5CXyYmaT50aGlzLkZfKXt2YXIgbz1FcnJvcihcIlRydW5jYXRlZFwiKTt0aHJvdyBvLkFQPSEwLG99cj10aGlzLnZpZXcuZ2V0VWludDgoaSksbjw1JiYoc3w9KDEyNyZyKTw8NypuPj4+MCksKytufXdoaWxlKDEyOD09KDEyOCZyKSk7cmV0dXJuIHN8PTAsdD8odGhpcy5vZmZzZXQrPW4scyk6e3ZhbHVlOnMsbGVuZ3RoOm59fSxzLk9QPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuUFAoZSk7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQ/dC52YWx1ZT1uLmJQKHQudmFsdWUpOnQ9bi5iUCh0KSx0fSxlJiYobi5OUD0xMCxuLkRQPWZ1bmN0aW9uKHQpe1wibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5ERSh0KTpcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZS5rRSh0KSk7dmFyIHI9dC5rUCgpPj4+MCxpPXQuTFAoMjgpLmtQKCk+Pj4wLG49dC5MUCg1Nikua1AoKT4+PjA7cmV0dXJuIDA9PW4/MD09aT9yPDE2Mzg0P3I8MTI4PzE6MjpyPDE8PDIxPzM6NDppPDE2Mzg0P2k8MTI4PzU6NjppPDE8PDIxPzc6ODpuPDEyOD85OjEwfSxuLk1QPWZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5ERSh0LCExKTpcInN0cmluZ1wiPT10eXBlb2YgdD90PWUua0UodCwhMSk6ITEhPT10LkZQJiYodD10LlVQKCkpLHQuc2hpZnRMZWZ0KDEpLnBUKHQuSFAoNjMpKS5CUCgpfSxuLnhQPWZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5ERSh0LCExKTpcInN0cmluZ1wiPT10eXBlb2YgdD90PWUua0UodCwhMSk6ITEhPT10LkZQJiYodD10LlVQKCkpLHQuTFAoMSkucFQodC5xUChlLk9ORSkuVVAoKS5xRSgpKS5VUCgpfSxzLkdQPWZ1bmN0aW9uKHQscil7dmFyIGk9dm9pZCAwPT09cjtpZihpJiYocj10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXQ9ZS5ERSh0KTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXQ9ZS5rRSh0KTtlbHNlIGlmKCEodCYmdCBpbnN0YW5jZW9mIGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyIG9yIExvbmcpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiByfHxyJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3IrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigocj4+Pj0wKTwwfHxyKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrcitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfVwibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5ERSh0LCExKTpcInN0cmluZ1wiPT10eXBlb2YgdD90PWUua0UodCwhMSk6ITEhPT10LkZQJiYodD10LlVQKCkpO3ZhciBzPW4uRFAodCksbz10LmtQKCk+Pj4wLGE9dC5MUCgyOCkua1AoKT4+PjAsaD10LkxQKDU2KS5rUCgpPj4+MDtyKz1zO3ZhciBjPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7c3dpdGNoKHI+YyYmdGhpcy5yZXNpemUoKGMqPTIpPnI/YzpyKSxyLT1zLHMpe2Nhc2UgMTA6dGhpcy52aWV3LnNldFVpbnQ4KHIrOSxoPj4+NyYxKTtjYXNlIDk6dGhpcy52aWV3LnNldFVpbnQ4KHIrOCw5IT09cz8xMjh8aDoxMjcmaCk7Y2FzZSA4OnRoaXMudmlldy5zZXRVaW50OChyKzcsOCE9PXM/YT4+PjIxfDEyODphPj4+MjEmMTI3KTtjYXNlIDc6dGhpcy52aWV3LnNldFVpbnQ4KHIrNiw3IT09cz9hPj4+MTR8MTI4OmE+Pj4xNCYxMjcpO2Nhc2UgNjp0aGlzLnZpZXcuc2V0VWludDgocis1LDYhPT1zP2E+Pj43fDEyODphPj4+NyYxMjcpO2Nhc2UgNTp0aGlzLnZpZXcuc2V0VWludDgocis0LDUhPT1zPzEyOHxhOjEyNyZhKTtjYXNlIDQ6dGhpcy52aWV3LnNldFVpbnQ4KHIrMyw0IT09cz9vPj4+MjF8MTI4Om8+Pj4yMSYxMjcpO2Nhc2UgMzp0aGlzLnZpZXcuc2V0VWludDgocisyLDMhPT1zP28+Pj4xNHwxMjg6bz4+PjE0JjEyNyk7Y2FzZSAyOnRoaXMudmlldy5zZXRVaW50OChyKzEsMiE9PXM/bz4+Pjd8MTI4Om8+Pj43JjEyNyk7Y2FzZSAxOnRoaXMudmlldy5zZXRVaW50OChyLDEhPT1zPzEyOHxvOjEyNyZvKX1yZXR1cm4gaT8odGhpcy5vZmZzZXQrPXMsdGhpcyk6c30scy5WUD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLkdQKG4uTVAoZSksdCl9LHMualA9ZnVuY3Rpb24odCl7dmFyIHI9dm9pZCAwPT09dDtpZihyJiYodD10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzE+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzEpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBpPXQsbj0wLHM9MCxvPTAsYT0wO2lmKGE9dGhpcy52aWV3LmdldFVpbnQ4KHQrKyksbj0xMjcmYSwxMjgmYSYmKGE9dGhpcy52aWV3LmdldFVpbnQ4KHQrKyksbnw9KDEyNyZhKTw8NywxMjgmYSYmKGE9dGhpcy52aWV3LmdldFVpbnQ4KHQrKyksbnw9KDEyNyZhKTw8MTQsMTI4JmEmJihhPXRoaXMudmlldy5nZXRVaW50OCh0KyspLG58PSgxMjcmYSk8PDIxLDEyOCZhJiYoYT10aGlzLnZpZXcuZ2V0VWludDgodCsrKSxzPTEyNyZhLDEyOCZhJiYoYT10aGlzLnZpZXcuZ2V0VWludDgodCsrKSxzfD0oMTI3JmEpPDw3LDEyOCZhJiYoYT10aGlzLnZpZXcuZ2V0VWludDgodCsrKSxzfD0oMTI3JmEpPDwxNCwxMjgmYSYmKGE9dGhpcy52aWV3LmdldFVpbnQ4KHQrKyksc3w9KDEyNyZhKTw8MjEsMTI4JmEmJihhPXRoaXMudmlldy5nZXRVaW50OCh0KyspLG89MTI3JmEsMTI4JmEmJihhPXRoaXMudmlldy5nZXRVaW50OCh0KyspLG98PSgxMjcmYSk8PDcsMTI4JmEpKSkpKSkpKSkpdGhyb3cgRXJyb3IoXCJCdWZmZXIgb3ZlcnJ1blwiKTt2YXIgaD1lLnFJKG58czw8Mjgscz4+PjR8bzw8MjQsITEpO3JldHVybiByPyh0aGlzLm9mZnNldD10LGgpOnt2YWx1ZTpoLGxlbmd0aDp0LWl9fSxzLlFQPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMualAodCk7cmV0dXJuIHImJnIudmFsdWUgaW5zdGFuY2VvZiBlP3IudmFsdWU9bi54UChyLnZhbHVlKTpyPW4ueFAocikscn0pLHMuSGc9ZnVuY3Rpb24oZSxyKXt2YXIgaT12b2lkIDA9PT1yO2kmJihyPXRoaXMub2Zmc2V0KTt2YXIgbixzPWUubGVuZ3RoO2lmKCF0aGlzLkJfKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2ZvcihuPTA7bjxzOysrbilpZigwPT09ZS5jaGFyQ29kZUF0KG4pKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHN0cjogQ29udGFpbnMgTlVMTC1jaGFyYWN0ZXJzXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiByfHxyJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3IrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigocj4+Pj0wKTwwfHxyKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrcitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXM9Yy5LUCh0KGUpKVsxXSxyKz1zKzE7dmFyIG89dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtyZXR1cm4gcj5vJiZ0aGlzLnJlc2l6ZSgobyo9Mik+cj9vOnIpLHItPXMrMSxjLllQKHQoZSksZnVuY3Rpb24oZSl7dGhpcy52aWV3LnNldFVpbnQ4KHIrKyxlKX0uYmluZCh0aGlzKSksdGhpcy52aWV3LnNldFVpbnQ4KHIrKywwKSxpPyh0aGlzLm9mZnNldD1yLHRoaXMpOnN9LHMuWWc9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZTtpZih0JiYoZT10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzE+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzEpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBpLG49ZSxzPS0xO3JldHVybiBjLldQKGZ1bmN0aW9uKCl7aWYoMD09PXMpcmV0dXJuIG51bGw7aWYoZT49dGhpcy5GXyl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK2UrXCIgPCBcIit0aGlzLkZfKTtyZXR1cm4gMD09PShzPXRoaXMudmlldy5nZXRVaW50OChlKyspKT9udWxsOnN9LmJpbmQodGhpcyksaT1yKCksITApLHQ/KHRoaXMub2Zmc2V0PWUsaSgpKTp7c3RyaW5nOmkoKSxsZW5ndGg6ZS1ufX0scy56UD1mdW5jdGlvbihlLHIpe3ZhciBpPXZvaWQgMD09PXI7aWYoaSYmKHI9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiByfHxyJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3IrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigocj4+Pj0wKTwwfHxyKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrcitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBuLHM9cjtuPWMuS1AodChlKSx0aGlzLkJfKVsxXSxyKz00K247dmFyIG89dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtpZihyPm8mJnRoaXMucmVzaXplKChvKj0yKT5yP286ciksci09NCtuLHRoaXMudmlldy5zZXRVaW50MzIocixuLHRoaXMuVV8pLHIrPTQsYy5ZUCh0KGUpLGZ1bmN0aW9uKGUpe3RoaXMudmlldy5zZXRVaW50OChyKyssZSl9LmJpbmQodGhpcykpLHIhPT1zKzQrbil0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK3IrXCIgPT0gXCIrKHIrNCtuKSk7cmV0dXJuIGk/KHRoaXMub2Zmc2V0PXIsdGhpcyk6ci1zfSxzLkpQPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMD09PWU7aWYodCYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSs0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCs0KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgaSxuPTAscz1lO249dGhpcy52aWV3LmdldFVpbnQzMihlLHRoaXMuVV8pLGUrPTQ7dmFyIG8sYT1lK247cmV0dXJuIGMuV1AoZnVuY3Rpb24oKXtyZXR1cm4gZTxhP3RoaXMudmlldy5nZXRVaW50OChlKyspOm51bGx9LmJpbmQodGhpcyksbz1yKCksdGhpcy5CXyksaT1vKCksdD8odGhpcy5vZmZzZXQ9ZSxpKTp7c3RyaW5nOmksbGVuZ3RoOmUtc319LG4uWFA9XCJjXCIsbi5aUD1cImJcIixzLiRQPWZ1bmN0aW9uKGUscil7dmFyIGk9dm9pZCAwPT09cjtpZihpJiYocj10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiByfHxyJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3IrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigocj4+Pj0wKTwwfHxyKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrcitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBuLHM9cjtuPWMuS1AodChlKSlbMV0scis9bjt2YXIgbz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO3JldHVybiByPm8mJnRoaXMucmVzaXplKChvKj0yKT5yP286ciksci09bixjLllQKHQoZSksZnVuY3Rpb24oZSl7dGhpcy52aWV3LnNldFVpbnQ4KHIrKyxlKX0uYmluZCh0aGlzKSksaT8odGhpcy5vZmZzZXQ9cix0aGlzKTpyLXN9LHMucWI9cy4kUCxuLmVBPWZ1bmN0aW9uKGUpe3JldHVybiBjLktQKHQoZSkpWzBdfSxuLnRBPWZ1bmN0aW9uKGUpe3JldHVybiBjLktQKHQoZSkpWzFdfSxzLnJBPWZ1bmN0aW9uKGUsdCxpKXtcIm51bWJlclwiPT10eXBlb2YgdCYmKGk9dCx0PXZvaWQgMCk7dmFyIHM9dm9pZCAwPT09aTtpZihzJiYoaT10aGlzLm9mZnNldCksdm9pZCAwPT09dCYmKHQ9bi5YUCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBsZW5ndGg6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlfD0wLFwibnVtYmVyXCIhPXR5cGVvZiBpfHxpJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2krXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoaT4+Pj0wKTwwfHxpKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIraStcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBvLGE9MCxoPWk7aWYodD09PW4uWFApe2lmKG89cigpLGMuaUEoZnVuY3Rpb24oKXtyZXR1cm4gYTxlJiZpPHRoaXMuRl8/dGhpcy52aWV3LmdldFVpbnQ4KGkrKyk6bnVsbH0uYmluZCh0aGlzKSxmdW5jdGlvbihlKXsrK2EsYy5uQShlLG8pfS5iaW5kKHRoaXMpKSxhIT09ZSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK2ErXCIgPT0gXCIrZSk7cmV0dXJuIHM/KHRoaXMub2Zmc2V0PWksbygpKTp7c3RyaW5nOm8oKSxsZW5ndGg6aS1ofX1pZih0PT09bi5aUCl7aWYoIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBpfHxpJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2krXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoaT4+Pj0wKTwwfHxpK2U+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIraStcIiAoK1wiK2UrXCIpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciB1PWkrZTtpZihjLldQKGZ1bmN0aW9uKCl7cmV0dXJuIGk8dT90aGlzLnZpZXcuZ2V0VWludDgoaSsrKTpudWxsfS5iaW5kKHRoaXMpLG89cigpLHRoaXMuQl8pLGkhPT11KXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIraStcIiA9PSBcIit1KTtyZXR1cm4gcz8odGhpcy5vZmZzZXQ9aSxvKCkpOntzdHJpbmc6bygpLGxlbmd0aDppLWh9fXRocm93IFR5cGVFcnJvcihcIlVuc3VwcG9ydGVkIG1ldHJpY3M6IFwiK3QpfSxzLkxiPXMuckEscy5zQT1mdW5jdGlvbihlLHIpe3ZhciBpPXZvaWQgMD09PXI7aWYoaSYmKHI9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiByfHxyJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3IrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigocj4+Pj0wKTwwfHxyKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrcitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBzLG8sYT1yO3M9Yy5LUCh0KGUpLHRoaXMuQl8pWzFdLG89bi5SUChzKSxyKz1vK3M7dmFyIGg9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtpZihyPmgmJnRoaXMucmVzaXplKChoKj0yKT5yP2g6ciksci09bytzLHIrPXRoaXMuQ1AocyxyKSxjLllQKHQoZSksZnVuY3Rpb24oZSl7dGhpcy52aWV3LnNldFVpbnQ4KHIrKyxlKX0uYmluZCh0aGlzKSksciE9PWErcytvKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrcitcIiA9PSBcIisocitzK28pKTtyZXR1cm4gaT8odGhpcy5vZmZzZXQ9cix0aGlzKTpyLWF9LHMub0E9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZTtpZih0JiYoZT10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzE+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzEpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBpLG49dGhpcy5QUChlKSxzPWU7ZSs9bi5sZW5ndGgsbj1uLnZhbHVlO3ZhciBvPWUrbixhPXIoKTtyZXR1cm4gYy5XUChmdW5jdGlvbigpe3JldHVybiBlPG8/dGhpcy52aWV3LmdldFVpbnQ4KGUrKyk6bnVsbH0uYmluZCh0aGlzKSxhLHRoaXMuQl8pLGk9YSgpLHQ/KHRoaXMub2Zmc2V0PWUsaSk6e3N0cmluZzppLGxlbmd0aDplLXN9fSxzLmFwcGVuZD1mdW5jdGlvbihlLHQscil7XCJudW1iZXJcIiE9dHlwZW9mIHQmJlwic3RyaW5nXCI9PXR5cGVvZiB0fHwocj10LHQ9dm9pZCAwKTt2YXIgaT12b2lkIDA9PT1yO2lmKGkmJihyPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHIlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrcitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChyPj4+PTApPDB8fHIrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIityK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9ZSBpbnN0YW5jZW9mIG58fChlPW4ud3JhcChlLHQpKTt2YXIgcz1lLkZfLWUub2Zmc2V0O2lmKHM8PTApcmV0dXJuIHRoaXM7cis9czt2YXIgbz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO3JldHVybiByPm8mJnRoaXMucmVzaXplKChvKj0yKT5yP286ciksci09cyxuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcixyKS5zZXQobmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIpLnN1YmFycmF5KGUub2Zmc2V0LGUuRl8pKSxlLm9mZnNldCs9cyxpJiYodGhpcy5vZmZzZXQrPXMpLHRoaXN9LHMuYUE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5hcHBlbmQodGhpcyx0KSx0aGlzfSxzLmFzc2VydD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5CXz0hZSx0aGlzfSxzLmhBPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGh9LHMuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vZmZzZXQ9MCx0aGlzLkZfPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgsdGhpcy5NXz0tMSx0aGlzfSxzLmNsb25lPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBuKDAsdGhpcy5VXyx0aGlzLkJfKTtpZihlKXt2YXIgcj1uZXcgQXJyYXlCdWZmZXIodGhpcy5idWZmZXIuYnl0ZUxlbmd0aCk7bmV3IFVpbnQ4QXJyYXkocikuc2V0KHRoaXMuYnVmZmVyKSx0LmJ1ZmZlcj1yLHQudmlldz1uZXcgRGF0YVZpZXcocil9ZWxzZSB0LmJ1ZmZlcj10aGlzLmJ1ZmZlcix0LnZpZXc9dGhpcy52aWV3O3JldHVybiB0Lm9mZnNldD10aGlzLm9mZnNldCx0Lk1fPXRoaXMuTV8sdC5GXz10aGlzLkZfLHR9LHMuY29tcGFjdD1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLkZfKSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKDA9PT1lJiZ0PT09dGhpcy5idWZmZXIuYnl0ZUxlbmd0aClyZXR1cm4gdGhpczt2YXIgcj10LWU7aWYoMD09PXIpcmV0dXJuIHRoaXMuYnVmZmVyPW8sdGhpcy52aWV3PW51bGwsdGhpcy5NXz49MCYmKHRoaXMuTV8tPWUpLHRoaXMub2Zmc2V0PTAsdGhpcy5GXz0wLHRoaXM7dmFyIGk9bmV3IEFycmF5QnVmZmVyKHIpO3JldHVybiBuZXcgVWludDhBcnJheShpKS5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpLnN1YmFycmF5KGUsdCkpLHRoaXMuYnVmZmVyPWksdGhpcy52aWV3PW5ldyBEYXRhVmlldyhpKSx0aGlzLk1fPj0wJiYodGhpcy5NXy09ZSksdGhpcy5vZmZzZXQ9MCx0aGlzLkZfPXIsdGhpc30scy5jQT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLkZfKSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKGU9PT10KXJldHVybiBuZXcgbigwLHRoaXMuVV8sdGhpcy5CXyk7dmFyIHI9dC1lLGk9bmV3IG4ocix0aGlzLlVfLHRoaXMuQl8pO3JldHVybiBpLm9mZnNldD0wLGkuRl89cixpLk1fPj0wJiYoaS5NXy09ZSksdGhpcy5qRShpLDAsZSx0KSxpfSxzLmpFPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBzLG87aWYoIXRoaXMuQl8mJiFuLlZfKGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdGFyZ2V0OiBOb3QgYSBCeXRlQnVmZmVyXCIpO2lmKHQ9KG89dm9pZCAwPT09dCk/ZS5vZmZzZXQ6MHx0LHI9KHM9dm9pZCAwPT09cik/dGhpcy5vZmZzZXQ6MHxyLGk9dm9pZCAwPT09aT90aGlzLkZfOjB8aSx0PDB8fHQ+ZS5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCB0YXJnZXQgcmFuZ2U6IDAgPD0gXCIrdCtcIiA8PSBcIitlLmJ1ZmZlci5ieXRlTGVuZ3RoKTtpZihyPDB8fGk+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBzb3VyY2UgcmFuZ2U6IDAgPD0gXCIrcitcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKTt2YXIgYT1pLXI7cmV0dXJuIDA9PT1hP2U6KGUudUEodCthKSxuZXcgVWludDhBcnJheShlLmJ1ZmZlcikuc2V0KG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKS5zdWJhcnJheShyLGkpLHQpLHMmJih0aGlzLm9mZnNldCs9YSksbyYmKGUub2Zmc2V0Kz1hKSx0aGlzKX0scy51QT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO3JldHVybiB0PGU/dGhpcy5yZXNpemUoKHQqPTIpPmU/dDplKTp0aGlzfSxzLmZpbGw9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXZvaWQgMD09PXQ7aWYoaSYmKHQ9dGhpcy5vZmZzZXQpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiZlLmxlbmd0aD4wJiYoZT1lLmNoYXJDb2RlQXQoMCkpLHZvaWQgMD09PXQmJih0PXRoaXMub2Zmc2V0KSx2b2lkIDA9PT1yJiYocj10aGlzLkZfKSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZXw9MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKHQ+Pj49MCxcIm51bWJlclwiIT10eXBlb2Ygcnx8ciUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZihyPj4+PTAsdDwwfHx0PnJ8fHI+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIit0K1wiIDw9IFwiK3IrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYodD49cilyZXR1cm4gdGhpcztmb3IoO3Q8cjspdGhpcy52aWV3LnNldFVpbnQ4KHQrKyxlKTtyZXR1cm4gaSYmKHRoaXMub2Zmc2V0PXQpLHRoaXN9LHMueGc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5GXz10aGlzLm9mZnNldCx0aGlzLm9mZnNldD0wLHRoaXN9LHMubWFyaz1mdW5jdGlvbihlKXtpZihlPXZvaWQgMD09PWU/dGhpcy5vZmZzZXQ6ZSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHRoaXMuTV89ZSx0aGlzfSxzLm9yZGVyPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLkJfJiZcImJvb2xlYW5cIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBsaXR0bGVFbmRpYW46IE5vdCBhIGJvb2xlYW5cIik7cmV0dXJuIHRoaXMuVV89ISFlLHRoaXN9LHMubEE9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuVV89dm9pZCAwPT09ZXx8ISFlLHRoaXN9LHMucEE9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuVV89dm9pZCAwIT09ZSYmIWUsdGhpc30scy5kQT1mdW5jdGlvbihlLHQscil7XCJudW1iZXJcIiE9dHlwZW9mIHQmJlwic3RyaW5nXCI9PXR5cGVvZiB0fHwocj10LHQ9dm9pZCAwKTt2YXIgaT12b2lkIDA9PT1yO2lmKGkmJihyPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHIlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrcitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChyPj4+PTApPDB8fHIrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIityK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9ZSBpbnN0YW5jZW9mIG58fChlPW4ud3JhcChlLHQpKTt2YXIgcz1lLkZfLWUub2Zmc2V0O2lmKHM8PTApcmV0dXJuIHRoaXM7dmFyIG8sYT1zLXI7aWYoYT4wKXt2YXIgaD1uZXcgQXJyYXlCdWZmZXIodGhpcy5idWZmZXIuYnl0ZUxlbmd0aCthKTtvPW5ldyBVaW50OEFycmF5KGgpLG8uc2V0KG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKS5zdWJhcnJheShyLHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpLHMpLHRoaXMuYnVmZmVyPWgsdGhpcy52aWV3PW5ldyBEYXRhVmlldyhoKSx0aGlzLm9mZnNldCs9YSx0aGlzLk1fPj0wJiYodGhpcy5NXys9YSksdGhpcy5GXys9YSxyKz1hfWVsc2Ugbz1uZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcik7cmV0dXJuIG8uc2V0KG5ldyBVaW50OEFycmF5KGUuYnVmZmVyKS5zdWJhcnJheShlLm9mZnNldCxlLkZfKSxyLXMpLGUub2Zmc2V0PWUuRl8saSYmKHRoaXMub2Zmc2V0LT1zKSx0aGlzfSxzLmZBPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuZEEodGhpcyx0KSx0aGlzfSxzLmdBPWZ1bmN0aW9uKGUpe1wiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJihlPWNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkpLGUodGhpcy50b1N0cmluZygpK1wiXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblwiK3RoaXMuRUEoITApKX0scy52QT1mdW5jdGlvbigpe3JldHVybiB0aGlzLkZfLXRoaXMub2Zmc2V0fSxzLnJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTV8+PTA/KHRoaXMub2Zmc2V0PXRoaXMuTV8sdGhpcy5NXz0tMSk6dGhpcy5vZmZzZXQ9MCx0aGlzfSxzLnJlc2l6ZT1mdW5jdGlvbihlKXtpZighdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGNhcGFjaXR5OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGV8PTApPDApdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgY2FwYWNpdHk6IDAgPD0gXCIrZSl9aWYodGhpcy5idWZmZXIuYnl0ZUxlbmd0aDxlKXt2YXIgdD1uZXcgQXJyYXlCdWZmZXIoZSk7bmV3IFVpbnQ4QXJyYXkodCkuc2V0KG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKSksdGhpcy5idWZmZXI9dCx0aGlzLnZpZXc9bmV3IERhdGFWaWV3KHQpfXJldHVybiB0aGlzfSxzLnJldmVyc2U9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLm9mZnNldCksdm9pZCAwPT09dCYmKHQ9dGhpcy5GXyksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKHQ+Pj49MCxlPDB8fGU+dHx8dD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK2UrXCIgPD0gXCIrdCtcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gZT09PXQ/dGhpczooQXJyYXkucHJvdG90eXBlLnJldmVyc2UuY2FsbChuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcikuc3ViYXJyYXkoZSx0KSksdGhpcy52aWV3PW5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlciksdGhpcyl9LHMuTWI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBsZW5ndGg6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtlfD0wfXZhciB0PXRoaXMub2Zmc2V0K2U7aWYoIXRoaXMuQl8mJih0PDB8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgbGVuZ3RoOiAwIDw9IFwiK3RoaXMub2Zmc2V0K1wiICsgXCIrZStcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKTtyZXR1cm4gdGhpcy5vZmZzZXQ9dCx0aGlzfSxzLnNsaWNlPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMuRl8pLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIHI9dGhpcy5jbG9uZSgpO3JldHVybiByLm9mZnNldD1lLHIuRl89dCxyfSxzLnlBPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub2Zmc2V0LHI9dGhpcy5GXztpZih0PnIpe3ZhciBpPXQ7dD1yLHI9aX1pZighdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiByfHxyJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBsaW1pdDogTm90IGFuIGludGVnZXJcIik7aWYocj4+Pj0wLHQ8MHx8dD5yfHxyPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrdCtcIiA8PSBcIityK1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKCFlJiYwPT09dCYmcj09PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpcmV0dXJuIHRoaXMuYnVmZmVyO2lmKHQ9PT1yKXJldHVybiBvO3ZhciBuPW5ldyBBcnJheUJ1ZmZlcihyLXQpO3JldHVybiBuZXcgVWludDhBcnJheShuKS5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpLnN1YmFycmF5KHQsciksMCksbn0scy50Yz1zLnlBLHMudG9TdHJpbmc9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PWUpcmV0dXJuXCJCeXRlQnVmZmVyQUIob2Zmc2V0PVwiK3RoaXMub2Zmc2V0K1wiLG1hcmtlZE9mZnNldD1cIit0aGlzLk1fK1wiLGxpbWl0PVwiK3RoaXMuRl8rXCIsY2FwYWNpdHk9XCIrdGhpcy5oQSgpK1wiKVwiO3N3aXRjaChcIm51bWJlclwiPT10eXBlb2YgZSYmKGU9XCJ1dGY4XCIsdD1lLHI9dCksZSl7Y2FzZVwidXRmOFwiOnJldHVybiB0aGlzLlRBKHQscik7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIHRoaXMubUEodCxyKTtjYXNlXCJoZXhcIjpyZXR1cm4gdGhpcy5JQSh0LHIpO2Nhc2VcImJpbmFyeVwiOnJldHVybiB0aGlzLlNBKHQscik7Y2FzZVwiZGVidWdcIjpyZXR1cm4gdGhpcy5FQSgpO2Nhc2VcImNvbHVtbnNcIjpyZXR1cm4gdGhpcy5SQSgpO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBlbmNvZGluZzogXCIrZSl9fTt2YXIgaD1mdW5jdGlvbigpe2Zvcih2YXIgZT17fSx0PVs2NSw2Niw2Nyw2OCw2OSw3MCw3MSw3Miw3Myw3NCw3NSw3Niw3Nyw3OCw3OSw4MCw4MSw4Miw4Myw4NCw4NSw4Niw4Nyw4OCw4OSw5MCw5Nyw5OCw5OSwxMDAsMTAxLDEwMiwxMDMsMTA0LDEwNSwxMDYsMTA3LDEwOCwxMDksMTEwLDExMSwxMTIsMTEzLDExNCwxMTUsMTE2LDExNywxMTgsMTE5LDEyMCwxMjEsMTIyLDQ4LDQ5LDUwLDUxLDUyLDUzLDU0LDU1LDU2LDU3LDQzLDQ3XSxyPVtdLGk9MCxuPXQubGVuZ3RoO2k8bjsrK2kpclt0W2ldXT1pO3JldHVybiBlLmVuY29kZT1mdW5jdGlvbihlLHIpe2Zvcih2YXIgaSxuO251bGwhPT0oaT1lKCkpOylyKHRbaT4+MiY2M10pLG49KDMmaSk8PDQsbnVsbCE9PShpPWUoKSk/KG58PWk+PjQmMTUscih0WzYzJihufGk+PjQmMTUpXSksbj0oMTUmaSk8PDIsbnVsbCE9PShpPWUoKSk/KHIodFs2MyYobnxpPj42JjMpXSkscih0WzYzJmldKSk6KHIodFs2MyZuXSkscig2MSkpKToocih0WzYzJm5dKSxyKDYxKSxyKDYxKSl9LGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gaShlKXt0aHJvdyBFcnJvcihcIklsbGVnYWwgY2hhcmFjdGVyIGNvZGU6IFwiK2UpfWZvcih2YXIgbixzLG87bnVsbCE9PShuPWUoKSk7KWlmKHM9cltuXSx2b2lkIDA9PT1zJiZpKG4pLG51bGwhPT0obj1lKCkpJiYobz1yW25dLHZvaWQgMD09PW8mJmkobiksdChzPDwyPj4+MHwoNDgmbyk+PjQpLG51bGwhPT0obj1lKCkpKSl7aWYodm9pZCAwPT09KHM9cltuXSkpe2lmKDYxPT09bilicmVhaztpKG4pfWlmKHQoKDE1Jm8pPDw0Pj4+MHwoNjAmcyk+PjIpLG51bGwhPT0obj1lKCkpKXtpZih2b2lkIDA9PT0obz1yW25dKSl7aWYoNjE9PT1uKWJyZWFrO2kobil9dCgoMyZzKTw8Nj4+PjB8byl9fX0sZS50ZXN0PWZ1bmN0aW9uKGUpe3JldHVybi9eKD86W0EtWmEtejAtOStcXC9dezR9KSooPzpbQS1aYS16MC05K1xcL117Mn09PXxbQS1aYS16MC05K1xcL117M309KT8kLy50ZXN0KGUpfSxlfSgpO3MubUE9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLm9mZnNldCksdm9pZCAwPT09dCYmKHQ9dGhpcy5GXyksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKHQ+Pj49MCxlPDB8fGU+dHx8dD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK2UrXCIgPD0gXCIrdCtcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgaTtyZXR1cm4gaC5lbmNvZGUoZnVuY3Rpb24oKXtyZXR1cm4gZTx0P3RoaXMudmlldy5nZXRVaW50OChlKyspOm51bGx9LmJpbmQodGhpcyksaT1yKCkpLGkoKX0sbi5qXz1mdW5jdGlvbihlLHIsaSl7aWYoIWkpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBOb3QgYSBzdHJpbmdcIik7aWYoZS5sZW5ndGglNCE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTGVuZ3RoIG5vdCBhIG11bHRpcGxlIG9mIDRcIil9dmFyIHM9bmV3IG4oZS5sZW5ndGgvNCozLHIsaSksbz0wO3JldHVybiBoLmRlY29kZSh0KGUpLGZ1bmN0aW9uKGUpe3Mudmlldy5zZXRVaW50OChvKyssZSl9KSxzLkZfPW8sc30sbi5idG9hPWZ1bmN0aW9uKGUpe3JldHVybiBuLktfKGUpLm1BKCl9LG4uYXRvYj1mdW5jdGlvbihlKXtyZXR1cm4gbi5qXyhlKS5TQSgpfSxzLlNBPWZ1bmN0aW9uKGUsdCl7aWYoZT12b2lkIDA9PT1lP3RoaXMub2Zmc2V0OmUsdD12b2lkIDA9PT10P3RoaXMuRl86dCwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKGU9PT10KXJldHVyblwiXCI7Zm9yKHZhciByPVtdLGk9W107ZTx0OylyLnB1c2godGhpcy52aWV3LmdldFVpbnQ4KGUrKykpLHIubGVuZ3RoPj0xMDI0JiYoaS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLHIpKSxyPVtdKTtyZXR1cm4gaS5qb2luKFwiXCIpK1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLHIpfSxuLktfPWZ1bmN0aW9uKGUsdCxyKXtpZighciYmXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIHN0cmluZ1wiKTtmb3IodmFyIGkscz0wLG89ZS5sZW5ndGgsYT1uZXcgbihvLHQscik7czxvOyl7aWYoaT1lLmNoYXJDb2RlQXQocyksIXImJmk+MjU1KXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIGNoYXJDb2RlIGF0IFwiK3MrXCI6IDAgPD0gXCIraStcIiA8PSAyNTVcIik7YS52aWV3LnNldFVpbnQ4KHMrKyxpKX1yZXR1cm4gYS5GXz1vLGF9LHMuRUE9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9LTEsaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLG49XCJcIixzPVwiXCIsbz1cIlwiO3I8aTspe2lmKC0xIT09ciYmKHQ9dGhpcy52aWV3LmdldFVpbnQ4KHIpLG4rPXQ8MTY/XCIwXCIrdC50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTp0LnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLGUmJihzKz10PjMyJiZ0PDEyNz9TdHJpbmcuZnJvbUNoYXJDb2RlKHQpOlwiLlwiKSksKytyLGUmJnI+MCYmciUxNj09MCYmciE9PWkpe2Zvcig7bi5sZW5ndGg8NTE7KW4rPVwiIFwiO28rPW4rcytcIlxcblwiLG49cz1cIlwifXI9PT10aGlzLm9mZnNldCYmcj09PXRoaXMuRl8/bis9cj09PXRoaXMuTV8/XCIhXCI6XCJ8XCI6cj09PXRoaXMub2Zmc2V0P24rPXI9PT10aGlzLk1fP1wiW1wiOlwiPFwiOnI9PT10aGlzLkZfP24rPXI9PT10aGlzLk1fP1wiXVwiOlwiPlwiOm4rPXI9PT10aGlzLk1fP1wiJ1wiOmV8fDAhPT1yJiZyIT09aT9cIiBcIjpcIlwifWlmKGUmJlwiIFwiIT09bil7Zm9yKDtuLmxlbmd0aDw1MTspbis9XCIgXCI7bys9bitzK1wiXFxuXCJ9cmV0dXJuIGU/bzpufSxuLldfPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGkscyxvPWUubGVuZ3RoLGE9bmV3IG4oKG8rMSkvM3wwLHQsciksaD0wLGM9MCx1PSExLGw9ITEscD0hMSxkPSExLGY9ITE7aDxvOyl7c3dpdGNoKGk9ZS5jaGFyQXQoaCsrKSl7Y2FzZVwiIVwiOmlmKCFyKXtpZihsfHxwfHxkKXtmPSEwO2JyZWFrfWw9cD1kPSEwfWEub2Zmc2V0PWEuTV89YS5GXz1jLHU9ITE7YnJlYWs7Y2FzZVwifFwiOmlmKCFyKXtpZihsfHxkKXtmPSEwO2JyZWFrfWw9ZD0hMH1hLm9mZnNldD1hLkZfPWMsdT0hMTticmVhaztjYXNlXCJbXCI6aWYoIXIpe2lmKGx8fHApe2Y9ITA7YnJlYWt9bD1wPSEwfWEub2Zmc2V0PWEuTV89Yyx1PSExO2JyZWFrO2Nhc2VcIjxcIjppZighcil7aWYobCl7Zj0hMDticmVha31sPSEwfWEub2Zmc2V0PWMsdT0hMTticmVhaztjYXNlXCJdXCI6aWYoIXIpe2lmKGR8fHApe2Y9ITA7YnJlYWt9ZD1wPSEwfWEuRl89YS5NXz1jLHU9ITE7YnJlYWs7Y2FzZVwiPlwiOmlmKCFyKXtpZihkKXtmPSEwO2JyZWFrfWQ9ITB9YS5GXz1jLHU9ITE7YnJlYWs7Y2FzZVwiJ1wiOmlmKCFyKXtpZihwKXtmPSEwO2JyZWFrfXA9ITB9YS5NXz1jLHU9ITE7YnJlYWs7Y2FzZVwiIFwiOnU9ITE7YnJlYWs7ZGVmYXVsdDppZighciYmdSl7Zj0hMDticmVha31pZihzPXBhcnNlSW50KGkrZS5jaGFyQXQoaCsrKSwxNiksIXImJihpc05hTihzKXx8czwwfHxzPjI1NSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIGRlYnVnIGVuY29kZWQgc3RyaW5nXCIpO2Eudmlldy5zZXRVaW50OChjKysscyksdT0hMH1pZihmKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBJbnZhbGlkIHN5bWJvbCBhdCBcIitoKX1pZighcil7aWYoIWx8fCFkKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBNaXNzaW5nIG9mZnNldCBvciBsaW1pdFwiKTtpZihjPGEuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIGRlYnVnIGVuY29kZWQgc3RyaW5nIChpcyBpdCBoZXg/KSBcIitjK1wiIDwgXCIrbyl9cmV0dXJuIGF9LHMuSUE9ZnVuY3Rpb24oZSx0KXtpZihlPXZvaWQgMD09PWU/dGhpcy5vZmZzZXQ6ZSx0PXZvaWQgMD09PXQ/dGhpcy5GXzp0LCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9Zm9yKHZhciByLGk9bmV3IEFycmF5KHQtZSk7ZTx0OylyPXRoaXMudmlldy5nZXRVaW50OChlKyspLHI8MTY/aS5wdXNoKFwiMFwiLHIudG9TdHJpbmcoMTYpKTppLnB1c2goci50b1N0cmluZygxNikpO3JldHVybiBpLmpvaW4oXCJcIil9LG4uUV89ZnVuY3Rpb24oZSx0LHIpe2lmKCFyKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2lmKGUubGVuZ3RoJTIhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IExlbmd0aCBub3QgYSBtdWx0aXBsZSBvZiAyXCIpfWZvcih2YXIgaSxzPWUubGVuZ3RoLG89bmV3IG4ocy8yfDAsdCksYT0wLGg9MDthPHM7YSs9Mil7aWYoaT1wYXJzZUludChlLnN1YnN0cmluZyhhLGErMiksMTYpLCFyJiYoIWlzRmluaXRlKGkpfHxpPDB8fGk+MjU1KSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogQ29udGFpbnMgbm9uLWhleCBjaGFyYWN0ZXJzXCIpO28udmlldy5zZXRVaW50OChoKyssaSl9cmV0dXJuIG8uRl89aCxvfTt2YXIgYz1mdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBlLndBPTExMTQxMTEsZS5iQT1mdW5jdGlvbihlLHQpe3ZhciByPW51bGw7Zm9yKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYocj1lLGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pO251bGwhPT1yfHxudWxsIT09KHI9ZSgpKTspcjwxMjg/dCgxMjcmcik6cjwyMDQ4Pyh0KHI+PjYmMzF8MTkyKSx0KDYzJnJ8MTI4KSk6cjw2NTUzNj8odChyPj4xMiYxNXwyMjQpLHQocj4+NiY2M3wxMjgpLHQoNjMmcnwxMjgpKToodChyPj4xOCY3fDI0MCksdChyPj4xMiY2M3wxMjgpLHQocj4+NiY2M3wxMjgpLHQoNjMmcnwxMjgpKSxyPW51bGx9LGUuaUE9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsaSxuLHMsbz1mdW5jdGlvbihlKXtlPWUuc2xpY2UoMCxlLmluZGV4T2YobnVsbCkpO3ZhciB0PUVycm9yKGUudG9TdHJpbmcoKSk7dGhyb3cgdC5uYW1lPVwiVHJ1bmNhdGVkRXJyb3JcIix0LmJ5dGVzPWUsdH07bnVsbCE9PShyPWUoKSk7KWlmKDA9PSgxMjgmcikpdChyKTtlbHNlIGlmKDE5Mj09KDIyNCZyKSludWxsPT09KGk9ZSgpKSYmbyhbcixpXSksdCgoMzEmcik8PDZ8NjMmaSk7ZWxzZSBpZigyMjQ9PSgyNDAmcikpKG51bGw9PT0oaT1lKCkpfHxudWxsPT09KG49ZSgpKSkmJm8oW3IsaSxuXSksdCgoMTUmcik8PDEyfCg2MyZpKTw8Nnw2MyZuKTtlbHNle2lmKDI0MCE9KDI0OCZyKSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBzdGFydGluZyBieXRlOiBcIityKTsobnVsbD09PShpPWUoKSl8fG51bGw9PT0obj1lKCkpfHxudWxsPT09KHM9ZSgpKSkmJm8oW3IsaSxuLHNdKSx0KCg3JnIpPDwxOHwoNjMmaSk8PDEyfCg2MyZuKTw8Nnw2MyZzKX19LGUuQ0E9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsaT1udWxsOzspe2lmKG51bGw9PT0ocj1udWxsIT09aT9pOmUoKSkpYnJlYWs7cj49NTUyOTYmJnI8PTU3MzQzJiZudWxsIT09KGk9ZSgpKSYmaT49NTYzMjAmJmk8PTU3MzQzPyh0KDEwMjQqKHItNTUyOTYpK2ktNTYzMjArNjU1MzYpLGk9bnVsbCk6dChyKX1udWxsIT09aSYmdChpKX0sZS5uQT1mdW5jdGlvbihlLHQpe3ZhciByPW51bGw7Zm9yKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYocj1lLGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pO251bGwhPT1yfHxudWxsIT09KHI9ZSgpKTspcjw9NjU1MzU/dChyKTooci09NjU1MzYsdCg1NTI5Nisocj4+MTApKSx0KHIlMTAyNCs1NjMyMCkpLHI9bnVsbH0sZS5ZUD1mdW5jdGlvbih0LHIpe2UuQ0EodCxmdW5jdGlvbih0KXtlLmJBKHQscil9KX0sZS5XUD1mdW5jdGlvbih0LHIpe2UuaUEodCxmdW5jdGlvbih0KXtlLm5BKHQscil9KX0sZS5fQT1mdW5jdGlvbihlKXtyZXR1cm4gZTwxMjg/MTplPDIwNDg/MjplPDY1NTM2PzM6NH0sZS5QQT1mdW5jdGlvbih0KXtmb3IodmFyIHIsaT0wO251bGwhPT0ocj10KCkpOylpKz1lLl9BKHIpO3JldHVybiBpfSxlLktQPWZ1bmN0aW9uKHQpe3ZhciByPTAsaT0wO3JldHVybiBlLkNBKHQsZnVuY3Rpb24odCl7KytyLGkrPWUuX0EodCl9KSxbcixpXX0sZX0oKTtyZXR1cm4gcy5UQT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLkZfKSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBpO3RyeXtjLldQKGZ1bmN0aW9uKCl7cmV0dXJuIGU8dD90aGlzLnZpZXcuZ2V0VWludDgoZSsrKTpudWxsfS5iaW5kKHRoaXMpLGk9cigpKX1jYXRjaChyKXtpZihlIT09dCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK2UrXCIgIT0gXCIrdCl9cmV0dXJuIGkoKX0sbi5ZXz1mdW5jdGlvbihlLHIsaSl7aWYoIWkmJlwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBOb3QgYSBzdHJpbmdcIik7dmFyIHM9bmV3IG4oYy5LUCh0KGUpLCEwKVsxXSxyLGkpLG89MDtyZXR1cm4gYy5ZUCh0KGUpLGZ1bmN0aW9uKGUpe3Mudmlldy5zZXRVaW50OChvKyssZSl9KSxzLkZfPW8sc30sbn1cIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmXCJvYmplY3RcIj09dHlwZW9mIHQmJnQ/ZS5pPWZ1bmN0aW9uKCl7dmFyIGU7dHJ5e2U9cig5Myl9Y2F0Y2goZSl7fXJldHVybiBhKGUpfSgpOihuPVtyKDk0KV0sdm9pZCAwIT09KHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSl9LmFwcGx5KHQsbikpJiYoZS5pPXMpKX0oKX0pLmNhbGwodCxyKDYzKShlKSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDM3KTtlLmk9T2JqZWN0LE9iamVjdC5lbXB0eT1PYmplY3QuZnJlZXplKE9iamVjdC5jcmVhdGUobnVsbCkpLE9iamVjdC5hdT1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KGUpPT09ZX0sT2JqZWN0LkFBPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnZhbHVlT2YmJihlPWUudmFsdWVPZigpKSxlfTt2YXIgbj1uZXcgaTtPYmplY3QuaGFzaD1mdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5oYXNoP1wiXCIrZS5oYXNoKCk6T2JqZWN0KGUpPT09ZT8obi5oYXMoZSl8fG4uc2V0KGUsTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMikpLG4uZ2V0KGUpKTpcIlwiK2V9O3ZhciBzPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7T2JqZWN0Lk9BPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMuY2FsbChlLHQpfSxPYmplY3QuaGFzPWZ1bmN0aW9uKGUsdCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKFwiT2JqZWN0LmhhcyBjYW4ndCBhY2NlcHQgbm9uLW9iamVjdDogXCIrdHlwZW9mIGUpO2lmKGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuaGFzKXJldHVybiBlLmhhcyh0KTtpZihcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gdCBpbiBlJiZlW3RdIT09T2JqZWN0LnByb3RvdHlwZVt0XTt0aHJvdyBuZXcgRXJyb3IoXCJLZXkgbXVzdCBiZSBhIHN0cmluZyBmb3IgT2JqZWN0LmhhcyBvbiBwbGFpbiBvYmplY3RzXCIpfSxPYmplY3QuZ2V0PWZ1bmN0aW9uKGUsdCxyKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoXCJPYmplY3QuZ2V0IGNhbid0IGFjY2VwdCBub24tb2JqZWN0OiBcIit0eXBlb2YgZSk7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuZ2V0P2UuZ2V0KHQscik6T2JqZWN0LmhhcyhlLHQpP2VbdF06cn0sT2JqZWN0LnNldD1mdW5jdGlvbihlLHQscil7ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5zZXQ/ZS5zZXQodCxyKTplW3RdPXJ9LE9iamVjdC5hZGRFYWNoPWZ1bmN0aW9uKGUsdCl7aWYodClpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LmZvckVhY2h8fHQuaGFzT3duUHJvcGVydHkoXCJmb3JFYWNoXCIpKWlmKFwibnVtYmVyXCI9PXR5cGVvZiB0Lmxlbmd0aClmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyllW3JdPXRbcl07ZWxzZSBPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKHIpe2Vbcl09dFtyXX0pO2Vsc2UhMD09PXQuaXNNYXA/dC5mb3JFYWNoKGZ1bmN0aW9uKHQscil7ZVtyXT10fSk6dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2VbdFswXV09dFsxXX0pO2Vsc2U7cmV0dXJuIGV9LE9iamVjdC5mb3JFYWNoPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGksbj1PYmplY3Qua2V5cyhlKSxzPTA7aT1uW3NdO3MrKyl0LmNhbGwocixlW2ldLGksZSl9LE9iamVjdC5tYXA9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgaSxuPU9iamVjdC5rZXlzKGUpLHM9MCxvPVtdO2k9bltzXTtzKyspby5wdXNoKHQuY2FsbChyLGVbaV0saSxlKSk7cmV0dXJuIG99LE9iamVjdC52YWx1ZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5tYXAoZSxGdW5jdGlvbi5pZGVudGl0eSl9LE9iamVjdC5jb25jYXQ9ZnVuY3Rpb24oKXtmb3IodmFyIGU9e30sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspT2JqZWN0LmFkZEVhY2goZSxhcmd1bWVudHNbdF0pO3JldHVybiBlfSxPYmplY3QuZnJvbT1PYmplY3QuY29uY2F0LE9iamVjdC5pcz1mdW5jdGlvbihlLHQpe3JldHVybiBlPT09dD8wIT09ZXx8MS9lPT0xL3Q6ZSE9PWUmJnQhPT10fSxPYmplY3QuY3M9ZnVuY3Rpb24oZSx0LHIsbil7aWYocj1yfHxPYmplY3QuY3MsZT1PYmplY3QuQUEoZSksdD1PYmplY3QuQUEodCksZT09PXQpcmV0dXJuITA7aWYoT2JqZWN0LmF1KGUpKXtpZihuPW58fG5ldyBpLG4uaGFzKGUpKXJldHVybiEwO24uc2V0KGUsITApfWlmKE9iamVjdC5hdShlKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5jcylyZXR1cm4gZS5jcyh0LHIsbik7aWYoT2JqZWN0LmF1KHQpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNzKXJldHVybiB0LmNzKGUscixuKTtpZihPYmplY3QuYXUoZSkmJk9iamVjdC5hdSh0KSYmT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpPT09T2JqZWN0LnByb3RvdHlwZSYmT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpPT09T2JqZWN0LnByb3RvdHlwZSl7Zm9yKHZhciBzIGluIGUpaWYoIXIoZVtzXSx0W3NdLHIsbikpcmV0dXJuITE7Zm9yKHZhciBzIGluIHQpaWYoIShzIGluIGUmJnIodFtzXSxlW3NdLHIsbikpKXJldHVybiExO3JldHVybiEwfXJldHVybiBlIT09ZSYmdCE9PXR8fCghZXx8IXQpJiZlPT09dH0sT2JqZWN0Lk9jPWZ1bmN0aW9uKGUsdCl7aWYoZT1PYmplY3QuQUEoZSksdD1PYmplY3QuQUEodCksZT09PXQpcmV0dXJuIDA7dmFyIHI9dHlwZW9mIGUsaT10eXBlb2YgdDtyZXR1cm5cIm51bWJlclwiPT09ciYmXCJudW1iZXJcIj09PWk/ZS10Olwic3RyaW5nXCI9PT1yJiZcInN0cmluZ1wiPT09aT9lPHQ/LTEvMDoxLzA6ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5PYz9lLk9jKHQpOnQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuT2M/LXQuT2MoZSk6MH0sT2JqZWN0LmNsb25lPWZ1bmN0aW9uKGUsdCxyKXtpZihlPU9iamVjdC5BQShlKSxyPXJ8fG5ldyBpLHZvaWQgMD09PXQpdD0xLzA7ZWxzZSBpZigwPT09dClyZXR1cm4gZTtpZihPYmplY3QuYXUoZSkpe2lmKCFyLmhhcyhlKSlpZihlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNsb25lKXIuc2V0KGUsZS5jbG9uZSh0LHIpKTtlbHNle3ZhciBuPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtpZihudWxsIT09biYmbiE9PU9iamVjdC5wcm90b3R5cGUpdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY2xvbmUgXCIrZSk7dmFyIHM9T2JqZWN0LmNyZWF0ZShuKTtyLnNldChlLHMpO2Zvcih2YXIgbyBpbiBlKXNbb109T2JqZWN0LmNsb25lKGVbb10sdC0xLHIpfXJldHVybiByLmdldChlKX1yZXR1cm4gZX0sT2JqZWN0LmNsZWFyPWZ1bmN0aW9uKGUpe2lmKGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY2xlYXIpZS5jbGVhcigpO2Vsc2UgZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLHI9dC5sZW5ndGg7cjspci0tLGRlbGV0ZSBlW3Rbcl1dO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0KXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe2UuTkEmJmUuTkEodCl9ZnVuY3Rpb24gcihlKXtyZXR1cm4hKGUuc3Vic3RyKDAsZC5sZW5ndGgpPT1kJiZcIl9fX1wiPT09ZS5zdWJzdHIoZS5sZW5ndGgtMykpfWZ1bmN0aW9uIGkoZSl7aWYoZSE9PU9iamVjdChlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGFuIG9iamVjdDogXCIrZSk7dmFyIHQ9ZVtmXTtpZih0JiZ0LmtleT09PWUpcmV0dXJuIHQ7aWYocChlKSl7dD17a2V5OmV9O3RyeXtyZXR1cm4gbChlLGYse3ZhbHVlOnQsQWg6ITEscDohMSxsOiExfSksdH1jYXRjaChlKXtyZXR1cm59fX1mdW5jdGlvbiBuKGUpe3JldHVybiBlLnByb3RvdHlwZT1udWxsLE9iamVjdC5mcmVlemUoZSl9ZnVuY3Rpb24gcygpe3l8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlfHwoeT0hMCxjb25zb2xlLndhcm4oXCJXZWFrTWFwIHNob3VsZCBiZSBpbnZva2VkIGFzIG5ldyBXZWFrTWFwKCksIG5vdCBXZWFrTWFwKCkuIFRoaXMgd2lsbCBiZSBhbiBlcnJvciBpbiB0aGUgZnV0dXJlLlwiKSl9aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlc3x8IXNlcy5va3x8c2VzLm9rKCkpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBzZXMmJihzZXMuREE9dCk7dmFyIG89ITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgV2Vha01hcCl7dmFyIGE9V2Vha01hcDtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiYvRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSk7ZWxzZXt2YXIgaD1uZXcgYSxjPU9iamVjdC5mcmVlemUoe30pO2lmKGguc2V0KGMsMSksMT09PWguZ2V0KGMpKXJldHVybiB2b2lkKGUuaT1XZWFrTWFwKTtvPSEwfX12YXIgdT0oT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyksbD1PYmplY3QuZGVmaW5lUHJvcGVydHkscD1PYmplY3QuaXNFeHRlbnNpYmxlLGQ9XCJ3ZWFrbWFwOlwiLGY9ZCtcImlkZW50OlwiK01hdGgucmFuZG9tKCkrXCJfX19cIjtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgY3J5cHRvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBBcnJheUJ1ZmZlciYmXCJmdW5jdGlvblwiPT10eXBlb2YgVWludDhBcnJheSl7dmFyIGc9bmV3IEFycmF5QnVmZmVyKDI1KSxFPW5ldyBVaW50OEFycmF5KGcpO2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoRSksZj1kK1wicmFuZDpcIitBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoRSxmdW5jdGlvbihlKXtyZXR1cm4oZSUzNikudG9TdHJpbmcoMzYpfSkuam9pbihcIlwiKStcIl9fX1wifWlmKGwoT2JqZWN0LFwiZ2V0T3duUHJvcGVydHlOYW1lc1wiLHt2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdShlKS5maWx0ZXIocil9fSksXCJnZXRQcm9wZXJ0eU5hbWVzXCJpbiBPYmplY3Qpe3ZhciB2PU9iamVjdC5rQTtsKE9iamVjdCxcImdldFByb3BlcnR5TmFtZXNcIix7dmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHYoZSkuZmlsdGVyKHIpfX0pfSFmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5mcmVlemU7bChPYmplY3QsXCJmcmVlemVcIix7dmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGkodCksZSh0KX19KTt2YXIgdD1PYmplY3Quc2VhbDtsKE9iamVjdCxcInNlYWxcIix7dmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSksdChlKX19KTt2YXIgcj1PYmplY3QucHJldmVudEV4dGVuc2lvbnM7bChPYmplY3QsXCJwcmV2ZW50RXh0ZW5zaW9uc1wiLHt2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gaShlKSxyKGUpfX0pfSgpO3ZhciB5PSExLFQ9MCxtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciByLG49aShlKTtyZXR1cm4gbj9jIGluIG4/bltjXTp0OihyPWEuaW5kZXhPZihlKSxyPj0wP2hbcl06dCl9ZnVuY3Rpb24gdChlKXt2YXIgdD1pKGUpO3JldHVybiB0P2MgaW4gdDphLmluZGV4T2YoZSk+PTB9ZnVuY3Rpb24gcihlLHQpe3ZhciByLG49aShlKTtyZXR1cm4gbj9uW2NdPXQ6KHI9YS5pbmRleE9mKGUpLHI+PTA/aFtyXT10OihyPWEubGVuZ3RoLGhbcl09dCxhW3JdPWUpKSx0aGlzfWZ1bmN0aW9uIG8oZSl7dmFyIHQscixuPWkoZSk7cmV0dXJuIG4/YyBpbiBuJiZkZWxldGUgbltjXTohKCh0PWEuaW5kZXhPZihlKSk8MCkmJihyPWEubGVuZ3RoLTEsYVt0XT12b2lkIDAsaFt0XT1oW3JdLGFbdF09YVtyXSxhLmxlbmd0aD1yLGgubGVuZ3RoPXIsITApfXRoaXMgaW5zdGFuY2VvZiBtfHxzKCk7dmFyIGE9W10saD1bXSxjPVQrKztyZXR1cm4gT2JqZWN0LmNyZWF0ZShtLnByb3RvdHlwZSx7TEE6e3ZhbHVlOm4oZSl9LE1BOnt2YWx1ZTpuKHQpfSxGQTp7dmFsdWU6bihyKX0sVUE6e3ZhbHVlOm4obyl9fSl9O20ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoT2JqZWN0LnByb3RvdHlwZSx7Z2V0Ont2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLkxBKGUsdCl9LEFoOiEwLGw6ITB9LGhhczp7dmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuTUEoZSl9LEFoOiEwLGw6ITB9LHNldDp7dmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5GQShlLHQpfSxBaDohMCxsOiEwfSxkZWxldGU6e3ZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLlVBKGUpfSxBaDohMCxsOiEwfX0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIGE/ZnVuY3Rpb24oKXtmdW5jdGlvbiByKCl7ZnVuY3Rpb24gZShlLHQpe3JldHVybiB1P2MuaGFzKGUpP2MuZ2V0KGUpOnUuTEEoZSx0KTpjLmdldChlLHQpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGMuaGFzKGUpfHwhIXUmJnUuTUEoZSl9ZnVuY3Rpb24gaShlKXt2YXIgdD0hIWMuZGVsZXRlKGUpO3JldHVybiB1P3UuVUEoZSl8fHQ6dH10aGlzIGluc3RhbmNlb2YgbXx8cygpO3ZhciBoLGM9bmV3IGEsdT12b2lkIDAsbD0hMTtyZXR1cm4gaD1vP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGMuc2V0KGUsdCksYy5oYXMoZSl8fCh1fHwodT1uZXcgbSksdS5zZXQoZSx0KSksdGhpc306ZnVuY3Rpb24oZSx0KXtpZihsKXRyeXtjLnNldChlLHQpfWNhdGNoKHIpe3V8fCh1PW5ldyBtKSx1LkZBKGUsdCl9ZWxzZSBjLnNldChlLHQpO3JldHVybiB0aGlzfSxPYmplY3QuY3JlYXRlKG0ucHJvdG90eXBlLHtMQTp7dmFsdWU6bihlKX0sTUE6e3ZhbHVlOm4ocil9LEZBOnt2YWx1ZTpuKGgpfSxVQTp7dmFsdWU6bihpKX0sTkE6e3ZhbHVlOm4oZnVuY3Rpb24oZSl7aWYoZSE9PXQpdGhyb3cgbmV3IEVycm9yKFwiYm9ndXMgY2FsbCB0byBwZXJtaXRIb3N0T2JqZWN0c19fX1wiKTtsPSEwfSl9fSl9byYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFByb3h5JiYoUHJveHk9dm9pZCAwKSxyLnByb3RvdHlwZT1tLnByb3RvdHlwZSxlLmk9cixPYmplY3QuZGVmaW5lUHJvcGVydHkoV2Vha01hcC5wcm90b3R5cGUsXCJjb25zdHJ1Y3RvclwiLHt2YWx1ZTpXZWFrTWFwLHA6ITEsbDohMCxBaDohMH0pfSgpOihcInVuZGVmaW5lZFwiIT10eXBlb2YgUHJveHkmJihQcm94eT12b2lkIDApLGUuaT1tKX19KCl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKCl7dGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY29uc3RydWN0LiBSYW5nZUNoYW5nZXMgaXMgYSBtaXhpbi5cIil9dmFyIG49cigzNykscz1yKDUxKSxvPW5ldyBuO2UuaT1pLGkucHJvdG90eXBlLkJBPWZ1bmN0aW9uKCl7cmV0dXJuIG8uaGFzKHRoaXMpfHxvLnNldCh0aGlzLHMoKSksby5nZXQodGhpcyl9LGkucHJvdG90eXBlLkhBPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuQkEoKTtyZXR1cm4gZT1lfHxcIlwiLHQuaGFzKGUpfHx0LnNldChlLHtpc0FjdGl2ZTohMSxXYzpbXSxZYzpbXX0pLHQuZ2V0KGUpfSxpLnByb3RvdHlwZS54QT1mdW5jdGlvbihlLHQscil7IXRoaXMuWmMmJnRoaXMuWGMmJnRoaXMuWGMoKTt2YXIgaSxuPXRoaXMuSEEodCk7aT1yP24uWWM6bi5XYyxpLnB1c2goZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJkaXNwYXRjaGVzUmFuZ2VDaGFuZ2VzXCIse3ZhbHVlOiEwLEFoOiEwLGw6ITAscDohMX0pO3ZhciBzPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7cyYmKHMucUEoZSx0LHIpLHM9bnVsbCl9fSxpLnByb3RvdHlwZS5xQT1mdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzLkhBKHQpO2k9cj9uLlljOm4uV2M7dmFyIHM9aS5sYXN0SW5kZXhPZihlKTtpZigtMT09PXMpdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgcmVtb3ZlIHJhbmdlIGNoYW5nZSBsaXN0ZW5lcjogZG9lcyBub3QgZXhpc3Q6IHRva2VuIFwiK0pTT04uc3RyaW5naWZ5KHQpKTtpLnNwbGljZShzLDEpfSxpLnByb3RvdHlwZS5HQT1mdW5jdGlvbihlLHQscixpKXt2YXIgbj1cIlJhbmdlXCIrKGk/XCJXaWxsQ2hhbmdlXCI6XCJDaGFuZ2VcIik7dGhpcy5CQSgpLmZvckVhY2goZnVuY3Rpb24ocyxvKXtpZighcy5pc0FjdGl2ZSl7cy5pc0FjdGl2ZT0hMDt2YXIgYTthPWk/cy5ZYzpzLldjO3ZhciBoPVwiaGFuZGxlXCIrKG8uc2xpY2UoMCwxKS50b1VwcGVyQ2FzZSgpK28uc2xpY2UoMSkpK247dHJ5e2Euc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKCEoYS5pbmRleE9mKG4pPDApKWlmKG5baF0pbltoXShlLHQscix0aGlzLGkpO2Vsc2V7aWYoIW4uY2FsbCl0aHJvdyBuZXcgRXJyb3IoXCJIYW5kbGVyIFwiK24rXCIgaGFzIG5vIG1ldGhvZCBcIitoK1wiIGFuZCBpcyBub3QgY2FsbGFibGVcIik7bi5jYWxsKHRoaXMsZSx0LHIsdGhpcyxpKX19LHRoaXMpfWZpbmFsbHl7cy5pc0FjdGl2ZT0hMX19fSx0aGlzKX0saS5wcm90b3R5cGUuVkE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy54QShlLHQsITApfSxpLnByb3RvdHlwZS5qQT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnFBKGUsdCwhMCl9LGkucHJvdG90eXBlLlFBPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy5HQShlLHQsciwhMCl9fSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBjb25zdHJ1Y3QuIEdlbmVyaWNTZXQgaXMgYSBtaXhpbi5cIil9ZS5pPXIsci5wcm90b3R5cGUuS0E9ITAsci5wcm90b3R5cGUuWUE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5Fcyh0aGlzKTtyZXR1cm4gdC5hZGRFYWNoKGUpLHR9LHIucHJvdG90eXBlLldBPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLkVzKHRoaXMuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBlLmhhcyh0KX0pKX0sci5wcm90b3R5cGUuekE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5Fcyh0aGlzKTtyZXR1cm4gdC5fYyhlKSx0fSxyLnByb3RvdHlwZS5KQT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLllBKGUpLHI9dGhpcy5XQShlKTtyZXR1cm4gdC56QShyKX0sci5wcm90b3R5cGUuWEE9ZnVuY3Rpb24oZSl7cmV0dXJuK3RoaXMuZGVsZXRlKGUpfSxyLnByb3RvdHlwZS5jcz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUucmVkdWNlJiZ0aGlzLmxlbmd0aD09PWUubGVuZ3RoJiZlLnJlZHVjZShmdW5jdGlvbihlLGkpe3JldHVybiBlJiZyLmhhcyhpLHQpfSwhMCl9LHIucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRvQXJyYXkoKX0sci5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaGFzKGUpfSxyLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGVsZXRlKGUpfSxyLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oZSl7dGhpcy5oYXMoZSk/dGhpcy5kZWxldGUoZSk6dGhpcy5hZGQoZSl9fSxmdW5jdGlvbihlLHQscil7dmFyIGksaTshZnVuY3Rpb24odCl7ZS5pPXQoKX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LHIsbil7ZnVuY3Rpb24gcyhhLGgpe2lmKCFyW2FdKXtpZighdFthXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgaSYmaTtpZighaCYmYylyZXR1cm4gaShhLCEwKTtpZihvKXJldHVybiBvKGEsITApO3ZhciB1PW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrYStcIidcIik7dGhyb3cgdS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLHV9dmFyIGw9clthXT17aTp7fX07dFthXVswXS5jYWxsKGwuaSxmdW5jdGlvbihlKXt2YXIgcj10W2FdWzFdW2VdO3JldHVybiBzKHJ8fGUpfSxsLGwuaSxlLHQscixuKX1yZXR1cm4gclthXS5pfWZvcih2YXIgbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiZpLGE9MDthPG4ubGVuZ3RoO2ErKylzKG5bYV0pO3JldHVybiBzfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBpPWUoXCIuL2tlcm5lbFwiKTtyLkQ9aS5EO3ZhciBuPWUoXCIuL3R5cGVfYmluZGluZ1wiKTtyLlpBPW4uWkE7dmFyIHM9ZShcIi4vdHlwZV9iaW5kaW5nX3Njb3BlXCIpO3IuJEE9cy4kQX0se1wiLi9rZXJuZWxcIjoyLFwiLi90eXBlX2JpbmRpbmdcIjo0LFwiLi90eXBlX2JpbmRpbmdfc2NvcGVcIjo1fV0sMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBpPWUoXCIuL3R5cGVfYmluZGluZ19zY29wZVwiKSxuPWUoXCIuL2xvb2t1cFwiKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuZU89bmV3IG4udE99cmV0dXJuIGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oZSl7dGhpcy5lTy5hZGQoZS5yTyxlKX0sZS5wcm90b3R5cGUuaU89ZnVuY3Rpb24oZSl7dHJ5e3RoaXMuZU8ucmVtb3ZlKGUpfWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCByZXNvbHZlIHNlcnZpY2UgXCIrZSl9fSxlLnByb3RvdHlwZS5OPWZ1bmN0aW9uKCl7dGhpcy5lTz1uZXcgbi50T30sZS5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbihlKXt2YXIgdDtpZighdGhpcy5lTy5uTyhlKSlyZXR1cm4gbnVsbDt0PXRoaXMuZU8uZ2V0KGUpO3ZhciByPXRbMF07aWYoci5zY29wZT09PWkuJEEuc08mJm51bGwhPT1yLnNDKXJldHVybiByLnNDO3ZhciBuPXRoaXMub08oci5hTyk7cmV0dXJuIHIuc0M9bixufSxlLnByb3RvdHlwZS5oTz1mdW5jdGlvbihlKXt2YXIgdCxyLGksbixzLG87cmV0dXJuIHM9LygoXFwvXFwvLiokKXwoXFwvXFwqW1xcc1xcU10qP1xcKlxcLykpL2dtLG89LyhbXlxccyxdKykvZyx0PWUudG9TdHJpbmcoKS5yZXBsYWNlKHMsXCJcIikscj10LmluZGV4T2YoXCIoXCIpKzEsaT10LmluZGV4T2YoXCIpXCIpLG49XCJmdW5jdGlvblwiPT10eXBlb2YgTWFwJiYtMSE9PXQuaW5kZXhPZihcImNsYXNzXCIpJiYtMT09PXQuaW5kZXhPZihcImNvbnN0cnVjdG9yXCIpP251bGw6dC5zbGljZShyLGkpLm1hdGNoKG8pLG51bGw9PT1uJiYobj1bXSksbn0sZS5wcm90b3R5cGUub089ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5oTyhlKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIG5ldyBlO2Zvcih2YXIgcj1bXSxpPW51bGwsbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcz10W25dO2k9dGhpcy5yZXNvbHZlKHMpLHIucHVzaChpKX1yZXR1cm4gdGhpcy5jTyhlLHIpfSxlLnByb3RvdHlwZS5jTz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoZSxbbnVsbF0uY29uY2F0KHQpKSl9LGV9KCk7ci5EPXN9LHtcIi4vbG9va3VwXCI6MyxcIi4vdHlwZV9iaW5kaW5nX3Njb3BlXCI6NX1dLDM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLmtleT1lLHRoaXMudmFsdWU9bmV3IEFycmF5LHRoaXMudmFsdWUucHVzaCh0KX1yZXR1cm4gZX0oKSxuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMudU89bmV3IEFycmF5fXJldHVybiBlLnByb3RvdHlwZS5sTz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9LTEscj0wO3I8dGhpcy51Ty5sZW5ndGg7cisrKXt0aGlzLnVPW3JdLmtleT09PWUmJih0PXIpfXJldHVybiB0fSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZXx8dm9pZCAwPT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJBcmd1bWVudCBOdWxsXCIpO2lmKG51bGw9PT10fHx2b2lkIDA9PT10KXRocm93IG5ldyBFcnJvcihcIkFyZ3VtZW50IE51bGxcIik7dmFyIHI9dGhpcy5sTyhlKTtpZigtMSE9PXIpe3ZhciBuPXRoaXMudU9bcl07bi5rZXk9PT1lJiZuLnZhbHVlLnB1c2godCl9ZWxzZSB0aGlzLnVPLnB1c2gobmV3IGkoZSx0KSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtpZihudWxsPT09ZXx8dm9pZCAwPT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJBcmd1bWVudCBOdWxsXCIpO3ZhciB0PXRoaXMubE8oZSk7aWYoLTE9PT10KXRocm93IG5ldyBFcnJvcihcIktleSBOb3QgRm91bmRcIik7dmFyIHI9dGhpcy51T1t0XTtyZXR1cm4gci5rZXk9PT1lP3IudmFsdWU6dm9pZCAwfSxlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7aWYobnVsbD09PWV8fHZvaWQgMD09PWUpdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnQgTnVsbFwiKTt2YXIgdD10aGlzLmxPKGUpO2lmKC0xPT09dCl0aHJvdyBuZXcgRXJyb3IoXCJLZXkgTm90IEZvdW5kXCIpO3RoaXMudU8uc3BsaWNlKHQsMSl9LGUucHJvdG90eXBlLm5PPWZ1bmN0aW9uKGUpe2lmKG51bGw9PT1lfHx2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcihcIkFyZ3VtZW50IE51bGxcIik7cmV0dXJuLTEhPT10aGlzLmxPKGUpfSxlfSgpO3IudE89bn0se31dLDQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgaT1lKFwiLi90eXBlX2JpbmRpbmdfc2NvcGVcIiksbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe2lmKHRoaXMuck89ZSx0aGlzLmFPPXQsdGhpcy5zQz1udWxsLHZvaWQgMD09PXIpdGhpcy5zY29wZT1pLiRBLnBPO2Vsc2V7aWYoIWkuJEFbcl0pe3ZhciBuPVwiSW52YWxpZCBzY29wZSB0eXBlIFwiK3I7dGhyb3cgbmV3IEVycm9yKG4pfXRoaXMuc2NvcGU9cn19cmV0dXJuIGV9KCk7ci5aQT1ufSx7XCIuL3R5cGVfYmluZGluZ19zY29wZVwiOjV9XSw1OltmdW5jdGlvbihlLHQscil7dmFyIGk7IWZ1bmN0aW9uKGUpe2VbZS5wTz0wXT1cIlRyYW5zaWVudFwiLGVbZS5zTz0xXT1cIlNpbmdsZXRvblwifShpfHwoaT17fSkpLHIuJEE9aX0se31dfSx7fSxbMV0pKDEpfSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaTshZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO3QuTG9nZ2VyVGltZXN0YW1wPSEwLGUuRnJhbWV3b3JrPXQ7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO3IuTWV0cmljU25hcHNob3RMb2dzPTAsci5UcmFja1NuYXBzaG90TG9ncz0wLGUuRGVidWdMb2dzPXJ9KGk9dC5IaXZlQ29uZmlnfHwodC5IaXZlQ29uZmlnPXt9KSksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmKHZvaWQgMD09PXdpbmRvdy5IaXZlQ29uZmlnJiYod2luZG93LkhpdmVDb25maWc9e30pLHdpbmRvdy5IaXZlQ29uZmlnLkZyYW1ld29yaz1pLkZyYW1ld29yayx3aW5kb3cuSGl2ZUNvbmZpZy5EZWJ1Z0xvZ3M9aS5EZWJ1Z0xvZ3MpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO2kuZE89XCIxMjcuMC4wLjFcIixpLnZwPTg5OTksaS5FcD04OTk4LGkuZ3A9ODg5OSxpLmRwPTg4OTgsaS5mTz1cIi8vezB9OnsxfS8/Y2FsbGJhY2s9ezJ9ezN9aGl2ZVBsdWdpbklkPXs0fVwiLGkuZ089XCIvL3swfTp7MX0vP2NhbGxiYWNrPXsyfVwiLGkueXA9ITAsaS5FTz0vKChodHRwfGh0dHBzKTpcXC9cXC8oLiopOihbMC05XSopXFwvKFswLTlhLXotXSopLmlzbVxcLykoLiopLyxpLnZPPVwiMjAxMy4xLjFcIixpLnlPPVwiMjAxOC4xXCIsdC5mcD1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5jb3VudD0wfXJldHVybiBlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuKyt0aGlzLmNvdW50fSxlfSgpO3QuQ291bnRlcj1pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMucmVzZXQoKX1yZXR1cm4gZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUpe2U8PTB8fCh0aGlzLlRPKz1lLHRoaXMubU8rKyxlPnRoaXMuSU8mJih0aGlzLklPPWUpLGU8dGhpcy5TTyYmKHRoaXMuU089ZSkpfSxlLnByb3RvdHlwZS5taW49ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9ITApO3ZhciB0PXRoaXMuU089PU51bWJlci5QT1NJVElWRV9JTkZJTklUWT8wOnRoaXMuU087cmV0dXJuIGUmJnRoaXMucmVzZXQoKSx0fSxlLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9ITApO3ZhciB0PXRoaXMuSU89PU51bWJlci5ORUdBVElWRV9JTkZJTklUWT8wOnRoaXMuSU87cmV0dXJuIGUmJnRoaXMucmVzZXQoKSx0fSxlLnByb3RvdHlwZS5OYz1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT0hMCk7dmFyIHQ9dGhpcy5UTztyZXR1cm4gZSYmdGhpcy5yZXNldCgpLHR9LGUucHJvdG90eXBlLmVjPWZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPSEwKTt2YXIgdD10aGlzLm1PPjA/dGhpcy5UTy90aGlzLm1POjA7cmV0dXJuIGUmJnRoaXMucmVzZXQoKSx0fSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuU089TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLHRoaXMuSU89TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLHRoaXMuVE89MCx0aGlzLm1PPTB9LGV9KCk7dC5STz1ufSxmdW5jdGlvbihlLHQscil7dmFyIGk7IWZ1bmN0aW9uKG4scyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG89XCJtb2RlbFwiLGE9XCJuYW1lXCIsaD1cInR5cGVcIixjPVwidmVuZG9yXCIsdT1cInZlcnNpb25cIixsPVwibW9iaWxlXCIscD1cInRhYmxldFwiLGQ9e2V4dGVuZDpmdW5jdGlvbihlLHQpe3ZhciByPXt9O2Zvcih2YXIgaSBpbiBlKXRbaV0mJnRbaV0ubGVuZ3RoJTI9PTA/cltpXT10W2ldLmNvbmNhdChlW2ldKTpyW2ldPWVbaV07cmV0dXJuIHJ9LGhhczpmdW5jdGlvbihlLHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiYtMSE9PXQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGUudG9Mb3dlckNhc2UoKSl9LHdPOmZ1bmN0aW9uKGUpe3JldHVybiBlLnRvTG93ZXJDYXNlKCl9LGJPOmZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP2UucmVwbGFjZSgvW15cXGRcXC5dL2csXCJcIikuc3BsaXQoXCIuXCIpWzBdOnZvaWQgMH0sdHJpbTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcIlwiKX19LGY9e0NPOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQscixpLG4scyxvLGE9MCxoPWFyZ3VtZW50czthPGgubGVuZ3RoJiYhczspe3ZhciBjPWhbYV0sdT1oW2ErMV07aWYodm9pZCAwPT09ZSl7ZT17fTtmb3IoaSBpbiB1KXUuaGFzT3duUHJvcGVydHkoaSkmJihuPXVbaV0sXCJvYmplY3RcIj09dHlwZW9mIG4/ZVtuWzBdXT12b2lkIDA6ZVtuXT12b2lkIDApfWZvcih0PXI9MDt0PGMubGVuZ3RoJiYhczspaWYocz1jW3QrK10uZXhlYyh0aGlzLl9PKCkpKWZvcihpPTA7aTx1Lmxlbmd0aDtpKyspbz1zWysrcl0sbj11W2ldLFwib2JqZWN0XCI9PXR5cGVvZiBuJiZuLmxlbmd0aD4wPzI9PW4ubGVuZ3RoP1wiZnVuY3Rpb25cIj09dHlwZW9mIG5bMV0/ZVtuWzBdXT1uWzFdLmNhbGwodGhpcyxvKTplW25bMF1dPW5bMV06Mz09bi5sZW5ndGg/XCJmdW5jdGlvblwiIT10eXBlb2YgblsxXXx8blsxXS5leGVjJiZuWzFdLnRlc3Q/ZVtuWzBdXT1vP28ucmVwbGFjZShuWzFdLG5bMl0pOnZvaWQgMDplW25bMF1dPW8/blsxXS5jYWxsKHRoaXMsbyxuWzJdKTp2b2lkIDA6ND09bi5sZW5ndGgmJihlW25bMF1dPW8/blszXS5jYWxsKHRoaXMsby5yZXBsYWNlKG5bMV0sblsyXSkpOnZvaWQgMCk6ZVtuXT1vfHx2b2lkIDA7YSs9Mn1yZXR1cm4gZX0sc3RyOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpaWYoXCJvYmplY3RcIj09dHlwZW9mIHRbcl0mJnRbcl0ubGVuZ3RoPjApe2Zvcih2YXIgaT0wO2k8dFtyXS5sZW5ndGg7aSsrKWlmKGQuaGFzKHRbcl1baV0sZSkpcmV0dXJuXCI/XCI9PT1yP3ZvaWQgMDpyfWVsc2UgaWYoZC5oYXModFtyXSxlKSlyZXR1cm5cIj9cIj09PXI/dm9pZCAwOnI7cmV0dXJuIGV9fSxnPXtRdTp7UE86e3ZlcnNpb246e1wiMS4wXCI6XCIvOFwiLDEuMjpcIi8xXCIsMS4zOlwiLzNcIixcIjIuMFwiOlwiLzQxMlwiLFwiMi4wLjJcIjpcIi80MTZcIixcIjIuMC4zXCI6XCIvNDE3XCIsXCIyLjAuNFwiOlwiLzQxOVwiLFFSOlwiL1wifX19LEFPOntPTzp7Tk86e0RPOltcIlNEXCIsXCJLRlwiXX19LGtPOntOTzp7TE86XCI3MzczS1RcIn0sdmVuZG9yOntNTzpcIkFQQVwiLEZPOlwiU3ByaW50XCJ9fX0sb3M6e1VPOnt2ZXJzaW9uOntCTzpcIjQuOTBcIixcIk5UIDMuMTFcIjpcIk5UMy41MVwiLFwiTlQgNC4wXCI6XCJOVDQuMFwiLDIwMDA6XCJOVCA1LjBcIixITzpbXCJOVCA1LjFcIixcIk5UIDUuMlwiXSx4TzpcIk5UIDYuMFwiLDc6XCJOVCA2LjFcIiw4OlwiTlQgNi4yXCIsOC4xOlwiTlQgNi4zXCIsMTA6W1wiTlQgNi40XCIsXCJOVCAxMC4wXCJdLHFPOlwiQVJNXCJ9fX19LEU9e1F1OltbLyhvcGVyYVxcc21pbmkpXFwvKFtcXHdcXC4tXSspL2ksLyhvcGVyYVxcc1ttb2JpbGV0YWJdKykuK3ZlcnNpb25cXC8oW1xcd1xcLi1dKykvaSwvKG9wZXJhKS4rdmVyc2lvblxcLyhbXFx3XFwuXSspL2ksLyhvcGVyYSlbXFwvXFxzXSsoW1xcd1xcLl0rKS9pXSxbYSx1XSxbLyhvcGlvcylbXFwvXFxzXSsoW1xcd1xcLl0rKS9pXSxbW2EsXCJPcGVyYSBNaW5pXCJdLHVdLFsvXFxzKG9wcilcXC8oW1xcd1xcLl0rKS9pXSxbW2EsXCJPcGVyYVwiXSx1XSxbLyhraW5kbGUpXFwvKFtcXHdcXC5dKykvaSwvKGx1bmFzY2FwZXxtYXh0aG9ufG5ldGZyb250fGphc21pbmV8YmxhemVyKVtcXC9cXHNdPyhbXFx3XFwuXSspKi9pLC8oYXZhbnRcXHN8aWVtb2JpbGV8c2xpbXxiYWlkdSkoPzpicm93c2VyKT9bXFwvXFxzXT8oW1xcd1xcLl0qKS9pLC8oPzptc3xcXCgpKGllKVxccyhbXFx3XFwuXSspL2ksLyhyZWtvbnEpXFwvKFtcXHdcXC5dKykqL2ksLyhjaHJvbWl1bXxmbG9ja3xyb2NrbWVsdHxtaWRvcml8ZXBpcGhhbnl8c2lsa3xza3lmaXJlfG92aWJyb3dzZXJ8Ym9sdHxpcm9ufHZpdmFsZGl8aXJpZGl1bXxwaGFudG9tanMpXFwvKFtcXHdcXC4tXSspL2ldLFthLHVdLFsvKHRyaWRlbnQpLitydls6XFxzXShbXFx3XFwuXSspLitsaWtlXFxzZ2Vja28vaV0sW1thLFwiSUVcIl0sdV0sWy8oZWRnZSlcXC8oKFxcZCspP1tcXHdcXC5dKykvaV0sW2EsdV0sWy8oeWFicm93c2VyKVxcLyhbXFx3XFwuXSspL2ldLFtbYSxcIllhbmRleFwiXSx1XSxbLyhjb21vZG9fZHJhZ29uKVxcLyhbXFx3XFwuXSspL2ldLFtbYSwvXy9nLFwiIFwiXSx1XSxbLyhtaWNyb21lc3NlbmdlcilcXC8oW1xcd1xcLl0rKS9pXSxbW2EsXCJXZUNoYXRcIl0sdV0sWy94aWFvbWlcXC9taXVpYnJvd3NlclxcLyhbXFx3XFwuXSspL2ldLFt1LFthLFwiTUlVSSBCcm93c2VyXCJdXSxbL1xcc3d2XFwpLisoY2hyb21lKVxcLyhbXFx3XFwuXSspL2ldLFtbYSwvKC4rKS8sXCIkMSBXZWJWaWV3XCJdLHVdLFsvYW5kcm9pZC4rc2Ftc3VuZ2Jyb3dzZXJcXC8oW1xcd1xcLl0rKS9pLC9hbmRyb2lkLit2ZXJzaW9uXFwvKFtcXHdcXC5dKylcXHMrKD86bW9iaWxlXFxzP3NhZmFyaXxzYWZhcmkpKi9pXSxbdSxbYSxcIkFuZHJvaWQgQnJvd3NlclwiXV0sWy8oY2hyb21lfG9tbml3ZWJ8YXJvcmF8W3RpemVub2thXXs1fVxccz9icm93c2VyKVxcL3Y/KFtcXHdcXC5dKykvaSwvKHFxYnJvd3NlcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pXSxbYSx1XSxbLyh1Y1xccz9icm93c2VyKVtcXC9cXHNdPyhbXFx3XFwuXSspL2ksL3Vjd2ViLisodWNicm93c2VyKVtcXC9cXHNdPyhbXFx3XFwuXSspL2ksL2p1Yy4rKHVjd2ViKVtcXC9cXHNdPyhbXFx3XFwuXSspL2ldLFtbYSxcIlVDQnJvd3NlclwiXSx1XSxbLyhkb2xmaW4pXFwvKFtcXHdcXC5dKykvaV0sW1thLFwiRG9scGhpblwiXSx1XSxbLygoPzphbmRyb2lkLispY3Jtb3xjcmlvcylcXC8oW1xcd1xcLl0rKS9pXSxbW2EsXCJDaHJvbWVcIl0sdV0sWy87ZmJhdlxcLyhbXFx3XFwuXSspOy9pXSxbdSxbYSxcIkZhY2Vib29rXCJdXSxbL2Z4aW9zXFwvKFtcXHdcXC4tXSspL2ldLFt1LFthLFwiRmlyZWZveFwiXV0sWy92ZXJzaW9uXFwvKFtcXHdcXC5dKykuKz9tb2JpbGVcXC9cXHcrXFxzKHNhZmFyaSkvaV0sW3UsW2EsXCJNb2JpbGUgU2FmYXJpXCJdXSxbL3ZlcnNpb25cXC8oW1xcd1xcLl0rKS4rPyhtb2JpbGVcXHM/c2FmYXJpfHNhZmFyaSkvaV0sW3UsYV0sWy93ZWJraXQuKz8obW9iaWxlXFxzP3NhZmFyaXxzYWZhcmkpKFxcL1tcXHdcXC5dKykvaV0sW2EsW3UsZi5zdHIsZy5RdS5QTy52ZXJzaW9uXV0sWy8oa29ucXVlcm9yKVxcLyhbXFx3XFwuXSspL2ksLyh3ZWJraXR8a2h0bWwpXFwvKFtcXHdcXC5dKykvaV0sW2EsdV0sWy8obmF2aWdhdG9yfG5ldHNjYXBlKVxcLyhbXFx3XFwuLV0rKS9pXSxbW2EsXCJOZXRzY2FwZVwiXSx1XSxbLyhzd2lmdGZveCkvaSwvKGljZWRyYWdvbnxpY2V3ZWFzZWx8Y2FtaW5vfGNoaW1lcmF8ZmVubmVjfG1hZW1vXFxzYnJvd3NlcnxtaW5pbW98Y29ua2Vyb3IpW1xcL1xcc10/KFtcXHdcXC5cXCtdKykvaSwvKGZpcmVmb3h8c2VhbW9ua2V5fGstbWVsZW9ufGljZWNhdHxpY2VhcGV8ZmlyZWJpcmR8cGhvZW5peClcXC8oW1xcd1xcLi1dKykvaSwvKG1vemlsbGEpXFwvKFtcXHdcXC5dKykuK3J2XFw6LitnZWNrb1xcL1xcZCsvaSwvKHBvbGFyaXN8bHlueHxkaWxsb3xpY2FifGRvcmlzfGFtYXlhfHczbXxuZXRzdXJmfHNsZWlwbmlyKVtcXC9cXHNdPyhbXFx3XFwuXSspL2ksLyhsaW5rcylcXHNcXCgoW1xcd1xcLl0rKS9pLC8oZ29icm93c2VyKVxcLz8oW1xcd1xcLl0rKSovaSwvKGljZVxccz9icm93c2VyKVxcL3Y/KFtcXHdcXC5fXSspL2ksLyhtb3NhaWMpW1xcL1xcc10oW1xcd1xcLl0rKS9pXSxbYSx1XV0sR086W1svKD86KGFtZHx4KD86KD86ODZ8NjQpW18tXSk/fHdvd3x3aW4pNjQpWztcXCldL2ldLFtbXCJhcmNoaXRlY3R1cmVcIixcImFtZDY0XCJdXSxbLyhpYTMyKD89OykpL2ldLFtbXCJhcmNoaXRlY3R1cmVcIixkLndPXV0sWy8oKD86aVszNDZdfHgpODYpWztcXCldL2ldLFtbXCJhcmNoaXRlY3R1cmVcIixcImlhMzJcIl1dLFsvd2luZG93c1xccyhjZXxtb2JpbGUpO1xcc3BwYzsvaV0sW1tcImFyY2hpdGVjdHVyZVwiLFwiYXJtXCJdXSxbLygoPzpwcGN8cG93ZXJwYykoPzo2NCk/KSg/Olxcc21hY3w7fFxcKSkvaV0sW1tcImFyY2hpdGVjdHVyZVwiLC9vd2VyLyxcIlwiLGQud09dXSxbLyhzdW40XFx3KVs7XFwpXS9pXSxbW1wiYXJjaGl0ZWN0dXJlXCIsXCJzcGFyY1wiXV0sWy8oKD86YXZyMzJ8aWE2NCg/PTspKXw2OGsoPz1cXCkpfGFybSg/OjY0fCg/PXZcXGQrOykpfCg/PWF0bWVsXFxzKWF2cnwoPzppcml4fG1pcHN8c3BhcmMpKD86NjQpPyg/PTspfHBhLXJpc2MpL2ldLFtbXCJhcmNoaXRlY3R1cmVcIixkLndPXV1dLEFPOltbL1xcKChpcGFkfHBsYXlib29rKTtbXFx3XFxzXFwpOy1dKyhyaW18YXBwbGUpL2ldLFtvLGMsW2gscF1dLFsvYXBwbGVjb3JlbWVkaWFcXC9bXFx3XFwuXSsgXFwoKGlwYWQpL10sW28sW2MsXCJBcHBsZVwiXSxbaCxwXV0sWy8oYXBwbGVcXHN7MCwxfXR2KS9pXSxbW28sXCJBcHBsZSBUVlwiXSxbYyxcIkFwcGxlXCJdXSxbLyhhcmNob3MpXFxzKGdhbWVwYWQyPykvaSwvKGhwKS4rKHRvdWNocGFkKS9pLC8oaHApLisodGFibGV0KS9pLC8oa2luZGxlKVxcLyhbXFx3XFwuXSspL2ksL1xccyhub29rKVtcXHdcXHNdK2J1aWxkXFwvKFxcdyspL2ksLyhkZWxsKVxccyhzdHJlYVtrcHJcXHNcXGRdKltcXGRrb10pL2ldLFtjLG8sW2gscF1dLFsvKGtmW0Etel0rKVxcc2J1aWxkXFwvW1xcd1xcLl0rLipzaWxrXFwvL2ldLFtvLFtjLFwiQW1hem9uXCJdLFtoLHBdXSxbLyhzZHxrZilbMDM0OWhpam9yc3R1d10rXFxzYnVpbGRcXC9bXFx3XFwuXSsuKnNpbGtcXC8vaV0sW1tvLGYuc3RyLGcuQU8uT08uTk9dLFtjLFwiQW1hem9uXCJdLFtoLGxdXSxbL1xcKChpcFtob25lZHxcXHNcXHcqXSspOy4rKGFwcGxlKS9pXSxbbyxjLFtoLGxdXSxbL1xcKChpcFtob25lZHxcXHNcXHcqXSspOy9pXSxbbyxbYyxcIkFwcGxlXCJdLFtoLGxdXSxbLyhibGFja2JlcnJ5KVtcXHMtXT8oXFx3KykvaSwvKGJsYWNrYmVycnl8YmVucXxwYWxtKD89XFwtKXxzb255ZXJpY3Nzb258YWNlcnxhc3VzfGRlbGx8aHVhd2VpfG1laXp1fG1vdG9yb2xhfHBvbHl0cm9uKVtcXHNfLV0/KFtcXHctXSspKi9pLC8oaHApXFxzKFtcXHdcXHNdK1xcdykvaSwvKGFzdXMpLT8oXFx3KykvaV0sW2MsbyxbaCxsXV0sWy9cXChiYjEwO1xccyhcXHcrKS9pXSxbbyxbYyxcIkJsYWNrQmVycnlcIl0sW2gsbF1dLFsvYW5kcm9pZC4rKHRyYW5zZm9bcHJpbWVcXHNdezQsMTB9XFxzXFx3K3xlZWVwY3xzbGlkZXJcXHNcXHcrfG5leHVzIDd8cGFkZm9uZSkvaV0sW28sW2MsXCJBc3VzXCJdLFtoLHBdXSxbLyhzb255KVxccyh0YWJsZXRcXHNbcHNdKVxcc2J1aWxkXFwvL2ksLyhzb255KT8oPzpzZ3AuKylcXHNidWlsZFxcLy9pXSxbW2MsXCJTb255XCJdLFtvLFwiWHBlcmlhIFRhYmxldFwiXSxbaCxwXV0sWy8oPzpzb255KT8oPzooPzooPzpjfGQpXFxkezR9KXwoPzpzb1stbF0uKykpXFxzYnVpbGRcXC8vaV0sW1tjLFwiU29ueVwiXSxbbyxcIlhwZXJpYSBQaG9uZVwiXSxbaCxsXV0sWy9cXHMob3V5YSlcXHMvaSwvKG5pbnRlbmRvKVxccyhbd2lkczN1XSspL2ldLFtjLG8sW2gsXCJjb25zb2xlXCJdXSxbL2FuZHJvaWQuKztcXHMoc2hpZWxkKVxcc2J1aWxkL2ldLFtvLFtjLFwiTnZpZGlhXCJdLFtoLFwiY29uc29sZVwiXV0sWy8ocGxheXN0YXRpb25cXHNbMzRwb3J0YWJsZXZpXSspL2ldLFtvLFtjLFwiU29ueVwiXSxbaCxcImNvbnNvbGVcIl1dLFsvKHNwcmludFxccyhcXHcrKSkvaV0sW1tjLGYuc3RyLGcuQU8ua08udmVuZG9yXSxbbyxmLnN0cixnLkFPLmtPLk5PXSxbaCxsXV0sWy8obGVub3ZvKVxccz8oUyg/OjUwMDB8NjAwMCkrKD86Wy1dW1xcdytdKSkvaV0sW2MsbyxbaCxwXV0sWy8oaHRjKVs7X1xccy1dKyhbXFx3XFxzXSsoPz1cXCkpfFxcdyspKi9pLC8oenRlKS0oXFx3KykqL2ksLyhhbGNhdGVsfGdlZWtzcGhvbmV8aHVhd2VpfGxlbm92b3xuZXhpYW58cGFuYXNvbmljfCg/PTtcXHMpc29ueSlbX1xccy1dPyhbXFx3LV0rKSovaV0sW2MsW28sL18vZyxcIiBcIl0sW2gsbF1dLFsvKG5leHVzXFxzOSkvaV0sW28sW2MsXCJIVENcIl0sW2gscF1dLFsvKG5leHVzXFxzNnApL2ldLFtvLFtjLFwiSHVhd2VpXCJdLFtoLGxdXSxbLyhtaWNyb3NvZnQpO1xccyhsdW1pYVtcXHNcXHddKykvaV0sW2MsbyxbaCxsXV0sWy9bXFxzXFwoO10oeGJveCg/Olxcc29uZSk/KVtcXHNcXCk7XS9pXSxbbyxbYyxcIk1pY3Jvc29mdFwiXSxbaCxcImNvbnNvbGVcIl1dLFsvKGtpblxcLltvbmV0d117M30pL2ldLFtbbywvXFwuL2csXCIgXCJdLFtjLFwiTWljcm9zb2Z0XCJdLFtoLGxdXSxbL1xccyhtaWxlc3RvbmV8ZHJvaWQoPzpbMi00eF18XFxzKD86YmlvbmljfHgyfHByb3xyYXpyKSk/KDo/XFxzNGcpPylbXFx3XFxzXStidWlsZFxcLy9pLC9tb3RbXFxzLV0/KFxcdyspKi9pLC8oWFRcXGR7Myw0fSkgYnVpbGRcXC8vaSwvKG5leHVzXFxzNikvaV0sW28sW2MsXCJNb3Rvcm9sYVwiXSxbaCxsXV0sWy9hbmRyb2lkLitcXHMobXo2MFxcZHx4b29tW1xcczJdezAsMn0pXFxzYnVpbGRcXC8vaV0sW28sW2MsXCJNb3Rvcm9sYVwiXSxbaCxwXV0sWy9oYmJ0dlxcL1xcZCtcXC5cXGQrXFwuXFxkK1xccytcXChbXFx3XFxzXSo7XFxzKihcXHdbXjtdKik7KFteO10qKS9pXSxbW2MsZC50cmltXSxbbyxkLnRyaW1dLFtoLFwic21hcnR0dlwiXV0sWy9oYmJ0di4rbWFwbGU7KFxcZCspL2ldLFtbbywvXi8sXCJTbWFydFRWXCJdLFtjLFwiU2Ftc3VuZ1wiXSxbaCxcInNtYXJ0dHZcIl1dLFsvXFwoZHR2W1xcKTtdLisoYXF1b3MpL2ldLFtvLFtjLFwiU2hhcnBcIl0sW2gsXCJzbWFydHR2XCJdXSxbL2FuZHJvaWQuKygoc2NoLWlbODldMFxcZHxzaHctbTM4MHN8Z3QtcFxcZHs0fXxndC1uXFxkK3xzZ2gtdDhbNTZdOXxuZXh1cyAxMCkpL2ksLygoU00tVFxcdyspKS9pXSxbW2MsXCJTYW1zdW5nXCJdLG8sW2gscF1dLFsvc21hcnQtdHYuKyhzYW1zdW5nKS9pXSxbYyxbaCxcInNtYXJ0dHZcIl0sb10sWy8oKHNbY2dwXWgtXFx3K3xndC1cXHcrfGdhbGF4eVxcc25leHVzfHNtLVxcd1tcXHdcXGRdKykpL2ksLyhzYW1bc3VuZ10qKVtcXHMtXSooXFx3Ky0/W1xcdy1dKikqL2ksL3NlYy0oKHNnaFxcdyspKS9pXSxbW2MsXCJTYW1zdW5nXCJdLG8sW2gsbF1dLFsvc2llLShcXHcrKSovaV0sW28sW2MsXCJTaWVtZW5zXCJdLFtoLGxdXSxbLyhtYWVtb3xub2tpYSkuKihuOTAwfGx1bWlhXFxzXFxkKykvaSwvKG5va2lhKVtcXHNfLV0/KFtcXHctXSspKi9pXSxbW2MsXCJOb2tpYVwiXSxvLFtoLGxdXSxbL2FuZHJvaWRcXHMzXFwuW1xcc1xcdzstXXsxMH0oYVxcZHszfSkvaV0sW28sW2MsXCJBY2VyXCJdLFtoLHBdXSxbL2FuZHJvaWRcXHMzXFwuW1xcc1xcdzstXXsxMH0obGc/KS0oWzA2Y3Y5XXszLDR9KS9pXSxbW2MsXCJMR1wiXSxvLFtoLHBdXSxbLyhsZykgbmV0Y2FzdFxcLnR2L2ldLFtjLG8sW2gsXCJzbWFydHR2XCJdXSxbLyhuZXh1c1xcc1s0NV0pL2ksL2xnW2U7XFxzXFwvLV0rKFxcdyspKi9pXSxbbyxbYyxcIkxHXCJdLFtoLGxdXSxbL2FuZHJvaWQuKyhpZGVhdGFiW2EtejAtOVxcLVxcc10rKS9pXSxbbyxbYyxcIkxlbm92b1wiXSxbaCxwXV0sWy9saW51eDsuKygoam9sbGEpKTsvaV0sW2MsbyxbaCxsXV0sWy8oKHBlYmJsZSkpYXBwXFwvW1xcZFxcLl0rXFxzL2ldLFtjLG8sW2gsXCJ3ZWFyYWJsZVwiXV0sWy9hbmRyb2lkLis7XFxzKGdsYXNzKVxcc1xcZC9pXSxbbyxbYyxcIkdvb2dsZVwiXSxbaCxcIndlYXJhYmxlXCJdXSxbL2FuZHJvaWQuKyhcXHcrKVxccytidWlsZFxcL2htXFwxL2ksL2FuZHJvaWQuKyhobVtcXHNcXC1fXSpub3RlP1tcXHNfXSooPzpcXGRcXHcpPylcXHMrYnVpbGQvaSwvYW5kcm9pZC4rKG1pW1xcc1xcLV9dKig/Om9uZXxvbmVbXFxzX11wbHVzfG5vdGUgbHRlKT9bXFxzX10qKD86XFxkXFx3KT8pXFxzK2J1aWxkL2ldLFtbbywvXy9nLFwiIFwiXSxbYyxcIlhpYW9taVwiXSxbaCxsXV0sWy9hbmRyb2lkLithMDAwKDEpXFxzK2J1aWxkL2ldLFtvLFtjLFwiT25lUGx1c1wiXSxbaCxsXV0sWy9cXHModGFibGV0KVs7XFwvXS9pLC9cXHMobW9iaWxlKSg/Ols7XFwvXXxcXHNzYWZhcmkpL2ldLFtbaCxkLndPXSxjLG9dXSxlbmdpbmU6W1svd2luZG93cy4rXFxzZWRnZVxcLyhbXFx3XFwuXSspL2ldLFt1LFthLFwiRWRnZUhUTUxcIl1dLFsvKHByZXN0bylcXC8oW1xcd1xcLl0rKS9pLC8od2Via2l0fHRyaWRlbnR8bmV0ZnJvbnR8bmV0c3VyZnxhbWF5YXxseW54fHczbSlcXC8oW1xcd1xcLl0rKS9pLC8oa2h0bWx8dGFzbWFufGxpbmtzKVtcXC9cXHNdXFwoPyhbXFx3XFwuXSspL2ksLyhpY2FiKVtcXC9cXHNdKFsyM11cXC5bXFxkXFwuXSspL2ldLFthLHVdLFsvcnZcXDooW1xcd1xcLl0rKS4qKGdlY2tvKS9pXSxbdSxhXV0sb3M6W1svbWljcm9zb2Z0XFxzKHdpbmRvd3MpXFxzKHZpc3RhfHhwKS9pXSxbYSx1XSxbLyh3aW5kb3dzKVxcc250XFxzNlxcLjI7XFxzKGFybSkvaSwvKHdpbmRvd3NcXHNwaG9uZSg/Olxcc29zKSopW1xcc1xcL10/KFtcXGRcXC5cXHNdK1xcdykqL2ksLyh3aW5kb3dzXFxzbW9iaWxlfHdpbmRvd3MpW1xcc1xcL10/KFtudGNlXFxkXFwuXFxzXStcXHcpL2ldLFthLFt1LGYuc3RyLGcub3MuVU8udmVyc2lvbl1dLFsvKHdpbig/PTN8OXxuKXx3aW5cXHM5eFxccykoW250XFxkXFwuXSspL2ldLFtbYSxcIldpbmRvd3NcIl0sW3UsZi5zdHIsZy5vcy5VTy52ZXJzaW9uXV0sWy9cXCgoYmIpKDEwKTsvaV0sW1thLFwiQmxhY2tCZXJyeVwiXSx1XSxbLyhibGFja2JlcnJ5KVxcdypcXC8/KFtcXHdcXC5dKykqL2ksLyh0aXplbilbXFwvXFxzXShbXFx3XFwuXSspL2ksLyhhbmRyb2lkfHdlYm9zfHBhbG1cXHNvc3xxbnh8YmFkYXxyaW1cXHN0YWJsZXRcXHNvc3xtZWVnb3xjb250aWtpKVtcXC9cXHMtXT8oW1xcd1xcLl0rKSovaSwvbGludXg7Lisoc2FpbGZpc2gpOy9pXSxbYSx1XSxbLyhzeW1iaWFuXFxzP29zfHN5bWJvc3xzNjAoPz07KSlbXFwvXFxzLV0/KFtcXHdcXC5dKykqL2ldLFtbYSxcIlN5bWJpYW5cIl0sdV0sWy9cXCgoc2VyaWVzNDApOy9pXSxbYV0sWy9tb3ppbGxhLitcXChtb2JpbGU7LitnZWNrby4rZmlyZWZveC9pXSxbW2EsXCJGaXJlZm94IE9TXCJdLHVdLFsvKG5pbnRlbmRvfHBsYXlzdGF0aW9uKVxccyhbd2lkczM0cG9ydGFibGV2dV0rKS9pLC8obWludClbXFwvXFxzXFwoXT8oXFx3KykqL2ksLyhtYWdlaWF8dmVjdG9ybGludXgpWztcXHNdL2ksLyhqb2xpfFtreGxuXT91YnVudHV8ZGViaWFufFtvcGVuXSpzdXNlfGdlbnRvb3woPz1cXHMpYXJjaHxzbGFja3dhcmV8ZmVkb3JhfG1hbmRyaXZhfGNlbnRvc3xwY2xpbnV4b3N8cmVkaGF0fHplbndhbGt8bGlucHVzKVtcXC9cXHMtXT8oPyFjaHJvbSkoW1xcd1xcLi1dKykqL2ksLyhodXJkfGxpbnV4KVxccz8oW1xcd1xcLl0rKSovaSwvKGdudSlcXHM/KFtcXHdcXC5dKykqL2ldLFthLHVdLFsvKGNyb3MpXFxzW1xcd10rXFxzKFtcXHdcXC5dK1xcdykvaV0sW1thLFwiQ2hyb21pdW0gT1NcIl0sdV0sWy8oc3Vub3MpXFxzPyhbXFx3XFwuXStcXGQpKi9pXSxbW2EsXCJTb2xhcmlzXCJdLHVdLFsvXFxzKFtmcmVudG9wYy1dezAsNH1ic2R8ZHJhZ29uZmx5KVxccz8oW1xcd1xcLl0rKSovaV0sW2EsdV0sWy8oaGFpa3UpXFxzKFxcdyspL2ldLFthLHVdLFsvKGlwW2hvbmVhZF0rKSg/Oi4qb3NcXHMoW1xcd10rKSpcXHNsaWtlXFxzbWFjfDtcXHNvcGVyYSkvaV0sW1thLFwiaU9TXCJdLFt1LC9fL2csXCIuXCJdXSxbLyhtYWNcXHNvc1xcc3gpXFxzPyhbXFx3XFxzXFwuXStcXHcpKi9pLC8obWFjaW50b3NofG1hYyg/PV9wb3dlcnBjKVxccykvaV0sW1thLFwiTWFjIE9TXCJdLFt1LC9fL2csXCIuXCJdXSxbLygoPzpvcGVuKT9zb2xhcmlzKVtcXC9cXHMtXT8oW1xcd1xcLl0rKSovaSwvKGFpeClcXHMoKFxcZCkoPz1cXC58XFwpfFxccylbXFx3XFwuXSopKi9pLC8ocGxhblxcczl8bWluaXh8YmVvc3xvc1xcLzJ8YW1pZ2Fvc3xtb3JwaG9zfHJpc2NcXHNvc3xvcGVudm1zKS9pLC8odW5peClcXHM/KFtcXHdcXC5dKykqL2ldLFthLHVdXX0sdj1mdW5jdGlvbihlLHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHYpKXJldHVybiBuZXcgdihlLHQpLlZPKCk7dmFyIHI9ZXx8KG4mJm4ubmF2aWdhdG9yJiZuLm5hdmlnYXRvci51c2VyQWdlbnQ/bi5uYXZpZ2F0b3IudXNlckFnZW50OlwiXCIpLGk9dD9kLmV4dGVuZChFLHQpOkU7cmV0dXJuIHRoaXMuak89ZnVuY3Rpb24oKXt2YXIgZT1mLkNPLmFwcGx5KHRoaXMsaS5RdSk7cmV0dXJuIGUuYk89ZC5iTyhlLnZlcnNpb24pLGV9LHRoaXMuUU89ZnVuY3Rpb24oKXtyZXR1cm4gZi5DTy5hcHBseSh0aGlzLGkuR08pfSx0aGlzLktPPWZ1bmN0aW9uKCl7cmV0dXJuIGYuQ08uYXBwbHkodGhpcyxpLkFPKX0sdGhpcy5ZTz1mdW5jdGlvbigpe3JldHVybiBmLkNPLmFwcGx5KHRoaXMsaS5lbmdpbmUpfSx0aGlzLk9kPWZ1bmN0aW9uKCl7cmV0dXJuIGYuQ08uYXBwbHkodGhpcyxpLm9zKX0sdGhpcy5WTz1mdW5jdGlvbigpe3JldHVybntzeTp0aGlzLl9PKCksUXU6dGhpcy5qTygpLGVuZ2luZTp0aGlzLllPKCksb3M6dGhpcy5PZCgpLEFPOnRoaXMuS08oKSxHTzp0aGlzLlFPKCl9fSx0aGlzLl9PPWZ1bmN0aW9uKCl7cmV0dXJuIHJ9LHRoaXMuQWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHI9ZSx0aGlzfSx0aGlzfTt2LlZFUlNJT049XCIwLjcuMTJcIix2LldPPXt6TzphLEpPOlwibWFqb3JcIixWRVJTSU9OOnV9LHYuWE89e1pPOlwiYXJjaGl0ZWN0dXJlXCJ9LHYuJE89e2VOOm8sVkVORE9SOmMsdE46aCxyTjpcImNvbnNvbGVcIixpTjpsLG5OOlwic21hcnR0dlwiLHNOOnAsb046XCJ3ZWFyYWJsZVwiLGFOOlwiZW1iZWRkZWRcIn0sdi5oTj17ek86YSxWRVJTSU9OOnV9LHYuY049e3pPOmEsVkVSU0lPTjp1fSx2b2lkIDAhPT10Pyh2b2lkIDAhPT1lJiZlLmkmJih0PWUuaT12KSx0LlBwPXYpOnIoMTEwKT92b2lkIDAhPT0oaT1mdW5jdGlvbigpe3JldHVybiB2fS5jYWxsKHQscix0LGUpKSYmKGUuaT1pKTpuLlBwPXY7dmFyIHk9bi51Tnx8bi5sTjtpZih2b2lkIDAhPT15KXt2YXIgVD1uZXcgdjt5LnN5PVQuVk8oKSx5LnN5LmdldD1mdW5jdGlvbigpe3JldHVybiBULl9PKCl9LHkuc3kuc2V0PWZ1bmN0aW9uKGUpe1QuQWQoZSk7dmFyIHQ9VC5WTygpO2Zvcih2YXIgciBpbiB0KXkuc3lbcl09dFtyXX19fShcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNDEpLG49cigzKTshZnVuY3Rpb24oZSl7dmFyIHQ7IWZ1bmN0aW9uKGUpe2VbZS5vZmY9MF09XCJvZmZcIixlW2UuZXJyb3I9MV09XCJlcnJvclwiLGVbZS53YXJuPTJdPVwid2FyblwiLGVbZS5ub3RpY2U9M109XCJub3RpY2VcIixlW2UuaW5mbz00XT1cImluZm9cIixlW2UuZGVidWc9NV09XCJkZWJ1Z1wiLGVbZS50cmFjZT02XT1cInRyYWNlXCJ9KHQ9ZS5wTnx8KGUucE49e30pKTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLnRpbWVzdGFtcD1mdW5jdGlvbigpe30sdGhpcy5kTj1uZXcgbix0aGlzLmxldmVsPXQuZGVidWcsdGhpcy50aW1lc3RhbXAudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgRGF0ZTtyZXR1cm5cIltcIisoXCIwXCIrZS5nZXRVVENIb3VycygpKS5zbGljZSgtMikrXCI6XCIrKFwiMFwiK2UuZ2V0VVRDTWludXRlcygpKS5zbGljZSgtMikrXCI6XCIrKFwiMFwiK2UuZ2V0VVRDU2Vjb25kcygpKS5zbGljZSgtMikrXCI6XCIrKFwiMDBcIitlLmdldFVUQ01pbGxpc2Vjb25kcygpKS5zbGljZSgtMykrXCJdXCJ9LHRoaXMubG9nZ2VyPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlP3tsb2c6ZnVuY3Rpb24oKXt9fTpjb25zb2xlLHRoaXMubG9nZ2VyLnRyYWNlfHwodGhpcy5sb2dnZXIudHJhY2U9dGhpcy5sb2dnZXIubG9nKSx0aGlzLmxvZ2dlci5kZWJ1Z3x8KHRoaXMubG9nZ2VyLmRlYnVnPXRoaXMubG9nZ2VyLmxvZyksdGhpcy5sb2dnZXIuaW5mb3x8KHRoaXMubG9nZ2VyLmluZm89dGhpcy5sb2dnZXIubG9nKSx0aGlzLmxvZ2dlci53YXJufHwodGhpcy5sb2dnZXIud2Fybj10aGlzLmxvZ2dlci5sb2cpLHRoaXMubG9nZ2VyLmVycm9yfHwodGhpcy5sb2dnZXIuZXJyb3I9dGhpcy5sb2dnZXIubG9nKSx0aGlzLmZOKHRbdGhpcy5sZXZlbF0pfXJldHVybiBlLnByb3RvdHlwZS5mTj1mdW5jdGlvbihlLHIpe2kuSGl2ZUNvbmZpZy5GcmFtZXdvcmsuSGl2ZURlYnVnTGV2ZWwmJnZvaWQgMCE9dFtpLkhpdmVDb25maWcuRnJhbWV3b3JrLkhpdmVEZWJ1Z0xldmVsXT90aGlzLmxldmVsPXRbaS5IaXZlQ29uZmlnLkZyYW1ld29yay5IaXZlRGVidWdMZXZlbF06dm9pZCAwIT10W2VdP3RoaXMubGV2ZWw9dFtlXTpjb25zb2xlLmxvZyhcIldyb25nIGxvZ2dpbmcgbGV2ZWw6IFwiK2UsdCksdGhpcy5nTihyKX0sZS5wcm90b3R5cGUuZ049ZnVuY3Rpb24oZSl7dmFyIHI9e2xvZzp0aGlzLkVOKHRoaXMubG9nZ2VyLmxvZyx0LmVycm9yLGUpLGVycm9yOnRoaXMuRU4odGhpcy5sb2dnZXIuZXJyb3IsdC5lcnJvcixlKSx3YXJuOnRoaXMuRU4odGhpcy5sb2dnZXIud2Fybix0Lndhcm4sZSksbm90aWNlOnRoaXMuRU4odGhpcy5sb2dnZXIuaW5mbyx0Lm5vdGljZSxlKSxpbmZvOnRoaXMuRU4odGhpcy5sb2dnZXIuaW5mbyx0LmluZm8sZSksZGVidWc6dGhpcy5FTih0aGlzLmxvZ2dlci5kZWJ1Zyx0LmRlYnVnLGUpLHRyYWNlOnRoaXMuRU4odGhpcy5sb2dnZXIudHJhY2UsdC50cmFjZSxlKX07ZT90aGlzLmROLnNldChlLHIpOnRoaXMudk49cn0sZS5wcm90b3R5cGUuRU49ZnVuY3Rpb24oZSx0LHIpe2lmKCEodGhpcy5sZXZlbD49dCkpcmV0dXJuIGZ1bmN0aW9uKCl7fTt0cnl7cmV0dXJuIGkuSGl2ZUNvbmZpZy5GcmFtZXdvcmsuTG9nZ2VyVGltZXN0YW1wP3I/RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChlLGNvbnNvbGUsXCJTW1wiK3IrXCJdICVzXCIsdGhpcy50aW1lc3RhbXApOkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoZSxjb25zb2xlLFwiJXNcIix0aGlzLnRpbWVzdGFtcCk6cj9GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGUsY29uc29sZSxcIlNbXCIrcitcIl1cIik6RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChlLGNvbnNvbGUpfWNhdGNoKGUpe319LGUucHJvdG90eXBlLmxvZz1mdW5jdGlvbihlKXtyZXR1cm4gZT8odGhpcy5kTi5oYXMoZSl8fHRoaXMuZk4odFt0aGlzLmxldmVsXSxlKSx0aGlzLmROLmdldChlKSk6dGhpcy52Tn0sZX0oKTtlLnlOPXJ9KHQuVE58fCh0LlROPXt9KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDMwKSxuPXIoMjgpLHM9bi5zUixvPW4ub1IsYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLlNvdXJjZVVSTFBhcmFtcz17fSx0aGlzLnRlc3RJZD1udWxsfXJldHVybiBlLnByb3RvdHlwZS5tTj1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZihcIlNvdXJjZVVSTFBhcmFtc1wiPT09dClmb3IodmFyIHIgaW4gZVt0XSl0aGlzW3RdW3JdPWVbdF1bcl07ZWxzZSB0aGlzW3RdPWVbdF07dGhpcy5JTigpfSxlLnByb3RvdHlwZS5TTj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuQ29udGVudElkK3RoaXMuU2l0ZUlkK3RoaXMuQ1JPSWQrdGhpcy5Tb3VyY2VVUkwsdD1uZXcgczt0Lk52KFwiYjY2MTRjM2U0Y2QxZDE0ZWVkNmIzOWVmMmJmNmI5YTNlM2Q2ZGZjZDI2Njk5ZDcyNzBkODg3OTIzYmNiZjgzZWZiM2RhZGI3MTdjMGJhZmIxZDQ4ZGNlMzYxZWIzNjliN2NjNDZlNTc0MDVlYmZiZGQ4NmMzMTc1NTMyZmU1NmNjNzdmNDczZDM0NWIyY2I2ZmVhZmI1YWIwZTI0ZjM2NGEzZDI1OWYyN2U0YTJmZDk3NDY4MjY1YmRkZmQzZGRkM2FjNjQyNTFkYjY1MGNhMDI4MGFmMmIyYzQ1ZThiMWM4ZjA0MGYyYzQzM2FjMGExNTdkMmIzZmQ5MTUxNzI1M1wiLFwiMDEwMDAxXCIpO3ZhciByPW8odGhpcy5TaWduYXR1cmUpO3JldHVybiB0LlpTKGUscil9LGUucHJvdG90eXBlLlJOPWZ1bmN0aW9uKGUpe3RoaXMudGlja2V0VXJsPWU7dmFyIHQ9aS5wYXJzZShlKSxyPXQucGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMyk7aWYodGhpcy5TaXRlSWQ9clswXSx0aGlzLkNST0lkPXJbMV0sdGhpcy5Db250ZW50SWQ9clsyXSx0aGlzLndOPXJbM10sdC5xdWVyeSl0cnl7dmFyIG49dC5xdWVyeS5zcGxpdChcIiZcIik7Zm9yKHZhciBzIGluIG4pe3ZhciBvPW5bc10uc3BsaXQoLz0oLispLyk7dGhpcy5Tb3VyY2VVUkxQYXJhbXNbb1swXV09b1sxXX19Y2F0Y2goZSl7fXRoaXMuYk49ZS5pbmRleE9mKFwiYXBpLXRlc3RcIik+LTF9LGUucHJvdG90eXBlLnVwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuU2l0ZUlkfSxlLnByb3RvdHlwZS5jcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkNST0lkfSxlLnByb3RvdHlwZS5ocD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkNvbnRlbnRJZH0sZS5wcm90b3R5cGUuQ049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53Tn0sZS5wcm90b3R5cGUuX049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5Tb3VyY2VVUkx9LGUucHJvdG90eXBlLlBOPWZ1bmN0aW9uKCl7aWYodGhpcy5BTj10aGlzLlNvdXJjZVVSTCx2b2lkIDAhPXRoaXMuU291cmNlVVJMUGFyYW1zKXt2YXIgZT1uZXcgQXJyYXk7Zm9yKHZhciB0IGluIHRoaXMuU291cmNlVVJMUGFyYW1zKWUucHVzaCh0K1wiPVwiK3RoaXMuU291cmNlVVJMUGFyYW1zW3RdKTtlLmxlbmd0aD4wJiZ0aGlzLkFOJiYodGhpcy5BTis9KHRoaXMuQU4uaW5kZXhPZihcIj9cIik+MD9cIiZcIjpcIj9cIikrZS5qb2luKFwiJlwiKSl9fSxlLnByb3RvdHlwZS5JTj1mdW5jdGlvbigpe3ZhciBlPXIoNzgpO3RoaXMuc2Vzc2lvbklkPWUuT04oKX0sZS5wcm90b3R5cGUuTk49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5BTnx8dGhpcy5QTigpLHRoaXMuQU59LGUucHJvdG90eXBlLmtkPWZ1bmN0aW9uKCl7cmV0dXJuXCJbXCIrdGhpcy5TaXRlSWQrXCIvXCIrdGhpcy5DUk9JZCtcIi9cIit0aGlzLkNvbnRlbnRJZCtcIl1cIn0sZS5wcm90b3R5cGUuRE49ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5TaXRlSWQsdGhpcy5DUk9JZCx0aGlzLkNvbnRlbnRJZF19LGUucHJvdG90eXBlLmtOPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuU291cmNlVVJMK1wiLVtcIit0aGlzLlNpdGVJZCtcIi9cIit0aGlzLkNST0lkK1wiL1wiK3RoaXMuQ29udGVudElkK1wiXVwifSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmtkKCl9LGV9KCk7YS5MTj1cIl5odHRwcz86Ly9hcGkoPzotdGVzdCk/LmhpdmVzdHJlYW1pbmcuY29tL3YxL2V2ZW50cy8oPzp3aWxkY2FyZC8pP1wiLGEuTU49XCJDUk9JZFwiLGEuRk49XCJTaXRlSWRcIixhLlVOPVwiQ29udGVudElkXCIsdC5CTj1hfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO2kuSE49NTUsaS54Tj02ZTUsaS5xTj01LGkuR049NSxpLlZOPTUsaS5qTj0xMCxpLlFOPVwiZGlzdFwiLGkuS049XCIuL3NjZW5hcmlvcy9Ccm9rZW5VZHBcIixpLllOPW51bGwsaS5XTj1udWxsLGkuek49bnVsbCxpLkpOPSEwLGkuWE49ITAsaS5aTj02ZTQsdC4kTj1pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtuLmVEPVwiQndFbXVsYXRpb25cIix0LnREPW59LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUsdCxyLHMpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGkpKXJldHVybiBuZXcgaShlLHQscixzKTt0PXR8fE9iamVjdC5jcyxyPXJ8fE9iamVjdC5PYyxzPXN8fEZ1bmN0aW9uLnVzLHRoaXMubHM9dCx0aGlzLkFjPXIsdGhpcy5kcz1zLHRoaXMuZnM9bmV3IG4obnVsbCxmdW5jdGlvbihlLHIpe3JldHVybiB0KGUua2V5LHIua2V5KX0sZnVuY3Rpb24oZSx0KXtyZXR1cm4gcihlLmtleSx0LmtleSl9KSx0aGlzLmxlbmd0aD0wLHRoaXMuYWRkRWFjaChlKX12YXIgbj0ocigxMSkscigxMzkpKSxzPXIoMTIpLG89cig1MiksYT1yKDEzKTtlLmk9aSxpLnJEPWksT2JqZWN0LmFkZEVhY2goaS5wcm90b3R5cGUscy5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKGkucHJvdG90eXBlLG8ucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChpLnByb3RvdHlwZSxhLnByb3RvdHlwZSksaS5wcm90b3R5cGUuRXM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKGUsdGhpcy5scyx0aGlzLkFjLHRoaXMuZHMpfSxpLnByb3RvdHlwZS5sb2c9ZnVuY3Rpb24oZSx0LHIsaSl7dD10fHx0aGlzLnZzLHRoaXMuZnMubG9nKGUsZnVuY3Rpb24oZSxyLGkpe3QoZS52YWx1ZSxyLGkpfSxyLGkpfSxpLnByb3RvdHlwZS52cz1mdW5jdGlvbihlLHQpe3QoXCIga2V5OiBcIitlLmtleSksdChcIiB2YWx1ZTogXCIrZS52YWx1ZSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGksbj1yKDU5KSxzPXIoMyksbz1yKDI0KSxhPXIoMCksaD1yKDUpLGM9cig5KSx1PXIoMzEpLGw9cigxMCkscD1yKDEpLGQ9cigyKTshZnVuY3Rpb24oZSl7ZVtlLm1jPTBdPVwiUExBWUVSXCIsZVtlLmlEPTFdPVwiTEFOXCIsZVtlLm5EPTJdPVwiU0lURVwifShpPXQuc0R8fCh0LnNEPXt9KSk7dmFyIGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5vRD0hMSx0aGlzLmJfPW51bGwsdGhpcy5hRD0tMSx0aGlzLmhEPTB9cmV0dXJuIGV9KCk7dC5jRD1mO3ZhciBnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubG9nZ2VySWQ9XCJbUHJlZmV0Y2hlcl0gXCIsdGhpcy51RD0hMCx0aGlzLmxEPTAsdGhpcy5pc0FjdGl2ZT0hMCx0aGlzLnBEPW5ldyBzLHRoaXMuZEQ9bmV3IHN9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9YS5GcmFtZXdvcmsucmVzb2x2ZShhLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy5mRD1lLmdELHRoaXMuRUQ9ZS5FRCx0aGlzLnZEPWUudkQsdGhpcy5zQz1lLnNDLHRoaXMueUQ9ZS55RCx0aGlzLlREPWUuVEQsdGhpcy5tRD1lLm1ELHRoaXMuSUQ9ZS5JRH0sZS5wcm90b3R5cGUuU0Q9ZnVuY3Rpb24oKXt0aGlzLmlzQWN0aXZlPSEwfSxlLnByb3RvdHlwZS5SRD1mdW5jdGlvbihlLHQpe3RoaXMuY29udGV4dD1lLHRoaXMud0Q9dCx0aGlzLm1ELlJEKHQpfSxlLnByb3RvdHlwZS5iRD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kRC5oYXMoZSl9LGUucHJvdG90eXBlLkNEPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud0R9LGUucHJvdG90eXBlLl9EPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbz10aGlzO3RyeXt2YXIgYT1uZXcgbjt0aGlzLmRELmZvckVhY2goZnVuY3Rpb24oZSx0KXthLmFkZCh0KX0pO3ZhciBoPW5ldyBuO2lmKGguYWRkRWFjaChlLmtleXMoKSksdGhpcy53RC5QRCgpKXt2YXIgYz10aGlzLndELlBEKCkuYml0cmF0ZTtpZihoLmFkZChjKSxoLmZvckVhY2goZnVuY3Rpb24oZSl7YS5kZWxldGUoZSl9KSxyKXt2YXIgdT1bXTthLmZvckVhY2goZnVuY3Rpb24oZSl7by5kRC5oYXMoZSkmJm8uZEQuZ2V0KGUpLkFEPT1pLm5EJiYodS5wdXNoKGUpLGguYWRkKGUpKX0pLHUuZm9yRWFjaChmdW5jdGlvbihlKXthLmRlbGV0ZShlKX0pfXZhciBsPW5ldyBzO2guZm9yRWFjaChmdW5jdGlvbih0KXtvLmRELmhhcyh0KSYmby5kRC5nZXQodCkuQUQ9PWkubkQ/bC5zZXQodCxpLm5EKTpsLnNldCh0LGUuZ2V0KHQpKX0pLHRoaXMuT0QoYSksdGhpcy5ORChsLHQpfX1jYXRjaChlKXtwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgdXBkYXRpbmcgdGhlIHByZWZldGNoIHNlc3Npb25zXCIsdGhpcy5sb2dnZXJJZCxkLmhzLmpuLmtuLGUpfX0sZS5wcm90b3R5cGUuTkQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2UuZm9yRWFjaChmdW5jdGlvbihlLGkpezAhPWkmJnIuREQoaSxlLHQpfSl9LGUucHJvdG90eXBlLk9EPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QueUQua0QoZSksdC5sb2dnZXIuZGVidWcodC5sb2dnZXJJZCtcIlJlbW92ZSB1bndhbnRlZCBiaXRyYXRlIFwiK2UpLHQuZEQuZGVsZXRlKGUpfSl9LGUucHJvdG90eXBlLkREPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmRELmhhcyhlKT90aGlzLkxEKGUscik6dGhpcy5kRC5oYXMoZSl8fHRoaXMuTUQoZSx0LHIpfSxlLnByb3RvdHlwZS5MRD1mdW5jdGlvbihlLHQpe3RyeXt2YXIgcj10aGlzLmRELmdldChlKTtyLnR5cGU9dCxyLnR5cGUhPWkubkQmJihyLmFEPS0xKSx0aGlzLnlELkZEKGUscil9Y2F0Y2goZSl7cC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGNvbmZpZ3VyaW5nIGFscmVhZHkgZXhpc3RpbmcgcHJlZmV0Y2ggc2Vzc2lvbnNcIix0aGlzLmxvZ2dlcklkLGQuaHMuam4uTG4sZSl9fSxlLnByb3RvdHlwZS5NRD1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpczt0cnl7dmFyIHM9bmV3IGY7cy5iXz1udWxsLHMudHlwZT1yLHMuYml0cmF0ZT1lLHMuQUQ9dCx0aGlzLmRELnNldChlLHMpLHRoaXMuZEQuZm9yRWFjaChmdW5jdGlvbihlLHQpe24ubG9nZ2VyLmRlYnVnKG4ubG9nZ2VySWQrXCJBQlQgXCIrdCtcIiBTIFwiK2lbZS50eXBlXStcIiBQUkVGIFJFQVNPTiBcIitpW2UuQURdKX0pLHRoaXMueUQuRkQoZSxzKX1jYXRjaChlKXtwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY29uc3RydWN0aW5nIGEgbmV3IHByZWZldGNoIHNlc3Npb25cIix0aGlzLmxvZ2dlcklkLGQuaHMuam4uTW4sZSl9fSxlLnByb3RvdHlwZS5VRD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuZEQuaGFzKGUuZ2V0Qml0cmF0ZSgpKSl7dmFyIHI9dGhpcy5kRC5nZXQoZS5nZXRCaXRyYXRlKCkpO3IuYUQ+MCYmci5CRCYmKHIuYUQ9ZS5kdXJhdGlvbi0oYS5GcmFtZXdvcmsudGltZSgpLXIuQkQpLXIuaEQsci5oRD01MCksci5iXz1lLHRoaXMuSEQoZS5nZXRCaXRyYXRlKCkpLHRoaXMuZEQuZm9yRWFjaChmdW5jdGlvbihyLG4pe3ImJnIudHlwZSE9aS5tYyYmbiE9ZS5nZXRCaXRyYXRlKCkmJnQueEQocixuKX0pfWVsc2UgcC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJldHJpZXZpbmcgYSBmcmFnbWVudCB3aXRob3V0IGhhdmluZyBhIHByZWZldGNoIHNlc3Npb25cIix0aGlzLmxvZ2dlcklkLGQuaHMuam4uRm4pfSxlLnByb3RvdHlwZS5xRD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmRELmtleXMoKSxyPXQuaW5kZXhPZihlKTtyZXR1cm4tMSE9ciYmdC5zcGxpY2UociwxKSx0fSxlLnByb3RvdHlwZS5HRD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10LmRELmdldChlKTtyJiZyLnR5cGUhPWkubWMmJnQueEQocixyLmJpdHJhdGUpfSl9LGUucHJvdG90eXBlLnhEPWZ1bmN0aW9uKGUsdCl7aWYoZS50eXBlIT1pLm1jKXt2YXIgcj10aGlzLndELlBEKCk7aWYobnVsbCE9cil7dmFyIG49dGhpcy53RC5WRChyLkNfLHQsYy52Yy5mYyk7bnVsbD09bj8odGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIlBSRUZFVENISU5HIFwiK3QrXCIgTUlTU0lORyBNRVRBREFUQSBcIiksdGhpcy5vRCh0KSk6KGUuYl89bix0aGlzLkhEKG4uZ2V0Qml0cmF0ZSgpKSl9ZWxzZSB0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiUExBWUVSIE5PVCBQTEFZSU5HIFwiKSx0aGlzLm9EKHQpfX0sZS5wcm90b3R5cGUuakQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kRC5nZXQoZSk7dCYmdC5vRCYmKG51bGwhPXQuYl8/KHRoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJSRVNUQVJUIFBSRUZFVENISU5HIE9OIEFWQUlMQUJMRSBNRVRBREFUQVwiKSx0Lm9EPSExLHRoaXMuSEQodC5iaXRyYXRlKSk6KHQub0Q9ITEsdGhpcy54RCh0LGUpKSl9LGUucHJvdG90eXBlLlFEPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT90aGlzLmpEKGUpOnRoaXMuZEQuZm9yRWFjaChmdW5jdGlvbihlLHIpe3QuakQocil9KX0sZS5wcm90b3R5cGUuSEQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy53RC5QRCgpO2lmKHQpe3ZhciByPXRoaXMuZEQuZ2V0KGUpO2lmKHIpe2lmKHIuYl8mJnQuZ2V0Qml0cmF0ZSgpPT1lKXt2YXIgaT10aGlzLktEKHIuYl8uQV8oKSxlKTt0aGlzLnlELnNldERlbHRhKGkpfXRoaXMuWUQocil9fWVsc2UgcC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGF0dGVtcHRpbmcgcHJlZmV0Y2ggYmVmb3JlIGhhdmluZyBhIHBsYXllciByZXF1ZXN0XCIsdGhpcy5sb2dnZXJJZCxkLmhzLmpuLlVuKX0sZS5wcm90b3R5cGUuWUQ9ZnVuY3Rpb24oZSl7aWYoZS5iXyl7dmFyIHQ9dGhpcy5XRChlLmJfKTtpZihudWxsIT10KXRoaXMuekQodCxlKTtlbHNle3ZhciByPWUuYml0cmF0ZTt0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiUFJFRkVUQ0hJTkcgXCIrcitcIiBTVE9QUEVEIEJFQ0FVU0UgT0YgTUlTU0lORyBNRVRBREFUQSBcIiksdGhpcy5kRC5nZXQocikub0Q9ITAsdGhpcy5vRChyKX19ZWxzZSBlLm9EPSEwLHRoaXMub0QoZS5iaXRyYXRlKX0sZS5wcm90b3R5cGUuekQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dGhpcy5KRChlLlpmKCksZS5nZXRCaXRyYXRlKCksZS5BXygpLHQudHlwZSk7aWYobi5YRCl0cnl7dGhpcy5wRC5oYXMoZS5aZigpKSYmYS5GcmFtZXdvcmsuY2xlYXJUaW1lb3V0KHRoaXMucEQuZ2V0KGUuWmYoKSkpO3ZhciBzPW4udHlwZT09by5iZi5JZixjPTE7aWYocyl7dmFyIGw9TWF0aC5tYXgoMCx0LmFEKTtjPXRoaXMubUQuWkQodC50eXBlLGUuZ2V0Qml0cmF0ZSgpLGUuQV8oKSxsKX10aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiUFJFRkVUQ0hJTkcgXCIrZS51cmwrXCIgQ0ROIFBSRUZFVENIIFwiK3MrXCIgSU4gXCIrYytcIiBNU0VDU1wiKTt2YXIgZj10aGlzLmRELmdldChlLmdldEJpdHJhdGUoKSk7Zi5iXz1lO3ZhciBnPWEuRnJhbWV3b3JrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLnBELmRlbGV0ZShlLlpmKCkpO3ZhciBzPW5ldyB1LkhpdmVSZXF1ZXN0KHIuRUQuc2Vzc2lvbklkKTtzLnVybD1lLnVybCxmLkJEPWEuRnJhbWV3b3JrLnRpbWUoKSxyLmxEPTA7dmFyIGM9ci5FRC4kRChzLGUsci5jb250ZXh0LG4udHlwZSk7YyYmKGMuR2Y9dC50eXBlPT1pLm5EfHx0LnR5cGU9PWkuaUQscy5vbmVycm9yPXMub25sb2FkPWZ1bmN0aW9uKCl7aWYoYy5KZigpPT1vLmJmLklmJiYoIXMuc3RhdHVzfHxzLnN0YXR1czwyMDB8fHMuc3RhdHVzPjI5OSkpe3ZhciB0PXIuZEQuZ2V0KGUuZ2V0Qml0cmF0ZSgpKTtzPW51bGw7dmFyIGk9dC5iXy5kdXJhdGlvbixuPXQuYl8uZHVyYXRpb24raC5oaC5mYS5abyx1PU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoobi1pKSkraTt0LmFEPXUtKGEuRnJhbWV3b3JrLnRpbWUoKS10LkJEKSx0LmhEPTAsci5IRCh0LmJfLmJpdHJhdGUpfX0pfSxjKTt0aGlzLnBELnNldChlLlpmKCksZyl9Y2F0Y2goZSl7cC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJlcXVlc3RpbmcgZm9yIHByZWZldGNoXCIsdGhpcy5sb2dnZXJJZCxkLmhzLmpuLnhuLGUpfX0sZS5wcm90b3R5cGUuZWs9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucEQuZm9yRWFjaChmdW5jdGlvbih0LHIpe2UubG9nZ2VyLmRlYnVnKGUubG9nZ2VySWQrXCJDbGVhcmluZyBkZWxheWVkIHByZWZldGNoIHRpbWVyIGlkIFwiK3QpLGEuRnJhbWV3b3JrLmNsZWFyVGltZW91dCh0KSxlLnBELmRlbGV0ZShyKX0pLHRoaXMuaXNBY3RpdmU9ITF9LGUucHJvdG90eXBlLm9EPWZ1bmN0aW9uKGUpe3RoaXMuZEQuaGFzKGUpJiYodGhpcy5kRC5nZXQoZSkub0Q9ITAsdGhpcy53RC50ayhlKSl9LGUucHJvdG90eXBlLldEPWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD10aGlzLmRELmdldChlLmdldEJpdHJhdGUoKSkscj1lLGk9dGhpcy5yayhyKTtyZXR1cm4gaSYmaS5aZigpIT1lLlpmKCk/aTppJiZpLlpmKCk9PXQuYl8uWmYoKT9lOm51bGx9Y2F0Y2goZSl7cmV0dXJuIHAuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBmb3J3YXJkaW5nIHRvIG5leHQgc2VnbWVudFwiLHRoaXMubG9nZ2VySWQsZC5ocy5qbi5CbixlKSxudWxsfX0sZS5wcm90b3R5cGUucms9ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSlyZXR1cm4gbnVsbDt2YXIgdD10aGlzLnNDLmlrKCEwKSxyPWU7aWYodClmb3IoO251bGwhPXImJi0xIT10LmluZGV4T2Yoci5aZigpKTspaWYoIShyPXRoaXMud0QubmsocikpKXJldHVybiByO3JldHVybiByfSxlLnByb3RvdHlwZS5KRD1mdW5jdGlvbihlLHQscixuKXt0cnl7dmFyIHM9dGhpcy5zayhlKSxhPXM/by5iZi53ZjpvLmJmLklmLGg9ITE7aD1uIT1pLm1jPyF0aGlzLnBELmhhcyhlKXx8YSE9by5iZi5JZjphPT1vLmJmLndmO3ZhciBjPXRoaXMud0QuYWsoKSx1PXRoaXMuaGsocix0LGEpLGw9bj09aS5uRDtyZXR1cm4gdGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIlBSRUZFVENISU5HIFwiK28uYmZbYV0rXCIgKExBTiBMRUFERVI6IFwiK3RoaXMueUQuY2soKStcIiBTSVRFIExFQURFUjogXCIrbCtcIikgQ0hFQ0tTIEZPUiBcIitlK1wiIFtIQVZFUzpcIitzK1wiIE5PVEJVRkZFUklORzpcIitjK1wiIERJU1RBTkNFOlwiK3UudmFsaWQrXCIoXCIrdS51aytcIildXCIpLHtYRDpoJiZjJiZ1LnZhbGlkJiZ0aGlzLmlzQWN0aXZlLHR5cGU6YX19Y2F0Y2goZSl7cmV0dXJuIHAuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjaGVja2luZyBpZiBhbGxvd2VkIHRvIHByZWZldGNoXCIsdGhpcy5sb2dnZXJJZCxkLmhzLmpuLkhuLGUpLHtYRDohMSx0eXBlOm8uYmYuSWZ9fX0sZS5wcm90b3R5cGUuaGs9ZnVuY3Rpb24oZSx0LHIpe3RyeXt2YXIgaT10aGlzLndELmxrKGUsdCk7cmV0dXJuIGk8PXRoaXMud0QucGsoKT97dWs6aSx2YWxpZDohMH06e3VrOmksdmFsaWQ6ITF9fWNhdGNoKGUpe3JldHVybiBwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY2hlY2tpbmcgdGhlIHBsYXllciBkaXN0YW5jZVwiLHRoaXMubG9nZ2VySWQsZC5ocy5qbi5xbixlKSx7dWs6MCx2YWxpZDohMX19fSxlLnByb3RvdHlwZS5LRD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMud0QuUEQoKTtpZihudWxsIT1yKXt2YXIgaT1yLkFfKCk7cmV0dXJuIHRoaXMud0QuZGsoaSx0LGUsdCl9cmV0dXJuLTF9LGUucHJvdG90eXBlLnNrPWZ1bmN0aW9uKGUpe2lmKHRoaXMuZkQuY29udGFpbnMoZSkpe3ZhciB0PXRoaXMuZkQuZmsoZSk7aWYodC5sZW5ndGg+PWguaGguZmEudGEpe2lmKGguaGguZmEuaWEpe3ZhciByPVtdLGk9W10sbj1bXSxzPXRoaXMueUQuZ2soKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuRWsucGVlckluZm8udHlwZT09bC5UYy5XJiZyLnB1c2goZSk7dmFyIHQ9ZS5Fay5wZWVySW5mby5pbnRlcm5hbEFzOzAhPXMmJnQmJnM9PXQmJmkucHVzaChlKSxlLkVrLnBlZXJJbmZvLnR5cGU9PWwuVGMueWMmJm4ucHVzaChlKX0pLHIubGVuZ3RoPjA/IXRoaXMudUR8fCF0aGlzLnZrKHIsZSk6ISghdGhpcy55RC5jaygpJiZ0aGlzLnlELnlrKCl8fCEoaS5sZW5ndGg+MCkpfHwhKCEobi5sZW5ndGg+MCl8fCF0aGlzLnlELlRrKCkmJnRoaXMueUQubWsoKSl9cmV0dXJuITB9fXJldHVybiExfSxlLnByb3RvdHlwZS52az1mdW5jdGlvbihlLHQpe3RyeXtpZih0aGlzLnlELklrKCkubGVuZ3RoPmguaGguZmEubGEpe3RoaXMueUQuU2soKTtyZXR1cm4gZS5sZW5ndGg9PWguaGguZmEudWEmJmVbMF0uZ3VpZD09dGhpcy55RC5SaygpLnV1aWQmJihhLkZyYW1ld29yay5yYW5kb20oKT5oLmhoLmZhLnBhJiZ0aGlzLmxEPGguaGguZmEuZGEmJih0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNLSVAgUFJFRkVUQ0ggQ1lDTEUgXCIrdGhpcy5sRCtcIiBUTyBPRkZMT0FEIExFQURFUlwiKSx0aGlzLmxEKyssITApKX1yZXR1cm4hMX1jYXRjaChlKXtyZXR1cm4gcC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGRlY2lkaW5nIHRvIG9mZmxvYWQgdGhlIGxlYWRlclwiLHRoaXMubG9nZ2VySWQsZC5ocy5qbi5HbixlKSwhMX19LGUucHJvdG90eXBlLndrPWZ1bmN0aW9uKGUsdCl7dHJ5e2UuYms9ZS5LZi5pZCxlLktmPXQsdGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIlVQR1JBREUgXCIrby5iZltlLkpmKCldK1wiIFJFUSBcIitlLllmK1wiIEZPUiBcIitlLnpmLlpmKCkpLGUuSmYoKT09by5iZi53Zj8oZS5xZi5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdD1lLlFmLGUuVmY/KGUudHlwZT1vLmJmLlJmLHRoaXMudkQuQ2soZSl8fCh0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiU0VUIFJFUVVFU1QgVElNRUQtT1VUIFdBUyAwLiBDRE4gQ09NUEVOU0FUSU9OXCIpLHRoaXMudkQuX2soZS5QayxcIlRJTUVELU9VVFwiKSkpOihlLnR5cGU9by5iZi5UZix0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiVEhFIEhJVkUgUkVRIFwiK2UuWmYoKStcIiBBUlJJVkVEIEJFRk9SRSBUSEUgUDJQX1BSRUZFVENIIElOSVRJQUxJWkVELiBDSEFOR0UgUkVRVUVTVCBUWVBFIFRPIFwiK28uYmZbZS5KZigpXSkpKTplLkpmKCk9PW8uYmYuSWYmJihlLnR5cGU9by5iZi5UZil9Y2F0Y2goZSl7cC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHVwZ3JhZGluZyBwcmVmZXRjaFwiLHRoaXMubG9nZ2VySWQsZC5ocy5qbi5WbixlKX19LGV9KCk7dC5Baz1nfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlLHQscil7aWYoISh0aGlzIGluc3RhbmNlb2YgaSkpcmV0dXJuIG5ldyBpKGUsdCxyKTt2YXIgbj10aGlzLmhlYWQ9bmV3IHRoaXMuTm9kZTtuLm5leHQ9bixuLk9rPW4sdGhpcy5scz10fHxPYmplY3QuY3MsdGhpcy5kcz1yfHxGdW5jdGlvbi51cyx0aGlzLmxlbmd0aD0wLHRoaXMuYWRkRWFjaChlKX1mdW5jdGlvbiBuKGUpe3RoaXMuaGVhZD1lLHRoaXMuTms9ZS5uZXh0fWZ1bmN0aW9uIHMoZSl7dGhpcy52YWx1ZT1lLHRoaXMuT2s9bnVsbCx0aGlzLm5leHQ9bnVsbH1lLmk9aTt2YXIgbz0ocigxMSkscigxMikpLGE9cig2NyksaD1yKDEzKSxjPXIoMzgpO2kuRGs9aSxPYmplY3QuYWRkRWFjaChpLnByb3RvdHlwZSxvLnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goaS5wcm90b3R5cGUsYS5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKGkucHJvdG90eXBlLGgucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChpLnByb3RvdHlwZSxjLnByb3RvdHlwZSksaS5wcm90b3R5cGUuRXM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKGUsdGhpcy5scyx0aGlzLmRzKX0saS5wcm90b3R5cGUuZmluZD1mdW5jdGlvbihlLHQscil7dD10fHx0aGlzLmxzO2Zvcih2YXIgaT10aGlzLmhlYWQsbj10aGlzLmtrKHIsaS5uZXh0KTtuIT09aTspe2lmKHQobi52YWx1ZSxlKSlyZXR1cm4gbjtuPW4ubmV4dH19LGkucHJvdG90eXBlLkxrPWZ1bmN0aW9uKGUsdCxyKXt0PXR8fHRoaXMubHM7Zm9yKHZhciBpPXRoaXMuaGVhZCxuPXRoaXMua2socixpLk9rKTtuIT09aTspe2lmKHQobi52YWx1ZSxlKSlyZXR1cm4gbjtuPW4uT2t9fSxpLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIXRoaXMuZmluZChlLHQpfSxpLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmZpbmQoZSx0KTtyZXR1cm4gcj9yLnZhbHVlOnRoaXMuZHMoZSl9LGkucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuTGsoZSx0KTtpZihyKXtpZih0aGlzLk1rKXt2YXIgaT1bXSxuPVtlXTt0aGlzLlFBKGksbixyLmluZGV4KX1yZXR1cm4gci5kZWxldGUoKSx0aGlzLmxlbmd0aC0tLHRoaXMuTWsmJih0aGlzLkZrKHIubmV4dCxyLmluZGV4KSx0aGlzLkdBKGksbixyLmluZGV4KSksITB9cmV0dXJuITF9LGkucHJvdG90eXBlLlhBPWZ1bmN0aW9uKGUsdCl7dD10fHx0aGlzLmxzO2Zvcih2YXIgcj10aGlzLmhlYWQsaT1yLm5leHQsbj0wO2khPT1yOyl0KGUsaS52YWx1ZSkmJihpLmRlbGV0ZSgpLG4rKyksaT1pLm5leHQ7cmV0dXJuIHRoaXMubGVuZ3RoLT1uLG59LGkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIGUsdDt0aGlzLk1rJiYodD10aGlzLnRvQXJyYXkoKSxlPVtdLHRoaXMuUUEoZSx0LDApKSx0aGlzLmhlYWQubmV4dD10aGlzLmhlYWQuT2s9dGhpcy5oZWFkLHRoaXMubGVuZ3RoPTAsdGhpcy5NayYmdGhpcy5HQShlLHQsMCl9LGkucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt2YXIgdD1uZXcgdGhpcy5Ob2RlKGUpO3JldHVybiB0aGlzLk1rJiYodC5pbmRleD10aGlzLmxlbmd0aCx0aGlzLlFBKFtlXSxbXSx0LmluZGV4KSksdGhpcy5oZWFkLlVrKHQpLHRoaXMubGVuZ3RoKyssdGhpcy5NayYmdGhpcy5HQShbZV0sW10sdC5pbmRleCksITB9LGkucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhlYWQ7aWYodGhpcy5Nayl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxyPVtdLGk9dGhpcy5sZW5ndGg7dGhpcy5RQSh0LHIsaSk7dmFyIG49dGhpcy5oZWFkLk9rfWZvcih2YXIgcz0wO3M8YXJndW1lbnRzLmxlbmd0aDtzKyspe3ZhciBvPWFyZ3VtZW50c1tzXSxhPW5ldyB0aGlzLk5vZGUobyk7ZS5VayhhKX10aGlzLmxlbmd0aCs9YXJndW1lbnRzLmxlbmd0aCx0aGlzLk1rJiYodGhpcy5GayhuLm5leHQsdm9pZCAwPT09bi5pbmRleD8wOm4uaW5kZXgrMSksdGhpcy5HQSh0LHIsaSkpfSxpLnByb3RvdHlwZS51bnNoaWZ0PWZ1bmN0aW9uKCl7aWYodGhpcy5Nayl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0PVtdO3RoaXMuUUEoZSx0LDApfWZvcih2YXIgcj10aGlzLmhlYWQsaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBuPWFyZ3VtZW50c1tpXSxzPW5ldyB0aGlzLk5vZGUobik7ci5CayhzKSxyPXN9dGhpcy5sZW5ndGgrPWFyZ3VtZW50cy5sZW5ndGgsdGhpcy5NayYmKHRoaXMuRmsodGhpcy5oZWFkLm5leHQsMCksdGhpcy5HQShlLHQsMCkpfSxpLnByb3RvdHlwZS5wb3A9ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuaGVhZDtpZih0Lk9rIT09dCl7aWYoZT10Lk9rLnZhbHVlLHRoaXMuTWspe3ZhciByPVtdLGk9W2VdLG49dGhpcy5sZW5ndGgtMTt0aGlzLlFBKHIsaSxuKX10Lk9rLmRlbGV0ZSgpLHRoaXMubGVuZ3RoLS0sdGhpcy5NayYmdGhpcy5HQShyLGksbil9cmV0dXJuIGV9LGkucHJvdG90eXBlLnNoaWZ0PWZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmhlYWQ7aWYodC5PayE9PXQpe2lmKGU9dC5uZXh0LnZhbHVlLHRoaXMuTWspe3ZhciByPVtdLGk9W2VdO3RoaXMuUUEocixpLDApfXQubmV4dC5kZWxldGUoKSx0aGlzLmxlbmd0aC0tLHRoaXMuTWsmJih0aGlzLkZrKHRoaXMuaGVhZC5uZXh0LDApLHRoaXMuR0EocixpLDApKX1yZXR1cm4gZX0saS5wcm90b3R5cGUuSGs9ZnVuY3Rpb24oKXtpZih0aGlzLmhlYWQhPT10aGlzLmhlYWQubmV4dClyZXR1cm4gdGhpcy5oZWFkLm5leHQudmFsdWV9LGkucHJvdG90eXBlLnhrPWZ1bmN0aW9uKGUpe3RoaXMuaGVhZCE9PXRoaXMuaGVhZC5uZXh0P3RoaXMuaGVhZC5uZXh0LnZhbHVlPWU6dGhpcy5wdXNoKGUpfSxpLnByb3RvdHlwZS5CYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkhrKCl9LGkucHJvdG90eXBlLmtrPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5oZWFkO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXt2YXIgaT1lO2lmKGk+PTApZm9yKGU9ci5uZXh0O2kmJihpLS0sKGU9ZS5uZXh0KSE9cik7KTtlbHNlIGZvcihlPXI7aTwwJiYoaSsrLChlPWUuT2spIT1yKTspO3JldHVybiBlfXJldHVybiBlfHx0fSxpLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbihlLHQpe3ZhciByPVtdLGk9dGhpcy5oZWFkO2ZvcihlPXRoaXMua2soZSxpLm5leHQpLHQ9dGhpcy5rayh0LGkpO2UhPT10JiZlIT09aTspci5wdXNoKGUudmFsdWUpLGU9ZS5uZXh0O3JldHVybiByfSxpLnByb3RvdHlwZS5zcGxpY2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5xayhlLHQsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpKX0saS5wcm90b3R5cGUucWs9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPWU7ZT10aGlzLmtrKGUsdGhpcy5oZWFkKSxudWxsPT10JiYodD0xLzApLHI9QXJyYXkuZnJvbShyKTtmb3IodmFyIG49W10scz1lO3QtLSYmdD49MCYmcyE9PXRoaXMuaGVhZDspbi5wdXNoKHMudmFsdWUpLHM9cy5uZXh0O3ZhciBvLGE7dGhpcy5NayYmKG89ZT09PXRoaXMuaGVhZD90aGlzLmxlbmd0aDplLk9rPT09dGhpcy5oZWFkPzA6ZS5pbmRleCxhPWUuT2ssdGhpcy5RQShyLG4sbykpO2Zvcih2YXIgcz1lLGg9MCxzPWU7aDxuLmxlbmd0aDtoKysscz1zLm5leHQpcy5kZWxldGUoKTtudWxsPT1pJiZzPT09dGhpcy5oZWFkJiYocz10aGlzLmhlYWQubmV4dCk7Zm9yKHZhciBoPTA7aDxyLmxlbmd0aDtoKyspe3ZhciBjPW5ldyB0aGlzLk5vZGUocltoXSk7cy5VayhjKX1yZXR1cm4gdGhpcy5sZW5ndGgrPXIubGVuZ3RoLW4ubGVuZ3RoLHRoaXMuTWsmJihlPT09dGhpcy5oZWFkP3RoaXMuRmsodGhpcy5oZWFkLm5leHQsMCk6dGhpcy5GayhhLm5leHQsYS5pbmRleCsxKSx0aGlzLkdBKHIsbixvKSksbn0saS5wcm90b3R5cGUucmV2ZXJzZT1mdW5jdGlvbigpe2lmKHRoaXMuTWspe3ZhciBlPXRoaXMudG9BcnJheSgpLHQ9ZS5yZXZlcnNlZCgpO3RoaXMuUUEodCxlLDApfXZhciByPXRoaXMuaGVhZDtkb3t2YXIgaT1yLm5leHQ7ci5uZXh0PXIuT2ssci5Paz1pLHI9ci5uZXh0fXdoaWxlKHIhPT10aGlzLmhlYWQpO3JldHVybiB0aGlzLk1rJiZ0aGlzLkdBKHQsZSwwKSx0aGlzfSxpLnByb3RvdHlwZS5zb3J0PWZ1bmN0aW9uKCl7dGhpcy5xaygwLHRoaXMubGVuZ3RoLHRoaXMuRmMoKSl9LGkucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1hcmd1bWVudHNbMl0saT10aGlzLmhlYWQsbj1pLm5leHQ7biE9PWk7KXQ9ZS5jYWxsKHIsdCxuLnZhbHVlLG4sdGhpcyksbj1uLm5leHQ7cmV0dXJuIHR9LGkucHJvdG90eXBlLnJlZHVjZVJpZ2h0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWFyZ3VtZW50c1syXSxpPXRoaXMuaGVhZCxuPWkuT2s7biE9PWk7KXQ9ZS5jYWxsKHIsdCxuLnZhbHVlLG4sdGhpcyksbj1uLk9rO3JldHVybiB0fSxpLnByb3RvdHlwZS5Gaz1mdW5jdGlvbihlLHQpe2Zvcig7ZSE9PXRoaXMuaGVhZDspZS5pbmRleD10KyssZT1lLm5leHR9LGkucHJvdG90eXBlLlhjPWZ1bmN0aW9uKCl7dGhpcy5oZWFkLmluZGV4PS0xLHRoaXMuRmsodGhpcy5oZWFkLm5leHQsMCksdGhpcy5Naz0hMH0saS5wcm90b3R5cGUuSGM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcy5oZWFkKX0sbi5wcm90b3R5cGUuR2s9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJfaXRlcmF0aW9uT2JqZWN0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLkdrfHwodGhpcy5Haz17ZG9uZTohMSx2YWx1ZTpudWxsfSl9fSksbi5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMuTms9PT10aGlzLmhlYWQpdGhpcy5Way5kb25lPSEwLHRoaXMuVmsudmFsdWU9dm9pZCAwO2Vsc2V7dmFyIGU9dGhpcy5Oay52YWx1ZTt0aGlzLk5rPXRoaXMuTmsubmV4dCx0aGlzLlZrLnZhbHVlPWV9cmV0dXJuIHRoaXMuVmt9LGkucHJvdG90eXBlLk5vZGU9cyxzLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oKXt0aGlzLk9rLm5leHQ9dGhpcy5uZXh0LHRoaXMubmV4dC5Paz10aGlzLk9rfSxzLnByb3RvdHlwZS5Vaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLk9rO3RoaXMuT2s9ZSxlLk9rPXQsdC5uZXh0PWUsZS5uZXh0PXRoaXN9LHMucHJvdG90eXBlLkJrPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubmV4dDt0aGlzLm5leHQ9ZSxlLm5leHQ9dCx0Lk9rPWUsZS5Paz10aGlzfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBpKSlyZXR1cm4gbmV3IGkoZSx0KTt0PXR8fEZ1bmN0aW9uLnVzLHRoaXMuZHM9dCx0aGlzLmZzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5sZW5ndGg9MCx0aGlzLmFkZEVhY2goZSl9dmFyIG49KHIoMTEpLHIoMTIpKSxzPXIoNTIpLG89cigxMyk7ZS5pPWksaS5qaz1pLE9iamVjdC5hZGRFYWNoKGkucHJvdG90eXBlLG4ucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChpLnByb3RvdHlwZSxzLnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goaS5wcm90b3R5cGUsby5wcm90b3R5cGUpLGkucHJvdG90eXBlLkVzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcihlLHRoaXMuZHMpfSxpLnByb3RvdHlwZS5Raz1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwia2V5IG11c3QgYmUgYSBzdHJpbmcgYnV0IEdvdCBcIitlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiJF9fcHJvdG9fX1wiLHtBaDohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcIl9oYXNQcm90b1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eShcIiRfX3Byb3RvX19cIikmJnZvaWQgMCE9PXRoaXMuS2t9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiX3Byb3RvVmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWWt9LHNldDpmdW5jdGlvbihlKXt0aGlzLllrPWV9fSksaS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuUWsoZSksXCJfX3Byb3RvX19cIj09PWU/dGhpcy5Xaz90aGlzLktrOmFyZ3VtZW50cy5sZW5ndGg+MT90OnRoaXMuZHMoZSk6ZSBpbiB0aGlzLmZzP3RoaXMuZnNbZV06YXJndW1lbnRzLmxlbmd0aD4xP3Q6dGhpcy5kcyhlKX0saS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dGhpcy5RayhlKTt2YXIgcj1cIl9fcHJvdG9fX1wiPT09ZTtyZXR1cm4ocj90aGlzLldrOmUgaW4gdGhpcy5mcyk/KHRoaXMuemsmJnRoaXMuSmsoZSxyP3RoaXMuS2s6dGhpcy5mc1tlXSkscj90aGlzLktrPXQ6dGhpcy5mc1tlXT10LHRoaXMuemsmJnRoaXMuWGsoZSx0KSwhMSk6KHRoaXMuemsmJnRoaXMuSmsoZSx2b2lkIDApLHRoaXMubGVuZ3RoKysscj90aGlzLktrPXQ6dGhpcy5mc1tlXT10LHRoaXMuemsmJnRoaXMuWGsoZSx0KSwhMCl9LGkucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5RayhlKSxcIl9fcHJvdG9fX1wiPT09ZT90aGlzLldrOmUgaW4gdGhpcy5mc30saS5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLlFrKGUpLFwiX19wcm90b19fXCI9PT1lPyEhdGhpcy5XayYmKHRoaXMuemsmJnRoaXMuSmsoZSx0aGlzLktrKSx0aGlzLktrPXZvaWQgMCx0aGlzLmxlbmd0aC0tLHRoaXMuemsmJnRoaXMuWGsoZSx2b2lkIDApLCEwKTplIGluIHRoaXMuZnMmJih0aGlzLnprJiZ0aGlzLkprKGUsdGhpcy5mc1tlXSksZGVsZXRlIHRoaXMuZnNbZV0sdGhpcy5sZW5ndGgtLSx0aGlzLnprJiZ0aGlzLlhrKGUsdm9pZCAwKSwhMCl9LGkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5XayYmKHRoaXMuemsmJnRoaXMuSmsoXCJfX3Byb3RvX19cIix0aGlzLktrKSx0aGlzLktrPXZvaWQgMCx0aGlzLnprJiZ0aGlzLlhrKFwiX19wcm90b19fXCIsdm9pZCAwKSk7Zm9yKGUgaW4gdGhpcy5mcyl0aGlzLnprJiZ0aGlzLkprKGUsdGhpcy5mc1tlXSksZGVsZXRlIHRoaXMuZnNbZV0sdGhpcy56ayYmdGhpcy5YayhlLHZvaWQgMCk7dGhpcy5sZW5ndGg9MH0saS5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLldrJiYodD1lLmNhbGwocix0LFwiJF9fcHJvdG9fX1wiLFwiX19wcm90b19fXCIsdGhpcykpO3ZhciBpPXRoaXMuZnM7Zm9yKHZhciBuIGluIHRoaXMuZnMpdD1lLmNhbGwocix0LGlbbl0sbix0aGlzKTtyZXR1cm4gdH0saS5wcm90b3R5cGUucmVkdWNlUmlnaHQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMsbj10aGlzLmZzO3JldHVybiB0PU9iamVjdC5rZXlzKHRoaXMuZnMpLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uKHQscyl7cmV0dXJuIGUuY2FsbChyLHQsbltzXSxzLGkpfSx0KSx0aGlzLldrP2UuY2FsbChyLHQsdGhpcy5LayxcIl9fcHJvdG9fX1wiLGkpOnR9LGkucHJvdG90eXBlLkJjPWZ1bmN0aW9uKCl7dmFyIGU7Zm9yKGUgaW4gdGhpcy5mcylyZXR1cm4gdGhpcy5mc1tlXTtyZXR1cm4gdGhpcy5La30saS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuUGMoKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKCl7dGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY29uc3RydWN0LiBHZW5lcmljTWFwIGlzIGEgbWl4aW4uXCIpfWZ1bmN0aW9uIG4oZSx0KXt0aGlzLmtleT1lLHRoaXMudmFsdWU9dH12YXIgcz1yKDM2KSxvPXIoMTAxKSxhPXIoMTMpO2UuaT1pLHMuYWRkRWFjaChpLnByb3RvdHlwZSxvLnByb3RvdHlwZSkscy5hZGRFYWNoKGkucHJvdG90eXBlLGEucHJvdG90eXBlKSxpLnByb3RvdHlwZS5pc01hcD0hMCxpLnByb3RvdHlwZS5hZGRFYWNoPWZ1bmN0aW9uKGUpe2lmKGUmJnMoZSk9PT1lKWlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUuZm9yRWFjaCkhMD09PWUuaXNNYXA/ZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dGhpcy5zZXQodCxlKX0sdGhpcyk6ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RoaXMuc2V0KGVbMF0sZVsxXSl9LHRoaXMpO2Vsc2UgaWYoXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKWZvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXRoaXMuYWRkKGVbdF0sdCk7ZWxzZSBzLmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXt0aGlzLnNldCh0LGVbdF0pfSx0aGlzKTtlbHNlIGlmKGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aClmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl0aGlzLmFkZChlW3RdLHQpO3JldHVybiB0aGlzfSxpLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmZzLmdldChuZXcgdGhpcy5aayhlKSk7cmV0dXJuIHI/ci52YWx1ZTphcmd1bWVudHMubGVuZ3RoPjE/dDp0aGlzLmRzKGUpfSxpLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgdGhpcy5aayhlLHQpLGk9dGhpcy5mcy5nZXQociksbj0hMTtyZXR1cm4gaT8odGhpcy56ayYmdGhpcy5KayhlLGkudmFsdWUpLGkudmFsdWU9dCx0aGlzLnprJiZ0aGlzLlhrKGUsdCkpOih0aGlzLnprJiZ0aGlzLkprKGUsdm9pZCAwKSx0aGlzLmZzLmFkZChyKSYmKHRoaXMubGVuZ3RoKyssbj0hMCksdGhpcy56ayYmdGhpcy5YayhlLHQpKSxufSxpLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zZXQodCxlKX0saS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmZzLmhhcyhuZXcgdGhpcy5aayhlKSl9LGkucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgdGhpcy5aayhlKTtpZih0aGlzLmZzLmhhcyh0KSl7dmFyIHI9dGhpcy5mcy5nZXQodCkudmFsdWU7cmV0dXJuIHRoaXMuemsmJnRoaXMuSmsoZSxyKSx0aGlzLmZzLmRlbGV0ZSh0KSx0aGlzLmxlbmd0aC0tLHRoaXMuemsmJnRoaXMuWGsoZSx2b2lkIDApLCEwfXJldHVybiExfSxpLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3ZhciBlO3RoaXMuemsmJih0aGlzLmZvckVhY2goZnVuY3Rpb24oZSx0KXt0aGlzLkprKHQsZSl9LHRoaXMpLGU9dGhpcy5rZXlzKCkpLHRoaXMuZnMuY2xlYXIoKSx0aGlzLmxlbmd0aD0wLHRoaXMuemsmJmUuZm9yRWFjaChmdW5jdGlvbihlKXt0aGlzLlhrKGUpfSx0aGlzKX0saS5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy5mcy5yZWR1Y2UoZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5jYWxsKHIsdCxpLnZhbHVlLGkua2V5LHRoaXMpfSx0LHRoaXMpfSxpLnByb3RvdHlwZS5yZWR1Y2VSaWdodD1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMuZnMucmVkdWNlUmlnaHQoZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5jYWxsKHIsdCxpLnZhbHVlLGkua2V5LHRoaXMpfSx0LHRoaXMpfSxpLnByb3RvdHlwZS5rZXlzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9KX0saS5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKEZ1bmN0aW9uLmlkZW50aXR5KX0saS5wcm90b3R5cGUuZW50cmllcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbihlLHQpe3JldHVyblt0LGVdfSl9LGkucHJvdG90eXBlLiRrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfSxpLnByb3RvdHlwZS5jcz1mdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fHMuY3MsdGhpcz09PWV8fChlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmV2ZXJ5P2UubGVuZ3RoPT09dGhpcy5sZW5ndGgmJmUuZXZlcnkoZnVuY3Rpb24oZSxyKXtyZXR1cm4gdCh0aGlzLmdldChyKSxlKX0sdGhpcyk6cy5rZXlzKGUpLmxlbmd0aD09PXRoaXMubGVuZ3RoJiZzLmtleXMoZSkuZXZlcnkoZnVuY3Rpb24ocil7cmV0dXJuIHQodGhpcy5nZXQociksZVtyXSl9LHRoaXMpKX0saS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfSxpLnByb3RvdHlwZS5aaz1uLG4ucHJvdG90eXBlLmNzPWZ1bmN0aW9uKGUpe3JldHVybiBzLmNzKHRoaXMua2V5LGUua2V5KSYmcy5jcyh0aGlzLnZhbHVlLGUudmFsdWUpfSxuLnByb3RvdHlwZS5PYz1mdW5jdGlvbihlKXtyZXR1cm4gcy5PYyh0aGlzLmtleSxlLmtleSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDcwKSxzPXIoMjEpLG89cig3MSksYT1yKDcpLGg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIGkodCxlKSx0Lm1lPWZ1bmN0aW9uKGUpe3QubG9nZ2VyPWV9LHQucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oKXtpZih0LmxvZ2dlciYmdC5sb2dnZXIuZGVidWcodGhpcy5tZXRob2QrXCIgXCIrdGhpcy51cmwpLCF0aGlzLnNlc3Npb25JZCl7dmFyIGU9T2JqZWN0LmtleXModC51Yik7ZS5sZW5ndGg+MCYmKHRoaXMuc2Vzc2lvbklkPXQudWJbZVswXV0pfXZhciByPXRoaXMsaT1uZXcgWE1MSHR0cFJlcXVlc3Q7MD09PXRoaXMudXJsLmluZGV4T2YoXCIvL1wiKSYmKHRoaXMudXJsPWxvY2F0aW9uLnByb3RvY29sK3RoaXMudXJsKTt2YXIgbz1zLklwKG4udEwuZUwsbi50TC5kTyxuLnRMLnJMLHRoaXMuc2Vzc2lvbklkLGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnVybCkpO2kub3BlbihcIkdFVFwiLG8pLHRoaXMucmVzcG9uc2VUeXBlJiYoaS5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVR5cGUpLGkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7fSxpLm9ubG9hZD1mdW5jdGlvbigpe2lmKDQ9PT1pLnJlYWR5U3RhdGUpdHJ5e3IucmVzcG9uc2VIZWFkZXJzPWkuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksci5yZXNwb25zZT1pLnJlc3BvbnNlO3ZhciBlPWkucmVzcG9uc2UuYnl0ZUxlbmd0aDtcImFycmF5YnVmZmVyXCIhPT1pLnJlc3BvbnNlVHlwZSYmKHIucmVzcG9uc2VUZXh0PWkucmVzcG9uc2UpLHIucmVhZHlTdGF0ZT00LHIuc3RhdHVzPWkuc3RhdHVzLHIuZGlzcGF0Y2hFdmVudChhLnJjLmNyZWF0ZUV2ZW50KFByb2dyZXNzRXZlbnQsXCJwcm9ncmVzc1wiLHtsZW5ndGhDb21wdXRhYmxlOiEwLGxvYWRlZDplLHRvdGFsOmUsY3VycmVudFRhcmdldDpyfSkpLHIuZGlzcGF0Y2hFdmVudChhLnJjLmNyZWF0ZUV2ZW50KEV2ZW50LFwicmVhZHlzdGF0ZWNoYW5nZVwiLHtjdXJyZW50VGFyZ2V0OnIsYnViYmxlczohMSxjYW5jZWxhYmxlOiExfSkpLHIuZGlzcGF0Y2hFdmVudChhLnJjLmNyZWF0ZUV2ZW50KFByb2dyZXNzRXZlbnQsXCJsb2FkXCIse2N1cnJlbnRUYXJnZXQ6cixidWJibGVzOiExLGNhbmNlbGFibGU6ITEsbGVuZ3RoQ29tcHV0YWJsZTohMSxsb2FkZWQ6ZSx0b3RhbDowfSkpLHIuZGlzcGF0Y2hFdmVudChhLnJjLmNyZWF0ZUV2ZW50KFByb2dyZXNzRXZlbnQsXCJsb2FkZW5kXCIse2N1cnJlbnRUYXJnZXQ6cixidWJibGVzOiExLGNhbmNlbGFibGU6ITEsbGVuZ3RoQ29tcHV0YWJsZTohMSxsb2FkZWQ6ZSx0b3RhbDowfSkpfWNhdGNoKGUpe3QubG9nZ2VyJiZ0LmxvZ2dlci53YXJuKGUpfX0saS5vbmVycm9yPWZ1bmN0aW9uKGUpe3QubG9nZ2VyJiZ0LmxvZ2dlci53YXJuKFwib25FcnJvcjogXCIrSlNPTi5zdHJpbmdpZnkoZSkpLHIuZGlzcGF0Y2hFdmVudChhLnJjLmNyZWF0ZUV2ZW50KEVycm9yRXZlbnQsXCJlcnJvclwiLGUscikpfSxpLm9uYWJvcnQ9ZnVuY3Rpb24oZSl7dC5sb2dnZXImJnQubG9nZ2VyLndhcm4oXCJvbkFib3J0OiBcIitKU09OLnN0cmluZ2lmeShlKSksci5kaXNwYXRjaEV2ZW50KGEucmMuY3JlYXRlRXZlbnQoUHJvZ3Jlc3NFdmVudCxcImFib3J0XCIsZSxyKSl9LGkuc2VuZCgpfSx0LnByb3RvdHlwZS5hYm9ydD1mdW5jdGlvbigpe30sdH0oby5wYik7dC5adT1ofSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDMxKSxzPXIoNzQpLG89cigxKSxhPXIoNyksaD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0LmxvZ2dlcklkPVwiW0hpdmVSZXF1ZXN0TWFuaWZlc3RdXCIsdH1yZXR1cm4gaSh0LGUpLHQucmVnaXN0ZXJUZWNoPWZ1bmN0aW9uKGUscil7dC5pTFtyXT1lfSx0LnJlZ2lzdGVyQ29tbT1mdW5jdGlvbihlLHIpe3Qubkxbcl09ZX0sdC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe2lmKCF0aGlzLnNlc3Npb25JZCl7dmFyIGU9T2JqZWN0LmtleXModC5uTCk7ZS5sZW5ndGg+MCYmKHRoaXMuc2Vzc2lvbklkPXQubkxbZVswXV0pfXZhciByPXQuaUxbdGhpcy5zZXNzaW9uSWRdLGk9dC5uTFt0aGlzLnNlc3Npb25JZF07cy5zTChyKXx8cy5zTChpKT8oby5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkhpdmVKUyBUZWNoIG9yIENvbW0gYXJlIG5vdCBkZWZpbmVkXCIsdGhpcy5sb2dnZXJJZCksdGhpcy5yZXNvbHZlKCkpOihpLmxvZ2dlcigpLmRlYnVnKFwiSW50ZXJjZXB0ZWQgTWFuaWZlc3QgUmVxdWVzdCBcIit0aGlzLnVybCksci5vTCh0aGlzKSxpLm9uQWN0aXZhdGVTZXNzaW9uKHRoaXMudXJsKSl9LHQucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IFhNTEh0dHBSZXF1ZXN0O3Qub3BlbihcIkdFVFwiLHRoaXMudXJsKSx0Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT10LnJlYWR5U3RhdGUmJihlLnJlc3BvbnNlPXQucmVzcG9uc2VUZXh0LGUucmVzcG9uc2VUZXh0PXQucmVzcG9uc2VUZXh0LGUucmVhZHlTdGF0ZT00LGUuc3RhdHVzPXQuc3RhdHVzLGUuZGlzcGF0Y2hFdmVudChhLnJjLmNyZWF0ZUV2ZW50KEV2ZW50LFwicmVhZHlzdGF0ZWNoYW5nZVwiLHtjdXJyZW50VGFyZ2V0OmV9KSksZS5kaXNwYXRjaEV2ZW50KGEucmMuY3JlYXRlRXZlbnQoUHJvZ3Jlc3NFdmVudCxcIm9ubG9hZFwiLHtjdXJyZW50VGFyZ2V0OmV9KSksY29uc29sZS5kZWJ1ZyhcIlJldHVybmVkIE1hbmlmZXN0IFJlcXVlc3QgXCIrZS51cmwpKX0sdC5zZW5kKCl9LHR9KG4uSGl2ZVJlcXVlc3QpO2gubkw9e30saC5pTD17fSx0Lnp1PWh9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjshZnVuY3Rpb24oKXt2YXIgdD1yKDE3KSxpPXQubG9nLG49dC5XdTtlLmkuV3U9bixlLmkuVnU9dC5WdSxlLmkuR3U9dC5HdTt2YXIgcz1yKDEyMil8fG51bGwsbz1yKDEyNCl8fG51bGwsYT1yKDEyNyl8fG51bGwsaD1yKDEyOSl8fG51bGw7c3dpdGNoKG4uUXUpe2Nhc2VcImNocm9tZVwiOmlmKCFzfHwhcy5hTClyZXR1cm4gdm9pZCBpKFwiQ2hyb21lIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKTtpKFwiYWRhcHRlci5qcyBzaGltbWluZyBjaHJvbWUuXCIpLGUuaS5oTD1zLHMuY0woKSxzLnVMKCksdC5LdSgpLHMubEwoKSxzLmFMKCkscy5wTCgpLHMuZEwoKTticmVhaztjYXNlXCJmaXJlZm94XCI6aWYoIWF8fCFhLmFMKXJldHVybiB2b2lkIGkoXCJGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKTtpKFwiYWRhcHRlci5qcyBzaGltbWluZyBmaXJlZm94LlwiKSxlLmkuaEw9YSxhLmNMKCksdC5LdSgpLGEubEwoKSxhLmFMKCksYS5wTCgpO2JyZWFrO2Nhc2VcImVkZ2VcIjppZighb3x8IW8uYUwpcmV0dXJuIHZvaWQgaShcIk1TIGVkZ2Ugc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpO2koXCJhZGFwdGVyLmpzIHNoaW1taW5nIGVkZ2UuXCIpLGUuaS5oTD1vLG8uY0woKSx0Lkt1KCksby5hTCgpO2JyZWFrO2Nhc2VcInNhZmFyaVwiOmlmKCFoKXJldHVybiB2b2lkIGkoXCJTYWZhcmkgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpO2koXCJhZGFwdGVyLmpzIHNoaW1taW5nIHNhZmFyaS5cIiksZS5pLmhMPWgsaC5jTCgpO2JyZWFrO2RlZmF1bHQ6aShcIlVuc3VwcG9ydGVkIGJyb3dzZXIhXCIpfX0oKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMzIpLG49cig0KSxzPXIoMTgpLG89cigyMSksYT1yKDEzMCksaD1hLkhpdmVDb21tLk9wdGlvbnMuZkwsYz1yKDE5KSx1PXIoMTMxKSxsPXIoMSkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyKXt0aGlzLmdMPXQsdGhpcy5vcHRpb25zXz1uZXcgaCx2b2lkIDAhPT1yW2UuRUxdJiZvLlNwKHJbZS5FTF0sdGhpcy5vcHRpb25zXyl9cmV0dXJuIGUucHJvdG90eXBlLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gZS5FTH0sZS5wcm90b3R5cGUuaWQ9ZnVuY3Rpb24oKXtyZXR1cm5cIltcIitlLkVMK1wiXSBcIn0sZS5wcm90b3R5cGUuZ2V0VmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdMLmdldFBsdWdpblZlcnNpb24oKX0sZS5wcm90b3R5cGUudkw9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZS5wcm90b3R5cGUueUw9ZnVuY3Rpb24oKXtyZXR1cm4gbi5yZXNvbHZlKCEwKX0sZS5wcm90b3R5cGUuaW5pdFNlc3Npb249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLlRMKGUsdC50aWNrZXQsdC50aWNrZXQuTk4oKSx0KTtyZXR1cm4gcy5IaXZlUmVxdWVzdEZhY3RvcnkucmVnaXN0ZXJUZWNoKHIuaWQsdGhpcy5nZXROYW1lKCkpLG4ucmVzb2x2ZShyKX0sZS5wcm90b3R5cGUubUw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zKCkuaW5pdFRpbWVvdXR9LGUucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5tYW5pZmVzdC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCIvbWFuaWZlc3RcIik7aWYocj4tMSl7dmFyIGk9dC5tYW5pZmVzdC5zdWJzdHJpbmcoMCxyKTtpZihlLmluZGV4T2YoaSk+LTEpcmV0dXJuITB9ZWxzZSBpZihlPT10Lm1hbmlmZXN0KXJldHVybiEwO3JldHVybiExfSxlLnByb3RvdHlwZS5vbD1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09ciYmKHI9ITApLGUucmwmJih0aGlzLmdMLmxvZ2dlcigpLmRlYnVnKFwiW1N0YXRzSlNdIHN0b3BwaW5nIHNlc3Npb24gW1wiK2UuaWQrXCJdIGNvbXBsZXRlIGNsb3NlOiBcIit0KSxlLnJsLnhsLlpkKHIpLGUucmwuQmwuSUwoKSxlLnJsLkJsLnJlc2V0KHQpKSx0P2kuSGl2ZS5SZXBvcnRpbmcoKS5jbG9zZShlLmlkKTp0aGlzLm5sKGUsITApfSxlLnByb3RvdHlwZS5ubD1mdW5jdGlvbihlLHQpe3ZhciByPXQ/Yy5NbC5JRExFOmMuTWwuTGw7dGhpcy5nTC5sb2dnZXIoKS5ub3RpY2UoXCJbSGl2ZUNvbW1dIGNsaWVudCBzdGF0ZTogXCIrYy5NbFtyXSksZS5ybCYmZS5ybC5ubChyKX0sZS5wcm90b3R5cGUuU0w9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9MDtyZXR1cm4gdGhpcy5STDx0Lk9sJiYoaT10Lk9sLXRoaXMuUkwsdGhpcy5STD10Lk9sKSxlLmFsKCkudGhlbihmdW5jdGlvbigpe2UucmwuVWwud0woaSx0LkFsKSxlLnJsLkhsLlNkKHQuUGwsdC5BbCx0Lk9sKSxyLmJMKCl9KS5kb25lKCksbi5yZXNvbHZlKCEwKX0sZS5wcm90b3R5cGUuQ0w9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLmFsKCkudGhlbihmdW5jdGlvbigpe2UucmwuSGwud2QoZS50aWNrZXQuc2Vzc2lvbklkLHQscil9KS5kb25lKCksbi5yZXNvbHZlKCEwKX0sZS5wcm90b3R5cGUuYmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5hbCgpLnRoZW4oZnVuY3Rpb24oKXtlLnJsLkhsLkNkKFt0XSl9KS5kb25lKCksbi5yZXNvbHZlKCEwKX0sZS5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt2YXIgdD0hMDtpZih2b2lkIDAhPXRoaXMub3B0aW9ucygpLm9uRXJyb3IpdHJ5e3Q9dGhpcy5vcHRpb25zKCkub25FcnJvcihlKX1jYXRjaChlKXtsLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiZXhjZXB0aW9uIGluIHVzZXItZGVmaW5lZCBvbkVycm9yIGNhbGxiYWNrXCIsdGhpcy5pZCgpLGUpfXJldHVybiB0fSxlLnByb3RvdHlwZS5vbkFjdGl2ZVNlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9MKCksZS5hbCgpLnRoZW4oZnVuY3Rpb24ocil7dC5QTD1yO3ZhciBpPW5ldyB1LkFMKHQuZ0wuaXNMaXZlKCksdC5nTC5nZXRTdHJlYW1Qcm90b2NvbCgpLGUudGlja2V0Lk5OKCkpO3QuUEwuT0w9aSx0LlBMLlVsLk9MPWksdC5nTC51cGRhdGVQbGF5ZXJJbmZvKHQuUEwpLHQuUEwuQmwuaW5pdCh0LlBMLlVsLGUuaWQpLHQuZ0wub3B0aW9ucygpLnRlc3RJZCYmdC5QTC5VbC5OTCh0LmdMLm9wdGlvbnMoKS50ZXN0SWQpLHQuUEwuSGwuWHUoZS50aWNrZXQuc2Vzc2lvbklkLHQuZ0wuZ2V0UGxheWVyU291cmNlKCksMjAwKTt2YXIgbj10LmdMLmZsdXNoVGVjaEV2ZW50cygpO2lmKG4mJm4ubGVuZ3RoPjAmJnQuUEwuSGwuQ2Qobiksdm9pZCAwIT10Lm9wdGlvbnNfLm9uQWN0aXZlU2Vzc2lvbil0cnl7dC5vcHRpb25zXy5vbkFjdGl2ZVNlc3Npb24oZS50b0hpdmVTZXNzaW9uKCkpfWNhdGNoKGUpe2wuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJleGNlcHRpb24gaW4gdXNlci1kZWZpbmVkIG9uQWN0aXZlU2Vzc2lvbiBjYWxsYmFja1wiLHQuaWQoKSxlKX19KS5kb25lKCl9LGUucHJvdG90eXBlLkRMPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5rTD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuTEw9ZnVuY3Rpb24oZSl7dGhpcy5nTD1lfSxlLnByb3RvdHlwZS5vcHRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc199LGUucHJvdG90eXBlLl9MPWZ1bmN0aW9uKCl7dGhpcy5STD0wfSxlLnByb3RvdHlwZS5UTD1mdW5jdGlvbihlLHQscixpKXt2YXIgbj1uZXcgcy5jbChlLHQscixpKTtyZXR1cm4gbi5NTD0hMSxuLmlkPXQuc2Vzc2lvbklkLG59LGUucHJvdG90eXBlLmJMPWZ1bmN0aW9uKCl7dHJ5e3ZhciBlPXRoaXMuZ0wuZ2V0RXh0ZW5kZWRTdGF0cygpO3ZvaWQgMCE9ZSYmKHRoaXMuUEwuVWwuRkwubWV0cmljcy5iaXRyYXRlVXBOKz1lLmdldEJpdHJhdGVTd2l0Y2hVcCgpLHRoaXMuUEwuVWwuRkwubWV0cmljcy5iaXRyYXRlRHduTis9ZS5nZXRCaXRyYXRlU3dpdGNoRG93bigpLG51bGwhPWUuZ2V0QmFuZHdpZHRoKCkmJih0aGlzLlBMLlVsLkZMLm1ldHJpY3Muc3JjVGhyb3VnaHB1dD1lLmdldEJhbmR3aWR0aCgpKSxudWxsIT1lLmdldFZpZGVvQml0cmF0ZXMoKSYmdGhpcy5VTCghMCxlLmdldFZpZGVvQml0cmF0ZXMoKSksbnVsbCE9ZS5nZXRBdWRpb0JpdHJhdGVzKCkmJnRoaXMuVUwoITEsZS5nZXRBdWRpb0JpdHJhdGVzKCkpKX1jYXRjaChlKXtsLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgYWNjb3VudGluZyBleHRlbmRlZCBzdGF0c1wiLHRoaXMuaWQoKSxlKX19LGUucHJvdG90eXBlLlVMPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxpPTAsbj0wLHM9MCxvPTA7dC5mb3JFYWNoKGZ1bmN0aW9uKHQsYSl7dmFyIGg9dC5zdWNjZXNzK3QubGw7aWYoaSs9aCxvKz10LmJ5dGVzLG4rPXQuc3VjY2VzcyxzKz10LmxsLGUpe3ZhciBjPXIuUEwuVWwuQkwoTnVtYmVyKGEpKTtyLkhMKGMsaCx0LnN1Y2Nlc3MsdC5sbCx0LmJ5dGVzKX19KTt2YXIgYT10aGlzLlBMLlVsLnhMKCk7dGhpcy5ITChhLGksbixzLG8pfSxlLnByb3RvdHlwZS5ITD1mdW5jdGlvbihlLHQscixpLG4pe2Uuc3JjUmVxTis9dCxlLnNyY1Jlc3BOKz1yLGUuc3JjUmVzcEVyck4rPWksZS5zcmNSZXNwUXQrPW4sZS5yZXNwRmFsbGJhY2tOKz1yLGUucmVzcEZhbGxiYWNrRXJyTis9aX0sZX0oKTtwLkVMPVwiU3RhdHNKU1wiLHQuU3RhdHNKUz1wfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDU4KSxzPXIoMTQyKSxvPXIoOSksYT1yKDM0KSxoPXIoMzEpLGM9cigwKSx1PXIoMSksbD1yKDIpLHA9cigxNDMpLGQ9cigxNTApOyFmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3JldHVybiB0aGlzLnFMKHQpfHwtMSE9dC5pbmRleE9mKGUuR0wpfWZ1bmN0aW9uIHIodCl7cmV0dXJuLTEhPXQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGUuVkwudG9Mb3dlckNhc2UoKSl8fC0xIT10LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihlLmpMLnRvTG93ZXJDYXNlKCkpfWZ1bmN0aW9uIGYodCxyKXt2YXIgaT1yLnJlcGxhY2UoXCJfZGVmaW5zdF8vXCIsXCJcIikubWF0Y2gobmV3IFJlZ0V4cCh0LnJlcGxhY2UoXCIubXBkXCIsXCJcIikrZS5RTCkpO3JldHVybiBpJiZpLmxlbmd0aD4wfWUuS0w9MSxlLllMPTIsZS5XTD0yZTMsZS56TD0zZTQsZS5KTD0xZTQsZS5YTD0hMCxlLlpMPSEwLGUuJEw9NTAwLGUuZU09MTAsZS5EQVNIX01FVEFEQVRBX01JTl9GUkFHTUVOVFM9MyxlLlZMPVwiKGZvcm1hdD1tcGQtdGltZS1jc2YpXCIsZS5qTD1cIi5tcGRcIixlLlFMPVwiXy4qLm1wZFwiLGUuR0w9XCIubTRzXCIsZS50TT1cIi5pc20vXCIsZS5yTT10LGUucUw9cjt2YXIgZz1mdW5jdGlvbih0KXtmdW5jdGlvbiBuKHIsaSl7dmFyIG49dC5jYWxsKHRoaXMsaSl8fHRoaXM7cmV0dXJuIG4uQWc9MCxuLmlNPSEwLG4ubG9nZ2VySWQ9XCJbRGFzaCBDb250ZXh0XSBcIixuLnRpY2tldD1yLG4ubk09ci5fTigpLG4uc009bmV3IHMub00sbi5uTS5pbmRleE9mKGUuakwpPjA/bi5hTT1uZXcgcC5oTShpLnNlc3Npb25JZCk6bi5hTT1uZXcgZC5jTShpLnNlc3Npb25JZCksbn1yZXR1cm4gaShuLHQpLG4ucHJvdG90eXBlLlNrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGlja2V0fSxuLnByb3RvdHlwZS5nZXRTdHJlYW1Qcm90b2NvbD1mdW5jdGlvbigpe3JldHVybiBTdHJlYW1Qcm90b2NvbC5EQVNIfSxuLnByb3RvdHlwZS51TT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5NfSxuLnByb3RvdHlwZS5sTT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFNLmxNKCl9LG4ucHJvdG90eXBlLmlzTGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFNLnBNKCl9LG4ucHJvdG90eXBlLmRNPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc019LG4ucHJvdG90eXBlLmlnPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuWGYoZSk7aWYodD09by52Yy5mY3x8dD09by52Yy5kYylyZXR1cm4hMH0sbi5wcm90b3R5cGUuWGY9ZnVuY3Rpb24oZSl7dHJ5e2lmKHIoZSkpcmV0dXJuIG8udmMuZ2M7aWYodGhpcy5mTShlKSlyZXR1cm4gby52Yy5FYzt2YXIgdD10aGlzLmFNLmdNKGUpO3JldHVybiBudWxsIT10P3QudHlwZTotMSE9ZS5pbmRleE9mKFwiYXVkaW9cIik/by52Yy5kYzpvLnZjLkVjfWNhdGNoKHQpe3JldHVybiB1LkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZ2V0dGluZyB0aGUgZW50aXR5IHR5cGUgYmFzZWQgb24gYSB1cmxcIix0aGlzLmxvZ2dlcklkLGwuaHMuWXIuQnIse2RldGFpbGVkRXJyb3I6dCx1cmw6ZX0pLG8udmMuRWN9fSxuLnByb3RvdHlwZS5FTT1mdW5jdGlvbihlKXt2YXIgdD1vLnZjLkVjLHI9MCxpPTAsbj0wLHM9ITAsaD0hMSxjPTA7dHJ5e2lmKHQ9dGhpcy5YZihlKSx0aGlzLmZNKGUpKXM9ITA7ZWxzZSBpZih0IT1vLnZjLmdjKXt2YXIgcD10aGlzLmFNLmdNKGUpO251bGwhPXA/KHI9cC5kdXJhdGlvbixpPXAuYml0cmF0ZSxuPXAuaWQsaD10aGlzLmlnKGUpKToodGhpcy50aygpLHRoaXMubG9nZ2VyLndhcm4oXCJjb3VsZCBub3QgZXh0cmFjdCBzZWdtZW50IGluZm8gZm9yIFwiK2UpKX1lbHNlIHM9ITE7cmV0dXJuIGM9TWF0aC5yb3VuZChyLzFlNCksbmV3IGEuTl8oZSx0LHMsbixjLGksaCx0aGlzLmdldENvbnRleHRJZCgpKX1jYXRjaCh0KXtyZXR1cm4gdS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGdldHRpbmcgdGhlIGVudGl0eSBjaGFyYWN0ZXJpc3RpY3MgYmFzZWQgb24gYSB1cmxcIix0aGlzLmxvZ2dlcklkLGwuaHMuWXIuSHIse2RldGFpbGVkRXJyb3I6dCx1cmw6ZX0pLG5ldyBhLk5fKGUsby52Yy5FYywhMSwwLDAsMCwhMSx0aGlzLmdldENvbnRleHRJZCgpKX19LG4ucHJvdG90eXBlLm5rPWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1lLnVybCxyPXRoaXMuYU0udk0odCk7cmV0dXJuIG51bGwhPXI/dGhpcy5FTShyLnlNKTpudWxsfWNhdGNoKHQpe3JldHVybiB1LkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZ2V0dGluZyB0aGUgbmV4dCBlbnRpdHlcIix0aGlzLmxvZ2dlcklkLGwuaHMuWXIueHIse2RldGFpbGVkRXJyb3I6dCx1cmw6ZS51cmx9KSxudWxsfX0sbi5wcm90b3R5cGUuYWs9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuVE0uY2FsbCh0aGlzLGUuS0wsZS5ZTCl9LG4ucHJvdG90eXBlLm1NPWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1lLnVybDt0LnRvTG93ZXJDYXNlKCk7cmV0dXJuIHQ9PT10aGlzLm5NfHwoIShudWxsPT10aGlzLmFNfHwhdGhpcy5hTS5mTSh0KSl8fCEocih0KSYmdGhpcy5hTS5JTSE9PXQmJiFmKHRoaXMuYU0uSU0sdCkpKX1jYXRjaCh0KXtyZXR1cm4gdS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGlkZW50aWZ5aW5nIGlmIGlzIGN1cnJlbnQgY29udGV4dFwiLHRoaXMubG9nZ2VySWQsbC5ocy5Zci5xcix7ZGV0YWlsZWRFcnJvcjp0LHVybDplLnVybH0pLCExfX0sbi5wcm90b3R5cGUuU009ZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PWUuUk0scj1lLktmLnVybCxpPXRoaXMuYU0ucGFyc2Uocix0LGUuS2YuaW50ZXJuYWwpO2UuS2YucmVzcG9uc2VUZXh0PWksZS5LZi5yZXNwb25zZT1pfWNhdGNoKHQpe3UuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBwYXJzaW5nIHJlY2VpdmVkIG1ldGFkYXRhXCIsdGhpcy5sb2dnZXJJZCxsLmhzLllyLkdyLHtkZXRhaWxlZEVycm9yOnQsdXJsOmUuS2YudXJsfSksZS5STSYmKGUuS2YucmVzcG9uc2VUZXh0PWUuUk0sZS5LZi5yZXNwb25zZT1lLlJNKX10cnl7dGhpcy53TS5RRCgpfWNhdGNoKHQpe3UuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzdGFydGluZyBwcmVmZXRjaGVyIGFmdGVyIGZldGNoaW5nIG1ldGFkYXRhXCIsdGhpcy5sb2dnZXJJZCxsLmhzLllyLlZyLHtkZXRhaWxlZEVycm9yOnQsdXJsOmUuS2YudXJsfSl9dGhpcy5iTSgpfSxuLnByb3RvdHlwZS5DTT1mdW5jdGlvbihlKXt2YXIgcj10aGlzO3RyeXt0LnByb3RvdHlwZS5DTS5jYWxsKHRoaXMsZSksZS5YZigpIT09by52Yy5mYyYmZS5YZigpIT09by52Yy5kY3x8KGUuWGYoKT09PW8udmMuZmMmJnRoaXMuc00uX00oZSksdGhpcy5hTS5DTShlKS50aGVuKGZ1bmN0aW9uKHQpe3QmJnIuYk0oKSxlLlhmKCk9PW8udmMuZmMmJnIud00uVUQoZS56Zil9KS5kb25lKCkpfWNhdGNoKGUpe3UuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciB3aGVuIHJlY2VpdmVkIGEgZnJhZ21lbnRcIix0aGlzLmxvZ2dlcklkLGwuaHMuWXIuanIsZSl9fSxuLnByb3RvdHlwZS5nZXRDb250ZXh0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aWNrZXQua04oKX0sbi5wcm90b3R5cGUuUE09ZnVuY3Rpb24oZSxyKXt2YXIgaT1lO3JldHVybiBpLkFNPWMuRnJhbWV3b3JrLnRpbWUoKSx0LnByb3RvdHlwZS5QTS5jYWxsKHRoaXMsaSxyKX0sbi5wcm90b3R5cGUuZGs9ZnVuY3Rpb24oZSx0LHIsaSl7cmV0dXJuIHRoaXMuYU0uZGsoZSx0LHIsaSl9LG4ucHJvdG90eXBlLmZNPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFNLmZNKGUpfSxuLnByb3RvdHlwZS5iTT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dHJ5e3RoaXMuYU0uT00/dGhpcy5hTS5PTS5OTSgpLnRoZW4oZnVuY3Rpb24ocil7aWYocil0LmlNPSEwLHQubG9nZ2VyLmRlYnVnKFwiUHJvdGVjdGlvbiBldmFsdWF0aW9uOiBjYW4gZGVjcnlwdFwiKTtlbHNle3ZhciBpPVwiUHJvdGVjdGlvbiBldmFsdWF0aW9uOiBjYW5ub3QgZGVjcnlwdCBbXCIrKGUuWEw/XCJlcnJvclwiOlwiZGlzYWJsZWRcIikrXCJdXCI7ZS5aTD8odC5pTT0hMCx0LmxvZ2dlci5kZWJ1ZyhpK1wiLCBtZXRhZGF0YSBwcmVmZXRjaCBlbmFibGVkXCIpKTp0LmxvZ2dlci53YXJuKGkrXCIsIG1ldGFkYXRhIHByZWZldGNoIERJU0FCTEVEXCIpfX0pLmRvbmUoKTp0aGlzLmxvZ2dlci5kZWJ1ZyhcIlByb3RlY3Rpb24gZXZhbHVhdGlvbjogbm90IGVuY3J5cHRlZFwiKX1jYXRjaCh0KXtpZih1LkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZXZhbHVhdGluZyB0aGUgcHJvdGVjdGlvblwiLHRoaXMubG9nZ2VySWQsbC5ocy5Zci5Rcix0KSxlLlpMKXt2YXIgcj1cIlByb3RlY3Rpb24gZXZhbHVhdGlvbjogY2Fubm90IGRlY3J5cHQgW1wiKyhlLlhMP1wiZXJyb3JcIjpcImRpc2FibGVkXCIpK1wiXVwiO3RoaXMuaU09ITAsdGhpcy5sb2dnZXIuZGVidWcocitcIiwgbWV0YWRhdGEgcHJlZmV0Y2ggZW5hYmxlZFwiKX19fSxuLnByb3RvdHlwZS50az1mdW5jdGlvbigpe3RoaXMuaU0mJihudWxsPT10aGlzLkRNJiZ0aGlzLmFNLnBNKCk/dGhpcy5rTSgpOnRoaXMubG9nZ2VyLmRlYnVnKFwiREFTSCBQUkUtRkVUQ0hJTkcgTUVUQURBVEEgQUxSRUFEWSBTQ0hFRFVMRUQgT1IgTk9UIExJVkVcIikpfSxuLnByb3RvdHlwZS5MTT1mdW5jdGlvbigpe3RoaXMuaU0mJm51bGwhPXRoaXMuRE0mJmMuRnJhbWV3b3JrLmNsZWFyVGltZW91dCh0aGlzLkRNKX0sbi5wcm90b3R5cGUua009ZnVuY3Rpb24oKXt2YXIgdD10aGlzLHI9dm9pZCAwIT10aGlzLk1NP3RoaXMuTU06MCxpPWUuV0wsbj1yK2kscz1NYXRoLm1heCgxLG4tYy5GcmFtZXdvcmsudGltZSgpK2UuJEwpO3RoaXMubG9nZ2VyLmRlYnVnKFwiREFTSCBQUkVGRVRDSElORyBNRVRBREFUQSBcIit0aGlzLmFNLklNK1wiIElOIFwiK3MpLHRoaXMuRE09Yy5GcmFtZXdvcmsuc2V0VGltZW91dChmdW5jdGlvbigpe3QuRk0odC5hTS5JTSxjLkZyYW1ld29yay50aW1lKCkpfSxzKX0sbi5wcm90b3R5cGUuRk09ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLk1NO2lmKG51bGw9PXImJihyPTApLHI+dCl0aGlzLmtNKCk7ZWxzZXt2YXIgaT1uZXcgaC5IaXZlUmVxdWVzdCh0aGlzLnRpY2tldC5zZXNzaW9uSWQpO2kub3BlbihcIkdFVFwiLGUpLGkuaW50ZXJuYWw9ITAsaS5zZW5kKCksdGhpcy5ETT1udWxsLHRoaXMuTU09Yy5GcmFtZXdvcmsudGltZSgpfX0sbi5wcm90b3R5cGUuVU09ZnVuY3Rpb24oZSl7dGhpcy5hTS5hdXRoZW50aWNhdGlvblRva2VuPWV9LG4ucHJvdG90eXBlLmxrPWZ1bmN0aW9uKGUsdCl7dHJ5e3ZhciByPXRoaXMuUEQoKSxpPXRoaXMuQk0oKSxuPXIuQV8oKSxzPXRoaXMuYU0uSE0obixyLmdldEJpdHJhdGUoKSxlLHQpLG89Yy5GcmFtZXdvcmsudGltZSgpLWk7cmV0dXJuIE1hdGgubWF4KDAscy1vKX1jYXRjaChlKXtyZXR1cm4gdS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGNhbGN1bGF0aW5nIHRoZSBkaXN0YW5jZSBkdXJhdGlvblwiLHRoaXMubG9nZ2VySWQsbC5ocy5Zci5LcixlKSwwfX0sbi5wcm90b3R5cGUueE09ZnVuY3Rpb24oKXtyZXR1cm4gZS5KTH0sbi5wcm90b3R5cGUuVkQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMuYU0ucU0oZSx0KTtyZXR1cm4gbnVsbCE9aT9uZXcgYS5OXyhpLnlNLHIsITAsZSxpLmR1cmF0aW9uLHQsITAsdGhpcy5nZXRDb250ZXh0SWQoKSk6bnVsbH0sbi5wcm90b3R5cGUucGs9ZnVuY3Rpb24oKXtyZXR1cm4gZS56TH0sbn0obi5HTSk7ZS5WTT1nfSh0LkRBU0h8fCh0LkRBU0g9e30pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNDgpLG49cigzNCkscz1yKDApLG89cigxNDApLGE9cig5KSxoPXIoMjQpLGM9cig0OSksdT1yKDUpLGw9cigyKSxwPXIoMSksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5qTT1cIltWaWRlb0NvbnRleHRdIFwiLHRoaXMuUU09bmV3IGksdGhpcy5sb2dnZXI9cy5GcmFtZXdvcmsucmVzb2x2ZShzLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy55RD1lLnlELHRoaXMuS009ZS5ZTSx0aGlzLldNPWUuV00sdGhpcy53TT1lLnpNLHRoaXMud00uUkQodGhpcyx0aGlzKX1yZXR1cm4gZS5wcm90b3R5cGUuU2s9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuSk09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53TX0sZS5wcm90b3R5cGUuVE09ZnVuY3Rpb24oZSx0KXt0cnl7dmFyIHI9MCxpPTA7aWYodGhpcy5RTS5sZW5ndGg8dClyZXR1cm4hMDtmb3IodmFyIG49dGhpcy5RTS5rZXlzKCkucmV2ZXJzZSgpLHM9blswXSxvPXRoaXMuUU0uZ2V0KHMpLmJpdHJhdGUsYT1uLnNsaWNlKDEpLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGM9YVtoXSx1PXRoaXMuUU0uZ2V0KGMpLGQ9dS5BTSxmPXUuYml0cmF0ZSxnPU1hdGguYWJzKHUuQU0tcyk7aWYoZiE9bylyZXR1cm4hMTtpZihnPGUpe2lmKCsraT49dClyZXR1cm4hMX1lbHNle2lmKCsrcj50KXJldHVybiEwO2k9TWF0aC5tYXgoMCxpLTEpLHM9ZCxvPWZ9fXJldHVybiExfWNhdGNoKGUpe3JldHVybiBwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY2FsY3VsYXRpbmcgaWYgdGhlIHBsYXllciBpcyBpbiBidWZmZXJpbmcgbW9kZVwiLHRoaXMuak0sbC5ocy5iaS5TaSxlKSwhMX19LGUucHJvdG90eXBlLmdldENvbnRleHRJZD1mdW5jdGlvbigpe3JldHVybiBudWxsfSxlLnByb3RvdHlwZS5QTT1mdW5jdGlvbihlLHQpe2lmKHRoaXMuWE0odCkpe3ZhciByPXRoaXMuUEQoKTtpZihyKXt2YXIgaT1lLmdldEJpdHJhdGUoKSxuPXIuZ2V0Qml0cmF0ZSgpO2k+bj90aGlzLktNLlpNKCEwKTppPG4mJnRoaXMuS00uWk0oITEpfWVsc2UgdGhpcy5LTS5aTSghMCk7aWYodGhpcy5RTS5sZW5ndGg+dS5oaC55YS5nYSl7dmFyIG89dGhpcy5RTS5rZXlzKClbMF07dGhpcy5RTS5kZWxldGUobyl9dGhpcy5RTS5zZXQocy5GcmFtZXdvcmsudGltZSgpLGUpfXJldHVybiB0aGlzLiRNKGUsdCl9LGUucHJvdG90eXBlLiRNPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IG8uZUY7dHJ5e2lmKHRoaXMud00uYkQoZS5iaXRyYXRlKSl7aWYodGhpcy5XTS50RihlLlpmKCkpKXtyLnJGPSEwO3ZhciBpPXRoaXMuV00uaUYoZS5aZigpKTt0aGlzLm5GKHQsaSxyKX1pZih0aGlzLldNLnNGKGUuWmYoKSkpZm9yKHZhciBuPXRoaXMuV00ub0YoZS5aZigpKSxzPTAsYT1uO3M8YS5sZW5ndGg7cysrKXt2YXIgaD1hW3NdO3RoaXMubkYodCxoLkpmKCksciksci5hRj0hMH19ZWxzZXt2YXIgdT1jLnNELm1jO3RoaXMueUQuY2soKSYmKHU9Yy5zRC5pRCksdGhpcy53TS5ERChlLmJpdHJhdGUsdSx1KX1yZXR1cm4gcn1jYXRjaChlKXtyZXR1cm4gcC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGNvbmZpZ3VyaW5nIHRoZSByZXF1ZXN0IGRpcmVjdGl2ZVwiLHRoaXMuak0sbC5ocy5iaS5SaSxlKSxuZXcgby5lRn19LGUucHJvdG90eXBlLm5GPWZ1bmN0aW9uKGUsdCxyKXtlIT1oLmJmLklmJiZlIT1oLmJmLndmfHx0IT1oLmJmLlRmJiZ0IT1oLmJmLndmJiZ0IT1oLmJmLklmfHwoci5oRj0hMCl9LGUucHJvdG90eXBlLlhNPWZ1bmN0aW9uKGUpe3JldHVybiBlIT1oLmJmLndmJiZlIT1oLmJmLklmfSxlLnByb3RvdHlwZS5jRj1mdW5jdGlvbihlLHQscil7dmFyIGk9W107dHJ5e2Zvcih2YXIgbj10aGlzLldNLm9GKHQuWmYoKSkscz0wLG89bjtzPG8ubGVuZ3RoO3MrKyl7dmFyIGE9b1tzXTthLkpmKCkhPWguYmYuVGYmJih0aGlzLndNLndrKGEsZSksaS5wdXNoKGEuYmspKX1yZXR1cm4gaX1jYXRjaChlKXtyZXR1cm4gcC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGF0dGVtcHRpbmcgdG8gdXBncmFkZSBwcmVmZXRjaFwiLHRoaXMuak0sbC5ocy5iaS53aSxlKSxbXX19LGUucHJvdG90eXBlLnVGPWZ1bmN0aW9uKGUpe3RoaXMuV00udUYoZSl9LGUucHJvdG90eXBlLmxGPWZ1bmN0aW9uKGUsdCl7dGhpcy5XTS5sRihlLHQpfSxlLnByb3RvdHlwZS5wRj1mdW5jdGlvbihlKXt0aGlzLldNLnBGKGUpfSxlLnByb3RvdHlwZS5kRj1mdW5jdGlvbihlKXt0aGlzLldNLmZGKGUpfSxlLnByb3RvdHlwZS5nRj1mdW5jdGlvbihlKXt0aGlzLldNLkVGKCl8fHRoaXMud00uSEQoZSl9LGUucHJvdG90eXBlLlBEPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5RTS5rZXlzKCk7cmV0dXJuIGUubGVuZ3RoPjA/dGhpcy5RTS5nZXQoZVtlLmxlbmd0aC0xXSk6bnVsbH0sZS5wcm90b3R5cGUuQk09ZnVuY3Rpb24oKXt2YXIgZT10aGlzLlFNLmtleXMoKTtpZihlLmxlbmd0aD4wKXJldHVybiBlW2UubGVuZ3RoLTFdfSxlLnByb3RvdHlwZS52Rj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnlGKGUpO251bGwhPXQmJnRoaXMuZ0YodC5iaXRyYXRlKX0sZS5wcm90b3R5cGUueUY9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mcmFnbWVudElkLHI9dC5zbGljZSgwLHQubGFzdEluZGV4T2YoXCItXCIpKSxpPXIuc2xpY2UoMCxyLmxhc3RJbmRleE9mKFwiLVwiKSkscz1lLmdldFR5cGUoKTtyZXR1cm4gbmV3IG4uTl8oaSxzLCEwLGUuaWQsZS5kdXJhdGlvbixlLmJpdHJhdGUsITAsdGhpcy5nZXRDb250ZXh0SWQoKSl9LGUucHJvdG90eXBlLmFrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGUucHJvdG90eXBlLmRrPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiAwfSxlLnByb3RvdHlwZS5waz1mdW5jdGlvbigpe3JldHVybiAzZTR9LGUucHJvdG90eXBlLnhNPWZ1bmN0aW9uKCl7cmV0dXJuIDFlNH0sZS5wcm90b3R5cGUubms9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLlZEPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuZ2V0U3RyZWFtUHJvdG9jb2w9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuaXNMaXZlPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGUucHJvdG90eXBlLnRrPWZ1bmN0aW9uKGUpe30sZS5wcm90b3R5cGUuTE09ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLmxNPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLm1NPWZ1bmN0aW9uKGUpe30sZS5wcm90b3R5cGUuZE09ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLkVNPWZ1bmN0aW9uKGUpe30sZS5wcm90b3R5cGUuU009ZnVuY3Rpb24oZSl7fSxlLnByb3RvdHlwZS5DTT1mdW5jdGlvbihlKXtlLlhmKCk9PT1hLnZjLmZjJiZ0aGlzLmxGKGUuWmYoKSxlLiRmKCkpfSxlLnByb3RvdHlwZS51TT1mdW5jdGlvbigpe3JldHVybiBudWxsfSxlLnByb3RvdHlwZS5VTT1mdW5jdGlvbihlKXt9LGUucHJvdG90eXBlLmxrPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIDB9LGV9KCk7dC5HTT1kfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlLHQscixzKXtpZighKHRoaXMgaW5zdGFuY2VvZiBpKSlyZXR1cm4gbmV3IGkoZSx0LHIscyk7bi5jYWxsKHRoaXMsZSx0LHIscyl9ZS5pPWk7dmFyIG49KHIoMTEpLHIoMTQxKSkscz1yKDM5KSxvPXIoMTMpO2kuVEY9aSxpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pLE9iamVjdC5hZGRFYWNoKGkucHJvdG90eXBlLHMucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChpLnByb3RvdHlwZSxvLnByb3RvdHlwZSksaS5wcm90b3R5cGUubUY9ITAsaS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUpe3JldHVybiF0aGlzLmhhcyhlKSYmKG4ucHJvdG90eXBlLmFkZC5jYWxsKHRoaXMsZSksITApfSxpLnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9YXJndW1lbnRzWzJdO3JldHVybiB0aGlzLk5ULnJlZHVjZShmdW5jdGlvbih0LG4scyl7cmV0dXJuIGUuY2FsbChpLHQsbixzLHIpfSx0KX0saS5wcm90b3R5cGUucmVkdWNlUmlnaHQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9YXJndW1lbnRzWzJdO3JldHVybiB0aGlzLk5ULnJlZHVjZVJpZ2h0KGZ1bmN0aW9uKHQsbixzKXtyZXR1cm4gZS5jYWxsKGksdCxuLHMscil9LHQpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXIoMzMpO1widW5kZWZpbmVkXCI9PXR5cGVvZiBoaXZlJiYoaGl2ZT17fSksdm9pZCAwPT09aGl2ZS5zZXJ2aWNlcyYmKGhpdmUuc2VydmljZXM9e30pLHZvaWQgMD09PWhpdmUuc2VydmljZXMucHJvdG9jb2wmJihoaXZlLnNlcnZpY2VzLnByb3RvY29sPXt9KSx2b2lkIDA9PT1oaXZlLnNlcnZpY2VzLnByb3RvY29sLklGJiYoaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRj17fSksaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi53Yz17MTpcIlBMQVlFUlwiLG1jOjEsMjpcIlAyUF9BR0VOVFwiLEljOjIsMzpcIlBSRUZFVENIRVJfRklSU1RfVElFUlwiLFNjOjMsNDpcIlBSRUZFVENIRVJfU0VDT05EX1RJRVJcIixSYzo0fSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlNGPXsxOlwiR2xvYmFsXCIsUkY6MSwyOlwiSW50ZXJuYWxBc1wiLHdGOjIsMzpcIkV4dGVybmFsQXNcIixiRjozfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLkNGPXsxOlwiSW50ZXJuYWxcIixfRjoxLDI6XCJFeHRlcm5hbFwiLEV4dGVybmFsOjJ9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclBlZXJTdHJlYW1JbmZvPWZ1bmN0aW9uKGUpe3RoaXMuc3RhdGU9bnVsbCx0aGlzLmJpdHJhdGU9bnVsbCx0aGlzLmRlbHRhPW51bGwsZSYmKHZvaWQgMCE9PWUuc3RhdGUmJih0aGlzLnN0YXRlPWUuc3RhdGUpLHZvaWQgMCE9PWUuYml0cmF0ZSYmKHRoaXMuYml0cmF0ZT1lLmJpdHJhdGUpLHZvaWQgMCE9PWUuZGVsdGEmJih0aGlzLmRlbHRhPWUuZGVsdGEpKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUGVlclN0cmVhbUluZm8ucHJvdG90eXBlPXt9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclBlZXJTdHJlYW1JbmZvLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5JMzI/dGhpcy5zdGF0ZT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI6cj09aS5UeXBlLkkzMj90aGlzLmJpdHJhdGU9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5JMzI/dGhpcy5kZWx0YT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUGVlclN0cmVhbUluZm8ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJUcmFja2VyUGVlclN0cmVhbUluZm9cIiksbnVsbCE9PXRoaXMuc3RhdGUmJnZvaWQgMCE9PXRoaXMuc3RhdGUmJihlLnhiKFwic3RhdGVcIixpLlR5cGUuSTMyLDEpLGUuVmIodGhpcy5zdGF0ZSksZS5HYigpKSxudWxsIT09dGhpcy5iaXRyYXRlJiZ2b2lkIDAhPT10aGlzLmJpdHJhdGUmJihlLnhiKFwiYml0cmF0ZVwiLGkuVHlwZS5JMzIsMiksZS5WYih0aGlzLmJpdHJhdGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuZGVsdGEmJnZvaWQgMCE9PXRoaXMuZGVsdGEmJihlLnhiKFwiZGVsdGFcIixpLlR5cGUuSTMyLDMpLGUuVmIodGhpcy5kZWx0YSksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJQZWVySW5mbz1mdW5jdGlvbihlKXt0aGlzLmd1aWQ9bnVsbCx0aGlzLmludGVybmFsQXM9bnVsbCx0aGlzLmV4dGVybmFsQXM9bnVsbCx0aGlzLm5hdD1udWxsLHRoaXMuYmFuZHdpZHRoPW51bGwsdGhpcy53YXRjaGluZ0JpdHJhdGU9bnVsbCx0aGlzLnByaXZhdGVJcD1udWxsLHRoaXMucHVibGljSXA9bnVsbCx0aGlzLnN0cmVhbXM9bnVsbCx0aGlzLnJhbmtWYWx1ZT1udWxsLHRoaXMudGltZXN0YW1wPW51bGwsdGhpcy5wdWJsaWNJcFN0cmluZz1udWxsLHRoaXMucHJpdmF0ZUlwU3RyaW5nPW51bGwsZSYmKHZvaWQgMCE9PWUuZ3VpZCYmKHRoaXMuZ3VpZD1lLmd1aWQpLHZvaWQgMCE9PWUuaW50ZXJuYWxBcyYmKHRoaXMuaW50ZXJuYWxBcz1lLmludGVybmFsQXMpLHZvaWQgMCE9PWUuZXh0ZXJuYWxBcyYmKHRoaXMuZXh0ZXJuYWxBcz1lLmV4dGVybmFsQXMpLHZvaWQgMCE9PWUubmF0JiYodGhpcy5uYXQ9ZS5uYXQpLHZvaWQgMCE9PWUuYmFuZHdpZHRoJiYodGhpcy5iYW5kd2lkdGg9ZS5iYW5kd2lkdGgpLHZvaWQgMCE9PWUud2F0Y2hpbmdCaXRyYXRlJiYodGhpcy53YXRjaGluZ0JpdHJhdGU9ZS53YXRjaGluZ0JpdHJhdGUpLHZvaWQgMCE9PWUucHJpdmF0ZUlwJiYodGhpcy5wcml2YXRlSXA9ZS5wcml2YXRlSXApLHZvaWQgMCE9PWUucHVibGljSXAmJih0aGlzLnB1YmxpY0lwPWUucHVibGljSXApLHZvaWQgMCE9PWUuc3RyZWFtcyYmKHRoaXMuc3RyZWFtcz1lLnN0cmVhbXMpLHZvaWQgMCE9PWUucmFua1ZhbHVlJiYodGhpcy5yYW5rVmFsdWU9ZS5yYW5rVmFsdWUpLHZvaWQgMCE9PWUudGltZXN0YW1wJiYodGhpcy50aW1lc3RhbXA9ZS50aW1lc3RhbXApLHZvaWQgMCE9PWUucHVibGljSXBTdHJpbmcmJih0aGlzLnB1YmxpY0lwU3RyaW5nPWUucHVibGljSXBTdHJpbmcpLHZvaWQgMCE9PWUucHJpdmF0ZUlwU3RyaW5nJiYodGhpcy5wcml2YXRlSXBTdHJpbmc9ZS5wcml2YXRlSXBTdHJpbmcpKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUGVlckluZm8ucHJvdG90eXBlPXt9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclBlZXJJbmZvLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5TVFJJTkc/dGhpcy5ndWlkPWUudl8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuSTMyP3RoaXMuaW50ZXJuYWxBcz1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM6cj09aS5UeXBlLkkzMj90aGlzLmV4dGVybmFsQXM9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA0OnI9PWkuVHlwZS5JMzI/dGhpcy5uYXQ9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA1OnI9PWkuVHlwZS5JMzI/dGhpcy5iYW5kd2lkdGg9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA2OnI9PWkuVHlwZS5JMzI/dGhpcy53YXRjaGluZ0JpdHJhdGU9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA3OnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMucHJpdmF0ZUlwPW5ldyBJbmV0QWRkcmVzcyx0aGlzLnByaXZhdGVJcC5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgODpyPT1pLlR5cGUuU1RSVUNUPyh0aGlzLnB1YmxpY0lwPW5ldyBJbmV0QWRkcmVzcyx0aGlzLnB1YmxpY0lwLnJlYWQoZSkpOmUuTWIocik7YnJlYWs7Y2FzZSA5OmlmKHI9PWkuVHlwZS5MSVNUKXt2YXIgcyxvPTA7dGhpcy5zdHJlYW1zPVtdO3M9ZS5hXygpLHMuaF8sbz1zLnNpemU7Zm9yKHZhciBhPTA7YTxvOysrYSl7dmFyIGg9bnVsbDtoPW5ldyBoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJQZWVyU3RyZWFtSW5mbyxoLnJlYWQoZSksdGhpcy5zdHJlYW1zLnB1c2goaCl9ZS5jXygpfWVsc2UgZS5NYihyKTticmVhaztjYXNlIDEwOnI9PWkuVHlwZS5ET1VCTEU/dGhpcy5yYW5rVmFsdWU9ZS5FXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAxMTpyPT1pLlR5cGUuSTY0P3RoaXMudGltZXN0YW1wPWUuZ18oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMTI6cj09aS5UeXBlLlNUUklORz90aGlzLnB1YmxpY0lwU3RyaW5nPWUuTGIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMTM6cj09aS5UeXBlLlNUUklORz90aGlzLnByaXZhdGVJcFN0cmluZz1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUGVlckluZm8ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2lmKGUuSGIoXCJUcmFja2VyUGVlckluZm9cIiksbnVsbCE9PXRoaXMuZ3VpZCYmdm9pZCAwIT09dGhpcy5ndWlkJiYoZS54YihcImd1aWRcIixpLlR5cGUuU1RSSU5HLDEpLGUuV0ModGhpcy5ndWlkKSxlLkdiKCkpLG51bGwhPT10aGlzLmludGVybmFsQXMmJnZvaWQgMCE9PXRoaXMuaW50ZXJuYWxBcyYmKGUueGIoXCJpbnRlcm5hbEFzXCIsaS5UeXBlLkkzMiwyKSxlLlZiKHRoaXMuaW50ZXJuYWxBcyksZS5HYigpKSxudWxsIT09dGhpcy5leHRlcm5hbEFzJiZ2b2lkIDAhPT10aGlzLmV4dGVybmFsQXMmJihlLnhiKFwiZXh0ZXJuYWxBc1wiLGkuVHlwZS5JMzIsMyksZS5WYih0aGlzLmV4dGVybmFsQXMpLGUuR2IoKSksbnVsbCE9PXRoaXMubmF0JiZ2b2lkIDAhPT10aGlzLm5hdCYmKGUueGIoXCJuYXRcIixpLlR5cGUuSTMyLDQpLGUuVmIodGhpcy5uYXQpLGUuR2IoKSksbnVsbCE9PXRoaXMuYmFuZHdpZHRoJiZ2b2lkIDAhPT10aGlzLmJhbmR3aWR0aCYmKGUueGIoXCJiYW5kd2lkdGhcIixpLlR5cGUuSTMyLDUpLGUuVmIodGhpcy5iYW5kd2lkdGgpLGUuR2IoKSksbnVsbCE9PXRoaXMud2F0Y2hpbmdCaXRyYXRlJiZ2b2lkIDAhPT10aGlzLndhdGNoaW5nQml0cmF0ZSYmKGUueGIoXCJ3YXRjaGluZ0JpdHJhdGVcIixpLlR5cGUuSTMyLDYpLGUuVmIodGhpcy53YXRjaGluZ0JpdHJhdGUpLGUuR2IoKSksbnVsbCE9PXRoaXMucHJpdmF0ZUlwJiZ2b2lkIDAhPT10aGlzLnByaXZhdGVJcCYmKGUueGIoXCJwcml2YXRlSXBcIixpLlR5cGUuU1RSVUNULDcpLHRoaXMucHJpdmF0ZUlwLndyaXRlKGUpLGUuR2IoKSksbnVsbCE9PXRoaXMucHVibGljSXAmJnZvaWQgMCE9PXRoaXMucHVibGljSXAmJihlLnhiKFwicHVibGljSXBcIixpLlR5cGUuU1RSVUNULDgpLHRoaXMucHVibGljSXAud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5zdHJlYW1zJiZ2b2lkIDAhPT10aGlzLnN0cmVhbXMpe2UueGIoXCJzdHJlYW1zXCIsaS5UeXBlLkxJU1QsOSksZS5IQyhpLlR5cGUuU1RSVUNULHRoaXMuc3RyZWFtcy5sZW5ndGgpO2Zvcih2YXIgdCBpbiB0aGlzLnN0cmVhbXMpdGhpcy5zdHJlYW1zLmhhc093blByb3BlcnR5KHQpJiYodD10aGlzLnN0cmVhbXNbdF0sdC53cml0ZShlKSk7ZS54QygpLGUuR2IoKX1udWxsIT09dGhpcy5yYW5rVmFsdWUmJnZvaWQgMCE9PXRoaXMucmFua1ZhbHVlJiYoZS54YihcInJhbmtWYWx1ZVwiLGkuVHlwZS5ET1VCTEUsMTApLGUuWUModGhpcy5yYW5rVmFsdWUpLGUuR2IoKSksbnVsbCE9PXRoaXMudGltZXN0YW1wJiZ2b2lkIDAhPT10aGlzLnRpbWVzdGFtcCYmKGUueGIoXCJ0aW1lc3RhbXBcIixpLlR5cGUuSTY0LDExKSxlLktDKHRoaXMudGltZXN0YW1wKSxlLkdiKCkpLG51bGwhPT10aGlzLnB1YmxpY0lwU3RyaW5nJiZ2b2lkIDAhPT10aGlzLnB1YmxpY0lwU3RyaW5nJiYoZS54YihcInB1YmxpY0lwU3RyaW5nXCIsaS5UeXBlLlNUUklORywxMiksZS5xYih0aGlzLnB1YmxpY0lwU3RyaW5nKSxlLkdiKCkpLG51bGwhPT10aGlzLnByaXZhdGVJcFN0cmluZyYmdm9pZCAwIT09dGhpcy5wcml2YXRlSXBTdHJpbmcmJihlLnhiKFwicHJpdmF0ZUlwU3RyaW5nXCIsaS5UeXBlLlNUUklORywxMyksZS5xYih0aGlzLnByaXZhdGVJcFN0cmluZyksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLkN1c3RvbWVyS2V5PWZ1bmN0aW9uKGUpe3RoaXMucGFydG5lcklkPW51bGwsdGhpcy5jdXN0b21lcklkPW51bGwsZSYmKHZvaWQgMCE9PWUucGFydG5lcklkJiYodGhpcy5wYXJ0bmVySWQ9ZS5wYXJ0bmVySWQpLHZvaWQgMCE9PWUuY3VzdG9tZXJJZCYmKHRoaXMuY3VzdG9tZXJJZD1lLmN1c3RvbWVySWQpKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5DdXN0b21lcktleS5wcm90b3R5cGU9e30saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5DdXN0b21lcktleS5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihlKXtmb3IoZS5yXygpOzspe3ZhciB0PWUua2IoKSxyPSh0LmZuYW1lLHQuZnR5cGUpLG49dC5maWQ7aWYocj09aS5UeXBlLlNUT1ApYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTpyPT1pLlR5cGUuU1RSSU5HP3RoaXMucGFydG5lcklkPWUuTGIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuU1RSSU5HP3RoaXMuY3VzdG9tZXJJZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5DdXN0b21lcktleS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7ZS5IYihcIkN1c3RvbWVyS2V5XCIpLG51bGwhPT10aGlzLnBhcnRuZXJJZCYmdm9pZCAwIT09dGhpcy5wYXJ0bmVySWQmJihlLnhiKFwicGFydG5lcklkXCIsaS5UeXBlLlNUUklORywxKSxlLnFiKHRoaXMucGFydG5lcklkKSxlLkdiKCkpLG51bGwhPT10aGlzLmN1c3RvbWVySWQmJnZvaWQgMCE9PXRoaXMuY3VzdG9tZXJJZCYmKGUueGIoXCJjdXN0b21lcklkXCIsaS5UeXBlLlNUUklORywyKSxlLnFiKHRoaXMuY3VzdG9tZXJJZCksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJBc1F1ZXJ5PWZ1bmN0aW9uKGUpe3RoaXMuYXNUeXBlPW51bGwsdGhpcy5hc249bnVsbCxlJiYodm9pZCAwIT09ZS5hc1R5cGUmJih0aGlzLmFzVHlwZT1lLmFzVHlwZSksdm9pZCAwIT09ZS5hc24mJih0aGlzLmFzbj1lLmFzbikpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJBc1F1ZXJ5LnByb3RvdHlwZT17fSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJBc1F1ZXJ5LnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5JMzI/dGhpcy5hc1R5cGU9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyOnI9PWkuVHlwZS5JMzI/dGhpcy5hc249ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlckFzUXVlcnkucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJUcmFja2VyQXNRdWVyeVwiKSxudWxsIT09dGhpcy5hc1R5cGUmJnZvaWQgMCE9PXRoaXMuYXNUeXBlJiYoZS54YihcImFzVHlwZVwiLGkuVHlwZS5JMzIsMSksZS5WYih0aGlzLmFzVHlwZSksZS5HYigpKSxudWxsIT09dGhpcy5hc24mJnZvaWQgMCE9PXRoaXMuYXNuJiYoZS54YihcImFzblwiLGkuVHlwZS5JMzIsMiksZS5WYih0aGlzLmFzbiksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJCaXRyYXRlUXVlcnk9ZnVuY3Rpb24oZSl7dGhpcy5iaXRyYXRlPW51bGwsdGhpcy5hc249bnVsbCx0aGlzLnN0cmVhbVN0YXRlPW51bGwsZSYmKHZvaWQgMCE9PWUuYml0cmF0ZSYmKHRoaXMuYml0cmF0ZT1lLmJpdHJhdGUpLHZvaWQgMCE9PWUuYXNuJiYodGhpcy5hc249ZS5hc24pLHZvaWQgMCE9PWUuc3RyZWFtU3RhdGUmJih0aGlzLnN0cmVhbVN0YXRlPWUuc3RyZWFtU3RhdGUpKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyQml0cmF0ZVF1ZXJ5LnByb3RvdHlwZT17fSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJCaXRyYXRlUXVlcnkucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLkkzMj90aGlzLmJpdHJhdGU9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyOnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMuYXNuPW5ldyBoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJBc1F1ZXJ5LHRoaXMuYXNuLnJlYWQoZSkpOmUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5JMzI/dGhpcy5zdHJlYW1TdGF0ZT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyQml0cmF0ZVF1ZXJ5LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXtlLkhiKFwiVHJhY2tlckJpdHJhdGVRdWVyeVwiKSxudWxsIT09dGhpcy5iaXRyYXRlJiZ2b2lkIDAhPT10aGlzLmJpdHJhdGUmJihlLnhiKFwiYml0cmF0ZVwiLGkuVHlwZS5JMzIsMSksZS5WYih0aGlzLmJpdHJhdGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuYXNuJiZ2b2lkIDAhPT10aGlzLmFzbiYmKGUueGIoXCJhc25cIixpLlR5cGUuU1RSVUNULDIpLHRoaXMuYXNuLndyaXRlKGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuc3RyZWFtU3RhdGUmJnZvaWQgMCE9PXRoaXMuc3RyZWFtU3RhdGUmJihlLnhiKFwic3RyZWFtU3RhdGVcIixpLlR5cGUuSTMyLDMpLGUuVmIodGhpcy5zdHJlYW1TdGF0ZSksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJSYW5rUXVlcnk9ZnVuY3Rpb24oZSl7dGhpcy5yYW5rVHlwZT1udWxsLHRoaXMuYXNRdWVyeT1udWxsLGUmJih2b2lkIDAhPT1lLnJhbmtUeXBlJiYodGhpcy5yYW5rVHlwZT1lLnJhbmtUeXBlKSx2b2lkIDAhPT1lLmFzUXVlcnkmJih0aGlzLmFzUXVlcnk9ZS5hc1F1ZXJ5KSl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclJhbmtRdWVyeS5wcm90b3R5cGU9e30saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUmFua1F1ZXJ5LnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5JMzI/dGhpcy5yYW5rVHlwZT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5hc1F1ZXJ5PW5ldyBoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJBc1F1ZXJ5LHRoaXMuYXNRdWVyeS5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2RlZmF1bHQ6ZS5NYihyKX1lLlViKCl9ZS5CYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJSYW5rUXVlcnkucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJUcmFja2VyUmFua1F1ZXJ5XCIpLG51bGwhPT10aGlzLnJhbmtUeXBlJiZ2b2lkIDAhPT10aGlzLnJhbmtUeXBlJiYoZS54YihcInJhbmtUeXBlXCIsaS5UeXBlLkkzMiwxKSxlLlZiKHRoaXMucmFua1R5cGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuYXNRdWVyeSYmdm9pZCAwIT09dGhpcy5hc1F1ZXJ5JiYoZS54YihcImFzUXVlcnlcIixpLlR5cGUuU1RSVUNULDIpLHRoaXMuYXNRdWVyeS53cml0ZShlKSxlLkdiKCkpLGUuamIoKSxlLlFiKCl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclF1ZXJ5PWZ1bmN0aW9uKGUpe3RoaXMucmFuZG9tPW51bGwsdGhpcy5hc25zPW51bGwsdGhpcy53YXRjaGVycz1udWxsLHRoaXMuc3RyZWFtZXJzPW51bGwsdGhpcy5yYW5raW5ncz1udWxsLGUmJih2b2lkIDAhPT1lLnJhbmRvbSYmKHRoaXMucmFuZG9tPWUucmFuZG9tKSx2b2lkIDAhPT1lLmFzbnMmJih0aGlzLmFzbnM9ZS5hc25zKSx2b2lkIDAhPT1lLndhdGNoZXJzJiYodGhpcy53YXRjaGVycz1lLndhdGNoZXJzKSx2b2lkIDAhPT1lLnN0cmVhbWVycyYmKHRoaXMuc3RyZWFtZXJzPWUuc3RyZWFtZXJzKSx2b2lkIDAhPT1lLnJhbmtpbmdzJiYodGhpcy5yYW5raW5ncz1lLnJhbmtpbmdzKSl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclF1ZXJ5LnByb3RvdHlwZT17fSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJRdWVyeS5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihlKXtmb3IoZS5yXygpOzspe3ZhciB0PWUua2IoKSxyPSh0LmZuYW1lLHQuZnR5cGUpLG49dC5maWQ7aWYocj09aS5UeXBlLlNUT1ApYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTpyPT1pLlR5cGUuSTMyP3RoaXMucmFuZG9tPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjppZihyPT1pLlR5cGUuTUFQKXt2YXIgcyxvPTA7dGhpcy5hc25zPXt9O3M9ZS5pXygpLHMubl8scy5zXyxvPXMuc2l6ZTtmb3IodmFyIGE9MDthPG87KythKXthPjAmJmUuSkMubGVuZ3RoPmUuemJbZS56Yi5sZW5ndGgtMV0rMSYmZS5KQy5wb3AoKTt2YXIgaD1udWxsLGM9bnVsbDtoPW5ldyBoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJBc1F1ZXJ5LGgucmVhZChlKSxjPWUuRmIoKS52YWx1ZSx0aGlzLmFzbnNbaF09Y31lLm9fKCl9ZWxzZSBlLk1iKHIpO2JyZWFrO2Nhc2UgMzppZihyPT1pLlR5cGUuTUFQKXt2YXIgdSxsPTA7dGhpcy53YXRjaGVycz17fTt1PWUuaV8oKSx1Lm5fLHUuc18sbD11LnNpemU7Zm9yKHZhciBwPTA7cDxsOysrcCl7cD4wJiZlLkpDLmxlbmd0aD5lLnpiW2UuemIubGVuZ3RoLTFdKzEmJmUuSkMucG9wKCk7dmFyIGQ9bnVsbCxmPW51bGw7ZD1uZXcgaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyQml0cmF0ZVF1ZXJ5LGQucmVhZChlKSxmPWUuRmIoKS52YWx1ZSx0aGlzLndhdGNoZXJzW2RdPWZ9ZS5vXygpfWVsc2UgZS5NYihyKTticmVhaztjYXNlIDQ6aWYocj09aS5UeXBlLk1BUCl7dmFyIGcsRT0wO3RoaXMuc3RyZWFtZXJzPXt9O2c9ZS5pXygpLGcubl8sZy5zXyxFPWcuc2l6ZTtmb3IodmFyIHY9MDt2PEU7Kyt2KXt2PjAmJmUuSkMubGVuZ3RoPmUuemJbZS56Yi5sZW5ndGgtMV0rMSYmZS5KQy5wb3AoKTt2YXIgeT1udWxsLFQ9bnVsbDt5PW5ldyBoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJCaXRyYXRlUXVlcnkseS5yZWFkKGUpLFQ9ZS5GYigpLnZhbHVlLHRoaXMuc3RyZWFtZXJzW3ldPVR9ZS5vXygpfWVsc2UgZS5NYihyKTticmVhaztjYXNlIDU6aWYocj09aS5UeXBlLkxJU1Qpe3ZhciBtLEk9MDt0aGlzLnJhbmtpbmdzPVtdO209ZS5hXygpLG0uaF8sST1tLnNpemU7Zm9yKHZhciBTPTA7UzxJOysrUyl7dmFyIFI9bnVsbDtSPWUuRmIoKS52YWx1ZSx0aGlzLnJhbmtpbmdzLnB1c2goUil9ZS5jXygpfWVsc2UgZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUXVlcnkucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2lmKGUuSGIoXCJUcmFja2VyUXVlcnlcIiksbnVsbCE9PXRoaXMucmFuZG9tJiZ2b2lkIDAhPT10aGlzLnJhbmRvbSYmKGUueGIoXCJyYW5kb21cIixpLlR5cGUuSTMyLDEpLGUuVmIodGhpcy5yYW5kb20pLGUuR2IoKSksbnVsbCE9PXRoaXMuYXNucyYmdm9pZCAwIT09dGhpcy5hc25zKXtlLnhiKFwiYXNuc1wiLGkuVHlwZS5NQVAsMiksZS5VQyhpLlR5cGUuU1RSVUNULGkuVHlwZS5JMzIsaS5FYih0aGlzLmFzbnMpKTtmb3IodmFyIHQ9MDt0PHRoaXMuYXNucy5sZW5ndGg7dCsrKXt2YXIgcj10aGlzLmFzbnNbdF0sbj1yLmtleSxzPXIudmFsdWU7bi53cml0ZShlKSxlLlZiKHMpfWUuQkMoKSxlLkdiKCl9aWYobnVsbCE9PXRoaXMud2F0Y2hlcnMmJnZvaWQgMCE9PXRoaXMud2F0Y2hlcnMpe2UueGIoXCJ3YXRjaGVyc1wiLGkuVHlwZS5NQVAsMyksZS5VQyhpLlR5cGUuU1RSVUNULGkuVHlwZS5JMzIsaS5FYih0aGlzLndhdGNoZXJzKSk7Zm9yKHZhciB0PTA7dDx0aGlzLndhdGNoZXJzLmxlbmd0aDt0Kyspe3ZhciByPXRoaXMud2F0Y2hlcnNbdF0sbz1yLmtleSxhPXIudmFsdWU7by53cml0ZShlKSxlLlZiKGEpfWUuQkMoKSxlLkdiKCl9aWYobnVsbCE9PXRoaXMuc3RyZWFtZXJzJiZ2b2lkIDAhPT10aGlzLnN0cmVhbWVycyl7ZS54YihcInN0cmVhbWVyc1wiLGkuVHlwZS5NQVAsNCksZS5VQyhpLlR5cGUuU1RSVUNULGkuVHlwZS5JMzIsaS5FYih0aGlzLnN0cmVhbWVycykpO2Zvcih2YXIgdD0wO3Q8dGhpcy5zdHJlYW1lcnMubGVuZ3RoO3QrKyl7dmFyIHI9dGhpcy5zdHJlYW1lcnNbdF0saD1yLmtleSxjPXIudmFsdWU7aC53cml0ZShlKSxlLlZiKGMpfWUuQkMoKSxlLkdiKCl9aWYobnVsbCE9PXRoaXMucmFua2luZ3MmJnZvaWQgMCE9PXRoaXMucmFua2luZ3Mpe2UueGIoXCJyYW5raW5nc1wiLGkuVHlwZS5MSVNULDUpLGUuSEMoaS5UeXBlLkkzMix0aGlzLnJhbmtpbmdzLmxlbmd0aCk7Zm9yKHZhciB1IGluIHRoaXMucmFua2luZ3MpdGhpcy5yYW5raW5ncy5oYXNPd25Qcm9wZXJ0eSh1KSYmKHU9dGhpcy5yYW5raW5nc1t1XSxlLlZiKHUpKTtlLnhDKCksZS5HYigpfWUuamIoKSxlLlFiKCl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclBlZXJSYW5raW5nS2V5PWZ1bmN0aW9uKGUpe3RoaXMucmFua1R5cGU9bnVsbCx0aGlzLmludGVybmFsQXM9bnVsbCx0aGlzLmV4dGVybmFsQXM9bnVsbCxlJiYodm9pZCAwIT09ZS5yYW5rVHlwZSYmKHRoaXMucmFua1R5cGU9ZS5yYW5rVHlwZSksdm9pZCAwIT09ZS5pbnRlcm5hbEFzJiYodGhpcy5pbnRlcm5hbEFzPWUuaW50ZXJuYWxBcyksdm9pZCAwIT09ZS5leHRlcm5hbEFzJiYodGhpcy5leHRlcm5hbEFzPWUuZXh0ZXJuYWxBcykpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJQZWVyUmFua2luZ0tleS5wcm90b3R5cGU9e30saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUGVlclJhbmtpbmdLZXkucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLkkzMj90aGlzLnJhbmtUeXBlPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuSTMyP3RoaXMuaW50ZXJuYWxBcz1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM6cj09aS5UeXBlLkkzMj90aGlzLmV4dGVybmFsQXM9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclBlZXJSYW5raW5nS2V5LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXtlLkhiKFwiVHJhY2tlclBlZXJSYW5raW5nS2V5XCIpLG51bGwhPT10aGlzLnJhbmtUeXBlJiZ2b2lkIDAhPT10aGlzLnJhbmtUeXBlJiYoZS54YihcInJhbmtUeXBlXCIsaS5UeXBlLkkzMiwxKSxlLlZiKHRoaXMucmFua1R5cGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuaW50ZXJuYWxBcyYmdm9pZCAwIT09dGhpcy5pbnRlcm5hbEFzJiYoZS54YihcImludGVybmFsQXNcIixpLlR5cGUuSTMyLDIpLGUuVmIodGhpcy5pbnRlcm5hbEFzKSxlLkdiKCkpLG51bGwhPT10aGlzLmV4dGVybmFsQXMmJnZvaWQgMCE9PXRoaXMuZXh0ZXJuYWxBcyYmKGUueGIoXCJleHRlcm5hbEFzXCIsaS5UeXBlLkkzMiwzKSxlLlZiKHRoaXMuZXh0ZXJuYWxBcyksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJQZWVyUmFua2luZz1mdW5jdGlvbihlKXt0aGlzLmtleT1udWxsLHRoaXMucmFua2luZz1udWxsLHRoaXMuZ3JvdXBTaXplPW51bGwsdGhpcy5jdW11bGF0ZWRSYW5rVmFsdWU9bnVsbCx0aGlzLnRvdGFsT2ZSYW5rVmFsdWVzPW51bGwsZSYmKHZvaWQgMCE9PWUua2V5JiYodGhpcy5rZXk9ZS5rZXkpLHZvaWQgMCE9PWUucmFua2luZyYmKHRoaXMucmFua2luZz1lLnJhbmtpbmcpLHZvaWQgMCE9PWUuZ3JvdXBTaXplJiYodGhpcy5ncm91cFNpemU9ZS5ncm91cFNpemUpLHZvaWQgMCE9PWUuY3VtdWxhdGVkUmFua1ZhbHVlJiYodGhpcy5jdW11bGF0ZWRSYW5rVmFsdWU9ZS5jdW11bGF0ZWRSYW5rVmFsdWUpLHZvaWQgMCE9PWUudG90YWxPZlJhbmtWYWx1ZXMmJih0aGlzLnRvdGFsT2ZSYW5rVmFsdWVzPWUudG90YWxPZlJhbmtWYWx1ZXMpKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUGVlclJhbmtpbmcucHJvdG90eXBlPXt9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclBlZXJSYW5raW5nLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMua2V5PW5ldyBoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJQZWVyUmFua2luZ0tleSx0aGlzLmtleS5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuSTMyP3RoaXMucmFua2luZz1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM6cj09aS5UeXBlLkkzMj90aGlzLmdyb3VwU2l6ZT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDQ6cj09aS5UeXBlLkRPVUJMRT90aGlzLmN1bXVsYXRlZFJhbmtWYWx1ZT1lLkVfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDU6cj09aS5UeXBlLkRPVUJMRT90aGlzLnRvdGFsT2ZSYW5rVmFsdWVzPWUuRV8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2RlZmF1bHQ6ZS5NYihyKX1lLlViKCl9ZS5CYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJQZWVyUmFua2luZy5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7ZS5IYihcIlRyYWNrZXJQZWVyUmFua2luZ1wiKSxudWxsIT09dGhpcy5rZXkmJnZvaWQgMCE9PXRoaXMua2V5JiYoZS54YihcImtleVwiLGkuVHlwZS5TVFJVQ1QsMSksdGhpcy5rZXkud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5yYW5raW5nJiZ2b2lkIDAhPT10aGlzLnJhbmtpbmcmJihlLnhiKFwicmFua2luZ1wiLGkuVHlwZS5JMzIsMiksZS5WYih0aGlzLnJhbmtpbmcpLGUuR2IoKSksbnVsbCE9PXRoaXMuZ3JvdXBTaXplJiZ2b2lkIDAhPT10aGlzLmdyb3VwU2l6ZSYmKGUueGIoXCJncm91cFNpemVcIixpLlR5cGUuSTMyLDMpLGUuVmIodGhpcy5ncm91cFNpemUpLGUuR2IoKSksbnVsbCE9PXRoaXMuY3VtdWxhdGVkUmFua1ZhbHVlJiZ2b2lkIDAhPT10aGlzLmN1bXVsYXRlZFJhbmtWYWx1ZSYmKGUueGIoXCJjdW11bGF0ZWRSYW5rVmFsdWVcIixpLlR5cGUuRE9VQkxFLDQpLGUuWUModGhpcy5jdW11bGF0ZWRSYW5rVmFsdWUpLGUuR2IoKSksbnVsbCE9PXRoaXMudG90YWxPZlJhbmtWYWx1ZXMmJnZvaWQgMCE9PXRoaXMudG90YWxPZlJhbmtWYWx1ZXMmJihlLnhiKFwidG90YWxPZlJhbmtWYWx1ZXNcIixpLlR5cGUuRE9VQkxFLDUpLGUuWUModGhpcy50b3RhbE9mUmFua1ZhbHVlcyksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJSZXF1ZXN0PWZ1bmN0aW9uKGUpe3RoaXMuaW5mbz1udWxsLHRoaXMuY29udGVudElkPW51bGwsdGhpcy5xdWVyeT1udWxsLHRoaXMuc3RyZWFtVHlwZT1udWxsLHRoaXMuc2Vzc2lvbklkPW51bGwsdGhpcy5jdXN0b21lcktleT1udWxsLGUmJih2b2lkIDAhPT1lLmluZm8mJih0aGlzLmluZm89ZS5pbmZvKSx2b2lkIDAhPT1lLmNvbnRlbnRJZCYmKHRoaXMuY29udGVudElkPWUuY29udGVudElkKSx2b2lkIDAhPT1lLnF1ZXJ5JiYodGhpcy5xdWVyeT1lLnF1ZXJ5KSx2b2lkIDAhPT1lLnN0cmVhbVR5cGUmJih0aGlzLnN0cmVhbVR5cGU9ZS5zdHJlYW1UeXBlKSx2b2lkIDAhPT1lLnNlc3Npb25JZCYmKHRoaXMuc2Vzc2lvbklkPWUuc2Vzc2lvbklkKSx2b2lkIDAhPT1lLmN1c3RvbWVyS2V5JiYodGhpcy5jdXN0b21lcktleT1lLmN1c3RvbWVyS2V5KSl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclJlcXVlc3QucHJvdG90eXBlPXt9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclJlcXVlc3QucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5pbmZvPW5ldyBoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJQZWVySW5mbyx0aGlzLmluZm8ucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDI6cj09aS5UeXBlLlNUUklORz90aGlzLmNvbnRlbnRJZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5xdWVyeT1uZXcgaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUXVlcnksdGhpcy5xdWVyeS5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgNDpyPT1pLlR5cGUuSTMyP3RoaXMuc3RyZWFtVHlwZT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDU6cj09aS5UeXBlLlNUUklORz90aGlzLnNlc3Npb25JZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDY6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5jdXN0b21lcktleT1uZXcgaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5DdXN0b21lcktleSx0aGlzLmN1c3RvbWVyS2V5LnJlYWQoZSkpOmUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclJlcXVlc3QucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJUcmFja2VyUmVxdWVzdFwiKSxudWxsIT09dGhpcy5pbmZvJiZ2b2lkIDAhPT10aGlzLmluZm8mJihlLnhiKFwiaW5mb1wiLGkuVHlwZS5TVFJVQ1QsMSksdGhpcy5pbmZvLndyaXRlKGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuY29udGVudElkJiZ2b2lkIDAhPT10aGlzLmNvbnRlbnRJZCYmKGUueGIoXCJjb250ZW50SWRcIixpLlR5cGUuU1RSSU5HLDIpLGUucWIodGhpcy5jb250ZW50SWQpLGUuR2IoKSksbnVsbCE9PXRoaXMucXVlcnkmJnZvaWQgMCE9PXRoaXMucXVlcnkmJihlLnhiKFwicXVlcnlcIixpLlR5cGUuU1RSVUNULDMpLHRoaXMucXVlcnkud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5zdHJlYW1UeXBlJiZ2b2lkIDAhPT10aGlzLnN0cmVhbVR5cGUmJihlLnhiKFwic3RyZWFtVHlwZVwiLGkuVHlwZS5JMzIsNCksZS5WYih0aGlzLnN0cmVhbVR5cGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuc2Vzc2lvbklkJiZ2b2lkIDAhPT10aGlzLnNlc3Npb25JZCYmKGUueGIoXCJzZXNzaW9uSWRcIixpLlR5cGUuU1RSSU5HLDUpLGUucWIodGhpcy5zZXNzaW9uSWQpLGUuR2IoKSksbnVsbCE9PXRoaXMuY3VzdG9tZXJLZXkmJnZvaWQgMCE9PXRoaXMuY3VzdG9tZXJLZXkmJihlLnhiKFwiY3VzdG9tZXJLZXlcIixpLlR5cGUuU1RSVUNULDYpLHRoaXMuY3VzdG9tZXJLZXkud3JpdGUoZSksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJSZXNwb25zZT1mdW5jdGlvbihlKXt0aGlzLmluZm9zPW51bGwsdGhpcy5yYW5raW5ncz1udWxsLHRoaXMucGVlckluZm89bnVsbCx0aGlzLnNlc3Npb25JZD1udWxsLGUmJih2b2lkIDAhPT1lLmluZm9zJiYodGhpcy5pbmZvcz1lLmluZm9zKSx2b2lkIDAhPT1lLnJhbmtpbmdzJiYodGhpcy5yYW5raW5ncz1lLnJhbmtpbmdzKSx2b2lkIDAhPT1lLnBlZXJJbmZvJiYodGhpcy5wZWVySW5mbz1lLnBlZXJJbmZvKSx2b2lkIDAhPT1lLnNlc3Npb25JZCYmKHRoaXMuc2Vzc2lvbklkPWUuc2Vzc2lvbklkKSl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclJlc3BvbnNlLnByb3RvdHlwZT17fSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJSZXNwb25zZS5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihlKXtmb3IoZS5yXygpOzspe3ZhciB0PWUua2IoKSxyPSh0LmZuYW1lLHQuZnR5cGUpLG49dC5maWQ7aWYocj09aS5UeXBlLlNUT1ApYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTppZihyPT1pLlR5cGUuTElTVCl7dmFyIHMsbz0wO3RoaXMuaW5mb3M9W107cz1lLmFfKCkscy5oXyxvPXMuc2l6ZTtmb3IodmFyIGE9MDthPG87KythKXt2YXIgaD1udWxsO2g9bmV3IGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclBlZXJJbmZvLGgucmVhZChlKSx0aGlzLmluZm9zLnB1c2goaCl9ZS5jXygpfWVsc2UgZS5NYihyKTticmVhaztjYXNlIDI6aWYocj09aS5UeXBlLkxJU1Qpe3ZhciBjLHU9MDt0aGlzLnJhbmtpbmdzPVtdO2M9ZS5hXygpLGMuaF8sdT1jLnNpemU7Zm9yKHZhciBsPTA7bDx1OysrbCl7dmFyIHA9bnVsbDtwPW5ldyBoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJQZWVyUmFua2luZyxwLnJlYWQoZSksdGhpcy5yYW5raW5ncy5wdXNoKHApfWUuY18oKX1lbHNlIGUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMucGVlckluZm89bmV3IGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclBlZXJJbmZvLHRoaXMucGVlckluZm8ucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDQ6cj09aS5UeXBlLlNUUklORz90aGlzLnNlc3Npb25JZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUmVzcG9uc2UucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2lmKGUuSGIoXCJUcmFja2VyUmVzcG9uc2VcIiksbnVsbCE9PXRoaXMuaW5mb3MmJnZvaWQgMCE9PXRoaXMuaW5mb3Mpe2UueGIoXCJpbmZvc1wiLGkuVHlwZS5MSVNULDEpLGUuSEMoaS5UeXBlLlNUUlVDVCx0aGlzLmluZm9zLmxlbmd0aCk7Zm9yKHZhciB0IGluIHRoaXMuaW5mb3MpdGhpcy5pbmZvcy5oYXNPd25Qcm9wZXJ0eSh0KSYmKHQ9dGhpcy5pbmZvc1t0XSx0LndyaXRlKGUpKTtlLnhDKCksZS5HYigpfWlmKG51bGwhPT10aGlzLnJhbmtpbmdzJiZ2b2lkIDAhPT10aGlzLnJhbmtpbmdzKXtlLnhiKFwicmFua2luZ3NcIixpLlR5cGUuTElTVCwyKSxlLkhDKGkuVHlwZS5TVFJVQ1QsdGhpcy5yYW5raW5ncy5sZW5ndGgpO2Zvcih2YXIgciBpbiB0aGlzLnJhbmtpbmdzKXRoaXMucmFua2luZ3MuaGFzT3duUHJvcGVydHkocikmJihyPXRoaXMucmFua2luZ3Nbcl0sci53cml0ZShlKSk7ZS54QygpLGUuR2IoKX1udWxsIT09dGhpcy5wZWVySW5mbyYmdm9pZCAwIT09dGhpcy5wZWVySW5mbyYmKGUueGIoXCJwZWVySW5mb1wiLGkuVHlwZS5TVFJVQ1QsMyksdGhpcy5wZWVySW5mby53cml0ZShlKSxlLkdiKCkpLG51bGwhPT10aGlzLnNlc3Npb25JZCYmdm9pZCAwIT09dGhpcy5zZXNzaW9uSWQmJihlLnhiKFwic2Vzc2lvbklkXCIsaS5UeXBlLlNUUklORyw0KSxlLnFiKHRoaXMuc2Vzc2lvbklkKSxlLkdiKCkpLGUuamIoKSxlLlFiKCl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuUEY9ZnVuY3Rpb24oZSl7dGhpcy50aW1lc3RhbXA9bnVsbCx0aGlzLmNvbnRlbnRJZD1udWxsLHRoaXMuYXNUeXBlPW51bGwsdGhpcy5hc249bnVsbCx0aGlzLmJpdHJhdGU9bnVsbCx0aGlzLnN0cmVhbVN0YXRlPW51bGwsdGhpcy5yYW5rVHlwZT1udWxsLGUmJih2b2lkIDAhPT1lLnRpbWVzdGFtcCYmKHRoaXMudGltZXN0YW1wPWUudGltZXN0YW1wKSx2b2lkIDAhPT1lLmNvbnRlbnRJZCYmKHRoaXMuY29udGVudElkPWUuY29udGVudElkKSx2b2lkIDAhPT1lLmFzVHlwZSYmKHRoaXMuYXNUeXBlPWUuYXNUeXBlKSx2b2lkIDAhPT1lLmFzbiYmKHRoaXMuYXNuPWUuYXNuKSx2b2lkIDAhPT1lLmJpdHJhdGUmJih0aGlzLmJpdHJhdGU9ZS5iaXRyYXRlKSx2b2lkIDAhPT1lLnN0cmVhbVN0YXRlJiYodGhpcy5zdHJlYW1TdGF0ZT1lLnN0cmVhbVN0YXRlKSx2b2lkIDAhPT1lLnJhbmtUeXBlJiYodGhpcy5yYW5rVHlwZT1lLnJhbmtUeXBlKSl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuUEYucHJvdG90eXBlPXt9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuUEYucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLkkzMj90aGlzLnRpbWVzdGFtcD1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI6cj09aS5UeXBlLlNUUklORz90aGlzLmNvbnRlbnRJZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM6cj09aS5UeXBlLkkzMj90aGlzLmFzVHlwZT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDQ6cj09aS5UeXBlLkkzMj90aGlzLmFzbj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDU6cj09aS5UeXBlLkkzMj90aGlzLmJpdHJhdGU9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA2OnI9PWkuVHlwZS5JMzI/dGhpcy5zdHJlYW1TdGF0ZT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDc6cj09aS5UeXBlLkkzMj90aGlzLnJhbmtUeXBlPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2RlZmF1bHQ6ZS5NYihyKX1lLlViKCl9ZS5CYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlBGLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXtlLkhiKFwiVHJhY2tlclN0b3JlSW5kZXhLZXlcIiksbnVsbCE9PXRoaXMudGltZXN0YW1wJiZ2b2lkIDAhPT10aGlzLnRpbWVzdGFtcCYmKGUueGIoXCJ0aW1lc3RhbXBcIixpLlR5cGUuSTMyLDEpLGUuVmIodGhpcy50aW1lc3RhbXApLGUuR2IoKSksbnVsbCE9PXRoaXMuY29udGVudElkJiZ2b2lkIDAhPT10aGlzLmNvbnRlbnRJZCYmKGUueGIoXCJjb250ZW50SWRcIixpLlR5cGUuU1RSSU5HLDIpLGUucWIodGhpcy5jb250ZW50SWQpLGUuR2IoKSksbnVsbCE9PXRoaXMuYXNUeXBlJiZ2b2lkIDAhPT10aGlzLmFzVHlwZSYmKGUueGIoXCJhc1R5cGVcIixpLlR5cGUuSTMyLDMpLGUuVmIodGhpcy5hc1R5cGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuYXNuJiZ2b2lkIDAhPT10aGlzLmFzbiYmKGUueGIoXCJhc25cIixpLlR5cGUuSTMyLDQpLGUuVmIodGhpcy5hc24pLGUuR2IoKSksbnVsbCE9PXRoaXMuYml0cmF0ZSYmdm9pZCAwIT09dGhpcy5iaXRyYXRlJiYoZS54YihcImJpdHJhdGVcIixpLlR5cGUuSTMyLDUpLGUuVmIodGhpcy5iaXRyYXRlKSxlLkdiKCkpLG51bGwhPT10aGlzLnN0cmVhbVN0YXRlJiZ2b2lkIDAhPT10aGlzLnN0cmVhbVN0YXRlJiYoZS54YihcInN0cmVhbVN0YXRlXCIsaS5UeXBlLkkzMiw2KSxlLlZiKHRoaXMuc3RyZWFtU3RhdGUpLGUuR2IoKSksbnVsbCE9PXRoaXMucmFua1R5cGUmJnZvaWQgMCE9PXRoaXMucmFua1R5cGUmJihlLnhiKFwicmFua1R5cGVcIixpLlR5cGUuSTMyLDcpLGUuVmIodGhpcy5yYW5rVHlwZSksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLkFGPWZ1bmN0aW9uKGUpe3RoaXMuZ3VpZD1udWxsLHRoaXMuT0Y9bnVsbCx0aGlzLmtleT1udWxsLGUmJih2b2lkIDAhPT1lLmd1aWQmJih0aGlzLmd1aWQ9ZS5ndWlkKSx2b2lkIDAhPT1lLk9GJiYodGhpcy5PRj1lLk9GKSx2b2lkIDAhPT1lLmtleSYmKHRoaXMua2V5PWUua2V5KSl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuQUYucHJvdG90eXBlPXt9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuQUYucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLlNUUklORz90aGlzLmd1aWQ9ZS52XygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyOnI9PWkuVHlwZS5ET1VCTEU/dGhpcy5PRj1lLkVfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5rZXk9bmV3IGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclBlZXJSYW5raW5nS2V5LHRoaXMua2V5LnJlYWQoZSkpOmUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuQUYucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJUcmFja2VyU3RvcmVSYW5rUGVlclwiKSxudWxsIT09dGhpcy5ndWlkJiZ2b2lkIDAhPT10aGlzLmd1aWQmJihlLnhiKFwiZ3VpZFwiLGkuVHlwZS5TVFJJTkcsMSksZS5XQyh0aGlzLmd1aWQpLGUuR2IoKSksbnVsbCE9PXRoaXMuT0YmJnZvaWQgMCE9PXRoaXMuT0YmJihlLnhiKFwicmFua1wiLGkuVHlwZS5ET1VCTEUsMiksZS5ZQyh0aGlzLk9GKSxlLkdiKCkpLG51bGwhPT10aGlzLmtleSYmdm9pZCAwIT09dGhpcy5rZXkmJihlLnhiKFwia2V5XCIsaS5UeXBlLlNUUlVDVCwzKSx0aGlzLmtleS53cml0ZShlKSxlLkdiKCkpLGUuamIoKSxlLlFiKCl9LGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuTkY9ZnVuY3Rpb24oZSl7dGhpcy50aW1lc3RhbXA9bnVsbCx0aGlzLnJlcXVlc3Q9bnVsbCxlJiYodm9pZCAwIT09ZS50aW1lc3RhbXAmJih0aGlzLnRpbWVzdGFtcD1lLnRpbWVzdGFtcCksdm9pZCAwIT09ZS5yZXF1ZXN0JiYodGhpcy5yZXF1ZXN0PWUucmVxdWVzdCkpfSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLk5GLnByb3RvdHlwZT17fSxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLk5GLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5JNjQ/dGhpcy50aW1lc3RhbXA9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyOnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMucmVxdWVzdD1uZXcgaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUmVxdWVzdCx0aGlzLnJlcXVlc3QucmVhZChlKSk6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5ORi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7ZS5IYihcIlRyYWNrZXJSZXF1ZXN0UXVldWVNZXNzYWdlXCIpLG51bGwhPT10aGlzLnRpbWVzdGFtcCYmdm9pZCAwIT09dGhpcy50aW1lc3RhbXAmJihlLnhiKFwidGltZXN0YW1wXCIsaS5UeXBlLkk2NCwxKSxlLktDKHRoaXMudGltZXN0YW1wKSxlLkdiKCkpLG51bGwhPT10aGlzLnJlcXVlc3QmJnZvaWQgMCE9PXRoaXMucmVxdWVzdCYmKGUueGIoXCJyZXF1ZXN0XCIsaS5UeXBlLlNUUlVDVCwyKSx0aGlzLnJlcXVlc3Qud3JpdGUoZSksZS5HYigpKSxlLmpiKCksZS5RYigpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpLG4pe3RoaXMuaWQ9ZSx0aGlzLmJpdHJhdGU9dCx0aGlzLmR1cmF0aW9uPXIsdGhpcy51cmk9aSx0aGlzLnlNPW59cmV0dXJuIGV9KCk7dC5ERj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigxKSxuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5zdGFydD1lLHRoaXMuZW5kPXQsdGhpcy50b3RhbD1yfXJldHVybiBlLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbmQtdGhpcy5zdGFydCsxO3JldHVybiBOdW1iZXIuaXNJbnRlZ2VyKGUpfHwoaS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIlNlZ21lbnQgU2l6ZSBpcyBhIEZsb2F0XCIse3NpemU6ZX0pLGU9TWF0aC5yb3VuZChlKSksMD09dGhpcy5lbmQmJjA9PXRoaXMuc3RhcnQ/MDplfSxlLnByb3RvdHlwZS5rRj1mdW5jdGlvbigpe3JldHVybiAwPT10aGlzLnN0YXJ0JiYodGhpcy5lbmQ9PXRoaXMudG90YWwtMXx8dGhpcy5lbmQ9PXRoaXMudG90YWwmJjA9PXRoaXMudG90YWwpfSxlLnByb3RvdHlwZS5MRj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuZD09dGhpcy50b3RhbC0xfHx0aGlzLmVuZD09dGhpcy50b3RhbCYmMD09dGhpcy50b3RhbH0sZS5wcm90b3R5cGUuTUY9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhcnQ8PXRoaXMuc3RhcnQmJnRoaXMuc3RhcnQ8PWUuZW5kfSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiUltTPVwiK3RoaXMuc3RhcnQrXCIsRT1cIit0aGlzLmVuZCtcIixUPVwiK3RoaXMudG90YWwrXCJdXCJ9LGV9KCk7dC5GRj1uO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5VRj1mdW5jdGlvbihlKXtyZXR1cm4gZS5zcGxpdChcIi1cIil9LGUuQkY9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdChcIj1cIiw0KSxyPXRbMV0uc3Vic3RyKDAsdFsxXS5pbmRleE9mKFwiLFwiKSksaT10WzJdLnN1YnN0cigwLHRbMl0uaW5kZXhPZihcIixcIikpLHM9dFszXS5zdWJzdHIoMCx0WzNdLmluZGV4T2YoXCJdXCIpKTtyZXR1cm4gbmV3IG4oK3IsK2ksK3MpfSxlfSgpO3QuSEY9c30sZnVuY3Rpb24oZSx0KXtlLmk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUueEZ8fChlLnFGPWZ1bmN0aW9uKCl7fSxlLkdGPVtdLGUuY2hpbGRyZW58fChlLmNoaWxkcmVuPVtdKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcImxvYWRlZFwiLHtwOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlLm99fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJpZFwiLHtwOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlLnN9fSksZS54Rj0xKSxlfX0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKGUsdCl7Zm9yKHZhciByPTAsaT1lLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgbj1lW2ldO1wiLlwiPT09bj9lLnNwbGljZShpLDEpOlwiLi5cIj09PW4/KGUuc3BsaWNlKGksMSkscisrKTpyJiYoZS5zcGxpY2UoaSwxKSxyLS0pfWlmKHQpZm9yKDtyLS07cillLnVuc2hpZnQoXCIuLlwiKTtyZXR1cm4gZX1mdW5jdGlvbiBpKGUsdCl7aWYoZS5maWx0ZXIpcmV0dXJuIGUuZmlsdGVyKHQpO2Zvcih2YXIgcj1bXSxpPTA7aTxlLmxlbmd0aDtpKyspdChlW2ldLGksZSkmJnIucHVzaChlW2ldKTtyZXR1cm4gcn12YXIgbj0vXihcXC8/fCkoW1xcc1xcU10qPykoKD86XFwuezEsMn18W15cXC9dKz98KShcXC5bXi5cXC9dKnwpKSg/OltcXC9dKikkLyxzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmV4ZWMoZSkuc2xpY2UoMSl9O3QucmVzb2x2ZT1mdW5jdGlvbigpe2Zvcih2YXIgZT1cIlwiLHQ9ITEsbj1hcmd1bWVudHMubGVuZ3RoLTE7bj49LTEmJiF0O24tLSl7dmFyIHM9bj49MD9hcmd1bWVudHNbbl06cHJvY2Vzcy5WRigpO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBzKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudHMgdG8gcGF0aC5yZXNvbHZlIG11c3QgYmUgc3RyaW5nc1wiKTtzJiYoZT1zK1wiL1wiK2UsdD1cIi9cIj09PXMuY2hhckF0KDApKX1yZXR1cm4gZT1yKGkoZS5zcGxpdChcIi9cIiksZnVuY3Rpb24oZSl7cmV0dXJuISFlfSksIXQpLmpvaW4oXCIvXCIpLCh0P1wiL1wiOlwiXCIpK2V8fFwiLlwifSx0Lm5vcm1hbGl6ZT1mdW5jdGlvbihlKXt2YXIgbj10LmpGKGUpLHM9XCIvXCI9PT1vKGUsLTEpO3JldHVybiBlPXIoaShlLnNwbGl0KFwiL1wiKSxmdW5jdGlvbihlKXtyZXR1cm4hIWV9KSwhbikuam9pbihcIi9cIiksZXx8bnx8KGU9XCIuXCIpLGUmJnMmJihlKz1cIi9cIiksKG4/XCIvXCI6XCJcIikrZX0sdC5qRj1mdW5jdGlvbihlKXtyZXR1cm5cIi9cIj09PWUuY2hhckF0KDApfSx0LmpvaW49ZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7cmV0dXJuIHQubm9ybWFsaXplKGkoZSxmdW5jdGlvbihlLHQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudHMgdG8gcGF0aC5qb2luIG11c3QgYmUgc3RyaW5nc1wiKTtyZXR1cm4gZX0pLmpvaW4oXCIvXCIpKX0sdC5RRj1mdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoZSl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aCYmXCJcIj09PWVbdF07dCsrKTtmb3IodmFyIHI9ZS5sZW5ndGgtMTtyPj0wJiZcIlwiPT09ZVtyXTtyLS0pO3JldHVybiB0PnI/W106ZS5zbGljZSh0LHItdCsxKX1lPXQucmVzb2x2ZShlKS5zdWJzdHIoMSkscj10LnJlc29sdmUocikuc3Vic3RyKDEpO2Zvcih2YXIgbj1pKGUuc3BsaXQoXCIvXCIpKSxzPWkoci5zcGxpdChcIi9cIikpLG89TWF0aC5taW4obi5sZW5ndGgscy5sZW5ndGgpLGE9byxoPTA7aDxvO2grKylpZihuW2hdIT09c1toXSl7YT1oO2JyZWFrfWZvcih2YXIgYz1bXSxoPWE7aDxuLmxlbmd0aDtoKyspYy5wdXNoKFwiLi5cIik7cmV0dXJuIGM9Yy5jb25jYXQocy5zbGljZShhKSksYy5qb2luKFwiL1wiKX0sdC5LRj1cIi9cIix0LllGPVwiOlwiLHQuV0Y9ZnVuY3Rpb24oZSl7dmFyIHQ9cyhlKSxyPXRbMF0saT10WzFdO3JldHVybiByfHxpPyhpJiYoaT1pLnN1YnN0cigwLGkubGVuZ3RoLTEpKSxyK2kpOlwiLlwifSx0LnpGPWZ1bmN0aW9uKGUsdCl7dmFyIHI9cyhlKVsyXTtyZXR1cm4gdCYmci5zdWJzdHIoLTEqdC5sZW5ndGgpPT09dCYmKHI9ci5zdWJzdHIoMCxyLmxlbmd0aC10Lmxlbmd0aCkpLHJ9LHQuSkY9ZnVuY3Rpb24oZSl7cmV0dXJuIHMoZSlbM119O3ZhciBvPVwiYlwiPT09XCJhYlwiLnN1YnN0cigtMSk/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLnN1YnN0cih0LHIpfTpmdW5jdGlvbihlLHQscil7cmV0dXJuIHQ8MCYmKHQ9ZS5sZW5ndGgrdCksZS5zdWJzdHIodCxyKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUsdCl7QXJyYXkucHJvdG90eXBlW2VdfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLGUse3ZhbHVlOnQsQWg6ITAsbDohMCxwOiExfSl9ZnVuY3Rpb24gbihlLHQscil7dGhpcy5OVD1lLHRoaXMuc3RhcnQ9bnVsbD09dD8wOnQsdGhpcy5lbmQ9cn12YXIgcz0ocig2NikscigxMikpLG89cig2NyksYT1yKDM3KTtlLmk9QXJyYXk7dmFyIGg9QXJyYXkucHJvdG90eXBlLnNwbGljZSxjPUFycmF5LnByb3RvdHlwZS5zbGljZTtBcnJheS5lbXB0eT1bXSxPYmplY3QuZnJlZXplJiZPYmplY3QuZnJlZXplKEFycmF5LmVtcHR5KSxBcnJheS5mcm9tPUFycmF5LmZyb218fGZ1bmN0aW9uKGUpe3ZhciB0PVtdO3JldHVybiB0LmFkZEVhY2goZSksdH0sQXJyYXkuTWM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MS8wLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG49ZVtpXTtlW2ldPW4udG9BcnJheSgpLG4ubGVuZ3RoPHImJihyPW4ubGVuZ3RoKX1mb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKylmb3IodmFyIG49ZVtpXSxzPTA7czxuLmxlbmd0aDtzKyspczxyJiZzIGluIG4mJih0W3NdPXRbc118fFtdLHRbc11baV09bltzXSk7cmV0dXJuIHR9LGkoXCJhZGRFYWNoXCIscy5wcm90b3R5cGUuYWRkRWFjaCksaShcImRlbGV0ZUVhY2hcIixzLnByb3RvdHlwZS5fYyksaShcInRvQXJyYXlcIixzLnByb3RvdHlwZS50b0FycmF5KSxpKFwidG9PYmplY3RcIixzLnByb3RvdHlwZS5QYyksaShcImFsbFwiLHMucHJvdG90eXBlLmFsbCksaShcImFueVwiLHMucHJvdG90eXBlLnVvKSxpKFwibWluXCIscy5wcm90b3R5cGUubWluKSxpKFwibWF4XCIscy5wcm90b3R5cGUubWF4KSxpKFwic3VtXCIscy5wcm90b3R5cGUuTmMpLGkoXCJhdmVyYWdlXCIscy5wcm90b3R5cGUuRGMpLGkoXCJvbmx5XCIscy5wcm90b3R5cGUub25seSksaShcImZsYXR0ZW5cIixzLnByb3RvdHlwZS5rYyksaShcInppcFwiLHMucHJvdG90eXBlLkxjKSxpKFwiZW51bWVyYXRlXCIscy5wcm90b3R5cGUuZW51bWVyYXRlKSxpKFwiZ3JvdXBcIixzLnByb3RvdHlwZS5ncm91cCksaShcInNvcnRlZFwiLHMucHJvdG90eXBlLkZjKSxpKFwicmV2ZXJzZWRcIixzLnByb3RvdHlwZS5yZXZlcnNlZCksaShcImNvbnN0cnVjdENsb25lXCIsZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHRoaXMuY29uc3RydWN0b3I7cmV0dXJuIHQuYWRkRWFjaChlKSx0fSksaShcImhhc1wiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuLTEhPT10aGlzLmZpbmQoZSx0KX0pLGkoXCJzZXRcIixmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzW2VdPXQsITB9KSxpKFwiYWRkXCIsZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaChlKSwhMH0pLGkoXCJkZWxldGVcIixmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZmluZChlLHQpO3JldHVybi0xIT09ciYmKHRoaXMuc3BsaWNlKHIsMSksITApfSksaShcImRlbGV0ZUFsbFwiLGZ1bmN0aW9uKGUsdCl7dD10fHx0aGlzLmxzfHxPYmplY3QuY3M7Zm9yKHZhciByPTAsaT0wO2k8dGhpcy5sZW5ndGg7KXQoZSx0aGlzW2ldKT8odGhpcy5xayhpLDEpLHIrKyk6aSsrO3JldHVybiByfSksaShcImZpbmRcIixmdW5jdGlvbihlLHQpe3Q9dHx8dGhpcy5sc3x8T2JqZWN0LmNzO2Zvcih2YXIgcj0wO3I8dGhpcy5sZW5ndGg7cisrKWlmKHIgaW4gdGhpcyYmdChlLHRoaXNbcl0pKXJldHVybiByO3JldHVybi0xfSksaShcImZpbmRMYXN0XCIsZnVuY3Rpb24oZSx0KXt0PXR8fHRoaXMubHN8fE9iamVjdC5jczt2YXIgcj10aGlzLmxlbmd0aDtkb3tpZigtLXIgaW4gdGhpcyYmdCh0aGlzW3JdLGUpKXJldHVybiByfXdoaWxlKHI+MCk7cmV0dXJuLTF9KSxpKFwic3dhcFwiLGZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuLHMsbyxhO2lmKGU+dGhpcy5sZW5ndGgmJih0aGlzLmxlbmd0aD1lKSx2b2lkIDAhPT1yKXtpZihpPVtlLHRdLEFycmF5LmlzQXJyYXkocil8fChyPWMuY2FsbChyKSkscz0wLChuPXIubGVuZ3RoKTwxZTMpe2ZvcihzO3M8bjtzKyspaVtzKzJdPXJbc107cmV0dXJuIGguYXBwbHkodGhpcyxpKX1mb3IoYT1oLmFwcGx5KHRoaXMsaSkscztzPG47KXtmb3IoaT1bZStzLDBdLG89MjtvPDEwMDImJnM8bjtvKysscysrKWlbb109cltzXTtoLmFwcGx5KHRoaXMsaSl9cmV0dXJuIGF9cmV0dXJuIHZvaWQgMCE9PXQ/aC5jYWxsKHRoaXMsZSx0KTp2b2lkIDAhPT1lP2guY2FsbCh0aGlzLGUpOltdfSksaShcInBlZWtcIixmdW5jdGlvbigpe3JldHVybiB0aGlzWzBdfSksaShcInBva2VcIixmdW5jdGlvbihlKXt0aGlzLmxlbmd0aD4wJiYodGhpc1swXT1lKX0pLGkoXCJwZWVrQmFja1wiLGZ1bmN0aW9uKCl7aWYodGhpcy5sZW5ndGg+MClyZXR1cm4gdGhpc1t0aGlzLmxlbmd0aC0xXX0pLGkoXCJwb2tlQmFja1wiLGZ1bmN0aW9uKGUpe3RoaXMubGVuZ3RoPjAmJih0aGlzW3RoaXMubGVuZ3RoLTFdPWUpfSksaShcIm9uZVwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHRoaXMpaWYoT2JqZWN0Lk9BKHRoaXMsZSkpcmV0dXJuIHRoaXNbZV19KSxBcnJheS5wcm90b3R5cGUuY2xlYXJ8fGkoXCJjbGVhclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoPTAsdGhpc30pLGkoXCJjb21wYXJlXCIsZnVuY3Rpb24oZSx0KXt0PXR8fE9iamVjdC5PYzt2YXIgcixpLG4scyxhO2lmKHRoaXM9PT1lKXJldHVybiAwO2lmKCFlfHwhQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gby5wcm90b3R5cGUuT2MuY2FsbCh0aGlzLGUsdCk7Zm9yKGk9TWF0aC5taW4odGhpcy5sZW5ndGgsZS5sZW5ndGgpLHI9MDtyPGk7cisrKWlmKHIgaW4gdGhpcyl7aWYoIShyIGluIGUpKXJldHVybi0xO2lmKG49dGhpc1tyXSxzPWVbcl0sYT10KG4scykpcmV0dXJuIGF9ZWxzZSBpZihyIGluIGUpcmV0dXJuIDE7cmV0dXJuIHRoaXMubGVuZ3RoLWUubGVuZ3RofSksaShcImVxdWFsc1wiLGZ1bmN0aW9uKGUsdCl7dD10fHxPYmplY3QuY3M7dmFyIHIsaSxuPTAscz10aGlzLmxlbmd0aDtpZih0aGlzPT09ZSlyZXR1cm4hMDtpZighZXx8IUFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIG8ucHJvdG90eXBlLmNzLmNhbGwodGhpcyxlKTtpZihzIT09ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKDtuPHM7KytuKWlmKG4gaW4gdGhpcyl7aWYoIShuIGluIGUpKXJldHVybiExO2lmKHI9dGhpc1tuXSxpPWVbbl0sIXQocixpKSlyZXR1cm4hMX1lbHNlIGlmKG4gaW4gZSlyZXR1cm4hMTtyZXR1cm4hMH0pLGkoXCJjbG9uZVwiLGZ1bmN0aW9uKGUsdCl7aWYobnVsbD09ZSllPTEvMDtlbHNlIGlmKDA9PT1lKXJldHVybiB0aGlzO2lmKHQ9dHx8bmV3IGEsdC5oYXModGhpcykpcmV0dXJuIHQuZ2V0KHRoaXMpO3ZhciByPW5ldyBBcnJheSh0aGlzLmxlbmd0aCk7dC5zZXQodGhpcyxyKTtmb3IodmFyIGkgaW4gdGhpcylyW2ldPU9iamVjdC5jbG9uZSh0aGlzW2ldLGUtMSx0KTtyZXR1cm4gcn0pLGkoXCJpdGVyYXRlXCIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IG4odGhpcyxlLHQpfSksaShcIkl0ZXJhdG9yXCIsbiksbi5wcm90b3R5cGUuR2s9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJfaXRlcmF0aW9uT2JqZWN0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLkdrfHwodGhpcy5Haz17ZG9uZTohMSx2YWx1ZTpudWxsfSl9fSksbi5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0PT09KG51bGw9PXRoaXMuZW5kP3RoaXMuTlQubGVuZ3RoOnRoaXMuZW5kKT8odGhpcy5Way5kb25lPSEwLHRoaXMuVmsudmFsdWU9dm9pZCAwKTp0aGlzLlZrLnZhbHVlPXRoaXMuTlRbdGhpcy5zdGFydCsrXSx0aGlzLlZrfX0sZnVuY3Rpb24oZSx0KXtlLmk9RnVuY3Rpb24sRnVuY3Rpb24udXM9ZnVuY3Rpb24oKXt9LEZ1bmN0aW9uLmlkZW50aXR5PWZ1bmN0aW9uKGUpe3JldHVybiBlfSxGdW5jdGlvbi5VYz1mdW5jdGlvbihlLHQpe3Q9dHx8T2JqZWN0Lk9jLGU9ZXx8RnVuY3Rpb24uaWRlbnRpdHk7dmFyIHI9ZnVuY3Rpb24ocixpKXtyZXR1cm4gdChlKHIpLGUoaSkpfTtyZXR1cm4gci5PYz10LHIuVWM9ZSxyfSxGdW5jdGlvbi5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuZ2V0KHQsZSl9fX0sZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIGkoKXt0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBjb25zdHJ1Y3QuIEdlbmVyaWNPcmRlciBpcyBhIG1peGluLlwiKX12YXIgbj1yKDM2KTtlLmk9aSxpLnByb3RvdHlwZS5jcz1mdW5jdGlvbihlLHQpe2lmKHQ9dHx8dGhpcy5sc3x8bi5jcyx0aGlzPT09ZSlyZXR1cm4hMDtpZighZSlyZXR1cm4hMTtyZXR1cm4gdGhpcy5sZW5ndGg9PT1lLmxlbmd0aCYmdGhpcy5MYyhlKS5ldmVyeShmdW5jdGlvbihlKXtyZXR1cm4gdChlWzBdLGVbMV0pfSl9LGkucHJvdG90eXBlLk9jPWZ1bmN0aW9uKGUsdCl7aWYodD10fHx0aGlzLkFjfHxuLk9jLHRoaXM9PT1lKXJldHVybiAwO2lmKCFlKXJldHVybiAxO3ZhciByPU1hdGgubWluKHRoaXMubGVuZ3RoLGUubGVuZ3RoKSxpPXRoaXMuTGMoZSkucmVkdWNlKGZ1bmN0aW9uKGUsaSxuKXtyZXR1cm4gMD09PWU/bj49cj9lOnQoaVswXSxpWzFdKTplfSwwKTtyZXR1cm4gMD09PWk/dGhpcy5sZW5ndGgtZS5sZW5ndGg6aX0saS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9BcnJheSgpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoZSx0LHIsbil7aWYoISh0aGlzIGluc3RhbmNlb2YgaSkpcmV0dXJuIG5ldyBpKGUsdCxyLG4pO3Q9dHx8T2JqZWN0LmNzLHI9cnx8T2JqZWN0Lmhhc2gsbj1ufHxGdW5jdGlvbi51cyx0aGlzLmxzPXQsdGhpcy5wcz1yLHRoaXMuZHM9bix0aGlzLm9yZGVyPW5ldyB0aGlzLlhGKHZvaWQgMCx0KSx0aGlzLmZzPW5ldyB0aGlzLlpGKHZvaWQgMCxmdW5jdGlvbihlLHIpe3JldHVybiB0KGUudmFsdWUsci52YWx1ZSl9LGZ1bmN0aW9uKGUpe3JldHVybiByKGUudmFsdWUpfSksdGhpcy5sZW5ndGg9MCx0aGlzLmFkZEVhY2goZSl9dmFyIG49KHIoMTEpLHIoNTApKSxzPXIoMTAyKSxvPXIoMTIpLGE9cigzOSksaD1yKDEzKSxjPXIoMzgpLHU9cigxMDMpO2UuaT1pLGkuU2V0PWksT2JqZWN0LmFkZEVhY2goaS5wcm90b3R5cGUsby5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKGkucHJvdG90eXBlLGEucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChpLnByb3RvdHlwZSxoLnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goaS5wcm90b3R5cGUsYy5wcm90b3R5cGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcInNpemVcIixvLmdzKSxpLnByb3RvdHlwZS5YRj1uLGkucHJvdG90eXBlLlpGPXMsaS5wcm90b3R5cGUuRXM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKGUsdGhpcy5scyx0aGlzLnBzLHRoaXMuZHMpfSxpLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHRoaXMub3JkZXIuTm9kZShlKTtyZXR1cm4gdGhpcy5mcy5oYXModCl9LGkucHJvdG90eXBlLmdldD1mdW5jdGlvbihlLHQpe2lmKHQpdGhyb3cgbmV3IEVycm9yKFwiU2V0I2dldCBkb2VzIG5vdCBzdXBwb3J0IHNlY29uZCBhcmd1bWVudDogZXF1YWxzXCIpO3ZhciByPW5ldyB0aGlzLm9yZGVyLk5vZGUoZSk7cmV0dXJuIHI9dGhpcy5mcy5nZXQocikscj9yLnZhbHVlOnRoaXMuZHMoZSl9LGkucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt2YXIgdD1uZXcgdGhpcy5vcmRlci5Ob2RlKGUpO2lmKCF0aGlzLmZzLmhhcyh0KSl7dmFyIHI9dGhpcy5sZW5ndGg7cmV0dXJuIHRoaXMuTWsmJnRoaXMuUUEoW2VdLFtdLHIpLHRoaXMub3JkZXIuYWRkKGUpLHQ9dGhpcy5vcmRlci5oZWFkLk9rLHRoaXMuZnMuYWRkKHQpLHRoaXMubGVuZ3RoKyssdGhpcy5NayYmdGhpcy5HQShbZV0sW10sciksITB9cmV0dXJuITF9LGkucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlLHQpe2lmKHQpdGhyb3cgbmV3IEVycm9yKFwiU2V0I2RlbGV0ZSBkb2VzIG5vdCBzdXBwb3J0IHNlY29uZCBhcmd1bWVudDogZXF1YWxzXCIpO3ZhciByPW5ldyB0aGlzLm9yZGVyLk5vZGUoZSk7cmV0dXJuISF0aGlzLmZzLmhhcyhyKSYmKHI9dGhpcy5mcy5nZXQociksdGhpcy5NayYmdGhpcy5RQShbXSxbZV0sci5pbmRleCksdGhpcy5mcy5kZWxldGUociksdGhpcy5vcmRlci5zcGxpY2UociwxKSx0aGlzLmxlbmd0aC0tLHRoaXMuTWsmJnRoaXMuR0EoW10sW2VdLHIuaW5kZXgpLCEwKX0saS5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7aWYodGhpcy5sZW5ndGgpe3ZhciBlPXRoaXMub3JkZXIuaGVhZC5Pay52YWx1ZTtyZXR1cm4gdGhpcy5kZWxldGUoZSksZX19LGkucHJvdG90eXBlLnNoaWZ0PWZ1bmN0aW9uKCl7aWYodGhpcy5sZW5ndGgpe3ZhciBlPXRoaXMub3JkZXIuaGVhZC5uZXh0LnZhbHVlO3JldHVybiB0aGlzLmRlbGV0ZShlKSxlfX0saS5wcm90b3R5cGUuQmM9ZnVuY3Rpb24oKXtpZih0aGlzLmxlbmd0aD4wKXJldHVybiB0aGlzLmZzLkJjKCkudmFsdWV9LGkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5NayYmKGU9dGhpcy50b0FycmF5KCksdGhpcy5RQShbXSxlLDApKSx0aGlzLmZzLmNsZWFyKCksdGhpcy5vcmRlci5jbGVhcigpLHRoaXMubGVuZ3RoPTAsdGhpcy5NayYmdGhpcy5HQShbXSxlLDApfSxpLnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24oZSx0KXt2YXIgcj1hcmd1bWVudHNbMl0saT0wO3JldHVybiB0aGlzLm9yZGVyLnJlZHVjZShmdW5jdGlvbih0LG4pe3JldHVybiBlLmNhbGwocix0LG4saSsrLHRoaXMpfSx0LHRoaXMpfSxpLnByb3RvdHlwZS5yZWR1Y2VSaWdodD1mdW5jdGlvbihlLHQpe3ZhciByPWFyZ3VtZW50c1syXSxpPXRoaXMub3JkZXIsbj10aGlzLmxlbmd0aC0xO3JldHVybiBpLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUuY2FsbChyLHQsaSxuLS0sdGhpcyl9LHQsdGhpcyl9LGkucHJvdG90eXBlLkhjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JkZXIuSGMoKX0saS5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB1KHRoaXMpfSxpLnByb3RvdHlwZS5sb2c9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmZzO3JldHVybiBlLmxvZy5hcHBseShlLGFyZ3VtZW50cyl9LGkucHJvdG90eXBlLlhjPWZ1bmN0aW9uKCl7dGhpcy5vcmRlci5YYygpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoKXt9ZS5pPWksaS4kRj17V0E6XCIrXCIsZVU6XCItXCIsdFU6XCIrXCIsclU6XCIrXCIsaVU6XCIuXCIsblU6XCInXCIsc1U6XCIrXCIsb1U6XCJ8XCJ9LGkuYVU9e1dBOlwi4pWLXCIsZVU6XCLilIFcIix0VTpcIuKUu1wiLHJVOlwi4pSzXCIsaVU6XCLila1cIixuVTpcIuKVsFwiLHNVOlwi4pSjXCIsb1U6XCLilINcIn0saS5oVT17V0E6XCLilYtcIixlVTpcIuKUgVwiLHRVOlwi4pS7XCIsclU6XCLilLNcIixpVTpcIuKUj1wiLG5VOlwi4pSXXCIsc1U6XCLilKNcIixvVTpcIuKUg1wifX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtpLmRPPVwiMTI3LjAuMC4xXCIsaS5yTD0xMTk4MyxpLmZPPVwiLy97MH06ezF9L3Byb3h5Lz9jYWxsYmFjaz17Mn17M31oaXZlUGx1Z2luSWQ9ezR9XCIsaS5jVT1cIi8vezB9OnsxfS9wcm94eS97Mn0vc2Vzc2lvbj9tYW5pZmVzdD17M31cIixpLmVMPVwiLy97MH06ezF9L3Byb3h5L3syfS9wbGF5ZXI/cmVxPXszfVwiLGkudVU9XCIvL3swfTp7MX0vcHJveHkvezJ9L2luZm8/ezN9XCIsdC50TD1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cig3KSxuPXIoMSkscz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5sb2dnZXJJZD1cIltIaXZlWEhSXSBcIix0aGlzLkRPTkU9NCx0aGlzLkxPQURJTkc9Myx0aGlzLkhFQURFUlNfUkVDRUlWRUQ9Mix0aGlzLk9QRU5FRD0xLHRoaXMuVU5TRU5UPTAsdGhpcy51c2VybmFtZT1udWxsLHRoaXMucGFzc3dvcmQ9bnVsbCx0aGlzLmxVPVtdLHRoaXMucmVzcG9uc2VUeXBlPVwiXCIsdGhpcy5yZWFkeVN0YXRlPXRoaXMuVU5TRU5ULHRoaXMuc3RhdHVzPTAsdGhpcy5hc3luYz0hMCx0aGlzLnRpbWVvdXQ9MCx0aGlzLmV2ZW50cz17fSxlJiYodGhpcy5zZXNzaW9uSWQ9ZSl9cmV0dXJuIGUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuZXZlbnRzW2VdPXRoaXMuZXZlbnRzW2VdfHxbXSx0aGlzLmV2ZW50c1tlXS5wdXNoKHQpfSxlLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmV2ZW50c1tlXSYmKHRoaXMuZXZlbnRzW2VdPXRoaXMuZXZlbnRzW2VdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZSE9PXR9KSl9LGUucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmV2ZW50c1tlLnR5cGVdJiZ0aGlzLmV2ZW50c1tlLnR5cGVdLmZvckVhY2goZnVuY3Rpb24ocil7dHJ5e1wiZnVuY3Rpb25cIj09dHlwZW9mIHI/ci5jYWxsKHQsZSk6XCJmdW5jdGlvblwiPT10eXBlb2Ygci5DTCYmci5DTChlKX1jYXRjaChyKXtuLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKHQubG9nZ2VySWQrXCJFcnJvciBpbiBjYWxsYmFjayBoYW5kbGVyICdcIitlLnR5cGUrXCInXCIse2Vycm9yOnJ9KX19KTt2YXIgcj10aGlzW1wib25cIitlLnR5cGVdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHIpdHJ5e3IuY2FsbCh0aGlzLGUpfWNhdGNoKHQpe24uRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IodGhpcy5sb2dnZXJJZCtcIkVycm9yIGluIGNhbGxiYWNrIGhhbmRsZXIgJ1wiK2UudHlwZStcIidcIix7ZXJyb3I6dH0pfXJldHVybiExfSxlLnByb3RvdHlwZS5tc0NhY2hpbmdFbmFibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubXNDYWNoaW5nfSxlLnByb3RvdHlwZS5vdmVycmlkZU1pbWVUeXBlPWZ1bmN0aW9uKGUpe3RoaXMubWltZVR5cGU9ZX0sZS5yZWdpc3Rlcj1mdW5jdGlvbih0LHIpe2UudWJbdF09cn0sZS5wcm90b3R5cGUucFU9ZnVuY3Rpb24odCl7dGhpcy5zZXNzaW9uSWR8fCh0aGlzLnNlc3Npb25JZD1lLnViW3RdKX0sZS5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihlLHQscixuLHMpe3ZvaWQgMD09PXImJihyPSEwKSx2b2lkIDA9PT1uJiYobj1udWxsKSx2b2lkIDA9PT1zJiYocz1udWxsKSx0aGlzLnVybD10LnRyaW0oKSx0aGlzLm1ldGhvZD1lLHRoaXMudXNlcm5hbWU9bix0aGlzLnBhc3N3b3JkPXMsdGhpcy5hc3luYz1yLHRoaXMucmVhZHlTdGF0ZT10aGlzLk9QRU5FRDt2YXIgbz1pLnJjLmNyZWF0ZUV2ZW50KEV2ZW50LFwicmVhZHlzdGF0ZWNoYW5nZVwiLHtjdXJyZW50VGFyZ2V0OnRoaXN9KTt0aGlzLmRpc3BhdGNoRXZlbnQobyl9LGUucHJvdG90eXBlLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLnJlYWR5U3RhdGUhPT10aGlzLk9QRU5FRCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgb2JqZWN0J3Mgc3RhdGUgbXVzdCBiZSBPUEVORUQuXCIpO3RoaXMubFUucHVzaCh7a2V5OmUsdmFsdWU6dH0pfSxlLnByb3RvdHlwZS5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldEFsbFJlc3BvbnNlSGVhZGVycygpO2lmKHQpe3ZhciByPVtdO3JldHVybiB0LnNwbGl0KC9bXFxyXFxuXSsvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWUubWF0Y2goL14oW146XSspOiA/KC4rKSQvKTt0JiYoclt0WzFdXT10WzJdKX0pLHJbZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzcG9uc2VIZWFkZXJzfSxlLnByb3RvdHlwZS5vbmxvYWQ9ZnVuY3Rpb24oZSl7fSxlLnByb3RvdHlwZS5vbmxvYWRlbmQ9ZnVuY3Rpb24oZSl7fSxlLnByb3RvdHlwZS5vbmVycm9yPWZ1bmN0aW9uKGUpe30sZS5wcm90b3R5cGUub25wcm9ncmVzcz1mdW5jdGlvbihlKXt9LGUucHJvdG90eXBlLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihlKXt9LGUucHJvdG90eXBlLm9uYWJvcnQ9ZnVuY3Rpb24oZSl7fSxlLnByb3RvdHlwZS5vbmxvYWRzdGFydD1mdW5jdGlvbihlKXt9LGUucHJvdG90eXBlLm9udGltZW91dD1mdW5jdGlvbihlKXt9LGV9KCk7cy51Yj17fSxzLkFnPTAsdC5wYj1zfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDUzKSxzPXIoNyksbz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gaSh0LGUpLHQucmVnaXN0ZXJUZWNoPWZ1bmN0aW9uKGUscil7dC5pTFtyXT1lfSx0LnJlZ2lzdGVyQ29tbT1mdW5jdGlvbihlLHIpe3Qubkxbcl09ZX0sdC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe2lmKCF0aGlzLnNlc3Npb25JZCl7dmFyIGU9T2JqZWN0LmtleXModC5uTCk7ZS5sZW5ndGg+MCYmKHRoaXMuc2Vzc2lvbklkPXQubkxbZVswXV0pfXZhciByPXQuaUxbdGhpcy5zZXNzaW9uSWRdLGk9dC5uTFt0aGlzLnNlc3Npb25JZF07aS5sb2dnZXIoKS5kZWJ1ZyhcIkludGVyY2VwdGVkIE1hbmlmZXN0IFJlcXVlc3QgXCIrdGhpcy51cmwpLHIub0wodGhpcyksaS5vbkFjdGl2YXRlU2Vzc2lvbih0aGlzLnVybCl9LHQucHJvdG90eXBlLmRVPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBYTUxIdHRwUmVxdWVzdDt0Lm9wZW4oXCJHRVRcIix0aGlzLnVybCksdC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24ocil7ND09PXQucmVhZHlTdGF0ZSYmKGUucmVzcG9uc2U9dC5yZXNwb25zZVRleHQsZS5yZXNwb25zZVRleHQ9dC5yZXNwb25zZVRleHQsZS5yZWFkeVN0YXRlPTQsZS5zdGF0dXM9dC5zdGF0dXMsZS5vbnJlYWR5c3RhdGVjaGFuZ2Uocy5yYy5jcmVhdGVFdmVudChFdmVudCxcInJlYWR5c3RhdGVjaGFuZ2VcIixyLGUpKSxlLm9ubG9hZChzLnJjLmNyZWF0ZUV2ZW50KFByb2dyZXNzRXZlbnQsXCJsb2FkXCIscixlKSksY29uc29sZS5kZWJ1ZyhcIlJldHVybmVkIE1hbmlmZXN0IFJlcXVlc3QgXCIrZS51cmwpKX0sdC5zZW5kKCl9LHQucHJvdG90eXBlLmZVPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuc2VuZC5jYWxsKHRoaXMpfSx0fShuLlp1KTtvLm5MPXt9LG8uaUw9e30sdC4kdT1vfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDE1KSxzPXIoMCksbz1yKDMyKSxhPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKHQsZSksdC5BcGk9ZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHA9XCJKU1wiLHMuRnJhbWV3b3JrLnJlc29sdmUobi5xdS5fdSl9LHR9KG8uSGl2ZSk7dC5sYj1hfSxmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gaShlLHIpe3ZhciBpPXtnVTpbXSxFVTpzfTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD49MyYmKGkudlU9YXJndW1lbnRzWzJdKSxhcmd1bWVudHMubGVuZ3RoPj00JiYoaS55VT1hcmd1bWVudHNbM10pLGYocik/aS5UVT1yOnImJnQubVUoaSxyKSxtKGkuVFUpJiYoaS5UVT0hMSksbShpLnZVKSYmKGkudlU9MiksbShpLnlVKSYmKGkueVU9ITEpLG0oaS5JVSkmJihpLklVPSEwKSxpLnlVJiYoaS5FVT1uKSxhKGksZSxpLnZVKX1mdW5jdGlvbiBuKGUsdCl7dmFyIHI9aS5TVVt0XTtyZXR1cm4gcj9cIlx1MDAxYltcIitpLnlVW3JdWzBdK1wibVwiK2UrXCJcdTAwMWJbXCIraS55VVtyXVsxXStcIm1cIjplfWZ1bmN0aW9uIHMoZSx0KXtyZXR1cm4gZX1mdW5jdGlvbiBvKGUpe3ZhciB0PXt9O3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSxyKXt0W2VdPSEwfSksdH1mdW5jdGlvbiBhKGUscixpKXtpZihlLklVJiZyJiZiKHIuSXMpJiZyLklzIT09dC5JcyYmKCFyLmNvbnN0cnVjdG9yfHxyLmNvbnN0cnVjdG9yLnByb3RvdHlwZSE9PXIpKXt2YXIgbj1yLklzKGksZSk7cmV0dXJuIHkobil8fChuPWEoZSxuLGkpKSxufXZhciBzPWgoZSxyKTtpZihzKXJldHVybiBzO3ZhciBmPU9iamVjdC5rZXlzKHIpLGc9byhmKTtpZihlLlRVJiYoZj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhyKSksdyhyKSYmKGYuaW5kZXhPZihcIm1lc3NhZ2VcIik+PTB8fGYuaW5kZXhPZihcImRlc2NyaXB0aW9uXCIpPj0wKSlyZXR1cm4gYyhyKTtpZigwPT09Zi5sZW5ndGgpe2lmKGIocikpe3ZhciBFPXIubmFtZT9cIjogXCIrci5uYW1lOlwiXCI7cmV0dXJuIGUuRVUoXCJbRnVuY3Rpb25cIitFK1wiXVwiLFwic3BlY2lhbFwiKX1pZihJKHIpKXJldHVybiBlLkVVKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChyKSxcInJlZ2V4cFwiKTtpZihSKHIpKXJldHVybiBlLkVVKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwociksXCJkYXRlXCIpO2lmKHcocikpcmV0dXJuIGMocil9dmFyIHY9XCJcIixUPSExLG09W1wie1wiLFwifVwiXTtpZihkKHIpJiYoVD0hMCxtPVtcIltcIixcIl1cIl0pLGIocikpe3Y9XCIgW0Z1bmN0aW9uXCIrKHIubmFtZT9cIjogXCIrci5uYW1lOlwiXCIpK1wiXVwifWlmKEkocikmJih2PVwiIFwiK1JlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChyKSksUihyKSYmKHY9XCIgXCIrRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbChyKSksdyhyKSYmKHY9XCIgXCIrYyhyKSksMD09PWYubGVuZ3RoJiYoIVR8fDA9PXIubGVuZ3RoKSlyZXR1cm4gbVswXSt2K21bMV07aWYoaTwwKXJldHVybiBJKHIpP2UuRVUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHIpLFwicmVnZXhwXCIpOmUuRVUoXCJbT2JqZWN0XVwiLFwic3BlY2lhbFwiKTtlLmdVLnB1c2gocik7dmFyIFM7cmV0dXJuIFM9VD91KGUscixpLGcsZik6Zi5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGwoZSxyLGksZyx0LFQpfSksZS5nVS5wb3AoKSxwKFMsdixtKX1mdW5jdGlvbiBoKGUsdCl7aWYobSh0KSlyZXR1cm4gZS5FVShcInVuZGVmaW5lZFwiLFwidW5kZWZpbmVkXCIpO2lmKHkodCkpe3ZhciByPVwiJ1wiK0pTT04uc3RyaW5naWZ5KHQpLnJlcGxhY2UoL15cInxcIiQvZyxcIlwiKS5yZXBsYWNlKC8nL2csXCJcXFxcJ1wiKS5yZXBsYWNlKC9cXFxcXCIvZywnXCInKStcIidcIjtyZXR1cm4gZS5FVShyLFwic3RyaW5nXCIpfXJldHVybiB2KHQpP2UuRVUoXCJcIit0LFwibnVtYmVyXCIpOmYodCk/ZS5FVShcIlwiK3QsXCJib29sZWFuXCIpOmcodCk/ZS5FVShcIm51bGxcIixcIm51bGxcIik6dm9pZCAwfWZ1bmN0aW9uIGMoZSl7cmV0dXJuXCJbXCIrRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkrXCJdXCJ9ZnVuY3Rpb24gdShlLHQscixpLG4pe2Zvcih2YXIgcz1bXSxvPTAsYT10Lmxlbmd0aDtvPGE7KytvKU8odCxTdHJpbmcobykpP3MucHVzaChsKGUsdCxyLGksU3RyaW5nKG8pLCEwKSk6cy5wdXNoKFwiXCIpO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24obil7bi5tYXRjaCgvXlxcZCskLyl8fHMucHVzaChsKGUsdCxyLGksbiwhMCkpfSksc31mdW5jdGlvbiBsKGUsdCxyLGksbixzKXt2YXIgbyxoLGM7aWYoYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbil8fHt2YWx1ZTp0W25dfSxjLmdldD9oPWMuc2V0P2UuRVUoXCJbR2V0dGVyL1NldHRlcl1cIixcInNwZWNpYWxcIik6ZS5FVShcIltHZXR0ZXJdXCIsXCJzcGVjaWFsXCIpOmMuc2V0JiYoaD1lLkVVKFwiW1NldHRlcl1cIixcInNwZWNpYWxcIikpLE8oaSxuKXx8KG89XCJbXCIrbitcIl1cIiksaHx8KGUuZ1UuaW5kZXhPZihjLnZhbHVlKTwwPyhoPWcocik/YShlLGMudmFsdWUsbnVsbCk6YShlLGMudmFsdWUsci0xKSxoLmluZGV4T2YoXCJcXG5cIik+LTEmJihoPXM/aC5zcGxpdChcIlxcblwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuXCIgIFwiK2V9KS5qb2luKFwiXFxuXCIpLnN1YnN0cigyKTpcIlxcblwiK2guc3BsaXQoXCJcXG5cIikubWFwKGZ1bmN0aW9uKGUpe3JldHVyblwiICAgXCIrZX0pLmpvaW4oXCJcXG5cIikpKTpoPWUuRVUoXCJbQ2lyY3VsYXJdXCIsXCJzcGVjaWFsXCIpKSxtKG8pKXtpZihzJiZuLm1hdGNoKC9eXFxkKyQvKSlyZXR1cm4gaDtvPUpTT04uc3RyaW5naWZ5KFwiXCIrbiksby5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLyk/KG89by5zdWJzdHIoMSxvLmxlbmd0aC0yKSxvPWUuRVUobyxcIm5hbWVcIikpOihvPW8ucmVwbGFjZSgvJy9nLFwiXFxcXCdcIikucmVwbGFjZSgvXFxcXFwiL2csJ1wiJykucmVwbGFjZSgvKF5cInxcIiQpL2csXCInXCIpLG89ZS5FVShvLFwic3RyaW5nXCIpKX1yZXR1cm4gbytcIjogXCIraH1mdW5jdGlvbiBwKGUsdCxyKXt2YXIgaT0wO3JldHVybiBlLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiBpKyssdC5pbmRleE9mKFwiXFxuXCIpPj0wJiZpKyssZSt0LnJlcGxhY2UoL1xcdTAwMWJcXFtcXGRcXGQ/bS9nLFwiXCIpLmxlbmd0aCsxfSwwKT42MD9yWzBdKyhcIlwiPT09dD9cIlwiOnQrXCJcXG4gXCIpK1wiIFwiK2Uuam9pbihcIixcXG4gIFwiKStcIiBcIityWzFdOnJbMF0rdCtcIiBcIitlLmpvaW4oXCIsIFwiKStcIiBcIityWzFdfWZ1bmN0aW9uIGQoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSl9ZnVuY3Rpb24gZihlKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGV9ZnVuY3Rpb24gZyhlKXtyZXR1cm4gbnVsbD09PWV9ZnVuY3Rpb24gRShlKXtyZXR1cm4gbnVsbD09ZX1mdW5jdGlvbiB2KGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIHkoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9ZnVuY3Rpb24gVChlKXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZX1mdW5jdGlvbiBtKGUpe3JldHVybiB2b2lkIDA9PT1lfWZ1bmN0aW9uIEkoZSl7cmV0dXJuIFMoZSkmJlwiW29iamVjdCBSZWdFeHBdXCI9PT1fKGUpfWZ1bmN0aW9uIFMoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lfWZ1bmN0aW9uIFIoZSl7cmV0dXJuIFMoZSkmJlwiW29iamVjdCBEYXRlXVwiPT09XyhlKX1mdW5jdGlvbiB3KGUpe3JldHVybiBTKGUpJiYoXCJbb2JqZWN0IEVycm9yXVwiPT09XyhlKXx8ZSBpbnN0YW5jZW9mIEVycm9yKX1mdW5jdGlvbiBiKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9ZnVuY3Rpb24gQyhlKXtyZXR1cm4gbnVsbD09PWV8fFwiYm9vbGVhblwiPT10eXBlb2YgZXx8XCJudW1iZXJcIj09dHlwZW9mIGV8fFwic3RyaW5nXCI9PXR5cGVvZiBlfHxcInN5bWJvbFwiPT10eXBlb2YgZXx8dm9pZCAwPT09ZX1mdW5jdGlvbiBfKGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gUChlKXtyZXR1cm4gZTwxMD9cIjBcIitlLnRvU3RyaW5nKDEwKTplLnRvU3RyaW5nKDEwKX1mdW5jdGlvbiBBKCl7dmFyIGU9bmV3IERhdGUsdD1bUChlLmdldEhvdXJzKCkpLFAoZS5nZXRNaW51dGVzKCkpLFAoZS5nZXRTZWNvbmRzKCkpXS5qb2luKFwiOlwiKTtyZXR1cm5bZS5nZXREYXRlKCksTFtlLmdldE1vbnRoKCldLHRdLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIE8oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9dmFyIE49LyVbc2RqJV0vZzt0LmZvcm1hdD1mdW5jdGlvbihlKXtpZigheShlKSl7Zm9yKHZhciB0PVtdLHI9MDtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXQucHVzaChpKGFyZ3VtZW50c1tyXSkpO3JldHVybiB0LmpvaW4oXCIgXCIpfWZvcih2YXIgcj0xLG49YXJndW1lbnRzLHM9bi5sZW5ndGgsbz1TdHJpbmcoZSkucmVwbGFjZShOLGZ1bmN0aW9uKGUpe2lmKFwiJSVcIj09PWUpcmV0dXJuXCIlXCI7aWYocj49cylyZXR1cm4gZTtzd2l0Y2goZSl7Y2FzZVwiJXNcIjpyZXR1cm4gU3RyaW5nKG5bcisrXSk7Y2FzZVwiJWRcIjpyZXR1cm4gTnVtYmVyKG5bcisrXSk7Y2FzZVwiJWpcIjp0cnl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KG5bcisrXSl9Y2F0Y2goZSl7cmV0dXJuXCJbQ2lyY3VsYXJdXCJ9ZGVmYXVsdDpyZXR1cm4gZX19KSxhPW5bcl07cjxzO2E9blsrK3JdKWcoYSl8fCFTKGEpP28rPVwiIFwiK2E6bys9XCIgXCIraShhKTtyZXR1cm4gb30sdC5xRj1mdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoKXtpZighbil7aWYocHJvY2Vzcy5SVSl0aHJvdyBuZXcgRXJyb3Iocik7cHJvY2Vzcy53VT9jb25zb2xlLnRyYWNlKHIpOmNvbnNvbGUuZXJyb3Iociksbj0hMH1yZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9aWYobShnbG9iYWwucHJvY2VzcykpcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQucUYoZSxyKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2lmKCEwPT09cHJvY2Vzcy5iVSlyZXR1cm4gZTt2YXIgbj0hMTtyZXR1cm4gaX07dmFyIEQsaz17fTt0LkNVPWZ1bmN0aW9uKGUpe2lmKG0oRCkmJihEPXByb2Nlc3MuTXMuX1V8fFwiXCIpLGU9ZS50b1VwcGVyQ2FzZSgpLCFrW2VdKWlmKG5ldyBSZWdFeHAoXCJcXFxcYlwiK2UrXCJcXFxcYlwiLFwiaVwiKS50ZXN0KEQpKXt2YXIgcj1wcm9jZXNzLlBVO2tbZV09ZnVuY3Rpb24oKXt2YXIgaT10LmZvcm1hdC5hcHBseSh0LGFyZ3VtZW50cyk7Y29uc29sZS5lcnJvcihcIiVzICVkOiAlc1wiLGUscixpKX19ZWxzZSBrW2VdPWZ1bmN0aW9uKCl7fTtyZXR1cm4ga1tlXX0sdC5Jcz1pLGkueVU9e2JvbGQ6WzEsMjJdLEFVOlszLDIzXSxPVTpbNCwyNF0saW52ZXJzZTpbNywyN10sTlU6WzM3LDM5XSxEVTpbOTAsMzldLGtVOlszMCwzOV0sYmx1ZTpbMzQsMzldLExVOlszNiwzOV0sZ3JlZW46WzMyLDM5XSxNVTpbMzUsMzldLHJlZDpbMzEsMzldLEZVOlszMywzOV19LGkuU1U9e1VVOlwiY3lhblwiLG51bWJlcjpcInllbGxvd1wiLEJVOlwieWVsbG93XCIsdW5kZWZpbmVkOlwiZ3JleVwiLEhVOlwiYm9sZFwiLHN0cmluZzpcImdyZWVuXCIsX206XCJtYWdlbnRhXCIseFU6XCJyZWRcIn0sdC5pc0FycmF5PWQsdC5FeT1mLHQueXk9Zyx0LnNMPUUsdC5UeT12LHQubXk9eSx0LnFVPVQsdC5JeT1tLHQuR1U9SSx0LmF1PVMsdC5WVT1SLHQualU9dyx0LnZ5PWIsdC5RVT1DLHQuaXNCdWZmZXI9cigxMDcpO3ZhciBMPVtcIkphblwiLFwiRmViXCIsXCJNYXJcIixcIkFwclwiLFwiTWF5XCIsXCJKdW5cIixcIkp1bFwiLFwiQXVnXCIsXCJTZXBcIixcIk9jdFwiLFwiTm92XCIsXCJEZWNcIl07dC5sb2c9ZnVuY3Rpb24oKXtjb25zb2xlLmxvZyhcIiVzIC0gJXNcIixBKCksdC5mb3JtYXQuYXBwbHkodCxhcmd1bWVudHMpKX0sdC52Yj1yKDEwOCksdC5tVT1mdW5jdGlvbihlLHQpe2lmKCF0fHwhUyh0KSlyZXR1cm4gZTtmb3IodmFyIHI9T2JqZWN0LmtleXModCksaT1yLmxlbmd0aDtpLS07KWVbcltpXV09dFtyW2ldXTtyZXR1cm4gZX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDE4KSxuPXIoMykscz1yKDMzKTtyKDExNCkscigxMTUpO3ZhciBvPXIoMCksYT1yKDgpLGg9cigyNyksYz1yKDIzKSx1PXIoMTkpLGw9cigxNCkscD1yKDEpLGQ9cigxOCk7IWZ1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubWV0cmljcz1uZXcgaGl2ZS5zbmFwc2hvdHMuTWV0cmljcyx0aGlzLktVPW5ldyBoaXZlLnNuYXBzaG90cy5UcmFmZmljLHRoaXMuWVU9bmV3IG4sdGhpcy5XVT1uZXcgbix0aGlzLnpVPW5ldyBuLHRoaXMucGxheWVyPW5ldyBoaXZlLnNuYXBzaG90cy5QbGF5ZXJ9cmV0dXJuIGV9KCk7ZS5KVT10O3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMudGlja2V0PW51bGwsdGhpcy5YVT0wLHRoaXMuWlU9MCx0aGlzLnRlc3RJZD1udWxsLHRoaXMuJFUoKX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihlLHQscixpKXt0aGlzLmxvZ2dlcj1vLkZyYW1ld29yay5yZXNvbHZlKG8uRnJhbWV3b3JrLlYuUikubG9nKGkpLHRoaXMudWQ9by5GcmFtZXdvcmsucmVzb2x2ZShhLnBjLnNjKSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIltTTkFQXSBJTklUIFNUQVRTIFNUT1JFIC0gSUQ6IFwiK2UpLHRoaXMuZ2Q9ZSx0aGlzLnRpY2tldD10LHRoaXMuVmwocil9LHQucHJvdG90eXBlLk5MPWZ1bmN0aW9uKGUpe3RoaXMudGVzdElkPWV9LHQucHJvdG90eXBlLmVCPWZ1bmN0aW9uKGUpe3RoaXMudEI9ZX0sdC5wcm90b3R5cGUuVmw9ZnVuY3Rpb24oZSl7dGhpcy5hcHA9ZX0sdC5wcm90b3R5cGUuckI9ZnVuY3Rpb24oZSl7dGhpcy55RD1lfSx0LnByb3RvdHlwZS4kVT1mdW5jdGlvbigpe3RoaXMuaUI9bmV3IGUuSlUsdGhpcy5nZD1udWxsLHRoaXMudGlja2V0PW51bGwsdGhpcy5yZXNldCgpfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuRkw9bmV3IGUuSlUsdGhpcy5uQih0aGlzLkZMLktVKSx0aGlzLnNCKHRoaXMuRkwpfSx0LnByb3RvdHlwZS5uQj1mdW5jdGlvbihlKXtlLnJlcU49MCxlLnJlc3BGYWxsYmFja049MCxlLnJlc3BGYWxsYmFja0Vyck49MCxlLnJlc3BQMnBOPTAsZS5yZXFPdGhlck49MCxlLnJlc3BGYWxsYmFja090aGVyTj0wLGUucmVzcEZhbGxiYWNrT3RoZXJ0RXJyTj0wLGUuc3JjUmVxTj0wLGUuc3JjUmVzcE49MCxlLnNyY1Jlc3BFcnJOPTAsZS5zcmNSZXFRdD0wLGUuc3JjUmVzcFF0PTAsZS5zcmNPdmVyUXQ9MCxlLnNyY090aGVyUmVxTj0wLGUuc3JjT3RoZXJSZXNwTj0wLGUuc3JjT3RoZXJSZXNwRXJyTj0wLGUuc3JjT3RoZXJSZXFRdD0wLGUuc3JjT3RoZXJSZXNwUXQ9MCxlLnNyY090aGVyT3ZlclF0PTAsZS5wMnBTdWJSZXFOPTAsZS5wMnBTdWJSZXNwTj0wLGUucDJwU3ViUmVzcFBhcnROPTAsZS5wMnBTdWJSZXNwRXJyTj0wLGUucDJwU3ViUmVzcEV4cE49MCxlLnAycFN1YlJlcVF0PTAsZS5wMnBTdWJSZXNwUXQ9MCxlLnAycERpcmVjdFF0PTAsZS5wMnBSZWxheVF0PTAsZS5wMnBOYXRRdD0wLGUucDJwVWRwYlF0PTAsZS5mYWxsQWdlbnRSZXNwTj0wLGUuZmFsbEFnZW50UHJlZEhpdE49MCxlLmZhbGxBZ2VudEZhaWxlZFJlc3BOPTAsZS5mYWxsQWdlblRyYWZmaWNTdWNjZXNzUXQ9MCxlLnAycEFnZW50UHJlZEhpdE49MCxlLnAycEFnZW50UHJlZE1pc3NOPTAsZS5wMnBBZ2VudFByZWRQYXJ0aWFsSGl0Tj0wLGUucDJwQWdlblRyYWZmaWNTdWNjZXNzUXQ9MCxlLnAycEFnZW5UcmFmZmljRmFpbHVyZVF0PTB9LHQucHJvdG90eXBlLnNCPWZ1bmN0aW9uKGUpe2UubWV0cmljcy52aWRlb0J1Zk49MCxlLm1ldHJpY3MudmlkZW9CdWZRdD0wLGUubWV0cmljcy5jbGllbnRCdWZmZXJNcz0wLGUubWV0cmljcy5sb29rdXBOb3RGb3VuZD0wLGUubWV0cmljcy5sb29rdXBUb3RhbD0wLGUubWV0cmljcy5sb29rdXBMYXRlbmN5PTAsZS5tZXRyaWNzLmxvb2t1cFJlcUFjY2VwdD0wLGUubWV0cmljcy5sb29rdXBSZXFFc3RhYmxpc2hlZD0wLGUubWV0cmljcy5sb29rdXBGYWlsZWQ9MCxlLnBsYXllci5idWZmZXJpbmdOPTAsZS5wbGF5ZXIuYnVmZmVyaW5nTXM9MH0sdC5wcm90b3R5cGUueGM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt2b2lkIDA9PT1lJiYoZT0hMCk7dmFyIHI9bmV3IGhpdmUuc25hcHNob3RzLk1ldHJpY1NuYXBzaG90O3IudGltZXN0YW1wPW8uRnJhbWV3b3JrLnRpbWUoKSxyLmd1aWQ9dGhpcy5nZCxyLnNlc3Npb25JZD10aGlzLnRpY2tldC5zZXNzaW9uSWQsci5ldmVudElkPW5ldyBFdmVudElkLHIuZXZlbnRJZC5wYXJ0bmVySWQ9dGhpcy50aWNrZXQudXAoKSxyLmV2ZW50SWQuY3VzdG9tZXJJZD10aGlzLnRpY2tldC5jcCgpLHIuZXZlbnRJZC5jb250ZW50SWQ9dGhpcy50aWNrZXQuaHAoKTt0cnl7dmFyIG49bmV3IGhpdmUuc25hcHNob3RzLkNsaWVudEluZm87bi5jbGllbnRUeXBlPXRoaXMub0IoKTt2YXIgcz10aGlzLmFwcC52ZXJzaW9uLnNwbGl0KFwiLlwiKTtpZihuLm1ham9yVmVyc2lvbj1wYXJzZUludChzWzBdKSxuLm1pbm9yVmVyc2lvbj1wYXJzZUludChzWzFdKSxuLnBhdGNoVmVyc2lvbj1wYXJzZUludChzWzJdKSxyLmNsaWVudD1uLG51bGwhPXRoaXMudGVzdElkKXt2YXIgYT1uZXcgVGVzdEluZm87YS50ZXN0SWQ9dGhpcy50ZXN0SWQsci5hQj1hfX1jYXRjaChlKXt0aGlzLmxvZ2dlci53YXJuKFwiW1NOQVBdIGVycm9yIHNldHRpbmcgU25hcHNob3QgQ2xpZW50SW5mb1wiLGUpfWlmKHRoaXMueUQpe3ZhciBoPW5ldyBoaXZlLnNuYXBzaG90cy5BZ2VudEluZm87aC5maXJzdFRpZXJCaXRyYXRlcz10aGlzLnlELmhCKCksaC5zZWNvbmRUaWVyQml0cmF0ZXM9dGhpcy55RC5jQigpLHIuYWdlbnRJbmZvPWh9ci5zdHJlYW1JbmZvPXRoaXMuT0wudUIoKSxyLnRyYWZmaWM9W107dmFyIGM9bmV3IGhpdmUuc25hcHNob3RzLlRyYWZmaWNLZXk7aWYoci50cmFmZmljLnB1c2goe2tleTpjLHZhbHVlOnRoaXMuRkwuS1V9KSx0aGlzLkZMLllVLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2YXIgaT1uZXcgaGl2ZS5zbmFwc2hvdHMuVHJhZmZpY0tleTtpLmJpdHJhdGU9dCxyLnRyYWZmaWMucHVzaCh7a2V5OmksdmFsdWU6ZX0pfSksci5tZXRyaWNzPXRoaXMuRkwubWV0cmljcyx0aGlzLnRCJiYoci5tZXRyaWNzLmNsaWVudEJ1ZmZlck1zPXRoaXMudEIubWluKCkpLHIucGxheWVyPXRoaXMuRkwucGxheWVyLHRoaXMubEIpe3ZhciB1PXRoaXMubEIucEIoKTt0aGlzLkZMLm1ldHJpY3MucHJ0T3V0Tj11LmRCK3UuZkIsdGhpcy5GTC5tZXRyaWNzLnBydEluTj11LmdCK3UuRUI7dmFyIGw9dGhpcy5sQi52QigpO2wuZm9yRWFjaChmdW5jdGlvbihlLGkpe3QueUIoaSxlLHIpfSksdGhpcy5GTC56VS5maWx0ZXIoZnVuY3Rpb24oZSx0KXtyZXR1cm4hbC5oYXModCl9KS5mb3JFYWNoKGZ1bmN0aW9uKGUsaSl7dC55QihpLGUscil9KX1yZXR1cm4gci5jb25uSW5mbz1uZXcgaGl2ZS5zbmFwc2hvdHMuQ29ubmVjdGl2aXR5SW5mbyxlP3RoaXMudWQuZ2V0Q29ubmVjdGl2aXR5SW5mbygpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHIuY29ubkluZm8ucHJpdmF0ZUlwPWkua2wuZ2V0UHJpdmF0ZUlwKGUuZ2V0TmV0d29ya0NoYW5nZWQoKSksdC5UQih0Lm1CKHIpKX0pLmZhaWwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuVEIodC5tQihyKSl9KTooci5jb25uSW5mby5wcml2YXRlSXA9aS5rbC5nZXRQcml2YXRlSXAodGhpcy51ZC5NZCgpLmdldE5ldHdvcmtDaGFuZ2VkKCkpLHRoaXMuVEIocikpfSx0LnByb3RvdHlwZS5tQj1mdW5jdGlvbihlKXtyZXR1cm4gZS5jb25uSW5mby5pbnRlcm5hbEFzPXRoaXMuWFUsZS5jb25uSW5mby5leHRlcm5hbEFzPXRoaXMuWlUsZS5jb25uSW5mby5wdWJsaWNJcD10aGlzLklCLGV9LHQucHJvdG90eXBlLlRCPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9W10pO3ZhciByPWQubWwoZSxcInNuYXBzaG90XCIpO3JldHVybiByLmxlbmd0aCYmcC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIk5hTiBmb3VuZCBpbiBNZXRyaWNTbmFwc2hvdFwiLFwiW1NOQVBdXCIse2tleXNXaXRoTmFOOnIsc25hcHNob3Q6ZX0pLHQubGVuZ3RoPTAsdC5wdXNoLmFwcGx5KHQsciksZX0sdC5wcm90b3R5cGUub0I9ZnVuY3Rpb24oKXt2YXIgZTtzd2l0Y2godGhpcy5hcHAuYXBwKXtjYXNlXCJKU1wiOmU9Q2xpZW50VHlwZS5TQjticmVhaztjYXNlXCJQUk9YWVwiOmU9Q2xpZW50VHlwZS5SQjticmVhaztkZWZhdWx0OmU9Q2xpZW50VHlwZS53Qn1yZXR1cm4gZX0sdC5wcm90b3R5cGUueUI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMuRkwuV1UuZ2V0KGUpO3QudHJhZmZpYz1pLHIucGFydG5lcnN8fChyLnBhcnRuZXJzPVtdKTt2YXIgbj1uZXcgaGl2ZS5zbmFwc2hvdHMuUGFydG5lcktleTtuLnBhcnRuZXJHdWlkPWUsci5wYXJ0bmVycy5wdXNoKHtrZXk6bix2YWx1ZTp0fSl9LHQucHJvdG90eXBlLndMPWZ1bmN0aW9uKGUsdCl7ZT4wJiYodGhpcy5GTC5tZXRyaWNzLnZpZGVvQnVmTisrLHRoaXMuRkwubWV0cmljcy52aWRlb0J1ZlF0Kz1lLHRoaXMuRkwucGxheWVyLmJ1ZmZlcmluZ04rKyx0aGlzLkZMLnBsYXllci5idWZmZXJpbmdNcys9ZSksdGhpcy5GTC5wbGF5ZXIucGxheWVyQnVmZmVyTXM9dH0sdC5wcm90b3R5cGUueEw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5GTC5LVX0sdC5wcm90b3R5cGUuYkI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pQi5LVX0sdC5wcm90b3R5cGUuQ0I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaUIuWVUuaGFzKGUpfHx0aGlzLmlCLllVLnNldChlLG5ldyBoaXZlLnNuYXBzaG90cy5UcmFmZmljKSx0aGlzLmlCLllVLmdldChlKX0sdC5wcm90b3R5cGUuQkw9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuRkwuWVUuaGFzKGUpKXt2YXIgdD1uZXcgaGl2ZS5zbmFwc2hvdHMuVHJhZmZpYzt0aGlzLm5CKHQpLHRoaXMuRkwuWVUuc2V0KGUsdCl9cmV0dXJuIHRoaXMuRkwuWVUuZ2V0KGUpfSx0LnByb3RvdHlwZS5fQj1mdW5jdGlvbigpe3ZhciBlPW5ldyBoaXZlLnNuYXBzaG90cy5QYXJ0bmVyVHJhZmZpYztyZXR1cm4gZS5wMnBTdWNjUmVxPTAsZS5wMnBGYWlsUmVxPTAsZS5wMnBQYXJ0UmVxPTAsZS5wMnBTdWNjUmVjZWl2ZWQ9MCxlLnAycFN1Y2NSZWNlaXZlZExvdz0wLGUucDJwRmFpbFJlY2VpdmVkPTAsZS5wMnBTdWNjUmVzcD0wLGUucDJwRmFpbFJlc3A9MCxlLnAycFBhcnRSZXNwPTAsZS5wMnBTdWNjU2VudD0wLGUucDJwU3VjY1NlbnRMb3c9MCxlLnAycEZhaWxTZW50PTAsZX0sdC5wcm90b3R5cGUuUEI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5XVS5oYXMoZSl8fHQuV1Uuc2V0KGUsdGhpcy5fQigpKSx0LldVLmdldChlKX0sdC5wcm90b3R5cGUuQUI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuUEIoZSx0aGlzLkZMKX0sdC5wcm90b3R5cGUuT0I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuUEIoZSx0aGlzLmlCKX0sdC5wcm90b3R5cGUuTkI9ZnVuY3Rpb24oZSl7dGhpcy51ZD1lfSx0LnByb3RvdHlwZS5EQj1mdW5jdGlvbihlKXt0aGlzLmxCPWV9LHQucHJvdG90eXBlLlVkPWZ1bmN0aW9uKGUpe30sdH0oKTtlLlpGPXI7dmFyIGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5rQj1pc05hTihsLkhpdmVDb25maWcuRGVidWdMb2dzLk1ldHJpY1NuYXBzaG90TG9ncyk/MDpsLkhpdmVDb25maWcuRGVidWdMb2dzLk1ldHJpY1NuYXBzaG90TG9ncyx0aGlzLnN0YXRlPXUuTWwuTGwsdGhpcy5jbGllbnQ9by5GcmFtZXdvcmsucmVzb2x2ZShhLnBjLkcpLHRoaXMueWc9bmV3IHMuWWIsdGhpcy5wcm90b2NvbD1uZXcgcy5iQyh0aGlzLnlnKX1yZXR1cm4gZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihlLHQpe3RoaXMubG9nZ2VyPW8uRnJhbWV3b3JrLnJlc29sdmUoby5GcmFtZXdvcmsuVi5SKS5sb2codCksdGhpcy5sb2dnZXIuZGVidWcoXCJbU05BUF0gSU5JVCBDTElFTlQgU1RBVFNcIiksdGhpcy5mcz1lLHRoaXMuTEIoKX0sZS5wcm90b3R5cGUuTEI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuTUI+LTEmJm8uRnJhbWV3b3JrLmNsZWFySW50ZXJ2YWwodGhpcy5NQiksdGhpcy5NQj1vLkZyYW1ld29yay5zZXRJbnRlcnZhbChmdW5jdGlvbigpe2Uuc25hcHNob3QoKX0saC5HZC5xZC5QRSl9LGUucHJvdG90eXBlLm5sPWZ1bmN0aW9uKGUpe3RoaXMuc3RhdGU9ZX0sZS5wcm90b3R5cGUuSUw9ZnVuY3Rpb24oKXtpZih0aGlzLmZzKXJldHVybiB0aGlzLnNuYXBzaG90KCExKX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oZSl7by5GcmFtZXdvcmsuY2xlYXJJbnRlcnZhbCh0aGlzLk1CKSx0aGlzLmZzJiYoITE9PT1lP3RoaXMuZnMucmVzZXQoKTp0aGlzLmZzLiRVKCkpfSxlLnByb3RvdHlwZS5zbmFwc2hvdD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3ZvaWQgMD09PWUmJihlPSEwKTt2YXIgcj10aGlzLmZzLnhjKGUpO2U/KHRoaXMubG9nZ2VyLmRlYnVnKFwiW1NOQVBdIFRBS0lORyBTTkFQU0hPVFwiKSxyLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQuZm9yd2FyZChlKX0pLmZhaWwoZnVuY3Rpb24oZSl7dC5sb2dnZXIud2FybihcIltTTkFQXSBFUlJPUiBGT1JXQVJESU5HIFNOQVBTSE9UXCIsZSl9KS5maW5hbGx5KGZ1bmN0aW9uKCl7dC5mcy5yZXNldCgpfSkpOih0aGlzLmxvZ2dlci5kZWJ1ZyhcIltTTkFQXSBGTFVTSElORyBTTkFQU0hPVFwiKSx0aGlzLmZvcndhcmQocikpfSxlLnByb3RvdHlwZS5mb3J3YXJkPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5zdGF0ZT09PXUuTWwuSURMRXx8dGhpcy5zdGF0ZT09PXUuTWwuU1RPUClyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci5kZWJ1ZyhcIltTTkFQXSBub3Qgc2VuZCAtIHN0YXRlIFwiK3UuTWxbdGhpcy5zdGF0ZV0pO2lmKHRoaXMuY2xpZW50JiZ0aGlzLmNsaWVudC56ZCgpKXtzd2l0Y2godGhpcy5rQil7Y2FzZSAwOmRlZmF1bHQ6dGhpcy5sb2dnZXIuZGVidWcoXCJbU05BUF0gU0VORElORyBTTkFQU0hPVFwiKTticmVhaztjYXNlIDE6dGhpcy5sb2dnZXIuZGVidWcoXCJbU05BUF0gU0VORElORyBTTkFQU0hPVCBcIitKU09OLnN0cmluZ2lmeShlKSk7YnJlYWs7Y2FzZSAyOnRoaXMubG9nZ2VyLmRlYnVnKFwiW1NOQVBdIFNFTkRJTkcgU05BUFNIT1RcIixlKTticmVhaztjYXNlIDM6dGhpcy5sb2dnZXIuZGVidWcoXCJbU05BUF0gU0VORElORyBTTkFQU0hPVCBcIitKU09OLnN0cmluZ2lmeShlKSxlKX10aGlzLnByb3RvY29sLkFDKFwiU05BUFNIT1RcIixzLmdiLk9ORVdBWSwwKSxlLndyaXRlKHRoaXMucHJvdG9jb2wpLHRoaXMucHJvdG9jb2wuREMoKTt2YXIgcj10aGlzLnlnLnBDKCksaT10aGlzLkZCKHIsXCIsXCIsNCksbj1yLnNsaWNlKGkrMSxyLmxlbmd0aC0xKSxvPW5ldyBjLkpkKFNlcnZpY2VzLlhkLDEsbik7dGhpcy5jbGllbnQuemQoKS5zZW5kKG8pLmZhaWwoZnVuY3Rpb24oZSl7dC5sb2dnZXIud2FybihcIltTTkFQXSBQUk9CTEVNOiBcIixlKX0pfX0sZS5wcm90b3R5cGUuRkI9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLnNwbGl0KHQscikuam9pbih0KS5sZW5ndGh9LGV9KCk7ZS5xbD1mfSh0LlN0YXRzfHwodC5TdGF0cz17fSkpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cig0KSxuPXIoMzApLHM9cigxMTYpLG89cigwKSxhPXIoMjcpLGg9cigyMyksYz1yKDYpLHU9Yy5oZS5naCxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubG9nZ2VyPW8uRnJhbWV3b3JrLnJlc29sdmUoby5GcmFtZXdvcmsuVi5SKS5sb2coKSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIklOSVQgU0VSVklDRSBDTElFTlRcIil9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHRoaXMuVUIpdGhpcy5VQi50aGVuKGZ1bmN0aW9uKCl7dmFyIGU9e3BhcnRuZXJJZDp0LnVwKCksY3VzdG9tZXJJZDp0LmNwKCksY29udGVudElkOnQuaHAoKSxzZWNyZXQ6dC5DTigpfSxpPW5ldyBoLkpkKFNlcnZpY2VzLkJCLDEsSlNPTi5zdHJpbmdpZnkoZSkpO3IuY29ubmVjdGlvbi5zZW5kKGkpfSk7ZWxzZXt2YXIgbz1pLmRlZmVyKCksYz1hLkdkLnFkLmJFO3QuYk4mJih1P2M9YS5HZC5xZC5DRToodGhpcy5sb2dnZXIud2FybihcIltIaXZlQ29tbV0gRXJyb3IgdHJ5aW5nIHRvIHJlc29sdmUgdGVzdCB0aWNrZXQgYWdhaW5zdCBwcm9kdWN0aW9uIHNlcnZpY2VzIC0gdXNlIHByb2R1Y3Rpb24gdGlja2V0IG9yIHRlc3QgcGx1Z2luXCIpLG8ucmVqZWN0KG5ldyBFcnJvcihcInRlc3QgdGlja2V0IGluIHByb2R1Y3Rpb25cIikpKSk7dmFyIGw9bmV3IG4oYykscD1sLlN3KHtcImNvbm5lY3Rpb24taWRcIjplLHBhcnRuZXJfaWQ6dC51cCgpLGN1c3RvbWVyX2lkOnQuY3AoKSxjb250ZW50X2lkOnQuaHAoKSx0aWNrZXQ6dC5DTigpfSkudG9TdHJpbmcoKTt0aGlzLmNvbm5lY3Rpb249bmV3IHMuSEIocCxhLkdkLnFkLkFFLGEuR2QucWQuT0UsYS5HZC5xZC5ORSksdGhpcy5jb25uZWN0aW9uLnhCKGZ1bmN0aW9uKCl7ci5sb2dnZXIuZGVidWcoXCJISVZFIFNFUlZJQ0VTIENPTk5FQ1RFRFwiKSxvLnJlc29sdmUoci5jb25uZWN0aW9uKX0pLHRoaXMuY29ubmVjdGlvbi5vbmVycm9yKGZ1bmN0aW9uKCl7ci5sb2dnZXIud2FybihcIkhpdmUgU2VydmljZXMgQ29ubmVjdGlvbiBmYWlsZWRcIiksby5yZWplY3Qoci5jb25uZWN0aW9uKX0pLHRoaXMuVUI9by5Tc31yZXR1cm57bnA6dGhpcy5jb25uZWN0aW9uLFNzOnRoaXMuVUJ9fSxlLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKCl7dGhpcy5jb25uZWN0aW9uJiZ0aGlzLmNvbm5lY3Rpb24uY29ubmVjdCghMCl9LGUucHJvdG90eXBlLlNEPWZ1bmN0aW9uKGUpe30sZS5wcm90b3R5cGUuemQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25uZWN0aW9ufSxlLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuY29ubmVjdGlvbiYmKHRoaXMuVUI9bnVsbCx0aGlzLmNvbm5lY3Rpb24uY2xvc2UoITEpKX0sZX0oKTt0LnFCPWx9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtyKDExNyk7dmFyIGk9cig0KSxuPXIoMykscz1yKDApLG89cig0NiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5lZj0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLkdCPWV9cmV0dXJuIGV9KCksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLlZCPW5ldyBuLHRoaXMubG9nZ2VyPShzLkZyYW1ld29yay5yZXNvbHZlKHMuRnJhbWV3b3JrLlYuUil8fGNvbnNvbGUpLmxvZygpLHRoaXMubG9nZ2VyLmRlYnVnKFwiSU5JVCBUSUNLRVQgUkVTT0xWRVJcIil9cmV0dXJuIGUucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMscz1pLmRlZmVyKCk7cmV0dXJuIGUmJihlLm9uKFNlcnZpY2VzLkJCLDAsZnVuY3Rpb24oZSl7bi5qQihlKX0pLGUub24oU2VydmljZXMuQkIsMixmdW5jdGlvbihlKXtuLmpCKGUpfSksdGhpcy5WQi5zZXQodCxuZXcgYShzKSkpLHMuU3N9LGUucHJvdG90eXBlLmpCPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0obmV3IERhdGUpLmdldFRpbWUoKSxpPUpTT04ucGFyc2UoZS5tc2cpLG49ITE7dGhpcy5WQi5mb3JFYWNoKGZ1bmN0aW9uKGUscyl7aWYodC5RQihzLGkpKXtuPSEwO3ZhciBvPXQuS0IocyxpKTtvPyhvLmVmPWUuZWYsby5yZj1yLGUuR0IucmVzb2x2ZShvKSk6ZS5HQi5yZWplY3QoXCJUaWNrZXQgdmVyaWZpY2F0aW9uIGZhaWxlZFwiKSx0LlZCLmRlbGV0ZShvKX19KSxufHx0aGlzLmxvZ2dlci53YXJuKFwibm8gcGVuZGluZyB0aWNrZXQgbWF0Y2hpbmc6IFwiK2UubXNnKX0sZS5wcm90b3R5cGUuJGw9ZnVuY3Rpb24oZSl7aWYobmV3IFJlZ0V4cChcIl5odHRwcz86Ly9hcGkoPzotdGVzdCk/LmhpdmVzdHJlYW1pbmcuY29tL3YxL2V2ZW50cy8oPzp3aWxkY2FyZC8pP1wiKS50ZXN0KGUpKXt2YXIgdD10aGlzLllCKCk7cmV0dXJuIHQuUk4oZSksdH1yZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuWUI9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8uQk59LGUucHJvdG90eXBlLlFCPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudXAoKT09PXRbby5CTi5GTl0mJmUuY3AoKT09PXRbby5CTi5NTl0mJmUuaHAoKT09PXRbby5CTi5VTl19LGUucHJvdG90eXBlLktCPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubU4odCksZS5TTigpP2U6bnVsbH0sZX0oKTt0LldCPWh9LGZ1bmN0aW9uKGUsdCxyKXsvKiEgdXVpZC5qc1xuICogQ29weXJpZ2h0IChjKSAyMDEwLTIwMTIgUm9iZXJ0IEtpZWZmZXJcbiAqIE1JVCBMaWNlbnNlIC0gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICovXG4hZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlLHQscil7dmFyIGk9dCYmcnx8MCxuPTA7Zm9yKHQ9dHx8W10sZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1swLTlhLWZdezJ9L2csZnVuY3Rpb24oZSl7bjwxNiYmKHRbaStuKytdPWZbZV0pfSk7bjwxNjspdFtpK24rK109MDtyZXR1cm4gdH1mdW5jdGlvbiBuKGUsdCl7dmFyIHI9dHx8MCxpPWQ7cmV0dXJuIGlbZVtyKytdXStpW2VbcisrXV0raVtlW3IrK11dK2lbZVtyKytdXStcIi1cIitpW2VbcisrXV0raVtlW3IrK11dK1wiLVwiK2lbZVtyKytdXStpW2VbcisrXV0rXCItXCIraVtlW3IrK11dK2lbZVtyKytdXStcIi1cIitpW2VbcisrXV0raVtlW3IrK11dK2lbZVtyKytdXStpW2VbcisrXV0raVtlW3IrK11dK2lbZVtyKytdXX1mdW5jdGlvbiBzKGUsdCxyKXt2YXIgaT10JiZyfHwwLHM9dHx8W107ZT1lfHx7fTt2YXIgbz1udWxsIT1lLnpCP2UuekI6eSxhPW51bGwhPWUuSkI/ZS5KQjoobmV3IERhdGUpLmdldFRpbWUoKSxoPW51bGwhPWUuWEI/ZS5YQjptKzEsYz1hLVQrKGgtbSkvMWU0O2lmKGM8MCYmbnVsbD09ZS56QiYmKG89bysxJjE2MzgzKSwoYzwwfHxhPlQpJiZudWxsPT1lLlhCJiYoaD0wKSxoPj0xZTQpdGhyb3cgbmV3IEVycm9yKFwidXVpZC52MSgpOiBDYW4ndCBjcmVhdGUgbW9yZSB0aGFuIDEwTSB1dWlkcy9zZWNcIik7VD1hLG09aCx5PW8sYSs9MTIyMTkyOTI4ZTU7dmFyIHU9KDFlNCooMjY4NDM1NDU1JmEpK2gpJTQyOTQ5NjcyOTY7c1tpKytdPXU+Pj4yNCYyNTUsc1tpKytdPXU+Pj4xNiYyNTUsc1tpKytdPXU+Pj44JjI1NSxzW2krK109MjU1JnU7dmFyIGw9YS80Mjk0OTY3Mjk2KjFlNCYyNjg0MzU0NTU7c1tpKytdPWw+Pj44JjI1NSxzW2krK109MjU1Jmwsc1tpKytdPWw+Pj4yNCYxNXwxNixzW2krK109bD4+PjE2JjI1NSxzW2krK109bz4+Pjh8MTI4LHNbaSsrXT0yNTUmbztmb3IodmFyIHA9ZS5aQnx8dixkPTA7ZDw2O2QrKylzW2krZF09cFtkXTtyZXR1cm4gdHx8bihzKX1mdW5jdGlvbiBvKGUsdCxyKXt2YXIgaT10JiZyfHwwO1wic3RyaW5nXCI9PXR5cGVvZiBlJiYodD1cImJpbmFyeVwiPT09ZT9uZXcgcCgxNik6bnVsbCxlPW51bGwpLGU9ZXx8e307dmFyIHM9ZS5yYW5kb218fChlLiRCfHxhKSgpO2lmKHNbNl09MTUmc1s2XXw2NCxzWzhdPTYzJnNbOF18MTI4LHQpZm9yKHZhciBvPTA7bzwxNjtvKyspdFtpK29dPXNbb107cmV0dXJuIHR8fG4ocyl9dmFyIGEsaCxjLHUsbDt0P2Z1bmN0aW9uKCl7dmFyIGU9dC5jcnlwdG98fHQubXNDcnlwdG87aWYoIWEmJmUmJmUuZ2V0UmFuZG9tVmFsdWVzKXRyeXt2YXIgcj1uZXcgVWludDhBcnJheSgxNik7dT1hPWZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0UmFuZG9tVmFsdWVzKHIpLHJ9LGEoKX1jYXRjaChlKXt9aWYoIWEpe3ZhciBpPW5ldyBBcnJheSgxNik7aD1hPWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9MDt0PDE2O3QrKykwPT0oMyZ0KSYmKGU9NDI5NDk2NzI5NipNYXRoLnJhbmRvbSgpKSxpW3RdPWU+Pj4oKDMmdCk8PDMpJjI1NTtyZXR1cm4gaX0sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKFwiW1NFQ1VSSVRZXSBub2RlLXV1aWQ6IGNyeXB0byBub3QgdXNhYmxlLCBmYWxsaW5nIGJhY2sgdG8gaW5zZWN1cmUgTWF0aC5yYW5kb20oKVwiKX19KCk6ZnVuY3Rpb24oKXt0cnl7dmFyIGU9cigxMTgpLmVIO2M9YT1lJiZmdW5jdGlvbigpe3JldHVybiBlKDE2KX0sYSgpfWNhdGNoKGUpe319KCk7Zm9yKHZhciBwPVwiZnVuY3Rpb25cIj09dHlwZW9mIEJ1ZmZlcj9CdWZmZXI6QXJyYXksZD1bXSxmPXt9LGc9MDtnPDI1NjtnKyspZFtnXT0oZysyNTYpLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSksZltkW2ddXT1nO3ZhciBFPWEoKSx2PVsxfEVbMF0sRVsxXSxFWzJdLEVbM10sRVs0XSxFWzVdXSx5PTE2MzgzJihFWzZdPDw4fEVbN10pLFQ9MCxtPTAsST1vO0kudEg9cyxJLk9OPW8sSS5wYXJzZT1pLEkuckg9bixJLmlIPXAsSS5uSD1hLEkuc0g9aCxJLm9IPWMsSS5hSD11LHZvaWQgMCE9PWUmJmUuaT9lLmk9SToobD10LnV1aWQsSS53bz1mdW5jdGlvbigpe3JldHVybiB0LnV1aWQ9bCxJfSx0LnV1aWQ9SSl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Om51bGwpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDQpLHM9cig3OCksbz1yKDApLGE9cigyNyksaD1yKDExOSksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmhIPVwiSWRlbnRpdHlTdG9yZVwiLHRoaXMuY0g9XCJJZGVudGl0eURCXCIsdGhpcy5nZD1udWxsLHRoaXMuaW5kZXhlZERCPXdpbmRvdy5pbmRleGVkREJ8fHdpbmRvdy5tb3pJbmRleGVkREJ8fHdpbmRvdy53ZWJraXRJbmRleGVkREJ8fHdpbmRvdy5tc0luZGV4ZWREQixvLkZyYW1ld29yayYmby5GcmFtZXdvcmsucmVzb2x2ZShvLkZyYW1ld29yay5WLlIpP3RoaXMubG9nZ2VyPW8uRnJhbWV3b3JrLnJlc29sdmUoby5GcmFtZXdvcmsuVi5SKS5sb2coKTp0aGlzLmxvZ2dlcj1jb25zb2xlfXJldHVybiBlLnByb3RvdHlwZS51SD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uLmRlZmVyKCkscj1pbmRleGVkREIub3Blbih0aGlzLmNIKTtyZXR1cm4gci5vbnVwZ3JhZGVuZWVkZWQ9ZnVuY3Rpb24oKXt2YXIgdD1yLnJlc3VsdDt0LmNyZWF0ZU9iamVjdFN0b3JlKGUuaEgse2tleVBhdGg6XCJpZFwifSl9LHIub25zdWNjZXNzPWZ1bmN0aW9uKCl7dmFyIGU9ci5yZXN1bHQ7dC5yZXNvbHZlKGUpfSxyLm9uZXJyb3I9ZnVuY3Rpb24oZSl7dC5yZWplY3QoZSl9LHQuU3N9LGUucHJvdG90eXBlLlpsPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLmxIKXJldHVybiB0aGlzLmxIO3ZhciB0PW4uZGVmZXIoKTtpZih0aGlzLmdkKXQucmVzb2x2ZShuZXcgaC5wSCh0aGlzLmdkKSk7ZWxzZSBpZihhLkdkLkVoJiZ0aGlzLmluZGV4ZWREQil7dmFyIHI9c2V0VGltZW91dChmdW5jdGlvbigpe2UubG9nZ2VyLndhcm4oXCJbSGl2ZUNvbW1dIHRpbWVvdXQgcmV0cmlldmluZyBwZXJzaXN0ZW50IElEIC0gZ2VuZXJhdGluZyByYW5kb20gb25lXCIpLGUuZ2Q9ZS5kSCgpLGUubG9nZ2VyLmRlYnVnKFwiW0hpdmVDb21tXSBHZW5lcmF0ZWQgVVVJRDogXCIrZS5nZCksdC5yZXNvbHZlKG5ldyBoLnBIKGUuZ2QpKX0sNGUzKTt0cnl7dmFyIGk9dGhpcy51SCgpO2kudGhlbihmdW5jdGlvbihpKXt2YXIgbj1pLnRyYW5zYWN0aW9uKGUuaEgsXCJyZWFkd3JpdGVcIikscz1uLm9iamVjdFN0b3JlKGUuaEgpLG89cy5nZXQoXCJNWUlEXCIpO28ub25zdWNjZXNzPWZ1bmN0aW9uKCl7aWYoY2xlYXJUaW1lb3V0KHIpLGUuZ2QpdC5yZXNvbHZlKG5ldyBoLnBIKGUuZ2QpKTtlbHNlIGlmKG51bGwhPW8ucmVzdWx0JiZhLkdkLkVoKXt2YXIgbj1vLnJlc3VsdC52YWx1ZTtlLmxvZ2dlci5kZWJ1ZyhcIltIaXZlQ29tbV0gUmV0cmlldmVkIHBlcnNpc3RlbnQgVVVJRDogXCIrbiksZS5nZD1uLGkuY2xvc2UoKSx0LnJlc29sdmUobmV3IGgucEgoZS5nZCkpfWVsc2V7dmFyIHM9ZS5kSCgpO2UuZkgoaSxzKSx0LnJlc29sdmUobmV3IGgucEgoZS5nZCkpfX0sby5vbmVycm9yPWZ1bmN0aW9uKGkpe2NsZWFyVGltZW91dChyKSxlLmdkfHwoZS5sb2dnZXIud2FybihcIltIaXZlQ29tbV0gZXJyb3IgcmV0cmlldmluZyBwZXJzaXN0ZW50IFVVSUQ6IFwiK2kpLGUuZ2Q9ZS5kSCgpLGUubG9nZ2VyLmRlYnVnKFwiW0hpdmVDb21tXSBHZW5lcmF0ZWQgVVVJRDogXCIrZS5nZCkpLHQucmVzb2x2ZShuZXcgaC5wSChlLmdkKSl9fSkuZmFpbChmdW5jdGlvbihpKXtjbGVhclRpbWVvdXQociksZS5nZHx8KGUubG9nZ2VyLndhcm4oXCJbSGl2ZUNvbW1dIGVycm9yIG9wZW5pbmcgaW5kZXhlZERCIC0gZ2VuZXJhdGluZyByYW5kb20gaWQuIEVycm9yOiBcIitpKSxlLmdkPWUuZEgoKSxlLmxvZ2dlci5kZWJ1ZyhcIltIaXZlQ29tbV0gR2VuZXJhdGVkIFVVSUQ6IFwiK2UuZ2QpKSx0LnJlc29sdmUobmV3IGgucEgoZS5nZCkpfSl9Y2F0Y2goZSl7dGhpcy5nZD10aGlzLmRIKCksdGhpcy5sb2dnZXIuZGVidWcoXCJbSGl2ZUNvbW1dIFBlcnNpc3RlbmNlIGVycm9yIC0gR2VuZXJhdGUgVVVJRDogXCIrdGhpcy5nZCxlKSx0LnJlc29sdmUobmV3IGgucEgodGhpcy5nZCkpfX1lbHNlIHRoaXMuZ2Q9dGhpcy5kSCgpLHRoaXMubG9nZ2VyLmRlYnVnKFwiW0hpdmVDb21tXSBQZXJzaXN0ZW5jZSBkaXNhYmxlZCAtIEdlbmVyYXRlIFVVSUQ6IFwiK3RoaXMuZ2QpLHQucmVzb2x2ZShuZXcgaC5wSCh0aGlzLmdkKSk7cmV0dXJuIHRoaXMubEg9dC5Tcyx0aGlzLmxIfSxlLnByb3RvdHlwZS5mSD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT1lLnRyYW5zYWN0aW9uKHRoaXMuaEgsXCJyZWFkd3JpdGVcIik7aS5vYmplY3RTdG9yZSh0aGlzLmhIKS5wdXQoe2lkOlwiTVlJRFwiLHZhbHVlOnR9KSxpLm9uY29tcGxldGU9ZnVuY3Rpb24oKXtyLmxvZ2dlci5kZWJ1ZyhcIltIaXZlQ29tbV0gY29tcGxldGVkIFVVSUQgcGVyc2lzdGVuY2VcIiksZS5jbG9zZSgpfSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIltIaXZlQ29tbV0gR2VuZXJhdGVkIFVVSUQ6IFwiK3QpLHRoaXMuZ2Q9dH0sZS5wcm90b3R5cGUuZEg9ZnVuY3Rpb24oKXtyZXR1cm4gcy5PTigpfSxlfSgpO3QuZ0g9Yzt2YXIgdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGUuY2FsbCh0aGlzKXx8dGhpc31yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLlpsPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLkVIKXJldHVybiB0aGlzLkVIO3ZhciByPW4uZGVmZXIoKTtyZXR1cm4gZS5wcm90b3R5cGUuWmwuY2FsbCh0aGlzKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBpPXQuZEgoKSxuPWUucnAoKSxzPW5ldyBoLnBIKGksbik7ci5yZXNvbHZlKHMpfSkuZmFpbChmdW5jdGlvbihlKXt2YXIgaT10LmRIKCksbj1uZXcgaC5wSChpKTtyLnJlc29sdmUobil9KSx0aGlzLkVIPXIuU3MsdGhpcy5FSH0sdH0oYyk7dC52SD11fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS55SD1mdW5jdGlvbihlKXt0aGlzLmhvc3RuYW1lPWV9LGUucHJvdG90eXBlLmdldEhvc3ROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG9zdG5hbWV9LGUucHJvdG90eXBlLlRIPWZ1bmN0aW9uKGUpe3RoaXMubUg9ZX0sZS5wcm90b3R5cGUuZ2V0TmV0d29ya0NoYW5nZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tSH0sZX0oKTt0LklIPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDQpLG49cigwKSxzPXIoOCksbz1yKDEyMCksYT1yKDEpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5sb2dnZXJJZD1cIltQcmVsb2FkQ29ubmVjdGl2aXR5SW5mb1Byb3ZpZGVyXSBcIix0aGlzLmNvbm5JbmZvPXdpbmRvdy5teUNvbm5JbmZvLHRoaXMubG9nZ2VyPW4uRnJhbWV3b3JrLnJlc29sdmUobi5GcmFtZXdvcmsuVi5SKS5sb2coKSx0aGlzLlNIPW4uRnJhbWV3b3JrLnJlc29sdmUocy5wYy5vYyksdGhpcy5jb25uSW5mb3x8YS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcImhlbHBlciB1bmRlZmluZWRcIix0aGlzLmxvZ2dlcklkKSx0aGlzLlJIKCl9cmV0dXJuIGUucHJvdG90eXBlLlJIPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IG8ud0g7dGhpcy5TSC5USChlKX0sZS5wcm90b3R5cGUuTWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5TSH0sZS5wcm90b3R5cGUuZ2V0Q29ubmVjdGl2aXR5SW5mbz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoIXRoaXMuY29ubkluZm8pcmV0dXJuIGkucmVqZWN0KFwiQ29ubkluZm8gaGVscGVyIHVuZGVmaW5lZFwiKTt2YXIgdD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIGUubG9nZ2VyLndhcm4oZS5sb2dnZXJJZCtcIkdldCBjb25uZWN0aXZpdHkgaW5mbyBleHBpcmVkXCIpLGUuU0g/aS5yZXNvbHZlKGUuU0gpOmkucmVqZWN0KFwiZXhwaXJlZFwiKX0sMmUzKTt0cnl7cmV0dXJuIHRoaXMuY29ubkluZm8uZ2V0Q29ubmVjdGl2aXR5SW5mbygpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIGNsZWFyVGltZW91dCh0KSxlLlNIPXIscn0pLmZhaWwoZnVuY3Rpb24odCl7cmV0dXJuIGUubG9nZ2VyLmRlYnVnKGUubG9nZ2VySWQrXCIgZ2V0IGNvbm5lY3Rpdml0eSBpbmZvIGZhaWxlZCB3aXRoIGVycm9yIDE6IFwiLHQpLGUuU0g/ZS5TSDppLnJlamVjdCh0KX0pfWNhdGNoKGUpe3JldHVybiB0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiIGdldCBjb25uZWN0aXZpdHkgaW5mbyBmYWlsZWQgd2l0aCBlcnJvciAyOlwiLGUpLGkucmVqZWN0KGUpfX0sZS5wcm90b3R5cGUuYkg9ZnVuY3Rpb24oZSx0LHIpe30sZX0oKTt0LkNIPWh9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUucHJvdG90eXBlLl9IPWZ1bmN0aW9uKGUpe3RoaXMucHVibGljSXA9ZX0sZS5wcm90b3R5cGUuZ2V0UHVibGljSXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdWJsaWNJcH0sZS5wcm90b3R5cGUuUEg9ZnVuY3Rpb24oZSl7dGhpcy5BSD1lfSxlLnByb3RvdHlwZS5nZXRNYWNBZGRyZXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQUh9LGUucHJvdG90eXBlLk9IPWZ1bmN0aW9uKGUpe3RoaXMubmljPWV9LGUucHJvdG90eXBlLmdldE5pYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5pY30sZS5wcm90b3R5cGUuTkg9ZnVuY3Rpb24oZSl7dGhpcy5uaWNOYW1lPWV9LGUucHJvdG90eXBlLmdldE5pY05hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uaWNOYW1lfSxlLnByb3RvdHlwZS5ESD1mdW5jdGlvbihlKXt0aGlzLnByaXZhdGVJcD1lfSxlLnByb3RvdHlwZS5nZXRQcml2YXRlSXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcml2YXRlSXB9LGUucHJvdG90eXBlLmtIPWZ1bmN0aW9uKGUpe3RoaXMubmV0bWFzaz1lfSxlLnByb3RvdHlwZS5nZXROZXRtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV0bWFza30sZS5wcm90b3R5cGUuTEg9ZnVuY3Rpb24oZSl7dGhpcy5NSD1lfSxlLnByb3RvdHlwZS5nZXRDaWRyPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGV9KCk7dC5GSD1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cig0KSxuPXIoMykscz1yKDApLG89cig4KSxhPXIoODIpLGg9cigxMjEpLGM9cigxNCksdT1yKDI3KSxsPXIoNTUpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5VSD1udWxsLHRoaXMuQkg9bnVsbCx0aGlzLkhIPW51bGwsdGhpcy54SD1udWxsLHRoaXMucUg9bmV3IG4sdGhpcy5wdWJsaWNJcD1udWxsLHRoaXMuR0g9W10sdGhpcy5sbD0hMSx0aGlzLlZIPW51bGwsdGhpcy5sb2dnZXI9cy5GcmFtZXdvcmsucmVzb2x2ZShzLkZyYW1ld29yay5WLlIpLmxvZygpLHRoaXMuU0g9cy5GcmFtZXdvcmsucmVzb2x2ZShvLnBjLm9jKSx0aGlzLmpIPW5ldyBoLlFILHRoaXMuS0g9W10sdGhpcy5SSCgpLHRoaXMuWUgoKX1yZXR1cm4gZS5wcm90b3R5cGUuUkg9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgYS5GSDt0aGlzLlNILlRIKGUpfSxlLnByb3RvdHlwZS5ZSD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cy5GcmFtZXdvcmsuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtlLkdIPVtdLGUuS0g9W10sZS5xSD1uZXcgbixlLnB1YmxpY0lwPW51bGwsZS5XSD1udWxsfSwxMmU0KX0sZS5wcm90b3R5cGUuZ2V0Q29ubmVjdGl2aXR5SW5mbz1mdW5jdGlvbigpe3JldHVybiB0aGlzLldIfHwodGhpcy5XSD10aGlzLnpIKCkpLHRoaXMuV0h9LGUucHJvdG90eXBlLk1kPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuU0h9LGUucHJvdG90eXBlLnpIPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWkuZGVmZXIoKTtpZih0aGlzLlZIPXMuRnJhbWV3b3JrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnJlamVjdCh7Skg6ITAsbWVzc2FnZTpcImV4cGlyZWRcIn0pfSw0ZTMpLGMuSGl2ZUNvbmZpZy5Db25uSW5mby5kZXRlY3RQcml2YXRlSVAmJnRoaXMuWEgoKSl0cnl7dGhpcy5VSD1uZXcgUlRDUGVlckNvbm5lY3Rpb24obnVsbCksdGhpcy5ISD10aGlzLlVILmNyZWF0ZURhdGFDaGFubmVsKFwic2VuZENoYW5uZWxcIix7cmVsaWFibGU6ITF9KSx0aGlzLkJIPW5ldyBSVENQZWVyQ29ubmVjdGlvbihudWxsKSx0aGlzLkJILm9uZGF0YWNoYW5uZWw9ZnVuY3Rpb24ocil7ZS54SD1yLmNoYW5uZWwsZS54SC5vbm9wZW49ZnVuY3Rpb24ocil7XCJvcGVuXCI9PT1lLnhILnJlYWR5U3RhdGUmJihlLmxvZ2dlci5kZWJ1ZyhcIkNvbGxlY3RlZCBpcHMgW1wiK2UucUgua2V5cygpLmpvaW4oXCIsIFwiKStcIl1cIiksZS5CSC5jbG9zZSgpLGUuakguWkgoKS50aGVuKGZ1bmN0aW9uKHQpe2UuS0g9dCxlLmxvZ2dlci5kZWJ1ZyhcIkFscmVhZHkga25vd24gbWF0Y2hpbmcgaXBzIFtcIitlLktILmpvaW4oXCIsXCIpK1wiXVwiKTt2YXIgcj1lLnFILmtleXMoKTtlLktILmZvckVhY2goZnVuY3Rpb24odCl7ci5pbmRleE9mKHQpPjAmJihlLkdILnB1c2godCksZS5xSC5kZWxldGUodCkpfSksZS5xSC5rZXlzKCkuZm9yRWFjaChmdW5jdGlvbih0KXtlLkdILnB1c2godCl9KX0pLmZhaWwoZnVuY3Rpb24odCl7ZS5sb2dnZXIud2FybihcIkdldCBQcmV2aW91cyB3b3JraW5nIGlwcyBmYWlsZWQgd2l0aCBlcnJvciBcIit0Lm1lc3NhZ2UpLGUucUgua2V5cygpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5HSC5wdXNoKHQpfSl9KS5maW5hbGx5KGZ1bmN0aW9uKCl7ZS5sb2dnZXIuZGVidWcoXCJGaW5hbCBwcml2YXRlIGlwIGxpc3QgW1wiK2UuR0guam9pbihcIixcIikrXCJdXCIpLHQucmVzb2x2ZShlLiRIKCkpfSkpfX0sdGhpcy5VSC5vbmljZWNhbmRpZGF0ZT1mdW5jdGlvbihyKXtyLmNhbmRpZGF0ZSYmZS5leChyLmNhbmRpZGF0ZS5jYW5kaWRhdGUpLCFyLmNhbmRpZGF0ZXx8ZS5CSC5hZGRJY2VDYW5kaWRhdGUoci5jYW5kaWRhdGUpLmNhdGNoKGZ1bmN0aW9uKHIpe3QucmVqZWN0KHtKSDohMCxtZXNzYWdlOnIubWVzc2FnZX0pLHMuRnJhbWV3b3JrLmNsZWFyVGltZW91dChlLlZIKSxjb25zb2xlLmxvZyhcIkVycm9yOiBGYWlsdXJlIGR1cmluZyBhZGRJY2VDYW5kaWRhdGUoKVwiKX0pfSx0aGlzLkJILm9uaWNlY2FuZGlkYXRlPWZ1bmN0aW9uKHIpe3IuY2FuZGlkYXRlJiZlLmV4KHIuY2FuZGlkYXRlLmNhbmRpZGF0ZSksIXIuY2FuZGlkYXRlfHxlLlVILmFkZEljZUNhbmRpZGF0ZShyLmNhbmRpZGF0ZSkuY2F0Y2goZnVuY3Rpb24ocil7dC5yZWplY3Qoe0pIOiEwLG1lc3NhZ2U6ci5tZXNzYWdlfSkscy5GcmFtZXdvcmsuY2xlYXJUaW1lb3V0KGUuVkgpLGNvbnNvbGUubG9nKFwiRXJyb3I6IEZhaWx1cmUgZHVyaW5nIGFkZEljZUNhbmRpZGF0ZSgpXCIpfSl9LHRoaXMuVUguY3JlYXRlT2ZmZXIoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLlVILnNldExvY2FsRGVzY3JpcHRpb24odCl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUuQkguc2V0UmVtb3RlRGVzY3JpcHRpb24oZS5VSC5sb2NhbERlc2NyaXB0aW9uKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZS5CSC5jcmVhdGVBbnN3ZXIoKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuQkguc2V0TG9jYWxEZXNjcmlwdGlvbih0KX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZS5VSC5zZXRSZW1vdGVEZXNjcmlwdGlvbihlLkJILmxvY2FsRGVzY3JpcHRpb24pfSkuY2F0Y2goZnVuY3Rpb24ocil7dC5yZWplY3Qoe0pIOiEwLG1lc3NhZ2U6ci5tZXNzYWdlfSkscy5GcmFtZXdvcmsuY2xlYXJUaW1lb3V0KGUuVkgpLGNvbnNvbGUubG9nKFwiRXJyb3I6IEZhaWx1cmUgY3JlYXRpbmcgb2ZmZXJcIil9KX1jYXRjaChlKXt0LnJlamVjdCh7Skg6ITAsbWVzc2FnZTplLm1lc3NhZ2V9KX1lbHNle3MuRnJhbWV3b3JrLmNsZWFyVGltZW91dCh0aGlzLlZIKTt2YXIgcj1jLkhpdmVDb25maWcuQ29ubkluZm8uZGV0ZWN0UHJpdmF0ZUlQP1wid2VicnRjIGRhdGFjaGFubmVsIG5vdCBzdXBwb3J0ZWRcIjpcInByaXZhdGUgSVAgZGV0ZWN0aW9uIGRpc2FibGVkXCI7dC5yZWplY3Qoe0pIOiExLG1lc3NhZ2U6cn0pfXJldHVybiB0LlNzfSxlLnByb3RvdHlwZS5YSD1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbnVsbCE9bC5WdSYmbnVsbCE9bC5oTCYmXCJmdW5jdGlvblwiPT10eXBlb2YgbmV3IFJUQ1BlZXJDb25uZWN0aW9uKG51bGwsbnVsbCkuY3JlYXRlRGF0YUNoYW5uZWx9Y2F0Y2goZSl7cmV0dXJuITF9fSxlLnByb3RvdHlwZS5leD1mdW5jdGlvbihlKXt2YXIgdD0vKFswLTldezEsM30oXFwuWzAtOV17MSwzfSl7M30pLyxyPXQuZXhlYyhlKTtpZihyKXt2YXIgaT1yWzBdO3RoaXMucUguc2V0KGksITApfX0sZS5wcm90b3R5cGUuJEg9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgYS5GSDtyZXR1cm4gdGhpcy5HSC5sZW5ndGg+MCYmZS5ESCh0aGlzLkdIWzBdKSx0aGlzLnB1YmxpY0lwJiZlLl9IKHRoaXMucHVibGljSXApLHRoaXMuU0guVEgoZSksdGhpcy5TSH0sZS5wcm90b3R5cGUuYkg9ZnVuY3Rpb24oZSx0LHIpe2lmKHRoaXMucHVibGljSXA9ZSx0aGlzLnR4KCksMD09PXImJnRoaXMuR0gubGVuZ3RoPjEpdGhpcy5HSC5zaGlmdCgpO2Vsc2UgaWYodS5HZC5faCYmMCE9PXImJi0xPT10aGlzLktILmluZGV4T2YodGhpcy5HSFswXSkpdGhpcy5LSC51bnNoaWZ0KHRoaXMuR0hbMF0pLHRoaXMuakguaXgodGhpcy5LSC5zbGljZSgwLDIpKTtlbHNlIGlmKHUuR2QuX2gmJjAhPT1yJiZ0aGlzLktILmluZGV4T2YodGhpcy5HSFswXSk+MCl7dmFyIGk9dGhpcy5LSC5pbmRleE9mKHRoaXMuR0hbMF0pO3RoaXMuS0g9dGhpcy5LSC5zcGxpY2UoaSwxKSx0aGlzLktILnVuc2hpZnQodGhpcy5HSFswXSksdGhpcy5qSC5peCh0aGlzLktILnNsaWNlKDAsMikpfXRoaXMuJEgoKX0sZS5wcm90b3R5cGUudHg9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLkdILmluZGV4T2YodGhpcy5wdWJsaWNJcCk7ZT4tMSYmdGhpcy5HSC5zcGxpY2UoZSwxKX0sZX0oKTt0Lm54PXB9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDcpLG49cigyNCkscz1yKDkpLG89cigwKSxhPXIoNSksaD1yKDIpLGM9cigxKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubG9nZ2VySWQ9XCJbVElNRVIgSEFORExFUl0gXCIsdGhpcy5zeD1uZXcgaS5yYy5WaCx0aGlzLm94PW5ldyBpLnJjLlZoLHRoaXMubG9nZ2VyPW8uRnJhbWV3b3JrLnJlc29sdmUoby5GcmFtZXdvcmsuVi5SKS5sb2coKX1yZXR1cm4gZS5wcm90b3R5cGUuYXg9ZnVuY3Rpb24oZSx0KXt0cnl7dmFyIHI9MCxpPS0xLHM9ZS56Zi5kdXJhdGlvbjt0aGlzLnN4LmtoKCk/aT1NYXRoLm1heCgxMCx0aGlzLnN4LkJoKHQpKTp0aGlzLm94LmtoKCkmJihpPU1hdGgubWF4KDEwLHRoaXMub3guQmgodCkpKSxyPWk+LTE/TWF0aC5tYXgoMCxzLWkqYS5oaC5Rby5qbyk6cy8yLGUudHlwZT09bi5iZi53ZiYmKHIqPTIpO3ZhciBvPU1hdGgubWF4KHRoaXMuaHgoKSxyKTtyZXR1cm4gdGhpcy5sb2dnZXIuZGVidWcoXCJUSU1FUiBERVRBSUxTIGR1cmF0aW9uOiBcIitzK1wiIGxlZnQ6IFwiK3QrXCIgZG93blRpbWU6IFwiK2krXCIgZmFsbEF2ZzogXCIrdGhpcy5zeC5HaCgpK1wiIHRpbWVyOiBcIitvKSxvfWNhdGNoKGUpe3JldHVybiBjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY2FsY3VsYXRpbmcgdGhlIHAycCB0aW1lb3V0XCIsdGhpcy5sb2dnZXJJZCxoLmhzLklpLlRpLGUpLDB9fSxlLnByb3RvdHlwZS51eD1mdW5jdGlvbihlLHQpe3JldHVybiA1ZTN9LGUucHJvdG90eXBlLmx4PWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gdGhpcy5zeC5raCgpP01hdGgubWluKHRoaXMuc3guQmgoZSksdGhpcy5weCgpKTp0aGlzLmd4KCl9Y2F0Y2goZSl7cmV0dXJuIGMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjYWxjdWxhdGluZyB0aGUgZGVsaXZlcnkgZGVsYXlcIix0aGlzLmxvZ2dlcklkLGguaHMuSWkubWksZSksdGhpcy5neCgpfX0sZS5wcm90b3R5cGUuX009ZnVuY3Rpb24oZSl7aWYoZS5YZigpPT09cy52Yy5mYylzd2l0Y2goZS5KZigpKXtjYXNlIG4uYmYubWY6Y2FzZSBuLmJmLlRmOmNhc2Ugbi5iZi5JZjp0aGlzLnN4LlVoKGUuYWcoKSk7YnJlYWs7Y2FzZSBuLmJmLlJmOmNhc2Ugbi5iZi53Zjp0aGlzLm94LlVoKGUuYWcoKSl9fSxlLnByb3RvdHlwZS5oeD1mdW5jdGlvbigpe3JldHVybiBlLkV4fSxlLnByb3RvdHlwZS5neD1mdW5jdGlvbigpe3JldHVybiBlLnZ4fSxlLnByb3RvdHlwZS5weD1mdW5jdGlvbigpe3JldHVybiBlLnl4fSxlfSgpO3UuRXg9NTAwLHUueXg9MTUwMCx1LnZ4PTUwMCx0LlR4PXV9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDMpLG49cig0OCk7cigxNDQpLHIoMTQ2KTt2YXIgcz1yKDg2KSxvPXIoMCksYT1yKDE0NyksaD1yKDkpLGM9cig2MSksdT1yKDE0OCksbD1yKDE0OSkscD1yKDU3KSxkPXIoMTQpLGY9cigxKSxnPXIoMiksRT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5sb2dnZXJJZD1cIltEQVNIIE1FVEFEQVRBXSBcIix0aGlzLmlzTGl2ZT0hMSx0aGlzLmxvZ2dlcj1vLkZyYW1ld29yayYmby5GcmFtZXdvcmsucmVzb2x2ZShvLkZyYW1ld29yay5WLlIpP28uRnJhbWV3b3JrLnJlc29sdmUoby5GcmFtZXdvcmsuVi5SKS5sb2coZSk6Y29uc29sZSx0aGlzLm14PW5ldyBEYXNoUGFyc2VyLHRoaXMucmVzZXQoKX1yZXR1cm4gZS5wcm90b3R5cGUuSXg9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIjtyZXR1cm4tMSE9PWUuaW5kZXhPZihcIi9cIikmJigtMSE9PWUuaW5kZXhPZihcIj9cIikmJihlPWUuc3Vic3RyaW5nKDAsZS5pbmRleE9mKFwiP1wiKSkpLHQ9ZS5zdWJzdHJpbmcoMCxlLmxhc3RJbmRleE9mKFwiL1wiKSsxKSksdH0sZS5wcm90b3R5cGUucE09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xpdmV9LGUucHJvdG90eXBlLmxNPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuU3gudmFsdWVzKCkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmJhbmR3aWR0aH0pfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuU3g9bmV3IGl9LGUucHJvdG90eXBlLlJ4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud3h9LGUucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQscixpKXt0cnl7dGhpcy5yZXNldCgpLHRoaXMuSU09dCx0aGlzLmJ4KHQsciksdGhpcy5pc0xpdmU9XCJzdGF0aWNcIiE9PXRoaXMubWFuaWZlc3QudHlwZTtmb3IodmFyIG49dGhpcy5tYW5pZmVzdC5CYXNlVVJMLHM9dGhpcy5tYW5pZmVzdC5QZXJpb2RfYXNBcnJheVswXSxvPXMuQWRhcHRhdGlvblNldF9hc0FycmF5LGM9MDtjPG8ubGVuZ3RoO2MrKyl7dmFyIHU9cy5BZGFwdGF0aW9uU2V0W2NdLGw9LTEhPXUubWltZVR5cGUuaW5kZXhPZihcImF1ZGlvXCIpP2gudmMuZGM6aC52Yy5mYztsPT09aC52Yy5mYyYmdS5Db250ZW50UHJvdGVjdGlvbiYmdGhpcy5DeCh1LkNvbnRlbnRQcm90ZWN0aW9uKTtmb3IodmFyIHA9dS5TZWdtZW50VGVtcGxhdGUuaW5pdGlhbGl6YXRpb24sZD11LlNlZ21lbnRUZW1wbGF0ZS5tZWRpYSxFPXBhcnNlSW50KHUuU2VnbWVudFRlbXBsYXRlLnRpbWVzY2FsZSksdj0wO3Y8dS5SZXByZXNlbnRhdGlvbl9hc0FycmF5Lmxlbmd0aDt2Kyspe3ZhciB5PXUuUmVwcmVzZW50YXRpb25fYXNBcnJheVt2XSxUPW5ldyBhLl94O1QudHlwZT1sLFQuYmFuZHdpZHRoPXBhcnNlSW50KHkuYmFuZHdpZHRoKSxULnRpbWVzY2FsZT1FLFQuUHg9eS5pZCxULmluaXRpYWxpemF0aW9uPW4rXCJcIitwLFQuaW5pdGlhbGl6YXRpb249VC5pbml0aWFsaXphdGlvbi5yZXBsYWNlKGUuQXgsXCJcIitULmJhbmR3aWR0aCksVC5pbml0aWFsaXphdGlvbj1ULmluaXRpYWxpemF0aW9uLnJlcGxhY2UoZS5PeCxcIlwiK1QuUHgpLGl8fHRoaXMubG9nZ2VyLmRlYnVnKFwiUXVhbGl0eUxldmVsIFwiK2gudmNbbF0rXCIgXCIrVC5iYW5kd2lkdGgpO3ZhciBtPW4rXCJcIitkO209bS5yZXBsYWNlKGUuQXgsXCJcIitULmJhbmR3aWR0aCksbT1tLnJlcGxhY2UoZS5PeCxcIlwiK1QuUHgpLFQuTng9bTt2YXIgST1wYXJzZUludChULmJhbmR3aWR0aCtcIlwiKSxTPXRoaXMuRHgodS5TZWdtZW50VGVtcGxhdGUuU2VnbWVudFRpbWVsaW5lX2FzQXJyYXlbMF0uU19hc0FycmF5LG0sSSxsKTtULmt4PVMuTHgsVC5NeD1TLkZ4O3ZhciBSPXRoaXMuVXgobSk7dGhpcy5TeC5zZXQoUixUKX19cmV0dXJuIHRoaXMud3g9ITAsdGhpcy5CeChyLGkpfWNhdGNoKGUpe3Rocm93IGYuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBwYXJzaW5nIHRoZSBtZXRhZGF0YVwiLHRoaXMubG9nZ2VySWQsZy5ocy51aS5XcixlKSx0aGlzLnd4PSExLG5ldyBFcnJvcihlKX19LGUucHJvdG90eXBlLkR4PWZ1bmN0aW9uKHQscixpLHMpe3RyeXt2YXIgbyxhPW5ldyBuLGg9bmV3IG4sdT0wLGw9MDtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQuZCl7dC50P3U9cGFyc2VJbnQodC50KTp1Kz1sO3ZhciBuPXBhcnNlSW50KHQuZCkscD1yLnJlcGxhY2UoZS5IeCx1K1wiXCIpLGQ9bmV3IGMuREYodSxpLG4scCxwKTtkLnR5cGU9cyxvJiYoby5uZXh0PWQpLGEuc2V0KHAsZCksaC5zZXQodSxkKSxvPWQ7dmFyIGY9MDt0LnImJihmPXBhcnNlSW50KHQucikpO2Zvcih2YXIgZz0wO2c8ZjtnKyspe3UrPW47dmFyIHA9ci5yZXBsYWNlKGUuSHgsdStcIlwiKSxkPW5ldyBjLkRGKHUsaSxuLHAscCk7ZC50eXBlPXMsbyYmKG8ubmV4dD1kKSxhLnNldChwLGQpLGguc2V0KHUsZCksbz1kfWw9bn19KSx7THg6YSxGeDpofX1jYXRjaChlKXt0aHJvdyBmLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZXh0cmFjdGluZyBzZWdtZW50IG1hcHNcIix0aGlzLmxvZ2dlcklkLGcuaHMudWkuenIsZSksbmV3IEVycm9yKGUpfX0sZS5wcm90b3R5cGUuQ3g9ZnVuY3Rpb24oZSl7dHJ5e2lmKGUpe2lmKGUuQ3J5cHRvUGVyaW9kKXt2YXIgdD1lLkNyeXB0b1BlcmlvZDt0aGlzLk9NJiYhdGhpcy5PTS54eCgpJiZ0aGlzLk9NIGluc3RhbmNlb2YgdS5xeHx8KHRoaXMuT009bmV3IHUucXgodC5rZXlVcmlUZW1wbGF0ZSx0LklWLHRoaXMuYXV0aGVudGljYXRpb25Ub2tlbikpfWVsc2UgdGhpcy5PTSYmdGhpcy5PTSBpbnN0YW5jZW9mIGwuR3h8fCh0aGlzLk9NPW5ldyBsLkd4KTt0aGlzLk9NJiZwLkRBU0guWEwmJnRoaXMuT00uaW5pdCgpfX1jYXRjaChlKXt0aHJvdyBmLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIHRoZSBwcm90ZWN0aW9uXCIsdGhpcy5sb2dnZXJJZCxnLmhzLnVpLkpyLGUpLG5ldyBFcnJvcihlKX19LGUucHJvdG90eXBlLlZ4PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuVXgoZSk7cmV0dXJuIHRoaXMuU3guZ2V0KHQpfSxlLnByb3RvdHlwZS5nTT1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIHRoaXMuVngoZSkua3guZ2V0KGUpfWNhdGNoKGUpe3JldHVybiBmLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZ2V0dGluZyB0aGUgc2VnbWVudCBpbmZvXCIsdGhpcy5sb2dnZXJJZCxnLmhzLnVpLlhyLGUpLG51bGx9fSxlLnByb3RvdHlwZS5mTT1mdW5jdGlvbihlKXt2YXIgdD0hMTtyZXR1cm4gdGhpcy5TeC5mb3JFYWNoKGZ1bmN0aW9uKHIsaSl7ci5pbml0aWFsaXphdGlvbj09PWUmJih0PSEwKX0pLHR9LGUucHJvdG90eXBlLnZNPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ00oZSk7cmV0dXJuIG51bGwhPXQ/dC5uZXh0Om51bGx9LGUucHJvdG90eXBlLmRrPWZ1bmN0aW9uKGUsdCxyLGkpe3RyeXt2YXIgbjtpZih0aGlzLlN4LmZvckVhY2goZnVuY3Rpb24oZSx0KXtlLmJhbmR3aWR0aD09PWkmJihuPWUpfSksbiYmbi5NeC5oYXMoZSkmJm4uTXguaGFzKHIpKXtmb3IodmFyIHM9bi5NeC5nZXQoZSksbz1uLk14LmdldChyKSxhPTAsaD1zO2gmJmghPW87KWErPWguZHVyYXRpb24saD1oLm5leHQ7cmV0dXJuIE1hdGgucm91bmQoYS8obi50aW1lc2NhbGUvMWUzKSl9cmV0dXJuIDB9Y2F0Y2goZSl7cmV0dXJuIGYuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBleHRyYWN0aW5nIHRoZSBzZWdtZW50IGRpc3RhbmNlXCIsdGhpcy5sb2dnZXJJZCxnLmhzLnVpLlpyLGUpLDB9fSxlLnByb3RvdHlwZS5qeD1mdW5jdGlvbihlKXt0cnl7ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJihlPWUuYnVmZmVyKTt2YXIgdD1JU09Cb3hlci5ReChlKSxyPXQuZmV0Y2goXCJ0ZmhkXCIpLGk9dC5mZXRjaChcInRydW5cIiksbj1yP3IuZGVmYXVsdF9zYW1wbGVfZHVyYXRpb246MDtpZihpKXt2YXIgcz0wO3JldHVybiBpLkt4LmZvckVhY2goZnVuY3Rpb24oZSl7cys9ZS5zYW1wbGVfZHVyYXRpb259KSxpc05hTihzKSYmbj4wJiYocz1uKmkuS3gubGVuZ3RoKSxzfX1jYXRjaChlKXtyZXR1cm4gZi5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGV4dHJhY3RpbmcgZHVyYXRpb24gZnJvbSB0aGUgYnVmZmVyXCIsdGhpcy5sb2dnZXJJZCxnLmhzLnVpLiRyLGUpLDB9fSxlLnByb3RvdHlwZS5CeD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuWXgoKTtpZighdCYmKHRoaXMuaXNMaXZlfHxyfHxkLkhpdmVDb25maWcuRGFzaC5EYXNoUmVtb3ZlQml0cmF0ZVNpemUpKXRyeXt2YXIgaT1uZXcgcyh7fSksbj1pLld4KGUpO3RoaXMuaXNMaXZlJiZ0aGlzLnp4KG4pLChyfHxkLkhpdmVDb25maWcuRGFzaC5EYXNoUmVtb3ZlQml0cmF0ZVNpemUpJiZ0aGlzLkp4KG4scixkLkhpdmVDb25maWcuRGFzaC5EYXNoUmVtb3ZlQml0cmF0ZVNpemUpO3JldHVybiBpLlh4KG4pfWNhdGNoKGUpe3RoaXMubG9nZ2VyLmVycm9yKGUpfXJldHVybiBlfSxlLnByb3RvdHlwZS56eD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RyeXt2YXIgcj1NYXRoLm1heCgxLHAuREFTSC5EQVNIX01FVEFEQVRBX01JTl9GUkFHTUVOVFMpLGk9TWF0aC5tYXgoMSxwLkRBU0guZU0pLG49MCxzPTA7cmV0dXJuIGUuTVBEJiZlLk1QRC5QZXJpb2QmJmUuTVBELlBlcmlvZC5BZGFwdGF0aW9uU2V0LmZvckVhY2goZnVuY3Rpb24oZSl7aWYodC5aeChlKSl7Zm9yKHZhciBvPWUuU2VnbWVudFRlbXBsYXRlLlNlZ21lbnRUaW1lbGluZS5TX2FzQXJyYXksYT1wYXJzZUludChlLlNlZ21lbnRUZW1wbGF0ZS5fdGltZXNjYWxlKSxoPWkqYSxjPTAsdT0wLGw9MDtsPG8ubGVuZ3RoJiZyPjA7bCsrKXt2YXIgcD1vW2xdO2M9bDt2YXIgZD1wLl9yP3BhcnNlSW50KHAuX3IpOjE7ZD5yPyh1PXIscj0wKTooci09ZCx1PWQpfWZvcih2YXIgZj1vLmxlbmd0aC0xO2Y+PTAmJihoPjAmJmY+PWMpO2YtLSl7dmFyIHA9b1tmXSxkPXAuX3I/cGFyc2VJbnQocC5fcik6MSxnPTA7aWYoIXAuX2QpdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBzZWdtZW50IGR1cmF0aW9uXCIpO2c9cGFyc2VJbnQocC5fZCk7dmFyIEU9ZCpnO2lmKChmPmN8fGY9PWMmJjA9PXUpJiZoPj1FKWgtPUUsby5zcGxpY2UoZiwxKSxuKz1kLHMrPUU7ZWxzZXt2YXIgdj1NYXRoLmNlaWwoaC9nKTtmPT1jJiYodj1NYXRoLm1pbih2LGQtdSkpO3ZhciB5PWcqdjtwLl9yPWQtditcIlwiLGgtPXksbis9dixzKz15fX10LmxvZ2dlci5kZWJ1ZyhcIkRBU0ggdHJpbW1lZCBcIituK1wiIHNlZ21lbnRzIGZvciB0b3RhbCBkdXJhdGlvbjogXCIrcyl9fSksZX1jYXRjaChlKXt0aHJvdyBmLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgdHJpbW1pbmcgdGhlIG1hbmlmZXN0XCIsdGhpcy5sb2dnZXJJZCxnLmhzLnVpLnNpLGUpLG5ldyBFcnJvcihlKX19LGUucHJvdG90eXBlLlp4PWZ1bmN0aW9uKGUpe3JldHVybiEhZSYmKCEhKFwidmlkZW8vbXA0XCI9PT1lLl9taW1lVHlwZXx8XCJ2aWRlb1wiPT09ZS5fY29udGVudFR5cGV8fGUuU2VnbWVudFRlbXBsYXRlLl9tZWRpYSYmZS5TZWdtZW50VGVtcGxhdGUuX21lZGlhLmluZGV4T2YoXCJ2aWRlb1wiKT4tMSkmJihlLlNlZ21lbnRUZW1wbGF0ZSYmZS5TZWdtZW50VGVtcGxhdGUuU2VnbWVudFRpbWVsaW5lKSl9LGUucHJvdG90eXBlLll4PWZ1bmN0aW9uKCl7aWYoZC5IaXZlQ29uZmlnLkRhc2guRGFzaEZpbHRlckJpdHJhdGVzKXRyeXt2YXIgZT1udWxsO2U9XCJzdHJpbmdcIj09dHlwZW9mIGQuSGl2ZUNvbmZpZy5EYXNoLkRhc2hGaWx0ZXJCaXRyYXRlcz9kLkhpdmVDb25maWcuRGFzaC5EYXNoRmlsdGVyQml0cmF0ZXMuc3BsaXQoXCIsXCIpOmQuSGl2ZUNvbmZpZy5EYXNoLkRhc2hGaWx0ZXJCaXRyYXRlczt2YXIgdD1bXTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPXBhcnNlSW50KGUpO2lzTmFOKHIpfHx0LnB1c2gocil9KSx0fWNhdGNoKGUpe2YuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBwYXJzaW5nIERhc2hGaWx0ZXJCaXRyYXRlc1wiLHRoaXMubG9nZ2VySWQsZy5ocy51aS5vaSxlKX19LGUucHJvdG90eXBlLkp4PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzO2lmKGUuTVBEJiZlLk1QRC5QZXJpb2Qpe3ZhciBuPVtdO2UuTVBELlBlcmlvZC5BZGFwdGF0aW9uU2V0LmZvckVhY2goZnVuY3Rpb24oZSl7aWYoaS5aeChlKSl7dmFyIHM9ZS5SZXByZXNlbnRhdGlvbl9hc0FycmF5O3Muc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBpc05hTihlLl9iYW5kd2lkdGgpJiYoZS5fYmFuZHdpZHRoPXBhcnNlSW50KGUuX2JhbmR3aWR0aCkpLGlzTmFOKHQuX2JhbmR3aWR0aCkmJih0Ll9iYW5kd2lkdGg9cGFyc2VJbnQodC5fYmFuZHdpZHRoKSksZS5fYmFuZHdpZHRoLXQuX2JhbmR3aWR0aH0pO2Zvcih2YXIgbz1zLmxlbmd0aC0xO28+PTA7by0tKXImJihkZWxldGUgc1tvXS5fd2lkdGgsZGVsZXRlIHNbb10uX2hlaWdodCksdCYmLTE9PXQuaW5kZXhPZihvKT9zLnNwbGljZShvLDEpOm4ucHVzaChzW29dLl9iYW5kd2lkdGgpO2kubG9nZ2VyLmRlYnVnKFwiREFTSCBmaWx0ZXJlZC1pbiBiaXRyYXRlczogXCIrbi5yZXZlcnNlKCkuam9pbihcIiBcIikrXCIgLSByZW1vdmVkIHNpemU6IFwiK3IpfX0pfX0sZS5wcm90b3R5cGUuSE09ZnVuY3Rpb24oZSx0LHIsaSl7dHJ5e3ZhciBuO2lmKHRoaXMuU3guZm9yRWFjaChmdW5jdGlvbihlLHQpe2UuYmFuZHdpZHRoPT09aSYmKG49ZSl9KSxuJiZuLk14LmhhcyhlKSYmbi5NeC5oYXMocikpe2Zvcih2YXIgcz1uLk14LmdldChlKSxvPW4uTXguZ2V0KHIpLGE9MCxoPXM7aCYmaCE9bzspYSs9aC5kdXJhdGlvbixoPWgubmV4dDtyZXR1cm4gTWF0aC5yb3VuZChhLyhuLnRpbWVzY2FsZS8xZTMpKX1yZXR1cm4gMH1jYXRjaChlKXtyZXR1cm4gZi5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGdldHRpbmcgdGhlIGR1cmF0aW9uIGJldHdlZW4gdHdvIHNlZ21lbnRzXCIsdGhpcy5sb2dnZXJJZCxnLmhzLnVpLmhpLGUpLDB9fSxlLnByb3RvdHlwZS5xTT1mdW5jdGlvbihlLHQpe3RyeXt2YXIgcjtyZXR1cm4gdGhpcy5TeC5mb3JFYWNoKGZ1bmN0aW9uKGUsaSl7ZS5iYW5kd2lkdGg9PT10JiYocj1lKX0pLHImJnIuTXguaGFzKGUpP3IuTXguZ2V0KGUpOm51bGx9Y2F0Y2goZSl7cmV0dXJuIGYuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBnZXR0aW5nIHRoZSBzZWdtZW50XCIsdGhpcy5sb2dnZXJJZCxnLmhzLnVpLmNpLGUpLG51bGx9fSxlfSgpO0UuQXg9XCIkQmFuZHdpZHRoJFwiLEUuSHg9XCIkVGltZSRcIixFLk94PVwiJFJlcHJlc2VudGF0aW9uSUQkXCIsdC4keD1FfSxmdW5jdGlvbihlLHQscil7dmFyIGk9ZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5sb2NhbE5hbWU7cmV0dXJuIG51bGw9PXQmJih0PWUuZXEpLG51bGwhPXQmJlwiXCIhPXR8fCh0PWUubm9kZU5hbWUpLHR9ZnVuY3Rpb24gbihlKXtyZXR1cm4gZS5wcmVmaXh9ZnVuY3Rpb24gcyhlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9lLnJlcGxhY2UoLyYvZyxcIiZhbXA7XCIpLnJlcGxhY2UoLzwvZyxcIiZsdDtcIikucmVwbGFjZSgvPi9nLFwiJmd0O1wiKS5yZXBsYWNlKC9cIi9nLFwiJnF1b3Q7XCIpLnJlcGxhY2UoLycvZyxcIiYjeDI3O1wiKS5yZXBsYWNlKC9cXC8vZyxcIiYjeDJGO1wiKTplfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGUucmVwbGFjZSgvJmFtcDsvZyxcIiZcIikucmVwbGFjZSgvJmx0Oy9nLFwiPFwiKS5yZXBsYWNlKC8mZ3Q7L2csXCI+XCIpLnJlcGxhY2UoLyZxdW90Oy9nLCdcIicpLnJlcGxhY2UoLyYjeDI3Oy9nLFwiJ1wiKS5yZXBsYWNlKC8mI3gyRjsvZyxcIi9cIil9ZnVuY3Rpb24gYShzKXtpZihzLm5vZGVUeXBlPT1ULkRPQ1VNRU5UX05PREUpe3ZhciBoLGMsdSxsPXMuZmlyc3RDaGlsZDtmb3IoYz0wLHU9cy5jaGlsZE5vZGVzLmxlbmd0aDtjPHU7Yys9MSlpZihzLmNoaWxkTm9kZXNbY10ubm9kZVR5cGUhPT1ULkNPTU1FTlRfTk9ERSl7bD1zLmNoaWxkTm9kZXNbY107YnJlYWt9aWYociloPWEobCk7ZWxzZXtoPXt9O3ZhciBwPWkobCk7aFtwXT1hKGwpfXJldHVybiBofWlmKHMubm9kZVR5cGU9PVQuRUxFTUVOVF9OT0RFKXt2YXIgaD1uZXcgT2JqZWN0O2guX19jbnQ9MDtmb3IodmFyIGQ9cy5jaGlsZE5vZGVzLGY9MDtmPGQubGVuZ3RoO2YrKyl7dmFyIGw9ZC5pdGVtKGYpLHA9aShsKTtpZihoLl9fY250KyssbnVsbD09aFtwXSloW3BdPWEobCksaFtwK1wiX2FzQXJyYXlcIl09bmV3IEFycmF5KDEpLGhbcCtcIl9hc0FycmF5XCJdWzBdPWhbcF07ZWxzZXtpZihudWxsIT1oW3BdJiYhKGhbcF1pbnN0YW5jZW9mIEFycmF5KSl7dmFyIGc9aFtwXTtoW3BdPW5ldyBBcnJheSxoW3BdWzBdPWcsaFtwK1wiX2FzQXJyYXlcIl09aFtwXX1mb3IodmFyIEU9MDtudWxsIT1oW3BdW0VdOylFKys7aFtwXVtFXT1hKGwpfX1mb3IodmFyIHY9MDt2PHMuYXR0cmlidXRlcy5sZW5ndGg7disrKXt2YXIgbT1zLmF0dHJpYnV0ZXMuaXRlbSh2KTtoLl9fY250Kys7Zm9yKHZhciBJPW0udmFsdWUsUz0wLFI9ZS5sZW5ndGg7UzxSO1MrKyl7dmFyIHc9ZVtTXTt0cnl7dy50ZXN0LmNhbGwodGhpcyxtKSYmKEk9dy50cS5jYWxsKHRoaXMsbS52YWx1ZSkpfWNhdGNoKGUpe3cudGVzdC5jYWxsKHRoaXMsbSksY29uc29sZS5lcnJvcihlKX19aFt0K20ubmFtZV09SX12YXIgYj1uKHMpO3JldHVybiBudWxsIT1iJiZcIlwiIT1iJiYoaC5fX2NudCsrLGguX19wcmVmaXg9YiksMT09aC5fX2NudCYmbnVsbCE9aFtcIiN0ZXh0XCJdJiYoaD1oW1wiI3RleHRcIl0pLG51bGwhPWhbXCIjdGV4dFwiXSYmKGguX190ZXh0PWhbXCIjdGV4dFwiXSxoLl9fdGV4dCBpbnN0YW5jZW9mIEFycmF5JiYoaC5fX3RleHQ9aC5fX3RleHQuam9pbihcIlxcblwiKSkseSYmKGguX190ZXh0PW8oaC5fX3RleHQpKSxkZWxldGUgaFtcIiN0ZXh0XCJdLGRlbGV0ZSBoW1wiI3RleHRfYXNBcnJheVwiXSxcIlwiPT09aC5fX3RleHQudHJpbSgpJiZkZWxldGUgaC5fX3RleHQpLG51bGwhPWhbXCIjY2RhdGEtc2VjdGlvblwiXSYmKGguX19jZGF0YT1oW1wiI2NkYXRhLXNlY3Rpb25cIl0sZGVsZXRlIGhbXCIjY2RhdGEtc2VjdGlvblwiXSxkZWxldGUgaFtcIiNjZGF0YS1zZWN0aW9uX2FzQXJyYXlcIl0pLG51bGw9PWguX190ZXh0JiZudWxsPT1oLl9fY2RhdGF8fChoLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuKG51bGwhPXRoaXMuX190ZXh0P3RoaXMuX190ZXh0OlwiXCIpKyhudWxsIT10aGlzLl9fY2RhdGE/dGhpcy5fX2NkYXRhOlwiXCIpfSksaH1yZXR1cm4gcy5ub2RlVHlwZT09VC5URVhUX05PREV8fHMubm9kZVR5cGU9PVQuQ0RBVEFfU0VDVElPTl9OT0RFP3Mubm9kZVZhbHVlOnMubm9kZVR5cGU9PVQuQ09NTUVOVF9OT0RFP251bGw6dm9pZCAwfWZ1bmN0aW9uIGgoZSx0LHIsaSl7dmFyIG49XCI8XCIrKG51bGwhPWUmJm51bGwhPWUuX19wcmVmaXg/ZS5fX3ByZWZpeCtcIjpcIjpcIlwiKSt0O2lmKG51bGwhPXIpZm9yKHZhciBzPTA7czxyLmxlbmd0aDtzKyspe3ZhciBvPXJbc10sYT1lW29dO24rPVwiIFwiK28uc3Vic3RyKDEpK1wiPSdcIithK1wiJ1wifXJldHVybiBuKz1pP1wiLz5cIjpcIj5cIn1mdW5jdGlvbiBjKGUsdCl7cmV0dXJuXCI8L1wiKyhudWxsIT1lLl9fcHJlZml4P2UuX19wcmVmaXgrXCI6XCI6XCJcIikrdCtcIj5cIn1mdW5jdGlvbiB1KGUsdCl7cmV0dXJuLTEhPT1lLmluZGV4T2YodCxlLmxlbmd0aC10Lmxlbmd0aCl9ZnVuY3Rpb24gbChlLHQpe3JldHVybiEhKHUodC50b1N0cmluZygpLFwiX2FzQXJyYXlcIil8fDA9PXQudG9TdHJpbmcoKS5pbmRleE9mKFwiX1wiKXx8ZVt0XWluc3RhbmNlb2YgRnVuY3Rpb24pfWZ1bmN0aW9uIHAoZSl7dmFyIHQ9MDtpZihlIGluc3RhbmNlb2YgT2JqZWN0KWZvcih2YXIgciBpbiBlKWwoZSxyKXx8dCsrO3JldHVybiB0fWZ1bmN0aW9uIGQoZSl7dmFyIHQ9W107aWYoZSBpbnN0YW5jZW9mIE9iamVjdClmb3IodmFyIHIgaW4gZSktMT09ci50b1N0cmluZygpLmluZGV4T2YoXCJfX1wiKSYmMD09ci50b1N0cmluZygpLmluZGV4T2YoXCJfXCIpJiZ0LnB1c2gocik7cmV0dXJuIHR9ZnVuY3Rpb24gZihlKXt2YXIgdD1cIlwiO3JldHVybiBudWxsIT1lLl9fY2RhdGEmJih0Kz1cIjwhW0NEQVRBW1wiK2UuX19jZGF0YStcIl1dPlwiKSxudWxsIT1lLl9fdGV4dCYmKHQrPXk/cyhlLl9fdGV4dCk6ZS5fX3RleHQpLHR9ZnVuY3Rpb24gZyhlKXt2YXIgdD1cIlwiO3JldHVybiBlIGluc3RhbmNlb2YgT2JqZWN0P3QrPWYoZSk6bnVsbCE9ZSYmKHQrPXk/cyhlKTplKSx0fWZ1bmN0aW9uIEUoZSx0LHIpe3ZhciBpPVwiXCI7aWYoMD09ZS5sZW5ndGgpaSs9aChlLHQsciwhMCk7ZWxzZSBmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpKz1oKGVbbl0sdCxkKGVbbl0pLCExKSxpKz12KGVbbl0pLGkrPWMoZVtuXSx0KTtyZXR1cm4gaX1mdW5jdGlvbiB2KGUpe3ZhciB0PVwiXCI7aWYocChlKT4wKWZvcih2YXIgciBpbiBlKWlmKCFsKGUscikpe3ZhciBpPWVbcl0sbj1kKGkpO2lmKG51bGw9PWl8fHZvaWQgMD09aSl0Kz1oKGkscixuLCEwKTtlbHNlIGlmKGkgaW5zdGFuY2VvZiBPYmplY3QpaWYoaSBpbnN0YW5jZW9mIEFycmF5KXQrPUUoaSxyLG4pO2Vsc2V7dmFyIHM9cChpKTtzPjB8fG51bGwhPWkuX190ZXh0fHxudWxsIT1pLl9fY2RhdGE/KHQrPWgoaSxyLG4sITEpLHQrPXYoaSksdCs9YyhpLHIpKTp0Kz1oKGkscixuLCEwKX1lbHNlIHQrPWgoaSxyLG4sITEpLHQrPWcoaSksdCs9YyhpLHIpfXJldHVybiB0Kz1nKGUpfW51bGwhPT10JiZ2b2lkIDAhPT10fHwodD1cIl9cIiksbnVsbCE9PXImJnZvaWQgMCE9PXJ8fChyPSExKTt2YXIgeT0hMSxUPXtFTEVNRU5UX05PREU6MSxURVhUX05PREU6MyxDREFUQV9TRUNUSU9OX05PREU6NCxDT01NRU5UX05PREU6OCxET0NVTUVOVF9OT0RFOjl9O3RoaXMucnE9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYod2luZG93LkRPTVBhcnNlcil7dD0obmV3IHdpbmRvdy5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLFwidGV4dC94bWxcIil9ZWxzZSAwPT1lLmluZGV4T2YoXCI8P1wiKSYmKGU9ZS5zdWJzdHIoZS5pbmRleE9mKFwiPz5cIikrMikpLHQ9bmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MRE9NXCIpLHQuYXN5bmM9XCJmYWxzZVwiLHQuaXEoZSk7cmV0dXJuIHR9LHRoaXMubnE9ZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSl9LHRoaXMuV3g9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5ycShlKTtyZXR1cm4gdGhpcy5ucSh0KX0sdGhpcy5YeD1mdW5jdGlvbihlKXtyZXR1cm4gdihlKX0sdGhpcy5zcT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLlh4KGUpO3JldHVybiB0aGlzLnJxKHQpfSx0aGlzLmdldFZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm5cIjEuMC4xMVwifSx0aGlzLm9xPWZ1bmN0aW9uKGUpe3k9ZX19O2UuaT1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDMpLHM9cig1OCksbz1yKDE1MSksYT1yKDE1NCksaD1yKDApLGM9cigzMSksdT1yKDkpLGw9cigzNCkscD1yKDMwKSxkPXIoMSksZj1yKDIpOyFmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3JldHVybiB0aGlzLnFMKHQpfHwtMSE9dC5pbmRleE9mKGUuR0wpfWZ1bmN0aW9uIHIodCl7cmV0dXJuLTEhPXQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGUuVkwudG9Mb3dlckNhc2UoKSl8fC0xIT10LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihlLmFxLnRvTG93ZXJDYXNlKCkpfHwtMSE9dC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZS5ocS50b0xvd2VyQ2FzZSgpKX1lLmNxPTEsZS51cT0yLGUubHE9M2U0LGUucHE9NGUzLGUuZHE9NTAwLGUuZnE9ITAsZS5ncT0xZTQsZS5FcT0xNixlLnZxPTMsZS5WTD1cIi5tM3U4XCIsZS5hcT1cIihmb3JtYXQ9bTN1OC1hYXBsLXYzKVwiLGUuaHE9XCIodmlkZW8sZm9ybWF0PW0zdTgtYWFwbC12MyxhdWRpb3RyYWNrPWF1ZGlvKVwiLGUuR0w9XCIudHNcIixlLnJNPXQsZS5xTD1yO3ZhciBnPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHMoZSxyLGkpe3ZhciBzPXQuY2FsbCh0aGlzLGkpfHx0aGlzO3JldHVybiBzLnlxPSExLHMubG9nZ2VySWQ9XCJbSExTIENvbnRleHRdIFwiLHMuQWc9MCxzLk1NPW5ldyBuLHMuRE09bmV3IG4scy50aWNrZXQ9ZSxzLlRxPXIsciYmKHMubXE9cy5JcShlLl9OKCkpKSxzLm5NPWUuTk4oKSxzLnNNPW5ldyBhLlNxLHMuUnE9bmV3IG8ud3Esc31yZXR1cm4gaShzLHQpLHMucHJvdG90eXBlLmdldFN0cmVhbVByb3RvY29sPWZ1bmN0aW9uKCl7cmV0dXJuIFN0cmVhbVByb3RvY29sLmJxfSxzLnByb3RvdHlwZS5JcT1mdW5jdGlvbihlKXt2YXIgdD1lLmxhc3RJbmRleE9mKFwiL1wiKTtyZXR1cm4gZS5zdWJzdHIoMCx0KX0scy5wcm90b3R5cGUuU2s9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aWNrZXR9LHMucHJvdG90eXBlLmxNPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuUnEubE0oKX0scy5wcm90b3R5cGUuaXNMaXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuUnEuaXNMaXZlKCl9LHMucHJvdG90eXBlLmRNPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc019LHMucHJvdG90eXBlLmdldENvbnRleHRJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRpY2tldC5rTigpfSxzLnByb3RvdHlwZS51TT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5NfSxzLnByb3RvdHlwZS5tTT1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9ZS51cmw9dGhpcy5DcShlLnVybCk7cmV0dXJuIHQ9PT10aGlzLm5NPyh0aGlzLnlxJiZ0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNBTUUgTUFOSUZFU1QgXCIrdCtcIixcIit0aGlzLm5NKSwhMCk6bnVsbCE9dGhpcy5ScSYmdGhpcy5ScS5fcSh0KT8odGhpcy55cSYmdGhpcy5sb2dnZXIuZGVidWcoXCJDT1JSRUNUIFBMQVlMSVNUIFwiK3QrXCIsXCIrdGhpcy5uTSksITApOm51bGwhPXRoaXMuUnEmJm51bGwhPXRoaXMuUnEuZ00odCk/KHRoaXMueXEmJnRoaXMubG9nZ2VyLmRlYnVnKFwiQ09SUkVDVCBTRUdNRU5UIFwiK3QrXCIsXCIrdGhpcy5uTSksITApOiEoIXIodCl8fHRoaXMuUnEuUHEoKT09PXQpJiYodGhpcy55cSYmdGhpcy5sb2dnZXIuZGVidWcoXCJGSVJTVCBSRVFVRVNUIEZPUiBNQU5JRkVTVCBcIit0K1wiLFwiK3RoaXMubk0pLCExKX1jYXRjaCh0KXtyZXR1cm4gZC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGdldHRpbmcgdGhlIGN1cnJlbnQgY29udGV4dCBvZiB0aGUgSGl2ZVJlcXVlc3RcIix0aGlzLmxvZ2dlcklkLGYuaHMuZGkucXIse2RldGFpbGVkRXJyb3I6dCx1cmw6ZS51cmx9KSwhMX19LHMucHJvdG90eXBlLkNxPWZ1bmN0aW9uKGUpe3JldHVybiBwKGUpLm5iKCkudG9TdHJpbmcoKX0scy5wcm90b3R5cGUuWGY9ZnVuY3Rpb24oZSl7dHJ5e2lmKHIoZSkpcmV0dXJuIHUudmMuZ2M7cmV0dXJuIG51bGwhPXRoaXMuUnEuZ00oZSk/dS52Yy5mYzp1LnZjLkVjfWNhdGNoKHQpe3JldHVybiBkLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZ2V0dGluZyB0aGUgZW50aXR5VHlwZVwiLHRoaXMubG9nZ2VySWQsZi5ocy5kaS5Ccix7ZGV0YWlsZWRFcnJvcjp0LHVybDplfSksdS52Yy5FY319LHMucHJvdG90eXBlLmlnPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuWGYoZSk7aWYodD09dS52Yy5mY3x8dD09dS52Yy5kYylyZXR1cm4hMH0scy5wcm90b3R5cGUuRU09ZnVuY3Rpb24oZSl7dmFyIHQ9MCxyPTAsaT0wLG49ITAscz0hMTt0cnl7dmFyIG89dGhpcy5YZihlKTtpZihvIT11LnZjLmdjKXt2YXIgYT10aGlzLlJxLmdNKGUpO251bGwhPWEmJih0PWEuZHVyYXRpb24scj1hLmJpdHJhdGUsaT1hLmlkLHM9dGhpcy5pZyhlKSl9ZWxzZSBuPSExLG51bGwhPXRoaXMuUnEmJnRoaXMuUnEuQXEuaGFzKGUpJiYocj10aGlzLlJxLkFxLmdldChlKS5iaXRyYXRlLHRoaXMuTU0uc2V0KHIsaC5GcmFtZXdvcmsudGltZSgpKSk7cmV0dXJuIG5ldyBsLk5fKGUsbyxuLGksdCxyLHMsdGhpcy5nZXRDb250ZXh0SWQoKSl9Y2F0Y2godCl7cmV0dXJuIGQuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBnZXR0aW5nIHRoZSBlbnRpdHlDaGFyYWN0ZXJpc3RpY3MgZnJvbSB0aGUgdXJsXCIsdGhpcy5sb2dnZXJJZCxmLmhzLmRpLkhyLHtkZXRhaWxlZEVycm9yOnQsdXJsOmV9KSxuZXcgbC5OXyhlLHUudmMuRWMsITEsMCwwLDAsITEsdGhpcy5nZXRDb250ZXh0SWQoKSl9fSxzLnByb3RvdHlwZS5WRD1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcy5ScS5xTShlLHQpO3JldHVybiBudWxsIT1pP25ldyBsLk5fKGkueU0sciwhMCxlLGkuZHVyYXRpb24sdCwhMCx0aGlzLmdldENvbnRleHRJZCgpKTpudWxsfSxzLnByb3RvdHlwZS5TTT1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9ZS5STSxyPWUuZWcoKSxpPXRoaXMuUnEucGFyc2Uocix0KTtpZih0aGlzLlJxLkFxLmhhcyhyKSl7dmFyIG49dGhpcy5ScS5BcS5nZXQocik7dGhpcy53TS5RRChuLmJpdHJhdGUpfWUuS2YucmVzcG9uc2U9aSxlLktmLnJlc3BvbnNlVGV4dD1pfWNhdGNoKHQpe2QuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZWNlaXZpbmcgdGhlIG1ldGFkYXRhXCIsdGhpcy5sb2dnZXJJZCxmLmhzLmRpLmxpLHtkZXRhaWxlZEVycm9yOnQsdXJsOmUuZWcoKX0pLGUuUk0mJihlLktmLnJlc3BvbnNlVGV4dD1lLlJNLGUuS2YucmVzcG9uc2U9ZS5STSl9fSxzLnByb3RvdHlwZS5DTT1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5DTS5jYWxsKHRoaXMsZSksZS5YZigpIT11LnZjLmdjJiZlLlhmKCkhPXUudmMuRWMmJih0aGlzLnNNLl9NKGUpLGUuWGYoKT09dS52Yy5mYyYmdGhpcy53TS5VRChlLnpmKSl9LHMucHJvdG90eXBlLlBNPWZ1bmN0aW9uKGUscil7dmFyIGk9ZTtyZXR1cm4gaS5BTT1oLkZyYW1ld29yay50aW1lKCksdC5wcm90b3R5cGUuUE0uY2FsbCh0aGlzLGkscil9LHMucHJvdG90eXBlLnRrPWZ1bmN0aW9uKHQpe2lmKGUuZnEpe251bGw9PXRoaXMuRE0uZ2V0KHQpJiZ0aGlzLlJxLmlzTGl2ZSgpP3RoaXMua00odCk6dGhpcy5sb2dnZXIuZGVidWcoXCJITFMgUFJFLUZFVENISU5HIE1FVEFEQVRBIEFMUkVBRFkgU0NIRURVTEVEIE9SIE1JU1NJTkcgSExTIElORk9cIil9fSxzLnByb3RvdHlwZS5rTT1mdW5jdGlvbih0KXt2YXIgcj10aGlzO3RyeXt2YXIgaT10aGlzLlJxLk9xLmdldCh0KTtpZihudWxsIT1pKXt2YXIgbj10aGlzLk1NLmhhcyh0KSxzPXRoaXMuTU0uZ2V0KHQpLG89bj9zOjAsYT1udWxsIT1pLk5xP2kuTnFbaS5OcS5sZW5ndGgtMV0uZHVyYXRpb246ZS5wcSxjPW8rYSx1PU1hdGgubWF4KDEsYy1oLkZyYW1ld29yay50aW1lKCkrZS5kcSk7dGhpcy5sb2dnZXIuaW5mbyhcIkhMUyBQUkVGRVRDSElORyBNRVRBREFUQSBcIitpLnlNK1wiIEJJVFJBVEUgXCIrdCtcIiBJTiBcIit1KTt2YXIgbD1oLkZyYW1ld29yay5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5GTSh0LGkueU0saC5GcmFtZXdvcmsudGltZSgpKX0sdSk7dGhpcy5ETS5zZXQodCxsKX1lbHNlIHRoaXMubG9nZ2VyLndhcm4oXCJOTyBTVFJFQU0gV0lUSCBCVCBcIit0KX1jYXRjaChlKXtkLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2NoZWR1bGluZyBtZXRhZGF0YSBwcmVmZXRjaFwiLHRoaXMubG9nZ2VySWQsZi5ocy5kaS5waSxlKX19LHMucHJvdG90eXBlLkZNPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLk1NLmdldChlKTtpZihudWxsPT1pJiYoaT0wKSxpPnIpdGhpcy5rTShlKTtlbHNle3ZhciBuPW5ldyBjLkhpdmVSZXF1ZXN0KHRoaXMudGlja2V0LnNlc3Npb25JZCk7bi5vcGVuKFwiR0VUXCIsdCksbi5pbnRlcm5hbD0hMCxuLnNlbmQoKSx0aGlzLkRNLmRlbGV0ZShlKSx0aGlzLk1NLnNldChlLGguRnJhbWV3b3JrLnRpbWUoKSl9fSxzLnByb3RvdHlwZS5MTT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5ETS5rZXlzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj1lLkRNLmdldCh0KTtoLkZyYW1ld29yay5jbGVhclRpbWVvdXQociksZS5ETS5kZWxldGUodCl9KX0scy5wcm90b3R5cGUuYWs9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuVE0uY2FsbCh0aGlzLGUuY3EsZS51cSl9LHMucHJvdG90eXBlLm5rPWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1lLnVybCxyPXRoaXMuUnEudk0odCk7cmV0dXJuIG51bGwhPXI/dGhpcy5FTShyLnlNKTpudWxsfWNhdGNoKGUpe3JldHVybiBkLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZ2V0dGluZyB0aGUgbmV4dCBlbnRpdHlcIix0aGlzLmxvZ2dlcklkLGYuaHMuZGkueHIsZSksbnVsbH19LHMucHJvdG90eXBlLmRrPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiByLWV9LHMucHJvdG90eXBlLnBrPWZ1bmN0aW9uKCl7cmV0dXJuIGUubHF9LHMucHJvdG90eXBlLnhNPWZ1bmN0aW9uKCl7cmV0dXJuIGUuZ3F9LHMucHJvdG90eXBlLmxrPWZ1bmN0aW9uKGUsdCl7dHJ5e3ZhciByPXRoaXMuUEQoKSxpPXRoaXMuQk0oKSxuPXIuQV8oKSxzPTA7aWYoZT5uKWZvcih2YXIgbz10aGlzLlJxLnFNKG4sdCk7byYmby5pZDxlOylzKz1vLmR1cmF0aW9uLHRoaXMubG9nZ2VyLmRlYnVnKFwiU2VnbWVudCBkdXJhdGlvbiBcIitvLmR1cmF0aW9uK1wiIHRvdGFsIG1zZWMgXCIrcytcInNlZ21lbnQgaWQgXCIrby5pZCksbz1vLm5leHQ7dmFyIGE9aC5GcmFtZXdvcmsudGltZSgpLWk7cmV0dXJuIE1hdGgubWF4KDAscy1hKX1jYXRjaChlKXtyZXR1cm4gZC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGdldHRpbmcgdGhlIGRpc3RhbmNlIGR1cmF0aW9uXCIsdGhpcy5sb2dnZXJJZCxmLmhzLmRpLktyLGUpLDB9fSxzfShzLkdNKTtlLkRxPWd9KHQuYnF8fCh0LmJxPXt9KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDMpLG49cig0KSxzPXIoMCksbz1yKDg5KSxhPXIoNjIpLGg9cig5MCksYz1yKDEpLHU9cigyKSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubG9nZ2VySWQ9XCJbTElWRSBDQUNIRV0gXCIsdGhpcy5rcT1uZXcgaSx0aGlzLkxxPS0xLHRoaXMuTXE9W10sdGhpcy5sb2dnZXI9cy5GcmFtZXdvcmsucmVzb2x2ZShzLkZyYW1ld29yay5WLlIpLmxvZygpfXJldHVybiBlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUsdCl7dGhpcy5GcT1lLHRoaXMuVXE9dH0sZS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGUpe3ZhciB0PW4uZGVmZXIoKTt0cnl7dmFyIHI9ZS5aZigpLGk9ZS5yZXNwb25zZUhlYWRlcnMscz1lLmpmLGw9ZS5xZi5QZi0xLHA9ZS5xZi5QZjstMT09dGhpcy5McSYmdGhpcy5CcSgpO3ZhciBkPW51bGwsZj0hMTtpZih0aGlzLmtxLmhhcyhyKSl7ZD10aGlzLmtxLmdldChyKTt2YXIgZz1uZXcgYS5GRigwLGwscCk7Zj0hMCxkLmNvbnRlbnQuZm9yRWFjaChmdW5jdGlvbihlLHQpe2lmKGEuSEYuQkYodCkuTUYoZykpcmV0dXJuIHZvaWQoZj0hMSl9KX1lbHNle3ZhciBFPW5ldyBhLkZGKDAsbCxwKS50b1N0cmluZygpO2Q9bmV3IGguSHEoZS56ZiksZS54cSYmKGQucXE9ZS54cS5Fay5wZWVySW5mbyksZC5jb250ZW50LnNldChFLG5ldyBvLkdxKHAscyxlLnFmLGUuSmYoKSkpLHRoaXMua3Euc2V0KHIsZCksZj0hMCx0aGlzLk1xLnVuc2hpZnQocil9bnVsbD09ZC5oZWFkZXJzJiZudWxsIT1pJiYoZC5oZWFkZXJzPWkpLHQucmVzb2x2ZShmKX1jYXRjaChlKXtjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgYWRkaW5nIGZyYWdtZW50IGluIExpdmVDYWNoZVwiLHRoaXMubG9nZ2VySWQsdS5ocy51dC5pdCxlKSx0LnJlamVjdChcIkNBQ0hFIFBVVCBFUlJPUiBcIitlKX1yZXR1cm4gdC5Tc30sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3ZhciB0PW4uZGVmZXIoKTt0cnl7dmFyIHI9dGhpcy5rcS5nZXQoZSk7aWYobnVsbCE9cil7dmFyIGk9bnVsbDtyLmNvbnRlbnQuZm9yRWFjaChmdW5jdGlvbihlLHQpe2lmKGEuSEYuQkYodCkua0YoKSlyZXR1cm4gaT1lLGkuaGVhZGVycz1yLmhlYWRlcnMsdm9pZChpLnFxPXIucXEpfSksdC5yZXNvbHZlKGkpfWVsc2UgdC5yZXNvbHZlKG51bGwpfWNhdGNoKGUpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBnZXR0aW5nIGZyYWdtZW50IGZyb20gTGl2ZUNhY2hlXCIsdGhpcy5sb2dnZXJJZCx1LmhzLnV0Lm50LGUpLHQucmVqZWN0KFwiQ0FDSEUgR0VUIEVSUk9SIFwiK2UpfXJldHVybiB0LlNzfSxlLnByb3RvdHlwZS5paz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIHRoaXMua3Eua2V5cygpfWNhdGNoKGUpe3JldHVybiBjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZ2V0dGluZyBrZXlzIGZyb20gTGl2ZUNhY2hlXCIsdGhpcy5sb2dnZXJJZCx1LmhzLnV0Lm90LGUpLFtdfX0sZS5wcm90b3R5cGUuVnE9ZnVuY3Rpb24oZSl7dmFyIHQ9bi5kZWZlcigpO3RyeXt0LnJlc29sdmUodGhpcy5rcS52YWx1ZXMoKSl9Y2F0Y2goZSl7Yy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGdldHRpbmcgZWxlbWVudHMgZnJvbSBMaXZlQ2FjaGVcIix0aGlzLmxvZ2dlcklkLHUuaHMudXQuYXQsZSksdC5yZWplY3QoXCJDQUNIRSBHRVQgRUxFTUVOVFMgRVJST1IgXCIrZSl9cmV0dXJuIHQuU3N9LGUucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGUpe3ZhciB0PW4uZGVmZXIoKTt0cnl7dGhpcy5rcS5oYXMoZSk/dC5yZXNvbHZlKCEwKTp0LnJlc29sdmUoITEpfWNhdGNoKGUpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjaGVja2luZyBpZiBMaXZlQ2FjaGUgY29udGFpbnMgdGhlIGZyYWdtZW50XCIsdGhpcy5sb2dnZXJJZCx1LmhzLnV0LnN0LGUpLHQucmVqZWN0KFwiQ0FDSEUgQ09OVEFJTlMgRVJST1IgXCIrZSl9cmV0dXJuIHQuU3N9LGUucHJvdG90eXBlLkJxPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmpxKCksdGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIlN0YXJ0aW5nIGNhY2hlIHBlcmlvZGljIHB1cmdlXCIpLHRoaXMuTHE9cy5GcmFtZXdvcmsuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtlLm0oKX0sdGhpcy5VcSl9LGUucHJvdG90eXBlLmpxPWZ1bmN0aW9uKCl7LTEhPXRoaXMuTHEmJih0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiIFN0b3BwaW5nIGNhY2hlIHBlcmlvZGljIHB1cmdlXCIpLHMuRnJhbWV3b3JrLmNsZWFySW50ZXJ2YWwodGhpcy5McSksdGhpcy5McT0tMSl9LGUucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RyeXt2YXIgdD0wLHI9MCxpPTA7dGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIiBSVU5OSU5HIEdDXCIpLHRoaXMuTXEuZXZlcnkoZnVuY3Rpb24oaSxuKXt2YXIgcz1lLmtxLmdldChpKS5zaXplKCk7cmV0dXJuIHQrcz5lLkZxPyhyPW4sITEpOih0Kz1zLCEwKX0pfHwoaT10aGlzLk1xLmxlbmd0aC1yLHRoaXMuTXEuc3BsaWNlKHIsdGhpcy5NcS5sZW5ndGgtMSkuZm9yRWFjaChmdW5jdGlvbih0KXtlLmtxLmRlbGV0ZSh0KX0pKSx0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiIEdDIERPTkUgLSBSRU1PVkVEOiBcIitpK1wiIC0gQ1VSUkVOVCBJVEVNUzogXCIrdGhpcy5rcS5sZW5ndGgrXCIgU0laRTogXCIrdCtcIiBcIiksMD09PXRoaXMua3EubGVuZ3RoJiYodGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIiBDYWNoZSBjb250YWlucyBubyBpdGVtcywgc3RvcHBpbmcgcHVyZ2UgdGltZXJcIiksdGhpcy5qcSgpKX1jYXRjaChlKXtjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgcHVyZ2luZyBMaXZlQ2FjaGVcIix0aGlzLmxvZ2dlcklkLHUuaHMudXQuY3QsZSl9fSxlLnByb3RvdHlwZS5RcT1mdW5jdGlvbigpe3RoaXMua3E9bmV3IGksdGhpcy5NcT1bXX0sZS5wcm90b3R5cGUuS3E9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMua3EuZm9yRWFjaChmdW5jdGlvbih0LHIpe2UubG9nZ2VyLmRlYnVnKFwiRUlEPVwiK3IpLHQuY29udGVudC5mb3JFYWNoKGZ1bmN0aW9uKHQscil7ZS5sb2dnZXIuZGVidWcoXCJcXHRSQU5HRSBcIixyKX0pfSl9LGV9KCk7dC5ZcT1sfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGkpe3RoaXMubGVuZ3RoPWUsdGhpcy5kYXRhPXQsdGhpcy5xZj1yLHRoaXMuV3E9aX1yZXR1cm4gZX0oKTt0LkdxPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDYyKSxuPXIoMykscz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5oZWFkZXJzPW51bGwsdGhpcy5xcT1udWxsLHRoaXMudG90YWxTaXplPTAsdGhpcy56cT0hMSx0aGlzLnpmPWUsdGhpcy5jb250ZW50PW5ldyBufXJldHVybiBlLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7dmFyIGU9MDtyZXR1cm4gdGhpcy5jb250ZW50LmZvckVhY2goZnVuY3Rpb24odCxyKXtlKz1pLkhGLkJGKHIpLnNpemUoKX0pLGV9LGV9KCk7dC5IcT1zfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7IWZ1bmN0aW9uKGUpe2VbZS5KcT0wXT1cIkFMTFwiLGVbZS5BUz0xXT1cIkFTXCIsZVtlLm5EPTJdPVwiU0lURVwifSh0LlhxfHwodC5YcT17fSkpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigwKSxuPXIoMjUpLHM9cig1KSxvPXIoMTApLGE9cig0KSxoPXIoMyksYz1yKDU5KSx1PXIoMTcxKSxsPXIoMSkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLlpxPSExLHRoaXMubG9nZ2VySWQ9XCJbVURQTGVhZGVyRWxlY3Rpb25dIFwiLHRoaXMuTmc9aS5GcmFtZXdvcmsucmVzb2x2ZShpLkZyYW1ld29yay5WLkYpLHRoaXMuJHE9bmV3IGgsdGhpcy5lRz1uZXcgaCx0aGlzLnRHPW5ldyBoLHRoaXMuckc9bmV3IGgsdGhpcy5pRz1uZXcgaCx0aGlzLm5HPVtdfXJldHVybiBlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUpe3RoaXMuc0c9ZSx0aGlzLmxvZ2dlcj1pLkZyYW1ld29yay5yZXNvbHZlKGkuRnJhbWV3b3JrLlYuUikubG9nKGUuc2Vzc2lvbklkKSx0aGlzLnlEPWUueUQsdGhpcy5vRz1lLm9HLHRoaXMubUQ9ZS5tRH0sZS5wcm90b3R5cGUuYUc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9YS5kZWZlcigpO3RyeXtpZih0aGlzLlpxKXt2YXIgbj1udWxsO2UucHJpdmF0ZUlwU3RyaW5nJiYobj1lLnByaXZhdGVJcFN0cmluZyk7dmFyIHM9bmV3IHUuaEcoZS5ndWlkLGUucmFua1ZhbHVlLG4sZS5pc0xlYWRlcik7aWYodGhpcy4kcS5oYXMocy51dWlkKSl7dmFyIG89dGhpcy4kcS5nZXQocy51dWlkKTtvLnVkcFNjb3JlPT1zLnVkcFNjb3JlJiZvLmNHPT1zLmNHP2kucmVzb2x2ZSgpOih0aGlzLiRxLnNldChzLnV1aWQscyksdGhpcy51RygpLHRoaXMubEcocykudGhlbihmdW5jdGlvbigpe2kucmVzb2x2ZSgpfSkuZmFpbChmdW5jdGlvbihlKXtyLiRxLmRlbGV0ZShzLnV1aWQpLHIudUcoKSxpLnJlamVjdChlKX0pKX1lbHNlIHQ/KHMucEc9dCx0aGlzLmxvZ2dlci5pbmZvKHRoaXMubG9nZ2VySWQrXCIgTkVXIE1FTUJFUiBHVUlEIFwiK3MudXVpZCtcIiBSQU5LSU5HIFwiK3MudWRwU2NvcmUrXCIgTEVBREVSIFwiK3MuY0cpLHRoaXMuJHEuc2V0KHMudXVpZCxzKSx0aGlzLnVHKCksdGhpcy5sRyhzKS50aGVuKGZ1bmN0aW9uKCl7ci5kRyhyLiRxLmdldChzLnV1aWQpKSxpLnJlc29sdmUoKX0pLmZhaWwoZnVuY3Rpb24oZSl7ci4kcS5kZWxldGUocy51dWlkKSxyLnVHKCksaS5yZWplY3QoZSl9KSk6dGhpcy5mRyhzKS50aGVuKGZ1bmN0aW9uKGUpe3MucEc9ZSxyLmxvZ2dlci5pbmZvKHIubG9nZ2VySWQrXCIgTkVXIE1FTUJFUiBHVUlEIFwiK3MudXVpZCtcIiBSQU5LSU5HIFwiK3MudWRwU2NvcmUrXCIgTEVBREVSIFwiK3MuY0cpLHIuJHEuc2V0KHMudXVpZCxzKSxyLnVHKCksci5sRyhzKS50aGVuKGZ1bmN0aW9uKCl7aS5yZXNvbHZlKCl9KS5mYWlsKGZ1bmN0aW9uKGUpe3IuJHEuZGVsZXRlKHMudXVpZCksci51RygpLGkucmVqZWN0KGUpfSl9KS5mYWlsKGZ1bmN0aW9uKGUpe2kucmVqZWN0KGUpfSl9ZWxzZSBpLnJlamVjdChcIkxFQURFUiBFTEVDVElPTiBOT1QgU1RBUlRFRCBZRVRcIil9Y2F0Y2goZSl7aS5yZWplY3QoXCJUUklHR0VSIExFQURFUiBFTEVDVElPTiBFUlJPUiBcIitlKX1yZXR1cm4gaS5Tc30sZS5wcm90b3R5cGUuZEc9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IG8uYmMoby5UYy5XLG51bGwpO3QuZ3VpZD1lLnV1aWQsdC5pc0xlYWRlcj1lLmNHLHQucmFua1ZhbHVlPWUudWRwU2NvcmU7dmFyIHI9W3RdO3RoaXMub0cuZ0cociwhMSl9LGUucHJvdG90eXBlLmZHPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1hLmRlZmVyKCk7cmV0dXJuIHRoaXMuckcuaGFzKGUudXVpZCl8fHRoaXMudEcuaGFzKGUudXVpZCk/ci5yZWplY3QoZC5FRyk6KHRoaXMuckcuc2V0KGUudXVpZCxEYXRlLm5vdygpKSx0aGlzLk5nLmNvbm5lY3QoZS51dWlkKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciBuPWkuUGcud2codC5zRy5zd2FybUlkKTtudWxsPT1uPyhuPWkuUGcuVGcodC5zRy5zd2FybUlkKSx0LnZHKG4pLnRoZW4oZnVuY3Rpb24oKXtyLnJlc29sdmUoaSl9KS5mYWlsKGZ1bmN0aW9uKGUpe3IucmVqZWN0KGUpfSkuZG9uZSgpKTp0LmlHLmdldChlLnV1aWQpP3IucmVzb2x2ZShpKToodC5yRy5kZWxldGUoZS51dWlkKSx0LnZHKG4pLnRoZW4oZnVuY3Rpb24oKXtyLnJlc29sdmUoaSl9KS5mYWlsKGZ1bmN0aW9uKGUpe3IucmVqZWN0KGUpfSkuZG9uZSgpKX0pLmZhaWwoZnVuY3Rpb24oaSl7dC5yRy5kZWxldGUoZS51dWlkKSxyLnJlamVjdChpKX0pLmRvbmUoKSksci5Tc30sZS5wcm90b3R5cGUudkc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWEuZGVmZXIoKSxvPW5ldyBuLlJmLkZhLkpnLlVEUEhhbmRzaGFrZU1lc3NhZ2U7by51dWlkPXRoaXMueUcudXVpZCxvLnVkcFNjb3JlPXRoaXMueUcudWRwU2NvcmUsby5pc0xlYWRlcj10aGlzLnlHLmNHLG8uc3RyZWFtSWQ9dGhpcy55Ry5zdHJlYW1JZCx0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiTVNHIHV1aWQgXCIrby51dWlkK1wiIHJhbmtWYWx1ZSBcIitvLnVkcFNjb3JlK1wiIGlzTGVhZGVyIFwiK28uaXNMZWFkZXIrXCIgc3RyZWFtIGlkIFwiK28uc3RyZWFtSWQpO3ZhciBoPWkuRnJhbWV3b3JrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LlRHKGUub3RoZXJHdWlkKX0scy5oaC5VRFBCcm9hZGNhc3QuR2EpO3JldHVybiB0aGlzLnRHLnNldChlLm90aGVyR3VpZCx7bUc6aCxkZWZlcjpyfSksZS5MZyhuLlJmLkVnLmRnLG8pLHIuU3N9LGUucHJvdG90eXBlLlRHPWZ1bmN0aW9uKGUpe2lmKHRoaXMudEcuaGFzKGUpKXt0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiIEhBTkRTSEFLRSBSRVEgRVhQSVJFRCBUTyBcIitlKTt2YXIgdD10aGlzLnRHLmdldChlKTt0aGlzLnRHLmRlbGV0ZShlKSx0LmRlZmVyLnJlamVjdChcIkVYUElSRURcIil9fSxlLnByb3RvdHlwZS5JRz1mdW5jdGlvbihlLHQpe3RyeXt0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiSEFORFNIQUtFIFJFU1AgUkVDRUlWRUQgRlJPTSBcIit0Lm90aGVyR3VpZCk7dmFyIHI9dC5vdGhlckd1aWQsbj10aGlzLnRHLmdldChyKTtpLkZyYW1ld29yay5jbGVhclRpbWVvdXQobi5tRyksdGhpcy50Ry5kZWxldGUociksbi5kZWZlci5yZXNvbHZlKHQpfWNhdGNoKGUpe2wuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJIQU5EU0hBS0UgUkVTUE9OU0UgUkVDRUlWRUQgRkFJTEVEXCIsdGhpcy5sb2dnZXJJZCxlKX19LGUucHJvdG90eXBlLlNHPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0cnl7dmFyIGk9bmV3IG8uYmMoby5UYy5XLG51bGwsZS5pc0xlYWRlcik7aWYoaS5ndWlkPWUudXVpZCxpLnJhbmtWYWx1ZT1lLnVkcFNjb3JlLGUuc3RyZWFtSWQ9PT10aGlzLnlELmdldENvbnRleHRJZCgpKXt2YXIgbj10LlBnLndnKHRoaXMuc0cuc3dhcm1JZCk7dGhpcy5pRy5zZXQoZS51dWlkLGUudXVpZCksdGhpcy5SRyhuLFwiT0tcIiksdGhpcy5hRyhpLHQpLnRoZW4oZnVuY3Rpb24oKXt9KS5mYWlsKGZ1bmN0aW9uKGUpe2wuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJMRUFERVIgRUxFQ1RJT04gRkFJTEVEXCIsci5sb2dnZXJJZCxlKX0pfX1jYXRjaChlKXtsLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiSEFORFNIQUtFIFJFUVVFU1QgRkFJTEVEXCIsdGhpcy5sb2dnZXJJZCxlKX19LGUucHJvdG90eXBlLlJHPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IG4uUmYuRmEuSmcuVURQSGFuZHNoYWtlUmVzcG9uc2U7ci5hY2NlcHQ9dCxlLkxnKG4uUmYuRWcuVURQSGFuZHNoYWtlUmVzcG9uc2UsciksdGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIlNFTkQgSEFORFNIQUtFIFJFU1BPTlNFIFRPIFwiK2Uub3RoZXJHdWlkKX0sZS5wcm90b3R5cGUubEc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWEuZGVmZXIoKTtpZih0aGlzLndHKCkpe3ZhciBpPSExO3RoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIkkgSEFWRSBUSEUgSElHSEVTVCBTQ09SRVwiKSxlLmNHJiYhdGhpcy5lRy5oYXMoZS51dWlkKSYmKGk9ITAsdGhpcy5sb2dnZXIuaW5mbyh0aGlzLmxvZ2dlcklkK1wiU0VORCBTV0lUQ0ggUkVRVUVTVCBUTyBcIitlLnV1aWQpLHRoaXMuYkcoZSkudGhlbihmdW5jdGlvbigpe3IucmVzb2x2ZSgpfSkuZmFpbChmdW5jdGlvbihlKXszPT1lLkNHPyh0LmxvZ2dlci5kZWJ1Zyh0LmxvZ2dlcklkK1wiIFNXSVRDSCBSRVFVRVNUIFdBUyBDQU5DRUxFRC5cIiksci5yZXNvbHZlKCkpOihlLkNHPTIpJiZyLnJlamVjdChlKX0pKSx0aGlzLnlHLmNHfHxudWxsPT10aGlzLl9HfHx0aGlzLl9HLnV1aWQ9PWUudXVpZHx8dGhpcy5lRy5oYXModGhpcy5fRy51dWlkKXx8KHRoaXMubG9nZ2VyLmluZm8oXCJTRU5EIFNXSVRDSCBSRVFVRVNUIFRPIFRIRSBBTFJFQURZIEtOT1dOIExFQURFUlwiKSxpPSEwLHRoaXMuYkcodGhpcy5fRykudGhlbihmdW5jdGlvbigpe3IucmVzb2x2ZSgpfSkuZmFpbChmdW5jdGlvbihlKXszPT1lLkNHPyh0LmxvZ2dlci5kZWJ1Zyh0LmxvZ2dlcklkK1wiIFNXSVRDSCBSRVFVRVNUIFdBUyBDQU5DRUxFRC5cIiksci5yZXNvbHZlKCkpOihlLkNHPTIpJiZyLnJlamVjdChlKX0pKSxudWxsIT10aGlzLl9HfHxlLmNHfHx0aGlzLnlHLmNHfHwwIT10aGlzLmVHLmxlbmd0aHx8KHRoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIkJFQ09NRSBMRUFERVJcIiksdGhpcy5QRygpKSxpfHxyLnJlc29sdmUoKX1lbHNlIHRoaXMuQUcoZSk/KHRoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIlBFRVIgXCIrZS51dWlkK1wiIEhBUyBUSEUgSElHSEVTVCBTQ09SRVwiKSx0aGlzLk9HKCksdGhpcy55Ry5jRyYmZS5jRyYmdGhpcy5zdGVwRG93bigpLHRoaXMuTkcoZSksci5yZXNvbHZlKCkpOnIucmVzb2x2ZSgpO3JldHVybiByLlNzfSxlLnByb3RvdHlwZS5ORz1mdW5jdGlvbihlKXt0cnl7dGhpcy5sb2dnZXIuaW5mbyh0aGlzLmxvZ2dlcklkK1wiVVBEQVRFIFRIRSBMRUFERVJTSElQXCIpLG51bGwhPXRoaXMuX0cmJnRoaXMuJHEuaGFzKHRoaXMuX0cudXVpZCkmJih0aGlzLiRxLmdldCh0aGlzLl9HLnV1aWQpLmNHPSExKSx0aGlzLiRxLmhhcyhlLnV1aWQpPyh0aGlzLiRxLmdldChlLnV1aWQpLnVkcFNjb3JlPWUudWRwU2NvcmUsdGhpcy5fRz1lLHRoaXMuJHEuZ2V0KGUudXVpZCkuY0c9ITApOih0aGlzLmxvZ2dlci53YXJuKHRoaXMubG9nZ2VySWQrXCJTRVQgQSBMRUFERVIgVEhBVCBJUyBOT1QgQSBMQU4gTUVNQkVSIExJU1QuIFNIT1VMRCBORVZFUiBIQVBQRU5cIiksdGhpcy4kcS5zZXQoZS51dWlkLGUpLHRoaXMuX0c9ZSksdGhpcy55RC5ERyhlKSx0aGlzLmxvZ2dlci5pbmZvKHRoaXMubG9nZ2VySWQrXCJORVcgS05PV04gTEVBREVSIFwiK3RoaXMueUQuUmsoKS51dWlkKX1jYXRjaChlKXtsLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKGUsdGhpcy5sb2dnZXJJZCl9fSxlLnByb3RvdHlwZS5zdGVwRG93bj1mdW5jdGlvbigpe3RoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIlNURVAgRE9XTlwiKSx0aGlzLnlHLmNHPSExLHRoaXMueUQua0coITEpLHMuaGguZmEuaWEmJih0aGlzLm1ELkxHKCksdGhpcy5tRC5NRyghMSkpfSxlLnByb3RvdHlwZS5PRz1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmVHLmtleXMoKSx0PTAscj1lO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdLHM9dGhpcy5lRy5nZXQobik7dGhpcy5lRy5kZWxldGUobiksaS5GcmFtZXdvcmsuY2xlYXJUaW1lb3V0KHMubUcpLHMuZGVmZXIucmVqZWN0KHtDRzozLG1lc3NhZ2U6XCJDQU5DRUxFRCBQRU5ESU5HIFJFU1BPTlNFU1wifSl9fSxlLnByb3RvdHlwZS5BRz1mdW5jdGlvbihlKXtyZXR1cm4gZS51dWlkPT10aGlzLm5HWzBdLnV1aWR9LGUucHJvdG90eXBlLndHPWZ1bmN0aW9uKCl7cmV0dXJuIHUuaEcuSkUodGhpcy55Ryx0aGlzLm5HWzBdKTwwfSxlLnByb3RvdHlwZS51Rz1mdW5jdGlvbigpe3ZhciBlPW5ldyBjKHRoaXMuJHEudmFsdWVzKCkpLHQ9ZS5GYyh1LmhHLkpFKTtlLnB1c2godGhpcy55RyksdGhpcy55RC5GRyh0KTt2YXIgcj1uZXcgYyh0aGlzLiRxLnZhbHVlcygpKTt0aGlzLm5HPXIuRmModS5oRy5KRSl9LGUucHJvdG90eXBlLlVHPWZ1bmN0aW9uKGUpe3RoaXMuQkcoZSl9LGUucHJvdG90eXBlLkJHPWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIkVWQUxVQVRFIFRIRSBTV0lUQ0ggUkVRVUVTVCBGUk9NIFwiK2UudXVpZCk7dmFyIHQ9dm9pZCAwO3RoaXMuJHEuaGFzKGUudXVpZCk/dD10aGlzLiRxLmdldChlLnV1aWQpOnRoaXMubG9nZ2VyLndhcm4oXCJJIFJFQ0VJVkVEIEEgU1dJVENIIFJFUVVFU1QgRlJPTSBBTiBVTktOT1dOIE1FTUJFUi4gVEhJUyBTSE9VTEQgTkVWRVIgSEFQUEVOXCIpLHQmJih0aGlzLnlHLmNHP3RoaXMud0coKT90aGlzLkhHKHQsITEpOih0aGlzLnN0ZXBEb3duKCksdGhpcy5PRygpLHRoaXMuTkcodCksdGhpcy5IRyh0LCEwKSk6dGhpcy5BRyh0KT8odGhpcy5ORyh0KSx0aGlzLkhHKHQsITApKTp0aGlzLkhHKHQsITEpKX0sZS5wcm90b3R5cGUuSEc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3RoaXMueEcoZS5wRyx0KS50aGVuKGZ1bmN0aW9uKCl7fSkuZmFpbChmdW5jdGlvbihlKXtsLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiU0VORCBTV0lUQ0ggUkVTUE9OU0UgRVJST1JcIixyLmxvZ2dlcklkLGUpfSkuZG9uZSgpfSxlLnByb3RvdHlwZS54Rz1mdW5jdGlvbihlLHQpe3ZhciByPWEuZGVmZXIoKSxpPW5ldyBuLlJmLkZhLkpnLlVEUFN3aXRjaExlYWRlcnNoaXBBY2s7cmV0dXJuIGkub2s9dCxlLlBnLndnKHRoaXMuc0cuc3dhcm1JZCkuTGcobi5SZi5FZy5mZyxpKSxyLlNzfSxlLnByb3RvdHlwZS5iRz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9YS5kZWZlcigpO3JldHVybiB0aGlzLnFHKGUucEcpLnRoZW4oZnVuY3Rpb24oaSl7dC5HRyhpLGUpLHIucmVzb2x2ZSgpfSkuZmFpbChmdW5jdGlvbihlKXtyLnJlamVjdChlKX0pLmRvbmUoKSxyLlNzfSxlLnByb3RvdHlwZS5HRz1mdW5jdGlvbihlLHQpe3RyeXtlPyh0aGlzLiRxLmdldCh0LnV1aWQpLmNHPSExLHRoaXMuX0c9dGhpcy55Ryx0aGlzLlBHKCkpOih0aGlzLk9HKCksdGhpcy4kcS5nZXQodC51dWlkKS5jRz0hMCx0aGlzLnN0ZXBEb3duKCksdGhpcy5ORyh0KSl9Y2F0Y2goZSl7bC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkhBTkRMRSBMRUFERVJTSElQIFNXSVRDSCBSRVNQT05TRSBFUlJPUlwiLHRoaXMubG9nZ2VySWQsZSl9fSxlLnByb3RvdHlwZS5WRz1mdW5jdGlvbihlLHQpe2lmKHRoaXMuZUcuaGFzKHQpKXt2YXIgcj10aGlzLmVHLmdldCh0KTtpLkZyYW1ld29yay5jbGVhclRpbWVvdXQoci5tRyksdGhpcy5lRy5kZWxldGUodCksci5kZWZlci5yZXNvbHZlKGUub2spfWVsc2UgdGhpcy5sb2dnZXIud2Fybih0aGlzLmxvZ2dlcklkK1wiIFNXSVRDSCBMRUFERVJTSElQIFJFU1BPTlNFIFJFQ0VJVkVEIEZST00gVU5LTk9XTiBQRUVSIFwiK3QpfSxlLnByb3RvdHlwZS5xRz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9YS5kZWZlcigpLG89bmV3IG4uUmYuRmEuSmcuVURQU3dpdGNoTGVhZGVyc2hpcFJlcXVlc3Q7by51dWlkPXRoaXMueUcudXVpZCxvLnVkcFNjb3JlPXRoaXMueUcudWRwU2NvcmUsdGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIlNXSVRDSCBMRUFERVJTSElQIFJFUVVFU1QgVE8gXCIrZS5vdGhlckd1aWQpO3ZhciBoPWkuRnJhbWV3b3JrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmpHKGUub3RoZXJHdWlkKX0scy5oaC5VRFBCcm9hZGNhc3QucWEpO3RoaXMuZUcuc2V0KGUub3RoZXJHdWlkLHttRzpoLGRlZmVyOnJ9KTt2YXIgYz1lLlBnLndnKHRoaXMuc0cuc3dhcm1JZCk7cmV0dXJuIGkuRnJhbWV3b3JrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLkxnKG4uUmYuRWcuVURQU3dpdGNoTGVhZGVyc2hpcFJlcXVlc3Qsbyl9LDEpLHIuU3N9LGUucHJvdG90eXBlLmpHPWZ1bmN0aW9uKGUpe2lmKHRoaXMuZUcuaGFzKGUpKXt0aGlzLmxvZ2dlci5pbmZvKHRoaXMubG9nZ2VySWQrXCIgU1dJVENIIExFQURFUlNISVAgRVhQSVJFRCBUTyBcIitlKTt2YXIgdD10aGlzLmVHLmdldChlKTt0aGlzLmVHLmRlbGV0ZShlKSx0LmRlZmVyLnJlamVjdCh7Q0c6MixtZXNzYWdlOlwiRVhQSVJFRFwifSl9fSxlLnByb3RvdHlwZS5QRz1mdW5jdGlvbigpe3RoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIkJFQ09NSU5HIExBTiBMRUFERVJcIiksbnVsbCE9dGhpcy5fRyYmdGhpcy4kcS5oYXModGhpcy5fRy51dWlkKSYmKHRoaXMuJHEuZ2V0KHRoaXMuX0cudXVpZCkuY0c9ITEpLHRoaXMueUcuY0c9ITAsdGhpcy5fRz10aGlzLnlHLHRoaXMueUQua0coITApLHRoaXMueUQuREcodGhpcy55Rykscy5oaC5mYS5pYSYmKHRoaXMubUQuTEcoKSx0aGlzLm1ELk1HKCEwKSl9LGUucHJvdG90eXBlLlVkPWZ1bmN0aW9uKGUpe3RoaXMueUc9bmV3IHUuaEcodGhpcy55RC5nZXRJZCgpLHRoaXMueUQuUUcoKSxcIlwiLCExLHRoaXMueUQuZ2V0Q29udGV4dElkKCkpLHRoaXMuWnE9ITAsdGhpcy5sb2dnZXIuaW5mbyh0aGlzLmxvZ2dlcklkK1wiIFVEUCBMRUFERVIgRUxFQ1RJT04gU1RBUlRFRFwiKX0sZS5wcm90b3R5cGUuS0c9ZnVuY3Rpb24oZSl7dGhpcy4kcS5kZWxldGUoZSksdGhpcy51RygpLDA9PXRoaXMuJHEubGVuZ3RoPyh0aGlzLnlHLmNHPSExLHRoaXMuX0c9bnVsbCx0aGlzLnlELmtHKCExKSx0aGlzLnlELllHKCExKSx0aGlzLm1ELkxHKCksdGhpcy5tRC5NRyghMSkpOnRoaXMud0coKT90aGlzLlBHKCk6dGhpcy5uRy5sZW5ndGg+MCYmdGhpcy5ORyh0aGlzLm5HWzBdKX0sZX0oKTt0LldHPXA7dmFyIGQ7IWZ1bmN0aW9uKGUpe2VbZS56Rz0wXT1cIkZBSUxVUkVcIixlW2UuRUc9MV09XCJBTFJFQURZX1BFTkRJTkdcIn0oZD10LkpHfHwodC5KRz17fSkpfSxmdW5jdGlvbihlLHQscil7dmFyIGksbixzOy8qKlxuICogQGxpY2Vuc2UgTG9uZy5qcyAoYykgMjAxMyBEYW5pZWwgV2lydHogPGRjb2RlQGRjb2RlLmlvPlxuICogUmVsZWFzZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMFxuICogc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGNvZGVJTy9Mb25nLmpzIGZvciBkZXRhaWxzXG4gKi9cbiFmdW5jdGlvbihyLG8pe249W10saT1vLHZvaWQgMCE9PShzPVwiZnVuY3Rpb25cIj09dHlwZW9mIGk/aS5hcHBseSh0LG4pOmkpJiYoZS5pPXMpfSgwLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5sb3c9MHxlLHRoaXMuaGlnaD0wfHQsdGhpcy5GUD0hIXJ9ZS5YRyxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJfX2lzTG9uZ19fXCIse3ZhbHVlOiEwLHA6ITEsbDohMX0pLGUuWkc9ZnVuY3Rpb24oZSl7cmV0dXJuITA9PT0oZSYmZS5YRyl9O3ZhciB0PXt9LHI9e307ZS5NRT1mdW5jdGlvbihpLG4pe3ZhciBzLG87cmV0dXJuIG4/MDw9KGk+Pj49MCkmJmk8MjU2JiYobz1yW2ldKT9vOihzPW5ldyBlKGksKDB8aSk8MD8tMTowLCEwKSwwPD1pJiZpPDI1NiYmKHJbaV09cykscyk6LTEyODw9KGl8PTApJiZpPDEyOCYmKG89dFtpXSk/bzoocz1uZXcgZShpLGk8MD8tMTowLCExKSwtMTI4PD1pJiZpPDEyOCYmKHRbaV09cykscyl9LGUuREU9ZnVuY3Rpb24odCxyKXtyZXR1cm4gcj0hIXIsaXNOYU4odCl8fCFpc0Zpbml0ZSh0KT9lLlpFUk86IXImJnQ8PS1zP2UuTUlOX1ZBTFVFOiFyJiZ0KzE+PXM/ZS5NQVhfVkFMVUU6ciYmdD49bj9lLiRHOnQ8MD9lLkRFKC10LHIpLnFFKCk6bmV3IGUodCVpfDAsdC9pfDAscil9LGUucUk9ZnVuY3Rpb24odCxyLGkpe3JldHVybiBuZXcgZSh0LHIsaSl9LGUua0U9ZnVuY3Rpb24odCxyLGkpe2lmKDA9PT10Lmxlbmd0aCl0aHJvdyBFcnJvcihcIm51bWJlciBmb3JtYXQgZXJyb3I6IGVtcHR5IHN0cmluZ1wiKTtpZihcIk5hTlwiPT09dHx8XCJJbmZpbml0eVwiPT09dHx8XCIrSW5maW5pdHlcIj09PXR8fFwiLUluZmluaXR5XCI9PT10KXJldHVybiBlLlpFUk87aWYoXCJudW1iZXJcIj09dHlwZW9mIHImJihpPXIscj0hMSksKGk9aXx8MTApPDJ8fDM2PGkpdGhyb3cgRXJyb3IoXCJyYWRpeCBvdXQgb2YgcmFuZ2U6IFwiK2kpO3ZhciBuO2lmKChuPXQuaW5kZXhPZihcIi1cIikpPjApdGhyb3cgRXJyb3IoJ251bWJlciBmb3JtYXQgZXJyb3I6IGludGVyaW9yIFwiLVwiIGNoYXJhY3RlcjogJyt0KTtpZigwPT09bilyZXR1cm4gZS5rRSh0LnN1YnN0cmluZygxKSxyLGkpLnFFKCk7Zm9yKHZhciBzPWUuREUoTWF0aC5wb3coaSw4KSksbz1lLlpFUk8sYT0wO2E8dC5sZW5ndGg7YSs9OCl7dmFyIGg9TWF0aC5taW4oOCx0Lmxlbmd0aC1hKSxjPXBhcnNlSW50KHQuc3Vic3RyaW5nKGEsYStoKSxpKTtpZihoPDgpe3ZhciB1PWUuREUoTWF0aC5wb3coaSxoKSk7bz1vLm11bHRpcGx5KHUpLmFkZChlLkRFKGMpKX1lbHNlIG89by5tdWx0aXBseShzKSxvPW8uYWRkKGUuREUoYykpfXJldHVybiBvLkZQPXIsb30sZS5lVj1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGU/dDpcIm51bWJlclwiPT10eXBlb2YgdD9lLkRFKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0P2Uua0UodCk6bmV3IGUodC5sb3csdC5oaWdoLHQuRlApfTt2YXIgaT00Mjk0OTY3Mjk2LG49aSppLHM9bi8yLG89ZS5NRSgxPDwyNCk7cmV0dXJuIGUuWkVSTz1lLk1FKDApLGUudFY9ZS5NRSgwLCEwKSxlLk9ORT1lLk1FKDEpLGUuclY9ZS5NRSgxLCEwKSxlLmlWPWUuTUUoLTEpLGUuTUFYX1ZBTFVFPWUucUkoLTEsMjE0NzQ4MzY0NywhMSksZS4kRz1lLnFJKC0xLC0xLCEwKSxlLk1JTl9WQUxVRT1lLnFJKDAsLTIxNDc0ODM2NDgsITEpLGUucHJvdG90eXBlLmtQPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRlA/dGhpcy5sb3c+Pj4wOnRoaXMubG93fSxlLnByb3RvdHlwZS5uVj1mdW5jdGlvbigpe3JldHVybiB0aGlzLkZQPyh0aGlzLmhpZ2g+Pj4wKSppKyh0aGlzLmxvdz4+PjApOnRoaXMuaGlnaCppKyh0aGlzLmxvdz4+PjApfSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbih0KXtpZigodD10fHwxMCk8Mnx8MzY8dCl0aHJvdyBSYW5nZUVycm9yKFwicmFkaXggb3V0IG9mIHJhbmdlOiBcIit0KTtpZih0aGlzLnNWKCkpcmV0dXJuXCIwXCI7dmFyIHI7aWYodGhpcy5vVigpKXtpZih0aGlzLmNzKGUuTUlOX1ZBTFVFKSl7dmFyIGk9ZS5ERSh0KSxuPXRoaXMuYVYoaSk7cmV0dXJuIHI9bi5tdWx0aXBseShpKS5oVih0aGlzKSxuLnRvU3RyaW5nKHQpK3Iua1AoKS50b1N0cmluZyh0KX1yZXR1cm5cIi1cIit0aGlzLnFFKCkudG9TdHJpbmcodCl9dmFyIHM9ZS5ERShNYXRoLnBvdyh0LDYpLHRoaXMuRlApO3I9dGhpcztmb3IodmFyIG89XCJcIjs7KXt2YXIgYT1yLmFWKHMpLGg9ci5oVihhLm11bHRpcGx5KHMpKS5rUCgpPj4+MCxjPWgudG9TdHJpbmcodCk7aWYocj1hLHIuc1YoKSlyZXR1cm4gYytvO2Zvcig7Yy5sZW5ndGg8NjspYz1cIjBcIitjO289XCJcIitjK299fSxlLnByb3RvdHlwZS5jVj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhpZ2h9LGUucHJvdG90eXBlLnVWPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGlnaD4+PjB9LGUucHJvdG90eXBlLmxWPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG93fSxlLnByb3RvdHlwZS5wVj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvdz4+PjB9LGUucHJvdG90eXBlLmRWPWZ1bmN0aW9uKCl7aWYodGhpcy5vVigpKXJldHVybiB0aGlzLmNzKGUuTUlOX1ZBTFVFKT82NDp0aGlzLnFFKCkuZFYoKTtmb3IodmFyIHQ9MCE9dGhpcy5oaWdoP3RoaXMuaGlnaDp0aGlzLmxvdyxyPTMxO3I+MCYmMD09KHQmMTw8cik7ci0tKTtyZXR1cm4gMCE9dGhpcy5oaWdoP3IrMzM6cisxfSxlLnByb3RvdHlwZS5zVj1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5oaWdoJiYwPT09dGhpcy5sb3d9LGUucHJvdG90eXBlLm9WPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuRlAmJnRoaXMuaGlnaDwwfSxlLnByb3RvdHlwZS5mVj1mdW5jdGlvbigpe3JldHVybiB0aGlzLkZQfHx0aGlzLmhpZ2g+PTB9LGUucHJvdG90eXBlLmdWPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PSgxJnRoaXMubG93KX0sZS5wcm90b3R5cGUuZnY9ZnVuY3Rpb24oKXtyZXR1cm4gMD09KDEmdGhpcy5sb3cpfSxlLnByb3RvdHlwZS5jcz1mdW5jdGlvbih0KXtyZXR1cm4gZS5aRyh0KXx8KHQ9ZS5lVih0KSksKHRoaXMuRlA9PT10LkZQfHx0aGlzLmhpZ2g+Pj4zMSE9MXx8dC5oaWdoPj4+MzEhPTEpJiYodGhpcy5oaWdoPT09dC5oaWdoJiZ0aGlzLmxvdz09PXQubG93KX0sZS5FVj1lLnByb3RvdHlwZS5jcyxlLnByb3RvdHlwZS52Vj1mdW5jdGlvbihlKXtyZXR1cm4hdGhpcy5jcyhlKX0sZS55Vj1lLnByb3RvdHlwZS52VixlLnByb3RvdHlwZS5UVj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5PYyhlKTwwfSxlLnByb3RvdHlwZS5tVj1lLnByb3RvdHlwZS5UVixlLnByb3RvdHlwZS5TVj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5PYyhlKTw9MH0sZS5wcm90b3R5cGUuUlY9ZS5wcm90b3R5cGUuU1YsZS5wcm90b3R5cGUud1Y9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuT2MoZSk+MH0sZS5wcm90b3R5cGUuYlY9ZS5wcm90b3R5cGUud1YsZS5wcm90b3R5cGUuQ1Y9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuT2MoZSk+PTB9LGUucHJvdG90eXBlLl9WPWUucHJvdG90eXBlLkNWLGUucHJvdG90eXBlLk9jPWZ1bmN0aW9uKHQpe2lmKGUuWkcodCl8fCh0PWUuZVYodCkpLHRoaXMuY3ModCkpcmV0dXJuIDA7dmFyIHI9dGhpcy5vVigpLGk9dC5vVigpO3JldHVybiByJiYhaT8tMTohciYmaT8xOnRoaXMuRlA/dC5oaWdoPj4+MD50aGlzLmhpZ2g+Pj4wfHx0LmhpZ2g9PT10aGlzLmhpZ2gmJnQubG93Pj4+MD50aGlzLmxvdz4+PjA/LTE6MTp0aGlzLmhWKHQpLm9WKCk/LTE6MX0sZS5wcm90b3R5cGUucUU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5GUCYmdGhpcy5jcyhlLk1JTl9WQUxVRSk/ZS5NSU5fVkFMVUU6dGhpcy5ub3QoKS5hZGQoZS5PTkUpfSxlLnByb3RvdHlwZS5QVj1lLnByb3RvdHlwZS5xRSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7ZS5aRyh0KXx8KHQ9ZS5lVih0KSk7dmFyIHI9dGhpcy5oaWdoPj4+MTYsaT02NTUzNSZ0aGlzLmhpZ2gsbj10aGlzLmxvdz4+PjE2LHM9NjU1MzUmdGhpcy5sb3csbz10LmhpZ2g+Pj4xNixhPTY1NTM1JnQuaGlnaCxoPXQubG93Pj4+MTYsYz02NTUzNSZ0Lmxvdyx1PTAsbD0wLHA9MCxkPTA7cmV0dXJuIGQrPXMrYyxwKz1kPj4+MTYsZCY9NjU1MzUscCs9bitoLGwrPXA+Pj4xNixwJj02NTUzNSxsKz1pK2EsdSs9bD4+PjE2LGwmPTY1NTM1LHUrPXIrbyx1Jj02NTUzNSxlLnFJKHA8PDE2fGQsdTw8MTZ8bCx0aGlzLkZQKX0sZS5wcm90b3R5cGUuaFY9ZnVuY3Rpb24odCl7cmV0dXJuIGUuWkcodCl8fCh0PWUuZVYodCkpLHRoaXMuYWRkKHQucUUoKSl9LGUucHJvdG90eXBlLnN1Yj1lLnByb3RvdHlwZS5oVixlLnByb3RvdHlwZS5tdWx0aXBseT1mdW5jdGlvbih0KXtpZih0aGlzLnNWKCkpcmV0dXJuIGUuWkVSTztpZihlLlpHKHQpfHwodD1lLmVWKHQpKSx0LnNWKCkpcmV0dXJuIGUuWkVSTztpZih0aGlzLmNzKGUuTUlOX1ZBTFVFKSlyZXR1cm4gdC5nVigpP2UuTUlOX1ZBTFVFOmUuWkVSTztpZih0LmNzKGUuTUlOX1ZBTFVFKSlyZXR1cm4gdGhpcy5nVigpP2UuTUlOX1ZBTFVFOmUuWkVSTztpZih0aGlzLm9WKCkpcmV0dXJuIHQub1YoKT90aGlzLnFFKCkubXVsdGlwbHkodC5xRSgpKTp0aGlzLnFFKCkubXVsdGlwbHkodCkucUUoKTtpZih0Lm9WKCkpcmV0dXJuIHRoaXMubXVsdGlwbHkodC5xRSgpKS5xRSgpO2lmKHRoaXMuVFYobykmJnQuVFYobykpcmV0dXJuIGUuREUodGhpcy5uVigpKnQublYoKSx0aGlzLkZQKTt2YXIgcj10aGlzLmhpZ2g+Pj4xNixpPTY1NTM1JnRoaXMuaGlnaCxuPXRoaXMubG93Pj4+MTYscz02NTUzNSZ0aGlzLmxvdyxhPXQuaGlnaD4+PjE2LGg9NjU1MzUmdC5oaWdoLGM9dC5sb3c+Pj4xNix1PTY1NTM1JnQubG93LGw9MCxwPTAsZD0wLGY9MDtyZXR1cm4gZis9cyp1LGQrPWY+Pj4xNixmJj02NTUzNSxkKz1uKnUscCs9ZD4+PjE2LGQmPTY1NTM1LGQrPXMqYyxwKz1kPj4+MTYsZCY9NjU1MzUscCs9aSp1LGwrPXA+Pj4xNixwJj02NTUzNSxwKz1uKmMsbCs9cD4+PjE2LHAmPTY1NTM1LHArPXMqaCxsKz1wPj4+MTYscCY9NjU1MzUsbCs9cip1K2kqYytuKmgrcyphLGwmPTY1NTM1LGUucUkoZDw8MTZ8ZixsPDwxNnxwLHRoaXMuRlApfSxlLnByb3RvdHlwZS5BVj1lLnByb3RvdHlwZS5tdWx0aXBseSxlLnByb3RvdHlwZS5hVj1mdW5jdGlvbih0KXtpZihlLlpHKHQpfHwodD1lLmVWKHQpKSx0LnNWKCkpdGhyb3cgbmV3IEVycm9yKFwiZGl2aXNpb24gYnkgemVyb1wiKTtpZih0aGlzLnNWKCkpcmV0dXJuIHRoaXMuRlA/ZS50VjplLlpFUk87dmFyIHIsaSxuO2lmKHRoaXMuY3MoZS5NSU5fVkFMVUUpKXtpZih0LmNzKGUuT05FKXx8dC5jcyhlLmlWKSlyZXR1cm4gZS5NSU5fVkFMVUU7aWYodC5jcyhlLk1JTl9WQUxVRSkpcmV0dXJuIGUuT05FO3JldHVybiByPXRoaXMuSFAoMSkuYVYodCkuc2hpZnRMZWZ0KDEpLHIuY3MoZS5aRVJPKT90Lm9WKCk/ZS5PTkU6ZS5pVjooaT10aGlzLmhWKHQubXVsdGlwbHkocikpLG49ci5hZGQoaS5hVih0KSkpfWlmKHQuY3MoZS5NSU5fVkFMVUUpKXJldHVybiB0aGlzLkZQP2UudFY6ZS5aRVJPO2lmKHRoaXMub1YoKSlyZXR1cm4gdC5vVigpP3RoaXMucUUoKS5hVih0LnFFKCkpOnRoaXMucUUoKS5hVih0KS5xRSgpO2lmKHQub1YoKSlyZXR1cm4gdGhpcy5hVih0LnFFKCkpLnFFKCk7Zm9yKG49ZS5aRVJPLGk9dGhpcztpLkNWKHQpOyl7cj1NYXRoLm1heCgxLE1hdGguZmxvb3IoaS5uVigpL3QublYoKSkpO2Zvcih2YXIgcz1NYXRoLmNlaWwoTWF0aC5sb2cocikvTWF0aC5MTjIpLG89czw9NDg/MTpNYXRoLnBvdygyLHMtNDgpLGE9ZS5ERShyKSxoPWEubXVsdGlwbHkodCk7aC5vVigpfHxoLndWKGkpOylyLT1vLGE9ZS5ERShyLHRoaXMuRlApLGg9YS5tdWx0aXBseSh0KTthLnNWKCkmJihhPWUuT05FKSxuPW4uYWRkKGEpLGk9aS5oVihoKX1yZXR1cm4gbn0sZS5wcm90b3R5cGUuT1Y9ZS5wcm90b3R5cGUuYVYsZS5wcm90b3R5cGUuTlY9ZnVuY3Rpb24odCl7cmV0dXJuIGUuWkcodCl8fCh0PWUuZVYodCkpLHRoaXMuaFYodGhpcy5hVih0KS5tdWx0aXBseSh0KSl9LGUucHJvdG90eXBlLmV2PWUucHJvdG90eXBlLk5WLGUucHJvdG90eXBlLm5vdD1mdW5jdGlvbigpe3JldHVybiBlLnFJKH50aGlzLmxvdyx+dGhpcy5oaWdoLHRoaXMuRlApfSxlLnByb3RvdHlwZS5xUD1mdW5jdGlvbih0KXtyZXR1cm4gZS5aRyh0KXx8KHQ9ZS5lVih0KSksZS5xSSh0aGlzLmxvdyZ0Lmxvdyx0aGlzLmhpZ2gmdC5oaWdoLHRoaXMuRlApfSxlLnByb3RvdHlwZS5vcj1mdW5jdGlvbih0KXtyZXR1cm4gZS5aRyh0KXx8KHQ9ZS5lVih0KSksZS5xSSh0aGlzLmxvd3x0Lmxvdyx0aGlzLmhpZ2h8dC5oaWdoLHRoaXMuRlApfSxlLnByb3RvdHlwZS5wVD1mdW5jdGlvbih0KXtyZXR1cm4gZS5aRyh0KXx8KHQ9ZS5lVih0KSksZS5xSSh0aGlzLmxvd150Lmxvdyx0aGlzLmhpZ2hedC5oaWdoLHRoaXMuRlApfSxlLnByb3RvdHlwZS5zaGlmdExlZnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGUuWkcodCkmJih0PXQua1AoKSksMD09KHQmPTYzKT90aGlzOnQ8MzI/ZS5xSSh0aGlzLmxvdzw8dCx0aGlzLmhpZ2g8PHR8dGhpcy5sb3c+Pj4zMi10LHRoaXMuRlApOmUucUkoMCx0aGlzLmxvdzw8dC0zMix0aGlzLkZQKX0sZS5wcm90b3R5cGUuRFY9ZS5wcm90b3R5cGUuc2hpZnRMZWZ0LGUucHJvdG90eXBlLkhQPWZ1bmN0aW9uKHQpe3JldHVybiBlLlpHKHQpJiYodD10LmtQKCkpLDA9PSh0Jj02Myk/dGhpczp0PDMyP2UucUkodGhpcy5sb3c+Pj50fHRoaXMuaGlnaDw8MzItdCx0aGlzLmhpZ2g+PnQsdGhpcy5GUCk6ZS5xSSh0aGlzLmhpZ2g+PnQtMzIsdGhpcy5oaWdoPj0wPzA6LTEsdGhpcy5GUCl9LGUucHJvdG90eXBlLmtWPWUucHJvdG90eXBlLkhQLGUucHJvdG90eXBlLkxQPWZ1bmN0aW9uKHQpe2lmKGUuWkcodCkmJih0PXQua1AoKSksMD09PSh0Jj02MykpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcy5oaWdoO2lmKHQ8MzIpe3ZhciBpPXRoaXMubG93O3JldHVybiBlLnFJKGk+Pj50fHI8PDMyLXQscj4+PnQsdGhpcy5GUCl9cmV0dXJuIDMyPT09dD9lLnFJKHIsMCx0aGlzLkZQKTplLnFJKHI+Pj50LTMyLDAsdGhpcy5GUCl9LGUucHJvdG90eXBlLkxWPWUucHJvdG90eXBlLkxQLGUucHJvdG90eXBlLlVQPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRlA/bmV3IGUodGhpcy5sb3csdGhpcy5oaWdoLCExKTp0aGlzfSxlLnByb3RvdHlwZS5CUD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkZQP3RoaXM6bmV3IGUodGhpcy5sb3csdGhpcy5oaWdoLCEwKX0sZX0pfSxmdW5jdGlvbihlLHQscil7dmFyIGksbixzOy8qKlxuICogQGxpY2Vuc2UgTG9uZy5qcyAoYykgMjAxMyBEYW5pZWwgV2lydHogPGRjb2RlQGRjb2RlLmlvPlxuICogUmVsZWFzZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMFxuICogc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGNvZGVJTy9Mb25nLmpzIGZvciBkZXRhaWxzXG4gKi9cbiFmdW5jdGlvbihyLG8pe249W10saT1vLHZvaWQgMCE9PShzPVwiZnVuY3Rpb25cIj09dHlwZW9mIGk/aS5hcHBseSh0LG4pOmkpJiYoZS5pPXMpfSgwLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5sb3c9MHxlLHRoaXMuaGlnaD0wfHQsdGhpcy5GUD0hIXJ9ZS5YRyxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJfX2lzTG9uZ19fXCIse3ZhbHVlOiEwLHA6ITEsbDohMX0pLGUuWkc9ZnVuY3Rpb24oZSl7cmV0dXJuITA9PT0oZSYmZS5YRyl9O3ZhciB0PXt9LHI9e307ZS5NRT1mdW5jdGlvbihpLG4pe3ZhciBzLG87cmV0dXJuIG4/MDw9KGk+Pj49MCkmJmk8MjU2JiYobz1yW2ldKT9vOihzPW5ldyBlKGksKDB8aSk8MD8tMTowLCEwKSwwPD1pJiZpPDI1NiYmKHJbaV09cykscyk6LTEyODw9KGl8PTApJiZpPDEyOCYmKG89dFtpXSk/bzoocz1uZXcgZShpLGk8MD8tMTowLCExKSwtMTI4PD1pJiZpPDEyOCYmKHRbaV09cykscyl9LGUuREU9ZnVuY3Rpb24odCxyKXtyZXR1cm4gcj0hIXIsaXNOYU4odCl8fCFpc0Zpbml0ZSh0KT9lLlpFUk86IXImJnQ8PS1zP2UuTUlOX1ZBTFVFOiFyJiZ0KzE+PXM/ZS5NQVhfVkFMVUU6ciYmdD49bj9lLiRHOnQ8MD9lLkRFKC10LHIpLnFFKCk6bmV3IGUodCVpfDAsdC9pfDAscil9LGUucUk9ZnVuY3Rpb24odCxyLGkpe3JldHVybiBuZXcgZSh0LHIsaSl9LGUua0U9ZnVuY3Rpb24odCxyLGkpe2lmKDA9PT10Lmxlbmd0aCl0aHJvdyBFcnJvcihcIm51bWJlciBmb3JtYXQgZXJyb3I6IGVtcHR5IHN0cmluZ1wiKTtpZihcIk5hTlwiPT09dHx8XCJJbmZpbml0eVwiPT09dHx8XCIrSW5maW5pdHlcIj09PXR8fFwiLUluZmluaXR5XCI9PT10KXJldHVybiBlLlpFUk87aWYoXCJudW1iZXJcIj09dHlwZW9mIHImJihpPXIscj0hMSksKGk9aXx8MTApPDJ8fDM2PGkpdGhyb3cgRXJyb3IoXCJyYWRpeCBvdXQgb2YgcmFuZ2U6IFwiK2kpO3ZhciBuO2lmKChuPXQuaW5kZXhPZihcIi1cIikpPjApdGhyb3cgRXJyb3IoJ251bWJlciBmb3JtYXQgZXJyb3I6IGludGVyaW9yIFwiLVwiIGNoYXJhY3RlcjogJyt0KTtpZigwPT09bilyZXR1cm4gZS5rRSh0LnN1YnN0cmluZygxKSxyLGkpLnFFKCk7Zm9yKHZhciBzPWUuREUoTWF0aC5wb3coaSw4KSksbz1lLlpFUk8sYT0wO2E8dC5sZW5ndGg7YSs9OCl7dmFyIGg9TWF0aC5taW4oOCx0Lmxlbmd0aC1hKSxjPXBhcnNlSW50KHQuc3Vic3RyaW5nKGEsYStoKSxpKTtpZihoPDgpe3ZhciB1PWUuREUoTWF0aC5wb3coaSxoKSk7bz1vLm11bHRpcGx5KHUpLmFkZChlLkRFKGMpKX1lbHNlIG89by5tdWx0aXBseShzKSxvPW8uYWRkKGUuREUoYykpfXJldHVybiBvLkZQPXIsb30sZS5lVj1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGU/dDpcIm51bWJlclwiPT10eXBlb2YgdD9lLkRFKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0P2Uua0UodCk6bmV3IGUodC5sb3csdC5oaWdoLHQuRlApfTt2YXIgaT00Mjk0OTY3Mjk2LG49aSppLHM9bi8yLG89ZS5NRSgxPDwyNCk7cmV0dXJuIGUuWkVSTz1lLk1FKDApLGUudFY9ZS5NRSgwLCEwKSxlLk9ORT1lLk1FKDEpLGUuclY9ZS5NRSgxLCEwKSxlLmlWPWUuTUUoLTEpLGUuTUFYX1ZBTFVFPWUucUkoLTEsMjE0NzQ4MzY0NywhMSksZS4kRz1lLnFJKC0xLC0xLCEwKSxlLk1JTl9WQUxVRT1lLnFJKDAsLTIxNDc0ODM2NDgsITEpLGUucHJvdG90eXBlLmtQPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRlA/dGhpcy5sb3c+Pj4wOnRoaXMubG93fSxlLnByb3RvdHlwZS5uVj1mdW5jdGlvbigpe3JldHVybiB0aGlzLkZQPyh0aGlzLmhpZ2g+Pj4wKSppKyh0aGlzLmxvdz4+PjApOnRoaXMuaGlnaCppKyh0aGlzLmxvdz4+PjApfSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbih0KXtpZigodD10fHwxMCk8Mnx8MzY8dCl0aHJvdyBSYW5nZUVycm9yKFwicmFkaXggb3V0IG9mIHJhbmdlOiBcIit0KTtpZih0aGlzLnNWKCkpcmV0dXJuXCIwXCI7dmFyIHI7aWYodGhpcy5vVigpKXtpZih0aGlzLmNzKGUuTUlOX1ZBTFVFKSl7dmFyIGk9ZS5ERSh0KSxuPXRoaXMuYVYoaSk7cmV0dXJuIHI9bi5tdWx0aXBseShpKS5oVih0aGlzKSxuLnRvU3RyaW5nKHQpK3Iua1AoKS50b1N0cmluZyh0KX1yZXR1cm5cIi1cIit0aGlzLnFFKCkudG9TdHJpbmcodCl9dmFyIHM9ZS5ERShNYXRoLnBvdyh0LDYpLHRoaXMuRlApO3I9dGhpcztmb3IodmFyIG89XCJcIjs7KXt2YXIgYT1yLmFWKHMpLGg9ci5oVihhLm11bHRpcGx5KHMpKS5rUCgpPj4+MCxjPWgudG9TdHJpbmcodCk7aWYocj1hLHIuc1YoKSlyZXR1cm4gYytvO2Zvcig7Yy5sZW5ndGg8NjspYz1cIjBcIitjO289XCJcIitjK299fSxlLnByb3RvdHlwZS5jVj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhpZ2h9LGUucHJvdG90eXBlLnVWPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGlnaD4+PjB9LGUucHJvdG90eXBlLmxWPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG93fSxlLnByb3RvdHlwZS5wVj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvdz4+PjB9LGUucHJvdG90eXBlLmRWPWZ1bmN0aW9uKCl7aWYodGhpcy5vVigpKXJldHVybiB0aGlzLmNzKGUuTUlOX1ZBTFVFKT82NDp0aGlzLnFFKCkuZFYoKTtmb3IodmFyIHQ9MCE9dGhpcy5oaWdoP3RoaXMuaGlnaDp0aGlzLmxvdyxyPTMxO3I+MCYmMD09KHQmMTw8cik7ci0tKTtyZXR1cm4gMCE9dGhpcy5oaWdoP3IrMzM6cisxfSxlLnByb3RvdHlwZS5zVj1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5oaWdoJiYwPT09dGhpcy5sb3d9LGUucHJvdG90eXBlLm9WPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuRlAmJnRoaXMuaGlnaDwwfSxlLnByb3RvdHlwZS5mVj1mdW5jdGlvbigpe3JldHVybiB0aGlzLkZQfHx0aGlzLmhpZ2g+PTB9LGUucHJvdG90eXBlLmdWPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PSgxJnRoaXMubG93KX0sZS5wcm90b3R5cGUuZnY9ZnVuY3Rpb24oKXtyZXR1cm4gMD09KDEmdGhpcy5sb3cpfSxlLnByb3RvdHlwZS5jcz1mdW5jdGlvbih0KXtyZXR1cm4gZS5aRyh0KXx8KHQ9ZS5lVih0KSksKHRoaXMuRlA9PT10LkZQfHx0aGlzLmhpZ2g+Pj4zMSE9MXx8dC5oaWdoPj4+MzEhPTEpJiYodGhpcy5oaWdoPT09dC5oaWdoJiZ0aGlzLmxvdz09PXQubG93KX0sZS5FVj1lLnByb3RvdHlwZS5jcyxlLnByb3RvdHlwZS52Vj1mdW5jdGlvbihlKXtyZXR1cm4hdGhpcy5jcyhlKX0sZS55Vj1lLnByb3RvdHlwZS52VixlLnByb3RvdHlwZS5UVj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5PYyhlKTwwfSxlLnByb3RvdHlwZS5tVj1lLnByb3RvdHlwZS5UVixlLnByb3RvdHlwZS5TVj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5PYyhlKTw9MH0sZS5wcm90b3R5cGUuUlY9ZS5wcm90b3R5cGUuU1YsZS5wcm90b3R5cGUud1Y9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuT2MoZSk+MH0sZS5wcm90b3R5cGUuYlY9ZS5wcm90b3R5cGUud1YsZS5wcm90b3R5cGUuQ1Y9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuT2MoZSk+PTB9LGUucHJvdG90eXBlLl9WPWUucHJvdG90eXBlLkNWLGUucHJvdG90eXBlLk9jPWZ1bmN0aW9uKHQpe2lmKGUuWkcodCl8fCh0PWUuZVYodCkpLHRoaXMuY3ModCkpcmV0dXJuIDA7dmFyIHI9dGhpcy5vVigpLGk9dC5vVigpO3JldHVybiByJiYhaT8tMTohciYmaT8xOnRoaXMuRlA/dC5oaWdoPj4+MD50aGlzLmhpZ2g+Pj4wfHx0LmhpZ2g9PT10aGlzLmhpZ2gmJnQubG93Pj4+MD50aGlzLmxvdz4+PjA/LTE6MTp0aGlzLmhWKHQpLm9WKCk/LTE6MX0sZS5wcm90b3R5cGUucUU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5GUCYmdGhpcy5jcyhlLk1JTl9WQUxVRSk/ZS5NSU5fVkFMVUU6dGhpcy5ub3QoKS5hZGQoZS5PTkUpfSxlLnByb3RvdHlwZS5QVj1lLnByb3RvdHlwZS5xRSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7ZS5aRyh0KXx8KHQ9ZS5lVih0KSk7dmFyIHI9dGhpcy5oaWdoPj4+MTYsaT02NTUzNSZ0aGlzLmhpZ2gsbj10aGlzLmxvdz4+PjE2LHM9NjU1MzUmdGhpcy5sb3csbz10LmhpZ2g+Pj4xNixhPTY1NTM1JnQuaGlnaCxoPXQubG93Pj4+MTYsYz02NTUzNSZ0Lmxvdyx1PTAsbD0wLHA9MCxkPTA7cmV0dXJuIGQrPXMrYyxwKz1kPj4+MTYsZCY9NjU1MzUscCs9bitoLGwrPXA+Pj4xNixwJj02NTUzNSxsKz1pK2EsdSs9bD4+PjE2LGwmPTY1NTM1LHUrPXIrbyx1Jj02NTUzNSxlLnFJKHA8PDE2fGQsdTw8MTZ8bCx0aGlzLkZQKX0sZS5wcm90b3R5cGUuaFY9ZnVuY3Rpb24odCl7cmV0dXJuIGUuWkcodCl8fCh0PWUuZVYodCkpLHRoaXMuYWRkKHQucUUoKSl9LGUucHJvdG90eXBlLnN1Yj1lLnByb3RvdHlwZS5oVixlLnByb3RvdHlwZS5tdWx0aXBseT1mdW5jdGlvbih0KXtpZih0aGlzLnNWKCkpcmV0dXJuIGUuWkVSTztpZihlLlpHKHQpfHwodD1lLmVWKHQpKSx0LnNWKCkpcmV0dXJuIGUuWkVSTztpZih0aGlzLmNzKGUuTUlOX1ZBTFVFKSlyZXR1cm4gdC5nVigpP2UuTUlOX1ZBTFVFOmUuWkVSTztpZih0LmNzKGUuTUlOX1ZBTFVFKSlyZXR1cm4gdGhpcy5nVigpP2UuTUlOX1ZBTFVFOmUuWkVSTztpZih0aGlzLm9WKCkpcmV0dXJuIHQub1YoKT90aGlzLnFFKCkubXVsdGlwbHkodC5xRSgpKTp0aGlzLnFFKCkubXVsdGlwbHkodCkucUUoKTtpZih0Lm9WKCkpcmV0dXJuIHRoaXMubXVsdGlwbHkodC5xRSgpKS5xRSgpO2lmKHRoaXMuVFYobykmJnQuVFYobykpcmV0dXJuIGUuREUodGhpcy5uVigpKnQublYoKSx0aGlzLkZQKTt2YXIgcj10aGlzLmhpZ2g+Pj4xNixpPTY1NTM1JnRoaXMuaGlnaCxuPXRoaXMubG93Pj4+MTYscz02NTUzNSZ0aGlzLmxvdyxhPXQuaGlnaD4+PjE2LGg9NjU1MzUmdC5oaWdoLGM9dC5sb3c+Pj4xNix1PTY1NTM1JnQubG93LGw9MCxwPTAsZD0wLGY9MDtyZXR1cm4gZis9cyp1LGQrPWY+Pj4xNixmJj02NTUzNSxkKz1uKnUscCs9ZD4+PjE2LGQmPTY1NTM1LGQrPXMqYyxwKz1kPj4+MTYsZCY9NjU1MzUscCs9aSp1LGwrPXA+Pj4xNixwJj02NTUzNSxwKz1uKmMsbCs9cD4+PjE2LHAmPTY1NTM1LHArPXMqaCxsKz1wPj4+MTYscCY9NjU1MzUsbCs9cip1K2kqYytuKmgrcyphLGwmPTY1NTM1LGUucUkoZDw8MTZ8ZixsPDwxNnxwLHRoaXMuRlApfSxlLnByb3RvdHlwZS5BVj1lLnByb3RvdHlwZS5tdWx0aXBseSxlLnByb3RvdHlwZS5hVj1mdW5jdGlvbih0KXtpZihlLlpHKHQpfHwodD1lLmVWKHQpKSx0LnNWKCkpdGhyb3cgbmV3IEVycm9yKFwiZGl2aXNpb24gYnkgemVyb1wiKTtpZih0aGlzLnNWKCkpcmV0dXJuIHRoaXMuRlA/ZS50VjplLlpFUk87dmFyIHIsaSxuO2lmKHRoaXMuY3MoZS5NSU5fVkFMVUUpKXtpZih0LmNzKGUuT05FKXx8dC5jcyhlLmlWKSlyZXR1cm4gZS5NSU5fVkFMVUU7aWYodC5jcyhlLk1JTl9WQUxVRSkpcmV0dXJuIGUuT05FO3JldHVybiByPXRoaXMuSFAoMSkuYVYodCkuc2hpZnRMZWZ0KDEpLHIuY3MoZS5aRVJPKT90Lm9WKCk/ZS5PTkU6ZS5pVjooaT10aGlzLmhWKHQubXVsdGlwbHkocikpLG49ci5hZGQoaS5hVih0KSkpfWlmKHQuY3MoZS5NSU5fVkFMVUUpKXJldHVybiB0aGlzLkZQP2UudFY6ZS5aRVJPO2lmKHRoaXMub1YoKSlyZXR1cm4gdC5vVigpP3RoaXMucUUoKS5hVih0LnFFKCkpOnRoaXMucUUoKS5hVih0KS5xRSgpO2lmKHQub1YoKSlyZXR1cm4gdGhpcy5hVih0LnFFKCkpLnFFKCk7Zm9yKG49ZS5aRVJPLGk9dGhpcztpLkNWKHQpOyl7cj1NYXRoLm1heCgxLE1hdGguZmxvb3IoaS5uVigpL3QublYoKSkpO2Zvcih2YXIgcz1NYXRoLmNlaWwoTWF0aC5sb2cocikvTWF0aC5MTjIpLG89czw9NDg/MTpNYXRoLnBvdygyLHMtNDgpLGE9ZS5ERShyKSxoPWEubXVsdGlwbHkodCk7aC5vVigpfHxoLndWKGkpOylyLT1vLGE9ZS5ERShyLHRoaXMuRlApLGg9YS5tdWx0aXBseSh0KTthLnNWKCkmJihhPWUuT05FKSxuPW4uYWRkKGEpLGk9aS5oVihoKX1yZXR1cm4gbn0sZS5wcm90b3R5cGUuT1Y9ZS5wcm90b3R5cGUuYVYsZS5wcm90b3R5cGUuTlY9ZnVuY3Rpb24odCl7cmV0dXJuIGUuWkcodCl8fCh0PWUuZVYodCkpLHRoaXMuaFYodGhpcy5hVih0KS5tdWx0aXBseSh0KSl9LGUucHJvdG90eXBlLmV2PWUucHJvdG90eXBlLk5WLGUucHJvdG90eXBlLm5vdD1mdW5jdGlvbigpe3JldHVybiBlLnFJKH50aGlzLmxvdyx+dGhpcy5oaWdoLHRoaXMuRlApfSxlLnByb3RvdHlwZS5xUD1mdW5jdGlvbih0KXtyZXR1cm4gZS5aRyh0KXx8KHQ9ZS5lVih0KSksZS5xSSh0aGlzLmxvdyZ0Lmxvdyx0aGlzLmhpZ2gmdC5oaWdoLHRoaXMuRlApfSxlLnByb3RvdHlwZS5vcj1mdW5jdGlvbih0KXtyZXR1cm4gZS5aRyh0KXx8KHQ9ZS5lVih0KSksZS5xSSh0aGlzLmxvd3x0Lmxvdyx0aGlzLmhpZ2h8dC5oaWdoLHRoaXMuRlApfSxlLnByb3RvdHlwZS5wVD1mdW5jdGlvbih0KXtyZXR1cm4gZS5aRyh0KXx8KHQ9ZS5lVih0KSksZS5xSSh0aGlzLmxvd150Lmxvdyx0aGlzLmhpZ2hedC5oaWdoLHRoaXMuRlApfSxlLnByb3RvdHlwZS5zaGlmdExlZnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGUuWkcodCkmJih0PXQua1AoKSksMD09KHQmPTYzKT90aGlzOnQ8MzI/ZS5xSSh0aGlzLmxvdzw8dCx0aGlzLmhpZ2g8PHR8dGhpcy5sb3c+Pj4zMi10LHRoaXMuRlApOmUucUkoMCx0aGlzLmxvdzw8dC0zMix0aGlzLkZQKX0sZS5wcm90b3R5cGUuRFY9ZS5wcm90b3R5cGUuc2hpZnRMZWZ0LGUucHJvdG90eXBlLkhQPWZ1bmN0aW9uKHQpe3JldHVybiBlLlpHKHQpJiYodD10LmtQKCkpLDA9PSh0Jj02Myk/dGhpczp0PDMyP2UucUkodGhpcy5sb3c+Pj50fHRoaXMuaGlnaDw8MzItdCx0aGlzLmhpZ2g+PnQsdGhpcy5GUCk6ZS5xSSh0aGlzLmhpZ2g+PnQtMzIsdGhpcy5oaWdoPj0wPzA6LTEsdGhpcy5GUCl9LGUucHJvdG90eXBlLmtWPWUucHJvdG90eXBlLkhQLGUucHJvdG90eXBlLkxQPWZ1bmN0aW9uKHQpe2lmKGUuWkcodCkmJih0PXQua1AoKSksMD09PSh0Jj02MykpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcy5oaWdoO2lmKHQ8MzIpe3ZhciBpPXRoaXMubG93O3JldHVybiBlLnFJKGk+Pj50fHI8PDMyLXQscj4+PnQsdGhpcy5GUCl9cmV0dXJuIDMyPT09dD9lLnFJKHIsMCx0aGlzLkZQKTplLnFJKHI+Pj50LTMyLDAsdGhpcy5GUCl9LGUucHJvdG90eXBlLkxWPWUucHJvdG90eXBlLkxQLGUucHJvdG90eXBlLlVQPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRlA/bmV3IGUodGhpcy5sb3csdGhpcy5oaWdoLCExKTp0aGlzfSxlLnByb3RvdHlwZS5CUD1mdW5jdGlvbigpe3JldHVybiB0aGlzLkZQP3RoaXM6bmV3IGUodGhpcy5sb3csdGhpcy5oaWdoLCEwKX0sZX0pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGksbj10aGlzJiZ0aGlzLmh1fHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKGVbaV09dFtpXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxzPXIoNCksbz1yKDMpLGE9cigwKSxoPXIoMTY2KSxjPXIoNSksdT1yKDI1KSxsPXIoMTApLHA9cigxNjcpLGQ9cigxNSksZj1oaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJQZWVySW5mbyxnPXIoNiksRT1yKDEpLHY9cigyKSx5PWcuaGUuVGg7IWZ1bmN0aW9uKGUpe2VbZS5NVj0xXT1cIkFDQ0VQVFwiLGVbZS5GVj0yXT1cIlJFSkVDVFwifShpPXQuVVZ8fCh0LlVWPXt9KSk7dmFyIFQ7IWZ1bmN0aW9uKGUpe2VbZS5KcT0wXT1cIkFMTFwiLGVbZS5CVj0xXT1cIklOXCIsZVtlLkhWPTJdPVwiT1VUXCJ9KFQ9dC54Vnx8KHQueFY9e30pKTt2YXIgbT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0LmxvZ2dlcklkPVwiW1BhcnRuZXJzaGlwXSBcIix0LnFWPW5ldyBvLHQuckc9bmV3IG8sdC5HVj0tMSx0LlZWPS0xLHQualY9LTEsdC5jb25uZWN0ZWQ9ITEsdC5OZz1hLkZyYW1ld29yay5yZXNvbHZlKGEuRnJhbWV3b3JrLlYuRiksdC5RVj1hLkZyYW1ld29yay5yZXNvbHZlKGQucXUuZnUpLHQuS1Y9YS5GcmFtZXdvcmsucmVzb2x2ZShkLnF1Lmd1KSx0LllWPWEuRnJhbWV3b3JrLnJlc29sdmUoZC5xdS5FdSksdC5XVj1hLkZyYW1ld29yay5yZXNvbHZlKGQucXUudnUpLHR9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzLHQpLHRoaXMuc0c9dCx0aGlzLnRpY2tldD10LnJsLnRpY2tldCx0aGlzLm9HPXQub0csdGhpcy5tRD10Lm1ELHRoaXMuelY9dC56Vn0sdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSl7dHJ5e3RoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIlBBUlRORVJTSElQIFNUQVJURUQgXCIrZS5nZXRDb250ZXh0SWQoKSksdGhpcy5jb250ZXh0PWUsdGhpcy5jb250ZXh0SWQ9ZS5nZXRDb250ZXh0SWQoKSx0aGlzLkpWKGMuaGguTm8uUG8pLHRoaXMuWFYoYy5oaC5mYS5hYSksdGhpcy5aVihjLmhoLkhvLmtvKSx0aGlzLmFjdGl2ZT0hMH1jYXRjaChlKXtFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgaW4gcGFydG5lcnNoaXAgaW5pdGlhbGl6YXRpb25cIix0aGlzLmxvZ2dlcklkLHYuaHMuY3IuQnQsZSl9fSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7cmV0dXJuIGEuRnJhbWV3b3JrLmNsZWFySW50ZXJ2YWwodGhpcy5HViksYS5GcmFtZXdvcmsuY2xlYXJJbnRlcnZhbCh0aGlzLlZWKSxhLkZyYW1ld29yay5jbGVhckludGVydmFsKHRoaXMualYpLHRoaXMuY29udGV4dD1udWxsLHRoaXMuY29udGV4dElkPW51bGwsdGhpcy5hY3RpdmU9ITEsdGhpcy4kVigpfSx0LnByb3RvdHlwZS5VZD1mdW5jdGlvbihlKXt0aGlzLmxvZ2dlci5pbmZvKFwiUEFSVE5FUlNISVAgU0VSVkVSIENPTk5FQ1RFRFwiKSx0aGlzLmdkPWUsdGhpcy5jb25uZWN0ZWQ9ITAsbnVsbD09dGhpcy55RC5nZXRJZCgpJiZ0aGlzLnlELnNldElkKHRoaXMuZ2QpfSx0LnByb3RvdHlwZS5laj1mdW5jdGlvbigpe3RoaXMuY29ubmVjdGVkPSExfSx0LnByb3RvdHlwZS50aj1mdW5jdGlvbihlKXt0cnl7dGhpcy5yaihlKXx8dGhpcy5xVi5oYXMoZS5wZWVySW5mby5ndWlkKXx8dGhpcy5yRy5oYXMoZS5wZWVySW5mby5ndWlkKXx8ZS5wZWVySW5mby5ndWlkPT10aGlzLmdkP3RoaXMuaWooZSk6dGhpcy5uaihlKSx0aGlzLnNqKGUpJiZ0aGlzLm9qKGUpfWNhdGNoKHQpe0UuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBpbiBkaXNjb2VyaW5nIG5ldyBsYW4gcGVlclwiLHRoaXMubG9nZ2VySWQsdi5ocy5jci5IdCx7ZGV0YWlsZWRFcnJvcjp0LG90aGVyR3VpZDplLnBlZXJJbmZvLmd1aWR9KX19LHQucHJvdG90eXBlLmlqPWZ1bmN0aW9uKGUpe2lmKHRoaXMuYWouaGFzKGUucGVlckluZm8uZ3VpZCkpe3ZhciB0PXRoaXMuYWouZ2V0KGUucGVlckluZm8uZ3VpZCk7dGhpcy5hai5kZWxldGUoZS5wZWVySW5mby5ndWlkKSx0aGlzLmdCLnNldChlLnBlZXJJbmZvLmd1aWQsdCksdGhpcy55RC5ZRyghMCl9fSx0LnByb3RvdHlwZS5vaj1mdW5jdGlvbihlKXtpZih0aGlzLmRCLmhhcyhlLnBlZXJJbmZvLmd1aWQpKXt2YXIgdD10aGlzLmRCLmdldChlLnBlZXJJbmZvLmd1aWQpO3RoaXMuZEIuZGVsZXRlKGUucGVlckluZm8uZ3VpZCksdGhpcy5mQi5zZXQoZS5wZWVySW5mby5ndWlkLHQpfX0sdC5wcm90b3R5cGUuSlY9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczstMSE9dGhpcy5HViYmYS5GcmFtZXdvcmsuY2xlYXJJbnRlcnZhbCh0aGlzLkdWKSx0aGlzLkdWPWEuRnJhbWV3b3JrLnNldEludGVydmFsKGZ1bmN0aW9uKCl7dC5oaighMSl9LGUpfSx0LnByb3RvdHlwZS5oaj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UmJnRoaXMuR1YmJihhLkZyYW1ld29yay5jbGVhckludGVydmFsKHRoaXMuR1YpLHRoaXMuSlYoYy5oaC5Oby5QbykpO3RyeXtpZih0aGlzLmNvbm5lY3RlZCl7dGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIkFERElORyBORVcgUEVFUlMgSUYgUE9TU0lCTEUsIE5PVyBcIit0aGlzLmFqLmxlbmd0aCtcIi9cIitjLmhoLk5vLl9vK1wiLFwiK3RoaXMuZ0IubGVuZ3RoK1wiL2luZmluaXR5IE9VVCBSTkQgXCIrdGhpcy5kQi5sZW5ndGgrXCIgT1VUIExBTiBcIit0aGlzLmZCLmxlbmd0aCk7dmFyIHI9W10uY29uY2F0KHRoaXMucVYua2V5cygpKS5jb25jYXQodGhpcy5yRy5rZXlzKCkpLGk9dGhpcy5vRy5jaighMCksbj12b2lkIDA7bj10aGlzLnlELmNrKCl8fHRoaXMueUQuVGsoKT90aGlzLllWLnVqKHRoaXMueUQsYy5oaC5Oby5fbyx0aGlzLmFqLnZhbHVlcygpLHIsaSk6dGhpcy5RVi51aihjLmhoLk5vLl9vLHRoaXMuYWoudmFsdWVzKCkscixpKSx0aGlzLmxqPW4ucGooKSxuLmRqKCkuZm9yRWFjaChmdW5jdGlvbihlKXt0Lm5qKGUpfSl9ZWxzZSB0aGlzLmxvZ2dlci53YXJuKHRoaXMubG9nZ2VySWQrXCJOT1QgUlVOTklORyBJTiBQQVJUTkVSIENIT0lDRSwgU1JWIERJU0NPTk5FQ1RFRFwiKX1jYXRjaChlKXtFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgaW4gY2hvb3NpbmcgaW4gcGFydG5lcnNcIix0aGlzLmxvZ2dlcklkLHYuaHMuY3IueHQsZSl9fSx0LnByb3RvdHlwZS5uaj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5wZWVySW5mby5ndWlkLGk9ZS5wZWVySW5mby5wcml2YXRlSXBTdHJpbmcsbj1lLnBlZXJJbmZvLnB1YmxpY0lwU3RyaW5nO3RoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJJTiBQQVJUTkVSIEFERCBQUk9DRVNTIFwiK3IpLHRoaXMucmooZSl8fHRoaXMucVYuaGFzKHIpfHx0aGlzLnJHLmhhcyhyKXx8dGhpcy56Vi5maihyLGksbil8fCh0aGlzLnJHLnNldChyLERhdGUubm93KCkpLHRoaXMuTmcuY29ubmVjdChyKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciBuPWkuUGcud2codC5zRy5zd2FybUlkKTtpZihudWxsPT1uJiYobj1pLlBnLlRnKHQuc0cuc3dhcm1JZCkpLG4pe3QuckcuZ2V0KHIpO3QuckcuZGVsZXRlKHIpLHQuYWN0aXZlJiZ0LmdqKG4pLnRoZW4oZnVuY3Rpb24oaSl7aWYodC5FaihuLGUsaS5tc2cpLHQueWoudmooITEsITEpLHQuelYuVGoocixlLnBlZXJJbmZvLnByaXZhdGVJcFN0cmluZyxlLnBlZXJJbmZvLnB1YmxpY0lwU3RyaW5nKSx0Lm1qKG4pLHQubGoubGVuZ3RoPjAmJiFlLklqKCkpe3ZhciBzPXQubGpbMF07dC5TaihzLmd1aWQpLHMud2ouUmooVC5IViksdC5sai5zcGxpY2UoMCwxKX19KS5mYWlsKGZ1bmN0aW9uKGUpe0UuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBpbiByZXF1ZXN0aW5nIHBhcnRuZXJzaGlwXCIsdC5sb2dnZXJJZCx2LmhzLmNyLlZ0LHtvdGhlckd1aWQ6cn0pLHQueWoudmooITEsITApLHQuYmoocil9KX19KS5mYWlsKGZ1bmN0aW9uKGUpe0UuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBpbiBjcmVhdGluZyBuZXcgcDJwIGNvbm5lY3Rpb25cIix0LmxvZ2dlcklkLHYuaHMuY3IuR3Qse290aGVyR3VpZDpyfSksdC55ai52aighMCwhMCksdC5yRy5kZWxldGUociksdC5vRy5LRyhyKX0pLmRvbmUoKSl9LHQucHJvdG90eXBlLkNqPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0cnl7dmFyIG49ZS5ndWlkLHM9bnVsbCxvPW51bGw7aWYoZS5wcml2YXRlSXBTdHJpbmcmJihvPWUucHJpdmF0ZUlwU3RyaW5nKSxlLnB1YmxpY0lwU3RyaW5nJiYocz1lLnB1YmxpY0lwU3RyaW5nKSx0aGlzLl9qKG4pKXRoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIkFMUkVBRFkgT1VUIFBBUlRORVIgXCIrbik7ZWxzZXt2YXIgdT1lLmNvbnRleHRJZCxsPXQuUGcud2codGhpcy5zRy5zd2FybUlkKTtpZih0aGlzLmNvbnRleHRJZCE9PXV8fGMuaGguSG8uRG8hPT1lLnAycFByb3RvY29sVmVyc2lvbnx8dGhpcy56Vi5maihuLG8scykpdGhpcy5sb2dnZXIuaW5mbyh0aGlzLmxvZ2dlcklkK1wiUEFSVE5FUlNISVAgQ0FOTk9UIEJFIEVTVEFCTElTSEVEIFdJVEggXCIrbitcIiBDT05URVhUIElEIFwiK3UrXCIgcHJvdG9jb2wgdmVyc2lvbiBcIitlLnAycFByb3RvY29sVmVyc2lvbiksdGhpcy5QaihsLGkuRlYpO2Vsc2V7dmFyIHA9dGhpcy5BaihlKSxkPXZvaWQgMCxmPXZvaWQgMDtpZihwKXtpZih0aGlzLm9HLmdHKFtwXSwhMSksZj10aGlzLm9HLk9qKG4pLCEoZD1mLklqKCl8fHRoaXMuZEIubGVuZ3RoPGMuaGguTm8uT28pKXt0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiIGdvdCBvdXQgcGFydCByZXEgZnJvbSBcIituK1wiIC0gcmVhY2hlZCBtYXggXCIrdGhpcy5kQi5sZW5ndGgrXCIvXCIrYy5oaC5Oby5Pbyk7dmFyIGc9dm9pZCAwO2c9dGhpcy55RC5jaygpfHx0aGlzLnlELlRrKCk/dGhpcy5XVi5Oaih0aGlzLnlELHAsdGhpcy5kQi52YWx1ZXMoKSk6dGhpcy5LVi5Oaih0aGlzLmRCLnZhbHVlcygpKSxnJiYodGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIiBjaG9ja2luZyBcIitnLmd1aWQpLHRoaXMuZEIuZGVsZXRlKGcuZ3VpZCksZy53ai5SaihULkJWKSxkPSEwKX19ZWxzZSBkPSExO2lmKGQpe3ZhciB5PW5ldyBoLlBhcnRuZXIobix0aGlzLnlqLGwsdGhpcy5sb2dnZXIsITEsZik7ZS5yZXBvcnRpbmdHdWlkJiZ5LkRqKGUucmVwb3J0aW5nR3VpZCksdGhpcy5vRy5rai5oYXMobik/dGhpcy5mQi5zZXQobix5KTp0aGlzLmRCLnNldChuLHkpLHRoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIkFEREVEIE9VVCBQQVJUIFwiK24pLHRoaXMuUGoobCxpLk1WKSx0aGlzLnpWLlRqKG4sbyxzKSxhLkZyYW1ld29yay5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5MaihuKX0sNTAwKSx0aGlzLnlqLk1qKCl9ZWxzZSB0aGlzLmxvZ2dlci5pbmZvKHRoaXMubG9nZ2VySWQrXCIgY2Fubm90IGVzdGFibGlzaCBwYXJ0bmVyc2hpcCB0byBcIituK1wiIC0gcmVhY2hlZCBtYXggXCIrdGhpcy5kQi5sZW5ndGgrXCIvXCIrYy5oaC5Oby5PbyksdGhpcy5QaihsLGkuRlYpfX19Y2F0Y2godCl7RS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJlY2VpdmluZyBvdXQgcGFydG5lcnNoaXAgcmVxdWVzdFwiLHRoaXMubG9nZ2VySWQsdi5ocy5jci5qdCx7ZGV0YWlsZWRFcnJvcjp0LG90aGVyR3VpZDplLmd1aWR9KX19LHQucHJvdG90eXBlLkFqPWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1uZXcgZjt0Lmd1aWQ9ZS5ndWlkLGUuaW50ZXJuYWxBcyYmKHQuaW50ZXJuYWxBcz1lLmludGVybmFsQXMpLGUuZXh0ZXJuYWxBcyYmKHQuZXh0ZXJuYWxBcz1lLmV4dGVybmFsQXMpLGUucHVibGljSXBTdHJpbmcmJih0LnB1YmxpY0lwU3RyaW5nPWUucHVibGljSXBTdHJpbmcpLGUucHJpdmF0ZUlwU3RyaW5nJiYodC5wcml2YXRlSXBTdHJpbmc9ZS5wcml2YXRlSXBTdHJpbmcpO3ZhciByPSExLGk9dGhpcy5vRy5PaihlLmd1aWQpO2lmKGkmJihyPWkucGVlckluZm8uaXNMZWFkZXIpLGUuc3RyZWFtQ2hhcmFjdGVyaXN0aWNzKXt2YXIgbj1bXTtlLnN0cmVhbUNoYXJhY3RlcmlzdGljcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBsLlRyYWNrZXJQZWVyU3RyZWFtSW5mbzt0LnN0YXRlPWUuc3RyZWFtU3RhdGUsdC5iaXRyYXRlPWUuYml0cmF0ZSx0LmRlbHRhPWUuZGVsdGEsbi5wdXNoKHQpfSksdC5zdHJlYW1zPW59cmV0dXJuIG5ldyBsLmJjKGwuVGMueWMsdCxyKX1jYXRjaCh0KXtyZXR1cm4gRS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGNvbnN0cnVjdGluZyBkaXNjb3ZlcmVkIHBlZXIgaW5mb1wiLHRoaXMubG9nZ2VySWQsdi5ocy5jci5RdCx7ZGV0YWlsZWRFcnJvcjp0LG90aGVyR3VpZDplLmd1aWR9KSxudWxsfX0sdC5wcm90b3R5cGUuUGo9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3RoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJTRU5EIFBBUlQgUkVTUE9OU0UgVE8gXCIrZS5vdGhlckd1aWQpO3RyeXt2YXIgbj1uZXcgdS5SZi5GYS5KZy5PdXRQYXJ0bmVyc2hpcFJlc3BvbnNlO2lmKG4uYWNjZXB0PXQsbi5hY2NlcHQ9PT1pLk1WKXt0aGlzLnlELmdrKCkmJihuLmludGVybmFsQXM9dGhpcy55RC5naygpKSx0aGlzLnlELkZqKCkmJihuLmV4dGVybmFsQXM9dGhpcy55RC5GaigpKSx0aGlzLnlELmdldFB1YmxpY0lwKCkmJihuLnB1YmxpY0lwU3RyaW5nPXRoaXMueUQuZ2V0UHVibGljSXAoKSksdGhpcy55RC5nZXRQcml2YXRlSXAoKSYmKG4ucHJpdmF0ZUlwU3RyaW5nPXRoaXMueUQuZ2V0UHJpdmF0ZUlwKCkpLG4ucmVwb3J0aW5nR3VpZD10aGlzLnlELmdldFJlcG9ydGluZ0d1aWQoKTt2YXIgcz10aGlzLnlELlVqKCksbz1bXTtzLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2YXIgaT1uZXcgdS5SZi5GYS5KZy5TdHJlYW1DaGFyYWN0ZXJpc3RpY3M7aS5iaXRyYXRlPXQsaS5zdHJlYW1TdGF0ZT1lLnR5cGUsaS5kZWx0YT1udWxsIT1yLnlELmdldERlbHRhKCk/ci55RC5nZXREZWx0YSgpOi0xLG8ucHVzaChpKX0pLG8ubGVuZ3RoPjAmJm4uc2V0U3RyZWFtQ2hhcmFjdGVyaXN0aWNzKG8pfWUuTGcodS5SZi5FZy5wZyxuKX1jYXRjaCh0KXtFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY29uc3RydWN0aW5nIHBhcnRuZXJzaGlwIHJlc3BvbnNlIG1lc3NhZ2VcIix0aGlzLmxvZ2dlcklkLHYuaHMuY3IuS3Qse2RldGFpbGVkRXJyb3I6dCxvdGhlckd1aWQ6ZS5vdGhlckd1aWR9KX19LHQucHJvdG90eXBlLkJqPWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyLndhcm4odGhpcy5sb2dnZXJJZCtlKX0sdC5wcm90b3R5cGUuRWo9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPWUub3RoZXJHdWlkO2lmKHIuZXh0ZXJuYWxBcyYmKHQucGVlckluZm8uZXh0ZXJuYWxBcz1yLmV4dGVybmFsQXMpLHIuaW50ZXJuYWxBcyYmKHQucGVlckluZm8uaW50ZXJuYWxBcz1yLmludGVybmFsQXMpLHIucHVibGljSXBTdHJpbmcmJih0LnBlZXJJbmZvLnB1YmxpY0lwU3RyaW5nPXIucHVibGljSXBTdHJpbmcpLHIucHJpdmF0ZUlwU3RyaW5nJiYodC5wZWVySW5mby5wcml2YXRlSXBTdHJpbmc9ci5wcml2YXRlSXBTdHJpbmcpLHIuc3RyZWFtQ2hhcmFjdGVyaXN0aWNzKXt2YXIgbj1bXTtyLnN0cmVhbUNoYXJhY3RlcmlzdGljcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBsLlRyYWNrZXJQZWVyU3RyZWFtSW5mbzt0LnN0YXRlPWUuc3RyZWFtU3RhdGUsdC5iaXRyYXRlPWUuYml0cmF0ZSx0LmRlbHRhPWUuZGVsdGEsbi5wdXNoKHQpfSksdC5wZWVySW5mby5zdHJlYW1zPW59dHJ5e3ZhciBzPW5ldyBoLlBhcnRuZXIoaSx0aGlzLnlqLGUsdGhpcy5sb2dnZXIsITAsdCk7cmV0dXJuIHIucmVwb3J0aW5nR3VpZCYmKHMucmVwb3J0aW5nR3VpZD1yLnJlcG9ydGluZ0d1aWQsZS5yZWNlaXZlci5zZXRSZXBvcnRpbmdHdWlkKHIucmVwb3J0aW5nR3VpZCksZS5zZW5kZXIuc2V0UmVwb3J0aW5nR3VpZChyLnJlcG9ydGluZ0d1aWQpKSx0LnBlZXJJbmZvLnR5cGU9PWwuVGMuVz8odGhpcy5nQi5zZXQoaSxzKSx0aGlzLnlELkhqKCEwKSx0aGlzLnlELllHKCEwKSk6KDAhPXRoaXMueUQuZ2soKSYmdGhpcy55RC5naygpPT09dC5wZWVySW5mby5pbnRlcm5hbEFzJiZ0aGlzLnlELkhqKCEwKSx0aGlzLmFqLnNldChpLHMpKSx0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK2krXCIgSVMgTk9XIElOIFBBUlRORVJcIiksc31jYXRjaChlKXtFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgYWRkaW5nIGEgbmV3IHBhcnRuZXIgb2JqZWN0IGluIHRoZSBsaXN0XCIsdGhpcy5sb2dnZXJJZCx2LmhzLmNyLll0LHtkZXRhaWxlZEVycm9yOmUsb3RoZXJHdWlkOml9KX19LHQucHJvdG90eXBlLktHPWZ1bmN0aW9uKGUpe3RyeXt0aGlzLmxvZ2dlci5pbmZvKHRoaXMubG9nZ2VySWQrXCJHT1QgUEVFUiBESVNDIFwiK2UpLHRoaXMueGooZSkmJih0aGlzLmxvZ2dlci5pbmZvKHRoaXMubG9nZ2VySWQrXCJJTiBQUlQgRElTQyBcIitlKSx0aGlzLlNqKGUpKSx0aGlzLl9qKGUpJiYodGhpcy5sb2dnZXIuaW5mbyh0aGlzLmxvZ2dlcklkK1wiT1VUIFBSVCBESVNDIFwiK2UpLHRoaXMuZEIuZGVsZXRlKGUpLHRoaXMuZkIuZGVsZXRlKGUpKX1jYXRjaCh0KXtFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgcmVtb3ZpbmcgZGlzY29uZWN0ZWQgcGFydG5lciBmcm9tIHRoZSBsaXN0XCIsdGhpcy5sb2dnZXJJZCx2LmhzLmNyLld0LHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmV9KX19LHQucHJvdG90eXBlLlNqPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dHJ5e3RoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJJTiBQQVJUTkVSIFJFTU9WRSBcIitlKTt2YXIgcj10aGlzLnFqKGUpO2lmKHRoaXMuZ0QuR2oociksdGhpcy5hai5kZWxldGUoZSksdGhpcy5nQi5kZWxldGUoZSksdGhpcy5nQi5sZW5ndGg+MCl0aGlzLnlELkhqKCEwKTtlbHNlIGlmKDAhPXRoaXMueUQuZ2soKSl7dmFyIGk9ITE7dGhpcy5hai5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QueUQuZ2soKT09PWUuRWsucGVlckluZm8uaW50ZXJuYWxBcyYmKGk9ITApfSksdGhpcy55RC5IaihpKX1lbHNlIHRoaXMueUQuSGooITEpfWNhdGNoKHQpe0UuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZW1vdmluZyB0aGUgaW4gcGFydG5lclwiLHRoaXMubG9nZ2VySWQsdi5ocy5jci56dCx7ZGV0YWlsZWRFcnJvcjp0LG90aGVyR3VpZDplfSl9fSx0LnByb3RvdHlwZS5Waj1mdW5jdGlvbihlLHQpe3RyeXt0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiQ0xPU0UgUkVDRUlWRUQgRlJPTSBcIitlK1wiIFRZUEUgXCIrVFt0LmdldFR5cGUoKV0pLHQuZ2V0VHlwZSgpIT1ULkpxJiZ0LmdldFR5cGUoKSE9VC5IVnx8KHRoaXMuZEIuaGFzKGUpJiZ0aGlzLmRCLmRlbGV0ZShlKSx0aGlzLmZCLmhhcyhlKSYmdGhpcy5mQi5kZWxldGUoZSkpLHQuZ2V0VHlwZSgpIT1ULkpxJiZ0LmdldFR5cGUoKSE9VC5CVnx8dGhpcy5TaihlKX1jYXRjaCh0KXtFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igd2hlbiBjbG9zZSByZWNlaXZlZFwiLHRoaXMubG9nZ2VySWQsdi5ocy5jci5KdCx7ZGV0YWlsZWRFcnJvcjp0LG90aGVyR3VpZDplfSl9fSx0LnByb3RvdHlwZS5naj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9cy5kZWZlcigpO3RyeXt2YXIgaT1uZXcgdS5SZi5GYS5KZy5PdXRQYXJ0bmVyc2hpcFJlcXVlc3Q7aS5ndWlkPXRoaXMuZ2QsaS5jb250ZXh0SWQ9dGhpcy5jb250ZXh0SWQsaS5wMnBQcm90b2NvbFZlcnNpb249Yy5oaC5Iby5EbyxpLnJlcG9ydGluZ0d1aWQ9dGhpcy55RC5nZXRSZXBvcnRpbmdHdWlkKCksdGhpcy55RC5naygpJiYoaS5pbnRlcm5hbEFzPXRoaXMueUQuZ2soKSksdGhpcy55RC5GaigpJiYoaS5leHRlcm5hbEFzPXRoaXMueUQuRmooKSksdGhpcy55RC5nZXRQcml2YXRlSXAoKSYmKGkucHJpdmF0ZUlwU3RyaW5nPXRoaXMueUQuZ2V0UHJpdmF0ZUlwKCkpLHRoaXMueUQuZ2V0UHVibGljSXAoKSYmKGkucHVibGljSXBTdHJpbmc9dGhpcy55RC5nZXRQdWJsaWNJcCgpKTt2YXIgbj10aGlzLnlELlVqKCksbz1bXTtuLmZvckVhY2goZnVuY3Rpb24oZSxyKXt2YXIgaT1uZXcgdS5SZi5GYS5KZy5TdHJlYW1DaGFyYWN0ZXJpc3RpY3M7aS5iaXRyYXRlPXIsaS5zdHJlYW1TdGF0ZT1lLnR5cGUsaS5kZWx0YT1udWxsIT10LnlELmdldERlbHRhKCk/dC55RC5nZXREZWx0YSgpOi0xLG8ucHVzaChpKX0pLG8ubGVuZ3RoPjAmJmkuc2V0U3RyZWFtQ2hhcmFjdGVyaXN0aWNzKG8pLHRoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJTRU5EIFBBUlQgUkVRIFRPIFwiK2Uub3RoZXJHdWlkK1wiIFdJVEggSUQgXCIraS5jb250ZXh0SWQrXCIgaW50ZXJuYWxBUyBcIitpLmludGVybmFsQXMrXCIgZXh0ZXJuYWxBcyBcIitpLmV4dGVybmFsQXMrXCIgcHJpdmF0ZSBpcCBcIitpLnByaXZhdGVJcFN0cmluZytcIiBwdWJsaWMgaXAgXCIraS5wdWJsaWNJcFN0cmluZytcIiByR3VpZCBcIit0aGlzLnlELmdldFJlcG9ydGluZ0d1aWQoKSk7dmFyIGg9YS5GcmFtZXdvcmsuc2V0VGltZW91dChmdW5jdGlvbigpe3QuamoocixlLm90aGVyR3VpZCl9LGMuaGguTm8uQ28pO3RoaXMucVYuc2V0KGUub3RoZXJHdWlkLHttRzpoLGRlZmVyOnJ9KSxlLkxnKHUuUmYuRWcubGcsaSl9Y2F0Y2godCl7RS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHNlbmRpbmcgcGFydG5lcnNoaXAgcmVxdWVzdFwiLHRoaXMubG9nZ2VySWQsdi5ocy5jci5YdCx7ZGV0YWlsZWRFcnJvcjp0LG90aGVyR3VpZDplLm90aGVyR3VpZH0pLHIucmVqZWN0KHQpfXJldHVybiByLlNzfSx0LnByb3RvdHlwZS5Raj1mdW5jdGlvbihlLHQpe3ZhciByPXQub3RoZXJHdWlkLG49dGhpcy5xVi5nZXQocik7bj8oYS5GcmFtZXdvcmsuY2xlYXJUaW1lb3V0KG4ubUcpLHRoaXMucVYuZGVsZXRlKHIpLGUuYWNjZXB0PT09aS5NVj9uLmRlZmVyLnJlc29sdmUoe3lnOnQsbXNnOmV9KTpuLmRlZmVyLnJlamVjdChcIk5PVCBBQ0NFUFRFRFwiKSk6RS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJlY2VpdmluZyBvdXQgcGFydG5lcnNoaXAgcmVzcG9uc2UgZnJvbSBhbiB1bmtub3duIHBlZXJcIix0aGlzLmxvZ2dlcklkLHYuaHMuY3IuZXIse290aGVyR3VpZDpyfSl9LHQucHJvdG90eXBlLmpqPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5xVi5oYXModCkpe0UuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBwYXJ0bmVyc2hpcCByZXF1ZXN0IGV4cGlyZWRcIix0aGlzLmxvZ2dlcklkLHYuaHMuY3IuWnQse290aGVyR3VpZDp0fSk7dmFyIHI9dGhpcy5xVi5nZXQodCk7dGhpcy5xVi5kZWxldGUodCksci5kZWZlci5yZWplY3QoXCJFWFBJUkVEXCIpfWVsc2UgRS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHBhcnRuZXJzaGlwIHJlcXVlc3QgZXhwaXJlZCBmb3IgdW5rbm93biBwZWVyXCIsdGhpcy5sb2dnZXJJZCx2LmhzLmNyLiR0LHtvdGhlckd1aWQ6dH0pfSx0LnByb3RvdHlwZS4kVj1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1zLmRlZmVyKCkscj10aGlzLmFqLnZhbHVlcygpO3RoaXMuZ0IuZm9yRWFjaChmdW5jdGlvbihlLHQpe3IucHVzaChlKX0pO3ZhciBpPXIuc2xpY2UoKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUud2ouY2xvc2UoKX0pO3JldHVybiBzLmFsbChpKS50aGVuKGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShcInJlc29sdmVkXCIpfSkuZmFpbChmdW5jdGlvbihyKXtFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY2xvc2luZyBwYXJ0bmVyc2hpcFwiLGUubG9nZ2VySWQsdi5ocy5jci50ciksdC5yZWplY3QoXCJjb3VsZCBub3QgY2xvc2VcIil9KSx0LlNzfSx0LnByb3RvdHlwZS5iaj1mdW5jdGlvbihlKXt0aGlzLk5nLmRpc2Nvbm5lY3QoZSl9LHQucHJvdG90eXBlLlhWPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7LTEhPXRoaXMuVlYmJmEuRnJhbWV3b3JrLmNsZWFySW50ZXJ2YWwodGhpcy5WViksdGhpcy5WVj1hLkZyYW1ld29yay5zZXRJbnRlcnZhbChmdW5jdGlvbigpe3QuS2ooKX0sZSl9LHQucHJvdG90eXBlLktqPWZ1bmN0aW9uKCl7dHJ5e2lmKHRoaXMueUQueWsoKSYmIXRoaXMueUQuY2soKSYmeSl7dmFyIGU9dGhpcy55RC5SaygpLHQ9dGhpcy5jb250ZXh0LlBEKCkuYml0cmF0ZTtpZih0JiZ0aGlzLnhqKGUudXVpZCkpe3ZhciByPXRoaXMucWooZS51dWlkKTt0aGlzLllqKHIud2osdCl9fX1jYXRjaChlKXtFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgYW5ub3VuY2luZyBiaXRyYXRlXCIsdGhpcy5sb2dnZXJJZCx2LmhzLmNyLnJyLGUpfX0sdC5wcm90b3R5cGUuWWo9ZnVuY3Rpb24oZSx0KXt0cnl7dmFyIHI9bmV3IHUuUmYuRmEuSmcuQml0cmF0ZTtyLmd1aWQ9dGhpcy5nZCxyLmJpdHJhdGU9dCx0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiQU5OT1VOQ0UgQklUUkFURSBcIityLmJpdHJhdGUrXCIgVE8gUEVFUiBHVUlEIFwiK2Uub3RoZXJHdWlkKSxlLkxnKHUuUmYuRWcuQml0cmF0ZSxyKX1jYXRjaCh0KXtFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY29uc3RydWN0aW5nIGJpdHJhdGUgYW5ub3VuY2VtZW50XCIsdGhpcy5sb2dnZXJJZCx2LmhzLmNyLmlyLHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmUub3RoZXJHdWlkfSl9fSx0LnByb3RvdHlwZS5Xaj1mdW5jdGlvbihlKXt0cnl7dGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIlJFQ0VJVkVEIEJJVFJBVEUgXCIrZS5iaXRyYXRlK1wiIEZST00gUEVFUiBHVUlEIFwiK2UuZ3VpZCksdGhpcy5vRy5rai5oYXMoZS5nZXRHdWlkKCkpJiYodGhpcy5vRy5rai5nZXQoZS5ndWlkKS56aihlLmJpdHJhdGUpLHRoaXMubUQuSmooKSl9Y2F0Y2godCl7RS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJlY2VpdmluZyBiaXRyYXRlIGluZm9cIix0aGlzLmxvZ2dlcklkLHYuaHMuY3IubnIse2RldGFpbGVkRXJyb3I6dCxvdGhlckd1aWQ6ZS5ndWlkfSl9fSx0LnByb3RvdHlwZS5Yaj1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9ZS5ndWlkLHI9dGhpcy5xaih0KTtyJiZ0aGlzLlpqKHIsZSkscj10aGlzLiRqKHQpLHImJnRoaXMuWmoocixlKSx0aGlzLnpWLlRqKHQsZS5wcml2YXRlSXBTdHJpbmcsZS5wdWJsaWNJcFN0cmluZyl9Y2F0Y2godCl7RS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJlY2VpdmluZyBwZWVyIGluZm9cIix0aGlzLmxvZ2dlcklkLHYuaHMuY3Iuc3Ise2RldGFpbGVkRXJyb3I6dCxvdGhlckd1aWQ6ZS5ndWlkfSl9fSx0LnByb3RvdHlwZS5aaj1mdW5jdGlvbihlLHQpe3ZhciByPWUuRWsucGVlckluZm87aWYodC5wcml2YXRlSXBTdHJpbmcmJihyLnByaXZhdGVJcFN0cmluZz10LnByaXZhdGVJcFN0cmluZyksdC5wdWJsaWNJcFN0cmluZyYmKHIucHVibGljSXBTdHJpbmc9dC5wdWJsaWNJcFN0cmluZyksdC5leHRlcm5hbEFzJiYoci5leHRlcm5hbEFzPXQuZXh0ZXJuYWxBcyksdC5pbnRlcm5hbEFzJiYoci5pbnRlcm5hbEFzPXQuaW50ZXJuYWxBcyksdC5zdHJlYW1DaGFyYWN0ZXJpc3RpY3Mpe3ZhciBpPVtdO3Quc3RyZWFtQ2hhcmFjdGVyaXN0aWNzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGwuVHJhY2tlclBlZXJTdHJlYW1JbmZvO3QuYml0cmF0ZT1lLmJpdHJhdGUsdC5kZWx0YT1lLmRlbHRhLHQuc3RhdGU9ZS5zdHJlYW1TdGF0ZSxpLnB1c2godCl9KSxyLnN0cmVhbXM9aX19LHQucHJvdG90eXBlLlpWPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5qViYmYS5GcmFtZXdvcmsuY2xlYXJJbnRlcnZhbCh0aGlzLmpWKSx0aGlzLmpWPWEuRnJhbWV3b3JrLnNldEludGVydmFsKGZ1bmN0aW9uKCl7dC5lUSgpfSxlKX0sdC5wcm90b3R5cGUuZVE9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RyeXtpZih0aGlzLnlELmdldFByaXZhdGVJcCgpfHx0aGlzLnlELmdldFB1YmxpY0lwKCl8fHRoaXMueUQuZ2soKXx8dGhpcy55RC5GaigpKXt2YXIgdD10aGlzLnRRKCkscj1uZXcgdS5SZi5GYS5KZy5QZWVySW5mb01lc3NhZ2U7ci5ndWlkPXRoaXMueUQuZ2V0SWQoKSx0aGlzLnlELmdldFByaXZhdGVJcCgpJiYoci5wcml2YXRlSXBTdHJpbmc9dGhpcy55RC5nZXRQcml2YXRlSXAoKSksdGhpcy55RC5nZXRQdWJsaWNJcCgpJiYoci5wdWJsaWNJcFN0cmluZz10aGlzLnlELmdldFB1YmxpY0lwKCkpLHRoaXMueUQuRmooKSYmKHIuZXh0ZXJuYWxBcz10aGlzLnlELkZqKCkpLHRoaXMueUQuZ2soKSYmKHIuaW50ZXJuYWxBcz10aGlzLnlELmdrKCkpO3ZhciBpPXRoaXMueUQuVWooKSxuPVtdO2kuZm9yRWFjaChmdW5jdGlvbih0LHIpe3ZhciBpPW5ldyB1LlJmLkZhLkpnLlN0cmVhbUNoYXJhY3RlcmlzdGljcztpLmJpdHJhdGU9cixpLnN0cmVhbVN0YXRlPXQudHlwZSxpLmRlbHRhPW51bGwhPWUueUQuZ2V0RGVsdGEoKT9lLnlELmdldERlbHRhKCk6LTEsbi5wdXNoKGkpfSksbi5sZW5ndGg+MCYmci5zZXRTdHJlYW1DaGFyYWN0ZXJpc3RpY3MobiksdC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ZS53ai5MZyh1LlJmLkVnLm5kLHIpfSl9fWNhdGNoKGUpe0UuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBhbm5vdW5jaW5nIHBlZXIgaW5mbyB0byBhbGwgcGFydG5lcnNcIix0aGlzLmxvZ2dlcklkLHYuaHMuY3IuYXIsZSl9fSx0LnByb3RvdHlwZS50UT1mdW5jdGlvbigpe3RyeXt2YXIgZT1uZXcgbztyZXR1cm4gdGhpcy5kQi5mb3JFYWNoKGZ1bmN0aW9uKHQscil7ZS5oYXMocil8fGUuc2V0KHIsdCl9KSx0aGlzLmZCLmZvckVhY2goZnVuY3Rpb24odCxyKXtlLmhhcyhyKXx8ZS5zZXQocix0KX0pLHRoaXMuZ0IuZm9yRWFjaChmdW5jdGlvbih0LHIpe2UuaGFzKHIpfHxlLnNldChyLHQpfSksdGhpcy5hai5mb3JFYWNoKGZ1bmN0aW9uKHQscil7ZS5oYXMocil8fGUuc2V0KHIsdCl9KSxlfWNhdGNoKGUpe3JldHVybiBFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY29sbGVjdGluZyBhbGwgcGFydG5lcnNcIix0aGlzLmxvZ2dlcklkLHYuaHMuY3IuaHIsZSksbmV3IG99fSx0fShwLnJRKTt0LmlRPW19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGV9KCk7aS5uUT0hMCxpLnNRPTNlNCxpLm9RPTZlNCxpLmFRPTNlNCx0LmhRPWk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO24uWGE9XCJzaXRlXCIsbi5aYT1cImV4dGVybmFsQXNcIixuLiRhPVwiYXZhaWxhYmxlU2VuZFJhdGVcIixuLmVoPVwicmVtb3RlQWRkcmVzc1wiLG4udGg9XCJsb2NhbEFkZHJlc3NcIix0LmNRPW59LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnVRPWUsdGhpcy5sUT10fXJldHVybiBlLnByb3RvdHlwZS5waj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxRfSxlLnByb3RvdHlwZS5kaj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVRfSxlfSgpO3QucFE9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5kUT1mdW5jdGlvbihlLHQpe3ZhciByPWUuZ1EuZlEoITEpLGk9dC5nUS5mUSghMSk7cmV0dXJuIHI+aT8xOnI8aT8wOi0xfSxlfSgpO3QuRVE9aTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuZFE9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnZRLmZRKCExKSxpPXQudlEuZlEoITEpO3JldHVybiByPmk/MTpyPGk/MDotMX0sZX0oKTt0LnlRPW59LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDMpLG49cig0KSxzPXIoMCksbz1yKDEwNCksYT1yKDEwNSksaD1yKDI2KSxjPXIoNDEpLHU9cigxOCksbD1yKDIxKSxwPXIoMTA5KSxkPXIoMjIpLGY9cigxMTEpLGc9cig4KSxFPXIoMTEzKSx2PXIoNTYpLHk9cigzMiksVD1yKDEpLG09cig0NiksST1yKDI5KSxTPXIoNiksUj1vLkhpdmVDb21tLk9wdGlvbnMsdz1hLkhpdmVDb21tLlRRLGI9aC5IaXZlQ29tbS5vRSxDPWguSGl2ZUNvbW0uU0UsXz1oLkhpdmVDb21tLkhpdmVUZWNoRXJyb3IsUD1oLkhpdmVDb21tLnZFLEE9aC5IaXZlQ29tbS53RSxPPXIoNTQpLE49Uy5oZS5kaCxEPVMuaGUubGgsaz1TLmhlLnVoLEw9Uy5oZS5waDsoa3x8TCkmJnIoMTQpLkhpdmVDb25maWcsdC52ZXJzaW9uPU47dmFyIE07IWZ1bmN0aW9uKGUpe3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLm1RPVt3W3cuSGl2ZUphdmFdLHdbdy5IaXZlSnNQcm94eV0sd1t3LkhpdmVKU10sd1t3LlN0YXRzSlNdXSx0aGlzLklRPW5ldyBpLHRoaXMuU1E9bmV3IEFycmF5LHRoaXMuUlE9bmV3IEFycmF5LHRoaXMud1E9bnVsbCx0aGlzLmJRPTAsdGhpcy5DUT0wLHRoaXMubG9nZ2VySWQ9XCJbSGl2ZUNvbW1dIFwiLHRoaXMuX1E9MCx0aGlzLlBRPXUuUmwuZ2V0SXRlbShcImhpdmVQbHVnaW5JZFwiKSx0aGlzLlBRfHwodGhpcy5QUT1NYXRoLmFicyhNYXRoLmZsb29yKDY4NzE5NDc2NzM2Kk1hdGgucmFuZG9tKCkpKS50b1N0cmluZygxNiksdS5SbC5zZXRJdGVtKFwiaGl2ZVBsdWdpbklkXCIsdGhpcy5QUSkpLFQuRXJyb3JNb25pdG9yLnZlKHQudmVyc2lvbiksdGhpcy5vcHRpb25zXz1uZXcgUi5BUSx0aGlzLk9RKGUpLGwuU3AoZSx0aGlzLm9wdGlvbnNfKSxsLlJwKHdpbmRvdy5sb2NhdGlvbi5ocmVmLG5ldyBSLk5RLHRoaXMub3B0aW9uc18pLG8ua1EuRFEodGhpcy5vcHRpb25zXyksdGhpcy5mZj1zLkZyYW1ld29yay5yZXNvbHZlKHMuRnJhbWV3b3JrLlYuUiksYy5IaXZlQ29uZmlnLkZyYW1ld29yay5Mb2dnZXJUaW1lc3RhbXA9dGhpcy5vcHRpb25zKCkubG9nZ2VyVGltZXN0YW1wLHRoaXMuZmYuZk4odGhpcy5vcHRpb25zKCkuZGVidWdMZXZlbCksVC5FcnJvck1vbml0b3IudmUoKS5tZSh0aGlzLmZmLmxvZygpKTt2YXIgcj1zLkZyYW1ld29yay5yZXNvbHZlKGcucGMuTSksbj1zLkZyYW1ld29yay5yZXNvbHZlKGcucGMuc2MpO3IuWmwoKS50aGVuKGZ1bmN0aW9uKGUpe1QuRXJyb3JNb25pdG9yLnZlKCkuc2V0VXNlcihlLnRwKCkpLFQuRXJyb3JNb25pdG9yLnZlKCkuSWUoe3JlcG9ydGluZ0d1aWQ6ZS5ycCgpfSksVC5FcnJvck1vbml0b3IudmUoKS5JZSh7cDJwSWQ6ZS50cCgpfSl9KTt2YXIgYT17fTtuZXcgcC5MUSh0aGlzKSxuLmdldENvbm5lY3Rpdml0eUluZm8oKS50aGVuKGZ1bmN0aW9uKGUpe2E9e3BJUEFkZHI6ZS5nZXROZXR3b3JrQ2hhbmdlZCgpLmdldFByaXZhdGVJcCgpfSxULkVycm9yTW9uaXRvci52ZSgpLkllKHtwcml2YXRlSXA6YS5wSVBBZGRyfSl9KSx3aW5kb3cuZ2Y9dGhpcy5mZi5sb2coKSx0aGlzLk1RKCksdGhpcy5wbHVnaW5SZWZlcmVuY2U9bmV3IEEodGhpcyk7dmFyIGg9dGhpcy5vcHRpb25zKCkuaWRsZVRpbWVQZXJpb2Q+dGhpcy5vcHRpb25zKCkuZmVlZGJhY2tQZXJpb2Q/dGhpcy5vcHRpb25zKCkuaWRsZVRpbWVQZXJpb2Q6SS5MLm5oO3RoaXMuRlE9bmV3IHUuTmwoaCl9cmV0dXJuIGUucHJvdG90eXBlLm9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zX30sZS5wcm90b3R5cGUubG9nZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud1E/dGhpcy5mZi5sb2codGhpcy53US5pZCk6dGhpcy5mZi5sb2coKX0sZS5wcm90b3R5cGUubG9nZ2VyTGV2ZWw9ZnVuY3Rpb24oKXtpZih0aGlzLmxvZ2dlcilyZXR1cm4gdGhpcy5mZi5sZXZlbH0sZS5wcm90b3R5cGUuZ2V0UGx1Z2luSWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5QUX0sZS5wcm90b3R5cGUuZ2V0Q29tbVZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdC52ZXJzaW9ufSxlLnByb3RvdHlwZS51cGRhdGVDb21tc0ZvckluaXRTZXNzaW9ucz1mdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9dGhpcy5SUTtlPHQubGVuZ3RoO2UrKyl7dmFyIHI9dFtlXTtyLnRlY2guTEwodGhpcyksXCJIaXZlSlNcIj09PXIudGVjaC5nZXROYW1lKCkmJnIudGVjaC5VUSYmci50ZWNoLlVRLkxMKHRoaXMpfX0sZS5wcm90b3R5cGUuT1E9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHYuU3RhdHNKUyh0aGlzLGUpO2lmKHRoaXMuSVEuc2V0KHYuU3RhdHNKUy5FTCx0KSxrKXt2YXIgaT1yKDEzMikuSGl2ZUpTO3RoaXMuSVEuc2V0KGkuRUwsbmV3IGkodGhpcyxlLHQpKX1pZihMKXt2YXIgbj1yKDE5OSkuSGl2ZUpzUHJveHk7dGhpcy5JUS5zZXQobi5FTCxuZXcgbih0aGlzLGUsdCkpfWlmKEQpe3ZhciBzPXIoMjAxKS5IaXZlSmF2YTt0aGlzLklRLnNldChzLkVMLG5ldyBzKHRoaXMsZSkpfXZhciBvPWUuaGl2ZVRlY2hPcmRlcjtpZighb3x8byBpbnN0YW5jZW9mIEFycmF5KWlmKG8mJm8ubGVuZ3RoPjApZm9yKHZhciBhPW8ubGVuZ3RoO2EtLTspe3ZhciBoPW9bYV07XCJzdHJpbmdcIiE9dHlwZW9mIGh8fC0xPT10aGlzLm1RLmluZGV4T2YoaCk/KGNvbnNvbGUud2Fybih0aGlzLmxvZ2dlcklkKydUaGUgXCInK2grJ1wiIEhpdmUgdGVjaCBpcyB1bmRlZmluZWQnKSxvLnNwbGljZShhLDEpKTpcInN0cmluZ1wiPT10eXBlb2YgaCYmdGhpcy5JUS5oYXMoaCl8fGNvbnNvbGUud2Fybih0aGlzLmxvZ2dlcklkKydUaGUgXCInK2grJ1wiIEhpdmUgdGVjaCBpcyBub3QgZW5hYmxlZCBvbiB0aGlzIHBsdWdpbicpfWVsc2Ugbz10aGlzLm1RO2Vsc2UgY29uc29sZS53YXJuKHRoaXMubG9nZ2VySWQrXCJoaXZlVGVjaE9yZGVyIHZhbHVlIG5vdCBhY2NlcHRlZC4gSXQgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzXCIpLG89dGhpcy5tUTtlLmhpdmVUZWNoT3JkZXI9b30sZS5wcm90b3R5cGUucmVzb2x2ZVRpY2tldFByb21pc2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmxvZ2dlcigpLm5vdGljZSh0aGlzLmxvZ2dlcklkK1wicmVzb2x2aW5nIFwiK2UpO3ZhciByPW4uZGVmZXIoKTtpZighZSlyZXR1cm4gci5yZWplY3QodS5TbChcIlwiLGIuc0UsXCJObyB0aWNrZXQgcHJvdmlkZWQuXCIpKSxyLlNzO3RoaXMuQlEoZSk7dmFyIGk9dGhpcy5IUSgpLnZhbHVlcygpOzA9PWkubGVuZ3RoJiZyLnJlamVjdCh1LlNsKGUsYi5yRSkpO3ZhciBzLG8sYT0hMSxoPSExLGM9MCxwPW51bGw7cmV0dXJuIGwud3AoZnVuY3Rpb24oKXtyZXR1cm4hYSYmIWgmJmM8aS5sZW5ndGgmJiFzfSxmdW5jdGlvbigpe3ZhciByPWlbYysrXTtyLmtMKCk7dmFyIHU7cmV0dXJuIHU9ci52TCgpJiYhbz90LktCKGUsdC5vcHRpb25zKCkudGVzdElkKTpuLnJlc29sdmUobnVsbCksdS50aGVuKGZ1bmN0aW9uKGkpe251bGwhPWkmJihvPWkpO3ZhciBzPXIubUwoKTtyZXR1cm4gci5pbml0U2Vzc2lvbihlLG8pLnRpbWVvdXQocyxcIltcIityLmdldE5hbWUoKStcIl0gRXJyb3I6IGluaXRpYWxpemF0aW9uIHRpbWVkIG91dCBhZnRlciBcIitzK1wibXNcIikudGhlbihmdW5jdGlvbihlKXtwPWUsdC54UShwLHIpLGE9ITAsIXIudkwoKSYmbyYmby5IbC5yZXNldCgpLFQuRXJyb3JNb25pdG9yLnZlKCkuSWUoe3Nlc3Npb25JZDpwLmlkfSksdC5sb2dnZXIoKS5ub3RpY2UodC5sb2dnZXJJZCtcImluaXRpYWxpemluZyBTZXNzaW9uOltcIitwLmlkK1wiXSBUaWNrZXQ6XCIrcC50aWNrZXQudG9TdHJpbmcoKStcIiBIaXZlVGVjaDpbXCIrcC50ZWNoLmdldE5hbWUoKStcIl1cIiksbi5yZXNvbHZlKCEwKX0sZnVuY3Rpb24oaSl7aSBpbnN0YW5jZW9mIEVycm9yJiYoaT1uZXcgXyhQLkVFLGkubWVzc2FnZSksci5ETChpKSksaS50aWNrZXRVcmw9ZSxoPSFyLm9uRXJyb3IoaSksdC5sb2dnZXIoKS5kZWJ1Zyh0LmxvZ2dlcklkK1widGVjaCBcIityLmdldE5hbWUoKStcIjogXCIraS5tZXNzYWdlKSxuLnJlc29sdmUoITApfSl9LGZ1bmN0aW9uKGUpe3M9ZSxuLnJlc29sdmUoITApfSl9KS50aGVuKGZ1bmN0aW9uKCl7cz9yLnJlamVjdCh1LlNsKGUsYi5zRSxzKSk6aD9yLnJlamVjdCh1LlNsKGUsYi5uRSkpOmE/ci5yZXNvbHZlKHApOnIucmVqZWN0KHUuU2woZSxiLnJFKSl9KS5jYXRjaChmdW5jdGlvbihpKXtULkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgcmVzb2x2aW5nIHRpY2tldCBwcm9taXNlXCIsdC5sb2dnZXJJZCxpKSxyLnJlamVjdCh1LlNsKGUsYi50RSxpLnRvU3RyaW5nKCkpKX0pLmRvbmUoKSxyLlNzfSxlLnByb3RvdHlwZS5LQj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIHkuSGl2ZS5SZXBvcnRpbmcoKS5pbml0U2Vzc2lvbihlLCExLHQpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHIubG9nZ2VyKCkuZGVidWcoci5sb2dnZXJJZCtcInZlcmlmaWVkIHRpY2tldCBcIitlKSxyLnVwZGF0ZVBsYXllckluZm8odCksdH0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBuLnJlamVjdChcIlRpY2tldCBub3QgdmVyaWZpZWQsIGVycm9yOiBcIitlLm1lc3NhZ2UpfSl9LGUucHJvdG90eXBlLkhRPWZ1bmN0aW9uKCl7dmFyIGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLm9wdGlvbnMoKS5oaXZlVGVjaE9yZGVyKSksdD1uZXcgaTtmb3IodmFyIHIgaW4gZSl0aGlzLklRLmhhcyhlW3JdKSYmdC5zZXQoZVtyXSx0aGlzLklRLmdldChlW3JdKSk7cmV0dXJuIHR9LGUucHJvdG90eXBlLkJRPWZ1bmN0aW9uKGUpe3ZhciB0PVQuRXJyb3JNb25pdG9yLnZlKCk7dHJ5e3ZhciByPW5ldyBtLkJOO3IuUk4oZSksci51cCgpJiZyLmNwKCkmJnIuaHAoKT90LnNldFRhZ3MoW3IudXAoKSxyLmNwKCksci5ocCgpXSk6dC5sb2dFcnJvcihcIlRpY2tldCBub3QgdmFsaWQsIHdlIGNvdWxkIG5vdCByZXNvbHZlIHRoZSB0cmlwbGUgcGFydG5lcklkL0N1c3RvbWVySWQvQ29udGVudElkXCIsdGhpcy5sb2dnZXJJZCx7cGFydG5lcklkOnIudXAoKSxjdXN0b21lcklkOnIuY3AoKSxjb250ZW50SWQ6ci5ocCgpfSl9Y2F0Y2goZSl7dGhpcy5sb2dnZXIoKS53YXJuKHRoaXMubG9nZ2VySWQrXCIgXCIrZS5tZXNzYWdlLGUpLHQubm90aWZ5KGUpfX0sZS5wcm90b3R5cGUudXBkYXRlUGxheWVySW5mbz1mdW5jdGlvbihlKXt2YXIgcj17Y29tbVZlcnNpb246dC52ZXJzaW9uLHBsdWdpbk5hbWU6dGhpcy5nZXRQbHVnaW5OYW1lKCkscGx1Z2luVmVyc2lvbjp0aGlzLmdldFBsdWdpblZlcnNpb24oKSxwbGF5ZXJUZWNoOnRoaXMuZ2V0UGxheWVyVGVjaCgpLHBsYXllclZlcnNpb246dGhpcy5nZXRQbGF5ZXJWZXJzaW9uKCksdGVsZW1ldHJ5SWQ6dGhpcy5nZXRUZWxlbWV0cnlJZCgpfTtlLkhsLnVwZGF0ZVBsYXllckluZm8ocil9LGUucHJvdG90eXBlLm9uU2V0dXBUaW1lb3V0PWZ1bmN0aW9uKCl7d2luZG93LkhpdmVSZXF1ZXN0PVhNTEh0dHBSZXF1ZXN0LHUuSGl2ZVJlcXVlc3RGYWN0b3J5LmNsZWFyKCkseS5IaXZlLlJlcG9ydGluZygpLmNsb3NlKCl9LGUucHJvdG90eXBlLmFkZFRlY2hFdmVudD1mdW5jdGlvbihlKXt0aGlzLndRJiZ0aGlzLndRLnRlY2g/KGUuc2Vzc2lvbklkPXRoaXMud1EuaWQsdGhpcy53US50ZWNoLmJkKHRoaXMud1EsZSkpOnRoaXMuU1EucHVzaChlKX0sZS5wcm90b3R5cGUuZmx1c2hUZWNoRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5TUTtyZXR1cm4gdGhpcy5TUT1uZXcgQXJyYXksZX0sZS5wcm90b3R5cGUuTVE9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9d2luZG93O3QuYWRkRXZlbnRMaXN0ZW5lcj90LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIixmdW5jdGlvbigpe2UucVEoITAsITEpfSwhMSk6dC5hdHRhY2hFdmVudChcIm9uYmVmb3JldW5sb2FkXCIsZnVuY3Rpb24oKXtlLnFRKCEwLCExKX0pfSxlLnByb3RvdHlwZS5jbG9zZUhpdmVTZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyKCkuZGVidWcoXCJNYW51YWxseSBDbG9zaW5nIFNlc3Npb25cIisoZT9cIiBiZWNhdXNlOiBcIitlOlwiXCIpKTt2YXIgdD10aGlzLmdldEFjdGl2ZVNlc3Npb24oKTt0JiZ1LkhpdmVSZXF1ZXN0RmFjdG9yeS5jbGVhclNlc3Npb25TdGF0ZSh0LmlkKSx0aGlzLnJlc2V0U2Vzc2lvbighMCl9LGUucHJvdG90eXBlLnJlc2V0U2Vzc2lvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMucVEoZSksITE9PT1lP3RoaXMud1EmJnRoaXMuUlEuZXZlcnkoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQhPT10LndRLmlkfSkmJnRoaXMuUlEudW5zaGlmdCh0aGlzLndRKTp0aGlzLlJRLmxlbmd0aD0wLHRoaXMuR1EoKSx0aGlzLndRPW51bGwsdGhpcy5iUT0wLHRoaXMuQ1E9MH0sZS5wcm90b3R5cGUueFE9ZnVuY3Rpb24oZSx0KXtlLnRlY2g9dCx0aGlzLlJRLnB1c2goZSl9LGUucHJvdG90eXBlLm9uQWN0aXZhdGVTZXNzaW9uPWZ1bmN0aW9uKGUpe2lmKG51bGw9PXRoaXMud1Epe2Zvcih2YXIgdD1lfHx0aGlzLmdldFBsYXllclNvdXJjZSgpLHI9MDtyPHRoaXMuUlEubGVuZ3RoO3IrKyl7dmFyIGk9dGhpcy5SUVtyXTtpZihpLmlzQWN0aXZlKHQpKXtpZih0aGlzLndRPWksdGhpcy53US5ybD90aGlzLndRLnJsLkZsLlNEKHRoaXMud1EudGlja2V0KTp0aGlzLlZRKCksdGhpcy5SUS5sZW5ndGg9MCx0aGlzLndRLnRlY2gub25BY3RpdmVTZXNzaW9uKHRoaXMud1EpLHRoaXMubG9nZ2VyKCkubm90aWNlKHRoaXMubG9nZ2VySWQrXCJhY3RpdmF0aW5nIFNlc3Npb246W1wiK3RoaXMud1EuaWQrXCJdIFRpY2tldDpcIit0aGlzLndRLnRpY2tldC50b1N0cmluZygpK1wiIEhpdmVUZWNoOltcIit0aGlzLndRLnRlY2guZ2V0TmFtZSgpK1wiXVwiKSx0aGlzLmpRKCksdGhpcy5vcHRpb25zKCkub25BY3RpdmVTZXNzaW9uKXRyeXt0aGlzLm9wdGlvbnMoKS5vbkFjdGl2ZVNlc3Npb24oaS50b0hpdmVTZXNzaW9uKCkpfWNhdGNoKGUpe1QuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IodGhpcy5sb2dnZXJJZCtcIiBleGNlcHRpb24gaW4gdXNlci1kZWZpbmVkIEdlbmVyaWMgb25BY3RpdmVTZXNzaW9uIGNhbGxiYWNrOiBcIitlKX1yZXR1cm4hMH19dGhpcy5sb2dnZXIoKS53YXJuKHRoaXMubG9nZ2VySWQrXCJDbG9zaW5nIHNlc3Npb25zIC0gdGhlIGFjdGl2ZSBzdHJlYW0gZG9lc24ndCBtYXRjaCBhbnkgaW5pdGlhbGl6ZWQgc2Vzc2lvbnNcIiksdGhpcy5sb2dnZXIoKS53YXJuKHRoaXMubG9nZ2VySWQrXCJBY3RpdmU6XCIrdCtcIiAtIGluaXRpYWxpemVkOiBcIit0aGlzLlJRLmxlbmd0aCksdGhpcy5yZXNldFNlc3Npb24oKX1yZXR1cm4hMX0sZS5wcm90b3R5cGUuZ2V0QWN0aXZlU2Vzc2lvbj1mdW5jdGlvbigpe2lmKHRoaXMud1EpcmV0dXJuIHRoaXMud1EudG9IaXZlU2Vzc2lvbigpfSxlLnByb3RvdHlwZS5WUT1mdW5jdGlvbigpe3ZhciBlPSExO3RoaXMuUlEuZm9yRWFjaChmdW5jdGlvbih0KXt0LnJsJiYoZT0hMCl9KSxlJiZ5LkhpdmUuUmVwb3J0aW5nKCkuY2xvc2UoKX0sZS5wcm90b3R5cGUuaXNTZXNzaW9uQWN0aXZlPWZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy53USl7aWYodGhpcy53US5pc0FjdGl2ZSh0aGlzLmdldFBsYXllclNvdXJjZSgpKSlyZXR1cm4hMDt0aGlzLmxvZ2dlcigpLndhcm4odGhpcy5sb2dnZXJJZCtcIlNlc3Npb24gc3JjIG1pc21hdGNoOiBcIit0aGlzLmdldFBsYXllclNvdXJjZSgpK1wiICE9IFwiK3RoaXMud1EubWFuaWZlc3QpLHRoaXMucmVzZXRTZXNzaW9uKCl9cmV0dXJuITF9LGUucHJvdG90eXBlLnFRPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9ITApLG51bGwhPXRoaXMud1EpdGhpcy5sb2dnZXIoKS5ub3RpY2UodGhpcy5sb2dnZXJJZCtcIlN0b3BwaW5nIHNlc3Npb24gW1wiK3RoaXMud1EuaWQrXCJdXCIpLHRoaXMud1EuY2xvc2UoZSx0KTtlbHNlIGlmKHRoaXMuUlEubGVuZ3RoPjApe3ZhciByPXRoaXMuUlFbMF07dGhpcy5sb2dnZXIoKS5ub3RpY2UodGhpcy5sb2dnZXJJZCtcIkF0dGVtcHQgdG8gc3RvcHBpbmcgc2Vzc2lvbiBbXCIrci5pZCtcIl1cIiksci5jbG9zZShlLHQpfX0sZS5wcm90b3R5cGUualE9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO251bGw9PXRoaXMuUVEmJih0aGlzLlFRPXNldEludGVydmFsKGZ1bmN0aW9uKCl7ZS5LUSgpfSx0aGlzLm9wdGlvbnMoKS5mZWVkYmFja1BlcmlvZCksdGhpcy5LUSgpKX0sZS5wcm90b3R5cGUuR1E9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuUVEpLHRoaXMuUVE9bnVsbH0sZS5wcm90b3R5cGUuS1E9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMuaXNTZXNzaW9uQWN0aXZlKCkpe2lmKCF0aGlzLmlzQWN0aXZlKCkpcmV0dXJuIHZvaWQgdGhpcy5yZXNldFNlc3Npb24oKTt2YXIgdD1uZXcgdS51bDt0LlBsPXRoaXMuZ2V0Q3VycmVudFRpbWUoKSx0LkFsPXRoaXMuZ2V0QnVmZmVyTGVuKCksdC5PbD10aGlzLmJRLHQud2lkdGg9dGhpcy5nZXRXaW5kb3dTaXplKCkud2lkdGgsdC5oZWlnaHQ9dGhpcy5nZXRXaW5kb3dTaXplKCkuaGVpZ2h0LHQuWVE9dGhpcy5pc0Z1bGxzY3JlZW4oKSx0aGlzLndRLmlsKHRoaXMuRlEuYmwodCkpLHRoaXMud1EudGVjaC5TTCh0aGlzLndRLHQpLmZhaWwoZnVuY3Rpb24odCl7ZS5sb2dnZXIoKS53YXJuKGUubG9nZ2VySWQrXCJzdGF0cyBoYW5kbGluZyBmYWlsZWRcIix0KSxlLkdRKCl9KX19LGUucHJvdG90eXBlLnJlZ2lzdGVyR2VuZXJpY0V2ZW50cz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dHJ5e3UuVGwudmUodGhpcy5sb2dnZXIoKSkueWwoZnVuY3Rpb24odCl7dmFyIHI9ZS5nZXRQb3RlbnRpYWxTZXNzaW9uKCk7ciYmIXIuc2woKSYmKGUub25FdmVudEZlZWRiYWNrKHQ/ZC5HbC5ZcC5LcDpkLkdsLllwLkhJRERFTiksZS5sb2dnZXIoKS5kZWJ1Zyh0P1widmlzaWJsZVwiOlwiaGlkZGVuXCIpKX0pfWNhdGNoKGUpe1QuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJlcnJvciBzZXR0aW5nIHVwIHRoZSB2aXNpYmlsaXR5Q2hhbmdlIGxpc3RlbmVyXCIsdGhpcy5sb2dnZXJJZCx7ZXJyb3I6ZX0pfX0sZS5wcm90b3R5cGUub25TdGFydEJ1ZmZlcmluZz1mdW5jdGlvbihlKXt0aGlzLmlzU2Vzc2lvbkFjdGl2ZSgpJiZ0aGlzLkNRPD0wJiYodGhpcy5DUT1EYXRlLm5vdygpLCh2b2lkIDA9PWV8fGUpJiZ0aGlzLm9uRXZlbnRGZWVkYmFjayhkLkdsLllwLnhwKSl9LGUucHJvdG90eXBlLm9uRW5kQnVmZmVyaW5nPWZ1bmN0aW9uKCl7dmFyIGU9MD09dGhpcy5iUTtpZih0aGlzLkNRPjApe3ZhciB0PURhdGUubm93KCktdGhpcy5DUTtyZXR1cm4gdGhpcy5iUSs9dCx0aGlzLmxvZ2dlcigpLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJyZXBvcnRpbmcgbmV3IGJ1ZmZlcmluZyBldmVudCBvZiBcIit0KSx0aGlzLkNRPTAsZSYmdGhpcy5LUSgpLCEwfXJldHVybiExfSxlLnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0hMCksdGhpcy5vbkV2ZW50RmVlZGJhY2soZC5HbC5ZcC5FUlJPUix7Y29kZTotMSxcInBsYXllci1jb2RlXCI6ZX0pLHImJnRoaXMucmVzZXRTZXNzaW9uKCl9LGUucHJvdG90eXBlLm9uRXZlbnRGZWVkYmFjaz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT10aGlzLmdldFBvdGVudGlhbFNlc3Npb24oKTtudWxsPT1pfHxpIT10aGlzLndRJiZpLnRlY2guZ2V0TmFtZSgpPT09d1t3LkhpdmVKYXZhXXx8aS50ZWNoLkNMKGksZSx0KS5mYWlsKGZ1bmN0aW9uKGUpe3IubG9nZ2VyKCkud2FybihyLmxvZ2dlcklkK1wiZXJyb3IgaW4gZm9yd2FyZGluZyBwbGF5ZXIgZXZlbnQgdG8gdGVjaFwiLGUpfSl9LGUucHJvdG90eXBlLmdldFBvdGVudGlhbFNlc3Npb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53UT90aGlzLndROnRoaXMuUlEmJnRoaXMuUlEubGVuZ3RoPjA/dGhpcy5SUVswXTp2b2lkIDB9LGUucHJvdG90eXBlLmluaXRTdGF0dXNDb2RlPWZ1bmN0aW9uKCl7dGhpcy5fUT0wfSxlLnByb3RvdHlwZS5zZXRTdGF0dXNDb2RlPWZ1bmN0aW9uKGUsdCl7dGhpcy5pbml0U3RhdHVzQ29kZSgpO3RoaXMuX1ErPWU8PDI4LHQmJjA9PT1lJiYodGhpcy5fUSs9MTw8NCooNi13W3QuZ2V0TmFtZSgpXSkpLGU+MCYmVC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIlN0YXR1cyBDb2RlIEVycm9yXCIsdGhpcy5sb2dnZXJJZCx7Y29kZTpDW2VdfSxbXCJQbHVnaW4gRXJyb3IgQ29kZVwiLENbZV1dKX0sZS5wcm90b3R5cGUuZ2V0U3RhdHVzQ29kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9RfSxlLnByb3RvdHlwZS5nZXRUZWxlbWV0cnlJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMoKS50ZWxlbWV0cnlJZH0sZS5sb2dFcnJvcj1mdW5jdGlvbihlLHQscixpKXt2YXIgbj1ULkVycm9yTW9uaXRvci52ZSgpO24ubG9nRXJyb3IuYXBwbHkobixhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5yZWdpc3RlckNvbW09ZnVuY3Rpb24oZSl7Ty56dS5yZWdpc3RlckNvbW0odGhpcyxlKX0sZX0oKTtlLlBsdWdpbj1hfShNPXQuSGl2ZUNvbW18fCh0LkhpdmVDb21tPXt9KSkscy5GcmFtZXdvcmsuJChuZXcgZi5XUSkscy5GcmFtZXdvcmsuaWUoXCJwZWVyMFwiLG5ldyBFLnpRKSxzLkZyYW1ld29yay5uZShcInBlZXIwXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJih3aW5kb3cuSGl2ZVJlcXVlc3RGYWN0b3J5PXUuSGl2ZVJlcXVlc3RGYWN0b3J5LHZvaWQgMD09PXdpbmRvdy5IaXZlQ29tbSYmKHdpbmRvdy5IaXZlQ29tbT17fSksd2luZG93LkhpdmVDb21tLlBsdWdpbj1NLlBsdWdpbix3aW5kb3cuSGl2ZUNvbW0uT3B0aW9ucz1SLkFRLHdpbmRvdy5IaXZlQ29tbS5IaXZlUmVxdWVzdEZhY3Rvcnk9dS5IaXZlUmVxdWVzdEZhY3Rvcnksd2luZG93LkhpdmVDb21tLnp1PU8uenUsd2luZG93LkhpdmVDb21tLkhpdmVQbGF5ZXJFeHRlbmRlZFN0YXRzPXUuSGl2ZVBsYXllckV4dGVuZGVkU3RhdHMsd2luZG93LkhpdmVDb21tLlRlY2hOYW1lPWEuSGl2ZUNvbW0uVGVjaE5hbWUsd2luZG93LkhpdmVDb21tLmxvZ0Vycm9yPU0uUGx1Z2luLmxvZ0Vycm9yKX0sZnVuY3Rpb24oZSx0KXtpZighUmVnRXhwLmVzY2FwZSl7dmFyIHI9L1stW1xcXXt9KCkqKz8uXFxcXF4kfCwjXFxzXS9nO1JlZ0V4cC5lc2NhcGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShyLFwiXFxcXCQmXCIpfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKCl7dGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY29uc3RydWN0LiBNYXBDaGFuZ2VzIGlzIGEgbWl4aW4uXCIpfXZhciBuPXIoMzcpLHM9cig1MCk7ZS5pPWk7dmFyIG89KE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksbmV3IG4pLGE9bnVsbDtpLnByb3RvdHlwZS5KUT1mdW5jdGlvbigpe3JldHVybiBvLmhhcyh0aGlzKXx8KGF8fChhPXIoNTEpKSxvLnNldCh0aGlzLGEoKSkpLG8uZ2V0KHRoaXMpfSxpLnByb3RvdHlwZS5YUT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLkpRKCk7cmV0dXJuIGU9ZXx8XCJcIix0LmhhcyhlKXx8dC5zZXQoZSx7WWM6bmV3IHMsV2M6bmV3IHN9KSx0LmdldChlKX0saS5wcm90b3R5cGUuWlE9ZnVuY3Rpb24oZSx0LHIpeyF0aGlzLlpjJiZ0aGlzLlhjJiZ0aGlzLlhjKCk7dmFyIGksbj10aGlzLlhRKHQpO2k9cj9uLlljOm4uV2MsaS5wdXNoKGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiZGlzcGF0Y2hlc01hcENoYW5nZXNcIix7dmFsdWU6ITAsQWg6ITAsbDohMCxwOiExfSk7dmFyIHM9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtzJiYocy4kUShlLHQscikscz1udWxsKX19LGkucHJvdG90eXBlLiRRPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMuWFEodCk7aT1yP24uWWM6bi5XYzt2YXIgcz1pLkxrKGUpO2lmKCFzKXRocm93IG5ldyBFcnJvcihcIkNhbid0IHJlbW92ZSBtYXAgY2hhbmdlIGxpc3RlbmVyOiBkb2VzIG5vdCBleGlzdDogdG9rZW4gXCIrSlNPTi5zdHJpbmdpZnkodCkpO3MuZGVsZXRlKCl9LGkucHJvdG90eXBlLlhrPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1cIk1hcFwiKyhyP1wiV2lsbENoYW5nZVwiOlwiQ2hhbmdlXCIpO3RoaXMuSlEoKS5mb3JFYWNoKGZ1bmN0aW9uKG4scyl7aWYoIW4uaXNBY3RpdmUpe24uaXNBY3RpdmU9ITA7dmFyIG87bz1yP24uWWM6bi5XYzt2YXIgYT1cImhhbmRsZVwiKyhzLnNsaWNlKDAsMSkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpKStpO3RyeXtvLmZvckVhY2goZnVuY3Rpb24ocil7aWYoclthXSlyW2FdKHQsZSx0aGlzKTtlbHNle2lmKCFyLmNhbGwpdGhyb3cgbmV3IEVycm9yKFwiSGFuZGxlciBcIityK1wiIGhhcyBubyBtZXRob2QgXCIrYStcIiBhbmQgaXMgbm90IGNhbGxhYmxlXCIpO3IuY2FsbChyLHQsZSx0aGlzKX19LHRoaXMpfWZpbmFsbHl7bi5pc0FjdGl2ZT0hMX19fSx0aGlzKX0saS5wcm90b3R5cGUuZUs9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5aUShlLHQsITApfSxpLnByb3RvdHlwZS50Sz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLiRRKGUsdCwhMCl9LGkucHJvdG90eXBlLkprPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuWGsoZSx0LCEwKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUsdCxyLG4pe2lmKCEodGhpcyBpbnN0YW5jZW9mIGkpKXJldHVybiBuZXcgaShlLHQscixuKTt0PXR8fE9iamVjdC5jcyxyPXJ8fE9iamVjdC5oYXNoLG49bnx8RnVuY3Rpb24udXMsdGhpcy5scz10LHRoaXMucHM9cix0aGlzLmRzPW47dmFyIHM9dGhpczt0aGlzLnJLPW5ldyB0aGlzLmlLKG51bGwsZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHMubkt9KSx0aGlzLmxlbmd0aD0wLHRoaXMuYWRkRWFjaChlKX12YXIgbj0ocigxMSkscig1MSkpLHM9cig1MCksbz1yKDEyKSxhPXIoMzkpLGg9cig2OSksYz1yKDEzKTtPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2UuaT1pLGkuc0s9aSxPYmplY3QuYWRkRWFjaChpLnByb3RvdHlwZSxvLnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goaS5wcm90b3R5cGUsYS5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKGkucHJvdG90eXBlLGMucHJvdG90eXBlKSxpLnByb3RvdHlwZS5pSz1uLGkucHJvdG90eXBlLm5LPXMsaS5wcm90b3R5cGUuRXM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKGUsdGhpcy5scyx0aGlzLnBzLHRoaXMuZHMpfSxpLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wcyhlKTtyZXR1cm4gdGhpcy5ySy5nZXQodCkuaGFzKGUpfSxpLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSx0KXtpZih0KXRocm93IG5ldyBFcnJvcihcIkZhc3RTZXQjZ2V0IGRvZXMgbm90IHN1cHBvcnQgc2Vjb25kIGFyZ3VtZW50OiBlcXVhbHNcIik7dmFyIHI9dGhpcy5wcyhlKSxpPXRoaXMucks7cmV0dXJuIGkuaGFzKHIpP2kuZ2V0KHIpLmdldChlKTp0aGlzLmRzKGUpfSxpLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oZSx0KXtpZih0KXRocm93IG5ldyBFcnJvcihcIkZhc3RTZXQjZGVsZXRlIGRvZXMgbm90IHN1cHBvcnQgc2Vjb25kIGFyZ3VtZW50OiBlcXVhbHNcIik7dmFyIHI9dGhpcy5wcyhlKSxpPXRoaXMucks7aWYoaS5oYXMocikpe3ZhciBuPWkuZ2V0KHIpO2lmKG4uZGVsZXRlKGUpKXJldHVybiB0aGlzLmxlbmd0aC0tLDA9PT1uLmxlbmd0aCYmaS5kZWxldGUociksITB9cmV0dXJuITF9LGkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5ySy5jbGVhcigpLHRoaXMubGVuZ3RoPTB9LGkucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnBzKGUpLHI9dGhpcy5ySztyZXR1cm4gci5oYXModCl8fHIuc2V0KHQsbmV3IHRoaXMubksobnVsbCx0aGlzLmxzKSksIXIuZ2V0KHQpLmhhcyhlKSYmKHIuZ2V0KHQpLmFkZChlKSx0aGlzLmxlbmd0aCsrLCEwKX0saS5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9YXJndW1lbnRzWzJdLGk9MDtyZXR1cm4gdGhpcy5ySy5yZWR1Y2UoZnVuY3Rpb24odCxuKXtyZXR1cm4gbi5yZWR1Y2UoZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHIsdCxuLGkrKyx0aGlzKX0sdCx0aGlzKX0sdCx0aGlzKX0saS5wcm90b3R5cGUuQmM9ZnVuY3Rpb24oKXtpZih0aGlzLmxlbmd0aD4wKXJldHVybiB0aGlzLnJLLkJjKCkuQmMoKX0saS5wcm90b3R5cGUuSGM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ySy52YWx1ZXMoKS5rYygpLkhjKCl9LGkucHJvdG90eXBlLmxvZz1mdW5jdGlvbihlLHQscixpKXtlPWV8fGguaFUsdD10fHx0aGlzLnZzLHJ8fChyPWNvbnNvbGUubG9nLGk9Y29uc29sZSkscj1yLmJpbmQoaSk7dmFyIG49dGhpcy5ySyxzPW4ua2V5cygpO3MuZm9yRWFjaChmdW5jdGlvbihvLGEpe3ZhciBoLGM7YT09PXMubGVuZ3RoLTE/KGg9ZS5uVSxjPVwiIFwiKTowPT09YT8oaD1lLnJVLGM9ZS5vVSk6KGg9ZS5zVSxjPWUub1UpO3ZhciB1PW4uZ2V0KG8pO3IuY2FsbChpLGgrZS5lVStlLnJVK1wiIFwiK28pLHUuZm9yRWFjaChmdW5jdGlvbihuLHMpe3ZhciBvLGE7cz09PXUuaGVhZC5Paz8obz1lLm5VLGE9XCIgXCIpOihvPWUuc1UsYT1lLm9VKTt2YXIgaDt0KHMsZnVuY3Rpb24odCl7aD9yLmNhbGwoaSxjK1wiIFwiK2ErXCIgIFwiK3QpOihyLmNhbGwoaSxjK1wiIFwiK28rZS5lVStlLmVVK3QpLGg9ITApfSxmdW5jdGlvbih0KXtyLmNhbGwoaSxjK1wiIFwiK2Uub1UrXCIgIFwiK3QpfSl9KX0pfSxpLnByb3RvdHlwZS52cz1mdW5jdGlvbihlLHQpe3ZhciByPWUudmFsdWU7T2JqZWN0KHIpPT09cj9KU09OLnN0cmluZ2lmeShyLG51bGwsNCkuc3BsaXQoXCJcXG5cIikuZm9yRWFjaChmdW5jdGlvbihlKXt0KFwiIFwiK2UpfSk6dChcIiBcIityKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGkpKXJldHVybiBuZXcgaShlKTtpZihBcnJheS5pc0FycmF5KGUpfHxcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gaS5IYyhlKTtpZigoZT1uKGUpKWluc3RhbmNlb2YgaSlyZXR1cm4gZTtpZihlLm5leHQpdGhpcy5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIGUubmV4dCgpfTtlbHNlIGlmKGUuSGMpe3ZhciB0PWUuSGMoKTt0aGlzLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5uZXh0KCl9fWVsc2V7aWYoXCJbb2JqZWN0IEZ1bmN0aW9uXVwiIT09bi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2FuJ3QgaXRlcmF0ZSBcIitlKTt0aGlzLm5leHQ9ZX19ZS5pPWk7dmFyIG49cigzNikscz1yKDEyKTtpLnByb3RvdHlwZS5mb3JFYWNoPXMucHJvdG90eXBlLmZvckVhY2gsaS5wcm90b3R5cGUubWFwPXMucHJvdG90eXBlLm1hcCxpLnByb3RvdHlwZS5maWx0ZXI9cy5wcm90b3R5cGUuZmlsdGVyLGkucHJvdG90eXBlLmV2ZXJ5PXMucHJvdG90eXBlLmV2ZXJ5LGkucHJvdG90eXBlLnNvbWU9cy5wcm90b3R5cGUuc29tZSxpLnByb3RvdHlwZS51bz1zLnByb3RvdHlwZS51byxpLnByb3RvdHlwZS5hbGw9cy5wcm90b3R5cGUuYWxsLGkucHJvdG90eXBlLm1pbj1zLnByb3RvdHlwZS5taW4saS5wcm90b3R5cGUubWF4PXMucHJvdG90eXBlLm1heCxpLnByb3RvdHlwZS5OYz1zLnByb3RvdHlwZS5OYyxpLnByb3RvdHlwZS5EYz1zLnByb3RvdHlwZS5EYyxpLnByb3RvdHlwZS5rYz1zLnByb3RvdHlwZS5rYyxpLnByb3RvdHlwZS5MYz1zLnByb3RvdHlwZS5MYyxpLnByb3RvdHlwZS5lbnVtZXJhdGU9cy5wcm90b3R5cGUuZW51bWVyYXRlLGkucHJvdG90eXBlLkZjPXMucHJvdG90eXBlLkZjLGkucHJvdG90eXBlLmdyb3VwPXMucHJvdG90eXBlLmdyb3VwLGkucHJvdG90eXBlLnJldmVyc2VkPXMucHJvdG90eXBlLnJldmVyc2VkLGkucHJvdG90eXBlLnRvQXJyYXk9cy5wcm90b3R5cGUudG9BcnJheSxpLnByb3RvdHlwZS5QYz1zLnByb3RvdHlwZS5QYyxpLnByb3RvdHlwZS5pdGVyYXRvcj1zLnByb3RvdHlwZS5pdGVyYXRvcixpLnByb3RvdHlwZS5Haz1udWxsLG4uZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJfaXRlcmF0aW9uT2JqZWN0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLkdrfHwodGhpcy5Haz17ZG9uZTohMSx2YWx1ZTp2b2lkIDB9KX19KSxpLnByb3RvdHlwZS5Fcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtyZXR1cm4gdC5hZGRFYWNoKGUpLHR9LGkucHJvdG90eXBlLm9LPWZ1bmN0aW9uKGUpe3ZhciB0PWkodGhpcykscj1hcmd1bWVudHNbMV0scz0wO2lmKFwiW29iamVjdCBGdW5jdGlvbl1cIiE9bi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBuZXcgdC5jb25zdHJ1Y3RvcihmdW5jdGlvbigpe2lmKCEwIT09dC5Way5kb25lKXt2YXIgaT1lLmNhbGwocix0Lm5leHQoKS52YWx1ZSxzKyssdCk7dC5Way52YWx1ZT1pfXJldHVybiB0LlZrfSl9LGkucHJvdG90eXBlLmFLPWZ1bmN0aW9uKGUpe3ZhciB0PWkodGhpcykscj1hcmd1bWVudHNbMV0scz0wO2lmKFwiW29iamVjdCBGdW5jdGlvbl1cIiE9bi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBuZXcgdC5jb25zdHJ1Y3RvcihmdW5jdGlvbigpe2Zvcih2YXIgaTs7KXtpZihpPXQubmV4dCgpLCEwPT09aS5kb25lKXJldHVybiBpO2lmKGUuY2FsbChyLGkudmFsdWUscysrLHQpKXJldHVybiBpfX0pfSxpLnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24oZSl7dmFyIHQscj1pKHRoaXMpLHM9YXJndW1lbnRzWzFdLG89YXJndW1lbnRzWzJdLGE9MDtpZihcIltvYmplY3QgRnVuY3Rpb25dXCIhPW4ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcjtpZih0PXIubmV4dCgpLCEwPT09dC5kb25lKXtpZihhcmd1bWVudHMubGVuZ3RoPjEpcmV0dXJuIGFyZ3VtZW50c1sxXTt0aHJvdyBUeXBlRXJyb3IoXCJjYW5ub3QgcmVkdWNlIGEgdmFsdWUgZnJvbSBhbiBlbXB0eSBpdGVyYXRvciB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIil9Zm9yKHM9YXJndW1lbnRzLmxlbmd0aD4xP2UuY2FsbChvLHMsdC52YWx1ZSxhLHIpOnQudmFsdWUsYSsrOzspe2lmKHQ9ci5uZXh0KCksITA9PT10LmRvbmUpcmV0dXJuIHM7cz1lLmNhbGwobyxzLHQudmFsdWUsYSxyKSxhKyt9fSxpLnByb3RvdHlwZS5jb25jYXQ9ZnVuY3Rpb24oKXtyZXR1cm4gaS5jb25jYXQoQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxpLnByb3RvdHlwZS5oSz1mdW5jdGlvbihlKXt2YXIgdCxyLHM9aSh0aGlzKSxvPWFyZ3VtZW50c1sxXSxhPSExLGg9MDtpZihcIltvYmplY3QgRnVuY3Rpb25dXCIhPW4ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcjtmb3IoOzspe2lmKHI9cy5uZXh0KCksITA9PT1yLmRvbmUpYnJlYWs7aWYoIWUuY2FsbChvLHIudmFsdWUsaCxzKSl7YT0hMCx0PXIudmFsdWU7YnJlYWt9aCsrfXJldHVybiBhP3MuY29uc3RydWN0b3IoW3RdKS5jb25jYXQocyk6cy5jb25zdHJ1Y3RvcihbXSl9LGkucHJvdG90eXBlLmNLPWZ1bmN0aW9uKGUpe3ZhciB0PWkodGhpcykscj1hcmd1bWVudHNbMV0scz0wO2lmKFwiW29iamVjdCBGdW5jdGlvbl1cIiE9bi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBuZXcgdC5jb25zdHJ1Y3RvcihmdW5jdGlvbigpe2lmKCEwIT09dC5Way5kb25lKXt2YXIgaT10Lm5leHQoKS52YWx1ZTtlLmNhbGwocixpLHMrKyx0KT90LlZrLnZhbHVlPWk6KHQuVmsuZG9uZT0hMCx0LlZrLnZhbHVlPXZvaWQgMCl9cmV0dXJuIHQuVmt9KX0saS5wcm90b3R5cGUudUs9ZnVuY3Rpb24oKXtyZXR1cm4gaS5NYyhBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGkucHJvdG90eXBlLmxLPWZ1bmN0aW9uKGUpe3JldHVybiBpLmNvdW50KGUpLnVLKHRoaXMpfSxpLkhjPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0PTAsbmV3IGkoZnVuY3Rpb24oKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZSlmb3IoOyEodCBpbiBlKTspe2lmKHQ+PWUubGVuZ3RoKXt0aGlzLlZrLmRvbmU9ITAsdGhpcy5Way52YWx1ZT12b2lkIDA7YnJlYWt9dCs9MX1lbHNlIHQ+PWUubGVuZ3RoJiYodGhpcy5Way5kb25lPSEwLHRoaXMuVmsudmFsdWU9dm9pZCAwKTtyZXR1cm4gdGhpcy5Way5kb25lfHwodGhpcy5Way52YWx1ZT1lW3RdLHQrPTEpLHRoaXMuVmt9KX0saS5wSz1mdW5jdGlvbihlLHQpe3ZhciByO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDImJih0PTEvMCksbmV3IGkoZnVuY3Rpb24oKXt2YXIgbixzO3JldHVybiByJiYocz1yKCkpLHImJiEwIT09cy5kb25lfHwodD4wPyh0LS0sbj1pLkhjKGUpLHM9KHI9bi5uZXh0LmJpbmQobikpKCkpOih0aGlzLlZrLmRvbmU9ITAscz10aGlzLlZrKSksc30pfSxpLmNvbmNhdD1mdW5jdGlvbihlKXtlPWkoZSk7dmFyIHQ7cmV0dXJuIG5ldyBpKGZ1bmN0aW9uKCl7dmFyIHIsbjtyZXR1cm4gdCYmKG49dCgpKSxuJiYhMCE9PW4uZG9uZT9uOihuPWUubmV4dCgpLCExPT09bi5kb25lPyhyPWkobi52YWx1ZSksKHQ9ci5uZXh0LmJpbmQocikpKCkpOm4pfSl9LGkuTWM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9aShlKS5tYXAoaSksbmV3IGkoMD09PWUubGVuZ3RoP1tdOmZ1bmN0aW9uKCl7dmFyIHQscixpPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiByPWUubmV4dCgpLCEwPT09ci5kb25lJiYodD0hMCksci52YWx1ZX0pO3JldHVybiB0Pyh0aGlzLlZrLmRvbmU9ITAsdGhpcy5Way52YWx1ZT12b2lkIDApOnRoaXMuVmsudmFsdWU9aSx0aGlzLlZrfSl9LGkuTGM9ZnVuY3Rpb24oKXtyZXR1cm4gaS5NYyhBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKX0saS5jaGFpbj1mdW5jdGlvbigpe3JldHVybiBpLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKX0saS5yYW5nZT1mdW5jdGlvbihlLHQscil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MyYmKHI9MSksYXJndW1lbnRzLmxlbmd0aDwyJiYodD1lLGU9MCksZT1lfHwwLHI9cnx8MSxuZXcgaShmdW5jdGlvbigpe2U+PXQmJih0aGlzLlZrLmRvbmU9ITAsdGhpcy5Way52YWx1ZT12b2lkIDApO3ZhciBpPWU7cmV0dXJuIGUrPXIsdGhpcy5Way52YWx1ZT1pLHRoaXMuVmt9KX0saS5jb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBpLnJhbmdlKGUsMS8wLHQpfSxpLnJlcGVhdD1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgaS5yYW5nZSh0KS5vSyhmdW5jdGlvbigpe3JldHVybiBlfSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDIwKSxzPW4uSGl2ZUNvbW0uT3B0aW9ucy5PcHRpb25zLG89bi5IaXZlQ29tbS5PcHRpb25zLm1wOyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5hdXRoVG9rZW5FbmFibGVkPSEwLHQuZGFzaFJlbW92ZUJpdHJhdGVTaXplPSExLHQuZGFzaEZpbHRlckJpdHJhdGVzPW51bGwsdC5zdGF0aWNQYXJ0bmVySWQ9bnVsbCx0LnN0YXRpY0N1c3RvbWVySWQ9bnVsbCx0LmF1ZGlvTWV0cmljcz0hMCx0LmxvZ0pzb25TbmFwc2hvdHM9dm9pZCAwLHR9cmV0dXJuIGkodCxlKSx0fShzKTtlLkFRPXQ7dmFyIHI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5oaXZlQXV0aFRva2VuRW5hYmxlZD1cImF1dGhUb2tlbkVuYWJsZWRcIix0LmhpdmVEYXNoUmVtb3ZlQml0cmF0ZVNpemU9XCJkYXNoUmVtb3ZlQml0cmF0ZVNpemVcIix0LmhpdmVEYXNoRmlsdGVyQml0cmF0ZXM9XCJkYXNoRmlsdGVyQml0cmF0ZXNcIix0LmhpdmVMb2dKc29uU25hcHNob3RzPVwibG9nSnNvblNuYXBzaG90c1wiLHQuaGl2ZVN0YXRpY1BhcnRuZXJJZD1cInN0YXRpY1BhcnRuZXJJZFwiLHQuaGl2ZVN0YXRpY0N1c3RvbWVySWQ9XCJzdGF0aWNDdXN0b21lcklkXCIsdC5oaXZlQXVkaW9NZXRyaWNzPVwiYXVkaW9NZXRyaWNzXCIsdH1yZXR1cm4gaSh0LGUpLHR9KG8pO2UuTlE9cn0oZS5PcHRpb25zfHwoZS5PcHRpb25zPXt9KSl9KHQuSGl2ZUNvbW18fCh0LkhpdmVDb21tPXt9KSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLkRRPWZ1bmN0aW9uKGUpe1wiZGFzaFJlbW92ZUJpdHJhdGVTaXplXCJpbiBlJiZlLmRhc2hSZW1vdmVCaXRyYXRlU2l6ZSYmd2luZG93LkhpdmVDb25maWcmJndpbmRvdy5IaXZlQ29uZmlnLkRhc2gmJih3aW5kb3cuSGl2ZUNvbmZpZy5EYXNoLkRhc2hSZW1vdmVCaXRyYXRlU2l6ZT1lLmRhc2hSZW1vdmVCaXRyYXRlU2l6ZSksXCJkYXNoRmlsdGVyQml0cmF0ZXNcImluIGUmJmUuZGFzaEZpbHRlckJpdHJhdGVzJiZ3aW5kb3cuSGl2ZUNvbmZpZyYmd2luZG93LkhpdmVDb25maWcuRGFzaCYmKHdpbmRvdy5IaXZlQ29uZmlnLkRhc2guRGFzaEZpbHRlckJpdHJhdGVzPWUuZGFzaEZpbHRlckJpdHJhdGVzKSxcInN0YXRpY0N1c3RvbWVySWRcImluIGUmJmUuc3RhdGljQ3VzdG9tZXJJZCYmd2luZG93LkhpdmVDb25maWcmJndpbmRvdy5IaXZlQ29uZmlnLkNsaWVudEluZm8mJih3aW5kb3cuSGl2ZUNvbmZpZy5DbGllbnRJbmZvLnV1PWUuc3RhdGljQ3VzdG9tZXJJZCksXCJzdGF0aWNQYXJ0bmVySWRcImluIGUmJmUuc3RhdGljUGFydG5lcklkJiZ3aW5kb3cuSGl2ZUNvbmZpZyYmd2luZG93LkhpdmVDb25maWcuQ2xpZW50SW5mbyYmKHdpbmRvdy5IaXZlQ29uZmlnLkNsaWVudEluZm8uY3U9ZS5zdGF0aWNQYXJ0bmVySWQpLFwiYXVkaW9NZXRyaWNzXCJpbiBlJiYhZS5hdWRpb01ldHJpY3MmJndpbmRvdy5IaXZlQ29uZmlnJiZ3aW5kb3cuSGl2ZUNvbmZpZy5TdGF0cyYmKHdpbmRvdy5IaXZlQ29uZmlnLlN0YXRzLkF1ZGlvQWNjb3VudGluZz1lLmF1ZGlvTWV0cmljcyksXCJkZXRlY3RQcml2YXRlSVBcImluIGUmJlwiYm9vbGVhblwiPT10eXBlb2YgZS5kZXRlY3RQcml2YXRlSVAmJndpbmRvdy5IaXZlQ29uZmlnJiZ3aW5kb3cuSGl2ZUNvbmZpZy5Db25uSW5mbyYmKHdpbmRvdy5IaXZlQ29uZmlnLkNvbm5JbmZvLmRldGVjdFByaXZhdGVJUD1lLmRldGVjdFByaXZhdGVJUCksXCJsb2dKc29uU25hcHNob3RzXCJpbiBlJiZlLmxvZ0pzb25TbmFwc2hvdHMmJndpbmRvdy5IaXZlQ29uZmlnJiZ3aW5kb3cuSGl2ZUNvbmZpZy5EZWJ1Z0xvZ3MmJih3aW5kb3cuSGl2ZUNvbmZpZy5EZWJ1Z0xvZ3MuTWV0cmljU25hcHNob3RMb2dzPTEsd2luZG93LkhpdmVDb25maWcuRGVidWdMb2dzLlRyYWNrU25hcHNob3RMb2dzPTEsd2luZG93LkhpdmVDb25maWcuRGVidWdMb2dzLlRyYWNrZXJMb2dzPTEpfSxlfSgpO3Qua1E9YX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiOyFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7ZVtlLkhpdmVKUz0wXT1cIkhpdmVKU1wiLGVbZS5IaXZlSmF2YT0xXT1cIkhpdmVKYXZhXCIsZVtlLlN0YXRzSlM9Ml09XCJTdGF0c0pTXCIsZVtlLkhpdmVKc1Byb3h5PTNdPVwiSGl2ZUpzUHJveHlcIn0oZS5UUXx8KGUuVFE9e30pKTshZnVuY3Rpb24oZSl7ZS5TdGF0c0pTPVwiU3RhdHNKU1wiLGUuSGl2ZUpzUHJveHk9XCJIaXZlSnNQcm94eVwiLGUuSGl2ZUphdmE9XCJIaXZlSmF2YVwiLGUuSGl2ZUpTPVwiSGl2ZUpTXCJ9KGUuVGVjaE5hbWV8fChlLlRlY2hOYW1lPXt9KSl9KHQuSGl2ZUNvbW18fCh0LkhpdmVDb21tPXt9KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgdD10aGlzO2lmKHRoaXMuZEs9bmV3IEFycmF5LHRoaXMuY2FsbGJhY2tzPW5ldyBBcnJheSxlLmZlKXRocm93IG5ldyBFcnJvcihcIkVycm9yOiBJbnN0YW50aWF0aW9uIGZhaWxlZDogVXNlIEtleUhhbmRsZXJIaXZlQ29tbS5nZXRJbnN0YW5jZSgpIGluc3RlYWQgb2YgbmV3LlwiKTt2YXIgcj17fTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLGZ1bmN0aW9uKGUpe3JbZS5rZXlDb2RlXT0hMCx0LmZLKHIpfSwhMCksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsZnVuY3Rpb24oZSl7cj17fX0sITApfXJldHVybiBlLnZlPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuZmUmJih0aGlzLmZlPW5ldyBlKSx0aGlzLmZlfSxlLnByb3RvdHlwZS55ZT1mdW5jdGlvbihlLHQpe3RoaXMuZEsucHVzaChlKSx0aGlzLmNhbGxiYWNrcy5wdXNoKHQpfSxlLnByb3RvdHlwZS5mSz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcyxyPTA7cjx0aGlzLmRLLmxlbmd0aDtyKyspIWZ1bmN0aW9uKHIpe3ZhciBpPSEwO3QuZEtbcl0uZm9yRWFjaChmdW5jdGlvbih0KXt2b2lkIDAhPWVbdF0mJmVbdF18fChpPSExKX0pLGkmJnQuY2FsbGJhY2tzW3JdKCl9KHIpfSxlfSgpO3QuVGU9aX0sZnVuY3Rpb24oZSx0KXtlLmk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNBJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmZpbGwmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuZ0t9fSxmdW5jdGlvbihlLHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5jcmVhdGU/ZS5pPWZ1bmN0aW9uKGUsdCl7ZS5FSz10LGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHA6ITEsQWg6ITAsbDohMH19KX06ZS5pPWZ1bmN0aW9uKGUsdCl7ZS5FSz10O3ZhciByPWZ1bmN0aW9uKCl7fTtyLnByb3RvdHlwZT10LnByb3RvdHlwZSxlLnByb3RvdHlwZT1uZXcgcixlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNDIpLG49cigyOSkscz1yKDIxKSxvPXIoMSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy52Sz1uLkwucHA/OTk4OTo5OTg4LHRoaXMueUs9LTEsdGhpcy5nTD1lLHRoaXMuVEsoKX1yZXR1cm4gZS5wcm90b3R5cGUuVEs9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZ0wub3B0aW9ucygpLnNpbGVudCYmKEhpdmVDb25maWcmJihIaXZlQ29uZmlnLkNvbm5JbmZvLmRldGVjdFByaXZhdGVJUD0hMCksdm9pZCAwPT09dGhpcy5tSyYmKHRoaXMudXJsPVwiLy9cIitpLmZwLmRPK1wiOlwiK3RoaXMudksrXCIvZmVlZGJhY2tcIix0aGlzLmdMLmxvZ2dlcigpLmluZm8oXCJzdGFydGluZyBwZXJpb2RpYyBhbGl2ZSBwaW5nIHRvIGhpdmUgdGVzdGVyIFtcIit0aGlzLnVybCtcIl1cIiksdGhpcy5tSz1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2UuSUsoKX0sbi5MLmhSKSkpfSxlLnByb3RvdHlwZS5JSz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLmdMLmdldEFjdGl2ZVNlc3Npb24oKSxyPXZvaWQgMDt0JiYocj1cIlNbXCIrdC5pZCtcIl1cIik7dmFyIGk9dGhpcy5nTC5nZXRDdXJyZW50VGltZSgpO2k+dGhpcy55Sz8odGhpcy5nTC5sb2dnZXIoKS5pbmZvKFwic2VuZGluZyBoaXZlIHRlc3RlciBwaW5nIFtcIitpK1wiID4gXCIrdGhpcy55SytcIl1cIikscy5icCh0aGlzLnVybCkudGhlbihmdW5jdGlvbihlKXt9LGZ1bmN0aW9uKHQpe28uRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJlcnJvciBzZW5kaW5nIGhpdmUgdGVzdGVyIHBpbmdcIixyLHtlcnJvcjp0fSksY2xlYXJJbnRlcnZhbChlLm1LKX0pKTp0aGlzLmdMLmxvZ2dlcigpLndhcm4oXCJub3Qgc2VuZGluZyBoaXZlIHRlc3RlciBwaW5nIFtcIitpK1wiIDw9IFwiK3RoaXMueUsrXCJdXCIpLHRoaXMueUs9aX0sZX0oKTt0LkxRPWF9LGZ1bmN0aW9uKGUsdCl7KGZ1bmN0aW9uKHQpe2UuaT10fSkuY2FsbCh0LHt9KX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNDApLG49cigxMTIpLHM9cig0NSksbz1yKDApLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbihlKXtlLmJpbmQobmV3IGkuWkEoby5GcmFtZXdvcmsuVi5JLG4uU0ssaS4kQS5zTykpLGUuYmluZChuZXcgaS5aQShvLkZyYW1ld29yay5WLlIscy5UTi55TikpfSxlfSgpO3QuV1E9YX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNjgpLG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5SSz1uZXcgaSx0aGlzLndLPW5ldyBpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/dGhpcy5iSz1nbG9iYWw6dGhpcy5iSz13aW5kb3d9cmV0dXJuIGUucHJvdG90eXBlLkM9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZS5wcm90b3R5cGUuQ0s9ZnVuY3Rpb24oZSx0LHIpe30sZS5wcm90b3R5cGUuQT1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUudGltZT1mdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX0sZS5wcm90b3R5cGUuc2V0VGltZW91dD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT10aGlzLmJLLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLlJLLmRlbGV0ZShpKSxlKCl9LHQpO3JldHVybiB0aGlzLlJLLmFkZChpKSxpfSxlLnByb3RvdHlwZS5jbGVhclRpbWVvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuUksuZGVsZXRlKGUpLHRoaXMuYksuY2xlYXJUaW1lb3V0KGUpLCEwfSxlLnByb3RvdHlwZS5zZXRJbnRlcnZhbD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuYksuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtlKCl9LHQpO3JldHVybiB0aGlzLndLLmFkZChyKSxyfSxlLnByb3RvdHlwZS5jbGVhckludGVydmFsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLndLLmRlbGV0ZShlKSx0aGlzLmJLLmNsZWFySW50ZXJ2YWwoZSksITB9LGUucHJvdG90eXBlLk89ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuUksuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5jbGVhclRpbWVvdXQodCl9KSx0aGlzLndLLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUuY2xlYXJJbnRlcnZhbCh0KX0pfSxlfSgpO3QuU0s9bn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNDApLG49cigwKSxzPXIoNDUpLG89cigxOSksYT1yKDgpLGg9cigyMiksYz1yKDc1KSx1PXIoNzYpLGw9cig3NykscD1yKDc5KSxkPXIoODApLGY9cig2KSxnPWYuaGUuSWg7aWYoZyl2YXIgRT1yKDgxKS5DSDtlbHNlIHZhciB2PXIoODMpLm54O3ZhciB5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24oZSl7ZS5iaW5kKG5ldyBpLlpBKGEucGMuaGMsby5scCxpLiRBLnNPKSksZS5iaW5kKG5ldyBpLlpBKGEucGMuRyx1LnFCLGkuJEEuc08pKSxlLmJpbmQobmV3IGkuWkEoYS5wYy5uYyxsLldCLGkuJEEuc08pKSxlLmJpbmQobmV3IGkuWkEoYS5wYy5NLHAudkgsaS4kQS5zTykpLGUuYmluZChuZXcgaS5aQShuLkZyYW1ld29yay5WLlIscy5UTi55TixpLiRBLnNPKSksZz9lLmJpbmQobmV3IGkuWkEoYS5wYy5zYyxFLGkuJEEuc08pKTplLmJpbmQobmV3IGkuWkEoYS5wYy5zYyx2LGkuJEEuc08pKSxlLmJpbmQobmV3IGkuWkEoYS5wYy5vYyxkLklILGkuJEEuc08pKSxlLmJpbmQobmV3IGkuWkEoYS5wYy5jYyxjLlN0YXRzLlpGLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoYS5wYy5pYyxjLlN0YXRzLnFsLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoYS5wYy51YyxoLkdsLkJkLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoYS5wYy5sYyxoLkdsLnFsLGkuJEEucE8pKX0sZX0oKTt0LnpRPXl9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1yKDMzKTtcInVuZGVmaW5lZFwiPT10eXBlb2YgaGl2ZSYmKGhpdmU9e30pLHZvaWQgMD09PWhpdmUuc25hcHNob3RzJiYoaGl2ZS5zbmFwc2hvdHM9e30pLGhpdmUuc25hcHNob3RzLlRyYWZmaWM9ZnVuY3Rpb24oZSl7dGhpcy5yZXFOPW51bGwsdGhpcy5yZXNwRmFsbGJhY2tOPW51bGwsdGhpcy5yZXNwRmFsbGJhY2tFcnJOPW51bGwsdGhpcy5yZXNwUDJwTj1udWxsLHRoaXMucmVxT3RoZXJOPW51bGwsdGhpcy5yZXNwRmFsbGJhY2tPdGhlck49bnVsbCx0aGlzLnJlc3BGYWxsYmFja090aGVydEVyck49bnVsbCx0aGlzLnNyY1JlcU49bnVsbCx0aGlzLnNyY1Jlc3BOPW51bGwsdGhpcy5zcmNSZXNwRXJyTj1udWxsLHRoaXMuc3JjUmVxUXQ9bnVsbCx0aGlzLnNyY1Jlc3BRdD1udWxsLHRoaXMuc3JjT3ZlclF0PW51bGwsdGhpcy5zcmNPdGhlclJlcU49bnVsbCx0aGlzLnNyY090aGVyUmVzcE49bnVsbCx0aGlzLnNyY090aGVyUmVzcEVyck49bnVsbCx0aGlzLnNyY090aGVyUmVxUXQ9bnVsbCx0aGlzLnNyY090aGVyUmVzcFF0PW51bGwsdGhpcy5zcmNPdGhlck92ZXJRdD1udWxsLHRoaXMucDJwU3ViUmVxTj1udWxsLHRoaXMucDJwU3ViUmVzcE49bnVsbCx0aGlzLnAycFN1YlJlc3BQYXJ0Tj1udWxsLHRoaXMucDJwU3ViUmVzcEVyck49bnVsbCx0aGlzLnAycFN1YlJlc3BFeHBOPW51bGwsdGhpcy5wMnBTdWJSZXFRdD1udWxsLHRoaXMucDJwU3ViUmVzcFF0PW51bGwsdGhpcy5wMnBEaXJlY3RRdD1udWxsLHRoaXMucDJwUmVsYXlRdD1udWxsLHRoaXMucDJwTmF0UXQ9bnVsbCx0aGlzLnAycFVkcGJRdD1udWxsLHRoaXMuZmFsbEFnZW50UmVzcE49bnVsbCx0aGlzLmZhbGxBZ2VudFByZWRIaXROPW51bGwsdGhpcy5mYWxsQWdlbnRGYWlsZWRSZXNwTj1udWxsLHRoaXMuZmFsbEFnZW50UHJlZE1pc3NOPW51bGwsdGhpcy5mYWxsQWdlbnRQcmVkUGFydGlhbEhpdE49bnVsbCx0aGlzLmZhbGxBZ2VuVHJhZmZpY1N1Y2Nlc3NRdD1udWxsLHRoaXMuZmFsbEFnZW5UcmFmZmljRmFpbHVyZVF0PW51bGwsdGhpcy5wMnBBZ2VudFByZWRIaXROPW51bGwsdGhpcy5wMnBBZ2VudFByZWRNaXNzTj1udWxsLHRoaXMucDJwQWdlbnRQcmVkUGFydGlhbEhpdE49bnVsbCx0aGlzLnAycEFnZW5UcmFmZmljU3VjY2Vzc1F0PW51bGwsdGhpcy5wMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdD1udWxsLHRoaXMucmVzcFAycE90aGVyTj1udWxsLHRoaXMubENhY2hlUmVzcE49bnVsbCx0aGlzLmxDYWNoZVJlc3BRdD1udWxsLHRoaXMucDJwT3V0U2l0ZUxvd1ByaW89bnVsbCxlJiYodm9pZCAwIT09ZS5yZXFOJiZudWxsIT09ZS5yZXFOJiYodGhpcy5yZXFOPWUucmVxTiksdm9pZCAwIT09ZS5yZXNwRmFsbGJhY2tOJiZudWxsIT09ZS5yZXNwRmFsbGJhY2tOJiYodGhpcy5yZXNwRmFsbGJhY2tOPWUucmVzcEZhbGxiYWNrTiksdm9pZCAwIT09ZS5yZXNwRmFsbGJhY2tFcnJOJiZudWxsIT09ZS5yZXNwRmFsbGJhY2tFcnJOJiYodGhpcy5yZXNwRmFsbGJhY2tFcnJOPWUucmVzcEZhbGxiYWNrRXJyTiksdm9pZCAwIT09ZS5yZXNwUDJwTiYmbnVsbCE9PWUucmVzcFAycE4mJih0aGlzLnJlc3BQMnBOPWUucmVzcFAycE4pLHZvaWQgMCE9PWUucmVxT3RoZXJOJiZudWxsIT09ZS5yZXFPdGhlck4mJih0aGlzLnJlcU90aGVyTj1lLnJlcU90aGVyTiksdm9pZCAwIT09ZS5yZXNwRmFsbGJhY2tPdGhlck4mJm51bGwhPT1lLnJlc3BGYWxsYmFja090aGVyTiYmKHRoaXMucmVzcEZhbGxiYWNrT3RoZXJOPWUucmVzcEZhbGxiYWNrT3RoZXJOKSx2b2lkIDAhPT1lLnJlc3BGYWxsYmFja090aGVydEVyck4mJm51bGwhPT1lLnJlc3BGYWxsYmFja090aGVydEVyck4mJih0aGlzLnJlc3BGYWxsYmFja090aGVydEVyck49ZS5yZXNwRmFsbGJhY2tPdGhlcnRFcnJOKSx2b2lkIDAhPT1lLnNyY1JlcU4mJm51bGwhPT1lLnNyY1JlcU4mJih0aGlzLnNyY1JlcU49ZS5zcmNSZXFOKSx2b2lkIDAhPT1lLnNyY1Jlc3BOJiZudWxsIT09ZS5zcmNSZXNwTiYmKHRoaXMuc3JjUmVzcE49ZS5zcmNSZXNwTiksdm9pZCAwIT09ZS5zcmNSZXNwRXJyTiYmbnVsbCE9PWUuc3JjUmVzcEVyck4mJih0aGlzLnNyY1Jlc3BFcnJOPWUuc3JjUmVzcEVyck4pLHZvaWQgMCE9PWUuc3JjUmVxUXQmJm51bGwhPT1lLnNyY1JlcVF0JiYodGhpcy5zcmNSZXFRdD1lLnNyY1JlcVF0KSx2b2lkIDAhPT1lLnNyY1Jlc3BRdCYmbnVsbCE9PWUuc3JjUmVzcFF0JiYodGhpcy5zcmNSZXNwUXQ9ZS5zcmNSZXNwUXQpLHZvaWQgMCE9PWUuc3JjT3ZlclF0JiZudWxsIT09ZS5zcmNPdmVyUXQmJih0aGlzLnNyY092ZXJRdD1lLnNyY092ZXJRdCksdm9pZCAwIT09ZS5zcmNPdGhlclJlcU4mJm51bGwhPT1lLnNyY090aGVyUmVxTiYmKHRoaXMuc3JjT3RoZXJSZXFOPWUuc3JjT3RoZXJSZXFOKSx2b2lkIDAhPT1lLnNyY090aGVyUmVzcE4mJm51bGwhPT1lLnNyY090aGVyUmVzcE4mJih0aGlzLnNyY090aGVyUmVzcE49ZS5zcmNPdGhlclJlc3BOKSx2b2lkIDAhPT1lLnNyY090aGVyUmVzcEVyck4mJm51bGwhPT1lLnNyY090aGVyUmVzcEVyck4mJih0aGlzLnNyY090aGVyUmVzcEVyck49ZS5zcmNPdGhlclJlc3BFcnJOKSx2b2lkIDAhPT1lLnNyY090aGVyUmVxUXQmJm51bGwhPT1lLnNyY090aGVyUmVxUXQmJih0aGlzLnNyY090aGVyUmVxUXQ9ZS5zcmNPdGhlclJlcVF0KSx2b2lkIDAhPT1lLnNyY090aGVyUmVzcFF0JiZudWxsIT09ZS5zcmNPdGhlclJlc3BRdCYmKHRoaXMuc3JjT3RoZXJSZXNwUXQ9ZS5zcmNPdGhlclJlc3BRdCksdm9pZCAwIT09ZS5zcmNPdGhlck92ZXJRdCYmbnVsbCE9PWUuc3JjT3RoZXJPdmVyUXQmJih0aGlzLnNyY090aGVyT3ZlclF0PWUuc3JjT3RoZXJPdmVyUXQpLHZvaWQgMCE9PWUucDJwU3ViUmVxTiYmbnVsbCE9PWUucDJwU3ViUmVxTiYmKHRoaXMucDJwU3ViUmVxTj1lLnAycFN1YlJlcU4pLHZvaWQgMCE9PWUucDJwU3ViUmVzcE4mJm51bGwhPT1lLnAycFN1YlJlc3BOJiYodGhpcy5wMnBTdWJSZXNwTj1lLnAycFN1YlJlc3BOKSx2b2lkIDAhPT1lLnAycFN1YlJlc3BQYXJ0TiYmbnVsbCE9PWUucDJwU3ViUmVzcFBhcnROJiYodGhpcy5wMnBTdWJSZXNwUGFydE49ZS5wMnBTdWJSZXNwUGFydE4pLHZvaWQgMCE9PWUucDJwU3ViUmVzcEVyck4mJm51bGwhPT1lLnAycFN1YlJlc3BFcnJOJiYodGhpcy5wMnBTdWJSZXNwRXJyTj1lLnAycFN1YlJlc3BFcnJOKSx2b2lkIDAhPT1lLnAycFN1YlJlc3BFeHBOJiZudWxsIT09ZS5wMnBTdWJSZXNwRXhwTiYmKHRoaXMucDJwU3ViUmVzcEV4cE49ZS5wMnBTdWJSZXNwRXhwTiksdm9pZCAwIT09ZS5wMnBTdWJSZXFRdCYmbnVsbCE9PWUucDJwU3ViUmVxUXQmJih0aGlzLnAycFN1YlJlcVF0PWUucDJwU3ViUmVxUXQpLHZvaWQgMCE9PWUucDJwU3ViUmVzcFF0JiZudWxsIT09ZS5wMnBTdWJSZXNwUXQmJih0aGlzLnAycFN1YlJlc3BRdD1lLnAycFN1YlJlc3BRdCksdm9pZCAwIT09ZS5wMnBEaXJlY3RRdCYmbnVsbCE9PWUucDJwRGlyZWN0UXQmJih0aGlzLnAycERpcmVjdFF0PWUucDJwRGlyZWN0UXQpLHZvaWQgMCE9PWUucDJwUmVsYXlRdCYmbnVsbCE9PWUucDJwUmVsYXlRdCYmKHRoaXMucDJwUmVsYXlRdD1lLnAycFJlbGF5UXQpLHZvaWQgMCE9PWUucDJwTmF0UXQmJm51bGwhPT1lLnAycE5hdFF0JiYodGhpcy5wMnBOYXRRdD1lLnAycE5hdFF0KSx2b2lkIDAhPT1lLnAycFVkcGJRdCYmbnVsbCE9PWUucDJwVWRwYlF0JiYodGhpcy5wMnBVZHBiUXQ9ZS5wMnBVZHBiUXQpLHZvaWQgMCE9PWUuZmFsbEFnZW50UmVzcE4mJm51bGwhPT1lLmZhbGxBZ2VudFJlc3BOJiYodGhpcy5mYWxsQWdlbnRSZXNwTj1lLmZhbGxBZ2VudFJlc3BOKSx2b2lkIDAhPT1lLmZhbGxBZ2VudFByZWRIaXROJiZudWxsIT09ZS5mYWxsQWdlbnRQcmVkSGl0TiYmKHRoaXMuZmFsbEFnZW50UHJlZEhpdE49ZS5mYWxsQWdlbnRQcmVkSGl0Tiksdm9pZCAwIT09ZS5mYWxsQWdlbnRGYWlsZWRSZXNwTiYmbnVsbCE9PWUuZmFsbEFnZW50RmFpbGVkUmVzcE4mJih0aGlzLmZhbGxBZ2VudEZhaWxlZFJlc3BOPWUuZmFsbEFnZW50RmFpbGVkUmVzcE4pLHZvaWQgMCE9PWUuZmFsbEFnZW50UHJlZE1pc3NOJiZudWxsIT09ZS5mYWxsQWdlbnRQcmVkTWlzc04mJih0aGlzLmZhbGxBZ2VudFByZWRNaXNzTj1lLmZhbGxBZ2VudFByZWRNaXNzTiksdm9pZCAwIT09ZS5mYWxsQWdlbnRQcmVkUGFydGlhbEhpdE4mJm51bGwhPT1lLmZhbGxBZ2VudFByZWRQYXJ0aWFsSGl0TiYmKHRoaXMuZmFsbEFnZW50UHJlZFBhcnRpYWxIaXROPWUuZmFsbEFnZW50UHJlZFBhcnRpYWxIaXROKSx2b2lkIDAhPT1lLmZhbGxBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCYmbnVsbCE9PWUuZmFsbEFnZW5UcmFmZmljU3VjY2Vzc1F0JiYodGhpcy5mYWxsQWdlblRyYWZmaWNTdWNjZXNzUXQ9ZS5mYWxsQWdlblRyYWZmaWNTdWNjZXNzUXQpLHZvaWQgMCE9PWUuZmFsbEFnZW5UcmFmZmljRmFpbHVyZVF0JiZudWxsIT09ZS5mYWxsQWdlblRyYWZmaWNGYWlsdXJlUXQmJih0aGlzLmZhbGxBZ2VuVHJhZmZpY0ZhaWx1cmVRdD1lLmZhbGxBZ2VuVHJhZmZpY0ZhaWx1cmVRdCksdm9pZCAwIT09ZS5wMnBBZ2VudFByZWRIaXROJiZudWxsIT09ZS5wMnBBZ2VudFByZWRIaXROJiYodGhpcy5wMnBBZ2VudFByZWRIaXROPWUucDJwQWdlbnRQcmVkSGl0Tiksdm9pZCAwIT09ZS5wMnBBZ2VudFByZWRNaXNzTiYmbnVsbCE9PWUucDJwQWdlbnRQcmVkTWlzc04mJih0aGlzLnAycEFnZW50UHJlZE1pc3NOPWUucDJwQWdlbnRQcmVkTWlzc04pLHZvaWQgMCE9PWUucDJwQWdlbnRQcmVkUGFydGlhbEhpdE4mJm51bGwhPT1lLnAycEFnZW50UHJlZFBhcnRpYWxIaXROJiYodGhpcy5wMnBBZ2VudFByZWRQYXJ0aWFsSGl0Tj1lLnAycEFnZW50UHJlZFBhcnRpYWxIaXROKSx2b2lkIDAhPT1lLnAycEFnZW5UcmFmZmljU3VjY2Vzc1F0JiZudWxsIT09ZS5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCYmKHRoaXMucDJwQWdlblRyYWZmaWNTdWNjZXNzUXQ9ZS5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCksdm9pZCAwIT09ZS5wMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdCYmbnVsbCE9PWUucDJwQWdlblRyYWZmaWNGYWlsdXJlUXQmJih0aGlzLnAycEFnZW5UcmFmZmljRmFpbHVyZVF0PWUucDJwQWdlblRyYWZmaWNGYWlsdXJlUXQpLHZvaWQgMCE9PWUucmVzcFAycE90aGVyTiYmbnVsbCE9PWUucmVzcFAycE90aGVyTiYmKHRoaXMucmVzcFAycE90aGVyTj1lLnJlc3BQMnBPdGhlck4pLHZvaWQgMCE9PWUubENhY2hlUmVzcE4mJm51bGwhPT1lLmxDYWNoZVJlc3BOJiYodGhpcy5sQ2FjaGVSZXNwTj1lLmxDYWNoZVJlc3BOKSx2b2lkIDAhPT1lLmxDYWNoZVJlc3BRdCYmbnVsbCE9PWUubENhY2hlUmVzcFF0JiYodGhpcy5sQ2FjaGVSZXNwUXQ9ZS5sQ2FjaGVSZXNwUXQpLHZvaWQgMCE9PWUucDJwT3V0U2l0ZUxvd1ByaW8mJm51bGwhPT1lLnAycE91dFNpdGVMb3dQcmlvJiYodGhpcy5wMnBPdXRTaXRlTG93UHJpbz1lLnAycE91dFNpdGVMb3dQcmlvKSl9LGhpdmUuc25hcHNob3RzLlRyYWZmaWMucHJvdG90eXBlPXt9LGhpdmUuc25hcHNob3RzLlRyYWZmaWMucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLkkzMj90aGlzLnJlcU49ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyOnI9PWkuVHlwZS5ET1VCTEU/dGhpcy5yZXNwRmFsbGJhY2tOPWUuRV8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMzpyPT1pLlR5cGUuSTMyP3RoaXMucmVzcEZhbGxiYWNrRXJyTj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDQ6cj09aS5UeXBlLkRPVUJMRT90aGlzLnJlc3BQMnBOPWUuRV8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgNTpyPT1pLlR5cGUuSTMyP3RoaXMucmVxT3RoZXJOPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgNjpyPT1pLlR5cGUuSTMyP3RoaXMucmVzcEZhbGxiYWNrT3RoZXJOPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgNzpyPT1pLlR5cGUuSTMyP3RoaXMucmVzcEZhbGxiYWNrT3RoZXJ0RXJyTj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDg6cj09aS5UeXBlLkkzMj90aGlzLnNyY1JlcU49ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA5OnI9PWkuVHlwZS5JMzI/dGhpcy5zcmNSZXNwTj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDEwOnI9PWkuVHlwZS5JMzI/dGhpcy5zcmNSZXNwRXJyTj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDExOnI9PWkuVHlwZS5JNjQ/dGhpcy5zcmNSZXFRdD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDEyOnI9PWkuVHlwZS5JNjQ/dGhpcy5zcmNSZXNwUXQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAxMzpyPT1pLlR5cGUuSTY0P3RoaXMuc3JjT3ZlclF0PWUuZ18oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMTQ6cj09aS5UeXBlLkkzMj90aGlzLnNyY090aGVyUmVxTj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDE1OnI9PWkuVHlwZS5JMzI/dGhpcy5zcmNPdGhlclJlc3BOPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMTY6cj09aS5UeXBlLkkzMj90aGlzLnNyY090aGVyUmVzcEVyck49ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAxNzpyPT1pLlR5cGUuSTY0P3RoaXMuc3JjT3RoZXJSZXFRdD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDE4OnI9PWkuVHlwZS5JNjQ/dGhpcy5zcmNPdGhlclJlc3BRdD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDE5OnI9PWkuVHlwZS5JNjQ/dGhpcy5zcmNPdGhlck92ZXJRdD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDIwOnI9PWkuVHlwZS5JMzI/dGhpcy5wMnBTdWJSZXFOPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjE6cj09aS5UeXBlLkkzMj90aGlzLnAycFN1YlJlc3BOPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjI6cj09aS5UeXBlLkRPVUJMRT90aGlzLnAycFN1YlJlc3BQYXJ0Tj1lLkVfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDIzOnI9PWkuVHlwZS5ET1VCTEU/dGhpcy5wMnBTdWJSZXNwRXJyTj1lLkVfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI0OnI9PWkuVHlwZS5JMzI/dGhpcy5wMnBTdWJSZXNwRXhwTj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI1OnI9PWkuVHlwZS5JNjQ/dGhpcy5wMnBTdWJSZXFRdD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI2OnI9PWkuVHlwZS5JNjQ/dGhpcy5wMnBTdWJSZXNwUXQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyNzpyPT1pLlR5cGUuSTY0P3RoaXMucDJwRGlyZWN0UXQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyODpyPT1pLlR5cGUuSTY0P3RoaXMucDJwUmVsYXlRdD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI5OnI9PWkuVHlwZS5JNjQ/dGhpcy5wMnBOYXRRdD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDMwOnI9PWkuVHlwZS5JNjQ/dGhpcy5wMnBVZHBiUXQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzMTpyPT1pLlR5cGUuSTMyP3RoaXMuZmFsbEFnZW50UmVzcE49ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzMjpyPT1pLlR5cGUuSTMyP3RoaXMuZmFsbEFnZW50UHJlZEhpdE49ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzMzpyPT1pLlR5cGUuSTMyP3RoaXMuZmFsbEFnZW50RmFpbGVkUmVzcE49ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzNDpyPT1pLlR5cGUuSTMyP3RoaXMuZmFsbEFnZW50UHJlZE1pc3NOPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMzU6cj09aS5UeXBlLkkzMj90aGlzLmZhbGxBZ2VudFByZWRQYXJ0aWFsSGl0Tj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM2OnI9PWkuVHlwZS5JNjQ/dGhpcy5mYWxsQWdlblRyYWZmaWNTdWNjZXNzUXQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzNzpyPT1pLlR5cGUuSTY0P3RoaXMuZmFsbEFnZW5UcmFmZmljRmFpbHVyZVF0PWUuZ18oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMzg6cj09aS5UeXBlLkkzMj90aGlzLnAycEFnZW50UHJlZEhpdE49ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzOTpyPT1pLlR5cGUuSTMyP3RoaXMucDJwQWdlbnRQcmVkTWlzc049ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA0MDpyPT1pLlR5cGUuSTMyP3RoaXMucDJwQWdlbnRQcmVkUGFydGlhbEhpdE49ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA0MTpyPT1pLlR5cGUuSTY0P3RoaXMucDJwQWdlblRyYWZmaWNTdWNjZXNzUXQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA0MjpyPT1pLlR5cGUuSTY0P3RoaXMucDJwQWdlblRyYWZmaWNGYWlsdXJlUXQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA0MzpyPT1pLlR5cGUuSTMyP3RoaXMucmVzcFAycE90aGVyTj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDQ0OnI9PWkuVHlwZS5JMzI/dGhpcy5sQ2FjaGVSZXNwTj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDQ1OnI9PWkuVHlwZS5JNjQ/dGhpcy5sQ2FjaGVSZXNwUXQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA0NjpyPT1pLlR5cGUuSTY0P3RoaXMucDJwT3V0U2l0ZUxvd1ByaW89ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LGhpdmUuc25hcHNob3RzLlRyYWZmaWMucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJUcmFmZmljXCIpLG51bGwhPT10aGlzLnJlcU4mJnZvaWQgMCE9PXRoaXMucmVxTiYmKGUueGIoXCJyZXFOXCIsaS5UeXBlLkkzMiwxKSxlLlZiKHRoaXMucmVxTiksZS5HYigpKSxudWxsIT09dGhpcy5yZXNwRmFsbGJhY2tOJiZ2b2lkIDAhPT10aGlzLnJlc3BGYWxsYmFja04mJihlLnhiKFwicmVzcEZhbGxiYWNrTlwiLGkuVHlwZS5ET1VCTEUsMiksZS5ZQyh0aGlzLnJlc3BGYWxsYmFja04pLGUuR2IoKSksbnVsbCE9PXRoaXMucmVzcEZhbGxiYWNrRXJyTiYmdm9pZCAwIT09dGhpcy5yZXNwRmFsbGJhY2tFcnJOJiYoZS54YihcInJlc3BGYWxsYmFja0Vyck5cIixpLlR5cGUuSTMyLDMpLGUuVmIodGhpcy5yZXNwRmFsbGJhY2tFcnJOKSxlLkdiKCkpLG51bGwhPT10aGlzLnJlc3BQMnBOJiZ2b2lkIDAhPT10aGlzLnJlc3BQMnBOJiYoZS54YihcInJlc3BQMnBOXCIsaS5UeXBlLkRPVUJMRSw0KSxlLllDKHRoaXMucmVzcFAycE4pLGUuR2IoKSksbnVsbCE9PXRoaXMucmVxT3RoZXJOJiZ2b2lkIDAhPT10aGlzLnJlcU90aGVyTiYmKGUueGIoXCJyZXFPdGhlck5cIixpLlR5cGUuSTMyLDUpLGUuVmIodGhpcy5yZXFPdGhlck4pLGUuR2IoKSksbnVsbCE9PXRoaXMucmVzcEZhbGxiYWNrT3RoZXJOJiZ2b2lkIDAhPT10aGlzLnJlc3BGYWxsYmFja090aGVyTiYmKGUueGIoXCJyZXNwRmFsbGJhY2tPdGhlck5cIixpLlR5cGUuSTMyLDYpLGUuVmIodGhpcy5yZXNwRmFsbGJhY2tPdGhlck4pLGUuR2IoKSksbnVsbCE9PXRoaXMucmVzcEZhbGxiYWNrT3RoZXJ0RXJyTiYmdm9pZCAwIT09dGhpcy5yZXNwRmFsbGJhY2tPdGhlcnRFcnJOJiYoZS54YihcInJlc3BGYWxsYmFja090aGVydEVyck5cIixpLlR5cGUuSTMyLDcpLGUuVmIodGhpcy5yZXNwRmFsbGJhY2tPdGhlcnRFcnJOKSxlLkdiKCkpLG51bGwhPT10aGlzLnNyY1JlcU4mJnZvaWQgMCE9PXRoaXMuc3JjUmVxTiYmKGUueGIoXCJzcmNSZXFOXCIsaS5UeXBlLkkzMiw4KSxlLlZiKHRoaXMuc3JjUmVxTiksZS5HYigpKSxudWxsIT09dGhpcy5zcmNSZXNwTiYmdm9pZCAwIT09dGhpcy5zcmNSZXNwTiYmKGUueGIoXCJzcmNSZXNwTlwiLGkuVHlwZS5JMzIsOSksZS5WYih0aGlzLnNyY1Jlc3BOKSxlLkdiKCkpLG51bGwhPT10aGlzLnNyY1Jlc3BFcnJOJiZ2b2lkIDAhPT10aGlzLnNyY1Jlc3BFcnJOJiYoZS54YihcInNyY1Jlc3BFcnJOXCIsaS5UeXBlLkkzMiwxMCksZS5WYih0aGlzLnNyY1Jlc3BFcnJOKSxlLkdiKCkpLG51bGwhPT10aGlzLnNyY1JlcVF0JiZ2b2lkIDAhPT10aGlzLnNyY1JlcVF0JiYoZS54YihcInNyY1JlcVF0XCIsaS5UeXBlLkk2NCwxMSksZS5LQyh0aGlzLnNyY1JlcVF0KSxlLkdiKCkpLG51bGwhPT10aGlzLnNyY1Jlc3BRdCYmdm9pZCAwIT09dGhpcy5zcmNSZXNwUXQmJihlLnhiKFwic3JjUmVzcFF0XCIsaS5UeXBlLkk2NCwxMiksZS5LQyh0aGlzLnNyY1Jlc3BRdCksZS5HYigpKSxudWxsIT09dGhpcy5zcmNPdmVyUXQmJnZvaWQgMCE9PXRoaXMuc3JjT3ZlclF0JiYoZS54YihcInNyY092ZXJRdFwiLGkuVHlwZS5JNjQsMTMpLGUuS0ModGhpcy5zcmNPdmVyUXQpLGUuR2IoKSksbnVsbCE9PXRoaXMuc3JjT3RoZXJSZXFOJiZ2b2lkIDAhPT10aGlzLnNyY090aGVyUmVxTiYmKGUueGIoXCJzcmNPdGhlclJlcU5cIixpLlR5cGUuSTMyLDE0KSxlLlZiKHRoaXMuc3JjT3RoZXJSZXFOKSxlLkdiKCkpLG51bGwhPT10aGlzLnNyY090aGVyUmVzcE4mJnZvaWQgMCE9PXRoaXMuc3JjT3RoZXJSZXNwTiYmKGUueGIoXCJzcmNPdGhlclJlc3BOXCIsaS5UeXBlLkkzMiwxNSksZS5WYih0aGlzLnNyY090aGVyUmVzcE4pLGUuR2IoKSksbnVsbCE9PXRoaXMuc3JjT3RoZXJSZXNwRXJyTiYmdm9pZCAwIT09dGhpcy5zcmNPdGhlclJlc3BFcnJOJiYoZS54YihcInNyY090aGVyUmVzcEVyck5cIixpLlR5cGUuSTMyLDE2KSxlLlZiKHRoaXMuc3JjT3RoZXJSZXNwRXJyTiksZS5HYigpKSxudWxsIT09dGhpcy5zcmNPdGhlclJlcVF0JiZ2b2lkIDAhPT10aGlzLnNyY090aGVyUmVxUXQmJihlLnhiKFwic3JjT3RoZXJSZXFRdFwiLGkuVHlwZS5JNjQsMTcpLGUuS0ModGhpcy5zcmNPdGhlclJlcVF0KSxlLkdiKCkpLG51bGwhPT10aGlzLnNyY090aGVyUmVzcFF0JiZ2b2lkIDAhPT10aGlzLnNyY090aGVyUmVzcFF0JiYoZS54YihcInNyY090aGVyUmVzcFF0XCIsaS5UeXBlLkk2NCwxOCksZS5LQyh0aGlzLnNyY090aGVyUmVzcFF0KSxlLkdiKCkpLG51bGwhPT10aGlzLnNyY090aGVyT3ZlclF0JiZ2b2lkIDAhPT10aGlzLnNyY090aGVyT3ZlclF0JiYoZS54YihcInNyY090aGVyT3ZlclF0XCIsaS5UeXBlLkk2NCwxOSksZS5LQyh0aGlzLnNyY090aGVyT3ZlclF0KSxlLkdiKCkpLG51bGwhPT10aGlzLnAycFN1YlJlcU4mJnZvaWQgMCE9PXRoaXMucDJwU3ViUmVxTiYmKGUueGIoXCJwMnBTdWJSZXFOXCIsaS5UeXBlLkkzMiwyMCksZS5WYih0aGlzLnAycFN1YlJlcU4pLGUuR2IoKSksbnVsbCE9PXRoaXMucDJwU3ViUmVzcE4mJnZvaWQgMCE9PXRoaXMucDJwU3ViUmVzcE4mJihlLnhiKFwicDJwU3ViUmVzcE5cIixpLlR5cGUuSTMyLDIxKSxlLlZiKHRoaXMucDJwU3ViUmVzcE4pLGUuR2IoKSksbnVsbCE9PXRoaXMucDJwU3ViUmVzcFBhcnROJiZ2b2lkIDAhPT10aGlzLnAycFN1YlJlc3BQYXJ0TiYmKGUueGIoXCJwMnBTdWJSZXNwUGFydE5cIixpLlR5cGUuRE9VQkxFLDIyKSxlLllDKHRoaXMucDJwU3ViUmVzcFBhcnROKSxlLkdiKCkpLG51bGwhPT10aGlzLnAycFN1YlJlc3BFcnJOJiZ2b2lkIDAhPT10aGlzLnAycFN1YlJlc3BFcnJOJiYoZS54YihcInAycFN1YlJlc3BFcnJOXCIsaS5UeXBlLkRPVUJMRSwyMyksZS5ZQyh0aGlzLnAycFN1YlJlc3BFcnJOKSxlLkdiKCkpLG51bGwhPT10aGlzLnAycFN1YlJlc3BFeHBOJiZ2b2lkIDAhPT10aGlzLnAycFN1YlJlc3BFeHBOJiYoZS54YihcInAycFN1YlJlc3BFeHBOXCIsaS5UeXBlLkkzMiwyNCksZS5WYih0aGlzLnAycFN1YlJlc3BFeHBOKSxlLkdiKCkpLG51bGwhPT10aGlzLnAycFN1YlJlcVF0JiZ2b2lkIDAhPT10aGlzLnAycFN1YlJlcVF0JiYoZS54YihcInAycFN1YlJlcVF0XCIsaS5UeXBlLkk2NCwyNSksZS5LQyh0aGlzLnAycFN1YlJlcVF0KSxlLkdiKCkpLG51bGwhPT10aGlzLnAycFN1YlJlc3BRdCYmdm9pZCAwIT09dGhpcy5wMnBTdWJSZXNwUXQmJihlLnhiKFwicDJwU3ViUmVzcFF0XCIsaS5UeXBlLkk2NCwyNiksZS5LQyh0aGlzLnAycFN1YlJlc3BRdCksZS5HYigpKSxudWxsIT09dGhpcy5wMnBEaXJlY3RRdCYmdm9pZCAwIT09dGhpcy5wMnBEaXJlY3RRdCYmKGUueGIoXCJwMnBEaXJlY3RRdFwiLGkuVHlwZS5JNjQsMjcpLGUuS0ModGhpcy5wMnBEaXJlY3RRdCksZS5HYigpKSxudWxsIT09dGhpcy5wMnBSZWxheVF0JiZ2b2lkIDAhPT10aGlzLnAycFJlbGF5UXQmJihlLnhiKFwicDJwUmVsYXlRdFwiLGkuVHlwZS5JNjQsMjgpLGUuS0ModGhpcy5wMnBSZWxheVF0KSxlLkdiKCkpLG51bGwhPT10aGlzLnAycE5hdFF0JiZ2b2lkIDAhPT10aGlzLnAycE5hdFF0JiYoZS54YihcInAycE5hdFF0XCIsaS5UeXBlLkk2NCwyOSksZS5LQyh0aGlzLnAycE5hdFF0KSxlLkdiKCkpLG51bGwhPT10aGlzLnAycFVkcGJRdCYmdm9pZCAwIT09dGhpcy5wMnBVZHBiUXQmJihlLnhiKFwicDJwVWRwYlF0XCIsaS5UeXBlLkk2NCwzMCksZS5LQyh0aGlzLnAycFVkcGJRdCksZS5HYigpKSxudWxsIT09dGhpcy5mYWxsQWdlbnRSZXNwTiYmdm9pZCAwIT09dGhpcy5mYWxsQWdlbnRSZXNwTiYmKGUueGIoXCJmYWxsQWdlbnRSZXNwTlwiLGkuVHlwZS5JMzIsMzEpLGUuVmIodGhpcy5mYWxsQWdlbnRSZXNwTiksZS5HYigpKSxudWxsIT09dGhpcy5mYWxsQWdlbnRQcmVkSGl0TiYmdm9pZCAwIT09dGhpcy5mYWxsQWdlbnRQcmVkSGl0TiYmKGUueGIoXCJmYWxsQWdlbnRQcmVkSGl0TlwiLGkuVHlwZS5JMzIsMzIpLGUuVmIodGhpcy5mYWxsQWdlbnRQcmVkSGl0TiksZS5HYigpKSxudWxsIT09dGhpcy5mYWxsQWdlbnRGYWlsZWRSZXNwTiYmdm9pZCAwIT09dGhpcy5mYWxsQWdlbnRGYWlsZWRSZXNwTiYmKGUueGIoXCJmYWxsQWdlbnRGYWlsZWRSZXNwTlwiLGkuVHlwZS5JMzIsMzMpLGUuVmIodGhpcy5mYWxsQWdlbnRGYWlsZWRSZXNwTiksZS5HYigpKSxudWxsIT09dGhpcy5mYWxsQWdlbnRQcmVkTWlzc04mJnZvaWQgMCE9PXRoaXMuZmFsbEFnZW50UHJlZE1pc3NOJiYoZS54YihcImZhbGxBZ2VudFByZWRNaXNzTlwiLGkuVHlwZS5JMzIsMzQpLGUuVmIodGhpcy5mYWxsQWdlbnRQcmVkTWlzc04pLGUuR2IoKSksbnVsbCE9PXRoaXMuZmFsbEFnZW50UHJlZFBhcnRpYWxIaXROJiZ2b2lkIDAhPT10aGlzLmZhbGxBZ2VudFByZWRQYXJ0aWFsSGl0TiYmKGUueGIoXCJmYWxsQWdlbnRQcmVkUGFydGlhbEhpdE5cIixpLlR5cGUuSTMyLDM1KSxlLlZiKHRoaXMuZmFsbEFnZW50UHJlZFBhcnRpYWxIaXROKSxlLkdiKCkpLG51bGwhPT10aGlzLmZhbGxBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCYmdm9pZCAwIT09dGhpcy5mYWxsQWdlblRyYWZmaWNTdWNjZXNzUXQmJihlLnhiKFwiZmFsbEFnZW5UcmFmZmljU3VjY2Vzc1F0XCIsaS5UeXBlLkk2NCwzNiksZS5LQyh0aGlzLmZhbGxBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCksZS5HYigpKSxudWxsIT09dGhpcy5mYWxsQWdlblRyYWZmaWNGYWlsdXJlUXQmJnZvaWQgMCE9PXRoaXMuZmFsbEFnZW5UcmFmZmljRmFpbHVyZVF0JiYoZS54YihcImZhbGxBZ2VuVHJhZmZpY0ZhaWx1cmVRdFwiLGkuVHlwZS5JNjQsMzcpLGUuS0ModGhpcy5mYWxsQWdlblRyYWZmaWNGYWlsdXJlUXQpLGUuR2IoKSksbnVsbCE9PXRoaXMucDJwQWdlbnRQcmVkSGl0TiYmdm9pZCAwIT09dGhpcy5wMnBBZ2VudFByZWRIaXROJiYoZS54YihcInAycEFnZW50UHJlZEhpdE5cIixpLlR5cGUuSTMyLDM4KSxlLlZiKHRoaXMucDJwQWdlbnRQcmVkSGl0TiksZS5HYigpKSxudWxsIT09dGhpcy5wMnBBZ2VudFByZWRNaXNzTiYmdm9pZCAwIT09dGhpcy5wMnBBZ2VudFByZWRNaXNzTiYmKGUueGIoXCJwMnBBZ2VudFByZWRNaXNzTlwiLGkuVHlwZS5JMzIsMzkpLGUuVmIodGhpcy5wMnBBZ2VudFByZWRNaXNzTiksZS5HYigpKSxudWxsIT09dGhpcy5wMnBBZ2VudFByZWRQYXJ0aWFsSGl0TiYmdm9pZCAwIT09dGhpcy5wMnBBZ2VudFByZWRQYXJ0aWFsSGl0TiYmKGUueGIoXCJwMnBBZ2VudFByZWRQYXJ0aWFsSGl0TlwiLGkuVHlwZS5JMzIsNDApLGUuVmIodGhpcy5wMnBBZ2VudFByZWRQYXJ0aWFsSGl0TiksZS5HYigpKSxudWxsIT09dGhpcy5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCYmdm9pZCAwIT09dGhpcy5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCYmKGUueGIoXCJwMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdFwiLGkuVHlwZS5JNjQsNDEpLGUuS0ModGhpcy5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCksZS5HYigpKSxudWxsIT09dGhpcy5wMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdCYmdm9pZCAwIT09dGhpcy5wMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdCYmKGUueGIoXCJwMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdFwiLGkuVHlwZS5JNjQsNDIpLGUuS0ModGhpcy5wMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdCksZS5HYigpKSxudWxsIT09dGhpcy5yZXNwUDJwT3RoZXJOJiZ2b2lkIDAhPT10aGlzLnJlc3BQMnBPdGhlck4mJihlLnhiKFwicmVzcFAycE90aGVyTlwiLGkuVHlwZS5JMzIsNDMpLGUuVmIodGhpcy5yZXNwUDJwT3RoZXJOKSxlLkdiKCkpLG51bGwhPT10aGlzLmxDYWNoZVJlc3BOJiZ2b2lkIDAhPT10aGlzLmxDYWNoZVJlc3BOJiYoZS54YihcImxDYWNoZVJlc3BOXCIsaS5UeXBlLkkzMiw0NCksZS5WYih0aGlzLmxDYWNoZVJlc3BOKSxlLkdiKCkpLG51bGwhPT10aGlzLmxDYWNoZVJlc3BRdCYmdm9pZCAwIT09dGhpcy5sQ2FjaGVSZXNwUXQmJihlLnhiKFwibENhY2hlUmVzcFF0XCIsaS5UeXBlLkk2NCw0NSksZS5LQyh0aGlzLmxDYWNoZVJlc3BRdCksZS5HYigpKSxudWxsIT09dGhpcy5wMnBPdXRTaXRlTG93UHJpbyYmdm9pZCAwIT09dGhpcy5wMnBPdXRTaXRlTG93UHJpbyYmKGUueGIoXCJwMnBPdXRTaXRlTG93UHJpb1wiLGkuVHlwZS5JNjQsNDYpLGUuS0ModGhpcy5wMnBPdXRTaXRlTG93UHJpbyksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNuYXBzaG90cy5NZXRyaWNzPWZ1bmN0aW9uKGUpe3RoaXMudXBCVz1udWxsLHRoaXMuZG93bkJXPW51bGwsdGhpcy5tZW1OPW51bGwsdGhpcy5wcnRJbk49bnVsbCx0aGlzLnBydE91dE49bnVsbCx0aGlzLmluaXRWaWRlb0J1ZlF0PW51bGwsdGhpcy52aWRlb0F2Z0J1ZlF0PW51bGwsdGhpcy52aWRlb0J1ZlF0PW51bGwsdGhpcy52aWRlb0J1Zk49bnVsbCx0aGlzLmluaXRBdWRpb0J1ZlF0PW51bGwsdGhpcy5hdWRpb0F2Z0J1ZlF0PW51bGwsdGhpcy5hdWRpb0J1ZlF0PW51bGwsdGhpcy5hdWRpb0J1Zk49bnVsbCx0aGlzLmJpdHJhdGVVcE49bnVsbCx0aGlzLmJpdHJhdGVEd25OPW51bGwsdGhpcy5kZWxheT1udWxsLHRoaXMuZGVsYXlFbmZvcmNlbWVudD1udWxsLHRoaXMubG9va3VwUmVxRXN0YWJsaXNoZWQ9bnVsbCx0aGlzLmxvb2t1cFJlcUFjY2VwdD1udWxsLHRoaXMuZmFsbGJhY2tBdmdUcD1udWxsLHRoaXMuc3JjVGhyb3VnaHB1dD1udWxsLHRoaXMuZGlza1JlYWRUaW1lb3V0PW51bGwsdGhpcy5kaXNrUmVhZFJhdGU9bnVsbCx0aGlzLmRpc2tTdG9yZVJhdGU9bnVsbCx0aGlzLmRpc2tSZW1vdmVSYXRlPW51bGwsdGhpcy5kaXNrQ2FjaGVTaXplPW51bGwsdGhpcy5jbGllbnRCdWZmZXJNcz1udWxsLHRoaXMubG9va3VwVG90YWw9bnVsbCx0aGlzLmxvb2t1cE5vdEZvdW5kPW51bGwsdGhpcy5sb29rdXBGYWlsZWQ9bnVsbCx0aGlzLmxvb2t1cExhdGVuY3k9bnVsbCx0aGlzLnRyYWNrZXJGYWlsZWQ9bnVsbCx0aGlzLnRyYWNrZXJMYXRlbmN5PW51bGwsdGhpcy5zbmFwc2hvdEZhaWxlZD1udWxsLHRoaXMuc25hcHNob3RMYXRlbmN5PW51bGwsdGhpcy5fSz1udWxsLGUmJih2b2lkIDAhPT1lLnVwQlcmJm51bGwhPT1lLnVwQlcmJih0aGlzLnVwQlc9ZS51cEJXKSx2b2lkIDAhPT1lLmRvd25CVyYmbnVsbCE9PWUuZG93bkJXJiYodGhpcy5kb3duQlc9ZS5kb3duQlcpLHZvaWQgMCE9PWUubWVtTiYmbnVsbCE9PWUubWVtTiYmKHRoaXMubWVtTj1lLm1lbU4pLHZvaWQgMCE9PWUucHJ0SW5OJiZudWxsIT09ZS5wcnRJbk4mJih0aGlzLnBydEluTj1lLnBydEluTiksdm9pZCAwIT09ZS5wcnRPdXROJiZudWxsIT09ZS5wcnRPdXROJiYodGhpcy5wcnRPdXROPWUucHJ0T3V0Tiksdm9pZCAwIT09ZS5pbml0VmlkZW9CdWZRdCYmbnVsbCE9PWUuaW5pdFZpZGVvQnVmUXQmJih0aGlzLmluaXRWaWRlb0J1ZlF0PWUuaW5pdFZpZGVvQnVmUXQpLHZvaWQgMCE9PWUudmlkZW9BdmdCdWZRdCYmbnVsbCE9PWUudmlkZW9BdmdCdWZRdCYmKHRoaXMudmlkZW9BdmdCdWZRdD1lLnZpZGVvQXZnQnVmUXQpLHZvaWQgMCE9PWUudmlkZW9CdWZRdCYmbnVsbCE9PWUudmlkZW9CdWZRdCYmKHRoaXMudmlkZW9CdWZRdD1lLnZpZGVvQnVmUXQpLHZvaWQgMCE9PWUudmlkZW9CdWZOJiZudWxsIT09ZS52aWRlb0J1Zk4mJih0aGlzLnZpZGVvQnVmTj1lLnZpZGVvQnVmTiksdm9pZCAwIT09ZS5pbml0QXVkaW9CdWZRdCYmbnVsbCE9PWUuaW5pdEF1ZGlvQnVmUXQmJih0aGlzLmluaXRBdWRpb0J1ZlF0PWUuaW5pdEF1ZGlvQnVmUXQpLHZvaWQgMCE9PWUuYXVkaW9BdmdCdWZRdCYmbnVsbCE9PWUuYXVkaW9BdmdCdWZRdCYmKHRoaXMuYXVkaW9BdmdCdWZRdD1lLmF1ZGlvQXZnQnVmUXQpLHZvaWQgMCE9PWUuYXVkaW9CdWZRdCYmbnVsbCE9PWUuYXVkaW9CdWZRdCYmKHRoaXMuYXVkaW9CdWZRdD1lLmF1ZGlvQnVmUXQpLHZvaWQgMCE9PWUuYXVkaW9CdWZOJiZudWxsIT09ZS5hdWRpb0J1Zk4mJih0aGlzLmF1ZGlvQnVmTj1lLmF1ZGlvQnVmTiksdm9pZCAwIT09ZS5iaXRyYXRlVXBOJiZudWxsIT09ZS5iaXRyYXRlVXBOJiYodGhpcy5iaXRyYXRlVXBOPWUuYml0cmF0ZVVwTiksdm9pZCAwIT09ZS5iaXRyYXRlRHduTiYmbnVsbCE9PWUuYml0cmF0ZUR3bk4mJih0aGlzLmJpdHJhdGVEd25OPWUuYml0cmF0ZUR3bk4pLHZvaWQgMCE9PWUuZGVsYXkmJm51bGwhPT1lLmRlbGF5JiYodGhpcy5kZWxheT1lLmRlbGF5KSx2b2lkIDAhPT1lLmRlbGF5RW5mb3JjZW1lbnQmJm51bGwhPT1lLmRlbGF5RW5mb3JjZW1lbnQmJih0aGlzLmRlbGF5RW5mb3JjZW1lbnQ9ZS5kZWxheUVuZm9yY2VtZW50KSx2b2lkIDAhPT1lLmxvb2t1cFJlcUVzdGFibGlzaGVkJiZudWxsIT09ZS5sb29rdXBSZXFFc3RhYmxpc2hlZCYmKHRoaXMubG9va3VwUmVxRXN0YWJsaXNoZWQ9ZS5sb29rdXBSZXFFc3RhYmxpc2hlZCksdm9pZCAwIT09ZS5sb29rdXBSZXFBY2NlcHQmJm51bGwhPT1lLmxvb2t1cFJlcUFjY2VwdCYmKHRoaXMubG9va3VwUmVxQWNjZXB0PWUubG9va3VwUmVxQWNjZXB0KSx2b2lkIDAhPT1lLmZhbGxiYWNrQXZnVHAmJm51bGwhPT1lLmZhbGxiYWNrQXZnVHAmJih0aGlzLmZhbGxiYWNrQXZnVHA9ZS5mYWxsYmFja0F2Z1RwKSx2b2lkIDAhPT1lLnNyY1Rocm91Z2hwdXQmJm51bGwhPT1lLnNyY1Rocm91Z2hwdXQmJih0aGlzLnNyY1Rocm91Z2hwdXQ9ZS5zcmNUaHJvdWdocHV0KSx2b2lkIDAhPT1lLmRpc2tSZWFkVGltZW91dCYmbnVsbCE9PWUuZGlza1JlYWRUaW1lb3V0JiYodGhpcy5kaXNrUmVhZFRpbWVvdXQ9ZS5kaXNrUmVhZFRpbWVvdXQpLHZvaWQgMCE9PWUuZGlza1JlYWRSYXRlJiZudWxsIT09ZS5kaXNrUmVhZFJhdGUmJih0aGlzLmRpc2tSZWFkUmF0ZT1lLmRpc2tSZWFkUmF0ZSksdm9pZCAwIT09ZS5kaXNrU3RvcmVSYXRlJiZudWxsIT09ZS5kaXNrU3RvcmVSYXRlJiYodGhpcy5kaXNrU3RvcmVSYXRlPWUuZGlza1N0b3JlUmF0ZSksdm9pZCAwIT09ZS5kaXNrUmVtb3ZlUmF0ZSYmbnVsbCE9PWUuZGlza1JlbW92ZVJhdGUmJih0aGlzLmRpc2tSZW1vdmVSYXRlPWUuZGlza1JlbW92ZVJhdGUpLHZvaWQgMCE9PWUuZGlza0NhY2hlU2l6ZSYmbnVsbCE9PWUuZGlza0NhY2hlU2l6ZSYmKHRoaXMuZGlza0NhY2hlU2l6ZT1lLmRpc2tDYWNoZVNpemUpLHZvaWQgMCE9PWUuY2xpZW50QnVmZmVyTXMmJm51bGwhPT1lLmNsaWVudEJ1ZmZlck1zJiYodGhpcy5jbGllbnRCdWZmZXJNcz1lLmNsaWVudEJ1ZmZlck1zKSx2b2lkIDAhPT1lLmxvb2t1cFRvdGFsJiZudWxsIT09ZS5sb29rdXBUb3RhbCYmKHRoaXMubG9va3VwVG90YWw9ZS5sb29rdXBUb3RhbCksdm9pZCAwIT09ZS5sb29rdXBOb3RGb3VuZCYmbnVsbCE9PWUubG9va3VwTm90Rm91bmQmJih0aGlzLmxvb2t1cE5vdEZvdW5kPWUubG9va3VwTm90Rm91bmQpLHZvaWQgMCE9PWUubG9va3VwRmFpbGVkJiZudWxsIT09ZS5sb29rdXBGYWlsZWQmJih0aGlzLmxvb2t1cEZhaWxlZD1lLmxvb2t1cEZhaWxlZCksdm9pZCAwIT09ZS5sb29rdXBMYXRlbmN5JiZudWxsIT09ZS5sb29rdXBMYXRlbmN5JiYodGhpcy5sb29rdXBMYXRlbmN5PWUubG9va3VwTGF0ZW5jeSksdm9pZCAwIT09ZS50cmFja2VyRmFpbGVkJiZudWxsIT09ZS50cmFja2VyRmFpbGVkJiYodGhpcy50cmFja2VyRmFpbGVkPWUudHJhY2tlckZhaWxlZCksdm9pZCAwIT09ZS50cmFja2VyTGF0ZW5jeSYmbnVsbCE9PWUudHJhY2tlckxhdGVuY3kmJih0aGlzLnRyYWNrZXJMYXRlbmN5PWUudHJhY2tlckxhdGVuY3kpLHZvaWQgMCE9PWUuc25hcHNob3RGYWlsZWQmJm51bGwhPT1lLnNuYXBzaG90RmFpbGVkJiYodGhpcy5zbmFwc2hvdEZhaWxlZD1lLnNuYXBzaG90RmFpbGVkKSx2b2lkIDAhPT1lLnNuYXBzaG90TGF0ZW5jeSYmbnVsbCE9PWUuc25hcHNob3RMYXRlbmN5JiYodGhpcy5zbmFwc2hvdExhdGVuY3k9ZS5zbmFwc2hvdExhdGVuY3kpLHZvaWQgMCE9PWUuX0smJm51bGwhPT1lLl9LJiYodGhpcy5fSz1lLl9LKSl9LGhpdmUuc25hcHNob3RzLk1ldHJpY3MucHJvdG90eXBlPXt9LGhpdmUuc25hcHNob3RzLk1ldHJpY3MucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLkkzMj90aGlzLnVwQlc9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyOnI9PWkuVHlwZS5JMzI/dGhpcy5kb3duQlc9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5JMzI/dGhpcy5tZW1OPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgNDpyPT1pLlR5cGUuSTMyP3RoaXMucHJ0SW5OPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgNTpyPT1pLlR5cGUuSTMyP3RoaXMucHJ0T3V0Tj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDY6cj09aS5UeXBlLkk2ND90aGlzLmluaXRWaWRlb0J1ZlF0PWUuZ18oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgNzpyPT1pLlR5cGUuRE9VQkxFP3RoaXMudmlkZW9BdmdCdWZRdD1lLkVfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDg6cj09aS5UeXBlLkk2ND90aGlzLnZpZGVvQnVmUXQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA5OnI9PWkuVHlwZS5JMzI/dGhpcy52aWRlb0J1Zk49ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAxMDpyPT1pLlR5cGUuSTMyP3RoaXMuaW5pdEF1ZGlvQnVmUXQ9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAxMTpyPT1pLlR5cGUuRE9VQkxFP3RoaXMuYXVkaW9BdmdCdWZRdD1lLkVfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDEyOnI9PWkuVHlwZS5JNjQ/dGhpcy5hdWRpb0J1ZlF0PWUuZ18oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMTM6cj09aS5UeXBlLkkzMj90aGlzLmF1ZGlvQnVmTj1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDE0OnI9PWkuVHlwZS5JMzI/dGhpcy5iaXRyYXRlVXBOPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMTU6cj09aS5UeXBlLkkzMj90aGlzLmJpdHJhdGVEd25OPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMTY6cj09aS5UeXBlLkkzMj90aGlzLmRlbGF5PWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMTc6cj09aS5UeXBlLkkzMj90aGlzLmRlbGF5RW5mb3JjZW1lbnQ9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAxODpyPT1pLlR5cGUuSTMyP3RoaXMubG9va3VwUmVxRXN0YWJsaXNoZWQ9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAxOTpyPT1pLlR5cGUuSTMyP3RoaXMubG9va3VwUmVxQWNjZXB0PWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjA6cj09aS5UeXBlLkRPVUJMRT90aGlzLmZhbGxiYWNrQXZnVHA9ZS5FXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyMTpyPT1pLlR5cGUuRE9VQkxFP3RoaXMuc3JjVGhyb3VnaHB1dD1lLkVfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDIyOnI9PWkuVHlwZS5JMzI/dGhpcy5kaXNrUmVhZFRpbWVvdXQ9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyMzpyPT1pLlR5cGUuRE9VQkxFP3RoaXMuZGlza1JlYWRSYXRlPWUuRV8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjQ6cj09aS5UeXBlLkRPVUJMRT90aGlzLmRpc2tTdG9yZVJhdGU9ZS5FXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyNTpyPT1pLlR5cGUuRE9VQkxFP3RoaXMuZGlza1JlbW92ZVJhdGU9ZS5FXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyNjpyPT1pLlR5cGUuSTY0P3RoaXMuZGlza0NhY2hlU2l6ZT1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI3OnI9PWkuVHlwZS5JMzI/dGhpcy5jbGllbnRCdWZmZXJNcz1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI4OnI9PWkuVHlwZS5JMzI/dGhpcy5sb29rdXBUb3RhbD1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI5OnI9PWkuVHlwZS5JMzI/dGhpcy5sb29rdXBOb3RGb3VuZD1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDMwOnI9PWkuVHlwZS5JMzI/dGhpcy5sb29rdXBGYWlsZWQ9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzMTpyPT1pLlR5cGUuSTMyP3RoaXMubG9va3VwTGF0ZW5jeT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDMyOnI9PWkuVHlwZS5JMzI/dGhpcy50cmFja2VyRmFpbGVkPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMzM6cj09aS5UeXBlLkkzMj90aGlzLnRyYWNrZXJMYXRlbmN5PWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMzQ6cj09aS5UeXBlLkkzMj90aGlzLnNuYXBzaG90RmFpbGVkPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMzU6cj09aS5UeXBlLkkzMj90aGlzLnNuYXBzaG90TGF0ZW5jeT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM2OnI9PWkuVHlwZS5JMzI/dGhpcy5fSz1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zbmFwc2hvdHMuTWV0cmljcy5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7ZS5IYihcIk1ldHJpY3NcIiksbnVsbCE9PXRoaXMudXBCVyYmdm9pZCAwIT09dGhpcy51cEJXJiYoZS54YihcInVwQldcIixpLlR5cGUuSTMyLDEpLGUuVmIodGhpcy51cEJXKSxlLkdiKCkpLG51bGwhPT10aGlzLmRvd25CVyYmdm9pZCAwIT09dGhpcy5kb3duQlcmJihlLnhiKFwiZG93bkJXXCIsaS5UeXBlLkkzMiwyKSxlLlZiKHRoaXMuZG93bkJXKSxlLkdiKCkpLG51bGwhPT10aGlzLm1lbU4mJnZvaWQgMCE9PXRoaXMubWVtTiYmKGUueGIoXCJtZW1OXCIsaS5UeXBlLkkzMiwzKSxlLlZiKHRoaXMubWVtTiksZS5HYigpKSxudWxsIT09dGhpcy5wcnRJbk4mJnZvaWQgMCE9PXRoaXMucHJ0SW5OJiYoZS54YihcInBydEluTlwiLGkuVHlwZS5JMzIsNCksZS5WYih0aGlzLnBydEluTiksZS5HYigpKSxudWxsIT09dGhpcy5wcnRPdXROJiZ2b2lkIDAhPT10aGlzLnBydE91dE4mJihlLnhiKFwicHJ0T3V0TlwiLGkuVHlwZS5JMzIsNSksZS5WYih0aGlzLnBydE91dE4pLGUuR2IoKSksbnVsbCE9PXRoaXMuaW5pdFZpZGVvQnVmUXQmJnZvaWQgMCE9PXRoaXMuaW5pdFZpZGVvQnVmUXQmJihlLnhiKFwiaW5pdFZpZGVvQnVmUXRcIixpLlR5cGUuSTY0LDYpLGUuS0ModGhpcy5pbml0VmlkZW9CdWZRdCksZS5HYigpKSxudWxsIT09dGhpcy52aWRlb0F2Z0J1ZlF0JiZ2b2lkIDAhPT10aGlzLnZpZGVvQXZnQnVmUXQmJihlLnhiKFwidmlkZW9BdmdCdWZRdFwiLGkuVHlwZS5ET1VCTEUsNyksZS5ZQyh0aGlzLnZpZGVvQXZnQnVmUXQpLGUuR2IoKSksbnVsbCE9PXRoaXMudmlkZW9CdWZRdCYmdm9pZCAwIT09dGhpcy52aWRlb0J1ZlF0JiYoZS54YihcInZpZGVvQnVmUXRcIixpLlR5cGUuSTY0LDgpLGUuS0ModGhpcy52aWRlb0J1ZlF0KSxlLkdiKCkpLG51bGwhPT10aGlzLnZpZGVvQnVmTiYmdm9pZCAwIT09dGhpcy52aWRlb0J1Zk4mJihlLnhiKFwidmlkZW9CdWZOXCIsaS5UeXBlLkkzMiw5KSxlLlZiKHRoaXMudmlkZW9CdWZOKSxlLkdiKCkpLG51bGwhPT10aGlzLmluaXRBdWRpb0J1ZlF0JiZ2b2lkIDAhPT10aGlzLmluaXRBdWRpb0J1ZlF0JiYoZS54YihcImluaXRBdWRpb0J1ZlF0XCIsaS5UeXBlLkkzMiwxMCksZS5WYih0aGlzLmluaXRBdWRpb0J1ZlF0KSxlLkdiKCkpLG51bGwhPT10aGlzLmF1ZGlvQXZnQnVmUXQmJnZvaWQgMCE9PXRoaXMuYXVkaW9BdmdCdWZRdCYmKGUueGIoXCJhdWRpb0F2Z0J1ZlF0XCIsaS5UeXBlLkRPVUJMRSwxMSksZS5ZQyh0aGlzLmF1ZGlvQXZnQnVmUXQpLGUuR2IoKSksbnVsbCE9PXRoaXMuYXVkaW9CdWZRdCYmdm9pZCAwIT09dGhpcy5hdWRpb0J1ZlF0JiYoZS54YihcImF1ZGlvQnVmUXRcIixpLlR5cGUuSTY0LDEyKSxlLktDKHRoaXMuYXVkaW9CdWZRdCksZS5HYigpKSxudWxsIT09dGhpcy5hdWRpb0J1Zk4mJnZvaWQgMCE9PXRoaXMuYXVkaW9CdWZOJiYoZS54YihcImF1ZGlvQnVmTlwiLGkuVHlwZS5JMzIsMTMpLGUuVmIodGhpcy5hdWRpb0J1Zk4pLGUuR2IoKSksbnVsbCE9PXRoaXMuYml0cmF0ZVVwTiYmdm9pZCAwIT09dGhpcy5iaXRyYXRlVXBOJiYoZS54YihcImJpdHJhdGVVcE5cIixpLlR5cGUuSTMyLDE0KSxlLlZiKHRoaXMuYml0cmF0ZVVwTiksZS5HYigpKSxudWxsIT09dGhpcy5iaXRyYXRlRHduTiYmdm9pZCAwIT09dGhpcy5iaXRyYXRlRHduTiYmKGUueGIoXCJiaXRyYXRlRHduTlwiLGkuVHlwZS5JMzIsMTUpLGUuVmIodGhpcy5iaXRyYXRlRHduTiksZS5HYigpKSxudWxsIT09dGhpcy5kZWxheSYmdm9pZCAwIT09dGhpcy5kZWxheSYmKGUueGIoXCJkZWxheVwiLGkuVHlwZS5JMzIsMTYpLGUuVmIodGhpcy5kZWxheSksZS5HYigpKSxudWxsIT09dGhpcy5kZWxheUVuZm9yY2VtZW50JiZ2b2lkIDAhPT10aGlzLmRlbGF5RW5mb3JjZW1lbnQmJihlLnhiKFwiZGVsYXlFbmZvcmNlbWVudFwiLGkuVHlwZS5JMzIsMTcpLGUuVmIodGhpcy5kZWxheUVuZm9yY2VtZW50KSxlLkdiKCkpLG51bGwhPT10aGlzLmxvb2t1cFJlcUVzdGFibGlzaGVkJiZ2b2lkIDAhPT10aGlzLmxvb2t1cFJlcUVzdGFibGlzaGVkJiYoZS54YihcImxvb2t1cFJlcUVzdGFibGlzaGVkXCIsaS5UeXBlLkkzMiwxOCksZS5WYih0aGlzLmxvb2t1cFJlcUVzdGFibGlzaGVkKSxlLkdiKCkpLG51bGwhPT10aGlzLmxvb2t1cFJlcUFjY2VwdCYmdm9pZCAwIT09dGhpcy5sb29rdXBSZXFBY2NlcHQmJihlLnhiKFwibG9va3VwUmVxQWNjZXB0XCIsaS5UeXBlLkkzMiwxOSksZS5WYih0aGlzLmxvb2t1cFJlcUFjY2VwdCksZS5HYigpKSxudWxsIT09dGhpcy5mYWxsYmFja0F2Z1RwJiZ2b2lkIDAhPT10aGlzLmZhbGxiYWNrQXZnVHAmJihlLnhiKFwiZmFsbGJhY2tBdmdUcFwiLGkuVHlwZS5ET1VCTEUsMjApLGUuWUModGhpcy5mYWxsYmFja0F2Z1RwKSxlLkdiKCkpLG51bGwhPT10aGlzLnNyY1Rocm91Z2hwdXQmJnZvaWQgMCE9PXRoaXMuc3JjVGhyb3VnaHB1dCYmKGUueGIoXCJzcmNUaHJvdWdocHV0XCIsaS5UeXBlLkRPVUJMRSwyMSksZS5ZQyh0aGlzLnNyY1Rocm91Z2hwdXQpLGUuR2IoKSksbnVsbCE9PXRoaXMuZGlza1JlYWRUaW1lb3V0JiZ2b2lkIDAhPT10aGlzLmRpc2tSZWFkVGltZW91dCYmKGUueGIoXCJkaXNrUmVhZFRpbWVvdXRcIixpLlR5cGUuSTMyLDIyKSxlLlZiKHRoaXMuZGlza1JlYWRUaW1lb3V0KSxlLkdiKCkpLG51bGwhPT10aGlzLmRpc2tSZWFkUmF0ZSYmdm9pZCAwIT09dGhpcy5kaXNrUmVhZFJhdGUmJihlLnhiKFwiZGlza1JlYWRSYXRlXCIsaS5UeXBlLkRPVUJMRSwyMyksZS5ZQyh0aGlzLmRpc2tSZWFkUmF0ZSksZS5HYigpKSxudWxsIT09dGhpcy5kaXNrU3RvcmVSYXRlJiZ2b2lkIDAhPT10aGlzLmRpc2tTdG9yZVJhdGUmJihlLnhiKFwiZGlza1N0b3JlUmF0ZVwiLGkuVHlwZS5ET1VCTEUsMjQpLGUuWUModGhpcy5kaXNrU3RvcmVSYXRlKSxlLkdiKCkpLG51bGwhPT10aGlzLmRpc2tSZW1vdmVSYXRlJiZ2b2lkIDAhPT10aGlzLmRpc2tSZW1vdmVSYXRlJiYoZS54YihcImRpc2tSZW1vdmVSYXRlXCIsaS5UeXBlLkRPVUJMRSwyNSksZS5ZQyh0aGlzLmRpc2tSZW1vdmVSYXRlKSxlLkdiKCkpLG51bGwhPT10aGlzLmRpc2tDYWNoZVNpemUmJnZvaWQgMCE9PXRoaXMuZGlza0NhY2hlU2l6ZSYmKGUueGIoXCJkaXNrQ2FjaGVTaXplXCIsaS5UeXBlLkk2NCwyNiksZS5LQyh0aGlzLmRpc2tDYWNoZVNpemUpLGUuR2IoKSksbnVsbCE9PXRoaXMuY2xpZW50QnVmZmVyTXMmJnZvaWQgMCE9PXRoaXMuY2xpZW50QnVmZmVyTXMmJihlLnhiKFwiY2xpZW50QnVmZmVyTXNcIixpLlR5cGUuSTMyLDI3KSxlLlZiKHRoaXMuY2xpZW50QnVmZmVyTXMpLGUuR2IoKSksbnVsbCE9PXRoaXMubG9va3VwVG90YWwmJnZvaWQgMCE9PXRoaXMubG9va3VwVG90YWwmJihlLnhiKFwibG9va3VwVG90YWxcIixpLlR5cGUuSTMyLDI4KSxlLlZiKHRoaXMubG9va3VwVG90YWwpLGUuR2IoKSksbnVsbCE9PXRoaXMubG9va3VwTm90Rm91bmQmJnZvaWQgMCE9PXRoaXMubG9va3VwTm90Rm91bmQmJihlLnhiKFwibG9va3VwTm90Rm91bmRcIixpLlR5cGUuSTMyLDI5KSxlLlZiKHRoaXMubG9va3VwTm90Rm91bmQpLGUuR2IoKSksbnVsbCE9PXRoaXMubG9va3VwRmFpbGVkJiZ2b2lkIDAhPT10aGlzLmxvb2t1cEZhaWxlZCYmKGUueGIoXCJsb29rdXBGYWlsZWRcIixpLlR5cGUuSTMyLDMwKSxlLlZiKHRoaXMubG9va3VwRmFpbGVkKSxlLkdiKCkpLG51bGwhPT10aGlzLmxvb2t1cExhdGVuY3kmJnZvaWQgMCE9PXRoaXMubG9va3VwTGF0ZW5jeSYmKGUueGIoXCJsb29rdXBMYXRlbmN5XCIsaS5UeXBlLkkzMiwzMSksZS5WYih0aGlzLmxvb2t1cExhdGVuY3kpLGUuR2IoKSksbnVsbCE9PXRoaXMudHJhY2tlckZhaWxlZCYmdm9pZCAwIT09dGhpcy50cmFja2VyRmFpbGVkJiYoZS54YihcInRyYWNrZXJGYWlsZWRcIixpLlR5cGUuSTMyLDMyKSxlLlZiKHRoaXMudHJhY2tlckZhaWxlZCksZS5HYigpKSxudWxsIT09dGhpcy50cmFja2VyTGF0ZW5jeSYmdm9pZCAwIT09dGhpcy50cmFja2VyTGF0ZW5jeSYmKGUueGIoXCJ0cmFja2VyTGF0ZW5jeVwiLGkuVHlwZS5JMzIsMzMpLGUuVmIodGhpcy50cmFja2VyTGF0ZW5jeSksZS5HYigpKSxudWxsIT09dGhpcy5zbmFwc2hvdEZhaWxlZCYmdm9pZCAwIT09dGhpcy5zbmFwc2hvdEZhaWxlZCYmKGUueGIoXCJzbmFwc2hvdEZhaWxlZFwiLGkuVHlwZS5JMzIsMzQpLGUuVmIodGhpcy5zbmFwc2hvdEZhaWxlZCksZS5HYigpKSxudWxsIT09dGhpcy5zbmFwc2hvdExhdGVuY3kmJnZvaWQgMCE9PXRoaXMuc25hcHNob3RMYXRlbmN5JiYoZS54YihcInNuYXBzaG90TGF0ZW5jeVwiLGkuVHlwZS5JMzIsMzUpLGUuVmIodGhpcy5zbmFwc2hvdExhdGVuY3kpLGUuR2IoKSksbnVsbCE9PXRoaXMuX0smJnZvaWQgMCE9PXRoaXMuX0smJihlLnhiKFwic291cmNlTGF0ZW5jeVwiLGkuVHlwZS5JMzIsMzYpLGUuVmIodGhpcy5fSyksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyVHJhZmZpYz1mdW5jdGlvbihlKXt0aGlzLnAycFN1Y2NSZXE9bnVsbCx0aGlzLnAycEZhaWxSZXE9bnVsbCx0aGlzLnAycFBhcnRSZXE9bnVsbCx0aGlzLnAycFN1Y2NSZWNlaXZlZD1udWxsLHRoaXMucDJwU3VjY1JlY2VpdmVkTG93PW51bGwsdGhpcy5wMnBGYWlsUmVjZWl2ZWQ9bnVsbCx0aGlzLnAycFN1Y2NSZXNwPW51bGwsdGhpcy5wMnBGYWlsUmVzcD1udWxsLHRoaXMucDJwUGFydFJlc3A9bnVsbCx0aGlzLnAycFN1Y2NTZW50PW51bGwsdGhpcy5wMnBTdWNjU2VudExvdz1udWxsLHRoaXMucDJwRmFpbFNlbnQ9bnVsbCxlJiYodm9pZCAwIT09ZS5wMnBTdWNjUmVxJiZudWxsIT09ZS5wMnBTdWNjUmVxJiYodGhpcy5wMnBTdWNjUmVxPWUucDJwU3VjY1JlcSksdm9pZCAwIT09ZS5wMnBGYWlsUmVxJiZudWxsIT09ZS5wMnBGYWlsUmVxJiYodGhpcy5wMnBGYWlsUmVxPWUucDJwRmFpbFJlcSksdm9pZCAwIT09ZS5wMnBQYXJ0UmVxJiZudWxsIT09ZS5wMnBQYXJ0UmVxJiYodGhpcy5wMnBQYXJ0UmVxPWUucDJwUGFydFJlcSksdm9pZCAwIT09ZS5wMnBTdWNjUmVjZWl2ZWQmJm51bGwhPT1lLnAycFN1Y2NSZWNlaXZlZCYmKHRoaXMucDJwU3VjY1JlY2VpdmVkPWUucDJwU3VjY1JlY2VpdmVkKSx2b2lkIDAhPT1lLnAycFN1Y2NSZWNlaXZlZExvdyYmbnVsbCE9PWUucDJwU3VjY1JlY2VpdmVkTG93JiYodGhpcy5wMnBTdWNjUmVjZWl2ZWRMb3c9ZS5wMnBTdWNjUmVjZWl2ZWRMb3cpLHZvaWQgMCE9PWUucDJwRmFpbFJlY2VpdmVkJiZudWxsIT09ZS5wMnBGYWlsUmVjZWl2ZWQmJih0aGlzLnAycEZhaWxSZWNlaXZlZD1lLnAycEZhaWxSZWNlaXZlZCksdm9pZCAwIT09ZS5wMnBTdWNjUmVzcCYmbnVsbCE9PWUucDJwU3VjY1Jlc3AmJih0aGlzLnAycFN1Y2NSZXNwPWUucDJwU3VjY1Jlc3ApLHZvaWQgMCE9PWUucDJwRmFpbFJlc3AmJm51bGwhPT1lLnAycEZhaWxSZXNwJiYodGhpcy5wMnBGYWlsUmVzcD1lLnAycEZhaWxSZXNwKSx2b2lkIDAhPT1lLnAycFBhcnRSZXNwJiZudWxsIT09ZS5wMnBQYXJ0UmVzcCYmKHRoaXMucDJwUGFydFJlc3A9ZS5wMnBQYXJ0UmVzcCksdm9pZCAwIT09ZS5wMnBTdWNjU2VudCYmbnVsbCE9PWUucDJwU3VjY1NlbnQmJih0aGlzLnAycFN1Y2NTZW50PWUucDJwU3VjY1NlbnQpLHZvaWQgMCE9PWUucDJwU3VjY1NlbnRMb3cmJm51bGwhPT1lLnAycFN1Y2NTZW50TG93JiYodGhpcy5wMnBTdWNjU2VudExvdz1lLnAycFN1Y2NTZW50TG93KSx2b2lkIDAhPT1lLnAycEZhaWxTZW50JiZudWxsIT09ZS5wMnBGYWlsU2VudCYmKHRoaXMucDJwRmFpbFNlbnQ9ZS5wMnBGYWlsU2VudCkpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyVHJhZmZpYy5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuUGFydG5lclRyYWZmaWMucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLkk2ND90aGlzLnAycFN1Y2NSZXE9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyOnI9PWkuVHlwZS5JNjQ/dGhpcy5wMnBGYWlsUmVxPWUuZ18oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMzpyPT1pLlR5cGUuSTY0P3RoaXMucDJwUGFydFJlcT1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDQ6cj09aS5UeXBlLkk2ND90aGlzLnAycFN1Y2NSZWNlaXZlZD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDU6cj09aS5UeXBlLkk2ND90aGlzLnAycFN1Y2NSZWNlaXZlZExvdz1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDEwOnI9PWkuVHlwZS5JNjQ/dGhpcy5wMnBGYWlsUmVjZWl2ZWQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA2OnI9PWkuVHlwZS5JNjQ/dGhpcy5wMnBTdWNjUmVzcD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDExOnI9PWkuVHlwZS5JNjQ/dGhpcy5wMnBGYWlsUmVzcD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDc6cj09aS5UeXBlLkk2ND90aGlzLnAycFBhcnRSZXNwPWUuZ18oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgODpyPT1pLlR5cGUuSTY0P3RoaXMucDJwU3VjY1NlbnQ9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA5OnI9PWkuVHlwZS5JNjQ/dGhpcy5wMnBTdWNjU2VudExvdz1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDEyOnI9PWkuVHlwZS5JNjQ/dGhpcy5wMnBGYWlsU2VudD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zbmFwc2hvdHMuUGFydG5lclRyYWZmaWMucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJQYXJ0bmVyVHJhZmZpY1wiKSxudWxsIT09dGhpcy5wMnBTdWNjUmVxJiZ2b2lkIDAhPT10aGlzLnAycFN1Y2NSZXEmJihlLnhiKFwicDJwU3VjY1JlcVwiLGkuVHlwZS5JNjQsMSksZS5LQyh0aGlzLnAycFN1Y2NSZXEpLGUuR2IoKSksbnVsbCE9PXRoaXMucDJwRmFpbFJlcSYmdm9pZCAwIT09dGhpcy5wMnBGYWlsUmVxJiYoZS54YihcInAycEZhaWxSZXFcIixpLlR5cGUuSTY0LDIpLGUuS0ModGhpcy5wMnBGYWlsUmVxKSxlLkdiKCkpLG51bGwhPT10aGlzLnAycFBhcnRSZXEmJnZvaWQgMCE9PXRoaXMucDJwUGFydFJlcSYmKGUueGIoXCJwMnBQYXJ0UmVxXCIsaS5UeXBlLkk2NCwzKSxlLktDKHRoaXMucDJwUGFydFJlcSksZS5HYigpKSxudWxsIT09dGhpcy5wMnBTdWNjUmVjZWl2ZWQmJnZvaWQgMCE9PXRoaXMucDJwU3VjY1JlY2VpdmVkJiYoZS54YihcInAycFN1Y2NSZWNlaXZlZFwiLGkuVHlwZS5JNjQsNCksZS5LQyh0aGlzLnAycFN1Y2NSZWNlaXZlZCksZS5HYigpKSxudWxsIT09dGhpcy5wMnBTdWNjUmVjZWl2ZWRMb3cmJnZvaWQgMCE9PXRoaXMucDJwU3VjY1JlY2VpdmVkTG93JiYoZS54YihcInAycFN1Y2NSZWNlaXZlZExvd1wiLGkuVHlwZS5JNjQsNSksZS5LQyh0aGlzLnAycFN1Y2NSZWNlaXZlZExvdyksZS5HYigpKSxudWxsIT09dGhpcy5wMnBGYWlsUmVjZWl2ZWQmJnZvaWQgMCE9PXRoaXMucDJwRmFpbFJlY2VpdmVkJiYoZS54YihcInAycEZhaWxSZWNlaXZlZFwiLGkuVHlwZS5JNjQsMTApLGUuS0ModGhpcy5wMnBGYWlsUmVjZWl2ZWQpLGUuR2IoKSksbnVsbCE9PXRoaXMucDJwU3VjY1Jlc3AmJnZvaWQgMCE9PXRoaXMucDJwU3VjY1Jlc3AmJihlLnhiKFwicDJwU3VjY1Jlc3BcIixpLlR5cGUuSTY0LDYpLGUuS0ModGhpcy5wMnBTdWNjUmVzcCksZS5HYigpKSxudWxsIT09dGhpcy5wMnBGYWlsUmVzcCYmdm9pZCAwIT09dGhpcy5wMnBGYWlsUmVzcCYmKGUueGIoXCJwMnBGYWlsUmVzcFwiLGkuVHlwZS5JNjQsMTEpLGUuS0ModGhpcy5wMnBGYWlsUmVzcCksZS5HYigpKSxudWxsIT09dGhpcy5wMnBQYXJ0UmVzcCYmdm9pZCAwIT09dGhpcy5wMnBQYXJ0UmVzcCYmKGUueGIoXCJwMnBQYXJ0UmVzcFwiLGkuVHlwZS5JNjQsNyksZS5LQyh0aGlzLnAycFBhcnRSZXNwKSxlLkdiKCkpLG51bGwhPT10aGlzLnAycFN1Y2NTZW50JiZ2b2lkIDAhPT10aGlzLnAycFN1Y2NTZW50JiYoZS54YihcInAycFN1Y2NTZW50XCIsaS5UeXBlLkk2NCw4KSxlLktDKHRoaXMucDJwU3VjY1NlbnQpLGUuR2IoKSksbnVsbCE9PXRoaXMucDJwU3VjY1NlbnRMb3cmJnZvaWQgMCE9PXRoaXMucDJwU3VjY1NlbnRMb3cmJihlLnhiKFwicDJwU3VjY1NlbnRMb3dcIixpLlR5cGUuSTY0LDkpLGUuS0ModGhpcy5wMnBTdWNjU2VudExvdyksZS5HYigpKSxudWxsIT09dGhpcy5wMnBGYWlsU2VudCYmdm9pZCAwIT09dGhpcy5wMnBGYWlsU2VudCYmKGUueGIoXCJwMnBGYWlsU2VudFwiLGkuVHlwZS5JNjQsMTIpLGUuS0ModGhpcy5wMnBGYWlsU2VudCksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyTWV0cmljcz1mdW5jdGlvbihlKXt0aGlzLnJhdGVSZWNlaXZlZD1udWxsLHRoaXMucmF0ZVNlbnQ9bnVsbCx0aGlzLmhhbmRzaGFrZURlbGF5PW51bGwsZSYmKHZvaWQgMCE9PWUucmF0ZVJlY2VpdmVkJiZudWxsIT09ZS5yYXRlUmVjZWl2ZWQmJih0aGlzLnJhdGVSZWNlaXZlZD1lLnJhdGVSZWNlaXZlZCksdm9pZCAwIT09ZS5yYXRlU2VudCYmbnVsbCE9PWUucmF0ZVNlbnQmJih0aGlzLnJhdGVTZW50PWUucmF0ZVNlbnQpLHZvaWQgMCE9PWUuaGFuZHNoYWtlRGVsYXkmJm51bGwhPT1lLmhhbmRzaGFrZURlbGF5JiYodGhpcy5oYW5kc2hha2VEZWxheT1lLmhhbmRzaGFrZURlbGF5KSl9LGhpdmUuc25hcHNob3RzLlBhcnRuZXJNZXRyaWNzLnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyTWV0cmljcy5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihlKXtmb3IoZS5yXygpOzspe3ZhciB0PWUua2IoKSxyPSh0LmZuYW1lLHQuZnR5cGUpLG49dC5maWQ7aWYocj09aS5UeXBlLlNUT1ApYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTpyPT1pLlR5cGUuRE9VQkxFP3RoaXMucmF0ZVJlY2VpdmVkPWUuRV8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuRE9VQkxFP3RoaXMucmF0ZVNlbnQ9ZS5FXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5JNjQ/dGhpcy5oYW5kc2hha2VEZWxheT1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zbmFwc2hvdHMuUGFydG5lck1ldHJpY3MucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJQYXJ0bmVyTWV0cmljc1wiKSxudWxsIT09dGhpcy5yYXRlUmVjZWl2ZWQmJnZvaWQgMCE9PXRoaXMucmF0ZVJlY2VpdmVkJiYoZS54YihcInJhdGVSZWNlaXZlZFwiLGkuVHlwZS5ET1VCTEUsMSksZS5ZQyh0aGlzLnJhdGVSZWNlaXZlZCksZS5HYigpKSxudWxsIT09dGhpcy5yYXRlU2VudCYmdm9pZCAwIT09dGhpcy5yYXRlU2VudCYmKGUueGIoXCJyYXRlU2VudFwiLGkuVHlwZS5ET1VCTEUsMiksZS5ZQyh0aGlzLnJhdGVTZW50KSxlLkdiKCkpLG51bGwhPT10aGlzLmhhbmRzaGFrZURlbGF5JiZ2b2lkIDAhPT10aGlzLmhhbmRzaGFrZURlbGF5JiYoZS54YihcImhhbmRzaGFrZURlbGF5XCIsaS5UeXBlLkk2NCwzKSxlLktDKHRoaXMuaGFuZHNoYWtlRGVsYXkpLGUuR2IoKSksZS5qYigpLGUuUWIoKX0saGl2ZS5zbmFwc2hvdHMuQ29ubmVjdGl2aXR5SW5mbz1mdW5jdGlvbihlKXt0aGlzLnVwQlc9bnVsbCx0aGlzLmRvd25CVz1udWxsLHRoaXMuZXh0ZXJuYWxBcz1udWxsLHRoaXMuaW50ZXJuYWxBcz1udWxsLHRoaXMucHVibGljSXA9bnVsbCx0aGlzLnByaXZhdGVJcD1udWxsLGUmJih2b2lkIDAhPT1lLnVwQlcmJm51bGwhPT1lLnVwQlcmJih0aGlzLnVwQlc9ZS51cEJXKSx2b2lkIDAhPT1lLmRvd25CVyYmbnVsbCE9PWUuZG93bkJXJiYodGhpcy5kb3duQlc9ZS5kb3duQlcpLHZvaWQgMCE9PWUuZXh0ZXJuYWxBcyYmbnVsbCE9PWUuZXh0ZXJuYWxBcyYmKHRoaXMuZXh0ZXJuYWxBcz1lLmV4dGVybmFsQXMpLHZvaWQgMCE9PWUuaW50ZXJuYWxBcyYmbnVsbCE9PWUuaW50ZXJuYWxBcyYmKHRoaXMuaW50ZXJuYWxBcz1lLmludGVybmFsQXMpLHZvaWQgMCE9PWUucHVibGljSXAmJm51bGwhPT1lLnB1YmxpY0lwJiYodGhpcy5wdWJsaWNJcD1lLnB1YmxpY0lwKSx2b2lkIDAhPT1lLnByaXZhdGVJcCYmbnVsbCE9PWUucHJpdmF0ZUlwJiYodGhpcy5wcml2YXRlSXA9ZS5wcml2YXRlSXApKX0saGl2ZS5zbmFwc2hvdHMuQ29ubmVjdGl2aXR5SW5mby5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuQ29ubmVjdGl2aXR5SW5mby5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihlKXtmb3IoZS5yXygpOzspe3ZhciB0PWUua2IoKSxyPSh0LmZuYW1lLHQuZnR5cGUpLG49dC5maWQ7aWYocj09aS5UeXBlLlNUT1ApYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTpyPT1pLlR5cGUuSTMyP3RoaXMudXBCVz1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI6cj09aS5UeXBlLkkzMj90aGlzLmRvd25CVz1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM6cj09aS5UeXBlLkkzMj90aGlzLmV4dGVybmFsQXM9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA0OnI9PWkuVHlwZS5JMzI/dGhpcy5pbnRlcm5hbEFzPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgNTpyPT1pLlR5cGUuU1RSSU5HP3RoaXMucHVibGljSXA9ZS5MYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA2OnI9PWkuVHlwZS5TVFJJTkc/dGhpcy5wcml2YXRlSXA9ZS5MYigpLnZhbHVlOmUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LGhpdmUuc25hcHNob3RzLkNvbm5lY3Rpdml0eUluZm8ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJDb25uZWN0aXZpdHlJbmZvXCIpLG51bGwhPT10aGlzLnVwQlcmJnZvaWQgMCE9PXRoaXMudXBCVyYmKGUueGIoXCJ1cEJXXCIsaS5UeXBlLkkzMiwxKSxlLlZiKHRoaXMudXBCVyksZS5HYigpKSxudWxsIT09dGhpcy5kb3duQlcmJnZvaWQgMCE9PXRoaXMuZG93bkJXJiYoZS54YihcImRvd25CV1wiLGkuVHlwZS5JMzIsMiksZS5WYih0aGlzLmRvd25CVyksZS5HYigpKSxudWxsIT09dGhpcy5leHRlcm5hbEFzJiZ2b2lkIDAhPT10aGlzLmV4dGVybmFsQXMmJihlLnhiKFwiZXh0ZXJuYWxBc1wiLGkuVHlwZS5JMzIsMyksZS5WYih0aGlzLmV4dGVybmFsQXMpLGUuR2IoKSksbnVsbCE9PXRoaXMuaW50ZXJuYWxBcyYmdm9pZCAwIT09dGhpcy5pbnRlcm5hbEFzJiYoZS54YihcImludGVybmFsQXNcIixpLlR5cGUuSTMyLDQpLGUuVmIodGhpcy5pbnRlcm5hbEFzKSxlLkdiKCkpLG51bGwhPT10aGlzLnB1YmxpY0lwJiZ2b2lkIDAhPT10aGlzLnB1YmxpY0lwJiYoZS54YihcInB1YmxpY0lwXCIsaS5UeXBlLlNUUklORyw1KSxlLnFiKHRoaXMucHVibGljSXApLGUuR2IoKSksbnVsbCE9PXRoaXMucHJpdmF0ZUlwJiZ2b2lkIDAhPT10aGlzLnByaXZhdGVJcCYmKGUueGIoXCJwcml2YXRlSXBcIixpLlR5cGUuU1RSSU5HLDYpLGUucWIodGhpcy5wcml2YXRlSXApLGUuR2IoKSksZS5qYigpLGUuUWIoKX0saGl2ZS5zbmFwc2hvdHMuUGFydG5lcj1mdW5jdGlvbihlKXt0aGlzLmNvbm5JbmZvPW51bGwsdGhpcy50cmFmZmljPW51bGwsdGhpcy5tZXRyaWNzPW51bGwsdGhpcy5pblBhcnQ9bnVsbCx0aGlzLm91dFBhcnQ9bnVsbCx0aGlzLnVkcD1udWxsLGUmJih2b2lkIDAhPT1lLmNvbm5JbmZvJiZudWxsIT09ZS5jb25uSW5mbyYmKHRoaXMuY29ubkluZm89ZS5jb25uSW5mbyksdm9pZCAwIT09ZS50cmFmZmljJiZudWxsIT09ZS50cmFmZmljJiYodGhpcy50cmFmZmljPWUudHJhZmZpYyksdm9pZCAwIT09ZS5tZXRyaWNzJiZudWxsIT09ZS5tZXRyaWNzJiYodGhpcy5tZXRyaWNzPWUubWV0cmljcyksdm9pZCAwIT09ZS5pblBhcnQmJm51bGwhPT1lLmluUGFydCYmKHRoaXMuaW5QYXJ0PWUuaW5QYXJ0KSx2b2lkIDAhPT1lLm91dFBhcnQmJm51bGwhPT1lLm91dFBhcnQmJih0aGlzLm91dFBhcnQ9ZS5vdXRQYXJ0KSx2b2lkIDAhPT1lLnVkcCYmbnVsbCE9PWUudWRwJiYodGhpcy51ZHA9ZS51ZHApKX0saGl2ZS5zbmFwc2hvdHMuUGFydG5lci5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuUGFydG5lci5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihlKXtmb3IoZS5yXygpOzspe3ZhciB0PWUua2IoKSxyPSh0LmZuYW1lLHQuZnR5cGUpLG49dC5maWQ7aWYocj09aS5UeXBlLlNUT1ApYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTpyPT1pLlR5cGUuU1RSVUNUPyh0aGlzLmNvbm5JbmZvPW5ldyBoaXZlLnNuYXBzaG90cy5Db25uZWN0aXZpdHlJbmZvLHRoaXMuY29ubkluZm8ucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDI6cj09aS5UeXBlLlNUUlVDVD8odGhpcy50cmFmZmljPW5ldyBoaXZlLnNuYXBzaG90cy5QYXJ0bmVyVHJhZmZpYyx0aGlzLnRyYWZmaWMucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDM6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5tZXRyaWNzPW5ldyBoaXZlLnNuYXBzaG90cy5QYXJ0bmVyTWV0cmljcyx0aGlzLm1ldHJpY3MucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDQ6cj09aS5UeXBlLkJPT0w/dGhpcy5pblBhcnQ9ZS5wXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSA1OnI9PWkuVHlwZS5CT09MP3RoaXMub3V0UGFydD1lLnBfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDY6cj09aS5UeXBlLkJPT0w/dGhpcy51ZHA9ZS5wXygpLnZhbHVlOmUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LGhpdmUuc25hcHNob3RzLlBhcnRuZXIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJQYXJ0bmVyXCIpLG51bGwhPT10aGlzLmNvbm5JbmZvJiZ2b2lkIDAhPT10aGlzLmNvbm5JbmZvJiYoZS54YihcImNvbm5JbmZvXCIsaS5UeXBlLlNUUlVDVCwxKSx0aGlzLmNvbm5JbmZvLndyaXRlKGUpLGUuR2IoKSksbnVsbCE9PXRoaXMudHJhZmZpYyYmdm9pZCAwIT09dGhpcy50cmFmZmljJiYoZS54YihcInRyYWZmaWNcIixpLlR5cGUuU1RSVUNULDIpLHRoaXMudHJhZmZpYy53cml0ZShlKSxlLkdiKCkpLG51bGwhPT10aGlzLm1ldHJpY3MmJnZvaWQgMCE9PXRoaXMubWV0cmljcyYmKGUueGIoXCJtZXRyaWNzXCIsaS5UeXBlLlNUUlVDVCwzKSx0aGlzLm1ldHJpY3Mud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5pblBhcnQmJnZvaWQgMCE9PXRoaXMuaW5QYXJ0JiYoZS54YihcImluUGFydFwiLGkuVHlwZS5CT09MLDQpLGUuVkModGhpcy5pblBhcnQpLGUuR2IoKSksbnVsbCE9PXRoaXMub3V0UGFydCYmdm9pZCAwIT09dGhpcy5vdXRQYXJ0JiYoZS54YihcIm91dFBhcnRcIixpLlR5cGUuQk9PTCw1KSxlLlZDKHRoaXMub3V0UGFydCksZS5HYigpKSxudWxsIT09dGhpcy51ZHAmJnZvaWQgMCE9PXRoaXMudWRwJiYoZS54YihcInVkcFwiLGkuVHlwZS5CT09MLDYpLGUuVkModGhpcy51ZHApLGUuR2IoKSksZS5qYigpLGUuUWIoKX0saGl2ZS5zbmFwc2hvdHMuU3RyZWFtSW5mbz1mdW5jdGlvbihlKXt0aGlzLnVybD1udWxsLHRoaXMuc3RyZWFtVHlwZT1udWxsLHRoaXMuc3RyZWFtUHJvdG9jb2w9bnVsbCxlJiYodm9pZCAwIT09ZS51cmwmJm51bGwhPT1lLnVybCYmKHRoaXMudXJsPWUudXJsKSx2b2lkIDAhPT1lLnN0cmVhbVR5cGUmJm51bGwhPT1lLnN0cmVhbVR5cGUmJih0aGlzLnN0cmVhbVR5cGU9ZS5zdHJlYW1UeXBlKSx2b2lkIDAhPT1lLnN0cmVhbVByb3RvY29sJiZudWxsIT09ZS5zdHJlYW1Qcm90b2NvbCYmKHRoaXMuc3RyZWFtUHJvdG9jb2w9ZS5zdHJlYW1Qcm90b2NvbCkpfSxoaXZlLnNuYXBzaG90cy5TdHJlYW1JbmZvLnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5TdHJlYW1JbmZvLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5TVFJJTkc/dGhpcy51cmw9ZS5MYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyOnI9PWkuVHlwZS5JMzI/dGhpcy5zdHJlYW1UeXBlPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMzpyPT1pLlR5cGUuSTMyP3RoaXMuc3RyZWFtUHJvdG9jb2w9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LGhpdmUuc25hcHNob3RzLlN0cmVhbUluZm8ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJTdHJlYW1JbmZvXCIpLG51bGwhPT10aGlzLnVybCYmdm9pZCAwIT09dGhpcy51cmwmJihlLnhiKFwidXJsXCIsaS5UeXBlLlNUUklORywxKSxlLnFiKHRoaXMudXJsKSxlLkdiKCkpLG51bGwhPT10aGlzLnN0cmVhbVR5cGUmJnZvaWQgMCE9PXRoaXMuc3RyZWFtVHlwZSYmKGUueGIoXCJzdHJlYW1UeXBlXCIsaS5UeXBlLkkzMiwyKSxlLlZiKHRoaXMuc3RyZWFtVHlwZSksZS5HYigpKSxudWxsIT09dGhpcy5zdHJlYW1Qcm90b2NvbCYmdm9pZCAwIT09dGhpcy5zdHJlYW1Qcm90b2NvbCYmKGUueGIoXCJzdHJlYW1Qcm90b2NvbFwiLGkuVHlwZS5JMzIsMyksZS5WYih0aGlzLnN0cmVhbVByb3RvY29sKSxlLkdiKCkpLGUuamIoKSxlLlFiKCl9LGhpdmUuc25hcHNob3RzLkNsaWVudEluZm89ZnVuY3Rpb24oZSl7dGhpcy5jbGllbnRUeXBlPW51bGwsdGhpcy5tYWpvclZlcnNpb249bnVsbCx0aGlzLm1pbm9yVmVyc2lvbj1udWxsLHRoaXMucGF0Y2hWZXJzaW9uPW51bGwsZSYmKHZvaWQgMCE9PWUuY2xpZW50VHlwZSYmbnVsbCE9PWUuY2xpZW50VHlwZSYmKHRoaXMuY2xpZW50VHlwZT1lLmNsaWVudFR5cGUpLHZvaWQgMCE9PWUubWFqb3JWZXJzaW9uJiZudWxsIT09ZS5tYWpvclZlcnNpb24mJih0aGlzLm1ham9yVmVyc2lvbj1lLm1ham9yVmVyc2lvbiksdm9pZCAwIT09ZS5taW5vclZlcnNpb24mJm51bGwhPT1lLm1pbm9yVmVyc2lvbiYmKHRoaXMubWlub3JWZXJzaW9uPWUubWlub3JWZXJzaW9uKSx2b2lkIDAhPT1lLnBhdGNoVmVyc2lvbiYmbnVsbCE9PWUucGF0Y2hWZXJzaW9uJiYodGhpcy5wYXRjaFZlcnNpb249ZS5wYXRjaFZlcnNpb24pKX0saGl2ZS5zbmFwc2hvdHMuQ2xpZW50SW5mby5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuQ2xpZW50SW5mby5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihlKXtmb3IoZS5yXygpOzspe3ZhciB0PWUua2IoKSxyPSh0LmZuYW1lLHQuZnR5cGUpLG49dC5maWQ7aWYocj09aS5UeXBlLlNUT1ApYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTpyPT1pLlR5cGUuSTMyP3RoaXMuY2xpZW50VHlwZT1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI6cj09aS5UeXBlLkJZVEU/dGhpcy5tYWpvclZlcnNpb249ZS5kXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5CWVRFP3RoaXMubWlub3JWZXJzaW9uPWUuZF8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgNDpyPT1pLlR5cGUuSTE2P3RoaXMucGF0Y2hWZXJzaW9uPWUuZl8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2RlZmF1bHQ6ZS5NYihyKX1lLlViKCl9ZS5CYigpfSxoaXZlLnNuYXBzaG90cy5DbGllbnRJbmZvLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXtlLkhiKFwiQ2xpZW50SW5mb1wiKSxudWxsIT09dGhpcy5jbGllbnRUeXBlJiZ2b2lkIDAhPT10aGlzLmNsaWVudFR5cGUmJihlLnhiKFwiY2xpZW50VHlwZVwiLGkuVHlwZS5JMzIsMSksZS5WYih0aGlzLmNsaWVudFR5cGUpLGUuR2IoKSksbnVsbCE9PXRoaXMubWFqb3JWZXJzaW9uJiZ2b2lkIDAhPT10aGlzLm1ham9yVmVyc2lvbiYmKGUueGIoXCJtYWpvclZlcnNpb25cIixpLlR5cGUuQllURSwyKSxlLmpDKHRoaXMubWFqb3JWZXJzaW9uKSxlLkdiKCkpLG51bGwhPT10aGlzLm1pbm9yVmVyc2lvbiYmdm9pZCAwIT09dGhpcy5taW5vclZlcnNpb24mJihlLnhiKFwibWlub3JWZXJzaW9uXCIsaS5UeXBlLkJZVEUsMyksZS5qQyh0aGlzLm1pbm9yVmVyc2lvbiksZS5HYigpKSxudWxsIT09dGhpcy5wYXRjaFZlcnNpb24mJnZvaWQgMCE9PXRoaXMucGF0Y2hWZXJzaW9uJiYoZS54YihcInBhdGNoVmVyc2lvblwiLGkuVHlwZS5JMTYsNCksZS5RQyh0aGlzLnBhdGNoVmVyc2lvbiksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNuYXBzaG90cy5BZ2VudEluZm89ZnVuY3Rpb24oZSl7dGhpcy5maXJzdFRpZXJCaXRyYXRlcz1udWxsLHRoaXMuc2Vjb25kVGllckJpdHJhdGVzPW51bGwsZSYmKHZvaWQgMCE9PWUuZmlyc3RUaWVyQml0cmF0ZXMmJm51bGwhPT1lLmZpcnN0VGllckJpdHJhdGVzJiYodGhpcy5maXJzdFRpZXJCaXRyYXRlcz1lLmZpcnN0VGllckJpdHJhdGVzKSx2b2lkIDAhPT1lLnNlY29uZFRpZXJCaXRyYXRlcyYmbnVsbCE9PWUuc2Vjb25kVGllckJpdHJhdGVzJiYodGhpcy5zZWNvbmRUaWVyQml0cmF0ZXM9ZS5zZWNvbmRUaWVyQml0cmF0ZXMpKX0saGl2ZS5zbmFwc2hvdHMuQWdlbnRJbmZvLnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5BZ2VudEluZm8ucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6aWYocj09aS5UeXBlLlNFVCl7dmFyIHMsbz0wO3RoaXMuZmlyc3RUaWVyQml0cmF0ZXM9W107cz1lLnVfKCkscy5oXyxvPXMuc2l6ZTtmb3IodmFyIGE9MDthPG87KythKXt2YXIgaD1udWxsO2g9ZS5GYigpLnZhbHVlLHRoaXMuZmlyc3RUaWVyQml0cmF0ZXMucHVzaChoKX1lLmxfKCl9ZWxzZSBlLk1iKHIpO2JyZWFrO2Nhc2UgMjppZihyPT1pLlR5cGUuU0VUKXt2YXIgYyx1PTA7dGhpcy5zZWNvbmRUaWVyQml0cmF0ZXM9W107Yz1lLnVfKCksYy5oXyx1PWMuc2l6ZTtmb3IodmFyIGw9MDtsPHU7KytsKXt2YXIgcD1udWxsO3A9ZS5GYigpLnZhbHVlLHRoaXMuc2Vjb25kVGllckJpdHJhdGVzLnB1c2gocCl9ZS5sXygpfWVsc2UgZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zbmFwc2hvdHMuQWdlbnRJbmZvLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXtpZihlLkhiKFwiQWdlbnRJbmZvXCIpLG51bGwhPT10aGlzLmZpcnN0VGllckJpdHJhdGVzJiZ2b2lkIDAhPT10aGlzLmZpcnN0VGllckJpdHJhdGVzKXtlLnhiKFwiZmlyc3RUaWVyQml0cmF0ZXNcIixpLlR5cGUuU0VULDEpLGUucUMoaS5UeXBlLkkzMix0aGlzLmZpcnN0VGllckJpdHJhdGVzLmxlbmd0aCk7Zm9yKHZhciB0IGluIHRoaXMuZmlyc3RUaWVyQml0cmF0ZXMpdGhpcy5maXJzdFRpZXJCaXRyYXRlcy5oYXNPd25Qcm9wZXJ0eSh0KSYmKHQ9dGhpcy5maXJzdFRpZXJCaXRyYXRlc1t0XSxlLlZiKHQpKTtlLkdDKCksZS5HYigpfWlmKG51bGwhPT10aGlzLnNlY29uZFRpZXJCaXRyYXRlcyYmdm9pZCAwIT09dGhpcy5zZWNvbmRUaWVyQml0cmF0ZXMpe2UueGIoXCJzZWNvbmRUaWVyQml0cmF0ZXNcIixpLlR5cGUuU0VULDIpLGUucUMoaS5UeXBlLkkzMix0aGlzLnNlY29uZFRpZXJCaXRyYXRlcy5sZW5ndGgpO2Zvcih2YXIgciBpbiB0aGlzLnNlY29uZFRpZXJCaXRyYXRlcyl0aGlzLnNlY29uZFRpZXJCaXRyYXRlcy5oYXNPd25Qcm9wZXJ0eShyKSYmKHI9dGhpcy5zZWNvbmRUaWVyQml0cmF0ZXNbcl0sZS5WYihyKSk7ZS5HQygpLGUuR2IoKX1lLmpiKCksZS5RYigpfSxoaXZlLnNuYXBzaG90cy5UcmFmZmljS2V5PWZ1bmN0aW9uKGUpe3RoaXMuYml0cmF0ZT1udWxsLHRoaXMuQVM9bnVsbCx0aGlzLnBhcnRuZXJHdWlkPW51bGwsZSYmKHZvaWQgMCE9PWUuYml0cmF0ZSYmbnVsbCE9PWUuYml0cmF0ZSYmKHRoaXMuYml0cmF0ZT1lLmJpdHJhdGUpLHZvaWQgMCE9PWUuQVMmJm51bGwhPT1lLkFTJiYodGhpcy5BUz1lLkFTKSx2b2lkIDAhPT1lLnBhcnRuZXJHdWlkJiZudWxsIT09ZS5wYXJ0bmVyR3VpZCYmKHRoaXMucGFydG5lckd1aWQ9ZS5wYXJ0bmVyR3VpZCkpfSxoaXZlLnNuYXBzaG90cy5UcmFmZmljS2V5LnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5UcmFmZmljS2V5LnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5JMzI/dGhpcy5iaXRyYXRlPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuSTMyP3RoaXMuQVM9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5TVFJJTkc/dGhpcy5wYXJ0bmVyR3VpZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zbmFwc2hvdHMuVHJhZmZpY0tleS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7ZS5IYihcIlRyYWZmaWNLZXlcIiksbnVsbCE9PXRoaXMuYml0cmF0ZSYmdm9pZCAwIT09dGhpcy5iaXRyYXRlJiYoZS54YihcImJpdHJhdGVcIixpLlR5cGUuSTMyLDEpLGUuVmIodGhpcy5iaXRyYXRlKSxlLkdiKCkpLG51bGwhPT10aGlzLkFTJiZ2b2lkIDAhPT10aGlzLkFTJiYoZS54YihcIkFTXCIsaS5UeXBlLkkzMiwyKSxlLlZiKHRoaXMuQVMpLGUuR2IoKSksbnVsbCE9PXRoaXMucGFydG5lckd1aWQmJnZvaWQgMCE9PXRoaXMucGFydG5lckd1aWQmJihlLnhiKFwicGFydG5lckd1aWRcIixpLlR5cGUuU1RSSU5HLDMpLGUucWIodGhpcy5wYXJ0bmVyR3VpZCksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyS2V5PWZ1bmN0aW9uKGUpe3RoaXMuYml0cmF0ZT1udWxsLHRoaXMuQVM9bnVsbCx0aGlzLnBhcnRuZXJHdWlkPW51bGwsZSYmKHZvaWQgMCE9PWUuYml0cmF0ZSYmbnVsbCE9PWUuYml0cmF0ZSYmKHRoaXMuYml0cmF0ZT1lLmJpdHJhdGUpLHZvaWQgMCE9PWUuQVMmJm51bGwhPT1lLkFTJiYodGhpcy5BUz1lLkFTKSx2b2lkIDAhPT1lLnBhcnRuZXJHdWlkJiZudWxsIT09ZS5wYXJ0bmVyR3VpZCYmKHRoaXMucGFydG5lckd1aWQ9ZS5wYXJ0bmVyR3VpZCkpfSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyS2V5LnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5QYXJ0bmVyS2V5LnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5JMzI/dGhpcy5iaXRyYXRlPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuSTMyP3RoaXMuQVM9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5TVFJJTkc/dGhpcy5wYXJ0bmVyR3VpZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zbmFwc2hvdHMuUGFydG5lcktleS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7ZS5IYihcIlBhcnRuZXJLZXlcIiksbnVsbCE9PXRoaXMuYml0cmF0ZSYmdm9pZCAwIT09dGhpcy5iaXRyYXRlJiYoZS54YihcImJpdHJhdGVcIixpLlR5cGUuSTMyLDEpLGUuVmIodGhpcy5iaXRyYXRlKSxlLkdiKCkpLG51bGwhPT10aGlzLkFTJiZ2b2lkIDAhPT10aGlzLkFTJiYoZS54YihcIkFTXCIsaS5UeXBlLkkzMiwyKSxlLlZiKHRoaXMuQVMpLGUuR2IoKSksbnVsbCE9PXRoaXMucGFydG5lckd1aWQmJnZvaWQgMCE9PXRoaXMucGFydG5lckd1aWQmJihlLnhiKFwicGFydG5lckd1aWRcIixpLlR5cGUuU1RSSU5HLDMpLGUucWIodGhpcy5wYXJ0bmVyR3VpZCksZS5HYigpKSxlLmpiKCksZS5RYigpfSxoaXZlLnNuYXBzaG90cy5QbGF5ZXI9ZnVuY3Rpb24oZSl7dGhpcy5idWZmZXJpbmdOPW51bGwsdGhpcy5idWZmZXJpbmdNcz1udWxsLHRoaXMuaW5pdEJ1ZmZlcmluZ049bnVsbCx0aGlzLmluaXRCdWZmZXJpbmdNcz1udWxsLHRoaXMuc2Vla0J1ZmZlcmluZ049bnVsbCx0aGlzLnNlZWtCdWZmZXJpbmdNcz1udWxsLHRoaXMucGxheWVyQnVmZmVyTXM9bnVsbCxlJiYodm9pZCAwIT09ZS5idWZmZXJpbmdOJiZudWxsIT09ZS5idWZmZXJpbmdOJiYodGhpcy5idWZmZXJpbmdOPWUuYnVmZmVyaW5nTiksdm9pZCAwIT09ZS5idWZmZXJpbmdNcyYmbnVsbCE9PWUuYnVmZmVyaW5nTXMmJih0aGlzLmJ1ZmZlcmluZ01zPWUuYnVmZmVyaW5nTXMpLHZvaWQgMCE9PWUuaW5pdEJ1ZmZlcmluZ04mJm51bGwhPT1lLmluaXRCdWZmZXJpbmdOJiYodGhpcy5pbml0QnVmZmVyaW5nTj1lLmluaXRCdWZmZXJpbmdOKSx2b2lkIDAhPT1lLmluaXRCdWZmZXJpbmdNcyYmbnVsbCE9PWUuaW5pdEJ1ZmZlcmluZ01zJiYodGhpcy5pbml0QnVmZmVyaW5nTXM9ZS5pbml0QnVmZmVyaW5nTXMpLHZvaWQgMCE9PWUuc2Vla0J1ZmZlcmluZ04mJm51bGwhPT1lLnNlZWtCdWZmZXJpbmdOJiYodGhpcy5zZWVrQnVmZmVyaW5nTj1lLnNlZWtCdWZmZXJpbmdOKSx2b2lkIDAhPT1lLnNlZWtCdWZmZXJpbmdNcyYmbnVsbCE9PWUuc2Vla0J1ZmZlcmluZ01zJiYodGhpcy5zZWVrQnVmZmVyaW5nTXM9ZS5zZWVrQnVmZmVyaW5nTXMpLHZvaWQgMCE9PWUucGxheWVyQnVmZmVyTXMmJm51bGwhPT1lLnBsYXllckJ1ZmZlck1zJiYodGhpcy5wbGF5ZXJCdWZmZXJNcz1lLnBsYXllckJ1ZmZlck1zKSl9LGhpdmUuc25hcHNob3RzLlBsYXllci5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuUGxheWVyLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5JMTY/dGhpcy5idWZmZXJpbmdOPWUuZl8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuSTMyP3RoaXMuYnVmZmVyaW5nTXM9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5JMTY/dGhpcy5pbml0QnVmZmVyaW5nTj1lLmZfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDQ6cj09aS5UeXBlLkkzMj90aGlzLmluaXRCdWZmZXJpbmdNcz1lLkZiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDU6cj09aS5UeXBlLkkxNj90aGlzLnNlZWtCdWZmZXJpbmdOPWUuZl8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgNjpyPT1pLlR5cGUuSTMyP3RoaXMuc2Vla0J1ZmZlcmluZ01zPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMzY6cj09aS5UeXBlLkkzMj90aGlzLnBsYXllckJ1ZmZlck1zPWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2RlZmF1bHQ6ZS5NYihyKX1lLlViKCl9ZS5CYigpfSxoaXZlLnNuYXBzaG90cy5QbGF5ZXIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJQbGF5ZXJcIiksbnVsbCE9PXRoaXMuYnVmZmVyaW5nTiYmdm9pZCAwIT09dGhpcy5idWZmZXJpbmdOJiYoZS54YihcImJ1ZmZlcmluZ05cIixpLlR5cGUuSTE2LDEpLGUuUUModGhpcy5idWZmZXJpbmdOKSxlLkdiKCkpLG51bGwhPT10aGlzLmJ1ZmZlcmluZ01zJiZ2b2lkIDAhPT10aGlzLmJ1ZmZlcmluZ01zJiYoZS54YihcImJ1ZmZlcmluZ01zXCIsaS5UeXBlLkkzMiwyKSxlLlZiKHRoaXMuYnVmZmVyaW5nTXMpLGUuR2IoKSksbnVsbCE9PXRoaXMuaW5pdEJ1ZmZlcmluZ04mJnZvaWQgMCE9PXRoaXMuaW5pdEJ1ZmZlcmluZ04mJihlLnhiKFwiaW5pdEJ1ZmZlcmluZ05cIixpLlR5cGUuSTE2LDMpLGUuUUModGhpcy5pbml0QnVmZmVyaW5nTiksZS5HYigpKSxudWxsIT09dGhpcy5pbml0QnVmZmVyaW5nTXMmJnZvaWQgMCE9PXRoaXMuaW5pdEJ1ZmZlcmluZ01zJiYoZS54YihcImluaXRCdWZmZXJpbmdNc1wiLGkuVHlwZS5JMzIsNCksZS5WYih0aGlzLmluaXRCdWZmZXJpbmdNcyksZS5HYigpKSxudWxsIT09dGhpcy5zZWVrQnVmZmVyaW5nTiYmdm9pZCAwIT09dGhpcy5zZWVrQnVmZmVyaW5nTiYmKGUueGIoXCJzZWVrQnVmZmVyaW5nTlwiLGkuVHlwZS5JMTYsNSksZS5RQyh0aGlzLnNlZWtCdWZmZXJpbmdOKSxlLkdiKCkpLG51bGwhPT10aGlzLnNlZWtCdWZmZXJpbmdNcyYmdm9pZCAwIT09dGhpcy5zZWVrQnVmZmVyaW5nTXMmJihlLnhiKFwic2Vla0J1ZmZlcmluZ01zXCIsaS5UeXBlLkkzMiw2KSxlLlZiKHRoaXMuc2Vla0J1ZmZlcmluZ01zKSxlLkdiKCkpLG51bGwhPT10aGlzLnBsYXllckJ1ZmZlck1zJiZ2b2lkIDAhPT10aGlzLnBsYXllckJ1ZmZlck1zJiYoZS54YihcInBsYXllckJ1ZmZlck1zXCIsaS5UeXBlLkkzMiwzNiksZS5WYih0aGlzLnBsYXllckJ1ZmZlck1zKSxlLkdiKCkpLGUuamIoKSxlLlFiKCl9LGhpdmUuc25hcHNob3RzLlBLPWZ1bmN0aW9uKGUpe3RoaXMuX1E9bnVsbCx0aGlzLmNvdW50PW51bGwsZSYmKHZvaWQgMCE9PWUuX1EmJm51bGwhPT1lLl9RJiYodGhpcy5fUT1lLl9RKSx2b2lkIDAhPT1lLmNvdW50JiZudWxsIT09ZS5jb3VudCYmKHRoaXMuY291bnQ9ZS5jb3VudCkpfSxoaXZlLnNuYXBzaG90cy5QSy5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuUEsucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLkkxNj90aGlzLl9RPWUuZl8oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuSTMyP3RoaXMuY291bnQ9ZS5GYigpLnZhbHVlOmUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LGhpdmUuc25hcHNob3RzLlBLLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXtlLkhiKFwiUmVzcG9uc2VJbmZvXCIpLG51bGwhPT10aGlzLl9RJiZ2b2lkIDAhPT10aGlzLl9RJiYoZS54YihcInN0YXR1c0NvZGVcIixpLlR5cGUuSTE2LDEpLGUuUUModGhpcy5fUSksZS5HYigpKSxudWxsIT09dGhpcy5jb3VudCYmdm9pZCAwIT09dGhpcy5jb3VudCYmKGUueGIoXCJjb3VudFwiLGkuVHlwZS5JMzIsMiksZS5WYih0aGlzLmNvdW50KSxlLkdiKCkpLGUuamIoKSxlLlFiKCl9LGhpdmUuc25hcHNob3RzLkFLPWZ1bmN0aW9uKGUpe3RoaXMuc291cmNlPW51bGwsZSYmdm9pZCAwIT09ZS5zb3VyY2UmJm51bGwhPT1lLnNvdXJjZSYmKHRoaXMuc291cmNlPWkuT0soZS5zb3VyY2UsW2hpdmUuc25hcHNob3RzLlBLXSkpfSxoaXZlLnNuYXBzaG90cy5BSy5wcm90b3R5cGU9e30saGl2ZS5zbmFwc2hvdHMuQUsucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6aWYocj09aS5UeXBlLkxJU1Qpe3ZhciBzLG89MDt0aGlzLnNvdXJjZT1bXTtzPWUuYV8oKSxzLmhfLG89cy5zaXplO2Zvcih2YXIgYT0wO2E8bzsrK2Epe3ZhciBoPW51bGw7aD1uZXcgaGl2ZS5zbmFwc2hvdHMuUEssaC5yZWFkKGUpLHRoaXMuc291cmNlLnB1c2goaCl9ZS5jXygpfWVsc2UgZS5NYihyKTticmVhaztjYXNlIDA6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0saGl2ZS5zbmFwc2hvdHMuQUsucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2lmKGUuSGIoXCJTZXJ2aWNlUmVzcG9uc2VJbmZvXCIpLG51bGwhPT10aGlzLnNvdXJjZSYmdm9pZCAwIT09dGhpcy5zb3VyY2Upe2UueGIoXCJzb3VyY2VcIixpLlR5cGUuTElTVCwxKSxlLkhDKGkuVHlwZS5TVFJVQ1QsdGhpcy5zb3VyY2UubGVuZ3RoKTtmb3IodmFyIHQgaW4gdGhpcy5zb3VyY2UpdGhpcy5zb3VyY2UuaGFzT3duUHJvcGVydHkodCkmJih0PXRoaXMuc291cmNlW3RdLHQud3JpdGUoZSkpO2UueEMoKSxlLkdiKCl9ZS5qYigpLGUuUWIoKX0saGl2ZS5zbmFwc2hvdHMuTWV0cmljU25hcHNob3Q9ZnVuY3Rpb24oZSl7dGhpcy50aW1lc3RhbXA9bnVsbCx0aGlzLmd1aWQ9bnVsbCx0aGlzLmV2ZW50SWQ9bnVsbCx0aGlzLnN0cmVhbUluZm89bnVsbCx0aGlzLm1ldHJpY3M9bnVsbCx0aGlzLnRyYWZmaWM9bnVsbCx0aGlzLnNuYXBzaG90SW5mbz1udWxsLHRoaXMuYWdlbnRJbmZvPW51bGwsdGhpcy5jb25uSW5mbz1udWxsLHRoaXMucGFydG5lcnM9bnVsbCx0aGlzLnBsYXllcj1udWxsLHRoaXMuY2xpZW50PW51bGwsdGhpcy5zZXNzaW9uSWQ9bnVsbCx0aGlzLk5LPW51bGwsdGhpcy5hQj1udWxsLHRoaXMuREs9bnVsbCxlJiYodm9pZCAwIT09ZS50aW1lc3RhbXAmJm51bGwhPT1lLnRpbWVzdGFtcCYmKHRoaXMudGltZXN0YW1wPWUudGltZXN0YW1wKSx2b2lkIDAhPT1lLmd1aWQmJm51bGwhPT1lLmd1aWQmJih0aGlzLmd1aWQ9ZS5ndWlkKSx2b2lkIDAhPT1lLmV2ZW50SWQmJm51bGwhPT1lLmV2ZW50SWQmJih0aGlzLmV2ZW50SWQ9ZS5ldmVudElkKSx2b2lkIDAhPT1lLnN0cmVhbUluZm8mJm51bGwhPT1lLnN0cmVhbUluZm8mJih0aGlzLnN0cmVhbUluZm89ZS5zdHJlYW1JbmZvKSx2b2lkIDAhPT1lLm1ldHJpY3MmJm51bGwhPT1lLm1ldHJpY3MmJih0aGlzLm1ldHJpY3M9ZS5tZXRyaWNzKSx2b2lkIDAhPT1lLnRyYWZmaWMmJm51bGwhPT1lLnRyYWZmaWMmJih0aGlzLnRyYWZmaWM9ZS50cmFmZmljKSx2b2lkIDAhPT1lLnNuYXBzaG90SW5mbyYmbnVsbCE9PWUuc25hcHNob3RJbmZvJiYodGhpcy5zbmFwc2hvdEluZm89ZS5zbmFwc2hvdEluZm8pLHZvaWQgMCE9PWUuYWdlbnRJbmZvJiZudWxsIT09ZS5hZ2VudEluZm8mJih0aGlzLmFnZW50SW5mbz1lLmFnZW50SW5mbyksdm9pZCAwIT09ZS5jb25uSW5mbyYmbnVsbCE9PWUuY29ubkluZm8mJih0aGlzLmNvbm5JbmZvPWUuY29ubkluZm8pLHZvaWQgMCE9PWUucGFydG5lcnMmJm51bGwhPT1lLnBhcnRuZXJzJiYodGhpcy5wYXJ0bmVycz1lLnBhcnRuZXJzKSx2b2lkIDAhPT1lLnBsYXllciYmbnVsbCE9PWUucGxheWVyJiYodGhpcy5wbGF5ZXI9ZS5wbGF5ZXIpLHZvaWQgMCE9PWUuY2xpZW50JiZudWxsIT09ZS5jbGllbnQmJih0aGlzLmNsaWVudD1lLmNsaWVudCksdm9pZCAwIT09ZS5zZXNzaW9uSWQmJm51bGwhPT1lLnNlc3Npb25JZCYmKHRoaXMuc2Vzc2lvbklkPWUuc2Vzc2lvbklkKSx2b2lkIDAhPT1lLk5LJiZudWxsIT09ZS5OSyYmKHRoaXMuTks9ZS5OSyksdm9pZCAwIT09ZS5hQiYmbnVsbCE9PWUuYUImJih0aGlzLmFCPWUuYUIpLHZvaWQgMCE9PWUuREsmJm51bGwhPT1lLkRLJiYodGhpcy5ESz1lLkRLKSl9LGhpdmUuc25hcHNob3RzLk1ldHJpY1NuYXBzaG90LnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5NZXRyaWNTbmFwc2hvdC5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihlKXtmb3IoZS5yXygpOzspe3ZhciB0PWUua2IoKSxyPSh0LmZuYW1lLHQuZnR5cGUpLG49dC5maWQ7aWYocj09aS5UeXBlLlNUT1ApYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTpyPT1pLlR5cGUuSTY0P3RoaXMudGltZXN0YW1wPWUuZ18oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuU1RSSU5HP3RoaXMuZ3VpZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5ldmVudElkPW5ldyBFdmVudElkLHRoaXMuZXZlbnRJZC5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgNDpyPT1pLlR5cGUuU1RSVUNUPyh0aGlzLnN0cmVhbUluZm89bmV3IGhpdmUuc25hcHNob3RzLlN0cmVhbUluZm8sdGhpcy5zdHJlYW1JbmZvLnJlYWQoZSkpOmUuTWIocik7YnJlYWs7Y2FzZSA1OnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMubWV0cmljcz1uZXcgaGl2ZS5zbmFwc2hvdHMuTWV0cmljcyx0aGlzLm1ldHJpY3MucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDY6aWYocj09aS5UeXBlLk1BUCl7dmFyIHMsbz0wO3RoaXMudHJhZmZpYz17fTtzPWUuaV8oKSxzLm5fLHMuc18sbz1zLnNpemU7Zm9yKHZhciBhPTA7YTxvOysrYSl7YT4wJiZlLkpDLmxlbmd0aD5lLnpiW2UuemIubGVuZ3RoLTFdKzEmJmUuSkMucG9wKCk7dmFyIGg9bnVsbCxjPW51bGw7aD1uZXcgaGl2ZS5zbmFwc2hvdHMuVHJhZmZpY0tleSxoLnJlYWQoZSksYz1uZXcgaGl2ZS5zbmFwc2hvdHMuVHJhZmZpYyxjLnJlYWQoZSksdGhpcy50cmFmZmljW2hdPWN9ZS5vXygpfWVsc2UgZS5NYihyKTticmVhaztjYXNlIDc6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5zbmFwc2hvdEluZm89bmV3IFNuYXBzaG90SW5mbyx0aGlzLnNuYXBzaG90SW5mby5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgODpyPT1pLlR5cGUuU1RSVUNUPyh0aGlzLmFnZW50SW5mbz1uZXcgaGl2ZS5zbmFwc2hvdHMuQWdlbnRJbmZvLHRoaXMuYWdlbnRJbmZvLnJlYWQoZSkpOmUuTWIocik7YnJlYWs7Y2FzZSA5OnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMuY29ubkluZm89bmV3IGhpdmUuc25hcHNob3RzLkNvbm5lY3Rpdml0eUluZm8sdGhpcy5jb25uSW5mby5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgMTA6aWYocj09aS5UeXBlLk1BUCl7dmFyIHUsbD0wO3RoaXMucGFydG5lcnM9e307dT1lLmlfKCksdS5uXyx1LnNfLGw9dS5zaXplO2Zvcih2YXIgcD0wO3A8bDsrK3Ape3A+MCYmZS5KQy5sZW5ndGg+ZS56YltlLnpiLmxlbmd0aC0xXSsxJiZlLkpDLnBvcCgpO3ZhciBkPW51bGwsZj1udWxsO2Q9bmV3IGhpdmUuc25hcHNob3RzLlBhcnRuZXJLZXksZC5yZWFkKGUpLGY9bmV3IGhpdmUuc25hcHNob3RzLlBhcnRuZXIsZi5yZWFkKGUpLHRoaXMucGFydG5lcnNbZF09Zn1lLm9fKCl9ZWxzZSBlLk1iKHIpO2JyZWFrO2Nhc2UgMTE6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5wbGF5ZXI9bmV3IGhpdmUuc25hcHNob3RzLlBsYXllcix0aGlzLnBsYXllci5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgMTI6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5jbGllbnQ9bmV3IGhpdmUuc25hcHNob3RzLkNsaWVudEluZm8sdGhpcy5jbGllbnQucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDEzOnI9PWkuVHlwZS5TVFJJTkc/dGhpcy5zZXNzaW9uSWQ9ZS5MYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAxNDpyPT1pLlR5cGUuU1RSVUNUPyh0aGlzLk5LPW5ldyBoaXZlLnNuYXBzaG90cy5BSyx0aGlzLk5LLnJlYWQoZSkpOmUuTWIocik7YnJlYWs7Y2FzZSAxNTpyPT1pLlR5cGUuU1RSVUNUPyh0aGlzLmFCPW5ldyBUZXN0SW5mbyx0aGlzLmFCLnJlYWQoZSkpOmUuTWIocik7YnJlYWs7Y2FzZSAxNjpyPT1pLlR5cGUuSTY0P3RoaXMuREs9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LGhpdmUuc25hcHNob3RzLk1ldHJpY1NuYXBzaG90LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXtpZihlLkhiKFwiTWV0cmljU25hcHNob3RcIiksbnVsbCE9PXRoaXMudGltZXN0YW1wJiZ2b2lkIDAhPT10aGlzLnRpbWVzdGFtcCYmKGUueGIoXCJ0aW1lc3RhbXBcIixpLlR5cGUuSTY0LDEpLGUuS0ModGhpcy50aW1lc3RhbXApLGUuR2IoKSksbnVsbCE9PXRoaXMuZ3VpZCYmdm9pZCAwIT09dGhpcy5ndWlkJiYoZS54YihcImd1aWRcIixpLlR5cGUuU1RSSU5HLDIpLGUucWIodGhpcy5ndWlkKSxlLkdiKCkpLG51bGwhPT10aGlzLmV2ZW50SWQmJnZvaWQgMCE9PXRoaXMuZXZlbnRJZCYmKGUueGIoXCJldmVudElkXCIsaS5UeXBlLlNUUlVDVCwzKSx0aGlzLmV2ZW50SWQud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5zdHJlYW1JbmZvJiZ2b2lkIDAhPT10aGlzLnN0cmVhbUluZm8mJihlLnhiKFwic3RyZWFtSW5mb1wiLGkuVHlwZS5TVFJVQ1QsNCksdGhpcy5zdHJlYW1JbmZvLndyaXRlKGUpLGUuR2IoKSksbnVsbCE9PXRoaXMubWV0cmljcyYmdm9pZCAwIT09dGhpcy5tZXRyaWNzJiYoZS54YihcIm1ldHJpY3NcIixpLlR5cGUuU1RSVUNULDUpLHRoaXMubWV0cmljcy53cml0ZShlKSxlLkdiKCkpLG51bGwhPT10aGlzLnRyYWZmaWMmJnZvaWQgMCE9PXRoaXMudHJhZmZpYyl7ZS54YihcInRyYWZmaWNcIixpLlR5cGUuTUFQLDYpLGUuVUMoaS5UeXBlLlNUUlVDVCxpLlR5cGUuU1RSVUNULGkuRWIodGhpcy50cmFmZmljKSk7Zm9yKHZhciB0IGluIHRoaXMudHJhZmZpYylpZih0aGlzLnRyYWZmaWMuaGFzT3duUHJvcGVydHkodCkpe3ZhciByPXRoaXMudHJhZmZpY1t0XTtyLmtleS53cml0ZShlKSxyLnZhbHVlLndyaXRlKGUpfWUuQkMoKSxlLkdiKCl9aWYobnVsbCE9PXRoaXMuc25hcHNob3RJbmZvJiZ2b2lkIDAhPT10aGlzLnNuYXBzaG90SW5mbyYmKGUueGIoXCJzbmFwc2hvdEluZm9cIixpLlR5cGUuU1RSVUNULDcpLHRoaXMuc25hcHNob3RJbmZvLndyaXRlKGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuYWdlbnRJbmZvJiZ2b2lkIDAhPT10aGlzLmFnZW50SW5mbyYmKGUueGIoXCJhZ2VudEluZm9cIixpLlR5cGUuU1RSVUNULDgpLHRoaXMuYWdlbnRJbmZvLndyaXRlKGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuY29ubkluZm8mJnZvaWQgMCE9PXRoaXMuY29ubkluZm8mJihlLnhiKFwiY29ubkluZm9cIixpLlR5cGUuU1RSVUNULDkpLHRoaXMuY29ubkluZm8ud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5wYXJ0bmVycyYmdm9pZCAwIT09dGhpcy5wYXJ0bmVycyl7ZS54YihcInBhcnRuZXJzXCIsaS5UeXBlLk1BUCwxMCksZS5VQyhpLlR5cGUuU1RSVUNULGkuVHlwZS5TVFJVQ1QsaS5FYih0aGlzLnBhcnRuZXJzKSk7Zm9yKHZhciBuIGluIHRoaXMucGFydG5lcnMpaWYodGhpcy5wYXJ0bmVycy5oYXNPd25Qcm9wZXJ0eShuKSl7dmFyIHM9dGhpcy5wYXJ0bmVyc1tuXTtzLmtleS53cml0ZShlKSxzLnZhbHVlLndyaXRlKGUpfWUuQkMoKSxlLkdiKCl9bnVsbCE9PXRoaXMucGxheWVyJiZ2b2lkIDAhPT10aGlzLnBsYXllciYmKGUueGIoXCJwbGF5ZXJcIixpLlR5cGUuU1RSVUNULDExKSx0aGlzLnBsYXllci53cml0ZShlKSxlLkdiKCkpLG51bGwhPT10aGlzLmNsaWVudCYmdm9pZCAwIT09dGhpcy5jbGllbnQmJihlLnhiKFwiY2xpZW50XCIsaS5UeXBlLlNUUlVDVCwxMiksdGhpcy5jbGllbnQud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5zZXNzaW9uSWQmJnZvaWQgMCE9PXRoaXMuc2Vzc2lvbklkJiYoZS54YihcInNlc3Npb25JZFwiLGkuVHlwZS5TVFJJTkcsMTMpLGUucWIodGhpcy5zZXNzaW9uSWQpLGUuR2IoKSksbnVsbCE9PXRoaXMuTksmJnZvaWQgMCE9PXRoaXMuTksmJihlLnhiKFwicmVzcG9uc2VJbmZvXCIsaS5UeXBlLlNUUlVDVCwxNCksdGhpcy5OSy53cml0ZShlKSxlLkdiKCkpLG51bGwhPT10aGlzLmFCJiZ2b2lkIDAhPT10aGlzLmFCJiYoZS54YihcInRlc3RJbmZvXCIsaS5UeXBlLlNUUlVDVCwxNSksdGhpcy5hQi53cml0ZShlKSxlLkdiKCkpLG51bGwhPT10aGlzLkRLJiZ2b2lkIDAhPT10aGlzLkRLJiYoZS54YihcImNsaWVudElkXCIsaS5UeXBlLkk2NCwxNiksZS5LQyh0aGlzLkRLKSxlLkdiKCkpLGUuamIoKSxlLlFiKCl9LGhpdmUuc25hcHNob3RzLkpzb25NZXRyaWNTbmFwc2hvdD1mdW5jdGlvbihlKXt0aGlzLnRpbWVzdGFtcD1udWxsLHRoaXMuZ3VpZD1udWxsLHRoaXMuZXZlbnRJZD1udWxsLHRoaXMuc3RyZWFtSW5mbz1udWxsLHRoaXMubWV0cmljcz1udWxsLHRoaXMudHJhZmZpYz1udWxsLHRoaXMuc25hcHNob3RJbmZvPW51bGwsdGhpcy5hZ2VudEluZm89bnVsbCx0aGlzLmNvbm5JbmZvPW51bGwsdGhpcy5wYXJ0bmVycz1udWxsLHRoaXMucGxheWVyPW51bGwsdGhpcy5jbGllbnQ9bnVsbCx0aGlzLnNlc3Npb25JZD1udWxsLHRoaXMuTks9bnVsbCx0aGlzLmFCPW51bGwsdGhpcy5ESz1udWxsLGUmJih2b2lkIDAhPT1lLnRpbWVzdGFtcCYmbnVsbCE9PWUudGltZXN0YW1wJiYodGhpcy50aW1lc3RhbXA9ZS50aW1lc3RhbXApLHZvaWQgMCE9PWUuZ3VpZCYmbnVsbCE9PWUuZ3VpZCYmKHRoaXMuZ3VpZD1lLmd1aWQpLHZvaWQgMCE9PWUuZXZlbnRJZCYmbnVsbCE9PWUuZXZlbnRJZCYmKHRoaXMuZXZlbnRJZD1lLmV2ZW50SWQpLHZvaWQgMCE9PWUuc3RyZWFtSW5mbyYmbnVsbCE9PWUuc3RyZWFtSW5mbyYmKHRoaXMuc3RyZWFtSW5mbz1lLnN0cmVhbUluZm8pLHZvaWQgMCE9PWUubWV0cmljcyYmbnVsbCE9PWUubWV0cmljcyYmKHRoaXMubWV0cmljcz1lLm1ldHJpY3MpLHZvaWQgMCE9PWUudHJhZmZpYyYmbnVsbCE9PWUudHJhZmZpYyYmKHRoaXMudHJhZmZpYz1lLnRyYWZmaWMpLHZvaWQgMCE9PWUuc25hcHNob3RJbmZvJiZudWxsIT09ZS5zbmFwc2hvdEluZm8mJih0aGlzLnNuYXBzaG90SW5mbz1lLnNuYXBzaG90SW5mbyksdm9pZCAwIT09ZS5hZ2VudEluZm8mJm51bGwhPT1lLmFnZW50SW5mbyYmKHRoaXMuYWdlbnRJbmZvPWUuYWdlbnRJbmZvKSx2b2lkIDAhPT1lLmNvbm5JbmZvJiZudWxsIT09ZS5jb25uSW5mbyYmKHRoaXMuY29ubkluZm89ZS5jb25uSW5mbyksdm9pZCAwIT09ZS5wYXJ0bmVycyYmbnVsbCE9PWUucGFydG5lcnMmJih0aGlzLnBhcnRuZXJzPWUucGFydG5lcnMpLHZvaWQgMCE9PWUucGxheWVyJiZudWxsIT09ZS5wbGF5ZXImJih0aGlzLnBsYXllcj1lLnBsYXllciksdm9pZCAwIT09ZS5jbGllbnQmJm51bGwhPT1lLmNsaWVudCYmKHRoaXMuY2xpZW50PWUuY2xpZW50KSx2b2lkIDAhPT1lLnNlc3Npb25JZCYmbnVsbCE9PWUuc2Vzc2lvbklkJiYodGhpcy5zZXNzaW9uSWQ9ZS5zZXNzaW9uSWQpLHZvaWQgMCE9PWUuTksmJm51bGwhPT1lLk5LJiYodGhpcy5OSz1lLk5LKSx2b2lkIDAhPT1lLmFCJiZudWxsIT09ZS5hQiYmKHRoaXMuYUI9ZS5hQiksdm9pZCAwIT09ZS5ESyYmbnVsbCE9PWUuREsmJih0aGlzLkRLPWUuREspKX0saGl2ZS5zbmFwc2hvdHMuSnNvbk1ldHJpY1NuYXBzaG90LnByb3RvdHlwZT17fSxoaXZlLnNuYXBzaG90cy5Kc29uTWV0cmljU25hcHNob3QucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLkk2ND90aGlzLnRpbWVzdGFtcD1lLmdfKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDI6cj09aS5UeXBlLlNUUklORz90aGlzLmd1aWQ9ZS5MYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMuZXZlbnRJZD1uZXcgRXZlbnRJZCx0aGlzLmV2ZW50SWQucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDQ6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5zdHJlYW1JbmZvPW5ldyBoaXZlLnNuYXBzaG90cy5TdHJlYW1JbmZvLHRoaXMuc3RyZWFtSW5mby5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgNTpyPT1pLlR5cGUuU1RSVUNUPyh0aGlzLm1ldHJpY3M9bmV3IGhpdmUuc25hcHNob3RzLk1ldHJpY3MsdGhpcy5tZXRyaWNzLnJlYWQoZSkpOmUuTWIocik7YnJlYWs7Y2FzZSA2OmlmKHI9PWkuVHlwZS5NQVApe3ZhciBzLG89MDt0aGlzLnRyYWZmaWM9e307cz1lLmlfKCkscy5uXyxzLnNfLG89cy5zaXplO2Zvcih2YXIgYT0wO2E8bzsrK2Epe2E+MCYmZS5KQy5sZW5ndGg+ZS56YltlLnpiLmxlbmd0aC0xXSsxJiZlLkpDLnBvcCgpO3ZhciBoPW51bGwsYz1udWxsO2g9ZS5MYigpLnZhbHVlLGM9bmV3IGhpdmUuc25hcHNob3RzLlRyYWZmaWMsYy5yZWFkKGUpLHRoaXMudHJhZmZpY1toXT1jfWUub18oKX1lbHNlIGUuTWIocik7YnJlYWs7Y2FzZSA3OnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMuc25hcHNob3RJbmZvPW5ldyBTbmFwc2hvdEluZm8sdGhpcy5zbmFwc2hvdEluZm8ucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDg6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5hZ2VudEluZm89bmV3IGhpdmUuc25hcHNob3RzLkFnZW50SW5mbyx0aGlzLmFnZW50SW5mby5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgOTpyPT1pLlR5cGUuU1RSVUNUPyh0aGlzLmNvbm5JbmZvPW5ldyBoaXZlLnNuYXBzaG90cy5Db25uZWN0aXZpdHlJbmZvLHRoaXMuY29ubkluZm8ucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDEwOmlmKHI9PWkuVHlwZS5NQVApe3ZhciB1LGw9MDt0aGlzLnBhcnRuZXJzPXt9O3U9ZS5pXygpLHUubl8sdS5zXyxsPXUuc2l6ZTtmb3IodmFyIHA9MDtwPGw7KytwKXtwPjAmJmUuSkMubGVuZ3RoPmUuemJbZS56Yi5sZW5ndGgtMV0rMSYmZS5KQy5wb3AoKTt2YXIgZD1udWxsLGY9bnVsbDtkPWUuTGIoKS52YWx1ZSxmPW5ldyBoaXZlLnNuYXBzaG90cy5QYXJ0bmVyLGYucmVhZChlKSx0aGlzLnBhcnRuZXJzW2RdPWZ9ZS5vXygpfWVsc2UgZS5NYihyKTticmVhaztjYXNlIDExOnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMucGxheWVyPW5ldyBoaXZlLnNuYXBzaG90cy5QbGF5ZXIsdGhpcy5wbGF5ZXIucmVhZChlKSk6ZS5NYihyKTticmVhaztjYXNlIDEyOnI9PWkuVHlwZS5TVFJVQ1Q/KHRoaXMuY2xpZW50PW5ldyBoaXZlLnNuYXBzaG90cy5DbGllbnRJbmZvLHRoaXMuY2xpZW50LnJlYWQoZSkpOmUuTWIocik7YnJlYWs7Y2FzZSAxMzpyPT1pLlR5cGUuU1RSSU5HP3RoaXMuc2Vzc2lvbklkPWUuTGIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMTQ6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5OSz1uZXcgaGl2ZS5zbmFwc2hvdHMuQUssdGhpcy5OSy5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgMTU6cj09aS5UeXBlLlNUUlVDVD8odGhpcy5hQj1uZXcgVGVzdEluZm8sdGhpcy5hQi5yZWFkKGUpKTplLk1iKHIpO2JyZWFrO2Nhc2UgMTY6cj09aS5UeXBlLkk2ND90aGlzLkRLPWUuZ18oKS52YWx1ZTplLk1iKHIpO2JyZWFrO2RlZmF1bHQ6ZS5NYihyKX1lLlViKCl9ZS5CYigpfSxoaXZlLnNuYXBzaG90cy5Kc29uTWV0cmljU25hcHNob3QucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2lmKGUuSGIoXCJKc29uTWV0cmljU25hcHNob3RcIiksbnVsbCE9PXRoaXMudGltZXN0YW1wJiZ2b2lkIDAhPT10aGlzLnRpbWVzdGFtcCYmKGUueGIoXCJ0aW1lc3RhbXBcIixpLlR5cGUuSTY0LDEpLGUuS0ModGhpcy50aW1lc3RhbXApLGUuR2IoKSksbnVsbCE9PXRoaXMuZ3VpZCYmdm9pZCAwIT09dGhpcy5ndWlkJiYoZS54YihcImd1aWRcIixpLlR5cGUuU1RSSU5HLDIpLGUucWIodGhpcy5ndWlkKSxlLkdiKCkpLG51bGwhPT10aGlzLmV2ZW50SWQmJnZvaWQgMCE9PXRoaXMuZXZlbnRJZCYmKGUueGIoXCJldmVudElkXCIsaS5UeXBlLlNUUlVDVCwzKSx0aGlzLmV2ZW50SWQud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5zdHJlYW1JbmZvJiZ2b2lkIDAhPT10aGlzLnN0cmVhbUluZm8mJihlLnhiKFwic3RyZWFtSW5mb1wiLGkuVHlwZS5TVFJVQ1QsNCksdGhpcy5zdHJlYW1JbmZvLndyaXRlKGUpLGUuR2IoKSksbnVsbCE9PXRoaXMubWV0cmljcyYmdm9pZCAwIT09dGhpcy5tZXRyaWNzJiYoZS54YihcIm1ldHJpY3NcIixpLlR5cGUuU1RSVUNULDUpLHRoaXMubWV0cmljcy53cml0ZShlKSxlLkdiKCkpLG51bGwhPT10aGlzLnRyYWZmaWMmJnZvaWQgMCE9PXRoaXMudHJhZmZpYyl7ZS54YihcInRyYWZmaWNcIixpLlR5cGUuTUFQLDYpLGUuVUMoaS5UeXBlLlNUUklORyxpLlR5cGUuU1RSVUNULGkuRWIodGhpcy50cmFmZmljKSk7Zm9yKHZhciB0IGluIHRoaXMudHJhZmZpYylpZih0aGlzLnRyYWZmaWMuaGFzT3duUHJvcGVydHkodCkpe3ZhciByPXRoaXMudHJhZmZpY1t0XTtlLnFiKHQpLHIud3JpdGUoZSl9ZS5CQygpLGUuR2IoKX1pZihudWxsIT09dGhpcy5zbmFwc2hvdEluZm8mJnZvaWQgMCE9PXRoaXMuc25hcHNob3RJbmZvJiYoZS54YihcInNuYXBzaG90SW5mb1wiLGkuVHlwZS5TVFJVQ1QsNyksdGhpcy5zbmFwc2hvdEluZm8ud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5hZ2VudEluZm8mJnZvaWQgMCE9PXRoaXMuYWdlbnRJbmZvJiYoZS54YihcImFnZW50SW5mb1wiLGkuVHlwZS5TVFJVQ1QsOCksdGhpcy5hZ2VudEluZm8ud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5jb25uSW5mbyYmdm9pZCAwIT09dGhpcy5jb25uSW5mbyYmKGUueGIoXCJjb25uSW5mb1wiLGkuVHlwZS5TVFJVQ1QsOSksdGhpcy5jb25uSW5mby53cml0ZShlKSxlLkdiKCkpLG51bGwhPT10aGlzLnBhcnRuZXJzJiZ2b2lkIDAhPT10aGlzLnBhcnRuZXJzKXtlLnhiKFwicGFydG5lcnNcIixpLlR5cGUuTUFQLDEwKSxlLlVDKGkuVHlwZS5TVFJJTkcsaS5UeXBlLlNUUlVDVCxpLkViKHRoaXMucGFydG5lcnMpKTtmb3IodmFyIG4gaW4gdGhpcy5wYXJ0bmVycylpZih0aGlzLnBhcnRuZXJzLmhhc093blByb3BlcnR5KG4pKXt2YXIgcz10aGlzLnBhcnRuZXJzW25dO2UucWIobikscy53cml0ZShlKX1lLkJDKCksZS5HYigpfW51bGwhPT10aGlzLnBsYXllciYmdm9pZCAwIT09dGhpcy5wbGF5ZXImJihlLnhiKFwicGxheWVyXCIsaS5UeXBlLlNUUlVDVCwxMSksdGhpcy5wbGF5ZXIud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5jbGllbnQmJnZvaWQgMCE9PXRoaXMuY2xpZW50JiYoZS54YihcImNsaWVudFwiLGkuVHlwZS5TVFJVQ1QsMTIpLHRoaXMuY2xpZW50LndyaXRlKGUpLGUuR2IoKSksbnVsbCE9PXRoaXMuc2Vzc2lvbklkJiZ2b2lkIDAhPT10aGlzLnNlc3Npb25JZCYmKGUueGIoXCJzZXNzaW9uSWRcIixpLlR5cGUuU1RSSU5HLDEzKSxlLnFiKHRoaXMuc2Vzc2lvbklkKSxlLkdiKCkpLG51bGwhPT10aGlzLk5LJiZ2b2lkIDAhPT10aGlzLk5LJiYoZS54YihcInJlc3BvbnNlSW5mb1wiLGkuVHlwZS5TVFJVQ1QsMTQpLHRoaXMuTksud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5hQiYmdm9pZCAwIT09dGhpcy5hQiYmKGUueGIoXCJ0ZXN0SW5mb1wiLGkuVHlwZS5TVFJVQ1QsMTUpLHRoaXMuYUIud3JpdGUoZSksZS5HYigpKSxudWxsIT09dGhpcy5ESyYmdm9pZCAwIT09dGhpcy5ESyYmKGUueGIoXCJjbGllbnRJZFwiLGkuVHlwZS5JNjQsMTYpLGUuS0ModGhpcy5ESyksZS5HYigpKSxlLmpiKCksZS5RYigpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXIoMzMpO1N0cmVhbVR5cGU9ezE6XCJMSVZFXCIsTElWRToxLDI6XCJWT0RcIixrSzoyfSxTdHJlYW1Qcm90b2NvbD17MTpcIkRBU0hcIixEQVNIOjEsMjpcIkhEU1wiLExLOjIsMzpcIkhMU1wiLGJxOjMsNDpcIlNTXCIsTUs6NH0sQ2xpZW50VHlwZT17MTpcIkpBVkFcIixGSzoxLDI6XCJTVEFUU19PTkxZXCIsd0I6MiwzOlwiSlNfRElSRUNUXCIsU0I6Myw0OlwiSlNfUFJPWFlcIixSQjo0fSxFdmVudElkPWZ1bmN0aW9uKGUpe3RoaXMucGFydG5lcklkPW51bGwsdGhpcy5jdXN0b21lcklkPW51bGwsdGhpcy5jb250ZW50SWQ9bnVsbCx0aGlzLnRhZ3M9bnVsbCxlJiYodm9pZCAwIT09ZS5wYXJ0bmVySWQmJm51bGwhPT1lLnBhcnRuZXJJZCYmKHRoaXMucGFydG5lcklkPWUucGFydG5lcklkKSx2b2lkIDAhPT1lLmN1c3RvbWVySWQmJm51bGwhPT1lLmN1c3RvbWVySWQmJih0aGlzLmN1c3RvbWVySWQ9ZS5jdXN0b21lcklkKSx2b2lkIDAhPT1lLmNvbnRlbnRJZCYmbnVsbCE9PWUuY29udGVudElkJiYodGhpcy5jb250ZW50SWQ9ZS5jb250ZW50SWQpLHZvaWQgMCE9PWUudGFncyYmbnVsbCE9PWUudGFncyYmKHRoaXMudGFncz1lLnRhZ3MpKX0sRXZlbnRJZC5wcm90b3R5cGU9e30sRXZlbnRJZC5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihlKXtmb3IoZS5yXygpOzspe3ZhciB0PWUua2IoKSxyPSh0LmZuYW1lLHQuZnR5cGUpLG49dC5maWQ7aWYocj09aS5UeXBlLlNUT1ApYnJlYWs7c3dpdGNoKG4pe2Nhc2UgMTpyPT1pLlR5cGUuU1RSSU5HP3RoaXMucGFydG5lcklkPWUuTGIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2Nhc2UgMjpyPT1pLlR5cGUuU1RSSU5HP3RoaXMuY3VzdG9tZXJJZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDM6cj09aS5UeXBlLlNUUklORz90aGlzLmNvbnRlbnRJZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDQ6aWYocj09aS5UeXBlLkxJU1Qpe3ZhciBzLG89MDt0aGlzLnRhZ3M9W107cz1lLmFfKCkscy5oXyxvPXMuc2l6ZTtmb3IodmFyIGE9MDthPG87KythKXt2YXIgaD1udWxsO2g9ZS5MYigpLnZhbHVlLHRoaXMudGFncy5wdXNoKGgpfWUuY18oKX1lbHNlIGUuTWIocik7YnJlYWs7ZGVmYXVsdDplLk1iKHIpfWUuVWIoKX1lLkJiKCl9LEV2ZW50SWQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2lmKGUuSGIoXCJFdmVudElkXCIpLG51bGwhPT10aGlzLnBhcnRuZXJJZCYmdm9pZCAwIT09dGhpcy5wYXJ0bmVySWQmJihlLnhiKFwicGFydG5lcklkXCIsaS5UeXBlLlNUUklORywxKSxlLnFiKHRoaXMucGFydG5lcklkKSxlLkdiKCkpLG51bGwhPT10aGlzLmN1c3RvbWVySWQmJnZvaWQgMCE9PXRoaXMuY3VzdG9tZXJJZCYmKGUueGIoXCJjdXN0b21lcklkXCIsaS5UeXBlLlNUUklORywyKSxlLnFiKHRoaXMuY3VzdG9tZXJJZCksZS5HYigpKSxudWxsIT09dGhpcy5jb250ZW50SWQmJnZvaWQgMCE9PXRoaXMuY29udGVudElkJiYoZS54YihcImNvbnRlbnRJZFwiLGkuVHlwZS5TVFJJTkcsMyksZS5xYih0aGlzLmNvbnRlbnRJZCksZS5HYigpKSxudWxsIT09dGhpcy50YWdzJiZ2b2lkIDAhPT10aGlzLnRhZ3Mpe2UueGIoXCJ0YWdzXCIsaS5UeXBlLkxJU1QsNCksZS5IQyhpLlR5cGUuU1RSSU5HLHRoaXMudGFncy5sZW5ndGgpO2Zvcih2YXIgdCBpbiB0aGlzLnRhZ3MpdGhpcy50YWdzLmhhc093blByb3BlcnR5KHQpJiYodD10aGlzLnRhZ3NbdF0sZS5xYih0KSk7ZS54QygpLGUuR2IoKX1lLmpiKCksZS5RYigpfSxTbmFwc2hvdEluZm89ZnVuY3Rpb24oZSl7dGhpcy50aW1lc3RhbXA9bnVsbCx0aGlzLmFwaVNlcnZlcj1udWxsLHRoaXMuY2xpZW50SXA9bnVsbCxlJiYodm9pZCAwIT09ZS50aW1lc3RhbXAmJm51bGwhPT1lLnRpbWVzdGFtcCYmKHRoaXMudGltZXN0YW1wPWUudGltZXN0YW1wKSx2b2lkIDAhPT1lLmFwaVNlcnZlciYmbnVsbCE9PWUuYXBpU2VydmVyJiYodGhpcy5hcGlTZXJ2ZXI9ZS5hcGlTZXJ2ZXIpLHZvaWQgMCE9PWUuY2xpZW50SXAmJm51bGwhPT1lLmNsaWVudElwJiYodGhpcy5jbGllbnRJcD1lLmNsaWVudElwKSl9LFNuYXBzaG90SW5mby5wcm90b3R5cGU9e30sU25hcHNob3RJbmZvLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUpe2ZvcihlLnJfKCk7Oyl7dmFyIHQ9ZS5rYigpLHI9KHQuZm5hbWUsdC5mdHlwZSksbj10LmZpZDtpZihyPT1pLlR5cGUuU1RPUClicmVhaztzd2l0Y2gobil7Y2FzZSAxOnI9PWkuVHlwZS5JNjQ/dGhpcy50aW1lc3RhbXA9ZS5nXygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyOnI9PWkuVHlwZS5TVFJJTkc/dGhpcy5hcGlTZXJ2ZXI9ZS5MYigpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAzOnI9PWkuVHlwZS5TVFJJTkc/dGhpcy5jbGllbnRJcD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0sU25hcHNob3RJbmZvLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXtlLkhiKFwiU25hcHNob3RJbmZvXCIpLG51bGwhPT10aGlzLnRpbWVzdGFtcCYmdm9pZCAwIT09dGhpcy50aW1lc3RhbXAmJihlLnhiKFwidGltZXN0YW1wXCIsaS5UeXBlLkk2NCwxKSxlLktDKHRoaXMudGltZXN0YW1wKSxlLkdiKCkpLG51bGwhPT10aGlzLmFwaVNlcnZlciYmdm9pZCAwIT09dGhpcy5hcGlTZXJ2ZXImJihlLnhiKFwiYXBpU2VydmVyXCIsaS5UeXBlLlNUUklORywyKSxlLnFiKHRoaXMuYXBpU2VydmVyKSxlLkdiKCkpLG51bGwhPT10aGlzLmNsaWVudElwJiZ2b2lkIDAhPT10aGlzLmNsaWVudElwJiYoZS54YihcImNsaWVudElwXCIsaS5UeXBlLlNUUklORywzKSxlLnFiKHRoaXMuY2xpZW50SXApLGUuR2IoKSksZS5qYigpLGUuUWIoKX0sVGVzdEluZm89ZnVuY3Rpb24oZSl7dGhpcy50ZXN0SWQ9bnVsbCxlJiZ2b2lkIDAhPT1lLnRlc3RJZCYmbnVsbCE9PWUudGVzdElkJiYodGhpcy50ZXN0SWQ9ZS50ZXN0SWQpfSxUZXN0SW5mby5wcm90b3R5cGU9e30sVGVzdEluZm8ucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLlNUUklORz90aGlzLnRlc3RJZD1lLkxiKCkudmFsdWU6ZS5NYihyKTticmVhaztjYXNlIDA6ZS5NYihyKTticmVhaztkZWZhdWx0OmUuTWIocil9ZS5VYigpfWUuQmIoKX0sVGVzdEluZm8ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe2UuSGIoXCJUZXN0SW5mb1wiKSxudWxsIT09dGhpcy50ZXN0SWQmJnZvaWQgMCE9PXRoaXMudGVzdElkJiYoZS54YihcInRlc3RJZFwiLGkuVHlwZS5TVFJJTkcsMSksZS5xYih0aGlzLnRlc3RJZCksZS5HYigpKSxlLmpiKCksZS5RYigpfSxJbmV0QWRkcmVzcz1mdW5jdGlvbihlKXt0aGlzLmFkZHJlc3M9bnVsbCx0aGlzLnBvcnQ9bnVsbCxlJiYodm9pZCAwIT09ZS5hZGRyZXNzJiZudWxsIT09ZS5hZGRyZXNzJiYodGhpcy5hZGRyZXNzPWUuYWRkcmVzcyksdm9pZCAwIT09ZS5wb3J0JiZudWxsIT09ZS5wb3J0JiYodGhpcy5wb3J0PWUucG9ydCkpfSxJbmV0QWRkcmVzcy5wcm90b3R5cGU9e30sSW5ldEFkZHJlc3MucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSl7Zm9yKGUucl8oKTs7KXt2YXIgdD1lLmtiKCkscj0odC5mbmFtZSx0LmZ0eXBlKSxuPXQuZmlkO2lmKHI9PWkuVHlwZS5TVE9QKWJyZWFrO3N3aXRjaChuKXtjYXNlIDE6cj09aS5UeXBlLlNUUklORz90aGlzLmFkZHJlc3M9ZS52XygpLnZhbHVlOmUuTWIocik7YnJlYWs7Y2FzZSAyOnI9PWkuVHlwZS5JMzI/dGhpcy5wb3J0PWUuRmIoKS52YWx1ZTplLk1iKHIpO2JyZWFrO2RlZmF1bHQ6ZS5NYihyKX1lLlViKCl9ZS5CYigpfSxJbmV0QWRkcmVzcy5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7ZS5IYihcIkluZXRBZGRyZXNzXCIpLG51bGwhPT10aGlzLmFkZHJlc3MmJnZvaWQgMCE9PXRoaXMuYWRkcmVzcyYmKGUueGIoXCJhZGRyZXNzXCIsaS5UeXBlLlNUUklORywxKSxlLldDKHRoaXMuYWRkcmVzcyksZS5HYigpKSxudWxsIT09dGhpcy5wb3J0JiZ2b2lkIDAhPT10aGlzLnBvcnQmJihlLnhiKFwicG9ydFwiLGkuVHlwZS5JMzIsMiksZS5WYih0aGlzLnBvcnQpLGUuR2IoKSksZS5qYigpLGUuUWIoKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDQpLG49cigyMykscz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLm1zZz1lLHRoaXMuVUs9RGF0ZS5ub3coKSt0LHRoaXMuQks9aS5kZWZlcigpfXJldHVybiBlLnByb3RvdHlwZS5ISz1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpPj10aGlzLlVLfSxlfSgpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGksbixzLG8pe3ZvaWQgMD09PXQmJih0PTNlNCksdm9pZCAwPT09ciYmKHI9MTAwKSx2b2lkIDA9PT1pJiYoaT0zZTQpLHZvaWQgMD09PW4mJihuPTE1ZTMpLHZvaWQgMD09PXMmJihzPURhdGUpLHZvaWQgMD09PW8mJihvPSExKSx0aGlzLnhLPTEsdGhpcy5xSz0tMSx0aGlzLkdLPS0xLHRoaXMud2o9e30sdGhpcy5WSz1bXSx0aGlzLmpLPVtdLHRoaXMuUUs9ITEsdGhpcy5LSz0hMCx0aGlzLllLPWUsdGhpcy5XSz1BcnJheSgpLHRoaXMuQUU9dCx0aGlzLk9FPXIsdGhpcy5ORT1pLHRoaXMueks9bix0aGlzLkpLPXMsdGhpcy5RSz1vfHwvTVNJRSAxMC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl8fC9NU0lFIDkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfHwvcnY6MTEuMC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl8fC9FZGdlLi9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9cmV0dXJuIGUucHJvdG90eXBlLkFzPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc2VydmljZStcIl9cIitlLm1zZ0lkLHI9dGhpcy53alt0XTtudWxsIT1yP3IoZSk6bi5sb2dnZXIoKS5lcnJvcihuLmxvZ2dlcklkK1wiQ291bGQgbm90IGZpbmQgYSBkaXNwYXRjaGVyIGZvciBcIixlLHQsdGhpcy53ail9LGUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLndqW2UrXCJfXCIrdF09cn0sZS5wcm90b3R5cGUub25lcnJvcj1mdW5jdGlvbihlKXt0aGlzLlZLLnB1c2goZSl9LGUucHJvdG90eXBlLnhCPWZ1bmN0aW9uKGUpe3RoaXMuaksucHVzaChlKX0sZS5wcm90b3R5cGUuWEs9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCF3aW5kb3cuV2ViU29ja2V0KXJldHVybiB2b2lkIHRoaXMuVksuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZShcIldlYlNvY2tldCBub3QgZGVmaW5lZFwiKX0pO3ZhciB0PW5ldyBXZWJTb2NrZXQodGhpcy5ZSyk7cmV0dXJuIHQuYmluYXJ5VHlwZT1cImFycmF5YnVmZmVyXCIsdC5vbm9wZW49ZnVuY3Rpb24odCl7ZS5aSygpLG4ubG9nZ2VyKCkuZGVidWcobi5sb2dnZXJJZCtcIkhpdmVTZXJ2aWNlc0Nvbm5lY3Rpb24gZXN0YWJsaXNoZWQgdG8gXCIrZS5ZSyksZS5HSz0obmV3IGUuSkspLmdldFRpbWUoKSxlLiRLKCksZS5qSy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUpfSksZS5lWSgpLGUudFkoKX0sdC5vbmNsb3NlPWZ1bmN0aW9uKHQpe2UuY2xvc2UoZS5LSyksZS5jb25uZWN0KCl9LHQub25tZXNzYWdlPWZ1bmN0aW9uKHQpe2UuQXMobi5KZC55Zih0LmRhdGEpKX0sdC5vbmVycm9yPWZ1bmN0aW9uKHQpe2UuY2xvc2UoITApLGUuVksuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LnRvU3RyaW5nKCkpfSl9LHR9LGUucHJvdG90eXBlLmlzT3Blbj1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLlBSJiZ0aGlzLlBSLnJlYWR5U3RhdGU9PXRoaXMuUFIuT1BFTn0sZS5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UmJih0aGlzLktLPSEwKSx0aGlzLktLJiYxIT10aGlzLmlzT3BlbigpJiYodGhpcy5xSz4wfHwodGhpcy5HSz4tMSYmKG5ldyB0aGlzLkpLKS5nZXRUaW1lKCktdGhpcy5HSz50aGlzLkFFPyh0aGlzLnhLPW4uTC5FZix0aGlzLkdLPS0xKTp0aGlzLnhLPU1hdGgubWluKDIqdGhpcy54Syx0aGlzLkFFKSx0aGlzLnFLPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5xSz0tMSxuLmxvZ2dlcigpLmRlYnVnKG4ubG9nZ2VySWQrXCJDb25uZWN0aW9uIGF0dGVtcHQgdG8gXCIrdC5ZSytcIiBbdDpcIit0LnhLK1wiIGhiOlwiK3QuUUsrXCJdXCIpLHQuUFI9dC5YSygpLHQueEs9TWF0aC5tYXgodC54SyxuLkwuRWYpfSx0aGlzLnhLKSkpfSxlLnByb3RvdHlwZS5aSz1mdW5jdGlvbigpe3RoaXMucUs+LTEmJihjbGVhclRpbWVvdXQodGhpcy5xSyksdGhpcy5xSz0tMSl9LGUucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKGUpe3RoaXMuS0s9dm9pZCAwIT1lJiZlLG4ubG9nZ2VyKCkuZGVidWcobi5sb2dnZXJJZCtcIkNsb3NpbmcgY29ubmVjdGlvbiBbcmVjb25uZWN0OlwiK3RoaXMuS0srXCJdXCIpLHRoaXMuWksoKSxudWxsIT10aGlzLlBSJiYodGhpcy5QUi5jbG9zZSgpLHRoaXMuUFI9bnVsbCl9LGUucHJvdG90eXBlLiRLPWZ1bmN0aW9uKCl7Zm9yKDt0aGlzLldLLmxlbmd0aD4wOyl7dmFyIGU9dGhpcy5XSy5wb3AoKTt0cnl7ZS5ISygpP2UuQksucmVqZWN0KG5ldyBFcnJvcihcIk1lc3NhZ2UgZXhwaXJlZFwiKSk6KHRoaXMuZVkoKSx0aGlzLlBSLnNlbmQoZS5tc2cudmYoKSkpfWNhdGNoKHQpe2lmKHQuY29kZT09PURPTUV4Y2VwdGlvbi5JTlZBTElEX1NUQVRFX0VSUil7dGhpcy5XSy5wdXNoKGUpO2JyZWFrfW4ubG9nZ2VyKCkuZXJyb3Iobi5sb2dnZXJJZCtcIkZhaWxlZCB0byBzZW5kIHRoZSBtZXNzYWdlLCBkcm9wcGVkOiBcIix0LmNvZGUsdC5uYW1lKSxlLkJLLnJlamVjdCh0KX19dGhpcy50WSgpfSxlLnByb3RvdHlwZS5lWT1mdW5jdGlvbigpe3RoaXMuclkmJihjbGVhclRpbWVvdXQodGhpcy5yWSksdGhpcy5yWT1udWxsKX0sZS5wcm90b3R5cGUudFk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuUUsmJiF0aGlzLnJZJiYodGhpcy5yWT13aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtlLnNlbmQobmV3IG4uSmQoU2VydmljZXMuaVksMCxcIlwiKSl9LHRoaXMuekspKX0sZS5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQmJih0PXRoaXMuTkUpLHRoaXMuV0subGVuZ3RoPj10aGlzLk9FKXRocm93IG5ldyBFcnJvcihcIkhpdmVTZXJ2aWNlcyBjb25uZWN0aW9uIGNhbm5vdCBxdWV1ZSBtb3JlIG1lc3NhZ2VzXCIpO3ZhciByPW5ldyBzKGUsdCk7cmV0dXJuIHRoaXMuV0sucHVzaChyKSx0aGlzLlBSJiZ0aGlzLiRLKCksci5CSy5Tc30sZS5wcm90b3R5cGUublk9ZnVuY3Rpb24oZSl7dGhpcy5RSz1lLHRoaXMuUUsmJnRoaXMudFkoKX0sZS5wcm90b3R5cGUuc1k9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5QUn0sZX0oKTt0LkhCPW99LGZ1bmN0aW9uKGUsdCl7U2VydmljZXM9ezE6XCJSRU1PVEVfRVhFQ1VUT1JcIixvWToxLDI6XCJQRUVSX0ZPUldBUkRFUlwiLGFZOjIsMzpcIlBFRVJfSU5ERVhcIixoWTozLDQ6XCJQRUVSX0JST0FEQ0FTVFwiLGNZOjQsNTpcIlBFRVJfRklMVEVSXCIsdVk6NSw2OlwiUEVFUl9MT0dHSU5HXCIsbFk6Niw3OlwiSElWRUpTX1RSQUNLRVJcIixwWTo3LDg6XCJQRUVSX1NZU1RFTVwiLGRZOjgsOTpcIkhJVkVKU19TTkFQU0hPVFNcIixYZDo5LDEwOlwiSElWRUpTX1RJQ0tFVFNcIixCQjoxMCwxMTpcIkhJVkVKU19LRUVQQUxJVkVcIixpWToxMSwxMjpcIkhJVkVKU19GT1JXQVJESU5HXCIsZlk6MTJ9fSxmdW5jdGlvbihlLHQpe2UuaT1mdW5jdGlvbigpe3JldHVybiBuZXcgRnVuY3Rpb259fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5wMnBJZD1lLHRoaXMuV2w9dH1yZXR1cm4gZS5wcm90b3R5cGUudHA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wMnBJZH0sZS5wcm90b3R5cGUucnA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5XbD90aGlzLldsOnRoaXMucDJwSWR9LGV9KCk7dC5wSD1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDgyKSxzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUuZ2V0Q2lkcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLk1IP3RoaXMuTUg6bnVsbH0sdH0obi5GSCk7dC53SD1zfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cig3NCksbj1yKDQpLHM9cigwKSxvPXIoMjcpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5pbmRleGVkREI9d2luZG93LmluZGV4ZWREQnx8d2luZG93Lm1vekluZGV4ZWREQnx8d2luZG93LndlYmtpdEluZGV4ZWREQnx8d2luZG93Lm1zSW5kZXhlZERCLHRoaXMubG9nZ2VyPXMuRnJhbWV3b3JrLnJlc29sdmUocy5GcmFtZXdvcmsuVi5SKS5sb2coKX1yZXR1cm4gZS5wcm90b3R5cGUudUg9ZnVuY3Rpb24oKXt2YXIgZT1uLmRlZmVyKCksdD10aGlzLmluZGV4ZWREQi5vcGVuKFwiUHJpdmF0ZUlQREJcIik7cmV0dXJuIHQub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKCl7dC5yZXN1bHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJQcml2YXRlSVBTdG9yZVwiLHtrZXlQYXRoOlwiaWRcIn0pfSx0Lm9uc3VjY2Vzcz1mdW5jdGlvbigpe3ZhciByPXQucmVzdWx0O2UucmVzb2x2ZShyKX0sdC5vbmVycm9yPWZ1bmN0aW9uKHQpe2UucmVqZWN0KHQpfSxlLlNzfSxlLnByb3RvdHlwZS5aSD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy5nWSlyZXR1cm4gdGhpcy5nWTt2YXIgdD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5sb2dnZXIud2FybihcIlByaXZhdGUgbGlzdCByZXRyaWV2YWwgdGltZW91dFwiKSxyLnJlamVjdChcIlByaXZhdGUgbGlzdCB0aW1lb3V0XCIpfSw0ZTMpLHI9bi5kZWZlcigpO2lmKG8uR2QuX2gmJnRoaXMuaW5kZXhlZERCKXt0aGlzLnVIKCkudGhlbihmdW5jdGlvbihuKXt2YXIgcz1uLnRyYW5zYWN0aW9uKFwiUHJpdmF0ZUlQU3RvcmVcIixcInJlYWR3cml0ZVwiKSxvPXMub2JqZWN0U3RvcmUoXCJQcml2YXRlSVBTdG9yZVwiKSxhPW8uZ2V0KFwiaXBsaXN0XCIpO2Eub25zdWNjZXNzPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHQpO3ZhciBlPVtdO2kuc0woYS5yZXN1bHQpfHxpLnNMKGEucmVzdWx0LnZhbHVlKXx8KGU9YS5yZXN1bHQudmFsdWUuc3BsaXQoXCJ8XCIpKSxyLnJlc29sdmUoZSksbi5jbG9zZSgpfSxhLm9uZXJyb3I9ZnVuY3Rpb24oaSl7Y2xlYXJUaW1lb3V0KHQpLGUubG9nZ2VyLndhcm4oXCJJIGdvdCBhbiBlcnJvciBvbiBpbmRleGVkIGRiIFwiK2kubWVzc2FnZSksci5yZWplY3QoXCJFcnJvciBvbiBpbmRleGVkREIgXCIraS5tZXNzYWdlKX19KS5mYWlsKGZ1bmN0aW9uKGkpe2NsZWFyVGltZW91dCh0KSxlLmxvZ2dlci53YXJuKFwiREIgaXMgbm90IG9wZW4gd2l0aCBlcnJvclwiK2kubWVzc2FnZSksci5yZWplY3QoXCJEQiBpcyBub3Qgb3BlbiB3aXRoIGVycm9yIFwiK2kubWVzc2FnZSl9KX1lbHNlIGNsZWFyVGltZW91dCh0KSxyLnJlamVjdCh7bWVzc2FnZTpcIkRCIGlzIG5vdCByZWFkeSBvciBlbmFibGVkXCJ9KTtyZXR1cm4gdGhpcy5nWT1yLlNzLHRoaXMuZ1l9LGUucHJvdG90eXBlLml4PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoby5HZC5faCYmdGhpcy5pbmRleGVkREIpe3ZhciByPWUuam9pbihcInxcIik7dGhpcy51SCgpLnRoZW4oZnVuY3Rpb24oaSl7dmFyIG49aS50cmFuc2FjdGlvbihcIlByaXZhdGVJUFN0b3JlXCIsXCJyZWFkd3JpdGVcIik7bi5vYmplY3RTdG9yZShcIlByaXZhdGVJUFN0b3JlXCIpLnB1dCh7aWQ6XCJpcGxpc3RcIix2YWx1ZTpyfSksbi5vbmNvbXBsZXRlPWZ1bmN0aW9uKCl7dC5sb2dnZXIuZGVidWcoXCJTdG9yaW5nIHNpdGUgbWF0Y2hlZCBpcHMgW1wiK2Uuam9pbihcIixcIikrXCJdXCIpLGkuY2xvc2UoKX19KS5mYWlsKGZ1bmN0aW9uKGUpe3QubG9nZ2VyLndhcm4oXCJEQiBpcyBub3Qgb3BlbiB3aXRoIGVycm9yIFwiK2UubWVzc2FnZSl9KX19LGV9KCk7dC5RSD1hfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigxNykubG9nLG49cigxNykuV3Uscz17dUw6ZnVuY3Rpb24oKXt3aW5kb3cuTWVkaWFTdHJlYW09d2luZG93Lk1lZGlhU3RyZWFtfHx3aW5kb3cud2Via2l0TWVkaWFTdHJlYW19LHBMOmZ1bmN0aW9uKCl7XCJvYmplY3RcIiE9dHlwZW9mIHdpbmRvd3x8IXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbnx8XCJvbnRyYWNrXCJpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHxPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcIm9udHJhY2tcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRVl9LHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuRVkmJih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuRVkpLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFkZHN0cmVhbVwiLHRoaXMudlkpKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuRVk9ZSksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiYWRkc3RyZWFtXCIsdGhpcy52WT1mdW5jdGlvbihlKXtlLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwiYWRkdHJhY2tcIixmdW5jdGlvbihyKXt2YXIgaT1uZXcgRXZlbnQoXCJ0cmFja1wiKTtpLnRyYWNrPXIudHJhY2ssaS5yZWNlaXZlcj17dHJhY2s6ci50cmFja30saS5zdHJlYW1zPVtlLnN0cmVhbV0sdC5kaXNwYXRjaEV2ZW50KGkpfSksZS5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj1uZXcgRXZlbnQoXCJ0cmFja1wiKTtyLnRyYWNrPXQsci5yZWNlaXZlcj17dHJhY2s6dH0sci5zdHJlYW1zPVtlLnN0cmVhbV0sdGhpcy5kaXNwYXRjaEV2ZW50KHIpfS5iaW5kKHRoaXMpKX0uYmluZCh0aGlzKSl9fSl9LGRMOmZ1bmN0aW9uKCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uJiYhKFwiZ2V0U2VuZGVyc1wiaW4gUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSYmXCJjcmVhdGVEVE1GU2VuZGVyXCJpbiBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpe1JUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueVl9O3ZhciBlPVJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0sdD1SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO1JUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztyLnlZPXIueVl8fFtdLGUuYXBwbHkocixbdF0pLHQuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtyLnlZLnB1c2goe3RyYWNrOmUsZ2V0IFRZKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMubVkmJihcImF1ZGlvXCI9PT1lLmtpbmQ/dGhpcy5tWT1yLmNyZWF0ZURUTUZTZW5kZXIoZSk6dGhpcy5tWT1udWxsKSx0aGlzLm1ZfX0pfSl9LFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHI9dGhpcztyLnlZPXIueVl8fFtdLHQuYXBwbHkocixbZV0pLGUuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1yLnlZLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSk7dCYmci55WS5zcGxpY2Uoci55WS5pbmRleE9mKHQpLDEpfSl9fX0sbEw6ZnVuY3Rpb24oKXtcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiYoIXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50fHxcInNyY09iamVjdFwiaW4gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlfHxPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLFwic3JjT2JqZWN0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLklZfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLklZPWUsdGhpcy5zcmMmJlVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpLCFlKXJldHVybiB2b2lkKHRoaXMuc3JjPVwiXCIpO3RoaXMuc3JjPVVSTC5jcmVhdGVPYmplY3RVUkwoZSksZS5hZGRFdmVudExpc3RlbmVyKFwiYWRkdHJhY2tcIixmdW5jdGlvbigpe3Quc3JjJiZVUkwucmV2b2tlT2JqZWN0VVJMKHQuc3JjKSx0LnNyYz1VUkwuY3JlYXRlT2JqZWN0VVJMKGUpfSksZS5hZGRFdmVudExpc3RlbmVyKFwicmVtb3ZldHJhY2tcIixmdW5jdGlvbigpe3Quc3JjJiZVUkwucmV2b2tlT2JqZWN0VVJMKHQuc3JjKSx0LnNyYz1VUkwuY3JlYXRlT2JqZWN0VVJMKGUpfSl9fSkpfSxhTDpmdW5jdGlvbigpe3dpbmRvdy5SVENQZWVyQ29ubmVjdGlvbnx8KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbihlLHQpe3JldHVybiBpKFwiUGVlckNvbm5lY3Rpb25cIiksZSYmZS5TWSYmKGUuUlk9ZS5TWSksbmV3IHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKGUsdCl9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU9d2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLndZJiZPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLFwiZ2VuZXJhdGVDZXJ0aWZpY2F0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gd2Via2l0UlRDUGVlckNvbm5lY3Rpb24ud1l9fSkpO3ZhciBlPVJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cztSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24odCxyLGkpe3ZhciBuPXRoaXMscz1hcmd1bWVudHM7aWYoYXJndW1lbnRzLmxlbmd0aD4wJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZigwPT09ZS5sZW5ndGgmJigwPT09YXJndW1lbnRzLmxlbmd0aHx8XCJmdW5jdGlvblwiIT10eXBlb2YgYXJndW1lbnRzWzBdKSlyZXR1cm4gZS5hcHBseSh0aGlzLFtdKTt2YXIgbz1mdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gZS5yZXN1bHQoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPXtpZDplLmlkLHRpbWVzdGFtcDplLnRpbWVzdGFtcCx0eXBlOntiWTpcImxvY2FsLWNhbmRpZGF0ZVwiLENZOlwicmVtb3RlLWNhbmRpZGF0ZVwifVtlLnR5cGVdfHxlLnR5cGV9O2UubmFtZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JbdF09ZS5fWSh0KX0pLHRbci5pZF09cn0pLHR9LGE9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBNYXAoT2JqZWN0LmtleXMoZSkubWFwKGZ1bmN0aW9uKHQpe3JldHVyblt0LGVbdF1dfSkpfTtpZihhcmd1bWVudHMubGVuZ3RoPj0yKXt2YXIgaD1mdW5jdGlvbihlKXtzWzFdKGEobyhlKSkpfTtyZXR1cm4gZS5hcHBseSh0aGlzLFtoLGFyZ3VtZW50c1swXV0pfXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0LHIpe2UuYXBwbHkobixbZnVuY3Rpb24oZSl7dChhKG8oZSkpKX0scl0pfSkudGhlbihyLGkpfSxuLnZlcnNpb248NTEmJltcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbZV07UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLHI9dGhpcyxpPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGksbil7dC5hcHBseShyLFtlWzBdLGksbl0pfSk7cmV0dXJuIGUubGVuZ3RoPDI/aTppLnRoZW4oZnVuY3Rpb24oKXtlWzFdLmFwcGx5KG51bGwsW10pfSxmdW5jdGlvbih0KXtlLmxlbmd0aD49MyYmZVsyXS5hcHBseShudWxsLFt0XSl9KX19KSxuLnZlcnNpb248NTImJltcImNyZWF0ZU9mZmVyXCIsXCJjcmVhdGVBbnN3ZXJcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbZV07UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihhcmd1bWVudHMubGVuZ3RoPDF8fDE9PT1hcmd1bWVudHMubGVuZ3RoJiZcIm9iamVjdFwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgcj0xPT09YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMF06dm9pZCAwO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihpLG4pe3QuYXBwbHkoZSxbaSxuLHJdKX0pfXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxbXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLFwiYWRkSWNlQ2FuZGlkYXRlXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW2VdO1JUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09bmV3KFwiYWRkSWNlQ2FuZGlkYXRlXCI9PT1lP1JUQ0ljZUNhbmRpZGF0ZTpSVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7dmFyIHQ9UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZTtSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT90LmFwcGx5KHRoaXMsYXJndW1lbnRzKTooYXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0uYXBwbHkobnVsbCksUHJvbWlzZS5yZXNvbHZlKCkpfX19O2UuaT17dUw6cy51TCxwTDpzLnBMLGRMOnMuZEwsbEw6cy5sTCxhTDpzLmFMLGNMOnIoMTIzKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDE3KS5sb2csbj1yKDE3KS5XdTtlLmk9ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8ZS5QWXx8ZS5vcHRpb25hbClyZXR1cm4gZTt2YXIgdD17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihyKXtpZihcInJlcXVpcmVcIiE9PXImJlwiYWR2YW5jZWRcIiE9PXImJlwibWVkaWFTb3VyY2VcIiE9PXIpe3ZhciBpPVwib2JqZWN0XCI9PXR5cGVvZiBlW3JdP2Vbcl06e0FZOmVbcl19O3ZvaWQgMCE9PWkuT1kmJlwibnVtYmVyXCI9PXR5cGVvZiBpLk9ZJiYoaS5taW49aS5tYXg9aS5PWSk7dmFyIG49ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9lK3QuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKTpcImRldmljZUlkXCI9PT10P1wic291cmNlSWRcIjp0fTtpZih2b2lkIDAhPT1pLkFZKXt0Lm9wdGlvbmFsPXQub3B0aW9uYWx8fFtdO3ZhciBzPXt9O1wibnVtYmVyXCI9PXR5cGVvZiBpLkFZPyhzW24oXCJtaW5cIixyKV09aS5BWSx0Lm9wdGlvbmFsLnB1c2gocykscz17fSxzW24oXCJtYXhcIixyKV09aS5BWSx0Lm9wdGlvbmFsLnB1c2gocykpOihzW24oXCJcIixyKV09aS5BWSx0Lm9wdGlvbmFsLnB1c2gocykpfXZvaWQgMCE9PWkuT1kmJlwibnVtYmVyXCIhPXR5cGVvZiBpLk9ZPyh0LlBZPXQuUFl8fHt9LHQuUFlbbihcIlwiLHIpXT1pLk9ZKTpbXCJtaW5cIixcIm1heFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWlbZV0mJih0LlBZPXQuUFl8fHt9LHQuUFlbbihlLHIpXT1pW2VdKX0pfX0pLGUuTlkmJih0Lm9wdGlvbmFsPSh0Lm9wdGlvbmFsfHxbXSkuY29uY2F0KGUuTlkpKSx0fSx0PWZ1bmN0aW9uKHQscil7aWYodD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKSx0JiZ0LkhSJiYodC5IUj1lKHQuSFIpKSx0JiZcIm9iamVjdFwiPT10eXBlb2YgdC52aWRlbyl7dmFyIHM9dC52aWRlby5EWTtzPXMmJihcIm9iamVjdFwiPT10eXBlb2Ygcz9zOntBWTpzfSk7dmFyIG89bi52ZXJzaW9uPDU5O2lmKHMmJihcInVzZXJcIj09PXMuT1l8fFwiZW52aXJvbm1lbnRcIj09PXMuT1l8fFwidXNlclwiPT09cy5BWXx8XCJlbnZpcm9ubWVudFwiPT09cy5BWSkmJighbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5rWXx8IW5hdmlnYXRvci5tZWRpYURldmljZXMua1koKS5EWXx8bykmJihkZWxldGUgdC52aWRlby5EWSxcImVudmlyb25tZW50XCI9PT1zLk9ZfHxcImVudmlyb25tZW50XCI9PT1zLkFZKSlyZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5MWSgpLnRoZW4oZnVuY3Rpb24obil7bj1uLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInZpZGVvaW5wdXRcIj09PWUua2luZH0pO3ZhciBvPW4uZmluZChmdW5jdGlvbihlKXtyZXR1cm4tMSE9PWUubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiYmFja1wiKX0pfHxuLmxlbmd0aCYmbltuLmxlbmd0aC0xXTtyZXR1cm4gbyYmKHQudmlkZW8uTVk9cy5PWT97T1k6by5NWX06e0FZOm8uTVl9KSx0LnZpZGVvPWUodC52aWRlbyksaShcImNocm9tZTogXCIrSlNPTi5zdHJpbmdpZnkodCkpLHIodCl9KTt0LnZpZGVvPWUodC52aWRlbyl9cmV0dXJuIGkoXCJjaHJvbWU6IFwiK0pTT04uc3RyaW5naWZ5KHQpKSxyKHQpfSxyPWZ1bmN0aW9uKGUpe3JldHVybntuYW1lOntGWTpcIk5vdEFsbG93ZWRFcnJvclwiLFVZOlwiT3ZlcmNvbnN0cmFpbmVkRXJyb3JcIn1bZS5uYW1lXXx8ZS5uYW1lLG1lc3NhZ2U6ZS5tZXNzYWdlLEJZOmUuSFksdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lKyh0aGlzLm1lc3NhZ2UmJlwiOiBcIikrdGhpcy5tZXNzYWdlfX19LHM9ZnVuY3Rpb24oZSxpLG4pe3QoZSxmdW5jdGlvbihlKXtuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKGUsaSxmdW5jdGlvbihlKXtuKHIoZSkpfSl9KX07bmF2aWdhdG9yLmdldFVzZXJNZWRpYT1zO3ZhciBvPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0LHIpe25hdmlnYXRvci5nZXRVc2VyTWVkaWEoZSx0LHIpfSl9O2lmKG5hdmlnYXRvci5tZWRpYURldmljZXN8fChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzPXtnZXRVc2VyTWVkaWE6byxMWTpmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXt2YXIgdD17SFI6XCJhdWRpb2lucHV0XCIsdmlkZW86XCJ2aWRlb2lucHV0XCJ9O3JldHVybiBNZWRpYVN0cmVhbVRyYWNrLmdldFNvdXJjZXMoZnVuY3Rpb24ocil7ZShyLm1hcChmdW5jdGlvbihlKXtyZXR1cm57bGFiZWw6ZS5sYWJlbCxraW5kOnRbZS5raW5kXSxNWTplLmlkLHhZOlwiXCJ9fSkpfSl9KX0sa1k6ZnVuY3Rpb24oKXtyZXR1cm57TVk6ITAscVk6ITAsRFk6ITAsR1k6ITAsaGVpZ2h0OiEwLHdpZHRoOiEwfX19KSxuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSl7dmFyIGE9bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtyZXR1cm4gdChlLGZ1bmN0aW9uKGUpe3JldHVybiBhKGUpLnRoZW4oZnVuY3Rpb24odCl7aWYoZS5IUiYmIXQuZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGh8fGUudmlkZW8mJiF0LmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKXRocm93IHQuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AoKX0pLG5ldyBET01FeGNlcHRpb24oXCJcIixcIk5vdEZvdW5kRXJyb3JcIik7cmV0dXJuIHR9LGZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChyKGUpKX0pfSl9fWVsc2UgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9O3ZvaWQgMD09PW5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lciYmKG5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbigpe2koXCJEdW1teSBtZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lciBjYWxsZWQuXCIpfSksdm9pZCAwPT09bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyJiYobmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKCl7aShcIkR1bW15IG1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyIGNhbGxlZC5cIil9KX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUpe3ZhciB0PWUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwiYXVkaW9cIj09PWUua2luZH0pLHI9ZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJ2aWRlb1wiPT09ZS5raW5kfSk7Zm9yKGU9W107dC5sZW5ndGh8fHIubGVuZ3RoOyl0Lmxlbmd0aCYmZS5wdXNoKHQuc2hpZnQoKSksci5sZW5ndGgmJmUucHVzaChyLnNoaWZ0KCkpO3JldHVybiBlfWZ1bmN0aW9uIG4oZSl7dmFyIHQ9ITE7cmV0dXJuIGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSksZS5maWx0ZXIoZnVuY3Rpb24oZSl7aWYoZSYmKGUuVll8fGUudXJsKSl7dmFyIHI9ZS5WWXx8ZS51cmwsaT1cInN0cmluZ1wiPT10eXBlb2YgcjtyZXR1cm4gaSYmKHI9W3JdKSxyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAwIT09ZS5pbmRleE9mKFwidHVybjpcIil8fC0xPT09ZS5pbmRleE9mKFwidHJhbnNwb3J0PXVkcFwiKXx8LTEhPT1lLmluZGV4T2YoXCJ0dXJuOltcIil8fHQ/MD09PWUuaW5kZXhPZihcInN0dW46XCIpJiZvLnZlcnNpb24+PTE0MzkzOih0PSEwLCEwKX0pLGRlbGV0ZSBlLnVybCxlLlZZPWk/clswXTpyLCEhci5sZW5ndGh9cmV0dXJuITF9KX12YXIgcz1yKDEyNSksbz1yKDE3KS5XdSxhPXthTDpmdW5jdGlvbigpe2lmKHdpbmRvdy5qWSYmKHdpbmRvdy5SVENJY2VDYW5kaWRhdGV8fCh3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlfSksd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbnx8KHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxvLnZlcnNpb248MTUwMjUpKXt2YXIgZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLFwiZW5hYmxlZFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsXCJlbmFibGVkXCIse3NldDpmdW5jdGlvbih0KXtlLnNldC5jYWxsKHRoaXMsdCk7dmFyIHI9bmV3IEV2ZW50KFwiZW5hYmxlZFwiKTtyLmVuYWJsZWQ9dCx0aGlzLmRpc3BhdGNoRXZlbnQocil9fSl9d2luZG93LlJUQ1BlZXJDb25uZWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYoW1wiYWRkRXZlbnRMaXN0ZW5lclwiLFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiLFwiZGlzcGF0Y2hFdmVudFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RbZV09cltlXS5iaW5kKHIpfSksdGhpcy5vbmljZWNhbmRpZGF0ZT1udWxsLHRoaXMub25hZGRzdHJlYW09bnVsbCx0aGlzLlFZPW51bGwsdGhpcy5vbnJlbW92ZXN0cmVhbT1udWxsLHRoaXMub25zaWduYWxpbmdzdGF0ZWNoYW5nZT1udWxsLHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9bnVsbCx0aGlzLktZPW51bGwsdGhpcy5vbm5lZ290aWF0aW9ubmVlZGVkPW51bGwsdGhpcy5vbmRhdGFjaGFubmVsPW51bGwsdGhpcy5ZWT1bXSx0aGlzLldZPVtdLHRoaXMuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHQuWVl9LHRoaXMuZ2V0UmVtb3RlU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0LldZfSx0aGlzLmxvY2FsRGVzY3JpcHRpb249bmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcIlwiLHNkcDpcIlwifSksdGhpcy5yZW1vdGVEZXNjcmlwdGlvbj1uZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwiXCIsc2RwOlwiXCJ9KSx0aGlzLnNpZ25hbGluZ1N0YXRlPVwic3RhYmxlXCIsdGhpcy5pY2VDb25uZWN0aW9uU3RhdGU9XCJuZXdcIix0aGlzLmljZUdhdGhlcmluZ1N0YXRlPVwibmV3XCIsdGhpcy56WT17Slk6XCJhbGxcIixpY2VTZXJ2ZXJzOltdfSxlJiZlLlNZKXN3aXRjaChlLlNZKXtjYXNlXCJhbGxcIjpjYXNlXCJyZWxheVwiOnRoaXMuelkuSlk9ZS5TWX10aGlzLlhZPWUmJlwibWF4LWJ1bmRsZVwiPT09ZS5aWSxlJiZlLmljZVNlcnZlcnMmJih0aGlzLnpZLmljZVNlcnZlcnM9bihlLmljZVNlcnZlcnMpKSx0aGlzLiRZPWUsdGhpcy5lVz1bXSx0aGlzLnRXPVtdfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJXPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEV2ZW50KFwiaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2VcIik7dGhpcy5kaXNwYXRjaEV2ZW50KGUpLG51bGwhPT10aGlzLktZJiZ0aGlzLktZKGUpfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmlXPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXMublcoZS5sb2NhbERlc2NyaXB0aW9uLnNkcCk7dGhpcy50Vy5mb3JFYWNoKGZ1bmN0aW9uKHIpe2lmKHIuY2FuZGlkYXRlJiYwIT09T2JqZWN0LmtleXMoci5jYW5kaWRhdGUpLmxlbmd0aCl0W3IuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgrMV0rPVwiYT1cIityLmNhbmRpZGF0ZS5jYW5kaWRhdGUrXCJcXHJcXG5cIjtlbHNlIGZvcih2YXIgaT0xO2k8dC5sZW5ndGg7aSsrKS0xPT09dFtpXS5pbmRleE9mKFwiXFxyXFxuYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiKSYmKHRbaV0rPVwiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiKTtpZihlLmxvY2FsRGVzY3JpcHRpb24uc2RwPXQuam9pbihcIlwiKSxlLmRpc3BhdGNoRXZlbnQociksbnVsbCE9PWUub25pY2VjYW5kaWRhdGUmJmUub25pY2VjYW5kaWRhdGUociksIXIuY2FuZGlkYXRlJiZcImNvbXBsZXRlXCIhPT1lLmljZUdhdGhlcmluZ1N0YXRlKXtlLmVXLmV2ZXJ5KGZ1bmN0aW9uKGUpe3JldHVybiBlLnNXJiZcImNvbXBsZXRlZFwiPT09ZS5zVy5zdGF0ZX0pJiZcImNvbXBsZXRlXCIhPT1lLm9XJiYoZS5pY2VHYXRoZXJpbmdTdGF0ZT1cImNvbXBsZXRlXCIsZS5yVygpKX19KSx0aGlzLnRXPVtdfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kWX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7aWYoby52ZXJzaW9uPj0xNTAyNSl0aGlzLllZLnB1c2goZSk7ZWxzZXt2YXIgdD1lLmNsb25lKCk7ZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUscil7dmFyIGk9dC5nZXRUcmFja3MoKVtyXTtlLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmFibGVkXCIsZnVuY3Rpb24oZSl7aS5lbmFibGVkPWUuZW5hYmxlZH0pfSksdGhpcy5ZWS5wdXNoKHQpfXRoaXMuYVcoKX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5ZWS5pbmRleE9mKGUpO3Q+LTEmJih0aGlzLllZLnNwbGljZSh0LDEpLHRoaXMuYVcoKSl9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVXLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hIWUuaFd9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaFd9KX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lVy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuISFlLmNXfSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNXfSl9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUudVc9ZnVuY3Rpb24oZSx0KXt2YXIgcj17bFc6W10scFc6W10sZFc6W119LGk9ZnVuY3Rpb24oZSx0KXtlPXBhcnNlSW50KGUsMTApO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKHRbcl0uZlc9PT1lfHx0W3JdLmdXPT09ZSlyZXR1cm4gdFtyXX0sbj1mdW5jdGlvbihlLHQscixuKXt2YXIgcz1pKGUucGFyYW1ldGVycy5FVyxyKSxvPWkodC5wYXJhbWV0ZXJzLkVXLG4pO3JldHVybiBzJiZvJiZzLm5hbWUudG9Mb3dlckNhc2UoKT09PW8ubmFtZS50b0xvd2VyQ2FzZSgpfTtyZXR1cm4gZS5sVy5mb3JFYWNoKGZ1bmN0aW9uKGkpe2Zvcih2YXIgcz0wO3M8dC5sVy5sZW5ndGg7cysrKXt2YXIgbz10LmxXW3NdO2lmKGkubmFtZS50b0xvd2VyQ2FzZSgpPT09by5uYW1lLnRvTG93ZXJDYXNlKCkmJmkudlc9PT1vLnZXKXtpZihcInJ0eFwiPT09aS5uYW1lLnRvTG93ZXJDYXNlKCkmJmkucGFyYW1ldGVycyYmby5wYXJhbWV0ZXJzLkVXJiYhbihpLG8sZS5sVyx0LmxXKSljb250aW51ZTtvPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobykpLG8ueVc9TWF0aC5taW4oaS55VyxvLnlXKSxyLmxXLnB1c2gobyksby5UVz1vLlRXLmZpbHRlcihmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGkuVFcubGVuZ3RoO3QrKylpZihpLlRXW3RdLnR5cGU9PT1lLnR5cGUmJmkuVFdbdF0ubVc9PT1lLm1XKXJldHVybiEwO3JldHVybiExfSk7YnJlYWt9fX0pLGUucFcuZm9yRWFjaChmdW5jdGlvbihlKXtmb3IodmFyIGk9MDtpPHQucFcubGVuZ3RoO2krKyl7dmFyIG49dC5wV1tpXTtpZihlLnVyaT09PW4udXJpKXtyLnBXLnB1c2gobik7YnJlYWt9fX0pLHJ9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuSVc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9bmV3IFJUQ0ljZUdhdGhlcmVyKHIuelkpLG49bmV3IFJUQ0ljZVRyYW5zcG9ydChpKTtpLlNXPWZ1bmN0aW9uKG8pe3ZhciBhPW5ldyBFdmVudChcImljZWNhbmRpZGF0ZVwiKTthLmNhbmRpZGF0ZT17c2RwTWlkOmUsc2RwTUxpbmVJbmRleDp0fTt2YXIgaD1vLmNhbmRpZGF0ZSxjPSFofHwwPT09T2JqZWN0LmtleXMoaCkubGVuZ3RoO2M/dm9pZCAwPT09aS5zdGF0ZSYmKGkuc3RhdGU9XCJjb21wbGV0ZWRcIik6KGguUlc9XCJSVENQXCI9PT1uLlJXPzI6MSxhLmNhbmRpZGF0ZS5jYW5kaWRhdGU9cy53VyhoKSk7dmFyIHU9cy5uVyhyLmxvY2FsRGVzY3JpcHRpb24uc2RwKTt1W2EuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgrMV0rPWM/XCJhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuXCI6XCJhPVwiK2EuY2FuZGlkYXRlLmNhbmRpZGF0ZStcIlxcclxcblwiLHIubG9jYWxEZXNjcmlwdGlvbi5zZHA9dS5qb2luKFwiXCIpO3ZhciBsPXIuYlc/ci5iVzpyLmVXLHA9bC5ldmVyeShmdW5jdGlvbihlKXtyZXR1cm4gZS5zVyYmXCJjb21wbGV0ZWRcIj09PWUuc1cuc3RhdGV9KTtzd2l0Y2goci5pY2VHYXRoZXJpbmdTdGF0ZSl7Y2FzZVwibmV3XCI6Y3x8ci50Vy5wdXNoKGEpLGMmJnAmJnIudFcucHVzaChuZXcgRXZlbnQoXCJpY2VjYW5kaWRhdGVcIikpO2JyZWFrO2Nhc2VcImdhdGhlcmluZ1wiOnIuaVcoKSxjfHwoci5kaXNwYXRjaEV2ZW50KGEpLG51bGwhPT1yLm9uaWNlY2FuZGlkYXRlJiZyLm9uaWNlY2FuZGlkYXRlKGEpKSxwJiYoci5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImljZWNhbmRpZGF0ZVwiKSksbnVsbCE9PXIub25pY2VjYW5kaWRhdGUmJnIub25pY2VjYW5kaWRhdGUobmV3IEV2ZW50KFwiaWNlY2FuZGlkYXRlXCIpKSxyLmljZUdhdGhlcmluZ1N0YXRlPVwiY29tcGxldGVcIixyLnJXKCkpfX0sbi5fVz1mdW5jdGlvbigpe3IuUFcoKX07dmFyIG89bmV3IFJUQ0R0bHNUcmFuc3BvcnQobik7cmV0dXJuIG8uQVc9ZnVuY3Rpb24oKXtyLlBXKCl9LG8ub25lcnJvcj1mdW5jdGlvbigpe28uc3RhdGU9XCJmYWlsZWRcIixyLlBXKCl9LHtzVzppLE9XOm4sTlc6b319LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuRFc9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMudVcoZS5rVyxlLkxXKTt0JiZlLmhXJiYoaS5NVz1lLkZXLGkuVVc9e0JXOnMuSFd9LGUueFcubGVuZ3RoJiYoaS5VVy5xVz1lLnhXWzBdLnFXKSxlLmhXLnNlbmQoaSkpLHImJmUuY1cmJihcInZpZGVvXCI9PT1lLmtpbmQmJmUueFcmJm8udmVyc2lvbjwxNTAxOSYmZS54Vy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2RlbGV0ZSBlLkdXfSksaS5NVz1lLnhXLGkuVVc9e0JXOmUuQld9LGUuRlcubGVuZ3RoJiYoaS5VVy5xVz1lLkZXWzBdLnFXKSxlLmNXLlZXKGkpKX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0LHIsaT10aGlzO2lmKFwib2ZmZXJcIj09PWUudHlwZSl0aGlzLmJXJiYodD1zLm5XKGUuc2RwKSxyPXQuc2hpZnQoKSx0LmZvckVhY2goZnVuY3Rpb24oZSx0KXt2YXIgcj1zLmpXKGUpO2kuYldbdF0ua1c9cn0pLHRoaXMuZVc9dGhpcy5iVyxkZWxldGUgdGhpcy5iVyk7ZWxzZSBpZihcImFuc3dlclwiPT09ZS50eXBlKXt0PXMublcoaS5yZW1vdGVEZXNjcmlwdGlvbi5zZHApLHI9dC5zaGlmdCgpO3ZhciBuPXMuUVcocixcImE9aWNlLWxpdGVcIikubGVuZ3RoPjA7dC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dmFyIG89aS5lV1t0XSxhPW8uc1csaD1vLk9XLGM9by5OVyx1PW8ua1csbD1vLkxXO2lmKFwiMFwiIT09ZS5zcGxpdChcIlxcblwiLDEpWzBdLnNwbGl0KFwiIFwiLDIpWzFdJiYhby5LVyl7dmFyIHA9cy5ZVyhlLHIpLGQ9cy5XVyhlLHIpO24mJihkLnpXPVwic2VydmVyXCIpLGkuWFkmJjAhPT10fHwoaC5zdGFydChhLHAsbj9cImNvbnRyb2xsaW5nXCI6XCJjb250cm9sbGVkXCIpLGMuc3RhcnQoZCkpO3ZhciBmPWkudVcodSxsKTtpLkRXKG8sZi5sVy5sZW5ndGg+MCwhMSl9fSl9c3dpdGNoKHRoaXMubG9jYWxEZXNjcmlwdGlvbj17dHlwZTplLnR5cGUsc2RwOmUuc2RwfSxlLnR5cGUpe2Nhc2VcIm9mZmVyXCI6dGhpcy5KVyhcImhhdmUtbG9jYWwtb2ZmZXJcIik7YnJlYWs7Y2FzZVwiYW5zd2VyXCI6dGhpcy5KVyhcInN0YWJsZVwiKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoJ3Vuc3VwcG9ydGVkIHR5cGUgXCInK2UudHlwZSsnXCInKX12YXIgbz1hcmd1bWVudHMubGVuZ3RoPjEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1sxXTtpZihvKXt2YXIgYT1hcmd1bWVudHNbMV07d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXthKCksXCJuZXdcIj09PWkuaWNlR2F0aGVyaW5nU3RhdGUmJihpLmljZUdhdGhlcmluZ1N0YXRlPVwiZ2F0aGVyaW5nXCIsaS5yVygpKSxpLmlXKCl9LDApfXZhciBoPVByb21pc2UucmVzb2x2ZSgpO3JldHVybiBoLnRoZW4oZnVuY3Rpb24oKXtvfHwoXCJuZXdcIj09PWkuaWNlR2F0aGVyaW5nU3RhdGUmJihpLmljZUdhdGhlcmluZ1N0YXRlPVwiZ2F0aGVyaW5nXCIsaS5yVygpKSx3aW5kb3cuc2V0VGltZW91dChpLmlXLmJpbmQoaSksNTAwKSl9KSxofSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1uZXcgTWVkaWFTdHJlYW0saT1bXSxuPXMublcoZS5zZHApLGE9bi5zaGlmdCgpLGg9cy5RVyhhLFwiYT1pY2UtbGl0ZVwiKS5sZW5ndGg+MDtzd2l0Y2godGhpcy5YWT1zLlFXKGEsXCJhPWdyb3VwOkJVTkRMRSBcIikubGVuZ3RoPjAsbi5mb3JFYWNoKGZ1bmN0aW9uKG4sYyl7dmFyIHU9cy5YVyhuKSxsPXVbMF0uc3Vic3RyKDIpLnNwbGl0KFwiIFwiKSxwPWxbMF0sZD1cIjBcIj09PWxbMV0sZj1zLlpXKG4sYSksZz1zLlFXKG4sXCJhPW1pZDpcIik7aWYoZz1nLmxlbmd0aD9nWzBdLnN1YnN0cig2KTpzLiRXKCksXCJhcHBsaWNhdGlvblwiPT09cCYmXCJEVExTL1NDVFBcIj09PWxbMl0pcmV0dXJuIHZvaWQodC5lV1tjXT17ZXo6ZyxLVzohMH0pO3ZhciBFLHYseSxULG0sSSxTLFIsdyxiLEMsXyxQPXMualcobik7ZHx8KEM9cy5ZVyhuLGEpLF89cy5XVyhuLGEpLF8uelc9XCJjbGllbnRcIiksUj1zLnR6KG4pO3ZhciBBLE89cy5RVyhuLFwiYT1zc3JjOlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHMucnooZSl9KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJjbmFtZVwiPT09ZS5pen0pWzBdO08mJihBPU8udmFsdWUpO3ZhciBOPXMuUVcobixcImE9ZW5kLW9mLWNhbmRpZGF0ZXNcIixhKS5sZW5ndGg+MCxEPXMuUVcobixcImE9Y2FuZGlkYXRlOlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHMuZXgoZSl9KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCIxXCI9PT1lLlJXfSk7aWYoXCJvZmZlclwiIT09ZS50eXBlfHxkKVwiYW5zd2VyXCIhPT1lLnR5cGV8fGR8fChFPXQuZVdbY10sdj1FLnNXLHk9RS5PVyxUPUUuTlcsbT1FLmhXLEk9RS5jVyxTPUUuRlcsdz1FLmtXLHQuZVdbY10ueFc9Uix0LmVXW2NdLkxXPVAsdC5lV1tjXS5CVz1BLChofHxOKSYmRC5sZW5ndGgmJnkubnooRCksdC5YWSYmMCE9PWN8fCh5LnN0YXJ0KHYsQyxcImNvbnRyb2xsaW5nXCIpLFQuc3RhcnQoXykpLHQuRFcoRSxcInNlbmRyZWN2XCI9PT1mfHxcInJlY3Zvbmx5XCI9PT1mLFwic2VuZHJlY3ZcIj09PWZ8fFwic2VuZG9ubHlcIj09PWYpLCFJfHxcInNlbmRyZWN2XCIhPT1mJiZcInNlbmRvbmx5XCIhPT1mP2RlbGV0ZSBFLmNXOihiPUkudHJhY2ssaS5wdXNoKFtiLEldKSxyLmFkZFRyYWNrKGIpKSk7ZWxzZXt2YXIgaz10LlhZJiZjPjA/e3NXOnQuZVdbMF0uc1csT1c6dC5lV1swXS5PVyxOVzp0LmVXWzBdLk5XfTp0LklXKGcsYyk7aWYoIU58fHQuWFkmJjAhPT1jfHxrLk9XLm56KEQpLHc9UlRDUnRwUmVjZWl2ZXIuc3oocCksby52ZXJzaW9uPDE1MDE5JiYody5sVz13LmxXLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiIT09ZS5uYW1lfSkpLFM9W3txVzoxMDAxKigyKmMrMil9XSxcInNlbmRyZWN2XCIhPT1mJiZcInNlbmRvbmx5XCIhPT1mfHwoST1uZXcgUlRDUnRwUmVjZWl2ZXIoay5OVyxwKSxiPUkudHJhY2ssaS5wdXNoKFtiLEldKSxyLmFkZFRyYWNrKGIpKSx0LllZLmxlbmd0aD4wJiZ0LllZWzBdLmdldFRyYWNrcygpLmxlbmd0aD49Yyl7dmFyIEw7XCJhdWRpb1wiPT09cD9MPXQuWVlbMF0uZ2V0QXVkaW9UcmFja3MoKVswXTpcInZpZGVvXCI9PT1wJiYoTD10LllZWzBdLmdldFZpZGVvVHJhY2tzKClbMF0pLEwmJihvLnZlcnNpb24+PTE1MDE5JiZcInZpZGVvXCI9PT1wJiYoU1swXS5HVz17cVc6MTAwMSooMipjKzIpKzF9KSxtPW5ldyBSVENSdHBTZW5kZXIoTCxrLk5XKSl9dC5lV1tjXT17c1c6ay5zVyxPVzprLk9XLE5XOmsuTlcsa1c6dyxMVzpQLGhXOm0sY1c6SSxraW5kOnAsZXo6ZyxCVzpBLEZXOlMseFc6Un0sdC5EVyh0LmVXW2NdLCExLFwic2VuZHJlY3ZcIj09PWZ8fFwic2VuZG9ubHlcIj09PWYpfX0pLHRoaXMucmVtb3RlRGVzY3JpcHRpb249e3R5cGU6ZS50eXBlLHNkcDplLnNkcH0sZS50eXBlKXtjYXNlXCJvZmZlclwiOnRoaXMuSlcoXCJoYXZlLXJlbW90ZS1vZmZlclwiKTticmVhaztjYXNlXCJhbnN3ZXJcIjp0aGlzLkpXKFwic3RhYmxlXCIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigndW5zdXBwb3J0ZWQgdHlwZSBcIicrZS50eXBlKydcIicpfXJldHVybiByLmdldFRyYWNrcygpLmxlbmd0aCYmKHQuV1kucHVzaChyKSx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPW5ldyBFdmVudChcImFkZHN0cmVhbVwiKTtlLnN0cmVhbT1yLHQuZGlzcGF0Y2hFdmVudChlKSxudWxsIT09dC5vbmFkZHN0cmVhbSYmd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Lm9uYWRkc3RyZWFtKGUpfSwwKSxpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGk9ZVswXSxuPWVbMV0scz1uZXcgRXZlbnQoXCJ0cmFja1wiKTtzLnRyYWNrPWkscy5yZWNlaXZlcj1uLHMuc3RyZWFtcz1bcl0sdC5kaXNwYXRjaEV2ZW50KHMpLG51bGwhPT10LlFZJiZ3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3QuUVkocyl9LDApfSl9LDApKSxhcmd1bWVudHMubGVuZ3RoPjEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1sxXSYmd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzFdLDApLFByb21pc2UucmVzb2x2ZSgpfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5lVy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuT1cmJmUuT1cuc3RvcCgpLGUuTlcmJmUuTlcuc3RvcCgpLGUuaFcmJmUuaFcuc3RvcCgpLGUuY1cmJmUuY1cuc3RvcCgpfSksdGhpcy5KVyhcImNsb3NlZFwiKX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5KVz1mdW5jdGlvbihlKXt0aGlzLnNpZ25hbGluZ1N0YXRlPWU7dmFyIHQ9bmV3IEV2ZW50KFwic2lnbmFsaW5nc3RhdGVjaGFuZ2VcIik7dGhpcy5kaXNwYXRjaEV2ZW50KHQpLG51bGwhPT10aGlzLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UmJnRoaXMub25zaWduYWxpbmdzdGF0ZWNoYW5nZSh0KX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hVz1mdW5jdGlvbigpe3ZhciBlPW5ldyBFdmVudChcIm5lZ290aWF0aW9ubmVlZGVkXCIpO3RoaXMuZGlzcGF0Y2hFdmVudChlKSxudWxsIT09dGhpcy5vbm5lZ290aWF0aW9ubmVlZGVkJiZ0aGlzLm9ubmVnb3RpYXRpb25uZWVkZWQoZSl9LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuUFc9ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMscj17b3o6MCxjbG9zZWQ6MCxhejowLGh6OjAsY29ubmVjdGVkOjAsY3o6MCxsbDowfTtpZih0aGlzLmVXLmZvckVhY2goZnVuY3Rpb24oZSl7cltlLk9XLnN0YXRlXSsrLHJbZS5OVy5zdGF0ZV0rK30pLHIuY29ubmVjdGVkKz1yLmN6LGU9XCJuZXdcIixyLmxsPjA/ZT1cImZhaWxlZFwiOnIuYXo+MHx8ci5oej4wP2U9XCJjb25uZWN0aW5nXCI6ci51ej4wP2U9XCJkaXNjb25uZWN0ZWRcIjpyLm96PjA/ZT1cIm5ld1wiOihyLmNvbm5lY3RlZD4wfHxyLmN6PjApJiYoZT1cImNvbm5lY3RlZFwiKSxlIT09dC5pY2VDb25uZWN0aW9uU3RhdGUpe3QuaWNlQ29ubmVjdGlvblN0YXRlPWU7dmFyIGk9bmV3IEV2ZW50KFwiaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIpO3RoaXMuZGlzcGF0Y2hFdmVudChpKSxudWxsIT09dGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSYmdGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZShpKX19LHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMuYlcpdGhyb3cgbmV3IEVycm9yKFwiY3JlYXRlT2ZmZXIgY2FsbGVkIHdoaWxlIHRoZXJlIGlzIGEgcGVuZGluZyBvZmZlci5cIik7dmFyIHQ7MT09PWFyZ3VtZW50cy5sZW5ndGgmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGFyZ3VtZW50c1swXT90PWFyZ3VtZW50c1swXTozPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9YXJndW1lbnRzWzJdKTt2YXIgcj1bXSxuPTAsYT0wO2lmKHRoaXMuWVkubGVuZ3RoJiYobj10aGlzLllZWzBdLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoLGE9dGhpcy5ZWVswXS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCksdCl7aWYodC5QWXx8dC5vcHRpb25hbCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTGVnYWN5IG1hbmRhdG9yeS9vcHRpb25hbCBjb25zdHJhaW50cyBub3Qgc3VwcG9ydGVkLlwiKTt2b2lkIDAhPT10Lmx6JiYobj10Lmx6KSx2b2lkIDAhPT10LnB6JiYoYT10LnB6KX1mb3IodGhpcy5ZWS5sZW5ndGgmJnRoaXMuWVlbMF0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtyLnB1c2goe2tpbmQ6ZS5raW5kLHRyYWNrOmUsZHo6XCJhdWRpb1wiPT09ZS5raW5kP24+MDphPjB9KSxcImF1ZGlvXCI9PT1lLmtpbmQ/bi0tOlwidmlkZW9cIj09PWUua2luZCYmYS0tfSk7bj4wfHxhPjA7KW4+MCYmKHIucHVzaCh7a2luZDpcImF1ZGlvXCIsZHo6ITB9KSxuLS0pLGE+MCYmKHIucHVzaCh7a2luZDpcInZpZGVvXCIsZHo6ITB9KSxhLS0pO3I9aShyKTt2YXIgaD1zLmZ6KCksYz1bXTtyLmZvckVhY2goZnVuY3Rpb24odCxyKXt2YXIgaT10LnRyYWNrLG49dC5raW5kLGE9cy4kVygpLGg9ZS5YWSYmcj4wP3tzVzpjWzBdLnNXLE9XOmNbMF0uT1csTlc6Y1swXS5OV306ZS5JVyhhLHIpLHU9UlRDUnRwU2VuZGVyLnN6KG4pO28udmVyc2lvbjwxNTAxOSYmKHUubFc9dS5sVy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJydHhcIiE9PWUubmFtZX0pKSx1LmxXLmZvckVhY2goZnVuY3Rpb24oZSl7XCJIMjY0XCI9PT1lLm5hbWUmJnZvaWQgMD09PWUucGFyYW1ldGVyc1tcImd6XCJdJiYoZS5wYXJhbWV0ZXJzW1wiZ3pcIl09XCIxXCIpfSk7dmFyIGwscCxkPVt7cVc6MTAwMSooMipyKzEpfV07aSYmKG8udmVyc2lvbj49MTUwMTkmJlwidmlkZW9cIj09PW4mJihkWzBdLkdXPXtxVzoxMDAxKigyKnIrMSkrMX0pLGw9bmV3IFJUQ1J0cFNlbmRlcihpLGguTlcpKSx0LmR6JiYocD1uZXcgUlRDUnRwUmVjZWl2ZXIoaC5OVyxuKSksY1tyXT17c1c6aC5zVyxPVzpoLk9XLE5XOmguTlcsa1c6dSxMVzpudWxsLGhXOmwsY1c6cCxraW5kOm4sZXo6YSxGVzpkLHhXOm51bGx9fSksdGhpcy5YWSYmKGgrPVwiYT1ncm91cDpCVU5ETEUgXCIrYy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZXp9KS5qb2luKFwiIFwiKStcIlxcclxcblwiKSxyLmZvckVhY2goZnVuY3Rpb24odCxyKXt2YXIgaT1jW3JdO2grPXMuRXooaSxpLmtXLFwib2ZmZXJcIixlLllZWzBdKX0pLHRoaXMuYlc9Yzt2YXIgdT1uZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwib2ZmZXJcIixzZHA6aH0pO3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0mJndpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1swXSwwLHUpLFByb21pc2UucmVzb2x2ZSh1KX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9cy5meigpO3RoaXMuWFkmJih0Kz1cImE9Z3JvdXA6QlVORExFIFwiK3RoaXMuZVcubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmV6fSkuam9pbihcIiBcIikrXCJcXHJcXG5cIiksdGhpcy5lVy5mb3JFYWNoKGZ1bmN0aW9uKHIpe2lmKHIuS1cpcmV0dXJuIHZvaWQodCs9XCJtPWFwcGxpY2F0aW9uIDAgRFRMUy9TQ1RQIDUwMDBcXHJcXG5jPUlOIElQNCAwLjAuMC4wXFxyXFxuYT1taWQ6XCIrci5leitcIlxcclxcblwiKTt2YXIgaT1lLnVXKHIua1csci5MVyk7dCs9cy5FeihyLGksXCJhbnN3ZXJcIixlLllZWzBdKX0pO3ZhciByPW5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJhbnN3ZXJcIixzZHA6dH0pO3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0mJndpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1swXSwwLHIpLFByb21pc2UucmVzb2x2ZShyKX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU9ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHQ9ZS5zZHBNTGluZUluZGV4O2lmKGUuc2RwTWlkKWZvcih2YXIgcj0wO3I8dGhpcy5lVy5sZW5ndGg7cisrKWlmKHRoaXMuZVdbcl0uZXo9PT1lLnNkcE1pZCl7dD1yO2JyZWFrfXZhciBpPXRoaXMuZVdbdF07aWYoaSl7dmFyIG49T2JqZWN0LmtleXMoZS5jYW5kaWRhdGUpLmxlbmd0aD4wP3MuZXgoZS5jYW5kaWRhdGUpOnt9O2lmKFwidGNwXCI9PT1uLnByb3RvY29sJiYoMD09PW4ucG9ydHx8OT09PW4ucG9ydCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2lmKFwiMVwiIT09bi5SVylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7aS5PVy52eihuKTt2YXIgbz1zLm5XKHRoaXMucmVtb3RlRGVzY3JpcHRpb24uc2RwKTtvW3QrMV0rPShuLnR5cGU/ZS5jYW5kaWRhdGUudHJpbSgpOlwiYT1lbmQtb2YtY2FuZGlkYXRlc1wiKStcIlxcclxcblwiLHRoaXMucmVtb3RlRGVzY3JpcHRpb24uc2RwPW8uam9pbihcIlwiKX19ZWxzZSBmb3IodmFyIGE9MDthPHRoaXMuZVcubGVuZ3RoO2ErKylpZih0aGlzLmVXW2FdLk9XLnZ6KHt9KSx0aGlzLlhZKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4xJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0mJndpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1sxXSwwKSxQcm9taXNlLnJlc29sdmUoKX0sd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3ZhciBlPVtdO3RoaXMuZVcuZm9yRWFjaChmdW5jdGlvbih0KXtbXCJydHBTZW5kZXJcIixcInJ0cFJlY2VpdmVyXCIsXCJpY2VHYXRoZXJlclwiLFwiaWNlVHJhbnNwb3J0XCIsXCJkdGxzVHJhbnNwb3J0XCJdLmZvckVhY2goZnVuY3Rpb24ocil7dFtyXSYmZS5wdXNoKHRbcl0uZ2V0U3RhdHMoKSl9KX0pO3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0scj1mdW5jdGlvbihlKXtyZXR1cm57eXo6XCJpbmJvdW5kLXJ0cFwiLFR6Olwib3V0Ym91bmQtcnRwXCIsbXo6XCJjYW5kaWRhdGUtcGFpclwiLGJZOlwibG9jYWwtY2FuZGlkYXRlXCIsQ1k6XCJyZW1vdGUtY2FuZGlkYXRlXCJ9W2UudHlwZV18fGUudHlwZX07cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGkpe3ZhciBuPW5ldyBNYXA7UHJvbWlzZS5hbGwoZSkudGhlbihmdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXtlW3RdLnR5cGU9cihlW3RdKSxuLnNldCh0LGVbdF0pfSl9KSx0JiZ3aW5kb3cuc2V0VGltZW91dCh0LDAsbiksaShuKX0pfSl9fX07ZS5pPXthTDphLmFMLGNMOnIoMTI2KX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT17fTtpLiRXPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLDEwKX0saS5IVz1pLiRXKCksaS5YVz1mdW5jdGlvbihlKXtyZXR1cm4gZS50cmltKCkuc3BsaXQoXCJcXG5cIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0oKX0pfSxpLm5XPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KFwiXFxubT1cIikubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuKHQ+MD9cIm09XCIrZTplKS50cmltKCkrXCJcXHJcXG5cIn0pfSxpLlFXPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkuWFcoZSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZS5pbmRleE9mKHQpfSl9LGkuZXg9ZnVuY3Rpb24oZSl7dmFyIHQ7dD0wPT09ZS5pbmRleE9mKFwiYT1jYW5kaWRhdGU6XCIpP2Uuc3Vic3RyaW5nKDEyKS5zcGxpdChcIiBcIik6ZS5zdWJzdHJpbmcoMTApLnNwbGl0KFwiIFwiKTtmb3IodmFyIHI9e0l6OnRbMF0sUlc6dFsxXSxwcm90b2NvbDp0WzJdLnRvTG93ZXJDYXNlKCksU3o6cGFyc2VJbnQodFszXSwxMCksaXA6dFs0XSxwb3J0OnBhcnNlSW50KHRbNV0sMTApLHR5cGU6dFs3XX0saT04O2k8dC5sZW5ndGg7aSs9Milzd2l0Y2godFtpXSl7Y2FzZVwicmFkZHJcIjpyLlJ6PXRbaSsxXTticmVhaztjYXNlXCJycG9ydFwiOnIud3o9cGFyc2VJbnQodFtpKzFdLDEwKTticmVhaztjYXNlXCJ0Y3B0eXBlXCI6ci5iej10W2krMV07YnJlYWs7ZGVmYXVsdDpyW3RbaV1dPXRbaSsxXX1yZXR1cm4gcn0saS53Vz1mdW5jdGlvbihlKXt2YXIgdD1bXTt0LnB1c2goZS5JeiksdC5wdXNoKGUuUlcpLHQucHVzaChlLnByb3RvY29sLnRvVXBwZXJDYXNlKCkpLHQucHVzaChlLlN6KSx0LnB1c2goZS5pcCksdC5wdXNoKGUucG9ydCk7dmFyIHI9ZS50eXBlO3JldHVybiB0LnB1c2goXCJ0eXBcIiksdC5wdXNoKHIpLFwiaG9zdFwiIT09ciYmZS5SeiYmZS53eiYmKHQucHVzaChcInJhZGRyXCIpLHQucHVzaChlLlJ6KSx0LnB1c2goXCJycG9ydFwiKSx0LnB1c2goZS53eikpLGUuYnomJlwidGNwXCI9PT1lLnByb3RvY29sLnRvTG93ZXJDYXNlKCkmJih0LnB1c2goXCJ0Y3B0eXBlXCIpLHQucHVzaChlLmJ6KSksXCJjYW5kaWRhdGU6XCIrdC5qb2luKFwiIFwiKX0saS5Dej1mdW5jdGlvbihlKXtyZXR1cm4gZS5zdWJzdHIoMTQpLnNwbGl0KFwiIFwiKX0saS5fej1mdW5jdGlvbihlKXt2YXIgdD1lLnN1YnN0cig5KS5zcGxpdChcIiBcIikscj17Zlc6cGFyc2VJbnQodC5zaGlmdCgpLDEwKX07cmV0dXJuIHQ9dFswXS5zcGxpdChcIi9cIiksci5uYW1lPXRbMF0sci52Vz1wYXJzZUludCh0WzFdLDEwKSxyLnlXPTM9PT10Lmxlbmd0aD9wYXJzZUludCh0WzJdLDEwKToxLHJ9LGkuUHo9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mVztyZXR1cm4gdm9pZCAwIT09ZS5nVyYmKHQ9ZS5nVyksXCJhPXJ0cG1hcDpcIit0K1wiIFwiK2UubmFtZStcIi9cIitlLnZXKygxIT09ZS55Vz9cIi9cIitlLnlXOlwiXCIpK1wiXFxyXFxuXCJ9LGkuQXo9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdWJzdHIoOSkuc3BsaXQoXCIgXCIpO3JldHVybntpZDpwYXJzZUludCh0WzBdLDEwKSxkaXJlY3Rpb246dFswXS5pbmRleE9mKFwiL1wiKT4wP3RbMF0uc3BsaXQoXCIvXCIpWzFdOlwic2VuZHJlY3ZcIix1cmk6dFsxXX19LGkuT3o9ZnVuY3Rpb24oZSl7cmV0dXJuXCJhPWV4dG1hcDpcIisoZS5pZHx8ZS5OeikrKGUuZGlyZWN0aW9uJiZcInNlbmRyZWN2XCIhPT1lLmRpcmVjdGlvbj9cIi9cIitlLmRpcmVjdGlvbjpcIlwiKStcIiBcIitlLnVyaStcIlxcclxcblwifSxpLkR6PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXt9LGk9ZS5zdWJzdHIoZS5pbmRleE9mKFwiIFwiKSsxKS5zcGxpdChcIjtcIiksbj0wO248aS5sZW5ndGg7bisrKXQ9aVtuXS50cmltKCkuc3BsaXQoXCI9XCIpLHJbdFswXS50cmltKCldPXRbMV07cmV0dXJuIHJ9LGkua3o9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIixyPWUuZlc7aWYodm9pZCAwIT09ZS5nVyYmKHI9ZS5nVyksZS5wYXJhbWV0ZXJzJiZPYmplY3Qua2V5cyhlLnBhcmFtZXRlcnMpLmxlbmd0aCl7dmFyIGk9W107T2JqZWN0LmtleXMoZS5wYXJhbWV0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2kucHVzaCh0K1wiPVwiK2UucGFyYW1ldGVyc1t0XSl9KSx0Kz1cImE9Zm10cDpcIityK1wiIFwiK2kuam9pbihcIjtcIikrXCJcXHJcXG5cIn1yZXR1cm4gdH0saS5Mej1mdW5jdGlvbihlKXt2YXIgdD1lLnN1YnN0cihlLmluZGV4T2YoXCIgXCIpKzEpLnNwbGl0KFwiIFwiKTtyZXR1cm57dHlwZTp0LnNoaWZ0KCksbVc6dC5qb2luKFwiIFwiKX19LGkuTXo9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIixyPWUuZlc7cmV0dXJuIHZvaWQgMCE9PWUuZ1cmJihyPWUuZ1cpLGUuVFcmJmUuVFcubGVuZ3RoJiZlLlRXLmZvckVhY2goZnVuY3Rpb24oZSl7dCs9XCJhPXJ0Y3AtZmI6XCIrcitcIiBcIitlLnR5cGUrKGUubVcmJmUubVcubGVuZ3RoP1wiIFwiK2UubVc6XCJcIikrXCJcXHJcXG5cIn0pLHR9LGkucno9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbmRleE9mKFwiIFwiKSxyPXtxVzpwYXJzZUludChlLnN1YnN0cig3LHQtNyksMTApfSxpPWUuaW5kZXhPZihcIjpcIix0KTtyZXR1cm4gaT4tMT8oci5pej1lLnN1YnN0cih0KzEsaS10LTEpLHIudmFsdWU9ZS5zdWJzdHIoaSsxKSk6ci5pej1lLnN1YnN0cih0KzEpLHJ9LGkuRno9ZnVuY3Rpb24oZSl7dmFyIHQ9aS5RVyhlLFwiYT1taWQ6XCIpWzBdO2lmKHQpcmV0dXJuIHQuc3Vic3RyKDYpfSxpLlV6PWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3Vic3RyKDE0KS5zcGxpdChcIiBcIik7cmV0dXJue2FsZ29yaXRobTp0WzBdLnRvTG93ZXJDYXNlKCksdmFsdWU6dFsxXX19LGkuV1c9ZnVuY3Rpb24oZSx0KXtyZXR1cm57elc6XCJhdXRvXCIsQno6aS5RVyhlK3QsXCJhPWZpbmdlcnByaW50OlwiKS5tYXAoaS5Veil9fSxpLkh6PWZ1bmN0aW9uKGUsdCl7dmFyIHI9XCJhPXNldHVwOlwiK3QrXCJcXHJcXG5cIjtyZXR1cm4gZS5Cei5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IrPVwiYT1maW5nZXJwcmludDpcIitlLmFsZ29yaXRobStcIiBcIitlLnZhbHVlK1wiXFxyXFxuXCJ9KSxyfSxpLllXPWZ1bmN0aW9uKGUsdCl7dmFyIHI9aS5YVyhlKTtyZXR1cm4gcj1yLmNvbmNhdChpLlhXKHQpKSx7eHo6ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1lLmluZGV4T2YoXCJhPWljZS11ZnJhZzpcIil9KVswXS5zdWJzdHIoMTIpLHBhc3N3b3JkOnIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZS5pbmRleE9mKFwiYT1pY2UtcHdkOlwiKX0pWzBdLnN1YnN0cigxMCl9fSxpLnF6PWZ1bmN0aW9uKGUpe3JldHVyblwiYT1pY2UtdWZyYWc6XCIrZS54eitcIlxcclxcbmE9aWNlLXB3ZDpcIitlLnBhc3N3b3JkK1wiXFxyXFxuXCJ9LGkualc9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXtsVzpbXSxwVzpbXSxkVzpbXSxVVzpbXX0scj1pLlhXKGUpLG49clswXS5zcGxpdChcIiBcIikscz0zO3M8bi5sZW5ndGg7cysrKXt2YXIgbz1uW3NdLGE9aS5RVyhlLFwiYT1ydHBtYXA6XCIrbytcIiBcIilbMF07aWYoYSl7dmFyIGg9aS5feihhKSxjPWkuUVcoZSxcImE9Zm10cDpcIitvK1wiIFwiKTtzd2l0Y2goaC5wYXJhbWV0ZXJzPWMubGVuZ3RoP2kuRHooY1swXSk6e30saC5UVz1pLlFXKGUsXCJhPXJ0Y3AtZmI6XCIrbytcIiBcIikubWFwKGkuTHopLHQubFcucHVzaChoKSxoLm5hbWUudG9VcHBlckNhc2UoKSl7Y2FzZVwiUkVEXCI6Y2FzZVwiVUxQRkVDXCI6dC5kVy5wdXNoKGgubmFtZS50b1VwcGVyQ2FzZSgpKX19fXJldHVybiBpLlFXKGUsXCJhPWV4dG1hcDpcIikuZm9yRWFjaChmdW5jdGlvbihlKXt0LnBXLnB1c2goaS5BeihlKSl9KSx0fSxpLkd6PWZ1bmN0aW9uKGUsdCl7dmFyIHI9XCJcIjtyKz1cIm09XCIrZStcIiBcIixyKz10LmxXLmxlbmd0aD4wP1wiOVwiOlwiMFwiLHIrPVwiIFVEUC9UTFMvUlRQL1NBVlBGIFwiLHIrPXQubFcubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lLmdXP2UuZ1c6ZS5mV30pLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIscis9XCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuXCIscis9XCJhPXJ0Y3A6OSBJTiBJUDQgMC4wLjAuMFxcclxcblwiLHQubFcuZm9yRWFjaChmdW5jdGlvbihlKXtyKz1pLlB6KGUpLHIrPWkua3ooZSkscis9aS5NeihlKX0pO3ZhciBuPTA7cmV0dXJuIHQubFcuZm9yRWFjaChmdW5jdGlvbihlKXtlLlZ6Pm4mJihuPWUuVnopfSksbj4wJiYocis9XCJhPW1heHB0aW1lOlwiK24rXCJcXHJcXG5cIikscis9XCJhPXJ0Y3AtbXV4XFxyXFxuXCIsdC5wVy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IrPWkuT3ooZSl9KSxyfSxpLnR6PWZ1bmN0aW9uKGUpe3ZhciB0LHI9W10sbj1pLmpXKGUpLHM9LTEhPT1uLmRXLmluZGV4T2YoXCJSRURcIiksbz0tMSE9PW4uZFcuaW5kZXhPZihcIlVMUEZFQ1wiKSxhPWkuUVcoZSxcImE9c3NyYzpcIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBpLnJ6KGUpfSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwiY25hbWVcIj09PWUuaXp9KSxoPWEubGVuZ3RoPjAmJmFbMF0ucVcsYz1pLlFXKGUsXCJhPXNzcmMtZ3JvdXA6RklEXCIpLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KFwiIFwiKTtyZXR1cm4gdC5zaGlmdCgpLHQubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChlLDEwKX0pfSk7Yy5sZW5ndGg+MCYmY1swXS5sZW5ndGg+MSYmY1swXVswXT09PWgmJih0PWNbMF1bMV0pLG4ubFcuZm9yRWFjaChmdW5jdGlvbihlKXtpZihcIlJUWFwiPT09ZS5uYW1lLnRvVXBwZXJDYXNlKCkmJmUucGFyYW1ldGVycy5FVyl7dmFyIGk9e3FXOmgsano6cGFyc2VJbnQoZS5wYXJhbWV0ZXJzLkVXLDEwKSxHVzp7cVc6dH19O3IucHVzaChpKSxzJiYoaT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGkpKSxpLlF6PXtxVzp0LEt6Om8/XCJyZWQrdWxwZmVjXCI6XCJyZWRcIn0sci5wdXNoKGkpKX19KSwwPT09ci5sZW5ndGgmJmgmJnIucHVzaCh7cVc6aH0pO3ZhciB1PWkuUVcoZSxcImI9XCIpO3JldHVybiB1Lmxlbmd0aCYmKDA9PT11WzBdLmluZGV4T2YoXCJiPVRJQVM6XCIpP3U9cGFyc2VJbnQodVswXS5zdWJzdHIoNyksMTApOjA9PT11WzBdLmluZGV4T2YoXCJiPUFTOlwiKSYmKHU9cGFyc2VJbnQodVswXS5zdWJzdHIoNSksMTApKSxyLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5Zej11fSkpLHJ9LGkuV3o9ZnVuY3Rpb24oZSl7dmFyIHQ9e30scj1pLlFXKGUsXCJhPXNzcmM6XCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gaS5yeihlKX0pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImNuYW1lXCI9PT1lLml6fSlbMF07ciYmKHQuQlc9ci52YWx1ZSx0LnFXPXIucVcpO3ZhciBuPWkuUVcoZSxcImE9cnRjcC1yc2l6ZVwiKTt0Lnp6PW4ubGVuZ3RoPjAsdC5Kej0wPT09bi5sZW5ndGg7dmFyIHM9aS5RVyhlLFwiYT1ydGNwLW11eFwiKTtyZXR1cm4gdC5Yej1zLmxlbmd0aD4wLHR9LGkuWno9ZnVuY3Rpb24oZSl7dmFyIHQscj1pLlFXKGUsXCJhPW1zaWQ6XCIpO2lmKDE9PT1yLmxlbmd0aClyZXR1cm4gdD1yWzBdLnN1YnN0cig3KS5zcGxpdChcIiBcIikse3N0cmVhbTp0WzBdLHRyYWNrOnRbMV19O3ZhciBuPWkuUVcoZSxcImE9c3NyYzpcIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBpLnJ6KGUpfSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwibXNpZFwiPT09ZS5pen0pO3JldHVybiBuLmxlbmd0aD4wPyh0PW5bMF0udmFsdWUuc3BsaXQoXCIgXCIpLHtzdHJlYW06dFswXSx0cmFjazp0WzFdfSk6dm9pZCAwfSxpLmZ6PWZ1bmN0aW9uKCl7cmV0dXJuXCJ2PTBcXHJcXG5vPXRoaXNpc2FkYXB0ZXJvcnRjIDgxNjk2Mzk5MTU2NDY5NDMxMzcgMiBJTiBJUDQgMTI3LjAuMC4xXFxyXFxucz0tXFxyXFxudD0wIDBcXHJcXG5cIn0saS5Fej1mdW5jdGlvbihlLHQscixuKXt2YXIgcz1pLkd6KGUua2luZCx0KTtpZihzKz1pLnF6KGUuc1cuJHooKSkscys9aS5IeihlLk5XLiR6KCksXCJvZmZlclwiPT09cj9cImFjdHBhc3NcIjpcImFjdGl2ZVwiKSxzKz1cImE9bWlkOlwiK2UuZXorXCJcXHJcXG5cIixlLmRpcmVjdGlvbj9zKz1cImE9XCIrZS5kaXJlY3Rpb24rXCJcXHJcXG5cIjplLmhXJiZlLmNXP3MrPVwiYT1zZW5kcmVjdlxcclxcblwiOmUuaFc/cys9XCJhPXNlbmRvbmx5XFxyXFxuXCI6ZS5jVz9zKz1cImE9cmVjdm9ubHlcXHJcXG5cIjpzKz1cImE9aW5hY3RpdmVcXHJcXG5cIixlLmhXKXt2YXIgbz1cIm1zaWQ6XCIrbi5pZCtcIiBcIitlLmhXLnRyYWNrLmlkK1wiXFxyXFxuXCI7cys9XCJhPVwiK28scys9XCJhPXNzcmM6XCIrZS5GV1swXS5xVytcIiBcIitvLGUuRldbMF0uR1cmJihzKz1cImE9c3NyYzpcIitlLkZXWzBdLkdXLnFXK1wiIFwiK28scys9XCJhPXNzcmMtZ3JvdXA6RklEIFwiK2UuRldbMF0ucVcrXCIgXCIrZS5GV1swXS5HVy5xVytcIlxcclxcblwiKX1yZXR1cm4gcys9XCJhPXNzcmM6XCIrZS5GV1swXS5xVytcIiBjbmFtZTpcIitpLkhXK1wiXFxyXFxuXCIsZS5oVyYmZS5GV1swXS5HVyYmKHMrPVwiYT1zc3JjOlwiK2UuRldbMF0uR1cucVcrXCIgY25hbWU6XCIraS5IVytcIlxcclxcblwiKSxzfSxpLlpXPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWkuWFcoZSksbj0wO248ci5sZW5ndGg7bisrKXN3aXRjaChyW25dKXtjYXNlXCJhPXNlbmRyZWN2XCI6Y2FzZVwiYT1zZW5kb25seVwiOmNhc2VcImE9cmVjdm9ubHlcIjpjYXNlXCJhPWluYWN0aXZlXCI6cmV0dXJuIHJbbl0uc3Vic3RyKDIpfXJldHVybiB0P2kuWlcodCk6XCJzZW5kcmVjdlwifSxpLmVKPWZ1bmN0aW9uKGUpe3JldHVybiBpLlhXKGUpWzBdLnNwbGl0KFwiIFwiKVswXS5zdWJzdHIoMil9LGkuenM9ZnVuY3Rpb24oZSl7cmV0dXJuXCIwXCI9PT1lLnNwbGl0KFwiIFwiLDIpWzFdfSxlLmk9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2UuaT1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVybntuYW1lOntGWTpcIk5vdEFsbG93ZWRFcnJvclwifVtlLm5hbWVdfHxlLm5hbWUsbWVzc2FnZTplLm1lc3NhZ2UsQlk6ZS5CWSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWV9fX0sdD1uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO25hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKHIpe3JldHVybiB0KHIpLmNhdGNoKGZ1bmN0aW9uKHQpe3JldHVybiBQcm9taXNlLnJlamVjdChlKHQpKX0pfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDE3KS5XdSxuPXtwTDpmdW5jdGlvbigpe1wib2JqZWN0XCIhPXR5cGVvZiB3aW5kb3d8fCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb258fFwib250cmFja1wiaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJvbnRyYWNrXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLkVZfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5FWSYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5FWSksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWRkc3RyZWFtXCIsdGhpcy52WSkpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5FWT1lKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJhZGRzdHJlYW1cIix0aGlzLnZZPWZ1bmN0aW9uKGUpe2Uuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9bmV3IEV2ZW50KFwidHJhY2tcIik7ci50cmFjaz10LHIucmVjZWl2ZXI9e3RyYWNrOnR9LHIuc3RyZWFtcz1bZS5zdHJlYW1dLHRoaXMuZGlzcGF0Y2hFdmVudChyKX0uYmluZCh0aGlzKSl9LmJpbmQodGhpcykpfX0pfSxsTDpmdW5jdGlvbigpe1wib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJighd2luZG93LkhUTUxNZWRpYUVsZW1lbnR8fFwic3JjT2JqZWN0XCJpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGV8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsXCJzcmNPYmplY3RcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW96U3JjT2JqZWN0fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5tb3pTcmNPYmplY3Q9ZX19KSl9LGFMOmZ1bmN0aW9uKCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbnx8d2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uKSl7d2luZG93LlJUQ1BlZXJDb25uZWN0aW9ufHwod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uPWZ1bmN0aW9uKGUsdCl7aWYoaS52ZXJzaW9uPDM4JiZlJiZlLmljZVNlcnZlcnMpe2Zvcih2YXIgcj1bXSxuPTA7bjxlLmljZVNlcnZlcnMubGVuZ3RoO24rKyl7dmFyIHM9ZS5pY2VTZXJ2ZXJzW25dO2lmKHMuaGFzT3duUHJvcGVydHkoXCJ1cmxzXCIpKWZvcih2YXIgbz0wO288cy5WWS5sZW5ndGg7bysrKXt2YXIgYT17dXJsOnMuVllbb119OzA9PT1zLlZZW29dLmluZGV4T2YoXCJ0dXJuXCIpJiYoYS51c2VybmFtZT1zLnVzZXJuYW1lLGEudEo9cy50Siksci5wdXNoKGEpfWVsc2Ugci5wdXNoKGUuaWNlU2VydmVyc1tuXSl9ZS5pY2VTZXJ2ZXJzPXJ9cmV0dXJuIG5ldyBtb3pSVENQZWVyQ29ubmVjdGlvbihlLHQpfSx3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlPW1velJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxtb3pSVENQZWVyQ29ubmVjdGlvbi53WSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbixcImdlbmVyYXRlQ2VydGlmaWNhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG1velJUQ1BlZXJDb25uZWN0aW9uLndZfX0pLHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb249bW96UlRDU2Vzc2lvbkRlc2NyaXB0aW9uLHdpbmRvdy5SVENJY2VDYW5kaWRhdGU9bW96UlRDSWNlQ2FuZGlkYXRlKSxbXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLFwiYWRkSWNlQ2FuZGlkYXRlXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW2VdO1JUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09bmV3KFwiYWRkSWNlQ2FuZGlkYXRlXCI9PT1lP1JUQ0ljZUNhbmRpZGF0ZTpSVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7dmFyIGU9UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZTtSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT9lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTooYXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0uYXBwbHkobnVsbCksUHJvbWlzZS5yZXNvbHZlKCkpfTt2YXIgdD1mdW5jdGlvbihlKXt2YXIgdD1uZXcgTWFwO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3Quc2V0KHIsZVtyXSksdFtyXT1lW3JdfSksdH0scj17eXo6XCJpbmJvdW5kLXJ0cFwiLFR6Olwib3V0Ym91bmQtcnRwXCIsbXo6XCJjYW5kaWRhdGUtcGFpclwiLGJZOlwibG9jYWwtY2FuZGlkYXRlXCIsQ1k6XCJyZW1vdGUtY2FuZGlkYXRlXCJ9LG49UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO1JUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbihlLHMsbyl7cmV0dXJuIG4uYXBwbHkodGhpcyxbZXx8bnVsbF0pLnRoZW4oZnVuY3Rpb24oZSl7aWYoaS52ZXJzaW9uPDQ4JiYoZT10KGUpKSxpLnZlcnNpb248NTMmJiFzKXRyeXtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS50eXBlPXJbZS50eXBlXXx8ZS50eXBlfSl9Y2F0Y2godCl7aWYoXCJUeXBlRXJyb3JcIiE9PXQubmFtZSl0aHJvdyB0O2UuZm9yRWFjaChmdW5jdGlvbih0LGkpe2Uuc2V0KGksT2JqZWN0LmFzc2lnbih7fSx0LHt0eXBlOnJbdC50eXBlXXx8dC50eXBlfSkpfSl9cmV0dXJuIGV9KS50aGVuKHMsbyl9fX19O2UuaT17cEw6bi5wTCxsTDpuLmxMLGFMOm4uYUwsY0w6cigxMjgpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMTcpLmxvZyxuPXIoMTcpLld1O2UuaT1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVybntuYW1lOntySjpcIk5vdEFsbG93ZWRFcnJvclwiLEZZOlwiTm90QWxsb3dlZEVycm9yXCJ9W2UubmFtZV18fGUubmFtZSxtZXNzYWdlOntcIlRoZSBvcGVyYXRpb24gaXMgaW5zZWN1cmUuXCI6XCJUaGUgcmVxdWVzdCBpcyBub3QgYWxsb3dlZCBieSB0aGUgdXNlciBhZ2VudCBvciB0aGUgcGxhdGZvcm0gaW4gdGhlIGN1cnJlbnQgY29udGV4dC5cIn1bZS5tZXNzYWdlXXx8ZS5tZXNzYWdlLEJZOmUuQlksdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lKyh0aGlzLm1lc3NhZ2UmJlwiOiBcIikrdGhpcy5tZXNzYWdlfX19LHQ9ZnVuY3Rpb24odCxyLHMpe3ZhciBvPWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHxlLmlKKXJldHVybiBlO3ZhciB0PVtdO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe2lmKFwicmVxdWlyZVwiIT09ciYmXCJhZHZhbmNlZFwiIT09ciYmXCJtZWRpYVNvdXJjZVwiIT09cil7dmFyIGk9ZVtyXT1cIm9iamVjdFwiPT10eXBlb2YgZVtyXT9lW3JdOntBWTplW3JdfTtpZih2b2lkIDA9PT1pLm1pbiYmdm9pZCAwPT09aS5tYXgmJnZvaWQgMD09PWkuT1l8fHQucHVzaChyKSx2b2lkIDAhPT1pLk9ZJiYoXCJudW1iZXJcIj09dHlwZW9mIGkuT1k/aS5taW49aS5tYXg9aS5PWTplW3JdPWkuT1ksZGVsZXRlIGkuT1kpLHZvaWQgMCE9PWkuQVkpe2UuTlk9ZS5OWXx8W107dmFyIG49e307XCJudW1iZXJcIj09dHlwZW9mIGkuQVk/bltyXT17bWluOmkuQVksbWF4OmkuQVl9Om5bcl09aS5BWSxlLk5ZLnB1c2gobiksZGVsZXRlIGkuQVksT2JqZWN0LmtleXMoaSkubGVuZ3RofHxkZWxldGUgZVtyXX19fSksdC5sZW5ndGgmJihlLmlKPXQpLGV9O3JldHVybiB0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpLG4udmVyc2lvbjwzOCYmKGkoXCJzcGVjOiBcIitKU09OLnN0cmluZ2lmeSh0KSksdC5IUiYmKHQuSFI9byh0LkhSKSksdC52aWRlbyYmKHQudmlkZW89byh0LnZpZGVvKSksaShcImZmMzc6IFwiK0pTT04uc3RyaW5naWZ5KHQpKSksbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSh0LHIsZnVuY3Rpb24odCl7cyhlKHQpKX0pfSxyPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyLGkpe3QoZSxyLGkpfSl9O2lmKG5hdmlnYXRvci5tZWRpYURldmljZXN8fChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzPXtnZXRVc2VyTWVkaWE6cixhZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7fSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7fX0pLG5hdmlnYXRvci5tZWRpYURldmljZXMuTFk9bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5MWXx8ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7ZShbe2tpbmQ6XCJhdWRpb2lucHV0XCIsTVk6XCJkZWZhdWx0XCIsbGFiZWw6XCJcIix4WTpcIlwifSx7a2luZDpcInZpZGVvaW5wdXRcIixNWTpcImRlZmF1bHRcIixsYWJlbDpcIlwiLHhZOlwiXCJ9XSl9KX0sbi52ZXJzaW9uPDQxKXt2YXIgcz1uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLkxZLmJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5MWT1mdW5jdGlvbigpe3JldHVybiBzKCkudGhlbih2b2lkIDAsZnVuY3Rpb24oZSl7aWYoXCJOb3RGb3VuZEVycm9yXCI9PT1lLm5hbWUpcmV0dXJuW107dGhyb3cgZX0pfX1pZihuLnZlcnNpb248NDkpe3ZhciBvPW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24odCl7cmV0dXJuIG8odCkudGhlbihmdW5jdGlvbihlKXtpZih0LkhSJiYhZS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aHx8dC52aWRlbyYmIWUuZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpdGhyb3cgZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc3RvcCgpfSksbmV3IERPTUV4Y2VwdGlvbihcIlRoZSBvYmplY3QgY2FuIG5vdCBiZSBmb3VuZCBoZXJlLlwiLFwiTm90Rm91bmRFcnJvclwiKTtyZXR1cm4gZX0sZnVuY3Rpb24odCl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUodCkpfSl9fW5hdmlnYXRvci5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSxyLGkpe2lmKG4udmVyc2lvbjw0NClyZXR1cm4gdChlLHIsaSk7Y29uc29sZS53YXJuKFwibmF2aWdhdG9yLmdldFVzZXJNZWRpYSBoYXMgYmVlbiByZXBsYWNlZCBieSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYVwiKSxuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShlKS50aGVuKHIsaSl9fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXtjTDpmdW5jdGlvbigpe25hdmlnYXRvci5nZXRVc2VyTWVkaWF8fChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhP25hdmlnYXRvci5nZXRVc2VyTWVkaWE9bmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcik6bmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEmJihuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUsdCxyKXtuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShlKS50aGVuKHQscil9LmJpbmQobmF2aWdhdG9yKSkpfX07ZS5pPXtjTDppLmNMfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuaHV8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiYoZVtpXT10W2ldKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cigyMCk7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gaSh0LGUpLHR9KG4uSGl2ZUNvbW0uT3B0aW9ucy5UcCk7ZS5mTD10fShlLk9wdGlvbnN8fChlLk9wdGlvbnM9e30pKX0odC5IaXZlQ29tbXx8KHQuSGl2ZUNvbW09e30pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5pc0xpdmU9ZSx0aGlzLnByb3RvY29sPXQsdGhpcy5JTT1yfXJldHVybiBlLnByb3RvdHlwZS51Qj1mdW5jdGlvbigpe3ZhciBlPW5ldyBoaXZlLnNuYXBzaG90cy5TdHJlYW1JbmZvO3JldHVybiBlLnN0cmVhbVR5cGU9dGhpcy5pc0xpdmU/U3RyZWFtVHlwZS5MSVZFOlN0cmVhbVR5cGUua0ssZS5zdHJlYW1Qcm90b2NvbD10aGlzLnByb3RvY29sLGUudXJsPXRoaXMuSU0sZX0sZX0oKTt0LkFMPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLmh1fHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKGVbaV09dFtpXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXIoNCkscz1yKDU1KSxvPXIoNDQpLlBwLGE9cigwKSxoPXIoMTMzKSxjPXIoNzMpLHU9cigxOSksbD1yKDU2KSxwPXIoMTk4KSxkPXIoMjYpLGY9cigxOCksZz1yKDIxKSxFPXIoNTQpLHY9cigxKSx5PXIoNDUpLFQ9cC5IaXZlQ29tbS5PcHRpb25zLG09ZC5IaXZlQ29tbS5IaXZlVGVjaEVycm9yLEk9ZC5IaXZlQ29tbS52RSxTPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQocixpLG4pe3ZhciBzPWUuY2FsbCh0aGlzLHIsaSl8fHRoaXM7cmV0dXJuIHMub3B0aW9uc189bmV3IFQubkosdm9pZCAwIT1pW3QuRUxdJiZnLlNwKGlbdC5FTF0scy5vcHRpb25zXykscy5VUT1uLHN9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRUx9LHQucHJvdG90eXBlLmdldFZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nTC5nZXRQbHVnaW5WZXJzaW9uKCl9LHQucHJvdG90eXBlLnZMPWZ1bmN0aW9uKCl7cmV0dXJuITB9LHQucHJvdG90eXBlLnlMPWZ1bmN0aW9uKCl7cmV0dXJuIGMubGIuQXBpP3RoaXMuc0ooKSYmdGhpcy5YSCgpP24ucmVzb2x2ZSghMCk6bi5yZWplY3QobmV3IG0oSS5wRSxcIldlYlJUQyBEYXRhQ2hhbm5lbHMgbm90IHN1cHBvcnRlZCBieSBicm93c2VyXCIpKTpuLnJlamVjdChuZXcgbShJLnBFLFwiTm90IGluY2x1ZGVkIGluIHRoZSBwYWdlXCIpKX0sdC5wcm90b3R5cGUuaW5pdFNlc3Npb249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiB0aGlzLnlMKCkudGhlbihmdW5jdGlvbigpe3ZhciBpPXQudGlja2V0O3IuX0woKTt2YXIgbj1pLk5OKCk7MD09PW4uaW5kZXhPZihcIi8vXCIpJiYobj1sb2NhdGlvbi5wcm90b2NvbCtuKTt2YXIgcz1yLlRMKGUsaSxuLHQpO3JldHVybiBFLnp1LnJlZ2lzdGVyVGVjaChyLHMuaWQpLEUuenUucmVnaXN0ZXJDb21tKHIuZ0wscy5pZCksZi5IaXZlUmVxdWVzdEZhY3RvcnkucmVnaXN0ZXJUZWNoKHMuaWQsci5nZXROYW1lKCkpLHdpbmRvdyYmd2luZG93LmFjdGl2YXRlWEhSSW50ZXJjZXB0b3ImJndpbmRvdy5hY3RpdmF0ZVhIUkludGVyY2VwdG9yKHIuZ0wubG9nZ2VyTGV2ZWwoKT55LlROLnBOLmluZm8pLHN9KX0sdC5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10Lm1hbmlmZXN0LnRvTG93ZXJDYXNlKCksaT1lLnRvTG93ZXJDYXNlKCksbj1yLmluZGV4T2YoXCIuaXNtL21hbmlmZXN0XCIpO2lmKG4+LTEpe3ZhciBzPXIuc3Vic3RyaW5nKDAsbik7aWYoaS5pbmRleE9mKHMpPi0xKXJldHVybiBpLmluZGV4T2YoXCIuaXNtL21hbmlmZXN0KGZvcm1hdD1tcGQtdGltZS1jc2YpXCIpPi0xP3RoaXMub0o/KHQudGlja2V0LlNvdXJjZVVSTD1lLCEwKTp0aGlzLmFKKHQsXCJUaGUgcGxheWVyIGRvZXMgbm90IHVzZSBIaXZlUmVxdWVzdCwgZG93bmdyYWRpbmcgdG8gU3RhdHNKU1wiKTp0aGlzLmFKKHQsXCJQcm90b2NvbCBub3Qgc3VwcG9ydGVkIGJ5IEhpdmVKUyB0ZWNoLCBkb3duZ3JhZGluZyB0byBTdGF0c0pTXCIpfWVsc2UgaWYoaT09PXIpcmV0dXJuISF0aGlzLm9KfHx0aGlzLmFKKHQsXCJUaGUgcGxheWVyIGRvZXMgbm90IHVzZSBIaXZlUmVxdWVzdCwgZG93bmdyYWRpbmcgdG8gU3RhdHNKU1wiKTtyZXR1cm4hMX0sdC5wcm90b3R5cGUub2w9ZnVuY3Rpb24odCxyKXt3aW5kb3cmJndpbmRvdy5kZWFjdGl2YXRlWEhSSW50ZXJjZXB0b3ImJndpbmRvdy5kZWFjdGl2YXRlWEhSSW50ZXJjZXB0b3IoKSxlLnByb3RvdHlwZS5vbC5jYWxsKHRoaXMsdCxyKTt2YXIgaT1jLmxiLkFwaSgpO3I/KGYuSGl2ZVJlcXVlc3RGYWN0b3J5LmNsZWFyU2Vzc2lvbih0LmlkKSxpJiYoaS5ubCh0LmlkLHUuTWwuU1RPUCksaS5oSigpKSk6aSYmaS5ubCh0LmlkLHUuTWwuSURMRSl9LHQucHJvdG90eXBlLmFKPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudGVjaD10aGlzLlVRLGYuSGl2ZVJlcXVlc3RGYWN0b3J5LnJlZ2lzdGVyVGVjaChlLmlkLGwuU3RhdHNKUy5FTCksdGhpcy5vSiYmdGhpcy5vSi5yZXNvbHZlKCksdGhpcy5vSj12b2lkIDAsdGhpcy5nTC5sb2dnZXIoKS53YXJuKFwiW0hpdmVKU10gXCIrdCksdGhpcy5vbkVycm9yKG5ldyBtKEkuZkUsdCkpLHdpbmRvdyYmd2luZG93LmRlYWN0aXZhdGVYSFJJbnRlcmNlcHRvciYmd2luZG93LmRlYWN0aXZhdGVYSFJJbnRlcmNlcHRvcigpLCEwfSx0LnByb3RvdHlwZS5vTD1mdW5jdGlvbihlKXt0aGlzLm9KPWV9LHQucHJvdG90eXBlLm9uQWN0aXZlU2Vzc2lvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2EuRnJhbWV3b3JrLlgoKS5hcHBseShuZXcgaC5jSighMCkpO3ZhciByPWMubGIuQXBpKCk7aWYodGhpcy51SigpJiZyLmxKKCEwKSxyLnN0YXJ0KGUucmwsITEpLnRoZW4oZnVuY3Rpb24oaSl7aWYodC5fTCgpLHQuUEw9ZS5ybCx0LlBMLlFsKHQub3B0aW9uc18ucmVuZGVyU3RhdHNDYWxsYmFjayksdC5QTC5WbChjLmxiLnNwKCksYy5sYi5nZXRWZXJzaW9uKCkpLHQuUEwuQmwuaW5pdCh0LlBMLlVsLGUudGlja2V0LnNlc3Npb25JZCksdC5nTC5vcHRpb25zKCkudGVzdElkJiZ0LlBMLlVsLk5MKHQuZ0wub3B0aW9ucygpLnRlc3RJZCksZS5hdXRoZW50aWNhdGlvblRva2VuKXt2YXIgbj1yLnBKKGUudGlja2V0LnNlc3Npb25JZCk7biYmbi5mSi5kSi5VTShlLmF1dGhlbnRpY2F0aW9uVG9rZW4pfXQub0omJnIucmVxdWVzdCh0Lm9KLGUucmwudGlja2V0LnNlc3Npb25JZCksdC5QTC5IbC5YdShlLnRpY2tldC5zZXNzaW9uSWQsdC5nTC5nZXRQbGF5ZXJTb3VyY2UoKSwyMDApO3ZhciBzPXQuZ0wuZmx1c2hUZWNoRXZlbnRzKCk7cyYmcy5sZW5ndGg+MCYmdC5QTC5IbC5DZChzKSx0LmdMLnVwZGF0ZVBsYXllckluZm8odC5QTCl9KSx2b2lkIDAhPXRoaXMub3B0aW9ucygpLm9uQWN0aXZlU2Vzc2lvbil0cnl7dGhpcy5vcHRpb25zKCkub25BY3RpdmVTZXNzaW9uKGUudG9IaXZlU2Vzc2lvbigpKX1jYXRjaChlKXt2LkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiZXhjZXB0aW9uIGluIHVzZXItZGVmaW5lZCBvbkFjdGl2ZVNlc3Npb24gY2FsbGJhY2tcIixcIltIaXZlSlNdXCIsZSl9fSx0LnByb3RvdHlwZS5ubD1mdW5jdGlvbihlLHQpe30sdC5wcm90b3R5cGUuVEw9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG49bmV3IGYuY2woZSx0LHIsaSk7cmV0dXJuIG4uTUw9ITAsbi5pZD1uLnRpY2tldC5zZXNzaW9uSWQsbn0sdC5wcm90b3R5cGUuYkw9ZnVuY3Rpb24oKXt9LHQucHJvdG90eXBlLnVKPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IG87cmV0dXJuIGUuQWQobmF2aWdhdG9yLnVzZXJBZ2VudCksXCJBbmRyb2lkXCI9PWUuT2QoKS5uYW1lfSx0LnByb3RvdHlwZS5zSj1mdW5jdGlvbigpe3JldHVyblwic2FmYXJpXCIhPXMuV3UuUXV9LHQucHJvdG90eXBlLlhIPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBudWxsIT1zLlZ1JiZudWxsIT1zLmhMJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuZXcgUlRDUGVlckNvbm5lY3Rpb24obnVsbCxudWxsKS5jcmVhdGVEYXRhQ2hhbm5lbH1jYXRjaChlKXtyZXR1cm4hMX19LHR9KGwuU3RhdHNKUyk7Uy5FTD1cIkhpdmVKU1wiLHQuSGl2ZUpTPVN9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDQwKSxuPXIoMCkscz1yKDQ1KSxvPXIoOCksYT1yKDE5KSxoPXIoNzYpLGM9cig3NyksdT1yKDc5KSxsPXIoNzUpLHA9cigyMiksZD1yKDE1KSxmPXIoMTM0KSxnPXIoMTM3KSxFPXIoMTM4KSx2PXIoODgpLHk9cigxNTUpLFQ9cigxNTYpLG09cigxNTcpLEk9cigxNTgpLFM9cigxNTkpLFI9cig5NSksdz1yKDE3MiksYj1yKDE3MyksQz1yKDE3NCksXz1yKDQ5KSxQPXIoMjUpLEE9cigxNzUpLE89cigxNzkpLE49cigxODApLEQ9cigxODEpLGs9cigxODIpLEw9cigxODQpLE09cigxODUpLEY9cigxODYpLFU9cigxODcpLEI9cig4MCksSD1yKDE4OCkseD1yKDE4OSkscT1yKDE5MSksRz1yKDYpLFY9cigxOTIpLGo9Ry5oZS52aCxRPUcuaGUueWgsSz1HLmhlLlRoLFk9Ry5oZS5JaDtpZihRKXZhciBXPXIoMTkzKS5nSix6PXIoMTk1KS5FSjtpZihLKXZhciBKPXIoOTIpLldHO2lmKGopdmFyIFg9cigxOTYpLnZKO2lmKFkpdmFyIFo9cig4MSkuQ0g7ZWxzZSB2YXIgJD1yKDgzKS5ueDt2YXIgZWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMueUo9ITEsZSYmKHRoaXMueUo9ZSl9cmV0dXJuIGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKGUpe3RoaXMueUo/WSYmZS5iaW5kKG5ldyBpLlpBKG8ucGMuc2MsWixpLiRBLnNPKSk6KGUuYmluZChuZXcgaS5aQShvLnBjLmhjLGEubHAsaS4kQS5zTykpLGUuYmluZChuZXcgaS5aQShvLnBjLkcsaC5xQixpLiRBLnNPKSksZS5iaW5kKG5ldyBpLlpBKG8ucGMubmMsYy5XQixpLiRBLnNPKSksZS5iaW5kKG5ldyBpLlpBKG8ucGMuTSx1LnZILGkuJEEuc08pKSxlLmJpbmQobmV3IGkuWkEobi5GcmFtZXdvcmsuVi5SLHMuVE4ueU4saS4kQS5zTykpLGUuYmluZChuZXcgaS5aQShvLnBjLmljLGwuU3RhdHMucWwsaS4kQS5wTykpLGUuYmluZChuZXcgaS5aQShvLnBjLnVjLHAuR2wuQmQsaS4kQS5wTykpLGUuYmluZChuZXcgaS5aQShvLnBjLmxjLHAuR2wucWwsaS4kQS5wTykpLFk/ZS5iaW5kKG5ldyBpLlpBKG8ucGMuc2MsWixpLiRBLnNPKSk6ZS5iaW5kKG5ldyBpLlpBKG8ucGMuc2MsJCxpLiRBLnNPKSkpLGUuYmluZChuZXcgaS5aQShkLnF1Lmx1LFYuVEosaS4kQS5wTykpLGUuYmluZChuZXcgaS5aQShvLnBjLm9jLEIuSUgsaS4kQS5zTykpLGUuYmluZChuZXcgaS5aQShkLnF1LkZ1LEYubUosaS4kQS5zTykpLGUuYmluZChuZXcgaS5aQShkLnF1Ll91LGYuc2gsaS4kQS5zTykpLGUuYmluZChuZXcgaS5aQShkLnF1LlJ1LGcuSUosaS4kQS5wTykpLGUuYmluZChuZXcgaS5aQShkLnF1LlB1LEUuU0osaS4kQS5wTykpLGUuYmluZChuZXcgaS5aQShkLnF1Lnl1LHkuUmEsaS4kQS5wTykpLGUuYmluZChuZXcgaS5aQShkLnF1LlR1LHYuWXEsaS4kQS5wTykpLGomJmUuYmluZChuZXcgaS5aQShkLnF1Lm11LFgsaS4kQS5wTykpLGUuYmluZChuZXcgaS5aQShkLnF1LmJ1LFQuUkosaS4kQS5wTykpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBIaXZlT3JpZ2luYWxYTUxIdHRwUmVxdWVzdD9lLmJpbmQobmV3IGkuWkEobi5GcmFtZXdvcmsuVi5ILEhpdmVPcmlnaW5hbFhNTEh0dHBSZXF1ZXN0KSk6ZS5iaW5kKG5ldyBpLlpBKG4uRnJhbWV3b3JrLlYuSCxYTUxIdHRwUmVxdWVzdCkpLGUuYmluZChuZXcgaS5aQShkLnF1Lk11LE0ud0osaS4kQS5zTykpLGUuYmluZChuZXcgaS5aQShkLnF1LkR1LG0uYkosaS4kQS5wTykpLGUuYmluZChuZXcgaS5aQShuLkZyYW1ld29yay5WLkYsQS5DSixpLiRBLnNPKSksZS5iaW5kKG5ldyBpLlpBKGQucXUucSxPLl9KLGkuJEEuc08pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5TdSxVLlBKLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5JdSxJLkFKLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5wdSxTLlFhLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5kdSxSLmlRLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5mdSx4Lk9KLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5ndSx4Lk5KLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5FdSxxLkRKLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS52dSxxLmtKLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS54dSxILlZvLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5DdSx3LkxKLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS53dSxiLk1KLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5rdSxDLkZKLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5OdSxrLlVKLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5BdSxfLkFrLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5PdSxMLkJKLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEobi5GcmFtZXdvcmsuVi5VLFAuUmYuRmEsaS4kQS5wTykpLGUuYmluZChuZXcgaS5aQShkLnF1Lkx1LE4ueWEsaS4kQS5wTykpLFEmJihlLmJpbmQobmV3IGkuWkEoZC5xdS5CdSxXLGkuJEEucE8pKSxlLmJpbmQobmV3IGkuWkEoZC5xdS5VdSx6LGkuJEEucE8pKSksSyYmZS5iaW5kKG5ldyBpLlpBKGQucXUuVGgsSixpLiRBLnBPKSksZS5iaW5kKG5ldyBpLlpBKGQucXUuSHUsRC5ISixpLiRBLnBPKSl9LGV9KCk7dC5jSj1lZX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNCksbj1yKDI4KSxzPW4uY2csbz1yKDApLGE9cig0MyksaD1yKDE1KSxjPXIoNSksdT1yKDE5KSxsPXIoMykscD1yKDEzNSksZD1yKDQ3KSxmPXIoOCksZz1yKDEzNiksRT1yKDYpLHY9cigxKSx5PXIoMiksVD1FLmhlLnloLG09RS5oZS5UaCxJPUUuaGUubWgsUz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5zdGF0ZT11Lk1sLkxsLHRoaXMucmVxdWVzdFRpbWVvdXQ9LTE7dHJ5e3RoaXMubG9nZ2VyPW8uRnJhbWV3b3JrLnJlc29sdmUoby5GcmFtZXdvcmsuVi5SKS5sb2coZS50aWNrZXQuc2Vzc2lvbklkKSx0aGlzLmxvZ2dlcklkPVwiW1NXQVJNXSBcIix0aGlzLk5nPW8uRnJhbWV3b3JrLnJlc29sdmUoby5GcmFtZXdvcmsuVi5GKSx0aGlzLnNlc3Npb25JZD1lLnRpY2tldC5zZXNzaW9uSWQsdGhpcy5ybD1lLHRoaXMuRUQ9by5GcmFtZXdvcmsucmVzb2x2ZShoLnF1LlJ1KSx0aGlzLnNDPW8uRnJhbWV3b3JrLnJlc29sdmUoaC5xdS55dSksdGhpcy5vRz1vLkZyYW1ld29yay5yZXNvbHZlKGgucXUucHUpLHRoaXMueEo9by5GcmFtZXdvcmsucmVzb2x2ZShoLnF1LmJ1KSx0aGlzLmdEPW8uRnJhbWV3b3JrLnJlc29sdmUoaC5xdS5JdSksdGhpcy5URD1vLkZyYW1ld29yay5yZXNvbHZlKGgucXUuZHUpLHRoaXMudXBsb2FkU2NvcmU9by5GcmFtZXdvcmsucmVzb2x2ZShoLnF1Lmt1KSx0aGlzLnFKPW8uRnJhbWV3b3JrLnJlc29sdmUoaC5xdS53dSksdGhpcy5HSj1vLkZyYW1ld29yay5yZXNvbHZlKGgucXUuRHUpLHRoaXMudkQ9by5GcmFtZXdvcmsucmVzb2x2ZShoLnF1LkN1KSx0aGlzLmZKPW8uRnJhbWV3b3JrLnJlc29sdmUoaC5xdS5QdSksdGhpcy5XTT1vLkZyYW1ld29yay5yZXNvbHZlKGgucXUuTHUpLHRoaXMueUQ9by5GcmFtZXdvcmsucmVzb2x2ZShoLnF1Lkh1KSx0aGlzLnpNPW8uRnJhbWV3b3JrLnJlc29sdmUoaC5xdS5BdSksdGhpcy5tRD1vLkZyYW1ld29yay5yZXNvbHZlKGgucXUuT3UpLHRoaXMuSUQ9by5GcmFtZXdvcmsucmVzb2x2ZShoLnF1LlN1KSx0aGlzLnpWPW8uRnJhbWV3b3JrLnJlc29sdmUoaC5xdS54dSksdGhpcy5ZTT1vLkZyYW1ld29yay5yZXNvbHZlKGgucXUubHUpLChUfHxvLkZyYW1ld29yay5DKCkmJmQuJE4uSk4pJiYodGhpcy5WSj1vLkZyYW1ld29yay5yZXNvbHZlKGgucXUuVXUpLHRoaXMuako9by5GcmFtZXdvcmsucmVzb2x2ZShoLnF1LkJ1KSksKG18fG8uRnJhbWV3b3JrLkMoKSYmZC4kTi5YTikmJih0aGlzLlFKPW8uRnJhbWV3b3JrLnJlc29sdmUoaC5xdS5UaCkpLHRoaXMuc3dhcm1JZD10aGlzLktKKGUudGlja2V0LmtkKCkpLHRoaXMuWU0uaW5pdCh0aGlzKSx0aGlzLnhKLmluaXQodGhpcyksdGhpcy5JRC5pbml0KHRoaXMpLHRoaXMuelYuaW5pdCh0aGlzKSx0aGlzLlRELmluaXQodGhpcyksdGhpcy5xSi5pbml0KHRoaXMpLHRoaXMuR0ouaW5pdCh0aGlzKSx0aGlzLnZELmluaXQodGhpcyksdGhpcy5mSi5pbml0KHRoaXMpLHRoaXMuRUQuaW5pdCh0aGlzKSx0aGlzLm9HLmluaXQodGhpcyksdGhpcy56TS5pbml0KHRoaXMpLHRoaXMubUQuaW5pdCh0aGlzKSx0aGlzLldNLmluaXQodGhpcyksKG18fG8uRnJhbWV3b3JrLkMoKSYmZC4kTi5YTikmJnRoaXMuUUouaW5pdCh0aGlzKSwoVHx8by5GcmFtZXdvcmsuQygpJiZkLiROLkpOKSYmdGhpcy5qSi5pbml0KHRoaXMpfWNhdGNoKGUpe3Rocm93IHYuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjb25zdHJ1Y3Rpbmcgc3dhcm0gb2JqZWN0XCIsdGhpcy5sb2dnZXJJZCx5LmhzLnJzLlpuLGUpLG5ldyBFcnJvcihlKX19cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSx0LHIpe3RyeXtJP3RoaXMuWUooITEpOnI/dGhpcy5ZSighMSk6dGhpcy5ZSighMCksdGhpcy55RC5zZXRSZXBvcnRpbmdHdWlkKHRoaXMucmwuaWRlbnRpdHkucnAoKSksdGhpcy55RC5XSihyKSx0aGlzLnNDLmluaXQoYy5oaC5SYS5UYSxjLmhoLlJhLm1hKTt2YXIgaT10aGlzLmZKLlJEKGUsdCk7dGhpcy55RC5zZXRDb250ZXh0SWQodGhpcy5mSi5kSi5nZXRDb250ZXh0SWQoKSk7dmFyIG49bmV3IHAuekooaSk7dGhpcy5ybC5PTD1uLHRoaXMucmwuVWwuT0w9bix0aGlzLkdKLnN0YXJ0KHRoaXMuZkosdGhpcy5vRyksKFR8fG8uRnJhbWV3b3JrLkMoKSYmZC4kTi5KTikmJnRoaXMuakouSkoodGhpcy5vRyk7dmFyIHM9W3RoaXMub0csdGhpcy5URCx0aGlzLkdKLHRoaXMucmwuVWwsdGhpcy5ybC5IbCx0aGlzLnpWXTsoVHx8by5GcmFtZXdvcmsuQygpJiZkLiROLkpOKSYmcy5wdXNoKHRoaXMuakopLChtfHxvLkZyYW1ld29yay5DKCkmJmQuJE4uWE4pJiZzLnB1c2godGhpcy5RSiksKGE9dGhpcy5OZykuc3RhcnQuYXBwbHkoYSxbZS5zZXNzaW9uSWRdLmNvbmNhdChzKSksdGhpcy5ybC5VbC5EQih0aGlzLlREKSx0aGlzLnJsLlVsLnJCKHRoaXMueUQpLHRoaXMueUQuWEooZSl9Y2F0Y2goZSl7dGhyb3cgdi5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBzd2FybSBvYmplY3RcIix0aGlzLmxvZ2dlcklkLHkuaHMucnMuJG4sZSksbmV3IEVycm9yKGUpfXZhciBhfSxlLnByb3RvdHlwZS5ZSj1mdW5jdGlvbihlKXtlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiZuYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeT8odGhpcy55RC5aSihuYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeSksdGhpcy55RC4kSihuYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeSkpOih0aGlzLnlELlpKKDEpLHRoaXMueUQuJEooMSkpLHRoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJNeSBzY29yZSBcIit0aGlzLnlELlFHKCkpfSxlLnByb3RvdHlwZS5LSj1mdW5jdGlvbihlKXtyZXR1cm4gcy5vVChlKS50b1N0cmluZyhzLlV5LkJ5KX0sZS5wcm90b3R5cGUucmVxdWVzdD1mdW5jdGlvbihlKXt0aGlzLmVYKCksdGhpcy5FRC5yZXF1ZXN0KGUpfSxlLnByb3RvdHlwZS50WD1mdW5jdGlvbigpe2lmKHRoaXMuc3RhdGU9PT11Lk1sLlNUT1ApcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIuZGVidWcoXCJJZ25vcmluZyBjaGFuZ2luZyBzdGF0ZSBmcm9tIFN0b3AgdG8gSWRsZVwiKTt0aGlzLm9HLnN0b3AoKSx0aGlzLlRELnN0b3AoKSx0aGlzLm1ELnJYKCksdGhpcy5tRC5pWCgpLHRoaXMuR0oublgoKSx0aGlzLmpKJiZ0aGlzLmpKLnNYKCksdGhpcy5ybC5ubCh1Lk1sLklETEUpLHRoaXMuc0MuUXEoKSx0aGlzLklELm9YKCksdGhpcy5FRC5hWCgpLHRoaXMuWU0uaFgoKSxvLkZyYW1ld29yay5jbGVhclRpbWVvdXQodGhpcy5yZXF1ZXN0VGltZW91dCl9LGUucHJvdG90eXBlLm5sPWZ1bmN0aW9uKGUsdCl7dHJ5e2lmKHRoaXMuc3RhdGUhPWUpe3N3aXRjaCh0aGlzLmxvZ2dlci5pbmZvKFwiU3dpdGNoaW5nIHN0YXRlIFwiK3UuTWxbdGhpcy5zdGF0ZV0rXCIgLT4gXCIrdS5NbFtlXSksZSl7Y2FzZSB1Lk1sLlNUT1A6dGhpcy50WCgpLHRoaXMuTmcuc3RvcCh0KTticmVhaztjYXNlIHUuTWwuSURMRTp0aGlzLnRYKCk7YnJlYWs7Y2FzZSB1Lk1sLkxsOnRoaXMub0cuc3RhcnQoKSx0aGlzLlRELnN0YXJ0KHRoaXMuZkouZEopLHRoaXMubUQuY1goKSx0aGlzLkdKLnVYKCksdGhpcy5qSiYmdGhpcy5qSi5sWCgpLHRoaXMucmwubmwodS5NbC5MbCksdGhpcy5ZTS5wWCgpfXRoaXMuc3RhdGU9ZX19Y2F0Y2goZSl7di5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGNoYW5naW5nIHBlZXIgc3RhdHVzXCIsdGhpcy5sb2dnZXJJZCx5LmhzLnJzLmVzLGUpfX0sZS5wcm90b3R5cGUuZVg9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RyeXtvLkZyYW1ld29yay5jbGVhclRpbWVvdXQodGhpcy5yZXF1ZXN0VGltZW91dCksdGhpcy5ubCh1Lk1sLkxsKSx0aGlzLnJlcXVlc3RUaW1lb3V0PW8uRnJhbWV3b3JrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLm5sKHUuTWwuSURMRSl9LGMuaGguc2gubmgpfWNhdGNoKGUpe3YuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZXF1ZXN0aW5nIHRpbWVvdXRcIix0aGlzLmxvZ2dlcklkLHkuaHMucnMuUW4sZSl9fSxlfSgpO3QuZFg9Uzt2YXIgUj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLkFnPW5ldyBhLkNvdW50ZXIsdGhpcy5mWD0hMSx0aGlzLnpsPW5ldyBsLHRoaXMuZ1g9bmV3IGwsdGhpcy5FWD0hMSx0aGlzLnZYPSExLHRoaXMueVg9by5GcmFtZXdvcmsucmVzb2x2ZShoLnF1Lk11KSx0aGlzLlRYPW8uRnJhbWV3b3JrLnJlc29sdmUoaC5xdS5GdSksdGhpcy51ZD1vLkZyYW1ld29yay5yZXNvbHZlKGYucGMuc2MpLHRoaXMubVg9ITF9cmV0dXJuIGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGUsdCl7dGhpcy5sb2dnZXI9by5GcmFtZXdvcmsucmVzb2x2ZShvLkZyYW1ld29yay5WLlIpLmxvZyhlLnRpY2tldC5zZXNzaW9uSWQpO3ZhciByPWUudGlja2V0O3RoaXMuVFguaW5pdCh0aGlzLGUpO3ZhciBuPXIuc2Vzc2lvbklkO2lmKHRoaXMuemwuaGFzKG4pKXRoaXMubG9nZ2VyLndhcm4oXCJTRVNTSU9OIEFMUkVBRFkgQUNUSVZFIFwiK24pO2Vsc2V7Zy5JWC5mZChlLnhsLmNsaWVudCk7dmFyIHM9bmV3IFMoZSk7cy5pbml0KHIsdCx0aGlzLm1YKSx0aGlzLnVkLmdldENvbm5lY3Rpdml0eUluZm8oKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0TmV0d29ya0NoYW5nZWQoKSxyPXQuZ2V0UHJpdmF0ZUlwKCk7ciYmcy55RC5ESChyKX0pLmRvbmUoKSxlLlVsLk5CKHRoaXMudWQpLHRoaXMubG9nZ2VyLmluZm8oXCJQRUVSIENPTlRFWFQgU1RBUlRFRFwiKSx0aGlzLnpsLnNldChuLHMpLHRoaXMuZ1guc2V0KHMuc3dhcm1JZCxuKX1yZXR1cm4gMSE9dGhpcy56bC5sZW5ndGgmJiF0aGlzLnZYfHxvLkZyYW1ld29yay5DKCl8fCh0aGlzLnlYLmluaXQoKSx0aGlzLnZYPSExKSxpLnJlc29sdmUoci5Tb3VyY2VVUkwpfSxlLnByb3RvdHlwZS5oSj1mdW5jdGlvbigpe3RoaXMudlg9ITB9LGUucHJvdG90eXBlLm1nPWZ1bmN0aW9uKGUpe2lmKHRoaXMuZ1guaGFzKGUpKXt2YXIgdD10aGlzLmdYLmdldChlKTtyZXR1cm4gdGhpcy56bC5nZXQodCl9cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLnBKPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnpsLmdldChlKX0sZS5wcm90b3R5cGUuU1g9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuemwuaGFzKGUpP3RoaXMuemwuZ2V0KGUpLkVEOm51bGx9LGUucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oZSx0KXt0aGlzLnBKKHQpLnJlcXVlc3QoZSl9LGUucHJvdG90eXBlLm5sPWZ1bmN0aW9uKGUsdCl7dGhpcy5wSihlKS5ubCh0LGUpfSxlLnByb3RvdHlwZS5hYm9ydD1mdW5jdGlvbihlLHQpe3RoaXMuU1godCkuYWJvcnQoZSl9LGUucHJvdG90eXBlLmxKPWZ1bmN0aW9uKGUpe3RoaXMubVg9ZX0sZX0oKTt0LnNoPVJ9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy53RD1lfXJldHVybiBlLnByb3RvdHlwZS51Qj1mdW5jdGlvbigpe3ZhciBlPW5ldyBoaXZlLnNuYXBzaG90cy5TdHJlYW1JbmZvO3JldHVybiBlLnN0cmVhbVR5cGU9dGhpcy53RC5pc0xpdmUoKT9TdHJlYW1UeXBlLkxJVkU6U3RyZWFtVHlwZS5rSyxlLnN0cmVhbVByb3RvY29sPXRoaXMud0QuZ2V0U3RyZWFtUHJvdG9jb2woKSxlLnVybD10aGlzLndELnVNKCksZX0sZX0oKTt0LnpKPWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDIyKSxuPWkuR2wucmQscz1yKDApLG89cigyMyksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuZmQ9ZnVuY3Rpb24oZSl7dGhpcy5jbGllbnQ9ZX0sZS5SWD1mdW5jdGlvbihlLHQscixpLGEpe3ZhciBoPW5ldyBuO2guYXBwPWUsaC5ndWlkPWksaC5jcmVhdGVkQXQ9cy5GcmFtZXdvcmsudGltZSgpLGgubmFtZT1yLGgudGFncz10LGguZGF0YT1KU09OLnBhcnNlKGEpO3ZhciBjPW5ldyBvLkpkKFNlcnZpY2VzLlhkLDIsSlNPTi5zdHJpbmdpZnkoaCkpO3RoaXMuY2xpZW50JiZ0aGlzLmNsaWVudC56ZCgpLnNlbmQoYyl9LGV9KCk7dC5JWD1hfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigzKSxuPXIoNCkscz1yKDI0KSxvPXIoNyksYT1yKDUpLGg9cigwKSxjPXIoOSksdT1yKDE1KSxsPXIoNDMpLHA9cigxKSxkPXIoMiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLndYPW5ldyBpLHRoaXMuYlg9ITEsdGhpcy5DWD0wLHRoaXMubG9nZ2VySWQ9XCJbSGl2ZUNhY2hlXSBcIix0aGlzLl9YPTUsdGhpcy5UWD1oLkZyYW1ld29yay5yZXNvbHZlKHUucXUuRnUpLHRoaXMuUFg9bmV3IGwuUk99cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9aC5GcmFtZXdvcmsucmVzb2x2ZShoLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy5nRD1lLmdELHRoaXMuc0M9ZS5zQyx0aGlzLlREPWUuVEQsdGhpcy5VbD1lLnJsLlVsLHRoaXMuc2Vzc2lvbklkPWUucmwudGlja2V0LnNlc3Npb25JZCx0aGlzLnhKPWUueEosdGhpcy52RD1lLnZELHRoaXMuQVg9ZS5mSix0aGlzLnlEPWUueUQsdGhpcy5JRD1lLklELHRoaXMuWU09ZS5ZTSx0aGlzLlVsLmVCKHRoaXMuUFgpfSxlLnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1lLnVybDt0aGlzLmxvZ2dlci5pbmZvKFwiSElWRSBSRVEgXCIrdCksZS5CZj1oLkZyYW1ld29yay50aW1lKCk7dmFyIHI9dGhpcy5BWC5PWChlKSxpPXIuRU0oZS51cmwpO3RoaXMuWU0uTlgoaSksdGhpcy4kRChlLGkscixzLmJmLlRmKX1jYXRjaChlKXtwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igb24gcGxheWVyIHJlcXVlc3RcIix0aGlzLmxvZ2dlcklkLGQuaHMuV24uWW4sZSl9fSxlLnByb3RvdHlwZS4kRD1mdW5jdGlvbihlLHQscixpKXt2YXIgbj10aGlzO2lmKHQuaWcoKSl7aWYodC5YZigpPT1jLnZjLmZjKXt2YXIgYT1yLlBNKHQsaSk7aWYoYS5oRilyZXR1cm4gdGhpcy5sb2dnZXIuZGVidWcoXCJETyBOT1QgQ09OVElOVUUgV0lUSCBUSEUgUkVRVUVTVCBcIit0LlpmKCkrXCIuIEFMUkVBRFkgUkVRVUVTVEVEICBcIithLnJGK1wiIFBFTkRJTkcgUkVRVUVTVCBcIithLmFGKSxudWxsO2lmKGEuYUYmJmk9PXMuYmYuVGYpe3ZhciBoPXRoaXMuRFgoZSx0LHIsaSk7cmV0dXJuIGgubGVuZ3RoPjA/KGguZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj1uLndYLmdldCh0KTtuLndYLnNldChlLmlkLHIpLG4ud1guZGVsZXRlKHQpfSksbnVsbCk6KHRoaXMubG9nZ2VyLmluZm8oXCJQUkVGRVRDSCBVUEdSQURFIEZBSUxFRC4gVEhJUyBTSE9VTEQgTk9UIEhBUFBFTi4gQ0hFQ0sgRk9SIE1VTFRJUExFIFBMQVlFUiBSRVFVRVNUUyBGT1IgVEhFIFNBTUUgRlJBR01FTlRcIiksdGhpcy5rWChlLHQscixpKSl9cmV0dXJuIHRoaXMua1goZSx0LHIsaSl9cmV0dXJuIHRoaXMua1goZSx0LHIsaSl9dmFyIHU9by5yYy5PaC5uZXh0KCksbD1uZXcgcy5oZyhlLHUsaSx0LHIpO3JldHVybiB0aGlzLndYLnNldChlLmlkLGwpLGwudHlwZT1zLmJmLm1mLHRoaXMuTFgobCksbH0sZS5wcm90b3R5cGUua1g9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG49dGhpcyxhPW8ucmMuT2gubmV4dCgpLGg9bmV3IHMuaGcoZSxhLGksdCxyKTtpZih0aGlzLndYLnNldChlLmlkLGgpLHQuWGYoKT09Yy52Yy5mYyYmKHIudUYoaCksaSE9PXMuYmYuSWYmJmkhPT1zLmJmLndmKSl7dmFyIHU9dC5iaXRyYXRlLGw9dGhpcy55RC5NWCgpOzAhPXUmJih0aGlzLnlELkZYKHUpLHUhPWwmJih0aGlzLmJYPSEwLHRoaXMuQ1g9MCksdGhpcy5iWCYmdGhpcy5DWCsrLHRoaXMuQ1g9PXRoaXMuX1gmJih0aGlzLlRELktqKCksdGhpcy5iWD0hMSx0aGlzLkNYPTApKX1yZXR1cm4gdGhpcy5VWCh0LlpmKCkpLnRoZW4oZnVuY3Rpb24oZSl7bnVsbCE9ZT8obi5ZTS5CWChoLGUpLG4uSFgoaCxlKSxyLmxGKGguWmYoKSxoLiRmKCkpLHIuZ0YodC5iaXRyYXRlKSk6KG4ueFgodCxoKSxoLlhmKCk9PWMudmMuZmMmJihyLmRGKGgpLGgudHlwZT09cy5iZi5UZiYmbi5QWC5hZGQoMCkpKX0pLGh9LGUucHJvdG90eXBlLkRYPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiByLmNGKGUsdCxpKX0sZS5wcm90b3R5cGUuVVg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc0MuZ2V0KGUpfSxlLnByb3RvdHlwZS54WD1mdW5jdGlvbihlLHQpe3RoaXMuZ0QuY29udGFpbnMoZS5aZigpKT8odGhpcy5sb2dnZXIuZGVidWcoXCJPQkogSURYIENPTlRBSU5TIFwiK3QuWmYoKSksdC5KZigpPT1zLmJmLklmJiYodC50eXBlPXMuYmYud2YpLHRoaXMuQ2YodCkpOnQuSmYoKSE9cy5iZi53Zj90aGlzLkxYKHQpOihwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiUDJQIFBSRUZFVENIIEZBSUxFRCBCRUNBVVNFIE9CSkVDVCBJTkRFWCBET0VTIE5PVCBDT05UQUlOIFJFUVVFU1QgRU5USVRZXCIsdGhpcy5sb2dnZXJJZCx7UF86dC5aZigpfSksdC5XZi5sRih0LlpmKCksdC4kZigpKSl9LGUucHJvdG90eXBlLmFYPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLndYLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUuYWJvcnQodC5LZil9KX0sZS5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oZSl7aWYodGhpcy53WC5oYXMoZS5pZCkpe3ZhciB0PXRoaXMud1guZ2V0KGUuaWQpLHI9dC4kZigpO3RoaXMubG9nZ2VyLmRlYnVnKFwiUkVRVUVTVCBcIityK1wiIEFCT1JURUQgXCIpLHRoaXMudkQuWXMocik/dGhpcy52RC5xWChyKTp0aGlzLnhKLllzKHIpJiZ0aGlzLnhKLnFYKHIpLHRoaXMud1guZGVsZXRlKGUuaWQpfX0sZS5wcm90b3R5cGUuQ2Y9ZnVuY3Rpb24oZSl7ZS50eXBlPT1zLmJmLlRmJiYoZS50eXBlPXMuYmYuUmYpLGUudHlwZT09cy5iZi53ZiYmKGUuVmY9ITApLHRoaXMudkQucmVxdWVzdChlKX0sZS5wcm90b3R5cGUuR1g9ZnVuY3Rpb24oZSl7aWYoMCE9ZS5RZiYmKGUucWYuQWY9ZS5RZix0aGlzLmxvZ2dlci5pbmZvKFwiQUxSRUFEWSBET1dOTE9BREVEIFwiK2UucWYuQWYrXCIgQllURVNcIiksZS5xZi5PZj1lLlFmKSwhYS5oaC5LLk5hJiZlLlFmJiYoZS5xZi5BZj0wKSx0aGlzLllNLlZYKGUpLGUudHlwZSE9cy5iZi53ZillLnR5cGU9cy5iZi5TZix0aGlzLkxYKGUpO2Vsc2UgaWYoZS5YZigpPT1jLnZjLmZjKXtlLldmLnBGKGUuWmYoKSksZS5XZi5sRihlLlpmKCksZS4kZigpKTt2YXIgdD1lLnpmO3QuYml0cmF0ZSYmZS5XZi5nRih0LmJpdHJhdGUpfX0sZS5wcm90b3R5cGUualg9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmxvZ2dlci5pbmZvKFwiU1VDQ0VTUyBGUk9NIFAyUCBGT1IgXCIrZS5lZygpK1wiIFtSRVEgXCIrZS5ZZitcIl0gW1wiK3MuYmZbZS50eXBlXStcIl0gQUZURVIgXCIrZS5vZygpK1wiIFtidzpcIitlLmFnKCkuR2goKStcIl1cIiksdGhpcy5RWChlKSx0aGlzLktYKGUsdGhpcy5YTShlLnR5cGUpKSx0aGlzLklELllYKGUpO3ZhciByPXRoaXMueEouV1goKS5IaCgpO3RoaXMuWU0uelgoZSxyKSx0aGlzLkpYKGUpLnRoZW4oZnVuY3Rpb24oKXtlLldmLkNNKGUpLHQuWFgoKX0pLmZpbmFsbHkoZnVuY3Rpb24oKXt0LlhNKGUudHlwZSkmJnQuWlgoZSksdC53WC5kZWxldGUoZS5LZi5pZCl9KX0sZS5wcm90b3R5cGUuTFg9ZnVuY3Rpb24oZSl7dGhpcy5ZTS4kWChlKSx0aGlzLnhKLnJlcXVlc3QoZSl9LGUucHJvdG90eXBlLmVaPWZ1bmN0aW9uKGUpe3RoaXMuWFgoKTt2YXIgdD10aGlzLnhKLldYKCkuSGgoKTt0aGlzLllNLnRaKGUsdCksZS5YZigpPT1jLnZjLmZjJiYoZS5XZi5wRihlLlpmKCkpLGUuV2YubEYoZS5aZigpLGUuJGYoKSkpLHRoaXMuclooZSl9LGUucHJvdG90eXBlLmlaPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5RWChlKSx0aGlzLktYKGUsdGhpcy5YTShlLnR5cGUpKSxlLnR5cGU9PXMuYmYuU2YmJnRoaXMubG9nZ2VyLmRlYnVnKFwiQ0ROIENPTVBFTlNBVElPTiBUSU1FIFwiKyhlLnFmLlVmLWUuS2YuQmYpK1wiIC8gXCIrKGUucWYuVWYtZS5xZi5MZikrXCIgUDJQIFRJTUUgXCIrKGUucWYuRmYtZS5xZi5NZikpLC0xPT1bYy52Yy5nYyxjLnZjLkVjXS5pbmRleE9mKGUuWGYoKSkmJnRoaXMuSUQuWVgoZSk7dmFyIHI9dGhpcy54Si5XWCgpLkhoKCk7dGhpcy5ZTS5uWihlLHIpLHRoaXMuSlgoZSkudGhlbihmdW5jdGlvbigpe2UuWGYoKT09Yy52Yy5nYyYmZS5XZi5TTShlKSwtMT09W2MudmMuZ2MsYy52Yy5FY10uaW5kZXhPZihlLlhmKCkpJiZlLldmLkNNKGUpLHQuWFgoKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3QubG9nZ2VyLmVycm9yKGUpfSkuZmluYWxseShmdW5jdGlvbigpe3QuWE0oZS50eXBlKSYmdC5aWChlKSx0LndYLmRlbGV0ZShlLktmLmlkKX0pfSxlLnByb3RvdHlwZS5RWD1mdW5jdGlvbihlKXtlLnR5cGU9PXMuYmYud2YmJihlLnFmLnAycEFnZW5UcmFmZmljU3VjY2Vzc1F0PWUucWYuQWYpLGUudHlwZT09cy5iZi5JZiYmKGUucWYua2Y9ZS5xZi5EZixlLkdmJiYoZS5xZi5zcmNPdGhlclJlc3BRdD1lLnFmLkRmKSksZS5xZi5QZj1lLnFmLkRmK2UucWYuQWYsZS5LZi50b3RhbD1lLnFmLlBmfSxlLnByb3RvdHlwZS5LWD1mdW5jdGlvbihlLHQpe2lmKHRoaXMuc1ooZSksdCl7dmFyIHI9by5yYy5jcmVhdGVFdmVudChQcm9ncmVzc0V2ZW50LFwicHJvZ3Jlc3NcIix7bGVuZ3RoQ29tcHV0YWJsZTohMCx0b3RhbDplLnFmLlBmLGxvYWRlZDplLnFmLlBmLGN1cnJlbnRUYXJnZXQ6ZS5LZn0pO2UuS2YuZGlzcGF0Y2hFdmVudChyKSxlLnpmLk9fKCl8fChlLktmLnJlc3BvbnNlPWUuUk0sZS5LZi5yZXNwb25zZVRleHQ9ZS5STSl9fSxlLnByb3RvdHlwZS5aWD1mdW5jdGlvbihlKXt2YXIgdD1lLktmO3RoaXMubG9nZ2VyLmluZm8oXCJSRVNQT05EIFRPIFRIRSBQTEFZRVIgXCIrZS5aZigpK1wiIFNJWkUgXCIrKGguRnJhbWV3b3JrLkMoKT90LnRvdGFsOmUuamYuYnl0ZUxlbmd0aCkpLHQuc3RhdHVzPTIwMCx0LnJlYWR5U3RhdGU9NCxcInN0cmluZ1wiPT10eXBlb2YgdC5yZXNwb25zZSYmXCJhcnJheWJ1ZmZlclwiPT09dC5yZXNwb25zZVR5cGUmJih0LnJlc3BvbnNlPW8ucmMudGModC5yZXNwb25zZSkpLFwidGV4dFwiIT10LnJlc3BvbnNlVHlwZSYmXCJcIiE9dC5yZXNwb25zZVR5cGUmJmRlbGV0ZSB0LnJlc3BvbnNlVGV4dCxlLnpmLk9fKCkmJih0LnJlc3BvbnNlPWguRnJhbWV3b3JrLkMoKT9udWxsOm8ucmMuUWgoZS5qZikpO3ZhciByPW8ucmMuY3JlYXRlRXZlbnQoRXZlbnQsXCJyZWFkeXN0YXRlY2hhbmdlXCIse2N1cnJlbnRUYXJnZXQ6dH0pLGk9by5yYy5jcmVhdGVFdmVudChQcm9ncmVzc0V2ZW50LFwibG9hZFwiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITEsbGVuZ3RoQ29tcHV0YWJsZTohMSx0b3RhbDplLnpmLk9fKCk/ZS5qZi5ieXRlTGVuZ3RoOmUuUk0ubGVuZ3RoLGN1cnJlbnRUYXJnZXQ6dH0pLG49by5yYy5jcmVhdGVFdmVudChQcm9ncmVzc0V2ZW50LFwibG9hZGVuZFwiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITEsbGVuZ3RoQ29tcHV0YWJsZTohMSxsb2FkZWQ6dC50b3RhbCx0b3RhbDowLGN1cnJlbnRUYXJnZXQ6dH0pO3QuZGlzcGF0Y2hFdmVudChyKSx0LmRpc3BhdGNoRXZlbnQoaSksdC5kaXNwYXRjaEV2ZW50KG4pfSxlLnByb3RvdHlwZS5yWj1mdW5jdGlvbihlKXt0aGlzLndYLmRlbGV0ZShlLktmLmlkKTt2YXIgdD1lLktmLHI9e2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMSxsZW5ndGhDb21wdXRhYmxlOiExLGxvYWRlZDp0LnRvdGFsLHRvdGFsOjAsY3VycmVudFRhcmdldDp0fTtlLnhoci5zdGF0dXMmJmUueGhyLnN0YXR1cz4wPyh0LnN0YXR1cz1lLnhoci5zdGF0dXMsdC5yZXNwb25zZUhlYWRlcnM9ZS5yZXNwb25zZUhlYWRlcnMpOnQuc3RhdHVzPTQwNCx0LnJlYWR5U3RhdGU9NCx0LmRpc3BhdGNoRXZlbnQoby5yYy5jcmVhdGVFdmVudChFdmVudCxcInJlYWR5c3RhdGVjaGFuZ2VcIixyKSksdC5kaXNwYXRjaEV2ZW50KG8ucmMuY3JlYXRlRXZlbnQoUHJvZ3Jlc3NFdmVudCxcImxvYWRcIixyKSksdC5kaXNwYXRjaEV2ZW50KG8ucmMuY3JlYXRlRXZlbnQoUHJvZ3Jlc3NFdmVudCxcImxvYWRlbmRcIixyKSl9LGUucHJvdG90eXBlLkpYPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGUuemYuaWcoKT90aGlzLnNDLnB1dChlKS50aGVuKGZ1bmN0aW9uKHIpe3ImJnQuVEQub1ooZS56ZixlLnFmLlBmLGUueHEpfSk6bi5yZXNvbHZlKCEwKX0sZS5wcm90b3R5cGUuSFg9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2UuamY9dC5kYXRhLGUucmVzcG9uc2VIZWFkZXJzPXQuaGVhZGVycyxlLnFxPXQucXEsZS5xZj10LnFmO3ZhciBpPWUuV2YuZE0oKS5seCh0Lmxlbmd0aCk7dGhpcy5sb2dnZXIuaW5mbyhcIlNDSEVEVUxFIERFTElWRVJZIE9GIFwiK2UuWmYoKStcIiBJTiBcIitpK1wiIFNJWkUgXCIrKGguRnJhbWV3b3JrLkMoKT90Lmxlbmd0aDplLmpmLmJ5dGVMZW5ndGgpK1wiIEJZVEVTXCIpLGguRnJhbWV3b3JrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmFaKGUpfSxpKX0sZS5wcm90b3R5cGUuYVo9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXIuZGVidWcoXCJERUxJVkVSWSBPRiBcIitlLlpmKCkpLHRoaXMuS1goZSwhMCksdGhpcy53WC5kZWxldGUoZS5LZi5pZCk7dmFyIHQ9ZS5LZi5CZi1lLnFmLlVmO3RoaXMubG9nZ2VyLmluZm8oXCJGUkFHTUVOVCBQUkVGRVRDSEVEIFwiK3QrXCIgTVNFQ1MgQkVGT1JFIFBMQVlFUiBSRVFVRVNUXCIpLHQ+MCYmZS5YZigpPT1jLnZjLmZjJiZ0aGlzLlBYLmFkZCh0KTt2YXIgcj0wO3I9ZS5xZi5NZj4wP2UuS2YuQmYtZS5xZi5NZjplLktmLkJmLWUucWYuRmYsdGhpcy5sb2dnZXIuaW5mbyhcIkZSQUdNRU5UIFJFUVVFU1RFRCBcIityK1wiIE1TRUNTIEJFRk9SRSBQTEFZRVIgUkVRVUVTVFwiKSx0aGlzLlpYKGUpfSxlLnByb3RvdHlwZS5YTT1mdW5jdGlvbihlKXtyZXR1cm4gZSE9cy5iZi53ZiYmZSE9cy5iZi5JZn0sZS5wcm90b3R5cGUuc1o9ZnVuY3Rpb24oZSl7aWYoZS50eXBlIT09cy5iZi5TZillLnJlc3BvbnNlSGVhZGVycz1lLktmLnJlc3BvbnNlSGVhZGVycz1lLnJlc3BvbnNlSGVhZGVycztlbHNle3ZhciB0PVwiXFxuQ29udGVudC1SYW5nZTogYnl0ZXM9MC1cIisoZS5zaXplLTEpK1wiL1wiK2Uuc2l6ZStcIlxcblwiO3QrPVwiQ29udGVudC1MZW5ndGg6IFwiK2Uuc2l6ZStcIlxcblwiLGUucmVzcG9uc2VIZWFkZXJzPWUuS2YucmVzcG9uc2VIZWFkZXJzPXR9bnVsbCE9ZS5yZXNwb25zZUhlYWRlcnMmJi0xIT1lLnJlc3BvbnNlSGVhZGVycy5pbmRleE9mKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCIpfHwoZS5yZXNwb25zZUhlYWRlcnMrPVwiXFxuQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOipcIil9LGUucHJvdG90eXBlLlhYPWZ1bmN0aW9uKCl7aC5GcmFtZXdvcmsuQygpfHx0aGlzLlRYLnJlbmRlcigpfSxlfSgpO3QuSUo9Zn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNTcpLG49cig4Nykscz1yKDApLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5URD1udWxsLHRoaXMuTmc9cy5GcmFtZXdvcmsucmVzb2x2ZShzLkZyYW1ld29yay5WLkYpfXJldHVybiBlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyPXMuRnJhbWV3b3JrLnJlc29sdmUocy5GcmFtZXdvcmsuVi5SKS5sb2coZS5zZXNzaW9uSWQpLHRoaXMuc0c9ZSx0aGlzLlREPWUuVER9LGUucHJvdG90eXBlLlJEPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bnVsbCxzPWUuX04oKTtyZXR1cm4gbi5icS5yTShzKT90aGlzLmRKPXI9bmV3IG4uYnEuRHEoZSx0LHRoaXMuc0cpOmkuREFTSC5yTShzKT90aGlzLmRKPXI9bmV3IGkuREFTSC5WTShlLHRoaXMuc0cpOnRoaXMubG9nZ2VyLndhcm4oXCJDT1VMRCBOT1QgRklORCBBIENPTlRFWFQgRk9SIFwiK3MpLG51bGwhPXImJnRoaXMuaFoodGhpcy5kSikscn0sZS5wcm90b3R5cGUuaFo9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztudWxsIT10aGlzLlREP3RoaXMuVEQuc3RvcCgpLnRoZW4oZnVuY3Rpb24ocil7dC5URC5zdGFydChlKX0pOnRoaXMuVEQuc3RhcnQoZSl9LGUucHJvdG90eXBlLk9YPWZ1bmN0aW9uKGUpe2lmKG51bGw9PXRoaXMuZEopdGhpcy5sb2dnZXIud2FybihcIkZJUlNUIFJFUVVFU1QsIENPVUxEIE5PVCBGSU5EIFJJR0hUIENPTlRFWFQgXCIrZS51cmwpO2Vsc2UgaWYoIXRoaXMuZEoubU0oZSkpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oXCJSRVFVRVNUIERPRVMgTk9UIEJFTE9ORyBUTyBUSEUgQ1VSUkVOVCBDT05URVhUIFwiK2UudXJsKSxudWxsO3JldHVybiB0aGlzLmRKfSxlfSgpO3QuU0o9b30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoZSx0LHIsbil7aWYoISh0aGlzIGluc3RhbmNlb2YgaSkpcmV0dXJuIG5ldyBpKGUsdCxyLG4pO3RoaXMubHM9dHx8T2JqZWN0LmNzLHRoaXMuQWM9cnx8T2JqZWN0Lk9jLHRoaXMuZHM9bnx8RnVuY3Rpb24udXMsdGhpcy5yb290PW51bGwsdGhpcy5sZW5ndGg9MCx0aGlzLmFkZEVhY2goZSl9ZnVuY3Rpb24gbihlKXt0aGlzLnZhbHVlPWUsdGhpcy5sZWZ0PW51bGwsdGhpcy5yaWdodD1udWxsLHRoaXMubGVuZ3RoPTF9ZnVuY3Rpb24gcyhlLHQscil7aWYodGhpcy5zZXQ9ZSx0aGlzLk9rPW51bGwsdGhpcy5lbmQ9cix0KXt2YXIgaT10aGlzLnNldC5jWih0KTtpJiYodGhpcy5zZXQudVooaS52YWx1ZSksdGhpcy5Paz1pLmxaKCkpfX1lLmk9aTt2YXIgbz0ocigxMSkscigxMikpLGE9cigzOSksaD1yKDEzKSxjPXIoMzgpLHU9cig2OSk7aS5wWj1pLE9iamVjdC5hZGRFYWNoKGkucHJvdG90eXBlLG8ucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChpLnByb3RvdHlwZSxhLnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goaS5wcm90b3R5cGUsaC5wcm90b3R5cGUpLE9iamVjdC5hZGRFYWNoKGkucHJvdG90eXBlLGMucHJvdG90eXBlKSxpLnByb3RvdHlwZS5tRj0hMCxpLnByb3RvdHlwZS5Fcz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoZSx0aGlzLmxzLHRoaXMuQWMsdGhpcy5kcyl9LGkucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlLHQpe2lmKHQpdGhyb3cgbmV3IEVycm9yKFwiU29ydGVkU2V0I2hhcyBkb2VzIG5vdCBzdXBwb3J0IHNlY29uZCBhcmd1bWVudDogZXF1YWxzXCIpO3JldHVybiEhdGhpcy5yb290JiYodGhpcy51WihlKSx0aGlzLmxzKGUsdGhpcy5yb290LnZhbHVlKSl9LGkucHJvdG90eXBlLmdldD1mdW5jdGlvbihlLHQpe2lmKHQpdGhyb3cgbmV3IEVycm9yKFwiU29ydGVkU2V0I2dldCBkb2VzIG5vdCBzdXBwb3J0IHNlY29uZCBhcmd1bWVudDogZXF1YWxzXCIpO3JldHVybiB0aGlzLnJvb3QmJih0aGlzLnVaKGUpLHRoaXMubHMoZSx0aGlzLnJvb3QudmFsdWUpKT90aGlzLnJvb3QudmFsdWU6dGhpcy5kcyhlKX0saS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB0aGlzLk5vZGUoZSk7aWYoIXRoaXMucm9vdClyZXR1cm4gdGhpcy5NayYmdGhpcy5RQShbZV0sW10sMCksdGhpcy5yb290PXQsdGhpcy5sZW5ndGgrKyx0aGlzLk1rJiZ0aGlzLkdBKFtlXSxbXSwwKSwhMDtpZih0aGlzLnVaKGUpLCF0aGlzLmxzKGUsdGhpcy5yb290LnZhbHVlKSl7dmFyIHI9dGhpcy5BYyhlLHRoaXMucm9vdC52YWx1ZSk7aWYoMD09PXIpdGhyb3cgbmV3IEVycm9yKFwiU29ydGVkU2V0IGNhbm5vdCBjb250YWluIGluY29tcGFyYWJsZSBidXQgaW5lcXVhbCB2YWx1ZXM6IFwiK2UrXCIgYW5kIFwiK3RoaXMucm9vdC52YWx1ZSk7cmV0dXJuIHRoaXMuTWsmJnRoaXMuUUEoW2VdLFtdLHRoaXMucm9vdC5pbmRleCkscjwwPyh0LnJpZ2h0PXRoaXMucm9vdCx0LmxlZnQ9dGhpcy5yb290LmxlZnQsdGhpcy5yb290LmxlZnQ9bnVsbCx0aGlzLnJvb3QuZFooKSk6KHQubGVmdD10aGlzLnJvb3QsdC5yaWdodD10aGlzLnJvb3QucmlnaHQsdGhpcy5yb290LnJpZ2h0PW51bGwsdGhpcy5yb290LmRaKCkpLHQuZFooKSx0aGlzLnJvb3Q9dCx0aGlzLmxlbmd0aCsrLHRoaXMuTWsmJnRoaXMuR0EoW2VdLFtdLHRoaXMucm9vdC5pbmRleCksITB9cmV0dXJuITF9LGkucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlLHQpe2lmKHQpdGhyb3cgbmV3IEVycm9yKFwiU29ydGVkU2V0I2RlbGV0ZSBkb2VzIG5vdCBzdXBwb3J0IHNlY29uZCBhcmd1bWVudDogZXF1YWxzXCIpO2lmKHRoaXMucm9vdCYmKHRoaXMudVooZSksdGhpcy5scyhlLHRoaXMucm9vdC52YWx1ZSkpKXt2YXIgcj10aGlzLnJvb3QuaW5kZXg7aWYodGhpcy5NayYmdGhpcy5RQShbXSxbZV0sciksdGhpcy5yb290LmxlZnQpe3ZhciBpPXRoaXMucm9vdC5yaWdodDt0aGlzLnJvb3Q9dGhpcy5yb290LmxlZnQsdGhpcy51WihlKSx0aGlzLnJvb3QucmlnaHQ9aX1lbHNlIHRoaXMucm9vdD10aGlzLnJvb3QucmlnaHQ7cmV0dXJuIHRoaXMubGVuZ3RoLS0sdGhpcy5yb290JiZ0aGlzLnJvb3QuZFooKSx0aGlzLk1rJiZ0aGlzLkdBKFtdLFtlXSxyKSwhMH1yZXR1cm4hMX0saS5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihlLHQpe2lmKHQpdGhyb3cgbmV3IEVycm9yKFwiU29ydGVkU2V0I2luZGV4T2YgZG9lcyBub3Qgc3VwcG9ydCBzZWNvbmQgYXJndW1lbnQ6IHN0YXJ0SW5kZXhcIik7cmV0dXJuIHRoaXMucm9vdCYmKHRoaXMudVooZSksdGhpcy5scyhlLHRoaXMucm9vdC52YWx1ZSkpP3RoaXMucm9vdC5pbmRleDotMX0saS5wcm90b3R5cGUuZmluZD1mdW5jdGlvbihlLHQscil7aWYodCl0aHJvdyBuZXcgRXJyb3IoXCJTb3J0ZWRTZXQjZmluZCBkb2VzIG5vdCBzdXBwb3J0IHNlY29uZCBhcmd1bWVudDogZXF1YWxzXCIpO2lmKHIpdGhyb3cgbmV3IEVycm9yKFwiU29ydGVkU2V0I2ZpbmQgZG9lcyBub3Qgc3VwcG9ydCB0aGlyZCBhcmd1bWVudDogaW5kZXhcIik7aWYodGhpcy5yb290JiYodGhpcy51WihlKSx0aGlzLmxzKGUsdGhpcy5yb290LnZhbHVlKSkpcmV0dXJuIHRoaXMucm9vdH0saS5wcm90b3R5cGUuZlo9ZnVuY3Rpb24oZSl7aWYodGhpcy5yb290KXtmb3IoZT1lfHx0aGlzLnJvb3Q7ZS5yaWdodDspZT1lLnJpZ2h0O3JldHVybiBlfX0saS5wcm90b3R5cGUuZ1o9ZnVuY3Rpb24oZSl7aWYodGhpcy5yb290KXtmb3IoZT1lfHx0aGlzLnJvb3Q7ZS5sZWZ0OyllPWUubGVmdDtyZXR1cm4gZX19LGkucHJvdG90eXBlLkVaPWZ1bmN0aW9uKGUpe2lmKHRoaXMucm9vdClyZXR1cm4gdGhpcy51WihlKSx0aGlzLkFjKHRoaXMucm9vdC52YWx1ZSxlKT4wP3RoaXMucm9vdC5sWigpOnRoaXMucm9vdH0saS5wcm90b3R5cGUudlo9ZnVuY3Rpb24oZSl7aWYodGhpcy5yb290KXJldHVybiB0aGlzLnVaKGUpLHRoaXMuQWModGhpcy5yb290LnZhbHVlLGUpPj0wP3RoaXMucm9vdC5sWigpOnRoaXMucm9vdH0saS5wcm90b3R5cGUuY1o9ZnVuY3Rpb24oZSl7aWYodGhpcy5yb290KXJldHVybiB0aGlzLnVaKGUpLHRoaXMuQWModGhpcy5yb290LnZhbHVlLGUpPj0wP3RoaXMucm9vdDp0aGlzLnJvb3QueVooKX0saS5wcm90b3R5cGUuVFo9ZnVuY3Rpb24oZSl7aWYodGhpcy5yb290KXJldHVybiB0aGlzLnVaKGUpLHRoaXMuQWModGhpcy5yb290LnZhbHVlLGUpPD0wP3RoaXMucm9vdC55WigpOnRoaXMucm9vdH0saS5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7aWYodGhpcy5yb290KXt2YXIgZT10aGlzLmZaKCk7cmV0dXJuIHRoaXMuZGVsZXRlKGUudmFsdWUpLGUudmFsdWV9fSxpLnByb3RvdHlwZS5zaGlmdD1mdW5jdGlvbigpe2lmKHRoaXMucm9vdCl7dmFyIGU9dGhpcy5nWigpO3JldHVybiB0aGlzLmRlbGV0ZShlLnZhbHVlKSxlLnZhbHVlfX0saS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbigpe3RoaXMuYWRkRWFjaChhcmd1bWVudHMpfSxpLnByb3RvdHlwZS51bnNoaWZ0PWZ1bmN0aW9uKCl7dGhpcy5hZGRFYWNoKGFyZ3VtZW50cyl9LGkucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGUsdCl7ZT1lfHwwLHQ9dHx8dGhpcy5sZW5ndGgsZTwwJiYoZSs9dGhpcy5sZW5ndGgpLHQ8MCYmKHQrPXRoaXMubGVuZ3RoKTt2YXIgcj1bXTtpZih0aGlzLnJvb3QpZm9yKHRoaXMubVooZSk7dGhpcy5yb290LmluZGV4PHQmJihyLnB1c2godGhpcy5yb290LnZhbHVlKSx0aGlzLnJvb3QucmlnaHQpOyl0aGlzLnVaKHRoaXMucm9vdC55WigpLnZhbHVlKTtyZXR1cm4gcn0saS5wcm90b3R5cGUuc3BsaWNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucWsoZSx0LEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSl9LGkucHJvdG90eXBlLnFrPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT1lJiZ2b2lkIDA9PT10KXJldHVybltdO2U9ZXx8MCxlPDAmJihlKz10aGlzLmxlbmd0aCksdm9pZCAwPT09dCYmKHQ9MS8wKTt2YXIgaT1bXTtpZih0aGlzLnJvb3Qpe3RoaXMubVooZSk7Zm9yKHZhciBuPTA7bjx0O24rKyl7aS5wdXNoKHRoaXMucm9vdC52YWx1ZSk7dmFyIHM9dGhpcy5yb290LnlaKCk7aWYodGhpcy5kZWxldGUodGhpcy5yb290LnZhbHVlKSwhcylicmVhazt0aGlzLnVaKHMudmFsdWUpfX1yZXR1cm4gdGhpcy5hZGRFYWNoKHIpLGl9LGkucHJvdG90eXBlLnVaPWZ1bmN0aW9uKGUpe3ZhciB0LHIsaSxzLG8sYTtpZih0aGlzLnJvb3Qpe2Zvcih0PXI9aT1uZXcgdGhpcy5Ob2RlLGE9bmV3IHRoaXMuTm9kZSxvPXRoaXMucm9vdDs7KXt2YXIgaD10aGlzLkFjKGUsby52YWx1ZSk7aWYoaDwwKXtpZighby5sZWZ0KWJyZWFrO2lmKHRoaXMuQWMoZSxvLmxlZnQudmFsdWUpPDAmJihzPW8ubGVmdCxvLmxlZnQ9cy5yaWdodCxvLmRaKCkscy5yaWdodD1vLHMuZFooKSxvPXMsIW8ubGVmdCkpYnJlYWs7cz1uZXcgbixzLnJpZ2h0PW8scy5sZWZ0PWEubGVmdCxhLmxlZnQ9cyxpLmxlZnQ9byxpLmRaKCksaT1vLG89by5sZWZ0fWVsc2V7aWYoIShoPjApKWJyZWFrO2lmKCFvLnJpZ2h0KWJyZWFrO2lmKHRoaXMuQWMoZSxvLnJpZ2h0LnZhbHVlKT4wJiYocz1vLnJpZ2h0LG8ucmlnaHQ9cy5sZWZ0LG8uZFooKSxzLmxlZnQ9byxzLmRaKCksbz1zLCFvLnJpZ2h0KSlicmVhaztzPW5ldyBuLHMubGVmdD1vLHMucmlnaHQ9YS5yaWdodCxhLnJpZ2h0PXMsci5yaWdodD1vLHIuZFooKSxyPW8sbz1vLnJpZ2h0fX1mb3Ioci5yaWdodD1vLmxlZnQsci5kWigpLGkubGVmdD1vLnJpZ2h0LGkuZFooKSxvLmxlZnQ9dC5yaWdodCxvLnJpZ2h0PXQubGVmdDthLmxlZnQ7KWEubGVmdC5yaWdodC5kWigpLGEubGVmdD1hLmxlZnQubGVmdDtmb3IoO2EucmlnaHQ7KWEucmlnaHQubGVmdC5kWigpLGEucmlnaHQ9YS5yaWdodC5yaWdodDtvLmRaKCksdGhpcy5yb290PW99fSxpLnByb3RvdHlwZS5tWj1mdW5jdGlvbihlKXtpZih0aGlzLnJvb3Qpe2Zvcih2YXIgdD10aGlzLnJvb3Qscj10aGlzLnJvb3QuaW5kZXg7ciE9PWU7KWlmKHI+ZSYmdC5sZWZ0KXQ9dC5sZWZ0LHItPTErKHQucmlnaHQ/dC5yaWdodC5sZW5ndGg6MCk7ZWxzZXtpZighKHI8ZSYmdC5yaWdodCkpYnJlYWs7dD10LnJpZ2h0LHIrPTErKHQubGVmdD90LmxlZnQubGVuZ3RoOjApfXJldHVybiB0aGlzLnVaKHQudmFsdWUpLHRoaXMucm9vdC5pbmRleD09PWV9cmV0dXJuITF9LGkucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMucm9vdCYmKHQ9dGhpcy5yb290LnJlZHVjZShlLHQsMCxyLHRoaXMpKSx0fSxpLnByb3RvdHlwZS5yZWR1Y2VSaWdodD1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMucm9vdCYmKHQ9dGhpcy5yb290LnJlZHVjZVJpZ2h0KGUsdCx0aGlzLmxlbmd0aC0xLHIsdGhpcykpLHR9LGkucHJvdG90eXBlLm1pbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdaKGUpO2lmKHQpcmV0dXJuIHQudmFsdWV9LGkucHJvdG90eXBlLm1heD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmZaKGUpO2lmKHQpcmV0dXJuIHQudmFsdWV9LGkucHJvdG90eXBlLkJjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluKCl9LGkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5NayYmKGU9dGhpcy50b0FycmF5KCksdGhpcy5RQShbXSxlLDApKSx0aGlzLnJvb3Q9bnVsbCx0aGlzLmxlbmd0aD0wLHRoaXMuTWsmJnRoaXMuR0EoW10sZSwwKX0saS5wcm90b3R5cGUuSGM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHRoaXMuSXRlcmF0b3IodGhpcyxlLHQpfSxpLnByb3RvdHlwZS5JdGVyYXRvcj1zLGkucHJvdG90eXBlLnN1bW1hcnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290P3RoaXMucm9vdC5zdW1tYXJ5KCk6XCIoKVwifSxpLnByb3RvdHlwZS5sb2c9ZnVuY3Rpb24oZSx0LHIsaSl7ZT1lfHx1LmFVLHQ9dHx8dGhpcy52cyxyfHwocj1jb25zb2xlLmxvZyxpPWNvbnNvbGUpLHI9ci5iaW5kKGkpLHRoaXMucm9vdCYmdGhpcy5yb290LmxvZyhlLHQscixyKX0saS5wcm90b3R5cGUudnM9ZnVuY3Rpb24oZSx0LHIpe3QoXCIgXCIrZS52YWx1ZSl9LGkuSVo9dSxpLnByb3RvdHlwZS5Ob2RlPW4sbi5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKGUsdCxyLGksbixzKXtpZihzPXN8fDAsdGhpcy5sZWZ0KXt2YXIgbz10aGlzLmxlZnQubGVuZ3RoO3Q9dGhpcy5sZWZ0LnJlZHVjZShlLHQscixpLG4scysxKSxyKz1vfXJldHVybiB0PWUuY2FsbChpLHQsdGhpcy52YWx1ZSxyLG4sdGhpcyxzKSxyKz0xLHRoaXMucmlnaHQmJih0PXRoaXMucmlnaHQucmVkdWNlKGUsdCxyLGksbixzKzEpKSx0fSxuLnByb3RvdHlwZS5yZWR1Y2VSaWdodD1mdW5jdGlvbihlLHQscixpLG4scyl7cmV0dXJuIHM9c3x8MCx0aGlzLnJpZ2h0JiYodD10aGlzLnJpZ2h0LnJlZHVjZShlLHQscixpLG4scysxKSxyLT10aGlzLnJpZ2h0Lmxlbmd0aCksdD1lLmNhbGwoaSx0LHRoaXMudmFsdWUsdGhpcy52YWx1ZSxuLHRoaXMscyksci09MSx0aGlzLmxlZnQmJih0PXRoaXMubGVmdC5yZWR1Y2UoZSx0LHIsaSxuLHMrMSkpLHR9LG4ucHJvdG90eXBlLmRaPWZ1bmN0aW9uKCl7dGhpcy5sZW5ndGg9MSsodGhpcy5sZWZ0P3RoaXMubGVmdC5sZW5ndGg6MCkrKHRoaXMucmlnaHQ/dGhpcy5yaWdodC5sZW5ndGg6MCksdGhpcy5pbmRleD10aGlzLmxlZnQ/dGhpcy5sZWZ0Lmxlbmd0aDowfSxuLnByb3RvdHlwZS5TWj1mdW5jdGlvbigpe3ZhciBlPTE7aWYoZSs9dGhpcy5sZWZ0P3RoaXMubGVmdC5TWigpOjAsZSs9dGhpcy5yaWdodD90aGlzLnJpZ2h0LlNaKCk6MCx0aGlzLmxlbmd0aCE9PWUpdGhyb3cgbmV3IEVycm9yKFwiSW50ZWdyaXR5IGNoZWNrIGZhaWxlZDogXCIrdGhpcy5zdW1tYXJ5KCkpO3JldHVybiBlfSxuLnByb3RvdHlwZS55Wj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5yaWdodCl7Zm9yKGU9ZS5yaWdodDtlLmxlZnQ7KWU9ZS5sZWZ0O3JldHVybiBlfX0sbi5wcm90b3R5cGUubFo9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGUubGVmdCl7Zm9yKGU9ZS5sZWZ0O2UucmlnaHQ7KWU9ZS5yaWdodDtyZXR1cm4gZX19LG4ucHJvdG90eXBlLnN1bW1hcnk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZhbHVlfHxcIi1cIjtyZXR1cm4gZSs9XCIgPFwiK3RoaXMubGVuZ3RoLHRoaXMubGVmdHx8dGhpcy5yaWdodD9cIihcIitlK1wiIFwiKyh0aGlzLmxlZnQ/dGhpcy5sZWZ0LnN1bW1hcnkoKTpcIigpXCIpK1wiLCBcIisodGhpcy5yaWdodD90aGlzLnJpZ2h0LnN1bW1hcnkoKTpcIigpXCIpK1wiKVwiOlwiKFwiK2UrXCIpXCJ9LG4ucHJvdG90eXBlLmxvZz1mdW5jdGlvbihlLHQscixpKXt2YXIgbixzPXRoaXM7bj10aGlzLmxlZnQmJnRoaXMucmlnaHQ/ZS5XQTp0aGlzLmxlZnQ/ZS50VTp0aGlzLnJpZ2h0P2UuclU6ZS5lVTt2YXIgbzt0aGlzLmxlZnQmJnRoaXMubGVmdC5sb2coZSx0LGZ1bmN0aW9uKHQpe28/aShlLm9VK1wiIFwiK3QpOihvPSEwLGkoZS5pVStlLmVVK3QpKX0sZnVuY3Rpb24oZSl7aShcIiAgXCIrZSl9KTt2YXIgYTt0KHRoaXMsZnVuY3Rpb24odCl7YT9yKChzLnJpZ2h0P2Uub1U6XCIgXCIpK3QpOihhPSEwLHIobit0KSl9LGZ1bmN0aW9uKHQpe2koKHMubGVmdD9lLm9VOlwiIFwiKSt0KX0pO3ZhciBoO3RoaXMucmlnaHQmJnRoaXMucmlnaHQubG9nKGUsdCxmdW5jdGlvbih0KXtoP3IoXCIgIFwiK3QpOihoPSEwLHIoZS5uVStlLmVVK3QpKX0sZnVuY3Rpb24odCl7cihlLm9VK1wiIFwiK3QpfSl9LHMucHJvdG90eXBlLkdrPW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwiX2l0ZXJhdGlvbk9iamVjdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5Ha3x8KHRoaXMuR2s9e2RvbmU6ITEsdmFsdWU6bnVsbH0pfX0pLHMucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gZT10aGlzLk9rP3RoaXMuc2V0LlRaKHRoaXMuT2sudmFsdWUpOnRoaXMuc2V0LmdaKCksZT92b2lkIDAhPT10aGlzLmVuZCYmdGhpcy5zZXQuQWMoZS52YWx1ZSx0aGlzLmVuZCk+PTA/KHRoaXMuVmsuZG9uZT0hMCx0aGlzLlZrLnZhbHVlPXZvaWQgMCk6KHRoaXMuT2s9ZSx0aGlzLlZrLnZhbHVlPWUudmFsdWUpOih0aGlzLlZrLmRvbmU9ITAsdGhpcy5Way52YWx1ZT12b2lkIDApLHRoaXMuVmt9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5yRj0hMSx0aGlzLmFGPSExLHRoaXMuaEY9ITF9cmV0dXJuIGV9KCk7dC5lRj1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlLHQscixuKXtpZighKHRoaXMgaW5zdGFuY2VvZiBpKSlyZXR1cm4gbmV3IGkoZSx0LHIsbik7QXJyYXkuaXNBcnJheShlKT8odGhpcy5OVD1lLGU9ZS5zcGxpY2UoMCxlLmxlbmd0aCkpOnRoaXMuTlQ9W10sdGhpcy5scz10fHxPYmplY3QuY3MsdGhpcy5BYz1yfHxPYmplY3QuT2MsdGhpcy5kcz1ufHxGdW5jdGlvbi51cyx0aGlzLmxlbmd0aD0wLHRoaXMuYWRkRWFjaChlKX1mdW5jdGlvbiBuKGUsdCxyKXtmb3IodmFyIGk9MCxuPWUubGVuZ3RoLTE7aTw9bjspe3ZhciBzPWkrbj4+MSxvPXIodCxlW3NdKTtpZihvPjApaT1zKzE7ZWxzZXtpZighKG88MCkpcmV0dXJuIHM7bj1zLTF9fXJldHVybi0oaSsxKX1mdW5jdGlvbiBzKGUsdCxyLGkpe3ZhciBzPW4oZSx0LHIpO2lmKHM8MClyZXR1cm4tMTtmb3IoO3M+MCYmaSh0LGVbcy0xXSk7KXMtLTtyZXR1cm4gaSh0LGVbc10pP3M6LTF9ZnVuY3Rpb24gbyhlLHQscixpKXt2YXIgcz1uKGUsdCxyKTtpZihzPDApcmV0dXJuLTE7Zm9yKDtzPGUubGVuZ3RoLTEmJmkodCxlW3MrMV0pOylzKys7cmV0dXJuIGkodCxlW3NdKT9zOi0xfWZ1bmN0aW9uIGEoZSx0LHIpe3ZhciBpPW4oZSx0LHIpO2lmKGk8MClyZXR1cm4taS0xO2Zvcih2YXIgcz1lLmxlbmd0aC0xO2k8cyYmMD09PXIodCxlW2krMV0pOylpKys7cmV0dXJuIGl9ZS5pPWk7dmFyIGg9KHIoMTEpLHIoMTIpKSxjPXIoMTMpLHU9cigzOCk7aS5SWj1pLE9iamVjdC5hZGRFYWNoKGkucHJvdG90eXBlLGgucHJvdG90eXBlKSxPYmplY3QuYWRkRWFjaChpLnByb3RvdHlwZSxjLnByb3RvdHlwZSksT2JqZWN0LmFkZEVhY2goaS5wcm90b3R5cGUsdS5wcm90b3R5cGUpLGkucHJvdG90eXBlLm1GPSEwLGkucHJvdG90eXBlLkVzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcihlLHRoaXMubHMsdGhpcy5BYyx0aGlzLmRzKX0saS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUsdCl7aWYodCl0aHJvdyBuZXcgRXJyb3IoXCJTb3J0ZWRTZXQjaGFzIGRvZXMgbm90IHN1cHBvcnQgc2Vjb25kIGFyZ3VtZW50OiBlcXVhbHNcIik7dmFyIHI9bih0aGlzLk5ULGUsdGhpcy5BYyk7cmV0dXJuIHI+PTAmJnRoaXMubHModGhpcy5OVFtyXSxlKX0saS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUsdCl7aWYodCl0aHJvdyBuZXcgRXJyb3IoXCJTb3J0ZWRBcnJheSNnZXQgZG9lcyBub3Qgc3VwcG9ydCBzZWNvbmQgYXJndW1lbnQ6IGVxdWFsc1wiKTt2YXIgcj1zKHRoaXMuTlQsZSx0aGlzLkFjLHRoaXMubHMpO3JldHVybi0xIT09cj90aGlzLk5UW3JdOnRoaXMuZHMoZSl9LGkucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt2YXIgdD1hKHRoaXMuTlQsZSx0aGlzLkFjKTtyZXR1cm4gdGhpcy5NayYmdGhpcy5RQShbZV0sW10sdCksdGhpcy5OVC5zcGxpY2UodCwwLGUpLHRoaXMubGVuZ3RoKyssdGhpcy5NayYmdGhpcy5HQShbZV0sW10sdCksITB9LGkucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlLHQpe2lmKHQpdGhyb3cgbmV3IEVycm9yKFwiU29ydGVkQXJyYXkjZGVsZXRlIGRvZXMgbm90IHN1cHBvcnQgc2Vjb25kIGFyZ3VtZW50OiBlcXVhbHNcIik7dmFyIHI9cyh0aGlzLk5ULGUsdGhpcy5BYyx0aGlzLmxzKTtyZXR1cm4tMSE9PXImJih0aGlzLk1rJiZ0aGlzLlFBKFtdLFtlXSxyKSx0aGlzLk5ULnNwbGljZShyLDEpLHRoaXMubGVuZ3RoLS0sdGhpcy5NayYmdGhpcy5HQShbXSxbZV0sciksITApfSxpLnByb3RvdHlwZS5YQT1mdW5jdGlvbihlLHQpe2lmKHQpe3ZhciByPXRoaXMuTlQuWEEoZSx0KTtyZXR1cm4gdGhpcy5sZW5ndGgtPXIscn12YXIgaT1zKHRoaXMuTlQsZSx0aGlzLkFjLHRoaXMubHMpO2lmKC0xIT09aSl7Zm9yKHZhciBuPWk7dGhpcy5scyhlLHRoaXMuTlRbbl0pOyluKys7dmFyIG89dGhpcy5zbGljZShpLG4pO3JldHVybiB0aGlzLk1rJiZ0aGlzLlFBKFtdLG8saSksdGhpcy5OVC5zcGxpY2UoaSxvLmxlbmd0aCksdGhpcy5sZW5ndGgtPW8ubGVuZ3RoLHRoaXMuTWsmJnRoaXMuR0EoW10sbyxpKSxvLmxlbmd0aH1yZXR1cm4gMH0saS5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihlKXtyZXR1cm4gcyh0aGlzLk5ULGUsdGhpcy5BYyx0aGlzLmxzKX0saS5wcm90b3R5cGUubGFzdEluZGV4T2Y9ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcy5OVCxlLHRoaXMuQWMsdGhpcy5scyl9LGkucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24oZSx0LHIpe2lmKHQpdGhyb3cgbmV3IEVycm9yKFwiU29ydGVkQXJyYXkjZmluZCBkb2VzIG5vdCBzdXBwb3J0IHNlY29uZCBhcmd1bWVudDogZXF1YWxzXCIpO2lmKHIpdGhyb3cgbmV3IEVycm9yKFwiU29ydGVkQXJyYXkjZmluZCBkb2VzIG5vdCBzdXBwb3J0IHRoaXJkIGFyZ3VtZW50OiBpbmRleFwiKTtyZXR1cm4gcyh0aGlzLk5ULGUsdGhpcy5BYyx0aGlzLmxzKX0saS5wcm90b3R5cGUuTGs9ZnVuY3Rpb24oZSx0LHIpe2lmKHQpdGhyb3cgbmV3IEVycm9yKFwiU29ydGVkQXJyYXkjZmluZExhc3QgZG9lcyBub3Qgc3VwcG9ydCBzZWNvbmQgYXJndW1lbnQ6IGVxdWFsc1wiKTtpZihyKXRocm93IG5ldyBFcnJvcihcIlNvcnRlZEFycmF5I2ZpbmRMYXN0IGRvZXMgbm90IHN1cHBvcnQgdGhpcmQgYXJndW1lbnQ6IGluZGV4XCIpO3JldHVybiBvKHRoaXMuTlQsZSx0aGlzLkFjLHRoaXMubHMpfSxpLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKCl7dGhpcy5hZGRFYWNoKGFyZ3VtZW50cyl9LGkucHJvdG90eXBlLnVuc2hpZnQ9ZnVuY3Rpb24oKXt0aGlzLmFkZEVhY2goYXJndW1lbnRzKX0saS5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5OVC5wb3AoKTtyZXR1cm4gdGhpcy5sZW5ndGg9dGhpcy5OVC5sZW5ndGgsZX0saS5wcm90b3R5cGUuc2hpZnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLk5ULnNoaWZ0KCk7cmV0dXJuIHRoaXMubGVuZ3RoPXRoaXMuTlQubGVuZ3RoLGV9LGkucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTlQuc2xpY2UuYXBwbHkodGhpcy5OVCxhcmd1bWVudHMpfSxpLnByb3RvdHlwZS5zcGxpY2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5xayhlLHQsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpKX0saS5wcm90b3R5cGUucWs9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PWUmJnZvaWQgMD09PXQpcmV0dXJuW107ZT1lfHwwLGU8MCYmKGUrPXRoaXMubGVuZ3RoKSx2b2lkIDA9PT10JiYodD0xLzApO3ZhciBpPXRoaXMuc2xpY2UoZSxlK3QpO3JldHVybiB0aGlzLk1rJiZ0aGlzLlFBKHIsaSxlKSx0aGlzLk5ULnNwbGljZShlLHQpLHRoaXMubGVuZ3RoLT1pLmxlbmd0aCx0aGlzLk1rJiZ0aGlzLkdBKFtdLGksZSksdGhpcy5hZGRFYWNoKHIpLGl9LGkucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbihlLHQpe3ZhciByPWFyZ3VtZW50c1syXTtyZXR1cm4gdGhpcy5OVC5yZWR1Y2UoZnVuY3Rpb24odCxpLG4pe3JldHVybiBlLmNhbGwocix0LGksbix0aGlzKX0sdCx0aGlzKX0saS5wcm90b3R5cGUucmVkdWNlUmlnaHQ9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHNbMl07cmV0dXJuIHRoaXMuTlQucmVkdWNlUmlnaHQoZnVuY3Rpb24odCxyLGkpe3JldHVybiBjYWxsYmFjay5jYWxsKGUsdCxyLGksdGhpcyl9LGJhc2lzLHRoaXMpfSxpLnByb3RvdHlwZS5taW49ZnVuY3Rpb24oKXtpZih0aGlzLmxlbmd0aClyZXR1cm4gdGhpcy5OVFswXX0saS5wcm90b3R5cGUubWF4PWZ1bmN0aW9uKCl7aWYodGhpcy5sZW5ndGgpcmV0dXJuIHRoaXMuTlRbdGhpcy5sZW5ndGgtMV19LGkucHJvdG90eXBlLkJjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTlQuQmMoKX0saS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt2YXIgZTt0aGlzLk1rJiYoZT10aGlzLk5ULnNsaWNlKCksdGhpcy5RQShbXSxlLDApKSx0aGlzLmxlbmd0aD0wLHRoaXMuTlQuY2xlYXIoKSx0aGlzLk1rJiZ0aGlzLkdBKFtdLGUsMCl9LGkucHJvdG90eXBlLmNzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuTlQuY3MoZSx0KX0saS5wcm90b3R5cGUuT2M9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5OVC5PYyhlLHQpfSxpLnByb3RvdHlwZS5IYz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgdGhpcy5JdGVyYXRvcih0aGlzLk5ULGUsdCl9LGkucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRvQXJyYXkoKX0saS5wcm90b3R5cGUuSXRlcmF0b3I9QXJyYXkucHJvdG90eXBlLkl0ZXJhdG9yfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDg0KSxzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKHQsZSksdH0obi5UeCk7dC5vTT1zfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDg1KSxzPXIoNCksbz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmJ4PWZ1bmN0aW9uKGUsdCl7aWYoRE9NUGFyc2VyKXt2YXIgcj0obmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKHQsXCJ0ZXh0L3htbFwiKSxpPXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJMb2NhdGlvblwiKSxuPVwiXCI7aWYoaSYmaS5sZW5ndGg+MCYmaVswXS5jaGlsZE5vZGVzLmxlbmd0aD4wKXt2YXIgcz1pWzBdLmNoaWxkTm9kZXNbMF07bj10aGlzLkl4KHMuZGF0YSl9ZWxzZSBuPXRoaXMuSXgoZSk7dGhpcy5tYW5pZmVzdD10aGlzLm14LnBhcnNlKHQsbil9fSx0LnByb3RvdHlwZS5VeD1mdW5jdGlvbihlKXtyZXR1cm4gZS5zdWJzdHIoMCxlLmxhc3RJbmRleE9mKFwiX2NzXCIpKX0sdC5wcm90b3R5cGUuQ009ZnVuY3Rpb24oZSl7cmV0dXJuIHMucmVzb2x2ZSghMSl9LHR9KG4uJHgpO3QuaE09b30sZnVuY3Rpb24oZSx0LHIpey8qIVxuICogVGhlIGNvcHlyaWdodCBpbiB0aGlzIHNvZnR3YXJlIGlzIGJlaW5nIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSBCU0QgTGljZW5zZSxcbiAqIGluY2x1ZGVkIGJlbG93LiBUaGlzIHNvZnR3YXJlIG1heSBiZSBzdWJqZWN0IHRvIG90aGVyIHRoaXJkIHBhcnR5IGFuZCBjb250cmlidXRvclxuICogcmlnaHRzLCBpbmNsdWRpbmcgcGF0ZW50IHJpZ2h0cywgYW5kIG5vIHN1Y2ggcmlnaHRzIGFyZSBncmFudGVkIHVuZGVyIHRoaXMgbGljZW5zZS5cbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMsIERhc2ggSW5kdXN0cnkgRm9ydW0uXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24sXG4gKiBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4gKiAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAqICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAqICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vclxuICogIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gKiAgKiBOZWl0aGVyIHRoZSBuYW1lIG9mIERhc2ggSW5kdXN0cnkgRm9ydW0gbm9yIHRoZSBuYW1lcyBvZiBpdHNcbiAqICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlXG4gKiAgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4gKlxuICogIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgQVMgSVMgQU5EIEFOWVxuICogIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRURcbiAqICBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuXG4gKiAgSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCxcbiAqICBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUXG4gKiAgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUlxuICogIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLFxuICogIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSlcbiAqICBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRVxuICogIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICovXG52YXIgaT1yKDE0NSksbj1yKDg2KTtEYXNoUGFyc2VyPWZ1bmN0aW9uKCl7dmFyIGU9L14oWy1dKT9QKChbXFxkLl0qKVkpPygoW1xcZC5dKilNKT8oKFtcXGQuXSopRCk/VD8oKFtcXGQuXSopSCk/KChbXFxkLl0qKU0pPygoW1xcZC5dKilTKT8vLHQ9L14oWzAtOV17NH0pLShbMC05XXsyfSktKFswLTldezJ9KVQoWzAtOV17Mn0pOihbMC05XXsyfSkoPzo6KFswLTldKikoXFwuWzAtOV0qKT8pPyg/OihbKy1dKShbMC05XXsyfSkoWzAtOV17Mn0pKT8vLHI9L15bLStdP1swLTldK1suXT9bMC05XSooW2VFXVstK10/WzAtOV0rKT8kLyxzPVt7dHlwZTpcImR1cmF0aW9uXCIsdGVzdDpmdW5jdGlvbih0KXtmb3IodmFyIHI9W1wibWluQnVmZmVyVGltZVwiLFwibWVkaWFQcmVzZW50YXRpb25EdXJhdGlvblwiLFwibWluaW11bVVwZGF0ZVBlcmlvZFwiLFwidGltZVNoaWZ0QnVmZmVyRGVwdGhcIixcIm1heFNlZ21lbnREdXJhdGlvblwiLFwibWF4U3Vic2VnbWVudER1cmF0aW9uXCIsXCJzdWdnZXN0ZWRQcmVzZW50YXRpb25EZWxheVwiLFwic3RhcnRcIixcInN0YXJ0dGltZVwiLFwiZHVyYXRpb25cIl0saT1yLmxlbmd0aCxuPTA7bjxpO24rKylpZih0Lm5vZGVOYW1lPT09cltuXSlyZXR1cm4gZS50ZXN0KHQudmFsdWUpO3JldHVybiExfSx0cTpmdW5jdGlvbih0KXt2YXIgcj1lLmV4ZWModCksaT0zMTUzNmUzKnBhcnNlRmxvYXQoclsyXXx8MCkrMjU5MmUzKnBhcnNlRmxvYXQocls0XXx8MCkrODY0MDAqcGFyc2VGbG9hdChyWzZdfHwwKSszNjAwKnBhcnNlRmxvYXQocls4XXx8MCkrNjAqcGFyc2VGbG9hdChyWzEwXXx8MCkrcGFyc2VGbG9hdChyWzEyXXx8MCk7cmV0dXJuIHZvaWQgMCE9PXJbMV0mJihpPS1pKSxpfX0se3R5cGU6XCJkYXRldGltZVwiLHRlc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdChlLnZhbHVlKX0sdHE6ZnVuY3Rpb24oZSl7dmFyIHIsaT10LmV4ZWMoZSk7aWYocj1EYXRlLlVUQyhwYXJzZUludChpWzFdLDEwKSxwYXJzZUludChpWzJdLDEwKS0xLHBhcnNlSW50KGlbM10sMTApLHBhcnNlSW50KGlbNF0sMTApLHBhcnNlSW50KGlbNV0sMTApLGlbNl0mJnBhcnNlSW50KGlbNl0sMTApfHwwLGlbN10mJjFlMypwYXJzZUZsb2F0KGlbN10pfHwwKSxpWzldJiZpWzEwXSl7dmFyIG49NjAqcGFyc2VJbnQoaVs5XSwxMCkrcGFyc2VJbnQoaVsxMF0sMTApO3IrPShcIitcIj09PWlbOF0/LTE6MSkqbio2MCoxZTN9cmV0dXJuIG5ldyBEYXRlKHIpfX0se3R5cGU6XCJudW1lcmljXCIsdGVzdDpmdW5jdGlvbihlKXtyZXR1cm4gci50ZXN0KGUudmFsdWUpfSx0cTpmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VGbG9hdChlKX19XSxvPWZ1bmN0aW9uKCl7dmFyIGUsdCxyLGk7cmV0dXJuIGk9W3tuYW1lOlwicHJvZmlsZXNcIixQeTohMX0se25hbWU6XCJ3aWR0aFwiLFB5OiExfSx7bmFtZTpcImhlaWdodFwiLFB5OiExfSx7bmFtZTpcInNhclwiLFB5OiExfSx7bmFtZTpcImZyYW1lUmF0ZVwiLFB5OiExfSx7bmFtZTpcImF1ZGlvU2FtcGxpbmdSYXRlXCIsUHk6ITF9LHtuYW1lOlwibWltZVR5cGVcIixQeTohMX0se25hbWU6XCJzZWdtZW50UHJvZmlsZXNcIixQeTohMX0se25hbWU6XCJjb2RlY3NcIixQeTohMX0se25hbWU6XCJtYXhpbXVtU0FQUGVyaW9kXCIsUHk6ITF9LHtuYW1lOlwic3RhcnRzV2l0aFNhcFwiLFB5OiExfSx7bmFtZTpcIm1heFBsYXlvdXRSYXRlXCIsUHk6ITF9LHtuYW1lOlwiY29kaW5nRGVwZW5kZW5jeVwiLFB5OiExfSx7bmFtZTpcInNjYW5UeXBlXCIsUHk6ITF9LHtuYW1lOlwiRnJhbWVQYWNraW5nXCIsUHk6ITB9LHtuYW1lOlwiQXVkaW9DaGFubmVsQ29uZmlndXJhdGlvblwiLFB5OiEwfSx7bmFtZTpcIkNvbnRlbnRQcm90ZWN0aW9uXCIsUHk6ITB9XSxlPXt9LGUubmFtZT1cIkFkYXB0YXRpb25TZXRcIixlLndaPSExLGUuaXNBcnJheT0hMCxlLnBhcmVudD1udWxsLGUuY2hpbGRyZW49W10sZS5wcm9wZXJ0aWVzPWksdD17fSx0Lm5hbWU9XCJSZXByZXNlbnRhdGlvblwiLHQud1o9ITEsdC5pc0FycmF5PSEwLHQucGFyZW50PWUsdC5jaGlsZHJlbj1bXSx0LnByb3BlcnRpZXM9aSxlLmNoaWxkcmVuLnB1c2godCkscj17fSxyLm5hbWU9XCJTdWJSZXByZXNlbnRhdGlvblwiLHIud1o9ITEsci5pc0FycmF5PSEwLHIucGFyZW50PXQsci5jaGlsZHJlbj1bXSxyLnByb3BlcnRpZXM9aSx0LmNoaWxkcmVuLnB1c2gociksZX0sYT1mdW5jdGlvbigpe3ZhciBlLHQscixpO3JldHVybiBpPVt7bmFtZTpcIlNlZ21lbnRCYXNlXCIsUHk6ITB9LHtuYW1lOlwiU2VnbWVudFRlbXBsYXRlXCIsUHk6ITB9LHtuYW1lOlwiU2VnbWVudExpc3RcIixQeTohMH1dLGU9e30sZS5uYW1lPVwiUGVyaW9kXCIsZS53Wj0hMSxlLmlzQXJyYXk9ITAsZS5wYXJlbnQ9bnVsbCxlLmNoaWxkcmVuPVtdLGUucHJvcGVydGllcz1pLHQ9e30sdC5uYW1lPVwiQWRhcHRhdGlvblNldFwiLHQud1o9ITEsdC5pc0FycmF5PSEwLHQucGFyZW50PWUsdC5jaGlsZHJlbj1bXSx0LnByb3BlcnRpZXM9aSxlLmNoaWxkcmVuLnB1c2godCkscj17fSxyLm5hbWU9XCJSZXByZXNlbnRhdGlvblwiLHIud1o9ITEsci5pc0FycmF5PSEwLHIucGFyZW50PXQsci5jaGlsZHJlbj1bXSxyLnByb3BlcnRpZXM9aSx0LmNoaWxkcmVuLnB1c2gociksZX0saD1mdW5jdGlvbigpe3ZhciBlLHQscixpLG47cmV0dXJuIG49W3tuYW1lOlwiQmFzZVVSTFwiLFB5OiEwLGJaOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIDA9PT10LmluZGV4T2YoXCJodHRwOi8vXCIpP3Q6ZSt0fX1dLGU9e30sZS5uYW1lPVwibXBkXCIsZS53Wj0hMCxlLmlzQXJyYXk9ITAsZS5wYXJlbnQ9bnVsbCxlLmNoaWxkcmVuPVtdLGUucHJvcGVydGllcz1uLHQ9e30sdC5uYW1lPVwiUGVyaW9kXCIsdC53Wj0hMSx0LmlzQXJyYXk9ITAsdC5wYXJlbnQ9bnVsbCx0LmNoaWxkcmVuPVtdLHQucHJvcGVydGllcz1uLGUuY2hpbGRyZW4ucHVzaCh0KSxyPXt9LHIubmFtZT1cIkFkYXB0YXRpb25TZXRcIixyLndaPSExLHIuaXNBcnJheT0hMCxyLnBhcmVudD10LHIuY2hpbGRyZW49W10sci5wcm9wZXJ0aWVzPW4sdC5jaGlsZHJlbi5wdXNoKHIpLGk9e30saS5uYW1lPVwiUmVwcmVzZW50YXRpb25cIixpLndaPSExLGkuaXNBcnJheT0hMCxpLnBhcmVudD1yLGkuY2hpbGRyZW49W10saS5wcm9wZXJ0aWVzPW4sci5jaGlsZHJlbi5wdXNoKGkpLGV9LGM9ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gZS5wdXNoKG8oKSksZS5wdXNoKGEoKSksZS5wdXNoKGgoKSksZX07cmV0dXJue3BhcnNlOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbz1uZXcgbihzLFwiXCIsITApLGE9bmV3IGkoYygpKTtuZXcgRGF0ZTt0cnl7cj1vLld4KGUpLG5ldyBEYXRlLHIuaGFzT3duUHJvcGVydHkoXCJCYXNlVVJMXCIpPyhyLkJhc2VVUkw9ci5DWlswXSwwIT09ci5CYXNlVVJMLnRvU3RyaW5nKCkuaW5kZXhPZihcImh0dHBcIikmJihyLkJhc2VVUkw9dCtyLkJhc2VVUkwpKTpyLkJhc2VVUkw9dCxyLmhhc093blByb3BlcnR5KFwiTG9jYXRpb25cIikmJihyLkxvY2F0aW9uPXIuTG9jYXRpb25fYXNBcnJheVswXSksYS5fWihyKSxuZXcgRGF0ZX1jYXRjaCh0KXtyZXR1cm4gY29uc29sZS5sb2coXCJwYXJzaW5nIHRoZSBtYW5pZmVzdCBmYWlsZWRcIixcInBhcnNlXCIsZSksbnVsbH1yZXR1cm4gcn19fX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0PVtdLGk9MCxsZW49ZS5sZW5ndGg7aTxsZW47aSs9MSllW2ldLndaP3QucHVzaChcInJvb3RcIik6dC5wdXNoKGVbaV0ubmFtZSk7dmFyIHI9ZnVuY3Rpb24oZSx0KXt2YXIgcjtpZihudWxsIT09ZSYmbnVsbCE9PXQpZm9yKHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodC5oYXNPd25Qcm9wZXJ0eShyKXx8KHRbcl09ZVtyXSkpfSxuPWZ1bmN0aW9uKGUsdCxpKXt2YXIgbixzLG8sYSxoO2lmKG51bGwhPT1lJiYwIT09ZS5sZW5ndGgpZm9yKG49MCxzPWUubGVuZ3RoO248cztuKz0xKW89ZVtuXSx0Lmhhc093blByb3BlcnR5KG8ubmFtZSkmJihpLmhhc093blByb3BlcnR5KG8ubmFtZSk/by5QeSYmKGE9dFtvLm5hbWVdLGg9aVtvLm5hbWVdLFwib2JqZWN0XCI9PXR5cGVvZiBhJiZcIm9iamVjdFwiPT10eXBlb2YgaD9yKGEsaCk6bnVsbCE9by5iWj9pW28ubmFtZV09by5iWihhLGgpOmlbby5uYW1lXT1hK2gpOmlbby5uYW1lXT10W28ubmFtZV0pfSxzPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxvLGEsaCxjLHUsbD1lO2lmKG51bGwhPT1sLmNoaWxkcmVuJiYwIT09bC5jaGlsZHJlbi5sZW5ndGgpZm9yKHI9MCxpPWwuY2hpbGRyZW4ubGVuZ3RoO3I8aTtyKz0xKWlmKGM9bC5jaGlsZHJlbltyXSx0Lmhhc093blByb3BlcnR5KGMubmFtZSkpaWYoYy5pc0FycmF5KWZvcihoPXRbYy5uYW1lK1wiX2FzQXJyYXlcIl0sbz0wLGE9aC5sZW5ndGg7bzxhO28rPTEpdT1oW29dLG4obC5wcm9wZXJ0aWVzLHQsdSkscyhjLHUpO2Vsc2UgdT10W2MubmFtZV0sbihsLnByb3BlcnRpZXMsdCx1KSxzKGMsdSl9LG89ZnVuY3Rpb24ocil7dmFyIGksbixhLGgsYyx1LGw7aWYobnVsbD09PXIpcmV0dXJuIHI7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHIpcmV0dXJuIHI7Zm9yKGk9MCxuPXQubGVuZ3RoO2k8bjtpKz0xKVwicm9vdFwiPT09dFtpXSYmKGM9ZVtpXSx1PXIscyhjLHUpKTtmb3IoaCBpbiByKWlmKHIuaGFzT3duUHJvcGVydHkoaCkpe2lmKC0xIT09KGE9dC5pbmRleE9mKGgpKSlpZihjPWVbYV0sYy5pc0FycmF5KWZvcihsPXJbaCtcIl9hc0FycmF5XCJdLGk9MCxuPWwubGVuZ3RoO2k8bjtpKz0xKXU9bFtpXSxzKGMsdSk7ZWxzZSB1PXJbaF0scyhjLHUpO28ocltoXSl9cmV0dXJuIHJ9O3JldHVybntfWjpvfX07ZS5pPW59LGZ1bmN0aW9uKGUsdCxyKXsvKiEgY29kZW0taXNvYm94ZXIgdjAuMi4yIGh0dHBzOi8vZ2l0aHViLmNvbS9tYWRlYnloaXJvL2NvZGVtLWlzb2JveGVyL2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0ICovXG5cInVuZGVmaW5lZFwiPT10eXBlb2YgSVNPQm94ZXImJihJU09Cb3hlcj17fSksSVNPQm94ZXIuUXg9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBpKGUpLnBhcnNlKCl9LElTT0JveGVyLnJjPXt9LElTT0JveGVyLnJjLlBaPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dHx8XCJ1dGYtOFwiO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBUZXh0RGVjb2RlcilyZXR1cm4gbmV3IFRleHREZWNvZGVyKHIpLmRlY29kZShlKTt2YXIgaT1bXSxuPTA7aWYoXCJ1dGYtOFwiPT09cilmb3IoO248ZS5ieXRlTGVuZ3RoOyl7dmFyIHM9ZS5nZXRVaW50OChuKyspO3M8MTI4fHwoczwyMjQ/KHM9KDMxJnMpPDw2LHN8PTYzJmUuZ2V0VWludDgobisrKSk6czwyNDA/KHM9KDE1JnMpPDwxMixzfD0oNjMmZS5nZXRVaW50OChuKyspKTw8NixzfD02MyZlLmdldFVpbnQ4KG4rKykpOihzPSg3JnMpPDwxOCxzfD0oNjMmZS5nZXRVaW50OChuKyspKTw8MTIsc3w9KDYzJmUuZ2V0VWludDgobisrKSk8PDYsc3w9NjMmZS5nZXRVaW50OChuKyspKSksaS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUocykpfWVsc2UgZm9yKDtuPGUuYnl0ZUxlbmd0aDspaS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoZS5nZXRVaW50OChuKyspKSk7cmV0dXJuIGkuam9pbihcIlwiKX0sdC5ReD1JU09Cb3hlci5ReCx0LnJjPUlTT0JveGVyLnJjLElTT0JveGVyLkFaPWZ1bmN0aW9uKGUpe3RoaXMub2Zmc2V0PXZvaWQgMD09PWU/MDplfTt2YXIgaT1mdW5jdGlvbihlKXt0aGlzLk9aPW5ldyBEYXRhVmlldyhlKSx0aGlzLk5aPW5ldyBJU09Cb3hlci5BWix0aGlzLkRaPVtdfTtpLnByb3RvdHlwZS5mZXRjaD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmtaKGUsITApO3JldHVybiB0Lmxlbmd0aD90WzBdOm51bGx9LGkucHJvdG90eXBlLmtaPWZ1bmN0aW9uKGUsdCl7dmFyIHI9W107cmV0dXJuIGkuTFouY2FsbCh0aGlzLGUscix0KSxyfSxpLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbigpe2Zvcih0aGlzLk5aLm9mZnNldD0wLHRoaXMuRFo9W107dGhpcy5OWi5vZmZzZXQ8dGhpcy5PWi5ieXRlTGVuZ3RoOyl7dmFyIGU9bi5wYXJzZSh0aGlzKTtpZih2b2lkIDA9PT1lLnR5cGUpYnJlYWs7dGhpcy5EWi5wdXNoKGUpfXJldHVybiB0aGlzfSxpLkxaPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLnR5cGUmJnRoaXMudHlwZT09ZSYmdC5wdXNoKHRoaXMpO2Zvcih2YXIgbiBpbiB0aGlzLkRaKXtpZih0Lmxlbmd0aCYmcilyZXR1cm47aS5MWi5jYWxsKHRoaXMuRFpbbl0sZSx0LHIpfX07dmFyIG49ZnVuY3Rpb24oKXt0aGlzLk5aPW5ldyBJU09Cb3hlci5BWn07bi5wYXJzZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgbjtyZXR1cm4gdC5NWj1lLk5aLm9mZnNldCx0LkZaPWUuRlo/ZS5GWjplLHQuT1o9ZS5PWix0LlVaPWUsdC5CWigpLGUuTloub2Zmc2V0PXQuT1ouYnl0ZU9mZnNldCt0Lk9aLmJ5dGVMZW5ndGgsdH0sbi5wcm90b3R5cGUuSFo9ZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbDtzd2l0Y2goZSl7Y2FzZSA4OnQ9dGhpcy5PWi5nZXRJbnQ4KHRoaXMuTloub2Zmc2V0LXRoaXMuT1ouYnl0ZU9mZnNldCk7YnJlYWs7Y2FzZSAxNjp0PXRoaXMuT1ouZ2V0SW50MTYodGhpcy5OWi5vZmZzZXQtdGhpcy5PWi5ieXRlT2Zmc2V0KTticmVhaztjYXNlIDMyOnQ9dGhpcy5PWi5nZXRJbnQzMih0aGlzLk5aLm9mZnNldC10aGlzLk9aLmJ5dGVPZmZzZXQpO2JyZWFrO2Nhc2UgNjQ6dmFyIHI9dGhpcy5PWi5nZXRJbnQzMih0aGlzLk5aLm9mZnNldC10aGlzLk9aLmJ5dGVPZmZzZXQpLGk9dGhpcy5PWi5nZXRJbnQzMih0aGlzLk5aLm9mZnNldC10aGlzLk9aLmJ5dGVPZmZzZXQrNCk7dD1yKk1hdGgucG93KDIsMzIpK2l9cmV0dXJuIHRoaXMuTloub2Zmc2V0Kz1lPj4zLHR9LG4ucHJvdG90eXBlLnhaPWZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7c3dpdGNoKGUpe2Nhc2UgODp0PXRoaXMuT1ouZ2V0VWludDgodGhpcy5OWi5vZmZzZXQtdGhpcy5PWi5ieXRlT2Zmc2V0KTticmVhaztjYXNlIDE2OnQ9dGhpcy5PWi5nZXRVaW50MTYodGhpcy5OWi5vZmZzZXQtdGhpcy5PWi5ieXRlT2Zmc2V0KTticmVhaztjYXNlIDI0OnZhciByPXRoaXMuT1ouZ2V0VWludDE2KHRoaXMuTloub2Zmc2V0LXRoaXMuT1ouYnl0ZU9mZnNldCksaT10aGlzLk9aLmdldFVpbnQ4KHRoaXMuTloub2Zmc2V0LXRoaXMuT1ouYnl0ZU9mZnNldCsyKTt0PShyPDw4KStpO2JyZWFrO2Nhc2UgMzI6dD10aGlzLk9aLmdldFVpbnQzMih0aGlzLk5aLm9mZnNldC10aGlzLk9aLmJ5dGVPZmZzZXQpO2JyZWFrO2Nhc2UgNjQ6dmFyIHI9dGhpcy5PWi5nZXRVaW50MzIodGhpcy5OWi5vZmZzZXQtdGhpcy5PWi5ieXRlT2Zmc2V0KSxpPXRoaXMuT1ouZ2V0VWludDMyKHRoaXMuTloub2Zmc2V0LXRoaXMuT1ouYnl0ZU9mZnNldCs0KTt0PXIqTWF0aC5wb3coMiwzMikraX1yZXR1cm4gdGhpcy5OWi5vZmZzZXQrPWU+PjMsdH0sbi5wcm90b3R5cGUucVo9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVwiXCIscj0wO3I8ZTtyKyspe3ZhciBpPXRoaXMueFooOCk7dCs9U3RyaW5nLmZyb21DaGFyQ29kZShpKX1yZXR1cm4gdH0sbi5wcm90b3R5cGUuR1o9ZnVuY3Rpb24oKXtmb3IodmFyIGU9XCJcIjs7KXt2YXIgdD10aGlzLnhaKDgpO2lmKDA9PXQpYnJlYWs7ZSs9U3RyaW5nLmZyb21DaGFyQ29kZSh0KX1yZXR1cm4gZX0sbi5wcm90b3R5cGUuVlo9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMueFooZS8yKSt0aGlzLnhaKGUvMikvTWF0aC5wb3coMixlLzIpfSxuLnByb3RvdHlwZS5CWj1mdW5jdGlvbigpe2lmKHRoaXMuTloub2Zmc2V0PXRoaXMuTVosdGhpcy5NWis4PnRoaXMuT1ouYnVmZmVyLmJ5dGVMZW5ndGgpcmV0dXJuIHZvaWQodGhpcy5GWi5qWj0hMCk7c3dpdGNoKHRoaXMuc2l6ZT10aGlzLnhaKDMyKSx0aGlzLnR5cGU9dGhpcy5xWig0KSwxPT10aGlzLnNpemUmJih0aGlzLlFaPXRoaXMueFooNjQpKSxcInV1aWRcIj09dGhpcy50eXBlJiYodGhpcy5LWj10aGlzLnFaKDE2KSksdGhpcy5zaXplKXtjYXNlIDA6dGhpcy5PWj1uZXcgRGF0YVZpZXcodGhpcy5PWi5idWZmZXIsdGhpcy5NWix0aGlzLk9aLmJ5dGVMZW5ndGgtdGhpcy5OWi5vZmZzZXQpO2JyZWFrO2Nhc2UgMTp0aGlzLk1aK3RoaXMuc2l6ZT50aGlzLk9aLmJ1ZmZlci5ieXRlTGVuZ3RoPyh0aGlzLmpaPSEwLHRoaXMuRloualo9ITApOnRoaXMuT1o9bmV3IERhdGFWaWV3KHRoaXMuT1ouYnVmZmVyLHRoaXMuTVosdGhpcy5RWik7YnJlYWs7ZGVmYXVsdDp0aGlzLk1aK3RoaXMuc2l6ZT50aGlzLk9aLmJ1ZmZlci5ieXRlTGVuZ3RoPyh0aGlzLmpaPSEwLHRoaXMuRloualo9ITApOnRoaXMuT1o9bmV3IERhdGFWaWV3KHRoaXMuT1ouYnVmZmVyLHRoaXMuTVosdGhpcy5zaXplKX0hdGhpcy5qWiYmdGhpcy5ZWlt0aGlzLnR5cGVdJiZ0aGlzLllaW3RoaXMudHlwZV0uY2FsbCh0aGlzKX0sbi5wcm90b3R5cGUuV1o9ZnVuY3Rpb24oKXt0aGlzLnZlcnNpb249dGhpcy54Wig4KSx0aGlzLnpaPXRoaXMueFooMjQpfSxuLnByb3RvdHlwZS5ZWj17fSxbXCJtb292XCIsXCJ0cmFrXCIsXCJ0cmVmXCIsXCJtZGlhXCIsXCJtaW5mXCIsXCJzdGJsXCIsXCJlZHRzXCIsXCJkaW5mXCIsXCJtdmV4XCIsXCJtb29mXCIsXCJ0cmFmXCIsXCJtZnJhXCIsXCJ1ZHRhXCIsXCJtZWNvXCIsXCJzdHJrXCIsXCJ2dHRjXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7bi5wcm90b3R5cGUuWVpbZV09ZnVuY3Rpb24oKXtmb3IodGhpcy5EWj1bXTt0aGlzLk5aLm9mZnNldC10aGlzLk9aLmJ5dGVPZmZzZXQ8dGhpcy5PWi5ieXRlTGVuZ3RoOyl0aGlzLkRaLnB1c2gobi5wYXJzZSh0aGlzKSl9fSksbi5wcm90b3R5cGUuWVouSlo9ZnVuY3Rpb24oKXt0aGlzLldaKCksdGhpcy5YWj10aGlzLnhaKDMyKSx0aGlzLmVudHJpZXM9W107Zm9yKHZhciBlPTE7ZTw9dGhpcy5YWjtlKyspe3ZhciB0PXt9OzE9PXRoaXMudmVyc2lvbj8odC5aWj10aGlzLnhaKDY0KSx0LiRaPXRoaXMuSFooNjQpKToodC5aWj10aGlzLnhaKDMyKSx0LiRaPXRoaXMuSFooMzIpKSx0LmUkPXRoaXMuSFooMTYpLHQudCQ9dGhpcy5IWigxNiksdGhpcy5lbnRyaWVzLnB1c2godCl9fSxuLnByb3RvdHlwZS5ZWi5yJD1mdW5jdGlvbigpe3RoaXMuV1ooKSx0aGlzLmkkPXRoaXMuR1ooKSx0aGlzLnZhbHVlPXRoaXMuR1ooKSx0aGlzLnRpbWVzY2FsZT10aGlzLnhaKDMyKSx0aGlzLm4kPXRoaXMueFooMzIpLHRoaXMucyQ9dGhpcy54WigzMiksdGhpcy5pZD10aGlzLnhaKDMyKSx0aGlzLm8kPW5ldyBEYXRhVmlldyh0aGlzLk9aLmJ1ZmZlcix0aGlzLk5aLm9mZnNldCx0aGlzLk9aLmJ5dGVMZW5ndGgtKHRoaXMuTloub2Zmc2V0LXRoaXMuTVopKX0sbi5wcm90b3R5cGUuWVouYSQ9bi5wcm90b3R5cGUuWVouTWI9ZnVuY3Rpb24oKXt0aGlzLmRhdGE9bmV3IERhdGFWaWV3KHRoaXMuT1ouYnVmZmVyLHRoaXMuTloub2Zmc2V0LHRoaXMuT1ouYnl0ZUxlbmd0aC0odGhpcy5OWi5vZmZzZXQtdGhpcy5NWikpfSxuLnByb3RvdHlwZS5ZWi5oJD1uLnByb3RvdHlwZS5ZWi5jJD1mdW5jdGlvbigpe2Zvcih0aGlzLnUkPXRoaXMucVooNCksdGhpcy5sJD10aGlzLnhaKDMyKSx0aGlzLnAkPVtdO3RoaXMuTloub2Zmc2V0LXRoaXMuT1ouYnl0ZU9mZnNldDx0aGlzLk9aLmJ5dGVMZW5ndGg7KXRoaXMucCQucHVzaCh0aGlzLnFaKDQpKX0sbi5wcm90b3R5cGUuWVouZCQ9ZnVuY3Rpb24oKXt0aGlzLldaKCksdGhpcy5mJD10aGlzLnhaKDMyKSx0aGlzLmckPXRoaXMucVooNCksdGhpcy5ZUj1bdGhpcy54WigzMiksdGhpcy54WigzMiksdGhpcy54WigzMildLHRoaXMubmFtZT10aGlzLkdaKCl9LG4ucHJvdG90eXBlLllaLkUkPWZ1bmN0aW9uKCl7dGhpcy5kYXRhPW5ldyBEYXRhVmlldyh0aGlzLk9aLmJ1ZmZlcix0aGlzLk5aLm9mZnNldCx0aGlzLk9aLmJ5dGVMZW5ndGgtKHRoaXMuTloub2Zmc2V0LXRoaXMuTVopKX0sbi5wcm90b3R5cGUuWVoudiQ9ZnVuY3Rpb24oKXt0aGlzLldaKCksMT09dGhpcy52ZXJzaW9uPyh0aGlzLnkkPXRoaXMueFooNjQpLHRoaXMuVCQ9dGhpcy54Wig2NCksdGhpcy50aW1lc2NhbGU9dGhpcy54WigzMiksdGhpcy5kdXJhdGlvbj10aGlzLnhaKDY0KSk6KHRoaXMueSQ9dGhpcy54WigzMiksdGhpcy5UJD10aGlzLnhaKDMyKSx0aGlzLnRpbWVzY2FsZT10aGlzLnhaKDMyKSx0aGlzLmR1cmF0aW9uPXRoaXMueFooMzIpKTt2YXIgZT10aGlzLnhaKDE2KTt0aGlzLnBhZD1lPj4xNSx0aGlzLmxhbmd1YWdlPVN0cmluZy5mcm9tQ2hhckNvZGUoOTYrKGU+PjEwJjMxKSw5NisoZT4+NSYzMSksOTYrKDMxJmUpKSx0aGlzLmYkPXRoaXMueFooMTYpfSxuLnByb3RvdHlwZS5ZWi5tJD1mdW5jdGlvbigpe3RoaXMuV1ooKSx0aGlzLkkkPXRoaXMueFooMzIpfSxuLnByb3RvdHlwZS5ZWi5TJD1mdW5jdGlvbigpe3RoaXMuV1ooKSwxPT10aGlzLnZlcnNpb24/KHRoaXMueSQ9dGhpcy54Wig2NCksdGhpcy5UJD10aGlzLnhaKDY0KSx0aGlzLnRpbWVzY2FsZT10aGlzLnhaKDMyKSx0aGlzLmR1cmF0aW9uPXRoaXMueFooNjQpKToodGhpcy55JD10aGlzLnhaKDMyKSx0aGlzLlQkPXRoaXMueFooMzIpLHRoaXMudGltZXNjYWxlPXRoaXMueFooMzIpLHRoaXMuZHVyYXRpb249dGhpcy54WigzMikpLHRoaXMucmF0ZT10aGlzLlZaKDMyKSx0aGlzLnZvbHVtZT10aGlzLlZaKDE2KSx0aGlzLlIkPXRoaXMueFooMTYpLHRoaXMudyQ9W3RoaXMueFooMzIpLHRoaXMueFooMzIpXSx0aGlzLm1hdHJpeD1bXTtmb3IodmFyIGU9MDtlPDk7ZSsrKXRoaXMubWF0cml4LnB1c2godGhpcy5WWigzMikpO3RoaXMuZiQ9W107Zm9yKHZhciBlPTA7ZTw2O2UrKyl0aGlzLmYkLnB1c2godGhpcy54WigzMikpO3RoaXMuYiQ9dGhpcy54WigzMil9LG4ucHJvdG90eXBlLllaLkMkPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IERhdGFWaWV3KHRoaXMuT1ouYnVmZmVyLHRoaXMuTloub2Zmc2V0LHRoaXMuT1ouYnl0ZUxlbmd0aC0odGhpcy5OWi5vZmZzZXQtdGhpcy5NWikpO3RoaXMuXyQ9SVNPQm94ZXIucmMuUFooZSl9LG4ucHJvdG90eXBlLllaLlAkPWZ1bmN0aW9uKCl7dGhpcy5XWigpLHRoaXMuQSQ9dGhpcy54WigzMiksdGhpcy50aW1lc2NhbGU9dGhpcy54WigzMiksMD09dGhpcy52ZXJzaW9uPyh0aGlzLk8kPXRoaXMueFooMzIpLHRoaXMuTiQ9dGhpcy54WigzMikpOih0aGlzLk8kPXRoaXMueFooNjQpLHRoaXMuTiQ9dGhpcy54Wig2NCkpLHRoaXMuWVI9dGhpcy54WigxNiksdGhpcy5EJD10aGlzLnhaKDE2KSx0aGlzLmskPVtdO2Zvcih2YXIgZT0wO2U8dGhpcy5EJDtlKyspe3ZhciB0PXt9LHI9dGhpcy54WigzMik7dC5MJD1yPj4zMSYxLHQuTSQ9MjE0NzQ4MzY0NyZyLHQuRiQ9dGhpcy54WigzMik7dmFyIGk9dGhpcy54WigzMik7dC5VJD1pPj4zMSYxLHQuQiQ9aT4+MjgmNyx0LkgkPTI2ODQzNTQ1NSZpLHRoaXMuayQucHVzaCh0KX19LG4ucHJvdG90eXBlLllaLngkPWZ1bmN0aW9uKCl7dGhpcy5XWigpLHRoaXMucSQ9dGhpcy54WigzMiksdGhpcy5HJD1bXTtmb3IodmFyIGU9MDtlPHRoaXMucSQ7ZSsrKXt2YXIgdD17fTt0LlYkPXRoaXMueFooMzIpLHQuaiQ9W107Zm9yKHZhciByPTA7cjx0LlYkO3IrKyl7dmFyIGk9e307aS5sZXZlbD10aGlzLnhaKDgpLGkuUSQ9dGhpcy54WigyNCksdC5qJC5wdXNoKGkpfXRoaXMuRyQucHVzaCh0KX19LG4ucHJvdG90eXBlLllaLkskPWZ1bmN0aW9uKCl7dGhpcy5XWigpLDE9PXRoaXMudmVyc2lvbj90aGlzLlkkPXRoaXMueFooNjQpOnRoaXMuWSQ9dGhpcy54WigzMil9LG4ucHJvdG90eXBlLllaLnRmaGQ9ZnVuY3Rpb24oKXt0aGlzLldaKCksdGhpcy5XJD10aGlzLnhaKDMyKSwxJnRoaXMuelomJih0aGlzLnokPXRoaXMueFooNjQpKSwyJnRoaXMuelomJih0aGlzLkokPXRoaXMueFooMzIpKSw4JnRoaXMuelomJih0aGlzLmRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uPXRoaXMueFooMzIpKSwxNiZ0aGlzLnpaJiYodGhpcy5YJD10aGlzLnhaKDMyKSksMzImdGhpcy56WiYmKHRoaXMuWiQ9dGhpcy54WigzMikpfSxuLnByb3RvdHlwZS5ZWi4kJD1mdW5jdGlvbigpe3RoaXMuV1ooKSwxPT10aGlzLnZlcnNpb24/KHRoaXMueSQ9dGhpcy54Wig2NCksdGhpcy5UJD10aGlzLnhaKDY0KSx0aGlzLlckPXRoaXMueFooMzIpLHRoaXMuUiQ9dGhpcy54WigzMiksdGhpcy5kdXJhdGlvbj10aGlzLnhaKDY0KSk6KHRoaXMueSQ9dGhpcy54WigzMiksdGhpcy5UJD10aGlzLnhaKDMyKSx0aGlzLlckPXRoaXMueFooMzIpLHRoaXMuUiQ9dGhpcy54WigzMiksdGhpcy5kdXJhdGlvbj10aGlzLnhaKDMyKSksdGhpcy53JD1bdGhpcy54WigzMiksdGhpcy54WigzMildLHRoaXMuZTA9dGhpcy54WigxNiksdGhpcy50MD10aGlzLnhaKDE2KSx0aGlzLnZvbHVtZT10aGlzLlZaKDE2KSx0aGlzLnIwPXRoaXMueFooMTYpLHRoaXMubWF0cml4PVtdO2Zvcih2YXIgZT0wO2U8OTtlKyspdGhpcy5tYXRyaXgucHVzaCh0aGlzLlZaKDMyKSk7dGhpcy53aWR0aD10aGlzLnhaKDMyKSx0aGlzLmhlaWdodD10aGlzLnhaKDMyKX0sbi5wcm90b3R5cGUuWVoudHJ1bj1mdW5jdGlvbigpe3RoaXMuV1ooKSx0aGlzLmkwPXRoaXMueFooMzIpLDEmdGhpcy56WiYmKHRoaXMubjA9dGhpcy5IWigzMikpLDQmdGhpcy56WiYmKHRoaXMuczA9dGhpcy54WigzMikpLHRoaXMuS3g9W107Zm9yKHZhciBlPTA7ZTx0aGlzLmkwO2UrKyl7dmFyIHQ9e307MjU2JnRoaXMuelomJih0LnNhbXBsZV9kdXJhdGlvbj10aGlzLnhaKDMyKSksNTEyJnRoaXMuelomJih0Lm8wPXRoaXMueFooMzIpKSwxMDI0JnRoaXMuelomJih0LmEwPXRoaXMueFooMzIpKSwyMDQ4JnRoaXMuelomJigwPT10aGlzLnZlcnNpb24/dC5oMD10aGlzLnhaKDMyKTp0LmgwPXRoaXMuSFooMzIpKSx0aGlzLkt4LnB1c2godCl9fSxuLnByb3RvdHlwZS5ZWi5jMD1mdW5jdGlvbigpe3ZhciBlPW5ldyBEYXRhVmlldyh0aGlzLk9aLmJ1ZmZlcix0aGlzLk5aLm9mZnNldCx0aGlzLk9aLmJ5dGVMZW5ndGgtKHRoaXMuTloub2Zmc2V0LXRoaXMuTVopKTt0aGlzLnUwPUlTT0JveGVyLnJjLlBaKGUpfSxuLnByb3RvdHlwZS5ZWi5sMD1mdW5jdGlvbigpe3ZhciBlPW5ldyBEYXRhVmlldyh0aGlzLk9aLmJ1ZmZlcix0aGlzLk5aLm9mZnNldCx0aGlzLk9aLmJ5dGVMZW5ndGgtKHRoaXMuTloub2Zmc2V0LXRoaXMuTVopKTt0aGlzLmNvbmZpZz1JU09Cb3hlci5yYy5QWihlKX0sbi5wcm90b3R5cGUuWVoucDA9ZnVuY3Rpb24oKXt9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlfSgpO3QuX3g9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNCksbj1yKDApLHM9cigxKSxvPXIoMiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLm5hbWU9ZSx0aGlzLml2PXR9cmV0dXJuIGV9KCksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMubG9nZ2VySWQ9XCJbREFTSCBBRVMgTWFuYWdlcl0gXCIsdGhpcy5kMD1cIkFFUy1DQkNcIix0aGlzLmxsPSExLHRoaXMubG9nZ2VyPW4uRnJhbWV3b3JrJiZuLkZyYW1ld29yay5yZXNvbHZlKG4uRnJhbWV3b3JrLlYuUik/bi5GcmFtZXdvcmsucmVzb2x2ZShuLkZyYW1ld29yay5WLlIpLmxvZygpOmNvbnNvbGUsdGhpcy5mMD1lLHRoaXMuZzA9dCx0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiU3RhcnRpbmcgRGFzaCBBRVMgTWFuYWdlclwiKSxyJiYodGhpcy5FMD1yKX1yZXR1cm4gZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dHJ5e3RoaXMudjAoKTt2YXIgdD1pLmRlZmVyKCk7dGhpcy55MCgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC5yZXNvbHZlKCEwKX0pLmZhaWwoZnVuY3Rpb24ocil7cy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBrZXlcIixlLmxvZ2dlcklkLG8uaHMuVXIuRHIsciksdC5yZXNvbHZlKCExKX0pLHRoaXMuVDA9dC5Tc31jYXRjaChlKXtzLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIEFFUyBNYW5hZ2VyXCIsdGhpcy5sb2dnZXJJZCxvLmhzLlVyLk5yLGUpfX0sZS5wcm90b3R5cGUuTk09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5UMD90aGlzLlQwOmkucmVzb2x2ZSghMSl9LGUucHJvdG90eXBlLnkwPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLm0wKXJldHVybiB0aGlzLm0wO3ZhciB0PWkuZGVmZXIoKTtyZXR1cm4gdGhpcy5JMCgpLnRoZW4oZnVuY3Rpb24ocil7d2luZG93LmNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KFwicmF3XCIscix7bmFtZTplLmQwfSwhMSxbXCJkZWNyeXB0XCJdKS50aGVuKGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKX0sZnVuY3Rpb24oZSl7dC5yZWplY3QoXCJlcnJvciBpbXBvcnRpbmcga2V5OiBcIitlLnRvU3RyaW5nKCkpfSl9KS5mYWlsKGZ1bmN0aW9uKGUpe3JldHVybiB0LnJlamVjdChlKX0pLHRoaXMubTA9dC5Tcyx0aGlzLm0wfSxlLnByb3RvdHlwZS52MD1mdW5jdGlvbigpe2Zvcih2YXIgZT0yLHQ9dGhpcy5nMC5sZW5ndGgscj1bXTtlPHQ7ZSs9MilyLnB1c2gocGFyc2VJbnQodGhpcy5nMC5zdWJzdHIoZSwyKSwxNikpO3RoaXMuaXY9bmV3IFVpbnQ4QXJyYXkocil9LGUucHJvdG90eXBlLmRlY3J5cHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWkuZGVmZXIoKSxuPW5ldyBhKHRoaXMuZDAsdGhpcy5pdik7cmV0dXJuIHRoaXMubTAudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gd2luZG93LmNyeXB0by5zdWJ0bGUuZGVjcnlwdChuLHQsZSkudGhlbihmdW5jdGlvbihlKXtyLnJlc29sdmUoZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBkZWNyeXB0aW5nIGFycmF5YnVmZmVyXCIsdC5sb2dnZXJJZCxvLmhzLlVyLkxyLGUpLHQubGw9ITAsdC5UMD1pLnJlc29sdmUoITEpLHIucmVqZWN0KGUpfSksci5Tc30sZS5wcm90b3R5cGUuSTA9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9aS5kZWZlcigpLHI9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiByLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCIsci5vcGVuKFwiR0VUXCIsdGhpcy5mMCksdGhpcy5FMCYmci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLHRoaXMuRTApLHIub25sb2FkPWZ1bmN0aW9uKCl7aWYoMjAwPT09ci5zdGF0dXMpe3ZhciBpPW5ldyBVaW50OEFycmF5KHIucmVzcG9uc2UpO3QucmVzb2x2ZShpKX1lbHNlIHMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBkb3dubG9hZGluZyBrZXlcIixlLmxvZ2dlcklkLG8uaHMuVXIuTXIsci5zdGF0dXMpLHQucmVqZWN0KFwiZXJyb3IgZG93bmxvYWRpbmcga2V5IC0gc3RhdHVzOiBcIityLnN0YXR1cyl9LHIub25lcnJvcj1mdW5jdGlvbigpe3MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBkb3dubG9hZGluZyBrZXlcIixlLmxvZ2dlcixvLmhzLlVyLkZyKSx0LnJlamVjdChcImVycm9yIGRvd25sb2FkaW5nIGtleVwiKX0sci5zZW5kKCksdC5Tc30sZS5wcm90b3R5cGUueHg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sbH0sZX0oKTt0LnF4PWh9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDQpLG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5OTT1mdW5jdGlvbigpe3JldHVybiBpLnJlc29sdmUoITEpfSxlLnByb3RvdHlwZS5kZWNyeXB0PWZ1bmN0aW9uKGUpe3JldHVybiBpLnJlamVjdChcInVuc3VwcG9ydGVkXCIpfSxlLnByb3RvdHlwZS54eD1mdW5jdGlvbigpe3JldHVybiExfSxlfSgpO3QuR3g9bn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuaHV8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiYoZVtpXT10W2ldKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cig4NSkscz1yKDYxKSxvPXIoNTcpLGE9cig0KSxoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUuYng9ZnVuY3Rpb24oZSx0KXt0aGlzLm1hbmlmZXN0PXRoaXMubXgucGFyc2UodCx0aGlzLkl4KGUpKX0sdC5wcm90b3R5cGUuVXg9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdWJzdHIoMCxlLmxhc3RJbmRleE9mKFwiPVwiKSk7cmV0dXJuIHQ9dC5zdWJzdHIoMCx0Lmxhc3RJbmRleE9mKFwiPVwiKSl9LHQucHJvdG90eXBlLkNNPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1hLmRlZmVyKCksaT10aGlzLmdNKGUuZWcoKSk7aWYoIWl8fGkubmV4dClyZXR1cm4gci5yZXNvbHZlKCExKSxyLlNzO3ZhciBoPWEuZGVmZXIoKTtpZih0aGlzLk9NKW8uREFTSC5YTD90aGlzLk9NLk5NKCkudGhlbihmdW5jdGlvbihyKXtyP3QuT00uZGVjcnlwdChlLmpmKS50aGVuKGZ1bmN0aW9uKGUpe2gucmVzb2x2ZSh0Lmp4KGUpKX0pLmZhaWwoZnVuY3Rpb24oZSl7cmV0dXJuIGgucmVqZWN0KCEwKX0pOmgucmVqZWN0KCExKX0pOmgucmVqZWN0KCExKTtlbHNlIHRyeXt2YXIgYz10aGlzLmp4KGUuamYpO2gucmVzb2x2ZShjKX1jYXRjaChlKXt0aGlzLmxvZ2dlci53YXJuKFwiZXJyb3IgZXh0cmFjdGluZyBkdXJhdGlvblwiLGUpLGgucmVqZWN0KCEwKX1yZXR1cm4gaC5Tcy50aGVuKGZ1bmN0aW9uKGUpe2lmKCFpc05hTihlKSl7dmFyIG89aS5pZCtlO3QubG9nZ2VyLmRlYnVnKFwiZm91bmQgbmV4dCBmcmFnbWVudDogXCIraS5pZCtcIiAtPiBcIitvK1wiIGR1cmF0aW9uOiBcIitlKSx0LlN4LmZvckVhY2goZnVuY3Rpb24odCxyKXtpZih0LnR5cGU9PT1pLnR5cGUpe3ZhciBhPXQuTngucmVwbGFjZShuLiR4Lkh4LGkuaWQrXCJcIiksaD10Lk54LnJlcGxhY2Uobi4keC5IeCxvK1wiXCIpLGM9dC5reC5nZXQoYSk7aWYoIXQua3guaGFzKGgpJiZjKXtjLmR1cmF0aW9uPWU7dmFyIHU9bmV3IHMuREYobyx0LmJhbmR3aWR0aCxlLGgsaCk7dS50eXBlPWMudHlwZSxjLm5leHQ9dSx0Lmt4LnNldChoLHUpLHQuTXguc2V0KG8sdSl9fX0pfXIucmVzb2x2ZSghMSl9KS5mYWlsKGZ1bmN0aW9uKGkpe3QubG9nZ2VyLmRlYnVnKFwiY291bGQgbm90IGV4dHJhY3QgZHVyYXRpb24gZnJvbSBcIitlLmVnKCkrXCIgW3JlZXZhbHVhdGU6IFwiK2krXCJdXCIpLHIucmVzb2x2ZShpKX0pLHIuU3N9LHR9KG4uJHgpO3QuY009aH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMSksbj1yKDE1Mikscz1yKDMpLG89cigxNTMpLGE9cig2MSksaD1yKDApLGM9cig3KSx1PXIoODcpLGw9cigyKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubG9nZ2VySWQ9XCJbSExTIE1FVEFEQVRBXSBcIix0aGlzLkFxPW5ldyBzLHRoaXMuUzA9bnVsbCx0aGlzLmxvZ2dlcj0oaC5GcmFtZXdvcmsucmVzb2x2ZShoLkZyYW1ld29yay5WLlIpfHxjb25zb2xlKS5sb2coKX1yZXR1cm4gZS5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZSx0KXt0cnl7dmFyIHI9bmV3IG4uUjA7aWYoci5wdXNoKHQpLHIubWFuaWZlc3QucGxheWxpc3RzKXRoaXMudzAoZSxyLm1hbmlmZXN0KTtlbHNle3ZhciBzPXRoaXMuYjAoZSxyLm1hbmlmZXN0KTtpZihzJiZzLkMwJiYodGhpcy5saXZlPSFzLkMwLl8wKSx0aGlzLmxpdmUpe3ZhciBvPXRoaXMuUDAoci5tYW5pZmVzdCx0KTtyZXR1cm4gdGhpcy5sb2dnZXIuZGVidWcoXCJITFMgbWFuaWZlc3QgdHJpbW1lZCBcIitvLkEwK1wiIHNlZ21lbnRzIChcIitvLkEwK1wicykgLSBuZXcgc2VnbWVudHM6W1wiK3MuTzAubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkK1wiOlwiK2UuZHVyYXRpb259KStcIl1cIiksby5OMH19cmV0dXJuIHR9Y2F0Y2gocil7cmV0dXJuIGkuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBwYXJzaW5nIG1ldGFkYXRhXCIsdGhpcy5sb2dnZXJJZCxsLmhzLnlpLldyLHtkZXRhaWxlZEVycm9yOnIsdXJsOmV9KSx0fX0sZS5wcm90b3R5cGUucU09ZnVuY3Rpb24oZSx0KXtpZih0aGlzLk9xLmhhcyh0KSl7cmV0dXJuIHRoaXMuT3EuZ2V0KHQpLk14LmdldChlKX1yZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUubE09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5BcS52YWx1ZXMoKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuYml0cmF0ZX0pfSxlLnByb3RvdHlwZS5pc0xpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saXZlfSxlLnByb3RvdHlwZS5nTT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dGhpcy5reD9udWxsOnRoaXMua3guZ2V0KGUpfSxlLnByb3RvdHlwZS52TT1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9dGhpcy5reC5nZXQoZSk7aWYodCl7dmFyIHI9dC5iaXRyYXRlO3JldHVybiB0aGlzLk9xLmdldChyKS5NeC5nZXQodC5pZCsxKX1yZXR1cm4gbnVsbH1jYXRjaCh0KXtyZXR1cm4gaS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGdldHRpbmcgdGhlIG5leHQgc2VnbWVudCBpbmZvXCIsdGhpcy5sb2dnZXJJZCxsLmhzLnlpLlhyLHtkZXRhaWxlZEVycm9yOnQsdXJsOmV9KSxudWxsfX0sZS5wcm90b3R5cGUuX3E9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuQXEuaGFzKGUpfSxlLnByb3RvdHlwZS5QcT1mdW5jdGlvbigpe3JldHVybiB0aGlzLkQwfSxlLnByb3RvdHlwZS53MD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dGhpcy5EMD1lLHRoaXMuazA9dCx0aGlzLkFxPW5ldyBzLHRoaXMua3g9bmV3IHMsdGhpcy5PcT1uZXcgcyx0aGlzLmswLnBsYXlsaXN0cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBpPWMucmMuJGgoZSx0LnVyaSksbj10LmF0dHJpYnV0ZXMuQkFORFdJRFRILHM9bmV3IG8uTDAobix0LnVyaSxpKTtyLkFxLnNldChpLHMpLHIuT3Euc2V0KG4scyl9KX0sZS5wcm90b3R5cGUuYjA9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3RyeXt2YXIgbj10aGlzLkFxLmdldChlKTtpZighbilyZXR1cm4gdm9pZCBpLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiUGxheWxpc3QgdXJsIGRvZXMgbm90IG1hdGNoIGFueSBwbGF5bGlzdCBpbiB0aGUgbWFzdGVyIGZpbGVcIix0aGlzLmxvZ2dlcklkLGwuaHMueWkuZmkse3VybDplfSk7dmFyIHM9bnVsbCE9dC5tZWRpYVNlcXVlbmNlP3QubWVkaWFTZXF1ZW5jZTowLG89W10saD1zLTEsdT1uLk14LmdldChoKSxwPVtdO3JldHVybiB0Lk5xLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGg9Yy5yYy4kaChlLHQudXJpKSxsPU1hdGgucm91bmQoMWUzKnQuZHVyYXRpb24pLGQ9bi5iaXRyYXRlO051bWJlci5pc0ludGVnZXIoZCl8fChpLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiU2VnbWVudCBCaXRyYXRlIGlzIGEgRmxvYXRcIix7Yml0cmF0ZTpkfSksZD1NYXRoLnJvdW5kKGQpKTt2YXIgZj1uZXcgYS5ERihzLGQsbCx0LnVyaSxoKTtyLmt4LmhhcyhoKXx8cC5wdXNoKGYpLHIua3guc2V0KGgsZiksbi5NeC5zZXQocyxmKSxvLnB1c2goZiksdSYmKHUubmV4dD1mKSx1PWYscysrfSksdGhpcy5TMD1uLG4udXBkYXRlKHQubWVkaWFTZXF1ZW5jZSx0LmRpc2NvbnRpbnVpdHlTZXF1ZW5jZSx0Ll8wLHQuTTAsbykse0MwOm4sTzA6cH19Y2F0Y2goZSl7cmV0dXJuIGkuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciB1cGRhdGluZyB0aGUgcGxheWxpc3RcIix0aGlzLmxvZ2dlcklkLGwuaHMueWkuRWksZSksbnVsbH19LGUucHJvdG90eXBlLlAwPWZ1bmN0aW9uKGUsdCl7dHJ5e2Zvcih2YXIgcj10LnNwbGl0KFwiXFxuXCIpLG49TWF0aC5tYXgoMSx1LmJxLnZxKSxzPW51bGwsbz0wLGE9MCxoPWUuTnEubGVuZ3RoLTE7aD5uLTEmJihzPWUuTnFbaF0sIShvPj11LmJxLkVxKSk7aC0tKWErKyxvKz1zLmR1cmF0aW9uO2Zvcih2YXIgYz1cIlwiLGg9MDtoPHIubGVuZ3RoJiYoYz1jK3JbaF0rXCJcXG5cIixyW2hdLnRyaW0oKSE9PXMudXJpKTtoKyspO3JldHVybiB0aGlzLmxvZ2dlci5kZWJ1ZyhcIkhMUyB0cmltbWVkIFwiK2ErXCIgc2VnbWVudHMgZm9yIHRvdGFsIGR1cmF0aW9uOiBcIitvKSx7TjA6YyxBMDphLEYwOm99fWNhdGNoKGUpe3Rocm93IGkuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciB0cmltbWluZyB0aGUgcGxheWxpc3RcIix0aGlzLmxvZ2dlcklkLGwuaHMueWkudmksZSksbmV3IEVycm9yKGUpfX0sZX0oKTt0LndxPXB9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1mdW5jdGlvbigpe3ZhciBlPXt9O2UuTVQ9e30sZS5NVC5jcmVhdGU9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGU9ZSxuZXcgdH0sZS5NVC5VMD1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpIGluIGUpaGFzT3duUHJvcC5jYWxsKGUsaSkmJnQuY2FsbChyfHx0aGlzLGksZVtpXSl9LGUuTVQuUHk9ZnVuY3Rpb24oZSx0KXtpZighdClyZXR1cm4gZTtmb3IodmFyIHIgaW4gdCloYXNPd25Qcm9wLmNhbGwodCxyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGV9LGUuTVQuQjA9ZnVuY3Rpb24odCxyKXt2YXIgaSxuLHM7dD1lLk1ULmNBKHQpO2ZvcihpIGluIHIpaGFzT3duUHJvcC5jYWxsKHIsaSkmJihuPXRbaV0scz1yW2ldLGUuTVQuSDAobikmJmUuTVQuSDAocyk/dFtpXT1lLk1ULkIwKG4scyk6dFtpXT1yW2ldKTtyZXR1cm4gdH0sZS5NVC5jQT1mdW5jdGlvbih0KXtyZXR1cm4gZS5NVC5QeSh7fSx0KX0sZS5NVC5IMD1mdW5jdGlvbihlKXtyZXR1cm4hIWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcIltvYmplY3QgT2JqZWN0XVwiPT09ZS50b1N0cmluZygpJiZlLmNvbnN0cnVjdG9yPT09T2JqZWN0fSxlLk1ULmlzQXJyYXk9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxtZXJnZU9wdGlvbnM9ZnVuY3Rpb24odCxyKXt2YXIgaSxuLHM7dD1lLk1ULmNBKHQpO2ZvcihpIGluIHIpci5oYXNPd25Qcm9wZXJ0eShpKSYmKG49dFtpXSxzPXJbaV0sZS5NVC5IMChuKSYmZS5NVC5IMChzKT90W2ldPWUudXRpbC54MChuLHMpOnRbaV09cltpXSk7cmV0dXJuIHR9LGUueDA9bWVyZ2VPcHRpb25zO3ZhciB0PWZ1bmN0aW9uKCl7dGhpcy5pbml0PWZ1bmN0aW9uKCl7dmFyIGU9e307dGhpcy5vbj1mdW5jdGlvbih0LHIpe2VbdF18fChlW3RdPVtdKSxlW3RdLnB1c2gocil9LHRoaXMub2ZmPWZ1bmN0aW9uKHQscil7dmFyIGk7cmV0dXJuISFlW3RdJiYoaT1lW3RdLmluZGV4T2YociksZVt0XS5zcGxpY2UoaSwxKSxpPi0xKX0sdGhpcy5xMD1mdW5jdGlvbih0KXt2YXIgcixpLG4scztpZihyPWVbdF0pZm9yKHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLG49ci5sZW5ndGgsaT0wO2k8bjsrK2kpcltpXS5hcHBseSh0aGlzLHMpfSx0aGlzLkcwPWZ1bmN0aW9uKCl7ZT17fX19fTt0LnByb3RvdHlwZS5WMD1mdW5jdGlvbihlKXt0aGlzLm9uKFwiZGF0YVwiLGZ1bmN0aW9uKHQpe2UucHVzaCh0KX0pfSxlLmowPXQ7dmFyIHIsaSxuLHM9ZnVuY3Rpb24oKXt9LG89ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFJlZ0V4cCgnKD86XnwsKSgoPzpbXj1dKik9KD86XCJbXlwiXSpcInxbXixdKikpJyl9KCksYT1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1lLnNwbGl0KG8pLGk9ci5sZW5ndGgsbj17fTtpLS07KVwiXCIhPT1yW2ldJiYodD0vKFtePV0qKT0oLiopLy5leGVjKHJbaV0pLnNsaWNlKDEpLHRbMF09dFswXS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpLHRbMV09dFsxXS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpLHRbMV09dFsxXS5yZXBsYWNlKC9eWydcIl0oLiopWydcIl0kL2csXCIkMVwiKSxuW3RbMF1dPXRbMV0pO3JldHVybiBufSx0PWUuajA7cmV0dXJuIHI9ZnVuY3Rpb24oKXt2YXIgZT1cIlwiO3IucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzKSx0aGlzLnB1c2g9ZnVuY3Rpb24odCl7dmFyIHI7Zm9yKGUrPXQscj1lLmluZGV4T2YoXCJcXG5cIik7cj4tMTtyPWUuaW5kZXhPZihcIlxcblwiKSl0aGlzLnEwKFwiZGF0YVwiLGUuc3Vic3RyaW5nKDAscikpLGU9ZS5zdWJzdHJpbmcocisxKX19LHIucHJvdG90eXBlPW5ldyB0LGk9ZnVuY3Rpb24oKXtpLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyl9LGkucHJvdG90eXBlPW5ldyB0LGkucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oZSl7dmFyIHQscjtpZihlPWUucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKSwwIT09ZS5sZW5ndGgpe2lmKFwiI1wiIT09ZVswXSlyZXR1cm4gdm9pZCB0aGlzLnEwKFwiZGF0YVwiLHt0eXBlOlwidXJpXCIsdXJpOmV9KTtpZigwIT09ZS5pbmRleE9mKFwiI0VYVFwiKSlyZXR1cm4gdm9pZCB0aGlzLnEwKFwiZGF0YVwiLHt0eXBlOlwiY29tbWVudFwiLHRleHQ6ZS5zbGljZSgxKX0pO2lmKGU9ZS5yZXBsYWNlKFwiXFxyXCIsXCJcIiksdD0vXiNFWFRNM1UvLmV4ZWMoZSkpcmV0dXJuIHZvaWQgdGhpcy5xMChcImRhdGFcIix7dHlwZTpcInRhZ1wiLFEwOlwibTN1XCJ9KTtpZih0PS9eI0VYVElORjo/KFswLTlcXC5dKik/LD8oLiopPyQvLmV4ZWMoZSkpcmV0dXJuIHI9e3R5cGU6XCJ0YWdcIixRMDpcImluZlwifSx0WzFdJiYoci5kdXJhdGlvbj1wYXJzZUZsb2F0KHRbMV0pKSx0WzJdJiYoci50aXRsZT10WzJdKSx2b2lkIHRoaXMucTAoXCJkYXRhXCIscik7aWYodD0vXiNFWFQtWC1UQVJHRVREVVJBVElPTjo/KFswLTkuXSopPy8uZXhlYyhlKSlyZXR1cm4gcj17dHlwZTpcInRhZ1wiLFEwOlwidGFyZ2V0ZHVyYXRpb25cIn0sdFsxXSYmKHIuZHVyYXRpb249cGFyc2VJbnQodFsxXSwxMCkpLHZvaWQgdGhpcy5xMChcImRhdGFcIixyKTtpZih0PS9eI1pFTi1UT1RBTC1EVVJBVElPTjo/KFswLTkuXSopPy8uZXhlYyhlKSlyZXR1cm4gcj17dHlwZTpcInRhZ1wiLFEwOlwidG90YWxkdXJhdGlvblwifSx0WzFdJiYoci5kdXJhdGlvbj1wYXJzZUludCh0WzFdLDEwKSksdm9pZCB0aGlzLnEwKFwiZGF0YVwiLHIpO2lmKHQ9L14jRVhULVgtVkVSU0lPTjo/KFswLTkuXSopPy8uZXhlYyhlKSlyZXR1cm4gcj17dHlwZTpcInRhZ1wiLFEwOlwidmVyc2lvblwifSx0WzFdJiYoci52ZXJzaW9uPXBhcnNlSW50KHRbMV0sMTApKSx2b2lkIHRoaXMucTAoXCJkYXRhXCIscik7aWYodD0vXiNFWFQtWC1NRURJQS1TRVFVRU5DRTo/KFxcLT9bMC05Ll0qKT8vLmV4ZWMoZSkpcmV0dXJuIHI9e3R5cGU6XCJ0YWdcIixRMDpcIm1lZGlhLXNlcXVlbmNlXCJ9LHRbMV0mJihyLm51bWJlcj1wYXJzZUludCh0WzFdLDEwKSksdm9pZCB0aGlzLnEwKFwiZGF0YVwiLHIpO2lmKHQ9L14jRVhULVgtRElTQ09OVElOVUlUWS1TRVFVRU5DRTo/KFxcLT9bMC05Ll0qKT8vLmV4ZWMoZSkpcmV0dXJuIHI9e3R5cGU6XCJ0YWdcIixRMDpcImRpc2NvbnRpbnVpdHktc2VxdWVuY2VcIn0sdFsxXSYmKHIubnVtYmVyPXBhcnNlSW50KHRbMV0sMTApKSx2b2lkIHRoaXMucTAoXCJkYXRhXCIscik7aWYodD0vXiNFWFQtWC1QTEFZTElTVC1UWVBFOj8oLiopPyQvLmV4ZWMoZSkpcmV0dXJuIHI9e3R5cGU6XCJ0YWdcIixRMDpcInBsYXlsaXN0LXR5cGVcIn0sdFsxXSYmKHIuSzA9dFsxXSksdm9pZCB0aGlzLnEwKFwiZGF0YVwiLHIpO2lmKHQ9L14jRVhULVgtQllURVJBTkdFOj8oWzAtOS5dKik/QD8oWzAtOS5dKik/Ly5leGVjKGUpKXJldHVybiByPXt0eXBlOlwidGFnXCIsUTA6XCJieXRlcmFuZ2VcIn0sdFsxXSYmKHIubGVuZ3RoPXBhcnNlSW50KHRbMV0sMTApKSx0WzJdJiYoci5vZmZzZXQ9cGFyc2VJbnQodFsyXSwxMCkpLHZvaWQgdGhpcy5xMChcImRhdGFcIixyKTtpZih0PS9eI0VYVC1YLUFMTE9XLUNBQ0hFOj8oWUVTfE5PKT8vLmV4ZWMoZSkpcmV0dXJuIHI9e3R5cGU6XCJ0YWdcIixRMDpcImFsbG93LWNhY2hlXCJ9LHRbMV0mJihyLlhEPSEvTk8vLnRlc3QodFsxXSkpLHZvaWQgdGhpcy5xMChcImRhdGFcIixyKTtpZih0PS9eI0VYVC1YLVNUUkVBTS1JTkY6PyguKikkLy5leGVjKGUpKXJldHVybiByPXt0eXBlOlwidGFnXCIsUTA6XCJzdHJlYW0taW5mXCJ9LHRbMV0mJihyLmF0dHJpYnV0ZXM9YSh0WzFdKSxyLmF0dHJpYnV0ZXMuWTAmJmZ1bmN0aW9uKCl7dmFyIGU9ci5hdHRyaWJ1dGVzLlkwLnNwbGl0KFwieFwiKSx0PXt9O2VbMF0mJih0LndpZHRoPXBhcnNlSW50KGVbMF0sMTApKSxlWzFdJiYodC5oZWlnaHQ9cGFyc2VJbnQoZVsxXSwxMCkpLHIuYXR0cmlidXRlcy5ZMD10fSgpLHIuYXR0cmlidXRlcy5CQU5EV0lEVEgmJihyLmF0dHJpYnV0ZXMuQkFORFdJRFRIPXBhcnNlSW50KHIuYXR0cmlidXRlcy5CQU5EV0lEVEgsMTApKSxyLmF0dHJpYnV0ZXNbXCJXMFwiXSYmKHIuYXR0cmlidXRlc1tcIlcwXCJdPXBhcnNlSW50KHIuYXR0cmlidXRlc1tcIlcwXCJdLDEwKSkpLHZvaWQgdGhpcy5xMChcImRhdGFcIixyKTtpZih0PS9eI0VYVC1YLUVORExJU1QvLmV4ZWMoZSkpcmV0dXJuIHZvaWQgdGhpcy5xMChcImRhdGFcIix7dHlwZTpcInRhZ1wiLFEwOlwiZW5kbGlzdFwifSk7aWYodD0vXiNFWFQtWC1ESVNDT05USU5VSVRZLy5leGVjKGUpKXJldHVybiB2b2lkIHRoaXMucTAoXCJkYXRhXCIse3R5cGU6XCJ0YWdcIixRMDpcImRpc2NvbnRpbnVpdHlcIn0pO2lmKHQ9L14jRVhULVgtS0VZOj8oLiopJC8uZXhlYyhlKSlyZXR1cm4gcj17dHlwZTpcInRhZ1wiLFEwOlwia2V5XCJ9LHRbMV0mJihyLmF0dHJpYnV0ZXM9YSh0WzFdKSxyLmF0dHJpYnV0ZXMuSVYmJihcIjB4XCI9PT1yLmF0dHJpYnV0ZXMuSVYuc3Vic3RyaW5nKDAsMikmJihyLmF0dHJpYnV0ZXMuSVY9ci5hdHRyaWJ1dGVzLklWLnN1YnN0cmluZygyKSksci5hdHRyaWJ1dGVzLklWPXIuYXR0cmlidXRlcy5JVi5tYXRjaCgvLns4fS9nKSxyLmF0dHJpYnV0ZXMuSVZbMF09cGFyc2VJbnQoci5hdHRyaWJ1dGVzLklWWzBdLDE2KSxyLmF0dHJpYnV0ZXMuSVZbMV09cGFyc2VJbnQoci5hdHRyaWJ1dGVzLklWWzFdLDE2KSxyLmF0dHJpYnV0ZXMuSVZbMl09cGFyc2VJbnQoci5hdHRyaWJ1dGVzLklWWzJdLDE2KSxyLmF0dHJpYnV0ZXMuSVZbM109cGFyc2VJbnQoci5hdHRyaWJ1dGVzLklWWzNdLDE2KSxyLmF0dHJpYnV0ZXMuSVY9bmV3IFVpbnQzMkFycmF5KHIuYXR0cmlidXRlcy5JVikpKSx2b2lkIHRoaXMucTAoXCJkYXRhXCIscik7dGhpcy5xMChcImRhdGFcIix7dHlwZTpcInRhZ1wiLGRhdGE6ZS5zbGljZSg0LGUubGVuZ3RoKX0pfX0sbj1mdW5jdGlvbigpe3ZhciB0LG89dGhpcyxhPVtdLGg9e307bi5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMpLHRoaXMuejA9bmV3IHIsdGhpcy5KMD1uZXcgaSx0aGlzLnowLlYwKHRoaXMuSjApLHRoaXMubWFuaWZlc3Q9e1gwOiEwfSx0aGlzLkowLm9uKFwiZGF0YVwiLGZ1bmN0aW9uKHIpeyh7dGFnOmZ1bmN0aW9uKCl7KCh7XCJhbGxvdy1jYWNoZVwiOmZ1bmN0aW9uKCl7dGhpcy5tYW5pZmVzdC5YMD1yLlhELFwiYWxsb3dlZFwiaW4gcnx8KHRoaXMucTAoXCJpbmZvXCIse21lc3NhZ2U6XCJkZWZhdWx0aW5nIGFsbG93Q2FjaGUgdG8gWUVTXCJ9KSx0aGlzLm1hbmlmZXN0LlgwPSEwKX0sYnl0ZXJhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9e307XCJsZW5ndGhcImluIHImJihoLmJ5dGVyYW5nZT1lLGUubGVuZ3RoPXIubGVuZ3RoLFwib2Zmc2V0XCJpbiByfHwodGhpcy5xMChcImluZm9cIix7bWVzc2FnZTpcImRlZmF1bHRpbmcgb2Zmc2V0IHRvIHplcm9cIn0pLHIub2Zmc2V0PTApKSxcIm9mZnNldFwiaW4gciYmKGguYnl0ZXJhbmdlPWUsZS5vZmZzZXQ9ci5vZmZzZXQpfSxlbmRsaXN0OmZ1bmN0aW9uKCl7dGhpcy5tYW5pZmVzdC5fMD0hMH0saW5mOmZ1bmN0aW9uKCl7XCJtZWRpYVNlcXVlbmNlXCJpbiB0aGlzLm1hbmlmZXN0fHwodGhpcy5tYW5pZmVzdC5tZWRpYVNlcXVlbmNlPTAsdGhpcy5xMChcImluZm9cIix7bWVzc2FnZTpcImRlZmF1bHRpbmcgbWVkaWEgc2VxdWVuY2UgdG8gemVyb1wifSkpLFwiZGlzY29udGludWl0eVNlcXVlbmNlXCJpbiB0aGlzLm1hbmlmZXN0fHwodGhpcy5tYW5pZmVzdC5kaXNjb250aW51aXR5U2VxdWVuY2U9MCx0aGlzLnEwKFwiaW5mb1wiLHttZXNzYWdlOlwiZGVmYXVsdGluZyBkaXNjb250aW51aXR5IHNlcXVlbmNlIHRvIHplcm9cIn0pKSxyLmR1cmF0aW9uPj0wJiYoaC5kdXJhdGlvbj1yLmR1cmF0aW9uKSx0aGlzLm1hbmlmZXN0Lk5xPWF9LGtleTpmdW5jdGlvbigpe3JldHVybiByLmF0dHJpYnV0ZXM/XCJOT05FXCI9PT1yLmF0dHJpYnV0ZXMuWjA/dm9pZCh0PW51bGwpOnIuYXR0cmlidXRlcy5sUj8oci5hdHRyaWJ1dGVzLlowfHx0aGlzLnEwKFwid2FyblwiLHttZXNzYWdlOlwiZGVmYXVsdGluZyBrZXkgbWV0aG9kIHRvIEFFUy0xMjhcIn0pLHQ9e21ldGhvZDpyLmF0dHJpYnV0ZXMuWjB8fFwiQUVTLTEyOFwiLHVyaTpyLmF0dHJpYnV0ZXMubFJ9LHZvaWQodm9pZCAwIT09ci5hdHRyaWJ1dGVzLklWJiYodC5pdj1yLmF0dHJpYnV0ZXMuSVYpKSk6dm9pZCB0aGlzLnEwKFwid2FyblwiLHttZXNzYWdlOlwiaWdub3Jpbmcga2V5IGRlY2xhcmF0aW9uIHdpdGhvdXQgVVJJXCJ9KTp2b2lkIHRoaXMucTAoXCJ3YXJuXCIse21lc3NhZ2U6XCJpZ25vcmluZyBrZXkgZGVjbGFyYXRpb24gd2l0aG91dCBhdHRyaWJ1dGUgbGlzdFwifSl9LFwibWVkaWEtc2VxdWVuY2VcIjpmdW5jdGlvbigpe2lmKCFpc0Zpbml0ZShyLm51bWJlcikpcmV0dXJuIHZvaWQgdGhpcy5xMChcIndhcm5cIix7bWVzc2FnZTpcImlnbm9yaW5nIGludmFsaWQgbWVkaWEgc2VxdWVuY2U6IFwiK3IubnVtYmVyfSk7dGhpcy5tYW5pZmVzdC5tZWRpYVNlcXVlbmNlPXIubnVtYmVyfSxcImRpc2NvbnRpbnVpdHktc2VxdWVuY2VcIjpmdW5jdGlvbigpe2lmKCFpc0Zpbml0ZShyLm51bWJlcikpcmV0dXJuIHZvaWQgdGhpcy5xMChcIndhcm5cIix7bWVzc2FnZTpcImlnbm9yaW5nIGludmFsaWQgZGlzY29udGludWl0eSBzZXF1ZW5jZTogXCIrci5udW1iZXJ9KTt0aGlzLm1hbmlmZXN0LmRpc2NvbnRpbnVpdHlTZXF1ZW5jZT1yLm51bWJlcn0sXCJwbGF5bGlzdC10eXBlXCI6ZnVuY3Rpb24oKXtpZighL1ZPRHxFVkVOVC8udGVzdChyLkswKSlyZXR1cm4gdm9pZCB0aGlzLnEwKFwid2FyblwiLHttZXNzYWdlOlwiaWdub3JpbmcgdW5rbm93biBwbGF5bGlzdCB0eXBlOiBcIityLkMwfSk7dGhpcy5tYW5pZmVzdC5LMD1yLkswfSxcInN0cmVhbS1pbmZcIjpmdW5jdGlvbigpe2lmKHRoaXMubWFuaWZlc3QucGxheWxpc3RzPWEsIXIuYXR0cmlidXRlcylyZXR1cm4gdm9pZCB0aGlzLnEwKFwid2FyblwiLHttZXNzYWdlOlwiaWdub3JpbmcgZW1wdHkgc3RyZWFtLWluZiBhdHRyaWJ1dGVzXCJ9KTtoLmF0dHJpYnV0ZXN8fChoLmF0dHJpYnV0ZXM9e30pLGguYXR0cmlidXRlcz1lLngwKGguYXR0cmlidXRlcyxyLmF0dHJpYnV0ZXMpfSxkaXNjb250aW51aXR5OmZ1bmN0aW9uKCl7aC5kaXNjb250aW51aXR5PSEwfSx0YXJnZXRkdXJhdGlvbjpmdW5jdGlvbigpe2lmKCFpc0Zpbml0ZShyLmR1cmF0aW9uKXx8ci5kdXJhdGlvbjwwKXJldHVybiB2b2lkIHRoaXMucTAoXCJ3YXJuXCIse21lc3NhZ2U6XCJpZ25vcmluZyBpbnZhbGlkIHRhcmdldCBkdXJhdGlvbjogXCIrci5kdXJhdGlvbn0pO3RoaXMubWFuaWZlc3QuTTA9ci5kdXJhdGlvbn0sdG90YWxkdXJhdGlvbjpmdW5jdGlvbigpe2lmKCFpc0Zpbml0ZShyLmR1cmF0aW9uKXx8ci5kdXJhdGlvbjwwKXJldHVybiB2b2lkIHRoaXMucTAoXCJ3YXJuXCIse21lc3NhZ2U6XCJpZ25vcmluZyBpbnZhbGlkIHRvdGFsIGR1cmF0aW9uOiBcIityLmR1cmF0aW9ufSk7dGhpcy5tYW5pZmVzdC4kMD1yLmR1cmF0aW9ufX0pW3IuUTBdfHxzKS5jYWxsKG8pfSx1cmk6ZnVuY3Rpb24oKXtoLnVyaT1yLnVyaSxhLnB1c2goaCksIXRoaXMubWFuaWZlc3QuTTB8fFwiZHVyYXRpb25cImluIGh8fCh0aGlzLnEwKFwid2FyblwiLHttZXNzYWdlOlwiZGVmYXVsdGluZyBzZWdtZW50IGR1cmF0aW9uIHRvIHRoZSB0YXJnZXQgZHVyYXRpb25cIn0pLGguZHVyYXRpb249dGhpcy5tYW5pZmVzdC5NMCksdCYmKGgua2V5PXQpLGg9e319LGUxOmZ1bmN0aW9uKCl7fX0pW3IudHlwZV0uY2FsbChvKX0pfSxuLnByb3RvdHlwZT1uZXcgdCxuLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUpe3RoaXMuejAucHVzaChlKX0sbi5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKCl7dGhpcy56MC5wdXNoKFwiXFxuXCIpfSxlLnQxPXIsZS5pMT1pLGUuUjA9bixlfSgpO2UuaT1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigzKSxuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5NeD1uZXcgaSx0aGlzLmJpdHJhdGU9ZSx0aGlzLnVyaT10LHRoaXMueU09cn1yZXR1cm4gZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUsdCxyLGksbil7dGhpcy5tZWRpYVNlcXVlbmNlPWUsdGhpcy5kaXNjb250aW51aXR5U2VxdWVuY2U9dCx0aGlzLl8wPXIsdGhpcy5NMD1pLHRoaXMuTnE9bix0aGlzLnVwZGF0ZWQ9ITB9LGV9KCk7dC5MMD1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDg0KSxzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBpKHQsZSksdH0obi5UeCk7dC5TcT1zfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigxNSksbj1yKDApLHM9cig1KSxvPXIoNCksYT1yKDYpLGg9cigyKSxjPXIoMSksdT1hLmhlLnZoLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5sb2dnZXJJZD1cIltDQUNIRV0gXCIsdGhpcy5sb2dnZXI9bi5GcmFtZXdvcmsucmVzb2x2ZShuLkZyYW1ld29yay5WLlIpLmxvZygpLHRoaXMubjE9bi5GcmFtZXdvcmsucmVzb2x2ZShpLnF1LlR1KSx1JiZzLmhoLlJhLklhJiYodGhpcy5zMT1uLkZyYW1ld29yay5yZXNvbHZlKGkucXUubXUpKX1yZXR1cm4gZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihlLHQpe3RyeXt0aGlzLm4xLmluaXQoZSx0KSx1JiZzLmhoLlJhLklhJiZ0aGlzLnMxLmluaXQoZSx0KX1jYXRjaChlKXtjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIGNhY2hlXCIsdGhpcy5sb2dnZXJJZCxoLmhzLmh0LnJ0LGUpfX0sZS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1vLmRlZmVyKCksaT0hMTt0cnl7IWUuV2YuaXNMaXZlKCkmJnUmJnMuaGguUmEuSWE/dGhpcy5zMS5wdXQoZSkudGhlbihmdW5jdGlvbihlKXtpPWV9KS5mYWlsKGZ1bmN0aW9uKGUpe3QubG9nZ2VyLmVycm9yKGUpfSkuZmluYWxseShmdW5jdGlvbigpe3IucmVzb2x2ZShpKX0pOnRoaXMubjEucHV0KGUpLnRoZW4oZnVuY3Rpb24oZSl7aT1lfSkuZmFpbChmdW5jdGlvbihlKXt0LmxvZ2dlci5lcnJvcihlKX0pLmZpbmFsbHkoZnVuY3Rpb24oKXtyLnJlc29sdmUoaSl9KX1jYXRjaChlKXtjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgYWRkaW5nIG5ldyBmcmFnbWVudCBpbiBjYWNoZVwiLHRoaXMubG9nZ2VySWQsaC5ocy5odC5pdCxlKSxyLnJlc29sdmUoaSl9cmV0dXJuIHIuU3N9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9by5kZWZlcigpLGk9bnVsbDt0cnl7dGhpcy5jb250YWlucyhlKS50aGVuKGZ1bmN0aW9uKG4pe24/dC5uMS5nZXQoZSkudGhlbihmdW5jdGlvbihyKXtudWxsPT1yJiZ1JiZzLmhoLlJhLklhP3QuczEuZ2V0KGUpLnRoZW4oZnVuY3Rpb24oZSl7aT1lfSk6aT1yfSkuZmFpbChmdW5jdGlvbihlKXt0LmxvZ2dlci5lcnJvcihlKX0pLmZpbmFsbHkoZnVuY3Rpb24oKXtyLnJlc29sdmUoaSl9KTpyLnJlc29sdmUoaSl9KS5mYWlsKGZ1bmN0aW9uKGUpe3QubG9nZ2VyLmVycm9yKGUpfSkuZmluYWxseShmdW5jdGlvbigpe3IucmVzb2x2ZShpKX0pfWNhdGNoKGUpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBnZXR0aW5nIHRoZSBmcmFnbWVudCBmcm9tIGNhY2hlXCIsdGhpcy5sb2dnZXJJZCxoLmhzLmh0Lm50LGUpLHIucmVzb2x2ZShpKX1yZXR1cm4gci5Tc30sZS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPW8uZGVmZXIoKSxpPSExO3RyeXt0aGlzLm4xLmNvbnRhaW5zKGUpLnRoZW4oZnVuY3Rpb24ocil7IWkmJnUmJnMuaGguUmEuSWE/dC5zMS5jb250YWlucyhlKS50aGVuKGZ1bmN0aW9uKGUpe2k9ZX0pOmk9cn0pLmZhaWwoZnVuY3Rpb24oZSl7dC5sb2dnZXIuZXJyb3IoZSl9KS5maW5hbGx5KGZ1bmN0aW9uKCl7ci5yZXNvbHZlKGkpfSl9Y2F0Y2goZSl7Yy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGNoZWNraW5nIGlmIGNhY2hlIGNvbnRhaW5zIHRoZSBmcmFnbWVudFwiLHRoaXMubG9nZ2VySWQsaC5ocy5odC5zdCxlKSxyLnJlc29sdmUoITEpfXJldHVybiByLlNzfSxlLnByb3RvdHlwZS5paz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIWUmJnUmJnMuaGguUmEuSWE/dGhpcy5zMS5payhlKTp0aGlzLm4xLmlrKGUpfWNhdGNoKGUpe3JldHVybiBjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZ2V0dGluZyB0aGUga2V5cyBmcm9tIGNhY2hlXCIsdGhpcy5sb2dnZXJJZCxoLmhzLmh0Lm90LGUpLFtdfX0sZS5wcm90b3R5cGUuVnE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPW8uZGVmZXIoKSxpPVtdO3RyeXshZSYmdSYmcy5oaC5SYS5JYT90aGlzLnMxLlZxKGUpLnRoZW4oZnVuY3Rpb24oZSl7aT1lfSkuZmFpbChmdW5jdGlvbihlKXt0LmxvZ2dlci5lcnJvcihlKX0pLmZpbmFsbHkoZnVuY3Rpb24oKXtyLnJlc29sdmUoaSl9KTp0aGlzLm4xLlZxKGUpLnRoZW4oZnVuY3Rpb24oZSl7aT1lfSkuZmFpbChmdW5jdGlvbihlKXt0LmxvZ2dlci5lcnJvcihlKX0pLmZpbmFsbHkoZnVuY3Rpb24oKXtyLnJlc29sdmUoaSl9KX1jYXRjaChlKXtjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZ2V0dGluZyB0aGUgZWxlbWVudHMgZnJvbSBjYWNoZSBcIix0aGlzLmxvZ2dlcklkLGguaHMuaHQuYXQsZSksci5yZXNvbHZlKGkpfXJldHVybiByLlNzfSxlLnByb3RvdHlwZS5RcT1mdW5jdGlvbigpe3RoaXMubjEuUXEoKX0sZX0oKTt0LlJhPWx9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDMpLG49cigyNCkscz1yKDcpLG89cig1KSxhPXIoMCksaD1yKDkpLGM9cigxKSx1PXIoMiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmxvZ2dlcklkPVwiW0ZhbGxiYWNrUmVxdWVzdGVyXSBcIix0aGlzLm8xPW5ldyBpLHRoaXMuTGg9bmV3IHMucmMuVmh9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9YS5GcmFtZXdvcmsucmVzb2x2ZShhLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy5hMT1lLkVEfSxlLnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1hLkZyYW1ld29yay5yZXNvbHZlKGEuRnJhbWV3b3JrLlYuSCksaT0hMSxuPWUuJGYoKSxsPWUuS2YscD1lLmVnKCk7ZS54aHI9cixlLnFmLkZmPWEuRnJhbWV3b3JrLnRpbWUoKSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIkZSTCBJU1NVRSBSRVEgRk9SIEZSQUdNRU5UIFwiK2UuemYudG9TdHJpbmcoKStcIi1cIitlLnFmLkFmK1wiIFtcIitoLnZjW2UuWGYoKV0rXCJdIFRPIEZBTExCQUNLIFwiKSxlLnpmLk9fKCkmJihyLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCIpLHRoaXMuaDEoZS50eXBlKSYmbC5yYW5nZSYmZS5YZigpIT1oLnZjLmdjJiZyLnNldFJlcXVlc3RIZWFkZXIoXCJSYW5nZVwiLFwiYnl0ZXM9XCIrbC5yYW5nZSksby5oaC5LLk5hJiZ0aGlzLmMxKGUudHlwZSkmJjAhPWUucWYuQWYmJih0aGlzLmxvZ2dlci5pbmZvKFwiU0VUIFJBTkdFIGJ5dGVzPVwiK2UucWYuQWYrXCItXCIpLHIuc2V0UmVxdWVzdEhlYWRlcihcIlJhbmdlXCIsXCJieXRlcz1cIitlLnFmLkFmK1wiLVwiKSksbC5sVS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wicmFuZ2VcIiE9PWUua2V5LnRvTG93ZXJDYXNlKCkmJnIuc2V0UmVxdWVzdEhlYWRlcihlLmtleSxlLnZhbHVlKX0pLGwuYXN5bmMmJmwudGltZW91dD4wJiYoci50aW1lb3V0PWwudGltZW91dCksbC5taW1lVHlwZSYmci5vdmVycmlkZU1pbWVUeXBlKGwubWltZVR5cGUpLGwud2l0aENyZWRlbnRpYWxzJiYoci53aXRoQ3JlZGVudGlhbHM9bC53aXRoQ3JlZGVudGlhbHMpLHIub25sb2Fkc3RhcnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9cy5yYy5jcmVhdGVFdmVudChFdmVudCxcImxvYWRzdGFydFwiLGUsbCk7bC5kaXNwYXRjaEV2ZW50KHQpfSxyLm9uYWJvcnQ9ZnVuY3Rpb24oZSl7aWYoIWkpe3ZhciB0PXMucmMuY3JlYXRlRXZlbnQoRXZlbnQsXCJhYm9ydFwiLGUsbCk7bC5kaXNwYXRjaEV2ZW50KHQpfX0sci5vbnRpbWVvdXQ9ZnVuY3Rpb24ocil7aWYoIWkpe3QuZXJyb3IoZSxuKTt2YXIgbz1zLnJjLmNyZWF0ZUV2ZW50KFByb2dyZXNzRXZlbnQsXCJ0aW1lb3V0XCIscixsKTtsLmRpc3BhdGNoRXZlbnQobyksYy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIG9uIGZhbGxiYWNrIHJlcXVlc3QgYmVjYXVzZSBvZiB0aW1lb3V0XCIsdC5sb2dnZXJJZCx1LmhzLktuLlFuKX19LHIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGUpe2lmKGwmJihyLnJlYWR5U3RhdGU9PT1YTUxIdHRwUmVxdWVzdC5IRUFERVJTX1JFQ0VJVkVEJiYobC5yZXNwb25zZUhlYWRlcnM9ci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSksci5yZWFkeVN0YXRlPFhNTEh0dHBSZXF1ZXN0LkRPTkV8fHIucmVhZHlTdGF0ZT09PVhNTEh0dHBSZXF1ZXN0LkRPTkUmJjA9PT1yLnN0YXR1cykpe2wucmVhZHlTdGF0ZT1yLnJlYWR5U3RhdGU7dmFyIHQ9cy5yYy5jcmVhdGVFdmVudChFdmVudCxcInJlYWR5c3RhdGVjaGFuZ2VcIixlLGwpO2wuZGlzcGF0Y2hFdmVudCh0KX19LHIub25wcm9ncmVzcz1mdW5jdGlvbihpKXtpZighdC5jMShlLnR5cGUpKXt2YXIgbj1zLnJjLmNyZWF0ZUV2ZW50KFByb2dyZXNzRXZlbnQsXCJwcm9ncmVzc1wiLGksbCk7bC5kaXNwYXRjaEV2ZW50KG4pLHIudG90YWw9aS50b3RhbH1lLnFmLkRmPWkudG90YWx9LHIub25sb2FkPWZ1bmN0aW9uKGgpe2lmKGk9ITAsbC5zdGF0dXM9ci5zdGF0dXMsaCYmMCE9aC50b3RhbCYmKGUucWYuRGY9aC50b3RhbCksZS5yZXNwb25zZUhlYWRlcnM9ci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxyLnN0YXR1czwyMDB8fHIuc3RhdHVzPjI5OSlyZXR1cm4gdC5sb2dnZXIuZGVidWcoXCJGUkwgU0VSVkVSIFJFVFVSTkVEIEVSUk9SIENPREUgXCIrci5zdGF0dXMpLHZvaWQgdC5lcnJvcihlLG4pO2UuemYuT18oKT90LmgxKGUudHlwZSk/ZS5qZj1yLnJlc3BvbnNlOnQuYzEoZS50eXBlKSYmKG8uaGguSy5OYT9lLmpmPWEuRnJhbWV3b3JrLkMoKT9udWxsOnMucmMuYXBwZW5kQnVmZmVyKGUuamYsci5yZXNwb25zZSk6ZS5qZj1yLnJlc3BvbnNlKTplLlJNPXIucmVzcG9uc2VUZXh0LGUubG9hZGVkKCksdC5vMS5kZWxldGUobiksZS5xZi5VZj1hLkZyYW1ld29yay50aW1lKCksdC51MShlKSx0LmwxKGUpLHQuYTEuaVooZSkscj1udWxsfSxyLm9uZXJyb3I9ZnVuY3Rpb24oKXtpfHx0LmVycm9yKGUsbil9LHRoaXMubzEuc2V0KG4sZSksci5vcGVuKFwiR0VUXCIscCxsLmFzeW5jLGwudXNlcm5hbWUsbC5wYXNzd29yZCksci5zZW5kKCl9LGUucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIHI9XCJDT1VMRCBOT1QgRE9XTkxPQUQgXCIrZS5lZygpK1wiIHN0YXR1czogXCIrZS54aHIuc3RhdHVzO2UudHlwZT09bi5iZi5JZj90aGlzLmxvZ2dlci5kZWJ1ZyhyKTp0aGlzLmxvZ2dlci53YXJuKHIpLHRoaXMuZDEoZSksdGhpcy5vMS5kZWxldGUodCksdGhpcy5hMS5lWihlKX0sZS5wcm90b3R5cGUuWXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubzEuaGFzKGUpfSxlLnByb3RvdHlwZS5oMT1mdW5jdGlvbihlKXtyZXR1cm4gZT09bi5iZi5JZnx8ZT09bi5iZi5tZnx8ZT09bi5iZi5UZn0sZS5wcm90b3R5cGUuYzE9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PW4uYmYuU2Z9LGUucHJvdG90eXBlLnFYPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubzEuZ2V0KGUpO3RoaXMubzEuZGVsZXRlKGUpLHQmJnQueGhyJiZ0Lnhoci5hYm9ydCgpfSxlLnByb3RvdHlwZS5sMT1mdW5jdGlvbihlKXt0aGlzLmxvZ2dlci5pbmZvKFwiU1VDQ0VTUyBGUk9NIEZBTExCQUNLIEZPUiBcIitlLmVnKCkrXCIgW1wiK24uYmZbZS50eXBlXStcIl1bXCIrZS5xZi5EZitcIl0gQUZURVIgXCIrZS5zZygpK1wiIFtjdXJyOlwiK2UuYWcoKS5HaCgpK1wiIGF2ZzpcIit0aGlzLkxoLkdoKCkrXCJdXCIpfSxlLnByb3RvdHlwZS5kMT1mdW5jdGlvbihlKXt9LGUucHJvdG90eXBlLldYPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTGh9LGUucHJvdG90eXBlLnUxPWZ1bmN0aW9uKGUpe2UuWGYoKT09PWgudmMuZmMmJnRoaXMuTGguVWgoZS5hZygpKX0sZX0oKTt0LlJKPWx9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDQpO3IoNjApO3ZhciBuPXIoMCkscz1yKDUpLG89cigxNSksYT1yKDQ5KSxoPXIoNTgpLGM9cigxMCksdT1yKDkxKSxsPWhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuQ3VzdG9tZXJLZXkscD1yKDgpLGQ9cigxNCksZj1yKDYpLGc9cigxKSxFPXIoMiksdj1mLmhlLlRoLHk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5mMT1pc05hTihkLkhpdmVDb25maWcuRGVidWdMb2dzLlRyYWNrZXJMb2dzKT8wOmQuSGl2ZUNvbmZpZy5EZWJ1Z0xvZ3MuVHJhY2tlckxvZ3MsdGhpcy5sb2dnZXJJZD1cIltUUkFDS0VSXSBcIix0aGlzLlpVPTAsdGhpcy5nMT0wLHRoaXMuRTE9LyhbMC05XXsxLDN9KFxcLlswLTldezEsM30pezN9fFthLWYwLTldezEsNH0oOlthLWYwLTldezAsNH0pezV9KS8sdGhpcy52MT0hMCx0aGlzLk5nPW4uRnJhbWV3b3JrLnJlc29sdmUobi5GcmFtZXdvcmsuVi5GKSx0aGlzLnVkPW4uRnJhbWV3b3JrLnJlc29sdmUocC5wYy5zYyksdGhpcy55WD1uLkZyYW1ld29yay5yZXNvbHZlKG8ucXUuTXUpfXJldHVybiBlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyPW4uRnJhbWV3b3JrLnJlc29sdmUobi5GcmFtZXdvcmsuVi5SKS5sb2coZS5zZXNzaW9uSWQpLHRoaXMuc2Vzc2lvbklkPWUuc2Vzc2lvbklkLHRoaXMueEo9ZS54Six0aGlzLnlEPWUueUQsdGhpcy56TT1lLnpNLHRoaXMuVDE9ZS5tRCx0aGlzLnlYLm0xKGUuc2Vzc2lvbklkLHRoaXMpLHRoaXMuSTE9dS5YcS5KcX0sZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07dGhpcy5jb250ZXh0PWUsdGhpcy5zdHJlYW1JZD1lLmRKLmdldENvbnRleHRJZCgpLHRoaXMudGlja2V0PWUuZEouU2soKSx0aGlzLnZsPXR9LGUucHJvdG90eXBlLlMxPWZ1bmN0aW9uKGUpe3RoaXMuUjE9ZX0sZS5wcm90b3R5cGUudVg9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMublgoKSx0aGlzLncxPW4uRnJhbWV3b3JrLnNldEludGVydmFsKGZ1bmN0aW9uKCl7ZS5iMSgpfSxzLmhoLnpvLllvKSx0aGlzLmIxKCl9LGUucHJvdG90eXBlLm5YPWZ1bmN0aW9uKCl7dGhpcy53MSYmbi5GcmFtZXdvcmsuY2xlYXJJbnRlcnZhbCh0aGlzLncxKX0sZS5wcm90b3R5cGUuQzE9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9aS5kZWZlcigpLHI9bmV3IGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclJlcXVlc3Qsbj10aGlzLmNvbnRleHQuZEoscz1uLmlzTGl2ZSgpP1N0cmVhbVR5cGUuTElWRTpTdHJlYW1UeXBlLmtLO3Iuc2Vzc2lvbklkPXRoaXMuc2Vzc2lvbklkO3ZhciBvPW5ldyBsO3JldHVybiB0aGlzLlIxPyhvLnBhcnRuZXJJZD10aGlzLlIxLnBhcnRuZXJJZCxvLmN1c3RvbWVySWQ9dGhpcy5SMS5jdXN0b21lcklkKTpkLkhpdmVDb25maWcuQ2xpZW50SW5mby5jdSYmZC5IaXZlQ29uZmlnLkNsaWVudEluZm8udXU/KG8ucGFydG5lcklkPWQuSGl2ZUNvbmZpZy5DbGllbnRJbmZvLmN1LG8uY3VzdG9tZXJJZD1kLkhpdmVDb25maWcuQ2xpZW50SW5mby51dSk6KG8ucGFydG5lcklkPXRoaXMudGlja2V0LnVwKCksby5jdXN0b21lcklkPXRoaXMudGlja2V0LmNwKCkpLHIuY3VzdG9tZXJLZXk9byxyLnN0cmVhbVR5cGU9cyxyLmNvbnRlbnRJZD10aGlzLnlELmdldENvbnRleHRJZCgpLHRoaXMudWQuZ2V0Q29ubmVjdGl2aXR5SW5mbygpLnRoZW4oZnVuY3Rpb24odCl7ZS5fMT10LmdldE5ldHdvcmtDaGFuZ2VkKCkuZ2V0UHJpdmF0ZUlwKCksZS55RC5ESChlLl8xKX0pLmZhaWwoZnVuY3Rpb24odCl7Zy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGdldHRpbmcgY29ubmVjdGl2aXR5IGluZm9cIixlLmxvZ2dlcklkLEUuaHMuTGkuX2kpfSkuZmluYWxseShmdW5jdGlvbigpe3RyeXt2YXIgaT1uZXcgaGl2ZS5zbmFwc2hvdHMuQ29ubmVjdGl2aXR5SW5mbztpLnB1YmxpY0lwPWUuSUIsaS5wcml2YXRlSXA9ZS5fMSxyLmluZm89ZS5QMShpLG4pLHIucXVlcnk9ZS5BMShuLHIuaW5mbyksdC5yZXNvbHZlKHIpfWNhdGNoKHIpe2cuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjb2xsZWN0aW5nIHRoZSBkYXRhIGZvciB0aGUgdHJhY2tlciByZXF1ZXN0XCIsZS5sb2dnZXJJZCxFLmhzLkxpLlBpLHIpLHQucmVqZWN0KFwiRVJST1JcIil9fSkuZG9uZSgpLHQuU3N9LGUucHJvdG90eXBlLk8xPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEFycmF5O3JldHVybiB0aGlzLkkxPT11LlhxLkpxP2UucHVzaChoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlNGLlJGKTp0aGlzLkkxPT11LlhxLkFTP2UucHVzaChoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlNGLmJGKTp0aGlzLkkxPT11LlhxLm5EP2UucHVzaChoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlNGLndGKTp0aGlzLmxvZ2dlci53YXJuKFwiV3JvbmcgbG9jYWxpdHkgbW9kZVwiKSxlfSxlLnByb3RvdHlwZS5BMT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT1uZXcgaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUXVlcnk7dHJ5e3JldHVybiBpLnJhbmRvbT1zLmhoLkphLkthLHQuZXh0ZXJuYWxBcyYmIXRoaXMuWlUmJih0aGlzLlpVPXQuZXh0ZXJuYWxBcyksdC5pbnRlcm5hbEFzJiYhdGhpcy5nMSYmKHRoaXMuZzE9dC5pbnRlcm5hbEFzKSxpLnJhbmtpbmdzPXRoaXMuTzEoKSxpLmFzbnM9W10sdGhpcy5aVT4wJiZ0aGlzLk4xKGkuYXNucyxoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLkNGLkV4dGVybmFsLHRoaXMuWlUscy5oaC5KYS5ZYSksdGhpcy5nMT4wJiYodGhpcy5OMShpLmFzbnMsaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5DRi5fRix0aGlzLmcxLHMuaGguSmEuV2EpLGkud2F0Y2hlcnM9W10sZS5sTSgpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ci5EMShoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLkNGLl9GLHIuZzEsZSwtMSk7aS53YXRjaGVycy5wdXNoKHtrZXk6dCx2YWx1ZToxfSl9KSxpLnN0cmVhbWVycz1bXSx0aGlzLnlELlVqKCkuZm9yRWFjaChmdW5jdGlvbihlLHQpe3ZhciBuPXIuRDEoaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5DRi5fRixyLmcxLHQsZS50eXBlPT1hLnNELm5EP2hpdmUuc2VydmljZXMucHJvdG9jb2wuSUYud2MuU2M6LTEpO2kuc3RyZWFtZXJzLnB1c2goe2tleTpuLHZhbHVlOnMuaGguSmEuemF9KX0pKSxpfWNhdGNoKGUpe3Rocm93IGcuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBwcmVwYXJpbmcgdHJhY2tlciBxdWVyeVwiLHRoaXMubG9nZ2VySWQsRS5ocy5MaS5BaSxlKSxuZXcgRXJyb3IoZSl9fSxlLnByb3RvdHlwZS5EMT1mdW5jdGlvbihlLHQscixpKXt2YXIgbj1uZXcgaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyQml0cmF0ZVF1ZXJ5LHM9bmV3IGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlckFzUXVlcnk7cmV0dXJuIHMuYXNUeXBlPWUscy5hc249dCxuLmJpdHJhdGU9cixuLmFzbj1zLC0xIT1pJiZuLnN0cmVhbVN0YXRlLG59LGUucHJvdG90eXBlLk4xPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPW5ldyBoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlRyYWNrZXJBc1F1ZXJ5O24uYXNUeXBlPXQsbi5hc249cixlLnB1c2goe2tleTpuLHZhbHVlOml9KX0sZS5wcm90b3R5cGUuUDE9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgaGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi5UcmFja2VyUGVlckluZm87dHJ5e2lmKG4uRnJhbWV3b3JrLkMoKT9yLmd1aWQ9dGhpcy5nZDpyLmd1aWQ9YnRvYSh0aGlzLmdkKSxyLnRpbWVzdGFtcD1uLkZyYW1ld29yay50aW1lKCksci5uYXQ9dm9pZCAwLHRoaXMueUQuRmooKSYmKHIuZXh0ZXJuYWxBcz10aGlzLnlELkZqKCkpLHRoaXMueUQuZ2soKSYmKHIuaW50ZXJuYWxBcz10aGlzLnlELmdrKCkpLG51bGwhPWUpe3IucHVibGljSXBTdHJpbmc9ZS5wdWJsaWNJcDt2YXIgaT1uZXcgSW5ldEFkZHJlc3M7aS5hZGRyZXNzPWUucHVibGljSXAsci5wdWJsaWNJcD1pLHIucHJpdmF0ZUlwU3RyaW5nPWUucHJpdmF0ZUlwO3ZhciBzPW5ldyBJbmV0QWRkcmVzcztzLmFkZHJlc3M9ZS5wcml2YXRlSXAsci5wcml2YXRlSXA9c31pZighdGhpcy55RC5jaygpJiZ0aGlzLnlELnlrKCkmJnY/ci5yYW5rVmFsdWU9MTpyLnJhbmtWYWx1ZT10aGlzLnlELkwxKCksdGhpcy5jb250ZXh0LmRKIGluc3RhbmNlb2YgaC5HTSl7ci5zdHJlYW1zPW5ldyBBcnJheTt2YXIgbz10LlBEKCk7bnVsbCE9byYmKHIud2F0Y2hpbmdCaXRyYXRlPW8uYml0cmF0ZSk7dmFyIGM9dC5KTSgpO3RoaXMueUQuVWooKS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7aWYoZS5iXyl7dmFyIGk9bmV3IGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclBlZXJTdHJlYW1JbmZvO3N3aXRjaChpLmJpdHJhdGU9dCxlLnR5cGUpe2Nhc2UgYS5zRC5tYzppLnN0YXRlPWhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYud2MuSWM7YnJlYWs7Y2FzZSBhLnNELmlEOmkuc3RhdGU9aGl2ZS5zZXJ2aWNlcy5wcm90b2NvbC5JRi53Yy5SYzticmVhaztjYXNlIGEuc0QubkQ6aS5zdGF0ZT1oaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLndjLlNjfWkuZGVsdGE9Yy5LRChlLmJfLkFfKCksdCksci5zdHJlYW1zLnB1c2goaSl9fSl9cmV0dXJuIHJ9Y2F0Y2goZSl7dGhyb3cgZy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHByZXBhcmluZyB0cmFja2VyIGluZm9cIix0aGlzLmxvZ2dlcklkLEUuaHMuTGkuTmksZSksbmV3IEVycm9yKGUpfX0sZS5wcm90b3R5cGUuYjE9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCIgUFJFUEFSRSBSRVFVRVNUXCIpLHRoaXMuQzEoKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciByPWUubG9nZ2VySWQrXCJTRU5ESU5HIFRSQUNLRVIgUkVRVUVTVCBbIHByaXZhdGVJcDpcIit0LmluZm8ucHJpdmF0ZUlwU3RyaW5nK1wiIHJhbms6XCIrdC5pbmZvLnJhbmtWYWx1ZStcIl1cIjtzd2l0Y2goZS5mMSl7Y2FzZSAwOmRlZmF1bHQ6ZS5sb2dnZXIuZGVidWcocik7YnJlYWs7Y2FzZSAxOmUubG9nZ2VyLmRlYnVnKHIrXCIgXCIrSlNPTi5zdHJpbmdpZnkodCkpO2JyZWFrO2Nhc2UgMjplLmxvZ2dlci5kZWJ1ZyhyLHQpO2JyZWFrO2Nhc2UgMzplLmxvZ2dlci5kZWJ1ZyhyK1wiIFwiK0pTT04uc3RyaW5naWZ5KHQpLHQpfWUueVguTTEodCl9LGZ1bmN0aW9uKHQpe2cuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBwcmVwYXJpbmcgdGhlIHRyYWNrZXIgcmVxdWVzdFwiLGUubG9nZ2VySWQsRS5ocy5MaS5DaSl9KS5jYXRjaChmdW5jdGlvbih0KXtnLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2VuZGluZyB0cmFja2VyIHJlcXVlc3RcIixlLmxvZ2dlcklkLEUuaHMuTGkuRGksdCl9KX0sZS5wcm90b3R5cGUuRjE9ZnVuY3Rpb24oZSl7dGhpcy5JMT1lfSxlLnByb3RvdHlwZS5LWD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RyeXtzd2l0Y2godGhpcy5mMSl7Y2FzZSAxOnRoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrdGhpcy5jb250ZXh0LmRKLlNrKCkrXCIgVHJhY2tlciBSZXNwb25zZTogXCIrSlNPTi5zdHJpbmdpZnkoZSkpO2JyZWFrO2Nhc2UgMjp0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK3RoaXMuY29udGV4dC5kSi5TaygpK1wiIFRyYWNrZXIgUmVzcG9uc2U6IFwiLGUpO2JyZWFrO2Nhc2UgMzp0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK3RoaXMuY29udGV4dC5kSi5TaygpK1wiIFRyYWNrZXIgUmVzcG9uc2U6IFwiK0pTT04uc3RyaW5naWZ5KGUpLGUpfXRoaXMuWlU9ZS5wZWVySW5mby5leHRlcm5hbEFzLHRoaXMuZzE9ZS5wZWVySW5mby5pbnRlcm5hbEFzLHRoaXMuSUI9ZS5wZWVySW5mby5wdWJsaWNJcFN0cmluZyx0aGlzLl8xPWUucGVlckluZm8ucHJpdmF0ZUlwU3RyaW5nLHRoaXMueUQuX0godGhpcy5JQiksdGhpcy55RC5VMSh0aGlzLmcxKSx0aGlzLnlELkIxKHRoaXMuWlUpLHRoaXMudWQuYkgodGhpcy5JQix0aGlzLl8xLHRoaXMuZzEpLHRoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJSZXBvcnRpbmcgZnJvbSB0cmFja2VyIHB1YmxpYyBJUDpcIit0aGlzLklCK1wiIHByaXZhdGUgSVA6IFwiK3RoaXMuXzErXCIgRXh0QXM6XCIrdGhpcy5aVStcIiBpbkFzOlwiK3RoaXMuZzEpLCF0aGlzLnlELmNrKCkmJnRoaXMueUQueWsoKSYmdj90aGlzLlQxLk1HKCExKTp0aGlzLlQxLkgxKGUucmFua2luZ3MsZS5pbmZvcyk7dmFyIHI9dGhpcy5xMShlKTt0aGlzLnZsLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ0cocix0LnYxKX0pLHRoaXMudjE9ITF9Y2F0Y2goZSl7Zy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGhhbmRsaW5nIHRoZSByZXNwb25zZVwiLHRoaXMubG9nZ2VySWQsRS5ocy5MaS5raSxlKX19LGUucHJvdG90eXBlLnExPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTAsaT1lLmluZm9zO3I8aS5sZW5ndGg7cisrKXt2YXIgbj1pW3JdLHM9bmV3IGMuYmMoYy5UYy55YyxuKTt0LnB1c2gocyl9cmV0dXJuIHR9LGUucHJvdG90eXBlLktHPWZ1bmN0aW9uKGUpe30sZS5wcm90b3R5cGUuVWQ9ZnVuY3Rpb24oZSl7dGhpcy5nZD1lLHRoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIkNPTk5FQ1RFRCBcIit0aGlzLmdkKSx0aGlzLlQxLkcxKCksdGhpcy51WCgpfSxlLnByb3RvdHlwZS5laj1mdW5jdGlvbigpe30sZX0oKTt0LmJKPXl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDMpLG49cigwKSxzPXIoNyksbz1yKDEpLGE9cigyKSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuaWQ9ZSx0aGlzLnNpemU9dH1yZXR1cm4gZX0oKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubG9nZ2VySWQ9XCJbT2JqZWN0SW5kZXhdIFwiLHRoaXMuVjE9bmV3IGksdGhpcy5qMT1uZXcgaSx0aGlzLmxvZ2dlcj1uLkZyYW1ld29yay5yZXNvbHZlKG4uRnJhbWV3b3JrLlYuUikubG9nKCl9cmV0dXJuIGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbihlLHQpe3RyeXt2YXIgcj1lLmZyYWdtZW50SWQsaT1lLnNpemU7ZS5iaXRyYXRlO3RoaXMuVjEuaGFzKHIpfHwodGhpcy5WMS5zZXQocixuZXcgaChyLGkpKSx0aGlzLmoxLnNldChyLG5ldyBBcnJheSkpLHRoaXMuajEuZ2V0KHIpLnB1c2godCl9Y2F0Y2goZSl7dGhyb3cgby5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGFkZGluZyBuZXcgaGF2ZSBpbiBvYmplY3QgaW5kZXhcIix0aGlzLmxvZ2dlcklkLGEuaHMuWG4uem4sZSksbmV3IEVycm9yKGUpfX0sZS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuajEuaGFzKGUpfSxlLnByb3RvdHlwZS5maz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5qMS5nZXQoZSl9LGUucHJvdG90eXBlLlExPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLlYxLmdldChlKX0sZS5wcm90b3R5cGUuR2o9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0cnl7dGhpcy5qMS5mb3JFYWNoKGZ1bmN0aW9uKHIsaSl7cy5yYy5LaChyLGUsITEpLDA9PT1yLmxlbmd0aCYmKHQuajEuZGVsZXRlKGkpLHQuVjEuZGVsZXRlKGkpKX0pfWNhdGNoKGUpe28uRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZW1vdmluZyBoYXZlcyBzZW5kIGZyb20gYSBzcGVjaWZpYyBwZWVyXCIsdGhpcy5sb2dnZXJJZCxhLmhzLlhuLkpuLGUpfX0sZS5wcm90b3R5cGUuS3E9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuajEuZm9yRWFjaChmdW5jdGlvbih0LHIpe2UubG9nZ2VyLmRlYnVnKFwiT0JKSURYIEZSIFwiK3IrXCIgUFMgXCIrdC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUud2oueWcub3RoZXJHdWlkfSkucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrXCIsXCIrdH0pKX0pfSxlfSgpO3QuQUo9Y30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMyksbj1yKDUpLHM9cigwKSxvPXIoNyksYT1yKDEwKSxoPXIoMTYwKSxjPXIoNDcpLHU9cig5MiksbD1yKDYpLHA9cigxKSxkPXIoMiksZj1sLmhlLlRoLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5sb2dnZXJJZD1cIltNZW1iZXJzaGlwXSBcIix0aGlzLmdkPW51bGwsdGhpcy5LMT1uZXcgaSx0aGlzLmtqPW5ldyBpfXJldHVybiBlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyPXMuRnJhbWV3b3JrLnJlc29sdmUocy5GcmFtZXdvcmsuVi5SKS5sb2coZS5zZXNzaW9uSWQpLHRoaXMuVEQ9ZS5URCx0aGlzLnlEPWUueUQsdGhpcy5ZMT1lLllNLChmfHxzLkZyYW1ld29yay5DKCkmJmMuJE4uWE4pJiYodGhpcy5RSj1lLlFKKSx0aGlzLnN0YXJ0KCl9LGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5XMT0hMH0sZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuVzE9ITF9LGUucHJvdG90eXBlLmdHPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0cnl7aWYodGhpcy5XMSl7dmFyIGk9W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7ci56MSgpLGUuZ3VpZCE9ci5nZCYmKGUudHlwZT09YS5UYy55Yz90PXIuSjEoZSk6Znx8cy5GcmFtZXdvcmsuQygpJiZjLiROLlhOPyh0PXIuWDEoZSksci5RSi5hRyhlKS50aGVuKGZ1bmN0aW9uKCl7ci5URC50aihyLmtqLmdldChlLmd1aWQpKX0pLmZhaWwoZnVuY3Rpb24odCl7dCYmdCE9dS5KRy5FRyYmKHIua2ouZGVsZXRlKGUuZ3VpZCkscC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGVsZWN0aW5nIGxhbiBsZWFkZXJcIixyLmxvZ2dlcklkLGQuaHMueXQuZHQpKX0pKTp0PXIuWDEoZSkpLHQmJmkucHVzaCh0LnBlZXJJbmZvLmd1aWQpfSksdGhpcy5TTCgpLHQmJnRoaXMuVEQuaGoodCksaS5sZW5ndGg+MCYmdGhpcy5sb2dnZXIuZGVidWcoXCJESVNDT1ZFUkVEIE5FVyBcIitpLmxlbmd0aCtcIi9cIitlLmxlbmd0aCtcIjogW1wiK2kuam9pbihcIiwgXCIpK1wiXVwiKX19Y2F0Y2goZSl7cC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGRpc2NvdmVyaW5nIHBlZXJzXCIsdGhpcy5sb2dnZXJJZCxkLmhzLnl0LnB0LGUpfX0sZS5wcm90b3R5cGUuU0w9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLksxLmxlbmd0aCt0aGlzLmtqLmxlbmd0aDt0aGlzLlkxLloxKGUpfSxlLnByb3RvdHlwZS56MT1mdW5jdGlvbigpe3RyeXt0aGlzLksxLmxlbmd0aD49bi5oaC5RYS5WYSYmdGhpcy5lMih0aGlzLksxKSx0aGlzLmtqLmxlbmd0aD49bi5oaC5RYS5qYSYmdGhpcy5lMih0aGlzLmtqKX1jYXRjaChlKXtwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY2xlYXJpbmcgbWVtYmVyc2hpcCB2aWV3c1wiLHRoaXMubG9nZ2VySWQsZC5ocy55dC5mdCxlKX19LGUucHJvdG90eXBlLmUyPWZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5cygpW3MuRnJhbWV3b3JrLnJhbmRvbSgpKnRoaXMuSzEubGVuZ3RoXTtlLmRlbGV0ZSh0KX0sZS5wcm90b3R5cGUuWDE9ZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbDt0cnl7aWYodGhpcy5LMS5oYXMoZS5ndWlkKT8odD10aGlzLksxLmdldChlLmd1aWQpLHRoaXMuSzEuZGVsZXRlKGUuZ3VpZCksdGhpcy5rai5zZXQoZS5ndWlkLHQpKTp0aGlzLmtqLmhhcyhlLmd1aWQpJiYodD10aGlzLmtqLmdldChlLmd1aWQpKSwhdClyZXR1cm4gdD1uZXcgaC50MihlKSx0aGlzLmtqLnNldChlLmd1aWQsdCksdDt0LlMxKGUpfWNhdGNoKGUpe3JldHVybiBwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgYWRkaW5nIHBlZXIgdG8gbGFuIHZpZXdcIix0aGlzLmxvZ2dlcklkLGQuaHMueXQuZ3QsZSksbnVsbH19LGUucHJvdG90eXBlLkoxPWZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7dHJ5e2lmKHRoaXMua2ouaGFzKGUuZ3VpZCkpdGhpcy5YMShlKTtlbHNle2lmKCF0aGlzLksxLmhhcyhlLmd1aWQpKXJldHVybiB0PW5ldyBoLnQyKGUpLHRoaXMuSzEuc2V0KGUuZ3VpZCx0KSx0O3Q9dGhpcy5LMS5nZXQoZS5ndWlkKSx0LlMxKGUpfX1jYXRjaChlKXtyZXR1cm4gcC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGFkZGluZyBwZWVyIHRvIHJhbmRvbSB2aWV3XCIsdGhpcy5sb2dnZXJJZCxkLmhzLnl0LkV0LGUpLG51bGx9fSxlLnByb3RvdHlwZS5jaj1mdW5jdGlvbihlLHQpe3ZhciByPVtdO3RyeXtyZXR1cm4gdGhpcy5XMSYmKGZ8fHMuRnJhbWV3b3JrLkMoKSYmYy4kTi5YTj9yPW8ucmMuemgodGhpcy5LMS52YWx1ZXMoKSk6KHI9dGhpcy5LMS52YWx1ZXMoKSx0aGlzLmtqLmZvckVhY2goZnVuY3Rpb24oZSx0KXtyLnB1c2goZSl9KSxyPW8ucmMuemgocikpKSxlP3I6dD9yLnNsaWNlKDAsdCk6ci5zbGljZSgwLDIqbi5oaC5Oby5fbyl9Y2F0Y2goZSl7cmV0dXJuIHAuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzYW1wbGluZyBtZW1iZXJzaGlwXCIsdGhpcy5sb2dnZXJJZCxkLmhzLnl0LnZ0LGUpLFtdfX0sZS5wcm90b3R5cGUuT2o9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuSzEuaGFzKGUpP3RoaXMuSzEuZ2V0KGUpOnRoaXMua2ouaGFzKGUpP3RoaXMua2ouZ2V0KGUpOm51bGx9LGUucHJvdG90eXBlLlVkPWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyLmluZm8oXCJNRU1CRVJTSElQIFNFUlZFUiBDT05ORUNURURcIiksdGhpcy5nZD1lLHRoaXMueUQuc2V0SWQodGhpcy5nZCl9LGUucHJvdG90eXBlLmVqPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5LRz1mdW5jdGlvbihlKXt0aGlzLmxvZ2dlci5kZWJ1ZyhcIlBlZXIgXCIrZStcIiBkaXNjb25uZWN0ZWRcIiksdGhpcy5LMS5kZWxldGUoZSksdGhpcy5rai5kZWxldGUoZSksdGhpcy5TTCgpfSxlfSgpO3QuUWE9Z30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMTApLG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMucGVlckluZm89ZX1yZXR1cm4gZS5wcm90b3R5cGUuSWo9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wZWVySW5mby50eXBlPT09aS5UYy5XfSxlLnByb3RvdHlwZS5TMT1mdW5jdGlvbihlKXt0aGlzLnBlZXJJbmZvLnR5cGU9PWkuVGMueWMmJmUudHlwZT09aS5UYy5XP3RoaXMucGVlckluZm8udHlwZT1pLlRjLlc6dGhpcy5wZWVySW5mby50eXBlPT1pLlRjLnljJiZlLnR5cGU9PWkuVGMueWN8fHRoaXMucGVlckluZm8udHlwZT09aS5UYy5XJiZlLnR5cGU9PWkuVGMuVz90aGlzLmkyKHRoaXMucGVlckluZm8sZSk6dGhpcy5wZWVySW5mby50eXBlPT1pLlRjLlcmJmUudHlwZT09aS5UYy55YyYmKHRoaXMuaTIodGhpcy5wZWVySW5mbyxlKSx0aGlzLnBlZXJJbmZvLnR5cGU9aS5UYy5XKX0sZS5wcm90b3R5cGUuemo9ZnVuY3Rpb24oZSl7dGhpcy5wZWVySW5mby53YXRjaGluZ0JpdHJhdGU9ZX0sZS5wcm90b3R5cGUuaTI9ZnVuY3Rpb24oZSx0KXtlLmludGVybmFsQXM9dGhpcy5uMihlLmludGVybmFsQXMsdC5pbnRlcm5hbEFzKSxlLmV4dGVybmFsQXM9dGhpcy5uMihlLmV4dGVybmFsQXMsdC5leHRlcm5hbEFzKSxlLm5hdD10aGlzLm4yKGUubmF0LHQubmF0KSxlLmJhbmR3aWR0aD10aGlzLm4yKGUuYmFuZHdpZHRoLHQuYmFuZHdpZHRoKSxlLndhdGNoaW5nQml0cmF0ZT10aGlzLm4yKGUud2F0Y2hpbmdCaXRyYXRlLHQud2F0Y2hpbmdCaXRyYXRlKSxlLnByaXZhdGVJcFN0cmluZz10aGlzLm4yKGUucHJpdmF0ZUlwU3RyaW5nLHQucHJpdmF0ZUlwU3RyaW5nKSxlLnB1YmxpY0lwU3RyaW5nPXRoaXMubjIoZS5wdWJsaWNJcFN0cmluZyx0LnB1YmxpY0lwU3RyaW5nKSxlLnJhbmtWYWx1ZT10aGlzLm4yKGUucmFua1ZhbHVlLHQucmFua1ZhbHVlKSxlLnRpbWVzdGFtcD10aGlzLm4yKGUudGltZXN0YW1wLHQudGltZXN0YW1wKSx0LmlzTGVhZGVyJiYoZS5pc0xlYWRlcj10aGlzLm4yKGUuaXNMZWFkZXIsdC5pc0xlYWRlcikpLHQuc3RyZWFtcyYmKGUuc3RyZWFtcz10LnN0cmVhbXMpfSxlLnByb3RvdHlwZS5uMj1mdW5jdGlvbihlLHQpe3JldHVybiBlP3QmJmUhPXQmJihlPXQpOnQmJihlPXQpLGV9LGV9KCk7dC50Mj1ufSxmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKGUpe3ZhciBpLG4sczsvKipcbiAqIEBsaWNlbnNlIFByb3RvQnVmLmpzIChjKSAyMDEzIERhbmllbCBXaXJ0eiA8ZGNvZGVAZGNvZGUuaW8+XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wXG4gKiBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kY29kZUlPL1Byb3RvQnVmLmpzIGZvciBkZXRhaWxzXG4gKi9cbiFmdW5jdGlvbihvKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBhKGUpe3ZhciB0PXt9O3JldHVybiB0LnMyPWUsdC5xXz1lLnFffHxudWxsLHQuVkVSU0lPTj1cIjQuMC4wLWIzXCIsdC5vMj17fSx0Lm8yLmEyPTAsdC5vMi5oMj0xLHQubzIuYzI9Mix0Lm8yLnUyPTMsdC5vMi5sMj00LHQubzIuZDI9NSx0LmYyPVt0Lm8yLmEyLHQubzIuaDIsdC5vMi5kMl0sdC5nMj17aW50MzI6e25hbWU6XCJpbnQzMlwiLEUyOnQubzIuYTIsZGVmYXVsdFZhbHVlOjB9LHVpbnQzMjp7bmFtZTpcInVpbnQzMlwiLEUyOnQubzIuYTIsZGVmYXVsdFZhbHVlOjB9LHNpbnQzMjp7bmFtZTpcInNpbnQzMlwiLEUyOnQubzIuYTIsZGVmYXVsdFZhbHVlOjB9LGludDY0OntuYW1lOlwiaW50NjRcIixFMjp0Lm8yLmEyLGRlZmF1bHRWYWx1ZTp0LnFfP3QucV8uWkVSTzp2b2lkIDB9LHVpbnQ2NDp7bmFtZTpcInVpbnQ2NFwiLEUyOnQubzIuYTIsZGVmYXVsdFZhbHVlOnQucV8/dC5xXy50Vjp2b2lkIDB9LHNpbnQ2NDp7bmFtZTpcInNpbnQ2NFwiLEUyOnQubzIuYTIsZGVmYXVsdFZhbHVlOnQucV8/dC5xXy5aRVJPOnZvaWQgMH0sYm9vbDp7bmFtZTpcImJvb2xcIixFMjp0Lm8yLmEyLGRlZmF1bHRWYWx1ZTohMX0sZG91YmxlOntuYW1lOlwiZG91YmxlXCIsRTI6dC5vMi5oMixkZWZhdWx0VmFsdWU6MH0sc3RyaW5nOntuYW1lOlwic3RyaW5nXCIsRTI6dC5vMi5jMixkZWZhdWx0VmFsdWU6XCJcIn0sYnl0ZXM6e25hbWU6XCJieXRlc1wiLEUyOnQubzIuYzIsZGVmYXVsdFZhbHVlOm51bGx9LGZpeGVkMzI6e25hbWU6XCJmaXhlZDMyXCIsRTI6dC5vMi5kMixkZWZhdWx0VmFsdWU6MH0sc2ZpeGVkMzI6e25hbWU6XCJzZml4ZWQzMlwiLEUyOnQubzIuZDIsZGVmYXVsdFZhbHVlOjB9LGZpeGVkNjQ6e25hbWU6XCJmaXhlZDY0XCIsRTI6dC5vMi5oMixkZWZhdWx0VmFsdWU6dC5xXz90LnFfLnRWOnZvaWQgMH0sc2ZpeGVkNjQ6e25hbWU6XCJzZml4ZWQ2NFwiLEUyOnQubzIuaDIsZGVmYXVsdFZhbHVlOnQucV8/dC5xXy5aRVJPOnZvaWQgMH0sZmxvYXQ6e25hbWU6XCJmbG9hdFwiLEUyOnQubzIuZDIsZGVmYXVsdFZhbHVlOjB9LGVudW06e25hbWU6XCJlbnVtXCIsRTI6dC5vMi5hMixkZWZhdWx0VmFsdWU6MH0sbWVzc2FnZTp7bmFtZTpcIm1lc3NhZ2VcIixFMjp0Lm8yLmMyLGRlZmF1bHRWYWx1ZTpudWxsfSxncm91cDp7bmFtZTpcImdyb3VwXCIsRTI6dC5vMi51MixkZWZhdWx0VmFsdWU6bnVsbH19LHQudjI9W3QuZzIuaW50MzIsdC5nMi5zaW50MzIsdC5nMi5zZml4ZWQzMix0LmcyLnVpbnQzMix0LmcyLmZpeGVkMzIsdC5nMi5pbnQ2NCx0LmcyLnNpbnQ2NCx0LmcyLnNmaXhlZDY0LHQuZzIudWludDY0LHQuZzIuZml4ZWQ2NCx0LmcyLmJvb2wsdC5nMi5zdHJpbmcsdC5nMi5ieXRlc10sdC5UMj0xLHQubTI9NTM2ODcwOTExLHQuSTI9ITEsdC5TMj0hMCx0LlIyPSEwLHQuYnY9ZnVuY3Rpb24oKXtPYmplY3QuY3JlYXRlfHwoT2JqZWN0LmNyZWF0ZT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7fWlmKGFyZ3VtZW50cy5sZW5ndGg+MSl0aHJvdyBFcnJvcihcIk9iamVjdC5jcmVhdGUgcG9seWZpbGwgb25seSBhY2NlcHRzIHRoZSBmaXJzdCBwYXJhbWV0ZXIuXCIpO3JldHVybiB0LnByb3RvdHlwZT1lLG5ldyB0fSk7dmFyIGU9e307ZS53Mj0hMTt0cnl7ZS53Mj1cImZ1bmN0aW9uXCI9PXR5cGVvZiByKDE2KS5iMiYmXCJmdW5jdGlvblwiPT10eXBlb2Ygcig2NCkucmVzb2x2ZX1jYXRjaChlKXt9cmV0dXJuIGUuQzI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W2Z1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH0sZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNc3htbDIuWE1MSFRUUFwiKX0sZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNc3htbDMuWE1MSFRUUFwiKX0sZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKX1dLHQ9bnVsbCxyPTA7cjxlLmxlbmd0aDtyKyspe3RyeXt0PWVbcl0oKX1jYXRjaChlKXtjb250aW51ZX1icmVha31pZighdCl0aHJvdyBFcnJvcihcIlhNTEh0dHBSZXF1ZXN0IGlzIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuIHR9LGUuZmV0Y2g9ZnVuY3Rpb24odCxpKXtpZihpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBpJiYoaT1udWxsKSxlLncyKWlmKGkpcigxNikuXzIodCxmdW5jdGlvbihlLHQpe2koZT9udWxsOlwiXCIrdCl9KTtlbHNlIHRyeXtyZXR1cm4gcigxNikuYjIodCl9Y2F0Y2goZSl7cmV0dXJuIG51bGx9ZWxzZXt2YXIgbj1lLkMyKCk7aWYobi5vcGVuKFwiR0VUXCIsdCwhIWkpLG4uc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLFwidGV4dC9wbGFpblwiKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLm92ZXJyaWRlTWltZVR5cGUmJm4ub3ZlcnJpZGVNaW1lVHlwZShcInRleHQvcGxhaW5cIiksIWkpcmV0dXJuIG4uc2VuZChudWxsKSwyMDA9PW4uc3RhdHVzfHwwPT1uLnN0YXR1cyYmXCJzdHJpbmdcIj09dHlwZW9mIG4ucmVzcG9uc2VUZXh0P24ucmVzcG9uc2VUZXh0Om51bGw7aWYobi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT1uLnJlYWR5U3RhdGUmJmkoMjAwPT1uLnN0YXR1c3x8MD09bi5zdGF0dXMmJlwic3RyaW5nXCI9PXR5cGVvZiBuLnJlc3BvbnNlVGV4dD9uLnJlc3BvbnNlVGV4dDpudWxsKX0sND09bi5yZWFkeVN0YXRlKXJldHVybjtuLnNlbmQobnVsbCl9fSxlLmlzQXJyYXk9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxlfSgpLHQuTGFuZz17T1BFTjpcIntcIixQMjpcIn1cIixBMjpcIltcIixPMjpcIl1cIixOMjpcIixcIixFUVVBTDpcIj1cIixEMjpcIjtcIixMMjpcIixcIixNMjonXCInLEYyOidcIicsVTI6XCInXCIsQjI6XCInXCIsSDI6XCIoXCIscTI6XCIpXCIsRzI6XCI8XCIsVjI6XCI+XCIsajI6L1tcXHNcXHtcXH09O1xcW1xcXSwnXCJcXChcXCk8Pl0vZyxRMjovXig/OnJlcXVpcmVkfG9wdGlvbmFsfHJlcGVhdGVkfG1hcCkkLyx0TjovXig/OmRvdWJsZXxmbG9hdHxpbnQzMnx1aW50MzJ8c2ludDMyfGludDY0fHVpbnQ2NHxzaW50NjR8Zml4ZWQzMnxzZml4ZWQzMnxmaXhlZDY0fHNmaXhlZDY0fGJvb2x8c3RyaW5nfGJ5dGVzKSQvLHpPOi9eW2EtekEtWl9dW2EtekEtWl8wLTldKiQvLEsyOi9eW2EtekEtWl1bYS16QS1aXzAtOV0qJC8sWTI6L14oPzpcXC4/W2EtekEtWl9dW2EtekEtWl8wLTldKikrJC8sVzI6L14oPzpcXC5bYS16QS1aXVthLXpBLVpfMC05XSopKyQvLHoyOi9eLT8oPzpbMS05XVswLTldKnwwfDBbeFhdWzAtOWEtZkEtRl0rfDBbMC03XSt8KFswLTldKihcXC5bMC05XSopPyhbRWVdWystXT9bMC05XSspPyl8aW5mfG5hbikkLyxKMjovXig/OlsxLTldWzAtOV0qfDApJC8sWDI6L14wW3hYXVswLTlhLWZBLUZdKyQvLFoyOi9eMFswLTddKyQvLGUzOi9eKFswLTldKihcXC5bMC05XSopPyhbRWVdWystXT9bMC05XSspP3xpbmZ8bmFuKSQvLHQzOi9eKD86WzEtOV1bMC05XSp8MHwwW3hYXVswLTlhLWZBLUZdK3wwWzAtN10rKSQvLHIzOi9eXFwtPyg/OlsxLTldWzAtOV0qfDB8MFt4WF1bMC05YS1mQS1GXSt8MFswLTddKykkLyxpMzovXFxzLyxTVFJJTkc6Lyg/OlwiKFteXCJcXFxcXSooPzpcXFxcLlteXCJcXFxcXSopKilcIil8KD86JyhbXidcXFxcXSooPzpcXFxcLlteJ1xcXFxdKikqKScpL2csQk9PTDovXig/OnRydWV8ZmFsc2UpJC9pfSx0Lm4zPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e30saT1mdW5jdGlvbihlKXt0aGlzLnNvdXJjZT1cIlwiK2UsdGhpcy5pbmRleD0wLHRoaXMubGluZT0xLHRoaXMuc3RhY2s9W10sdGhpcy5zMz0hMSx0aGlzLm8zPXQuRjJ9LG49aS5wcm90b3R5cGU7bi5xWj1mdW5jdGlvbigpe3QuU1RSSU5HLmxhc3RJbmRleD10aGlzLmluZGV4LTE7dmFyIGU7aWYobnVsbCE9PShlPXQuU1RSSU5HLmV4ZWModGhpcy5zb3VyY2UpKSl7dmFyIHI9dm9pZCAwIT09ZVsxXT9lWzFdOmVbMl07cmV0dXJuIHRoaXMuaW5kZXg9dC5TVFJJTkcubGFzdEluZGV4LHRoaXMuc3RhY2sucHVzaCh0aGlzLm8zKSxyfXRocm93IEVycm9yKFwiVW50ZXJtaW5hdGVkIHN0cmluZyBhdCBsaW5lIFwiK3RoaXMubGluZStcIiwgaW5kZXggXCIrdGhpcy5pbmRleCl9LG4ubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMuc3RhY2subGVuZ3RoPjApcmV0dXJuIHRoaXMuc3RhY2suc2hpZnQoKTtpZih0aGlzLmluZGV4Pj10aGlzLnNvdXJjZS5sZW5ndGgpcmV0dXJuIG51bGw7aWYodGhpcy5zMylyZXR1cm4gdGhpcy5zMz0hMSx0aGlzLnFaKCk7dmFyIGUscjtkb3tmb3IoZT0hMTt0LmkzLnRlc3Qocj10aGlzLnNvdXJjZS5jaGFyQXQodGhpcy5pbmRleCkpOylpZih0aGlzLmluZGV4KyssXCJcXG5cIj09PXImJnRoaXMubGluZSsrLHRoaXMuaW5kZXg9PT10aGlzLnNvdXJjZS5sZW5ndGgpcmV0dXJuIG51bGw7aWYoXCIvXCI9PT10aGlzLnNvdXJjZS5jaGFyQXQodGhpcy5pbmRleCkpaWYoXCIvXCI9PT10aGlzLnNvdXJjZS5jaGFyQXQoKyt0aGlzLmluZGV4KSl7Zm9yKDtcIlxcblwiIT09dGhpcy5zb3VyY2UuY2hhckF0KHRoaXMuaW5kZXgpOylpZigrK3RoaXMuaW5kZXg9PXRoaXMuc291cmNlLmxlbmd0aClyZXR1cm4gbnVsbDt0aGlzLmluZGV4KyssdGhpcy5saW5lKyssZT0hMH1lbHNle2lmKFwiKlwiIT09dGhpcy5zb3VyY2UuY2hhckF0KHRoaXMuaW5kZXgpKXRocm93IEVycm9yKFwiVW50ZXJtaW5hdGVkIGNvbW1lbnQgYXQgbGluZSBcIit0aGlzLmxpbmUrXCI6IC9cIit0aGlzLnNvdXJjZS5jaGFyQXQodGhpcy5pbmRleCkpO2ZvcihyPVwiXCI7cisocj10aGlzLnNvdXJjZS5jaGFyQXQodGhpcy5pbmRleCkpIT09XCIqL1wiOylpZih0aGlzLmluZGV4KyssXCJcXG5cIj09PXImJnRoaXMubGluZSsrLHRoaXMuaW5kZXg9PT10aGlzLnNvdXJjZS5sZW5ndGgpcmV0dXJuIG51bGw7dGhpcy5pbmRleCsrLGU9ITB9fXdoaWxlKGUpO2lmKHRoaXMuaW5kZXg9PT10aGlzLnNvdXJjZS5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIGk9dGhpcy5pbmRleDtpZih0LmoyLmxhc3RJbmRleD0wLHQuajIudGVzdCh0aGlzLnNvdXJjZS5jaGFyQXQoaSkpKSsraTtlbHNlIGZvcigrK2k7aTx0aGlzLnNvdXJjZS5sZW5ndGgmJiF0LmoyLnRlc3QodGhpcy5zb3VyY2UuY2hhckF0KGkpKTspaSsrO3ZhciBuPXRoaXMuc291cmNlLnN1YnN0cmluZyh0aGlzLmluZGV4LHRoaXMuaW5kZXg9aSk7cmV0dXJuIG49PT10Lk0yPyh0aGlzLnMzPSEwLHRoaXMubzM9dC5GMik6bj09PXQuVTImJih0aGlzLnMzPSEwLHRoaXMubzM9dC5CMiksbn0sbi5Iaz1mdW5jdGlvbigpe2lmKDA9PT10aGlzLnN0YWNrLmxlbmd0aCl7dmFyIGU9dGhpcy5uZXh0KCk7aWYobnVsbD09PWUpcmV0dXJuIG51bGw7dGhpcy5zdGFjay5wdXNoKGUpfXJldHVybiB0aGlzLnN0YWNrWzBdfSxuLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJUb2tlbml6ZXIoXCIrdGhpcy5pbmRleCtcIi9cIit0aGlzLnNvdXJjZS5sZW5ndGgrXCIgYXQgbGluZSBcIit0aGlzLmxpbmUrXCIpXCJ9LHIuYTM9aTt2YXIgcz1mdW5jdGlvbihlKXt0aGlzLmgzPW5ldyBpKGUpfSxvPXMucHJvdG90eXBlO3JldHVybiBvLnBhcnNlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9e25hbWU6XCJbUk9PVF1cIixwYWNrYWdlOm51bGwsbWVzc2FnZXM6W10sYzM6W10saW1wb3J0czpbXSxvcHRpb25zOnt9LHNlcnZpY2VzOltdfSxyPSEwO2U9dGhpcy5oMy5uZXh0KCk7KXN3aXRjaChlKXtjYXNlXCJwYWNrYWdlXCI6aWYoIXJ8fG51bGwhPT10LnBhY2thZ2UpdGhyb3cgRXJyb3IoXCJVbmV4cGVjdGVkIHBhY2thZ2UgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUpO3QucGFja2FnZT10aGlzLnUzKGUpO2JyZWFrO2Nhc2VcImltcG9ydFwiOmlmKCFyKXRocm93IEVycm9yKFwiVW5leHBlY3RlZCBpbXBvcnQgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUpO3QuaW1wb3J0cy5wdXNoKHRoaXMubDMoZSkpO2JyZWFrO2Nhc2VcIm1lc3NhZ2VcIjp0aGlzLmQzKHQsbnVsbCxlKSxyPSExO2JyZWFrO2Nhc2VcImVudW1cIjp0aGlzLmYzKHQsZSkscj0hMTticmVhaztjYXNlXCJvcHRpb25cIjp0aGlzLmczKHQsZSk7YnJlYWs7Y2FzZVwic2VydmljZVwiOnRoaXMuRTModCxlKTticmVhaztjYXNlXCJleHRlbmRcIjp0aGlzLnYzKHQsZSk7YnJlYWs7Y2FzZVwic3ludGF4XCI6dC55Mz10aGlzLlQzKHQpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbmV4cGVjdGVkIHRva2VuIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIitlKX1yZXR1cm4gZGVsZXRlIHQubmFtZSx0fSxvLm0zPWZ1bmN0aW9uKGUpe3ZhciByPTE7aWYoXCItXCI9PWUuY2hhckF0KDApJiYocj0tMSxlPWUuc3Vic3RyaW5nKDEpKSx0LkoyLnRlc3QoZSkpcmV0dXJuIHIqcGFyc2VJbnQoZSwxMCk7aWYodC5YMi50ZXN0KGUpKXJldHVybiByKnBhcnNlSW50KGUuc3Vic3RyaW5nKDIpLDE2KTtpZih0LloyLnRlc3QoZSkpcmV0dXJuIHIqcGFyc2VJbnQoZS5zdWJzdHJpbmcoMSksOCk7aWYodC5lMy50ZXN0KGUpKXJldHVyblwiaW5mXCI9PT1lP3IqKDEvMCk6XCJuYW5cIj09PWU/TmFOOnIqcGFyc2VGbG9hdChlKTt0aHJvdyBFcnJvcihcIklsbGVnYWwgbnVtYmVyIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIisocjwwP1wiLVwiOlwiXCIpK2UpfSxvLkkzPWZ1bmN0aW9uKCl7dmFyIGUscixpPVwiXCI7ZG97aWYocj10aGlzLmgzLm5leHQoKSxpKz10aGlzLmgzLm5leHQoKSwoZT10aGlzLmgzLm5leHQoKSkhPT1yKXRocm93IEVycm9yKFwiSWxsZWdhbCBlbmQgb2Ygc3RyaW5nIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIitlKTtlPXRoaXMuaDMuSGsoKX13aGlsZShlPT09dC5NMnx8ZT09PXQuVTIpO3JldHVybiBpfSxvLlMzPWZ1bmN0aW9uKGUscil7dmFyIGk9LTEsbj0xO2lmKFwiLVwiPT1lLmNoYXJBdCgwKSYmKG49LTEsZT1lLnN1YnN0cmluZygxKSksdC5KMi50ZXN0KGUpKWk9cGFyc2VJbnQoZSk7ZWxzZSBpZih0LlgyLnRlc3QoZSkpaT1wYXJzZUludChlLnN1YnN0cmluZygyKSwxNik7ZWxzZXtpZighdC5aMi50ZXN0KGUpKXRocm93IEVycm9yKFwiSWxsZWdhbCBpZCBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrKG48MD9cIi1cIjpcIlwiKStlKTtpPXBhcnNlSW50KGUuc3Vic3RyaW5nKDEpLDgpfWlmKGk9bippfDAsIXImJmk8MCl0aHJvdyBFcnJvcihcIklsbGVnYWwgaWQgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiKyhuPDA/XCItXCI6XCJcIikrZSk7cmV0dXJuIGl9LG8udTM9ZnVuY3Rpb24oZSl7aWYoZT10aGlzLmgzLm5leHQoKSwhdC5ZMi50ZXN0KGUpKXRocm93IEVycm9yKFwiSWxsZWdhbCBwYWNrYWdlIG5hbWUgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK2UpO3ZhciByPWU7aWYoKGU9dGhpcy5oMy5uZXh0KCkpIT10LkQyKXRocm93IEVycm9yKFwiSWxsZWdhbCBlbmQgb2YgcGFja2FnZSBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrZSk7cmV0dXJuIHJ9LG8ubDM9ZnVuY3Rpb24oZSl7aWYoZT10aGlzLmgzLkhrKCksXCJwdWJsaWNcIj09PWUmJih0aGlzLmgzLm5leHQoKSxlPXRoaXMuaDMuSGsoKSksZSE9PXQuTTImJmUhPT10LlUyKXRocm93IEVycm9yKFwiSWxsZWdhbCBzdGFydCBvZiBpbXBvcnQgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK2UpO3ZhciByPXRoaXMuSTMoKTtpZigoZT10aGlzLmgzLm5leHQoKSkhPT10LkQyKXRocm93IEVycm9yKFwiSWxsZWdhbCBlbmQgb2YgaW1wb3J0IGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIitlKTtyZXR1cm4gcn0sby5nMz1mdW5jdGlvbihlLHIpe3I9dGhpcy5oMy5uZXh0KCk7dmFyIGk9ITE7aWYocj09dC5IMiYmKGk9ITAscj10aGlzLmgzLm5leHQoKSksIXQuWTIudGVzdChyKSYmIS9nb29nbGVcXC5wcm90b2J1ZlxcLi8udGVzdChyKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgb3B0aW9uIG5hbWUgaW4gbWVzc2FnZSBcIitlLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO3ZhciBuPXI7aWYocj10aGlzLmgzLm5leHQoKSxpKXtpZihyIT09dC5xMil0aHJvdyBFcnJvcihcIklsbGVnYWwgZW5kIGluIG1lc3NhZ2UgXCIrZS5uYW1lK1wiLCBvcHRpb24gXCIrbitcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrcik7bj1cIihcIituK1wiKVwiLHI9dGhpcy5oMy5uZXh0KCksdC5XMi50ZXN0KHIpJiYobis9cixyPXRoaXMuaDMubmV4dCgpKX1pZihyIT09dC5FUVVBTCl0aHJvdyBFcnJvcihcIklsbGVnYWwgb3BlcmF0b3IgaW4gbWVzc2FnZSBcIitlLm5hbWUrXCIsIG9wdGlvbiBcIituK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTt2YXIgcztpZigocj10aGlzLmgzLkhrKCkpPT09dC5NMnx8cj09PXQuVTIpcz10aGlzLkkzKCk7ZWxzZSBpZih0aGlzLmgzLm5leHQoKSx0LnoyLnRlc3Qocikpcz10aGlzLm0zKHIsITApO2Vsc2UgaWYodC5CT09MLnRlc3Qocikpcz1cInRydWVcIj09PXI7ZWxzZXtpZighdC5ZMi50ZXN0KHIpKXRocm93IEVycm9yKFwiSWxsZWdhbCBvcHRpb24gdmFsdWUgaW4gbWVzc2FnZSBcIitlLm5hbWUrXCIsIG9wdGlvbiBcIituK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTtzPXJ9aWYoKHI9dGhpcy5oMy5uZXh0KCkpIT09dC5EMil0aHJvdyBFcnJvcihcIklsbGVnYWwgZW5kIG9mIG9wdGlvbiBpbiBtZXNzYWdlIFwiK2UubmFtZStcIiwgb3B0aW9uIFwiK24rXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO2Uub3B0aW9uc1tuXT1zfSxvLlIzPWZ1bmN0aW9uKGUscil7Zm9yKHZhciBpOzspe2lmKG51bGw9PT0oaT10aGlzLmgzLm5leHQoKSkpdGhyb3cgRXJyb3IoXCJVbmV4cGVjdGVkIEVPRiBpbiBcIitlLm5hbWUrXCIsIFwiK3IrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUpO2lmKGk9PT10LkQyKWJyZWFrfX0sby5FMz1mdW5jdGlvbihlLHIpe2lmKHI9dGhpcy5oMy5uZXh0KCksIXQuek8udGVzdChyKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgc2VydmljZSBuYW1lIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTt2YXIgaT1yLG49e25hbWU6aSx3Mzp7fSxvcHRpb25zOnt9fTtpZigocj10aGlzLmgzLm5leHQoKSkhPT10Lk9QRU4pdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHN0YXJ0IG9mIHNlcnZpY2UgXCIraStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrcik7ZG97aWYoXCJvcHRpb25cIj09PShyPXRoaXMuaDMubmV4dCgpKSl0aGlzLmczKG4scik7ZWxzZSBpZihcInJwY1wiPT09cil0aGlzLmIzKG4scik7ZWxzZSBpZihyIT09dC5QMil0aHJvdyBFcnJvcihcIklsbGVnYWwgdHlwZSBvZiBzZXJ2aWNlIFwiK2krXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpfXdoaWxlKHIhPT10LlAyKTtlLnNlcnZpY2VzLnB1c2gobil9LG8uYjM9ZnVuY3Rpb24oZSxyKXt2YXIgaT1yO2lmKHI9dGhpcy5oMy5uZXh0KCksIXQuek8udGVzdChyKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgbWV0aG9kIG5hbWUgaW4gc2VydmljZSBcIitlLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO3ZhciBuPXIscz17cmVxdWVzdDpudWxsLHJlc3BvbnNlOm51bGwsQzM6ITEsXzM6ITEsb3B0aW9uczp7fX07aWYoKHI9dGhpcy5oMy5uZXh0KCkpIT09dC5IMil0aHJvdyBFcnJvcihcIklsbGVnYWwgc3RhcnQgb2YgcmVxdWVzdCB0eXBlIGluIHNlcnZpY2UgXCIrZS5uYW1lK1wiI1wiK24rXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO2lmKHI9dGhpcy5oMy5uZXh0KCksXCJzdHJlYW1cIj09PXIudG9Mb3dlckNhc2UoKSYmKHMuQzM9ITAscj10aGlzLmgzLm5leHQoKSksIXQuWTIudGVzdChyKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgcmVxdWVzdCB0eXBlIGluIHNlcnZpY2UgXCIrZS5uYW1lK1wiI1wiK24rXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO2lmKHMucmVxdWVzdD1yLChyPXRoaXMuaDMubmV4dCgpKSE9dC5xMil0aHJvdyBFcnJvcihcIklsbGVnYWwgZW5kIG9mIHJlcXVlc3QgdHlwZSBpbiBzZXJ2aWNlIFwiK2UubmFtZStcIiNcIituK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTtpZihyPXRoaXMuaDMubmV4dCgpLFwicmV0dXJuc1wiIT09ci50b0xvd2VyQ2FzZSgpKXRocm93IEVycm9yKFwiSWxsZWdhbCBkZWxpbWl0ZXIgaW4gc2VydmljZSBcIitlLm5hbWUrXCIjXCIrbitcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrcik7aWYoKHI9dGhpcy5oMy5uZXh0KCkpIT10LkgyKXRocm93IEVycm9yKFwiSWxsZWdhbCBzdGFydCBvZiByZXNwb25zZSB0eXBlIGluIHNlcnZpY2UgXCIrZS5uYW1lK1wiI1wiK24rXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO2lmKHI9dGhpcy5oMy5uZXh0KCksXCJzdHJlYW1cIj09PXIudG9Mb3dlckNhc2UoKSYmKHMuXzM9ITAscj10aGlzLmgzLm5leHQoKSkscy5yZXNwb25zZT1yLChyPXRoaXMuaDMubmV4dCgpKSE9PXQucTIpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGVuZCBvZiByZXNwb25zZSB0eXBlIGluIHNlcnZpY2UgXCIrZS5uYW1lK1wiI1wiK24rXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO2lmKChyPXRoaXMuaDMubmV4dCgpKT09PXQuT1BFTil7ZG97aWYoXCJvcHRpb25cIj09PShyPXRoaXMuaDMubmV4dCgpKSl0aGlzLmczKHMscik7ZWxzZSBpZihyIT09dC5QMil0aHJvdyBFcnJvcihcIklsbGVnYWwgc3RhcnQgb2Ygb3B0aW9uIGluc2VydmljZSBcIitlLm5hbWUrXCIjXCIrbitcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrcil9d2hpbGUociE9PXQuUDIpO3RoaXMuaDMuSGsoKT09PXQuRDImJnRoaXMuaDMubmV4dCgpfWVsc2UgaWYociE9PXQuRDIpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGRlbGltaXRlciBpbiBzZXJ2aWNlIFwiK2UubmFtZStcIiNcIituK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTt2b2lkIDA9PT1lW2ldJiYoZVtpXT17fSksZVtpXVtuXT1zfSxvLmQzPWZ1bmN0aW9uKGUscixpKXt2YXIgbj17fSxzPVwiZ3JvdXBcIj09PWk7aWYoaT10aGlzLmgzLm5leHQoKSwhdC56Ty50ZXN0KGkpKXRocm93IEVycm9yKFwiSWxsZWdhbCBcIisocz9cImdyb3VwXCI6XCJtZXNzYWdlXCIpK1wiIG5hbWVcIisoZT9cIiBpbiBtZXNzYWdlIFwiK2UubmFtZTpcIlwiKStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIraSk7aWYobi5uYW1lPWkscyl7aWYoKGk9dGhpcy5oMy5uZXh0KCkpIT09dC5FUVVBTCl0aHJvdyBFcnJvcihcIklsbGVnYWwgaWQgYXNzaWdubWVudCBhZnRlciBncm91cCBcIituLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK2kpO2k9dGhpcy5oMy5uZXh0KCk7dHJ5e3IuaWQ9dGhpcy5TMyhpKX1jYXRjaChlKXt0aHJvdyBFcnJvcihcIklsbGVnYWwgZmllbGQgaWQgdmFsdWUgZm9yIGdyb3VwIFwiK24ubmFtZStcIiNcIityLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK2kpfW4uUDM9ITB9aWYobi5maWVsZHM9W10sbi5jMz1bXSxuLm1lc3NhZ2VzPVtdLG4ub3B0aW9ucz17fSxuLkEzPXt9LGk9dGhpcy5oMy5uZXh0KCksaT09PXQuQTImJnImJih0aGlzLk8zKG4scixpKSxpPXRoaXMuaDMubmV4dCgpKSxpIT09dC5PUEVOKXRocm93IEVycm9yKFwiSWxsZWdhbCBzdGFydCBvZiBcIisocz9cImdyb3VwXCI6XCJtZXNzYWdlXCIpK1wiIFwiK24ubmFtZStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIraSk7Zm9yKDs7KXtpZigoaT10aGlzLmgzLm5leHQoKSk9PT10LlAyKXtpPXRoaXMuaDMuSGsoKSxpPT09dC5EMiYmdGhpcy5oMy5uZXh0KCk7YnJlYWt9aWYodC5RMi50ZXN0KGkpKXRoaXMuTjMobixpKTtlbHNlIGlmKFwib25lb2ZcIj09PWkpdGhpcy5EMyhuLGkpO2Vsc2UgaWYoXCJlbnVtXCI9PT1pKXRoaXMuZjMobixpKTtlbHNlIGlmKFwibWVzc2FnZVwiPT09aSl0aGlzLmQzKG4sbnVsbCxpKTtlbHNlIGlmKFwib3B0aW9uXCI9PT1pKXRoaXMuZzMobixpKTtlbHNlIGlmKFwiZXh0ZW5zaW9uc1wiPT09aSluLmV4dGVuc2lvbnM9dGhpcy5MMyhuLGkpO2Vsc2UgaWYoXCJleHRlbmRcIj09PWkpdGhpcy52MyhuLGkpO2Vsc2V7aWYoIXQuWTIudGVzdChpKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgdG9rZW4gaW4gbWVzc2FnZSBcIituLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK2kpO3RoaXMuTjMobixcIm9wdGlvbmFsXCIsaSl9fXJldHVybiBlLm1lc3NhZ2VzLnB1c2gobiksbn0sby5OMz1mdW5jdGlvbihlLHIsaSl7dmFyIG49e30scz1udWxsO2lmKG4ucnVsZT1yLG4ub3B0aW9ucz17fSxyPXZvaWQgMCE9PWk/aTp0aGlzLmgzLm5leHQoKSxcIm1hcFwiPT09bi5ydWxlKXtpZihyIT09dC5HMil0aHJvdyBFcnJvcihcIklsbGVnYWwgdG9rZW4gaW4gbWVzc2FnZSBcIitlLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO2lmKHI9dGhpcy5oMy5uZXh0KCksIXQudE4udGVzdChyKSYmIXQuWTIudGVzdChyKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgdG9rZW4gaW4gbWVzc2FnZSBcIitlLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO2lmKG4ua2V5dHlwZT1yLChyPXRoaXMuaDMubmV4dCgpKSE9PXQuTDIpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHRva2VuIGluIG1lc3NhZ2UgXCIrZS5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTtpZihyPXRoaXMuaDMubmV4dCgpLCF0LnROLnRlc3QocikmJiF0LlkyLnRlc3QocikpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHRva2VuIGluIG1lc3NhZ2UgXCIrZS5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTtpZihuLnR5cGU9ciwocj10aGlzLmgzLm5leHQoKSkhPT10LlYyKXRocm93IEVycm9yKFwiSWxsZWdhbCB0b2tlbiBpbiBtZXNzYWdlIFwiK2UubmFtZStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrcik7aWYocj10aGlzLmgzLm5leHQoKSwhdC56Ty50ZXN0KHIpKXRocm93IEVycm9yKFwiSWxsZWdhbCB0b2tlbiBpbiBtZXNzYWdlIFwiK2UubmFtZStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrcik7aWYobi5uYW1lPXIsKHI9dGhpcy5oMy5uZXh0KCkpIT09dC5FUVVBTCl0aHJvdyBFcnJvcihcIklsbGVnYWwgdG9rZW4gaW4gZmllbGQgXCIrZS5uYW1lK1wiI1wiK24ubmFtZStcIiBhdCBsaW5lIFwiK3RoaXMubGluZStcIjogXCIrcik7cj10aGlzLmgzLm5leHQoKTt0cnl7bi5pZD10aGlzLlMzKHIpfWNhdGNoKHQpe3Rocm93IEVycm9yKFwiSWxsZWdhbCBmaWVsZCBpZCBpbiBtZXNzYWdlIFwiK2UubmFtZStcIiNcIituLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpfWlmKHI9dGhpcy5oMy5uZXh0KCkscj09PXQuQTImJih0aGlzLk8zKGUsbixyKSxyPXRoaXMuaDMubmV4dCgpKSxyIT09dC5EMil0aHJvdyBFcnJvcihcIklsbGVnYWwgZGVsaW1pdGVyIGluIG1lc3NhZ2UgXCIrZS5uYW1lK1wiI1wiK24ubmFtZStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrcil9ZWxzZSBpZihcImdyb3VwXCI9PT1yKXtpZihzPXRoaXMuZDMoZSxuLHIpLCEvXltBLVpdLy50ZXN0KHMubmFtZSkpdGhyb3cgRXJyb3IoXCJHcm91cCBuYW1lcyBtdXN0IHN0YXJ0IHdpdGggYSBjYXBpdGFsIGxldHRlclwiKTtuLnR5cGU9cy5uYW1lLG4ubmFtZT1zLm5hbWUudG9Mb3dlckNhc2UoKSxyPXRoaXMuaDMuSGsoKSxyPT09dC5EMiYmdGhpcy5oMy5uZXh0KCl9ZWxzZXtpZighdC50Ti50ZXN0KHIpJiYhdC5ZMi50ZXN0KHIpKXRocm93IEVycm9yKFwiSWxsZWdhbCBmaWVsZCB0eXBlIGluIG1lc3NhZ2UgXCIrZS5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTtpZihuLnR5cGU9cixyPXRoaXMuaDMubmV4dCgpLCF0LnpPLnRlc3QocikpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGZpZWxkIG5hbWUgaW4gbWVzc2FnZSBcIitlLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO2lmKG4ubmFtZT1yLChyPXRoaXMuaDMubmV4dCgpKSE9PXQuRVFVQUwpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHRva2VuIGluIGZpZWxkIFwiK2UubmFtZStcIiNcIituLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO3I9dGhpcy5oMy5uZXh0KCk7dHJ5e24uaWQ9dGhpcy5TMyhyKX1jYXRjaCh0KXt0aHJvdyBFcnJvcihcIklsbGVnYWwgZmllbGQgaWQgaW4gbWVzc2FnZSBcIitlLm5hbWUrXCIjXCIrbi5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKX1pZihyPXRoaXMuaDMubmV4dCgpLHI9PT10LkEyJiYodGhpcy5PMyhlLG4scikscj10aGlzLmgzLm5leHQoKSksciE9PXQuRDIpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGRlbGltaXRlciBpbiBtZXNzYWdlIFwiK2UubmFtZStcIiNcIituLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpfXJldHVybiBlLmZpZWxkcy5wdXNoKG4pLG59LG8uRDM9ZnVuY3Rpb24oZSxyKXtpZihyPXRoaXMuaDMubmV4dCgpLCF0LnpPLnRlc3QocikpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIG9uZW9mIG5hbWUgaW4gbWVzc2FnZSBcIitlLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO3ZhciBpLG49cixzPVtdO2lmKChyPXRoaXMuaDMubmV4dCgpKSE9PXQuT1BFTil0aHJvdyBFcnJvcihcIklsbGVnYWwgc3RhcnQgb2Ygb25lb2YgXCIrbitcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrcik7Zm9yKDt0aGlzLmgzLkhrKCkhPT10LlAyOylpPXRoaXMuTjMoZSxcIm9wdGlvbmFsXCIpLGkuTTM9bixzLnB1c2goaS5pZCk7dGhpcy5oMy5uZXh0KCksZS5BM1tuXT1zfSxvLk8zPWZ1bmN0aW9uKGUscixpKXtmb3IodmFyIG49ITA7Oyl7aWYoKGk9dGhpcy5oMy5uZXh0KCkpPT09dC5PMilicmVhaztpZihpPT09dC5OMil7aWYobil0aHJvdyBFcnJvcihcIklsbGVnYWwgc3RhcnQgb2Ygb3B0aW9ucyBpbiBtZXNzYWdlIFwiK2UubmFtZStcIiNcIityLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK2kpO2k9dGhpcy5oMy5uZXh0KCl9dGhpcy5GMyhlLHIsaSksbj0hMX19LG8uRjM9ZnVuY3Rpb24oZSxyLGkpe3ZhciBuPSExO2lmKGk9PT10LkgyJiYoaT10aGlzLmgzLm5leHQoKSxuPSEwKSwhdC5ZMi50ZXN0KGkpKXRocm93IEVycm9yKFwiSWxsZWdhbCBmaWVsZCBvcHRpb24gaW4gXCIrZS5uYW1lK1wiI1wiK3IubmFtZStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIraSk7dmFyIHM9aTtpZihpPXRoaXMuaDMubmV4dCgpLG4pe2lmKGkhPT10LnEyKXRocm93IEVycm9yKFwiSWxsZWdhbCBkZWxpbWl0ZXIgaW4gXCIrZS5uYW1lK1wiI1wiK3IubmFtZStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIraSk7cz1cIihcIitzK1wiKVwiLGk9dGhpcy5oMy5uZXh0KCksdC5XMi50ZXN0KGkpJiYocys9aSxpPXRoaXMuaDMubmV4dCgpKX1pZihpIT09dC5FUVVBTCl0aHJvdyBFcnJvcihcIklsbGVnYWwgdG9rZW4gaW4gXCIrZS5uYW1lK1wiI1wiK3IubmFtZStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIraSk7dmFyIG87aWYoKGk9dGhpcy5oMy5IaygpKT09PXQuTTJ8fGk9PT10LlUyKW89dGhpcy5JMygpO2Vsc2UgaWYodC56Mi50ZXN0KGksITApKW89dGhpcy5tMyh0aGlzLmgzLm5leHQoKSwhMCk7ZWxzZSBpZih0LkJPT0wudGVzdChpKSlvPVwidHJ1ZVwiPT09dGhpcy5oMy5uZXh0KCkudG9Mb3dlckNhc2UoKTtlbHNle2lmKCF0LlkyLnRlc3QoaSkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHZhbHVlIGluIG1lc3NhZ2UgXCIrZS5uYW1lK1wiI1wiK3IubmFtZStcIiwgb3B0aW9uIFwiK3MrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK2kpO289dGhpcy5oMy5uZXh0KCl9ci5vcHRpb25zW3NdPW99LG8uZjM9ZnVuY3Rpb24oZSxyKXt2YXIgaT17fTtpZihyPXRoaXMuaDMubmV4dCgpLCF0LnpPLnRlc3QocikpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGVudW0gbmFtZSBpbiBtZXNzYWdlIFwiK2UubmFtZStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrcik7aWYoaS5uYW1lPXIsKHI9dGhpcy5oMy5uZXh0KCkpIT09dC5PUEVOKXRocm93IEVycm9yKFwiSWxsZWdhbCBzdGFydCBvZiBlbnVtIFwiK2kubmFtZStcIiBhdCBsaW5lIFwiK3RoaXMuaDMubGluZStcIjogXCIrcik7Zm9yKGkudmFsdWVzPVtdLGkub3B0aW9ucz17fTs7KXtpZigocj10aGlzLmgzLm5leHQoKSk9PT10LlAyKXtyPXRoaXMuaDMuSGsoKSxyPT09dC5EMiYmdGhpcy5oMy5uZXh0KCk7YnJlYWt9aWYoXCJvcHRpb25cIj09cil0aGlzLmczKGkscik7ZWxzZXtpZighdC56Ty50ZXN0KHIpKXRocm93IEVycm9yKFwiSWxsZWdhbCBuYW1lIGluIGVudW0gXCIraS5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTt0aGlzLlUzKGkscil9fWUuYzMucHVzaChpKX0sby5VMz1mdW5jdGlvbihlLHIpe3ZhciBpPXt9O2lmKGkubmFtZT1yLChyPXRoaXMuaDMubmV4dCgpKSE9PXQuRVFVQUwpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHRva2VuIGluIGVudW0gXCIrZS5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTtyPXRoaXMuaDMubmV4dCgpO3RyeXtpLmlkPXRoaXMuUzMociwhMCl9Y2F0Y2godCl7dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGlkIGluIGVudW0gXCIrZS5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKX1pZihlLnZhbHVlcy5wdXNoKGkpLChyPXRoaXMuaDMubmV4dCgpKT09PXQuQTIpe3ZhciBuPXtvcHRpb25zOnt9fTt0aGlzLk8zKGUsbixyKSxyPXRoaXMuaDMubmV4dCgpfWlmKHIhPT10LkQyKXRocm93IEVycm9yKFwiSWxsZWdhbCBkZWxpbWl0ZXIgaW4gZW51bSBcIitlLm5hbWUrXCIgYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpfSxvLkwzPWZ1bmN0aW9uKHIsaSl7dmFyIG49W107aWYoaT10aGlzLmgzLm5leHQoKSxcIm1pblwiPT09aT9uLnB1c2goZS5UMik6XCJtYXhcIj09PWk/bi5wdXNoKGUubTIpOm4ucHVzaCh0aGlzLm0zKGkpKSxcInRvXCIhPT0oaT10aGlzLmgzLm5leHQoKSkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGV4dGVuc2lvbnMgZGVsaW1pdGVyIGluIG1lc3NhZ2UgXCIrci5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIitpKTtpZihpPXRoaXMuaDMubmV4dCgpLFwibWluXCI9PT1pP24ucHVzaChlLlQyKTpcIm1heFwiPT09aT9uLnB1c2goZS5tMik6bi5wdXNoKHRoaXMubTMoaSkpLChpPXRoaXMuaDMubmV4dCgpKSE9PXQuRDIpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGV4dGVuc2lvbnMgZGVsaW1pdGVyIGluIG1lc3NhZ2UgXCIrci5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIitpKTtyZXR1cm4gbn0sby52Mz1mdW5jdGlvbihlLHIpe2lmKHI9dGhpcy5oMy5uZXh0KCksIXQuWTIudGVzdChyKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgbWVzc2FnZSBuYW1lIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTt2YXIgaT17fTtpZihpLkIzPXIsaS5maWVsZHM9W10sKHI9dGhpcy5oMy5uZXh0KCkpIT09dC5PUEVOKXRocm93IEVycm9yKFwiSWxsZWdhbCBzdGFydCBvZiBleHRlbmQgXCIraS5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTtmb3IoOzspe2lmKChyPXRoaXMuaDMubmV4dCgpKT09PXQuUDIpe3I9dGhpcy5oMy5IaygpLHI9PXQuRDImJnRoaXMuaDMubmV4dCgpO2JyZWFrfWlmKHQuUTIudGVzdChyKSl0aGlzLk4zKGkscik7ZWxzZXtpZighdC5ZMi50ZXN0KHIpKXRocm93IEVycm9yKFwiSWxsZWdhbCB0b2tlbiBpbiBleHRlbmQgXCIraS5uYW1lK1wiIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTt0aGlzLk4zKGksXCJvcHRpb25hbFwiLHIpfX1yZXR1cm4gZS5tZXNzYWdlcy5wdXNoKGkpLGl9LG8uVDM9ZnVuY3Rpb24oZSl7dmFyIHI9dGhpcy5oMy5uZXh0KCk7aWYociE9PXQuRVFVQUwpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHRva2VuIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTtpZigocj10aGlzLmgzLkhrKCkpIT09dC5NMiYmciE9PXQuVTIpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHRva2VuIGF0IGxpbmUgXCIrdGhpcy5oMy5saW5lK1wiOiBcIityKTt2YXIgaT10aGlzLkkzKCk7aWYoKHI9dGhpcy5oMy5uZXh0KCkpIT09dC5EMil0aHJvdyBFcnJvcihcIklsbGVnYWwgdG9rZW4gYXQgbGluZSBcIit0aGlzLmgzLmxpbmUrXCI6IFwiK3IpO3JldHVybiBpfSxvLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJQYXJzZXJcIn0sci5SMD1zLHJ9KHQsdC5MYW5nKSx0LkgzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIocil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHImJihyPXQuZzJbcl0pLHZvaWQgMD09PXIuZGVmYXVsdFZhbHVlKXRocm93IEVycm9yKFwiZGVmYXVsdCB2YWx1ZSBmb3IgdHlwZSBcIityLm5hbWUrXCIgaXMgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm4gcj09dC5nMi5ieXRlcz9uZXcgZSgwKTpyLmRlZmF1bHRWYWx1ZX1mdW5jdGlvbiBpKGUscil7aWYoZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubG93JiZcIm51bWJlclwiPT10eXBlb2YgZS5oaWdoJiZcImJvb2xlYW5cIj09dHlwZW9mIGUuRlAmJmUubG93PT09ZS5sb3cmJmUuaGlnaD09PWUuaGlnaClyZXR1cm4gbmV3IHQucV8oZS5sb3csZS5oaWdoLHZvaWQgMD09PXI/ZS5GUDpyKTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gdC5xXy5rRShlLHJ8fCExLDEwKTtpZihcIm51bWJlclwiPT10eXBlb2YgZSlyZXR1cm4gdC5xXy5ERShlLHJ8fCExKTt0aHJvdyBFcnJvcihcIm5vdCBjb252ZXJ0aWJsZSB0byBMb25nXCIpfWZ1bmN0aW9uIG4oZSxyKXt2YXIgaT1yLlBQKCkscz03Jmksbz1pPj4+Mztzd2l0Y2gocyl7Y2FzZSB0Lm8yLmEyOmRve2k9ci5aXygpfXdoaWxlKDEyOD09KDEyOCZpKSk7YnJlYWs7Y2FzZSB0Lm8yLmgyOnIub2Zmc2V0Kz04O2JyZWFrO2Nhc2UgdC5vMi5jMjppPXIuUFAoKSxyLm9mZnNldCs9aTticmVhaztjYXNlIHQubzIudTI6bihvLHIpO2JyZWFrO2Nhc2UgdC5vMi5sMjppZihvPT09ZSlyZXR1cm4hMTt0aHJvdyBFcnJvcihcIklsbGVnYWwgR1JPVVBFTkQgYWZ0ZXIgdW5rbm93biBncm91cDogXCIrbytcIiAoXCIrZStcIiBleHBlY3RlZClcIik7Y2FzZSB0Lm8yLmQyOnIub2Zmc2V0Kz00O2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHdpcmUgdHlwZSBpbiB1bmtub3duIGdyb3VwIFwiK2UrXCI6IFwiK3MpfXJldHVybiEwfXZhciBzPXt9LG89ZnVuY3Rpb24oZSx0LHIpe3RoaXMueDM9ZSx0aGlzLnBhcmVudD10LHRoaXMubmFtZT1yLHRoaXMuY2xhc3NOYW1lfSxhPW8ucHJvdG90eXBlO2EucTM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5uYW1lLHQ9dGhpczs7KXtpZihudWxsPT0odD10LnBhcmVudCkpYnJlYWs7ZT10Lm5hbWUrXCIuXCIrZX1yZXR1cm4gZX0sYS50b1N0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4oZT90aGlzLmNsYXNzTmFtZStcIiBcIjpcIlwiKSt0aGlzLnEzKCl9LGEuWGc9ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcih0aGlzLnRvU3RyaW5nKCEwKStcIiBjYW5ub3QgYmUgYnVpbHQgZGlyZWN0bHlcIil9LHMuRzM9bzt2YXIgaD1mdW5jdGlvbihlLHQscixpLG4pe28uY2FsbCh0aGlzLGUsdCxyKSx0aGlzLmNsYXNzTmFtZT1cIk5hbWVzcGFjZVwiLHRoaXMuY2hpbGRyZW49W10sdGhpcy5vcHRpb25zPWl8fHt9LHRoaXMueTM9bnx8XCJwcm90bzJcIn0sYz1oLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKTtjLlYzPWZ1bmN0aW9uKGUpe2lmKG51bGw9PShlPWV8fG51bGwpKXJldHVybiB0aGlzLmNoaWxkcmVuLnNsaWNlKCk7Zm9yKHZhciB0PVtdLHI9MCxpPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO3I8aTsrK3IpdGhpcy5jaGlsZHJlbltyXWluc3RhbmNlb2YgZSYmdC5wdXNoKHRoaXMuY2hpbGRyZW5bcl0pO3JldHVybiB0fSxjLmozPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKHQ9dGhpcy5RMyhlLm5hbWUpKWlmKHQgaW5zdGFuY2VvZiBwLkszJiZ0Lm5hbWUhPT10LlkzJiZudWxsPT09dGhpcy5RMyh0LlkzKSl0Lm5hbWU9dC5ZMztlbHNle2lmKCEoZSBpbnN0YW5jZW9mIHAuSzMmJmUubmFtZSE9PWUuWTMmJm51bGw9PT10aGlzLlEzKGUuWTMpKSl0aHJvdyBFcnJvcihcIkR1cGxpY2F0ZSBuYW1lIGluIG5hbWVzcGFjZSBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrZS5uYW1lKTtlLm5hbWU9ZS5ZM310aGlzLmNoaWxkcmVuLnB1c2goZSl9LGMuUTM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVwibnVtYmVyXCI9PXR5cGVvZiBlP1wiaWRcIjpcIm5hbWVcIixyPTAsaT10aGlzLmNoaWxkcmVuLmxlbmd0aDtyPGk7KytyKWlmKHRoaXMuY2hpbGRyZW5bcl1bdF09PT1lKXJldHVybiB0aGlzLmNoaWxkcmVuW3JdO3JldHVybiBudWxsfSxjLnJlc29sdmU9ZnVuY3Rpb24oZSx0KXt2YXIgcj1cInN0cmluZ1wiPT10eXBlb2YgZT9lLnNwbGl0KFwiLlwiKTplLGk9dGhpcyxuPTA7aWYoXCJcIj09PXJbbl0pe2Zvcig7bnVsbCE9PWkucGFyZW50OylpPWkucGFyZW50O24rK312YXIgbztkb3tkb3tpZighKG89aS5RMyhyW25dKSl8fCEobyBpbnN0YW5jZW9mIHMuRzMpfHx0JiZvIGluc3RhbmNlb2Ygcy5KZC5LMyl7aT1udWxsO2JyZWFrfWk9byxuKyt9d2hpbGUobjxyLmxlbmd0aCk7aWYobnVsbCE9aSlicmVhaztpZihudWxsIT09dGhpcy5wYXJlbnQpcmV0dXJuIHRoaXMucGFyZW50LnJlc29sdmUoZSx0KX13aGlsZShudWxsIT1pKTtyZXR1cm4gaX0sYy5XMz1mdW5jdGlvbihlKXt2YXIgdD1bXSxyPWU7ZG97dC51bnNoaWZ0KHIubmFtZSkscj1yLnBhcmVudH13aGlsZShudWxsIT09cik7Zm9yKHZhciBpPTE7aTw9dC5sZW5ndGg7aSsrKXt2YXIgbj10LnNsaWNlKHQubGVuZ3RoLWkpO2lmKGU9PT10aGlzLnJlc29sdmUobiwhKGUgaW5zdGFuY2VvZiBzLkpkLkszKSkpcmV0dXJuIG4uam9pbihcIi5cIil9cmV0dXJuIGUucTMoKX0sYy5YZz1mdW5jdGlvbigpe2Zvcih2YXIgZSx0PXt9LHI9dGhpcy5jaGlsZHJlbixpPTAsbj1yLmxlbmd0aDtpPG47KytpKShlPXJbaV0paW5zdGFuY2VvZiBoJiYodFtlLm5hbWVdPWUuWGcoKSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCIkb3B0aW9uc1wiLHt2YWx1ZTp0aGlzLnozKCl9KSx0fSxjLnozPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXt9LHQ9T2JqZWN0LmtleXModGhpcy5vcHRpb25zKSxyPTAsaT10Lmxlbmd0aDtyPGk7KytyKXt2YXIgbj10W3JdLHM9dGhpcy5vcHRpb25zW3Rbcl1dO2Vbbl09c31yZXR1cm4gZX0sYy5KMz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT90aGlzLm9wdGlvbnM6dm9pZCAwIT09dGhpcy5vcHRpb25zW2VdP3RoaXMub3B0aW9uc1tlXTpudWxsfSxzLlgzPWg7dmFyIHU9ZnVuY3Rpb24oZSxyLGksbil7aWYodGhpcy50eXBlPWUsdGhpcy5aMz1yLHRoaXMuZTQ9aSx0aGlzLnkzPW4saSYmdC52Mi5pbmRleE9mKGUpPDApdGhyb3cgRXJyb3IoXCJJbnZhbGlkIG1hcCBrZXkgdHlwZTogXCIrZS5uYW1lKX0sbD11LnByb3RvdHlwZTtsLnQ0PXIsbC5yND1mdW5jdGlvbihyKXt2YXIgbj1mdW5jdGlvbihlLHQpe3Rocm93IEVycm9yKFwiSWxsZWdhbCB2YWx1ZSBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCIgb2YgdHlwZSBcIit0aGlzLnR5cGUubmFtZStcIjogXCIrZStcIiAoXCIrdCtcIilcIil9LmJpbmQodGhpcyk7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LmcyLmludDMyOmNhc2UgdC5nMi5zaW50MzI6Y2FzZSB0LmcyLnNmaXhlZDMyOnJldHVybihcIm51bWJlclwiIT10eXBlb2Ygcnx8cj09PXImJnIlMSE9MCkmJm4odHlwZW9mIHIsXCJub3QgYW4gaW50ZWdlclwiKSxyPjQyOTQ5NjcyOTU/MHxyOnI7Y2FzZSB0LmcyLnVpbnQzMjpjYXNlIHQuZzIuZml4ZWQzMjpyZXR1cm4oXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHI9PT1yJiZyJTEhPTApJiZuKHR5cGVvZiByLFwibm90IGFuIGludGVnZXJcIikscjwwP3I+Pj4wOnI7Y2FzZSB0LmcyLmludDY0OmNhc2UgdC5nMi5zaW50NjQ6Y2FzZSB0LmcyLnNmaXhlZDY0OmlmKHQucV8pdHJ5e3JldHVybiBpKHIsITEpfWNhdGNoKGUpe24odHlwZW9mIHIsZS5tZXNzYWdlKX1lbHNlIG4odHlwZW9mIHIsXCJyZXF1aXJlcyBMb25nLmpzXCIpO2Nhc2UgdC5nMi51aW50NjQ6Y2FzZSB0LmcyLmZpeGVkNjQ6aWYodC5xXyl0cnl7cmV0dXJuIGkociwhMCl9Y2F0Y2goZSl7bih0eXBlb2YgcixlLm1lc3NhZ2UpfWVsc2Ugbih0eXBlb2YgcixcInJlcXVpcmVzIExvbmcuanNcIik7Y2FzZSB0LmcyLmJvb2w6cmV0dXJuXCJib29sZWFuXCIhPXR5cGVvZiByJiZuKHR5cGVvZiByLFwibm90IGEgYm9vbGVhblwiKSxyO2Nhc2UgdC5nMi5mbG9hdDpjYXNlIHQuZzIuZG91YmxlOnJldHVyblwibnVtYmVyXCIhPXR5cGVvZiByJiZuKHR5cGVvZiByLFwibm90IGEgbnVtYmVyXCIpLHI7Y2FzZSB0LmcyLnN0cmluZzpyZXR1cm5cInN0cmluZ1wiPT10eXBlb2Ygcnx8ciYmciBpbnN0YW5jZW9mIFN0cmluZ3x8bih0eXBlb2YgcixcIm5vdCBhIHN0cmluZ1wiKSxcIlwiK3I7Y2FzZSB0LmcyLmJ5dGVzOnJldHVybiBlLlZfKHIpP3I6ZS53cmFwKHIsXCJiYXNlNjRcIik7Y2FzZSB0LmcyLmVudW06dmFyIHM9dGhpcy5aMy5WMyh0LkgzLm40Lmk0KTtmb3IoYT0wO2E8cy5sZW5ndGg7YSsrKXtpZihzW2FdLm5hbWU9PXIpcmV0dXJuIHNbYV0uaWQ7aWYoc1thXS5pZD09cilyZXR1cm4gc1thXS5pZH1pZihcInByb3RvM1wiPT09dGhpcy55MylyZXR1cm4oXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHI9PT1yJiZyJTEhPTApJiZuKHR5cGVvZiByLFwibm90IGFuIGludGVnZXJcIiksKHI+NDI5NDk2NzI5NXx8cjwwKSYmbih0eXBlb2YgcixcIm5vdCBpbiByYW5nZSBmb3IgdWludDMyXCIpLHI7bihyLFwibm90IGEgdmFsaWQgZW51bSB2YWx1ZVwiKTtjYXNlIHQuZzIuZ3JvdXA6Y2FzZSB0LmcyLm1lc3NhZ2U6aWYociYmXCJvYmplY3RcIj09dHlwZW9mIHJ8fG4odHlwZW9mIHIsXCJvYmplY3QgZXhwZWN0ZWRcIiksciBpbnN0YW5jZW9mIHRoaXMuWjMuczQpcmV0dXJuIHI7aWYociBpbnN0YW5jZW9mIHQubzQuSmQpe3ZhciBvPXt9O2Zvcih2YXIgYSBpbiByKXIuaGFzT3duUHJvcGVydHkoYSkmJihvW2FdPXJbYV0pO3I9b31yZXR1cm4gbmV3IHRoaXMuWjMuczQocil9dGhyb3cgRXJyb3IoXCJbSU5URVJOQUxdIElsbGVnYWwgdmFsdWUgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIityK1wiICh1bmRlZmluZWQgdHlwZSBcIit0aGlzLnR5cGUrXCIpXCIpfSxsLmE0PWZ1bmN0aW9uKHIsaSl7aWYobnVsbD09PWkpcmV0dXJuIDA7dmFyIG47c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LmcyLmludDMyOnJldHVybiBpPDA/ZS5EUChpKTplLlJQKGkpO2Nhc2UgdC5nMi51aW50MzI6cmV0dXJuIGUuUlAoaSk7Y2FzZSB0LmcyLnNpbnQzMjpyZXR1cm4gZS5SUChlLndQKGkpKTtjYXNlIHQuZzIuZml4ZWQzMjpjYXNlIHQuZzIuc2ZpeGVkMzI6Y2FzZSB0LmcyLmZsb2F0OnJldHVybiA0O2Nhc2UgdC5nMi5pbnQ2NDpjYXNlIHQuZzIudWludDY0OnJldHVybiBlLkRQKGkpO2Nhc2UgdC5nMi5zaW50NjQ6cmV0dXJuIGUuRFAoZS5NUChpKSk7Y2FzZSB0LmcyLmZpeGVkNjQ6Y2FzZSB0LmcyLnNmaXhlZDY0OnJldHVybiA4O2Nhc2UgdC5nMi5ib29sOnJldHVybiAxO2Nhc2UgdC5nMi5lbnVtOnJldHVybiBlLlJQKGkpO2Nhc2UgdC5nMi5kb3VibGU6cmV0dXJuIDg7Y2FzZSB0LmcyLnN0cmluZzpyZXR1cm4gbj1lLnRBKGkpLGUuUlAobikrbjtjYXNlIHQuZzIuYnl0ZXM6aWYoaS52QSgpPDApdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHZhbHVlIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIraS52QSgpK1wiIGJ5dGVzIHJlbWFpbmluZ1wiKTtyZXR1cm4gZS5SUChpLnZBKCkpK2kudkEoKTtjYXNlIHQuZzIubWVzc2FnZTpyZXR1cm4gbj10aGlzLlozLmg0KGkpLGUuUlAobikrbjtjYXNlIHQuZzIuZ3JvdXA6cmV0dXJuKG49dGhpcy5aMy5oNChpKSkrZS5SUChyPDwzfHQubzIubDIpfXRocm93IEVycm9yKFwiW0lOVEVSTkFMXSBJbGxlZ2FsIHZhbHVlIHRvIGVuY29kZSBpbiBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIraStcIiAodW5rbm93biB0eXBlKVwiKX0sbC5jND1mdW5jdGlvbihyLGksbil7aWYobnVsbD09PWkpcmV0dXJuIG47c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LmcyLmludDMyOmk8MD9uLkdQKGkpOm4uQ1AoaSk7YnJlYWs7Y2FzZSB0LmcyLnVpbnQzMjpuLkNQKGkpO2JyZWFrO2Nhc2UgdC5nMi5zaW50MzI6bi5fUChpKTticmVhaztjYXNlIHQuZzIuZml4ZWQzMjpuLmhQKGkpO2JyZWFrO2Nhc2UgdC5nMi5zZml4ZWQzMjpuLm9QKGkpO2JyZWFrO2Nhc2UgdC5nMi5pbnQ2NDpjYXNlIHQuZzIudWludDY0Om4uR1AoaSk7YnJlYWs7Y2FzZSB0LmcyLnNpbnQ2NDpuLlZQKGkpO2JyZWFrO2Nhc2UgdC5nMi5maXhlZDY0Om4uZlAoaSk7YnJlYWs7Y2FzZSB0LmcyLnNmaXhlZDY0Om4udVAoaSk7YnJlYWs7Y2FzZSB0LmcyLmJvb2w6XCJzdHJpbmdcIj09dHlwZW9mIGk/bi5DUChcImZhbHNlXCI9PT1pLnRvTG93ZXJDYXNlKCk/MDohIWkpOm4uQ1AoaT8xOjApO2JyZWFrO2Nhc2UgdC5nMi5lbnVtOm4uQ1AoaSk7YnJlYWs7Y2FzZSB0LmcyLmZsb2F0Om4uRVAoaSk7YnJlYWs7Y2FzZSB0LmcyLmRvdWJsZTpuLm1QKGkpO2JyZWFrO2Nhc2UgdC5nMi5zdHJpbmc6bi5zQShpKTticmVhaztjYXNlIHQuZzIuYnl0ZXM6aWYoaS52QSgpPDApdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHZhbHVlIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIraS52QSgpK1wiIGJ5dGVzIHJlbWFpbmluZ1wiKTt2YXIgcz1pLm9mZnNldDtuLkNQKGkudkEoKSksbi5hcHBlbmQoaSksaS5vZmZzZXQ9czticmVhaztjYXNlIHQuZzIubWVzc2FnZTp2YXIgbz0obmV3IGUpLmxBKCk7dGhpcy5aMy5lbmNvZGUoaSxvKSxuLkNQKG8ub2Zmc2V0KSxuLmFwcGVuZChvLnhnKCkpO2JyZWFrO2Nhc2UgdC5nMi5ncm91cDp0aGlzLlozLmVuY29kZShpLG4pLG4uQ1Aocjw8M3x0Lm8yLmwyKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiW0lOVEVSTkFMXSBJbGxlZ2FsIHZhbHVlIHRvIGVuY29kZSBpbiBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIraStcIiAodW5rbm93biB0eXBlKVwiKX1yZXR1cm4gbn0sbC5kZWNvZGU9ZnVuY3Rpb24oZSxyLGkpe2lmKHIhPXRoaXMudHlwZS5FMil0aHJvdyBFcnJvcihcIlVuZXhwZWN0ZWQgd2lyZSB0eXBlIGZvciBlbGVtZW50XCIpO3ZhciBuLHM7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LmcyLmludDMyOnJldHVybiAwfGUuUFAoKTtjYXNlIHQuZzIudWludDMyOnJldHVybiBlLlBQKCk+Pj4wO2Nhc2UgdC5nMi5zaW50MzI6cmV0dXJuIDB8ZS5PUCgpO2Nhc2UgdC5nMi5maXhlZDMyOnJldHVybiBlLmNQKCk+Pj4wO2Nhc2UgdC5nMi5zZml4ZWQzMjpyZXR1cm4gMHxlLmFQKCk7Y2FzZSB0LmcyLmludDY0OnJldHVybiBlLmpQKCk7Y2FzZSB0LmcyLnVpbnQ2NDpyZXR1cm4gZS5qUCgpLkJQKCk7Y2FzZSB0LmcyLnNpbnQ2NDpyZXR1cm4gZS5RUCgpO2Nhc2UgdC5nMi5maXhlZDY0OnJldHVybiBlLmdQKCk7Y2FzZSB0LmcyLnNmaXhlZDY0OnJldHVybiBlLnBQKCk7Y2FzZSB0LmcyLmJvb2w6cmV0dXJuISFlLlBQKCk7Y2FzZSB0LmcyLmVudW06cmV0dXJuIGUuUFAoKTtjYXNlIHQuZzIuZmxvYXQ6cmV0dXJuIGUuVFAoKTtjYXNlIHQuZzIuZG91YmxlOnJldHVybiBlLkVfKCk7Y2FzZSB0LmcyLnN0cmluZzpyZXR1cm4gZS5vQSgpO2Nhc2UgdC5nMi5ieXRlczppZihzPWUuUFAoKSxlLnZBKCk8cyl0aHJvdyBFcnJvcihcIklsbGVnYWwgbnVtYmVyIG9mIGJ5dGVzIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrcytcIiByZXF1aXJlZCBidXQgZ290IG9ubHkgXCIrZS52QSgpKTtyZXR1cm4gbj1lLmNsb25lKCksbi5GXz1uLm9mZnNldCtzLGUub2Zmc2V0Kz1zLG47Y2FzZSB0LmcyLm1lc3NhZ2U6cmV0dXJuIHM9ZS5QUCgpLHRoaXMuWjMuZGVjb2RlKGUscyk7Y2FzZSB0LmcyLmdyb3VwOnJldHVybiB0aGlzLlozLmRlY29kZShlLC0xLGkpfXRocm93IEVycm9yKFwiW0lOVEVSTkFMXSBJbGxlZ2FsIGRlY29kZSB0eXBlXCIpfSxsLnU0PWZ1bmN0aW9uKHIpe2lmKCF0aGlzLmU0KXRocm93IEVycm9yKFwidmFsdWVGcm9tU3RyaW5nKCkgY2FsbGVkIG9uIG5vbi1tYXAta2V5IGVsZW1lbnRcIik7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LmcyLmludDMyOmNhc2UgdC5nMi5zaW50MzI6Y2FzZSB0LmcyLnNmaXhlZDMyOmNhc2UgdC5nMi51aW50MzI6Y2FzZSB0LmcyLmZpeGVkMzI6cmV0dXJuIHRoaXMucjQocGFyc2VJbnQocikpO2Nhc2UgdC5nMi5pbnQ2NDpjYXNlIHQuZzIuc2ludDY0OmNhc2UgdC5nMi5zZml4ZWQ2NDpjYXNlIHQuZzIudWludDY0OmNhc2UgdC5nMi5maXhlZDY0OnJldHVybiB0aGlzLnI0KHIpO2Nhc2UgdC5nMi5ib29sOnJldHVyblwidHJ1ZVwiPT09cjtjYXNlIHQuZzIuc3RyaW5nOnJldHVybiB0aGlzLnI0KHIpO2Nhc2UgdC5nMi5ieXRlczpyZXR1cm4gZS5LXyhyKX19LGwubDQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuZTQpdGhyb3cgRXJyb3IoXCJ2YWx1ZVRvU3RyaW5nKCkgY2FsbGVkIG9uIG5vbi1tYXAta2V5IGVsZW1lbnRcIik7cmV0dXJuIHRoaXMudHlwZT09PXQuZzIuYnl0ZXM/ZS50b1N0cmluZyhcImJpbmFyeVwiKTplLnRvU3RyaW5nKCl9LHMuRWxlbWVudD11O3ZhciBwPWZ1bmN0aW9uKGUscixpLG4scyxvKXtoLmNhbGwodGhpcyxlLHIsaSxuLG8pLHRoaXMuY2xhc3NOYW1lPVwiTWVzc2FnZVwiLHRoaXMuZXh0ZW5zaW9ucz1bdC5UMix0Lm0yXSx0aGlzLnM0PW51bGwsdGhpcy5QMz0hIXMsdGhpcy5kND1udWxsLHRoaXMuZjQ9bnVsbCx0aGlzLmc0PW51bGx9LGQ9cC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSk7ZC5YZz1mdW5jdGlvbihyKXtpZih0aGlzLnM0JiYhcilyZXR1cm4gdGhpcy5zNDt2YXIgaT1mdW5jdGlvbih0LHIpe2Z1bmN0aW9uIGkocixuLHMsbyxhKXt2YXIgaD12b2lkIDA7aWYobnVsbD09PXJ8fFwib2JqZWN0XCIhPXR5cGVvZiByKXtpZihvPT10LmcyLmVudW0pZm9yKHZhciBjPWEuVjModC5IMy5uNC5pNCksdT0wO3U8Yy5sZW5ndGg7dSsrKWlmKGNbdV0uaWQ9PT1yKXtyPWNbdV0ubmFtZTticmVha31oPXJ9ZWxzZSBpZihyIGluc3RhbmNlb2YgZSloPW4/ci5tQSgpOnIueUEoKTtlbHNlIGlmKHQuYnYuaXNBcnJheShyKSl7dmFyIGw9cjtoPVtdO2Zvcih2YXIgcD0wO3A8bC5sZW5ndGg7cCsrKWgucHVzaChpKGxbcF0sbixzLG8sYSkpfWVsc2UgaWYociBpbnN0YW5jZW9mIHQuTWFwKXt2YXIgZD1yLmVudHJpZXMoKTtoPXt9O2Zvcih2YXIgZj1kLm5leHQoKTshZi5kb25lO2Y9ZC5uZXh0KCkpaFtyLkU0Lmw0KGYudmFsdWVbMF0pXT1pKGYudmFsdWVbMV0sbixzLHIudjQudHlwZSxyLnY0LlozKX1lbHNlIGlmKHIgaW5zdGFuY2VvZiB0LnFfKWg9cz9yLnRvU3RyaW5nKCk6bmV3IHQucV8ocik7ZWxzZXtoPXt9O3ZhciBnPXIueTQsRT12b2lkIDA7Zm9yKHZhciB1IGluIHIpaWYoci5oYXNPd25Qcm9wZXJ0eSh1KSl7dmFyIHY9clt1XTtnJiYoRT1nLlEzKHUpKSxoW3VdPWkodixuLHMsRS50eXBlLEUuWjMpfX1yZXR1cm4gaH12YXIgbj1yLlYzKHQuSDMuSmQuSzMpLHM9ci5WMyh0LkgzLkpkLlQ0KSxvPWZ1bmN0aW9uKGksbyl7dC5vNC5KZC5jYWxsKHRoaXMpO2Zvcih2YXIgYT0wLGg9cy5sZW5ndGg7YTxoOysrYSl0aGlzW3NbYV0ubmFtZV09bnVsbDtmb3IoYT0wLGg9bi5sZW5ndGg7YTxoOysrYSl7dmFyIGM9blthXTt0aGlzW2MubmFtZV09Yy5yZXBlYXRlZD9bXTpjLm1hcD9uZXcgdC5NYXAoYyk6bnVsbCwhYy5yZXF1aXJlZCYmXCJwcm90bzNcIiE9PXIueTN8fG51bGw9PT1jLmRlZmF1bHRWYWx1ZXx8KHRoaXNbYy5uYW1lXT1jLmRlZmF1bHRWYWx1ZSl9aWYoYXJndW1lbnRzLmxlbmd0aD4wKXt2YXIgdTtpZigxIT09YXJndW1lbnRzLmxlbmd0aHx8XCJvYmplY3RcIiE9dHlwZW9mIGl8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGkuZW5jb2RlfHx0LmJ2LmlzQXJyYXkoaSl8fGkgaW5zdGFuY2VvZiB0Lk1hcHx8aSBpbnN0YW5jZW9mIGV8fGkgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8dC5xXyYmaSBpbnN0YW5jZW9mIHQucV8pZm9yKGE9MCxoPWFyZ3VtZW50cy5sZW5ndGg7YTxoOysrYSl2b2lkIDAhPT0odT1hcmd1bWVudHNbYV0pJiZ0aGlzLm00KG5bYV0ubmFtZSx1KTtlbHNlIHRoaXMubTQoaSl9fSxhPW8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5vNC5KZC5wcm90b3R5cGUpO2EuYWRkPWZ1bmN0aW9uKGUsaSxuKXt2YXIgcz1yLmc0W2VdO2lmKCFuKXtpZighcyl0aHJvdyBFcnJvcih0aGlzK1wiI1wiK2UrXCIgaXMgdW5kZWZpbmVkXCIpO2lmKCEocyBpbnN0YW5jZW9mIHQuSDMuSmQuSzMpKXRocm93IEVycm9yKHRoaXMrXCIjXCIrZStcIiBpcyBub3QgYSBmaWVsZDogXCIrcy50b1N0cmluZyghMCkpO2lmKCFzLnJlcGVhdGVkKXRocm93IEVycm9yKHRoaXMrXCIjXCIrZStcIiBpcyBub3QgYSByZXBlYXRlZCBmaWVsZFwiKX1udWxsPT09dGhpc1tzLm5hbWVdJiYodGhpc1tzLm5hbWVdPVtdKSx0aGlzW3MubmFtZV0ucHVzaChuP2k6cy5yNChpLCEwKSl9LGEuSTQ9YS5hZGQsYS5zZXQ9ZnVuY3Rpb24oZSxpLG4pe2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlKXtuPWk7Zm9yKHZhciBzIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShzKSYmdm9pZCAwIT09KGk9ZVtzXSkmJnRoaXMubTQocyxpLG4pO3JldHVybiB0aGlzfXZhciBvPXIuZzRbZV07aWYobil0aGlzW28ubmFtZV09aTtlbHNle2lmKCFvKXRocm93IEVycm9yKHRoaXMrXCIjXCIrZStcIiBpcyBub3QgYSBmaWVsZDogdW5kZWZpbmVkXCIpO2lmKCEobyBpbnN0YW5jZW9mIHQuSDMuSmQuSzMpKXRocm93IEVycm9yKHRoaXMrXCIjXCIrZStcIiBpcyBub3QgYSBmaWVsZDogXCIrby50b1N0cmluZyghMCkpO3RoaXNbby5uYW1lXT1pPW8ucjQoaSl9cmV0dXJuIG8uTTMmJihudWxsIT09aT8obnVsbCE9PXRoaXNbby5NMy5uYW1lXSYmKHRoaXNbdGhpc1tvLk0zLm5hbWVdXT1udWxsKSx0aGlzW28uTTMubmFtZV09by5uYW1lKTpvLk0zLm5hbWU9PT1lJiYodGhpc1tvLk0zLm5hbWVdPW51bGwpKSx0aGlzfSxhLm00PWEuc2V0LGEuZ2V0PWZ1bmN0aW9uKGUsaSl7aWYoaSlyZXR1cm4gdGhpc1tlXTt2YXIgbj1yLmc0W2VdO2lmKCEobiYmbiBpbnN0YW5jZW9mIHQuSDMuSmQuSzMpKXRocm93IEVycm9yKHRoaXMrXCIjXCIrZStcIiBpcyBub3QgYSBmaWVsZDogdW5kZWZpbmVkXCIpO2lmKCEobiBpbnN0YW5jZW9mIHQuSDMuSmQuSzMpKXRocm93IEVycm9yKHRoaXMrXCIjXCIrZStcIiBpcyBub3QgYSBmaWVsZDogXCIrbi50b1N0cmluZyghMCkpO3JldHVybiB0aGlzW24ubmFtZV19LGEuUzQ9YS5nZXQ7Zm9yKHZhciBoPTA7aDxuLmxlbmd0aDtoKyspe3ZhciBjPW5baF07YyBpbnN0YW5jZW9mIHQuSDMuSmQuUjR8fHIueDMub3B0aW9ucy5TMiYmZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ZMy5yZXBsYWNlKC8oX1thLXpBLVpdKS9nLGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvVXBwZXJDYXNlKCkucmVwbGFjZShcIl9cIixcIlwiKX0pO3Q9dC5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK3Quc3Vic3RyaW5nKDEpO3ZhciBpPWUuWTMucmVwbGFjZSgvKFtBLVpdKS9nLGZ1bmN0aW9uKGUpe3JldHVyblwiX1wiK2V9KSxuPWZ1bmN0aW9uKHQscil7cmV0dXJuIHRoaXNbZS5uYW1lXT1yP3Q6ZS5yNCh0KSx0aGlzfSxzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbZS5uYW1lXX07bnVsbD09PXIuUTMoXCJzZXRcIit0KSYmKGFbXCJzZXRcIit0XT1uKSxudWxsPT09ci5RMyhcInNldF9cIitpKSYmKGFbXCJzZXRfXCIraV09biksbnVsbD09PXIuUTMoXCJnZXRcIit0KSYmKGFbXCJnZXRcIit0XT1zKSxudWxsPT09ci5RMyhcImdldF9cIitpKSYmKGFbXCJnZXRfXCIraV09cyl9KGMpfWEuZW5jb2RlPWZ1bmN0aW9uKHQsaSl7XCJib29sZWFuXCI9PXR5cGVvZiB0JiYoaT10LHQ9dm9pZCAwKTt2YXIgbj0hMTt0fHwodD1uZXcgZSxuPSEwKTt2YXIgcz10LlVfO3RyeXtyZXR1cm4gci5lbmNvZGUodGhpcyx0LmxBKCksaSksKG4/dC54ZygpOnQpLmxBKHMpfWNhdGNoKGUpe3Rocm93IHQubEEocyksZX19LGEuaDQ9ZnVuY3Rpb24oKXtyZXR1cm4gci5oNCh0aGlzKX0sYS53ND1mdW5jdGlvbih0KXt2YXIgaT0hMTt0fHwodD1uZXcgZSxpPSEwKTt2YXIgbj0obmV3IGUpLmxBKCk7cmV0dXJuIHIuZW5jb2RlKHRoaXMsbikueGcoKSx0LkNQKG4udkEoKSksdC5hcHBlbmQobiksaT90LnhnKCk6dH0sYS5iND1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5lbmNvZGUoKS50YygpfWNhdGNoKGUpe3Rocm93IGUuQzQmJihlLkM0PWUuQzQudGMoKSksZX19LGEudGM9YS5iNCxhLl80PWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmVuY29kZSgpLnlBKCl9Y2F0Y2goZSl7dGhyb3cgZS5DNCYmKGUuQzQ9ZS5DNC55QSgpKSxlfX0sYS55QT1hLl80LGEuUDQ9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZW5jb2RlKCkubUEoKX1jYXRjaChlKXt0aHJvdyBlLkM0JiYoZS5DND1lLkM0Lm1BKCkpLGV9fSxhLm1BPWEuUDQsYS5BND1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5lbmNvZGUoKS5JQSgpfWNhdGNoKGUpe3Rocm93IGUuQzQmJihlLkM0PWUuQzQuSUEoKSksZX19LGEuSUE9YS5BNCxhLk80PWZ1bmN0aW9uKGUscil7cmV0dXJuIGkodGhpcywhIWUsISFyLHQuZzIubWVzc2FnZSx0aGlzLnk0KX0sYS5OND1mdW5jdGlvbigpe3JldHVybiBKU09OLnN0cmluZ2lmeShpKHRoaXMsITAsITAsdC5nMi5tZXNzYWdlLHRoaXMueTQpKX0sby5kZWNvZGU9ZnVuY3Rpb24odCxpKXtcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZS53cmFwKHQsaXx8XCJiYXNlNjRcIikpLHQ9dCBpbnN0YW5jZW9mIGU/dDplLndyYXAodCk7dmFyIG49dC5VXzt0cnl7dmFyIHM9ci5kZWNvZGUodC5sQSgpKTtyZXR1cm4gdC5sQShuKSxzfWNhdGNoKGUpe3Rocm93IHQubEEobiksZX19LG8uRDQ9ZnVuY3Rpb24odCxpKXtpZihcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZS53cmFwKHQsaXx8XCJiYXNlNjRcIikpLHQ9dCBpbnN0YW5jZW9mIGU/dDplLndyYXAodCksdC52QSgpPDEpcmV0dXJuIG51bGw7dmFyIG49dC5vZmZzZXQscz10LlBQKCk7aWYodC52QSgpPHMpcmV0dXJuIHQub2Zmc2V0PW4sbnVsbDt0cnl7dmFyIG89ci5kZWNvZGUodC5zbGljZSh0Lm9mZnNldCx0Lm9mZnNldCtzKS5sQSgpKTtyZXR1cm4gdC5vZmZzZXQrPXMsb31jYXRjaChlKXt0aHJvdyB0Lm9mZnNldCs9cyxlfX0sby5MND1mdW5jdGlvbihlKXtyZXR1cm4gby5kZWNvZGUoZSxcImJhc2U2NFwiKX0sby5NND1mdW5jdGlvbihlKXtyZXR1cm4gby5kZWNvZGUoZSxcImhleFwiKX0sby5GND1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8oSlNPTi5wYXJzZShlKSl9LGEudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gci50b1N0cmluZygpfTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5JiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sXCIkb3B0aW9uc1wiLHt2YWx1ZTpyLnozKCl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxcIiRvcHRpb25zXCIse3ZhbHVlOm8uVTR9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobyxcIiR0eXBlXCIse3ZhbHVlOnJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxcIiR0eXBlXCIse3ZhbHVlOnJ9KSksb30odCx0aGlzKTt0aGlzLmQ0PVtdLHRoaXMuZjQ9e30sdGhpcy5nND17fTtmb3IodmFyIG4scz0wLG89dGhpcy5jaGlsZHJlbi5sZW5ndGg7czxvO3MrKylpZigobj10aGlzLmNoaWxkcmVuW3NdKWluc3RhbmNlb2YgeSlpW24ubmFtZV09bi5YZygpO2Vsc2UgaWYobiBpbnN0YW5jZW9mIHApaVtuLm5hbWVdPW4uWGcoKTtlbHNlIGlmKG4gaW5zdGFuY2VvZiBwLkszKW4uWGcoKSx0aGlzLmQ0LnB1c2gobiksdGhpcy5mNFtuLmlkXT1uLHRoaXMuZzRbbi5uYW1lXT1uO2Vsc2UgaWYoIShuIGluc3RhbmNlb2YgcC5UNHx8biBpbnN0YW5jZW9mIG0pKXRocm93IEVycm9yKFwiSWxsZWdhbCByZWZsZWN0IGNoaWxkIG9mIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitjaGlsZHJlbltzXS50b1N0cmluZyghMCkpO3JldHVybiB0aGlzLnM0PWl9LGQuZW5jb2RlPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGksbixzPW51bGwsbz0wLGE9dGhpcy5kNC5sZW5ndGg7bzxhOysrbylpPXRoaXMuZDRbb10sbj1lW2kubmFtZV0saS5yZXF1aXJlZCYmbnVsbD09PW4/bnVsbD09PXMmJihzPWkpOmkuZW5jb2RlKHI/bjppLnI0KG4pLHQpO2lmKG51bGwhPT1zKXt2YXIgaD1FcnJvcihcIk1pc3NpbmcgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIGZpZWxkIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrcyk7dGhyb3cgaC5DND10LGh9cmV0dXJuIHR9LGQuaDQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHIsaT0wLG49MCxzPXRoaXMuZDQubGVuZ3RoO248czsrK24pe2lmKHQ9dGhpcy5kNFtuXSxyPWVbdC5uYW1lXSx0LnJlcXVpcmVkJiZudWxsPT09cil0aHJvdyBFcnJvcihcIk1pc3NpbmcgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIGZpZWxkIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrdCk7aSs9dC5oNChyKX1yZXR1cm4gaX0sZC5kZWNvZGU9ZnVuY3Rpb24oZSxyLGkpe3I9XCJudW1iZXJcIj09dHlwZW9mIHI/cjotMTtmb3IodmFyIHMsbyxhLGgsYz1lLm9mZnNldCx1PW5ldyB0aGlzLnM0O2Uub2Zmc2V0PGMrcnx8LTE9PT1yJiZlLnZBKCk+MDspe2lmKHM9ZS5QUCgpLG89NyZzLGE9cz4+PjMsbz09PXQubzIubDIpe2lmKGEhPT1pKXRocm93IEVycm9yKFwiSWxsZWdhbCBncm91cCBlbmQgaW5kaWNhdG9yIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrYStcIiAoXCIrKGk/aStcIiBleHBlY3RlZFwiOlwibm90IGEgZ3JvdXBcIikrXCIpXCIpO2JyZWFrfWlmKGg9dGhpcy5mNFthXSlpZihoLnJlcGVhdGVkJiYhaC5vcHRpb25zLkI0KXVbaC5uYW1lXS5wdXNoKGguZGVjb2RlKG8sZSkpO2Vsc2UgaWYoaC5tYXApe3ZhciBsPWguZGVjb2RlKG8sZSk7dVtoLm5hbWVdLnNldChsWzBdLGxbMV0pfWVsc2UgdVtoLm5hbWVdPWguZGVjb2RlKG8sZSksaC5NMyYmKG51bGwhPT10aGlzW2guTTMubmFtZV0mJih0aGlzW3RoaXNbaC5NMy5uYW1lXV09bnVsbCksdVtoLk0zLm5hbWVdPWgubmFtZSk7ZWxzZSBzd2l0Y2gobyl7Y2FzZSB0Lm8yLmEyOmUuUFAoKTticmVhaztjYXNlIHQubzIuZDI6ZS5vZmZzZXQrPTQ7YnJlYWs7Y2FzZSB0Lm8yLmgyOmUub2Zmc2V0Kz04O2JyZWFrO2Nhc2UgdC5vMi5jMjp2YXIgcD1lLlBQKCk7ZS5vZmZzZXQrPXA7YnJlYWs7Y2FzZSB0Lm8yLnUyOmZvcig7bihhLGUpOyk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIklsbGVnYWwgd2lyZSB0eXBlIGZvciB1bmtub3duIGZpZWxkIFwiK2ErXCIgaW4gXCIrdGhpcy50b1N0cmluZyghMCkrXCIjZGVjb2RlOiBcIitvKX19Zm9yKHZhciBkPTAsZj10aGlzLmQ0Lmxlbmd0aDtkPGY7KytkKWlmKGg9dGhpcy5kNFtkXSxudWxsPT09dVtoLm5hbWVdKXtpZihoLnJlcXVpcmVkKXt2YXIgZz1FcnJvcihcIk1pc3NpbmcgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIGZpZWxkIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIraC5uYW1lKTt0aHJvdyBnLkg0PXUsZ310LlIyJiZudWxsIT09aC5kZWZhdWx0VmFsdWUmJih1W2gubmFtZV09aC5kZWZhdWx0VmFsdWUpfXJldHVybiB1fSxzLkpkPXA7dmFyIGY9ZnVuY3Rpb24oZSx0LHIsaSxuLHMsYSxoLGMsdSl7by5jYWxsKHRoaXMsZSx0LHMpLHRoaXMuY2xhc3NOYW1lPVwiTWVzc2FnZS5GaWVsZFwiLHRoaXMucmVxdWlyZWQ9XCJyZXF1aXJlZFwiPT09cix0aGlzLnJlcGVhdGVkPVwicmVwZWF0ZWRcIj09PXIsdGhpcy5tYXA9XCJtYXBcIj09PXIsdGhpcy54ND1pfHxudWxsLHRoaXMudHlwZT1uLHRoaXMuWjM9bnVsbCx0aGlzLmlkPWEsdGhpcy5vcHRpb25zPWh8fHt9LHRoaXMuZGVmYXVsdFZhbHVlPW51bGwsdGhpcy5NMz1jfHxudWxsLHRoaXMueTM9dXx8XCJwcm90bzJcIix0aGlzLlkzPXRoaXMubmFtZSx0aGlzLnE0PW51bGwsdGhpcy5HND1udWxsLCF0aGlzLngzLm9wdGlvbnMuSTJ8fHRoaXMgaW5zdGFuY2VvZiBwLlI0fHwodGhpcy5uYW1lPWYuVjQodGhpcy5uYW1lKSl9O2YuVjQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXyhbYS16QS1aXSkvZyxmdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9KX07dmFyIGc9Zi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSk7Zy5YZz1mdW5jdGlvbigpe3RoaXMucTQ9bmV3IHUodGhpcy50eXBlLHRoaXMuWjMsITEsdGhpcy55MyksdGhpcy5tYXAmJih0aGlzLkc0PW5ldyB1KHRoaXMueDQsdm9pZCAwLCEwLHRoaXMueTMpKSx0aGlzLmRlZmF1bHRWYWx1ZT12b2lkIDAhPT10aGlzLm9wdGlvbnMuZGVmYXVsdD90aGlzLnI0KHRoaXMub3B0aW9ucy5kZWZhdWx0KTpudWxsLFwicHJvdG8zXCIhPT10aGlzLnkzfHx0aGlzLnJlcGVhdGVkfHx0aGlzLm1hcHx8KHRoaXMuZGVmYXVsdFZhbHVlPXRoaXMucTQudDQodGhpcy50eXBlKSl9LGcucjQ9ZnVuY3Rpb24oZSxyKXtyPXJ8fCExO3ZhciBpPWZ1bmN0aW9uKGUsdCl7dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHZhbHVlIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIiBvZiB0eXBlIFwiK3RoaXMudHlwZS5uYW1lK1wiOiBcIitlK1wiIChcIit0K1wiKVwiKX0uYmluZCh0aGlzKTtpZihudWxsPT09ZSlyZXR1cm4gdGhpcy5yZXF1aXJlZCYmaSh0eXBlb2YgZSxcInJlcXVpcmVkXCIpLFwicHJvdG8zXCI9PT10aGlzLnkzJiZ0aGlzLnR5cGUhPT10LmcyLm1lc3NhZ2UmJmkodHlwZW9mIGUsXCJwcm90bzMgZmllbGQgd2l0aG91dCBmaWVsZCBwcmVzZW5jZSBjYW5ub3QgYmUgbnVsbFwiKSxudWxsO3ZhciBuO2lmKHRoaXMucmVwZWF0ZWQmJiFyKXt0LmJ2LmlzQXJyYXkoZSl8fChlPVtlXSk7dmFyIHM9W107Zm9yKG49MDtuPGUubGVuZ3RoO24rKylzLnB1c2godGhpcy5xNC5yNChlW25dKSk7cmV0dXJuIHN9cmV0dXJuIHRoaXMubWFwJiYhcj9lIGluc3RhbmNlb2YgdC5NYXA/ZTooZSBpbnN0YW5jZW9mIE9iamVjdHx8aSh0eXBlb2YgZSxcImV4cGVjdGVkIFByb3RvQnVmLk1hcCBvciByYXcgb2JqZWN0IGZvciBtYXAgZmllbGRcIiksbmV3IHQuTWFwKHRoaXMsZSkpOighdGhpcy5yZXBlYXRlZCYmdC5idi5pc0FycmF5KGUpJiZpKHR5cGVvZiBlLFwibm8gYXJyYXkgZXhwZWN0ZWRcIiksdGhpcy5xNC5yNChlKSl9LGcuajQ9ZnVuY3Rpb24oZSl7aWYoXCJwcm90bzNcIiE9PXRoaXMueTMpcmV0dXJuIG51bGwhPT1lO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgdC5nMi5pbnQzMjpjYXNlIHQuZzIuc2ludDMyOmNhc2UgdC5nMi5zZml4ZWQzMjpjYXNlIHQuZzIudWludDMyOmNhc2UgdC5nMi5maXhlZDMyOnJldHVybiAwIT09ZTtjYXNlIHQuZzIuaW50NjQ6Y2FzZSB0LmcyLnNpbnQ2NDpjYXNlIHQuZzIuc2ZpeGVkNjQ6Y2FzZSB0LmcyLnVpbnQ2NDpjYXNlIHQuZzIuZml4ZWQ2NDpyZXR1cm4gMCE9PWUubG93fHwwIT09ZS5oaWdoO2Nhc2UgdC5nMi5ib29sOnJldHVybiBlO2Nhc2UgdC5nMi5mbG9hdDpjYXNlIHQuZzIuZG91YmxlOnJldHVybiAwIT09ZTtjYXNlIHQuZzIuc3RyaW5nOnJldHVybiBlLmxlbmd0aD4wO2Nhc2UgdC5nMi5ieXRlczpyZXR1cm4gZS52QSgpPjA7Y2FzZSB0LmcyLmVudW06cmV0dXJuIDAhPT1lO2Nhc2UgdC5nMi5tZXNzYWdlOnJldHVybiBudWxsIT09ZTtkZWZhdWx0OnJldHVybiEwfX0sZy5lbmNvZGU9ZnVuY3Rpb24ocixpKXtpZihudWxsPT09dGhpcy50eXBlfHxcIm9iamVjdFwiIT10eXBlb2YgdGhpcy50eXBlKXRocm93IEVycm9yKFwiW0lOVEVSTkFMXSBVbnJlc29sdmVkIHR5cGUgaW4gXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK3RoaXMudHlwZSk7aWYobnVsbD09PXJ8fHRoaXMucmVwZWF0ZWQmJjA9PXIubGVuZ3RoKXJldHVybiBpO3RyeXtpZih0aGlzLnJlcGVhdGVkKXt2YXIgbjtpZih0aGlzLm9wdGlvbnMuQjQmJnQuZjIuaW5kZXhPZih0aGlzLnR5cGUuRTIpPj0wKXtpLkNQKHRoaXMuaWQ8PDN8dC5vMi5jMiksaS51QShpLm9mZnNldCs9MSk7dmFyIHM9aS5vZmZzZXQ7Zm9yKG49MDtuPHIubGVuZ3RoO24rKyl0aGlzLnE0LmM0KHRoaXMuaWQscltuXSxpKTt2YXIgbz1pLm9mZnNldC1zLGE9ZS5SUChvKTtpZihhPjEpe3ZhciBoPWkuc2xpY2UocyxpLm9mZnNldCk7cys9YS0xLGkub2Zmc2V0PXMsaS5hcHBlbmQoaCl9aS5DUChvLHMtYSl9ZWxzZSBmb3Iobj0wO248ci5sZW5ndGg7bisrKWkuQ1AodGhpcy5pZDw8M3x0aGlzLnR5cGUuRTIpLHRoaXMucTQuYzQodGhpcy5pZCxyW25dLGkpfWVsc2UgdGhpcy5tYXA/ci5mb3JFYWNoKGZ1bmN0aW9uKHIsbixzKXt2YXIgbz1lLlJQKDh8dGhpcy54NC5FMikrdGhpcy5HNC5hNCgxLG4pK2UuUlAoMTZ8dGhpcy50eXBlLkUyKSt0aGlzLnE0LmE0KDIscik7aS5DUCh0aGlzLmlkPDwzfHQubzIuYzIpLGkuQ1AobyksaS5DUCg4fHRoaXMueDQuRTIpLHRoaXMuRzQuYzQoMSxuLGkpLGkuQ1AoMTZ8dGhpcy50eXBlLkUyKSx0aGlzLnE0LmM0KDIscixpKX0sdGhpcyk6dGhpcy5qNChyKSYmKGkuQ1AodGhpcy5pZDw8M3x0aGlzLnR5cGUuRTIpLHRoaXMucTQuYzQodGhpcy5pZCxyLGkpKX1jYXRjaChlKXt0aHJvdyBFcnJvcihcIklsbGVnYWwgdmFsdWUgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIityK1wiIChcIitlK1wiKVwiKX1yZXR1cm4gaX0sZy5oND1mdW5jdGlvbihyKXtpZihyPXRoaXMucjQociksbnVsbD09PXRoaXMudHlwZXx8XCJvYmplY3RcIiE9dHlwZW9mIHRoaXMudHlwZSl0aHJvdyBFcnJvcihcIltJTlRFUk5BTF0gVW5yZXNvbHZlZCB0eXBlIGluIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnR5cGUpO2lmKG51bGw9PT1yfHx0aGlzLnJlcGVhdGVkJiYwPT1yLmxlbmd0aClyZXR1cm4gMDt2YXIgaT0wO3RyeXtpZih0aGlzLnJlcGVhdGVkKXt2YXIgbixzO2lmKHRoaXMub3B0aW9ucy5CNCYmdC5mMi5pbmRleE9mKHRoaXMudHlwZS5FMik+PTApe2ZvcihpKz1lLlJQKHRoaXMuaWQ8PDN8dC5vMi5jMikscz0wLG49MDtuPHIubGVuZ3RoO24rKylzKz10aGlzLnE0LmE0KHRoaXMuaWQscltuXSk7aSs9ZS5SUChzKSxpKz1zfWVsc2UgZm9yKG49MDtuPHIubGVuZ3RoO24rKylpKz1lLlJQKHRoaXMuaWQ8PDN8dGhpcy50eXBlLkUyKSxpKz10aGlzLnE0LmE0KHRoaXMuaWQscltuXSl9ZWxzZSB0aGlzLm1hcD9yLmZvckVhY2goZnVuY3Rpb24ocixuLHMpe3ZhciBvPWUuUlAoOHx0aGlzLng0LkUyKSt0aGlzLkc0LmE0KDEsbikrZS5SUCgxNnx0aGlzLnR5cGUuRTIpK3RoaXMucTQuYTQoMixyKTtpKz1lLlJQKHRoaXMuaWQ8PDN8dC5vMi5jMiksaSs9ZS5SUChvKSxpKz1vfSx0aGlzKTp0aGlzLmo0KHIpJiYoaSs9ZS5SUCh0aGlzLmlkPDwzfHRoaXMudHlwZS5FMiksaSs9dGhpcy5xNC5hNCh0aGlzLmlkLHIpKX1jYXRjaChlKXt0aHJvdyBFcnJvcihcIklsbGVnYWwgdmFsdWUgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIityK1wiIChcIitlK1wiKVwiKX1yZXR1cm4gaX0sZy5kZWNvZGU9ZnVuY3Rpb24oZSxyLGkpe3ZhciBuLHM7aWYoISghdGhpcy5tYXAmJmU9PXRoaXMudHlwZS5FMnx8IWkmJnRoaXMucmVwZWF0ZWQmJnRoaXMub3B0aW9ucy5CNCYmZT09dC5vMi5jMnx8dGhpcy5tYXAmJmU9PXQubzIuYzIpKXRocm93IEVycm9yKFwiSWxsZWdhbCB3aXJlIHR5cGUgZm9yIGZpZWxkIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitlK1wiIChcIit0aGlzLnR5cGUuRTIrXCIgZXhwZWN0ZWQpXCIpO2lmKGU9PXQubzIuYzImJnRoaXMucmVwZWF0ZWQmJnRoaXMub3B0aW9ucy5CNCYmdC5mMi5pbmRleE9mKHRoaXMudHlwZS5FMik+PTAmJiFpKXtzPXIuUFAoKSxzPXIub2Zmc2V0K3M7Zm9yKHZhciBvPVtdO3Iub2Zmc2V0PHM7KW8ucHVzaCh0aGlzLmRlY29kZSh0aGlzLnR5cGUuRTIsciwhMCkpO3JldHVybiBvfWlmKHRoaXMubWFwKXt2YXIgYT10aGlzLkc0LnQ0KHRoaXMueDQpO2lmKG49dGhpcy5xNC50NCh0aGlzLnR5cGUpLHM9ci5QUCgpLHIudkEoKTxzKXRocm93IEVycm9yKFwiSWxsZWdhbCBudW1iZXIgb2YgYnl0ZXMgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitzK1wiIHJlcXVpcmVkIGJ1dCBnb3Qgb25seSBcIityLnZBKCkpO3ZhciBoPXIuY2xvbmUoKTtmb3IoaC5GXz1oLm9mZnNldCtzLHIub2Zmc2V0Kz1zO2gudkEoKT4wOyl7dmFyIGM9aC5QUCgpO2U9NyZjO3ZhciB1PWM+Pj4zO2lmKDE9PT11KWE9dGhpcy5HNC5kZWNvZGUoaCxlLHUpO2Vsc2V7aWYoMiE9PXUpdGhyb3cgRXJyb3IoXCJVbmV4cGVjdGVkIHRhZyBpbiBtYXAgZmllbGQga2V5L3ZhbHVlIHN1Ym1lc3NhZ2VcIik7bj10aGlzLnE0LmRlY29kZShoLGUsdSl9fXJldHVyblthLG5dfXJldHVybiB0aGlzLnE0LmRlY29kZShyLGUsdGhpcy5pZCl9LHMuSmQuSzM9Zjt2YXIgRT1mdW5jdGlvbihlLHQscixpLG4scyxvKXtmLmNhbGwodGhpcyxlLHQscixudWxsLGksbixzLG8pLHRoaXMuUTR9O0UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpLHMuSmQuUjQ9RTt2YXIgdj1mdW5jdGlvbihlLHQscil7by5jYWxsKHRoaXMsZSx0LHIpLHRoaXMuZmllbGRzPVtdfTtzLkpkLlQ0PXY7dmFyIHk9ZnVuY3Rpb24oZSx0LHIsaSxuKXtoLmNhbGwodGhpcyxlLHQscixpLG4pLHRoaXMuY2xhc3NOYW1lPVwiRW51bVwiLHRoaXMub2JqZWN0PW51bGx9Oyh5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGgucHJvdG90eXBlKSkuWGc9ZnVuY3Rpb24oKXtmb3IodmFyIGU9e30sdD10aGlzLlYzKHkuaTQpLHI9MCxpPXQubGVuZ3RoO3I8aTsrK3IpZVt0W3JdLm5hbWVdPXRbcl0uaWQ7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCIkb3B0aW9uc1wiLHt2YWx1ZTp0aGlzLnozKCl9KSx0aGlzLm9iamVjdD1lfSxzLm40PXk7dmFyIFQ9ZnVuY3Rpb24oZSx0LHIsaSl7by5jYWxsKHRoaXMsZSx0LHIpLHRoaXMuY2xhc3NOYW1lPVwiRW51bS5WYWx1ZVwiLHRoaXMuaWQ9aX07VC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSkscy5uNC5pND1UO3ZhciBtPWZ1bmN0aW9uKGUsdCxyLGkpe28uY2FsbCh0aGlzLGUsdCxyKSx0aGlzLks0PWl9O20ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLHMuWTQ9bTt2YXIgST1mdW5jdGlvbihlLHQscixpKXtoLmNhbGwodGhpcyxlLHQscixpKSx0aGlzLmNsYXNzTmFtZT1cIlNlcnZpY2VcIix0aGlzLnM0PW51bGx9OyhJLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGgucHJvdG90eXBlKSkuWGc9ZnVuY3Rpb24ocil7cmV0dXJuIHRoaXMuczQmJiFyP3RoaXMuczQ6dGhpcy5zND1mdW5jdGlvbih0LHIpe2Zvcih2YXIgaT1mdW5jdGlvbihlKXt0Lm80Llc0LmNhbGwodGhpcyksdGhpcy56ND1lfHxmdW5jdGlvbihlLHQscil7c2V0VGltZW91dChyLmJpbmQodGhpcyxFcnJvcihcIk5vdCBpbXBsZW1lbnRlZCwgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGNvZGVJTy9Qcm90b0J1Zi5qcy93aWtpL1NlcnZpY2VzXCIpKSwwKX19LG49aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0Lm80Llc0LnByb3RvdHlwZSkscz1yLlYzKHQuSDMuVzQuSjQpLG89MDtvPHMubGVuZ3RoO28rKykhZnVuY3Rpb24odCl7blt0Lm5hbWVdPWZ1bmN0aW9uKGksbil7dHJ5e3RyeXtpPXQuWDQuczQuZGVjb2RlKGUud3JhcChpKSl9Y2F0Y2goZSl7aWYoIShlIGluc3RhbmNlb2YgVHlwZUVycm9yKSl0aHJvdyBlfWlmKCEoaSYmaSBpbnN0YW5jZW9mIHQuWDQuczQpKXJldHVybiB2b2lkIHNldFRpbWVvdXQobi5iaW5kKHRoaXMsRXJyb3IoXCJJbGxlZ2FsIHJlcXVlc3QgdHlwZSBwcm92aWRlZCB0byBzZXJ2aWNlIG1ldGhvZCBcIityLm5hbWUrXCIjXCIrdC5uYW1lKSksMCk7dGhpcy56NCh0LnEzKCksaSxmdW5jdGlvbihlLGkpe2lmKGUpcmV0dXJuIHZvaWQgbihlKTt0cnl7aT10Llo0LnM0LmRlY29kZShpKX1jYXRjaChlKXt9aWYoIShpJiZpIGluc3RhbmNlb2YgdC5aNC5zNCkpcmV0dXJuIHZvaWQgbihFcnJvcihcIklsbGVnYWwgcmVzcG9uc2UgdHlwZSByZWNlaXZlZCBpbiBzZXJ2aWNlIG1ldGhvZCBcIityLm5hbWUrXCIjXCIrdC5uYW1lKSk7bihudWxsLGkpfSl9Y2F0Y2goZSl7c2V0VGltZW91dChuLmJpbmQodGhpcyxlKSwwKX19LGlbdC5uYW1lXT1mdW5jdGlvbihlLHIsbil7bmV3IGkoZSlbdC5uYW1lXShyLG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkmJihPYmplY3QuZGVmaW5lUHJvcGVydHkoaVt0Lm5hbWVdLFwiJG9wdGlvbnNcIix7dmFsdWU6dC56MygpfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG5bdC5uYW1lXSxcIiRvcHRpb25zXCIse3ZhbHVlOmlbdC5uYW1lXS5VNH0pKX0oc1tvXSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiJG9wdGlvbnNcIix7dmFsdWU6ci56MygpfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCIkb3B0aW9uc1wiLHt2YWx1ZTppLlU0fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGksXCIkdHlwZVwiLHt2YWx1ZTpyfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCIkdHlwZVwiLHt2YWx1ZTpyfSkpLGl9KHQsdGhpcyl9LHMuVzQ9STt2YXIgUz1mdW5jdGlvbihlLHQscixpKXtvLmNhbGwodGhpcyxlLHQsciksdGhpcy5jbGFzc05hbWU9XCJTZXJ2aWNlLk1ldGhvZFwiLHRoaXMub3B0aW9ucz1pfHx7fX07KFMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpKS56Mz1jLnozLHMuVzQuZTY9Uzt2YXIgUj1mdW5jdGlvbihlLHQscixpLG4scyxvLGEpe1MuY2FsbCh0aGlzLGUsdCxyLGEpLHRoaXMuY2xhc3NOYW1lPVwiU2VydmljZS5SUENNZXRob2RcIix0aGlzLnQ2PWksdGhpcy5yNj1uLHRoaXMuaTY9cyx0aGlzLm42PW8sdGhpcy5YND1udWxsLHRoaXMuWjQ9bnVsbH07cmV0dXJuIFIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUy5wcm90b3R5cGUpLHMuVzQuSjQ9UixzfSh0KSx0Lm80PWZ1bmN0aW9uKGUsdCxpKXtmdW5jdGlvbiBuKGUsdCl7dC55Mz1lLHQubWVzc2FnZXMmJnQubWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKGUsdCl9KSx0LmMzJiZ0LmMzLmZvckVhY2goZnVuY3Rpb24odCl7bihlLHQpfSl9dmFyIHM9ZnVuY3Rpb24oZSl7dGhpcy5zNj1uZXcgaS5YMyh0aGlzLG51bGwsXCJcIiksdGhpcy5vNj10aGlzLnM2LHRoaXMuYTY9ITEsdGhpcy5yZXN1bHQ9bnVsbCx0aGlzLmZpbGVzPXt9LHRoaXMuaDY9bnVsbCx0aGlzLm9wdGlvbnM9ZXx8e30sdGhpcy55Mz1cInByb3RvM1wiPT09dGhpcy5vcHRpb25zLnkzP1wicHJvdG8zXCI6XCJwcm90bzJcIn0sbz1zLnByb3RvdHlwZTtyZXR1cm4gby5yZXNldD1mdW5jdGlvbigpe3RoaXMubzY9dGhpcy5zNn0sby5jNj1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8IXQuWTIudGVzdChlKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgcGFja2FnZTogXCIrZSk7dmFyIHIsbixzPWUuc3BsaXQoXCIuXCIpO2ZvcihyPTA7cjxzLmxlbmd0aDtyKyspaWYoIXQuek8udGVzdChzW3JdKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgcGFja2FnZTogXCIrc1tyXSk7Zm9yKHI9MDtyPHMubGVuZ3RoO3IrKyluPXRoaXMubzYuUTMoc1tyXSksbnVsbD09PW4mJnRoaXMubzYuajMobj1uZXcgaS5YMyh0aGlzLHRoaXMubzYsc1tyXSkpLHRoaXMubzY9bjtyZXR1cm4gdGhpc30scy51Nj1mdW5jdGlvbihyKXtpZihcInN0cmluZ1wiIT10eXBlb2Ygci5uYW1lfHwhdC56Ty50ZXN0KHIubmFtZSkpcmV0dXJuITE7aWYodm9pZCAwIT09ci52YWx1ZXN8fHZvaWQgMCE9PXIudzMpcmV0dXJuITE7dmFyIGk7aWYodm9pZCAwIT09ci5maWVsZHMpe2lmKCFlLmJ2LmlzQXJyYXkoci5maWVsZHMpKXJldHVybiExO3ZhciBuLG89W107Zm9yKGk9MDtpPHIuZmllbGRzLmxlbmd0aDtpKyspe2lmKCFzLmw2KHIuZmllbGRzW2ldKSlyZXR1cm4hMTtpZihuPXBhcnNlSW50KHIuZmllbGRzW2ldLmlkLDEwKSxvLmluZGV4T2Yobik+PTApcmV0dXJuITE7by5wdXNoKG4pfW89bnVsbH1pZih2b2lkIDAhPT1yLmMzKXtpZighZS5idi5pc0FycmF5KHIuYzMpKXJldHVybiExO2ZvcihpPTA7aTxyLmMzLmxlbmd0aDtpKyspaWYoIXMucDYoci5jM1tpXSkpcmV0dXJuITF9aWYodm9pZCAwIT09ci5tZXNzYWdlcyl7aWYoIWUuYnYuaXNBcnJheShyLm1lc3NhZ2VzKSlyZXR1cm4hMTtmb3IoaT0wO2k8ci5tZXNzYWdlcy5sZW5ndGg7aSsrKWlmKCFzLnU2KHIubWVzc2FnZXNbaV0pJiYhcy5kNihyLm1lc3NhZ2VzW2ldKSlyZXR1cm4hMX1pZih2b2lkIDAhPT1yLmV4dGVuc2lvbnMmJighZS5idi5pc0FycmF5KHIuZXh0ZW5zaW9ucyl8fDIhPT1yLmV4dGVuc2lvbnMubGVuZ3RofHxcIm51bWJlclwiIT10eXBlb2Ygci5leHRlbnNpb25zWzBdfHxcIm51bWJlclwiIT10eXBlb2Ygci5leHRlbnNpb25zWzFdKSlyZXR1cm4hMTtpZihcInByb3RvM1wiPT09ci55Myl7Zm9yKGk9MDtpPHIuZmllbGRzLmxlbmd0aDtpKyspe3ZhciBhPXIuZmllbGRzW2ldO2lmKFwicmVxdWlyZWRcIj09PWEucnVsZSlyZXR1cm4hMTtpZihhLmRlZmF1bHQpcmV0dXJuITE7aWYoYS5vcHRpb25zKWZvcih2YXIgaD1PYmplY3Qua2V5cyhhLm9wdGlvbnMpLGM9MDtjPGgubGVuZ3RoO2MrKylpZihcImRlZmF1bHRcIj09PWhbY10pcmV0dXJuITF9aWYoci5leHRlbnNpb25zKXJldHVybiExfXJldHVybiEwfSxzLmw2PWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlLnJ1bGV8fFwic3RyaW5nXCIhPXR5cGVvZiBlLm5hbWV8fFwic3RyaW5nXCIhPXR5cGVvZiBlLnR5cGV8fHZvaWQgMD09PWUuaWQpcmV0dXJuITE7aWYoISh0LlEyLnRlc3QoZS5ydWxlKSYmdC56Ty50ZXN0KGUubmFtZSkmJnQuWTIudGVzdChlLnR5cGUpJiZ0LnQzLnRlc3QoXCJcIitlLmlkKSkpcmV0dXJuITE7aWYodm9pZCAwIT09ZS5vcHRpb25zKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5vcHRpb25zKXJldHVybiExO2Zvcih2YXIgcixpPU9iamVjdC5rZXlzKGUub3B0aW9ucyksbj0wO248aS5sZW5ndGg7bisrKWlmKFwic3RyaW5nXCIhPXR5cGVvZihyPWlbbl0pfHxcInN0cmluZ1wiIT10eXBlb2YgZS5vcHRpb25zW3JdJiZcIm51bWJlclwiIT10eXBlb2YgZS5vcHRpb25zW3JdJiZcImJvb2xlYW5cIiE9dHlwZW9mIGUub3B0aW9uc1tyXSlyZXR1cm4hMX1yZXR1cm4hMH0scy5wNj1mdW5jdGlvbihyKXtpZihcInN0cmluZ1wiIT10eXBlb2Ygci5uYW1lfHwhdC56Ty50ZXN0KHIubmFtZSkpcmV0dXJuITE7aWYodm9pZCAwPT09ci52YWx1ZXN8fCFlLmJ2LmlzQXJyYXkoci52YWx1ZXMpfHwwPT1yLnZhbHVlcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBpPTA7aTxyLnZhbHVlcy5sZW5ndGg7aSsrKXtpZihcIm9iamVjdFwiIT10eXBlb2Ygci52YWx1ZXNbaV0pcmV0dXJuITE7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHIudmFsdWVzW2ldLm5hbWV8fHZvaWQgMD09PXIudmFsdWVzW2ldLmlkKXJldHVybiExO2lmKCF0LnpPLnRlc3Qoci52YWx1ZXNbaV0ubmFtZSl8fCF0LnIzLnRlc3QoXCJcIityLnZhbHVlc1tpXS5pZCkpcmV0dXJuITF9cmV0dXJuXCJwcm90bzNcIiE9PXIueTN8fDA9PT1yLnZhbHVlc1swXS5pZH0sby5jcmVhdGU9ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIHRoaXM7aWYoZS5idi5pc0FycmF5KHQpfHwodD1bdF0pLDA9PT10Lmxlbmd0aClyZXR1cm4gdGhpczt2YXIgcj1bXTtmb3Ioci5wdXNoKHQpO3IubGVuZ3RoPjA7KXtpZih0PXIucG9wKCksIWUuYnYuaXNBcnJheSh0KSl0aHJvdyBFcnJvcihcIk5vdCBhIHZhbGlkIG5hbWVzcGFjZTogXCIrSlNPTi5zdHJpbmdpZnkodCkpO2Zvcig7dC5sZW5ndGg+MDspe3ZhciBuPXQuc2hpZnQoKTtpZihzLnU2KG4pKXt2YXIgbz1uZXcgaS5KZCh0aGlzLHRoaXMubzYsbi5uYW1lLG4ub3B0aW9ucyxuLlAzLG4ueTMpLGE9e307aWYobi5BMylmb3IodmFyIGg9T2JqZWN0LmtleXMobi5BMyksYz0wLHU9aC5sZW5ndGg7Yzx1OysrYylvLmozKGFbaFtjXV09bmV3IGkuSmQuVDQodGhpcyxvLGhbY10pKTtpZihuLmZpZWxkcyYmbi5maWVsZHMubGVuZ3RoPjApZm9yKGM9MCx1PW4uZmllbGRzLmxlbmd0aDtjPHU7KytjKXt2YXIgbD1uLmZpZWxkc1tjXTtpZihudWxsIT09by5RMyhsLmlkKSl0aHJvdyBFcnJvcihcIkR1cGxpY2F0ZSBmaWVsZCBpZCBpbiBtZXNzYWdlIFwiK28ubmFtZStcIjogXCIrbC5pZCk7aWYobC5vcHRpb25zKWZvcih2YXIgcD1PYmplY3Qua2V5cyhsLm9wdGlvbnMpLGQ9MCxmPXAubGVuZ3RoO2Q8ZjsrK2Qpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBwW2RdKXRocm93IEVycm9yKFwiSWxsZWdhbCBmaWVsZCBvcHRpb24gbmFtZSBpbiBtZXNzYWdlIFwiK28ubmFtZStcIiNcIitsLm5hbWUrXCI6IFwiK3BbZF0pO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBsLm9wdGlvbnNbcFtkXV0mJlwibnVtYmVyXCIhPXR5cGVvZiBsLm9wdGlvbnNbcFtkXV0mJlwiYm9vbGVhblwiIT10eXBlb2YgbC5vcHRpb25zW3BbZF1dKXRocm93IEVycm9yKFwiSWxsZWdhbCBmaWVsZCBvcHRpb24gdmFsdWUgaW4gbWVzc2FnZSBcIitvLm5hbWUrXCIjXCIrbC5uYW1lK1wiI1wiK3BbZF0rXCI6IFwiK2wub3B0aW9uc1twW2RdXSl9dmFyIGc9bnVsbDtpZihcInN0cmluZ1wiPT10eXBlb2YgbC5NMyYmdm9pZCAwPT09KGc9YVtsLk0zXSkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIG9uZW9mIGluIG1lc3NhZ2UgXCIrby5uYW1lK1wiI1wiK2wubmFtZStcIjogXCIrbC5NMyk7bD1uZXcgaS5KZC5LMyh0aGlzLG8sbC5ydWxlLGwua2V5dHlwZSxsLnR5cGUsbC5uYW1lLGwuaWQsbC5vcHRpb25zLGcsbi55MyksZyYmZy5maWVsZHMucHVzaChsKSxvLmozKGwpfXZhciBFPVtdO2lmKHZvaWQgMCE9PW4uYzMmJm4uYzMubGVuZ3RoPjApZm9yKGM9MDtjPG4uYzMubGVuZ3RoO2MrKylFLnB1c2gobi5jM1tjXSk7aWYobi5tZXNzYWdlcyYmbi5tZXNzYWdlcy5sZW5ndGg+MClmb3IoYz0wO2M8bi5tZXNzYWdlcy5sZW5ndGg7YysrKUUucHVzaChuLm1lc3NhZ2VzW2NdKTtpZihuLmV4dGVuc2lvbnMmJihvLmV4dGVuc2lvbnM9bi5leHRlbnNpb25zLG8uZXh0ZW5zaW9uc1swXTxlLlQyJiYoby5leHRlbnNpb25zWzBdPWUuVDIpLG8uZXh0ZW5zaW9uc1sxXT5lLm0yJiYoby5leHRlbnNpb25zWzFdPWUubTIpKSx0aGlzLm82LmozKG8pLEUubGVuZ3RoPjApe3IucHVzaCh0KSx0PUUsRT1udWxsLHRoaXMubzY9byxvPW51bGw7Y29udGludWV9RT1udWxsLG89bnVsbH1lbHNlIGlmKHMucDYobikpe2ZvcihvPW5ldyBpLm40KHRoaXMsdGhpcy5vNixuLm5hbWUsbi5vcHRpb25zLG4ueTMpLGM9MDtjPG4udmFsdWVzLmxlbmd0aDtjKyspby5qMyhuZXcgaS5uNC5pNCh0aGlzLG8sbi52YWx1ZXNbY10ubmFtZSxuLnZhbHVlc1tjXS5pZCkpO3RoaXMubzYuajMobyksbz1udWxsfWVsc2UgaWYocy5mNihuKSl7bz1uZXcgaS5XNCh0aGlzLHRoaXMubzYsbi5uYW1lLG4ub3B0aW9ucyk7Zm9yKGMgaW4gbi53MyluLnczLmhhc093blByb3BlcnR5KGMpJiZvLmozKG5ldyBpLlc0Lko0KHRoaXMsbyxjLG4udzNbY10ucmVxdWVzdCxuLnczW2NdLnJlc3BvbnNlLG4udzNbY10uQzMsbi53M1tjXS5fMyxuLnczW2NdLm9wdGlvbnMpKTt0aGlzLm82LmozKG8pLG89bnVsbH1lbHNle2lmKCFzLmQ2KG4pKXRocm93IEVycm9yKFwiTm90IGEgdmFsaWQgZGVmaW5pdGlvbjogXCIrSlNPTi5zdHJpbmdpZnkobikpO2lmKG89dGhpcy5vNi5yZXNvbHZlKG4uQjMpKWZvcihjPTA7YzxuLmZpZWxkcy5sZW5ndGg7YysrKXtpZihudWxsIT09by5RMyhuLmZpZWxkc1tjXS5pZCkpdGhyb3cgRXJyb3IoXCJEdXBsaWNhdGUgZXh0ZW5kZWQgZmllbGQgaWQgaW4gbWVzc2FnZSBcIitvLm5hbWUrXCI6IFwiK24uZmllbGRzW2NdLmlkKTtpZihuLmZpZWxkc1tjXS5pZDxvLmV4dGVuc2lvbnNbMF18fG4uZmllbGRzW2NdLmlkPm8uZXh0ZW5zaW9uc1sxXSl0aHJvdyBFcnJvcihcIklsbGVnYWwgZXh0ZW5kZWQgZmllbGQgaWQgaW4gbWVzc2FnZSBcIitvLm5hbWUrXCI6IFwiK24uZmllbGRzW2NdLmlkK1wiIChcIitvLmV4dGVuc2lvbnMuam9pbihcIiB0byBcIikrXCIgZXhwZWN0ZWQpXCIpO3ZhciB2PW4uZmllbGRzW2NdLm5hbWU7dGhpcy5vcHRpb25zLkkyJiYodj1pLkpkLkszLlY0KG4uZmllbGRzW2NdLm5hbWUpKSxsPW5ldyBpLkpkLlI0KHRoaXMsbyxuLmZpZWxkc1tjXS5ydWxlLG4uZmllbGRzW2NdLnR5cGUsdGhpcy5vNi5xMygpK1wiLlwiK3Ysbi5maWVsZHNbY10uaWQsbi5maWVsZHNbY10ub3B0aW9ucyk7dmFyIHk9bmV3IGkuWTQodGhpcyx0aGlzLm82LG4uZmllbGRzW2NdLm5hbWUsbCk7bC5RND15LHRoaXMubzYuajMoeSksby5qMyhsKX1lbHNlIGlmKCEvXFwuP2dvb2dsZVxcLnByb3RvYnVmXFwuLy50ZXN0KG4uQjMpKXRocm93IEVycm9yKFwiRXh0ZW5kZWQgbWVzc2FnZSBcIituLkIzK1wiIGlzIG5vdCBkZWZpbmVkXCIpfW49bnVsbH10PW51bGwsdGhpcy5vNj10aGlzLm82LnBhcmVudH1yZXR1cm4gdGhpcy5hNj0hMSx0aGlzLnJlc3VsdD1udWxsLHRoaXN9LG8uZzY9ZnVuY3Rpb24odCxpKXtpZihcInN0cmluZ1wiPT10eXBlb2YgaSl7aWYoZS5idi53MiYmKGk9cig2NCkucmVzb2x2ZShpKSksITA9PT10aGlzLmZpbGVzW2ldKXJldHVybiB0aGlzLnJlc2V0KCksdGhpczt0aGlzLmZpbGVzW2ldPSEwfWVsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIGkpe3ZhciBzPWkucm9vdDtlLmJ2LncyJiYocz1yKDY0KS5yZXNvbHZlKHMpKTt2YXIgbz1bcyxpLkU2XS5qb2luKFwiL1wiKTtpZighMD09PXRoaXMuZmlsZXNbb10pcmV0dXJuIHRoaXMucmVzZXQoKSx0aGlzO3RoaXMuZmlsZXNbb109ITB9aWYodC5pbXBvcnRzJiZ0LmltcG9ydHMubGVuZ3RoPjApe3ZhciBhLGg9XCIvXCIsYz0hMTtcIm9iamVjdFwiPT10eXBlb2YgaT8odGhpcy5oNj1pLnJvb3QsYz0hMCxhPXRoaXMuaDYsaT1pLkU2LChhLmluZGV4T2YoXCJcXFxcXCIpPj0wfHxpLmluZGV4T2YoXCJcXFxcXCIpPj0wKSYmKGg9XCJcXFxcXCIpKTpcInN0cmluZ1wiPT10eXBlb2YgaT90aGlzLmg2P2E9dGhpcy5oNjppLmluZGV4T2YoXCIvXCIpPj0wP1wiXCI9PT0oYT1pLnJlcGxhY2UoL1xcL1teXFwvXSokLyxcIlwiKSkmJihhPVwiL1wiKTppLmluZGV4T2YoXCJcXFxcXCIpPj0wPyhhPWkucmVwbGFjZSgvXFxcXFteXFxcXF0qJC8sXCJcIiksaD1cIlxcXFxcIik6YT1cIi5cIjphPW51bGw7Zm9yKHZhciB1PTA7dTx0LmltcG9ydHMubGVuZ3RoO3UrKylpZihcInN0cmluZ1wiPT10eXBlb2YgdC5pbXBvcnRzW3VdKXtpZighYSl0aHJvdyBFcnJvcihcIkNhbm5vdCBkZXRlcm1pbmUgaW1wb3J0IHJvb3Q6IEZpbGUgbmFtZSBpcyB1bmtub3duXCIpO3ZhciBsPXQuaW1wb3J0c1t1XTtpZigvXmdvb2dsZVxcL3Byb3RvYnVmXFwvLy50ZXN0KGwpKWNvbnRpbnVlO2lmKGw9YStoK2wsITA9PT10aGlzLmZpbGVzW2xdKWNvbnRpbnVlOy9cXC5wcm90byQvaS50ZXN0KGwpJiYhZS5uMyYmKGw9bC5yZXBsYWNlKC9cXC5wcm90byQvLFwiLmpzb25cIikpO3ZhciBwPWUuYnYuZmV0Y2gobCk7aWYobnVsbD09PXApdGhyb3cgRXJyb3IoXCJGYWlsZWQgdG8gaW1wb3J0ICdcIitsK1wiJyBpbiAnXCIraStcIic6IEZpbGUgbm90IGZvdW5kXCIpOy9cXC5qc29uJC9pLnRlc3QobCk/dGhpcy5nNihKU09OLnBhcnNlKHArXCJcIiksbCk6dGhpcy5nNihuZXcgZS5uMy5SMChwK1wiXCIpLnBhcnNlKCksbCl9ZWxzZSBpPy9cXC4oXFx3KykkLy50ZXN0KGkpP3RoaXMuZzYodC5pbXBvcnRzW3VdLGkucmVwbGFjZSgvXiguKylcXC4oXFx3KykkLyxmdW5jdGlvbihlLHQscil7cmV0dXJuIHQrXCJfaW1wb3J0XCIrdStcIi5cIityfSkpOnRoaXMuZzYodC5pbXBvcnRzW3VdLGkrXCJfaW1wb3J0XCIrdSk6dGhpcy5nNih0LmltcG9ydHNbdV0pO2MmJih0aGlzLmg2PW51bGwpfXQucGFja2FnZSYmdGhpcy5jNih0LnBhY2thZ2UpLHQueTMmJm4odC55Myx0KTt2YXIgZD10aGlzLm82O3JldHVybiB0Lm9wdGlvbnMmJk9iamVjdC5rZXlzKHQub3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbihlKXtkLm9wdGlvbnNbZV09dC5vcHRpb25zW2VdfSksdC5tZXNzYWdlcyYmKHRoaXMuY3JlYXRlKHQubWVzc2FnZXMpLHRoaXMubzY9ZCksdC5jMyYmKHRoaXMuY3JlYXRlKHQuYzMpLHRoaXMubzY9ZCksdC5zZXJ2aWNlcyYmKHRoaXMuY3JlYXRlKHQuc2VydmljZXMpLHRoaXMubzY9ZCksdC52NiYmdGhpcy5jcmVhdGUodC52NiksdGhpcy5yZXNldCgpLHRoaXN9LHMuZjY9ZnVuY3Rpb24oZSl7cmV0dXJuIShcInN0cmluZ1wiIT10eXBlb2YgZS5uYW1lfHwhdC56Ty50ZXN0KGUubmFtZSl8fFwib2JqZWN0XCIhPXR5cGVvZiBlLnczKX0scy5kNj1mdW5jdGlvbihyKXtpZihcInN0cmluZ1wiIT10eXBlb2Ygci5CM3x8IXQuWTIudGVzdChyLkIzKSlyZXR1cm4hMTt2YXIgaTtpZih2b2lkIDAhPT1yLmZpZWxkcyl7aWYoIWUuYnYuaXNBcnJheShyLmZpZWxkcykpcmV0dXJuITE7dmFyIG4sbz1bXTtmb3IoaT0wO2k8ci5maWVsZHMubGVuZ3RoO2krKyl7aWYoIXMubDYoci5maWVsZHNbaV0pKXJldHVybiExO2lmKG49cGFyc2VJbnQoci5pZCwxMCksby5pbmRleE9mKG4pPj0wKXJldHVybiExO28ucHVzaChuKX1vPW51bGx9cmV0dXJuITB9LG8ueTY9ZnVuY3Rpb24oKXt2YXIgcjtpZihudWxsIT10aGlzLm82JiZcIm9iamVjdFwiIT10eXBlb2YgdGhpcy5vNi50eXBlKXtpZih0aGlzLm82IGluc3RhbmNlb2YgaS5YMylmb3IodmFyIG49dGhpcy5vNi5jaGlsZHJlbixzPTAsbz1uLmxlbmd0aDtzPG87KytzKXRoaXMubzY9bltzXSx0aGlzLnk2KCk7ZWxzZSBpZih0aGlzLm82IGluc3RhbmNlb2YgaS5KZC5LMyl7aWYodC50Ti50ZXN0KHRoaXMubzYudHlwZSkpdGhpcy5vNi50eXBlPWUuZzJbdGhpcy5vNi50eXBlXTtlbHNle2lmKCF0LlkyLnRlc3QodGhpcy5vNi50eXBlKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgdHlwZSByZWZlcmVuY2UgaW4gXCIrdGhpcy5vNi50b1N0cmluZyghMCkrXCI6IFwiK3RoaXMubzYudHlwZSk7aWYoIShyPSh0aGlzLm82IGluc3RhbmNlb2YgaS5KZC5SND90aGlzLm82LlE0LnBhcmVudDp0aGlzLm82LnBhcmVudCkucmVzb2x2ZSh0aGlzLm82LnR5cGUsITApKSl0aHJvdyBFcnJvcihcIlVucmVzb2x2YWJsZSB0eXBlIHJlZmVyZW5jZSBpbiBcIit0aGlzLm82LnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy5vNi50eXBlKTtpZih0aGlzLm82LlozPXIsciBpbnN0YW5jZW9mIGkubjQpe2lmKHRoaXMubzYudHlwZT1lLmcyLmVudW0sXCJwcm90bzNcIj09PXRoaXMubzYueTMmJlwicHJvdG8zXCIhPT1yLnkzKXRocm93IEVycm9yKFwiUHJvdG8zIG1lc3NhZ2UgcmVmZXJzIHRvIHByb3RvMiBlbnVtOyB0aGlzIGlzIG5vdCBhbGxvd2VkIGR1ZSB0byBkaWZmZXJpbmcgZW51bSBzZW1hbnRpY3MgaW4gcHJvdG8zXCIpfWVsc2V7aWYoIShyIGluc3RhbmNlb2YgaS5KZCkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHR5cGUgcmVmZXJlbmNlIGluIFwiK3RoaXMubzYudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLm82LnR5cGUpO3RoaXMubzYudHlwZT1yLlAzP2UuZzIuZ3JvdXA6ZS5nMi5tZXNzYWdlfX1pZih0aGlzLm82Lm1hcCl7aWYoIXQudE4udGVzdCh0aGlzLm82Lng0KSl0aHJvdyBFcnJvcihcIklsbGVnYWwga2V5IHR5cGUgZm9yIG1hcCBmaWVsZCBpbiBcIit0aGlzLm82LnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy5vNi50eXBlKTt0aGlzLm82Lng0PWUuZzJbdGhpcy5vNi54NF19fWVsc2UgaWYodGhpcy5vNiBpbnN0YW5jZW9mIGUuSDMubjQuaTQpO2Vsc2UgaWYodGhpcy5vNiBpbnN0YW5jZW9mIGUuSDMuVzQuZTYpe2lmKCEodGhpcy5vNiBpbnN0YW5jZW9mIGUuSDMuVzQuSjQpKXRocm93IEVycm9yKFwiSWxsZWdhbCBzZXJ2aWNlIHR5cGUgaW4gXCIrdGhpcy5vNi50b1N0cmluZyghMCkpO2lmKCEoKHI9dGhpcy5vNi5wYXJlbnQucmVzb2x2ZSh0aGlzLm82LnQ2KSkmJnIgaW5zdGFuY2VvZiBlLkgzLkpkKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgdHlwZSByZWZlcmVuY2UgaW4gXCIrdGhpcy5vNi50b1N0cmluZyghMCkrXCI6IFwiK3RoaXMubzYudDYpO2lmKHRoaXMubzYuWDQ9ciwhKChyPXRoaXMubzYucGFyZW50LnJlc29sdmUodGhpcy5vNi5yNikpJiZyIGluc3RhbmNlb2YgZS5IMy5KZCkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHR5cGUgcmVmZXJlbmNlIGluIFwiK3RoaXMubzYudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLm82LnI2KTt0aGlzLm82Llo0PXJ9ZWxzZSBpZighKHRoaXMubzYgaW5zdGFuY2VvZiBlLkgzLkpkLlQ0fHx0aGlzLm82IGluc3RhbmNlb2YgZS5IMy5ZNCkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIG9iamVjdCBpbiBuYW1lc3BhY2U6IFwiK3R5cGVvZiB0aGlzLm82K1wiOlwiK3RoaXMubzYpO3RoaXMucmVzZXQoKX19LG8uWGc9ZnVuY3Rpb24oZSl7aWYodGhpcy5yZXNldCgpLHRoaXMuYTZ8fCh0aGlzLnk2KCksdGhpcy5hNj0hMCx0aGlzLnJlc3VsdD1udWxsKSxudWxsPT09dGhpcy5yZXN1bHQmJih0aGlzLnJlc3VsdD10aGlzLnM2LlhnKCkpLGUpe2Zvcih2YXIgdD1cInN0cmluZ1wiPT10eXBlb2YgZT9lLnNwbGl0KFwiLlwiKTplLHI9dGhpcy5yZXN1bHQsaT0wO2k8dC5sZW5ndGg7aSsrKXtpZighclt0W2ldXSl7cj1udWxsO2JyZWFrfXI9clt0W2ldXX1yZXR1cm4gcn1yZXR1cm4gdGhpcy5yZXN1bHR9LG8uVDY9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5zNi5yZXNvbHZlKGUpOnRoaXMuczZ9LG8udG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIkJ1aWxkZXJcIn0scy5KZD1mdW5jdGlvbigpe30scy5XND1mdW5jdGlvbigpe30sc30odCx0LkxhbmcsdC5IMyksdC5NYXA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgdD0wO3JldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHQ8ZS5sZW5ndGg/e2RvbmU6ITEsdmFsdWU6ZVt0KytdfTp7ZG9uZTohMH19fX12YXIgcj1mdW5jdGlvbih0LHIpe2lmKCF0Lm1hcCl0aHJvdyBFcnJvcihcImZpZWxkIGlzIG5vdCBhIG1hcFwiKTtpZih0aGlzLks0PXQsdGhpcy5FND1uZXcgZS5IMy5FbGVtZW50KHQueDQsbnVsbCwhMCx0LnkzKSx0aGlzLnY0PW5ldyBlLkgzLkVsZW1lbnQodC50eXBlLHQuWjMsITEsdC55MyksdGhpcy5tYXA9e30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLm1hcCkubGVuZ3RofX0pLHIpZm9yKHZhciBpPU9iamVjdC5rZXlzKHIpLG49MDtuPGkubGVuZ3RoO24rKyl7dmFyIHM9dGhpcy5FNC51NChpW25dKSxvPXRoaXMudjQucjQocltpW25dXSk7dGhpcy5tYXBbdGhpcy5FNC5sNChzKV09e2tleTpzLHZhbHVlOm99fX0saT1yLnByb3RvdHlwZTtyZXR1cm4gaS5jbGVhcj1mdW5jdGlvbigpe3RoaXMubWFwPXt9fSxpLmRlbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLkU0Lmw0KHRoaXMuRTQucjQoZSkpLHI9dCBpbiB0aGlzLm1hcDtyZXR1cm4gZGVsZXRlIHRoaXMubWFwW3RdLHJ9LGkuZW50cmllcz1mdW5jdGlvbigpe2Zvcih2YXIgZSxyPVtdLGk9T2JqZWN0LmtleXModGhpcy5tYXApLG49MDtuPGkubGVuZ3RoO24rKylyLnB1c2goWyhlPXRoaXMubWFwW2lbbl1dKS5rZXksZS52YWx1ZV0pO3JldHVybiB0KHIpfSxpLmtleXM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10scj1PYmplY3Qua2V5cyh0aGlzLm1hcCksaT0wO2k8ci5sZW5ndGg7aSsrKWUucHVzaCh0aGlzLm1hcFtyW2ldXS5rZXkpO3JldHVybiB0KGUpfSxpLnZhbHVlcz1mdW5jdGlvbigpe2Zvcih2YXIgZT1bXSxyPU9iamVjdC5rZXlzKHRoaXMubWFwKSxpPTA7aTxyLmxlbmd0aDtpKyspZS5wdXNoKHRoaXMubWFwW3JbaV1dLnZhbHVlKTtyZXR1cm4gdChlKX0saS5mb3JFYWNoPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByLGk9T2JqZWN0LmtleXModGhpcy5tYXApLG49MDtuPGkubGVuZ3RoO24rKyllLmNhbGwodCwocj10aGlzLm1hcFtpW25dXSkudmFsdWUsci5rZXksdGhpcyl9LGkuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5FNC5yNChlKSxpPXRoaXMudjQucjQodCk7cmV0dXJuIHRoaXMubWFwW3RoaXMuRTQubDQocildPXtrZXk6cix2YWx1ZTppfSx0aGlzfSxpLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLkU0Lmw0KHRoaXMuRTQucjQoZSkpO2lmKHQgaW4gdGhpcy5tYXApcmV0dXJuIHRoaXMubWFwW3RdLnZhbHVlfSxpLmhhcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5FNC5sNCh0aGlzLkU0LnI0KGUpKWluIHRoaXMubWFwfSxyfSh0KSx0Lm02PWZ1bmN0aW9uKGUscixpKXtyZXR1cm4oXCJzdHJpbmdcIj09dHlwZW9mIHJ8fHImJlwic3RyaW5nXCI9PXR5cGVvZiByLkU2JiZcInN0cmluZ1wiPT10eXBlb2Ygci5yb290KSYmKGk9cixyPXZvaWQgMCksdC5aZyhuZXcgdC5uMy5SMChlKS5wYXJzZSgpLHIsaSl9LHQuSTY9dC5tNix0LlM2PWZ1bmN0aW9uKGUscixpKXtpZihyJiZcIm9iamVjdFwiPT10eXBlb2Ygcj8oaT1yLHI9bnVsbCk6ciYmXCJmdW5jdGlvblwiPT10eXBlb2Ygcnx8KHI9bnVsbCkscilyZXR1cm4gdC5idi5mZXRjaChcInN0cmluZ1wiPT10eXBlb2YgZT9lOmUucm9vdCtcIi9cIitlLkU2LGZ1bmN0aW9uKG4pe2lmKG51bGw9PT1uKXJldHVybiB2b2lkIHIoRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZmlsZVwiKSk7dHJ5e3IobnVsbCx0Lm02KG4saSxlKSl9Y2F0Y2goZSl7cihlKX19KTt2YXIgbj10LmJ2LmZldGNoKFwib2JqZWN0XCI9PXR5cGVvZiBlP2Uucm9vdCtcIi9cIitlLkU2OmUpO3JldHVybiBudWxsPT09bj9udWxsOnQubTYobixpLGUpfSx0LlI2PXQuUzYsdC53Nj1mdW5jdGlvbihlKXtyZXR1cm4gZT1lfHx7fSx2b2lkIDA9PT1lLkkyJiYoZS5JMj10LkkyKSx2b2lkIDA9PT1lLlMyJiYoZS5TMj10LlMyKSxuZXcgdC5vNChlKX0sdC5aZz1mdW5jdGlvbihlLHIsaSl7cmV0dXJuKFwic3RyaW5nXCI9PXR5cGVvZiByfHxyJiZcInN0cmluZ1wiPT10eXBlb2Ygci5FNiYmXCJzdHJpbmdcIj09dHlwZW9mIHIucm9vdCkmJihpPXIscj1udWxsKSxyJiZcIm9iamVjdFwiPT10eXBlb2Ygcnx8KHI9dC53NigpKSxcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9SlNPTi5wYXJzZShlKSksci5nNihlLGkpLHIueTYoKSxyfSx0LmI2PWZ1bmN0aW9uKGUscixpKXtpZihyJiZcIm9iamVjdFwiPT10eXBlb2Ygcj8oaT1yLHI9bnVsbCk6ciYmXCJmdW5jdGlvblwiPT10eXBlb2Ygcnx8KHI9bnVsbCkscilyZXR1cm4gdC5idi5mZXRjaChcInN0cmluZ1wiPT10eXBlb2YgZT9lOmUucm9vdCtcIi9cIitlLkU2LGZ1bmN0aW9uKG4pe2lmKG51bGw9PT1uKXJldHVybiB2b2lkIHIoRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZmlsZVwiKSk7dHJ5e3IobnVsbCx0LlpnKEpTT04ucGFyc2UobiksaSxlKSl9Y2F0Y2goZSl7cihlKX19KTt2YXIgbj10LmJ2LmZldGNoKFwib2JqZWN0XCI9PXR5cGVvZiBlP2Uucm9vdCtcIi9cIitlLkU2OmUpO3JldHVybiBudWxsPT09bj9udWxsOnQuWmcoSlNPTi5wYXJzZShuKSxpLGUpfSx0fVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlJiZcIm9iamVjdFwiPT10eXBlb2YgdCYmdD9lLmk9YShyKDM1KSk6KG49W3IoMTYyKV0saT1hLHZvaWQgMCE9PShzPVwiZnVuY3Rpb25cIj09dHlwZW9mIGk/aS5hcHBseSh0LG4pOmkpJiYoZS5pPXMpKX0oKX0pLmNhbGwodCxyKDYzKShlKSl9LGZ1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24oZSl7dmFyIG4sczsvKipcbiAqIEBsaWNlbnNlIEJ5dGVCdWZmZXIuanMgKGMpIDIwMTMtMjAxNCBEYW5pZWwgV2lydHogPGRjb2RlQGRjb2RlLmlvPlxuICogVGhpcyB2ZXJzaW9uIG9mIEJ5dGVCdWZmZXIuanMgdXNlcyBhbiBBcnJheUJ1ZmZlciBhcyBpdHMgYmFja2luZyBidWZmZXIgd2hpY2ggaXMgYWNjZXNzZWQgdGhyb3VnaCBhIERhdGFWaWV3IGFuZCBpc1xuICogY29tcGF0aWJsZSB3aXRoIG1vZGVybiBicm93c2Vycy5cbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjBcbiAqIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Rjb2RlSU8vQnl0ZUJ1ZmZlci5qcyBmb3IgZGV0YWlsc1xuICovXG4hZnVuY3Rpb24obyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYShlKXtmdW5jdGlvbiB0KGUpe3ZhciB0PTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQ8ZS5sZW5ndGg/ZS5jaGFyQ29kZUF0KHQrKyk6bnVsbH19ZnVuY3Rpb24gcigpe3ZhciBlPVtdLHQ9W107cmV0dXJuIGZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHQuam9pbihcIlwiKSthLmFwcGx5KFN0cmluZyxlKTtlLmxlbmd0aCthcmd1bWVudHMubGVuZ3RoPjEwMjQmJih0LnB1c2goYS5hcHBseShTdHJpbmcsZSkpLGUubGVuZ3RoPTApLEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGUsYXJndW1lbnRzKX19dmFyIG49ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PWUmJihlPW4uRF8pLHZvaWQgMD09PXQmJih0PW4ua18pLHZvaWQgMD09PXImJihyPW4uTF8pLCFyKXtpZigoZXw9MCk8MCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBjYXBhY2l0eVwiKTt0PSEhdCxyPSEhcn10aGlzLmJ1ZmZlcj0wPT09ZT9vOm5ldyBBcnJheUJ1ZmZlcihlKSx0aGlzLnZpZXc9MD09PWU/bnVsbDpuZXcgRGF0YVZpZXcodGhpcy5idWZmZXIpLHRoaXMub2Zmc2V0PTAsdGhpcy5NXz0tMSx0aGlzLkZfPWUsdGhpcy5VXz12b2lkIDAhPT10JiYhIXQsdGhpcy5CXz0hIXJ9O24uVkVSU0lPTj1cIjMuNS41XCIsbi5IXz0hMCxuLnhfPSExLG4uRF89MTYsbi5rXz1uLnhfLG4uTF89ITEsbi5xXz1lfHxudWxsO3ZhciBzPW4ucHJvdG90eXBlLG89bmV3IEFycmF5QnVmZmVyKDApLGE9U3RyaW5nLmZyb21DaGFyQ29kZTtuLkdfPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbmV3IG4oZSx0LHIpfSxuLmNvbmNhdD1mdW5jdGlvbihlLHQscixpKXtcImJvb2xlYW5cIiE9dHlwZW9mIHQmJlwic3RyaW5nXCI9PXR5cGVvZiB0fHwoaT1yLHI9dCx0PXZvaWQgMCk7Zm9yKHZhciBzLG89MCxhPTAsaD1lLmxlbmd0aDthPGg7KythKW4uVl8oZVthXSl8fChlW2FdPW4ud3JhcChlW2FdLHQpKSwocz1lW2FdLkZfLWVbYV0ub2Zmc2V0KT4wJiYobys9cyk7aWYoMD09PW8pcmV0dXJuIG5ldyBuKDAscixpKTt2YXIgYyx1PW5ldyBuKG8scixpKSxsPW5ldyBVaW50OEFycmF5KHUuYnVmZmVyKTtmb3IoYT0wO2E8aDspYz1lW2ErK10sKHM9Yy5GXy1jLm9mZnNldCk8PTB8fChsLnNldChuZXcgVWludDhBcnJheShjLmJ1ZmZlcikuc3ViYXJyYXkoYy5vZmZzZXQsYy5GXyksdS5vZmZzZXQpLHUub2Zmc2V0Kz1zKTtyZXR1cm4gdS5GXz11Lm9mZnNldCx1Lm9mZnNldD0wLHV9LG4uVl89ZnVuY3Rpb24oZSl7cmV0dXJuITA9PT0oZSYmZSBpbnN0YW5jZW9mIG4pfSxuLnR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXlCdWZmZXJ9LG4ud3JhcD1mdW5jdGlvbihlLHQscixvKXtpZihcInN0cmluZ1wiIT10eXBlb2YgdCYmKG89cixyPXQsdD12b2lkIDApLFwic3RyaW5nXCI9PXR5cGVvZiBlKXN3aXRjaCh2b2lkIDA9PT10JiYodD1cInV0ZjhcIiksdCl7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIG4ual8oZSxyKTtjYXNlXCJoZXhcIjpyZXR1cm4gbi5RXyhlLHIpO2Nhc2VcImJpbmFyeVwiOnJldHVybiBuLktfKGUscik7Y2FzZVwidXRmOFwiOnJldHVybiBuLllfKGUscik7Y2FzZVwiZGVidWdcIjpyZXR1cm4gbi5XXyhlLHIpO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBlbmNvZGluZzogXCIrdCl9aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYnVmZmVyXCIpO3ZhciBhO2lmKG4uVl8oZSkpcmV0dXJuIGE9cy5jbG9uZS5jYWxsKGUpLGEuTV89LTEsYTtpZihlIGluc3RhbmNlb2YgVWludDhBcnJheSlhPW5ldyBuKDAscixvKSxlLmxlbmd0aD4wJiYoYS5idWZmZXI9ZS5idWZmZXIsYS5vZmZzZXQ9ZS5ieXRlT2Zmc2V0LGEuRl89ZS5ieXRlT2Zmc2V0K2UubGVuZ3RoLGEudmlldz1lLmxlbmd0aD4wP25ldyBEYXRhVmlldyhlLmJ1ZmZlcik6bnVsbCk7ZWxzZSBpZihlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpYT1uZXcgbigwLHIsbyksZS5ieXRlTGVuZ3RoPjAmJihhLmJ1ZmZlcj1lLGEub2Zmc2V0PTAsYS5GXz1lLmJ5dGVMZW5ndGgsYS52aWV3PWUuYnl0ZUxlbmd0aD4wP25ldyBEYXRhVmlldyhlKTpudWxsKTtlbHNle2lmKFwiW29iamVjdCBBcnJheV1cIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJ1ZmZlclwiKTtmb3IoYT1uZXcgbihlLmxlbmd0aCxyLG8pLGEuRl89ZS5sZW5ndGgsaT0wO2k8ZS5sZW5ndGg7KytpKWEudmlldy5zZXRVaW50OChpLGVbaV0pfXJldHVybiBhfSxzLnpfPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dm9pZCAwPT09dDtpZihyJiYodD10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dCs9MTt2YXIgaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO3JldHVybiB0PmkmJnRoaXMucmVzaXplKChpKj0yKT50P2k6dCksdC09MSx0aGlzLnZpZXcuc2V0SW50OCh0LGUpLHImJih0aGlzLm9mZnNldCs9MSksdGhpc30scy5qQz1zLnpfLHMuSl89ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZTtpZih0JiYoZT10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzE+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzEpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciByPXRoaXMudmlldy5nZXRJbnQ4KGUpO3JldHVybiB0JiYodGhpcy5vZmZzZXQrPTEpLHJ9LHMuZF89cy5KXyxzLlhfPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dm9pZCAwPT09dDtpZihyJiYodD10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX10Kz0xO3ZhciBpPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHQ+aSYmdGhpcy5yZXNpemUoKGkqPTIpPnQ/aTp0KSx0LT0xLHRoaXMudmlldy5zZXRVaW50OCh0LGUpLHImJih0aGlzLm9mZnNldCs9MSksdGhpc30scy5aXz1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lO2lmKHQmJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIHI9dGhpcy52aWV3LmdldFVpbnQ4KGUpO3JldHVybiB0JiYodGhpcy5vZmZzZXQrPTEpLHJ9LHMuZVA9ZnVuY3Rpb24oZSx0KXt2YXIgcj12b2lkIDA9PT10O2lmKHImJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZXw9MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX10Kz0yO3ZhciBpPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHQ+aSYmdGhpcy5yZXNpemUoKGkqPTIpPnQ/aTp0KSx0LT0yLHRoaXMudmlldy5zZXRJbnQxNih0LGUsdGhpcy5VXyksciYmKHRoaXMub2Zmc2V0Kz0yKSx0aGlzfSxzLnRQPXMuZVAscy5yUD1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lO2lmKHQmJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMj50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMikgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIHI9dGhpcy52aWV3LmdldEludDE2KGUsdGhpcy5VXyk7cmV0dXJuIHQmJih0aGlzLm9mZnNldCs9Mikscn0scy5pUD1zLnJQLHMublA9ZnVuY3Rpb24oZSx0KXt2YXIgcj12b2lkIDA9PT10O2lmKHImJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXQrPTI7dmFyIGk9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtyZXR1cm4gdD5pJiZ0aGlzLnJlc2l6ZSgoaSo9Mik+dD9pOnQpLHQtPTIsdGhpcy52aWV3LnNldFVpbnQxNih0LGUsdGhpcy5VXyksciYmKHRoaXMub2Zmc2V0Kz0yKSx0aGlzfSxzLnNQPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMD09PWU7aWYodCYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSsyPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCsyKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgcj10aGlzLnZpZXcuZ2V0VWludDE2KGUsdGhpcy5VXyk7cmV0dXJuIHQmJih0aGlzLm9mZnNldCs9Mikscn0scy5vUD1mdW5jdGlvbihlLHQpe3ZhciByPXZvaWQgMD09PXQ7aWYociYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlfD0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXQrPTQ7dmFyIGk9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtyZXR1cm4gdD5pJiZ0aGlzLnJlc2l6ZSgoaSo9Mik+dD9pOnQpLHQtPTQsdGhpcy52aWV3LnNldEludDMyKHQsZSx0aGlzLlVfKSxyJiYodGhpcy5vZmZzZXQrPTQpLHRoaXN9LHMuQmc9cy5vUCxzLmFQPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMD09PWU7aWYodCYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSs0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCs0KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgcj10aGlzLnZpZXcuZ2V0SW50MzIoZSx0aGlzLlVfKTtyZXR1cm4gdCYmKHRoaXMub2Zmc2V0Kz00KSxyfSxzLlFnPXMuYVAscy5oUD1mdW5jdGlvbihlLHQpe3ZhciByPXZvaWQgMD09PXQ7aWYociYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dCs9NDt2YXIgaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO3JldHVybiB0PmkmJnRoaXMucmVzaXplKChpKj0yKT50P2k6dCksdC09NCx0aGlzLnZpZXcuc2V0VWludDMyKHQsZSx0aGlzLlVfKSxyJiYodGhpcy5vZmZzZXQrPTQpLHRoaXN9LHMuY1A9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZTtpZih0JiYoZT10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzQpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciByPXRoaXMudmlldy5nZXRVaW50MzIoZSx0aGlzLlVfKTtyZXR1cm4gdCYmKHRoaXMub2Zmc2V0Kz00KSxyfSxlJiYocy51UD1mdW5jdGlvbih0LHIpe3ZhciBpPXZvaWQgMD09PXI7aWYoaSYmKHI9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiPT10eXBlb2YgdCl0PWUuREUodCk7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgdCl0PWUua0UodCk7ZWxzZSBpZighKHQmJnQgaW5zdGFuY2VvZiBlKSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIit0K1wiIChub3QgYW4gaW50ZWdlciBvciBMb25nKVwiKTtpZihcIm51bWJlclwiIT10eXBlb2Ygcnx8ciUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIityK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHI+Pj49MCk8MHx8ciswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3IrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1cIm51bWJlclwiPT10eXBlb2YgdD90PWUuREUodCk6XCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PWUua0UodCkpLHIrPTg7dmFyIG49dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtyZXR1cm4gcj5uJiZ0aGlzLnJlc2l6ZSgobio9Mik+cj9uOnIpLHItPTgsdGhpcy5VXz8odGhpcy52aWV3LnNldEludDMyKHIsdC5sb3csITApLHRoaXMudmlldy5zZXRJbnQzMihyKzQsdC5oaWdoLCEwKSk6KHRoaXMudmlldy5zZXRJbnQzMihyLHQuaGlnaCwhMSksdGhpcy52aWV3LnNldEludDMyKHIrNCx0LmxvdywhMSkpLGkmJih0aGlzLm9mZnNldCs9OCksdGhpc30scy5sUD1zLnVQLHMucFA9ZnVuY3Rpb24odCl7dmFyIHI9dm9pZCAwPT09dDtpZihyJiYodD10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0Kzg+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzgpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBpPXRoaXMuVV8/bmV3IGUodGhpcy52aWV3LmdldEludDMyKHQsITApLHRoaXMudmlldy5nZXRJbnQzMih0KzQsITApLCExKTpuZXcgZSh0aGlzLnZpZXcuZ2V0SW50MzIodCs0LCExKSx0aGlzLnZpZXcuZ2V0SW50MzIodCwhMSksITEpO3JldHVybiByJiYodGhpcy5vZmZzZXQrPTgpLGl9LHMuZFA9cy5wUCxzLmZQPWZ1bmN0aW9uKHQscil7dmFyIGk9dm9pZCAwPT09cjtpZihpJiYocj10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXQ9ZS5ERSh0KTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXQ9ZS5rRSh0KTtlbHNlIGlmKCEodCYmdCBpbnN0YW5jZW9mIGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyIG9yIExvbmcpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiByfHxyJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3IrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigocj4+Pj0wKTwwfHxyKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrcitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfVwibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5ERSh0KTpcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZS5rRSh0KSkscis9ODt2YXIgbj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO3JldHVybiByPm4mJnRoaXMucmVzaXplKChuKj0yKT5yP246ciksci09OCx0aGlzLlVfPyh0aGlzLnZpZXcuc2V0SW50MzIocix0LmxvdywhMCksdGhpcy52aWV3LnNldEludDMyKHIrNCx0LmhpZ2gsITApKToodGhpcy52aWV3LnNldEludDMyKHIsdC5oaWdoLCExKSx0aGlzLnZpZXcuc2V0SW50MzIocis0LHQubG93LCExKSksaSYmKHRoaXMub2Zmc2V0Kz04KSx0aGlzfSxzLmdQPWZ1bmN0aW9uKHQpe3ZhciByPXZvaWQgMD09PXQ7aWYociYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCs4PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCs4KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgaT10aGlzLlVfP25ldyBlKHRoaXMudmlldy5nZXRJbnQzMih0LCEwKSx0aGlzLnZpZXcuZ2V0SW50MzIodCs0LCEwKSwhMCk6bmV3IGUodGhpcy52aWV3LmdldEludDMyKHQrNCwhMSksdGhpcy52aWV3LmdldEludDMyKHQsITEpLCEwKTtyZXR1cm4gciYmKHRoaXMub2Zmc2V0Kz04KSxpfSkscy5FUD1mdW5jdGlvbihlLHQpe3ZhciByPXZvaWQgMD09PXQ7aWYociYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYSBudW1iZXIpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXQrPTQ7dmFyIGk9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtyZXR1cm4gdD5pJiZ0aGlzLnJlc2l6ZSgoaSo9Mik+dD9pOnQpLHQtPTQsdGhpcy52aWV3LnNldEZsb2F0MzIodCxlLHRoaXMuVV8pLHImJih0aGlzLm9mZnNldCs9NCksdGhpc30scy52UD1zLkVQLHMueVA9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZTtpZih0JiYoZT10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzQpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciByPXRoaXMudmlldy5nZXRGbG9hdDMyKGUsdGhpcy5VXyk7cmV0dXJuIHQmJih0aGlzLm9mZnNldCs9NCkscn0scy5UUD1zLnlQLHMubVA9ZnVuY3Rpb24oZSx0KXt2YXIgcj12b2lkIDA9PT10O2lmKHImJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGEgbnVtYmVyKVwiKTtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX10Kz04O3ZhciBpPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHQ+aSYmdGhpcy5yZXNpemUoKGkqPTIpPnQ/aTp0KSx0LT04LHRoaXMudmlldy5zZXRGbG9hdDY0KHQsZSx0aGlzLlVfKSxyJiYodGhpcy5vZmZzZXQrPTgpLHRoaXN9LHMuWUM9cy5tUCxzLklQPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMD09PWU7aWYodCYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSs4PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCs4KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgcj10aGlzLnZpZXcuZ2V0RmxvYXQ2NChlLHRoaXMuVV8pO3JldHVybiB0JiYodGhpcy5vZmZzZXQrPTgpLHJ9LHMuRV89cy5JUCxuLlNQPTUsbi5SUD1mdW5jdGlvbihlKXtyZXR1cm4gZT4+Pj0wLGU8MTI4PzE6ZTwxNjM4ND8yOmU8MTw8MjE/MzplPDE8PDI4PzQ6NX0sbi53UD1mdW5jdGlvbihlKXtyZXR1cm4oKGV8PTApPDwxXmU+PjMxKT4+PjB9LG4uYlA9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+Pj4xXi0oMSZlKXwwfSxzLkNQPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dm9pZCAwPT09dDtpZihyJiYodD10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIGkscz1uLlJQKGUpO3QrPXM7dmFyIG89dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtyZXR1cm4gdD5vJiZ0aGlzLnJlc2l6ZSgobyo9Mik+dD9vOnQpLHQtPXMsdGhpcy52aWV3LnNldFVpbnQ4KHQsaT0xMjh8ZSksZT4+Pj0wLGU+PTEyOD8oaT1lPj43fDEyOCx0aGlzLnZpZXcuc2V0VWludDgodCsxLGkpLGU+PTE2Mzg0PyhpPWU+PjE0fDEyOCx0aGlzLnZpZXcuc2V0VWludDgodCsyLGkpLGU+PTE8PDIxPyhpPWU+PjIxfDEyOCx0aGlzLnZpZXcuc2V0VWludDgodCszLGkpLGU+PTE8PDI4Pyh0aGlzLnZpZXcuc2V0VWludDgodCs0LGU+PjI4JjE1KSxzPTUpOih0aGlzLnZpZXcuc2V0VWludDgodCszLDEyNyZpKSxzPTQpKToodGhpcy52aWV3LnNldFVpbnQ4KHQrMiwxMjcmaSkscz0zKSk6KHRoaXMudmlldy5zZXRVaW50OCh0KzEsMTI3JmkpLHM9MikpOih0aGlzLnZpZXcuc2V0VWludDgodCwxMjcmaSkscz0xKSxyPyh0aGlzLm9mZnNldCs9cyx0aGlzKTpzfSxzLl9QPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuQ1Aobi53UChlKSx0KX0scy5QUD1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lO2lmKHQmJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIHIsaSxuPTAscz0wO2Rve2lmKGk9ZStuLCF0aGlzLkJfJiZpPnRoaXMuRl8pe3ZhciBvPUVycm9yKFwiVHJ1bmNhdGVkXCIpO3Rocm93IG8uQVA9ITAsb31yPXRoaXMudmlldy5nZXRVaW50OChpKSxuPDUmJihzfD0oMTI3JnIpPDw3Km4+Pj4wKSwrK259d2hpbGUoMTI4PT0oMTI4JnIpKTtyZXR1cm4gc3w9MCx0Pyh0aGlzLm9mZnNldCs9bixzKTp7dmFsdWU6cyxsZW5ndGg6bn19LHMuT1A9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5QUChlKTtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdD90LnZhbHVlPW4uYlAodC52YWx1ZSk6dD1uLmJQKHQpLHR9LGUmJihuLk5QPTEwLG4uRFA9ZnVuY3Rpb24odCl7XCJudW1iZXJcIj09dHlwZW9mIHQ/dD1lLkRFKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1lLmtFKHQpKTt2YXIgcj10LmtQKCk+Pj4wLGk9dC5MUCgyOCkua1AoKT4+PjAsbj10LkxQKDU2KS5rUCgpPj4+MDtyZXR1cm4gMD09bj8wPT1pP3I8MTYzODQ/cjwxMjg/MToyOnI8MTw8MjE/Mzo0Omk8MTYzODQ/aTwxMjg/NTo2Omk8MTw8MjE/Nzo4Om48MTI4Pzk6MTB9LG4uTVA9ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/dD1lLkRFKHQsITEpOlwic3RyaW5nXCI9PXR5cGVvZiB0P3Q9ZS5rRSh0LCExKTohMSE9PXQuRlAmJih0PXQuVVAoKSksdC5zaGlmdExlZnQoMSkucFQodC5IUCg2MykpLkJQKCl9LG4ueFA9ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/dD1lLkRFKHQsITEpOlwic3RyaW5nXCI9PXR5cGVvZiB0P3Q9ZS5rRSh0LCExKTohMSE9PXQuRlAmJih0PXQuVVAoKSksdC5MUCgxKS5wVCh0LnFQKGUuT05FKS5VUCgpLnFFKCkpLlVQKCl9LHMuR1A9ZnVuY3Rpb24odCxyKXt2YXIgaT12b2lkIDA9PT1yO2lmKGkmJihyPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpdD1lLkRFKHQpO2Vsc2UgaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpdD1lLmtFKHQpO2Vsc2UgaWYoISh0JiZ0IGluc3RhbmNlb2YgZSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrdCtcIiAobm90IGFuIGludGVnZXIgb3IgTG9uZylcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHIlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrcitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChyPj4+PTApPDB8fHIrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIityK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9XCJudW1iZXJcIj09dHlwZW9mIHQ/dD1lLkRFKHQsITEpOlwic3RyaW5nXCI9PXR5cGVvZiB0P3Q9ZS5rRSh0LCExKTohMSE9PXQuRlAmJih0PXQuVVAoKSk7dmFyIHM9bi5EUCh0KSxvPXQua1AoKT4+PjAsYT10LkxQKDI4KS5rUCgpPj4+MCxoPXQuTFAoNTYpLmtQKCk+Pj4wO3IrPXM7dmFyIGM9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtzd2l0Y2gocj5jJiZ0aGlzLnJlc2l6ZSgoYyo9Mik+cj9jOnIpLHItPXMscyl7Y2FzZSAxMDp0aGlzLnZpZXcuc2V0VWludDgocis5LGg+Pj43JjEpO2Nhc2UgOTp0aGlzLnZpZXcuc2V0VWludDgocis4LDkhPT1zPzEyOHxoOjEyNyZoKTtjYXNlIDg6dGhpcy52aWV3LnNldFVpbnQ4KHIrNyw4IT09cz9hPj4+MjF8MTI4OmE+Pj4yMSYxMjcpO2Nhc2UgNzp0aGlzLnZpZXcuc2V0VWludDgocis2LDchPT1zP2E+Pj4xNHwxMjg6YT4+PjE0JjEyNyk7Y2FzZSA2OnRoaXMudmlldy5zZXRVaW50OChyKzUsNiE9PXM/YT4+Pjd8MTI4OmE+Pj43JjEyNyk7Y2FzZSA1OnRoaXMudmlldy5zZXRVaW50OChyKzQsNSE9PXM/MTI4fGE6MTI3JmEpO2Nhc2UgNDp0aGlzLnZpZXcuc2V0VWludDgociszLDQhPT1zP28+Pj4yMXwxMjg6bz4+PjIxJjEyNyk7Y2FzZSAzOnRoaXMudmlldy5zZXRVaW50OChyKzIsMyE9PXM/bz4+PjE0fDEyODpvPj4+MTQmMTI3KTtjYXNlIDI6dGhpcy52aWV3LnNldFVpbnQ4KHIrMSwyIT09cz9vPj4+N3wxMjg6bz4+PjcmMTI3KTtjYXNlIDE6dGhpcy52aWV3LnNldFVpbnQ4KHIsMSE9PXM/MTI4fG86MTI3Jm8pfXJldHVybiBpPyh0aGlzLm9mZnNldCs9cyx0aGlzKTpzfSxzLlZQPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuR1Aobi5NUChlKSx0KX0scy5qUD1mdW5jdGlvbih0KXt2YXIgcj12b2lkIDA9PT10O2lmKHImJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIGk9dCxuPTAscz0wLG89MCxhPTA7aWYoYT10aGlzLnZpZXcuZ2V0VWludDgodCsrKSxuPTEyNyZhLDEyOCZhJiYoYT10aGlzLnZpZXcuZ2V0VWludDgodCsrKSxufD0oMTI3JmEpPDw3LDEyOCZhJiYoYT10aGlzLnZpZXcuZ2V0VWludDgodCsrKSxufD0oMTI3JmEpPDwxNCwxMjgmYSYmKGE9dGhpcy52aWV3LmdldFVpbnQ4KHQrKyksbnw9KDEyNyZhKTw8MjEsMTI4JmEmJihhPXRoaXMudmlldy5nZXRVaW50OCh0KyspLHM9MTI3JmEsMTI4JmEmJihhPXRoaXMudmlldy5nZXRVaW50OCh0KyspLHN8PSgxMjcmYSk8PDcsMTI4JmEmJihhPXRoaXMudmlldy5nZXRVaW50OCh0KyspLHN8PSgxMjcmYSk8PDE0LDEyOCZhJiYoYT10aGlzLnZpZXcuZ2V0VWludDgodCsrKSxzfD0oMTI3JmEpPDwyMSwxMjgmYSYmKGE9dGhpcy52aWV3LmdldFVpbnQ4KHQrKyksbz0xMjcmYSwxMjgmYSYmKGE9dGhpcy52aWV3LmdldFVpbnQ4KHQrKyksb3w9KDEyNyZhKTw8NywxMjgmYSkpKSkpKSkpKSl0aHJvdyBFcnJvcihcIkJ1ZmZlciBvdmVycnVuXCIpO3ZhciBoPWUucUkobnxzPDwyOCxzPj4+NHxvPDwyNCwhMSk7cmV0dXJuIHI/KHRoaXMub2Zmc2V0PXQsaCk6e3ZhbHVlOmgsbGVuZ3RoOnQtaX19LHMuUVA9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5qUCh0KTtyZXR1cm4gciYmci52YWx1ZSBpbnN0YW5jZW9mIGU/ci52YWx1ZT1uLnhQKHIudmFsdWUpOnI9bi54UChyKSxyfSkscy5IZz1mdW5jdGlvbihlLHIpe3ZhciBpPXZvaWQgMD09PXI7aSYmKHI9dGhpcy5vZmZzZXQpO3ZhciBuLHM9ZS5sZW5ndGg7aWYoIXRoaXMuQl8pe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBOb3QgYSBzdHJpbmdcIik7Zm9yKG49MDtuPHM7KytuKWlmKDA9PT1lLmNoYXJDb2RlQXQobikpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgc3RyOiBDb250YWlucyBOVUxMLWNoYXJhY3RlcnNcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHIlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrcitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChyPj4+PTApPDB8fHIrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIityK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cz1jLktQKHQoZSkpWzFdLHIrPXMrMTt2YXIgbz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO3JldHVybiByPm8mJnRoaXMucmVzaXplKChvKj0yKT5yP286ciksci09cysxLGMuWVAodChlKSxmdW5jdGlvbihlKXt0aGlzLnZpZXcuc2V0VWludDgocisrLGUpfS5iaW5kKHRoaXMpKSx0aGlzLnZpZXcuc2V0VWludDgocisrLDApLGk/KHRoaXMub2Zmc2V0PXIsdGhpcyk6c30scy5ZZz1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lO2lmKHQmJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIGksbj1lLHM9LTE7cmV0dXJuIGMuV1AoZnVuY3Rpb24oKXtpZigwPT09cylyZXR1cm4gbnVsbDtpZihlPj10aGlzLkZfKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrZStcIiA8IFwiK3RoaXMuRl8pO3JldHVybiAwPT09KHM9dGhpcy52aWV3LmdldFVpbnQ4KGUrKykpP251bGw6c30uYmluZCh0aGlzKSxpPXIoKSwhMCksdD8odGhpcy5vZmZzZXQ9ZSxpKCkpOntzdHJpbmc6aSgpLGxlbmd0aDplLW59fSxzLnpQPWZ1bmN0aW9uKGUscil7dmFyIGk9dm9pZCAwPT09cjtpZihpJiYocj10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBOb3QgYSBzdHJpbmdcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHIlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrcitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChyPj4+PTApPDB8fHIrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIityK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIG4scz1yO249Yy5LUCh0KGUpLHRoaXMuQl8pWzFdLHIrPTQrbjt2YXIgbz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO2lmKHI+byYmdGhpcy5yZXNpemUoKG8qPTIpPnI/bzpyKSxyLT00K24sdGhpcy52aWV3LnNldFVpbnQzMihyLG4sdGhpcy5VXykscis9NCxjLllQKHQoZSksZnVuY3Rpb24oZSl7dGhpcy52aWV3LnNldFVpbnQ4KHIrKyxlKX0uYmluZCh0aGlzKSksciE9PXMrNCtuKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrcitcIiA9PSBcIisocis0K24pKTtyZXR1cm4gaT8odGhpcy5vZmZzZXQ9cix0aGlzKTpyLXN9LHMuSlA9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwPT09ZTtpZih0JiYoZT10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzQpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBpLG49MCxzPWU7bj10aGlzLnZpZXcuZ2V0VWludDMyKGUsdGhpcy5VXyksZSs9NDt2YXIgbyxhPWUrbjtyZXR1cm4gYy5XUChmdW5jdGlvbigpe3JldHVybiBlPGE/dGhpcy52aWV3LmdldFVpbnQ4KGUrKyk6bnVsbH0uYmluZCh0aGlzKSxvPXIoKSx0aGlzLkJfKSxpPW8oKSx0Pyh0aGlzLm9mZnNldD1lLGkpOntzdHJpbmc6aSxsZW5ndGg6ZS1zfX0sbi5YUD1cImNcIixuLlpQPVwiYlwiLHMuJFA9ZnVuY3Rpb24oZSxyKXt2YXIgaT12b2lkIDA9PT1yO2lmKGkmJihyPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHIlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrcitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChyPj4+PTApPDB8fHIrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIityK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIG4scz1yO249Yy5LUCh0KGUpKVsxXSxyKz1uO3ZhciBvPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHI+byYmdGhpcy5yZXNpemUoKG8qPTIpPnI/bzpyKSxyLT1uLGMuWVAodChlKSxmdW5jdGlvbihlKXt0aGlzLnZpZXcuc2V0VWludDgocisrLGUpfS5iaW5kKHRoaXMpKSxpPyh0aGlzLm9mZnNldD1yLHRoaXMpOnItc30scy5xYj1zLiRQLG4uZUE9ZnVuY3Rpb24oZSl7cmV0dXJuIGMuS1AodChlKSlbMF19LG4udEE9ZnVuY3Rpb24oZSl7cmV0dXJuIGMuS1AodChlKSlbMV19LHMuckE9ZnVuY3Rpb24oZSx0LGkpe1wibnVtYmVyXCI9PXR5cGVvZiB0JiYoaT10LHQ9dm9pZCAwKTt2YXIgcz12b2lkIDA9PT1pO2lmKHMmJihpPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD1uLlhQKSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGxlbmd0aDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIGl8fGklMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIraStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChpPj4+PTApPDB8fGkrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitpK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIG8sYT0wLGg9aTtpZih0PT09bi5YUCl7aWYobz1yKCksYy5pQShmdW5jdGlvbigpe3JldHVybiBhPGUmJmk8dGhpcy5GXz90aGlzLnZpZXcuZ2V0VWludDgoaSsrKTpudWxsfS5iaW5kKHRoaXMpLGZ1bmN0aW9uKGUpeysrYSxjLm5BKGUsbyl9LmJpbmQodGhpcykpLGEhPT1lKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrYStcIiA9PSBcIitlKTtyZXR1cm4gcz8odGhpcy5vZmZzZXQ9aSxvKCkpOntzdHJpbmc6bygpLGxlbmd0aDppLWh9fWlmKHQ9PT1uLlpQKXtpZighdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGl8fGklMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIraStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChpPj4+PTApPDB8fGkrZT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitpK1wiICgrXCIrZStcIikgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIHU9aStlO2lmKGMuV1AoZnVuY3Rpb24oKXtyZXR1cm4gaTx1P3RoaXMudmlldy5nZXRVaW50OChpKyspOm51bGx9LmJpbmQodGhpcyksbz1yKCksdGhpcy5CXyksaSE9PXUpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IFRydW5jYXRlZCBkYXRhLCBcIitpK1wiID09IFwiK3UpO3JldHVybiBzPyh0aGlzLm9mZnNldD1pLG8oKSk6e3N0cmluZzpvKCksbGVuZ3RoOmktaH19dGhyb3cgVHlwZUVycm9yKFwiVW5zdXBwb3J0ZWQgbWV0cmljczogXCIrdCl9LHMuTGI9cy5yQSxzLnNBPWZ1bmN0aW9uKGUscil7dmFyIGk9dm9pZCAwPT09cjtpZihpJiYocj10aGlzLm9mZnNldCksIXRoaXMuQl8pe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBOb3QgYSBzdHJpbmdcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHIlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrcitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChyPj4+PTApPDB8fHIrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIityK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIHMsbyxhPXI7cz1jLktQKHQoZSksdGhpcy5CXylbMV0sbz1uLlJQKHMpLHIrPW8rczt2YXIgaD10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoO2lmKHI+aCYmdGhpcy5yZXNpemUoKGgqPTIpPnI/aDpyKSxyLT1vK3Mscis9dGhpcy5DUChzLHIpLGMuWVAodChlKSxmdW5jdGlvbihlKXt0aGlzLnZpZXcuc2V0VWludDgocisrLGUpfS5iaW5kKHRoaXMpKSxyIT09YStzK28pdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IFRydW5jYXRlZCBkYXRhLCBcIityK1wiID09IFwiKyhyK3MrbykpO3JldHVybiBpPyh0aGlzLm9mZnNldD1yLHRoaXMpOnItYX0scy5vQT1mdW5jdGlvbihlKXt2YXIgdD12b2lkIDA9PT1lO2lmKHQmJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIGksbj10aGlzLlBQKGUpLHM9ZTtlKz1uLmxlbmd0aCxuPW4udmFsdWU7dmFyIG89ZStuLGE9cigpO3JldHVybiBjLldQKGZ1bmN0aW9uKCl7cmV0dXJuIGU8bz90aGlzLnZpZXcuZ2V0VWludDgoZSsrKTpudWxsfS5iaW5kKHRoaXMpLGEsdGhpcy5CXyksaT1hKCksdD8odGhpcy5vZmZzZXQ9ZSxpKTp7c3RyaW5nOmksbGVuZ3RoOmUtc319LHMuYXBwZW5kPWZ1bmN0aW9uKGUsdCxyKXtcIm51bWJlclwiIT10eXBlb2YgdCYmXCJzdHJpbmdcIj09dHlwZW9mIHR8fChyPXQsdD12b2lkIDApO3ZhciBpPXZvaWQgMD09PXI7aWYoaSYmKHI9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2Ygcnx8ciUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIityK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHI+Pj49MCk8MHx8ciswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3IrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1lIGluc3RhbmNlb2Ygbnx8KGU9bi53cmFwKGUsdCkpO3ZhciBzPWUuRl8tZS5vZmZzZXQ7aWYoczw9MClyZXR1cm4gdGhpcztyKz1zO3ZhciBvPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHI+byYmdGhpcy5yZXNpemUoKG8qPTIpPnI/bzpyKSxyLT1zLG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLHIpLnNldChuZXcgVWludDhBcnJheShlLmJ1ZmZlcikuc3ViYXJyYXkoZS5vZmZzZXQsZS5GXykpLGUub2Zmc2V0Kz1zLGkmJih0aGlzLm9mZnNldCs9cyksdGhpc30scy5hQT1mdW5jdGlvbihlLHQpe3JldHVybiBlLmFwcGVuZCh0aGlzLHQpLHRoaXN9LHMuYXNzZXJ0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLkJfPSFlLHRoaXN9LHMuaEE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aH0scy5jbGVhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9mZnNldD0wLHRoaXMuRl89dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCx0aGlzLk1fPS0xLHRoaXN9LHMuY2xvbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IG4oMCx0aGlzLlVfLHRoaXMuQl8pO2lmKGUpe3ZhciByPW5ldyBBcnJheUJ1ZmZlcih0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKTtuZXcgVWludDhBcnJheShyKS5zZXQodGhpcy5idWZmZXIpLHQuYnVmZmVyPXIsdC52aWV3PW5ldyBEYXRhVmlldyhyKX1lbHNlIHQuYnVmZmVyPXRoaXMuYnVmZmVyLHQudmlldz10aGlzLnZpZXc7cmV0dXJuIHQub2Zmc2V0PXRoaXMub2Zmc2V0LHQuTV89dGhpcy5NXyx0LkZfPXRoaXMuRl8sdH0scy5jb21wYWN0PWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMuRl8pLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYoMD09PWUmJnQ9PT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXJldHVybiB0aGlzO3ZhciByPXQtZTtpZigwPT09cilyZXR1cm4gdGhpcy5idWZmZXI9byx0aGlzLnZpZXc9bnVsbCx0aGlzLk1fPj0wJiYodGhpcy5NXy09ZSksdGhpcy5vZmZzZXQ9MCx0aGlzLkZfPTAsdGhpczt2YXIgaT1uZXcgQXJyYXlCdWZmZXIocik7cmV0dXJuIG5ldyBVaW50OEFycmF5KGkpLnNldChuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcikuc3ViYXJyYXkoZSx0KSksdGhpcy5idWZmZXI9aSx0aGlzLnZpZXc9bmV3IERhdGFWaWV3KGkpLHRoaXMuTV8+PTAmJih0aGlzLk1fLT1lKSx0aGlzLm9mZnNldD0wLHRoaXMuRl89cix0aGlzfSxzLmNBPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMuRl8pLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYoZT09PXQpcmV0dXJuIG5ldyBuKDAsdGhpcy5VXyx0aGlzLkJfKTt2YXIgcj10LWUsaT1uZXcgbihyLHRoaXMuVV8sdGhpcy5CXyk7cmV0dXJuIGkub2Zmc2V0PTAsaS5GXz1yLGkuTV8+PTAmJihpLk1fLT1lKSx0aGlzLmpFKGksMCxlLHQpLGl9LHMuakU9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIHMsbztpZighdGhpcy5CXyYmIW4uVl8oZSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB0YXJnZXQ6IE5vdCBhIEJ5dGVCdWZmZXJcIik7aWYodD0obz12b2lkIDA9PT10KT9lLm9mZnNldDowfHQscj0ocz12b2lkIDA9PT1yKT90aGlzLm9mZnNldDowfHIsaT12b2lkIDA9PT1pP3RoaXMuRl86MHxpLHQ8MHx8dD5lLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHRhcmdldCByYW5nZTogMCA8PSBcIit0K1wiIDw9IFwiK2UuYnVmZmVyLmJ5dGVMZW5ndGgpO2lmKHI8MHx8aT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHNvdXJjZSByYW5nZTogMCA8PSBcIityK1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpO3ZhciBhPWktcjtyZXR1cm4gMD09PWE/ZTooZS51QSh0K2EpLG5ldyBVaW50OEFycmF5KGUuYnVmZmVyKS5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpLnN1YmFycmF5KHIsaSksdCkscyYmKHRoaXMub2Zmc2V0Kz1hKSxvJiYoZS5vZmZzZXQrPWEpLHRoaXMpfSxzLnVBPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIHQ8ZT90aGlzLnJlc2l6ZSgodCo9Mik+ZT90OmUpOnRoaXN9LHMuZmlsbD1mdW5jdGlvbihlLHQscil7dmFyIGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksXCJzdHJpbmdcIj09dHlwZW9mIGUmJmUubGVuZ3RoPjAmJihlPWUuY2hhckNvZGVBdCgwKSksdm9pZCAwPT09dCYmKHQ9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXImJihyPXRoaXMuRl8pLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlfD0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiByfHxyJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKHI+Pj49MCx0PDB8fHQ+cnx8cj50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK3QrXCIgPD0gXCIrcitcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1pZih0Pj1yKXJldHVybiB0aGlzO2Zvcig7dDxyOyl0aGlzLnZpZXcuc2V0VWludDgodCsrLGUpO3JldHVybiBpJiYodGhpcy5vZmZzZXQ9dCksdGhpc30scy54Zz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkZfPXRoaXMub2Zmc2V0LHRoaXMub2Zmc2V0PTAsdGhpc30scy5tYXJrPWZ1bmN0aW9uKGUpe2lmKGU9dm9pZCAwPT09ZT90aGlzLm9mZnNldDplLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gdGhpcy5NXz1lLHRoaXN9LHMub3JkZXI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuQl8mJlwiYm9vbGVhblwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGxpdHRsZUVuZGlhbjogTm90IGEgYm9vbGVhblwiKTtyZXR1cm4gdGhpcy5VXz0hIWUsdGhpc30scy5sQT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5VXz12b2lkIDA9PT1lfHwhIWUsdGhpc30scy5wQT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5VXz12b2lkIDAhPT1lJiYhZSx0aGlzfSxzLmRBPWZ1bmN0aW9uKGUsdCxyKXtcIm51bWJlclwiIT10eXBlb2YgdCYmXCJzdHJpbmdcIj09dHlwZW9mIHR8fChyPXQsdD12b2lkIDApO3ZhciBpPXZvaWQgMD09PXI7aWYoaSYmKHI9dGhpcy5vZmZzZXQpLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2Ygcnx8ciUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIityK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHI+Pj49MCk8MHx8ciswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3IrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1lIGluc3RhbmNlb2Ygbnx8KGU9bi53cmFwKGUsdCkpO3ZhciBzPWUuRl8tZS5vZmZzZXQ7aWYoczw9MClyZXR1cm4gdGhpczt2YXIgbyxhPXMtcjtpZihhPjApe3ZhciBoPW5ldyBBcnJheUJ1ZmZlcih0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoK2EpO289bmV3IFVpbnQ4QXJyYXkoaCksby5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpLnN1YmFycmF5KHIsdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkscyksdGhpcy5idWZmZXI9aCx0aGlzLnZpZXc9bmV3IERhdGFWaWV3KGgpLHRoaXMub2Zmc2V0Kz1hLHRoaXMuTV8+PTAmJih0aGlzLk1fKz1hKSx0aGlzLkZfKz1hLHIrPWF9ZWxzZSBvPW5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKTtyZXR1cm4gby5zZXQobmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIpLnN1YmFycmF5KGUub2Zmc2V0LGUuRl8pLHItcyksZS5vZmZzZXQ9ZS5GXyxpJiYodGhpcy5vZmZzZXQtPXMpLHRoaXN9LHMuZkE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5kQSh0aGlzLHQpLHRoaXN9LHMuZ0E9ZnVuY3Rpb24oZSl7XCJmdW5jdGlvblwiIT10eXBlb2YgZSYmKGU9Y29uc29sZS5sb2cuYmluZChjb25zb2xlKSksZSh0aGlzLnRvU3RyaW5nKCkrXCJcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXCIrdGhpcy5FQSghMCkpfSxzLnZBPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRl8tdGhpcy5vZmZzZXR9LHMucmVzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5NXz49MD8odGhpcy5vZmZzZXQ9dGhpcy5NXyx0aGlzLk1fPS0xKTp0aGlzLm9mZnNldD0wLHRoaXN9LHMucmVzaXplPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgY2FwYWNpdHk6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZXw9MCk8MCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBjYXBhY2l0eTogMCA8PSBcIitlKX1pZih0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoPGUpe3ZhciB0PW5ldyBBcnJheUJ1ZmZlcihlKTtuZXcgVWludDhBcnJheSh0KS5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpKSx0aGlzLmJ1ZmZlcj10LHRoaXMudmlldz1uZXcgRGF0YVZpZXcodCl9cmV0dXJuIHRoaXN9LHMucmV2ZXJzZT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLkZfKSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiBlPT09dD90aGlzOihBcnJheS5wcm90b3R5cGUucmV2ZXJzZS5jYWxsKG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKS5zdWJhcnJheShlLHQpKSx0aGlzLnZpZXc9bmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyKSx0aGlzKX0scy5NYj1mdW5jdGlvbihlKXtpZighdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGxlbmd0aDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2V8PTB9dmFyIHQ9dGhpcy5vZmZzZXQrZTtpZighdGhpcy5CXyYmKHQ8MHx8dD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBsZW5ndGg6IDAgPD0gXCIrdGhpcy5vZmZzZXQrXCIgKyBcIitlK1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpO3JldHVybiB0aGlzLm9mZnNldD10LHRoaXN9LHMuc2xpY2U9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLm9mZnNldCksdm9pZCAwPT09dCYmKHQ9dGhpcy5GXyksIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKHQ+Pj49MCxlPDB8fGU+dHx8dD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK2UrXCIgPD0gXCIrdCtcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgcj10aGlzLmNsb25lKCk7cmV0dXJuIHIub2Zmc2V0PWUsci5GXz10LHJ9LHMueUE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vZmZzZXQscj10aGlzLkZfO2lmKHQ+cil7dmFyIGk9dDt0PXIscj1pfWlmKCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHJ8fHIlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGxpbWl0OiBOb3QgYW4gaW50ZWdlclwiKTtpZihyPj4+PTAsdDwwfHx0PnJ8fHI+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIit0K1wiIDw9IFwiK3IrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYoIWUmJjA9PT10JiZyPT09dGhpcy5idWZmZXIuYnl0ZUxlbmd0aClyZXR1cm4gdGhpcy5idWZmZXI7aWYodD09PXIpcmV0dXJuIG87dmFyIG49bmV3IEFycmF5QnVmZmVyKHItdCk7cmV0dXJuIG5ldyBVaW50OEFycmF5KG4pLnNldChuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcikuc3ViYXJyYXkodCxyKSwwKSxufSxzLnRjPXMueUEscy50b1N0cmluZz1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09ZSlyZXR1cm5cIkJ5dGVCdWZmZXJBQihvZmZzZXQ9XCIrdGhpcy5vZmZzZXQrXCIsbWFya2VkT2Zmc2V0PVwiK3RoaXMuTV8rXCIsbGltaXQ9XCIrdGhpcy5GXytcIixjYXBhY2l0eT1cIit0aGlzLmhBKCkrXCIpXCI7c3dpdGNoKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYoZT1cInV0ZjhcIix0PWUscj10KSxlKXtjYXNlXCJ1dGY4XCI6cmV0dXJuIHRoaXMuVEEodCxyKTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gdGhpcy5tQSh0LHIpO2Nhc2VcImhleFwiOnJldHVybiB0aGlzLklBKHQscik7Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIHRoaXMuU0EodCxyKTtjYXNlXCJkZWJ1Z1wiOnJldHVybiB0aGlzLkVBKCk7Y2FzZVwiY29sdW1uc1wiOnJldHVybiB0aGlzLlJBKCk7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIlVuc3VwcG9ydGVkIGVuY29kaW5nOiBcIitlKX19O3ZhciBoPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXt9LHQ9WzY1LDY2LDY3LDY4LDY5LDcwLDcxLDcyLDczLDc0LDc1LDc2LDc3LDc4LDc5LDgwLDgxLDgyLDgzLDg0LDg1LDg2LDg3LDg4LDg5LDkwLDk3LDk4LDk5LDEwMCwxMDEsMTAyLDEwMywxMDQsMTA1LDEwNiwxMDcsMTA4LDEwOSwxMTAsMTExLDExMiwxMTMsMTE0LDExNSwxMTYsMTE3LDExOCwxMTksMTIwLDEyMSwxMjIsNDgsNDksNTAsNTEsNTIsNTMsNTQsNTUsNTYsNTcsNDMsNDddLHI9W10saT0wLG49dC5sZW5ndGg7aTxuOysraSlyW3RbaV1dPWk7cmV0dXJuIGUuZW5jb2RlPWZ1bmN0aW9uKGUscil7Zm9yKHZhciBpLG47bnVsbCE9PShpPWUoKSk7KXIodFtpPj4yJjYzXSksbj0oMyZpKTw8NCxudWxsIT09KGk9ZSgpKT8obnw9aT4+NCYxNSxyKHRbNjMmKG58aT4+NCYxNSldKSxuPSgxNSZpKTw8MixudWxsIT09KGk9ZSgpKT8ocih0WzYzJihufGk+PjYmMyldKSxyKHRbNjMmaV0pKToocih0WzYzJm5dKSxyKDYxKSkpOihyKHRbNjMmbl0pLHIoNjEpLHIoNjEpKX0sZS5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKGUpe3Rocm93IEVycm9yKFwiSWxsZWdhbCBjaGFyYWN0ZXIgY29kZTogXCIrZSl9Zm9yKHZhciBuLHMsbztudWxsIT09KG49ZSgpKTspaWYocz1yW25dLHZvaWQgMD09PXMmJmkobiksbnVsbCE9PShuPWUoKSkmJihvPXJbbl0sdm9pZCAwPT09byYmaShuKSx0KHM8PDI+Pj4wfCg0OCZvKT4+NCksbnVsbCE9PShuPWUoKSkpKXtpZih2b2lkIDA9PT0ocz1yW25dKSl7aWYoNjE9PT1uKWJyZWFrO2kobil9aWYodCgoMTUmbyk8PDQ+Pj4wfCg2MCZzKT4+MiksbnVsbCE9PShuPWUoKSkpe2lmKHZvaWQgMD09PShvPXJbbl0pKXtpZig2MT09PW4pYnJlYWs7aShuKX10KCgzJnMpPDw2Pj4+MHxvKX19fSxlLnRlc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuL14oPzpbQS1aYS16MC05K1xcL117NH0pKig/OltBLVphLXowLTkrXFwvXXsyfT09fFtBLVphLXowLTkrXFwvXXszfT0pPyQvLnRlc3QoZSl9LGV9KCk7cy5tQT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLkZfKSwhdGhpcy5CXyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBpO3JldHVybiBoLmVuY29kZShmdW5jdGlvbigpe3JldHVybiBlPHQ/dGhpcy52aWV3LmdldFVpbnQ4KGUrKyk6bnVsbH0uYmluZCh0aGlzKSxpPXIoKSksaSgpfSxuLmpfPWZ1bmN0aW9uKGUscixpKXtpZighaSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIHN0cmluZ1wiKTtpZihlLmxlbmd0aCU0IT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBMZW5ndGggbm90IGEgbXVsdGlwbGUgb2YgNFwiKX12YXIgcz1uZXcgbihlLmxlbmd0aC80KjMscixpKSxvPTA7cmV0dXJuIGguZGVjb2RlKHQoZSksZnVuY3Rpb24oZSl7cy52aWV3LnNldFVpbnQ4KG8rKyxlKX0pLHMuRl89byxzfSxuLmJ0b2E9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uS18oZSkubUEoKX0sbi5hdG9iPWZ1bmN0aW9uKGUpe3JldHVybiBuLmpfKGUpLlNBKCl9LHMuU0E9ZnVuY3Rpb24oZSx0KXtpZihlPXZvaWQgMD09PWU/dGhpcy5vZmZzZXQ6ZSx0PXZvaWQgMD09PXQ/dGhpcy5GXzp0LCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYoZT09PXQpcmV0dXJuXCJcIjtmb3IodmFyIHI9W10saT1bXTtlPHQ7KXIucHVzaCh0aGlzLnZpZXcuZ2V0VWludDgoZSsrKSksci5sZW5ndGg+PTEwMjQmJihpLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcscikpLHI9W10pO3JldHVybiBpLmpvaW4oXCJcIikrU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcscil9LG4uS189ZnVuY3Rpb24oZSx0LHIpe2lmKCFyJiZcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2Zvcih2YXIgaSxzPTAsbz1lLmxlbmd0aCxhPW5ldyBuKG8sdCxyKTtzPG87KXtpZihpPWUuY2hhckNvZGVBdChzKSwhciYmaT4yNTUpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgY2hhckNvZGUgYXQgXCIrcytcIjogMCA8PSBcIitpK1wiIDw9IDI1NVwiKTthLnZpZXcuc2V0VWludDgocysrLGkpfXJldHVybiBhLkZfPW8sYX0scy5FQT1mdW5jdGlvbihlKXtmb3IodmFyIHQscj0tMSxpPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgsbj1cIlwiLHM9XCJcIixvPVwiXCI7cjxpOyl7aWYoLTEhPT1yJiYodD10aGlzLnZpZXcuZ2V0VWludDgociksbis9dDwxNj9cIjBcIit0LnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpOnQudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCksZSYmKHMrPXQ+MzImJnQ8MTI3P1N0cmluZy5mcm9tQ2hhckNvZGUodCk6XCIuXCIpKSwrK3IsZSYmcj4wJiZyJTE2PT0wJiZyIT09aSl7Zm9yKDtuLmxlbmd0aDw1MTspbis9XCIgXCI7bys9bitzK1wiXFxuXCIsbj1zPVwiXCJ9cj09PXRoaXMub2Zmc2V0JiZyPT09dGhpcy5GXz9uKz1yPT09dGhpcy5NXz9cIiFcIjpcInxcIjpyPT09dGhpcy5vZmZzZXQ/bis9cj09PXRoaXMuTV8/XCJbXCI6XCI8XCI6cj09PXRoaXMuRl8/bis9cj09PXRoaXMuTV8/XCJdXCI6XCI+XCI6bis9cj09PXRoaXMuTV8/XCInXCI6ZXx8MCE9PXImJnIhPT1pP1wiIFwiOlwiXCJ9aWYoZSYmXCIgXCIhPT1uKXtmb3IoO24ubGVuZ3RoPDUxOyluKz1cIiBcIjtvKz1uK3MrXCJcXG5cIn1yZXR1cm4gZT9vOm59LG4uV189ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgaSxzLG89ZS5sZW5ndGgsYT1uZXcgbigobysxKS8zfDAsdCxyKSxoPTAsYz0wLHU9ITEsbD0hMSxwPSExLGQ9ITEsZj0hMTtoPG87KXtzd2l0Y2goaT1lLmNoYXJBdChoKyspKXtjYXNlXCIhXCI6aWYoIXIpe2lmKGx8fHB8fGQpe2Y9ITA7YnJlYWt9bD1wPWQ9ITB9YS5vZmZzZXQ9YS5NXz1hLkZfPWMsdT0hMTticmVhaztjYXNlXCJ8XCI6aWYoIXIpe2lmKGx8fGQpe2Y9ITA7YnJlYWt9bD1kPSEwfWEub2Zmc2V0PWEuRl89Yyx1PSExO2JyZWFrO2Nhc2VcIltcIjppZighcil7aWYobHx8cCl7Zj0hMDticmVha31sPXA9ITB9YS5vZmZzZXQ9YS5NXz1jLHU9ITE7YnJlYWs7Y2FzZVwiPFwiOmlmKCFyKXtpZihsKXtmPSEwO2JyZWFrfWw9ITB9YS5vZmZzZXQ9Yyx1PSExO2JyZWFrO2Nhc2VcIl1cIjppZighcil7aWYoZHx8cCl7Zj0hMDticmVha31kPXA9ITB9YS5GXz1hLk1fPWMsdT0hMTticmVhaztjYXNlXCI+XCI6aWYoIXIpe2lmKGQpe2Y9ITA7YnJlYWt9ZD0hMH1hLkZfPWMsdT0hMTticmVhaztjYXNlXCInXCI6aWYoIXIpe2lmKHApe2Y9ITA7YnJlYWt9cD0hMH1hLk1fPWMsdT0hMTticmVhaztjYXNlXCIgXCI6dT0hMTticmVhaztkZWZhdWx0OmlmKCFyJiZ1KXtmPSEwO2JyZWFrfWlmKHM9cGFyc2VJbnQoaStlLmNoYXJBdChoKyspLDE2KSwhciYmKGlzTmFOKHMpfHxzPDB8fHM+MjU1KSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgZGVidWcgZW5jb2RlZCBzdHJpbmdcIik7YS52aWV3LnNldFVpbnQ4KGMrKyxzKSx1PSEwfWlmKGYpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IEludmFsaWQgc3ltYm9sIGF0IFwiK2gpfWlmKCFyKXtpZighbHx8IWQpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE1pc3Npbmcgb2Zmc2V0IG9yIGxpbWl0XCIpO2lmKGM8YS5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgZGVidWcgZW5jb2RlZCBzdHJpbmcgKGlzIGl0IGhleD8pIFwiK2MrXCIgPCBcIitvKX1yZXR1cm4gYX0scy5JQT1mdW5jdGlvbihlLHQpe2lmKGU9dm9pZCAwPT09ZT90aGlzLm9mZnNldDplLHQ9dm9pZCAwPT09dD90aGlzLkZfOnQsIXRoaXMuQl8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKHQ+Pj49MCxlPDB8fGU+dHx8dD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK2UrXCIgPD0gXCIrdCtcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1mb3IodmFyIHIsaT1uZXcgQXJyYXkodC1lKTtlPHQ7KXI9dGhpcy52aWV3LmdldFVpbnQ4KGUrKykscjwxNj9pLnB1c2goXCIwXCIsci50b1N0cmluZygxNikpOmkucHVzaChyLnRvU3RyaW5nKDE2KSk7cmV0dXJuIGkuam9pbihcIlwiKX0sbi5RXz1mdW5jdGlvbihlLHQscil7aWYoIXIpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBOb3QgYSBzdHJpbmdcIik7aWYoZS5sZW5ndGglMiE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTGVuZ3RoIG5vdCBhIG11bHRpcGxlIG9mIDJcIil9Zm9yKHZhciBpLHM9ZS5sZW5ndGgsbz1uZXcgbihzLzJ8MCx0KSxhPTAsaD0wO2E8czthKz0yKXtpZihpPXBhcnNlSW50KGUuc3Vic3RyaW5nKGEsYSsyKSwxNiksIXImJighaXNGaW5pdGUoaSl8fGk8MHx8aT4yNTUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBDb250YWlucyBub24taGV4IGNoYXJhY3RlcnNcIik7by52aWV3LnNldFVpbnQ4KGgrKyxpKX1yZXR1cm4gby5GXz1oLG99O3ZhciBjPWZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIGUud0E9MTExNDExMSxlLmJBPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bnVsbDtmb3IoXCJudW1iZXJcIj09dHlwZW9mIGUmJihyPWUsZT1mdW5jdGlvbigpe3JldHVybiBudWxsfSk7bnVsbCE9PXJ8fG51bGwhPT0ocj1lKCkpOylyPDEyOD90KDEyNyZyKTpyPDIwNDg/KHQocj4+NiYzMXwxOTIpLHQoNjMmcnwxMjgpKTpyPDY1NTM2Pyh0KHI+PjEyJjE1fDIyNCksdChyPj42JjYzfDEyOCksdCg2MyZyfDEyOCkpOih0KHI+PjE4Jjd8MjQwKSx0KHI+PjEyJjYzfDEyOCksdChyPj42JjYzfDEyOCksdCg2MyZyfDEyOCkpLHI9bnVsbH0sZS5pQT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixpLG4scyxvPWZ1bmN0aW9uKGUpe2U9ZS5zbGljZSgwLGUuaW5kZXhPZihudWxsKSk7dmFyIHQ9RXJyb3IoZS50b1N0cmluZygpKTt0aHJvdyB0Lm5hbWU9XCJUcnVuY2F0ZWRFcnJvclwiLHQuYnl0ZXM9ZSx0fTtudWxsIT09KHI9ZSgpKTspaWYoMD09KDEyOCZyKSl0KHIpO2Vsc2UgaWYoMTkyPT0oMjI0JnIpKW51bGw9PT0oaT1lKCkpJiZvKFtyLGldKSx0KCgzMSZyKTw8Nnw2MyZpKTtlbHNlIGlmKDIyND09KDI0MCZyKSkobnVsbD09PShpPWUoKSl8fG51bGw9PT0obj1lKCkpKSYmbyhbcixpLG5dKSx0KCgxNSZyKTw8MTJ8KDYzJmkpPDw2fDYzJm4pO2Vsc2V7aWYoMjQwIT0oMjQ4JnIpKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHN0YXJ0aW5nIGJ5dGU6IFwiK3IpOyhudWxsPT09KGk9ZSgpKXx8bnVsbD09PShuPWUoKSl8fG51bGw9PT0ocz1lKCkpKSYmbyhbcixpLG4sc10pLHQoKDcmcik8PDE4fCg2MyZpKTw8MTJ8KDYzJm4pPDw2fDYzJnMpfX0sZS5DQT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixpPW51bGw7Oyl7aWYobnVsbD09PShyPW51bGwhPT1pP2k6ZSgpKSlicmVhaztyPj01NTI5NiYmcjw9NTczNDMmJm51bGwhPT0oaT1lKCkpJiZpPj01NjMyMCYmaTw9NTczNDM/KHQoMTAyNCooci01NTI5NikraS01NjMyMCs2NTUzNiksaT1udWxsKTp0KHIpfW51bGwhPT1pJiZ0KGkpfSxlLm5BPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bnVsbDtmb3IoXCJudW1iZXJcIj09dHlwZW9mIGUmJihyPWUsZT1mdW5jdGlvbigpe3JldHVybiBudWxsfSk7bnVsbCE9PXJ8fG51bGwhPT0ocj1lKCkpOylyPD02NTUzNT90KHIpOihyLT02NTUzNix0KDU1Mjk2KyhyPj4xMCkpLHQociUxMDI0KzU2MzIwKSkscj1udWxsfSxlLllQPWZ1bmN0aW9uKHQscil7ZS5DQSh0LGZ1bmN0aW9uKHQpe2UuYkEodCxyKX0pfSxlLldQPWZ1bmN0aW9uKHQscil7ZS5pQSh0LGZ1bmN0aW9uKHQpe2UubkEodCxyKX0pfSxlLl9BPWZ1bmN0aW9uKGUpe3JldHVybiBlPDEyOD8xOmU8MjA0OD8yOmU8NjU1MzY/Mzo0fSxlLlBBPWZ1bmN0aW9uKHQpe2Zvcih2YXIgcixpPTA7bnVsbCE9PShyPXQoKSk7KWkrPWUuX0Eocik7cmV0dXJuIGl9LGUuS1A9ZnVuY3Rpb24odCl7dmFyIHI9MCxpPTA7cmV0dXJuIGUuQ0EodCxmdW5jdGlvbih0KXsrK3IsaSs9ZS5fQSh0KX0pLFtyLGldfSxlfSgpO3JldHVybiBzLlRBPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMuRl8pLCF0aGlzLkJfKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIGk7dHJ5e2MuV1AoZnVuY3Rpb24oKXtyZXR1cm4gZTx0P3RoaXMudmlldy5nZXRVaW50OChlKyspOm51bGx9LmJpbmQodGhpcyksaT1yKCkpfWNhdGNoKHIpe2lmKGUhPT10KXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrZStcIiAhPSBcIit0KX1yZXR1cm4gaSgpfSxuLllfPWZ1bmN0aW9uKGUscixpKXtpZighaSYmXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIHN0cmluZ1wiKTt2YXIgcz1uZXcgbihjLktQKHQoZSksITApWzFdLHIsaSksbz0wO3JldHVybiBjLllQKHQoZSksZnVuY3Rpb24oZSl7cy52aWV3LnNldFVpbnQ4KG8rKyxlKX0pLHMuRl89byxzfSxufVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlJiZcIm9iamVjdFwiPT10eXBlb2YgdCYmdD9lLmk9ZnVuY3Rpb24oKXt2YXIgZTt0cnl7ZT1yKDkzKX1jYXRjaChlKXt9cmV0dXJuIGEoZSl9KCk6KG49W3IoOTQpXSx2b2lkIDAhPT0ocz1mdW5jdGlvbihlKXtyZXR1cm4gYShlKX0uYXBwbHkodCxuKSkmJihlLmk9cykpfSgpfSkuY2FsbCh0LHIoNjMpKGUpKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNCksbj1yKDApLHM9cigyNSksbz1yKDQ3KSxhPXIoMTY0KSxoPXIoNiksYz1yKDEpLHU9cigyKSxsPWguaGUuUmgscD1oLmhlLlRoLGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGkpe3RoaXMubG9nZ2VySWQ9XCJbUDJQRGlzcGF0Y2hlcl0gXCIsdGhpcy5sb2dnZXI9bi5GcmFtZXdvcmsucmVzb2x2ZShuLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy5TZz10LHRoaXMub3RoZXJHdWlkPXIsdGhpcy5zd2FybUlkPWUuc3dhcm1JZCx0aGlzLnlnPWksdGhpcy5yZWNlaXZlcj1uZXcgYS5DNih0LHIsZSksdGhpcy5zZW5kZXI9bmV3IGEuXzYodCxyLGUsdGhpcyksdGhpcy52RD1lLnZELHRoaXMuVEQ9ZS5URCx0aGlzLnFKPWUucUosKHB8fG4uRnJhbWV3b3JrLkMoKSYmby4kTi5YTikmJih0aGlzLlFKPWUuUUopfXJldHVybiBlLnByb3RvdHlwZS5EZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbmRlci5EZygpfHx0aGlzLnJlY2VpdmVyLkRnKCl9LGUucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWkuZGVmZXIoKTtyZXR1cm4gdGhpcy5zZW5kZXIuUDYoKS50aGVuKGZ1bmN0aW9uKHIpe3JldHVybiBlLnJlY2VpdmVyLmNsb3NlKHIpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIGUuUmoocikudGhlbihmdW5jdGlvbihyKXtyZXR1cm4gZS55Zy5jbG9zZShyKS50aGVuKGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKX0pfSl9KX0pLmNhdGNoKGZ1bmN0aW9uKHIpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjbG9zaW5nIGNvbm5lY3Rpb24gdG8gcGVlclwiLGUubG9nZ2VySWQsdS5ocy5XZS5xZSx7ZGV0YWlsZWRFcnJvcjpyLG90aGVyR3VpZDplLm90aGVyR3VpZH0pLHQucmVqZWN0KFwiQ2xvc2UgcGFydG5lcnNoaXAgZmFpbGVkXCIpfSksdC5Tc30sZS5wcm90b3R5cGUuUmo9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXIuZGVidWcoXCJTRU5EIENMT1NFIFRPIFwiK3RoaXMub3RoZXJHdWlkKTt2YXIgdD1uZXcgcy5SZi5GYS5KZy5DbG9zZTtyZXR1cm4gdC5zZXRUeXBlKGUpLHRoaXMuTGcocy5SZi5FZy5DbG9zZSx0KSxpKHRoaXMuc3dhcm1JZCl9LGUucHJvdG90eXBlLkFzPWZ1bmN0aW9uKGUpe3RyeXtzd2l0Y2gobCYmdGhpcy5sb2dnZXIuZGVidWcoXCJESVNQQVRDSCBcIitlLm1zZ0lkKSxlLm1zZ0lkKXtjYXNlIHMuUmYuRWcuQ2h1bms6dmFyIHQ9cy5SZi5GYS5KZy5DaHVuay5kZWNvZGUoZS5XZyk7dGhpcy5yZWNlaXZlci5BNih0KTticmVhaztjYXNlIHMuUmYuRWcuQWNrOnZhciByPXMuUmYuRmEuSmcuQWNrLmRlY29kZShlLldnKTt0aGlzLnNlbmRlci5PNihyLnRyYW5zZmVySWQpO2JyZWFrO2Nhc2Ugcy5SZi5FZy5DYW5jZWw6dmFyIGk9cy5SZi5GYS5KZy5DYW5jZWwuZGVjb2RlKGUuV2cpO3RoaXMuc2VuZGVyLk42KGkudHJhbnNmZXJJZCk7YnJlYWs7Y2FzZSBzLlJmLkVnLmxnOmwmJnRoaXMubG9nZ2VyLmRlYnVnKFwiUkVDRUlWRUQgT1VUIFBBUlQsREVDT0RJTkcgXCIpO3ZhciBuPXMuUmYuRmEuSmcuT3V0UGFydG5lcnNoaXBSZXF1ZXN0LmRlY29kZShlLldnKTtsJiZ0aGlzLmxvZ2dlci5kZWJ1ZyhcIlJFQ0VJVkVEIE9VVCBQQVJUIEZST00gXCIrbi5ndWlkKSx0aGlzLlRELkNqKG4sdGhpcy55Zyk7YnJlYWs7Y2FzZSBzLlJmLkVnLnBnOmwmJnRoaXMubG9nZ2VyLmRlYnVnKFwiUkVDRUlWRUQgT1VUIFBBUlQgUkVTUCBcIik7dmFyIG89cy5SZi5GYS5KZy5PdXRQYXJ0bmVyc2hpcFJlc3BvbnNlLmRlY29kZShlLldnKTtsJiZ0aGlzLmxvZ2dlci5kZWJ1ZyhcIlJFQ0VJVkVEIE9VVCBQQVJUIFJFU1AgRlJPTSBcIitvLmFjY2VwdCksdGhpcy5URC5RaihvLHRoaXMueWcpO2JyZWFrO2Nhc2Ugcy5SZi5FZy5IYXZlOnZhciBhPXMuUmYuRmEuSmcuSGF2ZS5kZWNvZGUoZS5XZyk7bCYmdGhpcy5sb2dnZXIuZGVidWcoXCJSRUNFSVZFRCBIQVZFIEZPUiBcIithLmZyYWdtZW50SWQrXCIgRlJPTSBcIit0aGlzLm90aGVyR3VpZCksdGhpcy5URC5ENih0aGlzLm90aGVyR3VpZCxhKTticmVhaztjYXNlIHMuUmYuRWcuQ2xvc2U6dmFyIGg9cy5SZi5GYS5KZy5DbG9zZS5kZWNvZGUoZS5XZyk7bCYmdGhpcy5sb2dnZXIuZGVidWcoXCJSRUNFSVZFRCBDTE9TRSBGUk9NIFwiK3RoaXMub3RoZXJHdWlkKSx0aGlzLlRELlZqKHRoaXMub3RoZXJHdWlkLGgpO2JyZWFrO2Nhc2Ugcy5SZi5FZy5SZXF1ZXN0OnZhciBwPXMuUmYuRmEuSmcuUmVxdWVzdC5kZWNvZGUoZS5XZyk7bCYmdGhpcy5sb2dnZXIuZGVidWcoXCJSRUNFSVZFRCBSRVFVRVNUIEZPUiBcIitwLmZyYWdtZW50SWQrXCIgRlJPTSBcIit0aGlzLm90aGVyR3VpZCksdGhpcy5xSi5QTSh0aGlzLm90aGVyR3VpZCxwLHRoaXMpO2JyZWFrO2Nhc2Ugcy5SZi5FZy5Eb05vdEhhdmU6dmFyIGQ9cy5SZi5GYS5KZy5Eb05vdEhhdmUuZGVjb2RlKGUuV2cpO2wmJnRoaXMubG9nZ2VyLmRlYnVnKFwiRG9Ob3RIYXZlIFwiK2QudHJhbnNmZXJJZCksdGhpcy52RC5rNihkKTticmVhaztjYXNlIHMuUmYuRWcuZGc6dmFyIGY9cy5SZi5GYS5KZy5VRFBIYW5kc2hha2VNZXNzYWdlLmRlY29kZShlLldnKTtsJiZ0aGlzLmxvZ2dlci5kZWJ1ZyhcIlVEUCBIQU5EU0hBS0UgTUVTU0FHRSBSRUNFSVZFRCBGUk9NIFwiK2YudXVpZCksdGhpcy5RSi5TRyhmLHRoaXMueWcpO2JyZWFrO2Nhc2Ugcy5SZi5FZy5VRFBIYW5kc2hha2VSZXNwb25zZTp2YXIgZz1zLlJmLkZhLkpnLlVEUEhhbmRzaGFrZVJlc3BvbnNlLmRlY29kZShlLldnKTtsJiZ0aGlzLmxvZ2dlci5kZWJ1ZyhcIlVEUCBIQU5EU0hBS0UgTUVTU0FHRSBSRVNQT05TRSBSRUNFSVZFRCBGUk9NIFwiK3RoaXMub3RoZXJHdWlkKSx0aGlzLlFKLklHKGcsdGhpcy55Zyk7YnJlYWs7Y2FzZSBzLlJmLkVnLlVEUFN3aXRjaExlYWRlcnNoaXBSZXF1ZXN0OnZhciBFPXMuUmYuRmEuSmcuVURQU3dpdGNoTGVhZGVyc2hpcFJlcXVlc3QuZGVjb2RlKGUuV2cpO2wmJnRoaXMubG9nZ2VyLmRlYnVnKFwiU1dJVENIIExFQURFUlNISVAgUkVRVUVTVCBSRUNFSVZFRCBGUk9NIFwiK3RoaXMub3RoZXJHdWlkKSx0aGlzLlFKLlVHKEUpO2JyZWFrO2Nhc2Ugcy5SZi5FZy5mZzp2YXIgdj1zLlJmLkZhLkpnLlVEUFN3aXRjaExlYWRlcnNoaXBBY2suZGVjb2RlKGUuV2cpO2wmJnRoaXMubG9nZ2VyLmRlYnVnKFwiVURQIFNXSVRDSCBBQ0tOT1dMRURHTUVOVCBSRVNQT05TRSBGUk9NIFwiK3RoaXMub3RoZXJHdWlkKSx0aGlzLlFKLlZHKHYsdGhpcy5vdGhlckd1aWQpO2JyZWFrO2Nhc2Ugcy5SZi5FZy5CaXRyYXRlOnZhciB5PXMuUmYuRmEuSmcuQml0cmF0ZS5kZWNvZGUoZS5XZyk7bCYmdGhpcy5sb2dnZXIuZGVidWcoXCJCSVRSQVRFIElORk8gXCIreS5iaXRyYXRlK1wiIEZST00gXCIreS5ndWlkKSx0aGlzLlRELldqKHkpO2JyZWFrO2Nhc2Ugcy5SZi5FZy5IYXZlczp2YXIgVD1zLlJmLkZhLkpnLkhhdmVzLmRlY29kZShlLldnKTtsJiZ0aGlzLmxvZ2dlci5kZWJ1ZyhcIlJFQ0VJVkVEIEJBVENIIEhBVkVTIEZPUiBGUk9NIFwiK3RoaXMub3RoZXJHdWlkKSx0aGlzLlRELkw2KHRoaXMub3RoZXJHdWlkLFQpO2JyZWFrO2Nhc2Ugcy5SZi5FZy5uZDp2YXIgbT1zLlJmLkZhLkpnLlBlZXJJbmZvTWVzc2FnZS5kZWNvZGUoZS5XZyk7bCYmdGhpcy5sb2dnZXIuZGVidWcoXCJSRUNFSVZFRCBQRUVSIElORk8gRlJPTSBcIit0aGlzLm90aGVyR3VpZCksdGhpcy5URC5YaihtKTticmVhaztjYXNlIHMuUmYuRWcuUGluZzp2YXIgST1zLlJmLkZhLkpnLlBpbmcuZGVjb2RlKGUuV2cpO2wmJnRoaXMubG9nZ2VyLmRlYnVnKFwiUkVDRUlWRUQgUElORyBGUk9NIFwiK3RoaXMub3RoZXJHdWlkKSx0aGlzLlRELk02KEkpO2JyZWFrO2Nhc2Ugcy5SZi5FZy5Qb25nOnZhciBTPXMuUmYuRmEuSmcuUG9uZy5kZWNvZGUoZS5XZyk7bCYmdGhpcy5sb2dnZXIuZGVidWcoXCJSRUNFSVZFRCBQT05HIEZST00gXCIrdGhpcy5vdGhlckd1aWQpLHRoaXMuVEQuRjYoUyk7YnJlYWs7Y2FzZSBzLlJmLkVnLmdnOnZhciBSPXMuUmYuRmEuSmcuTm9QYXJ0bmVycy5kZWNvZGUoZS5XZyk7bCYmdGhpcy5sb2dnZXIuZGVidWcoXCJSRUNFSVZFRCBOT04gUEFSVE5FUiBNRVNTQUdFIEZST00gXCIrdGhpcy5vdGhlckd1aWQpLHRoaXMudkQuVTYodGhpcy5vdGhlckd1aWQsUik7YnJlYWs7ZGVmYXVsdDp0aGlzLmxvZ2dlci53YXJuKFwiVU5LTk9XTiBNRVNTQUdFIFRZUEUgXCIrZS5tc2dJZCl9fWNhdGNoKGUpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBkaXNwYXRjaGluZyBtZXNzYWdlXCIsdGhpcy5sb2dnZXJJZCxlLHUuaHMuV2UuWWUsZSl9fSxlLnByb3RvdHlwZS5MZz1mdW5jdGlvbihlLHQpe3RoaXMueWcuTGcoZSx0aGlzLnN3YXJtSWQsdCl9LGV9KCk7dC5JZz1kfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cig0OCksbj1yKDM1KSxzPXIoNCksbz1yKDI1KSxhPXIoMCksaD1yKDcpLGM9cigxNjUpLHU9cig1KSxsPXIoOTUpLHA9cigxKSxkPXIoMiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMubG9nZ2VySWQ9XCJbRnJhZ21lbnRSZXF1ZXN0ZXJdIFwiLHRoaXMuQjY9bmV3IGksdGhpcy5INj1uZXcgaSx0aGlzLng2PW51bGwsdGhpcy51Zz1vLlJmLnVnLHRoaXMuU2c9ZSx0aGlzLm90aGVyR3VpZD10LHRoaXMudkQ9ci52RCx0aGlzLnlEPXIueUQsdGhpcy5OZz1hLkZyYW1ld29yay5yZXNvbHZlKGEuRnJhbWV3b3JrLlYuRiksdGhpcy5sb2dnZXI9YS5GcmFtZXdvcmsucmVzb2x2ZShhLkZyYW1ld29yay5WLlIpLmxvZyhyLnNlc3Npb25JZCl9cmV0dXJuIGUucHJvdG90eXBlLnNldFJlcG9ydGluZ0d1aWQ9ZnVuY3Rpb24oZSl7dGhpcy5xNj1lfSxlLnByb3RvdHlwZS5EZz1mdW5jdGlvbigpe3JldHVybiEoMD09PXRoaXMuQjYua2V5cygpLmxlbmd0aCYmbnVsbD09PXRoaXMueDYpfSxlLnByb3RvdHlwZS5HNj1mdW5jdGlvbihlKXt2YXIgdD1uZXcgby5SZi5GYS5KZy5SZXF1ZXN0O3RyeXt0LmZyYWdtZW50SWQ9ZS5aZigpLHQudHJhbnNmZXJJZD1lLlBrLHRoaXMudWcmJnRoaXMubG9nZ2VyLmRlYnVnKFwiSU5JVElBVElORyBUUi1cIitlLlBrK1wiIFRJTUVPVVQ6IFwiK2UuVjYrXCIgRlJBR01FTlQ6IFwiK2UuWmYoKStcIiBGUk9NOiBcIit0aGlzLm90aGVyR3VpZCksdGhpcy5CNi5zZXQoZS5QayxlKSx0aGlzLkg2LnNldChlLlBrLGEuRnJhbWV3b3JrLnRpbWUoKSl9Y2F0Y2goZSl7cC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGNvbnN0cnVjdGluZyBmcmFnbWVudCByZXF1ZXN0IG1lc3NhZ2VcIix0aGlzLmxvZ2dlcklkLGQuaHMuWmkuUWkse2RldGFpbGVkRXJyb3I6ZSxvdGhlckd1aWQ6dGhpcy5vdGhlckd1aWR9KSx0PW51bGx9dHJ5e3QmJmUueHEud2ouTGcoby5SZi5FZy5SZXF1ZXN0LHQpfWNhdGNoKGUpe3AuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzZW5kaW5nIGZyYWdtZW50IHJlcXVlc3RcIix0aGlzLmxvZ2dlcklkLGQuaHMuWmkuS2kse2RldGFpbGVkRXJyb3I6ZSxvdGhlckd1aWQ6dGhpcy5vdGhlckd1aWR9KX19LGUucHJvdG90eXBlLkE2PWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1lLnRyYW5zZmVySWQscj1lLmRhdGEueUEoKSxpPWUuY2h1bmtTaXplLG49ZS50b3RhbFNpemUscz1lLmhlYWRlcnM7aWYodGhpcy51ZyYmdGhpcy5sb2dnZXIuZGVidWcoXCJSQ1YgQ2h1bmsgXCIrci5ieXRlTGVuZ3RoKSwhdGhpcy5CNi5oYXModCkpcmV0dXJuO251bGw9PXRoaXMueDY/KHRoaXMudWcmJnRoaXMubG9nZ2VyLmRlYnVnKFwiSU5JVElBVEVEIFRSLVwiK3QrXCIsU0laRT1cIituKSx0aGlzLng2PXRoaXMuQjYuZ2V0KHQpLHRoaXMueDYuUGs9dCx0aGlzLmo2KHQsdGhpcy54Ni54cSksbnVsbCE9cz90aGlzLng2LnJlc3BvbnNlSGVhZGVycz1zOnRoaXMubG9nZ2VyLndhcm4oXCJIRUFERVJTIE5VTEwgSU4gRklSU1QgQ0hVTktcIiksdGhpcy52RC52MSh0aGlzLm90aGVyR3VpZCx0aGlzLng2LGksbiksdGhpcy54Ni5RZj1pLGEuRnJhbWV3b3JrLkMoKXx8KHRoaXMueDYuamY9cikpOih0aGlzLmo2KHQsdGhpcy54Ni54cSksdGhpcy54Ni5RZis9aSxhLkZyYW1ld29yay5DKCl8fCh0aGlzLng2LmpmPWgucmMuYXBwZW5kQnVmZmVyKHRoaXMueDYuamYscikpKTt2YXIgbz1hLkZyYW1ld29yay5DKCk/dGhpcy54Ni5RZjp0aGlzLng2LmpmLmJ5dGVMZW5ndGg7aWYodGhpcy51ZyYmdGhpcy5sb2dnZXIuZGVidWcoXCJSRUNFSVZFRCBcIitvK1wiL1wiK24rXCIgVFJJRCBcIit0KSxvPT1uKXt0aGlzLnVnJiZ0aGlzLmxvZ2dlci5kZWJ1ZyhcIlJDViBBTEwgREFUQSBcIitvK1wiIFRSLVwiK3RoaXMueDYuWWYpLHRoaXMueDYucWYuQWY9byxhLkZyYW1ld29yay5jbGVhclRpbWVvdXQodGhpcy54Ni5tRyksdGhpcy5CNi5kZWxldGUodCk7dmFyIGM9YS5GcmFtZXdvcmsudGltZSgpLXRoaXMuSDYuZ2V0KHQpO3RoaXMubG9nZ2VyLmRlYnVnKFwiUkNWIEFMTCBEQVRBIEZST00gXCIrdGhpcy5vdGhlckd1aWQrXCIgQUZURVIgXCIrYytcIiBtc2Vjb25kc1wiKSx0aGlzLkg2LmRlbGV0ZSh0KSx0aGlzLnZELlVEKHQsdGhpcy54NiksdGhpcy54Nj1udWxsfX1jYXRjaChlKXtwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgcmVjZWl2aW5nIGNodW5rXCIsdGhpcy5sb2dnZXJJZCxkLmhzLlppLllpLHtkZXRhaWxlZEVycm9yOmUsb3RoZXJHdWlkOnRoaXMub3RoZXJHdWlkfSl9fSxlLnByb3RvdHlwZS5qNj1mdW5jdGlvbihlLHQpe3RyeXt0aGlzLnVnJiZ0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNFTkQgQUNLIFwiK2UrXCIgVE8gXCIrdGhpcy5vdGhlckd1aWQpO3ZhciByPW5ldyBvLlJmLkZhLkpnLkFjaztyLnRyYW5zZmVySWQ9ZSx0LndqLkxnKG8uUmYuRWcuQWNrLHIpfWNhdGNoKGUpe3AuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzZW5kaW5nIGFja1wiLHRoaXMubG9nZ2VySWQsZC5ocy5aaS5XaSx7ZGV0YWlsZWRFcnJvcjplLG90aGVyR3VpZDp0aGlzLm90aGVyR3VpZH0pfX0sZS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXMuZGVmZXIoKTtyZXR1cm4gbnVsbCE9dGhpcy54NiYmdGhpcy5RNih0aGlzLng2LlBrKSx0aGlzLkI2LmtleXMoKS5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5RNihlKX0pLHIucmVzb2x2ZShsLnhWLkpxKSxyLlNzfSxlLnByb3RvdHlwZS5RNj1mdW5jdGlvbihlKXt0cnl7aWYodGhpcy5CNi5oYXMoZSkpe3ZhciB0PXRoaXMuQjYuZ2V0KGUpO3QucWYuQWY9dC5RZix0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNFTkQgQ0FOQ0VMIEZPUiBcIitlK1wiIFRPIFwiK3RoaXMub3RoZXJHdWlkKSx0aGlzLkg2LmRlbGV0ZShlKTt2YXIgcj1uZXcgby5SZi5GYS5KZy5DYW5jZWw7ci50cmFuc2ZlcklkPWUsdC54cS53ai5MZyhvLlJmLkVnLkNhbmNlbCxyKSxudWxsIT09dGhpcy54NiYmdGhpcy54Ni4kZigpPT09dC4kZigpJiYodGhpcy54Nj1udWxsKSx0aGlzLkI2LmRlbGV0ZShlKX1lbHNlIHAuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjbGVhbmluZyB1cCBhIG5vdCBwZW5kaW5nIHRyYW5zZmVyXCIsdGhpcy5sb2dnZXJJZCxkLmhzLlppLnppKX1jYXRjaChlKXtwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2VuZGluZyBzdG9wIHRyYW5zZmVyXCIsdGhpcy5sb2dnZXJJZCxkLmhzLlppLkppLHtkZXRhaWxlZEVycm9yOmUsb3RoZXJHdWlkOnRoaXMub3RoZXJHdWlkfSl9fSxlfSgpO3QuQzY9Zjt2YXIgZz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbil7dGhpcy5sb2dnZXJJZD1cIltGcmFnbWVudFNlbmRlcl0gXCIsdGhpcy51Zz1vLlJmLnVnLHRoaXMuSzY9bnVsbCx0aGlzLlk2PW5ldyBBcnJheSx0aGlzLlc2PW5ldyBpLHRoaXMuejY9MCx0aGlzLmNsb3NlPW51bGwsdGhpcy5TZz1lLHRoaXMub3RoZXJHdWlkPXQsdGhpcy5KNj1yLnFKLHRoaXMud2o9bix0aGlzLklEPXIuSUQsdGhpcy5sb2dnZXI9YS5GcmFtZXdvcmsucmVzb2x2ZShhLkZyYW1ld29yay5WLlIpLmxvZyhyLnNlc3Npb25JZCksdGhpcy5OZz1hLkZyYW1ld29yay5yZXNvbHZlKGEuRnJhbWV3b3JrLlYuRil9cmV0dXJuIGUucHJvdG90eXBlLnNldFJlcG9ydGluZ0d1aWQ9ZnVuY3Rpb24oZSl7dGhpcy5xNj1lfSxlLnByb3RvdHlwZS5YNj1mdW5jdGlvbihlLHQscixpLG4pe3ZhciBzPXRoaXM7dGhpcy51ZyYmdGhpcy5sb2dnZXIuaW5mbyhcIlNFTkQgRlJBR01FTlQgXCIrZStcIiBUTyBcIit0aGlzLm90aGVyR3VpZCk7dHJ5e3ZhciBvPW5ldyBjLlo2O28udHJhbnNmZXJJZD10LG8uZnJhZ21lbnRJZD1lLG8uZTg9bixvLmhlYWRlcnM9aSxvLnQ4PXIsby5yOD1NYXRoLmNlaWwoby50OC91LmhoLkZhLkRhKSxvLm44PTAsdGhpcy5ZNi5wdXNoKG8pLHRoaXMudWcmJnRoaXMuWTYuZm9yRWFjaChmdW5jdGlvbihlKXtzLmxvZ2dlci5kZWJ1ZyhzLm90aGVyR3VpZCtcIiBQRU5ESU5HIE9VVCBcIitlKX0pfWNhdGNoKGUpe3AuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjb25zdHJ1Y3RpbmcgY2h1bmsgcmVzcG9uc2VcIix0aGlzLmxvZ2dlcklkLGQuaHMuaW4uJGkse2RldGFpbGVkRXJyb3I6ZSxvdGhlckd1aWQ6dGhpcy5vdGhlckd1aWR9KX1udWxsPT09dGhpcy5LNj90aGlzLnM4KCk6dGhpcy51ZyYmdGhpcy5sb2dnZXIuZGVidWcodGhpcy5vdGhlckd1aWQrXCIgT1VUIE1TRyBOT1QgTlVMTFwiKX0sZS5wcm90b3R5cGUuTzY9ZnVuY3Rpb24oZSl7dGhpcy51ZyYmdGhpcy5sb2dnZXIuZGVidWcoXCJPTkdPSU5HIFwiK2UrXCIgR09UIEFDS1wiKSxudWxsIT09dGhpcy5LNiYmdGhpcy5LNi50cmFuc2ZlcklkLnRvU3RyaW5nKCk9PT1lLnRvU3RyaW5nKCk/dGhpcy5vOCghMSk6cC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJlY2VpdmluZyBhY2sgZm9yIHVua25vd24gdHJhbnNmZXJcIix0aGlzLmxvZ2dlcklkLGQuaHMuaW4ucm4pfSxlLnByb3RvdHlwZS5ONj1mdW5jdGlvbihlKXtudWxsIT10aGlzLks2JiZ0aGlzLks2LnRyYW5zZmVySWQ9PT1lPyh0aGlzLmxvZ2dlci5kZWJ1ZyhcIkdPVCBDQU5DRUwgRk9SIE9OR09JTkcgVFItXCIrZSksdGhpcy5sb2dnZXIuZGVidWcoXCJUUkFOU1BPUlQgQ0FOQ0VMIFNUQVRTIFwiK3RoaXMuU2crXCIsXCIrdGhpcy5vdGhlckd1aWQrXCIsXCIrZSksdGhpcy5XNi5kZWxldGUoZSksMCE9dGhpcy5LNi5uOD90aGlzLko2LmE4KHRoaXMub3RoZXJHdWlkLHRoaXMucTYsdGhpcy5LNi5uOCx0aGlzLks2LnQ4KTp0aGlzLko2Lmg4KHRoaXMub3RoZXJHdWlkLHRoaXMucTYsdGhpcy5LNi50OCksdGhpcy5LNj1udWxsLHRoaXMuczgoKSk6dGhpcy5ZNj10aGlzLlk2LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFuc2ZlcklkIT09ZX0pfSxlLnByb3RvdHlwZS5zOD1mdW5jdGlvbigpe3RyeXtpZihudWxsPT09dGhpcy5LNiYmMCE9PXRoaXMuWTYubGVuZ3RoKXt2YXIgZT10aGlzLlk2LnNoaWZ0KCk7dGhpcy5LNj1lLHRoaXMudWcmJnRoaXMubG9nZ2VyLmRlYnVnKFwiREFUQSBUTyBTRU5EIExFTkdUSCBcIit0aGlzLks2LnQ4K1wiIElOIFwiK3RoaXMuSzYucjgrXCIgQ0hVTktTIFdJVEggVFItXCIrdGhpcy5LNi50cmFuc2ZlcklkKSx0aGlzLm84KCEwKX19Y2F0Y2goZSl7cC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHN0YXJ0IHNlbmRpbmcgY2h1bmtzXCIsdGhpcy5sb2dnZXJJZCxkLmhzLmluLmVuLGUpLHRoaXMua2coKX19LGUucHJvdG90eXBlLm84PWZ1bmN0aW9uKGUpe2UmJih0aGlzLlc2LnNldCh0aGlzLks2LnRyYW5zZmVySWQsYS5GcmFtZXdvcmsudGltZSgpKSx0aGlzLno2PXRoaXMuSzYucjgpO3RyeXtpZihudWxsIT10aGlzLks2KWlmKDA9PT10aGlzLks2LnI4KXRoaXMubG9nZ2VyLmRlYnVnKFwiRklOSVNIRUQgU0VORElORyBUUkFOU0ZFUiBcIit0aGlzLks2LnRyYW5zZmVySWQrXCIgV0lUSCBcIit0aGlzLks2Lm44K1wiIEJZVEVTXCIpLHRoaXMuVzYuZGVsZXRlKHRoaXMuSzYudHJhbnNmZXJJZCksdGhpcy5KNi5jOCh0aGlzLm90aGVyR3VpZCx0aGlzLnE2LHRoaXMuSzYudDgpLHRoaXMuSzY9bnVsbCx0aGlzLnU4KCksdGhpcy5zOCgpO2Vsc2V7dGhpcy51ZyYmdGhpcy5sb2dnZXIuZGVidWcoXCJBIENIVU5LXCIpO3ZhciB0PU1hdGgubWluKHRoaXMuSzYubjgrdS5oaC5GYS5EYSx0aGlzLks2LnQ4KSxyPXQtdGhpcy5LNi5uOCxpPW5ldyBvLlJmLkZhLkpnLkNodW5rO2lmKGkudHJhbnNmZXJJZD10aGlzLks2LnRyYW5zZmVySWQsaS50b3RhbFNpemU9dGhpcy5LNi50OCxpLmNodW5rU2l6ZT1yLGUmJm51bGwhPXRoaXMuSzYuaGVhZGVycyYmKGkuaGVhZGVycz10aGlzLks2LmhlYWRlcnMpLGEuRnJhbWV3b3JrLkMoKXx8bnVsbD09dGhpcy5LNi5lOClpLmRhdGE9bi53cmFwKG5ldyBBcnJheUJ1ZmZlcigwKSk7ZWxzZSBpZihpLmRhdGE9dGhpcy5JRC5sOCh0aGlzLks2LmZyYWdtZW50SWQsdGhpcy56Ni10aGlzLks2LnI4KSxudWxsPT1pLmRhdGEpe3ZhciBzPXRoaXMuSzYuZTguc2xpY2UodGhpcy5LNi5uOCx0KTtpLmRhdGE9bi53cmFwKHMpfXRoaXMuSzYubjg9dGhpcy5LNi5uOCtyLHRoaXMud2ouTGcoby5SZi5FZy5DaHVuayxpKSx0aGlzLnVnJiZ0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNORCBbXCIrdGhpcy5LNi5uOCtcIi1cIisodGhpcy5LNi5uOCtyKStcIi9cIit0aGlzLks2LnQ4K1wiXSBUTyBcIit0aGlzLm90aGVyR3VpZCtcIiBPRiBUUi1cIit0aGlzLks2LnRyYW5zZmVySWQpLHRoaXMuSzYucjgtLX1lbHNlIHRoaXMubG9nZ2VyLmRlYnVnKFwiTk8gTUVTU0FHRSBUTyBTRU5EXCIpfWNhdGNoKGUpe3AuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzZW5kaW5nIGNodW5rXCIsdGhpcy5sb2dnZXJJZCxkLmhzLmluLnRuLHtkZXRhaWxlZEVycm9yOmUsb3RoZXJHdWlkOnRoaXMub3RoZXJHdWlkfSksdGhpcy5rZygpfX0sZS5wcm90b3R5cGUuRGc9ZnVuY3Rpb24oKXtyZXR1cm4hKDA9PT10aGlzLlk2Lmxlbmd0aCYmbnVsbD09PXRoaXMuSzYpfSxlLnByb3RvdHlwZS5QNj1mdW5jdGlvbigpe3ZhciBlPXMuZGVmZXIoKTtyZXR1cm4gdGhpcy5ZNi5sZW5ndGg9MCx0aGlzLkRnKCk/dGhpcy5jbG9zZT1lOmUucmVzb2x2ZShcIkNMT1NFXCIpLGUuU3N9LGUucHJvdG90eXBlLnU4PWZ1bmN0aW9uKCl7dGhpcy5jbG9zZSYmdGhpcy5jbG9zZS5yZXNvbHZlKFwiQ0xPU0VEXCIpfSxlLnByb3RvdHlwZS5rZz1mdW5jdGlvbigpe3RoaXMuSzY9bnVsbH0sZX0oKTt0Ll82PWd9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmhlYWRlcnM9bnVsbH1yZXR1cm4gZX0oKTt0Llo2PWl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDMpLG49cigwKSxzPXIoNSksbz1yKDE1KSxhPXIoMiksaD1yKDEpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLHMsYSxoKXt0aGlzLmxvZ2dlcklkPVwiW1BhcnRuZXJdIFwiLHRoaXMucDg9MCx0aGlzLmQ4PTAsdGhpcy5mOD0wLHRoaXMuZzg9bmV3IEFycmF5LHRoaXMuRTg9bmV3IEFycmF5LHRoaXMuQjY9bmV3IGksdGhpcy5sb2dnZXI9cyx0aGlzLndqPXIsdGhpcy5ndWlkPWUsdGhpcy5Faz1oLHRoaXMudjg9YSx0aGlzLktNPXQsdGhpcy5nUT1uLkZyYW1ld29yay5yZXNvbHZlKG8ucXUua3UpLHRoaXMudlE9bi5GcmFtZXdvcmsucmVzb2x2ZShvLnF1Lmt1KSx0aGlzLnk4PW4uRnJhbWV3b3JrLnRpbWUoKX1yZXR1cm4gZS5wcm90b3R5cGUuRGo9ZnVuY3Rpb24oZSl7dGhpcy5yZXBvcnRpbmdHdWlkPWUsdGhpcy53aiYmKHRoaXMud2oucmVjZWl2ZXIuc2V0UmVwb3J0aW5nR3VpZCh0aGlzLnJlcG9ydGluZ0d1aWQpLHRoaXMud2ouc2VuZGVyLnNldFJlcG9ydGluZ0d1aWQodGhpcy5yZXBvcnRpbmdHdWlkKSl9LGUucHJvdG90eXBlLlQ4PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1NYXRoLm1heCgxLHQpO2ZvcihyJiYodGhpcy5kOCs9aSx0aGlzLnA4Kz1lKTt0aGlzLmc4Lmxlbmd0aD5zLmhoLk9hLndhOyl0aGlzLmc4LnBvcCgpO3ZhciBuPWUvaTt0aGlzLmc4LnVuc2hpZnQobil9LGUucHJvdG90eXBlLm04PWZ1bmN0aW9uKGUpe3RoaXMuQjYuaGFzKGUpP3RoaXMubG9nZ2VyLndhcm4odGhpcy5ndWlkK1wiIERVUExJQ0FURSB7fSBQRU5ESU5HIFJFUVVFU1RTIFwiK2UpOnRoaXMuQjYuc2V0KGUsbi5GcmFtZXdvcmsudGltZSgpKX0sZS5wcm90b3R5cGUuSTg9ZnVuY3Rpb24oZSx0LHIsaSxzLG8pe3RyeXtpZih0aGlzLkI2LmhhcyhlKSl7dmFyIGM9dGhpcy5CNi5nZXQoZSksdT1uLkZyYW1ld29yay50aW1lKCktYzt0aGlzLkI2LmRlbGV0ZShlKSxpJiZ0aGlzLlQ4KHQsdSwhMCksdGhpcy5nUS5zdWNjZXNzKHQpLHRoaXMuS00uUzgodGhpcy5yZXBvcnRpbmdHdWlkLHQscixzLG8pfWVsc2UgaC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGNvbXBsZXRpbmcgYSBub24tZXhpc3RpbmcgcmVxdWVzdFwiLHRoaXMubG9nZ2VySWQsYS5ocy5Ebi5fbix7b3RoZXJHdWlkOnRoaXMuZ3VpZCxxNjp0aGlzLnJlcG9ydGluZ0d1aWR9KX1jYXRjaChlKXtoLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgaGFuZGxpbmcgcmVxdWVzdCBjb21wbGV0ZWRcIix0aGlzLmxvZ2dlcklkLGEuaHMuRG4uQ24se2RldGFpbGVkRXJyb3I6ZSxvdGhlckd1aWQ6dGhpcy5ndWlkLHE2OnRoaXMucmVwb3J0aW5nR3VpZH0pfX0sZS5wcm90b3R5cGUuUjg9ZnVuY3Rpb24oZSx0LHIsaSxuLG8pe3RyeXtpZih0aGlzLkI2LmhhcyhlKSl7dmFyIGM9dGhpcy5CNi5nZXQoZSk7dGhpcy5CNi5kZWxldGUoZSkscy5oaC5PYS5iYT90aGlzLlQ4KHQsYywhMCk6dGhpcy5UOCgwLGMsITApLHRoaXMuZ1EudzgodCxpKSx0aGlzLktNLmI4KHRoaXMucmVwb3J0aW5nR3VpZCx0LHIsaSxuLG8pfWVsc2UgaC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHBhcnRpYWxseSBmYWlsZWQgYSBub24tZXhpc3RpbmcgcmVxdWVzdFwiLHRoaXMubG9nZ2VySWQsYS5ocy5Ebi5Bbix7b3RoZXJHdWlkOnRoaXMuZ3VpZCxxNjp0aGlzLnJlcG9ydGluZ0d1aWR9KX1jYXRjaChlKXtoLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgaGFuZGxpbmcgcmVxdWVzdCBwYXJ0aWFsbHkgZmFpbGVkIFwiLHRoaXMubG9nZ2VySWQsYS5ocy5Ebi5Qbix7ZGV0YWlsZWRFcnJvcjplLG90aGVyR3VpZDp0aGlzLmd1aWR9KX19LGUucHJvdG90eXBlLl9rPWZ1bmN0aW9uKGUsdCxyKXt0cnl7aWYodGhpcy5CNi5oYXMoZSkpe3ZhciBpPXRoaXMuQjYuZ2V0KGUpO3RoaXMuQjYuZGVsZXRlKGUpLHRoaXMuVDgoMCxpLCEwKSx0aGlzLmdRLmxsKCksdGhpcy5LTS5DOCh0aGlzLnJlcG9ydGluZ0d1aWQscix0KX1lbHNlIGguRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBmYWlsZWQgYSBub24tZXhpc3RpbmcgcmVxdWVzdFwiLHRoaXMubG9nZ2VySWQsYS5ocy5Ebi5Obix7b3RoZXJHdWlkOnRoaXMuZ3VpZCxxNjp0aGlzLnJlcG9ydGluZ0d1aWR9KX1jYXRjaChlKXtoLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgaGFuZGxpbmcgcmVxdWVzdCBmYWlsZWQgXCIsdGhpcy5sb2dnZXJJZCxhLmhzLkRuLk9uLHtkZXRhaWxlZEVycm9yOmUsb3RoZXJHdWlkOnRoaXMuZ3VpZH0pfX0sZS5wcm90b3R5cGUuXzg9ZnVuY3Rpb24oZSx0KXt0aGlzLktNLlA4KGUsdCwhMCl9LGUucHJvdG90eXBlLkE4PWZ1bmN0aW9uKGUsdCl7dGhpcy5LTS5POChlLHQsITApfSxlLnByb3RvdHlwZS5OOD1mdW5jdGlvbihlLHQscil7dGhpcy5LTS5EOChlLHQsciwhMCl9LGUucHJvdG90eXBlLms4PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nOC5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0fSwwKTtyZXR1cm4gdGhpcy5nOC5sZW5ndGg+MD9lL3RoaXMuZzgubGVuZ3RoOjB9LGUucHJvdG90eXBlLkw4PWZ1bmN0aW9uKGUpe3RoaXMuZjg9ZX0sZS5wcm90b3R5cGUuTTg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mOH0sZS5wcm90b3R5cGUuSWo9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5Fay5JaigpfSxlfSgpO3QuUGFydG5lcj1jfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigzNSksbj1yKDMpLHM9cigwKSxvPXIoMTApLGE9cigyNSksaD1yKDUpLGM9cigxKSx1PXIoMTY4KSxsPXIoMikscD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmpNPVwiW1BBUlRORVJTSElQXSBcIix0aGlzLmFqPW5ldyBuLHRoaXMuZ0I9bmV3IG4sdGhpcy5kQj1uZXcgbix0aGlzLmZCPW5ldyBuLHRoaXMuRjg9ITEsdGhpcy5VOD0hMSx0aGlzLkI4PSEwLHRoaXMuYWN0aXZlPSExLHRoaXMuSDgoKSx0aGlzLmxqPVtdfXJldHVybiBlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyPXMuRnJhbWV3b3JrLnJlc29sdmUocy5GcmFtZXdvcmsuVi5SKS5sb2coZS5zZXNzaW9uSWQpLHRoaXMueUQ9ZS55RCx0aGlzLnNDPWUuc0MsdGhpcy51cGxvYWRTY29yZT1lLnVwbG9hZFNjb3JlLHRoaXMuZ0Q9ZS5nRCx0aGlzLnlqPWUuWU19LGUucHJvdG90eXBlLnNqPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9qKGUucGVlckluZm8uZ3VpZCl9LGUucHJvdG90eXBlLl9qPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmZCLmhhcyhlKXx8dGhpcy5kQi5oYXMoZSl9LGUucHJvdG90eXBlLiRqPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRCLmhhcyhlKT90aGlzLmRCLmdldChlKTp0aGlzLmZCLmdldChlKX0sZS5wcm90b3R5cGUucmo9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMueGooZS5wZWVySW5mby5ndWlkKX0sZS5wcm90b3R5cGUueGo9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ0IuaGFzKGUpfHx0aGlzLmFqLmhhcyhlKX0sZS5wcm90b3R5cGUucWo9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ0IuaGFzKGUpP3RoaXMuZ0IuZ2V0KGUpOnRoaXMuYWouZ2V0KGUpfSxlLnByb3RvdHlwZS5Maj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RyeXt2YXIgcj10aGlzLnlELng4KCk7aWYodGhpcy5COCYmIXIpaWYodGhpcy5faihlKSl7dmFyIGk9dGhpcy4kaihlKSxuPXRoaXMudXBsb2FkU2NvcmUucTgoITEpLHM9W107dGhpcy5zQy5WcSh0aGlzLmNvbnRleHQuaXNMaXZlKCkpLnRoZW4oZnVuY3Rpb24ocil7dC5sb2dnZXIuZGVidWcodC5qTStcIlNFTkQgQUxMIEhBVkVTIFRPIFwiK2UrXCIsXCIrci5sZW5ndGgpO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaD0wO2g9dC5jb250ZXh0LmlzTGl2ZSgpP3Jbb10uc2l6ZSgpOnJbb10udG90YWxTaXplO3ZhciBjPXJbb10uemYsdT1uZXcgYS5SZi5GYS5KZy5IYXZlO3Uuc2V0RnJhZ21lbnRJZChjLlpmKCkpLHUuc2V0U2l6ZShoKSx1LnNldFVwbG9hZFNjb3JlKG4pO3ZhciBsPWM7dS5zZXRJZChsLkFfKCkpLHUuc2V0Qml0cmF0ZShsLmJpdHJhdGUpLHUuc2V0RHVyYXRpb24obC5kdXJhdGlvbiksdS5zZXRUeXBlKGwuWGYoKSkscy5wdXNoKHUpfWlmKHMubGVuZ3RoPjApe3ZhciBwPW5ldyBhLlJmLkZhLkpnLkhhdmVzO3Auc2V0SGF2ZShzKSxpLndqLkxnKGEuUmYuRWcuSGF2ZXMscCl9fSl9ZWxzZSBjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2VuZGluZyBhbGwgaGF2ZXMgdG8gcGVlciB3aG8gaXMgbm90IG91dCBwYXJ0bmVyXCIsdGhpcy5qTSxsLmhzLlV0LkN0LHtvdGhlckd1aWQ6ZX0pfWNhdGNoKHQpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzZW5kaW5nIGFsbCBoYXZlc1wiLHRoaXMuak0sbC5ocy5VdC5UdCx7ZGV0YWlsZWRFcnJvcjp0LG90aGVyR3VpZDplfSl9fSxlLnByb3RvdHlwZS5vWj1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyxuPXRoaXMueUQueDgoKTtpZih0aGlzLkI4JiYhbil7dmFyIHM9dGhpcy5kQi52YWx1ZXMoKTt0aGlzLmZCLmZvckVhY2goZnVuY3Rpb24oZSx0KXtzLnB1c2goZSl9KTt2YXIgbz10aGlzLnVwbG9hZFNjb3JlLnE4KCExKTtzLmZvckVhY2goZnVuY3Rpb24obil7KCFyfHxyJiZuLmd1aWQhPXIuZ3VpZCkmJmkuRzgobi53aixlLHQsbyl9KX19LGUucHJvdG90eXBlLkc4PWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMuRjgmJnRoaXMubG9nZ2VyLmRlYnVnKHRoaXMuak0rXCJTRU5EIEhBVkUgVE8gXCIrZS5vdGhlckd1aWQrXCIgRk9SIFwiK3QuWmYoKSk7dHJ5e3ZhciBuPW5ldyBhLlJmLkZhLkpnLkhhdmU7bi5zZXRGcmFnbWVudElkKHQuWmYoKSksbi5zZXRTaXplKHIpLG4uc2V0VXBsb2FkU2NvcmUoaSk7dmFyIHM9dDtuLnNldElkKHMuQV8oKSksbi5zZXRCaXRyYXRlKHMuYml0cmF0ZSksbi5zZXREdXJhdGlvbihzLmR1cmF0aW9uKSxuLnNldFR5cGUocy5YZigpKSxlLkxnKGEuUmYuRWcuSGF2ZSxuKX1jYXRjaCh0KXtjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2VuZGluZyBoYXZlIFwiLHRoaXMuak0sbC5ocy5VdC5JdCx7ZGV0YWlsZWRFcnJvcjp0LG90aGVyR3VpZDplLm90aGVyR3VpZH0pfX0sZS5wcm90b3R5cGUuRDY9ZnVuY3Rpb24oZSx0KXt0cnl7aWYodGhpcy54aihlKSl7dGhpcy5VOCYmdGhpcy5sb2dnZXIuZGVidWcodGhpcy5qTStcIkhBVkUgUkVDRUlWRUQgRlJPTSBcIitlK1wiOiBcIit0LmZyYWdtZW50SWQpO3ZhciByPXRoaXMucWooZSk7ci5MOCh0LmdldFVwbG9hZFNjb3JlKCkpLHRoaXMuZ0QucHV0KHQsciksdGhpcy5jb250ZXh0LnZGKHQpfWVsc2UgYy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJlY2VpdmluZyBoYXZlIGZyb20gdW5rbm93biBwZWVyXCIsdGhpcy5qTSxsLmhzLlV0LlN0LHtvdGhlckd1aWQ6ZX0pfWNhdGNoKHQpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBoYW5kbGluZyByZWNlaXZlZCBoYXZlXCIsdGhpcy5qTSxsLmhzLlV0Lnd0LHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmV9KX19LGUucHJvdG90eXBlLkw2PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0cnl7aWYodGhpcy54aihlKSl7dGhpcy5VOCYmdGhpcy5sb2dnZXIuZGVidWcodGhpcy5qTStcIkJBVENIIEhBVkVTIFJFQ0VJVkVEIEZST00gXCIrZSk7dmFyIGk9dGhpcy5xaihlKTt0LmdldEhhdmUoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2kuTDgoZS5nZXRVcGxvYWRTY29yZSgpKSxyLmdELnB1dChlLGkpfSksdGhpcy5jb250ZXh0LnZGKHQuZ2V0SGF2ZSgpWzBdKX1lbHNlIGMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZWNlaXZpbmcgaGF2ZXMgZnJvbSB1bmtub3duIHBlZXJcIix0aGlzLmpNLGwuaHMuVXQuUnQse290aGVyR3VpZDplfSl9Y2F0Y2godCl7Yy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGhhbmRsaW5nIHJlY2VpdmVkIGhhdmVzXCIsdGhpcy5qTSxsLmhzLlV0LmJ0LHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmV9KX19LGUucHJvdG90eXBlLm1qPWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1uZXcgYS5SZi5GYS5KZy5QaW5nO3QuaWQ9dGhpcy55RC5nZXRJZCgpLHQuc3RhcnRUcz1zLkZyYW1ld29yay50aW1lKCksdGhpcy5sb2dnZXIuZGVidWcodGhpcy5qTStcIlJFUVVFU1QgUElORyBUTyBQRUVSIEdVSUQgXCIrZS5vdGhlckd1aWQpLGUuTGcoYS5SZi5FZy5QaW5nLHQpfWNhdGNoKHQpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZXF1ZXN0aW5nIHBpbmdcIix0aGlzLmpNLGwuaHMuVXQuUHQse2RldGFpbGVkRXJyb3I6dCxvdGhlckd1aWQ6ZS5vdGhlckd1aWR9KX19LGUucHJvdG90eXBlLk02PWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1lLmlkO2lmKCF0aGlzLl9qKHQpKXJldHVybiB2b2lkIGMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZWNlaXZpbmcgcGluZyBmcm9tIGFuIHVua25vd24gcGVlclwiLHRoaXMuak0sbC5ocy5VdC5PdCx7b3RoZXJHdWlkOnR9KTt2YXIgcj0tMTtlLnN0YXJ0VHMmJihyPWUuc3RhcnRUcyksdGhpcy5WOCh0aGlzLiRqKHQpLndqLHIpfWNhdGNoKHQpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBoYW5kbGluZyByZWNlaXZlZCBwaW5nXCIsdGhpcy5qTSxsLmhzLlV0LkF0LHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmUuaWR9KX19LGUucHJvdG90eXBlLkg4PWZ1bmN0aW9uKCl7dHJ5e2Zvcih2YXIgZT1cIlwiLHQ9MDt0PGguaGguRmEuRGE7dCsrKWUrPVN0cmluZy5mcm9tQ2hhckNvZGUoMzMrOTMqTWF0aC5yYW5kb20oKSk7Zm9yKHZhciByPW5ldyBBcnJheUJ1ZmZlcihlLmxlbmd0aCksbj1uZXcgVWludDhBcnJheShyKSxzPWUubGVuZ3RoLHQ9MDt0PHM7dCsrKW5bdF09ZS5jaGFyQ29kZUF0KHQpO3RoaXMuajg9aS53cmFwKG4pfWNhdGNoKGUpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjcmVhdGluZyByYW5kb20gYnVmZmVyIGZvciBwaW5nIHBvbmdcIix0aGlzLmxvZ2dlcixsLmhzLlV0Ll90LGUpfX0sZS5wcm90b3R5cGUuVjg9ZnVuY3Rpb24oZSx0KXt0cnl7dmFyIHI9bmV3IGEuUmYuRmEuSmcuUG9uZztyLmlkPXRoaXMueUQuZ2V0SWQoKSxyLnN0YXJ0VHM9dCx0aGlzLmo4fHx0aGlzLkg4KCksci5kYXRhPXRoaXMuajgsci5kYXRhU2l6ZT1oLmhoLkZhLkRhLHRoaXMubG9nZ2VyLmRlYnVnKHRoaXMuak0rXCJTRU5EIFBPTkcgVE8gUEVFUiBHVUlEIFwiK2Uub3RoZXJHdWlkKSxlLkxnKGEuUmYuRWcuUG9uZyxyKX1jYXRjaCh0KXtjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2VuZGluZyBwb25nXCIsdGhpcy5qTSxsLmhzLlV0Lk50LHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmUub3RoZXJHdWlkfSl9fSxlLnByb3RvdHlwZS5GNj1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9ZS5pZDtpZighdGhpcy54aih0KSlyZXR1cm4gdm9pZCBjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgcmVjZWl2aW5nIGEgcG9uZyBmcm9tIGFuIHVua25vd24gcGVlclwiLHRoaXMuak0sbC5ocy5VdC5EdCx7b3RoZXJHdWlkOnR9KTt2YXIgcj1zLkZyYW1ld29yay50aW1lKCk7aWYoZS5zdGFydFRzJiZlLnN0YXJ0VHM+MCl7dmFyIGk9ci1lLnN0YXJ0VHMsbj10aGlzLnFqKHQpO2UuZGF0YVNpemU9PWUuZGF0YS50YygpLmJ5dGVMZW5ndGg/bi5UOChlLmRhdGFTaXplLGksITApOmMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZWNlaW5nIHBvbmcgd2l0aCB3cm9uZyBkYXRhIHNpemVcIix0aGlzLmpNLGwuaHMuVXQua3Qse290aGVyR3VpZDp0fSl9ZWxzZSBjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgcmVjZWl2aW5nIHBvbmcgd2l0aCB3cm9uZyB0aW1lc3RhbXBcIix0aGlzLmpNLGwuaHMuVXQuTHQse290aGVyR3VpZDp0fSl9Y2F0Y2godCl7Yy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJlY2VpdmluZyBwb25nXCIsdGhpcy5qTSxsLmhzLlV0Lk10LHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmUuaWR9KX19LGUucHJvdG90eXBlLnZCPWZ1bmN0aW9uKCl7dHJ5e3ZhciBlPW5ldyBuO3JldHVybiB0aGlzLlE4KHRoaXMuZ0IsZSksdGhpcy5ROCh0aGlzLmFqLGUpLGV9Y2F0Y2goZSl7cmV0dXJuIGMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBnZXR0aW5nIHBhcnRuZXIgc25hcHNob3RzXCIsdGhpcy5qTSxsLmhzLlV0LkZ0LGUpLG5ldyBufX0sZS5wcm90b3R5cGUuUTg9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2UuZm9yRWFjaChmdW5jdGlvbihlLGkpe3ZhciBuPW5ldyBoaXZlLnNuYXBzaG90cy5QYXJ0bmVyO24uaW5QYXJ0PSEwLG4ub3V0UGFydD1yLl9qKGkpLG4uY29ubkluZm89bmV3IGhpdmUuc25hcHNob3RzLkNvbm5lY3Rpdml0eUluZm87dmFyIHM9dm9pZCAwO2UuRWsucGVlckluZm8ucHVibGljSXBTdHJpbmcmJihzPWUuRWsucGVlckluZm8ucHVibGljSXBTdHJpbmcpO3ZhciBhPXZvaWQgMDtlLkVrLnBlZXJJbmZvLnByaXZhdGVJcFN0cmluZyYmKGE9ZS5Fay5wZWVySW5mby5wcml2YXRlSXBTdHJpbmcpLG4uY29ubkluZm8ucHVibGljSXA9cyxuLmNvbm5JbmZvLnByaXZhdGVJcD1hLG4uY29ubkluZm8uZXh0ZXJuYWxBcz1lLkVrLnBlZXJJbmZvLmV4dGVybmFsQXMsbi5jb25uSW5mby5pbnRlcm5hbEFzPWUuRWsucGVlckluZm8uaW50ZXJuYWxBczt2YXIgaD1yLks4KCk7aC5yYXRlUmVjZWl2ZWQ9ZS5rOCgpLG4ubWV0cmljcz1oLG4udWRwPWUuRWsucGVlckluZm8udHlwZT09by5UYy5XLHQuc2V0KGUucmVwb3J0aW5nR3VpZCxuKX0pfSxlLnByb3RvdHlwZS5wQj1mdW5jdGlvbigpe3JldHVybiBuZXcgdS5ZOCh0aGlzLmdCLmxlbmd0aCx0aGlzLmFqLmxlbmd0aCx0aGlzLmZCLmxlbmd0aCx0aGlzLmRCLmxlbmd0aCl9LGUucHJvdG90eXBlLks4PWZ1bmN0aW9uKCl7dmFyIGU9bmV3IGhpdmUuc25hcHNob3RzLlBhcnRuZXJNZXRyaWNzO3JldHVybiBlLnJhdGVSZWNlaXZlZD0wLGUucmF0ZVNlbnQ9MCxlLmhhbmRzaGFrZURlbGF5PTAsZX0sZX0oKTt0LnJRPXB9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSl7dGhpcy5nQj1lLHRoaXMuRUI9dCx0aGlzLmZCPXIsdGhpcy5kQj1pfXJldHVybiBlfSgpO3QuWTg9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTt0LktnPWl9LGZ1bmN0aW9uKGUsdCl7ZS5pPXtwYWNrYWdlOlwiSGl2ZU1zZ3NcIixtZXNzYWdlczpbe25hbWU6XCJDaHVua1wiLGZpZWxkczpbe3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJpbnQzMlwiLG5hbWU6XCJ0cmFuc2ZlcklkXCIsaWQ6MX0se3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJpbnQzMlwiLG5hbWU6XCJ0b3RhbFNpemVcIixpZDoyfSx7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImludDMyXCIsbmFtZTpcImNodW5rU2l6ZVwiLGlkOjN9LHtydWxlOlwicmVxdWlyZWRcIix0eXBlOlwiYnl0ZXNcIixuYW1lOlwiZGF0YVwiLGlkOjR9LHtydWxlOlwib3B0aW9uYWxcIix0eXBlOlwic3RyaW5nXCIsbmFtZTpcImhlYWRlcnNcIixpZDo1fV19LHtuYW1lOlwiSGF2ZXNcIixmaWVsZHM6W3tydWxlOlwicmVwZWF0ZWRcIix0eXBlOlwiSGF2ZVwiLG5hbWU6XCJoYXZlXCIsaWQ6MX1dfSx7bmFtZTpcIkhhdmVcIixmaWVsZHM6W3tydWxlOlwicmVxdWlyZWRcIix0eXBlOlwic3RyaW5nXCIsbmFtZTpcImZyYWdtZW50SWRcIixpZDoxfSx7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImludDMyXCIsbmFtZTpcInNpemVcIixpZDoyfSx7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImludDMyXCIsbmFtZTpcInR5cGVcIixpZDozfSx7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImludDMyXCIsbmFtZTpcImlkXCIsaWQ6NH0se3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJpbnQzMlwiLG5hbWU6XCJiaXRyYXRlXCIsaWQ6NX0se3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJpbnQzMlwiLG5hbWU6XCJkdXJhdGlvblwiLGlkOjZ9LHtydWxlOlwicmVxdWlyZWRcIix0eXBlOlwiZmxvYXRcIixuYW1lOlwidXBsb2FkU2NvcmVcIixpZDo3fV19LHtuYW1lOlwiUGluZ1wiLGZpZWxkczpbe3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJzdHJpbmdcIixuYW1lOlwiaWRcIixpZDoxfSx7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcInVpbnQ2NFwiLG5hbWU6XCJzdGFydFRzXCIsaWQ6Mn1dfSx7bmFtZTpcIlBvbmdcIixmaWVsZHM6W3tydWxlOlwicmVxdWlyZWRcIix0eXBlOlwic3RyaW5nXCIsbmFtZTpcImlkXCIsaWQ6MX0se3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJieXRlc1wiLG5hbWU6XCJkYXRhXCIsaWQ6Mn0se3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJpbnQzMlwiLG5hbWU6XCJkYXRhU2l6ZVwiLGlkOjN9LHtydWxlOlwicmVxdWlyZWRcIix0eXBlOlwidWludDY0XCIsbmFtZTpcInN0YXJ0VHNcIixpZDo0fV19LHtuYW1lOlwiUmVxdWVzdFwiLGZpZWxkczpbe3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJzdHJpbmdcIixuYW1lOlwiZnJhZ21lbnRJZFwiLGlkOjF9LHtydWxlOlwicmVxdWlyZWRcIix0eXBlOlwiaW50MzJcIixuYW1lOlwidHJhbnNmZXJJZFwiLGlkOjJ9XX0se25hbWU6XCJEb05vdEhhdmVcIixmaWVsZHM6W3tydWxlOlwicmVxdWlyZWRcIix0eXBlOlwiaW50MzJcIixuYW1lOlwidHJhbnNmZXJJZFwiLGlkOjF9XX0se25hbWU6XCJOb1BhcnRuZXJzXCIsZmllbGRzOlt7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImludDMyXCIsbmFtZTpcInRyYW5zZmVySWRcIixpZDoxfV19LHtuYW1lOlwiQ2FuY2VsXCIsZmllbGRzOlt7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImludDMyXCIsbmFtZTpcInRyYW5zZmVySWRcIixpZDoxfV19LHtuYW1lOlwiQWNrXCIsZmllbGRzOlt7cnVsZTpcIm9wdGlvbmFsXCIsdHlwZTpcImludDMyXCIsbmFtZTpcInRyYW5zZmVySWRcIixpZDoxfV19LHtuYW1lOlwiQ2xvc2VcIixmaWVsZHM6W3tydWxlOlwicmVxdWlyZWRcIix0eXBlOlwiaW50MzJcIixuYW1lOlwidHlwZVwiLGlkOjF9XX0se25hbWU6XCJTdHJlYW1DaGFyYWN0ZXJpc3RpY3NcIixmaWVsZHM6W3tydWxlOlwicmVxdWlyZWRcIix0eXBlOlwiaW50MzJcIixuYW1lOlwic3RyZWFtU3RhdGVcIixpZDoxfSx7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImludDMyXCIsbmFtZTpcImJpdHJhdGVcIixpZDoyfSx7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImludDMyXCIsbmFtZTpcImRlbHRhXCIsaWQ6M31dfSx7bmFtZTpcIk91dFBhcnRuZXJzaGlwUmVxdWVzdFwiLGZpZWxkczpbe3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJzdHJpbmdcIixuYW1lOlwiZ3VpZFwiLGlkOjF9LHtydWxlOlwicmVxdWlyZWRcIix0eXBlOlwic3RyaW5nXCIsbmFtZTpcImNvbnRleHRJZFwiLGlkOjJ9LHtydWxlOlwicmVxdWlyZWRcIix0eXBlOlwic3RyaW5nXCIsbmFtZTpcInAycFByb3RvY29sVmVyc2lvblwiLGlkOjN9LHtydWxlOlwib3B0aW9uYWxcIix0eXBlOlwiaW50MzJcIixuYW1lOlwiaW50ZXJuYWxBc1wiLGlkOjR9LHtydWxlOlwib3B0aW9uYWxcIix0eXBlOlwiaW50MzJcIixuYW1lOlwiZXh0ZXJuYWxBc1wiLGlkOjV9LHtydWxlOlwib3B0aW9uYWxcIix0eXBlOlwic3RyaW5nXCIsbmFtZTpcInB1YmxpY0lwU3RyaW5nXCIsaWQ6Nn0se3J1bGU6XCJvcHRpb25hbFwiLHR5cGU6XCJzdHJpbmdcIixuYW1lOlwicHJpdmF0ZUlwU3RyaW5nXCIsaWQ6N30se3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJzdHJpbmdcIixuYW1lOlwicmVwb3J0aW5nR3VpZFwiLGlkOjh9LHtydWxlOlwicmVwZWF0ZWRcIix0eXBlOlwiU3RyZWFtQ2hhcmFjdGVyaXN0aWNzXCIsbmFtZTpcInN0cmVhbUNoYXJhY3RlcmlzdGljc1wiLGlkOjl9XX0se25hbWU6XCJPdXRQYXJ0bmVyc2hpcFJlc3BvbnNlXCIsZmllbGRzOlt7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImludDMyXCIsbmFtZTpcImFjY2VwdFwiLGlkOjF9LHtydWxlOlwib3B0aW9uYWxcIix0eXBlOlwiaW50MzJcIixuYW1lOlwiaW50ZXJuYWxBc1wiLGlkOjJ9LHtydWxlOlwib3B0aW9uYWxcIix0eXBlOlwiaW50MzJcIixuYW1lOlwiZXh0ZXJuYWxBc1wiLGlkOjN9LHtydWxlOlwib3B0aW9uYWxcIix0eXBlOlwic3RyaW5nXCIsbmFtZTpcInB1YmxpY0lwU3RyaW5nXCIsaWQ6NH0se3J1bGU6XCJvcHRpb25hbFwiLHR5cGU6XCJzdHJpbmdcIixuYW1lOlwicHJpdmF0ZUlwU3RyaW5nXCIsaWQ6NX0se3J1bGU6XCJvcHRpb25hbFwiLHR5cGU6XCJzdHJpbmdcIixuYW1lOlwicmVwb3J0aW5nR3VpZFwiLGlkOjZ9LHtydWxlOlwicmVwZWF0ZWRcIix0eXBlOlwiU3RyZWFtQ2hhcmFjdGVyaXN0aWNzXCIsbmFtZTpcInN0cmVhbUNoYXJhY3RlcmlzdGljc1wiLGlkOjd9XX0se25hbWU6XCJQZWVySW5mb01lc3NhZ2VcIixmaWVsZHM6W3tydWxlOlwicmVxdWlyZWRcIix0eXBlOlwic3RyaW5nXCIsbmFtZTpcImd1aWRcIixpZDoxfSx7cnVsZTpcIm9wdGlvbmFsXCIsdHlwZTpcInN0cmluZ1wiLG5hbWU6XCJwdWJsaWNJcFN0cmluZ1wiLGlkOjJ9LHtydWxlOlwib3B0aW9uYWxcIix0eXBlOlwic3RyaW5nXCIsbmFtZTpcInByaXZhdGVJcFN0cmluZ1wiLGlkOjN9LHtydWxlOlwib3B0aW9uYWxcIix0eXBlOlwiaW50MzJcIixuYW1lOlwiaW50ZXJuYWxBc1wiLGlkOjR9LHtydWxlOlwib3B0aW9uYWxcIix0eXBlOlwiaW50MzJcIixuYW1lOlwiZXh0ZXJuYWxBc1wiLGlkOjV9LHtydWxlOlwicmVwZWF0ZWRcIix0eXBlOlwiU3RyZWFtQ2hhcmFjdGVyaXN0aWNzXCIsbmFtZTpcInN0cmVhbUNoYXJhY3RlcmlzdGljc1wiLGlkOjZ9XX0se25hbWU6XCJVRFBIYW5kc2hha2VNZXNzYWdlXCIsZmllbGRzOlt7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcInN0cmluZ1wiLG5hbWU6XCJ1dWlkXCIsaWQ6MX0se3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJzdHJpbmdcIixuYW1lOlwic3RyZWFtSWRcIixpZDoyfSx7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImZsb2F0XCIsbmFtZTpcInVkcFNjb3JlXCIsaWQ6M30se3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJib29sXCIsbmFtZTpcImlzTGVhZGVyXCIsaWQ6NH1dfSx7bmFtZTpcIlVEUEhhbmRzaGFrZVJlc3BvbnNlXCIsZmllbGRzOlt7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcInN0cmluZ1wiLG5hbWU6XCJhY2NlcHRcIixpZDoxfV19LHtuYW1lOlwiVURQU3dpdGNoTGVhZGVyc2hpcFJlcXVlc3RcIixmaWVsZHM6W3tydWxlOlwicmVxdWlyZWRcIix0eXBlOlwic3RyaW5nXCIsbmFtZTpcInV1aWRcIixpZDoxfSx7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcImZsb2F0XCIsbmFtZTpcInVkcFNjb3JlXCIsaWQ6Mn1dfSx7bmFtZTpcIlVEUFN3aXRjaExlYWRlcnNoaXBBY2tcIixmaWVsZHM6W3tydWxlOlwicmVxdWlyZWRcIix0eXBlOlwiYm9vbFwiLG5hbWU6XCJva1wiLGlkOjF9XX0se25hbWU6XCJCaXRyYXRlXCIsZmllbGRzOlt7cnVsZTpcInJlcXVpcmVkXCIsdHlwZTpcInN0cmluZ1wiLG5hbWU6XCJndWlkXCIsaWQ6MX0se3J1bGU6XCJyZXF1aXJlZFwiLHR5cGU6XCJpbnQzMlwiLG5hbWU6XCJiaXRyYXRlXCIsaWQ6Mn1dfV19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cig1KSxuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpLG4pe3RoaXMudWRwU2NvcmU9MCx0aGlzLmNHPSExLHRoaXMuc3RyZWFtSWQ9XCJcIix0aGlzLnV1aWQ9ZSx0aGlzLnVkcFNjb3JlPXQsciYmKHRoaXMuYWRkcmVzcz1yKSxpJiYodGhpcy5jRz1pKSxuJiYodGhpcy5zdHJlYW1JZD1uKX1yZXR1cm4gZS5KRT1mdW5jdGlvbihlLHQpe3ZhciByPTA7cmV0dXJuIHI9ZS51ZHBTY29yZT50LnVkcFNjb3JlPzE6ZS51ZHBTY29yZTx0LnVkcFNjb3JlPy0xOjAsMCE9cj8tcjppLmhoLlVEUEJyb2FkY2FzdC54YT90LnV1aWQubG9jYWxlQ29tcGFyZShlLnV1aWQpOmUudXVpZC5sb2NhbGVDb21wYXJlKHQudXVpZCl9LGV9KCk7dC5oRz1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigzKSxuPXIoNDMpLHM9cigwKSxvPXIoMTUpLGE9cig5KSxoPXIoMTApLGM9cigxKSx1PXIoMiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmxvZ2dlcklkPVwiW1AyUFJlcXVlc3Rlcl0gXCIsdGhpcy5BZz1uZXcgbi5Db3VudGVyLHRoaXMuVzg9bmV3IGksdGhpcy56OD1uZXcgaSx0aGlzLko4PXMuRnJhbWV3b3JrLnJlc29sdmUoby5xdS5OdSl9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9cy5GcmFtZXdvcmsucmVzb2x2ZShzLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy5nRD1lLmdELHRoaXMuVEQ9ZS5URCx0aGlzLkVEPWUuRUQsdGhpcy55RD1lLnlELHRoaXMuS009ZS5ZTSx0aGlzLko4Llg4KGUueUQpfSxlLnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyLmRlYnVnKFwiRlJMIElTU1VFIFJFUSBGT1IgRlJBR01FTlQgXCIrZS56Zi50b1N0cmluZygpK1wiLVwiK2UucWYuQWYrXCIgW1wiK2EudmNbZS5YZigpXStcIl0gVE8gUDJQXCIpLHRoaXMuVzguc2V0KGUuJGYoKSxlKTt2YXIgdD10aGlzLkFnLm5leHQoKTtlLlBrPXQsdGhpcy56OC5zZXQodCxlLiRmKCkpLHRoaXMuTTEoZSl9LGUucHJvdG90eXBlLk0xPWZ1bmN0aW9uKGUpe3ZhciB0PWUuWmYoKSxyPWUuJGYoKSxpPXRoaXMuWjgodCk7ZS5zaXplPXRoaXMuZ0QuUTEodCkuc2l6ZTt2YXIgbj10aGlzLko4LmU1KGksZS50eXBlKTtudWxsIT1uPyh0aGlzLmxvZ2dlci5pbmZvKFwiU0VORCBSRVFVRVNUIFwiK2UuUGsrXCIgRk9SIFwiK3IrXCIgVE8gXCIrbi53ai5vdGhlckd1aWQrXCIgKExBTiBMRUFERVIgXCIrbi5Fay5wZWVySW5mby5pc0xlYWRlcitcIiBpQVMgXCIrbi5Fay5wZWVySW5mby5pbnRlcm5hbEFzK1wiIGVBUyBcIituLkVrLnBlZXJJbmZvLmV4dGVybmFsQXMrXCIgcHJpdmF0ZUlwIFwiK24uRWsucGVlckluZm8ucHJpdmF0ZUlwU3RyaW5nK1wiICkgb3V0IG9mIFwiK2kubGVuZ3RoK1wiIHR5cGUgXCIraC5UY1tuLkVrLnBlZXJJbmZvLnR5cGVdK1wiIHNpemU6XCIrZS5zaXplKSxlLnhxPW4sZS5xcT1uLkVrLnBlZXJJbmZvLGUueHEubTgoZS5QayksZS5xZi5DZj0hMCxlLnFmLk1mPXMuRnJhbWV3b3JrLnRpbWUoKSx0aGlzLktNLnQ1KGUpLHRoaXMuQ2soZSk/bi53ai5yZWNlaXZlci5HNihlKTp0aGlzLl9rKGUuUGssXCJUSU1FRC1PVVRcIikpOihjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2VuZGluZyBwMnAgcmVxdWVzdCBiZWNhdXNlIHdlIGNhbm5vdCBmaW5kIGEgcGFydG5lclwiLHRoaXMubG9nZ2VySWQsdS5ocy5kbi5ubiksdGhpcy5fayhlLlBrLFwiTk8gUEFSVE5FUlMgRk9VTkQgRk9SIFJFUVVFU1RcIikpfSxlLnByb3RvdHlwZS5aOD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9W107dHJ5e3RoaXMuZ0QuZmsoZSkuZm9yRWFjaChmdW5jdGlvbihlKXt0LlRELnhqKGUuZ3VpZCk/ci5wdXNoKGUpOnQubG9nZ2VyLndhcm4oXCJJIEhBVkUgQSBIQVZFIEZST00gQSBOT04gSU4tUEFSVE5FUiBcIitlLmd1aWQpfSl9Y2F0Y2goZSl7Yy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGZpbHRlcmluZyBpbiBwYXJ0bmVyc1wiLHRoaXMubG9nZ2VySWQsdS5ocy5kbi5zbixlKX1maW5hbGx5e3JldHVybiByfX0sZS5wcm90b3R5cGUuQ2s9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSExO3RyeXt2YXIgaT0wO251bGw9PWUuc2l6ZT8oaT10aGlzLmdELlExKGUuWmYoKSkuc2l6ZSx0aGlzLmxvZ2dlci53YXJuKFwicmVxdWVzdCBzaXplIG5vdCBzZXQgLSB0aGlzIHNob3VsZCBub3QgaGFwcGVuXCIpKTppPWUuc2l6ZTt2YXIgbj1lLldmLmRNKCkuYXgoZSxpKTtyZXR1cm4gZS5WNj1uLG4+MCYmKHI9ITAsbnVsbD09ZS5tRyYmKGUubUc9cy5GcmFtZXdvcmsuc2V0VGltZW91dChmdW5jdGlvbigpe3QuS00ucjUoZSksdC5fayhlLlBrLFwiVElNRUQtT1VUXCIpfSxuKSkpLHJ9Y2F0Y2goZSl7cmV0dXJuIGMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzZXR0aW5nIHJlcXVlc3QgdGltZW91dFwiLHRoaXMubG9nZ2VySWQsdS5ocy5kbi5hbixlKSwhMX19LGUucHJvdG90eXBlLl9rPWZ1bmN0aW9uKGUsdCl7dGhpcy5sb2dnZXIuaW5mbyh0K1wiIFwiK2UpO3ZhciByPXRoaXMuaTUoZSwhMCk7dGhpcy5sb2dnZXIuaW5mbyhcIlJFUVVFU1QgXCIrZStcIiBGT1IgXCIrci4kZigpK1wiIEZBSUxFRCBCRUNBVVNFIFwiK3QpLHImJnRoaXMuRUQuR1gocil9LGUucHJvdG90eXBlLmk1PWZ1bmN0aW9uKGUsdCl7dHJ5e2lmKHRoaXMuejguaGFzKGUpKXt2YXIgcj10aGlzLno4LmdldChlKTt0aGlzLno4LmRlbGV0ZShlKTt2YXIgaT10aGlzLlc4LmdldChyKTtpZih0aGlzLlc4LmRlbGV0ZShyKSxzLkZyYW1ld29yay5jbGVhclRpbWVvdXQoaS5tRyksdCYmdGhpcy5URC54aihpLnhxLndqLm90aGVyR3VpZCkpe2kueHEud2oucmVjZWl2ZXIuUTYoZSk7dmFyIG49aS5YZigpPT1hLnZjLmZjOzAhPWkuUWY/aS54cS5SOChpLlBrLGkuUWYsaS5xZi5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCxpLnNpemUsbixpLnR5cGUpOmkueHEuX2soaS5QayxuLGkuc2l6ZSl9cmV0dXJuIGl9cmV0dXJuIGMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjYW5jZWxsaW5nIHJlcXVlc3Qgb24gbm9uIGV4aXN0aW5nIHNlc3Npb25cIix0aGlzLmxvZ2dlcklkLHUuaHMuZG4uY24pLG51bGx9Y2F0Y2goZSl7cmV0dXJuIGMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZW1vdmluZyByZXF1ZXN0XCIsdGhpcy5sb2dnZXJJZCx1LmhzLmRuLmhuLGUpLG51bGx9fSxlLnByb3RvdHlwZS5xWD1mdW5jdGlvbihlKXtpZih0aGlzLlc4LmhhcyhlKSl7dmFyIHQ9dGhpcy5XOC5nZXQoZSkuUGs7dGhpcy5pNSh0LCEwKX19LGUucHJvdG90eXBlLnYxPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMubG9nZ2VyLmRlYnVnKFwiRlJMIERPV05MT0FESU5HIFwiK3QuJGYoKStcIiBGUk9NIFwiK2UrXCIgUDJQXCIpfSxlLnByb3RvdHlwZS5VRD1mdW5jdGlvbihlLHQpe2lmKHRoaXMubG9nZ2VyLmRlYnVnKFwiRlJMIFBST01JU0VEIEZSQUdNRU5UIFwiK3QuJGYoKStcIiBSRVRVUk5FRCBGUk9NIFAyUCBTSVpFIFwiK3QucWYuQWYpLHQ9dGhpcy5pNShlLCExKSl7dC5xZi5VZj1zLkZyYW1ld29yay50aW1lKCk7dmFyIHI9dC5YZigpPT1hLnZjLmZjO3QueHEuSTgodC5Qayx0LnNpemUsdC5xZi5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCwhMCxyLHQudHlwZSksdGhpcy5FRC5qWCh0KX1lbHNlIHRoaXMubG9nZ2VyLndhcm4oXCJUUklFRCBUTyBSRU1PVkUgQSBOT04gRVhJU1RJTkcgUkVRVUVTVCBcIitlK1wiIChUSElTIFNIT1VMRCBOT1QgSEFQUEVOLiBBVCBMRUFTVCBOT1QgVE9PIE9GVEVOKVwiKX0sZS5wcm90b3R5cGUuazY9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRUcmFuc2ZlcklkKCk7aWYodGhpcy56OC5oYXModCkpe2MuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZWNlaXZpbmcgYSBkbyBub3QgaGF2ZSBmb3IgbXkgcmVxdWVzdFwiLHRoaXMubG9nZ2VySWQsdS5ocy5kbi51biksdGhpcy5sb2dnZXIuZGVidWcoXCJETyBOT1QgSEFWRSBSRUNFSVZFRCBGT1IgXCIrdCk7dmFyIHI9dGhpcy5pNSh0LCExKTtpZihyKXt2YXIgaT1yLlhmKCk9PWEudmMuZmM7ci54cS5fayhyLlBrLGksci5zaXplKSx0aGlzLkVELkdYKHIpfX1lbHNlIHRoaXMubG9nZ2VyLndhcm4oXCJVTktOT1dOIERPIE5PVCBIQVZFIFwiK3QpfSxlLnByb3RvdHlwZS5VNj1mdW5jdGlvbihlLHQpe3ZhciByPXQudHJhbnNmZXJJZDtpZih0aGlzLno4LmhhcyhyKSl7Yy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJlamVjdGVkIHJlcXVlc3QgYnkgYSBub24gcGFydG5lclwiLHRoaXMubG9nZ2VySWQsdS5ocy5kbi5wbiksdGhpcy5URC5TaihlKTt2YXIgaT10aGlzLmk1KHIsITEpO2kmJnRoaXMuRUQuR1goaSl9fSxlLnByb3RvdHlwZS5Zcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5XOC5oYXMoZSl9LGV9KCk7dC5MSj1sfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigwKSxuPXIoMjUpLHM9cigxKSxvPXIoMiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmxvZ2dlcklkPVwiW1AyUFJlc3BvbmRlcl0gXCJ9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9aS5GcmFtZXdvcmsucmVzb2x2ZShpLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy5zRz1lLHRoaXMuZ0Q9ZS5nRCx0aGlzLnNDPWUuc0MsdGhpcy5URD1lLlRELHRoaXMudXBsb2FkU2NvcmU9ZS51cGxvYWRTY29yZSx0aGlzLnlEPWUueUQsdGhpcy5LTT1lLllNfSxlLnByb3RvdHlwZS5QTT1mdW5jdGlvbihlLHQscil7dHJ5e2lmKHRoaXMuVEQuX2ooZSkpe3ZhciBpPXRoaXMuVEQuJGooZSk7dGhpcy5uNShlLHQsaSl9ZWxzZSB0aGlzLnM1KGUsdCxyKX1jYXRjaChlKXtzLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igb24gcmVzcG9uZGluZyB0byBwMnAgcmVxdWVzdFwiLHRoaXMubG9nZ2VySWQsby5ocy5tbi5mbixlKX19LGUucHJvdG90eXBlLmM4PWZ1bmN0aW9uKGUsdCxyKXt0cnl7aWYodGhpcy51cGxvYWRTY29yZS5zdWNjZXNzKHIpLHRoaXMuVEQuX2ooZSkpe3ZhciBpPXRoaXMuVEQuJGooZSk7aS52US5zdWNjZXNzKHIpLGkuXzgocix0KX19Y2F0Y2goZSl7cy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIG9uIHJlcXVlc3Qgc2F0aXNmaWVkXCIsdGhpcy5sb2dnZXJJZCxvLmhzLm1uLmduLGUpfX0sZS5wcm90b3R5cGUuYTg9ZnVuY3Rpb24oZSx0LHIsaSl7dHJ5e2lmKHRoaXMudXBsb2FkU2NvcmUudzgocixpKSx0aGlzLlRELl9qKGUpKXt2YXIgbj10aGlzLlRELiRqKGUpO24udlEudzgocixpKSxuLk44KHIsaSx0KX19Y2F0Y2goZSl7cy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIG9uIHJlcXVlc3QgcGFydGlhbGx5IHNhdGlzZmllZFwiLHRoaXMubG9nZ2VySWQsby5ocy5tbi5FbixlKX19LGUucHJvdG90eXBlLmg4PWZ1bmN0aW9uKGUsdCxyKXt0cnl7aWYodGhpcy51cGxvYWRTY29yZS5sbCgpLHRoaXMuVEQuX2ooZSkpe3ZhciBpPXRoaXMuVEQuJGooZSk7aS52US5sbCgpLGkuQTgocix0KX19Y2F0Y2goZSl7cy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIG9uIHJlcXVlc3Qgbm90IHNhdGlzZmllZFwiLHRoaXMubG9nZ2VySWQsby5ocy5tbi52bixlKX19LGUucHJvdG90eXBlLm41PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzO3RoaXMuc0MuZ2V0KHQuZnJhZ21lbnRJZCkudGhlbihmdW5jdGlvbihuKXtuPyhpLmxvZ2dlci5kZWJ1ZyhcIlNFTkRJTkcgVE8gXCIrZStcIixcIit0LmZyYWdtZW50SWQrXCIsXCIrdC50cmFuc2ZlcklkK1wiLFwiK24ubGVuZ3RoK1wiIERMIFwiK24ubGVuZ3RoKSxyLndqLnNlbmRlci5YNih0LmZyYWdtZW50SWQsdC50cmFuc2ZlcklkLG4ubGVuZ3RoLG4uaGVhZGVycyxuLmRhdGEpKTooaS5sb2dnZXIuZGVidWcoXCJSRUNFSVZFRCBSRVFVRVNUIEZPUiBcIit0LmZyYWdtZW50SWQrXCIgRlJPTSBcIitlK1wiIENBTidUIEJFIFNFUlZFRFwiKSxpLm81KHQudHJhbnNmZXJJZCxyKSl9KX0sZS5wcm90b3R5cGUubzU9ZnVuY3Rpb24oZSx0KXt0cnl7dGhpcy5sb2dnZXIuaW5mbyhcIlNFTkQgRE8gTk9UIEhBVkUgXCIrZStcIiBUTyBcIit0LndqLlNnKTt2YXIgcj1uZXcgbi5SZi5GYS5KZy5Eb05vdEhhdmU7ci5zZXRUcmFuc2ZlcklkKGUpLHQud2ouTGcobi5SZi5FZy5Eb05vdEhhdmUscil9Y2F0Y2goZSl7cy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIG9uIHNlbmRpbmcgZG8gbm90IGhhdmVcIix0aGlzLmxvZ2dlcklkLG8uaHMubW4ueW4sZSl9fSxlLnByb3RvdHlwZS5zNT1mdW5jdGlvbihlLHQscil7dHJ5e3RoaXMubG9nZ2VyLndhcm4oXCJHT1QgUkVRVUVTVCBGUk9NIE5PTi1QQVJUTkVSIFwiK2UrXCIgRk9SIFwiK3QuZnJhZ21lbnRJZCk7dmFyIGk9bmV3IG4uUmYuRmEuSmcuTm9QYXJ0bmVycztpLnNldFRyYW5zZmVySWQodC50cmFuc2ZlcklkKSxyLkxnKG4uUmYuRWcuZ2csaSl9Y2F0Y2goZSl7cy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIG9uIHNlbmQgbm8gcGFydG5lcnNcIix0aGlzLmxvZ2dlcklkLG8uaHMubW4uVG4sZSl9fSxlfSgpO3QuTUo9YX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpLG49cig0OCkscz1yKDApLG89cig1KTshZnVuY3Rpb24oZSl7ZVtlLlM9MF09XCJTXCIsZVtlLmE1PTFdPVwiRlwiLGVbZS5oNT0yXT1cIlBGXCJ9KGl8fChpPXt9KSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMudHM9ZX1yZXR1cm4gZX0oKSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuYzU9MCx0aGlzLnU1PTAsdGhpcy5sNT0wLHRoaXMucDU9MCx0aGlzLmQ1PTAsdGhpcy5mNT0wfXJldHVybiBlfSgpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5nNT1uZXcgbn1yZXR1cm4gZS5wcm90b3R5cGUuc3VjY2Vzcz1mdW5jdGlvbihlKXt0aGlzLmV2ZW50KGkuUyxlLGUpfSxlLnByb3RvdHlwZS5sbD1mdW5jdGlvbigpe3RoaXMuZXZlbnQoaS5hNSwwLDApfSxlLnByb3RvdHlwZS53OD1mdW5jdGlvbihlLHQpe3RoaXMuZXZlbnQoaS5oNSxlLHQpfSxlLnByb3RvdHlwZS5ldmVudD1mdW5jdGlvbihlLHQscil7dmFyIGk9bmV3IGEocy5GcmFtZXdvcmsudGltZSgpKTtpLnQ9ZSxpLkU1PXQsaS52NT10L3IsaS55NT0oci10KS9yLHRoaXMuZzUuc2V0KGkudHMsaSksdGhpcy5UNSgpfSxlLnByb3RvdHlwZS5UNT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1zLkZyYW1ld29yay50aW1lKCkscj10LTIqby5oaC5PYS5DYTtpZihyPjApe3ZhciBpPVtdO3RoaXMuZzUuZm9yRWFjaChmdW5jdGlvbihlLHQpe3Q8ciYmaS5wdXNoKHQpfSksaS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuZzUuZGVsZXRlKHQpfSl9fSxlLnByb3RvdHlwZS5mUT1mdW5jdGlvbihlKXt2YXIgdD0wLHI9dGhpcy5tNShlLG8uaGguT2EuQ2EpO2lmKG51bGwhPXIpe3ZhciBpPXIudTUrci5sNStyLnA1O3Q9MD09aT8wOihyLnU1K3IucDUqby5oaC5PYS5fYSkvaX1yZXR1cm4gdH0sZS5wcm90b3R5cGUucTg9ZnVuY3Rpb24oZSl7dmFyIHQ9MCxyPXRoaXMubTUoZSxvLmhoLk9hLkNhKTtpZihudWxsIT1yKXt2YXIgaT1yLnU1K3IubDUrci5wNTt0PTA9PWk/MDooci5sNStyLnA1Km8uaGguT2EuUGEpL2l9cmV0dXJuIHR9LGUucHJvdG90eXBlLkk1PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubTUoITEsZSk7cmV0dXJuIG51bGwhPXQ/dC5jNTowfSxlLnByb3RvdHlwZS5tNT1mdW5jdGlvbihlLHQpe2lmKDAhPXRoaXMuZzUua2V5cygpLmxlbmd0aCl7dmFyIHI9bmV3IGgsbz1zLkZyYW1ld29yay50aW1lKCksYT1vLXQ7YTwwJiYoYT0wKTt2YXIgYz1uZXcgbjtyZXR1cm4gdGhpcy5nNS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dD49YSYmYy5zZXQodCxlKX0pLGMuZm9yRWFjaChmdW5jdGlvbihlLHQpe3N3aXRjaChyLmM1Kz1lLkU1LGUudCl7Y2FzZSBpLlM6ci51NSsrO2JyZWFrO2Nhc2UgaS5hNTpyLmw1Kys7YnJlYWs7ZGVmYXVsdDpyLnA1Kyssci5kNSs9ZS52NSxyLmY1Kz1lLnk1fX0pLHJ9cmV0dXJuIG51bGx9LGV9KCk7Yy5QYT0uMixjLl9hPS4yLHQuRko9Y30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuaHV8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiYoZVtpXT10W2ldKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cigzKSxzPXIoNCksbz1yKDApLGE9cigxNzYpLGg9cigxNzgpLGM9cig5NiksdT1yKDIpLGw9cigxKTt0LlM1fHwodC5TNT17fSk7dmFyIHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdC5sb2dnZXJJZD1cIltIaXZlTmV0d29ya01hbmFnZXJdIFwiLHQuUjU9ITEsdC53NT1uZXcgbix0LkFnPTEsdC5KbD1vLkZyYW1ld29yay5yZXNvbHZlKG8uRnJhbWV3b3JrLlYuTSksdC5iNT1vLkZyYW1ld29yay5yZXNvbHZlKG8uRnJhbWV3b3JrLlYucSksdC5jaGFubmVsTWFuYWdlcj1uZXcgYS5DNSh0LmxvZ2dlcix0LmI1LHQpLHQuYjUuaW5pdCh0LHQubG9nZ2VyLHQuY2hhbm5lbE1hbmFnZXIpLHQuXzUoKSx0fXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07dmFyIGk9by5GcmFtZXdvcmsucmVzb2x2ZShvLkZyYW1ld29yay5WLlIpLmxvZyhlKSxuPW51bGw7cmV0dXJuIDA9PXRoaXMudmwua2V5cygpLmxlbmd0aD8oaS5kZWJ1ZyhcIlRSSUdHRVJJTkcgQ09OTkVDVCBcIiksbj10aGlzLlA1KCksdGhpcy5BNShlLHQpKTooaS5kZWJ1ZyhcIkFMUkVBRFkgQ09OTkVDVEVEIFwiKSxuPXRoaXMuSmwuWmwoKSx0aGlzLkE1KGUsdCksdGhpcy5iNS5zWSgpJiZ0aGlzLk81KHRoaXMuZ2QsZSkpLG59LHQucHJvdG90eXBlLlA1PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW8uRnJhbWV3b3JrLkwuaztyZXR1cm5cImxvY2FsaG9zdFwiPT09dCYmKHQ9XCIxMjcuMC4wLjE6XCIrbG9jYXRpb24ucG9ydCksdGhpcy5sb2dnZXIuZGVidWcoXCJDT05ORUNUSU5HLi5cIiksdGhpcy5KbC5abCgpLnRoZW4oZnVuY3Rpb24ocil7dmFyIGk9ci50cCgpO3JldHVybiBlLmxvZ2dlci5kZWJ1ZyhcIk1ZIElERU5USVRZIFwiLGkpLGUuZ2Q9aSxlLmI1LnN0YXJ0KHQsaSkscn0pfSx0LnByb3RvdHlwZS5ONT1mdW5jdGlvbigpe3JldHVybiBzLnJlc29sdmUobmV3IG4pfSx0LnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1zLmRlZmVyKCk7cmV0dXJuIHRoaXMudzUuaGFzKGUpPyh0aGlzLmxvZ2dlci5kZWJ1ZyhcIkFscmVhZHkgY29ubmVjdGVkIHRvIFwiK2UrXCIsIGlnbm9yaW5nXCIpLHIucmVzb2x2ZSh0aGlzLnc1LmdldChlKSkpOnRoaXMuY2hhbm5lbE1hbmFnZXIuRDUodGhpcy5nZCxlKS50aGVuKGZ1bmN0aW9uKHIpe3JldHVybiB0LmNvbm5lY3RlZChlLHIpfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gci5yZXNvbHZlKGUpfSkuZmFpbChmdW5jdGlvbihpKXtsLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZXN0YWJsaXNoaW5nIGNvbm5lY3Rpb25cIix0LmxvZ2dlcklkLHUuaHMuUGUuYmUse290aGVyR3VpZDplfSksci5yZWplY3QoXCJDT05OIFRPIFwiK2UrXCIgQ0FOTk9UIEJFIEVTVEFCTElTSEVEIFwiKX0pLHIuU3N9LHQucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiEhdGhpcy5jaGFubmVsTWFuYWdlci5zZW5kKGUsdCl8fChsLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2VuZGluZyBtZXNzYWdlIHdpdGhvdXQgY2hhbm5lbCBlc3RhYmxpc2hlZFwiLHRoaXMubG9nZ2VySWQsdS5ocy5QZS5DZSx7b3RoZXJHdWlkOmV9KSx0aGlzLms1KGUpLCExKX0sdC5wcm90b3R5cGUuTDU9ZnVuY3Rpb24oZSx0LHIpe2lmKHRoaXMuUjUmJnRoaXMubG9nZ2VyLmRlYnVnKFwiUkVDIEJVRiBcIityLmJ5dGVMZW5ndGgrXCIgXCIrciksdGhpcy53NS5oYXMoZSkpe3RoaXMuUjUmJnRoaXMubG9nZ2VyLmRlYnVnKFwiUFJPQyBNU0cgRlJPTSBcIitlKTt0aGlzLnc1LmdldChlKS5HZyhyKX1lbHNlIGwuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZWNlaXZpbmcgbXNnIHdpdGhvdXQgaGF2aW5nIGEgY29ubmVjdGlvbiBlc3RhYmxpc2hlZFwiLHRoaXMubG9nZ2VySWQsdS5ocy5QZS5DZSx7b3RoZXJHdWlkOmV9KX0sdC5wcm90b3R5cGUuY29ubmVjdGVkPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy53NS5oYXMoZSkpdGhpcy5sb2dnZXIuZGVidWcoXCJSRUNPTk5FQ1RFRCBUTyBcIitlK1wiLCBSRVNFVFRJTkcgU1RBVEVcIiksdGhpcy53NS5nZXQoZSkucmVzZXQoKTtlbHNle3RoaXMubG9nZ2VyLmluZm8oXCJDT05ORUNURUQgVE8gXCIrZSk7dmFyIHI9dC5wRztyLmluaXQodGhpcy5nZCxlKSx0aGlzLnc1LnNldChlLHIpfXJldHVybiBzLnJlc29sdmUodGhpcy53NS5nZXQoZSkpfSx0LnByb3RvdHlwZS5NNT1mdW5jdGlvbihlLHQpe3RoaXMubG9nZ2VyLmRlYnVnKFwiRkFJTEVEIENPTk4gVE8gXCIrdCksZS5yZWplY3QoXCJDT05OIFRPIFwiK3QrXCIgQ0FOTk9UIEJFIEVTVEFCTElTSEVEIFwiKX0sdC5wcm90b3R5cGUuRjU9ZnVuY3Rpb24oZSx0KXt0aGlzLmxvZ2dlci5pbmZvKGUrXCIgY29ubmVjdGVkIHRvIG1lXCIpLHRoaXMuY29ubmVjdGVkKGUsdCl9LHQucHJvdG90eXBlLms1PWZ1bmN0aW9uKGUpe3RoaXMudzUuaGFzKGUpPyh0aGlzLmxvZ2dlci5pbmZvKFwiQ29ubmVjdGlvbiBjbG9zZWQgdG8gXCIrZSksdGhpcy53NS5kZWxldGUoZSksdGhpcy5VNShlKSk6dGhpcy5sb2dnZXIud2FybihcIlRSWUlORyBUTyBSRU1PVkUgQSBQRUVSIFRIQVQgSVMgTk9UIFRIRVJFOiBcIitlKX0sdC5wcm90b3R5cGUuXzU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2MuaFEublEmJm8uRnJhbWV3b3JrLnNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIHQ9by5GcmFtZXdvcmsudGltZSgpO2UudzUuZm9yRWFjaChmdW5jdGlvbihyLGkpe3ZhciBuPXQtci56ZygpO24+Yy5oUS5vUSYmKGUubG9nZ2VyLmRlYnVnKFwiY2xvc2luZyBzdGFsZSBjb25uZWN0aW9uIHRvIFwiK2krXCIgW3VudXNlZCBmb3I6IFwiK24rXCJtc11cIiksZS5kaXNjb25uZWN0KGkpKX0pfSxjLmhRLnNRKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbihlKXtvLkZyYW1ld29yay5yZXNvbHZlKG8uRnJhbWV3b3JrLlYuUikubG9nKGUpLmRlYnVnKFwiU1RPUFBJTkcgQ09OTkVDVElPTlMgQU5EIFJFTU9WSU5HIExJU1RFTkVSU1wiKSx0aGlzLkI1KGUpfSx0LnByb3RvdHlwZS5INT1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbihlKXt0aGlzLnc1LmhhcyhlKSYmdGhpcy5jaGFubmVsTWFuYWdlci5kaXNjb25uZWN0KGUpfSx0fShoLng1KTtwLiRhPVwiYXZhaWxhYmxlU2VuZFJhdGVcIixwLmVoPVwicmVtb3RlQWRkcmVzc1wiLHAudGg9XCJsb2NhbEFkZHJlc3NcIix0LkNKPXB9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDQpLG49cigwKSxzPXIoMTc3KSxvPXIoOTYpLGE9cigyKSxoPXIoMSksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMubG9nZ2VyPWUsdGhpcy5iNT10LHRoaXMucTU9cix0aGlzLmxvZ2dlcklkPVwiW0NoYW5uZWxNYW5hZ2VyXSBcIix0aGlzLkc1PXtpY2VTZXJ2ZXJzOlt7dXJsOlwic3R1bjpzdHVuLmhpdmVzdHJlYW1pbmcuY29tOjM0NzhcIn1dfSx0aGlzLkFnPTEsdGhpcy5WNT1udWxsLHRoaXMuajU9e30sdGhpcy5RNT17fX1yZXR1cm4gZS5wcm90b3R5cGUuRDU9ZnVuY3Rpb24oZSx0KXt2YXIgcj1udWxsO2lmKHQgaW4gdGhpcy5RNSl7dmFyIG49aS5kZWZlcigpO24ucmVqZWN0KFwiT1RIRVIgQUxSRUFEWSBUUllJTkcgVE8gQ09OTkVDVFwiKSxyPW4uU3N9ZWxzZXt0aGlzLnE1LlI1JiZ0aGlzLmxvZ2dlci5pbmZvKFwiSW5pdGlhdGluZyBjb25uZWN0aW9uIHRvIFwiK3QpO3ZhciBzPXRoaXMuSzUoZSx0KTtyPXRoaXMuWTUocyx0KS5jb25uZWN0KHQpfXJldHVybiByfSxlLnByb3RvdHlwZS5XNT1mdW5jdGlvbihlKXtlLno1IGluIHRoaXMuUTUmJihkZWxldGUgdGhpcy5qNVtlLmxhYmVsXSxkZWxldGUgdGhpcy5RNVtlLno1XSksZS5vcGVuJiYodGhpcy5xNS5rNShlLno1KSxlLm9wZW49ITEpfSxlLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUsdCl7dGhpcy5xNS5SNSYmdGhpcy5sb2dnZXIuZGVidWcoXCJEQVRBIFwiK3QuYnl0ZUxlbmd0aCtcIiBcIit0KTt2YXIgcj10aGlzLlE1W2VdO3JldHVybiByJiZyLmNoYW5uZWw/KHIuY2hhbm5lbC5zZW5kKHQpLCEwKTooaC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHNlbmRpbmcgbWVzc2FnZSB3aWh0b3V0IGNoYW5uZWwgZXN0YWJsaXNoZWRcIix0aGlzLmxvZ2dlcklkLGEuaHMuS2UuVmUse290aGVyR3VpZDplfSksITEpfSxlLnByb3RvdHlwZS5xMD1mdW5jdGlvbihlLHQpe3ZhciByPXQuY2hhbm5lbDtpZihyJiZyLmxhYmVsJiZ0aGlzLmo1W3IubGFiZWxdKXt2YXIgaT10aGlzLmo1W3IubGFiZWxdLG49aVtlXTtuLmNhbGwoaSx0KX1lbHNle3ZhciBzPVwiaGFuZGxlX1wiK2Usbj10aGlzW3NdO24/bi5jYWxsKHRoaXMsdCk6aC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJlY2VpdmVkIGEgbWVzc2FnZSBmb3IgYSBub24gZXhpc3RpbmcgZnVuY3Rpb25cIix0aGlzLmxvZ2dlcklkLGEuaHMuS2UuamUse0o1OnN9KX19LGUucHJvdG90eXBlLmhhbmRsZV9vZmZlcj1mdW5jdGlvbihlKXtpZih0aGlzLnE1LlI1JiZ0aGlzLmxvZ2dlci5pbmZvKFwicmVjZWl2ZWQgYW4gb2ZmZXIgZnJvbSBcIitlLnBlZXIuZ3VpZCtcIiBvbiBjaGFubmVsIFwiK2UuY2hhbm5lbC5sYWJlbCksdGhpcy5RNVtlLnBlZXIuZ3VpZF0mJmUucGVlcjx0aGlzLnE1LmdkKXRoaXMuYjUuWDUodGhpcy5xNS5nZCxlLnBlZXIuZ3VpZCxlLmNoYW5uZWwubGFiZWwpO2Vsc2V7dmFyIHQ9dGhpcy5ZNShlLmNoYW5uZWwubGFiZWwsZS5wZWVyLmd1aWQpLHI9dGhpcy5aNSh0KTt0Lm9mZmVyKGUscil9fSxlLnByb3RvdHlwZS5aNT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuLkZyYW1ld29yay5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGluY29taW5nIGNvbm5lY3Rpb24gdGltZWRvdXRcIix0LmxvZ2dlcklkLGEuaHMuS2UuUWUse290aGVyR3VpZDplLno1fSksZS5jbG9zZSgpfSxvLmhRLmFRKX0sZS5wcm90b3R5cGUuWTU9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgcy5lOSh0aGlzLHRoaXMucTUsZSx0aGlzLlY1LHRoaXMuRzUsdCk7cmV0dXJuIHRoaXMuajVbZV09cix0aGlzLlE1W3RdPXIscn0sZS5wcm90b3R5cGUuaGFuZGxlX29mZmVyX3JlamVjdGVkPWZ1bmN0aW9uKGUpe3RoaXMucTUuUjUmJnRoaXMubG9nZ2VyLmRlYnVnKFwicmVtb3RlIHBlZXIgcmVqZWN0ZWQgXCIsZSk7dmFyIHQ9dGhpcy5RNVtlLnQ5XTt0JiZ0LmNsb3NlKCksZGVsZXRlIHRoaXMuUTVbZS50OV0sZGVsZXRlIHRoaXMuajVbZS5jaGFubmVsXX0sZS5wcm90b3R5cGUuSzU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zdWJzdHJpbmcoMCxNYXRoLm1heCg4LGUubGVuZ3RoKSkrXCI6XCIrdC5zdWJzdHJpbmcoMCxNYXRoLm1heCg4LHQubGVuZ3RoKSkrXCI6XCIrdGhpcy5BZysrfSxlLnByb3RvdHlwZS5kaXNjb25uZWN0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuUTVbZV07dCYmdC5jbG9zZSgpfSxlfSgpO3QuQzU9Y30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNSksbj1yKDIpLHM9KHIoNTUpLHIoNCkpLG89cigwKSxhPXIoMSksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSxzLGgpe3ZhciBjPXRoaXM7dGhpcy5jaGFubmVsTWFuYWdlcj1lLHRoaXMucTU9dCx0aGlzLmxhYmVsPXIsdGhpcy5WNT1pLHRoaXMuRzU9cyx0aGlzLno1PWgsdGhpcy5SNT0hMSx0aGlzLmxvZ2dlcklkPVwiW0NoYW5uZWxdIFwiLHRoaXMucjk9LTEsdGhpcy5TSD1udWxsLHRoaXMuY2hhbm5lbD1udWxsLHRoaXMuaTk9bnVsbCx0aGlzLm45PTUsdGhpcy50aW1lb3V0PTVlMyx0aGlzLm9wZW49ITEsdGhpcy5zOT0hMSx0aGlzLm85PW5ldyBBcnJheSx0aGlzLmE5PWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmNoYW5uZWwmJlwiY29ubmVjdGluZ1wiPT09dGhpcy5jaGFubmVsLnJlYWR5U3RhdGV9LHRoaXMubG9nZ2VyPW8uRnJhbWV3b3JrLnJlc29sdmUoby5GcmFtZXdvcmsuVi5SKS5sb2coKSx0aGlzLnBHPW8uRnJhbWV3b3JrLnJlc29sdmUoby5GcmFtZXdvcmsuVi5VKSx0aGlzLnBHLmluaXQodGhpcy5xNS5nZCxoKSx0aGlzLlNIPW5ldyBSVENQZWVyQ29ubmVjdGlvbih0aGlzLkc1LHRoaXMuVjUpLHRoaXMuU0gub25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24oZSl7ZSYmZS5jYW5kaWRhdGUmJihjLm85LnB1c2goZS5jYW5kaWRhdGUpLGMuaDkoKSl9LHRoaXMuU0gub25uZWdvdGlhdGlvbm5lZWRlZD1mdW5jdGlvbigpe2MuY3JlYXRlT2ZmZXIoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBjLmM5KGUpfSkudGhlbihmdW5jdGlvbihlKXtjLlI1JiZjLmxvZ2dlci5kZWJ1ZyhjLmxvZ2dlcklkK1wiU2VuZGluZyBvZmZlciB0byBcIitjLno1K1wiIFtjYW5kaWRhdGVzOiBcIitjLm85Lmxlbmd0aCtcIl1cIik7dmFyIHQ9Yy5vOTtjLm85PW5ldyBBcnJheTt2YXIgcj1jLmNoYW5uZWxNYW5hZ2VyLmI1Lm9mZmVyKGMucTUuZ2QsYy56NSxjLHQsZSk7cmV0dXJuIGMuczk9ITAscn0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBuZWdvdGlhdGluZyB3aXRoIHBlZXJcIixjLmxvZ2dlcklkLG4uaHMuR2Uua2Use2RldGFpbGVkRXJyb3I6ZSxvdGhlckd1aWQ6Yy56NX0pLGMuY2xvc2UoKX0pfSx0aGlzLlNILm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKGUpe1wiZGlzY29ubmVjdGVkXCI9PT1jLlNILmljZUNvbm5lY3Rpb25TdGF0ZSYmYy5jbG9zZSgpLFwiZmFpbGVkXCI9PT1jLlNILmljZUNvbm5lY3Rpb25TdGF0ZSYmKGEuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBlc3RhYmxpc2hpbmcgSUNFIGNvbm5lY3Rpb25cIixjLmxvZ2dlcklkLG4uaHMuR2Uua2Use290aGVyR3VpZDpjLno1fSksYy5jbG9zZSgpKX0sdGhpcy5TSC5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlPWZ1bmN0aW9uKGUpe1wiY2xvc2VkXCI9PT1lLnNpZ25hbGluZ1N0YXRlJiZjLmNsb3NlKCl9fXJldHVybiBlLnByb3RvdHlwZS51OT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy5jaGFubmVsJiZcIm9wZW5cIiE9dGhpcy5jaGFubmVsLnJlYWR5U3RhdGUpe2lmKHRoaXMuUjUmJnRoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJDaGVjayBjb25uZWN0aW9uIFwiK3RoaXMuejUpLHRoaXMubjk8PTApcmV0dXJuIHRoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJDbG9zaW5nIGNoYW5uZWwgc2luY2UgaXQgY291bGRudCBiZSBlc3RhYmxpc2hlZCB0byBcIit0aGlzLno1KSx2b2lkIHRoaXMuY2xvc2UoKTt0aGlzLm45LT0xLHRoaXMuaTk9by5GcmFtZXdvcmsuc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBlLnU5KCl9LHRoaXMudGltZW91dCl9fSxlLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RyeXt0aGlzLlI1JiZ0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiQ2xvc2luZyBjb25uZWN0aW9uIHRvIFwiK3RoaXMuejUpLHRoaXMubDkoITApLHRoaXMuY2hhbm5lbE1hbmFnZXIuVzUodGhpcyksdGhpcy5TSCYmXCJjbG9zZWRcIiE9PXRoaXMuU0guc2lnbmFsaW5nU3RhdGUmJih0aGlzLlNILmNsb3NlKCksdGhpcy5jaGFubmVsJiZ0aGlzLmNoYW5uZWwuY2xvc2UoKSl9Y2F0Y2goZSl7YS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGNsb3NpbmcgdGhlIGNvbm5lY3Rpb25cIix0aGlzLmxvZ2dlcklkLG4uaHMuR2UucWUse2RldGFpbGVkRXJyb3I6ZSxvdGhlckd1aWQ6dGhpcy56NX0pfX0sZS5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuUjUmJnRoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJDb25uZWN0aW5nIHRvIFwiK2UpLHRoaXMuejU9ZSx0aGlzLmNoYW5uZWw9dGhpcy5TSC5jcmVhdGVEYXRhQ2hhbm5lbCh0aGlzLmxhYmVsKTt2YXIgcj10aGlzLnA5KCEwLC0xKTtyZXR1cm4gdGhpcy5pOT1vLkZyYW1ld29yay5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHQudTkoKX0sdGhpcy50aW1lb3V0KSxyfSxlLnByb3RvdHlwZS5kOT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9cy5kZWZlcigpO3JldHVybiB0aGlzLlNILnNldFJlbW90ZURlc2NyaXB0aW9uKGUsZnVuY3Rpb24oKXtyZXR1cm4gci5yZXNvbHZlKFwiT0tcIil9LGZ1bmN0aW9uKGUpe2EuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzZXR0aW5nIHJlbW90ZSBkZXNjcmlwdGlvblwiLHQubG9nZ2VySWQsbi5ocy5HZS5OZSx7ZGV0YWlsZWRFcnJvcjplLG90aGVyR3VpZDp0Lno1fSksci5yZWplY3QoZSl9KSxyLlNzfSxlLnByb3RvdHlwZS5jOT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9cy5kZWZlcigpO3JldHVyblwiY2xvc2VkXCIhPT10aGlzLlNILnNpZ25hbGluZ1N0YXRlP3RoaXMuU0guc2V0TG9jYWxEZXNjcmlwdGlvbihlLGZ1bmN0aW9uKCl7cmV0dXJuIHIucmVzb2x2ZSh0LlNILmxvY2FsRGVzY3JpcHRpb24pfSxmdW5jdGlvbihlKXthLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2V0dGluZyBsb2NhbCBkZXNjcmlwdGlvblwiLHQubG9nZ2VySWQsbi5ocy5HZS5EZSx7ZGV0YWlsZWRFcnJvcjplLG90aGVyR3VpZDp0Lno1fSksci5yZWplY3QoZSl9KTooYS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIlNpZ25hbGluZyBzdGF0ZSBpcyBjbG9zZWRcIix0aGlzLmxvZ2dlcklkLG4uaHMuR2UuTmUpLHIucmVqZWN0KFwiU2lnbmFsaW5nIHN0YXRlIGlzIGNsb3NlZFwiKSksci5Tc30sZS5wcm90b3R5cGUuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9cy5kZWZlcigpO3JldHVybiB0aGlzLlNILmNyZWF0ZU9mZmVyKHQucmVzb2x2ZSxmdW5jdGlvbih0KXthLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY3JlYXRpbmcgb2ZmZXJcIixlLmxvZ2dlcklkLG4uaHMuR2UuQWUse2RldGFpbGVkRXJyb3I6dCxvdGhlckd1aWQ6ZS56NX0pLGUuY2xvc2UoKX0pLHQuU3N9LGUucHJvdG90eXBlLmNyZWF0ZUFuc3dlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1zLmRlZmVyKCk7cmV0dXJuIHRoaXMuU0guY3JlYXRlQW5zd2VyKHQucmVzb2x2ZSxmdW5jdGlvbihyKXthLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY3JlYXRpbmcgYW5zd2VyXCIsZS5sb2dnZXJJZCxuLmhzLkdlLk9lLHtkZXRhaWxlZEVycm9yOnIsb3RoZXJHdWlkOmUuejV9KSx0LnJlamVjdChyKX0pLHQuU3N9LGUucHJvdG90eXBlLm9mZmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0aGlzLlI1JiYodGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIlJlY2VpdmVkIGFuIG9mZmVyIGZyb20gXCIrdGhpcy56NSksdGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIk9mZmVyOlwiLGUpKSx0aGlzLlNILm9uZGF0YWNoYW5uZWw9ZnVuY3Rpb24oZSl7ci5jaGFubmVsPWUuY2hhbm5lbCxyLnA5KCExLHQpfTt2YXIgaT1uZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGUuY2hhbm5lbC5vZmZlcik7dGhpcy56NT1lLnBlZXIuZ3VpZCx0aGlzLmQ5KGkpLnRoZW4oZnVuY3Rpb24odCl7aWYoXCJjbG9zZWRcIiE9PXIuU0guc2lnbmFsaW5nU3RhdGUpcmV0dXJuIHIudXBkYXRlX2ljZV9jYW5kaWRhdGVzKGUpLHIuY3JlYXRlQW5zd2VyKCl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByLmM5KGUpfSkudGhlbihmdW5jdGlvbihlKXtyLmxvZ2dlci5kZWJ1ZyhyLmxvZ2dlcklkK1wiU2VuZGluZyBiYWNrIGFuIGFuc3dlciBbY2FuZGlkYXRlczogXCIrci5vOS5sZW5ndGgrXCJdXCIpO3ZhciB0PXIubzk7ci5vOT1uZXcgQXJyYXksci5jaGFubmVsTWFuYWdlci5iNS5hbnN3ZXIocixlLHQsci56NSksci5zOT0hMH0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciByZXNwb25kaW5nIHRvIG9mZmVyXCIsci5sb2dnZXJJZCxuLmhzLkdlLkhlLHtkZXRhaWxlZEVycm9yOmUsb3RoZXJHdWlkOnIuejV9KSxyLmNsb3NlKCl9KX0sZS5wcm90b3R5cGUuYW5zd2VyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5SNSYmdGhpcy5sb2dnZXIuZGVidWcodGhpcy5sb2dnZXJJZCtcIkFuc3dlcjogXCIsZSk7dmFyIHI9bmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihlLmFuc3dlcik7dGhpcy5kOShyKS50aGVuKGZ1bmN0aW9uKCl7XCJjbG9zZWRcIiE9PXQuU0guc2lnbmFsaW5nU3RhdGUmJnQudXBkYXRlX2ljZV9jYW5kaWRhdGVzKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHNldHRpbmcgcmVtb3RlIGRlc2NyaXB0b3IgZm9yIHRoZSBhbnN3ZXIgcmVjZWl2ZWRcIix0LmxvZ2dlcixuLmhzLkdlLkJlLHtkZXRhaWxlZEVycm9yOmUsb3RoZXJHdWlkOnQuejV9KSx0LmNsb3NlKCl9KX0sZS5wcm90b3R5cGUudXBkYXRlX2ljZV9jYW5kaWRhdGVzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5jaGFubmVsLmljZV9jYW5kaWRhdGVzLmZvckVhY2goZnVuY3Rpb24oZSl7dC5SNSYmdC5sb2dnZXIuZGVidWcodC5sb2dnZXJJZCtcImdvdCBJQ0UgY2FuZDogXCIsZSk7dmFyIHI9bmV3IFJUQ0ljZUNhbmRpZGF0ZShlKTt0LlNILmFkZEljZUNhbmRpZGF0ZShyLGZ1bmN0aW9uKCl7fSxmdW5jdGlvbihlKXtyZXR1cm4gYS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHVwZGF0aW5nIGljZSBjYW5kaWRhdGVzXCIsdC5sb2dnZXJJZCxuLmhzLkdlLlVlLHtkZXRhaWxlZEVycm9yOmUsb3RoZXJHdWlkOnQuejV9KX0pfSl9LGUucHJvdG90eXBlLnA5PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxpPXMuZGVmZXIoKTtyZXR1cm4gdGhpcy5jaGFubmVsLm9ub3Blbj1mdW5jdGlvbihuKXtyZXR1cm4gci5mOShpLGUsdCl9LHRoaXMuY2hhbm5lbC5vbmNsb3NlPWZ1bmN0aW9uKGUpe3IuY2xvc2UoKSxpLnJlamVjdChyKX0sdGhpcy5jaGFubmVsLm9ubWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm4gci5wRy5HZyhlLmRhdGEpfSx0aGlzLmNoYW5uZWwub25lcnJvcj1mdW5jdGlvbihlKXthLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2V0dGluZyB1cCBjaGFubmVsXCIsci5sb2dnZXJJZCxuLmhzLkdlLkxlLHtkZXRhaWxlZEVycm9yOmUsb3RoZXJHdWlkOnIuejV9KSxyLmNsb3NlKCl9LGkuU3N9LGUucHJvdG90eXBlLmY5PWZ1bmN0aW9uKGUsdCxyKXt0aGlzLm9wZW49ITAsZS5yZXNvbHZlKHRoaXMpLHR8fCh0aGlzLnE1LkY1KHRoaXMuejUsdGhpcyksciYmby5GcmFtZXdvcmsuY2xlYXJUaW1lb3V0KHIpKX0sZS5wcm90b3R5cGUuaDk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuczkmJi0xPT10aGlzLnI5JiYodGhpcy5yOT1vLkZyYW1ld29yay5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5nOSgpLGUubDkoITEpfSxpLmhoLmFoLm9oKSl9LGUucHJvdG90eXBlLmc5PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMubzk7aWYodGhpcy5vOT1uZXcgQXJyYXksdCYmdC5sZW5ndGg+MCl7dmFyIHI9dC5sZW5ndGg7dGhpcy5jaGFubmVsTWFuYWdlci5iNS5FOSh0aGlzLnE1LmdkLHRoaXMsdCx0aGlzLno1KS50aGVuKGZ1bmN0aW9uKHQpe2UuUjUmJmUubG9nZ2VyLmRlYnVnKGUubG9nZ2VySWQrXCJzZW50IFwiK3IrXCIgbW9yZSBjYW5kaWRhdGVzXCIpfSkuY2F0Y2goZnVuY3Rpb24odCl7YS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHNlbmRpbmcgY2FuZGlkYXRlc1wiLGUubG9nZ2VySWQsbi5ocy5HZS5MZSx7ZGV0YWlsZWRFcnJvcjp0LG90aGVyR3VpZDplLno1fSl9KX19LGUucHJvdG90eXBlLmw5PWZ1bmN0aW9uKGUpe2UmJi0xIT10aGlzLnI5JiZvLkZyYW1ld29yay5jbGVhclRpbWVvdXQodGhpcy5yOSksdGhpcy5yOT0tMX0sZX0oKTt0LmU5PWh9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDMpLG49cigwKSxzPXIoMiksbz1yKDEpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5qTT1cIltCYXNlIE5ldHdvcmsgTWFuYWdlcl0gXCIsdGhpcy52bD1uZXcgaSx0aGlzLmxvZ2dlcj1uLkZyYW1ld29yay5yZXNvbHZlKG4uRnJhbWV3b3JrLlYuUikubG9nKCl9cmV0dXJuIGUucHJvdG90eXBlLkE1PWZ1bmN0aW9uKGUsdCl7dGhpcy5sb2dnZXIuaW5mbyhcIlNFVCBMSVNURU5FUlMgRk9SIFwiK2UrXCIsXCIrdC5sZW5ndGgpLHRoaXMudmwuc2V0KGUsdCl9LGUucHJvdG90eXBlLkI1PWZ1bmN0aW9uKGUpe3RoaXMudmwuZGVsZXRlKGUpfSxlLnByb3RvdHlwZS52OT1mdW5jdGlvbigpe3RoaXMudmwubGVuZ3RoPjAmJnRoaXMudmwuZm9yRWFjaChmdW5jdGlvbihlLHQpe2UuZm9yRWFjaChmdW5jdGlvbihlKXtlLmVqJiZlLmVqKCl9KX0pfSxlLnByb3RvdHlwZS5PNT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dGhpcy52bC5sZW5ndGg+MCYmKHQ/dGhpcy52bC5nZXQodCkuZm9yRWFjaChmdW5jdGlvbih0KXt0cnl7dC5VZCYmdC5VZChlKX1jYXRjaChlKXtvLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZmlyaW5nIHNlcnZlciBjb25uZWN0IHdoZW4gd2UgaGF2ZSBzd2FybVwiLHIuak0scy5ocy5QZS5SZSxlKX19KTp0aGlzLnZsLmZvckVhY2goZnVuY3Rpb24odCxpKXt0LmZvckVhY2goZnVuY3Rpb24odCl7dHJ5e3QuVWQmJnQuVWQoZSl9Y2F0Y2goZSl7by5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGZpcmluZyBzZXJ2ZXIgY29ubmVjdCB3aGVuIHdlIGRvIG5vdCBoYXZlIHN3YXJtXCIsci5qTSxzLmhzLlBlLndlLGUpfX0pfSkpfSxlLnByb3RvdHlwZS5VNT1mdW5jdGlvbihlKXt0aGlzLnZsLmxlbmd0aD4wJiZ0aGlzLnZsLmZvckVhY2goZnVuY3Rpb24odCxyKXt0LmZvckVhY2goZnVuY3Rpb24odCl7dC5LRyYmdC5LRyhlKX0pfSl9LGV9KCk7dC54NT1hfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cig0KSxuPXIoMCkscz1yKDIzKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuQWc9MSx0aGlzLmNsaWVudD1uLkZyYW1ld29yay5yZXNvbHZlKG4uRnJhbWV3b3JrLlYuRyl9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSx0LHIpe3RoaXMucTU9ZSx0aGlzLmxvZ2dlcj10LHRoaXMuY2hhbm5lbE1hbmFnZXI9cn0sZS5wcm90b3R5cGUuc1k9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbGllbnQuemQoKS5zWSgpfSxlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dGhpcy5sb2dnZXIuZGVidWcoXCJNWSBJRCBcIit0KSx0aGlzLmdkPXQsdGhpcy5jbGllbnQmJnRoaXMuY2xpZW50LnpkKCk/dGhpcy5jbGllbnQuemQoKS5vbihTZXJ2aWNlcy5mWSwxLGZ1bmN0aW9uKGUpe3IueTkoZS5tc2cpfSk6dGhpcy5sb2dnZXIuZXJyb3IoXCJlcnJvciBnZXR0aW5nIGFjdGl2ZSBzZXJ2aWNlcyBjb25uZWN0aW9uXCIpLHRoaXMucTUuTzUodGhpcy5nZCl9LGUucHJvdG90eXBlLnk5PWZ1bmN0aW9uKGUpe3ZhciB0PUpTT04ucGFyc2UoZSk7dGhpcy5xNS5SNSYmdGhpcy5sb2dnZXIuZGVidWcoXCJSQ1YgTVNHIEZST00gU1JWIFwiLHQpLHRoaXMuY2hhbm5lbE1hbmFnZXIucTAodC5tc2dOYW1lLHQubXNnKX0sZS5wcm90b3R5cGUuVDk9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMud3JhcCh0LGUscik7aWYodGhpcy5jbGllbnQmJnRoaXMuY2xpZW50LnpkKCkpe3ZhciBvPUpTT04uc3RyaW5naWZ5KG4pO3RoaXMucTUuUjUmJnRoaXMubG9nZ2VyLmRlYnVnKFwiIEZPUldBUkRJTkcgUkVRVUVTVCA6IFwiK28pO3ZhciBhPW5ldyBzLkpkKFNlcnZpY2VzLmZZLDAsbyk7cmV0dXJuIHRoaXMuY2xpZW50LnpkKCkuc2VuZChhKX1yZXR1cm4gaS5yZWplY3QoKX0sZS5wcm90b3R5cGUud3JhcD1mdW5jdGlvbihlLHQscil7cmV0dXJue21zZ0lkOnRoaXMuQWcrKyxkZXN0aW5hdGlvbjpyLG1zZzplLG1zZ05hbWU6dH19LGUucHJvdG90eXBlLkU5PWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPXtjaGFubmVsOntsYWJlbDp0LmxhYmVsLGljZV9jYW5kaWRhdGVzOnJ9fTtyZXR1cm4gdGhpcy5UOShcInVwZGF0ZV9pY2VfY2FuZGlkYXRlc1wiLG4saSl9LGUucHJvdG90eXBlLm9mZmVyPWZ1bmN0aW9uKGUsdCxyLGkscyl7dmFyIG89e3BlZXI6e2d1aWQ6ZSxmaXJzdF9zZWVuOm4uRnJhbWV3b3JrLnRpbWUoKX0sY2hhbm5lbDp7bGFiZWw6ci5sYWJlbCxpY2VfY2FuZGlkYXRlczppLG9mZmVyOnN9fTtyZXR1cm4gdGhpcy5UOShcIm9mZmVyXCIsbyxyLno1KX0sZS5wcm90b3R5cGUuWDU9ZnVuY3Rpb24oZSx0LHIpe3RoaXMucTUuUjUmJnRoaXMubG9nZ2VyLmRlYnVnKFwiRGlzY292ZXJ5IHNlcnZpY2UgcmVqZWN0cyBvZmZlciBmcm9tIHBlZXIgXCIrdCtcIiBvbiBjaGFubmVsIFwiK3IpO3ZhciBpPXt0OTplLGNoYW5uZWw6cn07cmV0dXJuIHRoaXMuVDkoXCJhbnN3ZXJcIixpLHQpfSxlLnByb3RvdHlwZS5hbnN3ZXI9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG49e2Fuc3dlcjp0LG05OnRoaXMucTUuZ2QsY2hhbm5lbDp7bGFiZWw6ZS5sYWJlbCxpY2VfY2FuZGlkYXRlczpyfX07cmV0dXJuIHRoaXMuVDkoXCJhbnN3ZXJcIixuLGkpfSxlfSgpO3QuX0o9b30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMyksbj1yKDUpLHM9cigwKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuckY9bmV3IGksdGhpcy5JOT1bXSx0aGlzLkI2PW5ldyBpLHRoaXMuUzk9bmV3IGl9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9cy5GcmFtZXdvcmsucmVzb2x2ZShzLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy5FRD1lLkVELHRoaXMuUjkoKX0sZS5wcm90b3R5cGUuUjk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3MuRnJhbWV3b3JrLnNldEludGVydmFsKGZ1bmN0aW9uKCl7ZS53OSgpfSxuLmhoLnlhLkVhKX0sZS5wcm90b3R5cGUudzk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuQjYudmFsdWVzKCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBzLkZyYW1ld29yay50aW1lKCktZS5xZi5MZj5uLmhoLnlhLnZhfSkuZm9yRWFjaChmdW5jdGlvbih0KXtlLkVELmFib3J0KHQuS2YpLGUubEYodC5aZigpLHQuJGYoKSl9KX0sZS5wcm90b3R5cGUudUY9ZnVuY3Rpb24oZSl7dGhpcy5iOShlLlpmKCksZS4kZigpKSx0aGlzLkI2LnNldChlLiRmKCksZSl9LGUucHJvdG90eXBlLmxGPWZ1bmN0aW9uKGUsdCl7dGhpcy5CNi5kZWxldGUodCksdGhpcy5DOShlLHQpfSxlLnByb3RvdHlwZS5mRj1mdW5jdGlvbihlKXt0aGlzLl85KGUpfSxlLnByb3RvdHlwZS5wRj1mdW5jdGlvbihlKXt0aGlzLnJGLmRlbGV0ZShlKX0sZS5wcm90b3R5cGUuXzk9ZnVuY3Rpb24oZSl7aWYodGhpcy5yRi5zZXQoZS5aZigpLGUuSmYoKSksdGhpcy5JOS5wdXNoKGUuWmYoKSksdGhpcy5yRi5sZW5ndGg+bi5oaC55YS5nYSl7dmFyIHQ9dGhpcy5JOVswXTt0aGlzLnJGLmRlbGV0ZSh0KSx0aGlzLkk5LnNwbGljZSgwLDEpfX0sZS5wcm90b3R5cGUudEY9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuckYuaGFzKGUpfSxlLnByb3RvdHlwZS5pRj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yRi5nZXQoZSl9LGUucHJvdG90eXBlLmI5PWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5TOS5oYXMoZSkpdGhpcy5TOS5nZXQoZSkucHVzaCh0KTtlbHNle3ZhciByPVtdO3IucHVzaCh0KSx0aGlzLlM5LnNldChlLHIpfX0sZS5wcm90b3R5cGUuQzk9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLlM5LmhhcyhlKSl7dmFyIHI9dGhpcy5TOS5nZXQoZSksaT1yLmluZGV4T2YodCk7LTE9PWk/dGhpcy5sb2dnZXIud2FybihcIkkgQ0FOTk9UIEZJTkQgVEhFIFJFUVVFU1QgSUQgXCIrdCk6ci5zcGxpY2UoaSwxKSwwPT1yLmxlbmd0aCYmdGhpcy5TOS5kZWxldGUoZSl9ZWxzZSB0aGlzLmxvZ2dlci53YXJuKFwiVFJJRUQgVE8gUkVNT1ZFIEFOIE9CSkVDVCBUSEFUIERPRVMgTk9UIEVYSVNUXCIpfSxlLnByb3RvdHlwZS5vRj1mdW5jdGlvbihlKXt2YXIgdD1bXTtpZih0aGlzLlA5KGUpKWZvcih2YXIgcj10aGlzLlM5LmdldChlKSxpPTA7aTxyLmxlbmd0aDtpKyspdGhpcy5CNi5oYXMocltpXSkmJnQucHVzaCh0aGlzLkI2LmdldChyW2ldKSk7cmV0dXJuIHR9LGUucHJvdG90eXBlLlA5PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLlM5LmhhcyhlKX0sZS5wcm90b3R5cGUuRUY9ZnVuY3Rpb24oKXtyZXR1cm4gMCE9dGhpcy5CNi5sZW5ndGh9LGUucHJvdG90eXBlLnNGPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLlM5LmhhcyhlKX0sZX0oKTt0LnlhPW99LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDMpLG49cig1KSxzPXIoMjgpLG89cy5jZyxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMudWRwU2NvcmU9MCx0aGlzLkE5PTAsdGhpcy53YXRjaGluZ0JpdHJhdGU9LTEsdGhpcy5POT0hMSx0aGlzLk45PSExLHRoaXMuRDk9ITEsdGhpcy5rOT0hMSx0aGlzLkw5PW5ldyBpfXJldHVybiBlLnByb3RvdHlwZS5zZXRJZD1mdW5jdGlvbihlKXt0aGlzLk05PWV9LGUucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTTl9LGUucHJvdG90eXBlLlpKPWZ1bmN0aW9uKGUpe3RoaXMudWRwU2NvcmU9ZX0sZS5wcm90b3R5cGUuUUc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51ZHBTY29yZX0sZS5wcm90b3R5cGUuJEo9ZnVuY3Rpb24oZSl7dGhpcy5BOT1lfSxlLnByb3RvdHlwZS5MMT1mdW5jdGlvbigpe3JldHVybiB0aGlzLkE5fSxlLnByb3RvdHlwZS5zZXRDb250ZXh0SWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9by5vVChlK1wiX1wiK24uaGguSG8uRG8pLnRvU3RyaW5nKG8uVXkuQnkpO3RoaXMuY29udGV4dElkPXR9LGUucHJvdG90eXBlLmdldENvbnRleHRJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRleHRJZH0sZS5wcm90b3R5cGUua0c9ZnVuY3Rpb24oZSl7dGhpcy5POT1lfSxlLnByb3RvdHlwZS5jaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLk85fSxlLnByb3RvdHlwZS5ZRz1mdW5jdGlvbihlKXt0aGlzLkQ5PWV9LGUucHJvdG90eXBlLnlrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRDl9LGUucHJvdG90eXBlLkhqPWZ1bmN0aW9uKGUpe3RoaXMuazk9ZX0sZS5wcm90b3R5cGUubWs9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rOX0sZS5wcm90b3R5cGUuVTE9ZnVuY3Rpb24oZSl7dGhpcy5GOT1lfSxlLnByb3RvdHlwZS5naz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkY5fSxlLnByb3RvdHlwZS5CMT1mdW5jdGlvbihlKXt0aGlzLlU5PWV9LGUucHJvdG90eXBlLkZqPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuVTl9LGUucHJvdG90eXBlLkRHPWZ1bmN0aW9uKGUpe3RoaXMuQjk9ZX0sZS5wcm90b3R5cGUuUms9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5COX0sZS5wcm90b3R5cGUuSDk9ZnVuY3Rpb24oZSl7dGhpcy5OOT1lfSxlLnByb3RvdHlwZS5Uaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLk45fSxlLnByb3RvdHlwZS5GWD1mdW5jdGlvbihlKXt0aGlzLndhdGNoaW5nQml0cmF0ZT1lfSxlLnByb3RvdHlwZS5NWD1mdW5jdGlvbigpe3JldHVybiB0aGlzLndhdGNoaW5nQml0cmF0ZX0sZS5wcm90b3R5cGUuRkc9ZnVuY3Rpb24oZSl7dGhpcy5uRz1lfSxlLnByb3RvdHlwZS5Jaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5HfSxlLnByb3RvdHlwZS5ESD1mdW5jdGlvbihlKXt0aGlzLnByaXZhdGVJcD1lfSxlLnByb3RvdHlwZS5nZXRQcml2YXRlSXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcml2YXRlSXB9LGUucHJvdG90eXBlLl9IPWZ1bmN0aW9uKGUpe3RoaXMucHVibGljSXA9ZX0sZS5wcm90b3R5cGUuZ2V0UHVibGljSXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdWJsaWNJcH0sZS5wcm90b3R5cGUuc2V0UmVwb3J0aW5nR3VpZD1mdW5jdGlvbihlKXt0aGlzLnJlcG9ydGluZ0d1aWQ9ZX0sZS5wcm90b3R5cGUuZ2V0UmVwb3J0aW5nR3VpZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcG9ydGluZ0d1aWR9LGUucHJvdG90eXBlLnNldERlbHRhPWZ1bmN0aW9uKGUpe3RoaXMuZGVsdGE9ZX0sZS5wcm90b3R5cGUuZ2V0RGVsdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWx0YX0sZS5wcm90b3R5cGUuRkQ9ZnVuY3Rpb24oZSx0KXt0aGlzLkw5LnNldChlLHQpfSxlLnByb3RvdHlwZS5rRD1mdW5jdGlvbihlKXt0aGlzLkw5LmRlbGV0ZShlKX0sZS5wcm90b3R5cGUuVWo9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5MOX0sZS5wcm90b3R5cGUuaEI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5UaygpP3RoaXMuTDkua2V5cygpOltdfSxlLnByb3RvdHlwZS5jQj1mdW5jdGlvbigpe3JldHVybiB0aGlzLlRrKCk/W106dGhpcy5MOS5rZXlzKCl9LGUucHJvdG90eXBlLlhKPWZ1bmN0aW9uKGUpe3RoaXMudGlja2V0PWV9LGUucHJvdG90eXBlLlNrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGlja2V0fSxlLnByb3RvdHlwZS5XSj1mdW5jdGlvbihlKXt0aGlzLm1YPWV9LGUucHJvdG90eXBlLng4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubVh9LGV9KCk7dC5ISj1hfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDEwKSxzPXIoMTgzKSxvPXIoMiksYT1yKDEpLGg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5lNT1mdW5jdGlvbih0LHIpe3ZhciBpPVtdLHM9W10saD1bXTt0cnl7dmFyIGM9dGhpcy55RC5naygpO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24oZSl7ZS5Fay5wZWVySW5mby50eXBlPT1uLlRjLlcmJmkucHVzaChlKTt2YXIgdD1lLkVrLnBlZXJJbmZvLmludGVybmFsQXM7MCE9YyYmdCYmYz09dCYmcy5wdXNoKGUpLGUuRWsucGVlckluZm8udHlwZT09bi5UYy55YyYmaC5wdXNoKGUpfSksaS5sZW5ndGg+MD9lLnByb3RvdHlwZS5lNS5jYWxsKHRoaXMsaSxyKTpzLmxlbmd0aD4wP2UucHJvdG90eXBlLmU1LmNhbGwodGhpcyxzLHIpOmUucHJvdG90eXBlLmU1LmNhbGwodGhpcyxoLHIpfWNhdGNoKGUpe3JldHVybiBhLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgY2hvb3NpbmcgcGFydG5lciBmb3IgcDJwXCIsdGhpcy5sb2dnZXJJZCxvLmhzLmppLlZpLGUpLG51bGx9fSx0fShzLng5KTt0LlVKPWh9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDApLG49cig1KSxzPXIoMSksbz1yKDIpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5sb2dnZXJJZD1cIltQaWNrZXJUUlNpbmdsZV0gXCIsdGhpcy5sb2dnZXI9aS5GcmFtZXdvcmsucmVzb2x2ZShpLkZyYW1ld29yay5WLlIpLmxvZygpfXJldHVybiBlLnByb3RvdHlwZS5YOD1mdW5jdGlvbihlKXt0aGlzLnlEPWV9LGUucHJvdG90eXBlLmU1PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5xOShlKTtyZXR1cm4gcj9yWzBdOm51bGx9LGUucHJvdG90eXBlLkc5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uaGguRmEuTGEqKGUuazgoKS90KStuLmhoLkZhLk1hKigxLWUuTTgoKSl9LGUucHJvdG90eXBlLnE5PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dHJ5e3ZhciByPS4xO3IrPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLms4KCl9KS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0fSk7dmFyIGk9ZS5zb3J0KGZ1bmN0aW9uKGUsaSl7cmV0dXJuIHQuRzkoaSxyKS10Lkc5KGUscil9KSxuPVtdO3JldHVybiBpLmZvckVhY2goZnVuY3Rpb24oZSl7bi5wdXNoKGUuZ3VpZCtcIjpcIit0Lkc5KGUscikpfSksdGhpcy5sb2dnZXIuZGVidWcoXCJTQyBbXCIrbi5qb2luKFwiLCBcIikrXCJdXCIpLGl9Y2F0Y2goZSl7cmV0dXJuIHMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzb3J0aW5nIHRoZSBwYXJ0bmVyc1wiLHRoaXMubG9nZ2VySWQsby5ocy5HaS5xaSxlKSxudWxsfX0sZX0oKTt0Lng5PWF9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDQ5KSxuPXIoMykscz1yKDU5KSxvPXIoNyksYT1yKDUpLGg9cigwKSxjPXIoNDcpLHU9cig5MSksbD1yKDYpLHA9bC5oZS5UaCxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuVjk9ITF9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9aC5GcmFtZXdvcmsucmVzb2x2ZShoLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy55RD1lLnlELHRoaXMuR0o9ZS5HSix0aGlzLm9HPWUub0csdGhpcy56TT1lLnpNfSxlLnByb3RvdHlwZS5SRD1mdW5jdGlvbihlKXt0aGlzLndEPWV9LGUucHJvdG90eXBlLkcxPWZ1bmN0aW9uKCl7dGhpcy5WOT0hMCx0aGlzLmNYKCl9LGUucHJvdG90eXBlLkxHPWZ1bmN0aW9uKCl7aWYoYS5oaC5mYS5uYSlyZXR1cm4gdm9pZCB0aGlzLmo5KCk7dmFyIGU9IXRoaXMueUQueWsoKXx8dGhpcy55RC5jaygpfHwhcDt0aGlzLmxvZ2dlci5kZWJ1ZyhcIlJFUVVFU1QgUkVNT1RFIEVMRUNUSU9OIFwiK2UpLGU/dGhpcy5qOSgpOnRoaXMuUTkoKX0sZS5wcm90b3R5cGUuajk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnlELmdrKCksdD1lJiYwIT1lP3UuWHEubkQ6dS5YcS5BUzt0aGlzLkdKLkYxKHQpfSxlLnByb3RvdHlwZS5ROT1mdW5jdGlvbigpe3RoaXMuR0ouRjEodS5YcS5KcSl9LGUucHJvdG90eXBlLmNYPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJYKCksdGhpcy5LOT1oLkZyYW1ld29yay5zZXRJbnRlcnZhbChmdW5jdGlvbigpe2UuTEcoKX0sYS5oaC5mYS5vYSksdGhpcy56TS5TRCgpLHRoaXMuTEcoKX0sZS5wcm90b3R5cGUuclg9ZnVuY3Rpb24oKXt0aGlzLks5JiZoLkZyYW1ld29yay5jbGVhckludGVydmFsKHRoaXMuSzkpfSxlLnByb3RvdHlwZS5pWD1mdW5jdGlvbigpe3RoaXMuek0uZWsoKSx0aGlzLndELkxNKCl9LGUucHJvdG90eXBlLk1HPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBuO2lmKGUpe3RoaXMuWTkoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Quc2V0KGUsaS5zRC5pRCl9KTt2YXIgcj0hMSxzPWkuc0QuaUQ7dGhpcy55RC5UaygpJiYocz1pLnNELm5ELHI9ITApLHRoaXMuek0uX0QodCxzLHIpfWVsc2UgdGhpcy56TS5fRCh0LGkuc0QubWMsITEpfSxlLnByb3RvdHlwZS5IMT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaD10aGlzLlc5KHQpLGM9dGhpcy56TS5DRCgpLmlzTGl2ZSgpO2lmKGUmJmUubGVuZ3RoPjApe3ZhciB1PW5ldyBzO3UuYWRkRWFjaChlKTt2YXIgbD1hLmhoLmZhLmVhfHx1LnNvbWUoZnVuY3Rpb24oZSl7dmFyIHQ9by5yYy5aaChoaXZlLnNlcnZpY2VzLnByb3RvY29sLklGLlNGLGUua2V5LnJhbmtUeXBlKTtyZXR1cm4gci5sb2dnZXIuaW5mbyhcIkdPVCBSQU5LSU5HIFwiK3QrXCIsQ1JWIFwiK2UuY3VtdWxhdGVkUmFua1ZhbHVlK1wiLFJWIFwiK2UucmFua2luZytcIixHUyBcIitlLmdyb3VwU2l6ZSksci56OShlKX0pLHA9bnVsbCE9aCYmMCE9aC5sZW5ndGg7aWYodGhpcy5sb2dnZXIuZGVidWcoXCJUcmFja2VyIHJlcG9ydHMgW1wiK2gua2V5cygpLmpvaW4oXCIsIFwiKStcIl0gIGJpdHJhdGVzXCIpLHRoaXMubG9nZ2VyLmRlYnVnKFwiSVNMaXZlIFwiK2MrXCIgRG9FbGVjdCBcIitsKSxhLmhoLmZhLiRvJiZjKXt2YXIgZD10aGlzLlk5KCk7aWYocCYmbCl7dGhpcy55RC5IOSghMCksdGhpcy5sb2dnZXIuaW5mbyhcIkJFQ09NSU5HIFNJVEUgTEVBREVSXCIpO3ZhciBmPW5ldyBuO2QuZm9yRWFjaChmdW5jdGlvbihlKXtmLnNldChlLGkuc0QuaUQpfSksaC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ci5vRy5rai5oYXMoZSl8fGYuc2V0KHQsaS5zRC5uRCl9KSx0aGlzLnpNLl9EKGYsaS5zRC5uRCwhMSl9ZWxzZXt0aGlzLnlELkg5KCExKTt2YXIgZz1pLnNELm1jLEU9bmV3IG47dGhpcy55RC55aygpJiZ0aGlzLnlELmNrKCkmJihnPWkuc0QuaUQsZC5mb3JFYWNoKGZ1bmN0aW9uKGUpe0Uuc2V0KGUsaS5zRC5pRCl9KSksdGhpcy56TS5fRChFLGcsITEpfX19ZWxzZSBpZihjKXthLmhoLmZhLmVhP3RoaXMueUQuSDkoITApOnRoaXMueUQuSDkoITEpO3ZhciB2PW5ldyBuLGc9aS5zRC5tYztpZih0aGlzLnlELnlrKCkmJnRoaXMueUQuY2soKSl7dmFyIHk9dGhpcy5ZOSgpO3kuZm9yRWFjaChmdW5jdGlvbihlKXt2LnNldChlLGkuc0QuaUQpfSksZz1pLnNELmlEfWEuaGguZmEuZWEmJihnPWkuc0QubkQpLHRoaXMuek0uX0QodixnLCExKX19LGUucHJvdG90eXBlLkpqPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ZOSgpLHQ9bmV3IG47ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Quc2V0KGUsaS5zRC5pRCl9KTt2YXIgcj0hMSxzPWkuc0QuaUQ7dGhpcy55RC5UaygpJiYocz1pLnNELm5ELHI9ITApLHRoaXMuek0uX0QodCxzLHIpfSxlLnByb3RvdHlwZS5ZOT1mdW5jdGlvbigpe3ZhciBlPW5ldyBzO3JldHVybiB0aGlzLm9HLmtqLmZvckVhY2goZnVuY3Rpb24odCxyKXt0LnBlZXJJbmZvLndhdGNoaW5nQml0cmF0ZSYmIWUuaGFzKHQucGVlckluZm8ud2F0Y2hpbmdCaXRyYXRlKSYmZS5hZGQodC5wZWVySW5mby53YXRjaGluZ0JpdHJhdGUpfSksZS50b0FycmF5KCl9LGUucHJvdG90eXBlLlc5PWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBuLHI9dGhpcy55RC5naygpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7bnVsbCE9ZS53YXRjaGluZ0JpdHJhdGUmJihyPjA/cj09PWUuaW50ZXJuYWxBcyYmdC5zZXQoZS53YXRjaGluZ0JpdHJhdGUsZS5ndWlkKTp0LnNldChlLndhdGNoaW5nQml0cmF0ZSxlLmd1aWQpKX0pLHR9LGUucHJvdG90eXBlLno5PWZ1bmN0aW9uKGUpe2lmKGUuZ3JvdXBTaXplPDIpcmV0dXJuITE7dmFyIHQ9TWF0aC5tYXgoMSxNYXRoLnJvdW5kKGUuZ3JvdXBTaXplKmEuaGguZmEucmEpKTtyZXR1cm4gcHx8aC5GcmFtZXdvcmsuQygpJiZjLiROLlhOP2UucmFua2luZzx0JiYodGhpcy55RC5jaygpfHwhdGhpcy55RC55aygpKTplLnJhbmtpbmc8dH0sZS5wcm90b3R5cGUuWkQ9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIHM9MSxvPXRoaXMud0QubGsocix0KSxjPWEuaGguZmEuaGEqaC5GcmFtZXdvcmsucmFuZG9tKCk7aWYoZT09aS5zRC5pRCl7dmFyIHU9dGhpcy53RC54TSgpLGw9dS1jO3M9TWF0aC5tYXgoMSxvLWwpfWVsc2UgaWYoZT09aS5zRC5uRCl7dmFyIHA9YS5oaC5mYS5jYS1jO3M9TWF0aC5tYXgoMSxvLXApK259cmV0dXJuIHM9TWF0aC5yb3VuZChzKX0sZX0oKTt0LkJKPWR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1yKDApLG49cigzKSxzPXIoMjMpLG89cigzMyksYT1yKDEpLGg9cigyKTtyKDYwKTt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLko5PSExLHRoaXMubG9nZ2VySWQ9XCJbVFJBQ0tFUl0gXCIsdGhpcy5YOT1uZXcgbix0aGlzLnlnPW5ldyBvLlliLHRoaXMucHJvdG9jb2w9bmV3IG8uYkModGhpcy55ZyksdGhpcy5sb2dnZXI9aS5GcmFtZXdvcmsucmVzb2x2ZShpLkZyYW1ld29yay5WLlIpLmxvZygpLGkuRnJhbWV3b3JrLkMoKXx8KHRoaXMuY2xpZW50PWkuRnJhbWV3b3JrLnJlc29sdmUoaS5GcmFtZXdvcmsuVi5HKSl9cmV0dXJuIGUucHJvdG90eXBlLm0xPWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlRSQUNLRVIgQ0xJRU5UIFJFR0lTVEVSRUQgXCIrZSksdGhpcy5YOS5oYXMoZSl8fHRoaXMuWDkuc2V0KGUsdCksdGhpcy5YOS5nZXQoZSl9Y2F0Y2goZSl7YS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGFkZGluZyBuZXcgdHJhY2tlciBjbGllbnRcIix0aGlzLmxvZ2dlcklkLGguaHMueGkuTWksZSl9fSxlLnByb3RvdHlwZS5SZz1mdW5jdGlvbihlKXt0aGlzLlg5LmRlbGV0ZShlKX0sZS5wcm90b3R5cGUud2c9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuWDkuZ2V0KGUpfSxlLnByb3RvdHlwZS5NMT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuY2xpZW50JiZ0aGlzLmNsaWVudC56ZCgpKXt2YXIgcj10aGlzLlo5KGUpLGk9bmV3IHMuSmQoU2VydmljZXMucFksMSxyKSxuPXRoaXMuY2xpZW50LnpkKCkuc2VuZChpKTtuLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC5sb2dnZXIuaW5mbyhcIlRSQUNLRVIgUkVRVUVTVCBTRU5UXCIpfSksbi5mYWlsKGZ1bmN0aW9uKGUpe2EuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzZW5kaW5nIHRyYWNrZXIgcmVxdWVzdFwiLHQubG9nZ2VySWQsaC5ocy54aS5EaSl9KX1lbHNlIGEuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzZW5kaW5nIHRyYWNrZXIgcmVxdWVzdCBiZWNhdXNlIG9mIGNvbm5lY3Rpb25cIix0aGlzLmxvZ2dlcklkLGguaHMueGkuQmkpfSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmxvZ2dlci5kZWJ1ZyhcIlRSQUNLRVIgTUFOQUdFUiBJTklUXCIpLHRoaXMuY2xpZW50JiZ0aGlzLmNsaWVudC56ZCgpP3RoaXMuY2xpZW50LnpkKCkub24oU2VydmljZXMucFksMTAsZnVuY3Rpb24odCl7dHJ5e3ZhciByPWUuZTcodC5tc2cpO2lmKHImJmUuWDkuaGFzKHIuc2Vzc2lvbklkKSl7ZS5YOS5nZXQoci5zZXNzaW9uSWQpLktYKHIpfWVsc2UgZS5sb2dnZXIud2FybihcIlNFU1NJT04gSUQgTk9UIFZBTElEIE9SIE5VTEwgXCIrci5zZXNzaW9uSWQpfWNhdGNoKHQpe2EuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBpbml0aWFsaXppbmcgdGhlIHRyYWNrZXIgbWFuYWdlclwiLGUubG9nZ2VySWQsaC5ocy54aS5IaSx0KX19KTppLkZyYW1ld29yay5DKCl8fHRoaXMubG9nZ2VyLndhcm4odGhpcy5sb2dnZXJJZCtcIiBDQU5OT1QgR0VUIEFDVElWRSBDT05ORUNUSU9OXCIpfSxlLnByb3RvdHlwZS5lNz1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9J1sxLCBcIlRSQUNLRVJfUkVTUFwiLCA0LCAwLCcrZStcIl1cIjt0aGlzLnlnLmVDKHQpO3ZhciByPSh0aGlzLnByb3RvY29sLnpDKCksbmV3IGhpdmUuc2VydmljZXMucHJvdG9jb2wuSUYuVHJhY2tlclJlc3BvbnNlKTtyZXR1cm4gci5yZWFkKHRoaXMucHJvdG9jb2wpLHIuaW5mb3MubWFwKGZ1bmN0aW9uKGUpe2UuZ3VpZD1hdG9iKGUuZ3VpZCksZS5wdWJsaWNJcD1uZXcgSW5ldEFkZHJlc3MsZS5wdWJsaWNJcC5hZGRyZXNzPWUucHVibGljSXBTdHJpbmcsZS5wcml2YXRlSXA9bmV3IEluZXRBZGRyZXNzLGUucHJpdmF0ZUlwLmFkZHJlc3M9ZS5wcml2YXRlSXBTdHJpbmd9KSxyLnBlZXJJbmZvLmd1aWQ9YXRvYihyLnBlZXJJbmZvLmd1aWQpLHIucGVlckluZm8ucHVibGljSXA9bmV3IEluZXRBZGRyZXNzLHIucGVlckluZm8ucHVibGljSXAuYWRkcmVzcz1yLnBlZXJJbmZvLnB1YmxpY0lwU3RyaW5nLHIucGVlckluZm8ucHJpdmF0ZUlwPW5ldyBJbmV0QWRkcmVzcyxyLnBlZXJJbmZvLnByaXZhdGVJcC5hZGRyZXNzPXIucGVlckluZm8ucHJpdmF0ZUlwU3RyaW5nLHRoaXMucHJvdG9jb2wudF8oKSx0aGlzLko5JiZ0aGlzLmxvZ2dlci5kZWJ1ZyhcIlJFU1AgXCIrSlNPTi5zdHJpbmdpZnkocikpLHJ9Y2F0Y2goZSl7cmV0dXJuIGEuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBkZXNlcmlhbGl6aW5nIHRoZSB0cmFja2VyIHJlc3BvbnNlXCIsdGhpcy5sb2dnZXJJZCxoLmhzLnhpLlVpLGUpLG51bGx9fSxlLnByb3RvdHlwZS5aOT1mdW5jdGlvbihlKXt0cnl7dGhpcy5wcm90b2NvbC5BQyhcIlRSQUNLRVJfUkVRXCIsby5nYi5PTkVXQVksMCksZS53cml0ZSh0aGlzLnByb3RvY29sKSx0aGlzLnByb3RvY29sLkRDKCk7dmFyIHQ9dGhpcy55Zy5wQygpLHI9dGhpcy5GQih0LFwiLFwiLDQpO3JldHVybiB0LnNsaWNlKHIrMSx0Lmxlbmd0aC0xKX1jYXRjaChlKXt0aHJvdyBhLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2VyaWFsaXppbmcgdGhlIG5ldyByZXF1ZXN0XCIsdGhpcy5sb2dnZXJJZCxoLmhzLnhpLkZpLGUpLG5ldyBFcnJvcihlKX19LGUucHJvdG90eXBlLkZCPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZS5zcGxpdCh0LHIpLmpvaW4odCkubGVuZ3RofSxlfSgpO3Qud0o9Y30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMjYpLG49aS5IaXZlQ29tbS4kZyxzPWkuSGl2ZUNvbW0uZUUsbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLnBlZXI9ZSx0aGlzLnJsPXR9LGUucHJvdG90eXBlLnQ3PWZ1bmN0aW9uKGUpe2UudXVpZD10aGlzLnJsLlVsLmdkO3ZhciB0PXRoaXMucmwuVWwuaUIuS1Uscj10aGlzLnI3KHQucDJwU3ViUmVzcFF0KSxpPXRoaXMucjcodC5zcmNSZXNwUXQpO2UuY2RuUmVxdWVzdHMrPXRoaXMucjcodC5zcmNSZXFOKSxlLmNkblJlc3BvbnNlcys9dGhpcy5yNyh0LnNyY1Jlc3BOKSxlLmNkblJlc3BvbnNlRXJyb3JzKz10aGlzLnI3KHQuc3JjUmVzcEVyck4pLGUuY2RuUmVzcG9uc2VCeXRlcys9dGhpcy5yNyh0LnNyY1Jlc3BRdCksZS5wMnBSZXF1ZXN0cys9dGhpcy5yNyh0LnAycFN1YlJlcU4pLGUucDJwUmVzcG9uc2VzKz10aGlzLnI3KHQucDJwU3ViUmVzcE4pLGUucDJwUmVzcG9uc2VFcnJvcnMrPXRoaXMucjcodC5wMnBTdWJSZXNwRXJyTiksZS5wMnBSZXNwb25zZUJ5dGVzKz10aGlzLnI3KHQucDJwU3ViUmVzcFF0KSxlLnNhdmluZ3M9dGhpcy5yNyhyLyhpK3IpKjEwMCl9LGUucHJvdG90eXBlLnI3PWZ1bmN0aW9uKGUpe3JldHVybiBlfHwwfSxlLnByb3RvdHlwZS5pNz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UudXVpZD10aGlzLnJsLlVsLmdkLHRoaXMucmwuVWwuaUIuV1UuZm9yRWFjaChmdW5jdGlvbihyLGkpe2UucGFydG5lcnNbaV18fChlLnBhcnRuZXJzW2ldPW5ldyBzKTt2YXIgbj1lLnBhcnRuZXJzW2ldO24udXVpZD1pLG4uc2VudEJ5dGVzKz10LnI3KHIucDJwU3VjY1NlbnQpLG4ucmVjZWl2ZWRCeXRlcys9dC5yNyhyLnAycFN1Y2NSZWNlaXZlZCksbi5zdWNjZXNzVHJhbnNmZXJzKz10LnI3KHIucDJwU3VjY1JlcSksbi5mYWlsZWRUcmFuc2ZlcnMrPXQucjcoci5wMnBGYWlsUmVxKX0pfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJsLnJlbmRlclN0YXRzQ2FsbGJhY2s7aWYoZSl7dmFyIHQ9bmV3IG47dGhpcy50Nyh0KSx0aGlzLmk3KHQpO3RyeXtlKHQpfWNhdGNoKGUpe2NvbnNvbGUud2FybihcImVycm9yIGluIHJlbmRlcmluZyBsb2NhbCBzdGF0c1wiLGUpfX19LGV9KCk7dC5tSj1vfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigzNSksbj1yKDMpLHM9cigwKSxvPXIoNSksYT1yKDEpLGg9cigyKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubG9nZ2VySWQ9XCJbQ2h1bmtIYW5kbGVyXSBcIix0aGlzLm43PW5ldyBuLHRoaXMuczc9bmV3IG59cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9cy5GcmFtZXdvcmsucmVzb2x2ZShzLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCl9LGUucHJvdG90eXBlLllYPWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1lLlpmKCkscj1lLmpmLG49ZS5xZi5QZixjPU1hdGguY2VpbChuL28uaGguRmEuRGEpLHU9ZS56Zi5iaXRyYXRlLGw9MCxwPU1hdGgubWluKG8uaGguRmEuRGEsbik7dGhpcy5vNyh0LHUpO2Zvcih2YXIgZD1wLWw7Yz4wOyl7dmFyIGY9bnVsbDt0cnl7cy5GcmFtZXdvcmsuQygpfHwoZj1pLndyYXAoci5zbGljZShsLHApKSksbCs9ZH1jYXRjaChlKXthLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igd3JhcHBpbmcgY2h1bmtcIix0aGlzLmxvZ2dlcklkLGguaHMuT3IuUHIsZSl9dGhpcy5uNy5nZXQodCkucHVzaChmKSxjLS0scD1NYXRoLm1pbihsK28uaGguRmEuRGEsbiksZD1wLWx9fWNhdGNoKGUpe2EuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBhZGRpbmcgZnJhZ21lbnQgdG8gdGhlIGZyYWdtZW50TWFwXCIsdGhpcy5sb2dnZXJJZCxoLmhzLk9yLkNyLGUpfX0sZS5wcm90b3R5cGUubzc9ZnVuY3Rpb24oZSx0KXt0cnl7aWYodGhpcy5zNy5oYXModCkmJnRoaXMuczcuZ2V0KHQpLmxlbmd0aD5vLmhoLlJhLlNhKXt2YXIgcj10aGlzLnM3LmdldCh0KVswXTt0aGlzLm43LmRlbGV0ZShyKSx0aGlzLnM3LmdldCh0KS5zaGlmdCgpfWlmKHRoaXMuczcuaGFzKHQpKXRoaXMuczcuZ2V0KHQpLnB1c2goZSksdGhpcy5uNy5zZXQoZSxbXSk7ZWxzZXt2YXIgaT1bZV07dGhpcy5zNy5zZXQodCxpKSx0aGlzLm43LnNldChlLFtdKX19Y2F0Y2goZSl7YS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgdGhlIGNodW5rIGhhbmRsZXIgaGFzaG1hcHNcIix0aGlzLmxvZ2dlcklkLGguaHMuT3IuQXIsZSl9fSxlLnByb3RvdHlwZS5sOD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm43LmhhcyhlKT90aGlzLm43LmdldChlKVt0XTpudWxsfSxlLnByb3RvdHlwZS5hNz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zNy5nZXQoZSl9LGUucHJvdG90eXBlLm9YPWZ1bmN0aW9uKCl7dGhpcy5uNz1uZXcgbix0aGlzLnM3PW5ldyBufSxlfSgpO3QuUEo9Y30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMyksbj1yKDUpLHM9cigwKSxvPXIoMiksYT1yKDEpLGg9cigyOCksYz0oaC5jZyxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmxvZ2dlcklkPVwiW0lQU3Bvb2ZpbmddIFwiLHRoaXMuaDc9bi5oaC5Wby54b31yZXR1cm4gZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihlKXt0aGlzLmxvZ2dlcj1zLkZyYW1ld29yay5yZXNvbHZlKHMuRnJhbWV3b3JrLlYuUikubG9nKGUuc2Vzc2lvbklkKSx0aGlzLlREPWUuVEQsdGhpcy5jNz1uZXcgaSx0aGlzLnU3PW5ldyBpLHRoaXMuaDcmJnRoaXMubDcoKX0sZS5wcm90b3R5cGUuZmo9ZnVuY3Rpb24oZSx0LHIpe3RyeXtpZighdGhpcy5oNylyZXR1cm4hMTtpZih0aGlzLmM3LmhhcyhlKXx8IXR8fCFyKXJldHVybiExO3ZhciBpPXRoaXMucDcodCxyKTtpZihpJiZ0aGlzLnU3LmhhcyhpKSl7aWYodGhpcy51Ny5nZXQoaSkubGVuZ3RoPj1uLmhoLlZvLnFvKXJldHVybiBhLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgcGVlciB2aW9sYXRlcyBpcCBzcG9vZmluZyBydWxlc1wiLHRoaXMubG9nZ2VySWQsby5ocy5ibi5Tbix7cHJpdmF0ZUlwOnQscHVibGljSXA6cixvdGhlckd1aWQ6ZX0pLHRoaXMubG9nZ2VyLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJTcG9vZmluZyBydWxlIHZpb2xhdGVkIGZvciBcIitlK1wiIHdpdGggcHJpdmF0ZUlwIFwiK3QrXCIgcHVibGljSXAgXCIrciksITB9cmV0dXJuITF9Y2F0Y2godCl7cmV0dXJuIGEuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBjaGVja2luZyBpZiBwZWVyIHZpb2xhdGVzIGlwIHNwb29maW5nIHJ1bGVzXCIsdGhpcy5sb2dnZXJJZCxvLmhzLmJuLkluLHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmV9KSwhMX19LGUucHJvdG90eXBlLlRqPWZ1bmN0aW9uKGUsdCxyKXt0cnl7aWYodGhpcy5oNyYmciYmdCl7dmFyIGk9dGhpcy5wNyh0LHIpLG49dGhpcy5jNy5nZXQoZSk7biYmbiE9aSYmdGhpcy5kNyhlLG4pLHRoaXMuZjcoZSxpKX19Y2F0Y2godCl7YS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGFkZGluZyBvciB1cGRhdGluZyBpcCBzcG9vZmluZyBtYXBzXCIsdGhpcy5sb2dnZXJJZCxvLmhzLmJuLlJuLHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmV9KX19LGUucHJvdG90eXBlLmc3PWZ1bmN0aW9uKGUpe3RoaXMuaDcmJnRoaXMuR2ooZSl9LGUucHJvdG90eXBlLktHPWZ1bmN0aW9uKGUpe3RoaXMuaDcmJnRoaXMuR2ooZSl9LGUucHJvdG90eXBlLmY3PWZ1bmN0aW9uKGUsdCl7dGhpcy5jNy5zZXQoZSx0KTt2YXIgcj1bXTt0aGlzLnU3Lmhhcyh0KSYmKHI9dGhpcy51Ny5nZXQodCksLTEhPXIuaW5kZXhPZihlKSl8fChyLnB1c2goZSksdGhpcy51Ny5zZXQodCxyKSl9LGUucHJvdG90eXBlLkdqPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYzcuZ2V0KGUpO3Q/KHRoaXMuZDcoZSx0KSx0aGlzLmM3LmRlbGV0ZShlKSk6dGhpcy5sb2dnZXIud2Fybih0aGlzLmxvZ2dlcklkK1wibm8gaXAgcGFpciBmb3IgZ3VpZCBcIitlKX0sZS5wcm90b3R5cGUuZDc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLnU3LmdldCh0KSxpPXIuaW5kZXhPZihlKTstMSE9aT8oci5zcGxpY2UoaSwxKSwwPT1yLmxlbmd0aD90aGlzLnU3LmRlbGV0ZSh0KTp0aGlzLnU3LnNldChlLHIpKTp0aGlzLmxvZ2dlci53YXJuKHRoaXMubG9nZ2VySWQrXCJwYWlyIGxpc3QgXCIrdCtcIiBkb2VzIG5vdCBjb250YWluIGd1aWQgXCIrZSl9LGUucHJvdG90eXBlLnA3PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQrXCI6XCIrZX0sZS5wcm90b3R5cGUubDc9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3MuRnJhbWV3b3JrLnNldEludGVydmFsKGZ1bmN0aW9uKCl7dHJ5e3ZhciB0PVtdO2UudTcuZm9yRWFjaChmdW5jdGlvbihyLGkpe2lmKHIubGVuZ3RoPm4uaGguVm8ucW8pe2Zvcih2YXIgcz1bXSxvPW4uaGguVm8ucW87bzxyLmxlbmd0aDtvKyspcy5wdXNoKHJbb10pO2UubG9nZ2VyLndhcm4oXCJJcFNwb29maW5nIHZpb2xhdGlvbiBmb3IgXCIraStcIiAtIGNsb3Npbmc6IFwiK3MpLHQuY29uY2F0KHMpfX0pLHQuZm9yRWFjaChmdW5jdGlvbih0KXtlLlRELmJqKHQpfSl9Y2F0Y2godCl7YS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGNoZWNraW5nIHBlcmlvZGljIGlwIHNwb29maW5nIHRhYmxlc1wiLGUubG9nZ2VySWQsby5ocy5ibi53bix0KX19LG4uaGguVm8uR28pfSxlfSgpKTt0LlZvPWN9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLmh1fHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKGVbaV09dFtpXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXIoMTkwKSxzPXIoNSksbz1yKDk4KSxhPXIoMCksaD1yKDIpLGM9cigxKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQuRTc9XCJbU2NvcmUgUGFydG5lciBTZWxlY3Rpb25dIFwiLHQudHlwZT1cIlNjb3JlXCIsdH1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLnY3PWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiB0LnNvcnQoby5FUS5kUSksdC5zbGljZSgwLGUpfWNhdGNoKGUpe3JldHVybiBjLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2VsZWN0aW5nIHBhcnRuZXJzIHRvIHJlbW92ZVwiLHRoaXMuRTcsaC5ocy52ci5wcixlKSxbXX19LHQucHJvdG90eXBlLnk3PWZ1bmN0aW9uKGUsdCxyLGkpe3RyeXtyZXR1cm4gaS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHQuZXZlcnkoZnVuY3Rpb24odCl7cmV0dXJuIHQuZ3VpZCE9ZS5wZWVySW5mby5ndWlkfSkmJi0xPT1yLmluZGV4T2YoZS5wZWVySW5mby5ndWlkKX0pLnNsaWNlKDAsZSl9Y2F0Y2goZSl7cmV0dXJuIGMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBzZWxlY3RpbmcgcGFydG5lcnMgdG8gYWRkXCIsdGhpcy5FNyxoLmhzLnZyLmRyLGUpLFtdfX0sdH0obi5UNyk7dC5PSj11O3ZhciBsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuRTc9XCJbU2NvcmUgUGFydG5lciBTZWxlY3Rpb25dIFwifXJldHVybiBlLnByb3RvdHlwZS5Oaj1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9ZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIWUud2oueWcuRGcoKX0pLHI9YS5GcmFtZXdvcmsudGltZSgpLGk9dC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHItZS55OD5zLmhoLkhvLkJvfSk7cmV0dXJuIGkubGVuZ3RoPjA/KGkuc29ydChvLnlRLmRRKSxpLnNsaWNlKDAsMSlbMF0pOm51bGx9Y2F0Y2goZSl7cmV0dXJuIGMuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciB1cGRhdGluZyBwYXJ0bmVycyBvdXRcIix0aGlzLkU3LGguaHMudnIuZ3IsZSksbnVsbH19LGV9KCk7dC5OSj1sfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cig5Nyksbj1yKDUpLHM9cigwKSxvPXIoMSksYT1yKDIpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5qTT1cIltCYXNlSW5QYXJ0bmVyU2VsZWN0aW9uXSBcIix0aGlzLmxvZ2dlcj1zLkZyYW1ld29yay5yZXNvbHZlKHMuRnJhbWV3b3JrLlYuUikubG9nKCl9cmV0dXJuIGUucHJvdG90eXBlLnVqPWZ1bmN0aW9uKGUsdCxyLGgpe3RyeXt2YXIgYz1bXSx1PVtdLGw9TWF0aC5yb3VuZChlKigxLW4uaGguTm8uQW8pKSxwPU1hdGgubWF4KHQubGVuZ3RoLWwsMCksZD1lLXQubGVuZ3RoK3A7aWYocD4wKXt2YXIgZj10LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hZS53ai55Zy5EZygpfSksZz1zLkZyYW1ld29yay50aW1lKCksRT1mLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZy1lLnk4Pm4uaGguSG8uQm99KSx2PU1hdGgubWluKEUubGVuZ3RoLHApO3U9dGhpcy52Nyh2LEUpO3ZhciB5PVtdLFQ9W107dS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3kucHVzaChlLmd1aWQpLFQucHVzaChlLmdRLmZRKCExKSl9KX1yZXR1cm4gZD4wJiYoYz10aGlzLnk3KGQsdCxyLGgpKSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIltQQVJUXSBBL1I6IFwiK2QrXCIvXCIrcCtcIiBbXCIrYy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUucGVlckluZm8uZ3VpZC5zdWJzdHJpbmcoMCw4KX0pK1wiL1wiK3UubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmd1aWQuc3Vic3RyaW5nKDAsOCl9KStcIl0gUDpbXCIrdC5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ3VpZC5zdWJzdHJpbmcoMCw4KX0pK1wiXSBNOltcIitoLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5wZWVySW5mby5ndWlkLnN1YnN0cmluZygwLDgpfSkrXCJdXCIpLG5ldyBpLnBRKGMsdSl9Y2F0Y2goZSl7cmV0dXJuIG8uRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciB1cGRhdGluZyBpbiBwYXJ0bmVyc1wiLHRoaXMuak0sYS5ocy5sci51cixlKSxuZXcgaS5wUShbXSxbXSl9fSxlfSgpO3QuVDc9aH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoMyksbj1yKDk3KSxzPXIoNSksbz1yKDApLGE9cig3KSxoPXIoOTgpLGM9cigyKSx1PXIoMSksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLm03PVwiW0RlbHRhIFBhcnRuZXIgU2VsZWN0aW9uXSBcIn1yZXR1cm4gZS5wcm90b3R5cGUudWo9ZnVuY3Rpb24oZSx0LHIsaSxhKXt0cnl7dGhpcy55RD1lO3ZhciBoPVtdLGw9W10scD1NYXRoLnJvdW5kKHQqKDEtcy5oaC5Oby5BbykpLGQ9TWF0aC5tYXgoci5sZW5ndGgtcCwwKSxmPXQtci5sZW5ndGgrZDtpZihkPjApe3ZhciBnPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLndqLnlnLkRnKCl9KSxFPW8uRnJhbWV3b3JrLnRpbWUoKSx2PWcuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBFLWUueTg+cy5oaC5Iby5Cb30pLHk9TWF0aC5taW4odi5sZW5ndGgsZCk7bD10aGlzLnY3KHksdiksbC5sZW5ndGg+eSYmKGYrPWwubGVuZ3RoLXkpO3ZhciBUPVtdLG09W107bC5mb3JFYWNoKGZ1bmN0aW9uKGUpe1QucHVzaChlLmd1aWQpLG0ucHVzaChlLmdRLmZRKCExKSl9KX1yZXR1cm4gZj4wJiYoaD10aGlzLnk3KGYscixpLGEpKSxuZXcgbi5wUShoLGwpfWNhdGNoKGUpe3JldHVybiB1LkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgdXBkYXRpbmcgaW4gcGFydG5lcnNcIix0aGlzLm03LGMuaHMuUnIudXIsZSksbmV3IG4ucFEoW10sW10pfX0sZS5wcm90b3R5cGUudjc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3RyeXt0LnNvcnQoaC5FUS5kUSk7dmFyIGk9dC5zbGljZSgwLGUpO3JldHVybiB0LnNsaWNlKGUsdC5sZW5ndGgpLmZvckVhY2goZnVuY3Rpb24oZSl7ci5JNyhlLkVrKSYmaS5wdXNoKGUpfSksaX1jYXRjaChlKXtyZXR1cm4gdS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHNlbGVjdGluZyBwYXJ0bmVycyB0byByZW1vdmVcIix0aGlzLm03LGMuaHMuUnIucHIsZSksW119fSxlLnByb3RvdHlwZS55Nz1mdW5jdGlvbihlLHQscixpKXt2YXIgbj10aGlzO3RyeXt2YXIgbz1bXSxhPVtdLGg9W10sbD1bXSxwPVtdLGQ9dGhpcy55RC5naygpO2R8fChkPS0xKTt2YXIgZj1bXTt0LmZvckVhY2goZnVuY3Rpb24oZSl7Zi5wdXNoKGUuZ3VpZCl9KTt2YXIgZz1NYXRoLmZsb29yKGUqcy5oaC5Iby5NbyksRT10aGlzLnlELlVqKCk7aS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWUucGVlckluZm8uc3RyZWFtcztpZih0KXt2YXIgcj1uLmlzTGVhZGVyKGUsdCxkLEUpO3IuY0c/ci5TNz9vLnB1c2goZSk6YS5wdXNoKGUpOm4uUjcoZSxzLmhoLkhvLkxvKT9uLkk3KGUpP3AucHVzaChlKTpsLnB1c2goZSk6aC5wdXNoKGUpfWVsc2UgcC5wdXNoKGUpfSk7dmFyIHY9dGhpcy53NyhvLGEsaCxsLHAsZSxlLGcpO3JldHVybiB2LnNsaWNlKDAsTWF0aC5taW4odi5sZW5ndGgsZSkpfWNhdGNoKGUpe3JldHVybiB1LkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3Igc2VsZWN0aW5nIHBhcnRuZXJzIHRvIGFkZFwiLHRoaXMubTcsYy5ocy5Sci5kcixlKSxbXX19LGUucHJvdG90eXBlLnc3PWZ1bmN0aW9uKGUsdCxyLGksbixoLGwscCl7dHJ5e3ZhciBkPVtdLGY9W107ZS5sZW5ndGg+MCYmby5GcmFtZXdvcmsucmFuZG9tKCk8cy5oaC5Iby5GbyYmKGU9YS5yYy56aChlKSxmPWUuc2xpY2UoMCxNYXRoLm1pbihlLmxlbmd0aCxwKSksZC5wdXNoLmFwcGx5KGQsZiksbD1oLWYubGVuZ3RoKTt2YXIgZz1bXTt0Lmxlbmd0aD4wJiYodD1hLnJjLnpoKHQpLGc9dC5zbGljZSgwLE1hdGgubWluKHQubGVuZ3RoLHApKSxkLnB1c2guYXBwbHkoZCxnKSxsPWgtZy5sZW5ndGgpO3ZhciBFPVtdO3IubGVuZ3RoPjAmJihyPWEucmMuemgociksRT1yLnNsaWNlKDAsTWF0aC5taW4oci5sZW5ndGgscCkpLGQucHVzaC5hcHBseShkLEUpLGw9aC1FLmxlbmd0aCk7dmFyIHY9bnVsbDtpZihpLmxlbmd0aD4wKXtpPWEucmMuemgoaSksdj1pLnNsaWNlKDAsTWF0aC5taW4oaS5sZW5ndGgsbCkpO2w9aC0oKEUubGVuZ3RoPjA/RS5sZW5ndGg6MCktdi5sZW5ndGgpfXZhciB5PVtdO3JldHVybiBsPjAmJm4ubGVuZ3RoPjAmJihuPWEucmMuemgobikseT1uLnNsaWNlKDAsTWF0aC5taW4obi5sZW5ndGgsbCkpLGQucHVzaC5hcHBseShkLHkpKSxkfWNhdGNoKGUpe3JldHVybiB1LkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgZ3JvdXBpbmcgcGFydG5lcnNcIix0aGlzLm03LGMuaHMuUnIueXIsZSksW119fSxlLnByb3RvdHlwZS5pc0xlYWRlcj1mdW5jdGlvbihlLHQscixuKXt0cnl7dmFyIHM9ITEsbz0hMSxhPW5ldyBpO3QuZm9yRWFjaChmdW5jdGlvbihlKXthLnNldChlLmJpdHJhdGUsZSl9KTt2YXIgaD1uZXcgaTtyZXR1cm4gYS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7bi5oYXModCkmJmguc2V0KHQsZSl9KSxoLmtleXMoKS5sZW5ndGg+MCYmaC5mb3JFYWNoKGZ1bmN0aW9uKHQsaSl7dmFyIGE9bi5nZXQoaSk7aWYoYSYmdC5zdGF0ZT49MiYmYS50eXBlPj0xKXt2YXIgaD1lLnBlZXJJbmZvLmludGVybmFsQXM7aD4wJiZoPT1yJiYobz0hMCkscz0hMH19KSx7Y0c6cyxTNzpvfX1jYXRjaCh0KXtyZXR1cm4gdS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIGlkZW50aWZ5aW5nIGlmIG1lbWJlciBpcyBsZWFkZXIgb3Igc2FtZSBzaXRlXCIsdGhpcy5tNyxjLmhzLlJyLlRyLHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmUucGVlckluZm8uZ3VpZH0pLHtjRzohMSxTNzohMX19fSxlLnByb3RvdHlwZS5SNz1mdW5jdGlvbihlLHQpe3RyeXt2YXIgcj10aGlzLnlELmdldERlbHRhKCksaT10aGlzLnlELk1YKCksbj10aGlzLmI3KGUsaSk7cmV0dXJuKDAhPXJ8fDAhPW4pJiYocjxuJiZyPm4rdCl9Y2F0Y2godCl7cmV0dXJuIHUuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBpZGVudGlmeWluZyBpZiBtZW1iZXIgaXMgYWhlYWQgb3IgYmVoaW5kIGRlbHRhXCIsdGhpcy5tNyxjLmhzLlJyLm1yLHtkZXRhaWxlZEVycm9yOnQsb3RoZXJHdWlkOmUucGVlckluZm8uZ3VpZH0pLCExfX0sZS5wcm90b3R5cGUuSTc9ZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PXRoaXMueUQuZ2V0RGVsdGEoKSxyPXRoaXMueUQuTVgoKSxpPXRoaXMuYjcoZSxyKTtyZXR1cm4gMD09dCYmMD09aXx8dD5pfWNhdGNoKHQpe3JldHVybiB1LkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiRXJyb3IgaWRlbnRpZnlpbmcgaWYgbWVtYmVyIGlzIGJlaGluZCBvciBub3QgcmV0cmlldmVpbmcgdGhlIHNhbWUgYml0cmF0ZVwiLHRoaXMubTcsYy5ocy5Sci5Jcix7ZGV0YWlsZWRFcnJvcjp0LG90aGVyR3VpZDplLnBlZXJJbmZvLmd1aWR9KSwhMX19LGUucHJvdG90eXBlLmI3PWZ1bmN0aW9uKGUsdCl7dHJ5e3ZhciByPWUucGVlckluZm8uc3RyZWFtcyxpPTA7cmV0dXJuIHImJnIuZm9yRWFjaChmdW5jdGlvbihlKXtlLmJpdHJhdGU9PXQmJihpPWUuZGVsdGEpfSksaX1jYXRjaCh0KXtyZXR1cm4gdS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHJldHJpZXZpbmcgZGVsdGEgZm9yIG1lbWJlcidzIGJpdHJhdGVcIix0aGlzLm03LGMuaHMuUnIuU3Ise2RldGFpbGVkRXJyb3I6dCxvdGhlckd1aWQ6ZS5wZWVySW5mby5ndWlkfSksMH19LGV9KCk7dC5ESj1sO3ZhciBwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubG9nZ2VySWQ9XCJbVGhyb3VnaHB1dCBQYXJ0bmVyIFNlbGVjdGlvbl0gXCIsdGhpcy5sb2dnZXI9by5GcmFtZXdvcmsucmVzb2x2ZShvLkZyYW1ld29yay5WLlIpLmxvZygpfXJldHVybiBlLnByb3RvdHlwZS5Oaj1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpczt0cnl7dGhpcy55RD1lO3ZhciBhPXRoaXMueUQuVWooKSxoPXQuc3RyZWFtcztpZihoKXt2YXIgbD1yLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hZS53ai55Zy5EZygpfSkscD1vLkZyYW1ld29yay50aW1lKCksZD1sLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gcC1lLnk4PnMuaGguSG8uQm99KTtpZigwPT1oLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gYS5oYXMoZS5iaXRyYXRlKX0pLmxlbmd0aClyZXR1cm4gbnVsbDt2YXIgZj10aGlzLkM3KGQpLGc9dGhpcy5fNyhhLGYpO2lmKGcpcmV0dXJuIGc7dmFyIEU9YS5rZXlzKCkubGVuZ3RoLHY9ZC5sZW5ndGgseT1NYXRoLnJvdW5kKHYvRSksVD1mLmtleXMoKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGEuaGFzKGUpfSksbT1uZXcgaTtULmZvckVhY2goZnVuY3Rpb24oZSl7bS5zZXQoZSxmLmdldChlKSl9KTt2YXIgST10aGlzLlA3KG0seSk7cmV0dXJuIG51bGwhPUk/STooaC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW0uZ2V0KGUuYml0cmF0ZSk7aWYobnVsbCE9dCl7dmFyIHI9bi5BNyh0KTtpZihyLmxlbmd0aD4wJiYhcy5oaC5Iby5VbylyZXR1cm4gclswXX19KSxudWxsKX1yZXR1cm4gbnVsbH1jYXRjaChlKXtyZXR1cm4gdS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkVycm9yIHNlbGVjdGluZyBwYXJ0bmVyIHRvIHVwZGF0ZSBvdXRcIix0aGlzLmxvZ2dlcklkLGMuaHMuYnIud3IsZSksbnVsbH19LGUucHJvdG90eXBlLkM3PWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9ZS5Fay5wZWVySW5mby53YXRjaGluZ0JpdHJhdGU7aWYocnx8KHI9LTEpLHQuaGFzKHIpKXt2YXIgaT10LmdldChyKTtpLnB1c2goZSksdC5zZXQocixpKX1lbHNlIHQuc2V0KHIsW2VdKX0pLHR9LGUucHJvdG90eXBlLkE3PWZ1bmN0aW9uKGUpe3JldHVybiBlLmZpbHRlcihmdW5jdGlvbihlKXtpZigwPT1lLnZRLkk1KHMuaGguT2EuQWEpKXJldHVybiBlfSl9LGUucHJvdG90eXBlLlA3PWZ1bmN0aW9uKGUsdCl7dmFyIHI9W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ci5wdXNoKHtiaXRyYXRlOnQsTzc6ZS5sZW5ndGh9KX0pLHIuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLk83PnQuTzc/MTplLk83PHQuTzc/MDotMX0pO3ZhciBpPW51bGw7cmV0dXJuIHIuZm9yRWFjaChmdW5jdGlvbihyKXtpZihlLmdldChyLmJpdHJhdGUpLmxlbmd0aD50KXt2YXIgbj1lLmdldChyLmJpdHJhdGUpO24ubGVuZ3RoPjAmJihuLnNvcnQoaC55US5kUSksaT1uWzBdKX19KSxpfSxlLnByb3RvdHlwZS5fNz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT1udWxsO2lmKHQuaGFzKC0xKSlpPXQuZ2V0KC0xKVswXTtlbHNle3QuZmlsdGVyKGZ1bmN0aW9uKHQscil7cmV0dXJuIWUuaGFzKHIpfSkuZm9yRWFjaChmdW5jdGlvbihlLHQpe3ZhciBuPXIuQTcoZSk7aWYobi5sZW5ndGg+MClyZXR1cm4gdm9pZChpPW5bMF0pfSl9cmV0dXJuIGl9LGV9KCk7dC5rSj1wfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigwKSxuPXIoOSkscz1yKDM0KSxvPXIoMjQpLGE9cigxMCksaD1yKDE0KSxjPXIoNSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLk43PSEwPT09aC5IaXZlQ29uZmlnLlN0YXRzLkF1ZGlvQWNjb3VudGluZyx0aGlzLkQ3PW51bGx9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9aS5GcmFtZXdvcmsucmVzb2x2ZShpLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy5sb2dnZXJJZD1cIlNbXCIrZS5zZXNzaW9uSWQrXCJdXCIsdGhpcy5VbD1lLnJsLlVsLHRoaXMueUQ9ZS55RCx0aGlzLnBYKCl9LGUucHJvdG90eXBlLloxPWZ1bmN0aW9uKGUpe3RoaXMuVWwuRkwubWV0cmljcy5tZW1OPWUsdGhpcy5VbC5pQi5tZXRyaWNzLm1lbU49ZX0sZS5wcm90b3R5cGUudmo9ZnVuY3Rpb24oZSx0KXt0aGlzLlVsLkZMLm1ldHJpY3MubG9va3VwVG90YWwrKyx0aGlzLlVsLmlCLm1ldHJpY3MubG9va3VwVG90YWwrKyxlPyh0aGlzLlVsLkZMLm1ldHJpY3MubG9va3VwTm90Rm91bmQrKyx0aGlzLlVsLmlCLm1ldHJpY3MubG9va3VwTm90Rm91bmQrKyx0aGlzLlVsLkZMLm1ldHJpY3MubG9va3VwRmFpbGVkKyssdGhpcy5VbC5pQi5tZXRyaWNzLmxvb2t1cEZhaWxlZCsrKTp0Pyh0aGlzLlVsLkZMLm1ldHJpY3MubG9va3VwRmFpbGVkKyssdGhpcy5VbC5pQi5tZXRyaWNzLmxvb2t1cEZhaWxlZCsrKToodGhpcy5VbC5GTC5tZXRyaWNzLmxvb2t1cFJlcUVzdGFibGlzaGVkKyssdGhpcy5VbC5pQi5tZXRyaWNzLmxvb2t1cFJlcUVzdGFibGlzaGVkKyspfSxlLnByb3RvdHlwZS5Naj1mdW5jdGlvbigpe3RoaXMuVWwuRkwubWV0cmljcy5sb29rdXBSZXFBY2NlcHQrKyx0aGlzLlVsLmlCLm1ldHJpY3MubG9va3VwUmVxQWNjZXB0Kyt9LGUucHJvdG90eXBlLlM4PWZ1bmN0aW9uKGUsdCxyLGksbil7aWYodGhpcy5ON3x8aSl7dmFyIHM9bj09by5iZi53ZixhPXRoaXMuVWwuT0IoZSksaD10aGlzLlVsLkFCKGUpO2EucDJwU3VjY1JlcSsrLGEucDJwU3VjY1JlY2VpdmVkKz10LGgucDJwU3VjY1JlcSsrLGgucDJwU3VjY1JlY2VpdmVkKz10LHMmJihhLnAycFN1Y2NSZWNlaXZlZExvdys9dCxoLnAycFN1Y2NSZWNlaXZlZExvdys9dCkscj4wJiYhcyYmKGEucDJwU3VjY1JlY2VpdmVkTG93Kz10LGgucDJwU3VjY1JlY2VpdmVkTG93Kz10KX19LGUucHJvdG90eXBlLmI4PWZ1bmN0aW9uKGUsdCxyLGksbixzKXtpZih0aGlzLk43fHxuKXt2YXIgYT1zPT1vLmJmLndmLGg9dGhpcy5VbC5PQihlKSxjPXRoaXMuVWwuQUIoZSk7aC5wMnBGYWlsUmVxKyssaC5wMnBTdWNjUmVjZWl2ZWQrPXQsaC5wMnBGYWlsUmVjZWl2ZWQrPWktdCxjLnAycFN1Y2NSZXErKyxjLnAycFN1Y2NSZWNlaXZlZCs9dCxjLnAycEZhaWxSZWNlaXZlZCs9aS10LGEmJihoLnAycFN1Y2NSZWNlaXZlZExvdys9dCxjLnAycFN1Y2NSZWNlaXZlZExvdys9dCkscj4wJiYhYSYmKGgucDJwU3VjY1JlY2VpdmVkTG93Kz10LGMucDJwU3VjY1JlY2VpdmVkTG93Kz10KX19LGUucHJvdG90eXBlLkM4PWZ1bmN0aW9uKGUsdCxyKXtpZih0aGlzLk43fHxyKXt2YXIgaT10aGlzLlVsLk9CKGUpLG49dGhpcy5VbC5BQihlKTtpLnAycEZhaWxSZXErKyxpLnAycEZhaWxSZWNlaXZlZCs9dCxuLnAycEZhaWxSZXErKyxuLnAycEZhaWxSZWNlaXZlZCs9dH19LGUucHJvdG90eXBlLlA4PWZ1bmN0aW9uKGUsdCxyKXtpZih0aGlzLk43fHxyKXt2YXIgaT10aGlzLlVsLk9CKHQpLG49dGhpcy5VbC5BQih0KTtpLnAycFN1Y2NSZXNwKyssaS5wMnBTdWNjU2VudCs9ZSxuLnAycFN1Y2NSZXNwKyssbi5wMnBTdWNjU2VudCs9ZX19LGUucHJvdG90eXBlLkQ4PWZ1bmN0aW9uKGUsdCxyLGkpe2lmKHRoaXMuTjd8fGkpe3ZhciBuPXRoaXMuVWwuT0Iocikscz10aGlzLlVsLkFCKHIpO24ucDJwUGFydFJlc3ArKyxuLnAycFN1Y2NTZW50Kz1lLG4ucDJwRmFpbFNlbnQrPXQtZSxzLnAycFBhcnRSZXNwKysscy5wMnBTdWNjU2VudCs9ZSxzLnAycEZhaWxTZW50Kz10LWV9fSxlLnByb3RvdHlwZS5POD1mdW5jdGlvbihlLHQscil7aWYodGhpcy5ON3x8cil7dmFyIGk9dGhpcy5VbC5PQih0KSxuPXRoaXMuVWwuQUIodCk7aS5wMnBGYWlsUmVzcCsrLGkucDJwRmFpbFNlbnQrPWUsbi5wMnBGYWlsUmVzcCsrLG4ucDJwRmFpbFNlbnQrPWV9fSxlLnByb3RvdHlwZS5aTT1mdW5jdGlvbihlKXtlP3RoaXMuVWwuRkwubWV0cmljcy5iaXRyYXRlVXBOKys6dGhpcy5VbC5GTC5tZXRyaWNzLmJpdHJhdGVEd25OKyt9LGUucHJvdG90eXBlLk5YPWZ1bmN0aW9uKGUpe2lmKC0xPT1bbi52Yy5nYyxuLnZjLkVjXS5pbmRleE9mKGUuWGYoKSkpe3ZhciB0PWUuWGYoKSE9bi52Yy5kYztpZigodGhpcy5ON3x8dCkmJih0aGlzLlVsLmJCKCkucmVxTisrLHRoaXMuVWwueEwoKS5yZXFOKyssZS5YZigpPT1uLnZjLmZjKSl7dmFyIHI9ZTtpZihyLmJpdHJhdGUpe3ZhciBpPXIuYml0cmF0ZTt0aGlzLlVsLkNCKGkpLnJlcU4rKyx0aGlzLlVsLkJMKGkpLnJlcU4rK319fWVsc2UgdGhpcy5VbC5iQigpLnJlcU90aGVyTisrLHRoaXMuVWwueEwoKS5yZXFPdGhlck4rK30sZS5wcm90b3R5cGUuJFg9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5YZigpIT1uLnZjLmRjO2lmKHRoaXMuTjd8fHQpe3ZhciByPXRoaXMuVWwuYkIoKSxpPXRoaXMuVWwueEwoKSxzPW51bGwsYT1udWxsO2lmKC0xPT1bbi52Yy5nYyxuLnZjLkVjXS5pbmRleE9mKGUuWGYoKSkpe2lmKHIuc3JjUmVxTisrLGkuc3JjUmVxTisrLHQpe3ZhciBoPXRoaXMuazcoZSk7aCYmKHM9dGhpcy5VbC5DQihoKSxhPXRoaXMuVWwuQkwoaCkscy5zcmNSZXFOKyssYS5zcmNSZXFOKyspfWlmKGUuSmYoKT09by5iZi5JZiYmKHIuc3JjT3RoZXJSZXFOKyssaS5zcmNPdGhlclJlcU4rKyx0KSl7dmFyIGg9dGhpcy5rNyhlKTtoJiYocy5zcmNPdGhlclJlcU4rKyxhLnNyY090aGVyUmVxTisrKX19fX0sZS5wcm90b3R5cGUudDU9ZnVuY3Rpb24oZSl7aWYodGhpcy5VbC5iQigpLnAycFN1YlJlcU4rKyx0aGlzLlVsLnhMKCkucDJwU3ViUmVxTisrLGUuWGYoKT09bi52Yy5mYyl7dmFyIHQ9dGhpcy5rNyhlKTt0JiYodGhpcy5VbC5DQih0KS5wMnBTdWJSZXFOKyssdGhpcy5VbC5CTCh0KS5wMnBTdWJSZXFOKyspfX0sZS5wcm90b3R5cGUuTDc9ZnVuY3Rpb24oZSx0KXt0aGlzLk03KGUsdGhpcy5VbC54TCgpKSx0aGlzLk03KGUsdGhpcy5VbC5iQigpKTt2YXIgcj10aGlzLms3KGUpO3ImJmUuWGYoKT09PW4udmMuZmMmJih0aGlzLk03KGUsdGhpcy5VbC5DQihyKSksdGhpcy5NNyhlLHRoaXMuVWwuQkwocikpKSxpc05hTih0KXx8KHRoaXMuVWwuRkwubWV0cmljcy5zcmNUaHJvdWdocHV0PXQpfSxlLnByb3RvdHlwZS5uWj1mdW5jdGlvbihlLHQpe3ZhciByPWUuWGYoKSE9bi52Yy5kYzsodGhpcy5ON3x8cikmJigtMSE9W24udmMuZ2Msbi52Yy5FY10uaW5kZXhPZihlLlhmKCkpPyh0aGlzLlVsLmJCKCkucmVzcEZhbGxiYWNrT3RoZXJOKyssdGhpcy5VbC54TCgpLnJlc3BGYWxsYmFja090aGVyTisrKTp0aGlzLkw3KGUsdCkpfSxlLnByb3RvdHlwZS50Wj1mdW5jdGlvbihlLHQpe2lmKC0xIT1bbi52Yy5nYyxuLnZjLkVjXS5pbmRleE9mKGUuWGYoKSkpdGhpcy5VbC5iQigpLnJlc3BGYWxsYmFja090aGVydEVyck4rKyx0aGlzLlVsLnhMKCkucmVzcEZhbGxiYWNrT3RoZXJ0RXJyTisrO2Vsc2V7dmFyIHI9ZS5YZigpIT1uLnZjLmRjO2lmKHRoaXMuTjd8fHIpaWYodGhpcy5YTShlLnR5cGUpKXtpZih0aGlzLlVsLnhMKCkucmVzcEZhbGxiYWNrRXJyTisrLHRoaXMuVWwuYkIoKS5yZXNwRmFsbGJhY2tFcnJOKysscil7dmFyIGk9dGhpcy5rNyhlKTtpJiYodGhpcy5VbC5DQihpKS5yZXNwRmFsbGJhY2tFcnJOKyssdGhpcy5VbC5CTChpKS5yZXNwRmFsbGJhY2tFcnJOKyspfWlmKDA9PWUucWYuRGYmJih0aGlzLlVsLnhMKCkuc3JjUmVzcEVyck4rKyx0aGlzLlVsLmJCKCkuc3JjUmVzcEVyck4rKyxyKSl7dmFyIGk9dGhpcy5rNyhlKTtpJiZlLlhmKCk9PT1uLnZjLmZjJiYodGhpcy5VbC5DQihpKS5zcmNSZXNwRXJyTisrLHRoaXMuVWwuQkwoaSkuc3JjUmVzcEVyck4rKyl9dGhpcy5MNyhlLHQpfWVsc2UgaWYoLTEhPWMuaGguWG8uSm8uaW5kZXhPZihlLktmLnN0YXR1cykpdGhpcy5VbC5iQigpLmZhbGxBZ2VudEZhaWxlZFJlc3BOKyssdGhpcy5VbC54TCgpLmZhbGxBZ2VudEZhaWxlZFJlc3BOKyssdGhpcy5VbC5iQigpLnJlcU4tLSx0aGlzLlVsLnhMKCkucmVxTi0tO2Vsc2V7aWYoMD09ZS5xZi5EZiYmKHRoaXMuVWwuYkIoKS5zcmNPdGhlclJlc3BFcnJOKyssdGhpcy5VbC54TCgpLnNyY090aGVyUmVzcEVyck4rKyksIXIpe3ZhciBpPXRoaXMuazcoZSk7aSYmZS5YZigpPT09bi52Yy5mYyYmKHRoaXMuVWwuQ0IoaSkuc3JjT3RoZXJSZXNwRXJyTisrLHRoaXMuVWwuQkwoaSkuc3JjT3RoZXJSZXNwRXJyTisrKX10aGlzLkw3KGUsdCl9fX0sZS5wcm90b3R5cGUuQlg9ZnVuY3Rpb24oZSx0KXtpZih0LldxPT1vLmJmLndmKXRoaXMuVWwueEwoKS5yZXNwUDJwTisrLHRoaXMuVWwuYkIoKS5yZXNwUDJwTisrO2Vsc2UgaWYodC5XcT09by5iZi5JZil0aGlzLlVsLnhMKCkucmVzcEZhbGxiYWNrTisrLHRoaXMuVWwuYkIoKS5yZXNwRmFsbGJhY2tOKys7ZWxzZSBpZih0LldxPT1vLmJmLlRmKXt0aGlzLlVsLnhMKCkubENhY2hlUmVzcE4rKyx0aGlzLlVsLmJCKCkubENhY2hlUmVzcE4rKzt2YXIgcj1pLkZyYW1ld29yay5DKCk/dC5sZW5ndGg6ZS5qZi5ieXRlTGVuZ3RoO3RoaXMuVWwueEwoKS5sQ2FjaGVSZXNwUXQrPXIsdGhpcy5VbC5iQigpLmxDYWNoZVJlc3BRdCs9cn19LGUucHJvdG90eXBlLnpYPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5YZigpIT1uLnZjLmRjOyh0aGlzLk43fHxyKSYmdGhpcy5MNyhlLHQpfSxlLnByb3RvdHlwZS5WWD1mdW5jdGlvbihlKXtpZigwIT1lLlFmKXt0aGlzLlVsLmJCKCkucDJwU3ViUmVzcEVyck4rKyx0aGlzLlVsLnhMKCkucDJwU3ViUmVzcEVyck4rKztpZihlLlhmKCk9PW4udmMuZmMpe3ZhciB0PXRoaXMuazcoZSk7dCYmKHRoaXMuVWwuQ0IodCkucDJwU3ViUmVzcEVyck4rKyx0aGlzLlVsLkJMKHQpLnAycFN1YlJlc3BFcnJOKyspfX19LGUucHJvdG90eXBlLnI1PWZ1bmN0aW9uKGUpe2lmKHRoaXMuVWwuYkIoKS5wMnBTdWJSZXNwRXhwTisrLHRoaXMuVWwueEwoKS5wMnBTdWJSZXNwRXhwTisrLGUuWGYoKT09bi52Yy5mYyl7dmFyIHQ9dGhpcy5rNyhlKTt0JiYodGhpcy5VbC5DQih0KS5wMnBTdWJSZXNwRXhwTisrLHRoaXMuVWwuQkwodCkucDJwU3ViUmVzcEV4cE4rKyl9fSxlLnByb3RvdHlwZS5NNz1mdW5jdGlvbihlLHQpe3ZhciByPWUucWYuUGYsaT1lLnFmLkRmLHM9ZS5xZi5BZixvPWUucWYuT2YsaD1lLnFmLk5mO2lmKGUuWGYoKSE9bi52Yy5nYyl7aWYoZS5xZi5DZiYmbyYmbzxyKXt2YXIgYz1vL3I7dC5wMnBTdWJSZXNwUGFydE4rPWMsdGhpcy5YTShlLnR5cGUpfHwodC5wMnBBZ2VuVHJhZmZpY0ZhaWx1cmVRdCs9ci1zKX1pZigwIT1oJiYoaD09ciYmdC5sQ2FjaGVSZXNwTisrLHQubENhY2hlUmVzcFF0Kz1lLnFmLk5mKSwwIT1zKWlmKHM9PXImJih0aGlzLlhNKGUudHlwZSkmJnQucmVzcFAycE4rKyx0LnAycFN1YlJlc3BOKyspLHQucDJwU3ViUmVxUXQrPXIsdC5wMnBTdWJSZXNwUXQrPXMsdC5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCs9ZS5xZi5wMnBBZ2VuVHJhZmZpY1N1Y2Nlc3NRdCx0LnAycERpcmVjdFF0Kz1zLGUueHEuRWsucGVlckluZm8udHlwZT09YS5UYy5XKXQucDJwVWRwYlF0Kz1zLHQucDJwTmF0UXQrPXM7ZWxzZXt2YXIgdT10aGlzLnlELmdrKCk7aWYodSYmdT4wKWlmKG51bGwhPWUucXEpe3ZhciBsPWUucXEuaW50ZXJuYWxBczt1PT09bCYmKHQucDJwTmF0UXQrPXMpfWVsc2UgdGhpcy5sb2dnZXIud2FybihcIk1pc3NpbmcgcGFydG5lciBpbmZvXCIpfX1pZigwIT1pKXtpZih0aGlzLkY3KGUudHlwZSkmJih0LnNyY090aGVyUmVxUXQrPWUucWYuRGYpLGk9PXIpdGhpcy5GNyhlLnR5cGUpPyh0LnNyY090aGVyUmVzcE4rKyx0LnNyY090aGVyUmVzcFF0Kz1lLnFmLkRmLHQuc3JjT3RoZXJPdmVyUXQrPWUucWYuRGYsdC5mYWxsQWdlbnRSZXNwTisrKTp0LnJlc3BGYWxsYmFja04rKyx0LnNyY1Jlc3BOKys7ZWxzZXt0LnNyY1Jlc3BFcnJOKys7dmFyIHA9aS8ocytpKTt0LnJlc3BGYWxsYmFja049cCx0LnJlc3BQMnBOPTEtcCx0aGlzLkY3KGUudHlwZSkmJih0LnNyY090aGVyUmVzcEVyck4rKyx0LnNyY090aGVyUmVzcFF0Kz1lLnFmLkRmLHQuc3JjT3RoZXJPdmVyUXQrPWUucWYuRGYsdC5mYWxsQWdlblRyYWZmaWNGYWlsdXJlUXQrPWUucWYuRGYpfXQuc3JjUmVxUXQrPWUucWYuRGYsdC5zcmNSZXNwUXQrPWUucWYuRGYsdC5zcmNPdmVyUXQrPWUucWYuRGYsdGhpcy5GNyhlLnR5cGUpJiYodC5mYWxsQWdlblRyYWZmaWNTdWNjZXNzUXQrPWUucWYua2YpfX0sZS5wcm90b3R5cGUuazc9ZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbDtpZihlLnpmIGluc3RhbmNlb2Ygcy5OXyl7dmFyIHI9ZS56ZjtyLmJpdHJhdGUmJih0PXIuYml0cmF0ZSl9cmV0dXJuIHR9LGUucHJvdG90eXBlLlhNPWZ1bmN0aW9uKGUpe3JldHVybiBlIT1vLmJmLndmJiZlIT1vLmJmLklmfSxlLnByb3RvdHlwZS5GNz1mdW5jdGlvbihlKXtyZXR1cm4hdGhpcy5YTShlKX0sZS5wcm90b3R5cGUucFg9ZnVuY3Rpb24oKXt0aGlzLlU3KCl9LGUucHJvdG90eXBlLmhYPWZ1bmN0aW9uKCl7aS5GcmFtZXdvcmsuY2xlYXJJbnRlcnZhbCh0aGlzLkQ3KSx0aGlzLkQ3PW51bGx9LGUucHJvdG90eXBlLlU3PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztudWxsIT10aGlzLkQ3JiYodGhpcy5ENz1pLkZyYW1ld29yay5zZXRJbnRlcnZhbChmdW5jdGlvbigpe2UuVWwuWlU9ZS55RC5GaigpLGUuVWwuWFU9ZS55RC5naygpLGUuVWwuSUI9ZS55RC5nZXRQdWJsaWNJcCgpfSxjLmhoLmloLnJoKSl9LGV9KCk7dC5USj11fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigwKSxuPXIoNSkscz1yKDEwKSxvPXIoMTk0KSxhPXIoMTQpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5CNz0hMSx0aGlzLmxvZ2dlcklkPVwiW1VEUEJEaXNjb3ZlcnldIFwiLHRoaXMuSDc9LTF9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5sb2dnZXI9aS5GcmFtZXdvcmsucmVzb2x2ZShpLkZyYW1ld29yay5WLlIpLmxvZyhlLnNlc3Npb25JZCksdGhpcy54Nz1lLlZKLHRoaXMueUQ9ZS55RH0sZS5wcm90b3R5cGUuSko9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZVt0XT1hcmd1bWVudHNbdF07dGhpcy52bD1lLHRoaXMuY29udGV4dElkPXRoaXMueUQuZ2V0Q29udGV4dElkKCl9LGUucHJvdG90eXBlLnN0YXJ0U2VydmVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmxvZ2dlci5kZWJ1Zyh0aGlzLmxvZ2dlcklkK1wiU1RBUlQgVURQIEJST0FEQ0FTVCBTRVJWRVJcIiksdGhpcy54Ny5zdGFydFNlcnZlcihuLmhoLlVEUEJyb2FkY2FzdC5VYSxmdW5jdGlvbih0LHIpe2lmKGUuSDc+LTEpe3ZhciBpPW8ucTcueWYocik7aWYoaS51dWlkIT1lLmd1aWQmJmkuc3RyZWFtSWQ9PWUuY29udGV4dElkJiZpLnAycFByb3RvY29sVmVyc2lvbj09PW4uaGguSG8uRG8pe2UubG9nZ2VyLmRlYnVnKGUubG9nZ2VySWQrXCJJIFJFQ0VJVkVEIEEgTUVTU0FHRSBGUk9NIFwiK2kudXVpZCk7dmFyIGE9bmV3IHMuYmMocy5UYy5XLG51bGwsaS5pc0xlYWRlcik7YS5ndWlkPWkudXVpZCxhLnByaXZhdGVJcFN0cmluZz10LGEucmFua1ZhbHVlPWkucmFua1ZhbHVlLGUudmwuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZS5nRyhbYV0sITEpfSl9fX0pfSxlLnByb3RvdHlwZS5sWD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5sb2dnZXIuaW5mbyh0aGlzLmxvZ2dlcklkK1wiU1RBUlQgQlJPQURDQVNUIEVWRVJZIFwiK24uaGguVURQQnJvYWRjYXN0LkJhKSwtMSE9dGhpcy5INyYmaS5GcmFtZXdvcmsuY2xlYXJJbnRlcnZhbCh0aGlzLkg3KSx0aGlzLkg3PWkuRnJhbWV3b3JrLnNldEludGVydmFsKGZ1bmN0aW9uKCl7ZS5HNygpfSxuLmhoLlVEUEJyb2FkY2FzdC5CYSksdGhpcy5HNygpfSxlLnByb3RvdHlwZS5zWD1mdW5jdGlvbigpey0xIT10aGlzLkg3JiZpLkZyYW1ld29yay5jbGVhckludGVydmFsKHRoaXMuSDcpfSxlLnByb3RvdHlwZS5HNz1mdW5jdGlvbigpe3ZhciBlPW5ldyBvLnE3KHRoaXMuY29udGV4dElkLHRoaXMueUQuZ2V0SWQoKSx0aGlzLnlELlFHKCksdGhpcy55RC5jaygpLG4uaGguSG8uRG8pO3RoaXMubG9nZ2VyLmluZm8odGhpcy5sb2dnZXJJZCtcIkJST0FEQ0FTVCBNRVNTQUdFIGNvbnRleHRJZCBcIitlLnN0cmVhbUlkK1wiIGlkIFwiK2UudXVpZCtcIiB1ZHBzY29yZSBcIitlLnJhbmtWYWx1ZStcIiBsYW4gbGVhZGVyIFwiK2UuaXNMZWFkZXIrXCIgcHJvdG9idWZWZXJzaW9uIFwiK2UucDJwUHJvdG9jb2xWZXJzaW9uKSxhLkhpdmVDb25maWcuVURQQnJvYWRjYXN0LnVzaXomJihuLmhoLlVEUEJyb2FkY2FzdC5IYT1hLkhpdmVDb25maWcuVURQQnJvYWRjYXN0LnVzaXopLHRoaXMueDcuYnJvYWRjYXN0KG4uaGguVURQQnJvYWRjYXN0LlVhLG4uaGguVURQQnJvYWRjYXN0LkhhLGUudmYoKSl9LGUucHJvdG90eXBlLlVkPWZ1bmN0aW9uKGUpe3RoaXMubG9nZ2VyLmluZm8oXCJVRFBESVNDT1ZFUlkgU0VSVkVSIENPTk5FQ1RFRFwiKSx0aGlzLkI3fHwodGhpcy5ndWlkPWUsdGhpcy5zdGFydFNlcnZlcigpLHRoaXMubFgoKSl9LGV9KCk7dC5nSj1ofSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGksbil7dGhpcy5zdHJlYW1JZD1lLHRoaXMudXVpZD10LHRoaXMucmFua1ZhbHVlPXIsdGhpcy5pc0xlYWRlcj1pLHRoaXMucDJwUHJvdG9jb2xWZXJzaW9uPW59cmV0dXJuIGUucHJvdG90eXBlLnZmPWZ1bmN0aW9uKCl7dmFyIGU9e3N0cmVhbUlkOnRoaXMuc3RyZWFtSWQsdXVpZDp0aGlzLnV1aWQscmFua1ZhbHVlOnRoaXMucmFua1ZhbHVlLGlzTGVhZGVyOnRoaXMuaXNMZWFkZXIscDJwUHJvdG9jb2xWZXJzaW9uOnRoaXMucDJwUHJvdG9jb2xWZXJzaW9ufTtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSx0aGlzLlY3KX0sZS5wcm90b3R5cGUuVjc9ZnVuY3Rpb24oZSx0KXtpZihudWxsIT09dClyZXR1cm4gdH0sZS55Zj1mdW5jdGlvbih0KXt2YXIgcj10LGk9SlNPTi5wYXJzZShyKTtyZXR1cm4gbmV3IGUoaS5zdHJlYW1JZCxpLnV1aWQsaS5yYW5rVmFsdWUsaS5pc0xlYWRlcixpLnAycFByb3RvY29sVmVyc2lvbil9LGV9KCk7dC5xNz1pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cigwKSxuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMubG9nZ2VySWQ9XCJbUHJveHlVRFBCXVwiLHRoaXMubG9nZ2VyPWkuRnJhbWV3b3JrLnJlc29sdmUoaS5GcmFtZXdvcmsuVi5SKS5sb2coKSx0aGlzLng3PXdpbmRvdy5teVVkcEJyb2FkY2FzdGVyLHRoaXMueDd8fHRoaXMubG9nZ2VyLmVycm9yKHRoaXMubG9nZ2VySWQrXCIgaGVscGVyIHVuZGVmaW5lZFwiKX1yZXR1cm4gZS5wcm90b3R5cGUuc3RhcnRTZXJ2ZXI9ZnVuY3Rpb24oZSx0KXt0cnl7dGhpcy54NyYmdGhpcy54Ny5zdGFydFNlcnZlcihlLHQpfWNhdGNoKGUpe3RoaXMubG9nZ2VyLndhcm4odGhpcy5sb2dnZXJJZCtlKX19LGUucHJvdG90eXBlLmo3PWZ1bmN0aW9uKCl7dHJ5e3RoaXMueDcmJnRoaXMueDcuajcoKX1jYXRjaChlKXt0aGlzLmxvZ2dlci53YXJuKHRoaXMubG9nZ2VySWQrZSl9fSxlLnByb3RvdHlwZS5icm9hZGNhc3Q9ZnVuY3Rpb24oZSx0LHIpe3RyeXt0aGlzLng3JiZ0aGlzLng3LmJyb2FkY2FzdChlLHQscil9Y2F0Y2goZSl7dGhpcy5sb2dnZXIud2Fybih0aGlzLmxvZ2dlcklkK2UpfX0sZS5wcm90b3R5cGUuc1g9ZnVuY3Rpb24oKXt0cnl7dGhpcy54NyYmdGhpcy54Ny5zWCgpfWNhdGNoKGUpe3RoaXMubG9nZ2VyLndhcm4odGhpcy5sb2dnZXJJZCtlKX19LGUucHJvdG90eXBlLlE3PWZ1bmN0aW9uKGUsdCl7dHJ5e3RoaXMueDcmJnRoaXMueDcuUTcoZSx0KX1jYXRjaChlKXt0aGlzLmxvZ2dlci53YXJuKHRoaXMubG9nZ2VySWQrZSl9fSxlfSgpO3QuRUo9bn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuaHV8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiYoZVtpXT10W2ldKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cig4OCkscz1yKDE5Nyksbz1yKDg5KSxhPXIoOTApLGg9cig2MiksYz1yKDI0KSx1PXIoMzQpLGw9cig0KSxwPXIoMSksZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0Lks3Lm9uZXJyb3I9ZnVuY3Rpb24oZSl7cC5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIlNoYXJlZCBXb3JrZXIgZXJyb3JcIix7ZXJyb3I6ZS5tZXNzYWdlfSl9LHQuWTcub25lcnJvcj1mdW5jdGlvbihlKXtwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiV2ViIFdvcmtlciBlcnJvclwiLHtlcnJvcjplLnR5cGV9KX0sdC5LNy5wb3J0LnN0YXJ0KCksdH1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLlc3PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS56NygpfSwxZTMpfSx0LnByb3RvdHlwZS56Nz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5LNy5wb3J0Lm9ubWVzc2FnZT1mdW5jdGlvbih0KXtlLmxvZ2dlci5kZWJ1ZyhcIkxSVSBsZW5ndGggOiBcIit0LmRhdGEucmVzcG9uc2UpfSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNlbmQgbWVzc2FnZVwiKSx0aGlzLks3LnBvcnQucG9zdE1lc3NhZ2Uoe3R5cGU6cy5YNy5KN30pLHRoaXMuVzcoKX0sdC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWwuZGVmZXIoKTtpZih0aGlzLmtxLmhhcyhlKSlyLnJlc29sdmUoITApO2Vsc2V7dmFyIGk9ITEsbj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aT0hMCx0LmxvZ2dlci5kZWJ1ZyhcIlZPRCBDT05UQUlOUyBUSU1FRE9VVCA6IFwiK2UpLHIucmVzb2x2ZSghMSl9LDFlMyk7dGhpcy5LNy5wb3J0Lm9ubWVzc2FnZT1mdW5jdGlvbihlKXtjbGVhclRpbWVvdXQobiksaXx8KGUuZGF0YS5yZXNwb25zZT9yLnJlc29sdmUoITApOnIucmVzb2x2ZSghMSkpfSx0aGlzLks3Lm9uZXJyb3I9ZnVuY3Rpb24oZSl7dC5sb2dnZXIuZXJyb3IoZSl9LHRoaXMuSzcucG9ydC5wb3N0TWVzc2FnZSh7dHlwZTpzLlg3Llo3LGVlZTplfSl9cmV0dXJuIHIuU3N9LHQucHJvdG90eXBlLnRlZT1mdW5jdGlvbihlKXt2YXIgdD1sLmRlZmVyKCkscj10aGlzLmtxLmdldChlKTtpZihudWxsIT1yKXt2YXIgaT1udWxsO3IuY29udGVudC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7aWYoaC5IRi5CRih0KS5rRigpKXJldHVybiBpPWUsaS5oZWFkZXJzPXIuaGVhZGVycyx2b2lkKGkucXE9ci5xcSl9KSx0LnJlc29sdmUoaSl9ZWxzZSB0LnJlc29sdmUobnVsbCk7cmV0dXJuIHQuU3N9LHQucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9bC5kZWZlcigpO2lmKHRoaXMua3EuaGFzKGUpKXRoaXMudGVlKGUpLnRoZW4oZnVuY3Rpb24oZSl7ci5yZXNvbHZlKGUpfSk7ZWxzZXt0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNIQVJFRFdPUktFUjogUGVybWlzc2lvbiBSZXF1ZXN0IHRvIFJFQURcIik7dmFyIGk9RGF0ZS5ub3coKTt0aGlzLnJlZShzLlg3LmllZSxpKS50aGVuKGZ1bmN0aW9uKG4pe3QubG9nZ2VyLmRlYnVnKFwiU0hBUkVEV09SS0VSOiBQZXJtaXNzaW9uIFJlcXVlc3QgVG8gUkVBRCA6IFwiK24pLG4/dC5uZWUoZSkudGhlbihmdW5jdGlvbihlKXt0LmxvZ2dlci5kZWJ1ZyhcIlNIQVJFRFdPUktFUjogIFJlYWQgQ29tcGxldGVkIFwiKSx0Lks3LnBvcnQucG9zdE1lc3NhZ2Uoe3R5cGU6cy5YNy5zZWUsaWQ6aX0pLHIucmVzb2x2ZShlKX0pOnIucmVzb2x2ZShudWxsKX0pfXJldHVybiByLlNzfSx0LnByb3RvdHlwZS5uZWU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWwuZGVmZXIoKSxpPW51bGwsbj0hMSxhPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuPSEwLHIucmVzb2x2ZShpKX0sMWUzKTtyZXR1cm4gdGhpcy5ZNy5vbm1lc3NhZ2U9ZnVuY3Rpb24oaCl7aWYoY2xlYXJUaW1lb3V0KGEpLCFuKXtpZihoLmRhdGEucmVzcG9uc2Upe3ZhciB1PW5ldyBjLkhmO3UuQ2Y9ITEsdS5fZj0hMCx1LlBmPWguZGF0YS5kYXRhLmxlbmd0aCx1LkFmPTAsdS5OZj1oLmRhdGEuZGF0YS5sZW5ndGgsdS5EZj0wLGk9bmV3IG8uR3EoaC5kYXRhLmRhdGEubGVuZ3RoLGguZGF0YS5kYXRhLmNvbnRlbnQsdSxjLmJmLlRmKSxpLmhlYWRlcnM9aC5kYXRhLmRhdGEub2VlfWVsc2UgdC5LNy5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOnMuWDcuYWVlLGVlZTplfSk7ci5yZXNvbHZlKGkpfX0sdGhpcy5ZNy5wb3N0TWVzc2FnZSh7dHlwZTpzLlg3LmhlZSxlZWU6ZX0pLHIuU3N9LHQucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMubG9nZ2VyLmRlYnVnKFwiRkxVU0hJTkcgSU4tTUVNT1JZIENBQ0hFXCIpO2Zvcih2YXIgdD1bXSxyPTA7cjx0aGlzLk1xLmxlbmd0aDtyKyspdGhpcy5rcS5nZXQodGhpcy5NcVtyXSkuenF8fHQucHVzaCh0aGlzLk1xW3JdKTt0aGlzLmxvZ2dlci5kZWJ1ZyhcIkZsdXNoIFwiK3QubGVuZ3RoK1wiIGluIG1lbW9yeVwiKSx0Lmxlbmd0aD4wP3RoaXMuY2VlKHQpLnRoZW4oZnVuY3Rpb24odCl7ZS51ZWUoKX0pOnRoaXMudWVlKCl9LHQucHJvdG90eXBlLnVlZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD0wLHI9MDt0aGlzLmxvZ2dlci5kZWJ1ZyhcIlBVUkdJTkcgUEVSU0lTVEVOVERCJ3MgSU4tTUVNT1JZIENBQ0hFXCIpLHRoaXMuTXEuZXZlcnkoZnVuY3Rpb24oaSxuKXt2YXIgcz1lLmtxLmdldChpKS5zaXplKCk7cmV0dXJuIHQrcz5lLkZxPyhyPW4sZS5sb2dnZXIuZGVidWcoXCJDQUNIRSBUT08gQklHIFwiKyh0K3MpKSwhMSk6KHQrPXMsITApfSl8fHRoaXMuTXEuc3BsaWNlKHIsdGhpcy5NcS5sZW5ndGgtMSkuZm9yRWFjaChmdW5jdGlvbih0KXtlLmtxLmRlbGV0ZSh0KX0pLHRoaXMuQnEoKX0sdC5wcm90b3R5cGUuY2VlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1sLmRlZmVyKCk7dGhpcy5sb2dnZXIuZGVidWcoXCJTSEFSRURXT1JLRVI6ICBQZXJtaXNzaW9uIFJlcXVlc3QgVG8gV3JpdGUgXCIpO3ZhciBpPURhdGUubm93KCk7cmV0dXJuIHRoaXMucmVlKHMuWDcubGVlLGkpLnRoZW4oZnVuY3Rpb24obil7dC5sb2dnZXIuZGVidWcoXCJTSEFSRURXT1JLRVI6ICBQZXJtaXNzaW9uIFJlcXVlc3QgVG8gV1JJVEUgOiBcIituKSxuPyh0LmxvZ2dlci5kZWJ1ZyhcIkZsdXNoIHRoZSBjb250ZW50c1wiKSx0LnBlZShlKS50aGVuKGZ1bmN0aW9uKGUpe3QubG9nZ2VyLmRlYnVnKFwiU0hBUkVEV09SS0VSOiAgV1JJVEUgQ09NUExFVEVEXCIpLHQuSzcucG9ydC5wb3N0TWVzc2FnZSh7dHlwZTpzLlg3LmRlZSxpZDppfSksci5yZXNvbHZlKGUpfSkpOnIucmVzb2x2ZShuKX0pLHIuU3N9LHQucHJvdG90eXBlLnBlZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9bC5kZWZlcigpO3JldHVybiB0aGlzLmZlZShlWzBdKS50aGVuKGZ1bmN0aW9uKGkpe2lmKGkpZS5zaGlmdCgpLDA9PWUubGVuZ3RoP3IucmVzb2x2ZSghMCk6dC5wZWUoZSkudGhlbihmdW5jdGlvbihlKXtyLnJlc29sdmUoZSl9KTtlbHNle3ZhciBuPSExLG89c2V0VGltZW91dChmdW5jdGlvbigpe249ITAsZS5zaGlmdCgpLDA9PWUubGVuZ3RoP3IucmVzb2x2ZSghMSk6dC5wZWUoZSkudGhlbihmdW5jdGlvbihlKXtyLnJlc29sdmUoZSl9KX0sMWUzKTt0Llk3Lm9ubWVzc2FnZT1mdW5jdGlvbihpKXtpLmRhdGEmJih0LmtxLmdldChlWzBdKS56cT0hMCx0Lks3LnBvcnQucG9zdE1lc3NhZ2Uoe3R5cGU6cy5YNy5nZWUsZWVlOmVbMF0sc2l6ZTp0LmtxLmdldChlWzBdKS5zaXplKCl9KSksY2xlYXJUaW1lb3V0KG8pLG58fChlLnNoaWZ0KCksMD09ZS5sZW5ndGg/aS5kYXRhP3IucmVzb2x2ZSghMCk6ci5yZXNvbHZlKCExKTp0LnBlZShlKS50aGVuKGZ1bmN0aW9uKGUpe3IucmVzb2x2ZShlKX0pKX0sdC5ZNy5vbmVycm9yPWZ1bmN0aW9uKGUpe3QubG9nZ2VyLmVycm9yKGUpfTt2YXIgYT10LmtxLmdldChlWzBdKSxjPW51bGwsdT1udWxsO2EuY29udGVudC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7aWYoaC5IRi5CRih0KS5rRigpKXJldHVybiBjPWUsdT10LHZvaWQoYy5oZWFkZXJzPWEuaGVhZGVycyl9KTt2YXIgbD17UF86YS56Zi5aZigpLGhlYWRlcnM6YS5oZWFkZXJzLGxlbmd0aDphLnNpemUoKSxFZWU6dSxjb250ZW50OmMuZGF0YSx6ZjphLnpmfTt0Llk3LnBvc3RNZXNzYWdlKHt0eXBlOnMuWDcudmVlLGRhdGE6bH0pfX0pLHIuU3N9LHQucHJvdG90eXBlLmZlZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9bC5kZWZlcigpLGk9ITEsbj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aT0hMCxyLnJlc29sdmUoITEpfSwxZTMpO3JldHVybiB0aGlzLks3LnBvcnQub25tZXNzYWdlPWZ1bmN0aW9uKHMpe2NsZWFyVGltZW91dChuKSxpfHwodC5sb2dnZXIuZGVidWcoXCJTSEFSRURXT1JLRVI6ICBDT05UQUlOUyBSRVFVRVNUIDogXCIrZStcIiA6IFwiK3MuZGF0YS5yZXNwb25zZSkscy5kYXRhLnJlc3BvbnNlP3IucmVzb2x2ZSghMCk6ci5yZXNvbHZlKCExKSl9LHRoaXMuSzcub25lcnJvcj1mdW5jdGlvbihlKXt0LmxvZ2dlci5lcnJvcihlKSxyLnJlc29sdmUoITEpfSx0aGlzLks3LnBvcnQucG9zdE1lc3NhZ2Uoe3R5cGU6cy5YNy5aNyxlZWU6ZX0pLHIuU3N9LHQucHJvdG90eXBlLnJlZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT1sLmRlZmVyKCksbj0hMSxvPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuPSEwLGkucmVzb2x2ZSghMSl9LDJlMyk7cmV0dXJuIHRoaXMuSzcucG9ydC5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KG8pLG4/ZT09cy5YNy5pZWU/ci5LNy5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOnMuWDcuc2VlfSk6ZT09cy5YNy5sZWUmJnIuSzcucG9ydC5wb3N0TWVzc2FnZSh7dHlwZTpzLlg3LmRlZX0pOmkucmVzb2x2ZSh0LmRhdGEucmVzcG9uc2UpfSx0aGlzLks3Lm9uZXJyb3I9ZnVuY3Rpb24oZSl7ci5sb2dnZXIuZXJyb3IoZSl9LHRoaXMuSzcucG9ydC5wb3N0TWVzc2FnZSh7dHlwZTplLGlkOnR9KSxpLlNzfSx0LnByb3RvdHlwZS5paz1mdW5jdGlvbihlKXtyZXR1cm5bXX0sdC5wcm90b3R5cGUuVnE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWwuZGVmZXIoKSxpPVtdLG49RGF0ZS5ub3coKTtyZXR1cm4gdGhpcy5yZWUocy5YNy5pZWUsbikudGhlbihmdW5jdGlvbihlKXtpZihlKXt2YXIgbz0hMSxoPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtvPSEwLHQuSzcucG9ydC5wb3N0TWVzc2FnZSh7dHlwZTpzLlg3LnNlZSxpZDpufSksci5yZXNvbHZlKGkpfSw0ZTMpO3QuWTcub25tZXNzYWdlPWZ1bmN0aW9uKGUpe2lmKGNsZWFyVGltZW91dChoKSxlLmRhdGEucmVzcG9uc2UmJm51bGwhPWUuZGF0YSlmb3IodmFyIGM9MDtjPGUuZGF0YS5lbGVtZW50cy5sZW5ndGg7YysrKXt2YXIgbD1uZXcgdS5OXyhlLmRhdGEuZWxlbWVudHNbY10udXJsLGUuZGF0YS5lbGVtZW50c1tjXS5iXyxlLmRhdGEuZWxlbWVudHNbY10ud18sZS5kYXRhLmVsZW1lbnRzW2NdLkNfLGUuZGF0YS5lbGVtZW50c1tjXS5kdXJhdGlvbixlLmRhdGEuZWxlbWVudHNbY10uYml0cmF0ZSxlLmRhdGEuZWxlbWVudHNbY10uX18pLHA9bmV3IGEuSHEobCk7cC5oZWFkZXJzPWUuZGF0YS5lbGVtZW50c1tjXS5vZWUscC50b3RhbFNpemU9ZS5kYXRhLmVsZW1lbnRzW2NdLmxlbmd0aCxpLnB1c2gocCl9dC5LNy5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOnMuWDcuc2VlLGlkOm59KSxvfHxyLnJlc29sdmUoaSl9LHQuWTcub25lcnJvcj1mdW5jdGlvbihlKXtwLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiR0VUIEVMRU1FTlRTIEVSUk9SXCIse2Vycm9yOmV9KSx0Lks3LnBvcnQucG9zdE1lc3NhZ2Uoe3R5cGU6cy5YNy5zZWUsaWQ6bn0pfSx0Llk3LnBvc3RNZXNzYWdlKHt0eXBlOnMuWDcueWVlfSl9fSksci5yZXNvbHZlKG51bGwpLHIuU3N9LHR9KG4uWXEpO3Qudko9ZH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZX0oKTtpLmxlZT1cIndyaXRlX3JlcXVlc3RcIixpLlo3PVwiY29udGFpbnNfcmVxdWVzdFwiLGkuZ2VlPVwid3JpdGVfaWRfb3BlcmF0aW9uXCIsaS5pZWU9XCJyZWFkX3JlcXVlc3RcIixpLnNlZT1cInJlYWRfY29tcGxldGVkXCIsaS5kZWU9XCJ3cml0ZV9jb21wbGV0ZWRcIixpLmFlZT1cInVwZGF0ZV9scnVcIixpLko3PVwibHJ1X3N0YXRzXCIsaS5oZWU9XCJyZWFkX29wZXJhdGlvblwiLGkueWVlPVwicmVhZF9lbGVtZW50c19vcGVyYXRpb25cIixpLlRlZT1cInJlYWRfa2V5c19vcGVyYXRpb25cIixpLnZlZT1cIndyaXRlX29wZXJhdGlvblwiLHQuWDc9aX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuaHV8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiYoZVtpXT10W2ldKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cigyMCk7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0Lm1pblZlcnNpb249XCIzLjAuMFwiLHQucmVuZGVyU3RhdHNDYWxsYmFjaz12b2lkIDAsdH1yZXR1cm4gaSh0LGUpLHR9KG4uSGl2ZUNvbW0uT3B0aW9ucy5UcCk7ZS5uSj10fShlLk9wdGlvbnN8fChlLk9wdGlvbnM9e30pKX0odC5IaXZlQ29tbXx8KHQuSGl2ZUNvbW09e30pKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBpPXIoNCksbj1yKDE4KSxzPXIoMjEpLG89cigyMDApLGE9cigyNiksaD1hLkhpdmVDb21tLkhpdmVUZWNoRXJyb3IsYz1hLkhpdmVDb21tLnZFLHU9cig3MCksbD1yKDE5KSxwPXIoMjIpLGQ9cig0NiksZj1yKDUzKSxnPXIoMTQpLEU9cigxKSx2PXIoNTYpLHk9cigzMiksVD1yKDcyKSxtPXIoMjkpLEk9KHIoNDQpLG5hdmlnYXRvciksUz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMubG9nZ2VySWQ9XCJbSGl2ZUpzUHJveHldXCIsdGhpcy5tZWU9MCx0aGlzLmdMPWUsdGhpcy5vcHRpb25zXz1uZXcgby5IaXZlQ29tbS5PcHRpb25zLkllZSx0aGlzLlNlZSh0KSx0aGlzLnlMKCksdGhpcy5VUT1yfXJldHVybiBlLnByb3RvdHlwZS5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIGUuRUx9LGUucHJvdG90eXBlLmdldFZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZXJzaW9ufSxlLnByb3RvdHlwZS52TD1mdW5jdGlvbigpe3JldHVybiExfSxlLnByb3RvdHlwZS55TD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYobnVsbD09dGhpcy5SZWV8fERhdGUubm93KCktdGhpcy5tZWU+MWU0KXt2YXIgdD1cIi8vXCIrdS50TC5kTytcIjpcIit1LnRMLnJMK1wiL3ZlcnNpb24uanNvblwiO3RoaXMuUmVlPXMuYnAodCkudGhlbihmdW5jdGlvbih0KXt2YXIgcj1KU09OLnBhcnNlKHQpO3JldHVybiBlLnN0YXRlPXIuc3RhdGUsZS52ZXJzaW9uPXIudmVyc2lvbixcInJlYWR5XCI9PT1lLnN0YXRlP1wicmVhZHlcIjooZS5sb2dnZXIoKS53YXJuKGUuaWQoKStcIkNsaWVudCBub3QgcmVhZHk6IFwiK2Uuc3RhdGUpLGkucmVqZWN0KG5ldyBoKGMucEUsXCJzdGF0ZSBcIitlLnN0YXRlKSkpfSxmdW5jdGlvbih0KXt2YXIgcj1cIkNsaWVudCBub3QgcmVhY2hhYmxlXCI7cmV0dXJuIHZvaWQgMCE9dCYmdm9pZCAwIT10LnN0YXR1cyYmLTEhPXQuc3RhdHVzJiYocj1cIkNsaWVudCBjaGVjayByZXR1cm5lZCBcIit0LnN0YXR1cyksZS5sb2dnZXIoKS53YXJuKGUuaWQoKStyKSxpLnJlamVjdChuZXcgaChjLnBFLHIpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgaD9pLnJlamVjdChlKTppLnJlamVjdChuZXcgaChjLnBFLFwiZXJyb3IgcGFyc2luZyByZXNwb25zZVwiKSl9KSx0aGlzLm1lZT1EYXRlLm5vdygpfXJldHVybiB0aGlzLlJlZX0sZS5wcm90b3R5cGUuaW5pdFNlc3Npb249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiB0aGlzLnlMKCkudGhlbihmdW5jdGlvbigpe3JldHVybiByLnJlc29sdmVUaWNrZXRQcm9taXNlKGUpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGk9ci5UTChlLHQpO2lmKG51bGwhPWkpcmV0dXJuIFQuJHUucmVnaXN0ZXJDb21tKHIuZ0wsaS5pZCksVC4kdS5yZWdpc3RlclRlY2gocixpLmlkKSxuLkhpdmVSZXF1ZXN0RmFjdG9yeS5yZWdpc3RlclRlY2goaS5pZCxyLmdldE5hbWUoKSksaTt0aHJvdyBuZXcgaChjLnNFLFwiZXJyb3IgZ2VuZXJhdGluZyBzZXNzaW9uXCIpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGg/aS5yZWplY3QoZSk6aS5yZWplY3QobmV3IGgoYy5zRSxcImdlbmVyaWMgZXJyb3IgcmVzb2x2aW5nIHRpY2tldFwiKSl9KX0sZS5wcm90b3R5cGUub0w9ZnVuY3Rpb24oZSl7dGhpcy5vSj1lfSxlLnByb3RvdHlwZS5tTD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnNfLmluaXRUaW1lb3V0fSxlLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbihlLHQpe3ZhciByPXQubWFuaWZlc3QudG9Mb3dlckNhc2UoKSxpPWUudG9Mb3dlckNhc2UoKSxuPXIuaW5kZXhPZihcIi5pc20vbWFuaWZlc3RcIik7aWYobj4tMSl7dmFyIHM9ci5zdWJzdHJpbmcoMCxuKTtpZihpLmluZGV4T2Yocyk+LTEpcmV0dXJuIGkuaW5kZXhPZihcIi5pc20vbWFuaWZlc3QoZm9ybWF0PW1wZC10aW1lLWNzZilcIik+LTE/dGhpcy5vSj8odC50aWNrZXQuU291cmNlVVJMPWUsITApOnRoaXMuYUoodCxcIlRoZSBwbGF5ZXIgZG9lcyBub3QgdXNlIEhpdmVSZXF1ZXN0LCBkb3duZ3JhZGluZyB0byBTdGF0c0pTXCIpOnRoaXMuYUoodCxcIlByb3RvY29sIG5vdCBzdXBwb3J0ZWQgYnkgSGl2ZUpzUHJveHkgdGVjaCwgZG93bmdyYWRpbmcgdG8gU3RhdHNKU1wiKX1lbHNlIGlmKGk9PT1yKXJldHVybiEhdGhpcy5vSnx8dGhpcy5hSih0LFwiVGhlIHBsYXllciBkb2VzIG5vdCB1c2UgSGl2ZVJlcXVlc3QsIGRvd25ncmFkaW5nIHRvIFN0YXRzSlNcIik7cmV0dXJuITF9LGUucHJvdG90eXBlLmFKPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gZS50ZWNoPXRoaXMuVVEseS5IaXZlLlJlcG9ydGluZygpLmluaXRTZXNzaW9uKGUudGlja2V0LnRpY2tldFVybCwhMSkudGhlbihmdW5jdGlvbih0KXtlLmhsKHQpO3QudGlja2V0O3IubG9nZ2VyKCkuZGVidWcoXCJbSGl2ZUpTUHJveHldIGRvd25ncmFkZSB2ZXJpZmllZCB0aWNrZXQgXCIrZS50aWNrZXQudGlja2V0VXJsKSxyLmdMLnVwZGF0ZVBsYXllckluZm8odCl9KS5mYWlsKGZ1bmN0aW9uKGUpe0UuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFcnJvciBpbml0aWFsaXppbmcgc2Vzc2lvbiB3aGVuIGRvd25ncmFkaW5nIHNlc3Npb24gdGVjaFwiLHIubG9nZ2VySWQse2Vycm9yOmV9KX0pLHRoaXMub0omJnRoaXMub0ouZFUoKSx0aGlzLm9KPXZvaWQgMCxuLkhpdmVSZXF1ZXN0RmFjdG9yeS5yZWdpc3RlclRlY2goZS5pZCx2LlN0YXRzSlMuRUwpLHRoaXMuZ0wubG9nZ2VyKCkud2FybihcIltIaXZlSnNQcm94eV0gXCIrdCksdGhpcy5vbkVycm9yKG5ldyBoKGMuZkUsdCkpLCEwfSxlLnByb3RvdHlwZS5vbD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dGhpcy5sb2dnZXIoKS5kZWJ1Zyh0aGlzLmlkKCkrXCJTdG9wcGluZyBzZXNzaW9uIFwiK2UuaWQrXCIgW29uVW5sb2FkOlwiK3QrXCJdXCIpO3ZhciBpPVwiLy9cIit1LnRMLmRPK1wiOlwiK3UudEwuckwrXCIvcHJveHkvXCIrZS5pZCtcIi9zdG9wXCI7dCYmSS5zZW5kQmVhY29uPyhJLnNlbmRCZWFjb24oaSksdGhpcy5sb2dnZXIoKS5kZWJ1Zyh0aGlzLmlkKCkrXCJzZXNzaW9uIHN0b3BwZWQgW1wiK2UuaWQrXCJdW2JlYWNvbl1cIikpOnMuYnAoaSxudWxsLCF0KS50aGVuKGZ1bmN0aW9uKCl7ci5sb2dnZXIoKS5kZWJ1ZyhyLmlkKCkrXCJzZXNzaW9uIHN0b3BwZWQgW1wiK2UuaWQrXCJdXCIrKHQ/XCJbc3luY11cIjpcIlwiKSl9LGZ1bmN0aW9uKGkpe3IubG9nZ2VyKCkud2FybihyLmlkKCkrXCJzZXNzaW9uIGNsb3NlIGVycm9yIFtcIitlLmlkK1wiXVwiKyh0P1wiW3N5bmNdXCI6XCJcIiksaSl9KX0sZS5wcm90b3R5cGUubmw9ZnVuY3Rpb24oZSx0KXt2YXIgcj10P2wuTWwuSURMRTpsLk1sLkxsO3RoaXMubG9nZ2VyKCkuZGVidWcodGhpcy5pZCgpK1wiaWRsZSBzdGF0ZTogXCIrbC5NbFtyXSl9LGUucHJvdG90eXBlLlNMPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPVwicGxheWluZy1wb2ludD1cIit0LlBsO24rPVwiJmJ1ZmZlci1sZW5ndGg9XCIrdC5BbCxuKz1cIiZ0b3RhbC1idWZmZXJpbmc9XCIrdC5PbCxuKz1cIiZ3aWR0aD1cIit0LndpZHRoLG4rPVwiJmhlaWdodD1cIit0LmhlaWdodCxuKz1cIiZmdWxsc2NyZWVuPVwiK3QuWVE7dmFyIG89XCIvL1wiK3UudEwuZE8rXCI6XCIrdS50TC5yTCtcIi9wcm94eS9cIitlLmlkK1wiL3N0YXRzL3B1dD9cIituO3JldHVybiBzLmJwKG8pLmZhaWwoZnVuY3Rpb24oZSl7cmV0dXJuIHIubG9nZ2VyKCkud2FybihyLmlkKCkrXCJlcnJvciBzZW5kaW5nIGZlZWRiYWNrIHRvIEhpdmUgQ2xpZW50XCIsZSksaS5yZWplY3QoZSl9KX0sZS5wcm90b3R5cGUuQ0w9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsbz1cIi8vXCIrdS50TC5kTytcIjpcIit1LnRMLnJMK1wiL3Byb3h5L1wiK2UuaWQrXCIvZXZlbnQ/dHlwZT1cIit0O2lmKHZvaWQgMCE9cilmb3IodmFyIGEgaW4gcilvKz1cIiZcIithK1wiPVwiK3JbYV07cmV0dXJuIHRoaXMubG9nZ2VyKCkuZGVidWcodGhpcy5pZCgpK1wiZXZlbnQgXCIrcC5HbC5ZcFt0XSx2b2lkIDAhPXI/cjpcIlwiKSxzLmJwKG8pLmZhaWwoZnVuY3Rpb24oZSl7cmV0dXJuIG4ubG9nZ2VyKCkud2FybihuLmlkKCkrXCJlcnJvciBzZW5kaW5nIGZlZWRiYWNrIGV2ZW50IHRvIEhpdmUgQ2xpZW50XCIsZSksaS5yZWplY3QoZSl9KX0sZS5wcm90b3R5cGUuYmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaS5yZXNvbHZlKCEwKX0sZS5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt2YXIgdD0hMDtpZih2b2lkIDAhPXRoaXMub3B0aW9uc18ub25FcnJvcil0cnl7dD10aGlzLm9wdGlvbnNfLm9uRXJyb3IoZSl9Y2F0Y2goZSl7RS5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcImV4Y2VwdGlvbiBpbiB1c2VyLWRlZmluZWQgb25FcnJvciBjYWxsYmFja1wiLHRoaXMuaWQoKSxlKX1yZXR1cm4gdH0sZS5wcm90b3R5cGUub25BY3RpdmVTZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ0wuZ2V0UGxheWVyU291cmNlKCk7MD09PXQuaW5kZXhPZihcIi8vXCIpJiYodD1sb2NhdGlvbi5wcm90b2NvbCt0KTt2YXIgcj1zLklwKHUudEwuY1UsdS50TC5kTyx1LnRMLnJMLGUuaWQsdCk7aWYoZS5hdXRoZW50aWNhdGlvblRva2VuJiZ0aGlzLnZlcnNpb24+PVwiMy4wLjFcIj9zLl9wKHIsSlNPTi5zdHJpbmdpZnkoe2F1dGhlbnRpY2F0aW9uVG9rZW46ZS5hdXRoZW50aWNhdGlvblRva2VufSkpOnMuYnAociksdGhpcy51cGRhdGVQbGF5ZXJJbmZvKGUpLGYuWnUubWUodGhpcy5sb2dnZXIoKSksdGhpcy5vSiYmdGhpcy5vSi5mVSgpLHRoaXMud2VlKGUpLHZvaWQgMCE9dGhpcy5vcHRpb25zXy5vbkFjdGl2ZVNlc3Npb24pdHJ5e3RoaXMub3B0aW9uc18ub25BY3RpdmVTZXNzaW9uKGUudG9IaXZlU2Vzc2lvbigpKX1jYXRjaChlKXtFLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiZXhjZXB0aW9uIGluIHVzZXItZGVmaW5lZCBvbkFjdGl2ZVNlc3Npb24gY2FsbGJhY2tcIix0aGlzLmlkKCksZSl9fSxlLnByb3RvdHlwZS5ETD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUua0w9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLkxMPWZ1bmN0aW9uKGUpe3RoaXMuZ0w9ZX0sZS5wcm90b3R5cGUuaWQ9ZnVuY3Rpb24oKXtyZXR1cm5cIltcIitlLkVMK1wiXSBcIn0sZS5wcm90b3R5cGUuU2VlPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9dFtlLkVMXSYmcy5TcCh0W2UuRUxdLHRoaXMub3B0aW9uc18pfSxlLnByb3RvdHlwZS5yZXNvbHZlVGlja2V0UHJvbWlzZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMubG9nZ2VyKCkuZGVidWcodGhpcy5pZCgpK1wicmVzb2x2aW5nIHRpY2tldDogXCIrZSk7dmFyIHI9dGhpcy5iZWUoZSksbj1KU09OLnN0cmluZ2lmeSh0aGlzLkNlZSgpKSxvPW51bGw7cmV0dXJuIHRoaXMuZ0wub3B0aW9ucygpLnRlc3RJZCYmKGE9e30sYVttLkwuY1JdPXRoaXMuZ0wub3B0aW9ucygpLnRlc3RJZCxvPWEpLHRoaXMubG9nZ2VyKCkuZGVidWcoXCJNeSBoZWFkZXIgXCIsbykscy5fcChyLG4sXCJhcHBsaWNhdGlvbi9qc29uXCIsbykudGhlbihmdW5jdGlvbihyKXt2YXIgaT1KU09OLnBhcnNlKHIpO3JldHVybiB0LmxvZ2dlcigpLmRlYnVnKHQuaWQoKStcInJlc29sdmVkIHRpY2tldCBcIitlK1wiIC0+IFwiK2kubWFuaWZlc3QpLGl9LGZ1bmN0aW9uKHIpe3JldHVybiB0LmxvZ2dlcigpLndhcm4odC5pZCgpK1widGlja2V0IFwiK2UrXCIgcmVzb2x2ZSBlcnJvcjogXCIsciksaS5yZWplY3QobmV3IGgoYy5zRSxyKSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGg/aS5yZWplY3QoZSk6aS5yZWplY3QobmV3IGgoYy5kRSxlKSl9KTt2YXIgYX0sZS5wcm90b3R5cGUuYmVlPWZ1bmN0aW9uKGUpe3JldHVybiBlPWVuY29kZVVSSUNvbXBvbmVudChlKSxzLklwKHUudEwuZk8sdS50TC5kTyx1LnRMLnJMLGUsXCImXCIsdGhpcy5nTC5nZXRQbHVnaW5JZCgpKX0sZS5wcm90b3R5cGUuVEw9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgZC5CTjtyLlJOKGUpO3ZhciBpPW5ldyBuLmNsKGUscix0Lm1hbmlmZXN0LG51bGwpO3JldHVybiBpLk1MPSEwLGkuaWQ9dC5zZXNzaW9uSWQsaS50aWNrZXQuc2Vzc2lvbklkPWkuaWQsaX0sZS5wcm90b3R5cGUuQ2VlPWZ1bmN0aW9uKCl7dmFyIGU9e307ZS5IaXZlQ29uZmlnPXt9O2Zvcih2YXIgdCBpbiB3aW5kb3cuSGl2ZUNvbmZpZyl7ZS5IaXZlQ29uZmlnW3RdPXt9O2Zvcih2YXIgciBpbiB3aW5kb3cuSGl2ZUNvbmZpZ1t0XSllLkhpdmVDb25maWdbdF1bcl09d2luZG93LkhpdmVDb25maWdbdF1bcl19cmV0dXJuIGV9LGUucHJvdG90eXBlLndlZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHZvaWQgMCE9PWcuSGl2ZUNvbmZpZy5TdGF0cy5yZW5kZXIpe3ZhciByPVwiLy9cIit1LnRMLmRPK1wiOlwiK3UudEwuckwrXCIvcHJveHkvXCIrZS5pZCtcIi9zdGF0cy9nZXRcIjtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgRXZlbnRTb3VyY2Upe3ZhciBpPW5ldyBFdmVudFNvdXJjZShyKTtpLm9ubWVzc2FnZT1mdW5jdGlvbihlKXt0Ll9lZShlLmRhdGEpfSxpLm9uZXJyb3I9ZnVuY3Rpb24oZSl7aS5jbG9zZSgpfX1lbHNlIHRoaXMuUGVlPXdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpe3MuYnAocikudGhlbihmdW5jdGlvbihlKXt0Ll9lZShlKX0pfSw0ZTMpfX0sZS5wcm90b3R5cGUudXBkYXRlUGxheWVySW5mbz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9XCJjb21tLXZlcnNpb249XCIrdGhpcy5nTC5nZXRDb21tVmVyc2lvbigpO3IrPVwiJnBsdWdpbi1uYW1lPVwiK3RoaXMuZ0wuZ2V0UGx1Z2luTmFtZSgpLHIrPVwiJnBsdWdpbi12ZXJzaW9uPVwiK3RoaXMuZ0wuZ2V0UGx1Z2luVmVyc2lvbigpLHIrPVwiJnBsYXllci10ZWNoPVwiK3RoaXMuZ0wuZ2V0UGxheWVyVGVjaCgpLHIrPVwiJnBsYXllci12ZXJzaW9uPVwiK3RoaXMuZ0wuZ2V0UGxheWVyVmVyc2lvbigpLHRoaXMuZ0wuZ2V0VGVsZW1ldHJ5SWQoKSYmKHIrPVwiJnRlbGVtZXRyeS1pZD1cIit0aGlzLmdMLmdldFRlbGVtZXRyeUlkKCkpO3ZhciBuPXMuSXAodS50TC51VSx1LnRMLmRPLHUudEwuckwsZS5pZCxyKTtyZXR1cm4gcy5icChuKS5mYWlsKGZ1bmN0aW9uKGUpe3JldHVybiB0LmxvZ2dlcigpLmRlYnVnKHQuaWQoKStcImVycm9yIHNlbmRpbmcgcGxheWVyIEluZm8gdG8gSGl2ZSBDbGllbnRcIixlKSxpLnJlamVjdChlKX0pfSxlLnByb3RvdHlwZS5fZWU9ZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PUpTT04ucGFyc2UoZSk7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl0uaHVtYW49ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MWU2PyhlLzFlNikudG9GaXhlZCgyKStcIk1CXCI6ZT4xZTM/KGUvMWUzKS50b0ZpeGVkKDIpK1wiS0JcIjplK1wiQlwifSk7Zy5IaXZlQ29uZmlnLlN0YXRzLnJlbmRlcih0KX1jYXRjaChlKXtjb25zb2xlLnRyYWNlKGUpfX0sZS5wcm90b3R5cGUubG9nZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ0wubG9nZ2VyKCl9LGV9KCk7Uy5FTD1cIkhpdmVKc1Byb3h5XCIsdC5IaXZlSnNQcm94eT1TfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5odXx8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihlW2ldPXRbaV0pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yKDIwKTshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQubWluVmVyc2lvbj1cIjMuMy4wXCIsdH1yZXR1cm4gaSh0LGUpLHR9KG4uSGl2ZUNvbW0uT3B0aW9ucy5UcCk7ZS5JZWU9dH0oZS5PcHRpb25zfHwoZS5PcHRpb25zPXt9KSl9KHQuSGl2ZUNvbW18fCh0LkhpdmVDb21tPXt9KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLmh1fHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKGVbaV09dFtpXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXIoNCkscz1yKDE4KSxvPXIoMjEpLGE9cigyMCksaD1yKDIwMiksYz1yKDI2KSx1PXIoNDIpLGw9cigyOSkscD1yKDE5KSxkPXIoMjIpLGY9cig0NiksZz1yKDEpLEU9aC5IaXZlQ29tbS5PcHRpb25zLHY9YS5IaXZlQ29tbS5PcHRpb25zLm1wLHk9Yy5IaXZlQ29tbS5IaXZlVGVjaEVycm9yLFQ9Yy5IaXZlQ29tbS52RSxtPXIoNDQpO3QuQWVlPW5hdmlnYXRvcjt2YXIgST1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gaSh0LGUpLHR9KHMuY2wpLFM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5tZWU9MCx0aGlzLmdMPWUsdGhpcy5vcHRpb25zXz1uZXcgRS5PZWUsdGhpcy5TZWUodCksby5ScCh3aW5kb3cubG9jYXRpb24uaHJlZixuZXcgdix0aGlzLm9wdGlvbnNfKX1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiBlLkVMfSxlLnByb3RvdHlwZS5nZXRWZXJzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmVyc2lvbn0sZS5wcm90b3R5cGUudkw9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZS5wcm90b3R5cGUueUw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKG51bGw9PXRoaXMuUmVlfHxEYXRlLm5vdygpLXRoaXMubWVlPjFlNCl7dmFyIHQ9bmV3IG07dC5BZChuYXZpZ2F0b3IudXNlckFnZW50KTt2YXIgcj10LmpPKCk7aWYoXCJJRVwiPT09ci5uYW1lJiZyLnZlcnNpb24mJnBhcnNlSW50KHIudmVyc2lvbik8MTApcmV0dXJuIG4ucmVqZWN0KG5ldyB5KFQucEUsXCJJbnRlcm5ldCBFeHBsb3JlciA8IHYuMTAgbm90IHN1cHBvcnRlZFwiKSk7dGhpcy5OZWU9RGF0ZS5ub3coKSx0aGlzLkRlZT0wO3ZhciBpPVwiLy9cIit1LmZwLmRPK1wiOlwiK3RoaXMuZ0wub3B0aW9ucygpLm1vbml0b3JQb3J0K1wiL3ZlcnNpb24uanNvblwiO3RoaXMubG9nZ2VyKCkuZGVidWcodGhpcy5pZCgpK1widmVyaWZ5aW5nIEhpdmUgQ2xpZW50IHZlcnNpb25cIiksdGhpcy5SZWU9by5icChpKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciByPUpTT04ucGFyc2UodCk7cmV0dXJuIGUuc3RhdGU9ci5zdGF0ZSxlLnZlcnNpb249ci52ZXJzaW9uLFwicmVhZHlcIj09PWUuc3RhdGU/XCJkZXZlbG9wZXJcIj09PWUudmVyc2lvbnx8ZS52ZXJzaW9uPj1lLm9wdGlvbnNfLm1pblZlcnNpb24/KGUuRGVlPURhdGUubm93KCksZS5sb2dnZXIoKS5kZWJ1ZyhlLmlkKCkrXCJIaXZlIENsaWVudCByZWFkeSAtIHZlcnNpb24gXCIrZS52ZXJzaW9uK1wiIFtcIisoZS5EZWUtZS5OZWUpK1wiXVwiKSxcInJlYWR5XCIpOihnLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiQ2xpZW50IHZlcnNpb24gcmVxdWlyZW1lbnQgbm90IHNhdGlzZmllZFwiLGUuaWQoKSx7dmVyc2lvbjplLnZlcnNpb24sbWluVmVyc2lvbjplLm9wdGlvbnNfLm1pblZlcnNpb259KSxlLmdMLmFkZFRlY2hFdmVudChuZXcgZC5HbC5sZihudWxsLGQuR2wudGQuSnApKSxuLnJlamVjdChuZXcgeShULmdFLFwidmVyc2lvbiBcIitlLnZlcnNpb24pKSk6KGcuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJDYW5ub3QgY2hlY2sgdmVyc2lvbjogY2xpZW50IHN0YXRlIG5vdCByZWFkeVwiLGUuaWQoKSx7c3RhdGU6ZS5zdGF0ZX0pLGUuZ0wuYWRkVGVjaEV2ZW50KG5ldyBkLkdsLmxmKG51bGwsZC5HbC50ZC56cCkpLG4ucmVqZWN0KG5ldyB5KFQucEUsXCJzdGF0ZSBcIitlLnN0YXRlKSkpfSxmdW5jdGlvbih0KXt2YXIgcj1cIkNsaWVudCBub3QgcmVhY2hhYmxlXCI7cmV0dXJuIHZvaWQgMCE9dCYmdm9pZCAwIT10LnN0YXR1cyYmLTEhPXQuc3RhdHVzJiYocj1cIkNsaWVudCBjaGVjayByZXR1cm5lZCBlcnJvclwiKSxnLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKHIsZS5pZCgpLHZvaWQgMCE9dCYmdm9pZCAwIT10LnN0YXR1cyYmLTEhPXQuc3RhdHVzP3tzdGF0dXM6dC5zdGF0dXN9OnZvaWQgMCksZS5nTC5hZGRUZWNoRXZlbnQobmV3IGQuR2wubGYobnVsbCxkLkdsLnRkLldwKSksbi5yZWplY3QobmV3IHkoVC5wRSxyKSl9KS5jYXRjaChmdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgeSlyZXR1cm4gbi5yZWplY3QodCk7dmFyIHI9XCJFcnJvciBmZXRjaGluZyBIaXZlIENsaWVudCB2ZXJzaW9uXCI7cmV0dXJuIGcuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IocixlLmlkKCksdCksbi5yZWplY3QobmV3IHkoVC5wRSxyKSl9KSx0aGlzLm1lZT1EYXRlLm5vdygpfXJldHVybiB0aGlzLlJlZX0sZS5wcm90b3R5cGUuaW5pdFNlc3Npb249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiB0aGlzLm9wdGlvbnNfLm1pblZlcnNpb24hPXUuZnAudk98fHRoaXMuZ0wub3B0aW9ucygpLnRlc3RJZD90aGlzLnlMKCkudGhlbihmdW5jdGlvbigpe3JldHVybiByLmtlZShlKS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gbi5yZWplY3QoZSl9KX0pOnRoaXMua2VlKGUpLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBuLnJlamVjdChlKX0pfSxlLnByb3RvdHlwZS5tTD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnNfLmluaXRUaW1lb3V0fSxlLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbihlLHQpe3JldHVybiBlLmluZGV4T2YodC5MZWUpPi0xfSxlLnByb3RvdHlwZS5vbD1mdW5jdGlvbihlLHIpe3ZhciBpPXRoaXM7dGhpcy5sb2dnZXIoKS5kZWJ1Zyh0aGlzLmlkKCkrXCJTdG9wcGluZyBzZXNzaW9uIFwiK2UuaWQrXCIgW2NvbXBsZXRlIGNsb3NlOlwiK3IrXCJdXCIpO3ZhciBuPVwiLy9cIit1LmZwLmRPK1wiOlwiK3RoaXMuZ0wub3B0aW9ucygpLnBsYXllclBvcnQrXCIvc2Vzc2lvbj9hY3Rpb249c3RvcFwiO24rPVwiJmN1cnJlbnRTZXNzaW9uPVwiK2UuaWQsciYmKG4rPVwiJmNvbXBsZXRlU3RvcD10cnVlXCIpLHImJnQuQWVlLnNlbmRCZWFjb24/KHQuQWVlLnNlbmRCZWFjb24obiksdGhpcy5sb2dnZXIoKS5kZWJ1Zyh0aGlzLmlkKCkrXCJzZXNzaW9uIHN0b3BwZWQgW1wiK2UuaWQrXCJdW2JlYWNvbl1cIikpOm8uYnAobixudWxsLCFyKS50aGVuKGZ1bmN0aW9uKCl7aS5sb2dnZXIoKS5kZWJ1ZyhpLmlkKCkrXCJzZXNzaW9uIHN0b3BwZWQgW1wiK2UuaWQrXCJdXCIrKHI/XCJbc3luY11cIjpcIlwiKSl9LGZ1bmN0aW9uKHQpe2kubG9nZ2VyKCkud2FybihpLmlkKCkrXCJzZXNzaW9uIGNsb3NlIGVycm9yIFtcIitlLmlkK1wiXVwiKyhyP1wiW3N5bmNdXCI6XCJcIiksdCl9KX0sZS5wcm90b3R5cGUubmw9ZnVuY3Rpb24oZSx0KXt0aGlzLk1lZT10P3AuTWwuSURMRTpwLk1sLkxsLHRoaXMubG9nZ2VyKCkubm90aWNlKFwiW0hpdmVDb21tXSBjbGllbnQgc3RhdGU6IFwiK3AuTWxbdGhpcy5NZWVdKX0sZS5wcm90b3R5cGUuU0w9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLk1lZT09cC5NbC5JRExFKXJldHVybiBuLnJlc29sdmUoITApO3ZhciByPVwicGxheWluZy1wb2ludD1cIit0LlBsO3IrPVwiJmJ1ZmZlci1sZW5ndGg9XCIrdC5BbCxyKz1cIiZ0b3RhbC1idWZmZXJpbmc9XCIrdC5PbCxyKz1cIiZ3aWR0aD1cIit0LndpZHRoLHIrPVwiJmhlaWdodD1cIit0LmhlaWdodCxyKz1cIiZmdWxsc2NyZWVuPVwiK3QuWVE7dmFyIGk9ZS5MZWUrXCJzdGF0cz9cIityO3JldHVybiB0aGlzLmxvZ2dlcigpLnRyYWNlKGkpLG8uYnAoaSl9LGUucHJvdG90eXBlLkNMPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzO2lmKCEodCE9PWQuR2wuWXAuS3AmJnQhPT1kLkdsLllwLkhJRERFTnx8dGhpcy52ZXJzaW9uJiYoXCJkZXZlbG9wZXJcIj09PXRoaXMudmVyc2lvbnx8dGhpcy52ZXJzaW9uPj1cIjIwMTdcIikpKXJldHVybiBuLnJlc29sdmUoITApO3ZhciBzPWUuTGVlK1wicGxheWVyLWV2ZW50P3R5cGU9XCIrZC5HbC5ZcFt0XTtpZih2b2lkIDAhPXIpZm9yKHZhciBhIGluIHIpcys9XCImXCIrYStcIj1cIityW2FdO3JldHVybiB0aGlzLmxvZ2dlcigpLmRlYnVnKHRoaXMuaWQoKStcImV2ZW50IFwiK2QuR2wuWXBbdF0sdm9pZCAwIT1yP3I6XCJcIiksby5icChzKS5mYWlsKGZ1bmN0aW9uKGUpe3JldHVybiBpLmxvZ2dlcigpLndhcm4oaS5pZCgpK1wiZXJyb3Igc2VuZGluZyBmZWVkYmFjayBldmVudCB0byBIaXZlIENsaWVudFwiLGUpLG4ucmVqZWN0KGUpfSl9LGUucHJvdG90eXBlLmJkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4ucmVzb2x2ZSghMCl9LGUucHJvdG90eXBlLnVwZGF0ZVBsYXllckluZm89ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLkZlZSgpKXJldHVybiB0aGlzLmxvZ2dlcigpLndhcm4oXCJQbGF5ZXIgaW5mbyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgSmF2YSBjbGllbnQgdmVyc2lvblwiKSxuLnJlc29sdmUoITApO3ZhciByPVwiY29tbS12ZXJzaW9uPVwiK3RoaXMuZ0wuZ2V0Q29tbVZlcnNpb24oKTtyKz1cIiZwbHVnaW4tbmFtZT1cIit0aGlzLmdMLmdldFBsdWdpbk5hbWUoKSxyKz1cIiZwbHVnaW4tdmVyc2lvbj1cIit0aGlzLmdMLmdldFBsdWdpblZlcnNpb24oKSxyKz1cIiZwbGF5ZXItdGVjaD1cIit0aGlzLmdMLmdldFBsYXllclRlY2goKSxyKz1cIiZwbGF5ZXItdmVyc2lvbj1cIit0aGlzLmdMLmdldFBsYXllclZlcnNpb24oKSx0aGlzLmdMLmdldFRlbGVtZXRyeUlkKCkmJihyKz1cIiZ0ZWxlbWV0cnktaWQ9XCIrdGhpcy5nTC5nZXRUZWxlbWV0cnlJZCgpKTt2YXIgaT1lLkxlZStcInBsYXllci1pbmZvP1wiK3I7cmV0dXJuIG8uYnAoaSkuZmFpbChmdW5jdGlvbihlKXtyZXR1cm4gdC5sb2dnZXIoKS5kZWJ1Zyh0LmlkKCkrXCJlcnJvciBzZW5kaW5nIHBsYXllciBJbmZvIHRvIEhpdmUgQ2xpZW50XCIsZSksbi5yZWplY3QoZSl9KX0sZS5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlKXt2YXIgdD0hMDtpZih2b2lkIDAhPXRoaXMub3B0aW9uc18ub25FcnJvcil0cnl7dD10aGlzLm9wdGlvbnNfLm9uRXJyb3IoZSl9Y2F0Y2goZSl7Zy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIkV4Y2VwdGlvbiBpbiB1c2VyLWRlZmluZWQgb25FcnJvciBjYWxsYmFja1wiLHRoaXMuaWQoKSxlKX1yZXR1cm4gdH0sZS5wcm90b3R5cGUuREw9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXtpc1JlYWR5SW46dGhpcy5OZWUsaXNSZWFkeU91dDp0aGlzLkRlZSxsZWFzZUluOnRoaXMuVWVlLGxlYXNlT3V0OnRoaXMuQmVlLHJlc29sdmVJbjp0aGlzLkhlZSxyZXNvbHZlT3V0OnRoaXMueGVlfTt2b2lkIDAhPT10JiZudWxsIT10JiYoaS5zZXNzaW9uSWQ9dC5pZCksdm9pZCAwIT09ciYmKGkudG90YWw9cik7dmFyIG49SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpKSk7Zy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihlLm1lc3NhZ2UsdGhpcy5pZCgpLG4pLHRoaXMuZ0wuYWRkVGVjaEV2ZW50KG5ldyBkLkdsLmxmKG51bGwsZC5HbC50ZC4kcCxpKSksdGhpcy5xZWUoKX0sZS5wcm90b3R5cGUub25BY3RpdmVTZXNzaW9uPWZ1bmN0aW9uKGUpe2lmKHRoaXMudXBkYXRlUGxheWVySW5mbyhlKSxzLlJsLnNldEl0ZW0oXCJoaXZlQWN0aXZlU2Vzc2lvbklkXCIsZS5pZCksdm9pZCAwIT10aGlzLm9wdGlvbnNfLm9uQWN0aXZlU2Vzc2lvbil0cnl7dGhpcy5vcHRpb25zXy5vbkFjdGl2ZVNlc3Npb24oZS50b0hpdmVTZXNzaW9uKCkpfWNhdGNoKGUpe2cuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJFeGNlcHRpb24gaW4gdXNlci1kZWZpbmVkIG9uQWN0aXZlU2Vzc2lvbiBjYWxsYmFja1wiLHRoaXMuaWQoKSxlKX19LGUucHJvdG90eXBlLkxMPWZ1bmN0aW9uKGUpe3RoaXMuZ0w9ZX0sZS5wcm90b3R5cGUuaWQ9ZnVuY3Rpb24oKXtyZXR1cm5cIltcIitlLkVMK1wiXSBcIn0sZS5wcm90b3R5cGUuU2VlPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9dFtlLkVMXSYmby5TcCh0W2UuRUxdLHRoaXMub3B0aW9uc18pfSxlLnByb3RvdHlwZS5rZWU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3JldHVybiB0aGlzLkdlZShlKS50aGVuKGZ1bmN0aW9uKGkpe3JldHVybiBpP3QuVmVlKGUsaSxyKTp0LnJlc29sdmVUaWNrZXRQcm9taXNlKGUpLnRoZW4oZnVuY3Rpb24oaSl7cmV0dXJuIHQuVmVlKGUsaSxyKX0pfSl9LGUucHJvdG90eXBlLkdlZT1mdW5jdGlvbih0KXt2YXIgcj10aGlzO2lmKHRoaXMuVWVlPURhdGUubm93KCksdGhpcy5nTC5vcHRpb25zKCkudXNlU2Vzc2lvbkNoZWNrKXt2YXIgaT1cIi8vXCIrdS5mcC5kTytcIjpcIit0aGlzLmdMLm9wdGlvbnMoKS5wbGF5ZXJQb3J0K1wiL3Nlc3Npb24/JmFjdGlvbj1jaGVja1wiO2krPVwiJmhpdmVQbHVnaW5JZD1cIit0aGlzLmdMLmdldFBsdWdpbklkKCksaSs9XCImY2FsbGJhY2s9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHQpO3ZhciBvPXMuUmwuZ2V0SXRlbShcImhpdmVBY3RpdmVTZXNzaW9uSWRcIik7cmV0dXJuIHMuUmwucmVtb3ZlSXRlbShcImhpdmVBY3RpdmVTZXNzaW9uSWRcIiksbyYmKGkrPVwiJmN1cnJlbnRTZXNzaW9uPVwiK28pLHRoaXMuamVlKCksdGhpcy5RZWUoaSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gci5CZWU9RGF0ZS5ub3coKSxlP3IuS2VlKGUsaSx0LHIuVWVlKTooci5sb2dnZXIoKS5kZWJ1ZyhyLmlkKCkrXCJzZXNzaW9uIGFsbG93ZWQgW1wiKyhyLkJlZS1yLlVlZSkrXCJdXCIpLCExKX0sZnVuY3Rpb24odCl7aWYoNDAwPT10LnN0YXR1cylyZXR1cm4gci5ZZWUoXCJiYWQgcmVxdWVzdFwiLFwiZXJyb3IgcmVzb2x2aW5nIHRpY2tldFwiLHQpO2lmKDQwMT09dC5zdGF0dXMpcmV0dXJuIHIuWWVlKFwidW5hdXRob3JpemVkXCIsXCJlcnJvciB2ZXJpZnlpbmcgdGhlIHRpY2tldFwiLHQpO2lmKDQwMz09dC5zdGF0dXMpe3ZhciBpPWUuV2VlKHQsdm9pZCAwLFwic2Vzc2lvblwiKSxzPWk/e3plZTppfTp2b2lkIDA7cmV0dXJuIGcuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJyZXBvcnRzIGFub3RoZXIgYWN0aXZlIHNlc3Npb25cIixyLmlkKCkscyksci5nTC5hZGRUZWNoRXZlbnQobmV3IGQuR2wubGYobnVsbCxkLkdsLnRkLlhwLHMpKSxuLnJlamVjdChuZXcgeShULmZFLFwiYW5vdGhlciBhY3RpdmUgc2Vzc2lvblwiKyhzP1wiIFtcIitzLnplZStcIl1cIjpcIlwiKSkpfXJldHVybiA0MDQ9PXQuc3RhdHVzPyhyLmxvZ2dlcigpLmRlYnVnKHIuaWQoKStcImluc3RhbGxlZCB2ZXJzaW9uIGRvZXMgbm90IHN1cHBvcnQgYWN0aXZlIHNlc3Npb24gY2hlY2tcIiksci5CZWU9RGF0ZS5ub3coKSwhMSk6LTE9PXQuc3RhdHVzPyhjbGVhclRpbWVvdXQoci5KZWUpLHIuWGVlKCkpOihnLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwidW5oYW5kbGVkIGVycm9yIGZyb20gSmF2YVwiLHIuaWQoKSx7ZXJyb3I6dC5zdGF0dXN9KSxyLmdMLmFkZFRlY2hFdmVudChuZXcgZC5HbC5sZihudWxsLGQuR2wudGQuWnApKSxuLnJlamVjdChuZXcgeShULmRFLHQpKSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHk/bi5yZWplY3QoZSk6KGcuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IoXCJ1bmhhbmRsZWQgZXJyb3Igb24gcmVxdWVzdExlYXNlRGlyZWN0XCIsci5pZCgpLHtlcnJvcjplfSksci5nTC5hZGRUZWNoRXZlbnQobmV3IGQuR2wubGYobnVsbCxkLkdsLnRkLlpwKSksbi5yZWplY3QobmV3IHkoVC5kRSxlKSkpfSkuZmluYWxseShmdW5jdGlvbigpe2NsZWFyVGltZW91dChyLkplZSl9KX1yZXR1cm4gdGhpcy5sb2dnZXIoKS5kZWJ1Zyh0aGlzLmlkKCkrXCJIaXZlIHNlc3Npb24gY2hlY2sgZGlzYWJsZWQgLSB3aWxsIGRpcmVjdGx5IHJlc29sdmUgdGlja2V0IChvdGhlciBhY3RpdmUgc2Vzc2lvbnMgbWF5IGZhaWwpXCIpLG4ucmVzb2x2ZSghMSl9LGUucHJvdG90eXBlLlFlZT1mdW5jdGlvbihlKXtpZih0aGlzLmdMLm9wdGlvbnMoKS50ZXN0SWQpe2lmKCEoXCJkZXZlbG9wZXJcIiE9PXRoaXMudmVyc2lvbnx8dGhpcy52ZXJzaW9uPHUuZnAueU8pKXJldHVybiBvLmJwKGUsdm9pZCAwLCEwLCh0PXt9LHRbbC5MLmNSXT10aGlzLmdMLm9wdGlvbnMoKS50ZXN0SWQsdCkpO3RoaXMubG9nZ2VyKCkud2Fybih0aGlzLmlkKCkrXCJUaGUgSGl2ZSBDbGllbnQgVmVyc2lvbiBpbnN0YWxsZWQgZG9lcyBub3Qgc3VwcG9ydCB0aGUgdGVzdCBpZCBpbiBpdHMgZ2VuZXJhdGVkIG1ldHJpY3NcIil9cmV0dXJuIG8uYnAoZSk7dmFyIHR9LGUucHJvdG90eXBlLlllZT1mdW5jdGlvbih0LHIsaSl7dmFyIHM9ZS5XZWUoaSx0KTtyZXR1cm4gZy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihyLHRoaXMuaWQoKSksdGhpcy54ZWU9RGF0ZS5ub3coKSxuLnJlamVjdChuZXcgeShULnNFLHMpKX0sZS5XZWU9ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PXImJihyPVwic3RhdHVzXCIpO3ZhciBpPXQ7aWYoZS5ib2R5KXRyeXtpPUpTT04ucGFyc2UoZS5ib2R5KVtyXX1jYXRjaChlKXt9cmV0dXJuIGl9LGUucHJvdG90eXBlLnJlc29sdmVUaWNrZXRQcm9taXNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5IZWU9RGF0ZS5ub3coKSx0aGlzLmxvZ2dlcigpLmRlYnVnKHRoaXMuaWQoKStcInJlc29sdmluZyB0aWNrZXQ6IFwiK2UpO3ZhciByPXRoaXMuYmVlKGUpO3JldHVybiBvLmJwKHIsXCJhcHBsaWNhdGlvbi9qc29uXCIpLnRoZW4oZnVuY3Rpb24oaSl7cmV0dXJuIHQuS2VlKGkscixlLHQuSGVlKX0sZnVuY3Rpb24ocil7cmV0dXJuIHImJi0xPT1yLnN0YXR1cz90LlhlZSgpOihnLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiZXJyb3IgcmVzb2x2aW5nIHRpY2tldFwiLHQuaWQoKSx7dGlja2V0OmV9KSxuLnJlamVjdChuZXcgeShULnNFLHIpKSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gZy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcImVycm9yIHBhcnNpbmcgdGlja2V0IHJlc3BvbnNlXCIsdC5pZCgpLGUpLG4ucmVqZWN0KG5ldyB5KFQuZEUsZSkpfSl9LGUucHJvdG90eXBlLktlZT1mdW5jdGlvbihlLHQscixpKXt2YXIgbj1KU09OLnBhcnNlKGUpLHM9by4kaCh0LG4ubG9jYXRpb24pO3JldHVybiBuLnZlcnNpb24mJiF0aGlzLnZlcnNpb24mJih0aGlzLnZlcnNpb249bi52ZXJzaW9uKSx0aGlzLnhlZT1EYXRlLm5vdygpLHRoaXMubG9nZ2VyKCkuZGVidWcodGhpcy5pZCgpK1wicmVzb2x2ZWQgdGlja2V0IFwiK3IrXCIgLT4gXCIrcytcIiBbXCIrKHRoaXMueGVlLWkpK1wiXVwiKSxzfSxlLnByb3RvdHlwZS5WZWU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMuVEwoZSx0KTtpZihudWxsIT1pKXt2YXIgbj0obmV3IERhdGUpLmdldFRpbWUoKSxvPW4tcjtyZXR1cm4gbz49dGhpcy5vcHRpb25zXy53YXJuU2xvd1Jlc3BUaW1lb3V0JiZ0aGlzLkRMKG5ldyB5KFQuRUUsdGhpcy5pZCgpK1wiIFRoZSB0ZWNoIGluaXRpYWxpemF0aW9uIHRvb2sgbW9yZSB0aGFuIFwiK3RoaXMub3B0aW9uc18ud2FyblNsb3dSZXNwVGltZW91dCtcIiBtaWxsaXNlY29uZHNcIiksaSxvKSxzLkhpdmVSZXF1ZXN0RmFjdG9yeS5yZWdpc3RlclRlY2goaS5pZCx0aGlzLmdldE5hbWUoKSksaX10aHJvdyBuZXcgeShULnNFLFwiZXJyb3IgZ2VuZXJhdGluZyBzZXNzaW9uXCIpfSxlLnByb3RvdHlwZS5UTD1mdW5jdGlvbihlLHQpe3ZhciByPW5ldyBmLkJOO3IuUk4oZSk7dmFyIGk9bmV3IEkoZSxyLHQsbnVsbCk7aS5NTD0hMDt2YXIgbj11LmZwLkVPLHM9bi5leGVjKGkubWFuaWZlc3QpO3JldHVybiBudWxsIT1zPyhpLkxlZT1zWzFdLGkuaWQ9c1s1XSxpKTpudWxsfSxlLnByb3RvdHlwZS5iZWU9ZnVuY3Rpb24oZSl7dmFyIHQ9LTE9PWUuaW5kZXhPZihcIj9cIik/XCI/XCI6XCImXCI7cmV0dXJuIHRoaXMuRmVlKCk/by5JcCh1LmZwLmdPLHUuZnAuZE8sdGhpcy5nTC5vcHRpb25zKCkucGxheWVyUG9ydCxlKTpvLklwKHUuZnAuZk8sdS5mcC5kTyx0aGlzLmdMLm9wdGlvbnMoKS5wbGF5ZXJQb3J0LGUsdCx0aGlzLmdMLmdldFBsdWdpbklkKCkpfSxlLnByb3RvdHlwZS5qZWU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuSmVlJiZjbGVhclRpbWVvdXQodGhpcy5KZWUpLHRoaXMuSmVlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtnLkVycm9yTW9uaXRvci52ZSgpLmxvZ0Vycm9yKFwiVGhlIExlYXNlIFJlcXVlc3QgaXMgdGFraW5nIG1vcmUgdGhhbiBcIitlLm9wdGlvbnNfLndhcm5TbG93UmVzcFRpbWVvdXQrXCIgc2Vjc1wiLGUuaWQoKSl9LHRoaXMub3B0aW9uc18ud2FyblNsb3dSZXNwVGltZW91dCl9LGUucHJvdG90eXBlLnFlZT1mdW5jdGlvbigpe3RoaXMuVWVlPTAsdGhpcy5CZWU9MCx0aGlzLkhlZT0wLHRoaXMueGVlPTB9LGUucHJvdG90eXBlLmxvZ2dlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdMLmxvZ2dlcigpfSxlLnByb3RvdHlwZS5rTD1mdW5jdGlvbigpe3RoaXMucWVlKCl9LGUucHJvdG90eXBlLlhlZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1cIi8vXCIrdS5mcC5kTytcIjpcIit0aGlzLmdMLm9wdGlvbnMoKS5tb25pdG9yUG9ydCtcIi92ZXJzaW9uLmpzb25cIjtyZXR1cm4gdGhpcy5sb2dnZXIoKS5kZWJ1Zyh0aGlzLmlkKCkrXCJjaGVja2luZyBpZiB0aGUgbW9uaXRvciBwb3J0IGlzIHJlYWNoYWJsZVwiKSxvLmJwKHQpLnRoZW4oZnVuY3Rpb24odCl7dmFyIHI9SlNPTi5wYXJzZSh0KTt0aHJvdyBlLnN0YXRlPXIuc3RhdGUsZy5FcnJvck1vbml0b3IudmUoKS5sb2dFcnJvcihcIlZlcmlmeSBjbGllbnQgc3RhdGVcIixlLmlkKCkse3N0YXRlOmUuc3RhdGV9KSxlLmdMLmFkZFRlY2hFdmVudChuZXcgZC5HbC5sZihudWxsLGQuR2wudGQuenApKSxuZXcgeShULnBFLFwic3RhdGUgXCIrZS5zdGF0ZSl9KS5mYWlsKGZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiB5KXJldHVybiBuLnJlamVjdCh0KTtpZih0JiYtMT09dC5zdGF0dXMpe3ZhciByPVwiY2xpZW50IG5vdCByZWFjaGFibGVcIjtyZXR1cm4gZS5nTC5hZGRUZWNoRXZlbnQobmV3IGQuR2wubGYobnVsbCxkLkdsLnRkLldwKSksZS5sb2dnZXIoKS53YXJuKGUuaWQoKStyKSxuLnJlamVjdChuZXcgeShULnBFLHIpKX12YXIgcj1cIlZlcmlmeUNsaWVudFN0YXRlIGVycm9yXCI7cmV0dXJuIGcuRXJyb3JNb25pdG9yLnZlKCkubG9nRXJyb3IocixlLmlkKCkse2Vycm9yOnR9KSxlLmdMLmFkZFRlY2hFdmVudChuZXcgZC5HbC5sZihudWxsLGQuR2wudGQuenApKSxuLnJlamVjdChuZXcgeShULmRFLHIpKX0pfSxlLnByb3RvdHlwZS5GZWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zXy5zdXBwb3J0TGVnYWN5Q2xpZW50JiYoIXRoaXMudmVyc2lvbnx8dGhpcy52ZXJzaW9uLnN1YnN0cigwLDQpPFwiMjAxNlwiKX0sZX0oKTtTLkVMPVwiSGl2ZUphdmFcIix0LkhpdmVKYXZhPVN9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT10aGlzJiZ0aGlzLmh1fHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKGVbaV09dFtpXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXIoMjApLHM9cig0Mik7IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0Lm1pblZlcnNpb249cy5mcC52Tyx0LmluaXRUaW1lb3V0PTZlNCx0Lndhcm5TbG93UmVzcFRpbWVvdXQ9NWUzLHQuc3VwcG9ydExlZ2FjeUNsaWVudD0hMSx0fXJldHVybiBpKHQsZSksdH0obi5IaXZlQ29tbS5PcHRpb25zLlRwKTtlLk9lZT10fShlLk9wdGlvbnN8fChlLk9wdGlvbnM9e30pKX0odC5IaXZlQ29tbXx8KHQuSGl2ZUNvbW09e30pKX1dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvcmUuaGl2ZS5taW4uanMubWFwXG4hZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShyKXtpZihuW3JdKXJldHVybiBuW3JdLm87dmFyIG89bltyXT17aTpyLHM6ITEsbzp7fX07cmV0dXJuIHRbcl0uY2FsbChvLm8sbyxvLm8sZSksby5zPSEwLG8ub312YXIgbj17fTtlLnU9dCxlLmM9bixlLmQ9ZnVuY3Rpb24odCxuLHIpe2UucCh0LG4pfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHtsOiExLGg6ITAsZ2V0OnJ9KX0sZS5uPWZ1bmN0aW9uKHQpe3ZhciBuPXQmJnQudj9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiBlLmQobixcImFcIixuKSxufSxlLnA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LGUuZz1cIlwiLGUoZS5tPTEpfShbZnVuY3Rpb24odCxlLG4pey8qIVxuICpcbiAqIENvcHlyaWdodCAyMDA5LTIwMTYgS3JpcyBLb3dhbCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVFxuICogbGljZW5zZSBmb3VuZCBhdCBodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EvYmxvYi92MS9MSUNFTlNFXG4gKlxuICogV2l0aCBwYXJ0cyBieSBUeWxlciBDbG9zZVxuICogQ29weXJpZ2h0IDIwMDctMjAwOSBUeWxlciBDbG9zZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVCBYIGxpY2Vuc2UgZm91bmRcbiAqIGF0IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UuaHRtbFxuICogRm9ya2VkIGF0IHJlZl9zZW5kLmpzIHZlcnNpb246IDIwMDktMDUtMTFcbiAqXG4gKiBXaXRoIHBhcnRzIGJ5IE1hcmsgTWlsbGVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTEgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cbiFmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBib290c3RyYXApYm9vdHN0cmFwKFwicHJvbWlzZVwiLGUpO2Vsc2V7dC5vPWUoKX19KGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gSi5hcHBseSh0LGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGUodCl7cmV0dXJuIHQ9PT1PYmplY3QodCl9ZnVuY3Rpb24gbih0KXtyZXR1cm5cIltvYmplY3QgU3RvcEl0ZXJhdGlvbl1cIj09PXR0KHQpfHx0IGluc3RhbmNlb2YgRn1mdW5jdGlvbiByKHQsZSl7aWYoQiYmZS5zdGFjayYmXCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10JiZ0LnN0YWNrJiYtMT09PXQuc3RhY2suaW5kZXhPZihldCkpe2Zvcih2YXIgbj1bXSxyPWU7cjtyPXIuc291cmNlKXIuc3RhY2smJm4udW5zaGlmdChyLnN0YWNrKTtuLnVuc2hpZnQodC5zdGFjayk7dmFyIGk9bi5qb2luKFwiXFxuXCIrZXQrXCJcXG5cIik7dC5zdGFjaz1vKGkpfX1mdW5jdGlvbiBvKHQpe2Zvcih2YXIgZT10LnNwbGl0KFwiXFxuXCIpLG49W10scj0wO3I8ZS5sZW5ndGg7KytyKXt2YXIgbz1lW3JdO3Uobyl8fGkobyl8fCFvfHxuLnB1c2gobyl9cmV0dXJuIG4uam9pbihcIlxcblwiKX1mdW5jdGlvbiBpKHQpe3JldHVybi0xIT09dC5pbmRleE9mKFwiKG1vZHVsZS5qczpcIil8fC0xIT09dC5pbmRleE9mKFwiKG5vZGUuanM6XCIpfWZ1bmN0aW9uIHModCl7dmFyIGU9L2F0IC4rIFxcKCguKyk6KFxcZCspOig/OlxcZCspXFwpJC8uZXhlYyh0KTtpZihlKXJldHVybltlWzFdLE51bWJlcihlWzJdKV07dmFyIG49L2F0IChbXiBdKyk6KFxcZCspOig/OlxcZCspJC8uZXhlYyh0KTtpZihuKXJldHVybltuWzFdLE51bWJlcihuWzJdKV07dmFyIHI9Ly4qQCguKyk6KFxcZCspJC8uZXhlYyh0KTtyZXR1cm4gcj9bclsxXSxOdW1iZXIoclsyXSldOnZvaWQgMH1mdW5jdGlvbiB1KHQpe3ZhciBlPXModCk7aWYoIWUpcmV0dXJuITE7dmFyIG49ZVswXSxyPWVbMV07cmV0dXJuIG49PT1NJiZyPj1xJiZyPD1zdH1mdW5jdGlvbiBhKCl7aWYoQil0cnl7dGhyb3cgbmV3IEVycm9yfWNhdGNoKHIpe3ZhciB0PXIuc3RhY2suc3BsaXQoXCJcXG5cIiksZT10WzBdLmluZGV4T2YoXCJAXCIpPjA/dFsxXTp0WzJdLG49cyhlKTtpZighbilyZXR1cm47cmV0dXJuIE09blswXSxuWzFdfX1mdW5jdGlvbiBjKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZD90OmcodCk/Tih0KTp3KHQpfWZ1bmN0aW9uIHAoKXtmdW5jdGlvbiB0KHQpe2U9dCxjLlQmJkImJihpLnNvdXJjZT10KSxHKG4sZnVuY3Rpb24oZSxuKXtjLl8oZnVuY3Rpb24oKXt0LkkuYXBwbHkodCxuKX0pfSx2b2lkIDApLG49dm9pZCAwLHI9dm9pZCAwfXZhciBlLG49W10scj1bXSxvPXoocC5wcm90b3R5cGUpLGk9eihkLnByb3RvdHlwZSk7aWYoaS5JPWZ1bmN0aW9uKHQsbyxpKXt2YXIgcz1YKGFyZ3VtZW50cyk7bj8obi5wdXNoKHMpLFwid2hlblwiPT09byYmaVsxXSYmci5wdXNoKGlbMV0pKTpjLl8oZnVuY3Rpb24oKXtlLkkuYXBwbHkoZSxzKX0pfSxpLnZhbHVlT2Y9ZnVuY3Rpb24oKXtpZihuKXJldHVybiBpO3ZhciB0PXkoZSk7cmV0dXJuIHYodCkmJihlPXQpLHR9LGkuTj1mdW5jdGlvbigpe3JldHVybiBlP2UuTigpOntzdGF0ZTpcInBlbmRpbmdcIn19LGMuVCYmQil0cnl7dGhyb3cgbmV3IEVycm9yfWNhdGNoKHQpe2kuc3RhY2s9dC5zdGFjay5zdWJzdHJpbmcodC5zdGFjay5pbmRleE9mKFwiXFxuXCIpKzEpfXJldHVybiBvLms9aSxvLnJlc29sdmU9ZnVuY3Rpb24obil7ZXx8dChjKG4pKX0sby5SPWZ1bmN0aW9uKG4pe2V8fHQodyhuKSl9LG8ucmVqZWN0PWZ1bmN0aW9uKG4pe2V8fHQoSShuKSl9LG8ubm90aWZ5PWZ1bmN0aW9uKHQpe2V8fEcocixmdW5jdGlvbihlLG4pe2MuXyhmdW5jdGlvbigpe24odCl9KX0sdm9pZCAwKX0sb31mdW5jdGlvbiBmKHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlc29sdmVyIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7dmFyIGU9cCgpO3RyeXt0KGUucmVzb2x2ZSxlLnJlamVjdCxlLm5vdGlmeSl9Y2F0Y2godCl7ZS5yZWplY3QodCl9cmV0dXJuIGUua31mdW5jdGlvbiBsKHQpe3JldHVybiBmKGZ1bmN0aW9uKGUsbil7Zm9yKHZhciByPTAsbz10Lmxlbmd0aDtyPG87cisrKWModFtyXSkudGhlbihlLG4pfSl9ZnVuY3Rpb24gZCh0LGUsbil7dm9pZCAwPT09ZSYmKGU9ZnVuY3Rpb24odCl7cmV0dXJuIEkobmV3IEVycm9yKFwiUHJvbWlzZSBkb2VzIG5vdCBzdXBwb3J0IG9wZXJhdGlvbjogXCIrdCkpfSksdm9pZCAwPT09biYmKG49ZnVuY3Rpb24oKXtyZXR1cm57c3RhdGU6XCJ1bmtub3duXCJ9fSk7dmFyIHI9eihkLnByb3RvdHlwZSk7aWYoci5JPWZ1bmN0aW9uKG4sbyxpKXt2YXIgczt0cnl7cz10W29dP3Rbb10uYXBwbHkocixpKTplLmNhbGwocixvLGkpfWNhdGNoKHQpe3M9SSh0KX1uJiZuKHMpfSxyLk49bixuKXt2YXIgbz1uKCk7XCJyZWplY3RlZFwiPT09by5zdGF0ZSYmKHIuZXhjZXB0aW9uPW8ucmVhc29uKSxyLnZhbHVlT2Y9ZnVuY3Rpb24oKXt2YXIgdD1uKCk7cmV0dXJuXCJwZW5kaW5nXCI9PT10LnN0YXRlfHxcInJlamVjdGVkXCI9PT10LnN0YXRlP3I6dC52YWx1ZX19cmV0dXJuIHJ9ZnVuY3Rpb24gaCh0LGUsbixyKXtyZXR1cm4gYyh0KS50aGVuKGUsbixyKX1mdW5jdGlvbiB5KHQpe2lmKHYodCkpe3ZhciBlPXQuTigpO2lmKFwiZnVsZmlsbGVkXCI9PT1lLnN0YXRlKXJldHVybiBlLnZhbHVlfXJldHVybiB0fWZ1bmN0aW9uIHYodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBkfWZ1bmN0aW9uIGcodCl7cmV0dXJuIGUodCkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQudGhlbn1mdW5jdGlvbiBFKHQpe3JldHVybiB2KHQpJiZcInBlbmRpbmdcIj09PXQuTigpLnN0YXRlfWZ1bmN0aW9uIG0odCl7cmV0dXJuIXYodCl8fFwiZnVsZmlsbGVkXCI9PT10Lk4oKS5zdGF0ZX1mdW5jdGlvbiBUKHQpe3JldHVybiB2KHQpJiZcInJlamVjdGVkXCI9PT10Lk4oKS5zdGF0ZX1mdW5jdGlvbiBTKCl7bnQubGVuZ3RoPTAscnQubGVuZ3RoPTAsaXR8fChpdD0hMCl9ZnVuY3Rpb24gXyh0LGUpe2l0JiYoXCJvYmplY3RcIj09dHlwZW9mIHByb2Nlc3MmJnByb2Nlc3MmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHByb2Nlc3MuTyYmYy5fLkQoZnVuY3Rpb24oKXstMSE9PUsocnQsdCkmJihwcm9jZXNzLk8oXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixlLHQpLG90LnB1c2godCkpfSkscnQucHVzaCh0KSxlJiZ2b2lkIDAhPT1lLnN0YWNrP250LnB1c2goZS5zdGFjayk6bnQucHVzaChcIihubyBzdGFjaykgXCIrZSkpfWZ1bmN0aW9uIGIodCl7aWYoaXQpe3ZhciBlPUsocnQsdCk7LTEhPT1lJiYoXCJvYmplY3RcIj09dHlwZW9mIHByb2Nlc3MmJnByb2Nlc3MmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHByb2Nlc3MuTyYmYy5fLkQoZnVuY3Rpb24oKXt2YXIgbj1LKG90LHQpOy0xIT09biYmKHByb2Nlc3MuTyhcInJlamVjdGlvbkhhbmRsZWRcIixudFtlXSx0KSxvdC5zcGxpY2UobiwxKSl9KSxydC5zcGxpY2UoZSwxKSxudC5zcGxpY2UoZSwxKSl9fWZ1bmN0aW9uIEkodCl7dmFyIGU9ZCh7d2hlbjpmdW5jdGlvbihlKXtyZXR1cm4gZSYmYih0aGlzKSxlP2UodCk6dGhpc319LGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGZ1bmN0aW9uKCl7cmV0dXJue3N0YXRlOlwicmVqZWN0ZWRcIixyZWFzb246dH19KTtyZXR1cm4gXyhlLHQpLGV9ZnVuY3Rpb24gdyh0KXtyZXR1cm4gZCh7d2hlbjpmdW5jdGlvbigpe3JldHVybiB0fSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LHNldDpmdW5jdGlvbihlLG4pe3RbZV09bn0sZGVsZXRlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0W2VdfSxQOmZ1bmN0aW9uKGUsbil7cmV0dXJuIG51bGw9PT1lfHx2b2lkIDA9PT1lP3QuYXBwbHkodm9pZCAwLG4pOnRbZV0uYXBwbHkodCxuKX0sYXBwbHk6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5hcHBseShlLG4pfSxrZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIFoodCl9fSx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm57c3RhdGU6XCJmdWxmaWxsZWRcIix2YWx1ZTp0fX0pfWZ1bmN0aW9uIE4odCl7dmFyIGU9cCgpO3JldHVybiBjLl8oZnVuY3Rpb24oKXt0cnl7dC50aGVuKGUucmVzb2x2ZSxlLnJlamVjdCxlLm5vdGlmeSl9Y2F0Y2godCl7ZS5yZWplY3QodCl9fSksZS5rfWZ1bmN0aW9uIGsodCl7cmV0dXJuIGQoe0M6ZnVuY3Rpb24oKXt9fSxmdW5jdGlvbihlLG4pe3JldHVybiBDKHQsZSxuKX0sZnVuY3Rpb24oKXtyZXR1cm4gYyh0KS5OKCl9KX1mdW5jdGlvbiBSKHQsZSxuKXtyZXR1cm4gYyh0KS5BKGUsbil9ZnVuY3Rpb24geCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsZSl7dmFyIHM7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFN0b3BJdGVyYXRpb24pe3RyeXtzPXJbdF0oZSl9Y2F0Y2godCl7cmV0dXJuIEkodCl9cmV0dXJuIHMuZG9uZT9jKHMudmFsdWUpOmgocy52YWx1ZSxvLGkpfXRyeXtzPXJbdF0oZSl9Y2F0Y2godCl7cmV0dXJuIG4odCk/Yyh0LnZhbHVlKTpJKHQpfXJldHVybiBoKHMsbyxpKX12YXIgcj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxvPWUuYmluZChlLFwibmV4dFwiKSxpPWUuYmluZChlLFwidGhyb3dcIik7cmV0dXJuIG8oKX19ZnVuY3Rpb24gTyh0KXtjLmRvbmUoYy5hc3luYyh0KSgpKX1mdW5jdGlvbiBEKHQpe3Rocm93IG5ldyBGKHQpfWZ1bmN0aW9uIFAodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIFIoW3RoaXMsQShhcmd1bWVudHMpXSxmdW5jdGlvbihlLG4pe3JldHVybiB0LmFwcGx5KGUsbil9KX19ZnVuY3Rpb24gQyh0LGUsbil7cmV0dXJuIGModCkuTChlLG4pfWZ1bmN0aW9uIEEodCl7cmV0dXJuIGgodCxmdW5jdGlvbih0KXt2YXIgZT0wLG49cCgpO3JldHVybiBHKHQsZnVuY3Rpb24ocixvLGkpe3ZhciBzO3YobykmJlwiZnVsZmlsbGVkXCI9PT0ocz1vLk4oKSkuc3RhdGU/dFtpXT1zLnZhbHVlOigrK2UsaChvLGZ1bmN0aW9uKHIpe3RbaV09ciwwPT0tLWUmJm4ucmVzb2x2ZSh0KX0sbi5yZWplY3QsZnVuY3Rpb24odCl7bi5ub3RpZnkoe2luZGV4OmksdmFsdWU6dH0pfSkpfSx2b2lkIDApLDA9PT1lJiZuLnJlc29sdmUodCksbi5rfSl9ZnVuY3Rpb24gTCh0KXtpZigwPT09dC5sZW5ndGgpcmV0dXJuIGMucmVzb2x2ZSgpO3ZhciBlPWMuZGVmZXIoKSxuPTA7cmV0dXJuIEcodCxmdW5jdGlvbihyLG8saSl7ZnVuY3Rpb24gcyh0KXtlLnJlc29sdmUodCl9ZnVuY3Rpb24gdSh0KXswPT09LS1uJiYodC5tZXNzYWdlPVwiUSBjYW4ndCBnZXQgZnVsZmlsbG1lbnQgdmFsdWUgZnJvbSBhbnkgcHJvbWlzZSwgYWxsIHByb21pc2VzIHdlcmUgcmVqZWN0ZWQuIExhc3QgZXJyb3IgbWVzc2FnZTogXCIrdC5tZXNzYWdlLGUucmVqZWN0KHQpKX1mdW5jdGlvbiBhKHQpe2Uubm90aWZ5KHtpbmRleDppLHZhbHVlOnR9KX12YXIgYz10W2ldO24rKyxoKGMscyx1LGEpfSx2b2lkIDApLGUua31mdW5jdGlvbiBWKHQpe3JldHVybiBoKHQsZnVuY3Rpb24odCl7cmV0dXJuIHQ9Vyh0LGMpLGgoQShXKHQsZnVuY3Rpb24odCl7cmV0dXJuIGgodCxRLFEpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX0pfWZ1bmN0aW9uIEgodCl7cmV0dXJuIGModCkuVigpfWZ1bmN0aW9uIFUodCxlKXtyZXR1cm4gYyh0KS50aGVuKHZvaWQgMCx2b2lkIDAsZSl9ZnVuY3Rpb24gaih0LGUpe3JldHVybiBjKHQpLkgoZSl9dmFyIEI9ITE7dHJ5e3Rocm93IG5ldyBFcnJvcn1jYXRjaCh0KXtCPSEhdC5zdGFja312YXIgTSxGLHE9YSgpLFE9ZnVuY3Rpb24oKXt9LFk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7Zm9yKHZhciB0LHI7bi5uZXh0OyluPW4ubmV4dCx0PW4uVSxuLlU9dm9pZCAwLHI9bi5kb21haW4sciYmKG4uZG9tYWluPXZvaWQgMCxyLmooKSksZSh0LHIpO2Zvcig7YS5sZW5ndGg7KXQ9YS5wb3AoKSxlKHQpO289ITF9ZnVuY3Rpb24gZShlLG4pe3RyeXtlKCl9Y2F0Y2goZSl7aWYocyl0aHJvdyBuJiZuLkIoKSxzZXRUaW1lb3V0KHQsMCksbiYmbi5qKCksZTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZX0sMCl9biYmbi5CKCl9dmFyIG49e1U6dm9pZCAwLG5leHQ6bnVsbH0scj1uLG89ITEsaT12b2lkIDAscz0hMSx1PSExO3RyeXt1PW5hdmlnYXRvciYmKFwiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCI9PT1uYXZpZ2F0b3IuYXBwTmFtZXx8bnVsbCE9bmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goLyh0cmlkZW50KS4rcnZbOlxcc10oW1xcd1xcLl0rKS4rbGlrZVxcc2dlY2tvL2kpKX1jYXRjaCh0KXt9dmFyIGE9W107aWYoWT1mdW5jdGlvbih0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgRnJhbWV3b3JrJiZGcmFtZXdvcmsuTSgpP0ZyYW1ld29yay5zZXRUaW1lb3V0KHQsMCk6KHI9ci5uZXh0PXtVOnQsZG9tYWluOnMmJnByb2Nlc3MuZG9tYWluLG5leHQ6bnVsbH0sb3x8KG89ITAsaSgpKSl9LFwib2JqZWN0XCI9PXR5cGVvZiBwcm9jZXNzJiZwcm9jZXNzJiZcIltvYmplY3QgcHJvY2Vzc11cIj09PXByb2Nlc3MudG9TdHJpbmcoKSYmcHJvY2Vzcy5fKXM9ITAsaT1mdW5jdGlvbigpe3Byb2Nlc3MuXyh0KX07ZWxzZSBpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBzZXRJbW1lZGlhdGV8fHUpaWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIE1lc3NhZ2VDaGFubmVsfHx1KWk9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHQsMCl9O2Vsc2V7dmFyIGM9bmV3IE1lc3NhZ2VDaGFubmVsO2MucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKCl7aT1wLGMucG9ydDEub25tZXNzYWdlPXQsdCgpfTt2YXIgcD1mdW5jdGlvbigpe2MucG9ydDIucG9zdE1lc3NhZ2UoMCl9O2k9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHQsMCkscCgpfX1lbHNlIGk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz9zZXRJbW1lZGlhdGUuYmluZCh3aW5kb3csdCk6ZnVuY3Rpb24oKXtzZXRJbW1lZGlhdGUodCl9O3JldHVybiBZLkQ9ZnVuY3Rpb24odCl7YS5wdXNoKHQpLG98fChvPSEwLGkoKSl9LFl9KCksSj1GdW5jdGlvbi5jYWxsLFg9dChBcnJheS5wcm90b3R5cGUuc2xpY2UpLEc9dChBcnJheS5wcm90b3R5cGUucmVkdWNlfHxmdW5jdGlvbih0LGUpe3ZhciBuPTAscj10aGlzLmxlbmd0aDtpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IoOzspe2lmKG4gaW4gdGhpcyl7ZT10aGlzW24rK107YnJlYWt9aWYoKytuPj1yKXRocm93IG5ldyBUeXBlRXJyb3J9Zm9yKDtuPHI7bisrKW4gaW4gdGhpcyYmKGU9dChlLHRoaXNbbl0sbikpO3JldHVybiBlfSksSz10KEFycmF5LnByb3RvdHlwZS5pbmRleE9mfHxmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubGVuZ3RoO2UrKylpZih0aGlzW2VdPT09dClyZXR1cm4gZTtyZXR1cm4tMX0pLFc9dChBcnJheS5wcm90b3R5cGUubWFwfHxmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj1bXTtyZXR1cm4gRyhuLGZ1bmN0aW9uKG8saSxzKXtyLnB1c2godC5jYWxsKGUsaSxzLG4pKX0sdm9pZCAwKSxyfSksej1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZT10LG5ldyBlfSwkPXQoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSksWj1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpJCh0LG4pJiZlLnB1c2gobik7cmV0dXJuIGV9LHR0PXQoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyk7Rj1cInVuZGVmaW5lZFwiIT10eXBlb2YgUmV0dXJuVmFsdWU/UmV0dXJuVmFsdWU6ZnVuY3Rpb24odCl7dGhpcy52YWx1ZT10fTt2YXIgZXQ9XCJGcm9tIHByZXZpb3VzIGV2ZW50OlwiO2MucmVzb2x2ZT1jLGMuXz1ZLGMuVD0hMSxcIm9iamVjdFwiPT10eXBlb2YgcHJvY2VzcyYmcHJvY2VzcyYmcHJvY2Vzcy5GJiZwcm9jZXNzLkYucSYmKGMuVD0hMCksYy5kZWZlcj1wLHAucHJvdG90eXBlLlk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBmdW5jdGlvbihlLG4pe2U/dC5yZWplY3QoZSk6YXJndW1lbnRzLmxlbmd0aD4yP3QucmVzb2x2ZShYKGFyZ3VtZW50cywxKSk6dC5yZXNvbHZlKG4pfX0sYy5Qcm9taXNlPWYsYy5rPWYsZi5yYWNlPWwsZi5hbGw9QSxmLnJlamVjdD1JLGYucmVzb2x2ZT1jLGMuSj1mdW5jdGlvbih0KXtyZXR1cm4gdH0sZC5wcm90b3R5cGUuSj1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxjLmpvaW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gYyh0KS5qb2luKGUpfSxkLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uKHQpe3JldHVybiBjKFt0aGlzLHRdKS5BKGZ1bmN0aW9uKHQsZSl7aWYodD09PWUpcmV0dXJuIHQ7dGhyb3cgbmV3IEVycm9yKFwiUSBjYW4ndCBqb2luOiBub3QgdGhlIHNhbWU6IFwiK3QrXCIgXCIrZSl9KX0sYy5yYWNlPWwsZC5wcm90b3R5cGUucmFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRoZW4oYy5yYWNlKX0sYy5YPWQsZC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIltvYmplY3QgUHJvbWlzZV1cIn0sZC5wcm90b3R5cGUudGhlbj1mdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gbyhlKXt0cnl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdD90KGUpOmV9Y2F0Y2godCl7cmV0dXJuIEkodCl9fWZ1bmN0aW9uIGkodCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZSl7cih0LHUpO3RyeXtyZXR1cm4gZSh0KX1jYXRjaCh0KXtyZXR1cm4gSSh0KX19cmV0dXJuIEkodCl9ZnVuY3Rpb24gcyh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP24odCk6dH12YXIgdT10aGlzLGE9cCgpLGY9ITE7cmV0dXJuIGMuXyhmdW5jdGlvbigpe3UuSShmdW5jdGlvbih0KXtmfHwoZj0hMCxhLnJlc29sdmUobyh0KSkpfSxcIndoZW5cIixbZnVuY3Rpb24odCl7Znx8KGY9ITAsYS5yZXNvbHZlKGkodCkpKX1dKX0pLHUuSSh2b2lkIDAsXCJ3aGVuXCIsW3ZvaWQgMCxmdW5jdGlvbih0KXt2YXIgZSxuPSExO3RyeXtlPXModCl9Y2F0Y2godCl7aWYobj0hMCwhYy5vbmVycm9yKXRocm93IHQ7Yy5vbmVycm9yKHQpfW58fGEubm90aWZ5KGUpfV0pLGEua30sYy5HPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGModCkuRyhlKX0sZC5wcm90b3R5cGUuRz1mdW5jdGlvbih0KXtyZXR1cm4gdD1jKHQpLHRoaXMudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5XKGUpLksoZSl9KX0sYy53aGVuPWgsZC5wcm90b3R5cGUuSz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHR9KX0sYy5LPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGModCkuSyhlKX0sZC5wcm90b3R5cGUuJD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgdH0pfSxjLiQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYyh0KS4kKGUpfSxjLlo9eSxjLnR0PXYsYy5ldD1nLGMubnQ9RSxkLnByb3RvdHlwZS5udD1mdW5jdGlvbigpe3JldHVyblwicGVuZGluZ1wiPT09dGhpcy5OKCkuc3RhdGV9LGMucnQ9bSxkLnByb3RvdHlwZS5ydD1mdW5jdGlvbigpe3JldHVyblwiZnVsZmlsbGVkXCI9PT10aGlzLk4oKS5zdGF0ZX0sYy5vdD1ULGQucHJvdG90eXBlLm90PWZ1bmN0aW9uKCl7cmV0dXJuXCJyZWplY3RlZFwiPT09dGhpcy5OKCkuc3RhdGV9O3ZhciBudD1bXSxydD1bXSxvdD1bXSxpdD0hMDtjLml0PVMsYy5zdD1mdW5jdGlvbigpe3JldHVybiBudC5zbGljZSgpfSxjLnV0PWZ1bmN0aW9uKCl7UygpLGl0PSExfSxTKCksYy5yZWplY3Q9SSxjLlI9dyxjLmF0PWssYy5BPVIsZC5wcm90b3R5cGUuQT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmFsbCgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQuYXBwbHkodm9pZCAwLGUpfSxlKX0sYy5hc3luYz14LGMuY3Q9TyxjLnB0PUQsYy5mdD1QLGMuTD1DLGQucHJvdG90eXBlLkw9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9cCgpO3JldHVybiBjLl8oZnVuY3Rpb24oKXtuLkkoci5yZXNvbHZlLHQsZSl9KSxyLmt9LGMuZ2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGModCkuTChcImdldFwiLFtlXSl9LGQucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5MKFwiZ2V0XCIsW3RdKX0sYy5zZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBjKHQpLkwoXCJzZXRcIixbZSxuXSl9LGQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLkwoXCJzZXRcIixbdCxlXSl9LGMubHQ9Yy5kZWxldGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYyh0KS5MKFwiZGVsZXRlXCIsW2VdKX0sZC5wcm90b3R5cGUubHQ9ZC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkwoXCJkZWxldGVcIixbdF0pfSxjLmR0PWMuUD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGModCkuTChcInBvc3RcIixbZSxuXSl9LGQucHJvdG90eXBlLmR0PWQucHJvdG90eXBlLlA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5MKFwicG9zdFwiLFt0LGVdKX0sYy5zZW5kPWMuaHQ9Yy55dD1mdW5jdGlvbih0LGUpe3JldHVybiBjKHQpLkwoXCJwb3N0XCIsW2UsWChhcmd1bWVudHMsMildKX0sZC5wcm90b3R5cGUuc2VuZD1kLnByb3RvdHlwZS5odD1kLnByb3RvdHlwZS55dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5MKFwicG9zdFwiLFt0LFgoYXJndW1lbnRzLDEpXSl9LGMudnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYyh0KS5MKFwiYXBwbHlcIixbdm9pZCAwLGVdKX0sZC5wcm90b3R5cGUudnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuTChcImFwcGx5XCIsW3ZvaWQgMCx0XSl9LGMuZ3Q9Yy5XPWZ1bmN0aW9uKHQpe3JldHVybiBjKHQpLkwoXCJhcHBseVwiLFt2b2lkIDAsWChhcmd1bWVudHMsMSldKX0sZC5wcm90b3R5cGUuVz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkwoXCJhcHBseVwiLFt2b2lkIDAsWChhcmd1bWVudHMpXSl9LGMuRXQ9ZnVuY3Rpb24odCl7dmFyIGU9Yyh0KSxuPVgoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLkwoXCJhcHBseVwiLFt0aGlzLG4uY29uY2F0KFgoYXJndW1lbnRzKSldKX19LGQucHJvdG90eXBlLkV0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPVgoYXJndW1lbnRzKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5MKFwiYXBwbHlcIixbdGhpcyxlLmNvbmNhdChYKGFyZ3VtZW50cykpXSl9fSxjLmtleXM9ZnVuY3Rpb24odCl7cmV0dXJuIGModCkuTChcImtleXNcIixbXSl9LGQucHJvdG90eXBlLmtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5MKFwia2V5c1wiLFtdKX0sYy5hbGw9QSxkLnByb3RvdHlwZS5hbGw9ZnVuY3Rpb24oKXtyZXR1cm4gQSh0aGlzKX0sYy5UdD1MLGQucHJvdG90eXBlLlR0PWZ1bmN0aW9uKCl7cmV0dXJuIEwodGhpcyl9LGMuU3Q9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybihlK1wiIGlzIGRlcHJlY2F0ZWQsIHVzZSBcIituK1wiIGluc3RlYWQuXCIsbmV3IEVycm9yKFwiXCIpLnN0YWNrKSx0LmFwcGx5KHQsYXJndW1lbnRzKX19KFYsXCJhbGxSZXNvbHZlZFwiLFwiYWxsU2V0dGxlZFwiKSxkLnByb3RvdHlwZS5TdD1mdW5jdGlvbigpe3JldHVybiBWKHRoaXMpfSxjLlY9SCxkLnByb3RvdHlwZS5WPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gQShXKHQsZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0Lk4oKX1yZXR1cm4gdD1jKHQpLHQudGhlbihlLGUpfSkpfSl9LGMuZmFpbD1jLmNhdGNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGModCkudGhlbih2b2lkIDAsZSl9LGQucHJvdG90eXBlLmZhaWw9ZC5wcm90b3R5cGUuY2F0Y2g9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsdCl9LGMucHJvZ3Jlc3M9VSxkLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCx2b2lkIDAsdCl9LGMuX3Q9Yy5maW5hbGx5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGModCkuZmluYWxseShlKX0sZC5wcm90b3R5cGUuX3Q9ZC5wcm90b3R5cGUuZmluYWxseT1mdW5jdGlvbih0KXtpZighdHx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5hcHBseSl0aHJvdyBuZXcgRXJyb3IoXCJRIGNhbid0IGFwcGx5IGZpbmFsbHkgY2FsbGJhY2tcIik7cmV0dXJuIHQ9Yyh0KSx0aGlzLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQuVygpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZX0pfSxmdW5jdGlvbihlKXtyZXR1cm4gdC5XKCkudGhlbihmdW5jdGlvbigpe3Rocm93IGV9KX0pfSxjLmRvbmU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIGModCkuZG9uZShlLG4scil9LGQucHJvdG90eXBlLmRvbmU9ZnVuY3Rpb24odCxlLG4pe3ZhciBvPWZ1bmN0aW9uKHQpe2MuXyhmdW5jdGlvbigpe2lmKHIodCxpKSwhYy5vbmVycm9yKXRocm93IHQ7Yy5vbmVycm9yKHQpfSl9LGk9dHx8ZXx8bj90aGlzLnRoZW4odCxlLG4pOnRoaXM7XCJvYmplY3RcIj09dHlwZW9mIHByb2Nlc3MmJnByb2Nlc3MmJnByb2Nlc3MuZG9tYWluJiYobz1wcm9jZXNzLmRvbWFpbi5iaW5kKG8pKSxpLnRoZW4odm9pZCAwLG8pfSxjLnRpbWVvdXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBjKHQpLnRpbWVvdXQoZSxuKX0sZC5wcm90b3R5cGUudGltZW91dD1mdW5jdGlvbih0LGUpe3ZhciBuPXAoKSxyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlJiZcInN0cmluZ1wiIT10eXBlb2YgZXx8KGU9bmV3IEVycm9yKGV8fFwiVGltZWQgb3V0IGFmdGVyIFwiK3QrXCIgbXNcIiksZS5jb2RlPVwiRVRJTUVET1VUXCIpLG4ucmVqZWN0KGUpfSx0KTtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dChyKSxuLnJlc29sdmUodCl9LGZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dChyKSxuLnJlamVjdCh0KX0sbi5ub3RpZnkpLG4ua30sYy5kZWxheT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT10LHQ9dm9pZCAwKSxjKHQpLmRlbGF5KGUpfSxkLnByb3RvdHlwZS5kZWxheT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGUpe3ZhciBuPXAoKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe24ucmVzb2x2ZShlKX0sdCksbi5rfSl9LGMuYnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYyh0KS5idChlKX0sZC5wcm90b3R5cGUuYnQ9ZnVuY3Rpb24odCl7dmFyIGU9cCgpLG49WCh0KTtyZXR1cm4gbi5wdXNoKGUuWSgpKSx0aGlzLnZ0KG4pLmZhaWwoZS5yZWplY3QpLGUua30sYy5JdD1mdW5jdGlvbih0KXt2YXIgZT1YKGFyZ3VtZW50cywxKTtyZXR1cm4gYyh0KS5idChlKX0sZC5wcm90b3R5cGUuSXQ9ZnVuY3Rpb24oKXt2YXIgdD1YKGFyZ3VtZW50cyksZT1wKCk7cmV0dXJuIHQucHVzaChlLlkoKSksdGhpcy52dCh0KS5mYWlsKGUucmVqZWN0KSxlLmt9LGMud3Q9Yy5OdD1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBFcnJvcihcIlEgY2FuJ3Qgd3JhcCBhbiB1bmRlZmluZWQgZnVuY3Rpb25cIik7dmFyIGU9WChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49ZS5jb25jYXQoWChhcmd1bWVudHMpKSxyPXAoKTtyZXR1cm4gbi5wdXNoKHIuWSgpKSxjKHQpLnZ0KG4pLmZhaWwoci5yZWplY3QpLHIua319LGQucHJvdG90eXBlLnd0PWQucHJvdG90eXBlLk50PWZ1bmN0aW9uKCl7dmFyIHQ9WChhcmd1bWVudHMpO3JldHVybiB0LnVuc2hpZnQodGhpcyksYy5OdC5hcHBseSh2b2lkIDAsdCl9LGMua3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj1YKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiByKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfXZhciBvPW4uY29uY2F0KFgoYXJndW1lbnRzKSksaT1wKCk7cmV0dXJuIG8ucHVzaChpLlkoKSksYyhyKS52dChvKS5mYWlsKGkucmVqZWN0KSxpLmt9fSxkLnByb3RvdHlwZS5rdD1mdW5jdGlvbigpe3ZhciB0PVgoYXJndW1lbnRzLDApO3JldHVybiB0LnVuc2hpZnQodGhpcyksYy5rdC5hcHBseSh2b2lkIDAsdCl9LGMuUnQ9Yy54dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGModCkueHQoZSxuKX0sZC5wcm90b3R5cGUuUnQ9ZC5wcm90b3R5cGUueHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1YKGV8fFtdKSxyPXAoKTtyZXR1cm4gbi5wdXNoKHIuWSgpKSx0aGlzLkwoXCJwb3N0XCIsW3Qsbl0pLmZhaWwoci5yZWplY3QpLHIua30sYy5PdD1jLkR0PWMuUHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1YKGFyZ3VtZW50cywyKSxyPXAoKTtyZXR1cm4gbi5wdXNoKHIuWSgpKSxjKHQpLkwoXCJwb3N0XCIsW2Usbl0pLmZhaWwoci5yZWplY3QpLHIua30sZC5wcm90b3R5cGUuT3Q9ZC5wcm90b3R5cGUuRHQ9ZC5wcm90b3R5cGUuUHQ9ZnVuY3Rpb24odCl7dmFyIGU9WChhcmd1bWVudHMsMSksbj1wKCk7cmV0dXJuIGUucHVzaChuLlkoKSksdGhpcy5MKFwicG9zdFwiLFt0LGVdKS5mYWlsKG4ucmVqZWN0KSxuLmt9LGMuSD1qLGQucHJvdG90eXBlLkg9ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIHRoaXM7dGhpcy50aGVuKGZ1bmN0aW9uKGUpe2MuXyhmdW5jdGlvbigpe3QobnVsbCxlKX0pfSxmdW5jdGlvbihlKXtjLl8oZnVuY3Rpb24oKXt0KGUpfSl9KX0sYy5DdD1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIlEubm9Db25mbGljdCBvbmx5IHdvcmtzIHdoZW4gUSBpcyB1c2VkIGFzIGEgZ2xvYmFsXCIpfTt2YXIgc3Q9YSgpO3JldHVybiBjfSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10aGlzJiZ0aGlzLkF0fHxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSk7dC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKToobi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IG4pfSxvPW4oMCksaT1uKDIpLHM9bigzKSx1PWkuVnQuTHQ7LTE9PXUmJih1PTNlNCk7dmFyIGE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZhciByPXQuY2FsbCh0aGlzLG4pfHx0aGlzO3JldHVybiByLnBsdWdpbk5hbWU9XCJiaXRtb3ZpblwiLHIuSHQ9W10sci5VdD12b2lkIDAsci5wbGF5ZXI9ZSxyLnBsYXllci5vcmlnaW5hbFNldHVwPXIucGxheWVyLnNldHVwLHIucGxheWVyLmp0PXIucGxheWVyLmxvYWQsci5wbGF5ZXIubG9hZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHIucGxheWVyLmNsb3NlSGl2ZVNlc3Npb24oKSxyLnBsYXllci5qdCh0LGUsbil9LHIucGxheWVyLmNsb3NlSGl2ZVNlc3Npb249ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9ITApLHIuY2xvc2VIaXZlU2Vzc2lvbigpLHQmJnIuQnQoKX0sci5wbGF5ZXIuc2V0dXA9ZnVuY3Rpb24odCxlKXtyLmNsb3NlSGl2ZVNlc3Npb24oKSx0LnNvdXJjZS5obHNfdGlja2V0JiZ0LnNvdXJjZS5kYXNoX3RpY2tldCYmKHIubG9nZ2VyKCkud2FybihcIlRoZSBIaXZlIHBsdWdpbiBkb2VzIG5vdCBzdXBwb3J0IHByb3ZpZGluZyBhIHRpY2tldCBmb3IgYm90aCBEQVNIIGFuZCBITFMgc2ltdWx0YW5lb3VzbHkuIFVzaW5nIEhMUyBzb3VyY2UuXCIpLGRlbGV0ZSB0LnNvdXJjZS5kYXNoX3RpY2tldCk7dmFyIG49dC5zb3VyY2UuaGxzX3RpY2tldD9cImhsc1wiOnQuc291cmNlLmRhc2hfdGlja2V0P1wiZGFzaFwiOlwiXCIsaT10LnNvdXJjZS5obHNfdGlja2V0fHx0LnNvdXJjZS5kYXNoX3RpY2tldDtyZXR1cm4gaT8oZGVsZXRlIHQuc291cmNlW24rXCJfdGlja2V0XCJdLHIucmVzb2x2ZVRpY2tldFByb21pc2UoaSkudGltZW91dCh1LHIubG9nZ2VySWQrXCJIaXZlIFBsdWdpbiBpbml0aWFsaXphdGlvbiB0aW1lb3V0XCIpLnRoZW4oZnVuY3Rpb24obyl7cmV0dXJuIHIuTXQoKSxvLnRlY2guZ2V0TmFtZSgpPT09SGl2ZUNvbW0uVGVjaE5hbWUuSGl2ZUpTJiYodC5uZXR3b3JrPXtzZW5kSHR0cFJlcXVlc3Q6ci5zZW5kSHR0cFJlcXVlc3Qoby5pZCl9KSx0LnNvdXJjZVtuXT1vLm1hbmlmZXN0LHIucGxheWVyLm9yaWdpbmFsU2V0dXAodCxlKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe3JldHVybiByLm9uU2V0dXBUaW1lb3V0KCksci5yZXNldFNlc3Npb24oKSxyLmxvZ2dlcigpLmRlYnVnKHIubG9nZ2VySWQrXCJlcnJvciBvY2N1cnJlZCByZXNvbHZpbmcgdGhlIHRpY2tldCAtIFwiKyh0LnN0YWNrfHx0Lm1lc3NhZ2V8fHQpKSxvLnJlamVjdCh0KX0pKTooci5sb2dnZXIoKS5kZWJ1ZyhyLmxvZ2dlcklkK1wiTm8gSGl2ZSB0aWNrZXQgcHJvdmlkZWQsIGZhbGxpbmcgYmFjayB0byBvcmlnaW5hbFNldHVwXCIpLHIucGxheWVyLm9yaWdpbmFsU2V0dXAodCxlKSl9LHIubG9nZ2VyKCkubm90aWNlKHIubG9nZ2VySWQrXCJyZWdpc3RlcmVkIHBsdWdpbiBbbmFtZTpcIityLmdldFBsdWdpbk5hbWUoKStcIl1baWQ6IFwiK3IuZ2V0UGx1Z2luSWQoKStcIl1bdmVyc2lvbjogXCIrci5nZXRQbHVnaW5WZXJzaW9uKCkrXCJdXCIpLHJ9cmV0dXJuIHIoZSx0KSxlLnByb3RvdHlwZS5zZW5kSHR0cFJlcXVlc3Q9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24obixyKXtyZXR1cm4gZS5sb2dnZXIoKS5kZWJ1ZyhcInNlbmRIdHRwUmVxdWVzdCBjYWxsZWRcIixuLHIpLGUuZ2V0UG90ZW50aWFsU2Vzc2lvbigpJiZuLm1hdGNoKC9tYW5pZmVzdFxcL2Rhc2h8bWFuaWZlc3RcXC9obHN8YXVkaW98dmlkZW8vKT8oZS5sb2dnZXIoKS5kZWJ1ZyhcIlVzaW5nIEhpdmVSZXF1ZXN0XCIsbixyKSxuZXcgcy5GdChyLHQpKTpudWxsfX0sZS5wcm90b3R5cGUucmVnaXN0ZXJFdmVudD1mdW5jdGlvbih0LGUpe3RoaXMucGxheWVyLmFkZEV2ZW50SGFuZGxlcih0LGUpLHRoaXMuSHQucHVzaCh7cXQ6dCxRdDplfSl9LGUucHJvdG90eXBlLkJ0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmxvZ2dlcigpLmRlYnVnKHRoaXMubG9nZ2VySWQrXCJVbnJlZ2lzdGVyaW5nIGV2ZW50c1wiKSx0aGlzLkh0LmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZS5xdCxyPWUuUXQ7dC5wbGF5ZXIucmVtb3ZlRXZlbnRIYW5kbGVyKG4scil9KSx0aGlzLkh0Lmxlbmd0aD0wfSxlLnByb3RvdHlwZS5NdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5IdC5sZW5ndGh8fCh0aGlzLnJlZ2lzdGVyRXZlbnQoXCJvblJlYWR5XCIsZnVuY3Rpb24oKXtpZih0LmxvZ2dlcigpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1JFQURZXCIpLHQub25BY3RpdmF0ZVNlc3Npb24oKSl7ISF0LnBsYXllci5nZXRDb25maWcoKS5wbGF5YmFjayYmdC5wbGF5ZXIuZ2V0Q29uZmlnKCkucGxheWJhY2suYXV0byYmdC5vblN0YXJ0QnVmZmVyaW5nKCExKSx0LmdldEFjdGl2ZVNlc3Npb24oKSYmKHQuWXQ9bmV3IEhpdmVDb21tLkhpdmVQbGF5ZXJFeHRlbmRlZFN0YXRzKX19KSx0aGlzLnJlZ2lzdGVyRXZlbnQoXCJvblBsYXlcIixmdW5jdGlvbigpe3QubG9nZ2VyKCkuZGVidWcoXCJiaXRtb3Zpbi5wbGF5ZXIuRVZFTlQuT05fUExBWVwiKSx0Lkp0KDApfSksdGhpcy5yZWdpc3RlckV2ZW50KFwib25FcnJvclwiLGZ1bmN0aW9uKGUpe3QubG9nZ2VyKCkuZGVidWcoXCJiaXRtb3Zpbi5wbGF5ZXIuRVZFTlQuT05fRVJST1JcIik7dmFyIG49LTEscj1udWxsO2lmKG51bGwhPWUpdHJ5e249ZS5jb2RlLHI9SlNPTi5zdHJpbmdpZnkoZSxudWxsKX1jYXRjaCh0KXtyPWV9dC5vbkVycm9yKG4sciksdC5CdCgpfSksdGhpcy5yZWdpc3RlckV2ZW50KFwib25QbGF5YmFja0ZpbmlzaGVkXCIsZnVuY3Rpb24oKXt0LmxvZ2dlcigpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1BMQVlCQUNLX0ZJTklTSEVEXCIpLHQub25FdmVudEZlZWRiYWNrKDQse2NvZGU6MX0pfSksdGhpcy5yZWdpc3RlckV2ZW50KFwib25TZWVrXCIsZnVuY3Rpb24oKXt0LmxvZ2dlcigpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1NFRUtcIiksdC5vbkV2ZW50RmVlZGJhY2soMyl9KSx0aGlzLnJlZ2lzdGVyRXZlbnQoXCJvbkZ1bGxzY3JlZW5FbnRlclwiLGZ1bmN0aW9uKCl7dC5sb2dnZXIoKS5kZWJ1ZyhcImJpdG1vdmluLnBsYXllci5FVkVOVC5PTl9GVUxMU0NSRUVOX0VOVEVSXCIpLHQub25FdmVudEZlZWRiYWNrKDcse3ZhbHVlOiEwfSl9KSx0aGlzLnJlZ2lzdGVyRXZlbnQoXCJvbkZ1bGxzY3JlZW5FeGl0XCIsZnVuY3Rpb24oKXt0LmxvZ2dlcigpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX0ZVTExTQ1JFRU5fRVhJVFwiKSx0Lm9uRXZlbnRGZWVkYmFjayg3LHt2YWx1ZTohMX0pfSksdGhpcy5yZWdpc3RlckV2ZW50KFwib25TZWdtZW50UmVxdWVzdEZpbmlzaGVkXCIsZnVuY3Rpb24oZSl7aWYodC5ZdCl7dmFyIG49ZS5taW1lVHlwZS5pbmRleE9mKFwidmlkZW9cIik+PTA7aWYodm9pZCAwPT09dC5YdCl7dmFyIHI9dC5wbGF5ZXIuZ2V0UGxheWJhY2tWaWRlb0RhdGEoKTtyJiZyLmJpdHJhdGUmJnQuR3Qoci5iaXRyYXRlKX1pZihlLnN1Y2Nlc3Mpe2lmKCFlLmlzSW5pdCYmdC5YdCl7dmFyIG89OCplLnNpemUvZS5kb3dubG9hZFRpbWU7dC5ZdC5hY2NvdW50Q29tcGxldGVkKG4sdC5YdCxlLnNpemUpLHQuWXQudXBkYXRlQmFuZHdpZHRoKG8pfX1lbHNlIHQuWXQuYWNjb3VudEZhaWxlZChuLHQuWHQpfX0pLHRoaXMucmVnaXN0ZXJFdmVudChcIm9uRGVzdHJveVwiLGZ1bmN0aW9uKCl7dC5sb2dnZXIoKS5kZWJ1ZyhcImJpdG1vdmluLnBsYXllci5FVkVOVC5PTl9ERVNUUk9ZXCIpLHQucGxheWVyLmNsb3NlSGl2ZVNlc3Npb24oITEpfSksMD09PXRoaXMuZ2V0UGxheWVyVmVyc2lvbigpLmluZGV4T2YoXCI3XCIpP3RoaXMuS3QoKTowPT09dGhpcy5nZXRQbGF5ZXJWZXJzaW9uKCkuaW5kZXhPZihcIjZcIikmJnRoaXMuV3QoKSl9LGUucHJvdG90eXBlLld0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnJlZ2lzdGVyRXZlbnQoXCJvblN0YXJ0QnVmZmVyaW5nXCIsZnVuY3Rpb24oKXt0LmxvZ2dlcigpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1NUQVJUX0JVRkZFUklOR1wiKSx0Lm9uU3RhcnRCdWZmZXJpbmcoKX0pLHRoaXMucmVnaXN0ZXJFdmVudChcIm9uU3RvcEJ1ZmZlcmluZ1wiLGZ1bmN0aW9uKCl7dC5sb2dnZXIoKS5kZWJ1ZyhcImJpdG1vdmluLnBsYXllci5FVkVOVC5PTl9TVE9QX0JVRkZFUklOR1wiKSx0Lm9uRW5kQnVmZmVyaW5nKCl9KSx0aGlzLnJlZ2lzdGVyRXZlbnQoXCJvblBhdXNlXCIsZnVuY3Rpb24oKXt0LmxvZ2dlcigpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1BBVVNFXCIpLHQuSnQoMil9KSx0aGlzLnJlZ2lzdGVyRXZlbnQoXCJvblZpZGVvRG93bmxvYWRRdWFsaXR5Q2hhbmdlXCIsZnVuY3Rpb24oZSl7dC5nZXRTdHJlYW1Qcm90b2NvbCgpPT09U3RyZWFtUHJvdG9jb2wuenQ/dC5HdChlLnRhcmdldFF1YWxpdHkpOnQuR3QoZS50YXJnZXRRdWFsaXR5LnNwbGl0KFwiYnJcIilbMV0pfSl9LGUucHJvdG90eXBlLkt0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnJlZ2lzdGVyRXZlbnQoXCJvblN0YWxsU3RhcnRlZFwiLGZ1bmN0aW9uKCl7dC5sb2dnZXIoKS5kZWJ1ZyhcImJpdG1vdmluLnBsYXllci5FVkVOVC5PTl9TVEFMTF9TVEFSVEVEXCIpLHQub25TdGFydEJ1ZmZlcmluZygpfSksdGhpcy5yZWdpc3RlckV2ZW50KFwib25TdGFsbEVuZGVkXCIsZnVuY3Rpb24oKXt0LmxvZ2dlcigpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1NUQUxMX0VOREVEXCIpLHQub25FbmRCdWZmZXJpbmcoKX0pLHRoaXMucmVnaXN0ZXJFdmVudChcIm9uUGF1c2VkXCIsZnVuY3Rpb24oKXt0LmxvZ2dlcigpLmRlYnVnKFwiYml0bW92aW4ucGxheWVyLkVWRU5ULk9OX1BBVVNFRFwiKSx0Lkp0KDIpfSksdGhpcy5yZWdpc3RlckV2ZW50KFwib25WaWRlb0Rvd25sb2FkUXVhbGl0eUNoYW5nZWRcIixmdW5jdGlvbihlKXt0Lkd0KGUudGFyZ2V0UXVhbGl0eSYmZS50YXJnZXRRdWFsaXR5LmJpdHJhdGV8fGUudGFyZ2V0UXVhbGl0eUlkJiZlLnRhcmdldFF1YWxpdHlJZC5iaXRyYXRlKX0pfSxlLnByb3RvdHlwZS5HdD1mdW5jdGlvbih0KXt0aGlzLmxvZ2dlcigpLmRlYnVnKFwibmV3Qml0cmF0ZVwiLHQpLHRoaXMuWHQmJnQ+dGhpcy5YdCYmdGhpcy5ZdD90aGlzLll0LmJpdHJhdGVTd2l0Y2hVcCgpOnRoaXMuWHQmJnRoaXMuWHQ+dCYmdGhpcy5ZdCYmdGhpcy5ZdC5iaXRyYXRlU3dpdGNoRG93bigpLHRoaXMuWHQ9dH0sZS5wcm90b3R5cGUuSnQ9ZnVuY3Rpb24odCl7dm9pZCAwIT10aGlzLlV0JiZ0aGlzLlV0PT09dHx8KHRoaXMub25FdmVudEZlZWRiYWNrKHQpLHRoaXMuVXQ9dCl9LGUucHJvdG90eXBlLmdldFBsYXllclNvdXJjZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U3RyZWFtUHJvdG9jb2woKTtyZXR1cm4gdD09PVN0cmVhbVByb3RvY29sLnp0P3RoaXMucGxheWVyLmdldENvbmZpZygpLnNvdXJjZS5obHM6dD09PVN0cmVhbVByb3RvY29sLkRBU0g/dGhpcy5wbGF5ZXIuZ2V0Q29uZmlnKCkuc291cmNlLmRhc2g6dm9pZCAwfSxlLnByb3RvdHlwZS5nZXRDdXJyZW50VGltZT1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLnBsYXllcj9NYXRoLnJvdW5kKDFlMyp0aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpKTowfSxlLnByb3RvdHlwZS5nZXRCdWZmZXJMZW49ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5wbGF5ZXImJm51bGwhPXRoaXMucGxheWVyLmdldFZpZGVvQnVmZmVyTGVuZ3RoJiZ0aGlzLnBsYXllci5nZXRWaWRlb0J1ZmZlckxlbmd0aCgpPjA/TWF0aC5tYXgoMCxNYXRoLnJvdW5kKDFlMyp0aGlzLnBsYXllci5nZXRWaWRlb0J1ZmZlckxlbmd0aCgpKSk6MH0sZS5wcm90b3R5cGUuZ2V0V2luZG93U2l6ZT1mdW5jdGlvbigpe2lmKHRoaXMucGxheWVyKXt2YXIgdD10aGlzLnBsYXllci5nZXRGaWd1cmUoKTtyZXR1cm57d2lkdGg6dC5vZmZzZXRXaWR0aCxoZWlnaHQ6dC5vZmZzZXRIZWlnaHR9fX0sZS5wcm90b3R5cGUuaXNGdWxsc2NyZWVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGxheWVyLmlzRnVsbHNjcmVlbigpfSxlLnByb3RvdHlwZS5pc0xpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wbGF5ZXIuaXNMaXZlKCl9LGUucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuITB9LGUucHJvdG90eXBlLmdldFN0cmVhbVByb3RvY29sPWZ1bmN0aW9uKCl7aWYodGhpcy5wbGF5ZXIpe3ZhciB0PXRoaXMucGxheWVyLmdldFN0cmVhbVR5cGUoKTtpZihcImhsc1wiPT09dClyZXR1cm4gU3RyZWFtUHJvdG9jb2wuenQ7aWYoXCJkYXNoXCI9PT10KXJldHVybiBTdHJlYW1Qcm90b2NvbC5EQVNIfXJldHVybiBudWxsfSxlLnByb3RvdHlwZS5nZXRFeHRlbmRlZFN0YXRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5ZdDtyZXR1cm4gdGhpcy5ZdD1uZXcgSGl2ZUNvbW0uSGl2ZVBsYXllckV4dGVuZGVkU3RhdHMsdH0sZS5wcm90b3R5cGUuZ2V0UGx1Z2luTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBsdWdpbk5hbWV9LGUucHJvdG90eXBlLmdldFBsdWdpblZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRDb21tVmVyc2lvbigpfSxlLnByb3RvdHlwZS5nZXRQbGF5ZXJUZWNoPWZ1bmN0aW9uKCl7aWYodGhpcy5wbGF5ZXIpcmV0dXJuIHRoaXMucGxheWVyLmdldFBsYXllclR5cGUoKX0sZS5wcm90b3R5cGUuZ2V0UGxheWVyVmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT1iaXRtb3Zpbi5wbGF5ZXIudmVyc2lvbj9iaXRtb3Zpbi5wbGF5ZXIudmVyc2lvbjp0aGlzLnBsYXllci5nZXRWZXJzaW9uKCl9LGV9KEhpdmVDb21tLlBsdWdpbik7ZS4kdD1hO3ZhciBjPWZ1bmN0aW9uKHQsZSl7bmV3IGEodCxlKX07Yml0bW92aW4uaW5pdEhpdmVTRE49Y30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdH0oKTtyLlp0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBISVZFX0NPTU1fSlMmJkhJVkVfQ09NTV9KUyxyLnRlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBISVZFX0NPTU1fSkFWQSYmSElWRV9DT01NX0pBVkEsci5lZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgSElWRV9DT01NX0pTX1BST1hZJiZISVZFX0NPTU1fSlNfUFJPWFksci5uZT1cIjQuMS4wXCIsci5yZT1cImJpdG1vdmluXCIsci5vZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgSElWRV9TRVJWSUNFX0VORFBPSU5UX1RFU1QmJkhJVkVfU0VSVklDRV9FTkRQT0lOVF9URVNULHIuaWU9XCJ1bmRlZmluZWRcIj09dHlwZW9mIEhJVkVfUEVSU0lTVEVOVF9JREVOVElUWXx8SElWRV9QRVJTSVNURU5UX0lERU5USVRZLHIuc2U9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIElOQ0xVREVfVk9EX0NBQ0hFJiZJTkNMVURFX1ZPRF9DQUNIRSxyLnVlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBJTkNMVURFX1VEUF9CUk9BRENBU1QmJklOQ0xVREVfVURQX0JST0FEQ0FTVCxyLmFlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBJTkNMVURFX1VEUF9MRUFERVJfRUxFQ1RJT04mJklOQ0xVREVfVURQX0xFQURFUl9FTEVDVElPTixyLmNlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBMRUFERVJfU0NPUkVfRVFVQUxJVFkmJkxFQURFUl9TQ09SRV9FUVVBTElUWSxyLnBlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBJTkNMVURFX0RFRkFVTFRfTkVUV09SSyYmSU5DTFVERV9ERUZBVUxUX05FVFdPUkssci5mZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgSElWRV9SRVNUUklDVEVEX0NPTk5JTkZPJiZISVZFX1JFU1RSSUNURURfQ09OTklORk8sci5sZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgSElWRV9ESVNDT1ZFUlk/SElWRV9ESVNDT1ZFUlk6XCJ3czovLzEyNy4wLjAuMTo4MDAwL2hpdmVcIixyLmRlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBQMlBEaXNwYXRjaGVyRGV0YWlsZWRMb2cmJlAyUERpc3BhdGNoZXJEZXRhaWxlZExvZyxyLmhlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBOZXR3b3JrTWFuYWdlckRldGFpbGVkTG9nJiZOZXR3b3JrTWFuYWdlckRldGFpbGVkTG9nLHIueWU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFUQVRVU19LRVk/QVRBVFVTX0tFWTpcIjU5MjgzNWE2YjQyMDRkZDE5N2MwMDQ4ODYxMDAwM2UwXCIsci52ZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgQVRBVFVTX1ZFUlNJT04/QVRBVFVTX1ZFUlNJT046XCIwLjhcIixyLmdlPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBBVEFUVVNfREVGQVVMVF9FTkFCTEVEfHxBVEFUVVNfREVGQVVMVF9FTkFCTEVELHIuRWU9NSxyLkx0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBISVZFX1BMVUdJTl9USU1FT1VUP0hJVkVfUExVR0lOX1RJTUVPVVQ6LTEsci5tZT1cInVuZGVmaW5lZFwiPT10eXBlb2YgSElWRV9ERVRFQ1RfUFJJVkFURUlQfHxISVZFX0RFVEVDVF9QUklWQVRFSVAsci5UZT1cInVuZGVmaW5lZFwiPT10eXBlb2YgSElWRV9TVE9SRV9JUF9EQnx8SElWRV9TVE9SRV9JUF9EQixlLlZ0PXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDQpLG89bigwKSxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuc2Vzc2lvbklkPWUsdGhpcy5yZXF1ZXN0PXR9cmV0dXJuIHQucHJvdG90eXBlLmdldFJlc3BvbnNlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPW8uZGVmZXIoKTtyZXR1cm4gdGhpcy5TZT1uZXcgci5fZSh7eGhyU2V0dXA6ZnVuY3Rpb24oZSxuKXtlPW5ldyBIaXZlQ29tbS5IaXZlUmVxdWVzdEZhY3RvcnkodC5zZXNzaW9uSWQpLGUub3Blbih0LnJlcXVlc3QubWV0aG9kLG4udXJsLCEwKTtmb3IodmFyIHI9MCxvPXQucmVxdWVzdC5oZWFkZXJzO3I8by5sZW5ndGg7cisrKXt2YXIgaT1vW3JdO2Uuc2V0UmVxdWVzdEhlYWRlcihpLm5hbWUsaS52YWx1ZSl9cmV0dXJuIGUucmVzcG9uc2VUeXBlPXQucmVxdWVzdC5yZXNwb25zZVR5cGUsZX19KSx0aGlzLlNlLmxvYWQodGhpcy5yZXF1ZXN0LHt9LHtvblN1Y2Nlc3M6ZnVuY3Rpb24obixyLG8pe2NvbnNvbGUubG9nKFwiU1VDQ0VTUyBSRVFVRVNUXCIsbixyLG8pLGUucmVzb2x2ZSh7cmVxdWVzdDp0LnJlcXVlc3QsdXJsOnQucmVxdWVzdC51cmwsaGVhZGVyczp0LnJlcXVlc3QuaGVhZGVycyxzdGF0dXM6bi5zdGF0dXMsbGVuZ3RoOm4uZGF0YS5sZW5ndGh8fG4uZGF0YS5ieXRlTGVuZ3RoLHN0YXR1c1RleHQ6XCJPS1wiLGJvZHk6bi5kYXRhfSl9LG9uRXJyb3I6ZnVuY3Rpb24odCxuKXt2YXIgcj10LmNvZGU7dC50ZXh0O2UucmVqZWN0KHIpfSxvblRpbWVvdXQ6ZnVuY3Rpb24odCxuKXtlLnJlamVjdChcInRpbWVvdXRcIil9fSksZS5rfSx0LnByb3RvdHlwZS5zZXRQcm9ncmVzc0xpc3RlbmVyPWZ1bmN0aW9uKHQpe30sdC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5TZSYmdGhpcy5TZS5hYm9ydCgpfSx0fSgpO2UuRnQ9aX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmxvZ2dlcklkPVwiW0hpdmVYaHJMb2FkZXJdXCIsdGhpcy5iZT10LHQmJnQueGhyU2V0dXAmJih0aGlzLnhoclNldHVwPXQueGhyU2V0dXApfXJldHVybiB0LnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5hYm9ydCgpLHRoaXMubG9hZGVyPW51bGwsdGhpcy54aHI9bnVsbH0sdC5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxvYWRlcnx8dGhpcy54aHI7dCYmNCE9PXQucmVhZHlTdGF0ZSYmKHRoaXMuc3RhdHMuSWU9ITAsdC5hYm9ydCgpKSx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucmVxdWVzdFRpbWVvdXQpLHRoaXMucmVxdWVzdFRpbWVvdXQ9bnVsbCx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucmV0cnlUaW1lb3V0KSx0aGlzLnJldHJ5VGltZW91dD1udWxsfSx0LnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRleHQ9dCx0aGlzLmNvbmZpZz1lLHRoaXMuY2FsbGJhY2tzPW4sdGhpcy5zdGF0cz17dHJlcXVlc3Q6cGVyZm9ybWFuY2Uubm93KCkscmV0cnk6MH0sdGhpcy5yZXRyeURlbGF5PWUucmV0cnlEZWxheSx0aGlzLndlKCl9LHQucHJvdG90eXBlLndlPWZ1bmN0aW9uKCl7dGhpcy54aHI9bnVsbDt2YXIgdD10aGlzLmNvbnRleHQsZT10aGlzLnN0YXRzO2UudGZpcnN0PTAsZS5sb2FkZWQ9MCx0aGlzLnhoclNldHVwP3RoaXMueGhyPXRoaXMueGhyU2V0dXAodGhpcy54aHIsdCk6SGl2ZUNvbW0ubG9nRXJyb3IoXCJIaXZlIFhIUiBzZXR1cCBtaXNzaW5nXCIsdGhpcy5sb2dnZXJJZCksdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlPXRoaXMucmVhZHlzdGF0ZWNoYW5nZS5iaW5kKHRoaXMpLHRoaXMueGhyLm9ucHJvZ3Jlc3M9dGhpcy5sb2FkcHJvZ3Jlc3MuYmluZCh0aGlzKSx0aGlzLmNvbmZpZy50aW1lb3V0JiYodGhpcy5yZXF1ZXN0VGltZW91dD13aW5kb3cuc2V0VGltZW91dCh0aGlzLmxvYWR0aW1lb3V0LmJpbmQodGhpcyksdGhpcy5jb25maWcudGltZW91dCkpLHRoaXMueGhyLnNlbmQoKX0sdC5wcm90b3R5cGUucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbih0KXt2YXIgZT10LmN1cnJlbnRUYXJnZXQsbj1lLnJlYWR5U3RhdGUscj10aGlzLnN0YXRzLG89dGhpcy5jb250ZXh0LGk9dGhpcy5jb25maWc7aWYoIXIuSWUmJm4+PTIpaWYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLnJlcXVlc3RUaW1lb3V0KSwwPT09ci50Zmlyc3QmJihyLnRmaXJzdD1NYXRoLm1heChwZXJmb3JtYW5jZS5ub3coKSxyLnRyZXF1ZXN0KSksND09PW4pe3ZhciBzPWUuc3RhdHVzO2lmKHM+PTIwMCYmczwzMDApe3IudGxvYWQ9TWF0aC5tYXgoci50Zmlyc3QscGVyZm9ybWFuY2Uubm93KCkpO3ZhciB1PXZvaWQgMCxhPXZvaWQgMDtcImFycmF5YnVmZmVyXCI9PT1vLnJlc3BvbnNlVHlwZT8odT1lLnJlc3BvbnNlLGE9dS5ieXRlTGVuZ3RoKToodT1lLnJlc3BvbnNlVGV4dCxhPXUubGVuZ3RoKSxyLmxvYWRlZD1yLnRvdGFsPWE7dmFyIGM9e3VybDplLnJlc3BvbnNlVVJMLGRhdGE6dX07dGhpcy5jYWxsYmFja3Mub25TdWNjZXNzKGMscixvKX1lbHNlIHIucmV0cnk+PWkuTmV8fHM+PTQwMCYmczw0OTk/KGNvbnNvbGUud2FybihzK1wiIHdoaWxlIGxvYWRpbmcgXCIrby51cmwpLHRoaXMuY2FsbGJhY2tzLm9uRXJyb3Ioe2NvZGU6cyx0ZXh0OmUuc3RhdHVzVGV4dH0sbykpOihjb25zb2xlLndhcm4ocytcIiB3aGlsZSBsb2FkaW5nIFwiK28udXJsK1wiLCByZXRyeWluZyBpbiBcIit0aGlzLnJldHJ5RGVsYXkrXCIuLi5cIiksdGhpcy5kZXN0cm95KCksdGhpcy5yZXRyeVRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQodGhpcy53ZS5iaW5kKHRoaXMpLHRoaXMucmV0cnlEZWxheSksdGhpcy5yZXRyeURlbGF5PU1hdGgubWluKDIqdGhpcy5yZXRyeURlbGF5LGkua2UpLHIucmV0cnkrKyl9ZWxzZSBpLnRpbWVvdXQmJih0aGlzLnJlcXVlc3RUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KHRoaXMubG9hZHRpbWVvdXQuYmluZCh0aGlzKSxpLnRpbWVvdXQpKX0sdC5wcm90b3R5cGUubG9hZHRpbWVvdXQ9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJ0aW1lb3V0IHdoaWxlIGxvYWRpbmcgXCIrdGhpcy5jb250ZXh0LnVybCksdGhpcy5jYWxsYmFja3Mub25UaW1lb3V0KHRoaXMuc3RhdHMsdGhpcy5jb250ZXh0KX0sdC5wcm90b3R5cGUubG9hZHByb2dyZXNzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuc3RhdHM7ZS5sb2FkZWQ9dC5sb2FkZWQsdC5sZW5ndGhDb21wdXRhYmxlJiYoZS50b3RhbD10LnRvdGFsKTt2YXIgbj10aGlzLmNhbGxiYWNrcy5vblByb2dyZXNzO24mJm4oZSx0aGlzLmNvbnRleHQsbnVsbCl9LHR9KCk7ZS5fZT1yfV0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Yml0bW92aW4uY29tbS5oaXZlMTUzMjQ0NDU3NjcyMS5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9saWIvaGl2ZS9iaXRtb3Zpbi5oaXZlLm1pbi5qc1xuLy8gbW9kdWxlIGlkID0gODRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==