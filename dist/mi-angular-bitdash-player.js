!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=107)}([function(t,e,i){"use strict";i.r(e),i.d(e,"__extends",function(){return r}),i.d(e,"__assign",function(){return o}),i.d(e,"__rest",function(){return s}),i.d(e,"__decorate",function(){return a}),i.d(e,"__param",function(){return u}),i.d(e,"__metadata",function(){return h}),i.d(e,"__awaiter",function(){return c}),i.d(e,"__generator",function(){return l}),i.d(e,"__exportStar",function(){return f}),i.d(e,"__values",function(){return p}),i.d(e,"__read",function(){return d}),i.d(e,"__spread",function(){return g}),i.d(e,"__await",function(){return v}),i.d(e,"__asyncGenerator",function(){return y}),i.d(e,"__asyncDelegator",function(){return m}),i.d(e,"__asyncValues",function(){return E});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};function r(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var o=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function s(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&(i[n[r]]=t[n[r]])}return i}function a(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s}function u(t,e){return function(i,n){e(i,n,t)}}function h(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})}function l(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(t,e){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function d(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function y(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=i.apply(t,e||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){r[t]&&(n[t]=function(e){return new Promise(function(i,n){o.push([t,e,i,n])>1||a(t,e)})})}function a(t,e){try{(i=r[t](e)).value instanceof v?Promise.resolve(i.value.v).then(u,h):c(o[0][2],i)}catch(t){c(o[0][3],t)}var i}function u(t){a("next",t)}function h(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function m(t){var e,i;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,r){t[n]&&(e[n]=function(e){return(i=!i)?{value:v(t[n](e)),done:"return"===n}:r?r(e):e})}}function E(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):p(t)}},function(t,e,i){var n=i(11),r=i(28),o={_emitter:new n,on:function(){o._emitter.on.apply(o._emitter,arguments)},off:function(){o._emitter.off.apply(o._emitter,arguments)},emit:function(){o._emitter.emit.apply(o._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:!1,report:function(t,e,i){if(console&&console.log){i=i||"darkcyan";var n,s={5:"e",4:"w",3:"n",2:"d",1:"v"}[e=e||o.Level.NOTICE],a="[Youbora]"+o._getCurrentTime()+" "+s+":";if(this.emit("log",{level:e,msg:t,prefix:a}),o.logLevel<=e)if(o.plainLogs||document.documentMode)o._plainReport(t,a);else n=e===o.Level.ERROR&&console.error?console.error:e===o.Level.WARNING&&console.warn?console.warn:e===o.Level.DEBUG&&console.debug?console.debug:console.log,a="%c"+a,r(t)?(t.splice(0,0,a,"color: "+i),n.apply(console,t)):n.call(console,a,"color: "+i,t)}},_getCurrentTime:function(){var t=new Date;return"["+("0"+t.getDate()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"."+("00"+t.getMilliseconds()).slice(-3)+"]"},_plainReport:function(t,e){if(t instanceof Array)for(var i in t)o._plainReport(t[i],e);else"string"==typeof t?console.log(e+" "+t):(console.log(e+" <next line>"),console.log(t))},error:function(){o.report([].slice.call(arguments),o.Level.ERROR,"darkred")},warn:function(){o.report([].slice.call(arguments),o.Level.WARNING,"darkorange")},notice:function(){o.report([].slice.call(arguments),o.Level.NOTICE,"darkgreen")},debug:function(){o.report([].slice.call(arguments),o.Level.DEBUG,"indigo")},verbose:function(){o.report([].slice.call(arguments),o.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){if("undefined"!=typeof window&&window.location&&window.location.search){var t=/\?.*&*youbora-debug=(.+)/i.exec(window.location.search);null!==t&&(o.logLevel=t[1]),null!==/\?.*&*youbora-debug=plain/i.exec(window.location.search)&&(o.plainLogs=!0)}}};t.exports=o},function(t,e,i){var n=i(56),r=i(145),o=function(){};o.prototype={constructor:function(){}},o.extend=function(t,e){var i,o=this;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return o.apply(this,arguments)},n(i,o,e),i.prototype=r(o.prototype),t&&n(i.prototype,t),i.prototype.constructor=i,i.__super__=o.prototype,i},t.exports=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(5),o=i(4),s=i(21),a=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-container",components:[]},i.config),i.componentsToAdd=[],i.componentsToRemove=[],i}return n.__extends(e,t),e.prototype.addComponent=function(t){this.config.components.push(t),this.componentsToAdd.push(t)},e.prototype.removeComponent=function(t){return null!=s.ArrayUtils.remove(this.config.components,t)&&(this.componentsToRemove.push(t),!0)},e.prototype.getComponents=function(){return this.config.components},e.prototype.removeComponents=function(){for(var t=0,e=this.getComponents().slice();t<e.length;t++){var i=e[t];this.removeComponent(i)}},e.prototype.updateComponents=function(){for(var t;t=this.componentsToRemove.shift();)t.getDomElement().remove();for(;t=this.componentsToAdd.shift();)this.innerContainerElement.append(t.getDomElement())},e.prototype.toDomElement=function(){var t=new o.DOM(this.config.tag,{id:this.config.id,class:this.getCssClasses()}),e=new o.DOM(this.config.tag,{class:this.prefixCss("container-wrapper")});this.innerContainerElement=e;for(var i=0,n=this.config.components;i<n.length;i++){var r=n[i];this.componentsToAdd.push(r)}return this.updateComponents(),t.append(e),t},e}(r.Component);e.Container=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){if(this.document=document,t instanceof Array){if(t.length>0&&t[0]instanceof HTMLElement){var i=t;this.elements=i}}else if(t instanceof HTMLElement){var n=t;this.elements=[n]}else if(t instanceof Document)this.elements=null;else if(e){var r=t;n=document.createElement(r);for(var o in e){var s=e[o];n.setAttribute(o,s)}this.elements=[n]}else{var a=t;this.elements=this.findChildElements(a)}}return Object.defineProperty(t.prototype,"length",{get:function(){return this.elements?this.elements.length:0},enumerable:!0,configurable:!0}),t.prototype.getElements=function(){return this.get()},t.prototype.get=function(t){return void 0===t?this.elements:!this.elements||t>=this.elements.length||t<-this.elements.length?void 0:t<0?this.elements[this.elements.length-t]:this.elements[t]},t.prototype.forEach=function(t){this.elements&&this.elements.forEach(function(e){t(e)})},t.prototype.findChildElementsOfElement=function(t,e){var i=t.querySelectorAll(e);return[].slice.call(i)},t.prototype.findChildElements=function(t){var e=this,i=[];return this.elements?(this.forEach(function(n){i=i.concat(e.findChildElementsOfElement(n,t))}),i):this.findChildElementsOfElement(document,t)},t.prototype.find=function(e){return new t(this.findChildElements(e))},t.prototype.html=function(t){return arguments.length>0?this.setHtml(t):this.getHtml()},t.prototype.getHtml=function(){return this.elements[0].innerHTML},t.prototype.setHtml=function(t){return void 0!==t&&null!=t||(t=""),this.forEach(function(e){e.innerHTML=t}),this},t.prototype.empty=function(){return this.forEach(function(t){t.innerHTML=""}),this},t.prototype.val=function(){var t=this.elements[0];if(t instanceof HTMLSelectElement||t instanceof HTMLInputElement)return t.value;throw new Error("val() not supported for "+typeof t)},t.prototype.attr=function(t,e){return arguments.length>1?this.setAttr(t,e):this.getAttr(t)},t.prototype.getAttr=function(t){return this.elements[0].getAttribute(t)},t.prototype.setAttr=function(t,e){return this.forEach(function(i){i.setAttribute(t,e)}),this},t.prototype.data=function(t,e){return arguments.length>1?this.setData(t,e):this.getData(t)},t.prototype.getData=function(t){return this.elements[0].getAttribute("data-"+t)},t.prototype.setData=function(t,e){return this.forEach(function(i){i.setAttribute("data-"+t,e)}),this},t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.forEach(function(e){t.forEach(function(t){t.elements.forEach(function(i,n){e.appendChild(t.elements[n])})})}),this},t.prototype.remove=function(){this.forEach(function(t){var e=t.parentNode;e&&e.removeChild(t)})},t.prototype.offset=function(){var t=this.elements[0].getBoundingClientRect(),e=document.body.parentElement.getBoundingClientRect();return{top:t.top-e.top,left:t.left-e.left}},t.prototype.width=function(){return this.elements[0].offsetWidth},t.prototype.height=function(){return this.elements[0].offsetHeight},t.prototype.on=function(t,e){var i=this;return t.split(" ").forEach(function(t){null==i.elements?i.document.addEventListener(t,e):i.forEach(function(i){i.addEventListener(t,e)})}),this},t.prototype.off=function(t,e){var i=this;return t.split(" ").forEach(function(t){null==i.elements?i.document.removeEventListener(t,e):i.forEach(function(i){i.removeEventListener(t,e)})}),this},t.prototype.addClass=function(t){return this.forEach(function(e){var i;if(e.classList){var n=t.split(" ").filter(function(t){return t.length>0});n.length>0&&(i=e.classList).add.apply(i,n)}else e.className+=" "+t}),this},t.prototype.removeClass=function(t){return this.forEach(function(e){var i;if(e.classList){var n=t.split(" ").filter(function(t){return t.length>0});n.length>0&&(i=e.classList).remove.apply(i,n)}else e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}),this},t.prototype.hasClass=function(t){var e=!1;return this.forEach(function(i){i.classList?i.classList.contains(t)&&(e=!0):new RegExp("(^| )"+t+"( |$)","gi").test(i.className)&&(e=!0)}),e},t.prototype.css=function(t,e){if("string"==typeof t){var i=t;return 2===arguments.length?this.setCss(i,e):this.getCss(i)}var n=t;return this.setCssCollection(n)},t.prototype.getCss=function(t){return getComputedStyle(this.elements[0])[t]},t.prototype.setCss=function(t,e){return this.forEach(function(i){i.style[t]=e}),this},t.prototype.setCssCollection=function(t){return this.forEach(function(e){Object.assign(e.style,t)}),this},t}();e.DOM=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(174),r=i(4),o=i(9),s=function(){function t(t){void 0===t&&(t={}),this.componentEvents={onShow:new o.EventDispatcher,onHide:new o.EventDispatcher,onHoverChanged:new o.EventDispatcher},this.config=this.mergeConfig(t,{tag:"div",id:"mi-wbc-id-"+n.Guid.next(),cssPrefix:"mi-wbc",cssClass:"ui-component",cssClasses:[],hidden:!1},{})}return t.prototype.initialize=function(){this.hidden=this.config.hidden,this.isHidden()&&(this.hidden=!1,this.hide())},t.prototype.configure=function(t,e){var i=this;this.onShow.subscribe(function(){e.onComponentShow.dispatch(i)}),this.onHide.subscribe(function(){e.onComponentHide.dispatch(i)}),this.getDomElement().on("mouseenter",function(){i.onHoverChangedEvent(!0)}),this.getDomElement().on("mouseleave",function(){i.onHoverChangedEvent(!1)})},t.prototype.release=function(){},t.prototype.toDomElement=function(){return new r.DOM(this.config.tag,{id:this.config.id,class:this.getCssClasses()})},t.prototype.getDomElement=function(){return this.element||(this.element=this.toDomElement()),this.element},t.prototype.mergeConfig=function(t,e,i){return Object.assign({},i,e,t)},t.prototype.getCssClasses=function(){var t=this,e=[this.config.cssClass].concat(this.config.cssClasses);return(e=e.map(function(e){return t.prefixCss(e)})).join(" ").trim()},t.prototype.prefixCss=function(t){return this.config.cssPrefix+"-"+t},t.prototype.getConfig=function(){return this.config},t.prototype.hide=function(){this.hidden||(this.hidden=!0,this.getDomElement().addClass(this.prefixCss(t.CLASS_HIDDEN)),this.onHideEvent())},t.prototype.show=function(){this.hidden&&(this.getDomElement().removeClass(this.prefixCss(t.CLASS_HIDDEN)),this.hidden=!1,this.onShowEvent())},t.prototype.isHidden=function(){return this.hidden},t.prototype.isShown=function(){return!this.isHidden()},t.prototype.toggleHidden=function(){this.isHidden()?this.show():this.hide()},t.prototype.isHovered=function(){return this.hovered},t.prototype.onShowEvent=function(){this.componentEvents.onShow.dispatch(this)},t.prototype.onHideEvent=function(){this.componentEvents.onHide.dispatch(this)},t.prototype.onHoverChangedEvent=function(t){this.hovered=t,this.componentEvents.onHoverChanged.dispatch(this,{hovered:t})},Object.defineProperty(t.prototype,"onShow",{get:function(){return this.componentEvents.onShow.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHide",{get:function(){return this.componentEvents.onHide.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHoverChanged",{get:function(){return this.componentEvents.onHoverChanged.getEvent()},enumerable:!0,configurable:!0}),t.CLASS_HIDDEN="hidden",t}();e.Component=s},function(t,e,i){var n=i(1),r={stripProtocol:function(t){try{return t.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(e){return n.warn(e),t}},addProtocol:function(t,e){try{return!0===e?"https://"+t:0===window.location.protocol.indexOf("http")?"//"+t:"http://"+t}catch(t){return n.warn(t),"http://localhost/"}},parseNumber:function(t,e){return!isNaN(t)&&t>=0&&t!==1/0&&t!==-1/0&&null!=t?t:e},logAllEvents:function(t,e,i){try{if(n.logLevel<=n.Level.DEBUG){i=i||function(t){n.debug("Event: "+t.type)};var r=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];e&&(null===e[0]?(e.shift(),r=e):r=r.concat(e));for(var o=0;o<r.length;o++)"function"==typeof t?t.call(window,r[o],i):t.on?t.on(r[o],i):t.addEventListener&&t.addEventListener(r[o],i)}}catch(t){n.error(t)}},buildRenditionString:function(t,e,i){1===arguments.length&&(i=t,t=null,e=null);var n="";return t&&e&&(n=t+"x"+e),"number"!=typeof i||NaN==i||i<1?n:(n&&(n+="@"),(n+=i<1e3?Math.round(i)+"bps":i<1e6?(i=Math.round(i/1e3))+"Kbps":(i=Math.round(i/1e4)/100)+"Mbps")||null)},buildErrorParams:function(t,e,i,n){if("object"==typeof t)return t;var r={};return r.errorCode=t||"FAILURE",r.msg=e||r.errorCode,r.errorMetadata=i,r.errorLevel=n,r},assign:i(56),isArray:i(28)};t.exports=r},function(t,e,i){"use strict";var n=i(51),r=i(124),o=Object.prototype.toString;function s(t){return"[object Array]"===o.call(t)}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function h(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),s(t))for(var i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:r,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function t(){var e={};function i(i,n){"object"==typeof e[n]&&"object"==typeof i?e[n]=t(e[n],i):e[n]=i}for(var n=0,r=arguments.length;n<r;n++)h(arguments[n],i);return e},extend:function(t,e,i){return h(e,function(e,r){t[r]=i&&"function"==typeof e?n(e,i):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e){t.exports={Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_BLOCKED:"/adBlocked",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"},WillSendEvent:{WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_VIDEO_EVENT:"will-send-video-event",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_BLOCKED:"will-send-ad-blocked",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(21),o=function(){function t(){this.listeners=[]}return t.prototype.subscribe=function(t){this.listeners.push(new s(t))},t.prototype.subscribeOnce=function(t){this.listeners.push(new s(t,!0))},t.prototype.subscribeRateLimited=function(t,e){this.listeners.push(new a(t,e))},t.prototype.unsubscribe=function(t){for(var e=0;e<this.listeners.length;e++){var i=this.listeners[e];if(i.listener===t)return r.ArrayUtils.remove(this.listeners,i),!0}return!1},t.prototype.unsubscribeAll=function(){this.listeners=[]},t.prototype.dispatch=function(t,e){void 0===e&&(e=null);for(var i=[],n=0,o=this.listeners.slice(0);n<o.length;n++){var s=o[n];s.fire(t,e),s.isOnce()&&i.push(s)}for(var a=0,u=i;a<u.length;a++){var h=u[a];r.ArrayUtils.remove(this.listeners,h)}},t.prototype.getEvent=function(){return this},t}();e.EventDispatcher=o;var s=function(){function t(t,e){void 0===e&&(e=!1),this.eventListener=t,this.once=e}return Object.defineProperty(t.prototype,"listener",{get:function(){return this.eventListener},enumerable:!0,configurable:!0}),t.prototype.fire=function(t,e){this.eventListener(t,e)},t.prototype.isOnce=function(){return this.once},t}(),a=function(t){function e(e,i){var n=t.call(this,e)||this;return n.rateMs=i,n.lastFireTime=0,n.rateLimitingEventListener=function(t,e){Date.now()-n.lastFireTime>n.rateMs&&(n.fireSuper(t,e),n.lastFireTime=Date.now())},n}return n.__extends(e,t),e.prototype.fireSuper=function(e,i){t.prototype.fire.call(this,e,i)},e.prototype.fire=function(t,e){this.rateLimitingEventListener(t,e)},e}(s)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){var i=t.call(this,e)||this;return i.settingsManager=e.settingsManager,i.overlay=e.overlay,i}return n.__extends(e,t),e.prototype.toggleOverlayClass=function(t){this.currentCssClass&&(this.overlay.getDomElement().removeClass(this.currentCssClass),this.currentCssClass=null),t&&(this.currentCssClass=this.prefixCss(t),this.overlay.getDomElement().addClass(this.currentCssClass))},e}(i(17).SelectBox);e.SubtitleSettingSelectBox=r},function(t,e,i){var n=i(2),r=i(28),o=n.extend({on:function(t,e){if(this._listeners=this._listeners||{},"function"==typeof e)return this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},off:function(t,e){if(this._listeners=this._listeners||{},this._listeners[t]){var i=this._listeners[t].indexOf(e);-1!==i&&this._listeners[t].splice(i,1)}return this},emit:function(t,e){return this._listeners=this._listeners||{},e=e||{},r(this._listeners[t])&&this._listeners[t].forEach(this._eachCallback.bind(this,t,e)),r(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,t,e)),this},_eachCallback:function(t,e,i){"function"==typeof i&&i({type:t,data:e,target:this})}});t.exports=o},function(t,e,i){var n=i(2),r=i(1),o=i(6),s=n.extend({constructor:function(t,e,i,n){this.xhr=this.createXHR(),this.host=t||"",this.service=e||"",this.params=i||{},this.options=o.assign({},s.defaultOptions,n),this.retries=0,this.options.cache||this.setParam("timemark",(new Date).getTime())},createXHR:function(){try{return XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return r.error(t),{}}},getXHR:function(){return this.xhr},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(t,e,i){return this.xhr.addEventListener(t,e.bind(this,this,i)),this},off:function(t,e){return this.xhr.removeEventListener(t,e),this},getParamString:function(){try{var t="?";for(var e in this.params){var i=this.params[e];if(null!==i&&"object"==typeof i){var n=JSON.stringify(i);"{}"!==n&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(n)+"&")}else null!=i&&""!==i&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(i)+"&")}return t.slice(0,-1)}catch(t){return r.error(t),""}},getParam:function(t){return this.params[t]},setParam:function(t,e){return this.params[t]=e,this},setBody:function(t){this.body=t},send:function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var t in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(t)&&this.xhr.setRequestHeader(t,this.options.requestHeaders[t]);if(this.options.retryAfter>0&&this.options.maxRetries>0){var e=function(){this.retries>=this.options.maxRetries?r.error('Aborting failed request "'+this.service+'". Max retries reached.'):(r.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms."),setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter))};0===this.retries&&(this.on(s.Event.ERROR,e.bind(this)),this.xhr.onreadystatechange=function(){4===this.xhr.readyState&&this.xhr.status>399&&e.bind(this)()}.bind(this))}for(var i in r.logLevel<=r.Level.VERBOSE&&r.verbose("XHR Req: "+this.getUrl()),s._globalListeners)s._globalListeners[i].forEach(function(t){this.on(i,t)}.bind(this));return this.xhr.send(this.body)}catch(t){r.error(t)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(t,e){s._globalListeners[t]=s._globalListeners[t]||[],s._globalListeners[t].push(e)},offEvery:function(t,e){if(s._globalListeners[t]){var i=s._globalListeners[t].indexOf(e);-1!==i&&s._globalListeners[t].splice(i,1)}}});t.exports=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(16),o=i(9),s=function(t){function e(e){var i=t.call(this,e)||this;i.toggleButtonEvents={onToggle:new o.EventDispatcher,onToggleOn:new o.EventDispatcher,onToggleOff:new o.EventDispatcher};return i.config=i.mergeConfig(e,{cssClass:"ui-togglebutton",onClass:"on",offClass:"off"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(t,e){var i=this.getConfig();this.getDomElement().addClass(this.prefixCss(i.offClass))},e.prototype.on=function(){if(this.isOff()){var t=this.getConfig();this.onState=!0,this.getDomElement().removeClass(this.prefixCss(t.offClass)),this.getDomElement().addClass(this.prefixCss(t.onClass)),this.onToggleEvent(),this.onToggleOnEvent()}},e.prototype.off=function(){if(this.isOn()){var t=this.getConfig();this.onState=!1,this.getDomElement().removeClass(this.prefixCss(t.onClass)),this.getDomElement().addClass(this.prefixCss(t.offClass)),this.onToggleEvent(),this.onToggleOffEvent()}},e.prototype.toggle=function(){this.isOn()?this.off():this.on()},e.prototype.isOn=function(){return this.onState},e.prototype.isOff=function(){return!this.isOn()},e.prototype.onClickEvent=function(){t.prototype.onClickEvent.call(this),this.onToggleEvent()},e.prototype.onToggleEvent=function(){this.toggleButtonEvents.onToggle.dispatch(this)},e.prototype.onToggleOnEvent=function(){this.toggleButtonEvents.onToggleOn.dispatch(this)},e.prototype.onToggleOffEvent=function(){this.toggleButtonEvents.onToggleOff.dispatch(this)},Object.defineProperty(e.prototype,"onToggle",{get:function(){return this.toggleButtonEvents.onToggle.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onToggleOn",{get:function(){return this.toggleButtonEvents.onToggleOn.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onToggleOff",{get:function(){return this.toggleButtonEvents.onToggleOff.getEvent()},enumerable:!0,configurable:!0}),e}(r.Button);e.ToggleButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(5),o=i(4),s=i(9),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.labelEvents={onClick:new s.EventDispatcher,onTextChanged:new s.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-label"},i.config),i.text=i.config.text,i}return n.__extends(e,t),e.prototype.toDomElement=function(){var t=this,e=new o.DOM("span",{id:this.config.id,class:this.getCssClasses()}).html(this.text);return e.on("click",function(){t.onClickEvent()}),e},e.prototype.setText=function(t){this.text=t,this.getDomElement().html(t),this.onTextChangedEvent(t)},e.prototype.getText=function(){return this.text},e.prototype.clearText=function(){this.getDomElement().html(""),this.onTextChangedEvent(null)},e.prototype.isEmpty=function(){return!this.text},e.prototype.onClickEvent=function(){this.labelEvents.onClick.dispatch(this)},e.prototype.onTextChangedEvent=function(t){this.labelEvents.onTextChanged.dispatch(this,t)},Object.defineProperty(e.prototype,"onClick",{get:function(){return this.labelEvents.onClick.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTextChanged",{get:function(){return this.labelEvents.onTextChanged.getEvent()},enumerable:!0,configurable:!0}),e}(r.Component);e.Label=a},function(t,e,i){var n=i(11).extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(t){},isBlocking:function(t){return this._isBusy},done:function(){this._isBusy=!1,this.emit(n.Event.DONE)},hasToSend:function(t){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}});t.exports=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(5),o=i(4),s=i(9),a=function(t){function e(e){var i=t.call(this,e)||this;return i.buttonEvents={onClick:new s.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-button"},i.config),i}return n.__extends(e,t),e.prototype.toDomElement=function(){var t=this,e=new o.DOM("button",{type:"button",id:this.config.id,class:this.getCssClasses()}).append(new o.DOM("span",{class:this.prefixCss("label")}).html(this.config.text));return e.on("click",function(){t.onClickEvent()}),e},e.prototype.setText=function(t){this.getDomElement().find("."+this.prefixCss("label")).html(t)},e.prototype.onClickEvent=function(){this.buttonEvents.onClick.dispatch(this)},Object.defineProperty(e.prototype,"onClick",{get:function(){return this.buttonEvents.onClick.getEvent()},enumerable:!0,configurable:!0}),e}(r.Component);e.Button=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(74),o=i(4),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-selectbox"},i.config),i}return n.__extends(e,t),e.prototype.toDomElement=function(){var t=this,e=new o.DOM("select",{id:this.config.id,class:this.getCssClasses()});return this.selectElement=e,this.updateDomItems(),e.on("change",function(){var i=e.val();t.onItemSelectedEvent(i,!1)}),e},e.prototype.updateDomItems=function(t){void 0===t&&(t=null),this.selectElement.empty();for(var e=0,i=this.items;e<i.length;e++){var n=i[e],r=new o.DOM("option",{value:n.key}).html(n.label);n.key===String(t)&&r.attr("selected","selected"),this.selectElement.append(r)}},e.prototype.onItemAddedEvent=function(e){t.prototype.onItemAddedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemRemovedEvent=function(e){t.prototype.onItemRemovedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemSelectedEvent=function(e,i){void 0===i&&(i=!0),t.prototype.onItemSelectedEvent.call(this,e),i&&this.updateDomItems(e)},e}(r.ListSelector);e.SelectBox=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,i){void 0===i&&(i=!1),this.delay=t,this.callback=e,this.repeat=i,this.timeoutHandle=0}return t.prototype.start=function(){return this.reset(),this},t.prototype.clear=function(){this.clearInternal()},t.prototype.reset=function(){var t=this,e=0,i=0;this.clearInternal();var n=function(){if(t.callback(),t.repeat){var r=Date.now(),o=r-e;i=t.delay-o+i,e=r,t.timeoutHandle=setTimeout(n,t.delay+i)}};e=Date.now(),this.timeoutHandle=setTimeout(n,this.delay)},t.prototype.clearInternal=function(){clearTimeout(this.timeoutHandle)},t}();e.Timeout=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(e,n){void 0===n&&(n=t.FORMAT_HHMMSS);var r=e<0;r&&(e=-e);var o=Math.floor(e/3600),s=Math.floor(e/60)-60*o,a=Math.floor(e)%60;return(r?"-":"")+n.replace("hh",i(o,2)).replace("mm",i(s,2)).replace("ss",i(a,2))}function i(t,e){var i=t+"";return"0000000000".substr(0,e-i.length)+i}t.FORMAT_HHMMSS="hh:mm:ss",t.FORMAT_MMSS="mm:ss",t.secondsToTime=e,t.replaceAdMessagePlaceholders=function(t,n,r){var o=new RegExp("\\{(remainingTime|playedTime|adDuration)(}|%((0[1-9]\\d*(\\.\\d+(d|f)|d|f)|\\.\\d+f|d|f)|hh:mm:ss|mm:ss)})","g");return t.replace(o,function(t){var o=0;return t.indexOf("remainingTime")>-1?o=n?Math.ceil(n-r.getCurrentTime()):r.getDuration()-r.getCurrentTime():t.indexOf("playedTime")>-1?o=r.getCurrentTime():t.indexOf("adDuration")>-1&&(o=r.getDuration()),function(t,n){/%((0[1-9]\d*(\.\d+(d|f)|d|f)|\.\d+f|d|f)|hh:mm:ss|mm:ss)/.test(n)||(n="%d");var r=0,o=n.match(/(%0[1-9]\d*)(?=(\.\d+f|f|d))/);o&&(r=parseInt(o[0].substring(2)));var s=null,a=n.match(/\.\d*(?=f)/);if(a&&!isNaN(parseInt(a[0].substring(1)))&&(s=parseInt(a[0].substring(1)))>20&&(s=20),n.indexOf("f")>-1){var u="";return(u=null!==s?t.toFixed(s):""+t).indexOf(".")>-1?i(u,u.length+(r-u.indexOf("."))):i(u,r)}if(n.indexOf(":")>-1){var h=Math.ceil(t);if(n.indexOf("hh")>-1)return e(h);var c=Math.floor(h/60),l=h%60;return i(c,2)+":"+i(l,2)}return i(Math.ceil(t),r)}(o,t)})}}(e.StringUtils||(e.StringUtils={}))},function(t,e,i){var n=i(2).extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(t){var e=(new Date).getTime();if(this.startTime){t&&!this.stopTime&&(this.stopTime=e);var i=this.pausetime?e-this.pausetime:0,n=this.stopTime?this.stopTime:e;return this.offset-i+(n-this.startTime)}return-1},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pausetime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var t=new n;return t.startTime=this.startTime,t.stopTime=this.stopTime,t.offset=this.offset,t}});t.exports=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.remove=function(t,e){var i=t.indexOf(e);return i>-1?t.splice(i,1)[0]:null}}(e.ArrayUtils||(e.ArrayUtils={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(9),r=i(35);!function(t){var e;!function(t){t[t.IDLE=0]="IDLE",t[t.PREPARED=1]="PREPARED",t[t.PLAYING=2]="PLAYING",t[t.PAUSED=3]="PAUSED",t[t.FINISHED=4]="FINISHED"}(e=t.PlayerState||(t.PlayerState={})),t.isTimeShiftAvailable=function(t){return t.isLive()&&0!==t.getMaxTimeShift()},t.getState=function(t){return t.hasEnded()?e.FINISHED:t.isPlaying()?e.PLAYING:t.isPaused()?e.PAUSED:t.isReady()?e.PREPARED:e.IDLE};var i=function(){function e(t){var e=this;this.timeShiftAvailabilityChangedEvent=new n.EventDispatcher,this.player=t,this.timeShiftAvailable=void 0;var i=function(){e.detect()};t.addEventHandler(t.EVENT.ON_READY,i),t.addEventHandler(t.EVENT.ON_TIME_CHANGED,i)}return e.prototype.detect=function(){if(this.player.isLive()){var e=t.isTimeShiftAvailable(this.player);e!==this.timeShiftAvailable&&(this.timeShiftAvailabilityChangedEvent.dispatch(this.player,{timeShiftAvailable:e}),this.timeShiftAvailable=e)}},Object.defineProperty(e.prototype,"onTimeShiftAvailabilityChanged",{get:function(){return this.timeShiftAvailabilityChangedEvent.getEvent()},enumerable:!0,configurable:!0}),e}();t.TimeShiftAvailabilityDetector=i;var o=function(){function t(t){var e=this;this.liveChangedEvent=new n.EventDispatcher,this.player=t,this.live=void 0;var i=function(){e.detect()};t.addEventHandler(t.EVENT.ON_READY,i),t.addEventHandler(t.EVENT.ON_PLAY,i),r.BrowserUtils.isAndroid&&r.BrowserUtils.isChrome&&t.addEventHandler(t.EVENT.ON_TIME_CHANGED,i)}return t.prototype.detect=function(){var t=this.player.isLive();t!==this.live&&(this.liveChangedEvent.dispatch(this.player,{live:t}),this.live=t)},Object.defineProperty(t.prototype,"onLiveChanged",{get:function(){return this.liveChangedEvent.getEvent()},enumerable:!0,configurable:!0}),t}();t.LiveStreamDetector=o}(e.PlayerUtils||(e.PlayerUtils={}))},function(t,e,i){t.exports=i(143).version},function(t,e,i){var n=i(11),r=i(1),o=i(6),s=i(57),a=i(23),u=i(160),h=i(161),c=i(68),l=n.extend({constructor:function(t){this.flags=new h,this.chronos=new u,this.monitor=null,this.plugin=null,this.player=null,this.setPlayer(t),this.tag=this.player,r.notice("Adapter "+this.getVersion()+" with Lib "+a+" is ready.")},setPlayer:function(t){this.unregisterListeners(),this.player="string"==typeof t?document.getElementById(t):t,this.initializeAdapter(),this.registerListeners()},initializeAdapter:function(){},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.monitor&&this.monitor.stop(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(t,e,i){var n=0;t&&(n|=c.Type.BUFFER),e&&(n|=c.Type.SEEK),this.monitor=new c(this,n,i)},getPlayhead:function(){return null},getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return a+"-generic-js"},getPosition:function(){return null},getCdnTraffic:function(){return s.getCdnTraffic()},getP2PTraffic:function(){return s.getP2PTraffic()},getUploadTraffic:function(){return s.getUploadTraffic()},getIsP2PEnabled:function(){return s.getIsP2PEnabled()},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},getMetrics:function(){return null},fireInit:function(t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start(),this.emit(l.Event.INIT,{params:t}),this.flags.isInited=!0)},fireStart:function(t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start()),this.emit(l.Event.START,{params:t}),this.flags.isInited=!1)},fireJoin:function(t){!this.flags.isStarted&&!this.flags.isInited||this.flags.isJoined||(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),this.emit(l.Event.JOIN,{params:t}))},firePause:function(t){this.flags.isBuffering&&this.fireBufferEnd(),this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),this.emit(l.Event.PAUSE,{params:t}))},fireResume:function(t){this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(l.Event.RESUME,{params:t}))},fireBufferBegin:function(t,e){if(this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!e)return;r.notice("Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();this.flags.isBuffering=!0,this.emit(l.Event.BUFFER_BEGIN,{params:t})}},fireBufferEnd:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(l.Event.BUFFER_END,{params:t}))},cancelBuffer:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},fireSeekBegin:function(t,e){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===e)return;r.notice("Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();this.flags.isSeeking=!0,this.emit(l.Event.SEEK_BEGIN,{params:t})}},fireSeekEnd:function(t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(l.Event.SEEK_END,{params:t}))},cancelSeek:function(t){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireStop:function(t){this.flags.isStarted||this.flags.isInited?(this.monitor&&this.monitor.stop(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),this.emit(l.Event.STOP,{params:t}),this.plugin&&this.plugin._adapter&&this.plugin._adapter.flags.isEnded&&!this.plugin._adapter.flags.isStopped&&(0===this.plugin.options["ad.afterStop"]?this.plugin.fireStop():this.plugin.options["ad.afterStop"]--),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset()):this.plugin&&this.plugin.isInitiated&&!this.getPosition()&&this.plugin.fireStop()},fireCasted:function(t){t||(t={}),t.casted=!0,this.fireStop(t)},fireError:function(t,e,i,n){var r=o.buildErrorParams(t,e,i,n);this.emit(l.Event.ERROR,{params:r})},fireNoServedAd:function(t,e,i,n){var r=o.buildErrorParams(t,e,i,n);r.errorSeverity="AdsNotServed",this.emit(l.Event.ERROR,{params:r})},fireFatalError:function(t,e,i,n){this.monitor&&this.monitor.stop(),this.fireError(t,e,i,n),this.fireStop()},fireClick:function(t){"string"==typeof t&&(t={url:t}),this.emit(l.Event.CLICK,{params:t})},fireBlocked:function(t){this.emit(l.Event.BLOCKED,{params:t})},fireSkip:function(t){null==t&&(t={}),t.skipped=!0,this.fireStop(t)},fireEvent:function(t,e,i){var n={};n.name=t||"",n.dimensions=e||{},n.values=i||{},this.emit(l.Event.VIDEO_EVENT,{params:n})}},{Event:{START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",BLOCKED:"blocked",VIDEO_EVENT:"video-event"},AdPosition:{PREROLL:"pre",MIDROLL:"mid",POSTROLL:"post"}});t.exports=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.TimeChanged="timechanged",t.PLAY="playing",t.ENDED="ended",t.ON_SOURCE_LOADED="onSourceLoaded",t.ON_SOURCE_UNLOADED="onSourceUnloaded"}(e.PlayerEvent||(e.PlayerEvent={}))},function(t,e,i){"use strict";(function(e){var n=i(7),r=i(127),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,u={adapter:("undefined"!=typeof XMLHttpRequest?a=i(52):void 0!==e&&(a=i(52)),a),transformRequest:[function(t,e){return r(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(t){u.headers[t]={}}),n.forEach(["post","put","patch"],function(t){u.headers[t]=n.merge(o)}),t.exports=u}).call(this,i(126))},function(t,e,i){var n=r,r={noConflict:function(){return r=n,this}};r.VERSION=i(23),r.polyfills=i(144),r.polyfills(),r.Object=i(2),r.Emitter=i(11),r.Log=i(1),r.Log.loadLevelFromUrl(),r.Util=i(6),r.HybridNetwork=i(57),r.Chrono=i(20),r.Timer=i(29),r.Constants=i(8),r.Request=i(12),r.Communication=i(30),r.Transform=i(15),r.ViewTransform=i(58),r.ResourceTransform=i(59),r.CdnParser=i(61),r.HlsParser=i(60),r.OfflineParser=i(63),r.LocationheaderParser=i(62),r.Options=i(64),r.Plugin=i(153),r.Storage=i(31),r.RequestBuilder=i(32),r.PlayheadMonitor=i(68),r.Adapter=i(24),r.StandardAdapter=i(170),r.adapters={},r.Infinity=i(33),r.BackgroundDetector=i(65),r.DeviceDetector=i(66),r.Fingerprint=i(67),r.registerAdapter=function(t,e){this.adapters[t]=e}.bind(r),r.unregisterAdapter=function(t){this.adapters[t]=null}.bind(r),t.exports=r},function(t,e){t.exports=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){var n=i(2),r=i(20),o=n.extend({constructor:function(t,e){this.callback=t,this.interval=e||5e3,this.isRunning=!1,this._timer=null,this.chrono=new r},start:function(){this.isRunning=!0,this._setTick()},stop:function(){this.isRunning=!1,this._timer&&clearTimeout(this._timer)},_setTick:function(){this.chrono.start(),this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}});t.exports=o},function(t,e,i){var n=i(2),r=i(1),o=i(12),s=i(15),a=n.extend({constructor:function(t){this.transforms=[],this.pluginRef=t,this._requests=[]},sendRequest:function(t,e,i){t&&("function"==typeof e&&t.on(o.Event.SUCCESS,e,i),this._registerRequest(t))},buildRequest:function(t,e,i,n){var r=new o(t,e,i=i||{});"function"==typeof n&&r.on(o.Event.SUCCESS,n),this._registerRequest(r)},addTransform:function(t){t.parse&&t.isBlocking?(this.transforms.push(t),t.on(s.Event.DONE,this._processRequests.bind(this))):r.warn(t+" is not a valid RequestTransform.")},removeTransform:function(t){var e=this.transforms.indexOf(t);-1!==e?this.transforms.splice(e,1):r.warn("Trying to remove unexisting Transform '"+t+"'.")},_registerRequest:function(t){this._requests.push(t),this._processRequests()},_processRequests:function(){var t=this._requests;this._requests=[];for(var e=[];t.length;){var i=t.shift(),n=this._transform(i);n===s.STATE_NO_BLOCKED?(this.pluginRef&&(i.host=this.pluginRef.getHost()),i.send()):n===s.STATE_BLOCKED&&e.push(i)}for(;e.length;)this._requests.push(e.shift())},_transform:function(t){var e=s.STATE_NO_BLOCKED;return this.transforms.forEach(function(i){i.isBlocking(t)?e=s.STATE_BLOCKED:(i.parse(t),i.getState()!==s.STATE_OFFLINE||(e=s.STATE_OFFLINE))}),e}});t.exports=a},function(t,e,i){var n=i(2),r=i(1),o=n.extend({constructor:function(t,e){this.prefix=t||"youbora",this.disableCookies=e},setLocal:function(t,e){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.setItem(this.prefix+"."+t,e);if(!this.disableCookies)return this._setCookie(this.prefix+"."+t,e)}catch(t){r.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},getLocal:function(t){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.getItem(this.prefix+"."+t);if(!this.disableCookies)return this._getCookie(this.prefix+"."+t)}catch(t){r.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},removeLocal:function(t){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.removeItem(this.prefix+"."+t);if(!this.disableCookies)return this._removeCookie(this.prefix+"."+t)}catch(t){r.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},setSession:function(t,e){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.setItem(this.prefix+"."+t,e);if(!this.disableCookies)return this._setCookie(this.prefix+".session."+t,e)}catch(t){r.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getSession:function(t){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.getItem(this.prefix+"."+t);if(!this.disableCookies)return this._getCookie(this.prefix+".session."+t)}catch(t){r.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},removeSession:function(t){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.removeItem(this.prefix+"."+t);if(!this.disableCookies)return this._removeCookie(this.prefix+".session."+t)}catch(t){r.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getStorages:function(t){return this.getSession(t)||this.getLocal(t)},setStorages:function(t,e){this.setSession(t,e),this.setLocal(t,e)},removeStorages:function(t){this.removeSession(t),this.removeLocal(t)},_setCookie:function(t,e){document.cookie=t+"="+e+";"},_getCookie:function(t){for(var e=t+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var r=i[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null},_removeCookie:function(t){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}});t.exports=o},function(t,e,i){var n=i(2),r=i(1),o=["accountCode","username","anonymousUser","rendition","player","title","title2","live","mediaDuration","mediaResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","obfuscateIp","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","deviceCode","deviceInfo","preloadDuration","referer","userType","streamingProtocol","householdId","experiments","youboraId","fingerprint","npawPluginUUID","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode","libVersion","nodeHost","nodeType","appName","appReleaseVersion","package","saga","tvshow","season","titleEpisode","channel","imdbID","gracenoteID","contentType","genre","contentLanguage","subtitles","cost","price","playbackType","email","drm","videoCodec","audioCodec","codecSettings","codecProfile","containerFormat","contentId","contractedResolution"],s=["playhead","adTitle","adPosition","adDuration","adCampaign","adResource","adPlayerVersion","adProperties","adAdapterVersion","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10"],a=n.extend({constructor:function(t){this._plugin=t,this._adNumber=0,this.lastSent={}},fetchParams:function(t,e,i){t=t||{},e=e||[];for(var n=0;n<e.length;n++){var o=e[n];if(!t[o]){var s=a.getters[o];if(this._plugin[s]){var u=this._plugin[s]();null===u||i&&this.lastSent[o]===u||(t[o]=u,this.lastSent[o]=u)}else r.warn("Trying to call undefined getter "+o+":"+s)}}return t},getGetters:function(){return a.getters},buildBody:function(t){return this.fetchParams(null,a.bodyParams[t],!1)},buildParams:function(t,e){return t=t||{},this.fetchParams(t,a.params[e],!1),this.fetchParams(t,a.differentParams[e],!0),t},getNewAdNumber:function(){var t=this.lastSent.adNumber;return t&&this.lastSent.adPosition===this._plugin.getAdPosition()?t+=1:t=1,this.lastSent.adNumber=t,t},getChangedEntities:function(){return this.fetchParams({},a.differentParams.entities,!0)}},{params:{"/data":["system","pluginVersion","requestNumber","username","fingerprint","npawPluginUUID"],"/init":o,"/start":o,"/joinTime":["joinDuration","playhead","mediaDuration"],"/pause":["playhead"],"/resume":["pauseDuration","playhead"],"/seek":["seekDuration","playhead"],"/bufferUnderrun":["bufferDuration","playhead"],"/error":["player"].concat(o),"/stop":["bitrate","playhead","pauseDuration"],"/infinity/video/event":[],"/adInit":s,"/adStart":s,"/adJoin":["playhead","adPosition","adJoinDuration","adPlayhead"],"/adPause":["playhead","adPosition","adPlayhead"],"/adResume":["playhead","adPosition","adPlayhead","adPauseDuration"],"/adBufferUnderrun":["playhead","adPosition","adPlayhead","adBufferDuration"],"/adStop":["playhead","adPosition","adPlayhead","adBitrate","adTotalDuration","pauseDuration"],"/adClick":["playhead","adPosition","adPlayhead"],"/adError":s,"/adBlocked":s,"/ping":["droppedFrames","playrate","cdnDownloadedTraffic","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent","metrics"],"/infinity/session/start":["accountCode","username","anonymousUser","navContext","route","page","referer","referral","language","deviceCode","youboraId","fingerprint","npawPluginUUID","libVersion","appName","appReleaseVersion"],"/infinity/session/stop":[],"/infinity/session/nav":["navContext","route","page"],"/infinity/session/beat":["sessionMetrics"],"/infinity/event":["accountCode","navContext"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString","subtitles","contentLanguage"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",libVersion:"getLibVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",obfuscateIp:"getObfuscateIp",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",metrics:"getVideoMetrics",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",adPosition:"getAdPosition",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceCode:"getDeviceCode",deviceInfo:"getDeviceInfo",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",preloadDuration:"getPreloadDuration",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",navContext:"getContext",page:"getPageName",cdnDownloadedTraffic:"getCdnTraffic",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",viewJson:"getOfflineView",experiments:"getExperiments",fingerprint:"getFingerprint",npawPluginUUID:"getNpawPluginUUID",youboraId:"getYouboraId",isInfinity:"getIsInfinity",sessionMetrics:"getSessionMetrics",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode",appName:"getAppName",appReleaseVersion:"getAppReleaseVersion",package:"getPackage",saga:"getSaga",tvshow:"getTvShow",season:"getSeason",titleEpisode:"getEpisodeTitle",channel:"getChannel",drm:"getDRM",videoCodec:"getVideoCodec",audioCodec:"getAudioCodec",codecSettings:"getCodecSettings",codecProfile:"getCodecProfile",containerFormat:"getContainerFormat",contentId:"getID",imdbID:"getImdbId",gracenoteID:"getGracenoteID",contentType:"getType",genre:"getGenre",contentLanguage:"getVideoLanguage",subtitles:"getSubtitles",contractedResolution:"getContractedResolution",cost:"getCost",price:"getPrice",playbackType:"getPlaybackType",email:"getEmail"}});t.exports=a},function(t,e,i){var n=i(11),r=i(30),o=i(156),s=n.extend({constructor:function(t){this._plugin=t},andBeyond:function(){s.prototype.begin.apply(this,arguments)},begin:function(t,e){this._comm=new r(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new o(this._plugin)),this._plugin&&this._plugin.storage&&"function"==typeof this._plugin.storage.getLocal&&(this._registeredProperties=this._plugin.storage.getLocal("inifnityRegisteredProperties")),e||this._plugin.getIsSessionExpired()||!this._plugin.storage.getLocal("infinityStarted")?this.fireSessionStart(t,e):(this.fireNav(t),this._sendExtraBeat())},_generateNewContext:function(){var t=btoa((new Date).getTime());this._plugin.storage.setSession("context",t)},_setLastActive:function(){this._firstActive||(this._firstActive=this.getFirstActive()),this._plugin.storage.setStorages("lastactive",(new Date).getTime())},getFirstActive:function(){return Number(this._plugin.getLastActive())||0},getComm:function(){return this._comm},fireSessionStart:function(t,e){this._plugin.storage.setLocal("infinityStarted","true"),this._plugin.storage.removeLocal("infinityStopped"),this.infinityStarted=!0,this.infinityStopped=!1,this._generateNewContext(),this._plugin.viewTransform._parentId=e,this.emit(s.Event.SESSION_START,this._getParamsJson(t,null,null,!0,!0)),this._setLastActive()},fireSessionStop:function(t){this.infinityStopped=!0,this.emit(s.Event.SESSION_STOP,t),this._plugin.storage.removeStorages("data"),this._plugin.storage.removeStorages("session"),this._plugin.storage.removeStorages("lastactive")},newSession:function(t,e){this.fireSessionStop(),this._plugin.storage.removeLocal("data"),this._plugin.setOptions(t),this._plugin.restartViewTransform(),this.fireSessionStart(e)},fireNav:function(t){this.isActive()&&(this._plugin.getContext()||this._generateNewContext(),this.emit(s.Event.NAV,this._getParamsJson(t,null,null,!0)))},_sendExtraBeat:function(){var t=(new Date).getTime();if(this._plugin&&this._plugin._beat){var e=this._plugin._beat.chrono.startTime?t-this._plugin._beat.chrono.startTime:0;this._plugin._sendBeat(e),this._plugin._beat.chrono.startTime=t}this._setLastActive()},fireEvent:function(t,e,i){this.emit(s.Event.EVENT,this._getParamsJson(e,i,t)),this._setLastActive()},register:function(t,e){this._registeredProperties={dimensions:t,values:e},this._plugin.storage.setLocal("inifnityRegisteredProperties",JSON.stringify(this._registeredProperties))},registerOnce:function(t,e){this._registeredProperties||this.register(t,e)},unregister:function(){this._registeredProperties=null,this._plugin.storage.removeLocal("inifnityRegisteredProperties")},_getParamsJson:function(t,e,i,n,r){var o={};if(i&&(o.name=i),o.dimensions=t||{},o.values=e||{},this._registeredProperties){for(var s in this._registeredProperties.dimensions)o.dimensions[s]=this._registeredProperties.dimensions[s];for(var s in this._registeredProperties.values)o.values[s]=this._registeredProperties.values[s]}var a={params:o};return n&&(a.params.dimensions.page&&(a.params.page=a.params.dimensions.page,delete a.params.dimensions.page),a.params.dimensions.route&&(a.params.route=a.params.dimensions.route,delete a.params.dimensions.route),r||delete a.params.dimensions,delete a.params.values),a},isActive:function(){var t=(new Date).getTime();return null!=this._plugin.storage.getLocal("infinityStarted")&&!this._plugin.storage.getLocal("infinityStopped")||Number(this._plugin.getLastActive())+this._plugin.sessionExpire>t}},{Event:{NAV:"nav",SESSION_START:"sessionStart",SESSION_STOP:"sessionStop",BEAT:"beat",EVENT:"event"}});t.exports=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(4),s=i(18),a=i(22),u=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-uicontainer",hideDelay:5e3},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i),this.configureUIShowHide(e,i),this.configurePlayerStates(e,i)},e.prototype.configureUIShowHide=function(t,e){var i=this,n=this.getDomElement(),r=this.getConfig();if(-1!==r.hideDelay){var o=!1,a=!1,u=!0,h=function(){o||(e.onControlsShow.dispatch(i),o=!0),a||t.isCasting()||i.uiHideTimeout.start()};this.uiHideTimeout=new s.Timeout(r.hideDelay,function(){if(o&&!t.isCasting()){var n={};e.onPreviewControlsHide.dispatch(i,n),n.cancel?h():(e.onControlsHide.dispatch(i),o=!1)}}),n.on("touchend",function(t){o||(u?u=!1:t.preventDefault(),h())}),n.on("mouseenter",function(){h()}),n.on("mousemove",function(){h()}),n.on("mouseleave",function(){a||i.uiHideTimeout.start()}),e.onSeek.subscribe(function(){i.uiHideTimeout.clear(),a=!0}),e.onSeeked.subscribe(function(){a=!1,i.uiHideTimeout.start()}),t.addEventHandler(t.EVENT.ON_CAST_STARTED,function(){h()})}else e.onConfigured.subscribe(function(){return e.onControlsShow.dispatch(i)})},e.prototype.configurePlayerStates=function(t,i){var n=this,r=this.getDomElement(),s=[];for(var u in a.PlayerUtils.PlayerState)if(isNaN(Number(u))){var h=a.PlayerUtils.PlayerState[a.PlayerUtils.PlayerState[u]];s[a.PlayerUtils.PlayerState[u]]=this.prefixCss(e.STATE_PREFIX+h.toLowerCase())}var c=function(){r.removeClass(s[a.PlayerUtils.PlayerState.IDLE]),r.removeClass(s[a.PlayerUtils.PlayerState.PREPARED]),r.removeClass(s[a.PlayerUtils.PlayerState.PLAYING]),r.removeClass(s[a.PlayerUtils.PlayerState.PAUSED]),r.removeClass(s[a.PlayerUtils.PlayerState.FINISHED])};t.addEventHandler(t.EVENT.ON_READY,function(){c(),r.addClass(s[a.PlayerUtils.PlayerState.PREPARED])}),t.addEventHandler(t.EVENT.ON_PLAY,function(){c(),r.addClass(s[a.PlayerUtils.PlayerState.PLAYING])}),t.addEventHandler(t.EVENT.ON_PAUSED,function(){c(),r.addClass(s[a.PlayerUtils.PlayerState.PAUSED])}),t.addEventHandler(t.EVENT.ON_PLAYBACK_FINISHED,function(){c(),r.addClass(s[a.PlayerUtils.PlayerState.FINISHED])}),t.addEventHandler(t.EVENT.ON_SOURCE_UNLOADED,function(){c(),r.addClass(s[a.PlayerUtils.PlayerState.IDLE])}),r.addClass(s[a.PlayerUtils.getState(t)]),t.addEventHandler(t.EVENT.ON_FULLSCREEN_ENTER,function(){r.addClass(n.prefixCss(e.FULLSCREEN))}),t.addEventHandler(t.EVENT.ON_FULLSCREEN_EXIT,function(){r.removeClass(n.prefixCss(e.FULLSCREEN))}),t.isFullscreen()&&r.addClass(this.prefixCss(e.FULLSCREEN)),t.addEventHandler(t.EVENT.ON_STALL_STARTED,function(){r.addClass(n.prefixCss(e.BUFFERING))}),t.addEventHandler(t.EVENT.ON_STALL_ENDED,function(){r.removeClass(n.prefixCss(e.BUFFERING))}),t.isStalled()&&r.addClass(this.prefixCss(e.BUFFERING)),t.addEventHandler(t.EVENT.ON_CAST_STARTED,function(){r.addClass(n.prefixCss(e.REMOTE_CONTROL))}),t.addEventHandler(t.EVENT.ON_CAST_STOPPED,function(){r.removeClass(n.prefixCss(e.REMOTE_CONTROL))}),t.isCasting()&&r.addClass(this.prefixCss(e.REMOTE_CONTROL)),i.onControlsShow.subscribe(function(){r.removeClass(n.prefixCss(e.CONTROLS_HIDDEN)),r.addClass(n.prefixCss(e.CONTROLS_SHOWN))}),i.onControlsHide.subscribe(function(){r.removeClass(n.prefixCss(e.CONTROLS_SHOWN)),r.addClass(n.prefixCss(e.CONTROLS_HIDDEN))});var l=function(t,e){r.removeClass(n.prefixCss("layout-max-width-400")),r.removeClass(n.prefixCss("layout-max-width-600")),r.removeClass(n.prefixCss("layout-max-width-800")),r.removeClass(n.prefixCss("layout-max-width-1200")),t<=400?r.addClass(n.prefixCss("layout-max-width-400")):t<=600?r.addClass(n.prefixCss("layout-max-width-600")):t<=800?r.addClass(n.prefixCss("layout-max-width-800")):t<=1200&&r.addClass(n.prefixCss("layout-max-width-1200"))};t.addEventHandler(t.EVENT.ON_PLAYER_RESIZE,function(t){var e=Math.round(Number(t.width.substring(0,t.width.length-2)));Math.round(Number(t.height.substring(0,t.height.length-2)));l(e)}),l(new o.DOM(t.getFigure()).width(),new o.DOM(t.getFigure()).height())},e.prototype.release=function(){t.prototype.release.call(this),this.uiHideTimeout.clear()},e.prototype.toDomElement=function(){var e=t.prototype.toDomElement.call(this);return document&&void 0!==document.createElement("p").style.flex?e.addClass(this.prefixCss("flexbox")):e.addClass(this.prefixCss("no-flexbox")),e},e.STATE_PREFIX="player-state-",e.FULLSCREEN="fullscreen",e.BUFFERING="buffering",e.REMOTE_CONTROL="remote-control",e.CONTROLS_SHOWN="controls-shown",e.CONTROLS_HIDDEN="controls-hidden",e}(r.Container);e.UIContainer=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.isMobile=navigator&&navigator.userAgent&&/Mobi/.test(navigator.userAgent),t.isChrome=navigator&&navigator.userAgent&&/Chrome/.test(navigator.userAgent),t.isAndroid=navigator&&navigator.userAgent&&/Android/.test(navigator.userAgent)}(e.BrowserUtils||(e.BrowserUtils={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(13),o=i(22),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-playbacktogglebutton",text:"Play/Pause"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(i,n,r){var s=this;void 0===r&&(r=!0),t.prototype.configure.call(this,i,n);var a=!1,u=function(t){a||(i.isPlaying()?s.on():s.off())};i.addEventHandler(i.EVENT.ON_PLAY,u),i.addEventHandler(i.EVENT.ON_PAUSED,u),i.EVENT.ON_PLAYING&&i.addEventHandler(i.EVENT.ON_PLAYING,u),i.addEventHandler(i.EVENT.ON_SOURCE_LOADED,u),i.addEventHandler(i.EVENT.ON_SOURCE_UNLOADED,u),i.addEventHandler(i.EVENT.ON_PLAYBACK_FINISHED,u),i.addEventHandler(i.EVENT.ON_CAST_STARTED,u),i.addEventHandler(i.EVENT.ON_CAST_PLAYING,u),i.addEventHandler(i.EVENT.ON_CAST_PAUSED,u),i.addEventHandler(i.EVENT.ON_CAST_PLAYBACK_FINISHED,u),i.addEventHandler(i.EVENT.ON_WARNING,function(t){5008===t.code&&s.off()});var h=new o.PlayerUtils.TimeShiftAvailabilityDetector(i);h.onTimeShiftAvailabilityChanged.subscribe(function(t,i){i.timeShiftAvailable?s.getDomElement().removeClass(s.prefixCss(e.CLASS_STOPTOGGLE)):s.getDomElement().addClass(s.prefixCss(e.CLASS_STOPTOGGLE))}),h.detect(),r&&this.onClick.subscribe(function(){i.isPlaying()?i.pause("ui"):i.play("ui")}),n.onSeek.subscribe(function(){a=!0}),n.onSeeked.subscribe(function(){a=!1}),u()},e.CLASS_STOPTOGGLE="stoptoggle",e}(r.ToggleButton);e.PlaybackToggleButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-volumetogglebutton",text:"Volume/Mute",onClass:"muted",offClass:"unmuted"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){e.isMuted()?(n.on(),e.getVolume()<10&&e.setVolume(10)):n.off()},o=function(){var t=Math.ceil(e.getVolume()/10);n.getDomElement().data(n.prefixCss("volume-level-tens"),String(t)),0===t&&n.off()};e.addEventHandler(e.EVENT.ON_MUTED,r),e.addEventHandler(e.EVENT.ON_UNMUTED,r),e.addEventHandler(e.EVENT.ON_VOLUME_CHANGED,o),this.onClick.subscribe(function(){e.isMuted()?e.unmute("ui-volumetogglebutton"):e.mute("ui-volumetogglebutton")}),r(),o()},e}(i(13).ToggleButton);e.VolumeToggleButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(5),o=i(4),s=i(9),a=i(18),u=i(22),h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.playbackPositionPercentage=0,i.touchSupported="ontouchstart"in window,i.seekBarEvents={onSeek:new s.EventDispatcher,onSeekPreview:new s.EventDispatcher,onSeeked:new s.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-seekbar",vertical:!1,smoothPlaybackPositionUpdateIntervalMs:50},i.config),i.label=i.config.label,i.timelineMarkers=[],i}return n.__extends(e,t),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.hasLabel()&&this.getLabel().initialize()},e.prototype.configure=function(i,n,r){var o=this;if(void 0===r&&(r=!0),t.prototype.configure.call(this,i,n),this.setPosition(this.seekBarBackdrop,100),r){var s=!1,a=!1,h=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=!1),!a)if(i.isLive()){if(0===i.getMaxTimeShift())o.setPlaybackPosition(100);else{var r=100-100/i.getMaxTimeShift()*i.getTimeShift();o.setPlaybackPosition(r)}o.setBufferPosition(100)}else{r=100/i.getDuration()*i.getCurrentTime();var s=i.getVideoBufferLength(),u=i.getAudioBufferLength(),h=Math.min(null!=s?s:Number.MAX_VALUE,null!=u?u:Number.MAX_VALUE);h===Number.MAX_VALUE&&(h=0);var c=100/i.getDuration()*h;(o.config.smoothPlaybackPositionUpdateIntervalMs===e.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED||n||i.isPaused()||i.isPaused()===i.isPlaying())&&o.setPlaybackPosition(r),o.setBufferPosition(r+c)}};i.addEventHandler(i.EVENT.ON_READY,h),i.addEventHandler(i.EVENT.ON_TIME_CHANGED,h),i.addEventHandler(i.EVENT.ON_STALL_ENDED,h),i.addEventHandler(i.EVENT.ON_SEEKED,h),i.addEventHandler(i.EVENT.ON_TIME_SHIFTED,h),i.addEventHandler(i.EVENT.ON_SEGMENT_REQUEST_FINISHED,h),i.addEventHandler(i.EVENT.ON_CAST_TIME_UPDATED,h),this.configureLivePausedTimeshiftUpdater(i,n,h),i.addEventHandler(i.EVENT.ON_SEEK,function(){o.setSeeking(!0)}),i.addEventHandler(i.EVENT.ON_SEEKED,function(){o.setSeeking(!1)}),i.addEventHandler(i.EVENT.ON_TIME_SHIFT,function(){o.setSeeking(!0)}),i.addEventHandler(i.EVENT.ON_TIME_SHIFTED,function(){o.setSeeking(!1)});var c=function(t){i.isLive()?i.timeShift(i.getMaxTimeShift()-i.getMaxTimeShift()*(t/100),"ui"):i.seek(i.getDuration()*(t/100),"ui")};this.onSeek.subscribe(function(t){a=!0,n.onSeek.dispatch(t),(s=i.isPlaying())&&i.pause("ui")}),this.onSeekPreview.subscribe(function(t,e){n.onSeekPreview.dispatch(t,e)}),this.onSeekPreview.subscribeRateLimited(function(t,e){e.scrubbing&&c(e.position)},200),this.onSeeked.subscribe(function(t,e){a=!1,c(e),s&&i.play("ui"),n.onSeeked.dispatch(t)}),this.hasLabel()&&this.getLabel().configure(i,n);var l=!1,f=!1,p=function(t,e){t&&!e?o.hide():o.show(),h(null,!0),o.refreshPlaybackPosition()},d=new u.PlayerUtils.LiveStreamDetector(i);d.onLiveChanged.subscribe(function(t,e){l=e.live,p(l,f)});var g=new u.PlayerUtils.TimeShiftAvailabilityDetector(i);g.onTimeShiftAvailabilityChanged.subscribe(function(t,e){f=e.timeShiftAvailable,p(l,f)}),d.detect(),g.detect(),i.addEventHandler(i.EVENT.ON_PLAYER_RESIZE,function(){o.refreshPlaybackPosition()}),n.onConfigured.subscribe(function(){o.refreshPlaybackPosition()}),i.addEventHandler(i.EVENT.ON_READY,function(){o.refreshPlaybackPosition()}),h(),this.setBufferPosition(0),this.setSeekPosition(0),this.config.smoothPlaybackPositionUpdateIntervalMs!==e.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED&&this.configureSmoothPlaybackPositionUpdater(i,n),this.configureMarkers(i,n)}},e.prototype.configureLivePausedTimeshiftUpdater=function(t,e,i){var n=new a.Timeout(1e3,i,!0);t.addEventHandler(t.EVENT.ON_PAUSED,function(){t.isLive()&&t.getMaxTimeShift()<0&&n.start()}),t.addEventHandler(t.EVENT.ON_PLAY,function(){return n.clear()})},e.prototype.configureSmoothPlaybackPositionUpdater=function(t,e){var i=this,n=0,r=0;this.smoothPlaybackPositionUpdater=new a.Timeout(50,function(){n+=.05,r=t.getCurrentTime();var e=n-r;Math.abs(e)>2?n=r:e<=-.05?n+=.05:e>=.05&&(n-=.05);var o=100/t.getDuration()*n;i.setPlaybackPosition(o)},!0);var o=function(){t.isLive()||(n=t.getCurrentTime(),i.smoothPlaybackPositionUpdater.start())},s=function(){i.smoothPlaybackPositionUpdater.clear()};t.addEventHandler(t.EVENT.ON_PLAY,o),t.addEventHandler(t.EVENT.ON_CAST_PLAYING,o),t.addEventHandler(t.EVENT.ON_PAUSED,s),t.addEventHandler(t.EVENT.ON_CAST_PAUSED,s),t.addEventHandler(t.EVENT.ON_PLAYBACK_FINISHED,s),t.addEventHandler(t.EVENT.ON_SEEKED,function(){n=t.getCurrentTime()}),t.isPlaying()&&o()},e.prototype.configureMarkers=function(t,e){var i=this,n=function(){i.timelineMarkers=[],i.updateMarkers()},r=function(){n();var r=t.getDuration();if(r!==1/0){for(var o=0,s=e.getConfig().metadata.markers;o<s.length;o++){var a=s[o],u=100/r*a.time,h=100/r*a.duration;i.timelineMarkers.push({marker:a,position:u,duration:h})}i.updateMarkers()}};t.addEventHandler(t.EVENT.ON_READY,r),t.addEventHandler(t.EVENT.ON_SOURCE_UNLOADED,n),t.addEventHandler(t.EVENT.ON_PLAYER_RESIZE,function(){return i.updateMarkers()}),e.getConfig().events.onUpdated.subscribe(r),e.onRelease.subscribe(function(){return e.getConfig().events.onUpdated.unsubscribe(r)}),r()},e.prototype.release=function(){t.prototype.release.call(this),this.smoothPlaybackPositionUpdater&&this.smoothPlaybackPositionUpdater.clear()},e.prototype.toDomElement=function(){var t=this;this.config.vertical&&this.config.cssClasses.push("vertical");var e=new o.DOM("div",{id:this.config.id,class:this.getCssClasses()}),i=new o.DOM("div",{class:this.prefixCss("seekbar")});this.seekBar=i;var n=new o.DOM("div",{class:this.prefixCss("seekbar-bufferlevel")});this.seekBarBufferPosition=n;var r=new o.DOM("div",{class:this.prefixCss("seekbar-playbackposition")});this.seekBarPlaybackPosition=r;var s=new o.DOM("div",{class:this.prefixCss("seekbar-playbackposition-marker")});this.seekBarPlaybackPositionMarker=s;var a=new o.DOM("div",{class:this.prefixCss("seekbar-seekposition")});this.seekBarSeekPosition=a;var u=new o.DOM("div",{class:this.prefixCss("seekbar-backdrop")});this.seekBarBackdrop=u;var h=new o.DOM("div",{class:this.prefixCss("seekbar-markers")});this.seekBarMarkersContainer=h,i.append(this.seekBarBackdrop,this.seekBarBufferPosition,this.seekBarSeekPosition,this.seekBarPlaybackPosition,this.seekBarMarkersContainer,this.seekBarPlaybackPositionMarker);var c=!1,l=function(e){e.preventDefault(),e.stopPropagation();var i=100*t.getOffset(e);t.setSeekPosition(i),t.setPlaybackPosition(i),t.onSeekPreviewEvent(i,!0)},f=function(e){e.preventDefault(),new o.DOM(document).off("touchmove mousemove",l),new o.DOM(document).off("touchend mouseup",f);var i=100*t.getOffset(e),n=t.getMarkerAtPosition(i);t.setSeeking(!1),c=!1,t.onSeekedEvent(n?n.position:i)};return i.on("touchstart mousedown",function(e){var i=t.touchSupported&&e instanceof TouchEvent;e.preventDefault(),e.stopPropagation(),t.setSeeking(!0),c=!0,t.onSeekEvent(),new o.DOM(document).on(i?"touchmove":"mousemove",l),new o.DOM(document).on(i?"touchend":"mouseup",f)}),i.on("touchmove mousemove",function(e){e.preventDefault(),c&&(e.stopPropagation(),l(e));var i=100*t.getOffset(e);t.setSeekPosition(i),t.onSeekPreviewEvent(i,!1),t.hasLabel()&&t.getLabel().isHidden()&&t.getLabel().show()}),i.on("touchend mouseleave",function(e){e.preventDefault(),t.setSeekPosition(0),t.hasLabel()&&t.getLabel().hide()}),e.append(i),this.label&&e.append(this.label.getDomElement()),e},e.prototype.updateMarkers=function(){var t=this;this.seekBarMarkersContainer.empty();for(var e=this.seekBar.width(),i=0,n=this.timelineMarkers;i<n.length;i++){var r=n[i],s=["seekbar-marker"].concat(r.marker.cssClasses||[]).map(function(e){return t.prefixCss(e)}),a={width:r.position+"%"};if(r.duration>0){var u=Math.round(e/100*r.duration);a["border-right-width"]=u+"px",a["margin-left"]="0"}this.seekBarMarkersContainer.append(new o.DOM("div",{class:s.join(" "),"data-marker-time":String(r.marker.time),"data-marker-title":String(r.marker.title)}).css(a))}},e.prototype.getMarkerAtPosition=function(t){if(this.timelineMarkers.length>0)for(var e=0,i=this.timelineMarkers;e<i.length;e++){var n=i[e];if(n.duration>0&&t>=n.position-1&&t<=n.position+n.duration+1)return n;if(t>=n.position-1&&t<=n.position+1)return n}return null},e.prototype.getHorizontalOffset=function(t){var e=this.seekBar.offset().left,i=1/this.seekBar.width()*(t-e);return this.sanitizeOffset(i)},e.prototype.getVerticalOffset=function(t){var e=this.seekBar.offset().top,i=1/this.seekBar.height()*(t-e);return 1-this.sanitizeOffset(i)},e.prototype.getOffset=function(t){return this.touchSupported&&t instanceof TouchEvent?this.config.vertical?this.getVerticalOffset("touchend"===t.type?t.changedTouches[0].pageY:t.touches[0].pageY):this.getHorizontalOffset("touchend"===t.type?t.changedTouches[0].pageX:t.touches[0].pageX):t instanceof MouseEvent?this.config.vertical?this.getVerticalOffset(t.pageY):this.getHorizontalOffset(t.pageX):(console&&console.warn("invalid event"),0)},e.prototype.sanitizeOffset=function(t){return t<0?t=0:t>1&&(t=1),t},e.prototype.setPlaybackPosition=function(t){this.playbackPositionPercentage=t,this.setPosition(this.seekBarPlaybackPosition,t);var e=(this.config.vertical?this.seekBar.height()-this.seekBarPlaybackPositionMarker.height():this.seekBar.width())/100*t;this.config.vertical&&(e=this.seekBar.height()-e-this.seekBarPlaybackPositionMarker.height());var i=this.config.vertical?{transform:"translateY("+e+"px)","-ms-transform":"translateY("+e+"px)","-webkit-transform":"translateY("+e+"px)"}:{transform:"translateX("+e+"px)","-ms-transform":"translateX("+e+"px)","-webkit-transform":"translateX("+e+"px)"};this.seekBarPlaybackPositionMarker.css(i)},e.prototype.refreshPlaybackPosition=function(){this.setPlaybackPosition(this.playbackPositionPercentage)},e.prototype.setBufferPosition=function(t){this.setPosition(this.seekBarBufferPosition,t)},e.prototype.setSeekPosition=function(t){this.setPosition(this.seekBarSeekPosition,t)},e.prototype.setPosition=function(t,e){var i=e/100;i>=.99999&&i<=1.00001&&(i=.99999);var n=this.config.vertical?{transform:"scaleY("+i+")","-ms-transform":"scaleY("+i+")","-webkit-transform":"scaleY("+i+")"}:{transform:"scaleX("+i+")","-ms-transform":"scaleX("+i+")","-webkit-transform":"scaleX("+i+")"};t.css(n)},e.prototype.setSeeking=function(t){t?this.getDomElement().addClass(this.prefixCss(e.CLASS_SEEKING)):this.getDomElement().removeClass(this.prefixCss(e.CLASS_SEEKING))},e.prototype.isSeeking=function(){return this.getDomElement().hasClass(this.prefixCss(e.CLASS_SEEKING))},e.prototype.hasLabel=function(){return null!=this.label},e.prototype.getLabel=function(){return this.label},e.prototype.onSeekEvent=function(){this.seekBarEvents.onSeek.dispatch(this)},e.prototype.onSeekPreviewEvent=function(t,e){var i=this.getMarkerAtPosition(t),n=t;i&&(i.duration>0?t<i.position?n=i.position:t>i.position+i.duration&&(n=i.position+i.duration):n=i.position),this.label&&this.label.getDomElement().css({left:n+"%"}),this.seekBarEvents.onSeekPreview.dispatch(this,{scrubbing:e,position:n,marker:i})},e.prototype.onSeekedEvent=function(t){this.seekBarEvents.onSeeked.dispatch(this,t)},Object.defineProperty(e.prototype,"onSeek",{get:function(){return this.seekBarEvents.onSeek.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSeekPreview",{get:function(){return this.seekBarEvents.onSeekPreview.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSeeked",{get:function(){return this.seekBarEvents.onSeeked.getEvent()},enumerable:!0,configurable:!0}),e.prototype.onShowEvent=function(){t.prototype.onShowEvent.call(this),this.refreshPlaybackPosition()},e.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED=-1,e.CLASS_SEEKING="seeking",e}(r.Component);e.SeekBar=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(40),s=i(41),a=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-controlbar",hidden:!0},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var a=0;o.UIUtils.traverseTree(this,function(t){t instanceof r.Container||t instanceof s.Spacer||t.onHoverChanged.subscribe(function(t,e){e.hovered?a++:a--})}),i.onControlsShow.subscribe(function(){n.show()}),i.onPreviewControlsHide.subscribe(function(t,e){e.cancel=a>0}),i.onControlsHide.subscribe(function(){n.hide()})},e}(r.Container);e.ControlBar=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3);!function(t){t.traverseTree=function(t,e){var i=function(t,r){if(e(t,r),t instanceof n.Container)for(var o=0,s=t.getComponents();o<s.length;o++){var a=s[o];i(a,t)}};i(t)}}(e.UIUtils||(e.UIUtils={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-spacer"},i.config),i}return n.__extends(e,t),e.prototype.onShowEvent=function(){},e.prototype.onHideEvent=function(){},e.prototype.onHoverChangedEvent=function(t){},e}(i(5).Component);e.Spacer=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(5),s=i(17),a=i(14),u=i(43),h=i(44),c=i(18),l=i(9),f=function(t){function e(e){var i=t.call(this,e)||this;return i.settingsPanelEvents={onSettingsStateChanged:new l.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-settings-panel",hideDelay:3e3},i.config),i}return n.__extends(e,t),e.prototype.configure=function(i,n){var r=this;t.prototype.configure.call(this,i,n);var o=this.getConfig();o.hideDelay>-1&&(this.hideTimeout=new c.Timeout(o.hideDelay,function(){r.hide(),r.hideHoveredSelectBoxes()}),this.onShow.subscribe(function(){r.hideTimeout.start()}),this.getDomElement().on("mouseenter",function(){r.hideTimeout.clear()}),this.getDomElement().on("mouseleave",function(){r.hideTimeout.reset()}),this.onHide.subscribe(function(){r.hideTimeout.clear()}));for(var s=function(){r.onSettingsStateChangedEvent();for(var t=null,i=0,n=r.getItems();i<n.length;i++){var o=n[i];o.getDomElement().removeClass(r.prefixCss(e.CLASS_LAST)),o.isShown()&&(t=o)}t&&t.getDomElement().addClass(r.prefixCss(e.CLASS_LAST))},a=0,u=this.getItems();a<u.length;a++){u[a].onActiveChanged.subscribe(s)}},e.prototype.hideHoveredSelectBoxes=function(){this.getItems().forEach(function(t){if(t.isActive()&&t.setting instanceof s.SelectBox){var e=t.setting,i=e.getDomElement().css("display");e.getDomElement().css("display","none"),window.requestAnimationFrame?requestAnimationFrame(function(){e.getDomElement().css("display",i)}):e.getDomElement().css("display",i)}})},e.prototype.release=function(){t.prototype.release.call(this),this.hideTimeout&&this.hideTimeout.clear()},e.prototype.hasActiveSettings=function(){for(var t=0,e=this.getItems();t<e.length;t++){if(e[t].isActive())return!0}return!1},e.prototype.getItems=function(){return this.config.components.filter(function(t){return t instanceof p})},e.prototype.onSettingsStateChangedEvent=function(){this.settingsPanelEvents.onSettingsStateChanged.dispatch(this)},Object.defineProperty(e.prototype,"onSettingsStateChanged",{get:function(){return this.settingsPanelEvents.onSettingsStateChanged.getEvent()},enumerable:!0,configurable:!0}),e.CLASS_LAST="last",e}(r.Container);e.SettingsPanel=f;var p=function(t){function e(e,i,n){void 0===n&&(n={});var r=t.call(this,n)||this;return r.settingsPanelItemEvents={onActiveChanged:new l.EventDispatcher},r.setting=i,r.config=r.mergeConfig(n,{cssClass:"ui-settings-panel-item"},r.config),null!==e&&(e instanceof o.Component?r.label=e:r.label=new a.Label({text:e}),r.addComponent(r.label)),r.addComponent(r.setting),r}return n.__extends(e,t),e.prototype.configure=function(t,e){var i=this;if(this.setting instanceof s.SelectBox){var n=function(){if(i.setting instanceof s.SelectBox){var t=2;(i.setting instanceof u.VideoQualitySelectBox&&i.setting.hasAutoItem()||i.setting instanceof h.AudioQualitySelectBox)&&(t=3),i.setting.itemCount()<t?i.hide():i.show(),i.onActiveChangedEvent()}};this.setting.onItemAdded.subscribe(n),this.setting.onItemRemoved.subscribe(n),n()}},e.prototype.isActive=function(){return this.isShown()},e.prototype.onActiveChangedEvent=function(){this.settingsPanelItemEvents.onActiveChanged.dispatch(this)},Object.defineProperty(e.prototype,"onActiveChanged",{get:function(){return this.settingsPanelItemEvents.onActiveChanged.getEvent()},enumerable:!0,configurable:!0}),e}(r.Container);e.SettingsPanelItem=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){if(e.getVideoQuality)n.selectItem(e.getVideoQuality().id);else{var t=e.getDownloadedVideoData();n.selectItem(t.isAuto?"auto":t.id)}},o=function(){var t=e.getAvailableVideoQualities();n.clearItems(),n.hasAuto="progressive"!==e.getStreamType(),n.hasAuto&&n.addItem("auto","auto");for(var i=0,o=t;i<o.length;i++){var s=o[i];n.addItem(s.id,s.label)}r()};this.onItemSelected.subscribe(function(t,i){e.setVideoQuality(i)}),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),e.EVENT.ON_VIDEO_QUALITY_CHANGED?e.addEventHandler(e.EVENT.ON_VIDEO_QUALITY_CHANGED,r):e.addEventHandler(e.EVENT.ON_VIDEO_DOWNLOAD_QUALITY_CHANGE,r)},e.prototype.hasAutoItem=function(){return this.hasAuto},e}(i(17).SelectBox);e.VideoQualitySelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){if(e.getAudioQuality)n.selectItem(e.getAudioQuality().id);else{var t=e.getDownloadedAudioData();n.selectItem(t.isAuto?"auto":t.id)}},o=function(){var t=e.getAvailableAudioQualities();n.clearItems(),n.addItem("auto","auto");for(var i=0,o=t;i<o.length;i++){var s=o[i];n.addItem(s.id,s.label)}r()};this.onItemSelected.subscribe(function(t,i){e.setAudioQuality(i)}),e.addEventHandler(e.EVENT.ON_AUDIO_CHANGED,o),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),e.EVENT.ON_AUDIO_QUALITY_CHANGED?e.addEventHandler(e.EVENT.ON_AUDIO_QUALITY_CHANGED,r):e.addEventHandler(e.EVENT.ON_AUDIO_DOWNLOAD_QUALITY_CHANGE,r)},e}(i(17).SelectBox);e.AudioQualitySelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){var i=t.call(this,e)||this;return i.subtitleSettingsPanel=e.subtitleSettingsPanel,i.settingsPanel=e.settingsPanel,i}return n.__extends(e,t),e}(i(16).Button);e.SubtitleSettingsButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-volumeslider",hideIfVolumeControlProhibited:!0},i.config),i}return n.__extends(e,t),e.prototype.configure=function(i,n){var r=this;if(t.prototype.configure.call(this,i,n,!1),!this.getConfig().hideIfVolumeControlProhibited||this.detectVolumeControlAvailability()){var o=function(){i.isMuted()?r.setPlaybackPosition(0):r.setPlaybackPosition(i.getVolume())};i.addEventHandler(i.EVENT.ON_READY,o),i.addEventHandler(i.EVENT.ON_VOLUME_CHANGED,o),i.addEventHandler(i.EVENT.ON_MUTED,o),i.addEventHandler(i.EVENT.ON_UNMUTED,o),this.onSeekPreview.subscribeRateLimited(function(t,n){n.scrubbing&&i.setVolume(n.position,e.issuerName)},50),this.onSeeked.subscribe(function(t,n){i.setVolume(n,e.issuerName)}),i.addEventHandler(i.EVENT.ON_PLAYER_RESIZE,function(){r.refreshPlaybackPosition()}),i.addEventHandler(i.EVENT.ON_READY,function(){r.refreshPlaybackPosition()}),n.onConfigured.subscribe(function(){r.refreshPlaybackPosition()}),o()}else this.hide()},e.prototype.detectVolumeControlAvailability=function(){var t=document.createElement("video");return t.volume=.7,1!==t.volume},e.issuerName="ui",e}(i(38).SeekBar);e.VolumeSlider=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(0),o=i(14);!function(t){t[t.Title=0]="Title",t[t.Description=1]="Description"}(n=e.MetadataLabelContent||(e.MetadataLabelContent={}));var s=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClasses:["label-metadata","label-metadata-"+n[e.content].toLowerCase()]},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var r=this;t.prototype.configure.call(this,e,i);var o=this.getConfig(),s=i.getConfig(),a=function(){switch(o.content){case n.Title:r.setText(s.metadata.title);break;case n.Description:r.setText(s.metadata.description)}};a(),e.addEventHandler(e.EVENT.ON_SOURCE_LOADED,a),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,function(){r.setText(null)})},e}(o.Label);e.MetadataLabel=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-clickoverlay"},i.config),i}return n.__extends(e,t),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.setUrl(this.config.url);var e=this.getDomElement();e.on("click",function(){e.data("url")&&window.open(e.data("url"),"_blank")})},e.prototype.getUrl=function(){return this.getDomElement().data("url")},e.prototype.setUrl=function(t){void 0!==t&&null!=t||(t=""),this.getDomElement().data("url",t)},e}(i(16).Button);e.ClickOverlay=r},function(t,e){t.exports=angular},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.DEFAULT="default",t.HIVE="hive",t.KSDN="kollective"}(e.PlayerPlaybackType||(e.PlayerPlaybackType={}))},function(t,e,i){"use strict";t.exports=function(t,e){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return t.apply(e,i)}}},function(t,e,i){"use strict";var n=i(7),r=i(128),o=i(130),s=i(131),a=i(132),u=i(53),h="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||i(133);t.exports=function(t){return new Promise(function(e,c){var l=t.data,f=t.headers;n.isFormData(l)&&delete f["Content-Type"];var p=new XMLHttpRequest,d="onreadystatechange",g=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||a(t.url)||(p=new window.XDomainRequest,d="onload",g=!0,p.onprogress=function(){},p.ontimeout=function(){}),t.auth){var v=t.auth.username||"",y=t.auth.password||"";f.Authorization="Basic "+h(v+":"+y)}if(p.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[d]=function(){if(p&&(4===p.readyState||g)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:i,config:t,request:p};r(e,c,n),p=null}},p.onerror=function(){c(u("Network Error",t,null,p)),p=null},p.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var m=i(134),E=(t.withCredentials||a(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;E&&(f[t.xsrfHeaderName]=E)}if("setRequestHeader"in p&&n.forEach(f,function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),c(t),p=null)}),void 0===l&&(l=null),p.send(l)})}},function(t,e,i){"use strict";var n=i(129);t.exports=function(t,e,i,r,o){var s=new Error(t);return n(s,e,i,r,o)}},function(t,e,i){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,i){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e){t.exports=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}},function(t,e){var i={getCdnTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)t+=Streamroot.peerAgents[e].stats.cdn;return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach(function(e){t+=e.stats.currentContent.cdnDownload}),t}}if("undefined"!=typeof peer5&&peer5.getStats)return peer5.getStats().totalHttpDownloaded;if("undefined"!=typeof teltoo&&teltoo.getStats){var i=teltoo.getStats();return i.totalReceivedBytes-i.p2pReceivedBytes}return null},getP2PTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)Streamroot.peerAgents[e].isP2PEnabled&&(t+=Streamroot.peerAgents[e].stats.p2p);return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach(function(e){t+=e.stats.currentContent.dnaDownload}),t}}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats?teltoo.getStats().p2pReceivedBytes:null},getUploadTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)Streamroot.peerAgents[e].isP2PEnabled&&(t+=Streamroot.peerAgents[e].stats.upload);return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach(function(e){t+=e.stats.currentContent.dnaUpload}),t}}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PUploaded:null},getIsP2PEnabled:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=!1;for(var e in Streamroot.peerAgents)t=t||Streamroot.peerAgents[e].isP2PEnabled;return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=!1;return Streamroot.instances.forEach(function(e){t=t||e.dnaDownloadEnabled||e.dnaUploadEnabled}),t}}return"undefined"!=typeof peer5&&peer5.isEnabled?peer5.isEnabled():null}};t.exports=i},function(t,e,i){var n=i(12),r=i(15),o=i(1),s=i(6),a=i(8),u=r.extend({constructor:function(t,e){r.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=(new Date).getTime(),this._session=e,this._httpSecure=t.options["app.https"]||t.options.httpSecure,this._plugin=t,this.transformName="View"},init:function(){if(this._plugin.options&&this._plugin.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,this.done(),null;if((new Date).getTime()<this._plugin.sessionExpire+(Number(this._plugin.getDataTime())||0)&&this._plugin.getStoredData())return this.setData(this._plugin.getStoredData()),null;var t=a.Service.DATA,e={apiVersion:"v7",outputformat:"json"};null!==(e=this._plugin.requestBuilder.buildParams(e,t))&&(o.notice(t+" "+e.system),"nicetest"===e.system&&o.error("No accountCode has been set. Please set your accountCode inside plugin's options."),new n(this._plugin.getHost(),t,e).on(n.Event.SUCCESS,this._receiveData.bind(this)).on(n.Event.ERROR,this._failedData.bind(this)).send())},setData:function(t){try{var e=JSON.parse(t);this.response.msg=t,this.response.host=s.addProtocol(e.q.h,this._httpSecure),this.response.code=e.q.c,this.response.pingTime=e.q.pt||5,this.response.beatTime=e.q.i&&e.q.i.bt||30,this.response.sessionExpire=e.q.i&&e.q.i.exp||300,e.q.f&&(this.response.youboraId=e.q.f.yid),this._plugin.storage.setLocal("sessionExpire",this.response.sessionExpire),this.done()}catch(t){o.error("Fastdata response is invalid.")}},_receiveData:function(t,e){var i=t.getXHR().response;this.setData(i)},_failedData:function(t,e){o.error("Fastdata request has failed.")},nextView:function(){return this._viewIndex=(new Date).getTime(),this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},getSessionId:function(){return this._session},setSessionId:function(t){this._session=t},getParentIdVideo:function(){return this._session},getParentIdSession:function(){return this._parentId},setParentId:function(t){this._parentId=t},getSessionRoot:function(){return this._plugin.infinity&&this._plugin.infinity.isActive()?this._session:null},setSessionRoot:function(t){this._session=t},parse:function(t){t.host=t.host||this.response.host,t.params.system=this._plugin.getAccountCode(),t.params.sessionRoot=t.params.sessionRoot||this.getSessionRoot(),-1!==u.EventList.PingTime.indexOf(t.service)&&(t.params.pingTime=t.params.pingTime||this.response.pingTime),a.Service.SESSION_STOP===t.service&&(t.params.sessionRoot=this._session),-1===u.EventList.Infinity.indexOf(t.service)?(t.params.code=t.params.code||this.getViewCode(),t.params.sessionRoot||(t.params.sessionRoot=t.params.code)):(t.params.sessionId=t.params.sessionId||this.getSessionId(),t.params.sessionRoot||(t.params.sessionRoot=t.params.sessionId)),a.Service.BEAT===t.service&&(t.params.sessions='["'+(t.params.sessionId||this.getSessionId())+'"]'),-1!==[a.Service.START,a.Service.INIT,a.Service.ERROR].indexOf(t.service)&&this._plugin.storage.getLocal("infinityStarted")&&(t.params.parentId=t.params.parentId||this.getParentIdVideo(),t.params.navContext=t.params.navContext||this._plugin.getContext()),a.Service.SESSION_START===t.service&&(t.params.parentId=t.params.parentId||this.getParentIdSession())}},{EventList:{CreateView:[a.Service.START,a.Service.INIT,a.Service.ERROR],Infinity:[a.Service.NAV,a.Service.SESSION_START,a.Service.SESSION_STOP,a.Service.EVENT,a.Service.BEAT],PingTime:[a.Service.START,a.Service.PING]}});t.exports=u},function(t,e,i){var n=i(15),r=i(60),o=i(61),s=i(62),a=i(1),u=i(8),h=n.extend({constructor:function(t){h.__super__.constructor.apply(this,arguments),this.isDone=!1,this._plugin=t,this._realResource=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){return this._plugin&&this._plugin.options&&this._plugin.options["content.resource"]&&!this._plugin.options["parse.locationHeader"]&&!this._plugin.options["parse.hls"]?this._plugin.options["content.resource"]:this._realResource||this._initResource},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(t){this._isBusy||this.isDone||(this._isBusy=!0,this._initResource=t,this._hlsEnabled=this._plugin.isParseHls(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._locHeaderEnabled=this._plugin.isLocHeader(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),this._cdnNameHeader=this._plugin.getParseCdnNodeNameHeader(),o.setBalancerHeaderName(this._cdnNameHeader),this._setTimeout(),this._locHeaderEnabled&&this._parseLocHeader(),this._hlsEnabled?this._parseHLS():this._cdnEnabled?this._parseCDN():this.done())},done:function(){this.isDone=!1,n.prototype.done.apply(this,arguments)},_setTimeout:function(){this._parseTimeout=setTimeout(function(){this._isBusy&&(this.done(),a.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this),3e3)},_parseLocHeader:function(){var t=new s;t.parse(this._initResource),t.on(s.Event.DONE,function(){this._realResource=t.getResource(),this.done()}.bind(this))},_parseHLS:function(){var t=new r;t.on(r.Event.DONE,function(){this._realResource=t.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),t.parse(this._initResource)},_parseCDN:function(){if(this._cdnList.length>0){var t=this._cdnList.shift();if(this.getNodeHost())return;var e=o.create(t);e?(e.on(o.Event.DONE,function(){this._responses=e.getResponses(),this._cdnName=e.getParsedCdnName(),this._cdnNodeHost=e.getParsedNodeHost(),this._cdnNodeTypeString=e.getParsedNodeTypeString(),this._cdnNodeType=e.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),e.parse(this.getResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(t){if(t.service===u.Service.START){var e=this._plugin.requestBuilder.lastSent;e.mediaResource=t.params.mediaResource=this.getResource(),this._cdnEnabled&&(e.cdn=t.params.cdn=t.params.cdn||this.getCdnName(),e.nodeHost=t.params.nodeHost=this.getNodeHost(),e.nodeType=t.params.nodeType=this.getNodeType(),e.nodeTypeString=t.params.nodeTypeString=this.getNodeTypeString())}}});t.exports=h},function(t,e,i){var n=i(12),r=i(11),o=i(1),s=r.extend({constructor:function(){this._realResource=null},done:function(){this.emit(s.Event.DONE)},parse:function(t,e){e=e||"";try{var i=/((\S*?)(\.m3u8|\.m3u|\.ts|\.mp4)((\?|\;)\S*|\n|\r|$))/i.exec(t)}catch(t){o.warn("Parse HLS Regex failed",t),this.done()}if(null!==i){var r=i[1].trim(),s=e.lastIndexOf("/");if(0!==r.indexOf("http")&&-1!==s&&(r=e.slice(0,s)+"/"+r),".m3u8"===i[3]||".m3u"===i[3]){var a=new n(r,null,null,{cache:!0});a.on(n.Event.SUCCESS,function(t){this.parse(t.getXHR().responseText,i[2])}.bind(this)),a.on(n.Event.ERROR,function(t){this.done()}.bind(this)),a.send()}else this._realResource=r,this.done()}else this.done()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=s},function(t,e,i){var n=i(11),r=i(1),o=i(6),s=i(12),a=n.extend({constructor:function(t){this._options=o.assign({cdnName:null,parsers:[],requestHeaders:{},parseType:function(){return 0}},t),this._responses={}},done:function(){this.emit(a.Event.DONE)},addParser:function(t){return this._options.parsers.push(t),this},setCdnName:function(t){return this._options.cdnName=t,this},setRequestHeader:function(t,e){return this._options.requestHeaders[t]=e,this},setParseType:function(t){return this._options.parseType=t,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(t,e){this._responses=e||{};var i=JSON.stringify(this._options.requestHeaders);this._responses[i]?this._parseResponse(this._responses[i]):this._requestResponse(t)},_requestResponse:function(t){var e=JSON.stringify(this._options.requestHeaders),i=new s(t,null,null,{method:"HEAD",maxRetries:0,requestHeaders:this._options.requestHeaders});i.on(s.Event.SUCCESS,function(t){this._responses[e]=t.getXHR().getAllResponseHeaders(),this._parseResponse(this._responses[e])}.bind(this)),i.on(s.Event.ERROR,function(t){this.done()}.bind(this)),i.send()},_parseResponse:function(t){this._options.parsers.forEach(function(e){t.split("\n").forEach(function(t){var i=t.indexOf(":");-1!==i&&(t.slice(0,i)===e.headerName&&this._executeParser(e,t.slice(i+1)))}.bind(this))}.bind(this)),this.done()},_executeParser:function(t,e){try{var i=t.regex.exec(e.trim());if(null!==i)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),t.element){case a.ElementType.HOST:this._cdnNodeHost=i[1];break;case a.ElementType.TYPE:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case a.ElementType.HOST_AND_TYPE:this._cdnNodeHost=i[1],this._cdnNodeTypeString=i[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case a.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=i[2];break;case a.ElementType.NAME:this._cdnName=i[1].toUpperCase()}}catch(t){r.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+e)}}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(t){a._cdnConfigs.Balancer.parsers[0].headerName=t},create:function(t){if(a._cdnConfigs[t])return new a(a._cdnConfigs[t]);r.warn("Tried to create an unexisting CdnParser named "+t)},add:function(t,e){a._cdnConfigs[t]=e}});a.add("Level3",i(146)),a.add("Cloudfront",i(147)),a.add("Akamai",i(148)),a.add("Highwinds",i(149)),a.add("Fastly",i(150)),a.add("Telefonica",i(151)),a.add("Balancer",i(152)),t.exports=a},function(t,e,i){var n=i(11),r=(i(1),i(6),i(12)),o=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(o.Event.DONE)},parse:function(t){var e=new r(t,null,null,{method:"HEAD",maxRetries:0,requestHeaders:{},cache:!0});e.on(r.Event.SUCCESS,function(t){this._realResource=t.getXHR().responseURL,this.done()}.bind(this)),e.on(r.Event.ERROR,function(t){this.done()}.bind(this)),e.send()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=o},function(t,e,i){i(12);var n=i(15),r=(i(1),i(6),i(8),n.extend({constructor:function(t,e){this._sendRequest=!1,this._isBusy=!1,this.plugin=t,this.session=e,this.transformName="Offline"},parse:function(t){t&&this.plugin.offlineStorage.addEvent(t.service,t.params)},hasToSend:function(t){return!1},getState:function(){return n.STATE_OFFLINE}}));t.exports=r},function(t,e,i){var n=i(2).extend({constructor:function(t){this.enabled=!0,this.httpSecure=null,this.host="nqs.nice264.com",this.accountCode="nicetest",this.username=null,this.anonymousUser=null,this.obfuscateIp=!1,this.preventZombieViews=!0,this.userType=null,this.offline=!1,this.referer=null,this.experiments=[],this.disableCookies=!0,this["user.email"]=null,this["user.type"]=null,this["user.name"]=null,this["user.obfuscateIp"]=!1,this["user.anonymousId"]=null,this["parse.hls"]=!1,this["parse.cdnNameHeader"]="x-cdn-forward",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Cloudfront","Level3","Fastly","Highwinds","Telefonica"],this["parse.locationHeader"]=!1,this["network.ip"]=null,this["network.isp"]=null,this["network.connectionType"]=null,this["device.code"]=null,this["device.model"]=null,this["device.brand"]=null,this["device.type"]=null,this["device.name"]=null,this["device.osName"]=null,this["device.osVersion"]=null,this["device.browserName"]=null,this["device.browserVersion"]=null,this["device.browserType"]=null,this["device.browserEngine"]=null,this["content.transactionCode"]=null,this["content.resource"]=null,this["content.isLive"]=null,this["content.isLive.noSeek"]=!1,this["content.title"]=null,this["content.title2"]=null,this["content.program"]=null,this["content.duration"]=null,this["content.fps"]=null,this["content.bitrate"]=null,this["content.throughput"]=null,this["content.rendition"]=null,this["content.cdn"]=null,this["content.cdnNode"]=null,this["content.cdnType"]=null,this["content.metadata"]={},this["content.metrics"]={},this["content.streamingProtocol"]=null,this["content.package"]=null,this["content.saga"]=null,this["content.tvShow"]=null,this["content.season"]=null,this["content.episodeTitle"]=null,this["content.channel"]=null,this["content.id"]=null,this["content.imdbId"]=null,this["content.gracenoteId"]=null,this["content.type"]=null,this["content.genre"]=null,this["content.language"]=null,this["content.subtitles"]=null,this["content.contractedResolution"]=null,this["content.cost"]=null,this["content.price"]=null,this["content.playbackType"]=null,this["content.drm"]=null,this["content.encoding.videoCodec"]=null,this["content.encoding.audioCodec"]=null,this["content.encoding.codecSettings"]=null,this["content.encoding.codecProfile"]=null,this["content.encoding.containerFormat"]=null,this["ad.metadata"]={},this["ad.campaign"]=null,this["ad.resource"]=null,this["ad.title"]=null,this["ad.ignore"]=!1,this["ad.afterStop"]=0,this["app.name"]=null,this["app.releaseVersion"]=null,this["app.https"]=!1,this["background.enabled"]=!0,this["background.settings"]=null,this["background.settings.android"]="stop",this["background.settings.iphone"]="stop",this["background.settings.iOS"]=null,this["background.settings.desktop"]=null,this["background.settings.tv"]="stop",this["smartswitch.configCode"]=null,this["smartswitch.groupCode"]=null,this["smartswitch.contractCode"]=null,this["extraparam.1"]=null,this["extraparam.2"]=null,this["extraparam.3"]=null,this["extraparam.4"]=null,this["extraparam.5"]=null,this["extraparam.6"]=null,this["extraparam.7"]=null,this["extraparam.8"]=null,this["extraparam.9"]=null,this["extraparam.10"]=null,this["extraparam.11"]=null,this["extraparam.12"]=null,this["extraparam.13"]=null,this["extraparam.14"]=null,this["extraparam.15"]=null,this["extraparam.16"]=null,this["extraparam.17"]=null,this["extraparam.18"]=null,this["extraparam.19"]=null,this["extraparam.20"]=null,this["ad.extraparam.1"]=null,this["ad.extraparam.2"]=null,this["ad.extraparam.3"]=null,this["ad.extraparam.4"]=null,this["ad.extraparam.5"]=null,this["ad.extraparam.6"]=null,this["ad.extraparam.7"]=null,this["ad.extraparam.8"]=null,this["ad.extraparam.9"]=null,this["ad.extraparam.10"]=null,this["content.customDimension.1"]=null,this["content.customDimension.2"]=null,this["content.customDimension.3"]=null,this["content.customDimension.4"]=null,this["content.customDimension.5"]=null,this["content.customDimension.6"]=null,this["content.customDimension.7"]=null,this["content.customDimension.8"]=null,this["content.customDimension.9"]=null,this["content.customDimension.10"]=null,this["content.customDimension.11"]=null,this["content.customDimension.12"]=null,this["content.customDimension.13"]=null,this["content.customDimension.14"]=null,this["content.customDimension.15"]=null,this["content.customDimension.16"]=null,this["content.customDimension.17"]=null,this["content.customDimension.18"]=null,this["content.customDimension.19"]=null,this["content.customDimension.20"]=null,this["ad.customDimension.1"]=null,this["ad.customDimension.2"]=null,this["ad.customDimension.3"]=null,this["ad.customDimension.4"]=null,this["ad.customDimension.5"]=null,this["ad.customDimension.6"]=null,this["ad.customDimension.7"]=null,this["ad.customDimension.8"]=null,this["ad.customDimension.9"]=null,this["ad.customDimension.10"]=null,this.forceInit=!1,this["session.metrics"]={},this["session.context"]=!1,this.waitForMetadata=!1,this.pendingMetadata=[],this.setOptions(t)},setOptions:function(t,e){if(e=e||this,void 0!==t)for(var i in t)"object"==typeof e[i]&&null!==e[i]?this.setOptions(t[i],e[i]):e[i]=t[i]},setExtraParams:function(t){if("object"==typeof t&&t.length){for(t.length>=20&&(t=t.slice(0,20));t.length<20;)t.push(null);t.forEach(function(t,e){this["content.customDimension."+(e+1).toString()]=t}.bind(this))}},setCustomDimensions:function(){n.prototype.setExtraParams.apply(this,arguments)},setAdExtraParams:function(t){if("object"==typeof t&&t.length){for(t.length>=10&&(t=t.slice(0,10));t.length<10;)t.push(null);t.forEach(function(t,e){this["ad.customDimension."+(e+1).toString()]=t}.bind(this))}},setAdCustomDimensions:function(){n.prototype.setAdExtraParams.apply(this,arguments)}});t.exports=n},function(t,e,i){var n=i(2).extend({constructor:function(t){this.plugin=t,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(t){this.isBackgroundDetectorStarted?t!=this.windowObject&&(this.stopDetection(),this.isBackgroundDetectorStarted=!1,this.startDetection(t)):(t&&(this.windowObject=t),this.windowObject&&this.windowObject.document&&(this.isBackgroundDetectorStarted=!0,this.windowObject.document.addEventListener("visibilitychange",this.listenerReference)))},stopDetection:function(){this.isBackgroundDetectorStarted&&(this.windowObject.document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1,this.windowObject="undefined"!=typeof window?window:void 0},_visibilityListener:function(t){if("hidden"===this.windowObject.document.visibilityState){if(this.isInBackground=!0,"string"==typeof(i=this._getSettings())){switch(i){case"stop":this._fireStop();break;case"pause":this._firePause()}if(null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped")){this.lastBeatTime=(new Date).getTime();var e=this.plugin._beat.chrono.startTime?this.lastBeatTime-this.plugin._beat.chrono.startTime:0;this.plugin._sendBeat(e),this.plugin._beat.stop()}}}else if("visible"===this.windowObject.document.visibilityState){var i;if(this.isInBackground=!1,"string"==typeof(i=this._getSettings())&&i&&null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped")){var n=(new Date).getTime();n-this.lastBeatTime<this.plugin.sessionExpire?(this.plugin._sendBeat(n-this.lastBeatTime),this.plugin._beat.start()):(this.plugin.restartViewTransform(),this.plugin.infinity.begin())}}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iOS"]||this.plugin.options["background.settings.iphone"]:void 0},_firePause:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded?this.adsAdapter.firePause():this.contentAdapter&&this.contentAdapter.flags.isStarted&&!this.contentAdapter.flags.isEnded&&this.contentAdapter.firePause()},_fireStop:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded&&this.adsAdapter.fireStop(),this.contentAdapter?this.contentAdapter.fireStop({end:!0}):this.plugin.fireStop({end:!0})},canBlockStartCalls:function(){return this.plugin.backgroundDetector.isInBackground&&!0===this.plugin.options["background.enabled"]&&this.plugin.backgroundDetector._getSettings()}});t.exports=n},function(t,e,i){var n=i(2).extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTV=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTV&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTV)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTV}});t.exports=n},function(t,e,i){var n=i(157),r=i(2),o=i(158),s=r.extend({constructor:function(t){this.plugin=t,this.dataExtractor=new n,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var t=this.dataExtractor.getAllData();this.key=this._hashFunction(t),this.plugin.storage.setLocal("youboraFingerprint",this.key)}},generateHashUUID:function(){var t=this.dataExtractor.getNonRandomData();this.uuid=this._hashFunction(t)},getKey:function(){return this.key||this.generateHashKey(),this.key},getUUID:function(){return this.uuid||this.generateHashUUID(),this.uuid},_hashFunction:function(t){var e="";return e="string"!=typeof t?JSON.stringify(t):t,o(e)},_reset:function(){this.key=void 0},getPreviousKey:function(){return this.plugin.storage.getLocal("youboraFingerprint")}});t.exports=s},function(t,e,i){var n=i(2),r=i(29),o=i(20),s=n.extend({constructor:function(t,e,i){this._adapter=t,this._seekEnabled=e&s.Type.SEEK,this._bufferEnabled=e&s.Type.BUFFER,i=i||800,this._chrono=new o,this._lastPlayhead=0,i>0&&(this._timer=new r(this.progress.bind(this),i))},start:function(){this._timer.start()},stop:function(){this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var t=this._chrono.stop();this._chrono.start();var e=t*s.kBUFFER_THRESHOLD_RATIO,i=t*s.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!=this._adapter.getPlayrate()&&(e*=this._adapter.getPlayrate(),i*=this._adapter.getPlayrate());var n=this._getPlayhead(),r=1e3*Math.abs(this._lastPlayhead-n);r<e?this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1):r>i?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1):(this._seekEnabled&&this._adapter.fireSeekEnd(),this._bufferEnabled&&this._adapter.fireBufferEnd()),this._lastPlayhead=n},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});t.exports=s},function(t){t.exports={name:"bitmovin",type:"adapter",tech:"js",author:"Jesus Lopez",version:"6.4.1",built:"2019-01-03",repo:"https://bitbucket.org/npaw/bitmovin-adapter-js",libVersion:"^6.4.13",features:{buffer:"monitor",seek:"native",getters:["getPlayhead","getPlayrate","getDroppedFrames","getDuration","getBitrate","getRendition","getIsLive","getResource"]},ads:[{buffer:"monitor",seek:"monitor",getters:["getDuration","getPosition"],filename:"nativeads.js"}]}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-fullscreentogglebutton",text:"Fullscreen"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){e.isFullscreen()?n.on():n.off()};e.addEventHandler(e.EVENT.ON_FULLSCREEN_ENTER,r),e.addEventHandler(e.EVENT.ON_FULLSCREEN_EXIT,r),this.onClick.subscribe(function(){e.isFullscreen()?e.exitFullscreen():e.enterFullscreen()}),r()},e}(i(13).ToggleButton);e.FullscreenToggleButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-vrtogglebutton",text:"VR"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){var t=e.getConfig();return t.source&&t.source.vr&&"none"!==t.source.vr.contentType},o=function(){return"none"!==e.getVRStatus().contentType},s=function(){r()&&o()?(n.show(),e.getVRStatus().isStereo?n.on():n.off()):n.hide()},a=function(){r()?n.show():n.hide()};e.addEventHandler(e.EVENT.ON_VR_MODE_CHANGED,s),e.addEventHandler(e.EVENT.ON_VR_STEREO_CHANGED,s),e.addEventHandler(e.EVENT.ON_VR_ERROR,s),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,a),e.addEventHandler(e.EVENT.ON_READY,a),this.onClick.subscribe(function(){o()?e.getVRStatus().isStereo?e.setVRStereo(!1):e.setVRStereo(!0):console&&console.log("No VR content")}),a()},e}(i(13).ToggleButton);e.VRToggleButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(0),o=i(14),s=i(22),a=i(19);!function(t){t[t.CurrentTime=0]="CurrentTime",t[t.TotalTime=1]="TotalTime",t[t.CurrentAndTotalTime=2]="CurrentAndTotalTime"}(n=e.PlaybackTimeLabelMode||(e.PlaybackTimeLabelMode={}));var u=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-playbacktimelabel",timeLabelMode:n.CurrentAndTotalTime,hideInLivePlayback:!1},i.config),i}return r.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig(),o=!1,u=this.prefixCss("ui-playbacktimelabel-live"),h=this.prefixCss("ui-playbacktimelabel-live-edge"),c=0,l=function(){e.timeShift(0)},f=function(){if(o){var t=e.getTimeShift()<0,i=e.getMaxTimeShift()<0;t||e.isPaused()&&i?n.getDomElement().removeClass(h):n.getDomElement().addClass(h)}},p=new s.PlayerUtils.LiveStreamDetector(e);p.onLiveChanged.subscribe(function(t,i){o=i.live,(o=e.isLive())?(n.getDomElement().addClass(u),n.setText("Live"),r.hideInLivePlayback&&n.hide(),n.onClick.subscribe(l),f()):(n.getDomElement().removeClass(u),n.getDomElement().removeClass(h),n.show(),n.onClick.unsubscribe(l))}),p.detect();var d=function(){o||e.getDuration()===1/0||n.setTime(e.getCurrentTime(),e.getDuration());var t=n.getDomElement().width();t>c&&(c=t,n.getDomElement().css({"min-width":c+"px"}))};e.addEventHandler(e.EVENT.ON_TIME_CHANGED,d),e.addEventHandler(e.EVENT.ON_SEEKED,d),e.addEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,d),e.addEventHandler(e.EVENT.ON_TIME_SHIFT,f),e.addEventHandler(e.EVENT.ON_TIME_SHIFTED,f),e.addEventHandler(e.EVENT.ON_PLAY,f),e.addEventHandler(e.EVENT.ON_PAUSED,f);var g=function(){c=0,n.getDomElement().css({"min-width":null}),n.timeFormat=Math.abs(e.isLive()?e.getMaxTimeShift():e.getDuration())>=3600?a.StringUtils.FORMAT_HHMMSS:a.StringUtils.FORMAT_MMSS,d()};e.addEventHandler(e.EVENT.ON_READY,g),g()},e.prototype.setTime=function(t,e){var i=a.StringUtils.secondsToTime(t,this.timeFormat),r=a.StringUtils.secondsToTime(e,this.timeFormat);switch(this.config.timeLabelMode){case n.CurrentTime:this.setText(""+i);break;case n.TotalTime:this.setText(""+r);break;case n.CurrentAndTotalTime:this.setText(i+" / "+r)}},e.prototype.setTimeFormat=function(t){this.timeFormat=t},e}(o.Label);e.PlaybackTimeLabel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){var i=t.call(this,e)||this;if(!e.settingsPanel)throw new Error("Required SettingsPanel is missing");return i.config=i.mergeConfig(e,{cssClass:"ui-settingstogglebutton",text:"Settings",settingsPanel:null,autoHideWhenNoActiveSettings:!0},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig(),o=r.settingsPanel;if(this.onClick.subscribe(function(){o.toggleHidden()}),o.onShow.subscribe(function(){n.on()}),o.onHide.subscribe(function(){n.off()}),r.autoHideWhenNoActiveSettings){var s=function(){o.hasActiveSettings()?n.isHidden()&&n.show():n.isShown()&&n.hide()};o.onSettingsStateChanged.subscribe(s),s()}},e}(i(13).ToggleButton);e.SettingsToggleButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(5),o=i(9),s=i(21),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.listSelectorEvents={onItemAdded:new o.EventDispatcher,onItemRemoved:new o.EventDispatcher,onItemSelected:new o.EventDispatcher},i.config=i.mergeConfig(e,{items:[],cssClass:"ui-listselector"},i.config),i.items=i.config.items,i}return n.__extends(e,t),e.prototype.getItemIndex=function(t){for(var e in this.items)if(t===this.items[e].key)return parseInt(e);return-1},e.prototype.hasItem=function(t){return this.getItemIndex(t)>-1},e.prototype.addItem=function(t,e){var i={key:t,label:e};this.config.filter&&!this.config.filter(i)||(this.config.translator&&(i.label=this.config.translator(i)),this.removeItem(t),this.items.push(i),this.onItemAddedEvent(t))},e.prototype.removeItem=function(t){var e=this.getItemIndex(t);return e>-1&&(s.ArrayUtils.remove(this.items,this.items[e]),this.onItemRemovedEvent(t),!0)},e.prototype.selectItem=function(t){return t===this.selectedItem||this.getItemIndex(t)>-1&&(this.selectedItem=t,this.onItemSelectedEvent(t),!0)},e.prototype.getSelectedItem=function(){return this.selectedItem},e.prototype.clearItems=function(){var t=this.items;this.items=[],this.selectedItem=null;for(var e=0,i=t;e<i.length;e++){var n=i[e];this.onItemRemovedEvent(n.key)}},e.prototype.itemCount=function(){return Object.keys(this.items).length},e.prototype.onItemAddedEvent=function(t){this.listSelectorEvents.onItemAdded.dispatch(this,t)},e.prototype.onItemRemovedEvent=function(t){this.listSelectorEvents.onItemRemoved.dispatch(this,t)},e.prototype.onItemSelectedEvent=function(t){this.listSelectorEvents.onItemSelected.dispatch(this,t)},Object.defineProperty(e.prototype,"onItemAdded",{get:function(){return this.listSelectorEvents.onItemAdded.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onItemRemoved",{get:function(){return this.listSelectorEvents.onItemRemoved.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onItemSelected",{get:function(){return this.listSelectorEvents.onItemSelected.getEvent()},enumerable:!0,configurable:!0}),e}(r.Component);e.ListSelector=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(42),o=i(76),s=i(77),a=i(78),u=i(79),h=i(80),c=i(81),l=i(82),f=i(83),p=i(84),d=i(175),g=i(86),v=i(87),y=function(t){function e(e){var i=t.call(this,e)||this;i.overlay=e.overlay;var n=new d.SubtitleSettingsManager;return i.config=i.mergeConfig(e,{components:[new r.SettingsPanelItem("Font size",new u.FontSizeSelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Font family",new a.FontFamilySelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Font color",new o.FontColorSelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Font opacity",new s.FontOpacitySelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Character edge",new p.CharacterEdgeSelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Background color",new h.BackgroundColorSelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Background opacity",new c.BackgroundOpacitySelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Window color",new l.WindowColorSelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Window opacity",new f.WindowOpacitySelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem(new g.SubtitleSettingsCloseButton({subtitleSettingsPanel:i,settingsPanel:e.settingsPanel}),new v.SubtitleSettingsResetButton({settingsManager:n}))]},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.onShow.subscribe(function(){n.overlay.enablePreviewSubtitleLabel()}),this.onHide.subscribe(function(){n.overlay.removePreviewSubtitleLabel()})},e}(r.SettingsPanel);e.SubtitleSettingsPanel=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("white","white"),this.addItem("black","black"),this.addItem("red","red"),this.addItem("green","green"),this.addItem("blue","blue"),this.addItem("cyan","cyan"),this.addItem("yellow","yellow"),this.addItem("magenta","magenta");var r=function(){n.settingsManager.fontColor.isSet()&&n.settingsManager.fontOpacity.isSet()?n.toggleOverlayClass("fontcolor-"+n.settingsManager.fontColor.value+n.settingsManager.fontOpacity.value):n.toggleOverlayClass(null)};this.onItemSelected.subscribe(function(t,e){n.settingsManager.fontColor.value=e}),this.settingsManager.fontColor.onChanged.subscribe(function(t,e){n.settingsManager.fontColor.isSet()?n.settingsManager.fontOpacity.isSet()||(n.settingsManager.fontOpacity.value="100"):n.settingsManager.fontOpacity.clear(),n.selectItem(e.value),r()}),this.settingsManager.fontOpacity.onChanged.subscribe(function(){r()}),this.settingsManager.fontColor.isSet()&&this.selectItem(this.settingsManager.fontColor.value)},e}(i(10).SubtitleSettingSelectBox);e.FontColorSelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("100","100%"),this.addItem("75","75%"),this.addItem("50","50%"),this.addItem("25","25%"),this.onItemSelected.subscribe(function(t,e){n.settingsManager.fontOpacity.value=e,n.settingsManager.fontOpacity.isSet()?n.settingsManager.fontColor.isSet()||(n.settingsManager.fontColor.value="white"):n.settingsManager.fontColor.clear()}),this.settingsManager.fontOpacity.onChanged.subscribe(function(t,e){n.selectItem(e.value)}),this.settingsManager.fontOpacity.isSet()&&this.selectItem(this.settingsManager.fontOpacity.value)},e}(i(10).SubtitleSettingSelectBox);e.FontOpacitySelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("monospacedserif","monospaced serif"),this.addItem("proportionalserif","proportional serif"),this.addItem("monospacedsansserif","monospaced sans serif"),this.addItem("proportionalsansserif","proportional sans serif"),this.addItem("casual","casual"),this.addItem("cursive","cursive"),this.addItem("smallcapital","small capital"),this.settingsManager.fontFamily.onChanged.subscribe(function(t,e){e.isSet()?n.toggleOverlayClass("fontfamily-"+e.value):n.toggleOverlayClass(null),n.selectItem(e.value)}),this.onItemSelected.subscribe(function(t,e){n.settingsManager.fontFamily.value=e}),this.settingsManager.fontFamily.isSet()&&this.selectItem(this.settingsManager.fontFamily.value)},e}(i(10).SubtitleSettingSelectBox);e.FontFamilySelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("50","50%"),this.addItem("75","75%"),this.addItem("100","100%"),this.addItem("150","150%"),this.addItem("200","200%"),this.addItem("300","300%"),this.addItem("400","400%"),this.settingsManager.fontSize.onChanged.subscribe(function(t,e){e.isSet()?n.toggleOverlayClass("fontsize-"+e.value):n.toggleOverlayClass(null),n.selectItem(e.value)}),this.onItemSelected.subscribe(function(t,e){n.settingsManager.fontSize.value=e}),this.settingsManager.fontSize.isSet()&&this.selectItem(this.settingsManager.fontSize.value)},e}(i(10).SubtitleSettingSelectBox);e.FontSizeSelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("white","white"),this.addItem("black","black"),this.addItem("red","red"),this.addItem("green","green"),this.addItem("blue","blue"),this.addItem("cyan","cyan"),this.addItem("yellow","yellow"),this.addItem("magenta","magenta");var r=function(){n.settingsManager.backgroundColor.isSet()&&n.settingsManager.backgroundOpacity.isSet()?n.toggleOverlayClass("bgcolor-"+n.settingsManager.backgroundColor.value+n.settingsManager.backgroundOpacity.value):n.toggleOverlayClass(null)};this.onItemSelected.subscribe(function(t,e){n.settingsManager.backgroundColor.value=e}),this.settingsManager.backgroundColor.onChanged.subscribe(function(t,e){n.settingsManager.backgroundColor.isSet()?n.settingsManager.backgroundOpacity.isSet()||(n.settingsManager.backgroundOpacity.value="100"):n.settingsManager.backgroundOpacity.clear(),n.selectItem(e.value),r()}),this.settingsManager.backgroundOpacity.onChanged.subscribe(function(){r()}),this.settingsManager.backgroundColor.isSet()&&this.selectItem(this.settingsManager.backgroundColor.value)},e}(i(10).SubtitleSettingSelectBox);e.BackgroundColorSelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("100","100%"),this.addItem("75","75%"),this.addItem("50","50%"),this.addItem("25","25%"),this.addItem("0","0%"),this.onItemSelected.subscribe(function(t,e){n.settingsManager.backgroundOpacity.value=e,n.settingsManager.backgroundOpacity.isSet()?n.settingsManager.backgroundColor.isSet()||(n.settingsManager.backgroundColor.value="black"):n.settingsManager.backgroundColor.clear()}),this.settingsManager.backgroundOpacity.onChanged.subscribe(function(t,e){n.selectItem(e.value)}),this.settingsManager.backgroundOpacity.isSet()&&this.selectItem(this.settingsManager.backgroundOpacity.value)},e}(i(10).SubtitleSettingSelectBox);e.BackgroundOpacitySelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("white","white"),this.addItem("black","black"),this.addItem("red","red"),this.addItem("green","green"),this.addItem("blue","blue"),this.addItem("cyan","cyan"),this.addItem("yellow","yellow"),this.addItem("magenta","magenta");var r=function(){n.settingsManager.windowColor.isSet()&&n.settingsManager.windowOpacity.isSet()?n.toggleOverlayClass("windowcolor-"+n.settingsManager.windowColor.value+n.settingsManager.windowOpacity.value):n.toggleOverlayClass(null)};this.onItemSelected.subscribe(function(t,e){n.settingsManager.windowColor.value=e}),this.settingsManager.windowColor.onChanged.subscribe(function(t,e){n.settingsManager.windowColor.isSet()?n.settingsManager.windowOpacity.isSet()||(n.settingsManager.windowOpacity.value="100"):n.settingsManager.windowOpacity.clear(),n.selectItem(e.value),r()}),this.settingsManager.windowOpacity.onChanged.subscribe(function(){r()}),this.settingsManager.windowColor.isSet()&&this.selectItem(this.settingsManager.windowColor.value)},e}(i(10).SubtitleSettingSelectBox);e.WindowColorSelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("100","100%"),this.addItem("75","75%"),this.addItem("50","50%"),this.addItem("25","25%"),this.addItem("0","0%"),this.onItemSelected.subscribe(function(t,e){n.settingsManager.windowOpacity.value=e,n.settingsManager.windowOpacity.isSet()?n.settingsManager.windowColor.isSet()||(n.settingsManager.windowColor.value="black"):n.settingsManager.windowColor.clear()}),this.settingsManager.windowOpacity.onChanged.subscribe(function(t,e){n.selectItem(e.value)}),this.settingsManager.windowOpacity.isSet()&&this.selectItem(this.settingsManager.windowOpacity.value)},e}(i(10).SubtitleSettingSelectBox);e.WindowOpacitySelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("raised","raised"),this.addItem("depressed","depressed"),this.addItem("uniform","uniform"),this.addItem("dropshadowed","drop shadowed"),this.settingsManager.characterEdge.onChanged.subscribe(function(t,e){e.isSet()?n.toggleOverlayClass("characteredge-"+e.value):n.toggleOverlayClass(null),n.selectItem(e.value)}),this.onItemSelected.subscribe(function(t,e){n.settingsManager.characterEdge.value=e}),this.settingsManager.characterEdge.isSet()&&this.selectItem(this.settingsManager.characterEdge.value)},e}(i(10).SubtitleSettingSelectBox);e.CharacterEdgeSelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e;function i(e,i){t.hasLocalStorage()&&window.localStorage.setItem(e,i)}function n(e){return t.hasLocalStorage()?window.localStorage.getItem(e):null}t.hasLocalStorage=function(){if(e)return e;var t=window.localStorage;try{var i="__storage_test__";t.setItem(i,i),t.removeItem(i),e=!0}catch(i){e=i instanceof DOMException&&(22===i.code||1014===i.code||"QuotaExceededError"===i.name||"NS_ERROR_DOM_QUOTA_REACHED"===i.name)&&0!==t.length}return e},t.setItem=i,t.getItem=n,t.setObject=function(e,n){t.hasLocalStorage()&&i(e,JSON.stringify(n))},t.getObject=function(e){if(t.hasLocalStorage()){var i=n(e);if(e)return JSON.parse(i)}return null}}(e.StorageUtils||(e.StorageUtils={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitlesettingsclosebutton",text:"Back"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe(function(){n.subtitleSettingsPanel.hide(),n.settingsPanel.show()})},e}(i(45).SubtitleSettingsButton);e.SubtitleSettingsCloseButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitlesettingsresetbutton",text:"Reset"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe(function(){n.config.settingsManager.reset()})},e}(i(16).Button);e.SubtitleSettingsResetButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(4),s=function(t){function e(e){var i=t.call(this,e)||this;return i.opener=e.opener,i.text=e.text,i.config=i.mergeConfig(e,{cssClass:"ui-label",components:[i.opener]},i.config),i}return n.__extends(e,t),e.prototype.toDomElement=function(){return new o.DOM("span",{id:this.config.id,class:this.getCssClasses()}).append(new o.DOM("span",{}).html(this.text),this.opener.getDomElement())},e}(r.Container);e.SubtitleSettingsLabel=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitlesettingsopenbutton",text:"Subtitles settings"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe(function(){n.subtitleSettingsPanel.show(),n.settingsPanel.hide()})},e}(i(45).SubtitleSettingsButton);e.SubtitleSettingsOpenButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){var t=e.getAudio();t&&n.selectItem(t.id)},o=function(){var t=e.getAvailableAudio();n.clearItems();for(var i=0,o=t;i<o.length;i++){var s=o[i];n.addItem(s.id,s.label)}r()};this.onItemSelected.subscribe(function(t,i){e.setAudio(i)}),e.addEventHandler(e.EVENT.ON_AUDIO_CHANGED,r),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),e.EVENT.ON_AUDIO_ADDED&&e.EVENT.ON_AUDIO_REMOVED&&(e.addEventHandler(e.EVENT.ON_AUDIO_ADDED,o),e.addEventHandler(e.EVENT.ON_AUDIO_REMOVED,o)),o()},e}(i(17).SelectBox);e.AudioTrackSelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(14),s=i(5),a=i(19),u=i(176),h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.timeLabel=new o.Label({cssClasses:["seekbar-label-time"]}),i.titleLabel=new o.Label({cssClasses:["seekbar-label-title"]}),i.thumbnail=new s.Component({cssClasses:["seekbar-thumbnail"]}),i.thumbnailImageLoader=new u.ImageLoader,i.config=i.mergeConfig(e,{cssClass:"ui-seekbar-label",components:[new r.Container({components:[i.thumbnail,new r.Container({components:[i.titleLabel,i.timeLabel],cssClass:"seekbar-label-metadata"})],cssClass:"seekbar-label-inner"})],hidden:!0},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=[];i.onSeekPreview.subscribeRateLimited(function(t,i){if(e.isLive()){var o=e.getMaxTimeShift(),s=o-o*(i.position/100);n.setTime(s)}else{i.marker?n.setTitleText(i.marker.marker.title):n.setTitleText(null);s=e.getDuration()*(i.position/100);n.setTime(s),n.setThumbnail(e.getThumb(s))}if(r.length>0&&(n.getDomElement().removeClass(r.join(" ")),r=[]),i.marker){var a=(i.marker.marker.cssClasses||[]).map(function(t){return n.prefixCss(t)});n.getDomElement().addClass(a.join(" ")),r=a}},100);var o=function(){n.timeFormat=Math.abs(e.isLive()?e.getMaxTimeShift():e.getDuration())>=3600?a.StringUtils.FORMAT_HHMMSS:a.StringUtils.FORMAT_MMSS};e.addEventHandler(e.EVENT.ON_READY,o),o()},e.prototype.setText=function(t){this.timeLabel.setText(t)},e.prototype.setTime=function(t){this.setText(a.StringUtils.secondsToTime(t,this.timeFormat))},e.prototype.setTitleText=function(t){this.titleLabel.setText(t)},e.prototype.setThumbnail=function(t){void 0===t&&(t=null);var e=this.thumbnail.getDomElement();null==t?e.css({"background-image":null,display:null,width:null,height:null}):this.thumbnailImageLoader.load(t.url,function(i,n,r){var o=100*(n/t.w),s=100*(r/t.h),a=100*(t.x/t.w),u=100*(t.y/t.h),h=1/t.w*t.h;e.css({display:"inherit","background-image":"url("+t.url+")","padding-bottom":100*h+"%","background-size":o+"% "+s+"%","background-position":"-"+a+"% -"+u+"%"})})},e}(r.Container);e.SeekBarLabel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){var t=e.getSubtitle();t&&n.selectItem(t.id)},o=function(){n.clearItems();for(var t=0,i=e.getAvailableSubtitles();t<i.length;t++){var o=i[t];n.addItem(o.id,o.label)}r()};this.onItemSelected.subscribe(function(t,i){e.setSubtitle("null"===i?null:i)}),e.addEventHandler(e.EVENT.ON_SUBTITLE_ADDED,o),e.addEventHandler(e.EVENT.ON_SUBTITLE_CHANGED,r),e.addEventHandler(e.EVENT.ON_SUBTITLE_REMOVED,o),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),o()},e}(i(17).SelectBox);e.SubtitleSelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(14),s=i(39),a=i(9),u=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.preprocessLabelEventCallback=new a.EventDispatcher,i.previewSubtitleActive=!1,i.previewSubtitle=new h({text:"example subtitle"}),i.config=i.mergeConfig(e,{cssClass:"ui-subtitle-overlay"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(i,n){var r=this;t.prototype.configure.call(this,i,n);var o=new c;this.subtitleManager=o,i.addEventHandler(i.EVENT.ON_CUE_ENTER,function(t){t.position&&(t.position.row=t.position.row||0,t.position.column=t.position.column||0);var e=o.cueEnter(t);r.preprocessLabelEventCallback.dispatch(t,e),r.previewSubtitleActive&&r.removeComponent(r.previewSubtitle),r.addComponent(e),r.updateComponents(),r.show()}),i.addEventHandler(i.EVENT.ON_CUE_EXIT,function(t){var e=o.cueExit(t);e&&(r.removeComponent(e),r.updateComponents()),o.hasCues||(r.previewSubtitleActive?(r.addComponent(r.previewSubtitle),r.updateComponents()):r.hide())});var a=function(){r.hide(),o.clear(),r.removeComponents(),r.updateComponents()};i.addEventHandler(i.EVENT.ON_AUDIO_CHANGED,a),i.addEventHandler(i.EVENT.ON_SUBTITLE_CHANGED,a),i.addEventHandler(i.EVENT.ON_SEEK,a),i.addEventHandler(i.EVENT.ON_TIME_SHIFT,a),i.addEventHandler(i.EVENT.ON_PLAYBACK_FINISHED,a),i.addEventHandler(i.EVENT.ON_SOURCE_UNLOADED,a),n.onComponentShow.subscribe(function(t){t instanceof s.ControlBar&&r.getDomElement().addClass(r.prefixCss(e.CLASS_CONTROLBAR_VISIBLE))}),n.onComponentHide.subscribe(function(t){t instanceof s.ControlBar&&r.getDomElement().removeClass(r.prefixCss(e.CLASS_CONTROLBAR_VISIBLE))}),this.configureCea608Captions(i,n),a()},e.prototype.configureCea608Captions=function(t,i){var n=this,r=0,o=0,s=!0,a=!1,u=function(){var t=new h({text:"X"});t.getDomElement().css({"font-size":"200px","line-height":"200px",visibility:"hidden"}),n.addComponent(t),n.updateComponents(),n.show();var i=t.getDomElement().width(),s=t.getDomElement().height(),a=i/s;n.removeComponent(t),n.updateComponents(),n.subtitleManager.hasCues||n.hide();var u=n.getDomElement().width()-10,c=n.getDomElement().height();if(u/c>i*e.CEA608_NUM_COLUMNS/(s*e.CEA608_NUM_ROWS)){r=c/e.CEA608_NUM_ROWS;var l=u/e.CEA608_NUM_COLUMNS;o=l-r*a}else r=u/e.CEA608_NUM_COLUMNS/a,o=0;for(var f=0,p=n.getComponents();f<p.length;f++){var d=p[f];d instanceof h&&d.getDomElement().css({"font-size":r+"px","letter-spacing":o+"px"})}};t.addEventHandler(t.EVENT.ON_PLAYER_RESIZE,function(){a?u():s=!0}),this.preprocessLabelEventCallback.subscribe(function(t,i){null!=t.position&&(a||(a=!0,n.getDomElement().addClass(n.prefixCss(e.CLASS_CEA_608)),s&&(u(),s=!1)),i.getDomElement().css({left:t.position.column*e.CEA608_COLUMN_OFFSET+"%",top:t.position.row*e.CEA608_ROW_OFFSET+"%","font-size":r+"px","letter-spacing":o+"px"}))});var c=function(){n.getDomElement().removeClass(n.prefixCss(e.CLASS_CEA_608)),a=!1};t.addEventHandler(t.EVENT.ON_CUE_EXIT,function(){n.subtitleManager.hasCues||c()}),t.addEventHandler(t.EVENT.ON_SOURCE_UNLOADED,c),t.addEventHandler(t.EVENT.ON_SUBTITLE_CHANGED,c)},e.prototype.enablePreviewSubtitleLabel=function(){this.previewSubtitleActive=!0,this.subtitleManager.hasCues||(this.addComponent(this.previewSubtitle),this.updateComponents(),this.show())},e.prototype.removePreviewSubtitleLabel=function(){this.previewSubtitleActive=!1,this.removeComponent(this.previewSubtitle),this.updateComponents()},e.CLASS_CONTROLBAR_VISIBLE="controlbar-visible",e.CLASS_CEA_608="cea608",e.CEA608_NUM_ROWS=15,e.CEA608_NUM_COLUMNS=32,e.CEA608_ROW_OFFSET=100/e.CEA608_NUM_ROWS,e.CEA608_COLUMN_OFFSET=100/e.CEA608_NUM_COLUMNS,e}(r.Container);e.SubtitleOverlay=u;var h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitle-label"},i.config),i}return n.__extends(e,t),e}(o.Label),c=function(){function t(){this.activeSubtitleCueMap={},this.activeSubtitleCueCount=0}return t.calculateId=function(t){var e=t.start+"-"+t.text;return t.position&&(e+="-"+t.position.row+"-"+t.position.column),e},t.prototype.cueEnter=function(e){var i=t.calculateId(e),n=new h({text:e.html||e.text});return this.activeSubtitleCueMap[i]=this.activeSubtitleCueMap[i]||[],this.activeSubtitleCueMap[i].push({event:e,label:n}),this.activeSubtitleCueCount++,n},t.prototype.getCues=function(e){var i=t.calculateId(e),n=this.activeSubtitleCueMap[i];return n&&n.length>0?n.map(function(t){return t.label}):null},t.prototype.cueExit=function(e){var i=t.calculateId(e),n=this.activeSubtitleCueMap[i];if(n&&n.length>0){var r=n.shift();return this.activeSubtitleCueCount--,r.label}return null},Object.defineProperty(t.prototype,"cueCount",{get:function(){return this.activeSubtitleCueCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasCues",{get:function(){return this.cueCount>0},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.activeSubtitleCueMap={},this.activeSubtitleCueCount=0},t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-casttogglebutton",text:"Google Cast"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe(function(){e.isCastAvailable()?e.isCasting()?e.castStop():e.castVideo():console&&console.log("Cast unavailable")});var r=function(){e.isCastAvailable()?n.show():n.hide()};e.addEventHandler(e.EVENT.ON_CAST_AVAILABLE,r),e.addEventHandler(e.EVENT.ON_CAST_WAITING_FOR_DEVICE,function(){n.on()}),e.addEventHandler(e.EVENT.ON_CAST_STARTED,function(){n.on()}),e.addEventHandler(e.EVENT.ON_CAST_STOPPED,function(){n.off()}),r(),e.isCasting()&&this.on()},e}(i(13).ToggleButton);e.CastToggleButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(14),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.statusLabel=new o.Label({cssClass:"ui-cast-status-label"}),i.config=i.mergeConfig(e,{cssClass:"ui-cast-status-overlay",components:[i.statusLabel],hidden:!0},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),e.addEventHandler(e.EVENT.ON_CAST_WAITING_FOR_DEVICE,function(t){n.show();var e=t.castPayload.deviceName;n.statusLabel.setText("Connecting to <strong>"+e+"</strong>...")}),e.addEventHandler(e.EVENT.ON_CAST_STARTED,function(t){n.show();var e=t.deviceName;n.statusLabel.setText("Playing on <strong>"+e+"</strong>")}),e.addEventHandler(e.EVENT.ON_CAST_STOPPED,function(t){n.hide()})},e}(r.Container);e.CastStatusOverlay=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(14),s=i(177),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.errorLabel=new o.Label({cssClass:"ui-errormessage-label"}),i.tvNoiseBackground=new s.TvNoiseCanvas,i.config=i.mergeConfig(e,{cssClass:"ui-errormessage-overlay",components:[i.tvNoiseBackground,i.errorLabel],hidden:!0},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig();e.addEventHandler(e.EVENT.ON_ERROR,function(t){var e=t.message;if(r.messages)if("function"==typeof r.messages)e=r.messages(t);else if(r.messages[t.code]){var i=r.messages[t.code];e="string"==typeof i?i:i(t)}n.errorLabel.setText(e),n.tvNoiseBackground.start(),n.show()}),e.addEventHandler(e.EVENT.ON_SOURCE_LOADED,function(t){n.isShown()&&(n.tvNoiseBackground.stop(),n.hide())})},e.prototype.release=function(){t.prototype.release.call(this),this.tvNoiseBackground.stop()},e}(r.Container);e.ErrorMessageOverlay=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(47),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-titlebar",hidden:!0,components:[new o.MetadataLabel({content:o.MetadataLabelContent.Title}),new o.MetadataLabel({content:o.MetadataLabelContent.Description})],keepHiddenWithoutMetadata:!1},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);for(var r=this.getConfig(),s=!this.isHidden(),a=!0,u=function(){a=!1;for(var t=0,e=n.getComponents();t<e.length;t++){var i=e[t];if(i instanceof o.MetadataLabel&&!i.isEmpty()){a=!0;break}}n.isShown()?r.keepHiddenWithoutMetadata&&!a&&n.hide():s&&n.show()},h=0,c=this.getComponents();h<c.length;h++){var l=c[h];l instanceof o.MetadataLabel&&l.onTextChanged.subscribe(u)}i.onControlsShow.subscribe(function(){s=!0,r.keepHiddenWithoutMetadata&&!a||n.show()}),i.onControlsHide.subscribe(function(){s=!1,n.hide()}),u()},e}(r.Container);e.TitleBar=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(5),s=i(4),a=i(19),u=i(99),h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.replayButton=new u.HugeReplayButton,i.config=i.mergeConfig(e,{cssClass:"ui-recommendation-overlay",hidden:!0,components:[i.replayButton]},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){for(var t=0,e=n.getComponents().slice();t<e.length;t++){var i=e[t];i instanceof c&&n.removeComponent(i)}n.updateComponents(),n.getDomElement().removeClass(n.prefixCss("recommendations"))},o=function(){r();var t=i.getConfig().recommendations;if(t.length>0){for(var e=1,o=0,s=t;o<s.length;o++){var a=s[o];n.addComponent(new c({itemConfig:a,cssClasses:["recommendation-item-"+e++]}))}n.updateComponents(),n.getDomElement().addClass(n.prefixCss("recommendations"))}};e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,function(){r(),n.hide()}),e.addEventHandler(e.EVENT.ON_PLAYBACK_FINISHED,function(){e.isAd()||n.show()}),e.addEventHandler(e.EVENT.ON_PLAY,function(){n.hide()}),o()},e}(r.Container);e.RecommendationOverlay=h;var c=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-recommendation-item",itemConfig:null},i.config),i}return n.__extends(e,t),e.prototype.toDomElement=function(){var t=this.config.itemConfig,e=new s.DOM("a",{id:this.config.id,class:this.getCssClasses(),href:t.url}).css({"background-image":"url("+t.thumbnail+")"}),i=new s.DOM("div",{class:this.prefixCss("background")});e.append(i);var n=new s.DOM("span",{class:this.prefixCss("title")}).append(new s.DOM("span",{class:this.prefixCss("innertitle")}).html(t.title));e.append(n);var r=new s.DOM("span",{class:this.prefixCss("duration")}).append(new s.DOM("span",{class:this.prefixCss("innerduration")}).html(t.duration?a.StringUtils.secondsToTime(t.duration):""));return e.append(r),e},e}(o.Component)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(16),o=i(4),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-hugereplaybutton",text:"Replay"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i),this.onClick.subscribe(function(){e.play("ui")})},e.prototype.toDomElement=function(){var e=t.prototype.toDomElement.call(this);return e.append(new o.DOM("div",{class:this.prefixCss("image")})),e},e}(r.Button);e.HugeReplayButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.defaultPlaybackSpeeds=[.25,.5,1,1.5,2],i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addDefaultItems(),this.onItemSelected.subscribe(function(t,i){e.setPlaybackSpeed(parseFloat(i)),n.selectItem(i)});var r=function(){var t=e.getPlaybackSpeed();n.setSpeed(t)};e.addEventHandler(e.EVENT.ON_READY,r),e.EVENT.ON_PLAYBACK_SPEED_CHANGED&&e.addEventHandler(e.EVENT.ON_PLAYBACK_SPEED_CHANGED,r)},e.prototype.setSpeed=function(t){this.selectItem(String(t))||(this.clearItems(),this.addDefaultItems([t]),this.selectItem(String(t)))},e.prototype.addDefaultItems=function(t){var e=this;void 0===t&&(t=[]),this.defaultPlaybackSpeeds.concat(t).sort().forEach(function(t){1!==t?e.addItem(String(t),t+"x"):e.addItem(String(t),"Normal")})},e.prototype.clearItems=function(){this.items=[],this.selectedItem=null},e}(i(17).SelectBox);e.PlaybackSpeedSelectBox=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(5),s=i(18),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.indicators=[new o.Component({tag:"div",cssClass:"ui-buffering-overlay-indicator"}),new o.Component({tag:"div",cssClass:"ui-buffering-overlay-indicator"}),new o.Component({tag:"div",cssClass:"ui-buffering-overlay-indicator"})],i.config=i.mergeConfig(e,{cssClass:"ui-buffering-overlay",hidden:!0,components:i.indicators,showDelayMs:1e3},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig(),o=new s.Timeout(r.showDelayMs,function(){n.show()}),a=function(){o.clear(),n.hide()};e.addEventHandler(e.EVENT.ON_STALL_STARTED,function(){o.start()}),e.addEventHandler(e.EVENT.ON_STALL_ENDED,a),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,a),e.isStalled()&&this.show()},e}(r.Container);e.BufferingOverlay=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(103),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.playbackToggleButton=new o.HugePlaybackToggleButton,i.config=i.mergeConfig(e,{cssClass:"ui-playbacktoggle-overlay",components:[i.playbackToggleButton]},i.config),i}return n.__extends(e,t),e}(r.Container);e.PlaybackToggleOverlay=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(36),o=i(4),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-hugeplaybacktogglebutton",text:"Play/Pause"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i,!1);var r=function(){e.isPlaying()?e.pause("ui"):e.play("ui")},o=function(){e.isFullscreen()?e.exitFullscreen():e.enterFullscreen()},s=!0,a=0,u=0;this.onClick.subscribe(function(){if(s)r();else{var t=Date.now();if(t-a<200)return o(),void(u=t);if(t-a<500)return o(),r(),void(u=t);a=t,setTimeout(function(){Date.now()-u>200&&r()},200)}}),e.addEventHandler(e.EVENT.ON_PLAY,function(){s=!1}),e.addEventHandler(e.EVENT.ON_WARNING,function(t){5008===t.code&&(s=!0)});var h=function(t){t.type===e.EVENT.ON_CAST_START?n.hide():n.show()};e.addEventHandler(e.EVENT.ON_CAST_START,h),e.addEventHandler(e.EVENT.ON_CAST_STARTED,h),e.addEventHandler(e.EVENT.ON_CAST_STOPPED,h);var c=function(){n.setTransitionAnimationsEnabled(!1),n.onToggle.subscribeOnce(function(){n.setTransitionAnimationsEnabled(!0)})};c();var l=e.getConfig().playback&&Boolean(e.getConfig().playback.autoplay),f=!e.isReady()&&l;(e.isPlaying()||f)&&(this.on(),c(),e.addEventHandler(e.EVENT.ON_WARNING,function(t){5008===t.code&&c()}))},e.prototype.toDomElement=function(){var e=t.prototype.toDomElement.call(this);return e.append(new o.DOM("div",{class:this.prefixCss("image")})),e},e.prototype.setTransitionAnimationsEnabled=function(t){var e=this.prefixCss("no-transition-animations");t?this.getDomElement().removeClass(e):this.getDomElement().hasClass(e)||this.getDomElement().addClass(e)},e}(r.PlaybackToggleButton);e.HugePlaybackToggleButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-closebutton",text:"Close"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i);var n=this.getConfig();this.onClick.subscribe(function(){n.target.hide()})},e}(i(16).Button);e.CloseButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-airplaytogglebutton",text:"Apple AirPlay"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;if(t.prototype.configure.call(this,e,i),e.isAirplayAvailable){this.onClick.subscribe(function(){e.isAirplayAvailable()?e.showAirplayTargetPicker():console&&console.log("AirPlay unavailable")});var r=function(){e.isAirplayAvailable()?n.show():n.hide()};e.addEventHandler(e.EVENT.ON_AIRPLAY_AVAILABLE,r),r()}else this.hide()},e}(i(13).ToggleButton);e.AirPlayToggleButton=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-piptogglebutton",text:"Picture-in-Picture"},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;if(t.prototype.configure.call(this,e,i),e.isPictureInPictureAvailable){this.onClick.subscribe(function(){e.isPictureInPictureAvailable()?e.isPictureInPicture()?e.exitPictureInPicture():e.enterPictureInPicture():console&&console.log("PIP unavailable")});var r=function(){e.isPictureInPictureAvailable()?n.show():n.hide()};e.addEventHandler(e.EVENT.ON_READY,r),e.addEventHandler(e.EVENT.ON_PICTURE_IN_PICTURE_ENTER,function(){n.on()}),e.addEventHandler(e.EVENT.ON_PICTURE_IN_PICTURE_EXIT,function(){n.off()}),r(),e.isPictureInPicture()&&this.on()}else this.hide()},e}(i(13).ToggleButton);e.PictureInPictureToggleButton=r},function(t,e,i){i(108),i(172),t.exports=i(186)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(49),r=i(109),o=i(115),s=i(117);i(142),e.default=n.module("mi.BitdashPlayer",[]).controller("MiBitdashController",o.BitmovinPlayerController).directive("miBitdashPlayer",s.BitmovinPlayerDirective).factory("ksdn",function(){return r.ksdn}).factory("youbora",function(){return i(27)})},function(t,e,i){(function(t){e.ksdn=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=10)}([function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.Strategy={AJAX:"AJAX",FLASH:"FLASH"};e.AgentRequestMode={Ajax:[n.AJAX],Flash:[n.FLASH],AjaxWithFlashFallback:[n.AJAX,n.FLASH]},e.PROTOCOL={HTTPS:"https://",HTTP:"http://",RTMP:"rtmp://"},e.MIME_TYPES={DASH:"application/dash+xml",HLS:"application/x-mpegURL"},e.STREAM_TYPE={FLASH:"FLASH",HDS:"HDS",HLS:"HLS",DASH:"DASH",SMOOTH:"SMOOTH",RTMP:"RTMP"},e.PLAYTYPE={VOD:"VOD",LIVE:"LIVE"},e.LIMITS={LIMIT_REPORT_EVENTS_INFO:4096,LIMIT_REPORT_SEGMENTS_INFO:4096,LIMIT_REPORT_NODE_NAME:16,LIMIT_REPORT_MACHINE_NAME:64},e.EVENT={player:{state_none:0,state_stop:1,state_pause:2,state_play:3,state_buffering:6,state_end:8,state_seek_forward:20,state_seek_reverse:21,state_reload:77,state_exit:99},agent:{detect_ajax:-61,detect_flash:-62,detect_success:-63,detect_timeout:-64,detect_error_ajax_cannot_open:-65,detect_error_invalid_version:-66,detect_error_flash_config:-67,detect_failure_ajax:-68,detect_failure_flash_load:-69,detect_failure_flash_embed:-70,detect_all_fail:-71}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i,n){if(!(e<=0)){var r="edge"===(0,s.default)().browser,o=function(e){(e||t.readyState!==XMLHttpRequest.DONE)&&(!(r&&n)&&(t.onreadystatechange=null),e&&t.abort(),i(t))};r?setTimeout(o,e):(t.ontimeout=o.bind(null,!0),t.timeout=e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.XHR_ERROR=void 0,e.default=function(e){var i=e.method||"GET",n=e.url+(0,o.default)(e.params),s=Object.assign({},e.headers),h=null==e.expectJson||e.expectJson,c=null==e.async||e.async,l=e.onSuccess||a,f=e.onFailure||a,p=e.onError||a,d=e.onTimeout||a,g=e.timeout||0,v=e.body,y=e.continueAfterTimeout||!1;try{var m=new XMLHttpRequest;m.onreadystatechange=function(){if(m&&m.readyState===XMLHttpRequest.DONE)if(m.status>=200&&m.status<400){var e=h&&m.responseText?JSON.parse(m.responseText):m.responseText;l(e,m)}else m.status>=400?f(m):m.status<100&&t(function(){m.onreadystatechange&&p(m,u.NO_RESPONSE)})},m.open(i,n,c),r(m,g,d,y),h&&"GET"===i&&m.setRequestHeader("Accept","application/json");var E=s.auth;E&&(s.Authorization="Kontiki "+E,delete s.auth),Object.getOwnPropertyNames(s).forEach(function(t){m.setRequestHeader(t,s[t])}),m.send(v)}catch(t){p(null,u.CANNOT_OPEN)}};var o=n(i(9)),s=n(i(4)),a=function(){},u=e.XHR_ERROR={NO_RESPONSE:"no_ajax_response",CANNOT_OPEN:"ajax_cannot_open"}}).call(e,i(21).setImmediate)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function t(t,e){return t&&e&&t.length>e?t.substring(0,e):t}var e,i,n=navigator.appVersion,r=navigator.userAgent,o="other",s="-";-1!=(e=r.indexOf("Opera"))?(o="opera",s=r.substring(e+6),-1!=(e=r.indexOf("Version"))&&(s=r.substring(e+8))):-1!=(e=r.indexOf("MSIE"))?(o="ie",s=r.substring(e+5)):-1!=(e=r.indexOf("Edge"))?(o="edge",s=r.substring(e+5)):-1!=(e=r.indexOf("Chrome"))?(o="chrome",s=r.substring(e+7)):-1!=(e=r.indexOf("Safari"))?(o="safari",s=r.substring(e+7),-1!=(e=r.indexOf("Version"))&&(s=r.substring(e+8))):-1!=(e=r.indexOf("Firefox"))?(o="firefox",s=r.substring(e+8)):-1!=r.indexOf("Trident/")?(o="ie",s=r.substring(r.indexOf("rv:")+3)):(o="other",s="-"),-1!=(i=s.indexOf(";"))&&(s=s.substring(0,i)),-1!=(i=s.indexOf(" "))&&(s=s.substring(0,i)),-1!=(i=s.indexOf(")"))&&(s=s.substring(0,i));var a="other",u=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 10.0",r:/(Windows NT 10.0)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0)/},{s:"Windows windows",r:/(WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"OpenBSD",r:/OpenBSD/},{s:"SunOS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"MacOSX",r:/Mac OS X/},{s:"MacOS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"SearchBT",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var h in u){var c=u[h];if(c.r&&c.r.test(r)){a=c.s;break}}var l="";switch(/Windows/.test(a)&&(l=/Windows (.*)/.exec(a)[1],a="windows"),a){case"MacOSX":l=/Mac OS X (10[\.\_\d]+)/.exec(r)[1];break;case"Android":l=/Android ([\.\_\d]+)/.exec(r)[1];break;case"iOS":l=(l=/OS (\d+)_(\d+)_?(\d+)?/.exec(n))[1]+"."+l[2]+"."+(0|l[3])}return{browser:t(o,8),browserVersion:t(s,8),os:t(a,8),osVersion:t(l,8)}}},function(t,e,i){"use strict";function n(){}function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,t!==n&&c(t,this)}function o(t,e){for(;3===t._83;)t=t._18;if(r._47&&r._47(t),0===t._83)return 0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e);!function(t,e){l(function(){var i=1===t._83?e.onFulfilled:e.onRejected;if(null!==i){var n=function(t,e){try{return t(e)}catch(t){return f=t,p}}(i,t._18);n===p?a(e.promise,f):s(e.promise,n)}else 1===t._83?s(e.promise,t._18):a(e.promise,t._18)})}(t,e)}function s(t,e){if(e===t)return a(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var i=function(t){try{return t.then}catch(t){return f=t,p}}(e);if(i===p)return a(t,f);if(i===t.then&&e instanceof r)return t._83=3,t._18=e,void u(t);if("function"==typeof i)return void c(i.bind(e),t)}t._83=1,t._18=e,u(t)}function a(t,e){t._83=2,t._18=e,r._71&&r._71(t,e),u(t)}function u(t){if(1===t._75&&(o(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)o(t,t._38[e]);t._38=null}}function h(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function c(t,e){var i=!1,n=function(t,e,i){try{t(e,i)}catch(t){return f=t,p}}(t,function(t){i||(i=!0,s(e,t))},function(t){i||(i=!0,a(e,t))});i||n!==p||(i=!0,a(e,f))}var l=i(13),f=null,p={};t.exports=r,r._47=null,r._71=null,r._44=n,r.prototype.then=function(t,e){if(this.constructor!==r)return function(t,e,i){return new t.constructor(function(s,a){var u=new r(n);u.then(s,a),o(t,new h(e,i,u))})}(this,t,e);var i=new r(n);return o(this,new h(t,e,i)),i}},function(t,e,i){var n,r,o;r=[],void 0!==(o="function"==typeof(n=function(){function t(t){var e=t.replace(/^v/,"").replace(/\+.*$/,""),i=function(t,e){return-1===t.indexOf(e)?t.length:t.indexOf(e)}(e,"-"),n=e.substring(0,i).split(".");return n.push(e.substring(i+1)),n}function e(t){return isNaN(Number(t))?t:Number(t)}function i(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");if(!n.test(t))throw new Error("Invalid argument not valid semver")}var n=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;return function(n,r){[n,r].forEach(i);for(var o=t(n),s=t(r),a=0;a<Math.max(o.length-1,s.length-1);a++){var u=parseInt(o[a]||0,10),h=parseInt(s[a]||0,10);if(u>h)return 1;if(h>u)return-1}var c=o[o.length-1],l=s[s.length-1];if(c&&l){var f=c.split(".").map(e),p=l.split(".").map(e);for(a=0;a<Math.max(f.length,p.length);a++){if(void 0===f[a]||"string"==typeof p[a]&&"number"==typeof f[a])return-1;if(void 0===p[a]||"string"==typeof f[a]&&"number"==typeof p[a])return 1;if(f[a]>p[a])return 1;if(p[a]>f[a])return-1}}else if(c||l)return c?-1:1;return 0}})?n.apply(e,r):n)&&(t.exports=o)},function(t,e,i){(function(n){var r;!function(e,i){t.exports=i(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:this,function(n){"use strict";var o,s=n.Base64;if(void 0!==t&&t.exports)try{o=i(20).Buffer}catch(t){}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(t){for(var e={},i=0,n=t.length;i<n;i++)e[t.charAt(i)]=i;return e}(a),h=String.fromCharCode,c=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?h(192|e>>>6)+h(128|63&e):h(224|e>>>12&15)+h(128|e>>>6&63)+h(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return h(240|e>>>18&7)+h(128|e>>>12&63)+h(128|e>>>6&63)+h(128|63&e)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(t){return t.replace(l,c)},p=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[a.charAt(i>>>18),a.charAt(i>>>12&63),e>=2?"=":a.charAt(i>>>6&63),e>=1?"=":a.charAt(63&i)].join("")},d=n.btoa?function(t){return n.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,p)},g=o?o.from&&Uint8Array&&o.from!==Uint8Array.from?function(t){return(t.constructor===o.constructor?t:o.from(t)).toString("base64")}:function(t){return(t.constructor===o.constructor?t:new o(t)).toString("base64")}:function(t){return d(f(t))},v=function(t,e){return e?g(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):g(String(t))},y=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),m=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return h(55296+(e>>>10))+h(56320+(1023&e));case 3:return h((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return h((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},E=function(t){return t.replace(y,m)},b=function(t){var e=t.length,i=e%4,n=(e>0?u[t.charAt(0)]<<18:0)|(e>1?u[t.charAt(1)]<<12:0)|(e>2?u[t.charAt(2)]<<6:0)|(e>3?u[t.charAt(3)]:0),r=[h(n>>>16),h(n>>>8&255),h(255&n)];return r.length-=[0,0,2,1][i],r.join("")},w=n.atob?function(t){return n.atob(t)}:function(t){return t.replace(/[\s\S]{1,4}/g,b)},T=o?o.from&&Uint8Array&&o.from!==Uint8Array.from?function(t){return(t.constructor===o.constructor?t:o.from(t,"base64")).toString()}:function(t){return(t.constructor===o.constructor?t:new o(t,"base64")).toString()}:function(t){return E(w(t))},S=function(t){return T(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(n.Base64={VERSION:"2.4.5",atob:w,btoa:d,fromBase64:S,toBase64:v,utob:f,encode:v,encodeURI:function(t){return v(t,!0)},btou:E,decode:S,noConflict:function(){var t=n.Base64;return n.Base64=s,t}},"function"==typeof Object.defineProperty){var I=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",I(function(){return S(this)})),Object.defineProperty(String.prototype,"toBase64",I(function(t){return v(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",I(function(){return v(this,!0)}))}}return n.Meteor&&(Base64=n.Base64),void 0!==t&&t.exports?t.exports.Base64=n.Base64:void 0!==(r=function(){return n.Base64}.apply(e,[]))&&(t.exports=r),{Base64:n.Base64}})}).call(e,i(0))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.replace(/^kontiki:/,"").split(":").reverse().slice(0,-2),i=e[3]||"prod1",o=n[i];return{moid:e[0],company:e[2],dms:i,host:r(null==o?i:o)}};var n={prod1:"",gmcorp:"wg1",eu:"eu1",lbg:"api.kontiki.service.group",vc10:"api-vc10.corp.kontiki.com",vc14:"api-vc14.kontiki.com",tc1rh5:"tc1"},r=function(t){return t.indexOf(".")>=0?"https://"+t:"https://api."+(t&&t+".")+"kontiki.com"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return null==t?"":(t=Object.getOwnPropertyNames(t).reduce(function(i,r){var s=t[r];return null==s?i:(!e&&o.has(r)&&(s=n.Base64.encodeURI(s)),i[r]=s,i)},{}),(0,r.stringify)(t,!0))};var n=i(7),r=i(24),o=new Set(["format","realmId","realmTicket"])},function(t,e,i){i(11),i(16),t.exports=i(17)},function(t,e,i){"use strict";"undefined"==typeof Promise&&(i(12).enable(),window.Promise=i(14)),Object.assign=i(15)},function(t,e,i){"use strict";function n(){a=!1,o._47=null,o._71=null}function r(t,e){return e.some(function(e){return t instanceof e})}var o=i(5),s=[ReferenceError,TypeError,RangeError],a=!1;e.disable=n,e.enable=function(t){function e(e){(t.allRejections||r(c[e].error,t.whitelist||s))&&(c[e].displayId=h++,t.onUnhandled?(c[e].logged=!0,t.onUnhandled(c[e].displayId,c[e].error)):(c[e].logged=!0,function(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}(c[e].displayId,c[e].error)))}function i(e){c[e].logged&&(t.onHandled?t.onHandled(c[e].displayId,c[e].error):c[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+c[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+c[e].displayId+".")))}t=t||{},a&&n(),a=!0;var u=0,h=0,c={};o._47=function(t){2===t._83&&c[t._56]&&(c[t._56].logged?i(t._56):clearTimeout(c[t._56].timeout),delete c[t._56])},o._71=function(t,i){0===t._75&&(t._56=u++,c[t._56]={displayId:null,error:i,timeout:setTimeout(e.bind(null,t._56),r(i,s)?100:2e3),logged:!1})}}},function(t,e,i){"use strict";(function(e){function i(t){s.length||(o(),!0),s[s.length]=t}function n(){for(;a<s.length;){var t=a;if(a+=1,s[t].call(),a>u){for(var e=0,i=s.length-a;e<i;e++)s[e]=s[e+a];s.length-=a,a=0}}s.length=0,a=0,!1}function r(t){return function(){function e(){clearTimeout(i),clearInterval(n),t()}var i=setTimeout(e,0),n=setInterval(e,50)}}t.exports=i;var o,s=[],a=0,u=1024,h=void 0!==e?e:self,c=h.MutationObserver||h.WebKitMutationObserver;o="function"==typeof c?function(t){var e=1,i=new c(t),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}(n):r(n),i.requestFlush=o,i.makeRequestCallFromTimer=r}).call(e,i(0))},function(t,e,i){"use strict";function n(t){var e=new r(r._44);return e._83=1,e._18=t,e}var r=i(5);t.exports=r;var o=n(!0),s=n(!1),a=n(null),u=n(void 0),h=n(0),c=n("");r.resolve=function(t){if(t instanceof r)return t;if(null===t)return a;if(void 0===t)return u;if(!0===t)return o;if(!1===t)return s;if(0===t)return h;if(""===t)return c;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new r(e.bind(t))}catch(t){return new r(function(e,i){i(t)})}return n(t)},r.all=function(t){var e=Array.prototype.slice.call(t);return new r(function(t,i){function n(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof r&&a.then===r.prototype.then){for(;3===a._83;)a=a._18;return 1===a._83?n(s,a._18):(2===a._83&&i(a._18),void a.then(function(t){n(s,t)},i))}var u=a.then;if("function"==typeof u)return void new r(u.bind(a)).then(function(t){n(s,t)},i)}e[s]=a,0==--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,s=0;s<e.length;s++)n(s,e[s])})},r.reject=function(t){return new r(function(e,i){i(t)})},r.race=function(t){return new r(function(e,i){t.forEach(function(t){r.resolve(t).then(e,i)})})},r.prototype.catch=function(t){return this.then(null,t)}},function(t,e,i){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var h in i=Object(arguments[u]))r.call(i,h)&&(a[h]=i[h]);if(n){s=n(i);for(var c=0;c<s.length;c++)o.call(i,s[c])&&(a[s[c]]=i[s[c]])}}return a}},function(t,e,i){"use strict";(function(t){t.version="1.1.0"}).call(e,i(2))},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(!t.sdnData)return null;if(t.sdnData.constructor===Array)for(var e=0;e<t.sdnData.length;e++){var i=t.sdnData[e];if(i&&i.encodingInfo)return i.encodingInfo}return t.sdnData.encodingInfo}function o(t){var e=function(t){var e=g.default[t];if(null==e)throw"No player interface for "+t;if("function"!=typeof e.isPlaying||"function"!=typeof e.isLive||"function"!=typeof e.getPlayerPosition||"function"!=typeof e.getPlayerDuration||"function"!=typeof e.setEventHandlers)throw"Incomplete player interface: "+t;return e}(t),i=s.bind(null,t,e);return Object.defineProperty(i,"name",{value:t})}function s(e,i,n){function o(t){x=t,function(t){D=s(t),L=new v.default({hostHttp:t.clientHost,portHttp:t.clientPortHttp,portRtmp:t.clientPortRtmp,portHttps:t.clientPortHttps,timeout:C,flashTimeout:A,flashLoaderUrl:R,agentRequestMode:S,eventLogger:D&&D.logger,callback:function(e,i){if(t.urn===N)if(e.isInstalled()){M.agent=e;var n={provisionedForCurrentUrn:(0,l.default)(e.getNamespace(),t.urn),notBlackedOut:!e.getInBlackout()},r=!Object.getOwnPropertyNames(n).reduce(function(t,e){return t&&n[e]},!0);if(r)return P.onAgentRejected&&P.onAgentRejected(M,n),void E(t);if(P.onAgentDetected){var o=!!e.getKToken();P.onAgentDetected(M,o,e)}a(t)}else P.onAgentNotDetected&&P.onAgentNotDetected(M,i),E(t)}}),D&&D.setAgent(L)}(t)}function s(t){if(w&&M.player){var n=T||(0,p.default)(t.urn).host;return new y.default(M.player,e,i,t,w,n,O)}}function a(t){if(M.agent){var e=function(e){if(t.urn===N){var i=e&&e.success?P.onSessionStart:P.onSessionFailure;i&&i(M),m(t)}};M.agent.setSessionData({realmId:t.realmId,realmTicket:t.realmTicket,noPreroll:!0},e)}}function f(t){var e=!!M.agent.getKToken(),i=r(t),n=e?void 0:{noPreroll:!0},o=M.agent.getStreamUrl(i,t.urn,n);return 0===o.length?(console.log("Cannot play stream of type "+i),null):o}function g(t){var e=r(t);M.agent.prefetchStream(e,t.urn,null,function(e){if(M.agent&&t.urn===N){if(e.error){if(!e.reasons.reduce(function(t,e){return t&&("timeout"===e.type||e.status>=400&&e.status<500)},!0))return void(P.onPrimingFailure&&P.onPrimingFailure(M))}P.onPrimingStart&&P.onPrimingStart(M),M.agent.startLongpoll(function(e,i){"string"===typeof e&&t.urn===N&&("manifestProgress"===e?(P.onProgress&&P.onProgress(M,i.progress,t.urn),i.ready&&b(t,f(t),!0)):P.onCommand&&P.onCommand(M,e,i))})}})}function m(t){(0,h.default)(M.getAgentData().version,"10.0")>=0?g(t):b(t,f(t),!0)}function E(t){var e=I||t.mediaCdnUrl;if(!e&&t.sdnData){var i=t.sdnData;i.length&&i.length>0&&(i=i[0]),i&&i.mediaCdnUrl&&(e=i.mediaCdnUrl)}b(t,e,!1)}function b(t,e,i){var n=!i&&I&&_?_:c.MIME_TYPES[r(t)];k&&e&&n&&M.player?(P.willSetSource&&P.willSetSource(M),k(M.player,e,n,i),D&&D.saveState(),P.didSetSource&&P.didSetSource(M)):console.log("Cannot play source: "+e)}var w,T,S,I,_,R,A,O,C,k,N,P,D,L,x,M=this;return this.player=null,this.agent=null,this.configure=function(t){var e=function(e,i){return void 0===t[e]?i:t[e]},i=T,n=w;T=e("host",i),w=e("auth",n);var r=!!N&&(T!=i||w!=n);S=e("agentRequestMode",S)||c.AgentRequestMode.NoFlash,I=e("fallbackSrc",I),_=e("fallbackType",_),R=e("flashLoaderUrl",R),A=e("flashTimeout",A),O=e("reportInterval",O),C=e("timeout",C),D&&D.setReportInterval(O),r&&this.stop()}.bind(this),this.play=function(t,e,n){if("function"!=typeof(k=n.setSource||i.setSource))throw"Missing setSource callback: requried when the player interface lacks an implementation";var r,s;if("string"==typeof e?r=e:"object"===(void 0===e?"undefined":u(e))&&(r=(s=e.playbackVideo||e).urn),r){if(N&&N!==r)return void this.stop(function(){this.play(t,e,n)}.bind(this));N=r,P=n,this.player=t,s?o(s):function(t,e,i){var n=(0,p.default)(i),r=function(t){i===N&&P.onPlaybackRequestFailure&&P.onPlaybackRequestFailure(M,t)&&I&&E()};(0,d.default)({url:(t||n.host)+"/api/v2/playback/video/"+n.moid,headers:{auth:e},onSuccess:function(t){if(i===N){var e=t.playbackVideo;P.onPlaybackRequestSuccess&&P.onPlaybackRequestSuccess(M,e),o(e)}},onFailure:r,onError:r})}(T,w,r)}}.bind(this),this.stop=function(t){N&&this.agent?(N=null,P=null,D.disconnect(),D=null,this.player=null,this.agent.stopStream(x.urn,t),this.agent.stopLongpoll(),x=null,this.agent=null):t&&t()}.bind(this),this.getAgentData=function(){return t.agentData},this.getLogs=function(){return t.agentLogs},this.flushLogs=function(){return t.agentLogs="",t.agentLogs},n&&M.configure(n),M}function a(t,e){g.default[t]=Object.assign(g.default[t]||{},e),m[t]=o(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.KollectiveAgent=e.AgentRequestMode=e.createPublicToken=e.installPlayerPlugin=e.Players=e.$g=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=n(i(6)),c=i(1),l=n(i(18)),f=n(i(19)),p=n(i(8)),d=n(i(3)),g=n(i(25)),v=n(i(26)),y=n(i(27));console.log("Kollective SDK v"+t.version);var m={};for(var E in g.default)g.default.hasOwnProperty(E)&&a(E,g.default[E]);e.$g=t,e.Players=m,e.installPlayerPlugin=a,e.createPublicToken=f.default,e.AgentRequestMode=c.AgentRequestMode,e.KollectiveAgent=v.default}).call(e,i(2))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=(e||"").split(":"),n=i.indexOf("moid");if(n<0)return!1;var r=i.slice(0,n).join(":")+":";return(t||"").split(",").filter(Boolean).reduce(function(t,e){return t||0===r.indexOf(e)},!1)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=e;return e.indexOf(":")>=0&&(i=(0,r.default)(e).company),"pub-"+n.Base64.encode(t+"#"+i)};var n=i(7),r=function(t){return t&&t.__esModule?t:{default:t}}(i(8))},function(e,i){if(void 0===t){var n=new Error('Cannot find module "Buffer"');throw n.code="MODULE_NOT_FOUND",n}e.exports=t},function(t,e,i){(function(t){function n(t,e){this._id=t,this._clearFn=e}var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new n(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new n(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(22),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,i(0))},function(t,e,i){(function(t,e){!function(t,i){"use strict";function n(t){delete a[t]}function r(t){if(u)setTimeout(r,0,t);else{var e=a[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{n(t),u=!1}}}}if(!t.setImmediate){var o,s=1,a={},u=!1,h=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?o=function(t){e.nextTick(function(){r(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"==typeof i.data&&0===i.data.indexOf(e)&&r(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),o=function(i){t.postMessage(e+i,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){r(t.data)},o=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;o=function(e){var i=h.createElement("script");i.onreadystatechange=function(){r(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}():o=function(t){setTimeout(r,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return a[s]=n,o(s),s++},c.clearImmediate=n}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,i(0),i(23))},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(h===setTimeout)return setTimeout(t,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(){d&&f&&(d=!1,f.length?p=f.concat(p):g=-1,p.length&&s())}function s(){if(!d){var t=r(o);d=!0;for(var e=p.length;e;){for(f=p,p=[];++g<e;)f&&f[g].run();g=-1,e=p.length}f=null,d=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function u(){}var h,c,l=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var f,p=[],d=!1,g=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];p.push(new a(t,e)),1!==p.length||d||r(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=u,l.addListener=u,l.once=u,l.off=u,l.removeListener=u,l.removeAllListeners=u,l.emit=u,l.prependListener=u,l.prependOnceListener=u,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,i){"use strict";function n(t){return decodeURIComponent(t.replace(/\+/g," "))}var r=Object.prototype.hasOwnProperty;e.stringify=function(t,e){e=e||"";var i=[];for(var n in"string"!=typeof e&&(e="?"),t)r.call(t,n)&&i.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return i.length?e+i.join("&"):""},e.parse=function(t){for(var e,i=/([^=?&]+)=?([^&]*)/g,r={};e=i.exec(t);){var o=n(e[1]),s=n(e[2]);o in r||(r[o]=s)}return r}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1);e.default={Amp:{isPlaying:function(t){return!(t.seeking||t.paused||t.ended)},isLive:function(t){return t.isLive()},getPlayerPosition:function(t){return 1e3*t.currentTime},getPlayerDuration:function(t){return 1e3*t.duration},setEventHandlers:function(t,e){var i=window.amp.eventName;t.addEventListener(i.timeupdate,e.onTimeUpdate),t.addEventListener(i.error,e.onError),t.addEventListener(i.pause,e.onPause),t.addEventListener(i.play,e.onPlay),t.addEventListener(i.ended,e.onEnd),t.addEventListener(i.seeked,e.onSeekEnd),t.addEventListener(i.waiting,e.onBuffering),t.addEventListener(i.canplaythrough,e.onCanPlay)},setSource:function(t,e,i){t.src([{src:e,type:i}])}},Bitmovin:{isPlaying:function(t){return t.isPlaying()},isLive:function(t){return t.isLive()},getPlayerPosition:function(t){return 1e3*t.getCurrentTime()},getPlayerDuration:function(t){return 1e3*t.getDuration()},setEventHandlers:function(t,e){var i=t.EVENT||window.bitmovin.player.PlayerEvent,n=t.EVENT?"addEventHandler":"on";t[n](i.ON_TIME_CHANGED||i.TimeChanged,e.onTimeUpdate),t[n](i.ON_ERROR||i.Error,e.onError),t[n](i.ON_PAUSED||i.Paused,e.onPause),t[n](i.ON_PLAY||i.Play,e.onPlay),t[n](i.ON_PLAYBACK_FINISHED||i.PlaybackFinished,e.onEnd),t[n](i.ON_SEEKED||i.Seeked,e.onSeekEnd),t[n](i.ON_TIME_SHIFTED||i.TimeShifted,e.onSeekEnd),t[n](i.ON_STALL_STARTED||i.StallStarted,e.onBuffering),t[n](i.ON_STALL_ENDED||i.StallEnded,e.onCanPlay)},setSource:function(t,e,i){var r=function(){switch(i){case n.MIME_TYPES.DASH:return"dash";default:return"hls"}}();t.load(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},r,e)).then(function(){return t.play()}).catch(function(t){console.log("Bitmovin player load error: "+t)})}},Dashjs:{isPlaying:function(t){return!(t.isSeeking||t.isPaused)},isLive:function(t){return t.isDynamic()},getPlayerPosition:function(t){return 1e3*t.time()},getPlayerDuration:function(t){return 1e3*t.duration()},setEventHandlers:function(t,e){var i=window.dashjs.MediaPlayer.events;t.on(i.PLAYBACK_TIME_UPDATED,e.onTimeUpdate,this),t.on(i.ERROR,e.onError,this),t.on(i.PLAYBACK_PAUSED,e.onPause,this),t.on(i.PLAYBACK_PLAYING,e.onPlay,this),t.on(i.PLAYBACK_ENDED,e.onEnd,this),t.on(i.PLAYBACK_SEEKED,e.onSeekEnd,this),t.on(i.BUFFER_EMPTY,e.onBuffering,this),t.on(i.CAN_PLAY,e.onCanPlay,this)},setSource:function(t,e){t.setAutoPlay(!0),t.attachSource(e)}},Flow:{isPlaying:function(t){return t.playing},isLive:function(t){return t.live},getPlayerPosition:function(t){return t.ready?1e3*t.video.time:0},getPlayerDuration:function(t){return t.ready?1e3*t.video.duration:0},setEventHandlers:function(t,e){t.on("progress",e.onTimeUpdate),t.on("error",e.onError),t.on("pause",e.onPause),t.on("ready",e.onPlay),t.on("resume",e.onPlay),t.on("finish",e.onEnd),t.on("seek",e.onSeekEnd),t.on("buffer",function(){t.video.buffer>t.video.time?e.onCanPlay():e.onBuffering()})},setSource:function(t,e,i){t.load({sources:[{src:e,type:i}]})}},Jwplayer:{isPlaying:function(t){return"playing"===t.getState()},isLive:function(t){return!isFinite(t.duration())},getPlayerPosition:function(t){return 1e3*t.getPosition()},getPlayerDuration:function(t){return 1e3*t.getDuration()},setEventHandlers:function(t,e){t.on("time",e.onTimeUpdate),t.on("error",e.onError),t.on("pause",e.onPause),t.on("play",function(t){"buffering"===t.oldstate&&e.onCanPlay(),e.onPlay()}),t.on("complete",e.onEnd),t.on("seeked",e.onSeekEnd),t.on("buffer",e.onBuffering),t.on("bufferChange",function(i){100===i.bufferPercent&&"playing"!==t.getState()&&e.onCanPlay()})},setSource:function(t,e){t.setup({file:e,autostart:"viewable"})}},Theo:{isPlaying:function(t){return!(t.seeking||t.paused||t.ended)},isLive:function(t){return!isFinite(t.duration)},getPlayerPosition:function(t){return 1e3*t.currentTime},getPlayerDuration:function(t){return 1e3*t.duration},setEventHandlers:function(t,e){t.addEventListener("timeupdate",e.onTimeUpdate),t.addEventListener("error",e.onError),t.addEventListener("pause",e.onPause),t.addEventListener("playing",e.onPlay),t.addEventListener("ended",e.onEnd),t.addEventListener("seeked",e.onSeekEnd),t.addEventListener("waiting",e.onBuffering),t.addEventListener("canplaythrough",e.onCanPlay)},setSource:function(t,e,i){t.source={sources:[{src:e,type:i}]},t.play()}},Videojs:{isPlaying:function(t){return!(t.seeking||t.paused||t.ended)},isLive:function(t){return!isFinite(t.duration())},getPlayerPosition:function(t){return 1e3*t.currentTime},getPlayerDuration:function(t){return 1e3*t.duration()},setEventHandlers:function(t,e){t.on("timeupdate",e.onTimeUpdate),t.on("error",e.onError),t.on("pause",e.onPause),t.on("play",e.onPlay),t.on("ended",e.onEnd),t.on("seeked",e.onSeekEnd),t.on("stalled",e.onBuffering),t.on("canplay",e.onCanPlay)},setSource:function(t,e,i){t.src({src:e,type:i}),t.play()}}}},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return"$g."+t+"Response"}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(i(6)),a=i(1),u=n(i(4)),h=i(3),c=n(h),l=n(i(9)),f="";e.default=function(e){function i(t,e){A[t]=A[t]||[],A[t].push(e)}function n(t){if(t.strategies=(t.strategies||(_.isInstalled()?function(t){t=t.slice();for(var e=[];t.length>0;){var i=t.shift();(function(t){switch(t){case a.Strategy.AJAX:return _.checkMinVersion("10.0");case a.Strategy.FLASH:return!0;default:return!1}})(i)&&e.push(i)}return e}(H):H)).slice(),0!==t.strategies.length){null==t.requestId&&(t.requestId=O,O++);var e=t.uri.split("/"),i=e[e.length-1],o=t.options||{};switch(t.callbackParam=t.callbackParam||r(i),t.expectJson=null==t.expectJson||t.expectJson,t.onStart=t.onStart||v,t.onTimeout=t.onTimeout||m,t.onError=t.onError||E,t.onFailure=t.onFailure||b,t.continueAfterTimeout=t.continueAfterTimeout||!1,t.flashDivId=o.flashDivId||"kollectiveAgent",t.flashTimeout=o.flashTimeout||U,t.timeout=o.timeout||t.defaultTimeout||F,t.strategies.shift()){case a.Strategy.AJAX:!function(t,e){var i=e.method,r=e.expectJson,o=e.timeout,s=e.continueAfterTimeout,u=e.uri,h=e.params,f=e.ignoreBase64Encoding,d=e.requestId,g=e.onStart,v=e.onSuccess,y=e.onFailure,m=e.onError,E=e.onTimeout,b=p(t,u)+(0,l.default)(h,f),w=a.Strategy.AJAX;g&&g(w,b),(0,c.default)({url:b,method:i,expectJson:r,timeout:o,continueAfterTimeout:s,onSuccess:v.bind(null,w),onFailure:function(t){y(w,d,t,"ajax"),n(e)},onError:function(t,i){m(w,d,t,i),n(e)},onTimeout:function(t){E(w,d,t),n(e)}})}(t.protocol||a.PROTOCOL.HTTPS,t);break;case a.Strategy.FLASH:d(t.protocol||a.PROTOCOL.HTTP,t);break;default:n(t)}}else t.onAllStrategiesFailed(A[t.requestId])}function p(t,e){switch(t){case a.PROTOCOL.HTTPS:return a.PROTOCOL.HTTPS+D+":"+M+e;case a.PROTOCOL.HTTP:return a.PROTOCOL.HTTP+P+":"+L+e;case a.PROTOCOL.RTMP:return a.PROTOCOL.RTMP+P+":"+x+e;default:return null}}function d(e,i){t.timeoutTripped=!1;var r=Object.assign({},i.params);r.callback=i.callbackParam,t.lastFlashUrl=(p(e,i.uri)+(0,l.default)(r,i.ignoreBase64Encoding)).replace("&","%26"),i.onStart&&i.onStart(a.Strategy.FLASH,t.lastFlashUrl),t.timeoutFlash=i.flashTimeout;var o=function(t){i.onFailure(a.Strategy.FLASH,i.requestId,null,t),n(i)};if(void 0!==window.swfobject){t.flashSuccessCallback=i.onSuccess.bind(null,a.Strategy.FLASH),t.flashFailureCallback=o,t.flashTimeoutCallback=function(){t.timeoutTripped=!0,i.onTimeout(a.Strategy.FLASH,i.requestId),n(i)};var s={url:t.lastFlashUrl};window.swfobject.embedSWF(B,i.flashDivId,"8","8","10.0.0","",s,{allowscriptaccess:"always"},"",function(e){e.success?(t.timeoutTripped=!1,t.flashLoadTimeoutID=setTimeout(t.flashTimeoutCallback,t.timeoutFlash)):o("flash_embed")})}else i.onError(a.Strategy.FLASH,i.requestId,"flash_config"),n(i)}function g(t){j&&j.addAgentEvent&&t&&j.addAgentEvent(t)}function v(e,i){switch(e){case a.Strategy.AJAX:t.agentLogs+="Attempting AJAX request";break;case a.Strategy.FLASH:t.agentLogs+="Attempting FLASH request"}t.agentLogs+=": "+i}function y(e,i){return e=e||function(){},i=i||function(){return null},function(n,r){switch(n){case a.Strategy.AJAX:t.agentLogs+="AJAX request succeeded\n",e(r);break;case a.Strategy.FLASH:t.agentLogs+="FLASH request succeeded\n",e(i())}}}function m(e,n,r){switch(i(n,{type:"timeout",reason:"timeout",strategy:e,status:r.status}),e){case a.Strategy.AJAX:t.agentLogs+="AJAX request timed out\n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH request timed out\n"}}function E(e,n,r,o){switch(i(n,{type:"error",reason:o,strategy:e,status:r?r.status:0}),e){case a.Strategy.AJAX:t.agentLogs+="AJAX request failed with error:"+o+"\n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH request failed due to improper Flash configuration\n"}}function b(e,n,r,o){switch(i(n,{type:"error",reason:o,strategy:e,status:r.status}),e){case a.Strategy.AJAX:t.agentLogs+="AJAX request failed:"+r.statusText+" \n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH request failed\n"}}function w(t){return function(e){t({error:"Request failed",reasons:e})}}function T(t){return Object.assign(Object.assign({},t),I)}function S(e,i,r){k=(new Date).getTime(),n({uri:"/api/v1/longpoll",params:i,defaultTimeout:3e4,continueAfterTimeout:!0,options:r,onSuccess:y(function(t){if(!C){var n=!!t&&t.ts,o=!!t&&t.cmd,s=!!t&&t.params;if("manifestProgress"===o){var a=s&&s.percent,u=!!a&&100===parseInt(a);e(o,{progress:parseInt(a),ready:u})}else e(o,s);if(!C){var h=Object.assign({},i);h.ts=n,S(e,h,r)}}},function(){return t.longpollData}),onAllStrategiesFailed:function(t){if(!C){var n=(t=t||[]).filter(function(t){return!("timeout"===t.reason||t.reason===h.XHR_ERROR.NO_RESPONSE)}),o=0;if(n.length>0)e({error:"Longpoll request failed. Attempting again.",reasons:n});else{var s=(new Date).getTime()-k;if(o=Math.max(0,3e4-s),"edge"===(0,u.default)().browser&&t.filter(function(t){return"timeout"===t.reason}).length>0)return}setTimeout(function(){C||S(e,i,r)},o)}}})}if("object"!==(void 0===e?"undefined":o(e)))throw"KollectiveAgent Error: No parameter object passed in";t.agentData=null,t.agentLogs="",t.timeoutTripped=!1;var I,_=this,R=!1,A={},O=1,C=!0,k=null,N=e.callback||function(){},P=e.hostHttp||"127.0.0.1",D=e.hostHttps||"client.kontiki.com",L=""+(e.portHttp||"31013"),x=""+(e.portRtmp||"31014"),M=""+(e.portHttps||"31015"),U=e.flashTimeout||5e3,F=e.timeout||5e3,B=e.flashLoaderUrl||"flash/kontikiagentflashloader-3.swf",H=e.agentRequestMode||a.AgentRequestMode.Ajax,j=e.eventLogger;n({strategies:H,uri:"/kontiki/kontiki/cache/RetrieveAgentData",callbackParam:r("agent"),onStart:function(e){switch(e){case a.Strategy.AJAX:g(a.EVENT.agent.detect_sajax),t.agentLogs+="Attempting AJAX detection\n";break;case a.Strategy.FLASH:g(a.EVENT.agent.detect_flash),t.agentLogs+="Attempting FLASH detection\n"}},onSuccess:function(e,i,n){switch(e){case a.Strategy.AJAX:if(!i||!i.version)throw g(a.EVENT.agent.detect_error_invalid_version),"responseText lacked agent version: "+n.responseText;g(a.EVENT.agent.detect_success),t.agentLogs+="AJAX detection succeeded! Agent version:"+i.version+"\n",t.agentData=i,N(_);break;case a.Strategy.FLASH:g(a.EVENT.agent.detect_success),t.agentLogs+="FLASH detection has succeeded\n",R=!0,N(_)}},onTimeout:function(e,n,r){switch(i(n,{type:"timeout",reason:"timeout",strategy:e,status:r.status}),g(a.EVENT.agent.detect_timeout),e){case a.Strategy.AJAX:t.agentLogs+="AJAX detection timed out\n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH detection timed out\n"}},onError:function(e,n,r,o){i(n,{type:"error",reason:o,strategy:e,status:r?r.status:0});var s=o&&a.EVENT.agent["detect_error_"+o];switch(s&&g(s),t.agentData=null,e){case a.Strategy.AJAX:t.agentLogs+="AJAX detection has failed with error:"+s+"\n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH detection failed due to improper Flash configuration\n"}},onFailure:function(e,n,r,o){i(n,{type:"error",reason:o,strategy:e,status:r.status});var s=o&&a.EVENT.agent["detect_failure_"+o];switch(s&&g(s),t.agentData=null,e){case a.Strategy.AJAX:t.agentLogs+="AJAX detection has failed:"+r.statusText+" \n";break;case a.Strategy.FLASH:t.agentLogs+="FLASH detection failed\n"}},onAllStrategiesFailed:function(t){g(a.EVENT.agent.detect_all_fail),N(_,t)}}),this.isInstalled=function(){return void 0!==t.agentData&&null!=t.agentData}.bind(this),this.getVersion=function(){return this.isInstalled()?t.agentData.version:f}.bind(this),this.getNamespace=function(){return this.isInstalled()?t.agentData.urn_namespace:f}.bind(this),this.getMachineName=function(){return this.isInstalled()?t.agentData.machine_name:f}.bind(this),this.getNodeId=function(){return this.isInstalled()?t.agentData.node_id:f}.bind(this),this.getRtmpClientPlaybackSupported=function(){return this.isInstalled()&&t.agentData.rtmp_mp4_vod}.bind(this),this.getInBlackout=function(){return this.isInstalled()?t.agentData.blackout:f}.bind(this),this.getStreamUri=function(t,e,i){if(!this.isInstalled())return f;switch(t){case a.STREAM_TYPE.FLASH:return"/stream/"+e+"/"+(i||"content.f4v");case a.STREAM_TYPE.HDS:return"/stream/"+e+"/"+(i||"manifest.f4m");case a.STREAM_TYPE.HLS:return"/stream/"+e+"/"+(i||"chunklist.m3u8");case a.STREAM_TYPE.DASH:return"/stream/"+e+"/"+(i||"playlist.ism/Manifest(format=mpd-time-csf)");case a.STREAM_TYPE.SMOOTH:return"/stream/"+e+"/"+(i||"playlist.ism/Manifest");case a.STREAM_TYPE.RTMP:return"/stream/"+e;default:return""}}.bind(this),this.getStreamUrl=function(t,e,i,n){if(!this.isInstalled())return f;var r=this.getStreamUri(t,e,n),o=this.checkMinVersion("10.0")?a.PROTOCOL.HTTPS:a.PROTOCOL.HTTP;return t===a.STREAM_TYPE.RTMP&&(o=a.PROTOCOL.RTMP),p(o,r)+(0,l.default)(T(i))}.bind(this),this.getKToken=function(){return this.isInstalled()?t.agentData.ktoken:null}.bind(this),this.isDetectViaFlash=function(){return R},this.checkMinVersion=function(e){return this.isInstalled()&&(0,s.default)(t.agentData.version,e)>=0}.bind(this),this.getAgentLogs=function(){return t.agentLogs},this.setSessionData=function(t,e,i){I={realmId:t.realmId,realmTicket:t.realmTicket,noPreroll:t.noPreroll};var r=this.getKToken();if(null==r)e();else{var o={ktoken:r},s=function(t){var i=null==t||null==t.error;i&&(I=o),e(i?{success:i}:t)};n({uri:"/api/v1/setSessionData",ignoreBase64Encoding:!0,method:"POST",params:T(o),options:i,onSuccess:y(s),onAllStrategiesFailed:w(s)})}}.bind(this),this.getContentStatus=function(e,i,r){n({uri:"/api/v1/contentStatus",params:{urn:e},options:r,onSuccess:y(i,function(){return t.contentStatusData}),onAllStrategiesFailed:w(i)})},this.downloadMonitor=function(e,i,r){n({uri:"/api/v1/downloadMonitor",params:{urn:e},options:r,onSuccess:y(i,function(){return t.downloadMonitorData}),onAllStrategiesFailed:w(i)})},this.isContentPrefetched=function(){return void 0!==t.contentStatusData&&"Complete"==t.contentStatusData.state},this.getContentProgress=function(){return void 0!==t.contentStatusData?t.contentStatusData.progress:-1},this.getDownloadMonitorData=function(){return t.downloadMonitorData},this.stopStream=function(t,e,i){n({uri:"/api/v1/stopStream",params:T({urn:t}),options:i,onSuccess:y(e),onAllStrategiesFailed:w(e)})},this.deleteContent=function(t,e,i){n({uri:"/api/v1/contentDelete",params:T({urn:t}),options:i,onSuccess:y(e),onAllStrategiesFailed:w(e)})},this.requestDeliveryGuid=function(e,i,r){n({uri:"/api/v1/contentDeliveryGuid",params:T({urn:e}),options:r,onSuccess:y(i,function(){return t.contentDeliveryGuidData}),onAllStrategiesFailed:w(i)})},this.sendErrorLogs=function(e,i){n({uri:"/api/v1/sendErrorLogs",params:{_:1},options:i,onSuccess:y(e,function(){return t.sendErrorLogsData}),onAllStrategiesFailed:w(e)})},this.prefetchStream=function(e,i,o,s,u){var h=this.getStreamUri(e,i,u&&u.file);n({expectJson:!1,protocol:e===a.STREAM_TYPE.RTMP?a.PROTOCOL.RTMP:null,uri:h,params:T(o),options:u,callbackParam:r("prefetchStream"),onSuccess:y(s,function(){return t.prefetchStreamData}),onAllStrategiesFailed:w(s)})}.bind(this),this.startLongpoll=function(t,e){C=!1,S(t,T({ts:0}),e)}.bind(this),this.stopLongpoll=function(){C=!0}}}).call(e,i(2))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(28)),o=i(1),s=n(i(4)),a=n(i(3)),u={NONE:0,DEFAULT:100};e.default=function(t,e,i,n,h,c,l){function f(){b.logger&&(b.logger.onPlayerStateChange(o.EVENT.player.state_exit),v(!0))}function p(t){b.logger&&(b.logger.onPlayerStateChange(t),b.saveState())}function d(t){b.agent&&setTimeout(b.agent.stopStream.bind(null,n.urn),t)}function g(){!T&&b.agent&&b.agent.requestDeliveryGuid(n.urn,function(t){T=t.deliveryGuid})}function v(t){if(b.agent&&b.logger){if(!T)return void g();E();var i=m(),r=new Date;b.logger.updateLastReportTime();var o=b.logger.getPlayDuration();o<=0&&(o=1);var a=(0,s.default)(),u={contentMoid:n.moid,formatMoid:n.formatMoid,playGuid:w,deliveryGuid:T,percentage:0,inProgress:i,playDuration:o,startTime:b.logger.getStartTime(),playType:b.logger.getPlayType(),endTime:r.getTime(),prepareTime:b.logger.getPrepareTime(),bufferTime:b.logger.getBufferTime(),stallCount:b.logger.getStallCount(),stallTime:b.logger.getStallTime(),segmentList:b.logger.getSegmentList(),eventList:b.logger.getEventList(),nodeId:b.agent.getNodeId(),machineName:b.agent.getMachineName(),playContext:e,browser:a.browser,browserVersion:a.browserVersion,os:a.os,osVersion:a.osVersion},l=JSON.stringify({reportPlay:u}),f=c+"/api/v2/playback/report";i&&!t?y(f,l,!0):navigator.sendBeacon?navigator.sendBeacon(f+"?_ctype=json&auth="+h,l):y(f,l,!1)}}function y(t,e,i){window.XMLHttpRequest&&t&&((0,a.default)({method:"POST",headers:{auth:h,"Content-Type":"application/json"},url:t,body:e,async:i}),i&&(S&&clearTimeout(S),S=setTimeout(function(){v(!1)},l)))}function m(){return i.isLive(t)}function E(){b.logger&&b.logger.setPlayType(m()?o.PLAYTYPE.LIVE:o.PLAYTYPE.VOD)}var b=this;this.logger=new r.default(t,i);var w=n.guid,T=null,S=null;this.setReportInterval=function(t){l=1e3*Math.max(60,t||n.reportInterval||0)}.bind(this),this.setReportInterval(l),this.disconnect=function(){f(),this.agent=null,this.logger=null,S&&clearTimeout(S)}.bind(this),this.setAgent=function(t){this.agent=t}.bind(this),this.saveState=function(){this.logger&&this.logger.saveCurrentState(w)}.bind(this);var I={onTimeUpdate:function(){},onError:function(){},onPause:p.bind(null,o.EVENT.player.state_pause),onPlay:p.bind(null,o.EVENT.player.state_play),onBuffering:p.bind(null,o.EVENT.player.state_buffering),onEnd:function(){p(o.EVENT.player.state_end),d(u.DEFAULT),f()},onSeekEnd:function(){if(this.logger){var t=this.logger.lastSegmentPercentage,e=this.logger.getPlayerPercentage();if(0!==t||0!==e){var i=t<e?o.EVENT.player.state_seek_forward:o.EVENT.player.state_seek_reverse;this.logger.onPlayerStateChange(i,e,e),this.saveState()}}}.bind(this),onCanPlay:function(){g(),setTimeout(function(){v(!1)},1e3)}};!function(){if(i.setEventHandlers&&i.setEventHandlers(t,I),window.onbeforeunload){var e=window.onbeforeunload;window.onbeforeunload=function(){d(u.NONE),f(),e()}}else window.onbeforeunload=function(){d(u.NONE),f()};if(window.onunload){var n=window.onunload;window.onunload=function(){d(u.NONE),f(),n()}}else window.onunload=function(){d(u.NONE),f()}}()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),r=function(t){return t&&t.__esModule?t:{default:t}}(i(29));e.default=function(t,e){var i=new Date;this.startTime=i.getTime(),this.playerState=n.EVENT.player.state_none,this.playType=n.PLAYTYPE.LIVE,this.firstEventTime=0,this.firstPlayTime=0,this.firstBufferTime=0,this.bufferTime=0,this.lastTime=0,this.lastEvent=0,this.stallCount=0,this.stallTime=0,this.agentEventList="",this.rawEventList="",this.resetPlayTime=!1,this.lastFlashPlayStateTime=0,this.mediaEnded=!1,this.playDuration=0,this.lastReportTime=-1,this.duration=0,this.percentage=0,this.maxPercentage=0,this.buffering=!1,this.segmentList="",this.lastSegmentEvent="",this.lastSegmentPercentage=0,this.playStateCallback=null,this.getTime=function(){return(new Date).getTime()-this.startTime},this.getLastEvent=function(){return this.lastEvent},this.timeToPercent=function(t){if(0==this.duration)return 0;var e=this.duration?Math.round(1e3*t/this.duration)/10:0;return Math.min(e,100)},this.getPlayerPercentage=function(){var i=e.getPlayerDuration(t),n=e.getPlayerPosition(t);return(0,r.default)(i)&&(0,r.default)(n)&&0!=i&&(this.duration=i,this.percentage=Math.round(n/this.duration)/10,this.percentage=Math.min(this.percentage,100),this.maxPercentage=Math.max(this.maxPercentage,this.percentage)),this.percentage},this.getCachedPlayerPercentage=function(){return this.percentage},this.getMaxPercentage=function(){return this.maxPercentage},this.getStartTime=function(){return this.startTime},this.getPlayDuration=function(){return this.lastEvent==n.EVENT.player.state_play&&this.onPlayerStateChange(n.EVENT.player.state_play),this.playDuration},this.isPlaying=function(){return e.isPlaying(t)},this.updateLastReportTime=function(){this.lastReportTime=this.getTime()},this.hasNewReportingData=function(){return this.isPlaying()||this.lastTime>this.lastReportTime},this.getBufferTime=function(){return this.bufferTime},this.getPrepareTime=function(){return this.firstPlayTime},this.getStallCount=function(){return this.stallCount},this.getStallTime=function(){return this.stallTime},this.getSegmentList=function(){return this.segmentList},this.getEventList=function(){var t=this.agentEventList+this.rawEventList;if(t.length>=n.LIMITS.LIMIT_REPORT_EVENTS_INFO){var e=(t=t.substring(0,n.LIMITS.LIMIT_REPORT_EVENTS_INFO)).lastIndexOf(":");e>0&&(t=t.substring(0,e))}return t},this.isMediaEnded=function(){return this.mediaEnded},this.isBuffering=function(){return this.buffering},this.addSegment=function(t,e,i){var r=this.segmentList+"("+t+","+e+","+i+")";r.length<n.LIMITS.LIMIT_REPORT_SEGMENTS_INFO&&(this.segmentList=r)},this.addAgentEvent=function(t){var e=this.agentEventList+":"+t+":"+this.getTime();e.length<n.LIMITS.LIMIT_REPORT_EVENTS_INFO&&(this.agentEventList=e)},this.onPlayerStateChange=function(t,e,i){if(t!=n.EVENT.player.state_ready){var r=this.getTime(),o=r-this.lastTime,s=this.getCachedPlayerPercentage();if(this.lastEvent==n.EVENT.player.state_play&&(this.playDuration+=r-this.lastTime),this.lastEvent==t)return void(this.lastTime=r);0==this.firstEventTime&&(this.firstEventTime=r),0==this.resetPlayTime&&0!=this.firstPlayTime&&this.lastEvent==n.EVENT.player.state_play&&t==n.EVENT.player.state_buffering&&o<10&&(this.resetPlayTime=!0,this.firstPlayTime=0),0==this.firstBufferTime&&t==n.EVENT.player.state_buffering&&(this.firstBufferTime=r),0!=this.firstPlayTime&&this.lastEvent==n.EVENT.player.state_buffering&&t!=n.EVENT.player.state_buffering&&o>10&&(this.stallCount++,this.stallTime+=r-this.lastTime),0===this.firstPlayTime&&t===n.EVENT.player.state_play&&(this.firstPlayTime=r,this.bufferTime=r-this.firstBufferTime),this.rawEventList+=":"+t+":"+r,t==n.EVENT.player.state_end&&(this.percentage=this.maxPercentage=100,this.mediaEnded=!0),this.buffering=t==n.EVENT.player.state_buffering,t==n.EVENT.player.state_stop&&(this.addSegment(this.lastSegmentPercentage,s,"st"),this.lastSegmentPercentage=0),t==n.EVENT.player.state_pause&&(this.addSegment(this.lastSegmentPercentage,s,"ps"),this.lastSegmentPercentage=s),t==n.EVENT.player.state_forward&&(this.addSegment(this.lastSegmentPercentage,e,"ff"),this.lastSegmentPercentage=i),t==n.EVENT.player.state_reverse&&(this.addSegment(this.lastSegmentPercentage,e,"rw"),this.lastSegmentPercentage=i),t==n.EVENT.player.state_exit&&(this.lastEvent==n.EVENT.player.state_stop&&o<100?this.addSegment(s,s,"ex"):this.addSegment(this.lastSegmentPercentage,s,"ex")),this.lastTime=r,this.lastEvent=t,this.playStateCallback&&this.playStateCallback(t)}},this.saveLocalStorage=function(t,e){if("undefined"!=typeof Storage)try{localStorage.setItem(t,e)}catch(t){return void console.log(t)}},this.readLocalStorage=function(t){if("undefined"!=typeof Storage)try{return localStorage.getItem(t)}catch(t){return console.log(t),null}},this.removeLocalStorage=function(t){if("undefined"!=typeof Storage)try{localStorage.removeItem(t)}catch(t){return void console.log(t)}},this.saveCurrentState=function(t){if(t){var e=this.readLocalStorage("ksdn.current.report.session.id");e&&e!=t&&this.removeLocalStorage("ksdn.report.session.data."+e),this.saveLocalStorage("ksdn.current.report.session.id",t);var i={startTime:this.startTime,playerState:this.playerState,firstEventTime:this.firstEventTime,firstPlayTime:this.firstPlayTime,firstBufferTime:this.firstBufferTime,segmentList:this.segmentList,stallCount:this.stallCount,stallTime:this.stallTime,bufferTime:this.getBufferTime(),playDuration:this.playDuration,agentEventList:this.agentEventList,rawEventList:this.rawEventList,lastTime:this.lastTime,lastEvent:this.lastEvent,playType:this.playType};this.saveLocalStorage("ksdn.report.session.data."+t,JSON.stringify(i))}},this.readSavedState=function(t){if(!t)return null;var e=this.readLocalStorage("ksdn.current.report.session.id");if(e){if(e==t){var i=this.readLocalStorage("ksdn.report.session.data."+t);return JSON.parse(i)}this.removeLocalStorage("ksdn.report.session.data."+e)}return null},this.restoreSavedState=function(t){if(t){var e=this.readSavedState(t);if(e){this.startTime=e.startTime,this.playerState=e.playerState,this.firstEventTime=e.firstEventTime,this.firstPlayTime=e.firstPlayTime,this.firstBufferTime=e.firstBufferTime,this.segmentList=e.segmentList,this.stallCount=e.stallCount,this.stallTime=e.stallTime,this.bufferTime=e.bufferTime,this.playDuration=e.playDuration,this.lastTime=e.lastTime,this.lastEvent=e.lastEvent,this.playType=e.playType,this.agentEventList=e.agentEventList;var i=this.getTime(),r=e.rawEventList+":"+n.EVENT.player.state_reload+":"+i;this.rawEventList=r}}},this.setPlayType=function(t){this.playType=t},this.getPlayType=function(){return this.playType}}},function(t,e,i){var n=i(30).isFinite;t.exports=function(t){return"number"==typeof t&&n(t)}},function(t,e,i){var n=i(31),r="object"==typeof self&&self&&self.Object===Object&&self,o=n||r||Function("return this")();t.exports=o},function(t,e,i){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(e,i(0))}])}).call(this,i(110).Buffer)},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=i(112),r=i(113),o=i(114);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,i){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return h(this,t,e,i)}function h(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!u.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,i),r=(t=a(t,n)).write(e,i);r!==n&&(t=t.slice(0,r));return t}(t,e,i):function(t,e){if(u.isBuffer(e)){var i=0|p(e.length);return 0===(t=a(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(c(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function f(t,e){var i=e.length<0?0:0|p(e.length);t=a(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return j(t).length;default:if(n)return H(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function v(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:y(t,e,i,n,r);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,n,r){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,i/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var c=-1;for(o=i;o<a;o++)if(h(t,o)===h(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(i+u>a&&(i=a-u),o=i;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(h(t,o+f)!==h(e,f)){l=!1;break}if(l)return o}return-1}function m(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[i+s]=a}return s}function E(t,e,i,n){return V(H(e,t.length-i),t,i,n)}function b(t,e,i,n){return V(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function w(t,e,i,n){return b(t,e,i,n)}function T(t,e,i,n){return V(j(e),t,i,n)}function S(t,e,i,n){return V(function(t,e){for(var i,n,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),n=i>>8,r=i%256,o.push(r),o.push(n);return o}(e,t.length-i),t,i,n)}function I(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function _(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var o,s,a,u,h=t[r],c=null,l=h>239?4:h>223?3:h>191?2:1;if(r+l<=i)switch(l){case 1:h<128&&(c=h);break;case 2:128==(192&(o=t[r+1]))&&(u=(31&h)<<6|63&o)>127&&(c=u);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),r+=l}return function(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=R));return i}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,i){return h(null,t,e,i)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,i){return function(t,e,i,n){return c(e),e<=0?a(t,e):void 0!==i?"string"==typeof n?a(t,e).fill(i,n):a(t,e).fill(i):a(t,e)}(null,t,e,i)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=u.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var s=t[i];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?_(this,0,t):function(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,i);case"utf8":case"utf-8":return _(this,e,i);case"ascii":return A(this,e,i);case"latin1":case"binary":return O(this,e,i);case"base64":return I(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,i,n,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(n>>>=0),s=(i>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(n,r),c=t.slice(e,i),l=0;l<a;++l)if(h[l]!==c[l]){o=h[l],s=c[l];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},u.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},u.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},u.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return m(this,t,e,i);case"utf8":case"utf-8":return E(this,t,e,i);case"ascii":return b(this,t,e,i);case"latin1":case"binary":return w(this,t,e,i);case"base64":return T(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function A(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function O(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function C(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=e;o<i;++o)r+=B(t[o]);return r}function k(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function N(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,i,n,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function D(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function L(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function x(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function M(t,e,i,n,o){return o||x(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function U(t,e,i,n,o){return o||x(t,0,i,8),r.write(t,e,i,n,52,8),i+8}u.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;i=new u(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+t]}return i},u.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||N(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},u.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||N(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},u.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||N(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||N(t,e,this.length);for(var n=e,r=1,o=this[t+--n];n>0&&(r*=256);)o+=this[t+--n]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),r.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||P(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},u.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||P(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+i},u.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);P(this,t,e,i,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<i&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},u.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);P(this,t,e,i,r-1,-r)}var o=i-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},u.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,i){return M(this,t,e,!0,i)},u.prototype.writeFloatBE=function(t,e,i){return M(this,t,e,!1,i)},u.prototype.writeDoubleLE=function(t,e,i){return U(this,t,e,!0,i)},u.prototype.writeDoubleBE=function(t,e,i){return U(this,t,e,!1,i)},u.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,o=n-i;if(this===t&&i<e&&e<n)for(r=o-1;r>=0;--r)t[r+e]=this[r+i];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},u.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var s=u.isBuffer(t)?t:H(new u(t,n).toString()),a=s.length;for(o=0;o<i-e;++o)this[o+e]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){var i;e=e||1/0;for(var n=t.length,r=null,o=[],s=0;s<n;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function j(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(this,i(111))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";e.byteLength=function(t){return 3*t.length/4-h(t)},e.toByteArray=function(t){var e,i,n,s,a,u=t.length;s=h(t),a=new o(3*u/4-s),i=s>0?u-4:u;var c=0;for(e=0;e<i;e+=4)n=r[t.charCodeAt(e)]<<18|r[t.charCodeAt(e+1)]<<12|r[t.charCodeAt(e+2)]<<6|r[t.charCodeAt(e+3)],a[c++]=n>>16&255,a[c++]=n>>8&255,a[c++]=255&n;2===s?(n=r[t.charCodeAt(e)]<<2|r[t.charCodeAt(e+1)]>>4,a[c++]=255&n):1===s&&(n=r[t.charCodeAt(e)]<<10|r[t.charCodeAt(e+1)]<<4|r[t.charCodeAt(e+2)]>>2,a[c++]=n>>8&255,a[c++]=255&n);return a},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,o="",s=[],a=0,u=i-r;a<u;a+=16383)s.push(c(t,a,a+16383>u?u:a+16383));1===r?(e=t[i-1],o+=n[e>>2],o+=n[e<<4&63],o+="=="):2===r&&(e=(t[i-2]<<8)+t[i-1],o+=n[e>>10],o+=n[e>>4&63],o+=n[e<<2&63],o+="=");return s.push(o),s.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function c(t,e,i){for(var r,o,s=[],a=e;a<i;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],s.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,u=(1<<a)-1,h=u>>1,c=-7,l=i?r-1:0,f=i?-1:1,p=t[e+l];for(l+=f,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+l],l+=f,c-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=h}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var s,a,u,h=8*o-r-1,c=(1<<h)-1,l=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(e*u-1)*Math.pow(2,r),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,r),s=0));r>=8;t[i+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;t[i+p]=255&s,p+=d,s/=256,h-=8);t[i+p-d]|=128*g}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(50),r=i(116),o=function(){function t(t,e,i){this.$scope=t,this.$log=e,this.ksdn=i,this.vm={playerConfig:null}}return t.prototype.$onInit=function(){this.$scope.config&&this.$scope.webcast?this.vm.playerConfig=this.getPlayerConfig(this.$scope.webcast):this.$log.error("basic config for bitdash player is missing!")},t.prototype.getAudioOnlyPlayerConfig=function(){return this.$scope.webcast.theme.audioOnlyFileUrl?{audioOnlyOverlayConfig:{backgroundImageUrl:this.$scope.webcast.theme.audioOnlyFileUrl,hiddeIndicator:!0}}:{}},t.prototype.getPlayerConfig=function(t){var e=this.$scope.options||{},i=this.getActiveLanguage(t.languages,t.language),o=i.player;return e.forcedState===r.WebcastState.LIVE&&i.playerLive&&(o=i.playerLive),e.forcedPlayer&&(o.type=e.forcedPlayer),o.type===n.PlayerPlaybackType.KSDN&&(o.p2p.token=this.createKSDNPublicToken(e.userId,o.p2p)),o},t.prototype.getActiveLanguage=function(t,e){return e?t.find(function(t){return e===t.language}):t[0]},t.prototype.createKSDNPublicToken=function(t,e){return this.ksdn.createPublicToken(t,e.urn)},t.$inject=["$scope","$log","ksdn"],t}();e.BitmovinPlayerController=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.LIVE="live",t.POST_LIVE="postlive",t.ONDEMAND="ondemand"}(e.WebcastState||(e.WebcastState={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(49),r=i(118),o=i(50),s=i(119);function a(t,i,r,a){return{controller:"MiBitdashController",controllerAs:"bitdashVm",replace:!0,restrict:"EA",scope:{config:"=",options:"=?",playerApiReady:"&?",webcast:"="},template:'<div id="mi-bitdash-player" width="100%" height="auto"></div>',link:function(u,h,c,l){var f,p="mi-bitdash-player",d=u.webcast,g=u.config,v=u.options&&u.options.recoverState?u.options.recoverState:null,y=u.options&&u.options.youbora?u.options.youbora:null;function m(){var t={hls:l.vm.playerConfig.hlsUrl};g.source={},w().then(function(){return f.load(t).then(function(){return T()}).catch(function(){S()})}).catch(function(t){return E(t)})}function E(t){i.error("player error:",t)}function b(e){var i="audio-only"===d.layout.layout,n=t.window.miBitmovinUi.playerui.UIManager.Factory;i?n.buildAudioOnlyUI(e,l.getAudioOnlyPlayerConfig()):n.buildAudioVideoUI(e);var r,o=(r="bitmovinplayer-container",t.document.getElementsByClassName(r)[0]);o&&(o.style.minWidth="175px",o.style.minHeight="101px",t.document.getElementById("bitmovinplayer-video-mi-bitdash-player").setAttribute("title",d.name))}function w(){var n=t.window.bitmovin.player(p),r=function(){var t=[];if(l.vm.playerConfig.videoId){var n=new s.AnalyticsPlugin(l.vm.playerConfig.videoId,i);t.push(n)}if(l.vm.playerConfig.videoTracks){var r=new e.deps.SubtitlesPlugin(l.vm.playerConfig.videoTracks);t.push(r)}return t}(),o=y?new a.Plugin({accountCode:y.accountCode}):null;return g.style={ux:!1},n.setup(g).then(function(t){return b(t),(f=new e.deps.PlayerApi(t)).setupPlugins(r,v),o&&o.setAdapter(new a.adapters.Bitmovin(t)),t})}function T(){v&&(f.setVolume(v.volume),v.seekTo&&f.seek(v.seekTo),v.isMuted&&f.mute()),S()}function S(){var t={playerApi:f.getPublicApi()};(u.playerApiReady||n.noop)({$event:t})}!function(){if(!l.vm.playerConfig)return;switch(l.vm.playerConfig.type){case o.PlayerPlaybackType.KSDN:!function(){g.source={};var t=l.vm.playerConfig.p2p.token,e=l.vm.playerConfig.p2p.urn,n=l.vm.playerConfig.p2p.host,o=l.vm.playerConfig.hlsUrl;w().then(function(s){var a,u=new r.Players.Bitmovin({auth:t,host:n,fallbackSrc:o}),h=(a="Kollective plugin error: ",{onAgentNotDetected:function(t,e){i.error(a+" Machine does not have a Kollective Agent installed. Reason:",e)},onAgentRejected:function(t,e){e.provisionedForCurrentUrn||i.error(a+" Agent detected but not provisioned for URN"),e.notBlackedOut||i.error(a+" Agent detected but is currently blacked out")},onPlaybackRequestFailure:function(t,e){return i.error(a+"  Failure to retrieve playback info for the provided URN:",e),!0},onPrimingFailure:function(t){i.error(a+"  Agent fails to start priming the stream through the Kollective ECDN")},onSessionFailure:function(){i.error(a+" Failure to start a session with the agent")},setSource:function(t,e){t.load({hls:e}).then(function(){return T()}).catch(function(t){return E(t)})}});u.play(s,e,h)}).catch(function(t){return E(t)})}();break;case o.PlayerPlaybackType.HIVE:!function(){var e=!1;g.source={hls_ticket:l.vm.playerConfig.p2p.url};var n={HiveJava:{onError:function(){e=!0}},debugLevel:"off"},r=t.window.bitmovin.player(p);t.window.bitmovin.initHiveSDN(r,n),w().then(function(){return T()}).catch(function(t){e?(i.warn("Hive plugin failed, fallback to default player. Error: "+t),setTimeout(function(){m()},60)):E(t)})}();break;default:m()}}(),u.$on("$destroy",function(){f&&(f.destroy(),f=null)})}}}e.deps={SubtitlesPlugin:s.SubtitlesPlugin,PlayerApi:r.PlayerApi},a.$inject=["$window","$log","ksdn","youbora"],e.BitmovinPlayerDirective=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(25),r=function(){function t(t){this.playerRef=t,this.eventListeners={ended:[],playing:[],timechanged:[],onSourceLoaded:[],onSourceUnloaded:[]},this.plugins=[],this.addListeners()}return t.prototype.setupPlugins=function(t,e){var i=this;this.plugins=t,this.plugins.forEach(function(t){return e?t.initRecovered(i,e):t.init(i)})},t.prototype.seek=function(t,e){return this.playerRef.seek(t,e)},t.prototype.on=function(t,e){this.eventListeners[t].push(e)},t.prototype.off=function(t,e){this.eventListeners[t]=this.eventListeners[t].filter(function(t){return t!==e})},t.prototype.pause=function(t){this.playerRef.isPlaying()&&this.playerRef.pause(t)},t.prototype.mute=function(t){this.playerRef.mute(t)},t.prototype.hasEnded=function(){return this.playerRef.hasEnded()},t.prototype.getCurrentTime=function(){return this.playerRef.getCurrentTime()},t.prototype.isPaused=function(){return this.playerRef.isPaused()},t.prototype.isMuted=function(){return this.playerRef.isMuted()},t.prototype.getVolume=function(){return this.playerRef.getVolume()},t.prototype.setVolume=function(t,e){this.playerRef.setVolume(t,e)},t.prototype.getDuration=function(){return this.playerRef.getDuration()},t.prototype.addSubtitle=function(t,e){var i=this.mapVideoTrackConfigToBitmovinSubtitle(t,e);this.playerRef.addSubtitle(i)},t.prototype.getSubtitle=function(){return this.playerRef.getSubtitle()},t.prototype.setSubtitle=function(t){return this.playerRef.setSubtitle(t)},t.prototype.load=function(t){return this.playerSource=t,this.playerRef.load(t)},t.prototype.reload=function(){var t=this;return this.playerSource?(this.playerRef.unload(),new Promise(function(e,i){t.load(t.playerSource).then(function(){e("loaded")}).catch(function(t){i(t)})})):Promise.reject()},t.prototype.destroy=function(t){this.playerRef.unload(),this.plugins.forEach(function(e){return e.destroy(t)}),this.playerRef.destroy()},t.prototype.getPublicApi=function(){var t=this;return{destroy:function(e){return t.destroy(e)},getCurrentTime:function(){return t.getCurrentTime()},getDuration:function(){return t.getDuration()},getVolume:function(){return t.getVolume()},hasEnded:function(){return t.hasEnded()},isMuted:function(){return t.isMuted()},isPaused:function(){return t.isPaused()},mute:function(e){return t.mute(e)},off:function(e,i){return t.off(e,i)},on:function(e,i){return t.on(e,i)},pause:function(e){return t.pause(e)},reload:function(){return t.reload()},seek:function(e,i){return t.seek(e,i)},setVolume:function(e,i){return t.setVolume(e,i)},getSubtitle:function(){return t.getSubtitle()}}},t.prototype.mapVideoTrackConfigToBitmovinSubtitle=function(t,e){return{id:e,lang:t.language.toLowerCase(),label:t.label,kind:this.mapVideoTrackType(t.type),url:t.source}},t.prototype.mapVideoTrackType=function(t){return t.toLowerCase().includes("caption")?"caption":"subtitle"},t.prototype.addListeners=function(){var t=this;this.playerRef.addEventHandler(this.playerRef.EVENT.ON_TIME_CHANGED,function(e){return t.eventListeners[n.PlayerEvent.TimeChanged].forEach(function(t){return t({time:e.time})})}),this.playerRef.addEventHandler(this.playerRef.EVENT.ON_PLAY,function(){return t.eventListeners[n.PlayerEvent.PLAY].forEach(function(t){return t()})}),this.playerRef.addEventHandler(this.playerRef.EVENT.ON_PLAYBACK_FINISHED,function(){return t.eventListeners[n.PlayerEvent.ENDED].forEach(function(t){return t()})}),this.playerRef.addEventHandler(this.playerRef.EVENT.ON_SOURCE_LOADED,function(){return t.eventListeners[n.PlayerEvent.ON_SOURCE_LOADED].forEach(function(t){return t()})}),this.playerRef.addEventHandler(this.playerRef.EVENT.ON_SOURCE_UNLOADED,function(){return t.eventListeners[n.PlayerEvent.ON_SOURCE_UNLOADED].forEach(function(t){return t()})})},t}();e.PlayerApi=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0);n.__exportStar(i(120),e),n.__exportStar(i(121),e)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(25),r=function(){function t(t){var e=this;this.videoTrackConfigs=t,this.recoverSubtitleId=null,this.sourceLoadedHandler=function(){return e.addSubtitles()}}return t.prototype.init=function(t){this.playerApi=t,this.addListeners()},t.prototype.initRecovered=function(t,e){this.playerApi=t,this.recoverSubtitleId=e.selectedSubtitleId,this.addListeners()},t.prototype.destroy=function(){this.removeListeners()},t.prototype.addSubtitles=function(){var t=this;this.videoTrackConfigs.forEach(function(e,i){return t.playerApi.addSubtitle(e,"subtitle"+i)}),this.recoverSubtitleId&&(this.playerApi.setSubtitle(this.recoverSubtitleId),this.recoverSubtitleId=null)},t.prototype.addListeners=function(){this.playerApi.on(n.PlayerEvent.ON_SOURCE_LOADED,this.sourceLoadedHandler)},t.prototype.removeListeners=function(){this.playerApi.off(n.PlayerEvent.ON_SOURCE_LOADED,this.sourceLoadedHandler)},t}();e.SubtitlesPlugin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(25),o=i(122);e.deps={axios:o,window:window};var s=function(){function t(t,i){var n=this;this.videoId=t,this.logger=i,this.time=0,this.videoPlayPressed=!1,this.http=e.deps.axios.create({baseURL:"https://c.video-cdn.net/"}),this.beforeUnloadHandler=function(){return n.sendExitEvent()},this.playHandler=function(){return n.sendPlayEvent()},this.endedHandler=function(){n.removeBeforeUnloadEvent(),n.videoPlayPressed=!1,n.playerApi.on(r.PlayerEvent.PLAY,n.playHandler),n.sendExitEvent()}}return t.prototype.init=function(t){this.playerApi=t,this.sendViewEvent(),this.addListeners()},t.prototype.initRecovered=function(t,e){var i=this;this.playerApi=t,this.time=e.seekTo||0,e.hasEnded||!e.playPressed?this.addListeners():(this.videoPlayPressed=!0,this.addBeforeUnloadEvent(),this.playerApi.on(r.PlayerEvent.ENDED,this.endedHandler),this.playerApi.on(r.PlayerEvent.TimeChanged,function(t){return i.onTimeChanged(t)}))},t.prototype.destroy=function(t){t&&t.pageChange&&this.videoPlayPressed&&this.sendExitEvent(),this.removeBeforeUnloadEvent()},t.prototype.addListeners=function(){var t=this;this.playerApi.on(r.PlayerEvent.PLAY,this.playHandler),this.playerApi.on(r.PlayerEvent.ENDED,this.endedHandler),this.playerApi.on(r.PlayerEvent.TimeChanged,function(e){return t.onTimeChanged(e)})},t.prototype.sendViewEvent=function(){this.sendEvent("view",{url:document.location.href})},t.prototype.sendPlayEvent=function(){this.videoPlayPressed=!0,this.addBeforeUnloadEvent(),this.playerApi.off(r.PlayerEvent.PLAY,this.playHandler),this.sendEvent("play",{url:document.location.href})},t.prototype.sendExitEvent=function(){this.sendEvent("exit",{"current-time":this.time})},t.prototype.onTimeChanged=function(t){this.time=t.time},t.prototype.sendEvent=function(t,e){var i=this,r=n.__assign({event:t,"video-id":this.videoId},e);this.http.get("event?",{params:r}).catch(function(t){i.logger.error("mi-analytics error",t)})},t.prototype.addBeforeUnloadEvent=function(){e.deps.window.addEventListener("beforeunload",this.beforeUnloadHandler)},t.prototype.removeBeforeUnloadEvent=function(){e.deps.window.removeEventListener("beforeunload",this.beforeUnloadHandler)},t}();e.AnalyticsPlugin=s},function(t,e,i){t.exports=i(123)},function(t,e,i){"use strict";var n=i(7),r=i(51),o=i(125),s=i(26);function a(t){var e=new o(t),i=r(o.prototype.request,e);return n.extend(i,o.prototype,e),n.extend(i,e),i}var u=a(s);u.Axios=o,u.create=function(t){return a(n.merge(s,t))},u.Cancel=i(55),u.CancelToken=i(140),u.isCancel=i(54),u.all=function(t){return Promise.all(t)},u.spread=i(141),t.exports=u,t.exports.default=u},function(t,e){function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(i(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,i){"use strict";var n=i(26),r=i(7),o=i(135),s=i(136);function a(t){this.defaults=t,this.interceptors={request:new o,response:new o}}a.prototype.request=function(t){"string"==typeof t&&(t=r.merge({url:arguments[0]},arguments[1])),(t=r.merge(n,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[s,void 0],i=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)i=i.then(e.shift(),e.shift());return i},r.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,i){return this.request(r.merge(i||{},{method:t,url:e}))}}),r.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,i,n){return this.request(r.merge(n||{},{method:t,url:e,data:i}))}}),t.exports=a},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,h=[],c=!1,l=-1;function f(){c&&u&&(c=!1,u.length?h=u.concat(h):l=-1,h.length&&p())}function p(){if(!c){var t=a(f);c=!0;for(var e=h.length;e;){for(u=h,h=[];++l<e;)u&&u[l].run();l=-1,e=h.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new d(t,e)),1!==h.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";var n=i(7);t.exports=function(t,e){n.forEach(t,function(i,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[n])})}},function(t,e,i){"use strict";var n=i(53);t.exports=function(t,e,i){var r=i.config.validateStatus;i.status&&r&&!r(i.status)?e(n("Request failed with status code "+i.status,i.config,null,i.request,i)):t(i)}},function(t,e,i){"use strict";t.exports=function(t,e,i,n,r){return t.config=e,i&&(t.code=i),t.request=n,t.response=r,t}},function(t,e,i){"use strict";var n=i(7);function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,i){if(!e)return t;var o;if(i)o=i(e);else if(n.isURLSearchParams(e))o=e.toString();else{var s=[];n.forEach(e,function(t,e){null!=t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),s.push(r(e)+"="+r(t))}))}),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,i){"use strict";var n=i(7),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,i,o,s={};return t?(n.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),i=n.trim(t.substr(o+1)),e){if(s[e]&&r.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([i]):s[e]?s[e]+", "+i:i}}),s):s}},function(t,e,i){"use strict";var n=i(7);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(t){var n=t;return e&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=r(window.location.href),function(e){var i=n.isString(e)?r(e):e;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0}},function(t,e,i){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(){this.message="String contains an invalid character"}r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,i,o=String(t),s="",a=0,u=n;o.charAt(0|a)||(u="=",a%1);s+=u.charAt(63&e>>8-a%1*8)){if((i=o.charCodeAt(a+=.75))>255)throw new r;e=e<<8|i}return s}},function(t,e,i){"use strict";var n=i(7);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,i,r,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),n.isString(r)&&a.push("path="+r),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,i){"use strict";var n=i(7);function r(){this.handlers=[]}r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){n.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,i){"use strict";var n=i(7),r=i(137),o=i(54),s=i(26),a=i(138),u=i(139);function h(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return h(t),t.baseURL&&!a(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return h(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(h(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,i){"use strict";var n=i(7);t.exports=function(t,e,i){return n.forEach(i,function(i){t=i(t,e)}),t}},function(t,e,i){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,i){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,i){"use strict";var n=i(55);function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var i=this;t(function(t){i.reason||(i.reason=new n(t),e(i.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},function(t,e,i){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,i){var n=i(27),r=i(69);n.adapters.Bitmovin=n.StandardAdapter.extend({getVersion:function(){return r.version+"-"+r.name+"-"+r.tech},getPlayhead:function(){return this.playingAds?this.lastPlayhead:this.player.getCurrentTime()},getDuration:function(){return this.player.getDuration()},getPlayrate:function(){return this.flags.isPaused?0:void 0!==this.player.getPlaybackSpeed()?this.player.getPlaybackSpeed():1},getDroppedFrames:function(){return this.player.getDroppedFrames()},getBitrate:function(){return this.player.getPlaybackVideoData&&this.player.getPlaybackVideoData()&&this.player.getPlaybackVideoData().bitrate?this.player.getPlaybackVideoData().bitrate:-1},getRendition:function(){if(this.player.getPlaybackVideoData&&this.player.getPlaybackVideoData()){var t=this.player.getPlaybackVideoData();return t.bitrate?t.width&&t.height?n.Util.buildRenditionString(t.width,t.height,t.bitrate):t.bitrate:this.player.getPlaybackVideoData().id}return-1},getIsLive:function(){return this.player.isLive()},getResource:function(){if(this.player.getConfig){var t=this.player.getConfig().source;if(t)return t.dash||t.hls||t.progressive}return"unknown"},getPlayerName:function(){return"Bitmovin"},getPlayerVersion:function(){return bitmovin.player.version},initializeAdapter:function(){this.monitorPlayhead(!0,!0)},getListenersList:function(){var t=this.player.EVENT||bitmovin.player.EVENT;return[{suscriber:"addEventHandler",unsuscriber:"removeEventHandler",events:{[t.ON_DOWNLOAD_FINISHED]:null,[t.ON_DVR_WINDOW_EXCEEDED]:null,[t.ON_ERROR]:this.errorListener,[t.ON_FULLSCREEN_ENTER]:null,[t.ON_FULLSCREEN_EXIT]:null,[t.ON_HIDE_CONTROLS]:null,[t.ON_METADATA]:null,[t.ON_PAUSED]:this.pauseListener,[t.ON_PLAY]:this.playListener,[t.ON_PLAYING]:this.playingListener,[t.ON_PLAYBACK_FINISHED]:this.endedListener,[t.ON_PLAYER_CREATED]:null,[t.ON_PLAYER_RESIZE]:null,[t.ON_READY]:null,[t.ON_SEEK]:this.seekingListener,[t.ON_SEEKED]:this.seekedListener,[t.ON_SEGMENT_PLAYBACK]:this.joinListener,[t.ON_SEGMENT_REQUEST_FINISHED]:null,[t.ON_SOURCE_LOADED]:null,[t.ON_SOURCE_UNLOADED]:null,[t.ON_STALL_ENDED]:null,[t.ON_STALL_STARTED]:null,[t.ON_STOP_BUFFERING]:this.joinListener,[t.ON_TIME_CHANGED]:this.joinChangedListener,[t.ON_TIME_SHIFT]:null,[t.ON_TIME_SHIFTED]:null,[t.ON_VIDEO_ADAPTATION]:null,[t.ON_VIDEO_DOWNLOAD_QUALITY_CHANGE]:null,[t.ON_VIDEO_DOWNLOAD_QUALITY_CHANGED]:null,[t.ON_VIDEO_PLAYBACK_QUALITY_CHANGED]:null,[t.ON_VR_ERROR]:null,[t.ON_VR_MODE_CHANGED]:null,[t.ON_WARNING]:null,[t.ON_SEGMENT_PLAYBACK]:null,[t.ON_STALL_ENDED]:null,[t.ON_STALL_STARTED]:null,[t.ON_AD_BREAK_FINISHED]:this.endAdsListener,[t.ON_AD_BREAK_STARTED]:this.startAdsListener}}]},playListener:function(t){this.plugin.getAdsAdapter()||this.plugin.setAdsAdapter(new n.adapters.Bitmovin.NativeAdsAdapter(this.player)),this.fireStart(),this.fireResume()},joinListener:function(t){this.fireJoin()},pauseListener:function(t){this.flags.isSeeking||this.firePause()},playingListener:function(t){this.fireStart()},errorListener:function(t){this.fireError(t.code,t.message),t.code>=1e3&&t.code<=4999&&this.fireStop()},seekingListener:function(t){this.fireSeekBegin()},seekedListener:function(t){this.monitor.skipNextTick()},endedListener:function(t){this.fireStop()},joinChangedListener:function(t){this.getPlayhead()>0&&(this.fireStart(),this.fireJoin()),this.lastPlayhead=this.getPlayhead()},endAdsListener:function(t){this.playingAds=!1,this.fireResume()},startAdsListener:function(t){this.playingAds=!0,this.firePause()}},{NativeAdsAdapter:i(171)}),t.exports=n.adapters.Bitmovin},function(t){t.exports={name:"youboralib",type:"lib",tech:"js",author:"Jordi Aguilar",version:"6.4.24",built:"2019-04-15",repo:"https://bitbucket.org/npaw/lib-plugin-js.git"}},function(t,e){t.exports=function(){Function.prototype.bind=Function.prototype.bind||function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice,i=e.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r?this:t||window,i.concat(e.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o},Array.prototype.forEach=Array.prototype.forEach||function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function!");for(var i=this.length,n=0;n<i;n++)t.call(e,this[n],n,this)}}},function(t,e){var i=function(){};t.exports=function(t){if(arguments.length>1)throw Error("Second argument not supported");if(null===t)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof t)throw TypeError("Argument must be an object");return i.prototype=t,new i}},function(t,e){t.exports={cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(t){if(t){if(0===t.indexOf("TCP_HIT")||0===t.indexOf("TCP_MEM_HIT")||0===t.indexOf("TCP_IMS_HIT"))return 1;if(0===t.indexOf("TCP_MISS"))return 2}return 0}}},function(t,e){t.exports={cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(t){switch(t){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"AKAMAI",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom\s.+\(.+\/(.+)\).*/}],parseType:function(t){switch(t){case"TCP_HIT":return 1;case"TCP_MISS":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(t){switch(t){case"c":case"x":return 1;default:return 2}}}},function(t,e){t.exports={cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(t){switch(t){case"HIT":return 1;case"MISS":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"TELEFO",parsers:[{element:"host+type",headerName:"x-tcdn",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"x-tcdn":"host"},parseType:function(t){if(t){if(-1!==t.indexOf("p")||-1!==t.indexOf("c"))return 1;if(-1!==t.indexOf("i")||-1!==t.indexOf("m"))return 2}return 0}}},function(t,e){t.exports={parsers:[{element:"name",headerName:null,regex:/(.+)/}]}},function(t,e,i){var n=i(11),r=i(29),o=i(20),s=i(8),a=i(6),u=i(12),h=i(30),c=i(154),l=i(58),f=i(59),p=i(63),d=i(64),g=i(31),v=i(155),y=i(32),m=i(33),E=i(65),b=i(66),w=i(67),T=n.extend({constructor:function(t,e){this.storage=new g,this.fingerprint=new w(this),this.infinity=new m(this),this.isInitiated=!1,this.isPreloading=!1,this.preloadChrono=new o,this.initChrono=new o,this.options=new d(t),this.storage=new g(null,this.options.disableCookies),this.offlineStorage=new v,this._adapter=null,this._adsAdapter=null,this._ping=new r(this._sendPing.bind(this),5e3),this._beat=new r(this._sendBeat.bind(this),3e4),this._refreshData=new r(this._checkOldData.bind(this),36e5),this._refreshData.start(),this.sessionExpire=1e3*Number(this.storage.getLocal("sessionExpire"))||3e5,this.requestBuilder=new y(this),this.resourceTransform=new f(this),this.lastEventTime=null,e&&this.setAdapter(e),this.restartViewTransform(),this._initInfinity(),this.deviceDetector=new b,this.backgroundDetector=new E(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection()},_checkOldData:function(){this._adapter&&this._adapter.flags.isStarted||this.infinity.infinityStarted&&!this.infinity.infinityStopped||this.restartViewTransform()},restartViewTransform:function(){this.viewTransform=new l(this),this.viewTransform.on(l.Event.DONE,this._receiveData.bind(this)),this.getIsDataExpired()||this.storage.getLocal("accCode")!==this.options.accountCode&&this.storage.getSession("accCode")!==this.options.accountCode?(this.storage.removeStorages("data"),this.storage.removeStorages("session"),this.storage.removeLocal("infinityStarted"),this.storage.removeLocal("infinityStopped"),this.viewTransform.init()):this.viewTransform.setData(this.getStoredData())},_receiveData:function(t){this._ping.interval=1e3*t.target.response.pingTime,this._beat.interval=1e3*t.target.response.beatTime,this.sessionExpire=1e3*t.target.response.sessionExpire,this.youboraId=t.target.response.youboraId,this.storage.setStorages("data",t.target.response.msg),this.storage.setStorages("dataTime",(new Date).getTime()),this.storage.setStorages("accCode",this.options.accountCode),this.getIsSessionExpired()?(this.viewTransform.setSessionId(this.viewTransform.response.code),this.storage.setStorages("session",this.viewTransform.response.code)):this.viewTransform.setSessionId(this.getSessionId())},_reset:function(){this._stopPings(),this.resourceTransform=new f(this),this._adapter&&this._adapter.flags.reset(),this.isInitiated=!1,this.isStarted=!1,this.startDelayed=!1,this.isPreloading=!1,this.preloadChrono.reset(),this.initChrono.reset()},_send:function(t,e,i,n,r,o,a){var h=(new Date).getTime();this.options.preventZombieViews&&this.lastEventTime&&h>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=e===s.Service.STOP?null:h,i=this.requestBuilder.buildParams(i,e),this.getIsLive()&&(i.mediaDuration=void 0,i.playhead=void 0);var c={params:i,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(t,c),this._comm&&(null!==i||void 0!==r)&&this.options.enabled){this.lastServeiceSent=e;var l={};void 0!==r&&"GET"!=r&&(l.method=r);var f=new u(null,e,i,l);n&&f.setBody(n),this._comm.sendRequest(f,o,a)}},_initComm:function(){this.resourceTransform.init(this.getResource()),this._comm=new h,this._comm.addTransform(new c),this._comm.addTransform(this.viewTransform),this.options&&this.options.offline?this._comm.addTransform(new p(this)):this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(t){t&&(this.options.setOptions(t),"boolean"==typeof t["background.enabled"]&&(t["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection()))},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:s.WillSendEvent});a.assign(T.prototype,i(159)),a.assign(T.prototype,i(162)),a.assign(T.prototype,i(163)),a.assign(T.prototype,i(164)),a.assign(T.prototype,i(165)),a.assign(T.prototype,i(166)),a.assign(T.prototype,i(167)),a.assign(T.prototype,i(168)),a.assign(T.prototype,i(169)),t.exports=T},function(t,e,i){var n=i(15),r=i(8),o=n.extend({_services:[r.Service.INIT,r.Service.START,r.Service.OFFLINE_EVENTS],isBlocking:function(t){if(this._isBusy&&null!=t)if(-1!==this._services.indexOf(t.service))this.done();else if(t.service===r.Service.ERROR)return!1;return n.prototype.isBlocking.apply(this,arguments)}});t.exports=o},function(t,e,i){var n=i(2),r=i(31),o=n.extend({constructor:function(){this.storage=new r("youboraOffline",!0),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var t=this._getValidId();this.storage.setLocal(t,""),this.viewList.push(t),this.storage.setLocal("views",this.viewList),this.actualView=t},addEvent:function(t,e){if("/start"===t&&this._newView(),"/init"===t)return null;if(!this.actualView)return null;var i='{"request":"'+t.slice(1)+'",';for(var n in i+='"unixtime":'+Date.now()+",",e){if(void 0===e[n])break;i+='"'+n+'":',"code"===n?i+='"CODE_PLACEHOLDER",':"sessionId"===n?i+='"SESSION_PLACEHOLDER",':"parentId"===n?i+='"PARENT_PLACEHOLDER",':"sessionRoot"===n?i+='"ROOT_PLACEHOLDER",':"string"==typeof e[n]?i+='"'+e[n]+'",':"object"==typeof e[n]?i+='"'+JSON.stringify(e[n]).replace(/"/g,'\\"')+'",':i+=e[n]+","}i=i.slice(0,-1),i+="}";var r=this.storage.getLocal(this.actualView);""!=r&&(r+=","),this.storage.setLocal(this.actualView,r+i)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var t=0;;){var e=this.viewList[t];if(!this.givenIds.includes(e))return this.givenIds.push(e),["["+this.storage.getLocal(e)+"]",e];t++}return[null,null]},removeView:function(t){this.storage.removeLocal(t);var e=this.viewList.indexOf(t);-1!==e&&this.viewList.splice(e,1),-1!==(e=this.givenIds.indexOf(t))&&this.givenIds.splice(e,1),this.storage.setLocal("views",this.viewList.toString()),t===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var t="";this.storage.getLocal("views")?t=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===t?this.viewList=[]:"function"==typeof t.split&&(this.viewList=t.split(","))},_getValidId:function(){var t=Math.floor(1e8*Math.random()).toString();return this.viewList.indexOf(t)>=0?this._getValidId():t},sent:function(){this.givenIds=[]}});t.exports=o},function(t,e,i){var n=i(15),r=(i(8),n.extend({isBlocking:function(t){return!t.params.sessionId}}));t.exports=r},function(t,e,i){var n=i(2).extend({constructor:function(t){this.plugin=t},getAllData:function(){var t=this.getNonRandomData();return t.timestamp=this.getTimestamp(),t},getNonRandomData:function(){var t={};return t.userAgent=this.getUserAgent(),t.threads=this.getVirtualCores(),t.language=this.getLanguage(),t.langList=this.getAvailableLanguages(),t.resolution=this.getResolution(),t.colorDepth=this.getColorDepth(),t.deviceMemory=this.getMemory(),t.touchscreen=this.getTouchscreen(),t.localStorage=this.getLocalStorage(),t.sessionStorage=this.getSessionStorage(),t.cookiesAvailable=this.getCookiesAvailable(),t.flashAvailable=this.getHasFlash(),t.timeZone=this.getTimeZone(),t.plugins=this.getPluginList(),t},getUserAgent:function(){return this._navigatorCheck()?navigator.userAgent:null},getVirtualCores:function(){return this._navigatorCheck()?navigator.hardwareConcurrency:null},getLanguage:function(){return this._navigatorCheck()?navigator.language:null},getAvailableLanguages:function(){return this._navigatorCheck()?navigator.languages:null},getResolution:function(){return this._navigatorCheck()&&navigator.screen?navigator.screen.width.toString()+navigator.screen.height.toString():null},getColorDepth:function(){return this._navigatorCheck()&&navigator.screen?navigator.screen.colorDepth:null},getMemory:function(){return this._navigatorCheck()?navigator.deviceMemory:null},getTouchscreen:function(){return this._navigatorCheck()?navigator.maxTouchPoints:null},getLocalStorage:function(){return"undefined"!=typeof localStorage},getSessionStorage:function(){return"undefined"!=typeof sessionStorage},getCookiesAvailable:function(){return!!this._navigatorCheck()&&navigator.cookieEnabled},getHasFlash:function(){return!!this._navigatorCheck()&&(void 0!==navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||window.ActiveXObject&&0!=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))},getPluginList:function(){if(!this._navigatorCheck()||!navigator.plugins||0===navigator.plugins.length)return null;for(var t="",e=0;e<navigator.plugins.length;e++)t+=navigator.plugins[e].description+" "+navigator.plugins[e].filename+" "+navigator.plugins[e].name+" ";return t},getTimeZone:function(){return(new Date).getTimezoneOffset().toString()},getTimestamp:function(){return(new Date).getTime()},_navigatorCheck:function(){return"undefined"!=typeof navigator}});t.exports=n},function(t,e){t.exports=function(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){var i,n,r,o,s;return r=2147483648&t,o=2147483648&e,s=(1073741823&t)+(1073741823&e),(i=1073741824&t)&(n=1073741824&e)?2147483648^s^r^o:i|n?1073741824&s?3221225472^s^r^o:1073741824^s^r^o:s^r^o}function n(t,n,r,o,s,a,u){return t=i(t,i(i(function(t,e,i){return t&e|~t&i}(n,r,o),s),u)),i(e(t,a),n)}function r(t,n,r,o,s,a,u){return t=i(t,i(i(function(t,e,i){return t&i|e&~i}(n,r,o),s),u)),i(e(t,a),n)}function o(t,n,r,o,s,a,u){return t=i(t,i(i(function(t,e,i){return t^e^i}(n,r,o),s),u)),i(e(t,a),n)}function s(t,n,r,o,s,a,u){return t=i(t,i(i(function(t,e,i){return e^(t|~i)}(n,r,o),s),u)),i(e(t,a),n)}function a(t){var e,i="",n="";for(e=0;e<=3;e++)i+=(n="0"+(t>>>8*e&255).toString(16)).substr(n.length-2,2);return i}var u,h,c,l,f,p,d,g,v,y=Array();for(y=function(t){for(var e,i=t.length,n=i+8,r=16*((n-n%64)/64+1),o=Array(r-1),s=0,a=0;a<i;)s=a%4*8,o[e=(a-a%4)/4]=o[e]|t.charCodeAt(a)<<s,a++;return s=a%4*8,o[e=(a-a%4)/4]=o[e]|128<<s,o[r-2]=i<<3,o[r-1]=i>>>29,o}(t=function(t){t=t.replace(/rn/g,"n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(t)),p=1732584193,d=4023233417,g=2562383102,v=271733878,u=0;u<y.length;u+=16)h=p,c=d,l=g,f=v,p=n(p,d,g,v,y[u+0],7,3614090360),v=n(v,p,d,g,y[u+1],12,3905402710),g=n(g,v,p,d,y[u+2],17,606105819),d=n(d,g,v,p,y[u+3],22,3250441966),p=n(p,d,g,v,y[u+4],7,4118548399),v=n(v,p,d,g,y[u+5],12,1200080426),g=n(g,v,p,d,y[u+6],17,2821735955),d=n(d,g,v,p,y[u+7],22,4249261313),p=n(p,d,g,v,y[u+8],7,1770035416),v=n(v,p,d,g,y[u+9],12,2336552879),g=n(g,v,p,d,y[u+10],17,4294925233),d=n(d,g,v,p,y[u+11],22,2304563134),p=n(p,d,g,v,y[u+12],7,1804603682),v=n(v,p,d,g,y[u+13],12,4254626195),g=n(g,v,p,d,y[u+14],17,2792965006),p=r(p,d=n(d,g,v,p,y[u+15],22,1236535329),g,v,y[u+1],5,4129170786),v=r(v,p,d,g,y[u+6],9,3225465664),g=r(g,v,p,d,y[u+11],14,643717713),d=r(d,g,v,p,y[u+0],20,3921069994),p=r(p,d,g,v,y[u+5],5,3593408605),v=r(v,p,d,g,y[u+10],9,38016083),g=r(g,v,p,d,y[u+15],14,3634488961),d=r(d,g,v,p,y[u+4],20,3889429448),p=r(p,d,g,v,y[u+9],5,568446438),v=r(v,p,d,g,y[u+14],9,3275163606),g=r(g,v,p,d,y[u+3],14,4107603335),d=r(d,g,v,p,y[u+8],20,1163531501),p=r(p,d,g,v,y[u+13],5,2850285829),v=r(v,p,d,g,y[u+2],9,4243563512),g=r(g,v,p,d,y[u+7],14,1735328473),p=o(p,d=r(d,g,v,p,y[u+12],20,2368359562),g,v,y[u+5],4,4294588738),v=o(v,p,d,g,y[u+8],11,2272392833),g=o(g,v,p,d,y[u+11],16,1839030562),d=o(d,g,v,p,y[u+14],23,4259657740),p=o(p,d,g,v,y[u+1],4,2763975236),v=o(v,p,d,g,y[u+4],11,1272893353),g=o(g,v,p,d,y[u+7],16,4139469664),d=o(d,g,v,p,y[u+10],23,3200236656),p=o(p,d,g,v,y[u+13],4,681279174),v=o(v,p,d,g,y[u+0],11,3936430074),g=o(g,v,p,d,y[u+3],16,3572445317),d=o(d,g,v,p,y[u+6],23,76029189),p=o(p,d,g,v,y[u+9],4,3654602809),v=o(v,p,d,g,y[u+12],11,3873151461),g=o(g,v,p,d,y[u+15],16,530742520),p=s(p,d=o(d,g,v,p,y[u+2],23,3299628645),g,v,y[u+0],6,4096336452),v=s(v,p,d,g,y[u+7],10,1126891415),g=s(g,v,p,d,y[u+14],15,2878612391),d=s(d,g,v,p,y[u+5],21,4237533241),p=s(p,d,g,v,y[u+12],6,1700485571),v=s(v,p,d,g,y[u+3],10,2399980690),g=s(g,v,p,d,y[u+10],15,4293915773),d=s(d,g,v,p,y[u+1],21,2240044497),p=s(p,d,g,v,y[u+8],6,1873313359),v=s(v,p,d,g,y[u+15],10,4264355552),g=s(g,v,p,d,y[u+6],15,2734768916),d=s(d,g,v,p,y[u+13],21,1309151649),p=s(p,d,g,v,y[u+4],6,4149444226),v=s(v,p,d,g,y[u+11],10,3174756917),g=s(g,v,p,d,y[u+2],15,718787259),d=s(d,g,v,p,y[u+9],21,3951481745),p=i(p,h),d=i(d,c),g=i(g,l),v=i(v,f);return(a(p)+a(d)+a(g)+a(v)).toLowerCase()}},function(t,e,i){var n=i(1),r=i(8),o=i(24),s={setAdapter:function(t){t.plugin?n.warn("Adapters can only be added to a single plugin"):(this.removeAdapter(),this._adapter=t,t.plugin=this,t.on(o.Event.INIT,this._initListener.bind(this)),t.on(o.Event.START,this._startListener.bind(this)),t.on(o.Event.JOIN,this._joinListener.bind(this)),t.on(o.Event.PAUSE,this._pauseListener.bind(this)),t.on(o.Event.RESUME,this._resumeListener.bind(this)),t.on(o.Event.SEEK_BEGIN,this._seekBeginListener.bind(this)),t.on(o.Event.SEEK_END,this._seekEndListener.bind(this)),t.on(o.Event.BUFFER_BEGIN,this._bufferBeginListener.bind(this)),t.on(o.Event.BUFFER_END,this._bufferEndListener.bind(this)),t.on(o.Event.ERROR,this._errorListener.bind(this)),t.on(o.Event.STOP,this._stopListener.bind(this)),t.on(o.Event.CLICK,this._clickListener.bind(this)),t.on(o.Event.BLOCKED,this._blockedListener.bind(this)),t.on(o.Event.VIDEO_EVENT,this._videoEventListener.bind(this)))},getAdapter:function(){return this._adapter},removeAdapter:function(){this._adapter&&(this._adapter.dispose(),this._adapter.plugin=null,this._adapter.off(o.Event.INIT,this._initListener),this._adapter.off(o.Event.START,this._startListener),this._adapter.off(o.Event.JOIN,this._joinListener),this._adapter.off(o.Event.PAUSE,this._pauseListener),this._adapter.off(o.Event.RESUME,this._resumeListener),this._adapter.off(o.Event.SEEK_BEGIN,this._seekBeginListener),this._adapter.off(o.Event.SEEK_END,this._seekEndListener),this._adapter.off(o.Event.BUFFER_BEGIN,this._bufferBeginListener),this._adapter.off(o.Event.BUFFER_END,this._bufferEndListener),this._adapter.off(o.Event.ERROR,this._errorListener),this._adapter.off(o.Event.STOP,this._stopListener),this._adapter.off(o.Event.VIDEO_EVENT,this._videoEventListener),this._adapter=null)},_initListener:function(t){if(!this._adapter||!this._adapter.flags.isInited){this.isInitiated&&this.lastServeiceSent!==r.Service.ERROR||(this.viewTransform.nextView(),this._initComm(),this._startPings());var e=t.data.params||{};this.isInitiated=!0,this._adapter?(this._adapter.flags.isInited=!0,this._adapter.chronos.join.start()):this.initChrono.start(),this._send(r.WillSendEvent.WILL_SEND_INIT,r.Service.INIT,e),n.notice(r.Service.INIT+" "+(e.title||e.mediaResource)),this._adSavedError()}},_startListener:function(t){this.isInitiated||(this.viewTransform.nextView(),this._initComm(),this._startPings());var e=t.data.params||{},i=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&this.getDuration()>0)&&this.getTitle();!(i=!this.options.forceInit&&(i&&this._isExtraMetadataReady()))||this._adapter.flags.isInited||this.isInitiated?this._adapter.flags.isInited||this.isInitiated||(this.isInitiated=!0,this._adapter.flags.isInited=!0,this._adapter.chronos.join.start(),this._send(r.WillSendEvent.WILL_SEND_START,r.Service.INIT,e),this._adSavedError(),n.notice(r.Service.INIT+" "+(e.title||e.mediaResource))):(this._send(r.WillSendEvent.WILL_SEND_START,r.Service.START,e),this._adSavedError(),n.notice(r.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0,this.isInitiated&&0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime))},_retryStart:function(t){this._isExtraMetadataReady()&&(this._send(r.WillSendEvent.WILL_SEND_START,r.Service.START,{}),this.startDelayed=!1)},_joinListener:function(t){var e=t.data.params||{};this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this.isInitiated&&!this.isStarted&&0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime),this._adsAdapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._adsAdapter.totalPrerolls||0),(new Date).getTime()),this._adsAdapter.totalPrerolls=0),this.isInitiated&&!this.isStarted&&(this._isExtraMetadataReady()?this._send(r.WillSendEvent.WILL_SEND_START,r.Service.START,e):this.startDelayed=!0,this._adSavedError(),n.notice(r.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0),e=t.data.params||{},this._send(r.WillSendEvent.WILL_SEND_JOIN,r.Service.JOIN,e),n.notice(r.Service.JOIN+" "+e.joinDuration+"ms"))},_pauseListener:function(t){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var e=t.data.params||{};this._send(r.WillSendEvent.WILL_SEND_PAUSE,r.Service.PAUSE,e),n.notice(r.Service.PAUSE+" at "+e.playhead+"s")},_resumeListener:function(t){var e=t.data.params||{};this._send(r.WillSendEvent.WILL_SEND_RESUME,r.Service.RESUME,e),n.notice(r.Service.RESUME+" "+e.pauseDuration+"ms"),this._adapter.chronos.pause.reset()},_seekBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),n.notice("Seek Begin")},_seekEndListener:function(t){var e=t.data.params||{};this._send(r.WillSendEvent.WILL_SEND_SEEK,r.Service.SEEK,e),n.notice(r.Service.SEEK+" to "+e.playhead+" in "+e.seekDuration+"ms")},_bufferBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),n.notice("Buffer Begin")},_bufferEndListener:function(t){var e=t.data.params||{};this._send(r.WillSendEvent.WILL_SEND_BUFFER,r.Service.BUFFER,e),n.notice(r.Service.BUFFER+" to "+e.playhead+" in "+e.bufferDuration+"ms")},_errorListener:function(t){this._blockError(t.data.params)||(this.fireError(t.data.params||{}),this._adSavedError())},_blockError:function(t){var e=Date.now();return!!this._lastErrorParams&&(this._lastErrorParams.errorCode===t.errorCode&&this._lastErrorParams.msg===t.msg)&&this._lastErrorTime+5e3>e?(this._lastErrorTime=e,!0):(this._lastErrorTime=e,this._lastErrorParams=t,!1)},_stopListener:function(t){this.fireStop(t.data.params||{})},_clickListener:function(t){n.warn("You have sent a CLICK event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.")},_blockedListener:function(t){n.warn("You have sent a BLOCKED event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.")},_videoEventListener:function(t){this._send(r.WillSendEvent.VIDEO_EVENT,r.Service.VIDEO_EVENT,t.data.params)},_isExtraMetadataReady:function(t){if(!this.options.waitForMetadata||this.options.pendingMetadata.length<1)return!0;var e=this.requestBuilder.getGetters();return this.options.pendingMetadata.map(function(t){if(e.hasOwnProperty(t))return!!this[e[t]]()}.bind(this)).indexOf(!1)<0}};t.exports=s},function(t,e,i){var n=i(2),r=i(20),o=n.extend({constructor:function(){this.reset()},reset:function(){this.join=new r,this.seek=new r,this.pause=new r,this.buffer=new r,this.total=new r}});t.exports=o},function(t,e,i){var n=i(2).extend({constructor:function(){this.reset()},reset:function(){this.isInited=!1,this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isEnded=!1,this.isStopped=!1}});t.exports=n},function(t,e,i){var n=i(6),r=i(23),o={getHost:function(){var t=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(t=this.viewTransform.response.host),n.addProtocol(n.stripProtocol(t),this.options["app.https"]||this.options.httpSecure)},getUserType:function(){return this.options["user.type"]||this.options.userType},isParseHls:function(){return this.options["parse.hls"]},isParseCdnNode:function(){return this.options["parse.cdnNode"]},isLocHeader:function(){return this.options["parse.locationHeader"]},getParseCdnNodeList:function(){return this.options["parse.cdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.cdnNameHeader"]},getObfuscateIp:function(){return this.options["user.obfuscateIp"]||this.options.obfuscateIp},getExtraparam1:function(){return this.options["content.customdimension.1"]||this.options["extraparam.1"]},getExtraparam2:function(){return this.options["content.customdimension.2"]||this.options["extraparam.2"]},getExtraparam3:function(){return this.options["content.customdimension.3"]||this.options["extraparam.3"]},getExtraparam4:function(){return this.options["content.customdimension.4"]||this.options["extraparam.4"]},getExtraparam5:function(){return this.options["content.customdimension.5"]||this.options["extraparam.5"]},getExtraparam6:function(){return this.options["content.customdimension.6"]||this.options["extraparam.6"]},getExtraparam7:function(){return this.options["content.customdimension.7"]||this.options["extraparam.7"]},getExtraparam8:function(){return this.options["content.customdimension.8"]||this.options["extraparam.8"]},getExtraparam9:function(){return this.options["content.customdimension.9"]||this.options["extraparam.9"]},getExtraparam10:function(){return this.options["content.customdimension.10"]||this.options["extraparam.10"]},getExtraparam11:function(){return this.options["content.customdimension.11"]||this.options["extraparam.11"]},getExtraparam12:function(){return this.options["content.customdimension.12"]||this.options["extraparam.12"]},getExtraparam13:function(){return this.options["content.customdimension.13"]||this.options["extraparam.13"]},getExtraparam14:function(){return this.options["content.customdimension.14"]||this.options["extraparam.14"]},getExtraparam15:function(){return this.options["content.customdimension.15"]||this.options["extraparam.15"]},getExtraparam16:function(){return this.options["content.customdimension.16"]||this.options["extraparam.16"]},getExtraparam17:function(){return this.options["content.customdimension.17"]||this.options["extraparam.17"]},getExtraparam18:function(){return this.options["content.customdimension.18"]||this.options["extraparam.18"]},getExtraparam19:function(){return this.options["content.customdimension.19"]||this.options["extraparam.19"]},getExtraparam20:function(){return this.options["content.customdimension.20"]||this.options["extraparam.20"]},getAdExtraparam1:function(){return this.options["ad.customDimension.1"]||this.options["ad.extraparam.1"]},getAdExtraparam2:function(){return this.options["ad.customDimension.2"]||this.options["ad.extraparam.2"]},getAdExtraparam3:function(){return this.options["ad.customDimension.3"]||this.options["ad.extraparam.3"]},getAdExtraparam4:function(){return this.options["ad.customDimension.4"]||this.options["ad.extraparam.4"]},getAdExtraparam5:function(){return this.options["ad.customDimension.5"]||this.options["ad.extraparam.5"]},getAdExtraparam6:function(){return this.options["ad.customDimension.6"]||this.options["ad.extraparam.6"]},getAdExtraparam7:function(){return this.options["ad.customDimension.7"]||this.options["ad.extraparam.7"]},getAdExtraparam8:function(){return this.options["ad.customDimension.8"]||this.options["ad.extraparam.8"]},getAdExtraparam9:function(){return this.options["ad.customDimension.9"]||this.options["ad.extraparam.9"]},getAdExtraparam10:function(){return this.options["ad.customDimension.10"]||this.options["ad.extraparam.10"]},getPluginInfo:function(){return{lib:r,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceInfo:function(){var t={};return this.getModel()&&(t.model=this.getModel()),this.getBrand()&&(t.brand=this.getBrand()),this.getDeviceType()&&(t.deviceType=this.getDeviceType()),this.getDeviceName()&&(t.deviceName=this.getDeviceName()),this.getOsName()&&(t.osName=this.getOsName()),this.getOsVersion()&&(t.osVersion=this.getOsVersion()),this.getBrowserName()&&(t.browserName=this.getBrowserName()),this.getBrowserVersion()&&(t.browserVersion=this.getBrowserVersion()),this.getBrowserType()&&(t.browserType=this.getBrowserType()),this.getBrowserEngine()&&(t.browserEngine=this.getBrowserEngine()),t!=={}?t:null},getDeviceCode:function(){return this.options["device.code"]},getModel:function(){return this.options["device.model"]},getBrand:function(){return this.options["device.brand"]},getDeviceType:function(){return this.options["device.type"]},getDeviceName:function(){return this.options["device.name"]},getOsName:function(){return this.options["device.osName"]},getOsVersion:function(){return this.options["device.osVersion"]},getBrowserName:function(){return this.options["device.browserName"]},getBrowserVersion:function(){return this.options["device.browserVersion"]},getBrowserType:function(){return this.options["device.browserType"]},getBrowserEngine:function(){return this.options["device.browserEngine"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options["user.name"]||this.options.username},getAnonymousUser:function(){return this.options["user.anonymousId"]||this.options.anonymousUser},getEmail:function(){return this.options["user.email"]},getReferer:function(){if(this.options.referer)return this.options.referer;var t="";return"undefined"!=typeof window&&window.location&&(t=window.location.href),t},getReferral:function(){return"undefined"!=typeof window&&window.document?window.document.referrer:null},getLanguage:function(){return"undefined"!=typeof navigator?navigator.language:null},getNodeHost:function(){return this.options["content.cdnNode"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){return this.offlineStorage.getView()},getExperiments:function(){return this.options.experiments.length>0?this.options.experiments:null},getFingerprint:function(){return this.fingerprint.getKey()},getNpawPluginUUID:function(){return this.fingerprint.getUUID()},getYouboraId:function(){return this.youboraId},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]},getAppName:function(){return this.options["app.name"]},getAppReleaseVersion:function(){return this.options["app.releaseVersion"]}};t.exports=o},function(t,e,i){var n=i(1),r=i(6),o=i(23),s={getPlayhead:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayhead()}catch(t){n.warn("An error occurred while calling getPlayhead",t)}return r.parseNumber(t,0)},getPlayrate:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayrate(),this._adapter.flags&&this._adapter.flags.isPaused&&(t=0)}catch(t){n.warn("An error occured while calling getPlayrate",t)}return t},getFramesPerSecond:function(){var t=this.options["content.fps"];if(null===t&&this._adapter)try{t=this._adapter.getFramesPerSecond()}catch(t){n.warn("An error occured while calling getFramesPerSecond",t)}return t},getDroppedFrames:function(){var t=null;if(this._adapter)try{t=this._adapter.getDroppedFrames()}catch(t){n.warn("An error occured while calling getDroppedFrames",t)}return t||(t=this.getWebkitDroppedFrames()),r.parseNumber(t,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var t=this.options["content.duration"];if(null===t&&this._adapter)try{t=this._adapter.getDuration()}catch(t){n.warn("An error occured while calling getDuration",t)}return 0===t&&(t=null),r.parseNumber(Math.round(t),null)},getBitrate:function(){var t=this.options["content.bitrate"];if(null===t&&this._adapter){try{t=this._adapter.getBitrate()}catch(t){n.warn("An error occured while calling getBitrate",t)}t&&-1!==t||(t=this.getWebkitBitrate())}return r.parseNumber(t,-1)},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getThroughput:function(){var t=this.options["content.throughput"];if(null===t&&this._adapter)try{t=this._adapter.getThroughput()}catch(t){n.warn("An error occured while calling getThroughput",t)}return r.parseNumber(t,-1)},getRendition:function(){var t=this.options["content.rendition"];if(null===t&&this._adapter)try{t=this._adapter.getRendition()}catch(t){n.warn("An error occured while calling getRendition",t)}return t},getTitle:function(){var t=this.options["content.title"];if(null===t&&this._adapter)try{t=this._adapter.getTitle()}catch(t){n.warn("An error occured while calling getTitle",t)}return t},getTitle2:function(){var t=this.options["content.program"]||this.options["content.title2"];if(null===t&&this._adapter)try{t=this._adapter.getTitle2()}catch(t){n.warn("An error occured while calling getTitle2",t)}return t},getIsLive:function(){var t=this.options["content.isLive"];if(null===t&&this._adapter)try{t=this._adapter.getIsLive()}catch(t){n.warn("An error occured while calling getIsLive",t)}return t||!1},getResource:function(){var t=null;return!this.resourceTransform.isBlocking()&&this.resourceTransform.isDone&&(t=this.resourceTransform.getResource()),t||this.getOriginalResource()},getOriginalResource:function(){var t=null;if(null===(t=this.options["content.resource"])&&this._adapter)try{t=this._adapter.getResource()}catch(e){n.warn("An error occured while calling getResource",e),t=null}return t||null},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerVersion()}catch(t){n.warn("An error occured while calling getPlayerVersion",t)}return t},getPlayerName:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerName()}catch(t){n.warn("An error occured while calling getPlayerName",t)}return t},getCdn:function(){var t=null;return this.resourceTransform.isBlocking()||(t=this.resourceTransform.getCdnName()),t||this.options["content.cdn"]},getPluginVersion:function(){var t=this.getAdapterVersion();return t||(t=o+"-adapterless"),t},getLibVersion:function(){return o},getAdapterVersion:function(){var t=null;if(this._adapter)try{t=this._adapter.getVersion()}catch(t){n.warn("An error occured while calling getPluginVersion",t)}return t},getCdnTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getCdnTraffic()}catch(t){n.warn("An error occured while calling getCdnTraffic",t)}return t},getP2PTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getP2PTraffic()}catch(t){n.warn("An error occured while calling getP2PTraffic",t)}return t},getUploadTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getUploadTraffic()}catch(t){n.warn("An error occured while calling getUploadTraffic",t)}return t},getIsP2PEnabled:function(){var t=null;if(this._adapter)try{t=this._adapter.getIsP2PEnabled()}catch(t){n.warn("An error occured while calling getIsP2PEnabled",t)}return t},getStreamingProtocol:function(){var t=this.options["content.streamingProtocol"];return"string"!=typeof t?null:"HDS"!=(t=t.toUpperCase())&&"HLS"!=t&&"MSS"!=t&&"DASH"!=t&&"RTMP"!=t&&"RTP"!=t&&"RTSP"!=t?(n.warn("Streaming protocol "+t+" is not a valid value"),null):t},getHouseholdId:function(){var t=null;if(this._adapter)try{t=this._adapter.getHouseholdId()}catch(t){n.warn("An error occurred while calling getHouseholdId",t)}return t},getLatency:function(){var t=null;if(this._adapter)try{t=this._adapter.getLatency()}catch(t){n.warn("An error occurred while calling getLatency",t)}return t},getPacketLoss:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketLoss()}catch(t){n.warn("An error occurred while calling getPacketLoss",t)}return t},getPacketSent:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketSent()}catch(t){n.warn("An error occurred while calling getPacketSent",t)}return t},getVideoMetrics:function(){var t=this._adapter?this._adapter.getMetrics():null;for(var e in t=t||this.options["content.metrics"])if("object"!=typeof t[e]||!t[e].value){var i={};i.value=t[e],t[e]=i}return t},getPreloadDuration:function(){return this.preloadChrono.getDeltaTime(!1)},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0},getPackage:function(){return this.options["content.package"]},getSaga:function(){return this.options["content.saga"]},getTvShow:function(){return this.options["content.tvShow"]},getSeason:function(){return this.options["content.season"]},getEpisodeTitle:function(){return this.options["content.episodeTitle"]},getChannel:function(){return this.options["content.channel"]},getID:function(){return this.options["content.id"]},getImdbId:function(){return this.options["content.imdbId"]},getGracenoteID:function(){return this.options["content.gracenoteId"]},getType:function(){return this.options["content.type"]},getGenre:function(){return this.options["content.genre"]},getVideoLanguage:function(){return this.options["content.language"]},getSubtitles:function(){return this.options["content.subtitles"]},getContractedResolution:function(){return this.options["content.contractedResolution"]},getCost:function(){return this.options["content.cost"]},getPrice:function(){return this.options["content.price"]},getPlaybackType:function(){return this.options["content.playbackType"]?this.options["content.playbackType"]:this.getIsLive()?"Live":"VoD"},getDRM:function(){return this.options["content.drm"]},getVideoCodec:function(){return this.options["content.encoding.videoCodec"]},getAudioCodec:function(){return this.options["content.encoding.audioCodec"]},getCodecSettings:function(){return this.options["content.encoding.codecSettings"]},getCodecProfile:function(){return this.options["content.encoding.codecProfile"]},getContainerFormat:function(){return this.options["content.encoding.containerFormat"]}};t.exports=s},function(t,e,i){var n=i(1),r=i(8),o=i(24),s={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(t){t.plugin?n.warn("Adapters can only be added to a single plugin"):(this.removeAdsAdapter(),t.plugin=this,this._adsAdapter=t,this._adsAdapter.on(o.Event.INIT,this._adInitListener.bind(this)),this._adsAdapter.on(o.Event.START,this._adStartListener.bind(this)),this._adsAdapter.on(o.Event.JOIN,this._adJoinListener.bind(this)),this._adsAdapter.on(o.Event.PAUSE,this._adPauseListener.bind(this)),this._adsAdapter.on(o.Event.RESUME,this._adResumeListener.bind(this)),this._adsAdapter.on(o.Event.BUFFER_BEGIN,this._adBufferBeginListener.bind(this)),this._adsAdapter.on(o.Event.BUFFER_END,this._adBufferEndListener.bind(this)),this._adsAdapter.on(o.Event.STOP,this._adStopListener.bind(this)),this._adsAdapter.on(o.Event.ERROR,this._adErrorListener.bind(this)),this._adsAdapter.on(o.Event.CLICK,this._adClickListener.bind(this)),this._adsAdapter.on(o.Event.BLOCKED,this._adBlockedListener.bind(this)))},removeAdsAdapter:function(){this._adsAdapter&&(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this._adsAdapter.off(o.Event.INIT,this._adInitListener),this._adsAdapter.off(o.Event.START,this._adStartListener),this._adsAdapter.off(o.Event.JOIN,this._adJoinListener),this._adsAdapter.off(o.Event.PAUSE,this._adPauseListener),this._adsAdapter.off(o.Event.RESUME,this._adResumeListener),this._adsAdapter.off(o.Event.BUFFER_BEGIN,this._adBufferBeginListener),this._adsAdapter.off(o.Event.BUFFER_END,this._adBufferEndListener),this._adsAdapter.off(o.Event.STOP,this._adStopListener),this._adsAdapter.off(o.Event.ERROR,this._adErrorListener),this._adsAdapter.off(o.Event.CLICK,this._adClickListener),this._adsAdapter.off(o.Event.BLOCKED,this._adBlockedListener),this._adsAdapter=null)},_adInitListener:function(t){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isInited||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this.adInitSent=!0;var e=t.data.params||{};e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_START,r.Service.AD_INIT,e),n.notice(r.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")},_adStartListener:function(t){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isInited||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit();var e=t.data.params||{};(this._adsAdapter.flags.isInited?e.adNumber=this.requestBuilder.lastSent.adNumber:e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"])||((this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._send(r.WillSendEvent.WILL_SEND_AD_START,r.Service.AD_START,e),n.notice(r.Service.AD_START+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")):this._adsAdapter.flags.isInited||(this.adInitSent=!0,this._send(r.WillSendEvent.WILL_SEND_AD_INIT,r.Service.AD_INIT,e),n.notice(r.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")))},_adJoinListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||!this.adInitSent||this.adStartSent||(this._send(r.WillSendEvent.WILL_SEND_AD_START,r.Service.AD_START,e),n.notice(r.Service.AD_START+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_JOIN,r.Service.AD_JOIN,e),n.notice(r.Service.AD_JOIN+" "+e.adJoinDuration+"ms"),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_PAUSE,r.Service.AD_PAUSE,e),n.notice(r.Service.AD_PAUSE+" at "+e.adPlayhead+"s")},_adResumeListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_RESUME,r.Service.AD_RESUME,e),n.notice(r.Service.AD_RESUME+" "+e.adPauseDuration+"ms")},_adBufferBeginListener:function(t){n.notice("Ad Buffer Begin"),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_BUFFER,r.Service.AD_BUFFER,e),n.notice(r.Service.AD_BUFFER+" "+e.adBufferDuration+"ms")},_adStopListener:function(t){this._adsAdapter.totalPrerolls=(this._adsAdapter.totalPrerolls||0)+this._adsAdapter.chronos.total.getDeltaTime();var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_STOP,r.Service.AD_STOP,e),n.notice(r.Service.AD_STOP+" "+e.adTotalDuration+"ms")},_adErrorListener:function(t){var e=t.data.params||{};return!this._adapter||this._adapter.flags.isStarted||this._adapter.flags.isInited||this.isInitiated?this._blockAdError(t.data.params)?null:(this._adsAdapter&&(this._adsAdapter.flags.isStarted||this._adsAdapter.flags.isInited)?e.adNumber=this.requestBuilder.lastSent.adNumber:e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_ERROR,r.Service.AD_ERROR,e),void n.notice(r.Service.AD_ERROR)):(this._savedAdError=t,null)},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_blockAdError:function(t){var e=Date.now();return!!this._lastAdErrorParams&&(this._lastAdErrorParams.errorCode===t.errorCode&&this._lastAdErrorParams.msg===t.msg)&&this._lastAdErrorTime+5e3>e?(this._lastAdErrorTime=e,!0):(this._lastAdErrorTime=e,this._lastAdErrorParams=t,!1)},_adClickListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_CLICK,r.Service.AD_CLICK,e),n.notice(r.Service.AD_CLICK)},_adBlockedListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_BLOCKED,r.Service.AD_BLOCKED,e),n.notice(r.Service.AD_BLOCKED)}};t.exports=s},function(t,e,i){var n=i(1),r=i(6),o={getAdPlayerVersion:function(){var t="";if(this._adsAdapter)try{t=this._adsAdapter.getPlayerVersion()}catch(t){n.warn("An error occured while calling getAdPlayerVersion",t)}return t},getAdPosition:function(){var t="pre";if(this._adsAdapter)try{var e=this._adsAdapter.getPosition();"pre"!==e&&"mid"!==e&&"post"!==e||(t=e)}catch(t){n.warn("An error occured while calling getAdPosition",t)}return!t&&this._adapter&&(t=this._adapter.flags.isJoined?"mid":"pre"),t},getAdPlayhead:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getPlayhead()}catch(t){n.warn("An error occured while calling getAdPlayhead",t)}return r.parseNumber(t,0)},getAdDuration:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getDuration()}catch(t){n.warn("An error occured while calling getAdDuration",t)}return r.parseNumber(t,0)},getAdBitrate:function(){var t=null;if(this._adsAdapter){try{t=this._adsAdapter.getBitrate()}catch(t){n.warn("An error occured while calling getAdBitrate",t)}t&&-1!==t||(t=this.getWebkitAdBitrate())}return r.parseNumber(t,-1)},getWebkitAdBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getAdTitle:function(){var t=null;if(this.options["ad.title"])return this.options["ad.title"];if(this._adsAdapter)try{t=this._adsAdapter.getTitle()}catch(t){n.warn("An error occured while calling getAdTitle",t)}return t},getAdResource:function(){var t=null;if(this.options["ad.resource"])return this.options["ad.resource"];if(this._adsAdapter)try{t=this._adsAdapter.getResource()}catch(t){n.warn("An error occured while calling getAdResource",t)}return t},getAdCampaign:function(){return this.options["ad.campaign"]?this.options["ad.campaign"]:null},getAdAdapterVersion:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getVersion()}catch(t){n.warn("An error occured while calling getAdsAdapterVersion",t)}return t},getAdMetadata:function(){return this.options["ad.metadata"]},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1}};t.exports=o},function(t,e,i){var n=i(1),r=i(8),o={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(t){var e={diffTime:t,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(e=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(e,["pauseDuration"]):this.requestBuilder.fetchParams(e,["bitrate","throughput","fps"]),this._adapter.flags.isJoined&&(e=this.requestBuilder.fetchParams(e,["playhead"])),this._adapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["bufferDuration"])),this._adapter.flags.isSeeking&&(e=this.requestBuilder.fetchParams(e,["seekDuration"])),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(e=this.requestBuilder.fetchParams(e,["adPlayhead"]),e=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(e,["adPauseDuration"]):this.requestBuilder.fetchParams(e,["adBitrate"])),this._adsAdapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["adBufferDuration"])))),this._send(r.WillSendEvent.WILL_SEND_PING,r.Service.PING,e),this.startDelayed&&this._retryStart(),n.verbose(r.Service.PING)}};t.exports=o},function(t,e,i){var n=i(1),r=i(6),o=i(8),s=(i(32),i(15)),a={firePreloadBegin:function(){this.isPreloading||(this.isPreloading=!0,this.preloadChrono.start())},firePreloadEnd:function(){this.isPreloading&&(this.isPreloading=!1,this.preloadChrono.stop())},fireInit:function(t){this.isInitiated||this.getAdapter()&&(!this.getAdapter()||this.getAdapter().flags.isInited||this.getAdapter().flags.isStarted)||(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,t=t||{},this._send(o.WillSendEvent.WILL_SEND_INIT,o.Service.INIT,t),this._adSavedError(),n.notice(o.Service.INIT+" "+(t.title||t.mediaResource)))},fireError:function(t,e,i,s){this.isInitiated||this.getAdapter()&&(this.getAdapter().flags.isStarted||this.getAdapter().flags.isInited)||this.viewTransform.nextView(),this._comm||this._initComm();var a=r.buildErrorParams(t,e,i,s);this._send(o.WillSendEvent.WILL_SEND_ERROR,o.Service.ERROR,a),this._adSavedError(),n.notice(o.Service.ERROR+" "+a.errorLevel+" "+a.errorCode),"fatal"===a.errorLevel&&(this._reset(),this.viewTransform.nextView())},fireFatalError:function(t,e,i){this.options["ad.afterStop"]=0,this.fireError(t,e,i,"fatal"),this._adapter?this._adapter.fireStop():this.fireStop()},fireStop:function(t){t&&void 0!==t.end&&t.end&&(t.end=void 0,this.options["ad.afterStop"]=0),this._adsAdapter||(this.options["ad.afterStop"]=0),0===this.options["ad.afterStop"]&&(this._adapter&&(this._adapter.flags.isStopped=!0),t=t||{},this._send(o.WillSendEvent.WILL_SEND_STOP,o.Service.STOP,t),n.notice(o.Service.STOP+" at "+t.playhead+"s"),this._reset())},fireOfflineEvents:function(t){this.options&&!this.options.offline?this._adapter&&(this._adapter.flags.isStarted||this._adapter.flags.isInited)||this._adsAdapter&&(this._adsAdapter.flags.isStarted||this._adsAdapter.flags.isInited)?n.error("Adapters have to be stopped"):(this._offlineParams=t,this.viewTransform.response.code&&this.viewTransform.response.host?this._generateAndSendOffline():(this.offlineReference=this._generateAndSendOffline.bind(this),this.viewTransform.on(s.Event.DONE,this.offlineReference))):n.error("To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){var t=this._offlineParams;for(this._initComm();;){var e=this.requestBuilder.buildBody(o.Service.OFFLINE_EVENTS).viewJson;if(null===e[0])break;var i=this.viewTransform.nextView(),n=e[0].replace(/CODE_PLACEHOLDER/g,i.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"").replace(/,"parentId":"PARENT_PLACEHOLDER"/g,"");this._send(o.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,o.Service.OFFLINE_EVENTS,t,n,"POST",function(t,e){this.offlineStorage.removeView(e.offlineId)}.bind(this),{offlineId:e[1]})}this.offlineStorage.sent(),this._offlineParams=null}};t.exports=a},function(t,e,i){var n=i(8),r=i(1),o=i(12),s=i(33),a={_initInfinity:function(){this.infinity.on(s.Event.NAV,this._navListener.bind(this)),this.infinity.on(s.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(s.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(s.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(t,e,i){var n={params:i=this.requestBuilder.buildParams(i,e),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(t,n),this.infinity._comm&&null!==i&&this.options.enabled&&(this.lastServeiceSent=e,this.infinity._comm.sendRequest(new o(null,e,i)))},_navListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_NAV,n.Service.NAV,e),this._beat.isRunning||this._beat.start(),r.notice(n.Service.NAV+" "+e.route)},_sessionStartListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_SESSION_START,n.Service.SESSION_START,e),this._beat.isRunning||this._beat.start(),r.notice(n.Service.SESSION_START+" "+e.route)},_sessionStopListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_SESSION_STOP,n.Service.SESSION_STOP,e),this._beat.isRunning&&this._beat.stop(),r.notice(n.Service.SESSION_STOP+" "+e.route)},_eventListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_EVENT,n.Service.EVENT,e),r.notice(n.Service.EVENT+" "+e.name)},_sendBeat:function(t){var e={diffTime:t,sessions:[this.getSessionId()]};this._sendInfinity(n.WillSendEvent.WILL_SEND_BEAT,n.Service.BEAT,e),this.infinity&&this.infinity._setLastActive(),r.verbose(n.Service.BEAT)},getSessionMetrics:function(){var t=this.options["session.metrics"];for(var e in t)if("object"!=typeof t[e]||!t[e].value){var i={};i.value=t[e],t[e]=i}return t}};t.exports=a},function(t,e){var i={getContext:function(){return this.options["session.context"]?this.storage.getSession("context"):"Default"},getSessionId:function(){return this.storage.getStorages("session")},getStoredData:function(){return this.storage.getStorages("data")},getDataTime:function(){return this.storage.getStorages("dataTime")},getLastActive:function(){return this.storage.getStorages("lastactive")},setStoredData:function(t){this.storage.setStorages("data",t)},setSessionId:function(t){this.storage.setStorages("session",t)},setDataTime:function(t){this.storage.setStorages("dataTime",t)},setLastActive:function(t){this.storage.setStorages("lastactive",t)},getPageName:function(){if(document&&document.title)return document.title},getIsSessionExpired:function(){var t=(new Date).getTime();return!this.getSessionId()||this.infinity.getFirstActive()<t-this.sessionExpire},getIsDataExpired:function(){var t=(new Date).getTime();return!this.getStoredData()||this.infinity.getFirstActive()<t-this.sessionExpire}};t.exports=i},function(t,e,i){var n=i(24),r=i(6),o=n.extend({getListenersList:function(){},registerListeners:function(){if(this._registeredListeners&&0!=this._registeredListeners.length)return null;var t=this.getListenersList();for(var e in this._registeredListeners=[],t){var i=t[e].object;if(i||(i=this.player),!i)return null;var n=t[e].suscriber;n||("function"==typeof i.addEventListener?n="addEventListener":"function"==typeof i.on&&(n="on"));var o=t[e].unsuscriber;o||("function"==typeof i.removeEventListener?o="removeEventListener":"function"==typeof i.off&&(o="off"));var s=t[e].events,a=[];for(var u in s)a.push(u);for(var h in"addEventListener"===n||"on"===n?r.logAllEvents(i,[null].concat(a)):r.logAllEvents(i[n],[null].concat(a)),s)if(s[h]){this._registeredListeners.push([i,o,h,s[h].bind(this)]);var c=this._registeredListeners.length-1;i[n](h,this._registeredListeners[c][3])}}},unregisterListeners:function(){if(this.monitor&&this.monitor.stop(),!this._registeredListeners||0===this._registeredListeners.length)return null;for(var t in this._registeredListeners){var e=this._registeredListeners[t],i=e[0],n=e[1],r=e[2],o=e[3];i&&i[n](r,o)}this._registeredListeners=[]}});t.exports=o},function(t,e,i){var n=i(27),r=i(69);n.adapters.Bitmovin=n.StandardAdapter.extend({getVersion:function(){return r.version+"-"+r.name+"-"+r.tech},getDuration:function(){return this.duration},getPosition:function(){return this.plugin.getAdapter().flags.isJoined?"mid":"pre"},getListenersList:function(){var t=this.player.EVENT||bitmovin.player.EVENT;return[{suscriber:"addEventHandler",unsuscriber:"removeEventHandler",events:{[t.ON_AD_CLICKED]:this.clickListener,[t.ON_AD_ERROR]:this.errorListener,[t.ON_AD_FINISHED]:this.endListener,[t.ON_AD_LINEARITY_CHANGED]:null,[t.ON_AD_MANIFEST_LOADED]:this.manifestListener,[t.ON_AD_PLAYBACK_FINISHED]:this.endListener,[t.ON_AD_SCHEDULED]:null,[t.ON_AD_SKIPPED]:this.skipListener,[t.ON_AD_STARTED]:this.joinListener,[t.ON_AD_BREAK_FINISHED]:this.endListener,[t.ON_AD_BREAK_STARTED]:this.playListener,[t.ON_AD_QUARTILE]:this.quartileListener,[t.ON_PAUSED]:this.pauseListener,[t.ON_PLAYING]:this.playingListener}}]},playListener:function(t){this.fireStart(),this.fireResume()},pauseListener:function(t){this.firePause()},playingListener:function(t){this.fireResume()},joinListener:function(t){this.duration=t.duration,this.fireStart(),this.fireJoin()},clickListener:function(t){this.fireClick(t.clickThroughUrl)},endListener:function(t){this.fireStop(),this.duration=null},errorListener:function(t){t.code>=200&&t.code<=999&&(this.fireError(t.code,t.message),this.fireStop(),this.duration=null)},skipListener:function(t){this.fireSkip(),this.duration=null},manifestListener:function(t){n.Log.error(t)}}),t.exports=n.adapters.Bitmovin},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(173),r=i(16),o=i(39),s=i(70),a=i(103),u=i(72),h=i(36),c=i(38),l=i(17),f=i(179),p=i(42),d=i(73),g=i(13),v=i(43),y=i(37),m=i(71),E=i(180),b=i(34),w=i(3),T=i(14),S=i(44),I=i(90),_=i(95),R=i(94),A=i(5),O=i(96),C=i(98),k=i(91),N=i(93),P=i(92),D=i(97),L=i(181),x=i(48),M=i(182),U=i(183),F=i(184),B=i(100),H=i(99),j=i(101),V=i(185),G=i(102),q=i(104),W=i(47),Q=i(105),K=i(46),J=i(106),Y=i(41),Z=i(80),z=i(81),X=i(84),$=i(76),tt=i(78),et=i(77),it=i(79),nt=i(45),rt=i(86),ot=i(10),st=i(88),at=i(89),ut=i(75),ht=i(82),ct=i(83),lt=i(21),ft=i(19),pt=i(22),dt=i(40),gt=i(35),vt=i(85),yt=i(87);"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t});var mt={version:"{{VERSION}}",UIManager:n.UIManager,UIInstanceManager:n.UIInstanceManager,ArrayUtils:lt.ArrayUtils,StringUtils:ft.StringUtils,PlayerUtils:pt.PlayerUtils,UIUtils:dt.UIUtils,BrowserUtils:gt.BrowserUtils,StorageUtils:vt.StorageUtils,AdClickOverlay:F.AdClickOverlay,AdMessageLabel:U.AdMessageLabel,AdSkipButton:M.AdSkipButton,AirPlayToggleButton:Q.AirPlayToggleButton,AudioQualitySelectBox:S.AudioQualitySelectBox,AudioTrackSelectBox:I.AudioTrackSelectBox,BufferingOverlay:j.BufferingOverlay,Button:r.Button,CastStatusOverlay:_.CastStatusOverlay,CastToggleButton:R.CastToggleButton,CastUIContainer:V.CastUIContainer,ClickOverlay:x.ClickOverlay,CloseButton:q.CloseButton,Component:A.Component,Container:w.Container,ControlBar:o.ControlBar,ErrorMessageOverlay:O.ErrorMessageOverlay,FullscreenToggleButton:s.FullscreenToggleButton,HugePlaybackToggleButton:a.HugePlaybackToggleButton,HugeReplayButton:H.HugeReplayButton,Label:T.Label,MetadataLabel:W.MetadataLabel,MetadataLabelContent:W.MetadataLabelContent,PictureInPictureToggleButton:J.PictureInPictureToggleButton,PlaybackSpeedSelectBox:B.PlaybackSpeedSelectBox,PlaybackTimeLabel:u.PlaybackTimeLabel,PlaybackTimeLabelMode:u.PlaybackTimeLabelMode,PlaybackToggleButton:h.PlaybackToggleButton,PlaybackToggleOverlay:G.PlaybackToggleOverlay,RecommendationOverlay:C.RecommendationOverlay,SeekBar:c.SeekBar,SeekBarLabel:k.SeekBarLabel,SelectBox:l.SelectBox,ItemSelectionList:f.ItemSelectionList,SettingsPanel:p.SettingsPanel,SettingsPanelItem:p.SettingsPanelItem,SettingsToggleButton:d.SettingsToggleButton,Spacer:Y.Spacer,SubtitleOverlay:N.SubtitleOverlay,SubtitleSelectBox:P.SubtitleSelectBox,TitleBar:D.TitleBar,ToggleButton:g.ToggleButton,UIContainer:b.UIContainer,VideoQualitySelectBox:v.VideoQualitySelectBox,VolumeControlButton:L.VolumeControlButton,VolumeSlider:K.VolumeSlider,VolumeToggleButton:y.VolumeToggleButton,VRToggleButton:m.VRToggleButton,Watermark:E.Watermark,subtitlesettings:{BackgroundColorSelectBox:Z.BackgroundColorSelectBox,BackgroundOpacitySelectBox:z.BackgroundOpacitySelectBox,CharacterEdgeSelectBox:X.CharacterEdgeSelectBox,FontColorSelectBox:$.FontColorSelectBox,FontFamilySelectBox:tt.FontFamilySelectBox,FontOpacitySelectBox:et.FontOpacitySelectBox,FontSizeSelectBox:it.FontSizeSelectBox,SubtitleSettingsButton:nt.SubtitleSettingsButton,SubtitleSettingsCloseButton:rt.SubtitleSettingsCloseButton,SubtitleSettingSelectBox:ot.SubtitleSettingSelectBox,SubtitleSettingsLabel:st.SubtitleSettingsLabel,SubtitleSettingsOpenButton:at.SubtitleSettingsOpenButton,SubtitleSettingsPanel:ut.SubtitleSettingsPanel,WindowColorSelectBox:ht.WindowColorSelectBox,WindowOpacitySelectBox:ct.WindowOpacitySelectBox,SubtitleSettingsResetButton:yt.SubtitleSettingsResetButton}};window.miBitmovinUi={playerui:mt},t.exports=mt},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(34),o=i(4),s=i(3),a=i(36),u=i(70),h=i(71),c=i(37),l=i(38),f=i(72),p=i(39),d=i(9),g=i(73),v=i(42),y=i(75),m=i(88),E=i(89),b=i(43),w=i(44),T=i(90),S=i(91),I=i(46),_=i(92),R=i(93),A=i(94),O=i(95),C=i(96),k=i(97),N=i(98),P=i(100),D=i(101),L=i(102),x=i(104),M=i(47),U=i(105),F=i(106),B=i(178),H=i(41),j=i(40),V=i(21),G=i(35),q=function(){function t(t,e,i){void 0===i&&(i={});var s=this;if(this.events={onUiVariantResolve:new d.EventDispatcher},e instanceof r.UIContainer){var a=e,u=[];u.push({ui:a}),this.uiVariants=u}else this.uiVariants=e;this.player=t,this.config=n.__assign({},i,{events:{onUpdated:new d.EventDispatcher}}),this.managerPlayerWrapper=new K(t);var h=function(){var e=t.getConfig().source||{},r=n.__assign({},i);r.metadata=r.metadata||{};var o={metadata:{title:e.title,description:e.description,markers:e.markers},recommendations:e.recommendations};s.config.metadata=s.config.metadata||{},s.config.metadata.title=o.metadata.title||r.metadata.title,s.config.metadata.description=o.metadata.description||r.metadata.description,s.config.metadata.markers=o.metadata.markers||r.metadata.markers||[],s.config.recommendations=o.recommendations||r.recommendations||[]};h(),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_SOURCE_LOADED,function(){h(),s.config.events.onUpdated.dispatch(s)}),i.container?this.uiContainerElement=(i.container,HTMLElement,new o.DOM(i.container)):this.uiContainerElement=new o.DOM(t.getFigure()),this.uiInstanceManagers=[];for(var c=[],l=0,f=this.uiVariants;l<f.length;l++){var p=f[l];null==p.condition&&c.push(p),this.uiInstanceManagers.push(new Q(t,p.ui,this.config))}if(c.length>1)throw Error("Too many UIs without a condition: You cannot have more than one default UI");if(c.length>0&&c[0]!==this.uiVariants[this.uiVariants.length-1])throw Error("Invalid UI variant order: the default UI (without condition) must be at the end of the list");void 0===i.autoUiVariantResolve&&(i.autoUiVariantResolve=!0);var g=null,v=function(e){if(null!=e)switch(e.type){case t.EVENT.ON_AD_STARTED:g=e;break;case t.EVENT.ON_AD_FINISHED:case t.EVENT.ON_AD_SKIPPED:case t.EVENT.ON_AD_ERROR:g=null;break;case t.EVENT.ON_READY:g&&!t.isAd()&&(g=null)}var i=null!=g,n=i&&"vast"===g.clientType;s.resolveUiVariant({isAd:i,isAdWithUI:n,adClientType:i?g.clientType:null},function(t){t.isAd&&s.currentUi.getWrappedPlayer().fireEventInUI(s.player.EVENT.ON_AD_STARTED,g)})};i.autoUiVariantResolve&&(this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_READY,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PLAY,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PAUSED,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_STARTED,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_FINISHED,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_SKIPPED,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_ERROR,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PLAYER_RESIZE,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER,v),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT,v)),v(null)}return t.prototype.getConfig=function(){return this.config},t.prototype.getUiVariants=function(){return this.uiVariants},t.prototype.switchToUiVariant=function(t,e){var i=this.uiVariants.indexOf(t),n=this.uiInstanceManagers[i],r=!1;n!==this.currentUi&&(r=!0),r&&(this.currentUi&&this.currentUi.getUI().hide(),this.currentUi=n,null!=this.currentUi&&(this.currentUi.isConfigured()||this.addUi(this.currentUi),e&&e(),this.currentUi.getUI().show()))},t.prototype.resolveUiVariant=function(t,e){void 0===t&&(t={});var i={isAd:!1,isAdWithUI:!1,adClientType:null,isFullscreen:this.player.isFullscreen(),isMobile:G.BrowserUtils.isMobile,isPlaying:this.player.isPlaying(),width:this.uiContainerElement.width(),documentWidth:document.body.clientWidth},r=n.__assign({},i,t);this.events.onUiVariantResolve.dispatch(this,r);for(var o=null,s=0,a=this.uiVariants;s<a.length;s++){var u=a[s];if(null==u.condition||!0===u.condition(r)){o=u;break}}this.switchToUiVariant(o,function(){e&&e(r)})},t.prototype.addUi=function(t){var e=t.getUI().getDomElement(),i=t.getWrappedPlayer();t.configureControls(),this.uiContainerElement.append(e),i.isReady()&&i.fireEventInUI(i.EVENT.ON_READY,{}),window.requestAnimationFrame?requestAnimationFrame(function(){t.onConfigured.dispatch(t.getUI())}):setTimeout(function(){t.onConfigured.dispatch(t.getUI())},0)},t.prototype.releaseUi=function(t){t.releaseControls(),t.getUI().getDomElement().remove(),t.clearEventHandlers()},t.prototype.release=function(){for(var t=0,e=this.uiInstanceManagers;t<e.length;t++){var i=e[t];this.releaseUi(i)}this.managerPlayerWrapper.clearEventHandlers()},Object.defineProperty(t.prototype,"onUiVariantResolve",{get:function(){return this.events.onUiVariantResolve},enumerable:!0,configurable:!0}),t.prototype.getTimelineMarkers=function(){return this.config.metadata.markers},t.prototype.addTimelineMarker=function(t){this.config.metadata.markers.push(t),this.config.events.onUpdated.dispatch(this)},t.prototype.removeTimelineMarker=function(t){return V.ArrayUtils.remove(this.config.metadata.markers,t)===t&&(this.config.events.onUpdated.dispatch(this),!0)},t}();e.UIManager=q,function(t){!function(e){function i(){var t=new R.SubtitleOverlay,e=new v.SettingsPanel({components:[new v.SettingsPanelItem("Video Quality",new b.VideoQualitySelectBox),new v.SettingsPanelItem("Speed",new P.PlaybackSpeedSelectBox),new v.SettingsPanelItem("Audio Track",new T.AudioTrackSelectBox),new v.SettingsPanelItem("Audio Quality",new w.AudioQualitySelectBox)],hidden:!0}),i=new y.SubtitleSettingsPanel({hidden:!0,overlay:t,settingsPanel:e}),n=new E.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new v.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:n}),new _.SubtitleSelectBox));var o=new p.ControlBar({components:[e,i,new s.Container({components:[new f.PlaybackTimeLabel({timeLabelMode:f.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new S.SeekBarLabel}),new f.PlaybackTimeLabel({timeLabelMode:f.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]}),new s.Container({components:[new a.PlaybackToggleButton,new c.VolumeToggleButton,new I.VolumeSlider,new H.Spacer,new F.PictureInPictureToggleButton,new U.AirPlayToggleButton,new A.CastToggleButton,new h.VRToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton],cssClasses:["controlbar-bottom"]})]});return new r.UIContainer({components:[t,new D.BufferingOverlay,new L.PlaybackToggleOverlay,new O.CastStatusOverlay,o,new N.RecommendationOverlay,new C.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc"]})}function n(){var t=new R.SubtitleOverlay,e=new v.SettingsPanel({components:[new v.SettingsPanelItem("Speed",new P.PlaybackSpeedSelectBox),new v.SettingsPanelItem("Audio Track",new T.AudioTrackSelectBox),new v.SettingsPanelItem("Audio Quality",new w.AudioQualitySelectBox)],hidden:!0}),i=new y.SubtitleSettingsPanel({hidden:!0,overlay:t,settingsPanel:e}),n=new E.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new v.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:n}),new _.SubtitleSelectBox));var o=new p.ControlBar({components:[e,i,new s.Container({components:[new f.PlaybackTimeLabel({timeLabelMode:f.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new S.SeekBarLabel}),new f.PlaybackTimeLabel({timeLabelMode:f.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]}),new s.Container({components:[new a.PlaybackToggleButton,new c.VolumeToggleButton,new I.VolumeSlider,new H.Spacer,new U.AirPlayToggleButton,new A.CastToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton],cssClasses:["controlbar-bottom"]})]});return new r.UIContainer({components:[new B.AudioOnlyOverlay,t,new D.BufferingOverlay,new L.PlaybackToggleOverlay,new O.CastStatusOverlay,o,new N.RecommendationOverlay,new C.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc"]})}function o(){var t=new R.SubtitleOverlay,e=new v.SettingsPanel({components:[new v.SettingsPanelItem("Video Quality",new b.VideoQualitySelectBox),new v.SettingsPanelItem("Speed",new P.PlaybackSpeedSelectBox),new v.SettingsPanelItem("Audio Track",new T.AudioTrackSelectBox),new v.SettingsPanelItem("Audio Quality",new w.AudioQualitySelectBox)],hidden:!0,hideDelay:-1}),i=new y.SubtitleSettingsPanel({hidden:!0,hideDelay:-1,overlay:t,settingsPanel:e}),n=new E.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new v.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:n}),new _.SubtitleSelectBox)),e.addComponent(new x.CloseButton({target:e})),i.addComponent(new x.CloseButton({target:i}));var o=new p.ControlBar({components:[new s.Container({components:[new f.PlaybackTimeLabel({timeLabelMode:f.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new S.SeekBarLabel}),new f.PlaybackTimeLabel({timeLabelMode:f.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]})]});return new r.UIContainer({components:[t,new D.BufferingOverlay,new O.CastStatusOverlay,new L.PlaybackToggleOverlay,o,new k.TitleBar({components:[new M.MetadataLabel({content:M.MetadataLabelContent.Title}),new A.CastToggleButton,new h.VRToggleButton,new c.VolumeToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton]}),e,i,new N.RecommendationOverlay,new C.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc","ui-skin-smallscreen"]})}function d(){var t=new R.SubtitleOverlay,e=new v.SettingsPanel({components:[new v.SettingsPanelItem("Speed",new P.PlaybackSpeedSelectBox),new v.SettingsPanelItem("Audio Track",new T.AudioTrackSelectBox),new v.SettingsPanelItem("Audio Quality",new w.AudioQualitySelectBox)],hidden:!0,hideDelay:-1}),i=new y.SubtitleSettingsPanel({hidden:!0,hideDelay:-1,overlay:t,settingsPanel:e}),n=new E.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new v.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:n}),new _.SubtitleSelectBox)),e.addComponent(new x.CloseButton({target:e})),i.addComponent(new x.CloseButton({target:i}));var o=new p.ControlBar({components:[new s.Container({components:[new f.PlaybackTimeLabel({timeLabelMode:f.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new S.SeekBarLabel}),new f.PlaybackTimeLabel({timeLabelMode:f.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]})]});return new r.UIContainer({components:[new B.AudioOnlyOverlay,t,new D.BufferingOverlay,new O.CastStatusOverlay,new L.PlaybackToggleOverlay,o,new k.TitleBar({components:[new M.MetadataLabel({content:M.MetadataLabelContent.Title}),new A.CastToggleButton,new h.VRToggleButton,new c.VolumeToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton]}),e,i,new N.RecommendationOverlay,new C.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc","ui-skin-smallscreen"]})}e.buildAudioVideoUI=function(e,n){return void 0===n&&(n={}),new t(e,[{ui:o(),condition:function(t){return t.isMobile&&t.documentWidth<600}},{ui:i()}],n)},e.buildAudioOnlyUI=function(e,i){return void 0===i&&(i={}),new t(e,[{ui:d(),condition:function(t){return t.isMobile&&t.documentWidth<600}},{ui:n()}],i)}}(t.Factory||(t.Factory={}))}(q=e.UIManager||(e.UIManager={})),e.UIManager=q;var W=function(){function t(t,e,i){this.events={onConfigured:new d.EventDispatcher,onSeek:new d.EventDispatcher,onSeekPreview:new d.EventDispatcher,onSeeked:new d.EventDispatcher,onComponentShow:new d.EventDispatcher,onComponentHide:new d.EventDispatcher,onControlsShow:new d.EventDispatcher,onPreviewControlsHide:new d.EventDispatcher,onControlsHide:new d.EventDispatcher,onRelease:new d.EventDispatcher},this.playerWrapper=new K(t),this.ui=e,this.config=i}return t.prototype.getConfig=function(){return this.config},t.prototype.getUI=function(){return this.ui},t.prototype.getPlayer=function(){return this.playerWrapper.getPlayer()},Object.defineProperty(t.prototype,"onConfigured",{get:function(){return this.events.onConfigured},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSeek",{get:function(){return this.events.onSeek},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSeekPreview",{get:function(){return this.events.onSeekPreview},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSeeked",{get:function(){return this.events.onSeeked},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onComponentShow",{get:function(){return this.events.onComponentShow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onComponentHide",{get:function(){return this.events.onComponentHide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onControlsShow",{get:function(){return this.events.onControlsShow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPreviewControlsHide",{get:function(){return this.events.onPreviewControlsHide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onControlsHide",{get:function(){return this.events.onControlsHide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRelease",{get:function(){return this.events.onRelease},enumerable:!0,configurable:!0}),t.prototype.clearEventHandlers=function(){this.playerWrapper.clearEventHandlers();var t=this.events;for(var e in t){t[e].unsubscribeAll()}},t}();e.UIInstanceManager=W;var Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getWrappedPlayer=function(){return this.getPlayer()},e.prototype.configureControls=function(){this.configureControlsTree(this.getUI()),this.configured=!0},e.prototype.isConfigured=function(){return this.configured},e.prototype.configureControlsTree=function(t){var e=this,i=[];j.UIUtils.traverseTree(t,function(t){for(var n=0,r=i;n<r.length;n++){if(r[n]===t)throw console&&console.error("Circular reference in UI tree",t),Error("Circular reference in UI tree: "+t.constructor.name)}t.initialize(),t.configure(e.getPlayer(),e),i.push(t)})},e.prototype.releaseControls=function(){this.configured&&(this.onRelease.dispatch(this.getUI()),this.releaseControlsTree(this.getUI()),this.configured=!1),this.released=!0},e.prototype.isReleased=function(){return this.released},e.prototype.releaseControlsTree=function(t){if(t.release(),t instanceof s.Container)for(var e=0,i=t.getComponents();e<i.length;e++){var n=i[e];this.releaseControlsTree(n)}},e.prototype.clearEventHandlers=function(){t.prototype.clearEventHandlers.call(this)},e}(W),K=function(){function t(t){var e=this;this.eventHandlers={},this.player=t;var i=[];for(var n in t)i.push(n);for(var r=[],o=[],s=0,a=i;s<a.length;s++){n=a[s];"function"==typeof t[n]?r.push(n):o.push(n)}for(var u={},h=function(e){u[e]=function(){return t[e].apply(t,arguments)}},c=0,l=r;c<l.length;c++){h(l[c])}for(var f=function(e){var i=Object.getOwnPropertyDescriptor(t,e)||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),e);i&&(i.get||i.set)?Object.defineProperty(u,e,{get:function(){return i.get.call(t)},set:function(e){return i.set.call(t,e)}}):u[e]=t[e]},p=0,d=o;p<d.length;p++){f(d[p])}u.addEventHandler=function(i,n){return t.on?t.on(i,n):t.addEventHandler(i,n),e.eventHandlers[i]||(e.eventHandlers[i]=[]),e.eventHandlers[i].push(n),u},u.removeEventHandler=function(i,n){return t.off?t.off(i,n):t.removeEventHandler(i,n),e.eventHandlers[i]&&V.ArrayUtils.remove(e.eventHandlers[i],n),u},u.fireEventInUI=function(t,i){if(e.eventHandlers[t])for(var n=Object.assign({},{timestamp:Date.now(),type:t,uiSourced:!0},i),r=0,o=e.eventHandlers[t];r<o.length;r++){(0,o[r])(n)}},this.wrapper=u}return t.prototype.getPlayer=function(){return this.wrapper},t.prototype.clearEventHandlers=function(){for(var t in this.eventHandlers)for(var e=0,i=this.eventHandlers[t];e<i.length;e++){var n=i[e];this.player.removeEventHandler(t,n)}},t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=1;t.next=function(){return e++}}(e.Guid||(e.Guid={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(85),o=i(5),s=i(9),a=function(){function t(){var t=this;this._properties={fontColor:new h(this),fontOpacity:new h(this),fontFamily:new h(this),fontSize:new h(this),characterEdge:new h(this),backgroundColor:new h(this),backgroundOpacity:new h(this),windowColor:new h(this),windowOpacity:new h(this)},this.userSettings={},this.localStorageKey=u.instance().prefixCss("subtitlesettings");var e=function(e){i._properties[e].onChanged.subscribe(function(i,n){n.isSet()?t.userSettings[e]=n.value:delete t.userSettings[e],t.save()})},i=this;for(var n in this._properties)e(n);this.load()}return t.prototype.reset=function(){for(var t in this._properties)this._properties[t].clear()},Object.defineProperty(t.prototype,"fontColor",{get:function(){return this._properties.fontColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontOpacity",{get:function(){return this._properties.fontOpacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._properties.fontFamily},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._properties.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"characterEdge",{get:function(){return this._properties.characterEdge},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._properties.backgroundColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundOpacity",{get:function(){return this._properties.backgroundOpacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowColor",{get:function(){return this._properties.windowColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowOpacity",{get:function(){return this._properties.windowOpacity},enumerable:!0,configurable:!0}),t.prototype.save=function(){r.StorageUtils.setObject(this.localStorageKey,this.userSettings)},t.prototype.load=function(){for(var t in this.userSettings=r.StorageUtils.getObject(this.localStorageKey)||{},this.userSettings)this._properties[t].value=this.userSettings[t]},t}();e.SubtitleSettingsManager=a;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.instance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.prefixCss=function(e){return t.prototype.prefixCss.call(this,e)},e}(o.Component),h=function(){function t(t){this._manager=t,this._onChanged=new s.EventDispatcher}return t.prototype.isSet=function(){return null!=this._value},t.prototype.clear=function(){this._value=null,this.onChangedEvent(null)},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){"string"==typeof t&&"null"===t&&(t=null),this._value=t,this.onChangedEvent(t)},enumerable:!0,configurable:!0}),t.prototype.onChangedEvent=function(t){this._onChanged.dispatch(this._manager,this)},Object.defineProperty(t.prototype,"onChanged",{get:function(){return this._onChanged.getEvent()},enumerable:!0,configurable:!0}),t}();e.SubtitleSettingsProperty=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),r=function(){function t(){this.state={}}return t.prototype.load=function(t,e){var i=this;if(this.state[t]){var r=this.state[t];r.loadedCallback=e,r.loaded&&this.callLoadedCallback(r)}else{var o={url:t,image:new n.DOM("img",{}),loadedCallback:e,loaded:!1,width:0,height:0};this.state[t]=o,o.image.on("load",function(t){o.loaded=!0,o.width=o.image.get(0).width,o.height=o.image.get(0).height,i.callLoadedCallback(o)}),o.image.attr("src",o.url)}},t.prototype.callLoadedCallback=function(t){t.loadedCallback(t.url,t.width,t.height)},t}();e.ImageLoader=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(5),o=i(4),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.canvasWidth=160,i.canvasHeight=90,i.interferenceHeight=50,i.lastFrameUpdate=0,i.frameInterval=60,i.useAnimationFrame=!!window.requestAnimationFrame,i.config=i.mergeConfig(e,{cssClass:"ui-tvnoisecanvas"},i.config),i}return n.__extends(e,t),e.prototype.toDomElement=function(){return this.canvas=new o.DOM("canvas",{class:this.getCssClasses()})},e.prototype.start=function(){this.canvasElement=this.canvas.get(0),this.canvasContext=this.canvasElement.getContext("2d"),this.noiseAnimationWindowPos=-this.canvasHeight,this.lastFrameUpdate=0,this.canvasElement.width=this.canvasWidth,this.canvasElement.height=this.canvasHeight,this.renderFrame()},e.prototype.stop=function(){this.useAnimationFrame?cancelAnimationFrame(this.frameUpdateHandlerId):clearTimeout(this.frameUpdateHandlerId)},e.prototype.renderFrame=function(){if(this.lastFrameUpdate+this.frameInterval>(new Date).getTime())this.scheduleNextRender();else{for(var t,e=this.canvasWidth,i=this.canvasHeight,n=this.canvasContext.createImageData(e,i),r=0;r<i;r++)for(var o=0;o<e;o++)t=e*r*4+4*o,n.data[t]=255*Math.random(),(r<this.noiseAnimationWindowPos||r>this.noiseAnimationWindowPos+this.interferenceHeight)&&(n.data[t]*=.85),n.data[t+1]=n.data[t],n.data[t+2]=n.data[t],n.data[t+3]=50;this.canvasContext.putImageData(n,0,0),this.lastFrameUpdate=(new Date).getTime(),this.noiseAnimationWindowPos+=7,this.noiseAnimationWindowPos>i&&(this.noiseAnimationWindowPos=-i),this.scheduleNextRender()}},e.prototype.scheduleNextRender=function(){this.useAnimationFrame?this.frameUpdateHandlerId=window.requestAnimationFrame(this.renderFrame.bind(this)):this.frameUpdateHandlerId=setTimeout(this.renderFrame.bind(this),this.frameInterval)},e}(r.Component);e.TvNoiseCanvas=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(5),s=i(18),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.indicatorConfig=[new o.Component({tag:"div",cssClass:"ui-audioonly-overlay-indicator",hidden:!0})],i.config=i.mergeConfig(e,{cssClass:"ui-audioonly-overlay",hidden:!1,components:i.indicatorConfig},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i),this.componentConfig=i.getConfig().audioOnlyOverlayConfig||{};var n=this.getConfig().components[0],r=this.componentConfig.backgroundImageUrl,o=this.getDomElement(),a=new s.Timeout(400,function(){n.show()});r&&(o.css("backgroundImage","url("+r+")"),o.css("backgroundSize","contain"),o.css("backgroundColor","#000000"),o.css("animation","none"),o.css("backgroundPosition","center")),this.componentConfig.hiddeIndicator||(e.addEventHandler(e.EVENT.ON_PLAY,function(){a.start()}),e.addEventHandler(e.EVENT.ON_PAUSED,function(){a.clear(),n.hide()}))},e}(r.Container);e.AudioOnlyOverlay=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(74),o=i(4),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{tag:"ul",cssClass:"ui-itemselectionlist"},i.config),i}return n.__extends(e,t),e.prototype.isActive=function(){return this.items.length>1},e.prototype.toDomElement=function(){var t=new o.DOM("ul",{id:this.config.id,class:this.getCssClasses()});return this.listElement=t,this.updateDomItems(),t},e.prototype.updateDomItems=function(t){var i=this;void 0===t&&(t=null),this.listElement.empty();for(var n=null,r=function(t){t.addClass(i.prefixCss(e.CLASS_SELECTED))},s=function(s){var u=new o.DOM("li",{type:"li",class:a.prefixCss("ui-selectionlistitem")}).append(new o.DOM("a",{}).html(s.label));n||(null==t?n=u:String(t)===s.key&&(n=u)),u.on("click",function(){n&&function(t){t.removeClass(i.prefixCss(e.CLASS_SELECTED))}(n),n=u,r(u),i.onItemSelectedEvent(s.key,!1)}),n&&r(n),a.listElement.append(u)},a=this,u=0,h=this.items;u<h.length;u++){s(h[u])}},e.prototype.onItemAddedEvent=function(e){t.prototype.onItemAddedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemRemovedEvent=function(e){t.prototype.onItemRemovedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemSelectedEvent=function(e,i){void 0===i&&(i=!0),t.prototype.onItemSelectedEvent.call(this,e),i&&this.updateDomItems(e)},e.CLASS_SELECTED="selected",e}(r.ListSelector);e.ItemSelectionList=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-watermark",url:"http://bitmovin.com"},i.config),i}return n.__extends(e,t),e}(i(48).ClickOverlay);e.Watermark=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(46),s=i(37),a=i(18),u=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.volumeToggleButton=new s.VolumeToggleButton,i.volumeSlider=new o.VolumeSlider({vertical:null==e.vertical||e.vertical,hidden:!0}),i.config=i.mergeConfig(e,{cssClass:"ui-volumecontrolbutton",components:[i.volumeToggleButton,i.volumeSlider],hideDelay:500},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getVolumeToggleButton(),o=this.getVolumeSlider();this.volumeSliderHideTimeout=new a.Timeout(this.getConfig().hideDelay,function(){o.hide()});var s=!1;r.getDomElement().on("mouseenter",function(){o.isHidden()&&o.show(),n.volumeSliderHideTimeout.clear()}),r.getDomElement().on("mouseleave",function(){n.volumeSliderHideTimeout.reset()}),o.getDomElement().on("mouseenter",function(){n.volumeSliderHideTimeout.clear(),s=!0}),o.getDomElement().on("mouseleave",function(){o.isSeeking()?n.volumeSliderHideTimeout.clear():n.volumeSliderHideTimeout.reset(),s=!1}),o.onSeeked.subscribe(function(){s||n.volumeSliderHideTimeout.reset()})},e.prototype.release=function(){t.prototype.release.call(this),this.volumeSliderHideTimeout.clear()},e.prototype.getVolumeToggleButton=function(){return this.volumeToggleButton},e.prototype.getVolumeSlider=function(){return this.volumeSlider},e}(r.Container);e.VolumeControlButton=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(16),o=i(19),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-button-ad-skip",skipMessage:{countdown:"Skip ad in {remainingTime}",skip:"Skip ad"}},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig(),s=r.skipMessage,a=null,u=function(){a.skipOffset?n.show():n.hide(),e.getCurrentTime()<a.skipOffset?n.setText(o.StringUtils.replaceAdMessagePlaceholders(r.skipMessage.countdown,a.skipOffset,e)):n.setText(r.skipMessage.skip)},h=function(){e.removeEventHandler(e.EVENT.ON_TIME_CHANGED,u),e.removeEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,u)};e.addEventHandler(e.EVENT.ON_AD_STARTED,function(t){s=(a=t).skipMessage||s,u(),e.addEventHandler(e.EVENT.ON_TIME_CHANGED,u),e.addEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,u)}),e.addEventHandler(e.EVENT.ON_AD_SKIPPED,h),e.addEventHandler(e.EVENT.ON_AD_ERROR,h),e.addEventHandler(e.EVENT.ON_AD_FINISHED,h),this.onClick.subscribe(function(){e.skipAd()})},e}(r.Button);e.AdSkipButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(14),o=i(19),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-label-ad-message",text:"This ad will end in {remainingTime} seconds."},i.config),i}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig().text,s=function(){n.setText(o.StringUtils.replaceAdMessagePlaceholders(r,null,e))},a=function(){e.removeEventHandler(e.EVENT.ON_TIME_CHANGED,s),e.removeEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,s)};e.addEventHandler(e.EVENT.ON_AD_STARTED,function(t){r=t.adMessage||r,s(),e.addEventHandler(e.EVENT.ON_TIME_CHANGED,s),e.addEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,s)}),e.addEventHandler(e.EVENT.ON_AD_SKIPPED,a),e.addEventHandler(e.EVENT.ON_AD_ERROR,a),e.addEventHandler(e.EVENT.ON_AD_FINISHED,a)},e}(r.Label);e.AdMessageLabel=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=null,o=!e.getConfig().advertising||!e.getConfig().advertising.hasOwnProperty("clickThroughEnabled")||e.getConfig().advertising.clickThroughEnabled;e.addEventHandler(e.EVENT.ON_AD_STARTED,function(t){r=t.clickThroughUrl,o?n.setUrl(r):n.setUrl(null)});var s=function(){n.setUrl(null)};e.addEventHandler(e.EVENT.ON_AD_FINISHED,s),e.addEventHandler(e.EVENT.ON_AD_SKIPPED,s),e.addEventHandler(e.EVENT.ON_AD_ERROR,s),this.onClick.subscribe(function(){e.pause("ui-content-click"),e.fireEvent(e.EVENT.ON_AD_CLICKED,{clickThroughUrl:r})})},e}(i(48).ClickOverlay);e.AdClickOverlay=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(34),o=i(18),s=function(t){function e(e){return t.call(this,e)||this}return n.__extends(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig(),s=!1;this.castUiHideTimeout=new o.Timeout(r.hideDelay,function(){i.onControlsHide.dispatch(n),s=!1});var a=function(){s||(i.onControlsShow.dispatch(n),s=!0)},u=function(){a(),n.castUiHideTimeout.clear()},h=function(){a(),n.castUiHideTimeout.start()};e.addEventHandler(e.EVENT.ON_READY,h),e.addEventHandler(e.EVENT.ON_SOURCE_LOADED,h),e.addEventHandler(e.EVENT.ON_PLAY,h),e.addEventHandler(e.EVENT.ON_PAUSED,u),e.addEventHandler(e.EVENT.ON_SEEK,u),e.addEventHandler(e.EVENT.ON_SEEKED,function(){e.isPlaying()?h():u()})},e.prototype.release=function(){t.prototype.release.call(this),this.castUiHideTimeout.clear()},e}(r.UIContainer);e.CastUIContainer=s},function(module,exports){!function(t){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function i(t){return void 0===t}if(t){var n={},r=t.TraceKit,o=[].slice,s="?";n.noConflict=function(){return t.TraceKit=r,n},n.wrap=function(t){return function(){try{return t.apply(this,arguments)}catch(t){throw n.report(t),t}}},n.report=function(){function i(t,i){var r=null;if(!i||n.collectWindowErrors){for(var s in c)if(e(c,s))try{c[s].apply(null,[t].concat(o.call(arguments,2)))}catch(t){r=t}if(r)throw r}}function r(t,e,r,o,s){var a=null;if(s)a=n.computeStackTrace(s);else if(f)n.computeStackTrace.augmentStackTraceWithInitialElement(f,e,r,t),a=f,f=null,l=null;else{var h={url:e,line:r,column:o};h.func=n.computeStackTrace.guessFunctionName(h.url,h.line),h.context=n.computeStackTrace.gatherContext(h.url,h.line),a={mode:"onerror",message:t,url:document.location.href,stack:[h],useragent:navigator.userAgent}}return i(a,"from window.onerror"),!!u&&u.apply(this,arguments)}function s(){!0!==h&&(u=t.onerror,t.onerror=r,h=!0)}function a(e){var r=o.call(arguments,1);if(f){if(l===e)return;var s=f;f=null,l=null,i.apply(null,[s,null].concat(r))}var a=n.computeStackTrace(e);throw f=a,l=e,t.setTimeout(function(){l===e&&(f=null,l=null,i.apply(null,[a,null].concat(r)))},a.incomplete?2e3:0),e}var u,h,c=[],l=null,f=null;return a.subscribe=function(t){s(),c.push(t)},a.unsubscribe=function(t){for(var e=c.length-1;e>=0;--e)c[e]===t&&c.splice(e,1)},a}(),n.computeStackTrace=function(){function r(e){if(!n.remoteFetching)return"";try{var i=function(){try{return new t.XMLHttpRequest}catch(e){return new t.ActiveXObject("Microsoft.XMLHTTP")}}();return i.open("GET",e,!1),i.send(""),i.responseText}catch(t){return""}}function o(t){if("string"!=typeof t)return[];if(!e(b,t)){var i="",n="";try{n=document.domain}catch(t){}-1!==t.indexOf(n)&&(i=r(t)),b[t]=i?i.split("\n"):[]}return b[t]}function a(t,e){var n,r=/function ([^(]*)\(([^)]*)\)/,a=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,u="",h=o(t);if(!h.length)return s;for(var c=0;10>c;++c)if(!i(u=h[e-c]+u)){if(n=a.exec(u))return n[1];if(n=r.exec(u))return n[1]}return s}function u(t,e){var r=o(t);if(!r.length)return null;var s=[],a=Math.floor(n.linesOfContext/2),u=a+n.linesOfContext%2,h=Math.max(0,e-a-1),c=Math.min(r.length,e+u-1);e-=1;for(var l=h;c>l;++l)i(r[l])||s.push(r[l]);return s.length>0?s:null}function h(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(t){return h(t).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function l(t,e){for(var i,n,r=0,s=e.length;s>r;++r)if((i=o(e[r])).length&&(i=i.join("\n"),n=t.exec(i)))return{url:e[r],line:i.substring(0,n.index).split("\n").length,column:n.index-i.lastIndexOf("\n",n.index)-1};return null}function f(t,e,i){var n,r=o(e),s=new RegExp("\\b"+h(t)+"\\b");return i-=1,r&&r.length>i&&(n=s.exec(r[i]))?n.index:null}function p(e){for(var i,n,r,o,s=[t.location.href],a=document.getElementsByTagName("script"),u=""+e,f=0;f<a.length;++f){var p=a[f];p.src&&s.push(p.src)}if(r=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(u)){var d=r[1]?"\\s+"+r[1]:"",g=r[2].split(",").join("\\s*,\\s*");i=h(r[3]).replace(/;$/,";?"),n=new RegExp("function"+d+"\\s*\\(\\s*"+g+"\\s*\\)\\s*{\\s*"+i+"\\s*}")}else n=new RegExp(h(u).replace(/\s+/g,"\\s+"));if(o=l(n,s))return o;if(r=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(u)){var v=r[1];if(i=c(r[2]),o=l(n=new RegExp("on"+v+"=[\\'\"]\\s*"+i+"\\s*[\\'\"]","i"),s[0]))return o;if(o=l(n=new RegExp(i),s))return o}return null}function d(t){if(!t.stack)return null;for(var e,n,r=/^\s*at (.*?) ?\(?((?:file|https?|chrome-extension):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?@?((?:file|https?|chrome):.*?):(\d+)(?::(\d+))?\s*$/i,h=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=t.stack.split("\n"),l=[],p=/^(.*) is undefined$/.exec(t.message),d=0,g=c.length;g>d;++d){if(e=o.exec(c[d]))n={url:e[3],func:e[1]||s,args:e[2]?e[2].split(","):"",line:+e[4],column:e[5]?+e[5]:null};else if(e=r.exec(c[d]))n={url:e[2],func:e[1]||s,line:+e[3],column:e[4]?+e[4]:null};else{if(!(e=h.exec(c[d])))continue;n={url:e[2],func:e[1]||s,line:+e[3],column:e[4]?+e[4]:null}}!n.func&&n.line&&(n.func=a(n.url,n.line)),n.line&&(n.context=u(n.url,n.line)),l.push(n)}return l.length?(l[0]&&l[0].line&&!l[0].column&&p?l[0].column=f(p[1],l[0].url,l[0].line):l[0].column||i(t.columnNumber)||(l[0].column=t.columnNumber+1),{mode:"stack",name:t.name,message:t.message,url:document.location.href,stack:l,useragent:navigator.userAgent}):null}function g(i){var n=i.message.split("\n");if(n.length<4)return null;var r,s,h,f,p=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,d=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,g=/^\s*Line (\d+) of function script\s*$/i,v=[],y=document.getElementsByTagName("script"),m=[];for(s in y)e(y,s)&&!y[s].src&&m.push(y[s]);for(s=2,h=n.length;h>s;s+=2){var E=null;if(r=p.exec(n[s]))E={url:r[2],func:r[3],line:+r[1]};else if(r=d.exec(n[s])){E={url:r[3],func:r[4]};var b=+r[1],w=m[r[2]-1];if(w&&(f=o(E.url))){var T=(f=f.join("\n")).indexOf(w.innerText);T>=0&&(E.line=b+f.substring(0,T).split("\n").length)}}else if(r=g.exec(n[s])){var S=t.location.href.replace(/#.*$/,""),I=r[1];E={url:S,line:(f=l(new RegExp(c(n[s+1])),[S]))?f.line:I,func:""}}if(E){E.func||(E.func=a(E.url,E.line));var _=u(E.url,E.line),R=_?_[Math.floor(_.length/2)]:null;E.context=_&&R.replace(/^\s*/,"")===n[s+1].replace(/^\s*/,"")?_:[n[s+1]],v.push(E)}}return v.length?{mode:"multiline",name:i.name,message:n[0],url:document.location.href,stack:v,useragent:navigator.userAgent}:null}function v(t,e,i,n){var r={url:e,line:i};if(r.url&&r.line){t.incomplete=!1,r.func||(r.func=a(r.url,r.line)),r.context||(r.context=u(r.url,r.line));var o=/ '([^']+)' /.exec(n);if(o&&(r.column=f(o[1],r.url,r.line)),t.stack.length>0&&t.stack[0].url===r.url){if(t.stack[0].line===r.line)return!1;if(!t.stack[0].line&&t.stack[0].func===r.func)return t.stack[0].line=r.line,t.stack[0].context=r.context,!1}return t.stack.unshift(r),t.partial=!0,!0}return t.incomplete=!0,!1}function y(t,e){for(var i,r,o,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,h=[],c={},l=!1,d=y.caller;d&&!l;d=d.caller)if(d!==m&&d!==n.report){if(r={url:null,func:s,line:null,column:null},d.name?r.func=d.name:(i=u.exec(d.toString()))&&(r.func=i[1]),void 0===r.func)try{r.func=i.input.substring(0,i.input.indexOf("{"))}catch(t){}if(o=p(d)){r.url=o.url,r.line=o.line,r.func===s&&(r.func=a(r.url,r.line));var g=/ '([^']+)' /.exec(t.message||t.description);g&&(r.column=f(g[1],o.url,o.line))}c[""+d]?l=!0:c[""+d]=!0,h.push(r)}e&&h.splice(0,e);var E={mode:"callers",name:t.name,message:t.message,url:document.location.href,stack:h,useragent:navigator.userAgent};return v(E,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),E}function m(t,e){var i=null;e=null==e?0:+e;try{if(i=function(t){for(var e,i=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,n=t.stacktrace.split("\n"),r=[],o=0,s=n.length;s>o;o+=2)if(e=i.exec(n[o])){var h={line:+e[1],column:+e[2],func:e[3]||e[4],args:e[5]?e[5].split(","):[],url:e[6]};if(!h.func&&h.line&&(h.func=a(h.url,h.line)),h.line)try{h.context=u(h.url,h.line)}catch(t){}h.context||(h.context=[n[o+1]]),r.push(h)}return r.length?{mode:"stacktrace",name:t.name,message:t.message,url:document.location.href,stack:r,useragent:navigator.userAgent}:null}(t))return i}catch(t){if(E)throw t}try{if(i=d(t))return i}catch(t){if(E)throw t}try{if(i=g(t))return i}catch(t){if(E)throw t}try{if(i=y(t,e+1))return i}catch(t){if(E)throw t}return{mode:"failed"}}var E=!1,b={};return m.augmentStackTraceWithInitialElement=v,m.guessFunctionName=a,m.gatherContext=u,m.ofCaller=function(t){t=1+(null==t?0:+t);try{throw new Error}catch(e){return m(e,t+1)}},m.getSource=o,m}(),n.extendToAsynchronousCallbacks=function(){var e=function(e){var i=t[e];t[e]=function(){var t=o.call(arguments),e=t[0];return"function"==typeof e&&(t[0]=n.wrap(e)),i.apply?i.apply(this,t):i(t[0],t[1])}};e("setTimeout"),e("setInterval")},n.remoteFetching||(n.remoteFetching=!0),n.collectWindowErrors||(n.collectWindowErrors=!0),(!n.linesOfContext||n.linesOfContext<1)&&(n.linesOfContext=11),t.TraceKit=n}}("undefined"!=typeof window?window:global),function(t,e){"use strict";if(t){var i=t.event.add;t.event.add=function(n,r,o,s,a){return"function"!=typeof o&&"function"!=typeof o.handler?i.call(this,n,r,o,s,a):(o.handler?(u=o.handler,o.handler=e.wrap(o.handler)):(u=o,o=e.wrap(o)),o.guid=u.guid?u.guid:u.guid=t.guid++,i.call(this,n,r,o,s,a));var u};var n=t.fn.ready;t.fn.ready=function(t){return n.call(this,e.wrap(t))};var r=t.ajax;t.ajax=function(i,n){"object"==typeof i&&(n=i,i=void 0),n=n||{};for(var o,s=["complete","error","success"];o=s.pop();)t.isFunction(n[o])&&(n[o]=e.wrap(n[o]));try{return i?r.call(this,i,n):r.call(this,n)}catch(t){throw e.report(t),t}}}}(window.jQuery,window.TraceKit),function(t,e,i,n){function r(t,e,i,r){if(P&&(D||e.getAllResponseHeaders())){var o="AJAX Error: "+(e.statusText||"unknown")+" "+(i.type||"unknown")+" "+(function(t){var e=t,i=t.split("//")[1];if(i){var n=i.indexOf("?"),r=i.toString().substring(0,n),o=r.split("/").slice(0,4).join("/"),s=r.substring(0,48);(e=o.length<s.length?o:s)!==r&&(e+="..")}return e}(i.url)||"unknown");H.send(r||t.type,{status:e.status,statusText:e.statusText,type:i.type,url:i.url,ajaxErrorMessage:o,contentType:i.contentType,requestData:i.data&&i.data.slice?i.data.slice(0,10240):n,responseData:e.responseText&&e.responseText.slice?e.responseText.slice(0,10240):n,activeTarget:t.target&&t.target.activeElement?t.target.activeElement.outerHTML:n})}}function o(){return!(!c||""===c)||(M.log("Atatus API key has not been configured, make sure you call atatus.config(yourApiKey)"),!1)}function s(){try{return"localStorage"in t&&null!==t.localStorage}catch(t){return!1}}function a(){if(s()&&localStorage.length>0)for(var t in localStorage)if("atatusjs="===t.substring(0,9)){try{var e=JSON.parse(localStorage[t]);"apikey"in e&&h(x,e)}catch(t){M.log("Atatus: Invalid JSON object in LocalStorage")}localStorage.removeItem(t)}}function u(t,i){if(i=i||{},t.stack&&t.stack.length){M.isEmpty(i.customData)&&(i.customData="function"==typeof l?l():l),M.isEmpty(i.tags)&&(i.tags=R);var n=i.customData&&i.customData.ajaxErrorMessage||t.message;if(n&&0===n.indexOf("Uncaught ")&&(n=t.message.substring(9)),n=n||i.status||"Script error.",m&&m.test(n))M.log("Atatus: canceling send due to ignore errors");else{var r=[];t.stack&&t.stack.length&&M.forEach(t.stack,function(t,e){M.endsWith(e.url,"/atatus.js")||r.push({ln:e.line||0,cn:e.column||0,f:e.url||"anonymous",m:e.func||"[anonymous]"})});var o=[t.name,n,JSON.stringify(r)].join("|");if(o!==E){E=o;var s=i.customData;try{JSON.stringify(s)}catch(t){var a="Cannot add custom data; may contain circular reference";s={error:a},M.log("Atatus: "+a)}var u=B.getAllEvents();U.clear();var c={class:t.name,name:n,backTraces:r,userActions:u,net:null,customData:s||null,tags:i.tags,sourcemap:N,request:{url:e.location.href,ua:navigator.userAgent}};if("function"==typeof b&&(c.groupingKey=b(c)),"function"==typeof w)w(c)&&h(x,c);else h(x,c)}else M.log("Atatus: canceling send due to duplicate errors")}}else M.log("Atatus: Canceling send due to no stacktrace.")}function h(i,n){if(O&&O.length&&-1===O.indexOf(location.host))M.log("Atatus: canceling send due to not a allowed domain");else if(o()){if(!n.ts){var r=t.screen||function(){var i=e.documentElement,n=e.getElementsByTagName("body")[0];return{width:t.innerWidth||i.clientWidth||n.clientWidth,height:t.innerHeight||i.clientHeight||n.clientHeight}}();n.ts=(new Date).getTime(),n.apikey=c,n.request=n.request||{},n.request.url=n.request.url||e.location.href,n.request.ua=n.request.ua||navigator.userAgent,n.request.w=r.width,n.request.h=r.height,n.v=p||"",n._v=S||""}f&&(n.cid=f.userId||null),M.log("Sending data to Atatus Receiver:",n),function(t,e){var i=new Image,n=L+t+"?data="+encodeURIComponent(e);i.crossOrigin="anonymous",i.onload=function(){a()},i.onerror=i.onabort=function(){k&&t===x&&function(t){var e=(new Date).toJSON();try{var i="atatusjs="+e+"="+M.getRandomInt();void 0===localStorage[i]&&(localStorage[i]=t)}catch(t){M.log("Atatus: LocalStorage full, cannot save exception")}}(e)},i.src=n}(i,JSON.stringify(n))}}var c,l,f,p,d,g,v,y,m,E,b,w,T,S="2.3.12",I=TraceKit.noConflict(),_=t.atatus,R=[],A=!1,O=[],C=!1,k=!1,N=!1,P=!1,D=!1,L="https://br-rx.atatus.com",x="/track/browser/errors";i&&(T=i(e));var M={isBoolean:function(t){return void 0!==t&&"boolean"==typeof t},isString:function(t){return"string"==typeof t},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},endsWith:function(t,e){return!(!t||!e)&&-1!==t.indexOf(e,t.length-e.length)},joinRegExp:function(t){for(var e,i=[],n=0,r=t.length;r>n;n++)e=t[n],M.isString(e)?i.push(e.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")):e&&e.source&&i.push(e.source);return new RegExp(i.join("|"),"i")},getTargetUrl:function(e){return t.XDomainRequest&&C&&(e=e.slice(6)),e},now:function(){return(new Date).getTime()},pad:function(t){return 1===(t=String(t)).length&&(t="0"+t),t},merge:function(t,e){var i,n={};for(i in t)n[i]=t[i];for(i in e)n[i]=e[i];return n},mergeArray:function(t,e){return null!=e?t.concat(e):t},forEach:function(t,e){for(var i=0;i<t.length;i++)e.call(null,i,t[i])},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},getRandomInt:function(){return Math.floor(9007199254740992*Math.random())},log:function(e,i){A&&t.console&&t.console.log&&(t.console.log(e),i&&t.console.log(i))},bind:function(t,e){return function(){return t.apply(e,Array.prototype.slice.call(arguments))}},canAllowInsecureSubmissions:function(){var e=t.navigator.userAgent,i=e.match(/Trident\/([\d.]+)/),n=i&&"7.0"===i[1]?11:!!(e=e.match(/MSIE ([\d.]+)/))&&parseInt(e[1],10);return n&&9>=n},uuid4:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},addEventListener:function(e,i,n){return void 0!==t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,n):void 0},arrayFromObject:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}},U={eventObject:{},all:function(t){for(var e=this.getEventObject(t),i=[],n=0;n<e.length;n++)i.push(e[n].value);return i},clear:function(){for(var t in this.eventObject)this.eventObject.hasOwnProperty(t)&&(this.eventObject[t].length=0)},add:function(t,e){var i=this.getEventObject(t),n=M.uuid4();return i.push({key:n,value:e}),this.truncateEventObject(t,10),n},get:function(t,e){for(var i=this.getEventObject(t),n=0;n<i.length;n++)if(i[n].key===e)return i[n].value;return!1},getEventObject:function(t){return this.eventObject[t]||(this.eventObject[t]=[]),this.eventObject[t]},truncateEventObject:function(t,e){var i=this.getEventObject(t);i.length>e&&(this.eventObject[t]=i.slice(i.length-e))}},F={attach:function(e,i,n,r,o){e=e||t.console||{};for(var s=o||["log","debug","info","warn","error"],a=s.pop(),u=function(t,e,n){i&&U.add("user",{ts:M.now(),c:"console",l:t,m:e}),"error"===t&&r&&H.notify(new Error(e),n)};a;)this.wrapConsoleMethod(e,a,n,u),a=s.pop()},wrapConsoleMethod:function(t,e,i,n){var r=t[e],o=t;e in t&&(t[e]=function(){var t=[].slice.call(arguments),s=""+t.join(" ");n&&n(e,s,{level:e,logger:"console"}),r&&i&&Function.prototype.apply.call(r,o,t)})}},B={attach:function(){var t=M.bind(this.onDocumentClicked,this),i=M.bind(this.onInputChanged,this);e.addEventListener?(e.addEventListener("click",t,!0),e.addEventListener("blur",i,!0)):e.attachEvent&&(e.attachEvent("onclick",t),e.attachEvent("onfocusout",i))},writeUserEvent:function(t,e,i,n){"password"===this.getElementType(t)&&(i=void 0),U.add("user",{ts:M.now(),a:e,e:this.getOuterHTML(t),v:this.getValueKind(i,n)})},onDocumentClicked:function(t){var e=this.getElementFromEvent(t);e&&e.tagName&&(this.isTarget(e,"a")||this.isTarget(e,"button")||this.isTarget(e,"input",["button","submit"])?this.writeUserEvent(e,"click"):this.isTarget(e,"input",["checkbox","radio"])&&this.writeUserEvent(e,"check",e.value,e.checked))},onInputChanged:function(t){var e=this.getElementFromEvent(t);e&&e.tagName&&(this.isTarget(e,"textarea")?this.writeUserEvent(e,"input",e.value):this.isTarget(e,"select")&&e.options&&e.options.length?this.onSelectInputChanged(e):this.isTarget(e,"input")&&!this.isTarget(e,"input",["button","submit","hidden","checkbox","radio"])&&this.writeUserEvent(e,"input",e.value))},onSelectInputChanged:function(t){if(t.multiple){for(var e=0;e<t.options.length;e++)if(t.options[e].selected){this.writeUserEvent(t,"select",t.options[e].value);break}}else 0<=t.selectedIndex&&t.options[t.selectedIndex]&&this.writeUserEvent(t,"select",t.options[t.selectedIndex].value)},getElementFromEvent:function(t){return t.target||e.elementFromPoint(t.clientX,t.clientY)},isTarget:function(t,e,i){if(t.tagName.toLowerCase()!==e.toLowerCase())return!1;if(!i)return!0;for(var n=this.getElementType(t),r=0;r<i.length;r++)if(i[r]===n)return!0;return!1},getElementType:function(t){return(t.getAttribute("type")||"").toLowerCase()},getOuterHTML:function(t){for(var e="<"+t.tagName.toLowerCase(),i=t.attributes,n=0,r=i.length;r>n;n++){var o=i[n].name;"value"!==o.toLowerCase()&&(e+=" "+o+'="'+i[n].value+'"')}return e+" >"},getValueKind:function(t,e){return null==t?null:{length:t.length,checked:e,pattern:this.matchInputPattern(t)}},matchInputPattern:function(t){return""===t?"empty":/^[a-z0-9!#$%&'*+=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/.test(t)?"email":/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(t)||/^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(t)?"date":/^(?:(?:\+?1\s*(?:[.\-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.\-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.\-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(t)?"phone":/^\s*$/.test(t)?"whitespace":/^\d*$/.test(t)?"numeric":"character"},getAllEvents:function(){return U.all("user")}},H={noConflict:function(){return t.atatus=_,H},isConfigured:function(){return!!c},config:function(e,i){return i=i||{},c=e,I.remoteFetching=!1,m=[],i&&(l=i.customData,R=i.tags||[],N=!(!i.enableSourcemap&&!i.sourcemap),d=!!i.disableUserActions,g=!!i.disableAjaxMonitoring,v=!!i.disableRUM,A=!!i.debugMode,i.ignoreErrors&&M.isArray(i.ignoreErrors)&&(m=i.ignoreErrors),H.setAllowedDomains(i.allowedDomains),H.setVersion(i.version),H.enableOffline(i.enableOffline||i.offline),H.onBeforeErrorSend(i.beforeErrorSend),H.setGroupingKeyCallback(i.groupingKeyCallback)),C=M.canAllowInsecureSubmissions(),m.push(/^Script error\.?$/),m.push(/^Javascript error: Script error\.? on line 0$/),m=M.joinRegExp(m),a(),y={enabled:!0,timeline:!0,display:!0,error:!0,levels:null},M.isBoolean(i.console)&&(y.enabled=i.console),M.isBoolean(i.consoleTimeline)&&(y.timeline=i.consoleTimeline),M.isBoolean(i.consoleDisplay)&&(y.display=i.consoleDisplay),M.isBoolean(i.consoleErrorNotify)&&(y.error=i.consoleErrorNotify),M.isArray(i.consoleTimelineLevels)&&(y.levels=i.consoleTimelineLevels),y.enabled&&"console"in t&&t.console.log&&F.attach(t.console,y.timeline,y.display,y.error,y.levels),d||B.attach(),g||v||H.__attachAjaxHooks(),H},install:function(){return o()?(I.report.subscribe(u),I.extendToAsynchronousCallbacks(),T&&P&&T.ajaxError(r),H):void 0},uninstall:function(){return c=null,I.report.unsubscribe(u),T&&P&&T.unbind("ajaxError",r),H},setCustomData:function(t){return l=t,H},setTags:function(t){return R=t,H},setAllowedDomains:function(t){return t&&M.isArray(t)&&(O=t),H},getAllowedDomains:function(){return O},setUser:function(t,e,i,n){return f={},t&&(f.userId=""+t),e&&(f.email=""+e),i&&(f.firstName=""+i),n&&(f.lastName=""+n),H},setVersion:function(t){return t&&(p=""+t),H},enableOffline:function(t){return M.isBoolean(t)&&(k=t),H},onBeforeErrorSend:function(t){return"function"==typeof t&&(w=t),H},setGroupingKeyCallback:function(t){return"function"==typeof t&&(b=t),H},setAPIEndpoint:function(t){return L=t,H},init:function(t,e,i){return i&&((e=e||{}).customData=i),H.config(t,e)},withCustomData:function(t){return H.setCustomData(t)},withTags:function(t){return H.setTags(t)},attach:function(){return H.install()},detach:function(){return H.uninstall()},notify:function(t,e,i){return H.send(t,e,i)},sendPerf:function(t){return v?void M.log("RUM is disabled. Please enable it in the config options."):h("/track/browser/perf",t)},sendAjaxPerf:function(t){return v?void M.log("RUM is disabled. Please enable it in the config options."):h("/track/browser/perf/ajax",t)},sendTxnPerf:function(t){return h("/track/browser/perf/txn",t)},send:function(t,e,i){try{u(I.computeStackTrace(t),{customData:M.merge(l,e),tags:M.mergeArray(R,i)})}catch(e){if(t!==e)throw e}return H},_helper:M};t.atatus=H}(window,document,window.jQuery),function(t,e,i){function n(t){t.pl<=0||atatus.sendPerf(t)}var r=(new Date).getTime(),o=o||{};o.q=o.q||[],o.version="0.3",o.targetOrigin=e.location.protocol+"//"+e.location.hostname,o.bPostMessage=!1,o.beaconUrl=o.beaconUrl||"/images/beacon.gif",o.autorun=!1,o.init=function(){if(o.bDone=!1,o.bUnloaded=!1,o.marks={},o.measures={},o.starts={},o.findStartTime(),o.addEventListener("beforeunload",o.beforeUnload,!1),o.addEventListener("pagehide",o.beforeUnload,!1),o.addEventListener("unload",o.beforeUnload,!1),o.processQ(),"complete"===e.readyState){var i=t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance;i&&void 0!==i.timing&&void 0!==i.timing.loadEventEnd&&(o.mark("firstbyte",i.timing.responseStart),o.mark("onload",i.timing.loadEventEnd)),o.done()}else o.addEventListener("load",o.onload,!1)},o.processQ=function(){for(var t=o.q.length,e=0;t>e;e++){var i=o.q[e],n=i[0];"mark"===n?o.mark(i[1],i[2]):"measure"===n?o.measure(i[1],i[2],i[3]):"done"===n&&o.done(i[1])}},o.mark=function(e,i){return o.dprint("RUM_EPISODES.mark: "+e+", "+i),e?(o.marks[e]=parseInt(i||(new Date).getTime()),o.bPostMessage&&t.postMessage("RUM_EPISODES:mark:"+e+":"+i,o.targetOrigin),void("firstbyte"===e?o.measure("backend","starttime","firstbyte"):"onload"===e?(o.measure("frontend","firstbyte","onload"),o.measure("page load time","starttime","onload")):"done"===e&&o.measure("total load time","starttime","done"))):void o.dprint("Error: markName is undefined in RUM_EPISODES.mark.")},o.measure=function(e,i,n){if(o.dprint("RUM_EPISODES.measure: "+e+", "+i+", "+n),e){var r,s;if(void 0===i)r="number"==typeof o.marks[e]?o.marks[e]:(new Date).getTime();else if("number"==typeof o.marks[i])r=o.marks[i];else{if("number"!=typeof i)return void o.dprint("Error: unexpected startNameOrTime in RUM_EPISODES.measure: "+i);r=i}if(void 0===n)s=(new Date).getTime();else if("number"==typeof o.marks[n])s=o.marks[n];else{if("number"!=typeof n)return void o.dprint("Error: unexpected endNameOrTime in RUM_EPISODES.measure: "+n);s=n}o.starts[e]=parseInt(r),o.measures[e]=parseInt(s-r),o.bPostMessage&&t.postMessage("RUM_EPISODES:measure:"+e+":"+r+":"+s,o.targetOrigin)}else o.dprint("Error: episodeName is undefined in RUM_EPISODES.measure.")},o.done=function(e){o.bDone=!0,o.mark("done"),o.bPostMessage&&t.postMessage("RUM_EPISODES:done",o.targetOrigin),"function"==typeof e&&e()},o.getMarks=function(){return o.marks},o.getMeasures=function(){return o.measures},o.getStarts=function(){return o.starts},o.findStartTime=function(){var t=o.findStartWebTiming()||o.findStartCookie();t&&o.mark("starttime",t)},o.findStartWebTiming=function(){var e,i=t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance;return i&&void 0!==i.timing&&void 0!==i.timing.navigationStart&&(e=i.timing.navigationStart,o.dprint("RUM_EPISODES.findStartWebTiming: startTime = "+e)),e},o.findStartCookie=function(){for(var i=e.cookie.split(" "),n=0;n<i.length;n++)if(0===i[n].indexOf("RUM_EPISODES=")){for(var r,s,a=i[n].substring("RUM_EPISODES=".length).split("&"),u=0;u<a.length;u++)if(0===a[u].indexOf("s="))r=a[u].substring(2);else if(0===a[u].indexOf("r=")){var h=a[u].substring(2);h=h.replace(/;$/,""),s=t.escape(e.referrer)===h}if(s&&r)return o.dprint("RUM_EPISODES.findStartCookie: startTime = "+r),r}},o.beforeUnload=function(){o.bUnloaded||(e.cookie="RUM_EPISODES=s="+Number(new Date)+"&r="+t.escape(e.location)+"; path=/",o.bUnloaded=!0)},o.onload=function(){o.mark("onload"),o.done()},o.addEventListener=function(e,i,n){return void 0!==t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,n):void 0},o.dprint=function(){},o.init();var s=null,a={navigationStart:"ns",redirectStart:"rds",redirectEnd:"rde",unloadEventStart:"us",unloadEventEnd:"ue",fetchStart:"fs",domainLookupStart:"dls",domainLookupEnd:"dle",connectStart:"cs",secureConnectionStart:"scs",connectEnd:"ce",handshakeStart:"hs",requestStart:"rqs",responseStart:"rps",responseEnd:"rpe",domLoading:"dl",domInteractive:"di",domContentLoadedEventStart:"dcs",domContentLoadedEventEnd:"dce",domComplete:"dc",loadEventStart:"ls",loadEventEnd:"le"},u=t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance;u&&void 0!==u.timing&&void 0!==u.navigation?s=setInterval(function(){var e=t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance,i=e.timing,r=e.navigation;if(0===i.loadEventEnd)return!1;clearInterval(s),s=null;var o=i.navigationStart;0>=o&&(o=i.fetchStart);var u={};for(var h in a)u[a[h]]=-1,h in i&&(i[h]<=0||(u[a[h]]=i[h]-o));n({nty:r.type,rc:r.redirectCount,nt:u.rps-u.ns,dp:u.dce-u.rps,pr:u.le-u.dce,fe:u.le-u.rps,pl:u.le-u.ns})},100):(o.mark("firstbyte",r),s=setInterval(function(){if(!o||!o.bDone)return!1;clearInterval(s),s=!1;var t=o.getMeasures();if(null!=t&&null!=t.backend&&null!=t.frontend&&null!=t["page load time"]&&null!=t["total load time"]){var e=t.backend,i=t.backend+t.frontend;n({nty:0,rc:0,nt:e,dp:i-e,pr:t["total load time"]-i,fe:t["total load time"]-e,pl:t["total load time"]})}},100))}(window,document),atatus.__attachAjaxHooks=function(){!function(t,e){var i=atatus._helper,n={queue:[],batchSize:25,processing:!1,bUnloaded:!1,push:function(t){"string"==typeof t.url&&t.url.indexOf(".html")>0||(this.queue.push(t),this.queue.length>=this.batchSize&&this._processQueue())},_processQueue:function(){if(!this.processing&&this.queue.length){this.processing=!0;try{for(var t={},e={},n=0;n<this.queue.length;n++){var r,o=this.queue[n];if(o.status<400){r=o.method+o.url;var s=o.respAvailTime-o.sendTime,a=o.respProcTime-o.respAvailTime,u=o.receivedSize,h=o.sendSize,c=t[r];if(c){c.c++;var l=c.re;l.t=l.t+s,l.lo=l.lo<s?l.lo:s,l.hi=l.hi>s?l.hi:s,l.ssq=l.ssq+s*s;var f=c.cb;f.t=f.t+a,f.lo=f.lo<a?f.lo:a,f.hi=f.hi>a?f.hi:a,f.ssq=f.ssq+a*a;var p=c.rs;p.t=p.t+u,p.lo=p.lo<u?p.lo:u,p.hi=p.hi>u?p.hi:u,p.ssq=p.ssq+u*u;var d=c.ss;d.t=d.t+h,d.lo=d.lo<h?d.lo:h,d.hi=d.hi>h?d.hi:h,d.ssq=d.ssq+h*h}else t[r]={m:o.method,url:o.url,c:1,re:{t:s,lo:s,hi:s,ssq:s*s},cb:{t:a,lo:a,hi:a,ssq:a*a},rs:{t:o.receivedSize,lo:o.receivedSize,hi:o.receivedSize,ssq:o.receivedSize*o.receivedSize},ss:{t:o.sendSize,lo:o.sendSize,hi:o.sendSize,ssq:o.sendSize*o.sendSize}}}else e[r=o.method+o.status+o.url]?e[r].c++:e[r]={m:o.method,url:o.url,st:o.status,c:1}}var g={xhr:i.arrayFromObject(t),xhrError:i.arrayFromObject(e)};atatus.sendAjaxPerf(g)}catch(t){i.log("Error while processing queue: ",t)}finally{this.queue=[],this.processing=!1}}},beforeUnload:function(){n.bUnloaded||(n._processQueue(),n.bUnloaded=!0)}};i.addEventListener("beforeunload",n.beforeUnload,!1);var r={support:function(t){return!t||"apply"in t},around:function(t,e,n,r){return t=t||function(){},function(){var o,s,a=Array.prototype.slice.call(arguments);try{e&&(o=e.apply(this,a))}catch(t){i.log(r,t)}try{s=t.apply(this,o||a)}finally{try{n&&n.apply(this,a)}catch(t){i.log(r,t)}}return s}},before:function(t,e){return r.around(t,e)},after:function(t,e){return r.around(t,null,e)},timeout:function(t){setTimeout(t,0)},wrapAddEventListener:function(){return function(t,e){var i,n;if(("load"===t||"error"===t)&&e&&this._atrumXhrData)return e.__atrumInterceptor?i=e.__atrumInterceptor:r.support(e)?(i=s.wrapXHR(e,this,"XHR.invokeEventListener"),e.__atrumInterceptor=i):i=null,i&&((n=Array.prototype.slice.call(arguments))[1]=i),n}},wrapRemoveEventListener:function(){return function(t,e){if(this._atrumXhrData){var i=Array.prototype.slice.call(arguments);return e.__atrumInterceptor&&(i[1]=e.__atrumInterceptor),i}}},aroundWithHandleEvent:function(t,e,i,n){var o=t;return t&&"object"==typeof t&&"toString"in t&&"[xpconnect wrapped nsIDOMEventListener]"===t.toString()&&"handleEvent"in t&&(o=function(){t.handleEvent.apply(this,Array.prototype.slice.call(arguments))}),r.around(o,e,i,n)},getFullyQualifiedUrl:function(t){var i=e.createElement("a");return i.href=t,i.href}};if(t.XMLHttpRequest&&t.XMLHttpRequest.prototype){var o=t.XMLHttpRequest.prototype;if(!("open"in o&&"send"in o))return;if(!r.support(o.open)||!r.support(o.send))return;var s={captureAjaxTimings:function(t){var e=t._atrumXhrData;if(e){var i=(new Date).getTime();2===t.readyState?e.firstByteTime=e.firstByteTime||i:4===t.readyState&&(e.respAvailTime=e.respAvailTime||i,e.firstByteTime=e.firstByteTime||i)}},sendPayload:function(t,e){e.receivedSize=0,t.responseType&&"text"!==t.responseType||"string"==typeof t.responseText&&(e.receivedSize=t.responseText.length),e.status=t.status,n.push(e)},wrapXHR:function(t,e,i){return r.aroundWithHandleEvent(t,function(){s.captureAjaxTimings(this)},function(){var t=e._atrumXhrData;if(t&&4===e.readyState){var i=(new Date).getTime();t.respProcTime=t.respProcTime||i,s.sendPayload(e,t),delete e._atrumXhrData}},i)},ajaxDone:function(t){if(t._atrumXhrData){var e=(new Date).getTime()+3e4,i=function(){s.captureAjaxTimings(t);var n=t._atrumXhrData;if(n){var r=(new Date).getTime();4===t.readyState?(n.respProcTime=n.respProcTime||r,s.sendPayload(t,n),delete t._atrumXhrData):e>r?setTimeout(i,50):delete t._atrumXhrData}};i()}}};o.open=r.around(o.open,function(){var t=1<=arguments.length?String(arguments[0]):"",e=2<=arguments.length?String(arguments[1]):"",i=atatus.getAllowedDomains(),n=!0;if((e=r.getFullyQualifiedUrl(e))&&i&&i.length){n=!1;for(var o=0;o<i.length;o++){var s=i[o];if(s&&e.indexOf(s)>-1){n=!0;break}}}n&&(e=e&&e.split("?")[0],this._atrumXhrData={method:t,url:e,sendTime:null,sendSize:null,firstByteTime:null,respAvailTime:null,respProcTime:null,receivedSize:null,parentPhase:null})},null,"XHR.open"),o.send=r.around(o.send,function(){var t=this,e=t._atrumXhrData;if(e){var i=(new Date).getTime();e.sendTime=e.sendTime||i,e.sendSize=1<=arguments.length&&arguments[0]&&arguments[0].length||0;var n=0,o=function(){if(4===t.readyState)s.ajaxDone(t);else{var e=null;try{e=t.onreadystatechange}catch(e){return void s.ajaxDone(t)}n++,e?r.support(e)?t.onreadystatechange=s.wrapXHR(e,t,"XHR.onReadyStateChange"):s.ajaxDone(t):5>n?r.timeout(o):s.ajaxDone(t)}};o()}},null,"XHR.send"),"addEventListener"in o&&"removeEventListener"in o&&r.support(o.addEventListener)&&r.support(o.removeEventListener)&&(o.addEventListener=r.around(o.addEventListener,r.wrapAddEventListener(),null,"XHR.addEventListener"),o.removeEventListener=r.around(o.removeEventListener,r.wrapRemoveEventListener(),null,"XHR.removeEventListener"))}}(window,document)},function(t){function e(t,e,i){if(!(0>=e)){var n={name:t,dur:e,st:i};atatus.sendTxnPerf(n)}}function i(t){return o+" "+t}function n(){try{return"localStorage"in t&&null!==t.localStorage}catch(t){return!1}}function r(t){var e=null,n=i(t);try{e=localStorage.getItem(n),localStorage.removeItem(n)}catch(t){}var r=0;return e&&(r=s.now()-e),r}var o="atatus.com/",s=atatus._helper;atatus.beginTransaction=function(t){n()&&function(t){var e=s.now();try{localStorage.setItem(i(t),e)}catch(t){}}(t)},atatus.endTransaction=function(t){n()&&e(t,r(t),1)},atatus.failTransaction=function(t){n()&&e(t,r(t),0)},atatus.cancelTransaction=function(t){n()&&function(t){try{var e=i(t);localStorage.removeItem(e)}catch(t){}}(t)}}(window,document),function(t){"use strict";function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(t,i){var n=this.byteLength,r=e(t,n),o=n;if(void 0!==i&&(o=e(i,n)),r>o)return new ArrayBuffer(0);var s=o-r,a=new ArrayBuffer(s),u=new Uint8Array(a),h=new Uint8Array(this,r,s);return u.set(h),a})}(),function(t){function e(n){if(i[n])return i[n].i;var r=i[n]={s:n,o:!1,i:{}};return t[n].call(r.i,r,r.i,e),r.o=!0,r.i}var i={};e.h=t,e.c=i,e.d=function(t,i,n){e.u(t,i)||Object.defineProperty(t,i,{l:!1,p:!0,get:n})},e.n=function(t){var i=t&&t.g?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.u=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.v="",e(e.T=99)}([function(t,e,i){"use strict";var n,r=i(40),o=i(3);!function(t){function e(){return c.time()}var i=function(){return function(){}}();i.k="ws://127.0.0.1:8000/hive",t.L=i;var n=function(){return function(){}}();n.I="TimerScheduler",n.M="identityProvider",n._="NetworkComponent",n.F="rtcManager",n.U="transport",n.B="httpManager",n.H="httpRequest",n.R="logger",n.q="serverManager",n.G="servicesClient",t.V=n;var s=function(){function t(t){this.id=t,this.context=new r.D}return t.prototype.apply=function(t){t.apply(this.context)},t}();t.j=s,function(t){t[t.K=0]="HTTP",t[t.Y=1]="RTC",t[t.W=2]="UDP"}(t.J||(t.J={})),function(i){(t.Z||(t.Z={})).getId=function(){return"["+e()+"] ["+t.X().id+"]"}}();var a,u,h,c,l,f,p=new r.D,d=new o,g=!1;t.$=function(e){c&&console.log("Framework already initialized"),t.m(),u=new Date,e.apply(p),c=p.resolve(n.I),f=p.resolve(n.R),g=c.C()},t.ee=function(){(l=p.resolve(n._)).init()},t.te=function(){return l},t.system=function(){return p},t.logger=function(){return f},t.re=function(){return c},t.P=function(t){return d.get(t)},t.ie=function(t,e){var i=new s(t);return i.apply(e),d.set(t,i),i},t.ne=function(e){a=t.P(e)},t.resolve=function(t){return null!=a?a.context.resolve(t):(console.warn("undefined context"),null)},t.X=function(){return a},t.time=e,t.setTimeout=function(t,e){return c.setTimeout(t,e)},t.clearTimeout=function(t){return c.clearTimeout(t)},t.setInterval=function(t,e){return c.setInterval(t,e)},t.clearInterval=function(t){return c.clearInterval(t)},t.A=function(){c.A()},t.m=function(){c&&c.O(),p.N(),p=new r.D,d=new o,a=null,u=null,g=!1,h=null,c=null,l=null,f=null},t.se=function(t){h=t},t.random=function(){return h||(h=(new Date).getTime()),(h=(9301*h+49297)%233280)/233280},t.oe=function(){return u},t.C=function(){return g}}(n=e.Framework||(e.Framework={})),"undefined"!=typeof global&&(global.Framework=n)},function(t,e,i){"use strict";var n=i(106),r=i(20),o=i(6),s=o.he.ae,a=(o.he.ce,o.he.ue),u=o.he.le,h=function(){function t(e){var i=this;if(this.isActive=!1,this.pe="undefined"!=typeof atatus&&null!=atatus,this.de={},t.fe)throw new Error("Error: Instantiation failed: Use AtatusLogger.getInstance() instead of new.");var n,o=null!=r.HiveConfig.ErrorMonitor.key?r.HiveConfig.ErrorMonitor.key:s,h=1==r.HiveConfig.ErrorMonitor.enabledRUM,c=1==r.HiveConfig.ErrorMonitor.enableKeyCombination,l=1==r.HiveConfig.ErrorMonitor.enabledErrorFilter;l&&(n=this.ge()),this.version=e,this.pe&&(null==r.HiveConfig.ErrorMonitor.enabled&&a||null!=r.HiveConfig.ErrorMonitor.enabled&&1==r.HiveConfig.ErrorMonitor.enabled)&&(atatus.config(o,{enableSourcemap:!0,disableRUM:!h,console:!1,version:e,beforeErrorSend:function(t){var e=!1;for(var r in t&&t.customData&&void 0!==t.customData.forceSend&&(e=t.customData.forceSend,delete t.customData.forceSend,0===Object.keys(t.customData).length&&(t.customData=null)),i.de)t.customData[r]=i.de[r];if(!l||e)return!0;if(!n)return!1;try{var o=!1;if(t.backTraces){for(var s=0,a=t.backTraces;s<a.length;s++){var h=a[s];if(h.f.indexOf(n)>-1&&h.ln>u){o=!0;break}}o&&(t.name=t.name.replace(/%s \[[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]+] /,""),t.name.indexOf("Status Code Error:")>=0&&(t.tags=["Plugin Error Code",t.name.split(":")[1].trim()]))}return o}catch(t){return!1}}}).install(),c&&this.Ee(),this.isActive=!0,window.console&&console.log("[HiveComm] Error Monitor installed [RUM:"+h+", KeyHandler:"+c+"]"),l&&!n&&this.logError("Could not extract error filter"))}return t.ve=function(e){return void 0===e&&(e="3.0.0"),void 0===this.fe&&(this.fe=new t(e)),this.fe},t.prototype.Ee=function(){n.Te.ve().ye([16,17,88],function(){try{throw new Error("Upload console logs")}catch(t){atatus.notify(t),window.console&&console.log("[HiveComm] console log uploaded for debugging")}})},t.prototype.ge=function(){try{throw new Error("test")}catch(e){var t=e.stack.match(/(\/\/.*\.js)/i);if(t&&t.length>0)return t[0]}},t.prototype.setUser=function(t){this.pe&&this.isActive&&atatus.setUser(t)},t.prototype.me=function(t){this.logger=t},t.prototype.setCustomData=function(t){this.pe&&this.isActive&&atatus.setCustomData(t)},t.prototype.Ie=function(t){for(var e in t)this.de[e]=t[e]},t.prototype.logError=function(t,e,i,n,r){var o="";if("string"==typeof e?o=e.trim():void 0!==e&&(n=e),(n instanceof Error||n&&"object"!=typeof n)&&(n={error:n.toString()}),n||(n={}),n.errorCode=i,this.logger&&(Object.keys(n).length>0?this.logger.warn(o+" "+t,n):this.logger.warn(o+" "+t)),o&&(r=r?r.concat([o]):[o]),n.forceSend=!0,this.pe&&this.isActive)try{throw new Error(t)}catch(t){atatus.notify(t,n,r)}},t.prototype.setTags=function(t){this.pe&&this.isActive&&atatus.setTags(t)},t.prototype.notify=function(t,e){this.pe&&this.isActive&&(e||(e={}),e.forceSend=!0,atatus.notify(t,e))},t}();e.ErrorMonitor=h},function(t,e,i){"use strict";!function(t){!function(t){t[t.Se=268435456]="BASE_CODE",t[t.Re=268435457]="FIRE_SERVER_CONNECTED_WITH_SWARM",t[t.we=268435458]="FIRE_SERVER_CONNECTED_WITHOUT_SWARM",t[t.be=268435459]="CONNECTION_NOT_ESTABLISHED",t[t.Ce=268435460]="SEND_MESSAGE_TO_NON_EXISTING_CHANNEL",t[t._e=268435461]="RECEIVED_MESSAGE_FROM_NON_EXISTING_CONNECTION"}(t.Pe||(t.Pe={})),function(t){t[t.Se=536870912]="BASE_CODE",t[t.Ae=536870913]="CREATE_OFFER",t[t.Oe=536870914]="CREATE_ANSWER",t[t.Ne=536870915]="SIGNALING_STATE_CLOSED",t[t.De=536870916]="SET_LOCAL_DESCRIPTION_FAILED",t[t.ke=536870917]="NEGOTIATION_FAILURE",t[t.Le=536870918]="SETUP_CHANNEL_ERROR",t[t.Me=536870919]="ICE_CONNECTION_FAILED",t[t.Fe=536870920]="SET_REMOTE_DESCRIPTION",t[t.Ue=536870921]="UPDATE_ICE_CANDIDATES",t[t.Be=536870922]="ANSWER_RECEIVED",t[t.He=536870923]="OFFER_RECEIVED",t[t.xe=536870924]="SEND_CANDIDATES",t[t.qe=536870925]="CLOSE_CONNECTION"}(t.Ge||(t.Ge={})),function(t){t[t.Se=805306368]="BASE_CODE",t[t.Ve=805306369]="SEND_MSG_WITHOUT_CHANNEL",t[t.je=805306370]="MSG_TRIGGER_ERROR",t[t.Qe=805306371]="CONNECTION_TIMEOUT"}(t.Ke||(t.Ke={})),function(t){t[t.Se=1073741824]="BASE_CODE",t[t.qe=1073741825]="CLOSE_CONNECTION",t[t.Ye=1073741826]="P2P_DISPATCHER_ERROR"}(t.We||(t.We={})),function(t){t[t.Se=1342177280]="BASE_CODE",t[t.ze=1342177281]="CONSTRUCT_MESSAGE",t[t.Je=1342177282]="DROPPED_MESSAGE",t[t.Xe=1342177283]="SEND_MESSAGE",t[t.Ze=1342177284]="RECEIVE_MESSAGE"}(t.$e||(t.$e={})),function(t){t[t.Se=1610612736]="BASE_CODE",t[t.et=1610612737]="NEW_DISPATCHER"}(t.tt||(t.tt={})),function(t){t[t.Se=1879048192]="BASE_CODE",t[t.rt=1879048193]="INIT_CACHE",t[t.it=1879048194]="PUT_OPERATION",t[t.nt=1879048195]="GET_OPERATION",t[t.st=1879048196]="CONTAINS_OPERATION",t[t.ot=1879048197]="GET_KEYS_OPERATION",t[t.at=1879048198]="GET_ELEMENTS_OPERATION"}(t.ht||(t.ht={})),function(t){t[t.Se=2147483648]="BASE_CODE",t[t.it=2147483649]="PUT_OPERATION",t[t.nt=2147483650]="GET_OPERATION",t[t.st=2147483651]="CONTAINS_OPERATION",t[t.ot=2147483652]="GET_KEYS_OPERATION",t[t.at=2147483653]="GET_ELEMENTS_OPERATION",t[t.ct=2147483654]="PURGE_CACHE_OPERATION"}(t.ut||(t.ut={})),function(t){t[t.Se=2415919104]="BASE_CODE"}(t.lt||(t.lt={})),function(t){t[t.Se=2684354560]="BASE_CODE",t[t.pt=2684354561]="DISCOVERED_PEERS",t[t.dt=2684354562]="LEADER_ELECTION",t[t.ft=2684354563]="GC_MEMBERS",t[t.gt=2684354564]="ADD_LAN_MEMBER",t[t.Et=2684354565]="ADD_RANDOM_MEMBER",t[t.vt=2684354566]="SAMPLE_MEMBERSHIP"}(t.yt||(t.yt={})),function(t){t[t.Se=2952790016]="BASE_CODE",t[t.Tt=2952790017]="SEND_ALL_HAVES",t[t.It=2952790018]="SEND_HAVE",t[t.St=2952790019]="UNKNOWN_HAVE",t[t.Rt=2952790020]="UNKNOWN_HAVES",t[t.wt=2952790021]="RECEIVED_HAVE",t[t.bt=2952790022]="RECEIVED_HAVES",t[t.Ct=2952790023]="NO_OUT_PARTNER",t[t._t=2952790024]="CREATE_RANDOM_BUFFER",t[t.Pt=2952790025]="REQUEST_PING",t[t.At=2952790026]="RECEIVED_PING",t[t.Ot=2952790027]="UNKNOWN_PING",t[t.Nt=2952790028]="SEND_PONG",t[t.Dt=2952790029]="UNKOWN_PONG",t[t.kt=2952790030]="WRONG_PONG_SIZE",t[t.Lt=2952790031]="WRONG_TIMESTAMP",t[t.Mt=2952790032]="RECEIVED_PONG",t[t.Ft=2952790033]="COLLECT_PARTNER_SNAPSHOTS"}(t.Ut||(t.Ut={})),function(t){t[t.Se=3221225472]="BASE_CODE",t[t.Bt=3221225473]="START_PARTNERSHIP",t[t.Ht=3221225474]="NEW_LAN_MEMBER",t[t.xt=3221225475]="IN_PARTNER_CHOICE",t[t.qt=3221225476]="IN_PARTNER_ADD_PROCESS",t[t.Gt=3221225477]="IN_PARTNER_CONNECT",t[t.Vt=3221225478]="IN_PARTNERSHIP_REQUEST",t[t.jt=3221225479]="OUT_PARNTERSHIP_REQUEST_PROCESS",t[t.Qt=3221225480]="CONSTRUCT_DISCOVER_PEER_INFO",t[t.Kt=3221225481]="SEND_PARTN_RESP",t[t.Yt=3221225482]="NEW_IN_PARTNER_TO_LIST",t[t.Wt=3221225483]="REMOVE_DISCONNECTED_PEER",t[t.zt=3221225484]="REMOVE_IN_PARTNER",t[t.Jt=3221225485]="CLOSE_RECEIVED",t[t.Xt=3221225486]="SEND_PART_REQUEST",t[t.Zt=3221225487]="PART_REQUEST_EXPIRED",t[t.$t=3221225488]="UNKNOWN_PARTNERSHIP_REQUEST_EXPIRED",t[t.er=3221225489]="UNKNOWN_OUT_PART_RESP",t[t.tr=3221225490]="CLOSE_PARTNERSHIP",t[t.rr=3221225491]="ANNOUNCE_BITRATE",t[t.ir=3221225492]="CONSTRUCT_ANNOUNCE_BITRATE_MSG",t[t.nr=3221225493]="RECEIVE_BITRATE_INFO",t[t.sr=3221225494]="PEER_INFO_RECEIVED",t[t.ar=3221225495]="PEER_INFO_ANNOUNCED",t[t.hr=3221225496]="COLLECT_ALL_PARTNERS"}(t.cr||(t.cr={})),function(t){t[t.Se=3489660928]="BASE_CODE",t[t.ur=3489660929]="UPDATE_IN_PARTNERS"}(t.lr||(t.lr={})),function(t){t[t.Se=3758096384]="BASE_CODE",t[t.pr=3758096385]="SELECT_PARTNERS_TO_REMOVE",t[t.dr=3758096386]="SELECT_PARTNERS_TO_ADD",t[t.gr=3758096387]="SELECT_UPDATE_OUT"}(t.Er||(t.Er={})),function(t){t[t.Se=4026531840]="BASE_CODE",t[t.pr=4026531841]="SELECT_PARTNERS_TO_REMOVE",t[t.dr=4026531842]="SELECT_PARTNERS_TO_ADD",t[t.gr=4026531843]="SELECT_UPDATE_OUT"}(t.vr||(t.vr={})),function(t){t[t.Se=4294967296]="BASE_CODE",t[t.ur=4294967297]="UPDATE_IN_PARTNERS",t[t.pr=4294967298]="SELECT_PARTNERS_TO_REMOVE",t[t.dr=4294967299]="SELECT_PARTNERS_TO_ADD",t[t.gr=4294967300]="SELECT_UPDATE_OUT",t[t.yr=4294967301]="GROUP_PARTNERS",t[t.Tr=4294967302]="IDENTIFY_MEMBER_AS_LEADER_OR_SAME_SITE",t[t.mr=4294967303]="AHEAD_BUT_BEHIND_DELTA",t[t.Ir=4294967304]="BEHIND_OR_NOT_RETRIEVING_BITRATE",t[t.Sr=4294967305]="GET_DELTA_FOR_BITRATE"}(t.Rr||(t.Rr={})),function(t){t[t.Se=4563402752]="BASE_CODE",t[t.wr=4563402753]="UPDATE_OUT_PARTNERS"}(t.br||(t.br={})),function(t){t[t.Se=4831838208]="BASE_CODE",t[t.Cr=4831838209]="ADD_FRAGMENT_TO_MAP",t[t.Pr=4831838210]="WRAP_CHUNK",t[t.Ar=4831838211]="GENERATE_HASHMAPS"}(t.Or||(t.Or={})),function(t){t[t.Se=5100273664]="BASE_CODE",t[t.Nr=5100273665]="INIT_AES_MANAGER",t[t.Dr=5100273666]="INIT_KEY",t[t.kr=5100273667]="INIT_IV",t[t.Lr=5100273668]="DECRYPT_BUFFER",t[t.Mr=5100273669]="DOWNLOAD_KEY_ONLOAD",t[t.Fr=5100273670]="DOWNLOAD_KEY"}(t.Ur||(t.Ur={})),function(t){t[t.Se=5368709120]="BASE_CODE",t[t.Br=5368709121]="GET_ENTITY_TYPE",t[t.Hr=5368709122]="GET_ENTITY_CHARACTERISTICS",t[t.xr=5368709123]="GET_NEXT_ENTITY",t[t.qr=5368709124]="IS_CURRENT_CONTEXT",t[t.Gr=5368709125]="PARSED_METADATA",t[t.Vr=5368709126]="PREFETCH_METADATA_RECEIVED",t[t.jr=5368709127]="FRAGMENT_RECEIVED",t[t.Qr=5368709128]="EVALUATE_PROTECTION",t[t.Kr=5368709129]="GET_DISTANCE_DURATION"}(t.Yr||(t.Yr={})),function(t){t[t.Se=5637144576]="BASE_CODE",t[t.Wr=5637144577]="PARSE_METADATA",t[t.zr=5637144578]="EXTRACT_SEGMENT_MAPS",t[t.Jr=5637144579]="INIT_PROTECTION",t[t.Xr=5637144580]="GET_SEGMENT_INFO",t[t.Zr=5637144581]="GET_SEGMENT_DISTANCE",t[t.$r=5637144582]="EXTRACT_DURATION",t[t.ei=5637144583]="EXTRACT_DURATION_OR_DECRYPT",t[t.ti=5637144584]="EXTRACT_DURATION_CANNOT_DECRYPT",t[t.ri=5637144585]="EXTRACT_DURATION_NON_ENCRYPTED",t[t.ii=5637144586]="GENERATE_MISSING_SEGMENTS",t[t.ni=5637144587]="REGENERATE_MANIFEST",t[t.si=5637144588]="TRIM_MANIFEST",t[t.oi=5637144589]="PARSE_BITRATES_TO_FILTER",t[t.ai=5637144590]="FILTER_BITRATES",t[t.hi=5637144591]="GET_DISTANCE_DURATION_BETWEEN_SEGMENTS",t[t.ci=5637144592]="GET_SEGMENT"}(t.ui||(t.ui={})),function(t){t[t.Se=5905580032]="BASE_CODE",t[t.qr=5905580033]="IS_CURRENT_CONTEXT",t[t.Br=5905580034]="GET_ENTITY_TYPE",t[t.Hr=5905580035]="GET_ENTITY_CHARACTERISTICS",t[t.li=5905580036]="METADATA_RECEIVED",t[t.pi=5905580037]="SCHEDULE_METADATA_PREFETCH",t[t.xr=5905580038]="GET_NEXT_ENTITY",t[t.Kr=5905580039]="GET_DISTANCE_DURATION"}(t.di||(t.di={})),function(t){t[t.Se=6174015488]="BASE_CODE",t[t.fi=6174015489]="PLAYLIST_MISMATCH",t[t.gi=6174015490]="FLOAT_BITRATE",t[t.Wr=6174015491]="PARSE_METADATA",t[t.Xr=6174015492]="GET_SEGMENT_INFO",t[t.Ei=6174015493]="UPDATE_PLAYLIST",t[t.vi=6174015494]="TRIM_PLAYLIST"}(t.yi||(t.yi={})),function(t){t[t.Se=6442450944]="BASE_CODE",t[t.Ti=6442450945]="GET_P2P_TIMEOUT",t[t.mi=6442450946]="DELIVER_DELAY"}(t.Ii||(t.Ii={})),function(t){t[t.Se=6710886400]="BASE_CODE",t[t.Si=6710886401]="IS_PLAYER_BUFFERING_BASE",t[t.Ri=6710886402]="CONFIGURE_REQUEST_DIRECTIVE",t[t.wi=6710886403]="ATTEMPT_TO_UPGRADE_PREFETCH"}(t.bi||(t.bi={})),function(t){t[t.Se=6979321856]="BASE_CODE",t[t.Ci=6979321857]="PREPARE_REQUEST",t[t._i=6979321858]="GET_CONNECTIVITY_INFO",t[t.Pi=6979321859]="COLLECT_TRACKER_REQUEST_INFO",t[t.Ai=6979321860]="PREPARE_QUERY",t[t.Oi=6979321861]="PREPARE_BITRATE_QUERY",t[t.Ni=6979321862]="PREPARE_TRACKER_INFO",t[t.Di=6979321863]="SEND_REQUEST",t[t.ki=6979321864]="HANDLE_RESPONSE"}(t.Li||(t.Li={})),function(t){t[t.Se=7247757312]="BASE_CODE",t[t.Mi=7247757313]="NEW_TRACKER_CLIENT",t[t.Fi=7247757314]="SERIALIZE_REQUEST",t[t.Ui=7247757315]="DESERIALIZE_RESPONSE",t[t.Bi=7247757316]="SERVICE_CONNECTION_DOWN",t[t.Di=7247757317]="SEND_REQUEST",t[t.Hi=7247757318]="TRACKER_MANAGER_INIT"}(t.xi||(t.xi={})),function(t){t[t.Se=7516192768]="BASE_CODE",t[t.qi=7516192769]="SORT_PARTNERS"}(t.Gi||(t.Gi={})),function(t){t[t.Se=7784628224]="BASE_CODE",t[t.Vi=7784628225]="CHOOSE_PARTNER"}(t.ji||(t.ji={})),function(t){t[t.Se=8053063680]="BASE_CODE",t[t.Qi=8053063681]="CONSTRUCT_FRAGMENT_REQUEST_MESSAGE",t[t.Ki=8053063682]="SEND_FRAGMENT_REQUEST",t[t.Yi=8053063683]="RECEIVE_CHUNK",t[t.Wi=8053063684]="SEND_ACK",t[t.zi=8053063685]="CLEAN_UP_NOT_PENDING",t[t.Ji=8053063686]="STOP_TRANSFER",t[t.Xi=8053063687]="RECEIVE_EXPIRED_CHUNK"}(t.Zi||(t.Zi={})),function(t){t[t.Se=8321499136]="BASE_CODE",t[t.$i=8321499137]="CONSTRUCT_CHUNK_RESPONSE",t[t.en=8321499138]="START_SENDING_CHUNK",t[t.tn=8321499139]="SEND_CHUNK",t[t.rn=8321499140]="UNKNOWN_ACK"}(t.in||(t.in={})),function(t){t[t.Se=8589934592]="BASE_CODE",t[t.nn=8589934593]="NO_PARTNER_FOUND",t[t.sn=8589934594]="FILTER_IN_PARTNERS",t[t.an=8589934595]="SET_REQUEST_TIMEOUT",t[t.hn=8589934596]="REMOVE_REQUEST",t[t.cn=8589934597]="CANCEL_ON_NON_EXISTING_SESSION",t[t.un=8589934598]="DO_NOT_HAVE",t[t.pn=8589934599]="REQUESTED_TO_NON_PARTNER"}(t.dn||(t.dn={})),function(t){t[t.Se=8858370048]="BASE_CODE",t[t.fn=8858370049]="RESPOND_TO_PEER",t[t.gn=8858370050]="REQUEST_SATISFIED",t[t.En=8858370051]="REQUEST_PARTIALLY_SATISFIED",t[t.vn=8858370052]="REQUEST_NOT_SATISFIED",t[t.yn=8858370053]="SEND_DO_NOT_HAVE",t[t.Tn=8858370054]="SEND_NO_PARTNERS"}(t.mn||(t.mn={})),function(t){t[t.Se=9126805504]="BASE_CODE",t[t.In=9126805505]="VIOLATE_SPOOFING_HANDLER",t[t.Sn=9126805506]="VIOLATE_SPOOFING_RULES",t[t.Rn=9126805507]="ADD_OR_UPDATE_SPOOFING_MAPS",t[t.wn=9126805508]="PERIODIC_CHECK_IP_SPOOFING"}(t.bn||(t.bn={})),function(t){t[t.Se=9395240960]="BASE_CODE",t[t.Cn=9395240961]="REQUEST_COMPLETED",t[t._n=9395240962]="REQUEST_NOT_EXISTING_COMPLETED",t[t.Pn=9395240963]="REQUEST_PARTIALLY_FAILED",t[t.An=9395240964]="REQUEST_NOT_EXISTING_PARTIALLY_FAILED",t[t.On=9395240965]="REQUEST_FAILED",t[t.Nn=9395240966]="REQUEST_NOT_EXISTING_FAILED"}(t.Dn||(t.Dn={})),function(t){t[t.Se=9663676416]="BASE_CODE",t[t.kn=9663676417]="UPDATE_WANTED_SESSIONS",t[t.Ln=9663676418]="CONFIGURE_PREFETCHING",t[t.Mn=9663676419]="START_PREFETCHING",t[t.Fn=9663676420]="FRAGMENT_RETRIEVED_SESSION_NOT_EXISTING",t[t.Un=9663676421]="ATTEMPT_PREFETCH_BEFORE_PLAYER_REQUEST",t[t.Bn=9663676422]="FORWARD_IF_NECESSARY",t[t.Hn=9663676423]="IS_ALLOWED_TO_PREFETCH",t[t.xn=9663676424]="PREFETCH_PROCESS",t[t.qn=9663676425]="CHECK_PLAYER_DISTANCE",t[t.Gn=9663676426]="OFFLOAD_LEADER",t[t.Vn=9663676427]="UPGRADE_PREFETCH"}(t.jn||(t.jn={})),function(t){t[t.Se=9932111872]="BASE_CODE",t[t.Qn=9932111873]="REQUEST_TIMEOUT"}(t.Kn||(t.Kn={})),function(t){t[t.Se=10200547328]="BASE_CODE",t[t.Yn=10200547329]="PLAYER_REQUEST_ERROR"}(t.Wn||(t.Wn={})),function(t){t[t.Se=10468982784]="BASE_CODE",t[t.zn=10468982785]="ADD_HAVE",t[t.Jn=10468982786]="REMOVE_PEER"}(t.Xn||(t.Xn={})),function(t){t[t.Se=10737418240]="BASE_CODE",t[t.Zn=10737418241]="CONSTRUCT_SWARM",t[t.$n=10737418242]="INIT_SWARM",t[t.es=10737418243]="SWITCH_STATE",t[t.Qn=10737418244]="REQUEST_TIMEOUT"}(t.rs||(t.rs={})),function(t){t[t.Se=11005853696]="BASE_CODE",t[t.ns=11005853697]="SERIALIZE_MESSAGE",t[t.ss=11005853698]="EXTRACT_MESSAGE"}(t.as||(t.as={}))}(e.hs||(e.hs={}))},function(t,e,i){"use strict";function n(t,e,i,o){if(!(this instanceof n))return new n(t,e,i,o);e=e||Object.cs,i=i||Object.hash,o=o||Function.us,this.ls=e,this.ps=i,this.ds=o,this.fs=new r(void 0,function(t,i){return e(t.key,i.key)},function(t){return i(t.key)}),this.length=0,this.addEach(t)}var r=(i(11),i(68)),o=i(12),s=i(52),a=i(13);t.i=n,n.Map=n,Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),Object.defineProperty(n.prototype,"size",o.gs),n.prototype.Es=function(t){return new this.constructor(t,this.ls,this.ps,this.ds)},n.prototype.log=function(t,e,i,n){e=e||this.vs,this.fs.log(t,function(t,i,n){e(t.value.value,i,n)},i,n)},n.prototype.vs=function(t,e){e(" key: "+t.key),e(" value: "+t.value)}},function(t,e,i){
/*!
 *
 * Copyright 2009-2016 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e){"use strict";"function"==typeof bootstrap?bootstrap("promise",e):t.i=e()}(function(){"use strict";function t(t){return function(){return k.apply(t,arguments)}}function e(t,e){if(I&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(B)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+B+"\n");t.stack=i(o)}}function i(t){for(var e=t.split("\n"),i=[],r=0;r<e.length;++r){var s=e[r];o(s)||n(s)||!s||i.push(s)}return i.join("\n")}function n(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function r(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var i=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(i)return[i[1],Number(i[2])];var n=/.*@(.+):(\d+)$/.exec(t);return n?[n[1],Number(n[2])]:void 0}function o(t){var e=r(t);if(!e)return!1;var i=e[0],n=e[1];return i===_&&n>=A&&n<=q}function s(){if(I)try{throw new Error}catch(i){var t=i.stack.split("\n"),e=r(t[0].indexOf("@")>0?t[1]:t[2]);if(!e)return;return _=e[0],e[1]}}function a(t){return t instanceof l?t:g(t)?function(t){var e=u();return a.Ts(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.Ss}(t):m(t)}function u(){function t(t){e=t,a.ys&&I&&(o.source=t),P(i,function(e,i){a.Ts(function(){t.ms.apply(t,i)})},void 0),i=void 0,n=void 0}var e,i=[],n=[],r=x(u.prototype),o=x(l.prototype);if(o.ms=function(t,r,o){var s=N(arguments);i?(i.push(s),"when"===r&&o[1]&&n.push(o[1])):a.Ts(function(){e.ms.apply(e,s)})},o.valueOf=function(){if(i)return o;var t=p(e);return d(t)&&(e=t),t},o.Is=function(){return e?e.Is():{state:"pending"}},a.ys&&I)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return r.Ss=o,r.resolve=function(i){e||t(a(i))},r.Rs=function(i){e||t(m(i))},r.reject=function(i){e||t(y(i))},r.notify=function(t){e||P(n,function(e,i){a.Ts(function(){i(t)})},void 0)},r}function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=u();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.Ss}function c(t){return h(function(e,i){for(var n=0,r=t.length;n<r;n++)a(t[n]).then(e,i)})}function l(t,e,i){void 0===e&&(e=function(t){return y(new Error("Promise does not support operation: "+t))}),void 0===i&&(i=function(){return{state:"unknown"}});var n=x(l.prototype);if(n.ms=function(i,r,o){var s;try{s=t[r]?t[r].apply(n,o):e.call(n,r,o)}catch(t){s=y(t)}i&&i(s)},n.Is=i,i){var r=i();"rejected"===r.state&&(n.exception=r.reason),n.valueOf=function(){var t=i();return"pending"===t.state||"rejected"===t.state?n:t.value}}return n}function f(t,e,i,n){return a(t).then(e,i,n)}function p(t){if(d(t)){var e=t.Is();if("fulfilled"===e.state)return e.value}return t}function d(t){return t instanceof l}function g(t){return function(t){return t===Object(t)}(t)&&"function"==typeof t.then}function v(){H.length=0,j.length=0,G||(G=!0)}function y(t){var e=l({when:function(e){return e&&function(t){if(G){var e=D(j,t);-1!==e&&("object"==typeof process&&process&&"function"==typeof process.ws&&a.Ts.bs(function(){var i=D(V,t);-1!==i&&(process.ws("rejectionHandled",H[e],t),V.splice(i,1))}),j.splice(e,1),H.splice(e,1))}}(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return function(t,e){G&&("object"==typeof process&&process&&"function"==typeof process.ws&&a.Ts.bs(function(){-1!==D(j,t)&&(process.ws("unhandledRejection",e,t),V.push(t))}),j.push(t),e&&void 0!==e.stack?H.push(e.stack):H.push("(no stack) "+e))}(e,t),e}function m(t){return l({when:function(){return t},get:function(e){return t[e]},set:function(e,i){t[e]=i},delete:function(e){delete t[e]},Cs:function(e,i){return null==e?t.apply(void 0,i):t[e].apply(t,i)},apply:function(e,i){return t.apply(e,i)},keys:function(){return U(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function E(t,e,i){return a(t).Ps(e,i)}function b(t,e,i){return a(t).As(e,i)}function w(t){return f(t,function(t){var e=0,i=u();return P(t,function(n,r,o){var s;d(r)&&"fulfilled"===(s=r.Is()).state?t[o]=s.value:(++e,f(r,function(n){t[o]=n,0==--e&&i.resolve(t)},i.reject,function(t){i.notify({index:o,value:t})}))},void 0),0===e&&i.resolve(t),i.Ss})}function T(t){if(0===t.length)return a.resolve();var e=a.defer(),i=0;return P(t,function(n,r,o){var s=t[o];i++,f(s,function(t){e.resolve(t)},function(t){0==--i&&(t.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+t.message,e.reject(t))},function(t){e.notify({index:o,value:t})})},void 0),e.Ss}function S(t){return f(t,function(t){return t=L(t,a),f(w(L(t,function(t){return f(t,O,O)})),function(){return t})})}var I=!1;try{throw new Error}catch(t){I=!!t.stack}var _,R,A=s(),O=function(){},C=function(){function t(){for(var t,n;i.next;)t=(i=i.next).Ds,i.Ds=void 0,(n=i.domain)&&(i.domain=void 0,n.ks()),e(t,n);for(;u.length;)e(t=u.pop());r=!1}function e(e,i){try{e()}catch(e){if(s)throw i&&i.Ls(),setTimeout(t,0),i&&i.ks(),e;setTimeout(function(){throw e},0)}i&&i.Ls()}var i={Ds:void 0,next:null},n=i,r=!1,o=void 0,s=!1,a=!1;try{a=navigator&&("Microsoft Internet Explorer"===navigator.appName||null!=navigator.appVersion.match(/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i))}catch(t){}var u=[];if(C=function(t){"undefined"!=typeof Framework&&Framework.C()?Framework.setTimeout(t,0):(n=n.next={Ds:t,domain:s&&process.domain,next:null},r||(r=!0,o()))},"object"==typeof process&&process&&"[object process]"===process.toString()&&process.Ts)s=!0,o=function(){process.Ts(t)};else if("function"!=typeof setImmediate||a)if("undefined"==typeof MessageChannel||a)o=function(){setTimeout(t,0)};else{var h=new MessageChannel;h.port1.onmessage=function(){o=c,h.port1.onmessage=t,t()};var c=function(){h.port2.postMessage(0)};o=function(){setTimeout(t,0),c()}}else o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};return C.bs=function(t){u.push(t),r||(r=!0,o())},C}(),k=Function.call,N=t(Array.prototype.slice),P=t(Array.prototype.reduce||function(t,e){var i=0,n=this.length;if(1===arguments.length)for(;;){if(i in this){e=this[i++];break}if(++i>=n)throw new TypeError}for(;i<n;i++)i in this&&(e=t(e,this[i],i));return e}),D=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),L=t(Array.prototype.map||function(t,e){var i=this,n=[];return P(i,function(r,o,s){n.push(t.call(e,o,s,i))},void 0),n}),x=Object.create||function(t){function e(){}return e.prototype=t,new e},M=t(Object.prototype.hasOwnProperty),U=Object.keys||function(t){var e=[];for(var i in t)M(t,i)&&e.push(i);return e},F=t(Object.prototype.toString);R="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var B="From previous event:";a.resolve=a,a.Ts=C,a.ys=!1,"object"==typeof process&&process&&process.Ms&&process.Ms.Fs&&(a.ys=!0),a.defer=u,u.prototype.Us=function(){var t=this;return function(e,i){e?t.reject(e):arguments.length>2?t.resolve(N(arguments,1)):t.resolve(i)}},a.Promise=h,a.Ss=h,h.race=c,h.all=w,h.reject=y,h.resolve=a,a.Bs=function(t){return t},l.prototype.Bs=function(){return this},a.join=function(t,e){return a(t).join(e)},l.prototype.join=function(t){return a([this,t]).Ps(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},a.race=c,l.prototype.race=function(){return this.then(a.race)},a.Hs=l,l.prototype.toString=function(){return"[object Promise]"},l.prototype.then=function(t,i,n){function r(e){try{return"function"==typeof t?t(e):e}catch(t){return y(t)}}function o(t){return"function"==typeof n?n(t):t}var s=this,h=u(),c=!1;return a.Ts(function(){s.ms(function(t){c||(c=!0,h.resolve(r(t)))},"when",[function(t){c||(c=!0,h.resolve(function(t){if("function"==typeof i){e(t,s);try{return i(t)}catch(t){return y(t)}}return y(t)}(t)))}])}),s.ms(void 0,"when",[void 0,function(t){var e,i=!1;try{e=o(t)}catch(t){if(i=!0,!a.onerror)throw t;a.onerror(t)}i||h.notify(e)}]),h.Ss},a.xs=function(t,e){return a(t).xs(e)},l.prototype.xs=function(t){return t=a(t),this.then(function(e){return t.Gs(e).qs(e)})},a.when=f,l.prototype.qs=function(t){return this.then(function(){return t})},a.qs=function(t,e){return a(t).qs(e)},l.prototype.Vs=function(t){return this.then(function(){throw t})},a.Vs=function(t,e){return a(t).Vs(e)},a.js=p,a.Qs=d,a.Ks=g,a.Ys=function(t){return d(t)&&"pending"===t.Is().state},l.prototype.Ys=function(){return"pending"===this.Is().state},a.Ws=function(t){return!d(t)||"fulfilled"===t.Is().state},l.prototype.Ws=function(){return"fulfilled"===this.Is().state},a.zs=function(t){return d(t)&&"rejected"===t.Is().state},l.prototype.zs=function(){return"rejected"===this.Is().state};var H=[],j=[],V=[],G=!0;a.Js=v,a.Xs=function(){return H.slice()},a.Zs=function(){v(),G=!1},v(),a.reject=y,a.Rs=m,a.$s=function(t){return l({_s:function(){}},function(e,i){return b(t,e,i)},function(){return a(t).Is()})},a.Ps=E,l.prototype.Ps=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},a.async=function(t){return function(){function e(t,e){var o;if("undefined"==typeof StopIteration){try{o=i[t](e)}catch(t){return y(t)}return o.done?a(o.value):f(o.value,n,r)}try{o=i[t](e)}catch(t){return function(t){return"[object StopIteration]"===F(t)||t instanceof R}(t)?a(t.value):y(t)}return f(o,n,r)}var i=t.apply(this,arguments),n=e.bind(e,"next"),r=e.bind(e,"throw");return n()}},a.eo=function(t){a.done(a.async(t)())},a.to=function(t){throw new R(t)},a.ro=function(t){return function(){return E([this,w(arguments)],function(e,i){return t.apply(e,i)})}},a.As=b,l.prototype.As=function(t,e){var i=this,n=u();return a.Ts(function(){i.ms(n.resolve,t,e)}),n.Ss},a.get=function(t,e){return a(t).As("get",[e])},l.prototype.get=function(t){return this.As("get",[t])},a.set=function(t,e,i){return a(t).As("set",[e,i])},l.prototype.set=function(t,e){return this.As("set",[t,e])},a.io=a.delete=function(t,e){return a(t).As("delete",[e])},l.prototype.io=l.prototype.delete=function(t){return this.As("delete",[t])},a.no=a.Cs=function(t,e,i){return a(t).As("post",[e,i])},l.prototype.no=l.prototype.Cs=function(t,e){return this.As("post",[t,e])},a.send=a.so=a.oo=function(t,e){return a(t).As("post",[e,N(arguments,2)])},l.prototype.send=l.prototype.so=l.prototype.oo=function(t){return this.As("post",[t,N(arguments,1)])},a.ao=function(t,e){return a(t).As("apply",[void 0,e])},l.prototype.ao=function(t){return this.As("apply",[void 0,t])},a.ho=a.Gs=function(t){return a(t).As("apply",[void 0,N(arguments,1)])},l.prototype.Gs=function(){return this.As("apply",[void 0,N(arguments)])},a.co=function(t){var e=a(t),i=N(arguments,1);return function(){return e.As("apply",[this,i.concat(N(arguments))])}},l.prototype.co=function(){var t=this,e=N(arguments);return function(){return t.As("apply",[this,e.concat(N(arguments))])}},a.keys=function(t){return a(t).As("keys",[])},l.prototype.keys=function(){return this.As("keys",[])},a.all=w,l.prototype.all=function(){return w(this)},a.uo=T,l.prototype.uo=function(){return T(this)},a.lo=function(t,e,i){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("allResolved is deprecated, use allSettled instead.",new Error("").stack),t.apply(t,arguments)}}(S),l.prototype.lo=function(){return S(this)},a.Os=function(t){return a(t).Os()},l.prototype.Os=function(){return this.then(function(t){return w(L(t,function(t){function e(){return t.Is()}return(t=a(t)).then(e,e)}))})},a.fail=a.catch=function(t,e){return a(t).then(void 0,e)},l.prototype.fail=l.prototype.catch=function(t){return this.then(void 0,t)},a.progress=function(t,e){return a(t).then(void 0,void 0,e)},l.prototype.progress=function(t){return this.then(void 0,void 0,t)},a.po=a.finally=function(t,e){return a(t).finally(e)},l.prototype.po=l.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=a(t),this.then(function(e){return t.Gs().then(function(){return e})},function(e){return t.Gs().then(function(){throw e})})},a.done=function(t,e,i,n){return a(t).done(e,i,n)},l.prototype.done=function(t,i,n){var r=function(t){a.Ts(function(){if(e(t,o),!a.onerror)throw t;a.onerror(t)})},o=t||i||n?this.then(t,i,n):this;"object"==typeof process&&process&&process.domain&&(r=process.domain.bind(r)),o.then(void 0,r)},a.timeout=function(t,e,i){return a(t).timeout(e,i)},l.prototype.timeout=function(t,e){var i=u(),n=setTimeout(function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),i.reject(e)},t);return this.then(function(t){clearTimeout(n),i.resolve(t)},function(t){clearTimeout(n),i.reject(t)},i.notify),i.Ss},a.delay=function(t,e){return void 0===e&&(e=t,t=void 0),a(t).delay(e)},l.prototype.delay=function(t){return this.then(function(e){var i=u();return setTimeout(function(){i.resolve(e)},t),i.Ss})},a.do=function(t,e){return a(t).do(e)},l.prototype.do=function(t){var e=u(),i=N(t);return i.push(e.Us()),this.ao(i).fail(e.reject),e.Ss},a.fo=function(t){var e=N(arguments,1);return a(t).do(e)},l.prototype.fo=function(){var t=N(arguments),e=u();return t.push(e.Us()),this.ao(t).fail(e.reject),e.Ss},a.Eo=a.vo=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=N(arguments,1);return function(){var i=e.concat(N(arguments)),n=u();return i.push(n.Us()),a(t).ao(i).fail(n.reject),n.Ss}},l.prototype.Eo=l.prototype.vo=function(){var t=N(arguments);return t.unshift(this),a.vo.apply(void 0,t)},a.yo=function(t,e){var i=N(arguments,2);return function(){var n=i.concat(N(arguments)),r=u();return n.push(r.Us()),a(function(){return t.apply(e,arguments)}).ao(n).fail(r.reject),r.Ss}},l.prototype.yo=function(){var t=N(arguments,0);return t.unshift(this),a.yo.apply(void 0,t)},a.To=a.mo=function(t,e,i){return a(t).mo(e,i)},l.prototype.To=l.prototype.mo=function(t,e){var i=N(e||[]),n=u();return i.push(n.Us()),this.As("post",[t,i]).fail(n.reject),n.Ss},a.Io=a.So=a.Ro=function(t,e){var i=N(arguments,2),n=u();return i.push(n.Us()),a(t).As("post",[e,i]).fail(n.reject),n.Ss},l.prototype.Io=l.prototype.So=l.prototype.Ro=function(t){var e=N(arguments,1),i=u();return e.push(i.Us()),this.As("post",[t,e]).fail(i.reject),i.Ss},a.Ns=function(t,e){return a(t).Ns(e)},l.prototype.Ns=function(t){if(!t)return this;this.then(function(e){a.Ts(function(){t(null,e)})},function(e){a.Ts(function(){t(e)})})},a.wo=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var q=s();return a})},function(t,e,i){"use strict";var n=i(6).he.bo;!function(t){var e=function(){return function(){}}();e.Co=5e3,e._o=6,e.Po=1e4,e.Ao=.2,e.Oo=10,t.No=e;var i=function(){return function(){}}();i.Do="0.0.1",i.ko=3e4,i.Lo=4e7,i.Mo=1,i.Fo=.8,i.Uo=!1,i.Bo=2e4,t.Ho=i;var r=function(){return function(){}}();r.xo=!0,r.qo=3,r.Go=1e4,t.Vo=r;var o=function(){return function(){}}();o.jo=1.1,t.Qo=o;var s=function(){return function(){}}();s.Ko=n,s.Yo=2e4,s.Wo=5e3,t.zo=s;var a=function(){return function(){}}();a.Jo=[412],t.Xo=a;var u=function(){return function(){}}();u.Zo=2e3,u.$o=!0,u.ea=!1,u.ta=1,u.ra=.02,u.ia=!0,u.na=!1,u.sa=!1,u.oa=1e4,u.aa=4e4,u.ha=3700,u.ca=2e4,u.ua=1,u.la=5,u.pa=.4,u.da=1,t.fa=u;var h=function(){return function(){}}();h.ga=30,h.Ea=2e4,h.va=3e4,t.ya=h;var c=function(){return function(){}}();c.Ta=3e7,c.ma=3e4,c.Ia=!1,c.Sa=10,t.Ra=c;var l=function(){return function(){}}();l.wa=3,l.ba=!1,l.Ca=3e4,l._a=.2,l.Pa=.2,l.Aa=1e4,t.Oa=l;var f=function(){return function(){}}();f.Na=!1,t.K=f;var p=function(){return function(){}}();p.Da=64e3,p.ka=5e3,p.La=1,p.Ma=1,t.Fa=p;var d=function(){return function(){}}();d.Ua=4e3,d.Ba=3e4,d.Ha=4096,d.xa=!0,d.qa=5e3,d.Ga=1e4,t.UDPBroadcast=d;var g=function(){return function(){}}();g.Va=100,g.ja=1e3,t.Qa=g;var v=function(){return function(){}}();v.Ka=20,v.Ya=20,v.Wa=20,v.za=5,t.Ja=v;var y=function(){return function(){}}();y.Xa="site",y.Za="externalAs",y.$a="availableSendRate",y.eh="remoteAddress",y.th="localAddress",y.rh=2e4,t.ih=y;var m=function(){return function(){}}();m.nh=3e4,t.sh=m;var E=function(){return function(){}}();E.oh=300,t.ah=E}(e.hh||(e.hh={}))},function(t,e,i){"use strict";var n=function(){return function(){}}();n.uh=!1,n.lh=!0,n.ph=!1,n.dh="4.1.0",n.fh="undefined"!=typeof core?core:"undefined",n.gh=!1,n.Eh=!0,n.vh="undefined"!=typeof INCLUDE_VOD_CACHE&&INCLUDE_VOD_CACHE,n.yh="undefined"!=typeof INCLUDE_UDP_BROADCAST&&INCLUDE_UDP_BROADCAST,n.Th="undefined"!=typeof INCLUDE_UDP_LEADER_ELECTION&&INCLUDE_UDP_LEADER_ELECTION,n.mh="undefined"!=typeof LEADER_SCORE_EQUALITY&&LEADER_SCORE_EQUALITY,n.Ih="undefined"!=typeof INCLUDE_DEFAULT_NETWORK&&INCLUDE_DEFAULT_NETWORK,n.Sh="undefined"!=typeof HIVE_RESTRICTED_CONNINFO&&HIVE_RESTRICTED_CONNINFO,n.bo="undefined"!=typeof HIVE_DISCOVERY?HIVE_DISCOVERY:"ws://127.0.0.1:8000/hive",n.Rh="undefined"!=typeof P2PDispatcherDetailedLog&&P2PDispatcherDetailedLog,n.wh="undefined"!=typeof NetworkManagerDetailedLog&&NetworkManagerDetailedLog,n.ae="undefined"!=typeof ATATUS_KEY?ATATUS_KEY:"592835a6b4204dd197c00488610003e0",n.ce="undefined"!=typeof ATATUS_VERSION?ATATUS_VERSION:"0.8",n.ue="undefined"==typeof ATATUS_DEFAULT_ENABLED||ATATUS_DEFAULT_ENABLED,n.le=5,n.bh="undefined"!=typeof HIVE_PLUGIN_TIMEOUT?HIVE_PLUGIN_TIMEOUT:-1,n.Ch="undefined"==typeof HIVE_DETECT_PRIVATEIP||HIVE_DETECT_PRIVATEIP,n._h=!0,e.he=n},function(t,e,i){"use strict";var n=i(0),r=i(43),o=i(30);!function(t){t.Oh=new r.Counter;var e=function(){function t(){this.ALPHA=.25,this.Nh=1e8,this.Dh=1e4}return t.prototype.kh=function(){return void 0!==this.Lh},t.prototype.Mh=function(t,e){return this.Lh=Math.min(this.Nh,e/t*8e3),this},t.prototype.Fh=function(t){return this.Lh=Math.max(this.Nh,t),this},t.prototype.Uh=function(t){t.kh()&&(this.kh()?this.Lh=this.Lh*(1-this.ALPHA)+t.Lh*this.ALPHA:this.Lh=t.Lh)},t.prototype.Bh=function(t){return this.kh()?Math.round(8e3*t/this.Lh):NaN},t.prototype.Hh=function(){return this.kh()?this.Lh:NaN},t.prototype.xh=function(){return this.kh()?this.Lh/1e3:NaN},t.prototype.qh=function(){return this.kh()?this.Lh/1e6:NaN},t.prototype.Gh=function(){return this.kh()?this.Lh>1e6?(this.Lh/1e6).toFixed(2)+"Mb/s":this.Lh>1e3?(this.Lh/1e3).toFixed(2)+"Kb/s":this.Lh+"b/s":"NaN"},t}();t.Vh=e,t.jh=function(t,e){return e?t+"-"+e:t},t.appendBuffer=function(t,e){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(e),t.byteLength),i.buffer},t.Qh=function(t){var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t),0),e.buffer},t.Kh=function(t,e,i){void 0===i&&(i=!0);for(var n=0;n<t.length;)if(t[n]===e){if(t.splice(n,1),i)break}else n++},t.Yh=function(t){return String.fromCharCode.apply(null,new Uint16Array(t))},t.Wh=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))},t.zh=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(n.Framework.random()*(e+1)),r=t[e];t[e]=t[i],t[i]=r}return t},t.Jh=function(t){var e=new Array;for(var i in t)t.hasOwnProperty(i)&&!/^\d+$/.test(i)&&e.push(i);return e},t.Xh=function(t){return Object.keys(t).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)})},t.Zh=function(t,e){return t[e]?t[e]:null},t.$h=function(t,e){return new o(e).Ph(t).toString()},t.ec=function(t){return 0==t.length?0:t.reduce(function(t,e){return t+e})/t.length},t.tc=function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0,r=t.length;n<r;n++)i[n]=t.charCodeAt(n);return e},t.createEvent=function(t,e,i,n){var r=new t(e,i),o=n||i.currentTarget;return o&&Object.defineProperties(r,{currentTarget:{value:o,p:!0,Ah:!1},target:{value:o,p:!0,Ah:!1}}),r}}(e.rc||(e.rc={}))},function(t,e,i){"use strict";!function(t){t.ic="statsClient",t.G="servicesClient",t.nc="ticketResolver",t.M="identityProvider",t.sc="connInfoProvider",t.oc="peerInfo",t.ac="streamInfoProvider",t.hc="reporting",t.cc="statsStore",t.uc="trackManager",t.lc="trackClient"}(e.pc||(e.pc={}))},function(t,e,i){"use strict";!function(t){t[t.dc=0]="AUDIO",t[t.fc=1]="VIDEO",t[t.gc=2]="METADATA",t[t.Ec=3]="OTHER"}(e.vc||(e.vc={}))},function(t,e,i){"use strict";i(60),function(t){t[t.yc=0]="TRACKER",t[t.W=1]="UDP"}(e.Tc||(e.Tc={})),function(t){t[t.mc=1]="PLAYER",t[t.Ic=2]="P2P_AGENT",t[t.Sc=3]="PREFETCHER_FIRST_TIER",t[t.Rc=4]="PREFETCHER_SECOND_TIER"}(e.wc||(e.wc={}));var n=function(){return function(){}}();e.TrackerPeerStreamInfo=n;var r=function(){return function(t,e,i){this.isLeader=i,this.internalAs=0,this.externalAs=0,this.type=t,i||(this.isLeader=!1),e&&(this.guid=e.guid,this.internalAs=e.internalAs,this.externalAs=e.externalAs,this.nat=e.nat,this.bandwidth=e.bandwidth,this.watchingBitrate=e.watchingBitrate,this.streams=e.streams,this.rankValue=e.rankValue,this.timestamp=e.timestamp,this.privateIpString=e.privateIpString,this.publicIpString=e.publicIpString)}}();e.bc=r},function(t,e,i){i(65),i(36),i(66),i(100)},function(t,e,i){"use strict";function n(){throw new Error("Can't construct. GenericCollection is a mixin.")}t.i=n,n.Cc=Object.freeze([]),n.prototype.addEach=function(t){if(t&&Object(t)===t)if("function"==typeof t.forEach)t.forEach(this.add,this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);else Object.keys(t).forEach(function(e){this.add(t[e],e)},this);else if(t&&"number"==typeof t.length)for(e=0;e<t.length;e++)this.add(t[e],e);return this},n.prototype._c=function(t,e){return t.forEach(function(t){this.delete(t,e)},this),this},n.prototype.forEach=function(t){var e=arguments[1];return this.reduce(function(i,n,r,o,s){t.call(e,n,r,o,s)},void 0)},n.prototype.map=function(t){var e=arguments[1],i=[];return this.reduce(function(n,r,o,s,a){i.push(t.call(e,r,o,s,a))},void 0),i},n.prototype.enumerate=function(t){null==t&&(t=0);var e=[];return this.reduce(function(i,n){e.push([t++,n])},void 0),e},n.prototype.group=function(t,e,i){i=i||Object.cs;var n=[],r=[];return this.forEach(function(o,s,a){s=t.call(e,o,s,a);var u,h=r.indexOf(s,i);-1===h?(u=[],n.push([s,u]),r.push(s)):u=n[h][1],u.push(o)}),n},n.prototype.toArray=function(){return this.map(Function.identity)},n.prototype.Pc=function(){var t={};return this.reduce(function(e,i,n){t[n]=i},void 0),t},n.prototype.filter=function(t){var e=arguments[1],i=this.Es();return this.reduce(function(n,r,o,s,a){t.call(e,r,o,s,a)&&i.add(r,o)},void 0),i},n.prototype.every=function(t){var e=arguments[1];return this.reduce(function(i,n,r,o,s){return i&&t.call(e,n,r,o,s)},!0)},n.prototype.some=function(t){var e=arguments[1];return this.reduce(function(i,n,r,o,s){return i||t.call(e,n,r,o,s)},!1)},n.prototype.all=function(){return this.every(Boolean)},n.prototype.uo=function(){return this.some(Boolean)},n.prototype.min=function(t){t=t||this.Ac||Object.Oc;var e=!0;return this.reduce(function(i,n){return e?(e=!1,n):t(n,i)<0?n:i},void 0)},n.prototype.max=function(t){t=t||this.Ac||Object.Oc;var e=!0;return this.reduce(function(i,n){return e?(e=!1,n):t(n,i)>0?n:i},void 0)},n.prototype.Nc=function(t){return t=void 0===t?0:t,this.reduce(function(t,e){return t+e},t)},n.prototype.Dc=function(t){var e=void 0===t?0:t,i=void 0===t?0:t;return this.reduce(function(t,n){e+=n,i+=1},void 0),e/i},n.prototype.concat=function(){for(var t=this.Es(this),e=0;e<arguments.length;e++)t.addEach(arguments[e]);return t},n.prototype.kc=function(){var t=this;return this.reduce(function(e,i){return i.forEach(function(t){this.push(t)},e,t),e},[])},n.prototype.Lc=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),Array.Mc(t)},n.prototype.join=function(t){return this.reduce(function(e,i){return void 0===e?i:e+t+i},void 0)},n.prototype.Fc=function(t,e,i){return(t=t||this.Ac||Object.Oc).Uc?(e=t.Uc,t=t.Oc||this.Ac||Object.Oc):e=e||Function.identity,void 0===i&&(i=1),this.map(function(t){return{Uc:e(t),value:t}}).sort(function(e,n){return t(e.Uc,n.Uc)*i}).map(function(t){return t.value})},n.prototype.reversed=function(){return this.Es(this).reverse()},n.prototype.clone=function(t,e){if(void 0===t)t=1/0;else if(0===t)return this;var i=this.Es();return this.forEach(function(n,r){i.add(Object.clone(n,t-1,e),r)},this),i},n.prototype.only=function(){if(1===this.length)return this.Bc()},n.prototype.iterator=function(){return this.Hc.apply(this,arguments)},n.gs={get:function(){return this.length},p:!1,l:!0},Object.defineProperty(n.prototype,"size",n.gs),i(65)},function(t,e,i){function n(){throw new Error("This is an abstract models. Mix it. Don't construct it")}function r(t,e,i,n){var r,o,s,a=t.active,u=t.xc,h=u.length,c=h;for(a.length>h&&(a.length=h);h--;)a[h]=u[h];for(o=0;o<c;o++)if(s=a[o],!o||u.indexOf(s)>=0){if(!(r=s[t.qc]||s[t.Gc]||s).call)throw new Error("No event listener for "+t.Vc+" or "+t.jc+" or call on "+r);r.call(s,i,e,n)}}i(11);var o=Object.prototype.hasOwnProperty;t.i=n,n.debug=!0,n.prototype.Qc=function(t){this.Kc||Object.defineProperty(this,"__propertyChangeListeners__",{value:{},p:!1,l:!0,Ah:!0});var e=this.Kc;if(!o.call(e,t)){var i=String(t);i=i&&i[0].toUpperCase()+i.slice(1),e[t]={Yc:{xc:[],active:[],qc:"handle"+i+"WillChange",Gc:"handlePropertyWillChange"},Wc:{xc:[],active:[],qc:"handle"+i+"Change",Gc:"handlePropertyChange"}}}return e[t]},n.prototype.zc=function(t){if(!this.Kc)return!1;if(!t)return!0;var e=this.Kc;return!!o.call(e,t)},n.prototype.Jc=function(t,e,i){this.Xc&&!this.Zc&&this.Xc();var r,o=n.Qc(this,t);r=i?o.Yc:o.Wc,n.$c(this,t),r.xc.push(e);var s=this;return function(){n.eu(s,t,e,i),s=null}},n.prototype.tu=function(t,e){return n.Jc(this,t,e,!0)},n.prototype.eu=function(t,e,i){var r,o=n.Qc(this,t),s=(r=i?o.Yc:o.Wc).xc.lastIndexOf(e);if(-1===s)throw new Error("Can't remove property change listener: does not exist: property name"+JSON.stringify(t));r.xc.splice(s,1)},n.prototype.ru=function(t,e){return n.eu(this,t,e,!0)},n.prototype.iu=function(t,e,i){var o,s=n.Qc(this,t);if(!s.isActive){s.isActive=!0,o=i?s.Yc:s.Wc;try{r(o,t,e,this)}finally{s.isActive=!1}}},n.prototype.nu=function(t,e){return n.iu(this,t,e,!0)},n.prototype.$c=function(t){var e,i=this.su;if(i){if(o.call(i,t))return}else{if(Array.isArray(this))return;if(!Object.isExtensible(this))throw new Error("Can't make property "+JSON.stringify(t)+" observable on "+this+" because object is not extensible");i={},Object.defineProperty(this,"__overriddenPropertyDescriptors__",{value:i,p:!1,Ah:!0,l:!0})}"object"==typeof this.ou?e=this.ou:(e={},Object.defineProperty(this,"__state__",{value:e,Ah:!0,p:!1})),e[t]=this[t];var n,s,a=this;do{if(n=Object.getOwnPropertyDescriptor(a,t))break;a=Object.getPrototypeOf(a)}while(a);if(n){if(!n.l)return;if(!n.Ah&&!n.set)return}else n={value:void 0,p:!0,Ah:!0,l:!0};i[t]=n,s="value"in n?{get:function(){return n.value},set:function(i){var o,s;if(i!==n.value){if(!(s=(o=this.Kc[t]).isActive)){o.isActive=!0;try{r(o.Yc,t,n.value,this)}finally{}}if(n.value=i,e[t]=i,!s)try{r(o.Wc,t,i,this)}finally{o.isActive=!1}}},p:n.p,l:!0}:{get:n.get,set:function(i){var o,s,a=this[t];if(n.set.call(this,i),(i=this[t])!==a){if(!(s=(o=this.Kc[t]).isActive)){o.isActive=!0;try{r(o.Yc,t,a,this)}finally{}}if(e[t]=i,!s)try{r(o.Wc,t,i,this)}finally{o.isActive=!1}}},p:n.p,l:!0},Object.defineProperty(this,t,s)},n.Qc=function(t,e){return t.Qc?t.Qc(e):n.prototype.Qc.call(t,e)},n.zc=function(t,e){return t.zc?t.zc(e):n.prototype.zc.call(t,e)},n.Jc=function(t,e,i,r){if(Object.au(t))return t.Jc?t.Jc(e,i,r):n.prototype.Jc.call(t,e,i,r)},n.eu=function(t,e,i,r){if(Object.au(t))return t.eu?t.eu(e,i,r):n.prototype.eu.call(t,e,i,r)},n.iu=function(t,e,i,r){if(Object.au(t))return t.iu?t.iu(e,i,r):n.prototype.iu.call(t,e,i,r)},n.tu=function(t,e,i){return n.Jc(t,e,i,!0)},n.ru=function(t,e,i){return n.eu(t,e,i,!0)},n.nu=function(t,e,i){return n.iu(t,e,i,!0)},n.$c=function(t,e){return t.$c?t.$c(e):n.prototype.$c.call(t,e)}},function(t,e,i){"use strict";var n,r=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(41),s=i(6),a=s.he.Sh,u=s.he.Ch;!function(t){var e=function(){return function(){}}();e.DashFilterBitrates=null,e.DashRemoveBitrateSize=!1,t.Dash=e;var i=function(){return function(){}}();i.AudioAccounting=!0,t.Stats=i;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(o.HiveConfig.DebugLogs);n.TrackerLogs=0,t.DebugLogs=n;var s=function(){return function(){}}();s.usiz=null,t.UDPBroadcast=s;var h=function(){return function(){}}();h.restrictedConnectivityInfo=a,h.hiddenHostnameValue="[Hidden]",t.SensitiveInfo=h;var c=function(){return function(){}}();c.cu=null,c.uu=null,t.ClientInfo=c;var l=function(){return function(){}}();l.detectPrivateIP=u,t.ConnInfo=l}(n=e.HiveConfig||(e.HiveConfig={})),"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Dash=n.Dash,window.HiveConfig.Stats=n.Stats,window.HiveConfig.UDPBroadcast=n.UDPBroadcast,window.HiveConfig.DebugLogs=n.DebugLogs,window.HiveConfig.SensitiveInfo=n.SensitiveInfo,window.HiveConfig.ClientInfo=n.ClientInfo,window.HiveConfig.ConnInfo=n.ConnInfo)},function(t,e,i){"use strict";!function(t){t.lu="snapAccountingManager",t.pu="membership",t.du="partnership",t.fu="inPartnership",t.gu="outPartnership",t.Eu="inPrefetcherPartnership",t.vu="outPrefetcherPartnership",t.yu="cache",t.Tu="livecache",t.mu="vodcache",t.Iu="objIndex",t.Su="centrFragment",t.Ru="hcache",t.wu="responder",t.bu="requester",t.Cu="p2pRequester",t._u="peer",t.Pu="contextResolver",t.Au="videoPrefetcher",t.Ou="prefetchManager",t.Nu="picker",t.Du="trackerClient",t.ku="scoreUpdater",t.q="serverManager",t.Lu="requestTracker",t.Mu="trackerManager",t.Fu="renderStats",t.Uu="udpBroadcaster",t.Bu="udpDiscovery",t.Th="udpLeaderElection",t.Hu="nodeInfo",t.xu="ipspoofing"}(e.qu||(e.qu={}))},function(t,e){t.i=function(){return new Function}},function(t,e,i){"use strict";var n=!0,r={Gu:function(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(n=t,t?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},Vu:function(t,e,i){var n=t.match(e);return n&&n.length>=i&&parseInt(n[i],10)},ju:function(){var t={Qu:null,version:null};if("undefined"==typeof window||!window.navigator)return t.Qu="Not a browser.",t;if(navigator.mozGetUserMedia)t.Qu="firefox",t.version=this.Vu(navigator.userAgent,/Firefox\/(\d+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)t.Qu="chrome",t.version=this.Vu(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return t.Qu="Unsupported webkit-based browser with GUM support but no WebRTC support.",t;t.Qu="safari",t.version=this.Vu(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))t.Qu="edge",t.version=this.Vu(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!navigator.mediaDevices||!navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return t.Qu="Not a supported browser.",t;t.Qu="safari",t.version=this.Vu(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}return t},Ku:function(){if("object"==typeof window&&window.HTMLMediaElement&&"srcObject"in window.HTMLMediaElement.prototype){var t=URL.createObjectURL.bind(URL),e=URL.revokeObjectURL.bind(URL),i=new Map,n=0;URL.createObjectURL=function(e){if("getTracks"in e){var r="polyblob:"+ ++n;return i.set(r,e),console.log("URL.createObjectURL(stream) is deprecated! Use elem.srcObject = stream instead!"),r}return t(e)},URL.revokeObjectURL=function(t){e(t),i.delete(t)};var r=Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,"src");Object.defineProperty(window.HTMLMediaElement.prototype,"src",{get:function(){return r.get.apply(this)},set:function(t){return this.Yu=i.get(t)||null,r.set.apply(this,[t])}});var o=HTMLMediaElement.prototype.setAttribute;HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.Yu=i.get(arguments[1])||null),o.apply(this,arguments)}}}};t.i={log:r.log,Gu:r.Gu,Wu:r.ju(),Vu:r.Vu,Ku:r.Ku,ju:r.ju.bind(r)}},function(t,e,i){"use strict";function n(t,e,i,r){for(var o in void 0===e&&(e=""),void 0===i&&(i=[]),void 0===r&&(r=!1),t)!function(o){if(t.hasOwnProperty(o)){var s=t[o];Array.isArray(s)?s.forEach(function(t,s){"object"==typeof t&&n(t,e+"."+o+"["+s+"]",i,r)}):"object"==typeof s?n(s,e+"."+o,i,r):"number"==typeof s&&isNaN(s)&&(i.push(e+"."+o),r||(t[o]=null))}}(o);return i}var r=i(3),o=i(4),s=i(26),a=s.HiveComm.HiveSessionError,u=s.HiveComm.getHiveSessionErrorMessage,h=s.HiveComm.HiveSession,c=i(53),l=i(72),f=i(14),p=i(6),d=i(1),g=p.he.uh;if(g)var v=i(31).HiveRequest,y=i(54).zu;var m=function(){function t(e){if(!e){if(0==Object.keys(t.mapping).length&&!t.Ju)return d.ErrorMonitor.ve().logError("No registered default HiveRequestFactory tech",t.loggerId),t.Ju=!0,t.getOriginalXhr();e=Object.keys(t.mapping)[0]}if(!(e in t.mapping))return t.Ju||(d.ErrorMonitor.ve().logError("no registered HiveRequestFactory tech for session",{sessionId:e}),t.Ju=!0),t.getOriginalXhr();var i=t.mapping[e];switch(i.tech){case"HiveJS":return g?i.Xu?new v(e):(i.Xu=!0,new y(e)):t.getOriginalXhr();case"HiveJsProxy":return i.Xu?new c.Zu(e):(i.Xu=!0,new l.$u(e));case"HiveJava":case"StatsJS":return t.getOriginalXhr()}}return t.getOriginalXhr=function(){return"undefined"!=typeof OriginalXMLHttpRequest?new OriginalXMLHttpRequest:new XMLHttpRequest},t.clear=function(){t.mapping={}},t.clearSessionState=function(e){if(e in t.mapping){var i=t.mapping[e];for(var n in i)"tech"!==n&&delete i[n]}},t.clearSession=function(e){e in t.mapping&&delete t.mapping[e]},t.registerTech=function(e,i){e in t.mapping||(t.mapping[e]={}),t.mapping[e].tech=i},t}();m.mapping={},m.Ju=!1,m.loggerId="[HiveRequestFactory]",e.HiveRequestFactory=m;var E=function(){function t(t,e,i,n){this.el=!1,this.ticketUrl=t,this.ticket=e,this.manifest=i,this.tl=o.defer(),this.rl=n,this.rl&&this.tl.resolve(this.rl)}return t.prototype.isActive=function(t){return null!==this.tech&&this.tech.isActive(t,this)},t.prototype.il=function(t){this.el!=t&&(this.el=t,this.tech&&this.tech.nl(this,t))},t.prototype.getTechName=function(){return this.tech&&this.tech.getName()||void 0},t.prototype.sl=function(){return this.el},t.prototype.close=function(t,e){if(void 0===e&&(e=!0),this.el=!0,null!=this.tech)return this.tech.ol(this,t,e)},t.prototype.toString=function(){return this.ticket.toString()},t.prototype.toHiveSession=function(){var t=new h;return t.id=this.id,t.ticketUrl=this.ticketUrl,t.manifest=this.manifest,t.tech=this.tech.getName(),t},t.prototype.al=function(){return this.tl.Ss},t.prototype.hl=function(t){this.rl=t,this.tl.resolve(this.rl)},t}();e.cl=E;var b=function(){return function(){}}();e.ul=b;var w=function(){return function(){this.success=0,this.ll=0,this.bytes=0}}();e.pl=w;var T=function(){function t(){this.dl=0,this.fl=0,this.gl=new r,this.El=new r}return t.prototype.accountCompleted=function(t,e,i,n){void 0===n&&(n=!0);var r=t?this.gl:this.El;r.has(e)||r.set(e,new w);var o=r.get(e);o.bytes+=i,n&&o.success++},t.prototype.accountFailed=function(t,e){var i=t?this.gl:this.El;i.has(e)||i.set(e,new w),i.get(e).ll++},t.prototype.updateBandwidth=function(t){this.bandwidth=t},t.prototype.bitrateSwitchUp=function(){this.dl++},t.prototype.bitrateSwitchDown=function(){this.fl++},t.prototype.getBandwidth=function(){return this.bandwidth},t.prototype.getVideoBitrates=function(){return this.gl},t.prototype.getAudioBitrates=function(){return this.El},t.prototype.getBitrateSwitchUp=function(){return this.dl},t.prototype.getBitrateSwitchDown=function(){return this.fl},t}();e.HivePlayerExtendedStats=T;var S=function(){function t(){var e,i,n=this;if(t.fe)throw new Error("Error: Instantiation failed: Use VisibilityChangeListener.getInstance() instead of new.");void 0!==document.hidden?(e="hidden",i="visibilitychange"):void 0!==document.msHidden?(e="msHidden",i="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",i="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==document[e]?document.addEventListener(i,function(){var t=!document[e];n.vl.forEach(function(e){e.call(n,t)})},!1):t.logger&&t.logger.debug("warn - visibilityChange listener not supported"),this.vl=new Array}return t.ve=function(e){return e&&(this.logger=e),void 0===this.fe&&(this.fe=new t),this.fe},t.prototype.yl=function(t){this.vl.push(t)},t}();e.Tl=S,e.ml=function(t,e,i){return void 0===e&&(e=""),void 0===i&&(i=[]),n(t,e,i,!0)},e.Il=n,e.Sl=function(t,e,i){var n=new a;return n.ticketUrl=t,n.code=e,n.message=u(e),n.detailedMessage=i,n};var I=function(){function t(){}return t.getItem=function(t){try{return window.sessionStorage?window.sessionStorage.getItem(t):null}catch(t){return null}},t.setItem=function(t,e){try{return!!window.sessionStorage&&(window.sessionStorage.setItem(t,e),!0)}catch(t){return!1}},t.removeItem=function(t){try{window.sessionStorage&&window.sessionStorage.removeItem(t)}catch(t){return null}},t}();e.Rl=I;var _=function(){function t(t){this.wl=t}return t.prototype.bl=function(t){var e=Date.now();return this.isEqual(this.Cl,t)||(this._l=e),this.Cl=t,e-this._l>=this.wl},t.prototype.isEqual=function(t,e){return!(!t||!e)&&[e.Pl-t.Pl,e.Al-t.Al,e.Ol-t.Ol].reduce(function(t,e){return t&&Math.abs(e)<10},!0)},t}();e.Nl=_;var R=function(){function t(){}return t.getPrivateIp=function(t){var e=t.getPrivateIp();return f.HiveConfig.SensitiveInfo.restrictedConnectivityInfo&&e&&(e=e.replace(/[0-9]*$/,"0")),e},t.Dl=function(t){return f.HiveConfig.SensitiveInfo.restrictedConnectivityInfo?f.HiveConfig.SensitiveInfo.hiddenHostnameValue:t.getHostName()},t}();e.kl=R},function(t,e,i){"use strict";var n=i(3),r=i(4),o=i(0),s=i(22),a=i(8),u=i(32);!function(t){t[t.STOP=0]="STOP",t[t.IDLE=1]="IDLE",t[t.Ll=2]="PLAY"}(e.Ml||(e.Ml={}));var h=function(){function t(t,e,i,n){this.ticket=t,this.Fl=e,this.app=i,this.identity=n,this.Ul=o.Framework.resolve(a.pc.cc),this.Bl=o.Framework.resolve(a.pc.ic),this.Hl=o.Framework.resolve(a.pc.uc),this.xl=new s.Gl.ql(this.Hl)}return t.prototype.Vl=function(t,e,i){this.app=new c(t,e),this.Ul.Vl(this.app),this.Hl.Vl(this.app,i)},t.prototype.nl=function(t){this.Bl.nl(t)},t.prototype.jl=function(){return this.renderStatsCallback},t.prototype.Ql=function(t){this.renderStatsCallback=t},t}();e.Kl=h;var c=function(){return function(t,e){this.app=t,this.version=e}}();e.Yl=c;var l=function(){function t(){this.p2pId=null,this.Wl=null,this.zl=new n,this.logger=o.Framework.resolve(o.Framework.V.R).log(),this.logger.debug("INIT REPORTING"),this.Fl=o.Framework.resolve(a.pc.G),this.Jl=o.Framework.resolve(a.pc.M),this.Xl=o.Framework.resolve(a.pc.nc)}return t.prototype.initSession=function(t,e,i){var n=this,o=r.defer(),s=this.Jl.Zl(),a=this.Xl.$l(t);return null!=i&&(a.testId=i),null!=a?s.then(function(t){return n.ep(t,a,o,e)}).fail(o.reject):o.reject("Ticket URL not valid"),o.Ss},t.prototype.close=function(t){t?(this.zl.delete(t),0==this.zl.length&&this.Fl.close()):(this.zl.clear(),this.Fl.close())},t.prototype.ep=function(t,e,i,n){var r=this;this.p2pId=t.tp(),this.Wl=t.rp();var o=this.Fl.init(this.p2pId,e),s=this.Xl.resolve(o.np,e,n);o.Ss.then(function(e){s.then(function(e){var n=e.sessionId;if(r.zl.has(n)){var o=r.zl.get(n);r.logger.warn("SESSION ALREADY EXISTING "+o.Ul.ticket)}else{var s=new c(u.Hive.sp(),u.Hive.getVersion()),a=new h(e,r.Fl,s,t);a.Ul.init(r.Wl,e,s,n),a.Hl.init(r.Wl,s),a.Hl.op(e),r.zl.set(n,a),r.logger.debug("SESSION SET ",n),i.resolve(a)}}).fail(function(t){return i.reject(t||"Error resolving the ticket")}),e.onerror(function(t){i.reject("Error establishing connection to Hive Services")})}).fail(function(t){return i.reject(t)}),this.Fl.connect()},t.prototype.ap=function(t,e){return t.hp()===e.hp()&&t.cp()===e.cp()&&t.up()===e.up()},t}();e.lp=l},function(t,e,i){"use strict";var n,r=i(41),o=i(29),s=i(42),a=i(6);if(a.he.lh,a.he.uh,a.he.ph,void 0===u)var u=3e4;!function(t){!function(t){var e=function(){return function(){this.monitorPort=o.L.pp?s.fp.dp:s.fp.gp,this.playerPort=o.L.pp?s.fp.Ep:s.fp.vp,this.feedbackPeriod=2e3,this.idleTimePeriod=6e4,this.useSessionCheck=o.L.yp,this.debugLevel="notice",this.hiveTechOrder=[],this.telemetryId=null,this.silent=!1,this.loggerTimestamp=r.HiveConfig.Framework.LoggerTimestamp,this.testId=null,this.pluginTimeout=u,this.onSourceSetCompleted=function(t){},this.onLoadingCompleted=function(t){},this.detectPrivateIP=a.he.Ch,this.onActiveSession=function(t){}}}();t.Options=e;var i=function(){return function(){this.initTimeout=3e4,this.onError=function(t){return!0},this.onActiveSession=function(t){}}}();t.Tp=i;var n=function(){return function(){this.hivePlayerPort="playerPort",this.hiveMonitorPort="monitorPort",this.hiveSilent="silent",this.hiveDebugLevel="debugLevel",this.hiveDebugTimestamp="loggerTimestamp",this.hiveSetupTimeout="setupTimeout",this.hiveJavaTimeout="initTimeout",this.hiveWarnJavaTimeout="warnSlowRespTimeout",this.hiveTestId="testId",this.hiveDetectPrivateIP="detectPrivateIP"}}();t.mp=n}(t.Options||(t.Options={}))}(e.HiveComm||(e.HiveComm={})),function(t){var e=function(){return function(){}}();e.enabledRUM=!1,e.enableKeyCombination=!0,e.enabledErrorFilter=!0,t.ErrorMonitor=e}(n=e.HiveConfig||(e.HiveConfig={})),"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.ErrorMonitor=n.ErrorMonitor)},function(t,e,i){"use strict";function n(t,e){var i;switch(typeof e){case"number":i=parseInt(t);break;case"boolean":i="true"===t;break;default:i=t}return i}function r(t,e,i,n,r){void 0===n&&(n=!0),void 0===r&&(r={});var s=o.defer();try{var a=new XMLHttpRequest;if(a.open(t,e,n),null!=i&&null!=i&&a.setRequestHeader("Content-Type",i),r)for(var u in r)r.hasOwnProperty(u)&&null!==r[u]&&a.setRequestHeader(u,r[u]);a.onload=function(){200==a.status?s.resolve(a.response):s.reject({status:a.status,reason:a.statusText,body:a.responseText})},a.onerror=function(t){s.reject({status:-1,reason:"Network Error"})},a.send()}catch(t){s.reject({status:-1,reason:t})}return s.Ss}var o=i(4),s=i(30);e.Ip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t[0],n=1;n<t.length;n++){var r=new RegExp("\\{"+(n-1)+"\\}","gm");i=i.replace(r,t[n])}return i},e.Sp=function(t,e){for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(e[i]=t[i])},e.Rp=function(t,e,i){var r=new s(t).query(!0);for(var o in r)try{if(r.hasOwnProperty(o)&&e.hasOwnProperty(o)&&i.hasOwnProperty(e[o])){var a=e[o],u=r[o];i[a]=n(u,i[a])}}catch(t){}},e.wp=function(t,e){var i=o.defer();return o.Ts(function n(){if(!t())return i.resolve(!0);o.when(e(),n,i.reject)}),i.Ss},e.bp=function(t,e,i,n){return void 0===i&&(i=!0),void 0===n&&(n={}),r("GET",t,e,i,n)},e.Cp=r,e._p=function(t,e,i,n,r){void 0===r&&(r=!0);var s=o.defer();try{var a=new XMLHttpRequest;if(a.open("POST",t,r),null!=i&&null!=i&&a.setRequestHeader("Content-Type",i),null!=n&&null!=n)for(var u in n)n.hasOwnProperty(u)&&null!==n[u]&&a.setRequestHeader(u,n[u]);a.onload=function(){200==a.status?s.resolve(a.response):s.reject({status:a.status,reason:a.statusText})},a.onerror=function(t){s.reject({status:-1,reason:"Network Error"})},a.send(e)}catch(t){s.reject({status:-1,reason:t})}return s.Ss},e.$h=function(t,e){var i,n,r=document.querySelector("base"),o=document.querySelector("head"),s=document.createElement("a"),a=r;return r?i=r.href:a=o.appendChild(document.createElement("base")),a.href=t,s.href=e,n=s.href,r?r.href=i:o.removeChild(a),n}},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(18),o=i(44).Pp,s=i(4),a=i(0),u=i(8),h=i(27),c=i(23),l=i(14);!function(t){t.Ap="hive-client-track",t.Op="trackevent",t.Np="NULLID",t.Dp="";var e=function(){return function(){}}();e.kp=0,e.Lp=1,e.Mp=2,e.Fp=100,e.Up=200,t.Bp=e,function(t){t[t.Hp=0]="PLAYING",t[t.xp=1]="BUFFERING",t[t.qp=2]="PAUSED",t[t.Gp=3]="SKIP",t[t.Vp=4]="STOPPED",t[t.ERROR=5]="ERROR",t[t.jp=6]="WINDOW_SIZE",t[t.Qp=7]="FULLSCREEN",t[t.Kp=8]="VISIBLE",t[t.HIDDEN=9]="HIDDEN"}(t.Yp||(t.Yp={})),function(t){t[t.Wp=0]="JAVA_NOT_REACHABLE",t[t.zp=1]="JAVA_NOT_READY",t[t.Jp=2]="JAVA_WRONG_VERSION",t[t.Xp=3]="JAVA_SESSION_BUSY",t[t.Zp=4]="JAVA_SESSION_ERROR",t[t.$p=5]="JAVA_TICKET_TIMEOUT"}(t.td||(t.td={}));var i=function(){return function(){}}();t.rd=i;var f=function(){return function(){}}();t.nd=f;var p=function(){return function(){}}();t.sd=p;var d=function(){return function(){this.type=e.Mp}}(),g=function(){function t(){this.sessions=new Array}return t.prototype.od=function(t,e){var i;this.sessions.forEach(function(e){e.sessionId==t&&(i=e)}),i||((i=new v).sessionId=t,this.sessions.push(i)),i.events.push(e)},t}();t.ad=g;var v=function(){return function(){this.events=new Array}}();t.hd=v;var y=function(){function e(){this.logger=a.Framework.resolve(a.Framework.V.R).log(),this.ud=a.Framework.resolve(u.pc.sc),this.ld=new Array,this.pd=new Array,this.dd=new Array}return e.prototype.fd=function(t){this.client=t},e.prototype.init=function(t,e){this.gd=t,this.Vl(e),this.logger.debug("[TRACK] INIT ID: "+t)},e.prototype.Vl=function(t,e){this.app=t,e&&(this.Ed=e)},e.prototype.updatePlayerInfo=function(t){this.vd=t},e.prototype.op=function(t){var e=new E(t,this);this.ld.push(e),this.yd=null,this.client.Td(!0)},e.prototype.Xu=function(t,e,i){if(!this.yd)for(var n=0;n<this.ld.length;n++){var r=this.ld[n];if(r.ticket.sessionId===t){this.logger.debug("[TRACK] Activating Track for session "+t),this.yd=r;break}}if(this.yd){if(this.yd.ticket.sessionId!=t)return void this.logger.warn("[TRACK] ignoring manifest not matching event "+this.yd.ticket.sessionId+" != "+t);if(!this.yd.md){var o=new b(t,e,i);this.yd.Id(o),this.client.Td()}}},e.prototype.Sd=function(t,e,i){null!=this.yd&&(this.yd.md||this.yd.Rd.push(new I(t,e,i)))},e.prototype.wd=function(t,e,i){this.pd.push(new T(t,e,i)),this.client.Td()},e.prototype.bd=function(t,e,i){this.dd.push(new S(t,e,i)),this.client.Td()},e.prototype.Cd=function(t){var e=this;t&&t.forEach(function(t){e.dd.push(t)})},e.prototype.Pd=function(){var t=new f;this.Ed?(t.partnerId=this.Ed.partnerId,t.customerId=this.Ed.customerId):l.HiveConfig.ClientInfo.cu&&l.HiveConfig.ClientInfo.uu?(t.partnerId=l.HiveConfig.ClientInfo.cu,t.customerId=l.HiveConfig.ClientInfo.uu):this.yd&&(t.partnerId=this.yd.ticket.up(),t.customerId=this.yd.ticket.cp()),t.version=this.app.app+"_"+(this.Ed?this.Ed.version:this.app.version),this.Ed&&(t.installVersion=this.Ed.installVersion,t.installTs=this.Ed.installTs);var e=new o;return e.Ad(navigator.userAgent),t.os=e.Od().name+" "+e.Od().version,this.vd&&(t.commVersion=this.vd.commVersion,t.pluginName=this.vd.pluginName,t.pluginVersion=this.vd.pluginVersion,t.playerTech=this.vd.playerTech,t.playerVersion=this.vd.playerVersion,this.vd.telemetryId&&(t.telemetryId=this.vd.telemetryId)),t},e.prototype.Nd=function(){return this.yd?this.yd:this.ld&&this.ld.length>0?this.ld[this.ld.length-1]:void 0},e.prototype.Dd=function(e){var n=this;if(void 0===e&&(e=!0),0==this.ld.length&&0==this.pd.length)return e?s.reject("nothing to send"):(this.logger.debug("[TRACK]  NOTHING TO SEND"),null);var r=new i;r.app=t.Ap,r.createdAt=a.Framework.time(),r.guid=this.gd,r.name=t.Op;var o=this.Nd();if(o){var u=o.ticket.kd().replace(/[\[\]]/g,"");r.tags=[u],r.tags.push(o.ticket.up()),r.tags.push(o.ticket.cp())}else r.tags=new Array;var h=new g;if(h.peer=this.Pd(),this.ld.forEach(function(t){t.md||h.od(t.ticket.sessionId,t)}),this.pd.forEach(function(t){h.od(t.sessionId,t)}),this.dd.forEach(function(t){h.od(t.sessionId,t)}),r.data=h,e)return this.ud.getConnectivityInfo().then(function(t){var e=n.Ld(t);return h.od("null",e),r}).fail(function(t){return r});var c=this.Ld(this.ud.Md());return h.od("null",c),r},e.prototype.Ld=function(t){var e=new d;e.ts=a.Framework.time();var i=t.getNetworkChanged();return i.getPublicIp()&&(e.pubIp=i.getPublicIp()),i.getPrivateIp()&&(e.privIp=r.kl.getPrivateIp(i)),t.getHostName()&&(e.hostname=r.kl.Dl(t)),i.getCidr()&&(e.netmask=i.getCidr()),i.getNic()&&(e.nic=i.getNic()),i.getNicName()&&(e.nicName=i.getNicName()),i.getMacAddress()&&(e.mac=i.getMacAddress()),e},e.prototype.Fd=function(){return this.Ed?this.Ed.userAgent:navigator.userAgent},e.prototype.reset=function(){this.ld=new Array,this.pd=new Array,this.dd=new Array},e.prototype.Ud=function(t){},e}();t.Bd=y;var m=function(){function t(t){this.Hd=isNaN(l.HiveConfig.DebugLogs.TrackSnapshotLogs)?0:l.HiveConfig.DebugLogs.TrackSnapshotLogs,this.Hl=t,this.logger=a.Framework.resolve(a.Framework.V.R).log(),this.client=a.Framework.resolve(u.pc.G),this.Hl.fd(this)}return t.prototype.Td=function(t){void 0===t&&(t=!1);var e=t?h.Gd.qd.xd:h.Gd.qd.Vd;this.jd?this.Qd-(new Date).getTime()>e&&(a.Framework.clearTimeout(this.jd),this.Qd=null,this.Kd(e)):this.Kd(e)},t.prototype.Yd=function(){this.jd&&(a.Framework.clearTimeout(this.jd),this.Qd=this.jd=null)},t.prototype.Kd=function(t){var e=this;this.jd=a.Framework.setTimeout(function(){e.Wd()},t),this.Qd=(new Date).getTime()+t},t.prototype.Wd=function(t){var e=this;void 0===t&&(t=!0),this.jd=null,this.Qd=null;var i=this.Hl.Dd(t);t?(this.logger.debug("[TRACK] TAKING A TRACK SNAPSHOT"),i.then(function(t){return e.forward(t)}).fail(function(t){e.logger.debug("[TRACK]  ERROR GENERATING/SENDING THE TRACK SNAPSHOT: ",t)}).finally(function(){return e.Hl.reset()}).done()):(this.logger.debug("[TRACK] FLUSHING TRACK SNAPSHOT"),this.forward(i),this.Hl.reset())},t.prototype.forward=function(t){if(this.client&&this.client.zd()&&t){var e=JSON.stringify(t);switch(this.Hd){case 0:default:this.logger.debug("[TRACK] TRACK EVENT");break;case 1:this.logger.debug("[TRACK] TRACK EVENT:"+e)}var i=new c.Jd(Services.Xd,2,e);this.client.zd().send(i)}},t.prototype.Zd=function(t){void 0===t&&(t=!0),t?(this.Yd(),this.Kd(h.Gd.qd.$d)):this.Wd(!1)},t}();t.ql=m;var E=function(){function t(t,e){this.createdAt=(new Date).getTime(),this.md=!1,this.ticket=t,this.manifests=new Array,this.Rd=new Array,this.Hl=e}return t.prototype.Id=function(t){this.manifests.push(t)},t.prototype.toJSON=function(){var t={};t.type=e.kp,t.ticket={},t.ticket.url=this.ticket.ticketUrl,t.ticket.reqTs=this.ticket.ef,t.ticket.respTs=this.ticket.rf,t.ticket.userAgent=this.Hl.Fd(),null!=this.ticket.testId&&(t.ticket.testId=this.ticket.testId),t.manifests=[],this.manifests.forEach(function(e){var i={};i.url=e.url,i.respTs=e.rf,i.respCode=e.respCode,t.manifests.push(i)});var i=-1,n=-1,r=-1;return this.Rd.forEach(function(t){t.if>0&&(-1==i&&(i=t.ts,n=t.if),r=t.if)}),-1!=i&&(t.playTs=i),-1!=r&&(t.buffTime=r),-1!=n&&(t.initBuffTime=n),t},t}();t.nf=E;var b=function(){return function(t,e,i){this.eventId=t,this.url=e,this.rf=(new Date).getTime(),this.respCode=i}}();t.sf=b;var w=function(){function t(t,e,i,n){this.ts=(new Date).getTime(),this.sessionId=t,this.sessionId||(this.sessionId="null"),this.event=e,this.af=i,n&&(this.ts=n)}return t.prototype.toJSON=function(){var t={};return t.type=this.hf+this.event,t.ts=this.ts,this.af&&(t.parameters=this.af),t},t}();t.cf=w;var T=function(t){function i(i,n,r,o){var s=t.call(this,i,n,r,o)||this;return s.hf=e.Fp,s}return n(i,t),i}(w);t.uf=T;var S=function(t){function i(i,n,r,o){var s=t.call(this,i,n,r,o)||this;return s.hf=e.Up,s}return n(i,t),i}(w);t.lf=S;var I=function(){return function(t,e,i){this.ts=(new Date).getTime(),this.Pl=t,this.pf=e,this.if=i}}();t.df=I}(e.Gl||(e.Gl={}))},function(t,e,i){"use strict";var n=i(1),r=i(2);e.loggerId="[HiveServices] ";var o=function(){return function(){}}();o.Ef=250,e.L=o;var s=function(){function t(t,e,i){this.msgId=e,this.service=t,this.msg=i}return t.prototype.vf=function(){try{var e,i=[new Uint8Array([this.service>>8,255&this.service]),new Uint8Array([this.msgId]),this.msg];return new Blob(i,{type:"application/octet-binary"})}catch(e){throw n.ErrorMonitor.ve().logError("Error serializing message to send to the services",t.loggerId,r.hs.as.ns,e),new Error(e)}},t.yf=function(e){try{var i=(String.fromCharCode.apply(null,new Uint8Array(e)),String.fromCharCode.apply(null,new Uint8Array(e.slice(3)))),o=new Uint8Array(e.slice(0,2)),s=new Uint8Array(e.slice(2,3));return new t((o[0]<<8)+o[1],s[0],i)}catch(t){throw n.ErrorMonitor.ve().logError("Error extracting message from the services",this.loggerId,r.hs.as.ss,t),new Error(t)}},t}();s.loggerId="[Message] ",e.Jd=s,e.logger=function(){if(this.ff)return this.ff;var t=window&&window.window?window.window.gf:void 0;if(void 0!==t&&t.log&&t.debug&&t.info&&t.warn&&t.error&&(this.ff=t),!this.ff){var e=!(void 0===window.console),i=e?console.log.bind(console):function(){};this.ff={log:i,debug:e&&window.console.debug?window.console.debug.bind(console):i,info:e&&window.console.info?window.console.info.bind(console):i,warn:e&&window.console.warn?window.console.warn.bind(console):i,error:e&&window.console.error?window.console.error.bind(console):i}}return this.ff}},function(t,e,i){"use strict";var n=i(0),r=i(7);!function(t){t[t.Tf=0]="UPPER_LAYER",t[t.mf=1]="CDN",t[t.If=2]="CDN_PREFETCH",t[t.Sf=3]="CDN_COMPENSATION",t[t.Rf=4]="P2P",t[t.wf=5]="P2P_PREFETCH"}(e.bf||(e.bf={}));var o=function(){return function(){this.Cf=!1,this._f=!1,this.Pf=0,this.Af=0,this.Of=0,this.Nf=0,this.Df=0,this.p2pAgenTrafficSuccessQt=0,this.kf=0,this.srcOtherRespQt=0,this.Lf=0,this.Mf=0,this.Ff=0,this.Uf=0,this.Bf=0}}();e.Hf=o;var s=function(){function t(t,e,i,r,s){this.xf=!1,this.type=void 0,this.qf=new o,this.Gf=!1,this.Vf=!1,this.responseHeaders="",this.jf=new ArrayBuffer(0),this.Qf=0,this.type=i,this.Kf=t,this.Yf=e,this.Wf=s,this.zf=r,this.qf.Lf=n.Framework.time()}return t.prototype.Jf=function(){return this.type},t.prototype.Xf=function(){return this.zf.Xf()},t.prototype.Zf=function(){return this.zf.Zf()},t.prototype.$f=function(){return this.Zf()+"-"+this.Yf},t.prototype.eg=function(){return this.zf.tg()},t.prototype.rg=function(){return this.zf.ig()},t.prototype.loaded=function(){this.ng=n.Framework.time()},t.prototype.sg=function(){return this.ng?Math.max(1,this.ng-this.qf.Ff):Math.max(1,this.qf.Uf-this.qf.Ff)},t.prototype.og=function(){return this.ng?Math.max(1,this.ng-this.qf.Mf):Math.max(1,this.qf.Uf-this.qf.Mf)},t.prototype.ag=function(){return 0!=this.qf.Df?(new r.rc.Vh).Mh(this.sg(),this.qf.Df):(new r.rc.Vh).Mh(this.og(),this.qf.Af)},t}();e.hg=s},function(t,e,i){"use strict";var n=i(161),r=i(35),o=i(28).cg,s=i(4),a=i(0),u=i(163),h=i(169),c=i(5),l=i(7),f=i(3),p=i(15),d=i(1),g=i(2);!function(t){var e;t.ug=!1,function(t){t[t.Have=1]="Have",t[t.Chunk=2]="Chunk",t[t.Request=3]="Request",t[t.Cancel=4]="Cancel",t[t.Ack=5]="Ack",t[t.Close=6]="Close",t[t.DoNotHave=7]="DoNotHave",t[t.lg=8]="OutPartRequest",t[t.pg=9]="OutPartResp",t[t.dg=10]="UDPHandshakeReq",t[t.UDPHandshakeResponse=11]="UDPHandshakeResponse",t[t.UDPSwitchLeadershipRequest=12]="UDPSwitchLeadershipRequest",t[t.fg=13]="UDPSwitchAck",t[t.Bitrate=14]="Bitrate",t[t.Haves=15]="Haves",t[t.nd=16]="PeerInfo",t[t.Ping=17]="Ping",t[t.Pong=18]="Pong",t[t.gg=19]="NoPartnerResp"}(e=t.Eg||(t.Eg={}));var v=function(){function t(t){this.loggerId="[DispatcherManager] ",this.vg=new f,this.logger=a.Framework.resolve(a.Framework.V.R).log(),this.yg=t}return t.prototype.Tg=function(t){try{var e=null,i=a.Framework.resolve(p.qu._u).mg(t);return null==i?(this.logger.warn("MSG RECEIVED FROM UNKNOWN SWARM"),null):(e=new u.Ig(i,this.yg.Sg,this.yg.otherGuid,this.yg),this.vg.has(t)||this.vg.set(t,e),this.vg.get(t))}catch(t){d.ErrorMonitor.ve().logError("Error creating new dispatcher",this.loggerId,g.hs.tt.et,t)}},t.prototype.Rg=function(t){this.vg.delete(t)},t.prototype.wg=function(t){return this.vg.get(t)},t}();t.bg=v;var y=function(){function i(){this.loggerId="[Transport] ",this.Cg=null,this._g=a.Framework.resolve(a.Framework.V.R),this.Pg=new v(this),this.fe=i.Ag++,this.Og=a.Framework.time()}return i.prototype.init=function(t,e){this.Sg=t,this.otherGuid=e,this.Ng=a.Framework.resolve(a.Framework.V.F)},i.prototype.Dg=function(){var t=!1;return this.Pg.vg.forEach(function(e,i){(e.sender.Dg()||e.receiver.Dg())&&(t=!0)}),t},i.prototype.reset=function(){this.Pg.vg.forEach(function(t,e){t.sender.kg()})},i.prototype.close=function(t){return this.Pg.Rg(t),0==this.Pg.vg.length&&this.Ng.disconnect(this.otherGuid),s("ok")},i.prototype.Lg=function(i,n,s){try{this.Og=a.Framework.time();var u=s.tc(),h=u.byteLength,l=o.Fg.Mg.create(u),f=o.Ug(l),p=new r;p.Bg(i),p.Hg(n),p.Bg(h),p.Hg(f.toString()),p.append(u),p.xg();var v=p.tc(),y=i===e.Chunk&&a.Framework.C()?v.byteLength+c.hh.Fa.Da:v.byteLength;t.ug&&this._g.log(n).debug(this.fe+" SEND MSG ID "+i+","+y+" HASH "+f.toString()+" TO "+this.otherGuid)}catch(e){d.ErrorMonitor.ve().logError("Error constructing message",this.loggerId,g.hs.$e.ze,{qg:t.Eg[i]})}try{this.Ng.send(this.otherGuid,v,y)||d.ErrorMonitor.ve().logError("Error message dropped",this.loggerId,g.hs.$e.Je,{qg:t.Eg[i],otherGuid:this.otherGuid})}catch(e){d.ErrorMonitor.ve().logError("Error sending message",this.loggerId,g.hs.$e.Xe,{qg:t.Eg[i],otherGuid:this.otherGuid}),this._g.log(n).warn("ERROR SENDING MESSAGE TO "+this.otherGuid+" "+e.stack)}},i.prototype.Gg=function(n){var s=this;t.ug&&this._g.log().debug(this.fe+" GOT MSG "+n.byteLength);try{var u=a.Framework.time();this.Og=u,this.Vg(n).then(function(c){if(t.ug&&s._g.log().debug(s.fe+" RECEIVING "+c.byteLength+" after "+(a.Framework.time()-u)),c.byteLength>i.jg)throw new RangeError("P2P Message too big to be processed");var f=s.Cg;if(null===f){var p=r.wrap(c),d=p.Qg();if(t.ug&&s._g.log().debug("MSG ID "+d),d>Object.keys(e).length)return s._g.log().warn("MSG OF WRONG ID RECEIVED: "+d),void(s.Cg=null);if((f=s.Cg=new h.Kg).msgId=d,f.swarmId=p.Yg(),f.length=p.Qg(),f.hash=p.Yg(),f.Wg=p.tc(),f.length>i.jg)throw new RangeError("P2P Message too big to be processed");t.ug&&s._g.log(f.swarmId).debug("MSG ID "+f.msgId+" L "+f.length+" SWID "+f.swarmId+" H "+f.hash+" TR "+f.Wg.byteLength)}else{if(t.ug&&s._g.log().debug("APPENDING TO P2P MESSAGE "+f.msgId),null!=f.Wg.byteLength&&f.Wg.byteLength>i.jg)throw new RangeError("P2P Message too big to be processed");f.Wg=l.rc.appendBuffer(f.Wg,n)}if(f.Wg.byteLength===f.length){var g=o.Fg.Mg.create(f.Wg);if(o.Ug(g).toString()!==f.hash)return void s._g.log(f.swarmId).warn(" INTEGRITY CHECK FAILED ");var v=s.Pg.wg(f.swarmId);v||(v=s.Pg.Tg(f.swarmId),s._g.log(f.swarmId).debug("CREATED NEW DISPATCHER FOR "+s.otherGuid)),v&&v.As(f),f.Wg=null,s.Cg=null}})}catch(t){d.ErrorMonitor.ve().logError("Error receiving message",this.loggerId,g.hs.$e.Ze,t),this.Cg=null}},i.prototype.Vg=function(t){var e=!a.Framework.C()&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,i=s.defer();if(e){var n=new FileReader;n.onload=function(e){t=this.result,i.resolve(t)},n.onerror=i.reject,n.readAsArrayBuffer(t)}else i.resolve(t);return i.Ss},i.prototype.zg=function(){return this.Og},i}();y.Jg=n.Zg(i(170)).Xg("HiveMsgs"),y.Ag=0,y.jg=136+Math.ceil(1.2*c.hh.Fa.Da),t.Fa=y}(e.Rf||(e.Rf={}))},function(t,e,i){"use strict";var n;!function(t){function e(t){return r[t]}var i=function(){return function(){this.savings=0,this.cdnRequests=0,this.cdnResponses=0,this.cdnResponseErrors=0,this.cdnResponseBytes=0,this.p2pRequests=0,this.p2pResponses=0,this.p2pResponseErrors=0,this.p2pResponseBytes=0,this.partners={}}}();t.$g=i;var n=function(){return function(){this.uuid="",this.sentBytes=0,this.receivedBytes=0,this.successTransfers=0,this.failedTransfers=0}}();t.eE=n;var r,o=function(){return function(){}}();t.HiveSession=o,function(t){t[t.tE=0]="GENERIC_ERROR",t[t.rE=1]="NO_TECH_AVAILABLE",t[t.iE=2]="NO_TECH_RESOLVED",t[t.nE=3]="TECH_ERROR",t[t.sE=4]="TICKET_ERROR"}(t.oE||(t.oE={})),function(t){t[t.aE=0]="Generic Undefined Error",t[t.hE=1]="No Tech available to resolve the ticket",t[t.cE=2]="No available Tech could resolved the ticket",t[t.uE=3]="Stopped resolving session on last tech onError",t[t.lE=4]="The ticket could not be resolved"}(r||(r={}));var s=function(){return function(){}}();t.HiveSessionError=s;var a=function(){return function(t,e){this.code=t,this.message=e}}();t.HiveTechError=a,function(t){t[t.pE=0]="NOT_READY",t[t.dE=1]="PLUGIN_ERROR",t[t.fE=2]="SESSION_ERROR",t[t.sE=3]="TICKET_ERROR",t[t.gE=4]="VERSION_ERROR",t[t.EE=5]="TIMEOUT_ERROR"}(t.vE||(t.vE={})),function(t){t[t.yE=0]="OK",t[t.TE=1]="HIVE_NOT_ALLOWED",t[t.mE=2]="TICKET_NOT_RESOLVED",t[t.IE=3]="TIMEOUT_RESOLVING_TICKET"}(t.SE||(t.SE={})),t.getHiveSessionErrorMessage=e,t.Sl=function(t,i,n){var r=new s;return r.ticketUrl=t,r.code=i,r.message=e(i),r.detailedMessage=n,r};var u=function(){function t(t){this.RE=t}return t.prototype.getPluginStatusCode=function(){return this.RE.getStatusCode()},t}();t.wE=u}(n=e.HiveComm||(e.HiveComm={})),"undefined"!=typeof window&&(void 0===window.HiveComm&&(window.HiveComm={}),window.HiveComm.getHiveSessionErrorMessage=n.getHiveSessionErrorMessage)},function(t,e,i){"use strict";var n=i(6);!function(t){t.Eh=n.he.Eh,t._h=n.he._h;var e=function(){return function(){}}();e.bE="wss://bee.hivestreaming.com:443/v1/hivejs",e.CE="wss://bee-test.hivestreaming.com:443/v1/hivejs",e._E={iceServers:[{url:"stun:stun.hivestreaming.com:3478"}]},e.PE=3e4,e.Vd=3e5,e.xd=8e4,e.$d=1e3,e.AE=3e4,e.OE=100,e.NE=1e4,t.qd=e}(e.Gd||(e.Gd={}))},function(t,e){function i(t,e,i){null!=t&&("number"==typeof t?this.DE(t,e,i):null==e&&"string"!=typeof t?this.kE(t,256):this.kE(t,e))}function n(){return new i(null)}function r(t){return L.charAt(t)}function o(t,e){var i=x[t.charCodeAt(e)];return null==i?-1:i}function s(t){var e=n();return e.ME(t),e}function a(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function u(t){this.h=t}function h(t){this.h=t,this.nv=t.sv(),this.ov=32767&this.nv,this.av=this.nv>>15,this.hv=(1<<t.UE-15)-1,this.cv=2*t.t}function c(t){var e,i,n,o="",s=0;for(e=0;e<t.length&&t.charAt(e)!=U;++e)(n=M.indexOf(t.charAt(e)))<0||(0==s?(o+=r(n>>2),i=3&n,s=1):1==s?(o+=r(i<<2|n>>4),i=15&n,s=2):2==s?(o+=r(i),o+=r(n>>2),i=3&n,s=3):(o+=r(i<<2|n>>4),o+=r(15&n),s=0));return 1==s&&(o+=r(i<<2)),o}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function l(t,e){return new i(t,e)}function f(t,e){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var n=new Array,r=t.length-1;r>=0&&e>0;){var o=t.charCodeAt(r--);o<128?n[--e]=o:o>127&&o<2048?(n[--e]=63&o|128,n[--e]=o>>6|192):(n[--e]=63&o|128,n[--e]=o>>6&63|128,n[--e]=o>>12|224)}n[--e]=0;for(var s=new SecureRandom,a=new Array;e>2;){for(a[0]=0;0==a[0];)s.gv(a);n[--e]=a[0]}return n[--e]=2,n[--e]=0,new i(n)}function p(t,e,i){for(var n="",r=0;n.length<e;)n+=i(String.fromCharCode.apply(String,t.concat([(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r]))),r+=1;return n}function d(t,e,n){if(t.length+2*F+2>e)throw"Message too long for RSA";var r,o="";for(r=0;r<e-t.length-2*F-2;r+=1)o+="\0";var s=rstr_sha1("")+o+""+t,a=new Array(F);(new SecureRandom).gv(a);var u=p(a,s.length,n||rstr_sha1),h=[];for(r=0;r<s.length;r+=1)h[r]=s.charCodeAt(r)^u.charCodeAt(r);var c=p(h,a.length,rstr_sha1),l=[0];for(r=0;r<a.length;r+=1)l[r+1]=a[r]^c.charCodeAt(r);return new i(l.concat(h))}function g(){this.n=null,this.e=0,this.d=null,this.v=null,this.Ev=null,this.vv=null,this.yv=null,this.Tv=null}function v(t,e){for(var i="",n=e/4-t.length,r=0;r<n;r++)i+="0";return i+t}function y(t,e){var i=function(t){return KJUR.crypto.bv.wv(t,e)}(t);return this.Cv(i,e)}function m(t){return y.call(this,t,"sha1")}function E(t){return y.call(this,t,"sha256")}function b(t,e,i){for(var n="",r=0;n.length<e;)n+=hextorstr(i(rstrtohex(t+String.fromCharCode.apply(String,[(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r])))),r+=1;return n}function w(t,e,i){var n=function(t){return KJUR.crypto.bv.Av(t,e)}(rstrtohex(t));return void 0===i&&(i=-1),this.Ov(n,e,i)}function T(t,e,i){return function(t,e,i){var n=new g;return n.Nv(e,i),n.Rv(t)}(t,e,i).toString(16).replace(/^1f+00/,"")}function S(t){for(var e in KJUR.crypto.bv.Dv){var i=KJUR.crypto.bv.Dv[e],n=i.length;if(t.substring(0,n)==i)return[e,t.substring(n)]}return[]}function I(t,e){return function(t,e,i,n){var r=S(T(e,i,n));if(0==r.length)return!1;var o=r[0];return r[1]==function(t){return KJUR.crypto.bv.wv(t,o)}(t)}(e,l(t,16),this.n.toString(16),this.e.toString(16))}function _(t,e){var i=l(e=(e=e.replace(B,"")).replace(/[ \n]+/g,""),16);if(i.Sv()>this.n.Sv())return 0;var n=S(this.Rv(i).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;var r=n[0];return n[1]==function(t){return KJUR.crypto.bv.wv(t,r)}(t)}function R(t,e,i,n){var r=function(t){return KJUR.crypto.bv.Av(t,i)}(rstrtohex(t));return void 0===n&&(n=-1),this.kv(r,e,i,n)}var A={userAgent:!1},O={};if(void 0===C||!C)var C={};C.Mv=function(){var t,e,i,n=arguments,r=null;for(t=0;t<n.length;t+=1)for(i=(""+n[t]).split("."),r=C,e="YAHOO"==i[0]?1:0;e<i.length;e+=1)r[i[e]]=r[i[e]]||{},r=r[i[e]];return r},C.log=function(t,e,i){var n=C.Uv.Fv;return!(!n||!n.log)&&n.log(t,e,i)},C.register=function(t,e,i){var n,r,o,s,a,u=C.Ms.Bv;for(u[t]||(u[t]={Hv:[],xv:[]}),n=u[t],r=i.version,o=i.Xg,s=C.Ms.vl,n.name=t,n.version=r,n.Xg=o,n.Hv.push(r),n.xv.push(o),n.qv=e,a=0;a<s.length;a+=1)s[a](n);e?(e.VERSION=r,e.Gv=o):C.log("mainClass is undefined for module "+t,"warn")},C.Ms=C.Ms||{Bv:[],vl:[]},C.Ms.getVersion=function(t){return C.Ms.Bv[t]||null},C.Ms.Vv=function(t){var e,i=function(t){var e=0;return parseFloat(t.replace(/\./g,function(){return 1==e++?"":"."}))},n={jv:0,opera:0,Qv:0,Kv:0,chrome:0,Yv:null,Wv:0,zv:0,Jv:0,Xv:0,Zv:null,$v:0,ey:0,ty:A&&A.iy,ny:!1,os:null},r=t||A&&A.userAgent,o=O&&O.location,s=o&&o.href;return n.ny=s&&0===s.toLowerCase().indexOf("https"),r&&(/windows|win32/i.test(r)?n.os="windows":/macintosh/i.test(r)?n.os="macintosh":/rhino/i.test(r)&&(n.os="rhino"),/KHTML/.test(r)&&(n.Kv=1),(e=r.match(/AppleWebKit\/([^\s]*)/))&&e[1]&&(n.Kv=i(e[1]),/ Mobile\//.test(r)?(n.Yv="Apple",(e=r.match(/OS ([^\s]*)/))&&e[1]&&(e=i(e[1].replace("_","."))),n.Zv=e,n.zv=n.Xv=n.Jv=0,(e=r.match(/iPad|iPod|iPhone/))&&e[0]&&(n[e[0].toLowerCase()]=n.Zv)):((e=r.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))&&(n.Yv=e[0]),/webOS/.test(r)&&(n.Yv="WebOS",(e=r.match(/webOS\/([^\s]*);/))&&e[1]&&(n.ey=i(e[1]))),/ Android/.test(r)&&(n.Yv="Android",(e=r.match(/Android ([^\s]*);/))&&e[1]&&(n.$v=i(e[1])))),(e=r.match(/Chrome\/([^\s]*)/))&&e[1]?n.chrome=i(e[1]):(e=r.match(/AdobeAIR\/([^\s]*)/))&&(n.Wv=e[0])),n.Kv||((e=r.match(/Opera[\s\/]([^\s]*)/))&&e[1]?(n.opera=i(e[1]),(e=r.match(/Version\/([^\s]*)/))&&e[1]&&(n.opera=i(e[1])),(e=r.match(/Opera Mini[^;]*/))&&(n.Yv=e[0])):(e=r.match(/MSIE\s([^;]*)/))&&e[1]?n.jv=i(e[1]):(e=r.match(/Gecko\/([^\s]*)/))&&(n.Qv=1,(e=r.match(/rv:([^\s\)]*)/))&&e[1]&&(n.Qv=i(e[1]))))),n},C.Ms.sy=C.Ms.Vv(),function(){if(C.Mv("util","widget","example"),"undefined"!=typeof YAHOO_config){var t,e=YAHOO_config.listener,i=C.Ms.vl,n=!0;if(e){for(t=0;t<i.length;t++)if(i[t]==e){n=!1;break}n&&i.push(e)}}}(),C.lang=C.lang||{},function(){var t=C.lang,e=Object.prototype,i=[],n={oy:"&amp;",ay:"&lt;",hy:"&gt;",uy:"&quot;",ly:"&#x27;",py:"&#x2F;",gy:"&#x60;"},r=["toString","valueOf"],o={isArray:function(t){return"[object Array]"===e.toString.apply(t)},Ey:function(t){return"boolean"==typeof t},vy:function(t){return"function"==typeof t||"[object Function]"===e.toString.apply(t)},yy:function(t){return null===t},Ty:function(t){return"number"==typeof t&&isFinite(t)},au:function(e){return e&&("object"==typeof e||t.vy(e))||!1},my:function(t){return"string"==typeof t},Iy:function(t){return void 0===t},Sy:C.Ms.sy.jv?function(i,n){var o,s,a;for(o=0;o<r.length;o+=1)a=n[s=r[o]],t.vy(a)&&a!=e[s]&&(i[s]=a)}:function(){},Ry:function(t){return t.replace(/[&<>"'\/`]/g,function(t){return n[t]})},extend:function(i,n,r){if(!n||!i)throw new Error("extend failed, please check that all dependencies are included.");var o,s=function(){};if(s.prototype=n.prototype,i.prototype=new s,i.prototype.constructor=i,i.wy=n.prototype,n.prototype.constructor==e.constructor&&(n.prototype.constructor=n),r){for(o in r)t.hasOwnProperty(r,o)&&(i.prototype[o]=r[o]);t.Sy(i.prototype,r)}},by:function(e,i){if(!i||!e)throw new Error("Absorb failed, verify dependencies.");var n,r,o=arguments,s=o[2];if(s&&!0!==s)for(n=2;n<o.length;n+=1)e[o[n]]=i[o[n]];else{for(r in i)!s&&r in e||(e[r]=i[r]);t.Sy(e,i)}return e},Cy:function(e,i){if(!i||!e)throw new Error("Augment failed, verify dependencies.");var n,r=[e.prototype,i.prototype];for(n=2;n<arguments.length;n+=1)r.push(arguments[n]);return t.by.apply(this,r),e},dump:function(e,i){var n,r,o=[],s="{...}";if(!t.au(e))return e+"";if(e instanceof Date||"nodeType"in e&&"tagName"in e)return e;if(t.vy(e))return"f(){...}";if(i=t.Ty(i)?i:3,t.isArray(e)){for(o.push("["),n=0,r=e.length;n<r;n+=1)t.au(e[n])?o.push(i>0?t.dump(e[n],i-1):s):o.push(e[n]),o.push(", ");o.length>1&&o.pop(),o.push("]")}else{for(n in o.push("{"),e)t.hasOwnProperty(e,n)&&(o.push(n+" => "),t.au(e[n])?o.push(i>0?t.dump(e[n],i-1):s):o.push(e[n]),o.push(", "));o.length>1&&o.pop(),o.push("}")}return o.join("")},_y:function(e,i,n,r){for(var o,s,a,u,h,c,l,f,p,d=[],g=e.length;!((o=e.lastIndexOf("{",g))<0||(s=e.indexOf("}",o),o+1>s));)c=null,(a=(u=l=e.substring(o+1,s)).indexOf(" "))>-1&&(c=u.substring(a+1),u=u.substring(0,a)),h=i[u],n&&(h=n(u,h,c)),t.au(h)?t.isArray(h)?h=t.dump(h,parseInt(c,10)):((f=(c=c||"").indexOf("dump"))>-1&&(c=c.substring(4)),p=h.toString(),h="[object Object]"===p||f>-1?t.dump(h,parseInt(c,10)):p):t.my(h)||t.Ty(h)||(h="~-"+d.length+"-~",d[d.length]=l),e=e.substring(0,o)+h+e.substring(s+1),!1===r&&(g=o-1);for(o=d.length-1;o>=0;o-=1)e=e.replace(new RegExp("~-"+o+"-~"),"{"+d[o]+"}","g");return e},trim:function(t){try{return t.replace(/^\s+|\s+$/g,"")}catch(e){return t}},Py:function(){var e,i={},n=arguments,r=n.length;for(e=0;e<r;e+=1)t.by(i,n[e],!0);return i},Ay:function(e,n,r,o,s){e=e||0,n=n||{};var a,u,h=r,c=o;if(t.my(r)&&(h=n[r]),!h)throw new TypeError("method undefined");return t.Iy(o)||t.isArray(c)||(c=[o]),a=function(){h.apply(n,c||i)},u=s?setInterval(a,e):setTimeout(a,e),{interval:s,cancel:function(){this.interval?clearInterval(u):clearTimeout(u)}}},Oy:function(e){return t.au(e)||t.my(e)||t.Ty(e)||t.Ey(e)}};t.hasOwnProperty=e.hasOwnProperty?function(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}:function(e,i){return!t.Iy(e[i])&&e.constructor.prototype[i]!==e[i]},o.by(t,o,!0),C.util.Lang=t,t.Ny=t.Cy,C.Ny=t.Cy,C.extend=t.extend}(),C.register("yahoo",C,{version:"2.9.0",Xg:"2800"});
/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */
var k,N=N||function(t,e){var i={},n=i.Fg={},r=n.Dy=function(){function t(){}return{extend:function(e){t.prototype=this;var i=new t;return e&&i.ky(e),i.hasOwnProperty("init")||(i.init=function(){i.Ly.init.apply(this,arguments)}),i.init.prototype=i,i.Ly=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},ky:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=n.Mg=r.extend({init:function(t,e){t=this.My=t||[],this.Fy=null!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.My,i=t.My,n=this.Fy,r=t.Fy;if(this.BE(),n%4)for(var o=0;o<r;o++){var s=i[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=s<<24-(n+o)%4*8}else for(o=0;o<r;o+=4)e[n+o>>>2]=i[o>>>2];return this.Fy+=r,this},BE:function(){var e=this.My,i=this.Fy;e[i>>>2]&=4294967295<<32-i%4*8,e.length=t.ceil(i/4)},clone:function(){var t=r.clone.call(this);return t.My=this.My.slice(0),t},random:function(e){for(var i=[],n=0;n<e;n+=4)i.push(4294967296*t.random()|0);return new o.init(i,e)}}),s=i.Uy={},a=s.By={stringify:function(t){for(var e=t.My,i=t.Fy,n=[],r=0;r<i;r++){var o=e[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new o.init(i,e/2)}},u=s.Hy={stringify:function(t){for(var e=t.My,i=t.Fy,n=[],r=0;r<i;r++){var o=e[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new o.init(i,e)}},h=s.xy={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},c=n.qy=r.extend({reset:function(){this.Gy=new o.init,this.Vy=0},jy:function(t){"string"==typeof t&&(t=h.parse(t)),this.Gy.concat(t),this.Vy+=t.Fy},Qy:function(e){var i=this.Gy,n=i.My,r=i.Fy,s=this.Ky,a=r/(4*s),u=(a=e?t.ceil(a):t.max((0|a)-this.Yy,0))*s,h=t.min(4*u,r);if(u){for(var c=0;c<u;c+=s)this.Wy(n,c);var l=n.splice(0,u);i.Fy-=h}return new o.init(l,h)},clone:function(){var t=r.clone.call(this);return t.Gy=this.Gy.clone(),t},Yy:0}),l=(n.zy=c.extend({Jy:r.extend(),init:function(t){this.Jy=this.Jy.extend(t),this.reset()},reset:function(){c.reset.call(this),this.Xy()},update:function(t){return this.jy(t),this.Qy(),this},Zy:function(t){return t&&this.jy(t),this.$y()},Ky:16,eT:function(t){return function(e,i){return new t.init(i).Zy(e)}},tT:function(t){return function(e,i){return new l.rT.init(t,i).Zy(e)}}}),i.iT={});return i}(Math);!function(t){function e(t,e,i,n,r,o,s){return((t=t+(e&i|~e&n)+r+s)<<o|t>>>32-o)+e}function i(t,e,i,n,r,o,s){return((t=t+(e&n|i&~n)+r+s)<<o|t>>>32-o)+e}function n(t,e,i,n,r,o,s){return((t=t+(e^i^n)+r+s)<<o|t>>>32-o)+e}function r(t,e,i,n,r,o,s){return((t=t+(i^(e|~n))+r+s)<<o|t>>>32-o)+e}for(var o=N,s=(u=o.Fg).Mg,a=u.zy,u=o.iT,h=[],c=0;64>c;c++)h[c]=4294967296*t.abs(t.sin(c+1))|0;u=u.Ug=a.extend({Xy:function(){this.nT=new s.init([1732584193,4023233417,2562383102,271733878])},Wy:function(t,o){for(var s=0;16>s;s++){var a=t[u=o+s];t[u]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}s=this.nT.My;var u=t[o+0],c=(a=t[o+1],t[o+2]),l=t[o+3],f=t[o+4],p=t[o+5],d=t[o+6],g=t[o+7],v=t[o+8],y=t[o+9],m=t[o+10],E=t[o+11],b=t[o+12],w=t[o+13],T=t[o+14],S=t[o+15],I=e(I=s[0],A=s[1],R=s[2],_=s[3],u,7,h[0]),_=e(_,I,A,R,a,12,h[1]),R=e(R,_,I,A,c,17,h[2]),A=e(A,R,_,I,l,22,h[3]);I=e(I,A,R,_,f,7,h[4]),_=e(_,I,A,R,p,12,h[5]),R=e(R,_,I,A,d,17,h[6]),A=e(A,R,_,I,g,22,h[7]),I=e(I,A,R,_,v,7,h[8]),_=e(_,I,A,R,y,12,h[9]),R=e(R,_,I,A,m,17,h[10]),A=e(A,R,_,I,E,22,h[11]),I=e(I,A,R,_,b,7,h[12]),_=e(_,I,A,R,w,12,h[13]),R=e(R,_,I,A,T,17,h[14]),I=i(I,A=e(A,R,_,I,S,22,h[15]),R,_,a,5,h[16]),_=i(_,I,A,R,d,9,h[17]),R=i(R,_,I,A,E,14,h[18]),A=i(A,R,_,I,u,20,h[19]),I=i(I,A,R,_,p,5,h[20]),_=i(_,I,A,R,m,9,h[21]),R=i(R,_,I,A,S,14,h[22]),A=i(A,R,_,I,f,20,h[23]),I=i(I,A,R,_,y,5,h[24]),_=i(_,I,A,R,T,9,h[25]),R=i(R,_,I,A,l,14,h[26]),A=i(A,R,_,I,v,20,h[27]),I=i(I,A,R,_,w,5,h[28]),_=i(_,I,A,R,c,9,h[29]),R=i(R,_,I,A,g,14,h[30]),I=n(I,A=i(A,R,_,I,b,20,h[31]),R,_,p,4,h[32]),_=n(_,I,A,R,v,11,h[33]),R=n(R,_,I,A,E,16,h[34]),A=n(A,R,_,I,T,23,h[35]),I=n(I,A,R,_,a,4,h[36]),_=n(_,I,A,R,f,11,h[37]),R=n(R,_,I,A,g,16,h[38]),A=n(A,R,_,I,m,23,h[39]),I=n(I,A,R,_,w,4,h[40]),_=n(_,I,A,R,u,11,h[41]),R=n(R,_,I,A,l,16,h[42]),A=n(A,R,_,I,d,23,h[43]),I=n(I,A,R,_,y,4,h[44]),_=n(_,I,A,R,b,11,h[45]),R=n(R,_,I,A,S,16,h[46]),I=r(I,A=n(A,R,_,I,c,23,h[47]),R,_,u,6,h[48]),_=r(_,I,A,R,g,10,h[49]),R=r(R,_,I,A,T,15,h[50]),A=r(A,R,_,I,p,21,h[51]),I=r(I,A,R,_,b,6,h[52]),_=r(_,I,A,R,l,10,h[53]),R=r(R,_,I,A,m,15,h[54]),A=r(A,R,_,I,a,21,h[55]),I=r(I,A,R,_,v,6,h[56]),_=r(_,I,A,R,S,10,h[57]),R=r(R,_,I,A,d,15,h[58]),A=r(A,R,_,I,w,21,h[59]),I=r(I,A,R,_,f,6,h[60]),_=r(_,I,A,R,E,10,h[61]),R=r(R,_,I,A,c,15,h[62]),A=r(A,R,_,I,y,21,h[63]);s[0]=s[0]+I|0,s[1]=s[1]+A|0,s[2]=s[2]+R|0,s[3]=s[3]+_|0},$y:function(){var e=this.Gy,i=e.My,n=8*this.Vy,r=8*e.Fy;i[r>>>5]|=128<<24-r%32;var o=t.floor(n/4294967296);for(i[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.Fy=4*(i.length+1),this.Qy(),i=(e=this.nT).My,n=0;4>n;n++)r=i[n],i[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var t=a.clone.call(this);return t.nT=this.nT.clone(),t}}),o.Ug=a.eT(u),o.sT=a.tT(u)}(Math),function(){var t=N,e=(r=t.Fg).Mg,i=r.zy,n=[],r=t.iT.oT=i.extend({Xy:function(){this.nT=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},Wy:function(t,e){for(var i=this.nT.My,r=i[0],o=i[1],s=i[2],a=i[3],u=i[4],h=0;80>h;h++){if(16>h)n[h]=0|t[e+h];else{var c=n[h-3]^n[h-8]^n[h-14]^n[h-16];n[h]=c<<1|c>>>31}c=(r<<5|r>>>27)+u+n[h],c=20>h?c+(1518500249+(o&s|~o&a)):40>h?c+(1859775393+(o^s^a)):60>h?c+((o&s|o&a|s&a)-1894007588):c+((o^s^a)-899497514),u=a,a=s,s=o<<30|o>>>2,o=r,r=c}i[0]=i[0]+r|0,i[1]=i[1]+o|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+u|0},$y:function(){var t=this.Gy,e=t.My,i=8*this.Vy,n=8*t.Fy;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),e[15+(n+64>>>9<<4)]=i,t.Fy=4*e.length,this.Qy(),this.nT},clone:function(){var t=i.clone.call(this);return t.nT=this.nT.clone(),t}});t.oT=i.eT(r),t.aT=i.tT(r)}(),"Microsoft Internet Explorer"==A.appName?(i.prototype.VE=function(t,e,i,n,r,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],h=this[t++]>>15,c=a*u+h*s;r=((u=s*u+((32767&c)<<15)+i[n]+(1073741823&r))>>>30)+(c>>>15)+a*h+(r>>>30),i[n++]=1073741823&u}return r},k=30):"Netscape"!=A.appName?(i.prototype.VE=function(t,e,i,n,r,o){for(;--o>=0;){var s=e*this[t++]+i[n]+r;r=Math.floor(s/67108864),i[n++]=67108863&s}return r},k=26):(i.prototype.VE=function(t,e,i,n,r,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],h=this[t++]>>14,c=a*u+h*s;r=((u=s*u+((16383&c)<<14)+i[n]+r)>>28)+(c>>14)+a*h,i[n++]=268435455&u}return r},k=28),i.prototype.UE=k,i.prototype.xE=(1<<k)-1,i.prototype.LE=1<<k,i.prototype.WE=Math.pow(2,52),i.prototype.KE=52-k,i.prototype.YE=2*k-52;var P,D,L="0123456789abcdefghijklmnopqrstuvwxyz",x=new Array;for(P="0".charCodeAt(0),D=0;D<=9;++D)x[P++]=D;for(P="a".charCodeAt(0),D=10;D<36;++D)x[P++]=D;for(P="A".charCodeAt(0),D=10;D<36;++D)x[P++]=D;u.prototype.uv=function(t){return t.T<0||t.JE(this.h)>=0?t.ev(this.h):t},u.prototype.dv=function(t){return t},u.prototype.reduce=function(t){t.$E(this.h,null,t)},u.prototype.pv=function(t,e,i){t.tv(e,i),this.reduce(i)},u.prototype.lv=function(t,e){t.rv(e),this.reduce(e)},h.prototype.uv=function(t){var e=n();return t.abs().zE(this.h.t,e),e.$E(this.h,null,e),t.T<0&&e.JE(i.ZERO)>0&&this.h.HE(e,e),e},h.prototype.dv=function(t){var e=n();return t.jE(e),this.reduce(e),e},h.prototype.reduce=function(t){for(;t.t<=this.cv;)t[t.t++]=0;for(var e=0;e<this.h.t;++e){var i=32767&t[e],n=i*this.ov+((i*this.av+(t[e]>>15)*this.ov&this.hv)<<15)&t.xE;for(t[i=e+this.h.t]+=this.h.VE(0,n,t,e,0,this.h.t);t[i]>=t.LE;)t[i]-=t.LE,t[++i]++}t.BE(),t.XE(this.h.t,t),t.JE(this.h)>=0&&t.HE(this.h,t)},h.prototype.pv=function(t,e,i){t.tv(e,i),this.reduce(i)},h.prototype.lv=function(t,e){t.rv(e),this.reduce(e)},i.prototype.jE=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.T=this.T},i.prototype.ME=function(t){this.t=1,this.T=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.LE:this.t=0},i.prototype.kE=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.FE(t,e);n=2}this.t=0,this.T=0;for(var r=t.length,s=!1,a=0;--r>=0;){var u=8==n?255&t[r]:o(t,r);u<0?"-"==t.charAt(r)&&(s=!0):(s=!1,0==a?this[this.t++]=u:a+n>this.UE?(this[this.t-1]|=(u&(1<<this.UE-a)-1)<<a,this[this.t++]=u>>this.UE-a):this[this.t-1]|=u<<a,(a+=n)>=this.UE&&(a-=this.UE))}8==n&&0!=(128&t[0])&&(this.T=-1,a>0&&(this[this.t-1]|=(1<<this.UE-a)-1<<a)),this.BE(),s&&i.ZERO.HE(this,this)},i.prototype.BE=function(){for(var t=this.T&this.xE;this.t>0&&this[this.t-1]==t;)--this.t},i.prototype.zE=function(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.T=this.T},i.prototype.XE=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.T=this.T},i.prototype.QE=function(t,e){var i,n=t%this.UE,r=this.UE-n,o=(1<<r)-1,s=Math.floor(t/this.UE),a=this.T<<n&this.xE;for(i=this.t-1;i>=0;--i)e[i+s+1]=this[i]>>r|a,a=(this[i]&o)<<n;for(i=s-1;i>=0;--i)e[i]=0;e[s]=a,e.t=this.t+s+1,e.T=this.T,e.BE()},i.prototype.ZE=function(t,e){e.T=this.T;var i=Math.floor(t/this.UE);if(i>=this.t)e.t=0;else{var n=t%this.UE,r=this.UE-n,o=(1<<n)-1;e[0]=this[i]>>n;for(var s=i+1;s<this.t;++s)e[s-i-1]|=(this[s]&o)<<r,e[s-i]=this[s]>>n;n>0&&(e[this.t-i-1]|=(this.T&o)<<r),e.t=this.t-i,e.BE()}},i.prototype.HE=function(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.xE,n>>=this.UE;if(t.t<this.t){for(n-=t.T;i<this.t;)n+=this[i],e[i++]=n&this.xE,n>>=this.UE;n+=this.T}else{for(n+=this.T;i<t.t;)n-=t[i],e[i++]=n&this.xE,n>>=this.UE;n-=t.T}e.T=n<0?-1:0,n<-1?e[i++]=this.LE+n:n>0&&(e[i++]=n),e.t=i,e.BE()},i.prototype.tv=function(t,e){var n=this.abs(),r=t.abs(),o=n.t;for(e.t=o+r.t;--o>=0;)e[o]=0;for(o=0;o<r.t;++o)e[o+n.t]=n.VE(0,r[o],e,o,0,n.t);e.T=0,e.BE(),this.T!=t.T&&i.ZERO.HE(e,e)},i.prototype.rv=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.VE(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.VE(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.LE&&(t[i+e.t]-=e.LE,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.VE(i,e[i],t,2*i,0,1)),t.T=0,t.BE()},i.prototype.$E=function(t,e,r){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=e&&e.ME(0),void(null!=r&&this.jE(r));null==r&&(r=n());var u=n(),h=this.T,c=t.T,l=this.UE-a(o[o.t-1]);l>0?(o.QE(l,u),s.QE(l,r)):(o.jE(u),s.jE(r));var f=u.t,p=u[f-1];if(0!=p){var d=p*(1<<this.KE)+(f>1?u[f-2]>>this.YE:0),g=this.WE/d,v=(1<<this.KE)/d,y=1<<this.YE,m=r.t,E=m-f,b=null==e?n():e;for(u.zE(E,b),r.JE(b)>=0&&(r[r.t++]=1,r.HE(b,r)),i.ONE.zE(f,b),b.HE(u,u);u.t<f;)u[u.t++]=0;for(;--E>=0;){var w=r[--m]==p?this.xE:Math.floor(r[m]*g+(r[m-1]+y)*v);if((r[m]+=u.VE(0,w,r,E,0,f))<w)for(u.zE(E,b),r.HE(b,r);r[m]<--w;)r.HE(b,r)}null!=e&&(r.XE(f,e),h!=c&&i.ZERO.HE(e,e)),r.t=f,r.BE(),l>0&&r.ZE(l,r),h<0&&i.ZERO.HE(r,r)}}},i.prototype.sv=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.LE)%this.LE)>0?this.LE-e:-e},i.prototype.fv=function(){return 0==(this.t>0?1&this[0]:this.T)},i.prototype.exp=function(t,e){if(t>4294967295||t<1)return i.ONE;var r=n(),o=n(),s=e.uv(this),u=a(t)-1;for(s.jE(r);--u>=0;)if(e.lv(r,o),(t&1<<u)>0)e.pv(o,s,r);else{var h=r;r=o,o=h}return e.dv(r)},i.prototype.toString=function(t){if(this.T<0)return"-"+this.qE().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.GE(t);e=2}var i,n=(1<<e)-1,o=!1,s="",a=this.t,u=this.UE-a*this.UE%e;if(a-- >0)for(u<this.UE&&(i=this[a]>>u)>0&&(o=!0,s=r(i));a>=0;)u<e?(i=(this[a]&(1<<u)-1)<<e-u,i|=this[--a]>>(u+=this.UE-e)):(i=this[a]>>(u-=e)&n,u<=0&&(u+=this.UE,--a)),i>0&&(o=!0),o&&(s+=r(i));return o?s:"0"},i.prototype.qE=function(){var t=n();return i.ZERO.HE(this,t),t},i.prototype.abs=function(){return this.T<0?this.qE():this},i.prototype.JE=function(t){var e=this.T-t.T;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.T<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0},i.prototype.Sv=function(){return this.t<=0?0:this.UE*(this.t-1)+a(this[this.t-1]^this.T&this.xE)},i.prototype.ev=function(t){var e=n();return this.abs().$E(t,null,e),this.T<0&&e.JE(i.ZERO)>0&&t.HE(e,e),e},i.prototype.Iv=function(t,e){var i;return i=t<256||e.fv()?new u(e):new h(e),this.exp(t,i)},i.ZERO=s(0),i.ONE=s(1),
/*! asn1-1.0.9.js (c) 2013-2015 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
"undefined"!=typeof KJUR&&KJUR||(KJUR={}),void 0!==KJUR.hT&&KJUR.hT||(KJUR.hT={}),KJUR.hT.cT=new function(){this.uT=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.lT=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1).length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",o=0;o<n;o++)r+="f";e=new i(r,16).pT(t).add(i.ONE).toString(16).replace(/^-/,"")}return e},this.dT=function(t,e){var i=(KJUR.hT,N.Uy.By.parse(t)),n=N.Uy.fT.stringify(i).replace(/(.{64})/g,"$1\r\n");return"-----BEGIN "+e+"-----\r\n"+(n=n.replace(/\r\n$/,""))+"\r\n-----END "+e+"-----\r\n"},this.gT=function(t){var e=KJUR.hT,i=Object.keys(t);if(1!=i.length)throw"key of param shall be only one.";var n=i[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+n+":"))throw"undefined key: "+n;if("bool"==n)return new e.ET(t[n]);if("int"==n)return new e.vT(t[n]);if("bitstr"==n)return new e.yT(t[n]);if("octstr"==n)return new e.TT(t[n]);if("null"==n)return new e.mT(t[n]);if("oid"==n)return new e.IT(t[n]);if("enum"==n)return new e.ST(t[n]);if("utf8str"==n)return new e.RT(t[n]);if("numstr"==n)return new e.wT(t[n]);if("prnstr"==n)return new e.bT(t[n]);if("telstr"==n)return new e.CT(t[n]);if("ia5str"==n)return new e._T(t[n]);if("utctime"==n)return new e.PT(t[n]);if("gentime"==n)return new e.AT(t[n]);if("seq"==n){for(var r=t[n],o=[],s=0;s<r.length;s++){var a=e.cT.gT(r[s]);o.push(a)}return new e.OT({NT:o})}if("set"==n){for(r=t[n],o=[],s=0;s<r.length;s++){a=e.cT.gT(r[s]);o.push(a)}return new e.DT({NT:o})}if("tag"==n){var u=t[n];if("[object Array]"===Object.prototype.toString.call(u)&&3==u.length){var h=e.cT.gT(u[2]);return new e.kT({tag:u[0],LT:u[1],MT:h})}var c={};if(void 0!==u.LT&&(c.LT=u.LT),void 0!==u.tag&&(c.tag=u.tag),void 0===u.MT)throw"obj shall be specified for 'tag'.";return c.MT=e.cT.gT(u.MT),new e.kT(c)}},this.FT=function(t){return this.gT(t).UT()}},KJUR.hT.cT.BT=function(t){for(var e="",n=parseInt(t.substr(0,2),16),r=(e=Math.floor(n/40)+"."+n%40,""),o=2;o<t.length;o+=2){var s=("00000000"+parseInt(t.substr(o,2),16).toString(2)).slice(-8);r+=s.substr(1,7),"0"==s.substr(0,1)&&(e=e+"."+new i(r,2).toString(10),r="")}return e},KJUR.hT.cT.HT=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",r=t.split("."),o=40*parseInt(r[0])+parseInt(r[1]);n+=e(o),r.splice(0,2);for(var s=0;s<r.length;s++)n+=function(t){var n="",r=new i(t,10).toString(2),o=7-r.length%7;7==o&&(o=0);for(var s="",a=0;a<o;a++)s+="0";r=s+r;for(a=0;a<r.length-1;a+=7){var u=r.substr(a,7);a!=r.length-7&&(u="1"+u),n+=e(parseInt(u,2))}return n}(r[s]);return n},KJUR.hT.xT=function(){this.qT=function(){if(void 0===this.GT||null==this.GT)throw"this.hV is null or undefined.";if(this.GT.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.GT;var t=this.GT.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var i=e.length/2;if(i>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+i).toString(16)+e},this.UT=function(){return(null==this.VT||this.jT)&&(this.GT=this.QT(),this.KT=this.qT(),this.VT=this.YT+this.KT+this.GT,this.jT=!1),this.VT},this.WT=function(){return this.UT(),this.GT},this.QT=function(){return""}},KJUR.hT.zT=function(t){KJUR.hT.zT.wy.constructor.call(this),this.JT=function(){return this.T},this.XT=function(t){this.VT=null,this.jT=!0,this.T=t,this.GT=stohex(this.T)},this.ZT=function(t){this.VT=null,this.jT=!0,this.T=null,this.GT=t},this.QT=function(){return this.GT},void 0!==t&&("string"==typeof t?this.XT(t):void 0!==t.str?this.XT(t.str):void 0!==t.$T&&this.ZT(t.$T))},C.lang.extend(KJUR.hT.zT,KJUR.hT.xT),KJUR.hT.em=function(t){KJUR.hT.em.wy.constructor.call(this),this.tm=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.rm=function(t,e,i){var n=this.im,r=this.tm(t),o=String(r.getFullYear());"utc"==e&&(o=o.substr(2,2));var s=o+n(String(r.getMonth()+1),2)+n(String(r.getDate()),2)+n(String(r.getHours()),2)+n(String(r.getMinutes()),2)+n(String(r.getSeconds()),2);if(!0===i){var a=r.getMilliseconds();if(0!=a){var u=n(String(a),3);s=s+"."+(u=u.replace(/[0]+$/,""))}}return s+"Z"},this.im=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.JT=function(){return this.T},this.XT=function(t){this.VT=null,this.jT=!0,this.T=t,this.GT=stohex(t)},this.nm=function(t,e,i,n,r,o){var s=new Date(Date.UTC(t,e-1,i,n,r,o,0));this.sm(s)},this.QT=function(){return this.GT}},C.lang.extend(KJUR.hT.em,KJUR.hT.xT),KJUR.hT.om=function(t){KJUR.hT.zT.wy.constructor.call(this),this.am=function(t){this.VT=null,this.jT=!0,this.hm=t},this.cm=function(t){this.VT=null,this.jT=!0,this.hm.push(t)},this.hm=new Array,void 0!==t&&void 0!==t.NT&&(this.hm=t.NT)},C.lang.extend(KJUR.hT.om,KJUR.hT.xT),KJUR.hT.ET=function(){KJUR.hT.ET.wy.constructor.call(this),this.YT="01",this.VT="0101ff"},C.lang.extend(KJUR.hT.ET,KJUR.hT.xT),KJUR.hT.vT=function(t){KJUR.hT.vT.wy.constructor.call(this),this.YT="02",this.um=function(t){this.VT=null,this.jT=!0,this.GT=KJUR.hT.cT.lT(t)},this.lm=function(t){var e=new i(String(t),10);this.um(e)},this.pm=function(t){this.GT=t},this.QT=function(){return this.GT},void 0!==t&&(void 0!==t.dm?this.um(t.dm):void 0!==t.fm?this.lm(t.fm):"number"==typeof t?this.lm(t):void 0!==t.$T&&this.pm(t.$T))},C.lang.extend(KJUR.hT.vT,KJUR.hT.xT),KJUR.hT.yT=function(t){KJUR.hT.yT.wy.constructor.call(this),this.YT="03",this.gm=function(t){this.VT=null,this.jT=!0,this.GT=t},this.Em=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;this.VT=null,this.jT=!0,this.GT=i+e},this.vm=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var i=0;i<=e;i++)t+="0";var n="";for(i=0;i<t.length-1;i+=8){var r=t.substr(i,8),o=parseInt(r,2).toString(16);1==o.length&&(o="0"+o),n+=o}this.VT=null,this.jT=!0,this.GT="0"+e+n},this.ym=function(t){for(var e="",i=0;i<t.length;i++)1==t[i]?e+="1":e+="0";this.vm(e)},this.Tm=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=!1;return e},this.QT=function(){return this.GT},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.gm(t):void 0!==t.$T?this.gm(t.$T):void 0!==t.mm?this.vm(t.mm):void 0!==t.NT&&this.ym(t.NT))},C.lang.extend(KJUR.hT.yT,KJUR.hT.xT),KJUR.hT.TT=function(t){KJUR.hT.TT.wy.constructor.call(this,t),this.YT="04"},C.lang.extend(KJUR.hT.TT,KJUR.hT.zT),KJUR.hT.mT=function(){KJUR.hT.mT.wy.constructor.call(this),this.YT="05",this.VT="0500"},C.lang.extend(KJUR.hT.mT,KJUR.hT.xT),KJUR.hT.IT=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new i(t,10).toString(2),o=7-r.length%7;7==o&&(o=0);for(var s="",a=0;a<o;a++)s+="0";r=s+r;for(a=0;a<r.length-1;a+=7){var u=r.substr(a,7);a!=r.length-7&&(u="1"+u),n+=e(parseInt(u,2))}return n};KJUR.hT.IT.wy.constructor.call(this),this.YT="06",this.pm=function(t){this.VT=null,this.jT=!0,this.T=null,this.GT=t},this.Im=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var i="",r=t.split("."),o=40*parseInt(r[0])+parseInt(r[1]);i+=e(o),r.splice(0,2);for(var s=0;s<r.length;s++)i+=n(r[s]);this.VT=null,this.jT=!0,this.T=null,this.GT=i},this.Sm=function(t){if(void 0===KJUR.hT.bm.wm.Rm[t])throw"DERObjectIdentifier oidName undefined: "+t;var e=KJUR.hT.bm.wm.Rm[t];this.Im(e)},this.QT=function(){return this.GT},void 0!==t&&("string"==typeof t&&t.match(/^[0-2].[0-9.]+$/)?this.Im(t):void 0!==KJUR.hT.bm.wm.Rm[t]?this.Im(KJUR.hT.bm.wm.Rm[t]):void 0!==t.Cm?this.Im(t.Cm):void 0!==t.$T?this.pm(t.$T):void 0!==t.name&&this.Sm(t.name))},C.lang.extend(KJUR.hT.IT,KJUR.hT.xT),KJUR.hT.ST=function(t){KJUR.hT.ST.wy.constructor.call(this),this.YT="0a",this.um=function(t){this.VT=null,this.jT=!0,this.GT=KJUR.hT.cT.lT(t)},this.lm=function(t){var e=new i(String(t),10);this.um(e)},this.pm=function(t){this.GT=t},this.QT=function(){return this.GT},void 0!==t&&(void 0!==t.fm?this.lm(t.fm):"number"==typeof t?this.lm(t):void 0!==t.$T&&this.pm(t.$T))},C.lang.extend(KJUR.hT.ST,KJUR.hT.xT),KJUR.hT.RT=function(t){KJUR.hT.RT.wy.constructor.call(this,t),this.YT="0c"},C.lang.extend(KJUR.hT.RT,KJUR.hT.zT),KJUR.hT.wT=function(t){KJUR.hT.wT.wy.constructor.call(this,t),this.YT="12"},C.lang.extend(KJUR.hT.wT,KJUR.hT.zT),KJUR.hT.bT=function(t){KJUR.hT.bT.wy.constructor.call(this,t),this.YT="13"},C.lang.extend(KJUR.hT.bT,KJUR.hT.zT),KJUR.hT.CT=function(t){KJUR.hT.CT.wy.constructor.call(this,t),this.YT="14"},C.lang.extend(KJUR.hT.CT,KJUR.hT.zT),KJUR.hT._T=function(t){KJUR.hT._T.wy.constructor.call(this,t),this.YT="16"},C.lang.extend(KJUR.hT._T,KJUR.hT.zT),KJUR.hT.PT=function(t){KJUR.hT.PT.wy.constructor.call(this,t),this.YT="17",this.sm=function(t){this.VT=null,this.jT=!0,this._m=t,this.T=this.rm(this._m,"utc"),this.GT=stohex(this.T)},this.QT=function(){return void 0===this._m&&void 0===this.T&&(this._m=new Date,this.T=this.rm(this._m,"utc"),this.GT=stohex(this.T)),this.GT},void 0!==t&&(void 0!==t.str?this.XT(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.XT(t):void 0!==t.$T?this.ZT(t.$T):void 0!==t._m&&this.sm(t._m))},C.lang.extend(KJUR.hT.PT,KJUR.hT.em),KJUR.hT.AT=function(t){KJUR.hT.AT.wy.constructor.call(this,t),this.YT="18",this.Pm=!1,this.sm=function(t){this.VT=null,this.jT=!0,this._m=t,this.T=this.rm(this._m,"gen",this.Pm),this.GT=stohex(this.T)},this.QT=function(){return void 0===this._m&&void 0===this.T&&(this._m=new Date,this.T=this.rm(this._m,"gen",this.Pm),this.GT=stohex(this.T)),this.GT},void 0!==t&&(void 0!==t.str?this.XT(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.XT(t):void 0!==t.$T?this.ZT(t.$T):void 0!==t._m&&this.sm(t._m),!0===t.Am&&(this.Pm=!0))},C.lang.extend(KJUR.hT.AT,KJUR.hT.em),KJUR.hT.OT=function(t){KJUR.hT.OT.wy.constructor.call(this,t),this.YT="30",this.QT=function(){for(var t="",e=0;e<this.hm.length;e++)t+=this.hm[e].UT();return this.GT=t,this.GT}},C.lang.extend(KJUR.hT.OT,KJUR.hT.om),KJUR.hT.DT=function(t){KJUR.hT.DT.wy.constructor.call(this,t),this.YT="31",this.Om=!0,this.QT=function(){for(var t=new Array,e=0;e<this.hm.length;e++){var i=this.hm[e];t.push(i.UT())}return 1==this.Om&&t.sort(),this.GT=t.join(""),this.GT},void 0!==t&&void 0!==t.Nm&&0==t.Nm&&(this.Om=!1)},C.lang.extend(KJUR.hT.DT,KJUR.hT.om),KJUR.hT.kT=function(t){KJUR.hT.kT.wy.constructor.call(this),this.YT="a0",this.GT="",this.Dm=!0,this.km=null,this.Lm=function(t,e,i){this.YT=e,this.Dm=t,this.km=i,this.Dm?(this.GT=this.km.UT(),this.VT=null,this.jT=!0):(this.GT=null,this.VT=i.UT(),this.VT=this.VT.replace(/^../,e),this.jT=!1)},this.QT=function(){return this.GT},void 0!==t&&(void 0!==t.tag&&(this.YT=t.tag),void 0!==t.LT&&(this.Dm=t.LT),void 0!==t.MT&&(this.km=t.MT,this.Lm(this.Dm,this.YT,this.km)))},C.lang.extend(KJUR.hT.kT,KJUR.hT.xT);/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */
var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U="=";
/*! crypto-1.1.8.js (c) 2013-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
 */"undefined"!=typeof KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.bv=new function(){this.Dv={sha1:"3021300906052b0e03021a05000414",Mm:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",Fm:"3041300d060960864801650304020205000430",Um:"3051300d060960864801650304020305000440",Bm:"3020300c06082a864886f70d020205000410",Hm:"3020300c06082a864886f70d020505000410",xm:"3021300906052b2403020105000414"},this.qm={Hm:"cryptojs",sha1:"cryptojs",Mm:"cryptojs",sha256:"cryptojs",Fm:"cryptojs",Um:"cryptojs",xm:"cryptojs",Gm:"cryptojs",Vm:"cryptojs",jm:"cryptojs",Qm:"cryptojs",Km:"cryptojs",Ym:"cryptojs",Wm:"cryptojs",zm:"cryptojs/jsrsa",Jm:"cryptojs/jsrsa",Xm:"cryptojs/jsrsa",Zm:"cryptojs/jsrsa",$m:"cryptojs/jsrsa",eI:"cryptojs/jsrsa",tI:"cryptojs/jsrsa",rI:"cryptojs/jsrsa",iI:"cryptojs/jsrsa",nI:"cryptojs/jsrsa",sI:"cryptojs/jsrsa",oI:"cryptojs/jsrsa",aI:"cryptojs/jsrsa",hI:"cryptojs/jsrsa",cI:"cryptojs/jsrsa",uI:"cryptojs/jsrsa",lI:"cryptojs/jsrsa",pI:"cryptojs/jsrsa",dI:"cryptojs/jsrsa",fI:"cryptojs/jsrsa",gI:"cryptojs/jsrsa",EI:"cryptojs/jsrsa",vI:"cryptojs/jsrsa",yI:"cryptojs/jsrsa"},this.TI={Hm:N.iT.Ug,sha1:N.iT.oT,Mm:N.iT.mI,sha256:N.iT.II,Fm:N.iT.SI,Um:N.iT.RI,xm:N.iT.wI},this.bI=function(t,e){if(void 0===this.Dv[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.Dv[e]+t},this._v=function(t,e,i){var n=this.bI(t,e),r=i/4;if(n.length+22>r)throw"key is too short for SigAlg: keylen="+i+","+e;for(var o="0001",s="00"+n,a="",u=r-o.length-s.length,h=0;h<u;h+=2)a+="ff";return o+a+s},this.wv=function(t,e){return new KJUR.crypto._I({AI:e}).CI(t)},this.Av=function(t,e){return new KJUR.crypto._I({AI:e}).OI(t)},this.sha1=function(t){return new KJUR.crypto._I({AI:"sha1",NI:"cryptojs"}).CI(t)},this.sha256=function(t){return new KJUR.crypto._I({AI:"sha256",NI:"cryptojs"}).CI(t)},this.DI=function(t){return new KJUR.crypto._I({AI:"sha256",NI:"cryptojs"}).OI(t)},this.Um=function(t){return new KJUR.crypto._I({AI:"sha512",NI:"cryptojs"}).CI(t)},this.kI=function(t){return new KJUR.crypto._I({AI:"sha512",NI:"cryptojs"}).OI(t)},this.Hm=function(t){return new KJUR.crypto._I({AI:"md5",NI:"cryptojs"}).CI(t)},this.xm=function(t){return new KJUR.crypto._I({AI:"ripemd160",NI:"cryptojs"}).CI(t)},this.LI=function(t){}},KJUR.crypto._I=function(t){this.MI=function(t,e){if(null!=t&&void 0===e&&(e=KJUR.crypto.bv.qm[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.FI=KJUR.crypto.bv.TI[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.UI=function(t){this.FI.update(t)},this.BI=function(t){var e=N.Uy.By.parse(t);this.FI.update(e)},this.digest=function(){return this.FI.Zy().toString(N.Uy.By)},this.CI=function(t){return this.UI(t),this.digest()},this.OI=function(t){return this.BI(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.FI=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.UI=function(t){this.FI.update(t)},this.BI=function(t){var e=sjcl.xI.$T.HI(t);this.FI.update(e)},this.digest=function(){var t=this.FI.Zy();return sjcl.xI.$T.qI(t)},this.CI=function(t){return this.UI(t),this.digest()},this.OI=function(t){return this.BI(t),this.digest()}}},this.UI=function(t){throw"updateString(str) not supported for this alg/prov: "+this.GI+"/"+this.VI},this.BI=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.GI+"/"+this.VI},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.GI+"/"+this.VI},this.CI=function(t){throw"digestString(str) not supported for this alg/prov: "+this.GI+"/"+this.VI},this.OI=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.GI+"/"+this.VI},void 0!==t&&void 0!==t.AI&&(this.GI=t.AI,void 0===t.NI&&(this.VI=KJUR.crypto.bv.qm[this.GI]),this.MI(this.GI,this.VI))},KJUR.crypto.jI=function(t){this.MI=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=KJUR.crypto.bv.qm[t]),this.QI=t+"/"+e;var i=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(i)&&"cryptojs"==e){try{var n=KJUR.crypto.bv.TI[i];this.mac=N.iT.rT.create(n,this.KI)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+i+"/"+t}this.UI=function(t){this.mac.update(t)},this.BI=function(t){var e=N.Uy.By.parse(t);this.mac.update(e)},this.YI=function(){return this.mac.Zy().toString(N.Uy.By)},this.WI=function(t){return this.UI(t),this.YI()},this.zI=function(t){return this.BI(t),this.YI()}}},this.UI=function(t){throw"updateString(str) not supported for this alg/prov: "+this.QI},this.BI=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.QI},this.YI=function(){throw"digest() not supported for this alg/prov: "+this.QI},this.WI=function(t){throw"digestString(str) not supported for this alg/prov: "+this.QI},this.zI=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.QI},this.JI=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=rstrtohex(t)),void(this.KI=N.Uy.By.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;e=null;if(void 0!==t.$T){if(t.$T.length%2!=0||!t.$T.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.$T;e=t.$T}if(void 0!==t.XI&&(e=utf8tohex(t.XI)),void 0!==t.ZI&&(e=rstrtohex(t.ZI)),void 0!==t.$I&&(e=c(t.$I)),void 0!==t.eS&&(e=b64utohex(t.eS)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.KI=N.Uy.By.parse(e)},void 0!==t&&(void 0!==t.KI&&this.JI(t.KI),void 0!==t.AI&&(this.GI=t.AI,void 0===t.NI&&(this.VI=KJUR.crypto.bv.qm[this.GI]),this.MI(this.GI,this.VI)))},KJUR.crypto.Signature=function(t){var e=null;if(this.tS=function(){this.GI.match(/^(.+)with(.+)$/)&&(this.rS=RegExp.$1.toLowerCase(),this.iS=RegExp.$2.toLowerCase())},this.nS=function(t,e){for(var i="",n=e/4-t.length,r=0;r<n;r++)i+="0";return i+t},this.MI=function(t,e){if(this.tS(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.rS)){try{this.FI=new KJUR.crypto._I({AI:this.rS})}catch(t){throw"setAlgAndProvider hash alg set fail alg="+this.rS+"/"+t}this.init=function(t,e){var i=null;try{i=void 0===e?KEYUTIL.getKey(t):KEYUTIL.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===i.sS)this.oS=i,this.state="SIGN";else{if(!0!==i.mv)throw"init failed.:"+i;this.aS=i,this.state="VERIFY"}},this.hS=function(t){"string"==typeof t.cS&&"string"==typeof t.uS?(this.cS=t.cS,this.uS=t.uS):this.oS=t,this.state="SIGN"},this.lS=function(t){"string"==typeof t.pS&&"string"==typeof t.uS?(this.pS=t.pS,this.uS=t.uS):t instanceof KJUR.crypto.dS?this.aS=t:t instanceof g&&(this.aS=t),this.state="VERIFY"},this.fS=function(t){var e=new X509;e.gS(t),this.aS=e.ES,this.state="VERIFY"},this.UI=function(t){this.FI.UI(t)},this.BI=function(t){this.FI.BI(t)},this.sign=function(){if(this.vS=this.FI.digest(),void 0!==this.cS&&void 0!==this.uS){var t=new KJUR.crypto.dS({curve:this.uS});this.yS=t.TS(this.vS,this.cS)}else if(this.oS instanceof g&&"rsaandmgf1"==this.iS)this.yS=this.oS.Ov(this.vS,this.rS,this.mS);else if(this.oS instanceof g&&"rsa"==this.iS)this.yS=this.oS.Cv(this.vS,this.rS);else if(this.oS instanceof KJUR.crypto.dS)this.yS=this.oS.Cv(this.vS);else{if(!(this.oS instanceof KJUR.crypto.IS))throw"Signature: unsupported public key alg: "+this.iS;this.yS=this.oS.Cv(this.vS)}return this.yS},this.SS=function(t){return this.UI(t),this.sign()},this.TS=function(t){return this.BI(t),this.sign()},this.verify=function(t){if(this.vS=this.FI.digest(),void 0!==this.pS&&void 0!==this.uS)return new KJUR.crypto.dS({curve:this.uS}).RS(this.vS,t,this.pS);if(this.aS instanceof g&&"rsaandmgf1"==this.iS)return this.aS.kv(this.vS,t,this.rS,this.mS);if(this.aS instanceof g&&"rsa"==this.iS)return this.aS.wS(this.vS,t);if(this.aS instanceof KJUR.crypto.dS)return this.aS.wS(this.vS,t);if(this.aS instanceof KJUR.crypto.IS)return this.aS.wS(this.vS,t);throw"Signature: unsupported public key alg: "+this.iS}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.bS},this.lS=function(t){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.bS},this.fS=function(t){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.bS},this.hS=function(t){throw"initSign(prvKey) not supported for this alg:prov="+this.bS},this.UI=function(t){throw"updateString(str) not supported for this alg:prov="+this.bS},this.BI=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.bS},this.sign=function(){throw"sign() not supported for this alg:prov="+this.bS},this.SS=function(t){throw"digestString(str) not supported for this alg:prov="+this.bS},this.TS=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.bS},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.bS},this.CS=t,void 0!==t&&(void 0!==t.AI&&(this.GI=t.AI,void 0===t.NI?this.VI=KJUR.crypto.bv.qm[this.GI]:this.VI=t.NI,this.bS=this.GI+":"+this.VI,this.MI(this.GI,this.VI),this.tS()),void 0!==t._S&&(this.mS=t._S),void 0!==t.PS)){if(void 0!==t.OS)throw"both prvkeypem and prvkeypas parameters not supported";try{(e=new g).NS(t.PS),this.hS(e)}catch(t){throw"fatal error to load pem private key: "+t}}},KJUR.crypto.wm=new function(){this.DS={kS:"rsaEncryption",LS:"ecPublicKey",MS:"dsa",FS:"secp256r1",US:"secp192k1",BS:"secp224r1",HS:"secp256k1",xS:"secp521r1",qS:"secp384r1",GS:"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var F=20;g.prototype.Rv=function(t){return t.Iv(this.e,this.n)},g.prototype.Nv=function(t,e){this.mv=!0,"string"!=typeof t?(this.n=t,this.e=e):null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=l(t,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")},g.prototype.encrypt=function(t){var e=f(t,this.n.Sv()+7>>3);if(null==e)return null;var i=this.Rv(e);if(null==i)return null;var n=i.toString(16);return 0==(1&n.length)?n:"0"+n},g.prototype.VS=function(t,e){var i=d(t,this.n.Sv()+7>>3,e);if(null==i)return null;var n=this.Rv(i);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},g.prototype.type="RSA";
/*! rsasign-1.2.7.js (c) 2012 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
var B=new RegExp("");B.compile("[^0-9a-f]","gi"),g.prototype.Cv=function(t,e){var i=l(KJUR.crypto.bv._v(t,e,this.n.Sv()),16);return v(this.Pv(i).toString(16),this.n.Sv())},g.prototype.SS=y,g.prototype.jS=m,g.prototype.QS=E,g.prototype.sign=y,g.prototype.KS=m,g.prototype.YS=E,g.prototype.Ov=function(t,e,n){var r,o=hextorstr(t),s=o.length,a=this.n.Sv()-1,u=Math.ceil(a/8),h=function(t){return KJUR.crypto.bv.Av(t,e)};if(-1===n||void 0===n)n=s;else if(-2===n)n=u-s-2;else if(n<-2)throw"invalid salt length";if(u<s+n+2)throw"data too long";var c="";n>0&&(c=new Array(n),(new SecureRandom).gv(c),c=String.fromCharCode.apply(String,c));var l=hextorstr(h(rstrtohex("\0\0\0\0\0\0\0\0"+o+c))),f=[];for(r=0;r<u-n-s-2;r+=1)f[r]=0;var p=String.fromCharCode.apply(String,f)+""+c,d=b(l,p.length,h),g=[];for(r=0;r<p.length;r+=1)g[r]=p.charCodeAt(r)^d.charCodeAt(r);var y=65280>>8*u-a&255;for(g[0]&=~y,r=0;r<s;r++)g.push(l.charCodeAt(r));return g.push(188),v(this.Pv(new i(g)).toString(16),this.n.Sv())},g.prototype.WS=w,g.prototype.zS=w,g.JS=-1,g.XS=-2,g.prototype.wS=function(t,e){var i=l(e=(e=e.replace(B,"")).replace(/[ \n]+/g,""),16);if(i.Sv()>this.n.Sv())return 0;var n=S(this.Rv(i).toString(16).replace(/^1f+00/,""));return 0!=n.length&&(n[0],n[1]==t)},g.prototype.ZS=_,g.prototype.$S=I,g.prototype.verify=_,g.prototype.eR=I,g.prototype.kv=function(t,e,n,r){var o=new i(e,16);if(o.Sv()>this.n.Sv())return!1;var s,a=function(t){return KJUR.crypto.bv.Av(t,n)},u=hextorstr(t),h=u.length,c=this.n.Sv()-1,l=Math.ceil(c/8);if(-1===r||void 0===r)r=h;else if(-2===r)r=l-h-2;else if(r<-2)throw"invalid salt length";if(l<h+r+2)throw"data too long";var f=this.Rv(o).Lv();for(s=0;s<f.length;s+=1)f[s]&=255;for(;f.length<l;)f.unshift(0);if(188!==f[l-1])throw"encoded message does not end in 0xbc";var p=(f=String.fromCharCode.apply(String,f)).substr(0,l-h-1),d=f.substr(p.length,h),g=65280>>8*l-c&255;if(0!=(p.charCodeAt(0)&g))throw"bits beyond keysize not zero";var v=b(d,p.length,a),y=[];for(s=0;s<p.length;s+=1)y[s]=p.charCodeAt(s)^v.charCodeAt(s);y[0]&=~g;var m=l-h-r-2;for(s=0;s<m;s+=1)if(0!==y[s])throw"leftmost octets not zero";if(1!==y[m])throw"0x01 marker not found";return d===hextorstr(a(rstrtohex("\0\0\0\0\0\0\0\0"+u+String.fromCharCode.apply(String,y.slice(-r)))))},g.prototype.tR=R,g.prototype.rR=R,g.iR=-2,e.nR=i,e.sR=g,e.Signature=KJUR.crypto.Signature,e._I=KJUR.crypto._I,e.cg=N,e.oR=c,e.aR=function(t){var e,i=c(t),n=new Array;for(e=0;2*e<i.length;++e)n[e]=parseInt(i.substring(2*e,2*e+2),16);return n}},function(t,e,i){"use strict";var n=function(){return function(){}}();n.pp="https:"===location.protocol,n.yp=!0,n.hR=1e4,n.nh=6e4,n.cR="X-Hive-TestId",e.L=n},function(t,e,i){var n,r,o;
/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.18.10
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */!function(s,a){"use strict";"object"==typeof t&&t.i?t.i=a(i(16),i(16),i(16)):(r=[i(16),i(16),i(16)],void 0!==(o="function"==typeof(n=a)?n.apply(e,r):n)&&(t.i=o))}(0,function(t,e,i,n){"use strict";function r(t,e){var i=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof r))return i?n?new r(t,e):new r(t):new r;if(void 0===t){if(i)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&i)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.Ph(e):this}function o(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===s(t)}function u(t,e){var i,n,r={};if("RegExp"===s(e))r=null;else if(a(e))for(i=0,n=e.length;i<n;i++)r[e[i]]=!0;else r[e]=!0;for(i=0,n=t.length;i<n;i++)(r&&void 0!==r[t[i]]||!r&&e.test(t[i]))&&(t.splice(i,1),n--,i--);return t}function h(t,e){var i,n;if(a(e)){for(i=0,n=e.length;i<n;i++)if(!h(t,e[i]))return!1;return!0}var r=s(e);for(i=0,n=t.length;i<n;i++)if("RegExp"===r){if("string"==typeof t[i]&&t[i].match(e))return!0}else if(t[i]===e)return!0;return!1}function c(t,e){if(!a(t)||!a(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function l(t){return t.replace(/^\/+|\/+$/g,"")}function f(t){return escape(t)}function p(t){return encodeURIComponent(t).replace(/[!'()*]/g,f).replace(/\*/g,"%2A")}function d(t){return function(e,i){return void 0===e?this.uR[t]||"":(this.uR[t]=e||null,this.Xg(!i),this)}}function g(t,e){return function(i,n){return void 0===i?this.uR[t]||"":(null!==i&&((i+="").charAt(0)===e&&(i=i.substring(1))),this.uR[t]=i,this.Xg(!n),this)}}var v=n&&n.lR;r.version="1.18.10";var y=r.prototype,m=Object.prototype.hasOwnProperty;r.uR=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,pR:null,dR:r.dR,fR:r.fR}},r.dR=!1,r.fR=!0,r.gR=/^[a-z][a-z0-9.+-]*$/i,r.ER=/[^a-z0-9\.-]/i,r.vR=/(xn--)/i,r.yR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.TR=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.mR=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,r.IR={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,SR:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},r.RR={wR:"80",bR:"443",CR:"21",_R:"70",PR:"80",AR:"443"},r.OR=/[^a-zA-Z0-9\.-]/,r.NR={a:"href",DR:"cite",link:"href",kR:"href",LR:"src",form:"action",MR:"src",FR:"href",UR:"src",BR:"src",source:"src",track:"src",input:"src",HR:"src",video:"src"},r.xR=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return r.NR[e]}},r.encode=p,r.decode=decodeURIComponent,r.qR=function(){r.encode=escape,r.decode=unescape},r.GR=function(){r.encode=p,r.decode=decodeURIComponent},r.VR={pathname:{encode:{jR:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{jR:/[\/\?#]/g,map:{py:"%2F",QR:"%3F",KR:"%23"}}},YR:{encode:{jR:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":",WR:"/",zR:"?",JR:"#",XR:"[",ZR:"]","%40":"@",$R:"!","%24":"$","%26":"&",ew:"'",tw:"(",rw:")",iw:"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},nw:{encode:{jR:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{$R:"!","%24":"$",ew:"'",tw:"(",rw:")",iw:"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{jR:/[\/\?#:]/g,map:{py:"%2F",QR:"%3F",KR:"%23",sw:"%3A"}}}},r.ow=function(t,e){var i=r.encode(t+"");return void 0===e&&(e=r.fR),e?i.replace(/%20/g,"+"):i},r.aw=function(t,e){t+="",void 0===e&&(e=r.fR);try{return r.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var E,b={encode:"encode",decode:"decode"},w=function(t,e){return function(i){try{return r[e](i+"").replace(r.VR[t][e].jR,function(i){return r.VR[t][e].map[i]})}catch(t){return i}}};for(E in b)r[E+"PathSegment"]=w("pathname",b[E]),r[E+"UrnPathSegment"]=w("urnpath",b[E]);var T=function(t,e,i){return function(n){var o;o=i?function(t){return r[e](r[i](t))}:r[e];for(var s=(n+"").split(t),a=0,u=s.length;a<u;a++)s[a]=o(s[a]);return s.join(t)}};r.hw=T("/","decodePathSegment"),r.cw=T(":","decodeUrnPathSegment"),r.uw=T("/","encodePathSegment","decode"),r.lw=T(":","encodeUrnPathSegment","decode"),r.pw=w("reserved","encode"),r.parse=function(t,e){var i;return e||(e={}),(i=t.indexOf("#"))>-1&&(e.pR=t.substring(i+1)||null,t=t.substring(0,i)),(i=t.indexOf("?"))>-1&&(e.query=t.substring(i+1)||null,t=t.substring(0,i)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=r.dw(t,e)):(i=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,i)||null,e.protocol&&!e.protocol.match(r.gR)?e.protocol=void 0:"//"===t.substring(i+1,i+3)?(t=t.substring(i+3),t=r.dw(t,e)):(t=t.substring(i+1),e.urn=!0)),e.path=t,e},r.fw=function(t,e){var i,n,r=(t=t.replace(/\\/g,"/")).indexOf("/");if(-1===r&&(r=t.length),"["===t.charAt(0))i=t.indexOf("]"),e.hostname=t.substring(1,i)||null,e.port=t.substring(i+2,r)||null,"/"===e.port&&(e.port=null);else{var o=t.indexOf(":"),s=t.indexOf("/"),a=t.indexOf(":",o+1);-1!==a&&(-1===s||a<s)?(e.hostname=t.substring(0,r)||null,e.port=null):(n=t.substring(0,r).split(":"),e.hostname=n[0]||null,e.port=n[1]||null)}return e.hostname&&"/"!==t.substring(r).charAt(0)&&(r++,t="/"+t),t.substring(r)||"/"},r.dw=function(t,e){return t=r.gw(t,e),r.fw(t,e)},r.gw=function(t,e){var i,n=t.indexOf("/"),o=t.lastIndexOf("@",n>-1?n:t.length-1);return o>-1&&(-1===n||o<n)?(i=t.substring(0,o).split(":"),e.username=i[0]?r.decode(i[0]):null,i.shift(),e.password=i[0]?r.decode(i.join(":")):null,t=t.substring(o+1)):(e.username=null,e.password=null),t},r.Ew=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var i,n,o,s={},a=t.split("&"),u=a.length,h=0;h<u;h++)i=a[h].split("="),n=r.aw(i.shift(),e),o=i.length?r.aw(i.join("="),e):null,m.call(s,n)?("string"!=typeof s[n]&&null!==s[n]||(s[n]=[s[n]]),s[n].push(o)):s[n]=o;return s},r.Xg=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=r.vw(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.pR&&t.pR&&(e+="#"+t.pR),e},r.yw=function(t){var e="";return t.hostname?(r.TR.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},r.vw=function(t){return r.Tw(t)+r.yw(t)},r.Tw=function(t){var e="";return t.username&&(e+=r.encode(t.username)),t.password&&(e+=":"+r.encode(t.password)),e&&(e+="@"),e},r.mw=function(t,e,i){var n,o,s,u,h="";for(o in t)if(m.call(t,o)&&o)if(a(t[o]))for(n={},s=0,u=t[o].length;s<u;s++)void 0!==t[o][s]&&void 0===n[t[o][s]+""]&&(h+="&"+r.Iw(o,t[o][s],i),!0!==e&&(n[t[o][s]+""]=!0));else void 0!==t[o]&&(h+="&"+r.Iw(o,t[o],i));return h.substring(1)},r.Iw=function(t,e,i){return r.ow(t,i)+(null!==e?"="+r.ow(e,i):"")},r.Sw=function(t,e,i){if("object"==typeof e)for(var n in e)m.call(e,n)&&r.Sw(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=i);"string"==typeof t[e]&&(t[e]=[t[e]]),a(i)||(i=[i]),t[e]=(t[e]||[]).concat(i)}},r.Rw=function(t,e,i){var n,o,h;if(a(e))for(n=0,o=e.length;n<o;n++)t[e[n]]=void 0;else if("RegExp"===s(e))for(h in t)e.test(h)&&(t[h]=void 0);else if("object"==typeof e)for(h in e)m.call(e,h)&&r.Rw(t,h,e[h]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==i?"RegExp"===s(i)?!a(t[e])&&i.test(t[e])?t[e]=void 0:t[e]=u(t[e],i):t[e]!==String(i)||a(i)&&1!==i.length?a(t[e])&&(t[e]=u(t[e],i)):t[e]=void 0:t[e]=void 0}},r.ww=function(t,e,i,n){switch(s(e)){case"String":break;case"RegExp":for(var o in t)if(m.call(t,o)&&e.test(o)&&(void 0===i||r.ww(t,o,i)))return!0;return!1;case"Object":for(var u in e)if(m.call(e,u)&&!r.ww(t,u,e[u]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(s(i)){case"Undefined":return e in t;case"Boolean":return i===Boolean(a(t[e])?t[e].length:t[e]);case"Function":return!!i(t[e],e,t);case"Array":return!!a(t[e])&&(n?h:c)(t[e],i);case"RegExp":return a(t[e])?!!n&&h(t[e],i):Boolean(t[e]&&t[e].match(i));case"Number":i=String(i);case"String":return a(t[e])?!!n&&h(t[e],i):t[e]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.bw=function(){for(var t=[],e=[],i=0,n=0;n<arguments.length;n++){var o=new r(arguments[n]);t.push(o);for(var s=o.Cw(),a=0;a<s.length;a++)"string"==typeof s[a]&&e.push(s[a]),s[a]&&i++}if(!e.length||!i)return new r("");var u=new r("").Cw(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},r._w=function(t,e){var i,n=Math.min(t.length,e.length);for(i=0;i<n;i++)if(t.charAt(i)!==e.charAt(i)){i--;break}return i<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(i)&&"/"===e.charAt(i)||(i=t.substring(0,i).lastIndexOf("/")),t.substring(0,i+1))},r.Pw=function(t,e,i){i||(i={});var n=i.start||r.IR.start,o=i.end||r.IR.end,s=i.trim||r.IR.trim,a=i.SR||r.IR.SR,u=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var h=n.exec(t);if(!h)break;var c=h.index;if(i.Aw){var l=t.slice(Math.max(c-3,0),c);if(l&&u.test(l))continue}for(var f=c+t.slice(c).search(o),p=t.slice(c,f),d=-1;;){var g=a.exec(p);if(!g)break;var v=g.index+g[0].length;d=Math.max(d,v)}if(!((p=d>-1?p.slice(0,d)+p.slice(d).replace(s,""):p.replace(s,"")).length<=h[0].length||i.Ow&&i.Ow.test(p))){var y=e(p,c,f=c+p.length,t);void 0!==y?(y=String(y),t=t.slice(0,c)+y+t.slice(f),n.lastIndex=c+y.length):n.lastIndex=f}}return n.lastIndex=0,t},r.Nw=function(e){if(e.match(r.OR)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.Dw(e).match(r.OR))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},r.wo=function(t){if(t){var e={lR:this.wo()};return n.kw&&"function"==typeof n.kw.wo&&(e.kw=n.kw.wo()),n.Lw&&"function"==typeof n.Lw.wo&&(e.Lw=n.Lw.wo()),n.Mw&&"function"==typeof n.Mw.wo&&(e.Mw=n.Mw.wo()),e}return n.lR===this&&(n.lR=v),this},y.Xg=function(t){return!0===t?this.Fw=!0:(void 0===t||this.Fw)&&(this.Uw=r.Xg(this.uR),this.Fw=!1),this},y.clone=function(){return new r(this)},y.valueOf=y.toString=function(){return this.Xg(!1).Uw},y.protocol=d("protocol"),y.username=d("username"),y.password=d("password"),y.hostname=d("hostname"),y.port=d("port"),y.query=g("query","?"),y.pR=g("fragment","#"),y.search=function(t,e){var i=this.query(t,e);return"string"==typeof i&&i.length?"?"+i:i},y.hash=function(t,e){var i=this.pR(t,e);return"string"==typeof i&&i.length?"#"+i:i},y.pathname=function(t,e){if(void 0===t||!0===t){var i=this.uR.path||(this.uR.hostname?"/":"");return t?(this.uR.urn?r.cw:r.hw)(i):i}return this.uR.urn?this.uR.path=t?r.lw(t):"":this.uR.path=t?r.uw(t):"/",this.Xg(!e),this},y.path=y.pathname,y.href=function(t,e){var i;if(void 0===t)return this.toString();this.Uw="",this.uR=r.uR();var n=t instanceof r,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName&&(t=t[r.xR(t)]||"",o=!1),!n&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this.uR=r.parse(String(t),this.uR);else{if(!n&&!o)throw new TypeError("invalid input");var s=n?t.uR:t;for(i in s)m.call(this.uR,i)&&(this.uR[i]=s[i])}return this.Xg(!e),this},y.is=function(t){var e=!1,n=!1,o=!1,s=!1,a=!1,u=!1,h=!1,c=!this.uR.urn;switch(this.uR.hostname&&(c=!1,n=r.yR.test(this.uR.hostname),o=r.TR.test(this.uR.hostname),a=(s=!(e=n||o))&&i&&i.has(this.uR.hostname),u=s&&r.ER.test(this.uR.hostname),h=s&&r.vR.test(this.uR.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return u;case"url":return!this.uR.urn;case"urn":return!!this.uR.urn;case"punycode":return h}return null};var S=y.protocol,I=y.port,_=y.hostname;y.protocol=function(t,e){if(void 0!==t&&t&&!(t=t.replace(/:(\/\/)?$/,"")).match(r.gR))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return S.call(this,t,e)},y.scheme=y.protocol,y.port=function(t,e){if(this.uR.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return I.call(this,t,e)},y.hostname=function(t,e){if(this.uR.urn)return void 0===t?"":this;if(void 0!==t){var i={};if("/"!==r.fw(t,i))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=i.hostname}return _.call(this,t,e)},y.origin=function(t,e){if(this.uR.urn)return void 0===t?"":this;if(void 0===t){var i=this.protocol();return this.Bw()?(i?i+"://":"")+this.Bw():""}var n=r(t);return this.protocol(n.protocol()).Bw(n.Bw()).Xg(!e),this},y.host=function(t,e){if(this.uR.urn)return void 0===t?"":this;if(void 0===t)return this.uR.hostname?r.yw(this.uR):"";if("/"!==r.fw(t,this.uR))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.Xg(!e),this},y.Bw=function(t,e){if(this.uR.urn)return void 0===t?"":this;if(void 0===t)return this.uR.hostname?r.vw(this.uR):"";if("/"!==r.dw(t,this.uR))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.Xg(!e),this},y.Hw=function(t,e){if(this.uR.urn)return void 0===t?"":this;if(void 0===t){var i=r.Tw(this.uR);return i?i.substring(0,i.length-1):i}return"@"!==t[t.length-1]&&(t+="@"),r.gw(t,this.uR),this.Xg(!e),this},y.xw=function(t,e){var i;return void 0===t?this.path()+this.search()+this.hash():(i=r.parse(t),this.uR.path=i.path,this.uR.query=i.query,this.uR.pR=i.pR,this.Xg(!e),this)},y.qw=function(t,e){if(this.uR.urn)return void 0===t?"":this;if(void 0===t){if(!this.uR.hostname||this.is("IP"))return"";var i=this.uR.hostname.length-this.domain().length-1;return this.uR.hostname.substring(0,i)||""}var n=this.uR.hostname.length-this.domain().length,s=this.uR.hostname.substring(0,n),a=new RegExp("^"+o(s));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&r.Nw(t),this.uR.hostname=this.uR.hostname.replace(a,t),this.Xg(!e),this},y.domain=function(t,e){if(this.uR.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this.uR.hostname||this.is("IP"))return"";var i=this.uR.hostname.match(/\./g);if(i&&i.length<2)return this.uR.hostname;var n=this.uR.hostname.length-this.Gw(e).length-1;return n=this.uR.hostname.lastIndexOf(".",n-1)+1,this.uR.hostname.substring(n)||""}if(!t)throw new TypeError("cannot set domain empty");if(r.Nw(t),!this.uR.hostname||this.is("IP"))this.uR.hostname=t;else{var s=new RegExp(o(this.domain())+"$");this.uR.hostname=this.uR.hostname.replace(s,t)}return this.Xg(!e),this},y.Gw=function(t,e){if(this.uR.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this.uR.hostname||this.is("IP"))return"";var n=this.uR.hostname.lastIndexOf("."),r=this.uR.hostname.substring(n+1);return!0!==e&&i&&i.list[r.toLowerCase()]&&i.get(this.uR.hostname)||r}var s;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!i||!i.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');s=new RegExp(o(this.Gw())+"$"),this.uR.hostname=this.uR.hostname.replace(s,t)}else{if(!this.uR.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(o(this.Gw())+"$"),this.uR.hostname=this.uR.hostname.replace(s,t)}return this.Xg(!e),this},y.Vw=function(t,e){if(this.uR.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this.uR.path&&!this.uR.hostname)return"";if("/"===this.uR.path)return"/";var i=this.uR.path.length-this.filename().length-1,n=this.uR.path.substring(0,i)||(this.uR.hostname?"/":"");return t?r.hw(n):n}var s=this.uR.path.length-this.filename().length,a=this.uR.path.substring(0,s),u=new RegExp("^"+o(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=r.uw(t),this.uR.path=this.uR.path.replace(u,t),this.Xg(!e),this},y.filename=function(t,e){if(this.uR.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this.uR.path||"/"===this.uR.path)return"";var i=this.uR.path.lastIndexOf("/"),n=this.uR.path.substring(i+1);return t?r.jw(n):n}var s=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(s=!0);var a=new RegExp(o(this.filename())+"$");return t=r.uw(t),this.uR.path=this.uR.path.replace(a,t),s?this.Qw(e):this.Xg(!e),this},y.suffix=function(t,e){if(this.uR.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this.uR.path||"/"===this.uR.path)return"";var i,n,s=this.filename(),a=s.lastIndexOf(".");return-1===a?"":(i=s.substring(a+1),n=/^[a-z0-9%]+$/i.test(i)?i:"",t?r.jw(n):n)}"."===t.charAt(0)&&(t=t.substring(1));var u,h=this.suffix();if(h)u=t?new RegExp(o(h)+"$"):new RegExp(o("."+h)+"$");else{if(!t)return this;this.uR.path+="."+r.uw(t)}return u&&(t=r.uw(t),this.uR.path=this.uR.path.replace(u,t)),this.Xg(!e),this},y.Cw=function(t,e,i){var n=this.uR.urn?":":"/",r=this.path(),o="/"===r.substring(0,1),s=r.split(n);if(void 0!==t&&"number"!=typeof t&&(i=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&s.shift(),t<0&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(a(e)){s=[];for(var u=0,h=e.length;u<h;u++)(e[u].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(l(e[u])))}else(e||"string"==typeof e)&&(e=l(e),""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e?s[t]=l(e):s.splice(t,1);return o&&s.unshift(""),this.path(s.join(n),i)},y.Kw=function(t,e,i){var n,o,s;if("number"!=typeof t&&(i=e,e=t,t=void 0),void 0===e){if(a(n=this.Cw(t,e,i)))for(o=0,s=n.length;o<s;o++)n[o]=r.decode(n[o]);else n=void 0!==n?r.decode(n):void 0;return n}if(a(e))for(o=0,s=e.length;o<s;o++)e[o]=r.encode(e[o]);else e="string"==typeof e||e instanceof String?r.encode(e):e;return this.Cw(t,e,i)};var R=y.query;return y.query=function(t,e){if(!0===t)return r.Ew(this.uR.query,this.uR.fR);if("function"==typeof t){var i=r.Ew(this.uR.query,this.uR.fR),n=t.call(this,i);return this.uR.query=r.mw(n||i,this.uR.dR,this.uR.fR),this.Xg(!e),this}return void 0!==t&&"string"!=typeof t?(this.uR.query=r.mw(t,this.uR.dR,this.uR.fR),this.Xg(!e),this):R.call(this,t,e)},y.Yw=function(t,e,i){var n=r.Ew(this.uR.query,this.uR.fR);if("string"==typeof t||t instanceof String)n[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)m.call(t,o)&&(n[o]=t[o])}return this.uR.query=r.mw(n,this.uR.dR,this.uR.fR),"string"!=typeof t&&(i=e),this.Xg(!i),this},y.Sw=function(t,e,i){var n=r.Ew(this.uR.query,this.uR.fR);return r.Sw(n,t,void 0===e?null:e),this.uR.query=r.mw(n,this.uR.dR,this.uR.fR),"string"!=typeof t&&(i=e),this.Xg(!i),this},y.Rw=function(t,e,i){var n=r.Ew(this.uR.query,this.uR.fR);return r.Rw(n,t,e),this.uR.query=r.mw(n,this.uR.dR,this.uR.fR),"string"!=typeof t&&(i=e),this.Xg(!i),this},y.ww=function(t,e,i){var n=r.Ew(this.uR.query,this.uR.fR);return r.ww(n,t,e,i)},y.Ww=y.Yw,y.zw=y.Sw,y.Jw=y.Rw,y.Xw=y.ww,y.normalize=function(){return this.uR.urn?this.eb(!1).Qw(!1).$w(!1).Zw(!1).Xg():this.eb(!1).rb(!1).tb(!1).Qw(!1).$w(!1).Zw(!1).Xg()},y.eb=function(t){return"string"==typeof this.uR.protocol&&(this.uR.protocol=this.uR.protocol.toLowerCase(),this.Xg(!t)),this},y.rb=function(i){return this.uR.hostname&&(this.is("IDN")&&t?this.uR.hostname=t.Dw(this.uR.hostname):this.is("IPv6")&&e&&(this.uR.hostname=e.ib(this.uR.hostname)),this.uR.hostname=this.uR.hostname.toLowerCase(),this.Xg(!i)),this},y.tb=function(t){return"string"==typeof this.uR.protocol&&this.uR.port===r.RR[this.uR.protocol]&&(this.uR.port=null,this.Xg(!t)),this},y.Qw=function(t){var e=this.uR.path;if(!e)return this;if(this.uR.urn)return this.uR.path=r.lw(this.uR.path),this.Xg(!t),this;if("/"===this.uR.path)return this;var i,n,o,s="";for("/"!==(e=r.uw(e)).charAt(0)&&(i=!0,e="/"+e),"/.."!==e.slice(-3)&&"/."!==e.slice(-2)||(e+="/"),e=e.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),i&&(s=e.substring(1).match(/^(\.\.\/)+/)||"")&&(s=s[0]);-1!==(n=e.search(/\/\.\.(\/|$)/));)0!==n?(-1===(o=e.substring(0,n).lastIndexOf("/"))&&(o=n),e=e.substring(0,o)+e.substring(n+3)):e=e.substring(3);return i&&this.is("relative")&&(e=s+e.substring(1)),this.uR.path=e,this.Xg(!t),this},y.nb=y.Qw,y.$w=function(t){return"string"==typeof this.uR.query&&(this.uR.query.length?this.query(r.Ew(this.uR.query,this.uR.fR)):this.uR.query=null,this.Xg(!t)),this},y.Zw=function(t){return this.uR.pR||(this.uR.pR=null,this.Xg(!t)),this},y.sb=y.$w,y.ob=y.Zw,y.qR=function(){var t=r.encode,e=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=t,r.decode=e}return this},y.GR=function(){var t=r.encode,e=r.decode;r.encode=p,r.decode=unescape;try{this.normalize()}finally{r.encode=t,r.decode=e}return this},y.ab=function(){var e=this.clone();e.username("").password("").normalize();var i="";if(e.uR.protocol&&(i+=e.uR.protocol+"://"),e.uR.hostname&&(e.is("punycode")&&t?(i+=t.hb(e.uR.hostname),e.uR.port&&(i+=":"+e.uR.port)):i+=e.host()),e.uR.hostname&&e.uR.path&&"/"!==e.uR.path.charAt(0)&&(i+="/"),i+=e.path(!0),e.uR.query){for(var n="",o=0,s=e.uR.query.split("&"),a=s.length;o<a;o++){var u=(s[o]||"").split("=");n+="&"+r.aw(u[0],this.uR.fR).replace(/&/g,"%26"),void 0!==u[1]&&(n+="="+r.aw(u[1],this.uR.fR).replace(/&/g,"%26"))}i+="?"+n.substring(1)}return i+r.aw(e.hash(),!0)},y.Ph=function(t){var e,i,n,o=this.clone(),s=["protocol","username","password","hostname","port"];if(this.uR.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof r||(t=new r(t)),o.uR.protocol)return o;if(o.uR.protocol=t.uR.protocol,this.uR.hostname)return o;for(i=0;n=s[i];i++)o.uR[n]=t.uR[n];return o.uR.path?(".."===o.uR.path.substring(-2)&&(o.uR.path+="/"),"/"!==o.path().charAt(0)&&(e=(e=t.Vw())||(0===t.path().indexOf("/")?"/":""),o.uR.path=(e?e+"/":"")+o.uR.path,o.Qw())):(o.uR.path=t.uR.path,o.uR.query||(o.uR.query=t.uR.query)),o.Xg(),o},y.cb=function(t){var e,i,n,o,s,a=this.clone().normalize();if(a.uR.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new r(t).normalize(),e=a.uR,i=t.uR,o=a.path(),s=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===i.protocol&&(e.protocol=null),e.username!==i.username||e.password!==i.password)return a.Xg();if(null!==e.protocol||null!==e.username||null!==e.password)return a.Xg();if(e.hostname!==i.hostname||e.port!==i.port)return a.Xg();if(e.hostname=null,e.port=null,o===s)return e.path="",a.Xg();if(!(n=r._w(o,s)))return a.Xg();var u=i.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(n.length)||"./",a.Xg()},y.cs=function(t){var e,i,n,o,s,u=this.clone(),h=new r(t),l={};if(u.normalize(),h.normalize(),u.toString()===h.toString())return!0;if(e=u.query(),i=h.query(),u.query(""),h.query(""),u.toString()!==h.toString())return!1;if(e.length!==i.length)return!1;for(n in o=r.Ew(e,this.uR.fR),s=r.Ew(i,this.uR.fR),o)if(m.call(o,n)){if(a(o[n])){if(!c(o[n],s[n]))return!1}else if(o[n]!==s[n])return!1;l[n]=!0}for(n in s)if(m.call(s,n)&&!l[n])return!1;return!0},y.dR=function(t){return this.uR.dR=!!t,this},y.fR=function(t){return this.uR.fR=!!t,this},r})},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(73),o=function(t){function e(i){var n=t.call(this,i)||this;return n.DONE=4,n.LOADING=3,n.HEADERS_RECEIVED=2,n.OPENED=1,n.UNSENT=0,n.internal=!1,n.id=e.Ag++,n}return n(e,t),e.prototype.send=function(){if(this.readyState!==this.OPENED)throw new Error("The object's state must be OPENED.");if(!this.sessionId){var t=Object.keys(e.ub);t.length>0&&(this.sessionId=e.ub[t[0]])}r.lb.Api().request(this,this.sessionId)},e.prototype.abort=function(){r.lb.Api().abort(this,this.sessionId)},e}(i(71).pb);o.ub={},o.Ag=0,e.HiveRequest=o},function(t,e,i){"use strict";var n=i(0),r=i(8),o=i(6).he.dh,s=function(){function t(){}return t.Reporting=function(){return t.app="STATS",n.Framework.resolve(r.pc.hc)},t.sp=function(){return this.app},t.getVersion=function(){return this.version},t}();s.version=o,e.Hive=s},function(module,exports,__webpack_require__){var Thrift={fb:"0.9.2",Type:{STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17},gb:{CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},Eb:function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e},vb:function(t,e,i){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.name=i||""},yb:function(t){this.message=t}};Thrift.vb(Thrift.yb,Error,"TException"),Thrift.yb.prototype.Tb=function(){return this.message},Thrift.mb={Ib:0,Sb:1,Rb:2,wb:3,bb:4,Cb:5,_b:6,Pb:7,Ab:8,Ob:9,Nb:10},Thrift.Db=function(t,e){this.message=t,this.code="number"==typeof e?e:0},Thrift.vb(Thrift.Db,Thrift.yb,"TApplicationException"),Thrift.Db.prototype.read=function(t){for(;;){var e=t.kb();if(e.ftype==Thrift.Type.STOP)break;switch(e.fid){case 1:e.ftype==Thrift.Type.STRING?(e=t.Lb(),this.message=e.value):e=t.Mb(e.ftype);break;case 2:e.ftype==Thrift.Type.I32?(e=t.Fb(),this.code=e.value):e=t.Mb(e.ftype);break;default:e=t.Mb(e.ftype)}t.Ub()}t.Bb()},Thrift.Db.prototype.write=function(t){t.Hb("TApplicationException"),this.message&&(t.xb("message",Thrift.Type.STRING,1),t.qb(this.Tb()),t.Gb()),this.code&&(t.xb("type",Thrift.Type.I32,2),t.Vb(this.code),t.Gb()),t.jb(),t.Qb()},Thrift.Db.prototype.Kb=function(){return this.code},Thrift.Fa=Thrift.Yb=function(t,e){this.url=t,this.Wb=0,this.zb=0,this.Jb=e&&e.Jb,this.Xb="",this.Zb=""},Thrift.Yb.prototype={$b:function(){try{return new XMLHttpRequest}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}throw"Your browser doesn't support XHR."},flush:function(t,e){var i=this;if(t&&!e||void 0===this.url||""===this.url)return this.Xb;var n=this.$b();if(n.overrideMimeType&&n.overrideMimeType("application/json"),e&&(n.onreadystatechange=function(){var t=e;return function(){4==this.readyState&&200==this.status&&(i.eC(this.responseText),t())}}()),n.open("POST",this.url,!!t),n.send(this.Xb),!t||!e){if(4!=n.readyState)throw"encountered an unknown ajax ready state: "+n.readyState;if(200!=n.status)throw"encountered a unknown request status: "+n.status;this.Zb=n.responseText,this.tC=this.Zb.length,this.Wb=this.Zb.length,this.zb=0}},rC:function(t,e,i,n){if("undefined"==typeof jQuery||void 0===jQuery.iC)throw"Thrift.js requires jQuery 1.5+ to use asynchronous requests";var r=this;return jQuery.nC({url:this.url,data:e,type:"POST",sC:!1,contentType:"application/json",oC:"text thrift",aC:{hC:function(e){return r.eC(e),n.call(t)}},context:t,success:jQuery.cC(i).pop()})},eC:function(t){this.Zb=t,this.tC=this.Zb.length,this.Wb=this.Zb.length,this.zb=0},isOpen:function(){return!0},open:function(){},close:function(){},read:function(t){var e=this.Wb-this.zb;if(0===e)return"";var i=t;e<t&&(i=e);var n=this.uC.substr(this.zb,i);return this.zb+=i,n},lC:function(){return this.Zb},write:function(t){this.Xb=t},pC:function(){return this.Xb}},Thrift.dC=function(t){this.fC(t)},Thrift.dC.prototype={fC:function(t){this.url=t,this.gC=null,this.callbacks=[],this.EC=[],this.Xb="",this.Zb="",this.vC=0,this.yC=0},flush:function(t,e){var i=this;this.isOpen()?(this.gC.send(this.Xb),this.callbacks.push(function(){var t=e;return function(e){i.eC(e),t()}}())):this.EC.push({TC:this.Xb,mC:e})},IC:function(){var t=this;this.EC.length>0&&(this.EC.forEach(function(e){var i;this.gC.send(e.TC),this.callbacks.push((i=e.mC,function(e){t.eC(e),i()}))}),this.EC=[])},SC:function(t){this.fC(this.url)},RC:function(t){this.callbacks.length&&this.callbacks.shift()(t.data)},wC:function(t){console.log("Thrift WebSocket Error: "+t.toString()),this.gC.close()},eC:function(t){this.Zb=t,this.tC=this.Zb.length,this.Wb=this.Zb.length,this.zb=0},isOpen:function(){return this.gC&&this.gC.readyState==this.gC.OPEN},open:function(){this.gC&&this.gC.readyState!=this.gC.CLOSED||(this.gC=new WebSocket(this.url),this.gC.onopen=this.IC.bind(this),this.gC.onmessage=this.RC.bind(this),this.gC.onerror=this.wC.bind(this),this.gC.onclose=this.SC.bind(this))},close:function(){this.gC.close()},read:function(t){var e=this.Wb-this.zb;if(0===e)return"";var i=t;e<t&&(i=e);var n=this.uC.substr(this.zb,i);return this.zb+=i,n},lC:function(){return this.Zb},write:function(t){this.Xb=t},pC:function(){return this.Xb}},Thrift.bC=Thrift.CC=function(t){this.yg=t},Thrift.CC.Type={},Thrift.CC.Type[Thrift.Type.BOOL]='"tf"',Thrift.CC.Type[Thrift.Type.BYTE]='"i8"',Thrift.CC.Type[Thrift.Type.I16]='"i16"',Thrift.CC.Type[Thrift.Type.I32]='"i32"',Thrift.CC.Type[Thrift.Type.I64]='"i64"',Thrift.CC.Type[Thrift.Type.DOUBLE]='"dbl"',Thrift.CC.Type[Thrift.Type.STRUCT]='"rec"',Thrift.CC.Type[Thrift.Type.STRING]='"str"',Thrift.CC.Type[Thrift.Type.MAP]='"map"',Thrift.CC.Type[Thrift.Type.LIST]='"lst"',Thrift.CC.Type[Thrift.Type.SET]='"set"',Thrift.CC._C={},Thrift.CC._C.tf=Thrift.Type.BOOL,Thrift.CC._C.i8=Thrift.Type.BYTE,Thrift.CC._C.i16=Thrift.Type.I16,Thrift.CC._C.i32=Thrift.Type.I32,Thrift.CC._C.i64=Thrift.Type.I64,Thrift.CC._C.dbl=Thrift.Type.DOUBLE,Thrift.CC._C.rec=Thrift.Type.STRUCT,Thrift.CC._C.str=Thrift.Type.STRING,Thrift.CC._C.map=Thrift.Type.MAP,Thrift.CC._C.lst=Thrift.Type.LIST,Thrift.CC._C.set=Thrift.Type.SET,Thrift.CC.fb=1,Thrift.CC.prototype={PC:function(){return this.yg},AC:function(t,e,i){this.OC=[],this.NC=[],this.OC.push([Thrift.CC.fb,'"'+t+'"',e,i])},DC:function(){var t=this.OC.pop();this.kC=this.OC.pop(),this.kC.push(t),this.LC="["+this.kC.join(",")+"]",this.yg.write(this.LC)},Hb:function(t){this.NC.push(this.OC.length),this.OC.push({})},Qb:function(){var t=this.NC.pop(),e=this.OC[t],i="{",n=!0;for(var r in e)n?n=!1:i+=",",i+=r+":"+e[r];i+="}",this.OC[t]=i},xb:function(t,e,i){this.NC.push(this.OC.length),this.OC.push({MC:'"'+i+'"',FC:Thrift.CC.Type[e]})},Gb:function(){var t=this.OC.pop(),e=this.OC.pop();this.OC[this.OC.length-1][e.MC]="{"+e.FC+":"+t+"}",this.NC.pop()},jb:function(){},UC:function(t,e,i){this.NC.push(this.OC.length),this.OC.push([Thrift.CC.Type[t],Thrift.CC.Type[e],0])},BC:function(){var t=this.NC.pop();if(t!=this.OC.length){(this.OC.length-t-1)%2!=0&&this.OC.push("");var e=(this.OC.length-t-1)/2;this.OC[t][this.OC[t].length-1]=e;for(var i="}",n=!0;this.OC.length>t+1;){var r=this.OC.pop(),o=this.OC.pop();n?n=!1:i=","+i,isNaN(o)||(o='"'+o+'"'),i=o+":"+r+i}i="{"+i,this.OC[t].push(i),this.OC[t]="["+this.OC[t].join(",")+"]"}},HC:function(t,e){this.NC.push(this.OC.length),this.OC.push([Thrift.CC.Type[t],e])},xC:function(){for(var t=this.NC.pop();this.OC.length>t+1;){var e=this.OC[t+1];this.OC.splice(t+1,1),this.OC[t].push(e)}this.OC[t]="["+this.OC[t].join(",")+"]"},qC:function(t,e){this.NC.push(this.OC.length),this.OC.push([Thrift.CC.Type[t],e])},GC:function(){for(var t=this.NC.pop();this.OC.length>t+1;){var e=this.OC[t+1];this.OC.splice(t+1,1),this.OC[t].push(e)}this.OC[t]="["+this.OC[t].join(",")+"]"},VC:function(t){this.OC.push(t?1:0)},jC:function(t){this.OC.push(t)},QC:function(t){this.OC.push(t)},Vb:function(t){this.OC.push(t)},KC:function(t){this.OC.push(t)},YC:function(t){this.OC.push(t)},qb:function(t){if(null===t)this.OC.push(null);else{for(var e="",i=0;i<t.length;i++){var n=t.charAt(i);e+='"'===n?'\\"':"\\"===n?"\\\\":"\b"===n?"\\b":"\f"===n?"\\f":"\n"===n?"\\n":"\r"===n?"\\r":"\t"===n?"\\t":n}this.OC.push('"'+e+'"')}},WC:function(t){this.qb(t)},zC:function(){this.JC=[],this.zb=[],"undefined"!=typeof JSON&&"function"==typeof JSON.parse?this.XC=JSON.parse(this.yg.lC()):"undefined"!=typeof jQuery?this.XC=jQuery.ZC(this.yg.lC()):this.XC=eval(this.yg.lC());var r={},version=this.XC.shift();if(version!=Thrift.CC.fb)throw"Wrong thrift protocol version: "+version;return r.fname=this.XC.shift(),r.$C=this.XC.shift(),r.e_=this.XC.shift(),this.JC.push(this.XC.shift()),r},t_:function(){},r_:function(t){var e={fname:""};return this.JC[this.JC.length-1]instanceof Array&&this.JC.push(this.JC[this.JC.length-1].shift()),e},Bb:function(){this.JC[this.JC.length-2]instanceof Array&&this.JC.pop()},kb:function(){var t={},e=-1,i=Thrift.Type.STOP;for(var n in this.JC[this.JC.length-1])if(null!==n){e=parseInt(n,10),this.zb.push(this.JC.length);var r=this.JC[this.JC.length-1][e];delete this.JC[this.JC.length-1][e],this.JC.push(r);break}if(-1!=e)for(var o in this.JC[this.JC.length-1])null!==Thrift.CC._C[o]&&(i=Thrift.CC._C[o],this.JC[this.JC.length-1]=this.JC[this.JC.length-1][o]);return t.fname="",t.ftype=i,t.fid=e,t},Ub:function(){for(var t=this.zb.pop();this.JC.length>t;)this.JC.pop()},i_:function(){var t=this.JC.pop(),e=t.shift();e instanceof Array&&(this.JC.push(t),e=(t=e).shift());var i={};return i.n_=Thrift.CC._C[e],i.s_=Thrift.CC._C[t.shift()],i.size=t.shift(),this.zb.push(this.JC.length),this.JC.push(t.shift()),i},o_:function(){this.Ub()},a_:function(){var t=this.JC[this.JC.length-1],e={};return e.h_=Thrift.CC._C[t.shift()],e.size=t.shift(),this.zb.push(this.JC.length),this.JC.push(t),e},c_:function(){this.Ub()},u_:function(t,e){return this.a_(t,e)},l_:function(){return this.c_()},p_:function(){var t=this.Fb();return null!==t&&"1"==t.value?t.value=!0:t.value=!1,t},d_:function(){return this.Fb()},f_:function(){return this.Fb()},Fb:function(t){void 0===t&&(t=this.JC[this.JC.length-1]);var e={};if(t instanceof Array)0===t.length?e.value=void 0:e.value=t.shift();else if(t instanceof Object){for(var i in t)if(null!==i){this.JC.push(t[i]),delete t[i],e.value=i;break}}else e.value=t,this.JC.pop();return e},g_:function(){return this.Fb()},E_:function(){return this.Fb()},Lb:function(){return this.Fb()},v_:function(){return this.Lb()},Mb:function(t){var e,i;switch(t){case Thrift.Type.STOP:return null;case Thrift.Type.BOOL:return this.p_();case Thrift.Type.BYTE:return this.d_();case Thrift.Type.I16:return this.f_();case Thrift.Type.I32:return this.Fb();case Thrift.Type.I64:return this.g_();case Thrift.Type.DOUBLE:return this.E_();case Thrift.Type.STRING:return this.Lb();case Thrift.Type.STRUCT:for(this.r_();(e=this.kb()).ftype!=Thrift.Type.STOP;)this.Mb(e.ftype),this.Ub();return this.Bb(),null;case Thrift.Type.MAP:for(e=this.i_(),i=0;i<e.size;i++)i>0&&this.JC.length>this.zb[this.zb.length-1]+1&&this.JC.pop(),this.Mb(e.n_),this.Mb(e.s_);return this.o_(),null;case Thrift.Type.SET:for(e=this.u_(),i=0;i<e.size;i++)this.Mb(e.h_);return this.l_(),null;case Thrift.Type.LIST:for(e=this.a_(),i=0;i<e.size;i++)this.Mb(e.h_);return this.c_(),null}}},Thrift.y_=function(t,e,i,n){Thrift.CC.call(this,e,i,n),this.T_=t},Thrift.vb(Thrift.y_,Thrift.CC,"multiplexProtocol"),Thrift.y_.prototype.AC=function(t,e,i){e===Thrift.gb.CALL||e===Thrift.gb.ONEWAY?Thrift.CC.prototype.AC.call(this,this.T_+":"+t,e,i):Thrift.CC.prototype.AC.call(this,t,e,i)},Thrift.m_=function(){this.I_=0},Thrift.m_.prototype.S_=function(t,e,i){e.ql&&(e=e.ql);var n=this;return e.prototype.R_=function(){return n.I_+=1,n.I_},new e(new Thrift.y_(t,i))},module.i=Thrift},function(t,e,i){"use strict";var n=i(9),r=i(28).cg,o=function(){function t(t,e,i,n,o,s,a,u){this.contextId=u,this.url=t,this.w_=i,this.b_=e,this.C_=n,this.duration=o,this.bitrate=s,this.__=a;var h=(this.contextId?this.contextId:this.url).replace(/http(s)?:\/\//,""),c=r.oT(h).toString(r.Uy.By);this.P_=c+"-"+this.C_+"-"+this.bitrate}return t.prototype.Xf=function(){return this.b_},t.prototype.A_=function(){return this.C_},t.prototype.getDuration=function(){return this.duration},t.prototype.getBitrate=function(){return this.bitrate},t.prototype.ig=function(){return this.__},t.prototype.O_=function(){return this.w_},t.prototype.Zf=function(){return this.P_},t.prototype.tg=function(){return this.url},t.prototype.toString=function(){return n.vc[this.Xf()]+"-"+this.Zf()},t}();e.N_=o},function(t,e,n){(function(t){var r,o;
/**
 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
 * This version of ByteBuffer.js uses an ArrayBuffer as its backing buffer which is accessed through a DataView and is
 * compatible with modern browsers.
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ByteBuffer.js for details
 */!function(s){"use strict";function a(t){function e(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function n(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+a.apply(String,t);t.length+arguments.length>1024&&(e.push(a.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}var r=function(t,e,i){if(void 0===t&&(t=r.D_),void 0===e&&(e=r.k_),void 0===i&&(i=r.L_),!i){if((t|=0)<0)throw RangeError("Illegal capacity");e=!!e,i=!!i}this.buffer=0===t?s:new ArrayBuffer(t),this.view=0===t?null:new DataView(this.buffer),this.offset=0,this.M_=-1,this.F_=t,this.U_=void 0!==e&&!!e,this.B_=!!i};r.VERSION="3.5.5",r.H_=!0,r.x_=!1,r.D_=16,r.k_=r.x_,r.L_=!1,r.q_=t||null;var o=r.prototype,s=new ArrayBuffer(0),a=String.fromCharCode;r.G_=function(t,e,i){return new r(t,e,i)},r.concat=function(t,e,i,n){"boolean"!=typeof e&&"string"==typeof e||(n=i,i=e,e=void 0);for(var o,s=0,a=0,u=t.length;a<u;++a)r.V_(t[a])||(t[a]=r.wrap(t[a],e)),(o=t[a].F_-t[a].offset)>0&&(s+=o);if(0===s)return new r(0,i,n);var h,c=new r(s,i,n),l=new Uint8Array(c.buffer);for(a=0;a<u;)(o=(h=t[a++]).F_-h.offset)<=0||(l.set(new Uint8Array(h.buffer).subarray(h.offset,h.F_),c.offset),c.offset+=o);return c.F_=c.offset,c.offset=0,c},r.V_=function(t){return!0===(t&&t instanceof r)},r.type=function(){return ArrayBuffer},r.wrap=function(t,e,n,s){if("string"!=typeof e&&(s=n,n=e,e=void 0),"string"==typeof t)switch(void 0===e&&(e="utf8"),e){case"base64":return r.j_(t,n);case"hex":return r.Q_(t,n);case"binary":return r.K_(t,n);case"utf8":return r.Y_(t,n);case"debug":return r.W_(t,n);default:throw Error("Unsupported encoding: "+e)}if(null===t||"object"!=typeof t)throw TypeError("Illegal buffer");var a;if(r.V_(t))return(a=o.clone.call(t)).M_=-1,a;if(t instanceof Uint8Array)a=new r(0,n,s),t.length>0&&(a.buffer=t.buffer,a.offset=t.byteOffset,a.F_=t.byteOffset+t.length,a.view=t.length>0?new DataView(t.buffer):null);else if(t instanceof ArrayBuffer)a=new r(0,n,s),t.byteLength>0&&(a.buffer=t,a.offset=0,a.F_=t.byteLength,a.view=t.byteLength>0?new DataView(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");for((a=new r(t.length,n,s)).F_=t.length,i=0;i<t.length;++i)a.view.setUint8(i,t[i])}return a},o.z_=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view.setInt8(e,t),i&&(this.offset+=1),this},o.jC=o.z_,o.J_=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view.getInt8(t);return e&&(this.offset+=1),i},o.d_=o.J_,o.X_=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view.setUint8(e,t),i&&(this.offset+=1),this},o.Z_=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view.getUint8(t);return e&&(this.offset+=1),i},o.eP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.view.setInt16(e,t,this.U_),i&&(this.offset+=2),this},o.tP=o.eP,o.rP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=this.view.getInt16(t,this.U_);return e&&(this.offset+=2),i},o.iP=o.rP,o.nP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.view.setUint16(e,t,this.U_),i&&(this.offset+=2),this},o.sP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=this.view.getUint16(t,this.U_);return e&&(this.offset+=2),i},o.oP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setInt32(e,t,this.U_),i&&(this.offset+=4),this},o.Bg=o.oP,o.aP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getInt32(t,this.U_);return e&&(this.offset+=4),i},o.Qg=o.aP,o.hP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setUint32(e,t,this.U_),i&&(this.offset+=4),this},o.cP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getUint32(t,this.U_);return e&&(this.offset+=4),i},t&&(o.uP=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"==typeof e)e=t.DE(e);else if("string"==typeof e)e=t.kE(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.DE(e):"string"==typeof e&&(e=t.kE(e)),i+=8;var r=this.buffer.byteLength;return i>r&&this.resize((r*=2)>i?r:i),i-=8,this.U_?(this.view.setInt32(i,e.low,!0),this.view.setInt32(i+4,e.high,!0)):(this.view.setInt32(i,e.high,!1),this.view.setInt32(i+4,e.low,!1)),n&&(this.offset+=8),this},o.lP=o.uP,o.pP=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=this.U_?new t(this.view.getInt32(e,!0),this.view.getInt32(e+4,!0),!1):new t(this.view.getInt32(e+4,!1),this.view.getInt32(e,!1),!1);return i&&(this.offset+=8),n},o.dP=o.pP,o.fP=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"==typeof e)e=t.DE(e);else if("string"==typeof e)e=t.kE(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.DE(e):"string"==typeof e&&(e=t.kE(e)),i+=8;var r=this.buffer.byteLength;return i>r&&this.resize((r*=2)>i?r:i),i-=8,this.U_?(this.view.setInt32(i,e.low,!0),this.view.setInt32(i+4,e.high,!0)):(this.view.setInt32(i,e.high,!1),this.view.setInt32(i+4,e.low,!1)),n&&(this.offset+=8),this},o.gP=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=this.U_?new t(this.view.getInt32(e,!0),this.view.getInt32(e+4,!0),!0):new t(this.view.getInt32(e+4,!1),this.view.getInt32(e,!1),!0);return i&&(this.offset+=8),n}),o.EP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setFloat32(e,t,this.U_),i&&(this.offset+=4),this},o.vP=o.EP,o.yP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getFloat32(t,this.U_);return e&&(this.offset+=4),i},o.TP=o.yP,o.mP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=8,this.view.setFloat64(e,t,this.U_),i&&(this.offset+=8),this},o.YC=o.mP,o.IP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.view.getFloat64(t,this.U_);return e&&(this.offset+=8),i},o.E_=o.IP,r.SP=5,r.RP=function(t){return(t>>>=0)<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},r.wP=function(t){return((t|=0)<<1^t>>31)>>>0},r.bP=function(t){return t>>>1^-(1&t)|0},o.CP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,o=r.RP(t);e+=o;var s=this.buffer.byteLength;return e>s&&this.resize((s*=2)>e?s:e),e-=o,this.view.setUint8(e,n=128|t),(t>>>=0)>=128?(n=t>>7|128,this.view.setUint8(e+1,n),t>=16384?(n=t>>14|128,this.view.setUint8(e+2,n),t>=1<<21?(n=t>>21|128,this.view.setUint8(e+3,n),t>=1<<28?(this.view.setUint8(e+4,t>>28&15),o=5):(this.view.setUint8(e+3,127&n),o=4)):(this.view.setUint8(e+2,127&n),o=3)):(this.view.setUint8(e+1,127&n),o=2)):(this.view.setUint8(e,127&n),o=1),i?(this.offset+=o,this):o},o._P=function(t,e){return this.CP(r.wP(t),e)},o.PP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n,r=0,o=0;do{if(n=t+r,!this.B_&&n>this.F_){var s=Error("Truncated");throw s.AP=!0,s}i=this.view.getUint8(n),r<5&&(o|=(127&i)<<7*r>>>0),++r}while(128==(128&i));return o|=0,e?(this.offset+=r,o):{value:o,length:r}},o.OP=function(t){var e=this.PP(t);return"object"==typeof e?e.value=r.bP(e.value):e=r.bP(e),e},t&&(r.NP=10,r.DP=function(e){"number"==typeof e?e=t.DE(e):"string"==typeof e&&(e=t.kE(e));var i=e.kP()>>>0,n=e.LP(28).kP()>>>0,r=e.LP(56).kP()>>>0;return 0==r?0==n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10},r.MP=function(e){return"number"==typeof e?e=t.DE(e,!1):"string"==typeof e?e=t.kE(e,!1):!1!==e.FP&&(e=e.UP()),e.shiftLeft(1).pT(e.HP(63)).BP()},r.xP=function(e){return"number"==typeof e?e=t.DE(e,!1):"string"==typeof e?e=t.kE(e,!1):!1!==e.FP&&(e=e.UP()),e.LP(1).pT(e.qP(t.ONE).UP().qE()).UP()},o.GP=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"==typeof e)e=t.DE(e);else if("string"==typeof e)e=t.kE(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.DE(e,!1):"string"==typeof e?e=t.kE(e,!1):!1!==e.FP&&(e=e.UP());var o=r.DP(e),s=e.kP()>>>0,a=e.LP(28).kP()>>>0,u=e.LP(56).kP()>>>0;i+=o;var h=this.buffer.byteLength;switch(i>h&&this.resize((h*=2)>i?h:i),i-=o,o){case 10:this.view.setUint8(i+9,u>>>7&1);case 9:this.view.setUint8(i+8,9!==o?128|u:127&u);case 8:this.view.setUint8(i+7,8!==o?a>>>21|128:a>>>21&127);case 7:this.view.setUint8(i+6,7!==o?a>>>14|128:a>>>14&127);case 6:this.view.setUint8(i+5,6!==o?a>>>7|128:a>>>7&127);case 5:this.view.setUint8(i+4,5!==o?128|a:127&a);case 4:this.view.setUint8(i+3,4!==o?s>>>21|128:s>>>21&127);case 3:this.view.setUint8(i+2,3!==o?s>>>14|128:s>>>14&127);case 2:this.view.setUint8(i+1,2!==o?s>>>7|128:s>>>7&127);case 1:this.view.setUint8(i,1!==o?128|s:127&s)}return n?(this.offset+=o,this):o},o.VP=function(t,e){return this.GP(r.MP(t),e)},o.jP=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,r=0,o=0,s=0,a=0;if(r=127&(a=this.view.getUint8(e++)),128&a&&(r|=(127&(a=this.view.getUint8(e++)))<<7,128&a&&(r|=(127&(a=this.view.getUint8(e++)))<<14,128&a&&(r|=(127&(a=this.view.getUint8(e++)))<<21,128&a&&(o=127&(a=this.view.getUint8(e++)),128&a&&(o|=(127&(a=this.view.getUint8(e++)))<<7,128&a&&(o|=(127&(a=this.view.getUint8(e++)))<<14,128&a&&(o|=(127&(a=this.view.getUint8(e++)))<<21,128&a&&(s=127&(a=this.view.getUint8(e++)),128&a&&(s|=(127&(a=this.view.getUint8(e++)))<<7,128&a))))))))))throw Error("Buffer overrun");var u=t.qI(r|o<<28,o>>>4|s<<24,!1);return i?(this.offset=e,u):{value:u,length:e-n}},o.QP=function(e){var i=this.jP(e);return i&&i.value instanceof t?i.value=r.xP(i.value):i=r.xP(i),i}),o.Hg=function(t,i){var n=void 0===i;n&&(i=this.offset);var r,o=t.length;if(!this.B_){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(r=0;r<o;++r)if(0===t.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}o=h.KP(e(t))[1],i+=o+1;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=o+1,h.YP(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),this.view.setUint8(i++,0),n?(this.offset=i,this):o},o.Yg=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=t,o=-1;return h.WP(function(){if(0===o)return null;if(t>=this.F_)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.F_);return 0===(o=this.view.getUint8(t++))?null:o}.bind(this),i=n(),!0),e?(this.offset=t,i()):{string:i(),length:t-r}},o.zP=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,o=i;r=h.KP(e(t),this.B_)[1],i+=4+r;var s=this.buffer.byteLength;if(i>s&&this.resize((s*=2)>i?s:i),i-=4+r,this.view.setUint32(i,r,this.U_),i+=4,h.YP(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),i!==o+4+r)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+4+r));return n?(this.offset=i,this):i-o},o.JP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i,r,o=t;r=this.view.getUint32(t,this.U_);var s,a=(t+=4)+r;return h.WP(function(){return t<a?this.view.getUint8(t++):null}.bind(this),s=n(),this.B_),i=s(),e?(this.offset=t,i):{string:i,length:t-o}},r.XP="c",r.ZP="b",o.$P=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,o=i;r=h.KP(e(t))[1],i+=r;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=r,h.YP(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),n?(this.offset=i,this):i-o},o.qb=o.$P,r.eA=function(t){return h.KP(e(t))[0]},r.tA=function(t){return h.KP(e(t))[1]},o.rA=function(t,e,i){"number"==typeof e&&(i=e,e=void 0);var o=void 0===i;if(o&&(i=this.offset),void 0===e&&(e=r.XP),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var s,a=0,u=i;if(e===r.XP){if(s=n(),h.iA(function(){return a<t&&i<this.F_?this.view.getUint8(i++):null}.bind(this),function(t){++a,h.nA(t,s)}.bind(this)),a!==t)throw RangeError("Illegal range: Truncated data, "+a+" == "+t);return o?(this.offset=i,s()):{string:s(),length:i-u}}if(e===r.ZP){if(!this.B_){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+t+") <= "+this.buffer.byteLength)}var c=i+t;if(h.WP(function(){return i<c?this.view.getUint8(i++):null}.bind(this),s=n(),this.B_),i!==c)throw RangeError("Illegal range: Truncated data, "+i+" == "+c);return o?(this.offset=i,s()):{string:s(),length:i-u}}throw TypeError("Unsupported metrics: "+e)},o.Lb=o.rA,o.sA=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,s,a=i;o=h.KP(e(t),this.B_)[1],s=r.RP(o),i+=s+o;var u=this.buffer.byteLength;if(i>u&&this.resize((u*=2)>i?u:i),i-=s+o,i+=this.CP(o,i),h.YP(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),i!==a+o+s)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+o+s));return n?(this.offset=i,this):i-a},o.oA=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=this.PP(t),o=t;t+=r.length,r=r.value;var s=t+r,a=n();return h.WP(function(){return t<s?this.view.getUint8(t++):null}.bind(this),a,this.B_),i=a(),e?(this.offset=t,i):{string:i,length:t-o}},o.append=function(t,e,i){"number"!=typeof e&&"string"==typeof e||(i=e,e=void 0);var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}t instanceof r||(t=r.wrap(t,e));var o=t.F_-t.offset;if(o<=0)return this;i+=o;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=o,new Uint8Array(this.buffer,i).set(new Uint8Array(t.buffer).subarray(t.offset,t.F_)),t.offset+=o,n&&(this.offset+=o),this},o.aA=function(t,e){return t.append(this,e),this},o.assert=function(t){return this.B_=!t,this},o.hA=function(){return this.buffer.byteLength},o.clear=function(){return this.offset=0,this.F_=this.buffer.byteLength,this.M_=-1,this},o.clone=function(t){var e=new r(0,this.U_,this.B_);if(t){var i=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(i).set(this.buffer),e.buffer=i,e.view=new DataView(i)}else e.buffer=this.buffer,e.view=this.view;return e.offset=this.offset,e.M_=this.M_,e.F_=this.F_,e},o.compact=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var i=e-t;if(0===i)return this.buffer=s,this.view=null,this.M_>=0&&(this.M_-=t),this.offset=0,this.F_=0,this;var n=new ArrayBuffer(i);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t,e)),this.buffer=n,this.view=new DataView(n),this.M_>=0&&(this.M_-=t),this.offset=0,this.F_=i,this},o.cA=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return new r(0,this.U_,this.B_);var i=e-t,n=new r(i,this.U_,this.B_);return n.offset=0,n.F_=i,n.M_>=0&&(n.M_-=t),this.jE(n,0,t,e),n},o.jE=function(t,e,i,n){var o,s;if(!this.B_&&!r.V_(t))throw TypeError("Illegal target: Not a ByteBuffer");if(e=(s=void 0===e)?t.offset:0|e,i=(o=void 0===i)?this.offset:0|i,n=void 0===n?this.F_:0|n,e<0||e>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+e+" <= "+t.buffer.byteLength);if(i<0||n>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+i+" <= "+this.buffer.byteLength);var a=n-i;return 0===a?t:(t.uA(e+a),new Uint8Array(t.buffer).set(new Uint8Array(this.buffer).subarray(i,n),e),o&&(this.offset+=a),s&&(t.offset+=a),this)},o.uA=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},o.fill=function(t,e,i){var n=void 0===e;if(n&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),void 0===e&&(e=this.offset),void 0===i&&(i=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(e>=i)return this;for(;e<i;)this.view.setUint8(e++,t);return n&&(this.offset=e),this},o.xg=function(){return this.F_=this.offset,this.offset=0,this},o.mark=function(t){if(t=void 0===t?this.offset:t,!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.M_=t,this},o.order=function(t){if(!this.B_&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.U_=!!t,this},o.lA=function(t){return this.U_=void 0===t||!!t,this},o.pA=function(t){return this.U_=void 0!==t&&!t,this},o.dA=function(t,e,i){"number"!=typeof e&&"string"==typeof e||(i=e,e=void 0);var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}t instanceof r||(t=r.wrap(t,e));var o=t.F_-t.offset;if(o<=0)return this;var s,a=o-i;if(a>0){var u=new ArrayBuffer(this.buffer.byteLength+a);(s=new Uint8Array(u)).set(new Uint8Array(this.buffer).subarray(i,this.buffer.byteLength),o),this.buffer=u,this.view=new DataView(u),this.offset+=a,this.M_>=0&&(this.M_+=a),this.F_+=a,i+=a}else s=new Uint8Array(this.buffer);return s.set(new Uint8Array(t.buffer).subarray(t.offset,t.F_),i-o),t.offset=t.F_,n&&(this.offset-=o),this},o.fA=function(t,e){return t.dA(this,e),this},o.gA=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.EA(!0))},o.vA=function(){return this.F_-this.offset},o.reset=function(){return this.M_>=0?(this.offset=this.M_,this.M_=-1):this.offset=0,this},o.resize=function(t){if(!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if((t|=0)<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e,this.view=new DataView(e)}return this},o.reverse=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(t,e)),this.view=new DataView(this.buffer),this)},o.Mb=function(t){if(!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.B_&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},o.slice=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i=this.clone();return i.offset=t,i.F_=e,i},o.yA=function(t){var e=this.offset,i=this.F_;if(e>i){var n=e;e=i,i=n}if(!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(!t&&0===e&&i===this.buffer.byteLength)return this.buffer;if(e===i)return s;var r=new ArrayBuffer(i-e);return new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(e,i),0),r},o.tc=o.yA,o.toString=function(t,e,i){if(void 0===t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.M_+",limit="+this.F_+",capacity="+this.hA()+")";switch("number"==typeof t&&(i=e=t="utf8"),t){case"utf8":return this.TA(e,i);case"base64":return this.mA(e,i);case"hex":return this.IA(e,i);case"binary":return this.SA(e,i);case"debug":return this.EA();case"columns":return this.RA();default:throw Error("Unsupported encoding: "+t)}};var u=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],i=[],n=0,r=e.length;n<r;++n)i[e[n]]=n;return t.encode=function(t,i){for(var n,r;null!==(n=t());)i(e[n>>2&63]),r=(3&n)<<4,null!==(n=t())?(i(e[63&((r|=n>>4&15)|n>>4&15)]),r=(15&n)<<2,null!==(n=t())?(i(e[63&(r|n>>6&3)]),i(e[63&n])):(i(e[63&r]),i(61))):(i(e[63&r]),i(61),i(61))},t.decode=function(t,e){function n(t){throw Error("Illegal character code: "+t)}for(var r,o,s;null!==(r=t());)if(void 0===(o=i[r])&&n(r),null!==(r=t())&&(void 0===(s=i[r])&&n(r),e(o<<2>>>0|(48&s)>>4),null!==(r=t()))){if(void 0===(o=i[r])){if(61===r)break;n(r)}if(e((15&s)<<4>>>0|(60&o)>>2),null!==(r=t())){if(void 0===(s=i[r])){if(61===r)break;n(r)}e((3&o)<<6>>>0|s)}}},t.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)},t}();o.mA=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;return u.encode(function(){return t<e?this.view.getUint8(t++):null}.bind(this),i=n()),i()},r.j_=function(t,i,n){if(!n){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%4!=0)throw TypeError("Illegal str: Length not a multiple of 4")}var o=new r(t.length/4*3,i,n),s=0;return u.decode(e(t),function(t){o.view.setUint8(s++,t)}),o.F_=s,o},r.btoa=function(t){return r.K_(t).mA()},r.atob=function(t){return r.j_(t).SA()},o.SA=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.F_:e,!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return"";for(var i=[],n=[];t<e;)i.push(this.view.getUint8(t++)),i.length>=1024&&(n.push(String.fromCharCode.apply(String,i)),i=[]);return n.join("")+String.fromCharCode.apply(String,i)},r.K_=function(t,e,i){if(!i&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");for(var n,o=0,s=t.length,a=new r(s,e,i);o<s;){if(n=t.charCodeAt(o),!i&&n>255)throw RangeError("Illegal charCode at "+o+": 0 <= "+n+" <= 255");a.view.setUint8(o++,n)}return a.F_=s,a},o.EA=function(t){for(var e,i=-1,n=this.buffer.byteLength,r="",o="",s="";i<n;){if(-1!==i&&(r+=(e=this.view.getUint8(i))<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(o+=e>32&&e<127?String.fromCharCode(e):".")),++i,t&&i>0&&i%16==0&&i!==n){for(;r.length<51;)r+=" ";s+=r+o+"\n",r=o=""}i===this.offset&&i===this.F_?r+=i===this.M_?"!":"|":i===this.offset?r+=i===this.M_?"[":"<":i===this.F_?r+=i===this.M_?"]":">":r+=i===this.M_?"'":t||0!==i&&i!==n?" ":""}if(t&&" "!==r){for(;r.length<51;)r+=" ";s+=r+o+"\n"}return t?s:r},r.W_=function(t,e,i){for(var n,o,s=t.length,a=new r((s+1)/3|0,e,i),u=0,h=0,c=!1,l=!1,f=!1,p=!1,d=!1;u<s;){switch(n=t.charAt(u++)){case"!":if(!i){if(l||f||p){d=!0;break}l=f=p=!0}a.offset=a.M_=a.F_=h,c=!1;break;case"|":if(!i){if(l||p){d=!0;break}l=p=!0}a.offset=a.F_=h,c=!1;break;case"[":if(!i){if(l||f){d=!0;break}l=f=!0}a.offset=a.M_=h,c=!1;break;case"<":if(!i){if(l){d=!0;break}l=!0}a.offset=h,c=!1;break;case"]":if(!i){if(p||f){d=!0;break}p=f=!0}a.F_=a.M_=h,c=!1;break;case">":if(!i){if(p){d=!0;break}p=!0}a.F_=h,c=!1;break;case"'":if(!i){if(f){d=!0;break}f=!0}a.M_=h,c=!1;break;case" ":c=!1;break;default:if(!i&&c){d=!0;break}if(o=parseInt(n+t.charAt(u++),16),!i&&(isNaN(o)||o<0||o>255))throw TypeError("Illegal str: Not a debug encoded string");a.view.setUint8(h++,o),c=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+u)}if(!i){if(!l||!p)throw TypeError("Illegal str: Missing offset or limit");if(h<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+h+" < "+s)}return a},o.IA=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.F_:e,!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var i,n=new Array(e-t);t<e;)(i=this.view.getUint8(t++))<16?n.push("0",i.toString(16)):n.push(i.toString(16));return n.join("")},r.Q_=function(t,e,i){if(!i){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var n,o=t.length,s=new r(o/2|0,e),a=0,u=0;a<o;a+=2){if(n=parseInt(t.substring(a,a+2),16),!i&&(!isFinite(n)||n<0||n>255))throw TypeError("Illegal str: Contains non-hex characters");s.view.setUint8(u++,n)}return s.F_=u,s};var h=function(){var t={wA:1114111,bA:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<128?e(127&i):i<2048?(e(i>>6&31|192),e(63&i|128)):i<65536?(e(i>>12&15|224),e(i>>6&63|128),e(63&i|128)):(e(i>>18&7|240),e(i>>12&63|128),e(i>>6&63|128),e(63&i|128)),i=null},iA:function(t,e){for(var i,n,r,o,s=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(i=t());)if(0==(128&i))e(i);else if(192==(224&i))null===(n=t())&&s([i,n]),e((31&i)<<6|63&n);else if(224==(240&i))(null===(n=t())||null===(r=t()))&&s([i,n,r]),e((15&i)<<12|(63&n)<<6|63&r);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=t())||null===(r=t())||null===(o=t()))&&s([i,n,r,o]),e((7&i)<<18|(63&n)<<12|(63&r)<<6|63&o)}},CA:function(t,e){for(var i,n=null;null!==(i=null!==n?n:t());)i>=55296&&i<=57343&&null!==(n=t())&&n>=56320&&n<=57343?(e(1024*(i-55296)+n-56320+65536),n=null):e(i);null!==n&&e(n)},nA:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<=65535?e(i):(e(55296+((i-=65536)>>10)),e(i%1024+56320)),i=null},YP:function(e,i){t.CA(e,function(e){t.bA(e,i)})},WP:function(e,i){t.iA(e,function(e){t.nA(e,i)})},_A:function(t){return t<128?1:t<2048?2:t<65536?3:4},PA:function(e){for(var i,n=0;null!==(i=e());)n+=t._A(i);return n},KP:function(e){var i=0,n=0;return t.CA(e,function(e){++i,n+=t._A(e)}),[i,n]}};return t}();return o.TA=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;try{h.WP(function(){return t<e?this.view.getUint8(t++):null}.bind(this),i=n())}catch(i){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return i()},r.Y_=function(t,i,n){if(!n&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var o=new r(h.KP(e(t),!0)[1],i,n),s=0;return h.YP(e(t),function(t){o.view.setUint8(s++,t)}),o.F_=s,o},r}"object"==typeof t&&t&&"object"==typeof e&&e?t.i=function(){var t;try{t=n(93)}catch(t){}return a(t)}():(r=[n(94)],void 0!==(o=function(t){return a(t)}.apply(e,r))&&(t.i=o))}()}).call(e,n(63)(t))},function(t,e,i){"use strict";var n=i(37);t.i=Object,Object.empty=Object.freeze(Object.create(null)),Object.au=function(t){return Object(t)===t},Object.AA=function(t){return t&&"function"==typeof t.valueOf&&(t=t.valueOf()),t};var r=new n;Object.hash=function(t){return t&&"function"==typeof t.hash?""+t.hash():Object(t)===t?(r.has(t)||r.set(t,Math.random().toString(36).slice(2)),r.get(t)):""+t};var o=Object.prototype.hasOwnProperty;Object.OA=function(t,e){return o.call(t,e)},Object.has=function(t,e){if("object"!=typeof t)throw new Error("Object.has can't accept non-object: "+typeof t);if(t&&"function"==typeof t.has)return t.has(e);if("string"==typeof e)return e in t&&t[e]!==Object.prototype[e];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(t,e,i){if("object"!=typeof t)throw new Error("Object.get can't accept non-object: "+typeof t);return t&&"function"==typeof t.get?t.get(e,i):Object.has(t,e)?t[e]:i},Object.set=function(t,e,i){t&&"function"==typeof t.set?t.set(e,i):t[e]=i},Object.addEach=function(t,e){if(e)if("function"!=typeof e.forEach||e.hasOwnProperty("forEach"))if("number"==typeof e.length)for(var i=0;i<e.length;i++)t[i]=e[i];else Object.keys(e).forEach(function(i){t[i]=e[i]});else!0===e.isMap?e.forEach(function(e,i){t[i]=e}):e.forEach(function(e){t[e[0]]=e[1]});return t},Object.forEach=function(t,e,i){for(var n,r=Object.keys(t),o=0;n=r[o];o++)e.call(i,t[n],n,t)},Object.map=function(t,e,i){for(var n,r=Object.keys(t),o=0,s=[];n=r[o];o++)s.push(e.call(i,t[n],n,t));return s},Object.values=function(t){return Object.map(t,Function.identity)},Object.concat=function(){for(var t={},e=0;e<arguments.length;e++)Object.addEach(t,arguments[e]);return t},Object.from=Object.concat,Object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},Object.cs=function(t,e,i,r){if(i=i||Object.cs,(t=Object.AA(t))===(e=Object.AA(e)))return!0;if(Object.au(t)){if((r=r||new n).has(t))return!0;r.set(t,!0)}if(Object.au(t)&&"function"==typeof t.cs)return t.cs(e,i,r);if(Object.au(e)&&"function"==typeof e.cs)return e.cs(t,i,r);if(Object.au(t)&&Object.au(e)&&Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){for(var o in t)if(!i(t[o],e[o],i,r))return!1;for(var o in e)if(!(o in t&&i(e[o],t[o],i,r)))return!1;return!0}return t!=t&&e!=e||(!t||!e)&&t===e},Object.Oc=function(t,e){if((t=Object.AA(t))===(e=Object.AA(e)))return 0;var i=typeof t,n=typeof e;return"number"===i&&"number"===n?t-e:"string"===i&&"string"===n?t<e?-1/0:1/0:t&&"function"==typeof t.Oc?t.Oc(e):e&&"function"==typeof e.Oc?-e.Oc(t):0},Object.clone=function(t,e,i){if(t=Object.AA(t),i=i||new n,void 0===e)e=1/0;else if(0===e)return t;if(Object.au(t)){if(!i.has(t))if(t&&"function"==typeof t.clone)i.set(t,t.clone(e,i));else{var r=Object.getPrototypeOf(t);if(null!==r&&r!==Object.prototype)throw new Error("Can't clone "+t);var o=Object.create(r);for(var s in i.set(t,o),t)o[s]=Object.clone(t[s],e-1,i)}return i.get(t)}return t},Object.clear=function(t){if(t&&"function"==typeof t.clear)t.clear();else for(var e=Object.keys(t),i=e.length;i;)delete t[e[--i]];return t}},function(t,e){!function(){"use strict";function e(t){t.NA&&t.NA(e)}function i(t){return!(t.substr(0,p.length)==p&&"___"===t.substr(t.length-3))}function n(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[d];if(e&&e.key===t)return e;if(f(t)){e={key:t};try{return l(t,d,{value:e,Ah:!1,p:!1,l:!1}),e}catch(t){return}}}function r(t){return t.prototype=null,Object.freeze(t)}function o(){m||"undefined"==typeof console||(m=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.DA=e);var s=!1;if("function"==typeof WeakMap){var a=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var u=new a,h=Object.freeze({});if(u.set(h,1),1===u.get(h))return void(t.i=WeakMap);s=!0}}var c=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),l=Object.defineProperty,f=Object.isExtensible,p="weakmap:",d=p+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var g=new ArrayBuffer(25),v=new Uint8Array(g);crypto.getRandomValues(v),d=p+"rand:"+Array.prototype.map.call(v,function(t){return(t%36).toString(36)}).join("")+"___"}if(l(Object,"getOwnPropertyNames",{value:function(t){return c(t).filter(i)}}),"getPropertyNames"in Object){var y=Object.kA;l(Object,"getPropertyNames",{value:function(t){return y(t).filter(i)}})}!function(){var t=Object.freeze;l(Object,"freeze",{value:function(e){return n(e),t(e)}});var e=Object.seal;l(Object,"seal",{value:function(t){return n(t),e(t)}});var i=Object.preventExtensions;l(Object,"preventExtensions",{value:function(t){return n(t),i(t)}})}();var m=!1,E=0,b=function(){this instanceof b||o();var t=[],e=[],i=E++;return Object.create(b.prototype,{LA:{value:r(function(r,o){var s,a=n(r);return a?i in a?a[i]:o:(s=t.indexOf(r))>=0?e[s]:o})},MA:{value:r(function(e){var r=n(e);return r?i in r:t.indexOf(e)>=0})},FA:{value:r(function(r,o){var s,a=n(r);return a?a[i]=o:(s=t.indexOf(r))>=0?e[s]=o:(s=t.length,e[s]=o,t[s]=r),this})},UA:{value:r(function(r){var o,s,a=n(r);return a?i in a&&delete a[i]:!((o=t.indexOf(r))<0||(s=t.length-1,t[o]=void 0,e[o]=e[s],t[o]=t[s],t.length=s,e.length=s,0))})}})};b.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.LA(t,e)},Ah:!0,l:!0},has:{value:function(t){return this.MA(t)},Ah:!0,l:!0},set:{value:function(t,e){return this.FA(t,e)},Ah:!0,l:!0},delete:{value:function(t){return this.UA(t)},Ah:!0,l:!0}}),"function"==typeof a?function(){function i(){this instanceof b||o();var t,i=new a,n=void 0,u=!1;return t=s?function(t,e){return i.set(t,e),i.has(t)||(n||(n=new b),n.set(t,e)),this}:function(t,e){if(u)try{i.set(t,e)}catch(i){n||(n=new b),n.FA(t,e)}else i.set(t,e);return this},Object.create(b.prototype,{LA:{value:r(function(t,e){return n?i.has(t)?i.get(t):n.LA(t,e):i.get(t,e)})},MA:{value:r(function(t){return i.has(t)||!!n&&n.MA(t)})},FA:{value:r(t)},UA:{value:r(function(t){var e=!!i.delete(t);return n&&n.UA(t)||e})},NA:{value:r(function(t){if(t!==e)throw new Error("bogus call to permitHostObjects___");u=!0})}})}s&&"undefined"!=typeof Proxy&&(Proxy=void 0),i.prototype=b.prototype,t.i=i,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,p:!1,l:!0,Ah:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.i=b)}}()},function(t,e,i){"use strict";function n(){throw new Error("Can't construct. RangeChanges is a mixin.")}var r=i(37),o=i(51),s=new r;t.i=n,n.prototype.BA=function(){return s.has(this)||s.set(this,o()),s.get(this)},n.prototype.HA=function(t){var e=this.BA();return t=t||"",e.has(t)||e.set(t,{isActive:!1,Wc:[],Yc:[]}),e.get(t)},n.prototype.xA=function(t,e,i){!this.Zc&&this.Xc&&this.Xc();var n=this.HA(e);(i?n.Yc:n.Wc).push(t),Object.defineProperty(this,"dispatchesRangeChanges",{value:!0,Ah:!0,l:!0,p:!1});var r=this;return function(){r&&(r.qA(t,e,i),r=null)}},n.prototype.qA=function(t,e,i){var n,r=this.HA(e),o=(n=i?r.Yc:r.Wc).lastIndexOf(t);if(-1===o)throw new Error("Can't remove range change listener: does not exist: token "+JSON.stringify(e));n.splice(o,1)},n.prototype.GA=function(t,e,i,n){var r="Range"+(n?"WillChange":"Change");this.BA().forEach(function(o,s){if(!o.isActive){var a;o.isActive=!0,a=n?o.Yc:o.Wc;var u="handle"+(s.slice(0,1).toUpperCase()+s.slice(1))+r;try{a.slice().forEach(function(r){if(!(a.indexOf(r)<0))if(r[u])r[u](t,e,i,this,n);else{if(!r.call)throw new Error("Handler "+r+" has no method "+u+" and is not callable");r.call(this,t,e,i,this,n)}},this)}finally{o.isActive=!1}}},this)},n.prototype.VA=function(t,e){return this.xA(t,e,!0)},n.prototype.jA=function(t,e){return this.qA(t,e,!0)},n.prototype.QA=function(t,e,i){return this.GA(t,e,i,!0)}},function(t,e){function i(){throw new Error("Can't construct. GenericSet is a mixin.")}t.i=i,i.prototype.KA=!0,i.prototype.YA=function(t){var e=this.Es(this);return e.addEach(t),e},i.prototype.WA=function(t){return this.Es(this.filter(function(e){return t.has(e)}))},i.prototype.zA=function(t){var e=this.Es(this);return e._c(t),e},i.prototype.JA=function(t){var e=this.YA(t),i=this.WA(t);return e.zA(i)},i.prototype.XA=function(t){return+this.delete(t)},i.prototype.cs=function(t,e){var i=this;return t&&"function"==typeof t.reduce&&this.length===t.length&&t.reduce(function(t,n){return t&&i.has(n,e)},!0)},i.prototype.toJSON=function(){return this.toArray()},i.prototype.contains=function(t){return this.has(t)},i.prototype.remove=function(t){return this.delete(t)},i.prototype.toggle=function(t){this.has(t)?this.delete(t):this.add(t)}},function(t,e,i){var n;t.i=function t(e,i,r){function o(a,u){if(!i[a]){if(!e[a]){var h="function"==typeof n&&n;if(!u&&h)return n(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[a]={i:{}};e[a][0].call(l.i,function(t){var i=e[a][1][t];return o(i||t)},l,l.i,t,e,i,r)}return i[a].i}for(var s="function"==typeof n&&n,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,i){var n=t("./kernel");i.D=n.D;var r=t("./type_binding");i.ZA=r.ZA;var o=t("./type_binding_scope");i.$A=o.$A},{"./kernel":2,"./type_binding":4,"./type_binding_scope":5}],2:[function(t,e,i){var n=t("./type_binding_scope"),r=t("./lookup"),o=function(){function t(){this.eO=new r.tO}return t.prototype.bind=function(t){this.eO.add(t.rO,t)},t.prototype.iO=function(t){try{this.eO.remove(t)}catch(e){throw new Error("Could not resolve service "+t)}},t.prototype.N=function(){this.eO=new r.tO},t.prototype.resolve=function(t){if(!this.eO.nO(t))return null;var e=this.eO.get(t)[0];if(e.scope===n.$A.sO&&null!==e.sC)return e.sC;var i=this.oO(e.aO);return e.sC=i,i},t.prototype.hO=function(t){var e,i,n,r,o,s;return o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,s=/([^\s,]+)/g,e=t.toString().replace(o,""),i=e.indexOf("(")+1,n=e.indexOf(")"),null===(r="function"==typeof Map&&-1!==e.indexOf("class")&&-1===e.indexOf("constructor")?null:e.slice(i,n).match(s))&&(r=[]),r},t.prototype.oO=function(t){var e=this.hO(t);if(0===e.length)return new t;for(var i=[],n=null,r=0;r<e.length;r++){var o=e[r];n=this.resolve(o),i.push(n)}return this.cO(t,i)},t.prototype.cO=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(e)))},t}();i.D=o},{"./lookup":3,"./type_binding_scope":5}],3:[function(t,e,i){var n=function(t,e){this.key=t,this.value=new Array,this.value.push(e)},r=function(){function t(){this.uO=new Array}return t.prototype.lO=function(t){for(var e=-1,i=0;i<this.uO.length;i++)this.uO[i].key===t&&(e=i);return e},t.prototype.add=function(t,e){if(null==t)throw new Error("Argument Null");if(null==e)throw new Error("Argument Null");var i=this.lO(t);if(-1!==i){var r=this.uO[i];r.key===t&&r.value.push(e)}else this.uO.push(new n(t,e))},t.prototype.get=function(t){if(null==t)throw new Error("Argument Null");var e=this.lO(t);if(-1===e)throw new Error("Key Not Found");var i=this.uO[e];return i.key===t?i.value:void 0},t.prototype.remove=function(t){if(null==t)throw new Error("Argument Null");var e=this.lO(t);if(-1===e)throw new Error("Key Not Found");this.uO.splice(e,1)},t.prototype.nO=function(t){if(null==t)throw new Error("Argument Null");return-1!==this.lO(t)},t}();i.tO=r},{}],4:[function(t,e,i){var n=t("./type_binding_scope"),r=function(t,e,i){if(this.rO=t,this.aO=e,this.sC=null,void 0===i)this.scope=n.$A.pO;else{if(!n.$A[i]){var r="Invalid scope type "+i;throw new Error(r)}this.scope=i}};i.ZA=r},{"./type_binding_scope":5}],5:[function(t,e,i){var n;!function(t){t[t.pO=0]="Transient",t[t.sO=1]="Singleton"}(n||(n={})),i.$A=n},{}]},{},[1])(1)},function(t,e,i){"use strict";var n;!function(t){var e=function(){return function(){}}();e.LoggerTimestamp=!0,t.Framework=e;var i=function(){return function(){}}();i.MetricSnapshotLogs=0,i.TrackSnapshotLogs=0,t.DebugLogs=i}(n=e.HiveConfig||(e.HiveConfig={})),"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Framework=n.Framework,window.HiveConfig.DebugLogs=n.DebugLogs)},function(t,e,i){"use strict";var n=function(){return function(){}}();n.dO="127.0.0.1",n.vp=8999,n.Ep=8998,n.gp=8899,n.dp=8898,n.fO="//{0}:{1}/?callback={2}{3}hivePluginId={4}",n.gO="//{0}:{1}/?callback={2}",n.yp=!0,n.EO=/((http|https):\/\/(.*):([0-9]*)\/([0-9a-z-]*).ism\/)(.*)/,n.vO="2013.1.1",n.yO="2018.1",e.fp=n},function(t,e,i){"use strict";var n=function(){function t(){this.count=0}return t.prototype.next=function(){return++this.count},t}();e.Counter=n;var r=function(){function t(){this.reset()}return t.prototype.add=function(t){t<=0||(this.TO+=t,this.mO++,t>this.IO&&(this.IO=t),t<this.SO&&(this.SO=t))},t.prototype.min=function(t){void 0===t&&(t=!0);var e=this.SO==Number.POSITIVE_INFINITY?0:this.SO;return t&&this.reset(),e},t.prototype.max=function(t){void 0===t&&(t=!0);var e=this.IO==Number.NEGATIVE_INFINITY?0:this.IO;return t&&this.reset(),e},t.prototype.Nc=function(t){void 0===t&&(t=!0);var e=this.TO;return t&&this.reset(),e},t.prototype.ec=function(t){void 0===t&&(t=!0);var e=this.mO>0?this.TO/this.mO:0;return t&&this.reset(),e},t.prototype.reset=function(){this.SO=Number.POSITIVE_INFINITY,this.IO=Number.NEGATIVE_INFINITY,this.TO=0,this.mO=0},t}();e.RO=r},function(t,e,i){var n;!function(r,o){"use strict";var s="model",a="name",u="type",h="vendor",c="version",l="mobile",f="tablet",p={extend:function(t,e){var i={};for(var n in t)e[n]&&e[n].length%2==0?i[n]=e[n].concat(t[n]):i[n]=t[n];return i},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},wO:function(t){return t.toLowerCase()},bO:function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={CO:function(){for(var t,e,i,n,r,o,s,a=0,u=arguments;a<u.length&&!o;){var h=u[a],c=u[a+1];if(void 0===t)for(n in t={},c)c.hasOwnProperty(n)&&("object"==typeof(r=c[n])?t[r[0]]=void 0:t[r]=void 0);for(e=i=0;e<h.length&&!o;)if(o=h[e++].exec(this._O()))for(n=0;n<c.length;n++)s=o[++i],"object"==typeof(r=c[n])&&r.length>0?2==r.length?"function"==typeof r[1]?t[r[0]]=r[1].call(this,s):t[r[0]]=r[1]:3==r.length?"function"!=typeof r[1]||r[1].exec&&r[1].test?t[r[0]]=s?s.replace(r[1],r[2]):void 0:t[r[0]]=s?r[1].call(this,s,r[2]):void 0:4==r.length&&(t[r[0]]=s?r[3].call(this,s.replace(r[1],r[2])):void 0):t[r]=s||void 0;a+=2}return t},str:function(t,e){for(var i in e)if("object"==typeof e[i]&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(p.has(e[i][n],t))return"?"===i?void 0:i}else if(p.has(e[i],t))return"?"===i?void 0:i;return t}},g={Qu:{PO:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419",QR:"/"}}},AO:{OO:{NO:{DO:["SD","KF"]}},kO:{NO:{LO:"7373KT"},vendor:{MO:"APA",FO:"Sprint"}}},os:{UO:{version:{BO:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",HO:["NT 5.1","NT 5.2"],xO:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],qO:"ARM"}}}},v={Qu:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,c],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[a,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],c],[/(edge)\/((\d+)?[\w\.]+)/i],[a,c],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],c],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],c],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[a,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],c],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[a,c],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],c],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],c],[/;fbav\/([\w\.]+);/i],[c,[a,"Facebook"]],[/fxios\/([\w\.-]+)/i],[c,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[c,d.str,g.Qu.PO.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[a,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,c]],GO:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.wO]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.wO]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.wO]]],AO:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[s,h,[u,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[h,"Apple"],[u,f]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[h,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[h,s,[u,f]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[s,[h,"Amazon"],[u,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[s,d.str,g.AO.OO.NO],[h,"Amazon"],[u,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,h,[u,l]],[/\((ip[honed|\s\w*]+);/i],[s,[h,"Apple"],[u,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[h,s,[u,l]],[/\(bb10;\s(\w+)/i],[s,[h,"BlackBerry"],[u,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[s,[h,"Asus"],[u,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[h,"Sony"],[s,"Xperia Tablet"],[u,f]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[h,"Sony"],[s,"Xperia Phone"],[u,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[h,s,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[s,[h,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[s,[h,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[h,d.str,g.AO.kO.vendor],[s,d.str,g.AO.kO.NO],[u,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[h,s,[u,f]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[h,[s,/_/g," "],[u,l]],[/(nexus\s9)/i],[s,[h,"HTC"],[u,f]],[/(nexus\s6p)/i],[s,[h,"Huawei"],[u,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[h,s,[u,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[h,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[h,"Microsoft"],[u,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[h,"Motorola"],[u,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[h,"Motorola"],[u,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[h,p.trim],[s,p.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[h,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[s,[h,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[h,"Samsung"],s,[u,f]],[/smart-tv.+(samsung)/i],[h,[u,"smarttv"],s],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[h,"Samsung"],s,[u,l]],[/sie-(\w+)*/i],[s,[h,"Siemens"],[u,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[h,"Nokia"],s,[u,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[s,[h,"Acer"],[u,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[h,"LG"],s,[u,f]],[/(lg) netcast\.tv/i],[h,s,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[s,[h,"LG"],[u,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[h,"Lenovo"],[u,f]],[/linux;.+((jolla));/i],[h,s,[u,l]],[/((pebble))app\/[\d\.]+\s/i],[h,s,[u,"wearable"]],[/android.+;\s(glass)\s\d/i],[s,[h,"Google"],[u,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[s,/_/g," "],[h,"Xiaomi"],[u,l]],[/android.+a000(1)\s+build/i],[s,[h,"OnePlus"],[u,l]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,p.wO],h,s]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[a,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,c],[/rv\:([\w\.]+).*(gecko)/i],[c,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[c,d.str,g.os.UO.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[c,d.str,g.os.UO.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[a,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[a,"Symbian"],c],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[a,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],c],[/(sunos)\s?([\w\.]+\d)*/i],[[a,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[a,c],[/(haiku)\s(\w+)/i],[a,c],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[a,"iOS"],[c,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[a,c]]},y=function(t,e){if(!(this instanceof y))return new y(t,e).VO();var i=t||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=e?p.extend(v,e):v;return this.jO=function(){var t=d.CO.apply(this,n.Qu);return t.bO=p.bO(t.version),t},this.QO=function(){return d.CO.apply(this,n.GO)},this.KO=function(){return d.CO.apply(this,n.AO)},this.YO=function(){return d.CO.apply(this,n.engine)},this.Od=function(){return d.CO.apply(this,n.os)},this.VO=function(){return{sy:this._O(),Qu:this.jO(),engine:this.YO(),os:this.Od(),AO:this.KO(),GO:this.QO()}},this._O=function(){return i},this.Ad=function(t){return i=t,this},this};y.VERSION="0.7.12",y.WO={zO:a,JO:"major",VERSION:c},y.XO={ZO:"architecture"},y.$O={eN:s,VENDOR:h,tN:u,rN:"console",iN:l,nN:"smarttv",sN:f,oN:"wearable",aN:"embedded"},y.hN={zO:a,VERSION:c},y.cN={zO:a,VERSION:c},void 0!==e?(void 0!==t&&t.i&&(e=t.i=y),e.Pp=y):i(110)?void 0!==(n=function(){return y}.call(e,i,e,t))&&(t.i=n):r.Pp=y;var m=r.uN||r.lN;if(void 0!==m){var E=new y;m.sy=E.VO(),m.sy.get=function(){return E._O()},m.sy.set=function(t){E.Ad(t);var e=E.VO();for(var i in e)m.sy[i]=e[i]}}}("object"==typeof window?window:this)},function(t,e,i){"use strict";var n=i(41),r=i(3);!function(t){var e;!function(t){t[t.off=0]="off",t[t.error=1]="error",t[t.warn=2]="warn",t[t.notice=3]="notice",t[t.info=4]="info",t[t.debug=5]="debug",t[t.trace=6]="trace"}(e=t.pN||(t.pN={}));var i=function(){function t(){this.timestamp=function(){},this.dN=new r,this.level=e.debug,this.timestamp.toString=function(){var t=new Date;return"["+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)+":"+("00"+t.getUTCMilliseconds()).slice(-3)+"]"},this.logger="undefined"==typeof console?{log:function(){}}:console,this.logger.trace||(this.logger.trace=this.logger.log),this.logger.debug||(this.logger.debug=this.logger.log),this.logger.info||(this.logger.info=this.logger.log),this.logger.warn||(this.logger.warn=this.logger.log),this.logger.error||(this.logger.error=this.logger.log),this.fN(e[this.level])}return t.prototype.fN=function(t,i){n.HiveConfig.Framework.HiveDebugLevel&&null!=e[n.HiveConfig.Framework.HiveDebugLevel]?this.level=e[n.HiveConfig.Framework.HiveDebugLevel]:null!=e[t]?this.level=e[t]:console.log("Wrong logging level: "+t,e),this.gN(i)},t.prototype.gN=function(t){var i={log:this.EN(this.logger.log,e.error,t),error:this.EN(this.logger.error,e.error,t),warn:this.EN(this.logger.warn,e.warn,t),notice:this.EN(this.logger.info,e.notice,t),info:this.EN(this.logger.info,e.info,t),debug:this.EN(this.logger.debug,e.debug,t),trace:this.EN(this.logger.trace,e.trace,t)};t?this.dN.set(t,i):this.vN=i},t.prototype.EN=function(t,e,i){if(!(this.level>=e))return function(){};try{return n.HiveConfig.Framework.LoggerTimestamp?i?Function.prototype.bind.call(t,console,"S["+i+"] %s",this.timestamp):Function.prototype.bind.call(t,console,"%s",this.timestamp):i?Function.prototype.bind.call(t,console,"S["+i+"]"):Function.prototype.bind.call(t,console)}catch(t){}},t.prototype.log=function(t){return t?(this.dN.has(t)||this.fN(e[this.level],t),this.dN.get(t)):this.vN},t}();t.yN=i}(e.TN||(e.TN={}))},function(t,e,i){"use strict";var n=i(30),r=i(28),o=r.sR,s=r.oR,a=function(){function t(){this.SourceURLParams={},this.testId=null}return t.prototype.mN=function(t){for(var e in t)if("SourceURLParams"===e)for(var i in t[e])this[e][i]=t[e][i];else this[e]=t[e];this.IN()},t.prototype.SN=function(){var t=this.ContentId+this.SiteId+this.CROId+this.SourceURL,e=new o;e.Nv("b6614c3e4cd1d14eed6b39ef2bf6b9a3e3d6dfcd26699d7270d887923bcbf83efb3dadb717c0bafb1d48dce361eb369b7cc46e57405ebfbdd86c3175532fe56cc77f473d345b2cb6feafb5ab0e24f364a3d259f27e4a2fd97468265bddfd3ddd3ac64251db650ca0280af2b2c45e8b1c8f040f2c433ac0a157d2b3fd91517253","010001");var i=s(this.Signature);return e.ZS(t,i)},t.prototype.RN=function(t){this.ticketUrl=t;var e=n.parse(t),i=e.path.split("/").slice(3);if(this.SiteId=i[0],this.CROId=i[1],this.ContentId=i[2],this.wN=i[3],e.query)try{var r=e.query.split("&");for(var o in r){var s=r[o].split(/=(.+)/);this.SourceURLParams[s[0]]=s[1]}}catch(t){}this.bN=t.indexOf("api-test")>-1},t.prototype.up=function(){return this.SiteId},t.prototype.cp=function(){return this.CROId},t.prototype.hp=function(){return this.ContentId},t.prototype.CN=function(){return this.wN},t.prototype._N=function(){return this.SourceURL},t.prototype.PN=function(){if(this.AN=this.SourceURL,null!=this.SourceURLParams){var t=new Array;for(var e in this.SourceURLParams)t.push(e+"="+this.SourceURLParams[e]);t.length>0&&this.AN&&(this.AN+=(this.AN.indexOf("?")>0?"&":"?")+t.join("&"))}},t.prototype.IN=function(){var t=i(78);this.sessionId=t.ON()},t.prototype.NN=function(){return this.AN||this.PN(),this.AN},t.prototype.kd=function(){return"["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},t.prototype.DN=function(){return[this.SiteId,this.CROId,this.ContentId]},t.prototype.kN=function(){return this.SourceURL+"-["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},t.prototype.toString=function(){return this.kd()},t}();a.LN="^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?",a.MN="CROId",a.FN="SiteId",a.UN="ContentId",e.BN=a},function(t,e,i){"use strict";var n=function(){return function(){}}();n.HN=55,n.xN=6e5,n.qN=5,n.GN=5,n.VN=5,n.jN=10,n.QN="dist",n.KN="./scenarios/BrokenUdp",n.YN=null,n.WN=null,n.zN=null,n.JN=!0,n.XN=!0,n.ZN=6e4,e.$N=n;var r=function(){return function(){}}();r.eD="BwEmulation",e.tD=r},function(t,e,i){"use strict";function n(t,e,i,o){if(!(this instanceof n))return new n(t,e,i,o);e=e||Object.cs,i=i||Object.Oc,o=o||Function.us,this.ls=e,this.Ac=i,this.ds=o,this.fs=new r(null,function(t,i){return e(t.key,i.key)},function(t,e){return i(t.key,e.key)}),this.length=0,this.addEach(t)}var r=(i(11),i(139)),o=i(12),s=i(52),a=i(13);t.i=n,n.rD=n,Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),n.prototype.Es=function(t){return new this.constructor(t,this.ls,this.Ac,this.ds)},n.prototype.log=function(t,e,i,n){e=e||this.vs,this.fs.log(t,function(t,i,n){e(t.value,i,n)},i,n)},n.prototype.vs=function(t,e){e(" key: "+t.key),e(" value: "+t.value)}},function(t,e,i){"use strict";var n,r=i(59),o=i(3),s=i(24),a=i(0),u=i(5),h=i(9),c=i(31),l=i(10),f=i(1),p=i(2);!function(t){t[t.mc=0]="PLAYER",t[t.iD=1]="LAN",t[t.nD=2]="SITE"}(n=e.sD||(e.sD={}));var d=function(){return function(){this.oD=!1,this.b_=null,this.aD=-1,this.hD=0}}();e.cD=d;var g=function(){function t(){this.loggerId="[Prefetcher] ",this.uD=!0,this.lD=0,this.isActive=!0,this.pD=new o,this.dD=new o}return t.prototype.init=function(t){this.logger=a.Framework.resolve(a.Framework.V.R).log(t.sessionId),this.fD=t.gD,this.ED=t.ED,this.vD=t.vD,this.sC=t.sC,this.yD=t.yD,this.TD=t.TD,this.mD=t.mD,this.ID=t.ID},t.prototype.SD=function(){this.isActive=!0},t.prototype.RD=function(t,e){this.context=t,this.wD=e,this.mD.RD(e)},t.prototype.bD=function(t){return this.dD.has(t)},t.prototype.CD=function(){return this.wD},t.prototype._D=function(t,e,i){var s=this;try{var a=new r;this.dD.forEach(function(t,e){a.add(e)});var u=new r;if(u.addEach(t.keys()),this.wD.PD()){var h=this.wD.PD().bitrate;if(u.add(h),u.forEach(function(t){a.delete(t)}),i){var c=[];a.forEach(function(t){s.dD.has(t)&&s.dD.get(t).AD==n.nD&&(c.push(t),u.add(t))}),c.forEach(function(t){a.delete(t)})}var l=new o;u.forEach(function(e){s.dD.has(e)&&s.dD.get(e).AD==n.nD?l.set(e,n.nD):l.set(e,t.get(e))}),this.OD(a),this.ND(l,e)}}catch(t){f.ErrorMonitor.ve().logError("Error updating the prefetch sessions",this.loggerId,p.hs.jn.kn,t)}},t.prototype.ND=function(t,e){var i=this;t.forEach(function(t,n){0!=n&&i.DD(n,t,e)})},t.prototype.OD=function(t){var e=this;t.forEach(function(t){e.yD.kD(t),e.logger.debug(e.loggerId+"Remove unwanted bitrate "+t),e.dD.delete(t)})},t.prototype.DD=function(t,e,i){this.dD.has(t)?this.LD(t,i):this.dD.has(t)||this.MD(t,e,i)},t.prototype.LD=function(t,e){try{var i=this.dD.get(t);i.type=e,i.type!=n.nD&&(i.aD=-1),this.yD.FD(t,i)}catch(t){f.ErrorMonitor.ve().logError("Error configuring already existing prefetch sessions",this.loggerId,p.hs.jn.Ln,t)}},t.prototype.MD=function(t,e,i){var r=this;try{var o=new d;o.b_=null,o.type=i,o.bitrate=t,o.AD=e,this.dD.set(t,o),this.dD.forEach(function(t,e){r.logger.debug(r.loggerId+"ABT "+e+" S "+n[t.type]+" PREF REASON "+n[t.AD])}),this.yD.FD(t,o)}catch(t){f.ErrorMonitor.ve().logError("Error constructing a new prefetch session",this.loggerId,p.hs.jn.Mn,t)}},t.prototype.UD=function(t){var e=this;if(this.dD.has(t.getBitrate())){var i=this.dD.get(t.getBitrate());i.aD>0&&i.BD&&(i.aD=t.duration-(a.Framework.time()-i.BD)-i.hD,i.hD=50),i.b_=t,this.HD(t.getBitrate()),this.dD.forEach(function(i,r){i&&i.type!=n.mc&&r!=t.getBitrate()&&e.xD(i,r)})}else f.ErrorMonitor.ve().logError("Error retrieving a fragment without having a prefetch session",this.loggerId,p.hs.jn.Fn)},t.prototype.qD=function(t){var e=this.dD.keys(),i=e.indexOf(t);return-1!=i&&e.splice(i,1),e},t.prototype.GD=function(t){var e=this;t.forEach(function(t){var i=e.dD.get(t);i&&i.type!=n.mc&&e.xD(i,i.bitrate)})},t.prototype.xD=function(t,e){if(t.type!=n.mc){var i=this.wD.PD();if(null!=i){var r=this.wD.VD(i.C_,e,h.vc.fc);null==r?(this.logger.debug(this.loggerId+"PREFETCHING "+e+" MISSING METADATA "),this.oD(e)):(t.b_=r,this.HD(r.getBitrate()))}else this.logger.debug(this.loggerId+"PLAYER NOT PLAYING "),this.oD(e)}},t.prototype.jD=function(t){var e=this.dD.get(t);e&&e.oD&&(null!=e.b_?(this.logger.debug(this.loggerId+"RESTART PREFETCHING ON AVAILABLE METADATA"),e.oD=!1,this.HD(e.bitrate)):(e.oD=!1,this.xD(e,t)))},t.prototype.QD=function(t){var e=this;t?this.jD(t):this.dD.forEach(function(t,i){e.jD(i)})},t.prototype.HD=function(t){var e=this.wD.PD();if(e){var i=this.dD.get(t);if(i){if(i.b_&&e.getBitrate()==t){var n=this.KD(i.b_.A_(),t);this.yD.setDelta(n)}this.YD(i)}}else f.ErrorMonitor.ve().logError("Error attempting prefetch before having a player request",this.loggerId,p.hs.jn.Un)},t.prototype.YD=function(t){if(t.b_){var e=this.WD(t.b_);if(null!=e)this.zD(e,t);else{var i=t.bitrate;this.logger.debug(this.loggerId+"PREFETCHING "+i+" STOPPED BECAUSE OF MISSING METADATA "),this.dD.get(i).oD=!0,this.oD(i)}}else t.oD=!0,this.oD(t.bitrate)},t.prototype.zD=function(t,e){var i=this,r=this.JD(t.Zf(),t.getBitrate(),t.A_(),e.type);if(r.XD)try{this.pD.has(t.Zf())&&a.Framework.clearTimeout(this.pD.get(t.Zf()));var o=r.type==s.bf.If,h=1;if(o){var l=Math.max(0,e.aD);h=this.mD.ZD(e.type,t.getBitrate(),t.A_(),l)}this.logger.debug(this.loggerId+"PREFETCHING "+t.url+" CDN PREFETCH "+o+" IN "+h+" MSECS");var d=this.dD.get(t.getBitrate());d.b_=t;var g=a.Framework.setTimeout(function(){i.pD.delete(t.Zf());var o=new c.HiveRequest(i.ED.sessionId);o.url=t.url,d.BD=a.Framework.time(),i.lD=0;var h=i.ED.$D(o,t,i.context,r.type);h&&(h.Gf=e.type==n.nD||e.type==n.iD,o.onerror=o.onload=function(){if(h.Jf()==s.bf.If&&(!o.status||o.status<200||o.status>299)){var e=i.dD.get(t.getBitrate());o=null;var n=e.b_.duration,r=e.b_.duration+u.hh.fa.Zo,c=Math.floor(Math.random()*(r-n))+n;e.aD=c-(a.Framework.time()-e.BD),e.hD=0,i.HD(e.b_.bitrate)}})},h);this.pD.set(t.Zf(),g)}catch(t){f.ErrorMonitor.ve().logError("Error requesting for prefetch",this.loggerId,p.hs.jn.xn,t)}},t.prototype.ek=function(){var t=this;this.pD.forEach(function(e,i){t.logger.debug(t.loggerId+"Clearing delayed prefetch timer id "+e),a.Framework.clearTimeout(e),t.pD.delete(i)}),this.isActive=!1},t.prototype.oD=function(t){this.dD.has(t)&&(this.dD.get(t).oD=!0,this.wD.tk(t))},t.prototype.WD=function(t){try{var e=this.dD.get(t.getBitrate()),i=t,n=this.rk(i);return n&&n.Zf()!=t.Zf()?n:n&&n.Zf()==e.b_.Zf()?t:null}catch(t){return f.ErrorMonitor.ve().logError("Error forwarding to next segment",this.loggerId,p.hs.jn.Bn,t),null}},t.prototype.rk=function(t){if(null==t)return null;var e=this.sC.ik(!0),i=t;if(e)for(;null!=i&&-1!=e.indexOf(i.Zf());)if(!(i=this.wD.nk(i)))return i;return i},t.prototype.JD=function(t,e,i,r){try{var o,a=this.sk(t),u=a?s.bf.wf:s.bf.If;o=r!=n.mc?!this.pD.has(t)||u!=s.bf.If:u==s.bf.wf;var h=this.wD.ak(),c=this.hk(i,e,u),l=r==n.nD;return this.logger.debug(this.loggerId+"PREFETCHING "+s.bf[u]+" (LAN LEADER: "+this.yD.ck()+" SITE LEADER: "+l+") CHECKS FOR "+t+" [HAVES:"+a+" NOTBUFFERING:"+h+" DISTANCE:"+c.valid+"("+c.uk+")]"),{XD:o&&h&&c.valid&&this.isActive,type:u}}catch(t){return f.ErrorMonitor.ve().logError("Error checking if allowed to prefetch",this.loggerId,p.hs.jn.Hn,t),{XD:!1,type:s.bf.If}}},t.prototype.hk=function(t,e,i){try{var n=this.wD.lk(t,e);return n<=this.wD.pk()?{uk:n,valid:!0}:{uk:n,valid:!1}}catch(t){return f.ErrorMonitor.ve().logError("Error checking the player distance",this.loggerId,p.hs.jn.qn,t),{uk:0,valid:!1}}},t.prototype.KD=function(t,e){var i=this.wD.PD();if(null!=i){var n=i.A_();return this.wD.dk(n,e,t,e)}return-1},t.prototype.sk=function(t){if(this.fD.contains(t)){var e=this.fD.fk(t);if(e.length>=u.hh.fa.ta){if(u.hh.fa.ia){var i=[],n=[],r=[],o=this.yD.gk();return e.forEach(function(t){t.Ek.peerInfo.type==l.Tc.W&&i.push(t);var e=t.Ek.peerInfo.internalAs;0!=o&&e&&o==e&&n.push(t),t.Ek.peerInfo.type==l.Tc.yc&&r.push(t)}),i.length>0?!this.uD||!this.vk(i,t):!(!this.yD.ck()&&this.yD.yk()||!(n.length>0))||!(!(r.length>0)||!this.yD.Tk()&&this.yD.mk())}return!0}}return!1},t.prototype.vk=function(t,e){try{return this.yD.Ik().length>u.hh.fa.la&&(this.yD.Sk(),t.length==u.hh.fa.ua&&t[0].guid==this.yD.Rk().uuid&&a.Framework.random()>u.hh.fa.pa&&this.lD<u.hh.fa.da&&(this.logger.debug("SKIP PREFETCH CYCLE "+this.lD+" TO OFFLOAD LEADER"),this.lD++,!0))}catch(t){return f.ErrorMonitor.ve().logError("Error deciding to offload the leader",this.loggerId,p.hs.jn.Gn,t),!1}},t.prototype.wk=function(t,e){try{t.bk=t.Kf.id,t.Kf=e,this.logger.debug(this.loggerId+"UPGRADE "+s.bf[t.Jf()]+" REQ "+t.Yf+" FOR "+t.zf.Zf()),t.Jf()==s.bf.wf?(t.qf.p2pAgenTrafficSuccessQt=t.Qf,t.Vf?(t.type=s.bf.Rf,this.vD.Ck(t)||(this.logger.debug(this.loggerId+"SET REQUEST TIMED-OUT WAS 0. CDN COMPENSATION"),this.vD._k(t.Pk,"TIMED-OUT"))):(t.type=s.bf.Tf,this.logger.debug(this.loggerId+"THE HIVE REQ "+t.Zf()+" ARRIVED BEFORE THE P2P_PREFETCH INITIALIZED. CHANGE REQUEST TYPE TO "+s.bf[t.Jf()]))):t.Jf()==s.bf.If&&(t.type=s.bf.Tf)}catch(t){f.ErrorMonitor.ve().logError("Error upgrading prefetch",this.loggerId,p.hs.jn.Vn,t)}},t}();e.Ak=g},function(t,e,i){"use strict";function n(t,e,i){if(!(this instanceof n))return new n(t,e,i);var r=this.head=new this.Node;r.next=r,r.Ok=r,this.ls=e||Object.cs,this.ds=i||Function.us,this.length=0,this.addEach(t)}function r(t){this.head=t,this.Nk=t.next}function o(t){this.value=t,this.Ok=null,this.next=null}t.i=n;var s=(i(11),i(12)),a=i(67),u=i(13),h=i(38);n.Dk=n,Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),Object.addEach(n.prototype,u.prototype),Object.addEach(n.prototype,h.prototype),n.prototype.Es=function(t){return new this.constructor(t,this.ls,this.ds)},n.prototype.find=function(t,e,i){e=e||this.ls;for(var n=this.head,r=this.kk(i,n.next);r!==n;){if(e(r.value,t))return r;r=r.next}},n.prototype.Lk=function(t,e,i){e=e||this.ls;for(var n=this.head,r=this.kk(i,n.Ok);r!==n;){if(e(r.value,t))return r;r=r.Ok}},n.prototype.has=function(t,e){return!!this.find(t,e)},n.prototype.get=function(t,e){var i=this.find(t,e);return i?i.value:this.ds(t)},n.prototype.delete=function(t,e){var i=this.Lk(t,e);if(i){if(this.Mk){var n=[],r=[t];this.QA(n,r,i.index)}return i.delete(),this.length--,this.Mk&&(this.Fk(i.next,i.index),this.GA(n,r,i.index)),!0}return!1},n.prototype.XA=function(t,e){e=e||this.ls;for(var i=this.head,n=i.next,r=0;n!==i;)e(t,n.value)&&(n.delete(),r++),n=n.next;return this.length-=r,r},n.prototype.clear=function(){var t,e;this.Mk&&(e=this.toArray(),t=[],this.QA(t,e,0)),this.head.next=this.head.Ok=this.head,this.length=0,this.Mk&&this.GA(t,e,0)},n.prototype.add=function(t){var e=new this.Node(t);return this.Mk&&(e.index=this.length,this.QA([t],[],e.index)),this.head.Uk(e),this.length++,this.Mk&&this.GA([t],[],e.index),!0},n.prototype.push=function(){var t=this.head;if(this.Mk){var e=Array.prototype.slice.call(arguments),i=[],n=this.length;this.QA(e,i,n);var r=this.head.Ok}for(var o=0;o<arguments.length;o++){var s=arguments[o],a=new this.Node(s);t.Uk(a)}this.length+=arguments.length,this.Mk&&(this.Fk(r.next,void 0===r.index?0:r.index+1),this.GA(e,i,n))},n.prototype.unshift=function(){if(this.Mk){var t=Array.prototype.slice.call(arguments),e=[];this.QA(t,e,0)}for(var i=this.head,n=0;n<arguments.length;n++){var r=arguments[n],o=new this.Node(r);i.Bk(o),i=o}this.length+=arguments.length,this.Mk&&(this.Fk(this.head.next,0),this.GA(t,e,0))},n.prototype.pop=function(){var t,e=this.head;if(e.Ok!==e){if(t=e.Ok.value,this.Mk){var i=[],n=[t],r=this.length-1;this.QA(i,n,r)}e.Ok.delete(),this.length--,this.Mk&&this.GA(i,n,r)}return t},n.prototype.shift=function(){var t,e=this.head;if(e.Ok!==e){if(t=e.next.value,this.Mk){var i=[],n=[t];this.QA(i,n,0)}e.next.delete(),this.length--,this.Mk&&(this.Fk(this.head.next,0),this.GA(i,n,0))}return t},n.prototype.Hk=function(){if(this.head!==this.head.next)return this.head.next.value},n.prototype.xk=function(t){this.head!==this.head.next?this.head.next.value=t:this.push(t)},n.prototype.Bc=function(){return this.Hk()},n.prototype.kk=function(t,e){var i=this.head;if("number"==typeof t){var n=t;if(n>=0)for(t=i.next;n&&(n--,(t=t.next)!=i););else for(t=i;n<0&&(n++,(t=t.Ok)!=i););return t}return t||e},n.prototype.slice=function(t,e){var i=[],n=this.head;for(t=this.kk(t,n.next),e=this.kk(e,n);t!==e&&t!==n;)i.push(t.value),t=t.next;return i},n.prototype.splice=function(t,e){return this.qk(t,e,Array.prototype.slice.call(arguments,2))},n.prototype.qk=function(t,e,i){var n,r,o=t;t=this.kk(t,this.head),null==e&&(e=1/0),i=Array.from(i);for(var s=[],a=t;e--&&e>=0&&a!==this.head;)s.push(a.value),a=a.next;this.Mk&&(n=t===this.head?this.length:t.Ok===this.head?0:t.index,r=t.Ok,this.QA(i,s,n));a=t;var u=0;for(a=t;u<s.length;u++,a=a.next)a.delete();null==o&&a===this.head&&(a=this.head.next);for(u=0;u<i.length;u++){var h=new this.Node(i[u]);a.Uk(h)}return this.length+=i.length-s.length,this.Mk&&(t===this.head?this.Fk(this.head.next,0):this.Fk(r.next,r.index+1),this.GA(i,s,n)),s},n.prototype.reverse=function(){if(this.Mk){var t=this.toArray(),e=t.reversed();this.QA(e,t,0)}var i=this.head;do{var n=i.next;i.next=i.Ok,i.Ok=n,i=i.next}while(i!==this.head);return this.Mk&&this.GA(e,t,0),this},n.prototype.sort=function(){this.qk(0,this.length,this.Fc())},n.prototype.reduce=function(t,e){for(var i=arguments[2],n=this.head,r=n.next;r!==n;)e=t.call(i,e,r.value,r,this),r=r.next;return e},n.prototype.reduceRight=function(t,e){for(var i=arguments[2],n=this.head,r=n.Ok;r!==n;)e=t.call(i,e,r.value,r,this),r=r.Ok;return e},n.prototype.Fk=function(t,e){for(;t!==this.head;)t.index=e++,t=t.next},n.prototype.Xc=function(){this.head.index=-1,this.Fk(this.head.next,0),this.Mk=!0},n.prototype.Hc=function(){return new r(this.head)},r.prototype.Gk=null,Object.defineProperty(r.prototype,"_iterationObject",{get:function(){return this.Gk||(this.Gk={done:!1,value:null})}}),r.prototype.next=function(){if(this.Nk===this.head)this.Vk.done=!0,this.Vk.value=void 0;else{var t=this.Nk.value;this.Nk=this.Nk.next,this.Vk.value=t}return this.Vk},n.prototype.Node=o,o.prototype.delete=function(){this.Ok.next=this.next,this.next.Ok=this.Ok},o.prototype.Uk=function(t){var e=this.Ok;this.Ok=t,t.Ok=e,e.next=t,t.next=this},o.prototype.Bk=function(t){var e=this.next;this.next=t,t.next=e,e.Ok=t,t.Ok=this}},function(t,e,i){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);e=e||Function.us,this.ds=e,this.fs=Object.create(null),this.length=0,this.addEach(t)}var r=(i(11),i(12)),o=i(52),s=i(13);t.i=n,n.jk=n,Object.addEach(n.prototype,r.prototype),Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,s.prototype),n.prototype.Es=function(t){return new this.constructor(t,this.ds)},n.prototype.Qk=function(t){if("string"!=typeof t)throw new TypeError("key must be a string but Got "+t)},Object.defineProperty(n.prototype,"$__proto__",{Ah:!0}),Object.defineProperty(n.prototype,"_hasProto",{get:function(){return this.hasOwnProperty("$__proto__")&&void 0!==this.Kk}}),Object.defineProperty(n.prototype,"_protoValue",{get:function(){return this.Yk},set:function(t){this.Yk=t}}),n.prototype.get=function(t,e){return this.Qk(t),"__proto__"===t?this.Wk?this.Kk:arguments.length>1?e:this.ds(t):t in this.fs?this.fs[t]:arguments.length>1?e:this.ds(t)},n.prototype.set=function(t,e){this.Qk(t);var i="__proto__"===t;return(i?this.Wk:t in this.fs)?(this.zk&&this.Jk(t,i?this.Kk:this.fs[t]),i?this.Kk=e:this.fs[t]=e,this.zk&&this.Xk(t,e),!1):(this.zk&&this.Jk(t,void 0),this.length++,i?this.Kk=e:this.fs[t]=e,this.zk&&this.Xk(t,e),!0)},n.prototype.has=function(t){return this.Qk(t),"__proto__"===t?this.Wk:t in this.fs},n.prototype.delete=function(t){return this.Qk(t),"__proto__"===t?!!this.Wk&&(this.zk&&this.Jk(t,this.Kk),this.Kk=void 0,this.length--,this.zk&&this.Xk(t,void 0),!0):t in this.fs&&(this.zk&&this.Jk(t,this.fs[t]),delete this.fs[t],this.length--,this.zk&&this.Xk(t,void 0),!0)},n.prototype.clear=function(){var t;for(t in this.Wk&&(this.zk&&this.Jk("__proto__",this.Kk),this.Kk=void 0,this.zk&&this.Xk("__proto__",void 0)),this.fs)this.zk&&this.Jk(t,this.fs[t]),delete this.fs[t],this.zk&&this.Xk(t,void 0);this.length=0},n.prototype.reduce=function(t,e,i){this.Wk&&(e=t.call(i,e,"$__proto__","__proto__",this));var n=this.fs;for(var r in this.fs)e=t.call(i,e,n[r],r,this);return e},n.prototype.reduceRight=function(t,e,i){var n=this,r=this.fs;return e=Object.keys(this.fs).reduceRight(function(e,o){return t.call(i,e,r[o],o,n)},e),this.Wk?t.call(i,e,this.Kk,"__proto__",n):e},n.prototype.Bc=function(){var t;for(t in this.fs)return this.fs[t];return this.Kk},n.prototype.toJSON=function(){return this.Pc()}},function(t,e,i){"use strict";function n(){throw new Error("Can't construct. GenericMap is a mixin.")}function r(t,e){this.key=t,this.value=e}var o=i(36),s=i(101),a=i(13);t.i=n,o.addEach(n.prototype,s.prototype),o.addEach(n.prototype,a.prototype),n.prototype.isMap=!0,n.prototype.addEach=function(t){if(t&&o(t)===t)if("function"==typeof t.forEach)!0===t.isMap?t.forEach(function(t,e){this.set(e,t)},this):t.forEach(function(t){this.set(t[0],t[1])},this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);else o.keys(t).forEach(function(e){this.set(e,t[e])},this);else if(t&&"number"==typeof t.length)for(e=0;e<t.length;e++)this.add(t[e],e);return this},n.prototype.get=function(t,e){var i=this.fs.get(new this.Zk(t));return i?i.value:arguments.length>1?e:this.ds(t)},n.prototype.set=function(t,e){var i=new this.Zk(t,e),n=this.fs.get(i),r=!1;return n?(this.zk&&this.Jk(t,n.value),n.value=e,this.zk&&this.Xk(t,e)):(this.zk&&this.Jk(t,void 0),this.fs.add(i)&&(this.length++,r=!0),this.zk&&this.Xk(t,e)),r},n.prototype.add=function(t,e){return this.set(e,t)},n.prototype.has=function(t){return this.fs.has(new this.Zk(t))},n.prototype.delete=function(t){var e=new this.Zk(t);if(this.fs.has(e)){var i=this.fs.get(e).value;return this.zk&&this.Jk(t,i),this.fs.delete(e),this.length--,this.zk&&this.Xk(t,void 0),!0}return!1},n.prototype.clear=function(){var t;this.zk&&(this.forEach(function(t,e){this.Jk(e,t)},this),t=this.keys()),this.fs.clear(),this.length=0,this.zk&&t.forEach(function(t){this.Xk(t)},this)},n.prototype.reduce=function(t,e,i){return this.fs.reduce(function(e,n){return t.call(i,e,n.value,n.key,this)},e,this)},n.prototype.reduceRight=function(t,e,i){return this.fs.reduceRight(function(e,n){return t.call(i,e,n.value,n.key,this)},e,this)},n.prototype.keys=function(){return this.map(function(t,e){return e})},n.prototype.values=function(){return this.map(Function.identity)},n.prototype.entries=function(){return this.map(function(t,e){return[e,t]})},n.prototype.$k=function(){return this.entries()},n.prototype.cs=function(t,e){return e=e||o.cs,this===t||(t&&"function"==typeof t.every?t.length===this.length&&t.every(function(t,i){return e(this.get(i),t)},this):o.keys(t).length===this.length&&o.keys(t).every(function(i){return e(this.get(i),t[i])},this))},n.prototype.toJSON=function(){return this.entries()},n.prototype.Zk=r,r.prototype.cs=function(t){return o.cs(this.key,t.key)&&o.cs(this.value,t.value)},r.prototype.Oc=function(t){return o.Oc(this.key,t.key)}},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(70),o=i(21),s=i(71),a=i(7),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.me=function(t){e.logger=t},e.prototype.send=function(){if(e.logger&&e.logger.debug(this.method+" "+this.url),!this.sessionId){var t=Object.keys(e.ub);t.length>0&&(this.sessionId=e.ub[t[0]])}var i=this,n=new XMLHttpRequest;0===this.url.indexOf("//")&&(this.url=location.protocol+this.url);var s=o.Ip(r.tL.eL,r.tL.dO,r.tL.rL,this.sessionId,encodeURIComponent(this.url));n.open("GET",s),this.responseType&&(n.responseType=this.responseType),n.onreadystatechange=function(){},n.onload=function(){if(4===n.readyState)try{i.responseHeaders=n.getAllResponseHeaders(),i.response=n.response;var t=n.response.byteLength;"arraybuffer"!==n.responseType&&(i.responseText=n.response),i.readyState=4,i.status=n.status,i.dispatchEvent(a.rc.createEvent(ProgressEvent,"progress",{lengthComputable:!0,loaded:t,total:t,currentTarget:i})),i.dispatchEvent(a.rc.createEvent(Event,"readystatechange",{currentTarget:i,bubbles:!1,cancelable:!1})),i.dispatchEvent(a.rc.createEvent(ProgressEvent,"load",{currentTarget:i,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:t,total:0})),i.dispatchEvent(a.rc.createEvent(ProgressEvent,"loadend",{currentTarget:i,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:t,total:0}))}catch(t){e.logger&&e.logger.warn(t)}},n.onerror=function(t){e.logger&&e.logger.warn("onError: "+JSON.stringify(t)),i.dispatchEvent(a.rc.createEvent(ErrorEvent,"error",t,i))},n.onabort=function(t){e.logger&&e.logger.warn("onAbort: "+JSON.stringify(t)),i.dispatchEvent(a.rc.createEvent(ProgressEvent,"abort",t,i))},n.send()},e.prototype.abort=function(){},e}(s.pb);e.Zu=u},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(31),o=i(74),s=i(1),a=i(7),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loggerId="[HiveRequestManifest]",e}return n(e,t),e.registerTech=function(t,i){e.iL[i]=t},e.registerComm=function(t,i){e.nL[i]=t},e.prototype.send=function(){if(!this.sessionId){var t=Object.keys(e.nL);t.length>0&&(this.sessionId=e.nL[t[0]])}var i=e.iL[this.sessionId],n=e.nL[this.sessionId];o.sL(i)||o.sL(n)?(s.ErrorMonitor.ve().logError("HiveJS Tech or Comm are not defined",this.loggerId),this.resolve()):(n.logger().debug("Intercepted Manifest Request "+this.url),i.oL(this),n.onActivateSession(this.url))},e.prototype.resolve=function(){var t=this,e=new XMLHttpRequest;e.open("GET",this.url),e.onreadystatechange=function(){4===e.readyState&&(t.response=e.responseText,t.responseText=e.responseText,t.readyState=4,t.status=e.status,t.dispatchEvent(a.rc.createEvent(Event,"readystatechange",{currentTarget:t})),t.dispatchEvent(a.rc.createEvent(ProgressEvent,"onload",{currentTarget:t})),console.debug("Returned Manifest Request "+t.url))},e.send()},e}(r.HiveRequest);u.nL={},u.iL={},e.zu=u},function(t,e,i){"use strict";!function(){var e=i(17),n=e.log,r=e.Wu;t.i.Wu=r,t.i.Vu=e.Vu,t.i.Gu=e.Gu;var o=i(122)||null,s=i(124)||null,a=i(127)||null,u=i(129)||null;switch(r.Qu){case"chrome":if(!o||!o.aL)return void n("Chrome shim is not included in this adapter release.");n("adapter.js shimming chrome."),t.i.hL=o,o.cL(),o.uL(),e.Ku(),o.lL(),o.aL(),o.pL(),o.dL();break;case"firefox":if(!a||!a.aL)return void n("Firefox shim is not included in this adapter release.");n("adapter.js shimming firefox."),t.i.hL=a,a.cL(),e.Ku(),a.lL(),a.aL(),a.pL();break;case"edge":if(!s||!s.aL)return void n("MS edge shim is not included in this adapter release.");n("adapter.js shimming edge."),t.i.hL=s,s.cL(),e.Ku(),s.aL();break;case"safari":if(!u)return void n("Safari shim is not included in this adapter release.");n("adapter.js shimming safari."),t.i.hL=u,u.cL();break;default:n("Unsupported browser!")}}()},function(t,e,i){"use strict";var n=i(32),r=i(4),o=i(18),s=i(21),a=i(130).HiveComm.Options.fL,u=i(19),h=i(131),c=i(1),l=function(){function t(e,i){this.gL=e,this.options_=new a,void 0!==i[t.EL]&&s.Sp(i[t.EL],this.options_)}return t.prototype.getName=function(){return t.EL},t.prototype.id=function(){return"["+t.EL+"] "},t.prototype.getVersion=function(){return this.gL.getPluginVersion()},t.prototype.vL=function(){return!0},t.prototype.yL=function(){return r.resolve(!0)},t.prototype.initSession=function(t,e){var i=this.TL(t,e.ticket,e.ticket.NN(),e);return o.HiveRequestFactory.registerTech(i.id,this.getName()),r.resolve(i)},t.prototype.mL=function(){return this.options().initTimeout},t.prototype.isActive=function(t,e){var i=e.manifest.toLowerCase().indexOf("/manifest");if(i>-1){var n=e.manifest.substring(0,i);if(t.indexOf(n)>-1)return!0}else if(t==e.manifest)return!0;return!1},t.prototype.ol=function(t,e,i){void 0===i&&(i=!0),t.rl&&(this.gL.logger().debug("[StatsJS] stopping session ["+t.id+"] complete close: "+e),t.rl.xl.Zd(i),t.rl.Bl.IL(),t.rl.Bl.reset(e)),e?n.Hive.Reporting().close(t.id):this.nl(t,!0)},t.prototype.nl=function(t,e){var i=e?u.Ml.IDLE:u.Ml.Ll;this.gL.logger().notice("[HiveComm] client state: "+u.Ml[i]),t.rl&&t.rl.nl(i)},t.prototype.SL=function(t,e){var i=this,n=0;return this.RL<e.Ol&&(n=e.Ol-this.RL,this.RL=e.Ol),t.al().then(function(){t.rl.Ul.wL(n,e.Al),t.rl.Hl.Sd(e.Pl,e.Al,e.Ol),i.bL()}).done(),r.resolve(!0)},t.prototype.CL=function(t,e,i){return t.al().then(function(){t.rl.Hl.wd(t.ticket.sessionId,e,i)}).done(),r.resolve(!0)},t.prototype.bd=function(t,e){return t.al().then(function(){t.rl.Hl.Cd([e])}).done(),r.resolve(!0)},t.prototype.onError=function(t){var e=!0;if(null!=this.options().onError)try{e=this.options().onError(t)}catch(t){c.ErrorMonitor.ve().logError("exception in user-defined onError callback",this.id(),t)}return e},t.prototype.onActiveSession=function(t){var e=this;this._L(),t.al().then(function(i){e.PL=i;var n=new h.AL(e.gL.isLive(),e.gL.getStreamProtocol(),t.ticket.NN());e.PL.OL=n,e.PL.Ul.OL=n,e.gL.updatePlayerInfo(e.PL),e.PL.Bl.init(e.PL.Ul,t.id),e.gL.options().testId&&e.PL.Ul.NL(e.gL.options().testId),e.PL.Hl.Xu(t.ticket.sessionId,e.gL.getPlayerSource(),200);var r=e.gL.flushTechEvents();if(r&&r.length>0&&e.PL.Hl.Cd(r),null!=e.options_.onActiveSession)try{e.options_.onActiveSession(t.toHiveSession())}catch(t){c.ErrorMonitor.ve().logError("exception in user-defined onActiveSession callback",e.id(),t)}}).done()},t.prototype.DL=function(){},t.prototype.kL=function(){},t.prototype.LL=function(t){this.gL=t},t.prototype.options=function(){return this.options_},t.prototype._L=function(){this.RL=0},t.prototype.TL=function(t,e,i,n){var r=new o.cl(t,e,i,n);return r.ML=!1,r.id=e.sessionId,r},t.prototype.bL=function(){try{var t=this.gL.getExtendedStats();null!=t&&(this.PL.Ul.FL.metrics.bitrateUpN+=t.getBitrateSwitchUp(),this.PL.Ul.FL.metrics.bitrateDwnN+=t.getBitrateSwitchDown(),null!=t.getBandwidth()&&(this.PL.Ul.FL.metrics.srcThroughput=t.getBandwidth()),null!=t.getVideoBitrates()&&this.UL(!0,t.getVideoBitrates()),null!=t.getAudioBitrates()&&this.UL(!1,t.getAudioBitrates()))}catch(t){c.ErrorMonitor.ve().logError("Error accounting extended stats",this.id(),t)}},t.prototype.UL=function(t,e){var i=this,n=0,r=0,o=0,s=0;e.forEach(function(e,a){var u=e.success+e.ll;if(n+=u,s+=e.bytes,r+=e.success,o+=e.ll,t){var h=i.PL.Ul.BL(Number(a));i.HL(h,u,e.success,e.ll,e.bytes)}});var a=this.PL.Ul.xL();this.HL(a,n,r,o,s)},t.prototype.HL=function(t,e,i,n,r){t.srcReqN+=e,t.srcRespN+=i,t.srcRespErrN+=n,t.srcRespQt+=r,t.respFallbackN+=i,t.respFallbackErrN+=n},t}();l.EL="StatsJS",e.StatsJS=l},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(58),o=i(142),s=i(9),a=i(34),u=i(31),h=i(0),c=i(1),l=i(2),f=i(143),p=i(150);!function(t){function e(e){return-1!=e.toLowerCase().indexOf(t.VL.toLowerCase())||-1!=e.toLowerCase().indexOf(t.jL.toLowerCase())}function i(e,i){var n=i.replace("_definst_/","").match(new RegExp(e.replace(".mpd","")+t.QL));return n&&n.length>0}t.KL=1,t.YL=2,t.WL=2e3,t.zL=3e4,t.JL=1e4,t.XL=!0,t.ZL=!0,t.$L=500,t.eM=10,t.DASH_METADATA_MIN_FRAGMENTS=3,t.VL="(format=mpd-time-csf)",t.jL=".mpd",t.QL="_.*.mpd",t.GL=".m4s",t.tM=".ism/",t.rM=function(e){return this.qL(e)||-1!=e.indexOf(t.GL)},t.qL=e;var d=function(r){function d(e,i){var n=r.call(this,i)||this;return n.Ag=0,n.iM=!0,n.loggerId="[Dash Context] ",n.ticket=e,n.nM=e._N(),n.sM=new o.oM,n.nM.indexOf(t.jL)>0?n.aM=new f.hM(i.sessionId):n.aM=new p.cM(i.sessionId),n}return n(d,r),d.prototype.Sk=function(){return this.ticket},d.prototype.getStreamProtocol=function(){return StreamProtocol.DASH},d.prototype.uM=function(){return this.nM},d.prototype.lM=function(){return this.aM.lM()},d.prototype.isLive=function(){return this.aM.pM()},d.prototype.dM=function(){return this.sM},d.prototype.ig=function(t){var e=this.Xf(t);if(e==s.vc.fc||e==s.vc.dc)return!0},d.prototype.Xf=function(t){try{if(e(t))return s.vc.gc;if(this.fM(t))return s.vc.Ec;var i=this.aM.gM(t);return null!=i?i.type:-1!=t.indexOf("audio")?s.vc.dc:s.vc.Ec}catch(i){return c.ErrorMonitor.ve().logError("Error getting the entity type based on a url",this.loggerId,l.hs.Yr.Br,{detailedError:i,url:t}),s.vc.Ec}},d.prototype.EM=function(t){var e=s.vc.Ec,i=0,n=0,r=0,o=!0,u=!1,h=0;try{if(e=this.Xf(t),this.fM(t))o=!0;else if(e!=s.vc.gc){var f=this.aM.gM(t);null!=f?(i=f.duration,n=f.bitrate,r=f.id,u=this.ig(t)):(this.tk(),this.logger.warn("could not extract segment info for "+t))}else o=!1;return h=Math.round(i/1e4),new a.N_(t,e,o,r,h,n,u,this.getContextId())}catch(e){return c.ErrorMonitor.ve().logError("Error getting the entity characteristics based on a url",this.loggerId,l.hs.Yr.Hr,{detailedError:e,url:t}),new a.N_(t,s.vc.Ec,!1,0,0,0,!1,this.getContextId())}},d.prototype.nk=function(t){try{var e=t.url,i=this.aM.vM(e);return null!=i?this.EM(i.yM):null}catch(e){return c.ErrorMonitor.ve().logError("Error getting the next entity",this.loggerId,l.hs.Yr.xr,{detailedError:e,url:t.url}),null}},d.prototype.ak=function(){return r.prototype.TM.call(this,t.KL,t.YL)},d.prototype.mM=function(t){try{var n=t.url;return n.toLowerCase(),n===this.nM||!(null==this.aM||!this.aM.fM(n))||!(e(n)&&this.aM.IM!==n&&!i(this.aM.IM,n))}catch(n){return c.ErrorMonitor.ve().logError("Error identifying if is current context",this.loggerId,l.hs.Yr.qr,{detailedError:n,url:t.url}),!1}},d.prototype.SM=function(t){try{var e=t.RM,i=t.Kf.url,n=this.aM.parse(i,e,t.Kf.internal);t.Kf.responseText=n,t.Kf.response=n}catch(e){c.ErrorMonitor.ve().logError("Error parsing received metadata",this.loggerId,l.hs.Yr.Gr,{detailedError:e,url:t.Kf.url}),t.RM&&(t.Kf.responseText=t.RM,t.Kf.response=t.RM)}try{this.wM.QD()}catch(e){c.ErrorMonitor.ve().logError("Error starting prefetcher after fetching metadata",this.loggerId,l.hs.Yr.Vr,{detailedError:e,url:t.Kf.url})}this.bM()},d.prototype.CM=function(t){var e=this;try{r.prototype.CM.call(this,t),t.Xf()!==s.vc.fc&&t.Xf()!==s.vc.dc||(t.Xf()===s.vc.fc&&this.sM._M(t),this.aM.CM(t).then(function(i){i&&e.bM(),t.Xf()==s.vc.fc&&e.wM.UD(t.zf)}).done())}catch(t){c.ErrorMonitor.ve().logError("Error when received a fragment",this.loggerId,l.hs.Yr.jr,t)}},d.prototype.getContextId=function(){return this.ticket.kN()},d.prototype.PM=function(t,e){var i=t;return i.AM=h.Framework.time(),r.prototype.PM.call(this,i,e)},d.prototype.dk=function(t,e,i,n){return this.aM.dk(t,e,i,n)},d.prototype.fM=function(t){return this.aM.fM(t)},d.prototype.bM=function(){var e=this;try{this.aM.OM?this.aM.OM.NM().then(function(i){if(i)e.iM=!0,e.logger.debug("Protection evaluation: can decrypt");else{var n="Protection evaluation: cannot decrypt ["+(t.XL?"error":"disabled")+"]";t.ZL?(e.iM=!0,e.logger.debug(n+", metadata prefetch enabled")):e.logger.warn(n+", metadata prefetch DISABLED")}}).done():this.logger.debug("Protection evaluation: not encrypted")}catch(e){if(c.ErrorMonitor.ve().logError("Error evaluating the protection",this.loggerId,l.hs.Yr.Qr,e),t.ZL){var i="Protection evaluation: cannot decrypt ["+(t.XL?"error":"disabled")+"]";this.iM=!0,this.logger.debug(i+", metadata prefetch enabled")}}},d.prototype.tk=function(){this.iM&&(null==this.DM&&this.aM.pM()?this.kM():this.logger.debug("DASH PRE-FETCHING METADATA ALREADY SCHEDULED OR NOT LIVE"))},d.prototype.LM=function(){this.iM&&null!=this.DM&&h.Framework.clearTimeout(this.DM)},d.prototype.kM=function(){var e=this,i=(null!=this.MM?this.MM:0)+t.WL,n=Math.max(1,i-h.Framework.time()+t.$L);this.logger.debug("DASH PREFETCHING METADATA "+this.aM.IM+" IN "+n),this.DM=h.Framework.setTimeout(function(){e.FM(e.aM.IM,h.Framework.time())},n)},d.prototype.FM=function(t,e){var i=this.MM;if(null==i&&(i=0),i>e)this.kM();else{var n=new u.HiveRequest(this.ticket.sessionId);n.open("GET",t),n.internal=!0,n.send(),this.DM=null,this.MM=h.Framework.time()}},d.prototype.UM=function(t){this.aM.authenticationToken=t},d.prototype.lk=function(t,e){try{var i=this.PD(),n=this.BM(),r=i.A_(),o=this.aM.HM(r,i.getBitrate(),t,e),s=h.Framework.time()-n;return Math.max(0,o-s)}catch(t){return c.ErrorMonitor.ve().logError("Error calculating the distance duration",this.loggerId,l.hs.Yr.Kr,t),0}},d.prototype.xM=function(){return t.JL},d.prototype.VD=function(t,e,i){var n=this.aM.qM(t,e);return null!=n?new a.N_(n.yM,i,!0,t,n.duration,e,!0,this.getContextId()):null},d.prototype.pk=function(){return t.zL},d}(r.GM);t.VM=d}(e.DASH||(e.DASH={}))},function(t,e,i){"use strict";var n=i(48),r=i(34),o=i(0),s=i(140),a=i(9),u=i(24),h=i(49),c=i(5),l=i(2),f=i(1),p=function(){function t(t){this.jM="[VideoContext] ",this.QM=new n,this.logger=o.Framework.resolve(o.Framework.V.R).log(t.sessionId),this.yD=t.yD,this.KM=t.YM,this.WM=t.WM,this.wM=t.zM,this.wM.RD(this,this)}return t.prototype.Sk=function(){return null},t.prototype.JM=function(){return this.wM},t.prototype.TM=function(t,e){try{var i=0,n=0;if(this.QM.length<e)return!0;for(var r=this.QM.keys().reverse(),o=r[0],s=this.QM.get(o).bitrate,a=r.slice(1),u=0;u<a.length;u++){var h=a[u],c=this.QM.get(h),p=c.AM,d=c.bitrate,g=Math.abs(c.AM-o);if(d!=s)return!1;if(g<t){if(++n>=e)return!1}else{if(++i>e)return!0;n=Math.max(0,n-1),o=p,s=d}}return!1}catch(t){return f.ErrorMonitor.ve().logError("Error calculating if the player is in buffering mode",this.jM,l.hs.bi.Si,t),!1}},t.prototype.getContextId=function(){return null},t.prototype.PM=function(t,e){if(this.XM(e)){var i=this.PD();if(i){var n=t.getBitrate(),r=i.getBitrate();n>r?this.KM.ZM(!0):n<r&&this.KM.ZM(!1)}else this.KM.ZM(!0);if(this.QM.length>c.hh.ya.ga){var s=this.QM.keys()[0];this.QM.delete(s)}this.QM.set(o.Framework.time(),t)}return this.$M(t,e)},t.prototype.$M=function(t,e){var i=new s.eF;try{if(this.wM.bD(t.bitrate)){if(this.WM.tF(t.Zf())){i.rF=!0;var n=this.WM.iF(t.Zf());this.nF(e,n,i)}if(this.WM.sF(t.Zf()))for(var r=this.WM.oF(t.Zf()),o=0,a=r;o<a.length;o++){var u=a[o];this.nF(e,u.Jf(),i),i.aF=!0}}else{var c=h.sD.mc;this.yD.ck()&&(c=h.sD.iD),this.wM.DD(t.bitrate,c,c)}return i}catch(t){return f.ErrorMonitor.ve().logError("Error configuring the request directive",this.jM,l.hs.bi.Ri,t),new s.eF}},t.prototype.nF=function(t,e,i){t!=u.bf.If&&t!=u.bf.wf||e!=u.bf.Tf&&e!=u.bf.wf&&e!=u.bf.If||(i.hF=!0)},t.prototype.XM=function(t){return t!=u.bf.wf&&t!=u.bf.If},t.prototype.cF=function(t,e,i){var n=[];try{for(var r=this.WM.oF(e.Zf()),o=0,s=r;o<s.length;o++){var a=s[o];a.Jf()!=u.bf.Tf&&(this.wM.wk(a,t),n.push(a.bk))}return n}catch(t){return f.ErrorMonitor.ve().logError("Error attempting to upgrade prefetch",this.jM,l.hs.bi.wi,t),[]}},t.prototype.uF=function(t){this.WM.uF(t)},t.prototype.lF=function(t,e){this.WM.lF(t,e)},t.prototype.pF=function(t){this.WM.pF(t)},t.prototype.dF=function(t){this.WM.fF(t)},t.prototype.gF=function(t){this.WM.EF()||this.wM.HD(t)},t.prototype.PD=function(){var t=this.QM.keys();return t.length>0?this.QM.get(t[t.length-1]):null},t.prototype.BM=function(){var t=this.QM.keys();if(t.length>0)return t[t.length-1]},t.prototype.vF=function(t){var e=this.yF(t);null!=e&&this.gF(e.bitrate)},t.prototype.yF=function(t){var e=t.fragmentId,i=e.slice(0,e.lastIndexOf("-")),n=i.slice(0,i.lastIndexOf("-")),o=t.getType();return new r.N_(n,o,!0,t.id,t.duration,t.bitrate,!0,this.getContextId())},t.prototype.ak=function(){return!1},t.prototype.dk=function(t,e,i,n){return 0},t.prototype.pk=function(){return 3e4},t.prototype.xM=function(){return 1e4},t.prototype.nk=function(t){return null},t.prototype.VD=function(t,e,i){return null},t.prototype.getStreamProtocol=function(){return null},t.prototype.isLive=function(){return!1},t.prototype.tk=function(t){},t.prototype.LM=function(){},t.prototype.lM=function(){return null},t.prototype.mM=function(t){},t.prototype.dM=function(){},t.prototype.EM=function(t){},t.prototype.SM=function(t){},t.prototype.CM=function(t){t.Xf()===a.vc.fc&&this.lF(t.Zf(),t.$f())},t.prototype.uM=function(){return null},t.prototype.UM=function(t){},t.prototype.lk=function(t,e){return 0},t}();e.GM=p},function(t,e,i){"use strict";function n(t,e,i,o){if(!(this instanceof n))return new n(t,e,i,o);r.call(this,t,e,i,o)}t.i=n;var r=(i(11),i(141)),o=i(39),s=i(13);n.TF=n,n.prototype=Object.create(r.prototype),n.prototype.constructor=n,Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,s.prototype),n.prototype.mF=!0,n.prototype.add=function(t){return!this.has(t)&&(r.prototype.add.call(this,t),!0)},n.prototype.reduce=function(t,e){var i=this,n=arguments[2];return this.NT.reduce(function(e,r,o){return t.call(n,e,r,o,i)},e)},n.prototype.reduceRight=function(t,e){var i=this,n=arguments[2];return this.NT.reduceRight(function(e,r,o){return t.call(n,e,r,o,i)},e)}},function(t,e,i){var n=i(33);"undefined"==typeof hive&&(hive={}),void 0===hive.services&&(hive.services={}),void 0===hive.services.protocol&&(hive.services.protocol={}),void 0===hive.services.protocol.IF&&(hive.services.protocol.IF={}),hive.services.protocol.IF.wc={1:"PLAYER",mc:1,2:"P2P_AGENT",Ic:2,3:"PREFETCHER_FIRST_TIER",Sc:3,4:"PREFETCHER_SECOND_TIER",Rc:4},hive.services.protocol.IF.SF={1:"Global",RF:1,2:"InternalAs",wF:2,3:"ExternalAs",bF:3},hive.services.protocol.IF.CF={1:"Internal",_F:1,2:"External",External:2},hive.services.protocol.IF.TrackerPeerStreamInfo=function(t){this.state=null,this.bitrate=null,this.delta=null,t&&(void 0!==t.state&&(this.state=t.state),void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.delta&&(this.delta=t.delta))},hive.services.protocol.IF.TrackerPeerStreamInfo.prototype={},hive.services.protocol.IF.TrackerPeerStreamInfo.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.state=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.I32?this.bitrate=t.Fb().value:t.Mb(i);break;case 3:i==n.Type.I32?this.delta=t.Fb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.TrackerPeerStreamInfo.prototype.write=function(t){t.Hb("TrackerPeerStreamInfo"),null!==this.state&&void 0!==this.state&&(t.xb("state",n.Type.I32,1),t.Vb(this.state),t.Gb()),null!==this.bitrate&&void 0!==this.bitrate&&(t.xb("bitrate",n.Type.I32,2),t.Vb(this.bitrate),t.Gb()),null!==this.delta&&void 0!==this.delta&&(t.xb("delta",n.Type.I32,3),t.Vb(this.delta),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.TrackerPeerInfo=function(t){this.guid=null,this.internalAs=null,this.externalAs=null,this.nat=null,this.bandwidth=null,this.watchingBitrate=null,this.privateIp=null,this.publicIp=null,this.streams=null,this.rankValue=null,this.timestamp=null,this.publicIpString=null,this.privateIpString=null,t&&(void 0!==t.guid&&(this.guid=t.guid),void 0!==t.internalAs&&(this.internalAs=t.internalAs),void 0!==t.externalAs&&(this.externalAs=t.externalAs),void 0!==t.nat&&(this.nat=t.nat),void 0!==t.bandwidth&&(this.bandwidth=t.bandwidth),void 0!==t.watchingBitrate&&(this.watchingBitrate=t.watchingBitrate),void 0!==t.privateIp&&(this.privateIp=t.privateIp),void 0!==t.publicIp&&(this.publicIp=t.publicIp),void 0!==t.streams&&(this.streams=t.streams),void 0!==t.rankValue&&(this.rankValue=t.rankValue),void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.publicIpString&&(this.publicIpString=t.publicIpString),void 0!==t.privateIpString&&(this.privateIpString=t.privateIpString))},hive.services.protocol.IF.TrackerPeerInfo.prototype={},hive.services.protocol.IF.TrackerPeerInfo.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.STRING?this.guid=t.v_().value:t.Mb(i);break;case 2:i==n.Type.I32?this.internalAs=t.Fb().value:t.Mb(i);break;case 3:i==n.Type.I32?this.externalAs=t.Fb().value:t.Mb(i);break;case 4:i==n.Type.I32?this.nat=t.Fb().value:t.Mb(i);break;case 5:i==n.Type.I32?this.bandwidth=t.Fb().value:t.Mb(i);break;case 6:i==n.Type.I32?this.watchingBitrate=t.Fb().value:t.Mb(i);break;case 7:i==n.Type.STRUCT?(this.privateIp=new InetAddress,this.privateIp.read(t)):t.Mb(i);break;case 8:i==n.Type.STRUCT?(this.publicIp=new InetAddress,this.publicIp.read(t)):t.Mb(i);break;case 9:if(i==n.Type.LIST){var o,s;this.streams=[],(o=t.a_()).h_,s=o.size;for(var a=0;a<s;++a){var u=null;(u=new hive.services.protocol.IF.TrackerPeerStreamInfo).read(t),this.streams.push(u)}t.c_()}else t.Mb(i);break;case 10:i==n.Type.DOUBLE?this.rankValue=t.E_().value:t.Mb(i);break;case 11:i==n.Type.I64?this.timestamp=t.g_().value:t.Mb(i);break;case 12:i==n.Type.STRING?this.publicIpString=t.Lb().value:t.Mb(i);break;case 13:i==n.Type.STRING?this.privateIpString=t.Lb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.TrackerPeerInfo.prototype.write=function(t){if(t.Hb("TrackerPeerInfo"),null!==this.guid&&void 0!==this.guid&&(t.xb("guid",n.Type.STRING,1),t.WC(this.guid),t.Gb()),null!==this.internalAs&&void 0!==this.internalAs&&(t.xb("internalAs",n.Type.I32,2),t.Vb(this.internalAs),t.Gb()),null!==this.externalAs&&void 0!==this.externalAs&&(t.xb("externalAs",n.Type.I32,3),t.Vb(this.externalAs),t.Gb()),null!==this.nat&&void 0!==this.nat&&(t.xb("nat",n.Type.I32,4),t.Vb(this.nat),t.Gb()),null!==this.bandwidth&&void 0!==this.bandwidth&&(t.xb("bandwidth",n.Type.I32,5),t.Vb(this.bandwidth),t.Gb()),null!==this.watchingBitrate&&void 0!==this.watchingBitrate&&(t.xb("watchingBitrate",n.Type.I32,6),t.Vb(this.watchingBitrate),t.Gb()),null!==this.privateIp&&void 0!==this.privateIp&&(t.xb("privateIp",n.Type.STRUCT,7),this.privateIp.write(t),t.Gb()),null!==this.publicIp&&void 0!==this.publicIp&&(t.xb("publicIp",n.Type.STRUCT,8),this.publicIp.write(t),t.Gb()),null!==this.streams&&void 0!==this.streams){for(var e in t.xb("streams",n.Type.LIST,9),t.HC(n.Type.STRUCT,this.streams.length),this.streams)this.streams.hasOwnProperty(e)&&(e=this.streams[e]).write(t);t.xC(),t.Gb()}null!==this.rankValue&&void 0!==this.rankValue&&(t.xb("rankValue",n.Type.DOUBLE,10),t.YC(this.rankValue),t.Gb()),null!==this.timestamp&&void 0!==this.timestamp&&(t.xb("timestamp",n.Type.I64,11),t.KC(this.timestamp),t.Gb()),null!==this.publicIpString&&void 0!==this.publicIpString&&(t.xb("publicIpString",n.Type.STRING,12),t.qb(this.publicIpString),t.Gb()),null!==this.privateIpString&&void 0!==this.privateIpString&&(t.xb("privateIpString",n.Type.STRING,13),t.qb(this.privateIpString),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.CustomerKey=function(t){this.partnerId=null,this.customerId=null,t&&(void 0!==t.partnerId&&(this.partnerId=t.partnerId),void 0!==t.customerId&&(this.customerId=t.customerId))},hive.services.protocol.IF.CustomerKey.prototype={},hive.services.protocol.IF.CustomerKey.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.STRING?this.partnerId=t.Lb().value:t.Mb(i);break;case 2:i==n.Type.STRING?this.customerId=t.Lb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.CustomerKey.prototype.write=function(t){t.Hb("CustomerKey"),null!==this.partnerId&&void 0!==this.partnerId&&(t.xb("partnerId",n.Type.STRING,1),t.qb(this.partnerId),t.Gb()),null!==this.customerId&&void 0!==this.customerId&&(t.xb("customerId",n.Type.STRING,2),t.qb(this.customerId),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.TrackerAsQuery=function(t){this.asType=null,this.asn=null,t&&(void 0!==t.asType&&(this.asType=t.asType),void 0!==t.asn&&(this.asn=t.asn))},hive.services.protocol.IF.TrackerAsQuery.prototype={},hive.services.protocol.IF.TrackerAsQuery.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.asType=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.I32?this.asn=t.Fb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.TrackerAsQuery.prototype.write=function(t){t.Hb("TrackerAsQuery"),null!==this.asType&&void 0!==this.asType&&(t.xb("asType",n.Type.I32,1),t.Vb(this.asType),t.Gb()),null!==this.asn&&void 0!==this.asn&&(t.xb("asn",n.Type.I32,2),t.Vb(this.asn),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.TrackerBitrateQuery=function(t){this.bitrate=null,this.asn=null,this.streamState=null,t&&(void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.asn&&(this.asn=t.asn),void 0!==t.streamState&&(this.streamState=t.streamState))},hive.services.protocol.IF.TrackerBitrateQuery.prototype={},hive.services.protocol.IF.TrackerBitrateQuery.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.bitrate=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.STRUCT?(this.asn=new hive.services.protocol.IF.TrackerAsQuery,this.asn.read(t)):t.Mb(i);break;case 3:i==n.Type.I32?this.streamState=t.Fb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.TrackerBitrateQuery.prototype.write=function(t){t.Hb("TrackerBitrateQuery"),null!==this.bitrate&&void 0!==this.bitrate&&(t.xb("bitrate",n.Type.I32,1),t.Vb(this.bitrate),t.Gb()),null!==this.asn&&void 0!==this.asn&&(t.xb("asn",n.Type.STRUCT,2),this.asn.write(t),t.Gb()),null!==this.streamState&&void 0!==this.streamState&&(t.xb("streamState",n.Type.I32,3),t.Vb(this.streamState),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.TrackerRankQuery=function(t){this.rankType=null,this.asQuery=null,t&&(void 0!==t.rankType&&(this.rankType=t.rankType),void 0!==t.asQuery&&(this.asQuery=t.asQuery))},hive.services.protocol.IF.TrackerRankQuery.prototype={},hive.services.protocol.IF.TrackerRankQuery.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.rankType=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.STRUCT?(this.asQuery=new hive.services.protocol.IF.TrackerAsQuery,this.asQuery.read(t)):t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.TrackerRankQuery.prototype.write=function(t){t.Hb("TrackerRankQuery"),null!==this.rankType&&void 0!==this.rankType&&(t.xb("rankType",n.Type.I32,1),t.Vb(this.rankType),t.Gb()),null!==this.asQuery&&void 0!==this.asQuery&&(t.xb("asQuery",n.Type.STRUCT,2),this.asQuery.write(t),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.TrackerQuery=function(t){this.random=null,this.asns=null,this.watchers=null,this.streamers=null,this.rankings=null,t&&(void 0!==t.random&&(this.random=t.random),void 0!==t.asns&&(this.asns=t.asns),void 0!==t.watchers&&(this.watchers=t.watchers),void 0!==t.streamers&&(this.streamers=t.streamers),void 0!==t.rankings&&(this.rankings=t.rankings))},hive.services.protocol.IF.TrackerQuery.prototype={},hive.services.protocol.IF.TrackerQuery.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.random=t.Fb().value:t.Mb(i);break;case 2:if(i==n.Type.MAP){var o,s;this.asns={},(o=t.i_()).n_,o.s_,s=o.size;for(var a=0;a<s;++a){a>0&&t.JC.length>t.zb[t.zb.length-1]+1&&t.JC.pop();var u,h=null;(h=new hive.services.protocol.IF.TrackerAsQuery).read(t),u=t.Fb().value,this.asns[h]=u}t.o_()}else t.Mb(i);break;case 3:if(i==n.Type.MAP){var c,l;this.watchers={},(c=t.i_()).n_,c.s_,l=c.size;for(var f=0;f<l;++f){f>0&&t.JC.length>t.zb[t.zb.length-1]+1&&t.JC.pop();var p,d=null;(d=new hive.services.protocol.IF.TrackerBitrateQuery).read(t),p=t.Fb().value,this.watchers[d]=p}t.o_()}else t.Mb(i);break;case 4:if(i==n.Type.MAP){var g,v;this.streamers={},(g=t.i_()).n_,g.s_,v=g.size;for(var y=0;y<v;++y){y>0&&t.JC.length>t.zb[t.zb.length-1]+1&&t.JC.pop();var m,E=null;(E=new hive.services.protocol.IF.TrackerBitrateQuery).read(t),m=t.Fb().value,this.streamers[E]=m}t.o_()}else t.Mb(i);break;case 5:if(i==n.Type.LIST){var b,w;this.rankings=[],(b=t.a_()).h_,w=b.size;for(var T=0;T<w;++T){var S;S=t.Fb().value,this.rankings.push(S)}t.c_()}else t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.TrackerQuery.prototype.write=function(t){if(t.Hb("TrackerQuery"),null!==this.random&&void 0!==this.random&&(t.xb("random",n.Type.I32,1),t.Vb(this.random),t.Gb()),null!==this.asns&&void 0!==this.asns){t.xb("asns",n.Type.MAP,2),t.UC(n.Type.STRUCT,n.Type.I32,n.Eb(this.asns));for(var e=0;e<this.asns.length;e++){var i=(a=this.asns[e]).key,r=a.value;i.write(t),t.Vb(r)}t.BC(),t.Gb()}if(null!==this.watchers&&void 0!==this.watchers){t.xb("watchers",n.Type.MAP,3),t.UC(n.Type.STRUCT,n.Type.I32,n.Eb(this.watchers));for(e=0;e<this.watchers.length;e++){var o=(a=this.watchers[e]).key,s=a.value;o.write(t),t.Vb(s)}t.BC(),t.Gb()}if(null!==this.streamers&&void 0!==this.streamers){t.xb("streamers",n.Type.MAP,4),t.UC(n.Type.STRUCT,n.Type.I32,n.Eb(this.streamers));for(e=0;e<this.streamers.length;e++){var a,u=(a=this.streamers[e]).key,h=a.value;u.write(t),t.Vb(h)}t.BC(),t.Gb()}if(null!==this.rankings&&void 0!==this.rankings){for(var c in t.xb("rankings",n.Type.LIST,5),t.HC(n.Type.I32,this.rankings.length),this.rankings)this.rankings.hasOwnProperty(c)&&(c=this.rankings[c],t.Vb(c));t.xC(),t.Gb()}t.jb(),t.Qb()},hive.services.protocol.IF.TrackerPeerRankingKey=function(t){this.rankType=null,this.internalAs=null,this.externalAs=null,t&&(void 0!==t.rankType&&(this.rankType=t.rankType),void 0!==t.internalAs&&(this.internalAs=t.internalAs),void 0!==t.externalAs&&(this.externalAs=t.externalAs))},hive.services.protocol.IF.TrackerPeerRankingKey.prototype={},hive.services.protocol.IF.TrackerPeerRankingKey.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.rankType=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.I32?this.internalAs=t.Fb().value:t.Mb(i);break;case 3:i==n.Type.I32?this.externalAs=t.Fb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.TrackerPeerRankingKey.prototype.write=function(t){t.Hb("TrackerPeerRankingKey"),null!==this.rankType&&void 0!==this.rankType&&(t.xb("rankType",n.Type.I32,1),t.Vb(this.rankType),t.Gb()),null!==this.internalAs&&void 0!==this.internalAs&&(t.xb("internalAs",n.Type.I32,2),t.Vb(this.internalAs),t.Gb()),null!==this.externalAs&&void 0!==this.externalAs&&(t.xb("externalAs",n.Type.I32,3),t.Vb(this.externalAs),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.TrackerPeerRanking=function(t){this.key=null,this.ranking=null,this.groupSize=null,this.cumulatedRankValue=null,this.totalOfRankValues=null,t&&(void 0!==t.key&&(this.key=t.key),void 0!==t.ranking&&(this.ranking=t.ranking),void 0!==t.groupSize&&(this.groupSize=t.groupSize),void 0!==t.cumulatedRankValue&&(this.cumulatedRankValue=t.cumulatedRankValue),void 0!==t.totalOfRankValues&&(this.totalOfRankValues=t.totalOfRankValues))},hive.services.protocol.IF.TrackerPeerRanking.prototype={},hive.services.protocol.IF.TrackerPeerRanking.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.STRUCT?(this.key=new hive.services.protocol.IF.TrackerPeerRankingKey,this.key.read(t)):t.Mb(i);break;case 2:i==n.Type.I32?this.ranking=t.Fb().value:t.Mb(i);break;case 3:i==n.Type.I32?this.groupSize=t.Fb().value:t.Mb(i);break;case 4:i==n.Type.DOUBLE?this.cumulatedRankValue=t.E_().value:t.Mb(i);break;case 5:i==n.Type.DOUBLE?this.totalOfRankValues=t.E_().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.TrackerPeerRanking.prototype.write=function(t){t.Hb("TrackerPeerRanking"),null!==this.key&&void 0!==this.key&&(t.xb("key",n.Type.STRUCT,1),this.key.write(t),t.Gb()),null!==this.ranking&&void 0!==this.ranking&&(t.xb("ranking",n.Type.I32,2),t.Vb(this.ranking),t.Gb()),null!==this.groupSize&&void 0!==this.groupSize&&(t.xb("groupSize",n.Type.I32,3),t.Vb(this.groupSize),t.Gb()),null!==this.cumulatedRankValue&&void 0!==this.cumulatedRankValue&&(t.xb("cumulatedRankValue",n.Type.DOUBLE,4),t.YC(this.cumulatedRankValue),t.Gb()),null!==this.totalOfRankValues&&void 0!==this.totalOfRankValues&&(t.xb("totalOfRankValues",n.Type.DOUBLE,5),t.YC(this.totalOfRankValues),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.TrackerRequest=function(t){this.info=null,this.contentId=null,this.query=null,this.streamType=null,this.sessionId=null,this.customerKey=null,t&&(void 0!==t.info&&(this.info=t.info),void 0!==t.contentId&&(this.contentId=t.contentId),void 0!==t.query&&(this.query=t.query),void 0!==t.streamType&&(this.streamType=t.streamType),void 0!==t.sessionId&&(this.sessionId=t.sessionId),void 0!==t.customerKey&&(this.customerKey=t.customerKey))},hive.services.protocol.IF.TrackerRequest.prototype={},hive.services.protocol.IF.TrackerRequest.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.STRUCT?(this.info=new hive.services.protocol.IF.TrackerPeerInfo,this.info.read(t)):t.Mb(i);break;case 2:i==n.Type.STRING?this.contentId=t.Lb().value:t.Mb(i);break;case 3:i==n.Type.STRUCT?(this.query=new hive.services.protocol.IF.TrackerQuery,this.query.read(t)):t.Mb(i);break;case 4:i==n.Type.I32?this.streamType=t.Fb().value:t.Mb(i);break;case 5:i==n.Type.STRING?this.sessionId=t.Lb().value:t.Mb(i);break;case 6:i==n.Type.STRUCT?(this.customerKey=new hive.services.protocol.IF.CustomerKey,this.customerKey.read(t)):t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.TrackerRequest.prototype.write=function(t){t.Hb("TrackerRequest"),null!==this.info&&void 0!==this.info&&(t.xb("info",n.Type.STRUCT,1),this.info.write(t),t.Gb()),null!==this.contentId&&void 0!==this.contentId&&(t.xb("contentId",n.Type.STRING,2),t.qb(this.contentId),t.Gb()),null!==this.query&&void 0!==this.query&&(t.xb("query",n.Type.STRUCT,3),this.query.write(t),t.Gb()),null!==this.streamType&&void 0!==this.streamType&&(t.xb("streamType",n.Type.I32,4),t.Vb(this.streamType),t.Gb()),null!==this.sessionId&&void 0!==this.sessionId&&(t.xb("sessionId",n.Type.STRING,5),t.qb(this.sessionId),t.Gb()),null!==this.customerKey&&void 0!==this.customerKey&&(t.xb("customerKey",n.Type.STRUCT,6),this.customerKey.write(t),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.TrackerResponse=function(t){this.infos=null,this.rankings=null,this.peerInfo=null,this.sessionId=null,t&&(void 0!==t.infos&&(this.infos=t.infos),void 0!==t.rankings&&(this.rankings=t.rankings),void 0!==t.peerInfo&&(this.peerInfo=t.peerInfo),void 0!==t.sessionId&&(this.sessionId=t.sessionId))},hive.services.protocol.IF.TrackerResponse.prototype={},hive.services.protocol.IF.TrackerResponse.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:if(i==n.Type.LIST){var o,s;this.infos=[],(o=t.a_()).h_,s=o.size;for(var a=0;a<s;++a){var u=null;(u=new hive.services.protocol.IF.TrackerPeerInfo).read(t),this.infos.push(u)}t.c_()}else t.Mb(i);break;case 2:if(i==n.Type.LIST){var h,c;this.rankings=[],(h=t.a_()).h_,c=h.size;for(var l=0;l<c;++l){var f=null;(f=new hive.services.protocol.IF.TrackerPeerRanking).read(t),this.rankings.push(f)}t.c_()}else t.Mb(i);break;case 3:i==n.Type.STRUCT?(this.peerInfo=new hive.services.protocol.IF.TrackerPeerInfo,this.peerInfo.read(t)):t.Mb(i);break;case 4:i==n.Type.STRING?this.sessionId=t.Lb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.TrackerResponse.prototype.write=function(t){if(t.Hb("TrackerResponse"),null!==this.infos&&void 0!==this.infos){for(var e in t.xb("infos",n.Type.LIST,1),t.HC(n.Type.STRUCT,this.infos.length),this.infos)this.infos.hasOwnProperty(e)&&(e=this.infos[e]).write(t);t.xC(),t.Gb()}if(null!==this.rankings&&void 0!==this.rankings){for(var i in t.xb("rankings",n.Type.LIST,2),t.HC(n.Type.STRUCT,this.rankings.length),this.rankings)this.rankings.hasOwnProperty(i)&&(i=this.rankings[i]).write(t);t.xC(),t.Gb()}null!==this.peerInfo&&void 0!==this.peerInfo&&(t.xb("peerInfo",n.Type.STRUCT,3),this.peerInfo.write(t),t.Gb()),null!==this.sessionId&&void 0!==this.sessionId&&(t.xb("sessionId",n.Type.STRING,4),t.qb(this.sessionId),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.PF=function(t){this.timestamp=null,this.contentId=null,this.asType=null,this.asn=null,this.bitrate=null,this.streamState=null,this.rankType=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.contentId&&(this.contentId=t.contentId),void 0!==t.asType&&(this.asType=t.asType),void 0!==t.asn&&(this.asn=t.asn),void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.streamState&&(this.streamState=t.streamState),void 0!==t.rankType&&(this.rankType=t.rankType))},hive.services.protocol.IF.PF.prototype={},hive.services.protocol.IF.PF.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.timestamp=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.STRING?this.contentId=t.Lb().value:t.Mb(i);break;case 3:i==n.Type.I32?this.asType=t.Fb().value:t.Mb(i);break;case 4:i==n.Type.I32?this.asn=t.Fb().value:t.Mb(i);break;case 5:i==n.Type.I32?this.bitrate=t.Fb().value:t.Mb(i);break;case 6:i==n.Type.I32?this.streamState=t.Fb().value:t.Mb(i);break;case 7:i==n.Type.I32?this.rankType=t.Fb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.PF.prototype.write=function(t){t.Hb("TrackerStoreIndexKey"),null!==this.timestamp&&void 0!==this.timestamp&&(t.xb("timestamp",n.Type.I32,1),t.Vb(this.timestamp),t.Gb()),null!==this.contentId&&void 0!==this.contentId&&(t.xb("contentId",n.Type.STRING,2),t.qb(this.contentId),t.Gb()),null!==this.asType&&void 0!==this.asType&&(t.xb("asType",n.Type.I32,3),t.Vb(this.asType),t.Gb()),null!==this.asn&&void 0!==this.asn&&(t.xb("asn",n.Type.I32,4),t.Vb(this.asn),t.Gb()),null!==this.bitrate&&void 0!==this.bitrate&&(t.xb("bitrate",n.Type.I32,5),t.Vb(this.bitrate),t.Gb()),null!==this.streamState&&void 0!==this.streamState&&(t.xb("streamState",n.Type.I32,6),t.Vb(this.streamState),t.Gb()),null!==this.rankType&&void 0!==this.rankType&&(t.xb("rankType",n.Type.I32,7),t.Vb(this.rankType),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.AF=function(t){this.guid=null,this.OF=null,this.key=null,t&&(void 0!==t.guid&&(this.guid=t.guid),void 0!==t.OF&&(this.OF=t.OF),void 0!==t.key&&(this.key=t.key))},hive.services.protocol.IF.AF.prototype={},hive.services.protocol.IF.AF.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.STRING?this.guid=t.v_().value:t.Mb(i);break;case 2:i==n.Type.DOUBLE?this.OF=t.E_().value:t.Mb(i);break;case 3:i==n.Type.STRUCT?(this.key=new hive.services.protocol.IF.TrackerPeerRankingKey,this.key.read(t)):t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.AF.prototype.write=function(t){t.Hb("TrackerStoreRankPeer"),null!==this.guid&&void 0!==this.guid&&(t.xb("guid",n.Type.STRING,1),t.WC(this.guid),t.Gb()),null!==this.OF&&void 0!==this.OF&&(t.xb("rank",n.Type.DOUBLE,2),t.YC(this.OF),t.Gb()),null!==this.key&&void 0!==this.key&&(t.xb("key",n.Type.STRUCT,3),this.key.write(t),t.Gb()),t.jb(),t.Qb()},hive.services.protocol.IF.NF=function(t){this.timestamp=null,this.request=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.request&&(this.request=t.request))},hive.services.protocol.IF.NF.prototype={},hive.services.protocol.IF.NF.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I64?this.timestamp=t.g_().value:t.Mb(i);break;case 2:i==n.Type.STRUCT?(this.request=new hive.services.protocol.IF.TrackerRequest,this.request.read(t)):t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.services.protocol.IF.NF.prototype.write=function(t){t.Hb("TrackerRequestQueueMessage"),null!==this.timestamp&&void 0!==this.timestamp&&(t.xb("timestamp",n.Type.I64,1),t.KC(this.timestamp),t.Gb()),null!==this.request&&void 0!==this.request&&(t.xb("request",n.Type.STRUCT,2),this.request.write(t),t.Gb()),t.jb(),t.Qb()}},function(t,e,i){"use strict";var n=function(){return function(t,e,i,n,r){this.id=t,this.bitrate=e,this.duration=i,this.uri=n,this.yM=r}}();e.DF=n},function(t,e,i){"use strict";var n=i(1),r=function(){function t(t,e,i){this.start=t,this.end=e,this.total=i}return t.prototype.size=function(){var t=this.end-this.start+1;return Number.isInteger(t)||(n.ErrorMonitor.ve().logError("Segment Size is a Float",{size:t}),t=Math.round(t)),0==this.end&&0==this.start?0:t},t.prototype.kF=function(){return 0==this.start&&(this.end==this.total-1||this.end==this.total&&0==this.total)},t.prototype.LF=function(){return this.end==this.total-1||this.end==this.total&&0==this.total},t.prototype.MF=function(t){return t.start<=this.start&&this.start<=t.end},t.prototype.toString=function(){return"R[S="+this.start+",E="+this.end+",T="+this.total+"]"},t}();e.FF=r;var o=function(){function t(){}return t.UF=function(t){return t.split("-")},t.BF=function(t){var e=t.split("=",4),i=e[1].substr(0,e[1].indexOf(",")),n=e[2].substr(0,e[2].indexOf(",")),o=e[3].substr(0,e[3].indexOf("]"));return new r(+i,+n,+o)},t}();e.HF=o},function(t,e){t.i=function(t){return t.xF||(t.qF=function(){},t.GF=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{p:!0,get:function(){return t.o}}),Object.defineProperty(t,"id",{p:!0,get:function(){return t.s}}),t.xF=1),t}},function(t,e){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};e.resolve=function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var o=r>=0?arguments[r]:process.VF();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,e="/"===o.charAt(0))}return(e?"/":"")+(t=i(n(t.split("/"),function(t){return!!t}),!e).join("/"))||"."},e.normalize=function(t){var r=e.jF(t),o="/"===s(t,-1);return(t=i(n(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.jF=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.QF=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),o=n(i.split("/")),s=Math.min(r.length,o.length),a=s,u=0;u<s;u++)if(r[u]!==o[u]){a=u;break}var h=[];for(u=a;u<r.length;u++)h.push("..");return(h=h.concat(o.slice(a))).join("/")},e.KF="/",e.YF=":",e.WF=function(t){var e=o(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.zF=function(t,e){var i=o(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.JF=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}},function(t,e,i){"use strict";function n(t,e){Array.prototype[t]||Object.defineProperty(Array.prototype,t,{value:e,Ah:!0,l:!0,p:!1})}function r(t,e,i){this.NT=t,this.start=null==e?0:e,this.end=i}var o=(i(66),i(12)),s=i(67),a=i(37);t.i=Array;var u=Array.prototype.splice,h=Array.prototype.slice;Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=Array.from||function(t){var e=[];return e.addEach(t),e},Array.Mc=function(t){for(var e=[],i=1/0,n=0;n<t.length;n++){var r=t[n];t[n]=r.toArray(),r.length<i&&(i=r.length)}for(n=0;n<t.length;n++){r=t[n];for(var o=0;o<r.length;o++)o<i&&o in r&&(e[o]=e[o]||[],e[o][n]=r[o])}return e},n("addEach",o.prototype.addEach),n("deleteEach",o.prototype._c),n("toArray",o.prototype.toArray),n("toObject",o.prototype.Pc),n("all",o.prototype.all),n("any",o.prototype.uo),n("min",o.prototype.min),n("max",o.prototype.max),n("sum",o.prototype.Nc),n("average",o.prototype.Dc),n("only",o.prototype.only),n("flatten",o.prototype.kc),n("zip",o.prototype.Lc),n("enumerate",o.prototype.enumerate),n("group",o.prototype.group),n("sorted",o.prototype.Fc),n("reversed",o.prototype.reversed),n("constructClone",function(t){var e=new this.constructor;return e.addEach(t),e}),n("has",function(t,e){return-1!==this.find(t,e)}),n("set",function(t,e){return this[t]=e,!0}),n("add",function(t){return this.push(t),!0}),n("delete",function(t,e){var i=this.find(t,e);return-1!==i&&(this.splice(i,1),!0)}),n("deleteAll",function(t,e){e=e||this.ls||Object.cs;for(var i=0,n=0;n<this.length;)e(t,this[n])?(this.qk(n,1),i++):n++;return i}),n("find",function(t,e){e=e||this.ls||Object.cs;for(var i=0;i<this.length;i++)if(i in this&&e(t,this[i]))return i;return-1}),n("findLast",function(t,e){e=e||this.ls||Object.cs;var i=this.length;do{if(--i in this&&e(this[i],t))return i}while(i>0);return-1}),n("swap",function(t,e,i){var n,r,o,s,a;if(t>this.length&&(this.length=t),void 0!==i){if(n=[t,e],Array.isArray(i)||(i=h.call(i)),o=0,(r=i.length)<1e3){for(;o<r;o++)n[o+2]=i[o];return u.apply(this,n)}for(a=u.apply(this,n);o<r;){for(n=[t+o,0],s=2;s<1002&&o<r;s++,o++)n[s]=i[o];u.apply(this,n)}return a}return void 0!==e?u.call(this,t,e):void 0!==t?u.call(this,t):[]}),n("peek",function(){return this[0]}),n("poke",function(t){this.length>0&&(this[0]=t)}),n("peekBack",function(){if(this.length>0)return this[this.length-1]}),n("pokeBack",function(t){this.length>0&&(this[this.length-1]=t)}),n("one",function(){for(var t in this)if(Object.OA(this,t))return this[t]}),Array.prototype.clear||n("clear",function(){return this.length=0,this}),n("compare",function(t,e){var i,n,r;if(e=e||Object.Oc,this===t)return 0;if(!t||!Array.isArray(t))return s.prototype.Oc.call(this,t,e);for(n=Math.min(this.length,t.length),i=0;i<n;i++)if(i in this){if(!(i in t))return-1;if(r=e(this[i],t[i]))return r}else if(i in t)return 1;return this.length-t.length}),n("equals",function(t,e){e=e||Object.cs;var i=0,n=this.length;if(this===t)return!0;if(!t||!Array.isArray(t))return s.prototype.cs.call(this,t);if(n!==t.length)return!1;for(;i<n;++i)if(i in this){if(!(i in t))return!1;if(!e(this[i],t[i]))return!1}else if(i in t)return!1;return!0}),n("clone",function(t,e){if(null==t)t=1/0;else if(0===t)return this;if((e=e||new a).has(this))return e.get(this);var i=new Array(this.length);for(var n in e.set(this,i),this)i[n]=Object.clone(this[n],t-1,e);return i}),n("iterate",function(t,e){return new r(this,t,e)}),n("Iterator",r),r.prototype.Gk=null,Object.defineProperty(r.prototype,"_iterationObject",{get:function(){return this.Gk||(this.Gk={done:!1,value:null})}}),r.prototype.next=function(){return this.start===(null==this.end?this.NT.length:this.end)?(this.Vk.done=!0,this.Vk.value=void 0):this.Vk.value=this.NT[this.start++],this.Vk}},function(t,e){t.i=Function,Function.us=function(){},Function.identity=function(t){return t},Function.Uc=function(t,e){e=e||Object.Oc,t=t||Function.identity;var i=function(i,n){return e(t(i),t(n))};return i.Oc=e,i.Uc=t,i},Function.get=function(t){return function(e){return Object.get(e,t)}}},function(t,e,i){function n(){throw new Error("Can't construct. GenericOrder is a mixin.")}var r=i(36);t.i=n,n.prototype.cs=function(t,e){return e=e||this.ls||r.cs,this===t||!!t&&(this.length===t.length&&this.Lc(t).every(function(t){return e(t[0],t[1])}))},n.prototype.Oc=function(t,e){if(e=e||this.Ac||r.Oc,this===t)return 0;if(!t)return 1;var i=Math.min(this.length,t.length),n=this.Lc(t).reduce(function(t,n,r){return 0===t?r>=i?t:e(n[0],n[1]):t},0);return 0===n?this.length-t.length:n},n.prototype.toJSON=function(){return this.toArray()}},function(t,e,i){"use strict";function n(t,e,i,r){if(!(this instanceof n))return new n(t,e,i,r);e=e||Object.cs,i=i||Object.hash,r=r||Function.us,this.ls=e,this.ps=i,this.ds=r,this.order=new this.XF(void 0,e),this.fs=new this.ZF(void 0,function(t,i){return e(t.value,i.value)},function(t){return i(t.value)}),this.length=0,this.addEach(t)}var r=(i(11),i(50)),o=i(102),s=i(12),a=i(39),u=i(13),h=i(38),c=i(103);t.i=n,n.Set=n,Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),Object.addEach(n.prototype,u.prototype),Object.addEach(n.prototype,h.prototype),Object.defineProperty(n.prototype,"size",s.gs),n.prototype.XF=r,n.prototype.ZF=o,n.prototype.Es=function(t){return new this.constructor(t,this.ls,this.ps,this.ds)},n.prototype.has=function(t){var e=new this.order.Node(t);return this.fs.has(e)},n.prototype.get=function(t,e){if(e)throw new Error("Set#get does not support second argument: equals");var i=new this.order.Node(t);return(i=this.fs.get(i))?i.value:this.ds(t)},n.prototype.add=function(t){var e=new this.order.Node(t);if(!this.fs.has(e)){var i=this.length;return this.Mk&&this.QA([t],[],i),this.order.add(t),e=this.order.head.Ok,this.fs.add(e),this.length++,this.Mk&&this.GA([t],[],i),!0}return!1},n.prototype.delete=function(t,e){if(e)throw new Error("Set#delete does not support second argument: equals");var i=new this.order.Node(t);return!!this.fs.has(i)&&(i=this.fs.get(i),this.Mk&&this.QA([],[t],i.index),this.fs.delete(i),this.order.splice(i,1),this.length--,this.Mk&&this.GA([],[t],i.index),!0)},n.prototype.pop=function(){if(this.length){var t=this.order.head.Ok.value;return this.delete(t),t}},n.prototype.shift=function(){if(this.length){var t=this.order.head.next.value;return this.delete(t),t}},n.prototype.Bc=function(){if(this.length>0)return this.fs.Bc().value},n.prototype.clear=function(){var t;this.Mk&&(t=this.toArray(),this.QA([],t,0)),this.fs.clear(),this.order.clear(),this.length=0,this.Mk&&this.GA([],t,0)},n.prototype.reduce=function(t,e){var i=arguments[2],n=0;return this.order.reduce(function(e,r){return t.call(i,e,r,n++,this)},e,this)},n.prototype.reduceRight=function(t,e){var i=arguments[2],n=this.order,r=this.length-1;return n.reduceRight(function(e,n){return t.call(i,e,n,r--,this)},e,this)},n.prototype.Hc=function(){return this.order.Hc()},n.prototype.values=function(){return new c(this)},n.prototype.log=function(){var t=this.fs;return t.log.apply(t,arguments)},n.prototype.Xc=function(){this.order.Xc()}},function(t,e,i){"use strict";function n(){}t.i=n,n.$F={WA:"+",eU:"-",tU:"+",rU:"+",iU:".",nU:"'",sU:"+",oU:"|"},n.aU={WA:"╋",eU:"━",tU:"┻",rU:"┳",iU:"╭",nU:"╰",sU:"┣",oU:"┃"},n.hU={WA:"╋",eU:"━",tU:"┻",rU:"┳",iU:"┏",nU:"┗",sU:"┣",oU:"┃"}},function(t,e,i){"use strict";var n=function(){return function(){}}();n.dO="127.0.0.1",n.rL=11983,n.fO="//{0}:{1}/proxy/?callback={2}{3}hivePluginId={4}",n.cU="//{0}:{1}/proxy/{2}/session?manifest={3}",n.eL="//{0}:{1}/proxy/{2}/player?req={3}",n.uU="//{0}:{1}/proxy/{2}/info?{3}",e.tL=n},function(t,e,i){"use strict";var n=i(7),r=i(1),o=function(){function t(t){this.loggerId="[HiveXHR] ",this.DONE=4,this.LOADING=3,this.HEADERS_RECEIVED=2,this.OPENED=1,this.UNSENT=0,this.username=null,this.password=null,this.lU=[],this.responseType="",this.readyState=this.UNSENT,this.status=0,this.async=!0,this.timeout=0,this.events={},t&&(this.sessionId=t)}return t.prototype.addEventListener=function(t,e,i){this.events[t]=this.events[t]||[],this.events[t].push(e)},t.prototype.removeEventListener=function(t,e,i){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}))},t.prototype.dispatchEvent=function(t){var e=this;this.events[t.type]&&this.events[t.type].forEach(function(i){try{"function"==typeof i?i.call(e,t):"function"==typeof i.CL&&i.CL(t)}catch(i){r.ErrorMonitor.ve().logError(e.loggerId+"Error in callback handler '"+t.type+"'",{error:i})}});var i=this["on"+t.type];if("function"==typeof i)try{i.call(this,t)}catch(e){r.ErrorMonitor.ve().logError(this.loggerId+"Error in callback handler '"+t.type+"'",{error:e})}return!1},t.prototype.msCachingEnabled=function(){return void 0!==this.msCaching},t.prototype.overrideMimeType=function(t){this.mimeType=t},t.register=function(e,i){t.ub[e]=i},t.prototype.pU=function(e){this.sessionId||(this.sessionId=t.ub[e])},t.prototype.open=function(t,e,i,r,o){void 0===i&&(i=!0),void 0===r&&(r=null),void 0===o&&(o=null),this.url=e.trim(),this.method=t,this.username=r,this.password=o,this.async=i,this.readyState=this.OPENED;var s=n.rc.createEvent(Event,"readystatechange",{currentTarget:this});this.dispatchEvent(s)},t.prototype.setRequestHeader=function(t,e){if(this.readyState!==this.OPENED)throw new Error("The object's state must be OPENED.");this.lU.push({key:t,value:e})},t.prototype.getResponseHeader=function(t){var e=this.getAllResponseHeaders();if(e){var i=[];return e.split(/[\r\n]+/).forEach(function(t){var e=t.match(/^([^:]+): ?(.+)$/);e&&(i[e[1]]=e[2])}),i[t.toLowerCase()]}return null},t.prototype.getAllResponseHeaders=function(){return this.responseHeaders},t.prototype.onload=function(t){},t.prototype.onloadend=function(t){},t.prototype.onerror=function(t){},t.prototype.onprogress=function(t){},t.prototype.onreadystatechange=function(t){},t.prototype.onabort=function(t){},t.prototype.onloadstart=function(t){},t.prototype.ontimeout=function(t){},t}();o.ub={},o.Ag=0,e.pb=o},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(53),o=i(7),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.registerTech=function(t,i){e.iL[i]=t},e.registerComm=function(t,i){e.nL[i]=t},e.prototype.send=function(){if(!this.sessionId){var t=Object.keys(e.nL);t.length>0&&(this.sessionId=e.nL[t[0]])}var i=e.iL[this.sessionId],n=e.nL[this.sessionId];n.logger().debug("Intercepted Manifest Request "+this.url),i.oL(this),n.onActivateSession(this.url)},e.prototype.dU=function(){var t=this,e=new XMLHttpRequest;e.open("GET",this.url),e.onreadystatechange=function(i){4===e.readyState&&(t.response=e.responseText,t.responseText=e.responseText,t.readyState=4,t.status=e.status,t.onreadystatechange(o.rc.createEvent(Event,"readystatechange",i,t)),t.onload(o.rc.createEvent(ProgressEvent,"load",i,t)),console.debug("Returned Manifest Request "+t.url))},e.send()},e.prototype.fU=function(){t.prototype.send.call(this)},e}(r.Zu);s.nL={},s.iL={},e.$u=s},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(15),o=i(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.Api=function(){return e.app="JS",o.Framework.resolve(r.qu._u)},e}(i(32).Hive);e.lb=s},function(t,e,i){function n(t,i){var n={gU:[],EU:o};return arguments.length>=3&&(n.vU=arguments[2]),arguments.length>=4&&(n.yU=arguments[3]),l(i)?n.TU=i:i&&e.mU(n,i),g(n.TU)&&(n.TU=!1),g(n.vU)&&(n.vU=2),g(n.yU)&&(n.yU=!1),g(n.IU)&&(n.IU=!0),n.yU&&(n.EU=r),s(n,t,n.vU)}function r(t,e){var i=n.SU[e];return i?"["+n.yU[i][0]+"m"+t+"["+n.yU[i][1]+"m":t}function o(t,e){return t}function s(t,i,n){if(t.IU&&i&&b(i.Is)&&i.Is!==e.Is&&(!i.constructor||i.constructor.prototype!==i)){var r=i.Is(n,t);return d(r)||(r=s(t,r,n)),r}var o=a(t,i);if(o)return o;var l=Object.keys(i),f=function(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}(l);if(t.TU&&(l=Object.getOwnPropertyNames(i)),E(i)&&(l.indexOf("message")>=0||l.indexOf("description")>=0))return u(i);if(0===l.length){if(b(i)){var p=i.name?": "+i.name:"";return t.EU("[Function"+p+"]","special")}if(v(i))return t.EU(RegExp.prototype.toString.call(i),"regexp");if(m(i))return t.EU(Date.prototype.toString.call(i),"date");if(E(i))return u(i)}var g,y="",w=!1,T=["{","}"];return c(i)&&(w=!0,T=["[","]"]),b(i)&&(y=" [Function"+(i.name?": "+i.name:"")+"]"),v(i)&&(y=" "+RegExp.prototype.toString.call(i)),m(i)&&(y=" "+Date.prototype.toUTCString.call(i)),E(i)&&(y=" "+u(i)),0!==l.length||w&&0!=i.length?n<0?v(i)?t.EU(RegExp.prototype.toString.call(i),"regexp"):t.EU("[Object]","special"):(t.gU.push(i),g=w?function(t,e,i,n,r){for(var o=[],s=0,a=e.length;s<a;++s)S(e,String(s))?o.push(h(t,e,i,n,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(h(t,e,i,n,r,!0))}),o}(t,i,n,f,l):l.map(function(e){return h(t,i,n,f,e,w)}),t.gU.pop(),function(t,e,i){return t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(g,y,T)):T[0]+y+T[1]}function a(t,e){if(g(e))return t.EU("undefined","undefined");if(d(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.EU(i,"string")}return p(e)?t.EU(""+e,"number"):l(e)?t.EU(""+e,"boolean"):f(e)?t.EU("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,i,n,r,o){var a,u,h;if((h=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?u=h.set?t.EU("[Getter/Setter]","special"):t.EU("[Getter]","special"):h.set&&(u=t.EU("[Setter]","special")),S(n,r)||(a="["+r+"]"),u||(t.gU.indexOf(h.value)<0?(u=f(i)?s(t,h.value,null):s(t,h.value,i-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.EU("[Circular]","special")),g(a)){if(o&&r.match(/^\d+$/))return u;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.EU(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.EU(a,"string"))}return a+": "+u}function c(t){return Array.isArray(t)}function l(t){return"boolean"==typeof t}function f(t){return null===t}function p(t){return"number"==typeof t}function d(t){return"string"==typeof t}function g(t){return void 0===t}function v(t){return y(t)&&"[object RegExp]"===w(t)}function y(t){return"object"==typeof t&&null!==t}function m(t){return y(t)&&"[object Date]"===w(t)}function E(t){return y(t)&&("[object Error]"===w(t)||t instanceof Error)}function b(t){return"function"==typeof t}function w(t){return Object.prototype.toString.call(t)}function T(t){return t<10?"0"+t.toString(10):t.toString(10)}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var I=/%[sdj%]/g;e.format=function(t){if(!d(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(n(arguments[i]));return e.join(" ")}i=1;for(var r=arguments,o=r.length,s=String(t).replace(I,function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return t}}),a=r[i];i<o;a=r[++i])f(a)||!y(a)?s+=" "+a:s+=" "+n(a);return s},e.qF=function(t,i){if(g(global.process))return function(){return e.qF(t,i).apply(this,arguments)};if(!0===process.bU)return t;var n=!1;return function(){if(!n){if(process.RU)throw new Error(i);process.wU?console.trace(i):console.error(i),n=!0}return t.apply(this,arguments)}};var _,R={};e.CU=function(t){if(g(_)&&(_=process.Ms._U||""),t=t.toUpperCase(),!R[t])if(new RegExp("\\b"+t+"\\b","i").test(_)){var i=process.PU;R[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else R[t]=function(){};return R[t]},e.Is=n,n.yU={bold:[1,22],AU:[3,23],OU:[4,24],inverse:[7,27],NU:[37,39],DU:[90,39],kU:[30,39],blue:[34,39],LU:[36,39],green:[32,39],MU:[35,39],red:[31,39],FU:[33,39]},n.SU={UU:"cyan",number:"yellow",BU:"yellow",undefined:"grey",HU:"bold",string:"green",_m:"magenta",xU:"red"},e.isArray=c,e.Ey=l,e.yy=f,e.sL=function(t){return null==t},e.Ty=p,e.my=d,e.qU=function(t){return"symbol"==typeof t},e.Iy=g,e.GU=v,e.au=y,e.VU=m,e.jU=E,e.vy=b,e.QU=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(107);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.vb=i(108),e.mU=function(t,e){if(!e||!y(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}},function(t,e,i){"use strict";var n=i(18),r=i(3),o=i(33);i(114),i(115);var s=i(0),a=i(8),u=i(27),h=i(23),c=i(19),l=i(14),f=i(1),p=i(18);!function(t){var e=function(){return function(){this.metrics=new hive.snapshots.Metrics,this.KU=new hive.snapshots.Traffic,this.YU=new r,this.WU=new r,this.zU=new r,this.player=new hive.snapshots.Player}}();t.JU=e;var i=function(){function e(){this.ticket=null,this.XU=0,this.ZU=0,this.testId=null,this.$U()}return e.prototype.init=function(t,e,i,n){this.logger=s.Framework.resolve(s.Framework.V.R).log(n),this.ud=s.Framework.resolve(a.pc.sc),this.logger.debug("[SNAP] INIT STATS STORE - ID: "+t),this.gd=t,this.ticket=e,this.Vl(i)},e.prototype.NL=function(t){this.testId=t},e.prototype.eB=function(t){this.tB=t},e.prototype.Vl=function(t){this.app=t},e.prototype.rB=function(t){this.yD=t},e.prototype.$U=function(){this.iB=new t.JU,this.gd=null,this.ticket=null,this.reset()},e.prototype.reset=function(){this.FL=new t.JU,this.nB(this.FL.KU),this.sB(this.FL)},e.prototype.nB=function(t){t.reqN=0,t.respFallbackN=0,t.respFallbackErrN=0,t.respP2pN=0,t.reqOtherN=0,t.respFallbackOtherN=0,t.respFallbackOthertErrN=0,t.srcReqN=0,t.srcRespN=0,t.srcRespErrN=0,t.srcReqQt=0,t.srcRespQt=0,t.srcOverQt=0,t.srcOtherReqN=0,t.srcOtherRespN=0,t.srcOtherRespErrN=0,t.srcOtherReqQt=0,t.srcOtherRespQt=0,t.srcOtherOverQt=0,t.p2pSubReqN=0,t.p2pSubRespN=0,t.p2pSubRespPartN=0,t.p2pSubRespErrN=0,t.p2pSubRespExpN=0,t.p2pSubReqQt=0,t.p2pSubRespQt=0,t.p2pDirectQt=0,t.p2pRelayQt=0,t.p2pNatQt=0,t.p2pUdpbQt=0,t.fallAgentRespN=0,t.fallAgentPredHitN=0,t.fallAgentFailedRespN=0,t.fallAgenTrafficSuccessQt=0,t.p2pAgentPredHitN=0,t.p2pAgentPredMissN=0,t.p2pAgentPredPartialHitN=0,t.p2pAgenTrafficSuccessQt=0,t.p2pAgenTrafficFailureQt=0},e.prototype.sB=function(t){t.metrics.videoBufN=0,t.metrics.videoBufQt=0,t.metrics.clientBufferMs=0,t.metrics.lookupNotFound=0,t.metrics.lookupTotal=0,t.metrics.lookupLatency=0,t.metrics.lookupReqAccept=0,t.metrics.lookupReqEstablished=0,t.metrics.lookupFailed=0,t.player.bufferingN=0,t.player.bufferingMs=0},e.prototype.xc=function(t){var e=this;void 0===t&&(t=!0);var i=new hive.snapshots.MetricSnapshot;i.timestamp=s.Framework.time(),i.guid=this.gd,i.sessionId=this.ticket.sessionId,i.eventId=new EventId,i.eventId.partnerId=this.ticket.up(),i.eventId.customerId=this.ticket.cp(),i.eventId.contentId=this.ticket.hp();try{var r=new hive.snapshots.ClientInfo;r.clientType=this.oB();var o=this.app.version.split(".");if(r.majorVersion=parseInt(o[0]),r.minorVersion=parseInt(o[1]),r.patchVersion=parseInt(o[2]),i.client=r,null!=this.testId){var a=new TestInfo;a.testId=this.testId,i.aB=a}}catch(t){this.logger.warn("[SNAP] error setting Snapshot ClientInfo",t)}if(this.yD){var u=new hive.snapshots.AgentInfo;u.firstTierBitrates=this.yD.hB(),u.secondTierBitrates=this.yD.cB(),i.agentInfo=u}i.streamInfo=this.OL.uB(),i.traffic=[];var h=new hive.snapshots.TrafficKey;if(i.traffic.push({key:h,value:this.FL.KU}),this.FL.YU.forEach(function(t,e){var n=new hive.snapshots.TrafficKey;n.bitrate=e,i.traffic.push({key:n,value:t})}),i.metrics=this.FL.metrics,this.tB&&(i.metrics.clientBufferMs=this.tB.min()),i.player=this.FL.player,this.lB){var c=this.lB.pB();this.FL.metrics.prtOutN=c.dB+c.fB,this.FL.metrics.prtInN=c.gB+c.EB;var l=this.lB.vB();l.forEach(function(t,n){e.yB(n,t,i)}),this.FL.zU.filter(function(t,e){return!l.has(e)}).forEach(function(t,n){e.yB(n,t,i)})}return i.connInfo=new hive.snapshots.ConnectivityInfo,t?this.ud.getConnectivityInfo().then(function(t){return i.connInfo.privateIp=n.kl.getPrivateIp(t.getNetworkChanged()),e.TB(e.mB(i))}).fail(function(t){return e.TB(e.mB(i))}):(i.connInfo.privateIp=n.kl.getPrivateIp(this.ud.Md().getNetworkChanged()),this.TB(i))},e.prototype.mB=function(t){return t.connInfo.internalAs=this.XU,t.connInfo.externalAs=this.ZU,t.connInfo.publicIp=this.IB,t},e.prototype.TB=function(t,e){void 0===e&&(e=[]);var i=p.ml(t,"snapshot");return i.length&&f.ErrorMonitor.ve().logError("NaN found in MetricSnapshot","[SNAP]",{keysWithNaN:i,snapshot:t}),e.length=0,e.push.apply(e,i),t},e.prototype.oB=function(){var t;switch(this.app.app){case"JS":t=ClientType.SB;break;case"PROXY":t=ClientType.RB;break;default:t=ClientType.wB}return t},e.prototype.yB=function(t,e,i){var n=this.FL.WU.get(t);e.traffic=n,i.partners||(i.partners=[]);var r=new hive.snapshots.PartnerKey;r.partnerGuid=t,i.partners.push({key:r,value:e})},e.prototype.wL=function(t,e){t>0&&(this.FL.metrics.videoBufN++,this.FL.metrics.videoBufQt+=t,this.FL.player.bufferingN++,this.FL.player.bufferingMs+=t),this.FL.player.playerBufferMs=e},e.prototype.xL=function(){return this.FL.KU},e.prototype.bB=function(){return this.iB.KU},e.prototype.CB=function(t){return this.iB.YU.has(t)||this.iB.YU.set(t,new hive.snapshots.Traffic),this.iB.YU.get(t)},e.prototype.BL=function(t){if(!this.FL.YU.has(t)){var e=new hive.snapshots.Traffic;this.nB(e),this.FL.YU.set(t,e)}return this.FL.YU.get(t)},e.prototype._B=function(){var t=new hive.snapshots.PartnerTraffic;return t.p2pSuccReq=0,t.p2pFailReq=0,t.p2pPartReq=0,t.p2pSuccReceived=0,t.p2pSuccReceivedLow=0,t.p2pFailReceived=0,t.p2pSuccResp=0,t.p2pFailResp=0,t.p2pPartResp=0,t.p2pSuccSent=0,t.p2pSuccSentLow=0,t.p2pFailSent=0,t},e.prototype.PB=function(t,e){return e.WU.has(t)||e.WU.set(t,this._B()),e.WU.get(t)},e.prototype.AB=function(t){return this.PB(t,this.FL)},e.prototype.OB=function(t){return this.PB(t,this.iB)},e.prototype.NB=function(t){this.ud=t},e.prototype.DB=function(t){this.lB=t},e.prototype.Ud=function(t){},e}();t.ZF=i;var d=function(){function t(){this.kB=isNaN(l.HiveConfig.DebugLogs.MetricSnapshotLogs)?0:l.HiveConfig.DebugLogs.MetricSnapshotLogs,this.state=c.Ml.Ll,this.client=s.Framework.resolve(a.pc.G),this.yg=new o.Yb,this.protocol=new o.bC(this.yg)}return t.prototype.init=function(t,e){this.logger=s.Framework.resolve(s.Framework.V.R).log(e),this.logger.debug("[SNAP] INIT CLIENT STATS"),this.fs=t,this.LB()},t.prototype.LB=function(){var t=this;this.MB>-1&&s.Framework.clearInterval(this.MB),this.MB=s.Framework.setInterval(function(){t.snapshot()},u.Gd.qd.PE)},t.prototype.nl=function(t){this.state=t},t.prototype.IL=function(){if(this.fs)return this.snapshot(!1)},t.prototype.reset=function(t){s.Framework.clearInterval(this.MB),this.fs&&(!1===t?this.fs.reset():this.fs.$U())},t.prototype.snapshot=function(t){var e=this;void 0===t&&(t=!0);var i=this.fs.xc(t);t?(this.logger.debug("[SNAP] TAKING SNAPSHOT"),i.then(function(t){return e.forward(t)}).fail(function(t){e.logger.warn("[SNAP] ERROR FORWARDING SNAPSHOT",t)}).finally(function(){e.fs.reset()})):(this.logger.debug("[SNAP] FLUSHING SNAPSHOT"),this.forward(i))},t.prototype.forward=function(t){var e=this;if(this.state!==c.Ml.IDLE&&this.state!==c.Ml.STOP){if(this.client&&this.client.zd()){switch(this.kB){case 0:default:this.logger.debug("[SNAP] SENDING SNAPSHOT");break;case 1:this.logger.debug("[SNAP] SENDING SNAPSHOT "+JSON.stringify(t));break;case 2:this.logger.debug("[SNAP] SENDING SNAPSHOT",t);break;case 3:this.logger.debug("[SNAP] SENDING SNAPSHOT "+JSON.stringify(t),t)}this.protocol.AC("SNAPSHOT",o.gb.ONEWAY,0),t.write(this.protocol),this.protocol.DC();var i=this.yg.pC(),n=this.FB(i,",",4),r=i.slice(n+1,i.length-1),s=new h.Jd(Services.Xd,1,r);this.client.zd().send(s).fail(function(t){e.logger.warn("[SNAP] PROBLEM: ",t)})}}else this.logger.debug("[SNAP] not send - state "+c.Ml[this.state])},t.prototype.FB=function(t,e,i){return t.split(e,i).join(e).length},t}();t.ql=d}(e.Stats||(e.Stats={}))},function(t,e,i){"use strict";var n=i(4),r=i(30),o=i(116),s=i(0),a=i(27),u=i(23),h=i(6).he.gh,c=function(){function t(){this.logger=s.Framework.resolve(s.Framework.V.R).log(),this.logger.debug("INIT SERVICE CLIENT")}return t.prototype.init=function(t,e){var i=this;if(this.UB)this.UB.then(function(){var t={partnerId:e.up(),customerId:e.cp(),contentId:e.hp(),secret:e.CN()},n=new u.Jd(Services.BB,1,JSON.stringify(t));i.connection.send(n)});else{var s=n.defer(),c=a.Gd.qd.bE;e.bN&&(h?c=a.Gd.qd.CE:(this.logger.warn("[HiveComm] Error trying to resolve test ticket against production services - use production ticket or test plugin"),s.reject(new Error("test ticket in production"))));var l=new r(c).Sw({"connection-id":t,partner_id:e.up(),customer_id:e.cp(),content_id:e.hp(),ticket:e.CN()}).toString();this.connection=new o.HB(l,a.Gd.qd.AE,a.Gd.qd.OE,a.Gd.qd.NE),this.connection.xB(function(){i.logger.debug("HIVE SERVICES CONNECTED"),s.resolve(i.connection)}),this.connection.onerror(function(){i.logger.warn("Hive Services Connection failed"),s.reject(i.connection)}),this.UB=s.Ss}return{np:this.connection,Ss:this.UB}},t.prototype.connect=function(){this.connection&&this.connection.connect(!0)},t.prototype.SD=function(t){},t.prototype.zd=function(){return this.connection},t.prototype.close=function(){this.connection&&(this.UB=null,this.connection.close(!1))},t}();e.qB=c},function(t,e,i){"use strict";i(117);var n=i(4),r=i(3),o=i(0),s=i(46),a=function(){return function(t){this.ef=(new Date).getTime(),this.GB=t}}(),u=function(){function t(){this.VB=new r,this.logger=(o.Framework.resolve(o.Framework.V.R)||console).log(),this.logger.debug("INIT TICKET RESOLVER")}return t.prototype.resolve=function(t,e,i){var r=this,o=n.defer();return t&&(t.on(Services.BB,0,function(t){r.jB(t)}),t.on(Services.BB,2,function(t){r.jB(t)}),this.VB.set(e,new a(o))),o.Ss},t.prototype.jB=function(t){var e=this,i=(new Date).getTime(),n=JSON.parse(t.msg),r=!1;this.VB.forEach(function(t,o){if(e.QB(o,n)){r=!0;var s=e.KB(o,n);s?(s.ef=t.ef,s.rf=i,t.GB.resolve(s)):t.GB.reject("Ticket verification failed"),e.VB.delete(s)}}),r||this.logger.warn("no pending ticket matching: "+t.msg)},t.prototype.$l=function(t){if(new RegExp("^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?").test(t)){var e=this.YB();return e.RN(t),e}return null},t.prototype.YB=function(){return new s.BN},t.prototype.QB=function(t,e){return t.up()===e[s.BN.FN]&&t.cp()===e[s.BN.MN]&&t.hp()===e[s.BN.UN]},t.prototype.KB=function(t,e){return t.mN(e),t.SN()?t:null},t}();e.WB=u},function(t,e,i){
/*! uuid.js
 * Copyright (c) 2010-2012 Robert Kieffer
 * MIT License - http://opensource.org/licenses/mit-license.php
 */
!function(e){"use strict";function n(t,e){var i=e||0,n=l;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}function r(t,e,i){var r=e&&i||0;"string"==typeof t&&(e="binary"===t?new c(16):null,t=null);var s=(t=t||{}).random||(t.$B||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;a++)e[r+a]=s[a];return e||n(s)}var o,s,a,u,h;e?function(){var t=e.crypto||e.msCrypto;if(!o&&t&&t.getRandomValues)try{var i=new Uint8Array(16);u=o=function(){return t.getRandomValues(i),i},o()}catch(t){}if(!o){var n=new Array(16);s=o=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}():function(){try{var t=i(118).eH;a=o=t&&function(){return t(16)},o()}catch(t){}}();for(var c="function"==typeof Buffer?Buffer:Array,l=[],f={},p=0;p<256;p++)l[p]=(p+256).toString(16).substr(1),f[l[p]]=p;var d=o(),g=[1|d[0],d[1],d[2],d[3],d[4],d[5]],v=16383&(d[6]<<8|d[7]),y=0,m=0,E=r;E.tH=function(t,e,i){var r=e&&i||0,o=e||[],s=null!=(t=t||{}).zB?t.zB:v,a=null!=t.JB?t.JB:(new Date).getTime(),u=null!=t.XB?t.XB:m+1,h=a-y+(u-m)/1e4;if(h<0&&null==t.zB&&(s=s+1&16383),(h<0||a>y)&&null==t.XB&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=a,m=u,v=s;var c=(1e4*(268435455&(a+=122192928e5))+u)%4294967296;o[r++]=c>>>24&255,o[r++]=c>>>16&255,o[r++]=c>>>8&255,o[r++]=255&c;var l=a/4294967296*1e4&268435455;o[r++]=l>>>8&255,o[r++]=255&l,o[r++]=l>>>24&15|16,o[r++]=l>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var f=t.ZB||g,p=0;p<6;p++)o[r+p]=f[p];return e||n(o)},E.ON=r,E.parse=function(t,e,i){var n=e&&i||0,r=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){r<16&&(e[n+r++]=f[t])});r<16;)e[n+r++]=0;return e},E.rH=n,E.iH=c,E.nH=o,E.sH=s,E.oH=a,E.aH=u,void 0!==t&&t.i?t.i=E:(h=e.uuid,E.wo=function(){return e.uuid=h,E},e.uuid=E)}("undefined"!=typeof window?window:null)},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(4),o=i(78),s=i(0),a=i(27),u=i(119),h=function(){function t(){this.hH="IdentityStore",this.cH="IdentityDB",this.gd=null,this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,s.Framework&&s.Framework.resolve(s.Framework.V.R)?this.logger=s.Framework.resolve(s.Framework.V.R).log():this.logger=console}return t.prototype.uH=function(){var t=this,e=r.defer(),i=indexedDB.open(this.cH);return i.onupgradeneeded=function(){i.result.createObjectStore(t.hH,{keyPath:"id"})},i.onsuccess=function(){var t=i.result;e.resolve(t)},i.onerror=function(t){e.reject(t)},e.Ss},t.prototype.Zl=function(){var t=this;if(this.lH)return this.lH;var e=r.defer();if(this.gd)e.resolve(new u.pH(this.gd));else if(a.Gd.Eh&&this.indexedDB){var i=setTimeout(function(){t.logger.warn("[HiveComm] timeout retrieving persistent ID - generating random one"),t.gd=t.dH(),t.logger.debug("[HiveComm] Generated UUID: "+t.gd),e.resolve(new u.pH(t.gd))},4e3);try{this.uH().then(function(n){var r=n.transaction(t.hH,"readwrite").objectStore(t.hH).get("MYID");r.onsuccess=function(){if(clearTimeout(i),t.gd)e.resolve(new u.pH(t.gd));else if(null!=r.result&&a.Gd.Eh){var o=r.result.value;t.logger.debug("[HiveComm] Retrieved persistent UUID: "+o),t.gd=o,n.close(),e.resolve(new u.pH(t.gd))}else{var s=t.dH();t.fH(n,s),e.resolve(new u.pH(t.gd))}},r.onerror=function(n){clearTimeout(i),t.gd||(t.logger.warn("[HiveComm] error retrieving persistent UUID: "+n),t.gd=t.dH(),t.logger.debug("[HiveComm] Generated UUID: "+t.gd)),e.resolve(new u.pH(t.gd))}}).fail(function(n){clearTimeout(i),t.gd||(t.logger.warn("[HiveComm] error opening indexedDB - generating random id. Error: "+n),t.gd=t.dH(),t.logger.debug("[HiveComm] Generated UUID: "+t.gd)),e.resolve(new u.pH(t.gd))})}catch(t){this.gd=this.dH(),this.logger.debug("[HiveComm] Persistence error - Generate UUID: "+this.gd,t),e.resolve(new u.pH(this.gd))}}else this.gd=this.dH(),this.logger.debug("[HiveComm] Persistence disabled - Generate UUID: "+this.gd),e.resolve(new u.pH(this.gd));return this.lH=e.Ss,this.lH},t.prototype.fH=function(t,e){var i=this,n=t.transaction(this.hH,"readwrite");n.objectStore(this.hH).put({id:"MYID",value:e}),n.oncomplete=function(){i.logger.debug("[HiveComm] completed UUID persistence"),t.close()},this.logger.debug("[HiveComm] Generated UUID: "+e),this.gd=e},t.prototype.dH=function(){return o.ON()},t}();e.gH=h;var c=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.Zl=function(){var e=this;if(this.EH)return this.EH;var i=r.defer();return t.prototype.Zl.call(this).then(function(t){var n=e.dH(),r=t.rp(),o=new u.pH(n,r);i.resolve(o)}).fail(function(t){var n=e.dH(),r=new u.pH(n);i.resolve(r)}),this.EH=i.Ss,this.EH},e}(h);e.vH=c},function(t,e,i){"use strict";var n=function(){function t(){}return t.prototype.yH=function(t){this.hostname=t},t.prototype.getHostName=function(){return this.hostname},t.prototype.TH=function(t){this.mH=t},t.prototype.getNetworkChanged=function(){return this.mH},t}();e.IH=n},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(8),s=i(120),a=i(1),u=function(){function t(){this.loggerId="[PreloadConnectivityInfoProvider] ",this.connInfo=window.myConnInfo,this.logger=r.Framework.resolve(r.Framework.V.R).log(),this.SH=r.Framework.resolve(o.pc.oc),this.connInfo||a.ErrorMonitor.ve().logError("helper undefined",this.loggerId),this.RH()}return t.prototype.RH=function(){var t=new s.wH;this.SH.TH(t)},t.prototype.Md=function(){return this.SH},t.prototype.getConnectivityInfo=function(){var t=this;if(!this.connInfo)return n.reject("ConnInfo helper undefined");var e=setTimeout(function(){return t.logger.warn(t.loggerId+"Get connectivity info expired"),t.SH?n.resolve(t.SH):n.reject("expired")},2e3);try{return this.connInfo.getConnectivityInfo().then(function(i){return clearTimeout(e),t.SH=i,i}).fail(function(e){return t.logger.debug(t.loggerId+" get connectivity info failed with error 1: ",e),t.SH?t.SH:n.reject(e)})}catch(t){return this.logger.debug(this.loggerId+" get connectivity info failed with error 2:",t),n.reject(t)}},t.prototype.bH=function(t,e,i){},t}();e.CH=u},function(t,e,i){"use strict";var n=function(){function t(){}return t.prototype._H=function(t){this.publicIp=t},t.prototype.getPublicIp=function(){return this.publicIp},t.prototype.PH=function(t){this.AH=t},t.prototype.getMacAddress=function(){return this.AH},t.prototype.OH=function(t){this.nic=t},t.prototype.getNic=function(){return this.nic},t.prototype.NH=function(t){this.nicName=t},t.prototype.getNicName=function(){return this.nicName},t.prototype.DH=function(t){this.privateIp=t},t.prototype.getPrivateIp=function(){return this.privateIp},t.prototype.kH=function(t){this.netmask=t},t.prototype.getNetmask=function(){return this.netmask},t.prototype.LH=function(t){this.MH=t},t.prototype.getCidr=function(){return null},t}();e.FH=n},function(t,e,i){"use strict";var n=i(4),r=i(3),o=i(0),s=i(8),a=i(82),u=i(121),h=i(14),c=i(27),l=i(55),f=function(){function t(){this.UH=null,this.BH=null,this.HH=null,this.xH=null,this.qH=new r,this.publicIp=null,this.GH=[],this.ll=!1,this.VH=null,this.logger=o.Framework.resolve(o.Framework.V.R).log(),this.SH=o.Framework.resolve(s.pc.oc),this.jH=new u.QH,this.KH=[],this.RH(),this.YH()}return t.prototype.RH=function(){var t=new a.FH;this.SH.TH(t)},t.prototype.YH=function(){var t=this;o.Framework.setInterval(function(){t.GH=[],t.KH=[],t.qH=new r,t.publicIp=null,t.WH=null},12e4)},t.prototype.getConnectivityInfo=function(){return this.WH||(this.WH=this.zH()),this.WH},t.prototype.Md=function(){return this.SH},t.prototype.zH=function(){var t=this,e=n.defer();if(this.VH=o.Framework.setTimeout(function(){e.reject({JH:!0,message:"expired"})},4e3),h.HiveConfig.ConnInfo.detectPrivateIP&&this.XH())try{this.UH=new RTCPeerConnection(null),this.HH=this.UH.createDataChannel("sendChannel",{reliable:!1}),this.BH=new RTCPeerConnection(null),this.BH.ondatachannel=function(i){t.xH=i.channel,t.xH.onopen=function(i){"open"===t.xH.readyState&&(t.logger.debug("Collected ips ["+t.qH.keys().join(", ")+"]"),t.BH.close(),t.jH.ZH().then(function(e){t.KH=e,t.logger.debug("Already known matching ips ["+t.KH.join(",")+"]");var i=t.qH.keys();t.KH.forEach(function(e){i.indexOf(e)>0&&(t.GH.push(e),t.qH.delete(e))}),t.qH.keys().forEach(function(e){t.GH.push(e)})}).fail(function(e){t.logger.warn("Get Previous working ips failed with error "+e.message),t.qH.keys().forEach(function(e){t.GH.push(e)})}).finally(function(){t.logger.debug("Final private ip list ["+t.GH.join(",")+"]"),e.resolve(t.$H())}))}},this.UH.onicecandidate=function(i){i.candidate&&t.ex(i.candidate.candidate),!i.candidate||t.BH.addIceCandidate(i.candidate).catch(function(i){e.reject({JH:!0,message:i.message}),o.Framework.clearTimeout(t.VH),console.log("Error: Failure during addIceCandidate()")})},this.BH.onicecandidate=function(i){i.candidate&&t.ex(i.candidate.candidate),!i.candidate||t.UH.addIceCandidate(i.candidate).catch(function(i){e.reject({JH:!0,message:i.message}),o.Framework.clearTimeout(t.VH),console.log("Error: Failure during addIceCandidate()")})},this.UH.createOffer().then(function(e){return t.UH.setLocalDescription(e)}).then(function(){return t.BH.setRemoteDescription(t.UH.localDescription)}).then(function(){return t.BH.createAnswer()}).then(function(e){return t.BH.setLocalDescription(e)}).then(function(){return t.UH.setRemoteDescription(t.BH.localDescription)}).catch(function(i){e.reject({JH:!0,message:i.message}),o.Framework.clearTimeout(t.VH),console.log("Error: Failure creating offer")})}catch(t){e.reject({JH:!0,message:t.message})}else{o.Framework.clearTimeout(this.VH);var i=h.HiveConfig.ConnInfo.detectPrivateIP?"webrtc datachannel not supported":"private IP detection disabled";e.reject({JH:!1,message:i})}return e.Ss},t.prototype.XH=function(){try{return null!=l.Vu&&null!=l.hL&&"function"==typeof new RTCPeerConnection(null,null).createDataChannel}catch(t){return!1}},t.prototype.ex=function(t){var e=/([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(t);if(e){var i=e[0];this.qH.set(i,!0)}},t.prototype.$H=function(){var t=new a.FH;return this.GH.length>0&&t.DH(this.GH[0]),this.publicIp&&t._H(this.publicIp),this.SH.TH(t),this.SH},t.prototype.bH=function(t,e,i){if(this.publicIp=t,this.tx(),0===i&&this.GH.length>1)this.GH.shift();else if(c.Gd._h&&0!==i&&-1==this.KH.indexOf(this.GH[0]))this.KH.unshift(this.GH[0]),this.jH.ix(this.KH.slice(0,2));else if(c.Gd._h&&0!==i&&this.KH.indexOf(this.GH[0])>0){var n=this.KH.indexOf(this.GH[0]);this.KH=this.KH.splice(n,1),this.KH.unshift(this.GH[0]),this.jH.ix(this.KH.slice(0,2))}this.$H()},t.prototype.tx=function(){var t=this.GH.indexOf(this.publicIp);t>-1&&this.GH.splice(t,1)},t}();e.nx=f},function(t,e,i){"use strict";var n=i(7),r=i(24),o=i(9),s=i(0),a=i(5),u=i(2),h=i(1),c=function(){function t(){this.loggerId="[TIMER HANDLER] ",this.sx=new n.rc.Vh,this.ox=new n.rc.Vh,this.logger=s.Framework.resolve(s.Framework.V.R).log()}return t.prototype.ax=function(t,e){try{var i=0,n=-1,o=t.zf.duration;this.sx.kh()?n=Math.max(10,this.sx.Bh(e)):this.ox.kh()&&(n=Math.max(10,this.ox.Bh(e))),i=n>-1?Math.max(0,o-n*a.hh.Qo.jo):o/2,t.type==r.bf.wf&&(i*=2);var s=Math.max(this.hx(),i);return this.logger.debug("TIMER DETAILS duration: "+o+" left: "+e+" downTime: "+n+" fallAvg: "+this.sx.Gh()+" timer: "+s),s}catch(t){return h.ErrorMonitor.ve().logError("Error calculating the p2p timeout",this.loggerId,u.hs.Ii.Ti,t),0}},t.prototype.ux=function(t,e){return 5e3},t.prototype.lx=function(t){try{return this.sx.kh()?Math.min(this.sx.Bh(t),this.px()):this.gx()}catch(t){return h.ErrorMonitor.ve().logError("Error calculating the delivery delay",this.loggerId,u.hs.Ii.mi,t),this.gx()}},t.prototype._M=function(t){if(t.Xf()===o.vc.fc)switch(t.Jf()){case r.bf.mf:case r.bf.Tf:case r.bf.If:this.sx.Uh(t.ag());break;case r.bf.Rf:case r.bf.wf:this.ox.Uh(t.ag())}},t.prototype.hx=function(){return t.Ex},t.prototype.gx=function(){return t.vx},t.prototype.px=function(){return t.yx},t}();c.Ex=500,c.yx=1500,c.vx=500,e.Tx=c},function(t,e,i){"use strict";var n=i(3),r=i(48);i(144),i(146);var o=i(86),s=i(0),a=i(147),u=i(9),h=i(61),c=i(148),l=i(149),f=i(57),p=i(14),d=i(1),g=i(2),v=function(){function t(t){this.loggerId="[DASH METADATA] ",this.isLive=!1,this.logger=s.Framework&&s.Framework.resolve(s.Framework.V.R)?s.Framework.resolve(s.Framework.V.R).log(t):console,this.mx=new DashParser,this.reset()}return t.prototype.Ix=function(t){var e="";return-1!==t.indexOf("/")&&(-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),e=t.substring(0,t.lastIndexOf("/")+1)),e},t.prototype.pM=function(){return this.isLive},t.prototype.lM=function(){return this.Sx.values().map(function(t){return t.bandwidth})},t.prototype.reset=function(){this.Sx=new n},t.prototype.Rx=function(){return this.wx},t.prototype.parse=function(e,i,n){try{this.reset(),this.IM=e,this.bx(e,i),this.isLive="static"!==this.manifest.type;for(var r=this.manifest.BaseURL,o=this.manifest.Period_asArray[0],s=o.AdaptationSet_asArray,h=0;h<s.length;h++){var c=o.AdaptationSet[h],l=-1!=c.mimeType.indexOf("audio")?u.vc.dc:u.vc.fc;l===u.vc.fc&&c.ContentProtection&&this.Cx(c.ContentProtection);for(var f=c.SegmentTemplate.initialization,p=c.SegmentTemplate.media,v=parseInt(c.SegmentTemplate.timescale),y=0;y<c.Representation_asArray.length;y++){var m=c.Representation_asArray[y],E=new a._x;E.type=l,E.bandwidth=parseInt(m.bandwidth),E.timescale=v,E.Px=m.id,E.initialization=r+""+f,E.initialization=E.initialization.replace(t.Ax,""+E.bandwidth),E.initialization=E.initialization.replace(t.Ox,""+E.Px),n||this.logger.debug("QualityLevel "+u.vc[l]+" "+E.bandwidth);var b=r+""+p;b=(b=b.replace(t.Ax,""+E.bandwidth)).replace(t.Ox,""+E.Px),E.Nx=b;var w=parseInt(E.bandwidth+""),T=this.Dx(c.SegmentTemplate.SegmentTimeline_asArray[0].S_asArray,b,w,l);E.kx=T.Lx,E.Mx=T.Fx;var S=this.Ux(b);this.Sx.set(S,E)}}return this.wx=!0,this.Bx(i,n)}catch(t){throw d.ErrorMonitor.ve().logError("Error parsing the metadata",this.loggerId,g.hs.ui.Wr,t),this.wx=!1,new Error(t)}},t.prototype.Dx=function(e,i,n,o){try{var s,a=new r,u=new r,c=0,l=0;return e.forEach(function(e){if(e.d){e.t?c=parseInt(e.t):c+=l;var r=parseInt(e.d),f=i.replace(t.Hx,c+"");(g=new h.DF(c,n,r,f,f)).type=o,s&&(s.next=g),a.set(f,g),u.set(c,g),s=g;var p=0;e.r&&(p=parseInt(e.r));for(var d=0;d<p;d++){c+=r;var g;f=i.replace(t.Hx,c+"");(g=new h.DF(c,n,r,f,f)).type=o,s&&(s.next=g),a.set(f,g),u.set(c,g),s=g}l=r}}),{Lx:a,Fx:u}}catch(t){throw d.ErrorMonitor.ve().logError("Error extracting segment maps",this.loggerId,g.hs.ui.zr,t),new Error(t)}},t.prototype.Cx=function(t){try{if(t){if(t.CryptoPeriod){var e=t.CryptoPeriod;this.OM&&!this.OM.xx()&&this.OM instanceof c.qx||(this.OM=new c.qx(e.keyUriTemplate,e.IV,this.authenticationToken))}else this.OM&&this.OM instanceof l.Gx||(this.OM=new l.Gx);this.OM&&f.DASH.XL&&this.OM.init()}}catch(t){throw d.ErrorMonitor.ve().logError("Error initializing the protection",this.loggerId,g.hs.ui.Jr,t),new Error(t)}},t.prototype.Vx=function(t){var e=this.Ux(t);return this.Sx.get(e)},t.prototype.gM=function(t){try{return this.Vx(t).kx.get(t)}catch(t){return d.ErrorMonitor.ve().logError("Error getting the segment info",this.loggerId,g.hs.ui.Xr,t),null}},t.prototype.fM=function(t){var e=!1;return this.Sx.forEach(function(i,n){i.initialization===t&&(e=!0)}),e},t.prototype.vM=function(t){var e=this.gM(t);return null!=e?e.next:null},t.prototype.dk=function(t,e,i,n){try{var r;if(this.Sx.forEach(function(t,e){t.bandwidth===n&&(r=t)}),r&&r.Mx.has(t)&&r.Mx.has(i)){for(var o=r.Mx.get(t),s=r.Mx.get(i),a=0,u=o;u&&u!=s;)a+=u.duration,u=u.next;return Math.round(a/(r.timescale/1e3))}return 0}catch(t){return d.ErrorMonitor.ve().logError("Error extracting the segment distance",this.loggerId,g.hs.ui.Zr,t),0}},t.prototype.jx=function(t){try{t instanceof Uint8Array&&(t=t.buffer);var e=ISOBoxer.Qx(t),i=e.fetch("tfhd"),n=e.fetch("trun"),r=i?i.default_sample_duration:0;if(n){var o=0;return n.Kx.forEach(function(t){o+=t.sample_duration}),isNaN(o)&&r>0&&(o=r*n.Kx.length),o}}catch(t){return d.ErrorMonitor.ve().logError("Error extracting duration from the buffer",this.loggerId,g.hs.ui.$r,t),0}},t.prototype.Bx=function(t,e){var i=this.Yx();if(!e&&(this.isLive||i||p.HiveConfig.Dash.DashRemoveBitrateSize))try{var n=new o({}),r=n.Wx(t);return this.isLive&&this.zx(r),(i||p.HiveConfig.Dash.DashRemoveBitrateSize)&&this.Jx(r,i,p.HiveConfig.Dash.DashRemoveBitrateSize),n.Xx(r)}catch(t){this.logger.error(t)}return t},t.prototype.zx=function(t){var e=this;try{var i=Math.max(1,f.DASH.DASH_METADATA_MIN_FRAGMENTS),n=Math.max(1,f.DASH.eM),r=0,o=0;return t.MPD&&t.MPD.Period&&t.MPD.Period.AdaptationSet.forEach(function(t){if(e.Zx(t)){for(var s=t.SegmentTemplate.SegmentTimeline.S_asArray,a=parseInt(t.SegmentTemplate._timescale),u=n*a,h=0,c=0,l=0;l<s.length&&i>0;l++){h=l,(g=(p=s[l])._r?parseInt(p._r):1)>i?(c=i,i=0):(i-=g,c=g)}for(var f=s.length-1;f>=0&&u>0&&f>=h;f--){var p,d,g=(p=s[f])._r?parseInt(p._r):1;if(!p._d)throw new Error("missing segment duration");var v=g*(d=parseInt(p._d));if((f>h||f==h&&0==c)&&u>=v)u-=v,s.splice(f,1),r+=g,o+=v;else{var y=Math.ceil(u/d);f==h&&(y=Math.min(y,g-c));var m=d*y;p._r=g-y+"",u-=m,r+=y,o+=m}}e.logger.debug("DASH trimmed "+r+" segments for total duration: "+o)}}),t}catch(t){throw d.ErrorMonitor.ve().logError("Error trimming the manifest",this.loggerId,g.hs.ui.si,t),new Error(t)}},t.prototype.Zx=function(t){return!!t&&!!("video/mp4"===t._mimeType||"video"===t._contentType||t.SegmentTemplate._media&&t.SegmentTemplate._media.indexOf("video")>-1)&&t.SegmentTemplate&&t.SegmentTemplate.SegmentTimeline},t.prototype.Yx=function(){if(p.HiveConfig.Dash.DashFilterBitrates)try{var t=null;t="string"==typeof p.HiveConfig.Dash.DashFilterBitrates?p.HiveConfig.Dash.DashFilterBitrates.split(","):p.HiveConfig.Dash.DashFilterBitrates;var e=[];return t.forEach(function(t){var i=parseInt(t);isNaN(i)||e.push(i)}),e}catch(t){d.ErrorMonitor.ve().logError("Error parsing DashFilterBitrates",this.loggerId,g.hs.ui.oi,t)}},t.prototype.Jx=function(t,e,i){var n=this;if(t.MPD&&t.MPD.Period){var r=[];t.MPD.Period.AdaptationSet.forEach(function(t){if(n.Zx(t)){var o=t.Representation_asArray;o.sort(function(t,e){return isNaN(t._bandwidth)&&(t._bandwidth=parseInt(t._bandwidth)),isNaN(e._bandwidth)&&(e._bandwidth=parseInt(e._bandwidth)),t._bandwidth-e._bandwidth});for(var s=o.length-1;s>=0;s--)i&&(delete o[s]._width,delete o[s]._height),e&&-1==e.indexOf(s)?o.splice(s,1):r.push(o[s]._bandwidth);n.logger.debug("DASH filtered-in bitrates: "+r.reverse().join(" ")+" - removed size: "+i)}})}},t.prototype.HM=function(t,e,i,n){try{var r;if(this.Sx.forEach(function(t,e){t.bandwidth===n&&(r=t)}),r&&r.Mx.has(t)&&r.Mx.has(i)){for(var o=r.Mx.get(t),s=r.Mx.get(i),a=0,u=o;u&&u!=s;)a+=u.duration,u=u.next;return Math.round(a/(r.timescale/1e3))}return 0}catch(t){return d.ErrorMonitor.ve().logError("Error getting the duration between two segments",this.loggerId,g.hs.ui.hi,t),0}},t.prototype.qM=function(t,e){try{var i;return this.Sx.forEach(function(t,n){t.bandwidth===e&&(i=t)}),i&&i.Mx.has(t)?i.Mx.get(t):null}catch(t){return d.ErrorMonitor.ve().logError("Error getting the segment",this.loggerId,g.hs.ui.ci,t),null}},t}();v.Ax="$Bandwidth$",v.Hx="$Time$",v.Ox="$RepresentationID$",e.$x=v},function(t,e,i){t.i=function(t,e,i){function n(t){var e=t.localName;return null==e&&(e=t.eq),null!=e&&""!=e||(e=t.nodeName),e}function r(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):t}function o(r){if(r.nodeType==g.DOCUMENT_NODE){var s,a,u=r.firstChild;for(s=0,a=r.childNodes.length;s<a;s+=1)if(r.childNodes[s].nodeType!==g.COMMENT_NODE){u=r.childNodes[s];break}return i?h=o(u):(h={})[f=n(u)]=o(u),h}if(r.nodeType==g.ELEMENT_NODE){var h;(h=new Object).__cnt=0;for(var c=r.childNodes,l=0;l<c.length;l++){var f=n(u=c.item(l));if(h.__cnt++,null==h[f])h[f]=o(u),h[f+"_asArray"]=new Array(1),h[f+"_asArray"][0]=h[f];else{if(null!=h[f]&&!(h[f]instanceof Array)){var p=h[f];h[f]=new Array,h[f][0]=p,h[f+"_asArray"]=h[f]}for(var v=0;null!=h[f][v];)v++;h[f][v]=o(u)}}for(var y=0;y<r.attributes.length;y++){var m=r.attributes.item(y);h.__cnt++;for(var E=m.value,b=0,w=t.length;b<w;b++){var T=t[b];try{T.test.call(this,m)&&(E=T.tq.call(this,m.value))}catch(t){T.test.call(this,m),console.error(t)}}h[e+m.name]=E}var S=function(t){return t.prefix}(r);return null!=S&&""!=S&&(h.__cnt++,h.__prefix=S),1==h.__cnt&&null!=h["#text"]&&(h=h["#text"]),null!=h["#text"]&&(h.__text=h["#text"],h.__text instanceof Array&&(h.__text=h.__text.join("\n")),d&&(h.__text=function(t){return t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}(h.__text)),delete h["#text"],delete h["#text_asArray"],""===h.__text.trim()&&delete h.__text),null!=h["#cdata-section"]&&(h.__cdata=h["#cdata-section"],delete h["#cdata-section"],delete h["#cdata-section_asArray"]),null==h.__text&&null==h.__cdata||(h.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),h}return r.nodeType==g.TEXT_NODE||r.nodeType==g.CDATA_SECTION_NODE?r.nodeValue:r.nodeType==g.COMMENT_NODE?null:void 0}function s(t,e,i,n){var r="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+e;if(null!=i)for(var o=0;o<i.length;o++){var s=i[o],a=t[s];r+=" "+s.substr(1)+"='"+a+"'"}return r+(n?"/>":">")}function a(t,e){return"</"+(null!=t.__prefix?t.__prefix+":":"")+e+">"}function u(t,e){return!!(function(t,e){return-1!==t.indexOf(e,t.length-e.length)}(e.toString(),"_asArray")||0==e.toString().indexOf("_")||t[e]instanceof Function)}function h(t){var e=0;if(t instanceof Object)for(var i in t)u(t,i)||e++;return e}function c(t){var e=[];if(t instanceof Object)for(var i in t)-1==i.toString().indexOf("__")&&0==i.toString().indexOf("_")&&e.push(i);return e}function l(t){var e="";return t instanceof Object?e+=function(t){var e="";return null!=t.__cdata&&(e+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e+=d?r(t.__text):t.__text),e}(t):null!=t&&(e+=d?r(t):t),e}function f(t,e,i){var n="";if(0==t.length)n+=s(t,e,i,!0);else for(var r=0;r<t.length;r++)n+=s(t[r],e,c(t[r]),!1),n+=p(t[r]),n+=a(t[r],e);return n}function p(t){var e="";if(h(t)>0)for(var i in t)if(!u(t,i)){var n=t[i],r=c(n);null==n||null==n?e+=s(n,i,r,!0):n instanceof Object?n instanceof Array?e+=f(n,i,r):h(n)>0||null!=n.__text||null!=n.__cdata?(e+=s(n,i,r,!1),e+=p(n),e+=a(n,i)):e+=s(n,i,r,!0):(e+=s(n,i,r,!1),e+=l(n),e+=a(n,i))}return e+l(t)}null!=e||(e="_"),null!=i||(i=!1);var d=!1,g={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.rq=function(t){var e;return window.DOMParser?e=(new window.DOMParser).parseFromString(t,"text/xml"):(0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.iq(t)),e},this.nq=function(t){return o(t)},this.Wx=function(t){var e=this.rq(t);return this.nq(e)},this.Xx=function(t){return p(t)},this.sq=function(t){var e=this.Xx(t);return this.rq(e)},this.getVersion=function(){return"1.0.11"},this.oq=function(t){d=t}}},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(3),o=i(58),s=i(151),a=i(154),u=i(0),h=i(31),c=i(9),l=i(34),f=i(30),p=i(1),d=i(2);!function(t){function e(e){return-1!=e.toLowerCase().indexOf(t.VL.toLowerCase())||-1!=e.toLowerCase().indexOf(t.aq.toLowerCase())||-1!=e.toLowerCase().indexOf(t.hq.toLowerCase())}t.cq=1,t.uq=2,t.lq=3e4,t.pq=4e3,t.dq=500,t.fq=!0,t.gq=1e4,t.Eq=16,t.vq=3,t.VL=".m3u8",t.aq="(format=m3u8-aapl-v3)",t.hq="(video,format=m3u8-aapl-v3,audiotrack=audio)",t.GL=".ts",t.rM=function(e){return this.qL(e)||-1!=e.indexOf(t.GL)},t.qL=e;var i=function(i){function o(t,e,n){var o=i.call(this,n)||this;return o.yq=!1,o.loggerId="[HLS Context] ",o.Ag=0,o.MM=new r,o.DM=new r,o.ticket=t,o.Tq=e,e&&(o.mq=o.Iq(t._N())),o.nM=t.NN(),o.sM=new a.Sq,o.Rq=new s.wq,o}return n(o,i),o.prototype.getStreamProtocol=function(){return StreamProtocol.bq},o.prototype.Iq=function(t){var e=t.lastIndexOf("/");return t.substr(0,e)},o.prototype.Sk=function(){return this.ticket},o.prototype.lM=function(){return this.Rq.lM()},o.prototype.isLive=function(){return this.Rq.isLive()},o.prototype.dM=function(){return this.sM},o.prototype.getContextId=function(){return this.ticket.kN()},o.prototype.uM=function(){return this.nM},o.prototype.mM=function(t){try{var i=t.url=this.Cq(t.url);return i===this.nM?(this.yq&&this.logger.debug("SAME MANIFEST "+i+","+this.nM),!0):null!=this.Rq&&this.Rq._q(i)?(this.yq&&this.logger.debug("CORRECT PLAYLIST "+i+","+this.nM),!0):null!=this.Rq&&null!=this.Rq.gM(i)?(this.yq&&this.logger.debug("CORRECT SEGMENT "+i+","+this.nM),!0):!(!e(i)||this.Rq.Pq()===i||(this.yq&&this.logger.debug("FIRST REQUEST FOR MANIFEST "+i+","+this.nM),1))}catch(i){return p.ErrorMonitor.ve().logError("Error getting the current context of the HiveRequest",this.loggerId,d.hs.di.qr,{detailedError:i,url:t.url}),!1}},o.prototype.Cq=function(t){return f(t).nb().toString()},o.prototype.Xf=function(t){try{return e(t)?c.vc.gc:null!=this.Rq.gM(t)?c.vc.fc:c.vc.Ec}catch(e){return p.ErrorMonitor.ve().logError("Error getting the entityType",this.loggerId,d.hs.di.Br,{detailedError:e,url:t}),c.vc.Ec}},o.prototype.ig=function(t){var e=this.Xf(t);if(e==c.vc.fc||e==c.vc.dc)return!0},o.prototype.EM=function(t){var e=0,i=0,n=0,r=!0,o=!1;try{var s=this.Xf(t);if(s!=c.vc.gc){var a=this.Rq.gM(t);null!=a&&(e=a.duration,i=a.bitrate,n=a.id,o=this.ig(t))}else r=!1,null!=this.Rq&&this.Rq.Aq.has(t)&&(i=this.Rq.Aq.get(t).bitrate,this.MM.set(i,u.Framework.time()));return new l.N_(t,s,r,n,e,i,o,this.getContextId())}catch(e){return p.ErrorMonitor.ve().logError("Error getting the entityCharacteristics from the url",this.loggerId,d.hs.di.Hr,{detailedError:e,url:t}),new l.N_(t,c.vc.Ec,!1,0,0,0,!1,this.getContextId())}},o.prototype.VD=function(t,e,i){var n=this.Rq.qM(t,e);return null!=n?new l.N_(n.yM,i,!0,t,n.duration,e,!0,this.getContextId()):null},o.prototype.SM=function(t){try{var e=t.RM,i=t.eg(),n=this.Rq.parse(i,e);if(this.Rq.Aq.has(i)){var r=this.Rq.Aq.get(i);this.wM.QD(r.bitrate)}t.Kf.response=n,t.Kf.responseText=n}catch(e){p.ErrorMonitor.ve().logError("Error receiving the metadata",this.loggerId,d.hs.di.li,{detailedError:e,url:t.eg()}),t.RM&&(t.Kf.responseText=t.RM,t.Kf.response=t.RM)}},o.prototype.CM=function(t){i.prototype.CM.call(this,t),t.Xf()!=c.vc.gc&&t.Xf()!=c.vc.Ec&&(this.sM._M(t),t.Xf()==c.vc.fc&&this.wM.UD(t.zf))},o.prototype.PM=function(t,e){var n=t;return n.AM=u.Framework.time(),i.prototype.PM.call(this,n,e)},o.prototype.tk=function(e){t.fq&&(null==this.DM.get(e)&&this.Rq.isLive()?this.kM(e):this.logger.debug("HLS PRE-FETCHING METADATA ALREADY SCHEDULED OR MISSING HLS INFO"))},o.prototype.kM=function(e){var i=this;try{var n=this.Rq.Oq.get(e);if(null!=n){var r=this.MM.has(e),o=this.MM.get(e),s=(r?o:0)+(null!=n.Nq?n.Nq[n.Nq.length-1].duration:t.pq),a=Math.max(1,s-u.Framework.time()+t.dq);this.logger.info("HLS PREFETCHING METADATA "+n.yM+" BITRATE "+e+" IN "+a);var h=u.Framework.setTimeout(function(){i.FM(e,n.yM,u.Framework.time())},a);this.DM.set(e,h)}else this.logger.warn("NO STREAM WITH BT "+e)}catch(t){p.ErrorMonitor.ve().logError("Error scheduling metadata prefetch",this.loggerId,d.hs.di.pi,t)}},o.prototype.FM=function(t,e,i){var n=this.MM.get(t);if(null==n&&(n=0),n>i)this.kM(t);else{var r=new h.HiveRequest(this.ticket.sessionId);r.open("GET",e),r.internal=!0,r.send(),this.DM.delete(t),this.MM.set(t,u.Framework.time())}},o.prototype.LM=function(){var t=this;this.DM.keys().forEach(function(e){var i=t.DM.get(e);u.Framework.clearTimeout(i),t.DM.delete(e)})},o.prototype.ak=function(){return i.prototype.TM.call(this,t.cq,t.uq)},o.prototype.nk=function(t){try{var e=t.url,i=this.Rq.vM(e);return null!=i?this.EM(i.yM):null}catch(t){return p.ErrorMonitor.ve().logError("Error getting the next entity",this.loggerId,d.hs.di.xr,t),null}},o.prototype.dk=function(t,e,i,n){return i-t},o.prototype.pk=function(){return t.lq},o.prototype.xM=function(){return t.gq},o.prototype.lk=function(t,e){try{var i=this.PD(),n=this.BM(),r=i.A_(),o=0;if(t>r)for(var s=this.Rq.qM(r,e);s&&s.id<t;)o+=s.duration,this.logger.debug("Segment duration "+s.duration+" total msec "+o+"segment id "+s.id),s=s.next;var a=u.Framework.time()-n;return Math.max(0,o-a)}catch(t){return p.ErrorMonitor.ve().logError("Error getting the distance duration",this.loggerId,d.hs.di.Kr,t),0}},o}(o.GM);t.Dq=i}(e.bq||(e.bq={}))},function(t,e,i){"use strict";var n=i(3),r=i(4),o=i(0),s=i(89),a=i(62),u=i(90),h=i(1),c=i(2),l=function(){function t(){this.loggerId="[LIVE CACHE] ",this.kq=new n,this.Lq=-1,this.Mq=[],this.logger=o.Framework.resolve(o.Framework.V.R).log()}return t.prototype.init=function(t,e){this.Fq=t,this.Uq=e},t.prototype.put=function(t){var e=r.defer();try{var i=t.Zf(),n=t.responseHeaders,o=t.jf,l=t.qf.Pf-1,f=t.qf.Pf;-1==this.Lq&&this.Bq();var p=null,d=!1;if(this.kq.has(i)){p=this.kq.get(i);var g=new a.FF(0,l,f);d=!0,p.content.forEach(function(t,e){a.HF.BF(e).MF(g)&&(d=!1)})}else{var v=new a.FF(0,l,f).toString();p=new u.Hq(t.zf),t.xq&&(p.qq=t.xq.Ek.peerInfo),p.content.set(v,new s.Gq(f,o,t.qf,t.Jf())),this.kq.set(i,p),d=!0,this.Mq.unshift(i)}null==p.headers&&null!=n&&(p.headers=n),e.resolve(d)}catch(t){h.ErrorMonitor.ve().logError("Error adding fragment in LiveCache",this.loggerId,c.hs.ut.it,t),e.reject("CACHE PUT ERROR "+t)}return e.Ss},t.prototype.get=function(t){var e=r.defer();try{var i=this.kq.get(t);if(null!=i){var n=null;i.content.forEach(function(t,e){if(a.HF.BF(e).kF())return(n=t).headers=i.headers,void(n.qq=i.qq)}),e.resolve(n)}else e.resolve(null)}catch(t){h.ErrorMonitor.ve().logError("Error getting fragment from LiveCache",this.loggerId,c.hs.ut.nt,t),e.reject("CACHE GET ERROR "+t)}return e.Ss},t.prototype.ik=function(t){try{return this.kq.keys()}catch(t){return h.ErrorMonitor.ve().logError("Error getting keys from LiveCache",this.loggerId,c.hs.ut.ot,t),[]}},t.prototype.Vq=function(t){var e=r.defer();try{e.resolve(this.kq.values())}catch(t){h.ErrorMonitor.ve().logError("Error getting elements from LiveCache",this.loggerId,c.hs.ut.at,t),e.reject("CACHE GET ELEMENTS ERROR "+t)}return e.Ss},t.prototype.contains=function(t){var e=r.defer();try{this.kq.has(t)?e.resolve(!0):e.resolve(!1)}catch(t){h.ErrorMonitor.ve().logError("Error checking if LiveCache contains the fragment",this.loggerId,c.hs.ut.st,t),e.reject("CACHE CONTAINS ERROR "+t)}return e.Ss},t.prototype.Bq=function(){var t=this;this.jq(),this.logger.debug(this.loggerId+"Starting cache periodic purge"),this.Lq=o.Framework.setInterval(function(){t.m()},this.Uq)},t.prototype.jq=function(){-1!=this.Lq&&(this.logger.debug(this.loggerId+" Stopping cache periodic purge"),o.Framework.clearInterval(this.Lq),this.Lq=-1)},t.prototype.m=function(){var t=this;try{var e=0,i=0,n=0;this.logger.debug(this.loggerId+" RUNNING GC"),this.Mq.every(function(n,r){var o=t.kq.get(n).size();return e+o>t.Fq?(i=r,!1):(e+=o,!0)})||(n=this.Mq.length-i,this.Mq.splice(i,this.Mq.length-1).forEach(function(e){t.kq.delete(e)})),this.logger.debug(this.loggerId+" GC DONE - REMOVED: "+n+" - CURRENT ITEMS: "+this.kq.length+" SIZE: "+e+" "),0===this.kq.length&&(this.logger.debug(this.loggerId+" Cache contains no items, stopping purge timer"),this.jq())}catch(t){h.ErrorMonitor.ve().logError("Error purging LiveCache",this.loggerId,c.hs.ut.ct,t)}},t.prototype.Qq=function(){this.kq=new n,this.Mq=[]},t.prototype.Kq=function(){var t=this;this.kq.forEach(function(e,i){t.logger.debug("EID="+i),e.content.forEach(function(e,i){t.logger.debug("\tRANGE ",i)})})},t}();e.Yq=l},function(t,e,i){"use strict";var n=function(){return function(t,e,i,n){this.length=t,this.data=e,this.qf=i,this.Wq=n}}();e.Gq=n},function(t,e,i){"use strict";var n=i(62),r=i(3),o=function(){function t(t){this.headers=null,this.qq=null,this.totalSize=0,this.zq=!1,this.zf=t,this.content=new r}return t.prototype.size=function(){var t=0;return this.content.forEach(function(e,i){t+=n.HF.BF(i).size()}),t},t}();e.Hq=o},function(t,e,i){"use strict";!function(t){t[t.Jq=0]="ALL",t[t.AS=1]="AS",t[t.nD=2]="SITE"}(e.Xq||(e.Xq={}))},function(t,e,i){"use strict";var n,r=i(0),o=i(25),s=i(5),a=i(10),u=i(4),h=i(3),c=i(59),l=i(171),f=i(1),p=function(){function t(){this.Zq=!1,this.loggerId="[UDPLeaderElection] ",this.Ng=r.Framework.resolve(r.Framework.V.F),this.$q=new h,this.eG=new h,this.tG=new h,this.rG=new h,this.iG=new h,this.nG=[]}return t.prototype.init=function(t){this.sG=t,this.logger=r.Framework.resolve(r.Framework.V.R).log(t.sessionId),this.yD=t.yD,this.oG=t.oG,this.mD=t.mD},t.prototype.aG=function(t,e){var i=this,n=u.defer();try{if(this.Zq){var r=null;t.privateIpString&&(r=t.privateIpString);var o=new l.hG(t.guid,t.rankValue,r,t.isLeader);if(this.$q.has(o.uuid)){var s=this.$q.get(o.uuid);s.udpScore==o.udpScore&&s.cG==o.cG?n.resolve():(this.$q.set(o.uuid,o),this.uG(),this.lG(o).then(function(){n.resolve()}).fail(function(t){i.$q.delete(o.uuid),i.uG(),n.reject(t)}))}else e?(o.pG=e,this.logger.info(this.loggerId+" NEW MEMBER GUID "+o.uuid+" RANKING "+o.udpScore+" LEADER "+o.cG),this.$q.set(o.uuid,o),this.uG(),this.lG(o).then(function(){i.dG(i.$q.get(o.uuid)),n.resolve()}).fail(function(t){i.$q.delete(o.uuid),i.uG(),n.reject(t)})):this.fG(o).then(function(t){o.pG=t,i.logger.info(i.loggerId+" NEW MEMBER GUID "+o.uuid+" RANKING "+o.udpScore+" LEADER "+o.cG),i.$q.set(o.uuid,o),i.uG(),i.lG(o).then(function(){n.resolve()}).fail(function(t){i.$q.delete(o.uuid),i.uG(),n.reject(t)})}).fail(function(t){n.reject(t)})}else n.reject("LEADER ELECTION NOT STARTED YET")}catch(t){n.reject("TRIGGER LEADER ELECTION ERROR "+t)}return n.Ss},t.prototype.dG=function(t){var e=new a.bc(a.Tc.W,null);e.guid=t.uuid,e.isLeader=t.cG,e.rankValue=t.udpScore;var i=[e];this.oG.gG(i,!1)},t.prototype.fG=function(t){var e=this,i=u.defer();return this.rG.has(t.uuid)||this.tG.has(t.uuid)?i.reject(n.EG):(this.rG.set(t.uuid,Date.now()),this.Ng.connect(t.uuid).then(function(n){var r=n.Pg.wg(e.sG.swarmId);null==r?(r=n.Pg.Tg(e.sG.swarmId),e.vG(r).then(function(){i.resolve(n)}).fail(function(t){i.reject(t)}).done()):e.iG.get(t.uuid)?i.resolve(n):(e.rG.delete(t.uuid),e.vG(r).then(function(){i.resolve(n)}).fail(function(t){i.reject(t)}).done())}).fail(function(n){e.rG.delete(t.uuid),i.reject(n)}).done()),i.Ss},t.prototype.vG=function(t){var e=this,i=u.defer(),n=new o.Rf.Fa.Jg.UDPHandshakeMessage;n.uuid=this.yG.uuid,n.udpScore=this.yG.udpScore,n.isLeader=this.yG.cG,n.streamId=this.yG.streamId,this.logger.debug(this.loggerId+"MSG uuid "+n.uuid+" rankValue "+n.udpScore+" isLeader "+n.isLeader+" stream id "+n.streamId);var a=r.Framework.setTimeout(function(){e.TG(t.otherGuid)},s.hh.UDPBroadcast.Ga);return this.tG.set(t.otherGuid,{mG:a,defer:i}),t.Lg(o.Rf.Eg.dg,n),i.Ss},t.prototype.TG=function(t){if(this.tG.has(t)){this.logger.debug(this.loggerId+" HANDSHAKE REQ EXPIRED TO "+t);var e=this.tG.get(t);this.tG.delete(t),e.defer.reject("EXPIRED")}},t.prototype.IG=function(t,e){try{this.logger.debug(this.loggerId+"HANDSHAKE RESP RECEIVED FROM "+e.otherGuid);var i=e.otherGuid,n=this.tG.get(i);r.Framework.clearTimeout(n.mG),this.tG.delete(i),n.defer.resolve(e)}catch(t){f.ErrorMonitor.ve().logError("HANDSHAKE RESPONSE RECEIVED FAILED",this.loggerId,t)}},t.prototype.SG=function(t,e){var i=this;try{var n=new a.bc(a.Tc.W,null,t.isLeader);if(n.guid=t.uuid,n.rankValue=t.udpScore,t.streamId===this.yD.getContextId()){var r=e.Pg.wg(this.sG.swarmId);this.iG.set(t.uuid,t.uuid),this.RG(r,"OK"),this.aG(n,e).then(function(){}).fail(function(t){f.ErrorMonitor.ve().logError("LEADER ELECTION FAILED",i.loggerId,t)})}}catch(t){f.ErrorMonitor.ve().logError("HANDSHAKE REQUEST FAILED",this.loggerId,t)}},t.prototype.RG=function(t,e){var i=new o.Rf.Fa.Jg.UDPHandshakeResponse;i.accept=e,t.Lg(o.Rf.Eg.UDPHandshakeResponse,i),this.logger.debug(this.loggerId+"SEND HANDSHAKE RESPONSE TO "+t.otherGuid)},t.prototype.lG=function(t){var e=this,i=u.defer();if(this.wG()){var n=!1;this.logger.info(this.loggerId+"I HAVE THE HIGHEST SCORE"),t.cG&&!this.eG.has(t.uuid)&&(n=!0,this.logger.info(this.loggerId+"SEND SWITCH REQUEST TO "+t.uuid),this.bG(t).then(function(){i.resolve()}).fail(function(t){3==t.CG?(e.logger.debug(e.loggerId+" SWITCH REQUEST WAS CANCELED."),i.resolve()):(t.CG=2)&&i.reject(t)})),this.yG.cG||null==this._G||this._G.uuid==t.uuid||this.eG.has(this._G.uuid)||(this.logger.info("SEND SWITCH REQUEST TO THE ALREADY KNOWN LEADER"),n=!0,this.bG(this._G).then(function(){i.resolve()}).fail(function(t){3==t.CG?(e.logger.debug(e.loggerId+" SWITCH REQUEST WAS CANCELED."),i.resolve()):(t.CG=2)&&i.reject(t)})),null!=this._G||t.cG||this.yG.cG||0!=this.eG.length||(this.logger.info(this.loggerId+"BECOME LEADER"),this.PG()),n||i.resolve()}else this.AG(t)?(this.logger.info(this.loggerId+"PEER "+t.uuid+" HAS THE HIGHEST SCORE"),this.OG(),this.yG.cG&&t.cG&&this.stepDown(),this.NG(t),i.resolve()):i.resolve();return i.Ss},t.prototype.NG=function(t){try{this.logger.info(this.loggerId+"UPDATE THE LEADERSHIP"),null!=this._G&&this.$q.has(this._G.uuid)&&(this.$q.get(this._G.uuid).cG=!1),this.$q.has(t.uuid)?(this.$q.get(t.uuid).udpScore=t.udpScore,this._G=t,this.$q.get(t.uuid).cG=!0):(this.logger.warn(this.loggerId+"SET A LEADER THAT IS NOT A LAN MEMBER LIST. SHOULD NEVER HAPPEN"),this.$q.set(t.uuid,t),this._G=t),this.yD.DG(t),this.logger.info(this.loggerId+"NEW KNOWN LEADER "+this.yD.Rk().uuid)}catch(t){f.ErrorMonitor.ve().logError(t,this.loggerId)}},t.prototype.stepDown=function(){this.logger.info(this.loggerId+"STEP DOWN"),this.yG.cG=!1,this.yD.kG(!1),s.hh.fa.ia&&(this.mD.LG(),this.mD.MG(!1))},t.prototype.OG=function(){for(var t=0,e=this.eG.keys();t<e.length;t++){var i=e[t],n=this.eG.get(i);this.eG.delete(i),r.Framework.clearTimeout(n.mG),n.defer.reject({CG:3,message:"CANCELED PENDING RESPONSES"})}},t.prototype.AG=function(t){return t.uuid==this.nG[0].uuid},t.prototype.wG=function(){return l.hG.JE(this.yG,this.nG[0])<0},t.prototype.uG=function(){var t=new c(this.$q.values()),e=t.Fc(l.hG.JE);t.push(this.yG),this.yD.FG(e);var i=new c(this.$q.values());this.nG=i.Fc(l.hG.JE)},t.prototype.UG=function(t){this.BG(t)},t.prototype.BG=function(t){this.logger.info(this.loggerId+"EVALUATE THE SWITCH REQUEST FROM "+t.uuid);var e=void 0;this.$q.has(t.uuid)?e=this.$q.get(t.uuid):this.logger.warn("I RECEIVED A SWITCH REQUEST FROM AN UNKNOWN MEMBER. THIS SHOULD NEVER HAPPEN"),e&&(this.yG.cG?this.wG()?this.HG(e,!1):(this.stepDown(),this.OG(),this.NG(e),this.HG(e,!0)):this.AG(e)?(this.NG(e),this.HG(e,!0)):this.HG(e,!1))},t.prototype.HG=function(t,e){var i=this;this.xG(t.pG,e).then(function(){}).fail(function(t){f.ErrorMonitor.ve().logError("SEND SWITCH RESPONSE ERROR",i.loggerId,t)}).done()},t.prototype.xG=function(t,e){var i=u.defer(),n=new o.Rf.Fa.Jg.UDPSwitchLeadershipAck;return n.ok=e,t.Pg.wg(this.sG.swarmId).Lg(o.Rf.Eg.fg,n),i.Ss},t.prototype.bG=function(t){var e=this,i=u.defer();return this.qG(t.pG).then(function(n){e.GG(n,t),i.resolve()}).fail(function(t){i.reject(t)}).done(),i.Ss},t.prototype.GG=function(t,e){try{t?(this.$q.get(e.uuid).cG=!1,this._G=this.yG,this.PG()):(this.OG(),this.$q.get(e.uuid).cG=!0,this.stepDown(),this.NG(e))}catch(t){f.ErrorMonitor.ve().logError("HANDLE LEADERSHIP SWITCH RESPONSE ERROR",this.loggerId,t)}},t.prototype.VG=function(t,e){if(this.eG.has(e)){var i=this.eG.get(e);r.Framework.clearTimeout(i.mG),this.eG.delete(e),i.defer.resolve(t.ok)}else this.logger.warn(this.loggerId+" SWITCH LEADERSHIP RESPONSE RECEIVED FROM UNKNOWN PEER "+e)},t.prototype.qG=function(t){var e=this,i=u.defer(),n=new o.Rf.Fa.Jg.UDPSwitchLeadershipRequest;n.uuid=this.yG.uuid,n.udpScore=this.yG.udpScore,this.logger.debug(this.loggerId+"SWITCH LEADERSHIP REQUEST TO "+t.otherGuid);var a=r.Framework.setTimeout(function(){e.jG(t.otherGuid)},s.hh.UDPBroadcast.qa);this.eG.set(t.otherGuid,{mG:a,defer:i});var h=t.Pg.wg(this.sG.swarmId);return r.Framework.setTimeout(function(){h.Lg(o.Rf.Eg.UDPSwitchLeadershipRequest,n)},1),i.Ss},t.prototype.jG=function(t){if(this.eG.has(t)){this.logger.info(this.loggerId+" SWITCH LEADERSHIP EXPIRED TO "+t);var e=this.eG.get(t);this.eG.delete(t),e.defer.reject({CG:2,message:"EXPIRED"})}},t.prototype.PG=function(){this.logger.info(this.loggerId+"BECOMING LAN LEADER"),null!=this._G&&this.$q.has(this._G.uuid)&&(this.$q.get(this._G.uuid).cG=!1),this.yG.cG=!0,this._G=this.yG,this.yD.kG(!0),this.yD.DG(this.yG),s.hh.fa.ia&&(this.mD.LG(),this.mD.MG(!0))},t.prototype.Ud=function(t){this.yG=new l.hG(this.yD.getId(),this.yD.QG(),"",!1,this.yD.getContextId()),this.Zq=!0,this.logger.info(this.loggerId+" UDP LEADER ELECTION STARTED")},t.prototype.KG=function(t){this.$q.delete(t),this.uG(),0==this.$q.length?(this.yG.cG=!1,this._G=null,this.yD.kG(!1),this.yD.YG(!1),this.mD.LG(),this.mD.MG(!1)):this.wG()?this.PG():this.nG.length>0&&this.NG(this.nG[0])},t}();e.WG=p,function(t){t[t.zG=0]="FAILURE",t[t.EG=1]="ALREADY_PENDING"}(n=e.JG||(e.JG={}))},function(t,e,i){var n,r,o;
/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 */r=[],n=function(){"use strict";function t(t,e,i){this.low=0|t,this.high=0|e,this.FP=!!i}t.XG,Object.defineProperty(t.prototype,"__isLong__",{value:!0,p:!1,l:!1}),t.ZG=function(t){return!0===(t&&t.XG)};var e={},i={};t.ME=function(n,r){var o,s;return r?0<=(n>>>=0)&&n<256&&(s=i[n])?s:(o=new t(n,(0|n)<0?-1:0,!0),0<=n&&n<256&&(i[n]=o),o):-128<=(n|=0)&&n<128&&(s=e[n])?s:(o=new t(n,n<0?-1:0,!1),-128<=n&&n<128&&(e[n]=o),o)},t.DE=function(e,i){return i=!!i,isNaN(e)||!isFinite(e)?t.ZERO:!i&&e<=-o?t.MIN_VALUE:!i&&e+1>=o?t.MAX_VALUE:i&&e>=r?t.$G:e<0?t.DE(-e,i).qE():new t(e%n|0,e/n|0,i)},t.qI=function(e,i,n){return new t(e,i,n)},t.kE=function(e,i,n){if(0===e.length)throw Error("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof i&&(n=i,i=!1),(n=n||10)<2||36<n)throw Error("radix out of range: "+n);var r;if((r=e.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+e);if(0===r)return t.kE(e.substring(1),i,n).qE();for(var o=t.DE(Math.pow(n,8)),s=t.ZERO,a=0;a<e.length;a+=8){var u=Math.min(8,e.length-a),h=parseInt(e.substring(a,a+u),n);if(u<8){var c=t.DE(Math.pow(n,u));s=s.multiply(c).add(t.DE(h))}else s=(s=s.multiply(o)).add(t.DE(h))}return s.FP=i,s},t.eV=function(e){return e instanceof t?e:"number"==typeof e?t.DE(e):"string"==typeof e?t.kE(e):new t(e.low,e.high,e.FP)};var n=4294967296,r=n*n,o=r/2,s=t.ME(1<<24);return t.ZERO=t.ME(0),t.tV=t.ME(0,!0),t.ONE=t.ME(1),t.rV=t.ME(1,!0),t.iV=t.ME(-1),t.MAX_VALUE=t.qI(-1,2147483647,!1),t.$G=t.qI(-1,-1,!0),t.MIN_VALUE=t.qI(0,-2147483648,!1),t.prototype.kP=function(){return this.FP?this.low>>>0:this.low},t.prototype.nV=function(){return this.FP?(this.high>>>0)*n+(this.low>>>0):this.high*n+(this.low>>>0)},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix out of range: "+e);if(this.sV())return"0";var i;if(this.oV()){if(this.cs(t.MIN_VALUE)){var n=t.DE(e),r=this.aV(n);return i=r.multiply(n).hV(this),r.toString(e)+i.kP().toString(e)}return"-"+this.qE().toString(e)}var o=t.DE(Math.pow(e,6),this.FP);i=this;for(var s="";;){var a=i.aV(o),u=i.hV(a.multiply(o)).kP()>>>0,h=u.toString(e);if((i=a).sV())return h+s;for(;h.length<6;)h="0"+h;s=""+h+s}},t.prototype.cV=function(){return this.high},t.prototype.uV=function(){return this.high>>>0},t.prototype.lV=function(){return this.low},t.prototype.pV=function(){return this.low>>>0},t.prototype.dV=function(){if(this.oV())return this.cs(t.MIN_VALUE)?64:this.qE().dV();for(var e=0!=this.high?this.high:this.low,i=31;i>0&&0==(e&1<<i);i--);return 0!=this.high?i+33:i+1},t.prototype.sV=function(){return 0===this.high&&0===this.low},t.prototype.oV=function(){return!this.FP&&this.high<0},t.prototype.fV=function(){return this.FP||this.high>=0},t.prototype.gV=function(){return 1==(1&this.low)},t.prototype.fv=function(){return 0==(1&this.low)},t.prototype.cs=function(e){return t.ZG(e)||(e=t.eV(e)),(this.FP===e.FP||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t.EV=t.prototype.cs,t.prototype.vV=function(t){return!this.cs(t)},t.yV=t.prototype.vV,t.prototype.TV=function(t){return this.Oc(t)<0},t.prototype.mV=t.prototype.TV,t.prototype.SV=function(t){return this.Oc(t)<=0},t.prototype.RV=t.prototype.SV,t.prototype.wV=function(t){return this.Oc(t)>0},t.prototype.bV=t.prototype.wV,t.prototype.CV=function(t){return this.Oc(t)>=0},t.prototype._V=t.prototype.CV,t.prototype.Oc=function(e){if(t.ZG(e)||(e=t.eV(e)),this.cs(e))return 0;var i=this.oV(),n=e.oV();return i&&!n?-1:!i&&n?1:this.FP?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.hV(e).oV()?-1:1},t.prototype.qE=function(){return!this.FP&&this.cs(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.PV=t.prototype.qE,t.prototype.add=function(e){t.ZG(e)||(e=t.eV(e));var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,h=65535&e.low,c=0,l=0,f=0,p=0;return f+=(p+=o+h)>>>16,p&=65535,l+=(f+=r+u)>>>16,f&=65535,c+=(l+=n+a)>>>16,l&=65535,c+=i+s,c&=65535,t.qI(f<<16|p,c<<16|l,this.FP)},t.prototype.hV=function(e){return t.ZG(e)||(e=t.eV(e)),this.add(e.qE())},t.prototype.sub=t.prototype.hV,t.prototype.multiply=function(e){if(this.sV())return t.ZERO;if(t.ZG(e)||(e=t.eV(e)),e.sV())return t.ZERO;if(this.cs(t.MIN_VALUE))return e.gV()?t.MIN_VALUE:t.ZERO;if(e.cs(t.MIN_VALUE))return this.gV()?t.MIN_VALUE:t.ZERO;if(this.oV())return e.oV()?this.qE().multiply(e.qE()):this.qE().multiply(e).qE();if(e.oV())return this.multiply(e.qE()).qE();if(this.TV(s)&&e.TV(s))return t.DE(this.nV()*e.nV(),this.FP);var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,a=e.high>>>16,u=65535&e.high,h=e.low>>>16,c=65535&e.low,l=0,f=0,p=0,d=0;return p+=(d+=o*c)>>>16,d&=65535,f+=(p+=r*c)>>>16,p&=65535,f+=(p+=o*h)>>>16,p&=65535,l+=(f+=n*c)>>>16,f&=65535,l+=(f+=r*h)>>>16,f&=65535,l+=(f+=o*u)>>>16,f&=65535,l+=i*c+n*h+r*u+o*a,l&=65535,t.qI(p<<16|d,l<<16|f,this.FP)},t.prototype.AV=t.prototype.multiply,t.prototype.aV=function(e){if(t.ZG(e)||(e=t.eV(e)),e.sV())throw new Error("division by zero");if(this.sV())return this.FP?t.tV:t.ZERO;var i,n,r;if(this.cs(t.MIN_VALUE))return e.cs(t.ONE)||e.cs(t.iV)?t.MIN_VALUE:e.cs(t.MIN_VALUE)?t.ONE:(i=this.HP(1).aV(e).shiftLeft(1)).cs(t.ZERO)?e.oV()?t.ONE:t.iV:(n=this.hV(e.multiply(i)),r=i.add(n.aV(e)));if(e.cs(t.MIN_VALUE))return this.FP?t.tV:t.ZERO;if(this.oV())return e.oV()?this.qE().aV(e.qE()):this.qE().aV(e).qE();if(e.oV())return this.aV(e.qE()).qE();for(r=t.ZERO,n=this;n.CV(e);){i=Math.max(1,Math.floor(n.nV()/e.nV()));for(var o=Math.ceil(Math.log(i)/Math.LN2),s=o<=48?1:Math.pow(2,o-48),a=t.DE(i),u=a.multiply(e);u.oV()||u.wV(n);)i-=s,a=t.DE(i,this.FP),u=a.multiply(e);a.sV()&&(a=t.ONE),r=r.add(a),n=n.hV(u)}return r},t.prototype.OV=t.prototype.aV,t.prototype.NV=function(e){return t.ZG(e)||(e=t.eV(e)),this.hV(this.aV(e).multiply(e))},t.prototype.ev=t.prototype.NV,t.prototype.not=function(){return t.qI(~this.low,~this.high,this.FP)},t.prototype.qP=function(e){return t.ZG(e)||(e=t.eV(e)),t.qI(this.low&e.low,this.high&e.high,this.FP)},t.prototype.or=function(e){return t.ZG(e)||(e=t.eV(e)),t.qI(this.low|e.low,this.high|e.high,this.FP)},t.prototype.pT=function(e){return t.ZG(e)||(e=t.eV(e)),t.qI(this.low^e.low,this.high^e.high,this.FP)},t.prototype.shiftLeft=function(e){return t.ZG(e)&&(e=e.kP()),0==(e&=63)?this:e<32?t.qI(this.low<<e,this.high<<e|this.low>>>32-e,this.FP):t.qI(0,this.low<<e-32,this.FP)},t.prototype.DV=t.prototype.shiftLeft,t.prototype.HP=function(e){return t.ZG(e)&&(e=e.kP()),0==(e&=63)?this:e<32?t.qI(this.low>>>e|this.high<<32-e,this.high>>e,this.FP):t.qI(this.high>>e-32,this.high>=0?0:-1,this.FP)},t.prototype.kV=t.prototype.HP,t.prototype.LP=function(e){if(t.ZG(e)&&(e=e.kP()),0==(e&=63))return this;var i=this.high;if(e<32){var n=this.low;return t.qI(n>>>e|i<<32-e,i>>>e,this.FP)}return 32===e?t.qI(i,0,this.FP):t.qI(i>>>e-32,0,this.FP)},t.prototype.LV=t.prototype.LP,t.prototype.UP=function(){return this.FP?new t(this.low,this.high,!1):this},t.prototype.BP=function(){return this.FP?this:new t(this.low,this.high,!0)},t},void 0!==(o="function"==typeof n?n.apply(e,r):n)&&(t.i=o)},function(t,e,i){var n,r,o;
/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 */r=[],n=function(){"use strict";function t(t,e,i){this.low=0|t,this.high=0|e,this.FP=!!i}t.XG,Object.defineProperty(t.prototype,"__isLong__",{value:!0,p:!1,l:!1}),t.ZG=function(t){return!0===(t&&t.XG)};var e={},i={};t.ME=function(n,r){var o,s;return r?0<=(n>>>=0)&&n<256&&(s=i[n])?s:(o=new t(n,(0|n)<0?-1:0,!0),0<=n&&n<256&&(i[n]=o),o):-128<=(n|=0)&&n<128&&(s=e[n])?s:(o=new t(n,n<0?-1:0,!1),-128<=n&&n<128&&(e[n]=o),o)},t.DE=function(e,i){return i=!!i,isNaN(e)||!isFinite(e)?t.ZERO:!i&&e<=-o?t.MIN_VALUE:!i&&e+1>=o?t.MAX_VALUE:i&&e>=r?t.$G:e<0?t.DE(-e,i).qE():new t(e%n|0,e/n|0,i)},t.qI=function(e,i,n){return new t(e,i,n)},t.kE=function(e,i,n){if(0===e.length)throw Error("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof i&&(n=i,i=!1),(n=n||10)<2||36<n)throw Error("radix out of range: "+n);var r;if((r=e.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+e);if(0===r)return t.kE(e.substring(1),i,n).qE();for(var o=t.DE(Math.pow(n,8)),s=t.ZERO,a=0;a<e.length;a+=8){var u=Math.min(8,e.length-a),h=parseInt(e.substring(a,a+u),n);if(u<8){var c=t.DE(Math.pow(n,u));s=s.multiply(c).add(t.DE(h))}else s=(s=s.multiply(o)).add(t.DE(h))}return s.FP=i,s},t.eV=function(e){return e instanceof t?e:"number"==typeof e?t.DE(e):"string"==typeof e?t.kE(e):new t(e.low,e.high,e.FP)};var n=4294967296,r=n*n,o=r/2,s=t.ME(1<<24);return t.ZERO=t.ME(0),t.tV=t.ME(0,!0),t.ONE=t.ME(1),t.rV=t.ME(1,!0),t.iV=t.ME(-1),t.MAX_VALUE=t.qI(-1,2147483647,!1),t.$G=t.qI(-1,-1,!0),t.MIN_VALUE=t.qI(0,-2147483648,!1),t.prototype.kP=function(){return this.FP?this.low>>>0:this.low},t.prototype.nV=function(){return this.FP?(this.high>>>0)*n+(this.low>>>0):this.high*n+(this.low>>>0)},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix out of range: "+e);if(this.sV())return"0";var i;if(this.oV()){if(this.cs(t.MIN_VALUE)){var n=t.DE(e),r=this.aV(n);return i=r.multiply(n).hV(this),r.toString(e)+i.kP().toString(e)}return"-"+this.qE().toString(e)}var o=t.DE(Math.pow(e,6),this.FP);i=this;for(var s="";;){var a=i.aV(o),u=i.hV(a.multiply(o)).kP()>>>0,h=u.toString(e);if((i=a).sV())return h+s;for(;h.length<6;)h="0"+h;s=""+h+s}},t.prototype.cV=function(){return this.high},t.prototype.uV=function(){return this.high>>>0},t.prototype.lV=function(){return this.low},t.prototype.pV=function(){return this.low>>>0},t.prototype.dV=function(){if(this.oV())return this.cs(t.MIN_VALUE)?64:this.qE().dV();for(var e=0!=this.high?this.high:this.low,i=31;i>0&&0==(e&1<<i);i--);return 0!=this.high?i+33:i+1},t.prototype.sV=function(){return 0===this.high&&0===this.low},t.prototype.oV=function(){return!this.FP&&this.high<0},t.prototype.fV=function(){return this.FP||this.high>=0},t.prototype.gV=function(){return 1==(1&this.low)},t.prototype.fv=function(){return 0==(1&this.low)},t.prototype.cs=function(e){return t.ZG(e)||(e=t.eV(e)),(this.FP===e.FP||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t.EV=t.prototype.cs,t.prototype.vV=function(t){return!this.cs(t)},t.yV=t.prototype.vV,t.prototype.TV=function(t){return this.Oc(t)<0},t.prototype.mV=t.prototype.TV,t.prototype.SV=function(t){return this.Oc(t)<=0},t.prototype.RV=t.prototype.SV,t.prototype.wV=function(t){return this.Oc(t)>0},t.prototype.bV=t.prototype.wV,t.prototype.CV=function(t){return this.Oc(t)>=0},t.prototype._V=t.prototype.CV,t.prototype.Oc=function(e){if(t.ZG(e)||(e=t.eV(e)),this.cs(e))return 0;var i=this.oV(),n=e.oV();return i&&!n?-1:!i&&n?1:this.FP?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.hV(e).oV()?-1:1},t.prototype.qE=function(){return!this.FP&&this.cs(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.PV=t.prototype.qE,t.prototype.add=function(e){t.ZG(e)||(e=t.eV(e));var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,h=65535&e.low,c=0,l=0,f=0,p=0;return f+=(p+=o+h)>>>16,p&=65535,l+=(f+=r+u)>>>16,f&=65535,c+=(l+=n+a)>>>16,l&=65535,c+=i+s,c&=65535,t.qI(f<<16|p,c<<16|l,this.FP)},t.prototype.hV=function(e){return t.ZG(e)||(e=t.eV(e)),this.add(e.qE())},t.prototype.sub=t.prototype.hV,t.prototype.multiply=function(e){if(this.sV())return t.ZERO;if(t.ZG(e)||(e=t.eV(e)),e.sV())return t.ZERO;if(this.cs(t.MIN_VALUE))return e.gV()?t.MIN_VALUE:t.ZERO;if(e.cs(t.MIN_VALUE))return this.gV()?t.MIN_VALUE:t.ZERO;if(this.oV())return e.oV()?this.qE().multiply(e.qE()):this.qE().multiply(e).qE();if(e.oV())return this.multiply(e.qE()).qE();if(this.TV(s)&&e.TV(s))return t.DE(this.nV()*e.nV(),this.FP);var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,a=e.high>>>16,u=65535&e.high,h=e.low>>>16,c=65535&e.low,l=0,f=0,p=0,d=0;return p+=(d+=o*c)>>>16,d&=65535,f+=(p+=r*c)>>>16,p&=65535,f+=(p+=o*h)>>>16,p&=65535,l+=(f+=n*c)>>>16,f&=65535,l+=(f+=r*h)>>>16,f&=65535,l+=(f+=o*u)>>>16,f&=65535,l+=i*c+n*h+r*u+o*a,l&=65535,t.qI(p<<16|d,l<<16|f,this.FP)},t.prototype.AV=t.prototype.multiply,t.prototype.aV=function(e){if(t.ZG(e)||(e=t.eV(e)),e.sV())throw new Error("division by zero");if(this.sV())return this.FP?t.tV:t.ZERO;var i,n,r;if(this.cs(t.MIN_VALUE))return e.cs(t.ONE)||e.cs(t.iV)?t.MIN_VALUE:e.cs(t.MIN_VALUE)?t.ONE:(i=this.HP(1).aV(e).shiftLeft(1)).cs(t.ZERO)?e.oV()?t.ONE:t.iV:(n=this.hV(e.multiply(i)),r=i.add(n.aV(e)));if(e.cs(t.MIN_VALUE))return this.FP?t.tV:t.ZERO;if(this.oV())return e.oV()?this.qE().aV(e.qE()):this.qE().aV(e).qE();if(e.oV())return this.aV(e.qE()).qE();for(r=t.ZERO,n=this;n.CV(e);){i=Math.max(1,Math.floor(n.nV()/e.nV()));for(var o=Math.ceil(Math.log(i)/Math.LN2),s=o<=48?1:Math.pow(2,o-48),a=t.DE(i),u=a.multiply(e);u.oV()||u.wV(n);)i-=s,a=t.DE(i,this.FP),u=a.multiply(e);a.sV()&&(a=t.ONE),r=r.add(a),n=n.hV(u)}return r},t.prototype.OV=t.prototype.aV,t.prototype.NV=function(e){return t.ZG(e)||(e=t.eV(e)),this.hV(this.aV(e).multiply(e))},t.prototype.ev=t.prototype.NV,t.prototype.not=function(){return t.qI(~this.low,~this.high,this.FP)},t.prototype.qP=function(e){return t.ZG(e)||(e=t.eV(e)),t.qI(this.low&e.low,this.high&e.high,this.FP)},t.prototype.or=function(e){return t.ZG(e)||(e=t.eV(e)),t.qI(this.low|e.low,this.high|e.high,this.FP)},t.prototype.pT=function(e){return t.ZG(e)||(e=t.eV(e)),t.qI(this.low^e.low,this.high^e.high,this.FP)},t.prototype.shiftLeft=function(e){return t.ZG(e)&&(e=e.kP()),0==(e&=63)?this:e<32?t.qI(this.low<<e,this.high<<e|this.low>>>32-e,this.FP):t.qI(0,this.low<<e-32,this.FP)},t.prototype.DV=t.prototype.shiftLeft,t.prototype.HP=function(e){return t.ZG(e)&&(e=e.kP()),0==(e&=63)?this:e<32?t.qI(this.low>>>e|this.high<<32-e,this.high>>e,this.FP):t.qI(this.high>>e-32,this.high>=0?0:-1,this.FP)},t.prototype.kV=t.prototype.HP,t.prototype.LP=function(e){if(t.ZG(e)&&(e=e.kP()),0==(e&=63))return this;var i=this.high;if(e<32){var n=this.low;return t.qI(n>>>e|i<<32-e,i>>>e,this.FP)}return 32===e?t.qI(i,0,this.FP):t.qI(i>>>e-32,0,this.FP)},t.prototype.LV=t.prototype.LP,t.prototype.UP=function(){return this.FP?new t(this.low,this.high,!1):this},t.prototype.BP=function(){return this.FP?this:new t(this.low,this.high,!0)},t},void 0!==(o="function"==typeof n?n.apply(e,r):n)&&(t.i=o)},function(t,e,i){"use strict";var n,r,o=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},s=i(4),a=i(3),u=i(0),h=i(166),c=i(5),l=i(25),f=i(10),p=i(167),d=i(15),g=hive.services.protocol.IF.TrackerPeerInfo,v=i(6),y=i(1),m=i(2),E=v.he.Th;!function(t){t[t.MV=1]="ACCEPT",t[t.FV=2]="REJECT"}(n=e.UV||(e.UV={})),function(t){t[t.Jq=0]="ALL",t[t.BV=1]="IN",t[t.HV=2]="OUT"}(r=e.xV||(e.xV={}));var b=function(t){function e(){var e=t.call(this)||this;return e.loggerId="[Partnership] ",e.qV=new a,e.rG=new a,e.GV=-1,e.VV=-1,e.jV=-1,e.connected=!1,e.Ng=u.Framework.resolve(u.Framework.V.F),e.QV=u.Framework.resolve(d.qu.fu),e.KV=u.Framework.resolve(d.qu.gu),e.YV=u.Framework.resolve(d.qu.Eu),e.WV=u.Framework.resolve(d.qu.vu),e}return o(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.sG=e,this.ticket=e.rl.ticket,this.oG=e.oG,this.mD=e.mD,this.zV=e.zV},e.prototype.start=function(t){try{this.logger.info(this.loggerId+"PARTNERSHIP STARTED "+t.getContextId()),this.context=t,this.contextId=t.getContextId(),this.JV(c.hh.No.Po),this.XV(c.hh.fa.aa),this.ZV(c.hh.Ho.ko),this.active=!0}catch(t){y.ErrorMonitor.ve().logError("Error in partnership initialization",this.loggerId,m.hs.cr.Bt,t)}},e.prototype.stop=function(){return u.Framework.clearInterval(this.GV),u.Framework.clearInterval(this.VV),u.Framework.clearInterval(this.jV),this.context=null,this.contextId=null,this.active=!1,this.$V()},e.prototype.Ud=function(t){this.logger.info("PARTNERSHIP SERVER CONNECTED"),this.gd=t,this.connected=!0,null==this.yD.getId()&&this.yD.setId(this.gd)},e.prototype.ej=function(){this.connected=!1},e.prototype.tj=function(t){try{this.rj(t)||this.qV.has(t.peerInfo.guid)||this.rG.has(t.peerInfo.guid)||t.peerInfo.guid==this.gd?this.ij(t):this.nj(t),this.sj(t)&&this.oj(t)}catch(e){y.ErrorMonitor.ve().logError("Error in discoering new lan peer",this.loggerId,m.hs.cr.Ht,{detailedError:e,otherGuid:t.peerInfo.guid})}},e.prototype.ij=function(t){if(this.aj.has(t.peerInfo.guid)){var e=this.aj.get(t.peerInfo.guid);this.aj.delete(t.peerInfo.guid),this.gB.set(t.peerInfo.guid,e),this.yD.YG(!0)}},e.prototype.oj=function(t){if(this.dB.has(t.peerInfo.guid)){var e=this.dB.get(t.peerInfo.guid);this.dB.delete(t.peerInfo.guid),this.fB.set(t.peerInfo.guid,e)}},e.prototype.JV=function(t){var e=this;-1!=this.GV&&u.Framework.clearInterval(this.GV),this.GV=u.Framework.setInterval(function(){e.hj(!1)},t)},e.prototype.hj=function(t){var e=this;t&&this.GV&&(u.Framework.clearInterval(this.GV),this.JV(c.hh.No.Po));try{if(this.connected){this.logger.debug(this.loggerId+"ADDING NEW PEERS IF POSSIBLE, NOW "+this.aj.length+"/"+c.hh.No._o+","+this.gB.length+"/infinity OUT RND "+this.dB.length+" OUT LAN "+this.fB.length);var i=[].concat(this.qV.keys()).concat(this.rG.keys()),n=this.oG.cj(!0),r=void 0;r=this.yD.ck()||this.yD.Tk()?this.YV.uj(this.yD,c.hh.No._o,this.aj.values(),i,n):this.QV.uj(c.hh.No._o,this.aj.values(),i,n),this.lj=r.pj(),r.dj().forEach(function(t){e.nj(t)})}else this.logger.warn(this.loggerId+"NOT RUNNING IN PARTNER CHOICE, SRV DISCONNECTED")}catch(t){y.ErrorMonitor.ve().logError("Error in choosing in partners",this.loggerId,m.hs.cr.xt,t)}},e.prototype.nj=function(t){var e=this,i=t.peerInfo.guid,n=t.peerInfo.privateIpString,o=t.peerInfo.publicIpString;this.logger.debug(this.loggerId+"IN PARTNER ADD PROCESS "+i),this.rj(t)||this.qV.has(i)||this.rG.has(i)||this.zV.fj(i,n,o)||(this.rG.set(i,Date.now()),this.Ng.connect(i).then(function(n){var o=n.Pg.wg(e.sG.swarmId);null==o&&(o=n.Pg.Tg(e.sG.swarmId)),o&&(e.rG.get(i),e.rG.delete(i),e.active&&e.gj(o).then(function(n){if(e.Ej(o,t,n.msg),e.yj.vj(!1,!1),e.zV.Tj(i,t.peerInfo.privateIpString,t.peerInfo.publicIpString),e.mj(o),e.lj.length>0&&!t.Ij()){var s=e.lj[0];e.Sj(s.guid),s.wj.Rj(r.HV),e.lj.splice(0,1)}}).fail(function(t){y.ErrorMonitor.ve().logError("Error in requesting partnership",e.loggerId,m.hs.cr.Vt,{otherGuid:i}),e.yj.vj(!1,!0),e.bj(i)}))}).fail(function(t){y.ErrorMonitor.ve().logError("Error in creating new p2p connection",e.loggerId,m.hs.cr.Gt,{otherGuid:i}),e.yj.vj(!0,!0),e.rG.delete(i),e.oG.KG(i)}).done())},e.prototype.Cj=function(t,e){var i=this;try{var o=t.guid,s=null,a=null;if(t.privateIpString&&(a=t.privateIpString),t.publicIpString&&(s=t.publicIpString),this._j(o))this.logger.info(this.loggerId+"ALREADY OUT PARTNER "+o);else{var l=t.contextId,f=e.Pg.wg(this.sG.swarmId);if(this.contextId!==l||c.hh.Ho.Do!==t.p2pProtocolVersion||this.zV.fj(o,a,s))this.logger.info(this.loggerId+"PARTNERSHIP CANNOT BE ESTABLISHED WITH "+o+" CONTEXT ID "+l+" protocol version "+t.p2pProtocolVersion),this.Pj(f,n.FV);else{var p=this.Aj(t),d=void 0,g=void 0;if(p){if(this.oG.gG([p],!1),!(d=(g=this.oG.Oj(o)).Ij()||this.dB.length<c.hh.No.Oo)){this.logger.debug(this.loggerId+" got out part req from "+o+" - reached max "+this.dB.length+"/"+c.hh.No.Oo);var v=void 0;(v=this.yD.ck()||this.yD.Tk()?this.WV.Nj(this.yD,p,this.dB.values()):this.KV.Nj(this.dB.values()))&&(this.logger.debug(this.loggerId+" chocking "+v.guid),this.dB.delete(v.guid),v.wj.Rj(r.BV),d=!0)}}else d=!1;if(d){var E=new h.Partner(o,this.yj,f,this.logger,!1,g);t.reportingGuid&&E.Dj(t.reportingGuid),this.oG.kj.has(o)?this.fB.set(o,E):this.dB.set(o,E),this.logger.info(this.loggerId+"ADDED OUT PART "+o),this.Pj(f,n.MV),this.zV.Tj(o,a,s),u.Framework.setTimeout(function(){i.Lj(o)},500),this.yj.Mj()}else this.logger.info(this.loggerId+" cannot establish partnership to "+o+" - reached max "+this.dB.length+"/"+c.hh.No.Oo),this.Pj(f,n.FV)}}}catch(e){y.ErrorMonitor.ve().logError("Error receiving out partnership request",this.loggerId,m.hs.cr.jt,{detailedError:e,otherGuid:t.guid})}},e.prototype.Aj=function(t){try{var e=new g;e.guid=t.guid,t.internalAs&&(e.internalAs=t.internalAs),t.externalAs&&(e.externalAs=t.externalAs),t.publicIpString&&(e.publicIpString=t.publicIpString),t.privateIpString&&(e.privateIpString=t.privateIpString);var i=!1,n=this.oG.Oj(t.guid);if(n&&(i=n.peerInfo.isLeader),t.streamCharacteristics){var r=[];t.streamCharacteristics.forEach(function(t){var e=new f.TrackerPeerStreamInfo;e.state=t.streamState,e.bitrate=t.bitrate,e.delta=t.delta,r.push(e)}),e.streams=r}return new f.bc(f.Tc.yc,e,i)}catch(e){return y.ErrorMonitor.ve().logError("Error constructing discovered peer info",this.loggerId,m.hs.cr.Qt,{detailedError:e,otherGuid:t.guid}),null}},e.prototype.Pj=function(t,e){var i=this;this.logger.debug(this.loggerId+"SEND PART RESPONSE TO "+t.otherGuid);try{var r=new l.Rf.Fa.Jg.OutPartnershipResponse;if(r.accept=e,r.accept===n.MV){this.yD.gk()&&(r.internalAs=this.yD.gk()),this.yD.Fj()&&(r.externalAs=this.yD.Fj()),this.yD.getPublicIp()&&(r.publicIpString=this.yD.getPublicIp()),this.yD.getPrivateIp()&&(r.privateIpString=this.yD.getPrivateIp()),r.reportingGuid=this.yD.getReportingGuid();var o=this.yD.Uj(),s=[];o.forEach(function(t,e){var n=new l.Rf.Fa.Jg.StreamCharacteristics;n.bitrate=e,n.streamState=t.type,n.delta=null!=i.yD.getDelta()?i.yD.getDelta():-1,s.push(n)}),s.length>0&&r.setStreamCharacteristics(s)}t.Lg(l.Rf.Eg.pg,r)}catch(e){y.ErrorMonitor.ve().logError("Error constructing partnership response message",this.loggerId,m.hs.cr.Kt,{detailedError:e,otherGuid:t.otherGuid})}},e.prototype.Bj=function(t){this.logger.warn(this.loggerId+t)},e.prototype.Ej=function(t,e,i){var n=t.otherGuid;if(i.externalAs&&(e.peerInfo.externalAs=i.externalAs),i.internalAs&&(e.peerInfo.internalAs=i.internalAs),i.publicIpString&&(e.peerInfo.publicIpString=i.publicIpString),i.privateIpString&&(e.peerInfo.privateIpString=i.privateIpString),i.streamCharacteristics){var r=[];i.streamCharacteristics.forEach(function(t){var e=new f.TrackerPeerStreamInfo;e.state=t.streamState,e.bitrate=t.bitrate,e.delta=t.delta,r.push(e)}),e.peerInfo.streams=r}try{var o=new h.Partner(n,this.yj,t,this.logger,!0,e);return i.reportingGuid&&(o.reportingGuid=i.reportingGuid,t.receiver.setReportingGuid(i.reportingGuid),t.sender.setReportingGuid(i.reportingGuid)),e.peerInfo.type==f.Tc.W?(this.gB.set(n,o),this.yD.Hj(!0),this.yD.YG(!0)):(0!=this.yD.gk()&&this.yD.gk()===e.peerInfo.internalAs&&this.yD.Hj(!0),this.aj.set(n,o)),this.logger.debug(this.loggerId+n+" IS NOW IN PARTNER"),o}catch(t){y.ErrorMonitor.ve().logError("Error adding a new partner object in the list",this.loggerId,m.hs.cr.Yt,{detailedError:t,otherGuid:n})}},e.prototype.KG=function(t){try{this.logger.info(this.loggerId+"GOT PEER DISC "+t),this.xj(t)&&(this.logger.info(this.loggerId+"IN PRT DISC "+t),this.Sj(t)),this._j(t)&&(this.logger.info(this.loggerId+"OUT PRT DISC "+t),this.dB.delete(t),this.fB.delete(t))}catch(e){y.ErrorMonitor.ve().logError("Error removing disconected partner from the list",this.loggerId,m.hs.cr.Wt,{detailedError:e,otherGuid:t})}},e.prototype.Sj=function(t){var e=this;try{this.logger.debug(this.loggerId+"IN PARTNER REMOVE "+t);var i=this.qj(t);if(this.gD.Gj(i),this.aj.delete(t),this.gB.delete(t),this.gB.length>0)this.yD.Hj(!0);else if(0!=this.yD.gk()){var n=!1;this.aj.forEach(function(t){e.yD.gk()===t.Ek.peerInfo.internalAs&&(n=!0)}),this.yD.Hj(n)}else this.yD.Hj(!1)}catch(e){y.ErrorMonitor.ve().logError("Error removing the in partner",this.loggerId,m.hs.cr.zt,{detailedError:e,otherGuid:t})}},e.prototype.Vj=function(t,e){try{this.logger.debug(this.loggerId+"CLOSE RECEIVED FROM "+t+" TYPE "+r[e.getType()]),e.getType()!=r.Jq&&e.getType()!=r.HV||(this.dB.has(t)&&this.dB.delete(t),this.fB.has(t)&&this.fB.delete(t)),e.getType()!=r.Jq&&e.getType()!=r.BV||this.Sj(t)}catch(e){y.ErrorMonitor.ve().logError("Error when close received",this.loggerId,m.hs.cr.Jt,{detailedError:e,otherGuid:t})}},e.prototype.gj=function(t){var e=this,i=s.defer();try{var n=new l.Rf.Fa.Jg.OutPartnershipRequest;n.guid=this.gd,n.contextId=this.contextId,n.p2pProtocolVersion=c.hh.Ho.Do,n.reportingGuid=this.yD.getReportingGuid(),this.yD.gk()&&(n.internalAs=this.yD.gk()),this.yD.Fj()&&(n.externalAs=this.yD.Fj()),this.yD.getPrivateIp()&&(n.privateIpString=this.yD.getPrivateIp()),this.yD.getPublicIp()&&(n.publicIpString=this.yD.getPublicIp());var r=this.yD.Uj(),o=[];r.forEach(function(t,i){var n=new l.Rf.Fa.Jg.StreamCharacteristics;n.bitrate=i,n.streamState=t.type,n.delta=null!=e.yD.getDelta()?e.yD.getDelta():-1,o.push(n)}),o.length>0&&n.setStreamCharacteristics(o),this.logger.debug(this.loggerId+"SEND PART REQ TO "+t.otherGuid+" WITH ID "+n.contextId+" internalAS "+n.internalAs+" externalAs "+n.externalAs+" private ip "+n.privateIpString+" public ip "+n.publicIpString+" rGuid "+this.yD.getReportingGuid());var a=u.Framework.setTimeout(function(){e.jj(i,t.otherGuid)},c.hh.No.Co);this.qV.set(t.otherGuid,{mG:a,defer:i}),t.Lg(l.Rf.Eg.lg,n)}catch(e){y.ErrorMonitor.ve().logError("Error sending partnership request",this.loggerId,m.hs.cr.Xt,{detailedError:e,otherGuid:t.otherGuid}),i.reject(e)}return i.Ss},e.prototype.Qj=function(t,e){var i=e.otherGuid,r=this.qV.get(i);r?(u.Framework.clearTimeout(r.mG),this.qV.delete(i),t.accept===n.MV?r.defer.resolve({yg:e,msg:t}):r.defer.reject("NOT ACCEPTED")):y.ErrorMonitor.ve().logError("Error receiving out partnership response from an unknown peer",this.loggerId,m.hs.cr.er,{otherGuid:i})},e.prototype.jj=function(t,e){if(this.qV.has(e)){y.ErrorMonitor.ve().logError("Error partnership request expired",this.loggerId,m.hs.cr.Zt,{otherGuid:e});var i=this.qV.get(e);this.qV.delete(e),i.defer.reject("EXPIRED")}else y.ErrorMonitor.ve().logError("Error partnership request expired for unknown peer",this.loggerId,m.hs.cr.$t,{otherGuid:e})},e.prototype.$V=function(){var t=this,e=s.defer(),i=this.aj.values();this.gB.forEach(function(t,e){i.push(t)});var n=i.slice().map(function(t){return t.wj.close()});return s.all(n).then(function(t){e.resolve("resolved")}).fail(function(i){y.ErrorMonitor.ve().logError("Error closing partnership",t.loggerId,m.hs.cr.tr),e.reject("could not close")}),e.Ss},e.prototype.bj=function(t){this.Ng.disconnect(t)},e.prototype.XV=function(t){var e=this;-1!=this.VV&&u.Framework.clearInterval(this.VV),this.VV=u.Framework.setInterval(function(){e.Kj()},t)},e.prototype.Kj=function(){try{if(this.yD.yk()&&!this.yD.ck()&&E){var t=this.yD.Rk(),e=this.context.PD().bitrate;if(e&&this.xj(t.uuid)){var i=this.qj(t.uuid);this.Yj(i.wj,e)}}}catch(t){y.ErrorMonitor.ve().logError("Error announcing bitrate",this.loggerId,m.hs.cr.rr,t)}},e.prototype.Yj=function(t,e){try{var i=new l.Rf.Fa.Jg.Bitrate;i.guid=this.gd,i.bitrate=e,this.logger.debug(this.loggerId+"ANNOUNCE BITRATE "+i.bitrate+" TO PEER GUID "+t.otherGuid),t.Lg(l.Rf.Eg.Bitrate,i)}catch(e){y.ErrorMonitor.ve().logError("Error constructing bitrate announcement",this.loggerId,m.hs.cr.ir,{detailedError:e,otherGuid:t.otherGuid})}},e.prototype.Wj=function(t){try{this.logger.debug(this.loggerId+"RECEIVED BITRATE "+t.bitrate+" FROM PEER GUID "+t.guid),this.oG.kj.has(t.getGuid())&&(this.oG.kj.get(t.guid).zj(t.bitrate),this.mD.Jj())}catch(e){y.ErrorMonitor.ve().logError("Error receiving bitrate info",this.loggerId,m.hs.cr.nr,{detailedError:e,otherGuid:t.guid})}},e.prototype.Xj=function(t){try{var e=t.guid,i=this.qj(e);i&&this.Zj(i,t),(i=this.$j(e))&&this.Zj(i,t),this.zV.Tj(e,t.privateIpString,t.publicIpString)}catch(e){y.ErrorMonitor.ve().logError("Error receiving peer info",this.loggerId,m.hs.cr.sr,{detailedError:e,otherGuid:t.guid})}},e.prototype.Zj=function(t,e){var i=t.Ek.peerInfo;if(e.privateIpString&&(i.privateIpString=e.privateIpString),e.publicIpString&&(i.publicIpString=e.publicIpString),e.externalAs&&(i.externalAs=e.externalAs),e.internalAs&&(i.internalAs=e.internalAs),e.streamCharacteristics){var n=[];e.streamCharacteristics.forEach(function(t){var e=new f.TrackerPeerStreamInfo;e.bitrate=t.bitrate,e.delta=t.delta,e.state=t.streamState,n.push(e)}),i.streams=n}},e.prototype.ZV=function(t){var e=this;this.jV&&u.Framework.clearInterval(this.jV),this.jV=u.Framework.setInterval(function(){e.eQ()},t)},e.prototype.eQ=function(){var t=this;try{if(this.yD.getPrivateIp()||this.yD.getPublicIp()||this.yD.gk()||this.yD.Fj()){var e=this.tQ(),i=new l.Rf.Fa.Jg.PeerInfoMessage;i.guid=this.yD.getId(),this.yD.getPrivateIp()&&(i.privateIpString=this.yD.getPrivateIp()),this.yD.getPublicIp()&&(i.publicIpString=this.yD.getPublicIp()),this.yD.Fj()&&(i.externalAs=this.yD.Fj()),this.yD.gk()&&(i.internalAs=this.yD.gk());var n=this.yD.Uj(),r=[];n.forEach(function(e,i){var n=new l.Rf.Fa.Jg.StreamCharacteristics;n.bitrate=i,n.streamState=e.type,n.delta=null!=t.yD.getDelta()?t.yD.getDelta():-1,r.push(n)}),r.length>0&&i.setStreamCharacteristics(r),e.forEach(function(t,e){t.wj.Lg(l.Rf.Eg.nd,i)})}}catch(t){y.ErrorMonitor.ve().logError("Error announcing peer info to all partners",this.loggerId,m.hs.cr.ar,t)}},e.prototype.tQ=function(){try{var t=new a;return this.dB.forEach(function(e,i){t.has(i)||t.set(i,e)}),this.fB.forEach(function(e,i){t.has(i)||t.set(i,e)}),this.gB.forEach(function(e,i){t.has(i)||t.set(i,e)}),this.aj.forEach(function(e,i){t.has(i)||t.set(i,e)}),t}catch(t){return y.ErrorMonitor.ve().logError("Error collecting all partners",this.loggerId,m.hs.cr.hr,t),new a}},e}(p.rQ);e.iQ=b},function(t,e,i){"use strict";var n=function(){return function(){}}();n.nQ=!0,n.sQ=3e4,n.oQ=6e4,n.aQ=3e4,e.hQ=n;var r=function(){return function(){}}();r.Xa="site",r.Za="externalAs",r.$a="availableSendRate",r.eh="remoteAddress",r.th="localAddress",e.cQ=r},function(t,e,i){"use strict";var n=function(){function t(t,e){this.uQ=t,this.lQ=e}return t.prototype.pj=function(){return this.lQ},t.prototype.dj=function(){return this.uQ},t}();e.pQ=n},function(t,e,i){"use strict";var n=function(){function t(){}return t.dQ=function(t,e){var i=t.gQ.fQ(!1),n=e.gQ.fQ(!1);return i>n?1:i<n?0:-1},t}();e.EQ=n;var r=function(){function t(){}return t.dQ=function(t,e){var i=t.vQ.fQ(!1),n=e.vQ.fQ(!1);return i>n?1:i<n?0:-1},t}();e.yQ=r},function(t,e,i){"use strict";var n,r=i(3),o=i(4),s=i(0),a=i(104),u=i(105),h=i(26),c=i(41),l=i(18),f=i(21),p=i(109),d=i(22),g=i(111),v=i(8),y=i(113),m=i(56),E=i(32),b=i(1),w=i(46),T=i(29),S=i(6),I=a.HiveComm.Options,_=u.HiveComm.TQ,R=h.HiveComm.oE,A=h.HiveComm.SE,O=h.HiveComm.HiveTechError,C=h.HiveComm.vE,k=h.HiveComm.wE,N=i(54),P=S.he.dh,D=S.he.lh,L=S.he.uh,x=S.he.ph;(L||x)&&i(14).HiveConfig,e.version=P,function(t){var n=function(){function t(t){this.mQ=[_[_.HiveJava],_[_.HiveJsProxy],_[_.HiveJS],_[_.StatsJS]],this.IQ=new r,this.SQ=new Array,this.RQ=new Array,this.wQ=null,this.bQ=0,this.CQ=0,this.loggerId="[HiveComm] ",this._Q=0,this.PQ=l.Rl.getItem("hivePluginId"),this.PQ||(this.PQ=Math.abs(Math.floor(68719476736*Math.random())).toString(16),l.Rl.setItem("hivePluginId",this.PQ)),b.ErrorMonitor.ve(e.version),this.options_=new I.AQ,this.OQ(t),f.Sp(t,this.options_),f.Rp(window.location.href,new I.NQ,this.options_),a.kQ.DQ(this.options_),this.ff=s.Framework.resolve(s.Framework.V.R),c.HiveConfig.Framework.LoggerTimestamp=this.options().loggerTimestamp,this.ff.fN(this.options().debugLevel),b.ErrorMonitor.ve().me(this.ff.log());var i=s.Framework.resolve(v.pc.M),n=s.Framework.resolve(v.pc.sc);i.Zl().then(function(t){b.ErrorMonitor.ve().setUser(t.tp()),b.ErrorMonitor.ve().Ie({reportingGuid:t.rp()}),b.ErrorMonitor.ve().Ie({p2pId:t.tp()})});var o={};new p.LQ(this),n.getConnectivityInfo().then(function(t){o={pIPAddr:t.getNetworkChanged().getPrivateIp()},b.ErrorMonitor.ve().Ie({privateIp:o.pIPAddr})}),window.gf=this.ff.log(),this.MQ(),this.pluginReference=new k(this);var u=this.options().idleTimePeriod>this.options().feedbackPeriod?this.options().idleTimePeriod:T.L.nh;this.FQ=new l.Nl(u)}return t.prototype.options=function(){return this.options_},t.prototype.logger=function(){return this.wQ?this.ff.log(this.wQ.id):this.ff.log()},t.prototype.loggerLevel=function(){if(this.logger)return this.ff.level},t.prototype.getPluginId=function(){return this.PQ},t.prototype.getCommVersion=function(){return e.version},t.prototype.updateCommsForInitSessions=function(){for(var t=0,e=this.RQ;t<e.length;t++){var i=e[t];i.tech.LL(this),"HiveJS"===i.tech.getName()&&i.tech.UQ&&i.tech.UQ.LL(this)}},t.prototype.OQ=function(t){var e=new m.StatsJS(this,t);if(this.IQ.set(m.StatsJS.EL,e),L){var n=i(132).HiveJS;this.IQ.set(n.EL,new n(this,t,e))}if(x){var r=i(199).HiveJsProxy;this.IQ.set(r.EL,new r(this,t,e))}if(D){var o=i(201).HiveJava;this.IQ.set(o.EL,new o(this,t))}var s=t.hiveTechOrder;if(!s||s instanceof Array)if(s&&s.length>0)for(var a=s.length;a--;){var u=s[a];"string"!=typeof u||-1==this.mQ.indexOf(u)?(console.warn(this.loggerId+'The "'+u+'" Hive tech is undefined'),s.splice(a,1)):"string"==typeof u&&this.IQ.has(u)||console.warn(this.loggerId+'The "'+u+'" Hive tech is not enabled on this plugin')}else s=this.mQ;else console.warn(this.loggerId+"hiveTechOrder value not accepted. It must be an array of strings"),s=this.mQ;t.hiveTechOrder=s},t.prototype.resolveTicketPromise=function(t){var e=this;this.logger().notice(this.loggerId+"resolving "+t);var i=o.defer();if(!t)return i.reject(l.Sl("",R.sE,"No ticket provided.")),i.Ss;this.BQ(t);var n=this.HQ().values();0==n.length&&i.reject(l.Sl(t,R.rE));var r,s,a=!1,u=!1,h=0,c=null;return f.wp(function(){return!a&&!u&&h<n.length&&!r},function(){var i=n[h++];return i.kL(),(i.vL()&&!s?e.KB(t,e.options().testId):o.resolve(null)).then(function(n){null!=n&&(s=n);var r=i.mL();return i.initSession(t,s).timeout(r,"["+i.getName()+"] Error: initialization timed out after "+r+"ms").then(function(t){c=t,e.xQ(c,i),a=!0,!i.vL()&&s&&s.Hl.reset(),b.ErrorMonitor.ve().Ie({sessionId:c.id}),e.logger().notice(e.loggerId+"initializing Session:["+c.id+"] Ticket:"+c.ticket.toString()+" HiveTech:["+c.tech.getName()+"]"),o.resolve(!0)},function(n){n instanceof Error&&(n=new O(C.EE,n.message),i.DL(n)),n.ticketUrl=t,u=!i.onError(n),e.logger().debug(e.loggerId+"tech "+i.getName()+": "+n.message),o.resolve(!0)})},function(t){r=t,o.resolve(!0)})}).then(function(){r?i.reject(l.Sl(t,R.sE,r)):u?i.reject(l.Sl(t,R.nE)):a?i.resolve(c):i.reject(l.Sl(t,R.rE))}).catch(function(n){b.ErrorMonitor.ve().logError("Error resolving ticket promise",e.loggerId,n),i.reject(l.Sl(t,R.tE,n.toString()))}).done(),i.Ss},t.prototype.KB=function(t,e){var i=this;return E.Hive.Reporting().initSession(t,!1,e).then(function(e){return i.logger().debug(i.loggerId+"verified ticket "+t),i.updatePlayerInfo(e),e}).catch(function(t){return o.reject("Ticket not verified, error: "+t.message)})},t.prototype.HQ=function(){var t=JSON.parse(JSON.stringify(this.options().hiveTechOrder)),e=new r;for(var i in t)this.IQ.has(t[i])&&e.set(t[i],this.IQ.get(t[i]));return e},t.prototype.BQ=function(t){var e=b.ErrorMonitor.ve();try{var i=new w.BN;i.RN(t),i.up()&&i.cp()&&i.hp()?e.setTags([i.up(),i.cp(),i.hp()]):e.logError("Ticket not valid, we could not resolve the triple partnerId/CustomerId/ContentId",this.loggerId,{partnerId:i.up(),customerId:i.cp(),contentId:i.hp()})}catch(t){this.logger().warn(this.loggerId+" "+t.message,t),e.notify(t)}},t.prototype.updatePlayerInfo=function(t){var i={commVersion:e.version,pluginName:this.getPluginName(),pluginVersion:this.getPluginVersion(),playerTech:this.getPlayerTech(),playerVersion:this.getPlayerVersion(),telemetryId:this.getTelemetryId()};t.Hl.updatePlayerInfo(i)},t.prototype.onSetupTimeout=function(){window.HiveRequest=XMLHttpRequest,l.HiveRequestFactory.clear(),E.Hive.Reporting().close()},t.prototype.addTechEvent=function(t){this.wQ&&this.wQ.tech?(t.sessionId=this.wQ.id,this.wQ.tech.bd(this.wQ,t)):this.SQ.push(t)},t.prototype.flushTechEvents=function(){var t=this.SQ;return this.SQ=new Array,t},t.prototype.MQ=function(){var t=this,e=window;e.addEventListener?e.addEventListener("beforeunload",function(){t.qQ(!0,!1)},!1):e.attachEvent("onbeforeunload",function(){t.qQ(!0,!1)})},t.prototype.closeHiveSession=function(t){this.logger().debug("Manually Closing Session"+(t?" because: "+t:""));var e=this.getActiveSession();e&&l.HiveRequestFactory.clearSessionState(e.id),this.resetSession(!0)},t.prototype.resetSession=function(t){var e=this;this.qQ(t),!1===t?this.wQ&&this.RQ.every(function(t){return t.id!==e.wQ.id})&&this.RQ.unshift(this.wQ):this.RQ.length=0,this.GQ(),this.wQ=null,this.bQ=0,this.CQ=0},t.prototype.xQ=function(t,e){t.tech=e,this.RQ.push(t)},t.prototype.onActivateSession=function(t){if(null==this.wQ){for(var e=t||this.getPlayerSource(),i=0;i<this.RQ.length;i++){var n=this.RQ[i];if(n.isActive(e)){if(this.wQ=n,this.wQ.rl?this.wQ.rl.Fl.SD(this.wQ.ticket):this.VQ(),this.RQ.length=0,this.wQ.tech.onActiveSession(this.wQ),this.logger().notice(this.loggerId+"activating Session:["+this.wQ.id+"] Ticket:"+this.wQ.ticket.toString()+" HiveTech:["+this.wQ.tech.getName()+"]"),this.jQ(),this.options().onActiveSession)try{this.options().onActiveSession(n.toHiveSession())}catch(t){b.ErrorMonitor.ve().logError(this.loggerId+" exception in user-defined Generic onActiveSession callback: "+t)}return!0}}this.logger().warn(this.loggerId+"Closing sessions - the active stream doesn't match any initialized sessions"),this.logger().warn(this.loggerId+"Active:"+e+" - initialized: "+this.RQ.length),this.resetSession()}return!1},t.prototype.getActiveSession=function(){if(this.wQ)return this.wQ.toHiveSession()},t.prototype.VQ=function(){var t=!1;this.RQ.forEach(function(e){e.rl&&(t=!0)}),t&&E.Hive.Reporting().close()},t.prototype.isSessionActive=function(){if(null!=this.wQ){if(this.wQ.isActive(this.getPlayerSource()))return!0;this.logger().warn(this.loggerId+"Session src mismatch: "+this.getPlayerSource()+" != "+this.wQ.manifest),this.resetSession()}return!1},t.prototype.qQ=function(t,e){if(void 0===e&&(e=!0),null!=this.wQ)this.logger().notice(this.loggerId+"Stopping session ["+this.wQ.id+"]"),this.wQ.close(t,e);else if(this.RQ.length>0){var i=this.RQ[0];this.logger().notice(this.loggerId+"Attempt to stopping session ["+i.id+"]"),i.close(t,e)}},t.prototype.jQ=function(){var t=this;null==this.QQ&&(this.QQ=setInterval(function(){t.KQ()},this.options().feedbackPeriod),this.KQ())},t.prototype.GQ=function(){clearInterval(this.QQ),this.QQ=null},t.prototype.KQ=function(){var t=this;if(this.isSessionActive()){if(!this.isActive())return void this.resetSession();var e=new l.ul;e.Pl=this.getCurrentTime(),e.Al=this.getBufferLen(),e.Ol=this.bQ,e.width=this.getWindowSize().width,e.height=this.getWindowSize().height,e.YQ=this.isFullscreen(),this.wQ.il(this.FQ.bl(e)),this.wQ.tech.SL(this.wQ,e).fail(function(e){t.logger().warn(t.loggerId+"stats handling failed",e),t.GQ()})}},t.prototype.registerGenericEvents=function(){var t=this;try{l.Tl.ve(this.logger()).yl(function(e){var i=t.getPotentialSession();i&&!i.sl()&&(t.onEventFeedback(e?d.Gl.Yp.Kp:d.Gl.Yp.HIDDEN),t.logger().debug(e?"visible":"hidden"))})}catch(t){b.ErrorMonitor.ve().logError("error setting up the visibilityChange listener",this.loggerId,{error:t})}},t.prototype.onStartBuffering=function(t){this.isSessionActive()&&this.CQ<=0&&(this.CQ=Date.now(),(null==t||t)&&this.onEventFeedback(d.Gl.Yp.xp))},t.prototype.onEndBuffering=function(){var t=0==this.bQ;if(this.CQ>0){var e=Date.now()-this.CQ;return this.bQ+=e,this.logger().debug(this.loggerId+"reporting new buffering event of "+e),this.CQ=0,t&&this.KQ(),!0}return!1},t.prototype.onError=function(t,e,i){void 0===i&&(i=!0),this.onEventFeedback(d.Gl.Yp.ERROR,{code:-1,"player-code":t}),i&&this.resetSession()},t.prototype.onEventFeedback=function(t,e){var i=this,n=this.getPotentialSession();null==n||n!=this.wQ&&n.tech.getName()===_[_.HiveJava]||n.tech.CL(n,t,e).fail(function(t){i.logger().warn(i.loggerId+"error in forwarding player event to tech",t)})},t.prototype.getPotentialSession=function(){return this.wQ?this.wQ:this.RQ&&this.RQ.length>0?this.RQ[0]:void 0},t.prototype.initStatusCode=function(){this._Q=0},t.prototype.setStatusCode=function(t,e){this.initStatusCode(),this._Q+=t<<28,e&&0===t&&(this._Q+=1<<4*(6-_[e.getName()])),t>0&&b.ErrorMonitor.ve().logError("Status Code Error",this.loggerId,{code:A[t]},["Plugin Error Code",A[t]])},t.prototype.getStatusCode=function(){return this._Q},t.prototype.getTelemetryId=function(){return this.options().telemetryId},t.logError=function(t,e,i,n){var r=b.ErrorMonitor.ve();r.logError.apply(r,arguments)},t.prototype.registerComm=function(t){N.zu.registerComm(this,t)},t}();t.Plugin=n}(n=e.HiveComm||(e.HiveComm={})),s.Framework.$(new g.WQ),s.Framework.ie("peer0",new y.zQ),s.Framework.ne("peer0"),"undefined"!=typeof window&&(window.HiveRequestFactory=l.HiveRequestFactory,void 0===window.HiveComm&&(window.HiveComm={}),window.HiveComm.Plugin=n.Plugin,window.HiveComm.Options=I.AQ,window.HiveComm.HiveRequestFactory=l.HiveRequestFactory,window.HiveComm.zu=N.zu,window.HiveComm.HivePlayerExtendedStats=l.HivePlayerExtendedStats,window.HiveComm.TechName=u.HiveComm.TechName,window.HiveComm.logError=n.Plugin.logError)},function(t,e){if(!RegExp.escape){var i=/[-[\]{}()*+?.\\^$|,#\s]/g;RegExp.escape=function(t){return t.replace(i,"\\$&")}}},function(t,e,i){"use strict";function n(){throw new Error("Can't construct. MapChanges is a mixin.")}var r=i(37),o=i(50);t.i=n;var s=(Object.prototype.hasOwnProperty,new r),a=null;n.prototype.JQ=function(){return s.has(this)||(a||(a=i(51)),s.set(this,a())),s.get(this)},n.prototype.XQ=function(t){var e=this.JQ();return t=t||"",e.has(t)||e.set(t,{Yc:new o,Wc:new o}),e.get(t)},n.prototype.ZQ=function(t,e,i){!this.Zc&&this.Xc&&this.Xc();var n=this.XQ(e);(i?n.Yc:n.Wc).push(t),Object.defineProperty(this,"dispatchesMapChanges",{value:!0,Ah:!0,l:!0,p:!1});var r=this;return function(){r&&(r.$Q(t,e,i),r=null)}},n.prototype.$Q=function(t,e,i){var n=this.XQ(e),r=(i?n.Yc:n.Wc).Lk(t);if(!r)throw new Error("Can't remove map change listener: does not exist: token "+JSON.stringify(e));r.delete()},n.prototype.Xk=function(t,e,i){var n="Map"+(i?"WillChange":"Change");this.JQ().forEach(function(r,o){if(!r.isActive){var s;r.isActive=!0,s=i?r.Yc:r.Wc;var a="handle"+(o.slice(0,1).toUpperCase()+o.slice(1))+n;try{s.forEach(function(i){if(i[a])i[a](e,t,this);else{if(!i.call)throw new Error("Handler "+i+" has no method "+a+" and is not callable");i.call(i,e,t,this)}},this)}finally{r.isActive=!1}}},this)},n.prototype.eK=function(t,e){return this.ZQ(t,e,!0)},n.prototype.tK=function(t,e){return this.$Q(t,e,!0)},n.prototype.Jk=function(t,e){return this.Xk(t,e,!0)}},function(t,e,i){"use strict";function n(t,e,i,r){if(!(this instanceof n))return new n(t,e,i,r);e=e||Object.cs,i=i||Object.hash,r=r||Function.us,this.ls=e,this.ps=i,this.ds=r;var o=this;this.rK=new this.iK(null,function(){return new o.nK}),this.length=0,this.addEach(t)}var r=(i(11),i(51)),o=i(50),s=i(12),a=i(39),u=i(69),h=i(13);Object.prototype.hasOwnProperty,t.i=n,n.sK=n,Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),Object.addEach(n.prototype,h.prototype),n.prototype.iK=r,n.prototype.nK=o,n.prototype.Es=function(t){return new this.constructor(t,this.ls,this.ps,this.ds)},n.prototype.has=function(t){var e=this.ps(t);return this.rK.get(e).has(t)},n.prototype.get=function(t,e){if(e)throw new Error("FastSet#get does not support second argument: equals");var i=this.ps(t),n=this.rK;return n.has(i)?n.get(i).get(t):this.ds(t)},n.prototype.delete=function(t,e){if(e)throw new Error("FastSet#delete does not support second argument: equals");var i=this.ps(t),n=this.rK;if(n.has(i)){var r=n.get(i);if(r.delete(t))return this.length--,0===r.length&&n.delete(i),!0}return!1},n.prototype.clear=function(){this.rK.clear(),this.length=0},n.prototype.add=function(t){var e=this.ps(t),i=this.rK;return i.has(e)||i.set(e,new this.nK(null,this.ls)),!i.get(e).has(t)&&(i.get(e).add(t),this.length++,!0)},n.prototype.reduce=function(t,e){var i=arguments[2],n=0;return this.rK.reduce(function(e,r){return r.reduce(function(e,r){return t.call(i,e,r,n++,this)},e,this)},e,this)},n.prototype.Bc=function(){if(this.length>0)return this.rK.Bc().Bc()},n.prototype.Hc=function(){return this.rK.values().kc().Hc()},n.prototype.log=function(t,e,i,n){t=t||u.hU,e=e||this.vs,i||(i=console.log,n=console),i=i.bind(n);var r=this.rK,o=r.keys();o.forEach(function(s,a){var u,h;a===o.length-1?(u=t.nU,h=" "):0===a?(u=t.rU,h=t.oU):(u=t.sU,h=t.oU);var c=r.get(s);i.call(n,u+t.eU+t.rU+" "+s),c.forEach(function(r,o){var s,a,u;o===c.head.Ok?(s=t.nU,a=" "):(s=t.sU,a=t.oU),e(o,function(e){u?i.call(n,h+" "+a+"  "+e):(i.call(n,h+" "+s+t.eU+t.eU+e),u=!0)},function(e){i.call(n,h+" "+t.oU+"  "+e)})})})},n.prototype.vs=function(t,e){var i=t.value;Object(i)===i?JSON.stringify(i,null,4).split("\n").forEach(function(t){e(" "+t)}):e(" "+i)}},function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);if(Array.isArray(t)||"string"==typeof t)return n.Hc(t);if((t=r(t))instanceof n)return t;if(t.next)this.next=function(){return t.next()};else if(t.Hc){var e=t.Hc();this.next=function(){return e.next()}}else{if("[object Function]"!==r.prototype.toString.call(t))throw new TypeError("Can't iterate "+t);this.next=t}}t.i=n;var r=i(36),o=i(12);n.prototype.forEach=o.prototype.forEach,n.prototype.map=o.prototype.map,n.prototype.filter=o.prototype.filter,n.prototype.every=o.prototype.every,n.prototype.some=o.prototype.some,n.prototype.uo=o.prototype.uo,n.prototype.all=o.prototype.all,n.prototype.min=o.prototype.min,n.prototype.max=o.prototype.max,n.prototype.Nc=o.prototype.Nc,n.prototype.Dc=o.prototype.Dc,n.prototype.kc=o.prototype.kc,n.prototype.Lc=o.prototype.Lc,n.prototype.enumerate=o.prototype.enumerate,n.prototype.Fc=o.prototype.Fc,n.prototype.group=o.prototype.group,n.prototype.reversed=o.prototype.reversed,n.prototype.toArray=o.prototype.toArray,n.prototype.Pc=o.prototype.Pc,n.prototype.iterator=o.prototype.iterator,n.prototype.Gk=null,r.defineProperty(n.prototype,"_iterationObject",{get:function(){return this.Gk||(this.Gk={done:!1,value:void 0})}}),n.prototype.Es=function(t){var e=[];return e.addEach(t),e},n.prototype.oK=function(t){var e=n(this),i=arguments[1],o=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){if(!0!==e.Vk.done){var n=t.call(i,e.next().value,o++,e);e.Vk.value=n}return e.Vk})},n.prototype.aK=function(t){var e=n(this),i=arguments[1],o=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){for(var n;;){if(!0===(n=e.next()).done)return n;if(t.call(i,n.value,o++,e))return n}})},n.prototype.reduce=function(t){var e,i=n(this),o=arguments[1],s=arguments[2],a=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;if(!0===(e=i.next()).done){if(arguments.length>1)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}for(o=arguments.length>1?t.call(s,o,e.value,a,i):e.value,a++;;){if(!0===(e=i.next()).done)return o;o=t.call(s,o,e.value,a,i),a++}},n.prototype.concat=function(){return n.concat(Array.prototype.concat.apply(this,arguments))},n.prototype.hK=function(t){var e,i,o=n(this),s=arguments[1],a=!1,u=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;for(;!0!==(i=o.next()).done;){if(!t.call(s,i.value,u,o)){a=!0,e=i.value;break}u++}return a?o.constructor([e]).concat(o):o.constructor([])},n.prototype.cK=function(t){var e=n(this),i=arguments[1],o=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){if(!0!==e.Vk.done){var n=e.next().value;t.call(i,n,o++,e)?e.Vk.value=n:(e.Vk.done=!0,e.Vk.value=void 0)}return e.Vk})},n.prototype.uK=function(){return n.Mc(Array.prototype.concat.apply(this,arguments))},n.prototype.lK=function(t){return n.count(t).uK(this)},n.Hc=function(t){var e;return e=0,new n(function(){if("object"==typeof t)for(;!(e in t);){if(e>=t.length){this.Vk.done=!0,this.Vk.value=void 0;break}e+=1}else e>=t.length&&(this.Vk.done=!0,this.Vk.value=void 0);return this.Vk.done||(this.Vk.value=t[e],e+=1),this.Vk})},n.pK=function(t,e){var i;return arguments.length<2&&(e=1/0),new n(function(){var r,o;return i&&(o=i()),i&&!0!==o.done||(e>0?(e--,r=n.Hc(t),o=(i=r.next.bind(r))()):(this.Vk.done=!0,o=this.Vk)),o})},n.concat=function(t){var e;return t=n(t),new n(function(){var i,r;return e&&(r=e()),r&&!0!==r.done?r:!1===(r=t.next()).done?(i=n(r.value),(e=i.next.bind(i))()):r})},n.Mc=function(t){return t=n(t).map(n),new n(0===t.length?[]:function(){var e,i,n=t.map(function(t){return!0===(i=t.next()).done&&(e=!0),i.value});return e?(this.Vk.done=!0,this.Vk.value=void 0):this.Vk.value=n,this.Vk})},n.Lc=function(){return n.Mc(Array.prototype.slice.call(arguments))},n.chain=function(){return n.concat(Array.prototype.slice.call(arguments))},n.range=function(t,e,i){return arguments.length<3&&(i=1),arguments.length<2&&(e=t,t=0),t=t||0,i=i||1,new n(function(){t>=e&&(this.Vk.done=!0,this.Vk.value=void 0);var n=t;return t+=i,this.Vk.value=n,this.Vk})},n.count=function(t,e){return n.range(t,1/0,e)},n.repeat=function(t,e){return new n.range(e).oK(function(){return t})}},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(20),o=r.HiveComm.Options.Options,s=r.HiveComm.Options.mp;!function(t){!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.authTokenEnabled=!0,e.dashRemoveBitrateSize=!1,e.dashFilterBitrates=null,e.staticPartnerId=null,e.staticCustomerId=null,e.audioMetrics=!0,e.logJsonSnapshots=void 0,e}return n(e,t),e}(o);t.AQ=e;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hiveAuthTokenEnabled="authTokenEnabled",e.hiveDashRemoveBitrateSize="dashRemoveBitrateSize",e.hiveDashFilterBitrates="dashFilterBitrates",e.hiveLogJsonSnapshots="logJsonSnapshots",e.hiveStaticPartnerId="staticPartnerId",e.hiveStaticCustomerId="staticCustomerId",e.hiveAudioMetrics="audioMetrics",e}return n(e,t),e}(s);t.NQ=i}(t.Options||(t.Options={}))}(e.HiveComm||(e.HiveComm={}));var a=function(){function t(){}return t.DQ=function(t){"dashRemoveBitrateSize"in t&&t.dashRemoveBitrateSize&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashRemoveBitrateSize=t.dashRemoveBitrateSize),"dashFilterBitrates"in t&&t.dashFilterBitrates&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashFilterBitrates=t.dashFilterBitrates),"staticCustomerId"in t&&t.staticCustomerId&&window.HiveConfig&&window.HiveConfig.ClientInfo&&(window.HiveConfig.ClientInfo.uu=t.staticCustomerId),"staticPartnerId"in t&&t.staticPartnerId&&window.HiveConfig&&window.HiveConfig.ClientInfo&&(window.HiveConfig.ClientInfo.cu=t.staticPartnerId),"audioMetrics"in t&&!t.audioMetrics&&window.HiveConfig&&window.HiveConfig.Stats&&(window.HiveConfig.Stats.AudioAccounting=t.audioMetrics),"detectPrivateIP"in t&&"boolean"==typeof t.detectPrivateIP&&window.HiveConfig&&window.HiveConfig.ConnInfo&&(window.HiveConfig.ConnInfo.detectPrivateIP=t.detectPrivateIP),"logJsonSnapshots"in t&&t.logJsonSnapshots&&window.HiveConfig&&window.HiveConfig.DebugLogs&&(window.HiveConfig.DebugLogs.MetricSnapshotLogs=1,window.HiveConfig.DebugLogs.TrackSnapshotLogs=1,window.HiveConfig.DebugLogs.TrackerLogs=1)},t}();e.kQ=a},function(t,e,i){"use strict";!function(t){!function(t){t[t.HiveJS=0]="HiveJS",t[t.HiveJava=1]="HiveJava",t[t.StatsJS=2]="StatsJS",t[t.HiveJsProxy=3]="HiveJsProxy"}(t.TQ||(t.TQ={})),function(t){t.StatsJS="StatsJS",t.HiveJsProxy="HiveJsProxy",t.HiveJava="HiveJava",t.HiveJS="HiveJS"}(t.TechName||(t.TechName={}))}(e.HiveComm||(e.HiveComm={}))},function(t,e,i){"use strict";var n=function(){function t(){var e=this;if(this.dK=new Array,this.callbacks=new Array,t.fe)throw new Error("Error: Instantiation failed: Use KeyHandlerHiveComm.getInstance() instead of new.");var i={};document.addEventListener("keydown",function(t){i[t.keyCode]=!0,e.fK(i)},!0),document.addEventListener("keyup",function(t){i={}},!0)}return t.ve=function(){return void 0===this.fe&&(this.fe=new t),this.fe},t.prototype.ye=function(t,e){this.dK.push(t),this.callbacks.push(e)},t.prototype.fK=function(t){for(var e=this,i=0;i<this.dK.length;i++)!function(i){var n=!0;e.dK[i].forEach(function(e){null!=t[e]&&t[e]||(n=!1)}),n&&e.callbacks[i]()}(i)},t}();e.Te=n},function(t,e){t.i=function(t){return t&&"object"==typeof t&&"function"==typeof t.cA&&"function"==typeof t.fill&&"function"==typeof t.gK}},function(t,e){"function"==typeof Object.create?t.i=function(t,e){t.EK=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,p:!1,Ah:!0,l:!0}})}:t.i=function(t,e){t.EK=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";var n=i(42),r=i(29),o=i(21),s=i(1),a=function(){function t(t){this.vK=r.L.pp?9989:9988,this.yK=-1,this.gL=t,this.TK()}return t.prototype.TK=function(){var t=this;this.gL.options().silent&&(HiveConfig&&(HiveConfig.ConnInfo.detectPrivateIP=!0),void 0===this.mK&&(this.url="//"+n.fp.dO+":"+this.vK+"/feedback",this.gL.logger().info("starting periodic alive ping to hive tester ["+this.url+"]"),this.mK=setInterval(function(){t.IK()},r.L.hR)))},t.prototype.IK=function(){var t=this,e=this.gL.getActiveSession(),i=void 0;e&&(i="S["+e.id+"]");var n=this.gL.getCurrentTime();n>this.yK?(this.gL.logger().info("sending hive tester ping ["+n+" > "+this.yK+"]"),o.bp(this.url).then(function(t){},function(e){s.ErrorMonitor.ve().logError("error sending hive tester ping",i,{error:e}),clearInterval(t.mK)})):this.gL.logger().warn("not sending hive tester ping ["+n+" <= "+this.yK+"]"),this.yK=n},t}();e.LQ=a},function(t,e){(function(e){t.i=e}).call(e,{})},function(t,e,i){"use strict";var n=i(40),r=i(112),o=i(45),s=i(0),a=function(){function t(){}return t.prototype.apply=function(t){t.bind(new n.ZA(s.Framework.V.I,r.SK,n.$A.sO)),t.bind(new n.ZA(s.Framework.V.R,o.TN.yN))},t}();e.WQ=a},function(t,e,i){"use strict";var n=i(68),r=function(){function t(){this.RK=new n,this.wK=new n,"undefined"!=typeof global?this.bK=global:this.bK=window}return t.prototype.C=function(){return!1},t.prototype.CK=function(t,e,i){},t.prototype.A=function(){},t.prototype.time=function(){return+new Date},t.prototype.setTimeout=function(t,e){var i=this,n=this.bK.setTimeout(function(){i.RK.delete(n),t()},e);return this.RK.add(n),n},t.prototype.clearTimeout=function(t){return this.RK.delete(t),this.bK.clearTimeout(t),!0},t.prototype.setInterval=function(t,e){var i=this.bK.setInterval(function(){t()},e);return this.wK.add(i),i},t.prototype.clearInterval=function(t){return this.wK.delete(t),this.bK.clearInterval(t),!0},t.prototype.O=function(){var t=this;this.RK.forEach(function(e){return t.clearTimeout(e)}),this.wK.forEach(function(e){return t.clearInterval(e)})},t}();e.SK=r},function(t,e,i){"use strict";var n=i(40),r=i(0),o=i(45),s=i(19),a=i(8),u=i(22),h=i(75),c=i(76),l=i(77),f=i(79),p=i(80),d=i(6).he.Ih;if(d)var g=i(81).CH;else var v=i(83).nx;var y=function(){function t(){}return t.prototype.apply=function(t){t.bind(new n.ZA(a.pc.hc,s.lp,n.$A.sO)),t.bind(new n.ZA(a.pc.G,c.qB,n.$A.sO)),t.bind(new n.ZA(a.pc.nc,l.WB,n.$A.sO)),t.bind(new n.ZA(a.pc.M,f.vH,n.$A.sO)),t.bind(new n.ZA(r.Framework.V.R,o.TN.yN,n.$A.sO)),d?t.bind(new n.ZA(a.pc.sc,g,n.$A.sO)):t.bind(new n.ZA(a.pc.sc,v,n.$A.sO)),t.bind(new n.ZA(a.pc.oc,p.IH,n.$A.sO)),t.bind(new n.ZA(a.pc.cc,h.Stats.ZF,n.$A.pO)),t.bind(new n.ZA(a.pc.ic,h.Stats.ql,n.$A.pO)),t.bind(new n.ZA(a.pc.uc,u.Gl.Bd,n.$A.pO)),t.bind(new n.ZA(a.pc.lc,u.Gl.ql,n.$A.pO))},t}();e.zQ=y},function(t,e,i){var n=i(33);"undefined"==typeof hive&&(hive={}),void 0===hive.snapshots&&(hive.snapshots={}),hive.snapshots.Traffic=function(t){this.reqN=null,this.respFallbackN=null,this.respFallbackErrN=null,this.respP2pN=null,this.reqOtherN=null,this.respFallbackOtherN=null,this.respFallbackOthertErrN=null,this.srcReqN=null,this.srcRespN=null,this.srcRespErrN=null,this.srcReqQt=null,this.srcRespQt=null,this.srcOverQt=null,this.srcOtherReqN=null,this.srcOtherRespN=null,this.srcOtherRespErrN=null,this.srcOtherReqQt=null,this.srcOtherRespQt=null,this.srcOtherOverQt=null,this.p2pSubReqN=null,this.p2pSubRespN=null,this.p2pSubRespPartN=null,this.p2pSubRespErrN=null,this.p2pSubRespExpN=null,this.p2pSubReqQt=null,this.p2pSubRespQt=null,this.p2pDirectQt=null,this.p2pRelayQt=null,this.p2pNatQt=null,this.p2pUdpbQt=null,this.fallAgentRespN=null,this.fallAgentPredHitN=null,this.fallAgentFailedRespN=null,this.fallAgentPredMissN=null,this.fallAgentPredPartialHitN=null,this.fallAgenTrafficSuccessQt=null,this.fallAgenTrafficFailureQt=null,this.p2pAgentPredHitN=null,this.p2pAgentPredMissN=null,this.p2pAgentPredPartialHitN=null,this.p2pAgenTrafficSuccessQt=null,this.p2pAgenTrafficFailureQt=null,this.respP2pOtherN=null,this.lCacheRespN=null,this.lCacheRespQt=null,this.p2pOutSiteLowPrio=null,t&&(void 0!==t.reqN&&null!==t.reqN&&(this.reqN=t.reqN),void 0!==t.respFallbackN&&null!==t.respFallbackN&&(this.respFallbackN=t.respFallbackN),void 0!==t.respFallbackErrN&&null!==t.respFallbackErrN&&(this.respFallbackErrN=t.respFallbackErrN),void 0!==t.respP2pN&&null!==t.respP2pN&&(this.respP2pN=t.respP2pN),void 0!==t.reqOtherN&&null!==t.reqOtherN&&(this.reqOtherN=t.reqOtherN),void 0!==t.respFallbackOtherN&&null!==t.respFallbackOtherN&&(this.respFallbackOtherN=t.respFallbackOtherN),void 0!==t.respFallbackOthertErrN&&null!==t.respFallbackOthertErrN&&(this.respFallbackOthertErrN=t.respFallbackOthertErrN),void 0!==t.srcReqN&&null!==t.srcReqN&&(this.srcReqN=t.srcReqN),void 0!==t.srcRespN&&null!==t.srcRespN&&(this.srcRespN=t.srcRespN),void 0!==t.srcRespErrN&&null!==t.srcRespErrN&&(this.srcRespErrN=t.srcRespErrN),void 0!==t.srcReqQt&&null!==t.srcReqQt&&(this.srcReqQt=t.srcReqQt),void 0!==t.srcRespQt&&null!==t.srcRespQt&&(this.srcRespQt=t.srcRespQt),void 0!==t.srcOverQt&&null!==t.srcOverQt&&(this.srcOverQt=t.srcOverQt),void 0!==t.srcOtherReqN&&null!==t.srcOtherReqN&&(this.srcOtherReqN=t.srcOtherReqN),void 0!==t.srcOtherRespN&&null!==t.srcOtherRespN&&(this.srcOtherRespN=t.srcOtherRespN),void 0!==t.srcOtherRespErrN&&null!==t.srcOtherRespErrN&&(this.srcOtherRespErrN=t.srcOtherRespErrN),void 0!==t.srcOtherReqQt&&null!==t.srcOtherReqQt&&(this.srcOtherReqQt=t.srcOtherReqQt),void 0!==t.srcOtherRespQt&&null!==t.srcOtherRespQt&&(this.srcOtherRespQt=t.srcOtherRespQt),void 0!==t.srcOtherOverQt&&null!==t.srcOtherOverQt&&(this.srcOtherOverQt=t.srcOtherOverQt),void 0!==t.p2pSubReqN&&null!==t.p2pSubReqN&&(this.p2pSubReqN=t.p2pSubReqN),void 0!==t.p2pSubRespN&&null!==t.p2pSubRespN&&(this.p2pSubRespN=t.p2pSubRespN),void 0!==t.p2pSubRespPartN&&null!==t.p2pSubRespPartN&&(this.p2pSubRespPartN=t.p2pSubRespPartN),void 0!==t.p2pSubRespErrN&&null!==t.p2pSubRespErrN&&(this.p2pSubRespErrN=t.p2pSubRespErrN),void 0!==t.p2pSubRespExpN&&null!==t.p2pSubRespExpN&&(this.p2pSubRespExpN=t.p2pSubRespExpN),void 0!==t.p2pSubReqQt&&null!==t.p2pSubReqQt&&(this.p2pSubReqQt=t.p2pSubReqQt),void 0!==t.p2pSubRespQt&&null!==t.p2pSubRespQt&&(this.p2pSubRespQt=t.p2pSubRespQt),void 0!==t.p2pDirectQt&&null!==t.p2pDirectQt&&(this.p2pDirectQt=t.p2pDirectQt),void 0!==t.p2pRelayQt&&null!==t.p2pRelayQt&&(this.p2pRelayQt=t.p2pRelayQt),void 0!==t.p2pNatQt&&null!==t.p2pNatQt&&(this.p2pNatQt=t.p2pNatQt),void 0!==t.p2pUdpbQt&&null!==t.p2pUdpbQt&&(this.p2pUdpbQt=t.p2pUdpbQt),void 0!==t.fallAgentRespN&&null!==t.fallAgentRespN&&(this.fallAgentRespN=t.fallAgentRespN),void 0!==t.fallAgentPredHitN&&null!==t.fallAgentPredHitN&&(this.fallAgentPredHitN=t.fallAgentPredHitN),void 0!==t.fallAgentFailedRespN&&null!==t.fallAgentFailedRespN&&(this.fallAgentFailedRespN=t.fallAgentFailedRespN),void 0!==t.fallAgentPredMissN&&null!==t.fallAgentPredMissN&&(this.fallAgentPredMissN=t.fallAgentPredMissN),void 0!==t.fallAgentPredPartialHitN&&null!==t.fallAgentPredPartialHitN&&(this.fallAgentPredPartialHitN=t.fallAgentPredPartialHitN),void 0!==t.fallAgenTrafficSuccessQt&&null!==t.fallAgenTrafficSuccessQt&&(this.fallAgenTrafficSuccessQt=t.fallAgenTrafficSuccessQt),void 0!==t.fallAgenTrafficFailureQt&&null!==t.fallAgenTrafficFailureQt&&(this.fallAgenTrafficFailureQt=t.fallAgenTrafficFailureQt),void 0!==t.p2pAgentPredHitN&&null!==t.p2pAgentPredHitN&&(this.p2pAgentPredHitN=t.p2pAgentPredHitN),void 0!==t.p2pAgentPredMissN&&null!==t.p2pAgentPredMissN&&(this.p2pAgentPredMissN=t.p2pAgentPredMissN),void 0!==t.p2pAgentPredPartialHitN&&null!==t.p2pAgentPredPartialHitN&&(this.p2pAgentPredPartialHitN=t.p2pAgentPredPartialHitN),void 0!==t.p2pAgenTrafficSuccessQt&&null!==t.p2pAgenTrafficSuccessQt&&(this.p2pAgenTrafficSuccessQt=t.p2pAgenTrafficSuccessQt),void 0!==t.p2pAgenTrafficFailureQt&&null!==t.p2pAgenTrafficFailureQt&&(this.p2pAgenTrafficFailureQt=t.p2pAgenTrafficFailureQt),void 0!==t.respP2pOtherN&&null!==t.respP2pOtherN&&(this.respP2pOtherN=t.respP2pOtherN),void 0!==t.lCacheRespN&&null!==t.lCacheRespN&&(this.lCacheRespN=t.lCacheRespN),void 0!==t.lCacheRespQt&&null!==t.lCacheRespQt&&(this.lCacheRespQt=t.lCacheRespQt),void 0!==t.p2pOutSiteLowPrio&&null!==t.p2pOutSiteLowPrio&&(this.p2pOutSiteLowPrio=t.p2pOutSiteLowPrio))},hive.snapshots.Traffic.prototype={},hive.snapshots.Traffic.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.reqN=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.DOUBLE?this.respFallbackN=t.E_().value:t.Mb(i);break;case 3:i==n.Type.I32?this.respFallbackErrN=t.Fb().value:t.Mb(i);break;case 4:i==n.Type.DOUBLE?this.respP2pN=t.E_().value:t.Mb(i);break;case 5:i==n.Type.I32?this.reqOtherN=t.Fb().value:t.Mb(i);break;case 6:i==n.Type.I32?this.respFallbackOtherN=t.Fb().value:t.Mb(i);break;case 7:i==n.Type.I32?this.respFallbackOthertErrN=t.Fb().value:t.Mb(i);break;case 8:i==n.Type.I32?this.srcReqN=t.Fb().value:t.Mb(i);break;case 9:i==n.Type.I32?this.srcRespN=t.Fb().value:t.Mb(i);break;case 10:i==n.Type.I32?this.srcRespErrN=t.Fb().value:t.Mb(i);break;case 11:i==n.Type.I64?this.srcReqQt=t.g_().value:t.Mb(i);break;case 12:i==n.Type.I64?this.srcRespQt=t.g_().value:t.Mb(i);break;case 13:i==n.Type.I64?this.srcOverQt=t.g_().value:t.Mb(i);break;case 14:i==n.Type.I32?this.srcOtherReqN=t.Fb().value:t.Mb(i);break;case 15:i==n.Type.I32?this.srcOtherRespN=t.Fb().value:t.Mb(i);break;case 16:i==n.Type.I32?this.srcOtherRespErrN=t.Fb().value:t.Mb(i);break;case 17:i==n.Type.I64?this.srcOtherReqQt=t.g_().value:t.Mb(i);break;case 18:i==n.Type.I64?this.srcOtherRespQt=t.g_().value:t.Mb(i);break;case 19:i==n.Type.I64?this.srcOtherOverQt=t.g_().value:t.Mb(i);break;case 20:i==n.Type.I32?this.p2pSubReqN=t.Fb().value:t.Mb(i);break;case 21:i==n.Type.I32?this.p2pSubRespN=t.Fb().value:t.Mb(i);break;case 22:i==n.Type.DOUBLE?this.p2pSubRespPartN=t.E_().value:t.Mb(i);break;case 23:i==n.Type.DOUBLE?this.p2pSubRespErrN=t.E_().value:t.Mb(i);break;case 24:i==n.Type.I32?this.p2pSubRespExpN=t.Fb().value:t.Mb(i);break;case 25:i==n.Type.I64?this.p2pSubReqQt=t.g_().value:t.Mb(i);break;case 26:i==n.Type.I64?this.p2pSubRespQt=t.g_().value:t.Mb(i);break;case 27:i==n.Type.I64?this.p2pDirectQt=t.g_().value:t.Mb(i);break;case 28:i==n.Type.I64?this.p2pRelayQt=t.g_().value:t.Mb(i);break;case 29:i==n.Type.I64?this.p2pNatQt=t.g_().value:t.Mb(i);break;case 30:i==n.Type.I64?this.p2pUdpbQt=t.g_().value:t.Mb(i);break;case 31:i==n.Type.I32?this.fallAgentRespN=t.Fb().value:t.Mb(i);break;case 32:i==n.Type.I32?this.fallAgentPredHitN=t.Fb().value:t.Mb(i);break;case 33:i==n.Type.I32?this.fallAgentFailedRespN=t.Fb().value:t.Mb(i);break;case 34:i==n.Type.I32?this.fallAgentPredMissN=t.Fb().value:t.Mb(i);break;case 35:i==n.Type.I32?this.fallAgentPredPartialHitN=t.Fb().value:t.Mb(i);break;case 36:i==n.Type.I64?this.fallAgenTrafficSuccessQt=t.g_().value:t.Mb(i);break;case 37:i==n.Type.I64?this.fallAgenTrafficFailureQt=t.g_().value:t.Mb(i);break;case 38:i==n.Type.I32?this.p2pAgentPredHitN=t.Fb().value:t.Mb(i);break;case 39:i==n.Type.I32?this.p2pAgentPredMissN=t.Fb().value:t.Mb(i);break;case 40:i==n.Type.I32?this.p2pAgentPredPartialHitN=t.Fb().value:t.Mb(i);break;case 41:i==n.Type.I64?this.p2pAgenTrafficSuccessQt=t.g_().value:t.Mb(i);break;case 42:i==n.Type.I64?this.p2pAgenTrafficFailureQt=t.g_().value:t.Mb(i);break;case 43:i==n.Type.I32?this.respP2pOtherN=t.Fb().value:t.Mb(i);break;case 44:i==n.Type.I32?this.lCacheRespN=t.Fb().value:t.Mb(i);break;case 45:i==n.Type.I64?this.lCacheRespQt=t.g_().value:t.Mb(i);break;case 46:i==n.Type.I64?this.p2pOutSiteLowPrio=t.g_().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.Traffic.prototype.write=function(t){t.Hb("Traffic"),null!==this.reqN&&void 0!==this.reqN&&(t.xb("reqN",n.Type.I32,1),t.Vb(this.reqN),t.Gb()),null!==this.respFallbackN&&void 0!==this.respFallbackN&&(t.xb("respFallbackN",n.Type.DOUBLE,2),t.YC(this.respFallbackN),t.Gb()),null!==this.respFallbackErrN&&void 0!==this.respFallbackErrN&&(t.xb("respFallbackErrN",n.Type.I32,3),t.Vb(this.respFallbackErrN),t.Gb()),null!==this.respP2pN&&void 0!==this.respP2pN&&(t.xb("respP2pN",n.Type.DOUBLE,4),t.YC(this.respP2pN),t.Gb()),null!==this.reqOtherN&&void 0!==this.reqOtherN&&(t.xb("reqOtherN",n.Type.I32,5),t.Vb(this.reqOtherN),t.Gb()),null!==this.respFallbackOtherN&&void 0!==this.respFallbackOtherN&&(t.xb("respFallbackOtherN",n.Type.I32,6),t.Vb(this.respFallbackOtherN),t.Gb()),null!==this.respFallbackOthertErrN&&void 0!==this.respFallbackOthertErrN&&(t.xb("respFallbackOthertErrN",n.Type.I32,7),t.Vb(this.respFallbackOthertErrN),t.Gb()),null!==this.srcReqN&&void 0!==this.srcReqN&&(t.xb("srcReqN",n.Type.I32,8),t.Vb(this.srcReqN),t.Gb()),null!==this.srcRespN&&void 0!==this.srcRespN&&(t.xb("srcRespN",n.Type.I32,9),t.Vb(this.srcRespN),t.Gb()),null!==this.srcRespErrN&&void 0!==this.srcRespErrN&&(t.xb("srcRespErrN",n.Type.I32,10),t.Vb(this.srcRespErrN),t.Gb()),null!==this.srcReqQt&&void 0!==this.srcReqQt&&(t.xb("srcReqQt",n.Type.I64,11),t.KC(this.srcReqQt),t.Gb()),null!==this.srcRespQt&&void 0!==this.srcRespQt&&(t.xb("srcRespQt",n.Type.I64,12),t.KC(this.srcRespQt),t.Gb()),null!==this.srcOverQt&&void 0!==this.srcOverQt&&(t.xb("srcOverQt",n.Type.I64,13),t.KC(this.srcOverQt),t.Gb()),null!==this.srcOtherReqN&&void 0!==this.srcOtherReqN&&(t.xb("srcOtherReqN",n.Type.I32,14),t.Vb(this.srcOtherReqN),t.Gb()),null!==this.srcOtherRespN&&void 0!==this.srcOtherRespN&&(t.xb("srcOtherRespN",n.Type.I32,15),t.Vb(this.srcOtherRespN),t.Gb()),null!==this.srcOtherRespErrN&&void 0!==this.srcOtherRespErrN&&(t.xb("srcOtherRespErrN",n.Type.I32,16),t.Vb(this.srcOtherRespErrN),t.Gb()),null!==this.srcOtherReqQt&&void 0!==this.srcOtherReqQt&&(t.xb("srcOtherReqQt",n.Type.I64,17),t.KC(this.srcOtherReqQt),t.Gb()),null!==this.srcOtherRespQt&&void 0!==this.srcOtherRespQt&&(t.xb("srcOtherRespQt",n.Type.I64,18),t.KC(this.srcOtherRespQt),t.Gb()),null!==this.srcOtherOverQt&&void 0!==this.srcOtherOverQt&&(t.xb("srcOtherOverQt",n.Type.I64,19),t.KC(this.srcOtherOverQt),t.Gb()),null!==this.p2pSubReqN&&void 0!==this.p2pSubReqN&&(t.xb("p2pSubReqN",n.Type.I32,20),t.Vb(this.p2pSubReqN),t.Gb()),null!==this.p2pSubRespN&&void 0!==this.p2pSubRespN&&(t.xb("p2pSubRespN",n.Type.I32,21),t.Vb(this.p2pSubRespN),t.Gb()),null!==this.p2pSubRespPartN&&void 0!==this.p2pSubRespPartN&&(t.xb("p2pSubRespPartN",n.Type.DOUBLE,22),t.YC(this.p2pSubRespPartN),t.Gb()),null!==this.p2pSubRespErrN&&void 0!==this.p2pSubRespErrN&&(t.xb("p2pSubRespErrN",n.Type.DOUBLE,23),t.YC(this.p2pSubRespErrN),t.Gb()),null!==this.p2pSubRespExpN&&void 0!==this.p2pSubRespExpN&&(t.xb("p2pSubRespExpN",n.Type.I32,24),t.Vb(this.p2pSubRespExpN),t.Gb()),null!==this.p2pSubReqQt&&void 0!==this.p2pSubReqQt&&(t.xb("p2pSubReqQt",n.Type.I64,25),t.KC(this.p2pSubReqQt),t.Gb()),null!==this.p2pSubRespQt&&void 0!==this.p2pSubRespQt&&(t.xb("p2pSubRespQt",n.Type.I64,26),t.KC(this.p2pSubRespQt),t.Gb()),null!==this.p2pDirectQt&&void 0!==this.p2pDirectQt&&(t.xb("p2pDirectQt",n.Type.I64,27),t.KC(this.p2pDirectQt),t.Gb()),null!==this.p2pRelayQt&&void 0!==this.p2pRelayQt&&(t.xb("p2pRelayQt",n.Type.I64,28),t.KC(this.p2pRelayQt),t.Gb()),null!==this.p2pNatQt&&void 0!==this.p2pNatQt&&(t.xb("p2pNatQt",n.Type.I64,29),t.KC(this.p2pNatQt),t.Gb()),null!==this.p2pUdpbQt&&void 0!==this.p2pUdpbQt&&(t.xb("p2pUdpbQt",n.Type.I64,30),t.KC(this.p2pUdpbQt),t.Gb()),null!==this.fallAgentRespN&&void 0!==this.fallAgentRespN&&(t.xb("fallAgentRespN",n.Type.I32,31),t.Vb(this.fallAgentRespN),t.Gb()),null!==this.fallAgentPredHitN&&void 0!==this.fallAgentPredHitN&&(t.xb("fallAgentPredHitN",n.Type.I32,32),t.Vb(this.fallAgentPredHitN),t.Gb()),null!==this.fallAgentFailedRespN&&void 0!==this.fallAgentFailedRespN&&(t.xb("fallAgentFailedRespN",n.Type.I32,33),t.Vb(this.fallAgentFailedRespN),t.Gb()),null!==this.fallAgentPredMissN&&void 0!==this.fallAgentPredMissN&&(t.xb("fallAgentPredMissN",n.Type.I32,34),t.Vb(this.fallAgentPredMissN),t.Gb()),null!==this.fallAgentPredPartialHitN&&void 0!==this.fallAgentPredPartialHitN&&(t.xb("fallAgentPredPartialHitN",n.Type.I32,35),t.Vb(this.fallAgentPredPartialHitN),t.Gb()),null!==this.fallAgenTrafficSuccessQt&&void 0!==this.fallAgenTrafficSuccessQt&&(t.xb("fallAgenTrafficSuccessQt",n.Type.I64,36),t.KC(this.fallAgenTrafficSuccessQt),t.Gb()),null!==this.fallAgenTrafficFailureQt&&void 0!==this.fallAgenTrafficFailureQt&&(t.xb("fallAgenTrafficFailureQt",n.Type.I64,37),t.KC(this.fallAgenTrafficFailureQt),t.Gb()),null!==this.p2pAgentPredHitN&&void 0!==this.p2pAgentPredHitN&&(t.xb("p2pAgentPredHitN",n.Type.I32,38),t.Vb(this.p2pAgentPredHitN),t.Gb()),null!==this.p2pAgentPredMissN&&void 0!==this.p2pAgentPredMissN&&(t.xb("p2pAgentPredMissN",n.Type.I32,39),t.Vb(this.p2pAgentPredMissN),t.Gb()),null!==this.p2pAgentPredPartialHitN&&void 0!==this.p2pAgentPredPartialHitN&&(t.xb("p2pAgentPredPartialHitN",n.Type.I32,40),t.Vb(this.p2pAgentPredPartialHitN),t.Gb()),null!==this.p2pAgenTrafficSuccessQt&&void 0!==this.p2pAgenTrafficSuccessQt&&(t.xb("p2pAgenTrafficSuccessQt",n.Type.I64,41),t.KC(this.p2pAgenTrafficSuccessQt),t.Gb()),null!==this.p2pAgenTrafficFailureQt&&void 0!==this.p2pAgenTrafficFailureQt&&(t.xb("p2pAgenTrafficFailureQt",n.Type.I64,42),t.KC(this.p2pAgenTrafficFailureQt),t.Gb()),null!==this.respP2pOtherN&&void 0!==this.respP2pOtherN&&(t.xb("respP2pOtherN",n.Type.I32,43),t.Vb(this.respP2pOtherN),t.Gb()),null!==this.lCacheRespN&&void 0!==this.lCacheRespN&&(t.xb("lCacheRespN",n.Type.I32,44),t.Vb(this.lCacheRespN),t.Gb()),null!==this.lCacheRespQt&&void 0!==this.lCacheRespQt&&(t.xb("lCacheRespQt",n.Type.I64,45),t.KC(this.lCacheRespQt),t.Gb()),null!==this.p2pOutSiteLowPrio&&void 0!==this.p2pOutSiteLowPrio&&(t.xb("p2pOutSiteLowPrio",n.Type.I64,46),t.KC(this.p2pOutSiteLowPrio),t.Gb()),t.jb(),t.Qb()},hive.snapshots.Metrics=function(t){this.upBW=null,this.downBW=null,this.memN=null,this.prtInN=null,this.prtOutN=null,this.initVideoBufQt=null,this.videoAvgBufQt=null,this.videoBufQt=null,this.videoBufN=null,this.initAudioBufQt=null,this.audioAvgBufQt=null,this.audioBufQt=null,this.audioBufN=null,this.bitrateUpN=null,this.bitrateDwnN=null,this.delay=null,this.delayEnforcement=null,this.lookupReqEstablished=null,this.lookupReqAccept=null,this.fallbackAvgTp=null,this.srcThroughput=null,this.diskReadTimeout=null,this.diskReadRate=null,this.diskStoreRate=null,this.diskRemoveRate=null,this.diskCacheSize=null,this.clientBufferMs=null,this.lookupTotal=null,this.lookupNotFound=null,this.lookupFailed=null,this.lookupLatency=null,this.trackerFailed=null,this.trackerLatency=null,this.snapshotFailed=null,this.snapshotLatency=null,this._K=null,t&&(void 0!==t.upBW&&null!==t.upBW&&(this.upBW=t.upBW),void 0!==t.downBW&&null!==t.downBW&&(this.downBW=t.downBW),void 0!==t.memN&&null!==t.memN&&(this.memN=t.memN),void 0!==t.prtInN&&null!==t.prtInN&&(this.prtInN=t.prtInN),void 0!==t.prtOutN&&null!==t.prtOutN&&(this.prtOutN=t.prtOutN),void 0!==t.initVideoBufQt&&null!==t.initVideoBufQt&&(this.initVideoBufQt=t.initVideoBufQt),void 0!==t.videoAvgBufQt&&null!==t.videoAvgBufQt&&(this.videoAvgBufQt=t.videoAvgBufQt),void 0!==t.videoBufQt&&null!==t.videoBufQt&&(this.videoBufQt=t.videoBufQt),void 0!==t.videoBufN&&null!==t.videoBufN&&(this.videoBufN=t.videoBufN),void 0!==t.initAudioBufQt&&null!==t.initAudioBufQt&&(this.initAudioBufQt=t.initAudioBufQt),void 0!==t.audioAvgBufQt&&null!==t.audioAvgBufQt&&(this.audioAvgBufQt=t.audioAvgBufQt),void 0!==t.audioBufQt&&null!==t.audioBufQt&&(this.audioBufQt=t.audioBufQt),void 0!==t.audioBufN&&null!==t.audioBufN&&(this.audioBufN=t.audioBufN),void 0!==t.bitrateUpN&&null!==t.bitrateUpN&&(this.bitrateUpN=t.bitrateUpN),void 0!==t.bitrateDwnN&&null!==t.bitrateDwnN&&(this.bitrateDwnN=t.bitrateDwnN),void 0!==t.delay&&null!==t.delay&&(this.delay=t.delay),void 0!==t.delayEnforcement&&null!==t.delayEnforcement&&(this.delayEnforcement=t.delayEnforcement),void 0!==t.lookupReqEstablished&&null!==t.lookupReqEstablished&&(this.lookupReqEstablished=t.lookupReqEstablished),void 0!==t.lookupReqAccept&&null!==t.lookupReqAccept&&(this.lookupReqAccept=t.lookupReqAccept),void 0!==t.fallbackAvgTp&&null!==t.fallbackAvgTp&&(this.fallbackAvgTp=t.fallbackAvgTp),void 0!==t.srcThroughput&&null!==t.srcThroughput&&(this.srcThroughput=t.srcThroughput),void 0!==t.diskReadTimeout&&null!==t.diskReadTimeout&&(this.diskReadTimeout=t.diskReadTimeout),void 0!==t.diskReadRate&&null!==t.diskReadRate&&(this.diskReadRate=t.diskReadRate),void 0!==t.diskStoreRate&&null!==t.diskStoreRate&&(this.diskStoreRate=t.diskStoreRate),void 0!==t.diskRemoveRate&&null!==t.diskRemoveRate&&(this.diskRemoveRate=t.diskRemoveRate),void 0!==t.diskCacheSize&&null!==t.diskCacheSize&&(this.diskCacheSize=t.diskCacheSize),void 0!==t.clientBufferMs&&null!==t.clientBufferMs&&(this.clientBufferMs=t.clientBufferMs),void 0!==t.lookupTotal&&null!==t.lookupTotal&&(this.lookupTotal=t.lookupTotal),void 0!==t.lookupNotFound&&null!==t.lookupNotFound&&(this.lookupNotFound=t.lookupNotFound),void 0!==t.lookupFailed&&null!==t.lookupFailed&&(this.lookupFailed=t.lookupFailed),void 0!==t.lookupLatency&&null!==t.lookupLatency&&(this.lookupLatency=t.lookupLatency),void 0!==t.trackerFailed&&null!==t.trackerFailed&&(this.trackerFailed=t.trackerFailed),void 0!==t.trackerLatency&&null!==t.trackerLatency&&(this.trackerLatency=t.trackerLatency),void 0!==t.snapshotFailed&&null!==t.snapshotFailed&&(this.snapshotFailed=t.snapshotFailed),void 0!==t.snapshotLatency&&null!==t.snapshotLatency&&(this.snapshotLatency=t.snapshotLatency),void 0!==t._K&&null!==t._K&&(this._K=t._K))},hive.snapshots.Metrics.prototype={},hive.snapshots.Metrics.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.upBW=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.I32?this.downBW=t.Fb().value:t.Mb(i);break;case 3:i==n.Type.I32?this.memN=t.Fb().value:t.Mb(i);break;case 4:i==n.Type.I32?this.prtInN=t.Fb().value:t.Mb(i);break;case 5:i==n.Type.I32?this.prtOutN=t.Fb().value:t.Mb(i);break;case 6:i==n.Type.I64?this.initVideoBufQt=t.g_().value:t.Mb(i);break;case 7:i==n.Type.DOUBLE?this.videoAvgBufQt=t.E_().value:t.Mb(i);break;case 8:i==n.Type.I64?this.videoBufQt=t.g_().value:t.Mb(i);break;case 9:i==n.Type.I32?this.videoBufN=t.Fb().value:t.Mb(i);break;case 10:i==n.Type.I32?this.initAudioBufQt=t.Fb().value:t.Mb(i);break;case 11:i==n.Type.DOUBLE?this.audioAvgBufQt=t.E_().value:t.Mb(i);break;case 12:i==n.Type.I64?this.audioBufQt=t.g_().value:t.Mb(i);break;case 13:i==n.Type.I32?this.audioBufN=t.Fb().value:t.Mb(i);break;case 14:i==n.Type.I32?this.bitrateUpN=t.Fb().value:t.Mb(i);break;case 15:i==n.Type.I32?this.bitrateDwnN=t.Fb().value:t.Mb(i);break;case 16:i==n.Type.I32?this.delay=t.Fb().value:t.Mb(i);break;case 17:i==n.Type.I32?this.delayEnforcement=t.Fb().value:t.Mb(i);break;case 18:i==n.Type.I32?this.lookupReqEstablished=t.Fb().value:t.Mb(i);break;case 19:i==n.Type.I32?this.lookupReqAccept=t.Fb().value:t.Mb(i);break;case 20:i==n.Type.DOUBLE?this.fallbackAvgTp=t.E_().value:t.Mb(i);break;case 21:i==n.Type.DOUBLE?this.srcThroughput=t.E_().value:t.Mb(i);break;case 22:i==n.Type.I32?this.diskReadTimeout=t.Fb().value:t.Mb(i);break;case 23:i==n.Type.DOUBLE?this.diskReadRate=t.E_().value:t.Mb(i);break;case 24:i==n.Type.DOUBLE?this.diskStoreRate=t.E_().value:t.Mb(i);break;case 25:i==n.Type.DOUBLE?this.diskRemoveRate=t.E_().value:t.Mb(i);break;case 26:i==n.Type.I64?this.diskCacheSize=t.g_().value:t.Mb(i);break;case 27:i==n.Type.I32?this.clientBufferMs=t.Fb().value:t.Mb(i);break;case 28:i==n.Type.I32?this.lookupTotal=t.Fb().value:t.Mb(i);break;case 29:i==n.Type.I32?this.lookupNotFound=t.Fb().value:t.Mb(i);break;case 30:i==n.Type.I32?this.lookupFailed=t.Fb().value:t.Mb(i);break;case 31:i==n.Type.I32?this.lookupLatency=t.Fb().value:t.Mb(i);break;case 32:i==n.Type.I32?this.trackerFailed=t.Fb().value:t.Mb(i);break;case 33:i==n.Type.I32?this.trackerLatency=t.Fb().value:t.Mb(i);break;case 34:i==n.Type.I32?this.snapshotFailed=t.Fb().value:t.Mb(i);break;case 35:i==n.Type.I32?this.snapshotLatency=t.Fb().value:t.Mb(i);break;case 36:i==n.Type.I32?this._K=t.Fb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.Metrics.prototype.write=function(t){t.Hb("Metrics"),null!==this.upBW&&void 0!==this.upBW&&(t.xb("upBW",n.Type.I32,1),t.Vb(this.upBW),t.Gb()),null!==this.downBW&&void 0!==this.downBW&&(t.xb("downBW",n.Type.I32,2),t.Vb(this.downBW),t.Gb()),null!==this.memN&&void 0!==this.memN&&(t.xb("memN",n.Type.I32,3),t.Vb(this.memN),t.Gb()),null!==this.prtInN&&void 0!==this.prtInN&&(t.xb("prtInN",n.Type.I32,4),t.Vb(this.prtInN),t.Gb()),null!==this.prtOutN&&void 0!==this.prtOutN&&(t.xb("prtOutN",n.Type.I32,5),t.Vb(this.prtOutN),t.Gb()),null!==this.initVideoBufQt&&void 0!==this.initVideoBufQt&&(t.xb("initVideoBufQt",n.Type.I64,6),t.KC(this.initVideoBufQt),t.Gb()),null!==this.videoAvgBufQt&&void 0!==this.videoAvgBufQt&&(t.xb("videoAvgBufQt",n.Type.DOUBLE,7),t.YC(this.videoAvgBufQt),t.Gb()),null!==this.videoBufQt&&void 0!==this.videoBufQt&&(t.xb("videoBufQt",n.Type.I64,8),t.KC(this.videoBufQt),t.Gb()),null!==this.videoBufN&&void 0!==this.videoBufN&&(t.xb("videoBufN",n.Type.I32,9),t.Vb(this.videoBufN),t.Gb()),null!==this.initAudioBufQt&&void 0!==this.initAudioBufQt&&(t.xb("initAudioBufQt",n.Type.I32,10),t.Vb(this.initAudioBufQt),t.Gb()),null!==this.audioAvgBufQt&&void 0!==this.audioAvgBufQt&&(t.xb("audioAvgBufQt",n.Type.DOUBLE,11),t.YC(this.audioAvgBufQt),t.Gb()),null!==this.audioBufQt&&void 0!==this.audioBufQt&&(t.xb("audioBufQt",n.Type.I64,12),t.KC(this.audioBufQt),t.Gb()),null!==this.audioBufN&&void 0!==this.audioBufN&&(t.xb("audioBufN",n.Type.I32,13),t.Vb(this.audioBufN),t.Gb()),null!==this.bitrateUpN&&void 0!==this.bitrateUpN&&(t.xb("bitrateUpN",n.Type.I32,14),t.Vb(this.bitrateUpN),t.Gb()),null!==this.bitrateDwnN&&void 0!==this.bitrateDwnN&&(t.xb("bitrateDwnN",n.Type.I32,15),t.Vb(this.bitrateDwnN),t.Gb()),null!==this.delay&&void 0!==this.delay&&(t.xb("delay",n.Type.I32,16),t.Vb(this.delay),t.Gb()),null!==this.delayEnforcement&&void 0!==this.delayEnforcement&&(t.xb("delayEnforcement",n.Type.I32,17),t.Vb(this.delayEnforcement),t.Gb()),null!==this.lookupReqEstablished&&void 0!==this.lookupReqEstablished&&(t.xb("lookupReqEstablished",n.Type.I32,18),t.Vb(this.lookupReqEstablished),t.Gb()),null!==this.lookupReqAccept&&void 0!==this.lookupReqAccept&&(t.xb("lookupReqAccept",n.Type.I32,19),t.Vb(this.lookupReqAccept),t.Gb()),null!==this.fallbackAvgTp&&void 0!==this.fallbackAvgTp&&(t.xb("fallbackAvgTp",n.Type.DOUBLE,20),t.YC(this.fallbackAvgTp),t.Gb()),null!==this.srcThroughput&&void 0!==this.srcThroughput&&(t.xb("srcThroughput",n.Type.DOUBLE,21),t.YC(this.srcThroughput),t.Gb()),null!==this.diskReadTimeout&&void 0!==this.diskReadTimeout&&(t.xb("diskReadTimeout",n.Type.I32,22),t.Vb(this.diskReadTimeout),t.Gb()),null!==this.diskReadRate&&void 0!==this.diskReadRate&&(t.xb("diskReadRate",n.Type.DOUBLE,23),t.YC(this.diskReadRate),t.Gb()),null!==this.diskStoreRate&&void 0!==this.diskStoreRate&&(t.xb("diskStoreRate",n.Type.DOUBLE,24),t.YC(this.diskStoreRate),t.Gb()),null!==this.diskRemoveRate&&void 0!==this.diskRemoveRate&&(t.xb("diskRemoveRate",n.Type.DOUBLE,25),t.YC(this.diskRemoveRate),t.Gb()),null!==this.diskCacheSize&&void 0!==this.diskCacheSize&&(t.xb("diskCacheSize",n.Type.I64,26),t.KC(this.diskCacheSize),t.Gb()),null!==this.clientBufferMs&&void 0!==this.clientBufferMs&&(t.xb("clientBufferMs",n.Type.I32,27),t.Vb(this.clientBufferMs),t.Gb()),null!==this.lookupTotal&&void 0!==this.lookupTotal&&(t.xb("lookupTotal",n.Type.I32,28),t.Vb(this.lookupTotal),t.Gb()),null!==this.lookupNotFound&&void 0!==this.lookupNotFound&&(t.xb("lookupNotFound",n.Type.I32,29),t.Vb(this.lookupNotFound),t.Gb()),null!==this.lookupFailed&&void 0!==this.lookupFailed&&(t.xb("lookupFailed",n.Type.I32,30),t.Vb(this.lookupFailed),t.Gb()),null!==this.lookupLatency&&void 0!==this.lookupLatency&&(t.xb("lookupLatency",n.Type.I32,31),t.Vb(this.lookupLatency),t.Gb()),null!==this.trackerFailed&&void 0!==this.trackerFailed&&(t.xb("trackerFailed",n.Type.I32,32),t.Vb(this.trackerFailed),t.Gb()),null!==this.trackerLatency&&void 0!==this.trackerLatency&&(t.xb("trackerLatency",n.Type.I32,33),t.Vb(this.trackerLatency),t.Gb()),null!==this.snapshotFailed&&void 0!==this.snapshotFailed&&(t.xb("snapshotFailed",n.Type.I32,34),t.Vb(this.snapshotFailed),t.Gb()),null!==this.snapshotLatency&&void 0!==this.snapshotLatency&&(t.xb("snapshotLatency",n.Type.I32,35),t.Vb(this.snapshotLatency),t.Gb()),null!==this._K&&void 0!==this._K&&(t.xb("sourceLatency",n.Type.I32,36),t.Vb(this._K),t.Gb()),t.jb(),t.Qb()},hive.snapshots.PartnerTraffic=function(t){this.p2pSuccReq=null,this.p2pFailReq=null,this.p2pPartReq=null,this.p2pSuccReceived=null,this.p2pSuccReceivedLow=null,this.p2pFailReceived=null,this.p2pSuccResp=null,this.p2pFailResp=null,this.p2pPartResp=null,this.p2pSuccSent=null,this.p2pSuccSentLow=null,this.p2pFailSent=null,t&&(void 0!==t.p2pSuccReq&&null!==t.p2pSuccReq&&(this.p2pSuccReq=t.p2pSuccReq),void 0!==t.p2pFailReq&&null!==t.p2pFailReq&&(this.p2pFailReq=t.p2pFailReq),void 0!==t.p2pPartReq&&null!==t.p2pPartReq&&(this.p2pPartReq=t.p2pPartReq),void 0!==t.p2pSuccReceived&&null!==t.p2pSuccReceived&&(this.p2pSuccReceived=t.p2pSuccReceived),void 0!==t.p2pSuccReceivedLow&&null!==t.p2pSuccReceivedLow&&(this.p2pSuccReceivedLow=t.p2pSuccReceivedLow),void 0!==t.p2pFailReceived&&null!==t.p2pFailReceived&&(this.p2pFailReceived=t.p2pFailReceived),void 0!==t.p2pSuccResp&&null!==t.p2pSuccResp&&(this.p2pSuccResp=t.p2pSuccResp),void 0!==t.p2pFailResp&&null!==t.p2pFailResp&&(this.p2pFailResp=t.p2pFailResp),void 0!==t.p2pPartResp&&null!==t.p2pPartResp&&(this.p2pPartResp=t.p2pPartResp),void 0!==t.p2pSuccSent&&null!==t.p2pSuccSent&&(this.p2pSuccSent=t.p2pSuccSent),void 0!==t.p2pSuccSentLow&&null!==t.p2pSuccSentLow&&(this.p2pSuccSentLow=t.p2pSuccSentLow),void 0!==t.p2pFailSent&&null!==t.p2pFailSent&&(this.p2pFailSent=t.p2pFailSent))},hive.snapshots.PartnerTraffic.prototype={},hive.snapshots.PartnerTraffic.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I64?this.p2pSuccReq=t.g_().value:t.Mb(i);break;case 2:i==n.Type.I64?this.p2pFailReq=t.g_().value:t.Mb(i);break;case 3:i==n.Type.I64?this.p2pPartReq=t.g_().value:t.Mb(i);break;case 4:i==n.Type.I64?this.p2pSuccReceived=t.g_().value:t.Mb(i);break;case 5:i==n.Type.I64?this.p2pSuccReceivedLow=t.g_().value:t.Mb(i);break;case 10:i==n.Type.I64?this.p2pFailReceived=t.g_().value:t.Mb(i);break;case 6:i==n.Type.I64?this.p2pSuccResp=t.g_().value:t.Mb(i);break;case 11:i==n.Type.I64?this.p2pFailResp=t.g_().value:t.Mb(i);break;case 7:i==n.Type.I64?this.p2pPartResp=t.g_().value:t.Mb(i);break;case 8:i==n.Type.I64?this.p2pSuccSent=t.g_().value:t.Mb(i);break;case 9:i==n.Type.I64?this.p2pSuccSentLow=t.g_().value:t.Mb(i);break;case 12:i==n.Type.I64?this.p2pFailSent=t.g_().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.PartnerTraffic.prototype.write=function(t){t.Hb("PartnerTraffic"),null!==this.p2pSuccReq&&void 0!==this.p2pSuccReq&&(t.xb("p2pSuccReq",n.Type.I64,1),t.KC(this.p2pSuccReq),t.Gb()),null!==this.p2pFailReq&&void 0!==this.p2pFailReq&&(t.xb("p2pFailReq",n.Type.I64,2),t.KC(this.p2pFailReq),t.Gb()),null!==this.p2pPartReq&&void 0!==this.p2pPartReq&&(t.xb("p2pPartReq",n.Type.I64,3),t.KC(this.p2pPartReq),t.Gb()),null!==this.p2pSuccReceived&&void 0!==this.p2pSuccReceived&&(t.xb("p2pSuccReceived",n.Type.I64,4),t.KC(this.p2pSuccReceived),t.Gb()),null!==this.p2pSuccReceivedLow&&void 0!==this.p2pSuccReceivedLow&&(t.xb("p2pSuccReceivedLow",n.Type.I64,5),t.KC(this.p2pSuccReceivedLow),t.Gb()),null!==this.p2pFailReceived&&void 0!==this.p2pFailReceived&&(t.xb("p2pFailReceived",n.Type.I64,10),t.KC(this.p2pFailReceived),t.Gb()),null!==this.p2pSuccResp&&void 0!==this.p2pSuccResp&&(t.xb("p2pSuccResp",n.Type.I64,6),t.KC(this.p2pSuccResp),t.Gb()),null!==this.p2pFailResp&&void 0!==this.p2pFailResp&&(t.xb("p2pFailResp",n.Type.I64,11),t.KC(this.p2pFailResp),t.Gb()),null!==this.p2pPartResp&&void 0!==this.p2pPartResp&&(t.xb("p2pPartResp",n.Type.I64,7),t.KC(this.p2pPartResp),t.Gb()),null!==this.p2pSuccSent&&void 0!==this.p2pSuccSent&&(t.xb("p2pSuccSent",n.Type.I64,8),t.KC(this.p2pSuccSent),t.Gb()),null!==this.p2pSuccSentLow&&void 0!==this.p2pSuccSentLow&&(t.xb("p2pSuccSentLow",n.Type.I64,9),t.KC(this.p2pSuccSentLow),t.Gb()),null!==this.p2pFailSent&&void 0!==this.p2pFailSent&&(t.xb("p2pFailSent",n.Type.I64,12),t.KC(this.p2pFailSent),t.Gb()),t.jb(),t.Qb()},hive.snapshots.PartnerMetrics=function(t){this.rateReceived=null,this.rateSent=null,this.handshakeDelay=null,t&&(void 0!==t.rateReceived&&null!==t.rateReceived&&(this.rateReceived=t.rateReceived),void 0!==t.rateSent&&null!==t.rateSent&&(this.rateSent=t.rateSent),void 0!==t.handshakeDelay&&null!==t.handshakeDelay&&(this.handshakeDelay=t.handshakeDelay))},hive.snapshots.PartnerMetrics.prototype={},hive.snapshots.PartnerMetrics.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.DOUBLE?this.rateReceived=t.E_().value:t.Mb(i);break;case 2:i==n.Type.DOUBLE?this.rateSent=t.E_().value:t.Mb(i);break;case 3:i==n.Type.I64?this.handshakeDelay=t.g_().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.PartnerMetrics.prototype.write=function(t){t.Hb("PartnerMetrics"),null!==this.rateReceived&&void 0!==this.rateReceived&&(t.xb("rateReceived",n.Type.DOUBLE,1),t.YC(this.rateReceived),t.Gb()),null!==this.rateSent&&void 0!==this.rateSent&&(t.xb("rateSent",n.Type.DOUBLE,2),t.YC(this.rateSent),t.Gb()),null!==this.handshakeDelay&&void 0!==this.handshakeDelay&&(t.xb("handshakeDelay",n.Type.I64,3),t.KC(this.handshakeDelay),t.Gb()),t.jb(),t.Qb()},hive.snapshots.ConnectivityInfo=function(t){this.upBW=null,this.downBW=null,this.externalAs=null,this.internalAs=null,this.publicIp=null,this.privateIp=null,t&&(void 0!==t.upBW&&null!==t.upBW&&(this.upBW=t.upBW),void 0!==t.downBW&&null!==t.downBW&&(this.downBW=t.downBW),void 0!==t.externalAs&&null!==t.externalAs&&(this.externalAs=t.externalAs),void 0!==t.internalAs&&null!==t.internalAs&&(this.internalAs=t.internalAs),void 0!==t.publicIp&&null!==t.publicIp&&(this.publicIp=t.publicIp),void 0!==t.privateIp&&null!==t.privateIp&&(this.privateIp=t.privateIp))},hive.snapshots.ConnectivityInfo.prototype={},hive.snapshots.ConnectivityInfo.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.upBW=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.I32?this.downBW=t.Fb().value:t.Mb(i);break;case 3:i==n.Type.I32?this.externalAs=t.Fb().value:t.Mb(i);break;case 4:i==n.Type.I32?this.internalAs=t.Fb().value:t.Mb(i);break;case 5:i==n.Type.STRING?this.publicIp=t.Lb().value:t.Mb(i);break;case 6:i==n.Type.STRING?this.privateIp=t.Lb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.ConnectivityInfo.prototype.write=function(t){t.Hb("ConnectivityInfo"),null!==this.upBW&&void 0!==this.upBW&&(t.xb("upBW",n.Type.I32,1),t.Vb(this.upBW),t.Gb()),null!==this.downBW&&void 0!==this.downBW&&(t.xb("downBW",n.Type.I32,2),t.Vb(this.downBW),t.Gb()),null!==this.externalAs&&void 0!==this.externalAs&&(t.xb("externalAs",n.Type.I32,3),t.Vb(this.externalAs),t.Gb()),null!==this.internalAs&&void 0!==this.internalAs&&(t.xb("internalAs",n.Type.I32,4),t.Vb(this.internalAs),t.Gb()),null!==this.publicIp&&void 0!==this.publicIp&&(t.xb("publicIp",n.Type.STRING,5),t.qb(this.publicIp),t.Gb()),null!==this.privateIp&&void 0!==this.privateIp&&(t.xb("privateIp",n.Type.STRING,6),t.qb(this.privateIp),t.Gb()),t.jb(),t.Qb()},hive.snapshots.Partner=function(t){this.connInfo=null,this.traffic=null,this.metrics=null,this.inPart=null,this.outPart=null,this.udp=null,t&&(void 0!==t.connInfo&&null!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.traffic&&null!==t.traffic&&(this.traffic=t.traffic),void 0!==t.metrics&&null!==t.metrics&&(this.metrics=t.metrics),void 0!==t.inPart&&null!==t.inPart&&(this.inPart=t.inPart),void 0!==t.outPart&&null!==t.outPart&&(this.outPart=t.outPart),void 0!==t.udp&&null!==t.udp&&(this.udp=t.udp))},hive.snapshots.Partner.prototype={},hive.snapshots.Partner.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.STRUCT?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.Mb(i);break;case 2:i==n.Type.STRUCT?(this.traffic=new hive.snapshots.PartnerTraffic,this.traffic.read(t)):t.Mb(i);break;case 3:i==n.Type.STRUCT?(this.metrics=new hive.snapshots.PartnerMetrics,this.metrics.read(t)):t.Mb(i);break;case 4:i==n.Type.BOOL?this.inPart=t.p_().value:t.Mb(i);break;case 5:i==n.Type.BOOL?this.outPart=t.p_().value:t.Mb(i);break;case 6:i==n.Type.BOOL?this.udp=t.p_().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.Partner.prototype.write=function(t){t.Hb("Partner"),null!==this.connInfo&&void 0!==this.connInfo&&(t.xb("connInfo",n.Type.STRUCT,1),this.connInfo.write(t),t.Gb()),null!==this.traffic&&void 0!==this.traffic&&(t.xb("traffic",n.Type.STRUCT,2),this.traffic.write(t),t.Gb()),null!==this.metrics&&void 0!==this.metrics&&(t.xb("metrics",n.Type.STRUCT,3),this.metrics.write(t),t.Gb()),null!==this.inPart&&void 0!==this.inPart&&(t.xb("inPart",n.Type.BOOL,4),t.VC(this.inPart),t.Gb()),null!==this.outPart&&void 0!==this.outPart&&(t.xb("outPart",n.Type.BOOL,5),t.VC(this.outPart),t.Gb()),null!==this.udp&&void 0!==this.udp&&(t.xb("udp",n.Type.BOOL,6),t.VC(this.udp),t.Gb()),t.jb(),t.Qb()},hive.snapshots.StreamInfo=function(t){this.url=null,this.streamType=null,this.streamProtocol=null,t&&(void 0!==t.url&&null!==t.url&&(this.url=t.url),void 0!==t.streamType&&null!==t.streamType&&(this.streamType=t.streamType),void 0!==t.streamProtocol&&null!==t.streamProtocol&&(this.streamProtocol=t.streamProtocol))},hive.snapshots.StreamInfo.prototype={},hive.snapshots.StreamInfo.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.STRING?this.url=t.Lb().value:t.Mb(i);break;case 2:i==n.Type.I32?this.streamType=t.Fb().value:t.Mb(i);break;case 3:i==n.Type.I32?this.streamProtocol=t.Fb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.StreamInfo.prototype.write=function(t){t.Hb("StreamInfo"),null!==this.url&&void 0!==this.url&&(t.xb("url",n.Type.STRING,1),t.qb(this.url),t.Gb()),null!==this.streamType&&void 0!==this.streamType&&(t.xb("streamType",n.Type.I32,2),t.Vb(this.streamType),t.Gb()),null!==this.streamProtocol&&void 0!==this.streamProtocol&&(t.xb("streamProtocol",n.Type.I32,3),t.Vb(this.streamProtocol),t.Gb()),t.jb(),t.Qb()},hive.snapshots.ClientInfo=function(t){this.clientType=null,this.majorVersion=null,this.minorVersion=null,this.patchVersion=null,t&&(void 0!==t.clientType&&null!==t.clientType&&(this.clientType=t.clientType),void 0!==t.majorVersion&&null!==t.majorVersion&&(this.majorVersion=t.majorVersion),void 0!==t.minorVersion&&null!==t.minorVersion&&(this.minorVersion=t.minorVersion),void 0!==t.patchVersion&&null!==t.patchVersion&&(this.patchVersion=t.patchVersion))},hive.snapshots.ClientInfo.prototype={},hive.snapshots.ClientInfo.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.clientType=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.BYTE?this.majorVersion=t.d_().value:t.Mb(i);break;case 3:i==n.Type.BYTE?this.minorVersion=t.d_().value:t.Mb(i);break;case 4:i==n.Type.I16?this.patchVersion=t.f_().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.ClientInfo.prototype.write=function(t){t.Hb("ClientInfo"),null!==this.clientType&&void 0!==this.clientType&&(t.xb("clientType",n.Type.I32,1),t.Vb(this.clientType),t.Gb()),null!==this.majorVersion&&void 0!==this.majorVersion&&(t.xb("majorVersion",n.Type.BYTE,2),t.jC(this.majorVersion),t.Gb()),null!==this.minorVersion&&void 0!==this.minorVersion&&(t.xb("minorVersion",n.Type.BYTE,3),t.jC(this.minorVersion),t.Gb()),null!==this.patchVersion&&void 0!==this.patchVersion&&(t.xb("patchVersion",n.Type.I16,4),t.QC(this.patchVersion),t.Gb()),t.jb(),t.Qb()},hive.snapshots.AgentInfo=function(t){this.firstTierBitrates=null,this.secondTierBitrates=null,t&&(void 0!==t.firstTierBitrates&&null!==t.firstTierBitrates&&(this.firstTierBitrates=t.firstTierBitrates),void 0!==t.secondTierBitrates&&null!==t.secondTierBitrates&&(this.secondTierBitrates=t.secondTierBitrates))},hive.snapshots.AgentInfo.prototype={},hive.snapshots.AgentInfo.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:if(i==n.Type.SET){var o,s;this.firstTierBitrates=[],(o=t.u_()).h_,s=o.size;for(var a=0;a<s;++a){var u;u=t.Fb().value,this.firstTierBitrates.push(u)}t.l_()}else t.Mb(i);break;case 2:if(i==n.Type.SET){var h,c;this.secondTierBitrates=[],(h=t.u_()).h_,c=h.size;for(var l=0;l<c;++l){var f;f=t.Fb().value,this.secondTierBitrates.push(f)}t.l_()}else t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.AgentInfo.prototype.write=function(t){if(t.Hb("AgentInfo"),null!==this.firstTierBitrates&&void 0!==this.firstTierBitrates){for(var e in t.xb("firstTierBitrates",n.Type.SET,1),t.qC(n.Type.I32,this.firstTierBitrates.length),this.firstTierBitrates)this.firstTierBitrates.hasOwnProperty(e)&&(e=this.firstTierBitrates[e],t.Vb(e));t.GC(),t.Gb()}if(null!==this.secondTierBitrates&&void 0!==this.secondTierBitrates){for(var i in t.xb("secondTierBitrates",n.Type.SET,2),t.qC(n.Type.I32,this.secondTierBitrates.length),this.secondTierBitrates)this.secondTierBitrates.hasOwnProperty(i)&&(i=this.secondTierBitrates[i],t.Vb(i));t.GC(),t.Gb()}t.jb(),t.Qb()},hive.snapshots.TrafficKey=function(t){this.bitrate=null,this.AS=null,this.partnerGuid=null,t&&(void 0!==t.bitrate&&null!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.AS&&null!==t.AS&&(this.AS=t.AS),void 0!==t.partnerGuid&&null!==t.partnerGuid&&(this.partnerGuid=t.partnerGuid))},hive.snapshots.TrafficKey.prototype={},hive.snapshots.TrafficKey.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.bitrate=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.I32?this.AS=t.Fb().value:t.Mb(i);break;case 3:i==n.Type.STRING?this.partnerGuid=t.Lb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.TrafficKey.prototype.write=function(t){t.Hb("TrafficKey"),null!==this.bitrate&&void 0!==this.bitrate&&(t.xb("bitrate",n.Type.I32,1),t.Vb(this.bitrate),t.Gb()),null!==this.AS&&void 0!==this.AS&&(t.xb("AS",n.Type.I32,2),t.Vb(this.AS),t.Gb()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(t.xb("partnerGuid",n.Type.STRING,3),t.qb(this.partnerGuid),t.Gb()),t.jb(),t.Qb()},hive.snapshots.PartnerKey=function(t){this.bitrate=null,this.AS=null,this.partnerGuid=null,t&&(void 0!==t.bitrate&&null!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.AS&&null!==t.AS&&(this.AS=t.AS),void 0!==t.partnerGuid&&null!==t.partnerGuid&&(this.partnerGuid=t.partnerGuid))},hive.snapshots.PartnerKey.prototype={},hive.snapshots.PartnerKey.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I32?this.bitrate=t.Fb().value:t.Mb(i);break;case 2:i==n.Type.I32?this.AS=t.Fb().value:t.Mb(i);break;case 3:i==n.Type.STRING?this.partnerGuid=t.Lb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.PartnerKey.prototype.write=function(t){t.Hb("PartnerKey"),null!==this.bitrate&&void 0!==this.bitrate&&(t.xb("bitrate",n.Type.I32,1),t.Vb(this.bitrate),t.Gb()),null!==this.AS&&void 0!==this.AS&&(t.xb("AS",n.Type.I32,2),t.Vb(this.AS),t.Gb()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(t.xb("partnerGuid",n.Type.STRING,3),t.qb(this.partnerGuid),t.Gb()),t.jb(),t.Qb()},hive.snapshots.Player=function(t){this.bufferingN=null,this.bufferingMs=null,this.initBufferingN=null,this.initBufferingMs=null,this.seekBufferingN=null,this.seekBufferingMs=null,this.playerBufferMs=null,t&&(void 0!==t.bufferingN&&null!==t.bufferingN&&(this.bufferingN=t.bufferingN),void 0!==t.bufferingMs&&null!==t.bufferingMs&&(this.bufferingMs=t.bufferingMs),void 0!==t.initBufferingN&&null!==t.initBufferingN&&(this.initBufferingN=t.initBufferingN),void 0!==t.initBufferingMs&&null!==t.initBufferingMs&&(this.initBufferingMs=t.initBufferingMs),void 0!==t.seekBufferingN&&null!==t.seekBufferingN&&(this.seekBufferingN=t.seekBufferingN),void 0!==t.seekBufferingMs&&null!==t.seekBufferingMs&&(this.seekBufferingMs=t.seekBufferingMs),void 0!==t.playerBufferMs&&null!==t.playerBufferMs&&(this.playerBufferMs=t.playerBufferMs))},hive.snapshots.Player.prototype={},hive.snapshots.Player.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I16?this.bufferingN=t.f_().value:t.Mb(i);break;case 2:i==n.Type.I32?this.bufferingMs=t.Fb().value:t.Mb(i);break;case 3:i==n.Type.I16?this.initBufferingN=t.f_().value:t.Mb(i);break;case 4:i==n.Type.I32?this.initBufferingMs=t.Fb().value:t.Mb(i);break;case 5:i==n.Type.I16?this.seekBufferingN=t.f_().value:t.Mb(i);break;case 6:i==n.Type.I32?this.seekBufferingMs=t.Fb().value:t.Mb(i);break;case 36:i==n.Type.I32?this.playerBufferMs=t.Fb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.Player.prototype.write=function(t){t.Hb("Player"),null!==this.bufferingN&&void 0!==this.bufferingN&&(t.xb("bufferingN",n.Type.I16,1),t.QC(this.bufferingN),t.Gb()),null!==this.bufferingMs&&void 0!==this.bufferingMs&&(t.xb("bufferingMs",n.Type.I32,2),t.Vb(this.bufferingMs),t.Gb()),null!==this.initBufferingN&&void 0!==this.initBufferingN&&(t.xb("initBufferingN",n.Type.I16,3),t.QC(this.initBufferingN),t.Gb()),null!==this.initBufferingMs&&void 0!==this.initBufferingMs&&(t.xb("initBufferingMs",n.Type.I32,4),t.Vb(this.initBufferingMs),t.Gb()),null!==this.seekBufferingN&&void 0!==this.seekBufferingN&&(t.xb("seekBufferingN",n.Type.I16,5),t.QC(this.seekBufferingN),t.Gb()),null!==this.seekBufferingMs&&void 0!==this.seekBufferingMs&&(t.xb("seekBufferingMs",n.Type.I32,6),t.Vb(this.seekBufferingMs),t.Gb()),null!==this.playerBufferMs&&void 0!==this.playerBufferMs&&(t.xb("playerBufferMs",n.Type.I32,36),t.Vb(this.playerBufferMs),t.Gb()),t.jb(),t.Qb()},hive.snapshots.PK=function(t){this._Q=null,this.count=null,t&&(void 0!==t._Q&&null!==t._Q&&(this._Q=t._Q),void 0!==t.count&&null!==t.count&&(this.count=t.count))},hive.snapshots.PK.prototype={},hive.snapshots.PK.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I16?this._Q=t.f_().value:t.Mb(i);break;case 2:i==n.Type.I32?this.count=t.Fb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.PK.prototype.write=function(t){t.Hb("ResponseInfo"),null!==this._Q&&void 0!==this._Q&&(t.xb("statusCode",n.Type.I16,1),t.QC(this._Q),t.Gb()),null!==this.count&&void 0!==this.count&&(t.xb("count",n.Type.I32,2),t.Vb(this.count),t.Gb()),t.jb(),t.Qb()},hive.snapshots.AK=function(t){this.source=null,t&&void 0!==t.source&&null!==t.source&&(this.source=n.OK(t.source,[hive.snapshots.PK]))},hive.snapshots.AK.prototype={},hive.snapshots.AK.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:if(i==n.Type.LIST){var o,s;this.source=[],(o=t.a_()).h_,s=o.size;for(var a=0;a<s;++a){var u=null;(u=new hive.snapshots.PK).read(t),this.source.push(u)}t.c_()}else t.Mb(i);break;case 0:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.AK.prototype.write=function(t){if(t.Hb("ServiceResponseInfo"),null!==this.source&&void 0!==this.source){for(var e in t.xb("source",n.Type.LIST,1),t.HC(n.Type.STRUCT,this.source.length),this.source)this.source.hasOwnProperty(e)&&(e=this.source[e]).write(t);t.xC(),t.Gb()}t.jb(),t.Qb()},hive.snapshots.MetricSnapshot=function(t){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,this.NK=null,this.aB=null,this.DK=null,t&&(void 0!==t.timestamp&&null!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.guid&&null!==t.guid&&(this.guid=t.guid),void 0!==t.eventId&&null!==t.eventId&&(this.eventId=t.eventId),void 0!==t.streamInfo&&null!==t.streamInfo&&(this.streamInfo=t.streamInfo),void 0!==t.metrics&&null!==t.metrics&&(this.metrics=t.metrics),void 0!==t.traffic&&null!==t.traffic&&(this.traffic=t.traffic),void 0!==t.snapshotInfo&&null!==t.snapshotInfo&&(this.snapshotInfo=t.snapshotInfo),void 0!==t.agentInfo&&null!==t.agentInfo&&(this.agentInfo=t.agentInfo),void 0!==t.connInfo&&null!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.partners&&null!==t.partners&&(this.partners=t.partners),void 0!==t.player&&null!==t.player&&(this.player=t.player),void 0!==t.client&&null!==t.client&&(this.client=t.client),void 0!==t.sessionId&&null!==t.sessionId&&(this.sessionId=t.sessionId),void 0!==t.NK&&null!==t.NK&&(this.NK=t.NK),void 0!==t.aB&&null!==t.aB&&(this.aB=t.aB),void 0!==t.DK&&null!==t.DK&&(this.DK=t.DK))},hive.snapshots.MetricSnapshot.prototype={},hive.snapshots.MetricSnapshot.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I64?this.timestamp=t.g_().value:t.Mb(i);break;case 2:i==n.Type.STRING?this.guid=t.Lb().value:t.Mb(i);break;case 3:i==n.Type.STRUCT?(this.eventId=new EventId,this.eventId.read(t)):t.Mb(i);break;case 4:i==n.Type.STRUCT?(this.streamInfo=new hive.snapshots.StreamInfo,this.streamInfo.read(t)):t.Mb(i);break;case 5:i==n.Type.STRUCT?(this.metrics=new hive.snapshots.Metrics,this.metrics.read(t)):t.Mb(i);break;case 6:if(i==n.Type.MAP){var o,s;this.traffic={},(o=t.i_()).n_,o.s_,s=o.size;for(var a=0;a<s;++a){a>0&&t.JC.length>t.zb[t.zb.length-1]+1&&t.JC.pop();var u=null,h=null;(u=new hive.snapshots.TrafficKey).read(t),(h=new hive.snapshots.Traffic).read(t),this.traffic[u]=h}t.o_()}else t.Mb(i);break;case 7:i==n.Type.STRUCT?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(t)):t.Mb(i);break;case 8:i==n.Type.STRUCT?(this.agentInfo=new hive.snapshots.AgentInfo,this.agentInfo.read(t)):t.Mb(i);break;case 9:i==n.Type.STRUCT?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.Mb(i);break;case 10:if(i==n.Type.MAP){var c,l;this.partners={},(c=t.i_()).n_,c.s_,l=c.size;for(var f=0;f<l;++f){f>0&&t.JC.length>t.zb[t.zb.length-1]+1&&t.JC.pop();var p=null,d=null;(p=new hive.snapshots.PartnerKey).read(t),(d=new hive.snapshots.Partner).read(t),this.partners[p]=d}t.o_()}else t.Mb(i);break;case 11:i==n.Type.STRUCT?(this.player=new hive.snapshots.Player,this.player.read(t)):t.Mb(i);break;case 12:i==n.Type.STRUCT?(this.client=new hive.snapshots.ClientInfo,this.client.read(t)):t.Mb(i);break;case 13:i==n.Type.STRING?this.sessionId=t.Lb().value:t.Mb(i);break;case 14:i==n.Type.STRUCT?(this.NK=new hive.snapshots.AK,this.NK.read(t)):t.Mb(i);break;case 15:i==n.Type.STRUCT?(this.aB=new TestInfo,this.aB.read(t)):t.Mb(i);break;case 16:i==n.Type.I64?this.DK=t.g_().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.MetricSnapshot.prototype.write=function(t){if(t.Hb("MetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(t.xb("timestamp",n.Type.I64,1),t.KC(this.timestamp),t.Gb()),null!==this.guid&&void 0!==this.guid&&(t.xb("guid",n.Type.STRING,2),t.qb(this.guid),t.Gb()),null!==this.eventId&&void 0!==this.eventId&&(t.xb("eventId",n.Type.STRUCT,3),this.eventId.write(t),t.Gb()),null!==this.streamInfo&&void 0!==this.streamInfo&&(t.xb("streamInfo",n.Type.STRUCT,4),this.streamInfo.write(t),t.Gb()),null!==this.metrics&&void 0!==this.metrics&&(t.xb("metrics",n.Type.STRUCT,5),this.metrics.write(t),t.Gb()),null!==this.traffic&&void 0!==this.traffic){for(var e in t.xb("traffic",n.Type.MAP,6),t.UC(n.Type.STRUCT,n.Type.STRUCT,n.Eb(this.traffic)),this.traffic)if(this.traffic.hasOwnProperty(e)){var i=this.traffic[e];i.key.write(t),i.value.write(t)}t.BC(),t.Gb()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(t.xb("snapshotInfo",n.Type.STRUCT,7),this.snapshotInfo.write(t),t.Gb()),null!==this.agentInfo&&void 0!==this.agentInfo&&(t.xb("agentInfo",n.Type.STRUCT,8),this.agentInfo.write(t),t.Gb()),null!==this.connInfo&&void 0!==this.connInfo&&(t.xb("connInfo",n.Type.STRUCT,9),this.connInfo.write(t),t.Gb()),null!==this.partners&&void 0!==this.partners){for(var r in t.xb("partners",n.Type.MAP,10),t.UC(n.Type.STRUCT,n.Type.STRUCT,n.Eb(this.partners)),this.partners)if(this.partners.hasOwnProperty(r)){var o=this.partners[r];o.key.write(t),o.value.write(t)}t.BC(),t.Gb()}null!==this.player&&void 0!==this.player&&(t.xb("player",n.Type.STRUCT,11),this.player.write(t),t.Gb()),null!==this.client&&void 0!==this.client&&(t.xb("client",n.Type.STRUCT,12),this.client.write(t),t.Gb()),null!==this.sessionId&&void 0!==this.sessionId&&(t.xb("sessionId",n.Type.STRING,13),t.qb(this.sessionId),t.Gb()),null!==this.NK&&void 0!==this.NK&&(t.xb("responseInfo",n.Type.STRUCT,14),this.NK.write(t),t.Gb()),null!==this.aB&&void 0!==this.aB&&(t.xb("testInfo",n.Type.STRUCT,15),this.aB.write(t),t.Gb()),null!==this.DK&&void 0!==this.DK&&(t.xb("clientId",n.Type.I64,16),t.KC(this.DK),t.Gb()),t.jb(),t.Qb()},hive.snapshots.JsonMetricSnapshot=function(t){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,this.NK=null,this.aB=null,this.DK=null,t&&(void 0!==t.timestamp&&null!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.guid&&null!==t.guid&&(this.guid=t.guid),void 0!==t.eventId&&null!==t.eventId&&(this.eventId=t.eventId),void 0!==t.streamInfo&&null!==t.streamInfo&&(this.streamInfo=t.streamInfo),void 0!==t.metrics&&null!==t.metrics&&(this.metrics=t.metrics),void 0!==t.traffic&&null!==t.traffic&&(this.traffic=t.traffic),void 0!==t.snapshotInfo&&null!==t.snapshotInfo&&(this.snapshotInfo=t.snapshotInfo),void 0!==t.agentInfo&&null!==t.agentInfo&&(this.agentInfo=t.agentInfo),void 0!==t.connInfo&&null!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.partners&&null!==t.partners&&(this.partners=t.partners),void 0!==t.player&&null!==t.player&&(this.player=t.player),void 0!==t.client&&null!==t.client&&(this.client=t.client),void 0!==t.sessionId&&null!==t.sessionId&&(this.sessionId=t.sessionId),void 0!==t.NK&&null!==t.NK&&(this.NK=t.NK),void 0!==t.aB&&null!==t.aB&&(this.aB=t.aB),void 0!==t.DK&&null!==t.DK&&(this.DK=t.DK))},hive.snapshots.JsonMetricSnapshot.prototype={},hive.snapshots.JsonMetricSnapshot.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I64?this.timestamp=t.g_().value:t.Mb(i);break;case 2:i==n.Type.STRING?this.guid=t.Lb().value:t.Mb(i);break;case 3:i==n.Type.STRUCT?(this.eventId=new EventId,this.eventId.read(t)):t.Mb(i);break;case 4:i==n.Type.STRUCT?(this.streamInfo=new hive.snapshots.StreamInfo,this.streamInfo.read(t)):t.Mb(i);break;case 5:i==n.Type.STRUCT?(this.metrics=new hive.snapshots.Metrics,this.metrics.read(t)):t.Mb(i);break;case 6:if(i==n.Type.MAP){var o,s;this.traffic={},(o=t.i_()).n_,o.s_,s=o.size;for(var a=0;a<s;++a){a>0&&t.JC.length>t.zb[t.zb.length-1]+1&&t.JC.pop();var u,h=null;u=t.Lb().value,(h=new hive.snapshots.Traffic).read(t),this.traffic[u]=h}t.o_()}else t.Mb(i);break;case 7:i==n.Type.STRUCT?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(t)):t.Mb(i);break;case 8:i==n.Type.STRUCT?(this.agentInfo=new hive.snapshots.AgentInfo,this.agentInfo.read(t)):t.Mb(i);break;case 9:i==n.Type.STRUCT?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.Mb(i);break;case 10:if(i==n.Type.MAP){var c,l;this.partners={},(c=t.i_()).n_,c.s_,l=c.size;for(var f=0;f<l;++f){f>0&&t.JC.length>t.zb[t.zb.length-1]+1&&t.JC.pop();var p,d=null;p=t.Lb().value,(d=new hive.snapshots.Partner).read(t),this.partners[p]=d}t.o_()}else t.Mb(i);break;case 11:i==n.Type.STRUCT?(this.player=new hive.snapshots.Player,this.player.read(t)):t.Mb(i);break;case 12:i==n.Type.STRUCT?(this.client=new hive.snapshots.ClientInfo,this.client.read(t)):t.Mb(i);break;case 13:i==n.Type.STRING?this.sessionId=t.Lb().value:t.Mb(i);break;case 14:i==n.Type.STRUCT?(this.NK=new hive.snapshots.AK,this.NK.read(t)):t.Mb(i);break;case 15:i==n.Type.STRUCT?(this.aB=new TestInfo,this.aB.read(t)):t.Mb(i);break;case 16:i==n.Type.I64?this.DK=t.g_().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},hive.snapshots.JsonMetricSnapshot.prototype.write=function(t){if(t.Hb("JsonMetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(t.xb("timestamp",n.Type.I64,1),t.KC(this.timestamp),t.Gb()),null!==this.guid&&void 0!==this.guid&&(t.xb("guid",n.Type.STRING,2),t.qb(this.guid),t.Gb()),null!==this.eventId&&void 0!==this.eventId&&(t.xb("eventId",n.Type.STRUCT,3),this.eventId.write(t),t.Gb()),null!==this.streamInfo&&void 0!==this.streamInfo&&(t.xb("streamInfo",n.Type.STRUCT,4),this.streamInfo.write(t),t.Gb()),null!==this.metrics&&void 0!==this.metrics&&(t.xb("metrics",n.Type.STRUCT,5),this.metrics.write(t),t.Gb()),null!==this.traffic&&void 0!==this.traffic){for(var e in t.xb("traffic",n.Type.MAP,6),t.UC(n.Type.STRING,n.Type.STRUCT,n.Eb(this.traffic)),this.traffic)if(this.traffic.hasOwnProperty(e)){var i=this.traffic[e];t.qb(e),i.write(t)}t.BC(),t.Gb()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(t.xb("snapshotInfo",n.Type.STRUCT,7),this.snapshotInfo.write(t),t.Gb()),null!==this.agentInfo&&void 0!==this.agentInfo&&(t.xb("agentInfo",n.Type.STRUCT,8),this.agentInfo.write(t),t.Gb()),null!==this.connInfo&&void 0!==this.connInfo&&(t.xb("connInfo",n.Type.STRUCT,9),this.connInfo.write(t),t.Gb()),null!==this.partners&&void 0!==this.partners){for(var r in t.xb("partners",n.Type.MAP,10),t.UC(n.Type.STRING,n.Type.STRUCT,n.Eb(this.partners)),this.partners)if(this.partners.hasOwnProperty(r)){var o=this.partners[r];t.qb(r),o.write(t)}t.BC(),t.Gb()}null!==this.player&&void 0!==this.player&&(t.xb("player",n.Type.STRUCT,11),this.player.write(t),t.Gb()),null!==this.client&&void 0!==this.client&&(t.xb("client",n.Type.STRUCT,12),this.client.write(t),t.Gb()),null!==this.sessionId&&void 0!==this.sessionId&&(t.xb("sessionId",n.Type.STRING,13),t.qb(this.sessionId),t.Gb()),null!==this.NK&&void 0!==this.NK&&(t.xb("responseInfo",n.Type.STRUCT,14),this.NK.write(t),t.Gb()),null!==this.aB&&void 0!==this.aB&&(t.xb("testInfo",n.Type.STRUCT,15),this.aB.write(t),t.Gb()),null!==this.DK&&void 0!==this.DK&&(t.xb("clientId",n.Type.I64,16),t.KC(this.DK),t.Gb()),t.jb(),t.Qb()}},function(t,e,i){var n=i(33);StreamType={1:"LIVE",LIVE:1,2:"VOD",kK:2},StreamProtocol={1:"DASH",DASH:1,2:"HDS",LK:2,3:"HLS",bq:3,4:"SS",MK:4},ClientType={1:"JAVA",FK:1,2:"STATS_ONLY",wB:2,3:"JS_DIRECT",SB:3,4:"JS_PROXY",RB:4},EventId=function(t){this.partnerId=null,this.customerId=null,this.contentId=null,this.tags=null,t&&(void 0!==t.partnerId&&null!==t.partnerId&&(this.partnerId=t.partnerId),void 0!==t.customerId&&null!==t.customerId&&(this.customerId=t.customerId),void 0!==t.contentId&&null!==t.contentId&&(this.contentId=t.contentId),void 0!==t.tags&&null!==t.tags&&(this.tags=t.tags))},EventId.prototype={},EventId.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.STRING?this.partnerId=t.Lb().value:t.Mb(i);break;case 2:i==n.Type.STRING?this.customerId=t.Lb().value:t.Mb(i);break;case 3:i==n.Type.STRING?this.contentId=t.Lb().value:t.Mb(i);break;case 4:if(i==n.Type.LIST){var o,s;this.tags=[],(o=t.a_()).h_,s=o.size;for(var a=0;a<s;++a){var u;u=t.Lb().value,this.tags.push(u)}t.c_()}else t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},EventId.prototype.write=function(t){if(t.Hb("EventId"),null!==this.partnerId&&void 0!==this.partnerId&&(t.xb("partnerId",n.Type.STRING,1),t.qb(this.partnerId),t.Gb()),null!==this.customerId&&void 0!==this.customerId&&(t.xb("customerId",n.Type.STRING,2),t.qb(this.customerId),t.Gb()),null!==this.contentId&&void 0!==this.contentId&&(t.xb("contentId",n.Type.STRING,3),t.qb(this.contentId),t.Gb()),null!==this.tags&&void 0!==this.tags){for(var e in t.xb("tags",n.Type.LIST,4),t.HC(n.Type.STRING,this.tags.length),this.tags)this.tags.hasOwnProperty(e)&&(e=this.tags[e],t.qb(e));t.xC(),t.Gb()}t.jb(),t.Qb()},SnapshotInfo=function(t){this.timestamp=null,this.apiServer=null,this.clientIp=null,t&&(void 0!==t.timestamp&&null!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.apiServer&&null!==t.apiServer&&(this.apiServer=t.apiServer),void 0!==t.clientIp&&null!==t.clientIp&&(this.clientIp=t.clientIp))},SnapshotInfo.prototype={},SnapshotInfo.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.I64?this.timestamp=t.g_().value:t.Mb(i);break;case 2:i==n.Type.STRING?this.apiServer=t.Lb().value:t.Mb(i);break;case 3:i==n.Type.STRING?this.clientIp=t.Lb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},SnapshotInfo.prototype.write=function(t){t.Hb("SnapshotInfo"),null!==this.timestamp&&void 0!==this.timestamp&&(t.xb("timestamp",n.Type.I64,1),t.KC(this.timestamp),t.Gb()),null!==this.apiServer&&void 0!==this.apiServer&&(t.xb("apiServer",n.Type.STRING,2),t.qb(this.apiServer),t.Gb()),null!==this.clientIp&&void 0!==this.clientIp&&(t.xb("clientIp",n.Type.STRING,3),t.qb(this.clientIp),t.Gb()),t.jb(),t.Qb()},TestInfo=function(t){this.testId=null,t&&void 0!==t.testId&&null!==t.testId&&(this.testId=t.testId)},TestInfo.prototype={},TestInfo.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.STRING?this.testId=t.Lb().value:t.Mb(i);break;case 0:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},TestInfo.prototype.write=function(t){t.Hb("TestInfo"),null!==this.testId&&void 0!==this.testId&&(t.xb("testId",n.Type.STRING,1),t.qb(this.testId),t.Gb()),t.jb(),t.Qb()},InetAddress=function(t){this.address=null,this.port=null,t&&(void 0!==t.address&&null!==t.address&&(this.address=t.address),void 0!==t.port&&null!==t.port&&(this.port=t.port))},InetAddress.prototype={},InetAddress.prototype.read=function(t){for(t.r_();;){var e=t.kb(),i=(e.fname,e.ftype),r=e.fid;if(i==n.Type.STOP)break;switch(r){case 1:i==n.Type.STRING?this.address=t.v_().value:t.Mb(i);break;case 2:i==n.Type.I32?this.port=t.Fb().value:t.Mb(i);break;default:t.Mb(i)}t.Ub()}t.Bb()},InetAddress.prototype.write=function(t){t.Hb("InetAddress"),null!==this.address&&void 0!==this.address&&(t.xb("address",n.Type.STRING,1),t.WC(this.address),t.Gb()),null!==this.port&&void 0!==this.port&&(t.xb("port",n.Type.I32,2),t.Vb(this.port),t.Gb()),t.jb(),t.Qb()}},function(t,e,i){"use strict";var n=i(4),r=i(23),o=function(){function t(t,e){this.msg=t,this.UK=Date.now()+e,this.BK=n.defer()}return t.prototype.HK=function(){return Date.now()>=this.UK},t}(),s=function(){function t(t,e,i,n,r,o,s){void 0===e&&(e=3e4),void 0===i&&(i=100),void 0===n&&(n=3e4),void 0===r&&(r=15e3),void 0===o&&(o=Date),void 0===s&&(s=!1),this.xK=1,this.qK=-1,this.GK=-1,this.wj={},this.VK=[],this.jK=[],this.QK=!1,this.KK=!0,this.YK=t,this.WK=Array(),this.AE=e,this.OE=i,this.NE=n,this.zK=r,this.JK=o,this.QK=s||/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge./i.test(navigator.userAgent)}return t.prototype.As=function(t){var e=t.service+"_"+t.msgId,i=this.wj[e];null!=i?i(t):r.logger().error(r.loggerId+"Could not find a dispatcher for ",t,e,this.wj)},t.prototype.on=function(t,e,i){this.wj[t+"_"+e]=i},t.prototype.onerror=function(t){this.VK.push(t)},t.prototype.xB=function(t){this.jK.push(t)},t.prototype.XK=function(){var t=this;if(window.WebSocket){var e=new WebSocket(this.YK);return e.binaryType="arraybuffer",e.onopen=function(e){t.ZK(),r.logger().debug(r.loggerId+"HiveServicesConnection established to "+t.YK),t.GK=(new t.JK).getTime(),t.$K(),t.jK.forEach(function(e){return e(t)}),t.eY(),t.tY()},e.onclose=function(e){t.close(t.KK),t.connect()},e.onmessage=function(e){t.As(r.Jd.yf(e.data))},e.onerror=function(e){t.close(!0),t.VK.forEach(function(t){return t(e.toString())})},e}this.VK.forEach(function(t){return t("WebSocket not defined")})},t.prototype.isOpen=function(){return null!=this.PR&&this.PR.readyState==this.PR.OPEN},t.prototype.connect=function(t){var e=this;t&&(this.KK=!0),this.KK&&1!=this.isOpen()&&(this.qK>0||(this.GK>-1&&(new this.JK).getTime()-this.GK>this.AE?(this.xK=r.L.Ef,this.GK=-1):this.xK=Math.min(2*this.xK,this.AE),this.qK=window.setTimeout(function(){e.qK=-1,r.logger().debug(r.loggerId+"Connection attempt to "+e.YK+" [t:"+e.xK+" hb:"+e.QK+"]"),e.PR=e.XK(),e.xK=Math.max(e.xK,r.L.Ef)},this.xK)))},t.prototype.ZK=function(){this.qK>-1&&(clearTimeout(this.qK),this.qK=-1)},t.prototype.close=function(t){this.KK=null!=t&&t,r.logger().debug(r.loggerId+"Closing connection [reconnect:"+this.KK+"]"),this.ZK(),null!=this.PR&&(this.PR.close(),this.PR=null)},t.prototype.$K=function(){for(;this.WK.length>0;){var t=this.WK.pop();try{t.HK()?t.BK.reject(new Error("Message expired")):(this.eY(),this.PR.send(t.msg.vf()))}catch(e){if(e.code===DOMException.INVALID_STATE_ERR){this.WK.push(t);break}r.logger().error(r.loggerId+"Failed to send the message, dropped: ",e.code,e.name),t.BK.reject(e)}}this.tY()},t.prototype.eY=function(){this.rY&&(clearTimeout(this.rY),this.rY=null)},t.prototype.tY=function(){var t=this;this.QK&&!this.rY&&(this.rY=window.setInterval(function(){t.send(new r.Jd(Services.iY,0,""))},this.zK))},t.prototype.send=function(t,e){if(void 0===e&&(e=this.NE),this.WK.length>=this.OE)throw new Error("HiveServices connection cannot queue more messages");var i=new o(t,e);return this.WK.push(i),this.PR&&this.$K(),i.BK.Ss},t.prototype.nY=function(t){this.QK=t,this.QK&&this.tY()},t.prototype.sY=function(){return null!=this.PR},t}();e.HB=s},function(t,e){Services={1:"REMOTE_EXECUTOR",oY:1,2:"PEER_FORWARDER",aY:2,3:"PEER_INDEX",hY:3,4:"PEER_BROADCAST",cY:4,5:"PEER_FILTER",uY:5,6:"PEER_LOGGING",lY:6,7:"HIVEJS_TRACKER",pY:7,8:"PEER_SYSTEM",dY:8,9:"HIVEJS_SNAPSHOTS",Xd:9,10:"HIVEJS_TICKETS",BB:10,11:"HIVEJS_KEEPALIVE",iY:11,12:"HIVEJS_FORWARDING",fY:12}},function(t,e){t.i=function(){return new Function}},function(t,e,i){"use strict";var n=function(){function t(t,e){this.p2pId=t,this.Wl=e}return t.prototype.tp=function(){return this.p2pId},t.prototype.rp=function(){return this.Wl?this.Wl:this.p2pId},t}();e.pH=n},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getCidr=function(){return this.MH?this.MH:null},e}(i(82).FH);e.wH=r},function(t,e,i){"use strict";var n=i(74),r=i(4),o=i(0),s=i(27),a=function(){function t(){this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.logger=o.Framework.resolve(o.Framework.V.R).log()}return t.prototype.uH=function(){var t=r.defer(),e=this.indexedDB.open("PrivateIPDB");return e.onupgradeneeded=function(){e.result.createObjectStore("PrivateIPStore",{keyPath:"id"})},e.onsuccess=function(){var i=e.result;t.resolve(i)},e.onerror=function(e){t.reject(e)},t.Ss},t.prototype.ZH=function(){var t=this;if(this.gY)return this.gY;var e=setTimeout(function(){t.logger.warn("Private list retrieval timeout"),i.reject("Private list timeout")},4e3),i=r.defer();return s.Gd._h&&this.indexedDB?this.uH().then(function(r){var o=r.transaction("PrivateIPStore","readwrite").objectStore("PrivateIPStore").get("iplist");o.onsuccess=function(){clearTimeout(e);var t=[];n.sL(o.result)||n.sL(o.result.value)||(t=o.result.value.split("|")),i.resolve(t),r.close()},o.onerror=function(n){clearTimeout(e),t.logger.warn("I got an error on indexed db "+n.message),i.reject("Error on indexedDB "+n.message)}}).fail(function(n){clearTimeout(e),t.logger.warn("DB is not open with error"+n.message),i.reject("DB is not open with error "+n.message)}):(clearTimeout(e),i.reject({message:"DB is not ready or enabled"})),this.gY=i.Ss,this.gY},t.prototype.ix=function(t){var e=this;if(s.Gd._h&&this.indexedDB){var i=t.join("|");this.uH().then(function(n){var r=n.transaction("PrivateIPStore","readwrite");r.objectStore("PrivateIPStore").put({id:"iplist",value:i}),r.oncomplete=function(){e.logger.debug("Storing site matched ips ["+t.join(",")+"]"),n.close()}}).fail(function(t){e.logger.warn("DB is not open with error "+t.message)})}},t}();e.QH=a},function(t,e,i){"use strict";var n=i(17).log,r=i(17).Wu,o={uL:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},pL:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this.EY},set:function(t){var e=this;this.EY&&(this.removeEventListener("track",this.EY),this.removeEventListener("addstream",this.vY)),this.addEventListener("track",this.EY=t),this.addEventListener("addstream",this.vY=function(t){t.stream.addEventListener("addtrack",function(i){var n=new Event("track");n.track=i.track,n.receiver={track:i.track},n.streams=[t.stream],e.dispatchEvent(n)}),t.stream.getTracks().forEach(function(e){var i=new Event("track");i.track=e,i.receiver={track:e},i.streams=[t.stream],this.dispatchEvent(i)}.bind(this))}.bind(this))}})},dL:function(){if("object"==typeof window&&window.RTCPeerConnection&&!("getSenders"in RTCPeerConnection.prototype)&&"createDTMFSender"in RTCPeerConnection.prototype){RTCPeerConnection.prototype.getSenders=function(){return this.yY};var t=RTCPeerConnection.prototype.addStream,e=RTCPeerConnection.prototype.removeStream;RTCPeerConnection.prototype.addStream=function(e){var i=this;i.yY=i.yY||[],t.apply(i,[e]),e.getTracks().forEach(function(t){i.yY.push({track:t,get TY(){return void 0===this.mY&&("audio"===t.kind?this.mY=i.createDTMFSender(t):this.mY=null),this.mY}})})},RTCPeerConnection.prototype.removeStream=function(t){var i=this;i.yY=i.yY||[],e.apply(i,[t]),t.getTracks().forEach(function(t){var e=i.yY.find(function(e){return e.track===t});e&&i.yY.splice(i.yY.indexOf(e),1)})}}},lL:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.IY},set:function(t){var e=this;this.IY=t,this.src&&URL.revokeObjectURL(this.src),t?(this.src=URL.createObjectURL(t),t.addEventListener("addtrack",function(){e.src&&URL.revokeObjectURL(e.src),e.src=URL.createObjectURL(t)}),t.addEventListener("removetrack",function(){e.src&&URL.revokeObjectURL(e.src),e.src=URL.createObjectURL(t)})):this.src=""}}))},aL:function(){window.RTCPeerConnection||(window.RTCPeerConnection=function(t,e){return n("PeerConnection"),t&&t.SY&&(t.RY=t.SY),new webkitRTCPeerConnection(t,e)},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.wY&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.wY}}));var t=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,i,n){var r=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof arguments[0]))return t.apply(this,[]);var s=function(t){var e={};return t.result().forEach(function(t){var i={id:t.id,timestamp:t.timestamp,type:{bY:"local-candidate",CY:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){i[e]=t._Y(e)}),e[i.id]=i}),e},a=function(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))};if(arguments.length>=2){return t.apply(this,[function(t){o[1](a(s(t)))},arguments[0]])}return new Promise(function(e,i){t.apply(r,[function(t){e(a(s(t)))},i])}).then(i,n)},r.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){var t=arguments,i=this,n=new Promise(function(n,r){e.apply(i,[t[0],n,r])});return t.length<2?n:n.then(function(){t[1].apply(null,[])},function(e){t.length>=3&&t[2].apply(null,[e])})}}),r.version<52&&["createOffer","createAnswer"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){var t=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var i=1===arguments.length?arguments[0]:void 0;return new Promise(function(n,r){e.apply(t,[n,r,i])})}return e.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?RTCIceCandidate:RTCSessionDescription)(arguments[0]),e.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};t.i={uL:o.uL,pL:o.pL,dL:o.dL,lL:o.lL,aL:o.aL,cL:i(123)}},function(t,e,i){"use strict";var n=i(17).log,r=i(17).Wu;t.i=function(){var t=function(t){if("object"!=typeof t||t.PY||t.optional)return t;var e={};return Object.keys(t).forEach(function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n="object"==typeof t[i]?t[i]:{AY:t[i]};void 0!==n.OY&&"number"==typeof n.OY&&(n.min=n.max=n.OY);var r=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.slice(1):"deviceId"===e?"sourceId":e};if(void 0!==n.AY){e.optional=e.optional||[];var o={};"number"==typeof n.AY?(o[r("min",i)]=n.AY,e.optional.push(o),(o={})[r("max",i)]=n.AY,e.optional.push(o)):(o[r("",i)]=n.AY,e.optional.push(o))}void 0!==n.OY&&"number"!=typeof n.OY?(e.PY=e.PY||{},e.PY[r("",i)]=n.OY):["min","max"].forEach(function(t){void 0!==n[t]&&(e.PY=e.PY||{},e.PY[r(t,i)]=n[t])})}}),t.NY&&(e.optional=(e.optional||[]).concat(t.NY)),e},e=function(e,i){if((e=JSON.parse(JSON.stringify(e)))&&e.HR&&(e.HR=t(e.HR)),e&&"object"==typeof e.video){var o=e.video.DY;o=o&&("object"==typeof o?o:{AY:o});var s=r.version<59;if(o&&("user"===o.OY||"environment"===o.OY||"user"===o.AY||"environment"===o.AY)&&(!navigator.mediaDevices.kY||!navigator.mediaDevices.kY().DY||s)&&(delete e.video.DY,"environment"===o.OY||"environment"===o.AY))return navigator.mediaDevices.LY().then(function(r){var s=(r=r.filter(function(t){return"videoinput"===t.kind})).find(function(t){return-1!==t.label.toLowerCase().indexOf("back")})||r.length&&r[r.length-1];return s&&(e.video.MY=o.OY?{OY:s.MY}:{AY:s.MY}),e.video=t(e.video),n("chrome: "+JSON.stringify(e)),i(e)});e.video=t(e.video)}return n("chrome: "+JSON.stringify(e)),i(e)},i=function(t){return{name:{FY:"NotAllowedError",UY:"OverconstrainedError"}[t.name]||t.name,message:t.message,BY:t.HY,toString:function(){return this.name+(this.message&&": ")+this.message}}};navigator.getUserMedia=function(t,n,r){e(t,function(t){navigator.webkitGetUserMedia(t,n,function(t){r(i(t))})})};var o=function(t){return new Promise(function(e,i){navigator.getUserMedia(t,e,i)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,LY:function(){return new Promise(function(t){var e={HR:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(i){t(i.map(function(t){return{label:t.label,kind:e[t.kind],MY:t.id,xY:""}}))})})},kY:function(){return{MY:!0,qY:!0,DY:!0,GY:!0,height:!0,width:!0}}}),navigator.mediaDevices.getUserMedia){var s=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return e(t,function(t){return s(t).then(function(e){if(t.HR&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(t){t.stop()}),new DOMException("","NotFoundError");return e},function(t){return Promise.reject(i(t))})})}}else navigator.mediaDevices.getUserMedia=function(t){return o(t)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){n("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){n("Dummy mediaDevices.removeEventListener called.")})}},function(t,e,i){"use strict";var n=i(125),r=i(17).Wu,o={aL:function(){if(window.jY&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(t){return t}),window.RTCSessionDescription||(window.RTCSessionDescription=function(t){return t}),r.version<15025)){var t=Object.getOwnPropertyDescriptor(MediaStreamTrack.prototype,"enabled");Object.defineProperty(MediaStreamTrack.prototype,"enabled",{set:function(e){t.set.call(this,e);var i=new Event("enabled");i.enabled=e,this.dispatchEvent(i)}})}window.RTCPeerConnection=function(t){var e=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(t){e[t]=i[t].bind(i)}),this.onicecandidate=null,this.onaddstream=null,this.QY=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.KY=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.YY=[],this.WY=[],this.getLocalStreams=function(){return e.YY},this.getRemoteStreams=function(){return e.WY},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.zY={JY:"all",iceServers:[]},t&&t.SY)switch(t.SY){case"all":case"relay":this.zY.JY=t.SY}this.XY=t&&"max-bundle"===t.ZY,t&&t.iceServers&&(this.zY.iceServers=function(t){var e=!1;return(t=JSON.parse(JSON.stringify(t))).filter(function(t){if(t&&(t.VY||t.url)){var i=t.VY||t.url,n="string"==typeof i;return n&&(i=[i]),i=i.filter(function(t){return 0!==t.indexOf("turn:")||-1===t.indexOf("transport=udp")||-1!==t.indexOf("turn:[")||e?0===t.indexOf("stun:")&&r.version>=14393:(e=!0,!0)}),delete t.url,t.VY=n?i[0]:i,!!i.length}return!1})}(t.iceServers)),this.$Y=t,this.eW=[],this.tW=[]},window.RTCPeerConnection.prototype.rW=function(){var t=new Event("icegatheringstatechange");this.dispatchEvent(t),null!==this.KY&&this.KY(t)},window.RTCPeerConnection.prototype.iW=function(){var t=this,e=n.nW(t.localDescription.sdp);this.tW.forEach(function(i){if(i.candidate&&0!==Object.keys(i.candidate).length)e[i.candidate.sdpMLineIndex+1]+="a="+i.candidate.candidate+"\r\n";else for(var n=1;n<e.length;n++)-1===e[n].indexOf("\r\na=end-of-candidates\r\n")&&(e[n]+="a=end-of-candidates\r\n");t.localDescription.sdp=e.join(""),t.dispatchEvent(i),null!==t.onicecandidate&&t.onicecandidate(i),i.candidate||"complete"===t.iceGatheringState||t.eW.every(function(t){return t.sW&&"completed"===t.sW.state})&&"complete"!==t.oW&&(t.iceGatheringState="complete",t.rW())}),this.tW=[]},window.RTCPeerConnection.prototype.getConfiguration=function(){return this.$Y},window.RTCPeerConnection.prototype.addStream=function(t){if(r.version>=15025)this.YY.push(t);else{var e=t.clone();t.getTracks().forEach(function(t,i){var n=e.getTracks()[i];t.addEventListener("enabled",function(t){n.enabled=t.enabled})}),this.YY.push(e)}this.aW()},window.RTCPeerConnection.prototype.removeStream=function(t){var e=this.YY.indexOf(t);e>-1&&(this.YY.splice(e,1),this.aW())},window.RTCPeerConnection.prototype.getSenders=function(){return this.eW.filter(function(t){return!!t.hW}).map(function(t){return t.hW})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.eW.filter(function(t){return!!t.cW}).map(function(t){return t.cW})},window.RTCPeerConnection.prototype.uW=function(t,e){var i={lW:[],pW:[],dW:[]},n=function(t,e){t=parseInt(t,10);for(var i=0;i<e.length;i++)if(e[i].fW===t||e[i].gW===t)return e[i]},r=function(t,e,i,r){var o=n(t.parameters.EW,i),s=n(e.parameters.EW,r);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return t.lW.forEach(function(n){for(var o=0;o<e.lW.length;o++){var s=e.lW[o];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.vW===s.vW){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.EW&&!r(n,s,t.lW,e.lW))continue;(s=JSON.parse(JSON.stringify(s))).yW=Math.min(n.yW,s.yW),i.lW.push(s),s.TW=s.TW.filter(function(t){for(var e=0;e<n.TW.length;e++)if(n.TW[e].type===t.type&&n.TW[e].mW===t.mW)return!0;return!1});break}}}),t.pW.forEach(function(t){for(var n=0;n<e.pW.length;n++){var r=e.pW[n];if(t.uri===r.uri){i.pW.push(r);break}}}),i},window.RTCPeerConnection.prototype.IW=function(t,e){var i=this,r=new RTCIceGatherer(i.zY),o=new RTCIceTransport(r);r.SW=function(s){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:e};var u=s.candidate,h=!u||0===Object.keys(u).length;h?void 0===r.state&&(r.state="completed"):(u.RW="RTCP"===o.RW?2:1,a.candidate.candidate=n.wW(u));var c=n.nW(i.localDescription.sdp);c[a.candidate.sdpMLineIndex+1]+=h?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i.localDescription.sdp=c.join("");var l=(i.bW?i.bW:i.eW).every(function(t){return t.sW&&"completed"===t.sW.state});switch(i.iceGatheringState){case"new":h||i.tW.push(a),h&&l&&i.tW.push(new Event("icecandidate"));break;case"gathering":i.iW(),h||(i.dispatchEvent(a),null!==i.onicecandidate&&i.onicecandidate(a)),l&&(i.dispatchEvent(new Event("icecandidate")),null!==i.onicecandidate&&i.onicecandidate(new Event("icecandidate")),i.iceGatheringState="complete",i.rW())}},o._W=function(){i.PW()};var s=new RTCDtlsTransport(o);return s.AW=function(){i.PW()},s.onerror=function(){s.state="failed",i.PW()},{sW:r,OW:o,NW:s}},window.RTCPeerConnection.prototype.DW=function(t,e,i){var o=this.uW(t.kW,t.LW);e&&t.hW&&(o.MW=t.FW,o.UW={BW:n.HW},t.xW.length&&(o.UW.qW=t.xW[0].qW),t.hW.send(o)),i&&t.cW&&("video"===t.kind&&t.xW&&r.version<15019&&t.xW.forEach(function(t){delete t.GW}),o.MW=t.xW,o.UW={BW:t.BW},t.FW.length&&(o.UW.qW=t.FW[0].qW),t.cW.VW(o))},window.RTCPeerConnection.prototype.setLocalDescription=function(t){var e,i,r=this;if("offer"===t.type)this.bW&&(e=n.nW(t.sdp),i=e.shift(),e.forEach(function(t,e){var i=n.jW(t);r.bW[e].kW=i}),this.eW=this.bW,delete this.bW);else if("answer"===t.type){e=n.nW(r.remoteDescription.sdp),i=e.shift();var o=n.QW(i,"a=ice-lite").length>0;e.forEach(function(t,e){var s=r.eW[e],a=s.sW,u=s.OW,h=s.NW,c=s.kW,l=s.LW;if("0"!==t.split("\n",1)[0].split(" ",2)[1]&&!s.KW){var f=n.YW(t,i),p=n.WW(t,i);o&&(p.zW="server"),r.XY&&0!==e||(u.start(a,f,o?"controlling":"controlled"),h.start(p));var d=r.uW(c,l);r.DW(s,d.lW.length>0,!1)}})}switch(this.localDescription={type:t.type,sdp:t.sdp},t.type){case"offer":this.JW("have-local-offer");break;case"answer":this.JW("stable");break;default:throw new TypeError('unsupported type "'+t.type+'"')}var s=arguments.length>1&&"function"==typeof arguments[1];if(s){var a=arguments[1];window.setTimeout(function(){a(),"new"===r.iceGatheringState&&(r.iceGatheringState="gathering",r.rW()),r.iW()},0)}var u=Promise.resolve();return u.then(function(){s||("new"===r.iceGatheringState&&(r.iceGatheringState="gathering",r.rW()),window.setTimeout(r.iW.bind(r),500))}),u},window.RTCPeerConnection.prototype.setRemoteDescription=function(t){var e=this,i=new MediaStream,o=[],s=n.nW(t.sdp),a=s.shift(),u=n.QW(a,"a=ice-lite").length>0;switch(this.XY=n.QW(a,"a=group:BUNDLE ").length>0,s.forEach(function(s,h){var c=n.XW(s)[0].substr(2).split(" "),l=c[0],f="0"===c[1],p=n.ZW(s,a),d=n.QW(s,"a=mid:");if(d=d.length?d[0].substr(6):n.$W(),"application"!==l||"DTLS/SCTP"!==c[2]){var g,v,y,m,E,b,w,T,S,I,_,R,A=n.jW(s);f||(_=n.YW(s,a),(R=n.WW(s,a)).zW="client"),T=n.tz(s);var O,C=n.QW(s,"a=ssrc:").map(function(t){return n.rz(t)}).filter(function(t){return"cname"===t.iz})[0];C&&(O=C.value);var k=n.QW(s,"a=end-of-candidates",a).length>0,N=n.QW(s,"a=candidate:").map(function(t){return n.ex(t)}).filter(function(t){return"1"===t.RW});if("offer"!==t.type||f)"answer"!==t.type||f||(v=(g=e.eW[h]).sW,y=g.OW,m=g.NW,E=g.hW,b=g.cW,w=g.FW,S=g.kW,e.eW[h].xW=T,e.eW[h].LW=A,e.eW[h].BW=O,(u||k)&&N.length&&y.nz(N),e.XY&&0!==h||(y.start(v,_,"controlling"),m.start(R)),e.DW(g,"sendrecv"===p||"recvonly"===p,"sendrecv"===p||"sendonly"===p),!b||"sendrecv"!==p&&"sendonly"!==p?delete g.cW:(I=b.track,o.push([I,b]),i.addTrack(I)));else{var P,D=e.XY&&h>0?{sW:e.eW[0].sW,OW:e.eW[0].OW,NW:e.eW[0].NW}:e.IW(d,h);if(!k||e.XY&&0!==h||D.OW.nz(N),S=RTCRtpReceiver.sz(l),r.version<15019&&(S.lW=S.lW.filter(function(t){return"rtx"!==t.name})),w=[{qW:1001*(2*h+2)}],"sendrecv"!==p&&"sendonly"!==p||(I=(b=new RTCRtpReceiver(D.NW,l)).track,o.push([I,b]),i.addTrack(I)),e.YY.length>0&&e.YY[0].getTracks().length>=h)"audio"===l?P=e.YY[0].getAudioTracks()[0]:"video"===l&&(P=e.YY[0].getVideoTracks()[0]),P&&(r.version>=15019&&"video"===l&&(w[0].GW={qW:1001*(2*h+2)+1}),E=new RTCRtpSender(P,D.NW));e.eW[h]={sW:D.sW,OW:D.OW,NW:D.NW,kW:S,LW:A,hW:E,cW:b,kind:l,ez:d,BW:O,FW:w,xW:T},e.DW(e.eW[h],!1,"sendrecv"===p||"sendonly"===p)}}else e.eW[h]={ez:d,KW:!0}}),this.remoteDescription={type:t.type,sdp:t.sdp},t.type){case"offer":this.JW("have-remote-offer");break;case"answer":this.JW("stable");break;default:throw new TypeError('unsupported type "'+t.type+'"')}return i.getTracks().length&&(e.WY.push(i),window.setTimeout(function(){var t=new Event("addstream");t.stream=i,e.dispatchEvent(t),null!==e.onaddstream&&window.setTimeout(function(){e.onaddstream(t)},0),o.forEach(function(t){var n=t[0],r=t[1],o=new Event("track");o.track=n,o.receiver=r,o.streams=[i],e.dispatchEvent(o),null!==e.QY&&window.setTimeout(function(){e.QY(o)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.eW.forEach(function(t){t.OW&&t.OW.stop(),t.NW&&t.NW.stop(),t.hW&&t.hW.stop(),t.cW&&t.cW.stop()}),this.JW("closed")},window.RTCPeerConnection.prototype.JW=function(t){this.signalingState=t;var e=new Event("signalingstatechange");this.dispatchEvent(e),null!==this.onsignalingstatechange&&this.onsignalingstatechange(e)},window.RTCPeerConnection.prototype.aW=function(){var t=new Event("negotiationneeded");this.dispatchEvent(t),null!==this.onnegotiationneeded&&this.onnegotiationneeded(t)},window.RTCPeerConnection.prototype.PW=function(){var t,e={oz:0,closed:0,az:0,hz:0,connected:0,cz:0,ll:0};if(this.eW.forEach(function(t){e[t.OW.state]++,e[t.NW.state]++}),e.connected+=e.cz,t="new",e.ll>0?t="failed":e.az>0||e.hz>0?t="connecting":e.uz>0?t="disconnected":e.oz>0?t="new":(e.connected>0||e.cz>0)&&(t="connected"),t!==this.iceConnectionState){this.iceConnectionState=t;var i=new Event("iceconnectionstatechange");this.dispatchEvent(i),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(i)}},window.RTCPeerConnection.prototype.createOffer=function(){var t,e=this;if(this.bW)throw new Error("createOffer called while there is a pending offer.");1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var i=[],o=0,s=0;if(this.YY.length&&(o=this.YY[0].getAudioTracks().length,s=this.YY[0].getVideoTracks().length),t){if(t.PY||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.lz&&(o=t.lz),void 0!==t.pz&&(s=t.pz)}for(this.YY.length&&this.YY[0].getTracks().forEach(function(t){i.push({kind:t.kind,track:t,dz:"audio"===t.kind?o>0:s>0}),"audio"===t.kind?o--:"video"===t.kind&&s--});o>0||s>0;)o>0&&(i.push({kind:"audio",dz:!0}),o--),s>0&&(i.push({kind:"video",dz:!0}),s--);i=function(t){var e=t.filter(function(t){return"audio"===t.kind}),i=t.filter(function(t){return"video"===t.kind});for(t=[];e.length||i.length;)e.length&&t.push(e.shift()),i.length&&t.push(i.shift());return t}(i);var a=n.fz(),u=[];i.forEach(function(t,i){var o=t.track,s=t.kind,a=n.$W(),h=e.XY&&i>0?{sW:u[0].sW,OW:u[0].OW,NW:u[0].NW}:e.IW(a,i),c=RTCRtpSender.sz(s);r.version<15019&&(c.lW=c.lW.filter(function(t){return"rtx"!==t.name})),c.lW.forEach(function(t){"H264"===t.name&&void 0===t.parameters.gz&&(t.parameters.gz="1")});var l,f,p=[{qW:1001*(2*i+1)}];o&&(r.version>=15019&&"video"===s&&(p[0].GW={qW:1001*(2*i+1)+1}),l=new RTCRtpSender(o,h.NW)),t.dz&&(f=new RTCRtpReceiver(h.NW,s)),u[i]={sW:h.sW,OW:h.OW,NW:h.NW,kW:c,LW:null,hW:l,cW:f,kind:s,ez:a,FW:p,xW:null}}),this.XY&&(a+="a=group:BUNDLE "+u.map(function(t){return t.ez}).join(" ")+"\r\n"),i.forEach(function(t,i){var r=u[i];a+=n.Ez(r,r.kW,"offer",e.YY[0])}),this.bW=u;var h=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,h),Promise.resolve(h)},window.RTCPeerConnection.prototype.createAnswer=function(){var t=this,e=n.fz();this.XY&&(e+="a=group:BUNDLE "+this.eW.map(function(t){return t.ez}).join(" ")+"\r\n"),this.eW.forEach(function(i){if(i.KW)e+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+i.ez+"\r\n";else{var r=t.uW(i.kW,i.LW);e+=n.Ez(i,r,"answer",t.YY[0])}});var i=new RTCSessionDescription({type:"answer",sdp:e});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,i),Promise.resolve(i)},window.RTCPeerConnection.prototype.addIceCandidate=function(t){if(t){var e=t.sdpMLineIndex;if(t.sdpMid)for(var i=0;i<this.eW.length;i++)if(this.eW[i].ez===t.sdpMid){e=i;break}var r=this.eW[e];if(r){var o=Object.keys(t.candidate).length>0?n.ex(t.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return Promise.resolve();if("1"!==o.RW)return Promise.resolve();r.OW.vz(o);var s=n.nW(this.remoteDescription.sdp);s[e+1]+=(o.type?t.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=s.join("")}}else for(var a=0;a<this.eW.length;a++)if(this.eW[a].OW.vz({}),this.XY)return Promise.resolve();return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var t=[];this.eW.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(i){e[i]&&t.push(e[i].getStats())})});var e=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(i){var n=new Map;Promise.all(t).then(function(t){t.forEach(function(t){Object.keys(t).forEach(function(e){t[e].type=function(t){return{yz:"inbound-rtp",Tz:"outbound-rtp",mz:"candidate-pair",bY:"local-candidate",CY:"remote-candidate"}[t.type]||t.type}(t[e]),n.set(e,t[e])})}),e&&window.setTimeout(e,0,n),i(n)})})}}};t.i={aL:o.aL,cL:i(126)}},function(t,e,i){"use strict";var n={$W:function(){return Math.random().toString(36).substr(2,10)}};n.HW=n.$W(),n.XW=function(t){return t.trim().split("\n").map(function(t){return t.trim()})},n.nW=function(t){return t.split("\nm=").map(function(t,e){return(e>0?"m="+t:t).trim()+"\r\n"})},n.QW=function(t,e){return n.XW(t).filter(function(t){return 0===t.indexOf(e)})},n.ex=function(t){for(var e,i={Iz:(e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" "))[0],RW:e[1],protocol:e[2].toLowerCase(),Sz:parseInt(e[3],10),ip:e[4],port:parseInt(e[5],10),type:e[7]},n=8;n<e.length;n+=2)switch(e[n]){case"raddr":i.Rz=e[n+1];break;case"rport":i.wz=parseInt(e[n+1],10);break;case"tcptype":i.bz=e[n+1];break;default:i[e[n]]=e[n+1]}return i},n.wW=function(t){var e=[];e.push(t.Iz),e.push(t.RW),e.push(t.protocol.toUpperCase()),e.push(t.Sz),e.push(t.ip),e.push(t.port);var i=t.type;return e.push("typ"),e.push(i),"host"!==i&&t.Rz&&t.wz&&(e.push("raddr"),e.push(t.Rz),e.push("rport"),e.push(t.wz)),t.bz&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t.bz)),"candidate:"+e.join(" ")},n.Cz=function(t){return t.substr(14).split(" ")},n._z=function(t){var e=t.substr(9).split(" "),i={fW:parseInt(e.shift(),10)};return e=e[0].split("/"),i.name=e[0],i.vW=parseInt(e[1],10),i.yW=3===e.length?parseInt(e[2],10):1,i},n.Pz=function(t){var e=t.fW;return void 0!==t.gW&&(e=t.gW),"a=rtpmap:"+e+" "+t.name+"/"+t.vW+(1!==t.yW?"/"+t.yW:"")+"\r\n"},n.Az=function(t){var e=t.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},n.Oz=function(t){return"a=extmap:"+(t.id||t.Nz)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+"\r\n"},n.Dz=function(t){for(var e,i={},n=t.substr(t.indexOf(" ")+1).split(";"),r=0;r<n.length;r++)i[(e=n[r].trim().split("="))[0].trim()]=e[1];return i},n.kz=function(t){var e="",i=t.fW;if(void 0!==t.gW&&(i=t.gW),t.parameters&&Object.keys(t.parameters).length){var n=[];Object.keys(t.parameters).forEach(function(e){n.push(e+"="+t.parameters[e])}),e+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return e},n.Lz=function(t){var e=t.substr(t.indexOf(" ")+1).split(" ");return{type:e.shift(),mW:e.join(" ")}},n.Mz=function(t){var e="",i=t.fW;return void 0!==t.gW&&(i=t.gW),t.TW&&t.TW.length&&t.TW.forEach(function(t){e+="a=rtcp-fb:"+i+" "+t.type+(t.mW&&t.mW.length?" "+t.mW:"")+"\r\n"}),e},n.rz=function(t){var e=t.indexOf(" "),i={qW:parseInt(t.substr(7,e-7),10)},n=t.indexOf(":",e);return n>-1?(i.iz=t.substr(e+1,n-e-1),i.value=t.substr(n+1)):i.iz=t.substr(e+1),i},n.Fz=function(t){var e=n.QW(t,"a=mid:")[0];if(e)return e.substr(6)},n.Uz=function(t){var e=t.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},n.WW=function(t,e){return{zW:"auto",Bz:n.QW(t+e,"a=fingerprint:").map(n.Uz)}},n.Hz=function(t,e){var i="a=setup:"+e+"\r\n";return t.Bz.forEach(function(t){i+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"}),i},n.YW=function(t,e){var i=n.XW(t);return{xz:(i=i.concat(n.XW(e))).filter(function(t){return 0===t.indexOf("a=ice-ufrag:")})[0].substr(12),password:i.filter(function(t){return 0===t.indexOf("a=ice-pwd:")})[0].substr(10)}},n.qz=function(t){return"a=ice-ufrag:"+t.xz+"\r\na=ice-pwd:"+t.password+"\r\n"},n.jW=function(t){for(var e={lW:[],pW:[],dW:[],UW:[]},i=n.XW(t)[0].split(" "),r=3;r<i.length;r++){var o=i[r],s=n.QW(t,"a=rtpmap:"+o+" ")[0];if(s){var a=n._z(s),u=n.QW(t,"a=fmtp:"+o+" ");switch(a.parameters=u.length?n.Dz(u[0]):{},a.TW=n.QW(t,"a=rtcp-fb:"+o+" ").map(n.Lz),e.lW.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":e.dW.push(a.name.toUpperCase())}}}return n.QW(t,"a=extmap:").forEach(function(t){e.pW.push(n.Az(t))}),e},n.Gz=function(t,e){var i="";i+="m="+t+" ",i+=e.lW.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=e.lW.map(function(t){return void 0!==t.gW?t.gW:t.fW}).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",e.lW.forEach(function(t){i+=n.Pz(t),i+=n.kz(t),i+=n.Mz(t)});var r=0;return e.lW.forEach(function(t){t.Vz>r&&(r=t.Vz)}),r>0&&(i+="a=maxptime:"+r+"\r\n"),i+="a=rtcp-mux\r\n",e.pW.forEach(function(t){i+=n.Oz(t)}),i},n.tz=function(t){var e,i=[],r=n.jW(t),o=-1!==r.dW.indexOf("RED"),s=-1!==r.dW.indexOf("ULPFEC"),a=n.QW(t,"a=ssrc:").map(function(t){return n.rz(t)}).filter(function(t){return"cname"===t.iz}),u=a.length>0&&a[0].qW,h=n.QW(t,"a=ssrc-group:FID").map(function(t){var e=t.split(" ");return e.shift(),e.map(function(t){return parseInt(t,10)})});h.length>0&&h[0].length>1&&h[0][0]===u&&(e=h[0][1]),r.lW.forEach(function(t){if("RTX"===t.name.toUpperCase()&&t.parameters.EW){var n={qW:u,jz:parseInt(t.parameters.EW,10),GW:{qW:e}};i.push(n),o&&((n=JSON.parse(JSON.stringify(n))).Qz={qW:e,Kz:s?"red+ulpfec":"red"},i.push(n))}}),0===i.length&&u&&i.push({qW:u});var c=n.QW(t,"b=");return c.length&&(0===c[0].indexOf("b=TIAS:")?c=parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")&&(c=parseInt(c[0].substr(5),10)),i.forEach(function(t){t.Yz=c})),i},n.Wz=function(t){var e={},i=n.QW(t,"a=ssrc:").map(function(t){return n.rz(t)}).filter(function(t){return"cname"===t.iz})[0];i&&(e.BW=i.value,e.qW=i.qW);var r=n.QW(t,"a=rtcp-rsize");e.zz=r.length>0,e.Jz=0===r.length;var o=n.QW(t,"a=rtcp-mux");return e.Xz=o.length>0,e},n.Zz=function(t){var e,i=n.QW(t,"a=msid:");if(1===i.length)return{stream:(e=i[0].substr(7).split(" "))[0],track:e[1]};var r=n.QW(t,"a=ssrc:").map(function(t){return n.rz(t)}).filter(function(t){return"msid"===t.iz});return r.length>0?{stream:(e=r[0].value.split(" "))[0],track:e[1]}:void 0},n.fz=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.Ez=function(t,e,i,r){var o=n.Gz(t.kind,e);if(o+=n.qz(t.sW.$z()),o+=n.Hz(t.NW.$z(),"offer"===i?"actpass":"active"),o+="a=mid:"+t.ez+"\r\n",t.direction?o+="a="+t.direction+"\r\n":t.hW&&t.cW?o+="a=sendrecv\r\n":t.hW?o+="a=sendonly\r\n":t.cW?o+="a=recvonly\r\n":o+="a=inactive\r\n",t.hW){var s="msid:"+r.id+" "+t.hW.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+t.FW[0].qW+" "+s,t.FW[0].GW&&(o+="a=ssrc:"+t.FW[0].GW.qW+" "+s,o+="a=ssrc-group:FID "+t.FW[0].qW+" "+t.FW[0].GW.qW+"\r\n")}return o+="a=ssrc:"+t.FW[0].qW+" cname:"+n.HW+"\r\n",t.hW&&t.FW[0].GW&&(o+="a=ssrc:"+t.FW[0].GW.qW+" cname:"+n.HW+"\r\n"),o},n.ZW=function(t,e){for(var i=n.XW(t),r=0;r<i.length;r++)switch(i[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[r].substr(2)}return e?n.ZW(e):"sendrecv"},n.eJ=function(t){return n.XW(t)[0].split(" ")[0].substr(2)},n.zs=function(t){return"0"===t.split(" ",2)[1]},t.i=n},function(t,e,i){"use strict";t.i=function(){var t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e).catch(function(t){return Promise.reject(function(t){return{name:{FY:"NotAllowedError"}[t.name]||t.name,message:t.message,BY:t.BY,toString:function(){return this.name}}}(t))})}}},function(t,e,i){"use strict";var n=i(17).Wu,r={pL:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this.EY},set:function(t){this.EY&&(this.removeEventListener("track",this.EY),this.removeEventListener("addstream",this.vY)),this.addEventListener("track",this.EY=t),this.addEventListener("addstream",this.vY=function(t){t.stream.getTracks().forEach(function(e){var i=new Event("track");i.track=e,i.receiver={track:e},i.streams=[t.stream],this.dispatchEvent(i)}.bind(this))}.bind(this))}})},lL:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(t){this.mozSrcObject=t}}))},aL:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(t,e){if(n.version<38&&t&&t.iceServers){for(var i=[],r=0;r<t.iceServers.length;r++){var o=t.iceServers[r];if(o.hasOwnProperty("urls"))for(var s=0;s<o.VY.length;s++){var a={url:o.VY[s]};0===o.VY[s].indexOf("turn")&&(a.username=o.username,a.tJ=o.tJ),i.push(a)}else i.push(t.iceServers[r])}t.iceServers=i}return new mozRTCPeerConnection(t,e)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.wY&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.wY}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?RTCIceCandidate:RTCSessionDescription)(arguments[0]),e.apply(this,arguments)}});var t=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var e={yz:"inbound-rtp",Tz:"outbound-rtp",mz:"candidate-pair",bY:"local-candidate",CY:"remote-candidate"},i=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(t,r,o){return i.apply(this,[t||null]).then(function(t){if(n.version<48&&(t=function(t){var e=new Map;return Object.keys(t).forEach(function(i){e.set(i,t[i]),e[i]=t[i]}),e}(t)),n.version<53&&!r)try{t.forEach(function(t){t.type=e[t.type]||t.type})}catch(i){if("TypeError"!==i.name)throw i;t.forEach(function(i,n){t.set(n,Object.assign({},i,{type:e[i.type]||i.type}))})}return t}).then(r,o)}}}};t.i={pL:r.pL,lL:r.lL,aL:r.aL,cL:i(128)}},function(t,e,i){"use strict";var n=i(17).log,r=i(17).Wu;t.i=function(){var t=function(t){return{name:{rJ:"NotAllowedError",FY:"NotAllowedError"}[t.name]||t.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[t.message]||t.message,BY:t.BY,toString:function(){return this.name+(this.message&&": ")+this.message}}},e=function(e,i,o){var s=function(t){if("object"!=typeof t||t.iJ)return t;var e=[];return Object.keys(t).forEach(function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n=t[i]="object"==typeof t[i]?t[i]:{AY:t[i]};if(void 0===n.min&&void 0===n.max&&void 0===n.OY||e.push(i),void 0!==n.OY&&("number"==typeof n.OY?n.min=n.max=n.OY:t[i]=n.OY,delete n.OY),void 0!==n.AY){t.NY=t.NY||[];var r={};"number"==typeof n.AY?r[i]={min:n.AY,max:n.AY}:r[i]=n.AY,t.NY.push(r),delete n.AY,Object.keys(n).length||delete t[i]}}}),e.length&&(t.iJ=e),t};return e=JSON.parse(JSON.stringify(e)),r.version<38&&(n("spec: "+JSON.stringify(e)),e.HR&&(e.HR=s(e.HR)),e.video&&(e.video=s(e.video)),n("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,i,function(e){o(t(e))})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:function(t){return new Promise(function(i,n){e(t,i,n)})},addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.LY=navigator.mediaDevices.LY||function(){return new Promise(function(t){t([{kind:"audioinput",MY:"default",label:"",xY:""},{kind:"videoinput",MY:"default",label:"",xY:""}])})},r.version<41){var i=navigator.mediaDevices.LY.bind(navigator.mediaDevices);navigator.mediaDevices.LY=function(){return i().then(void 0,function(t){if("NotFoundError"===t.name)return[];throw t})}}if(r.version<49){var o=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return o(e).then(function(t){if(e.HR&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(t){t.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(t(e))})}}navigator.getUserMedia=function(t,i,n){if(r.version<44)return e(t,i,n);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(t).then(i,n)}}},function(t,e,i){"use strict";var n={cL:function(){navigator.getUserMedia||(navigator.webkitGetUserMedia?navigator.getUserMedia=navigator.webkitGetUserMedia.bind(navigator):navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(navigator.getUserMedia=function(t,e,i){navigator.mediaDevices.getUserMedia(t).then(e,i)}.bind(navigator)))}};t.i={cL:n.cL}},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(20);!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(r.HiveComm.Options.Tp);t.fL=e}(t.Options||(t.Options={}))}(e.HiveComm||(e.HiveComm={}))},function(t,e,i){"use strict";var n=function(){function t(t,e,i){this.isLive=t,this.protocol=e,this.IM=i}return t.prototype.uB=function(){var t=new hive.snapshots.StreamInfo;return t.streamType=this.isLive?StreamType.LIVE:StreamType.kK,t.streamProtocol=this.protocol,t.url=this.IM,t},t}();e.AL=n},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(4),o=i(55),s=i(44).Pp,a=i(0),u=i(133),h=i(73),c=i(19),l=i(56),f=i(198),p=i(26),d=i(18),g=i(21),v=i(54),y=i(1),m=i(45),E=f.HiveComm.Options,b=p.HiveComm.HiveTechError,w=p.HiveComm.vE,T=function(t){function e(i,n,r){var o=t.call(this,i,n)||this;return o.options_=new E.nJ,null!=n[e.EL]&&g.Sp(n[e.EL],o.options_),o.UQ=r,o}return n(e,t),e.prototype.getName=function(){return e.EL},e.prototype.getVersion=function(){return this.gL.getPluginVersion()},e.prototype.vL=function(){return!0},e.prototype.yL=function(){return h.lb.Api?this.sJ()&&this.XH()?r.resolve(!0):r.reject(new b(w.pE,"WebRTC DataChannels not supported by browser")):r.reject(new b(w.pE,"Not included in the page"))},e.prototype.initSession=function(t,e){var i=this;return this.yL().then(function(){var n=e.ticket;i._L();var r=n.NN();0===r.indexOf("//")&&(r=location.protocol+r);var o=i.TL(t,n,r,e);return v.zu.registerTech(i,o.id),v.zu.registerComm(i.gL,o.id),d.HiveRequestFactory.registerTech(o.id,i.getName()),window&&window.activateXHRInterceptor&&window.activateXHRInterceptor(i.gL.loggerLevel()>m.TN.pN.info),o})},e.prototype.isActive=function(t,e){var i=e.manifest.toLowerCase(),n=t.toLowerCase(),r=i.indexOf(".ism/manifest");if(r>-1){var o=i.substring(0,r);if(n.indexOf(o)>-1)return n.indexOf(".ism/manifest(format=mpd-time-csf)")>-1?this.oJ?(e.ticket.SourceURL=t,!0):this.aJ(e,"The player does not use HiveRequest, downgrading to StatsJS"):this.aJ(e,"Protocol not supported by HiveJS tech, downgrading to StatsJS")}else if(n===i)return!!this.oJ||this.aJ(e,"The player does not use HiveRequest, downgrading to StatsJS");return!1},e.prototype.ol=function(e,i){window&&window.deactivateXHRInterceptor&&window.deactivateXHRInterceptor(),t.prototype.ol.call(this,e,i);var n=h.lb.Api();i?(d.HiveRequestFactory.clearSession(e.id),n&&(n.nl(e.id,c.Ml.STOP),n.hJ())):n&&n.nl(e.id,c.Ml.IDLE)},e.prototype.aJ=function(t,e){return t.tech=this.UQ,d.HiveRequestFactory.registerTech(t.id,l.StatsJS.EL),this.oJ&&this.oJ.resolve(),this.oJ=void 0,this.gL.logger().warn("[HiveJS] "+e),this.onError(new b(w.fE,e)),window&&window.deactivateXHRInterceptor&&window.deactivateXHRInterceptor(),!0},e.prototype.oL=function(t){this.oJ=t},e.prototype.onActiveSession=function(t){var e=this;a.Framework.X().apply(new u.cJ(!0));var i=h.lb.Api();if(this.uJ()&&i.lJ(!0),i.start(t.rl,!1).then(function(n){if(e._L(),e.PL=t.rl,e.PL.Ql(e.options_.renderStatsCallback),e.PL.Vl(h.lb.sp(),h.lb.getVersion()),e.PL.Bl.init(e.PL.Ul,t.ticket.sessionId),e.gL.options().testId&&e.PL.Ul.NL(e.gL.options().testId),t.authenticationToken){var r=i.pJ(t.ticket.sessionId);r&&r.fJ.dJ.UM(t.authenticationToken)}e.oJ&&i.request(e.oJ,t.rl.ticket.sessionId),e.PL.Hl.Xu(t.ticket.sessionId,e.gL.getPlayerSource(),200);var o=e.gL.flushTechEvents();o&&o.length>0&&e.PL.Hl.Cd(o),e.gL.updatePlayerInfo(e.PL)}),null!=this.options().onActiveSession)try{this.options().onActiveSession(t.toHiveSession())}catch(t){y.ErrorMonitor.ve().logError("exception in user-defined onActiveSession callback","[HiveJS]",t)}},e.prototype.nl=function(t,e){},e.prototype.TL=function(t,e,i,n){var r=new d.cl(t,e,i,n);return r.ML=!0,r.id=r.ticket.sessionId,r},e.prototype.bL=function(){},e.prototype.uJ=function(){var t=new s;return t.Ad(navigator.userAgent),"Android"==t.Od().name},e.prototype.sJ=function(){return"safari"!=o.Wu.Qu},e.prototype.XH=function(){try{return null!=o.Vu&&null!=o.hL&&"function"==typeof new RTCPeerConnection(null,null).createDataChannel}catch(t){return!1}},e}(l.StatsJS);T.EL="HiveJS",e.HiveJS=T},function(t,e,i){"use strict";var n=i(40),r=i(0),o=i(45),s=i(8),a=i(19),u=i(76),h=i(77),c=i(79),l=i(75),f=i(22),p=i(15),d=i(134),g=i(137),v=i(138),y=i(88),m=i(155),E=i(156),b=i(157),w=i(158),T=i(159),S=i(95),I=i(172),_=i(173),R=i(174),A=i(49),O=i(25),C=i(175),k=i(179),N=i(180),P=i(181),D=i(182),L=i(184),x=i(185),M=i(186),U=i(187),F=i(80),B=i(188),H=i(189),j=i(191),V=i(6),G=i(192),q=V.he.vh,W=V.he.yh,Q=V.he.Th,K=V.he.Ih;if(W)var J=i(193).gJ,Y=i(195).EJ;if(Q)var Z=i(92).WG;if(q)var z=i(196).vJ;if(K)var X=i(81).CH;else var $=i(83).nx;var tt=function(){function t(t){this.yJ=!1,t&&(this.yJ=t)}return t.prototype.apply=function(t){this.yJ?K&&t.bind(new n.ZA(s.pc.sc,X,n.$A.sO)):(t.bind(new n.ZA(s.pc.hc,a.lp,n.$A.sO)),t.bind(new n.ZA(s.pc.G,u.qB,n.$A.sO)),t.bind(new n.ZA(s.pc.nc,h.WB,n.$A.sO)),t.bind(new n.ZA(s.pc.M,c.vH,n.$A.sO)),t.bind(new n.ZA(r.Framework.V.R,o.TN.yN,n.$A.sO)),t.bind(new n.ZA(s.pc.ic,l.Stats.ql,n.$A.pO)),t.bind(new n.ZA(s.pc.uc,f.Gl.Bd,n.$A.pO)),t.bind(new n.ZA(s.pc.lc,f.Gl.ql,n.$A.pO)),K?t.bind(new n.ZA(s.pc.sc,X,n.$A.sO)):t.bind(new n.ZA(s.pc.sc,$,n.$A.sO))),t.bind(new n.ZA(p.qu.lu,G.TJ,n.$A.pO)),t.bind(new n.ZA(s.pc.oc,F.IH,n.$A.sO)),t.bind(new n.ZA(p.qu.Fu,M.mJ,n.$A.sO)),t.bind(new n.ZA(p.qu._u,d.sh,n.$A.sO)),t.bind(new n.ZA(p.qu.Ru,g.IJ,n.$A.pO)),t.bind(new n.ZA(p.qu.Pu,v.SJ,n.$A.pO)),t.bind(new n.ZA(p.qu.yu,m.Ra,n.$A.pO)),t.bind(new n.ZA(p.qu.Tu,y.Yq,n.$A.pO)),q&&t.bind(new n.ZA(p.qu.mu,z,n.$A.pO)),t.bind(new n.ZA(p.qu.bu,E.RJ,n.$A.pO)),"undefined"!=typeof HiveOriginalXMLHttpRequest?t.bind(new n.ZA(r.Framework.V.H,HiveOriginalXMLHttpRequest)):t.bind(new n.ZA(r.Framework.V.H,XMLHttpRequest)),t.bind(new n.ZA(p.qu.Mu,x.wJ,n.$A.sO)),t.bind(new n.ZA(p.qu.Du,b.bJ,n.$A.pO)),t.bind(new n.ZA(r.Framework.V.F,C.CJ,n.$A.sO)),t.bind(new n.ZA(p.qu.q,k._J,n.$A.sO)),t.bind(new n.ZA(p.qu.Su,U.PJ,n.$A.pO)),t.bind(new n.ZA(p.qu.Iu,w.AJ,n.$A.pO)),t.bind(new n.ZA(p.qu.pu,T.Qa,n.$A.pO)),t.bind(new n.ZA(p.qu.du,S.iQ,n.$A.pO)),t.bind(new n.ZA(p.qu.fu,H.OJ,n.$A.pO)),t.bind(new n.ZA(p.qu.gu,H.NJ,n.$A.pO)),t.bind(new n.ZA(p.qu.Eu,j.DJ,n.$A.pO)),t.bind(new n.ZA(p.qu.vu,j.kJ,n.$A.pO)),t.bind(new n.ZA(p.qu.xu,B.Vo,n.$A.pO)),t.bind(new n.ZA(p.qu.Cu,I.LJ,n.$A.pO)),t.bind(new n.ZA(p.qu.wu,_.MJ,n.$A.pO)),t.bind(new n.ZA(p.qu.ku,R.FJ,n.$A.pO)),t.bind(new n.ZA(p.qu.Nu,D.UJ,n.$A.pO)),t.bind(new n.ZA(p.qu.Au,A.Ak,n.$A.pO)),t.bind(new n.ZA(p.qu.Ou,L.BJ,n.$A.pO)),t.bind(new n.ZA(r.Framework.V.U,O.Rf.Fa,n.$A.pO)),t.bind(new n.ZA(p.qu.Lu,N.ya,n.$A.pO)),W&&(t.bind(new n.ZA(p.qu.Bu,J,n.$A.pO)),t.bind(new n.ZA(p.qu.Uu,Y,n.$A.pO))),Q&&t.bind(new n.ZA(p.qu.Th,Z,n.$A.pO)),t.bind(new n.ZA(p.qu.Hu,P.HJ,n.$A.pO))},t}();e.cJ=tt},function(t,e,i){"use strict";var n=i(4),r=i(28).cg,o=i(0),s=i(43),a=i(15),u=i(5),h=i(19),c=i(3),l=i(135),f=i(47),p=i(8),d=i(136),g=i(6),v=i(1),y=i(2),m=g.he.yh,E=g.he.Th,b=g.he.mh,w=function(){function t(t){this.state=h.Ml.Ll,this.requestTimeout=-1;try{this.logger=o.Framework.resolve(o.Framework.V.R).log(t.ticket.sessionId),this.loggerId="[SWARM] ",this.Ng=o.Framework.resolve(o.Framework.V.F),this.sessionId=t.ticket.sessionId,this.rl=t,this.ED=o.Framework.resolve(a.qu.Ru),this.sC=o.Framework.resolve(a.qu.yu),this.oG=o.Framework.resolve(a.qu.pu),this.xJ=o.Framework.resolve(a.qu.bu),this.gD=o.Framework.resolve(a.qu.Iu),this.TD=o.Framework.resolve(a.qu.du),this.uploadScore=o.Framework.resolve(a.qu.ku),this.qJ=o.Framework.resolve(a.qu.wu),this.GJ=o.Framework.resolve(a.qu.Du),this.vD=o.Framework.resolve(a.qu.Cu),this.fJ=o.Framework.resolve(a.qu.Pu),this.WM=o.Framework.resolve(a.qu.Lu),this.yD=o.Framework.resolve(a.qu.Hu),this.zM=o.Framework.resolve(a.qu.Au),this.mD=o.Framework.resolve(a.qu.Ou),this.ID=o.Framework.resolve(a.qu.Su),this.zV=o.Framework.resolve(a.qu.xu),this.YM=o.Framework.resolve(a.qu.lu),(m||o.Framework.C()&&f.$N.JN)&&(this.VJ=o.Framework.resolve(a.qu.Uu),this.jJ=o.Framework.resolve(a.qu.Bu)),(E||o.Framework.C()&&f.$N.XN)&&(this.QJ=o.Framework.resolve(a.qu.Th)),this.swarmId=this.KJ(t.ticket.kd()),this.YM.init(this),this.xJ.init(this),this.ID.init(this),this.zV.init(this),this.TD.init(this),this.qJ.init(this),this.GJ.init(this),this.vD.init(this),this.fJ.init(this),this.ED.init(this),this.oG.init(this),this.zM.init(this),this.mD.init(this),this.WM.init(this),(E||o.Framework.C()&&f.$N.XN)&&this.QJ.init(this),(m||o.Framework.C()&&f.$N.JN)&&this.jJ.init(this)}catch(t){throw v.ErrorMonitor.ve().logError("Error constructing swarm object",this.loggerId,y.hs.rs.Zn,t),new Error(t)}}return t.prototype.init=function(t,e,i){try{b?this.YJ(!1):i?this.YJ(!1):this.YJ(!0),this.yD.setReportingGuid(this.rl.identity.rp()),this.yD.WJ(i),this.sC.init(u.hh.Ra.Ta,u.hh.Ra.ma);var n=this.fJ.RD(t,e);this.yD.setContextId(this.fJ.dJ.getContextId());var r=new l.zJ(n);this.rl.OL=r,this.rl.Ul.OL=r,this.GJ.start(this.fJ,this.oG),(m||o.Framework.C()&&f.$N.JN)&&this.jJ.JJ(this.oG);var s=[this.oG,this.TD,this.GJ,this.rl.Ul,this.rl.Hl,this.zV];(m||o.Framework.C()&&f.$N.JN)&&s.push(this.jJ),(E||o.Framework.C()&&f.$N.XN)&&s.push(this.QJ),(a=this.Ng).start.apply(a,[t.sessionId].concat(s)),this.rl.Ul.DB(this.TD),this.rl.Ul.rB(this.yD),this.yD.XJ(t)}catch(t){throw v.ErrorMonitor.ve().logError("Error initializing swarm object",this.loggerId,y.hs.rs.$n,t),new Error(t)}var a},t.prototype.YJ=function(t){t&&"undefined"!=typeof navigator&&navigator.hardwareConcurrency?(this.yD.ZJ(navigator.hardwareConcurrency),this.yD.$J(navigator.hardwareConcurrency)):(this.yD.ZJ(1),this.yD.$J(1)),this.logger.debug(this.loggerId+"My score "+this.yD.QG())},t.prototype.KJ=function(t){return r.oT(t).toString(r.Uy.By)},t.prototype.request=function(t){this.eX(),this.ED.request(t)},t.prototype.tX=function(){this.state!==h.Ml.STOP?(this.oG.stop(),this.TD.stop(),this.mD.rX(),this.mD.iX(),this.GJ.nX(),this.jJ&&this.jJ.sX(),this.rl.nl(h.Ml.IDLE),this.sC.Qq(),this.ID.oX(),this.ED.aX(),this.YM.hX(),o.Framework.clearTimeout(this.requestTimeout)):this.logger.debug("Ignoring changing state from Stop to Idle")},t.prototype.nl=function(t,e){try{if(this.state!=t){switch(this.logger.info("Switching state "+h.Ml[this.state]+" -> "+h.Ml[t]),t){case h.Ml.STOP:this.tX(),this.Ng.stop(e);break;case h.Ml.IDLE:this.tX();break;case h.Ml.Ll:this.oG.start(),this.TD.start(this.fJ.dJ),this.mD.cX(),this.GJ.uX(),this.jJ&&this.jJ.lX(),this.rl.nl(h.Ml.Ll),this.YM.pX()}this.state=t}}catch(t){v.ErrorMonitor.ve().logError("Error changing peer status",this.loggerId,y.hs.rs.es,t)}},t.prototype.eX=function(){var t=this;try{o.Framework.clearTimeout(this.requestTimeout),this.nl(h.Ml.Ll),this.requestTimeout=o.Framework.setTimeout(function(){t.nl(h.Ml.IDLE)},u.hh.sh.nh)}catch(t){v.ErrorMonitor.ve().logError("Error requesting timeout",this.loggerId,y.hs.rs.Qn,t)}},t}();e.dX=w;var T=function(){function t(){this.Ag=new s.Counter,this.fX=!1,this.zl=new c,this.gX=new c,this.EX=!1,this.vX=!1,this.yX=o.Framework.resolve(a.qu.Mu),this.TX=o.Framework.resolve(a.qu.Fu),this.ud=o.Framework.resolve(p.pc.sc),this.mX=!1}return t.prototype.start=function(t,e){this.logger=o.Framework.resolve(o.Framework.V.R).log(t.ticket.sessionId);var i=t.ticket;this.TX.init(this,t);var r=i.sessionId;if(this.zl.has(r))this.logger.warn("SESSION ALREADY ACTIVE "+r);else{d.IX.fd(t.xl.client);var s=new w(t);s.init(i,e,this.mX),this.ud.getConnectivityInfo().then(function(t){var e=t.getNetworkChanged().getPrivateIp();e&&s.yD.DH(e)}).done(),t.Ul.NB(this.ud),this.logger.info("PEER CONTEXT STARTED"),this.zl.set(r,s),this.gX.set(s.swarmId,r)}return 1!=this.zl.length&&!this.vX||o.Framework.C()||(this.yX.init(),this.vX=!1),n.resolve(i.SourceURL)},t.prototype.hJ=function(){this.vX=!0},t.prototype.mg=function(t){if(this.gX.has(t)){var e=this.gX.get(t);return this.zl.get(e)}return null},t.prototype.pJ=function(t){return this.zl.get(t)},t.prototype.SX=function(t){return this.zl.has(t)?this.zl.get(t).ED:null},t.prototype.request=function(t,e){this.pJ(e).request(t)},t.prototype.nl=function(t,e){this.pJ(t).nl(e,t)},t.prototype.abort=function(t,e){this.SX(e).abort(t)},t.prototype.lJ=function(t){this.mX=t},t}();e.sh=T},function(t,e,i){"use strict";var n=function(){function t(t){this.wD=t}return t.prototype.uB=function(){var t=new hive.snapshots.StreamInfo;return t.streamType=this.wD.isLive()?StreamType.LIVE:StreamType.kK,t.streamProtocol=this.wD.getStreamProtocol(),t.url=this.wD.uM(),t},t}();e.zJ=n},function(t,e,i){"use strict";var n=i(22).Gl.rd,r=i(0),o=i(23),s=function(){function t(){}return t.fd=function(t){this.client=t},t.RX=function(t,e,i,s,a){var u=new n;u.app=t,u.guid=s,u.createdAt=r.Framework.time(),u.name=i,u.tags=e,u.data=JSON.parse(a);var h=new o.Jd(Services.Xd,2,JSON.stringify(u));this.client&&this.client.zd().send(h)},t}();e.IX=s},function(t,e,i){"use strict";var n=i(3),r=i(4),o=i(24),s=i(7),a=i(5),u=i(0),h=i(9),c=i(15),l=i(43),f=i(1),p=i(2),d=function(){function t(){this.wX=new n,this.bX=!1,this.CX=0,this.loggerId="[HiveCache] ",this._X=5,this.TX=u.Framework.resolve(c.qu.Fu),this.PX=new l.RO}return t.prototype.init=function(t){this.logger=u.Framework.resolve(u.Framework.V.R).log(t.sessionId),this.gD=t.gD,this.sC=t.sC,this.TD=t.TD,this.Ul=t.rl.Ul,this.sessionId=t.rl.ticket.sessionId,this.xJ=t.xJ,this.vD=t.vD,this.AX=t.fJ,this.yD=t.yD,this.ID=t.ID,this.YM=t.YM,this.Ul.eB(this.PX)},t.prototype.request=function(t){try{var e=t.url;this.logger.info("HIVE REQ "+e),t.Bf=u.Framework.time();var i=this.AX.OX(t),n=i.EM(t.url);this.YM.NX(n),this.$D(t,n,i,o.bf.Tf)}catch(t){f.ErrorMonitor.ve().logError("Error on player request",this.loggerId,p.hs.Wn.Yn,t)}},t.prototype.$D=function(t,e,i,n){var r=this;if(e.ig()){if(e.Xf()==h.vc.fc){var a=i.PM(e,n);if(a.hF)return this.logger.debug("DO NOT CONTINUE WITH THE REQUEST "+e.Zf()+". ALREADY REQUESTED  "+a.rF+" PENDING REQUEST "+a.aF),null;if(a.aF&&n==o.bf.Tf){var u=this.DX(t,e,i,n);return u.length>0?(u.forEach(function(e){var i=r.wX.get(e);r.wX.set(t.id,i),r.wX.delete(e)}),null):(this.logger.info("PREFETCH UPGRADE FAILED. THIS SHOULD NOT HAPPEN. CHECK FOR MULTIPLE PLAYER REQUESTS FOR THE SAME FRAGMENT"),this.kX(t,e,i,n))}return this.kX(t,e,i,n)}return this.kX(t,e,i,n)}var c=s.rc.Oh.next(),l=new o.hg(t,c,n,e,i);return this.wX.set(t.id,l),l.type=o.bf.mf,this.LX(l),l},t.prototype.kX=function(t,e,i,n){var r=this,a=s.rc.Oh.next(),u=new o.hg(t,a,n,e,i);if(this.wX.set(t.id,u),e.Xf()==h.vc.fc&&(i.uF(u),n!==o.bf.If&&n!==o.bf.wf)){var c=e.bitrate,l=this.yD.MX();0!=c&&(this.yD.FX(c),c!=l&&(this.bX=!0,this.CX=0),this.bX&&this.CX++,this.CX==this._X&&(this.TD.Kj(),this.bX=!1,this.CX=0))}return this.UX(e.Zf()).then(function(t){null!=t?(r.YM.BX(u,t),r.HX(u,t),i.lF(u.Zf(),u.$f()),i.gF(e.bitrate)):(r.xX(e,u),u.Xf()==h.vc.fc&&(i.dF(u),u.type==o.bf.Tf&&r.PX.add(0)))}),u},t.prototype.DX=function(t,e,i,n){return i.cF(t,e,n)},t.prototype.UX=function(t){return this.sC.get(t)},t.prototype.xX=function(t,e){this.gD.contains(t.Zf())?(this.logger.debug("OBJ IDX CONTAINS "+e.Zf()),e.Jf()==o.bf.If&&(e.type=o.bf.wf),this.Cf(e)):e.Jf()!=o.bf.wf?this.LX(e):(f.ErrorMonitor.ve().logError("P2P PREFETCH FAILED BECAUSE OBJECT INDEX DOES NOT CONTAIN REQUEST ENTITY",this.loggerId,{P_:e.Zf()}),e.Wf.lF(e.Zf(),e.$f()))},t.prototype.aX=function(){var t=this;this.wX.forEach(function(e){return t.abort(e.Kf)})},t.prototype.abort=function(t){if(this.wX.has(t.id)){var e=this.wX.get(t.id).$f();this.logger.debug("REQUEST "+e+" ABORTED "),this.vD.Ys(e)?this.vD.qX(e):this.xJ.Ys(e)&&this.xJ.qX(e),this.wX.delete(t.id)}},t.prototype.Cf=function(t){t.type==o.bf.Tf&&(t.type=o.bf.Rf),t.type==o.bf.wf&&(t.Vf=!0),this.vD.request(t)},t.prototype.GX=function(t){if(0!=t.Qf&&(t.qf.Af=t.Qf,this.logger.info("ALREADY DOWNLOADED "+t.qf.Af+" BYTES"),t.qf.Of=t.Qf),!a.hh.K.Na&&t.Qf&&(t.qf.Af=0),this.YM.VX(t),t.type!=o.bf.wf)t.type=o.bf.Sf,this.LX(t);else if(t.Xf()==h.vc.fc){t.Wf.pF(t.Zf()),t.Wf.lF(t.Zf(),t.$f());var e=t.zf;e.bitrate&&t.Wf.gF(e.bitrate)}},t.prototype.jX=function(t){var e=this;this.logger.info("SUCCESS FROM P2P FOR "+t.eg()+" [REQ "+t.Yf+"] ["+o.bf[t.type]+"] AFTER "+t.og()+" [bw:"+t.ag().Gh()+"]"),this.QX(t),this.KX(t,this.XM(t.type)),this.ID.YX(t);var i=this.xJ.WX().Hh();this.YM.zX(t,i),this.JX(t).then(function(){t.Wf.CM(t),e.XX()}).finally(function(){e.XM(t.type)&&e.ZX(t),e.wX.delete(t.Kf.id)})},t.prototype.LX=function(t){this.YM.$X(t),this.xJ.request(t)},t.prototype.eZ=function(t){this.XX();var e=this.xJ.WX().Hh();this.YM.tZ(t,e),t.Xf()==h.vc.fc&&(t.Wf.pF(t.Zf()),t.Wf.lF(t.Zf(),t.$f())),this.rZ(t)},t.prototype.iZ=function(t){var e=this;this.QX(t),this.KX(t,this.XM(t.type)),t.type==o.bf.Sf&&this.logger.debug("CDN COMPENSATION TIME "+(t.qf.Uf-t.Kf.Bf)+" / "+(t.qf.Uf-t.qf.Lf)+" P2P TIME "+(t.qf.Ff-t.qf.Mf)),-1==[h.vc.gc,h.vc.Ec].indexOf(t.Xf())&&this.ID.YX(t);var i=this.xJ.WX().Hh();this.YM.nZ(t,i),this.JX(t).then(function(){t.Xf()==h.vc.gc&&t.Wf.SM(t),-1==[h.vc.gc,h.vc.Ec].indexOf(t.Xf())&&t.Wf.CM(t),e.XX()}).catch(function(t){e.logger.error(t)}).finally(function(){e.XM(t.type)&&e.ZX(t),e.wX.delete(t.Kf.id)})},t.prototype.QX=function(t){t.type==o.bf.wf&&(t.qf.p2pAgenTrafficSuccessQt=t.qf.Af),t.type==o.bf.If&&(t.qf.kf=t.qf.Df,t.Gf&&(t.qf.srcOtherRespQt=t.qf.Df)),t.qf.Pf=t.qf.Df+t.qf.Af,t.Kf.total=t.qf.Pf},t.prototype.KX=function(t,e){if(this.sZ(t),e){var i=s.rc.createEvent(ProgressEvent,"progress",{lengthComputable:!0,total:t.qf.Pf,loaded:t.qf.Pf,currentTarget:t.Kf});t.Kf.dispatchEvent(i),t.zf.O_()||(t.Kf.response=t.RM,t.Kf.responseText=t.RM)}},t.prototype.ZX=function(t){var e=t.Kf;this.logger.info("RESPOND TO THE PLAYER "+t.Zf()+" SIZE "+(u.Framework.C()?e.total:t.jf.byteLength)),e.status=200,e.readyState=4,"string"==typeof e.response&&"arraybuffer"===e.responseType&&(e.response=s.rc.tc(e.response)),"text"!=e.responseType&&""!=e.responseType&&delete e.responseText,t.zf.O_()&&(e.response=u.Framework.C()?null:s.rc.Qh(t.jf));var i=s.rc.createEvent(Event,"readystatechange",{currentTarget:e}),n=s.rc.createEvent(ProgressEvent,"load",{bubbles:!1,cancelable:!1,lengthComputable:!1,total:t.zf.O_()?t.jf.byteLength:t.RM.length,currentTarget:e}),r=s.rc.createEvent(ProgressEvent,"loadend",{bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:e.total,total:0,currentTarget:e});e.dispatchEvent(i),e.dispatchEvent(n),e.dispatchEvent(r)},t.prototype.rZ=function(t){this.wX.delete(t.Kf.id);var e=t.Kf,i={bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:e.total,total:0,currentTarget:e};t.xhr.status&&t.xhr.status>0?(e.status=t.xhr.status,e.responseHeaders=t.responseHeaders):e.status=404,e.readyState=4,e.dispatchEvent(s.rc.createEvent(Event,"readystatechange",i)),e.dispatchEvent(s.rc.createEvent(ProgressEvent,"load",i)),e.dispatchEvent(s.rc.createEvent(ProgressEvent,"loadend",i))},t.prototype.JX=function(t){var e=this;return t.zf.ig()?this.sC.put(t).then(function(i){i&&e.TD.oZ(t.zf,t.qf.Pf,t.xq)}):r.resolve(!0)},t.prototype.HX=function(t,e){var i=this;t.jf=e.data,t.responseHeaders=e.headers,t.qq=e.qq,t.qf=e.qf;var n=t.Wf.dM().lx(e.length);this.logger.info("SCHEDULE DELIVERY OF "+t.Zf()+" IN "+n+" SIZE "+(u.Framework.C()?e.length:t.jf.byteLength)+" BYTES"),u.Framework.setTimeout(function(){i.aZ(t)},n)},t.prototype.aZ=function(t){this.logger.debug("DELIVERY OF "+t.Zf()),this.KX(t,!0),this.wX.delete(t.Kf.id);var e=t.Kf.Bf-t.qf.Uf;this.logger.info("FRAGMENT PREFETCHED "+e+" MSECS BEFORE PLAYER REQUEST"),e>0&&t.Xf()==h.vc.fc&&this.PX.add(e);var i;i=t.qf.Mf>0?t.Kf.Bf-t.qf.Mf:t.Kf.Bf-t.qf.Ff,this.logger.info("FRAGMENT REQUESTED "+i+" MSECS BEFORE PLAYER REQUEST"),this.ZX(t)},t.prototype.XM=function(t){return t!=o.bf.wf&&t!=o.bf.If},t.prototype.sZ=function(t){if(t.type!==o.bf.Sf)t.responseHeaders=t.Kf.responseHeaders=t.responseHeaders;else{var e="\nContent-Range: bytes=0-"+(t.size-1)+"/"+t.size+"\n";e+="Content-Length: "+t.size+"\n",t.responseHeaders=t.Kf.responseHeaders=e}null!=t.responseHeaders&&-1!=t.responseHeaders.indexOf("Access-Control-Allow-Origin")||(t.responseHeaders+="\nAccess-Control-Allow-Origin:*")},t.prototype.XX=function(){u.Framework.C()||this.TX.render()},t}();e.IJ=d},function(t,e,i){"use strict";var n=i(57),r=i(87),o=i(0),s=function(){function t(){this.TD=null,this.Ng=o.Framework.resolve(o.Framework.V.F)}return t.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.V.R).log(t.sessionId),this.sG=t,this.TD=t.TD},t.prototype.RD=function(t,e){var i=null,o=t._N();return r.bq.rM(o)?this.dJ=i=new r.bq.Dq(t,e,this.sG):n.DASH.rM(o)?this.dJ=i=new n.DASH.VM(t,this.sG):this.logger.warn("COULD NOT FIND A CONTEXT FOR "+o),null!=i&&this.hZ(this.dJ),i},t.prototype.hZ=function(t){var e=this;null!=this.TD?this.TD.stop().then(function(i){e.TD.start(t)}):this.TD.start(t)},t.prototype.OX=function(t){if(null==this.dJ)this.logger.warn("FIRST REQUEST, COULD NOT FIND RIGHT CONTEXT "+t.url);else if(!this.dJ.mM(t))return this.logger.warn("REQUEST DOES NOT BELONG TO THE CURRENT CONTEXT "+t.url),null;return this.dJ},t}();e.SJ=s},function(t,e,i){"use strict";function n(t,e,i,r){if(!(this instanceof n))return new n(t,e,i,r);this.ls=e||Object.cs,this.Ac=i||Object.Oc,this.ds=r||Function.us,this.root=null,this.length=0,this.addEach(t)}function r(t){this.value=t,this.left=null,this.right=null,this.length=1}function o(t,e,i){if(this.set=t,this.Ok=null,this.end=i,e){var n=this.set.cZ(e);n&&(this.set.uZ(n.value),this.Ok=n.lZ())}}t.i=n;var s=(i(11),i(12)),a=i(39),u=i(13),h=i(38),c=i(69);n.pZ=n,Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),Object.addEach(n.prototype,u.prototype),Object.addEach(n.prototype,h.prototype),n.prototype.mF=!0,n.prototype.Es=function(t){return new this.constructor(t,this.ls,this.Ac,this.ds)},n.prototype.has=function(t,e){if(e)throw new Error("SortedSet#has does not support second argument: equals");return!!this.root&&(this.uZ(t),this.ls(t,this.root.value))},n.prototype.get=function(t,e){if(e)throw new Error("SortedSet#get does not support second argument: equals");return this.root&&(this.uZ(t),this.ls(t,this.root.value))?this.root.value:this.ds(t)},n.prototype.add=function(t){var e=new this.Node(t);if(!this.root)return this.Mk&&this.QA([t],[],0),this.root=e,this.length++,this.Mk&&this.GA([t],[],0),!0;if(this.uZ(t),!this.ls(t,this.root.value)){var i=this.Ac(t,this.root.value);if(0===i)throw new Error("SortedSet cannot contain incomparable but inequal values: "+t+" and "+this.root.value);return this.Mk&&this.QA([t],[],this.root.index),i<0?(e.right=this.root,e.left=this.root.left,this.root.left=null,this.root.dZ()):(e.left=this.root,e.right=this.root.right,this.root.right=null,this.root.dZ()),e.dZ(),this.root=e,this.length++,this.Mk&&this.GA([t],[],this.root.index),!0}return!1},n.prototype.delete=function(t,e){if(e)throw new Error("SortedSet#delete does not support second argument: equals");if(this.root&&(this.uZ(t),this.ls(t,this.root.value))){var i=this.root.index;if(this.Mk&&this.QA([],[t],i),this.root.left){var n=this.root.right;this.root=this.root.left,this.uZ(t),this.root.right=n}else this.root=this.root.right;return this.length--,this.root&&this.root.dZ(),this.Mk&&this.GA([],[t],i),!0}return!1},n.prototype.indexOf=function(t,e){if(e)throw new Error("SortedSet#indexOf does not support second argument: startIndex");return this.root&&(this.uZ(t),this.ls(t,this.root.value))?this.root.index:-1},n.prototype.find=function(t,e,i){if(e)throw new Error("SortedSet#find does not support second argument: equals");if(i)throw new Error("SortedSet#find does not support third argument: index");if(this.root&&(this.uZ(t),this.ls(t,this.root.value)))return this.root},n.prototype.fZ=function(t){if(this.root){for(t=t||this.root;t.right;)t=t.right;return t}},n.prototype.gZ=function(t){if(this.root){for(t=t||this.root;t.left;)t=t.left;return t}},n.prototype.EZ=function(t){if(this.root)return this.uZ(t),this.Ac(this.root.value,t)>0?this.root.lZ():this.root},n.prototype.vZ=function(t){if(this.root)return this.uZ(t),this.Ac(this.root.value,t)>=0?this.root.lZ():this.root},n.prototype.cZ=function(t){if(this.root)return this.uZ(t),this.Ac(this.root.value,t)>=0?this.root:this.root.yZ()},n.prototype.TZ=function(t){if(this.root)return this.uZ(t),this.Ac(this.root.value,t)<=0?this.root.yZ():this.root},n.prototype.pop=function(){if(this.root){var t=this.fZ();return this.delete(t.value),t.value}},n.prototype.shift=function(){if(this.root){var t=this.gZ();return this.delete(t.value),t.value}},n.prototype.push=function(){this.addEach(arguments)},n.prototype.unshift=function(){this.addEach(arguments)},n.prototype.slice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var i=[];if(this.root)for(this.mZ(t);this.root.index<e&&(i.push(this.root.value),this.root.right);)this.uZ(this.root.yZ().value);return i},n.prototype.splice=function(t,e){return this.qk(t,e,Array.prototype.slice.call(arguments,2))},n.prototype.qk=function(t,e,i){if(void 0===t&&void 0===e)return[];(t=t||0)<0&&(t+=this.length),void 0===e&&(e=1/0);var n=[];if(this.root){this.mZ(t);for(var r=0;r<e;r++){n.push(this.root.value);var o=this.root.yZ();if(this.delete(this.root.value),!o)break;this.uZ(o.value)}}return this.addEach(i),n},n.prototype.uZ=function(t){var e,i,n,o,s,a;if(this.root){for(e=i=n=new this.Node,a=new this.Node,s=this.root;;){var u=this.Ac(t,s.value);if(u<0){if(!s.left)break;if(this.Ac(t,s.left.value)<0&&(o=s.left,s.left=o.right,s.dZ(),o.right=s,o.dZ(),!(s=o).left))break;(o=new r).right=s,o.left=a.left,a.left=o,n.left=s,n.dZ(),n=s,s=s.left}else{if(!(u>0))break;if(!s.right)break;if(this.Ac(t,s.right.value)>0&&(o=s.right,s.right=o.left,s.dZ(),o.left=s,o.dZ(),!(s=o).right))break;(o=new r).left=s,o.right=a.right,a.right=o,i.right=s,i.dZ(),i=s,s=s.right}}for(i.right=s.left,i.dZ(),n.left=s.right,n.dZ(),s.left=e.right,s.right=e.left;a.left;)a.left.right.dZ(),a.left=a.left.left;for(;a.right;)a.right.left.dZ(),a.right=a.right.right;s.dZ(),this.root=s}},n.prototype.mZ=function(t){if(this.root){for(var e=this.root,i=this.root.index;i!==t;)if(i>t&&e.left)i-=1+((e=e.left).right?e.right.length:0);else{if(!(i<t&&e.right))break;i+=1+((e=e.right).left?e.left.length:0)}return this.uZ(e.value),this.root.index===t}return!1},n.prototype.reduce=function(t,e,i){return this.root&&(e=this.root.reduce(t,e,0,i,this)),e},n.prototype.reduceRight=function(t,e,i){return this.root&&(e=this.root.reduceRight(t,e,this.length-1,i,this)),e},n.prototype.min=function(t){var e=this.gZ(t);if(e)return e.value},n.prototype.max=function(t){var e=this.fZ(t);if(e)return e.value},n.prototype.Bc=function(){return this.min()},n.prototype.clear=function(){var t;this.Mk&&(t=this.toArray(),this.QA([],t,0)),this.root=null,this.length=0,this.Mk&&this.GA([],t,0)},n.prototype.Hc=function(t,e){return new this.Iterator(this,t,e)},n.prototype.Iterator=o,n.prototype.summary=function(){return this.root?this.root.summary():"()"},n.prototype.log=function(t,e,i,n){t=t||c.aU,e=e||this.vs,i||(i=console.log,n=console),i=i.bind(n),this.root&&this.root.log(t,e,i,i)},n.prototype.vs=function(t,e,i){e(" "+t.value)},n.IZ=c,n.prototype.Node=r,r.prototype.reduce=function(t,e,i,n,r,o){if(o=o||0,this.left){var s=this.left.length;e=this.left.reduce(t,e,i,n,r,o+1),i+=s}return e=t.call(n,e,this.value,i,r,this,o),i+=1,this.right&&(e=this.right.reduce(t,e,i,n,r,o+1)),e},r.prototype.reduceRight=function(t,e,i,n,r,o){return o=o||0,this.right&&(e=this.right.reduce(t,e,i,n,r,o+1),i-=this.right.length),e=t.call(n,e,this.value,this.value,r,this,o),i-=1,this.left&&(e=this.left.reduce(t,e,i,n,r,o+1)),e},r.prototype.dZ=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0),this.index=this.left?this.left.length:0},r.prototype.SZ=function(){var t=1;if(t+=this.left?this.left.SZ():0,t+=this.right?this.right.SZ():0,this.length!==t)throw new Error("Integrity check failed: "+this.summary());return t},r.prototype.yZ=function(){var t=this;if(t.right){for(t=t.right;t.left;)t=t.left;return t}},r.prototype.lZ=function(){var t=this;if(t.left){for(t=t.left;t.right;)t=t.right;return t}},r.prototype.summary=function(){var t=this.value||"-";return t+=" <"+this.length,this.left||this.right?"("+t+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")":"("+t+")"},r.prototype.log=function(t,e,i,n){var r,o,s,a,u=this;r=this.left&&this.right?t.WA:this.left?t.tU:this.right?t.rU:t.eU,this.left&&this.left.log(t,e,function(e){o?n(t.oU+" "+e):(o=!0,n(t.iU+t.eU+e))},function(t){n("  "+t)}),e(this,function(e){s?i((u.right?t.oU:" ")+e):(s=!0,i(r+e))},function(e){n((u.left?t.oU:" ")+e)}),this.right&&this.right.log(t,e,function(e){a?i("  "+e):(a=!0,i(t.nU+t.eU+e))},function(e){i(t.oU+" "+e)})},o.prototype.Gk=null,Object.defineProperty(o.prototype,"_iterationObject",{get:function(){return this.Gk||(this.Gk={done:!1,value:null})}}),o.prototype.next=function(){var t;return(t=this.Ok?this.set.TZ(this.Ok.value):this.set.gZ())?void 0!==this.end&&this.set.Ac(t.value,this.end)>=0?(this.Vk.done=!0,this.Vk.value=void 0):(this.Ok=t,this.Vk.value=t.value):(this.Vk.done=!0,this.Vk.value=void 0),this.Vk}},function(t,e,i){"use strict";var n=function(){return function(){this.rF=!1,this.aF=!1,this.hF=!1}}();e.eF=n},function(t,e,i){"use strict";function n(t,e,i,r){if(!(this instanceof n))return new n(t,e,i,r);Array.isArray(t)?(this.NT=t,t=t.splice(0,t.length)):this.NT=[],this.ls=e||Object.cs,this.Ac=i||Object.Oc,this.ds=r||Function.us,this.length=0,this.addEach(t)}function r(t,e,i){for(var n=0,r=t.length-1;n<=r;){var o=n+r>>1,s=i(e,t[o]);if(s>0)n=o+1;else{if(!(s<0))return o;r=o-1}}return-(n+1)}function o(t,e,i,n){var o=r(t,e,i);if(o<0)return-1;for(;o>0&&n(e,t[o-1]);)o--;return n(e,t[o])?o:-1}function s(t,e,i,n){var o=r(t,e,i);if(o<0)return-1;for(;o<t.length-1&&n(e,t[o+1]);)o++;return n(e,t[o])?o:-1}t.i=n;var a=(i(11),i(12)),u=i(13),h=i(38);n.RZ=n,Object.addEach(n.prototype,a.prototype),Object.addEach(n.prototype,u.prototype),Object.addEach(n.prototype,h.prototype),n.prototype.mF=!0,n.prototype.Es=function(t){return new this.constructor(t,this.ls,this.Ac,this.ds)},n.prototype.has=function(t,e){if(e)throw new Error("SortedSet#has does not support second argument: equals");var i=r(this.NT,t,this.Ac);return i>=0&&this.ls(this.NT[i],t)},n.prototype.get=function(t,e){if(e)throw new Error("SortedArray#get does not support second argument: equals");var i=o(this.NT,t,this.Ac,this.ls);return-1!==i?this.NT[i]:this.ds(t)},n.prototype.add=function(t){var e=function(t,e,i){var n=r(t,e,i);if(n<0)return-n-1;for(var o=t.length-1;n<o&&0===i(e,t[n+1]);)n++;return n}(this.NT,t,this.Ac);return this.Mk&&this.QA([t],[],e),this.NT.splice(e,0,t),this.length++,this.Mk&&this.GA([t],[],e),!0},n.prototype.delete=function(t,e){if(e)throw new Error("SortedArray#delete does not support second argument: equals");var i=o(this.NT,t,this.Ac,this.ls);return-1!==i&&(this.Mk&&this.QA([],[t],i),this.NT.splice(i,1),this.length--,this.Mk&&this.GA([],[t],i),!0)},n.prototype.XA=function(t,e){if(e){var i=this.NT.XA(t,e);return this.length-=i,i}var n=o(this.NT,t,this.Ac,this.ls);if(-1!==n){for(var r=n;this.ls(t,this.NT[r]);)r++;var s=this.slice(n,r);return this.Mk&&this.QA([],s,n),this.NT.splice(n,s.length),this.length-=s.length,this.Mk&&this.GA([],s,n),s.length}return 0},n.prototype.indexOf=function(t){return o(this.NT,t,this.Ac,this.ls)},n.prototype.lastIndexOf=function(t){return s(this.NT,t,this.Ac,this.ls)},n.prototype.find=function(t,e,i){if(e)throw new Error("SortedArray#find does not support second argument: equals");if(i)throw new Error("SortedArray#find does not support third argument: index");return o(this.NT,t,this.Ac,this.ls)},n.prototype.Lk=function(t,e,i){if(e)throw new Error("SortedArray#findLast does not support second argument: equals");if(i)throw new Error("SortedArray#findLast does not support third argument: index");return s(this.NT,t,this.Ac,this.ls)},n.prototype.push=function(){this.addEach(arguments)},n.prototype.unshift=function(){this.addEach(arguments)},n.prototype.pop=function(){var t=this.NT.pop();return this.length=this.NT.length,t},n.prototype.shift=function(){var t=this.NT.shift();return this.length=this.NT.length,t},n.prototype.slice=function(){return this.NT.slice.apply(this.NT,arguments)},n.prototype.splice=function(t,e){return this.qk(t,e,Array.prototype.slice.call(arguments,2))},n.prototype.qk=function(t,e,i){if(void 0===t&&void 0===e)return[];(t=t||0)<0&&(t+=this.length),void 0===e&&(e=1/0);var n=this.slice(t,t+e);return this.Mk&&this.QA(i,n,t),this.NT.splice(t,e),this.length-=n.length,this.Mk&&this.GA([],n,t),this.addEach(i),n},n.prototype.reduce=function(t,e){var i=arguments[2];return this.NT.reduce(function(e,n,r){return t.call(i,e,n,r,this)},e,this)},n.prototype.reduceRight=function(){var t=arguments[2];return this.NT.reduceRight(function(e,i,n){return callback.call(t,e,i,n,this)},basis,this)},n.prototype.min=function(){if(this.length)return this.NT[0]},n.prototype.max=function(){if(this.length)return this.NT[this.length-1]},n.prototype.Bc=function(){return this.NT.Bc()},n.prototype.clear=function(){var t;this.Mk&&(t=this.NT.slice(),this.QA([],t,0)),this.length=0,this.NT.clear(),this.Mk&&this.GA([],t,0)},n.prototype.cs=function(t,e){return this.NT.cs(t,e)},n.prototype.Oc=function(t,e){return this.NT.Oc(t,e)},n.prototype.Hc=function(t,e){return new this.Iterator(this.NT,t,e)},n.prototype.toJSON=function(){return this.toArray()},n.prototype.Iterator=Array.prototype.Iterator},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(i(84).Tx);e.oM=r},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(85),o=i(4),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.bx=function(t,e){if(DOMParser){var i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Location"),n="";if(i&&i.length>0&&i[0].childNodes.length>0){var r=i[0].childNodes[0];n=this.Ix(r.data)}else n=this.Ix(t);this.manifest=this.mx.parse(e,n)}},e.prototype.Ux=function(t){return t.substr(0,t.lastIndexOf("_cs"))},e.prototype.CM=function(t){return o.resolve(!1)},e}(r.$x);e.hM=s},function(t,e,i){
/*!
 * The copyright in this software is being made available under the BSD License,
 * included below. This software may be subject to other third party and contributor
 * rights, including patent rights, and no such rights are granted under this license.
 *
 * Copyright (c) 2013, Dash Industry Forum.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *  * Redistributions of source code must retain the above copyright notice, this
 *  list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright notice,
 *  this list of conditions and the following disclaimer in the documentation and/or
 *  other materials provided with the distribution.
 *  * Neither the name of Dash Industry Forum nor the names of its
 *  contributors may be used to endorse or promote products derived from this software
 *  without specific prior written permission.
 *
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY
 *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 *  POSSIBILITY OF SUCH DAMAGE.
 */
var n=i(145),r=i(86);DashParser=function(){var t=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,i=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,o=[{type:"duration",test:function(e){for(var i=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],n=i.length,r=0;r<n;r++)if(e.nodeName===i[r])return t.test(e.value);return!1},tq:function(e){var i=t.exec(e),n=31536e3*parseFloat(i[2]||0)+2592e3*parseFloat(i[4]||0)+86400*parseFloat(i[6]||0)+3600*parseFloat(i[8]||0)+60*parseFloat(i[10]||0)+parseFloat(i[12]||0);return void 0!==i[1]&&(n=-n),n}},{type:"datetime",test:function(t){return e.test(t.value)},tq:function(t){var i,n=e.exec(t);if(i=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&1e3*parseFloat(n[7])||0),n[9]&&n[10]){var r=60*parseInt(n[9],10)+parseInt(n[10],10);i+=("+"===n[8]?-1:1)*r*60*1e3}return new Date(i)}},{type:"numeric",test:function(t){return i.test(t.value)},tq:function(t){return parseFloat(t)}}];return{parse:function(t,e){var i,s=new r(o,"",!0),a=new n(function(){var t=[];return t.push(function(){var t,e,i,n;return n=[{name:"profiles",Py:!1},{name:"width",Py:!1},{name:"height",Py:!1},{name:"sar",Py:!1},{name:"frameRate",Py:!1},{name:"audioSamplingRate",Py:!1},{name:"mimeType",Py:!1},{name:"segmentProfiles",Py:!1},{name:"codecs",Py:!1},{name:"maximumSAPPeriod",Py:!1},{name:"startsWithSap",Py:!1},{name:"maxPlayoutRate",Py:!1},{name:"codingDependency",Py:!1},{name:"scanType",Py:!1},{name:"FramePacking",Py:!0},{name:"AudioChannelConfiguration",Py:!0},{name:"ContentProtection",Py:!0}],(t={}).name="AdaptationSet",t.wZ=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=n,(e={}).name="Representation",e.wZ=!1,e.isArray=!0,e.parent=t,e.children=[],e.properties=n,t.children.push(e),(i={}).name="SubRepresentation",i.wZ=!1,i.isArray=!0,i.parent=e,i.children=[],i.properties=n,e.children.push(i),t}()),t.push(function(){var t,e,i,n;return n=[{name:"SegmentBase",Py:!0},{name:"SegmentTemplate",Py:!0},{name:"SegmentList",Py:!0}],(t={}).name="Period",t.wZ=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=n,(e={}).name="AdaptationSet",e.wZ=!1,e.isArray=!0,e.parent=t,e.children=[],e.properties=n,t.children.push(e),(i={}).name="Representation",i.wZ=!1,i.isArray=!0,i.parent=e,i.children=[],i.properties=n,e.children.push(i),t}()),t.push(function(){var t,e,i,n,r;return r=[{name:"BaseURL",Py:!0,bZ:function(t,e){return 0===e.indexOf("http://")?e:t+e}}],(t={}).name="mpd",t.wZ=!0,t.isArray=!0,t.parent=null,t.children=[],t.properties=r,(e={}).name="Period",e.wZ=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=r,t.children.push(e),(i={}).name="AdaptationSet",i.wZ=!1,i.isArray=!0,i.parent=e,i.children=[],i.properties=r,e.children.push(i),(n={}).name="Representation",n.wZ=!1,n.isArray=!0,n.parent=i,n.children=[],n.properties=r,i.children.push(n),t}()),t}());new Date;try{i=s.Wx(t),new Date,i.hasOwnProperty("BaseURL")?(i.BaseURL=i.CZ[0],0!==i.BaseURL.toString().indexOf("http")&&(i.BaseURL=e+i.BaseURL)):i.BaseURL=e,i.hasOwnProperty("Location")&&(i.Location=i.Location_asArray[0]),a._Z(i),new Date}catch(e){return console.log("parsing the manifest failed","parse",t),null}return i}}}},function(t,e,n){t.i=function(t){var e;for(e=[],i=0,len=t.length;i<len;i+=1)t[i].wZ?e.push("root"):e.push(t[i].name);var n=function(t,e){var i;if(null!==t&&null!==e)for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)||(e[i]=t[i]))},r=function(t,e,i){var r,o,s,a,u;if(null!==t&&0!==t.length)for(r=0,o=t.length;r<o;r+=1)s=t[r],e.hasOwnProperty(s.name)&&(i.hasOwnProperty(s.name)?s.Py&&(a=e[s.name],u=i[s.name],"object"==typeof a&&"object"==typeof u?n(a,u):null!=s.bZ?i[s.name]=s.bZ(a,u):i[s.name]=a+u):i[s.name]=e[s.name])},o=function(t,e){var i,n,s,a,u,h,c,l=t;if(null!==l.children&&0!==l.children.length)for(i=0,n=l.children.length;i<n;i+=1)if(h=l.children[i],e.hasOwnProperty(h.name))if(h.isArray)for(s=0,a=(u=e[h.name+"_asArray"]).length;s<a;s+=1)c=u[s],r(l.properties,e,c),o(h,c);else c=e[h.name],r(l.properties,e,c),o(h,c)},s=function(i){var n,r,a,u,h,c,l;if(null===i)return i;if("object"!=typeof i)return i;for(n=0,r=e.length;n<r;n+=1)"root"===e[n]&&(h=t[n],o(h,c=i));for(u in i)if(i.hasOwnProperty(u)){if(-1!==(a=e.indexOf(u)))if((h=t[a]).isArray)for(n=0,r=(l=i[u+"_asArray"]).length;n<r;n+=1)c=l[n],o(h,c);else c=i[u],o(h,c);s(i[u])}return i};return{_Z:s}}},function(t,e,i){/*! codem-isoboxer v0.2.2 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
"undefined"==typeof ISOBoxer&&(ISOBoxer={}),ISOBoxer.Qx=function(t){return new n(t).parse()},ISOBoxer.rc={},ISOBoxer.rc.PZ=function(t,e){var i=e||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(i).decode(t);var n=[],r=0;if("utf-8"===i)for(;r<t.byteLength;){var o=t.getUint8(r++);o<128||(o<224?(o=(31&o)<<6,o|=63&t.getUint8(r++)):o<240?(o=(15&o)<<12,o|=(63&t.getUint8(r++))<<6,o|=63&t.getUint8(r++)):(o=(7&o)<<18,o|=(63&t.getUint8(r++))<<12,o|=(63&t.getUint8(r++))<<6,o|=63&t.getUint8(r++))),n.push(String.fromCharCode(o))}else for(;r<t.byteLength;)n.push(String.fromCharCode(t.getUint8(r++)));return n.join("")},e.Qx=ISOBoxer.Qx,e.rc=ISOBoxer.rc,ISOBoxer.AZ=function(t){this.offset=void 0===t?0:t};var n=function(t){this.OZ=new DataView(t),this.NZ=new ISOBoxer.AZ,this.DZ=[]};n.prototype.fetch=function(t){var e=this.kZ(t,!0);return e.length?e[0]:null},n.prototype.kZ=function(t,e){var i=[];return n.LZ.call(this,t,i,e),i},n.prototype.parse=function(){for(this.NZ.offset=0,this.DZ=[];this.NZ.offset<this.OZ.byteLength;){var t=r.parse(this);if(void 0===t.type)break;this.DZ.push(t)}return this},n.LZ=function(t,e,i){for(var r in this.type&&this.type==t&&e.push(this),this.DZ){if(e.length&&i)return;n.LZ.call(this.DZ[r],t,e,i)}};var r=function(){this.NZ=new ISOBoxer.AZ};r.parse=function(t){var e=new r;return e.MZ=t.NZ.offset,e.FZ=t.FZ?t.FZ:t,e.OZ=t.OZ,e.UZ=t,e.BZ(),t.NZ.offset=e.OZ.byteOffset+e.OZ.byteLength,e},r.prototype.HZ=function(t){var e=null;switch(t){case 8:e=this.OZ.getInt8(this.NZ.offset-this.OZ.byteOffset);break;case 16:e=this.OZ.getInt16(this.NZ.offset-this.OZ.byteOffset);break;case 32:e=this.OZ.getInt32(this.NZ.offset-this.OZ.byteOffset);break;case 64:var i=this.OZ.getInt32(this.NZ.offset-this.OZ.byteOffset),n=this.OZ.getInt32(this.NZ.offset-this.OZ.byteOffset+4);e=i*Math.pow(2,32)+n}return this.NZ.offset+=t>>3,e},r.prototype.xZ=function(t){var e=null;switch(t){case 8:e=this.OZ.getUint8(this.NZ.offset-this.OZ.byteOffset);break;case 16:e=this.OZ.getUint16(this.NZ.offset-this.OZ.byteOffset);break;case 24:e=((i=this.OZ.getUint16(this.NZ.offset-this.OZ.byteOffset))<<8)+(n=this.OZ.getUint8(this.NZ.offset-this.OZ.byteOffset+2));break;case 32:e=this.OZ.getUint32(this.NZ.offset-this.OZ.byteOffset);break;case 64:var i=this.OZ.getUint32(this.NZ.offset-this.OZ.byteOffset),n=this.OZ.getUint32(this.NZ.offset-this.OZ.byteOffset+4);e=i*Math.pow(2,32)+n}return this.NZ.offset+=t>>3,e},r.prototype.qZ=function(t){for(var e="",i=0;i<t;i++){var n=this.xZ(8);e+=String.fromCharCode(n)}return e},r.prototype.GZ=function(){for(var t="";;){var e=this.xZ(8);if(0==e)break;t+=String.fromCharCode(e)}return t},r.prototype.VZ=function(t){return this.xZ(t/2)+this.xZ(t/2)/Math.pow(2,t/2)},r.prototype.BZ=function(){if(this.NZ.offset=this.MZ,this.MZ+8>this.OZ.buffer.byteLength)this.FZ.jZ=!0;else{switch(this.size=this.xZ(32),this.type=this.qZ(4),1==this.size&&(this.QZ=this.xZ(64)),"uuid"==this.type&&(this.KZ=this.qZ(16)),this.size){case 0:this.OZ=new DataView(this.OZ.buffer,this.MZ,this.OZ.byteLength-this.NZ.offset);break;case 1:this.MZ+this.size>this.OZ.buffer.byteLength?(this.jZ=!0,this.FZ.jZ=!0):this.OZ=new DataView(this.OZ.buffer,this.MZ,this.QZ);break;default:this.MZ+this.size>this.OZ.buffer.byteLength?(this.jZ=!0,this.FZ.jZ=!0):this.OZ=new DataView(this.OZ.buffer,this.MZ,this.size)}!this.jZ&&this.YZ[this.type]&&this.YZ[this.type].call(this)}},r.prototype.WZ=function(){this.version=this.xZ(8),this.zZ=this.xZ(24)},r.prototype.YZ={},["moov","trak","tref","mdia","minf","stbl","edts","dinf","mvex","moof","traf","mfra","udta","meco","strk","vttc"].forEach(function(t){r.prototype.YZ[t]=function(){for(this.DZ=[];this.NZ.offset-this.OZ.byteOffset<this.OZ.byteLength;)this.DZ.push(r.parse(this))}}),r.prototype.YZ.JZ=function(){this.WZ(),this.XZ=this.xZ(32),this.entries=[];for(var t=1;t<=this.XZ;t++){var e={};1==this.version?(e.ZZ=this.xZ(64),e.$Z=this.HZ(64)):(e.ZZ=this.xZ(32),e.$Z=this.HZ(32)),e.e$=this.HZ(16),e.t$=this.HZ(16),this.entries.push(e)}},r.prototype.YZ.r$=function(){this.WZ(),this.i$=this.GZ(),this.value=this.GZ(),this.timescale=this.xZ(32),this.n$=this.xZ(32),this.s$=this.xZ(32),this.id=this.xZ(32),this.o$=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ))},r.prototype.YZ.a$=r.prototype.YZ.Mb=function(){this.data=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ))},r.prototype.YZ.h$=r.prototype.YZ.c$=function(){for(this.u$=this.qZ(4),this.l$=this.xZ(32),this.p$=[];this.NZ.offset-this.OZ.byteOffset<this.OZ.byteLength;)this.p$.push(this.qZ(4))},r.prototype.YZ.d$=function(){this.WZ(),this.f$=this.xZ(32),this.g$=this.qZ(4),this.YR=[this.xZ(32),this.xZ(32),this.xZ(32)],this.name=this.GZ()},r.prototype.YZ.E$=function(){this.data=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ))},r.prototype.YZ.v$=function(){this.WZ(),1==this.version?(this.y$=this.xZ(64),this.T$=this.xZ(64),this.timescale=this.xZ(32),this.duration=this.xZ(64)):(this.y$=this.xZ(32),this.T$=this.xZ(32),this.timescale=this.xZ(32),this.duration=this.xZ(32));var t=this.xZ(16);this.pad=t>>15,this.language=String.fromCharCode(96+(t>>10&31),96+(t>>5&31),96+(31&t)),this.f$=this.xZ(16)},r.prototype.YZ.m$=function(){this.WZ(),this.I$=this.xZ(32)},r.prototype.YZ.S$=function(){this.WZ(),1==this.version?(this.y$=this.xZ(64),this.T$=this.xZ(64),this.timescale=this.xZ(32),this.duration=this.xZ(64)):(this.y$=this.xZ(32),this.T$=this.xZ(32),this.timescale=this.xZ(32),this.duration=this.xZ(32)),this.rate=this.VZ(32),this.volume=this.VZ(16),this.R$=this.xZ(16),this.w$=[this.xZ(32),this.xZ(32)],this.matrix=[];for(var t=0;t<9;t++)this.matrix.push(this.VZ(32));this.f$=[];for(t=0;t<6;t++)this.f$.push(this.xZ(32));this.b$=this.xZ(32)},r.prototype.YZ.C$=function(){var t=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ));this._$=ISOBoxer.rc.PZ(t)},r.prototype.YZ.P$=function(){this.WZ(),this.A$=this.xZ(32),this.timescale=this.xZ(32),0==this.version?(this.O$=this.xZ(32),this.N$=this.xZ(32)):(this.O$=this.xZ(64),this.N$=this.xZ(64)),this.YR=this.xZ(16),this.D$=this.xZ(16),this.k$=[];for(var t=0;t<this.D$;t++){var e={},i=this.xZ(32);e.L$=i>>31&1,e.M$=2147483647&i,e.F$=this.xZ(32);var n=this.xZ(32);e.U$=n>>31&1,e.B$=n>>28&7,e.H$=268435455&n,this.k$.push(e)}},r.prototype.YZ.x$=function(){this.WZ(),this.q$=this.xZ(32),this.G$=[];for(var t=0;t<this.q$;t++){var e={};e.V$=this.xZ(32),e.j$=[];for(var i=0;i<e.V$;i++){var n={};n.level=this.xZ(8),n.Q$=this.xZ(24),e.j$.push(n)}this.G$.push(e)}},r.prototype.YZ.K$=function(){this.WZ(),1==this.version?this.Y$=this.xZ(64):this.Y$=this.xZ(32)},r.prototype.YZ.tfhd=function(){this.WZ(),this.W$=this.xZ(32),1&this.zZ&&(this.z$=this.xZ(64)),2&this.zZ&&(this.J$=this.xZ(32)),8&this.zZ&&(this.default_sample_duration=this.xZ(32)),16&this.zZ&&(this.X$=this.xZ(32)),32&this.zZ&&(this.Z$=this.xZ(32))},r.prototype.YZ.$$=function(){this.WZ(),1==this.version?(this.y$=this.xZ(64),this.T$=this.xZ(64),this.W$=this.xZ(32),this.R$=this.xZ(32),this.duration=this.xZ(64)):(this.y$=this.xZ(32),this.T$=this.xZ(32),this.W$=this.xZ(32),this.R$=this.xZ(32),this.duration=this.xZ(32)),this.w$=[this.xZ(32),this.xZ(32)],this.e0=this.xZ(16),this.t0=this.xZ(16),this.volume=this.VZ(16),this.r0=this.xZ(16),this.matrix=[];for(var t=0;t<9;t++)this.matrix.push(this.VZ(32));this.width=this.xZ(32),this.height=this.xZ(32)},r.prototype.YZ.trun=function(){this.WZ(),this.i0=this.xZ(32),1&this.zZ&&(this.n0=this.HZ(32)),4&this.zZ&&(this.s0=this.xZ(32)),this.Kx=[];for(var t=0;t<this.i0;t++){var e={};256&this.zZ&&(e.sample_duration=this.xZ(32)),512&this.zZ&&(e.o0=this.xZ(32)),1024&this.zZ&&(e.a0=this.xZ(32)),2048&this.zZ&&(0==this.version?e.h0=this.xZ(32):e.h0=this.HZ(32)),this.Kx.push(e)}},r.prototype.YZ.c0=function(){var t=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ));this.u0=ISOBoxer.rc.PZ(t)},r.prototype.YZ.l0=function(){var t=new DataView(this.OZ.buffer,this.NZ.offset,this.OZ.byteLength-(this.NZ.offset-this.MZ));this.config=ISOBoxer.rc.PZ(t)},r.prototype.YZ.p0=function(){}},function(t,e,i){"use strict";var n=function(){return function(){}}();e._x=n},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(1),s=i(2),a=function(){return function(t,e){this.name=t,this.iv=e}}(),u=function(){function t(t,e,i){this.loggerId="[DASH AES Manager] ",this.d0="AES-CBC",this.ll=!1,this.logger=r.Framework&&r.Framework.resolve(r.Framework.V.R)?r.Framework.resolve(r.Framework.V.R).log():console,this.f0=t,this.g0=e,this.logger.debug(this.loggerId+"Starting Dash AES Manager"),i&&(this.E0=i)}return t.prototype.init=function(){var t=this;try{this.v0();var e=n.defer();this.y0().then(function(){return e.resolve(!0)}).fail(function(i){o.ErrorMonitor.ve().logError("Error initializing key",t.loggerId,s.hs.Ur.Dr,i),e.resolve(!1)}),this.T0=e.Ss}catch(t){o.ErrorMonitor.ve().logError("Error initializing AES Manager",this.loggerId,s.hs.Ur.Nr,t)}},t.prototype.NM=function(){return this.T0?this.T0:n.resolve(!1)},t.prototype.y0=function(){var t=this;if(this.m0)return this.m0;var e=n.defer();return this.I0().then(function(i){window.crypto.subtle.importKey("raw",i,{name:t.d0},!1,["decrypt"]).then(function(t){e.resolve(t)},function(t){e.reject("error importing key: "+t.toString())})}).fail(function(t){return e.reject(t)}),this.m0=e.Ss,this.m0},t.prototype.v0=function(){for(var t=2,e=this.g0.length,i=[];t<e;t+=2)i.push(parseInt(this.g0.substr(t,2),16));this.iv=new Uint8Array(i)},t.prototype.decrypt=function(t){var e=this,i=n.defer(),r=new a(this.d0,this.iv);return this.m0.then(function(e){return window.crypto.subtle.decrypt(r,e,t).then(function(t){i.resolve(t)})}).catch(function(t){o.ErrorMonitor.ve().logError("Error decrypting arraybuffer",e.loggerId,s.hs.Ur.Lr,t),e.ll=!0,e.T0=n.resolve(!1),i.reject(t)}),i.Ss},t.prototype.I0=function(){var t=this,e=n.defer(),i=new XMLHttpRequest;return i.responseType="arraybuffer",i.open("GET",this.f0),this.E0&&i.setRequestHeader("Authorization",this.E0),i.onload=function(){if(200===i.status){var n=new Uint8Array(i.response);e.resolve(n)}else o.ErrorMonitor.ve().logError("Error downloading key",t.loggerId,s.hs.Ur.Mr,i.status),e.reject("error downloading key - status: "+i.status)},i.onerror=function(){o.ErrorMonitor.ve().logError("Error downloading key",t.logger,s.hs.Ur.Fr),e.reject("error downloading key")},i.send(),e.Ss},t.prototype.xx=function(){return this.ll},t}();e.qx=u},function(t,e,i){"use strict";var n=i(4),r=function(){function t(){}return t.prototype.init=function(){},t.prototype.NM=function(){return n.resolve(!1)},t.prototype.decrypt=function(t){return n.reject("unsupported")},t.prototype.xx=function(){return!1},t}();e.Gx=r},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(85),o=i(61),s=i(57),a=i(4),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.bx=function(t,e){this.manifest=this.mx.parse(e,this.Ix(t))},e.prototype.Ux=function(t){var e=t.substr(0,t.lastIndexOf("="));return e.substr(0,e.lastIndexOf("="))},e.prototype.CM=function(t){var e=this,i=a.defer(),n=this.gM(t.eg());if(!n||n.next)return i.resolve(!1),i.Ss;var u=a.defer();if(this.OM)s.DASH.XL?this.OM.NM().then(function(i){i?e.OM.decrypt(t.jf).then(function(t){u.resolve(e.jx(t))}).fail(function(t){return u.reject(!0)}):u.reject(!1)}):u.reject(!1);else try{var h=this.jx(t.jf);u.resolve(h)}catch(t){this.logger.warn("error extracting duration",t),u.reject(!0)}return u.Ss.then(function(t){if(!isNaN(t)){var s=n.id+t;e.logger.debug("found next fragment: "+n.id+" -> "+s+" duration: "+t),e.Sx.forEach(function(e,i){if(e.type===n.type){var a=e.Nx.replace(r.$x.Hx,n.id+""),u=e.Nx.replace(r.$x.Hx,s+""),h=e.kx.get(a);if(!e.kx.has(u)&&h){h.duration=t;var c=new o.DF(s,e.bandwidth,t,u,u);c.type=h.type,h.next=c,e.kx.set(u,c),e.Mx.set(s,c)}}})}i.resolve(!1)}).fail(function(n){e.logger.debug("could not extract duration from "+t.eg()+" [reevaluate: "+n+"]"),i.resolve(n)}),i.Ss},e}(r.$x);e.cM=u},function(t,e,i){"use strict";var n=i(1),r=i(152),o=i(3),s=i(153),a=i(61),u=i(0),h=i(7),c=i(87),l=i(2),f=function(){function t(){this.loggerId="[HLS METADATA] ",this.Aq=new o,this.S0=null,this.logger=(u.Framework.resolve(u.Framework.V.R)||console).log()}return t.prototype.parse=function(t,e){try{var i=new r.R0;if(i.push(e),i.manifest.playlists)this.w0(t,i.manifest);else{var o=this.b0(t,i.manifest);if(o&&o.C0&&(this.live=!o.C0._0),this.live){var s=this.P0(i.manifest,e);return this.logger.debug("HLS manifest trimmed "+s.A0+" segments ("+s.A0+"s) - new segments:["+o.O0.map(function(t){return t.id+":"+t.duration})+"]"),s.N0}}return e}catch(i){return n.ErrorMonitor.ve().logError("Error parsing metadata",this.loggerId,l.hs.yi.Wr,{detailedError:i,url:t}),e}},t.prototype.qM=function(t,e){return this.Oq.has(e)?this.Oq.get(e).Mx.get(t):null},t.prototype.lM=function(){return this.Aq.values().map(function(t){return t.bitrate})},t.prototype.isLive=function(){return this.live},t.prototype.gM=function(t){return null==this.kx?null:this.kx.get(t)},t.prototype.vM=function(t){try{var e=this.kx.get(t);if(e){var i=e.bitrate;return this.Oq.get(i).Mx.get(e.id+1)}return null}catch(e){return n.ErrorMonitor.ve().logError("Error getting the next segment info",this.loggerId,l.hs.yi.Xr,{detailedError:e,url:t}),null}},t.prototype._q=function(t){return this.Aq.has(t)},t.prototype.Pq=function(){return this.D0},t.prototype.w0=function(t,e){var i=this;this.D0=t,this.k0=e,this.Aq=new o,this.kx=new o,this.Oq=new o,this.k0.playlists.forEach(function(e){var n=h.rc.$h(t,e.uri),r=e.attributes.BANDWIDTH,o=new s.L0(r,e.uri,n);i.Aq.set(n,o),i.Oq.set(r,o)})},t.prototype.b0=function(t,e){var i=this;try{var r=this.Aq.get(t);if(!r)return void n.ErrorMonitor.ve().logError("Playlist url does not match any playlist in the master file",this.loggerId,l.hs.yi.fi,{url:t});var o=null!=e.mediaSequence?e.mediaSequence:0,s=[],u=o-1,c=r.Mx.get(u),f=[];return e.Nq.forEach(function(e){var u=h.rc.$h(t,e.uri),l=Math.round(1e3*e.duration),p=r.bitrate;Number.isInteger(p)||(n.ErrorMonitor.ve().logError("Segment Bitrate is a Float",{bitrate:p}),p=Math.round(p));var d=new a.DF(o,p,l,e.uri,u);i.kx.has(u)||f.push(d),i.kx.set(u,d),r.Mx.set(o,d),s.push(d),c&&(c.next=d),c=d,o++}),this.S0=r,r.update(e.mediaSequence,e.discontinuitySequence,e._0,e.M0,s),{C0:r,O0:f}}catch(t){return n.ErrorMonitor.ve().logError("Error updating the playlist",this.loggerId,l.hs.yi.Ei,t),null}},t.prototype.P0=function(t,e){try{for(var i=e.split("\n"),r=Math.max(1,c.bq.vq),o=null,s=0,a=0,u=t.Nq.length-1;u>r-1&&(o=t.Nq[u],!(s>=c.bq.Eq));u--)a++,s+=o.duration;var h="";for(u=0;u<i.length&&(h=h+i[u]+"\n",i[u].trim()!==o.uri);u++);return this.logger.debug("HLS trimmed "+a+" segments for total duration: "+s),{N0:h,A0:a,F0:s}}catch(t){throw n.ErrorMonitor.ve().logError("Error trimming the playlist",this.loggerId,l.hs.yi.vi,t),new Error(t)}},t}();e.wq=f},function(t,e,i){var n=function(){var t={MT:{}};t.MT.create=Object.create||function(t){function e(){}return e.prototype=t,new e},t.MT.U0=function(t,e,i){for(var n in t)hasOwnProp.call(t,n)&&e.call(i||this,n,t[n])},t.MT.Py=function(t,e){if(!e)return t;for(var i in e)hasOwnProp.call(e,i)&&(t[i]=e[i]);return t},t.MT.B0=function(e,i){var n,r,o;for(n in e=t.MT.cA(e),i)hasOwnProp.call(i,n)&&(r=e[n],o=i[n],t.MT.H0(r)&&t.MT.H0(o)?e[n]=t.MT.B0(r,o):e[n]=i[n]);return e},t.MT.cA=function(e){return t.MT.Py({},e)},t.MT.H0=function(t){return!!t&&"object"==typeof t&&"[object Object]"===t.toString()&&t.constructor===Object},t.MT.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},mergeOptions=function(e,i){var n,r,o;for(n in e=t.MT.cA(e),i)i.hasOwnProperty(n)&&(r=e[n],o=i[n],t.MT.H0(r)&&t.MT.H0(o)?e[n]=t.util.x0(r,o):e[n]=i[n]);return e},t.x0=mergeOptions,(s=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e].push(i)},this.off=function(e,i){var n;return!!t[e]&&(n=t[e].indexOf(i),t[e].splice(n,1),n>-1)},this.q0=function(e){var i,n,r,o;if(i=t[e])for(o=Array.prototype.slice.call(arguments,1),r=i.length,n=0;n<r;++n)i[n].apply(this,o)},this.G0=function(){t={}}}}).prototype.V0=function(t){this.on("data",function(e){t.push(e)})},t.j0=s;var e,i,n,r=new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'),o=function(t){for(var e,i=t.split(r),n=i.length,o={};n--;)""!==i[n]&&((e=/([^=]*)=(.*)/.exec(i[n]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),o[e[0]]=e[1]);return o},s=t.j0;return(e=function(){var t="";e.prototype.init.call(this),this.push=function(e){var i;for(i=(t+=e).indexOf("\n");i>-1;i=t.indexOf("\n"))this.q0("data",t.substring(0,i)),t=t.substring(i+1)}}).prototype=new s,(i=function(){i.prototype.init.call(this)}).prototype=new s,i.prototype.push=function(t){var e,i;if(0!==(t=t.replace(/^\s+|\s+$/g,"")).length){if("#"!==t[0])return void this.q0("data",{type:"uri",uri:t});if(0!==t.indexOf("#EXT"))return void this.q0("data",{type:"comment",text:t.slice(1)});if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))return void this.q0("data",{type:"tag",Q0:"m3u"});if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",Q0:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void this.q0("data",i);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",Q0:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void this.q0("data",i);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",Q0:"totalduration"},e[1]&&(i.duration=parseInt(e[1],10)),void this.q0("data",i);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",Q0:"version"},e[1]&&(i.version=parseInt(e[1],10)),void this.q0("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",Q0:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.q0("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",Q0:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.q0("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",Q0:"playlist-type"},e[1]&&(i.K0=e[1]),void this.q0("data",i);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return i={type:"tag",Q0:"byterange"},e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),void this.q0("data",i);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",Q0:"allow-cache"},e[1]&&(i.XD=!/NO/.test(e[1])),void this.q0("data",i);if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t))return i={type:"tag",Q0:"stream-inf"},e[1]&&(i.attributes=o(e[1]),i.attributes.Y0&&function(){var t=i.attributes.Y0.split("x"),e={};t[0]&&(e.width=parseInt(t[0],10)),t[1]&&(e.height=parseInt(t[1],10)),i.attributes.Y0=e}(),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes.W0&&(i.attributes.W0=parseInt(i.attributes.W0,10))),void this.q0("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t))return void this.q0("data",{type:"tag",Q0:"endlist"});if(e=/^#EXT-X-DISCONTINUITY/.exec(t))return void this.q0("data",{type:"tag",Q0:"discontinuity"});if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return i={type:"tag",Q0:"key"},e[1]&&(i.attributes=o(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2)&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.q0("data",i);this.q0("data",{type:"tag",data:t.slice(4,t.length)})}},(n=function(){var r,o=this,s=[],a={};n.prototype.init.call(this),this.z0=new e,this.J0=new i,this.z0.V0(this.J0),this.manifest={X0:!0},this.J0.on("data",function(e){({tag:function(){({"allow-cache":function(){this.manifest.X0=e.XD,"allowed"in e||(this.q0("info",{message:"defaulting allowCache to YES"}),this.manifest.X0=!0)},byterange:function(){var t={};"length"in e&&(a.byterange=t,t.length=e.length,"offset"in e||(this.q0("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(a.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest._0=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.q0("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.q0("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>=0&&(a.duration=e.duration),this.manifest.Nq=s},key:function(){return e.attributes?"NONE"===e.attributes.Z0?void(r=null):e.attributes.lR?(e.attributes.Z0||this.q0("warn",{message:"defaulting key method to AES-128"}),r={method:e.attributes.Z0||"AES-128",uri:e.attributes.lR},void(void 0!==e.attributes.IV&&(r.iv=e.attributes.IV))):void this.q0("warn",{message:"ignoring key declaration without URI"}):void this.q0("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.q0("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?this.manifest.discontinuitySequence=e.number:this.q0("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.K0)?this.manifest.K0=e.K0:this.q0("warn",{message:"ignoring unknown playlist type: "+e.C0})},"stream-inf":function(){this.manifest.playlists=s,e.attributes?(a.attributes||(a.attributes={}),a.attributes=t.x0(a.attributes,e.attributes)):this.q0("warn",{message:"ignoring empty stream-inf attributes"})},discontinuity:function(){a.discontinuity=!0},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.q0("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.M0=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.q0("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.$0=e.duration}}[e.Q0]||function(){}).call(o)},uri:function(){a.uri=e.uri,s.push(a),!this.manifest.M0||"duration"in a||(this.q0("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.M0),r&&(a.key=r),a={}},e1:function(){}})[e.type].call(o)})}).prototype=new s,n.prototype.push=function(t){this.z0.push(t)},n.prototype.end=function(){this.z0.push("\n")},t.t1=e,t.i1=i,t.R0=n,t}();t.i=n},function(t,e,i){"use strict";var n=i(3),r=function(){function t(t,e,i){this.Mx=new n,this.bitrate=t,this.uri=e,this.yM=i}return t.prototype.update=function(t,e,i,n,r){this.mediaSequence=t,this.discontinuitySequence=e,this._0=i,this.M0=n,this.Nq=r,this.updated=!0},t}();e.L0=r},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(i(84).Tx);e.Sq=r},function(t,e,i){"use strict";var n=i(15),r=i(0),o=i(5),s=i(4),a=i(6),u=i(2),h=i(1),c=a.he.vh,l=function(){function t(){this.loggerId="[CACHE] ",this.logger=r.Framework.resolve(r.Framework.V.R).log(),this.n1=r.Framework.resolve(n.qu.Tu),c&&o.hh.Ra.Ia&&(this.s1=r.Framework.resolve(n.qu.mu))}return t.prototype.init=function(t,e){try{this.n1.init(t,e),c&&o.hh.Ra.Ia&&this.s1.init(t,e)}catch(t){h.ErrorMonitor.ve().logError("Error initializing cache",this.loggerId,u.hs.ht.rt,t)}},t.prototype.put=function(t){var e=this,i=s.defer(),n=!1;try{!t.Wf.isLive()&&c&&o.hh.Ra.Ia?this.s1.put(t).then(function(t){n=t}).fail(function(t){e.logger.error(t)}).finally(function(){i.resolve(n)}):this.n1.put(t).then(function(t){n=t}).fail(function(t){e.logger.error(t)}).finally(function(){i.resolve(n)})}catch(t){h.ErrorMonitor.ve().logError("Error adding new fragment in cache",this.loggerId,u.hs.ht.it,t),i.resolve(n)}return i.Ss},t.prototype.get=function(t){var e=this,i=s.defer(),n=null;try{this.contains(t).then(function(r){r?e.n1.get(t).then(function(i){null==i&&c&&o.hh.Ra.Ia?e.s1.get(t).then(function(t){n=t}):n=i}).fail(function(t){e.logger.error(t)}).finally(function(){i.resolve(n)}):i.resolve(n)}).fail(function(t){e.logger.error(t)}).finally(function(){i.resolve(n)})}catch(t){h.ErrorMonitor.ve().logError("Error getting the fragment from cache",this.loggerId,u.hs.ht.nt,t),i.resolve(n)}return i.Ss},t.prototype.contains=function(t){var e=this,i=s.defer(),n=!1;try{this.n1.contains(t).then(function(i){!n&&c&&o.hh.Ra.Ia?e.s1.contains(t).then(function(t){n=t}):n=i}).fail(function(t){e.logger.error(t)}).finally(function(){i.resolve(n)})}catch(t){h.ErrorMonitor.ve().logError("Error checking if cache contains the fragment",this.loggerId,u.hs.ht.st,t),i.resolve(!1)}return i.Ss},t.prototype.ik=function(t){try{return!t&&c&&o.hh.Ra.Ia?this.s1.ik(t):this.n1.ik(t)}catch(t){return h.ErrorMonitor.ve().logError("Error getting the keys from cache",this.loggerId,u.hs.ht.ot,t),[]}},t.prototype.Vq=function(t){var e=this,i=s.defer(),n=[];try{!t&&c&&o.hh.Ra.Ia?this.s1.Vq(t).then(function(t){n=t}).fail(function(t){e.logger.error(t)}).finally(function(){i.resolve(n)}):this.n1.Vq(t).then(function(t){n=t}).fail(function(t){e.logger.error(t)}).finally(function(){i.resolve(n)})}catch(t){h.ErrorMonitor.ve().logError("Error getting the elements from cache ",this.loggerId,u.hs.ht.at,t),i.resolve(n)}return i.Ss},t.prototype.Qq=function(){this.n1.Qq()},t}();e.Ra=l},function(t,e,i){"use strict";var n=i(3),r=i(24),o=i(7),s=i(5),a=i(0),u=i(9),h=i(1),c=i(2),l=function(){function t(){this.loggerId="[FallbackRequester] ",this.o1=new n,this.Lh=new o.rc.Vh}return t.prototype.init=function(t){this.logger=a.Framework.resolve(a.Framework.V.R).log(t.sessionId),this.a1=t.ED},t.prototype.request=function(t){var e=this,i=a.Framework.resolve(a.Framework.V.H),n=!1,r=t.$f(),l=t.Kf,f=t.eg();t.xhr=i,t.qf.Ff=a.Framework.time(),this.logger.debug("FRL ISSUE REQ FOR FRAGMENT "+t.zf.toString()+"-"+t.qf.Af+" ["+u.vc[t.Xf()]+"] TO FALLBACK "),t.zf.O_()&&(i.responseType="arraybuffer"),this.h1(t.type)&&l.range&&t.Xf()!=u.vc.gc&&i.setRequestHeader("Range","bytes="+l.range),s.hh.K.Na&&this.c1(t.type)&&0!=t.qf.Af&&(this.logger.info("SET RANGE bytes="+t.qf.Af+"-"),i.setRequestHeader("Range","bytes="+t.qf.Af+"-")),l.lU.forEach(function(t){"range"!==t.key.toLowerCase()&&i.setRequestHeader(t.key,t.value)}),l.async&&l.timeout>0&&(i.timeout=l.timeout),l.mimeType&&i.overrideMimeType(l.mimeType),l.withCredentials&&(i.withCredentials=l.withCredentials),i.onloadstart=function(t){var e=o.rc.createEvent(Event,"loadstart",t,l);l.dispatchEvent(e)},i.onabort=function(t){if(!n){var e=o.rc.createEvent(Event,"abort",t,l);l.dispatchEvent(e)}},i.ontimeout=function(i){if(!n){e.error(t,r);var s=o.rc.createEvent(ProgressEvent,"timeout",i,l);l.dispatchEvent(s),h.ErrorMonitor.ve().logError("Error on fallback request because of timeout",e.loggerId,c.hs.Kn.Qn)}},i.onreadystatechange=function(t){if(l&&(i.readyState===XMLHttpRequest.HEADERS_RECEIVED&&(l.responseHeaders=i.getAllResponseHeaders()),i.readyState<XMLHttpRequest.DONE||i.readyState===XMLHttpRequest.DONE&&0===i.status)){l.readyState=i.readyState;var e=o.rc.createEvent(Event,"readystatechange",t,l);l.dispatchEvent(e)}},i.onprogress=function(n){if(!e.c1(t.type)){var r=o.rc.createEvent(ProgressEvent,"progress",n,l);l.dispatchEvent(r),i.total=n.total}t.qf.Df=n.total},i.onload=function(u){if(n=!0,l.status=i.status,u&&0!=u.total&&(t.qf.Df=u.total),t.responseHeaders=i.getAllResponseHeaders(),i.status<200||i.status>299)return e.logger.debug("FRL SERVER RETURNED ERROR CODE "+i.status),void e.error(t,r);t.zf.O_()?e.h1(t.type)?t.jf=i.response:e.c1(t.type)&&(s.hh.K.Na?t.jf=a.Framework.C()?null:o.rc.appendBuffer(t.jf,i.response):t.jf=i.response):t.RM=i.responseText,t.loaded(),e.o1.delete(r),t.qf.Uf=a.Framework.time(),e.u1(t),e.l1(t),e.a1.iZ(t),i=null},i.onerror=function(){n||e.error(t,r)},this.o1.set(r,t),i.open("GET",f,l.async,l.username,l.password),i.send()},t.prototype.error=function(t,e){var i="COULD NOT DOWNLOAD "+t.eg()+" status: "+t.xhr.status;t.type==r.bf.If?this.logger.debug(i):this.logger.warn(i),this.d1(t),this.o1.delete(e),this.a1.eZ(t)},t.prototype.Ys=function(t){return this.o1.has(t)},t.prototype.h1=function(t){return t==r.bf.If||t==r.bf.mf||t==r.bf.Tf},t.prototype.c1=function(t){return t==r.bf.Sf},t.prototype.qX=function(t){var e=this.o1.get(t);this.o1.delete(t),e&&e.xhr&&e.xhr.abort()},t.prototype.l1=function(t){this.logger.info("SUCCESS FROM FALLBACK FOR "+t.eg()+" ["+r.bf[t.type]+"]["+t.qf.Df+"] AFTER "+t.sg()+" [curr:"+t.ag().Gh()+" avg:"+this.Lh.Gh()+"]")},t.prototype.d1=function(t){},t.prototype.WX=function(){return this.Lh},t.prototype.u1=function(t){t.Xf()===u.vc.fc&&this.Lh.Uh(t.ag())},t}();e.RJ=l},function(t,e,i){"use strict";var n=i(4);i(60);var r=i(0),o=i(5),s=i(15),a=i(49),u=i(58),h=i(10),c=i(91),l=hive.services.protocol.IF.CustomerKey,f=i(8),p=i(14),d=i(6),g=i(1),v=i(2),y=d.he.Th,m=function(){function t(){this.f1=isNaN(p.HiveConfig.DebugLogs.TrackerLogs)?0:p.HiveConfig.DebugLogs.TrackerLogs,this.loggerId="[TRACKER] ",this.ZU=0,this.g1=0,this.E1=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{0,4}){5})/,this.v1=!0,this.Ng=r.Framework.resolve(r.Framework.V.F),this.ud=r.Framework.resolve(f.pc.sc),this.yX=r.Framework.resolve(s.qu.Mu)}return t.prototype.init=function(t){this.logger=r.Framework.resolve(r.Framework.V.R).log(t.sessionId),this.sessionId=t.sessionId,this.xJ=t.xJ,this.yD=t.yD,this.zM=t.zM,this.T1=t.mD,this.yX.m1(t.sessionId,this),this.I1=c.Xq.Jq},t.prototype.start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.context=t,this.streamId=t.dJ.getContextId(),this.ticket=t.dJ.Sk(),this.vl=e},t.prototype.S1=function(t){this.R1=t},t.prototype.uX=function(){var t=this;this.nX(),this.w1=r.Framework.setInterval(function(){t.b1()},o.hh.zo.Yo),this.b1()},t.prototype.nX=function(){this.w1&&r.Framework.clearInterval(this.w1)},t.prototype.C1=function(){var t=this,e=n.defer(),i=new hive.services.protocol.IF.TrackerRequest,r=this.context.dJ,o=r.isLive()?StreamType.LIVE:StreamType.kK;i.sessionId=this.sessionId;var s=new l;return this.R1?(s.partnerId=this.R1.partnerId,s.customerId=this.R1.customerId):p.HiveConfig.ClientInfo.cu&&p.HiveConfig.ClientInfo.uu?(s.partnerId=p.HiveConfig.ClientInfo.cu,s.customerId=p.HiveConfig.ClientInfo.uu):(s.partnerId=this.ticket.up(),s.customerId=this.ticket.cp()),i.customerKey=s,i.streamType=o,i.contentId=this.yD.getContextId(),this.ud.getConnectivityInfo().then(function(e){t._1=e.getNetworkChanged().getPrivateIp(),t.yD.DH(t._1)}).fail(function(e){g.ErrorMonitor.ve().logError("Error getting connectivity info",t.loggerId,v.hs.Li._i)}).finally(function(){try{var n=new hive.snapshots.ConnectivityInfo;n.publicIp=t.IB,n.privateIp=t._1,i.info=t.P1(n,r),i.query=t.A1(r,i.info),e.resolve(i)}catch(i){g.ErrorMonitor.ve().logError("Error collecting the data for the tracker request",t.loggerId,v.hs.Li.Pi,i),e.reject("ERROR")}}).done(),e.Ss},t.prototype.O1=function(){var t=new Array;return this.I1==c.Xq.Jq?t.push(hive.services.protocol.IF.SF.RF):this.I1==c.Xq.AS?t.push(hive.services.protocol.IF.SF.bF):this.I1==c.Xq.nD?t.push(hive.services.protocol.IF.SF.wF):this.logger.warn("Wrong locality mode"),t},t.prototype.A1=function(t,e){var i=this,n=new hive.services.protocol.IF.TrackerQuery;try{return n.random=o.hh.Ja.Ka,e.externalAs&&!this.ZU&&(this.ZU=e.externalAs),e.internalAs&&!this.g1&&(this.g1=e.internalAs),n.rankings=this.O1(),n.asns=[],this.ZU>0&&this.N1(n.asns,hive.services.protocol.IF.CF.External,this.ZU,o.hh.Ja.Ya),this.g1>0&&(this.N1(n.asns,hive.services.protocol.IF.CF._F,this.g1,o.hh.Ja.Wa),n.watchers=[],t.lM().forEach(function(t){var e=i.D1(hive.services.protocol.IF.CF._F,i.g1,t,-1);n.watchers.push({key:e,value:1})}),n.streamers=[],this.yD.Uj().forEach(function(t,e){var r=i.D1(hive.services.protocol.IF.CF._F,i.g1,e,t.type==a.sD.nD?hive.services.protocol.IF.wc.Sc:-1);n.streamers.push({key:r,value:o.hh.Ja.za})})),n}catch(t){throw g.ErrorMonitor.ve().logError("Error preparing tracker query",this.loggerId,v.hs.Li.Ai,t),new Error(t)}},t.prototype.D1=function(t,e,i,n){var r=new hive.services.protocol.IF.TrackerBitrateQuery,o=new hive.services.protocol.IF.TrackerAsQuery;return o.asType=t,o.asn=e,r.bitrate=i,r.asn=o,-1!=n&&r.streamState,r},t.prototype.N1=function(t,e,i,n){var r=new hive.services.protocol.IF.TrackerAsQuery;r.asType=e,r.asn=i,t.push({key:r,value:n})},t.prototype.P1=function(t,e){var i=new hive.services.protocol.IF.TrackerPeerInfo;try{if(r.Framework.C()?i.guid=this.gd:i.guid=btoa(this.gd),i.timestamp=r.Framework.time(),i.nat=void 0,this.yD.Fj()&&(i.externalAs=this.yD.Fj()),this.yD.gk()&&(i.internalAs=this.yD.gk()),null!=t){i.publicIpString=t.publicIp;var n=new InetAddress;n.address=t.publicIp,i.publicIp=n,i.privateIpString=t.privateIp;var o=new InetAddress;o.address=t.privateIp,i.privateIp=o}if(!this.yD.ck()&&this.yD.yk()&&y?i.rankValue=1:i.rankValue=this.yD.L1(),this.context.dJ instanceof u.GM){i.streams=new Array;var s=e.PD();null!=s&&(i.watchingBitrate=s.bitrate);var h=e.JM();this.yD.Uj().forEach(function(t,e){if(t.b_){var n=new hive.services.protocol.IF.TrackerPeerStreamInfo;switch(n.bitrate=e,t.type){case a.sD.mc:n.state=hive.services.protocol.IF.wc.Ic;break;case a.sD.iD:n.state=hive.services.protocol.IF.wc.Rc;break;case a.sD.nD:n.state=hive.services.protocol.IF.wc.Sc}n.delta=h.KD(t.b_.A_(),e),i.streams.push(n)}})}return i}catch(t){throw g.ErrorMonitor.ve().logError("Error preparing tracker info",this.loggerId,v.hs.Li.Ni,t),new Error(t)}},t.prototype.b1=function(){var t=this;this.logger.debug(this.loggerId+" PREPARE REQUEST"),this.C1().then(function(e){var i=t.loggerId+"SENDING TRACKER REQUEST [ privateIp:"+e.info.privateIpString+" rank:"+e.info.rankValue+"]";switch(t.f1){case 0:default:t.logger.debug(i);break;case 1:t.logger.debug(i+" "+JSON.stringify(e));break;case 2:t.logger.debug(i,e);break;case 3:t.logger.debug(i+" "+JSON.stringify(e),e)}t.yX.M1(e)},function(e){g.ErrorMonitor.ve().logError("Error preparing the tracker request",t.loggerId,v.hs.Li.Ci)}).catch(function(e){g.ErrorMonitor.ve().logError("Error sending tracker request",t.loggerId,v.hs.Li.Di,e)})},t.prototype.F1=function(t){this.I1=t},t.prototype.KX=function(t){var e=this;try{switch(this.f1){case 1:this.logger.debug(this.loggerId+this.context.dJ.Sk()+" Tracker Response: "+JSON.stringify(t));break;case 2:this.logger.debug(this.loggerId+this.context.dJ.Sk()+" Tracker Response: ",t);break;case 3:this.logger.debug(this.loggerId+this.context.dJ.Sk()+" Tracker Response: "+JSON.stringify(t),t)}this.ZU=t.peerInfo.externalAs,this.g1=t.peerInfo.internalAs,this.IB=t.peerInfo.publicIpString,this._1=t.peerInfo.privateIpString,this.yD._H(this.IB),this.yD.U1(this.g1),this.yD.B1(this.ZU),this.ud.bH(this.IB,this._1,this.g1),this.logger.debug(this.loggerId+"Reporting from tracker public IP:"+this.IB+" private IP: "+this._1+" ExtAs:"+this.ZU+" inAs:"+this.g1),!this.yD.ck()&&this.yD.yk()&&y?this.T1.MG(!1):this.T1.H1(t.rankings,t.infos);var i=this.q1(t);this.vl.forEach(function(t){return t.gG(i,e.v1)}),this.v1=!1}catch(t){g.ErrorMonitor.ve().logError("Error handling the response",this.loggerId,v.hs.Li.ki,t)}},t.prototype.q1=function(t){for(var e=[],i=0,n=t.infos;i<n.length;i++){var r=n[i],o=new h.bc(h.Tc.yc,r);e.push(o)}return e},t.prototype.KG=function(t){},t.prototype.Ud=function(t){this.gd=t,this.logger.info(this.loggerId+"CONNECTED "+this.gd),this.T1.G1(),this.uX()},t.prototype.ej=function(){},t}();e.bJ=m},function(t,e,i){"use strict";var n=i(3),r=i(0),o=i(7),s=i(1),a=i(2),u=function(){return function(t,e){this.id=t,this.size=e}}(),h=function(){function t(){this.loggerId="[ObjectIndex] ",this.V1=new n,this.j1=new n,this.logger=r.Framework.resolve(r.Framework.V.R).log()}return t.prototype.put=function(t,e){try{var i=t.fragmentId,n=t.size;t.bitrate,this.V1.has(i)||(this.V1.set(i,new u(i,n)),this.j1.set(i,new Array)),this.j1.get(i).push(e)}catch(t){throw s.ErrorMonitor.ve().logError("Error adding new have in object index",this.loggerId,a.hs.Xn.zn,t),new Error(t)}},t.prototype.contains=function(t){return this.j1.has(t)},t.prototype.fk=function(t){return this.j1.get(t)},t.prototype.Q1=function(t){return this.V1.get(t)},t.prototype.Gj=function(t){var e=this;try{this.j1.forEach(function(i,n){o.rc.Kh(i,t,!1),0===i.length&&(e.j1.delete(n),e.V1.delete(n))})}catch(t){s.ErrorMonitor.ve().logError("Error removing haves send from a specific peer",this.loggerId,a.hs.Xn.Jn,t)}},t.prototype.Kq=function(){var t=this;this.j1.forEach(function(e,i){t.logger.debug("OBJIDX FR "+i+" PS "+e.map(function(t){return t.wj.yg.otherGuid}).reduce(function(t,e){return t+","+e}))})},t}();e.AJ=h},function(t,e,i){"use strict";var n=i(3),r=i(5),o=i(0),s=i(7),a=i(10),u=i(160),h=i(47),c=i(92),l=i(6),f=i(1),p=i(2),d=l.he.Th,g=function(){function t(){this.loggerId="[Membership] ",this.gd=null,this.K1=new n,this.kj=new n}return t.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.V.R).log(t.sessionId),this.TD=t.TD,this.yD=t.yD,this.Y1=t.YM,(d||o.Framework.C()&&h.$N.XN)&&(this.QJ=t.QJ),this.start()},t.prototype.start=function(){this.W1=!0},t.prototype.stop=function(){this.W1=!1},t.prototype.gG=function(t,e){var i=this;try{if(this.W1){var n=[];t.forEach(function(t){var e=null;i.z1(),t.guid!=i.gd&&(t.type==a.Tc.yc?e=i.J1(t):d||o.Framework.C()&&h.$N.XN?(e=i.X1(t),i.QJ.aG(t).then(function(){i.TD.tj(i.kj.get(t.guid))}).fail(function(e){e&&e!=c.JG.EG&&(i.kj.delete(t.guid),f.ErrorMonitor.ve().logError("Error electing lan leader",i.loggerId,p.hs.yt.dt))})):e=i.X1(t)),e&&n.push(e.peerInfo.guid)}),this.SL(),e&&this.TD.hj(e),n.length>0&&this.logger.debug("DISCOVERED NEW "+n.length+"/"+t.length+": ["+n.join(", ")+"]")}}catch(t){f.ErrorMonitor.ve().logError("Error discovering peers",this.loggerId,p.hs.yt.pt,t)}},t.prototype.SL=function(){var t=this.K1.length+this.kj.length;this.Y1.Z1(t)},t.prototype.z1=function(){try{this.K1.length>=r.hh.Qa.Va&&this.e2(this.K1),this.kj.length>=r.hh.Qa.ja&&this.e2(this.kj)}catch(t){f.ErrorMonitor.ve().logError("Error clearing membership views",this.loggerId,p.hs.yt.ft,t)}},t.prototype.e2=function(t){var e=t.keys()[o.Framework.random()*this.K1.length];t.delete(e)},t.prototype.X1=function(t){var e=null;try{if(this.K1.has(t.guid)?(e=this.K1.get(t.guid),this.K1.delete(t.guid),this.kj.set(t.guid,e)):this.kj.has(t.guid)&&(e=this.kj.get(t.guid)),!e)return e=new u.t2(t),this.kj.set(t.guid,e),e;e.S1(t)}catch(t){return f.ErrorMonitor.ve().logError("Error adding peer to lan view",this.loggerId,p.hs.yt.gt,t),null}},t.prototype.J1=function(t){var e=null;try{if(this.kj.has(t.guid))this.X1(t);else{if(!this.K1.has(t.guid))return e=new u.t2(t),this.K1.set(t.guid,e),e;(e=this.K1.get(t.guid)).S1(t)}}catch(t){return f.ErrorMonitor.ve().logError("Error adding peer to random view",this.loggerId,p.hs.yt.Et,t),null}},t.prototype.cj=function(t,e){var i=[];try{return this.W1&&(d||o.Framework.C()&&h.$N.XN?i=s.rc.zh(this.K1.values()):(i=this.K1.values(),this.kj.forEach(function(t,e){i.push(t)}),i=s.rc.zh(i))),t?i:e?i.slice(0,e):i.slice(0,2*r.hh.No._o)}catch(t){return f.ErrorMonitor.ve().logError("Error sampling membership",this.loggerId,p.hs.yt.vt,t),[]}},t.prototype.Oj=function(t){return this.K1.has(t)?this.K1.get(t):this.kj.has(t)?this.kj.get(t):null},t.prototype.Ud=function(t){this.logger.info("MEMBERSHIP SERVER CONNECTED"),this.gd=t,this.yD.setId(this.gd)},t.prototype.ej=function(){},t.prototype.KG=function(t){this.logger.debug("Peer "+t+" disconnected"),this.K1.delete(t),this.kj.delete(t),this.SL()},t}();e.Qa=g},function(t,e,i){"use strict";var n=i(10),r=function(){function t(t){this.peerInfo=t}return t.prototype.Ij=function(){return this.peerInfo.type===n.Tc.W},t.prototype.S1=function(t){this.peerInfo.type==n.Tc.yc&&t.type==n.Tc.W?this.peerInfo.type=n.Tc.W:this.peerInfo.type==n.Tc.yc&&t.type==n.Tc.yc||this.peerInfo.type==n.Tc.W&&t.type==n.Tc.W?this.i2(this.peerInfo,t):this.peerInfo.type==n.Tc.W&&t.type==n.Tc.yc&&(this.i2(this.peerInfo,t),this.peerInfo.type=n.Tc.W)},t.prototype.zj=function(t){this.peerInfo.watchingBitrate=t},t.prototype.i2=function(t,e){t.internalAs=this.n2(t.internalAs,e.internalAs),t.externalAs=this.n2(t.externalAs,e.externalAs),t.nat=this.n2(t.nat,e.nat),t.bandwidth=this.n2(t.bandwidth,e.bandwidth),t.watchingBitrate=this.n2(t.watchingBitrate,e.watchingBitrate),t.privateIpString=this.n2(t.privateIpString,e.privateIpString),t.publicIpString=this.n2(t.publicIpString,e.publicIpString),t.rankValue=this.n2(t.rankValue,e.rankValue),t.timestamp=this.n2(t.timestamp,e.timestamp),e.isLeader&&(t.isLeader=this.n2(t.isLeader,e.isLeader)),e.streams&&(t.streams=e.streams)},t.prototype.n2=function(t,e){return t?e&&t!=e&&(t=e):e&&(t=e),t},t}();e.t2=r},function(t,e,i){(function(t){var n,r,o;
/**
 * @license ProtoBuf.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ProtoBuf.js for details
 */!function(s){"use strict";function a(t){var e={};return e.s2=t,e.q_=t.q_||null,e.VERSION="4.0.0-b3",e.o2={},e.o2.a2=0,e.o2.h2=1,e.o2.c2=2,e.o2.u2=3,e.o2.l2=4,e.o2.d2=5,e.f2=[e.o2.a2,e.o2.h2,e.o2.d2],e.g2={int32:{name:"int32",E2:e.o2.a2,defaultValue:0},uint32:{name:"uint32",E2:e.o2.a2,defaultValue:0},sint32:{name:"sint32",E2:e.o2.a2,defaultValue:0},int64:{name:"int64",E2:e.o2.a2,defaultValue:e.q_?e.q_.ZERO:void 0},uint64:{name:"uint64",E2:e.o2.a2,defaultValue:e.q_?e.q_.tV:void 0},sint64:{name:"sint64",E2:e.o2.a2,defaultValue:e.q_?e.q_.ZERO:void 0},bool:{name:"bool",E2:e.o2.a2,defaultValue:!1},double:{name:"double",E2:e.o2.h2,defaultValue:0},string:{name:"string",E2:e.o2.c2,defaultValue:""},bytes:{name:"bytes",E2:e.o2.c2,defaultValue:null},fixed32:{name:"fixed32",E2:e.o2.d2,defaultValue:0},sfixed32:{name:"sfixed32",E2:e.o2.d2,defaultValue:0},fixed64:{name:"fixed64",E2:e.o2.h2,defaultValue:e.q_?e.q_.tV:void 0},sfixed64:{name:"sfixed64",E2:e.o2.h2,defaultValue:e.q_?e.q_.ZERO:void 0},float:{name:"float",E2:e.o2.d2,defaultValue:0},enum:{name:"enum",E2:e.o2.a2,defaultValue:0},message:{name:"message",E2:e.o2.c2,defaultValue:null},group:{name:"group",E2:e.o2.u2,defaultValue:null}},e.v2=[e.g2.int32,e.g2.sint32,e.g2.sfixed32,e.g2.uint32,e.g2.fixed32,e.g2.int64,e.g2.sint64,e.g2.sfixed64,e.g2.uint64,e.g2.fixed64,e.g2.bool,e.g2.string,e.g2.bytes],e.T2=1,e.m2=536870911,e.I2=!1,e.S2=!0,e.R2=!0,e.bv=function(){Object.create||(Object.create=function(t){function e(){}if(arguments.length>1)throw Error("Object.create polyfill only accepts the first parameter.");return e.prototype=t,new e});var t={w2:!1};try{t.w2="function"==typeof i(16).b2&&"function"==typeof i(64).resolve}catch(t){}return t.C2=function(){for(var t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],e=null,i=0;i<t.length;i++){try{e=t[i]()}catch(t){continue}break}if(!e)throw Error("XMLHttpRequest is not supported");return e},t.fetch=function(e,n){if(n&&"function"!=typeof n&&(n=null),t.w2)if(n)i(16)._2(e,function(t,e){n(t?null:""+e)});else try{return i(16).b2(e)}catch(t){return null}else{var r=t.C2();if(r.open("GET",e,!!n),r.setRequestHeader("Accept","text/plain"),"function"==typeof r.overrideMimeType&&r.overrideMimeType("text/plain"),!n)return r.send(null),200==r.status||0==r.status&&"string"==typeof r.responseText?r.responseText:null;if(r.onreadystatechange=function(){4==r.readyState&&n(200==r.status||0==r.status&&"string"==typeof r.responseText?r.responseText:null)},4==r.readyState)return;r.send(null)}},t.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},t}(),e.Lang={OPEN:"{",P2:"}",A2:"[",O2:"]",N2:",",EQUAL:"=",D2:";",L2:",",M2:'"',F2:'"',U2:"'",B2:"'",H2:"(",q2:")",G2:"<",V2:">",j2:/[\s\{\}=;\[\],'"\(\)<>]/g,Q2:/^(?:required|optional|repeated|map)$/,tN:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,zO:/^[a-zA-Z_][a-zA-Z_0-9]*$/,K2:/^[a-zA-Z][a-zA-Z_0-9]*$/,Y2:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,W2:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,z2:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,J2:/^(?:[1-9][0-9]*|0)$/,X2:/^0[xX][0-9a-fA-F]+$/,Z2:/^0[0-7]+$/,e3:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,t3:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,r3:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,i3:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,BOOL:/^(?:true|false)$/i},e.n3=function(t,e){var i={},n=function(t){this.source=""+t,this.index=0,this.line=1,this.stack=[],this.s3=!1,this.o3=e.F2},r=n.prototype;r.qZ=function(){var t;if(e.STRING.lastIndex=this.index-1,null!==(t=e.STRING.exec(this.source))){var i=void 0!==t[1]?t[1]:t[2];return this.index=e.STRING.lastIndex,this.stack.push(this.o3),i}throw Error("Unterminated string at line "+this.line+", index "+this.index)},r.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(this.s3)return this.s3=!1,this.qZ();var t,i;do{for(t=!1;e.i3.test(i=this.source.charAt(this.index));)if(this.index++,"\n"===i&&this.line++,this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if("/"===this.source.charAt(++this.index)){for(;"\n"!==this.source.charAt(this.index);)if(++this.index==this.source.length)return null;this.index++,this.line++,t=!0}else{if("*"!==this.source.charAt(this.index))throw Error("Unterminated comment at line "+this.line+": /"+this.source.charAt(this.index));for(i="";i+(i=this.source.charAt(this.index))!=="*/";)if(this.index++,"\n"===i&&this.line++,this.index===this.source.length)return null;this.index++,t=!0}}while(t);if(this.index===this.source.length)return null;var n=this.index;if(e.j2.lastIndex=0,e.j2.test(this.source.charAt(n)))++n;else for(++n;n<this.source.length&&!e.j2.test(this.source.charAt(n));)n++;var r=this.source.substring(this.index,this.index=n);return r===e.M2?(this.s3=!0,this.o3=e.F2):r===e.U2&&(this.s3=!0,this.o3=e.B2),r},r.Hk=function(){if(0===this.stack.length){var t=this.next();if(null===t)return null;this.stack.push(t)}return this.stack[0]},r.toString=function(){return"Tokenizer("+this.index+"/"+this.source.length+" at line "+this.line+")"},i.a3=n;var o=function(t){this.h3=new n(t)},s=o.prototype;return s.parse=function(){for(var t,e={name:"[ROOT]",package:null,messages:[],c3:[],imports:[],options:{},services:[]},i=!0;t=this.h3.next();)switch(t){case"package":if(!i||null!==e.package)throw Error("Unexpected package at line "+this.h3.line);e.package=this.u3(t);break;case"import":if(!i)throw Error("Unexpected import at line "+this.h3.line);e.imports.push(this.l3(t));break;case"message":this.d3(e,null,t),i=!1;break;case"enum":this.f3(e,t),i=!1;break;case"option":this.g3(e,t);break;case"service":this.E3(e,t);break;case"extend":this.v3(e,t);break;case"syntax":e.y3=this.T3(e);break;default:throw Error("Unexpected token at line "+this.h3.line+": "+t)}return delete e.name,e},s.m3=function(t){var i=1;if("-"==t.charAt(0)&&(i=-1,t=t.substring(1)),e.J2.test(t))return i*parseInt(t,10);if(e.X2.test(t))return i*parseInt(t.substring(2),16);if(e.Z2.test(t))return i*parseInt(t.substring(1),8);if(e.e3.test(t))return"inf"===t?i*(1/0):"nan"===t?NaN:i*parseFloat(t);throw Error("Illegal number at line "+this.h3.line+": "+(i<0?"-":"")+t)},s.I3=function(){var t,i,n="";do{if(i=this.h3.next(),n+=this.h3.next(),(t=this.h3.next())!==i)throw Error("Illegal end of string at line "+this.h3.line+": "+t);t=this.h3.Hk()}while(t===e.M2||t===e.U2);return n},s.S3=function(t,i){var n=-1,r=1;if("-"==t.charAt(0)&&(r=-1,t=t.substring(1)),e.J2.test(t))n=parseInt(t);else if(e.X2.test(t))n=parseInt(t.substring(2),16);else{if(!e.Z2.test(t))throw Error("Illegal id at line "+this.h3.line+": "+(r<0?"-":"")+t);n=parseInt(t.substring(1),8)}if(n=r*n|0,!i&&n<0)throw Error("Illegal id at line "+this.h3.line+": "+(r<0?"-":"")+t);return n},s.u3=function(t){if(t=this.h3.next(),!e.Y2.test(t))throw Error("Illegal package name at line "+this.h3.line+": "+t);var i=t;if((t=this.h3.next())!=e.D2)throw Error("Illegal end of package at line "+this.h3.line+": "+t);return i},s.l3=function(t){if("public"===(t=this.h3.Hk())&&(this.h3.next(),t=this.h3.Hk()),t!==e.M2&&t!==e.U2)throw Error("Illegal start of import at line "+this.h3.line+": "+t);var i=this.I3();if((t=this.h3.next())!==e.D2)throw Error("Illegal end of import at line "+this.h3.line+": "+t);return i},s.g3=function(t,i){var n=!1;if((i=this.h3.next())==e.H2&&(n=!0,i=this.h3.next()),!e.Y2.test(i)&&!/google\.protobuf\./.test(i))throw Error("Illegal option name in message "+t.name+" at line "+this.h3.line+": "+i);var r,o=i;if(i=this.h3.next(),n){if(i!==e.q2)throw Error("Illegal end in message "+t.name+", option "+o+" at line "+this.h3.line+": "+i);o="("+o+")",i=this.h3.next(),e.W2.test(i)&&(o+=i,i=this.h3.next())}if(i!==e.EQUAL)throw Error("Illegal operator in message "+t.name+", option "+o+" at line "+this.h3.line+": "+i);if((i=this.h3.Hk())===e.M2||i===e.U2)r=this.I3();else if(this.h3.next(),e.z2.test(i))r=this.m3(i,!0);else if(e.BOOL.test(i))r="true"===i;else{if(!e.Y2.test(i))throw Error("Illegal option value in message "+t.name+", option "+o+" at line "+this.h3.line+": "+i);r=i}if((i=this.h3.next())!==e.D2)throw Error("Illegal end of option in message "+t.name+", option "+o+" at line "+this.h3.line+": "+i);t.options[o]=r},s.R3=function(t,i){for(var n;;){if(null===(n=this.h3.next()))throw Error("Unexpected EOF in "+t.name+", "+i+" at line "+this.h3.line);if(n===e.D2)break}},s.E3=function(t,i){if(i=this.h3.next(),!e.zO.test(i))throw Error("Illegal service name at line "+this.h3.line+": "+i);var n=i,r={name:n,w3:{},options:{}};if((i=this.h3.next())!==e.OPEN)throw Error("Illegal start of service "+n+" at line "+this.h3.line+": "+i);do{if("option"===(i=this.h3.next()))this.g3(r,i);else if("rpc"===i)this.b3(r,i);else if(i!==e.P2)throw Error("Illegal type of service "+n+" at line "+this.h3.line+": "+i)}while(i!==e.P2);t.services.push(r)},s.b3=function(t,i){var n=i;if(i=this.h3.next(),!e.zO.test(i))throw Error("Illegal method name in service "+t.name+" at line "+this.h3.line+": "+i);var r=i,o={request:null,response:null,C3:!1,_3:!1,options:{}};if((i=this.h3.next())!==e.H2)throw Error("Illegal start of request type in service "+t.name+"#"+r+" at line "+this.h3.line+": "+i);if("stream"===(i=this.h3.next()).toLowerCase()&&(o.C3=!0,i=this.h3.next()),!e.Y2.test(i))throw Error("Illegal request type in service "+t.name+"#"+r+" at line "+this.h3.line+": "+i);if(o.request=i,(i=this.h3.next())!=e.q2)throw Error("Illegal end of request type in service "+t.name+"#"+r+" at line "+this.h3.line+": "+i);if("returns"!==(i=this.h3.next()).toLowerCase())throw Error("Illegal delimiter in service "+t.name+"#"+r+" at line "+this.h3.line+": "+i);if((i=this.h3.next())!=e.H2)throw Error("Illegal start of response type in service "+t.name+"#"+r+" at line "+this.h3.line+": "+i);if("stream"===(i=this.h3.next()).toLowerCase()&&(o._3=!0,i=this.h3.next()),o.response=i,(i=this.h3.next())!==e.q2)throw Error("Illegal end of response type in service "+t.name+"#"+r+" at line "+this.h3.line+": "+i);if((i=this.h3.next())===e.OPEN){do{if("option"===(i=this.h3.next()))this.g3(o,i);else if(i!==e.P2)throw Error("Illegal start of option inservice "+t.name+"#"+r+" at line "+this.h3.line+": "+i)}while(i!==e.P2);this.h3.Hk()===e.D2&&this.h3.next()}else if(i!==e.D2)throw Error("Illegal delimiter in service "+t.name+"#"+r+" at line "+this.h3.line+": "+i);void 0===t[n]&&(t[n]={}),t[n][r]=o},s.d3=function(t,i,n){var r={},o="group"===n;if(n=this.h3.next(),!e.zO.test(n))throw Error("Illegal "+(o?"group":"message")+" name"+(t?" in message "+t.name:"")+" at line "+this.h3.line+": "+n);if(r.name=n,o){if((n=this.h3.next())!==e.EQUAL)throw Error("Illegal id assignment after group "+r.name+" at line "+this.h3.line+": "+n);n=this.h3.next();try{i.id=this.S3(n)}catch(t){throw Error("Illegal field id value for group "+r.name+"#"+i.name+" at line "+this.h3.line+": "+n)}r.P3=!0}if(r.fields=[],r.c3=[],r.messages=[],r.options={},r.A3={},(n=this.h3.next())===e.A2&&i&&(this.O3(r,i,n),n=this.h3.next()),n!==e.OPEN)throw Error("Illegal start of "+(o?"group":"message")+" "+r.name+" at line "+this.h3.line+": "+n);for(;;){if((n=this.h3.next())===e.P2){(n=this.h3.Hk())===e.D2&&this.h3.next();break}if(e.Q2.test(n))this.N3(r,n);else if("oneof"===n)this.D3(r,n);else if("enum"===n)this.f3(r,n);else if("message"===n)this.d3(r,null,n);else if("option"===n)this.g3(r,n);else if("extensions"===n)r.extensions=this.L3(r,n);else if("extend"===n)this.v3(r,n);else{if(!e.Y2.test(n))throw Error("Illegal token in message "+r.name+" at line "+this.h3.line+": "+n);this.N3(r,"optional",n)}}return t.messages.push(r),r},s.N3=function(t,i,n){var r={},o=null;if(r.rule=i,r.options={},i=void 0!==n?n:this.h3.next(),"map"===r.rule){if(i!==e.G2)throw Error("Illegal token in message "+t.name+" at line "+this.h3.line+": "+i);if(i=this.h3.next(),!e.tN.test(i)&&!e.Y2.test(i))throw Error("Illegal token in message "+t.name+" at line "+this.h3.line+": "+i);if(r.keytype=i,(i=this.h3.next())!==e.L2)throw Error("Illegal token in message "+t.name+" at line "+this.h3.line+": "+i);if(i=this.h3.next(),!e.tN.test(i)&&!e.Y2.test(i))throw Error("Illegal token in message "+t.name+" at line "+this.h3.line+": "+i);if(r.type=i,(i=this.h3.next())!==e.V2)throw Error("Illegal token in message "+t.name+" at line "+this.h3.line+": "+i);if(i=this.h3.next(),!e.zO.test(i))throw Error("Illegal token in message "+t.name+" at line "+this.h3.line+": "+i);if(r.name=i,(i=this.h3.next())!==e.EQUAL)throw Error("Illegal token in field "+t.name+"#"+r.name+" at line "+this.line+": "+i);i=this.h3.next();try{r.id=this.S3(i)}catch(e){throw Error("Illegal field id in message "+t.name+"#"+r.name+" at line "+this.h3.line+": "+i)}if((i=this.h3.next())===e.A2&&(this.O3(t,r,i),i=this.h3.next()),i!==e.D2)throw Error("Illegal delimiter in message "+t.name+"#"+r.name+" at line "+this.h3.line+": "+i)}else if("group"===i){if(o=this.d3(t,r,i),!/^[A-Z]/.test(o.name))throw Error("Group names must start with a capital letter");r.type=o.name,r.name=o.name.toLowerCase(),(i=this.h3.Hk())===e.D2&&this.h3.next()}else{if(!e.tN.test(i)&&!e.Y2.test(i))throw Error("Illegal field type in message "+t.name+" at line "+this.h3.line+": "+i);if(r.type=i,i=this.h3.next(),!e.zO.test(i))throw Error("Illegal field name in message "+t.name+" at line "+this.h3.line+": "+i);if(r.name=i,(i=this.h3.next())!==e.EQUAL)throw Error("Illegal token in field "+t.name+"#"+r.name+" at line "+this.h3.line+": "+i);i=this.h3.next();try{r.id=this.S3(i)}catch(e){throw Error("Illegal field id in message "+t.name+"#"+r.name+" at line "+this.h3.line+": "+i)}if((i=this.h3.next())===e.A2&&(this.O3(t,r,i),i=this.h3.next()),i!==e.D2)throw Error("Illegal delimiter in message "+t.name+"#"+r.name+" at line "+this.h3.line+": "+i)}return t.fields.push(r),r},s.D3=function(t,i){if(i=this.h3.next(),!e.zO.test(i))throw Error("Illegal oneof name in message "+t.name+" at line "+this.h3.line+": "+i);var n,r=i,o=[];if((i=this.h3.next())!==e.OPEN)throw Error("Illegal start of oneof "+r+" at line "+this.h3.line+": "+i);for(;this.h3.Hk()!==e.P2;)(n=this.N3(t,"optional")).M3=r,o.push(n.id);this.h3.next(),t.A3[r]=o},s.O3=function(t,i,n){for(var r=!0;(n=this.h3.next())!==e.O2;){if(n===e.N2){if(r)throw Error("Illegal start of options in message "+t.name+"#"+i.name+" at line "+this.h3.line+": "+n);n=this.h3.next()}this.F3(t,i,n),r=!1}},s.F3=function(t,i,n){var r=!1;if(n===e.H2&&(n=this.h3.next(),r=!0),!e.Y2.test(n))throw Error("Illegal field option in "+t.name+"#"+i.name+" at line "+this.h3.line+": "+n);var o,s=n;if(n=this.h3.next(),r){if(n!==e.q2)throw Error("Illegal delimiter in "+t.name+"#"+i.name+" at line "+this.h3.line+": "+n);s="("+s+")",n=this.h3.next(),e.W2.test(n)&&(s+=n,n=this.h3.next())}if(n!==e.EQUAL)throw Error("Illegal token in "+t.name+"#"+i.name+" at line "+this.h3.line+": "+n);if((n=this.h3.Hk())===e.M2||n===e.U2)o=this.I3();else if(e.z2.test(n,!0))o=this.m3(this.h3.next(),!0);else if(e.BOOL.test(n))o="true"===this.h3.next().toLowerCase();else{if(!e.Y2.test(n))throw Error("Illegal value in message "+t.name+"#"+i.name+", option "+s+" at line "+this.h3.line+": "+n);o=this.h3.next()}i.options[s]=o},s.f3=function(t,i){var n={};if(i=this.h3.next(),!e.zO.test(i))throw Error("Illegal enum name in message "+t.name+" at line "+this.h3.line+": "+i);if(n.name=i,(i=this.h3.next())!==e.OPEN)throw Error("Illegal start of enum "+n.name+" at line "+this.h3.line+": "+i);for(n.values=[],n.options={};;){if((i=this.h3.next())===e.P2){(i=this.h3.Hk())===e.D2&&this.h3.next();break}if("option"==i)this.g3(n,i);else{if(!e.zO.test(i))throw Error("Illegal name in enum "+n.name+" at line "+this.h3.line+": "+i);this.U3(n,i)}}t.c3.push(n)},s.U3=function(t,i){var n={};if(n.name=i,(i=this.h3.next())!==e.EQUAL)throw Error("Illegal token in enum "+t.name+" at line "+this.h3.line+": "+i);i=this.h3.next();try{n.id=this.S3(i,!0)}catch(e){throw Error("Illegal id in enum "+t.name+" at line "+this.h3.line+": "+i)}if(t.values.push(n),(i=this.h3.next())===e.A2){this.O3(t,{options:{}},i),i=this.h3.next()}if(i!==e.D2)throw Error("Illegal delimiter in enum "+t.name+" at line "+this.h3.line+": "+i)},s.L3=function(i,n){var r=[];if("min"===(n=this.h3.next())?r.push(t.T2):"max"===n?r.push(t.m2):r.push(this.m3(n)),"to"!==(n=this.h3.next()))throw Error("Illegal extensions delimiter in message "+i.name+" at line "+this.h3.line+": "+n);if("min"===(n=this.h3.next())?r.push(t.T2):"max"===n?r.push(t.m2):r.push(this.m3(n)),(n=this.h3.next())!==e.D2)throw Error("Illegal extensions delimiter in message "+i.name+" at line "+this.h3.line+": "+n);return r},s.v3=function(t,i){if(i=this.h3.next(),!e.Y2.test(i))throw Error("Illegal message name at line "+this.h3.line+": "+i);var n={};if(n.B3=i,n.fields=[],(i=this.h3.next())!==e.OPEN)throw Error("Illegal start of extend "+n.name+" at line "+this.h3.line+": "+i);for(;;){if((i=this.h3.next())===e.P2){(i=this.h3.Hk())==e.D2&&this.h3.next();break}if(e.Q2.test(i))this.N3(n,i);else{if(!e.Y2.test(i))throw Error("Illegal token in extend "+n.name+" at line "+this.h3.line+": "+i);this.N3(n,"optional",i)}}return t.messages.push(n),n},s.T3=function(t){var i=this.h3.next();if(i!==e.EQUAL)throw Error("Illegal token at line "+this.h3.line+": "+i);if((i=this.h3.Hk())!==e.M2&&i!==e.U2)throw Error("Illegal token at line "+this.h3.line+": "+i);var n=this.I3();if((i=this.h3.next())!==e.D2)throw Error("Illegal token at line "+this.h3.line+": "+i);return n},s.toString=function(){return"Parser"},i.R0=o,i}(e,e.Lang),e.H3=function(e){function i(t,i){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.FP&&t.low==t.low&&t.high==t.high)return new e.q_(t.low,t.high,void 0===i?t.FP:i);if("string"==typeof t)return e.q_.kE(t,i||!1,10);if("number"==typeof t)return e.q_.DE(t,i||!1);throw Error("not convertible to Long")}function n(t,i){var r=i.PP(),o=7&r,s=r>>>3;switch(o){case e.o2.a2:do{r=i.Z_()}while(128==(128&r));break;case e.o2.h2:i.offset+=8;break;case e.o2.c2:r=i.PP(),i.offset+=r;break;case e.o2.u2:n(s,i);break;case e.o2.l2:if(s===t)return!1;throw Error("Illegal GROUPEND after unknown group: "+s+" ("+t+" expected)");case e.o2.d2:i.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+t+": "+o)}return!0}var r={},o=function(t,e,i){this.x3=t,this.parent=e,this.name=i,this.className},s=o.prototype;s.q3=function(){for(var t=this.name,e=this;null!=(e=e.parent);)t=e.name+"."+t;return t},s.toString=function(t){return(t?this.className+" ":"")+this.q3()},s.Xg=function(){throw Error(this.toString(!0)+" cannot be built directly")},r.G3=o;var a=function(t,e,i,n,r){o.call(this,t,e,i),this.className="Namespace",this.children=[],this.options=n||{},this.y3=r||"proto2"},u=a.prototype=Object.create(o.prototype);u.V3=function(t){if(null==(t=t||null))return this.children.slice();for(var e=[],i=0,n=this.children.length;i<n;++i)this.children[i]instanceof t&&e.push(this.children[i]);return e},u.j3=function(t){var e;if(e=this.Q3(t.name))if(e instanceof l.K3&&e.name!==e.Y3&&null===this.Q3(e.Y3))e.name=e.Y3;else{if(!(t instanceof l.K3&&t.name!==t.Y3&&null===this.Q3(t.Y3)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+t.name);t.name=t.Y3}this.children.push(t)},u.Q3=function(t){for(var e="number"==typeof t?"id":"name",i=0,n=this.children.length;i<n;++i)if(this.children[i][e]===t)return this.children[i];return null},u.resolve=function(t,e){var i,n="string"==typeof t?t.split("."):t,o=this,s=0;if(""===n[s]){for(;null!==o.parent;)o=o.parent;s++}do{do{if(!(i=o.Q3(n[s]))||!(i instanceof r.G3)||e&&i instanceof r.Jd.K3){o=null;break}o=i,s++}while(s<n.length);if(null!=o)break;if(null!==this.parent)return this.parent.resolve(t,e)}while(null!=o);return o},u.W3=function(t){var e=[],i=t;do{e.unshift(i.name),i=i.parent}while(null!==i);for(var n=1;n<=e.length;n++){var o=e.slice(e.length-n);if(t===this.resolve(o,!(t instanceof r.Jd.K3)))return o.join(".")}return t.q3()},u.Xg=function(){for(var t,e={},i=this.children,n=0,r=i.length;n<r;++n)(t=i[n])instanceof a&&(e[t.name]=t.Xg());return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this.z3()}),e},u.z3=function(){for(var t={},e=Object.keys(this.options),i=0,n=e.length;i<n;++i){var r=e[i],o=this.options[e[i]];t[r]=o}return t},u.J3=function(t){return void 0===t?this.options:void 0!==this.options[t]?this.options[t]:null},r.X3=a;var h=function(t,i,n,r){if(this.type=t,this.Z3=i,this.e4=n,this.y3=r,n&&e.v2.indexOf(t)<0)throw Error("Invalid map key type: "+t.name)},c=h.prototype;c.t4=function(i){if("string"==typeof i&&(i=e.g2[i]),void 0===i.defaultValue)throw Error("default value for type "+i.name+" is not supported");return i==e.g2.bytes?new t(0):i.defaultValue},c.r4=function(n){var r=function(t,e){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+t+" ("+e+")")}.bind(this);switch(this.type){case e.g2.int32:case e.g2.sint32:case e.g2.sfixed32:return("number"!=typeof n||n==n&&n%1!=0)&&r(typeof n,"not an integer"),n>4294967295?0|n:n;case e.g2.uint32:case e.g2.fixed32:return("number"!=typeof n||n==n&&n%1!=0)&&r(typeof n,"not an integer"),n<0?n>>>0:n;case e.g2.int64:case e.g2.sint64:case e.g2.sfixed64:if(e.q_)try{return i(n,!1)}catch(t){r(typeof n,t.message)}else r(typeof n,"requires Long.js");case e.g2.uint64:case e.g2.fixed64:if(e.q_)try{return i(n,!0)}catch(t){r(typeof n,t.message)}else r(typeof n,"requires Long.js");case e.g2.bool:return"boolean"!=typeof n&&r(typeof n,"not a boolean"),n;case e.g2.float:case e.g2.double:return"number"!=typeof n&&r(typeof n,"not a number"),n;case e.g2.string:return"string"==typeof n||n&&n instanceof String||r(typeof n,"not a string"),""+n;case e.g2.bytes:return t.V_(n)?n:t.wrap(n,"base64");case e.g2.enum:var o=this.Z3.V3(e.H3.n4.i4);for(a=0;a<o.length;a++){if(o[a].name==n)return o[a].id;if(o[a].id==n)return o[a].id}if("proto3"===this.y3)return("number"!=typeof n||n==n&&n%1!=0)&&r(typeof n,"not an integer"),(n>4294967295||n<0)&&r(typeof n,"not in range for uint32"),n;r(n,"not a valid enum value");case e.g2.group:case e.g2.message:if(n&&"object"==typeof n||r(typeof n,"object expected"),n instanceof this.Z3.s4)return n;if(n instanceof e.o4.Jd){var s={};for(var a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);n=s}return new this.Z3.s4(n)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+n+" (undefined type "+this.type+")")},c.a4=function(i,n){if(null===n)return 0;var r;switch(this.type){case e.g2.int32:return n<0?t.DP(n):t.RP(n);case e.g2.uint32:return t.RP(n);case e.g2.sint32:return t.RP(t.wP(n));case e.g2.fixed32:case e.g2.sfixed32:case e.g2.float:return 4;case e.g2.int64:case e.g2.uint64:return t.DP(n);case e.g2.sint64:return t.DP(t.MP(n));case e.g2.fixed64:case e.g2.sfixed64:return 8;case e.g2.bool:return 1;case e.g2.enum:return t.RP(n);case e.g2.double:return 8;case e.g2.string:return r=t.tA(n),t.RP(r)+r;case e.g2.bytes:if(n.vA()<0)throw Error("Illegal value for "+this.toString(!0)+": "+n.vA()+" bytes remaining");return t.RP(n.vA())+n.vA();case e.g2.message:return r=this.Z3.h4(n),t.RP(r)+r;case e.g2.group:return(r=this.Z3.h4(n))+t.RP(i<<3|e.o2.l2)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+n+" (unknown type)")},c.c4=function(i,n,r){if(null===n)return r;switch(this.type){case e.g2.int32:n<0?r.GP(n):r.CP(n);break;case e.g2.uint32:r.CP(n);break;case e.g2.sint32:r._P(n);break;case e.g2.fixed32:r.hP(n);break;case e.g2.sfixed32:r.oP(n);break;case e.g2.int64:case e.g2.uint64:r.GP(n);break;case e.g2.sint64:r.VP(n);break;case e.g2.fixed64:r.fP(n);break;case e.g2.sfixed64:r.uP(n);break;case e.g2.bool:"string"==typeof n?r.CP("false"===n.toLowerCase()?0:!!n):r.CP(n?1:0);break;case e.g2.enum:r.CP(n);break;case e.g2.float:r.EP(n);break;case e.g2.double:r.mP(n);break;case e.g2.string:r.sA(n);break;case e.g2.bytes:if(n.vA()<0)throw Error("Illegal value for "+this.toString(!0)+": "+n.vA()+" bytes remaining");var o=n.offset;r.CP(n.vA()),r.append(n),n.offset=o;break;case e.g2.message:var s=(new t).lA();this.Z3.encode(n,s),r.CP(s.offset),r.append(s.xg());break;case e.g2.group:this.Z3.encode(n,r),r.CP(i<<3|e.o2.l2);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+n+" (unknown type)")}return r},c.decode=function(t,i,n){if(i!=this.type.E2)throw Error("Unexpected wire type for element");var r,o;switch(this.type){case e.g2.int32:return 0|t.PP();case e.g2.uint32:return t.PP()>>>0;case e.g2.sint32:return 0|t.OP();case e.g2.fixed32:return t.cP()>>>0;case e.g2.sfixed32:return 0|t.aP();case e.g2.int64:return t.jP();case e.g2.uint64:return t.jP().BP();case e.g2.sint64:return t.QP();case e.g2.fixed64:return t.gP();case e.g2.sfixed64:return t.pP();case e.g2.bool:return!!t.PP();case e.g2.enum:return t.PP();case e.g2.float:return t.TP();case e.g2.double:return t.E_();case e.g2.string:return t.oA();case e.g2.bytes:if(o=t.PP(),t.vA()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+t.vA());return(r=t.clone()).F_=r.offset+o,t.offset+=o,r;case e.g2.message:return o=t.PP(),this.Z3.decode(t,o);case e.g2.group:return this.Z3.decode(t,-1,n)}throw Error("[INTERNAL] Illegal decode type")},c.u4=function(i){if(!this.e4)throw Error("valueFromString() called on non-map-key element");switch(this.type){case e.g2.int32:case e.g2.sint32:case e.g2.sfixed32:case e.g2.uint32:case e.g2.fixed32:return this.r4(parseInt(i));case e.g2.int64:case e.g2.sint64:case e.g2.sfixed64:case e.g2.uint64:case e.g2.fixed64:return this.r4(i);case e.g2.bool:return"true"===i;case e.g2.string:return this.r4(i);case e.g2.bytes:return t.K_(i)}},c.l4=function(t){if(!this.e4)throw Error("valueToString() called on non-map-key element");return this.type===e.g2.bytes?t.toString("binary"):t.toString()},r.Element=h;var l=function(t,i,n,r,o,s){a.call(this,t,i,n,r,s),this.className="Message",this.extensions=[e.T2,e.m2],this.s4=null,this.P3=!!o,this.d4=null,this.f4=null,this.g4=null},f=l.prototype=Object.create(a.prototype);f.Xg=function(i){if(this.s4&&!i)return this.s4;var n=function(e,i){function n(i,r,o,s,a){var u=void 0;if(null===i||"object"!=typeof i){if(s==e.g2.enum)for(var h=a.V3(e.H3.n4.i4),c=0;c<h.length;c++)if(h[c].id===i){i=h[c].name;break}u=i}else if(i instanceof t)u=r?i.mA():i.yA();else if(e.bv.isArray(i)){var l=i;u=[];for(var f=0;f<l.length;f++)u.push(n(l[f],r,o,s,a))}else if(i instanceof e.Map){var p=i.entries();u={};for(var d=p.next();!d.done;d=p.next())u[i.E4.l4(d.value[0])]=n(d.value[1],r,o,i.v4.type,i.v4.Z3)}else if(i instanceof e.q_)u=o?i.toString():new e.q_(i);else{u={};var g=i.y4,v=void 0;for(var c in i)if(i.hasOwnProperty(c)){var y=i[c];g&&(v=g.Q3(c)),u[c]=n(y,r,o,v.type,v.Z3)}}return u}var r=i.V3(e.H3.Jd.K3),o=i.V3(e.H3.Jd.T4),s=function(n,s){e.o4.Jd.call(this);for(var a=0,u=o.length;a<u;++a)this[o[a].name]=null;for(a=0,u=r.length;a<u;++a){var h=r[a];this[h.name]=h.repeated?[]:h.map?new e.Map(h):null,!h.required&&"proto3"!==i.y3||null===h.defaultValue||(this[h.name]=h.defaultValue)}var c;if(arguments.length>0)if(1!==arguments.length||"object"!=typeof n||"function"==typeof n.encode||e.bv.isArray(n)||n instanceof e.Map||n instanceof t||n instanceof ArrayBuffer||e.q_&&n instanceof e.q_)for(a=0,u=arguments.length;a<u;++a)void 0!==(c=arguments[a])&&this.m4(r[a].name,c);else this.m4(n)},a=s.prototype=Object.create(e.o4.Jd.prototype);a.add=function(t,n,r){var o=i.g4[t];if(!r){if(!o)throw Error(this+"#"+t+" is undefined");if(!(o instanceof e.H3.Jd.K3))throw Error(this+"#"+t+" is not a field: "+o.toString(!0));if(!o.repeated)throw Error(this+"#"+t+" is not a repeated field")}null===this[o.name]&&(this[o.name]=[]),this[o.name].push(r?n:o.r4(n,!0))},a.I4=a.add,a.set=function(t,n,r){if(t&&"object"==typeof t){for(var o in r=n,t)t.hasOwnProperty(o)&&void 0!==(n=t[o])&&this.m4(o,n,r);return this}var s=i.g4[t];if(r)this[s.name]=n;else{if(!s)throw Error(this+"#"+t+" is not a field: undefined");if(!(s instanceof e.H3.Jd.K3))throw Error(this+"#"+t+" is not a field: "+s.toString(!0));this[s.name]=n=s.r4(n)}return s.M3&&(null!==n?(null!==this[s.M3.name]&&(this[this[s.M3.name]]=null),this[s.M3.name]=s.name):s.M3.name===t&&(this[s.M3.name]=null)),this},a.m4=a.set,a.get=function(t,n){if(n)return this[t];var r=i.g4[t];if(!(r&&r instanceof e.H3.Jd.K3))throw Error(this+"#"+t+" is not a field: undefined");if(!(r instanceof e.H3.Jd.K3))throw Error(this+"#"+t+" is not a field: "+r.toString(!0));return this[r.name]},a.S4=a.get;for(var u=0;u<r.length;u++){var h=r[u];h instanceof e.H3.Jd.R4||i.x3.options.S2&&function(t){var e=t.Y3.replace(/(_[a-zA-Z])/g,function(t){return t.toUpperCase().replace("_","")});e=e.substring(0,1).toUpperCase()+e.substring(1);var n=t.Y3.replace(/([A-Z])/g,function(t){return"_"+t}),r=function(e,i){return this[t.name]=i?e:t.r4(e),this},o=function(){return this[t.name]};null===i.Q3("set"+e)&&(a["set"+e]=r),null===i.Q3("set_"+n)&&(a["set_"+n]=r),null===i.Q3("get"+e)&&(a["get"+e]=o),null===i.Q3("get_"+n)&&(a["get_"+n]=o)}(h)}return a.encode=function(e,n){"boolean"==typeof e&&(n=e,e=void 0);var r=!1;e||(e=new t,r=!0);var o=e.U_;try{return i.encode(this,e.lA(),n),(r?e.xg():e).lA(o)}catch(t){throw e.lA(o),t}},a.h4=function(){return i.h4(this)},a.w4=function(e){var n=!1;e||(e=new t,n=!0);var r=(new t).lA();return i.encode(this,r).xg(),e.CP(r.vA()),e.append(r),n?e.xg():e},a.b4=function(){try{return this.encode().tc()}catch(t){throw t.C4&&(t.C4=t.C4.tc()),t}},a.tc=a.b4,a._4=function(){try{return this.encode().yA()}catch(t){throw t.C4&&(t.C4=t.C4.yA()),t}},a.yA=a._4,a.P4=function(){try{return this.encode().mA()}catch(t){throw t.C4&&(t.C4=t.C4.mA()),t}},a.mA=a.P4,a.A4=function(){try{return this.encode().IA()}catch(t){throw t.C4&&(t.C4=t.C4.IA()),t}},a.IA=a.A4,a.O4=function(t,i){return n(this,!!t,!!i,e.g2.message,this.y4)},a.N4=function(){return JSON.stringify(n(this,!0,!0,e.g2.message,this.y4))},s.decode=function(e,n){"string"==typeof e&&(e=t.wrap(e,n||"base64"));var r=(e=e instanceof t?e:t.wrap(e)).U_;try{var o=i.decode(e.lA());return e.lA(r),o}catch(t){throw e.lA(r),t}},s.D4=function(e,n){if("string"==typeof e&&(e=t.wrap(e,n||"base64")),(e=e instanceof t?e:t.wrap(e)).vA()<1)return null;var r=e.offset,o=e.PP();if(e.vA()<o)return e.offset=r,null;try{var s=i.decode(e.slice(e.offset,e.offset+o).lA());return e.offset+=o,s}catch(t){throw e.offset+=o,t}},s.L4=function(t){return s.decode(t,"base64")},s.M4=function(t){return s.decode(t,"hex")},s.F4=function(t){return new s(JSON.parse(t))},a.toString=function(){return i.toString()},Object.defineProperty&&(Object.defineProperty(s,"$options",{value:i.z3()}),Object.defineProperty(a,"$options",{value:s.U4}),Object.defineProperty(s,"$type",{value:i}),Object.defineProperty(a,"$type",{value:i})),s}(e,this);this.d4=[],this.f4={},this.g4={};for(var r,o=0,s=this.children.length;o<s;o++)if((r=this.children[o])instanceof v)n[r.name]=r.Xg();else if(r instanceof l)n[r.name]=r.Xg();else if(r instanceof l.K3)r.Xg(),this.d4.push(r),this.f4[r.id]=r,this.g4[r.name]=r;else if(!(r instanceof l.T4||r instanceof m))throw Error("Illegal reflect child of "+this.toString(!0)+": "+children[o].toString(!0));return this.s4=n},f.encode=function(t,e,i){for(var n,r,o=null,s=0,a=this.d4.length;s<a;++s)r=t[(n=this.d4[s]).name],n.required&&null===r?null===o&&(o=n):n.encode(i?r:n.r4(r),e);if(null!==o){var u=Error("Missing at least one required field for "+this.toString(!0)+": "+o);throw u.C4=e,u}return e},f.h4=function(t){for(var e,i,n=0,r=0,o=this.d4.length;r<o;++r){if(i=t[(e=this.d4[r]).name],e.required&&null===i)throw Error("Missing at least one required field for "+this.toString(!0)+": "+e);n+=e.h4(i)}return n},f.decode=function(t,i,r){i="number"==typeof i?i:-1;for(var o,s,a,u,h=t.offset,c=new this.s4;t.offset<h+i||-1===i&&t.vA()>0;){if(a=(o=t.PP())>>>3,(s=7&o)===e.o2.l2){if(a!==r)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+a+" ("+(r?r+" expected":"not a group")+")");break}if(u=this.f4[a])if(u.repeated&&!u.options.B4)c[u.name].push(u.decode(s,t));else if(u.map){var l=u.decode(s,t);c[u.name].set(l[0],l[1])}else c[u.name]=u.decode(s,t),u.M3&&(null!==this[u.M3.name]&&(this[this[u.M3.name]]=null),c[u.M3.name]=u.name);else switch(s){case e.o2.a2:t.PP();break;case e.o2.d2:t.offset+=4;break;case e.o2.h2:t.offset+=8;break;case e.o2.c2:var f=t.PP();t.offset+=f;break;case e.o2.u2:for(;n(a,t););break;default:throw Error("Illegal wire type for unknown field "+a+" in "+this.toString(!0)+"#decode: "+s)}}for(var p=0,d=this.d4.length;p<d;++p)if(null===c[(u=this.d4[p]).name]){if(u.required){var g=Error("Missing at least one required field for "+this.toString(!0)+": "+u.name);throw g.H4=c,g}e.R2&&null!==u.defaultValue&&(c[u.name]=u.defaultValue)}return c},r.Jd=l;var p=function(t,e,i,n,r,s,a,u,h,c){o.call(this,t,e,s),this.className="Message.Field",this.required="required"===i,this.repeated="repeated"===i,this.map="map"===i,this.x4=n||null,this.type=r,this.Z3=null,this.id=a,this.options=u||{},this.defaultValue=null,this.M3=h||null,this.y3=c||"proto2",this.Y3=this.name,this.q4=null,this.G4=null,!this.x3.options.I2||this instanceof l.R4||(this.name=p.V4(this.name))};p.V4=function(t){return t.replace(/_([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};var d=p.prototype=Object.create(o.prototype);d.Xg=function(){this.q4=new h(this.type,this.Z3,!1,this.y3),this.map&&(this.G4=new h(this.x4,void 0,!0,this.y3)),this.defaultValue=void 0!==this.options.default?this.r4(this.options.default):null,"proto3"!==this.y3||this.repeated||this.map||(this.defaultValue=this.q4.t4(this.type))},d.r4=function(t,i){i=i||!1;var n,r=function(t,e){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+t+" ("+e+")")}.bind(this);if(null===t)return this.required&&r(typeof t,"required"),"proto3"===this.y3&&this.type!==e.g2.message&&r(typeof t,"proto3 field without field presence cannot be null"),null;if(this.repeated&&!i){e.bv.isArray(t)||(t=[t]);var o=[];for(n=0;n<t.length;n++)o.push(this.q4.r4(t[n]));return o}return this.map&&!i?t instanceof e.Map?t:(t instanceof Object||r(typeof t,"expected ProtoBuf.Map or raw object for map field"),new e.Map(this,t)):(!this.repeated&&e.bv.isArray(t)&&r(typeof t,"no array expected"),this.q4.r4(t))},d.j4=function(t){if("proto3"!==this.y3)return null!==t;switch(this.type){case e.g2.int32:case e.g2.sint32:case e.g2.sfixed32:case e.g2.uint32:case e.g2.fixed32:return 0!==t;case e.g2.int64:case e.g2.sint64:case e.g2.sfixed64:case e.g2.uint64:case e.g2.fixed64:return 0!==t.low||0!==t.high;case e.g2.bool:return t;case e.g2.float:case e.g2.double:return 0!==t;case e.g2.string:return t.length>0;case e.g2.bytes:return t.vA()>0;case e.g2.enum:return 0!==t;case e.g2.message:return null!==t;default:return!0}},d.encode=function(i,n){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===i||this.repeated&&0==i.length)return n;try{var r;if(this.repeated)if(this.options.B4&&e.f2.indexOf(this.type.E2)>=0){n.CP(this.id<<3|e.o2.c2),n.uA(n.offset+=1);var o=n.offset;for(r=0;r<i.length;r++)this.q4.c4(this.id,i[r],n);var s=n.offset-o,a=t.RP(s);if(a>1){var u=n.slice(o,n.offset);o+=a-1,n.offset=o,n.append(u)}n.CP(s,o-a)}else for(r=0;r<i.length;r++)n.CP(this.id<<3|this.type.E2),this.q4.c4(this.id,i[r],n);else this.map?i.forEach(function(i,r,o){var s=t.RP(8|this.x4.E2)+this.G4.a4(1,r)+t.RP(16|this.type.E2)+this.q4.a4(2,i);n.CP(this.id<<3|e.o2.c2),n.CP(s),n.CP(8|this.x4.E2),this.G4.c4(1,r,n),n.CP(16|this.type.E2),this.q4.c4(2,i,n)},this):this.j4(i)&&(n.CP(this.id<<3|this.type.E2),this.q4.c4(this.id,i,n))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+i+" ("+t+")")}return n},d.h4=function(i){if(i=this.r4(i),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===i||this.repeated&&0==i.length)return 0;var n=0;try{var r,o;if(this.repeated)if(this.options.B4&&e.f2.indexOf(this.type.E2)>=0){for(n+=t.RP(this.id<<3|e.o2.c2),o=0,r=0;r<i.length;r++)o+=this.q4.a4(this.id,i[r]);n+=t.RP(o),n+=o}else for(r=0;r<i.length;r++)n+=t.RP(this.id<<3|this.type.E2),n+=this.q4.a4(this.id,i[r]);else this.map?i.forEach(function(i,r,o){var s=t.RP(8|this.x4.E2)+this.G4.a4(1,r)+t.RP(16|this.type.E2)+this.q4.a4(2,i);n+=t.RP(this.id<<3|e.o2.c2),n+=t.RP(s),n+=s},this):this.j4(i)&&(n+=t.RP(this.id<<3|this.type.E2),n+=this.q4.a4(this.id,i))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+i+" ("+t+")")}return n},d.decode=function(t,i,n){var r,o;if(!(!this.map&&t==this.type.E2||!n&&this.repeated&&this.options.B4&&t==e.o2.c2||this.map&&t==e.o2.c2))throw Error("Illegal wire type for field "+this.toString(!0)+": "+t+" ("+this.type.E2+" expected)");if(t==e.o2.c2&&this.repeated&&this.options.B4&&e.f2.indexOf(this.type.E2)>=0&&!n){o=i.PP(),o=i.offset+o;for(var s=[];i.offset<o;)s.push(this.decode(this.type.E2,i,!0));return s}if(this.map){var a=this.G4.t4(this.x4);if(r=this.q4.t4(this.type),o=i.PP(),i.vA()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+i.vA());var u=i.clone();for(u.F_=u.offset+o,i.offset+=o;u.vA()>0;){var h=u.PP();t=7&h;var c=h>>>3;if(1===c)a=this.G4.decode(u,t,c);else{if(2!==c)throw Error("Unexpected tag in map field key/value submessage");r=this.q4.decode(u,t,c)}}return[a,r]}return this.q4.decode(i,t,this.id)},r.Jd.K3=p;var g=function(t,e,i,n,r,o,s){p.call(this,t,e,i,null,n,r,o,s),this.Q4};g.prototype=Object.create(p.prototype),r.Jd.R4=g;r.Jd.T4=function(t,e,i){o.call(this,t,e,i),this.fields=[]};var v=function(t,e,i,n,r){a.call(this,t,e,i,n,r),this.className="Enum",this.object=null};(v.prototype=Object.create(a.prototype)).Xg=function(){for(var t={},e=this.V3(v.i4),i=0,n=e.length;i<n;++i)t[e[i].name]=e[i].id;return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.z3()}),this.object=t},r.n4=v;var y=function(t,e,i,n){o.call(this,t,e,i),this.className="Enum.Value",this.id=n};y.prototype=Object.create(o.prototype),r.n4.i4=y;var m=function(t,e,i,n){o.call(this,t,e,i),this.K4=n};m.prototype=Object.create(o.prototype),r.Y4=m;var E=function(t,e,i,n){a.call(this,t,e,i,n),this.className="Service",this.s4=null};(E.prototype=Object.create(a.prototype)).Xg=function(i){return this.s4&&!i?this.s4:this.s4=function(e,i){for(var n=function(t){e.o4.W4.call(this),this.z4=t||function(t,e,i){setTimeout(i.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},r=n.prototype=Object.create(e.o4.W4.prototype),o=i.V3(e.H3.W4.J4),s=0;s<o.length;s++)!function(e){r[e.name]=function(n,r){try{try{n=e.X4.s4.decode(t.wrap(n))}catch(t){if(!(t instanceof TypeError))throw t}if(!(n&&n instanceof e.X4.s4))return void setTimeout(r.bind(this,Error("Illegal request type provided to service method "+i.name+"#"+e.name)),0);this.z4(e.q3(),n,function(t,n){if(t)r(t);else{try{n=e.Z4.s4.decode(n)}catch(t){}n&&n instanceof e.Z4.s4?r(null,n):r(Error("Illegal response type received in service method "+i.name+"#"+e.name))}})}catch(t){setTimeout(r.bind(this,t),0)}},n[e.name]=function(t,i,r){new n(t)[e.name](i,r)},Object.defineProperty&&(Object.defineProperty(n[e.name],"$options",{value:e.z3()}),Object.defineProperty(r[e.name],"$options",{value:n[e.name].U4}))}(o[s]);return Object.defineProperty&&(Object.defineProperty(n,"$options",{value:i.z3()}),Object.defineProperty(r,"$options",{value:n.U4}),Object.defineProperty(n,"$type",{value:i}),Object.defineProperty(r,"$type",{value:i})),n}(e,this)},r.W4=E;var b=function(t,e,i,n){o.call(this,t,e,i),this.className="Service.Method",this.options=n||{}};(b.prototype=Object.create(o.prototype)).z3=u.z3,r.W4.e6=b;var w=function(t,e,i,n,r,o,s,a){b.call(this,t,e,i,a),this.className="Service.RPCMethod",this.t6=n,this.r6=r,this.i6=o,this.n6=s,this.X4=null,this.Z4=null};return w.prototype=Object.create(b.prototype),r.W4.J4=w,r}(e),e.o4=function(t,e,n){var r=function(t){this.s6=new n.X3(this,null,""),this.o6=this.s6,this.a6=!1,this.result=null,this.files={},this.h6=null,this.options=t||{},this.y3="proto3"===this.options.y3?"proto3":"proto2"},o=r.prototype;return o.reset=function(){this.o6=this.s6},o.c6=function(t){if("string"!=typeof t||!e.Y2.test(t))throw Error("Illegal package: "+t);var i,r,o=t.split(".");for(i=0;i<o.length;i++)if(!e.zO.test(o[i]))throw Error("Illegal package: "+o[i]);for(i=0;i<o.length;i++)null===(r=this.o6.Q3(o[i]))&&this.o6.j3(r=new n.X3(this,this.o6,o[i])),this.o6=r;return this},r.u6=function(i){if("string"!=typeof i.name||!e.zO.test(i.name))return!1;if(void 0!==i.values||void 0!==i.w3)return!1;var n;if(void 0!==i.fields){if(!t.bv.isArray(i.fields))return!1;var o,s=[];for(n=0;n<i.fields.length;n++){if(!r.l6(i.fields[n]))return!1;if(o=parseInt(i.fields[n].id,10),s.indexOf(o)>=0)return!1;s.push(o)}s=null}if(void 0!==i.c3){if(!t.bv.isArray(i.c3))return!1;for(n=0;n<i.c3.length;n++)if(!r.p6(i.c3[n]))return!1}if(void 0!==i.messages){if(!t.bv.isArray(i.messages))return!1;for(n=0;n<i.messages.length;n++)if(!r.u6(i.messages[n])&&!r.d6(i.messages[n]))return!1}if(void 0!==i.extensions&&(!t.bv.isArray(i.extensions)||2!==i.extensions.length||"number"!=typeof i.extensions[0]||"number"!=typeof i.extensions[1]))return!1;if("proto3"===i.y3){for(n=0;n<i.fields.length;n++){var a=i.fields[n];if("required"===a.rule)return!1;if(a.default)return!1;if(a.options)for(var u=Object.keys(a.options),h=0;h<u.length;h++)if("default"===u[h])return!1}if(i.extensions)return!1}return!0},r.l6=function(t){if("string"!=typeof t.rule||"string"!=typeof t.name||"string"!=typeof t.type||void 0===t.id)return!1;if(!(e.Q2.test(t.rule)&&e.zO.test(t.name)&&e.Y2.test(t.type)&&e.t3.test(""+t.id)))return!1;if(void 0!==t.options){if("object"!=typeof t.options)return!1;for(var i,n=Object.keys(t.options),r=0;r<n.length;r++)if("string"!=typeof(i=n[r])||"string"!=typeof t.options[i]&&"number"!=typeof t.options[i]&&"boolean"!=typeof t.options[i])return!1}return!0},r.p6=function(i){if("string"!=typeof i.name||!e.zO.test(i.name))return!1;if(void 0===i.values||!t.bv.isArray(i.values)||0==i.values.length)return!1;for(var n=0;n<i.values.length;n++){if("object"!=typeof i.values[n])return!1;if("string"!=typeof i.values[n].name||void 0===i.values[n].id)return!1;if(!e.zO.test(i.values[n].name)||!e.r3.test(""+i.values[n].id))return!1}return"proto3"!==i.y3||0===i.values[0].id},o.create=function(e){if(!e)return this;if(t.bv.isArray(e)||(e=[e]),0===e.length)return this;var i=[];for(i.push(e);i.length>0;){if(e=i.pop(),!t.bv.isArray(e))throw Error("Not a valid namespace: "+JSON.stringify(e));for(;e.length>0;){var o=e.shift();if(r.u6(o)){var s=new n.Jd(this,this.o6,o.name,o.options,o.P3,o.y3),a={};if(o.A3)for(var u=Object.keys(o.A3),h=0,c=u.length;h<c;++h)s.j3(a[u[h]]=new n.Jd.T4(this,s,u[h]));if(o.fields&&o.fields.length>0)for(h=0,c=o.fields.length;h<c;++h){var l=o.fields[h];if(null!==s.Q3(l.id))throw Error("Duplicate field id in message "+s.name+": "+l.id);if(l.options)for(var f=Object.keys(l.options),p=0,d=f.length;p<d;++p){if("string"!=typeof f[p])throw Error("Illegal field option name in message "+s.name+"#"+l.name+": "+f[p]);if("string"!=typeof l.options[f[p]]&&"number"!=typeof l.options[f[p]]&&"boolean"!=typeof l.options[f[p]])throw Error("Illegal field option value in message "+s.name+"#"+l.name+"#"+f[p]+": "+l.options[f[p]])}var g=null;if("string"==typeof l.M3&&void 0===(g=a[l.M3]))throw Error("Illegal oneof in message "+s.name+"#"+l.name+": "+l.M3);l=new n.Jd.K3(this,s,l.rule,l.keytype,l.type,l.name,l.id,l.options,g,o.y3),g&&g.fields.push(l),s.j3(l)}var v=[];if(void 0!==o.c3&&o.c3.length>0)for(h=0;h<o.c3.length;h++)v.push(o.c3[h]);if(o.messages&&o.messages.length>0)for(h=0;h<o.messages.length;h++)v.push(o.messages[h]);if(o.extensions&&(s.extensions=o.extensions,s.extensions[0]<t.T2&&(s.extensions[0]=t.T2),s.extensions[1]>t.m2&&(s.extensions[1]=t.m2)),this.o6.j3(s),v.length>0){i.push(e),e=v,v=null,this.o6=s,s=null;continue}v=null,s=null}else if(r.p6(o)){for(s=new n.n4(this,this.o6,o.name,o.options,o.y3),h=0;h<o.values.length;h++)s.j3(new n.n4.i4(this,s,o.values[h].name,o.values[h].id));this.o6.j3(s),s=null}else if(r.f6(o)){for(h in s=new n.W4(this,this.o6,o.name,o.options),o.w3)o.w3.hasOwnProperty(h)&&s.j3(new n.W4.J4(this,s,h,o.w3[h].request,o.w3[h].response,o.w3[h].C3,o.w3[h]._3,o.w3[h].options));this.o6.j3(s),s=null}else{if(!r.d6(o))throw Error("Not a valid definition: "+JSON.stringify(o));if(s=this.o6.resolve(o.B3))for(h=0;h<o.fields.length;h++){if(null!==s.Q3(o.fields[h].id))throw Error("Duplicate extended field id in message "+s.name+": "+o.fields[h].id);if(o.fields[h].id<s.extensions[0]||o.fields[h].id>s.extensions[1])throw Error("Illegal extended field id in message "+s.name+": "+o.fields[h].id+" ("+s.extensions.join(" to ")+" expected)");var y=o.fields[h].name;this.options.I2&&(y=n.Jd.K3.V4(o.fields[h].name)),l=new n.Jd.R4(this,s,o.fields[h].rule,o.fields[h].type,this.o6.q3()+"."+y,o.fields[h].id,o.fields[h].options);var m=new n.Y4(this,this.o6,o.fields[h].name,l);l.Q4=m,this.o6.j3(m),s.j3(l)}else if(!/\.?google\.protobuf\./.test(o.B3))throw Error("Extended message "+o.B3+" is not defined")}o=null}e=null,this.o6=this.o6.parent}return this.a6=!1,this.result=null,this},o.g6=function(e,n){if("string"==typeof n){if(t.bv.w2&&(n=i(64).resolve(n)),!0===this.files[n])return this.reset(),this;this.files[n]=!0}else if("object"==typeof n){var r=n.root;t.bv.w2&&(r=i(64).resolve(r));var o=[r,n.E6].join("/");if(!0===this.files[o])return this.reset(),this;this.files[o]=!0}if(e.imports&&e.imports.length>0){var s,a="/",u=!1;"object"==typeof n?(this.h6=n.root,u=!0,s=this.h6,n=n.E6,(s.indexOf("\\")>=0||n.indexOf("\\")>=0)&&(a="\\")):"string"==typeof n?this.h6?s=this.h6:n.indexOf("/")>=0?""===(s=n.replace(/\/[^\/]*$/,""))&&(s="/"):n.indexOf("\\")>=0?(s=n.replace(/\\[^\\]*$/,""),a="\\"):s=".":s=null;for(var h=0;h<e.imports.length;h++)if("string"==typeof e.imports[h]){if(!s)throw Error("Cannot determine import root: File name is unknown");var c=e.imports[h];if(/^google\/protobuf\//.test(c))continue;if(c=s+a+c,!0===this.files[c])continue;/\.proto$/i.test(c)&&!t.n3&&(c=c.replace(/\.proto$/,".json"));var l=t.bv.fetch(c);if(null===l)throw Error("Failed to import '"+c+"' in '"+n+"': File not found");/\.json$/i.test(c)?this.g6(JSON.parse(l+""),c):this.g6(new t.n3.R0(l+"").parse(),c)}else n?/\.(\w+)$/.test(n)?this.g6(e.imports[h],n.replace(/^(.+)\.(\w+)$/,function(t,e,i){return e+"_import"+h+"."+i})):this.g6(e.imports[h],n+"_import"+h):this.g6(e.imports[h]);u&&(this.h6=null)}e.package&&this.c6(e.package),e.y3&&function t(e,i){i.y3=e,i.messages&&i.messages.forEach(function(i){t(e,i)}),i.c3&&i.c3.forEach(function(i){t(e,i)})}(e.y3,e);var f=this.o6;return e.options&&Object.keys(e.options).forEach(function(t){f.options[t]=e.options[t]}),e.messages&&(this.create(e.messages),this.o6=f),e.c3&&(this.create(e.c3),this.o6=f),e.services&&(this.create(e.services),this.o6=f),e.v6&&this.create(e.v6),this.reset(),this},r.f6=function(t){return!("string"!=typeof t.name||!e.zO.test(t.name)||"object"!=typeof t.w3)},r.d6=function(i){if("string"!=typeof i.B3||!e.Y2.test(i.B3))return!1;var n;if(void 0!==i.fields){if(!t.bv.isArray(i.fields))return!1;var o,s=[];for(n=0;n<i.fields.length;n++){if(!r.l6(i.fields[n]))return!1;if(o=parseInt(i.id,10),s.indexOf(o)>=0)return!1;s.push(o)}s=null}return!0},o.y6=function(){var i;if(null!=this.o6&&"object"!=typeof this.o6.type){if(this.o6 instanceof n.X3)for(var r=this.o6.children,o=0,s=r.length;o<s;++o)this.o6=r[o],this.y6();else if(this.o6 instanceof n.Jd.K3){if(e.tN.test(this.o6.type))this.o6.type=t.g2[this.o6.type];else{if(!e.Y2.test(this.o6.type))throw Error("Illegal type reference in "+this.o6.toString(!0)+": "+this.o6.type);if(!(i=(this.o6 instanceof n.Jd.R4?this.o6.Q4.parent:this.o6.parent).resolve(this.o6.type,!0)))throw Error("Unresolvable type reference in "+this.o6.toString(!0)+": "+this.o6.type);if(this.o6.Z3=i,i instanceof n.n4){if(this.o6.type=t.g2.enum,"proto3"===this.o6.y3&&"proto3"!==i.y3)throw Error("Proto3 message refers to proto2 enum; this is not allowed due to differing enum semantics in proto3")}else{if(!(i instanceof n.Jd))throw Error("Illegal type reference in "+this.o6.toString(!0)+": "+this.o6.type);this.o6.type=i.P3?t.g2.group:t.g2.message}}if(this.o6.map){if(!e.tN.test(this.o6.x4))throw Error("Illegal key type for map field in "+this.o6.toString(!0)+": "+this.o6.type);this.o6.x4=t.g2[this.o6.x4]}}else if(this.o6 instanceof t.H3.n4.i4);else if(this.o6 instanceof t.H3.W4.e6){if(!(this.o6 instanceof t.H3.W4.J4))throw Error("Illegal service type in "+this.o6.toString(!0));if(!((i=this.o6.parent.resolve(this.o6.t6))&&i instanceof t.H3.Jd))throw Error("Illegal type reference in "+this.o6.toString(!0)+": "+this.o6.t6);if(this.o6.X4=i,!((i=this.o6.parent.resolve(this.o6.r6))&&i instanceof t.H3.Jd))throw Error("Illegal type reference in "+this.o6.toString(!0)+": "+this.o6.r6);this.o6.Z4=i}else if(!(this.o6 instanceof t.H3.Jd.T4||this.o6 instanceof t.H3.Y4))throw Error("Illegal object in namespace: "+typeof this.o6+":"+this.o6);this.reset()}},o.Xg=function(t){if(this.reset(),this.a6||(this.y6(),this.a6=!0,this.result=null),null===this.result&&(this.result=this.s6.Xg()),t){for(var e="string"==typeof t?t.split("."):t,i=this.result,n=0;n<e.length;n++){if(!i[e[n]]){i=null;break}i=i[e[n]]}return i}return this.result},o.T6=function(t){return t?this.s6.resolve(t):this.s6},o.toString=function(){return"Builder"},r.Jd=function(){},r.W4=function(){},r}(e,e.Lang,e.H3),e.Map=function(t){function e(t){var e=0;return{next:function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}}var i=function(e,i){if(!e.map)throw Error("field is not a map");if(this.K4=e,this.E4=new t.H3.Element(e.x4,null,!0,e.y3),this.v4=new t.H3.Element(e.type,e.Z3,!1,e.y3),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),i)for(var n=Object.keys(i),r=0;r<n.length;r++){var o=this.E4.u4(n[r]),s=this.v4.r4(i[n[r]]);this.map[this.E4.l4(o)]={key:o,value:s}}},n=i.prototype;return n.clear=function(){this.map={}},n.delete=function(t){var e=this.E4.l4(this.E4.r4(t)),i=e in this.map;return delete this.map[e],i},n.entries=function(){for(var t,i=[],n=Object.keys(this.map),r=0;r<n.length;r++)i.push([(t=this.map[n[r]]).key,t.value]);return e(i)},n.keys=function(){for(var t=[],i=Object.keys(this.map),n=0;n<i.length;n++)t.push(this.map[i[n]].key);return e(t)},n.values=function(){for(var t=[],i=Object.keys(this.map),n=0;n<i.length;n++)t.push(this.map[i[n]].value);return e(t)},n.forEach=function(t,e){for(var i,n=Object.keys(this.map),r=0;r<n.length;r++)t.call(e,(i=this.map[n[r]]).value,i.key,this)},n.set=function(t,e){var i=this.E4.r4(t),n=this.v4.r4(e);return this.map[this.E4.l4(i)]={key:i,value:n},this},n.get=function(t){var e=this.E4.l4(this.E4.r4(t));if(e in this.map)return this.map[e].value},n.has=function(t){return this.E4.l4(this.E4.r4(t))in this.map},i}(e),e.m6=function(t,i,n){return("string"==typeof i||i&&"string"==typeof i.E6&&"string"==typeof i.root)&&(n=i,i=void 0),e.Zg(new e.n3.R0(t).parse(),i,n)},e.I6=e.m6,e.S6=function(t,i,n){if(i&&"object"==typeof i?(n=i,i=null):i&&"function"==typeof i||(i=null),i)return e.bv.fetch("string"==typeof t?t:t.root+"/"+t.E6,function(r){if(null!==r)try{i(null,e.m6(r,n,t))}catch(t){i(t)}else i(Error("Failed to fetch file"))});var r=e.bv.fetch("object"==typeof t?t.root+"/"+t.E6:t);return null===r?null:e.m6(r,n,t)},e.R6=e.S6,e.w6=function(t){return void 0===(t=t||{}).I2&&(t.I2=e.I2),void 0===t.S2&&(t.S2=e.S2),new e.o4(t)},e.Zg=function(t,i,n){return("string"==typeof i||i&&"string"==typeof i.E6&&"string"==typeof i.root)&&(n=i,i=null),i&&"object"==typeof i||(i=e.w6()),"string"==typeof t&&(t=JSON.parse(t)),i.g6(t,n),i.y6(),i},e.b6=function(t,i,n){if(i&&"object"==typeof i?(n=i,i=null):i&&"function"==typeof i||(i=null),i)return e.bv.fetch("string"==typeof t?t:t.root+"/"+t.E6,function(r){if(null!==r)try{i(null,e.Zg(JSON.parse(r),n,t))}catch(t){i(t)}else i(Error("Failed to fetch file"))});var r=e.bv.fetch("object"==typeof t?t.root+"/"+t.E6:t);return null===r?null:e.Zg(JSON.parse(r),n,t)},e}"object"==typeof t&&t&&"object"==typeof e&&e?t.i=a(i(35)):(r=[i(162)],void 0!==(o="function"==typeof(n=a)?n.apply(e,r):n)&&(t.i=o))}()}).call(e,i(63)(t))},function(t,e,n){(function(t){var r,o;
/**
 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
 * This version of ByteBuffer.js uses an ArrayBuffer as its backing buffer which is accessed through a DataView and is
 * compatible with modern browsers.
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ByteBuffer.js for details
 */!function(s){"use strict";function a(t){function e(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function n(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+a.apply(String,t);t.length+arguments.length>1024&&(e.push(a.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}var r=function(t,e,i){if(void 0===t&&(t=r.D_),void 0===e&&(e=r.k_),void 0===i&&(i=r.L_),!i){if((t|=0)<0)throw RangeError("Illegal capacity");e=!!e,i=!!i}this.buffer=0===t?s:new ArrayBuffer(t),this.view=0===t?null:new DataView(this.buffer),this.offset=0,this.M_=-1,this.F_=t,this.U_=void 0!==e&&!!e,this.B_=!!i};r.VERSION="3.5.5",r.H_=!0,r.x_=!1,r.D_=16,r.k_=r.x_,r.L_=!1,r.q_=t||null;var o=r.prototype,s=new ArrayBuffer(0),a=String.fromCharCode;r.G_=function(t,e,i){return new r(t,e,i)},r.concat=function(t,e,i,n){"boolean"!=typeof e&&"string"==typeof e||(n=i,i=e,e=void 0);for(var o,s=0,a=0,u=t.length;a<u;++a)r.V_(t[a])||(t[a]=r.wrap(t[a],e)),(o=t[a].F_-t[a].offset)>0&&(s+=o);if(0===s)return new r(0,i,n);var h,c=new r(s,i,n),l=new Uint8Array(c.buffer);for(a=0;a<u;)(o=(h=t[a++]).F_-h.offset)<=0||(l.set(new Uint8Array(h.buffer).subarray(h.offset,h.F_),c.offset),c.offset+=o);return c.F_=c.offset,c.offset=0,c},r.V_=function(t){return!0===(t&&t instanceof r)},r.type=function(){return ArrayBuffer},r.wrap=function(t,e,n,s){if("string"!=typeof e&&(s=n,n=e,e=void 0),"string"==typeof t)switch(void 0===e&&(e="utf8"),e){case"base64":return r.j_(t,n);case"hex":return r.Q_(t,n);case"binary":return r.K_(t,n);case"utf8":return r.Y_(t,n);case"debug":return r.W_(t,n);default:throw Error("Unsupported encoding: "+e)}if(null===t||"object"!=typeof t)throw TypeError("Illegal buffer");var a;if(r.V_(t))return(a=o.clone.call(t)).M_=-1,a;if(t instanceof Uint8Array)a=new r(0,n,s),t.length>0&&(a.buffer=t.buffer,a.offset=t.byteOffset,a.F_=t.byteOffset+t.length,a.view=t.length>0?new DataView(t.buffer):null);else if(t instanceof ArrayBuffer)a=new r(0,n,s),t.byteLength>0&&(a.buffer=t,a.offset=0,a.F_=t.byteLength,a.view=t.byteLength>0?new DataView(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");for((a=new r(t.length,n,s)).F_=t.length,i=0;i<t.length;++i)a.view.setUint8(i,t[i])}return a},o.z_=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view.setInt8(e,t),i&&(this.offset+=1),this},o.jC=o.z_,o.J_=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view.getInt8(t);return e&&(this.offset+=1),i},o.d_=o.J_,o.X_=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view.setUint8(e,t),i&&(this.offset+=1),this},o.Z_=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view.getUint8(t);return e&&(this.offset+=1),i},o.eP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.view.setInt16(e,t,this.U_),i&&(this.offset+=2),this},o.tP=o.eP,o.rP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=this.view.getInt16(t,this.U_);return e&&(this.offset+=2),i},o.iP=o.rP,o.nP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.view.setUint16(e,t,this.U_),i&&(this.offset+=2),this},o.sP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=this.view.getUint16(t,this.U_);return e&&(this.offset+=2),i},o.oP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setInt32(e,t,this.U_),i&&(this.offset+=4),this},o.Bg=o.oP,o.aP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getInt32(t,this.U_);return e&&(this.offset+=4),i},o.Qg=o.aP,o.hP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setUint32(e,t,this.U_),i&&(this.offset+=4),this},o.cP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getUint32(t,this.U_);return e&&(this.offset+=4),i},t&&(o.uP=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"==typeof e)e=t.DE(e);else if("string"==typeof e)e=t.kE(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.DE(e):"string"==typeof e&&(e=t.kE(e)),i+=8;var r=this.buffer.byteLength;return i>r&&this.resize((r*=2)>i?r:i),i-=8,this.U_?(this.view.setInt32(i,e.low,!0),this.view.setInt32(i+4,e.high,!0)):(this.view.setInt32(i,e.high,!1),this.view.setInt32(i+4,e.low,!1)),n&&(this.offset+=8),this},o.lP=o.uP,o.pP=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=this.U_?new t(this.view.getInt32(e,!0),this.view.getInt32(e+4,!0),!1):new t(this.view.getInt32(e+4,!1),this.view.getInt32(e,!1),!1);return i&&(this.offset+=8),n},o.dP=o.pP,o.fP=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"==typeof e)e=t.DE(e);else if("string"==typeof e)e=t.kE(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.DE(e):"string"==typeof e&&(e=t.kE(e)),i+=8;var r=this.buffer.byteLength;return i>r&&this.resize((r*=2)>i?r:i),i-=8,this.U_?(this.view.setInt32(i,e.low,!0),this.view.setInt32(i+4,e.high,!0)):(this.view.setInt32(i,e.high,!1),this.view.setInt32(i+4,e.low,!1)),n&&(this.offset+=8),this},o.gP=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=this.U_?new t(this.view.getInt32(e,!0),this.view.getInt32(e+4,!0),!0):new t(this.view.getInt32(e+4,!1),this.view.getInt32(e,!1),!0);return i&&(this.offset+=8),n}),o.EP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setFloat32(e,t,this.U_),i&&(this.offset+=4),this},o.vP=o.EP,o.yP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getFloat32(t,this.U_);return e&&(this.offset+=4),i},o.TP=o.yP,o.mP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=8,this.view.setFloat64(e,t,this.U_),i&&(this.offset+=8),this},o.YC=o.mP,o.IP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.view.getFloat64(t,this.U_);return e&&(this.offset+=8),i},o.E_=o.IP,r.SP=5,r.RP=function(t){return(t>>>=0)<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},r.wP=function(t){return((t|=0)<<1^t>>31)>>>0},r.bP=function(t){return t>>>1^-(1&t)|0},o.CP=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,o=r.RP(t);e+=o;var s=this.buffer.byteLength;return e>s&&this.resize((s*=2)>e?s:e),e-=o,this.view.setUint8(e,n=128|t),(t>>>=0)>=128?(n=t>>7|128,this.view.setUint8(e+1,n),t>=16384?(n=t>>14|128,this.view.setUint8(e+2,n),t>=1<<21?(n=t>>21|128,this.view.setUint8(e+3,n),t>=1<<28?(this.view.setUint8(e+4,t>>28&15),o=5):(this.view.setUint8(e+3,127&n),o=4)):(this.view.setUint8(e+2,127&n),o=3)):(this.view.setUint8(e+1,127&n),o=2)):(this.view.setUint8(e,127&n),o=1),i?(this.offset+=o,this):o},o._P=function(t,e){return this.CP(r.wP(t),e)},o.PP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n,r=0,o=0;do{if(n=t+r,!this.B_&&n>this.F_){var s=Error("Truncated");throw s.AP=!0,s}i=this.view.getUint8(n),r<5&&(o|=(127&i)<<7*r>>>0),++r}while(128==(128&i));return o|=0,e?(this.offset+=r,o):{value:o,length:r}},o.OP=function(t){var e=this.PP(t);return"object"==typeof e?e.value=r.bP(e.value):e=r.bP(e),e},t&&(r.NP=10,r.DP=function(e){"number"==typeof e?e=t.DE(e):"string"==typeof e&&(e=t.kE(e));var i=e.kP()>>>0,n=e.LP(28).kP()>>>0,r=e.LP(56).kP()>>>0;return 0==r?0==n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10},r.MP=function(e){return"number"==typeof e?e=t.DE(e,!1):"string"==typeof e?e=t.kE(e,!1):!1!==e.FP&&(e=e.UP()),e.shiftLeft(1).pT(e.HP(63)).BP()},r.xP=function(e){return"number"==typeof e?e=t.DE(e,!1):"string"==typeof e?e=t.kE(e,!1):!1!==e.FP&&(e=e.UP()),e.LP(1).pT(e.qP(t.ONE).UP().qE()).UP()},o.GP=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"==typeof e)e=t.DE(e);else if("string"==typeof e)e=t.kE(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.DE(e,!1):"string"==typeof e?e=t.kE(e,!1):!1!==e.FP&&(e=e.UP());var o=r.DP(e),s=e.kP()>>>0,a=e.LP(28).kP()>>>0,u=e.LP(56).kP()>>>0;i+=o;var h=this.buffer.byteLength;switch(i>h&&this.resize((h*=2)>i?h:i),i-=o,o){case 10:this.view.setUint8(i+9,u>>>7&1);case 9:this.view.setUint8(i+8,9!==o?128|u:127&u);case 8:this.view.setUint8(i+7,8!==o?a>>>21|128:a>>>21&127);case 7:this.view.setUint8(i+6,7!==o?a>>>14|128:a>>>14&127);case 6:this.view.setUint8(i+5,6!==o?a>>>7|128:a>>>7&127);case 5:this.view.setUint8(i+4,5!==o?128|a:127&a);case 4:this.view.setUint8(i+3,4!==o?s>>>21|128:s>>>21&127);case 3:this.view.setUint8(i+2,3!==o?s>>>14|128:s>>>14&127);case 2:this.view.setUint8(i+1,2!==o?s>>>7|128:s>>>7&127);case 1:this.view.setUint8(i,1!==o?128|s:127&s)}return n?(this.offset+=o,this):o},o.VP=function(t,e){return this.GP(r.MP(t),e)},o.jP=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,r=0,o=0,s=0,a=0;if(r=127&(a=this.view.getUint8(e++)),128&a&&(r|=(127&(a=this.view.getUint8(e++)))<<7,128&a&&(r|=(127&(a=this.view.getUint8(e++)))<<14,128&a&&(r|=(127&(a=this.view.getUint8(e++)))<<21,128&a&&(o=127&(a=this.view.getUint8(e++)),128&a&&(o|=(127&(a=this.view.getUint8(e++)))<<7,128&a&&(o|=(127&(a=this.view.getUint8(e++)))<<14,128&a&&(o|=(127&(a=this.view.getUint8(e++)))<<21,128&a&&(s=127&(a=this.view.getUint8(e++)),128&a&&(s|=(127&(a=this.view.getUint8(e++)))<<7,128&a))))))))))throw Error("Buffer overrun");var u=t.qI(r|o<<28,o>>>4|s<<24,!1);return i?(this.offset=e,u):{value:u,length:e-n}},o.QP=function(e){var i=this.jP(e);return i&&i.value instanceof t?i.value=r.xP(i.value):i=r.xP(i),i}),o.Hg=function(t,i){var n=void 0===i;n&&(i=this.offset);var r,o=t.length;if(!this.B_){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(r=0;r<o;++r)if(0===t.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}o=h.KP(e(t))[1],i+=o+1;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=o+1,h.YP(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),this.view.setUint8(i++,0),n?(this.offset=i,this):o},o.Yg=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=t,o=-1;return h.WP(function(){if(0===o)return null;if(t>=this.F_)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.F_);return 0===(o=this.view.getUint8(t++))?null:o}.bind(this),i=n(),!0),e?(this.offset=t,i()):{string:i(),length:t-r}},o.zP=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,o=i;r=h.KP(e(t),this.B_)[1],i+=4+r;var s=this.buffer.byteLength;if(i>s&&this.resize((s*=2)>i?s:i),i-=4+r,this.view.setUint32(i,r,this.U_),i+=4,h.YP(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),i!==o+4+r)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+4+r));return n?(this.offset=i,this):i-o},o.JP=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i,r,o=t;r=this.view.getUint32(t,this.U_);var s,a=(t+=4)+r;return h.WP(function(){return t<a?this.view.getUint8(t++):null}.bind(this),s=n(),this.B_),i=s(),e?(this.offset=t,i):{string:i,length:t-o}},r.XP="c",r.ZP="b",o.$P=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,o=i;r=h.KP(e(t))[1],i+=r;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=r,h.YP(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),n?(this.offset=i,this):i-o},o.qb=o.$P,r.eA=function(t){return h.KP(e(t))[0]},r.tA=function(t){return h.KP(e(t))[1]},o.rA=function(t,e,i){"number"==typeof e&&(i=e,e=void 0);var o=void 0===i;if(o&&(i=this.offset),void 0===e&&(e=r.XP),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var s,a=0,u=i;if(e===r.XP){if(s=n(),h.iA(function(){return a<t&&i<this.F_?this.view.getUint8(i++):null}.bind(this),function(t){++a,h.nA(t,s)}.bind(this)),a!==t)throw RangeError("Illegal range: Truncated data, "+a+" == "+t);return o?(this.offset=i,s()):{string:s(),length:i-u}}if(e===r.ZP){if(!this.B_){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+t+") <= "+this.buffer.byteLength)}var c=i+t;if(h.WP(function(){return i<c?this.view.getUint8(i++):null}.bind(this),s=n(),this.B_),i!==c)throw RangeError("Illegal range: Truncated data, "+i+" == "+c);return o?(this.offset=i,s()):{string:s(),length:i-u}}throw TypeError("Unsupported metrics: "+e)},o.Lb=o.rA,o.sA=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,s,a=i;o=h.KP(e(t),this.B_)[1],s=r.RP(o),i+=s+o;var u=this.buffer.byteLength;if(i>u&&this.resize((u*=2)>i?u:i),i-=s+o,i+=this.CP(o,i),h.YP(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),i!==a+o+s)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+o+s));return n?(this.offset=i,this):i-a},o.oA=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=this.PP(t),o=t;t+=r.length,r=r.value;var s=t+r,a=n();return h.WP(function(){return t<s?this.view.getUint8(t++):null}.bind(this),a,this.B_),i=a(),e?(this.offset=t,i):{string:i,length:t-o}},o.append=function(t,e,i){"number"!=typeof e&&"string"==typeof e||(i=e,e=void 0);var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}t instanceof r||(t=r.wrap(t,e));var o=t.F_-t.offset;if(o<=0)return this;i+=o;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=o,new Uint8Array(this.buffer,i).set(new Uint8Array(t.buffer).subarray(t.offset,t.F_)),t.offset+=o,n&&(this.offset+=o),this},o.aA=function(t,e){return t.append(this,e),this},o.assert=function(t){return this.B_=!t,this},o.hA=function(){return this.buffer.byteLength},o.clear=function(){return this.offset=0,this.F_=this.buffer.byteLength,this.M_=-1,this},o.clone=function(t){var e=new r(0,this.U_,this.B_);if(t){var i=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(i).set(this.buffer),e.buffer=i,e.view=new DataView(i)}else e.buffer=this.buffer,e.view=this.view;return e.offset=this.offset,e.M_=this.M_,e.F_=this.F_,e},o.compact=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var i=e-t;if(0===i)return this.buffer=s,this.view=null,this.M_>=0&&(this.M_-=t),this.offset=0,this.F_=0,this;var n=new ArrayBuffer(i);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t,e)),this.buffer=n,this.view=new DataView(n),this.M_>=0&&(this.M_-=t),this.offset=0,this.F_=i,this},o.cA=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return new r(0,this.U_,this.B_);var i=e-t,n=new r(i,this.U_,this.B_);return n.offset=0,n.F_=i,n.M_>=0&&(n.M_-=t),this.jE(n,0,t,e),n},o.jE=function(t,e,i,n){var o,s;if(!this.B_&&!r.V_(t))throw TypeError("Illegal target: Not a ByteBuffer");if(e=(s=void 0===e)?t.offset:0|e,i=(o=void 0===i)?this.offset:0|i,n=void 0===n?this.F_:0|n,e<0||e>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+e+" <= "+t.buffer.byteLength);if(i<0||n>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+i+" <= "+this.buffer.byteLength);var a=n-i;return 0===a?t:(t.uA(e+a),new Uint8Array(t.buffer).set(new Uint8Array(this.buffer).subarray(i,n),e),o&&(this.offset+=a),s&&(t.offset+=a),this)},o.uA=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},o.fill=function(t,e,i){var n=void 0===e;if(n&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),void 0===e&&(e=this.offset),void 0===i&&(i=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(e>=i)return this;for(;e<i;)this.view.setUint8(e++,t);return n&&(this.offset=e),this},o.xg=function(){return this.F_=this.offset,this.offset=0,this},o.mark=function(t){if(t=void 0===t?this.offset:t,!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.M_=t,this},o.order=function(t){if(!this.B_&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.U_=!!t,this},o.lA=function(t){return this.U_=void 0===t||!!t,this},o.pA=function(t){return this.U_=void 0!==t&&!t,this},o.dA=function(t,e,i){"number"!=typeof e&&"string"==typeof e||(i=e,e=void 0);var n=void 0===i;if(n&&(i=this.offset),!this.B_){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}t instanceof r||(t=r.wrap(t,e));var o=t.F_-t.offset;if(o<=0)return this;var s,a=o-i;if(a>0){var u=new ArrayBuffer(this.buffer.byteLength+a);(s=new Uint8Array(u)).set(new Uint8Array(this.buffer).subarray(i,this.buffer.byteLength),o),this.buffer=u,this.view=new DataView(u),this.offset+=a,this.M_>=0&&(this.M_+=a),this.F_+=a,i+=a}else s=new Uint8Array(this.buffer);return s.set(new Uint8Array(t.buffer).subarray(t.offset,t.F_),i-o),t.offset=t.F_,n&&(this.offset-=o),this},o.fA=function(t,e){return t.dA(this,e),this},o.gA=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.EA(!0))},o.vA=function(){return this.F_-this.offset},o.reset=function(){return this.M_>=0?(this.offset=this.M_,this.M_=-1):this.offset=0,this},o.resize=function(t){if(!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if((t|=0)<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e,this.view=new DataView(e)}return this},o.reverse=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(t,e)),this.view=new DataView(this.buffer),this)},o.Mb=function(t){if(!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.B_&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},o.slice=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i=this.clone();return i.offset=t,i.F_=e,i},o.yA=function(t){var e=this.offset,i=this.F_;if(e>i){var n=e;e=i,i=n}if(!this.B_){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(!t&&0===e&&i===this.buffer.byteLength)return this.buffer;if(e===i)return s;var r=new ArrayBuffer(i-e);return new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(e,i),0),r},o.tc=o.yA,o.toString=function(t,e,i){if(void 0===t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.M_+",limit="+this.F_+",capacity="+this.hA()+")";switch("number"==typeof t&&(i=e=t="utf8"),t){case"utf8":return this.TA(e,i);case"base64":return this.mA(e,i);case"hex":return this.IA(e,i);case"binary":return this.SA(e,i);case"debug":return this.EA();case"columns":return this.RA();default:throw Error("Unsupported encoding: "+t)}};var u=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],i=[],n=0,r=e.length;n<r;++n)i[e[n]]=n;return t.encode=function(t,i){for(var n,r;null!==(n=t());)i(e[n>>2&63]),r=(3&n)<<4,null!==(n=t())?(i(e[63&((r|=n>>4&15)|n>>4&15)]),r=(15&n)<<2,null!==(n=t())?(i(e[63&(r|n>>6&3)]),i(e[63&n])):(i(e[63&r]),i(61))):(i(e[63&r]),i(61),i(61))},t.decode=function(t,e){function n(t){throw Error("Illegal character code: "+t)}for(var r,o,s;null!==(r=t());)if(void 0===(o=i[r])&&n(r),null!==(r=t())&&(void 0===(s=i[r])&&n(r),e(o<<2>>>0|(48&s)>>4),null!==(r=t()))){if(void 0===(o=i[r])){if(61===r)break;n(r)}if(e((15&s)<<4>>>0|(60&o)>>2),null!==(r=t())){if(void 0===(s=i[r])){if(61===r)break;n(r)}e((3&o)<<6>>>0|s)}}},t.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)},t}();o.mA=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;return u.encode(function(){return t<e?this.view.getUint8(t++):null}.bind(this),i=n()),i()},r.j_=function(t,i,n){if(!n){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%4!=0)throw TypeError("Illegal str: Length not a multiple of 4")}var o=new r(t.length/4*3,i,n),s=0;return u.decode(e(t),function(t){o.view.setUint8(s++,t)}),o.F_=s,o},r.btoa=function(t){return r.K_(t).mA()},r.atob=function(t){return r.j_(t).SA()},o.SA=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.F_:e,!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return"";for(var i=[],n=[];t<e;)i.push(this.view.getUint8(t++)),i.length>=1024&&(n.push(String.fromCharCode.apply(String,i)),i=[]);return n.join("")+String.fromCharCode.apply(String,i)},r.K_=function(t,e,i){if(!i&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");for(var n,o=0,s=t.length,a=new r(s,e,i);o<s;){if(n=t.charCodeAt(o),!i&&n>255)throw RangeError("Illegal charCode at "+o+": 0 <= "+n+" <= 255");a.view.setUint8(o++,n)}return a.F_=s,a},o.EA=function(t){for(var e,i=-1,n=this.buffer.byteLength,r="",o="",s="";i<n;){if(-1!==i&&(r+=(e=this.view.getUint8(i))<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(o+=e>32&&e<127?String.fromCharCode(e):".")),++i,t&&i>0&&i%16==0&&i!==n){for(;r.length<51;)r+=" ";s+=r+o+"\n",r=o=""}i===this.offset&&i===this.F_?r+=i===this.M_?"!":"|":i===this.offset?r+=i===this.M_?"[":"<":i===this.F_?r+=i===this.M_?"]":">":r+=i===this.M_?"'":t||0!==i&&i!==n?" ":""}if(t&&" "!==r){for(;r.length<51;)r+=" ";s+=r+o+"\n"}return t?s:r},r.W_=function(t,e,i){for(var n,o,s=t.length,a=new r((s+1)/3|0,e,i),u=0,h=0,c=!1,l=!1,f=!1,p=!1,d=!1;u<s;){switch(n=t.charAt(u++)){case"!":if(!i){if(l||f||p){d=!0;break}l=f=p=!0}a.offset=a.M_=a.F_=h,c=!1;break;case"|":if(!i){if(l||p){d=!0;break}l=p=!0}a.offset=a.F_=h,c=!1;break;case"[":if(!i){if(l||f){d=!0;break}l=f=!0}a.offset=a.M_=h,c=!1;break;case"<":if(!i){if(l){d=!0;break}l=!0}a.offset=h,c=!1;break;case"]":if(!i){if(p||f){d=!0;break}p=f=!0}a.F_=a.M_=h,c=!1;break;case">":if(!i){if(p){d=!0;break}p=!0}a.F_=h,c=!1;break;case"'":if(!i){if(f){d=!0;break}f=!0}a.M_=h,c=!1;break;case" ":c=!1;break;default:if(!i&&c){d=!0;break}if(o=parseInt(n+t.charAt(u++),16),!i&&(isNaN(o)||o<0||o>255))throw TypeError("Illegal str: Not a debug encoded string");a.view.setUint8(h++,o),c=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+u)}if(!i){if(!l||!p)throw TypeError("Illegal str: Missing offset or limit");if(h<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+h+" < "+s)}return a},o.IA=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.F_:e,!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var i,n=new Array(e-t);t<e;)(i=this.view.getUint8(t++))<16?n.push("0",i.toString(16)):n.push(i.toString(16));return n.join("")},r.Q_=function(t,e,i){if(!i){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var n,o=t.length,s=new r(o/2|0,e),a=0,u=0;a<o;a+=2){if(n=parseInt(t.substring(a,a+2),16),!i&&(!isFinite(n)||n<0||n>255))throw TypeError("Illegal str: Contains non-hex characters");s.view.setUint8(u++,n)}return s.F_=u,s};var h=function(){var t={wA:1114111,bA:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<128?e(127&i):i<2048?(e(i>>6&31|192),e(63&i|128)):i<65536?(e(i>>12&15|224),e(i>>6&63|128),e(63&i|128)):(e(i>>18&7|240),e(i>>12&63|128),e(i>>6&63|128),e(63&i|128)),i=null},iA:function(t,e){for(var i,n,r,o,s=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(i=t());)if(0==(128&i))e(i);else if(192==(224&i))null===(n=t())&&s([i,n]),e((31&i)<<6|63&n);else if(224==(240&i))(null===(n=t())||null===(r=t()))&&s([i,n,r]),e((15&i)<<12|(63&n)<<6|63&r);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=t())||null===(r=t())||null===(o=t()))&&s([i,n,r,o]),e((7&i)<<18|(63&n)<<12|(63&r)<<6|63&o)}},CA:function(t,e){for(var i,n=null;null!==(i=null!==n?n:t());)i>=55296&&i<=57343&&null!==(n=t())&&n>=56320&&n<=57343?(e(1024*(i-55296)+n-56320+65536),n=null):e(i);null!==n&&e(n)},nA:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<=65535?e(i):(e(55296+((i-=65536)>>10)),e(i%1024+56320)),i=null},YP:function(e,i){t.CA(e,function(e){t.bA(e,i)})},WP:function(e,i){t.iA(e,function(e){t.nA(e,i)})},_A:function(t){return t<128?1:t<2048?2:t<65536?3:4},PA:function(e){for(var i,n=0;null!==(i=e());)n+=t._A(i);return n},KP:function(e){var i=0,n=0;return t.CA(e,function(e){++i,n+=t._A(e)}),[i,n]}};return t}();return o.TA=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.F_),!this.B_){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;try{h.WP(function(){return t<e?this.view.getUint8(t++):null}.bind(this),i=n())}catch(i){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return i()},r.Y_=function(t,i,n){if(!n&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var o=new r(h.KP(e(t),!0)[1],i,n),s=0;return h.YP(e(t),function(t){o.view.setUint8(s++,t)}),o.F_=s,o},r}"object"==typeof t&&t&&"object"==typeof e&&e?t.i=function(){var t;try{t=n(93)}catch(t){}return a(t)}():(r=[n(94)],void 0!==(o=function(t){return a(t)}.apply(e,r))&&(t.i=o))}()}).call(e,n(63)(t))},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(25),s=i(47),a=i(164),u=i(6),h=i(1),c=i(2),l=u.he.Rh,f=u.he.Th,p=function(){function t(t,e,i,n){this.loggerId="[P2PDispatcher] ",this.logger=r.Framework.resolve(r.Framework.V.R).log(t.sessionId),this.Sg=e,this.otherGuid=i,this.swarmId=t.swarmId,this.yg=n,this.receiver=new a.C6(e,i,t),this.sender=new a._6(e,i,t,this),this.vD=t.vD,this.TD=t.TD,this.qJ=t.qJ,(f||r.Framework.C()&&s.$N.XN)&&(this.QJ=t.QJ)}return t.prototype.Dg=function(){return this.sender.Dg()||this.receiver.Dg()},t.prototype.close=function(){var t=this,e=n.defer();return this.sender.P6().then(function(i){return t.receiver.close(i).then(function(i){return t.Rj(i).then(function(i){return t.yg.close(i).then(function(t){e.resolve(t)})})})}).catch(function(i){h.ErrorMonitor.ve().logError("Error closing connection to peer",t.loggerId,c.hs.We.qe,{detailedError:i,otherGuid:t.otherGuid}),e.reject("Close partnership failed")}),e.Ss},t.prototype.Rj=function(t){this.logger.debug("SEND CLOSE TO "+this.otherGuid);var e=new o.Rf.Fa.Jg.Close;return e.setType(t),this.Lg(o.Rf.Eg.Close,e),n(this.swarmId)},t.prototype.As=function(t){try{switch(l&&this.logger.debug("DISPATCH "+t.msgId),t.msgId){case o.Rf.Eg.Chunk:var e=o.Rf.Fa.Jg.Chunk.decode(t.Wg);this.receiver.A6(e);break;case o.Rf.Eg.Ack:var i=o.Rf.Fa.Jg.Ack.decode(t.Wg);this.sender.O6(i.transferId);break;case o.Rf.Eg.Cancel:var n=o.Rf.Fa.Jg.Cancel.decode(t.Wg);this.sender.N6(n.transferId);break;case o.Rf.Eg.lg:l&&this.logger.debug("RECEIVED OUT PART,DECODING ");var r=o.Rf.Fa.Jg.OutPartnershipRequest.decode(t.Wg);l&&this.logger.debug("RECEIVED OUT PART FROM "+r.guid),this.TD.Cj(r,this.yg);break;case o.Rf.Eg.pg:l&&this.logger.debug("RECEIVED OUT PART RESP ");var s=o.Rf.Fa.Jg.OutPartnershipResponse.decode(t.Wg);l&&this.logger.debug("RECEIVED OUT PART RESP FROM "+s.accept),this.TD.Qj(s,this.yg);break;case o.Rf.Eg.Have:var a=o.Rf.Fa.Jg.Have.decode(t.Wg);l&&this.logger.debug("RECEIVED HAVE FOR "+a.fragmentId+" FROM "+this.otherGuid),this.TD.D6(this.otherGuid,a);break;case o.Rf.Eg.Close:var u=o.Rf.Fa.Jg.Close.decode(t.Wg);l&&this.logger.debug("RECEIVED CLOSE FROM "+this.otherGuid),this.TD.Vj(this.otherGuid,u);break;case o.Rf.Eg.Request:var f=o.Rf.Fa.Jg.Request.decode(t.Wg);l&&this.logger.debug("RECEIVED REQUEST FOR "+f.fragmentId+" FROM "+this.otherGuid),this.qJ.PM(this.otherGuid,f,this);break;case o.Rf.Eg.DoNotHave:var p=o.Rf.Fa.Jg.DoNotHave.decode(t.Wg);l&&this.logger.debug("DoNotHave "+p.transferId),this.vD.k6(p);break;case o.Rf.Eg.dg:var d=o.Rf.Fa.Jg.UDPHandshakeMessage.decode(t.Wg);l&&this.logger.debug("UDP HANDSHAKE MESSAGE RECEIVED FROM "+d.uuid),this.QJ.SG(d,this.yg);break;case o.Rf.Eg.UDPHandshakeResponse:var g=o.Rf.Fa.Jg.UDPHandshakeResponse.decode(t.Wg);l&&this.logger.debug("UDP HANDSHAKE MESSAGE RESPONSE RECEIVED FROM "+this.otherGuid),this.QJ.IG(g,this.yg);break;case o.Rf.Eg.UDPSwitchLeadershipRequest:var v=o.Rf.Fa.Jg.UDPSwitchLeadershipRequest.decode(t.Wg);l&&this.logger.debug("SWITCH LEADERSHIP REQUEST RECEIVED FROM "+this.otherGuid),this.QJ.UG(v);break;case o.Rf.Eg.fg:var y=o.Rf.Fa.Jg.UDPSwitchLeadershipAck.decode(t.Wg);l&&this.logger.debug("UDP SWITCH ACKNOWLEDGMENT RESPONSE FROM "+this.otherGuid),this.QJ.VG(y,this.otherGuid);break;case o.Rf.Eg.Bitrate:var m=o.Rf.Fa.Jg.Bitrate.decode(t.Wg);l&&this.logger.debug("BITRATE INFO "+m.bitrate+" FROM "+m.guid),this.TD.Wj(m);break;case o.Rf.Eg.Haves:var E=o.Rf.Fa.Jg.Haves.decode(t.Wg);l&&this.logger.debug("RECEIVED BATCH HAVES FOR FROM "+this.otherGuid),this.TD.L6(this.otherGuid,E);break;case o.Rf.Eg.nd:var b=o.Rf.Fa.Jg.PeerInfoMessage.decode(t.Wg);l&&this.logger.debug("RECEIVED PEER INFO FROM "+this.otherGuid),this.TD.Xj(b);break;case o.Rf.Eg.Ping:var w=o.Rf.Fa.Jg.Ping.decode(t.Wg);l&&this.logger.debug("RECEIVED PING FROM "+this.otherGuid),this.TD.M6(w);break;case o.Rf.Eg.Pong:var T=o.Rf.Fa.Jg.Pong.decode(t.Wg);l&&this.logger.debug("RECEIVED PONG FROM "+this.otherGuid),this.TD.F6(T);break;case o.Rf.Eg.gg:var S=o.Rf.Fa.Jg.NoPartners.decode(t.Wg);l&&this.logger.debug("RECEIVED NON PARTNER MESSAGE FROM "+this.otherGuid),this.vD.U6(this.otherGuid,S);break;default:this.logger.warn("UNKNOWN MESSAGE TYPE "+t.msgId)}}catch(t){h.ErrorMonitor.ve().logError("Error dispatching message",this.loggerId,t,c.hs.We.Ye,t)}},t.prototype.Lg=function(t,e){this.yg.Lg(t,this.swarmId,e)},t}();e.Ig=p},function(t,e,i){"use strict";var n=i(48),r=i(35),o=i(4),s=i(25),a=i(0),u=i(7),h=i(165),c=i(5),l=i(95),f=i(1),p=i(2),d=function(){function t(t,e,i){this.loggerId="[FragmentRequester] ",this.B6=new n,this.H6=new n,this.x6=null,this.ug=s.Rf.ug,this.Sg=t,this.otherGuid=e,this.vD=i.vD,this.yD=i.yD,this.Ng=a.Framework.resolve(a.Framework.V.F),this.logger=a.Framework.resolve(a.Framework.V.R).log(i.sessionId)}return t.prototype.setReportingGuid=function(t){this.q6=t},t.prototype.Dg=function(){return!(0===this.B6.keys().length&&null===this.x6)},t.prototype.G6=function(t){var e=new s.Rf.Fa.Jg.Request;try{e.fragmentId=t.Zf(),e.transferId=t.Pk,this.ug&&this.logger.debug("INITIATING TR-"+t.Pk+" TIMEOUT: "+t.V6+" FRAGMENT: "+t.Zf()+" FROM: "+this.otherGuid),this.B6.set(t.Pk,t),this.H6.set(t.Pk,a.Framework.time())}catch(t){f.ErrorMonitor.ve().logError("Error constructing fragment request message",this.loggerId,p.hs.Zi.Qi,{detailedError:t,otherGuid:this.otherGuid}),e=null}try{e&&t.xq.wj.Lg(s.Rf.Eg.Request,e)}catch(t){f.ErrorMonitor.ve().logError("Error sending fragment request",this.loggerId,p.hs.Zi.Ki,{detailedError:t,otherGuid:this.otherGuid})}},t.prototype.A6=function(t){try{var e=t.transferId,i=t.data.yA(),n=t.chunkSize,r=t.totalSize,o=t.headers;if(this.ug&&this.logger.debug("RCV Chunk "+i.byteLength),!this.B6.has(e))return;null==this.x6?(this.ug&&this.logger.debug("INITIATED TR-"+e+",SIZE="+r),this.x6=this.B6.get(e),this.x6.Pk=e,this.j6(e,this.x6.xq),null!=o?this.x6.responseHeaders=o:this.logger.warn("HEADERS NULL IN FIRST CHUNK"),this.vD.v1(this.otherGuid,this.x6,n,r),this.x6.Qf=n,a.Framework.C()||(this.x6.jf=i)):(this.j6(e,this.x6.xq),this.x6.Qf+=n,a.Framework.C()||(this.x6.jf=u.rc.appendBuffer(this.x6.jf,i)));var s=a.Framework.C()?this.x6.Qf:this.x6.jf.byteLength;if(this.ug&&this.logger.debug("RECEIVED "+s+"/"+r+" TRID "+e),s==r){this.ug&&this.logger.debug("RCV ALL DATA "+s+" TR-"+this.x6.Yf),this.x6.qf.Af=s,a.Framework.clearTimeout(this.x6.mG),this.B6.delete(e);var h=a.Framework.time()-this.H6.get(e);this.logger.debug("RCV ALL DATA FROM "+this.otherGuid+" AFTER "+h+" mseconds"),this.H6.delete(e),this.vD.UD(e,this.x6),this.x6=null}}catch(t){f.ErrorMonitor.ve().logError("Error receiving chunk",this.loggerId,p.hs.Zi.Yi,{detailedError:t,otherGuid:this.otherGuid})}},t.prototype.j6=function(t,e){try{this.ug&&this.logger.debug("SEND ACK "+t+" TO "+this.otherGuid);var i=new s.Rf.Fa.Jg.Ack;i.transferId=t,e.wj.Lg(s.Rf.Eg.Ack,i)}catch(t){f.ErrorMonitor.ve().logError("Error sending ack",this.loggerId,p.hs.Zi.Wi,{detailedError:t,otherGuid:this.otherGuid})}},t.prototype.close=function(t){var e=this,i=o.defer();return null!=this.x6&&this.Q6(this.x6.Pk),this.B6.keys().slice().forEach(function(t){e.Q6(t)}),i.resolve(l.xV.Jq),i.Ss},t.prototype.Q6=function(t){try{if(this.B6.has(t)){var e=this.B6.get(t);e.qf.Af=e.Qf,this.logger.debug("SEND CANCEL FOR "+t+" TO "+this.otherGuid),this.H6.delete(t);var i=new s.Rf.Fa.Jg.Cancel;i.transferId=t,e.xq.wj.Lg(s.Rf.Eg.Cancel,i),null!==this.x6&&this.x6.$f()===e.$f()&&(this.x6=null),this.B6.delete(t)}else f.ErrorMonitor.ve().logError("Error cleaning up a not pending transfer",this.loggerId,p.hs.Zi.zi)}catch(t){f.ErrorMonitor.ve().logError("Error sending stop transfer",this.loggerId,p.hs.Zi.Ji,{detailedError:t,otherGuid:this.otherGuid})}},t}();e.C6=d;var g=function(){function t(t,e,i,r){this.loggerId="[FragmentSender] ",this.ug=s.Rf.ug,this.K6=null,this.Y6=new Array,this.W6=new n,this.z6=0,this.close=null,this.Sg=t,this.otherGuid=e,this.J6=i.qJ,this.wj=r,this.ID=i.ID,this.logger=a.Framework.resolve(a.Framework.V.R).log(i.sessionId),this.Ng=a.Framework.resolve(a.Framework.V.F)}return t.prototype.setReportingGuid=function(t){this.q6=t},t.prototype.X6=function(t,e,i,n,r){var o=this;this.ug&&this.logger.info("SEND FRAGMENT "+t+" TO "+this.otherGuid);try{var s=new h.Z6;s.transferId=e,s.fragmentId=t,s.e8=r,s.headers=n,s.t8=i,s.r8=Math.ceil(s.t8/c.hh.Fa.Da),s.n8=0,this.Y6.push(s),this.ug&&this.Y6.forEach(function(t){o.logger.debug(o.otherGuid+" PENDING OUT "+t)})}catch(t){f.ErrorMonitor.ve().logError("Error constructing chunk response",this.loggerId,p.hs.in.$i,{detailedError:t,otherGuid:this.otherGuid})}null===this.K6?this.s8():this.ug&&this.logger.debug(this.otherGuid+" OUT MSG NOT NULL")},t.prototype.O6=function(t){this.ug&&this.logger.debug("ONGOING "+t+" GOT ACK"),null!==this.K6&&this.K6.transferId.toString()===t.toString()?this.o8(!1):f.ErrorMonitor.ve().logError("Error receiving ack for unknown transfer",this.loggerId,p.hs.in.rn)},t.prototype.N6=function(t){null!=this.K6&&this.K6.transferId===t?(this.logger.debug("GOT CANCEL FOR ONGOING TR-"+t),this.logger.debug("TRANSPORT CANCEL STATS "+this.Sg+","+this.otherGuid+","+t),this.W6.delete(t),0!=this.K6.n8?this.J6.a8(this.otherGuid,this.q6,this.K6.n8,this.K6.t8):this.J6.h8(this.otherGuid,this.q6,this.K6.t8),this.K6=null,this.s8()):this.Y6=this.Y6.filter(function(e){return e.transferId!==t})},t.prototype.s8=function(){try{if(null===this.K6&&0!==this.Y6.length){var t=this.Y6.shift();this.K6=t,this.ug&&this.logger.debug("DATA TO SEND LENGTH "+this.K6.t8+" IN "+this.K6.r8+" CHUNKS WITH TR-"+this.K6.transferId),this.o8(!0)}}catch(t){f.ErrorMonitor.ve().logError("Error start sending chunks",this.loggerId,p.hs.in.en,t),this.kg()}},t.prototype.o8=function(t){t&&(this.W6.set(this.K6.transferId,a.Framework.time()),this.z6=this.K6.r8);try{if(null!=this.K6)if(0===this.K6.r8)this.logger.debug("FINISHED SENDING TRANSFER "+this.K6.transferId+" WITH "+this.K6.n8+" BYTES"),this.W6.delete(this.K6.transferId),this.J6.c8(this.otherGuid,this.q6,this.K6.t8),this.K6=null,this.u8(),this.s8();else{this.ug&&this.logger.debug("A CHUNK");var e=Math.min(this.K6.n8+c.hh.Fa.Da,this.K6.t8),i=e-this.K6.n8,n=new s.Rf.Fa.Jg.Chunk;if(n.transferId=this.K6.transferId,n.totalSize=this.K6.t8,n.chunkSize=i,t&&null!=this.K6.headers&&(n.headers=this.K6.headers),a.Framework.C()||null==this.K6.e8)n.data=r.wrap(new ArrayBuffer(0));else if(n.data=this.ID.l8(this.K6.fragmentId,this.z6-this.K6.r8),null==n.data){var o=this.K6.e8.slice(this.K6.n8,e);n.data=r.wrap(o)}this.K6.n8=this.K6.n8+i,this.wj.Lg(s.Rf.Eg.Chunk,n),this.ug&&this.logger.debug("SND ["+this.K6.n8+"-"+(this.K6.n8+i)+"/"+this.K6.t8+"] TO "+this.otherGuid+" OF TR-"+this.K6.transferId),this.K6.r8--}else this.logger.debug("NO MESSAGE TO SEND")}catch(t){f.ErrorMonitor.ve().logError("Error sending chunk",this.loggerId,p.hs.in.tn,{detailedError:t,otherGuid:this.otherGuid}),this.kg()}},t.prototype.Dg=function(){return!(0===this.Y6.length&&null===this.K6)},t.prototype.P6=function(){var t=o.defer();return this.Y6.length=0,this.Dg()?this.close=t:t.resolve("CLOSE"),t.Ss},t.prototype.u8=function(){this.close&&this.close.resolve("CLOSED")},t.prototype.kg=function(){this.K6=null},t}();e._6=g},function(t,e,i){"use strict";var n=function(){return function(){this.headers=null}}();e.Z6=n},function(t,e,i){"use strict";var n=i(3),r=i(0),o=i(5),s=i(15),a=i(2),u=i(1),h=function(){function t(t,e,i,o,a,u){this.loggerId="[Partner] ",this.p8=0,this.d8=0,this.f8=0,this.g8=new Array,this.E8=new Array,this.B6=new n,this.logger=o,this.wj=i,this.guid=t,this.Ek=u,this.v8=a,this.KM=e,this.gQ=r.Framework.resolve(s.qu.ku),this.vQ=r.Framework.resolve(s.qu.ku),this.y8=r.Framework.time()}return t.prototype.Dj=function(t){this.reportingGuid=t,this.wj&&(this.wj.receiver.setReportingGuid(this.reportingGuid),this.wj.sender.setReportingGuid(this.reportingGuid))},t.prototype.T8=function(t,e,i){var n=Math.max(1,e);for(i&&(this.d8+=n,this.p8+=t);this.g8.length>o.hh.Oa.wa;)this.g8.pop();var r=t/n;this.g8.unshift(r)},t.prototype.m8=function(t){this.B6.has(t)?this.logger.warn(this.guid+" DUPLICATE {} PENDING REQUESTS "+t):this.B6.set(t,r.Framework.time())},t.prototype.I8=function(t,e,i,n,o,s){try{if(this.B6.has(t)){var h=this.B6.get(t),c=r.Framework.time()-h;this.B6.delete(t),n&&this.T8(e,c,!0),this.gQ.success(e),this.KM.S8(this.reportingGuid,e,i,o,s)}else u.ErrorMonitor.ve().logError("Error completing a non-existing request",this.loggerId,a.hs.Dn._n,{otherGuid:this.guid,q6:this.reportingGuid})}catch(t){u.ErrorMonitor.ve().logError("Error handling request completed",this.loggerId,a.hs.Dn.Cn,{detailedError:t,otherGuid:this.guid,q6:this.reportingGuid})}},t.prototype.R8=function(t,e,i,n,r,s){try{if(this.B6.has(t)){var h=this.B6.get(t);this.B6.delete(t),o.hh.Oa.ba?this.T8(e,h,!0):this.T8(0,h,!0),this.gQ.w8(e,n),this.KM.b8(this.reportingGuid,e,i,n,r,s)}else u.ErrorMonitor.ve().logError("Error partially failed a non-existing request",this.loggerId,a.hs.Dn.An,{otherGuid:this.guid,q6:this.reportingGuid})}catch(t){u.ErrorMonitor.ve().logError("Error handling request partially failed ",this.loggerId,a.hs.Dn.Pn,{detailedError:t,otherGuid:this.guid})}},t.prototype._k=function(t,e,i){try{if(this.B6.has(t)){var n=this.B6.get(t);this.B6.delete(t),this.T8(0,n,!0),this.gQ.ll(),this.KM.C8(this.reportingGuid,i,e)}else u.ErrorMonitor.ve().logError("Error failed a non-existing request",this.loggerId,a.hs.Dn.Nn,{otherGuid:this.guid,q6:this.reportingGuid})}catch(t){u.ErrorMonitor.ve().logError("Error handling request failed ",this.loggerId,a.hs.Dn.On,{detailedError:t,otherGuid:this.guid})}},t.prototype._8=function(t,e){this.KM.P8(t,e,!0)},t.prototype.A8=function(t,e){this.KM.O8(t,e,!0)},t.prototype.N8=function(t,e,i){this.KM.D8(t,e,i,!0)},t.prototype.k8=function(){var t=this.g8.reduce(function(t,e){return t+e},0);return this.g8.length>0?t/this.g8.length:0},t.prototype.L8=function(t){this.f8=t},t.prototype.M8=function(){return this.f8},t.prototype.Ij=function(){return this.Ek.Ij()},t}();e.Partner=h},function(t,e,i){"use strict";var n=i(35),r=i(3),o=i(0),s=i(10),a=i(25),u=i(5),h=i(1),c=i(168),l=i(2),f=function(){function t(){this.jM="[PARTNERSHIP] ",this.aj=new r,this.gB=new r,this.dB=new r,this.fB=new r,this.F8=!1,this.U8=!1,this.B8=!0,this.active=!1,this.H8(),this.lj=[]}return t.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.V.R).log(t.sessionId),this.yD=t.yD,this.sC=t.sC,this.uploadScore=t.uploadScore,this.gD=t.gD,this.yj=t.YM},t.prototype.sj=function(t){return this._j(t.peerInfo.guid)},t.prototype._j=function(t){return this.fB.has(t)||this.dB.has(t)},t.prototype.$j=function(t){return this.dB.has(t)?this.dB.get(t):this.fB.get(t)},t.prototype.rj=function(t){return this.xj(t.peerInfo.guid)},t.prototype.xj=function(t){return this.gB.has(t)||this.aj.has(t)},t.prototype.qj=function(t){return this.gB.has(t)?this.gB.get(t):this.aj.get(t)},t.prototype.Lj=function(t){var e=this;try{var i=this.yD.x8();if(this.B8&&!i)if(this._j(t)){var n=this.$j(t),r=this.uploadScore.q8(!1),o=[];this.sC.Vq(this.context.isLive()).then(function(i){e.logger.debug(e.jM+"SEND ALL HAVES TO "+t+","+i.length);for(var s=0;s<i.length;s++){var u;u=e.context.isLive()?i[s].size():i[s].totalSize;var h=i[s].zf,c=new a.Rf.Fa.Jg.Have;c.setFragmentId(h.Zf()),c.setSize(u),c.setUploadScore(r);var l=h;c.setId(l.A_()),c.setBitrate(l.bitrate),c.setDuration(l.duration),c.setType(l.Xf()),o.push(c)}if(o.length>0){var f=new a.Rf.Fa.Jg.Haves;f.setHave(o),n.wj.Lg(a.Rf.Eg.Haves,f)}})}else h.ErrorMonitor.ve().logError("Error sending all haves to peer who is not out partner",this.jM,l.hs.Ut.Ct,{otherGuid:t})}catch(e){h.ErrorMonitor.ve().logError("Error sending all haves",this.jM,l.hs.Ut.Tt,{detailedError:e,otherGuid:t})}},t.prototype.oZ=function(t,e,i){var n=this,r=this.yD.x8();if(this.B8&&!r){var o=this.dB.values();this.fB.forEach(function(t,e){o.push(t)});var s=this.uploadScore.q8(!1);o.forEach(function(r){(!i||i&&r.guid!=i.guid)&&n.G8(r.wj,t,e,s)})}},t.prototype.G8=function(t,e,i,n){this.F8&&this.logger.debug(this.jM+"SEND HAVE TO "+t.otherGuid+" FOR "+e.Zf());try{var r=new a.Rf.Fa.Jg.Have;r.setFragmentId(e.Zf()),r.setSize(i),r.setUploadScore(n);var o=e;r.setId(o.A_()),r.setBitrate(o.bitrate),r.setDuration(o.duration),r.setType(o.Xf()),t.Lg(a.Rf.Eg.Have,r)}catch(e){h.ErrorMonitor.ve().logError("Error sending have ",this.jM,l.hs.Ut.It,{detailedError:e,otherGuid:t.otherGuid})}},t.prototype.D6=function(t,e){try{if(this.xj(t)){this.U8&&this.logger.debug(this.jM+"HAVE RECEIVED FROM "+t+": "+e.fragmentId);var i=this.qj(t);i.L8(e.getUploadScore()),this.gD.put(e,i),this.context.vF(e)}else h.ErrorMonitor.ve().logError("Error receiving have from unknown peer",this.jM,l.hs.Ut.St,{otherGuid:t})}catch(e){h.ErrorMonitor.ve().logError("Error handling received have",this.jM,l.hs.Ut.wt,{detailedError:e,otherGuid:t})}},t.prototype.L6=function(t,e){var i=this;try{if(this.xj(t)){this.U8&&this.logger.debug(this.jM+"BATCH HAVES RECEIVED FROM "+t);var n=this.qj(t);e.getHave().forEach(function(t){n.L8(t.getUploadScore()),i.gD.put(t,n)}),this.context.vF(e.getHave()[0])}else h.ErrorMonitor.ve().logError("Error receiving haves from unknown peer",this.jM,l.hs.Ut.Rt,{otherGuid:t})}catch(e){h.ErrorMonitor.ve().logError("Error handling received haves",this.jM,l.hs.Ut.bt,{detailedError:e,otherGuid:t})}},t.prototype.mj=function(t){try{var e=new a.Rf.Fa.Jg.Ping;e.id=this.yD.getId(),e.startTs=o.Framework.time(),this.logger.debug(this.jM+"REQUEST PING TO PEER GUID "+t.otherGuid),t.Lg(a.Rf.Eg.Ping,e)}catch(e){h.ErrorMonitor.ve().logError("Error requesting ping",this.jM,l.hs.Ut.Pt,{detailedError:e,otherGuid:t.otherGuid})}},t.prototype.M6=function(t){try{var e=t.id;if(!this._j(e))return void h.ErrorMonitor.ve().logError("Error receiving ping from an unknown peer",this.jM,l.hs.Ut.Ot,{otherGuid:e});var i=-1;t.startTs&&(i=t.startTs),this.V8(this.$j(e).wj,i)}catch(e){h.ErrorMonitor.ve().logError("Error handling received ping",this.jM,l.hs.Ut.At,{detailedError:e,otherGuid:t.id})}},t.prototype.H8=function(){try{for(var t="",e=0;e<u.hh.Fa.Da;e++)t+=String.fromCharCode(33+93*Math.random());var i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=t.length;for(e=0;e<o;e++)r[e]=t.charCodeAt(e);this.j8=n.wrap(r)}catch(t){h.ErrorMonitor.ve().logError("Error creating random buffer for ping pong",this.logger,l.hs.Ut._t,t)}},t.prototype.V8=function(t,e){try{var i=new a.Rf.Fa.Jg.Pong;i.id=this.yD.getId(),i.startTs=e,this.j8||this.H8(),i.data=this.j8,i.dataSize=u.hh.Fa.Da,this.logger.debug(this.jM+"SEND PONG TO PEER GUID "+t.otherGuid),t.Lg(a.Rf.Eg.Pong,i)}catch(e){h.ErrorMonitor.ve().logError("Error sending pong",this.jM,l.hs.Ut.Nt,{detailedError:e,otherGuid:t.otherGuid})}},t.prototype.F6=function(t){try{var e=t.id;if(!this.xj(e))return void h.ErrorMonitor.ve().logError("Error receiving a pong from an unknown peer",this.jM,l.hs.Ut.Dt,{otherGuid:e});var i=o.Framework.time();if(t.startTs&&t.startTs>0){var n=i-t.startTs,r=this.qj(e);t.dataSize==t.data.tc().byteLength?r.T8(t.dataSize,n,!0):h.ErrorMonitor.ve().logError("Error receing pong with wrong data size",this.jM,l.hs.Ut.kt,{otherGuid:e})}else h.ErrorMonitor.ve().logError("Error receiving pong with wrong timestamp",this.jM,l.hs.Ut.Lt,{otherGuid:e})}catch(e){h.ErrorMonitor.ve().logError("Error receiving pong",this.jM,l.hs.Ut.Mt,{detailedError:e,otherGuid:t.id})}},t.prototype.vB=function(){try{var t=new r;return this.Q8(this.gB,t),this.Q8(this.aj,t),t}catch(t){return h.ErrorMonitor.ve().logError("Error getting partner snapshots",this.jM,l.hs.Ut.Ft,t),new r}},t.prototype.Q8=function(t,e){var i=this;t.forEach(function(t,n){var r=new hive.snapshots.Partner;r.inPart=!0,r.outPart=i._j(n),r.connInfo=new hive.snapshots.ConnectivityInfo;var o=void 0;t.Ek.peerInfo.publicIpString&&(o=t.Ek.peerInfo.publicIpString);var a=void 0;t.Ek.peerInfo.privateIpString&&(a=t.Ek.peerInfo.privateIpString),r.connInfo.publicIp=o,r.connInfo.privateIp=a,r.connInfo.externalAs=t.Ek.peerInfo.externalAs,r.connInfo.internalAs=t.Ek.peerInfo.internalAs;var u=i.K8();u.rateReceived=t.k8(),r.metrics=u,r.udp=t.Ek.peerInfo.type==s.Tc.W,e.set(t.reportingGuid,r)})},t.prototype.pB=function(){return new c.Y8(this.gB.length,this.aj.length,this.fB.length,this.dB.length)},t.prototype.K8=function(){var t=new hive.snapshots.PartnerMetrics;return t.rateReceived=0,t.rateSent=0,t.handshakeDelay=0,t},t}();e.rQ=f},function(t,e,i){"use strict";var n=function(){return function(t,e,i,n){this.gB=t,this.EB=e,this.fB=i,this.dB=n}}();e.Y8=n},function(t,e,i){"use strict";var n=function(){return function(){}}();e.Kg=n},function(t,e){t.i={package:"HiveMsgs",messages:[{name:"Chunk",fields:[{rule:"required",type:"int32",name:"transferId",id:1},{rule:"required",type:"int32",name:"totalSize",id:2},{rule:"required",type:"int32",name:"chunkSize",id:3},{rule:"required",type:"bytes",name:"data",id:4},{rule:"optional",type:"string",name:"headers",id:5}]},{name:"Haves",fields:[{rule:"repeated",type:"Have",name:"have",id:1}]},{name:"Have",fields:[{rule:"required",type:"string",name:"fragmentId",id:1},{rule:"required",type:"int32",name:"size",id:2},{rule:"required",type:"int32",name:"type",id:3},{rule:"required",type:"int32",name:"id",id:4},{rule:"required",type:"int32",name:"bitrate",id:5},{rule:"required",type:"int32",name:"duration",id:6},{rule:"required",type:"float",name:"uploadScore",id:7}]},{name:"Ping",fields:[{rule:"required",type:"string",name:"id",id:1},{rule:"required",type:"uint64",name:"startTs",id:2}]},{name:"Pong",fields:[{rule:"required",type:"string",name:"id",id:1},{rule:"required",type:"bytes",name:"data",id:2},{rule:"required",type:"int32",name:"dataSize",id:3},{rule:"required",type:"uint64",name:"startTs",id:4}]},{name:"Request",fields:[{rule:"required",type:"string",name:"fragmentId",id:1},{rule:"required",type:"int32",name:"transferId",id:2}]},{name:"DoNotHave",fields:[{rule:"required",type:"int32",name:"transferId",id:1}]},{name:"NoPartners",fields:[{rule:"required",type:"int32",name:"transferId",id:1}]},{name:"Cancel",fields:[{rule:"required",type:"int32",name:"transferId",id:1}]},{name:"Ack",fields:[{rule:"optional",type:"int32",name:"transferId",id:1}]},{name:"Close",fields:[{rule:"required",type:"int32",name:"type",id:1}]},{name:"StreamCharacteristics",fields:[{rule:"required",type:"int32",name:"streamState",id:1},{rule:"required",type:"int32",name:"bitrate",id:2},{rule:"required",type:"int32",name:"delta",id:3}]},{name:"OutPartnershipRequest",fields:[{rule:"required",type:"string",name:"guid",id:1},{rule:"required",type:"string",name:"contextId",id:2},{rule:"required",type:"string",name:"p2pProtocolVersion",id:3},{rule:"optional",type:"int32",name:"internalAs",id:4},{rule:"optional",type:"int32",name:"externalAs",id:5},{rule:"optional",type:"string",name:"publicIpString",id:6},{rule:"optional",type:"string",name:"privateIpString",id:7},{rule:"required",type:"string",name:"reportingGuid",id:8},{rule:"repeated",type:"StreamCharacteristics",name:"streamCharacteristics",id:9}]},{name:"OutPartnershipResponse",fields:[{rule:"required",type:"int32",name:"accept",id:1},{rule:"optional",type:"int32",name:"internalAs",id:2},{rule:"optional",type:"int32",name:"externalAs",id:3},{rule:"optional",type:"string",name:"publicIpString",id:4},{rule:"optional",type:"string",name:"privateIpString",id:5},{rule:"optional",type:"string",name:"reportingGuid",id:6},{rule:"repeated",type:"StreamCharacteristics",name:"streamCharacteristics",id:7}]},{name:"PeerInfoMessage",fields:[{rule:"required",type:"string",name:"guid",id:1},{rule:"optional",type:"string",name:"publicIpString",id:2},{rule:"optional",type:"string",name:"privateIpString",id:3},{rule:"optional",type:"int32",name:"internalAs",id:4},{rule:"optional",type:"int32",name:"externalAs",id:5},{rule:"repeated",type:"StreamCharacteristics",name:"streamCharacteristics",id:6}]},{name:"UDPHandshakeMessage",fields:[{rule:"required",type:"string",name:"uuid",id:1},{rule:"required",type:"string",name:"streamId",id:2},{rule:"required",type:"float",name:"udpScore",id:3},{rule:"required",type:"bool",name:"isLeader",id:4}]},{name:"UDPHandshakeResponse",fields:[{rule:"required",type:"string",name:"accept",id:1}]},{name:"UDPSwitchLeadershipRequest",fields:[{rule:"required",type:"string",name:"uuid",id:1},{rule:"required",type:"float",name:"udpScore",id:2}]},{name:"UDPSwitchLeadershipAck",fields:[{rule:"required",type:"bool",name:"ok",id:1}]},{name:"Bitrate",fields:[{rule:"required",type:"string",name:"guid",id:1},{rule:"required",type:"int32",name:"bitrate",id:2}]}]}},function(t,e,i){"use strict";var n=i(5),r=function(){function t(t,e,i,n,r){this.udpScore=0,this.cG=!1,this.streamId="",this.uuid=t,this.udpScore=e,i&&(this.address=i),n&&(this.cG=n),r&&(this.streamId=r)}return t.JE=function(t,e){var i;return 0!=(i=t.udpScore>e.udpScore?1:t.udpScore<e.udpScore?-1:0)?-i:n.hh.UDPBroadcast.xa?e.uuid.localeCompare(t.uuid):t.uuid.localeCompare(e.uuid)},t}();e.hG=r},function(t,e,i){"use strict";var n=i(3),r=i(43),o=i(0),s=i(15),a=i(9),u=i(10),h=i(1),c=i(2),l=function(){function t(){this.loggerId="[P2PRequester] ",this.Ag=new r.Counter,this.W8=new n,this.z8=new n,this.J8=o.Framework.resolve(s.qu.Nu)}return t.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.V.R).log(t.sessionId),this.gD=t.gD,this.TD=t.TD,this.ED=t.ED,this.yD=t.yD,this.KM=t.YM,this.J8.X8(t.yD)},t.prototype.request=function(t){this.logger.debug("FRL ISSUE REQ FOR FRAGMENT "+t.zf.toString()+"-"+t.qf.Af+" ["+a.vc[t.Xf()]+"] TO P2P"),this.W8.set(t.$f(),t);var e=this.Ag.next();t.Pk=e,this.z8.set(e,t.$f()),this.M1(t)},t.prototype.M1=function(t){var e=t.Zf(),i=t.$f(),n=this.Z8(e);t.size=this.gD.Q1(e).size;var r=this.J8.e5(n,t.type);null!=r?(this.logger.info("SEND REQUEST "+t.Pk+" FOR "+i+" TO "+r.wj.otherGuid+" (LAN LEADER "+r.Ek.peerInfo.isLeader+" iAS "+r.Ek.peerInfo.internalAs+" eAS "+r.Ek.peerInfo.externalAs+" privateIp "+r.Ek.peerInfo.privateIpString+" ) out of "+n.length+" type "+u.Tc[r.Ek.peerInfo.type]+" size:"+t.size),t.xq=r,t.qq=r.Ek.peerInfo,t.xq.m8(t.Pk),t.qf.Cf=!0,t.qf.Mf=o.Framework.time(),this.KM.t5(t),this.Ck(t)?r.wj.receiver.G6(t):this._k(t.Pk,"TIMED-OUT")):(h.ErrorMonitor.ve().logError("Error sending p2p request because we cannot find a partner",this.loggerId,c.hs.dn.nn),this._k(t.Pk,"NO PARTNERS FOUND FOR REQUEST"))},t.prototype.Z8=function(t){var e=this,i=[];try{this.gD.fk(t).forEach(function(t){e.TD.xj(t.guid)?i.push(t):e.logger.warn("I HAVE A HAVE FROM A NON IN-PARTNER "+t.guid)})}catch(t){h.ErrorMonitor.ve().logError("Error filtering in partners",this.loggerId,c.hs.dn.sn,t)}finally{return i}},t.prototype.Ck=function(t){var e=this,i=!1;try{var n=0;null==t.size?(n=this.gD.Q1(t.Zf()).size,this.logger.warn("request size not set - this should not happen")):n=t.size;var r=t.Wf.dM().ax(t,n);return t.V6=r,r>0&&(i=!0,null==t.mG&&(t.mG=o.Framework.setTimeout(function(){e.KM.r5(t),e._k(t.Pk,"TIMED-OUT")},r))),i}catch(t){return h.ErrorMonitor.ve().logError("Error setting request timeout",this.loggerId,c.hs.dn.an,t),!1}},t.prototype._k=function(t,e){this.logger.info(e+" "+t);var i=this.i5(t,!0);this.logger.info("REQUEST "+t+" FOR "+i.$f()+" FAILED BECAUSE "+e),i&&this.ED.GX(i)},t.prototype.i5=function(t,e){try{if(this.z8.has(t)){var i=this.z8.get(t);this.z8.delete(t);var n=this.W8.get(i);if(this.W8.delete(i),o.Framework.clearTimeout(n.mG),e&&this.TD.xj(n.xq.wj.otherGuid)){n.xq.wj.receiver.Q6(t);var r=n.Xf()==a.vc.fc;0!=n.Qf?n.xq.R8(n.Pk,n.Qf,n.qf.p2pAgenTrafficSuccessQt,n.size,r,n.type):n.xq._k(n.Pk,r,n.size)}return n}return h.ErrorMonitor.ve().logError("Error cancelling request on non existing session",this.loggerId,c.hs.dn.cn),null}catch(t){return h.ErrorMonitor.ve().logError("Error removing request",this.loggerId,c.hs.dn.hn,t),null}},t.prototype.qX=function(t){if(this.W8.has(t)){var e=this.W8.get(t).Pk;this.i5(e,!0)}},t.prototype.v1=function(t,e,i,n){this.logger.debug("FRL DOWNLOADING "+e.$f()+" FROM "+t+" P2P")},t.prototype.UD=function(t,e){if(this.logger.debug("FRL PROMISED FRAGMENT "+e.$f()+" RETURNED FROM P2P SIZE "+e.qf.Af),e=this.i5(t,!1)){e.qf.Uf=o.Framework.time();var i=e.Xf()==a.vc.fc;e.xq.I8(e.Pk,e.size,e.qf.p2pAgenTrafficSuccessQt,!0,i,e.type),this.ED.jX(e)}else this.logger.warn("TRIED TO REMOVE A NON EXISTING REQUEST "+t+" (THIS SHOULD NOT HAPPEN. AT LEAST NOT TOO OFTEN)")},t.prototype.k6=function(t){var e=t.getTransferId();if(this.z8.has(e)){h.ErrorMonitor.ve().logError("Error receiving a do not have for my request",this.loggerId,c.hs.dn.un),this.logger.debug("DO NOT HAVE RECEIVED FOR "+e);var i=this.i5(e,!1);if(i){var n=i.Xf()==a.vc.fc;i.xq._k(i.Pk,n,i.size),this.ED.GX(i)}}else this.logger.warn("UNKNOWN DO NOT HAVE "+e)},t.prototype.U6=function(t,e){var i=e.transferId;if(this.z8.has(i)){h.ErrorMonitor.ve().logError("Error rejected request by a non partner",this.loggerId,c.hs.dn.pn),this.TD.Sj(t);var n=this.i5(i,!1);n&&this.ED.GX(n)}},t.prototype.Ys=function(t){return this.W8.has(t)},t}();e.LJ=l},function(t,e,i){"use strict";var n=i(0),r=i(25),o=i(1),s=i(2),a=function(){function t(){this.loggerId="[P2PResponder] "}return t.prototype.init=function(t){this.logger=n.Framework.resolve(n.Framework.V.R).log(t.sessionId),this.sG=t,this.gD=t.gD,this.sC=t.sC,this.TD=t.TD,this.uploadScore=t.uploadScore,this.yD=t.yD,this.KM=t.YM},t.prototype.PM=function(t,e,i){try{if(this.TD._j(t)){var n=this.TD.$j(t);this.n5(t,e,n)}else this.s5(t,e,i)}catch(t){o.ErrorMonitor.ve().logError("Error on responding to p2p request",this.loggerId,s.hs.mn.fn,t)}},t.prototype.c8=function(t,e,i){try{if(this.uploadScore.success(i),this.TD._j(t)){var n=this.TD.$j(t);n.vQ.success(i),n._8(i,e)}}catch(t){o.ErrorMonitor.ve().logError("Error on request satisfied",this.loggerId,s.hs.mn.gn,t)}},t.prototype.a8=function(t,e,i,n){try{if(this.uploadScore.w8(i,n),this.TD._j(t)){var r=this.TD.$j(t);r.vQ.w8(i,n),r.N8(i,n,e)}}catch(t){o.ErrorMonitor.ve().logError("Error on request partially satisfied",this.loggerId,s.hs.mn.En,t)}},t.prototype.h8=function(t,e,i){try{if(this.uploadScore.ll(),this.TD._j(t)){var n=this.TD.$j(t);n.vQ.ll(),n.A8(i,e)}}catch(t){o.ErrorMonitor.ve().logError("Error on request not satisfied",this.loggerId,s.hs.mn.vn,t)}},t.prototype.n5=function(t,e,i){var n=this;this.sC.get(e.fragmentId).then(function(r){r?(n.logger.debug("SENDING TO "+t+","+e.fragmentId+","+e.transferId+","+r.length+" DL "+r.length),i.wj.sender.X6(e.fragmentId,e.transferId,r.length,r.headers,r.data)):(n.logger.debug("RECEIVED REQUEST FOR "+e.fragmentId+" FROM "+t+" CAN'T BE SERVED"),n.o5(e.transferId,i))})},t.prototype.o5=function(t,e){try{this.logger.info("SEND DO NOT HAVE "+t+" TO "+e.wj.Sg);var i=new r.Rf.Fa.Jg.DoNotHave;i.setTransferId(t),e.wj.Lg(r.Rf.Eg.DoNotHave,i)}catch(t){o.ErrorMonitor.ve().logError("Error on sending do not have",this.loggerId,s.hs.mn.yn,t)}},t.prototype.s5=function(t,e,i){try{this.logger.warn("GOT REQUEST FROM NON-PARTNER "+t+" FOR "+e.fragmentId);var n=new r.Rf.Fa.Jg.NoPartners;n.setTransferId(e.transferId),i.Lg(r.Rf.Eg.gg,n)}catch(t){o.ErrorMonitor.ve().logError("Error on send no partners",this.loggerId,s.hs.mn.Tn,t)}},t}();e.MJ=a},function(t,e,i){"use strict";var n,r=i(48),o=i(0),s=i(5);!function(t){t[t.S=0]="S",t[t.a5=1]="F",t[t.h5=2]="PF"}(n||(n={}));var a=function(){return function(t){this.ts=t}}(),u=function(){return function(){this.c5=0,this.u5=0,this.l5=0,this.p5=0,this.d5=0,this.f5=0}}(),h=function(){function t(){this.g5=new r}return t.prototype.success=function(t){this.event(n.S,t,t)},t.prototype.ll=function(){this.event(n.a5,0,0)},t.prototype.w8=function(t,e){this.event(n.h5,t,e)},t.prototype.event=function(t,e,i){var n=new a(o.Framework.time());n.t=t,n.E5=e,n.v5=e/i,n.y5=(i-e)/i,this.g5.set(n.ts,n),this.T5()},t.prototype.T5=function(){var t=this,e=o.Framework.time()-2*s.hh.Oa.Ca;if(e>0){var i=[];this.g5.forEach(function(t,n){n<e&&i.push(n)}),i.forEach(function(e){t.g5.delete(e)})}},t.prototype.fQ=function(t){var e=0,i=this.m5(t,s.hh.Oa.Ca);if(null!=i){var n=i.u5+i.l5+i.p5;e=0==n?0:(i.u5+i.p5*s.hh.Oa._a)/n}return e},t.prototype.q8=function(t){var e=0,i=this.m5(t,s.hh.Oa.Ca);if(null!=i){var n=i.u5+i.l5+i.p5;e=0==n?0:(i.l5+i.p5*s.hh.Oa.Pa)/n}return e},t.prototype.I5=function(t){var e=this.m5(!1,t);return null!=e?e.c5:0},t.prototype.m5=function(t,e){if(0!=this.g5.keys().length){var i=new u,s=o.Framework.time()-e;s<0&&(s=0);var a=new r;return this.g5.forEach(function(t,e){e>=s&&a.set(e,t)}),a.forEach(function(t,e){switch(i.c5+=t.E5,t.t){case n.S:i.u5++;break;case n.a5:i.l5++;break;default:i.p5++,i.d5+=t.v5,i.f5+=t.y5}}),i}return null},t}();h.Pa=.2,h._a=.2,e.FJ=h},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(3),o=i(4),s=i(0),a=i(176),u=i(178),h=i(96),c=i(2),l=i(1);e.S5||(e.S5={});var f=function(t){function e(){var e=t.call(this)||this;return e.loggerId="[HiveNetworkManager] ",e.R5=!1,e.w5=new r,e.Ag=1,e.Jl=s.Framework.resolve(s.Framework.V.M),e.b5=s.Framework.resolve(s.Framework.V.q),e.channelManager=new a.C5(e.logger,e.b5,e),e.b5.init(e,e.logger,e.channelManager),e._5(),e}return n(e,t),e.prototype.start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=s.Framework.resolve(s.Framework.V.R).log(t),r=null;return 0==this.vl.keys().length?(n.debug("TRIGGERING CONNECT "),r=this.P5(),this.A5(t,e)):(n.debug("ALREADY CONNECTED "),r=this.Jl.Zl(),this.A5(t,e),this.b5.sY()&&this.O5(this.gd,t)),r},e.prototype.P5=function(){var t=this,e=s.Framework.L.k;return"localhost"===e&&(e="127.0.0.1:"+location.port),this.logger.debug("CONNECTING.."),this.Jl.Zl().then(function(i){var n=i.tp();return t.logger.debug("MY IDENTITY ",n),t.gd=n,t.b5.start(e,n),i})},e.prototype.N5=function(){return o.resolve(new r)},e.prototype.connect=function(t){var e=this,i=o.defer();return this.w5.has(t)?(this.logger.debug("Already connected to "+t+", ignoring"),i.resolve(this.w5.get(t))):this.channelManager.D5(this.gd,t).then(function(i){return e.connected(t,i)}).then(function(t){return i.resolve(t)}).fail(function(n){l.ErrorMonitor.ve().logError("Error establishing connection",e.loggerId,c.hs.Pe.be,{otherGuid:t}),i.reject("CONN TO "+t+" CANNOT BE ESTABLISHED ")}),i.Ss},e.prototype.send=function(t,e,i){return!!this.channelManager.send(t,e)||(l.ErrorMonitor.ve().logError("Error sending message without channel established",this.loggerId,c.hs.Pe.Ce,{otherGuid:t}),this.k5(t),!1)},e.prototype.L5=function(t,e,i){this.R5&&this.logger.debug("REC BUF "+i.byteLength+" "+i),this.w5.has(t)?(this.R5&&this.logger.debug("PROC MSG FROM "+t),this.w5.get(t).Gg(i)):l.ErrorMonitor.ve().logError("Error receiving msg without having a connection established",this.loggerId,c.hs.Pe.Ce,{otherGuid:t})},e.prototype.connected=function(t,e){if(this.w5.has(t))this.logger.debug("RECONNECTED TO "+t+", RESETTING STATE"),this.w5.get(t).reset();else{this.logger.info("CONNECTED TO "+t);var i=e.pG;i.init(this.gd,t),this.w5.set(t,i)}return o.resolve(this.w5.get(t))},e.prototype.M5=function(t,e){this.logger.debug("FAILED CONN TO "+e),t.reject("CONN TO "+e+" CANNOT BE ESTABLISHED ")},e.prototype.F5=function(t,e){this.logger.info(t+" connected to me"),this.connected(t,e)},e.prototype.k5=function(t){this.w5.has(t)?(this.logger.info("Connection closed to "+t),this.w5.delete(t),this.U5(t)):this.logger.warn("TRYING TO REMOVE A PEER THAT IS NOT THERE: "+t)},e.prototype._5=function(){var t=this;h.hQ.nQ&&s.Framework.setInterval(function(){var e=s.Framework.time();t.w5.forEach(function(i,n){var r=e-i.zg();r>h.hQ.oQ&&(t.logger.debug("closing stale connection to "+n+" [unused for: "+r+"ms]"),t.disconnect(n))})},h.hQ.sQ)},e.prototype.stop=function(t){s.Framework.resolve(s.Framework.V.R).log(t).debug("STOPPING CONNECTIONS AND REMOVING LISTENERS"),this.B5(t)},e.prototype.H5=function(){},e.prototype.disconnect=function(t){this.w5.has(t)&&this.channelManager.disconnect(t)},e}(u.x5);f.$a="availableSendRate",f.eh="remoteAddress",f.th="localAddress",e.CJ=f},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(177),s=i(96),a=i(2),u=i(1),h=function(){function t(t,e,i){this.logger=t,this.b5=e,this.q5=i,this.loggerId="[ChannelManager] ",this.G5={iceServers:[{url:"stun:stun.hivestreaming.com:3478"}]},this.Ag=1,this.V5=null,this.j5={},this.Q5={}}return t.prototype.D5=function(t,e){var i=null;if(e in this.Q5){var r=n.defer();r.reject("OTHER ALREADY TRYING TO CONNECT"),i=r.Ss}else{this.q5.R5&&this.logger.info("Initiating connection to "+e);var o=this.K5(t,e);i=this.Y5(o,e).connect(e)}return i},t.prototype.W5=function(t){t.z5 in this.Q5&&(delete this.j5[t.label],delete this.Q5[t.z5]),t.open&&(this.q5.k5(t.z5),t.open=!1)},t.prototype.send=function(t,e){this.q5.R5&&this.logger.debug("DATA "+e.byteLength+" "+e);var i=this.Q5[t];return i&&i.channel?(i.channel.send(e),!0):(u.ErrorMonitor.ve().logError("Error sending message wihtout channel established",this.loggerId,a.hs.Ke.Ve,{otherGuid:t}),!1)},t.prototype.q0=function(t,e){var i=e.channel;if(i&&i.label&&this.j5[i.label]){var n=this.j5[i.label];(r=n[t]).call(n,e)}else{var r,o="handle_"+t;(r=this[o])?r.call(this,e):u.ErrorMonitor.ve().logError("Error received a message for a non existing function",this.loggerId,a.hs.Ke.je,{J5:o})}},t.prototype.handle_offer=function(t){if(this.q5.R5&&this.logger.info("received an offer from "+t.peer.guid+" on channel "+t.channel.label),this.Q5[t.peer.guid]&&t.peer<this.q5.gd)this.b5.X5(this.q5.gd,t.peer.guid,t.channel.label);else{var e=this.Y5(t.channel.label,t.peer.guid),i=this.Z5(e);e.offer(t,i)}},t.prototype.Z5=function(t){var e=this;return r.Framework.setTimeout(function(){u.ErrorMonitor.ve().logError("Error incoming connection timedout",e.loggerId,a.hs.Ke.Qe,{otherGuid:t.z5}),t.close()},s.hQ.aQ)},t.prototype.Y5=function(t,e){var i=new o.e9(this,this.q5,t,this.V5,this.G5,e);return this.j5[t]=i,this.Q5[e]=i,i},t.prototype.handle_offer_rejected=function(t){this.q5.R5&&this.logger.debug("remote peer rejected ",t);var e=this.Q5[t.t9];e&&e.close(),delete this.Q5[t.t9],delete this.j5[t.channel]},t.prototype.K5=function(t,e){return t.substring(0,Math.max(8,t.length))+":"+e.substring(0,Math.max(8,e.length))+":"+this.Ag++},t.prototype.disconnect=function(t){var e=this.Q5[t];e&&e.close()},t}();e.C5=h},function(t,e,i){"use strict";var n=i(5),r=i(2),o=(i(55),i(4)),s=i(0),a=i(1),u=function(){function t(t,e,i,n,o,u){var h=this;this.channelManager=t,this.q5=e,this.label=i,this.V5=n,this.G5=o,this.z5=u,this.R5=!1,this.loggerId="[Channel] ",this.r9=-1,this.SH=null,this.channel=null,this.i9=null,this.n9=5,this.timeout=5e3,this.open=!1,this.s9=!1,this.o9=new Array,this.a9=function(){return!!this.channel&&"connecting"===this.channel.readyState},this.logger=s.Framework.resolve(s.Framework.V.R).log(),this.pG=s.Framework.resolve(s.Framework.V.U),this.pG.init(this.q5.gd,u),this.SH=new RTCPeerConnection(this.G5,this.V5),this.SH.onicecandidate=function(t){t&&t.candidate&&(h.o9.push(t.candidate),h.h9())},this.SH.onnegotiationneeded=function(){h.createOffer().then(function(t){return h.c9(t)}).then(function(t){h.R5&&h.logger.debug(h.loggerId+"Sending offer to "+h.z5+" [candidates: "+h.o9.length+"]");var e=h.o9;h.o9=new Array;var i=h.channelManager.b5.offer(h.q5.gd,h.z5,h,e,t);return h.s9=!0,i}).catch(function(t){a.ErrorMonitor.ve().logError("Error negotiating with peer",h.loggerId,r.hs.Ge.ke,{detailedError:t,otherGuid:h.z5}),h.close()})},this.SH.oniceconnectionstatechange=function(t){"disconnected"===h.SH.iceConnectionState&&h.close(),"failed"===h.SH.iceConnectionState&&(a.ErrorMonitor.ve().logError("Error establishing ICE connection",h.loggerId,r.hs.Ge.ke,{otherGuid:h.z5}),h.close())},this.SH.onsignalingstatechange=function(t){"closed"===t.signalingState&&h.close()}}return t.prototype.u9=function(){var t=this;if(this.channel&&"open"!=this.channel.readyState){if(this.R5&&this.logger.debug(this.loggerId+"Check connection "+this.z5),this.n9<=0)return this.logger.debug(this.loggerId+"Closing channel since it couldnt be established to "+this.z5),void this.close();this.n9-=1,this.i9=s.Framework.setTimeout(function(){return t.u9()},this.timeout)}},t.prototype.close=function(){try{this.R5&&this.logger.debug(this.loggerId+"Closing connection to "+this.z5),this.l9(!0),this.channelManager.W5(this),this.SH&&"closed"!==this.SH.signalingState&&(this.SH.close(),this.channel&&this.channel.close())}catch(t){a.ErrorMonitor.ve().logError("Error closing the connection",this.loggerId,r.hs.Ge.qe,{detailedError:t,otherGuid:this.z5})}},t.prototype.connect=function(t){var e=this;this.R5&&this.logger.debug(this.loggerId+"Connecting to "+t),this.z5=t,this.channel=this.SH.createDataChannel(this.label);var i=this.p9(!0,-1);return this.i9=s.Framework.setTimeout(function(){return e.u9()},this.timeout),i},t.prototype.d9=function(t){var e=this,i=o.defer();return this.SH.setRemoteDescription(t,function(){return i.resolve("OK")},function(t){a.ErrorMonitor.ve().logError("Error setting remote description",e.loggerId,r.hs.Ge.Ne,{detailedError:t,otherGuid:e.z5}),i.reject(t)}),i.Ss},t.prototype.c9=function(t){var e=this,i=o.defer();return"closed"!==this.SH.signalingState?this.SH.setLocalDescription(t,function(){return i.resolve(e.SH.localDescription)},function(t){a.ErrorMonitor.ve().logError("Error setting local description",e.loggerId,r.hs.Ge.De,{detailedError:t,otherGuid:e.z5}),i.reject(t)}):(a.ErrorMonitor.ve().logError("Signaling state is closed",this.loggerId,r.hs.Ge.Ne),i.reject("Signaling state is closed")),i.Ss},t.prototype.createOffer=function(){var t=this,e=o.defer();return this.SH.createOffer(e.resolve,function(e){a.ErrorMonitor.ve().logError("Error creating offer",t.loggerId,r.hs.Ge.Ae,{detailedError:e,otherGuid:t.z5}),t.close()}),e.Ss},t.prototype.createAnswer=function(){var t=this,e=o.defer();return this.SH.createAnswer(e.resolve,function(i){a.ErrorMonitor.ve().logError("Error creating answer",t.loggerId,r.hs.Ge.Oe,{detailedError:i,otherGuid:t.z5}),e.reject(i)}),e.Ss},t.prototype.offer=function(t,e){var i=this;this.R5&&(this.logger.debug(this.loggerId+"Received an offer from "+this.z5),this.logger.debug(this.loggerId+"Offer:",t)),this.SH.ondatachannel=function(t){i.channel=t.channel,i.p9(!1,e)};var n=new RTCSessionDescription(t.channel.offer);this.z5=t.peer.guid,this.d9(n).then(function(e){if("closed"!==i.SH.signalingState)return i.update_ice_candidates(t),i.createAnswer()}).then(function(t){return i.c9(t)}).then(function(t){i.logger.debug(i.loggerId+"Sending back an answer [candidates: "+i.o9.length+"]");var e=i.o9;i.o9=new Array,i.channelManager.b5.answer(i,t,e,i.z5),i.s9=!0}).catch(function(t){a.ErrorMonitor.ve().logError("Error responding to offer",i.loggerId,r.hs.Ge.He,{detailedError:t,otherGuid:i.z5}),i.close()})},t.prototype.answer=function(t){var e=this;this.R5&&this.logger.debug(this.loggerId+"Answer: ",t);var i=new RTCSessionDescription(t.answer);this.d9(i).then(function(){"closed"!==e.SH.signalingState&&e.update_ice_candidates(t)}).catch(function(t){a.ErrorMonitor.ve().logError("Error setting remote descriptor for the answer received",e.logger,r.hs.Ge.Be,{detailedError:t,otherGuid:e.z5}),e.close()})},t.prototype.update_ice_candidates=function(t){var e=this;t.channel.ice_candidates.forEach(function(t){e.R5&&e.logger.debug(e.loggerId+"got ICE cand: ",t);var i=new RTCIceCandidate(t);e.SH.addIceCandidate(i,function(){},function(t){return a.ErrorMonitor.ve().logError("Error updating ice candidates",e.loggerId,r.hs.Ge.Ue,{detailedError:t,otherGuid:e.z5})})})},t.prototype.p9=function(t,e){var i=this,n=o.defer();return this.channel.onopen=function(r){return i.f9(n,t,e)},this.channel.onclose=function(t){i.close(),n.reject(i)},this.channel.onmessage=function(t){return i.pG.Gg(t.data)},this.channel.onerror=function(t){a.ErrorMonitor.ve().logError("Error setting up channel",i.loggerId,r.hs.Ge.Le,{detailedError:t,otherGuid:i.z5}),i.close()},n.Ss},t.prototype.f9=function(t,e,i){this.open=!0,t.resolve(this),e||(this.q5.F5(this.z5,this),i&&s.Framework.clearTimeout(i))},t.prototype.h9=function(){var t=this;this.s9&&-1==this.r9&&(this.r9=s.Framework.setTimeout(function(){t.g9(),t.l9(!1)},n.hh.ah.oh))},t.prototype.g9=function(){var t=this,e=this.o9;if(this.o9=new Array,e&&e.length>0){var i=e.length;this.channelManager.b5.E9(this.q5.gd,this,e,this.z5).then(function(e){t.R5&&t.logger.debug(t.loggerId+"sent "+i+" more candidates")}).catch(function(e){a.ErrorMonitor.ve().logError("Error sending candidates",t.loggerId,r.hs.Ge.Le,{detailedError:e,otherGuid:t.z5})})}},t.prototype.l9=function(t){t&&-1!=this.r9&&s.Framework.clearTimeout(this.r9),this.r9=-1},t}();e.e9=u},function(t,e,i){"use strict";var n=i(3),r=i(0),o=i(2),s=i(1),a=function(){function t(){this.jM="[Base Network Manager] ",this.vl=new n,this.logger=r.Framework.resolve(r.Framework.V.R).log()}return t.prototype.A5=function(t,e){this.logger.info("SET LISTENERS FOR "+t+","+e.length),this.vl.set(t,e)},t.prototype.B5=function(t){this.vl.delete(t)},t.prototype.v9=function(){this.vl.length>0&&this.vl.forEach(function(t,e){t.forEach(function(t){t.ej&&t.ej()})})},t.prototype.O5=function(t,e){var i=this;this.vl.length>0&&(e?this.vl.get(e).forEach(function(e){try{e.Ud&&e.Ud(t)}catch(t){s.ErrorMonitor.ve().logError("Error firing server connect when we have swarm",i.jM,o.hs.Pe.Re,t)}}):this.vl.forEach(function(e,n){e.forEach(function(e){try{e.Ud&&e.Ud(t)}catch(t){s.ErrorMonitor.ve().logError("Error firing server connect when we do not have swarm",i.jM,o.hs.Pe.we,t)}})}))},t.prototype.U5=function(t){this.vl.length>0&&this.vl.forEach(function(e,i){e.forEach(function(e){e.KG&&e.KG(t)})})},t}();e.x5=a},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(23),s=function(){function t(){this.Ag=1,this.client=r.Framework.resolve(r.Framework.V.G)}return t.prototype.init=function(t,e,i){this.q5=t,this.logger=e,this.channelManager=i},t.prototype.sY=function(){return this.client.zd().sY()},t.prototype.start=function(t,e){var i=this;this.logger.debug("MY ID "+e),this.gd=e,this.client&&this.client.zd()?this.client.zd().on(Services.fY,1,function(t){i.y9(t.msg)}):this.logger.error("error getting active services connection"),this.q5.O5(this.gd)},t.prototype.y9=function(t){var e=JSON.parse(t);this.q5.R5&&this.logger.debug("RCV MSG FROM SRV ",e),this.channelManager.q0(e.msgName,e.msg)},t.prototype.T9=function(t,e,i){var r=this.wrap(e,t,i);if(this.client&&this.client.zd()){var s=JSON.stringify(r);this.q5.R5&&this.logger.debug(" FORWARDING REQUEST : "+s);var a=new o.Jd(Services.fY,0,s);return this.client.zd().send(a)}return n.reject()},t.prototype.wrap=function(t,e,i){return{msgId:this.Ag++,destination:i,msg:t,msgName:e}},t.prototype.E9=function(t,e,i,n){var r={channel:{label:e.label,ice_candidates:i}};return this.T9("update_ice_candidates",r,n)},t.prototype.offer=function(t,e,i,n,o){var s={peer:{guid:t,first_seen:r.Framework.time()},channel:{label:i.label,ice_candidates:n,offer:o}};return this.T9("offer",s,i.z5)},t.prototype.X5=function(t,e,i){this.q5.R5&&this.logger.debug("Discovery service rejects offer from peer "+e+" on channel "+i);var n={t9:t,channel:i};return this.T9("answer",n,e)},t.prototype.answer=function(t,e,i,n){var r={answer:e,m9:this.q5.gd,channel:{label:t.label,ice_candidates:i}};return this.T9("answer",r,n)},t}();e._J=s},function(t,e,i){"use strict";var n=i(3),r=i(5),o=i(0),s=function(){function t(){this.rF=new n,this.I9=[],this.B6=new n,this.S9=new n}return t.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.V.R).log(t.sessionId),this.ED=t.ED,this.R9()},t.prototype.R9=function(){var t=this;o.Framework.setInterval(function(){t.w9()},r.hh.ya.Ea)},t.prototype.w9=function(){var t=this;this.B6.values().filter(function(t){return o.Framework.time()-t.qf.Lf>r.hh.ya.va}).forEach(function(e){t.ED.abort(e.Kf),t.lF(e.Zf(),e.$f())})},t.prototype.uF=function(t){this.b9(t.Zf(),t.$f()),this.B6.set(t.$f(),t)},t.prototype.lF=function(t,e){this.B6.delete(e),this.C9(t,e)},t.prototype.fF=function(t){this._9(t)},t.prototype.pF=function(t){this.rF.delete(t)},t.prototype._9=function(t){if(this.rF.set(t.Zf(),t.Jf()),this.I9.push(t.Zf()),this.rF.length>r.hh.ya.ga){var e=this.I9[0];this.rF.delete(e),this.I9.splice(0,1)}},t.prototype.tF=function(t){return this.rF.has(t)},t.prototype.iF=function(t){return this.rF.get(t)},t.prototype.b9=function(t,e){if(this.S9.has(t))this.S9.get(t).push(e);else{var i=[];i.push(e),this.S9.set(t,i)}},t.prototype.C9=function(t,e){if(this.S9.has(t)){var i=this.S9.get(t),n=i.indexOf(e);-1==n?this.logger.warn("I CANNOT FIND THE REQUEST ID "+e):i.splice(n,1),0==i.length&&this.S9.delete(t)}else this.logger.warn("TRIED TO REMOVE AN OBJECT THAT DOES NOT EXIST")},t.prototype.oF=function(t){var e=[];if(this.P9(t))for(var i=this.S9.get(t),n=0;n<i.length;n++)this.B6.has(i[n])&&e.push(this.B6.get(i[n]));return e},t.prototype.P9=function(t){return this.S9.has(t)},t.prototype.EF=function(){return 0!=this.B6.length},t.prototype.sF=function(t){return this.S9.has(t)},t}();e.ya=s},function(t,e,i){"use strict";var n=i(3),r=i(5),o=i(28).cg,s=function(){function t(){this.udpScore=0,this.A9=0,this.watchingBitrate=-1,this.O9=!1,this.N9=!1,this.D9=!1,this.k9=!1,this.L9=new n}return t.prototype.setId=function(t){this.M9=t},t.prototype.getId=function(){return this.M9},t.prototype.ZJ=function(t){this.udpScore=t},t.prototype.QG=function(){return this.udpScore},t.prototype.$J=function(t){this.A9=t},t.prototype.L1=function(){return this.A9},t.prototype.setContextId=function(t){var e=o.oT(t+"_"+r.hh.Ho.Do).toString(o.Uy.By);this.contextId=e},t.prototype.getContextId=function(){return this.contextId},t.prototype.kG=function(t){this.O9=t},t.prototype.ck=function(){return this.O9},t.prototype.YG=function(t){this.D9=t},t.prototype.yk=function(){return this.D9},t.prototype.Hj=function(t){this.k9=t},t.prototype.mk=function(){return this.k9},t.prototype.U1=function(t){this.F9=t},t.prototype.gk=function(){return this.F9},t.prototype.B1=function(t){this.U9=t},t.prototype.Fj=function(){return this.U9},t.prototype.DG=function(t){this.B9=t},t.prototype.Rk=function(){return this.B9},t.prototype.H9=function(t){this.N9=t},t.prototype.Tk=function(){return this.N9},t.prototype.FX=function(t){this.watchingBitrate=t},t.prototype.MX=function(){return this.watchingBitrate},t.prototype.FG=function(t){this.nG=t},t.prototype.Ik=function(){return this.nG},t.prototype.DH=function(t){this.privateIp=t},t.prototype.getPrivateIp=function(){return this.privateIp},t.prototype._H=function(t){this.publicIp=t},t.prototype.getPublicIp=function(){return this.publicIp},t.prototype.setReportingGuid=function(t){this.reportingGuid=t},t.prototype.getReportingGuid=function(){return this.reportingGuid},t.prototype.setDelta=function(t){this.delta=t},t.prototype.getDelta=function(){return this.delta},t.prototype.FD=function(t,e){this.L9.set(t,e)},t.prototype.kD=function(t){this.L9.delete(t)},t.prototype.Uj=function(){return this.L9},t.prototype.hB=function(){return this.Tk()?this.L9.keys():[]},t.prototype.cB=function(){return this.Tk()?[]:this.L9.keys()},t.prototype.XJ=function(t){this.ticket=t},t.prototype.Sk=function(){return this.ticket},t.prototype.WJ=function(t){this.mX=t},t.prototype.x8=function(){return this.mX},t}();e.HJ=s},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(10),o=i(183),s=i(2),a=i(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.e5=function(e,i){var n=[],o=[],u=[];try{var h=this.yD.gk();return e.forEach(function(t){t.Ek.peerInfo.type==r.Tc.W&&n.push(t);var e=t.Ek.peerInfo.internalAs;0!=h&&e&&h==e&&o.push(t),t.Ek.peerInfo.type==r.Tc.yc&&u.push(t)}),n.length>0?t.prototype.e5.call(this,n,i):o.length>0?t.prototype.e5.call(this,o,i):t.prototype.e5.call(this,u,i)}catch(t){return a.ErrorMonitor.ve().logError("Error choosing partner for p2p",this.loggerId,s.hs.ji.Vi,t),null}},e}(o.x9);e.UJ=u},function(t,e,i){"use strict";var n=i(0),r=i(5),o=i(1),s=i(2),a=function(){function t(){this.loggerId="[PickerTRSingle] ",this.logger=n.Framework.resolve(n.Framework.V.R).log()}return t.prototype.X8=function(t){this.yD=t},t.prototype.e5=function(t,e){var i=this.q9(t);return i?i[0]:null},t.prototype.G9=function(t,e){return r.hh.Fa.La*(t.k8()/e)+r.hh.Fa.Ma*(1-t.M8())},t.prototype.q9=function(t){var e=this;try{var i=.1;i+=t.map(function(t){return t.k8()}).reduce(function(t,e){return t+e});var n=t.sort(function(t,n){return e.G9(n,i)-e.G9(t,i)}),r=[];return n.forEach(function(t){r.push(t.guid+":"+e.G9(t,i))}),this.logger.debug("SC ["+r.join(", ")+"]"),n}catch(t){return o.ErrorMonitor.ve().logError("Error sorting the partners",this.loggerId,s.hs.Gi.qi,t),null}},t}();e.x9=a},function(t,e,i){"use strict";var n=i(49),r=i(3),o=i(59),s=i(7),a=i(5),u=i(0),h=i(47),c=i(91),l=i(6).he.Th,f=function(){function t(){this.V9=!1}return t.prototype.init=function(t){this.logger=u.Framework.resolve(u.Framework.V.R).log(t.sessionId),this.yD=t.yD,this.GJ=t.GJ,this.oG=t.oG,this.zM=t.zM},t.prototype.RD=function(t){this.wD=t},t.prototype.G1=function(){this.V9=!0,this.cX()},t.prototype.LG=function(){if(a.hh.fa.na)this.j9();else{var t=!this.yD.yk()||this.yD.ck()||!l;this.logger.debug("REQUEST REMOTE ELECTION "+t),t?this.j9():this.Q9()}},t.prototype.j9=function(){var t=this.yD.gk(),e=t&&0!=t?c.Xq.nD:c.Xq.AS;this.GJ.F1(e)},t.prototype.Q9=function(){this.GJ.F1(c.Xq.Jq)},t.prototype.cX=function(){var t=this;this.rX(),this.K9=u.Framework.setInterval(function(){t.LG()},a.hh.fa.oa),this.zM.SD(),this.LG()},t.prototype.rX=function(){this.K9&&u.Framework.clearInterval(this.K9)},t.prototype.iX=function(){this.zM.ek(),this.wD.LM()},t.prototype.MG=function(t){var e=new r;if(t){this.Y9().forEach(function(t){e.set(t,n.sD.iD)});var i=!1,o=n.sD.iD;this.yD.Tk()&&(o=n.sD.nD,i=!0),this.zM._D(e,o,i)}else this.zM._D(e,n.sD.mc,!1)},t.prototype.H1=function(t,e){var i=this,u=this.W9(e),h=this.zM.CD().isLive();if(t&&t.length>0){var c=new o;c.addEach(t);var l=a.hh.fa.ea||c.some(function(t){var e=s.rc.Zh(hive.services.protocol.IF.SF,t.key.rankType);return i.logger.info("GOT RANKING "+e+",CRV "+t.cumulatedRankValue+",RV "+t.ranking+",GS "+t.groupSize),i.z9(t)}),f=null!=u&&0!=u.length;if(this.logger.debug("Tracker reports ["+u.keys().join(", ")+"]  bitrates"),this.logger.debug("ISLive "+h+" DoElect "+l),a.hh.fa.$o&&h){var p=this.Y9();if(f&&l){this.yD.H9(!0),this.logger.info("BECOMING SITE LEADER");var d=new r;p.forEach(function(t){d.set(t,n.sD.iD)}),u.forEach(function(t,e){i.oG.kj.has(t)||d.set(e,n.sD.nD)}),this.zM._D(d,n.sD.nD,!1)}else{this.yD.H9(!1);var g=n.sD.mc,v=new r;this.yD.yk()&&this.yD.ck()&&(g=n.sD.iD,p.forEach(function(t){v.set(t,n.sD.iD)})),this.zM._D(v,g,!1)}}}else if(h){a.hh.fa.ea?this.yD.H9(!0):this.yD.H9(!1);var y=new r;g=n.sD.mc;if(this.yD.yk()&&this.yD.ck())this.Y9().forEach(function(t){y.set(t,n.sD.iD)}),g=n.sD.iD;a.hh.fa.ea&&(g=n.sD.nD),this.zM._D(y,g,!1)}},t.prototype.Jj=function(){var t=this.Y9(),e=new r;t.forEach(function(t){e.set(t,n.sD.iD)});var i=!1,o=n.sD.iD;this.yD.Tk()&&(o=n.sD.nD,i=!0),this.zM._D(e,o,i)},t.prototype.Y9=function(){var t=new o;return this.oG.kj.forEach(function(e,i){e.peerInfo.watchingBitrate&&!t.has(e.peerInfo.watchingBitrate)&&t.add(e.peerInfo.watchingBitrate)}),t.toArray()},t.prototype.W9=function(t){var e=new r,i=this.yD.gk();return t.forEach(function(t){null!=t.watchingBitrate&&(i>0?i===t.internalAs&&e.set(t.watchingBitrate,t.guid):e.set(t.watchingBitrate,t.guid))}),e},t.prototype.z9=function(t){if(t.groupSize<2)return!1;var e=Math.max(1,Math.round(t.groupSize*a.hh.fa.ra));return l||u.Framework.C()&&h.$N.XN?t.ranking<e&&(this.yD.ck()||!this.yD.yk()):t.ranking<e},t.prototype.ZD=function(t,e,i,r){var o=1,s=this.wD.lk(i,e),h=a.hh.fa.ha*u.Framework.random();if(t==n.sD.iD){var c=this.wD.xM()-h;o=Math.max(1,s-c)}else if(t==n.sD.nD){var l=a.hh.fa.ca-h;o=Math.max(1,s-l)+r}return Math.round(o)},t}();e.BJ=f},function(t,e,i){"use strict";var n=i(0),r=i(3),o=i(23),s=i(33),a=i(1),u=i(2);i(60);var h=function(){function t(){this.J9=!1,this.loggerId="[TRACKER] ",this.X9=new r,this.yg=new s.Yb,this.protocol=new s.bC(this.yg),this.logger=n.Framework.resolve(n.Framework.V.R).log(),n.Framework.C()||(this.client=n.Framework.resolve(n.Framework.V.G))}return t.prototype.m1=function(t,e){try{return this.logger.debug("TRACKER CLIENT REGISTERED "+t),this.X9.has(t)||this.X9.set(t,e),this.X9.get(t)}catch(t){a.ErrorMonitor.ve().logError("Error adding new tracker client",this.loggerId,u.hs.xi.Mi,t)}},t.prototype.Rg=function(t){this.X9.delete(t)},t.prototype.wg=function(t){return this.X9.get(t)},t.prototype.M1=function(t){var e=this;if(this.client&&this.client.zd()){var i=this.Z9(t),n=new o.Jd(Services.pY,1,i),r=this.client.zd().send(n);r.then(function(){return e.logger.info("TRACKER REQUEST SENT")}),r.fail(function(t){a.ErrorMonitor.ve().logError("Error sending tracker request",e.loggerId,u.hs.xi.Di)})}else a.ErrorMonitor.ve().logError("Error sending tracker request because of connection",this.loggerId,u.hs.xi.Bi)},t.prototype.init=function(){var t=this;this.logger.debug("TRACKER MANAGER INIT"),this.client&&this.client.zd()?this.client.zd().on(Services.pY,10,function(e){try{var i=t.e7(e.msg);i&&t.X9.has(i.sessionId)?t.X9.get(i.sessionId).KX(i):t.logger.warn("SESSION ID NOT VALID OR NULL "+i.sessionId)}catch(e){a.ErrorMonitor.ve().logError("Error initializing the tracker manager",t.loggerId,u.hs.xi.Hi,e)}}):n.Framework.C()||this.logger.warn(this.loggerId+" CANNOT GET ACTIVE CONNECTION")},t.prototype.e7=function(t){try{var e='[1, "TRACKER_RESP", 4, 0,'+t+"]";this.yg.eC(e);var i=(this.protocol.zC(),new hive.services.protocol.IF.TrackerResponse);return i.read(this.protocol),i.infos.map(function(t){t.guid=atob(t.guid),t.publicIp=new InetAddress,t.publicIp.address=t.publicIpString,t.privateIp=new InetAddress,t.privateIp.address=t.privateIpString}),i.peerInfo.guid=atob(i.peerInfo.guid),i.peerInfo.publicIp=new InetAddress,i.peerInfo.publicIp.address=i.peerInfo.publicIpString,i.peerInfo.privateIp=new InetAddress,i.peerInfo.privateIp.address=i.peerInfo.privateIpString,this.protocol.t_(),this.J9&&this.logger.debug("RESP "+JSON.stringify(i)),i}catch(t){return a.ErrorMonitor.ve().logError("Error deserializing the tracker response",this.loggerId,u.hs.xi.Ui,t),null}},t.prototype.Z9=function(t){try{this.protocol.AC("TRACKER_REQ",s.gb.ONEWAY,0),t.write(this.protocol),this.protocol.DC();var e=this.yg.pC(),i=this.FB(e,",",4);return e.slice(i+1,e.length-1)}catch(t){throw a.ErrorMonitor.ve().logError("Error serializing the new request",this.loggerId,u.hs.xi.Fi,t),new Error(t)}},t.prototype.FB=function(t,e,i){return t.split(e,i).join(e).length},t}();e.wJ=h},function(t,e,i){"use strict";var n=i(26),r=n.HiveComm.$g,o=n.HiveComm.eE,s=function(){function t(){}return t.prototype.init=function(t,e){this.peer=t,this.rl=e},t.prototype.t7=function(t){t.uuid=this.rl.Ul.gd;var e=this.rl.Ul.iB.KU,i=this.r7(e.p2pSubRespQt),n=this.r7(e.srcRespQt);t.cdnRequests+=this.r7(e.srcReqN),t.cdnResponses+=this.r7(e.srcRespN),t.cdnResponseErrors+=this.r7(e.srcRespErrN),t.cdnResponseBytes+=this.r7(e.srcRespQt),t.p2pRequests+=this.r7(e.p2pSubReqN),t.p2pResponses+=this.r7(e.p2pSubRespN),t.p2pResponseErrors+=this.r7(e.p2pSubRespErrN),t.p2pResponseBytes+=this.r7(e.p2pSubRespQt),t.savings=this.r7(i/(n+i)*100)},t.prototype.r7=function(t){return t||0},t.prototype.i7=function(t){var e=this;t.uuid=this.rl.Ul.gd,this.rl.Ul.iB.WU.forEach(function(i,n){t.partners[n]||(t.partners[n]=new o);var r=t.partners[n];r.uuid=n,r.sentBytes+=e.r7(i.p2pSuccSent),r.receivedBytes+=e.r7(i.p2pSuccReceived),r.successTransfers+=e.r7(i.p2pSuccReq),r.failedTransfers+=e.r7(i.p2pFailReq)})},t.prototype.render=function(){var t=this.rl.renderStatsCallback;if(t){var e=new r;this.t7(e),this.i7(e);try{t(e)}catch(t){console.warn("error in rendering local stats",t)}}},t}();e.mJ=s},function(t,e,i){"use strict";var n=i(35),r=i(3),o=i(0),s=i(5),a=i(1),u=i(2),h=function(){function t(){this.loggerId="[ChunkHandler] ",this.n7=new r,this.s7=new r}return t.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.V.R).log(t.sessionId)},t.prototype.YX=function(t){try{var e=t.Zf(),i=t.jf,r=t.qf.Pf,h=Math.ceil(r/s.hh.Fa.Da),c=t.zf.bitrate,l=0,f=Math.min(s.hh.Fa.Da,r);this.o7(e,c);for(var p=f-l;h>0;){var d=null;try{o.Framework.C()||(d=n.wrap(i.slice(l,f))),l+=p}catch(t){a.ErrorMonitor.ve().logError("Error wrapping chunk",this.loggerId,u.hs.Or.Pr,t)}this.n7.get(e).push(d),h--,p=(f=Math.min(l+s.hh.Fa.Da,r))-l}}catch(t){a.ErrorMonitor.ve().logError("Error adding fragment to the fragmentMap",this.loggerId,u.hs.Or.Cr,t)}},t.prototype.o7=function(t,e){try{if(this.s7.has(e)&&this.s7.get(e).length>s.hh.Ra.Sa){var i=this.s7.get(e)[0];this.n7.delete(i),this.s7.get(e).shift()}if(this.s7.has(e))this.s7.get(e).push(t),this.n7.set(t,[]);else{var n=[t];this.s7.set(e,n),this.n7.set(t,[])}}catch(t){a.ErrorMonitor.ve().logError("Error generating the chunk handler hashmaps",this.loggerId,u.hs.Or.Ar,t)}},t.prototype.l8=function(t,e){return this.n7.has(t)?this.n7.get(t)[e]:null},t.prototype.a7=function(t){return this.s7.get(t)},t.prototype.oX=function(){this.n7=new r,this.s7=new r},t}();e.PJ=h},function(t,e,i){"use strict";var n=i(3),r=i(5),o=i(0),s=i(2),a=i(1),u=(i(28).cg,function(){function t(){this.loggerId="[IPSpoofing] ",this.h7=r.hh.Vo.xo}return t.prototype.init=function(t){this.logger=o.Framework.resolve(o.Framework.V.R).log(t.sessionId),this.TD=t.TD,this.c7=new n,this.u7=new n,this.h7&&this.l7()},t.prototype.fj=function(t,e,i){try{if(!this.h7)return!1;if(this.c7.has(t)||!e||!i)return!1;var n=this.p7(e,i);return!!(n&&this.u7.has(n)&&this.u7.get(n).length>=r.hh.Vo.qo)&&(a.ErrorMonitor.ve().logError("Error peer violates ip spoofing rules",this.loggerId,s.hs.bn.Sn,{privateIp:e,publicIp:i,otherGuid:t}),this.logger.debug(this.loggerId+"Spoofing rule violated for "+t+" with privateIp "+e+" publicIp "+i),!0)}catch(e){return a.ErrorMonitor.ve().logError("Error checking if peer violates ip spoofing rules",this.loggerId,s.hs.bn.In,{detailedError:e,otherGuid:t}),!1}},t.prototype.Tj=function(t,e,i){try{if(this.h7&&i&&e){var n=this.p7(e,i),r=this.c7.get(t);r&&r!=n&&this.d7(t,r),this.f7(t,n)}}catch(e){a.ErrorMonitor.ve().logError("Error adding or updating ip spoofing maps",this.loggerId,s.hs.bn.Rn,{detailedError:e,otherGuid:t})}},t.prototype.g7=function(t){this.h7&&this.Gj(t)},t.prototype.KG=function(t){this.h7&&this.Gj(t)},t.prototype.f7=function(t,e){this.c7.set(t,e);var i=[];this.u7.has(e)&&-1!=(i=this.u7.get(e)).indexOf(t)||(i.push(t),this.u7.set(e,i))},t.prototype.Gj=function(t){var e=this.c7.get(t);e?(this.d7(t,e),this.c7.delete(t)):this.logger.warn(this.loggerId+"no ip pair for guid "+t)},t.prototype.d7=function(t,e){var i=this.u7.get(e),n=i.indexOf(t);-1!=n?(i.splice(n,1),0==i.length?this.u7.delete(e):this.u7.set(t,i)):this.logger.warn(this.loggerId+"pair list "+e+" does not contain guid "+t)},t.prototype.p7=function(t,e){return e+":"+t},t.prototype.l7=function(){var t=this;o.Framework.setInterval(function(){try{var e=[];t.u7.forEach(function(i,n){if(i.length>r.hh.Vo.qo){for(var o=[],s=r.hh.Vo.qo;s<i.length;s++)o.push(i[s]);t.logger.warn("IpSpoofing violation for "+n+" - closing: "+o),e.concat(o)}}),e.forEach(function(e){t.TD.bj(e)})}catch(e){a.ErrorMonitor.ve().logError("Error checking periodic ip spoofing tables",t.loggerId,s.hs.bn.wn,e)}},r.hh.Vo.Go)},t}());e.Vo=u},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(190),o=i(5),s=i(98),a=i(0),u=i(2),h=i(1),c=function(t){function e(){var e=t.call(this)||this;return e.E7="[Score Partner Selection] ",e.type="Score",e}return n(e,t),e.prototype.v7=function(t,e){try{return e.sort(s.EQ.dQ),e.slice(0,t)}catch(t){return h.ErrorMonitor.ve().logError("Error selecting partners to remove",this.E7,u.hs.vr.pr,t),[]}},e.prototype.y7=function(t,e,i,n){try{return n.filter(function(t){return e.every(function(e){return e.guid!=t.peerInfo.guid})&&-1==i.indexOf(t.peerInfo.guid)}).slice(0,t)}catch(t){return h.ErrorMonitor.ve().logError("Error selecting partners to add",this.E7,u.hs.vr.dr,t),[]}},e}(r.T7);e.OJ=c;var l=function(){function t(){this.E7="[Score Partner Selection] "}return t.prototype.Nj=function(t){try{var e=t.filter(function(t){return!t.wj.yg.Dg()}),i=a.Framework.time(),n=e.filter(function(t){return i-t.y8>o.hh.Ho.Bo});return n.length>0?(n.sort(s.yQ.dQ),n.slice(0,1)[0]):null}catch(t){return h.ErrorMonitor.ve().logError("Error updating partners out",this.E7,u.hs.vr.gr,t),null}},t}();e.NJ=l},function(t,e,i){"use strict";var n=i(97),r=i(5),o=i(0),s=i(1),a=i(2),u=function(){function t(){this.jM="[BaseInPartnerSelection] ",this.logger=o.Framework.resolve(o.Framework.V.R).log()}return t.prototype.uj=function(t,e,i,u){try{var h=[],c=[],l=Math.round(t*(1-r.hh.No.Ao)),f=Math.max(e.length-l,0),p=t-e.length+f;if(f>0){var d=e.filter(function(t){return!t.wj.yg.Dg()}),g=o.Framework.time(),v=d.filter(function(t){return g-t.y8>r.hh.Ho.Bo}),y=Math.min(v.length,f);c=this.v7(y,v);var m=[],E=[];c.forEach(function(t){m.push(t.guid),E.push(t.gQ.fQ(!1))})}return p>0&&(h=this.y7(p,e,i,u)),this.logger.debug("[PART] A/R: "+p+"/"+f+" ["+h.map(function(t){return t.peerInfo.guid.substring(0,8)})+"/"+c.map(function(t){return t.guid.substring(0,8)})+"] P:["+e.map(function(t){return t.guid.substring(0,8)})+"] M:["+u.map(function(t){return t.peerInfo.guid.substring(0,8)})+"]"),new n.pQ(h,c)}catch(t){return s.ErrorMonitor.ve().logError("Error updating in partners",this.jM,a.hs.lr.ur,t),new n.pQ([],[])}},t}();e.T7=u},function(t,e,i){"use strict";var n=i(3),r=i(97),o=i(5),s=i(0),a=i(7),u=i(98),h=i(2),c=i(1),l=function(){function t(){this.m7="[Delta Partner Selection] "}return t.prototype.uj=function(t,e,i,n,a){try{this.yD=t;var u=[],l=[],f=Math.round(e*(1-o.hh.No.Ao)),p=Math.max(i.length-f,0),d=e-i.length+p;if(p>0){var g=i.filter(function(t){return!t.wj.yg.Dg()}),v=s.Framework.time(),y=g.filter(function(t){return v-t.y8>o.hh.Ho.Bo}),m=Math.min(y.length,p);(l=this.v7(m,y)).length>m&&(d+=l.length-m);var E=[],b=[];l.forEach(function(t){E.push(t.guid),b.push(t.gQ.fQ(!1))})}return d>0&&(u=this.y7(d,i,n,a)),new r.pQ(u,l)}catch(t){return c.ErrorMonitor.ve().logError("Error updating in partners",this.m7,h.hs.Rr.ur,t),new r.pQ([],[])}},t.prototype.v7=function(t,e){var i=this;try{e.sort(u.EQ.dQ);var n=e.slice(0,t);return e.slice(t,e.length).forEach(function(t){i.I7(t.Ek)&&n.push(t)}),n}catch(t){return c.ErrorMonitor.ve().logError("Error selecting partners to remove",this.m7,h.hs.Rr.pr,t),[]}},t.prototype.y7=function(t,e,i,n){var r=this;try{var s=[],a=[],u=[],l=[],f=[],p=this.yD.gk();p||(p=-1);var d=[];e.forEach(function(t){d.push(t.guid)});var g=Math.floor(t*o.hh.Ho.Mo),v=this.yD.Uj();n.forEach(function(t){var e=t.peerInfo.streams;if(e){var i=r.isLeader(t,e,p,v);i.cG?i.S7?s.push(t):a.push(t):r.R7(t,o.hh.Ho.Lo)?r.I7(t)?f.push(t):l.push(t):u.push(t)}else f.push(t)});var y=this.w7(s,a,u,l,f,t,t,g);return y.slice(0,Math.min(y.length,t))}catch(t){return c.ErrorMonitor.ve().logError("Error selecting partners to add",this.m7,h.hs.Rr.dr,t),[]}},t.prototype.w7=function(t,e,i,n,r,u,l,f){try{var p=[],d=[];t.length>0&&s.Framework.random()<o.hh.Ho.Fo&&(d=(t=a.rc.zh(t)).slice(0,Math.min(t.length,f)),p.push.apply(p,d),l=u-d.length);var g=[];e.length>0&&(g=(e=a.rc.zh(e)).slice(0,Math.min(e.length,f)),p.push.apply(p,g),l=u-g.length);var v=[];i.length>0&&(v=(i=a.rc.zh(i)).slice(0,Math.min(i.length,f)),p.push.apply(p,v),l=u-v.length);var y=null;n.length>0&&(y=(n=a.rc.zh(n)).slice(0,Math.min(n.length,l)),l=u-((v.length>0?v.length:0)-y.length));var m=[];return l>0&&r.length>0&&(m=(r=a.rc.zh(r)).slice(0,Math.min(r.length,l)),p.push.apply(p,m)),p}catch(t){return c.ErrorMonitor.ve().logError("Error grouping partners",this.m7,h.hs.Rr.yr,t),[]}},t.prototype.isLeader=function(t,e,i,r){try{var o=!1,s=!1,a=new n;e.forEach(function(t){a.set(t.bitrate,t)});var u=new n;return a.forEach(function(t,e){r.has(e)&&u.set(e,t)}),u.keys().length>0&&u.forEach(function(e,n){var a=r.get(n);if(a&&e.state>=2&&a.type>=1){var u=t.peerInfo.internalAs;u>0&&u==i&&(s=!0),o=!0}}),{cG:o,S7:s}}catch(e){return c.ErrorMonitor.ve().logError("Error identifying if member is leader or same site",this.m7,h.hs.Rr.Tr,{detailedError:e,otherGuid:t.peerInfo.guid}),{cG:!1,S7:!1}}},t.prototype.R7=function(t,e){try{var i=this.yD.getDelta(),n=this.yD.MX(),r=this.b7(t,n);return(0!=i||0!=r)&&i<r&&i>r+e}catch(e){return c.ErrorMonitor.ve().logError("Error identifying if member is ahead or behind delta",this.m7,h.hs.Rr.mr,{detailedError:e,otherGuid:t.peerInfo.guid}),!1}},t.prototype.I7=function(t){try{var e=this.yD.getDelta(),i=this.yD.MX(),n=this.b7(t,i);return 0==e&&0==n||e>n}catch(e){return c.ErrorMonitor.ve().logError("Error identifying if member is behind or not retrieveing the same bitrate",this.m7,h.hs.Rr.Ir,{detailedError:e,otherGuid:t.peerInfo.guid}),!1}},t.prototype.b7=function(t,e){try{var i=t.peerInfo.streams,n=0;return i&&i.forEach(function(t){t.bitrate==e&&(n=t.delta)}),n}catch(e){return c.ErrorMonitor.ve().logError("Error retrieving delta for member's bitrate",this.m7,h.hs.Rr.Sr,{detailedError:e,otherGuid:t.peerInfo.guid}),0}},t}();e.DJ=l;var f=function(){function t(){this.loggerId="[Throughput Partner Selection] ",this.logger=s.Framework.resolve(s.Framework.V.R).log()}return t.prototype.Nj=function(t,e,i){var r=this;try{this.yD=t;var a=this.yD.Uj(),u=e.streams;if(u){var l=i.filter(function(t){return!t.wj.yg.Dg()}),f=s.Framework.time(),p=l.filter(function(t){return f-t.y8>o.hh.Ho.Bo});if(0==u.filter(function(t){return a.has(t.bitrate)}).length)return null;var d=this.C7(p),g=this._7(a,d);if(g)return g;var v=a.keys().length,y=p.length,m=Math.round(y/v),E=d.keys().filter(function(t){return a.has(t)}),b=new n;E.forEach(function(t){b.set(t,d.get(t))});var w=this.P7(b,m);return null!=w?w:(u.forEach(function(t){var e=b.get(t.bitrate);if(null!=e){var i=r.A7(e);if(i.length>0&&!o.hh.Ho.Uo)return i[0]}}),null)}return null}catch(t){return c.ErrorMonitor.ve().logError("Error selecting partner to update out",this.loggerId,h.hs.br.wr,t),null}},t.prototype.C7=function(t){var e=new n;return t.forEach(function(t){var i=t.Ek.peerInfo.watchingBitrate;if(i||(i=-1),e.has(i)){var n=e.get(i);n.push(t),e.set(i,n)}else e.set(i,[t])}),e},t.prototype.A7=function(t){return t.filter(function(t){if(0==t.vQ.I5(o.hh.Oa.Aa))return t})},t.prototype.P7=function(t,e){var i=[];t.forEach(function(t,e){i.push({bitrate:e,O7:t.length})}),i.sort(function(t,e){return t.O7>e.O7?1:t.O7<e.O7?0:-1});var n=null;return i.forEach(function(i){if(t.get(i.bitrate).length>e){var r=t.get(i.bitrate);r.length>0&&(r.sort(u.yQ.dQ),n=r[0])}}),n},t.prototype._7=function(t,e){var i=this,n=null;return e.has(-1)?n=e.get(-1)[0]:e.filter(function(e,i){return!t.has(i)}).forEach(function(t,e){var r=i.A7(t);r.length>0&&(n=r[0])}),n},t}();e.kJ=f},function(t,e,i){"use strict";var n=i(0),r=i(9),o=i(34),s=i(24),a=i(10),u=i(14),h=i(5),c=function(){function t(){this.N7=!0===u.HiveConfig.Stats.AudioAccounting,this.D7=null}return t.prototype.init=function(t){this.logger=n.Framework.resolve(n.Framework.V.R).log(t.sessionId),this.loggerId="S["+t.sessionId+"]",this.Ul=t.rl.Ul,this.yD=t.yD,this.pX()},t.prototype.Z1=function(t){this.Ul.FL.metrics.memN=t,this.Ul.iB.metrics.memN=t},t.prototype.vj=function(t,e){this.Ul.FL.metrics.lookupTotal++,this.Ul.iB.metrics.lookupTotal++,t?(this.Ul.FL.metrics.lookupNotFound++,this.Ul.iB.metrics.lookupNotFound++,this.Ul.FL.metrics.lookupFailed++,this.Ul.iB.metrics.lookupFailed++):e?(this.Ul.FL.metrics.lookupFailed++,this.Ul.iB.metrics.lookupFailed++):(this.Ul.FL.metrics.lookupReqEstablished++,this.Ul.iB.metrics.lookupReqEstablished++)},t.prototype.Mj=function(){this.Ul.FL.metrics.lookupReqAccept++,this.Ul.iB.metrics.lookupReqAccept++},t.prototype.S8=function(t,e,i,n,r){if(this.N7||n){var o=r==s.bf.wf,a=this.Ul.OB(t),u=this.Ul.AB(t);a.p2pSuccReq++,a.p2pSuccReceived+=e,u.p2pSuccReq++,u.p2pSuccReceived+=e,o&&(a.p2pSuccReceivedLow+=e,u.p2pSuccReceivedLow+=e),i>0&&!o&&(a.p2pSuccReceivedLow+=e,u.p2pSuccReceivedLow+=e)}},t.prototype.b8=function(t,e,i,n,r,o){if(this.N7||r){var a=o==s.bf.wf,u=this.Ul.OB(t),h=this.Ul.AB(t);u.p2pFailReq++,u.p2pSuccReceived+=e,u.p2pFailReceived+=n-e,h.p2pSuccReq++,h.p2pSuccReceived+=e,h.p2pFailReceived+=n-e,a&&(u.p2pSuccReceivedLow+=e,h.p2pSuccReceivedLow+=e),i>0&&!a&&(u.p2pSuccReceivedLow+=e,h.p2pSuccReceivedLow+=e)}},t.prototype.C8=function(t,e,i){if(this.N7||i){var n=this.Ul.OB(t),r=this.Ul.AB(t);n.p2pFailReq++,n.p2pFailReceived+=e,r.p2pFailReq++,r.p2pFailReceived+=e}},t.prototype.P8=function(t,e,i){if(this.N7||i){var n=this.Ul.OB(e),r=this.Ul.AB(e);n.p2pSuccResp++,n.p2pSuccSent+=t,r.p2pSuccResp++,r.p2pSuccSent+=t}},t.prototype.D8=function(t,e,i,n){if(this.N7||n){var r=this.Ul.OB(i),o=this.Ul.AB(i);r.p2pPartResp++,r.p2pSuccSent+=t,r.p2pFailSent+=e-t,o.p2pPartResp++,o.p2pSuccSent+=t,o.p2pFailSent+=e-t}},t.prototype.O8=function(t,e,i){if(this.N7||i){var n=this.Ul.OB(e),r=this.Ul.AB(e);n.p2pFailResp++,n.p2pFailSent+=t,r.p2pFailResp++,r.p2pFailSent+=t}},t.prototype.ZM=function(t){t?this.Ul.FL.metrics.bitrateUpN++:this.Ul.FL.metrics.bitrateDwnN++},t.prototype.NX=function(t){if(-1==[r.vc.gc,r.vc.Ec].indexOf(t.Xf())){var e=t.Xf()!=r.vc.dc;if((this.N7||e)&&(this.Ul.bB().reqN++,this.Ul.xL().reqN++,t.Xf()==r.vc.fc)){var i=t;if(i.bitrate){var n=i.bitrate;this.Ul.CB(n).reqN++,this.Ul.BL(n).reqN++}}}else this.Ul.bB().reqOtherN++,this.Ul.xL().reqOtherN++},t.prototype.$X=function(t){var e=t.Xf()!=r.vc.dc;if(this.N7||e){var i=this.Ul.bB(),n=this.Ul.xL(),o=null,a=null;if(-1==[r.vc.gc,r.vc.Ec].indexOf(t.Xf())){var u;if(i.srcReqN++,n.srcReqN++,e)(u=this.k7(t))&&(o=this.Ul.CB(u),a=this.Ul.BL(u),o.srcReqN++,a.srcReqN++);if(t.Jf()==s.bf.If&&(i.srcOtherReqN++,n.srcOtherReqN++,e))(u=this.k7(t))&&(o.srcOtherReqN++,a.srcOtherReqN++)}}},t.prototype.t5=function(t){if(this.Ul.bB().p2pSubReqN++,this.Ul.xL().p2pSubReqN++,t.Xf()==r.vc.fc){var e=this.k7(t);e&&(this.Ul.CB(e).p2pSubReqN++,this.Ul.BL(e).p2pSubReqN++)}},t.prototype.L7=function(t,e){this.M7(t,this.Ul.xL()),this.M7(t,this.Ul.bB());var i=this.k7(t);i&&t.Xf()===r.vc.fc&&(this.M7(t,this.Ul.CB(i)),this.M7(t,this.Ul.BL(i))),isNaN(e)||(this.Ul.FL.metrics.srcThroughput=e)},t.prototype.nZ=function(t,e){var i=t.Xf()!=r.vc.dc;(this.N7||i)&&(-1!=[r.vc.gc,r.vc.Ec].indexOf(t.Xf())?(this.Ul.bB().respFallbackOtherN++,this.Ul.xL().respFallbackOtherN++):this.L7(t,e))},t.prototype.tZ=function(t,e){if(-1!=[r.vc.gc,r.vc.Ec].indexOf(t.Xf()))this.Ul.bB().respFallbackOthertErrN++,this.Ul.xL().respFallbackOthertErrN++;else{var i=t.Xf()!=r.vc.dc;if(this.N7||i)if(this.XM(t.type)){if(this.Ul.xL().respFallbackErrN++,this.Ul.bB().respFallbackErrN++,i)(n=this.k7(t))&&(this.Ul.CB(n).respFallbackErrN++,this.Ul.BL(n).respFallbackErrN++);if(0==t.qf.Df&&(this.Ul.xL().srcRespErrN++,this.Ul.bB().srcRespErrN++,i))(n=this.k7(t))&&t.Xf()===r.vc.fc&&(this.Ul.CB(n).srcRespErrN++,this.Ul.BL(n).srcRespErrN++);this.L7(t,e)}else if(-1!=h.hh.Xo.Jo.indexOf(t.Kf.status))this.Ul.bB().fallAgentFailedRespN++,this.Ul.xL().fallAgentFailedRespN++,this.Ul.bB().reqN--,this.Ul.xL().reqN--;else{var n;if(0==t.qf.Df&&(this.Ul.bB().srcOtherRespErrN++,this.Ul.xL().srcOtherRespErrN++),!i)(n=this.k7(t))&&t.Xf()===r.vc.fc&&(this.Ul.CB(n).srcOtherRespErrN++,this.Ul.BL(n).srcOtherRespErrN++);this.L7(t,e)}}},t.prototype.BX=function(t,e){if(e.Wq==s.bf.wf)this.Ul.xL().respP2pN++,this.Ul.bB().respP2pN++;else if(e.Wq==s.bf.If)this.Ul.xL().respFallbackN++,this.Ul.bB().respFallbackN++;else if(e.Wq==s.bf.Tf){this.Ul.xL().lCacheRespN++,this.Ul.bB().lCacheRespN++;var i=n.Framework.C()?e.length:t.jf.byteLength;this.Ul.xL().lCacheRespQt+=i,this.Ul.bB().lCacheRespQt+=i}},t.prototype.zX=function(t,e){var i=t.Xf()!=r.vc.dc;(this.N7||i)&&this.L7(t,e)},t.prototype.VX=function(t){if(0!=t.Qf&&(this.Ul.bB().p2pSubRespErrN++,this.Ul.xL().p2pSubRespErrN++,t.Xf()==r.vc.fc)){var e=this.k7(t);e&&(this.Ul.CB(e).p2pSubRespErrN++,this.Ul.BL(e).p2pSubRespErrN++)}},t.prototype.r5=function(t){if(this.Ul.bB().p2pSubRespExpN++,this.Ul.xL().p2pSubRespExpN++,t.Xf()==r.vc.fc){var e=this.k7(t);e&&(this.Ul.CB(e).p2pSubRespExpN++,this.Ul.BL(e).p2pSubRespExpN++)}},t.prototype.M7=function(t,e){var i=t.qf.Pf,n=t.qf.Df,o=t.qf.Af,s=t.qf.Of,u=t.qf.Nf;if(t.Xf()!=r.vc.gc){if(t.qf.Cf&&s&&s<i){var h=s/i;e.p2pSubRespPartN+=h,this.XM(t.type)||(e.p2pAgenTrafficFailureQt+=i-o)}if(0!=u&&(u==i&&e.lCacheRespN++,e.lCacheRespQt+=t.qf.Nf),0!=o)if(o==i&&(this.XM(t.type)&&e.respP2pN++,e.p2pSubRespN++),e.p2pSubReqQt+=i,e.p2pSubRespQt+=o,e.p2pAgenTrafficSuccessQt+=t.qf.p2pAgenTrafficSuccessQt,e.p2pDirectQt+=o,t.xq.Ek.peerInfo.type==a.Tc.W)e.p2pUdpbQt+=o,e.p2pNatQt+=o;else{var c=this.yD.gk();if(c&&c>0)if(null!=t.qq){c===t.qq.internalAs&&(e.p2pNatQt+=o)}else this.logger.warn("Missing partner info")}}if(0!=n){if(this.F7(t.type)&&(e.srcOtherReqQt+=t.qf.Df),n==i)this.F7(t.type)?(e.srcOtherRespN++,e.srcOtherRespQt+=t.qf.Df,e.srcOtherOverQt+=t.qf.Df,e.fallAgentRespN++):e.respFallbackN++,e.srcRespN++;else{e.srcRespErrN++;var l=n/(o+n);e.respFallbackN=l,e.respP2pN=1-l,this.F7(t.type)&&(e.srcOtherRespErrN++,e.srcOtherRespQt+=t.qf.Df,e.srcOtherOverQt+=t.qf.Df,e.fallAgenTrafficFailureQt+=t.qf.Df)}e.srcReqQt+=t.qf.Df,e.srcRespQt+=t.qf.Df,e.srcOverQt+=t.qf.Df,this.F7(t.type)&&(e.fallAgenTrafficSuccessQt+=t.qf.kf)}},t.prototype.k7=function(t){var e=null;if(t.zf instanceof o.N_){var i=t.zf;i.bitrate&&(e=i.bitrate)}return e},t.prototype.XM=function(t){return t!=s.bf.wf&&t!=s.bf.If},t.prototype.F7=function(t){return!this.XM(t)},t.prototype.pX=function(){this.U7()},t.prototype.hX=function(){n.Framework.clearInterval(this.D7),this.D7=null},t.prototype.U7=function(){var t=this;null!=this.D7&&(this.D7=n.Framework.setInterval(function(){t.Ul.ZU=t.yD.Fj(),t.Ul.XU=t.yD.gk(),t.Ul.IB=t.yD.getPublicIp()},h.hh.ih.rh))},t}();e.TJ=c},function(t,e,i){"use strict";var n=i(0),r=i(5),o=i(10),s=i(194),a=i(14),u=function(){function t(){this.B7=!1,this.loggerId="[UDPBDiscovery] ",this.H7=-1}return t.prototype.init=function(t){this.logger=n.Framework.resolve(n.Framework.V.R).log(t.sessionId),this.x7=t.VJ,this.yD=t.yD},t.prototype.JJ=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.vl=t,this.contextId=this.yD.getContextId()},t.prototype.startServer=function(){var t=this;this.logger.debug(this.loggerId+"START UDP BROADCAST SERVER"),this.x7.startServer(r.hh.UDPBroadcast.Ua,function(e,i){if(t.H7>-1){var n=s.q7.yf(i);if(n.uuid!=t.guid&&n.streamId==t.contextId&&n.p2pProtocolVersion===r.hh.Ho.Do){t.logger.debug(t.loggerId+"I RECEIVED A MESSAGE FROM "+n.uuid);var a=new o.bc(o.Tc.W,null,n.isLeader);a.guid=n.uuid,a.privateIpString=e,a.rankValue=n.rankValue,t.vl.forEach(function(t){return t.gG([a],!1)})}}})},t.prototype.lX=function(){var t=this;this.logger.info(this.loggerId+"START BROADCAST EVERY "+r.hh.UDPBroadcast.Ba),-1!=this.H7&&n.Framework.clearInterval(this.H7),this.H7=n.Framework.setInterval(function(){t.G7()},r.hh.UDPBroadcast.Ba),this.G7()},t.prototype.sX=function(){-1!=this.H7&&n.Framework.clearInterval(this.H7)},t.prototype.G7=function(){var t=new s.q7(this.contextId,this.yD.getId(),this.yD.QG(),this.yD.ck(),r.hh.Ho.Do);this.logger.info(this.loggerId+"BROADCAST MESSAGE contextId "+t.streamId+" id "+t.uuid+" udpscore "+t.rankValue+" lan leader "+t.isLeader+" protobufVersion "+t.p2pProtocolVersion),a.HiveConfig.UDPBroadcast.usiz&&(r.hh.UDPBroadcast.Ha=a.HiveConfig.UDPBroadcast.usiz),this.x7.broadcast(r.hh.UDPBroadcast.Ua,r.hh.UDPBroadcast.Ha,t.vf())},t.prototype.Ud=function(t){this.logger.info("UDPDISCOVERY SERVER CONNECTED"),this.B7||(this.guid=t,this.startServer(),this.lX())},t}();e.gJ=u},function(t,e,i){"use strict";var n=function(){function t(t,e,i,n,r){this.streamId=t,this.uuid=e,this.rankValue=i,this.isLeader=n,this.p2pProtocolVersion=r}return t.prototype.vf=function(){var t={streamId:this.streamId,uuid:this.uuid,rankValue:this.rankValue,isLeader:this.isLeader,p2pProtocolVersion:this.p2pProtocolVersion};return JSON.stringify(t,this.V7)},t.prototype.V7=function(t,e){if(null!==e)return e},t.yf=function(e){var i=e,n=JSON.parse(i);return new t(n.streamId,n.uuid,n.rankValue,n.isLeader,n.p2pProtocolVersion)},t}();e.q7=n},function(t,e,i){"use strict";var n=i(0),r=function(){function t(){this.loggerId="[ProxyUDPB]",this.logger=n.Framework.resolve(n.Framework.V.R).log(),this.x7=window.myUdpBroadcaster,this.x7||this.logger.error(this.loggerId+" helper undefined")}return t.prototype.startServer=function(t,e){try{this.x7&&this.x7.startServer(t,e)}catch(t){this.logger.warn(this.loggerId+t)}},t.prototype.j7=function(){try{this.x7&&this.x7.j7()}catch(t){this.logger.warn(this.loggerId+t)}},t.prototype.broadcast=function(t,e,i){try{this.x7&&this.x7.broadcast(t,e,i)}catch(t){this.logger.warn(this.loggerId+t)}},t.prototype.sX=function(){try{this.x7&&this.x7.sX()}catch(t){this.logger.warn(this.loggerId+t)}},t.prototype.Q7=function(t,e){try{this.x7&&this.x7.Q7(t,e)}catch(t){this.logger.warn(this.loggerId+t)}},t}();e.EJ=r},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(88),o=i(197),s=i(89),a=i(90),u=i(62),h=i(24),c=i(34),l=i(4),f=i(1),p=function(t){function e(){var e=t.call(this)||this;return e.K7.onerror=function(t){f.ErrorMonitor.ve().logError("Shared Worker error",{error:t.message})},e.Y7.onerror=function(t){f.ErrorMonitor.ve().logError("Web Worker error",{error:t.type})},e.K7.port.start(),e}return n(e,t),e.prototype.W7=function(){var t=this;setTimeout(function(){t.z7()},1e3)},e.prototype.z7=function(){var t=this;this.K7.port.onmessage=function(e){t.logger.debug("LRU length : "+e.data.response)},this.logger.debug("Send message"),this.K7.port.postMessage({type:o.X7.J7}),this.W7()},e.prototype.contains=function(t){var e=this,i=l.defer();if(this.kq.has(t))i.resolve(!0);else{var n=!1,r=setTimeout(function(){n=!0,e.logger.debug("VOD CONTAINS TIMEDOUT : "+t),i.resolve(!1)},1e3);this.K7.port.onmessage=function(t){clearTimeout(r),n||(t.data.response?i.resolve(!0):i.resolve(!1))},this.K7.onerror=function(t){e.logger.error(t)},this.K7.port.postMessage({type:o.X7.Z7,eee:t})}return i.Ss},e.prototype.tee=function(t){var e=l.defer(),i=this.kq.get(t);if(null!=i){var n=null;i.content.forEach(function(t,e){if(u.HF.BF(e).kF())return(n=t).headers=i.headers,void(n.qq=i.qq)}),e.resolve(n)}else e.resolve(null);return e.Ss},e.prototype.get=function(t){var e=this,i=l.defer();if(this.kq.has(t))this.tee(t).then(function(t){i.resolve(t)});else{this.logger.debug("SHAREDWORKER: Permission Request to READ");var n=Date.now();this.ree(o.X7.iee,n).then(function(r){e.logger.debug("SHAREDWORKER: Permission Request To READ : "+r),r?e.nee(t).then(function(t){e.logger.debug("SHAREDWORKER:  Read Completed "),e.K7.port.postMessage({type:o.X7.see,id:n}),i.resolve(t)}):i.resolve(null)})}return i.Ss},e.prototype.nee=function(t){var e=this,i=l.defer(),n=null,r=!1,a=setTimeout(function(){r=!0,i.resolve(n)},1e3);return this.Y7.onmessage=function(u){if(clearTimeout(a),!r){if(u.data.response){var c=new h.Hf;c.Cf=!1,c._f=!0,c.Pf=u.data.data.length,c.Af=0,c.Nf=u.data.data.length,c.Df=0,(n=new s.Gq(u.data.data.length,u.data.data.content,c,h.bf.Tf)).headers=u.data.data.oee}else e.K7.port.postMessage({type:o.X7.aee,eee:t});i.resolve(n)}},this.Y7.postMessage({type:o.X7.hee,eee:t}),i.Ss},e.prototype.m=function(){var t=this;this.logger.debug("FLUSHING IN-MEMORY CACHE");for(var e=[],i=0;i<this.Mq.length;i++)this.kq.get(this.Mq[i]).zq||e.push(this.Mq[i]);this.logger.debug("Flush "+e.length+" in memory"),e.length>0?this.cee(e).then(function(e){t.uee()}):this.uee()},e.prototype.uee=function(){var t=this,e=0,i=0;this.logger.debug("PURGING PERSISTENTDB's IN-MEMORY CACHE"),this.Mq.every(function(n,r){var o=t.kq.get(n).size();return e+o>t.Fq?(i=r,t.logger.debug("CACHE TOO BIG "+(e+o)),!1):(e+=o,!0)})||this.Mq.splice(i,this.Mq.length-1).forEach(function(e){t.kq.delete(e)}),this.Bq()},e.prototype.cee=function(t){var e=this,i=l.defer();this.logger.debug("SHAREDWORKER:  Permission Request To Write ");var n=Date.now();return this.ree(o.X7.lee,n).then(function(r){e.logger.debug("SHAREDWORKER:  Permission Request To WRITE : "+r),r?(e.logger.debug("Flush the contents"),e.pee(t).then(function(t){e.logger.debug("SHAREDWORKER:  WRITE COMPLETED"),e.K7.port.postMessage({type:o.X7.dee,id:n}),i.resolve(t)})):i.resolve(r)}),i.Ss},e.prototype.pee=function(t){var e=this,i=l.defer();return this.fee(t[0]).then(function(n){if(n)t.shift(),0==t.length?i.resolve(!0):e.pee(t).then(function(t){i.resolve(t)});else{var r=!1,s=setTimeout(function(){r=!0,t.shift(),0==t.length?i.resolve(!1):e.pee(t).then(function(t){i.resolve(t)})},1e3);e.Y7.onmessage=function(n){n.data&&(e.kq.get(t[0]).zq=!0,e.K7.port.postMessage({type:o.X7.gee,eee:t[0],size:e.kq.get(t[0]).size()})),clearTimeout(s),r||(t.shift(),0==t.length?n.data?i.resolve(!0):i.resolve(!1):e.pee(t).then(function(t){i.resolve(t)}))},e.Y7.onerror=function(t){e.logger.error(t)};var a=e.kq.get(t[0]),h=null,c=null;a.content.forEach(function(t,e){if(u.HF.BF(e).kF())return c=e,void((h=t).headers=a.headers)});var l={P_:a.zf.Zf(),headers:a.headers,length:a.size(),Eee:c,content:h.data,zf:a.zf};e.Y7.postMessage({type:o.X7.vee,data:l})}}),i.Ss},e.prototype.fee=function(t){var e=this,i=l.defer(),n=!1,r=setTimeout(function(){n=!0,i.resolve(!1)},1e3);return this.K7.port.onmessage=function(o){clearTimeout(r),n||(e.logger.debug("SHAREDWORKER:  CONTAINS REQUEST : "+t+" : "+o.data.response),o.data.response?i.resolve(!0):i.resolve(!1))},this.K7.onerror=function(t){e.logger.error(t),i.resolve(!1)},this.K7.port.postMessage({type:o.X7.Z7,eee:t}),i.Ss},e.prototype.ree=function(t,e){var i=this,n=l.defer(),r=!1,s=setTimeout(function(){r=!0,n.resolve(!1)},2e3);return this.K7.port.onmessage=function(e){clearTimeout(s),r?t==o.X7.iee?i.K7.port.postMessage({type:o.X7.see}):t==o.X7.lee&&i.K7.port.postMessage({type:o.X7.dee}):n.resolve(e.data.response)},this.K7.onerror=function(t){i.logger.error(t)},this.K7.port.postMessage({type:t,id:e}),n.Ss},e.prototype.ik=function(t){return[]},e.prototype.Vq=function(t){var e=this,i=l.defer(),n=[],r=Date.now();return this.ree(o.X7.iee,r).then(function(t){if(t){var s=!1,u=setTimeout(function(){s=!0,e.K7.port.postMessage({type:o.X7.see,id:r}),i.resolve(n)},4e3);e.Y7.onmessage=function(t){if(clearTimeout(u),t.data.response&&null!=t.data)for(var h=0;h<t.data.elements.length;h++){var l=new c.N_(t.data.elements[h].url,t.data.elements[h].b_,t.data.elements[h].w_,t.data.elements[h].C_,t.data.elements[h].duration,t.data.elements[h].bitrate,t.data.elements[h].__),f=new a.Hq(l);f.headers=t.data.elements[h].oee,f.totalSize=t.data.elements[h].length,n.push(f)}e.K7.port.postMessage({type:o.X7.see,id:r}),s||i.resolve(n)},e.Y7.onerror=function(t){f.ErrorMonitor.ve().logError("GET ELEMENTS ERROR",{error:t}),e.K7.port.postMessage({type:o.X7.see,id:r})},e.Y7.postMessage({type:o.X7.yee})}}),i.resolve(null),i.Ss},e}(r.Yq);e.vJ=p},function(t,e,i){"use strict";var n=function(){return function(){}}();n.lee="write_request",n.Z7="contains_request",n.gee="write_id_operation",n.iee="read_request",n.see="read_completed",n.dee="write_completed",n.aee="update_lru",n.J7="lru_stats",n.hee="read_operation",n.yee="read_elements_operation",n.Tee="read_keys_operation",n.vee="write_operation",e.X7=n},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(20);!function(t){!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minVersion="3.0.0",e.renderStatsCallback=void 0,e}return n(e,t),e}(r.HiveComm.Options.Tp);t.nJ=e}(t.Options||(t.Options={}))}(e.HiveComm||(e.HiveComm={}))},function(t,e,i){"use strict";var n=i(4),r=i(18),o=i(21),s=i(200),a=i(26),u=a.HiveComm.HiveTechError,h=a.HiveComm.vE,c=i(70),l=i(19),f=i(22),p=i(46),d=i(53),g=i(14),v=i(1),y=i(56),m=i(32),E=i(72),b=i(29),w=(i(44),navigator),T=function(){function t(t,e,i){this.loggerId="[HiveJsProxy]",this.mee=0,this.gL=t,this.options_=new s.HiveComm.Options.Iee,this.See(e),this.yL(),this.UQ=i}return t.prototype.getName=function(){return t.EL},t.prototype.getVersion=function(){return this.version},t.prototype.vL=function(){return!1},t.prototype.yL=function(){var t=this;if(null==this.Ree||Date.now()-this.mee>1e4){var e="//"+c.tL.dO+":"+c.tL.rL+"/version.json";this.Ree=o.bp(e).then(function(e){var i=JSON.parse(e);return t.state=i.state,t.version=i.version,"ready"===t.state?"ready":(t.logger().warn(t.id()+"Client not ready: "+t.state),n.reject(new u(h.pE,"state "+t.state)))},function(e){var i="Client not reachable";return null!=e&&null!=e.status&&-1!=e.status&&(i="Client check returned "+e.status),t.logger().warn(t.id()+i),n.reject(new u(h.pE,i))}).catch(function(t){return t instanceof u?n.reject(t):n.reject(new u(h.pE,"error parsing response"))}),this.mee=Date.now()}return this.Ree},t.prototype.initSession=function(t,e){var i=this;return this.yL().then(function(){return i.resolveTicketPromise(t).then(function(e){var n=i.TL(t,e);if(null!=n)return E.$u.registerComm(i.gL,n.id),E.$u.registerTech(i,n.id),r.HiveRequestFactory.registerTech(n.id,i.getName()),n;throw new u(h.sE,"error generating session")})}).catch(function(t){return t instanceof u?n.reject(t):n.reject(new u(h.sE,"generic error resolving ticket"))})},t.prototype.oL=function(t){this.oJ=t},t.prototype.mL=function(){return this.options_.initTimeout},t.prototype.isActive=function(t,e){var i=e.manifest.toLowerCase(),n=t.toLowerCase(),r=i.indexOf(".ism/manifest");if(r>-1){var o=i.substring(0,r);if(n.indexOf(o)>-1)return n.indexOf(".ism/manifest(format=mpd-time-csf)")>-1?this.oJ?(e.ticket.SourceURL=t,!0):this.aJ(e,"The player does not use HiveRequest, downgrading to StatsJS"):this.aJ(e,"Protocol not supported by HiveJsProxy tech, downgrading to StatsJS")}else if(n===i)return!!this.oJ||this.aJ(e,"The player does not use HiveRequest, downgrading to StatsJS");return!1},t.prototype.aJ=function(t,e){var i=this;return t.tech=this.UQ,m.Hive.Reporting().initSession(t.ticket.ticketUrl,!1).then(function(e){t.hl(e),e.ticket,i.logger().debug("[HiveJSProxy] downgrade verified ticket "+t.ticket.ticketUrl),i.gL.updatePlayerInfo(e)}).fail(function(t){v.ErrorMonitor.ve().logError("Error initializing session when downgrading session tech",i.loggerId,{error:t})}),this.oJ&&this.oJ.dU(),this.oJ=void 0,r.HiveRequestFactory.registerTech(t.id,y.StatsJS.EL),this.gL.logger().warn("[HiveJsProxy] "+e),this.onError(new u(h.fE,e)),!0},t.prototype.ol=function(t,e){var i=this;this.logger().debug(this.id()+"Stopping session "+t.id+" [onUnload:"+e+"]");var n="//"+c.tL.dO+":"+c.tL.rL+"/proxy/"+t.id+"/stop";e&&w.sendBeacon?(w.sendBeacon(n),this.logger().debug(this.id()+"session stopped ["+t.id+"][beacon]")):o.bp(n,null,!e).then(function(){i.logger().debug(i.id()+"session stopped ["+t.id+"]"+(e?"[sync]":""))},function(n){i.logger().warn(i.id()+"session close error ["+t.id+"]"+(e?"[sync]":""),n)})},t.prototype.nl=function(t,e){var i=e?l.Ml.IDLE:l.Ml.Ll;this.logger().debug(this.id()+"idle state: "+l.Ml[i])},t.prototype.SL=function(t,e){var i=this,r="playing-point="+e.Pl;r+="&buffer-length="+e.Al,r+="&total-buffering="+e.Ol,r+="&width="+e.width,r+="&height="+e.height,r+="&fullscreen="+e.YQ;var s="//"+c.tL.dO+":"+c.tL.rL+"/proxy/"+t.id+"/stats/put?"+r;return o.bp(s).fail(function(t){return i.logger().warn(i.id()+"error sending feedback to Hive Client",t),n.reject(t)})},t.prototype.CL=function(t,e,i){var r=this,s="//"+c.tL.dO+":"+c.tL.rL+"/proxy/"+t.id+"/event?type="+e;if(null!=i)for(var a in i)s+="&"+a+"="+i[a];return this.logger().debug(this.id()+"event "+f.Gl.Yp[e],null!=i?i:""),o.bp(s).fail(function(t){return r.logger().warn(r.id()+"error sending feedback event to Hive Client",t),n.reject(t)})},t.prototype.bd=function(t,e){return n.resolve(!0)},t.prototype.onError=function(t){var e=!0;if(null!=this.options_.onError)try{e=this.options_.onError(t)}catch(t){v.ErrorMonitor.ve().logError("exception in user-defined onError callback",this.id(),t)}return e},t.prototype.onActiveSession=function(t){var e=this.gL.getPlayerSource();0===e.indexOf("//")&&(e=location.protocol+e);var i=o.Ip(c.tL.cU,c.tL.dO,c.tL.rL,t.id,e);if(t.authenticationToken&&this.version>="3.0.1"?o._p(i,JSON.stringify({authenticationToken:t.authenticationToken})):o.bp(i),this.updatePlayerInfo(t),d.Zu.me(this.logger()),this.oJ&&this.oJ.fU(),this.wee(t),null!=this.options_.onActiveSession)try{this.options_.onActiveSession(t.toHiveSession())}catch(t){v.ErrorMonitor.ve().logError("exception in user-defined onActiveSession callback",this.id(),t)}},t.prototype.DL=function(){},t.prototype.kL=function(){},t.prototype.LL=function(t){this.gL=t},t.prototype.id=function(){return"["+t.EL+"] "},t.prototype.See=function(e){null!=e[t.EL]&&o.Sp(e[t.EL],this.options_)},t.prototype.resolveTicketPromise=function(t){var e=this;this.logger().debug(this.id()+"resolving ticket: "+t);var i,r=this.bee(t),s=JSON.stringify(this.Cee()),a=null;return this.gL.options().testId&&((i={})[b.L.cR]=this.gL.options().testId,a=i),this.logger().debug("My header ",a),o._p(r,s,"application/json",a).then(function(i){var n=JSON.parse(i);return e.logger().debug(e.id()+"resolved ticket "+t+" -> "+n.manifest),n},function(i){return e.logger().warn(e.id()+"ticket "+t+" resolve error: ",i),n.reject(new u(h.sE,i))}).catch(function(t){return t instanceof u?n.reject(t):n.reject(new u(h.dE,t))})},t.prototype.bee=function(t){return t=encodeURIComponent(t),o.Ip(c.tL.fO,c.tL.dO,c.tL.rL,t,"&",this.gL.getPluginId())},t.prototype.TL=function(t,e){var i=new p.BN;i.RN(t);var n=new r.cl(t,i,e.manifest,null);return n.ML=!0,n.id=e.sessionId,n.ticket.sessionId=n.id,n},t.prototype.Cee=function(){var t={HiveConfig:{}};for(var e in window.HiveConfig)for(var i in t.HiveConfig[e]={},window.HiveConfig[e])t.HiveConfig[e][i]=window.HiveConfig[e][i];return t},t.prototype.wee=function(t){var e=this;if(void 0!==g.HiveConfig.Stats.render){var i="//"+c.tL.dO+":"+c.tL.rL+"/proxy/"+t.id+"/stats/get";if("undefined"!=typeof EventSource){var n=new EventSource(i);n.onmessage=function(t){e._ee(t.data)},n.onerror=function(t){n.close()}}else this.Pee=window.setInterval(function(){o.bp(i).then(function(t){e._ee(t)})},4e3)}},t.prototype.updatePlayerInfo=function(t){var e=this,i="comm-version="+this.gL.getCommVersion();i+="&plugin-name="+this.gL.getPluginName(),i+="&plugin-version="+this.gL.getPluginVersion(),i+="&player-tech="+this.gL.getPlayerTech(),i+="&player-version="+this.gL.getPlayerVersion(),this.gL.getTelemetryId()&&(i+="&telemetry-id="+this.gL.getTelemetryId());var r=o.Ip(c.tL.uU,c.tL.dO,c.tL.rL,t.id,i);return o.bp(r).fail(function(t){return e.logger().debug(e.id()+"error sending player Info to Hive Client",t),n.reject(t)})},t.prototype._ee=function(t){try{var e=JSON.parse(t);for(var i in e)e.hasOwnProperty(i)&&(e[i].human=function(t){return t>1e6?(t/1e6).toFixed(2)+"MB":t>1e3?(t/1e3).toFixed(2)+"KB":t+"B"});g.HiveConfig.Stats.render(e)}catch(t){console.trace(t)}},t.prototype.logger=function(){return this.gL.logger()},t}();T.EL="HiveJsProxy",e.HiveJsProxy=T},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(20);!function(t){!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minVersion="3.3.0",e}return n(e,t),e}(r.HiveComm.Options.Tp);t.Iee=e}(t.Options||(t.Options={}))}(e.HiveComm||(e.HiveComm={}))},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(4),o=i(18),s=i(21),a=i(20),u=i(202),h=i(26),c=i(42),l=i(29),f=i(19),p=i(22),d=i(46),g=i(1),v=u.HiveComm.Options,y=a.HiveComm.Options.mp,m=h.HiveComm.HiveTechError,E=h.HiveComm.vE,b=i(44);e.Aee=navigator;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(o.cl),T=function(){function t(t,e){this.mee=0,this.gL=t,this.options_=new v.Oee,this.See(e),s.Rp(window.location.href,new y,this.options_)}return t.prototype.getName=function(){return t.EL},t.prototype.getVersion=function(){return this.version},t.prototype.vL=function(){return!1},t.prototype.yL=function(){var t=this;if(null==this.Ree||Date.now()-this.mee>1e4){var e=new b;e.Ad(navigator.userAgent);var i=e.jO();if("IE"===i.name&&i.version&&parseInt(i.version)<10)return r.reject(new m(E.pE,"Internet Explorer < v.10 not supported"));this.Nee=Date.now(),this.Dee=0;var n="//"+c.fp.dO+":"+this.gL.options().monitorPort+"/version.json";this.logger().debug(this.id()+"verifying Hive Client version"),this.Ree=s.bp(n).then(function(e){var i=JSON.parse(e);return t.state=i.state,t.version=i.version,"ready"===t.state?"developer"===t.version||t.version>=t.options_.minVersion?(t.Dee=Date.now(),t.logger().debug(t.id()+"Hive Client ready - version "+t.version+" ["+(t.Dee-t.Nee)+"]"),"ready"):(g.ErrorMonitor.ve().logError("Client version requirement not satisfied",t.id(),{version:t.version,minVersion:t.options_.minVersion}),t.gL.addTechEvent(new p.Gl.lf(null,p.Gl.td.Jp)),r.reject(new m(E.gE,"version "+t.version))):(g.ErrorMonitor.ve().logError("Cannot check version: client state not ready",t.id(),{state:t.state}),t.gL.addTechEvent(new p.Gl.lf(null,p.Gl.td.zp)),r.reject(new m(E.pE,"state "+t.state)))},function(e){var i="Client not reachable";return null!=e&&null!=e.status&&-1!=e.status&&(i="Client check returned error"),g.ErrorMonitor.ve().logError(i,t.id(),null!=e&&null!=e.status&&-1!=e.status?{status:e.status}:void 0),t.gL.addTechEvent(new p.Gl.lf(null,p.Gl.td.Wp)),r.reject(new m(E.pE,i))}).catch(function(e){if(e instanceof m)return r.reject(e);var i="Error fetching Hive Client version";return g.ErrorMonitor.ve().logError(i,t.id(),e),r.reject(new m(E.pE,i))}),this.mee=Date.now()}return this.Ree},t.prototype.initSession=function(t,e){var i=this;return this.options_.minVersion!=c.fp.vO||this.gL.options().testId?this.yL().then(function(){return i.kee(t).catch(function(t){return r.reject(t)})}):this.kee(t).catch(function(t){return r.reject(t)})},t.prototype.mL=function(){return this.options_.initTimeout},t.prototype.isActive=function(t,e){return t.indexOf(e.Lee)>-1},t.prototype.ol=function(t,i){var n=this;this.logger().debug(this.id()+"Stopping session "+t.id+" [complete close:"+i+"]");var r="//"+c.fp.dO+":"+this.gL.options().playerPort+"/session?action=stop";r+="&currentSession="+t.id,i&&(r+="&completeStop=true"),i&&e.Aee.sendBeacon?(e.Aee.sendBeacon(r),this.logger().debug(this.id()+"session stopped ["+t.id+"][beacon]")):s.bp(r,null,!i).then(function(){n.logger().debug(n.id()+"session stopped ["+t.id+"]"+(i?"[sync]":""))},function(e){n.logger().warn(n.id()+"session close error ["+t.id+"]"+(i?"[sync]":""),e)})},t.prototype.nl=function(t,e){this.Mee=e?f.Ml.IDLE:f.Ml.Ll,this.logger().notice("[HiveComm] client state: "+f.Ml[this.Mee])},t.prototype.SL=function(t,e){if(this.Mee==f.Ml.IDLE)return r.resolve(!0);var i="playing-point="+e.Pl;i+="&buffer-length="+e.Al,i+="&total-buffering="+e.Ol,i+="&width="+e.width,i+="&height="+e.height,i+="&fullscreen="+e.YQ;var n=t.Lee+"stats?"+i;return this.logger().trace(n),s.bp(n)},t.prototype.CL=function(t,e,i){var n=this;if(!(e!==p.Gl.Yp.Kp&&e!==p.Gl.Yp.HIDDEN||this.version&&("developer"===this.version||this.version>="2017")))return r.resolve(!0);var o=t.Lee+"player-event?type="+p.Gl.Yp[e];if(null!=i)for(var a in i)o+="&"+a+"="+i[a];return this.logger().debug(this.id()+"event "+p.Gl.Yp[e],null!=i?i:""),s.bp(o).fail(function(t){return n.logger().warn(n.id()+"error sending feedback event to Hive Client",t),r.reject(t)})},t.prototype.bd=function(t,e){return r.resolve(!0)},t.prototype.updatePlayerInfo=function(t){var e=this;if(this.Fee())return this.logger().warn("Player info not supported in this Java client version"),r.resolve(!0);var i="comm-version="+this.gL.getCommVersion();i+="&plugin-name="+this.gL.getPluginName(),i+="&plugin-version="+this.gL.getPluginVersion(),i+="&player-tech="+this.gL.getPlayerTech(),i+="&player-version="+this.gL.getPlayerVersion(),this.gL.getTelemetryId()&&(i+="&telemetry-id="+this.gL.getTelemetryId());var n=t.Lee+"player-info?"+i;return s.bp(n).fail(function(t){return e.logger().debug(e.id()+"error sending player Info to Hive Client",t),r.reject(t)})},t.prototype.onError=function(t){var e=!0;if(null!=this.options_.onError)try{e=this.options_.onError(t)}catch(t){g.ErrorMonitor.ve().logError("Exception in user-defined onError callback",this.id(),t)}return e},t.prototype.DL=function(t,e,i){var n={isReadyIn:this.Nee,isReadyOut:this.Dee,leaseIn:this.Uee,leaseOut:this.Bee,resolveIn:this.Hee,resolveOut:this.xee};void 0!==e&&null!=e&&(n.sessionId=e.id),void 0!==i&&(n.total=i);var r=JSON.parse(JSON.stringify(n));g.ErrorMonitor.ve().logError(t.message,this.id(),r),this.gL.addTechEvent(new p.Gl.lf(null,p.Gl.td.$p,n)),this.qee()},t.prototype.onActiveSession=function(t){if(this.updatePlayerInfo(t),o.Rl.setItem("hiveActiveSessionId",t.id),null!=this.options_.onActiveSession)try{this.options_.onActiveSession(t.toHiveSession())}catch(t){g.ErrorMonitor.ve().logError("Exception in user-defined onActiveSession callback",this.id(),t)}},t.prototype.LL=function(t){this.gL=t},t.prototype.id=function(){return"["+t.EL+"] "},t.prototype.See=function(e){null!=e[t.EL]&&s.Sp(e[t.EL],this.options_)},t.prototype.kee=function(t){var e=this,i=(new Date).getTime();return this.Gee(t).then(function(n){return n?e.Vee(t,n,i):e.resolveTicketPromise(t).then(function(n){return e.Vee(t,n,i)})})},t.prototype.Gee=function(e){var i=this;if(this.Uee=Date.now(),this.gL.options().useSessionCheck){var n="//"+c.fp.dO+":"+this.gL.options().playerPort+"/session?&action=check";n+="&hivePluginId="+this.gL.getPluginId(),n+="&callback="+encodeURIComponent(e);var s=o.Rl.getItem("hiveActiveSessionId");return o.Rl.removeItem("hiveActiveSessionId"),s&&(n+="&currentSession="+s),this.jee(),this.Qee(n).then(function(t){return i.Bee=Date.now(),t?i.Kee(t,n,e,i.Uee):(i.logger().debug(i.id()+"session allowed ["+(i.Bee-i.Uee)+"]"),!1)},function(e){if(400==e.status)return i.Yee("bad request","error resolving ticket",e);if(401==e.status)return i.Yee("unauthorized","error verifying the ticket",e);if(403==e.status){var n=t.Wee(e,void 0,"session"),o=n?{zee:n}:void 0;return g.ErrorMonitor.ve().logError("reports another active session",i.id(),o),i.gL.addTechEvent(new p.Gl.lf(null,p.Gl.td.Xp,o)),r.reject(new m(E.fE,"another active session"+(o?" ["+o.zee+"]":"")))}return 404==e.status?(i.logger().debug(i.id()+"installed version does not support active session check"),i.Bee=Date.now(),!1):-1==e.status?(clearTimeout(i.Jee),i.Xee()):(g.ErrorMonitor.ve().logError("unhandled error from Java",i.id(),{error:e.status}),i.gL.addTechEvent(new p.Gl.lf(null,p.Gl.td.Zp)),r.reject(new m(E.dE,e)))}).catch(function(t){return t instanceof m?r.reject(t):(g.ErrorMonitor.ve().logError("unhandled error on requestLeaseDirect",i.id(),{error:t}),i.gL.addTechEvent(new p.Gl.lf(null,p.Gl.td.Zp)),r.reject(new m(E.dE,t)))}).finally(function(){clearTimeout(i.Jee)})}return this.logger().debug(this.id()+"Hive session check disabled - will directly resolve ticket (other active sessions may fail)"),r.resolve(!1)},t.prototype.Qee=function(t){if(this.gL.options().testId){if(!("developer"!==this.version||this.version<c.fp.yO))return s.bp(t,void 0,!0,((e={})[l.L.cR]=this.gL.options().testId,e));this.logger().warn(this.id()+"The Hive Client Version installed does not support the test id in its generated metrics")}return s.bp(t);var e},t.prototype.Yee=function(e,i,n){var o=t.Wee(n,e);return g.ErrorMonitor.ve().logError(i,this.id()),this.xee=Date.now(),r.reject(new m(E.sE,o))},t.Wee=function(t,e,i){void 0===i&&(i="status");var n=e;if(t.body)try{n=JSON.parse(t.body)[i]}catch(t){}return n},t.prototype.resolveTicketPromise=function(t){var e=this;this.Hee=Date.now(),this.logger().debug(this.id()+"resolving ticket: "+t);var i=this.bee(t);return s.bp(i,"application/json").then(function(n){return e.Kee(n,i,t,e.Hee)},function(i){return i&&-1==i.status?e.Xee():(g.ErrorMonitor.ve().logError("error resolving ticket",e.id(),{ticket:t}),r.reject(new m(E.sE,i)))}).catch(function(t){return g.ErrorMonitor.ve().logError("error parsing ticket response",e.id(),t),r.reject(new m(E.dE,t))})},t.prototype.Kee=function(t,e,i,n){var r=JSON.parse(t),o=s.$h(e,r.location);return r.version&&!this.version&&(this.version=r.version),this.xee=Date.now(),this.logger().debug(this.id()+"resolved ticket "+i+" -> "+o+" ["+(this.xee-n)+"]"),o},t.prototype.Vee=function(t,e,i){var n=this.TL(t,e);if(null!=n){var r=(new Date).getTime()-i;return r>=this.options_.warnSlowRespTimeout&&this.DL(new m(E.EE,this.id()+" The tech initialization took more than "+this.options_.warnSlowRespTimeout+" milliseconds"),n,r),o.HiveRequestFactory.registerTech(n.id,this.getName()),n}throw new m(E.sE,"error generating session")},t.prototype.TL=function(t,e){var i=new d.BN;i.RN(t);var n=new w(t,i,e,null);n.ML=!0;var r=c.fp.EO.exec(n.manifest);return null!=r?(n.Lee=r[1],n.id=r[5],n):null},t.prototype.bee=function(t){var e=-1==t.indexOf("?")?"?":"&";return this.Fee()?s.Ip(c.fp.gO,c.fp.dO,this.gL.options().playerPort,t):s.Ip(c.fp.fO,c.fp.dO,this.gL.options().playerPort,t,e,this.gL.getPluginId())},t.prototype.jee=function(){var t=this;this.Jee&&clearTimeout(this.Jee),this.Jee=setTimeout(function(){g.ErrorMonitor.ve().logError("The Lease Request is taking more than "+t.options_.warnSlowRespTimeout+" secs",t.id())},this.options_.warnSlowRespTimeout)},t.prototype.qee=function(){this.Uee=0,this.Bee=0,this.Hee=0,this.xee=0},t.prototype.logger=function(){return this.gL.logger()},t.prototype.kL=function(){this.qee()},t.prototype.Xee=function(){var t=this,e="//"+c.fp.dO+":"+this.gL.options().monitorPort+"/version.json";return this.logger().debug(this.id()+"checking if the monitor port is reachable"),s.bp(e).then(function(e){var i=JSON.parse(e);throw t.state=i.state,g.ErrorMonitor.ve().logError("Verify client state",t.id(),{state:t.state}),t.gL.addTechEvent(new p.Gl.lf(null,p.Gl.td.zp)),new m(E.pE,"state "+t.state)}).fail(function(e){if(e instanceof m)return r.reject(e);if(e&&-1==e.status){var i="client not reachable";return t.gL.addTechEvent(new p.Gl.lf(null,p.Gl.td.Wp)),t.logger().warn(t.id()+i),r.reject(new m(E.pE,i))}i="VerifyClientState error";return g.ErrorMonitor.ve().logError(i,t.id(),{error:e}),t.gL.addTechEvent(new p.Gl.lf(null,p.Gl.td.zp)),r.reject(new m(E.dE,i))})},t.prototype.Fee=function(){return this.options_.supportLegacyClient&&(!this.version||this.version.substr(0,4)<"2016")},t}();T.EL="HiveJava",e.HiveJava=T},function(t,e,i){"use strict";var n=this&&this.hu||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(20),o=i(42);!function(t){!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minVersion=o.fp.vO,e.initTimeout=6e4,e.warnSlowRespTimeout=5e3,e.supportLegacyClient=!1,e}return n(e,t),e}(r.HiveComm.Options.Tp);t.Oee=e}(t.Options||(t.Options={}))}(e.HiveComm||(e.HiveComm={}))}]),function(t){function e(n){if(i[n])return i[n].o;var r=i[n]={i:n,s:!1,o:{}};return t[n].call(r.o,r,r.o,e),r.s=!0,r.o}var i={};e.u=t,e.c=i,e.d=function(t,i,n){e.p(t,i)||Object.defineProperty(t,i,{l:!1,h:!0,get:n})},e.n=function(t){var i=t&&t.v?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.p=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.g="",e(e.m=1)}([function(t,e,i){
/*!
 *
 * Copyright 2009-2016 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e){"use strict";"function"==typeof bootstrap?bootstrap("promise",e):t.o=e()}(function(){"use strict";function t(t){return function(){return k.apply(t,arguments)}}function e(t,e){if(I&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(B)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+B+"\n");t.stack=i(o)}}function i(t){for(var e=t.split("\n"),i=[],r=0;r<e.length;++r){var s=e[r];o(s)||n(s)||!s||i.push(s)}return i.join("\n")}function n(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function r(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var i=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(i)return[i[1],Number(i[2])];var n=/.*@(.+):(\d+)$/.exec(t);return n?[n[1],Number(n[2])]:void 0}function o(t){var e=r(t);if(!e)return!1;var i=e[0],n=e[1];return i===_&&n>=A&&n<=q}function s(){if(I)try{throw new Error}catch(i){var t=i.stack.split("\n"),e=r(t[0].indexOf("@")>0?t[1]:t[2]);if(!e)return;return _=e[0],e[1]}}function a(t){return t instanceof l?t:g(t)?function(t){var e=u();return a._(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.k}(t):m(t)}function u(){function t(t){e=t,a.T&&I&&(o.source=t),P(i,function(e,i){a._(function(){t.I.apply(t,i)})},void 0),i=void 0,n=void 0}var e,i=[],n=[],r=x(u.prototype),o=x(l.prototype);if(o.I=function(t,r,o){var s=N(arguments);i?(i.push(s),"when"===r&&o[1]&&n.push(o[1])):a._(function(){e.I.apply(e,s)})},o.valueOf=function(){if(i)return o;var t=p(e);return d(t)&&(e=t),t},o.N=function(){return e?e.N():{state:"pending"}},a.T&&I)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return r.k=o,r.resolve=function(i){e||t(a(i))},r.R=function(i){e||t(m(i))},r.reject=function(i){e||t(y(i))},r.notify=function(t){e||P(n,function(e,i){a._(function(){i(t)})},void 0)},r}function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=u();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.k}function c(t){return h(function(e,i){for(var n=0,r=t.length;n<r;n++)a(t[n]).then(e,i)})}function l(t,e,i){void 0===e&&(e=function(t){return y(new Error("Promise does not support operation: "+t))}),void 0===i&&(i=function(){return{state:"unknown"}});var n=x(l.prototype);if(n.I=function(i,r,o){var s;try{s=t[r]?t[r].apply(n,o):e.call(n,r,o)}catch(t){s=y(t)}i&&i(s)},n.N=i,i){var r=i();"rejected"===r.state&&(n.exception=r.reason),n.valueOf=function(){var t=i();return"pending"===t.state||"rejected"===t.state?n:t.value}}return n}function f(t,e,i,n){return a(t).then(e,i,n)}function p(t){if(d(t)){var e=t.N();if("fulfilled"===e.state)return e.value}return t}function d(t){return t instanceof l}function g(t){return function(t){return t===Object(t)}(t)&&"function"==typeof t.then}function v(){H.length=0,j.length=0,G||(G=!0)}function y(t){var e=l({when:function(e){return e&&function(t){if(G){var e=D(j,t);-1!==e&&("object"==typeof process&&process&&"function"==typeof process.O&&a._.D(function(){var i=D(V,t);-1!==i&&(process.O("rejectionHandled",H[e],t),V.splice(i,1))}),j.splice(e,1),H.splice(e,1))}}(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return function(t,e){G&&("object"==typeof process&&process&&"function"==typeof process.O&&a._.D(function(){-1!==D(j,t)&&(process.O("unhandledRejection",e,t),V.push(t))}),j.push(t),e&&void 0!==e.stack?H.push(e.stack):H.push("(no stack) "+e))}(e,t),e}function m(t){return l({when:function(){return t},get:function(e){return t[e]},set:function(e,i){t[e]=i},delete:function(e){delete t[e]},P:function(e,i){return null==e?t.apply(void 0,i):t[e].apply(t,i)},apply:function(e,i){return t.apply(e,i)},keys:function(){return U(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function E(t,e,i){return a(t).A(e,i)}function b(t,e,i){return a(t).L(e,i)}function w(t){return f(t,function(t){var e=0,i=u();return P(t,function(n,r,o){var s;d(r)&&"fulfilled"===(s=r.N()).state?t[o]=s.value:(++e,f(r,function(n){t[o]=n,0==--e&&i.resolve(t)},i.reject,function(t){i.notify({index:o,value:t})}))},void 0),0===e&&i.resolve(t),i.k})}function T(t){if(0===t.length)return a.resolve();var e=a.defer(),i=0;return P(t,function(n,r,o){var s=t[o];i++,f(s,function(t){e.resolve(t)},function(t){0==--i&&(t.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+t.message,e.reject(t))},function(t){e.notify({index:o,value:t})})},void 0),e.k}function S(t){return f(t,function(t){return t=L(t,a),f(w(L(t,function(t){return f(t,O,O)})),function(){return t})})}var I=!1;try{throw new Error}catch(t){I=!!t.stack}var _,R,A=s(),O=function(){},C=function(){function t(){for(var t,n;i.next;)t=(i=i.next).U,i.U=void 0,(n=i.domain)&&(i.domain=void 0,n.j()),e(t,n);for(;u.length;)e(t=u.pop());r=!1}function e(e,i){try{e()}catch(e){if(s)throw i&&i.B(),setTimeout(t,0),i&&i.j(),e;setTimeout(function(){throw e},0)}i&&i.B()}var i={U:void 0,next:null},n=i,r=!1,o=void 0,s=!1,a=!1;try{a=navigator&&("Microsoft Internet Explorer"===navigator.appName||null!=navigator.appVersion.match(/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i))}catch(t){}var u=[];if(C=function(t){"undefined"!=typeof Framework&&Framework.M()?Framework.setTimeout(t,0):(n=n.next={U:t,domain:s&&process.domain,next:null},r||(r=!0,o()))},"object"==typeof process&&process&&"[object process]"===process.toString()&&process._)s=!0,o=function(){process._(t)};else if("function"!=typeof setImmediate||a)if("undefined"==typeof MessageChannel||a)o=function(){setTimeout(t,0)};else{var h=new MessageChannel;h.port1.onmessage=function(){o=c,h.port1.onmessage=t,t()};var c=function(){h.port2.postMessage(0)};o=function(){setTimeout(t,0),c()}}else o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};return C.D=function(t){u.push(t),r||(r=!0,o())},C}(),k=Function.call,N=t(Array.prototype.slice),P=t(Array.prototype.reduce||function(t,e){var i=0,n=this.length;if(1===arguments.length)for(;;){if(i in this){e=this[i++];break}if(++i>=n)throw new TypeError}for(;i<n;i++)i in this&&(e=t(e,this[i],i));return e}),D=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),L=t(Array.prototype.map||function(t,e){var i=this,n=[];return P(i,function(r,o,s){n.push(t.call(e,o,s,i))},void 0),n}),x=Object.create||function(t){function e(){}return e.prototype=t,new e},M=t(Object.prototype.hasOwnProperty),U=Object.keys||function(t){var e=[];for(var i in t)M(t,i)&&e.push(i);return e},F=t(Object.prototype.toString);R="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var B="From previous event:";a.resolve=a,a._=C,a.T=!1,"object"==typeof process&&process&&process.F&&process.F.q&&(a.T=!0),a.defer=u,u.prototype.Y=function(){var t=this;return function(e,i){e?t.reject(e):arguments.length>2?t.resolve(N(arguments,1)):t.resolve(i)}},a.Promise=h,a.k=h,h.race=c,h.all=w,h.reject=y,h.resolve=a,a.J=function(t){return t},l.prototype.J=function(){return this},a.join=function(t,e){return a(t).join(e)},l.prototype.join=function(t){return a([this,t]).A(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},a.race=c,l.prototype.race=function(){return this.then(a.race)},a.X=l,l.prototype.toString=function(){return"[object Promise]"},l.prototype.then=function(t,i,n){function r(e){try{return"function"==typeof t?t(e):e}catch(t){return y(t)}}function o(t){return"function"==typeof n?n(t):t}var s=this,h=u(),c=!1;return a._(function(){s.I(function(t){c||(c=!0,h.resolve(r(t)))},"when",[function(t){c||(c=!0,h.resolve(function(t){if("function"==typeof i){e(t,s);try{return i(t)}catch(t){return y(t)}}return y(t)}(t)))}])}),s.I(void 0,"when",[void 0,function(t){var e,i=!1;try{e=o(t)}catch(t){if(i=!0,!a.onerror)throw t;a.onerror(t)}i||h.notify(e)}]),h.k},a.G=function(t,e){return a(t).G(e)},l.prototype.G=function(t){return t=a(t),this.then(function(e){return t.W(e).K(e)})},a.when=f,l.prototype.K=function(t){return this.then(function(){return t})},a.K=function(t,e){return a(t).K(e)},l.prototype.$=function(t){return this.then(function(){throw t})},a.$=function(t,e){return a(t).$(e)},a.Z=p,a.tt=d,a.et=g,a.nt=function(t){return d(t)&&"pending"===t.N().state},l.prototype.nt=function(){return"pending"===this.N().state},a.rt=function(t){return!d(t)||"fulfilled"===t.N().state},l.prototype.rt=function(){return"fulfilled"===this.N().state},a.ot=function(t){return d(t)&&"rejected"===t.N().state},l.prototype.ot=function(){return"rejected"===this.N().state};var H=[],j=[],V=[],G=!0;a.it=v,a.st=function(){return H.slice()},a.ut=function(){v(),G=!1},v(),a.reject=y,a.R=m,a.at=function(t){return l({C:function(){}},function(e,i){return b(t,e,i)},function(){return a(t).N()})},a.A=E,l.prototype.A=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},a.async=function(t){return function(){function e(t,e){var o;if("undefined"==typeof StopIteration){try{o=i[t](e)}catch(t){return y(t)}return o.done?a(o.value):f(o.value,n,r)}try{o=i[t](e)}catch(t){return function(t){return"[object StopIteration]"===F(t)||t instanceof R}(t)?a(t.value):y(t)}return f(o,n,r)}var i=t.apply(this,arguments),n=e.bind(e,"next"),r=e.bind(e,"throw");return n()}},a.ct=function(t){a.done(a.async(t)())},a.pt=function(t){throw new R(t)},a.ft=function(t){return function(){return E([this,w(arguments)],function(e,i){return t.apply(e,i)})}},a.L=b,l.prototype.L=function(t,e){var i=this,n=u();return a._(function(){i.I(n.resolve,t,e)}),n.k},a.get=function(t,e){return a(t).L("get",[e])},l.prototype.get=function(t){return this.L("get",[t])},a.set=function(t,e,i){return a(t).L("set",[e,i])},l.prototype.set=function(t,e){return this.L("set",[t,e])},a.lt=a.delete=function(t,e){return a(t).L("delete",[e])},l.prototype.lt=l.prototype.delete=function(t){return this.L("delete",[t])},a.dt=a.P=function(t,e,i){return a(t).L("post",[e,i])},l.prototype.dt=l.prototype.P=function(t,e){return this.L("post",[t,e])},a.send=a.ht=a.yt=function(t,e){return a(t).L("post",[e,N(arguments,2)])},l.prototype.send=l.prototype.ht=l.prototype.yt=function(t){return this.L("post",[t,N(arguments,1)])},a.vt=function(t,e){return a(t).L("apply",[void 0,e])},l.prototype.vt=function(t){return this.L("apply",[void 0,t])},a.gt=a.W=function(t){return a(t).L("apply",[void 0,N(arguments,1)])},l.prototype.W=function(){return this.L("apply",[void 0,N(arguments)])},a.Et=function(t){var e=a(t),i=N(arguments,1);return function(){return e.L("apply",[this,i.concat(N(arguments))])}},l.prototype.Et=function(){var t=this,e=N(arguments);return function(){return t.L("apply",[this,e.concat(N(arguments))])}},a.keys=function(t){return a(t).L("keys",[])},l.prototype.keys=function(){return this.L("keys",[])},a.all=w,l.prototype.all=function(){return w(this)},a.Tt=T,l.prototype.Tt=function(){return T(this)},a.St=function(t,e,i){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("allResolved is deprecated, use allSettled instead.",new Error("").stack),t.apply(t,arguments)}}(S),l.prototype.St=function(){return S(this)},a.V=function(t){return a(t).V()},l.prototype.V=function(){return this.then(function(t){return w(L(t,function(t){function e(){return t.N()}return(t=a(t)).then(e,e)}))})},a.fail=a.catch=function(t,e){return a(t).then(void 0,e)},l.prototype.fail=l.prototype.catch=function(t){return this.then(void 0,t)},a.progress=function(t,e){return a(t).then(void 0,void 0,e)},l.prototype.progress=function(t){return this.then(void 0,void 0,t)},a._t=a.finally=function(t,e){return a(t).finally(e)},l.prototype._t=l.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=a(t),this.then(function(e){return t.W().then(function(){return e})},function(e){return t.W().then(function(){throw e})})},a.done=function(t,e,i,n){return a(t).done(e,i,n)},l.prototype.done=function(t,i,n){var r=function(t){a._(function(){if(e(t,o),!a.onerror)throw t;a.onerror(t)})},o=t||i||n?this.then(t,i,n):this;"object"==typeof process&&process&&process.domain&&(r=process.domain.bind(r)),o.then(void 0,r)},a.timeout=function(t,e,i){return a(t).timeout(e,i)},l.prototype.timeout=function(t,e){var i=u(),n=setTimeout(function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),i.reject(e)},t);return this.then(function(t){clearTimeout(n),i.resolve(t)},function(t){clearTimeout(n),i.reject(t)},i.notify),i.k},a.delay=function(t,e){return void 0===e&&(e=t,t=void 0),a(t).delay(e)},l.prototype.delay=function(t){return this.then(function(e){var i=u();return setTimeout(function(){i.resolve(e)},t),i.k})},a.bt=function(t,e){return a(t).bt(e)},l.prototype.bt=function(t){var e=u(),i=N(t);return i.push(e.Y()),this.vt(i).fail(e.reject),e.k},a.It=function(t){var e=N(arguments,1);return a(t).bt(e)},l.prototype.It=function(){var t=N(arguments),e=u();return t.push(e.Y()),this.vt(t).fail(e.reject),e.k},a.wt=a.Nt=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=N(arguments,1);return function(){var i=e.concat(N(arguments)),n=u();return i.push(n.Y()),a(t).vt(i).fail(n.reject),n.k}},l.prototype.wt=l.prototype.Nt=function(){var t=N(arguments);return t.unshift(this),a.Nt.apply(void 0,t)},a.kt=function(t,e){var i=N(arguments,2);return function(){var n=i.concat(N(arguments)),r=u();return n.push(r.Y()),a(function(){return t.apply(e,arguments)}).vt(n).fail(r.reject),r.k}},l.prototype.kt=function(){var t=N(arguments,0);return t.unshift(this),a.kt.apply(void 0,t)},a.Rt=a.xt=function(t,e,i){return a(t).xt(e,i)},l.prototype.Rt=l.prototype.xt=function(t,e){var i=N(e||[]),n=u();return i.push(n.Y()),this.L("post",[t,i]).fail(n.reject),n.k},a.Ot=a.Dt=a.Pt=function(t,e){var i=N(arguments,2),n=u();return i.push(n.Y()),a(t).L("post",[e,i]).fail(n.reject),n.k},l.prototype.Ot=l.prototype.Dt=l.prototype.Pt=function(t){var e=N(arguments,1),i=u();return e.push(i.Y()),this.L("post",[t,e]).fail(i.reject),i.k},a.H=function(t,e){return a(t).H(e)},l.prototype.H=function(t){if(!t)return this;this.then(function(e){a._(function(){t(null,e)})},function(e){a._(function(){t(e)})})},a.Ct=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var q=s();return a})},function(t,e,i){"use strict";var n=this&&this.At||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(0),o=i(2),s=i(3),a=o.Vt.Lt;-1==a&&(a=3e4);var u=function(t){function e(e,i){var n=t.call(this,i)||this;return n.pluginName="bitmovin",n.Ht=[],n.Ut=void 0,n.player=e,n.player.originalSetup=n.player.setup,n.player.jt=n.player.load,n.player.load=function(t,e,i){return n.player.closeHiveSession(),n.player.jt(t,e,i)},n.player.closeHiveSession=function(t){void 0===t&&(t=!0),n.closeHiveSession(),t&&n.Bt()},n.player.setup=function(t,e){n.closeHiveSession(),t.source.hls_ticket&&t.source.dash_ticket&&(n.logger().warn("The Hive plugin does not support providing a ticket for both DASH and HLS simultaneously. Using HLS source."),delete t.source.dash_ticket);var i=t.source.hls_ticket?"hls":t.source.dash_ticket?"dash":"",o=t.source.hls_ticket||t.source.dash_ticket;return o?(delete t.source[i+"_ticket"],n.resolveTicketPromise(o).timeout(a,n.loggerId+"Hive Plugin initialization timeout").then(function(r){return n.Mt(),r.tech.getName()===HiveComm.TechName.HiveJS&&(t.network={sendHttpRequest:n.sendHttpRequest(r.id)}),t.source[i]=r.manifest,n.player.originalSetup(t,e)}).catch(function(t){return n.onSetupTimeout(),n.resetSession(),n.logger().debug(n.loggerId+"error occurred resolving the ticket - "+(t.stack||t.message||t)),r.reject(t)})):(n.logger().debug(n.loggerId+"No Hive ticket provided, falling back to originalSetup"),n.player.originalSetup(t,e))},n.logger().notice(n.loggerId+"registered plugin [name:"+n.getPluginName()+"][id: "+n.getPluginId()+"][version: "+n.getPluginVersion()+"]"),n}return n(e,t),e.prototype.sendHttpRequest=function(t){var e=this;return function(i,n){return e.logger().debug("sendHttpRequest called",i,n),e.getPotentialSession()&&i.match(/manifest\/dash|manifest\/hls|audio|video/)?(e.logger().debug("Using HiveRequest",i,n),new s.Ft(n,t)):null}},e.prototype.registerEvent=function(t,e){this.player.addEventHandler(t,e),this.Ht.push({qt:t,Qt:e})},e.prototype.Bt=function(){var t=this;this.logger().debug(this.loggerId+"Unregistering events"),this.Ht.forEach(function(e){var i=e.qt,n=e.Qt;t.player.removeEventHandler(i,n)}),this.Ht.length=0},e.prototype.Mt=function(){var t=this;this.Ht.length||(this.registerEvent("onReady",function(){t.logger().debug("bitmovin.player.EVENT.ON_READY"),t.onActivateSession()&&(!!t.player.getConfig().playback&&t.player.getConfig().playback.auto&&t.onStartBuffering(!1),t.getActiveSession()&&(t.Yt=new HiveComm.HivePlayerExtendedStats))}),this.registerEvent("onPlay",function(){t.logger().debug("bitmovin.player.EVENT.ON_PLAY"),t.Jt(0)}),this.registerEvent("onError",function(e){t.logger().debug("bitmovin.player.EVENT.ON_ERROR");var i=-1,n=null;if(null!=e)try{i=e.code,n=JSON.stringify(e,null)}catch(t){n=e}t.onError(i,n),t.Bt()}),this.registerEvent("onPlaybackFinished",function(){t.logger().debug("bitmovin.player.EVENT.ON_PLAYBACK_FINISHED"),t.onEventFeedback(4,{code:1})}),this.registerEvent("onSeek",function(){t.logger().debug("bitmovin.player.EVENT.ON_SEEK"),t.onEventFeedback(3)}),this.registerEvent("onFullscreenEnter",function(){t.logger().debug("bitmovin.player.EVENT.ON_FULLSCREEN_ENTER"),t.onEventFeedback(7,{value:!0})}),this.registerEvent("onFullscreenExit",function(){t.logger().debug("bitmovin.player.EVENT.ON_FULLSCREEN_EXIT"),t.onEventFeedback(7,{value:!1})}),this.registerEvent("onSegmentRequestFinished",function(e){if(t.Yt){var i=e.mimeType.indexOf("video")>=0;if(void 0===t.Xt){var n=t.player.getPlaybackVideoData();n&&n.bitrate&&t.Gt(n.bitrate)}if(e.success){if(!e.isInit&&t.Xt){var r=8*e.size/e.downloadTime;t.Yt.accountCompleted(i,t.Xt,e.size),t.Yt.updateBandwidth(r)}}else t.Yt.accountFailed(i,t.Xt)}}),this.registerEvent("onDestroy",function(){t.logger().debug("bitmovin.player.EVENT.ON_DESTROY"),t.player.closeHiveSession(!1)}),0===this.getPlayerVersion().indexOf("7")?this.Kt():0===this.getPlayerVersion().indexOf("6")&&this.Wt())},e.prototype.Wt=function(){var t=this;this.registerEvent("onStartBuffering",function(){t.logger().debug("bitmovin.player.EVENT.ON_START_BUFFERING"),t.onStartBuffering()}),this.registerEvent("onStopBuffering",function(){t.logger().debug("bitmovin.player.EVENT.ON_STOP_BUFFERING"),t.onEndBuffering()}),this.registerEvent("onPause",function(){t.logger().debug("bitmovin.player.EVENT.ON_PAUSE"),t.Jt(2)}),this.registerEvent("onVideoDownloadQualityChange",function(e){t.getStreamProtocol()===StreamProtocol.zt?t.Gt(e.targetQuality):t.Gt(e.targetQuality.split("br")[1])})},e.prototype.Kt=function(){var t=this;this.registerEvent("onStallStarted",function(){t.logger().debug("bitmovin.player.EVENT.ON_STALL_STARTED"),t.onStartBuffering()}),this.registerEvent("onStallEnded",function(){t.logger().debug("bitmovin.player.EVENT.ON_STALL_ENDED"),t.onEndBuffering()}),this.registerEvent("onPaused",function(){t.logger().debug("bitmovin.player.EVENT.ON_PAUSED"),t.Jt(2)}),this.registerEvent("onVideoDownloadQualityChanged",function(e){t.Gt(e.targetQuality&&e.targetQuality.bitrate||e.targetQualityId&&e.targetQualityId.bitrate)})},e.prototype.Gt=function(t){this.logger().debug("newBitrate",t),this.Xt&&t>this.Xt&&this.Yt?this.Yt.bitrateSwitchUp():this.Xt&&this.Xt>t&&this.Yt&&this.Yt.bitrateSwitchDown(),this.Xt=t},e.prototype.Jt=function(t){null!=this.Ut&&this.Ut===t||(this.onEventFeedback(t),this.Ut=t)},e.prototype.getPlayerSource=function(){var t=this.getStreamProtocol();return t===StreamProtocol.zt?this.player.getConfig().source.hls:t===StreamProtocol.DASH?this.player.getConfig().source.dash:void 0},e.prototype.getCurrentTime=function(){return null!=this.player?Math.round(1e3*this.player.getCurrentTime()):0},e.prototype.getBufferLen=function(){return null!=this.player&&null!=this.player.getVideoBufferLength&&this.player.getVideoBufferLength()>0?Math.max(0,Math.round(1e3*this.player.getVideoBufferLength())):0},e.prototype.getWindowSize=function(){if(this.player){var t=this.player.getFigure();return{width:t.offsetWidth,height:t.offsetHeight}}},e.prototype.isFullscreen=function(){return this.player.isFullscreen()},e.prototype.isLive=function(){return this.player.isLive()},e.prototype.isActive=function(){return!0},e.prototype.getStreamProtocol=function(){if(this.player){var t=this.player.getStreamType();if("hls"===t)return StreamProtocol.zt;if("dash"===t)return StreamProtocol.DASH}return null},e.prototype.getExtendedStats=function(){var t=this.Yt;return this.Yt=new HiveComm.HivePlayerExtendedStats,t},e.prototype.getPluginName=function(){return this.pluginName},e.prototype.getPluginVersion=function(){return this.getCommVersion()},e.prototype.getPlayerTech=function(){if(this.player)return this.player.getPlayerType()},e.prototype.getPlayerVersion=function(){return void 0!==bitmovin.player.version?bitmovin.player.version:this.player.getVersion()},e}(HiveComm.Plugin);e.$t=u;bitmovin.initHiveSDN=function(t,e){new u(t,e)}},function(t,e,i){"use strict";var n=function(){return function(){}}();n.Zt="undefined"!=typeof HIVE_COMM_JS&&HIVE_COMM_JS,n.te="undefined"!=typeof HIVE_COMM_JAVA&&HIVE_COMM_JAVA,n.ee="undefined"!=typeof HIVE_COMM_JS_PROXY&&HIVE_COMM_JS_PROXY,n.ne="4.1.0",n.re="bitmovin",n.oe="undefined"!=typeof HIVE_SERVICE_ENDPOINT_TEST&&HIVE_SERVICE_ENDPOINT_TEST,n.ie="undefined"==typeof HIVE_PERSISTENT_IDENTITY||HIVE_PERSISTENT_IDENTITY,n.se="undefined"!=typeof INCLUDE_VOD_CACHE&&INCLUDE_VOD_CACHE,n.ue="undefined"!=typeof INCLUDE_UDP_BROADCAST&&INCLUDE_UDP_BROADCAST,n.ae="undefined"!=typeof INCLUDE_UDP_LEADER_ELECTION&&INCLUDE_UDP_LEADER_ELECTION,n.ce="undefined"!=typeof LEADER_SCORE_EQUALITY&&LEADER_SCORE_EQUALITY,n.pe="undefined"!=typeof INCLUDE_DEFAULT_NETWORK&&INCLUDE_DEFAULT_NETWORK,n.fe="undefined"!=typeof HIVE_RESTRICTED_CONNINFO&&HIVE_RESTRICTED_CONNINFO,n.le="undefined"!=typeof HIVE_DISCOVERY?HIVE_DISCOVERY:"ws://127.0.0.1:8000/hive",n.de="undefined"!=typeof P2PDispatcherDetailedLog&&P2PDispatcherDetailedLog,n.he="undefined"!=typeof NetworkManagerDetailedLog&&NetworkManagerDetailedLog,n.ye="undefined"!=typeof ATATUS_KEY?ATATUS_KEY:"592835a6b4204dd197c00488610003e0",n.ve="undefined"!=typeof ATATUS_VERSION?ATATUS_VERSION:"0.8",n.ge="undefined"==typeof ATATUS_DEFAULT_ENABLED||ATATUS_DEFAULT_ENABLED,n.Ee=5,n.Lt="undefined"!=typeof HIVE_PLUGIN_TIMEOUT?HIVE_PLUGIN_TIMEOUT:-1,n.me="undefined"==typeof HIVE_DETECT_PRIVATEIP||HIVE_DETECT_PRIVATEIP,n.Te="undefined"==typeof HIVE_STORE_IP_DB||HIVE_STORE_IP_DB,e.Vt=n},function(t,e,i){"use strict";var n=i(4),r=i(0),o=function(){function t(t,e){this.sessionId=e,this.request=t}return t.prototype.getResponse=function(){var t=this,e=r.defer();return this.Se=new n._e({xhrSetup:function(e,i){(e=new HiveComm.HiveRequestFactory(t.sessionId)).open(t.request.method,i.url,!0);for(var n=0,r=t.request.headers;n<r.length;n++){var o=r[n];e.setRequestHeader(o.name,o.value)}return e.responseType=t.request.responseType,e}}),this.Se.load(this.request,{},{onSuccess:function(i,n,r){console.log("SUCCESS REQUEST",i,n,r),e.resolve({request:t.request,url:t.request.url,headers:t.request.headers,status:i.status,length:i.data.length||i.data.byteLength,statusText:"OK",body:i.data})},onError:function(t,i){var n=t.code;t.text,e.reject(n)},onTimeout:function(t,i){e.reject("timeout")}}),e.k},t.prototype.setProgressListener=function(t){},t.prototype.cancel=function(){this.Se&&this.Se.abort()},t}();e.Ft=o},function(t,e,i){"use strict";var n=function(){function t(t){this.loggerId="[HiveXhrLoader]",this.be=t,t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null,this.xhr=null},t.prototype.abort=function(){var t=this.loader||this.xhr;t&&4!==t.readyState&&(this.stats.Ie=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,i){this.context=t,this.config=e,this.callbacks=i,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.we()},t.prototype.we=function(){this.xhr=null;var t=this.context,e=this.stats;e.tfirst=0,e.loaded=0,this.xhrSetup?this.xhr=this.xhrSetup(this.xhr,t):HiveComm.logError("Hive XHR setup missing",this.loggerId),this.xhr.onreadystatechange=this.readystatechange.bind(this),this.xhr.onprogress=this.loadprogress.bind(this),this.config.timeout&&(this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout)),this.xhr.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,i=e.readyState,n=this.stats,r=this.context,o=this.config;if(!n.Ie&&i>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest)),4===i){var s=e.status;if(s>=200&&s<300){n.tload=Math.max(n.tfirst,performance.now());var a=void 0,u=void 0;"arraybuffer"===r.responseType?u=(a=e.response).byteLength:u=(a=e.responseText).length,n.loaded=n.total=u;var h={url:e.responseURL,data:a};this.callbacks.onSuccess(h,n,r)}else n.retry>=o.Ne||s>=400&&s<499?(console.warn(s+" while loading "+r.url),this.callbacks.onError({code:s,text:e.statusText},r)):(console.warn(s+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.we.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.ke),n.retry++)}else o.timeout&&(this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout))},t.prototype.loadtimeout=function(){console.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)},t.prototype.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total);var i=this.callbacks.onProgress;i&&i(e,this.context,null)},t}();e._e=n}])}]);