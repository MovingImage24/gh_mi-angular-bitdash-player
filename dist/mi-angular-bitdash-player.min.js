!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=66)}([function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(1),s=i(11),a=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-container",components:[]},i.config),i.componentsToAdd=[],i.componentsToRemove=[],i}return n(e,t),e.prototype.addComponent=function(t){this.config.components.push(t),this.componentsToAdd.push(t)},e.prototype.removeComponent=function(t){return null!=s.ArrayUtils.remove(this.config.components,t)&&(this.componentsToRemove.push(t),!0)},e.prototype.getComponents=function(){return this.config.components},e.prototype.removeComponents=function(){for(var t=0,e=this.getComponents().slice();t<e.length;t++){var i=e[t];this.removeComponent(i)}},e.prototype.updateComponents=function(){for(var t;t=this.componentsToRemove.shift();)t.getDomElement().remove();for(;t=this.componentsToAdd.shift();)this.innerContainerElement.append(t.getDomElement())},e.prototype.toDomElement=function(){var t=new o.DOM(this.config.tag,{id:this.config.id,class:this.getCssClasses()}),e=new o.DOM(this.config.tag,{class:this.prefixCss("container-wrapper")});this.innerContainerElement=e;for(var i=0,n=this.config.components;i<n.length;i++){var r=n[i];this.componentsToAdd.push(r)}return this.updateComponents(),t.append(e),t},e}(r.Component);e.Container=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){if(this.document=document,t instanceof Array){if(t.length>0&&t[0]instanceof HTMLElement){var i=t;this.elements=i}}else if(t instanceof HTMLElement){var n=t;this.elements=[n]}else if(t instanceof Document)this.elements=null;else if(e){var r=t,n=document.createElement(r);for(var o in e){var s=e[o];n.setAttribute(o,s)}this.elements=[n]}else{var a=t;this.elements=this.findChildElements(a)}}return Object.defineProperty(t.prototype,"length",{get:function(){return this.elements?this.elements.length:0},enumerable:!0,configurable:!0}),t.prototype.getElements=function(){return this.get()},t.prototype.get=function(t){return void 0===t?this.elements:!this.elements||t>=this.elements.length||t<-this.elements.length?void 0:t<0?this.elements[this.elements.length-t]:this.elements[t]},t.prototype.forEach=function(t){this.elements&&this.elements.forEach(function(e){t(e)})},t.prototype.findChildElementsOfElement=function(t,e){var i=t.querySelectorAll(e);return[].slice.call(i)},t.prototype.findChildElements=function(t){var e=this,i=[];return this.elements?(this.forEach(function(n){i=i.concat(e.findChildElementsOfElement(n,t))}),i):this.findChildElementsOfElement(document,t)},t.prototype.find=function(e){return new t(this.findChildElements(e))},t.prototype.html=function(t){return arguments.length>0?this.setHtml(t):this.getHtml()},t.prototype.getHtml=function(){return this.elements[0].innerHTML},t.prototype.setHtml=function(t){return void 0!==t&&null!=t||(t=""),this.forEach(function(e){e.innerHTML=t}),this},t.prototype.empty=function(){return this.forEach(function(t){t.innerHTML=""}),this},t.prototype.val=function(){var t=this.elements[0];if(t instanceof HTMLSelectElement||t instanceof HTMLInputElement)return t.value;throw new Error("val() not supported for "+typeof t)},t.prototype.attr=function(t,e){return arguments.length>1?this.setAttr(t,e):this.getAttr(t)},t.prototype.getAttr=function(t){return this.elements[0].getAttribute(t)},t.prototype.setAttr=function(t,e){return this.forEach(function(i){i.setAttribute(t,e)}),this},t.prototype.data=function(t,e){return arguments.length>1?this.setData(t,e):this.getData(t)},t.prototype.getData=function(t){return this.elements[0].getAttribute("data-"+t)},t.prototype.setData=function(t,e){return this.forEach(function(i){i.setAttribute("data-"+t,e)}),this},t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.forEach(function(e){t.forEach(function(t){t.elements.forEach(function(i,n){e.appendChild(t.elements[n])})})}),this},t.prototype.remove=function(){this.forEach(function(t){var e=t.parentNode;e&&e.removeChild(t)})},t.prototype.offset=function(){var t=this.elements[0],e=t.getBoundingClientRect(),i=document.body.parentElement.getBoundingClientRect();return{top:e.top-i.top,left:e.left-i.left}},t.prototype.width=function(){return this.elements[0].offsetWidth},t.prototype.height=function(){return this.elements[0].offsetHeight},t.prototype.on=function(t,e){var i=this;return t.split(" ").forEach(function(t){null==i.elements?i.document.addEventListener(t,e):i.forEach(function(i){i.addEventListener(t,e)})}),this},t.prototype.off=function(t,e){var i=this;return t.split(" ").forEach(function(t){null==i.elements?i.document.removeEventListener(t,e):i.forEach(function(i){i.removeEventListener(t,e)})}),this},t.prototype.addClass=function(t){return this.forEach(function(e){if(e.classList){var i=t.split(" ").filter(function(t){return t.length>0});i.length>0&&(n=e.classList).add.apply(n,i)}else e.className+=" "+t;var n}),this},t.prototype.removeClass=function(t){return this.forEach(function(e){if(e.classList){var i=t.split(" ").filter(function(t){return t.length>0});i.length>0&&(n=e.classList).remove.apply(n,i)}else e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ");var n}),this},t.prototype.hasClass=function(t){var e=!1;return this.forEach(function(i){i.classList?i.classList.contains(t)&&(e=!0):new RegExp("(^| )"+t+"( |$)","gi").test(i.className)&&(e=!0)}),e},t.prototype.css=function(t,e){if("string"==typeof t){var i=t;return 2===arguments.length?this.setCss(i,e):this.getCss(i)}var n=t;return this.setCssCollection(n)},t.prototype.getCss=function(t){return getComputedStyle(this.elements[0])[t]},t.prototype.setCss=function(t,e){return this.forEach(function(i){i.style[t]=e}),this},t.prototype.setCssCollection=function(t){return this.forEach(function(e){Object.assign(e.style,t)}),this},t}();e.DOM=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(72),r=i(1),o=i(3),s=function(){function t(t){void 0===t&&(t={}),this.componentEvents={onShow:new o.EventDispatcher,onHide:new o.EventDispatcher,onHoverChanged:new o.EventDispatcher},this.config=this.mergeConfig(t,{tag:"div",id:"mi-wbc-id-"+n.Guid.next(),cssPrefix:"mi-wbc",cssClass:"ui-component",cssClasses:[],hidden:!1},{})}return t.prototype.initialize=function(){this.hidden=this.config.hidden,this.isHidden()&&(this.hidden=!1,this.hide())},t.prototype.configure=function(t,e){var i=this;this.onShow.subscribe(function(){e.onComponentShow.dispatch(i)}),this.onHide.subscribe(function(){e.onComponentHide.dispatch(i)}),this.getDomElement().on("mouseenter",function(){i.onHoverChangedEvent(!0)}),this.getDomElement().on("mouseleave",function(){i.onHoverChangedEvent(!1)})},t.prototype.release=function(){},t.prototype.toDomElement=function(){return new r.DOM(this.config.tag,{id:this.config.id,class:this.getCssClasses()})},t.prototype.getDomElement=function(){return this.element||(this.element=this.toDomElement()),this.element},t.prototype.mergeConfig=function(t,e,i){return Object.assign({},i,e,t)},t.prototype.getCssClasses=function(){var t=this,e=[this.config.cssClass].concat(this.config.cssClasses);return e=e.map(function(e){return t.prefixCss(e)}),e.join(" ").trim()},t.prototype.prefixCss=function(t){return this.config.cssPrefix+"-"+t},t.prototype.getConfig=function(){return this.config},t.prototype.hide=function(){this.hidden||(this.hidden=!0,this.getDomElement().addClass(this.prefixCss(t.CLASS_HIDDEN)),this.onHideEvent())},t.prototype.show=function(){this.hidden&&(this.getDomElement().removeClass(this.prefixCss(t.CLASS_HIDDEN)),this.hidden=!1,this.onShowEvent())},t.prototype.isHidden=function(){return this.hidden},t.prototype.isShown=function(){return!this.isHidden()},t.prototype.toggleHidden=function(){this.isHidden()?this.show():this.hide()},t.prototype.isHovered=function(){return this.hovered},t.prototype.onShowEvent=function(){this.componentEvents.onShow.dispatch(this)},t.prototype.onHideEvent=function(){this.componentEvents.onHide.dispatch(this)},t.prototype.onHoverChangedEvent=function(t){this.hovered=t,this.componentEvents.onHoverChanged.dispatch(this,{hovered:t})},Object.defineProperty(t.prototype,"onShow",{get:function(){return this.componentEvents.onShow.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHide",{get:function(){return this.componentEvents.onHide.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHoverChanged",{get:function(){return this.componentEvents.onHoverChanged.getEvent()},enumerable:!0,configurable:!0}),t}();s.CLASS_HIDDEN="hidden",e.Component=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(11),o=function(){function t(){this.listeners=[]}return t.prototype.subscribe=function(t){this.listeners.push(new s(t))},t.prototype.subscribeOnce=function(t){this.listeners.push(new s(t,!0))},t.prototype.subscribeRateLimited=function(t,e){this.listeners.push(new a(t,e))},t.prototype.unsubscribe=function(t){for(var e=0;e<this.listeners.length;e++){var i=this.listeners[e];if(i.listener===t)return r.ArrayUtils.remove(this.listeners,i),!0}return!1},t.prototype.unsubscribeAll=function(){this.listeners=[]},t.prototype.dispatch=function(t,e){void 0===e&&(e=null);for(var i=[],n=this.listeners.slice(0),o=0,s=n;o<s.length;o++){var a=s[o];a.fire(t,e),a.isOnce()&&i.push(a)}for(var h=0,u=i;h<u.length;h++){var c=u[h];r.ArrayUtils.remove(this.listeners,c)}},t.prototype.getEvent=function(){return this},t}();e.EventDispatcher=o;var s=function(){function t(t,e){void 0===e&&(e=!1),this.eventListener=t,this.once=e}return Object.defineProperty(t.prototype,"listener",{get:function(){return this.eventListener},enumerable:!0,configurable:!0}),t.prototype.fire=function(t,e){this.eventListener(t,e)},t.prototype.isOnce=function(){return this.once},t}(),a=function(t){function e(e,i){var n=t.call(this,e)||this;return n.rateMs=i,n.lastFireTime=0,n.rateLimitingEventListener=function(t,e){Date.now()-n.lastFireTime>n.rateMs&&(n.fireSuper(t,e),n.lastFireTime=Date.now())},n}return n(e,t),e.prototype.fireSuper=function(e,i){t.prototype.fire.call(this,e,i)},e.prototype.fire=function(t,e){this.rateLimitingEventListener(t,e)},e}(s)},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=function(t){function e(e){var i=t.call(this,e)||this;return i.settingsManager=e.settingsManager,i.overlay=e.overlay,i}return n(e,t),e.prototype.toggleOverlayClass=function(t){this.currentCssClass&&(this.overlay.getDomElement().removeClass(this.currentCssClass),this.currentCssClass=null),t&&(this.currentCssClass=this.prefixCss(t),this.overlay.getDomElement().addClass(this.currentCssClass))},e}(r.SelectBox);e.SubtitleSettingSelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),o=i(3),s=function(t){function e(e){var i=t.call(this,e)||this;i.toggleButtonEvents={onToggle:new o.EventDispatcher,onToggleOn:new o.EventDispatcher,onToggleOff:new o.EventDispatcher};var n={cssClass:"ui-togglebutton",onClass:"on",offClass:"off"};return i.config=i.mergeConfig(e,n,i.config),i}return n(e,t),e.prototype.configure=function(t,e){var i=this.getConfig();this.getDomElement().addClass(this.prefixCss(i.offClass))},e.prototype.on=function(){if(this.isOff()){var t=this.getConfig();this.onState=!0,this.getDomElement().removeClass(this.prefixCss(t.offClass)),this.getDomElement().addClass(this.prefixCss(t.onClass)),this.onToggleEvent(),this.onToggleOnEvent()}},e.prototype.off=function(){if(this.isOn()){var t=this.getConfig();this.onState=!1,this.getDomElement().removeClass(this.prefixCss(t.onClass)),this.getDomElement().addClass(this.prefixCss(t.offClass)),this.onToggleEvent(),this.onToggleOffEvent()}},e.prototype.toggle=function(){this.isOn()?this.off():this.on()},e.prototype.isOn=function(){return this.onState},e.prototype.isOff=function(){return!this.isOn()},e.prototype.onClickEvent=function(){t.prototype.onClickEvent.call(this),this.onToggleEvent()},e.prototype.onToggleEvent=function(){this.toggleButtonEvents.onToggle.dispatch(this)},e.prototype.onToggleOnEvent=function(){this.toggleButtonEvents.onToggleOn.dispatch(this)},e.prototype.onToggleOffEvent=function(){this.toggleButtonEvents.onToggleOff.dispatch(this)},Object.defineProperty(e.prototype,"onToggle",{get:function(){return this.toggleButtonEvents.onToggle.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onToggleOn",{get:function(){return this.toggleButtonEvents.onToggleOn.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onToggleOff",{get:function(){return this.toggleButtonEvents.onToggleOff.getEvent()},enumerable:!0,configurable:!0}),e}(r.Button);e.ToggleButton=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(1),s=i(3),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.labelEvents={onClick:new s.EventDispatcher,onTextChanged:new s.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-label"},i.config),i.text=i.config.text,i}return n(e,t),e.prototype.toDomElement=function(){var t=this,e=new o.DOM("span",{id:this.config.id,class:this.getCssClasses()}).html(this.text);return e.on("click",function(){t.onClickEvent()}),e},e.prototype.setText=function(t){this.text=t,this.getDomElement().html(t),this.onTextChangedEvent(t)},e.prototype.getText=function(){return this.text},e.prototype.clearText=function(){this.getDomElement().html(""),this.onTextChangedEvent(null)},e.prototype.isEmpty=function(){return!this.text},e.prototype.onClickEvent=function(){this.labelEvents.onClick.dispatch(this)},e.prototype.onTextChangedEvent=function(t){this.labelEvents.onTextChanged.dispatch(this,t)},Object.defineProperty(e.prototype,"onClick",{get:function(){return this.labelEvents.onClick.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTextChanged",{get:function(){return this.labelEvents.onTextChanged.getEvent()},enumerable:!0,configurable:!0}),e}(r.Component);e.Label=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(1),s=i(3),a=function(t){function e(e){var i=t.call(this,e)||this;return i.buttonEvents={onClick:new s.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-button"},i.config),i}return n(e,t),e.prototype.toDomElement=function(){var t=this,e=new o.DOM("button",{type:"button",id:this.config.id,class:this.getCssClasses()}).append(new o.DOM("span",{class:this.prefixCss("label")}).html(this.config.text));return e.on("click",function(){t.onClickEvent()}),e},e.prototype.setText=function(t){this.getDomElement().find("."+this.prefixCss("label")).html(t)},e.prototype.onClickEvent=function(){this.buttonEvents.onClick.dispatch(this)},Object.defineProperty(e.prototype,"onClick",{get:function(){return this.buttonEvents.onClick.getEvent()},enumerable:!0,configurable:!0}),e}(r.Component);e.Button=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(33),o=i(1),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-selectbox"},i.config),i}return n(e,t),e.prototype.toDomElement=function(){var t=this,e=new o.DOM("select",{id:this.config.id,class:this.getCssClasses()});return this.selectElement=e,this.updateDomItems(),e.on("change",function(){var i=e.val();t.onItemSelectedEvent(i,!1)}),e},e.prototype.updateDomItems=function(t){void 0===t&&(t=null),this.selectElement.empty();for(var e=0,i=this.items;e<i.length;e++){var n=i[e],r=new o.DOM("option",{value:n.key}).html(n.label);n.key===String(t)&&r.attr("selected","selected"),this.selectElement.append(r)}},e.prototype.onItemAddedEvent=function(e){t.prototype.onItemAddedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemRemovedEvent=function(e){t.prototype.onItemRemovedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemSelectedEvent=function(e,i){void 0===i&&(i=!0),t.prototype.onItemSelectedEvent.call(this,e),i&&this.updateDomItems(e)},e}(r.ListSelector);e.SelectBox=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,i){void 0===i&&(i=!1),this.delay=t,this.callback=e,this.repeat=i,this.timeoutHandle=0}return t.prototype.start=function(){return this.reset(),this},t.prototype.clear=function(){this.clearInternal()},t.prototype.reset=function(){var t=this,e=0,i=0;this.clearInternal();var n=function(){if(t.callback(),t.repeat){var r=Date.now(),o=r-e;i=t.delay-o+i,e=r,t.timeoutHandle=setTimeout(n,t.delay+i)}};e=Date.now(),this.timeoutHandle=setTimeout(n,this.delay)},t.prototype.clearInternal=function(){clearTimeout(this.timeoutHandle)},t}();e.Timeout=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){function e(e,n){void 0===n&&(n=t.FORMAT_HHMMSS);var r=e<0;r&&(e=-e);var o=Math.floor(e/3600),s=Math.floor(e/60)-60*o,a=Math.floor(e)%60;return(r?"-":"")+n.replace("hh",i(o,2)).replace("mm",i(s,2)).replace("ss",i(a,2))}function i(t,e){var i=t+"";return"0000000000".substr(0,e-i.length)+i}function n(t,e,i){var n=new RegExp("\\{(remainingTime|playedTime|adDuration)(}|%((0[1-9]\\d*(\\.\\d+(d|f)|d|f)|\\.\\d+f|d|f)|hh:mm:ss|mm:ss)})","g");return t.replace(n,function(t){var n=0;return t.indexOf("remainingTime")>-1?n=e?Math.ceil(e-i.getCurrentTime()):i.getDuration()-i.getCurrentTime():t.indexOf("playedTime")>-1?n=i.getCurrentTime():t.indexOf("adDuration")>-1&&(n=i.getDuration()),r(n,t)})}function r(t,n){var r=/%((0[1-9]\d*(\.\d+(d|f)|d|f)|\.\d+f|d|f)|hh:mm:ss|mm:ss)/,o=/(%0[1-9]\d*)(?=(\.\d+f|f|d))/,s=/\.\d*(?=f)/;r.test(n)||(n="%d");var a=0,h=n.match(o);h&&(a=parseInt(h[0].substring(2)));var u=null,c=n.match(s);if(c&&!isNaN(parseInt(c[0].substring(1)))&&(u=parseInt(c[0].substring(1)))>20&&(u=20),n.indexOf("f")>-1){var f="";return f=null!==u?t.toFixed(u):""+t,f.indexOf(".")>-1?i(f,f.length+(a-f.indexOf("."))):i(f,a)}if(n.indexOf(":")>-1){var l=Math.ceil(t);if(n.indexOf("hh")>-1)return e(l);var p=Math.floor(l/60),d=l%60;return i(p,2)+":"+i(d,2)}return i(Math.ceil(t),a)}t.FORMAT_HHMMSS="hh:mm:ss",t.FORMAT_MMSS="mm:ss",t.secondsToTime=e,t.replaceAdMessagePlaceholders=n}(e.StringUtils||(e.StringUtils={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){function e(t,e){var i=t.indexOf(e);return i>-1?t.splice(i,1)[0]:null}t.remove=e}(e.ArrayUtils||(e.ArrayUtils={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=i(15);!function(t){function e(t){return t.isLive()&&0!==t.getMaxTimeShift()}function i(t){return t.hasEnded()?o.FINISHED:t.isPlaying()?o.PLAYING:t.isPaused()?o.PAUSED:t.isReady()?o.PREPARED:o.IDLE}var o;!function(t){t[t.IDLE=0]="IDLE",t[t.PREPARED=1]="PREPARED",t[t.PLAYING=2]="PLAYING",t[t.PAUSED=3]="PAUSED",t[t.FINISHED=4]="FINISHED"}(o=t.PlayerState||(t.PlayerState={})),t.isTimeShiftAvailable=e,t.getState=i;var s=function(){function e(t){var e=this;this.timeShiftAvailabilityChangedEvent=new n.EventDispatcher,this.player=t,this.timeShiftAvailable=void 0;var i=function(){e.detect()};t.addEventHandler(t.EVENT.ON_READY,i),t.addEventHandler(t.EVENT.ON_TIME_CHANGED,i)}return e.prototype.detect=function(){if(this.player.isLive()){var e=t.isTimeShiftAvailable(this.player);e!==this.timeShiftAvailable&&(this.timeShiftAvailabilityChangedEvent.dispatch(this.player,{timeShiftAvailable:e}),this.timeShiftAvailable=e)}},Object.defineProperty(e.prototype,"onTimeShiftAvailabilityChanged",{get:function(){return this.timeShiftAvailabilityChangedEvent.getEvent()},enumerable:!0,configurable:!0}),e}();t.TimeShiftAvailabilityDetector=s;var a=function(){function t(t){var e=this;this.liveChangedEvent=new n.EventDispatcher,this.player=t,this.live=void 0;var i=function(){e.detect()};t.addEventHandler(t.EVENT.ON_READY,i),t.addEventHandler(t.EVENT.ON_PLAY,i),r.BrowserUtils.isAndroid&&r.BrowserUtils.isChrome&&t.addEventHandler(t.EVENT.ON_TIME_CHANGED,i)}return t.prototype.detect=function(){var t=this.player.isLive();t!==this.live&&(this.liveChangedEvent.dispatch(this.player,{live:t}),this.live=t)},Object.defineProperty(t.prototype,"onLiveChanged",{get:function(){return this.liveChangedEvent.getEvent()},enumerable:!0,configurable:!0}),t}();t.LiveStreamDetector=a}(e.PlayerUtils||(e.PlayerUtils={}))},function(t,e){t.exports=angular},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(1),s=i(9),a=i(12),h=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-uicontainer",hideDelay:5e3},i.config),i}return n(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i),this.configureUIShowHide(e,i),this.configurePlayerStates(e,i)},e.prototype.configureUIShowHide=function(t,e){var i=this,n=this.getDomElement(),r=this.getConfig();if(-1===r.hideDelay)return void e.onConfigured.subscribe(function(){return e.onControlsShow.dispatch(i)});var o=!1,a=!1,h=!0,u=function(){o||(e.onControlsShow.dispatch(i),o=!0),a||t.isCasting()||i.uiHideTimeout.start()},c=function(){if(o&&!t.isCasting()){var n={};e.onPreviewControlsHide.dispatch(i,n),n.cancel?u():(e.onControlsHide.dispatch(i),o=!1)}};this.uiHideTimeout=new s.Timeout(r.hideDelay,c),n.on("touchend",function(t){o||(h?h=!1:t.preventDefault(),u())}),n.on("mouseenter",function(){u()}),n.on("mousemove",function(){u()}),n.on("mouseleave",function(){a||i.uiHideTimeout.start()}),e.onSeek.subscribe(function(){i.uiHideTimeout.clear(),a=!0}),e.onSeeked.subscribe(function(){a=!1,i.uiHideTimeout.start()}),t.addEventHandler(t.EVENT.ON_CAST_STARTED,function(){u()})},e.prototype.configurePlayerStates=function(t,i){var n=this,r=this.getDomElement(),s=[];for(var h in a.PlayerUtils.PlayerState)if(isNaN(Number(h))){var u=a.PlayerUtils.PlayerState[a.PlayerUtils.PlayerState[h]];s[a.PlayerUtils.PlayerState[h]]=this.prefixCss(e.STATE_PREFIX+u.toLowerCase())}var c=function(){r.removeClass(s[a.PlayerUtils.PlayerState.IDLE]),r.removeClass(s[a.PlayerUtils.PlayerState.PREPARED]),r.removeClass(s[a.PlayerUtils.PlayerState.PLAYING]),r.removeClass(s[a.PlayerUtils.PlayerState.PAUSED]),r.removeClass(s[a.PlayerUtils.PlayerState.FINISHED])};t.addEventHandler(t.EVENT.ON_READY,function(){c(),r.addClass(s[a.PlayerUtils.PlayerState.PREPARED])}),t.addEventHandler(t.EVENT.ON_PLAY,function(){c(),r.addClass(s[a.PlayerUtils.PlayerState.PLAYING])}),t.addEventHandler(t.EVENT.ON_PAUSED,function(){c(),r.addClass(s[a.PlayerUtils.PlayerState.PAUSED])}),t.addEventHandler(t.EVENT.ON_PLAYBACK_FINISHED,function(){c(),r.addClass(s[a.PlayerUtils.PlayerState.FINISHED])}),t.addEventHandler(t.EVENT.ON_SOURCE_UNLOADED,function(){c(),r.addClass(s[a.PlayerUtils.PlayerState.IDLE])}),r.addClass(s[a.PlayerUtils.getState(t)]),t.addEventHandler(t.EVENT.ON_FULLSCREEN_ENTER,function(){r.addClass(n.prefixCss(e.FULLSCREEN))}),t.addEventHandler(t.EVENT.ON_FULLSCREEN_EXIT,function(){r.removeClass(n.prefixCss(e.FULLSCREEN))}),t.isFullscreen()&&r.addClass(this.prefixCss(e.FULLSCREEN)),t.addEventHandler(t.EVENT.ON_STALL_STARTED,function(){r.addClass(n.prefixCss(e.BUFFERING))}),t.addEventHandler(t.EVENT.ON_STALL_ENDED,function(){r.removeClass(n.prefixCss(e.BUFFERING))}),t.isStalled()&&r.addClass(this.prefixCss(e.BUFFERING)),t.addEventHandler(t.EVENT.ON_CAST_STARTED,function(){r.addClass(n.prefixCss(e.REMOTE_CONTROL))}),t.addEventHandler(t.EVENT.ON_CAST_STOPPED,function(){r.removeClass(n.prefixCss(e.REMOTE_CONTROL))}),t.isCasting()&&r.addClass(this.prefixCss(e.REMOTE_CONTROL)),i.onControlsShow.subscribe(function(){r.removeClass(n.prefixCss(e.CONTROLS_HIDDEN)),r.addClass(n.prefixCss(e.CONTROLS_SHOWN))}),i.onControlsHide.subscribe(function(){r.removeClass(n.prefixCss(e.CONTROLS_SHOWN)),r.addClass(n.prefixCss(e.CONTROLS_HIDDEN))});var f=function(t,e){r.removeClass(n.prefixCss("layout-max-width-400")),r.removeClass(n.prefixCss("layout-max-width-600")),r.removeClass(n.prefixCss("layout-max-width-800")),r.removeClass(n.prefixCss("layout-max-width-1200")),t<=400?r.addClass(n.prefixCss("layout-max-width-400")):t<=600?r.addClass(n.prefixCss("layout-max-width-600")):t<=800?r.addClass(n.prefixCss("layout-max-width-800")):t<=1200&&r.addClass(n.prefixCss("layout-max-width-1200"))};t.addEventHandler(t.EVENT.ON_PLAYER_RESIZE,function(t){var e=Math.round(Number(t.width.substring(0,t.width.length-2)));Math.round(Number(t.height.substring(0,t.height.length-2)));f(e)}),f(new o.DOM(t.getFigure()).width(),new o.DOM(t.getFigure()).height())},e.prototype.release=function(){t.prototype.release.call(this),this.uiHideTimeout.clear()},e.prototype.toDomElement=function(){var e=t.prototype.toDomElement.call(this);return document&&void 0!==document.createElement("p").style.flex?e.addClass(this.prefixCss("flexbox")):e.addClass(this.prefixCss("no-flexbox")),e},e}(r.Container);h.STATE_PREFIX="player-state-",h.FULLSCREEN="fullscreen",h.BUFFERING="buffering",h.REMOTE_CONTROL="remote-control",h.CONTROLS_SHOWN="controls-shown",h.CONTROLS_HIDDEN="controls-hidden",e.UIContainer=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t.isMobile=navigator&&navigator.userAgent&&/Mobi/.test(navigator.userAgent),t.isChrome=navigator&&navigator.userAgent&&/Chrome/.test(navigator.userAgent),t.isAndroid=navigator&&navigator.userAgent&&/Android/.test(navigator.userAgent)}(e.BrowserUtils||(e.BrowserUtils={}))},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=i(12),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-playbacktogglebutton",text:"Play/Pause"},i.config),i}return n(e,t),e.prototype.configure=function(i,n,r){var s=this;void 0===r&&(r=!0),t.prototype.configure.call(this,i,n);var a=!1,h=function(t){a||(i.isPlaying()?s.on():s.off())};i.addEventHandler(i.EVENT.ON_PLAY,h),i.addEventHandler(i.EVENT.ON_PAUSED,h),i.EVENT.ON_PLAYING&&i.addEventHandler(i.EVENT.ON_PLAYING,h),i.addEventHandler(i.EVENT.ON_SOURCE_LOADED,h),i.addEventHandler(i.EVENT.ON_SOURCE_UNLOADED,h),i.addEventHandler(i.EVENT.ON_PLAYBACK_FINISHED,h),i.addEventHandler(i.EVENT.ON_CAST_STARTED,h),i.addEventHandler(i.EVENT.ON_CAST_PLAYING,h),i.addEventHandler(i.EVENT.ON_CAST_PAUSED,h),i.addEventHandler(i.EVENT.ON_CAST_PLAYBACK_FINISHED,h),i.addEventHandler(i.EVENT.ON_WARNING,function(t){5008===t.code&&s.off()});var u=new o.PlayerUtils.TimeShiftAvailabilityDetector(i);u.onTimeShiftAvailabilityChanged.subscribe(function(t,i){i.timeShiftAvailable?s.getDomElement().removeClass(s.prefixCss(e.CLASS_STOPTOGGLE)):s.getDomElement().addClass(s.prefixCss(e.CLASS_STOPTOGGLE))}),u.detect(),r&&this.onClick.subscribe(function(){i.isPlaying()?i.pause("ui"):i.play("ui")}),n.onSeek.subscribe(function(){a=!0}),n.onSeeked.subscribe(function(){a=!1}),h()},e}(r.ToggleButton);s.CLASS_STOPTOGGLE="stoptoggle",e.PlaybackToggleButton=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this,n={cssClass:"ui-volumetogglebutton",text:"Volume/Mute",onClass:"muted",offClass:"unmuted"};return i.config=i.mergeConfig(e,n,i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){e.isMuted()?(n.on(),e.getVolume()<10&&e.setVolume(10)):n.off()},o=function(){var t=Math.ceil(e.getVolume()/10);n.getDomElement().data(n.prefixCss("volume-level-tens"),String(t)),0===t&&n.off()};e.addEventHandler(e.EVENT.ON_MUTED,r),e.addEventHandler(e.EVENT.ON_UNMUTED,r),e.addEventHandler(e.EVENT.ON_VOLUME_CHANGED,o),this.onClick.subscribe(function(){e.isMuted()?e.unmute("ui-volumetogglebutton"):e.mute("ui-volumetogglebutton")}),r(),o()},e}(r.ToggleButton);e.VolumeToggleButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(1),s=i(3),a=i(9),h=i(12),u=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.playbackPositionPercentage=0,i.touchSupported="ontouchstart"in window,i.seekBarEvents={onSeek:new s.EventDispatcher,onSeekPreview:new s.EventDispatcher,onSeeked:new s.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-seekbar",vertical:!1,smoothPlaybackPositionUpdateIntervalMs:50},i.config),i.label=i.config.label,i.timelineMarkers=[],i}return n(e,t),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.hasLabel()&&this.getLabel().initialize()},e.prototype.configure=function(i,n,r){var o=this;if(void 0===r&&(r=!0),t.prototype.configure.call(this,i,n),this.setPosition(this.seekBarBackdrop,100),r){var s=!1,a=!1,u=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=!1),!a)if(i.isLive()){if(0===i.getMaxTimeShift())o.setPlaybackPosition(100);else{var r=100-100/i.getMaxTimeShift()*i.getTimeShift();o.setPlaybackPosition(r)}o.setBufferPosition(100)}else{var r=100/i.getDuration()*i.getCurrentTime(),s=i.getVideoBufferLength(),h=i.getAudioBufferLength(),u=Math.min(null!=s?s:Number.MAX_VALUE,null!=h?h:Number.MAX_VALUE);u===Number.MAX_VALUE&&(u=0);var c=100/i.getDuration()*u;(o.config.smoothPlaybackPositionUpdateIntervalMs===e.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED||n||i.isPaused()||i.isPaused()===i.isPlaying())&&o.setPlaybackPosition(r),o.setBufferPosition(r+c)}};i.addEventHandler(i.EVENT.ON_READY,u),i.addEventHandler(i.EVENT.ON_TIME_CHANGED,u),i.addEventHandler(i.EVENT.ON_STALL_ENDED,u),i.addEventHandler(i.EVENT.ON_SEEKED,u),i.addEventHandler(i.EVENT.ON_TIME_SHIFTED,u),i.addEventHandler(i.EVENT.ON_SEGMENT_REQUEST_FINISHED,u),i.addEventHandler(i.EVENT.ON_CAST_TIME_UPDATED,u),this.configureLivePausedTimeshiftUpdater(i,n,u),i.addEventHandler(i.EVENT.ON_SEEK,function(){o.setSeeking(!0)}),i.addEventHandler(i.EVENT.ON_SEEKED,function(){o.setSeeking(!1)}),i.addEventHandler(i.EVENT.ON_TIME_SHIFT,function(){o.setSeeking(!0)}),i.addEventHandler(i.EVENT.ON_TIME_SHIFTED,function(){o.setSeeking(!1)});var c=function(t){i.isLive()?i.timeShift(i.getMaxTimeShift()-i.getMaxTimeShift()*(t/100),"ui"):i.seek(i.getDuration()*(t/100),"ui")};this.onSeek.subscribe(function(t){a=!0,n.onSeek.dispatch(t),(s=i.isPlaying())&&i.pause("ui")}),this.onSeekPreview.subscribe(function(t,e){n.onSeekPreview.dispatch(t,e)}),this.onSeekPreview.subscribeRateLimited(function(t,e){e.scrubbing&&c(e.position)},200),this.onSeeked.subscribe(function(t,e){a=!1,c(e),s&&i.play("ui"),n.onSeeked.dispatch(t)}),this.hasLabel()&&this.getLabel().configure(i,n);var f=!1,l=!1,p=function(t,e){t&&!e?o.hide():o.show(),u(null,!0),o.refreshPlaybackPosition()},d=new h.PlayerUtils.LiveStreamDetector(i);d.onLiveChanged.subscribe(function(t,e){f=e.live,p(f,l)});var v=new h.PlayerUtils.TimeShiftAvailabilityDetector(i);v.onTimeShiftAvailabilityChanged.subscribe(function(t,e){l=e.timeShiftAvailable,p(f,l)}),d.detect(),v.detect(),i.addEventHandler(i.EVENT.ON_PLAYER_RESIZE,function(){o.refreshPlaybackPosition()}),n.onConfigured.subscribe(function(){o.refreshPlaybackPosition()}),i.addEventHandler(i.EVENT.ON_READY,function(){o.refreshPlaybackPosition()}),u(),this.setBufferPosition(0),this.setSeekPosition(0),this.config.smoothPlaybackPositionUpdateIntervalMs!==e.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED&&this.configureSmoothPlaybackPositionUpdater(i,n),this.configureMarkers(i,n)}},e.prototype.configureLivePausedTimeshiftUpdater=function(t,e,i){var n=new a.Timeout(1e3,i,!0);t.addEventHandler(t.EVENT.ON_PAUSED,function(){t.isLive()&&t.getMaxTimeShift()<0&&n.start()}),t.addEventHandler(t.EVENT.ON_PLAY,function(){return n.clear()})},e.prototype.configureSmoothPlaybackPositionUpdater=function(t,e){var i=this,n=0,r=0;this.smoothPlaybackPositionUpdater=new a.Timeout(50,function(){n+=.05,r=t.getCurrentTime();var e=n-r;Math.abs(e)>2?n=r:e<=-.05?n+=.05:e>=.05&&(n-=.05);var o=100/t.getDuration()*n;i.setPlaybackPosition(o)},!0);var o=function(){t.isLive()||(n=t.getCurrentTime(),i.smoothPlaybackPositionUpdater.start())},s=function(){i.smoothPlaybackPositionUpdater.clear()};t.addEventHandler(t.EVENT.ON_PLAY,o),t.addEventHandler(t.EVENT.ON_CAST_PLAYING,o),t.addEventHandler(t.EVENT.ON_PAUSED,s),t.addEventHandler(t.EVENT.ON_CAST_PAUSED,s),t.addEventHandler(t.EVENT.ON_PLAYBACK_FINISHED,s),t.addEventHandler(t.EVENT.ON_SEEKED,function(){n=t.getCurrentTime()}),t.isPlaying()&&o()},e.prototype.configureMarkers=function(t,e){var i=this,n=function(){i.timelineMarkers=[],i.updateMarkers()},r=function(){n();var r=t.getDuration();if(r!==1/0){for(var o=0,s=e.getConfig().metadata.markers;o<s.length;o++){var a=s[o],h=100/r*a.time,u=100/r*a.duration;i.timelineMarkers.push({marker:a,position:h,duration:u})}i.updateMarkers()}};t.addEventHandler(t.EVENT.ON_READY,r),t.addEventHandler(t.EVENT.ON_SOURCE_UNLOADED,n),t.addEventHandler(t.EVENT.ON_PLAYER_RESIZE,function(){return i.updateMarkers()}),e.getConfig().events.onUpdated.subscribe(r),e.onRelease.subscribe(function(){return e.getConfig().events.onUpdated.unsubscribe(r)}),r()},e.prototype.release=function(){t.prototype.release.call(this),this.smoothPlaybackPositionUpdater&&this.smoothPlaybackPositionUpdater.clear()},e.prototype.toDomElement=function(){var t=this;this.config.vertical&&this.config.cssClasses.push("vertical");var e=new o.DOM("div",{id:this.config.id,class:this.getCssClasses()}),i=new o.DOM("div",{class:this.prefixCss("seekbar")});this.seekBar=i;var n=new o.DOM("div",{class:this.prefixCss("seekbar-bufferlevel")});this.seekBarBufferPosition=n;var r=new o.DOM("div",{class:this.prefixCss("seekbar-playbackposition")});this.seekBarPlaybackPosition=r;var s=new o.DOM("div",{class:this.prefixCss("seekbar-playbackposition-marker")});this.seekBarPlaybackPositionMarker=s;var a=new o.DOM("div",{class:this.prefixCss("seekbar-seekposition")});this.seekBarSeekPosition=a;var h=new o.DOM("div",{class:this.prefixCss("seekbar-backdrop")});this.seekBarBackdrop=h;var u=new o.DOM("div",{class:this.prefixCss("seekbar-markers")});this.seekBarMarkersContainer=u,i.append(this.seekBarBackdrop,this.seekBarBufferPosition,this.seekBarSeekPosition,this.seekBarPlaybackPosition,this.seekBarMarkersContainer,this.seekBarPlaybackPositionMarker);var c=!1,f=function(e){e.preventDefault(),e.stopPropagation();var i=100*t.getOffset(e);t.setSeekPosition(i),t.setPlaybackPosition(i),t.onSeekPreviewEvent(i,!0)},l=function(e){e.preventDefault(),new o.DOM(document).off("touchmove mousemove",f),new o.DOM(document).off("touchend mouseup",l);var i=100*t.getOffset(e),n=t.getMarkerAtPosition(i);t.setSeeking(!1),c=!1,t.onSeekedEvent(n?n.position:i)};return i.on("touchstart mousedown",function(e){var i=t.touchSupported&&e instanceof TouchEvent;e.preventDefault(),e.stopPropagation(),t.setSeeking(!0),c=!0,t.onSeekEvent(),new o.DOM(document).on(i?"touchmove":"mousemove",f),new o.DOM(document).on(i?"touchend":"mouseup",l)}),i.on("touchmove mousemove",function(e){e.preventDefault(),c&&(e.stopPropagation(),f(e));var i=100*t.getOffset(e);t.setSeekPosition(i),t.onSeekPreviewEvent(i,!1),t.hasLabel()&&t.getLabel().isHidden()&&t.getLabel().show()}),i.on("touchend mouseleave",function(e){e.preventDefault(),t.setSeekPosition(0),t.hasLabel()&&t.getLabel().hide()}),e.append(i),this.label&&e.append(this.label.getDomElement()),e},e.prototype.updateMarkers=function(){var t=this;this.seekBarMarkersContainer.empty();for(var e=this.seekBar.width(),i=0,n=this.timelineMarkers;i<n.length;i++){var r=n[i],s=["seekbar-marker"].concat(r.marker.cssClasses||[]).map(function(e){return t.prefixCss(e)}),a={width:r.position+"%"};if(r.duration>0){var h=Math.round(e/100*r.duration);a["border-right-width"]=h+"px",a["margin-left"]="0"}this.seekBarMarkersContainer.append(new o.DOM("div",{class:s.join(" "),"data-marker-time":String(r.marker.time),"data-marker-title":String(r.marker.title)}).css(a))}},e.prototype.getMarkerAtPosition=function(t){if(this.timelineMarkers.length>0)for(var e=0,i=this.timelineMarkers;e<i.length;e++){var n=i[e];if(n.duration>0&&t>=n.position-1&&t<=n.position+n.duration+1)return n;if(t>=n.position-1&&t<=n.position+1)return n}return null},e.prototype.getHorizontalOffset=function(t){var e=this.seekBar.offset().left,i=this.seekBar.width(),n=t-e,r=1/i*n;return this.sanitizeOffset(r)},e.prototype.getVerticalOffset=function(t){var e=this.seekBar.offset().top,i=this.seekBar.height(),n=t-e,r=1/i*n;return 1-this.sanitizeOffset(r)},e.prototype.getOffset=function(t){return this.touchSupported&&t instanceof TouchEvent?this.config.vertical?this.getVerticalOffset("touchend"===t.type?t.changedTouches[0].pageY:t.touches[0].pageY):this.getHorizontalOffset("touchend"===t.type?t.changedTouches[0].pageX:t.touches[0].pageX):t instanceof MouseEvent?this.config.vertical?this.getVerticalOffset(t.pageY):this.getHorizontalOffset(t.pageX):(console&&console.warn("invalid event"),0)},e.prototype.sanitizeOffset=function(t){return t<0?t=0:t>1&&(t=1),t},e.prototype.setPlaybackPosition=function(t){this.playbackPositionPercentage=t,this.setPosition(this.seekBarPlaybackPosition,t);var e=this.config.vertical?this.seekBar.height()-this.seekBarPlaybackPositionMarker.height():this.seekBar.width(),i=e/100*t;this.config.vertical&&(i=this.seekBar.height()-i-this.seekBarPlaybackPositionMarker.height());var n=this.config.vertical?{transform:"translateY("+i+"px)","-ms-transform":"translateY("+i+"px)","-webkit-transform":"translateY("+i+"px)"}:{transform:"translateX("+i+"px)","-ms-transform":"translateX("+i+"px)","-webkit-transform":"translateX("+i+"px)"};this.seekBarPlaybackPositionMarker.css(n)},e.prototype.refreshPlaybackPosition=function(){this.setPlaybackPosition(this.playbackPositionPercentage)},e.prototype.setBufferPosition=function(t){this.setPosition(this.seekBarBufferPosition,t)},e.prototype.setSeekPosition=function(t){this.setPosition(this.seekBarSeekPosition,t)},e.prototype.setPosition=function(t,e){var i=e/100;i>=.99999&&i<=1.00001&&(i=.99999);var n=this.config.vertical?{transform:"scaleY("+i+")","-ms-transform":"scaleY("+i+")","-webkit-transform":"scaleY("+i+")"}:{transform:"scaleX("+i+")","-ms-transform":"scaleX("+i+")","-webkit-transform":"scaleX("+i+")"};t.css(n)},e.prototype.setSeeking=function(t){t?this.getDomElement().addClass(this.prefixCss(e.CLASS_SEEKING)):this.getDomElement().removeClass(this.prefixCss(e.CLASS_SEEKING))},e.prototype.isSeeking=function(){return this.getDomElement().hasClass(this.prefixCss(e.CLASS_SEEKING))},e.prototype.hasLabel=function(){return null!=this.label},e.prototype.getLabel=function(){return this.label},e.prototype.onSeekEvent=function(){this.seekBarEvents.onSeek.dispatch(this)},e.prototype.onSeekPreviewEvent=function(t,e){var i=this.getMarkerAtPosition(t),n=t;i&&(i.duration>0?t<i.position?n=i.position:t>i.position+i.duration&&(n=i.position+i.duration):n=i.position),this.label&&this.label.getDomElement().css({left:n+"%"}),this.seekBarEvents.onSeekPreview.dispatch(this,{scrubbing:e,position:n,marker:i})},e.prototype.onSeekedEvent=function(t){this.seekBarEvents.onSeeked.dispatch(this,t)},Object.defineProperty(e.prototype,"onSeek",{get:function(){return this.seekBarEvents.onSeek.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSeekPreview",{get:function(){return this.seekBarEvents.onSeekPreview.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSeeked",{get:function(){return this.seekBarEvents.onSeeked.getEvent()},enumerable:!0,configurable:!0}),e.prototype.onShowEvent=function(){t.prototype.onShowEvent.call(this),this.refreshPlaybackPosition()},e}(r.Component);u.SMOOTH_PLAYBACK_POSITION_UPDATE_DISABLED=-1,u.CLASS_SEEKING="seeking",e.SeekBar=u},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(20),s=i(21),a=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-controlbar",hidden:!0},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var a=0;o.UIUtils.traverseTree(this,function(t){t instanceof r.Container||t instanceof s.Spacer||t.onHoverChanged.subscribe(function(t,e){e.hovered?a++:a--})}),i.onControlsShow.subscribe(function(){n.show()}),i.onPreviewControlsHide.subscribe(function(t,e){e.cancel=a>0}),i.onControlsHide.subscribe(function(){n.hide()})},e}(r.Container);e.ControlBar=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0);!function(t){function e(t,e){var i=function(t,r){if(e(t,r),t instanceof n.Container)for(var o=0,s=t.getComponents();o<s.length;o++){var a=s[o];i(a,t)}};i(t)}t.traverseTree=e}(e.UIUtils||(e.UIUtils={}))},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-spacer"},i.config),i}return n(e,t),e.prototype.onShowEvent=function(){},e.prototype.onHideEvent=function(){},e.prototype.onHoverChangedEvent=function(t){},e}(r.Component);e.Spacer=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(2),s=i(8),a=i(6),h=i(23),u=i(24),c=i(9),f=i(3),l=function(t){function e(e){var i=t.call(this,e)||this;return i.settingsPanelEvents={onSettingsStateChanged:new f.EventDispatcher},i.config=i.mergeConfig(e,{cssClass:"ui-settings-panel",hideDelay:3e3},i.config),i}return n(e,t),e.prototype.configure=function(i,n){var r=this;t.prototype.configure.call(this,i,n);var o=this.getConfig();o.hideDelay>-1&&(this.hideTimeout=new c.Timeout(o.hideDelay,function(){r.hide(),r.hideHoveredSelectBoxes()}),this.onShow.subscribe(function(){r.hideTimeout.start()}),this.getDomElement().on("mouseenter",function(){r.hideTimeout.clear()}),this.getDomElement().on("mouseleave",function(){r.hideTimeout.reset()}),this.onHide.subscribe(function(){r.hideTimeout.clear()}));for(var s=function(){r.onSettingsStateChangedEvent();for(var t=null,i=0,n=r.getItems();i<n.length;i++){var o=n[i];o.getDomElement().removeClass(r.prefixCss(e.CLASS_LAST)),o.isShown()&&(t=o)}t&&t.getDomElement().addClass(r.prefixCss(e.CLASS_LAST))},a=0,h=this.getItems();a<h.length;a++){h[a].onActiveChanged.subscribe(s)}},e.prototype.hideHoveredSelectBoxes=function(){this.getItems().forEach(function(t){if(t.isActive()&&t.setting instanceof s.SelectBox){var e=t.setting,i=e.getDomElement().css("display");e.getDomElement().css("display","none"),window.requestAnimationFrame?requestAnimationFrame(function(){e.getDomElement().css("display",i)}):e.getDomElement().css("display",i)}})},e.prototype.release=function(){t.prototype.release.call(this),this.hideTimeout&&this.hideTimeout.clear()},e.prototype.hasActiveSettings=function(){for(var t=0,e=this.getItems();t<e.length;t++){if(e[t].isActive())return!0}return!1},e.prototype.getItems=function(){return this.config.components.filter(function(t){return t instanceof p})},e.prototype.onSettingsStateChangedEvent=function(){this.settingsPanelEvents.onSettingsStateChanged.dispatch(this)},Object.defineProperty(e.prototype,"onSettingsStateChanged",{get:function(){return this.settingsPanelEvents.onSettingsStateChanged.getEvent()},enumerable:!0,configurable:!0}),e}(r.Container);l.CLASS_LAST="last",e.SettingsPanel=l;var p=function(t){function e(e,i,n){void 0===n&&(n={});var r=t.call(this,n)||this;return r.settingsPanelItemEvents={onActiveChanged:new f.EventDispatcher},r.setting=i,r.config=r.mergeConfig(n,{cssClass:"ui-settings-panel-item"},r.config),null!==e&&(e instanceof o.Component?r.label=e:r.label=new a.Label({text:e}),r.addComponent(r.label)),r.addComponent(r.setting),r}return n(e,t),e.prototype.configure=function(t,e){var i=this;if(this.setting instanceof s.SelectBox){var n=function(){if(i.setting instanceof s.SelectBox){var t=2;(i.setting instanceof h.VideoQualitySelectBox&&i.setting.hasAutoItem()||i.setting instanceof u.AudioQualitySelectBox)&&(t=3),i.setting.itemCount()<t?i.hide():i.show(),i.onActiveChangedEvent()}};this.setting.onItemAdded.subscribe(n),this.setting.onItemRemoved.subscribe(n),n()}},e.prototype.isActive=function(){return this.isShown()},e.prototype.onActiveChangedEvent=function(){this.settingsPanelItemEvents.onActiveChanged.dispatch(this)},Object.defineProperty(e.prototype,"onActiveChanged",{get:function(){return this.settingsPanelItemEvents.onActiveChanged.getEvent()},enumerable:!0,configurable:!0}),e}(r.Container);e.SettingsPanelItem=p},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){if(e.getVideoQuality)n.selectItem(e.getVideoQuality().id);else{var t=e.getDownloadedVideoData();n.selectItem(t.isAuto?"auto":t.id)}},o=function(){var t=e.getAvailableVideoQualities();n.clearItems(),n.hasAuto="progressive"!==e.getStreamType(),n.hasAuto&&n.addItem("auto","auto");for(var i=0,o=t;i<o.length;i++){var s=o[i];n.addItem(s.id,s.label)}r()};this.onItemSelected.subscribe(function(t,i){e.setVideoQuality(i)}),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),e.EVENT.ON_VIDEO_QUALITY_CHANGED?e.addEventHandler(e.EVENT.ON_VIDEO_QUALITY_CHANGED,r):e.addEventHandler(e.EVENT.ON_VIDEO_DOWNLOAD_QUALITY_CHANGE,r)},e.prototype.hasAutoItem=function(){return this.hasAuto},e}(r.SelectBox);e.VideoQualitySelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){if(e.getAudioQuality)n.selectItem(e.getAudioQuality().id);else{var t=e.getDownloadedAudioData();n.selectItem(t.isAuto?"auto":t.id)}},o=function(){var t=e.getAvailableAudioQualities();n.clearItems(),n.addItem("auto","auto");for(var i=0,o=t;i<o.length;i++){var s=o[i];n.addItem(s.id,s.label)}r()};this.onItemSelected.subscribe(function(t,i){e.setAudioQuality(i)}),e.addEventHandler(e.EVENT.ON_AUDIO_CHANGED,o),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),e.EVENT.ON_AUDIO_QUALITY_CHANGED?e.addEventHandler(e.EVENT.ON_AUDIO_QUALITY_CHANGED,r):e.addEventHandler(e.EVENT.ON_AUDIO_DOWNLOAD_QUALITY_CHANGE,r)},e}(r.SelectBox);e.AudioQualitySelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),o=function(t){function e(e){var i=t.call(this,e)||this;return i.subtitleSettingsPanel=e.subtitleSettingsPanel,i.settingsPanel=e.settingsPanel,i}return n(e,t),e}(r.Button);e.SubtitleSettingsButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(18),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-volumeslider",hideIfVolumeControlProhibited:!0},i.config),i}return n(e,t),e.prototype.configure=function(i,n){var r=this;if(t.prototype.configure.call(this,i,n,!1),this.getConfig().hideIfVolumeControlProhibited&&!this.detectVolumeControlAvailability())return void this.hide();var o=function(){i.isMuted()?r.setPlaybackPosition(0):r.setPlaybackPosition(i.getVolume())};i.addEventHandler(i.EVENT.ON_READY,o),i.addEventHandler(i.EVENT.ON_VOLUME_CHANGED,o),i.addEventHandler(i.EVENT.ON_MUTED,o),i.addEventHandler(i.EVENT.ON_UNMUTED,o),this.onSeekPreview.subscribeRateLimited(function(t,n){n.scrubbing&&i.setVolume(n.position,e.issuerName)},50),this.onSeeked.subscribe(function(t,n){i.setVolume(n,e.issuerName)}),i.addEventHandler(i.EVENT.ON_PLAYER_RESIZE,function(){r.refreshPlaybackPosition()}),i.addEventHandler(i.EVENT.ON_READY,function(){r.refreshPlaybackPosition()}),n.onConfigured.subscribe(function(){r.refreshPlaybackPosition()}),o()},e.prototype.detectVolumeControlAvailability=function(){var t=document.createElement("video");return t.volume=.7,1!==t.volume},e}(r.SeekBar);o.issuerName="ui",e.VolumeSlider=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r,o=i(6);!function(t){t[t.Title=0]="Title",t[t.Description=1]="Description"}(r=e.MetadataLabelContent||(e.MetadataLabelContent={}));var s=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClasses:["label-metadata","label-metadata-"+r[e.content].toLowerCase()]},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var o=this.getConfig(),s=i.getConfig(),a=function(){switch(o.content){case r.Title:n.setText(s.metadata.title);break;case r.Description:n.setText(s.metadata.description)}},h=function(){n.setText(null)};a(),e.addEventHandler(e.EVENT.ON_SOURCE_LOADED,a),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,h)},e}(o.Label);e.MetadataLabel=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-clickoverlay"},i.config),i}return n(e,t),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.setUrl(this.config.url);var e=this.getDomElement();e.on("click",function(){e.data("url")&&window.open(e.data("url"),"_blank")})},e.prototype.getUrl=function(){return this.getDomElement().data("url")},e.prototype.setUrl=function(t){void 0!==t&&null!=t||(t=""),this.getDomElement().data("url",t)},e}(r.Button);e.ClickOverlay=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-fullscreentogglebutton",text:"Fullscreen"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){e.isFullscreen()?n.on():n.off()};e.addEventHandler(e.EVENT.ON_FULLSCREEN_ENTER,r),e.addEventHandler(e.EVENT.ON_FULLSCREEN_EXIT,r),this.onClick.subscribe(function(){e.isFullscreen()?e.exitFullscreen():e.enterFullscreen()}),r()},e}(r.ToggleButton);e.FullscreenToggleButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-vrtogglebutton",text:"VR"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){var t=e.getConfig();return t.source&&t.source.vr&&"none"!==t.source.vr.contentType},o=function(){return"none"!==e.getVRStatus().contentType},s=function(){r()&&o()?(n.show(),e.getVRStatus().isStereo?n.on():n.off()):n.hide()},a=function(){r()?n.show():n.hide()};e.addEventHandler(e.EVENT.ON_VR_MODE_CHANGED,s),e.addEventHandler(e.EVENT.ON_VR_STEREO_CHANGED,s),e.addEventHandler(e.EVENT.ON_VR_ERROR,s),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,a),e.addEventHandler(e.EVENT.ON_READY,a),this.onClick.subscribe(function(){o()?e.getVRStatus().isStereo?e.setVRStereo(!1):e.setVRStereo(!0):console&&console.log("No VR content")}),a()},e}(r.ToggleButton);e.VRToggleButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r,o=i(6),s=i(12),a=i(10);!function(t){t[t.CurrentTime=0]="CurrentTime",t[t.TotalTime=1]="TotalTime",t[t.CurrentAndTotalTime=2]="CurrentAndTotalTime"}(r=e.PlaybackTimeLabelMode||(e.PlaybackTimeLabelMode={}));var h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-playbacktimelabel",timeLabelMode:r.CurrentAndTotalTime,hideInLivePlayback:!1},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig(),o=!1,h=this.prefixCss("ui-playbacktimelabel-live"),u=this.prefixCss("ui-playbacktimelabel-live-edge"),c=0,f=function(){e.timeShift(0)},l=function(){o=e.isLive(),o?(n.getDomElement().addClass(h),n.setText("Live"),r.hideInLivePlayback&&n.hide(),n.onClick.subscribe(f),p()):(n.getDomElement().removeClass(h),n.getDomElement().removeClass(u),n.show(),n.onClick.unsubscribe(f))},p=function(){if(o){var t=e.getTimeShift()<0,i=e.getMaxTimeShift()<0;t||e.isPaused()&&i?n.getDomElement().removeClass(u):n.getDomElement().addClass(u)}},d=new s.PlayerUtils.LiveStreamDetector(e);d.onLiveChanged.subscribe(function(t,e){o=e.live,l()}),d.detect();var v=function(){o||e.getDuration()===1/0||n.setTime(e.getCurrentTime(),e.getDuration());var t=n.getDomElement().width();t>c&&(c=t,n.getDomElement().css({"min-width":c+"px"}))};e.addEventHandler(e.EVENT.ON_TIME_CHANGED,v),e.addEventHandler(e.EVENT.ON_SEEKED,v),e.addEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,v),e.addEventHandler(e.EVENT.ON_TIME_SHIFT,p),e.addEventHandler(e.EVENT.ON_TIME_SHIFTED,p),e.addEventHandler(e.EVENT.ON_PLAY,p),e.addEventHandler(e.EVENT.ON_PAUSED,p);var g=function(){c=0,n.getDomElement().css({"min-width":null}),n.timeFormat=Math.abs(e.isLive()?e.getMaxTimeShift():e.getDuration())>=3600?a.StringUtils.FORMAT_HHMMSS:a.StringUtils.FORMAT_MMSS,v()};e.addEventHandler(e.EVENT.ON_READY,g),g()},e.prototype.setTime=function(t,e){var i=a.StringUtils.secondsToTime(t,this.timeFormat),n=a.StringUtils.secondsToTime(e,this.timeFormat);switch(this.config.timeLabelMode){case r.CurrentTime:this.setText(""+i);break;case r.TotalTime:this.setText(""+n);break;case r.CurrentAndTotalTime:this.setText(i+" / "+n)}},e.prototype.setTimeFormat=function(t){this.timeFormat=t},e}(o.Label);e.PlaybackTimeLabel=h},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=function(t){function e(e){var i=t.call(this,e)||this;if(!e.settingsPanel)throw new Error("Required SettingsPanel is missing");return i.config=i.mergeConfig(e,{cssClass:"ui-settingstogglebutton",text:"Settings",settingsPanel:null,autoHideWhenNoActiveSettings:!0},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig(),o=r.settingsPanel;if(this.onClick.subscribe(function(){o.toggleHidden()}),o.onShow.subscribe(function(){n.on()}),o.onHide.subscribe(function(){n.off()}),r.autoHideWhenNoActiveSettings){var s=function(){o.hasActiveSettings()?n.isHidden()&&n.show():n.isShown()&&n.hide()};o.onSettingsStateChanged.subscribe(s),s()}},e}(r.ToggleButton);e.SettingsToggleButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(3),s=i(11),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.listSelectorEvents={onItemAdded:new o.EventDispatcher,onItemRemoved:new o.EventDispatcher,onItemSelected:new o.EventDispatcher},i.config=i.mergeConfig(e,{items:[],cssClass:"ui-listselector"},i.config),i.items=i.config.items,i}return n(e,t),e.prototype.getItemIndex=function(t){for(var e in this.items)if(t===this.items[e].key)return parseInt(e);return-1},e.prototype.hasItem=function(t){return this.getItemIndex(t)>-1},e.prototype.addItem=function(t,e){var i={key:t,label:e};this.config.filter&&!this.config.filter(i)||(this.config.translator&&(i.label=this.config.translator(i)),this.removeItem(t),this.items.push(i),this.onItemAddedEvent(t))},e.prototype.removeItem=function(t){var e=this.getItemIndex(t);return e>-1&&(s.ArrayUtils.remove(this.items,this.items[e]),this.onItemRemovedEvent(t),!0)},e.prototype.selectItem=function(t){return t===this.selectedItem||this.getItemIndex(t)>-1&&(this.selectedItem=t,this.onItemSelectedEvent(t),!0)},e.prototype.getSelectedItem=function(){return this.selectedItem},e.prototype.clearItems=function(){var t=this.items;this.items=[],this.selectedItem=null;for(var e=0,i=t;e<i.length;e++){var n=i[e];this.onItemRemovedEvent(n.key)}},e.prototype.itemCount=function(){return Object.keys(this.items).length},e.prototype.onItemAddedEvent=function(t){this.listSelectorEvents.onItemAdded.dispatch(this,t)},e.prototype.onItemRemovedEvent=function(t){this.listSelectorEvents.onItemRemoved.dispatch(this,t)},e.prototype.onItemSelectedEvent=function(t){this.listSelectorEvents.onItemSelected.dispatch(this,t)},Object.defineProperty(e.prototype,"onItemAdded",{get:function(){return this.listSelectorEvents.onItemAdded.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onItemRemoved",{get:function(){return this.listSelectorEvents.onItemRemoved.getEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onItemSelected",{get:function(){return this.listSelectorEvents.onItemSelected.getEvent()},enumerable:!0,configurable:!0}),e}(r.Component);e.ListSelector=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(22),o=i(35),s=i(36),a=i(37),h=i(38),u=i(39),c=i(40),f=i(41),l=i(42),p=i(43),d=i(73),v=i(45),g=i(46),y=function(t){function e(e){var i=t.call(this,e)||this;i.overlay=e.overlay;var n=new d.SubtitleSettingsManager;return i.config=i.mergeConfig(e,{components:[new r.SettingsPanelItem("Font size",new h.FontSizeSelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Font family",new a.FontFamilySelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Font color",new o.FontColorSelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Font opacity",new s.FontOpacitySelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Character edge",new p.CharacterEdgeSelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Background color",new u.BackgroundColorSelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Background opacity",new c.BackgroundOpacitySelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Window color",new f.WindowColorSelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem("Window opacity",new l.WindowOpacitySelectBox({overlay:i.overlay,settingsManager:n})),new r.SettingsPanelItem(new v.SubtitleSettingsCloseButton({subtitleSettingsPanel:i,settingsPanel:e.settingsPanel}),new g.SubtitleSettingsResetButton({settingsManager:n}))]},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.onShow.subscribe(function(){n.overlay.enablePreviewSubtitleLabel()}),this.onHide.subscribe(function(){n.overlay.removePreviewSubtitleLabel()})},e}(r.SettingsPanel);e.SubtitleSettingsPanel=y},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("white","white"),this.addItem("black","black"),this.addItem("red","red"),this.addItem("green","green"),this.addItem("blue","blue"),this.addItem("cyan","cyan"),this.addItem("yellow","yellow"),this.addItem("magenta","magenta");var r=function(){n.settingsManager.fontColor.isSet()&&n.settingsManager.fontOpacity.isSet()?n.toggleOverlayClass("fontcolor-"+n.settingsManager.fontColor.value+n.settingsManager.fontOpacity.value):n.toggleOverlayClass(null)};this.onItemSelected.subscribe(function(t,e){n.settingsManager.fontColor.value=e}),this.settingsManager.fontColor.onChanged.subscribe(function(t,e){n.settingsManager.fontColor.isSet()?n.settingsManager.fontOpacity.isSet()||(n.settingsManager.fontOpacity.value="100"):n.settingsManager.fontOpacity.clear(),n.selectItem(e.value),r()}),this.settingsManager.fontOpacity.onChanged.subscribe(function(){r()}),this.settingsManager.fontColor.isSet()&&this.selectItem(this.settingsManager.fontColor.value)},e}(r.SubtitleSettingSelectBox);e.FontColorSelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("100","100%"),this.addItem("75","75%"),this.addItem("50","50%"),this.addItem("25","25%"),this.onItemSelected.subscribe(function(t,e){n.settingsManager.fontOpacity.value=e,n.settingsManager.fontOpacity.isSet()?n.settingsManager.fontColor.isSet()||(n.settingsManager.fontColor.value="white"):n.settingsManager.fontColor.clear()}),this.settingsManager.fontOpacity.onChanged.subscribe(function(t,e){n.selectItem(e.value)}),this.settingsManager.fontOpacity.isSet()&&this.selectItem(this.settingsManager.fontOpacity.value)},e}(r.SubtitleSettingSelectBox);e.FontOpacitySelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("monospacedserif","monospaced serif"),this.addItem("proportionalserif","proportional serif"),this.addItem("monospacedsansserif","monospaced sans serif"),this.addItem("proportionalsansserif","proportional sans serif"),this.addItem("casual","casual"),this.addItem("cursive","cursive"),this.addItem("smallcapital","small capital"),this.settingsManager.fontFamily.onChanged.subscribe(function(t,e){e.isSet()?n.toggleOverlayClass("fontfamily-"+e.value):n.toggleOverlayClass(null),n.selectItem(e.value)}),this.onItemSelected.subscribe(function(t,e){n.settingsManager.fontFamily.value=e}),this.settingsManager.fontFamily.isSet()&&this.selectItem(this.settingsManager.fontFamily.value)},e}(r.SubtitleSettingSelectBox);e.FontFamilySelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("50","50%"),this.addItem("75","75%"),this.addItem("100","100%"),this.addItem("150","150%"),this.addItem("200","200%"),this.addItem("300","300%"),this.addItem("400","400%"),this.settingsManager.fontSize.onChanged.subscribe(function(t,e){e.isSet()?n.toggleOverlayClass("fontsize-"+e.value):n.toggleOverlayClass(null),n.selectItem(e.value)}),this.onItemSelected.subscribe(function(t,e){n.settingsManager.fontSize.value=e}),this.settingsManager.fontSize.isSet()&&this.selectItem(this.settingsManager.fontSize.value)},e}(r.SubtitleSettingSelectBox);e.FontSizeSelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("white","white"),this.addItem("black","black"),this.addItem("red","red"),this.addItem("green","green"),this.addItem("blue","blue"),this.addItem("cyan","cyan"),this.addItem("yellow","yellow"),this.addItem("magenta","magenta");var r=function(){n.settingsManager.backgroundColor.isSet()&&n.settingsManager.backgroundOpacity.isSet()?n.toggleOverlayClass("bgcolor-"+n.settingsManager.backgroundColor.value+n.settingsManager.backgroundOpacity.value):n.toggleOverlayClass(null)};this.onItemSelected.subscribe(function(t,e){n.settingsManager.backgroundColor.value=e}),this.settingsManager.backgroundColor.onChanged.subscribe(function(t,e){n.settingsManager.backgroundColor.isSet()?n.settingsManager.backgroundOpacity.isSet()||(n.settingsManager.backgroundOpacity.value="100"):n.settingsManager.backgroundOpacity.clear(),n.selectItem(e.value),r()}),this.settingsManager.backgroundOpacity.onChanged.subscribe(function(){r()}),this.settingsManager.backgroundColor.isSet()&&this.selectItem(this.settingsManager.backgroundColor.value)},e}(r.SubtitleSettingSelectBox);e.BackgroundColorSelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("100","100%"),this.addItem("75","75%"),this.addItem("50","50%"),this.addItem("25","25%"),this.addItem("0","0%"),this.onItemSelected.subscribe(function(t,e){n.settingsManager.backgroundOpacity.value=e,n.settingsManager.backgroundOpacity.isSet()?n.settingsManager.backgroundColor.isSet()||(n.settingsManager.backgroundColor.value="black"):n.settingsManager.backgroundColor.clear()}),this.settingsManager.backgroundOpacity.onChanged.subscribe(function(t,e){n.selectItem(e.value)}),this.settingsManager.backgroundOpacity.isSet()&&this.selectItem(this.settingsManager.backgroundOpacity.value)},e}(r.SubtitleSettingSelectBox);e.BackgroundOpacitySelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("white","white"),this.addItem("black","black"),this.addItem("red","red"),this.addItem("green","green"),this.addItem("blue","blue"),this.addItem("cyan","cyan"),this.addItem("yellow","yellow"),this.addItem("magenta","magenta");var r=function(){n.settingsManager.windowColor.isSet()&&n.settingsManager.windowOpacity.isSet()?n.toggleOverlayClass("windowcolor-"+n.settingsManager.windowColor.value+n.settingsManager.windowOpacity.value):n.toggleOverlayClass(null)};this.onItemSelected.subscribe(function(t,e){n.settingsManager.windowColor.value=e}),this.settingsManager.windowColor.onChanged.subscribe(function(t,e){n.settingsManager.windowColor.isSet()?n.settingsManager.windowOpacity.isSet()||(n.settingsManager.windowOpacity.value="100"):n.settingsManager.windowOpacity.clear(),n.selectItem(e.value),r()}),this.settingsManager.windowOpacity.onChanged.subscribe(function(){r()}),this.settingsManager.windowColor.isSet()&&this.selectItem(this.settingsManager.windowColor.value)},e}(r.SubtitleSettingSelectBox);e.WindowColorSelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("100","100%"),this.addItem("75","75%"),this.addItem("50","50%"),this.addItem("25","25%"),this.addItem("0","0%"),this.onItemSelected.subscribe(function(t,e){n.settingsManager.windowOpacity.value=e,n.settingsManager.windowOpacity.isSet()?n.settingsManager.windowColor.isSet()||(n.settingsManager.windowColor.value="black"):n.settingsManager.windowColor.clear()}),this.settingsManager.windowOpacity.onChanged.subscribe(function(t,e){n.selectItem(e.value)}),this.settingsManager.windowOpacity.isSet()&&this.selectItem(this.settingsManager.windowOpacity.value)},e}(r.SubtitleSettingSelectBox);e.WindowOpacitySelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addItem(null,"default"),this.addItem("raised","raised"),this.addItem("depressed","depressed"),this.addItem("uniform","uniform"),this.addItem("dropshadowed","drop shadowed"),this.settingsManager.characterEdge.onChanged.subscribe(function(t,e){e.isSet()?n.toggleOverlayClass("characteredge-"+e.value):n.toggleOverlayClass(null),n.selectItem(e.value)}),this.onItemSelected.subscribe(function(t,e){n.settingsManager.characterEdge.value=e}),this.settingsManager.characterEdge.isSet()&&this.selectItem(this.settingsManager.characterEdge.value)},e}(r.SubtitleSettingSelectBox);e.CharacterEdgeSelectBox=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){function e(){if(s)return s;var t=window.localStorage;try{var e="__storage_test__";t.setItem(e,e),t.removeItem(e),s=!0}catch(e){s=e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}return s}function i(e,i){t.hasLocalStorage()&&window.localStorage.setItem(e,i)}function n(e){return t.hasLocalStorage()?window.localStorage.getItem(e):null}function r(e,n){if(t.hasLocalStorage()){i(e,JSON.stringify(n))}}function o(e){if(t.hasLocalStorage()){var i=n(e);if(e){return JSON.parse(i)}}return null}var s;t.hasLocalStorage=e,t.setItem=i,t.getItem=n,t.setObject=r,t.getObject=o}(e.StorageUtils||(e.StorageUtils={}))},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(25),o=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitlesettingsclosebutton",text:"Back"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe(function(){n.subtitleSettingsPanel.hide(),n.settingsPanel.show()})},e}(r.SubtitleSettingsButton);e.SubtitleSettingsCloseButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),o=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitlesettingsresetbutton",text:"Reset"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe(function(){n.config.settingsManager.reset()})},e}(r.Button);e.SubtitleSettingsResetButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(1),s=function(t){function e(e){var i=t.call(this,e)||this;return i.opener=e.opener,i.text=e.text,i.config=i.mergeConfig(e,{cssClass:"ui-label",components:[i.opener]},i.config),i}return n(e,t),e.prototype.toDomElement=function(){return new o.DOM("span",{id:this.config.id,class:this.getCssClasses()}).append(new o.DOM("span",{}).html(this.text),this.opener.getDomElement())},e}(r.Container);e.SubtitleSettingsLabel=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(25),o=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitlesettingsopenbutton",text:"Subtitles settings"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe(function(){n.subtitleSettingsPanel.show(),n.settingsPanel.hide()})},e}(r.SubtitleSettingsButton);e.SubtitleSettingsOpenButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){var t=e.getAudio();t&&n.selectItem(t.id)},o=function(){var t=e.getAvailableAudio();n.clearItems();for(var i=0,o=t;i<o.length;i++){var s=o[i];n.addItem(s.id,s.label)}r()};this.onItemSelected.subscribe(function(t,i){e.setAudio(i)}),e.addEventHandler(e.EVENT.ON_AUDIO_CHANGED,r),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),e.EVENT.ON_AUDIO_ADDED&&e.EVENT.ON_AUDIO_REMOVED&&(e.addEventHandler(e.EVENT.ON_AUDIO_ADDED,o),e.addEventHandler(e.EVENT.ON_AUDIO_REMOVED,o)),o()},e}(r.SelectBox);e.AudioTrackSelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(6),s=i(2),a=i(10),h=i(74),u=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.timeLabel=new o.Label({cssClasses:["seekbar-label-time"]}),i.titleLabel=new o.Label({cssClasses:["seekbar-label-title"]}),i.thumbnail=new s.Component({cssClasses:["seekbar-thumbnail"]}),i.thumbnailImageLoader=new h.ImageLoader,i.config=i.mergeConfig(e,{cssClass:"ui-seekbar-label",components:[new r.Container({components:[i.thumbnail,new r.Container({components:[i.titleLabel,i.timeLabel],cssClass:"seekbar-label-metadata"})],cssClass:"seekbar-label-inner"})],hidden:!0},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=[];i.onSeekPreview.subscribeRateLimited(function(t,i){if(e.isLive()){var o=e.getMaxTimeShift(),s=o-o*(i.position/100);n.setTime(s)}else{i.marker?n.setTitleText(i.marker.marker.title):n.setTitleText(null);var s=e.getDuration()*(i.position/100);n.setTime(s),n.setThumbnail(e.getThumb(s))}if(r.length>0&&(n.getDomElement().removeClass(r.join(" ")),r=[]),i.marker){var a=(i.marker.marker.cssClasses||[]).map(function(t){return n.prefixCss(t)});n.getDomElement().addClass(a.join(" ")),r=a}},100);var o=function(){n.timeFormat=Math.abs(e.isLive()?e.getMaxTimeShift():e.getDuration())>=3600?a.StringUtils.FORMAT_HHMMSS:a.StringUtils.FORMAT_MMSS};e.addEventHandler(e.EVENT.ON_READY,o),o()},e.prototype.setText=function(t){this.timeLabel.setText(t)},e.prototype.setTime=function(t){this.setText(a.StringUtils.secondsToTime(t,this.timeFormat))},e.prototype.setTitleText=function(t){this.titleLabel.setText(t)},e.prototype.setThumbnail=function(t){void 0===t&&(t=null);var e=this.thumbnail.getDomElement();null==t?e.css({"background-image":null,display:null,width:null,height:null}):this.thumbnailImageLoader.load(t.url,function(i,n,r){var o=n/t.w,s=r/t.h,a=t.x/t.w,h=t.y/t.h,u=100*o,c=100*s,f=100*a,l=100*h,p=1/t.w*t.h;e.css({display:"inherit","background-image":"url("+t.url+")","padding-bottom":100*p+"%","background-size":u+"% "+c+"%","background-position":"-"+f+"% -"+l+"%"})})},e}(r.Container);e.SeekBarLabel=u},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){var t=e.getSubtitle();t&&n.selectItem(t.id)},o=function(){n.clearItems();for(var t=0,i=e.getAvailableSubtitles();t<i.length;t++){var o=i[t];n.addItem(o.id,o.label)}r()};this.onItemSelected.subscribe(function(t,i){e.setSubtitle("null"===i?null:i)}),e.addEventHandler(e.EVENT.ON_SUBTITLE_ADDED,o),e.addEventHandler(e.EVENT.ON_SUBTITLE_CHANGED,r),e.addEventHandler(e.EVENT.ON_SUBTITLE_REMOVED,o),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,o),e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_PERIOD_SWITCHED,o),o()},e}(r.SelectBox);e.SubtitleSelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(6),s=i(19),a=i(3),h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.preprocessLabelEventCallback=new a.EventDispatcher,i.previewSubtitleActive=!1,i.previewSubtitle=new u({text:"example subtitle"}),i.config=i.mergeConfig(e,{cssClass:"ui-subtitle-overlay"},i.config),i}return n(e,t),e.prototype.configure=function(i,n){var r=this;t.prototype.configure.call(this,i,n);var o=new c;this.subtitleManager=o,i.addEventHandler(i.EVENT.ON_CUE_ENTER,function(t){t.position&&(t.position.row=t.position.row||0,t.position.column=t.position.column||0);var e=o.cueEnter(t);r.preprocessLabelEventCallback.dispatch(t,e),r.previewSubtitleActive&&r.removeComponent(r.previewSubtitle),r.addComponent(e),r.updateComponents(),r.show()}),i.addEventHandler(i.EVENT.ON_CUE_EXIT,function(t){var e=o.cueExit(t);e&&(r.removeComponent(e),r.updateComponents()),o.hasCues||(r.previewSubtitleActive?(r.addComponent(r.previewSubtitle),r.updateComponents()):r.hide())});var a=function(){r.hide(),o.clear(),r.removeComponents(),r.updateComponents()};i.addEventHandler(i.EVENT.ON_AUDIO_CHANGED,a),i.addEventHandler(i.EVENT.ON_SUBTITLE_CHANGED,a),i.addEventHandler(i.EVENT.ON_SEEK,a),i.addEventHandler(i.EVENT.ON_TIME_SHIFT,a),i.addEventHandler(i.EVENT.ON_PLAYBACK_FINISHED,a),i.addEventHandler(i.EVENT.ON_SOURCE_UNLOADED,a),n.onComponentShow.subscribe(function(t){t instanceof s.ControlBar&&r.getDomElement().addClass(r.prefixCss(e.CLASS_CONTROLBAR_VISIBLE))}),n.onComponentHide.subscribe(function(t){t instanceof s.ControlBar&&r.getDomElement().removeClass(r.prefixCss(e.CLASS_CONTROLBAR_VISIBLE))}),this.configureCea608Captions(i,n),a()},e.prototype.configureCea608Captions=function(t,i){var n=this,r=0,o=0,s=!0,a=!1,h=function(){var t=new u({text:"X"});t.getDomElement().css({"font-size":"200px","line-height":"200px",visibility:"hidden"}),n.addComponent(t),n.updateComponents(),n.show();var i=t.getDomElement().width(),s=t.getDomElement().height(),a=i/s;n.removeComponent(t),n.updateComponents(),n.subtitleManager.hasCues||n.hide();var h=n.getDomElement().width()-10,c=n.getDomElement().height();if(h/c>i*e.CEA608_NUM_COLUMNS/(s*e.CEA608_NUM_ROWS)){r=c/e.CEA608_NUM_ROWS;var f=h/e.CEA608_NUM_COLUMNS;o=f-r*a}else r=h/e.CEA608_NUM_COLUMNS/a,o=0;for(var l=0,p=n.getComponents();l<p.length;l++){var d=p[l];d instanceof u&&d.getDomElement().css({"font-size":r+"px","letter-spacing":o+"px"})}};t.addEventHandler(t.EVENT.ON_PLAYER_RESIZE,function(){a?h():s=!0}),this.preprocessLabelEventCallback.subscribe(function(t,i){null!=t.position&&(a||(a=!0,n.getDomElement().addClass(n.prefixCss(e.CLASS_CEA_608)),s&&(h(),s=!1)),i.getDomElement().css({left:t.position.column*e.CEA608_COLUMN_OFFSET+"%",top:t.position.row*e.CEA608_ROW_OFFSET+"%","font-size":r+"px","letter-spacing":o+"px"}))});var c=function(){n.getDomElement().removeClass(n.prefixCss(e.CLASS_CEA_608)),a=!1};t.addEventHandler(t.EVENT.ON_CUE_EXIT,function(){n.subtitleManager.hasCues||c()}),t.addEventHandler(t.EVENT.ON_SOURCE_UNLOADED,c),t.addEventHandler(t.EVENT.ON_SUBTITLE_CHANGED,c)},e.prototype.enablePreviewSubtitleLabel=function(){this.previewSubtitleActive=!0,this.subtitleManager.hasCues||(this.addComponent(this.previewSubtitle),this.updateComponents(),this.show())},e.prototype.removePreviewSubtitleLabel=function(){this.previewSubtitleActive=!1,this.removeComponent(this.previewSubtitle),this.updateComponents()},e}(r.Container);h.CLASS_CONTROLBAR_VISIBLE="controlbar-visible",h.CLASS_CEA_608="cea608",h.CEA608_NUM_ROWS=15,h.CEA608_NUM_COLUMNS=32,h.CEA608_ROW_OFFSET=100/h.CEA608_NUM_ROWS,h.CEA608_COLUMN_OFFSET=100/h.CEA608_NUM_COLUMNS,e.SubtitleOverlay=h;var u=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-subtitle-label"},i.config),i}return n(e,t),e}(o.Label),c=function(){function t(){this.activeSubtitleCueMap={},this.activeSubtitleCueCount=0}return t.calculateId=function(t){var e=t.start+"-"+t.text;return t.position&&(e+="-"+t.position.row+"-"+t.position.column),e},t.prototype.cueEnter=function(e){var i=t.calculateId(e),n=new u({text:e.html||e.text});return this.activeSubtitleCueMap[i]=this.activeSubtitleCueMap[i]||[],this.activeSubtitleCueMap[i].push({event:e,label:n}),this.activeSubtitleCueCount++,n},t.prototype.getCues=function(e){var i=t.calculateId(e),n=this.activeSubtitleCueMap[i];return n&&n.length>0?n.map(function(t){return t.label}):null},t.prototype.cueExit=function(e){var i=t.calculateId(e),n=this.activeSubtitleCueMap[i];if(n&&n.length>0){var r=n.shift();return this.activeSubtitleCueCount--,r.label}return null},Object.defineProperty(t.prototype,"cueCount",{get:function(){return this.activeSubtitleCueCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasCues",{get:function(){return this.cueCount>0},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.activeSubtitleCueMap={},this.activeSubtitleCueCount=0},t}()},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-casttogglebutton",text:"Google Cast"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.onClick.subscribe(function(){e.isCastAvailable()?e.isCasting()?e.castStop():e.castVideo():console&&console.log("Cast unavailable")});var r=function(){e.isCastAvailable()?n.show():n.hide()};e.addEventHandler(e.EVENT.ON_CAST_AVAILABLE,r),e.addEventHandler(e.EVENT.ON_CAST_WAITING_FOR_DEVICE,function(){n.on()}),e.addEventHandler(e.EVENT.ON_CAST_STARTED,function(){n.on()}),e.addEventHandler(e.EVENT.ON_CAST_STOPPED,function(){n.off()}),r(),e.isCasting()&&this.on()},e}(r.ToggleButton);e.CastToggleButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(6),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.statusLabel=new o.Label({cssClass:"ui-cast-status-label"}),i.config=i.mergeConfig(e,{cssClass:"ui-cast-status-overlay",components:[i.statusLabel],hidden:!0},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),e.addEventHandler(e.EVENT.ON_CAST_WAITING_FOR_DEVICE,function(t){n.show();var e=t.castPayload.deviceName;n.statusLabel.setText("Connecting to <strong>"+e+"</strong>...")}),e.addEventHandler(e.EVENT.ON_CAST_STARTED,function(t){n.show();var e=t.deviceName;n.statusLabel.setText("Playing on <strong>"+e+"</strong>")}),e.addEventHandler(e.EVENT.ON_CAST_STOPPED,function(t){n.hide()})},e}(r.Container);e.CastStatusOverlay=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(6),s=i(75),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.errorLabel=new o.Label({cssClass:"ui-errormessage-label"}),i.tvNoiseBackground=new s.TvNoiseCanvas,i.config=i.mergeConfig(e,{cssClass:"ui-errormessage-overlay",components:[i.tvNoiseBackground,i.errorLabel],hidden:!0},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig();e.addEventHandler(e.EVENT.ON_ERROR,function(t){var e=t.message;if(r.messages)if("function"==typeof r.messages)e=r.messages(t);else if(r.messages[t.code]){var i=r.messages[t.code];e="string"==typeof i?i:i(t)}n.errorLabel.setText(e),n.tvNoiseBackground.start(),n.show()}),e.addEventHandler(e.EVENT.ON_SOURCE_LOADED,function(t){n.isShown()&&(n.tvNoiseBackground.stop(),n.hide())})},e.prototype.release=function(){t.prototype.release.call(this),this.tvNoiseBackground.stop()},e}(r.Container);e.ErrorMessageOverlay=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(27),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-titlebar",hidden:!0,components:[new o.MetadataLabel({content:o.MetadataLabelContent.Title}),new o.MetadataLabel({content:o.MetadataLabelContent.Description})],keepHiddenWithoutMetadata:!1},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);for(var r=this.getConfig(),s=!this.isHidden(),a=!0,h=function(){a=!1;for(var t=0,e=n.getComponents();t<e.length;t++){var i=e[t];if(i instanceof o.MetadataLabel&&!i.isEmpty()){a=!0;break}}n.isShown()?r.keepHiddenWithoutMetadata&&!a&&n.hide():s&&n.show()},u=0,c=this.getComponents();u<c.length;u++){var f=c[u];f instanceof o.MetadataLabel&&f.onTextChanged.subscribe(h)}i.onControlsShow.subscribe(function(){s=!0,r.keepHiddenWithoutMetadata&&!a||n.show()}),i.onControlsHide.subscribe(function(){s=!1,n.hide()}),h()},e}(r.Container);e.TitleBar=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(2),s=i(1),a=i(10),h=i(58),u=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.replayButton=new h.HugeReplayButton,i.config=i.mergeConfig(e,{cssClass:"ui-recommendation-overlay",hidden:!0,components:[i.replayButton]},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=function(){for(var t=0,e=n.getComponents().slice();t<e.length;t++){var i=e[t];i instanceof c&&n.removeComponent(i)}n.updateComponents(),n.getDomElement().removeClass(n.prefixCss("recommendations"))},o=function(){r();var t=i.getConfig().recommendations;if(t.length>0){for(var e=1,o=0,s=t;o<s.length;o++){var a=s[o];n.addComponent(new c({itemConfig:a,cssClasses:["recommendation-item-"+e++]}))}n.updateComponents(),n.getDomElement().addClass(n.prefixCss("recommendations"))}};e.addEventHandler(e.EVENT.ON_READY,o),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,function(){r(),n.hide()}),e.addEventHandler(e.EVENT.ON_PLAYBACK_FINISHED,function(){e.isAd()||n.show()}),e.addEventHandler(e.EVENT.ON_PLAY,function(){n.hide()}),o()},e}(r.Container);e.RecommendationOverlay=u;var c=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-recommendation-item",itemConfig:null},i.config),i}return n(e,t),e.prototype.toDomElement=function(){var t=this.config.itemConfig,e=new s.DOM("a",{id:this.config.id,class:this.getCssClasses(),href:t.url}).css({"background-image":"url("+t.thumbnail+")"}),i=new s.DOM("div",{class:this.prefixCss("background")});e.append(i);var n=new s.DOM("span",{class:this.prefixCss("title")}).append(new s.DOM("span",{class:this.prefixCss("innertitle")}).html(t.title));e.append(n);var r=new s.DOM("span",{class:this.prefixCss("duration")}).append(new s.DOM("span",{class:this.prefixCss("innerduration")}).html(t.duration?a.StringUtils.secondsToTime(t.duration):""));return e.append(r),e},e}(o.Component)},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),o=i(1),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-hugereplaybutton",text:"Replay"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i),this.onClick.subscribe(function(){e.play("ui")})},e.prototype.toDomElement=function(){var e=t.prototype.toDomElement.call(this);return e.append(new o.DOM("div",{class:this.prefixCss("image")})),e},e}(r.Button);e.HugeReplayButton=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(8),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.defaultPlaybackSpeeds=[.25,.5,1,1.5,2],i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i),this.addDefaultItems(),this.onItemSelected.subscribe(function(t,i){e.setPlaybackSpeed(parseFloat(i)),n.selectItem(i)});var r=function(){var t=e.getPlaybackSpeed();n.setSpeed(t)};e.addEventHandler(e.EVENT.ON_READY,r),e.EVENT.ON_PLAYBACK_SPEED_CHANGED&&e.addEventHandler(e.EVENT.ON_PLAYBACK_SPEED_CHANGED,r)},e.prototype.setSpeed=function(t){this.selectItem(String(t))||(this.clearItems(),this.addDefaultItems([t]),this.selectItem(String(t)))},e.prototype.addDefaultItems=function(t){var e=this;void 0===t&&(t=[]),this.defaultPlaybackSpeeds.concat(t).sort().forEach(function(t){1!==t?e.addItem(String(t),t+"x"):e.addItem(String(t),"Normal")})},e.prototype.clearItems=function(){this.items=[],this.selectedItem=null},e}(r.SelectBox);e.PlaybackSpeedSelectBox=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(2),s=i(9),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.indicators=[new o.Component({tag:"div",cssClass:"ui-buffering-overlay-indicator"}),new o.Component({tag:"div",cssClass:"ui-buffering-overlay-indicator"}),new o.Component({tag:"div",cssClass:"ui-buffering-overlay-indicator"})],i.config=i.mergeConfig(e,{cssClass:"ui-buffering-overlay",hidden:!0,components:i.indicators,showDelayMs:1e3},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig(),o=new s.Timeout(r.showDelayMs,function(){n.show()}),a=function(){o.start()},h=function(){o.clear(),n.hide()};e.addEventHandler(e.EVENT.ON_STALL_STARTED,a),e.addEventHandler(e.EVENT.ON_STALL_ENDED,h),e.addEventHandler(e.EVENT.ON_SOURCE_UNLOADED,h),e.isStalled()&&this.show()},e}(r.Container);e.BufferingOverlay=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(62),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.playbackToggleButton=new o.HugePlaybackToggleButton,i.config=i.mergeConfig(e,{cssClass:"ui-playbacktoggle-overlay",components:[i.playbackToggleButton]},i.config),i}return n(e,t),e}(r.Container);e.PlaybackToggleOverlay=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(16),o=i(1),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-hugeplaybacktogglebutton",text:"Play/Pause"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i,!1);var r=function(){e.isPlaying()?e.pause("ui"):e.play("ui")},o=function(){e.isFullscreen()?e.exitFullscreen():e.enterFullscreen()},s=!0,a=0,h=0;this.onClick.subscribe(function(){if(s)return void r();var t=Date.now();return t-a<200?(o(),void(h=t)):t-a<500?(o(),r(),void(h=t)):(a=t,void setTimeout(function(){Date.now()-h>200&&r()},200))}),e.addEventHandler(e.EVENT.ON_PLAY,function(){s=!1}),e.addEventHandler(e.EVENT.ON_WARNING,function(t){5008===t.code&&(s=!0)});var u=function(t){t.type===e.EVENT.ON_CAST_START?n.hide():n.show()};e.addEventHandler(e.EVENT.ON_CAST_START,u),e.addEventHandler(e.EVENT.ON_CAST_STARTED,u),e.addEventHandler(e.EVENT.ON_CAST_STOPPED,u);var c=function(){n.setTransitionAnimationsEnabled(!1),n.onToggle.subscribeOnce(function(){n.setTransitionAnimationsEnabled(!0)})};c();var f=e.getConfig().playback&&Boolean(e.getConfig().playback.autoplay),l=!e.isReady()&&f;(e.isPlaying()||l)&&(this.on(),c(),e.addEventHandler(e.EVENT.ON_WARNING,function(t){5008===t.code&&c()}))},e.prototype.toDomElement=function(){var e=t.prototype.toDomElement.call(this);return e.append(new o.DOM("div",{class:this.prefixCss("image")})),e},e.prototype.setTransitionAnimationsEnabled=function(t){var e=this.prefixCss("no-transition-animations");t?this.getDomElement().removeClass(e):this.getDomElement().hasClass(e)||this.getDomElement().addClass(e)},e}(r.PlaybackToggleButton);e.HugePlaybackToggleButton=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),o=function(t){function e(e){var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-closebutton",text:"Close"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i);var n=this.getConfig();this.onClick.subscribe(function(){n.target.hide()})},e}(r.Button);e.CloseButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-airplaytogglebutton",text:"Apple AirPlay"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;if(t.prototype.configure.call(this,e,i),!e.isAirplayAvailable)return void this.hide();this.onClick.subscribe(function(){e.isAirplayAvailable()?e.showAirplayTargetPicker():console&&console.log("AirPlay unavailable")});var r=function(){e.isAirplayAvailable()?n.show():n.hide()};e.addEventHandler(e.EVENT.ON_AIRPLAY_AVAILABLE,r),r()},e}(r.ToggleButton);e.AirPlayToggleButton=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-piptogglebutton",text:"Picture-in-Picture"},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;if(t.prototype.configure.call(this,e,i),!e.isPictureInPictureAvailable)return void this.hide();this.onClick.subscribe(function(){e.isPictureInPictureAvailable()?e.isPictureInPicture()?e.exitPictureInPicture():e.enterPictureInPicture():console&&console.log("PIP unavailable")});var r=function(){e.isPictureInPictureAvailable()?n.show():n.hide()};e.addEventHandler(e.EVENT.ON_READY,r),e.addEventHandler(e.EVENT.ON_PICTURE_IN_PICTURE_ENTER,function(){n.on()}),e.addEventHandler(e.EVENT.ON_PICTURE_IN_PICTURE_EXIT,function(){n.off()}),r(),e.isPictureInPicture()&&this.on()},e}(r.ToggleButton);e.PictureInPictureToggleButton=o},function(t,e,i){i(67),i(70),t.exports=i(84)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(13),r=i(68),o=i(69);e.default=n.module("mi.BitdashPlayer",[]).controller("MiBitdashController",r.default).directive("miBitdashPlayer",o.default)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(13),r=function(){function t(t,e){this.$scope=t,this.$log=e,this.state={},this.config={},this.options={}}return t.prototype.$onInit=function(){this.state=this.$scope.state={},n.isDefined(this.$scope.config)&&n.isDefined(this.$scope.config.key)?this.config=this.$scope.config:this.$log.error("basic config for bitdash player is missing!"),n.isDefined(this.$scope.options)&&(this.options=this.$scope.options),n.isDefined(this.$scope.webcast)&&this.processWebcast(this.$scope.webcast)},t.prototype.processWebcast=function(t){var e=this.options.forcedState||t.state;if("ondemand"===e){var i=0;t.languages.some(function(e,n){if(t.language===e.language)return i=n,!0}),this.state.data=t.languages[i].ondemandStateData}else this.state.data=t[e+"StateData"];this.config.source=this.getPlayerConfigSource(t),this.config.style={ux:!1}},t.prototype.getPlayerConfigSource=function(t){return t.useDVRPlaybackInPostlive&&"postlive"===t.state?this.getDVRPlaybackToPostlive(t):this.getPlayerConfigSourceByState(t)},t.prototype.getDVRPlaybackToPostlive=function(t){var e=t.liveStateData.playout.hlsDvrUrl,i=t.name;if(n.isDefined(t.postliveStateData.playout.offset)){var r=parseInt(t.postliveStateData.playout.offset,10);if(r){var o=void 0,s=document.createElement("a");s.href=t.liveStateData.playout.hlsDvrUrl,o=s.search?"&":"?",e+=o+"wowzadvrplayliststart="+r+"000"}}return{hls:e,title:i}},t.prototype.getPlayerConfigSourceByState=function(t){var e=this.state.data.playout.hlsUrl,i=t.name,r=this.getHiveServiceUrlByLang(t);if(n.isDefined(this.state.data.playout.videoManagerHlsUrl)&&this.state.data.playout.videoManagerHlsUrl&&(e=this.state.data.playout.videoManagerHlsUrl),n.isDefined(this.state.data.playout.offset)){var o=parseInt(this.state.data.playout.offset,10);if(o>0){var s=void 0,a=document.createElement("a");a.href=e,s=a.search?"&":"?",e+=s+"start="+o}}return{hls:e,title:i,hiveServiceUrl:r}},t.prototype.getHiveServiceUrlByLang=function(t){var e=null;return t.languages&&t.language&&t.languages.forEach(function(i){i.language===t.language&&(e=n.copy(i.hiveServiceUrl))}),e},t}();r.$inject=["$scope","$log"],e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(13),r=function(t,e){return{controller:"MiBitdashController",controllerAs:"bitdashVm",replace:!0,restrict:"EA",scope:{config:"=",options:"=?",webcast:"="},template:'<div id="mi-bitdash-player" width="100%" height="auto"></div>',link:function(i){function r(){return l.theme.audioOnlyFileUrl?{audioOnlyOverlayConfig:{backgroundImageUrl:l.theme.audioOnlyFileUrl,hiddeIndicator:!0}}:{}}function o(i){h.setup(i).then(function(){u=t.window.bitmovin.playerui.UIManager.Factory,s()?u.buildAudioOnlyUI(h,r()):u.buildAudioVideoUI(h),(c=a("bitmovinplayer-container"))&&(c.style.minWidth="175px",c.style.minHeight="101px",document.getElementById("bitmovinplayer-video-mi-bitdash-player").setAttribute("title",l.name))},function(t){e.log("Error: "+t.code+" - "+t.message)})}function s(){return"audio-only"===l.layout.layout}function a(t){return document.getElementsByClassName(t)[0]}var h,u,c,f=i.config,l=i.webcast;i.state.data;!function(){h=t.window.bitmovin.player("mi-bitdash-player"),n.isDefined(h)&&!0===h.isReady()&&(h.destroy(),h=t.window.bitmovin.player("mi-bitdash-player")),"live"===l.state&&f.source.hiveServiceUrl?(t.window.bitmovin.initHiveSDN(h,{debugLevel:"off"}),h.initSession(f.source.hiveServiceUrl).then(function(t){var e=n.copy(f);e.source.hls=t.manifest,o(e)},function(t){e.warn("Hive init fails: "+t.code+" - "+t.message),o(f)})):o(f)}()}}};e.default=r,r.$inject=["$window","$log"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(71),r=i(7),o=i(19),s=i(29),a=i(62),h=i(31),u=i(16),c=i(18),f=i(8),l=i(77),p=i(22),d=i(32),v=i(5),g=i(23),y=i(17),w=i(30),m=i(78),b=i(14),E=i(0),I=i(6),S=i(24),R=i(49),O=i(54),T=i(53),C=i(2),N=i(55),k=i(57),A=i(50),P=i(52),_=i(51),D=i(56),x=i(79),M=i(28),U=i(80),L=i(81),F=i(82),j=i(59),H=i(58),B=i(60),V=i(83),q=i(61),K=i(63),Q=i(27),z=i(64),G=i(26),J=i(65),X=i(21),W=i(39),Y=i(40),$=i(43),Z=i(35),tt=i(37),et=i(36),it=i(38),nt=i(25),rt=i(45),ot=i(4),st=i(47),at=i(48),ht=i(34),ut=i(41),ct=i(42),ft=i(11),lt=i(10),pt=i(12),dt=i(20),vt=i(15),gt=i(44),yt=i(46);"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t});var wt={version:"{{VERSION}}",UIManager:n.UIManager,UIInstanceManager:n.UIInstanceManager,ArrayUtils:ft.ArrayUtils,StringUtils:lt.StringUtils,PlayerUtils:pt.PlayerUtils,UIUtils:dt.UIUtils,BrowserUtils:vt.BrowserUtils,StorageUtils:gt.StorageUtils,AdClickOverlay:F.AdClickOverlay,AdMessageLabel:L.AdMessageLabel,AdSkipButton:U.AdSkipButton,AirPlayToggleButton:z.AirPlayToggleButton,AudioQualitySelectBox:S.AudioQualitySelectBox,AudioTrackSelectBox:R.AudioTrackSelectBox,BufferingOverlay:B.BufferingOverlay,Button:r.Button,CastStatusOverlay:O.CastStatusOverlay,CastToggleButton:T.CastToggleButton,CastUIContainer:V.CastUIContainer,ClickOverlay:M.ClickOverlay,CloseButton:K.CloseButton,Component:C.Component,Container:E.Container,ControlBar:o.ControlBar,ErrorMessageOverlay:N.ErrorMessageOverlay,FullscreenToggleButton:s.FullscreenToggleButton,HugePlaybackToggleButton:a.HugePlaybackToggleButton,HugeReplayButton:H.HugeReplayButton,Label:I.Label,MetadataLabel:Q.MetadataLabel,MetadataLabelContent:Q.MetadataLabelContent,PictureInPictureToggleButton:J.PictureInPictureToggleButton,PlaybackSpeedSelectBox:j.PlaybackSpeedSelectBox,PlaybackTimeLabel:h.PlaybackTimeLabel,PlaybackTimeLabelMode:h.PlaybackTimeLabelMode,PlaybackToggleButton:u.PlaybackToggleButton,PlaybackToggleOverlay:q.PlaybackToggleOverlay,RecommendationOverlay:k.RecommendationOverlay,SeekBar:c.SeekBar,SeekBarLabel:A.SeekBarLabel,SelectBox:f.SelectBox,ItemSelectionList:l.ItemSelectionList,SettingsPanel:p.SettingsPanel,SettingsPanelItem:p.SettingsPanelItem,SettingsToggleButton:d.SettingsToggleButton,Spacer:X.Spacer,SubtitleOverlay:P.SubtitleOverlay,SubtitleSelectBox:_.SubtitleSelectBox,TitleBar:D.TitleBar,ToggleButton:v.ToggleButton,UIContainer:b.UIContainer,VideoQualitySelectBox:g.VideoQualitySelectBox,VolumeControlButton:x.VolumeControlButton,VolumeSlider:G.VolumeSlider,VolumeToggleButton:y.VolumeToggleButton,VRToggleButton:w.VRToggleButton,Watermark:m.Watermark,subtitlesettings:{BackgroundColorSelectBox:W.BackgroundColorSelectBox,BackgroundOpacitySelectBox:Y.BackgroundOpacitySelectBox,CharacterEdgeSelectBox:$.CharacterEdgeSelectBox,FontColorSelectBox:Z.FontColorSelectBox,FontFamilySelectBox:tt.FontFamilySelectBox,FontOpacitySelectBox:et.FontOpacitySelectBox,FontSizeSelectBox:it.FontSizeSelectBox,SubtitleSettingsButton:nt.SubtitleSettingsButton,SubtitleSettingsCloseButton:rt.SubtitleSettingsCloseButton,SubtitleSettingSelectBox:ot.SubtitleSettingSelectBox,SubtitleSettingsLabel:st.SubtitleSettingsLabel,SubtitleSettingsOpenButton:at.SubtitleSettingsOpenButton,SubtitleSettingsPanel:ht.SubtitleSettingsPanel,WindowColorSelectBox:ut.WindowColorSelectBox,WindowOpacitySelectBox:ct.WindowOpacitySelectBox,SubtitleSettingsResetButton:yt.SubtitleSettingsResetButton}};window.bitmovin.playerui=wt,t.exports=wt},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=i(14),s=i(1),a=i(0),h=i(16),u=i(29),c=i(30),f=i(17),l=i(18),p=i(31),d=i(19),v=i(3),g=i(32),y=i(22),w=i(34),m=i(47),b=i(48),E=i(23),I=i(24),S=i(49),R=i(50),O=i(26),T=i(51),C=i(52),N=i(53),k=i(54),A=i(55),P=i(56),_=i(57),D=i(59),x=i(60),M=i(61),U=i(63),L=i(27),F=i(64),j=i(65),H=i(76),B=i(21),V=i(20),q=i(11),K=i(15),Q=function(){function t(t,e,i){void 0===i&&(i={});var n=this;if(this.events={onUiVariantResolve:new v.EventDispatcher},e instanceof o.UIContainer){var a=e,h=[];h.push({ui:a}),this.uiVariants=h}else this.uiVariants=e;this.player=t,this.config=r({},i,{events:{onUpdated:new v.EventDispatcher}}),this.managerPlayerWrapper=new J(t);var u=function(){var e=t.getConfig().source||{},o=r({},i);o.metadata=o.metadata||{};var s={metadata:{title:e.title,description:e.description,markers:e.markers},recommendations:e.recommendations};n.config.metadata=n.config.metadata||{},n.config.metadata.title=s.metadata.title||o.metadata.title,n.config.metadata.description=s.metadata.description||o.metadata.description,n.config.metadata.markers=s.metadata.markers||o.metadata.markers||[],n.config.recommendations=s.recommendations||o.recommendations||[]};u(),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_SOURCE_LOADED,function(){u(),n.config.events.onUpdated.dispatch(n)}),i.container?this.uiContainerElement=(i.container,HTMLElement,new s.DOM(i.container)):this.uiContainerElement=new s.DOM(t.getFigure()),this.uiInstanceManagers=[];for(var c=[],f=0,l=this.uiVariants;f<l.length;f++){var p=l[f];null==p.condition&&c.push(p),this.uiInstanceManagers.push(new G(t,p.ui,this.config))}if(c.length>1)throw Error("Too many UIs without a condition: You cannot have more than one default UI");if(c.length>0&&c[0]!==this.uiVariants[this.uiVariants.length-1])throw Error("Invalid UI variant order: the default UI (without condition) must be at the end of the list");void 0===i.autoUiVariantResolve&&(i.autoUiVariantResolve=!0);var d=null,g=function(e){if(null!=e)switch(e.type){case t.EVENT.ON_AD_STARTED:d=e;break;case t.EVENT.ON_AD_FINISHED:case t.EVENT.ON_AD_SKIPPED:case t.EVENT.ON_AD_ERROR:d=null;break;case t.EVENT.ON_READY:d&&!t.isAd()&&(d=null)}var i=null!=d,r=i&&"vast"===d.clientType;n.resolveUiVariant({isAd:i,isAdWithUI:r,adClientType:i?d.clientType:null},function(t){t.isAd&&n.currentUi.getWrappedPlayer().fireEventInUI(n.player.EVENT.ON_AD_STARTED,d)})};i.autoUiVariantResolve&&(this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_READY,g),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PLAY,g),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PAUSED,g),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_STARTED,g),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_FINISHED,g),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_SKIPPED,g),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_AD_ERROR,g),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_PLAYER_RESIZE,g),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER,g),this.managerPlayerWrapper.getPlayer().addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT,g)),g(null)}return t.prototype.getConfig=function(){return this.config},t.prototype.getUiVariants=function(){return this.uiVariants},t.prototype.switchToUiVariant=function(t,e){var i=this.uiVariants.indexOf(t),n=this.uiInstanceManagers[i],r=!1;n!==this.currentUi&&(r=!0),r&&(this.currentUi&&this.currentUi.getUI().hide(),this.currentUi=n,null!=this.currentUi&&(this.currentUi.isConfigured()||this.addUi(this.currentUi),e&&e(),this.currentUi.getUI().show()))},t.prototype.resolveUiVariant=function(t,e){void 0===t&&(t={});var i={isAd:!1,isAdWithUI:!1,adClientType:null,isFullscreen:this.player.isFullscreen(),isMobile:K.BrowserUtils.isMobile,isPlaying:this.player.isPlaying(),width:this.uiContainerElement.width(),documentWidth:document.body.clientWidth},n=r({},i,t);this.events.onUiVariantResolve.dispatch(this,n);for(var o=null,s=0,a=this.uiVariants;s<a.length;s++){var h=a[s];if(null==h.condition||!0===h.condition(n)){o=h;break}}this.switchToUiVariant(o,function(){e&&e(n)})},t.prototype.addUi=function(t){var e=t.getUI().getDomElement(),i=t.getWrappedPlayer();t.configureControls(),this.uiContainerElement.append(e),i.isReady()&&i.fireEventInUI(i.EVENT.ON_READY,{}),window.requestAnimationFrame?requestAnimationFrame(function(){t.onConfigured.dispatch(t.getUI())}):setTimeout(function(){t.onConfigured.dispatch(t.getUI())},0)},t.prototype.releaseUi=function(t){t.releaseControls(),t.getUI().getDomElement().remove(),t.clearEventHandlers()},t.prototype.release=function(){for(var t=0,e=this.uiInstanceManagers;t<e.length;t++){var i=e[t];this.releaseUi(i)}this.managerPlayerWrapper.clearEventHandlers()},Object.defineProperty(t.prototype,"onUiVariantResolve",{get:function(){return this.events.onUiVariantResolve},enumerable:!0,configurable:!0}),t.prototype.getTimelineMarkers=function(){return this.config.metadata.markers},t.prototype.addTimelineMarker=function(t){this.config.metadata.markers.push(t),this.config.events.onUpdated.dispatch(this)},t.prototype.removeTimelineMarker=function(t){return q.ArrayUtils.remove(this.config.metadata.markers,t)===t&&(this.config.events.onUpdated.dispatch(this),!0)},t}();e.UIManager=Q,function(t){!function(e){function i(e,i){void 0===i&&(i={});return new t(e,[{ui:v(),condition:function(t){return t.isMobile&&t.documentWidth<600}},{ui:r()}],i)}function n(e,i){void 0===i&&(i={});return new t(e,[{ui:V(),condition:function(t){return t.isMobile&&t.documentWidth<600}},{ui:s()}],i)}function r(){var t=new C.SubtitleOverlay,e=new y.SettingsPanel({components:[new y.SettingsPanelItem("Video Quality",new E.VideoQualitySelectBox),new y.SettingsPanelItem("Speed",new D.PlaybackSpeedSelectBox),new y.SettingsPanelItem("Audio Track",new S.AudioTrackSelectBox),new y.SettingsPanelItem("Audio Quality",new I.AudioQualitySelectBox)],hidden:!0}),i=new w.SubtitleSettingsPanel({hidden:!0,overlay:t,settingsPanel:e}),n=new b.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new y.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:n}),new T.SubtitleSelectBox));var r=new d.ControlBar({components:[e,i,new a.Container({components:[new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new R.SeekBarLabel}),new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]}),new a.Container({components:[new h.PlaybackToggleButton,new f.VolumeToggleButton,new O.VolumeSlider,new B.Spacer,new j.PictureInPictureToggleButton,new F.AirPlayToggleButton,new N.CastToggleButton,new c.VRToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton],cssClasses:["controlbar-bottom"]})]});return new o.UIContainer({components:[t,new x.BufferingOverlay,new M.PlaybackToggleOverlay,new k.CastStatusOverlay,r,new _.RecommendationOverlay,new A.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc"]})}function s(){var t=new C.SubtitleOverlay,e=new y.SettingsPanel({components:[new y.SettingsPanelItem("Speed",new D.PlaybackSpeedSelectBox),new y.SettingsPanelItem("Audio Track",new S.AudioTrackSelectBox),new y.SettingsPanelItem("Audio Quality",new I.AudioQualitySelectBox)],hidden:!0}),i=new w.SubtitleSettingsPanel({hidden:!0,overlay:t,settingsPanel:e}),n=new b.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new y.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:n}),new T.SubtitleSelectBox));var r=new d.ControlBar({components:[e,i,new a.Container({components:[new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new R.SeekBarLabel}),new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]}),new a.Container({components:[new h.PlaybackToggleButton,new f.VolumeToggleButton,new O.VolumeSlider,new B.Spacer,new F.AirPlayToggleButton,new N.CastToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton],cssClasses:["controlbar-bottom"]})]});return new o.UIContainer({components:[new H.AudioOnlyOverlay,t,new x.BufferingOverlay,new M.PlaybackToggleOverlay,new k.CastStatusOverlay,r,new _.RecommendationOverlay,new A.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc"]})}function v(){var t=new C.SubtitleOverlay,e=new y.SettingsPanel({components:[new y.SettingsPanelItem("Video Quality",new E.VideoQualitySelectBox),new y.SettingsPanelItem("Speed",new D.PlaybackSpeedSelectBox),new y.SettingsPanelItem("Audio Track",new S.AudioTrackSelectBox),new y.SettingsPanelItem("Audio Quality",new I.AudioQualitySelectBox)],hidden:!0,hideDelay:-1}),i=new w.SubtitleSettingsPanel({hidden:!0,hideDelay:-1,overlay:t,settingsPanel:e}),n=new b.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new y.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:n}),new T.SubtitleSelectBox)),e.addComponent(new U.CloseButton({target:e})),i.addComponent(new U.CloseButton({target:i}));var r=new d.ControlBar({components:[new a.Container({components:[new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new R.SeekBarLabel}),new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]})]});return new o.UIContainer({components:[t,new x.BufferingOverlay,new k.CastStatusOverlay,new M.PlaybackToggleOverlay,r,new P.TitleBar({components:[new L.MetadataLabel({content:L.MetadataLabelContent.Title}),new N.CastToggleButton,new c.VRToggleButton,new f.VolumeToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton]}),e,i,new _.RecommendationOverlay,new A.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc","ui-skin-smallscreen"]})}function V(){var t=new C.SubtitleOverlay,e=new y.SettingsPanel({components:[new y.SettingsPanelItem("Speed",new D.PlaybackSpeedSelectBox),new y.SettingsPanelItem("Audio Track",new S.AudioTrackSelectBox),new y.SettingsPanelItem("Audio Quality",new I.AudioQualitySelectBox)],hidden:!0,hideDelay:-1}),i=new w.SubtitleSettingsPanel({hidden:!0,hideDelay:-1,overlay:t,settingsPanel:e}),n=new b.SubtitleSettingsOpenButton({subtitleSettingsPanel:i,settingsPanel:e});e.addComponent(new y.SettingsPanelItem(new m.SubtitleSettingsLabel({text:"Subtitles",opener:n}),new T.SubtitleSelectBox)),e.addComponent(new U.CloseButton({target:e})),i.addComponent(new U.CloseButton({target:i}));var r=new d.ControlBar({components:[new a.Container({components:[new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.CurrentTime,hideInLivePlayback:!0}),new l.SeekBar({label:new R.SeekBarLabel}),new p.PlaybackTimeLabel({timeLabelMode:p.PlaybackTimeLabelMode.TotalTime,cssClasses:["text-right"]})],cssClasses:["controlbar-top"]})]});return new o.UIContainer({components:[new H.AudioOnlyOverlay,t,new x.BufferingOverlay,new k.CastStatusOverlay,new M.PlaybackToggleOverlay,r,new P.TitleBar({components:[new L.MetadataLabel({content:L.MetadataLabelContent.Title}),new N.CastToggleButton,new c.VRToggleButton,new f.VolumeToggleButton,new g.SettingsToggleButton({settingsPanel:e}),new u.FullscreenToggleButton]}),e,i,new _.RecommendationOverlay,new A.ErrorMessageOverlay],cssClasses:["ui-skin-mi-wbc","ui-skin-smallscreen"]})}e.buildAudioVideoUI=i,e.buildAudioOnlyUI=n}(t.Factory||(t.Factory={}))}(Q=e.UIManager||(e.UIManager={})),e.UIManager=Q;var z=function(){function t(t,e,i){this.events={onConfigured:new v.EventDispatcher,onSeek:new v.EventDispatcher,onSeekPreview:new v.EventDispatcher,onSeeked:new v.EventDispatcher,onComponentShow:new v.EventDispatcher,onComponentHide:new v.EventDispatcher,onControlsShow:new v.EventDispatcher,onPreviewControlsHide:new v.EventDispatcher,onControlsHide:new v.EventDispatcher,onRelease:new v.EventDispatcher},this.playerWrapper=new J(t),this.ui=e,this.config=i}return t.prototype.getConfig=function(){return this.config},t.prototype.getUI=function(){return this.ui},t.prototype.getPlayer=function(){return this.playerWrapper.getPlayer()},Object.defineProperty(t.prototype,"onConfigured",{get:function(){return this.events.onConfigured},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSeek",{get:function(){return this.events.onSeek},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSeekPreview",{get:function(){return this.events.onSeekPreview},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSeeked",{get:function(){return this.events.onSeeked},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onComponentShow",{get:function(){return this.events.onComponentShow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onComponentHide",{get:function(){return this.events.onComponentHide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onControlsShow",{get:function(){return this.events.onControlsShow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPreviewControlsHide",{get:function(){return this.events.onPreviewControlsHide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onControlsHide",{get:function(){return this.events.onControlsHide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRelease",{get:function(){return this.events.onRelease},enumerable:!0,configurable:!0}),t.prototype.clearEventHandlers=function(){this.playerWrapper.clearEventHandlers();var t=this.events;for(var e in t){t[e].unsubscribeAll()}},t}();e.UIInstanceManager=z;var G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getWrappedPlayer=function(){return this.getPlayer()},e.prototype.configureControls=function(){this.configureControlsTree(this.getUI()),this.configured=!0},e.prototype.isConfigured=function(){return this.configured},e.prototype.configureControlsTree=function(t){var e=this,i=[];V.UIUtils.traverseTree(t,function(t){for(var n=0,r=i;n<r.length;n++){if(r[n]===t)throw console&&console.error("Circular reference in UI tree",t),Error("Circular reference in UI tree: "+t.constructor.name)}t.initialize(),t.configure(e.getPlayer(),e),i.push(t)})},e.prototype.releaseControls=function(){this.configured&&(this.onRelease.dispatch(this.getUI()),this.releaseControlsTree(this.getUI()),this.configured=!1),this.released=!0},e.prototype.isReleased=function(){return this.released},e.prototype.releaseControlsTree=function(t){if(t.release(),t instanceof a.Container)for(var e=0,i=t.getComponents();e<i.length;e++){var n=i[e];this.releaseControlsTree(n)}},e.prototype.clearEventHandlers=function(){t.prototype.clearEventHandlers.call(this)},e}(z),J=function(){function t(t){var e=this;this.eventHandlers={},this.player=t;var i=[];for(var n in t)i.push(n);for(var r=[],o=[],s=0,a=i;s<a.length;s++){var n=a[s];"function"==typeof t[n]?r.push(n):o.push(n)}for(var h={},u=0,c=r;u<c.length;u++){var f=c[u];!function(e){h[e]=function(){return t[e].apply(t,arguments)}}(f)}for(var l=0,p=o;l<p.length;l++){var d=p[l];!function(e){var i=Object.getOwnPropertyDescriptor(t,e)||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),e);i&&(i.get||i.set)?Object.defineProperty(h,e,{get:function(){return i.get.call(t)},set:function(e){return i.set.call(t,e)}}):h[e]=t[e]}(d)}h.addEventHandler=function(i,n){return t.on?t.on(i,n):t.addEventHandler(i,n),e.eventHandlers[i]||(e.eventHandlers[i]=[]),e.eventHandlers[i].push(n),h},h.removeEventHandler=function(i,n){return t.off?t.off(i,n):t.removeEventHandler(i,n),e.eventHandlers[i]&&q.ArrayUtils.remove(e.eventHandlers[i],n),h},h.fireEventInUI=function(t,i){if(e.eventHandlers[t])for(var n=Object.assign({},{timestamp:Date.now(),type:t,uiSourced:!0},i),r=0,o=e.eventHandlers[t];r<o.length;r++){var s=o[r];s(n)}},this.wrapper=h}return t.prototype.getPlayer=function(){return this.wrapper},t.prototype.clearEventHandlers=function(){for(var t in this.eventHandlers)for(var e=0,i=this.eventHandlers[t];e<i.length;e++){var n=i[e];this.player.removeEventHandler(t,n)}},t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){function e(){return i++}var i=1;t.next=e}(e.Guid||(e.Guid={}))},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(44),o=i(2),s=i(3),a=function(){function t(){var t=this;this._properties={fontColor:new u(this),fontOpacity:new u(this),fontFamily:new u(this),fontSize:new u(this),characterEdge:new u(this),backgroundColor:new u(this),backgroundOpacity:new u(this),windowColor:new u(this),windowOpacity:new u(this)},this.userSettings={},this.localStorageKey=h.instance().prefixCss("subtitlesettings");var e=this;for(var i in this._properties)!function(i){e._properties[i].onChanged.subscribe(function(e,n){n.isSet()?t.userSettings[i]=n.value:delete t.userSettings[i],t.save()})}(i);this.load()}return t.prototype.reset=function(){for(var t in this._properties)this._properties[t].clear()},Object.defineProperty(t.prototype,"fontColor",{get:function(){return this._properties.fontColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontOpacity",{get:function(){return this._properties.fontOpacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._properties.fontFamily},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._properties.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"characterEdge",{get:function(){return this._properties.characterEdge},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._properties.backgroundColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundOpacity",{get:function(){return this._properties.backgroundOpacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowColor",{get:function(){return this._properties.windowColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowOpacity",{get:function(){return this._properties.windowOpacity},enumerable:!0,configurable:!0}),t.prototype.save=function(){r.StorageUtils.setObject(this.localStorageKey,this.userSettings)},t.prototype.load=function(){this.userSettings=r.StorageUtils.getObject(this.localStorageKey)||{};for(var t in this.userSettings)this._properties[t].value=this.userSettings[t]},t}();e.SubtitleSettingsManager=a;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.instance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.prefixCss=function(e){return t.prototype.prefixCss.call(this,e)},e}(o.Component),u=function(){function t(t){this._manager=t,this._onChanged=new s.EventDispatcher}return t.prototype.isSet=function(){return null!=this._value},t.prototype.clear=function(){this._value=null,this.onChangedEvent(null)},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){"string"==typeof t&&"null"===t&&(t=null),this._value=t,this.onChangedEvent(t)},enumerable:!0,configurable:!0}),t.prototype.onChangedEvent=function(t){this._onChanged.dispatch(this._manager,this)},Object.defineProperty(t.prototype,"onChanged",{get:function(){return this._onChanged.getEvent()},enumerable:!0,configurable:!0}),t}();e.SubtitleSettingsProperty=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),r=function(){function t(){this.state={}}return t.prototype.load=function(t,e){var i=this;if(this.state[t]){var r=this.state[t];r.loadedCallback=e,r.loaded&&this.callLoadedCallback(r)}else{var o={url:t,image:new n.DOM("img",{}),loadedCallback:e,loaded:!1,width:0,height:0};this.state[t]=o,o.image.on("load",function(t){o.loaded=!0,o.width=o.image.get(0).width,o.height=o.image.get(0).height,i.callLoadedCallback(o)}),o.image.attr("src",o.url)}},t.prototype.callLoadedCallback=function(t){t.loadedCallback(t.url,t.width,t.height)},t}();e.ImageLoader=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),o=i(1),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.canvasWidth=160,i.canvasHeight=90,i.interferenceHeight=50,i.lastFrameUpdate=0,i.frameInterval=60,i.useAnimationFrame=!!window.requestAnimationFrame,i.config=i.mergeConfig(e,{cssClass:"ui-tvnoisecanvas"},i.config),i}return n(e,t),e.prototype.toDomElement=function(){return this.canvas=new o.DOM("canvas",{class:this.getCssClasses()})},e.prototype.start=function(){this.canvasElement=this.canvas.get(0),this.canvasContext=this.canvasElement.getContext("2d"),this.noiseAnimationWindowPos=-this.canvasHeight,this.lastFrameUpdate=0,this.canvasElement.width=this.canvasWidth,this.canvasElement.height=this.canvasHeight,this.renderFrame()},e.prototype.stop=function(){this.useAnimationFrame?cancelAnimationFrame(this.frameUpdateHandlerId):clearTimeout(this.frameUpdateHandlerId)},e.prototype.renderFrame=function(){if(this.lastFrameUpdate+this.frameInterval>(new Date).getTime())return void this.scheduleNextRender();for(var t,e=this.canvasWidth,i=this.canvasHeight,n=this.canvasContext.createImageData(e,i),r=0;r<i;r++)for(var o=0;o<e;o++)t=e*r*4+4*o,n.data[t]=255*Math.random(),(r<this.noiseAnimationWindowPos||r>this.noiseAnimationWindowPos+this.interferenceHeight)&&(n.data[t]*=.85),n.data[t+1]=n.data[t],n.data[t+2]=n.data[t],n.data[t+3]=50;this.canvasContext.putImageData(n,0,0),this.lastFrameUpdate=(new Date).getTime(),this.noiseAnimationWindowPos+=7,this.noiseAnimationWindowPos>i&&(this.noiseAnimationWindowPos=-i),this.scheduleNextRender()},e.prototype.scheduleNextRender=function(){this.useAnimationFrame?this.frameUpdateHandlerId=window.requestAnimationFrame(this.renderFrame.bind(this)):this.frameUpdateHandlerId=setTimeout(this.renderFrame.bind(this),this.frameInterval)},e}(r.Component);e.TvNoiseCanvas=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(2),s=i(9),a=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.indicatorConfig=[new o.Component({tag:"div",cssClass:"ui-audioonly-overlay-indicator",hidden:!0})],i.config=i.mergeConfig(e,{cssClass:"ui-audioonly-overlay",hidden:!1,components:i.indicatorConfig},i.config),i}return n(e,t),e.prototype.configure=function(e,i){t.prototype.configure.call(this,e,i),this.componentConfig=i.getConfig().audioOnlyOverlayConfig||{};var n=this.getConfig(),r=n.components[0],o=this.componentConfig.backgroundImageUrl,a=this.getDomElement(),h=new s.Timeout(400,function(){r.show()}),u=function(){h.start()},c=function(){h.clear(),r.hide()};o&&function(){a.css("backgroundImage","url("+o+")"),a.css("backgroundSize","contain"),a.css("backgroundColor","#000000"),a.css("animation","none"),a.css("backgroundPosition","center")}(),this.componentConfig.hiddeIndicator||(e.addEventHandler(e.EVENT.ON_PLAY,u),e.addEventHandler(e.EVENT.ON_PAUSED,c))},e}(r.Container);e.AudioOnlyOverlay=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(33),o=i(1),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{tag:"ul",cssClass:"ui-itemselectionlist"},i.config),i}return n(e,t),e.prototype.isActive=function(){return this.items.length>1},e.prototype.toDomElement=function(){var t=new o.DOM("ul",{id:this.config.id,class:this.getCssClasses()});return this.listElement=t,this.updateDomItems(),t},e.prototype.updateDomItems=function(t){var i=this;void 0===t&&(t=null),this.listElement.empty();for(var n=null,r=function(t){t.addClass(i.prefixCss(e.CLASS_SELECTED))},s=function(t){t.removeClass(i.prefixCss(e.CLASS_SELECTED))},a=this,h=0,u=this.items;h<u.length;h++){var c=u[h];!function(e){var h=new o.DOM("li",{type:"li",class:a.prefixCss("ui-selectionlistitem")}).append(new o.DOM("a",{}).html(e.label));n||(null==t?n=h:String(t)===e.key&&(n=h)),h.on("click",function(){n&&s(n),n=h,r(h),i.onItemSelectedEvent(e.key,!1)}),n&&r(n),a.listElement.append(h)}(c)}},e.prototype.onItemAddedEvent=function(e){t.prototype.onItemAddedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemRemovedEvent=function(e){t.prototype.onItemRemovedEvent.call(this,e),this.updateDomItems(this.selectedItem)},e.prototype.onItemSelectedEvent=function(e,i){void 0===i&&(i=!0),t.prototype.onItemSelectedEvent.call(this,e),i&&this.updateDomItems(e)},e}(r.ListSelector);s.CLASS_SELECTED="selected",e.ItemSelectionList=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(28),o=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-watermark",url:"http://bitmovin.com"},i.config),i}return n(e,t),e}(r.ClickOverlay);e.Watermark=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(26),s=i(17),a=i(9),h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.volumeToggleButton=new s.VolumeToggleButton,i.volumeSlider=new o.VolumeSlider({vertical:null==e.vertical||e.vertical,hidden:!0}),i.config=i.mergeConfig(e,{cssClass:"ui-volumecontrolbutton",components:[i.volumeToggleButton,i.volumeSlider],hideDelay:500},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getVolumeToggleButton(),o=this.getVolumeSlider();this.volumeSliderHideTimeout=new a.Timeout(this.getConfig().hideDelay,function(){o.hide()});var s=!1;r.getDomElement().on("mouseenter",function(){o.isHidden()&&o.show(),n.volumeSliderHideTimeout.clear()}),r.getDomElement().on("mouseleave",function(){n.volumeSliderHideTimeout.reset()}),o.getDomElement().on("mouseenter",function(){n.volumeSliderHideTimeout.clear(),s=!0}),o.getDomElement().on("mouseleave",function(){o.isSeeking()?n.volumeSliderHideTimeout.clear():n.volumeSliderHideTimeout.reset(),s=!1}),o.onSeeked.subscribe(function(){s||n.volumeSliderHideTimeout.reset()})},e.prototype.release=function(){t.prototype.release.call(this),this.volumeSliderHideTimeout.clear()},e.prototype.getVolumeToggleButton=function(){return this.volumeToggleButton},e.prototype.getVolumeSlider=function(){return this.volumeSlider},e}(r.Container);e.VolumeControlButton=h},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),o=i(10),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-button-ad-skip",skipMessage:{countdown:"Skip ad in {remainingTime}",skip:"Skip ad"}},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig(),s=r.skipMessage,a=null,h=function(){a.skipOffset?n.show():n.hide(),e.getCurrentTime()<a.skipOffset?n.setText(o.StringUtils.replaceAdMessagePlaceholders(r.skipMessage.countdown,a.skipOffset,e)):n.setText(r.skipMessage.skip)},u=function(t){a=t,s=a.skipMessage||s,h(),e.addEventHandler(e.EVENT.ON_TIME_CHANGED,h),e.addEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,h)},c=function(){e.removeEventHandler(e.EVENT.ON_TIME_CHANGED,h),e.removeEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,h)};e.addEventHandler(e.EVENT.ON_AD_STARTED,u),e.addEventHandler(e.EVENT.ON_AD_SKIPPED,c),e.addEventHandler(e.EVENT.ON_AD_ERROR,c),e.addEventHandler(e.EVENT.ON_AD_FINISHED,c),this.onClick.subscribe(function(){e.skipAd()})},e}(r.Button);e.AdSkipButton=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),o=i(10),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i.config=i.mergeConfig(e,{cssClass:"ui-label-ad-message",text:"This ad will end in {remainingTime} seconds."},i.config),i}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig().text,s=function(){n.setText(o.StringUtils.replaceAdMessagePlaceholders(r,null,e))},a=function(t){r=t.adMessage||r,s(),e.addEventHandler(e.EVENT.ON_TIME_CHANGED,s),e.addEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,s)},h=function(){e.removeEventHandler(e.EVENT.ON_TIME_CHANGED,s),e.removeEventHandler(e.EVENT.ON_CAST_TIME_UPDATED,s)};e.addEventHandler(e.EVENT.ON_AD_STARTED,a),e.addEventHandler(e.EVENT.ON_AD_SKIPPED,h),e.addEventHandler(e.EVENT.ON_AD_ERROR,h),e.addEventHandler(e.EVENT.ON_AD_FINISHED,h)},e}(r.Label);e.AdMessageLabel=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(28),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=null,o=!e.getConfig().advertising||!e.getConfig().advertising.hasOwnProperty("clickThroughEnabled")||e.getConfig().advertising.clickThroughEnabled;e.addEventHandler(e.EVENT.ON_AD_STARTED,function(t){r=t.clickThroughUrl,o?n.setUrl(r):n.setUrl(null)});var s=function(){n.setUrl(null)};e.addEventHandler(e.EVENT.ON_AD_FINISHED,s),e.addEventHandler(e.EVENT.ON_AD_SKIPPED,s),e.addEventHandler(e.EVENT.ON_AD_ERROR,s),this.onClick.subscribe(function(){e.pause("ui-content-click"),e.fireEvent(e.EVENT.ON_AD_CLICKED,{clickThroughUrl:r})})},e}(r.ClickOverlay);e.AdClickOverlay=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(14),o=i(9),s=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.configure=function(e,i){var n=this;t.prototype.configure.call(this,e,i);var r=this.getConfig(),s=!1,a=function(){i.onControlsHide.dispatch(n),s=!1};this.castUiHideTimeout=new o.Timeout(r.hideDelay,a);var h=function(){s||(i.onControlsShow.dispatch(n),s=!0)},u=function(){h(),n.castUiHideTimeout.clear()},c=function(){h(),n.castUiHideTimeout.start()},f=function(){e.isPlaying()?c():u()};e.addEventHandler(e.EVENT.ON_READY,c),e.addEventHandler(e.EVENT.ON_SOURCE_LOADED,c),e.addEventHandler(e.EVENT.ON_PLAY,c),e.addEventHandler(e.EVENT.ON_PAUSED,u),e.addEventHandler(e.EVENT.ON_SEEK,u),e.addEventHandler(e.EVENT.ON_SEEKED,f)},e.prototype.release=function(){t.prototype.release.call(this),this.castUiHideTimeout.clear()},e}(r.UIContainer);e.CastUIContainer=s},function(module,exports){/*! Hive Stats Pack build 3.5.1 Copyright(c) 2015 HiveStreaming AB, All rights reserved.
 * Authors: mikael.hogqvist@hivestreaming.com - riccardo.reale@hivestreaming.com - roberto.roverso@hivestreaming.com */
/*! AtatusJs - v2.3.12 - 2016-07-03
 * Copyright (c) 2016 Atatus */
!function(t){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function i(t){return void 0===t}if(t){var n={},r=t.TraceKit,o=[].slice,s="?";n.noConflict=function(){return t.TraceKit=r,n},n.wrap=function(t){function e(){try{return t.apply(this,arguments)}catch(t){throw n.report(t),t}}return e},n.report=function(){function i(t){h(),l.push(t)}function r(t){for(var e=l.length-1;e>=0;--e)l[e]===t&&l.splice(e,1)}function s(t,i){var r=null;if(!i||n.collectWindowErrors){for(var s in l)if(e(l,s))try{l[s].apply(null,[t].concat(o.call(arguments,2)))}catch(t){r=t}if(r)throw r}}function a(t,e,i,r,o){var a=null;if(o)a=n.computeStackTrace(o);else if(d)n.computeStackTrace.augmentStackTraceWithInitialElement(d,e,i,t),a=d,d=null,p=null;else{var h={url:e,line:i,column:r};h.func=n.computeStackTrace.guessFunctionName(h.url,h.line),h.context=n.computeStackTrace.gatherContext(h.url,h.line),a={mode:"onerror",message:t,url:document.location.href,stack:[h],useragent:navigator.userAgent}}return s(a,"from window.onerror"),!!c&&c.apply(this,arguments)}function h(){!0!==f&&(c=t.onerror,t.onerror=a,f=!0)}function u(e){var i=o.call(arguments,1);if(d){if(p===e)return;var r=d;d=null,p=null,s.apply(null,[r,null].concat(i))}var a=n.computeStackTrace(e);throw d=a,p=e,t.setTimeout(function(){p===e&&(d=null,p=null,s.apply(null,[a,null].concat(i)))},a.incomplete?2e3:0),e}var c,f,l=[],p=null,d=null;return u.subscribe=i,u.unsubscribe=r,u}(),n.computeStackTrace=function(){function r(e){if(!n.remoteFetching)return"";try{var i=function(){try{return new t.XMLHttpRequest}catch(e){return new t.ActiveXObject("Microsoft.XMLHTTP")}}();return i.open("GET",e,!1),i.send(""),i.responseText}catch(t){return""}}function o(t){if("string"!=typeof t)return[];if(!e(I,t)){var i="",n="";try{n=document.domain}catch(t){}-1!==t.indexOf(n)&&(i=r(t)),I[t]=i?i.split("\n"):[]}return I[t]}function a(t,e){var n,r=/function ([^(]*)\(([^)]*)\)/,a=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,h="",u=o(t);if(!u.length)return s;for(var c=0;10>c;++c)if(h=u[e-c]+h,!i(h)){if(n=a.exec(h))return n[1];if(n=r.exec(h))return n[1]}return s}function h(t,e){var r=o(t);if(!r.length)return null;var s=[],a=Math.floor(n.linesOfContext/2),h=a+n.linesOfContext%2,u=Math.max(0,e-a-1),c=Math.min(r.length,e+h-1);e-=1;for(var f=u;c>f;++f)i(r[f])||s.push(r[f]);return s.length>0?s:null}function u(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(t){return u(t).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function f(t,e){for(var i,n,r=0,s=e.length;s>r;++r)if((i=o(e[r])).length&&(i=i.join("\n"),n=t.exec(i)))return{url:e[r],line:i.substring(0,n.index).split("\n").length,column:n.index-i.lastIndexOf("\n",n.index)-1};return null}function l(t,e,i){var n,r=o(e),s=new RegExp("\\b"+u(t)+"\\b");return i-=1,r&&r.length>i&&(n=s.exec(r[i]))?n.index:null}function p(e){for(var i,n,r,o,s=[t.location.href],a=document.getElementsByTagName("script"),h=""+e,l=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,d=0;d<a.length;++d){var v=a[d];v.src&&s.push(v.src)}if(r=l.exec(h)){var g=r[1]?"\\s+"+r[1]:"",y=r[2].split(",").join("\\s*,\\s*");i=u(r[3]).replace(/;$/,";?"),n=new RegExp("function"+g+"\\s*\\(\\s*"+y+"\\s*\\)\\s*{\\s*"+i+"\\s*}")}else n=new RegExp(u(h).replace(/\s+/g,"\\s+"));if(o=f(n,s))return o;if(r=p.exec(h)){var w=r[1];if(i=c(r[2]),n=new RegExp("on"+w+"=[\\'\"]\\s*"+i+"\\s*[\\'\"]","i"),o=f(n,s[0]))return o;if(n=new RegExp(i),o=f(n,s))return o}return null}function d(t){if(!t.stack)return null;for(var e,n,r=/^\s*at (.*?) ?\(?((?:file|https?|chrome-extension):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?@?((?:file|https?|chrome):.*?):(\d+)(?::(\d+))?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=t.stack.split("\n"),f=[],p=/^(.*) is undefined$/.exec(t.message),d=0,v=c.length;v>d;++d){if(e=o.exec(c[d]))n={url:e[3],func:e[1]||s,args:e[2]?e[2].split(","):"",line:+e[4],column:e[5]?+e[5]:null};else if(e=r.exec(c[d]))n={url:e[2],func:e[1]||s,line:+e[3],column:e[4]?+e[4]:null};else{if(!(e=u.exec(c[d])))continue;n={url:e[2],func:e[1]||s,line:+e[3],column:e[4]?+e[4]:null}}!n.func&&n.line&&(n.func=a(n.url,n.line)),n.line&&(n.context=h(n.url,n.line)),f.push(n)}return f.length?(f[0]&&f[0].line&&!f[0].column&&p?f[0].column=l(p[1],f[0].url,f[0].line):f[0].column||i(t.columnNumber)||(f[0].column=t.columnNumber+1),{mode:"stack",name:t.name,message:t.message,url:document.location.href,stack:f,useragent:navigator.userAgent}):null}function v(t){for(var e,i=t.stacktrace,n=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,r=i.split("\n"),o=[],s=0,u=r.length;u>s;s+=2)if(e=n.exec(r[s])){var c={line:+e[1],column:+e[2],func:e[3]||e[4],args:e[5]?e[5].split(","):[],url:e[6]};if(!c.func&&c.line&&(c.func=a(c.url,c.line)),c.line)try{c.context=h(c.url,c.line)}catch(t){}c.context||(c.context=[r[s+1]]),o.push(c)}return o.length?{mode:"stacktrace",name:t.name,message:t.message,url:document.location.href,stack:o,useragent:navigator.userAgent}:null}function g(i){var n=i.message.split("\n");if(n.length<4)return null;var r,s,u,l,p=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,d=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,v=/^\s*Line (\d+) of function script\s*$/i,g=[],y=document.getElementsByTagName("script"),w=[];for(s in y)e(y,s)&&!y[s].src&&w.push(y[s]);for(s=2,u=n.length;u>s;s+=2){var m=null;if(r=p.exec(n[s]))m={url:r[2],func:r[3],line:+r[1]};else if(r=d.exec(n[s])){m={url:r[3],func:r[4]};var b=+r[1],E=w[r[2]-1];if(E&&(l=o(m.url))){l=l.join("\n");var I=l.indexOf(E.innerText);I>=0&&(m.line=b+l.substring(0,I).split("\n").length)}}else if(r=v.exec(n[s])){var S=t.location.href.replace(/#.*$/,""),R=r[1],O=new RegExp(c(n[s+1]));l=f(O,[S]),m={url:S,line:l?l.line:R,func:""}}if(m){m.func||(m.func=a(m.url,m.line));var T=h(m.url,m.line),C=T?T[Math.floor(T.length/2)]:null;m.context=T&&C.replace(/^\s*/,"")===n[s+1].replace(/^\s*/,"")?T:[n[s+1]],g.push(m)}}return g.length?{mode:"multiline",name:i.name,message:n[0],url:document.location.href,stack:g,useragent:navigator.userAgent}:null}function y(t,e,i,n){var r={url:e,line:i};if(r.url&&r.line){t.incomplete=!1,r.func||(r.func=a(r.url,r.line)),r.context||(r.context=h(r.url,r.line));var o=/ '([^']+)' /.exec(n);if(o&&(r.column=l(o[1],r.url,r.line)),t.stack.length>0&&t.stack[0].url===r.url){if(t.stack[0].line===r.line)return!1;if(!t.stack[0].line&&t.stack[0].func===r.func)return t.stack[0].line=r.line,t.stack[0].context=r.context,!1}return t.stack.unshift(r),t.partial=!0,!0}return t.incomplete=!0,!1}function w(t,e){for(var i,r,o,h=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],c={},f=!1,d=w.caller;d&&!f;d=d.caller)if(d!==m&&d!==n.report){if(r={url:null,func:s,line:null,column:null},d.name?r.func=d.name:(i=h.exec(d.toString()))&&(r.func=i[1]),void 0===r.func)try{r.func=i.input.substring(0,i.input.indexOf("{"))}catch(t){}if(o=p(d)){r.url=o.url,r.line=o.line,r.func===s&&(r.func=a(r.url,r.line));var v=/ '([^']+)' /.exec(t.message||t.description);v&&(r.column=l(v[1],o.url,o.line))}c[""+d]?f=!0:c[""+d]=!0,u.push(r)}e&&u.splice(0,e);var g={mode:"callers",name:t.name,message:t.message,url:document.location.href,stack:u,useragent:navigator.userAgent};return y(g,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),g}function m(t,e){var i=null;e=null==e?0:+e;try{if(i=v(t))return i}catch(t){if(E)throw t}try{if(i=d(t))return i}catch(t){if(E)throw t}try{if(i=g(t))return i}catch(t){if(E)throw t}try{if(i=w(t,e+1))return i}catch(t){if(E)throw t}return{mode:"failed"}}function b(t){t=1+(null==t?0:+t);try{throw new Error}catch(e){return m(e,t+1)}}var E=!1,I={};return m.augmentStackTraceWithInitialElement=y,m.guessFunctionName=a,m.gatherContext=h,m.ofCaller=b,m.getSource=o,m}(),n.extendToAsynchronousCallbacks=function(){var e=function(e){var i=t[e];t[e]=function(){var t=o.call(arguments),e=t[0];return"function"==typeof e&&(t[0]=n.wrap(e)),i.apply?i.apply(this,t):i(t[0],t[1])}};e("setTimeout"),e("setInterval")},n.remoteFetching||(n.remoteFetching=!0),n.collectWindowErrors||(n.collectWindowErrors=!0),(!n.linesOfContext||n.linesOfContext<1)&&(n.linesOfContext=11),t.TraceKit=n}}("undefined"!=typeof window?window:global),function(t,e){"use strict";if(t){var i=t.event.add;t.event.add=function(n,r,o,s,a){if("function"!=typeof o&&"function"!=typeof o.handler)return i.call(this,n,r,o,s,a);var h;return o.handler?(h=o.handler,o.handler=e.wrap(o.handler)):(h=o,o=e.wrap(o)),o.guid=h.guid?h.guid:h.guid=t.guid++,i.call(this,n,r,o,s,a)};var n=t.fn.ready;t.fn.ready=function(t){return n.call(this,e.wrap(t))};var r=t.ajax;t.ajax=function(i,n){"object"==typeof i&&(n=i,i=void 0),n=n||{};for(var o,s=["complete","error","success"];o=s.pop();)t.isFunction(n[o])&&(n[o]=e.wrap(n[o]));try{return i?r.call(this,i,n):r.call(this,n)}catch(t){throw e.report(t),t}}}}(window.jQuery,window.TraceKit),function(t,e,i,n){function r(t){var e=t,i=t.split("//")[1];if(i){var n=i.indexOf("?"),r=i.toString().substring(0,n),o=r.split("/").slice(0,4).join("/"),s=r.substring(0,48);(e=o.length<s.length?o:s)!==r&&(e+="..")}return e}function o(t,e,i,o){if(U&&(L||e.getAllResponseHeaders())){var s="AJAX Error: "+(e.statusText||"unknown")+" "+(i.type||"unknown")+" "+(r(i.url)||"unknown");K.send(o||t.type,{status:e.status,statusText:e.statusText,type:i.type,url:i.url,ajaxErrorMessage:s,contentType:i.contentType,requestData:i.data&&i.data.slice?i.data.slice(0,10240):n,responseData:e.responseText&&e.responseText.slice?e.responseText.slice(0,10240):n,activeTarget:t.target&&t.target.activeElement?t.target.activeElement.outerHTML:n})}}function s(){return!(!d||""===d)||(H.log("Atatus API key has not been configured, make sure you call atatus.config(yourApiKey)"),!1)}function a(){var i=e.documentElement,n=e.getElementsByTagName("body")[0];return{width:t.innerWidth||i.clientWidth||n.clientWidth,height:t.innerHeight||i.clientHeight||n.clientHeight}}function h(t){var e=(new Date).toJSON();try{var i="atatusjs="+e+"="+H.getRandomInt();void 0===localStorage[i]&&(localStorage[i]=t)}catch(t){H.log("Atatus: LocalStorage full, cannot save exception")}}function u(){try{return"localStorage"in t&&null!==t.localStorage}catch(t){return!1}}function c(){if(u()&&localStorage.length>0)for(var t in localStorage)if("atatusjs="===t.substring(0,9)){try{var e=JSON.parse(localStorage[t]);"apikey"in e&&l(j,e)}catch(t){H.log("Atatus: Invalid JSON object in LocalStorage")}localStorage.removeItem(t)}}function f(t,i){if(i=i||{},!t.stack||!t.stack.length)return void H.log("Atatus: Canceling send due to no stacktrace.");H.isEmpty(i.customData)&&(i.customData="function"==typeof v?v():v),H.isEmpty(i.tags)&&(i.tags=A);var n=i.customData&&i.customData.ajaxErrorMessage||t.message;if(n&&0===n.indexOf("Uncaught ")&&(n=t.message.substring(9)),n=n||i.status||"Script error.",I&&I.test(n))return void H.log("Atatus: canceling send due to ignore errors");var r=[];t.stack&&t.stack.length&&H.forEach(t.stack,function(t,e){H.endsWith(e.url,"/atatus.js")||r.push({ln:e.line||0,cn:e.column||0,f:e.url||"anonymous",m:e.func||"[anonymous]"})});var o=[t.name,n,JSON.stringify(r)].join("|");if(o===S)return void H.log("Atatus: canceling send due to duplicate errors");S=o;var s=i.customData;try{JSON.stringify(s)}catch(t){var a="Cannot add custom data; may contain circular reference";s={error:a},H.log("Atatus: "+a)}var h=q.getAllEvents();B.clear();var u={class:t.name,name:n,backTraces:r,userActions:h,net:null,customData:s||null,tags:i.tags,sourcemap:M,request:{url:e.location.href,ua:navigator.userAgent}};if("function"==typeof R&&(u.groupingKey=R(u)),"function"==typeof O){O(u)&&l(j,u)}else l(j,u)}function l(i,n){if(_&&_.length&&-1===_.indexOf(location.host))return void H.log("Atatus: canceling send due to not a allowed domain");if(s()){if(!n.ts){var r=t.screen||a();n.ts=(new Date).getTime(),n.apikey=d,n.request=n.request||{},n.request.url=n.request.url||e.location.href,n.request.ua=n.request.ua||navigator.userAgent,n.request.w=r.width,n.request.h=r.height,n.v=y||"",n._v=C||""}g&&(n.cid=g.userId||null),H.log("Sending data to Atatus Receiver:",n),p(i,JSON.stringify(n))}}function p(t,e){var i=new Image,n=F+t+"?data="+encodeURIComponent(e);i.crossOrigin="anonymous",i.onload=function(){c()},i.onerror=i.onabort=function(){x&&t===j&&h(e)},i.src=n}var d,v,g,y,w,m,b,E,I,S,R,O,T,C="2.3.12",N=TraceKit.noConflict(),k=t.atatus,A=[],P=!1,_=[],D=!1,x=!1,M=!1,U=!1,L=!1,F="https://br-rx.atatus.com",j="/track/browser/errors";i&&(T=i(e));var H={isBoolean:function(t){return void 0!==t&&"boolean"==typeof t},isString:function(t){return"string"==typeof t},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},endsWith:function(t,e){return!(!t||!e)&&-1!==t.indexOf(e,t.length-e.length)},joinRegExp:function(t){for(var e,i=[],n=0,r=t.length;r>n;n++)e=t[n],H.isString(e)?i.push(e.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")):e&&e.source&&i.push(e.source);return new RegExp(i.join("|"),"i")},getTargetUrl:function(e){return t.XDomainRequest&&D&&(e=e.slice(6)),e},now:function(){return(new Date).getTime()},pad:function(t){return t=String(t),1===t.length&&(t="0"+t),t},merge:function(t,e){var i,n={};for(i in t)n[i]=t[i];for(i in e)n[i]=e[i];return n},mergeArray:function(t,e){return null!=e?t.concat(e):t},forEach:function(t,e){for(var i=0;i<t.length;i++)e.call(null,i,t[i])},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},getRandomInt:function(){return Math.floor(9007199254740992*Math.random())},log:function(e,i){P&&t.console&&t.console.log&&(t.console.log(e),i&&t.console.log(i))},bind:function(t,e){return function(){return t.apply(e,Array.prototype.slice.call(arguments))}},canAllowInsecureSubmissions:function(){var e=t.navigator.userAgent,i=e.match(/Trident\/([\d.]+)/),n=i&&"7.0"===i[1]?11:!!(e=e.match(/MSIE ([\d.]+)/))&&parseInt(e[1],10);return n&&9>=n},uuid4:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},addEventListener:function(e,i,n){return void 0!==t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,n):void 0},arrayFromObject:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}},B={eventObject:{},all:function(t){for(var e=this.getEventObject(t),i=[],n=0;n<e.length;n++)i.push(e[n].value);return i},clear:function(){for(var t in this.eventObject)this.eventObject.hasOwnProperty(t)&&(this.eventObject[t].length=0)},add:function(t,e){var i=this.getEventObject(t),n=H.uuid4();return i.push({key:n,value:e}),this.truncateEventObject(t,10),n},get:function(t,e){for(var i=this.getEventObject(t),n=0;n<i.length;n++)if(i[n].key===e)return i[n].value;return!1},getEventObject:function(t){return this.eventObject[t]||(this.eventObject[t]=[]),this.eventObject[t]},truncateEventObject:function(t,e){var i=this.getEventObject(t);i.length>e&&(this.eventObject[t]=i.slice(i.length-e))}},V={attach:function(e,i,n,r,o){e=e||t.console||{};for(var s=o||["log","debug","info","warn","error"],a=s.pop(),h=function(t,e,n){i&&B.add("user",{ts:H.now(),c:"console",l:t,m:e}),"error"===t&&r&&K.notify(new Error(e),n)};a;)this.wrapConsoleMethod(e,a,n,h),a=s.pop()},wrapConsoleMethod:function(t,e,i,n){var r=t[e],o=t;e in t&&(t[e]=function(){var t=[].slice.call(arguments),s=""+t.join(" "),a={level:e,logger:"console"};n&&n(e,s,a),r&&i&&Function.prototype.apply.call(r,o,t)})}},q={attach:function(){var t=H.bind(this.onDocumentClicked,this),i=H.bind(this.onInputChanged,this);e.addEventListener?(e.addEventListener("click",t,!0),e.addEventListener("blur",i,!0)):e.attachEvent&&(e.attachEvent("onclick",t),e.attachEvent("onfocusout",i))},writeUserEvent:function(t,e,i,n){"password"===this.getElementType(t)&&(i=void 0),B.add("user",{ts:H.now(),a:e,e:this.getOuterHTML(t),v:this.getValueKind(i,n)})},onDocumentClicked:function(t){var e=this.getElementFromEvent(t);e&&e.tagName&&(this.isTarget(e,"a")||this.isTarget(e,"button")||this.isTarget(e,"input",["button","submit"])?this.writeUserEvent(e,"click"):this.isTarget(e,"input",["checkbox","radio"])&&this.writeUserEvent(e,"check",e.value,e.checked))},onInputChanged:function(t){var e=this.getElementFromEvent(t);e&&e.tagName&&(this.isTarget(e,"textarea")?this.writeUserEvent(e,"input",e.value):this.isTarget(e,"select")&&e.options&&e.options.length?this.onSelectInputChanged(e):this.isTarget(e,"input")&&!this.isTarget(e,"input",["button","submit","hidden","checkbox","radio"])&&this.writeUserEvent(e,"input",e.value))},onSelectInputChanged:function(t){if(t.multiple){for(var e=0;e<t.options.length;e++)if(t.options[e].selected){this.writeUserEvent(t,"select",t.options[e].value);break}}else 0<=t.selectedIndex&&t.options[t.selectedIndex]&&this.writeUserEvent(t,"select",t.options[t.selectedIndex].value)},getElementFromEvent:function(t){return t.target||e.elementFromPoint(t.clientX,t.clientY)},isTarget:function(t,e,i){if(t.tagName.toLowerCase()!==e.toLowerCase())return!1;if(!i)return!0;for(var n=this.getElementType(t),r=0;r<i.length;r++)if(i[r]===n)return!0;return!1},getElementType:function(t){return(t.getAttribute("type")||"").toLowerCase()},getOuterHTML:function(t){for(var e="<"+t.tagName.toLowerCase(),i=t.attributes,n=0,r=i.length;r>n;n++){var o=i[n].name;"value"!==o.toLowerCase()&&(e+=" "+o+'="'+i[n].value+'"')}return e+=" >"},getValueKind:function(t,e){return null==t?null:{length:t.length,checked:e,pattern:this.matchInputPattern(t)}},matchInputPattern:function(t){return""===t?"empty":/^[a-z0-9!#$%&'*+=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/.test(t)?"email":/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(t)||/^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(t)?"date":/^(?:(?:\+?1\s*(?:[.\-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.\-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.\-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(t)?"phone":/^\s*$/.test(t)?"whitespace":/^\d*$/.test(t)?"numeric":"character"},getAllEvents:function(){return B.all("user")}},K={noConflict:function(){return t.atatus=k,K},isConfigured:function(){return!!d},config:function(e,i){return i=i||{},d=e,N.remoteFetching=!1,I=[],i&&(v=i.customData,A=i.tags||[],M=!(!i.enableSourcemap&&!i.sourcemap),w=!!i.disableUserActions,m=!!i.disableAjaxMonitoring,b=!!i.disableRUM,P=!!i.debugMode,i.ignoreErrors&&H.isArray(i.ignoreErrors)&&(I=i.ignoreErrors),K.setAllowedDomains(i.allowedDomains),K.setVersion(i.version),K.enableOffline(i.enableOffline||i.offline),K.onBeforeErrorSend(i.beforeErrorSend),K.setGroupingKeyCallback(i.groupingKeyCallback)),D=H.canAllowInsecureSubmissions(),I.push(/^Script error\.?$/),I.push(/^Javascript error: Script error\.? on line 0$/),I=H.joinRegExp(I),c(),E={enabled:!0,timeline:!0,display:!0,error:!0,levels:null},H.isBoolean(i.console)&&(E.enabled=i.console),H.isBoolean(i.consoleTimeline)&&(E.timeline=i.consoleTimeline),H.isBoolean(i.consoleDisplay)&&(E.display=i.consoleDisplay),H.isBoolean(i.consoleErrorNotify)&&(E.error=i.consoleErrorNotify),H.isArray(i.consoleTimelineLevels)&&(E.levels=i.consoleTimelineLevels),E.enabled&&"console"in t&&t.console.log&&V.attach(t.console,E.timeline,E.display,E.error,E.levels),w||q.attach(),m||b||K.__attachAjaxHooks(),K},install:function(){return s()?(N.report.subscribe(f),N.extendToAsynchronousCallbacks(),T&&U&&T.ajaxError(o),K):void 0},uninstall:function(){return d=null,N.report.unsubscribe(f),T&&U&&T.unbind("ajaxError",o),K},setCustomData:function(t){return v=t,K},setTags:function(t){return A=t,K},setAllowedDomains:function(t){return t&&H.isArray(t)&&(_=t),K},getAllowedDomains:function(){return _},setUser:function(t,e,i,n){return g={},t&&(g.userId=""+t),e&&(g.email=""+e),i&&(g.firstName=""+i),n&&(g.lastName=""+n),K},setVersion:function(t){return t&&(y=""+t),K},enableOffline:function(t){return H.isBoolean(t)&&(x=t),K},onBeforeErrorSend:function(t){return"function"==typeof t&&(O=t),K},setGroupingKeyCallback:function(t){return"function"==typeof t&&(R=t),K},setAPIEndpoint:function(t){return F=t,K},init:function(t,e,i){return i&&(e=e||{},e.customData=i),K.config(t,e)},withCustomData:function(t){return K.setCustomData(t)},withTags:function(t){return K.setTags(t)},attach:function(){return K.install()},detach:function(){return K.uninstall()},notify:function(t,e,i){return K.send(t,e,i)},sendPerf:function(t){return b?void H.log("RUM is disabled. Please enable it in the config options."):l("/track/browser/perf",t)},sendAjaxPerf:function(t){return b?void H.log("RUM is disabled. Please enable it in the config options."):l("/track/browser/perf/ajax",t)},sendTxnPerf:function(t){return l("/track/browser/perf/txn",t)},send:function(t,e,i){try{f(N.computeStackTrace(t),{customData:H.merge(v,e),tags:H.mergeArray(A,i)})}catch(e){if(t!==e)throw e}return K},_helper:H};t.atatus=K}(window,document,window.jQuery),function(t,e,i){function n(t){t.pl<=0||atatus.sendPerf(t)}function r(){var e=t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance,i=e.timing,r=e.navigation;if(0===i.loadEventEnd)return!1;clearInterval(h),h=null;var o=i.navigationStart;0>=o&&(o=i.fetchStart);var s={};for(var a in u)s[u[a]]=-1,a in i&&(i[a]<=0||(s[u[a]]=i[a]-o));n({nty:r.type,rc:r.redirectCount,nt:s.rps-s.ns,dp:s.dce-s.rps,pr:s.le-s.dce,fe:s.le-s.rps,pl:s.le-s.ns})}function o(){if(!a||!a.bDone)return!1;clearInterval(h),h=!1;var t=a.getMeasures();if(null!=t&&null!=t.backend&&null!=t.frontend&&null!=t["page load time"]&&null!=t["total load time"]){var e=t.backend,i=t.backend+t.frontend;n({nty:0,rc:0,nt:e,dp:i-e,pr:t["total load time"]-i,fe:t["total load time"]-e,pl:t["total load time"]})}}var s=(new Date).getTime(),a=a||{};a.q=a.q||[],a.version="0.3",a.targetOrigin=e.location.protocol+"//"+e.location.hostname,a.bPostMessage=!1,a.beaconUrl=a.beaconUrl||"/images/beacon.gif",a.autorun=!1,a.init=function(){if(a.bDone=!1,a.bUnloaded=!1,a.marks={},a.measures={},a.starts={},a.findStartTime(),a.addEventListener("beforeunload",a.beforeUnload,!1),a.addEventListener("pagehide",a.beforeUnload,!1),a.addEventListener("unload",a.beforeUnload,!1),a.processQ(),"complete"===e.readyState){var i=t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance;i&&void 0!==i.timing&&void 0!==i.timing.loadEventEnd&&(a.mark("firstbyte",i.timing.responseStart),a.mark("onload",i.timing.loadEventEnd)),a.done()}else a.addEventListener("load",a.onload,!1)},a.processQ=function(){for(var t=a.q.length,e=0;t>e;e++){var i=a.q[e],n=i[0];"mark"===n?a.mark(i[1],i[2]):"measure"===n?a.measure(i[1],i[2],i[3]):"done"===n&&a.done(i[1])}},a.mark=function(e,i){return a.dprint("RUM_EPISODES.mark: "+e+", "+i),e?(a.marks[e]=parseInt(i||(new Date).getTime()),a.bPostMessage&&t.postMessage("RUM_EPISODES:mark:"+e+":"+i,a.targetOrigin),void("firstbyte"===e?a.measure("backend","starttime","firstbyte"):"onload"===e?(a.measure("frontend","firstbyte","onload"),a.measure("page load time","starttime","onload")):"done"===e&&a.measure("total load time","starttime","done"))):void a.dprint("Error: markName is undefined in RUM_EPISODES.mark.")},a.measure=function(e,i,n){if(a.dprint("RUM_EPISODES.measure: "+e+", "+i+", "+n),!e)return void a.dprint("Error: episodeName is undefined in RUM_EPISODES.measure.");var r;if(void 0===i)r="number"==typeof a.marks[e]?a.marks[e]:(new Date).getTime();else if("number"==typeof a.marks[i])r=a.marks[i];else{if("number"!=typeof i)return void a.dprint("Error: unexpected startNameOrTime in RUM_EPISODES.measure: "+i);r=i}var o;if(void 0===n)o=(new Date).getTime();else if("number"==typeof a.marks[n])o=a.marks[n];else{if("number"!=typeof n)return void a.dprint("Error: unexpected endNameOrTime in RUM_EPISODES.measure: "+n);o=n}a.starts[e]=parseInt(r),a.measures[e]=parseInt(o-r),a.bPostMessage&&t.postMessage("RUM_EPISODES:measure:"+e+":"+r+":"+o,a.targetOrigin)},a.done=function(e){a.bDone=!0,a.mark("done"),a.bPostMessage&&t.postMessage("RUM_EPISODES:done",a.targetOrigin),"function"==typeof e&&e()},a.getMarks=function(){return a.marks},a.getMeasures=function(){return a.measures},a.getStarts=function(){return a.starts},a.findStartTime=function(){var t=a.findStartWebTiming()||a.findStartCookie();t&&a.mark("starttime",t)},a.findStartWebTiming=function(){var e,i=t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance;return i&&void 0!==i.timing&&void 0!==i.timing.navigationStart&&(e=i.timing.navigationStart,a.dprint("RUM_EPISODES.findStartWebTiming: startTime = "+e)),e},a.findStartCookie=function(){for(var i=e.cookie.split(" "),n=0;n<i.length;n++)if(0===i[n].indexOf("RUM_EPISODES=")){for(var r,o,s=i[n].substring("RUM_EPISODES=".length).split("&"),h=0;h<s.length;h++)if(0===s[h].indexOf("s="))r=s[h].substring(2);else if(0===s[h].indexOf("r=")){var u=s[h].substring(2);u=u.replace(/;$/,""),o=t.escape(e.referrer)===u}if(o&&r)return a.dprint("RUM_EPISODES.findStartCookie: startTime = "+r),r}},a.beforeUnload=function(){a.bUnloaded||(e.cookie="RUM_EPISODES=s="+Number(new Date)+"&r="+t.escape(e.location)+"; path=/",a.bUnloaded=!0)},a.onload=function(){a.mark("onload"),a.done()},a.addEventListener=function(e,i,n){return void 0!==t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,n):void 0},a.dprint=function(){},a.init();var h=null,u={navigationStart:"ns",redirectStart:"rds",redirectEnd:"rde",unloadEventStart:"us",unloadEventEnd:"ue",fetchStart:"fs",domainLookupStart:"dls",domainLookupEnd:"dle",connectStart:"cs",secureConnectionStart:"scs",connectEnd:"ce",handshakeStart:"hs",requestStart:"rqs",responseStart:"rps",responseEnd:"rpe",domLoading:"dl",domInteractive:"di",domContentLoadedEventStart:"dcs",domContentLoadedEventEnd:"dce",domComplete:"dc",loadEventStart:"ls",loadEventEnd:"le"},c=t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance;c&&void 0!==c.timing&&void 0!==c.navigation?h=setInterval(r,100):(a.mark("firstbyte",s),h=setInterval(o,100))}(window,document),atatus.__attachAjaxHooks=function(){!function(t,e){var i=atatus._helper,n={queue:[],batchSize:25,processing:!1,bUnloaded:!1,push:function(t){"string"==typeof t.url&&t.url.indexOf(".html")>0||(this.queue.push(t),this.queue.length>=this.batchSize&&this._processQueue())},_processQueue:function(){if(!this.processing&&this.queue.length){this.processing=!0;try{for(var t={},e={},n=0;n<this.queue.length;n++){var r,o=this.queue[n];if(o.status<400){r=o.method+o.url;var s=o.respAvailTime-o.sendTime,a=o.respProcTime-o.respAvailTime,h=o.receivedSize,u=o.sendSize,c=t[r];if(c){c.c++;var f=c.re;f.t=f.t+s,f.lo=f.lo<s?f.lo:s,f.hi=f.hi>s?f.hi:s,f.ssq=f.ssq+s*s;var l=c.cb;l.t=l.t+a,l.lo=l.lo<a?l.lo:a,l.hi=l.hi>a?l.hi:a,l.ssq=l.ssq+a*a;var p=c.rs;p.t=p.t+h,p.lo=p.lo<h?p.lo:h,p.hi=p.hi>h?p.hi:h,p.ssq=p.ssq+h*h;var d=c.ss;d.t=d.t+u,d.lo=d.lo<u?d.lo:u,d.hi=d.hi>u?d.hi:u,d.ssq=d.ssq+u*u}else t[r]={m:o.method,url:o.url,c:1,re:{t:s,lo:s,hi:s,ssq:s*s},cb:{t:a,lo:a,hi:a,ssq:a*a},rs:{t:o.receivedSize,lo:o.receivedSize,hi:o.receivedSize,ssq:o.receivedSize*o.receivedSize},ss:{t:o.sendSize,lo:o.sendSize,hi:o.sendSize,ssq:o.sendSize*o.sendSize}}}else r=o.method+o.status+o.url,e[r]?e[r].c++:e[r]={m:o.method,url:o.url,st:o.status,c:1}}var v={xhr:i.arrayFromObject(t),xhrError:i.arrayFromObject(e)};atatus.sendAjaxPerf(v)}catch(t){i.log("Error while processing queue: ",t)}finally{this.queue=[],this.processing=!1}}},beforeUnload:function(){n.bUnloaded||(n._processQueue(),n.bUnloaded=!0)}};i.addEventListener("beforeunload",n.beforeUnload,!1);var r={support:function(t){return!t||"apply"in t},around:function(t,e,n,r){return t=t||function(){},function(){var o,s=Array.prototype.slice.call(arguments);try{e&&(o=e.apply(this,s))}catch(t){i.log(r,t)}var a;try{a=t.apply(this,o||s)}finally{try{n&&n.apply(this,s)}catch(t){i.log(r,t)}}return a}},before:function(t,e){return r.around(t,e)},after:function(t,e){return r.around(t,null,e)},timeout:function(t){setTimeout(t,0)},wrapAddEventListener:function(){return function(t,e){if(("load"===t||"error"===t)&&e&&this._atrumXhrData){var i;e.__atrumInterceptor?i=e.__atrumInterceptor:r.support(e)?(i=s.wrapXHR(e,this,"XHR.invokeEventListener"),e.__atrumInterceptor=i):i=null;var n;return i&&(n=Array.prototype.slice.call(arguments),n[1]=i),n}}},wrapRemoveEventListener:function(){return function(t,e){if(this._atrumXhrData){var i=Array.prototype.slice.call(arguments);return e.__atrumInterceptor&&(i[1]=e.__atrumInterceptor),i}}},aroundWithHandleEvent:function(t,e,i,n){var o=t;return t&&"object"==typeof t&&"toString"in t&&"[xpconnect wrapped nsIDOMEventListener]"===t.toString()&&"handleEvent"in t&&(o=function(){t.handleEvent.apply(this,Array.prototype.slice.call(arguments))}),r.around(o,e,i,n)},getFullyQualifiedUrl:function(t){var i=e.createElement("a");return i.href=t,i.href}};if(t.XMLHttpRequest&&t.XMLHttpRequest.prototype){var o=t.XMLHttpRequest.prototype;if(!("open"in o&&"send"in o))return;if(!r.support(o.open)||!r.support(o.send))return;var s={};s.captureAjaxTimings=function(t){var e=t._atrumXhrData;if(e){var i=(new Date).getTime();2===t.readyState?e.firstByteTime=e.firstByteTime||i:4===t.readyState&&(e.respAvailTime=e.respAvailTime||i,e.firstByteTime=e.firstByteTime||i)}},s.sendPayload=function(t,e){e.receivedSize=0,t.responseType&&"text"!==t.responseType||"string"==typeof t.responseText&&(e.receivedSize=t.responseText.length),e.status=t.status,n.push(e)},s.wrapXHR=function(t,e,i){return r.aroundWithHandleEvent(t,function(){s.captureAjaxTimings(this)},function(){var t=e._atrumXhrData;if(t&&4===e.readyState){var i=(new Date).getTime();t.respProcTime=t.respProcTime||i,s.sendPayload(e,t),delete e._atrumXhrData}},i)},s.ajaxDone=function(t){if(t._atrumXhrData){var e=(new Date).getTime()+3e4,i=function(){s.captureAjaxTimings(t);var n=t._atrumXhrData;if(n){var r=(new Date).getTime();4===t.readyState?(n.respProcTime=n.respProcTime||r,s.sendPayload(t,n),delete t._atrumXhrData):e>r?setTimeout(i,50):delete t._atrumXhrData}};i()}},o.open=r.around(o.open,function(){var t=1<=arguments.length?String(arguments[0]):"",e=2<=arguments.length?String(arguments[1]):"",i=atatus.getAllowedDomains(),n=!0;if((e=r.getFullyQualifiedUrl(e))&&i&&i.length){n=!1;for(var o=0;o<i.length;o++){var s=i[o];if(s&&e.indexOf(s)>-1){n=!0;break}}}n&&(e=e&&e.split("?")[0],this._atrumXhrData={method:t,url:e,sendTime:null,sendSize:null,firstByteTime:null,respAvailTime:null,respProcTime:null,receivedSize:null,parentPhase:null})},null,"XHR.open"),o.send=r.around(o.send,function(){var t=this,e=t._atrumXhrData;if(e){var i=(new Date).getTime();e.sendTime=e.sendTime||i,e.sendSize=1<=arguments.length&&arguments[0]?arguments[0].length||0:0;var n=0,o=function(){if(4===t.readyState)s.ajaxDone(t);else{var e=null;try{e=t.onreadystatechange}catch(e){return void s.ajaxDone(t)}n++,e?r.support(e)?t.onreadystatechange=s.wrapXHR(e,t,"XHR.onReadyStateChange"):s.ajaxDone(t):5>n?r.timeout(o):s.ajaxDone(t)}};o()}},null,"XHR.send"),"addEventListener"in o&&"removeEventListener"in o&&r.support(o.addEventListener)&&r.support(o.removeEventListener)&&(o.addEventListener=r.around(o.addEventListener,r.wrapAddEventListener(),null,"XHR.addEventListener"),o.removeEventListener=r.around(o.removeEventListener,r.wrapRemoveEventListener(),null,"XHR.removeEventListener"))}}(window,document)},function(t){function e(t,e,i){if(!(0>=e)){var n={name:t,dur:e,st:i};atatus.sendTxnPerf(n)}}function i(t){return a+" "+t}function n(){try{return"localStorage"in t&&null!==t.localStorage}catch(t){return!1}}function r(t){var e=h.now();try{localStorage.setItem(i(t),e)}catch(t){}}function o(t){var e=null,n=i(t);try{e=localStorage.getItem(n),localStorage.removeItem(n)}catch(t){}var r=0;return e&&(r=h.now()-e),r}function s(t){try{var e=i(t);localStorage.removeItem(e)}catch(t){}}var a="atatus.com/",h=atatus._helper;atatus.beginTransaction=function(t){n()&&r(t)},atatus.endTransaction=function(t){if(n()){e(t,o(t),1)}},atatus.failTransaction=function(t){if(n()){e(t,o(t),0)}},atatus.cancelTransaction=function(t){n()&&s(t)}}(window,document),function(t){"use strict";function e(t,e){return t=0|t||0,t<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(t,i){var n=this.byteLength,r=e(t,n),o=n;if(void 0!==i&&(o=e(i,n)),r>o)return new ArrayBuffer(0);var s=o-r,a=new ArrayBuffer(s),h=new Uint8Array(a),u=new Uint8Array(this,r,s);return h.set(u),a})}(),function(t){function e(n){if(i[n])return i[n].t;var r=i[n]={i:n,s:!1,t:{}};return t[n].call(r.t,r,r.t,e),r.s=!0,r.t}var i={};e.o=t,e.c=i,e.d=function(t,i,n){e.h(t,i)||Object.defineProperty(t,i,{u:!1,l:!0,get:n})},e.n=function(t){var i=t&&t.p?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.h=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.g="",e(e.v=96)}([function(t,e,i){"use strict";var n,r=i(37),o=i(1);!function(t){function e(e){P&&console.log("Framework already initialized"),t.m(),k=new Date,e.apply(x),P=x.resolve(T.T),D=x.resolve(T.I),U=P.S()}function i(){_=x.resolve(T.R),_.init()}function n(){return _}function s(){return x}function a(){return D}function h(){return P}function u(t){return M.get(t)}function c(t,e){var i=new C(t);return i.apply(e),M.set(t,i),i}function f(e){N=t.P(e)}function l(t){return null!=N?N.context.resolve(t):(console.warn("undefined context"),null)}function p(){return N}function d(){return P.time()}function v(t,e){return P.setTimeout(t,e)}function g(t){return P.clearTimeout(t)}function y(t,e){return P.setInterval(t,e)}function w(t){return P.clearInterval(t)}function m(){P.A()}function b(){P&&P.C(),x.k(),x=new r.O,M=new o,N=null,k=null,U=!1,A=null,P=null,_=null,D=null}function E(t){A=t}function I(){return A||(A=(new Date).getTime()),(A=(9301*A+49297)%233280)/233280}function S(){return k}function R(){return U}var O=function(){function t(){}return t}();O._="ws://127.0.0.1:8000/hive",t.N=O;var T=function(){function t(){}return t}();T.T="TimerScheduler",T.D="identityProvider",T.R="NetworkComponent",T.F="rtcManager",T.L="transport",T.M="httpManager",T.B="httpRequest",T.I="logger",T.U="serverManager",T.H="servicesClient",t.q=T;var C=function(){function t(t){this.id=t,this.context=new r.O}return t.prototype.apply=function(t){t.apply(this.context)},t}();t.V=C,function(t){t[t.j=0]="HTTP",t[t.G=1]="RTC",t[t.K=2]="UDP"}(t.Y||(t.Y={})),function(e){function i(){return"["+d()+"] ["+t.J().id+"]"}e.W=i}(t.X||(t.X={}));var N,k,A,P,_,D,x=new r.O,M=new o,U=!1;t.Z=e,t.$=i,t.ee=n,t.system=s,t.te=a,t.re=h,t.P=u,t.ie=c,t.ne=f,t.resolve=l,t.J=p,t.time=d,t.setTimeout=v,t.clearTimeout=g,t.setInterval=y,t.clearInterval=w,t.A=m,t.m=b,t.se=E,t.random=I,t.oe=S,t.S=R}(n=e.Framework||(e.Framework={})),"undefined"!=typeof global&&(global.Framework=n)},function(t,e,i){"use strict";function n(t,e,i,o){if(!(this instanceof n))return new n(t,e,i,o);e=e||Object.ae,i=i||Object.hash,o=o||Function.he,this.ce=e,this.ue=i,this.le=o,this.pe=new r(void 0,function(t,i){return e(t.key,i.key)},function(t){return i(t.key)}),this.length=0,this.addEach(t)}var r=(i(12),i(63)),o=i(13),s=i(48),a=i(14);t.t=n,n.Map=n,Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),Object.defineProperty(n.prototype,"size",o.fe),n.prototype.de=function(t){return new this.constructor(t,this.ce,this.ue,this.le)},n.prototype.log=function(t,e,i,n){e=e||this.ge,this.pe.log(t,function(t,i,n){e(t.value.value,i,n)},i,n)},n.prototype.ge=function(t,e){e(" key: "+t.key),e(" value: "+t.value)}},function(t,e,i){/*!
 *
 * Copyright 2009-2016 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e){"use strict";"function"==typeof bootstrap?bootstrap("promise",e):t.t=e()}(function(){"use strict";function t(t){return function(){return z.apply(t,arguments)}}function e(t){return t===Object(t)}function i(t){return"[object StopIteration]"===tt(t)||t instanceof V}function n(t,e){if(H&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(et)){for(var i=[],n=e;n;n=n.source)n.stack&&i.unshift(n.stack);i.unshift(t.stack);var o=i.join("\n"+et+"\n");t.stack=r(o)}}function r(t){for(var e=t.split("\n"),i=[],n=0;n<e.length;++n){var r=e[n];a(r)||o(r)||!r||i.push(r)}return i.join("\n")}function o(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function s(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var i=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(i)return[i[1],Number(i[2])];var n=/.*@(.+):(\d+)$/.exec(t);return n?[n[1],Number(n[2])]:void 0}function a(t){var e=s(t);if(!e)return!1;var i=e[0],n=e[1];return i===B&&n>=q&&n<=st}function h(){if(H)try{throw new Error}catch(n){var t=n.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],i=s(e);if(!i)return;return B=i[0],i[1]}}function u(t){return t instanceof p?t:y(t)?T(t):O(t)}function c(){function t(t){e=t,u.ve&&H&&(o.source=t),J(i,function(e,i){u.ye(function(){t.me.apply(t,i)})},void 0),i=void 0,n=void 0}var e,i=[],n=[],r=Y(c.prototype),o=Y(p.prototype);if(o.me=function(t,r,o){var s=G(arguments);i?(i.push(s),"when"===r&&o[1]&&n.push(o[1])):u.ye(function(){e.me.apply(e,s)})},o.valueOf=function(){if(i)return o;var t=v(e);return g(t)&&(e=t),t},o.Ee=function(){return e?e.Ee():{state:"pending"}},u.ve&&H)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return r.Te=o,r.resolve=function(i){e||t(u(i))},r.Ie=function(i){e||t(O(i))},r.reject=function(i){e||t(R(i))},r.notify=function(t){e||J(n,function(e,i){u.ye(function(){i(t)})},void 0)},r}function f(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=c();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.Te}function l(t){return f(function(e,i){for(var n=0,r=t.length;n<r;n++)u(t[n]).then(e,i)})}function p(t,e,i){void 0===e&&(e=function(t){return R(new Error("Promise does not support operation: "+t))}),void 0===i&&(i=function(){return{state:"unknown"}});var n=Y(p.prototype);if(n.me=function(i,r,o){var s;try{s=t[r]?t[r].apply(n,o):e.call(n,r,o)}catch(t){s=R(t)}i&&i(s)},n.Ee=i,i){var r=i();"rejected"===r.state&&(n.exception=r.reason),n.valueOf=function(){var t=i();return"pending"===t.state||"rejected"===t.state?n:t.value}}return n}function d(t,e,i,n){return u(t).then(e,i,n)}function v(t){if(g(t)){var e=t.Ee();if("fulfilled"===e.state)return e.value}return t}function g(t){return t instanceof p}function y(t){return e(t)&&"function"==typeof t.then}function w(t){return g(t)&&"pending"===t.Ee().state}function m(t){return!g(t)||"fulfilled"===t.Ee().state}function b(t){return g(t)&&"rejected"===t.Ee().state}function E(){it.length=0,nt.length=0,ot||(ot=!0)}function I(t,e){ot&&("object"==typeof process&&"function"==typeof process.we&&u.ye.Se(function(){-1!==X(nt,t)&&(process.we("unhandledRejection",e,t),rt.push(t))}),nt.push(t),e&&void 0!==e.stack?it.push(e.stack):it.push("(no stack) "+e))}function S(t){if(ot){var e=X(nt,t);-1!==e&&("object"==typeof process&&"function"==typeof process.we&&u.ye.Se(function(){var i=X(rt,t);-1!==i&&(process.we("rejectionHandled",it[e],t),rt.splice(i,1))}),nt.splice(e,1),it.splice(e,1))}}function R(t){var e=p({when:function(e){return e&&S(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return I(e,t),e}function O(t){return p({when:function(){return t},get:function(e){return t[e]},set:function(e,i){t[e]=i},delete:function(e){delete t[e]},Re:function(e,i){return null===e||void 0===e?t.apply(void 0,i):t[e].apply(t,i)},apply:function(e,i){return t.apply(e,i)},keys:function(){return Z(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function T(t){var e=c();return u.ye(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.Te}function C(t){return p({be:function(){}},function(e,i){return D(t,e,i)},function(){return u(t).Ee()})}function N(t,e,i){return u(t).Pe(e,i)}function k(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=n[t](e)}catch(t){return R(t)}return s.done?u(s.value):d(s.value,r,o)}try{s=n[t](e)}catch(t){return i(t)?u(t.value):R(t)}return d(s,r,o)}var n=t.apply(this,arguments),r=e.bind(e,"next"),o=e.bind(e,"throw");return r()}}function A(t){u.done(u.async(t)())}function P(t){throw new V(t)}function _(t){return function(){return N([this,x(arguments)],function(e,i){return t.apply(e,i)})}}function D(t,e,i){return u(t).Ae(e,i)}function x(t){return d(t,function(t){var e=0,i=c();return J(t,function(n,r,o){var s;g(r)&&"fulfilled"===(s=r.Ee()).state?t[o]=s.value:(++e,d(r,function(n){t[o]=n,0==--e&&i.resolve(t)},i.reject,function(t){i.notify({index:o,value:t})}))},void 0),0===e&&i.resolve(t),i.Te})}function M(t){if(0===t.length)return u.resolve();var e=u.defer(),i=0;return J(t,function(n,r,o){function s(t){e.resolve(t)}function a(t){0==--i&&(t.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+t.message,e.reject(t))}function h(t){e.notify({index:o,value:t})}var u=t[o];i++,d(u,s,a,h)},void 0),e.Te}function U(t){return d(t,function(t){return t=W(t,u),d(x(W(t,function(t){return d(t,K,K)})),function(){return t})})}function L(t){return u(t).Ce()}function F(t,e){return u(t).then(void 0,void 0,e)}function j(t,e){return u(t).ke(e)}var H=!1;try{throw new Error}catch(t){H=!!t.stack}var B,V,q=h(),K=function(){},Q=function(){function t(){for(var t,n;i.next;)i=i.next,t=i.Oe,i.Oe=void 0,n=i.domain,n&&(i.domain=void 0,n._e()),e(t,n);for(;h.length;)t=h.pop(),e(t);r=!1}function e(e,i){try{e()}catch(e){if(s)throw i&&i.Ne(),setTimeout(t,0),i&&i._e(),e;setTimeout(function(){throw e},0)}i&&i.Ne()}var i={Oe:void 0,next:null},n=i,r=!1,o=void 0,s=!1,a=!1;try{a=navigator&&("Microsoft Internet Explorer"===navigator.appName||null!=navigator.appVersion.match(/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i))}catch(t){}var h=[];if(Q=function(t){"undefined"!=typeof Framework&&Framework.S()?Framework.setTimeout(t,0):(n=n.next={Oe:t,domain:s&&process.domain,next:null},r||(r=!0,o()))},"object"==typeof process&&"[object process]"===process.toString()&&process.ye)s=!0,o=function(){process.ye(t)};else if("function"!=typeof setImmediate||a)if("undefined"==typeof MessageChannel||a)o=function(){setTimeout(t,0)};else{var u=new MessageChannel;u.port1.onmessage=function(){o=c,u.port1.onmessage=t,t()};var c=function(){u.port2.postMessage(0)};o=function(){setTimeout(t,0),c()}}else o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};return Q.Se=function(t){h.push(t),r||(r=!0,o())},Q}(),z=Function.call,G=t(Array.prototype.slice),J=t(Array.prototype.reduce||function(t,e){var i=0,n=this.length;if(1===arguments.length)for(;;){if(i in this){e=this[i++];break}if(++i>=n)throw new TypeError}for(;i<n;i++)i in this&&(e=t(e,this[i],i));return e}),X=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),W=t(Array.prototype.map||function(t,e){var i=this,n=[];return J(i,function(r,o,s){n.push(t.call(e,o,s,i))},void 0),n}),Y=Object.create||function(t){function e(){}return e.prototype=t,new e},$=t(Object.prototype.hasOwnProperty),Z=Object.keys||function(t){var e=[];for(var i in t)$(t,i)&&e.push(i);return e},tt=t(Object.prototype.toString);V="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var et="From previous event:";u.resolve=u,u.ye=Q,u.ve=!1,"object"==typeof process&&process&&process.De&&process.De.Fe&&(u.ve=!0),u.defer=c,c.prototype.Le=function(){var t=this;return function(e,i){e?t.reject(e):arguments.length>2?t.resolve(G(arguments,1)):t.resolve(i)}},u.Promise=f,u.Te=f,f.race=l,f.all=x,f.reject=R,f.resolve=u,u.Me=function(t){return t},p.prototype.Me=function(){return this},u.join=function(t,e){return u(t).join(e)},p.prototype.join=function(t){return u([this,t]).Pe(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},u.race=l,p.prototype.race=function(){return this.then(u.race)},u.Be=p,p.prototype.toString=function(){return"[object Promise]"},p.prototype.then=function(t,e,i){function r(e){try{return"function"==typeof t?t(e):e}catch(t){return R(t)}}function o(t){if("function"==typeof e){n(t,a);try{return e(t)}catch(t){return R(t)}}return R(t)}function s(t){return"function"==typeof i?i(t):t}var a=this,h=c(),f=!1;return u.ye(function(){a.me(function(t){f||(f=!0,h.resolve(r(t)))},"when",[function(t){f||(f=!0,h.resolve(o(t)))}])}),a.me(void 0,"when",[void 0,function(t){var e,i=!1;try{e=s(t)}catch(t){if(i=!0,!u.onerror)throw t;u.onerror(t)}i||h.notify(e)}]),h.Te},u.Ue=function(t,e){return u(t).Ue(e)},p.prototype.Ue=function(t){return t=u(t),this.then(function(e){return t.He(e).xe(e)})},u.when=d,p.prototype.xe=function(t){return this.then(function(){return t})},u.xe=function(t,e){return u(t).xe(e)},p.prototype.qe=function(t){return this.then(function(){throw t})},u.qe=function(t,e){return u(t).qe(e)},u.Ve=v,u.je=g,u.Ge=y,u.Qe=w,p.prototype.Qe=function(){return"pending"===this.Ee().state},u.Ke=m,p.prototype.Ke=function(){return"fulfilled"===this.Ee().state},u.Ye=b,p.prototype.Ye=function(){return"rejected"===this.Ee().state};var it=[],nt=[],rt=[],ot=!0;u.ze=E,u.Je=function(){return it.slice()},u.We=function(){E(),ot=!1},E(),u.reject=R,u.Ie=O,u.Xe=C,u.Pe=N,p.prototype.Pe=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},u.async=k,u.Ze=A,u.$e=P,u.et=_,u.Ae=D,p.prototype.Ae=function(t,e){var i=this,n=c();return u.ye(function(){i.me(n.resolve,t,e)}),n.Te},u.get=function(t,e){return u(t).Ae("get",[e])},p.prototype.get=function(t){return this.Ae("get",[t])},u.set=function(t,e,i){return u(t).Ae("set",[e,i])},p.prototype.set=function(t,e){return this.Ae("set",[t,e])},u.tt=u.delete=function(t,e){return u(t).Ae("delete",[e])},p.prototype.tt=p.prototype.delete=function(t){return this.Ae("delete",[t])},u.rt=u.Re=function(t,e,i){return u(t).Ae("post",[e,i])},p.prototype.rt=p.prototype.Re=function(t,e){return this.Ae("post",[t,e])},u.send=u.it=u.nt=function(t,e){return u(t).Ae("post",[e,G(arguments,2)])},p.prototype.send=p.prototype.it=p.prototype.nt=function(t){return this.Ae("post",[t,G(arguments,1)])},u.st=function(t,e){return u(t).Ae("apply",[void 0,e])},p.prototype.st=function(t){return this.Ae("apply",[void 0,t])},u.ot=u.He=function(t){return u(t).Ae("apply",[void 0,G(arguments,1)])},p.prototype.He=function(){return this.Ae("apply",[void 0,G(arguments)])},u.at=function(t){var e=u(t),i=G(arguments,1);return function(){return e.Ae("apply",[this,i.concat(G(arguments))])}},p.prototype.at=function(){var t=this,e=G(arguments);return function(){return t.Ae("apply",[this,e.concat(G(arguments))])}},u.keys=function(t){return u(t).Ae("keys",[])},p.prototype.keys=function(){return this.Ae("keys",[])},u.all=x,p.prototype.all=function(){return x(this)},u.ht=M,p.prototype.ht=function(){return M(this)},u.ct=function(t,e,i){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("allResolved is deprecated, use allSettled instead.",new Error("").stack),t.apply(t,arguments)}}(U),p.prototype.ct=function(){return U(this)},u.Ce=L,p.prototype.Ce=function(){return this.then(function(t){return x(W(t,function(t){function e(){return t.Ee()}return t=u(t),t.then(e,e)}))})},u.fail=u.catch=function(t,e){return u(t).then(void 0,e)},p.prototype.fail=p.prototype.catch=function(t){return this.then(void 0,t)},u.progress=F,p.prototype.progress=function(t){return this.then(void 0,void 0,t)},u.ut=u.finally=function(t,e){return u(t).finally(e)},p.prototype.ut=p.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=u(t),this.then(function(e){return t.He().then(function(){return e})},function(e){return t.He().then(function(){throw e})})},u.done=function(t,e,i,n){return u(t).done(e,i,n)},p.prototype.done=function(t,e,i){var r=function(t){u.ye(function(){if(n(t,o),!u.onerror)throw t;u.onerror(t)})},o=t||e||i?this.then(t,e,i):this;"object"==typeof process&&process&&process.domain&&(r=process.domain.bind(r)),o.then(void 0,r)},u.timeout=function(t,e,i){return u(t).timeout(e,i)},p.prototype.timeout=function(t,e){var i=c(),n=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),i.reject(e)},t);return this.then(function(t){clearTimeout(n),i.resolve(t)},function(t){clearTimeout(n),i.reject(t)},i.notify),i.Te},u.delay=function(t,e){return void 0===e&&(e=t,t=void 0),u(t).delay(e)},p.prototype.delay=function(t){return this.then(function(e){var i=c();return setTimeout(function(){i.resolve(e)},t),i.Te})},u.lt=function(t,e){return u(t).lt(e)},p.prototype.lt=function(t){var e=c(),i=G(t);return i.push(e.Le()),this.st(i).fail(e.reject),e.Te},u.pt=function(t){var e=G(arguments,1);return u(t).lt(e)},p.prototype.pt=function(){var t=G(arguments),e=c();return t.push(e.Le()),this.st(t).fail(e.reject),e.Te},u.ft=u.dt=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=G(arguments,1);return function(){var i=e.concat(G(arguments)),n=c();return i.push(n.Le()),u(t).st(i).fail(n.reject),n.Te}},p.prototype.ft=p.prototype.dt=function(){var t=G(arguments);return t.unshift(this),u.dt.apply(void 0,t)},u.gt=function(t,e){var i=G(arguments,2);return function(){function n(){return t.apply(e,arguments)}var r=i.concat(G(arguments)),o=c();return r.push(o.Le()),u(n).st(r).fail(o.reject),o.Te}},p.prototype.gt=function(){var t=G(arguments,0);return t.unshift(this),u.gt.apply(void 0,t)},u.vt=u.yt=function(t,e,i){return u(t).yt(e,i)},p.prototype.vt=p.prototype.yt=function(t,e){var i=G(e||[]),n=c();return i.push(n.Le()),this.Ae("post",[t,i]).fail(n.reject),n.Te},u.Et=u.Tt=u.It=function(t,e){var i=G(arguments,2),n=c();return i.push(n.Le()),u(t).Ae("post",[e,i]).fail(n.reject),n.Te},p.prototype.Et=p.prototype.Tt=p.prototype.It=function(t){var e=G(arguments,1),i=c();return e.push(i.Le()),this.Ae("post",[t,e]).fail(i.reject),i.Te},u.ke=j,p.prototype.ke=function(t){if(!t)return this;this.then(function(e){u.ye(function(){t(null,e)})},function(e){u.ye(function(){t(e)})})},u.wt=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var st=h();return u})},function(t,e,i){"use strict";var n=i(5),r=n.Rt.St;!function(t){var e=function(){function t(){}return t}();e.bt=5e3,e.Pt=6,e.At=1e4,e.Ct=.2,e.kt=10,t.Ot=e;var i=function(){function t(){}return t}();i._t="0.0.1",i.Nt=3e4,i.Dt=4e7,i.Ft=1,i.Lt=.8,i.Mt=!1,i.Bt=2e4,t.Ut=i;var n=function(){function t(){}return t}();n.xt=!0,n.Ht=3,n.qt=1e4,t.Vt=n;var o=function(){function t(){}return t}();o.jt=1.1,t.Gt=o;var s=function(){function t(){}return t}();s.Qt=r,s.Kt=2e4,s.Yt=5e3,t.zt=s;var a=function(){function t(){}return t}();a.Jt=[412],t.Wt=a;var h=function(){function t(){}return t}();h.Xt=2e3,h.Zt=!0,h.$t=!1,h.er=1,h.tr=.02,h.rr=!0,h.ir=!1,h.nr=!1,h.sr=1e4,h.or=4e4,h.ar=3700,h.hr=2e4,h.cr=1,h.ur=5,h.lr=.4,h.pr=1,t.dr=h;var u=function(){function t(){}return t}();u.gr=30,u.vr=2e4,u.yr=3e4,t.mr=u;var c=function(){function t(){}return t}();c.Er=3e7,c.Tr=3e4,c.Ir=!1,c.wr=10,t.Sr=c;var f=function(){function t(){}return t}();f.Rr=3,f.br=!1,f.Pr=3e4,f.Ar=.2,f.Cr=.2,f.kr=1e4,t.Or=f;var l=function(){function t(){}return t}();l._r=!1,t.j=l;var p=function(){function t(){}return t}();p.Nr=64e3,p.Dr=5e3,p.Fr=1,p.Lr=1,t.Mr=p;var d=function(){function t(){}return t}();d.Br=4e3,d.Ur=3e4,d.xr=4096,d.Hr=!0,d.qr=5e3,d.Vr=1e4,t.UDPBroadcast=d;var v=function(){function t(){}return t}();v.jr=100,v.Gr=1e3,t.Qr=v;var g=function(){function t(){}return t}();g.Kr=20,g.Yr=20,g.zr=20,g.Jr=5,t.Wr=g;var y=function(){function t(){}return t}();y.Xr="site",y.Zr="externalAs",y.$r="availableSendRate",y.ei="remoteAddress",y.ti="localAddress",y.ri=2e4,t.ii=y}(e.ni||(e.ni={}))},function(t,e,i){"use strict";var n=i(104),r=i(20),o=i(5),s=o.Rt.si,a=(o.Rt.oi,o.Rt.ai),h=o.Rt.hi,u=function(){function t(e){if(this.ci=!1,this.ui="undefined"!=typeof atatus&&null!=atatus,t.li)throw new Error("Error: Instantiation failed: Use AtatusLogger.getInstance() instead of new.");var i,n=void 0!=r.HiveConfig.ErrorMonitor.key?r.HiveConfig.ErrorMonitor.key:s,o=1==r.HiveConfig.ErrorMonitor.enabledRUM,u=1==r.HiveConfig.ErrorMonitor.enableKeyCombination,c=1==r.HiveConfig.ErrorMonitor.enabledErrorFilter;c&&(i=this.pi()),this.version=e,this.ui&&(void 0==r.HiveConfig.ErrorMonitor.enabled&&a||void 0!=r.HiveConfig.ErrorMonitor.enabled&&1==r.HiveConfig.ErrorMonitor.enabled)&&(atatus.config(n,{enableSourcemap:!0,disableRUM:!o,console:!1,version:e,beforeErrorSend:function(t){var e=!1;if(t&&t.customData&&void 0!==t.customData.forceSend&&(e=t.customData.forceSend,delete t.customData.forceSend,0===Object.keys(t.customData).length&&(t.customData=null)),!c||e)return!0;if(!i)return!1;try{var n=!1;if(t.backTraces){for(var r=0,o=t.backTraces;r<o.length;r++){var s=o[r];if(s.f.indexOf(i)>-1&&s.ln>h){n=!0;break}}n&&(t.name=t.name.replace(/%s \[[0-9]{2}:[0-9]{2}:[0-9]{2}:[0-9]+] /,""),t.name.indexOf("Status Code Error:")>=0&&(t.tags=["Plugin Error Code",t.name.split(":")[1].trim()]))}return n}catch(t){return!1}}}).install(),u&&this.fi(),this.ci=!0,window.console&&console.log("[HiveComm] Error Monitor installed [RUM:"+o+", KeyHandler:"+u+"]"),c&&!i&&this.di("Could not extract error filter"))}return t.gi=function(e){return void 0===e&&(e="3.0.0"),void 0===this.li&&(this.li=new t(e)),this.li},t.prototype.fi=function(){n.yi.gi().vi([16,17,88],function(){try{throw new Error("Upload console logs")}catch(t){atatus.notify(t),window.console&&console.log("[HiveComm] console log uploaded for debugging")}})},t.prototype.pi=function(){try{throw new Error("test")}catch(e){var t=e.stack.match(/(\/\/.*\.js)/i);if(t&&t.length>0)return t[0]}},t.prototype.setUser=function(t){this.ui&&this.ci&&atatus.setUser(t)},t.prototype.mi=function(t){this.te=t},t.prototype.setCustomData=function(t){this.ui&&this.ci&&atatus.setCustomData(t)},t.prototype.di=function(t,e,i,n){var r="";if("string"==typeof e?r=e.trim():void 0!==e&&(i=e),(i instanceof Error||i&&"object"!=typeof i)&&(i={error:i.toString()}),i||(i={}),this.te&&(Object.keys(i).length>0?this.te.warn(r+" "+t,i):this.te.warn(r+" "+t)),r&&(n=n?n.concat([r]):[r]),i.forceSend=!0,this.ui&&this.ci)try{throw new Error(t)}catch(t){atatus.notify(t,i,n)}},t.prototype.setTags=function(t){this.ui&&this.ci&&atatus.setTags(t)},t.prototype.notify=function(t,e){this.ui&&this.ci&&(e||(e={}),e.forceSend=!0,atatus.notify(t,e))},t}();e.ErrorMonitor=u},function(t,e,i){"use strict";var n=function(){function t(){}return t}();n.Ei=!1,n.Ti=!0,n.Ii=!1,n.wi="3.5.1",n.Si="bitmovin",n.Ri=!1,n.bi=!0,n.Pi="undefined"!=typeof INCLUDE_VOD_CACHE&&INCLUDE_VOD_CACHE,n.Ai="undefined"!=typeof INCLUDE_UDP_BROADCAST&&INCLUDE_UDP_BROADCAST,n.Ci="undefined"!=typeof INCLUDE_UDP_LEADER_ELECTION&&INCLUDE_UDP_LEADER_ELECTION,n.ki="undefined"!=typeof LEADER_SCORE_EQUALITY&&LEADER_SCORE_EQUALITY,n.Oi="undefined"!=typeof INCLUDE_DEFAULT_NETWORK&&INCLUDE_DEFAULT_NETWORK,n._i="undefined"!=typeof HIVE_RESTRICTED_CONNINFO&&HIVE_RESTRICTED_CONNINFO,n.St="undefined"!=typeof HIVE_DISCOVERY?HIVE_DISCOVERY:"ws://127.0.0.1:8000/hive",n.Ni="undefined"!=typeof P2PDispatcherDetailedLog&&P2PDispatcherDetailedLog,n.Di="undefined"!=typeof NetworkManagerDetailedLog&&NetworkManagerDetailedLog,n.si="undefined"!=typeof ATATUS_KEY?ATATUS_KEY:"592835a6b4204dd197c00488610003e0",n.oi="undefined"!=typeof ATATUS_VERSION?ATATUS_VERSION:"0.8",n.ai="undefined"==typeof ATATUS_DEFAULT_ENABLED||ATATUS_DEFAULT_ENABLED,n.hi=5,n.Fi="undefined"!=typeof HIVE_PLUGIN_TIMEOUT?HIVE_PLUGIN_TIMEOUT:-1,n.Li="undefined"==typeof HIVE_DETECT_PRIVATEIP||HIVE_DETECT_PRIVATEIP,n.Mi=!0,e.Rt=n},function(t,e,i){"use strict";var n=i(0),r=i(40),o=i(27);!function(t){function e(t,e){return e?t+"-"+e:t}function i(t,e){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(e),t.byteLength),i.buffer}function s(t){var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t),0),e.buffer}function a(t,e,i){void 0===i&&(i=!0);for(var n=0;n<t.length;)if(t[n]===e){if(t.splice(n,1),i)break}else n++}function h(t){return String.fromCharCode.apply(null,new Uint16Array(t))}function u(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(location.search);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))}function c(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(n.Framework.random()*(e+1)),r=t[e];t[e]=t[i],t[i]=r}return t}function f(t){var e=new Array;for(var i in t)t.hasOwnProperty(i)&&!/^\d+$/.test(i)&&e.push(i);return e}function l(t){return Object.keys(t).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)})}function p(t,e){return t[e]?t[e]:null}function d(t,e){return new o(e).Bi(t).toString()}function v(t){return 0==t.length?0:t.reduce(function(t,e){return t+e})/t.length}function g(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0,r=t.length;n<r;n++)i[n]=t.charCodeAt(n);return e}function y(t,e,i,n){var r=new t(e,i),o=n||i.currentTarget;return o&&Object.defineProperties(r,{currentTarget:{value:o,l:!0,Ui:!1},target:{value:o,l:!0,Ui:!1}}),r}t.xi=new r.Counter;var w=function(){function t(){this.ALPHA=.25,this.Hi=1e8,this.qi=1e4}return t.prototype.Vi=function(){return void 0!==this.ji},t.prototype.Gi=function(t,e){return this.ji=Math.min(this.Hi,e/t*8e3),this},t.prototype.Qi=function(t){return this.ji=Math.max(this.Hi,t),this},t.prototype.Ki=function(t){t.Vi()&&(this.Vi()?this.ji=this.ji*(1-this.ALPHA)+t.ji*this.ALPHA:this.ji=t.ji)},t.prototype.Yi=function(t){return this.Vi()?Math.round(8e3*t/this.ji):NaN},t.prototype.zi=function(){return this.Vi()?this.ji:NaN},t.prototype.Ji=function(){return this.Vi()?this.ji/1e3:NaN},t.prototype.Wi=function(){return this.Vi()?this.ji/1e6:NaN},t.prototype.Xi=function(){return this.Vi()?this.ji>1e6?(this.ji/1e6).toFixed(2)+"Mb/s":this.ji>1e3?(this.ji/1e3).toFixed(2)+"Kb/s":this.ji+"b/s":"NaN"},t}();t.Zi=w,t.$i=e,t.appendBuffer=i,t.en=s,t.tn=a,t.rn=h,t.in=u,t.nn=c,t.sn=f,t.an=l,t.hn=p,t.cn=d,t.un=v,t.pn=g,t.createEvent=y}(e.fn||(e.fn={}))},function(t,e,i){"use strict";function n(t,e,i){return void 0===e&&(e=""),void 0===i&&(i=[]),r(t,e,i,!0)}function r(t,e,i,n){void 0===e&&(e=""),void 0===i&&(i=[]),void 0===n&&(n=!1);for(var o in t)!function(o){if(t.hasOwnProperty(o)){var s=t[o];Array.isArray(s)?s.forEach(function(t,s){"object"==typeof t&&r(t,e+"."+o+"["+s+"]",i,n)}):"object"==typeof s?r(s,e+"."+o,i,n):"number"==typeof s&&isNaN(s)&&(i.push(e+"."+o),n||(t[o]=null))}}(o);return i}function o(t,e){function i(){if(!t())return n.resolve(!0);y.when(e(),i,n.reject)}var n=y.defer();return y.ye(i),n.Te}function s(t,e,i){return void 0===i&&(i=!0),a("GET",t,e,i)}function a(t,e,i,n){void 0===n&&(n=!0);var r=y.defer();try{var o=new XMLHttpRequest;o.open(t,e,n),void 0!=i&&null!=i&&o.setRequestHeader("Content-Type",i),o.onload=function(){200==o.status?r.resolve(o.response):r.reject({status:o.status,reason:o.statusText,body:o.responseText})},o.onerror=function(t){r.reject({status:-1,reason:"Network Error"})},o.send()}catch(t){r.reject({status:-1,reason:t})}return r.Te}function h(t,e,i,n){void 0===n&&(n=!0);var r=y.defer();try{var o=new XMLHttpRequest;o.open("POST",t,n),void 0!=i&&null!=i&&o.setRequestHeader("Content-Type",i),o.onload=function(){200==o.status?r.resolve(o.response):r.reject({status:o.status,reason:o.statusText})},o.onerror=function(t){r.reject({status:-1,reason:"Network Error"})},o.send(e)}catch(t){r.reject({status:-1,reason:t})}return r.Te}function u(t,e){var i,n,r=document.querySelector("base"),o=document.querySelector("head"),s=document.createElement("a"),a=r;return r?i=r.href:a=o.appendChild(document.createElement("base")),a.href=t,s.href=e,n=s.href,r?r.href=i:o.removeChild(a),n}function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t[0],n=1;n<t.length;n++){var r=new RegExp("\\{"+(n-1)+"\\}","gm");i=i.replace(r,t[n])}return i}function f(t,e){for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(e[i]=t[i])}function l(t,e,i){var n=g(t).dn(!0);for(var r in n)try{if(n.hasOwnProperty(r)&&e.hasOwnProperty(r)&&i.hasOwnProperty(e[r])){var o=e[r],s=n[r];i[o]=p(s,i[o])}}catch(t){}}function p(t,e){var i;switch(typeof e){case"number":i=parseInt(t);break;case"boolean":i="true"===t;break;default:i=t}return i}function d(t,e,i){var n=new m;return n.ticketUrl=t,n.code=e,n.message=b(e),n.detailedMessage=i,n}var v=i(1),g=i(27),y=i(2),w=i(26),m=w.gn.HiveSessionError,b=w.gn.getHiveSessionErrorMessage,E=w.gn.HiveSession,I=i(50),S=i(67),R=i(8),O=i(5),T=i(4),C=O.Rt.Ei;if(C)var N=i(28).HiveRequest,k=i(69).vn;var A=function(){function t(e){if(!e){if(0==Object.keys(t.mapping).length&&!t.yn)return T.ErrorMonitor.gi().di("No registered default HiveRequestFactory tech",t.mn),t.yn=!0,t.En();e=Object.keys(t.mapping)[0]}if(!(e in t.mapping))return t.yn||(T.ErrorMonitor.gi().di("no registered HiveRequestFactory tech for session",{sessionId:e}),t.yn=!0),t.En();var i=t.mapping[e];switch(i.tech){case"HiveJS":return C?i.Tn?new N(e):(i.Tn=!0,new k(e)):t.En();case"HiveJsProxy":return i.Tn?new I.In(e):(i.Tn=!0,new S.wn(e));case"HiveJava":case"StatsJS":return t.En()}}return t.En=function(){return"undefined"!=typeof OriginalXMLHttpRequest?new OriginalXMLHttpRequest:new XMLHttpRequest},t.clear=function(){t.mapping={}},t.Sn=function(e){if(e in t.mapping){var i=t.mapping[e];for(var n in i)"tech"!==n&&delete i[n]}},t.Rn=function(e){e in t.mapping&&delete t.mapping[e]},t.bn=function(e,i){e in t.mapping||(t.mapping[e]={}),t.mapping[e].tech=i},t}();A.mapping={},A.yn=!1,A.mn="[HiveRequestFactory]",e.HiveRequestFactory=A;var P=function(){function t(t,e,i,n){this.Pn=!1,this.ticketUrl=t,this.ticket=e,this.manifest=i,this.An=y.defer(),this.Cn=n,this.Cn&&this.An.resolve(this.Cn)}return t.prototype.ci=function(t){return null!==this.tech&&this.tech.ci(t,this)},t.prototype.kn=function(t){this.Pn!=t&&(this.Pn=t,this.tech&&this.tech.On(this,t))},t.prototype._n=function(){return this.Pn},t.prototype.close=function(t,e){if(void 0===e&&(e=!0),this.Pn=!0,null!=this.tech)return this.tech.Nn(this,t,e)},t.prototype.toString=function(){return this.ticket.toString()},t.prototype.Dn=function(){var t=new E;return t.id=this.id,t.ticketUrl=this.ticketUrl,t.manifest=this.manifest,t.tech=this.tech.Fn(),t},t.prototype.Ln=function(){return this.An.Te},t.prototype.Mn=function(t){this.Cn=t,this.An.resolve(this.Cn)},t}();e.Bn=P;var _=function(){function t(){}return t}();e.Un=_;var D=function(){function t(){this.success=0,this.xn=0,this.Hn=0}return t}();e.qn=D;var x=function(){function t(){this.Vn=0,this.jn=0,this.Gn=new v,this.Qn=new v}return t.prototype.Kn=function(t,e,i,n){void 0===n&&(n=!0);var r=t?this.Gn:this.Qn;r.has(e)||r.set(e,new D);var o=r.get(e);o.Hn+=i,n&&o.success++},t.prototype.Yn=function(t,e){var i=t?this.Gn:this.Qn;i.has(e)||i.set(e,new D),i.get(e).xn++},t.prototype.zn=function(t){this.bandwidth=t},t.prototype.Jn=function(){this.Vn++},t.prototype.Wn=function(){this.jn++},t.prototype.Xn=function(){return this.bandwidth},t.prototype.Zn=function(){return this.Gn},t.prototype.$n=function(){return this.Qn},t.prototype.es=function(){return this.Vn},t.prototype.rs=function(){return this.jn},t}();e.ns=x;var M=function(){function t(){var e=this;if(t.li)throw new Error("Error: Instantiation failed: Use VisibilityChangeListener.getInstance() instead of new.");var i,n;void 0!==document.hidden?(i="hidden",n="visibilitychange"):void 0!==document.msHidden?(i="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(i="webkitHidden",n="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==document[i]?document.addEventListener(n,function(){var t=!document[i];e.ss.forEach(function(i){i.call(e,t)})},!1):t.te&&t.te.debug("warn - visibilityChange listener not supported"),this.ss=new Array}return t.gi=function(e){return e&&(this.te=e),void 0===this.li&&(this.li=new t),this.li},t.prototype.as=function(t){this.ss.push(t)},t}();e.hs=M,e.cs=n,e.us=r,e.ls=o,e.ps=s,e.fs=a,e.ds=h,e.cn=u,e.gs=c,e.vs=f,e.ys=l,e.ms=d;var U=function(){function t(){}return t.getItem=function(t){try{return window.sessionStorage?window.sessionStorage.getItem(t):null}catch(t){return null}},t.setItem=function(t,e){try{return!!window.sessionStorage&&(window.sessionStorage.setItem(t,e),!0)}catch(t){return!1}},t.removeItem=function(t){try{window.sessionStorage&&window.sessionStorage.removeItem(t)}catch(t){return null}},t}();e.Es=U;var L=function(){function t(t){this.Ts=t}return t.prototype.Is=function(t){var e=Date.now();return this.isEqual(this.ws,t)||(this.Ss=e),this.ws=t,e-this.Ss>=this.Ts},t.prototype.isEqual=function(t,e){return!(!t||!e)&&[e.Rs-t.Rs,e.bs-t.bs,e.Ps-t.Ps].reduce(function(t,e){return t&&Math.abs(e)<10},!0)},t}();e.As=L;var F=function(){function t(){}return t.Cs=function(t){var e=t.Cs();return R.HiveConfig.SensitiveInfo.restrictedConnectivityInfo&&e&&(e=e.replace(/[0-9]*$/,"0")),e},t.ks=function(t){return R.HiveConfig.SensitiveInfo.restrictedConnectivityInfo?R.HiveConfig.SensitiveInfo.hiddenHostnameValue:t.Os()},t}();e._s=F},function(t,e,i){"use strict";var n,r=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(38),s=i(5),a=s.Rt._i,h=s.Rt.Li;!function(t){var e=function(){function t(){}return t}();e.DashFilterBitrates=null,e.DashRemoveBitrateSize=!1,t.Dash=e;var i=function(){function t(){}return t}();i.Ds=!0,t.Stats=i;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(o.HiveConfig.DebugLogs);n.TrackerLogs=0,t.DebugLogs=n;var s=function(){function t(){}return t}();s.usiz=null,t.UDPBroadcast=s;var u=function(){function t(){}return t}();u.restrictedConnectivityInfo=a,u.hiddenHostnameValue="[Hidden]",t.SensitiveInfo=u;var c=function(){function t(){}return t}();c.Fs=null,c.Ls=null,t.ClientInfo=c;var f=function(){function t(){}return t}();f.detectPrivateIP=h,t.ConnInfo=f}(n=e.HiveConfig||(e.HiveConfig={})),"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Dash=n.Dash,window.HiveConfig.Stats=n.Stats,window.HiveConfig.UDPBroadcast=n.UDPBroadcast,window.HiveConfig.DebugLogs=n.DebugLogs,window.HiveConfig.SensitiveInfo=n.SensitiveInfo,window.HiveConfig.ClientInfo=n.ClientInfo,window.HiveConfig.ConnInfo=n.ConnInfo)},function(t,e,i){"use strict";!function(t){t.Ms="statsClient",t.H="servicesClient",t.Bs="ticketResolver",t.D="identityProvider",t.Us="connInfoProvider",t.xs="peerInfo",t.Hs="streamInfoProvider",t.qs="reporting",t.Vs="statsStore",t.js="trackManager",t.Gs="trackClient"}(e.Qs||(e.Qs={}))},function(t,e,i){"use strict";!function(t){t[t.Ks=0]="AUDIO",t[t.Ys=1]="VIDEO",t[t.zs=2]="METADATA",t[t.Js=3]="OTHER"}(e.Ws||(e.Ws={}))},function(t,e,i){"use strict";i(56),function(t){t[t.Xs=0]="TRACKER",t[t.K=1]="UDP"}(e.Zs||(e.Zs={})),function(t){t[t.$s=1]="PLAYER",t[t.eo=2]="P2P_AGENT",t[t.to=3]="PREFETCHER_FIRST_TIER",t[t.ro=4]="PREFETCHER_SECOND_TIER"}(e.io||(e.io={}));var n=function(){function t(){}return t}();e.no=n;var r=function(){function t(t,e,i){this.so=i,this.internalAs=0,this.externalAs=0,this.type=t,i||(this.so=!1),e&&(this.guid=e.guid,this.internalAs=e.internalAs,this.externalAs=e.externalAs,this.oo=e.oo,this.bandwidth=e.bandwidth,this.ao=e.ao,this.ho=e.ho,this.co=e.co,this.timestamp=e.timestamp,this.uo=e.uo,this.lo=e.lo)}return t}();e.po=r},function(t,e,i){i(60),i(33),i(61),i(98)},function(t,e,i){"use strict";function n(){throw new Error("Can't construct. GenericCollection is a mixin.")}t.t=n,n.fo=Object.freeze([]),n.prototype.addEach=function(t){if(t&&Object(t)===t)if("function"==typeof t.forEach)t.forEach(this.add,this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);else Object.keys(t).forEach(function(e){this.add(t[e],e)},this);else if(t&&"number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);return this},n.prototype.do=function(t,e){return t.forEach(function(t){this.delete(t,e)},this),this},n.prototype.forEach=function(t){var e=arguments[1];return this.reduce(function(i,n,r,o,s){t.call(e,n,r,o,s)},void 0)},n.prototype.map=function(t){var e=arguments[1],i=[];return this.reduce(function(n,r,o,s,a){i.push(t.call(e,r,o,s,a))},void 0),i},n.prototype.enumerate=function(t){null==t&&(t=0);var e=[];return this.reduce(function(i,n){e.push([t++,n])},void 0),e},n.prototype.group=function(t,e,i){i=i||Object.ae;var n=[],r=[];return this.forEach(function(o,s,a){var h,s=t.call(e,o,s,a),u=r.indexOf(s,i);-1===u?(h=[],n.push([s,h]),r.push(s)):h=n[u][1],h.push(o)}),n},n.prototype.toArray=function(){return this.map(Function.identity)},n.prototype.vo=function(){var t={};return this.reduce(function(e,i,n){t[n]=i},void 0),t},n.prototype.filter=function(t){var e=arguments[1],i=this.de();return this.reduce(function(n,r,o,s,a){t.call(e,r,o,s,a)&&i.add(r,o)},void 0),i},n.prototype.every=function(t){var e=arguments[1];return this.reduce(function(i,n,r,o,s){return i&&t.call(e,n,r,o,s)},!0)},n.prototype.some=function(t){var e=arguments[1];return this.reduce(function(i,n,r,o,s){return i||t.call(e,n,r,o,s)},!1)},n.prototype.all=function(){return this.every(Boolean)},n.prototype.ht=function(){return this.some(Boolean)},n.prototype.min=function(t){t=t||this.yo||Object.mo;var e=!0;return this.reduce(function(i,n){return e?(e=!1,n):t(n,i)<0?n:i},void 0)},n.prototype.max=function(t){t=t||this.yo||Object.mo;var e=!0;return this.reduce(function(i,n){return e?(e=!1,n):t(n,i)>0?n:i},void 0)},n.prototype.Eo=function(t){return t=void 0===t?0:t,this.reduce(function(t,e){return t+e},t)},n.prototype.To=function(t){var e=void 0===t?0:t,i=void 0===t?0:t;return this.reduce(function(t,n){e+=n,i+=1},void 0),e/i},n.prototype.concat=function(){for(var t=this.de(this),e=0;e<arguments.length;e++)t.addEach(arguments[e]);return t},n.prototype.Io=function(){var t=this;return this.reduce(function(e,i){return i.forEach(function(t){this.push(t)},e,t),e},[])},n.prototype.wo=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),Array.So(t)},n.prototype.join=function(t){return this.reduce(function(e,i){return void 0===e?i:e+t+i},void 0)},n.prototype.Ro=function(t,e,i){return t=t||this.yo||Object.mo,t.bo?(e=t.bo,t=t.mo||this.yo||Object.mo):e=e||Function.identity,void 0===i&&(i=1),this.map(function(t){return{bo:e(t),value:t}}).sort(function(e,n){return t(e.bo,n.bo)*i}).map(function(t){return t.value})},n.prototype.reversed=function(){return this.de(this).reverse()},n.prototype.clone=function(t,e){if(void 0===t)t=1/0;else if(0===t)return this;var i=this.de();return this.forEach(function(n,r){i.add(Object.clone(n,t-1,e),r)},this),i},n.prototype.only=function(){if(1===this.length)return this.Po()},n.prototype.iterator=function(){return this.Ao.apply(this,arguments)},n.fe={get:function(){return this.length},l:!1,u:!0},Object.defineProperty(n.prototype,"size",n.fe),i(60)},function(t,e,i){function n(){throw new Error("This is an abstract interface. Mix it. Don't construct it")}function r(t,e,i,n){var r,o,s,a=t.active,h=t.Co,u=h.length,c=u;for(a.length>u&&(a.length=u);u--;)a[u]=h[u];for(o=0;o<c;o++)if(s=a[o],!o||h.indexOf(s)>=0){if(r=s[t.ko]||s[t.Oo]||s,!r.call)throw new Error("No event listener for "+t._o+" or "+t.No+" or call on "+r);r.call(s,i,e,n)}}i(12);var o=Object.prototype.hasOwnProperty;t.t=n,n.debug=!0,n.prototype.Do=function(t){this.Fo||Object.defineProperty(this,"__propertyChangeListeners__",{value:{},l:!1,u:!0,Ui:!0});var e=this.Fo;if(!o.call(e,t)){var i=String(t);i=i&&i[0].toUpperCase()+i.slice(1),e[t]={Lo:{Co:[],active:[],ko:"handle"+i+"WillChange",Oo:"handlePropertyWillChange"},Mo:{Co:[],active:[],ko:"handle"+i+"Change",Oo:"handlePropertyChange"}}}return e[t]},n.prototype.Bo=function(t){if(!this.Fo)return!1;if(!t)return!0;var e=this.Fo;return!!o.call(e,t)},n.prototype.Uo=function(t,e,i){this.xo&&!this.Ho&&this.xo();var r,o=n.Do(this,t);r=i?o.Lo:o.Mo,n.qo(this,t),r.Co.push(e);var s=this;return function(){n.Vo(s,t,e,i),s=null}},n.prototype.jo=function(t,e){return n.Uo(this,t,e,!0)},n.prototype.Vo=function(t,e,i){var r,o=n.Do(this,t);r=i?o.Lo:o.Mo;var s=r.Co.lastIndexOf(e);if(-1===s)throw new Error("Can't remove property change listener: does not exist: property name"+JSON.stringify(t));r.Co.splice(s,1)},n.prototype.Go=function(t,e){return n.Vo(this,t,e,!0)},n.prototype.Qo=function(t,e,i){var o,s=n.Do(this,t);if(!s.ci){s.ci=!0,o=i?s.Lo:s.Mo;try{r(o,t,e,this)}finally{s.ci=!1}}},n.prototype.Ko=function(t,e){return n.Qo(this,t,e,!0)},n.prototype.qo=function(t){var e=this.Yo;if(e){if(o.call(e,t))return}else{if(Array.isArray(this))return;if(!Object.isExtensible(this))throw new Error("Can't make property "+JSON.stringify(t)+" observable on "+this+" because object is not extensible");e={},Object.defineProperty(this,"__overriddenPropertyDescriptors__",{value:e,l:!1,Ui:!0,u:!0})}var i;"object"==typeof this.zo?i=this.zo:(i={},Object.defineProperty(this,"__state__",{value:i,Ui:!0,l:!1})),i[t]=this[t];var n,s=this;do{if(n=Object.getOwnPropertyDescriptor(s,t))break;s=Object.getPrototypeOf(s)}while(s);if(n){if(!n.u)return;if(!n.Ui&&!n.set)return}else n={value:void 0,l:!0,Ui:!0,u:!0};e[t]=n;var a;a="value"in n?{get:function(){return n.value},set:function(e){var o,s;if(e!==n.value){if(o=this.Fo[t],!(s=o.ci)){o.ci=!0;try{r(o.Lo,t,n.value,this)}finally{}}if(n.value=e,i[t]=e,!s)try{r(o.Mo,t,e,this)}finally{o.ci=!1}}},l:n.l,u:!0}:{get:n.get,set:function(e){var o,s,a=this[t];if(n.set.call(this,e),(e=this[t])!==a){if(o=this.Fo[t],!(s=o.ci)){o.ci=!0;try{r(o.Lo,t,a,this)}finally{}}if(i[t]=e,!s)try{r(o.Mo,t,e,this)}finally{o.ci=!1}}},l:n.l,u:!0},Object.defineProperty(this,t,a)},n.Do=function(t,e){return t.Do?t.Do(e):n.prototype.Do.call(t,e)},n.Bo=function(t,e){return t.Bo?t.Bo(e):n.prototype.Bo.call(t,e)},n.Uo=function(t,e,i,r){if(Object.Jo(t))return t.Uo?t.Uo(e,i,r):n.prototype.Uo.call(t,e,i,r)},n.Vo=function(t,e,i,r){if(Object.Jo(t))return t.Vo?t.Vo(e,i,r):n.prototype.Vo.call(t,e,i,r)},n.Qo=function(t,e,i,r){if(Object.Jo(t))return t.Qo?t.Qo(e,i,r):n.prototype.Qo.call(t,e,i,r)},n.jo=function(t,e,i){return n.Uo(t,e,i,!0)},n.Go=function(t,e,i){return n.Vo(t,e,i,!0)},n.Ko=function(t,e,i){return n.Qo(t,e,i,!0)},n.qo=function(t,e){return t.qo?t.qo(e):n.prototype.qo.call(t,e)}},function(t,e,i){"use strict";!function(t){t.Wo="snapAccountingManager",t.Xo="membership",t.Zo="partnership",t.$o="inPartnership",t.ea="outPartnership",t.ta="inPrefetcherPartnership",t.ra="outPrefetcherPartnership",t.ia="cache",t.na="livecache",t.sa="vodcache",t.oa="objIndex",t.aa="centrFragment",t.ha="hcache",t.ca="responder",t.ua="requester",t.la="p2pRequester",t.pa="peer",t.fa="contextResolver",t.da="videoPrefetcher",t.ga="prefetchManager",t.va="picker",t.ya="trackerClient",t.ma="scoreUpdater",t.U="serverManager",t.Ea="requestTracker",t.Ta="trackerManager",t.Ia="renderStats",t.wa="udpBroadcaster",t.Sa="udpDiscovery",t.Ci="udpLeaderElection",t.Ra="nodeInfo",t.ba="ipspoofing"}(e.Pa||(e.Pa={}))},function(t,e){t.t=function(){return new Function}},function(t,e,i){"use strict";var n=!0,r={Aa:function(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(n=t,t?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},Ca:function(t,e,i){var n=t.match(e);return n&&n.length>=i&&parseInt(n[i],10)},ka:function(){var t={};if(t.Oa=null,t.version=null,"undefined"==typeof window||!window.navigator)return t.Oa="Not a browser.",t;if(navigator.mozGetUserMedia)t.Oa="firefox",t.version=this.Ca(navigator.userAgent,/Firefox\/(\d+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)t.Oa="chrome",t.version=this.Ca(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return t.Oa="Unsupported webkit-based browser with GUM support but no WebRTC support.",t;t.Oa="safari",t.version=this.Ca(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))t.Oa="edge",t.version=this.Ca(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!navigator.mediaDevices||!navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return t.Oa="Not a supported browser.",t;t.Oa="safari",t.version=this.Ca(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}return t},_a:function(){if("object"==typeof window&&window.HTMLMediaElement&&"srcObject"in window.HTMLMediaElement.prototype){var t=URL.createObjectURL.bind(URL),e=URL.revokeObjectURL.bind(URL),i=new Map,n=0;URL.createObjectURL=function(e){if("getTracks"in e){var r="polyblob:"+ ++n;return i.set(r,e),console.log("URL.createObjectURL(stream) is deprecated! Use elem.srcObject = stream instead!"),r}return t(e)},URL.revokeObjectURL=function(t){e(t),i.delete(t)};var r=Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,"src");Object.defineProperty(window.HTMLMediaElement.prototype,"src",{get:function(){return r.get.apply(this)},set:function(t){return this.Na=i.get(t)||null,r.set.apply(this,[t])}});var o=HTMLMediaElement.prototype.setAttribute;HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.Na=i.get(arguments[1])||null),o.apply(this,arguments)}}}};t.t={log:r.log,Aa:r.Aa,Da:r.ka(),Ca:r.Ca,_a:r._a,ka:r.ka.bind(r)}},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(7),o=i(51).Fa,s=i(2),a=i(0),h=i(9),u=i(24),c=i(21),f=i(8);!function(t){t.La="hive-client-track",t.Ma="trackevent",t.Ba="NULLID",t.Ua="";var e=function(){function t(){}return t}();e.xa=0,e.Ha=1,e.qa=2,e.Va=100,e.ja=200,t.Ga=e,function(t){t[t.Qa=0]="PLAYING",t[t.Ka=1]="BUFFERING",t[t.Ya=2]="PAUSED",t[t.za=3]="SKIP",t[t.Ja=4]="STOPPED",t[t.ERROR=5]="ERROR",t[t.Wa=6]="WINDOW_SIZE",t[t.Xa=7]="FULLSCREEN",t[t.Za=8]="VISIBLE",t[t.HIDDEN=9]="HIDDEN"}(t.$a||(t.$a={})),function(t){t[t.eh=0]="JAVA_NOT_REACHABLE",t[t.th=1]="JAVA_NOT_READY",t[t.rh=2]="JAVA_WRONG_VERSION",t[t.ih=3]="JAVA_SESSION_BUSY",t[t.nh=4]="JAVA_SESSION_ERROR",t[t.sh=5]="JAVA_TICKET_TIMEOUT"}(t.oh||(t.oh={}));var i=function(){function t(){}return t}();t.ah=i;var l=function(){function t(){}return t}();t.hh=l;var p=function(){function t(){}return t}();t.uh=p;var d=function(){function t(){this.type=e.qa}return t}(),v=function(){function t(){this.sessions=new Array}return t.prototype.lh=function(t,e){var i;this.sessions.forEach(function(e){e.sessionId==t&&(i=e)}),i||(i=new g,i.sessionId=t,this.sessions.push(i)),i.events.push(e)},t}();t.ph=v;var g=function(){function t(){this.events=new Array}return t}();t.fh=g;var y=function(){function e(){this.te=a.Framework.resolve(a.Framework.q.I).log(),this.dh=a.Framework.resolve(h.Qs.Us),this.gh=new Array,this.vh=new Array,this.yh=new Array}return e.prototype.mh=function(t){this.client=t},e.prototype.init=function(t,e){this.Eh=t,this.Th(e),this.te.debug("[TRACK] INIT ID: "+t)},e.prototype.Th=function(t,e){this.app=t,e&&(this.Ih=e)},e.prototype.wh=function(t){this.Sh=t},e.prototype.Rh=function(t){var e=new m(t,this);this.gh.push(e),this.bh=null,this.client.Ph(!0)},e.prototype.Tn=function(t,e,i){if(!this.bh)for(var n=0;n<this.gh.length;n++){var r=this.gh[n];if(r.ticket.sessionId===t){this.te.debug("[TRACK] Activating Track for session "+t),this.bh=r;break}}if(this.bh){if(this.bh.ticket.sessionId!=t)return void this.te.warn("[TRACK] ignoring manifest not matching event "+this.bh.ticket.sessionId+" != "+t);if(!this.bh.Ah){var o=new b(t,e,i);this.bh.Ch(o),this.client.Ph()}}},e.prototype.kh=function(t,e,i){null!=this.bh&&(this.bh.Ah||this.bh.Oh.push(new R(t,e,i)))},e.prototype._h=function(t,e,i){this.vh.push(new I(t,e,i)),this.client.Ph()},e.prototype.Nh=function(t,e,i){this.yh.push(new S(t,e,i)),this.client.Ph()},e.prototype.Dh=function(t){var e=this;t&&t.forEach(function(t){e.yh.push(t)})},e.prototype.Fh=function(){var t=new l;this.Ih?(t.partnerId=this.Ih.partnerId,t.customerId=this.Ih.customerId):f.HiveConfig.ClientInfo.Fs&&f.HiveConfig.ClientInfo.Ls?(t.partnerId=f.HiveConfig.ClientInfo.Fs,t.customerId=f.HiveConfig.ClientInfo.Ls):this.bh&&(t.partnerId=this.bh.ticket.Lh(),t.customerId=this.bh.ticket.Mh()),t.version=this.app.app+"_"+(this.Ih?this.Ih.version:this.app.version),this.Ih&&(t.installVersion=this.Ih.installVersion,t.installTs=this.Ih.installTs);var e=new o;return e.Bh(navigator.userAgent),t.os=e.Uh().name+" "+e.Uh().version,this.Sh&&(t.commVersion=this.Sh.commVersion,t.pluginName=this.Sh.pluginName,t.pluginVersion=this.Sh.pluginVersion,t.playerTech=this.Sh.playerTech,t.playerVersion=this.Sh.playerVersion,this.Sh.telemetryId&&(t.telemetryId=this.Sh.telemetryId)),t},e.prototype.xh=function(){return this.bh?this.bh:this.gh&&this.gh.length>0?this.gh[this.gh.length-1]:void 0},e.prototype.Hh=function(e){var n=this;if(void 0===e&&(e=!0),0==this.gh.length&&0==this.vh.length)return e?s.reject("nothing to send"):(this.te.debug("[TRACK]  NOTHING TO SEND"),null);var r=new i;r.app=t.La,r.createdAt=a.Framework.time(),r.guid=this.Eh,r.name=t.Ma;var o=this.xh();if(o){var h=o.ticket.qh().replace(/[\[\]]/g,"");r.tags=[h],r.tags.push(o.ticket.Lh()),r.tags.push(o.ticket.Mh())}else r.tags=new Array;var u=new v;if(u.peer=this.Fh(),this.gh.forEach(function(t){t.Ah||u.lh(t.ticket.sessionId,t)}),this.vh.forEach(function(t){u.lh(t.sessionId,t)}),this.yh.forEach(function(t){u.lh(t.sessionId,t)}),r.data=u,e)return this.dh.Vh().then(function(t){var e=n.jh(t);return u.lh("null",e),r}).fail(function(t){return r});var c=this.jh(this.dh.Gh());return u.lh("null",c),r},e.prototype.jh=function(t){var e=new d;e.ts=a.Framework.time();var i=t.Qh();return i.Kh()&&(e.pubIp=i.Kh()),i.Cs()&&(e.privIp=r._s.Cs(i)),t.Os()&&(e.hostname=r._s.ks(t)),i.Yh()&&(e.netmask=i.Yh()),i.zh()&&(e.nic=i.zh()),i.Jh()&&(e.nicName=i.Jh()),i.Wh()&&(e.mac=i.Wh()),e},e.prototype.Xh=function(){return this.Ih?this.Ih.userAgent:navigator.userAgent},e.prototype.reset=function(){this.gh=new Array,this.vh=new Array,this.yh=new Array},e.prototype.Zh=function(t){},e}();t.$h=y;var w=function(){function t(t){this.ec=isNaN(f.HiveConfig.DebugLogs.TrackSnapshotLogs)?0:f.HiveConfig.DebugLogs.TrackSnapshotLogs,this.tc=t,this.te=a.Framework.resolve(a.Framework.q.I).log(),this.client=a.Framework.resolve(h.Qs.H),this.tc.mh(this)}return t.prototype.Ph=function(t){void 0===t&&(t=!1);var e=t?u.nc.ic.rc:u.nc.ic.sc;this.oc?this.ac-(new Date).getTime()>e&&(a.Framework.clearTimeout(this.oc),this.ac=null,this.hc(e)):this.hc(e)},t.prototype.cc=function(){this.oc&&(a.Framework.clearTimeout(this.oc),this.ac=this.oc=null)},t.prototype.hc=function(t){var e=this;this.oc=a.Framework.setTimeout(function(){e.uc()},t),this.ac=(new Date).getTime()+t},t.prototype.uc=function(t){var e=this;void 0===t&&(t=!0),this.oc=null,this.ac=null;var i=this.tc.Hh(t);t?(this.te.debug("[TRACK] TAKING A TRACK SNAPSHOT"),i.then(function(t){return e.forward(t)}).fail(function(t){e.te.debug("[TRACK]  ERROR GENERATING/SENDING THE TRACK SNAPSHOT: ",t)}).finally(function(){return e.tc.reset()}).done()):(this.te.debug("[TRACK] FLUSHING TRACK SNAPSHOT"),this.forward(i),this.tc.reset())},t.prototype.forward=function(t){if(this.client&&this.client.lc()&&t){var e=JSON.stringify(t);switch(this.ec){case 0:default:this.te.debug("[TRACK] TRACK EVENT");break;case 1:this.te.debug("[TRACK] TRACK EVENT:"+e)}var i=new c.pc(Services.fc,2,e);this.client.lc().send(i)}},t.prototype.dc=function(t){void 0===t&&(t=!0),t?(this.cc(),this.hc(u.nc.ic.gc)):this.uc(!1)},t}();t.vc=w;var m=function(){function t(t,e){this.createdAt=(new Date).getTime(),this.Ah=!1,this.ticket=t,this.manifests=new Array,this.Oh=new Array,this.tc=e}return t.prototype.Ch=function(t){this.manifests.push(t)},t.prototype.toJSON=function(){var t={};t.type=e.xa,t.ticket={},t.ticket.url=this.ticket.ticketUrl,t.ticket.reqTs=this.ticket.yc,t.ticket.respTs=this.ticket.mc,t.ticket.userAgent=this.tc.Xh(),t.manifests=[],this.manifests.forEach(function(e){var i={};i.url=e.url,i.respTs=e.mc,i.respCode=e.respCode,t.manifests.push(i)});var i=-1,n=-1,r=-1;return this.Oh.forEach(function(t){t.Ec>0&&(-1==i&&(i=t.ts,n=t.Ec),r=t.Ec)}),-1!=i&&(t.playTs=i),-1!=r&&(t.buffTime=r),-1!=n&&(t.initBuffTime=n),t},t}();t.Tc=m;var b=function(){function t(t,e,i){this.eventId=t,this.url=e,this.mc=(new Date).getTime(),this.respCode=i}return t}();t.Ic=b;var E=function(){function t(t,e,i,n){this.ts=(new Date).getTime(),this.sessionId=t,this.sessionId||(this.sessionId="null"),this.event=e,this.wc=i,n&&(this.ts=n)}return t.prototype.toJSON=function(){var t={};return t.type=this.Sc+this.event,t.ts=this.ts,this.wc&&(t.parameters=this.wc),t},t}();t.Rc=E;var I=function(t){function i(i,n,r,o){var s=t.call(this,i,n,r,o)||this;return s.Sc=e.Va,s}return n(i,t),i}(E);t.bc=I;var S=function(t){function i(i,n,r,o){var s=t.call(this,i,n,r,o)||this;return s.Sc=e.ja,s}return n(i,t),i}(E);t.Pc=S;var R=function(){function t(t,e,i){this.ts=(new Date).getTime(),this.Rs=t,this.Ac=e,this.Ec=i}return t}();t.Cc=R}(e.kc||(e.kc={}))},function(t,e,i){"use strict";var n=i(1),r=i(2),o=i(0),s=i(18),a=i(9),h=i(29);!function(t){t[t.IDLE=0]="IDLE",t[t.Oc=1]="PLAY"}(e._c||(e._c={}));var u=function(){function t(t,e,i,n){this.ticket=t,this.Nc=e,this.app=i,this.identity=n,this.Dc=o.Framework.resolve(a.Qs.Vs),this.Fc=o.Framework.resolve(a.Qs.Ms),this.tc=o.Framework.resolve(a.Qs.js),this.Lc=new s.kc.vc(this.tc)}return t.prototype.Th=function(t,e,i){this.app=new c(t,e),this.Dc.Th(this.app),this.tc.Th(this.app,i)},t.prototype.On=function(t){this.Fc.On(t)},t}();e.Mc=u;var c=function(){function t(t,e){this.app=t,this.version=e}return t}();e.Bc=c;var f=function(){function t(){this.Uc=null,this.xc=null,this.Hc=new n,this.te=o.Framework.resolve(o.Framework.q.I).log(),this.te.debug("INIT REPORTING"),this.Nc=o.Framework.resolve(a.Qs.H),this.qc=o.Framework.resolve(a.Qs.D),this.Vc=o.Framework.resolve(a.Qs.Bs)}return t.prototype.initSession=function(t,e){var i=this,n=r.defer(),o=this.qc.jc(),s=this.Vc.Gc(t);return null!=s?o.then(function(t){return i.Qc(t,s,n,e)}).fail(n.reject):n.reject("Ticket URL not valid"),n.Te},t.prototype.close=function(){this.Nc.close()},t.prototype.Qc=function(t,e,i,n){var r=this;this.Uc=t.Kc(),this.xc=t.Yc();var o=this.Nc.init(this.Uc,e),s=this.Vc.resolve(o.zc,e,n);o.Te.then(function(e){s.then(function(e){var n=e.sessionId;if(r.Hc.has(n)){var o=r.Hc.get(n);r.te.warn("SESSION ALREADY EXISTING "+o.Dc.ticket)}else{var s=new c(h.Hive.Jc(),h.Hive.getVersion()),a=new u(e,r.Nc,s,t);a.Dc.init(r.xc,e,s,n),a.tc.init(r.xc,s),a.tc.Rh(e),r.Hc.set(n,a),r.te.debug("SESSION SET ",n),i.resolve(a)}}).fail(function(t){return i.reject(t||"Error resolving the ticket")}),e.onerror(function(t){i.reject("Error establishing connection to Hive Services")})}).fail(function(t){return i.reject(t)}),this.Nc.connect()},t.prototype.Wc=function(t,e){return t.Xc()===e.Xc()&&t.Mh()===e.Mh()&&t.Lh()===e.Lh()},t}();e.Zc=f},function(t,e,i){"use strict";var n=i(38),r=i(49),o=i(39),s=i(5);if(s.Rt.Ti,s.Rt.Ei,s.Rt.Ii,void 0===a)var a=3e4;!function(t){!function(t){var e=function(){function t(){this.monitorPort=r.N.$c?o.tu.eu:o.tu.ru,this.playerPort=r.N.$c?o.tu.iu:o.tu.nu,this.feedbackPeriod=2e3,this.idleTimePeriod=6e4,this.useSessionCheck=r.N.su,this.debugLevel="notice",this.hiveTechOrder=[],this.telemetryId=null,this.silent=!1,this.loggerTimestamp=n.HiveConfig.Framework.LoggerTimestamp,this.pluginTimeout=a,this.onSourceSetCompleted=function(t){},this.onLoadingCompleted=function(t){},this.detectPrivateIP=s.Rt.Li}return t}();t.ou=e;var i=function(){function t(){this.initTimeout=3e4,this.onError=function(t){return!0},this.onActiveSession=function(t){}}return t}();t.au=i;var h=function(){function t(){this.hivePlayerPort="playerPort",this.hiveMonitorPort="monitorPort",this.hiveSilent="silent",this.hiveDebugLevel="debugLevel",this.hiveDebugTimestamp="loggerTimestamp",this.hiveSetupTimeout="setupTimeout",this.hiveJavaTimeout="initTimeout",this.hiveWarnJavaTimeout="warnSlowRespTimeout",this.hiveDetectPrivateIP="detectPrivateIP"}return t}();t.hu=h}(t.ou||(t.ou={}))}(e.gn||(e.gn={}));var h;!function(t){var e=function(){function t(){}return t}();e.enabledRUM=!1,e.enableKeyCombination=!0,e.enabledErrorFilter=!0,t.ErrorMonitor=e}(h=e.HiveConfig||(e.HiveConfig={})),"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.ErrorMonitor=h.ErrorMonitor)},function(t,e,i){"use strict";function n(){if(this.cu)return this.cu;var t=window&&window.window?window.window.uu:void 0;if(void 0!==t&&t.log&&t.debug&&t.info&&t.warn&&t.error&&(this.cu=t),!this.cu){var e=!(void 0===window.console),i=e?console.log.bind(console):function(){};this.cu={log:i,debug:e&&window.console.debug?window.console.debug.bind(console):i,info:e&&window.console.info?window.console.info.bind(console):i,warn:e&&window.console.warn?window.console.warn.bind(console):i,error:e&&window.console.error?window.console.error.bind(console):i}}return this.cu}e.mn="[HiveServices] ";var r=function(){function t(){}return t}();r.lu=250,e.N=r;var o=function(){function t(t,e,i){this.msgId=e,this.service=t,this.msg=i}return t.prototype.pu=function(){var t=new Uint8Array([this.service>>8,255&this.service]),e=new Uint8Array([this.msgId]),i=[t,e,this.msg];return new Blob(i,{type:"application/octet-binary"})},t.fu=function(e){var i=(String.fromCharCode.apply(null,new Uint8Array(e)),String.fromCharCode.apply(null,new Uint8Array(e.slice(3)))),n=new Uint8Array(e.slice(0,2)),r=new Uint8Array(e.slice(2,3));return new t((n[0]<<8)+n[1],r[0],i)},t}();e.pc=o,e.te=n},function(t,e,i){"use strict";var n=i(0),r=i(6);!function(t){t[t.du=0]="UPPER_LAYER",t[t.gu=1]="CDN",t[t.vu=2]="CDN_PREFETCH",t[t.yu=3]="CDN_COMPENSATION",t[t.mu=4]="P2P",t[t.Eu=5]="P2P_PREFETCH"}(e.Tu||(e.Tu={}));var o=function(){function t(){this.Iu=!1,this.wu=!1,this.Su=0,this.Ru=0,this.bu=0,this.Pu=0,this.Au=0,this.p2pAgenTrafficSuccessQt=0,this.Cu=0,this.srcOtherRespQt=0,this.ku=0,this.Ou=0,this._u=0,this.Nu=0,this.Du=0}return t}();e.Fu=o;var s=function(){function t(t,e,i,r,s){this.Lu=!1,this.type=void 0,this.Mu=new o,this.Bu=!1,this.Uu=!1,this.xu="",this.Hu=new ArrayBuffer(0),this.qu=0,this.type=i,this.Vu=t,this.ju=e,this.Gu=s,this.Qu=r,this.Mu.ku=n.Framework.time()}return t.prototype.Ku=function(){return this.type},t.prototype.Yu=function(){return this.Qu.Yu()},t.prototype.zu=function(){return this.Qu.zu()},t.prototype.Ju=function(){return this.zu()+"-"+this.ju},t.prototype.Wu=function(){return this.Qu.Xu()},t.prototype.Zu=function(){return this.Qu.$u()},t.prototype.loaded=function(){this.el=n.Framework.time()},t.prototype.tl=function(){return this.el?Math.max(1,this.el-this.Mu._u):Math.max(1,this.Mu.Nu-this.Mu._u)},t.prototype.rl=function(){return this.el?Math.max(1,this.el-this.Mu.Ou):Math.max(1,this.Mu.Nu-this.Mu.Ou)},t.prototype.il=function(){return 0!=this.Mu.Au?(new r.fn.Zi).Gi(this.tl(),this.Mu.Au):(new r.fn.Zi).Gi(this.rl(),this.Mu.Ru)},t}();e.nl=s},function(t,e,i){"use strict";var n=i(158),r=i(32),o=i(25),s=o.sl,a=i(2),h=i(0),u=i(160),c=i(166),f=i(3),l=i(6),p=i(1),d=i(15),v=i(4);!function(t){t.ol=!1;var e;!function(t){t[t.al=1]="Have",t[t.hl=2]="Chunk",t[t.Request=3]="Request",t[t.cl=4]="Cancel",t[t.ul=5]="Ack",t[t.ll=6]="Close",t[t.pl=7]="DoNotHave",t[t.fl=8]="OutPartRequest",t[t.dl=9]="OutPartResp",t[t.gl=10]="UDPHandshakeReq",t[t.vl=11]="UDPHandshakeResponse",t[t.yl=12]="UDPSwitchLeadershipRequest",t[t.ml=13]="UDPSwitchAck",t[t.El=14]="Bitrate",t[t.Tl=15]="Haves",t[t.hh=16]="PeerInfo",t[t.Il=17]="Ping",t[t.wl=18]="Pong",t[t.Sl=19]="NoPartnerResp"}(e=t.Rl||(t.Rl={}));var o=function(){function t(t){this.bl=new p,this.te=h.Framework.resolve(h.Framework.q.I).log(),this.Pl=t}return t.prototype.Al=function(t){try{var e=null,i=h.Framework.resolve(d.Pa.pa),n=i.Cl(t);return null==n?(this.te.warn("MSG RECEIVED FROM UNKNOWN SWARM"),null):(e=new u.kl(n,this.Pl.Ol,this.Pl._l,this.Pl),this.bl.has(t)||this.bl.set(t,e),this.bl.get(t))}catch(t){v.ErrorMonitor.gi().di("New dispatcher failed",{error:t})}},t.prototype.Nl=function(t){this.bl.delete(t)},t.prototype.Dl=function(t){return this.bl.get(t)},t}();t.Fl=o;var g=function(){function i(){this.Ll=null,this.Ml=h.Framework.resolve(h.Framework.q.I),this.Bl=new o(this),this.li=i.Ul++,this.xl=h.Framework.time()}return i.prototype.init=function(t,e){this.Ol=t,this._l=e,this.Hl=h.Framework.resolve(h.Framework.q.F)},i.prototype.ql=function(){var t=!1;return this.Bl.bl.forEach(function(e,i){(e.sender.ql()||e.receiver.ql())&&(t=!0)}),t},i.prototype.reset=function(){this.Bl.bl.forEach(function(t,e){t.sender.Vl()})},i.prototype.close=function(t){return this.Bl.Nl(t),0==this.Bl.bl.length&&this.Hl.disconnect(this._l),a("ok")},i.prototype.jl=function(i,n,o){try{this.xl=h.Framework.time();var a=o.pn(),u=a.byteLength,c=s.Ql.Gl.create(a),l=s.Kl(c),p=new r;p.Yl(i),p.zl(n),p.Yl(u),p.zl(l.toString()),p.append(a),p.Jl();var d=p.pn(),g=i===e.hl&&h.Framework.S()?d.byteLength+f.ni.Mr.Nr:d.byteLength;t.ol&&this.Ml.log(n).debug(this.li+" SEND MSG ID "+i+","+g+" HASH "+l.toString()+" TO "+this._l)}catch(t){v.ErrorMonitor.gi().di("ERROR CONSTRUCTING MESSAGE TO PEER","S["+n+"]",{msg:o,_l:this._l})}try{this.Hl.send(this._l,d,g)||this.Ml.log().warn("dropped msg: "+t.Rl[i]+" to "+this._l)}catch(t){this.Ml.log(n).warn("ERROR SENDING MESSAGE TO "+this._l+" "+t.stack)}},i.prototype.Wl=function(n){var o=this;t.ol&&this.Ml.log().debug(this.li+" GOT MSG "+n.byteLength);try{var a=h.Framework.time();this.xl=a,this.Xl(n).then(function(u){if(t.ol&&o.Ml.log().debug(o.li+" RECEIVING "+u.byteLength+" after "+(h.Framework.time()-a)),u.byteLength>i.Zl)throw new RangeError("P2P Message too big to be processed");var f=o.Ll;if(null===f){var p=r.wrap(u),d=p.$l();if(t.ol&&o.Ml.log().debug("MSG ID "+d),d>Object.keys(e).length)return o.Ml.log().warn("MSG OF WRONG ID RECEIVED: "+d),void(o.Ll=null);if(f=o.Ll=new c.ep,f.msgId=d,f.swarmId=p.tp(),f.length=p.$l(),f.hash=p.tp(),f.rp=p.pn(),f.length>i.Zl)throw new RangeError("P2P Message too big to be processed");t.ol&&o.Ml.log(f.swarmId).debug("MSG ID "+f.msgId+" L "+f.length+" SWID "+f.swarmId+" H "+f.hash+" TR "+f.rp.byteLength)}else{if(t.ol&&o.Ml.log().debug("APPENDING TO P2P MESSAGE "+f.msgId),null!=f.rp.byteLength&&f.rp.byteLength>i.Zl)throw new RangeError("P2P Message too big to be processed");f.rp=l.fn.appendBuffer(f.rp,n)}if(f.rp.byteLength===f.length){var v=s.Ql.Gl.create(f.rp);if(s.Kl(v).toString()!==f.hash)return void o.Ml.log(f.swarmId).warn(" INTEGRITY CHECK FAILED ");var g=o.Bl.Dl(f.swarmId);g||(g=o.Bl.Al(f.swarmId),o.Ml.log(f.swarmId).debug("CREATED NEW DISPATCHER FOR "+o._l)),g.Ae(f),f.rp=null,o.Ll=null}})}catch(t){v.ErrorMonitor.gi().di("ERROR RECEIVING MESSAGE",{error:t}),this.Ll=null}},i.prototype.Xl=function(t){var e=!h.Framework.S()&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,i=a.defer();if(e){var n=new FileReader;n.onload=function(e){t=this.result,i.resolve(t)},n.onerror=i.reject,n.readAsArrayBuffer(t)}else i.resolve(t);return i.Te},i.prototype.ip=function(){return this.xl},i}();g.np=n.op(i(167)).sp("HiveMsgs"),g.Ul=0,g.Zl=136+Math.ceil(1.2*f.ni.Mr.Nr),t.Mr=g}(e.mu||(e.mu={}))},function(t,e,i){"use strict";var n=i(5);!function(t){t.bi=n.Rt.bi,t.Mi=n.Rt.Mi;var e=function(){function t(){}return t}();e.ap="wss://bee.hivestreaming.com:443/v1/hivejs",e.hp="wss://bee-test.hivestreaming.com:443/v1/hivejs",e.cp={iceServers:[{url:"stun:stun.hivestreaming.com:3478"}]},e.up=3e4,e.sc=3e5,e.rc=8e4,e.gc=1e3,e.lp=3e4,e.pp=100,e.fp=1e4,t.ic=e}(e.nc||(e.nc={}))},function(t,e){function i(t,e,i){null!=t&&("number"==typeof t?this.dp(t,e,i):null==e&&"string"!=typeof t?this.gp(t,256):this.gp(t,e))}function n(){return new i(null)}function r(t,e,i,n,r,o){for(;--o>=0;){var s=e*this[t++]+i[n]+r;r=Math.floor(s/67108864),i[n++]=67108863&s}return r}function o(t,e,i,n,r,o){for(var s=32767&e,a=e>>15;--o>=0;){var h=32767&this[t],u=this[t++]>>15,c=a*h+u*s;h=s*h+((32767&c)<<15)+i[n]+(1073741823&r),r=(h>>>30)+(c>>>15)+a*u+(r>>>30),i[n++]=1073741823&h}return r}function s(t,e,i,n,r,o){for(var s=16383&e,a=e>>14;--o>=0;){var h=16383&this[t],u=this[t++]>>14,c=a*h+u*s;h=s*h+((16383&c)<<14)+i[n]+r,r=(h>>28)+(c>>14)+a*u,i[n++]=268435455&h}return r}function a(t){return Tt.charAt(t)}function h(t,e){var i=Ct[t.charCodeAt(e)];return null==i?-1:i}function u(t){for(var e=this.vp-1;e>=0;--e)t[e]=this[e];t.vp=this.vp,t.v=this.v}function c(t){this.vp=1,this.v=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.yp:this.vp=0}function f(t){var e=n();return e.mp(t),e}function l(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.Ep(t,e);n=2}this.vp=0,this.v=0;for(var r=t.length,o=!1,s=0;--r>=0;){var a=8==n?255&t[r]:h(t,r);a<0?"-"==t.charAt(r)&&(o=!0):(o=!1,0==s?this[this.vp++]=a:s+n>this.Tp?(this[this.vp-1]|=(a&(1<<this.Tp-s)-1)<<s,this[this.vp++]=a>>this.Tp-s):this[this.vp-1]|=a<<s,(s+=n)>=this.Tp&&(s-=this.Tp))}8==n&&0!=(128&t[0])&&(this.v=-1,s>0&&(this[this.vp-1]|=(1<<this.Tp-s)-1<<s)),this.Ip(),o&&i.ZERO.wp(this,this)}function p(){for(var t=this.v&this.Sp;this.vp>0&&this[this.vp-1]==t;)--this.vp}function d(t){if(this.v<0)return"-"+this.Rp().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.bp(t);e=2}var i,n=(1<<e)-1,r=!1,o="",s=this.vp,h=this.Tp-s*this.Tp%e;if(s-- >0)for(h<this.Tp&&(i=this[s]>>h)>0&&(r=!0,o=a(i));s>=0;)h<e?(i=(this[s]&(1<<h)-1)<<e-h,i|=this[--s]>>(h+=this.Tp-e)):(i=this[s]>>(h-=e)&n,h<=0&&(h+=this.Tp,--s)),i>0&&(r=!0),r&&(o+=a(i));return r?o:"0"}function v(){var t=n();return i.ZERO.wp(this,t),t}function g(){return this.v<0?this.Rp():this}function y(t){var e=this.v-t.v;if(0!=e)return e;var i=this.vp;if(0!=(e=i-t.vp))return this.v<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function w(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function m(){return this.vp<=0?0:this.Tp*(this.vp-1)+w(this[this.vp-1]^this.v&this.Sp)}function b(t,e){var i;for(i=this.vp-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.vp=this.vp+t,e.v=this.v}function E(t,e){for(var i=t;i<this.vp;++i)e[i-t]=this[i];e.vp=Math.max(this.vp-t,0),e.v=this.v}function I(t,e){var i,n=t%this.Tp,r=this.Tp-n,o=(1<<r)-1,s=Math.floor(t/this.Tp),a=this.v<<n&this.Sp;for(i=this.vp-1;i>=0;--i)e[i+s+1]=this[i]>>r|a,a=(this[i]&o)<<n;for(i=s-1;i>=0;--i)e[i]=0;e[s]=a,e.vp=this.vp+s+1,e.v=this.v,e.Ip()}function S(t,e){e.v=this.v;var i=Math.floor(t/this.Tp);if(i>=this.vp)return void(e.vp=0);var n=t%this.Tp,r=this.Tp-n,o=(1<<n)-1;e[0]=this[i]>>n;for(var s=i+1;s<this.vp;++s)e[s-i-1]|=(this[s]&o)<<r,e[s-i]=this[s]>>n;n>0&&(e[this.vp-i-1]|=(this.v&o)<<r),e.vp=this.vp-i,e.Ip()}function R(t,e){for(var i=0,n=0,r=Math.min(t.vp,this.vp);i<r;)n+=this[i]-t[i],e[i++]=n&this.Sp,n>>=this.Tp;if(t.vp<this.vp){for(n-=t.v;i<this.vp;)n+=this[i],e[i++]=n&this.Sp,n>>=this.Tp;n+=this.v}else{for(n+=this.v;i<t.vp;)n-=t[i],e[i++]=n&this.Sp,n>>=this.Tp;n-=t.v}e.v=n<0?-1:0,n<-1?e[i++]=this.yp+n:n>0&&(e[i++]=n),e.vp=i,e.Ip()}function O(t,e){var n=this.abs(),r=t.abs(),o=n.vp;for(e.vp=o+r.vp;--o>=0;)e[o]=0;for(o=0;o<r.vp;++o)e[o+n.vp]=n.Pp(0,r[o],e,o,0,n.vp);e.v=0,e.Ip(),this.v!=t.v&&i.ZERO.wp(e,e)}function T(t){for(var e=this.abs(),i=t.vp=2*e.vp;--i>=0;)t[i]=0;for(i=0;i<e.vp-1;++i){var n=e.Pp(i,e[i],t,2*i,0,1);(t[i+e.vp]+=e.Pp(i+1,2*e[i],t,2*i+1,n,e.vp-i-1))>=e.yp&&(t[i+e.vp]-=e.yp,t[i+e.vp+1]=1)}t.vp>0&&(t[t.vp-1]+=e.Pp(i,e[i],t,2*i,0,1)),t.v=0,t.Ip()}function C(t,e,r){var o=t.abs();if(!(o.vp<=0)){var s=this.abs();if(s.vp<o.vp)return null!=e&&e.mp(0),void(null!=r&&this.Ap(r));null==r&&(r=n());var a=n(),h=this.v,u=t.v,c=this.Tp-w(o[o.vp-1]);c>0?(o.Cp(c,a),s.Cp(c,r)):(o.Ap(a),s.Ap(r));var f=a.vp,l=a[f-1];if(0!=l){var p=l*(1<<this.kp)+(f>1?a[f-2]>>this.Op:0),d=this._p/p,v=(1<<this.kp)/p,g=1<<this.Op,y=r.vp,m=y-f,b=null==e?n():e;for(a.Np(m,b),r.Dp(b)>=0&&(r[r.vp++]=1,r.wp(b,r)),i.ONE.Np(f,b),b.wp(a,a);a.vp<f;)a[a.vp++]=0;for(;--m>=0;){var E=r[--y]==l?this.Sp:Math.floor(r[y]*d+(r[y-1]+g)*v);if((r[y]+=a.Pp(0,E,r,m,0,f))<E)for(a.Np(m,b),r.wp(b,r);r[y]<--E;)r.wp(b,r)}null!=e&&(r.Fp(f,e),h!=u&&i.ZERO.wp(e,e)),r.vp=f,r.Ip(),c>0&&r.Lp(c,r),h<0&&i.ZERO.wp(r,r)}}}function N(t){var e=n();return this.abs().Mp(t,null,e),this.v<0&&e.Dp(i.ZERO)>0&&t.wp(e,e),e}function k(t){this.o=t}function A(t){return t.v<0||t.Dp(this.o)>=0?t.Bp(this.o):t}function P(t){return t}function _(t){t.Mp(this.o,null,t)}function D(t,e,i){t.Up(e,i),this.reduce(i)}function x(t,e){t.xp(e),this.reduce(e)}function M(){if(this.vp<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.yp)%this.yp,e>0?this.yp-e:-e}function U(t){this.o=t,this.Hp=t.qp(),this.Vp=32767&this.Hp,this.jp=this.Hp>>15,this.Gp=(1<<t.Tp-15)-1,this.Qp=2*t.vp}function L(t){var e=n();return t.abs().Np(this.o.vp,e),e.Mp(this.o,null,e),t.v<0&&e.Dp(i.ZERO)>0&&this.o.wp(e,e),e}function F(t){var e=n();return t.Ap(e),this.reduce(e),e}function j(t){for(;t.vp<=this.Qp;)t[t.vp++]=0;for(var e=0;e<this.o.vp;++e){var i=32767&t[e],n=i*this.Vp+((i*this.jp+(t[e]>>15)*this.Vp&this.Gp)<<15)&t.Sp;for(i=e+this.o.vp,t[i]+=this.o.Pp(0,n,t,e,0,this.o.vp);t[i]>=t.yp;)t[i]-=t.yp,t[++i]++}t.Ip(),t.Fp(this.o.vp,t),t.Dp(this.o)>=0&&t.wp(this.o,t)}function H(t,e){t.xp(e),this.reduce(e)}function B(t,e,i){t.Up(e,i),this.reduce(i)}function V(){return 0==(this.vp>0?1&this[0]:this.v)}function q(t,e){if(t>4294967295||t<1)return i.ONE;var r=n(),o=n(),s=e.Kp(this),a=w(t)-1;for(s.Ap(r);--a>=0;)if(e.Yp(r,o),(t&1<<a)>0)e.zp(o,s,r);else{var h=r;r=o,o=h}return e.Jp(r)}function K(t,e){var i;return i=t<256||e.Wp()?new k(e):new U(e),this.exp(t,i)}function Q(t){var e,i,n,r="",o=0;for(e=0;e<t.length&&t.charAt(e)!=kt;++e)(n=Nt.indexOf(t.charAt(e)))<0||(0==o?(r+=a(n>>2),i=3&n,o=1):1==o?(r+=a(i<<2|n>>4),i=15&n,o=2):2==o?(r+=a(i),r+=a(n>>2),i=3&n,o=3):(r+=a(i<<2|n>>4),r+=a(15&n),o=0));return 1==o&&(r+=a(i<<2)),r}function z(t){var e,i=Q(t),n=new Array;for(e=0;2*e<i.length;++e)n[e]=parseInt(i.substring(2*e,2*e+2),16);return n}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function G(t,e){return new i(t,e)}function J(t,e){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var n=new Array,r=t.length-1;r>=0&&e>0;){var o=t.charCodeAt(r--);o<128?n[--e]=o:o>127&&o<2048?(n[--e]=63&o|128,n[--e]=o>>6|192):(n[--e]=63&o|128,n[--e]=o>>6&63|128,n[--e]=o>>12|224)}n[--e]=0;for(var s=new SecureRandom,a=new Array;e>2;){for(a[0]=0;0==a[0];)s.Xp(a);n[--e]=a[0]}return n[--e]=2,n[--e]=0,new i(n)}function X(t,e,i){for(var n="",r=0;n.length<e;)n+=i(String.fromCharCode.apply(String,t.concat([(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r]))),r+=1;return n}function W(t,e,n){if(t.length+2*At+2>e)throw"Message too long for RSA";var r,o="";for(r=0;r<e-t.length-2*At-2;r+=1)o+="\0";var s=rstr_sha1("")+o+""+t,a=new Array(At);(new SecureRandom).Xp(a);var h=X(a,s.length,n||rstr_sha1),u=[];for(r=0;r<s.length;r+=1)u[r]=s.charCodeAt(r)^h.charCodeAt(r);var c=X(u,a.length,rstr_sha1),f=[0];for(r=0;r<a.length;r+=1)f[r+1]=a[r]^c.charCodeAt(r);return new i(f.concat(u))}function Y(){this.n=null,this.e=0,this.d=null,this.g=null,this.Zp=null,this.$p=null,this.ef=null,this.tf=null}function $(t,e){this.rf=!0,"string"!=typeof t?(this.n=t,this.e=e):null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=G(t,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")}function Z(t){return t.if(this.e,this.n)}function tt(t){var e=J(t,this.n.nf()+7>>3);if(null==e)return null;var i=this.sf(e);if(null==i)return null;var n=i.toString(16);return 0==(1&n.length)?n:"0"+n}function et(t,e){var i=W(t,this.n.nf()+7>>3,e);if(null==i)return null;var n=this.sf(i);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r}function it(t,e){for(var i="",n=e/4-t.length,r=0;r<n;r++)i+="0";return i+t}function nt(t,e){var i=function(t){return KJUR.crypto.hf.af(t,e)}(t);return this.cf(i,e)}function rt(t,e){var i=KJUR.crypto.hf.uf(t,e,this.n.nf()),n=G(i,16);return it(this.lf(n).toString(16),this.n.nf())}function ot(t){return nt.call(this,t,"sha1")}function st(t){return nt.call(this,t,"sha256")}function at(t,e,i){for(var n="",r=0;n.length<e;)n+=hextorstr(i(rstrtohex(t+String.fromCharCode.apply(String,[(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r])))),r+=1;return n}function ht(t,e,i){var n=function(t){return KJUR.crypto.hf.pf(t,e)}(rstrtohex(t));return void 0===i&&(i=-1),this.ff(n,e,i)}function ut(t,e,n){var r,o=hextorstr(t),s=o.length,a=this.n.nf()-1,h=Math.ceil(a/8),u=function(t){return KJUR.crypto.hf.pf(t,e)};if(-1===n||void 0===n)n=s;else if(-2===n)n=h-s-2;else if(n<-2)throw"invalid salt length";if(h<s+n+2)throw"data too long";var c="";n>0&&(c=new Array(n),(new SecureRandom).Xp(c),c=String.fromCharCode.apply(String,c));var f=hextorstr(u(rstrtohex("\0\0\0\0\0\0\0\0"+o+c))),l=[];for(r=0;r<h-n-s-2;r+=1)l[r]=0;var p=String.fromCharCode.apply(String,l)+""+c,d=at(f,p.length,u),v=[];for(r=0;r<p.length;r+=1)v[r]=p.charCodeAt(r)^d.charCodeAt(r);var g=65280>>8*h-a&255;for(v[0]&=~g,r=0;r<s;r++)v.push(f.charCodeAt(r));return v.push(188),it(this.lf(new i(v)).toString(16),this.n.nf())}function ct(t,e,i){var n=new Y;return n.df(e,i),n.sf(t)}function ft(t,e,i){return ct(t,e,i).toString(16).replace(/^1f+00/,"")}function lt(t){for(var e in KJUR.crypto.hf.gf){var i=KJUR.crypto.hf.gf[e],n=i.length;if(t.substring(0,n)==i)return[e,t.substring(n)]}return[]}function pt(t,e,i,n){var r=ft(e,i,n),o=lt(r);if(0==o.length)return!1;var s=o[0];return o[1]==function(t){return KJUR.crypto.hf.af(t,s)}(t)}function dt(t,e){return pt(e,G(t,16),this.n.toString(16),this.e.toString(16))}function vt(t,e){e=e.replace(Pt,""),e=e.replace(/[ \n]+/g,"");var i=G(e,16);if(i.nf()>this.n.nf())return 0;var n=this.sf(i),r=n.toString(16).replace(/^1f+00/,""),o=lt(r);if(0==o.length)return!1;var s=o[0];return o[1]==function(t){return KJUR.crypto.hf.af(t,s)}(t)}function gt(t,e){e=e.replace(Pt,""),e=e.replace(/[ \n]+/g,"");var i=G(e,16);if(i.nf()>this.n.nf())return 0;var n=this.sf(i),r=n.toString(16).replace(/^1f+00/,""),o=lt(r);return 0!=o.length&&(o[0],o[1]==t)}function yt(t,e,i,n){var r=function(t){return KJUR.crypto.hf.pf(t,i)}(rstrtohex(t));return void 0===n&&(n=-1),this.vf(r,e,i,n)}function wt(t,e,n,r){var o=new i(e,16);if(o.nf()>this.n.nf())return!1;var s,a=function(t){return KJUR.crypto.hf.pf(t,n)},h=hextorstr(t),u=h.length,c=this.n.nf()-1,f=Math.ceil(c/8);if(-1===r||void 0===r)r=u;else if(-2===r)r=f-u-2;else if(r<-2)throw"invalid salt length";if(f<u+r+2)throw"data too long";var l=this.sf(o).yf();for(s=0;s<l.length;s+=1)l[s]&=255;for(;l.length<f;)l.unshift(0);if(188!==l[f-1])throw"encoded message does not end in 0xbc";l=String.fromCharCode.apply(String,l);var p=l.substr(0,f-u-1),d=l.substr(p.length,u),v=65280>>8*f-c&255;if(0!=(p.charCodeAt(0)&v))throw"bits beyond keysize not zero";var g=at(d,p.length,a),y=[];for(s=0;s<p.length;s+=1)y[s]=p.charCodeAt(s)^g.charCodeAt(s);y[0]&=~v;var w=f-u-r-2;for(s=0;s<w;s+=1)if(0!==y[s])throw"leftmost octets not zero";if(1!==y[w])throw"0x01 marker not found";return d===hextorstr(a(rstrtohex("\0\0\0\0\0\0\0\0"+h+String.fromCharCode.apply(String,y.slice(-r)))))}var mt={};mt.userAgent=!1;var bt={};if(void 0===Et||!Et)var Et={};Et.mf=function(){var t,e,i,n=arguments,r=null;for(t=0;t<n.length;t+=1)for(i=(""+n[t]).split("."),r=Et,e="YAHOO"==i[0]?1:0;e<i.length;e+=1)r[i[e]]=r[i[e]]||{},r=r[i[e]];return r},Et.log=function(t,e,i){var n=Et.Tf.Ef;return!(!n||!n.log)&&n.log(t,e,i)},Et.register=function(t,e,i){var n,r,o,s,a,h=Et.De.If;for(h[t]||(h[t]={wf:[],Sf:[]}),n=h[t],r=i.version,o=i.sp,s=Et.De.ss,n.name=t,n.version=r,n.sp=o,n.wf.push(r),n.Sf.push(o),n.Rf=e,a=0;a<s.length;a+=1)s[a](n);e?(e.VERSION=r,e.bf=o):Et.log("mainClass is undefined for module "+t,"warn")},Et.De=Et.De||{If:[],ss:[]},Et.De.getVersion=function(t){return Et.De.If[t]||null},Et.De.Pf=function(t){var e,i=function(t){var e=0;return parseFloat(t.replace(/\./g,function(){return 1==e++?"":"."}))},n=mt,r={Af:0,opera:0,Cf:0,kf:0,chrome:0,Of:null,_f:0,Nf:0,Df:0,Ff:0,Lf:null,Mf:0,Bf:0,Uf:n&&n.xf,Hf:!1,os:null},o=t||mt&&mt.userAgent,s=bt&&bt.location,a=s&&s.href;return r.Hf=a&&0===a.toLowerCase().indexOf("https"),o&&(/windows|win32/i.test(o)?r.os="windows":/macintosh/i.test(o)?r.os="macintosh":/rhino/i.test(o)&&(r.os="rhino"),/KHTML/.test(o)&&(r.kf=1),e=o.match(/AppleWebKit\/([^\s]*)/),e&&e[1]&&(r.kf=i(e[1]),/ Mobile\//.test(o)?(r.Of="Apple",e=o.match(/OS ([^\s]*)/),e&&e[1]&&(e=i(e[1].replace("_","."))),r.Lf=e,r.Nf=r.Ff=r.Df=0,(e=o.match(/iPad|iPod|iPhone/))&&e[0]&&(r[e[0].toLowerCase()]=r.Lf)):(e=o.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),e&&(r.Of=e[0]),/webOS/.test(o)&&(r.Of="WebOS",(e=o.match(/webOS\/([^\s]*);/))&&e[1]&&(r.Bf=i(e[1]))),/ Android/.test(o)&&(r.Of="Android",(e=o.match(/Android ([^\s]*);/))&&e[1]&&(r.Mf=i(e[1])))),e=o.match(/Chrome\/([^\s]*)/),e&&e[1]?r.chrome=i(e[1]):(e=o.match(/AdobeAIR\/([^\s]*)/))&&(r._f=e[0])),r.kf||(e=o.match(/Opera[\s\/]([^\s]*)/),e&&e[1]?(r.opera=i(e[1]),e=o.match(/Version\/([^\s]*)/),e&&e[1]&&(r.opera=i(e[1])),(e=o.match(/Opera Mini[^;]*/))&&(r.Of=e[0])):(e=o.match(/MSIE\s([^;]*)/),e&&e[1]?r.Af=i(e[1]):(e=o.match(/Gecko\/([^\s]*)/))&&(r.Cf=1,(e=o.match(/rv:([^\s\)]*)/))&&e[1]&&(r.Cf=i(e[1])))))),r},Et.De.qf=Et.De.Pf(),function(){if(Et.mf("util","widget","example"),"undefined"!=typeof YAHOO_config){var t,e=YAHOO_config.listener,i=Et.De.ss,n=!0;if(e){for(t=0;t<i.length;t++)if(i[t]==e){n=!1;break}n&&i.push(e)}}}(),Et.lang=Et.lang||{},function(){var t=Et.lang,e=Object.prototype,i=[],n={Vf:"&amp;",jf:"&lt;",Gf:"&gt;",Qf:"&quot;",Kf:"&#x27;",Yf:"&#x2F;",zf:"&#x60;"},r=["toString","valueOf"],o={isArray:function(t){return"[object Array]"===e.toString.apply(t)},Jf:function(t){return"boolean"==typeof t},Wf:function(t){return"function"==typeof t||"[object Function]"===e.toString.apply(t)},Xf:function(t){return null===t},Zf:function(t){return"number"==typeof t&&isFinite(t)},Jo:function(e){return e&&("object"==typeof e||t.Wf(e))||!1},$f:function(t){return"string"==typeof t},td:function(t){return void 0===t},rd:Et.De.qf.Af?function(i,n){var o,s,a;for(o=0;o<r.length;o+=1)s=r[o],a=n[s],t.Wf(a)&&a!=e[s]&&(i[s]=a)}:function(){},nd:function(t){return t.replace(/[&<>"'\/`]/g,function(t){return n[t]})},extend:function(i,n,r){if(!n||!i)throw new Error("extend failed, please check that all dependencies are included.");var o,s=function(){};if(s.prototype=n.prototype,i.prototype=new s,i.prototype.constructor=i,i.sd=n.prototype,n.prototype.constructor==e.constructor&&(n.prototype.constructor=n),r){for(o in r)t.hasOwnProperty(r,o)&&(i.prototype[o]=r[o]);t.rd(i.prototype,r)}},od:function(e,i){if(!i||!e)throw new Error("Absorb failed, verify dependencies.");var n,r,o=arguments,s=o[2];if(s&&!0!==s)for(n=2;n<o.length;n+=1)e[o[n]]=i[o[n]];else{for(r in i)!s&&r in e||(e[r]=i[r]);t.rd(e,i)}return e},ad:function(e,i){if(!i||!e)throw new Error("Augment failed, verify dependencies.");var n,r=[e.prototype,i.prototype];for(n=2;n<arguments.length;n+=1)r.push(arguments[n]);return t.od.apply(this,r),e},dump:function(e,i){var n,r,o=[],s="{...}";if(!t.Jo(e))return e+"";if(e instanceof Date||"nodeType"in e&&"tagName"in e)return e;if(t.Wf(e))return"f(){...}";if(i=t.Zf(i)?i:3,t.isArray(e)){for(o.push("["),n=0,r=e.length;n<r;n+=1)t.Jo(e[n])?o.push(i>0?t.dump(e[n],i-1):s):o.push(e[n]),o.push(", ");o.length>1&&o.pop(),o.push("]")}else{o.push("{");for(n in e)t.hasOwnProperty(e,n)&&(o.push(n+" => "),t.Jo(e[n])?o.push(i>0?t.dump(e[n],i-1):s):o.push(e[n]),o.push(", "));o.length>1&&o.pop(),o.push("}")}return o.join("")},hd:function(e,i,n,r){for(var o,s,a,h,u,c,f,l,p,d=[],v=e.length;!((o=e.lastIndexOf("{",v))<0||(s=e.indexOf("}",o),o+1>s));)f=e.substring(o+1,s),h=f,c=null,a=h.indexOf(" "),a>-1&&(c=h.substring(a+1),h=h.substring(0,a)),u=i[h],n&&(u=n(h,u,c)),t.Jo(u)?t.isArray(u)?u=t.dump(u,parseInt(c,10)):(c=c||"",l=c.indexOf("dump"),l>-1&&(c=c.substring(4)),p=u.toString(),u="[object Object]"===p||l>-1?t.dump(u,parseInt(c,10)):p):t.$f(u)||t.Zf(u)||(u="~-"+d.length+"-~",d[d.length]=f),e=e.substring(0,o)+u+e.substring(s+1),!1===r&&(v=o-1);for(o=d.length-1;o>=0;o-=1)e=e.replace(new RegExp("~-"+o+"-~"),"{"+d[o]+"}","g");return e},trim:function(t){try{return t.replace(/^\s+|\s+$/g,"")}catch(e){return t}},ud:function(){var e,i={},n=arguments,r=n.length;for(e=0;e<r;e+=1)t.od(i,n[e],!0);return i},ld:function(e,n,r,o,s){e=e||0,n=n||{};var a,h,u=r,c=o;if(t.$f(r)&&(u=n[r]),!u)throw new TypeError("method undefined");return t.td(o)||t.isArray(c)||(c=[o]),a=function(){u.apply(n,c||i)},h=s?setInterval(a,e):setTimeout(a,e),{interval:s,cancel:function(){this.interval?clearInterval(h):clearTimeout(h)}}},pd:function(e){return t.Jo(e)||t.$f(e)||t.Zf(e)||t.Jf(e)}};t.hasOwnProperty=e.hasOwnProperty?function(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}:function(e,i){return!t.td(e[i])&&e.constructor.prototype[i]!==e[i]},o.od(t,o,!0),Et.util.Lang=t,t.fd=t.ad,Et.fd=t.ad,Et.extend=t.extend}(),Et.register("yahoo",Et,{version:"2.9.0",sp:"2800"});/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */
var It=It||function(t,e){var i={},n=i.Ql={},r=n.dd=function(){function t(){}return{extend:function(e){t.prototype=this;var i=new t;return e&&i.gd(e),i.hasOwnProperty("init")||(i.init=function(){i.vd.init.apply(this,arguments)}),i.init.prototype=i,i.vd=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},gd:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=n.Gl=r.extend({init:function(t,e){t=this.yd=t||[],this.md=void 0!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.yd,i=t.yd,n=this.md,r=t.md;if(this.Ip(),n%4)for(var o=0;o<r;o++){var s=i[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var o=0;o<r;o+=4)e[n+o>>>2]=i[o>>>2];return this.md+=r,this},Ip:function(){var e=this.yd,i=this.md;e[i>>>2]&=4294967295<<32-i%4*8,e.length=t.ceil(i/4)},clone:function(){var t=r.clone.call(this);return t.yd=this.yd.slice(0),t},random:function(e){for(var i=[],n=0;n<e;n+=4)i.push(4294967296*t.random()|0);return new o.init(i,e)}}),s=i.Ed={},a=s.Td={stringify:function(t){for(var e=t.yd,i=t.md,n=[],r=0;r<i;r++){var o=e[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new o.init(i,e/2)}},h=s.Id={stringify:function(t){for(var e=t.yd,i=t.md,n=[],r=0;r<i;r++){var o=e[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new o.init(i,e)}},u=s.wd={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},c=n.Sd=r.extend({reset:function(){this.Rd=new o.init,this.bd=0},Pd:function(t){"string"==typeof t&&(t=u.parse(t)),this.Rd.concat(t),this.bd+=t.md},Ad:function(e){var i=this.Rd,n=i.yd,r=i.md,s=this.Cd,a=4*s,h=r/a;h=e?t.ceil(h):t.max((0|h)-this.kd,0);var u=h*s,c=t.min(4*u,r);if(u){for(var f=0;f<u;f+=s)this.Od(n,f);var l=n.splice(0,u);i.md-=c}return new o.init(l,c)},clone:function(){var t=r.clone.call(this);return t.Rd=this.Rd.clone(),t},kd:0}),f=(n._d=c.extend({Nd:r.extend(),init:function(t){this.Nd=this.Nd.extend(t),this.reset()},reset:function(){c.reset.call(this),this.Dd()},update:function(t){return this.Pd(t),this.Ad(),this},Fd:function(t){return t&&this.Pd(t),this.Ld()},Cd:16,Md:function(t){return function(e,i){return new t.init(i).Fd(e)}},Bd:function(t){return function(e,i){return new f.Ud.init(t,i).Fd(e)}}}),i.xd={});return i}(Math);!function(t){function e(t,e,i,n,r,o,s){return((t=t+(e&i|~e&n)+r+s)<<o|t>>>32-o)+e}function i(t,e,i,n,r,o,s){return((t=t+(e&n|i&~n)+r+s)<<o|t>>>32-o)+e}function n(t,e,i,n,r,o,s){return((t=t+(e^i^n)+r+s)<<o|t>>>32-o)+e}function r(t,e,i,n,r,o,s){return((t=t+(i^(e|~n))+r+s)<<o|t>>>32-o)+e}for(var o=It,s=o.Ql,a=s.Gl,h=s._d,s=o.xd,u=[],c=0;64>c;c++)u[c]=4294967296*t.abs(t.sin(c+1))|0;s=s.Kl=h.extend({Dd:function(){this.Hd=new a.init([1732584193,4023233417,2562383102,271733878])},Od:function(t,o){for(var s=0;16>s;s++){var a=o+s,h=t[a];t[a]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var s=this.Hd.yd,a=t[o+0],h=t[o+1],c=t[o+2],f=t[o+3],l=t[o+4],p=t[o+5],d=t[o+6],v=t[o+7],g=t[o+8],y=t[o+9],w=t[o+10],m=t[o+11],b=t[o+12],E=t[o+13],I=t[o+14],S=t[o+15],R=s[0],O=s[1],T=s[2],C=s[3],R=e(R,O,T,C,a,7,u[0]),C=e(C,R,O,T,h,12,u[1]),T=e(T,C,R,O,c,17,u[2]),O=e(O,T,C,R,f,22,u[3]),R=e(R,O,T,C,l,7,u[4]),C=e(C,R,O,T,p,12,u[5]),T=e(T,C,R,O,d,17,u[6]),O=e(O,T,C,R,v,22,u[7]),R=e(R,O,T,C,g,7,u[8]),C=e(C,R,O,T,y,12,u[9]),T=e(T,C,R,O,w,17,u[10]),O=e(O,T,C,R,m,22,u[11]),R=e(R,O,T,C,b,7,u[12]),C=e(C,R,O,T,E,12,u[13]),T=e(T,C,R,O,I,17,u[14]),O=e(O,T,C,R,S,22,u[15]),R=i(R,O,T,C,h,5,u[16]),C=i(C,R,O,T,d,9,u[17]),T=i(T,C,R,O,m,14,u[18]),O=i(O,T,C,R,a,20,u[19]),R=i(R,O,T,C,p,5,u[20]),C=i(C,R,O,T,w,9,u[21]),T=i(T,C,R,O,S,14,u[22]),O=i(O,T,C,R,l,20,u[23]),R=i(R,O,T,C,y,5,u[24]),C=i(C,R,O,T,I,9,u[25]),T=i(T,C,R,O,f,14,u[26]),O=i(O,T,C,R,g,20,u[27]),R=i(R,O,T,C,E,5,u[28]),C=i(C,R,O,T,c,9,u[29]),T=i(T,C,R,O,v,14,u[30]),O=i(O,T,C,R,b,20,u[31]),R=n(R,O,T,C,p,4,u[32]),C=n(C,R,O,T,g,11,u[33]),T=n(T,C,R,O,m,16,u[34]),O=n(O,T,C,R,I,23,u[35]),R=n(R,O,T,C,h,4,u[36]),C=n(C,R,O,T,l,11,u[37]),T=n(T,C,R,O,v,16,u[38]),O=n(O,T,C,R,w,23,u[39]),R=n(R,O,T,C,E,4,u[40]),C=n(C,R,O,T,a,11,u[41]),T=n(T,C,R,O,f,16,u[42]),O=n(O,T,C,R,d,23,u[43]),R=n(R,O,T,C,y,4,u[44]),C=n(C,R,O,T,b,11,u[45]),T=n(T,C,R,O,S,16,u[46]),O=n(O,T,C,R,c,23,u[47]),R=r(R,O,T,C,a,6,u[48]),C=r(C,R,O,T,v,10,u[49]),T=r(T,C,R,O,I,15,u[50]),O=r(O,T,C,R,p,21,u[51]),R=r(R,O,T,C,b,6,u[52]),C=r(C,R,O,T,f,10,u[53]),T=r(T,C,R,O,w,15,u[54]),O=r(O,T,C,R,h,21,u[55]),R=r(R,O,T,C,g,6,u[56]),C=r(C,R,O,T,S,10,u[57]),T=r(T,C,R,O,d,15,u[58]),O=r(O,T,C,R,E,21,u[59]),R=r(R,O,T,C,l,6,u[60]),C=r(C,R,O,T,m,10,u[61]),T=r(T,C,R,O,c,15,u[62]),O=r(O,T,C,R,y,21,u[63]);s[0]=s[0]+R|0,s[1]=s[1]+O|0,s[2]=s[2]+T|0,s[3]=s[3]+C|0},Ld:function(){var e=this.Rd,i=e.yd,n=8*this.bd,r=8*e.md;i[r>>>5]|=128<<24-r%32;var o=t.floor(n/4294967296);for(i[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.md=4*(i.length+1),this.Ad(),e=this.Hd,i=e.yd,n=0;4>n;n++)r=i[n],i[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var t=h.clone.call(this);return t.Hd=this.Hd.clone(),t}}),o.Kl=h.Md(s),o.qd=h.Bd(s)}(Math),function(){var t=It,e=t.Ql,i=e.Gl,n=e._d,r=[],e=t.xd.Vd=n.extend({Dd:function(){this.Hd=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},Od:function(t,e){for(var i=this.Hd.yd,n=i[0],o=i[1],s=i[2],a=i[3],h=i[4],u=0;80>u;u++){if(16>u)r[u]=0|t[e+u];else{var c=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=c<<1|c>>>31}c=(n<<5|n>>>27)+h+r[u],c=20>u?c+(1518500249+(o&s|~o&a)):40>u?c+(1859775393+(o^s^a)):60>u?c+((o&s|o&a|s&a)-1894007588):c+((o^s^a)-899497514),h=a,a=s,s=o<<30|o>>>2,o=n,n=c}i[0]=i[0]+n|0,i[1]=i[1]+o|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+h|0},Ld:function(){var t=this.Rd,e=t.yd,i=8*this.bd,n=8*t.md;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),e[15+(n+64>>>9<<4)]=i,t.md=4*e.length,this.Ad(),this.Hd},clone:function(){var t=n.clone.call(this);return t.Hd=this.Hd.clone(),t}});t.Vd=n.Md(e),t.jd=n.Bd(e)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */
var St;"Microsoft Internet Explorer"==mt.appName?(i.prototype.Pp=o,St=30):"Netscape"!=mt.appName?(i.prototype.Pp=r,St=26):(i.prototype.Pp=s,St=28),i.prototype.Tp=St,i.prototype.Sp=(1<<St)-1,i.prototype.yp=1<<St,i.prototype._p=Math.pow(2,52),i.prototype.kp=52-St,i.prototype.Op=2*St-52;var Rt,Ot,Tt="0123456789abcdefghijklmnopqrstuvwxyz",Ct=new Array;for(Rt="0".charCodeAt(0),Ot=0;Ot<=9;++Ot)Ct[Rt++]=Ot;for(Rt="a".charCodeAt(0),Ot=10;Ot<36;++Ot)Ct[Rt++]=Ot;for(Rt="A".charCodeAt(0),Ot=10;Ot<36;++Ot)Ct[Rt++]=Ot;k.prototype.Kp=A,k.prototype.Jp=P,k.prototype.reduce=_,k.prototype.zp=D,k.prototype.Yp=x,U.prototype.Kp=L,U.prototype.Jp=F,U.prototype.reduce=j,U.prototype.zp=B,U.prototype.Yp=H,i.prototype.Ap=u,i.prototype.mp=c,i.prototype.gp=l,i.prototype.Ip=p,i.prototype.Np=b,i.prototype.Fp=E,i.prototype.Cp=I,i.prototype.Lp=S,i.prototype.wp=R,i.prototype.Up=O,i.prototype.xp=T,i.prototype.Mp=C,i.prototype.qp=M,i.prototype.Wp=V,i.prototype.exp=q,i.prototype.toString=d,i.prototype.Rp=v,i.prototype.abs=g,i.prototype.Dp=y,i.prototype.nf=m,i.prototype.Bp=N,i.prototype.if=K,i.ZERO=f(0),i.ONE=f(1),/*! asn1-1.0.9.js (c) 2013-2015 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
"undefined"!=typeof KJUR&&KJUR||(KJUR={}),void 0!==KJUR.Gd&&KJUR.Gd||(KJUR.Gd={}),KJUR.Gd.Qd=new function(){this.Kd=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.Yd=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1),r=n.length;r%2==1?r+=1:e.match(/^[0-7]/)||(r+=2);for(var o="",s=0;s<r;s++)o+="f";e=new i(o,16).zd(t).add(i.ONE).toString(16).replace(/^-/,"")}return e},this.Jd=function(t,e){var i=(KJUR.Gd,It.Ed.Td.parse(t)),n=It.Ed.Wd.stringify(i),r=n.replace(/(.{64})/g,"$1\r\n");return r=r.replace(/\r\n$/,""),"-----BEGIN "+e+"-----\r\n"+r+"\r\n-----END "+e+"-----\r\n"},this.Xd=function(t){var e=KJUR.Gd,i=Object.keys(t);if(1!=i.length)throw"key of param shall be only one.";var n=i[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+n+":"))throw"undefined key: "+n;if("bool"==n)return new e.Zd(t[n]);if("int"==n)return new e.$d(t[n]);if("bitstr"==n)return new e.eg(t[n]);if("octstr"==n)return new e.tg(t[n]);if("null"==n)return new e.rg(t[n]);if("oid"==n)return new e.ig(t[n]);if("enum"==n)return new e.ng(t[n]);if("utf8str"==n)return new e.sg(t[n]);if("numstr"==n)return new e.og(t[n]);if("prnstr"==n)return new e.ag(t[n]);if("telstr"==n)return new e.hg(t[n]);if("ia5str"==n)return new e.cg(t[n]);if("utctime"==n)return new e.ug(t[n]);if("gentime"==n)return new e.lg(t[n]);if("seq"==n){for(var r=t[n],o=[],s=0;s<r.length;s++){var a=e.Qd.Xd(r[s]);o.push(a)}return new e.pg({fg:o})}if("set"==n){for(var r=t[n],o=[],s=0;s<r.length;s++){var a=e.Qd.Xd(r[s]);o.push(a)}return new e.dg({fg:o})}if("tag"==n){var h=t[n];if("[object Array]"===Object.prototype.toString.call(h)&&3==h.length){var u=e.Qd.Xd(h[2]);return new e.gg({tag:h[0],vg:h[1],yg:u})}var c={};if(void 0!==h.vg&&(c.vg=h.vg),void 0!==h.tag&&(c.tag=h.tag),void 0===h.yg)throw"obj shall be specified for 'tag'.";return c.yg=e.Qd.Xd(h.yg),new e.gg(c)}},this.mg=function(t){return this.Xd(t).Eg()}},KJUR.Gd.Qd.Tg=function(t){for(var e="",n=parseInt(t.substr(0,2),16),r=Math.floor(n/40),o=n%40,e=r+"."+o,s="",a=2;a<t.length;a+=2){var h=parseInt(t.substr(a,2),16),u=("00000000"+h.toString(2)).slice(-8);s+=u.substr(1,7),"0"==u.substr(0,1)&&(e=e+"."+new i(s,2).toString(10),s="")}return e},KJUR.Gd.Qd.Ig=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",r=t.split("."),o=40*parseInt(r[0])+parseInt(r[1]);n+=e(o),r.splice(0,2);for(var s=0;s<r.length;s++)n+=function(t){var n="",r=new i(t,10),o=r.toString(2),s=7-o.length%7;7==s&&(s=0);for(var a="",h=0;h<s;h++)a+="0";o=a+o;for(var h=0;h<o.length-1;h+=7){var u=o.substr(h,7);h!=o.length-7&&(u="1"+u),n+=e(parseInt(u,2))}return n}(r[s]);return n},KJUR.Gd.wg=function(){this.Sg=function(){if(void 0===this.Rg||null==this.Rg)throw"this.hV is null or undefined.";if(this.Rg.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.Rg;var t=this.Rg.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var i=e.length/2;if(i>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+i).toString(16)+e},this.Eg=function(){return(null==this.bg||this.Pg)&&(this.Rg=this.Ag(),this.Cg=this.Sg(),this.bg=this.kg+this.Cg+this.Rg,this.Pg=!1),this.bg},this.Og=function(){return this.Eg(),this.Rg},this.Ag=function(){return""}},KJUR.Gd._g=function(t){KJUR.Gd._g.sd.constructor.call(this),this.Ng=function(){return this.v},this.Dg=function(t){this.bg=null,this.Pg=!0,this.v=t,this.Rg=stohex(this.v)},this.Fg=function(t){this.bg=null,this.Pg=!0,this.v=null,this.Rg=t},this.Ag=function(){return this.Rg},void 0!==t&&("string"==typeof t?this.Dg(t):void 0!==t.Lg?this.Dg(t.Lg):void 0!==t.Mg&&this.Fg(t.Mg))},Et.lang.extend(KJUR.Gd._g,KJUR.Gd.wg),KJUR.Gd.Bg=function(t){KJUR.Gd.Bg.sd.constructor.call(this),this.Ug=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.xg=function(t,e,i){var n=this.Hg,r=this.Ug(t),o=String(r.getFullYear());"utc"==e&&(o=o.substr(2,2));var s=n(String(r.getMonth()+1),2),a=n(String(r.getDate()),2),h=n(String(r.getHours()),2),u=n(String(r.getMinutes()),2),c=n(String(r.getSeconds()),2),f=o+s+a+h+u+c;if(!0===i){var l=r.getMilliseconds();if(0!=l){var p=n(String(l),3);p=p.replace(/[0]+$/,""),f=f+"."+p}}return f+"Z"},this.Hg=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.Ng=function(){return this.v},this.Dg=function(t){this.bg=null,this.Pg=!0,this.v=t,this.Rg=stohex(t)},this.qg=function(t,e,i,n,r,o){var s=new Date(Date.UTC(t,e-1,i,n,r,o,0));this.Vg(s)},this.Ag=function(){return this.Rg}},Et.lang.extend(KJUR.Gd.Bg,KJUR.Gd.wg),KJUR.Gd.jg=function(t){KJUR.Gd._g.sd.constructor.call(this),this.Gg=function(t){this.bg=null,this.Pg=!0,this.Qg=t},this.Kg=function(t){this.bg=null,this.Pg=!0,this.Qg.push(t)},this.Qg=new Array,void 0!==t&&void 0!==t.fg&&(this.Qg=t.fg)},Et.lang.extend(KJUR.Gd.jg,KJUR.Gd.wg),KJUR.Gd.Zd=function(){KJUR.Gd.Zd.sd.constructor.call(this),this.kg="01",this.bg="0101ff"},Et.lang.extend(KJUR.Gd.Zd,KJUR.Gd.wg),KJUR.Gd.$d=function(t){KJUR.Gd.$d.sd.constructor.call(this),this.kg="02",this.Yg=function(t){this.bg=null,this.Pg=!0,this.Rg=KJUR.Gd.Qd.Yd(t)},this.zg=function(t){var e=new i(String(t),10);this.Yg(e)},this.Jg=function(t){this.Rg=t},this.Ag=function(){return this.Rg},void 0!==t&&(void 0!==t.Wg?this.Yg(t.Wg):void 0!==t.Xg?this.zg(t.Xg):"number"==typeof t?this.zg(t):void 0!==t.Mg&&this.Jg(t.Mg))},Et.lang.extend(KJUR.Gd.$d,KJUR.Gd.wg),KJUR.Gd.eg=function(t){KJUR.Gd.eg.sd.constructor.call(this),this.kg="03",this.Zg=function(t){this.bg=null,this.Pg=!0,this.Rg=t},this.$g=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;this.bg=null,this.Pg=!0,this.Rg=i+e},this.ev=function(t){t=t.replace(/0+$/,"");var e=8-t.length%8;8==e&&(e=0);for(var i=0;i<=e;i++)t+="0";for(var n="",i=0;i<t.length-1;i+=8){var r=t.substr(i,8),o=parseInt(r,2).toString(16);1==o.length&&(o="0"+o),n+=o}this.bg=null,this.Pg=!0,this.Rg="0"+e+n},this.tv=function(t){for(var e="",i=0;i<t.length;i++)1==t[i]?e+="1":e+="0";this.ev(e)},this.rv=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=!1;return e},this.Ag=function(){return this.Rg},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.Zg(t):void 0!==t.Mg?this.Zg(t.Mg):void 0!==t.iv?this.ev(t.iv):void 0!==t.fg&&this.tv(t.fg))},Et.lang.extend(KJUR.Gd.eg,KJUR.Gd.wg),KJUR.Gd.tg=function(t){KJUR.Gd.tg.sd.constructor.call(this,t),this.kg="04"},Et.lang.extend(KJUR.Gd.tg,KJUR.Gd._g),KJUR.Gd.rg=function(){KJUR.Gd.rg.sd.constructor.call(this),this.kg="05",this.bg="0500"},Et.lang.extend(KJUR.Gd.rg,KJUR.Gd.wg),KJUR.Gd.ig=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new i(t,10),o=r.toString(2),s=7-o.length%7;7==s&&(s=0);for(var a="",h=0;h<s;h++)a+="0";o=a+o;for(var h=0;h<o.length-1;h+=7){var u=o.substr(h,7);h!=o.length-7&&(u="1"+u),n+=e(parseInt(u,2))}return n};KJUR.Gd.ig.sd.constructor.call(this),this.kg="06",this.Jg=function(t){this.bg=null,this.Pg=!0,this.v=null,this.Rg=t},this.nv=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var i="",r=t.split("."),o=40*parseInt(r[0])+parseInt(r[1]);i+=e(o),r.splice(0,2);for(var s=0;s<r.length;s++)i+=n(r[s]);this.bg=null,this.Pg=!0,this.v=null,this.Rg=i},this.sv=function(t){if(void 0===KJUR.Gd.hv.av.ov[t])throw"DERObjectIdentifier oidName undefined: "+t;var e=KJUR.Gd.hv.av.ov[t];this.nv(e)},this.Ag=function(){return this.Rg},void 0!==t&&("string"==typeof t&&t.match(/^[0-2].[0-9.]+$/)?this.nv(t):void 0!==KJUR.Gd.hv.av.ov[t]?this.nv(KJUR.Gd.hv.av.ov[t]):void 0!==t.cv?this.nv(t.cv):void 0!==t.Mg?this.Jg(t.Mg):void 0!==t.name&&this.sv(t.name))},Et.lang.extend(KJUR.Gd.ig,KJUR.Gd.wg),KJUR.Gd.ng=function(t){KJUR.Gd.ng.sd.constructor.call(this),this.kg="0a",this.Yg=function(t){this.bg=null,this.Pg=!0,this.Rg=KJUR.Gd.Qd.Yd(t)},this.zg=function(t){var e=new i(String(t),10);this.Yg(e)},this.Jg=function(t){this.Rg=t},this.Ag=function(){return this.Rg},void 0!==t&&(void 0!==t.Xg?this.zg(t.Xg):"number"==typeof t?this.zg(t):void 0!==t.Mg&&this.Jg(t.Mg))},Et.lang.extend(KJUR.Gd.ng,KJUR.Gd.wg),KJUR.Gd.sg=function(t){KJUR.Gd.sg.sd.constructor.call(this,t),this.kg="0c"},Et.lang.extend(KJUR.Gd.sg,KJUR.Gd._g),KJUR.Gd.og=function(t){KJUR.Gd.og.sd.constructor.call(this,t),this.kg="12"},Et.lang.extend(KJUR.Gd.og,KJUR.Gd._g),KJUR.Gd.ag=function(t){KJUR.Gd.ag.sd.constructor.call(this,t),this.kg="13"},Et.lang.extend(KJUR.Gd.ag,KJUR.Gd._g),KJUR.Gd.hg=function(t){KJUR.Gd.hg.sd.constructor.call(this,t),this.kg="14"},Et.lang.extend(KJUR.Gd.hg,KJUR.Gd._g),KJUR.Gd.cg=function(t){KJUR.Gd.cg.sd.constructor.call(this,t),this.kg="16"},Et.lang.extend(KJUR.Gd.cg,KJUR.Gd._g),KJUR.Gd.ug=function(t){KJUR.Gd.ug.sd.constructor.call(this,t),this.kg="17",this.Vg=function(t){this.bg=null,this.Pg=!0,this.uv=t,this.v=this.xg(this.uv,"utc"),this.Rg=stohex(this.v)},this.Ag=function(){return void 0===this.uv&&void 0===this.v&&(this.uv=new Date,this.v=this.xg(this.uv,"utc"),this.Rg=stohex(this.v)),this.Rg},void 0!==t&&(void 0!==t.Lg?this.Dg(t.Lg):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.Dg(t):void 0!==t.Mg?this.Fg(t.Mg):void 0!==t.uv&&this.Vg(t.uv))},Et.lang.extend(KJUR.Gd.ug,KJUR.Gd.Bg),KJUR.Gd.lg=function(t){KJUR.Gd.lg.sd.constructor.call(this,t),this.kg="18",this.lv=!1,this.Vg=function(t){this.bg=null,this.Pg=!0,this.uv=t,this.v=this.xg(this.uv,"gen",this.lv),this.Rg=stohex(this.v)},this.Ag=function(){return void 0===this.uv&&void 0===this.v&&(this.uv=new Date,this.v=this.xg(this.uv,"gen",this.lv),this.Rg=stohex(this.v)),this.Rg},void 0!==t&&(void 0!==t.Lg?this.Dg(t.Lg):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.Dg(t):void 0!==t.Mg?this.Fg(t.Mg):void 0!==t.uv&&this.Vg(t.uv),!0===t.pv&&(this.lv=!0))},Et.lang.extend(KJUR.Gd.lg,KJUR.Gd.Bg),KJUR.Gd.pg=function(t){KJUR.Gd.pg.sd.constructor.call(this,t),this.kg="30",this.Ag=function(){for(var t="",e=0;e<this.Qg.length;e++)t+=this.Qg[e].Eg();return this.Rg=t,this.Rg}},Et.lang.extend(KJUR.Gd.pg,KJUR.Gd.jg),KJUR.Gd.dg=function(t){KJUR.Gd.dg.sd.constructor.call(this,t),this.kg="31",this.fv=!0,this.Ag=function(){for(var t=new Array,e=0;e<this.Qg.length;e++){var i=this.Qg[e];t.push(i.Eg())}return 1==this.fv&&t.sort(),this.Rg=t.join(""),this.Rg},void 0!==t&&void 0!==t.dv&&0==t.dv&&(this.fv=!1)},Et.lang.extend(KJUR.Gd.dg,KJUR.Gd.jg),KJUR.Gd.gg=function(t){KJUR.Gd.gg.sd.constructor.call(this),this.kg="a0",this.Rg="",this.gv=!0,this.vv=null,this.yv=function(t,e,i){this.kg=e,this.gv=t,this.vv=i,this.gv?(this.Rg=this.vv.Eg(),this.bg=null,this.Pg=!0):(this.Rg=null,this.bg=i.Eg(),this.bg=this.bg.replace(/^../,e),this.Pg=!1)},this.Ag=function(){return this.Rg},void 0!==t&&(void 0!==t.tag&&(this.kg=t.tag),void 0!==t.vg&&(this.gv=t.vg),void 0!==t.yg&&(this.vv=t.yg,this.yv(this.gv,this.kg,this.vv)))},Et.lang.extend(KJUR.Gd.gg,KJUR.Gd.wg);/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */
var Nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kt="=";/*! crypto-1.1.8.js (c) 2013-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
"undefined"!=typeof KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.hf=new function(){this.gf={sha1:"3021300906052b0e03021a05000414",mv:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",Ev:"3041300d060960864801650304020205000430",Tv:"3051300d060960864801650304020305000440",Iv:"3020300c06082a864886f70d020205000410",wv:"3020300c06082a864886f70d020505000410",Sv:"3021300906052b2403020105000414"},this.Rv={wv:"cryptojs",sha1:"cryptojs",mv:"cryptojs",sha256:"cryptojs",Ev:"cryptojs",Tv:"cryptojs",Sv:"cryptojs",bv:"cryptojs",Pv:"cryptojs",Av:"cryptojs",Cv:"cryptojs",kv:"cryptojs",Ov:"cryptojs",_v:"cryptojs",Nv:"cryptojs/jsrsa",Dv:"cryptojs/jsrsa",Fv:"cryptojs/jsrsa",Lv:"cryptojs/jsrsa",Mv:"cryptojs/jsrsa",Bv:"cryptojs/jsrsa",Uv:"cryptojs/jsrsa",xv:"cryptojs/jsrsa",Hv:"cryptojs/jsrsa",qv:"cryptojs/jsrsa",Vv:"cryptojs/jsrsa",jv:"cryptojs/jsrsa",Gv:"cryptojs/jsrsa",Qv:"cryptojs/jsrsa",Kv:"cryptojs/jsrsa",Yv:"cryptojs/jsrsa",zv:"cryptojs/jsrsa",Jv:"cryptojs/jsrsa",Wv:"cryptojs/jsrsa",Xv:"cryptojs/jsrsa",Zv:"cryptojs/jsrsa",$v:"cryptojs/jsrsa",ey:"cryptojs/jsrsa",ty:"cryptojs/jsrsa"},this.iy={wv:It.xd.Kl,sha1:It.xd.Vd,mv:It.xd.ny,sha256:It.xd.sy,Ev:It.xd.oy,Tv:It.xd.ay,Sv:It.xd.hy},this.uy=function(t,e){if(void 0===this.gf[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.gf[e]+t},this.uf=function(t,e,i){var n=this.uy(t,e),r=i/4;if(n.length+22>r)throw"key is too short for SigAlg: keylen="+i+","+e;for(var o="0001",s="00"+n,a="",h=r-o.length-s.length,u=0;u<h;u+=2)a+="ff";return o+a+s},this.af=function(t,e){return new KJUR.crypto.py({gy:e}).ly(t)},this.pf=function(t,e){return new KJUR.crypto.py({gy:e}).vy(t)},this.sha1=function(t){return new KJUR.crypto.py({gy:"sha1",yy:"cryptojs"}).ly(t)},this.sha256=function(t){return new KJUR.crypto.py({gy:"sha256",yy:"cryptojs"}).ly(t)},this.my=function(t){return new KJUR.crypto.py({gy:"sha256",yy:"cryptojs"}).vy(t)},this.Tv=function(t){return new KJUR.crypto.py({gy:"sha512",yy:"cryptojs"}).ly(t)},this.Ey=function(t){return new KJUR.crypto.py({gy:"sha512",yy:"cryptojs"}).vy(t)},this.wv=function(t){return new KJUR.crypto.py({gy:"md5",yy:"cryptojs"}).ly(t)},this.Sv=function(t){return new KJUR.crypto.py({gy:"ripemd160",yy:"cryptojs"}).ly(t)},this.Ty=function(t){}},KJUR.crypto.py=function(t){this.Iy=function(t,e){if(null!=t&&void 0===e&&(e=KJUR.crypto.hf.Rv[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.wy=KJUR.crypto.hf.iy[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.Sy=function(t){this.wy.update(t)},this.Ry=function(t){var e=It.Ed.Td.parse(t);this.wy.update(e)},this.digest=function(){return this.wy.Fd().toString(It.Ed.Td)},this.ly=function(t){return this.Sy(t),this.digest()},this.vy=function(t){return this.Ry(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.wy=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.Sy=function(t){this.wy.update(t)},this.Ry=function(t){var e=sjcl.Py.Mg.by(t);this.wy.update(e)},this.digest=function(){var t=this.wy.Fd();return sjcl.Py.Mg.Ay(t)},this.ly=function(t){return this.Sy(t),this.digest()},this.vy=function(t){return this.Ry(t),this.digest()}}},this.Sy=function(t){throw"updateString(str) not supported for this alg/prov: "+this.Cy+"/"+this.ky},this.Ry=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.Cy+"/"+this.ky},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.Cy+"/"+this.ky},this.ly=function(t){throw"digestString(str) not supported for this alg/prov: "+this.Cy+"/"+this.ky},this.vy=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.Cy+"/"+this.ky},void 0!==t&&void 0!==t.gy&&(this.Cy=t.gy,void 0===t.yy&&(this.ky=KJUR.crypto.hf.Rv[this.Cy]),this.Iy(this.Cy,this.ky))},KJUR.crypto.Oy=function(t){this.Iy=function(t,e){if(t=t.toLowerCase(),null==t&&(t="hmacsha1"),t=t.toLowerCase(),"hmac"!=t.substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=KJUR.crypto.hf.Rv[t]),this._y=t+"/"+e;var i=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(i)&&"cryptojs"==e){try{var n=KJUR.crypto.hf.iy[i];this.mac=It.xd.Ud.create(n,this.Ny)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+i+"/"+t}this.Sy=function(t){this.mac.update(t)},this.Ry=function(t){var e=It.Ed.Td.parse(t);this.mac.update(e)},this.Dy=function(){return this.mac.Fd().toString(It.Ed.Td)},this.Fy=function(t){return this.Sy(t),this.Dy()},this.Ly=function(t){return this.Ry(t),this.Dy()}}},this.Sy=function(t){throw"updateString(str) not supported for this alg/prov: "+this._y},this.Ry=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this._y},this.Dy=function(){throw"digest() not supported for this alg/prov: "+this._y},this.Fy=function(t){throw"digestString(str) not supported for this alg/prov: "+this._y},this.Ly=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this._y},this.My=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=rstrtohex(t)),void(this.Ny=It.Ed.Td.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;var e=null;if(void 0!==t.Mg){if(t.Mg.length%2!=0||!t.Mg.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.Mg;e=t.Mg}if(void 0!==t.By&&(e=utf8tohex(t.By)),void 0!==t.Uy&&(e=rstrtohex(t.Uy)),void 0!==t.xy&&(e=Q(t.xy)),void 0!==t.Hy&&(e=b64utohex(t.Hy)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.Ny=It.Ed.Td.parse(e)},void 0!==t&&(void 0!==t.Ny&&this.My(t.Ny),void 0!==t.gy&&(this.Cy=t.gy,void 0===t.yy&&(this.ky=KJUR.crypto.hf.Rv[this.Cy]),this.Iy(this.Cy,this.ky)))},KJUR.crypto.Signature=function(t){var e=null;if(this.qy=function(){this.Cy.match(/^(.+)with(.+)$/)&&(this.Vy=RegExp.$1.toLowerCase(),this.jy=RegExp.$2.toLowerCase())},this.Gy=function(t,e){for(var i="",n=e/4-t.length,r=0;r<n;r++)i+="0";return i+t},this.Iy=function(t,e){if(this.qy(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.Vy)){try{this.wy=new KJUR.crypto.py({gy:this.Vy})}catch(t){throw"setAlgAndProvider hash alg set fail alg="+this.Vy+"/"+t}this.init=function(t,e){var i=null;try{i=void 0===e?KEYUTIL.getKey(t):KEYUTIL.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===i.Qy)this.Ky=i,this.state="SIGN";else{if(!0!==i.rf)throw"init failed.:"+i;this.Yy=i,this.state="VERIFY"}},this.zy=function(t){"string"==typeof t.Jy&&"string"==typeof t.Wy?(this.Jy=t.Jy,this.Wy=t.Wy):this.Ky=t,this.state="SIGN"},this.Xy=function(t){"string"==typeof t.Zy&&"string"==typeof t.Wy?(this.Zy=t.Zy,this.Wy=t.Wy):t instanceof KJUR.crypto.$y?this.Yy=t:t instanceof Y&&(this.Yy=t),this.state="VERIFY"},this.em=function(t){var e=new X509;e.tm(t),this.Yy=e.rm,this.state="VERIFY"},this.Sy=function(t){this.wy.Sy(t)},this.Ry=function(t){this.wy.Ry(t)},this.sign=function(){if(this.im=this.wy.digest(),void 0!==this.Jy&&void 0!==this.Wy){var t=new KJUR.crypto.$y({curve:this.Wy});this.nm=t.sm(this.im,this.Jy)}else if(this.Ky instanceof Y&&"rsaandmgf1"==this.jy)this.nm=this.Ky.ff(this.im,this.Vy,this.om);else if(this.Ky instanceof Y&&"rsa"==this.jy)this.nm=this.Ky.cf(this.im,this.Vy);else if(this.Ky instanceof KJUR.crypto.$y)this.nm=this.Ky.cf(this.im);else{if(!(this.Ky instanceof KJUR.crypto.am))throw"Signature: unsupported public key alg: "+this.jy;this.nm=this.Ky.cf(this.im)}return this.nm},this.hm=function(t){return this.Sy(t),this.sign()},this.sm=function(t){return this.Ry(t),this.sign()},this.verify=function(t){if(this.im=this.wy.digest(),void 0!==this.Zy&&void 0!==this.Wy)return new KJUR.crypto.$y({curve:this.Wy}).cm(this.im,t,this.Zy);if(this.Yy instanceof Y&&"rsaandmgf1"==this.jy)return this.Yy.vf(this.im,t,this.Vy,this.om);if(this.Yy instanceof Y&&"rsa"==this.jy)return this.Yy.um(this.im,t);if(this.Yy instanceof KJUR.crypto.$y)return this.Yy.um(this.im,t);if(this.Yy instanceof KJUR.crypto.am)return this.Yy.um(this.im,t);throw"Signature: unsupported public key alg: "+this.jy}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.lm},this.Xy=function(t){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.lm},this.em=function(t){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.lm},this.zy=function(t){throw"initSign(prvKey) not supported for this alg:prov="+this.lm},this.Sy=function(t){throw"updateString(str) not supported for this alg:prov="+this.lm},this.Ry=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.lm},this.sign=function(){throw"sign() not supported for this alg:prov="+this.lm},this.hm=function(t){throw"digestString(str) not supported for this alg:prov="+this.lm},this.sm=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.lm},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.lm},this.pm=t,void 0!==t&&(void 0!==t.gy&&(this.Cy=t.gy,void 0===t.yy?this.ky=KJUR.crypto.hf.Rv[this.Cy]:this.ky=t.yy,this.lm=this.Cy+":"+this.ky,this.Iy(this.Cy,this.ky),this.qy()),void 0!==t.fm&&(this.om=t.fm),void 0!==t.dm)){if(void 0!==t.gm)throw"both prvkeypem and prvkeypas parameters not supported";try{var e=new Y;e.vm(t.dm),this.zy(e)}catch(t){throw"fatal error to load pem private key: "+t}}},KJUR.crypto.av=new function(){this.ym={mm:"rsaEncryption",Em:"ecPublicKey",Tm:"dsa",Im:"secp256r1",wm:"secp192k1",Sm:"secp224r1",Rm:"secp256k1",bm:"secp521r1",Pm:"secp384r1",Am:"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var At=20;Y.prototype.sf=Z,Y.prototype.df=$,Y.prototype.encrypt=tt,Y.prototype.Cm=et,Y.prototype.type="RSA";/*! rsasign-1.2.7.js (c) 2012 Kenji Urushima | kjur.github.com/jsrsasign/license
 */
var Pt=new RegExp("");Pt.compile("[^0-9a-f]","gi"),Y.prototype.cf=rt,Y.prototype.hm=nt,Y.prototype.km=ot,Y.prototype.Om=st,Y.prototype.sign=nt,Y.prototype._m=ot,Y.prototype.Nm=st,Y.prototype.ff=ut,Y.prototype.Dm=ht,Y.prototype.Fm=ht,Y.Lm=-1,Y.Mm=-2,Y.prototype.um=gt,Y.prototype.Bm=vt,Y.prototype.Um=dt,Y.prototype.verify=vt,Y.prototype.xm=dt,Y.prototype.vf=wt,Y.prototype.Hm=yt,Y.prototype.qm=yt,Y.Vm=-2,e.jm=i,e.Gm=Y,e.Signature=KJUR.crypto.Signature,e.py=KJUR.crypto.py,e.sl=It,e.Qm=Q,e.Km=z},function(t,e,i){"use strict";var n;!function(t){function e(t){return n[t]}var i=function(){function t(){}return t}();t.HiveSession=i,function(t){t[t.Ym=0]="GENERIC_ERROR",t[t.zm=1]="NO_TECH_AVAILABLE",t[t.Jm=2]="NO_TECH_RESOLVED",t[t.Wm=3]="TECH_ERROR",t[t.Xm=4]="TICKET_ERROR"}(t.Zm||(t.Zm={}));var n;!function(t){t[t.$m=0]="Generic Undefined Error",t[t.eE=1]="No Tech available to resolve the ticket",t[t.tE=2]="No available Tech could resolved the ticket",t[t.rE=3]="Stopped resolving session on last tech onError",t[t.iE=4]="The ticket could not be resolved"}(n||(n={}));var r=function(){function t(){}return t}();t.HiveSessionError=r;var o=function(){function t(t,e){this.code=t,this.message=e}return t}();t.HiveTechError=o,function(t){t[t.nE=0]="NOT_READY",t[t.sE=1]="PLUGIN_ERROR",t[t.oE=2]="SESSION_ERROR",t[t.Xm=3]="TICKET_ERROR",t[t.aE=4]="VERSION_ERROR",t[t.hE=5]="TIMEOUT_ERROR"}(t.cE||(t.cE={})),!function(t){t[t.uE=0]="OK",t[t.lE=1]="HIVE_NOT_ALLOWED",t[t.pE=2]="TICKET_NOT_RESOLVED",t[t.fE=3]="TIMEOUT_RESOLVING_TICKET"}(t.dE||(t.dE={})),t.getHiveSessionErrorMessage=e;var s=function(){function t(t){this.gE=t}return t.prototype.getPluginStatusCode=function(){return this.gE.vE()},t}();t.yE=s}(n=e.gn||(e.gn={})),"undefined"!=typeof window&&(void 0===window.gn&&(window.gn={}),window.gn.getHiveSessionErrorMessage=n.getHiveSessionErrorMessage)},function(t,e,i){var n,r,o;/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.18.10
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(s,a){"use strict";"object"==typeof t&&t.t?t.t=a(i(16),i(16),i(16)):(r=[i(16),i(16),i(16)],n=a,void 0!==(o="function"==typeof n?n.apply(e,r):n)&&(t.t=o))}(0,function(t,e,i,n){"use strict";function r(t,e){var i=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof r))return i?n?new r(t,e):new r(t):new r;if(void 0===t){if(i)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&i)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.Bi(e):this}function o(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===s(t)}function h(t,e){var i,n,r={};if("RegExp"===s(e))r=null;else if(a(e))for(i=0,n=e.length;i<n;i++)r[e[i]]=!0;else r[e]=!0;for(i=0,n=t.length;i<n;i++)(r&&void 0!==r[t[i]]||!r&&e.test(t[i]))&&(t.splice(i,1),n--,i--);return t}function u(t,e){var i,n;if(a(e)){for(i=0,n=e.length;i<n;i++)if(!u(t,e[i]))return!1;return!0}var r=s(e);for(i=0,n=t.length;i<n;i++)if("RegExp"===r){if("string"==typeof t[i]&&t[i].match(e))return!0}else if(t[i]===e)return!0;return!1}function c(t,e){if(!a(t)||!a(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function f(t){var e=/^\/+|\/+$/g;return t.replace(e,"")}function l(t){return escape(t)}function p(t){return encodeURIComponent(t).replace(/[!'()*]/g,l).replace(/\*/g,"%2A")}function d(t){return function(e,i){return void 0===e?this.mE[t]||"":(this.mE[t]=e||null,this.sp(!i),this)}}function v(t,e){return function(i,n){return void 0===i?this.mE[t]||"":(null!==i&&(i+="",i.charAt(0)===e&&(i=i.substring(1))),this.mE[t]=i,this.sp(!n),this)}}var g=n&&n.EE;r.version="1.18.10";var y=r.prototype,w=Object.prototype.hasOwnProperty;r.mE=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,dn:null,TE:null,IE:r.IE,wE:r.wE}},r.IE=!1,r.wE=!0,r.SE=/^[a-z][a-z0-9.+-]*$/i,r.RE=/[^a-z0-9\.-]/i,r.bE=/(xn--)/i,r.PE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.AE=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.CE=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,r.kE={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,OE:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},r._E={NE:"80",DE:"443",FE:"21",LE:"70",ME:"80",BE:"443"},r.UE=/[^a-zA-Z0-9\.-]/,r.xE={a:"href",HE:"cite",link:"href",qE:"href",VE:"src",form:"action",jE:"src",GE:"href",QE:"src",KE:"src",source:"src",track:"src",input:"src",YE:"src",video:"src"},r.zE=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return r.xE[e]}},r.encode=p,r.decode=decodeURIComponent,r.JE=function(){r.encode=escape,r.decode=unescape},r.WE=function(){r.encode=p,r.decode=decodeURIComponent},r.XE={pathname:{encode:{ZE:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{ZE:/[\/\?#]/g,map:{Yf:"%2F",$E:"%3F",eT:"%23"}}},tT:{encode:{ZE:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":",rT:"/",iT:"?",nT:"#",sT:"[",oT:"]","%40":"@",aT:"!","%24":"$","%26":"&",hT:"'",cT:"(",uT:")",lT:"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},pT:{encode:{ZE:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{aT:"!","%24":"$",hT:"'",cT:"(",uT:")",lT:"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{ZE:/[\/\?#:]/g,map:{Yf:"%2F",$E:"%3F",eT:"%23",fT:"%3A"}}}},r.dT=function(t,e){var i=r.encode(t+"");return void 0===e&&(e=r.wE),e?i.replace(/%20/g,"+"):i},r.gT=function(t,e){t+="",void 0===e&&(e=r.wE);try{return r.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var m,b={encode:"encode",decode:"decode"},E=function(t,e){return function(i){try{return r[e](i+"").replace(r.XE[t][e].ZE,function(i){return r.XE[t][e].map[i]})}catch(t){return i}}};for(m in b)r[m+"PathSegment"]=E("pathname",b[m]),r[m+"UrnPathSegment"]=E("urnpath",b[m]);var I=function(t,e,i){return function(n){var o;o=i?function(t){return r[e](r[i](t))}:r[e];for(var s=(n+"").split(t),a=0,h=s.length;a<h;a++)s[a]=o(s[a]);return s.join(t)}};r.vT=I("/","decodePathSegment"),r.yT=I(":","decodeUrnPathSegment"),r.mT=I("/","encodePathSegment","decode"),r.ET=I(":","encodeUrnPathSegment","decode"),r.TT=E("reserved","encode"),r.parse=function(t,e){var i;return e||(e={}),i=t.indexOf("#"),i>-1&&(e.TE=t.substring(i+1)||null,t=t.substring(0,i)),i=t.indexOf("?"),i>-1&&(e.dn=t.substring(i+1)||null,t=t.substring(0,i)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=r.IT(t,e)):(i=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,i)||null,e.protocol&&!e.protocol.match(r.SE)?e.protocol=void 0:"//"===t.substring(i+1,i+3)?(t=t.substring(i+3),t=r.IT(t,e)):(t=t.substring(i+1),e.urn=!0)),e.path=t,e},r.wT=function(t,e){t=t.replace(/\\/g,"/");var i,n,r=t.indexOf("/");if(-1===r&&(r=t.length),"["===t.charAt(0))i=t.indexOf("]"),e.hostname=t.substring(1,i)||null,e.port=t.substring(i+2,r)||null,"/"===e.port&&(e.port=null);else{var o=t.indexOf(":"),s=t.indexOf("/"),a=t.indexOf(":",o+1);-1!==a&&(-1===s||a<s)?(e.hostname=t.substring(0,r)||null,e.port=null):(n=t.substring(0,r).split(":"),e.hostname=n[0]||null,e.port=n[1]||null)}return e.hostname&&"/"!==t.substring(r).charAt(0)&&(r++,t="/"+t),t.substring(r)||"/"},r.IT=function(t,e){return t=r.ST(t,e),r.wT(t,e)},r.ST=function(t,e){var i,n=t.indexOf("/"),o=t.lastIndexOf("@",n>-1?n:t.length-1);return o>-1&&(-1===n||o<n)?(i=t.substring(0,o).split(":"),e.username=i[0]?r.decode(i[0]):null,i.shift(),e.password=i[0]?r.decode(i.join(":")):null,t=t.substring(o+1)):(e.username=null,e.password=null),t},r.RT=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var i,n,o,s={},a=t.split("&"),h=a.length,u=0;u<h;u++)i=a[u].split("="),n=r.gT(i.shift(),e),o=i.length?r.gT(i.join("="),e):null,w.call(s,n)?("string"!=typeof s[n]&&null!==s[n]||(s[n]=[s[n]]),s[n].push(o)):s[n]=o;return s},r.sp=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=r.bT(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.dn&&t.dn&&(e+="?"+t.dn),"string"==typeof t.TE&&t.TE&&(e+="#"+t.TE),e},r.PT=function(t){var e="";return t.hostname?(r.AE.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},r.bT=function(t){return r.AT(t)+r.PT(t)},r.AT=function(t){var e="";return t.username&&(e+=r.encode(t.username)),t.password&&(e+=":"+r.encode(t.password)),e&&(e+="@"),e},r.CT=function(t,e,i){var n,o,s,h,u="";for(o in t)if(w.call(t,o)&&o)if(a(t[o]))for(n={},s=0,h=t[o].length;s<h;s++)void 0!==t[o][s]&&void 0===n[t[o][s]+""]&&(u+="&"+r.kT(o,t[o][s],i),!0!==e&&(n[t[o][s]+""]=!0));else void 0!==t[o]&&(u+="&"+r.kT(o,t[o],i));return u.substring(1)},r.kT=function(t,e,i){return r.dT(t,i)+(null!==e?"="+r.dT(e,i):"")},r.OT=function(t,e,i){if("object"==typeof e)for(var n in e)w.call(e,n)&&r.OT(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=i);"string"==typeof t[e]&&(t[e]=[t[e]]),a(i)||(i=[i]),t[e]=(t[e]||[]).concat(i)}},r._T=function(t,e,i){var n,o,u;if(a(e))for(n=0,o=e.length;n<o;n++)t[e[n]]=void 0;else if("RegExp"===s(e))for(u in t)e.test(u)&&(t[u]=void 0);else if("object"==typeof e)for(u in e)w.call(e,u)&&r._T(t,u,e[u]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==i?"RegExp"===s(i)?!a(t[e])&&i.test(t[e])?t[e]=void 0:t[e]=h(t[e],i):t[e]!==String(i)||a(i)&&1!==i.length?a(t[e])&&(t[e]=h(t[e],i)):t[e]=void 0:t[e]=void 0}},r.NT=function(t,e,i,n){switch(s(e)){case"String":break;case"RegExp":for(var o in t)if(w.call(t,o)&&e.test(o)&&(void 0===i||r.NT(t,o,i)))return!0;return!1;case"Object":for(var h in e)if(w.call(e,h)&&!r.NT(t,h,e[h]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(s(i)){case"Undefined":return e in t;case"Boolean":return i===Boolean(a(t[e])?t[e].length:t[e]);case"Function":return!!i(t[e],e,t);case"Array":return!!a(t[e])&&(n?u:c)(t[e],i);case"RegExp":return a(t[e])?!!n&&u(t[e],i):Boolean(t[e]&&t[e].match(i));case"Number":i=String(i);case"String":return a(t[e])?!!n&&u(t[e],i):t[e]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.DT=function(){for(var t=[],e=[],i=0,n=0;n<arguments.length;n++){var o=new r(arguments[n]);t.push(o);for(var s=o.FT(),a=0;a<s.length;a++)"string"==typeof s[a]&&e.push(s[a]),s[a]&&i++}if(!e.length||!i)return new r("");var h=new r("").FT(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||h.path("/"+h.path()),h.normalize()},r.LT=function(t,e){var i,n=Math.min(t.length,e.length);for(i=0;i<n;i++)if(t.charAt(i)!==e.charAt(i)){i--;break}return i<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(i)&&"/"===e.charAt(i)||(i=t.substring(0,i).lastIndexOf("/")),t.substring(0,i+1))},r.MT=function(t,e,i){i||(i={});var n=i.start||r.kE.start,o=i.end||r.kE.end,s=i.trim||r.kE.trim,a=i.OE||r.kE.OE,h=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var u=n.exec(t);if(!u)break;var c=u.index;if(i.BT){var f=t.slice(Math.max(c-3,0),c);if(f&&h.test(f))continue}for(var l=c+t.slice(c).search(o),p=t.slice(c,l),d=-1;;){var v=a.exec(p);if(!v)break;var g=v.index+v[0].length;d=Math.max(d,g)}if(p=d>-1?p.slice(0,d)+p.slice(d).replace(s,""):p.replace(s,""),!(p.length<=u[0].length||i.UT&&i.UT.test(p))){l=c+p.length;var y=e(p,c,l,t);void 0!==y?(y=String(y),t=t.slice(0,c)+y+t.slice(l),n.lastIndex=c+y.length):n.lastIndex=l}}return n.lastIndex=0,t},r.xT=function(e){if(e.match(r.UE)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.HT(e).match(r.UE))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},r.wt=function(t){if(t){var e={EE:this.wt()};return n.qT&&"function"==typeof n.qT.wt&&(e.qT=n.qT.wt()),n.VT&&"function"==typeof n.VT.wt&&(e.VT=n.VT.wt()),n.jT&&"function"==typeof n.jT.wt&&(e.jT=n.jT.wt()),e}return n.EE===this&&(n.EE=g),this},y.sp=function(t){return!0===t?this.GT=!0:(void 0===t||this.GT)&&(this.QT=r.sp(this.mE),this.GT=!1),this},y.clone=function(){return new r(this)},y.valueOf=y.toString=function(){return this.sp(!1).QT},y.protocol=d("protocol"),y.username=d("username"),y.password=d("password"),y.hostname=d("hostname"),y.port=d("port"),y.dn=v("query","?"),y.TE=v("fragment","#"),y.search=function(t,e){var i=this.dn(t,e);return"string"==typeof i&&i.length?"?"+i:i},y.hash=function(t,e){var i=this.TE(t,e);return"string"==typeof i&&i.length?"#"+i:i},y.pathname=function(t,e){if(void 0===t||!0===t){var i=this.mE.path||(this.mE.hostname?"/":"");return t?(this.mE.urn?r.yT:r.vT)(i):i}return this.mE.urn?this.mE.path=t?r.ET(t):"":this.mE.path=t?r.mT(t):"/",this.sp(!e),this},y.path=y.pathname,y.href=function(t,e){var i;if(void 0===t)return this.toString();this.QT="",this.mE=r.mE();var n=t instanceof r,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName&&(t=t[r.zE(t)]||"",o=!1),!n&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this.mE=r.parse(String(t),this.mE);else{if(!n&&!o)throw new TypeError("invalid input");var s=n?t.mE:t;for(i in s)w.call(this.mE,i)&&(this.mE[i]=s[i])}return this.sp(!e),this},y.is=function(t){var e=!1,n=!1,o=!1,s=!1,a=!1,h=!1,u=!1,c=!this.mE.urn;switch(this.mE.hostname&&(c=!1,n=r.PE.test(this.mE.hostname),o=r.AE.test(this.mE.hostname),e=n||o,s=!e,a=s&&i&&i.has(this.mE.hostname),h=s&&r.RE.test(this.mE.hostname),u=s&&r.bE.test(this.mE.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return h;case"url":return!this.mE.urn;case"urn":return!!this.mE.urn;case"punycode":return u}return null};var S=y.protocol,R=y.port,O=y.hostname;y.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(r.SE)))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return S.call(this,t,e)},y.scheme=y.protocol,y.port=function(t,e){if(this.mE.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return R.call(this,t,e)},y.hostname=function(t,e){if(this.mE.urn)return void 0===t?"":this;if(void 0!==t){var i={};if("/"!==r.wT(t,i))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=i.hostname}return O.call(this,t,e)},y.origin=function(t,e){if(this.mE.urn)return void 0===t?"":this;if(void 0===t){var i=this.protocol();return this.KT()?(i?i+"://":"")+this.KT():""}var n=r(t);return this.protocol(n.protocol()).KT(n.KT()).sp(!e),this},y.host=function(t,e){if(this.mE.urn)return void 0===t?"":this;if(void 0===t)return this.mE.hostname?r.PT(this.mE):"";if("/"!==r.wT(t,this.mE))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.sp(!e),this},y.KT=function(t,e){if(this.mE.urn)return void 0===t?"":this;if(void 0===t)return this.mE.hostname?r.bT(this.mE):"";if("/"!==r.IT(t,this.mE))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.sp(!e),this},y.YT=function(t,e){if(this.mE.urn)return void 0===t?"":this;if(void 0===t){var i=r.AT(this.mE);return i?i.substring(0,i.length-1):i}return"@"!==t[t.length-1]&&(t+="@"),r.ST(t,this.mE),this.sp(!e),this},y.zT=function(t,e){var i;return void 0===t?this.path()+this.search()+this.hash():(i=r.parse(t),this.mE.path=i.path,this.mE.dn=i.dn,this.mE.TE=i.TE,this.sp(!e),this)},y.JT=function(t,e){if(this.mE.urn)return void 0===t?"":this;if(void 0===t){if(!this.mE.hostname||this.is("IP"))return"";var i=this.mE.hostname.length-this.domain().length-1;return this.mE.hostname.substring(0,i)||""}var n=this.mE.hostname.length-this.domain().length,s=this.mE.hostname.substring(0,n),a=new RegExp("^"+o(s));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&r.xT(t),this.mE.hostname=this.mE.hostname.replace(a,t),this.sp(!e),this},y.domain=function(t,e){if(this.mE.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this.mE.hostname||this.is("IP"))return"";var i=this.mE.hostname.match(/\./g);if(i&&i.length<2)return this.mE.hostname;var n=this.mE.hostname.length-this.WT(e).length-1;return n=this.mE.hostname.lastIndexOf(".",n-1)+1,this.mE.hostname.substring(n)||""}if(!t)throw new TypeError("cannot set domain empty");if(r.xT(t),!this.mE.hostname||this.is("IP"))this.mE.hostname=t;else{var s=new RegExp(o(this.domain())+"$");this.mE.hostname=this.mE.hostname.replace(s,t)}return this.sp(!e),this},y.WT=function(t,e){if(this.mE.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this.mE.hostname||this.is("IP"))return"";var n=this.mE.hostname.lastIndexOf("."),r=this.mE.hostname.substring(n+1);return!0!==e&&i&&i.list[r.toLowerCase()]?i.get(this.mE.hostname)||r:r}var s;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!i||!i.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');s=new RegExp(o(this.WT())+"$"),this.mE.hostname=this.mE.hostname.replace(s,t)}else{if(!this.mE.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(o(this.WT())+"$"),this.mE.hostname=this.mE.hostname.replace(s,t)}return this.sp(!e),this},y.XT=function(t,e){if(this.mE.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this.mE.path&&!this.mE.hostname)return"";if("/"===this.mE.path)return"/";var i=this.mE.path.length-this.filename().length-1,n=this.mE.path.substring(0,i)||(this.mE.hostname?"/":"");return t?r.vT(n):n}var s=this.mE.path.length-this.filename().length,a=this.mE.path.substring(0,s),h=new RegExp("^"+o(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=r.mT(t),this.mE.path=this.mE.path.replace(h,t),this.sp(!e),this},y.filename=function(t,e){if(this.mE.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this.mE.path||"/"===this.mE.path)return"";var i=this.mE.path.lastIndexOf("/"),n=this.mE.path.substring(i+1);return t?r.ZT(n):n}var s=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(s=!0);var a=new RegExp(o(this.filename())+"$");return t=r.mT(t),this.mE.path=this.mE.path.replace(a,t),s?this.$T(e):this.sp(!e),this},y.suffix=function(t,e){if(this.mE.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this.mE.path||"/"===this.mE.path)return"";var i,n,s=this.filename(),a=s.lastIndexOf(".");return-1===a?"":(i=s.substring(a+1),n=/^[a-z0-9%]+$/i.test(i)?i:"",t?r.ZT(n):n)}"."===t.charAt(0)&&(t=t.substring(1));var h,u=this.suffix();if(u)h=t?new RegExp(o(u)+"$"):new RegExp(o("."+u)+"$");else{if(!t)return this;this.mE.path+="."+r.mT(t)}return h&&(t=r.mT(t),this.mE.path=this.mE.path.replace(h,t)),this.sp(!e),this},y.FT=function(t,e,i){var n=this.mE.urn?":":"/",r=this.path(),o="/"===r.substring(0,1),s=r.split(n);if(void 0!==t&&"number"!=typeof t&&(i=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&s.shift(),t<0&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(a(e)){s=[];for(var h=0,u=e.length;h<u;h++)(e[h].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(f(e[h])))}else(e||"string"==typeof e)&&(e=f(e),""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e?s[t]=f(e):s.splice(t,1);return o&&s.unshift(""),this.path(s.join(n),i)},y.eI=function(t,e,i){var n,o,s;if("number"!=typeof t&&(i=e,e=t,t=void 0),void 0===e){if(n=this.FT(t,e,i),a(n))for(o=0,s=n.length;o<s;o++)n[o]=r.decode(n[o]);else n=void 0!==n?r.decode(n):void 0;return n}if(a(e))for(o=0,s=e.length;o<s;o++)e[o]=r.encode(e[o]);else e="string"==typeof e||e instanceof String?r.encode(e):e;return this.FT(t,e,i)};var T=y.dn;return y.dn=function(t,e){if(!0===t)return r.RT(this.mE.dn,this.mE.wE);if("function"==typeof t){var i=r.RT(this.mE.dn,this.mE.wE),n=t.call(this,i);return this.mE.dn=r.CT(n||i,this.mE.IE,this.mE.wE),this.sp(!e),this}return void 0!==t&&"string"!=typeof t?(this.mE.dn=r.CT(t,this.mE.IE,this.mE.wE),this.sp(!e),this):T.call(this,t,e)},y.tI=function(t,e,i){var n=r.RT(this.mE.dn,this.mE.wE);if("string"==typeof t||t instanceof String)n[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)w.call(t,o)&&(n[o]=t[o])}return this.mE.dn=r.CT(n,this.mE.IE,this.mE.wE),"string"!=typeof t&&(i=e),this.sp(!i),this},y.OT=function(t,e,i){var n=r.RT(this.mE.dn,this.mE.wE);return r.OT(n,t,void 0===e?null:e),this.mE.dn=r.CT(n,this.mE.IE,this.mE.wE),"string"!=typeof t&&(i=e),this.sp(!i),this},y._T=function(t,e,i){var n=r.RT(this.mE.dn,this.mE.wE);return r._T(n,t,e),this.mE.dn=r.CT(n,this.mE.IE,this.mE.wE),"string"!=typeof t&&(i=e),this.sp(!i),this},y.NT=function(t,e,i){var n=r.RT(this.mE.dn,this.mE.wE);return r.NT(n,t,e,i)},y.rI=y.tI,y.iI=y.OT,y.nI=y._T,y.sI=y.NT,y.normalize=function(){return this.mE.urn?this.hI(!1).$T(!1).aI(!1).oI(!1).sp():this.hI(!1).uI(!1).cI(!1).$T(!1).aI(!1).oI(!1).sp()},y.hI=function(t){return"string"==typeof this.mE.protocol&&(this.mE.protocol=this.mE.protocol.toLowerCase(),this.sp(!t)),this},y.uI=function(i){return this.mE.hostname&&(this.is("IDN")&&t?this.mE.hostname=t.HT(this.mE.hostname):this.is("IPv6")&&e&&(this.mE.hostname=e.lI(this.mE.hostname)),this.mE.hostname=this.mE.hostname.toLowerCase(),this.sp(!i)),this},y.cI=function(t){return"string"==typeof this.mE.protocol&&this.mE.port===r._E[this.mE.protocol]&&(this.mE.port=null,this.sp(!t)),this},y.$T=function(t){var e=this.mE.path;if(!e)return this;if(this.mE.urn)return this.mE.path=r.ET(this.mE.path),this.sp(!t),this;if("/"===this.mE.path)return this;e=r.mT(e);var i,n,o,s="";for("/"!==e.charAt(0)&&(i=!0,e="/"+e),"/.."!==e.slice(-3)&&"/."!==e.slice(-2)||(e+="/"),e=e.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),i&&(s=e.substring(1).match(/^(\.\.\/)+/)||"")&&(s=s[0]);-1!==(n=e.search(/\/\.\.(\/|$)/));)0!==n?(o=e.substring(0,n).lastIndexOf("/"),-1===o&&(o=n),e=e.substring(0,o)+e.substring(n+3)):e=e.substring(3);return i&&this.is("relative")&&(e=s+e.substring(1)),this.mE.path=e,this.sp(!t),this},y.pI=y.$T,y.aI=function(t){return"string"==typeof this.mE.dn&&(this.mE.dn.length?this.dn(r.RT(this.mE.dn,this.mE.wE)):this.mE.dn=null,this.sp(!t)),this},y.oI=function(t){return this.mE.TE||(this.mE.TE=null,this.sp(!t)),this},y.fI=y.aI,y.dI=y.oI,y.JE=function(){var t=r.encode,e=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=t,r.decode=e}return this},y.WE=function(){var t=r.encode,e=r.decode;r.encode=p,r.decode=unescape;try{this.normalize()}finally{r.encode=t,r.decode=e}return this},y.gI=function(){var e=this.clone();e.username("").password("").normalize();var i="";if(e.mE.protocol&&(i+=e.mE.protocol+"://"),e.mE.hostname&&(e.is("punycode")&&t?(i+=t.vI(e.mE.hostname),e.mE.port&&(i+=":"+e.mE.port)):i+=e.host()),e.mE.hostname&&e.mE.path&&"/"!==e.mE.path.charAt(0)&&(i+="/"),i+=e.path(!0),e.mE.dn){for(var n="",o=0,s=e.mE.dn.split("&"),a=s.length;o<a;o++){var h=(s[o]||"").split("=");n+="&"+r.gT(h[0],this.mE.wE).replace(/&/g,"%26"),void 0!==h[1]&&(n+="="+r.gT(h[1],this.mE.wE).replace(/&/g,"%26"))}i+="?"+n.substring(1)}return i+=r.gT(e.hash(),!0)},y.Bi=function(t){var e,i,n,o=this.clone(),s=["protocol","username","password","hostname","port"];if(this.mE.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof r||(t=new r(t)),o.mE.protocol)return o;if(o.mE.protocol=t.mE.protocol,this.mE.hostname)return o;for(i=0;n=s[i];i++)o.mE[n]=t.mE[n];return o.mE.path?(".."===o.mE.path.substring(-2)&&(o.mE.path+="/"),"/"!==o.path().charAt(0)&&(e=t.XT(),e=e||(0===t.path().indexOf("/")?"/":""),o.mE.path=(e?e+"/":"")+o.mE.path,o.$T())):(o.mE.path=t.mE.path,o.mE.dn||(o.mE.dn=t.mE.dn)),o.sp(),o},y.yI=function(t){var e,i,n,o,s,a=this.clone().normalize();if(a.mE.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new r(t).normalize(),e=a.mE,i=t.mE,o=a.path(),s=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===i.protocol&&(e.protocol=null),e.username!==i.username||e.password!==i.password)return a.sp();if(null!==e.protocol||null!==e.username||null!==e.password)return a.sp();if(e.hostname!==i.hostname||e.port!==i.port)return a.sp();if(e.hostname=null,e.port=null,o===s)return e.path="",a.sp();if(!(n=r.LT(o,s)))return a.sp();var h=i.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=h+e.path.substring(n.length)||"./",a.sp()},y.ae=function(t){var e,i,n,o=this.clone(),s=new r(t),h={},u={},f={};if(o.normalize(),s.normalize(),o.toString()===s.toString())return!0;if(e=o.dn(),i=s.dn(),o.dn(""),s.dn(""),o.toString()!==s.toString())return!1;if(e.length!==i.length)return!1;h=r.RT(e,this.mE.wE),u=r.RT(i,this.mE.wE);for(n in h)if(w.call(h,n)){if(a(h[n])){if(!c(h[n],u[n]))return!1}else if(h[n]!==u[n])return!1;f[n]=!0}for(n in u)if(w.call(u,n)&&!f[n])return!1;return!0},y.IE=function(t){return this.mE.IE=!!t,this},y.wE=function(t){return this.mE.wE=!!t,this},r})},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(68),o=i(66),s=function(t){function e(i){var n=t.call(this,i)||this;return n.DONE=4,n.LOADING=3,n.HEADERS_RECEIVED=2,n.OPENED=1,n.UNSENT=0,n.mI=!1,n.id=e.Ul++,n}return n(e,t),e.prototype.send=function(){if(this.readyState!==this.OPENED)throw new Error("The object's state must be OPENED.");if(!this.sessionId){var t=Object.keys(e.EI);t.length>0&&(this.sessionId=e.EI[t[0]])}r.wI.II().TI(this,this.sessionId)},e.prototype.abort=function(){r.wI.II().abort(this,this.sessionId)},e}(o.SI);s.EI={},s.Ul=0,e.HiveRequest=s},function(t,e,i){"use strict";var n=i(0),r=i(9),o=i(5),s=o.Rt.wi,a=function(){function t(){}return t.Reporting=function(){return t.app="STATS",n.Framework.resolve(r.Qs.qs)},t.Jc=function(){return this.app},t.getVersion=function(){return this.version},t}();a.version=s,e.Hive=a},function(module,exports,__webpack_require__){var Thrift={RI:"0.9.2",bI:{AI:0,CI:1,BOOL:2,BYTE:3,kI:3,OI:4,_I:6,NI:8,DI:10,FI:11,LI:11,MI:12,BI:13,UI:14,xI:15,HI:16,qI:17},VI:{jI:1,GI:2,QI:3,KI:4},YI:function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e},zI:function(t,e,i){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.name=i||""}};Thrift.JI=function(t){this.message=t},Thrift.zI(Thrift.JI,Error,"TException"),Thrift.JI.prototype.WI=function(){return this.message},Thrift.XI={ZI:0,$I:1,ew:2,tw:3,rw:4,iw:5,nw:6,sw:7,ow:8,aw:9,hw:10},Thrift.cw=function(t,e){this.message=t,this.code="number"==typeof e?e:0},Thrift.zI(Thrift.cw,Thrift.JI,"TApplicationException"),Thrift.cw.prototype.read=function(t){for(;;){var e=t.uw();if(e.lw==Thrift.bI.AI)break;switch(e.pw){case 1:e.lw==Thrift.bI.FI?(e=t.fw(),this.message=e.value):e=t.dw(e.lw);break;case 2:e.lw==Thrift.bI.NI?(e=t.gw(),this.code=e.value):e=t.dw(e.lw);break;default:e=t.dw(e.lw)}t.vw()}t.yw()},Thrift.cw.prototype.write=function(t){t.mw("TApplicationException"),this.message&&(t.Ew("message",Thrift.bI.FI,1),t.Tw(this.WI()),t.Iw()),this.code&&(t.Ew("type",Thrift.bI.NI,2),t.ww(this.code),t.Iw()),t.Sw(),t.Rw()},Thrift.cw.prototype.bw=function(){return this.code},Thrift.Mr=Thrift.Pw=function(t,e){this.url=t,this.Aw=0,this.Cw=0,this.kw=e&&e.kw,this.Ow="",this._w=""},Thrift.Pw.prototype={Nw:function(){try{return new XMLHttpRequest}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}throw"Your browser doesn't support XHR."},flush:function(t,e){var i=this;if(t&&!e||void 0===this.url||""===this.url)return this.Ow;var n=this.Nw();if(n.overrideMimeType&&n.overrideMimeType("application/json"),e&&(n.onreadystatechange=function(){var t=e;return function(){4==this.readyState&&200==this.status&&(i.Dw(this.responseText),t())}}()),n.open("POST",this.url,!!t),n.send(this.Ow),!t||!e){if(4!=n.readyState)throw"encountered an unknown ajax ready state: "+n.readyState;if(200!=n.status)throw"encountered a unknown request status: "+n.status;this._w=n.responseText,this.Fw=this._w.length,this.Aw=this._w.length,this.Cw=0}},Lw:function(t,e,i,n){if("undefined"==typeof jQuery||void 0===jQuery.Mw)throw"Thrift.js requires jQuery 1.5+ to use asynchronous requests";var r=this;return jQuery.Bw({url:this.url,data:e,type:"POST",Uw:!1,contentType:"application/json",xw:"text thrift",Hw:{qw:function(e){return r.Dw(e),n.call(t)}},context:t,success:jQuery.Vw(i).pop()})},Dw:function(t){this._w=t,this.Fw=this._w.length,this.Aw=this._w.length,this.Cw=0},isOpen:function(){return!0},open:function(){},close:function(){},read:function(t){var e=this.Aw-this.Cw;if(0===e)return"";var i=t;e<t&&(i=e);var n=this.jw.substr(this.Cw,i);return this.Cw+=i,n},Gw:function(){return this._w},write:function(t){this.Ow=t},Qw:function(){return this.Ow}},Thrift.Kw=function(t){this.Yw(t)},Thrift.Kw.prototype={Yw:function(t){this.url=t,this.zw=null,this.callbacks=[],this.Jw=[],this.Ow="",this._w="",this.Ww=0,this.Xw=0},flush:function(t,e){var i=this;this.isOpen()?(this.zw.send(this.Ow),this.callbacks.push(function(){var t=e;return function(e){i.Dw(e),t()}}())):this.Jw.push({Zw:this.Ow,$w:e})},eS:function(){var t=this;this.Jw.length>0&&(this.Jw.forEach(function(e){this.zw.send(e.Zw),this.callbacks.push(function(){var i=e.$w;return function(e){t.Dw(e),i()}}())}),this.Jw=[])},tS:function(t){this.Yw(this.url)},rS:function(t){this.callbacks.length&&this.callbacks.shift()(t.data)},iS:function(t){console.log("Thrift WebSocket Error: "+t.toString()),this.zw.close()},Dw:function(t){this._w=t,this.Fw=this._w.length,this.Aw=this._w.length,this.Cw=0},isOpen:function(){return this.zw&&this.zw.readyState==this.zw.OPEN},open:function(){this.zw&&this.zw.readyState!=this.zw.CLOSED||(this.zw=new WebSocket(this.url),this.zw.onopen=this.eS.bind(this),this.zw.onmessage=this.rS.bind(this),this.zw.onerror=this.iS.bind(this),this.zw.onclose=this.tS.bind(this))},close:function(){this.zw.close()},read:function(t){var e=this.Aw-this.Cw;if(0===e)return"";var i=t;e<t&&(i=e);var n=this.jw.substr(this.Cw,i);return this.Cw+=i,n},Gw:function(){return this._w},write:function(t){this.Ow=t},Qw:function(){return this.Ow}},Thrift.nS=Thrift.sS=function(t){this.Pl=t},Thrift.sS.bI={},Thrift.sS.bI[Thrift.bI.BOOL]='"tf"',Thrift.sS.bI[Thrift.bI.BYTE]='"i8"',Thrift.sS.bI[Thrift.bI._I]='"i16"',Thrift.sS.bI[Thrift.bI.NI]='"i32"',Thrift.sS.bI[Thrift.bI.DI]='"i64"',Thrift.sS.bI[Thrift.bI.OI]='"dbl"',Thrift.sS.bI[Thrift.bI.MI]='"rec"',Thrift.sS.bI[Thrift.bI.FI]='"str"',Thrift.sS.bI[Thrift.bI.BI]='"map"',Thrift.sS.bI[Thrift.bI.xI]='"lst"',Thrift.sS.bI[Thrift.bI.UI]='"set"',Thrift.sS.oS={},Thrift.sS.oS.aS=Thrift.bI.BOOL,Thrift.sS.oS.hS=Thrift.bI.BYTE,Thrift.sS.oS.cS=Thrift.bI._I,Thrift.sS.oS.uS=Thrift.bI.NI,Thrift.sS.oS.lS=Thrift.bI.DI,Thrift.sS.oS.pS=Thrift.bI.OI,Thrift.sS.oS.fS=Thrift.bI.MI,Thrift.sS.oS.Lg=Thrift.bI.FI,Thrift.sS.oS.map=Thrift.bI.BI,Thrift.sS.oS.dS=Thrift.bI.xI,Thrift.sS.oS.set=Thrift.bI.UI,Thrift.sS.RI=1,Thrift.sS.prototype={gS:function(){return this.Pl},vS:function(t,e,i){this.yS=[],this.mS=[],this.yS.push([Thrift.sS.RI,'"'+t+'"',e,i])},ES:function(){var t=this.yS.pop();this.TS=this.yS.pop(),this.TS.push(t),this.IS="["+this.TS.join(",")+"]",this.Pl.write(this.IS)},mw:function(t){this.mS.push(this.yS.length),this.yS.push({})},Rw:function(){var t=this.mS.pop(),e=this.yS[t],i="{",n=!0;for(var r in e)n?n=!1:i+=",",i+=r+":"+e[r];i+="}",this.yS[t]=i},Ew:function(t,e,i){this.mS.push(this.yS.length),this.yS.push({wS:'"'+i+'"',SS:Thrift.sS.bI[e]})},Iw:function(){var t=this.yS.pop(),e=this.yS.pop();this.yS[this.yS.length-1][e.wS]="{"+e.SS+":"+t+"}",this.mS.pop()},Sw:function(){},RS:function(t,e,i){this.mS.push(this.yS.length),this.yS.push([Thrift.sS.bI[t],Thrift.sS.bI[e],0])},bS:function(){var t=this.mS.pop();if(t!=this.yS.length){(this.yS.length-t-1)%2!=0&&this.yS.push("");var e=(this.yS.length-t-1)/2;this.yS[t][this.yS[t].length-1]=e;for(var i="}",n=!0;this.yS.length>t+1;){var r=this.yS.pop(),o=this.yS.pop();n?n=!1:i=","+i,isNaN(o)||(o='"'+o+'"'),i=o+":"+r+i}i="{"+i,this.yS[t].push(i),this.yS[t]="["+this.yS[t].join(",")+"]"}},PS:function(t,e){this.mS.push(this.yS.length),this.yS.push([Thrift.sS.bI[t],e])},CS:function(){for(var t=this.mS.pop();this.yS.length>t+1;){var e=this.yS[t+1];this.yS.splice(t+1,1),this.yS[t].push(e)}this.yS[t]="["+this.yS[t].join(",")+"]"},kS:function(t,e){this.mS.push(this.yS.length),this.yS.push([Thrift.sS.bI[t],e])},OS:function(){for(var t=this.mS.pop();this.yS.length>t+1;){var e=this.yS[t+1];this.yS.splice(t+1,1),this.yS[t].push(e)}this.yS[t]="["+this.yS[t].join(",")+"]"},_S:function(t){this.yS.push(t?1:0)},NS:function(t){this.yS.push(t)},DS:function(t){this.yS.push(t)},ww:function(t){this.yS.push(t)},FS:function(t){this.yS.push(t)},LS:function(t){this.yS.push(t)},Tw:function(t){if(null===t)this.yS.push(null);else{for(var e="",i=0;i<t.length;i++){var n=t.charAt(i);e+='"'===n?'\\"':"\\"===n?"\\\\":"\b"===n?"\\b":"\f"===n?"\\f":"\n"===n?"\\n":"\r"===n?"\\r":"\t"===n?"\\t":n}this.yS.push('"'+e+'"')}},MS:function(t){this.Tw(t)},BS:function(){this.US=[],this.Cw=[],"undefined"!=typeof JSON&&"function"==typeof JSON.parse?this.xS=JSON.parse(this.Pl.Gw()):"undefined"!=typeof jQuery?this.xS=jQuery.HS(this.Pl.Gw()):this.xS=eval(this.Pl.Gw());var r={},version=this.xS.shift();if(version!=Thrift.sS.RI)throw"Wrong thrift protocol version: "+version;return r.qS=this.xS.shift(),r.VS=this.xS.shift(),r.jS=this.xS.shift(),this.US.push(this.xS.shift()),r},GS:function(){},QS:function(t){var e={};return e.qS="",this.US[this.US.length-1]instanceof Array&&this.US.push(this.US[this.US.length-1].shift()),e},yw:function(){this.US[this.US.length-2]instanceof Array&&this.US.pop()},uw:function(){var t={},e=-1,i=Thrift.bI.AI;for(var n in this.US[this.US.length-1])if(null!==n){e=parseInt(n,10),this.Cw.push(this.US.length);var r=this.US[this.US.length-1][e];delete this.US[this.US.length-1][e],this.US.push(r);break}if(-1!=e)for(var o in this.US[this.US.length-1])null!==Thrift.sS.oS[o]&&(i=Thrift.sS.oS[o],this.US[this.US.length-1]=this.US[this.US.length-1][o]);return t.qS="",t.lw=i,t.pw=e,t},vw:function(){for(var t=this.Cw.pop();this.US.length>t;)this.US.pop()},KS:function(){var t=this.US.pop(),e=t.shift();e instanceof Array&&(this.US.push(t),t=e,e=t.shift());var i={};return i.YS=Thrift.sS.oS[e],i.zS=Thrift.sS.oS[t.shift()],i.size=t.shift(),this.Cw.push(this.US.length),this.US.push(t.shift()),i},JS:function(){this.vw()},WS:function(){var t=this.US[this.US.length-1],e={};return e.XS=Thrift.sS.oS[t.shift()],e.size=t.shift(),this.Cw.push(this.US.length),this.US.push(t),e},ZS:function(){this.vw()},$S:function(t,e){return this.WS(t,e)},eR:function(){return this.ZS()},tR:function(){var t=this.gw();return null!==t&&"1"==t.value?t.value=!0:t.value=!1,t},rR:function(){return this.gw()},iR:function(){return this.gw()},gw:function(t){void 0===t&&(t=this.US[this.US.length-1]);var e={};if(t instanceof Array)0===t.length?e.value=void 0:e.value=t.shift();else if(t instanceof Object){for(var i in t)if(null!==i){this.US.push(t[i]),delete t[i],e.value=i;break}}else e.value=t,this.US.pop();return e},nR:function(){return this.gw()},sR:function(){return this.gw()},fw:function(){return this.gw()},oR:function(){return this.fw()},dw:function(t){var e,i;switch(t){case Thrift.bI.AI:return null;case Thrift.bI.BOOL:return this.tR();case Thrift.bI.BYTE:return this.rR();case Thrift.bI._I:return this.iR();case Thrift.bI.NI:return this.gw();case Thrift.bI.DI:return this.nR();case Thrift.bI.OI:return this.sR();case Thrift.bI.FI:return this.fw();case Thrift.bI.MI:for(this.QS();e=this.uw(),e.lw!=Thrift.bI.AI;)this.dw(e.lw),this.vw();return this.yw(),null;case Thrift.bI.BI:for(e=this.KS(),i=0;i<e.size;i++)i>0&&this.US.length>this.Cw[this.Cw.length-1]+1&&this.US.pop(),this.dw(e.YS),this.dw(e.zS);return this.JS(),null;case Thrift.bI.UI:for(e=this.$S(),i=0;i<e.size;i++)this.dw(e.XS);return this.eR(),null;case Thrift.bI.xI:for(e=this.WS(),i=0;i<e.size;i++)this.dw(e.XS);return this.ZS(),null}}},Thrift.aR=function(t,e,i,n){Thrift.sS.call(this,e,i,n),this.hR=t},Thrift.zI(Thrift.aR,Thrift.sS,"multiplexProtocol"),Thrift.aR.prototype.vS=function(t,e,i){e===Thrift.VI.jI||e===Thrift.VI.KI?Thrift.sS.prototype.vS.call(this,this.hR+":"+t,e,i):Thrift.sS.prototype.vS.call(this,t,e,i)},Thrift.cR=function(){this.uR=0},Thrift.cR.prototype.lR=function(t,e,i){e.vc&&(e=e.vc);var n=this;return e.prototype.pR=function(){return n.uR+=1,n.uR},new e(new Thrift.aR(t,i))},module.t=Thrift},function(t,e,i){"use strict";var n=i(10),r=i(25),o=r.sl,s=function(){function t(t,e,i,n,r,s,a,h){this.fR=h,this.url=t,this.dR=i,this.gR=e,this.vR=n,this.duration=r,this.bitrate=s,this.yR=a;var u=(this.fR?this.fR:this.url).replace(/http(s)?:\/\//,""),c=o.Vd(u).toString(o.Ed.Td);this.mR=c+"-"+this.vR+"-"+this.bitrate}return t.prototype.Yu=function(){return this.gR},t.prototype.ER=function(){return this.vR},t.prototype.TR=function(){return this.duration},t.prototype.IR=function(){return this.bitrate},t.prototype.$u=function(){return this.yR},t.prototype.wR=function(){return this.dR},t.prototype.zu=function(){return this.mR},t.prototype.Xu=function(){return this.url},t.prototype.toString=function(){return n.Ws[this.Yu()]+"-"+this.zu()},t}();e.SR=s},function(t,e,n){(function(t){var r,o;/**
 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
 * This version of ByteBuffer.js uses an ArrayBuffer as its backing buffer which is accessed through a DataView and is
 * compatible with modern browsers.
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ByteBuffer.js for details
 */
!function(s){"use strict";function a(t){function e(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function n(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+a.apply(String,t);t.length+arguments.length>1024&&(e.push(a.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}var r=function(t,e,i){if(void 0===t&&(t=r.RR),void 0===e&&(e=r.bR),void 0===i&&(i=r.PR),!i){if((t|=0)<0)throw RangeError("Illegal capacity");e=!!e,i=!!i}this.buffer=0===t?s:new ArrayBuffer(t),this.view=0===t?null:new DataView(this.buffer),this.offset=0,this.AR=-1,this.CR=t,this.kR=void 0!==e&&!!e,this.OR=!!i};r.VERSION="3.5.5",r._R=!0,r.NR=!1,r.RR=16,r.bR=r.NR,r.PR=!1,r.DR=t||null;var o=r.prototype,s=new ArrayBuffer(0),a=String.fromCharCode;r.FR=function(t,e,i){return new r(t,e,i)},r.concat=function(t,e,i,n){"boolean"!=typeof e&&"string"==typeof e||(n=i,i=e,e=void 0);for(var o,s=0,a=0,h=t.length;a<h;++a)r.LR(t[a])||(t[a]=r.wrap(t[a],e)),(o=t[a].CR-t[a].offset)>0&&(s+=o);if(0===s)return new r(0,i,n);var u,c=new r(s,i,n),f=new Uint8Array(c.buffer);for(a=0;a<h;)u=t[a++],(o=u.CR-u.offset)<=0||(f.set(new Uint8Array(u.buffer).subarray(u.offset,u.CR),c.offset),c.offset+=o);return c.CR=c.offset,c.offset=0,c},r.LR=function(t){return!0===(t&&t instanceof r)},r.type=function(){return ArrayBuffer},r.wrap=function(t,e,n,s){if("string"!=typeof e&&(s=n,n=e,e=void 0),"string"==typeof t)switch(void 0===e&&(e="utf8"),e){case"base64":return r.MR(t,n);case"hex":return r.BR(t,n);case"binary":return r.UR(t,n);case"utf8":return r.xR(t,n);case"debug":return r.HR(t,n);default:throw Error("Unsupported encoding: "+e)}if(null===t||"object"!=typeof t)throw TypeError("Illegal buffer");var a;if(r.LR(t))return a=o.clone.call(t),a.AR=-1,a;if(t instanceof Uint8Array)a=new r(0,n,s),t.length>0&&(a.buffer=t.buffer,a.offset=t.byteOffset,a.CR=t.byteOffset+t.length,a.view=t.length>0?new DataView(t.buffer):null);else if(t instanceof ArrayBuffer)a=new r(0,n,s),t.byteLength>0&&(a.buffer=t,a.offset=0,a.CR=t.byteLength,a.view=t.byteLength>0?new DataView(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");for(a=new r(t.length,n,s),a.CR=t.length,i=0;i<t.length;++i)a.view.setUint8(i,t[i])}return a},o.qR=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view.setInt8(e,t),i&&(this.offset+=1),this},o.NS=o.qR,o.VR=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view.getInt8(t);return e&&(this.offset+=1),i},o.rR=o.VR,o.jR=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view.setUint8(e,t),i&&(this.offset+=1),this},o.GR=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view.getUint8(t);return e&&(this.offset+=1),i},o.QR=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.view.setInt16(e,t,this.kR),i&&(this.offset+=2),this},o.KR=o.QR,o.YR=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=this.view.getInt16(t,this.kR);return e&&(this.offset+=2),i},o.zR=o.YR,o.JR=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.view.setUint16(e,t,this.kR),i&&(this.offset+=2),this},o.WR=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=this.view.getUint16(t,this.kR);return e&&(this.offset+=2),i},o.XR=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setInt32(e,t,this.kR),i&&(this.offset+=4),this},o.Yl=o.XR,o.ZR=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getInt32(t,this.kR);return e&&(this.offset+=4),i},o.$l=o.ZR,o.$R=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setUint32(e,t,this.kR),i&&(this.offset+=4),this},o.eb=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getUint32(t,this.kR);return e&&(this.offset+=4),i},t&&(o.tb=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"==typeof e)e=t.dp(e);else if("string"==typeof e)e=t.gp(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.dp(e):"string"==typeof e&&(e=t.gp(e)),i+=8;var r=this.buffer.byteLength;return i>r&&this.resize((r*=2)>i?r:i),i-=8,this.kR?(this.view.setInt32(i,e.low,!0),this.view.setInt32(i+4,e.high,!0)):(this.view.setInt32(i,e.high,!1),this.view.setInt32(i+4,e.low,!1)),n&&(this.offset+=8),this},o.rb=o.tb,o.ib=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=this.kR?new t(this.view.getInt32(e,!0),this.view.getInt32(e+4,!0),!1):new t(this.view.getInt32(e+4,!1),this.view.getInt32(e,!1),!1);return i&&(this.offset+=8),n},o.nb=o.ib,o.sb=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"==typeof e)e=t.dp(e);else if("string"==typeof e)e=t.gp(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.dp(e):"string"==typeof e&&(e=t.gp(e)),i+=8;var r=this.buffer.byteLength;return i>r&&this.resize((r*=2)>i?r:i),i-=8,this.kR?(this.view.setInt32(i,e.low,!0),this.view.setInt32(i+4,e.high,!0)):(this.view.setInt32(i,e.high,!1),this.view.setInt32(i+4,e.low,!1)),n&&(this.offset+=8),this},o.ob=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=this.kR?new t(this.view.getInt32(e,!0),this.view.getInt32(e+4,!0),!0):new t(this.view.getInt32(e+4,!1),this.view.getInt32(e,!1),!0);return i&&(this.offset+=8),n}),o.ab=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setFloat32(e,t,this.kR),i&&(this.offset+=4),this},o.hb=o.ab,o.cb=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getFloat32(t,this.kR);return e&&(this.offset+=4),i},o.ub=o.cb,o.lb=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=8,this.view.setFloat64(e,t,this.kR),i&&(this.offset+=8),this},o.LS=o.lb,o.pb=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.view.getFloat64(t,this.kR);return e&&(this.offset+=8),i},o.sR=o.pb,r.fb=5,r.gb=function(t){return t>>>=0,t<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},r.vb=function(t){return((t|=0)<<1^t>>31)>>>0},r.yb=function(t){return t>>>1^-(1&t)|0},o.mb=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,o=r.gb(t);e+=o;var s=this.buffer.byteLength;return e>s&&this.resize((s*=2)>e?s:e),e-=o,this.view.setUint8(e,n=128|t),t>>>=0,t>=128?(n=t>>7|128,this.view.setUint8(e+1,n),t>=16384?(n=t>>14|128,this.view.setUint8(e+2,n),t>=1<<21?(n=t>>21|128,this.view.setUint8(e+3,n),t>=1<<28?(this.view.setUint8(e+4,t>>28&15),o=5):(this.view.setUint8(e+3,127&n),o=4)):(this.view.setUint8(e+2,127&n),o=3)):(this.view.setUint8(e+1,127&n),o=2)):(this.view.setUint8(e,127&n),o=1),i?(this.offset+=o,this):o},o.Eb=function(t,e){return this.mb(r.vb(t),e)},o.Tb=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n,r=0,o=0;do{if(n=t+r,!this.OR&&n>this.CR){var s=Error("Truncated");throw s.Ib=!0,s}i=this.view.getUint8(n),r<5&&(o|=(127&i)<<7*r>>>0),++r}while(128==(128&i));return o|=0,e?(this.offset+=r,o):{value:o,length:r}},o.wb=function(t){var e=this.Tb(t);return"object"==typeof e?e.value=r.yb(e.value):e=r.yb(e),e},t&&(r.Sb=10,r.Rb=function(e){"number"==typeof e?e=t.dp(e):"string"==typeof e&&(e=t.gp(e));var i=e.bb()>>>0,n=e.Pb(28).bb()>>>0,r=e.Pb(56).bb()>>>0;return 0==r?0==n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10},r.Ab=function(e){return"number"==typeof e?e=t.dp(e,!1):"string"==typeof e?e=t.gp(e,!1):!1!==e.Cb&&(e=e.kb()),e.shiftLeft(1).zd(e._b(63)).Ob()},r.Nb=function(e){return"number"==typeof e?e=t.dp(e,!1):"string"==typeof e?e=t.gp(e,!1):!1!==e.Cb&&(e=e.kb()),e.Pb(1).zd(e.Db(t.ONE).kb().Rp()).kb()},o.Fb=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"==typeof e)e=t.dp(e);else if("string"==typeof e)e=t.gp(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.dp(e,!1):"string"==typeof e?e=t.gp(e,!1):!1!==e.Cb&&(e=e.kb());var o=r.Rb(e),s=e.bb()>>>0,a=e.Pb(28).bb()>>>0,h=e.Pb(56).bb()>>>0;i+=o;var u=this.buffer.byteLength;switch(i>u&&this.resize((u*=2)>i?u:i),i-=o,o){case 10:this.view.setUint8(i+9,h>>>7&1);case 9:this.view.setUint8(i+8,9!==o?128|h:127&h);case 8:this.view.setUint8(i+7,8!==o?a>>>21|128:a>>>21&127);case 7:this.view.setUint8(i+6,7!==o?a>>>14|128:a>>>14&127);case 6:this.view.setUint8(i+5,6!==o?a>>>7|128:a>>>7&127);case 5:this.view.setUint8(i+4,5!==o?128|a:127&a);case 4:this.view.setUint8(i+3,4!==o?s>>>21|128:s>>>21&127);case 3:this.view.setUint8(i+2,3!==o?s>>>14|128:s>>>14&127);case 2:this.view.setUint8(i+1,2!==o?s>>>7|128:s>>>7&127);case 1:this.view.setUint8(i,1!==o?128|s:127&s)}return n?(this.offset+=o,this):o},o.Lb=function(t,e){return this.Fb(r.Ab(t),e)},o.Mb=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,r=0,o=0,s=0,a=0;if(a=this.view.getUint8(e++),r=127&a,128&a&&(a=this.view.getUint8(e++),r|=(127&a)<<7,128&a&&(a=this.view.getUint8(e++),r|=(127&a)<<14,128&a&&(a=this.view.getUint8(e++),r|=(127&a)<<21,128&a&&(a=this.view.getUint8(e++),o=127&a,128&a&&(a=this.view.getUint8(e++),o|=(127&a)<<7,128&a&&(a=this.view.getUint8(e++),o|=(127&a)<<14,128&a&&(a=this.view.getUint8(e++),o|=(127&a)<<21,128&a&&(a=this.view.getUint8(e++),s=127&a,128&a&&(a=this.view.getUint8(e++),s|=(127&a)<<7,128&a))))))))))throw Error("Buffer overrun");var h=t.Ay(r|o<<28,o>>>4|s<<24,!1);return i?(this.offset=e,h):{value:h,length:e-n}},o.Bb=function(e){var i=this.Mb(e);return i&&i.value instanceof t?i.value=r.Nb(i.value):i=r.Nb(i),i}),o.zl=function(t,i){var n=void 0===i;n&&(i=this.offset);var r,o=t.length;if(!this.OR){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(r=0;r<o;++r)if(0===t.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}o=u.Ub(e(t))[1],i+=o+1;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=o+1,u.xb(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),this.view.setUint8(i++,0),n?(this.offset=i,this):o},o.tp=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=t,o=-1;return u.Hb(function(){if(0===o)return null;if(t>=this.CR)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.CR);return 0===(o=this.view.getUint8(t++))?null:o}.bind(this),i=n(),!0),e?(this.offset=t,i()):{qb:i(),length:t-r}},o.Vb=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,o=i;r=u.Ub(e(t),this.OR)[1],i+=4+r;var s=this.buffer.byteLength;if(i>s&&this.resize((s*=2)>i?s:i),i-=4+r,this.view.setUint32(i,r,this.kR),i+=4,u.xb(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),i!==o+4+r)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+4+r));return n?(this.offset=i,this):i-o},o.jb=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i,r=0,o=t;r=this.view.getUint32(t,this.kR),t+=4;var s,a=t+r;return u.Hb(function(){return t<a?this.view.getUint8(t++):null}.bind(this),s=n(),this.OR),i=s(),e?(this.offset=t,i):{qb:i,length:t-o}},r.Gb="c",r.Qb="b",o.Kb=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,o=i;r=u.Ub(e(t))[1],i+=r;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=r,u.xb(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),n?(this.offset=i,this):i-o},o.Tw=o.Kb,r.Yb=function(t){return u.Ub(e(t))[0]},r.zb=function(t){return u.Ub(e(t))[1]},o.Jb=function(t,e,i){"number"==typeof e&&(i=e,e=void 0);var o=void 0===i;if(o&&(i=this.offset),void 0===e&&(e=r.Gb),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var s,a=0,h=i;if(e===r.Gb){if(s=n(),u.Wb(function(){return a<t&&i<this.CR?this.view.getUint8(i++):null}.bind(this),function(t){++a,u.Xb(t,s)}.bind(this)),a!==t)throw RangeError("Illegal range: Truncated data, "+a+" == "+t);return o?(this.offset=i,s()):{qb:s(),length:i-h}}if(e===r.Qb){if(!this.OR){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+t+") <= "+this.buffer.byteLength)}var c=i+t;if(u.Hb(function(){return i<c?this.view.getUint8(i++):null}.bind(this),s=n(),this.OR),i!==c)throw RangeError("Illegal range: Truncated data, "+i+" == "+c);return o?(this.offset=i,s()):{qb:s(),length:i-h}}throw TypeError("Unsupported metrics: "+e)},o.fw=o.Jb,o.Zb=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,s,a=i;o=u.Ub(e(t),this.OR)[1],s=r.gb(o),i+=s+o;var h=this.buffer.byteLength;if(i>h&&this.resize((h*=2)>i?h:i),i-=s+o,i+=this.mb(o,i),u.xb(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),i!==a+o+s)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+o+s));return n?(this.offset=i,this):i-a},o.$b=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=this.Tb(t),o=t;t+=r.length,r=r.value;var s=t+r,a=n();return u.Hb(function(){return t<s?this.view.getUint8(t++):null}.bind(this),a,this.OR),i=a(),e?(this.offset=t,i):{qb:i,length:t-o}},o.append=function(t,e,i){"number"!=typeof e&&"string"==typeof e||(i=e,e=void 0);var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}t instanceof r||(t=r.wrap(t,e));var o=t.CR-t.offset;if(o<=0)return this;i+=o;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=o,new Uint8Array(this.buffer,i).set(new Uint8Array(t.buffer).subarray(t.offset,t.CR)),t.offset+=o,n&&(this.offset+=o),this},o.eP=function(t,e){return t.append(this,e),this},o.assert=function(t){return this.OR=!t,this},o.tP=function(){return this.buffer.byteLength},o.clear=function(){return this.offset=0,this.CR=this.buffer.byteLength,this.AR=-1,this},o.clone=function(t){var e=new r(0,this.kR,this.OR);if(t){var i=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(i).set(this.buffer),e.buffer=i,e.view=new DataView(i)}else e.buffer=this.buffer,e.view=this.view;return e.offset=this.offset,e.AR=this.AR,e.CR=this.CR,e},o.compact=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var i=e-t;if(0===i)return this.buffer=s,this.view=null,this.AR>=0&&(this.AR-=t),this.offset=0,this.CR=0,this;var n=new ArrayBuffer(i);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t,e)),this.buffer=n,this.view=new DataView(n),this.AR>=0&&(this.AR-=t),this.offset=0,this.CR=i,this},o.rP=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return new r(0,this.kR,this.OR);var i=e-t,n=new r(i,this.kR,this.OR);return n.offset=0,n.CR=i,n.AR>=0&&(n.AR-=t),this.Ap(n,0,t,e),n},o.Ap=function(t,e,i,n){var o,s;if(!this.OR&&!r.LR(t))throw TypeError("Illegal target: Not a ByteBuffer");if(e=(s=void 0===e)?t.offset:0|e,i=(o=void 0===i)?this.offset:0|i,n=void 0===n?this.CR:0|n,e<0||e>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+e+" <= "+t.buffer.byteLength);if(i<0||n>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+i+" <= "+this.buffer.byteLength);var a=n-i;return 0===a?t:(t.iP(e+a),new Uint8Array(t.buffer).set(new Uint8Array(this.buffer).subarray(i,n),e),o&&(this.offset+=a),s&&(t.offset+=a),this)},o.iP=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},o.fill=function(t,e,i){var n=void 0===e;if(n&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),void 0===e&&(e=this.offset),void 0===i&&(i=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(e>=i)return this;for(;e<i;)this.view.setUint8(e++,t);return n&&(this.offset=e),this},o.Jl=function(){return this.CR=this.offset,this.offset=0,this},o.mark=function(t){if(t=void 0===t?this.offset:t,!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.AR=t,this},o.order=function(t){if(!this.OR&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.kR=!!t,this},o.nP=function(t){return this.kR=void 0===t||!!t,this},o.sP=function(t){return this.kR=void 0!==t&&!t,this},o.oP=function(t,e,i){"number"!=typeof e&&"string"==typeof e||(i=e,e=void 0);var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}t instanceof r||(t=r.wrap(t,e));var o=t.CR-t.offset;if(o<=0)return this;var s,a=o-i;if(a>0){var h=new ArrayBuffer(this.buffer.byteLength+a);s=new Uint8Array(h),s.set(new Uint8Array(this.buffer).subarray(i,this.buffer.byteLength),o),this.buffer=h,this.view=new DataView(h),this.offset+=a,this.AR>=0&&(this.AR+=a),this.CR+=a,i+=a}else s=new Uint8Array(this.buffer);return s.set(new Uint8Array(t.buffer).subarray(t.offset,t.CR),i-o),t.offset=t.CR,n&&(this.offset-=o),this},o.aP=function(t,e){return t.oP(this,e),this},o.hP=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.cP(!0))},o.uP=function(){return this.CR-this.offset},o.reset=function(){return this.AR>=0?(this.offset=this.AR,this.AR=-1):this.offset=0,this},o.resize=function(t){if(!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if((t|=0)<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e,this.view=new DataView(e)}return this},o.reverse=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(t,e)),this.view=new DataView(this.buffer),this)},o.dw=function(t){if(!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.OR&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},o.slice=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i=this.clone();return i.offset=t,i.CR=e,i},o.lP=function(t){var e=this.offset,i=this.CR;if(e>i){var n=e;e=i,i=n}if(!this.OR){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(!t&&0===e&&i===this.buffer.byteLength)return this.buffer;if(e===i)return s;var r=new ArrayBuffer(i-e);return new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(e,i),0),r},o.pn=o.lP,o.toString=function(t,e,i){if(void 0===t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.AR+",limit="+this.CR+",capacity="+this.tP()+")";switch("number"==typeof t&&(t="utf8",e=t,i=e),t){case"utf8":return this.pP(e,i);case"base64":return this.fP(e,i);case"hex":return this.dP(e,i);case"binary":return this.gP(e,i);case"debug":return this.cP();case"columns":return this.vP();default:throw Error("Unsupported encoding: "+t)}};var h=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],i=[],n=0,r=e.length;n<r;++n)i[e[n]]=n;return t.encode=function(t,i){for(var n,r;null!==(n=t());)i(e[n>>2&63]),r=(3&n)<<4,null!==(n=t())?(r|=n>>4&15,i(e[63&(r|n>>4&15)]),r=(15&n)<<2,null!==(n=t())?(i(e[63&(r|n>>6&3)]),i(e[63&n])):(i(e[63&r]),i(61))):(i(e[63&r]),i(61),i(61))},t.decode=function(t,e){function n(t){throw Error("Illegal character code: "+t)}for(var r,o,s;null!==(r=t());)if(o=i[r],void 0===o&&n(r),null!==(r=t())&&(s=i[r],void 0===s&&n(r),e(o<<2>>>0|(48&s)>>4),null!==(r=t()))){if(void 0===(o=i[r])){if(61===r)break;n(r)}if(e((15&s)<<4>>>0|(60&o)>>2),null!==(r=t())){if(void 0===(s=i[r])){if(61===r)break;n(r)}e((3&o)<<6>>>0|s)}}},t.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)},t}();o.fP=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;return h.encode(function(){return t<e?this.view.getUint8(t++):null}.bind(this),i=n()),i()},r.MR=function(t,i,n){if(!n){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%4!=0)throw TypeError("Illegal str: Length not a multiple of 4")}var o=new r(t.length/4*3,i,n),s=0;return h.decode(e(t),function(t){o.view.setUint8(s++,t)}),o.CR=s,o},r.btoa=function(t){return r.UR(t).fP()},r.atob=function(t){return r.MR(t).gP()},o.gP=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.CR:e,!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return"";for(var i=[],n=[];t<e;)i.push(this.view.getUint8(t++)),i.length>=1024&&(n.push(String.fromCharCode.apply(String,i)),i=[]);return n.join("")+String.fromCharCode.apply(String,i)},r.UR=function(t,e,i){if(!i&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");for(var n,o=0,s=t.length,a=new r(s,e,i);o<s;){if(n=t.charCodeAt(o),!i&&n>255)throw RangeError("Illegal charCode at "+o+": 0 <= "+n+" <= 255");a.view.setUint8(o++,n)}return a.CR=s,a},o.cP=function(t){for(var e,i=-1,n=this.buffer.byteLength,r="",o="",s="";i<n;){if(-1!==i&&(e=this.view.getUint8(i),r+=e<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(o+=e>32&&e<127?String.fromCharCode(e):".")),++i,t&&i>0&&i%16==0&&i!==n){for(;r.length<51;)r+=" ";s+=r+o+"\n",r=o=""}i===this.offset&&i===this.CR?r+=i===this.AR?"!":"|":i===this.offset?r+=i===this.AR?"[":"<":i===this.CR?r+=i===this.AR?"]":">":r+=i===this.AR?"'":t||0!==i&&i!==n?" ":""}if(t&&" "!==r){for(;r.length<51;)r+=" ";s+=r+o+"\n"}return t?s:r},r.HR=function(t,e,i){for(var n,o,s=t.length,a=new r((s+1)/3|0,e,i),h=0,u=0,c=!1,f=!1,l=!1,p=!1,d=!1;h<s;){switch(n=t.charAt(h++)){case"!":if(!i){if(f||l||p){d=!0;break}f=l=p=!0}a.offset=a.AR=a.CR=u,c=!1;break;case"|":if(!i){if(f||p){d=!0;break}f=p=!0}a.offset=a.CR=u,c=!1;break;case"[":if(!i){if(f||l){d=!0;break}f=l=!0}a.offset=a.AR=u,c=!1;break;case"<":if(!i){if(f){d=!0;break}f=!0}a.offset=u,c=!1;break;case"]":if(!i){if(p||l){d=!0;break}p=l=!0}a.CR=a.AR=u,c=!1;break;case">":if(!i){if(p){d=!0;break}p=!0}a.CR=u,c=!1;break;case"'":if(!i){if(l){d=!0;break}l=!0}a.AR=u,c=!1;break;case" ":c=!1;break;default:if(!i&&c){d=!0;break}if(o=parseInt(n+t.charAt(h++),16),!i&&(isNaN(o)||o<0||o>255))throw TypeError("Illegal str: Not a debug encoded string");a.view.setUint8(u++,o),c=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+h)}if(!i){if(!f||!p)throw TypeError("Illegal str: Missing offset or limit");if(u<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+s)}return a},o.dP=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.CR:e,!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var i,n=new Array(e-t);t<e;)i=this.view.getUint8(t++),i<16?n.push("0",i.toString(16)):n.push(i.toString(16));return n.join("")},r.BR=function(t,e,i){if(!i){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var n,o=t.length,s=new r(o/2|0,e),a=0,h=0;a<o;a+=2){if(n=parseInt(t.substring(a,a+2),16),!i&&(!isFinite(n)||n<0||n>255))throw TypeError("Illegal str: Contains non-hex characters");s.view.setUint8(h++,n)}return s.CR=h,s};var u=function(){var t={};return t.yP=1114111,t.mP=function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<128?e(127&i):i<2048?(e(i>>6&31|192),e(63&i|128)):i<65536?(e(i>>12&15|224),e(i>>6&63|128),e(63&i|128)):(e(i>>18&7|240),e(i>>12&63|128),e(i>>6&63|128),e(63&i|128)),i=null},t.Wb=function(t,e){for(var i,n,r,o,s=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.Hn=t,e};null!==(i=t());)if(0==(128&i))e(i);else if(192==(224&i))null===(n=t())&&s([i,n]),e((31&i)<<6|63&n);else if(224==(240&i))(null===(n=t())||null===(r=t()))&&s([i,n,r]),e((15&i)<<12|(63&n)<<6|63&r);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=t())||null===(r=t())||null===(o=t()))&&s([i,n,r,o]),e((7&i)<<18|(63&n)<<12|(63&r)<<6|63&o)}},t.EP=function(t,e){for(var i,n=null;null!==(i=null!==n?n:t());)i>=55296&&i<=57343&&null!==(n=t())&&n>=56320&&n<=57343?(e(1024*(i-55296)+n-56320+65536),n=null):e(i);null!==n&&e(n)},t.Xb=function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<=65535?e(i):(i-=65536,e(55296+(i>>10)),e(i%1024+56320)),i=null},t.xb=function(e,i){t.EP(e,function(e){t.mP(e,i)})},t.Hb=function(e,i){t.Wb(e,function(e){t.Xb(e,i)})},t.TP=function(t){return t<128?1:t<2048?2:t<65536?3:4},t.IP=function(e){for(var i,n=0;null!==(i=e());)n+=t.TP(i);return n},t.Ub=function(e){var i=0,n=0;return t.EP(e,function(e){++i,n+=t.TP(e)}),[i,n]},t}();return o.pP=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;try{u.Hb(function(){return t<e?this.view.getUint8(t++):null}.bind(this),i=n())}catch(i){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return i()},r.xR=function(t,i,n){if(!n&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var o=new r(u.Ub(e(t),!0)[1],i,n),s=0;return u.xb(e(t),function(t){o.view.setUint8(s++,t)}),o.CR=s,o},r}"object"==typeof t&&t&&"object"==typeof e&&e?t.t=function(){var t;try{t=n(90)}catch(t){}return a(t)}():(r=[n(91)],void 0!==(o=function(t){return a(t)}.apply(e,r))&&(t.t=o))}()}).call(e,n(58)(t))},function(t,e,i){"use strict";var n=i(34);t.t=Object,Object.empty=Object.freeze(Object.create(null)),Object.Jo=function(t){return Object(t)===t},Object.wP=function(t){return t&&"function"==typeof t.valueOf&&(t=t.valueOf()),t};var r=new n;Object.hash=function(t){return t&&"function"==typeof t.hash?""+t.hash():Object(t)===t?(r.has(t)||r.set(t,Math.random().toString(36).slice(2)),r.get(t)):""+t};var o=Object.prototype.hasOwnProperty;Object.SP=function(t,e){return o.call(t,e)},Object.has=function(t,e){if("object"!=typeof t)throw new Error("Object.has can't accept non-object: "+typeof t);if(t&&"function"==typeof t.has)return t.has(e);if("string"==typeof e)return e in t&&t[e]!==Object.prototype[e];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(t,e,i){if("object"!=typeof t)throw new Error("Object.get can't accept non-object: "+typeof t);return t&&"function"==typeof t.get?t.get(e,i):Object.has(t,e)?t[e]:i},Object.set=function(t,e,i){t&&"function"==typeof t.set?t.set(e,i):t[e]=i},Object.addEach=function(t,e){if(e)if("function"!=typeof e.forEach||e.hasOwnProperty("forEach"))if("number"==typeof e.length)for(var i=0;i<e.length;i++)t[i]=e[i];else Object.keys(e).forEach(function(i){t[i]=e[i]});else!0===e.isMap?e.forEach(function(e,i){t[i]=e}):e.forEach(function(e){t[e[0]]=e[1]});return t},Object.forEach=function(t,e,i){for(var n,r=Object.keys(t),o=0;n=r[o];o++)e.call(i,t[n],n,t)},Object.map=function(t,e,i){for(var n,r=Object.keys(t),o=0,s=[];n=r[o];o++)s.push(e.call(i,t[n],n,t));return s},Object.values=function(t){return Object.map(t,Function.identity)},Object.concat=function(){for(var t={},e=0;e<arguments.length;e++)Object.addEach(t,arguments[e]);return t},Object.from=Object.concat,Object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!==t&&e!==e},Object.ae=function(t,e,i,r){if(i=i||Object.ae,t=Object.wP(t),e=Object.wP(e),t===e)return!0;if(Object.Jo(t)){if(r=r||new n,r.has(t))return!0;r.set(t,!0)}if(Object.Jo(t)&&"function"==typeof t.ae)return t.ae(e,i,r);if(Object.Jo(e)&&"function"==typeof e.ae)return e.ae(t,i,r);if(Object.Jo(t)&&Object.Jo(e)&&Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){for(var o in t)if(!i(t[o],e[o],i,r))return!1;for(var o in e)if(!(o in t&&i(e[o],t[o],i,r)))return!1;return!0}return t!==t&&e!==e||(!t||!e)&&t===e},Object.mo=function(t,e){if(t=Object.wP(t),e=Object.wP(e),t===e)return 0;var i=typeof t,n=typeof e;return"number"===i&&"number"===n?t-e:"string"===i&&"string"===n?t<e?-1/0:1/0:t&&"function"==typeof t.mo?t.mo(e):e&&"function"==typeof e.mo?-e.mo(t):0},Object.clone=function(t,e,i){if(t=Object.wP(t),i=i||new n,void 0===e)e=1/0;else if(0===e)return t;if(Object.Jo(t)){if(!i.has(t))if(t&&"function"==typeof t.clone)i.set(t,t.clone(e,i));else{var r=Object.getPrototypeOf(t);if(null!==r&&r!==Object.prototype)throw new Error("Can't clone "+t);var o=Object.create(r);i.set(t,o);for(var s in t)o[s]=Object.clone(t[s],e-1,i)}return i.get(t)}return t},Object.clear=function(t){if(t&&"function"==typeof t.clear)t.clear();else for(var e=Object.keys(t),i=e.length;i;)i--,delete t[e[i]];return t}},function(t,e){!function(){"use strict";function e(t){t.RP&&t.RP(e)}function i(t){return!(t.substr(0,p.length)==p&&"___"===t.substr(t.length-3))}function n(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[d];if(e&&e.key===t)return e;if(l(t)){e={key:t};try{return f(t,d,{value:e,Ui:!1,l:!1,u:!1}),e}catch(t){return}}}function r(t){return t.prototype=null,Object.freeze(t)}function o(){w||"undefined"==typeof console||(w=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.bP=e);var s=!1;if("function"==typeof WeakMap){var a=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var h=new a,u=Object.freeze({});if(h.set(u,1),1===h.get(u))return void(t.t=WeakMap);s=!0}}var c=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),f=Object.defineProperty,l=Object.isExtensible,p="weakmap:",d=p+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var v=new ArrayBuffer(25),g=new Uint8Array(v);crypto.getRandomValues(g),d=p+"rand:"+Array.prototype.map.call(g,function(t){return(t%36).toString(36)}).join("")+"___"}if(f(Object,"getOwnPropertyNames",{value:function(t){return c(t).filter(i)}}),"getPropertyNames"in Object){var y=Object.PP;f(Object,"getPropertyNames",{value:function(t){return y(t).filter(i)}})}!function(){var t=Object.freeze;f(Object,"freeze",{value:function(e){return n(e),t(e)}});var e=Object.seal;f(Object,"seal",{value:function(t){return n(t),e(t)}});var i=Object.preventExtensions;f(Object,"preventExtensions",{value:function(t){return n(t),i(t)}})}();var w=!1,m=0,b=function(){function t(t,e){var i,r=n(t);return r?u in r?r[u]:e:(i=a.indexOf(t),i>=0?h[i]:e)}function e(t){var e=n(t);return e?u in e:a.indexOf(t)>=0}function i(t,e){var i,r=n(t);return r?r[u]=e:(i=a.indexOf(t),i>=0?h[i]=e:(i=a.length,h[i]=e,a[i]=t)),this}function s(t){var e,i,r=n(t);return r?u in r&&delete r[u]:!((e=a.indexOf(t))<0||(i=a.length-1,a[e]=void 0,h[e]=h[i],a[e]=a[i],a.length=i,h.length=i,0))}this instanceof b||o();var a=[],h=[],u=m++;return Object.create(b.prototype,{AP:{value:r(t)},CP:{value:r(e)},kP:{value:r(i)},OP:{value:r(s)}})};b.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.AP(t,e)},Ui:!0,u:!0},has:{value:function(t){return this.CP(t)},Ui:!0,u:!0},set:{value:function(t,e){return this.kP(t,e)},Ui:!0,u:!0},delete:{value:function(t){return this.OP(t)},Ui:!0,u:!0}}),"function"==typeof a?function(){function i(){function t(t,e){return c?u.has(t)?u.get(t):c.AP(t,e):u.get(t,e)}function i(t){return u.has(t)||!!c&&c.CP(t)}function n(t){var e=!!u.delete(t);return c?c.OP(t)||e:e}this instanceof b||o();var h,u=new a,c=void 0,f=!1;return h=s?function(t,e){return u.set(t,e),u.has(t)||(c||(c=new b),c.set(t,e)),this}:function(t,e){if(f)try{u.set(t,e)}catch(i){c||(c=new b),c.kP(t,e)}else u.set(t,e);return this},Object.create(b.prototype,{AP:{value:r(t)},CP:{value:r(i)},kP:{value:r(h)},OP:{value:r(n)},RP:{value:r(function(t){if(t!==e)throw new Error("bogus call to permitHostObjects___");f=!0})}})}s&&"undefined"!=typeof Proxy&&(Proxy=void 0),i.prototype=b.prototype,t.t=i,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,l:!1,u:!0,Ui:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.t=b)}}()},function(t,e,i){"use strict";function n(){throw new Error("Can't construct. RangeChanges is a mixin.")}var r=i(34),o=i(47),s=new r;t.t=n,n.prototype._P=function(){return s.has(this)||s.set(this,o()),s.get(this)},n.prototype.NP=function(t){var e=this._P();return t=t||"",e.has(t)||e.set(t,{ci:!1,Mo:[],Lo:[]}),e.get(t)},n.prototype.DP=function(t,e,i){!this.Ho&&this.xo&&this.xo();var n,r=this.NP(e);n=i?r.Lo:r.Mo,n.push(t),Object.defineProperty(this,"dispatchesRangeChanges",{value:!0,Ui:!0,u:!0,l:!1});var o=this;return function(){o&&(o.FP(t,e,i),o=null)}},n.prototype.FP=function(t,e,i){var n,r=this.NP(e);n=i?r.Lo:r.Mo;var o=n.lastIndexOf(t);if(-1===o)throw new Error("Can't remove range change listener: does not exist: token "+JSON.stringify(e));n.splice(o,1)},n.prototype.LP=function(t,e,i,n){var r="Range"+(n?"WillChange":"Change");this._P().forEach(function(o,s){if(!o.ci){o.ci=!0;var a;a=n?o.Lo:o.Mo;var h="handle"+(s.slice(0,1).toUpperCase()+s.slice(1))+r;try{a.slice().forEach(function(r){if(!(a.indexOf(r)<0))if(r[h])r[h](t,e,i,this,n);else{if(!r.call)throw new Error("Handler "+r+" has no method "+h+" and is not callable");r.call(this,t,e,i,this,n)}},this)}finally{o.ci=!1}}},this)},n.prototype.MP=function(t,e){return this.DP(t,e,!0)},n.prototype.BP=function(t,e){return this.FP(t,e,!0)},n.prototype.UP=function(t,e,i){return this.LP(t,e,i,!0)}},function(t,e){function i(){throw new Error("Can't construct. GenericSet is a mixin.")}t.t=i,i.prototype.xP=!0,i.prototype.HP=function(t){var e=this.de(this);return e.addEach(t),e},i.prototype.qP=function(t){return this.de(this.filter(function(e){return t.has(e)}))},i.prototype.VP=function(t){var e=this.de(this);return e.do(t),e},i.prototype.jP=function(t){var e=this.HP(t),i=this.qP(t);return e.VP(i)},i.prototype.GP=function(t){return+this.delete(t)},i.prototype.ae=function(t,e){var i=this;return t&&"function"==typeof t.reduce&&this.length===t.length&&t.reduce(function(t,n){return t&&i.has(n,e)},!0)},i.prototype.toJSON=function(){return this.toArray()},i.prototype.contains=function(t){return this.has(t)},i.prototype.remove=function(t){return this.delete(t)},i.prototype.toggle=function(t){this.has(t)?this.delete(t):this.add(t)}},function(t,e,i){var n,n;!function(e){t.t=function(){return function t(e,i,r){function o(a,h){if(!i[a]){if(!e[a]){var u="function"==typeof n&&n;if(!h&&u)return n(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=i[a]={t:{}};e[a][0].call(f.t,function(t){return o(e[a][1][t]||t)},f,f.t,t,e,i,r)}return i[a].t}for(var s="function"==typeof n&&n,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,i){var n=t("./kernel");i.O=n.O;var r=t("./type_binding");i.QP=r.QP;var o=t("./type_binding_scope");i.KP=o.KP},{"./kernel":2,"./type_binding":4,"./type_binding_scope":5}],2:[function(t,e,i){var n=t("./type_binding_scope"),r=t("./lookup"),o=function(){function t(){this.YP=new r.zP}return t.prototype.bind=function(t){this.YP.add(t.JP,t)},t.prototype.WP=function(t){try{this.YP.remove(t)}catch(e){throw new Error("Could not resolve service "+t)}},t.prototype.k=function(){this.YP=new r.zP},t.prototype.resolve=function(t){var e;if(!this.YP.XP(t))return null;e=this.YP.get(t);var i=e[0];if(i.scope===n.KP.ZP&&null!==i.Uw)return i.Uw;var r=this.$P(i.eA);return i.Uw=r,r},t.prototype.tA=function(t){var e,i,n,r,o,s;return o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,s=/([^\s,]+)/g,e=t.toString().replace(o,""),i=e.indexOf("(")+1,n=e.indexOf(")"),r="function"==typeof Map&&-1!==e.indexOf("class")&&-1===e.indexOf("constructor")?null:e.slice(i,n).match(s),null===r&&(r=[]),r},t.prototype.$P=function(t){var e=this.tA(t);if(0===e.length)return new t;for(var i=[],n=null,r=0;r<e.length;r++){var o=e[r];n=this.resolve(o),i.push(n)}return this.rA(t,i)},t.prototype.rA=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(e)))},t}();i.O=o},{"./lookup":3,"./type_binding_scope":5}],3:[function(t,e,i){var n=function(){function t(t,e){this.key=t,this.value=new Array,this.value.push(e)}return t}(),r=function(){function t(){this.iA=new Array}return t.prototype.nA=function(t){for(var e=-1,i=0;i<this.iA.length;i++)this.iA[i].key===t&&(e=i);return e},t.prototype.add=function(t,e){if(null===t||void 0===t)throw new Error("Argument Null");if(null===e||void 0===e)throw new Error("Argument Null");var i=this.nA(t);if(-1!==i){var r=this.iA[i];r.key===t&&r.value.push(e)}else this.iA.push(new n(t,e))},t.prototype.get=function(t){if(null===t||void 0===t)throw new Error("Argument Null");var e=this.nA(t);if(-1===e)throw new Error("Key Not Found");var i=this.iA[e];return i.key===t?i.value:void 0},t.prototype.remove=function(t){if(null===t||void 0===t)throw new Error("Argument Null");var e=this.nA(t);if(-1===e)throw new Error("Key Not Found");this.iA.splice(e,1)},t.prototype.XP=function(t){if(null===t||void 0===t)throw new Error("Argument Null");return-1!==this.nA(t)},t}();i.zP=r},{}],4:[function(t,e,i){var n=t("./type_binding_scope"),r=function(){function t(t,e,i){if(this.JP=t,this.eA=e,this.Uw=null,void 0===i)this.scope=n.KP.sA;else{if(!n.KP[i]){var r="Invalid scope type "+i;throw new Error(r)}this.scope=i}}return t}();i.QP=r},{"./type_binding_scope":5}],5:[function(t,e,i){var n;!function(t){t[t.sA=0]="Transient",t[t.ZP=1]="Singleton"}(n||(n={})),i.KP=n},{}]},{},[1])(1)}()}()},function(t,e,i){"use strict";var n;!function(t){var e=function(){function t(){}return t}();e.LoggerTimestamp=!0,t.Framework=e;var i=function(){function t(){}return t}();i.MetricSnapshotLogs=0,i.TrackSnapshotLogs=0,t.DebugLogs=i}(n=e.HiveConfig||(e.HiveConfig={})),"undefined"!=typeof window&&(void 0===window.HiveConfig&&(window.HiveConfig={}),window.HiveConfig.Framework=n.Framework,window.HiveConfig.DebugLogs=n.DebugLogs)},function(t,e,i){"use strict";var n=function(){function t(){}return t}();n.oA="127.0.0.1",n.nu=8999,n.iu=8998,n.ru=8899,n.eu=8898,n.aA="//{0}:{1}/?callback={2}{3}hivePluginId={4}",n.hA="//{0}:{1}/?callback={2}",n.su=!0,n.cA=/((http|https):\/\/(.*):([0-9]*)\/([0-9a-z-]*).ism\/)(.*)/,n.uA="2013.1.1",e.tu=n},function(t,e,i){"use strict";var n=function(){function t(){this.count=0}return t.prototype.next=function(){return++this.count},t}();e.Counter=n;var r=function(){function t(){this.reset()}return t.prototype.add=function(t){t<=0||(this.lA+=t,this.pA++,t>this.fA&&(this.fA=t),t<this.dA&&(this.dA=t))},t.prototype.min=function(t){void 0===t&&(t=!0);var e=this.dA==Number.POSITIVE_INFINITY?0:this.dA;return t&&this.reset(),e},t.prototype.max=function(t){void 0===t&&(t=!0);var e=this.fA==Number.NEGATIVE_INFINITY?0:this.fA;return t&&this.reset(),e},t.prototype.Eo=function(t){void 0===t&&(t=!0);var e=this.lA;return t&&this.reset(),e},t.prototype.un=function(t){void 0===t&&(t=!0);var e=this.pA>0?this.lA/this.pA:0;return t&&this.reset(),e},t.prototype.reset=function(){this.dA=Number.POSITIVE_INFINITY,this.fA=Number.NEGATIVE_INFINITY,this.lA=0,this.pA=0},t}();e.gA=r},function(t,e,i){"use strict";var n=i(38),r=i(1);!function(t){var e;!function(t){t[t.off=0]="off",t[t.error=1]="error",t[t.warn=2]="warn",t[t.notice=3]="notice",t[t.info=4]="info",t[t.debug=5]="debug",t[t.trace=6]="trace"}(e=t.vA||(t.vA={}));var i=function(){function t(){this.timestamp=function(){},this.yA=new r,this.level=e.debug,this.timestamp.toString=function(){var t=new Date;return"["+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)+":"+("00"+t.getUTCMilliseconds()).slice(-3)+"]"},this.te="undefined"==typeof console?{log:function(){}}:console,this.te.trace||(this.te.trace=this.te.log),this.te.debug||(this.te.debug=this.te.log),this.te.info||(this.te.info=this.te.log),this.te.warn||(this.te.warn=this.te.log),this.te.error||(this.te.error=this.te.log),this.mA(e[this.level])}return t.prototype.mA=function(t,i){n.HiveConfig.Framework.HiveDebugLevel&&void 0!=e[n.HiveConfig.Framework.HiveDebugLevel]?this.level=e[n.HiveConfig.Framework.HiveDebugLevel]:void 0!=e[t]?this.level=e[t]:console.log("Wrong logging level: "+t,e),this.EA(i)},t.prototype.EA=function(t){var i={log:this.TA(this.te.log,e.error,t),error:this.TA(this.te.error,e.error,t),warn:this.TA(this.te.warn,e.warn,t),notice:this.TA(this.te.info,e.notice,t),info:this.TA(this.te.info,e.info,t),debug:this.TA(this.te.debug,e.debug,t),trace:this.TA(this.te.trace,e.trace,t)};t?this.yA.set(t,i):this.IA=i},t.prototype.TA=function(t,e,i){if(!(this.level>=e))return function(){};try{return n.HiveConfig.Framework.LoggerTimestamp?i?Function.prototype.bind.call(t,console,"S["+i+"] %s",this.timestamp):Function.prototype.bind.call(t,console,"%s",this.timestamp):i?Function.prototype.bind.call(t,console,"S["+i+"]"):Function.prototype.bind.call(t,console)}catch(t){}},t.prototype.log=function(t){return t?(this.yA.has(t)||this.mA(e[this.level],t),this.yA.get(t)):this.IA},t}();t.wA=i}(e.SA||(e.SA={}))},function(t,e,i){"use strict";var n=i(27),r=i(25),o=r.Gm,s=r.Qm,a=function(){function t(){this.SourceURLParams={}}return t.prototype.RA=function(t){for(var e in t)if("SourceURLParams"===e)for(var i in t[e])this[e][i]=t[e][i];else this[e]=t[e];this.bA()},t.prototype.PA=function(){var t=this.ContentId+this.SiteId+this.CROId+this.SourceURL,e=new o;e.df("b6614c3e4cd1d14eed6b39ef2bf6b9a3e3d6dfcd26699d7270d887923bcbf83efb3dadb717c0bafb1d48dce361eb369b7cc46e57405ebfbdd86c3175532fe56cc77f473d345b2cb6feafb5ab0e24f364a3d259f27e4a2fd97468265bddfd3ddd3ac64251db650ca0280af2b2c45e8b1c8f040f2c433ac0a157d2b3fd91517253","010001");var i=s(this.Signature);return e.Bm(t,i)},t.prototype.AA=function(t){this.ticketUrl=t;var e=n.parse(t),i=e.path.split("/").slice(3);if(this.SiteId=i[0],this.CROId=i[1],this.ContentId=i[2],this.CA=i[3],e.dn)try{var r=e.dn.split("&");for(var o in r){var s=r[o].split(/=(.+)/);this.SourceURLParams[s[0]]=s[1]}}catch(t){}this.kA=t.indexOf("api-test")>-1},t.prototype.Lh=function(){return this.SiteId},t.prototype.Mh=function(){return this.CROId},t.prototype.Xc=function(){return this.ContentId},t.prototype.OA=function(){return this.CA},t.prototype._A=function(){return this.SourceURL},t.prototype.NA=function(){if(this.DA=this.SourceURL,void 0!=this.SourceURLParams){var t=new Array;for(var e in this.SourceURLParams)t.push(e+"="+this.SourceURLParams[e]);t.length>0&&this.DA&&(this.DA+=(this.DA.indexOf("?")>0?"&":"?")+t.join("&"))}},t.prototype.bA=function(){var t=i(74);this.sessionId=t.FA()},t.prototype.LA=function(){return this.DA||this.NA(),this.DA},t.prototype.qh=function(){return"["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},t.prototype.MA=function(){return[this.SiteId,this.CROId,this.ContentId]},t.prototype.BA=function(){return this.SourceURL+"-["+this.SiteId+"/"+this.CROId+"/"+this.ContentId+"]"},t.prototype.toString=function(){return this.qh()},t}();a.UA="^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?",a.xA="CROId",a.HA="SiteId",a.qA="ContentId",e.VA=a},function(t,e,i){"use strict";var n=function(){function t(){}return t}();n.jA=55,n.GA=6e5,n.QA=5,n.KA=5,n.YA=5,n.zA=10,n.JA="dist",n.WA="./scenarios/BrokenUdp",n.XA=null,n.ZA=null,n.$A=null,n.eC=!0,n.tC=!0,n.rC=6e4,e.iC=n;var r=function(){function t(){}return t}();r.nC="BwEmulation",e.sC=r},function(t,e,i){"use strict";function n(t,e,i,o){if(!(this instanceof n))return new n(t,e,i,o);e=e||Object.ae,i=i||Object.mo,o=o||Function.he,this.ce=e,this.yo=i,this.le=o,this.pe=new r(null,function(t,i){return e(t.key,i.key)},function(t,e){return i(t.key,e.key)}),this.length=0,this.addEach(t)}var r=(i(12),i(137)),o=i(13),s=i(48),a=i(14);t.t=n,n.oC=n,Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),n.prototype.de=function(t){return new this.constructor(t,this.ce,this.yo,this.le)},n.prototype.log=function(t,e,i,n){e=e||this.ge,this.pe.log(t,function(t,i,n){e(t.value,i,n)},i,n)},n.prototype.ge=function(t,e){e(" key: "+t.key),e(" value: "+t.value)}},function(t,e,i){"use strict";var n,r=i(55),o=i(1),s=i(22),a=i(0),h=i(3),u=i(10),c=i(28),f=i(11);!function(t){t[t.$s=0]="PLAYER",t[t.aC=1]="LAN",t[t.hC=2]="SITE"}(n=e.cC||(e.cC={}));var l=function(){function t(){this.uC=!1,this.gR=null,this.lC=-1,this.pC=0}return t}();e.fC=l;var p=function(){function t(){this.mn="[Prefetcher] ",this.dC=!0,this.gC=0,this.vC=new o,this.yC=new o}return t.prototype.init=function(t){this.te=a.Framework.resolve(a.Framework.q.I).log(t.sessionId),this.mC=t.EC,this.TC=t.TC,this.IC=t.IC,this.Uw=t.Uw,this.wC=t.wC,this.SC=t.SC,this.RC=t.RC,this.bC=t.bC},t.prototype.PC=function(t,e){this.context=t,this.AC=e,this.RC.PC(e)},t.prototype.CC=function(t){return this.yC.has(t)},t.prototype.kC=function(){return this.AC},t.prototype.OC=function(t,e,i){var s=this,a=new r;this.yC.forEach(function(t,e){a.add(e)});var h=new r;if(h.addEach(t.keys()),this.AC._C()){var u=this.AC._C().bitrate;if(h.add(u),h.forEach(function(t){a.delete(t)}),i){var c=[];a.forEach(function(t){s.yC.has(t)&&s.yC.get(t).NC==n.hC&&(c.push(t),h.add(t))}),c.forEach(function(t){a.delete(t)})}var f=new o;h.forEach(function(e){s.yC.has(e)&&s.yC.get(e).NC==n.hC?f.set(e,n.hC):f.set(e,t.get(e))}),this.DC(a),this.FC(f,e)}},t.prototype.FC=function(t,e){var i=this;t.forEach(function(t,n){0!=n&&i.LC(n,t,e)})},t.prototype.DC=function(t){var e=this;t.forEach(function(t){e.wC.MC(t),e.te.debug(e.mn+"Remove unwanted bitrate "+t),e.yC.delete(t)})},t.prototype.LC=function(t,e,i){this.yC.has(t)?this.BC(t,i):this.yC.has(t)||this.UC(t,e,i)},t.prototype.BC=function(t,e){var i=this.yC.get(t);i.type=e,i.type!=n.hC&&(i.lC=-1),this.wC.xC(t,i)},t.prototype.UC=function(t,e,i){var r=this,o=new l;o.gR=null,o.type=i,o.bitrate=t,o.NC=e,this.yC.set(t,o),this.yC.forEach(function(t,e){r.te.debug(r.mn+"ABT "+e+" S "+n[t.type]+" PREF REASON "+n[t.NC])}),this.wC.xC(t,o)},t.prototype.HC=function(t){var e=this;if(this.yC.has(t.IR())){var i=this.yC.get(t.IR());i.lC>0&&i.qC&&(i.lC=t.duration-(a.Framework.time()-i.qC)-i.pC,i.pC=50),i.gR=t,this.VC(t.IR()),this.yC.forEach(function(i,r){i&&i.type!=n.$s&&r!=t.IR()&&e.jC(i,r)})}else this.te.warn(this.mn+"Fragment "+t.zu()+" triggered prefetch with unknown bitrate. Check logs. This should not happen.")},t.prototype.GC=function(t){var e=this.yC.keys(),i=e.indexOf(t);return-1!=i&&e.splice(i,1),e},t.prototype.QC=function(t){var e=this;t.forEach(function(t){var i=e.yC.get(t);i&&i.type!=n.$s&&e.jC(i,i.bitrate)})},t.prototype.jC=function(t,e){if(t.type!=n.$s){var i=this.AC._C();if(null!=i){var r=this.AC.KC(i.vR,e,u.Ws.Ys);null==r?(this.te.debug(this.mn+"PREFETCHING "+e+" MISSING METADATA "),this.uC(e)):(t.gR=r,this.VC(r.IR()))}else this.te.debug(this.mn+"PLAYER NOT PLAYING "),this.uC(e)}},t.prototype.YC=function(t){var e=this.yC.get(t);e&&e.uC&&(null!=e.gR?(this.te.debug(this.mn+"RESTART PREFETCHING ON AVAILABLE METADATA"),e.uC=!1,this.VC(e.bitrate)):(e.uC=!1,this.jC(e,t)))},t.prototype.zC=function(t){var e=this;t?this.YC(t):this.yC.forEach(function(t,i){e.YC(i)})},t.prototype.VC=function(t){var e=this.AC._C();if(e){var i=this.yC.get(t);if(i){if(i.gR&&e.IR()==t){var n=this.JC(i.gR.ER(),t);this.wC.WC(n)}this.XC(i)}}},t.prototype.XC=function(t){if(t.gR){var e=this.ZC(t.gR);if(null!=e)this.$C(e,t);else{var i=t.bitrate;this.te.debug(this.mn+"PREFETCHING "+i+" STOPPED BECAUSE OF MISSING METADATA "),this.yC.get(i).uC=!0,this.uC(i)}}else t.uC=!0,this.uC(t.bitrate)},t.prototype.$C=function(t,e){var i=this,r=this.ek(t.zu(),t.IR(),t.ER(),e.type);if(r.tk){this.vC.has(t.zu())&&a.Framework.clearTimeout(this.vC.get(t.zu()));var o=r.type==s.Tu.vu,u=1;if(o){var f=Math.max(0,e.lC);u=this.RC.rk(e.type,t.IR(),t.ER(),f)}this.te.debug(this.mn+"PREFETCHING "+t.url+" CDN PREFETCH "+o+" IN "+u+" MSECS");var l=this.yC.get(t.IR());l.gR=t;var p=a.Framework.setTimeout(function(){i.vC.delete(t.zu());var o=new c.HiveRequest(i.TC.sessionId);o.url=t.url,l.qC=a.Framework.time(),i.gC=0;var u=i.TC.ik(o,t,i.context,r.type);u&&(u.Bu=e.type==n.hC||e.type==n.aC,o.onerror=o.onload=function(){if(u.Ku()==s.Tu.vu&&(!o.status||o.status<200||o.status>299)){var e=i.yC.get(t.IR());o=null;var n=e.gR.duration,r=e.gR.duration+h.ni.dr.Xt,c=Math.floor(Math.random()*(r-n))+n;e.lC=c-(a.Framework.time()-e.qC),e.pC=0,i.VC(e.gR.bitrate)}})},u);this.vC.set(t.zu(),p)}},t.prototype.nk=function(){var t=this;this.vC.forEach(function(e,i){t.te.debug(t.mn+"Clearing delayed prefetch timer id "+e),a.Framework.clearTimeout(e),t.vC.delete(i)})},t.prototype.uC=function(t){this.yC.has(t)&&(this.yC.get(t).uC=!0,this.AC.sk(t))},t.prototype.ZC=function(t){var e=this.yC.get(t.IR()),i=t,n=this.ak(i);return n&&n.zu()!=t.zu()?n:n&&n.zu()==e.gR.zu()?t:null},t.prototype.ak=function(t){if(null==t)return null;var e=this.Uw.hk(!0),i=t;if(e)for(;null!=i&&-1!=e.indexOf(i.zu());)if(!(i=this.AC.ck(i)))return i;return i},t.prototype.ek=function(t,e,i,r){var o=this.uk(t),a=o?s.Tu.Eu:s.Tu.vu,h=!1;h=r!=n.$s?!this.vC.has(t)||a!=s.Tu.vu:a==s.Tu.Eu;var u=this.AC.lk(),c=this.pk(i,e,a),f=r==n.hC;return this.te.debug(this.mn+"PREFETCHING "+s.Tu[a]+" (LAN LEADER: "+this.wC.fk()+" SITE LEADER: "+f+") CHECKS FOR "+t+" [HAVES:"+o+" NOTBUFFERING:"+u+" DISTANCE:"+c.valid+"("+c.dk+")]"),{tk:h&&u&&c.valid,type:a}},t.prototype.pk=function(t,e,i){var n=this.AC.gk(t,e);return n<=this.AC.vk()?{dk:n,valid:!0}:{dk:n,valid:!1}},t.prototype.JC=function(t,e){var i=this.AC._C();if(null!=i){var n=i.ER();return this.AC.yk(n,e,t,e)}return-1},t.prototype.uk=function(t){if(this.mC.contains(t)){var e=this.mC.mk(t);if(e.length>=h.ni.dr.er){if(h.ni.dr.rr){var i=[],n=[],r=[],o=this.wC.Ek();return e.forEach(function(t){t.Ik.Tk.type==f.Zs.K&&i.push(t);var e=t.Ik.Tk.internalAs;0!=o&&e&&o==e&&n.push(t),t.Ik.Tk.type==f.Zs.Xs&&r.push(t)}),i.length>0?!this.dC||!this.wk(i,t):!(!this.wC.fk()&&this.wC.Sk()||!(n.length>0))||!(!(r.length>0)||!this.wC.Rk()&&this.wC.bk())}return!0}}return!1},t.prototype.wk=function(t,e){return this.wC.Pk().length>h.ni.dr.ur&&(this.wC.Ak(),t.length==h.ni.dr.cr&&t[0].guid==this.wC.kk().Ck&&a.Framework.random()>h.ni.dr.lr&&this.gC<h.ni.dr.pr&&(this.te.debug("SKIP PREFETCH CYCLE "+this.gC+" TO OFFLOAD LEADER"),this.gC++,!0))},t.prototype.Ok=function(t,e){t._k=t.Vu.id,t.Vu=e,this.te.debug(this.mn+"UPGRADE "+s.Tu[t.Ku()]+" REQ "+t.ju+" FOR "+t.Qu.zu()),t.Ku()==s.Tu.Eu?(t.Mu.p2pAgenTrafficSuccessQt=t.qu,t.Uu?(t.type=s.Tu.mu,this.IC.Nk(t)||(this.te.debug(this.mn+"SET REQUEST TIMED-OUT WAS 0. CDN COMPENSATION"),this.IC.Dk(t.Fk,"TIMED-OUT"))):(t.type=s.Tu.du,this.te.debug(this.mn+"THE HIVE REQ "+t.zu()+" ARRIVED BEFORE THE P2P_PREFETCH INITIALIZED. CHANGE REQUEST TYPE TO "+s.Tu[t.Ku()]))):t.Ku()==s.Tu.vu&&(t.type=s.Tu.du)},t}();e.Lk=p},function(t,e,i){"use strict";function n(t,e,i){if(!(this instanceof n))return new n(t,e,i);var r=this.head=new this.Node;r.next=r,r.Mk=r,this.ce=e||Object.ae,this.le=i||Function.he,this.length=0,this.addEach(t)}function r(t){this.head=t,this.Bk=t.next}function o(t){this.value=t,this.Mk=null,this.next=null}t.t=n;var s=(i(12),i(13)),a=i(62),h=i(14),u=i(35);n.Uk=n,Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),Object.addEach(n.prototype,h.prototype),Object.addEach(n.prototype,u.prototype),n.prototype.de=function(t){return new this.constructor(t,this.ce,this.le)},n.prototype.find=function(t,e,i){e=e||this.ce;for(var n=this.head,r=this.xk(i,n.next);r!==n;){if(e(r.value,t))return r;r=r.next}},n.prototype.Hk=function(t,e,i){e=e||this.ce;for(var n=this.head,r=this.xk(i,n.Mk);r!==n;){if(e(r.value,t))return r;r=r.Mk}},n.prototype.has=function(t,e){return!!this.find(t,e)},n.prototype.get=function(t,e){var i=this.find(t,e);return i?i.value:this.le(t)},n.prototype.delete=function(t,e){var i=this.Hk(t,e);if(i){if(this.qk){var n=[],r=[t];this.UP(n,r,i.index)}return i.delete(),this.length--,this.qk&&(this.Vk(i.next,i.index),this.LP(n,r,i.index)),!0}return!1},n.prototype.GP=function(t,e){e=e||this.ce;for(var i=this.head,n=i.next,r=0;n!==i;)e(t,n.value)&&(n.delete(),r++),n=n.next;return this.length-=r,r},n.prototype.clear=function(){var t,e;this.qk&&(e=this.toArray(),t=[],this.UP(t,e,0)),this.head.next=this.head.Mk=this.head,this.length=0,this.qk&&this.LP(t,e,0)},n.prototype.add=function(t){var e=new this.Node(t);return this.qk&&(e.index=this.length,this.UP([t],[],e.index)),this.head.jk(e),this.length++,this.qk&&this.LP([t],[],e.index),!0},n.prototype.push=function(){var t=this.head;if(this.qk){var e=Array.prototype.slice.call(arguments),i=[],n=this.length;this.UP(e,i,n);var r=this.head.Mk}for(var o=0;o<arguments.length;o++){var s=arguments[o],a=new this.Node(s);t.jk(a)}this.length+=arguments.length,this.qk&&(this.Vk(r.next,void 0===r.index?0:r.index+1),this.LP(e,i,n))},n.prototype.unshift=function(){if(this.qk){var t=Array.prototype.slice.call(arguments),e=[];this.UP(t,e,0)}for(var i=this.head,n=0;n<arguments.length;n++){var r=arguments[n],o=new this.Node(r);i.Gk(o),i=o}this.length+=arguments.length,this.qk&&(this.Vk(this.head.next,0),this.LP(t,e,0))},n.prototype.pop=function(){var t,e=this.head;if(e.Mk!==e){if(t=e.Mk.value,this.qk){var i=[],n=[t],r=this.length-1;this.UP(i,n,r)}e.Mk.delete(),this.length--,this.qk&&this.LP(i,n,r)}return t},n.prototype.shift=function(){var t,e=this.head;if(e.Mk!==e){if(t=e.next.value,this.qk){var i=[],n=[t];this.UP(i,n,0)}e.next.delete(),this.length--,this.qk&&(this.Vk(this.head.next,0),this.LP(i,n,0))}return t},n.prototype.Qk=function(){if(this.head!==this.head.next)return this.head.next.value},n.prototype.Kk=function(t){this.head!==this.head.next?this.head.next.value=t:this.push(t)},n.prototype.Po=function(){return this.Qk()},n.prototype.xk=function(t,e){var i=this.head;if("number"==typeof t){var n=t;if(n>=0)for(t=i.next;n&&(n--,(t=t.next)!=i););else for(t=i;n<0&&(n++,(t=t.Mk)!=i););return t}return t||e},n.prototype.slice=function(t,e){var i=[],n=this.head;for(t=this.xk(t,n.next),e=this.xk(e,n);t!==e&&t!==n;)i.push(t.value),t=t.next;return i},n.prototype.splice=function(t,e){return this.Yk(t,e,Array.prototype.slice.call(arguments,2))},n.prototype.Yk=function(t,e,i){var n=t;t=this.xk(t,this.head),null==e&&(e=1/0),i=Array.from(i);for(var r=[],o=t;e--&&e>=0&&o!==this.head;)r.push(o.value),o=o.next;var s,a;this.qk&&(s=t===this.head?this.length:t.Mk===this.head?0:t.index,a=t.Mk,this.UP(i,r,s));for(var o=t,h=0,o=t;h<r.length;h++,o=o.next)o.delete();null==n&&o===this.head&&(o=this.head.next);for(var h=0;h<i.length;h++){var u=new this.Node(i[h]);o.jk(u)}return this.length+=i.length-r.length,this.qk&&(t===this.head?this.Vk(this.head.next,0):this.Vk(a.next,a.index+1),this.LP(i,r,s)),r},n.prototype.reverse=function(){if(this.qk){var t=this.toArray(),e=t.reversed();this.UP(e,t,0)}var i=this.head;do{var n=i.next;i.next=i.Mk,i.Mk=n,i=i.next}while(i!==this.head);return this.qk&&this.LP(e,t,0),this},n.prototype.sort=function(){this.Yk(0,this.length,this.Ro())},n.prototype.reduce=function(t,e){for(var i=arguments[2],n=this.head,r=n.next;r!==n;)e=t.call(i,e,r.value,r,this),r=r.next;return e},n.prototype.reduceRight=function(t,e){for(var i=arguments[2],n=this.head,r=n.Mk;r!==n;)e=t.call(i,e,r.value,r,this),r=r.Mk;return e},n.prototype.Vk=function(t,e){for(;t!==this.head;)t.index=e++,t=t.next},n.prototype.xo=function(){this.head.index=-1,this.Vk(this.head.next,0),this.qk=!0},n.prototype.Ao=function(){return new r(this.head)},r.prototype.zk=null,Object.defineProperty(r.prototype,"_iterationObject",{get:function(){return this.zk||(this.zk={done:!1,value:null})}}),r.prototype.next=function(){if(this.Bk===this.head)this.Jk.done=!0,this.Jk.value=void 0;else{var t=this.Bk.value;this.Bk=this.Bk.next,this.Jk.value=t}return this.Jk},n.prototype.Node=o,o.prototype.delete=function(){this.Mk.next=this.next,this.next.Mk=this.Mk},o.prototype.jk=function(t){var e=this.Mk;this.Mk=t,t.Mk=e,e.next=t,t.next=this},o.prototype.Gk=function(t){var e=this.next;this.next=t,t.next=e,e.Mk=t,t.Mk=this}},function(t,e,i){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);e=e||Function.he,this.le=e,this.pe=Object.create(null),this.length=0,this.addEach(t)}var r=(i(12),i(13)),o=i(48),s=i(14);t.t=n,n.Wk=n,Object.addEach(n.prototype,r.prototype),Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,s.prototype),n.prototype.de=function(t){return new this.constructor(t,this.le)},n.prototype.Xk=function(t){if("string"!=typeof t)throw new TypeError("key must be a string but Got "+t)},Object.defineProperty(n.prototype,"$__proto__",{Ui:!0}),Object.defineProperty(n.prototype,"_hasProto",{get:function(){return this.hasOwnProperty("$__proto__")&&void 0!==this.Zk}}),Object.defineProperty(n.prototype,"_protoValue",{get:function(){return this.$k},set:function(t){this.$k=t}}),n.prototype.get=function(t,e){return this.Xk(t),"__proto__"===t?this.eO?this.Zk:arguments.length>1?e:this.le(t):t in this.pe?this.pe[t]:arguments.length>1?e:this.le(t)},n.prototype.set=function(t,e){this.Xk(t);var i="__proto__"===t;return(i?this.eO:t in this.pe)?(this.tO&&this.rO(t,i?this.Zk:this.pe[t]),i?this.Zk=e:this.pe[t]=e,this.tO&&this.iO(t,e),!1):(this.tO&&this.rO(t,void 0),this.length++,i?this.Zk=e:this.pe[t]=e,this.tO&&this.iO(t,e),!0)},n.prototype.has=function(t){return this.Xk(t),"__proto__"===t?this.eO:t in this.pe},n.prototype.delete=function(t){return this.Xk(t),"__proto__"===t?!!this.eO&&(this.tO&&this.rO(t,this.Zk),this.Zk=void 0,this.length--,this.tO&&this.iO(t,void 0),!0):t in this.pe&&(this.tO&&this.rO(t,this.pe[t]),delete this.pe[t],this.length--,this.tO&&this.iO(t,void 0),!0)},n.prototype.clear=function(){var t;this.eO&&(this.tO&&this.rO("__proto__",this.Zk),this.Zk=void 0,this.tO&&this.iO("__proto__",void 0));for(t in this.pe)this.tO&&this.rO(t,this.pe[t]),delete this.pe[t],this.tO&&this.iO(t,void 0);this.length=0},n.prototype.reduce=function(t,e,i){this.eO&&(e=t.call(i,e,"$__proto__","__proto__",this));var n=this.pe;for(var r in this.pe)e=t.call(i,e,n[r],r,this);return e},n.prototype.reduceRight=function(t,e,i){var n=this,r=this.pe;return e=Object.keys(this.pe).reduceRight(function(e,o){return t.call(i,e,r[o],o,n)},e),this.eO?t.call(i,e,this.Zk,"__proto__",n):e},n.prototype.Po=function(){var t;for(t in this.pe)return this.pe[t];return this.Zk},n.prototype.toJSON=function(){return this.vo()}},function(t,e,i){"use strict";function n(){throw new Error("Can't construct. GenericMap is a mixin.")}function r(t,e){this.key=t,this.value=e}var o=i(33),s=i(99),a=i(14);t.t=n,o.addEach(n.prototype,s.prototype),o.addEach(n.prototype,a.prototype),n.prototype.isMap=!0,n.prototype.addEach=function(t){if(t&&o(t)===t)if("function"==typeof t.forEach)!0===t.isMap?t.forEach(function(t,e){this.set(e,t)},this):t.forEach(function(t){this.set(t[0],t[1])},this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);else o.keys(t).forEach(function(e){this.set(e,t[e])},this);else if(t&&"number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);return this},n.prototype.get=function(t,e){var i=this.pe.get(new this.nO(t));return i?i.value:arguments.length>1?e:this.le(t)},n.prototype.set=function(t,e){var i=new this.nO(t,e),n=this.pe.get(i),r=!1;return n?(this.tO&&this.rO(t,n.value),n.value=e,this.tO&&this.iO(t,e)):(this.tO&&this.rO(t,void 0),this.pe.add(i)&&(this.length++,r=!0),this.tO&&this.iO(t,e)),r},n.prototype.add=function(t,e){return this.set(e,t)},n.prototype.has=function(t){return this.pe.has(new this.nO(t))},n.prototype.delete=function(t){var e=new this.nO(t);if(this.pe.has(e)){var i=this.pe.get(e).value;return this.tO&&this.rO(t,i),this.pe.delete(e),this.length--,this.tO&&this.iO(t,void 0),!0}return!1},n.prototype.clear=function(){var t;this.tO&&(this.forEach(function(t,e){this.rO(e,t)},this),t=this.keys()),this.pe.clear(),this.length=0,this.tO&&t.forEach(function(t){this.iO(t)},this)},n.prototype.reduce=function(t,e,i){return this.pe.reduce(function(e,n){return t.call(i,e,n.value,n.key,this)},e,this)},n.prototype.reduceRight=function(t,e,i){return this.pe.reduceRight(function(e,n){return t.call(i,e,n.value,n.key,this)},e,this)},n.prototype.keys=function(){return this.map(function(t,e){return e})},n.prototype.values=function(){return this.map(Function.identity)},n.prototype.entries=function(){return this.map(function(t,e){return[e,t]})},n.prototype.sO=function(){return this.entries()},n.prototype.ae=function(t,e){return e=e||o.ae,this===t||(t&&"function"==typeof t.every?t.length===this.length&&t.every(function(t,i){return e(this.get(i),t)},this):o.keys(t).length===this.length&&o.keys(t).every(function(i){return e(this.get(i),t[i])},this))},n.prototype.toJSON=function(){return this.entries()},n.prototype.nO=r,r.prototype.ae=function(t){return o.ae(this.key,t.key)&&o.ae(this.value,t.value)},r.prototype.mo=function(t){return o.mo(this.key,t.key)}},function(t,e,i){"use strict";var n=function(){function t(){}return t}();n.$c="https:"===location.protocol,n.su=!0,n.oO=1e4,n.aO=6e4,e.N=n},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(65),o=i(7),s=i(66),a=i(6),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.mi=function(t){e.te=t},e.prototype.send=function(){if(e.te&&e.te.debug(this.method+" "+this.url),!this.sessionId){var t=Object.keys(e.EI);t.length>0&&(this.sessionId=e.EI[t[0]])}var i=this,n=new XMLHttpRequest;0===this.url.indexOf("//")&&(this.url=location.protocol+this.url);var s=o.gs(r.cO.hO,r.cO.oA,r.cO.uO,this.sessionId,encodeURIComponent(this.url));n.open("GET",s),this.responseType&&(n.responseType=this.responseType),n.onreadystatechange=function(){},n.onload=function(){if(4===n.readyState)try{i.xu=n.getAllResponseHeaders(),i.response=n.response;var t=n.response.byteLength;"arraybuffer"!==n.responseType&&(i.responseText=n.response),i.readyState=4,i.status=n.status,i.dispatchEvent(a.fn.createEvent(ProgressEvent,"progress",{lengthComputable:!0,loaded:t,total:t,currentTarget:i})),i.dispatchEvent(a.fn.createEvent(Event,"readystatechange",{currentTarget:i,bubbles:!1,cancelable:!1})),i.dispatchEvent(a.fn.createEvent(ProgressEvent,"load",{currentTarget:i,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:t,total:0})),i.dispatchEvent(a.fn.createEvent(ProgressEvent,"loadend",{currentTarget:i,bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:t,total:0}))}catch(t){e.te&&e.te.warn(t)}},n.onerror=function(t){e.te&&e.te.warn("onError: "+JSON.stringify(t)),i.dispatchEvent(a.fn.createEvent(ErrorEvent,"error",t,i))},n.onabort=function(t){e.te&&e.te.warn("onAbort: "+JSON.stringify(t)),i.dispatchEvent(a.fn.createEvent(ProgressEvent,"abort",t,i))},n.send()},e.prototype.abort=function(){},e}(s.SI);e.In=h},function(t,e,i){var n;!function(r,o){"use strict";var s="model",a="name",h="type",u="vendor",c="version",f="mobile",l="tablet",p={extend:function(t,e){var i={};for(var n in t)e[n]&&e[n].length%2==0?i[n]=e[n].concat(t[n]):i[n]=t[n];return i},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lO:function(t){return t.toLowerCase()},pO:function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={fO:function(){for(var t,e,i,n,r,o,s,a=0,h=arguments;a<h.length&&!o;){var u=h[a],c=h[a+1];if(void 0===t){t={};for(n in c)c.hasOwnProperty(n)&&(r=c[n],"object"==typeof r?t[r[0]]=void 0:t[r]=void 0)}for(e=i=0;e<u.length&&!o;)if(o=u[e++].exec(this.dO()))for(n=0;n<c.length;n++)s=o[++i],r=c[n],"object"==typeof r&&r.length>0?2==r.length?"function"==typeof r[1]?t[r[0]]=r[1].call(this,s):t[r[0]]=r[1]:3==r.length?"function"!=typeof r[1]||r[1].exec&&r[1].test?t[r[0]]=s?s.replace(r[1],r[2]):void 0:t[r[0]]=s?r[1].call(this,s,r[2]):void 0:4==r.length&&(t[r[0]]=s?r[3].call(this,s.replace(r[1],r[2])):void 0):t[r]=s||void 0;a+=2}return t},Lg:function(t,e){for(var i in e)if("object"==typeof e[i]&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(p.has(e[i][n],t))return"?"===i?void 0:i}else if(p.has(e[i],t))return"?"===i?void 0:i;return t}},v={Oa:{gO:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419",$E:"/"}}},vO:{yO:{mO:{EO:["SD","KF"]}},TO:{mO:{IO:"7373KT"},vendor:{wO:"APA",SO:"Sprint"}}},os:{RO:{version:{bO:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",PO:["NT 5.1","NT 5.2"],AO:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],CO:"ARM"}}}},g={Oa:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,c],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[a,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],c],[/(edge)\/((\d+)?[\w\.]+)/i],[a,c],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],c],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],c],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[a,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],c],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[a,c],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],c],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],c],[/;fbav\/([\w\.]+);/i],[c,[a,"Facebook"]],[/fxios\/([\w\.-]+)/i],[c,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[c,d.Lg,v.Oa.gO.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[a,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,c]],kO:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lO]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lO]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lO]]],vO:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[s,u,[h,l]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[u,"Apple"],[h,l]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[u,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,s,[h,l]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[s,[u,"Amazon"],[h,l]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[s,d.Lg,v.vO.yO.mO],[u,"Amazon"],[h,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,u,[h,f]],[/\((ip[honed|\s\w*]+);/i],[s,[u,"Apple"],[h,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,s,[h,f]],[/\(bb10;\s(\w+)/i],[s,[u,"BlackBerry"],[h,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[s,[u,"Asus"],[h,l]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[s,"Xperia Tablet"],[h,l]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[u,"Sony"],[s,"Xperia Phone"],[h,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,s,[h,"console"]],[/android.+;\s(shield)\sbuild/i],[s,[u,"Nvidia"],[h,"console"]],[/(playstation\s[34portablevi]+)/i],[s,[u,"Sony"],[h,"console"]],[/(sprint\s(\w+))/i],[[u,d.Lg,v.vO.TO.vendor],[s,d.Lg,v.vO.TO.mO],[h,f]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[u,s,[h,l]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[u,[s,/_/g," "],[h,f]],[/(nexus\s9)/i],[s,[u,"HTC"],[h,l]],[/(nexus\s6p)/i],[s,[u,"Huawei"],[h,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[u,s,[h,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[u,"Microsoft"],[h,"console"]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[u,"Microsoft"],[h,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[u,"Motorola"],[h,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[u,"Motorola"],[h,l]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,p.trim],[s,p.trim],[h,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[u,"Samsung"],[h,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[s,[u,"Sharp"],[h,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],s,[h,l]],[/smart-tv.+(samsung)/i],[u,[h,"smarttv"],s],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[u,"Samsung"],s,[h,f]],[/sie-(\w+)*/i],[s,[u,"Siemens"],[h,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[u,"Nokia"],s,[h,f]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[s,[u,"Acer"],[h,l]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],s,[h,l]],[/(lg) netcast\.tv/i],[u,s,[h,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[s,[u,"LG"],[h,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[u,"Lenovo"],[h,l]],[/linux;.+((jolla));/i],[u,s,[h,f]],[/((pebble))app\/[\d\.]+\s/i],[u,s,[h,"wearable"]],[/android.+;\s(glass)\s\d/i],[s,[u,"Google"],[h,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[s,/_/g," "],[u,"Xiaomi"],[h,f]],[/android.+a000(1)\s+build/i],[s,[u,"OnePlus"],[h,f]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,p.lO],u,s]],OO:[[/windows.+\sedge\/([\w\.]+)/i],[c,[a,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,c],[/rv\:([\w\.]+).*(gecko)/i],[c,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[c,d.Lg,v.os.RO.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[c,d.Lg,v.os.RO.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[a,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[a,"Symbian"],c],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[a,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],c],[/(sunos)\s?([\w\.]+\d)*/i],[[a,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[a,c],[/(haiku)\s(\w+)/i],[a,c],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[a,"iOS"],[c,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[a,c]]},y=function(t,e){if(!(this instanceof y))return new y(t,e)._O();var i=t||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=e?p.extend(g,e):g;return this.NO=function(){var t=d.fO.apply(this,n.Oa);return t.pO=p.pO(t.version),t},this.DO=function(){return d.fO.apply(this,n.kO)},this.FO=function(){return d.fO.apply(this,n.vO)},this.LO=function(){return d.fO.apply(this,n.OO)},this.Uh=function(){return d.fO.apply(this,n.os)},this._O=function(){return{qf:this.dO(),Oa:this.NO(),OO:this.LO(),os:this.Uh(),vO:this.FO(),kO:this.DO()}},this.dO=function(){return i},this.Bh=function(t){return i=t,this},this};y.VERSION="0.7.12",y.MO={BO:a,UO:"major",VERSION:c},y.xO={HO:"architecture"},y.qO={VO:s,VENDOR:u,jO:h,GO:"console",QO:f,KO:"smarttv",YO:l,zO:"wearable",JO:"embedded"},y.WO={BO:a,VERSION:c},y.XO={BO:a,VERSION:c},void 0!==e?(void 0!==t&&t.t&&(e=t.t=y),e.Fa=y):i(108)?void 0!==(n=function(){return y}.call(e,i,e,t))&&(t.t=n):r.Fa=y;var w=r.ZO||r.$O;if(void 0!==w){var m=new y;w.qf=m._O(),w.qf.get=function(){return m.dO()},w.qf.set=function(t){m.Bh(t);var e=m._O();for(var i in e)w.qf[i]=e[i]}}}("object"==typeof window?window:this)},function(t,e,i){"use strict";!function(){var e=i(17),n=e.log,r=e.Da;t.t.Da=r,t.t.Ca=e.Ca,t.t.Aa=e.Aa;var o=i(120)||null,s=i(122)||null,a=i(125)||null,h=i(127)||null;switch(r.Oa){case"chrome":if(!o||!o.e_)return void n("Chrome shim is not included in this adapter release.");n("adapter.js shimming chrome."),t.t.t_=o,o.r_(),o.i_(),e._a(),o.n_(),o.e_(),o.s_(),o.o_();break;case"firefox":if(!a||!a.e_)return void n("Firefox shim is not included in this adapter release.");n("adapter.js shimming firefox."),t.t.t_=a,a.r_(),e._a(),a.n_(),a.e_(),a.s_();break;case"edge":if(!s||!s.e_)return void n("MS edge shim is not included in this adapter release.");n("adapter.js shimming edge."),t.t.t_=s,s.r_(),e._a(),s.e_();break;case"safari":if(!h)return void n("Safari shim is not included in this adapter release.");n("adapter.js shimming safari."),t.t.t_=h,h.r_();break;default:n("Unsupported browser!")}}()},function(t,e,i){"use strict";var n=i(29),r=i(2),o=i(7),s=i(128),a=s.gn.ou.a_,h=i(19),u=i(129),c=i(4),f=function(){function t(e,i){this.h_=e,this.options_=new a,void 0!==i[t.c_]&&o.vs(i[t.c_],this.options_)}return t.prototype.Fn=function(){return t.c_},t.prototype.id=function(){return"["+t.c_+"] "},t.prototype.getVersion=function(){return null},t.prototype.u_=function(){return!0},t.prototype.l_=function(){return r.resolve(!0)},t.prototype.initSession=function(t,e){var i=this.p_(t,e.ticket,e.ticket.LA(),e);return o.HiveRequestFactory.bn(i.id,this.Fn()),r.resolve(i)},t.prototype.f_=function(){return this.options().initTimeout},t.prototype.ci=function(t,e){var i=e.manifest.toLowerCase().indexOf("/manifest");if(i>-1){var n=e.manifest.substring(0,i);if(t.indexOf(n)>-1)return!0}else if(t==e.manifest)return!0;return!1},t.prototype.Nn=function(t,e,i){void 0===i&&(i=!0),t.Cn&&(this.h_.te().debug("[StatsJS] stopping session ["+t.id+"] complete close: "+e),t.Cn.Lc.dc(i),t.Cn.Fc.d_(),t.Cn.Fc.reset(e)),e?n.Hive.Reporting().close():this.On(t,!0)},t.prototype.On=function(t,e){var i=e?h._c.IDLE:h._c.Oc;this.h_.te().notice("[HiveComm] client state: "+h._c[i]),t.Cn&&t.Cn.On(i)},t.prototype.g_=function(t,e){var i=this,n=0;return this.v_<e.Ps&&(n=e.Ps-this.v_,this.v_=e.Ps),t.Ln().then(function(){t.Cn.Dc.y_(n,e.bs),t.Cn.tc.kh(e.Rs,e.bs,e.Ps),i.m_()}).done(),r.resolve(!0)},t.prototype.E_=function(t,e,i){return t.Ln().then(function(){t.Cn.tc._h(t.ticket.sessionId,e,i)}).done(),r.resolve(!0)},t.prototype.Nh=function(t,e){return t.Ln().then(function(){t.Cn.tc.Dh([e])}).done(),r.resolve(!0)},t.prototype.onError=function(t){var e=!0;if(void 0!=this.options().onError)try{e=this.options().onError(t)}catch(t){c.ErrorMonitor.gi().di("exception in user-defined onError callback",this.id(),t)}return e},t.prototype.onActiveSession=function(t){var e=this;this.T_(),t.Ln().then(function(i){e.I_=i;var n=new u.w_(e.h_.isLive(),e.h_.S_(),t.ticket.LA());e.I_.R_=n,e.I_.Dc.R_=n,e.h_.wh(e.I_),e.I_.Fc.init(e.I_.Dc,t.id),e.I_.tc.Tn(t.ticket.sessionId,e.h_.b_(),200);var r=e.h_.P_();if(r&&r.length>0&&e.I_.tc.Dh(r),void 0!=e.options_.onActiveSession)try{e.options_.onActiveSession(t.Dn())}catch(t){c.ErrorMonitor.gi().di("exception in user-defined onActiveSession callback",e.id(),t)}}).done()},t.prototype.A_=function(){},t.prototype.C_=function(){},t.prototype.k_=function(t){this.h_=t},t.prototype.options=function(){return this.options_},t.prototype.T_=function(){this.v_=0},t.prototype.p_=function(t,e,i,n){var r=new o.Bn(t,e,i,n);return r.O_=!1,r.id=e.sessionId,r},t.prototype.m_=function(){try{var t=this.h_.__();void 0!=t&&(this.I_.Dc.N_.metrics.bitrateUpN+=t.es(),this.I_.Dc.N_.metrics.bitrateDwnN+=t.rs(),null!=t.Xn()&&(this.I_.Dc.N_.metrics.srcThroughput=t.Xn()),null!=t.Zn()&&this.D_(!0,t.Zn()),null!=t.$n()&&this.D_(!1,t.$n()))}catch(t){c.ErrorMonitor.gi().di("Error accounting extended stats",this.id(),t)}},t.prototype.D_=function(t,e){var i=this,n=0,r=0,o=0,s=0;e.forEach(function(e,a){var h=e.success+e.xn;if(n+=h,s+=e.Hn,r+=e.success,o+=e.xn,t){var u=i.I_.Dc.F_(Number(a));i.L_(u,h,e.success,e.xn,e.Hn)}});var a=this.I_.Dc.M_();this.L_(a,n,r,o,s)},t.prototype.L_=function(t,e,i,n,r){t.srcReqN+=e,t.srcRespN+=i,t.srcRespErrN+=n,t.srcRespQt+=r,t.respFallbackN+=i,t.respFallbackErrN+=n},t}();f.c_="StatsJS",e.StatsJS=f},function(t,e,i){"use strict";var n=i(44),r=i(31),o=i(0),s=i(138),a=i(10),h=i(22),u=i(45),c=i(3),f=function(){function t(t){this.B_=new n,this.te=o.Framework.resolve(o.Framework.q.I).log(t.sessionId),this.wC=t.wC,this.U_=t.x_,this.H_=t.H_,this.q_=t.V_,this.q_.PC(this,this)}return t.prototype.Ak=function(){return null},t.prototype.j_=function(){return this.q_},t.prototype.G_=function(t,e){var i=0,n=0;if(this.B_.length<e)return!0;for(var r=this.B_.keys().reverse(),o=r[0],s=this.B_.get(o).bitrate,a=r.slice(1),h=0;h<a.length;h++){var u=a[h],c=this.B_.get(u),f=c.Q_,l=c.bitrate,p=Math.abs(c.Q_-o);if(l!=s)return!1;if(p<t){if(++n>=e)return!1}else{if(++i>e)return!0;n=Math.max(0,n-1),o=f,s=l}}return!1},t.prototype.K_=function(){return null},t.prototype.Y_=function(t,e){if(this.z_(e)){var i=this._C();if(i){var n=t.IR(),r=i.IR();n>r?this.U_.J_(!0):n<r&&this.U_.J_(!1)}else this.U_.J_(!0);if(this.B_.length>c.ni.mr.gr){var s=this.B_.keys()[0];this.B_.delete(s)}this.B_.set(o.Framework.time(),t)}return this.W_(t,e)},t.prototype.W_=function(t,e){var i=new s.X_;if(this.q_.CC(t.bitrate)){if(this.H_.Z_(t.zu())){i.eN=!0;var n=this.H_.tN(t.zu());this.rN(e,n,i)}if(this.H_.iN(t.zu()))for(var r=this.H_.nN(t.zu()),o=0,a=r;o<a.length;o++){var h=a[o];this.rN(e,h.Ku(),i),i.sN=!0}}else{var c=u.cC.$s;this.wC.fk()&&(c=u.cC.aC),this.q_.LC(t.bitrate,c,c)}return i},t.prototype.rN=function(t,e,i){t!=h.Tu.vu&&t!=h.Tu.Eu||e!=h.Tu.du&&e!=h.Tu.Eu&&e!=h.Tu.vu||(i.oN=!0)},t.prototype.z_=function(t){return t!=h.Tu.Eu&&t!=h.Tu.vu},t.prototype.aN=function(t,e,i){for(var n=[],r=this.H_.nN(e.zu()),o=0,s=r;o<s.length;o++){var a=s[o];a.Ku()!=h.Tu.du&&(this.q_.Ok(a,t),n.push(a._k))}return n},t.prototype.hN=function(t){this.H_.hN(t)},t.prototype.cN=function(t,e){this.H_.cN(t,e)},t.prototype.uN=function(t){this.H_.uN(t)},t.prototype.lN=function(t){this.H_.pN(t)},t.prototype.fN=function(t){this.H_.dN()||this.q_.VC(t)},t.prototype._C=function(){var t=this.B_.keys();return t.length>0?this.B_.get(t[t.length-1]):null},t.prototype.gN=function(){var t=this.B_.keys();if(t.length>0)return t[t.length-1]},t.prototype.vN=function(t){var e=this.yN(t);null!=e&&this.fN(e.bitrate)},t.prototype.yN=function(t){var e=t.mN,i=e.slice(0,e.lastIndexOf("-")),n=i.slice(0,i.lastIndexOf("-")),o=t.EN();return new r.SR(n,o,!0,t.id,t.duration,t.bitrate,!0,this.K_())},t.prototype.lk=function(){return!1},t.prototype.yk=function(t,e,i,n){return 0},t.prototype.vk=function(){return 3e4},t.prototype.TN=function(){return 1e4},t.prototype.ck=function(t){return null},t.prototype.KC=function(t,e,i){return null},t.prototype.S_=function(){return null},t.prototype.isLive=function(){return!1},t.prototype.sk=function(t){},t.prototype.IN=function(){},t.prototype.wN=function(){return null},t.prototype.SN=function(t){},t.prototype.RN=function(){},t.prototype.bN=function(t){},t.prototype.PN=function(t){},t.prototype.AN=function(t){t.Yu()===a.Ws.Ys&&this.cN(t.zu(),t.Ju())},t.prototype.CN=function(){return null},t.prototype.kN=function(t){},t.prototype.gk=function(t,e){return 0},t}();e.ON=f},function(t,e,i){"use strict";function n(t,e,i,o){if(!(this instanceof n))return new n(t,e,i,o);r.call(this,t,e,i,o)}t.t=n;var r=(i(12),i(139)),o=i(36),s=i(14);n._N=n,n.prototype=Object.create(r.prototype),n.prototype.constructor=n,Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,s.prototype),n.prototype.NN=!0,n.prototype.add=function(t){return!this.has(t)&&(r.prototype.add.call(this,t),!0)},n.prototype.reduce=function(t,e){var i=this,n=arguments[2];return this.fg.reduce(function(e,r,o){return t.call(n,e,r,o,i)},e)},n.prototype.reduceRight=function(t,e){var i=this,n=arguments[2];return this.fg.reduceRight(function(e,r,o){return t.call(n,e,r,o,i)},e)}},function(t,e,i){var n=i(30);"undefined"==typeof hive&&(hive={}),void 0===hive.DN&&(hive.DN={}),void 0===hive.DN.protocol&&(hive.DN.protocol={}),void 0===hive.DN.protocol.FN&&(hive.DN.protocol.FN={}),hive.DN.protocol.FN.io={1:"PLAYER",$s:1,2:"P2P_AGENT",eo:2,3:"PREFETCHER_FIRST_TIER",to:3,4:"PREFETCHER_SECOND_TIER",ro:4},hive.DN.protocol.FN.LN={1:"Global",MN:1,2:"InternalAs",BN:2,3:"ExternalAs",UN:3},hive.DN.protocol.FN.xN={1:"Internal",HN:1,2:"External",External:2},hive.DN.protocol.FN.no=function(t){this.state=null,this.bitrate=null,this.delta=null,t&&(void 0!==t.state&&(this.state=t.state),void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.delta&&(this.delta=t.delta))},hive.DN.protocol.FN.no.prototype={},hive.DN.protocol.FN.no.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.state=t.gw().value:t.dw(i);break;case 2:i==n.bI.NI?this.bitrate=t.gw().value:t.dw(i);break;case 3:i==n.bI.NI?this.delta=t.gw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.no.prototype.write=function(t){t.mw("TrackerPeerStreamInfo"),null!==this.state&&void 0!==this.state&&(t.Ew("state",n.bI.NI,1),t.ww(this.state),t.Iw()),null!==this.bitrate&&void 0!==this.bitrate&&(t.Ew("bitrate",n.bI.NI,2),t.ww(this.bitrate),t.Iw()),null!==this.delta&&void 0!==this.delta&&(t.Ew("delta",n.bI.NI,3),t.ww(this.delta),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.qN=function(t){this.guid=null,this.internalAs=null,this.externalAs=null,this.oo=null,this.bandwidth=null,this.ao=null,this.privateIp=null,this.publicIp=null,this.ho=null,this.co=null,this.timestamp=null,this.lo=null,this.uo=null,t&&(void 0!==t.guid&&(this.guid=t.guid),void 0!==t.internalAs&&(this.internalAs=t.internalAs),void 0!==t.externalAs&&(this.externalAs=t.externalAs),void 0!==t.oo&&(this.oo=t.oo),void 0!==t.bandwidth&&(this.bandwidth=t.bandwidth),void 0!==t.ao&&(this.ao=t.ao),void 0!==t.privateIp&&(this.privateIp=t.privateIp),void 0!==t.publicIp&&(this.publicIp=t.publicIp),void 0!==t.ho&&(this.ho=t.ho),void 0!==t.co&&(this.co=t.co),void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.lo&&(this.lo=t.lo),void 0!==t.uo&&(this.uo=t.uo))},hive.DN.protocol.FN.qN.prototype={},hive.DN.protocol.FN.qN.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.FI?this.guid=t.oR().value:t.dw(i);break;case 2:i==n.bI.NI?this.internalAs=t.gw().value:t.dw(i);break;case 3:i==n.bI.NI?this.externalAs=t.gw().value:t.dw(i);break;case 4:i==n.bI.NI?this.oo=t.gw().value:t.dw(i);break;case 5:i==n.bI.NI?this.bandwidth=t.gw().value:t.dw(i);break;case 6:i==n.bI.NI?this.ao=t.gw().value:t.dw(i);break;case 7:i==n.bI.MI?(this.privateIp=new InetAddress,this.privateIp.read(t)):t.dw(i);break;case 8:i==n.bI.MI?(this.publicIp=new InetAddress,this.publicIp.read(t)):t.dw(i);break;case 9:if(i==n.bI.xI){var o,s=0;this.ho=[],o=t.WS(),o.XS,s=o.size;for(var a=0;a<s;++a){var h=null;h=new hive.DN.protocol.FN.no,h.read(t),this.ho.push(h)}t.ZS()}else t.dw(i);break;case 10:i==n.bI.OI?this.co=t.sR().value:t.dw(i);break;case 11:i==n.bI.DI?this.timestamp=t.nR().value:t.dw(i);break;case 12:i==n.bI.FI?this.lo=t.fw().value:t.dw(i);break;case 13:i==n.bI.FI?this.uo=t.fw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.qN.prototype.write=function(t){if(t.mw("TrackerPeerInfo"),null!==this.guid&&void 0!==this.guid&&(t.Ew("guid",n.bI.FI,1),t.MS(this.guid),t.Iw()),null!==this.internalAs&&void 0!==this.internalAs&&(t.Ew("internalAs",n.bI.NI,2),t.ww(this.internalAs),t.Iw()),null!==this.externalAs&&void 0!==this.externalAs&&(t.Ew("externalAs",n.bI.NI,3),t.ww(this.externalAs),t.Iw()),null!==this.oo&&void 0!==this.oo&&(t.Ew("nat",n.bI.NI,4),t.ww(this.oo),t.Iw()),null!==this.bandwidth&&void 0!==this.bandwidth&&(t.Ew("bandwidth",n.bI.NI,5),t.ww(this.bandwidth),t.Iw()),null!==this.ao&&void 0!==this.ao&&(t.Ew("watchingBitrate",n.bI.NI,6),t.ww(this.ao),t.Iw()),null!==this.privateIp&&void 0!==this.privateIp&&(t.Ew("privateIp",n.bI.MI,7),this.privateIp.write(t),t.Iw()),null!==this.publicIp&&void 0!==this.publicIp&&(t.Ew("publicIp",n.bI.MI,8),this.publicIp.write(t),t.Iw()),null!==this.ho&&void 0!==this.ho){t.Ew("streams",n.bI.xI,9),t.PS(n.bI.MI,this.ho.length);for(var e in this.ho)this.ho.hasOwnProperty(e)&&(e=this.ho[e],e.write(t));t.CS(),t.Iw()}null!==this.co&&void 0!==this.co&&(t.Ew("rankValue",n.bI.OI,10),t.LS(this.co),t.Iw()),null!==this.timestamp&&void 0!==this.timestamp&&(t.Ew("timestamp",n.bI.DI,11),t.FS(this.timestamp),t.Iw()),null!==this.lo&&void 0!==this.lo&&(t.Ew("publicIpString",n.bI.FI,12),t.Tw(this.lo),t.Iw()),null!==this.uo&&void 0!==this.uo&&(t.Ew("privateIpString",n.bI.FI,13),t.Tw(this.uo),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.VN=function(t){this.partnerId=null,this.customerId=null,t&&(void 0!==t.partnerId&&(this.partnerId=t.partnerId),void 0!==t.customerId&&(this.customerId=t.customerId))},hive.DN.protocol.FN.VN.prototype={},hive.DN.protocol.FN.VN.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.FI?this.partnerId=t.fw().value:t.dw(i);break;case 2:i==n.bI.FI?this.customerId=t.fw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.VN.prototype.write=function(t){t.mw("CustomerKey"),null!==this.partnerId&&void 0!==this.partnerId&&(t.Ew("partnerId",n.bI.FI,1),t.Tw(this.partnerId),t.Iw()),null!==this.customerId&&void 0!==this.customerId&&(t.Ew("customerId",n.bI.FI,2),t.Tw(this.customerId),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.jN=function(t){this.GN=null,this.QN=null,t&&(void 0!==t.GN&&(this.GN=t.GN),void 0!==t.QN&&(this.QN=t.QN))},hive.DN.protocol.FN.jN.prototype={},hive.DN.protocol.FN.jN.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.GN=t.gw().value:t.dw(i);break;case 2:i==n.bI.NI?this.QN=t.gw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.jN.prototype.write=function(t){t.mw("TrackerAsQuery"),null!==this.GN&&void 0!==this.GN&&(t.Ew("asType",n.bI.NI,1),t.ww(this.GN),t.Iw()),null!==this.QN&&void 0!==this.QN&&(t.Ew("asn",n.bI.NI,2),t.ww(this.QN),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.KN=function(t){this.bitrate=null,this.QN=null,this.YN=null,t&&(void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.QN&&(this.QN=t.QN),void 0!==t.YN&&(this.YN=t.YN))},hive.DN.protocol.FN.KN.prototype={},hive.DN.protocol.FN.KN.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.bitrate=t.gw().value:t.dw(i);break;case 2:i==n.bI.MI?(this.QN=new hive.DN.protocol.FN.jN,this.QN.read(t)):t.dw(i);break;case 3:i==n.bI.NI?this.YN=t.gw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.KN.prototype.write=function(t){t.mw("TrackerBitrateQuery"),null!==this.bitrate&&void 0!==this.bitrate&&(t.Ew("bitrate",n.bI.NI,1),t.ww(this.bitrate),t.Iw()),null!==this.QN&&void 0!==this.QN&&(t.Ew("asn",n.bI.MI,2),this.QN.write(t),t.Iw()),null!==this.YN&&void 0!==this.YN&&(t.Ew("streamState",n.bI.NI,3),t.ww(this.YN),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.zN=function(t){this.JN=null,this.WN=null,t&&(void 0!==t.JN&&(this.JN=t.JN),void 0!==t.WN&&(this.WN=t.WN))},hive.DN.protocol.FN.zN.prototype={},hive.DN.protocol.FN.zN.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.JN=t.gw().value:t.dw(i);break;case 2:i==n.bI.MI?(this.WN=new hive.DN.protocol.FN.jN,this.WN.read(t)):t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.zN.prototype.write=function(t){t.mw("TrackerRankQuery"),null!==this.JN&&void 0!==this.JN&&(t.Ew("rankType",n.bI.NI,1),t.ww(this.JN),t.Iw()),null!==this.WN&&void 0!==this.WN&&(t.Ew("asQuery",n.bI.MI,2),this.WN.write(t),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.XN=function(t){this.random=null,this.ZN=null,this.$N=null,this.eD=null,this.tD=null,t&&(void 0!==t.random&&(this.random=t.random),void 0!==t.ZN&&(this.ZN=t.ZN),void 0!==t.$N&&(this.$N=t.$N),void 0!==t.eD&&(this.eD=t.eD),void 0!==t.tD&&(this.tD=t.tD))},hive.DN.protocol.FN.XN.prototype={},hive.DN.protocol.FN.XN.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.random=t.gw().value:t.dw(i);break;case 2:if(i==n.bI.BI){var o,s=0;this.ZN={},o=t.KS(),o.YS,o.zS,s=o.size;for(var a=0;a<s;++a){a>0&&t.US.length>t.Cw[t.Cw.length-1]+1&&t.US.pop();var h=null,u=null;h=new hive.DN.protocol.FN.jN,h.read(t),u=t.gw().value,this.ZN[h]=u}t.JS()}else t.dw(i);break;case 3:if(i==n.bI.BI){var c,f=0;this.$N={},c=t.KS(),c.YS,c.zS,f=c.size;for(var l=0;l<f;++l){l>0&&t.US.length>t.Cw[t.Cw.length-1]+1&&t.US.pop();var p=null,d=null;p=new hive.DN.protocol.FN.KN,p.read(t),d=t.gw().value,this.$N[p]=d}t.JS()}else t.dw(i);break;case 4:if(i==n.bI.BI){var v,g=0;this.eD={},v=t.KS(),v.YS,v.zS,g=v.size;for(var y=0;y<g;++y){y>0&&t.US.length>t.Cw[t.Cw.length-1]+1&&t.US.pop();var w=null,m=null;w=new hive.DN.protocol.FN.KN,w.read(t),m=t.gw().value,this.eD[w]=m}t.JS()}else t.dw(i);break;case 5:if(i==n.bI.xI){var b,E=0;this.tD=[],b=t.WS(),b.XS,E=b.size;for(var I=0;I<E;++I){var S=null;S=t.gw().value,this.tD.push(S)}t.ZS()}else t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.XN.prototype.write=function(t){if(t.mw("TrackerQuery"),null!==this.random&&void 0!==this.random&&(t.Ew("random",n.bI.NI,1),t.ww(this.random),t.Iw()),null!==this.ZN&&void 0!==this.ZN){t.Ew("asns",n.bI.BI,2),t.RS(n.bI.MI,n.bI.NI,n.YI(this.ZN));for(var e=0;e<this.ZN.length;e++){var i=this.ZN[e],r=i.key,o=i.value;r.write(t),t.ww(o)}t.bS(),t.Iw()}if(null!==this.$N&&void 0!==this.$N){t.Ew("watchers",n.bI.BI,3),t.RS(n.bI.MI,n.bI.NI,n.YI(this.$N));for(var e=0;e<this.$N.length;e++){var i=this.$N[e],s=i.key,a=i.value;s.write(t),t.ww(a)}t.bS(),t.Iw()}if(null!==this.eD&&void 0!==this.eD){t.Ew("streamers",n.bI.BI,4),t.RS(n.bI.MI,n.bI.NI,n.YI(this.eD));for(var e=0;e<this.eD.length;e++){var i=this.eD[e],h=i.key,u=i.value;h.write(t),t.ww(u)}t.bS(),t.Iw()}if(null!==this.tD&&void 0!==this.tD){t.Ew("rankings",n.bI.xI,5),t.PS(n.bI.NI,this.tD.length);for(var c in this.tD)this.tD.hasOwnProperty(c)&&(c=this.tD[c],t.ww(c));t.CS(),t.Iw()}t.Sw(),t.Rw()},hive.DN.protocol.FN.rD=function(t){this.JN=null,this.internalAs=null,this.externalAs=null,t&&(void 0!==t.JN&&(this.JN=t.JN),void 0!==t.internalAs&&(this.internalAs=t.internalAs),void 0!==t.externalAs&&(this.externalAs=t.externalAs))},hive.DN.protocol.FN.rD.prototype={},hive.DN.protocol.FN.rD.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.JN=t.gw().value:t.dw(i);break;case 2:i==n.bI.NI?this.internalAs=t.gw().value:t.dw(i);break;case 3:i==n.bI.NI?this.externalAs=t.gw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.rD.prototype.write=function(t){t.mw("TrackerPeerRankingKey"),null!==this.JN&&void 0!==this.JN&&(t.Ew("rankType",n.bI.NI,1),t.ww(this.JN),t.Iw()),null!==this.internalAs&&void 0!==this.internalAs&&(t.Ew("internalAs",n.bI.NI,2),t.ww(this.internalAs),t.Iw()),null!==this.externalAs&&void 0!==this.externalAs&&(t.Ew("externalAs",n.bI.NI,3),t.ww(this.externalAs),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.iD=function(t){this.key=null,this.nD=null,this.sD=null,this.oD=null,this.aD=null,t&&(void 0!==t.key&&(this.key=t.key),void 0!==t.nD&&(this.nD=t.nD),void 0!==t.sD&&(this.sD=t.sD),void 0!==t.oD&&(this.oD=t.oD),void 0!==t.aD&&(this.aD=t.aD))},hive.DN.protocol.FN.iD.prototype={},hive.DN.protocol.FN.iD.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.MI?(this.key=new hive.DN.protocol.FN.rD,this.key.read(t)):t.dw(i);break;case 2:i==n.bI.NI?this.nD=t.gw().value:t.dw(i);break;case 3:i==n.bI.NI?this.sD=t.gw().value:t.dw(i);break;case 4:i==n.bI.OI?this.oD=t.sR().value:t.dw(i);break;case 5:i==n.bI.OI?this.aD=t.sR().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.iD.prototype.write=function(t){t.mw("TrackerPeerRanking"),null!==this.key&&void 0!==this.key&&(t.Ew("key",n.bI.MI,1),this.key.write(t),t.Iw()),null!==this.nD&&void 0!==this.nD&&(t.Ew("ranking",n.bI.NI,2),t.ww(this.nD),t.Iw()),null!==this.sD&&void 0!==this.sD&&(t.Ew("groupSize",n.bI.NI,3),t.ww(this.sD),t.Iw()),null!==this.oD&&void 0!==this.oD&&(t.Ew("cumulatedRankValue",n.bI.OI,4),t.LS(this.oD),t.Iw()),null!==this.aD&&void 0!==this.aD&&(t.Ew("totalOfRankValues",n.bI.OI,5),t.LS(this.aD),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.hD=function(t){this.info=null,this.contentId=null,this.dn=null,this.streamType=null,this.sessionId=null,this.cD=null,t&&(void 0!==t.info&&(this.info=t.info),void 0!==t.contentId&&(this.contentId=t.contentId),void 0!==t.dn&&(this.dn=t.dn),void 0!==t.streamType&&(this.streamType=t.streamType),void 0!==t.sessionId&&(this.sessionId=t.sessionId),void 0!==t.cD&&(this.cD=t.cD))},hive.DN.protocol.FN.hD.prototype={},hive.DN.protocol.FN.hD.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.MI?(this.info=new hive.DN.protocol.FN.qN,this.info.read(t)):t.dw(i);break;case 2:i==n.bI.FI?this.contentId=t.fw().value:t.dw(i);break;case 3:i==n.bI.MI?(this.dn=new hive.DN.protocol.FN.XN,this.dn.read(t)):t.dw(i);break;case 4:i==n.bI.NI?this.streamType=t.gw().value:t.dw(i);break;case 5:i==n.bI.FI?this.sessionId=t.fw().value:t.dw(i);break;case 6:i==n.bI.MI?(this.cD=new hive.DN.protocol.FN.VN,this.cD.read(t)):t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.hD.prototype.write=function(t){t.mw("TrackerRequest"),null!==this.info&&void 0!==this.info&&(t.Ew("info",n.bI.MI,1),this.info.write(t),t.Iw()),null!==this.contentId&&void 0!==this.contentId&&(t.Ew("contentId",n.bI.FI,2),t.Tw(this.contentId),t.Iw()),null!==this.dn&&void 0!==this.dn&&(t.Ew("query",n.bI.MI,3),this.dn.write(t),t.Iw()),null!==this.streamType&&void 0!==this.streamType&&(t.Ew("streamType",n.bI.NI,4),t.ww(this.streamType),t.Iw()),null!==this.sessionId&&void 0!==this.sessionId&&(t.Ew("sessionId",n.bI.FI,5),t.Tw(this.sessionId),t.Iw()),null!==this.cD&&void 0!==this.cD&&(t.Ew("customerKey",n.bI.MI,6),this.cD.write(t),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.uD=function(t){this.lD=null,this.tD=null,this.Tk=null,this.sessionId=null,t&&(void 0!==t.lD&&(this.lD=t.lD),void 0!==t.tD&&(this.tD=t.tD),void 0!==t.Tk&&(this.Tk=t.Tk),void 0!==t.sessionId&&(this.sessionId=t.sessionId))},hive.DN.protocol.FN.uD.prototype={},hive.DN.protocol.FN.uD.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:if(i==n.bI.xI){var o,s=0;this.lD=[],o=t.WS(),o.XS,s=o.size;for(var a=0;a<s;++a){var h=null;h=new hive.DN.protocol.FN.qN,h.read(t),this.lD.push(h)}t.ZS()}else t.dw(i);break;case 2:if(i==n.bI.xI){var u,c=0;this.tD=[],u=t.WS(),u.XS,c=u.size;for(var f=0;f<c;++f){var l=null;l=new hive.DN.protocol.FN.iD,l.read(t),this.tD.push(l)}t.ZS()}else t.dw(i);break;case 3:i==n.bI.MI?(this.Tk=new hive.DN.protocol.FN.qN,this.Tk.read(t)):t.dw(i);break;case 4:i==n.bI.FI?this.sessionId=t.fw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.uD.prototype.write=function(t){if(t.mw("TrackerResponse"),null!==this.lD&&void 0!==this.lD){t.Ew("infos",n.bI.xI,1),t.PS(n.bI.MI,this.lD.length);for(var e in this.lD)this.lD.hasOwnProperty(e)&&(e=this.lD[e],e.write(t));t.CS(),t.Iw()}if(null!==this.tD&&void 0!==this.tD){t.Ew("rankings",n.bI.xI,2),t.PS(n.bI.MI,this.tD.length);for(var i in this.tD)this.tD.hasOwnProperty(i)&&(i=this.tD[i],i.write(t));t.CS(),t.Iw()}null!==this.Tk&&void 0!==this.Tk&&(t.Ew("peerInfo",n.bI.MI,3),this.Tk.write(t),t.Iw()),null!==this.sessionId&&void 0!==this.sessionId&&(t.Ew("sessionId",n.bI.FI,4),t.Tw(this.sessionId),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.pD=function(t){this.timestamp=null,this.contentId=null,this.GN=null,this.QN=null,this.bitrate=null,this.YN=null,this.JN=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.contentId&&(this.contentId=t.contentId),void 0!==t.GN&&(this.GN=t.GN),void 0!==t.QN&&(this.QN=t.QN),void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.YN&&(this.YN=t.YN),void 0!==t.JN&&(this.JN=t.JN))},hive.DN.protocol.FN.pD.prototype={},hive.DN.protocol.FN.pD.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.timestamp=t.gw().value:t.dw(i);break;case 2:i==n.bI.FI?this.contentId=t.fw().value:t.dw(i);break;case 3:i==n.bI.NI?this.GN=t.gw().value:t.dw(i);break;case 4:i==n.bI.NI?this.QN=t.gw().value:t.dw(i);break;case 5:i==n.bI.NI?this.bitrate=t.gw().value:t.dw(i);break;case 6:i==n.bI.NI?this.YN=t.gw().value:t.dw(i);break;case 7:i==n.bI.NI?this.JN=t.gw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.pD.prototype.write=function(t){t.mw("TrackerStoreIndexKey"),null!==this.timestamp&&void 0!==this.timestamp&&(t.Ew("timestamp",n.bI.NI,1),t.ww(this.timestamp),t.Iw()),null!==this.contentId&&void 0!==this.contentId&&(t.Ew("contentId",n.bI.FI,2),t.Tw(this.contentId),t.Iw()),null!==this.GN&&void 0!==this.GN&&(t.Ew("asType",n.bI.NI,3),t.ww(this.GN),t.Iw()),null!==this.QN&&void 0!==this.QN&&(t.Ew("asn",n.bI.NI,4),t.ww(this.QN),t.Iw()),null!==this.bitrate&&void 0!==this.bitrate&&(t.Ew("bitrate",n.bI.NI,5),t.ww(this.bitrate),t.Iw()),null!==this.YN&&void 0!==this.YN&&(t.Ew("streamState",n.bI.NI,6),t.ww(this.YN),t.Iw()),null!==this.JN&&void 0!==this.JN&&(t.Ew("rankType",n.bI.NI,7),t.ww(this.JN),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.fD=function(t){this.guid=null,this.dD=null,this.key=null,t&&(void 0!==t.guid&&(this.guid=t.guid),void 0!==t.dD&&(this.dD=t.dD),void 0!==t.key&&(this.key=t.key))},hive.DN.protocol.FN.fD.prototype={},hive.DN.protocol.FN.fD.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.FI?this.guid=t.oR().value:t.dw(i);break;case 2:i==n.bI.OI?this.dD=t.sR().value:t.dw(i);break;case 3:i==n.bI.MI?(this.key=new hive.DN.protocol.FN.rD,this.key.read(t)):t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.fD.prototype.write=function(t){t.mw("TrackerStoreRankPeer"),null!==this.guid&&void 0!==this.guid&&(t.Ew("guid",n.bI.FI,1),t.MS(this.guid),t.Iw()),null!==this.dD&&void 0!==this.dD&&(t.Ew("rank",n.bI.OI,2),t.LS(this.dD),t.Iw()),null!==this.key&&void 0!==this.key&&(t.Ew("key",n.bI.MI,3),this.key.write(t),t.Iw()),t.Sw(),t.Rw()},hive.DN.protocol.FN.gD=function(t){this.timestamp=null,this.TI=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.TI&&(this.TI=t.TI))},hive.DN.protocol.FN.gD.prototype={},hive.DN.protocol.FN.gD.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.DI?this.timestamp=t.nR().value:t.dw(i);break;case 2:i==n.bI.MI?(this.TI=new hive.DN.protocol.FN.hD,this.TI.read(t)):t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.DN.protocol.FN.gD.prototype.write=function(t){t.mw("TrackerRequestQueueMessage"),null!==this.timestamp&&void 0!==this.timestamp&&(t.Ew("timestamp",n.bI.DI,1),t.FS(this.timestamp),t.Iw()),null!==this.TI&&void 0!==this.TI&&(t.Ew("request",n.bI.MI,2),this.TI.write(t),t.Iw()),t.Sw(),t.Rw()}},function(t,e,i){"use strict";var n=i(4),r=function(){function t(t,e,i){this.start=t,this.end=e,this.total=i}return t.prototype.size=function(){var t=this.end-this.start+1;return Number.isInteger(t)||(n.ErrorMonitor.gi().di("Segment Size is a Float",{size:t}),t=Math.round(t)),0==this.end&&0==this.start?0:t},t.prototype.vD=function(){return 0==this.start&&(this.end==this.total-1||this.end==this.total&&0==this.total)},t.prototype.yD=function(){return this.end==this.total-1||this.end==this.total&&0==this.total},t.prototype.mD=function(t){return t.start<=this.start&&this.start<=t.end},t.prototype.toString=function(){return"R[S="+this.start+",E="+this.end+",T="+this.total+"]"},t}();e.ED=r;var o=function(){function t(){}return t.TD=function(t){return t.split("-")},t.ID=function(t){var e=t.split("=",4),i=e[1].substr(0,e[1].indexOf(",")),n=e[2].substr(0,e[2].indexOf(",")),o=e[3].substr(0,e[3].indexOf("]"));return new r(+i,+n,+o)},t}();e.wD=o},function(t,e){t.t=function(t){return t.SD||(t.RD=function(){},t.bD=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{l:!0,get:function(){return t.s}}),Object.defineProperty(t,"id",{l:!0,get:function(){return t.i}}),t.SD=1),t}},function(t,e){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};e.resolve=function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var o=r>=0?arguments[r]:process.PD();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,e="/"===o.charAt(0))}return t=i(n(t.split("/"),function(t){return!!t}),!e).join("/"),(e?"/":"")+t||"."},e.normalize=function(t){var r=e.AD(t),o="/"===s(t,-1);return t=i(n(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.AD=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.CD=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),o=n(i.split("/")),s=Math.min(r.length,o.length),a=s,h=0;h<s;h++)if(r[h]!==o[h]){a=h;break}for(var u=[],h=a;h<r.length;h++)u.push("..");return u=u.concat(o.slice(a)),u.join("/")},e.kD="/",e.OD=":",e._D=function(t){var e=o(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.ND=function(t,e){var i=o(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.DD=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}},function(t,e,i){"use strict";function n(t,e){Array.prototype[t]||Object.defineProperty(Array.prototype,t,{value:e,Ui:!0,u:!0,l:!1})}function r(t,e,i){this.fg=t,this.start=null==e?0:e,this.end=i}var o=(i(61),i(13)),s=i(62),a=i(34);t.t=Array;var h=Array.prototype.splice,u=Array.prototype.slice;Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=function(t){var e=[];return e.addEach(t),e},Array.So=function(t){for(var e=[],i=1/0,n=0;n<t.length;n++){var r=t[n];t[n]=r.toArray(),r.length<i&&(i=r.length)}for(var n=0;n<t.length;n++)for(var r=t[n],o=0;o<r.length;o++)o<i&&o in r&&(e[o]=e[o]||[],e[o][n]=r[o]);return e},n("addEach",o.prototype.addEach),n("deleteEach",o.prototype.do),n("toArray",o.prototype.toArray),n("toObject",o.prototype.vo),n("all",o.prototype.all),n("any",o.prototype.ht),n("min",o.prototype.min),n("max",o.prototype.max),n("sum",o.prototype.Eo),n("average",o.prototype.To),n("only",o.prototype.only),n("flatten",o.prototype.Io),n("zip",o.prototype.wo),n("enumerate",o.prototype.enumerate),n("group",o.prototype.group),n("sorted",o.prototype.Ro),n("reversed",o.prototype.reversed),n("constructClone",function(t){var e=new this.constructor;return e.addEach(t),e}),n("has",function(t,e){return-1!==this.find(t,e)}),n("set",function(t,e){return this[t]=e,!0}),n("add",function(t){return this.push(t),!0}),n("delete",function(t,e){var i=this.find(t,e);return-1!==i&&(this.splice(i,1),!0)}),n("deleteAll",function(t,e){e=e||this.ce||Object.ae;for(var i=0,n=0;n<this.length;)e(t,this[n])?(this.Yk(n,1),i++):n++;return i}),n("find",function(t,e){e=e||this.ce||Object.ae;for(var i=0;i<this.length;i++)if(i in this&&e(t,this[i]))return i;return-1}),n("findLast",function(t,e){e=e||this.ce||Object.ae;var i=this.length;do{if(--i in this&&e(this[i],t))return i}while(i>0);return-1}),n("swap",function(t,e,i){var n,r,o,s,a;if(t>this.length&&(this.length=t),void 0!==i){if(n=[t,e],Array.isArray(i)||(i=u.call(i)),o=0,(r=i.length)<1e3){for(o;o<r;o++)n[o+2]=i[o];return h.apply(this,n)}for(a=h.apply(this,n),o;o<r;){for(n=[t+o,0],s=2;s<1002&&o<r;s++,o++)n[s]=i[o];h.apply(this,n)}return a}return void 0!==e?h.call(this,t,e):void 0!==t?h.call(this,t):[]}),n("peek",function(){return this[0]}),n("poke",function(t){this.length>0&&(this[0]=t)}),n("peekBack",function(){if(this.length>0)return this[this.length-1]}),n("pokeBack",function(t){this.length>0&&(this[this.length-1]=t)}),n("one",function(){for(var t in this)if(Object.SP(this,t))return this[t]}),Array.prototype.clear||n("clear",function(){return this.length=0,this}),n("compare",function(t,e){e=e||Object.mo;var i,n,r,o,a;if(this===t)return 0;if(!t||!Array.isArray(t))return s.prototype.mo.call(this,t,e);for(n=Math.min(this.length,t.length),i=0;i<n;i++)if(i in this){if(!(i in t))return-1;if(r=this[i],o=t[i],a=e(r,o))return a}else if(i in t)return 1;return this.length-t.length}),n("equals",function(t,e){e=e||Object.ae;var i,n,r=0,o=this.length;if(this===t)return!0;if(!t||!Array.isArray(t))return s.prototype.ae.call(this,t);if(o!==t.length)return!1;for(;r<o;++r)if(r in this){if(!(r in t))return!1;if(i=this[r],n=t[r],!e(i,n))return!1}else if(r in t)return!1;return!0}),n("clone",function(t,e){if(null==t)t=1/0;else if(0===t)return this;if(e=e||new a,e.has(this))return e.get(this);var i=new Array(this.length);e.set(this,i);for(var n in this)i[n]=Object.clone(this[n],t-1,e);return i}),n("iterate",function(t,e){return new r(this,t,e)}),n("Iterator",r),r.prototype.zk=null,Object.defineProperty(r.prototype,"_iterationObject",{get:function(){return this.zk||(this.zk={done:!1,value:null})}}),r.prototype.next=function(){return this.start===(null==this.end?this.fg.length:this.end)?(this.Jk.done=!0,this.Jk.value=void 0):this.Jk.value=this.fg[this.start++],this.Jk}},function(t,e){t.t=Function,Function.he=function(){},Function.identity=function(t){return t},Function.bo=function(t,e){e=e||Object.mo,t=t||Function.identity;var i=function(i,n){return e(t(i),t(n))};return i.mo=e,i.bo=t,i},Function.get=function(t){return function(e){return Object.get(e,t)}}},function(t,e,i){function n(){throw new Error("Can't construct. GenericOrder is a mixin.")}var r=i(33);t.t=n,n.prototype.ae=function(t,e){return e=e||this.ce||r.ae,this===t||!!t&&(this.length===t.length&&this.wo(t).every(function(t){return e(t[0],t[1])}))},n.prototype.mo=function(t,e){if(e=e||this.yo||r.mo,this===t)return 0;if(!t)return 1;var i=Math.min(this.length,t.length),n=this.wo(t).reduce(function(t,n,r){return 0===t?r>=i?t:e(n[0],n[1]):t},0);return 0===n?this.length-t.length:n},n.prototype.toJSON=function(){return this.toArray()}},function(t,e,i){"use strict";function n(t,e,i,r){if(!(this instanceof n))return new n(t,e,i,r);e=e||Object.ae,i=i||Object.hash,r=r||Function.he,this.ce=e,this.ue=i,this.le=r,this.order=new this.FD(void 0,e),this.pe=new this.LD(void 0,function(t,i){return e(t.value,i.value)},function(t){return i(t.value)}),this.length=0,this.addEach(t)}var r=(i(12),i(46)),o=i(100),s=i(13),a=i(36),h=i(14),u=i(35),c=i(101);t.t=n,n.Set=n,Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),Object.addEach(n.prototype,h.prototype),Object.addEach(n.prototype,u.prototype),Object.defineProperty(n.prototype,"size",s.fe),n.prototype.FD=r,n.prototype.LD=o,n.prototype.de=function(t){return new this.constructor(t,this.ce,this.ue,this.le)},n.prototype.has=function(t){var e=new this.order.Node(t);return this.pe.has(e)},n.prototype.get=function(t,e){if(e)throw new Error("Set#get does not support second argument: equals");var i=new this.order.Node(t);return i=this.pe.get(i),i?i.value:this.le(t)},n.prototype.add=function(t){var e=new this.order.Node(t);if(!this.pe.has(e)){var i=this.length;return this.qk&&this.UP([t],[],i),this.order.add(t),e=this.order.head.Mk,this.pe.add(e),this.length++,this.qk&&this.LP([t],[],i),!0}return!1},n.prototype.delete=function(t,e){if(e)throw new Error("Set#delete does not support second argument: equals");var i=new this.order.Node(t);return!!this.pe.has(i)&&(i=this.pe.get(i),this.qk&&this.UP([],[t],i.index),this.pe.delete(i),this.order.splice(i,1),this.length--,this.qk&&this.LP([],[t],i.index),!0)},n.prototype.pop=function(){if(this.length){var t=this.order.head.Mk.value;return this.delete(t),t}},n.prototype.shift=function(){if(this.length){var t=this.order.head.next.value;return this.delete(t),t}},n.prototype.Po=function(){if(this.length>0)return this.pe.Po().value},n.prototype.clear=function(){var t;this.qk&&(t=this.toArray(),this.UP([],t,0)),this.pe.clear(),this.order.clear(),this.length=0,this.qk&&this.LP([],t,0)},n.prototype.reduce=function(t,e){var i=arguments[2],n=0;return this.order.reduce(function(e,r){return t.call(i,e,r,n++,this)},e,this)},n.prototype.reduceRight=function(t,e){var i=arguments[2],n=this.order,r=this.length-1;return n.reduceRight(function(e,n){return t.call(i,e,n,r--,this)},e,this)},n.prototype.Ao=function(){return this.order.Ao()},n.prototype.values=function(){return new c(this)},n.prototype.log=function(){var t=this.pe;return t.log.apply(t,arguments)},n.prototype.xo=function(){this.order.xo()}},function(t,e,i){"use strict";function n(){}t.t=n,n.MD={qP:"+",BD:"-",UD:"+",xD:"+",HD:".",qD:"'",VD:"+",jD:"|"},n.GD={qP:"╋",BD:"━",UD:"┻",xD:"┳",HD:"╭",qD:"╰",VD:"┣",jD:"┃"},n.QD={qP:"╋",BD:"━",UD:"┻",xD:"┳",HD:"┏",qD:"┗",VD:"┣",jD:"┃"}},function(t,e,i){"use strict";var n=function(){function t(){}return t}();n.oA="127.0.0.1",n.uO=11983,n.aA="//{0}:{1}/proxy/?callback={2}{3}hivePluginId={4}",n.KD="//{0}:{1}/proxy/{2}/session?manifest={3}",n.hO="//{0}:{1}/proxy/{2}/player?req={3}",n.YD="//{0}:{1}/proxy/{2}/info?{3}",e.cO=n},function(t,e,i){"use strict";var n=i(6),r=i(4),o=function(){function t(t){this.mn="[HiveXHR] ",this.DONE=4,this.LOADING=3,this.HEADERS_RECEIVED=2,this.OPENED=1,this.UNSENT=0,this.username=null,this.password=null,this.zD=[],this.responseType="",this.readyState=this.UNSENT,this.status=0,this.async=!0,this.timeout=0,this.events={},t&&(this.sessionId=t)}return t.prototype.addEventListener=function(t,e,i){this.events[t]=this.events[t]||[],this.events[t].push(e)},t.prototype.removeEventListener=function(t,e,i){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}))},t.prototype.dispatchEvent=function(t){var e=this;this.events[t.type]&&this.events[t.type].forEach(function(i){try{"function"==typeof i?i.call(e,t):"function"==typeof i.E_&&i.E_(t)}catch(i){r.ErrorMonitor.gi().di(e.mn+"Error in callback handler '"+t.type+"'",{error:i})}});var i=this["on"+t.type];if("function"==typeof i)try{i.call(this,t)}catch(e){r.ErrorMonitor.gi().di(this.mn+"Error in callback handler '"+t.type+"'",{error:e})}return!1},t.prototype.msCachingEnabled=function(){return void 0!==this.msCaching},t.prototype.overrideMimeType=function(t){this.mimeType=t},t.register=function(e,i){t.EI[e]=i},t.prototype.JD=function(e){this.sessionId||(this.sessionId=t.EI[e])},t.prototype.open=function(t,e,i,r,o){void 0===i&&(i=!0),void 0===r&&(r=null),void 0===o&&(o=null),this.url=e.trim(),this.method=t,this.username=r,this.password=o,this.async=i,this.readyState=this.OPENED;var s=n.fn.createEvent(Event,"readystatechange",{currentTarget:this});this.dispatchEvent(s)},t.prototype.setRequestHeader=function(t,e){if(this.readyState!==this.OPENED)throw new Error("The object's state must be OPENED.");this.zD.push({key:t,value:e})},t.prototype.getResponseHeader=function(t){var e=this.getAllResponseHeaders();if(e){var i=[];return e.split(/[\r\n]+/).forEach(function(t){var e=t.match(/^([^:]+): ?(.+)$/);e&&(i[e[1]]=e[2])}),i[t.toLowerCase()]}return null},t.prototype.getAllResponseHeaders=function(){return this.xu},t.prototype.onload=function(t){},t.prototype.onloadend=function(t){},t.prototype.onerror=function(t){},t.prototype.onprogress=function(t){},t.prototype.onreadystatechange=function(t){},t.prototype.onabort=function(t){},t.prototype.onloadstart=function(t){},t.prototype.ontimeout=function(t){},t}();o.EI={},o.Ul=0,e.SI=o},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(50),o=i(6),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.bn=function(t,i){e.WD[i]=t},e.XD=function(t,i){e.ZD[i]=t},e.prototype.send=function(){if(!this.sessionId){var t=Object.keys(e.ZD);t.length>0&&(this.sessionId=e.ZD[t[0]])}var i=e.WD[this.sessionId],n=e.ZD[this.sessionId];n.te().debug("Intercepted Manifest Request "+this.url),i.$D(this),n.eF(this.url)},e.prototype.tF=function(){var t=this,e=new XMLHttpRequest;e.open("GET",this.url),e.onreadystatechange=function(i){4===e.readyState&&(t.response=e.responseText,t.responseText=e.responseText,t.readyState=4,t.status=e.status,t.onreadystatechange(o.fn.createEvent(Event,"readystatechange",i,t)),t.onload(o.fn.createEvent(ProgressEvent,"load",i,t)),console.debug("Returned Manifest Request "+t.url))},e.send()},e.prototype.rF=function(){t.prototype.send.call(this)},e}(r.In);s.ZD={},s.WD={},e.wn=s},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(15),o=i(0),s=i(29),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.II=function(){return e.app="JS",o.Framework.resolve(r.Pa.pa)},e}(s.Hive);e.wI=a},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(28),o=i(70),s=i(4),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mn="[HiveRequestManifest]",e}return n(e,t),e.bn=function(t,i){e.WD[i]=t},e.XD=function(t,i){e.ZD[i]=t},e.prototype.send=function(){if(!this.sessionId){var t=Object.keys(e.ZD);t.length>0&&(this.sessionId=e.ZD[t[0]])}var i=e.WD[this.sessionId],n=e.ZD[this.sessionId];o.iF(i)||o.iF(n)?(s.ErrorMonitor.gi().di("HiveJS Tech or Comm are not defined",this.mn),this.resolve()):(n.te().debug("Intercepted Manifest Request "+this.url),i.$D(this),n.eF(this.url))},e.prototype.resolve=function(){var t=this,e=new XMLHttpRequest;e.open("GET",this.url),e.onreadystatechange=function(){4===e.readyState&&(t.response=e.responseText,t.responseText=e.responseText,t.readyState=4,t.status=e.status,t.dispatchEvent(new Event("readystatechange")),t.dispatchEvent(new ProgressEvent("onload")),console.debug("Returned Manifest Request "+t.url))},e.send()},e}(r.HiveRequest);a.ZD={},a.WD={},e.vn=a},function(t,e,i){function n(t,i){var n={nF:[],sF:o};return arguments.length>=3&&(n.oF=arguments[2]),arguments.length>=4&&(n.aF=arguments[3]),d(i)?n.hF=i:i&&e.cF(n,i),b(n.hF)&&(n.hF=!1),b(n.oF)&&(n.oF=2),b(n.aF)&&(n.aF=!1),b(n.uF)&&(n.uF=!0),n.aF&&(n.sF=r),a(n,t,n.oF)}function r(t,e){var i=n.lF[e];return i?"["+n.aF[i][0]+"m"+t+"["+n.aF[i][1]+"m":t}function o(t,e){return t}function s(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}function a(t,i,n){if(t.uF&&i&&O(i.Ee)&&i.Ee!==e.Ee&&(!i.constructor||i.constructor.prototype!==i)){var r=i.Ee(n,t);return w(r)||(r=a(t,r,n)),r}var o=h(t,i);if(o)return o;var d=Object.keys(i),v=s(d);if(t.hF&&(d=Object.getOwnPropertyNames(i)),R(i)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return u(i);if(0===d.length){if(O(i)){var g=i.name?": "+i.name:"";return t.sF("[Function"+g+"]","special")}if(E(i))return t.sF(RegExp.prototype.toString.call(i),"regexp");if(S(i))return t.sF(Date.prototype.toString.call(i),"date");if(R(i))return u(i)}var y="",m=!1,b=["{","}"];if(p(i)&&(m=!0,b=["[","]"]),O(i)&&(y=" [Function"+(i.name?": "+i.name:"")+"]"),E(i)&&(y=" "+RegExp.prototype.toString.call(i)),S(i)&&(y=" "+Date.prototype.toUTCString.call(i)),R(i)&&(y=" "+u(i)),0===d.length&&(!m||0==i.length))return b[0]+y+b[1];if(n<0)return E(i)?t.sF(RegExp.prototype.toString.call(i),"regexp"):t.sF("[Object]","special");t.nF.push(i);var I;return I=m?c(t,i,n,v,d):d.map(function(e){return f(t,i,n,v,e,m)}),t.nF.pop(),l(I,y,b)}function h(t,e){if(b(e))return t.sF("undefined","undefined");if(w(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.sF(i,"string")}return y(e)?t.sF(""+e,"number"):d(e)?t.sF(""+e,"boolean"):v(e)?t.sF("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,i,n,r){for(var o=[],s=0,a=e.length;s<a;++s)A(e,String(s))?o.push(f(t,e,i,n,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,i,n,r,!0))}),o}function f(t,e,i,n,r,o){var s,h,u;if(u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},u.get?h=u.set?t.sF("[Getter/Setter]","special"):t.sF("[Getter]","special"):u.set&&(h=t.sF("[Setter]","special")),A(n,r)||(s="["+r+"]"),h||(t.nF.indexOf(u.value)<0?(h=v(i)?a(t,u.value,null):a(t,u.value,i-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.sF("[Circular]","special")),b(s)){if(o&&r.match(/^\d+$/))return h;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.sF(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.sF(s,"string"))}return s+": "+h}function l(t,e,i){var n=0;return t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return null==t}function y(t){return"number"==typeof t}function w(t){return"string"==typeof t}function m(t){return"symbol"==typeof t}function b(t){return void 0===t}function E(t){return I(t)&&"[object RegExp]"===C(t)}function I(t){return"object"==typeof t&&null!==t}function S(t){return I(t)&&"[object Date]"===C(t)}function R(t){return I(t)&&("[object Error]"===C(t)||t instanceof Error)}function O(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function C(t){return Object.prototype.toString.call(t)}function N(t){return t<10?"0"+t.toString(10):t.toString(10)}function k(){var t=new Date,e=[N(t.getHours()),N(t.getMinutes()),N(t.getSeconds())].join(":");return[t.getDate(),x[t.getMonth()],e].join(" ")}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var P=/%[sdj%]/g;e.format=function(t){if(!w(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(n(arguments[i]));return e.join(" ")}for(var i=1,r=arguments,o=r.length,s=String(t).replace(P,function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return t}}),a=r[i];i<o;a=r[++i])v(a)||!I(a)?s+=" "+a:s+=" "+n(a);return s},e.RD=function(t,i){function n(){if(!r){if(process.pF)throw new Error(i);process.fF?console.trace(i):console.error(i),r=!0}return t.apply(this,arguments)}if(b(global.process))return function(){return e.RD(t,i).apply(this,arguments)};if(!0===process.dF)return t;var r=!1;return n};var _,D={};e.gF=function(t){if(b(_)&&(_=process.De.vF||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(_)){var i=process.yF;D[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else D[t]=function(){};return D[t]},e.Ee=n,n.aF={bold:[1,22],mF:[3,23],EF:[4,24],inverse:[7,27],TF:[37,39],IF:[90,39],wF:[30,39],blue:[34,39],SF:[36,39],green:[32,39],RF:[35,39],red:[31,39],bF:[33,39]},n.lF={PF:"cyan",number:"yellow",AF:"yellow",undefined:"grey",CF:"bold",qb:"green",uv:"magenta",kF:"red"},e.isArray=p,e.Jf=d,e.Xf=v,e.iF=g,e.Zf=y,e.$f=w,e.OF=m,e.td=b,e._F=E,e.Jo=I,e.NF=S,e.DF=R,e.Wf=O,e.FF=T,e.isBuffer=i(105);var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",k(),e.format.apply(e,arguments))},e.zI=i(106),e.cF=function(t,e){if(!e||!I(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}},function(t,e,i){"use strict";var n=i(7),r=i(1),o=i(30);i(112),i(113);var s=i(0),a=i(9),h=i(24),u=i(21),c=i(19),f=i(8),l=i(4),p=i(7);!function(t){var e=function(){function t(){this.metrics=new hive.snapshots.Metrics,this.LF=new hive.snapshots.Traffic,this.MF=new r,this.BF=new r,this.UF=new r,this.player=new hive.snapshots.Player}return t}();t.xF=e;var i=function(){function e(){this.ticket=null,this.HF=0,this.qF=0,this.VF()}return e.prototype.init=function(t,e,i,n){this.te=s.Framework.resolve(s.Framework.q.I).log(n),this.dh=s.Framework.resolve(a.Qs.Us),this.te.debug("[SNAP] INIT STATS STORE - ID: "+t),this.Eh=t,this.ticket=e,this.Th(i)},e.prototype.jF=function(t){this.GF=t},e.prototype.Th=function(t){this.app=t},e.prototype.QF=function(t){this.wC=t},e.prototype.VF=function(){this.KF=new t.xF,this.Eh=null,this.ticket=null,this.reset()},e.prototype.reset=function(){this.N_=new t.xF,this.YF(this.N_.LF),this.zF(this.N_)},e.prototype.YF=function(t){t.reqN=0,t.respFallbackN=0,t.respFallbackErrN=0,t.respP2pN=0,t.reqOtherN=0,t.respFallbackOtherN=0,t.respFallbackOthertErrN=0,t.srcReqN=0,t.srcRespN=0,t.srcRespErrN=0,t.srcReqQt=0,t.srcRespQt=0,t.srcOverQt=0,t.srcOtherReqN=0,t.srcOtherRespN=0,t.srcOtherRespErrN=0,t.srcOtherReqQt=0,t.srcOtherRespQt=0,t.srcOtherOverQt=0,t.p2pSubReqN=0,t.p2pSubRespN=0,t.p2pSubRespPartN=0,t.p2pSubRespErrN=0,t.p2pSubRespExpN=0,t.p2pSubReqQt=0,t.p2pSubRespQt=0,t.p2pDirectQt=0,t.p2pRelayQt=0,t.p2pNatQt=0,t.p2pUdpbQt=0,t.fallAgentRespN=0,t.fallAgentPredHitN=0,t.fallAgentFailedRespN=0,t.fallAgenTrafficSuccessQt=0,t.p2pAgentPredHitN=0,t.p2pAgentPredMissN=0,t.p2pAgentPredPartialHitN=0,t.p2pAgenTrafficSuccessQt=0,t.p2pAgenTrafficFailureQt=0},e.prototype.zF=function(t){t.metrics.videoBufN=0,t.metrics.videoBufQt=0,t.metrics.clientBufferMs=0,t.metrics.lookupNotFound=0,t.metrics.lookupTotal=0,t.metrics.lookupLatency=0,t.metrics.lookupReqAccept=0,t.metrics.lookupReqEstablished=0,t.metrics.lookupFailed=0,t.player.bufferingN=0,t.player.bufferingMs=0},e.prototype.Co=function(t){var e=this;void 0===t&&(t=!0);var i=new hive.snapshots.MetricSnapshot;i.timestamp=s.Framework.time(),i.guid=this.Eh,i.sessionId=this.ticket.sessionId,i.eventId=new EventId,i.eventId.partnerId=this.ticket.Lh(),i.eventId.customerId=this.ticket.Mh(),i.eventId.contentId=this.ticket.Xc();try{var r=new hive.snapshots.ClientInfo;r.clientType=this.JF();var o=this.app.version.split(".");r.majorVersion=parseInt(o[0]),r.minorVersion=parseInt(o[1]),r.patchVersion=parseInt(o[2]),i.client=r}catch(t){this.te.warn("[SNAP] error setting Snapshot ClientInfo",t)}if(this.wC){var a=new hive.snapshots.AgentInfo;a.firstTierBitrates=this.wC.WF(),a.secondTierBitrates=this.wC.XF(),i.agentInfo=a}i.streamInfo=this.R_.ZF(),i.traffic=[];var h=new hive.snapshots.TrafficKey;if(i.traffic.push({key:h,value:this.N_.LF}),this.N_.MF.forEach(function(t,e){var n=new hive.snapshots.TrafficKey;n.bitrate=e,i.traffic.push({key:n,value:t})}),i.metrics=this.N_.metrics,this.GF&&(i.metrics.clientBufferMs=this.GF.min()),i.player=this.N_.player,this.$F){var u=this.$F.eL();this.N_.metrics.prtOutN=u.tL+u.rL,this.N_.metrics.prtInN=u.iL+u.nL;var c=this.$F.sL();c.forEach(function(t,n){e.oL(n,t,i)}),this.N_.UF.filter(function(t,e){return!c.has(e)}).forEach(function(t,n){e.oL(n,t,i)})}return i.connInfo=new hive.snapshots.ConnectivityInfo,t?this.dh.Vh().then(function(t){return i.connInfo.privateIp=n._s.Cs(t.Qh()),e.aL(e.hL(i))}).fail(function(t){return e.aL(e.hL(i))}):(i.connInfo.privateIp=n._s.Cs(this.dh.Gh().Qh()),this.aL(i))},e.prototype.hL=function(t){return t.connInfo.internalAs=this.HF,t.connInfo.externalAs=this.qF,t.connInfo.publicIp=this.cL,t},e.prototype.aL=function(t,e){void 0===e&&(e=[]);var i=p.cs(t,"snapshot");return i.length&&l.ErrorMonitor.gi().di("NaN found in MetricSnapshot","[SNAP]",{keysWithNaN:i,snapshot:t}),e.length=0,e.push.apply(e,i),t},e.prototype.JF=function(){var t;switch(this.app.app){case"JS":t=ClientType.uL;break;case"PROXY":t=ClientType.lL;break;default:t=ClientType.pL}return t},e.prototype.oL=function(t,e,i){var n=this.N_.BF.get(t);e.traffic=n,i.partners||(i.partners=[]);var r=new hive.snapshots.PartnerKey;r.partnerGuid=t,i.partners.push({key:r,value:e})},e.prototype.y_=function(t,e){t>0&&(this.N_.metrics.videoBufN++,this.N_.metrics.videoBufQt+=t,this.N_.player.bufferingN++,this.N_.player.bufferingMs+=t),this.N_.player.playerBufferMs=e},e.prototype.M_=function(){return this.N_.LF},e.prototype.fL=function(){return this.KF.LF},e.prototype.dL=function(t){return this.KF.MF.has(t)||this.KF.MF.set(t,new hive.snapshots.Traffic),this.KF.MF.get(t)},e.prototype.F_=function(t){if(!this.N_.MF.has(t)){var e=new hive.snapshots.Traffic;this.YF(e),this.N_.MF.set(t,e)}return this.N_.MF.get(t)},e.prototype.gL=function(){var t=new hive.snapshots.PartnerTraffic;return t.p2pSuccReq=0,t.p2pFailReq=0,t.p2pPartReq=0,t.p2pSuccReceived=0,t.p2pSuccReceivedLow=0,t.p2pFailReceived=0,t.p2pSuccResp=0,t.p2pFailResp=0,t.p2pPartResp=0,t.p2pSuccSent=0,t.p2pSuccSentLow=0,t.p2pFailSent=0,t},e.prototype.vL=function(t,e){return e.BF.has(t)||e.BF.set(t,this.gL()),e.BF.get(t)},e.prototype.yL=function(t){return this.vL(t,this.N_)},e.prototype.mL=function(t){return this.vL(t,this.KF)},e.prototype.EL=function(t){this.dh=t},e.prototype.TL=function(t){this.$F=t},e.prototype.Zh=function(t){},e}();t.LD=i;var d=function(){function t(){this.IL=isNaN(f.HiveConfig.DebugLogs.MetricSnapshotLogs)?0:f.HiveConfig.DebugLogs.MetricSnapshotLogs,this.state=c._c.Oc,this.client=s.Framework.resolve(a.Qs.H),this.Pl=new o.Pw,this.protocol=new o.nS(this.Pl)}return t.prototype.init=function(t,e){this.te=s.Framework.resolve(s.Framework.q.I).log(e),this.te.debug("[SNAP] INIT CLIENT STATS"),this.pe=t,this.wL()},t.prototype.wL=function(){var t=this;this.SL>-1&&s.Framework.clearInterval(this.SL),this.SL=s.Framework.setInterval(function(){t.snapshot()},h.nc.ic.up)},t.prototype.On=function(t){this.state=t},t.prototype.d_=function(){if(this.pe)return this.snapshot(!1)},t.prototype.reset=function(t){s.Framework.clearInterval(this.SL),this.pe&&(!1===t?this.pe.reset():this.pe.VF())},t.prototype.snapshot=function(t){var e=this;void 0===t&&(t=!0);var i=this.pe.Co(t);t?(this.te.debug("[SNAP] TAKING SNAPSHOT"),i.then(function(t){return e.forward(t)}).fail(function(t){e.te.warn("[SNAP] ERROR FORWARDING SNAPSHOT",t)}).finally(function(){e.pe.reset()})):(this.te.debug("[SNAP] FLUSHING SNAPSHOT"),this.forward(i))},t.prototype.forward=function(t){var e=this;if(this.state===c._c.IDLE)return void this.te.debug("[SNAP] not send - state idle");if(this.client&&this.client.lc()){switch(this.IL){case 0:default:this.te.debug("[SNAP] SENDING SNAPSHOT");break;case 1:this.te.debug("[SNAP] SENDING SNAPSHOT "+JSON.stringify(t));break;case 2:this.te.debug("[SNAP] SENDING SNAPSHOT",t);break;case 3:this.te.debug("[SNAP] SENDING SNAPSHOT "+JSON.stringify(t),t)}this.protocol.vS("SNAPSHOT",o.VI.KI,0),t.write(this.protocol),this.protocol.ES();var i=this.Pl.Qw(),n=this.RL(i,",",4),r=i.slice(n+1,i.length-1),s=new u.pc(Services.fc,1,r);this.client.lc().send(s).fail(function(t){e.te.warn("[SNAP] PROBLEM: ",t)})}},t.prototype.RL=function(t,e,i){return t.split(e,i).join(e).length},t}();t.vc=d}(e.Stats||(e.Stats={}))},function(t,e,i){"use strict";var n=i(2),r=i(27),o=i(114),s=i(0),a=i(24),h=i(21),u=i(5),c=u.Rt.Ri,f=function(){function t(){this.te=s.Framework.resolve(s.Framework.q.I).log(),this.te.debug("INIT SERVICE CLIENT")}return t.prototype.init=function(t,e){var i=this;if(this.bL)this.bL.then(function(){var t={partnerId:e.Lh(),customerId:e.Mh(),contentId:e.Xc(),secret:e.OA()},n=new h.pc(Services.PL,1,JSON.stringify(t));i.connection.send(n)});else{var s=n.defer(),u=a.nc.ic.ap;e.kA&&(c?u=a.nc.ic.hp:(this.te.warn("[HiveComm] Error trying to resolve test ticket against production services - use production ticket or test plugin"),s.reject(new Error("test ticket in production"))));var f=new r(u),l=f.OT({"connection-id":t,partner_id:e.Lh(),customer_id:e.Mh(),content_id:e.Xc(),ticket:e.OA()}).toString();this.connection=new o.AL(l,a.nc.ic.lp,a.nc.ic.pp,a.nc.ic.fp),this.connection.CL(function(){i.te.debug("HIVE SERVICES CONNECTED"),s.resolve(i.connection)}),this.connection.onerror(function(){i.te.warn("Hive Services Connection failed"),s.reject(i.connection)}),this.bL=s.Te}return{zc:this.connection,Te:this.bL}},t.prototype.connect=function(){this.connection&&this.connection.connect(!0)},t.prototype.kL=function(t){},t.prototype.lc=function(){return this.connection},t.prototype.close=function(){this.connection&&(this.bL=null,this.connection.close(!1))},t}();e.OL=f},function(t,e,i){"use strict";i(115);var n=i(2),r=i(1),o=i(0),s=i(42),a=function(){function t(t){this.yc=(new Date).getTime(),this._L=t}return t}(),h=function(){function t(){this.NL=new r,this.te=(o.Framework.resolve(o.Framework.q.I)||console).log(),this.te.debug("INIT TICKET RESOLVER")}return t.prototype.resolve=function(t,e,i){var r=this,o=n.defer();return t&&(t.on(Services.PL,0,function(t){r.DL(t)}),t.on(Services.PL,2,function(t){r.DL(t)}),this.NL.set(e,new a(o))),o.Te},t.prototype.DL=function(t){var e=this,i=(new Date).getTime(),n=JSON.parse(t.msg),r=!1;this.NL.forEach(function(t,o){if(e.FL(o,n)){r=!0;var s=e.LL(o,n);s?(s.yc=t.yc,s.mc=i,t._L.resolve(s)):t._L.reject("Ticket verification failed"),e.NL.delete(s)}}),r||this.te.warn("no pending ticket matching: "+t.msg)},t.prototype.Gc=function(t){if(new RegExp("^https?://api(?:-test)?.hivestreaming.com/v1/events/(?:wildcard/)?").test(t)){var e=this.ML();return e.AA(t),e}return null},t.prototype.ML=function(){return new s.VA},t.prototype.FL=function(t,e){return t.Lh()===e[s.VA.HA]&&t.Mh()===e[s.VA.xA]&&t.Xc()===e[s.VA.qA]},t.prototype.LL=function(t,e){return t.RA(e),t.PA()?t:null},t}();e.BL=h},function(t,e,i){/*! uuid.js
 * Copyright (c) 2010-2012 Robert Kieffer
 * MIT License - http://opensource.org/licenses/mit-license.php
 */
!function(e){"use strict";function n(t,e,i){var n=e&&i||0,r=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){r<16&&(e[n+r++]=d[t])});r<16;)e[n+r++]=0;return e}function r(t,e){var i=e||0,n=p;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}function o(t,e,i){var n=e&&i||0,o=e||[];t=t||{};var s=null!=t.UL?t.UL:w,a=null!=t.xL?t.xL:(new Date).getTime(),h=null!=t.HL?t.HL:b+1,u=a-m+(h-b)/1e4;if(u<0&&null==t.UL&&(s=s+1&16383),(u<0||a>m)&&null==t.HL&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=a,b=h,w=s,a+=122192928e5;var c=(1e4*(268435455&a)+h)%4294967296;o[n++]=c>>>24&255,o[n++]=c>>>16&255,o[n++]=c>>>8&255,o[n++]=255&c;var f=a/4294967296*1e4&268435455;o[n++]=f>>>8&255,o[n++]=255&f,o[n++]=f>>>24&15|16,o[n++]=f>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(var l=t.qL||y,p=0;p<6;p++)o[n+p]=l[p];return e||r(o)}function s(t,e,i){var n=e&&i||0;"string"==typeof t&&(e="binary"===t?new l(16):null,t=null),t=t||{};var o=t.random||(t.VL||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;s++)e[n+s]=o[s];return e||r(o)}var a,h,u,c,f;e?function(){var t=e.crypto||e.msCrypto;if(!a&&t&&t.getRandomValues)try{var i=new Uint8Array(16);c=a=function(){return t.getRandomValues(i),i},a()}catch(t){}if(!a){var n=new Array(16);h=a=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}():function(){try{var t=i(116).jL;u=a=t&&function(){return t(16)},a()}catch(t){}}();for(var l="function"==typeof Buffer?Buffer:Array,p=[],d={},v=0;v<256;v++)p[v]=(v+256).toString(16).substr(1),d[p[v]]=v;var g=a(),y=[1|g[0],g[1],g[2],g[3],g[4],g[5]],w=16383&(g[6]<<8|g[7]),m=0,b=0,E=s;E.GL=o,E.FA=s,E.parse=n,E.QL=r,E.KL=l,E.YL=a,E.zL=h,E.JL=u,E.WL=c,void 0!==t&&t.t?t.t=E:(f=e.Ck,E.wt=function(){return e.Ck=f,E},e.Ck=E)}("undefined"!=typeof window?window:null)},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(2),o=i(74),s=i(0),a=i(24),h=i(117),u=function(){function t(){this.XL="IdentityStore",this.ZL="IdentityDB",this.Eh=null,this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,s.Framework&&s.Framework.resolve(s.Framework.q.I)?this.te=s.Framework.resolve(s.Framework.q.I).log():this.te=console}return t.prototype.$L=function(){var t=this,e=r.defer(),i=indexedDB.open(this.ZL);return i.onupgradeneeded=function(){i.result.createObjectStore(t.XL,{keyPath:"id"})},i.onsuccess=function(){var t=i.result;e.resolve(t)},i.onerror=function(t){e.reject(t)},e.Te},t.prototype.jc=function(){var t=this;if(this.eM)return this.eM;var e=r.defer();if(this.Eh)e.resolve(new h.tM(this.Eh));else if(a.nc.bi&&this.indexedDB){var i=setTimeout(function(){t.te.warn("[HiveComm] timeout retrieving persistent ID - generating random one"),t.Eh=t.rM(),t.te.debug("[HiveComm] Generated UUID: "+t.Eh),e.resolve(new h.tM(t.Eh))},4e3);try{var n=this.$L();n.then(function(n){var r=n.transaction(t.XL,"readwrite"),o=r.objectStore(t.XL),s=o.get("MYID");s.onsuccess=function(){if(clearTimeout(i),t.Eh)e.resolve(new h.tM(t.Eh));else if(null!=s.result&&a.nc.bi){var r=s.result.value;t.te.debug("[HiveComm] Retrieved persistent UUID: "+r),t.Eh=r,n.close(),e.resolve(new h.tM(t.Eh))}else{var o=t.rM();t.iM(n,o),e.resolve(new h.tM(t.Eh))}},s.onerror=function(n){clearTimeout(i),t.Eh||(t.te.warn("[HiveComm] error retrieving persistent UUID: "+n),t.Eh=t.rM(),t.te.debug("[HiveComm] Generated UUID: "+t.Eh)),e.resolve(new h.tM(t.Eh))}}).fail(function(n){clearTimeout(i),t.Eh||(t.te.warn("[HiveComm] error opening indexedDB - generating random id. Error: "+n),t.Eh=t.rM(),t.te.debug("[HiveComm] Generated UUID: "+t.Eh)),e.resolve(new h.tM(t.Eh))})}catch(t){this.Eh=this.rM(),this.te.debug("[HiveComm] Persistence error - Generate UUID: "+this.Eh,t),e.resolve(new h.tM(this.Eh))}}else this.Eh=this.rM(),this.te.debug("[HiveComm] Persistence disabled - Generate UUID: "+this.Eh),e.resolve(new h.tM(this.Eh));return this.eM=e.Te,this.eM},t.prototype.iM=function(t,e){var i=this,n=t.transaction(this.XL,"readwrite");n.objectStore(this.XL).put({id:"MYID",value:e}),n.oncomplete=function(){i.te.debug("[HiveComm] completed UUID persistence"),t.close()},this.te.debug("[HiveComm] Generated UUID: "+e),this.Eh=e},t.prototype.rM=function(){return o.FA()},t}();e.nM=u;var c=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.jc=function(){var e=this;if(this.sM)return this.sM;var i=r.defer();return t.prototype.jc.call(this).then(function(t){var n=e.rM(),r=t.Yc(),o=new h.tM(n,r);i.resolve(o)}).fail(function(t){var n=e.rM(),r=new h.tM(n);i.resolve(r)}),this.sM=i.Te,this.sM},e}(u);e.oM=c},function(t,e,i){"use strict";var n=function(){function t(){}return t.prototype.aM=function(t){this.hostname=t},t.prototype.Os=function(){return this.hostname},t.prototype.hM=function(t){this.cM=t},t.prototype.Qh=function(){return this.cM},t}();e.uM=n},function(t,e,i){"use strict";var n=i(2),r=i(0),o=i(9),s=i(118),a=i(4),h=function(){function t(){this.mn="[PreloadConnectivityInfoProvider] ",this.connInfo=window.lM,this.te=r.Framework.resolve(r.Framework.q.I).log(),this.pM=r.Framework.resolve(o.Qs.xs),this.connInfo||a.ErrorMonitor.gi().di("helper undefined",this.mn),this.fM()}return t.prototype.fM=function(){var t=new s.dM;this.pM.hM(t)},t.prototype.Gh=function(){return this.pM},t.prototype.Vh=function(){var t=this;if(!this.connInfo)return n.reject("ConnInfo helper undefined");var e=setTimeout(function(){return t.te.warn(t.mn+"Get connectivity info expired"),t.pM?n.resolve(t.pM):n.reject("expired")},2e3);try{return this.connInfo.Vh().then(function(i){return clearTimeout(e),t.pM=i,i}).fail(function(e){return t.te.debug(t.mn+" get connectivity info failed with error 1: ",e),t.pM?t.pM:n.reject(e)})}catch(t){return this.te.debug(this.mn+" get connectivity info failed with error 2:",t),n.reject(t)}},t.prototype.gM=function(t,e,i){},t}();e.vM=h},function(t,e,i){"use strict";var n=function(){function t(){}return t.prototype.yM=function(t){this.publicIp=t},t.prototype.Kh=function(){return this.publicIp},t.prototype.mM=function(t){this.EM=t},t.prototype.Wh=function(){return this.EM},t.prototype.TM=function(t){this.nic=t},t.prototype.zh=function(){return this.nic},t.prototype.IM=function(t){this.nicName=t},t.prototype.Jh=function(){return this.nicName},t.prototype.wM=function(t){this.privateIp=t},t.prototype.Cs=function(){return this.privateIp},t.prototype.SM=function(t){this.netmask=t},t.prototype.RM=function(){return this.netmask},t.prototype.bM=function(t){this.PM=t},t.prototype.Yh=function(){return null},t}();e.AM=n},function(t,e,i){"use strict";var n=i(2),r=i(1),o=i(0),s=i(9),a=i(78),h=i(119),u=i(8),c=i(24),f=i(52),l=function(){function t(){this.CM=null,this.kM=null,this.OM=null,this._M=null,this.NM=new r,this.publicIp=null,this.DM=[],this.xn=!1,this.FM=null,this.te=o.Framework.resolve(o.Framework.q.I).log(),this.pM=o.Framework.resolve(s.Qs.xs),this.LM=new h.MM,this.BM=[],this.fM(),this.UM()}return t.prototype.fM=function(){var t=new a.AM;this.pM.hM(t)},t.prototype.UM=function(){var t=this;o.Framework.setInterval(function(){t.DM=[],t.BM=[],t.NM=new r,t.publicIp=null,t.xM=null},12e4)},t.prototype.Vh=function(){return this.xM||(this.xM=this.HM()),this.xM},t.prototype.Gh=function(){return this.pM},t.prototype.HM=function(){var t=this,e=n.defer();if(this.FM=o.Framework.setTimeout(function(){e.reject({qM:!0,message:"expired"})},4e3),u.HiveConfig.ConnInfo.detectPrivateIP&&this.VM())try{this.CM=new RTCPeerConnection(null),this.OM=this.CM.createDataChannel("sendChannel",{reliable:!1}),this.kM=new RTCPeerConnection(null),this.kM.ondatachannel=function(i){t._M=i.channel,t._M.onopen=function(i){"open"===t._M.readyState&&(t.te.debug("Collected ips ["+t.NM.keys().join(", ")+"]"),t.kM.close(),t.LM.jM().then(function(e){t.BM=e,t.te.debug("Already known matching ips ["+t.BM.join(",")+"]");var i=t.NM.keys();t.BM.forEach(function(e){i.indexOf(e)>0&&(t.DM.push(e),t.NM.delete(e))}),t.NM.keys().forEach(function(e){t.DM.push(e)})}).fail(function(e){t.te.warn("Get Previous working ips failed with error "+e.message),t.NM.keys().forEach(function(e){t.DM.push(e)})}).finally(function(){t.te.debug("Final private ip list ["+t.DM.join(",")+"]"),e.resolve(t.GM())}))}},this.CM.onicecandidate=function(i){i.candidate&&t.QM(i.candidate.candidate),!i.candidate||t.kM.addIceCandidate(i.candidate).catch(function(i){e.reject({qM:!0,message:i.message}),o.Framework.clearTimeout(t.FM),console.log("Error: Failure during addIceCandidate()")})},this.kM.onicecandidate=function(i){i.candidate&&t.QM(i.candidate.candidate),!i.candidate||t.CM.addIceCandidate(i.candidate).catch(function(i){e.reject({qM:!0,message:i.message}),o.Framework.clearTimeout(t.FM),console.log("Error: Failure during addIceCandidate()")})},this.CM.createOffer().then(function(e){return t.CM.setLocalDescription(e)}).then(function(){return t.kM.setRemoteDescription(t.CM.localDescription)}).then(function(){return t.kM.createAnswer()}).then(function(e){return t.kM.setLocalDescription(e)}).then(function(){return t.CM.setRemoteDescription(t.kM.localDescription)}).catch(function(i){e.reject({qM:!0,message:i.message}),o.Framework.clearTimeout(t.FM),console.log("Error: Failure creating offer")})}catch(t){e.reject({qM:!0,message:t.message})}else{o.Framework.clearTimeout(this.FM);var i=u.HiveConfig.ConnInfo.detectPrivateIP?"webrtc datachannel not supported":"private IP detection disabled";e.reject({qM:!1,message:i})}return e.Te},t.prototype.VM=function(){try{return null!=f.Ca&&null!=f.t_&&"function"==typeof new RTCPeerConnection(null,null).createDataChannel}catch(t){return!1}},t.prototype.QM=function(t){var e=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,i=e.exec(t);if(i){var n=i[0];this.NM.set(n,!0)}},t.prototype.GM=function(){var t=new a.AM;return this.DM.length>0&&t.wM(this.DM[0]),this.publicIp&&t.yM(this.publicIp),this.pM.hM(t),this.pM},t.prototype.gM=function(t,e,i){if(this.publicIp=t,this.KM(),0===i&&this.DM.length>1)this.DM.shift();else if(c.nc.Mi&&0!==i&&-1==this.BM.indexOf(this.DM[0]))this.BM.unshift(this.DM[0]),this.LM.YM(this.BM.slice(0,2));else if(c.nc.Mi&&0!==i&&this.BM.indexOf(this.DM[0])>0){var n=this.BM.indexOf(this.DM[0]);this.BM=this.BM.splice(n,1),this.BM.unshift(this.DM[0]),this.LM.YM(this.BM.slice(0,2))}this.GM()},t.prototype.KM=function(){var t=this.DM.indexOf(this.publicIp);t>-1&&this.DM.splice(t,1)},t}();e.zM=l},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(54),o=i(140),s=i(147),a=i(10),h=i(31),u=i(28),c=i(0);!function(t){function e(e){return this.JM(e)||-1!=e.indexOf(t.WM)}function i(e){return-1!=e.toLowerCase().indexOf(t.XM.toLowerCase())}t.ZM=1,t.$M=2,t.eB=2e3,t.tB=3e4,t.rB=1e4,t.iB=!0,t.nB=!0,t.sB=500,t.oB=10,t.aB=3,t.XM="(format=mpd-time-csf)",t.WM=".m4s",t.hB=".ism/",t.cB=e,t.JM=i;var f=function(e){function r(i,n){var r=e.call(this,n)||this;return r.Ul=0,r.uB=!0,r.ticket=i,r.lB=i._A(),r.pB=r.lB.toLowerCase().substring(0,r.lB.indexOf(t.hB)),r.fB=new s.dB,r.gB=new o.vB(n.sessionId),r}return n(r,e),r.prototype.Ak=function(){return this.ticket},r.prototype.S_=function(){return StreamProtocol.yB},r.prototype.CN=function(){return this.lB},r.prototype.wN=function(){return this.gB.wN()},r.prototype.isLive=function(){return this.gB.mB()},r.prototype.RN=function(){return this.fB},r.prototype.$u=function(t){var e=this.Yu(t);if(e==a.Ws.Ys||e==a.Ws.Ks)return!0},r.prototype.Yu=function(t){if(i(t))return a.Ws.zs;if(this.EB(t))return a.Ws.Js;var e=this.gB.TB(t);return null!=e?e.type:-1!=t.indexOf("audio")?a.Ws.Ks:a.Ws.Js},r.prototype.bN=function(t){var e=this.Yu(t),i=0,n=0,r=0,o=!0,s=!1;if(this.EB(t))o=!0;else if(e!=a.Ws.zs){var u=this.gB.TB(t);null!=u?(i=u.duration,n=u.bitrate,r=u.id,s=this.$u(t)):(this.sk(),this.te.warn("could not extract segment info for "+t))}else o=!1;var c=Math.round(i/1e4);return new h.SR(t,e,o,r,c,n,s,this.K_())},r.prototype.ck=function(t){var e=t.url,i=this.gB.IB(e);return null!=i?this.bN(i.wB):null},r.prototype.lk=function(){return e.prototype.G_.call(this,t.ZM,t.$M)},r.prototype.SN=function(e){var n=e.url,r=n.toLowerCase();if(n===this.lB)return!0;if(null!=this.gB&&this.gB.EB(n))return!0;if(i(n)&&this.gB.SB!==n)return!1;var o=r.indexOf(t.hB);return!!(this.lB&&o>-1&&r.substring(0,o)===this.pB)},r.prototype.PN=function(t){var e=t.RB,i=t.Vu.url,n=this.gB.parse(i,e,t.Vu.mI);t.Vu.responseText=n,t.Vu.response=n,this.q_.zC(),this.bB()},r.prototype.AN=function(t){var i=this;e.prototype.AN.call(this,t),t.Yu()!==a.Ws.Ys&&t.Yu()!==a.Ws.Ks||(t.Yu()===a.Ws.Ys&&this.fB.PB(t),this.gB.AN(t).then(function(e){e&&i.bB(),t.Yu()==a.Ws.Ys&&i.q_.HC(t.Qu)}).done())},r.prototype.K_=function(){return this.ticket.BA()},r.prototype.Y_=function(t,i){var n=t;return n.Q_=c.Framework.time(),e.prototype.Y_.call(this,n,i)},r.prototype.yk=function(t,e,i,n){return this.gB.yk(t,e,i,n)},r.prototype.EB=function(t){return this.gB.EB(t)},r.prototype.bB=function(){var e=this;this.gB.AB?this.gB.AB.CB().then(function(i){if(i)e.uB=!0,e.te.debug("Protection evaluation: can decrypt");else{var n="Protection evaluation: cannot decrypt ["+(t.iB?"error":"disabled")+"]";t.nB?(e.uB=!0,e.te.debug(n+", metadata prefetch enabled")):e.te.warn(n+", metadata prefetch DISABLED")}}).done():this.te.debug("Protection evaluation: not encrypted")},r.prototype.sk=function(){this.uB&&(null==this.kB&&this.gB.mB()?this.OB():this.te.debug("DASH PRE-FETCHING METADATA ALREADY SCHEDULED OR NOT LIVE"))},r.prototype.IN=function(){this.uB&&null!=this.kB&&c.Framework.clearTimeout(this.kB)},r.prototype.OB=function(){var e=this,i=void 0!=this._B?this._B:0,n=t.eB,r=i+n,o=Math.max(1,r-c.Framework.time()+t.sB);this.te.debug("DASH PREFETCHING METADATA "+this.gB.SB+" IN "+o),this.kB=c.Framework.setTimeout(function(){e.NB(e.gB.SB,c.Framework.time())},o)},r.prototype.NB=function(t,e){var i=this._B;if(null==i&&(i=0),i>e)this.OB();else{var n=new u.HiveRequest(this.ticket.sessionId);n.open("GET",t),n.mI=!0,n.send(),this.kB=null,this._B=c.Framework.time()}},r.prototype.kN=function(t){this.gB.authenticationToken=t},r.prototype.gk=function(t,e){var i=this._C(),n=this.gN(),r=i.ER(),o=this.gB.DB(r,i.IR(),t,e),s=c.Framework.time()-n;return Math.max(0,o-s)},r.prototype.TN=function(){return t.rB},r.prototype.KC=function(t,e,i){var n=this.gB.FB(t,e);return null!=n?new h.SR(n.wB,i,!0,t,n.duration,e,!0,this.K_()):null},r.prototype.vk=function(){return t.tB},r}(r.ON);t.LB=f}(e.yB||(e.yB={}))},function(t,e,i){var n=function(t,e,i){function n(t){var e=t.localName;return null==e&&(e=t.MB),null!=e&&""!=e||(e=t.nodeName),e}function r(t){return t.prefix}function o(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):t}function s(t){return t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function a(o){if(o.nodeType==m.DOCUMENT_NODE){var h,u,c,f=o.firstChild;for(u=0,c=o.childNodes.length;u<c;u+=1)if(o.childNodes[u].nodeType!==m.COMMENT_NODE){f=o.childNodes[u];break}if(i)h=a(f);else{h={};var l=n(f);h[l]=a(f)}return h}if(o.nodeType==m.ELEMENT_NODE){var h=new Object;h.BB=0;for(var p=o.childNodes,d=0;d<p.length;d++){var f=p.item(d),l=n(f);if(h.BB++,null==h[l])h[l]=a(f),h[l+"_asArray"]=new Array(1),h[l+"_asArray"][0]=h[l];else{if(null!=h[l]&&!(h[l]instanceof Array)){var v=h[l];h[l]=new Array,h[l][0]=v,h[l+"_asArray"]=h[l]}for(var g=0;null!=h[l][g];)g++;h[l][g]=a(f)}}for(var y=0;y<o.attributes.length;y++){var b=o.attributes.item(y);h.BB++;for(var E=b.value,I=0,S=t.length;I<S;I++){var R=t[I];try{R.test.call(this,b)&&(E=R.UB.call(this,b.value))}catch(t){R.test.call(this,b),console.error(t)}}h[e+b.name]=E}var O=r(o);return null!=O&&""!=O&&(h.BB++,h.xB=O),1==h.BB&&null!=h.HB&&(h=h.HB),null!=h.HB&&(h.qB=h.HB,w&&(h.qB=s(h.qB)),delete h.HB,delete h.VB),null!=h.jB&&(h.GB=h.jB,delete h.jB,delete h.QB),null==h.qB&&null==h.GB||(h.toString=function(){return(null!=this.qB?this.qB:"")+(null!=this.GB?this.GB:"")}),h}return o.nodeType==m.TEXT_NODE||o.nodeType==m.CDATA_SECTION_NODE?o.nodeValue:o.nodeType==m.COMMENT_NODE?null:void 0}function h(t,e,i,n){var r="<"+(null!=t&&null!=t.xB?t.xB+":":"")+e;if(null!=i)for(var o=0;o<i.length;o++){var s=i[o],a=t[s];r+=" "+s.substr(1)+"='"+a+"'"}return r+=n?"/>":">"}function u(t,e){return"</"+(null!=t.xB?t.xB+":":"")+e+">"}function c(t,e){return-1!==t.indexOf(e,t.length-e.length)}function f(t,e){return!!(c(e.toString(),"_asArray")||0==e.toString().indexOf("_")||t[e]instanceof Function)}function l(t){var e=0;if(t instanceof Object)for(var i in t)f(t,i)||e++;return e}function p(t){var e=[];if(t instanceof Object)for(var i in t)-1==i.toString().indexOf("__")&&0==i.toString().indexOf("_")&&e.push(i);return e}function d(t){var e="";return null!=t.GB&&(e+="<![CDATA["+t.GB+"]]>"),null!=t.qB&&(e+=w?o(t.qB):t.qB),e}function v(t){var e="";return t instanceof Object?e+=d(t):null!=t&&(e+=w?o(t):t),e}function g(t,e,i){var n="";if(0==t.length)n+=h(t,e,i,!0);else for(var r=0;r<t.length;r++)n+=h(t[r],e,p(t[r]),!1),n+=y(t[r]),n+=u(t[r],e);return n}function y(t){var e="";if(l(t)>0)for(var i in t)if(!f(t,i)){var n=t[i],r=p(n);if(null==n||void 0==n)e+=h(n,i,r,!0);else if(n instanceof Object)if(n instanceof Array)e+=g(n,i,r);else{var o=l(n);o>0||null!=n.qB||null!=n.GB?(e+=h(n,i,r,!1),e+=y(n),e+=u(n,i)):e+=h(n,i,r,!0)}else e+=h(n,i,r,!1),e+=v(n),e+=u(n,i)}return e+=v(t)}null!==e&&void 0!==e||(e="_"),null!==i&&void 0!==i||(i=!1);var w=!1,m={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.KB=function(t){var e;return window.DOMParser?e=(new window.DOMParser).parseFromString(t,"text/xml"):(0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.YB(t)),e},this.zB=function(t){return a(t)},this.JB=function(t){var e=this.KB(t);return this.zB(e)},this.WB=function(t){return y(t)},this.XB=function(t){var e=this.WB(t);return this.KB(e)},this.getVersion=function(){return"1.0.11"},this.ZB=function(t){w=t}};t.t=n},function(t,e,i){"use strict";var n=function(){function t(t,e,i,n,r){this.id=t,this.bitrate=e,this.duration=i,this.uri=n,this.wB=r}return t}();e.$B=n},function(t,e,i){"use strict";var n=i(6),r=i(22),o=i(10),s=i(0),a=i(3),h=function(){function t(){this.eU=new n.fn.Zi,this.tU=new n.fn.Zi,this.te=s.Framework.resolve(s.Framework.q.I).log()}return t.prototype.rU=function(t,e){var i=0,n=-1,o=t.Qu.duration;this.eU.Vi()?n=Math.max(10,this.eU.Yi(e)):this.tU.Vi()&&(n=Math.max(10,this.tU.Yi(e))),i=n>-1?Math.max(0,o-n*a.ni.Gt.jt):o/2,t.type==r.Tu.Eu&&(i*=2);var s=Math.max(this.iU(),i);return this.te.debug("TIMER DETAILS duration: "+o+" left: "+e+" downTime: "+n+" fallAvg: "+this.eU.Xi()+" timer: "+s),s},t.prototype.nU=function(t,e){return 5e3},t.prototype.sU=function(t){return this.eU.Vi()?Math.min(this.eU.Yi(t),this.oU()):this.aU()},t.prototype.PB=function(t){if(t.Yu()===o.Ws.Ys)switch(t.Ku()){case r.Tu.gu:case r.Tu.du:case r.Tu.vu:this.eU.Ki(t.il());break;case r.Tu.mu:case r.Tu.Eu:this.tU.Ki(t.il())}},t.prototype.iU=function(){return t.hU},t.prototype.aU=function(){return t.cU},t.prototype.oU=function(){return t.uU},t}();h.hU=500,h.uU=1500,h.cU=500,e.lU=h},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(1),o=i(54),s=i(148),a=i(151),h=i(0),u=i(28),c=i(10),f=i(31),l=i(27);!function(t){function e(e){return this.JM(e)||-1!=e.indexOf(t.WM)}function i(e){return-1!=e.toLowerCase().indexOf(t.XM.toLowerCase())||-1!=e.toLowerCase().indexOf(t.pU.toLowerCase())||-1!=e.toLowerCase().indexOf(t.fU.toLowerCase())}t.dU=1,t.gU=2,t.vU=3e4,t.yU=4e3,t.mU=500,t.EU=!0,t.TU=1e4,t.IU=16,t.wU=3,t.XM=".m3u8",t.pU="(format=m3u8-aapl-v3)",t.fU="(video,format=m3u8-aapl-v3,audiotrack=audio)",t.WM=".ts",t.cB=e,t.JM=i;var p=function(e){function o(t,i,n){var o=e.call(this,n)||this;return o.SU=!1,o.Ul=0,o._B=new r,o.kB=new r,o.ticket=t,o.RU=i,i&&(o.bU=o.PU(t._A())),o.lB=t.LA(),o.fB=new a.AU,o.CU=new s.kU,o}return n(o,e),o.prototype.S_=function(){return StreamProtocol.OU},o.prototype.PU=function(t){var e=t.lastIndexOf("/");return t.substr(0,e)},o.prototype.Ak=function(){return this.ticket},o.prototype.wN=function(){return this.CU.wN()},o.prototype.isLive=function(){return this.CU.isLive()},o.prototype.RN=function(){return this.fB},o.prototype.K_=function(){return this.ticket.BA()},o.prototype.CN=function(){return this.lB},o.prototype.SN=function(t){var e=t.url=this._U(t.url);return e===this.lB?(this.SU&&this.te.debug("SAME MANIFEST "+e+","+this.lB),!0):null!=this.CU&&this.CU.NU(e)?(this.SU&&this.te.debug("CORRECT PLAYLIST "+e+","+this.lB),!0):null!=this.CU&&null!=this.CU.TB(e)?(this.SU&&this.te.debug("CORRECT SEGMENT "+e+","+this.lB),!0):!(!i(e)||this.CU.DU()===e||(this.SU&&this.te.debug("FIRST REQUEST FOR MANIFEST "+e+","+this.lB),1))},o.prototype._U=function(t){return l(t).pI().toString()},o.prototype.Yu=function(t){return i(t)?c.Ws.zs:null!=this.CU.TB(t)?c.Ws.Ys:c.Ws.Js},o.prototype.$u=function(t){var e=this.Yu(t);if(e==c.Ws.Ys||e==c.Ws.Ks)return!0},o.prototype.bN=function(t){var e=t,i=this.Yu(e),n=0,r=0,o=0,s=!0;if(i!=c.Ws.zs){var a=this.CU.TB(e);null!=a&&(n=a.duration,r=a.bitrate,o=a.id)}else if(s=!1,null!=this.CU&&this.CU.FU.has(e)){var r=this.CU.FU.get(e).bitrate;this._B.set(r,h.Framework.time())}return new f.SR(e,i,s,o,n,r,this.$u(e),this.K_())},o.prototype.KC=function(t,e,i){var n=this.CU.FB(t,e);return null!=n?new f.SR(n.wB,i,!0,t,n.duration,e,!0,this.K_()):null},o.prototype.PN=function(t){var e=t.RB,i=t.Wu(),n=this.CU.parse(i,e);if(this.CU.FU.has(i)){var r=this.CU.FU.get(i);this.q_.zC(r.bitrate)}t.Vu.response=n,t.Vu.responseText=n},o.prototype.AN=function(t){e.prototype.AN.call(this,t),t.Yu()!=c.Ws.zs&&t.Yu()!=c.Ws.Js&&(this.fB.PB(t),t.Yu()==c.Ws.Ys&&this.q_.HC(t.Qu))},o.prototype.Y_=function(t,i){var n=t;return n.Q_=h.Framework.time(),e.prototype.Y_.call(this,n,i)},o.prototype.sk=function(e){t.EU&&(null==this.kB.get(e)&&this.CU.isLive()?this.OB(e):this.te.debug("HLS PRE-FETCHING METADATA ALREADY SCHEDULED OR MISSING HLS INFO"))},o.prototype.OB=function(e){var i=this,n=this.CU.LU.get(e);if(null!=n){var r=this._B.has(e),o=this._B.get(e),s=r?o:0,a=null!=n.MU?n.MU[n.MU.length-1].duration:t.yU,u=s+a,c=Math.max(1,u-h.Framework.time()+t.mU);this.te.info("HLS PREFETCHING METADATA "+n.wB+" BITRATE "+e+" IN "+c);var f=h.Framework.setTimeout(function(){i.NB(e,n.wB,h.Framework.time())},c);this.kB.set(e,f)}else this.te.warn("NO STREAM WITH BT "+e)},o.prototype.NB=function(t,e,i){var n=this._B.get(t);if(null==n&&(n=0),n>i)this.OB(t);else{var r=new u.HiveRequest(this.ticket.sessionId);r.open("GET",e),r.mI=!0,r.send(),this.kB.delete(t),this._B.set(t,h.Framework.time())}},o.prototype.IN=function(){var t=this;this.kB.keys().forEach(function(e){var i=t.kB.get(e);h.Framework.clearTimeout(i),t.kB.delete(e)})},o.prototype.lk=function(){return e.prototype.G_.call(this,t.dU,t.gU)},o.prototype.ck=function(t){var e=t.url,i=this.CU.IB(e);return null!=i?this.bN(i.wB):null},o.prototype.yk=function(t,e,i,n){return i-t},o.prototype.vk=function(){return t.vU},o.prototype.TN=function(){return t.TU},o.prototype.gk=function(t,e){var i=this._C(),n=this.gN(),r=i.ER(),o=0;if(t>r)for(var s=this.CU.FB(r,e);s&&s.id<t;)o+=s.duration,this.te.debug("Segment duration "+s.duration+" total msec "+o+"segment id "+s.id),s=s.next;var a=h.Framework.time()-n;return Math.max(0,o-a)},o}(o.ON);t.BU=p}(e.OU||(e.OU={}))},function(t,e,i){"use strict";var n=i(1),r=i(2),o=i(0),s=i(86),a=i(57),h=i(87),u=i(4),c=function(){function t(){this.UU="[CACHE]",this.xU=new n,this.HU=-1,this.qU=[],this.te=o.Framework.resolve(o.Framework.q.I).log()}return t.prototype.init=function(t,e){this.VU=t,this.jU=e},t.prototype.put=function(t){var e=r.defer();try{var i=t.zu(),n=t.xu,o=t.Hu,u=t.Mu.Su-1,c=t.Mu.Su;-1==this.HU&&this.GU();var f=null,l=!1;if(this.xU.has(i)){f=this.xU.get(i);var p=new a.ED(0,u,c);l=!0,f.content.forEach(function(t,e){if(a.wD.ID(e).mD(p))return void(l=!1)})}else{var d=new a.ED(0,u,c).toString();f=new h.QU(t.Qu),t.KU&&(f.YU=t.KU.Ik.Tk),f.content.set(d,new s.zU(c,o,t.Mu,t.Ku())),this.xU.set(i,f),l=!0,this.qU.unshift(i)}null==f.headers&&null!=n&&(f.headers=n),e.resolve(l)}catch(t){e.reject("CACHE PUT ERROR "+t)}return e.Te},t.prototype.get=function(t){var e=r.defer();try{var i=this.xU.get(t);if(null!=i){var n=null;i.content.forEach(function(t,e){if(a.wD.ID(e).vD())return n=t,n.headers=i.headers,void(n.YU=i.YU)}),e.resolve(n)}else e.resolve(null)}catch(t){e.reject("CACHE GET ERROR "+t)}return e.Te},t.prototype.hk=function(t){try{return this.xU.keys()}catch(t){u.ErrorMonitor.gi().di("GET KEYS ERROR",this.UU,t)}},t.prototype.JU=function(t){var e=r.defer();try{e.resolve(this.xU.values())}catch(t){e.reject("CACHE GET ELEMENTS ERROR "+t)}return e.Te},t.prototype.contains=function(t){var e=r.defer();try{this.xU.has(t)?e.resolve(!0):e.resolve(!1)}catch(t){e.reject("CACHE CONTAINS ERROR "+t)}return e.Te},t.prototype.GU=function(){var t=this;this.WU(),this.te.debug(this.UU+" Starting cache periodic purge"),this.HU=o.Framework.setInterval(function(){t.m()},this.jU)},t.prototype.WU=function(){-1!=this.HU&&(this.te.debug(this.UU+" Stopping cache periodic purge"),o.Framework.clearInterval(this.HU),this.HU=-1)},t.prototype.m=function(){var t=this;try{var e=0,i=0,n=0;this.te.debug(this.UU+" RUNNING GC"),this.qU.every(function(n,r){var o=t.xU.get(n).size();return e+o>t.VU?(i=r,!1):(e+=o,!0)})||(n=this.qU.length-i,this.qU.splice(i,this.qU.length-1).forEach(function(e){t.xU.delete(e)})),this.te.debug(this.UU+" GC DONE - REMOVED: "+n+" - CURRENT ITEMS: "+this.xU.length+" SIZE: "+e+" "),0===this.xU.length&&(this.te.debug(this.UU+" Cache contains no items, stopping purge timer"),this.WU())}catch(t){u.ErrorMonitor.gi().di("PURGE FAILED",this.UU,t)}},t.prototype.XU=function(){this.xU=new n,this.qU=[]},t.prototype.ZU=function(){var t=this;this.xU.forEach(function(e,i){t.te.debug("EID="+i),e.content.forEach(function(e,i){t.te.debug("\tRANGE ",i)})})},t}();e.$U=c},function(t,e,i){"use strict";var n=function(){function t(t,e,i,n){this.length=t,this.data=e,this.Mu=i,this.ex=n}return t}();e.zU=n},function(t,e,i){"use strict";var n=i(57),r=i(1),o=function(){function t(t){this.headers=null,this.YU=null,this.tx=0,this.ix=!1,this.Qu=t,this.content=new r}return t.prototype.size=function(){var t=0;return this.content.forEach(function(e,i){t+=n.wD.ID(i).size()}),t},t}();e.QU=o},function(t,e,i){"use strict";!function(t){t[t.nx=0]="ALL",t[t.AS=1]="AS",t[t.hC=2]="SITE"}(e.sx||(e.sx={}))},function(t,e,i){"use strict";var n=i(0),r=i(23),o=i(3),s=i(11),a=i(2),h=i(1),u=i(55),c=i(168),f=i(4),l=function(){function t(){this.ox=!1,this.mn="[UDPLeaderElection] ",this.Hl=n.Framework.resolve(n.Framework.q.F),this.ax=new h,this.hx=new h,this.ux=new h,this.lx=new h,this.px=new h,this.gx=[]}return t.prototype.init=function(t){this.vx=t,this.te=n.Framework.resolve(n.Framework.q.I).log(t.sessionId),this.wC=t.wC,this.yx=t.yx,this.RC=t.RC},t.prototype.mx=function(t,e){var i=this,n=a.defer();try{if(this.ox){var r=null;t.uo&&(r=t.uo);var o=new c.Ex(t.guid,t.co,r,t.so);if(this.ax.has(o.Ck)){var s=this.ax.get(o.Ck);s.Tx==o.Tx&&s.Ix==o.Ix?n.resolve():(this.ax.set(o.Ck,o),this.wx(),this.Sx(o).then(function(){n.resolve()}).fail(function(t){i.ax.delete(o.Ck),i.wx(),n.reject(t)}))}else e?(o.Rx=e,this.te.info(this.mn+" NEW MEMBER GUID "+o.Ck+" RANKING "+o.Tx+" LEADER "+o.Ix),this.ax.set(o.Ck,o),this.wx(),this.Sx(o).then(function(){i.bx(i.ax.get(o.Ck)),n.resolve()}).fail(function(t){i.ax.delete(o.Ck),i.wx(),n.reject(t)})):this.Px(o).then(function(t){o.Rx=t,i.te.info(i.mn+" NEW MEMBER GUID "+o.Ck+" RANKING "+o.Tx+" LEADER "+o.Ix),i.ax.set(o.Ck,o),i.wx(),i.Sx(o).then(function(){n.resolve()}).fail(function(t){i.ax.delete(o.Ck),i.wx(),n.reject(t)})}).fail(function(t){n.reject(t)})}else n.reject("LEADER ELECTION NOT STARTED YET")}catch(t){n.reject("TRIGGER LEADER ELECTION ERROR "+t)}return n.Te},t.prototype.bx=function(t){var e=new s.po(s.Zs.K,null);e.guid=t.Ck,e.so=t.Ix,e.co=t.Tx;var i=[e];this.yx.Ax(i,!1)},t.prototype.Px=function(t){var e=this,i=a.defer();return this.lx.has(t.Ck)||this.ux.has(t.Ck)?i.reject(p.Cx):(this.lx.set(t.Ck,Date.now()),this.Hl.connect(t.Ck).then(function(n){var r=n.Bl.Dl(e.vx.swarmId);null==r?(r=n.Bl.Al(e.vx.swarmId),e.kx(r).then(function(){i.resolve(n)}).fail(function(t){i.reject(t)}).done()):e.px.get(t.Ck)?i.resolve(n):(e.lx.delete(t.Ck),e.kx(r).then(function(){i.resolve(n)}).fail(function(t){i.reject(t)}).done())}).fail(function(n){e.lx.delete(t.Ck),i.reject(n)}).done()),i.Te},t.prototype.kx=function(t){var e=this,i=a.defer(),s=new r.mu.Mr.np.Ox;s.Ck=this._x.Ck,s.Tx=this._x.Tx,s.so=this._x.Ix,s.Nx=this._x.Nx,this.te.debug(this.mn+"MSG uuid "+s.Ck+" rankValue "+s.Tx+" isLeader "+s.so+" stream id "+s.Nx);var h=n.Framework.setTimeout(function(){e.Dx(t._l)},o.ni.UDPBroadcast.Vr);return this.ux.set(t._l,{Fx:h,defer:i}),t.jl(r.mu.Rl.gl,s),i.Te},t.prototype.Dx=function(t){if(this.ux.has(t)){this.te.debug(this.mn+" HANDSHAKE REQ EXPIRED TO "+t);var e=this.ux.get(t);this.ux.delete(t),e.defer.reject("EXPIRED")}},t.prototype.Lx=function(t,e){try{this.te.debug(this.mn+"HANDSHAKE RESP RECEIVED FROM "+e._l);var i=e._l,r=this.ux.get(i);n.Framework.clearTimeout(r.Fx),this.ux.delete(i),r.defer.resolve(e)}catch(t){f.ErrorMonitor.gi().di("HANDSHAKE RESPONSE RECEIVED FAILED",this.mn,t)}},t.prototype.Mx=function(t,e){var i=this;try{var n=new s.po(s.Zs.K,null,t.so);if(n.guid=t.Ck,n.co=t.Tx,t.Nx===this.wC.K_()){var r=e.Bl.Dl(this.vx.swarmId);this.px.set(t.Ck,t.Ck),this.Bx(r,"OK"),this.mx(n,e).then(function(){}).fail(function(t){f.ErrorMonitor.gi().di("LEADER ELECTION FAILED",i.mn,t)})}}catch(t){f.ErrorMonitor.gi().di("HANDSHAKE REQUEST FAILED",this.mn,t)}},t.prototype.Bx=function(t,e){var i=new r.mu.Mr.np.vl;i.accept=e,t.jl(r.mu.Rl.vl,i),this.te.debug(this.mn+"SEND HANDSHAKE RESPONSE TO "+t._l)},t.prototype.Sx=function(t){var e=this,i=a.defer();if(this.Ux()){var n=!1;this.te.info(this.mn+"I HAVE THE HIGHEST SCORE"),t.Ix&&!this.hx.has(t.Ck)&&(n=!0,this.te.info(this.mn+"SEND SWITCH REQUEST TO "+t.Ck),this.xx(t).then(function(){i.resolve()}).fail(function(t){3==t.Hx?(e.te.debug(e.mn+" SWITCH REQUEST WAS CANCELED."),i.resolve()):(t.Hx=2)&&i.reject(t)})),this._x.Ix||null==this.qx||this.qx.Ck==t.Ck||this.hx.has(this.qx.Ck)||(this.te.info("SEND SWITCH REQUEST TO THE ALREADY KNOWN LEADER"),n=!0,this.xx(this.qx).then(function(){i.resolve()}).fail(function(t){3==t.Hx?(e.te.debug(e.mn+" SWITCH REQUEST WAS CANCELED."),i.resolve()):(t.Hx=2)&&i.reject(t)})),null!=this.qx||t.Ix||this._x.Ix||0!=this.hx.length||(this.te.info(this.mn+"BECOME LEADER"),this.Vx()),n||i.resolve()}else this.jx(t)?(this.te.info(this.mn+"PEER "+t.Ck+" HAS THE HIGHEST SCORE"),this.Gx(),this._x.Ix&&t.Ix&&this.stepDown(),this.Qx(t),i.resolve()):i.resolve();return i.Te},t.prototype.Qx=function(t){try{this.te.info(this.mn+"UPDATE THE LEADERSHIP"),null!=this.qx&&this.ax.has(this.qx.Ck)&&(this.ax.get(this.qx.Ck).Ix=!1),this.ax.has(t.Ck)?(this.ax.get(t.Ck).Tx=t.Tx,this.qx=t,this.ax.get(t.Ck).Ix=!0):(this.te.warn(this.mn+"SET A LEADER THAT IS NOT A LAN MEMBER LIST. SHOULD NEVER HAPPEN"),this.ax.set(t.Ck,t),this.qx=t),this.wC.Kx(t),this.te.info(this.mn+"NEW KNOWN LEADER "+this.wC.kk().Ck)}catch(t){f.ErrorMonitor.gi().di(t,this.mn)}},t.prototype.stepDown=function(){this.te.info(this.mn+"STEP DOWN"),this._x.Ix=!1,this.wC.Yx(!1),o.ni.dr.rr&&(this.RC.zx(),this.RC.Jx(!1))},t.prototype.Gx=function(){for(var t=this.hx.keys(),e=0,i=t;e<i.length;e++){var r=i[e],o=this.hx.get(r);this.hx.delete(r),n.Framework.clearTimeout(o.Fx),o.defer.reject({Hx:3,message:"CANCELED PENDING RESPONSES"})}},t.prototype.jx=function(t){return t.Ck==this.gx[0].Ck},t.prototype.Ux=function(){return c.Ex.Dp(this._x,this.gx[0])<0},t.prototype.wx=function(){var t=new u(this.ax.values()),e=t.Ro(c.Ex.Dp);t.push(this._x),this.wC.Wx(e);var i=new u(this.ax.values());this.gx=i.Ro(c.Ex.Dp)},t.prototype.Xx=function(t){this.Zx(t)},t.prototype.Zx=function(t){this.te.info(this.mn+"EVALUATE THE SWITCH REQUEST FROM "+t.Ck);var e=void 0;this.ax.has(t.Ck)?e=this.ax.get(t.Ck):this.te.warn("I RECEIVED A SWITCH REQUEST FROM AN UNKNOWN MEMBER. THIS SHOULD NEVER HAPPEN"),e&&(this._x.Ix?this.Ux()?this.$x(e,!1):(this.stepDown(),this.Gx(),this.Qx(e),this.$x(e,!0)):this.jx(e)?(this.Qx(e),this.$x(e,!0)):this.$x(e,!1))},t.prototype.$x=function(t,e){var i=this;this.eH(t.Rx,e).then(function(){}).fail(function(t){f.ErrorMonitor.gi().di("SEND SWITCH RESPONSE ERROR",i.mn,t)}).done()},t.prototype.eH=function(t,e){var i=a.defer(),n=new r.mu.Mr.np.tH;return n.ok=e,t.Bl.Dl(this.vx.swarmId).jl(r.mu.Rl.ml,n),i.Te},t.prototype.xx=function(t){var e=this,i=a.defer();return this.rH(t.Rx).then(function(n){e.iH(n,t),i.resolve()}).fail(function(t){i.reject(t)}).done(),i.Te},t.prototype.iH=function(t,e){try{t?(this.ax.get(e.Ck).Ix=!1,this.qx=this._x,this.Vx()):(this.Gx(),this.ax.get(e.Ck).Ix=!0,this.stepDown(),this.Qx(e))}catch(t){f.ErrorMonitor.gi().di("HANDLE LEADERSHIP SWITCH RESPONSE ERROR",this.mn,t)}},t.prototype.nH=function(t,e){if(this.hx.has(e)){var i=this.hx.get(e);n.Framework.clearTimeout(i.Fx),this.hx.delete(e),i.defer.resolve(t.ok)}else this.te.warn(this.mn+" SWITCH LEADERSHIP RESPONSE RECEIVED FROM UNKNOWN PEER "+e)},t.prototype.rH=function(t){var e=this,i=a.defer(),s=new r.mu.Mr.np.yl;s.Ck=this._x.Ck,s.Tx=this._x.Tx,this.te.debug(this.mn+"SWITCH LEADERSHIP REQUEST TO "+t._l);var h=n.Framework.setTimeout(function(){e.sH(t._l)},o.ni.UDPBroadcast.qr);this.hx.set(t._l,{Fx:h,defer:i});var u=t.Bl.Dl(this.vx.swarmId);return n.Framework.setTimeout(function(){u.jl(r.mu.Rl.yl,s)},1),i.Te},t.prototype.sH=function(t){if(this.hx.has(t)){this.te.info(this.mn+" SWITCH LEADERSHIP EXPIRED TO "+t);var e=this.hx.get(t);this.hx.delete(t),e.defer.reject({Hx:2,message:"EXPIRED"})}},t.prototype.Vx=function(){this.te.info(this.mn+"BECOMING LAN LEADER"),null!=this.qx&&this.ax.has(this.qx.Ck)&&(this.ax.get(this.qx.Ck).Ix=!1),this._x.Ix=!0,this.qx=this._x,this.wC.Yx(!0),this.wC.Kx(this._x),o.ni.dr.rr&&(this.RC.zx(),this.RC.Jx(!0))},t.prototype.Zh=function(t){this._x=new c.Ex(this.wC.W(),this.wC.oH(),"",!1,this.wC.K_()),this.ox=!0,this.te.info(this.mn+" UDP LEADER ELECTION STARTED")},t.prototype.aH=function(t){this.ax.delete(t),this.wx(),0==this.ax.length?(this._x.Ix=!1,this.qx=null,this.wC.Yx(!1),this.wC.hH(!1),this.RC.zx(),this.RC.Jx(!1)):this.Ux()?this.Vx():this.gx.length>0&&this.Qx(this.gx[0])},t}();e.cH=l;var p;!function(t){t[t.uH=0]="FAILURE",t[t.Cx=1]="ALREADY_PENDING"}(p=e.lH||(e.lH={}))},function(t,e,i){var n,r,o;/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 */
!function(i,s){r=[],n=s,void 0!==(o="function"==typeof n?n.apply(e,r):n)&&(t.t=o)}(0,function(){"use strict";function t(t,e,i){this.low=0|t,this.high=0|e,this.Cb=!!i}t.pH,Object.defineProperty(t.prototype,"__isLong__",{value:!0,l:!1,u:!1}),t.fH=function(t){return!0===(t&&t.pH)};var e={},i={};t.mp=function(n,r){var o,s;return r?0<=(n>>>=0)&&n<256&&(s=i[n])?s:(o=new t(n,(0|n)<0?-1:0,!0),0<=n&&n<256&&(i[n]=o),o):-128<=(n|=0)&&n<128&&(s=e[n])?s:(o=new t(n,n<0?-1:0,!1),-128<=n&&n<128&&(e[n]=o),o)},t.dp=function(e,i){return i=!!i,isNaN(e)||!isFinite(e)?t.ZERO:!i&&e<=-o?t.MIN_VALUE:!i&&e+1>=o?t.MAX_VALUE:i&&e>=r?t.dH:e<0?t.dp(-e,i).Rp():new t(e%n|0,e/n|0,i)},t.Ay=function(e,i,n){return new t(e,i,n)},t.gp=function(e,i,n){if(0===e.length)throw Error("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof i&&(n=i,i=!1),(n=n||10)<2||36<n)throw Error("radix out of range: "+n);var r;if((r=e.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+e);if(0===r)return t.gp(e.substring(1),i,n).Rp();for(var o=t.dp(Math.pow(n,8)),s=t.ZERO,a=0;a<e.length;a+=8){var h=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+h),n);if(h<8){var c=t.dp(Math.pow(n,h));s=s.multiply(c).add(t.dp(u))}else s=s.multiply(o),s=s.add(t.dp(u))}return s.Cb=i,s},t.gH=function(e){return e instanceof t?e:"number"==typeof e?t.dp(e):"string"==typeof e?t.gp(e):new t(e.low,e.high,e.Cb)};var n=4294967296,r=n*n,o=r/2,s=t.mp(1<<24);return t.ZERO=t.mp(0),t.vH=t.mp(0,!0),t.ONE=t.mp(1),t.yH=t.mp(1,!0),t.mH=t.mp(-1),t.MAX_VALUE=t.Ay(-1,2147483647,!1),t.dH=t.Ay(-1,-1,!0),t.MIN_VALUE=t.Ay(0,-2147483648,!1),t.prototype.bb=function(){return this.Cb?this.low>>>0:this.low},t.prototype.EH=function(){return this.Cb?(this.high>>>0)*n+(this.low>>>0):this.high*n+(this.low>>>0)},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix out of range: "+e);if(this.TH())return"0";var i;if(this.IH()){if(this.ae(t.MIN_VALUE)){var n=t.dp(e),r=this.wH(n);return i=r.multiply(n).SH(this),r.toString(e)+i.bb().toString(e)}return"-"+this.Rp().toString(e)}var o=t.dp(Math.pow(e,6),this.Cb);i=this;for(var s="";;){var a=i.wH(o),h=i.SH(a.multiply(o)).bb()>>>0,u=h.toString(e);if(i=a,i.TH())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},t.prototype.RH=function(){return this.high},t.prototype.bH=function(){return this.high>>>0},t.prototype.PH=function(){return this.low},t.prototype.AH=function(){return this.low>>>0},t.prototype.CH=function(){if(this.IH())return this.ae(t.MIN_VALUE)?64:this.Rp().CH();for(var e=0!=this.high?this.high:this.low,i=31;i>0&&0==(e&1<<i);i--);return 0!=this.high?i+33:i+1},t.prototype.TH=function(){return 0===this.high&&0===this.low},t.prototype.IH=function(){return!this.Cb&&this.high<0},t.prototype.kH=function(){return this.Cb||this.high>=0},t.prototype.OH=function(){return 1==(1&this.low)},t.prototype.Wp=function(){return 0==(1&this.low)},t.prototype.ae=function(e){return t.fH(e)||(e=t.gH(e)),(this.Cb===e.Cb||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t._H=t.prototype.ae,t.prototype.NH=function(t){return!this.ae(t)},t.DH=t.prototype.NH,t.prototype.FH=function(t){return this.mo(t)<0},t.prototype.LH=t.prototype.FH,t.prototype.MH=function(t){return this.mo(t)<=0},t.prototype.BH=t.prototype.MH,t.prototype.UH=function(t){return this.mo(t)>0},t.prototype.xH=t.prototype.UH,t.prototype.HH=function(t){return this.mo(t)>=0},t.prototype.qH=t.prototype.HH,t.prototype.mo=function(e){if(t.fH(e)||(e=t.gH(e)),this.ae(e))return 0;var i=this.IH(),n=e.IH();return i&&!n?-1:!i&&n?1:this.Cb?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.SH(e).IH()?-1:1},t.prototype.Rp=function(){return!this.Cb&&this.ae(t.MIN_VALUE)?t.MIN_VALUE:this.VH().add(t.ONE)},t.prototype.jH=t.prototype.Rp,t.prototype.add=function(e){t.fH(e)||(e=t.gH(e));var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,h=e.low>>>16,u=65535&e.low,c=0,f=0,l=0,p=0;return p+=o+u,l+=p>>>16,p&=65535,l+=r+h,f+=l>>>16,l&=65535,f+=n+a,c+=f>>>16,f&=65535,c+=i+s,c&=65535,t.Ay(l<<16|p,c<<16|f,this.Cb)},t.prototype.SH=function(e){return t.fH(e)||(e=t.gH(e)),this.add(e.Rp())},t.prototype.sub=t.prototype.SH,t.prototype.multiply=function(e){if(this.TH())return t.ZERO;if(t.fH(e)||(e=t.gH(e)),e.TH())return t.ZERO;if(this.ae(t.MIN_VALUE))return e.OH()?t.MIN_VALUE:t.ZERO;if(e.ae(t.MIN_VALUE))return this.OH()?t.MIN_VALUE:t.ZERO;if(this.IH())return e.IH()?this.Rp().multiply(e.Rp()):this.Rp().multiply(e).Rp();if(e.IH())return this.multiply(e.Rp()).Rp();if(this.FH(s)&&e.FH(s))return t.dp(this.EH()*e.EH(),this.Cb);var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,a=e.high>>>16,h=65535&e.high,u=e.low>>>16,c=65535&e.low,f=0,l=0,p=0,d=0;return d+=o*c,p+=d>>>16,d&=65535,p+=r*c,l+=p>>>16,p&=65535,p+=o*u,l+=p>>>16,p&=65535,l+=n*c,f+=l>>>16,l&=65535,l+=r*u,f+=l>>>16,l&=65535,l+=o*h,f+=l>>>16,l&=65535,f+=i*c+n*u+r*h+o*a,f&=65535,t.Ay(p<<16|d,f<<16|l,this.Cb)},t.prototype.GH=t.prototype.multiply,t.prototype.wH=function(e){if(t.fH(e)||(e=t.gH(e)),e.TH())throw new Error("division by zero");if(this.TH())return this.Cb?t.vH:t.ZERO;var i,n,r;if(this.ae(t.MIN_VALUE))return e.ae(t.ONE)||e.ae(t.mH)?t.MIN_VALUE:e.ae(t.MIN_VALUE)?t.ONE:(i=this._b(1).wH(e).shiftLeft(1),i.ae(t.ZERO)?e.IH()?t.ONE:t.mH:(n=this.SH(e.multiply(i)),r=i.add(n.wH(e))));if(e.ae(t.MIN_VALUE))return this.Cb?t.vH:t.ZERO;if(this.IH())return e.IH()?this.Rp().wH(e.Rp()):this.Rp().wH(e).Rp();if(e.IH())return this.wH(e.Rp()).Rp();for(r=t.ZERO,n=this;n.HH(e);){i=Math.max(1,Math.floor(n.EH()/e.EH()));for(var o=Math.ceil(Math.log(i)/Math.LN2),s=o<=48?1:Math.pow(2,o-48),a=t.dp(i),h=a.multiply(e);h.IH()||h.UH(n);)i-=s,a=t.dp(i,this.Cb),h=a.multiply(e);a.TH()&&(a=t.ONE),r=r.add(a),n=n.SH(h)}return r},t.prototype.QH=t.prototype.wH,t.prototype.KH=function(e){return t.fH(e)||(e=t.gH(e)),this.SH(this.wH(e).multiply(e))},t.prototype.Bp=t.prototype.KH,t.prototype.VH=function(){return t.Ay(~this.low,~this.high,this.Cb)},t.prototype.Db=function(e){return t.fH(e)||(e=t.gH(e)),t.Ay(this.low&e.low,this.high&e.high,this.Cb)},t.prototype.YH=function(e){return t.fH(e)||(e=t.gH(e)),t.Ay(this.low|e.low,this.high|e.high,this.Cb)},t.prototype.zd=function(e){return t.fH(e)||(e=t.gH(e)),t.Ay(this.low^e.low,this.high^e.high,this.Cb)},t.prototype.shiftLeft=function(e){return t.fH(e)&&(e=e.bb()),0==(e&=63)?this:e<32?t.Ay(this.low<<e,this.high<<e|this.low>>>32-e,this.Cb):t.Ay(0,this.low<<e-32,this.Cb)},t.prototype.zH=t.prototype.shiftLeft,t.prototype._b=function(e){return t.fH(e)&&(e=e.bb()),0==(e&=63)?this:e<32?t.Ay(this.low>>>e|this.high<<32-e,this.high>>e,this.Cb):t.Ay(this.high>>e-32,this.high>=0?0:-1,this.Cb)},t.prototype.JH=t.prototype._b,t.prototype.Pb=function(e){if(t.fH(e)&&(e=e.bb()),0==(e&=63))return this;var i=this.high;if(e<32){var n=this.low;return t.Ay(n>>>e|i<<32-e,i>>>e,this.Cb)}return 32===e?t.Ay(i,0,this.Cb):t.Ay(i>>>e-32,0,this.Cb)},t.prototype.WH=t.prototype.Pb,t.prototype.kb=function(){return this.Cb?new t(this.low,this.high,!1):this},t.prototype.Ob=function(){return this.Cb?this:new t(this.low,this.high,!0)},t})},function(t,e,i){var n,r,o;/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 */
!function(i,s){r=[],n=s,void 0!==(o="function"==typeof n?n.apply(e,r):n)&&(t.t=o)}(0,function(){"use strict";function t(t,e,i){this.low=0|t,this.high=0|e,this.Cb=!!i}t.pH,Object.defineProperty(t.prototype,"__isLong__",{value:!0,l:!1,u:!1}),t.fH=function(t){return!0===(t&&t.pH)};var e={},i={};t.mp=function(n,r){var o,s;return r?0<=(n>>>=0)&&n<256&&(s=i[n])?s:(o=new t(n,(0|n)<0?-1:0,!0),0<=n&&n<256&&(i[n]=o),o):-128<=(n|=0)&&n<128&&(s=e[n])?s:(o=new t(n,n<0?-1:0,!1),-128<=n&&n<128&&(e[n]=o),o)},t.dp=function(e,i){return i=!!i,isNaN(e)||!isFinite(e)?t.ZERO:!i&&e<=-o?t.MIN_VALUE:!i&&e+1>=o?t.MAX_VALUE:i&&e>=r?t.dH:e<0?t.dp(-e,i).Rp():new t(e%n|0,e/n|0,i)},t.Ay=function(e,i,n){return new t(e,i,n)},t.gp=function(e,i,n){if(0===e.length)throw Error("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof i&&(n=i,i=!1),(n=n||10)<2||36<n)throw Error("radix out of range: "+n);var r;if((r=e.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+e);if(0===r)return t.gp(e.substring(1),i,n).Rp();for(var o=t.dp(Math.pow(n,8)),s=t.ZERO,a=0;a<e.length;a+=8){var h=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+h),n);if(h<8){var c=t.dp(Math.pow(n,h));s=s.multiply(c).add(t.dp(u))}else s=s.multiply(o),s=s.add(t.dp(u))}return s.Cb=i,s},t.gH=function(e){return e instanceof t?e:"number"==typeof e?t.dp(e):"string"==typeof e?t.gp(e):new t(e.low,e.high,e.Cb)};var n=4294967296,r=n*n,o=r/2,s=t.mp(1<<24);return t.ZERO=t.mp(0),t.vH=t.mp(0,!0),t.ONE=t.mp(1),t.yH=t.mp(1,!0),t.mH=t.mp(-1),t.MAX_VALUE=t.Ay(-1,2147483647,!1),t.dH=t.Ay(-1,-1,!0),t.MIN_VALUE=t.Ay(0,-2147483648,!1),t.prototype.bb=function(){return this.Cb?this.low>>>0:this.low},t.prototype.EH=function(){return this.Cb?(this.high>>>0)*n+(this.low>>>0):this.high*n+(this.low>>>0)},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix out of range: "+e);if(this.TH())return"0";var i;if(this.IH()){if(this.ae(t.MIN_VALUE)){var n=t.dp(e),r=this.wH(n);return i=r.multiply(n).SH(this),r.toString(e)+i.bb().toString(e)}return"-"+this.Rp().toString(e)}var o=t.dp(Math.pow(e,6),this.Cb);i=this;for(var s="";;){var a=i.wH(o),h=i.SH(a.multiply(o)).bb()>>>0,u=h.toString(e);if(i=a,i.TH())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},t.prototype.RH=function(){return this.high},t.prototype.bH=function(){return this.high>>>0},t.prototype.PH=function(){return this.low},t.prototype.AH=function(){return this.low>>>0},t.prototype.CH=function(){if(this.IH())return this.ae(t.MIN_VALUE)?64:this.Rp().CH();for(var e=0!=this.high?this.high:this.low,i=31;i>0&&0==(e&1<<i);i--);return 0!=this.high?i+33:i+1},t.prototype.TH=function(){return 0===this.high&&0===this.low},t.prototype.IH=function(){return!this.Cb&&this.high<0},t.prototype.kH=function(){return this.Cb||this.high>=0},t.prototype.OH=function(){return 1==(1&this.low)},t.prototype.Wp=function(){return 0==(1&this.low)},t.prototype.ae=function(e){return t.fH(e)||(e=t.gH(e)),(this.Cb===e.Cb||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t._H=t.prototype.ae,t.prototype.NH=function(t){return!this.ae(t)},t.DH=t.prototype.NH,t.prototype.FH=function(t){return this.mo(t)<0},t.prototype.LH=t.prototype.FH,t.prototype.MH=function(t){return this.mo(t)<=0},t.prototype.BH=t.prototype.MH,t.prototype.UH=function(t){return this.mo(t)>0},t.prototype.xH=t.prototype.UH,t.prototype.HH=function(t){return this.mo(t)>=0},t.prototype.qH=t.prototype.HH,t.prototype.mo=function(e){if(t.fH(e)||(e=t.gH(e)),this.ae(e))return 0;var i=this.IH(),n=e.IH();return i&&!n?-1:!i&&n?1:this.Cb?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.SH(e).IH()?-1:1},t.prototype.Rp=function(){return!this.Cb&&this.ae(t.MIN_VALUE)?t.MIN_VALUE:this.VH().add(t.ONE)},t.prototype.jH=t.prototype.Rp,t.prototype.add=function(e){t.fH(e)||(e=t.gH(e));var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,h=e.low>>>16,u=65535&e.low,c=0,f=0,l=0,p=0;return p+=o+u,l+=p>>>16,p&=65535,l+=r+h,f+=l>>>16,l&=65535,f+=n+a,c+=f>>>16,f&=65535,c+=i+s,c&=65535,t.Ay(l<<16|p,c<<16|f,this.Cb)},t.prototype.SH=function(e){return t.fH(e)||(e=t.gH(e)),this.add(e.Rp())},t.prototype.sub=t.prototype.SH,t.prototype.multiply=function(e){if(this.TH())return t.ZERO;if(t.fH(e)||(e=t.gH(e)),e.TH())return t.ZERO;if(this.ae(t.MIN_VALUE))return e.OH()?t.MIN_VALUE:t.ZERO;if(e.ae(t.MIN_VALUE))return this.OH()?t.MIN_VALUE:t.ZERO;if(this.IH())return e.IH()?this.Rp().multiply(e.Rp()):this.Rp().multiply(e).Rp();if(e.IH())return this.multiply(e.Rp()).Rp();if(this.FH(s)&&e.FH(s))return t.dp(this.EH()*e.EH(),this.Cb);var i=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,a=e.high>>>16,h=65535&e.high,u=e.low>>>16,c=65535&e.low,f=0,l=0,p=0,d=0;return d+=o*c,p+=d>>>16,d&=65535,p+=r*c,l+=p>>>16,p&=65535,p+=o*u,l+=p>>>16,p&=65535,l+=n*c,f+=l>>>16,l&=65535,l+=r*u,f+=l>>>16,l&=65535,l+=o*h,f+=l>>>16,l&=65535,f+=i*c+n*u+r*h+o*a,f&=65535,t.Ay(p<<16|d,f<<16|l,this.Cb)},t.prototype.GH=t.prototype.multiply,t.prototype.wH=function(e){if(t.fH(e)||(e=t.gH(e)),e.TH())throw new Error("division by zero");if(this.TH())return this.Cb?t.vH:t.ZERO;var i,n,r;if(this.ae(t.MIN_VALUE))return e.ae(t.ONE)||e.ae(t.mH)?t.MIN_VALUE:e.ae(t.MIN_VALUE)?t.ONE:(i=this._b(1).wH(e).shiftLeft(1),i.ae(t.ZERO)?e.IH()?t.ONE:t.mH:(n=this.SH(e.multiply(i)),r=i.add(n.wH(e))));if(e.ae(t.MIN_VALUE))return this.Cb?t.vH:t.ZERO;if(this.IH())return e.IH()?this.Rp().wH(e.Rp()):this.Rp().wH(e).Rp();if(e.IH())return this.wH(e.Rp()).Rp();for(r=t.ZERO,n=this;n.HH(e);){i=Math.max(1,Math.floor(n.EH()/e.EH()));for(var o=Math.ceil(Math.log(i)/Math.LN2),s=o<=48?1:Math.pow(2,o-48),a=t.dp(i),h=a.multiply(e);h.IH()||h.UH(n);)i-=s,a=t.dp(i,this.Cb),h=a.multiply(e);a.TH()&&(a=t.ONE),r=r.add(a),n=n.SH(h)}return r},t.prototype.QH=t.prototype.wH,t.prototype.KH=function(e){return t.fH(e)||(e=t.gH(e)),this.SH(this.wH(e).multiply(e))},t.prototype.Bp=t.prototype.KH,t.prototype.VH=function(){return t.Ay(~this.low,~this.high,this.Cb)},t.prototype.Db=function(e){return t.fH(e)||(e=t.gH(e)),t.Ay(this.low&e.low,this.high&e.high,this.Cb)},t.prototype.YH=function(e){return t.fH(e)||(e=t.gH(e)),t.Ay(this.low|e.low,this.high|e.high,this.Cb)},t.prototype.zd=function(e){return t.fH(e)||(e=t.gH(e)),t.Ay(this.low^e.low,this.high^e.high,this.Cb)},t.prototype.shiftLeft=function(e){return t.fH(e)&&(e=e.bb()),0==(e&=63)?this:e<32?t.Ay(this.low<<e,this.high<<e|this.low>>>32-e,this.Cb):t.Ay(0,this.low<<e-32,this.Cb)},t.prototype.zH=t.prototype.shiftLeft,t.prototype._b=function(e){return t.fH(e)&&(e=e.bb()),0==(e&=63)?this:e<32?t.Ay(this.low>>>e|this.high<<32-e,this.high>>e,this.Cb):t.Ay(this.high>>e-32,this.high>=0?0:-1,this.Cb)},t.prototype.JH=t.prototype._b,t.prototype.Pb=function(e){if(t.fH(e)&&(e=e.bb()),0==(e&=63))return this;var i=this.high;if(e<32){var n=this.low;return t.Ay(n>>>e|i<<32-e,i>>>e,this.Cb)}return 32===e?t.Ay(i,0,this.Cb):t.Ay(i>>>e-32,0,this.Cb)},t.prototype.WH=t.prototype.Pb,t.prototype.kb=function(){return this.Cb?new t(this.low,this.high,!1):this},t.prototype.Ob=function(){return this.Cb?this:new t(this.low,this.high,!0)},t})},function(t,e,i){"use strict";var n,r=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(2),s=i(1),a=i(0),h=i(163),u=i(3),c=i(23),f=i(11),l=i(164),p=i(15),d=hive.DN.protocol.FN.qN,v=i(5),g=i(4),y=v.Rt.Ci;!function(t){t[t.XH=1]="ACCEPT",t[t.ZH=2]="REJECT"}(n=e.$H||(e.$H={}));var w;!function(t){t[t.nx=0]="ALL",t[t.eq=1]="IN",t[t.tq=2]="OUT"}(w=e.rq||(e.rq={}));var m=function(t){function e(){var e=t.call(this)||this;return e.iq=new s,e.lx=new s,e.nq=-1,e.sq=-1,e.oq=-1,e.connected=!1,e.Hl=a.Framework.resolve(a.Framework.q.F),e.aq=a.Framework.resolve(p.Pa.$o),e.hq=a.Framework.resolve(p.Pa.ea),e.cq=a.Framework.resolve(p.Pa.ta),e.uq=a.Framework.resolve(p.Pa.ra),e}return r(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.vx=e,this.ticket=e.Cn.ticket,this.yx=e.yx,this.RC=e.RC,this.lq=e.lq},e.prototype.start=function(t){try{this.te.info(this.mn+"PARTNERSHIP STARTED "+t.K_()),this.context=t,this.fR=t.K_(),this.pq(u.ni.Ot.At),this.fq(u.ni.dr.or),this.dq(u.ni.Ut.Nt),this.active=!0}catch(t){g.ErrorMonitor.gi().di("START PARTNERSHIP ERROR",this.mn,t)}},e.prototype.stop=function(){return a.Framework.clearInterval(this.nq),a.Framework.clearInterval(this.sq),a.Framework.clearInterval(this.oq),this.context=null,this.fR=null,this.active=!1,this.gq()},e.prototype.Zh=function(t){this.te.info("PARTNERSHIP SERVER CONNECTED"),this.Eh=t,this.connected=!0,null==this.wC.W()&&this.wC.vq(this.Eh)},e.prototype.yq=function(){this.connected=!1},e.prototype.mq=function(t){try{this.Eq(t)||this.iq.has(t.Tk.guid)||this.lx.has(t.Tk.guid)||t.Tk.guid==this.Eh?this.Tq(t):this.Iq(t),this.wq(t)&&this.Sq(t)}catch(t){g.ErrorMonitor.gi().di("DISCOVERED NEW LAN PEER ERROR",this.mn,t)}},e.prototype.Tq=function(t){if(this.Rq.has(t.Tk.guid)){var e=this.Rq.get(t.Tk.guid);this.Rq.delete(t.Tk.guid),this.iL.set(t.Tk.guid,e),this.wC.hH(!0)}},e.prototype.Sq=function(t){if(this.tL.has(t.Tk.guid)){var e=this.tL.get(t.Tk.guid);this.tL.delete(t.Tk.guid),this.rL.set(t.Tk.guid,e)}},e.prototype.pq=function(t){var e=this;-1!=this.nq&&a.Framework.clearInterval(this.nq),this.nq=a.Framework.setInterval(function(){e.bq(!1)},t)},e.prototype.bq=function(t){var e=this;t&&this.nq&&(a.Framework.clearInterval(this.nq),this.pq(u.ni.Ot.At));try{if(this.connected){this.te.debug(this.mn+"ADDING NEW PEERS IF POSSIBLE, NOW "+this.Rq.length+"/"+u.ni.Ot.Pt+","+this.iL.length+"/infinity OUT RND "+this.tL.length+" OUT LAN "+this.rL.length);var i=[].concat(this.iq.keys()).concat(this.lx.keys()),n=this.yx.Pq(!0),r=void 0;r=this.wC.fk()||this.wC.Rk()?this.cq.Aq(this.wC,u.ni.Ot.Pt,this.Rq.values(),i,n):this.aq.Aq(u.ni.Ot.Pt,this.Rq.values(),i,n),this.Cq=r.kq(),r.Oq().forEach(function(t){e.Iq(t)})}else this.te.warn(this.mn+"NOT RUNNING IN PARTNER CHOICE, SRV DISCONNECTED")}catch(t){g.ErrorMonitor.gi().di("PARTNER CHOICE ERROR",this.mn,t)}},e.prototype.Iq=function(t){var e=this;try{var i=t.Tk.guid,n=t.Tk.uo,r=t.Tk.lo;this.te.debug(this.mn+"IN PARTNER ADD PROCESS "+i),this.Eq(t)||this.iq.has(i)||this.lx.has(i)||this.lq._q(i,n,r)||(this.lx.set(i,Date.now()),this.Hl.connect(i).then(function(n){var r=n.Bl.Dl(e.vx.swarmId);null==r&&(r=n.Bl.Al(e.vx.swarmId)),e.lx.get(i),e.lx.delete(i),e.active&&e.Nq(r).then(function(n){if(e.Dq(r,t,n.msg),e.Lq.Fq(!1,!1),e.lq.Mq(i,t.Tk.uo,t.Tk.lo),e.Bq(r),e.Cq.length>0&&!t.Uq()){var o=e.Cq[0];e.xq(o.guid),o.qq.Hq(w.tq),e.Cq.splice(0,1)}}).fail(function(t){e.te.debug(e.mn+"PARTNERSHIP REQ FAILED TO "+i+" BECAUSE "+t),e.Lq.Fq(!1,!0),e.Vq(i)})}).fail(function(t){e.te.debug(e.mn+"FAILED ADDING, REMOVING "+i+" BECAUSE "+t),e.Lq.Fq(!0,!0),e.lx.delete(i),e.yx.aH(i)}).done())}catch(t){g.ErrorMonitor.gi().di("IN PARTNER ADD PROCESS ERROR",this.mn,t)}},e.prototype.jq=function(t,e){var i=this;try{var r=t.guid,o=null,s=null;if(t.uo&&(s=t.uo),t.lo&&(o=t.lo),this.Gq(r))this.te.info(this.mn+"ALREADY OUT PARTNER "+r);else{var c=t.fR,f=e.Bl.Dl(this.vx.swarmId);if(this.fR!==c||u.ni.Ut._t!==t.Qq||this.lq._q(r,s,o))this.te.info(this.mn+"PARTNERSHIP CANNOT BE ESTABLISHED WITH "+r+" CONTEXT ID "+c+" protocol version "+t.Qq),this.Kq(f,n.ZH);else{var l=this.Yq(t);this.yx.Ax([l],!1);var p=this.yx.zq(r),d=p.Uq()||this.tL.length<u.ni.Ot.kt;if(!d){this.te.debug(this.mn+" got out part req from "+r+" - reached max "+this.tL.length+"/"+u.ni.Ot.kt);var v=void 0;(v=this.wC.fk()||this.wC.Rk()?this.uq.Jq(this.wC,l,this.tL.values()):this.hq.Jq(this.tL.values()))&&(this.te.debug(this.mn+" chocking "+v.guid),this.tL.delete(v.guid),v.qq.Hq(w.eq),d=!0)}if(d){var y=new h.Partner(r,this.Lq,f,this.te,!1,p);t.Wq&&y.Xq(t.Wq),this.yx.Zq.has(r)?this.rL.set(r,y):this.tL.set(r,y),this.te.info(this.mn+"ADDED OUT PART "+r),this.Kq(f,n.XH),this.lq.Mq(r,s,o),a.Framework.setTimeout(function(){i.$q(r)},500),this.Lq.eV()}else this.te.info(this.mn+" cannot establish partnership to "+r+" - reached max "+this.tL.length+"/"+u.ni.Ot.kt),this.Kq(f,n.ZH)}}}catch(t){g.ErrorMonitor.gi().di("OUT PART REQUEST RECEIVED ERROR",this.mn,t)}},e.prototype.Yq=function(t){var e=new d;e.guid=t.guid,t.internalAs&&(e.internalAs=t.internalAs),t.externalAs&&(e.externalAs=t.externalAs),t.lo&&(e.lo=t.lo),t.uo&&(e.uo=t.uo);var i=!1,n=this.yx.zq(t.guid);if(n&&(i=n.Tk.so),t.tV){var r=[];t.tV.forEach(function(t){var e=new f.no;e.state=t.YN,e.bitrate=t.bitrate,e.delta=t.delta,r.push(e)}),e.ho=r}return new f.po(f.Zs.Xs,e,i)},e.prototype.Kq=function(t,e){var i=this;this.te.debug(this.mn+"SEND PART RESPONSE TO "+t._l);var r=new c.mu.Mr.np.rV;if(r.accept=e,r.accept===n.XH){this.wC.Ek()&&(r.internalAs=this.wC.Ek()),this.wC.iV()&&(r.externalAs=this.wC.iV()),this.wC.Kh()&&(r.lo=this.wC.Kh()),this.wC.Cs()&&(r.uo=this.wC.Cs()),r.Wq=this.wC.nV();var o=this.wC.sV(),s=[];o.forEach(function(t,e){var n=new c.mu.Mr.np.oV;n.bitrate=e,n.YN=t.type,n.delta=null!=i.wC.aV()?i.wC.aV():-1,s.push(n)}),s.length>0&&r.hV(s)}t.jl(c.mu.Rl.dl,r)},e.prototype.cV=function(t){this.te.warn(this.mn+t)},e.prototype.Dq=function(t,e,i){var n=t._l;if(i.externalAs&&(e.Tk.externalAs=i.externalAs),i.internalAs&&(e.Tk.internalAs=i.internalAs),i.lo&&(e.Tk.lo=i.lo),i.uo&&(e.Tk.uo=i.uo),i.tV){var r=[];i.tV.forEach(function(t){var e=new f.no;e.state=t.YN,e.bitrate=t.bitrate,e.delta=t.delta,r.push(e)}),e.Tk.ho=r}var o=new h.Partner(n,this.Lq,t,this.te,!0,e);return i.Wq&&(o.Wq=i.Wq,t.receiver.uV(i.Wq),t.sender.uV(i.Wq)),e.Tk.type==f.Zs.K?(this.iL.set(n,o),this.wC.lV(!0),this.wC.hH(!0)):(0!=this.wC.Ek()&&this.wC.Ek()===e.Tk.internalAs&&this.wC.lV(!0),this.Rq.set(n,o)),this.te.debug(this.mn+n+" IS NOW IN PARTNER"),o},e.prototype.aH=function(t){this.te.info(this.mn+"GOT PEER DISC "+t),this.pV(t)&&(this.te.info(this.mn+"IN PRT DISC "+t),this.xq(t)),this.Gq(t)&&(this.te.info(this.mn+"OUT PRT DISC "+t),this.tL.delete(t),this.rL.delete(t))},e.prototype.xq=function(t){var e=this;this.te.debug(this.mn+"IN PARTNER REMOVE "+t);var i=this.fV(t);if(this.EC.dV(i),this.Rq.delete(t),this.iL.delete(t),this.iL.length>0)this.wC.lV(!0);else if(0!=this.wC.Ek()){var n=!1;this.Rq.forEach(function(t){e.wC.Ek()===t.Ik.Tk.internalAs&&(n=!0)}),this.wC.lV(n)}else this.wC.lV(!1)},e.prototype.gV=function(t,e){this.te.debug(this.mn+"CLOSE RECEIVED FROM "+t+" TYPE "+w[e.EN()]),e.EN()!=w.nx&&e.EN()!=w.tq||(this.tL.has(t)&&this.tL.delete(t),this.rL.has(t)&&this.rL.delete(t)),e.EN()!=w.nx&&e.EN()!=w.eq||this.xq(t)},e.prototype.Nq=function(t){var e=this,i=o.defer();try{var n=new c.mu.Mr.np.vV;n.guid=this.Eh,n.fR=this.fR,n.Qq=u.ni.Ut._t,n.Wq=this.wC.nV(),this.wC.Ek()&&(n.internalAs=this.wC.Ek()),this.wC.iV()&&(n.externalAs=this.wC.iV()),this.wC.Cs()&&(n.uo=this.wC.Cs()),this.wC.Kh()&&(n.lo=this.wC.Kh());var r=this.wC.sV(),s=[];r.forEach(function(t,i){var n=new c.mu.Mr.np.oV;n.bitrate=i,n.YN=t.type,n.delta=null!=e.wC.aV()?e.wC.aV():-1,s.push(n)}),s.length>0&&n.hV(s),this.te.debug(this.mn+"SEND PART REQ TO "+t._l+" WITH ID "+n.fR+" internalAS "+n.internalAs+" externalAs "+n.externalAs+" private ip "+n.uo+" public ip "+n.lo+" rGuid "+this.wC.nV());var h=a.Framework.setTimeout(function(){e.yV(i,t._l)},u.ni.Ot.bt);this.iq.set(t._l,{Fx:h,defer:i}),t.jl(c.mu.Rl.fl,n)}catch(t){i.reject(t)}return i.Te},e.prototype.mV=function(t,e){var i=e._l,r=this.iq.get(i);r?(a.Framework.clearTimeout(r.Fx),this.iq.delete(i),t.accept===n.XH?r.defer.resolve({Pl:e,msg:t}):r.defer.reject("NOT ACCEPTED")):this.te.warn(this.mn+"OUT PART FROM UNKNOWN PEER "+i)},e.prototype.yV=function(t,e){if(this.iq.has(e)){this.te.debug(this.mn+"PART REQ EXPIRED TO "+e);var i=this.iq.get(e);this.iq.delete(e),i.defer.reject("EXPIRED")}},e.prototype.gq=function(){var t=o.defer(),e=this.Rq.values();this.iL.forEach(function(t,i){e.push(t)});var i=e.slice().map(function(t){return t.qq.close()});return o.all(i).then(function(e){t.resolve("resolved")}).fail(function(e){t.reject("could not close")}),t.Te},e.prototype.Vq=function(t){this.Hl.disconnect(t)},e.prototype.fq=function(t){var e=this;-1!=this.sq&&a.Framework.clearInterval(this.sq),this.sq=a.Framework.setInterval(function(){e.EV()},t)},e.prototype.EV=function(){if(this.wC.Sk()&&!this.wC.fk()&&y){var t=this.wC.kk(),e=this.context._C().bitrate;if(e&&this.pV(t.Ck)){var i=this.fV(t.Ck);this.TV(i.qq,e)}}},e.prototype.TV=function(t,e){var i=new c.mu.Mr.np.El;i.guid=this.Eh,i.bitrate=e,this.te.debug(this.mn+"ANNOUNCE BITRATE "+i.bitrate+" TO PEER GUID "+t._l),t.jl(c.mu.Rl.El,i)},e.prototype.IV=function(t){try{this.te.debug(this.mn+"RECEIVED BITRATE "+t.bitrate+" FROM PEER GUID "+t.guid),this.yx.Zq.has(t.wV())&&(this.yx.Zq.get(t.guid).SV(t.bitrate),this.RC.RV())}catch(t){g.ErrorMonitor.gi().di("Error handling receiving bitrate info",this.mn,t)}},e.prototype.bV=function(t){var e=t.guid,i=this.fV(e);i&&this.PV(i,t),i=this.AV(e),i&&this.PV(i,t),this.lq.Mq(e,t.uo,t.lo)},e.prototype.PV=function(t,e){var i=t.Ik.Tk;if(e.uo&&(i.uo=e.uo),e.lo&&(i.lo=e.lo),e.externalAs&&(i.externalAs=e.externalAs),e.internalAs&&(i.internalAs=e.internalAs),e.tV){var n=[];e.tV.forEach(function(t){var e=new f.no;e.bitrate=t.bitrate,e.delta=t.delta,e.state=t.YN,n.push(e)}),i.ho=n}},e.prototype.dq=function(t){var e=this;this.oq&&a.Framework.clearInterval(this.oq),this.oq=a.Framework.setInterval(function(){e.CV()},t)},e.prototype.CV=function(){var t=this;if(this.wC.Cs()||this.wC.Kh()||this.wC.Ek()||this.wC.iV()){var e=this.kV(),i=new c.mu.Mr.np.OV;i.guid=this.wC.W(),this.wC.Cs()&&(i.uo=this.wC.Cs()),this.wC.Kh()&&(i.lo=this.wC.Kh()),this.wC.iV()&&(i.externalAs=this.wC.iV()),this.wC.Ek()&&(i.internalAs=this.wC.Ek());var n=this.wC.sV(),r=[];n.forEach(function(e,i){var n=new c.mu.Mr.np.oV;n.bitrate=i,n.YN=e.type,n.delta=null!=t.wC.aV()?t.wC.aV():-1,r.push(n)}),r.length>0&&i.hV(r),e.forEach(function(t,e){t.qq.jl(c.mu.Rl.hh,i)})}},e.prototype.kV=function(){var t=new s;return this.tL.forEach(function(e,i){t.has(i)||t.set(i,e)}),this.rL.forEach(function(e,i){t.has(i)||t.set(i,e)}),this.iL.forEach(function(e,i){t.has(i)||t.set(i,e)}),this.Rq.forEach(function(e,i){t.has(i)||t.set(i,e)}),t},e}(l._V);e.NV=m},function(t,e,i){"use strict";var n=function(){function t(){}return t}();n.DV=!0,n.FV=3e4,n.LV=6e4,n.MV=3e4,e.BV=n;var r=function(){function t(){}return t}();r.Xr="site",r.Zr="externalAs",r.$r="availableSendRate",r.ei="remoteAddress",r.ti="localAddress",e.UV=r},function(t,e,i){"use strict";var n=function(){function t(t,e){this.xV=t,this.HV=e}return t.prototype.kq=function(){return this.HV},t.prototype.Oq=function(){return this.xV},t}();e.qV=n},function(t,e,i){"use strict";var n=function(){function t(){}return t.VV=function(t,e){var i=t.GV.jV(!1),n=e.GV.jV(!1);return i>n?1:i<n?0:-1},t}();e.QV=n;var r=function(){function t(){}return t.VV=function(t,e){var i=t.KV.jV(!1),n=e.KV.jV(!1);return i>n?1:i<n?0:-1},t}();e.YV=r},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(97),o=i(7),s=i(18),a=i(2),h=i(5),u=h.Rt.Fi;-1==u&&(u=3e4);var c=function(t){function e(e,i){var n=t.call(this,i)||this;return n.pluginName="bitmovin",n.zV=!1,n.JV=void 0,n.player=e,n.player.initSession=function(t){return n.WV(),n.XV(t).timeout(u,n.mn+" Hive Plugin initialization timeout").then(function(t){return n.ZV(),t.Dn()}).catch(function(t){return n.$V(),n.WV(),n.te().debug(n.mn+" error occurred resolving the ticket - "+(t.stack||t.message||t)),a.reject(t)})},n.te().notice(n.mn+"registered plugin [name:"+n.ej()+"][id: "+n.tj()+"][version: "+n.rj()+"]"),n}return n(e,t),e.prototype.ZV=function(){var t=this;this.zV||(this.player.addEventHandler("onReady",function(){t.te().debug("bitmovin.player.EVENT.ON_READY"),t.eF()&&(!!t.player.getConfig().ij&&t.player.getConfig().ij.nj&&t.sj(!1),t.oj()&&(t.aj=new o.ns))}),this.player.addEventHandler("onPlay",function(){t.te().debug("bitmovin.player.EVENT.ON_PLAY"),t.hj(s.kc.$a.Qa)}),this.player.addEventHandler("onError",function(e){t.te().debug("bitmovin.player.EVENT.ON_ERROR");var i=-1,n=null;if(null!=e)try{i=e.code,n=JSON.stringify(e,null)}catch(t){n=e}t.onError(i,n)}),this.player.addEventHandler("onPlaybackFinished",function(){t.te().debug("bitmovin.player.EVENT.ON_PLAYBACK_FINISHED"),t.cj(s.kc.$a.Ja,{code:1})}),this.player.addEventHandler("onSeek",function(){t.te().debug("bitmovin.player.EVENT.ON_SEEK"),t.cj(s.kc.$a.za)}),this.player.addEventHandler("onFullscreenEnter",function(){t.te().debug("bitmovin.player.EVENT.ON_FULLSCREEN_ENTER"),t.cj(s.kc.$a.Xa,{value:!0})}),this.player.addEventHandler("onFullscreenExit",function(){t.te().debug("bitmovin.player.EVENT.ON_FULLSCREEN_EXIT"),t.cj(s.kc.$a.Xa,{value:!1})}),this.player.addEventHandler("onSegmentRequestFinished",function(e){var i=e.mimeType.indexOf("video")>=0;if(void 0===t.uj){var n=t.player.getPlaybackVideoData();n&&n.bitrate&&t.lj(n.bitrate)}if(e.success){if(!e.isInit&&t.uj){var r=8*e.size/e.downloadTime;t.aj.Kn(i,t.uj,e.size),t.aj.zn(r)}}else t.aj.Yn(i,t.uj)}),0===this.getPlayerVersion().indexOf("7")?this.pj():0===this.getPlayerVersion().indexOf("6")&&this.fj(),this.zV=!0)},e.prototype.fj=function(){var t=this;this.player.addEventHandler("onStartBuffering",function(){t.te().debug("bitmovin.player.EVENT.ON_START_BUFFERING"),t.sj()}),this.player.addEventHandler("onStopBuffering",function(){t.te().debug("bitmovin.player.EVENT.ON_STOP_BUFFERING"),t.dj()}),this.player.addEventHandler("onPause",function(){t.te().debug("bitmovin.player.EVENT.ON_PAUSE"),t.hj(s.kc.$a.Ya)}),this.player.addEventHandler("onVideoDownloadQualityChange",function(e){t.S_()===StreamProtocol.OU?t.lj(e.targetQuality):t.lj(e.targetQuality.split("br")[1])})},e.prototype.pj=function(){var t=this;this.player.addEventHandler("onStallStarted",function(){t.te().debug("bitmovin.player.EVENT.ON_STALL_STARTED"),t.sj()}),this.player.addEventHandler("onStallEnded",function(){t.te().debug("bitmovin.player.EVENT.ON_STALL_ENDED"),t.dj()}),this.player.addEventHandler("onPaused",function(){t.te().debug("bitmovin.player.EVENT.ON_PAUSED"),t.hj(s.kc.$a.Ya)}),this.player.addEventHandler("onVideoDownloadQualityChanged",function(e){t.lj(e.targetQuality&&e.targetQuality.bitrate||e.gj&&e.gj.bitrate)})},e.prototype.lj=function(t){this.te().debug("newBitrate",t),this.uj&&t>this.uj?this.aj.Jn():this.uj&&this.uj>t&&this.aj.Wn(),this.uj=t},e.prototype.hj=function(t){void 0!=this.JV&&this.JV===t||(this.cj(t),this.JV=t)},e.prototype.b_=function(){var t=this.S_();return t===StreamProtocol.OU?this.player.getConfig().source.hls:t===StreamProtocol.yB?this.player.getConfig().source.dash:void 0},e.prototype.getCurrentTime=function(){return null!=this.player?Math.round(1e3*this.player.getCurrentTime()):0},e.prototype.vj=function(){return null!=this.player&&null!=this.player.getVideoBufferLength&&this.player.getVideoBufferLength()>0?Math.max(0,Math.round(1e3*this.player.getVideoBufferLength())):0},e.prototype.yj=function(){if(this.player){var t=this.player.getFigure();return{width:t.offsetWidth,height:t.offsetHeight}}},e.prototype.isFullscreen=function(){return this.player.isFullscreen()},e.prototype.isLive=function(){return this.player.isLive()},e.prototype.ci=function(){return!0},e.prototype.S_=function(){if(this.player){var t=this.player.getStreamType();if("hls"===t)return StreamProtocol.OU;if("dash"===t)return StreamProtocol.yB}return null},e.prototype.__=function(){var t=this.aj;return this.aj=new o.ns,t},e.prototype.ej=function(){return this.pluginName},e.prototype.rj=function(){return this.mj()},e.prototype.Ej=function(){if(this.player)return this.player.getPlayerType()},e.prototype.getPlayerVersion=function(){return void 0!==bitmovin.player.version?bitmovin.player.version:this.player.getVersion()},e}(r.gn.Plugin);e.Tj=c;var f=function(t,e){new c(t,e)};bitmovin.initHiveSDN=f},function(t,e,i){"use strict";var n=i(1),r=i(2),o=i(0),s=i(102),a=i(103),h=i(26),u=i(38),c=i(7),f=i(107),l=i(18),p=i(109),d=i(9),v=i(111),g=i(53),y=i(29),w=i(4),m=i(42),b=i(49),E=i(5),I=s.gn.ou,S=a.gn.Ij,R=h.gn.Zm,O=h.gn.dE,T=h.gn.HiveTechError,C=h.gn.cE,N=h.gn.yE,k=E.Rt.wi,A=E.Rt.Ti,P=E.Rt.Ei,_=E.Rt.Ii;(P||_)&&i(8).HiveConfig,e.version=k,!function(t){var a=function(){function t(t){this.wj=[S[S.HiveJava],S[S.HiveJsProxy],S[S.HiveJS],S[S.StatsJS]],this.Sj=new n,this.Rj=new Array,this.bj=new Array,this.Pj=null,this.Aj=0,this.Cj=0,this.mn="[HiveComm] ",this.kj=0,this.Oj=c.Es.getItem("hivePluginId"),this.Oj||(this.Oj=Math.abs(Math.floor(68719476736*Math.random())).toString(16),c.Es.setItem("hivePluginId",this.Oj)),w.ErrorMonitor.gi(e.version),this.options_=new I._j,this.Nj(t),c.vs(t,this.options_),c.ys(window.location.href,new I.Dj,this.options_),s.Lj.Fj(this.options_),this.cu=o.Framework.resolve(o.Framework.q.I),u.HiveConfig.Framework.LoggerTimestamp=this.options().loggerTimestamp,this.cu.mA(this.options().debugLevel),w.ErrorMonitor.gi().mi(this.cu.log());var i=o.Framework.resolve(d.Qs.D),r=o.Framework.resolve(d.Qs.Us);i.jc().then(function(t){w.ErrorMonitor.gi().setUser(t.Kc())});var a={};new f.Mj(this),r.Vh().then(function(t){a={pIPAddr:t.Qh().Cs()},w.ErrorMonitor.gi().setCustomData(a)}),window.uu=this.cu.log(),this.Bj(),this.Uj=new N(this);var h=this.options().idleTimePeriod>this.options().feedbackPeriod?this.options().idleTimePeriod:b.N.aO;this.xj=new c.As(h)}return t.prototype.options=function(){return this.options_},t.prototype.te=function(){return this.Pj?this.cu.log(this.Pj.id):this.cu.log()},t.prototype.Hj=function(){if(this.te)return this.cu.level},t.prototype.tj=function(){return this.Oj},t.prototype.mj=function(){return e.version},t.prototype.qj=function(){for(var t=0,e=this.bj;t<e.length;t++){var i=e[t];i.tech.k_(this),"HiveJS"===i.tech.Fn()&&i.tech.Vj&&i.tech.Vj.k_(this)}},t.prototype.Nj=function(t){var e=new g.StatsJS(this,t);if(this.Sj.set(g.StatsJS.c_,e),P){var n=i(130).HiveJS;this.Sj.set(n.c_,new n(this,t,e))}if(_){var r=i(196).HiveJsProxy;this.Sj.set(r.c_,new r(this,t,e))}if(A){var o=i(198).HiveJava;this.Sj.set(o.c_,new o(this,t))}var s=t.hiveTechOrder;if(!s||s instanceof Array)if(s&&s.length>0)for(var a=s.length;a--;){var h=s[a];"string"!=typeof h||-1==this.wj.indexOf(h)?(console.warn(this.mn+'The "'+h+'" Hive tech is undefined'),s.splice(a,1)):"string"==typeof h&&this.Sj.has(h)||console.warn(this.mn+'The "'+h+'" Hive tech is not enabled on this plugin')}else s=this.wj;else console.warn(this.mn+"hiveTechOrder value not accepted. It must be an array of strings"),s=this.wj;t.hiveTechOrder=s},t.prototype.XV=function(t){var e=this;this.te().notice(this.mn+"resolving "+t);var i=r.defer();if(!t)return i.reject(c.ms("",R.Xm,"No ticket provided.")),i.Te;this.jj(t);var n=this.Gj().values();0==n.length&&i.reject(c.ms(t,R.zm));var o,s,a=!1,h=!1,u=0,f=null;return c.ls(function(){return!a&&!h&&u<n.length&&!o},function(){var i=n[u++];i.C_();var c;return c=i.u_()&&!s?e.LL(t):r.resolve(null),c.then(function(n){null!=n&&(s=n);var o=i.f_();return i.initSession(t,s).timeout(o,"["+i.Fn()+"] Error: initialization timed out after "+o+"ms").then(function(t){f=t,e.Qj(f,i),a=!0,!i.u_()&&s&&s.tc.reset(),e.te().notice(e.mn+"initializing Session:["+f.id+"] Ticket:"+f.ticket.toString()+" HiveTech:["+f.tech.Fn()+"]"),r.resolve(!0)},function(n){n instanceof Error&&(n=new T(C.hE,n.message),i.A_(n)),n.ticketUrl=t,h=!i.onError(n),e.te().debug(e.mn+"tech "+i.Fn()+": "+n.message),r.resolve(!0)})},function(t){o=t,r.resolve(!0)})}).then(function(){o?i.reject(c.ms(t,R.Xm,o)):h?i.reject(c.ms(t,R.Wm)):a?i.resolve(f):i.reject(c.ms(t,R.zm))}).catch(function(n){w.ErrorMonitor.gi().di("Error resolving ticket promise",e.mn,n),i.reject(c.ms(t,R.Ym,n.toString()))}).done(),i.Te},t.prototype.LL=function(t){var e=this;return y.Hive.Reporting().initSession(t,!1).then(function(i){return e.te().debug(e.mn+"verified ticket "+t),e.wh(i),i}).catch(function(t){return r.reject("Ticket not verified, error: "+t.message)})},t.prototype.Gj=function(){var t=JSON.parse(JSON.stringify(this.options().hiveTechOrder)),e=new n;for(var i in t)this.Sj.has(t[i])&&e.set(t[i],this.Sj.get(t[i]));return e},t.prototype.jj=function(t){var e=w.ErrorMonitor.gi();try{var i=new m.VA;i.AA(t),i.Lh()&&i.Mh()&&i.Xc()?e.setTags([i.Lh(),i.Mh(),i.Xc()]):e.di("Ticket not valid, we could not resolve the triple partnerId/CustomerId/ContentId",this.mn,{partnerId:i.Lh(),customerId:i.Mh(),contentId:i.Xc()})}catch(t){this.te().warn(this.mn+" "+t.message,t),e.notify(t)}},t.prototype.wh=function(t){var i={commVersion:e.version,pluginName:this.ej(),pluginVersion:this.rj(),playerTech:this.Ej(),playerVersion:this.getPlayerVersion(),telemetryId:this.Kj()};t.tc.wh(i)},t.prototype.$V=function(){window.HiveRequest=XMLHttpRequest,c.HiveRequestFactory.clear(),y.Hive.Reporting().close()},t.prototype.Yj=function(t){this.Pj&&this.Pj.tech?(t.sessionId=this.Pj.id,this.Pj.tech.Nh(this.Pj,t)):this.Rj.push(t)},t.prototype.P_=function(){var t=this.Rj;return this.Rj=new Array,t},t.prototype.Bj=function(){var t=this,e=window;e.addEventListener?e.addEventListener("beforeunload",function(){t.zj(!0,!1)},!1):e.attachEvent("onbeforeunload",function(){t.zj(!0,!1)})},t.prototype.closeHiveSession=function(t){this.te().debug("Manually Closing Session"+(t?" because: "+t:""));var e=this.oj();e&&c.HiveRequestFactory.Sn(e.id),this.WV(!0)},t.prototype.WV=function(t){var e=this;this.zj(t),!1===t?this.Pj&&this.bj.every(function(t){return t.id!==e.Pj.id})&&this.bj.unshift(this.Pj):this.bj.length=0,this.Jj(),this.Pj=null,this.Aj=0,this.Cj=0},t.prototype.Qj=function(t,e){t.tech=e,this.bj.push(t)},t.prototype.eF=function(t){if(null==this.Pj){for(var e=t||this.b_(),i=0;i<this.bj.length;i++){var n=this.bj[i];if(n.ci(e))return this.Pj=n,this.Pj.Cn?this.Pj.Cn.Nc.kL(this.Pj.ticket):this.Wj(),this.bj.length=0,this.Pj.tech.onActiveSession(this.Pj),this.te().notice(this.mn+"activating Session:["+this.Pj.id+"] Ticket:"+this.Pj.ticket.toString()+" HiveTech:["+this.Pj.tech.Fn()+"]"),this.Xj(),!0}this.te().warn(this.mn+"Closing sessions - the active stream doesn't match any initialized sessions"),this.te().warn(this.mn+"Active:"+e+" - initialized: "+this.bj.length),this.WV()}return!1},t.prototype.oj=function(){if(this.Pj)return this.Pj.Dn()},t.prototype.Wj=function(){var t=!1;this.bj.forEach(function(e){e.Cn&&(t=!0)}),t&&y.Hive.Reporting().close()},t.prototype.Zj=function(){if(null!=this.Pj){if(this.Pj.ci(this.b_()))return!0;this.te().warn(this.mn+"Session src mismatch: "+this.b_()+" != "+this.Pj.manifest),this.WV()}return!1},t.prototype.zj=function(t,e){if(void 0===e&&(e=!0),null!=this.Pj)this.te().notice(this.mn+"Stopping session ["+this.Pj.id+"]"),this.Pj.close(t,e);else if(this.bj.length>0){var i=this.bj[0];this.te().notice(this.mn+"Attempt to stopping session ["+i.id+"]"),i.close(t,e)}},t.prototype.Xj=function(){var t=this;null==this.$j&&(this.$j=setInterval(function(){t.eG()},this.options().feedbackPeriod),this.eG())},t.prototype.Jj=function(){clearInterval(this.$j),this.$j=null},t.prototype.eG=function(){var t=this;if(this.Zj()){if(!this.ci())return void this.WV();var e=new c.Un;e.Rs=this.getCurrentTime(),e.bs=this.vj(),e.Ps=this.Aj,e.width=this.yj().width,e.height=this.yj().height,e.tG=this.isFullscreen(),this.Pj.kn(this.xj.Is(e)),this.Pj.tech.g_(this.Pj,e).fail(function(e){t.te().warn(t.mn+"stats handling failed",e),t.Jj()})}},t.prototype.rG=function(){var t=this;try{c.hs.gi(this.te()).as(function(e){var i=t.iG();i&&!i._n()&&(t.cj(e?l.kc.$a.Za:l.kc.$a.HIDDEN),t.te().debug(e?"visible":"hidden"))})}catch(t){w.ErrorMonitor.gi().di("error setting up the visibilityChange listener",this.mn,{error:t})}},t.prototype.sj=function(t){this.Zj()&&this.Cj<=0&&(this.Cj=Date.now(),(void 0==t||t)&&this.cj(l.kc.$a.Ka))},t.prototype.dj=function(){var t=0==this.Aj;if(this.Cj>0){var e=Date.now()-this.Cj;return this.Aj+=e,this.te().debug(this.mn+"reporting new buffering event of "+e),this.Cj=0,t&&this.eG(),!0}return!1},t.prototype.onError=function(t,e,i){void 0===i&&(i=!0),this.cj(l.kc.$a.ERROR,{code:-1,"player-code":t}),i&&this.WV()},t.prototype.cj=function(t,e){var i=this,n=this.iG();null==n||n!=this.Pj&&n.tech.Fn()===S[S.HiveJava]||n.tech.E_(n,t,e).fail(function(t){i.te().warn(i.mn+"error in forwarding player event to tech",t)})},t.prototype.iG=function(){return this.Pj?this.Pj:this.bj&&this.bj.length>0?this.bj[0]:void 0},t.prototype.nG=function(){this.kj=0},t.prototype.sG=function(t,e){this.nG(),this.kj+=t<<28,e&&0===t&&(this.kj+=1<<4*(6-S[e.Fn()])),t>0&&w.ErrorMonitor.gi().di("Status Code Error",this.mn,{code:O[t]},["Plugin Error Code",O[t]])},t.prototype.vE=function(){return this.kj},t.prototype.Kj=function(){return this.options().telemetryId},t}();t.Plugin=a}(e.gn||(e.gn={})),o.Framework.Z(new p.oG),o.Framework.ie("peer0",new v.aG),o.Framework.ne("peer0"),window.HiveRequestFactory=c.HiveRequestFactory},function(t,e){if(!RegExp.escape){var i=/[-[\]{}()*+?.\\^$|,#\s]/g;RegExp.escape=function(t){return t.replace(i,"\\$&")}}},function(t,e,i){"use strict";function n(){throw new Error("Can't construct. MapChanges is a mixin.")}var r=i(34),o=i(46);t.t=n;var s=(Object.prototype.hasOwnProperty,new r),a=null;n.prototype.hG=function(){return s.has(this)||(a||(a=i(47)),s.set(this,a())),s.get(this)},n.prototype.cG=function(t){var e=this.hG();return t=t||"",e.has(t)||e.set(t,{Lo:new o,Mo:new o}),e.get(t)},n.prototype.uG=function(t,e,i){!this.Ho&&this.xo&&this.xo();var n,r=this.cG(e);n=i?r.Lo:r.Mo,n.push(t),Object.defineProperty(this,"dispatchesMapChanges",{value:!0,Ui:!0,u:!0,l:!1});var o=this;return function(){o&&(o.lG(t,e,i),o=null)}},n.prototype.lG=function(t,e,i){var n,r=this.cG(e);n=i?r.Lo:r.Mo;var o=n.Hk(t);if(!o)throw new Error("Can't remove map change listener: does not exist: token "+JSON.stringify(e));o.delete()},n.prototype.iO=function(t,e,i){var n="Map"+(i?"WillChange":"Change");this.hG().forEach(function(r,o){if(!r.ci){r.ci=!0;var s;s=i?r.Lo:r.Mo;var a="handle"+(o.slice(0,1).toUpperCase()+o.slice(1))+n;try{s.forEach(function(i){if(i[a])i[a](e,t,this);else{if(!i.call)throw new Error("Handler "+i+" has no method "+a+" and is not callable");i.call(i,e,t,this)}},this)}finally{r.ci=!1}}},this)},n.prototype.pG=function(t,e){return this.uG(t,e,!0)},n.prototype.fG=function(t,e){return this.lG(t,e,!0)},n.prototype.rO=function(t,e){return this.iO(t,e,!0)}},function(t,e,i){"use strict";function n(t,e,i,r){if(!(this instanceof n))return new n(t,e,i,r);e=e||Object.ae,i=i||Object.hash,r=r||Function.he,this.ce=e,this.ue=i,this.le=r;var o=this;this.dG=new this.gG(null,function(){return new o.vG}),this.length=0,this.addEach(t)}var r=(i(12),i(47)),o=i(46),s=i(13),a=i(36),h=i(64),u=i(14);Object.prototype.hasOwnProperty,t.t=n,n.yG=n,Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),Object.addEach(n.prototype,u.prototype),n.prototype.gG=r,n.prototype.vG=o,n.prototype.de=function(t){return new this.constructor(t,this.ce,this.ue,this.le)},n.prototype.has=function(t){var e=this.ue(t);return this.dG.get(e).has(t)},n.prototype.get=function(t,e){if(e)throw new Error("FastSet#get does not support second argument: equals");var i=this.ue(t),n=this.dG;return n.has(i)?n.get(i).get(t):this.le(t)},n.prototype.delete=function(t,e){if(e)throw new Error("FastSet#delete does not support second argument: equals");var i=this.ue(t),n=this.dG;if(n.has(i)){var r=n.get(i);if(r.delete(t))return this.length--,0===r.length&&n.delete(i),!0}return!1},n.prototype.clear=function(){this.dG.clear(),this.length=0},n.prototype.add=function(t){var e=this.ue(t),i=this.dG;return i.has(e)||i.set(e,new this.vG(null,this.ce)),!i.get(e).has(t)&&(i.get(e).add(t),this.length++,!0)},n.prototype.reduce=function(t,e){var i=arguments[2],n=0;return this.dG.reduce(function(e,r){return r.reduce(function(e,r){return t.call(i,e,r,n++,this)},e,this)},e,this)},n.prototype.Po=function(){if(this.length>0)return this.dG.Po().Po()},n.prototype.Ao=function(){return this.dG.values().Io().Ao()},n.prototype.log=function(t,e,i,n){t=t||h.QD,e=e||this.ge,i||(i=console.log,n=console),i=i.bind(n);var r=this.dG,o=r.keys();o.forEach(function(s,a){var h,u;a===o.length-1?(h=t.qD,u=" "):0===a?(h=t.xD,u=t.jD):(h=t.VD,u=t.jD);var c=r.get(s);i.call(n,h+t.BD+t.xD+" "+s),c.forEach(function(r,o){var s,a;o===c.head.Mk?(s=t.qD,a=" "):(s=t.VD,a=t.jD);var h;e(o,function(e){h?i.call(n,u+" "+a+"  "+e):(i.call(n,u+" "+s+t.BD+t.BD+e),h=!0)},function(e){i.call(n,u+" "+t.jD+"  "+e)})})})},n.prototype.ge=function(t,e){var i=t.value;Object(i)===i?JSON.stringify(i,null,4).split("\n").forEach(function(t){e(" "+t)}):e(" "+i)}},function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);if(Array.isArray(t)||"string"==typeof t)return n.Ao(t);if((t=r(t))instanceof n)return t;if(t.next)this.next=function(){return t.next()};else if(t.Ao){var e=t.Ao();this.next=function(){return e.next()}}else{if("[object Function]"!==r.prototype.toString.call(t))throw new TypeError("Can't iterate "+t);this.next=t}}t.t=n;var r=i(33),o=i(13);n.prototype.forEach=o.prototype.forEach,n.prototype.map=o.prototype.map,n.prototype.filter=o.prototype.filter,n.prototype.every=o.prototype.every,n.prototype.some=o.prototype.some,n.prototype.ht=o.prototype.ht,n.prototype.all=o.prototype.all,n.prototype.min=o.prototype.min,n.prototype.max=o.prototype.max,n.prototype.Eo=o.prototype.Eo,n.prototype.To=o.prototype.To,n.prototype.Io=o.prototype.Io,n.prototype.wo=o.prototype.wo,n.prototype.enumerate=o.prototype.enumerate,n.prototype.Ro=o.prototype.Ro,n.prototype.group=o.prototype.group,n.prototype.reversed=o.prototype.reversed,n.prototype.toArray=o.prototype.toArray,n.prototype.vo=o.prototype.vo,n.prototype.iterator=o.prototype.iterator,n.prototype.zk=null,r.defineProperty(n.prototype,"_iterationObject",{get:function(){return this.zk||(this.zk={done:!1,value:void 0})}}),n.prototype.de=function(t){var e=[];return e.addEach(t),e},n.prototype.mG=function(t){var e=n(this),i=arguments[1],o=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){if(!0!==e.Jk.done){var n=t.call(i,e.next().value,o++,e);e.Jk.value=n}return e.Jk})},n.prototype.EG=function(t){var e=n(this),i=arguments[1],o=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){for(var n;;){if(n=e.next(),!0===n.done)return n;if(t.call(i,n.value,o++,e))return n}})},n.prototype.reduce=function(t){var e,i=n(this),o=arguments[1],s=arguments[2],a=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;if(e=i.next(),!0===e.done){if(arguments.length>1)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}for(o=arguments.length>1?t.call(s,o,e.value,a,i):e.value,a++;;){if(e=i.next(),!0===e.done)return o;o=t.call(s,o,e.value,a,i),a++}},n.prototype.concat=function(){return n.concat(Array.prototype.concat.apply(this,arguments))},n.prototype.TG=function(t){var e,i,o=n(this),s=arguments[1],a=!1,h=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;for(;i=o.next(),!0!==i.done;){if(!t.call(s,i.value,h,o)){a=!0,e=i.value;break}h++}return a?o.constructor([e]).concat(o):o.constructor([])},n.prototype.IG=function(t){var e=n(this),i=arguments[1],o=0;if("[object Function]"!=r.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){if(!0!==e.Jk.done){var n=e.next().value;t.call(i,n,o++,e)?e.Jk.value=n:(e.Jk.done=!0,e.Jk.value=void 0)}return e.Jk})},n.prototype.wG=function(){return n.So(Array.prototype.concat.apply(this,arguments))},n.prototype.SG=function(t){return n.count(t).wG(this)},n.Ao=function(t){var e;return e=0,new n(function(){if("object"==typeof t)for(;!(e in t);){if(e>=t.length){this.Jk.done=!0,this.Jk.value=void 0;break}e+=1}else e>=t.length&&(this.Jk.done=!0,this.Jk.value=void 0);return this.Jk.done||(this.Jk.value=t[e],e+=1),this.Jk})},n.RG=function(t,e){var i;return arguments.length<2&&(e=1/0),new n(function(){var r,o;return i&&(o=i()),i&&!0!==o.done||(e>0?(e--,r=n.Ao(t),o=(i=r.next.bind(r))()):(this.Jk.done=!0,o=this.Jk)),o})},n.concat=function(t){t=n(t);var e;return new n(function(){var i,r;return e&&(r=e()),r&&!0!==r.done?r:(r=t.next(),!1===r.done?(i=n(r.value),(e=i.next.bind(i))()):r)})},n.So=function(t){return t=n(t).map(n),new n(0===t.length?[]:function(){var e,i,n=t.map(function(t){return i=t.next(),!0===i.done&&(e=!0),i.value});return e?(this.Jk.done=!0,this.Jk.value=void 0):this.Jk.value=n,this.Jk})},n.wo=function(){return n.So(Array.prototype.slice.call(arguments))},n.chain=function(){return n.concat(Array.prototype.slice.call(arguments))},n.range=function(t,e,i){return arguments.length<3&&(i=1),arguments.length<2&&(e=t,t=0),t=t||0,i=i||1,new n(function(){t>=e&&(this.Jk.done=!0,this.Jk.value=void 0);var n=t;return t+=i,this.Jk.value=n,this.Jk})},n.count=function(t,e){return n.range(t,1/0,e)},n.repeat=function(t,e){return new n.range(e).mG(function(){return t})}},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(20),o=r.gn.ou.ou,s=r.gn.ou.hu;!function(t){!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.authTokenEnabled=!0,e.dashRemoveBitrateSize=!1,e.dashFilterBitrates=null,e.staticPartnerId=null,e.staticCustomerId=null,e.audioMetrics=!0,e.logJsonSnapshots=void 0,e}return n(e,t),e}(o);t._j=e;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hiveAuthTokenEnabled="authTokenEnabled",e.hiveDashRemoveBitrateSize="dashRemoveBitrateSize",e.hiveDashFilterBitrates="dashFilterBitrates",e.hiveLogJsonSnapshots="logJsonSnapshots",e.hiveStaticPartnerId="staticPartnerId",e.hiveStaticCustomerId="staticCustomerId",e.hiveAudioMetrics="audioMetrics",e}return n(e,t),e}(s);t.Dj=i}(t.ou||(t.ou={}))}(e.gn||(e.gn={}));var a=function(){function t(){}return t.Fj=function(t){"dashRemoveBitrateSize"in t&&t.dashRemoveBitrateSize&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashRemoveBitrateSize=t.dashRemoveBitrateSize),"dashFilterBitrates"in t&&t.dashFilterBitrates&&window.HiveConfig&&window.HiveConfig.Dash&&(window.HiveConfig.Dash.DashFilterBitrates=t.dashFilterBitrates),"staticCustomerId"in t&&t.staticCustomerId&&window.HiveConfig&&window.HiveConfig.ClientInfo&&(window.HiveConfig.ClientInfo.Ls=t.staticCustomerId),"staticPartnerId"in t&&t.staticPartnerId&&window.HiveConfig&&window.HiveConfig.ClientInfo&&(window.HiveConfig.ClientInfo.Fs=t.staticPartnerId),"audioMetrics"in t&&!t.audioMetrics&&window.HiveConfig&&window.HiveConfig.Stats&&(window.HiveConfig.Stats.Ds=t.audioMetrics),"detectPrivateIP"in t&&"boolean"==typeof t.detectPrivateIP&&window.HiveConfig&&window.HiveConfig.ConnInfo&&(window.HiveConfig.ConnInfo.detectPrivateIP=t.detectPrivateIP),"logJsonSnapshots"in t&&t.logJsonSnapshots&&window.HiveConfig&&window.HiveConfig.DebugLogs&&(window.HiveConfig.DebugLogs.MetricSnapshotLogs=1,window.HiveConfig.DebugLogs.TrackSnapshotLogs=1,window.HiveConfig.DebugLogs.TrackerLogs=1)},t}();e.Lj=a},function(t,e,i){"use strict";!function(t){!function(t){t[t.HiveJS=0]="HiveJS",t[t.HiveJava=1]="HiveJava",t[t.StatsJS=2]="StatsJS",t[t.HiveJsProxy=3]="HiveJsProxy"}(t.Ij||(t.Ij={}))}(e.gn||(e.gn={}))},function(t,e,i){"use strict";var n=function(){function t(){var e=this;if(this.bG=new Array,this.callbacks=new Array,t.li)throw new Error("Error: Instantiation failed: Use KeyHandlerHiveComm.getInstance() instead of new.");var i={};document.addEventListener("keydown",function(t){i[t.keyCode]=!0,e.PG(i)},!0),document.addEventListener("keyup",function(t){i={}},!0)}return t.gi=function(){return void 0===this.li&&(this.li=new t),this.li},t.prototype.vi=function(t,e){this.bG.push(t),this.callbacks.push(e)},t.prototype.PG=function(t){for(var e=this,i=0;i<this.bG.length;i++)!function(i){var n=!0;e.bG[i].forEach(function(e){void 0!=t[e]&&t[e]||(n=!1)}),n&&e.callbacks[i]()}(i)},t}();e.yi=n},function(t,e){t.t=function(t){return t&&"object"==typeof t&&"function"==typeof t.rP&&"function"==typeof t.fill&&"function"==typeof t.AG}},function(t,e){"function"==typeof Object.create?t.t=function(t,e){t.CG=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,l:!1,Ui:!0,u:!0}})}:t.t=function(t,e){t.CG=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";var n=i(39),r=i(49),o=i(7),s=i(4),a=function(){function t(t){this.kG=r.N.$c?9989:9988,this.OG=-1,this.h_=t,this._G()}return t.prototype._G=function(){var t=this;this.h_.options().silent&&(HiveConfig&&(HiveConfig.ConnInfo.detectPrivateIP=!0),void 0===this.NG&&(this.url="//"+n.tu.oA+":"+this.kG+"/feedback",this.h_.te().info("starting periodic alive ping to hive tester ["+this.url+"]"),this.NG=setInterval(function(){t.DG()},r.N.oO)))},t.prototype.DG=function(){var t=this,e=this.h_.oj(),i=void 0;e&&(i="S["+e.id+"]");var n=this.h_.getCurrentTime();n>this.OG?(this.h_.te().info("sending hive tester ping ["+n+" > "+this.OG+"]"),o.ps(this.url).then(function(t){},function(e){s.ErrorMonitor.gi().di("error sending hive tester ping",i,{error:e}),clearInterval(t.NG)})):this.h_.te().warn("not sending hive tester ping ["+n+" <= "+this.OG+"]"),this.OG=n},t}();e.Mj=a},function(t,e){(function(e){t.t=e}).call(e,{})},function(t,e,i){"use strict";var n=i(37),r=i(110),o=i(41),s=i(0),a=function(){function t(){}return t.prototype.apply=function(t){t.bind(new n.QP(s.Framework.q.T,r.FG,n.KP.ZP)),t.bind(new n.QP(s.Framework.q.I,o.SA.wA))},t}();e.oG=a},function(t,e,i){"use strict";var n=i(63),r=function(){function t(){this.LG=new n,this.MG=new n,"undefined"!=typeof global?this.BG=global:this.BG=window}return t.prototype.S=function(){return!1},t.prototype.UG=function(t,e,i){},t.prototype.A=function(){},t.prototype.time=function(){return+new Date},t.prototype.setTimeout=function(t,e){var i=this,n=this.BG.setTimeout(function(){i.LG.delete(n),t()},e);return this.LG.add(n),n},t.prototype.clearTimeout=function(t){return this.LG.delete(t),this.BG.clearTimeout(t),!0},t.prototype.setInterval=function(t,e){var i=this.BG.setInterval(function(){t()},e);return this.MG.add(i),i},t.prototype.clearInterval=function(t){return this.MG.delete(t),this.BG.clearInterval(t),!0},t.prototype.C=function(){var t=this;this.LG.forEach(function(e){return t.clearTimeout(e)}),this.MG.forEach(function(e){return t.clearInterval(e)})},t}();e.FG=r},function(t,e,i){"use strict";var n=i(37),r=i(0),o=i(41),s=i(19),a=i(9),h=i(18),u=i(71),c=i(72),f=i(73),l=i(75),p=i(76),d=i(5),v=d.Rt.Oi;if(v)var g=i(77).vM;else var y=i(79).zM;var w=function(){function t(){}return t.prototype.apply=function(t){t.bind(new n.QP(a.Qs.qs,s.Zc,n.KP.ZP)),t.bind(new n.QP(a.Qs.H,c.OL,n.KP.ZP)),t.bind(new n.QP(a.Qs.Bs,f.BL,n.KP.ZP)),t.bind(new n.QP(a.Qs.D,l.oM,n.KP.ZP)),t.bind(new n.QP(r.Framework.q.I,o.SA.wA,n.KP.ZP)),v?t.bind(new n.QP(a.Qs.Us,g,n.KP.ZP)):t.bind(new n.QP(a.Qs.Us,y,n.KP.ZP)),t.bind(new n.QP(a.Qs.xs,p.uM,n.KP.ZP)),t.bind(new n.QP(a.Qs.Vs,u.Stats.LD,n.KP.sA)),t.bind(new n.QP(a.Qs.Ms,u.Stats.vc,n.KP.sA)),t.bind(new n.QP(a.Qs.js,h.kc.$h,n.KP.sA)),t.bind(new n.QP(a.Qs.Gs,h.kc.vc,n.KP.sA))},t}();e.aG=w},function(t,e,i){var n=i(30);"undefined"==typeof hive&&(hive={}),void 0===hive.snapshots&&(hive.snapshots={}),hive.snapshots.Traffic=function(t){this.reqN=null,this.respFallbackN=null,this.respFallbackErrN=null,this.respP2pN=null,this.reqOtherN=null,this.respFallbackOtherN=null,this.respFallbackOthertErrN=null,this.srcReqN=null,this.srcRespN=null,this.srcRespErrN=null,this.srcReqQt=null,this.srcRespQt=null,this.srcOverQt=null,this.srcOtherReqN=null,this.srcOtherRespN=null,this.srcOtherRespErrN=null,this.srcOtherReqQt=null,this.srcOtherRespQt=null,this.srcOtherOverQt=null,this.p2pSubReqN=null,this.p2pSubRespN=null,this.p2pSubRespPartN=null,this.p2pSubRespErrN=null,this.p2pSubRespExpN=null,this.p2pSubReqQt=null,this.p2pSubRespQt=null,this.p2pDirectQt=null,this.p2pRelayQt=null,this.p2pNatQt=null,this.p2pUdpbQt=null,this.fallAgentRespN=null,this.fallAgentPredHitN=null,this.fallAgentFailedRespN=null,this.fallAgentPredMissN=null,this.fallAgentPredPartialHitN=null,this.fallAgenTrafficSuccessQt=null,this.fallAgenTrafficFailureQt=null,this.p2pAgentPredHitN=null,this.p2pAgentPredMissN=null,this.p2pAgentPredPartialHitN=null,this.p2pAgenTrafficSuccessQt=null,this.p2pAgenTrafficFailureQt=null,this.respP2pOtherN=null,this.lCacheRespN=null,this.lCacheRespQt=null,this.p2pOutSiteLowPrio=null,t&&(void 0!==t.reqN&&(this.reqN=t.reqN),void 0!==t.respFallbackN&&(this.respFallbackN=t.respFallbackN),void 0!==t.respFallbackErrN&&(this.respFallbackErrN=t.respFallbackErrN),void 0!==t.respP2pN&&(this.respP2pN=t.respP2pN),void 0!==t.reqOtherN&&(this.reqOtherN=t.reqOtherN),void 0!==t.respFallbackOtherN&&(this.respFallbackOtherN=t.respFallbackOtherN),void 0!==t.respFallbackOthertErrN&&(this.respFallbackOthertErrN=t.respFallbackOthertErrN),void 0!==t.srcReqN&&(this.srcReqN=t.srcReqN),void 0!==t.srcRespN&&(this.srcRespN=t.srcRespN),void 0!==t.srcRespErrN&&(this.srcRespErrN=t.srcRespErrN),void 0!==t.srcReqQt&&(this.srcReqQt=t.srcReqQt),void 0!==t.srcRespQt&&(this.srcRespQt=t.srcRespQt),void 0!==t.srcOverQt&&(this.srcOverQt=t.srcOverQt),void 0!==t.srcOtherReqN&&(this.srcOtherReqN=t.srcOtherReqN),void 0!==t.srcOtherRespN&&(this.srcOtherRespN=t.srcOtherRespN),void 0!==t.srcOtherRespErrN&&(this.srcOtherRespErrN=t.srcOtherRespErrN),void 0!==t.srcOtherReqQt&&(this.srcOtherReqQt=t.srcOtherReqQt),void 0!==t.srcOtherRespQt&&(this.srcOtherRespQt=t.srcOtherRespQt),void 0!==t.srcOtherOverQt&&(this.srcOtherOverQt=t.srcOtherOverQt),void 0!==t.p2pSubReqN&&(this.p2pSubReqN=t.p2pSubReqN),void 0!==t.p2pSubRespN&&(this.p2pSubRespN=t.p2pSubRespN),void 0!==t.p2pSubRespPartN&&(this.p2pSubRespPartN=t.p2pSubRespPartN),void 0!==t.p2pSubRespErrN&&(this.p2pSubRespErrN=t.p2pSubRespErrN),void 0!==t.p2pSubRespExpN&&(this.p2pSubRespExpN=t.p2pSubRespExpN),void 0!==t.p2pSubReqQt&&(this.p2pSubReqQt=t.p2pSubReqQt),void 0!==t.p2pSubRespQt&&(this.p2pSubRespQt=t.p2pSubRespQt),void 0!==t.p2pDirectQt&&(this.p2pDirectQt=t.p2pDirectQt),void 0!==t.p2pRelayQt&&(this.p2pRelayQt=t.p2pRelayQt),void 0!==t.p2pNatQt&&(this.p2pNatQt=t.p2pNatQt),void 0!==t.p2pUdpbQt&&(this.p2pUdpbQt=t.p2pUdpbQt),void 0!==t.fallAgentRespN&&(this.fallAgentRespN=t.fallAgentRespN),void 0!==t.fallAgentPredHitN&&(this.fallAgentPredHitN=t.fallAgentPredHitN),void 0!==t.fallAgentFailedRespN&&(this.fallAgentFailedRespN=t.fallAgentFailedRespN),void 0!==t.fallAgentPredMissN&&(this.fallAgentPredMissN=t.fallAgentPredMissN),void 0!==t.fallAgentPredPartialHitN&&(this.fallAgentPredPartialHitN=t.fallAgentPredPartialHitN),void 0!==t.fallAgenTrafficSuccessQt&&(this.fallAgenTrafficSuccessQt=t.fallAgenTrafficSuccessQt),void 0!==t.fallAgenTrafficFailureQt&&(this.fallAgenTrafficFailureQt=t.fallAgenTrafficFailureQt),void 0!==t.p2pAgentPredHitN&&(this.p2pAgentPredHitN=t.p2pAgentPredHitN),void 0!==t.p2pAgentPredMissN&&(this.p2pAgentPredMissN=t.p2pAgentPredMissN),void 0!==t.p2pAgentPredPartialHitN&&(this.p2pAgentPredPartialHitN=t.p2pAgentPredPartialHitN),void 0!==t.p2pAgenTrafficSuccessQt&&(this.p2pAgenTrafficSuccessQt=t.p2pAgenTrafficSuccessQt),void 0!==t.p2pAgenTrafficFailureQt&&(this.p2pAgenTrafficFailureQt=t.p2pAgenTrafficFailureQt),void 0!==t.respP2pOtherN&&(this.respP2pOtherN=t.respP2pOtherN),void 0!==t.lCacheRespN&&(this.lCacheRespN=t.lCacheRespN),void 0!==t.lCacheRespQt&&(this.lCacheRespQt=t.lCacheRespQt),void 0!==t.p2pOutSiteLowPrio&&(this.p2pOutSiteLowPrio=t.p2pOutSiteLowPrio))},hive.snapshots.Traffic.prototype={},hive.snapshots.Traffic.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.reqN=t.gw().value:t.dw(i);break;case 2:i==n.bI.OI?this.respFallbackN=t.sR().value:t.dw(i);break;case 3:i==n.bI.NI?this.respFallbackErrN=t.gw().value:t.dw(i);break;case 4:i==n.bI.OI?this.respP2pN=t.sR().value:t.dw(i);break;case 5:i==n.bI.NI?this.reqOtherN=t.gw().value:t.dw(i);break;case 6:i==n.bI.NI?this.respFallbackOtherN=t.gw().value:t.dw(i);break;case 7:i==n.bI.NI?this.respFallbackOthertErrN=t.gw().value:t.dw(i);break;case 8:i==n.bI.NI?this.srcReqN=t.gw().value:t.dw(i);break;case 9:i==n.bI.NI?this.srcRespN=t.gw().value:t.dw(i);break;case 10:i==n.bI.NI?this.srcRespErrN=t.gw().value:t.dw(i);break;case 11:i==n.bI.DI?this.srcReqQt=t.nR().value:t.dw(i);break;case 12:i==n.bI.DI?this.srcRespQt=t.nR().value:t.dw(i);break;case 13:i==n.bI.DI?this.srcOverQt=t.nR().value:t.dw(i);break;case 14:i==n.bI.NI?this.srcOtherReqN=t.gw().value:t.dw(i);break;case 15:i==n.bI.NI?this.srcOtherRespN=t.gw().value:t.dw(i);break;case 16:i==n.bI.NI?this.srcOtherRespErrN=t.gw().value:t.dw(i);break;case 17:i==n.bI.DI?this.srcOtherReqQt=t.nR().value:t.dw(i);break;case 18:i==n.bI.DI?this.srcOtherRespQt=t.nR().value:t.dw(i);break;case 19:i==n.bI.DI?this.srcOtherOverQt=t.nR().value:t.dw(i);break;case 20:i==n.bI.NI?this.p2pSubReqN=t.gw().value:t.dw(i);break;case 21:i==n.bI.NI?this.p2pSubRespN=t.gw().value:t.dw(i);break;case 22:i==n.bI.OI?this.p2pSubRespPartN=t.sR().value:t.dw(i);break;case 23:i==n.bI.OI?this.p2pSubRespErrN=t.sR().value:t.dw(i);break;case 24:i==n.bI.NI?this.p2pSubRespExpN=t.gw().value:t.dw(i);break;case 25:i==n.bI.DI?this.p2pSubReqQt=t.nR().value:t.dw(i);break;case 26:i==n.bI.DI?this.p2pSubRespQt=t.nR().value:t.dw(i);break;case 27:i==n.bI.DI?this.p2pDirectQt=t.nR().value:t.dw(i);break;case 28:i==n.bI.DI?this.p2pRelayQt=t.nR().value:t.dw(i);break;case 29:i==n.bI.DI?this.p2pNatQt=t.nR().value:t.dw(i);break;case 30:i==n.bI.DI?this.p2pUdpbQt=t.nR().value:t.dw(i);break;case 31:i==n.bI.NI?this.fallAgentRespN=t.gw().value:t.dw(i);break;case 32:i==n.bI.NI?this.fallAgentPredHitN=t.gw().value:t.dw(i);break;case 33:i==n.bI.NI?this.fallAgentFailedRespN=t.gw().value:t.dw(i);break;case 34:i==n.bI.NI?this.fallAgentPredMissN=t.gw().value:t.dw(i);break;case 35:i==n.bI.NI?this.fallAgentPredPartialHitN=t.gw().value:t.dw(i);break;case 36:i==n.bI.DI?this.fallAgenTrafficSuccessQt=t.nR().value:t.dw(i);break;case 37:i==n.bI.DI?this.fallAgenTrafficFailureQt=t.nR().value:t.dw(i);break;case 38:i==n.bI.NI?this.p2pAgentPredHitN=t.gw().value:t.dw(i);break;case 39:i==n.bI.NI?this.p2pAgentPredMissN=t.gw().value:t.dw(i);break;case 40:i==n.bI.NI?this.p2pAgentPredPartialHitN=t.gw().value:t.dw(i);break;case 41:i==n.bI.DI?this.p2pAgenTrafficSuccessQt=t.nR().value:t.dw(i);break;case 42:i==n.bI.DI?this.p2pAgenTrafficFailureQt=t.nR().value:t.dw(i);break;case 43:i==n.bI.NI?this.respP2pOtherN=t.gw().value:t.dw(i);break;case 44:i==n.bI.NI?this.lCacheRespN=t.gw().value:t.dw(i);break;case 45:i==n.bI.DI?this.lCacheRespQt=t.nR().value:t.dw(i);break;case 46:i==n.bI.DI?this.p2pOutSiteLowPrio=t.nR().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.Traffic.prototype.write=function(t){t.mw("Traffic"),null!==this.reqN&&void 0!==this.reqN&&(t.Ew("reqN",n.bI.NI,1),t.ww(this.reqN),t.Iw()),null!==this.respFallbackN&&void 0!==this.respFallbackN&&(t.Ew("respFallbackN",n.bI.OI,2),t.LS(this.respFallbackN),t.Iw()),null!==this.respFallbackErrN&&void 0!==this.respFallbackErrN&&(t.Ew("respFallbackErrN",n.bI.NI,3),t.ww(this.respFallbackErrN),t.Iw()),null!==this.respP2pN&&void 0!==this.respP2pN&&(t.Ew("respP2pN",n.bI.OI,4),t.LS(this.respP2pN),t.Iw()),null!==this.reqOtherN&&void 0!==this.reqOtherN&&(t.Ew("reqOtherN",n.bI.NI,5),t.ww(this.reqOtherN),t.Iw()),null!==this.respFallbackOtherN&&void 0!==this.respFallbackOtherN&&(t.Ew("respFallbackOtherN",n.bI.NI,6),t.ww(this.respFallbackOtherN),t.Iw()),null!==this.respFallbackOthertErrN&&void 0!==this.respFallbackOthertErrN&&(t.Ew("respFallbackOthertErrN",n.bI.NI,7),t.ww(this.respFallbackOthertErrN),t.Iw()),null!==this.srcReqN&&void 0!==this.srcReqN&&(t.Ew("srcReqN",n.bI.NI,8),t.ww(this.srcReqN),t.Iw()),null!==this.srcRespN&&void 0!==this.srcRespN&&(t.Ew("srcRespN",n.bI.NI,9),t.ww(this.srcRespN),t.Iw()),null!==this.srcRespErrN&&void 0!==this.srcRespErrN&&(t.Ew("srcRespErrN",n.bI.NI,10),t.ww(this.srcRespErrN),t.Iw()),null!==this.srcReqQt&&void 0!==this.srcReqQt&&(t.Ew("srcReqQt",n.bI.DI,11),t.FS(this.srcReqQt),t.Iw()),null!==this.srcRespQt&&void 0!==this.srcRespQt&&(t.Ew("srcRespQt",n.bI.DI,12),t.FS(this.srcRespQt),t.Iw()),null!==this.srcOverQt&&void 0!==this.srcOverQt&&(t.Ew("srcOverQt",n.bI.DI,13),t.FS(this.srcOverQt),t.Iw()),null!==this.srcOtherReqN&&void 0!==this.srcOtherReqN&&(t.Ew("srcOtherReqN",n.bI.NI,14),t.ww(this.srcOtherReqN),t.Iw()),null!==this.srcOtherRespN&&void 0!==this.srcOtherRespN&&(t.Ew("srcOtherRespN",n.bI.NI,15),t.ww(this.srcOtherRespN),t.Iw()),null!==this.srcOtherRespErrN&&void 0!==this.srcOtherRespErrN&&(t.Ew("srcOtherRespErrN",n.bI.NI,16),t.ww(this.srcOtherRespErrN),t.Iw()),null!==this.srcOtherReqQt&&void 0!==this.srcOtherReqQt&&(t.Ew("srcOtherReqQt",n.bI.DI,17),t.FS(this.srcOtherReqQt),t.Iw()),null!==this.srcOtherRespQt&&void 0!==this.srcOtherRespQt&&(t.Ew("srcOtherRespQt",n.bI.DI,18),t.FS(this.srcOtherRespQt),t.Iw()),null!==this.srcOtherOverQt&&void 0!==this.srcOtherOverQt&&(t.Ew("srcOtherOverQt",n.bI.DI,19),t.FS(this.srcOtherOverQt),t.Iw()),null!==this.p2pSubReqN&&void 0!==this.p2pSubReqN&&(t.Ew("p2pSubReqN",n.bI.NI,20),t.ww(this.p2pSubReqN),t.Iw()),null!==this.p2pSubRespN&&void 0!==this.p2pSubRespN&&(t.Ew("p2pSubRespN",n.bI.NI,21),t.ww(this.p2pSubRespN),t.Iw()),null!==this.p2pSubRespPartN&&void 0!==this.p2pSubRespPartN&&(t.Ew("p2pSubRespPartN",n.bI.OI,22),t.LS(this.p2pSubRespPartN),t.Iw()),null!==this.p2pSubRespErrN&&void 0!==this.p2pSubRespErrN&&(t.Ew("p2pSubRespErrN",n.bI.OI,23),t.LS(this.p2pSubRespErrN),t.Iw()),null!==this.p2pSubRespExpN&&void 0!==this.p2pSubRespExpN&&(t.Ew("p2pSubRespExpN",n.bI.NI,24),t.ww(this.p2pSubRespExpN),t.Iw()),null!==this.p2pSubReqQt&&void 0!==this.p2pSubReqQt&&(t.Ew("p2pSubReqQt",n.bI.DI,25),t.FS(this.p2pSubReqQt),t.Iw()),null!==this.p2pSubRespQt&&void 0!==this.p2pSubRespQt&&(t.Ew("p2pSubRespQt",n.bI.DI,26),t.FS(this.p2pSubRespQt),t.Iw()),null!==this.p2pDirectQt&&void 0!==this.p2pDirectQt&&(t.Ew("p2pDirectQt",n.bI.DI,27),t.FS(this.p2pDirectQt),t.Iw()),null!==this.p2pRelayQt&&void 0!==this.p2pRelayQt&&(t.Ew("p2pRelayQt",n.bI.DI,28),t.FS(this.p2pRelayQt),t.Iw()),null!==this.p2pNatQt&&void 0!==this.p2pNatQt&&(t.Ew("p2pNatQt",n.bI.DI,29),t.FS(this.p2pNatQt),t.Iw()),null!==this.p2pUdpbQt&&void 0!==this.p2pUdpbQt&&(t.Ew("p2pUdpbQt",n.bI.DI,30),t.FS(this.p2pUdpbQt),t.Iw()),null!==this.fallAgentRespN&&void 0!==this.fallAgentRespN&&(t.Ew("fallAgentRespN",n.bI.NI,31),t.ww(this.fallAgentRespN),t.Iw()),null!==this.fallAgentPredHitN&&void 0!==this.fallAgentPredHitN&&(t.Ew("fallAgentPredHitN",n.bI.NI,32),t.ww(this.fallAgentPredHitN),t.Iw()),null!==this.fallAgentFailedRespN&&void 0!==this.fallAgentFailedRespN&&(t.Ew("fallAgentFailedRespN",n.bI.NI,33),t.ww(this.fallAgentFailedRespN),t.Iw()),null!==this.fallAgentPredMissN&&void 0!==this.fallAgentPredMissN&&(t.Ew("fallAgentPredMissN",n.bI.NI,34),t.ww(this.fallAgentPredMissN),t.Iw()),null!==this.fallAgentPredPartialHitN&&void 0!==this.fallAgentPredPartialHitN&&(t.Ew("fallAgentPredPartialHitN",n.bI.NI,35),t.ww(this.fallAgentPredPartialHitN),t.Iw()),null!==this.fallAgenTrafficSuccessQt&&void 0!==this.fallAgenTrafficSuccessQt&&(t.Ew("fallAgenTrafficSuccessQt",n.bI.DI,36),t.FS(this.fallAgenTrafficSuccessQt),t.Iw()),null!==this.fallAgenTrafficFailureQt&&void 0!==this.fallAgenTrafficFailureQt&&(t.Ew("fallAgenTrafficFailureQt",n.bI.DI,37),t.FS(this.fallAgenTrafficFailureQt),t.Iw()),null!==this.p2pAgentPredHitN&&void 0!==this.p2pAgentPredHitN&&(t.Ew("p2pAgentPredHitN",n.bI.NI,38),t.ww(this.p2pAgentPredHitN),t.Iw()),null!==this.p2pAgentPredMissN&&void 0!==this.p2pAgentPredMissN&&(t.Ew("p2pAgentPredMissN",n.bI.NI,39),t.ww(this.p2pAgentPredMissN),t.Iw()),null!==this.p2pAgentPredPartialHitN&&void 0!==this.p2pAgentPredPartialHitN&&(t.Ew("p2pAgentPredPartialHitN",n.bI.NI,40),t.ww(this.p2pAgentPredPartialHitN),t.Iw()),null!==this.p2pAgenTrafficSuccessQt&&void 0!==this.p2pAgenTrafficSuccessQt&&(t.Ew("p2pAgenTrafficSuccessQt",n.bI.DI,41),t.FS(this.p2pAgenTrafficSuccessQt),t.Iw()),null!==this.p2pAgenTrafficFailureQt&&void 0!==this.p2pAgenTrafficFailureQt&&(t.Ew("p2pAgenTrafficFailureQt",n.bI.DI,42),t.FS(this.p2pAgenTrafficFailureQt),t.Iw()),null!==this.respP2pOtherN&&void 0!==this.respP2pOtherN&&(t.Ew("respP2pOtherN",n.bI.NI,43),t.ww(this.respP2pOtherN),t.Iw()),null!==this.lCacheRespN&&void 0!==this.lCacheRespN&&(t.Ew("lCacheRespN",n.bI.NI,44),t.ww(this.lCacheRespN),t.Iw()),null!==this.lCacheRespQt&&void 0!==this.lCacheRespQt&&(t.Ew("lCacheRespQt",n.bI.DI,45),t.FS(this.lCacheRespQt),t.Iw()),null!==this.p2pOutSiteLowPrio&&void 0!==this.p2pOutSiteLowPrio&&(t.Ew("p2pOutSiteLowPrio",n.bI.DI,46),t.FS(this.p2pOutSiteLowPrio),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.Metrics=function(t){this.upBW=null,this.downBW=null,this.memN=null,this.prtInN=null,this.prtOutN=null,this.initVideoBufQt=null,this.videoAvgBufQt=null,this.videoBufQt=null,this.videoBufN=null,this.initAudioBufQt=null,this.audioAvgBufQt=null,this.audioBufQt=null,this.audioBufN=null,this.bitrateUpN=null,this.bitrateDwnN=null,this.delay=null,this.delayEnforcement=null,this.lookupReqEstablished=null,this.lookupReqAccept=null,this.fallbackAvgTp=null,this.srcThroughput=null,this.diskReadTimeout=null,this.diskReadRate=null,this.diskStoreRate=null,this.diskRemoveRate=null,this.diskCacheSize=null,this.clientBufferMs=null,this.lookupTotal=null,this.lookupNotFound=null,this.lookupFailed=null,this.lookupLatency=null,this.trackerFailed=null,this.trackerLatency=null,this.snapshotFailed=null,this.snapshotLatency=null,t&&(void 0!==t.upBW&&(this.upBW=t.upBW),void 0!==t.downBW&&(this.downBW=t.downBW),void 0!==t.memN&&(this.memN=t.memN),void 0!==t.prtInN&&(this.prtInN=t.prtInN),void 0!==t.prtOutN&&(this.prtOutN=t.prtOutN),void 0!==t.initVideoBufQt&&(this.initVideoBufQt=t.initVideoBufQt),void 0!==t.videoAvgBufQt&&(this.videoAvgBufQt=t.videoAvgBufQt),void 0!==t.videoBufQt&&(this.videoBufQt=t.videoBufQt),void 0!==t.videoBufN&&(this.videoBufN=t.videoBufN),void 0!==t.initAudioBufQt&&(this.initAudioBufQt=t.initAudioBufQt),void 0!==t.audioAvgBufQt&&(this.audioAvgBufQt=t.audioAvgBufQt),void 0!==t.audioBufQt&&(this.audioBufQt=t.audioBufQt),void 0!==t.audioBufN&&(this.audioBufN=t.audioBufN),void 0!==t.bitrateUpN&&(this.bitrateUpN=t.bitrateUpN),void 0!==t.bitrateDwnN&&(this.bitrateDwnN=t.bitrateDwnN),void 0!==t.delay&&(this.delay=t.delay),void 0!==t.delayEnforcement&&(this.delayEnforcement=t.delayEnforcement),void 0!==t.lookupReqEstablished&&(this.lookupReqEstablished=t.lookupReqEstablished),void 0!==t.lookupReqAccept&&(this.lookupReqAccept=t.lookupReqAccept),void 0!==t.fallbackAvgTp&&(this.fallbackAvgTp=t.fallbackAvgTp),void 0!==t.srcThroughput&&(this.srcThroughput=t.srcThroughput),void 0!==t.diskReadTimeout&&(this.diskReadTimeout=t.diskReadTimeout),void 0!==t.diskReadRate&&(this.diskReadRate=t.diskReadRate),void 0!==t.diskStoreRate&&(this.diskStoreRate=t.diskStoreRate),void 0!==t.diskRemoveRate&&(this.diskRemoveRate=t.diskRemoveRate),void 0!==t.diskCacheSize&&(this.diskCacheSize=t.diskCacheSize),void 0!==t.clientBufferMs&&(this.clientBufferMs=t.clientBufferMs),void 0!==t.lookupTotal&&(this.lookupTotal=t.lookupTotal),void 0!==t.lookupNotFound&&(this.lookupNotFound=t.lookupNotFound),void 0!==t.lookupFailed&&(this.lookupFailed=t.lookupFailed),void 0!==t.lookupLatency&&(this.lookupLatency=t.lookupLatency),void 0!==t.trackerFailed&&(this.trackerFailed=t.trackerFailed),void 0!==t.trackerLatency&&(this.trackerLatency=t.trackerLatency),void 0!==t.snapshotFailed&&(this.snapshotFailed=t.snapshotFailed),void 0!==t.snapshotLatency&&(this.snapshotLatency=t.snapshotLatency))},hive.snapshots.Metrics.prototype={},hive.snapshots.Metrics.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.upBW=t.gw().value:t.dw(i);break;case 2:i==n.bI.NI?this.downBW=t.gw().value:t.dw(i);break;case 3:i==n.bI.NI?this.memN=t.gw().value:t.dw(i);break;case 4:i==n.bI.NI?this.prtInN=t.gw().value:t.dw(i);break;case 5:i==n.bI.NI?this.prtOutN=t.gw().value:t.dw(i);break;case 6:i==n.bI.DI?this.initVideoBufQt=t.nR().value:t.dw(i);break;case 7:i==n.bI.OI?this.videoAvgBufQt=t.sR().value:t.dw(i);break;case 8:i==n.bI.DI?this.videoBufQt=t.nR().value:t.dw(i);break;case 9:i==n.bI.NI?this.videoBufN=t.gw().value:t.dw(i);break;case 10:i==n.bI.NI?this.initAudioBufQt=t.gw().value:t.dw(i);break;case 11:i==n.bI.OI?this.audioAvgBufQt=t.sR().value:t.dw(i);break;case 12:i==n.bI.DI?this.audioBufQt=t.nR().value:t.dw(i);break;case 13:i==n.bI.NI?this.audioBufN=t.gw().value:t.dw(i);break;case 14:i==n.bI.NI?this.bitrateUpN=t.gw().value:t.dw(i);break;case 15:i==n.bI.NI?this.bitrateDwnN=t.gw().value:t.dw(i);break;case 16:i==n.bI.NI?this.delay=t.gw().value:t.dw(i);break;case 17:i==n.bI.NI?this.delayEnforcement=t.gw().value:t.dw(i);break;case 18:i==n.bI.NI?this.lookupReqEstablished=t.gw().value:t.dw(i);break;case 19:i==n.bI.NI?this.lookupReqAccept=t.gw().value:t.dw(i);break;case 20:i==n.bI.OI?this.fallbackAvgTp=t.sR().value:t.dw(i);break;case 21:i==n.bI.OI?this.srcThroughput=t.sR().value:t.dw(i);break;case 22:i==n.bI.NI?this.diskReadTimeout=t.gw().value:t.dw(i);break;case 23:i==n.bI.OI?this.diskReadRate=t.sR().value:t.dw(i);break;case 24:i==n.bI.OI?this.diskStoreRate=t.sR().value:t.dw(i);break;case 25:i==n.bI.OI?this.diskRemoveRate=t.sR().value:t.dw(i);break;case 26:i==n.bI.DI?this.diskCacheSize=t.nR().value:t.dw(i);break;case 27:i==n.bI.NI?this.clientBufferMs=t.gw().value:t.dw(i);break;case 28:i==n.bI.NI?this.lookupTotal=t.gw().value:t.dw(i);break;case 29:i==n.bI.NI?this.lookupNotFound=t.gw().value:t.dw(i);break;case 30:i==n.bI.NI?this.lookupFailed=t.gw().value:t.dw(i);break;case 31:i==n.bI.NI?this.lookupLatency=t.gw().value:t.dw(i);break;case 32:i==n.bI.NI?this.trackerFailed=t.gw().value:t.dw(i);break;case 33:i==n.bI.NI?this.trackerLatency=t.gw().value:t.dw(i);break;case 34:i==n.bI.NI?this.snapshotFailed=t.gw().value:t.dw(i);break;case 35:i==n.bI.NI?this.snapshotLatency=t.gw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.Metrics.prototype.write=function(t){t.mw("Metrics"),null!==this.upBW&&void 0!==this.upBW&&(t.Ew("upBW",n.bI.NI,1),t.ww(this.upBW),t.Iw()),null!==this.downBW&&void 0!==this.downBW&&(t.Ew("downBW",n.bI.NI,2),t.ww(this.downBW),t.Iw()),null!==this.memN&&void 0!==this.memN&&(t.Ew("memN",n.bI.NI,3),t.ww(this.memN),t.Iw()),null!==this.prtInN&&void 0!==this.prtInN&&(t.Ew("prtInN",n.bI.NI,4),t.ww(this.prtInN),t.Iw()),null!==this.prtOutN&&void 0!==this.prtOutN&&(t.Ew("prtOutN",n.bI.NI,5),t.ww(this.prtOutN),t.Iw()),null!==this.initVideoBufQt&&void 0!==this.initVideoBufQt&&(t.Ew("initVideoBufQt",n.bI.DI,6),t.FS(this.initVideoBufQt),t.Iw()),null!==this.videoAvgBufQt&&void 0!==this.videoAvgBufQt&&(t.Ew("videoAvgBufQt",n.bI.OI,7),t.LS(this.videoAvgBufQt),t.Iw()),null!==this.videoBufQt&&void 0!==this.videoBufQt&&(t.Ew("videoBufQt",n.bI.DI,8),t.FS(this.videoBufQt),t.Iw()),null!==this.videoBufN&&void 0!==this.videoBufN&&(t.Ew("videoBufN",n.bI.NI,9),t.ww(this.videoBufN),t.Iw()),null!==this.initAudioBufQt&&void 0!==this.initAudioBufQt&&(t.Ew("initAudioBufQt",n.bI.NI,10),t.ww(this.initAudioBufQt),t.Iw()),null!==this.audioAvgBufQt&&void 0!==this.audioAvgBufQt&&(t.Ew("audioAvgBufQt",n.bI.OI,11),t.LS(this.audioAvgBufQt),t.Iw()),null!==this.audioBufQt&&void 0!==this.audioBufQt&&(t.Ew("audioBufQt",n.bI.DI,12),t.FS(this.audioBufQt),t.Iw()),null!==this.audioBufN&&void 0!==this.audioBufN&&(t.Ew("audioBufN",n.bI.NI,13),t.ww(this.audioBufN),t.Iw()),null!==this.bitrateUpN&&void 0!==this.bitrateUpN&&(t.Ew("bitrateUpN",n.bI.NI,14),t.ww(this.bitrateUpN),t.Iw()),null!==this.bitrateDwnN&&void 0!==this.bitrateDwnN&&(t.Ew("bitrateDwnN",n.bI.NI,15),t.ww(this.bitrateDwnN),t.Iw()),null!==this.delay&&void 0!==this.delay&&(t.Ew("delay",n.bI.NI,16),t.ww(this.delay),t.Iw()),null!==this.delayEnforcement&&void 0!==this.delayEnforcement&&(t.Ew("delayEnforcement",n.bI.NI,17),t.ww(this.delayEnforcement),t.Iw()),null!==this.lookupReqEstablished&&void 0!==this.lookupReqEstablished&&(t.Ew("lookupReqEstablished",n.bI.NI,18),t.ww(this.lookupReqEstablished),t.Iw()),null!==this.lookupReqAccept&&void 0!==this.lookupReqAccept&&(t.Ew("lookupReqAccept",n.bI.NI,19),t.ww(this.lookupReqAccept),t.Iw()),null!==this.fallbackAvgTp&&void 0!==this.fallbackAvgTp&&(t.Ew("fallbackAvgTp",n.bI.OI,20),t.LS(this.fallbackAvgTp),t.Iw()),null!==this.srcThroughput&&void 0!==this.srcThroughput&&(t.Ew("srcThroughput",n.bI.OI,21),t.LS(this.srcThroughput),t.Iw()),null!==this.diskReadTimeout&&void 0!==this.diskReadTimeout&&(t.Ew("diskReadTimeout",n.bI.NI,22),t.ww(this.diskReadTimeout),t.Iw()),null!==this.diskReadRate&&void 0!==this.diskReadRate&&(t.Ew("diskReadRate",n.bI.OI,23),t.LS(this.diskReadRate),t.Iw()),null!==this.diskStoreRate&&void 0!==this.diskStoreRate&&(t.Ew("diskStoreRate",n.bI.OI,24),t.LS(this.diskStoreRate),t.Iw()),null!==this.diskRemoveRate&&void 0!==this.diskRemoveRate&&(t.Ew("diskRemoveRate",n.bI.OI,25),t.LS(this.diskRemoveRate),t.Iw()),null!==this.diskCacheSize&&void 0!==this.diskCacheSize&&(t.Ew("diskCacheSize",n.bI.DI,26),t.FS(this.diskCacheSize),t.Iw()),null!==this.clientBufferMs&&void 0!==this.clientBufferMs&&(t.Ew("clientBufferMs",n.bI.NI,27),t.ww(this.clientBufferMs),t.Iw()),null!==this.lookupTotal&&void 0!==this.lookupTotal&&(t.Ew("lookupTotal",n.bI.NI,28),t.ww(this.lookupTotal),t.Iw()),null!==this.lookupNotFound&&void 0!==this.lookupNotFound&&(t.Ew("lookupNotFound",n.bI.NI,29),t.ww(this.lookupNotFound),t.Iw()),null!==this.lookupFailed&&void 0!==this.lookupFailed&&(t.Ew("lookupFailed",n.bI.NI,30),t.ww(this.lookupFailed),t.Iw()),null!==this.lookupLatency&&void 0!==this.lookupLatency&&(t.Ew("lookupLatency",n.bI.NI,31),t.ww(this.lookupLatency),t.Iw()),null!==this.trackerFailed&&void 0!==this.trackerFailed&&(t.Ew("trackerFailed",n.bI.NI,32),t.ww(this.trackerFailed),t.Iw()),null!==this.trackerLatency&&void 0!==this.trackerLatency&&(t.Ew("trackerLatency",n.bI.NI,33),t.ww(this.trackerLatency),t.Iw()),null!==this.snapshotFailed&&void 0!==this.snapshotFailed&&(t.Ew("snapshotFailed",n.bI.NI,34),t.ww(this.snapshotFailed),t.Iw()),null!==this.snapshotLatency&&void 0!==this.snapshotLatency&&(t.Ew("snapshotLatency",n.bI.NI,35),t.ww(this.snapshotLatency),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.PartnerTraffic=function(t){this.p2pSuccReq=null,this.p2pFailReq=null,this.p2pPartReq=null,this.p2pSuccReceived=null,this.p2pSuccReceivedLow=null,this.p2pFailReceived=null,this.p2pSuccResp=null,this.p2pFailResp=null,this.p2pPartResp=null,this.p2pSuccSent=null,this.p2pSuccSentLow=null,this.p2pFailSent=null,t&&(void 0!==t.p2pSuccReq&&(this.p2pSuccReq=t.p2pSuccReq),void 0!==t.p2pFailReq&&(this.p2pFailReq=t.p2pFailReq),void 0!==t.p2pPartReq&&(this.p2pPartReq=t.p2pPartReq),void 0!==t.p2pSuccReceived&&(this.p2pSuccReceived=t.p2pSuccReceived),void 0!==t.p2pSuccReceivedLow&&(this.p2pSuccReceivedLow=t.p2pSuccReceivedLow),void 0!==t.p2pFailReceived&&(this.p2pFailReceived=t.p2pFailReceived),void 0!==t.p2pSuccResp&&(this.p2pSuccResp=t.p2pSuccResp),void 0!==t.p2pFailResp&&(this.p2pFailResp=t.p2pFailResp),void 0!==t.p2pPartResp&&(this.p2pPartResp=t.p2pPartResp),void 0!==t.p2pSuccSent&&(this.p2pSuccSent=t.p2pSuccSent),void 0!==t.p2pSuccSentLow&&(this.p2pSuccSentLow=t.p2pSuccSentLow),void 0!==t.p2pFailSent&&(this.p2pFailSent=t.p2pFailSent))},hive.snapshots.PartnerTraffic.prototype={},hive.snapshots.PartnerTraffic.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.DI?this.p2pSuccReq=t.nR().value:t.dw(i);break;case 2:i==n.bI.DI?this.p2pFailReq=t.nR().value:t.dw(i);break;case 3:i==n.bI.DI?this.p2pPartReq=t.nR().value:t.dw(i);break;case 4:i==n.bI.DI?this.p2pSuccReceived=t.nR().value:t.dw(i);break;case 5:i==n.bI.DI?this.p2pSuccReceivedLow=t.nR().value:t.dw(i);break;case 10:i==n.bI.DI?this.p2pFailReceived=t.nR().value:t.dw(i);break;case 6:i==n.bI.DI?this.p2pSuccResp=t.nR().value:t.dw(i);break;case 11:i==n.bI.DI?this.p2pFailResp=t.nR().value:t.dw(i);break;case 7:i==n.bI.DI?this.p2pPartResp=t.nR().value:t.dw(i);break;case 8:i==n.bI.DI?this.p2pSuccSent=t.nR().value:t.dw(i);break;case 9:i==n.bI.DI?this.p2pSuccSentLow=t.nR().value:t.dw(i);break;case 12:i==n.bI.DI?this.p2pFailSent=t.nR().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.PartnerTraffic.prototype.write=function(t){t.mw("PartnerTraffic"),null!==this.p2pSuccReq&&void 0!==this.p2pSuccReq&&(t.Ew("p2pSuccReq",n.bI.DI,1),t.FS(this.p2pSuccReq),t.Iw()),null!==this.p2pFailReq&&void 0!==this.p2pFailReq&&(t.Ew("p2pFailReq",n.bI.DI,2),t.FS(this.p2pFailReq),t.Iw()),null!==this.p2pPartReq&&void 0!==this.p2pPartReq&&(t.Ew("p2pPartReq",n.bI.DI,3),t.FS(this.p2pPartReq),t.Iw()),null!==this.p2pSuccReceived&&void 0!==this.p2pSuccReceived&&(t.Ew("p2pSuccReceived",n.bI.DI,4),t.FS(this.p2pSuccReceived),t.Iw()),null!==this.p2pSuccReceivedLow&&void 0!==this.p2pSuccReceivedLow&&(t.Ew("p2pSuccReceivedLow",n.bI.DI,5),t.FS(this.p2pSuccReceivedLow),t.Iw()),null!==this.p2pFailReceived&&void 0!==this.p2pFailReceived&&(t.Ew("p2pFailReceived",n.bI.DI,10),t.FS(this.p2pFailReceived),t.Iw()),null!==this.p2pSuccResp&&void 0!==this.p2pSuccResp&&(t.Ew("p2pSuccResp",n.bI.DI,6),t.FS(this.p2pSuccResp),t.Iw()),null!==this.p2pFailResp&&void 0!==this.p2pFailResp&&(t.Ew("p2pFailResp",n.bI.DI,11),t.FS(this.p2pFailResp),t.Iw()),null!==this.p2pPartResp&&void 0!==this.p2pPartResp&&(t.Ew("p2pPartResp",n.bI.DI,7),t.FS(this.p2pPartResp),t.Iw()),null!==this.p2pSuccSent&&void 0!==this.p2pSuccSent&&(t.Ew("p2pSuccSent",n.bI.DI,8),t.FS(this.p2pSuccSent),t.Iw()),null!==this.p2pSuccSentLow&&void 0!==this.p2pSuccSentLow&&(t.Ew("p2pSuccSentLow",n.bI.DI,9),t.FS(this.p2pSuccSentLow),t.Iw()),null!==this.p2pFailSent&&void 0!==this.p2pFailSent&&(t.Ew("p2pFailSent",n.bI.DI,12),t.FS(this.p2pFailSent),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.PartnerMetrics=function(t){this.rateReceived=null,this.rateSent=null,this.handshakeDelay=null,t&&(void 0!==t.rateReceived&&(this.rateReceived=t.rateReceived),void 0!==t.rateSent&&(this.rateSent=t.rateSent),void 0!==t.handshakeDelay&&(this.handshakeDelay=t.handshakeDelay))},hive.snapshots.PartnerMetrics.prototype={},hive.snapshots.PartnerMetrics.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.OI?this.rateReceived=t.sR().value:t.dw(i);break;case 2:i==n.bI.OI?this.rateSent=t.sR().value:t.dw(i);break;case 3:i==n.bI.DI?this.handshakeDelay=t.nR().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.PartnerMetrics.prototype.write=function(t){t.mw("PartnerMetrics"),null!==this.rateReceived&&void 0!==this.rateReceived&&(t.Ew("rateReceived",n.bI.OI,1),t.LS(this.rateReceived),t.Iw()),null!==this.rateSent&&void 0!==this.rateSent&&(t.Ew("rateSent",n.bI.OI,2),t.LS(this.rateSent),t.Iw()),null!==this.handshakeDelay&&void 0!==this.handshakeDelay&&(t.Ew("handshakeDelay",n.bI.DI,3),t.FS(this.handshakeDelay),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.ConnectivityInfo=function(t){this.upBW=null,this.downBW=null,this.externalAs=null,this.internalAs=null,this.publicIp=null,this.privateIp=null,t&&(void 0!==t.upBW&&(this.upBW=t.upBW),void 0!==t.downBW&&(this.downBW=t.downBW),void 0!==t.externalAs&&(this.externalAs=t.externalAs),void 0!==t.internalAs&&(this.internalAs=t.internalAs),void 0!==t.publicIp&&(this.publicIp=t.publicIp),void 0!==t.privateIp&&(this.privateIp=t.privateIp))},hive.snapshots.ConnectivityInfo.prototype={},hive.snapshots.ConnectivityInfo.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.upBW=t.gw().value:t.dw(i);break;case 2:i==n.bI.NI?this.downBW=t.gw().value:t.dw(i);break;case 3:i==n.bI.NI?this.externalAs=t.gw().value:t.dw(i);break;case 4:i==n.bI.NI?this.internalAs=t.gw().value:t.dw(i);break;case 5:i==n.bI.FI?this.publicIp=t.fw().value:t.dw(i);break;case 6:i==n.bI.FI?this.privateIp=t.fw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.ConnectivityInfo.prototype.write=function(t){t.mw("ConnectivityInfo"),null!==this.upBW&&void 0!==this.upBW&&(t.Ew("upBW",n.bI.NI,1),t.ww(this.upBW),t.Iw()),null!==this.downBW&&void 0!==this.downBW&&(t.Ew("downBW",n.bI.NI,2),t.ww(this.downBW),t.Iw()),null!==this.externalAs&&void 0!==this.externalAs&&(t.Ew("externalAs",n.bI.NI,3),t.ww(this.externalAs),t.Iw()),null!==this.internalAs&&void 0!==this.internalAs&&(t.Ew("internalAs",n.bI.NI,4),t.ww(this.internalAs),t.Iw()),null!==this.publicIp&&void 0!==this.publicIp&&(t.Ew("publicIp",n.bI.FI,5),t.Tw(this.publicIp),t.Iw()),null!==this.privateIp&&void 0!==this.privateIp&&(t.Ew("privateIp",n.bI.FI,6),t.Tw(this.privateIp),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.Partner=function(t){this.connInfo=null,this.traffic=null,this.metrics=null,this.inPart=null,this.outPart=null,this.udp=null,t&&(void 0!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.traffic&&(this.traffic=t.traffic),void 0!==t.metrics&&(this.metrics=t.metrics),void 0!==t.inPart&&(this.inPart=t.inPart),void 0!==t.outPart&&(this.outPart=t.outPart),void 0!==t.udp&&(this.udp=t.udp))},hive.snapshots.Partner.prototype={},hive.snapshots.Partner.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.MI?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.dw(i);break;case 2:i==n.bI.MI?(this.traffic=new hive.snapshots.PartnerTraffic,this.traffic.read(t)):t.dw(i);break;case 3:i==n.bI.MI?(this.metrics=new hive.snapshots.PartnerMetrics,this.metrics.read(t)):t.dw(i);break;case 4:i==n.bI.BOOL?this.inPart=t.tR().value:t.dw(i);break;case 5:i==n.bI.BOOL?this.outPart=t.tR().value:t.dw(i);break;case 6:i==n.bI.BOOL?this.udp=t.tR().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.Partner.prototype.write=function(t){t.mw("Partner"),null!==this.connInfo&&void 0!==this.connInfo&&(t.Ew("connInfo",n.bI.MI,1),this.connInfo.write(t),t.Iw()),null!==this.traffic&&void 0!==this.traffic&&(t.Ew("traffic",n.bI.MI,2),this.traffic.write(t),t.Iw()),null!==this.metrics&&void 0!==this.metrics&&(t.Ew("metrics",n.bI.MI,3),this.metrics.write(t),t.Iw()),null!==this.inPart&&void 0!==this.inPart&&(t.Ew("inPart",n.bI.BOOL,4),t._S(this.inPart),t.Iw()),null!==this.outPart&&void 0!==this.outPart&&(t.Ew("outPart",n.bI.BOOL,5),t._S(this.outPart),t.Iw()),null!==this.udp&&void 0!==this.udp&&(t.Ew("udp",n.bI.BOOL,6),t._S(this.udp),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.StreamInfo=function(t){this.url=null,this.streamType=null,this.streamProtocol=null,t&&(void 0!==t.url&&(this.url=t.url),void 0!==t.streamType&&(this.streamType=t.streamType),void 0!==t.streamProtocol&&(this.streamProtocol=t.streamProtocol))},hive.snapshots.StreamInfo.prototype={},hive.snapshots.StreamInfo.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.FI?this.url=t.fw().value:t.dw(i);break;case 2:i==n.bI.NI?this.streamType=t.gw().value:t.dw(i);break;case 3:i==n.bI.NI?this.streamProtocol=t.gw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.StreamInfo.prototype.write=function(t){t.mw("StreamInfo"),null!==this.url&&void 0!==this.url&&(t.Ew("url",n.bI.FI,1),t.Tw(this.url),t.Iw()),null!==this.streamType&&void 0!==this.streamType&&(t.Ew("streamType",n.bI.NI,2),t.ww(this.streamType),t.Iw()),null!==this.streamProtocol&&void 0!==this.streamProtocol&&(t.Ew("streamProtocol",n.bI.NI,3),t.ww(this.streamProtocol),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.ClientInfo=function(t){this.clientType=null,this.majorVersion=null,this.minorVersion=null,this.patchVersion=null,t&&(void 0!==t.clientType&&(this.clientType=t.clientType),void 0!==t.majorVersion&&(this.majorVersion=t.majorVersion),void 0!==t.minorVersion&&(this.minorVersion=t.minorVersion),void 0!==t.patchVersion&&(this.patchVersion=t.patchVersion))},hive.snapshots.ClientInfo.prototype={},hive.snapshots.ClientInfo.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.clientType=t.gw().value:t.dw(i);break;case 2:i==n.bI.BYTE?this.majorVersion=t.rR().value:t.dw(i);break;case 3:i==n.bI.BYTE?this.minorVersion=t.rR().value:t.dw(i);break;case 4:i==n.bI._I?this.patchVersion=t.iR().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.ClientInfo.prototype.write=function(t){t.mw("ClientInfo"),null!==this.clientType&&void 0!==this.clientType&&(t.Ew("clientType",n.bI.NI,1),t.ww(this.clientType),t.Iw()),null!==this.majorVersion&&void 0!==this.majorVersion&&(t.Ew("majorVersion",n.bI.BYTE,2),t.NS(this.majorVersion),t.Iw()),null!==this.minorVersion&&void 0!==this.minorVersion&&(t.Ew("minorVersion",n.bI.BYTE,3),t.NS(this.minorVersion),t.Iw()),null!==this.patchVersion&&void 0!==this.patchVersion&&(t.Ew("patchVersion",n.bI._I,4),t.DS(this.patchVersion),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.AgentInfo=function(t){this.firstTierBitrates=null,this.secondTierBitrates=null,t&&(void 0!==t.firstTierBitrates&&(this.firstTierBitrates=t.firstTierBitrates),void 0!==t.secondTierBitrates&&(this.secondTierBitrates=t.secondTierBitrates))},hive.snapshots.AgentInfo.prototype={},hive.snapshots.AgentInfo.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:if(i==n.bI.UI){var o,s=0;this.firstTierBitrates=[],o=t.$S(),o.XS,s=o.size;for(var a=0;a<s;++a){var h=null;h=t.gw().value,this.firstTierBitrates.push(h)}t.eR()}else t.dw(i);break;case 2:if(i==n.bI.UI){var u,c=0;this.secondTierBitrates=[],u=t.$S(),u.XS,c=u.size;for(var f=0;f<c;++f){var l=null;l=t.gw().value,this.secondTierBitrates.push(l)}t.eR()}else t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.AgentInfo.prototype.write=function(t){if(t.mw("AgentInfo"),null!==this.firstTierBitrates&&void 0!==this.firstTierBitrates){t.Ew("firstTierBitrates",n.bI.UI,1),t.kS(n.bI.NI,this.firstTierBitrates.length);for(var e in this.firstTierBitrates)this.firstTierBitrates.hasOwnProperty(e)&&(e=this.firstTierBitrates[e],t.ww(e));t.OS(),t.Iw()}if(null!==this.secondTierBitrates&&void 0!==this.secondTierBitrates){t.Ew("secondTierBitrates",n.bI.UI,2),t.kS(n.bI.NI,this.secondTierBitrates.length);for(var i in this.secondTierBitrates)this.secondTierBitrates.hasOwnProperty(i)&&(i=this.secondTierBitrates[i],t.ww(i));t.OS(),t.Iw()}t.Sw(),t.Rw()},hive.snapshots.TrafficKey=function(t){this.bitrate=null,this.AS=null,this.partnerGuid=null,t&&(void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.AS&&(this.AS=t.AS),void 0!==t.partnerGuid&&(this.partnerGuid=t.partnerGuid))},hive.snapshots.TrafficKey.prototype={},hive.snapshots.TrafficKey.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.bitrate=t.gw().value:t.dw(i);break;case 2:i==n.bI.NI?this.AS=t.gw().value:t.dw(i);break;case 3:i==n.bI.FI?this.partnerGuid=t.fw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.TrafficKey.prototype.write=function(t){t.mw("TrafficKey"),null!==this.bitrate&&void 0!==this.bitrate&&(t.Ew("bitrate",n.bI.NI,1),t.ww(this.bitrate),t.Iw()),null!==this.AS&&void 0!==this.AS&&(t.Ew("AS",n.bI.NI,2),t.ww(this.AS),t.Iw()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(t.Ew("partnerGuid",n.bI.FI,3),t.Tw(this.partnerGuid),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.PartnerKey=function(t){this.bitrate=null,this.AS=null,this.partnerGuid=null,t&&(void 0!==t.bitrate&&(this.bitrate=t.bitrate),void 0!==t.AS&&(this.AS=t.AS),void 0!==t.partnerGuid&&(this.partnerGuid=t.partnerGuid))},hive.snapshots.PartnerKey.prototype={},hive.snapshots.PartnerKey.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.NI?this.bitrate=t.gw().value:t.dw(i);break;case 2:i==n.bI.NI?this.AS=t.gw().value:t.dw(i);break;case 3:i==n.bI.FI?this.partnerGuid=t.fw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.PartnerKey.prototype.write=function(t){t.mw("PartnerKey"),null!==this.bitrate&&void 0!==this.bitrate&&(t.Ew("bitrate",n.bI.NI,1),t.ww(this.bitrate),t.Iw()),null!==this.AS&&void 0!==this.AS&&(t.Ew("AS",n.bI.NI,2),t.ww(this.AS),t.Iw()),null!==this.partnerGuid&&void 0!==this.partnerGuid&&(t.Ew("partnerGuid",n.bI.FI,3),t.Tw(this.partnerGuid),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.Player=function(t){this.bufferingN=null,this.bufferingMs=null,this.initBufferingN=null,this.initBufferingMs=null,this.seekBufferingN=null,this.seekBufferingMs=null,this.playerBufferMs=null,t&&(void 0!==t.bufferingN&&(this.bufferingN=t.bufferingN),void 0!==t.bufferingMs&&(this.bufferingMs=t.bufferingMs),void 0!==t.initBufferingN&&(this.initBufferingN=t.initBufferingN),void 0!==t.initBufferingMs&&(this.initBufferingMs=t.initBufferingMs),void 0!==t.seekBufferingN&&(this.seekBufferingN=t.seekBufferingN),void 0!==t.seekBufferingMs&&(this.seekBufferingMs=t.seekBufferingMs),void 0!==t.playerBufferMs&&(this.playerBufferMs=t.playerBufferMs))},hive.snapshots.Player.prototype={},hive.snapshots.Player.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI._I?this.bufferingN=t.iR().value:t.dw(i);break;case 2:i==n.bI.NI?this.bufferingMs=t.gw().value:t.dw(i);break;case 3:i==n.bI._I?this.initBufferingN=t.iR().value:t.dw(i);break;case 4:i==n.bI.NI?this.initBufferingMs=t.gw().value:t.dw(i);break;case 5:i==n.bI._I?this.seekBufferingN=t.iR().value:t.dw(i);break;case 6:i==n.bI.NI?this.seekBufferingMs=t.gw().value:t.dw(i);break;case 36:i==n.bI.NI?this.playerBufferMs=t.gw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.Player.prototype.write=function(t){t.mw("Player"),null!==this.bufferingN&&void 0!==this.bufferingN&&(t.Ew("bufferingN",n.bI._I,1),t.DS(this.bufferingN),t.Iw()),null!==this.bufferingMs&&void 0!==this.bufferingMs&&(t.Ew("bufferingMs",n.bI.NI,2),t.ww(this.bufferingMs),t.Iw()),null!==this.initBufferingN&&void 0!==this.initBufferingN&&(t.Ew("initBufferingN",n.bI._I,3),t.DS(this.initBufferingN),t.Iw()),null!==this.initBufferingMs&&void 0!==this.initBufferingMs&&(t.Ew("initBufferingMs",n.bI.NI,4),t.ww(this.initBufferingMs),t.Iw()),null!==this.seekBufferingN&&void 0!==this.seekBufferingN&&(t.Ew("seekBufferingN",n.bI._I,5),t.DS(this.seekBufferingN),t.Iw()),null!==this.seekBufferingMs&&void 0!==this.seekBufferingMs&&(t.Ew("seekBufferingMs",n.bI.NI,6),t.ww(this.seekBufferingMs),t.Iw()),null!==this.playerBufferMs&&void 0!==this.playerBufferMs&&(t.Ew("playerBufferMs",n.bI.NI,36),t.ww(this.playerBufferMs),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.MetricSnapshot=function(t){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.guid&&(this.guid=t.guid),void 0!==t.eventId&&(this.eventId=t.eventId),void 0!==t.streamInfo&&(this.streamInfo=t.streamInfo),void 0!==t.metrics&&(this.metrics=t.metrics),void 0!==t.traffic&&(this.traffic=t.traffic),void 0!==t.snapshotInfo&&(this.snapshotInfo=t.snapshotInfo),void 0!==t.agentInfo&&(this.agentInfo=t.agentInfo),void 0!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.partners&&(this.partners=t.partners),void 0!==t.player&&(this.player=t.player),void 0!==t.client&&(this.client=t.client),void 0!==t.sessionId&&(this.sessionId=t.sessionId))},hive.snapshots.MetricSnapshot.prototype={},hive.snapshots.MetricSnapshot.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.DI?this.timestamp=t.nR().value:t.dw(i);break;case 2:i==n.bI.FI?this.guid=t.fw().value:t.dw(i);break;case 3:i==n.bI.MI?(this.eventId=new EventId,this.eventId.read(t)):t.dw(i);break;case 4:i==n.bI.MI?(this.streamInfo=new hive.snapshots.StreamInfo,this.streamInfo.read(t)):t.dw(i);break;case 5:i==n.bI.MI?(this.metrics=new hive.snapshots.Metrics,this.metrics.read(t)):t.dw(i);break;case 6:if(i==n.bI.BI){var o,s=0;this.traffic={},o=t.KS(),o.YS,o.zS,s=o.size;for(var a=0;a<s;++a){a>0&&t.US.length>t.Cw[t.Cw.length-1]+1&&t.US.pop();var h=null,u=null;h=new hive.snapshots.TrafficKey,h.read(t),u=new hive.snapshots.Traffic,u.read(t),this.traffic[h]=u}t.JS()}else t.dw(i);break;case 7:i==n.bI.MI?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(t)):t.dw(i);break;case 8:i==n.bI.MI?(this.agentInfo=new hive.snapshots.AgentInfo,this.agentInfo.read(t)):t.dw(i);break;case 9:i==n.bI.MI?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.dw(i);break;case 10:if(i==n.bI.BI){var c,f=0;this.partners={},c=t.KS(),c.YS,c.zS,f=c.size;for(var l=0;l<f;++l){l>0&&t.US.length>t.Cw[t.Cw.length-1]+1&&t.US.pop();var p=null,d=null;p=new hive.snapshots.PartnerKey,p.read(t),d=new hive.snapshots.Partner,d.read(t),this.partners[p]=d}t.JS()}else t.dw(i);break;case 11:i==n.bI.MI?(this.player=new hive.snapshots.Player,this.player.read(t)):t.dw(i);break;case 12:i==n.bI.MI?(this.client=new hive.snapshots.ClientInfo,this.client.read(t)):t.dw(i);break;case 13:i==n.bI.FI?this.sessionId=t.fw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.MetricSnapshot.prototype.write=function(t){if(t.mw("MetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(t.Ew("timestamp",n.bI.DI,1),t.FS(this.timestamp),t.Iw()),null!==this.guid&&void 0!==this.guid&&(t.Ew("guid",n.bI.FI,2),t.Tw(this.guid),t.Iw()),null!==this.eventId&&void 0!==this.eventId&&(t.Ew("eventId",n.bI.MI,3),this.eventId.write(t),t.Iw()),null!==this.streamInfo&&void 0!==this.streamInfo&&(t.Ew("streamInfo",n.bI.MI,4),this.streamInfo.write(t),t.Iw()),null!==this.metrics&&void 0!==this.metrics&&(t.Ew("metrics",n.bI.MI,5),this.metrics.write(t),t.Iw()),null!==this.traffic&&void 0!==this.traffic){t.Ew("traffic",n.bI.BI,6),t.RS(n.bI.MI,n.bI.MI,n.YI(this.traffic));for(var e=0;e<this.traffic.length;e++){var i=this.traffic[e],r=i.key,o=i.value;r.write(t),o.write(t)}t.bS(),t.Iw()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(t.Ew("snapshotInfo",n.bI.MI,7),this.snapshotInfo.write(t),t.Iw()),null!==this.agentInfo&&void 0!==this.agentInfo&&(t.Ew("agentInfo",n.bI.MI,8),this.agentInfo.write(t),t.Iw()),null!==this.connInfo&&void 0!==this.connInfo&&(t.Ew("connInfo",n.bI.MI,9),this.connInfo.write(t),t.Iw()),null!==this.partners&&void 0!==this.partners){t.Ew("partners",n.bI.BI,10),t.RS(n.bI.MI,n.bI.MI,n.YI(this.partners));for(var e=0;e<this.partners.length;e++){var i=this.partners[e],s=i.key,a=i.value;s.write(t),a.write(t)}t.bS(),t.Iw()}null!==this.player&&void 0!==this.player&&(t.Ew("player",n.bI.MI,11),this.player.write(t),t.Iw()),null!==this.client&&void 0!==this.client&&(t.Ew("client",n.bI.MI,12),this.client.write(t),t.Iw()),null!==this.sessionId&&void 0!==this.sessionId&&(t.Ew("sessionId",n.bI.FI,13),t.Tw(this.sessionId),t.Iw()),t.Sw(),t.Rw()},hive.snapshots.JsonMetricSnapshot=function(t){this.timestamp=null,this.guid=null,this.eventId=null,this.streamInfo=null,this.metrics=null,this.traffic=null,this.snapshotInfo=null,this.agentInfo=null,this.connInfo=null,this.partners=null,this.player=null,this.client=null,this.sessionId=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.guid&&(this.guid=t.guid),void 0!==t.eventId&&(this.eventId=t.eventId),void 0!==t.streamInfo&&(this.streamInfo=t.streamInfo),void 0!==t.metrics&&(this.metrics=t.metrics),void 0!==t.traffic&&(this.traffic=t.traffic),void 0!==t.snapshotInfo&&(this.snapshotInfo=t.snapshotInfo),void 0!==t.agentInfo&&(this.agentInfo=t.agentInfo),void 0!==t.connInfo&&(this.connInfo=t.connInfo),void 0!==t.partners&&(this.partners=t.partners),void 0!==t.player&&(this.player=t.player),void 0!==t.client&&(this.client=t.client),void 0!==t.sessionId&&(this.sessionId=t.sessionId))},hive.snapshots.JsonMetricSnapshot.prototype={},hive.snapshots.JsonMetricSnapshot.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.DI?this.timestamp=t.nR().value:t.dw(i);break;case 2:i==n.bI.FI?this.guid=t.fw().value:t.dw(i);break;case 3:i==n.bI.MI?(this.eventId=new EventId,this.eventId.read(t)):t.dw(i);break;case 4:i==n.bI.MI?(this.streamInfo=new hive.snapshots.StreamInfo,this.streamInfo.read(t)):t.dw(i);break;case 5:i==n.bI.MI?(this.metrics=new hive.snapshots.Metrics,this.metrics.read(t)):t.dw(i);break;case 6:if(i==n.bI.BI){var o,s=0;this.traffic={},o=t.KS(),o.YS,o.zS,s=o.size;for(var a=0;a<s;++a){a>0&&t.US.length>t.Cw[t.Cw.length-1]+1&&t.US.pop();var h=null,u=null;h=t.fw().value,u=new hive.snapshots.Traffic,u.read(t),this.traffic[h]=u}t.JS()}else t.dw(i);break;case 7:i==n.bI.MI?(this.snapshotInfo=new SnapshotInfo,this.snapshotInfo.read(t)):t.dw(i);break;case 8:i==n.bI.MI?(this.agentInfo=new hive.snapshots.AgentInfo,this.agentInfo.read(t)):t.dw(i);break;case 9:i==n.bI.MI?(this.connInfo=new hive.snapshots.ConnectivityInfo,this.connInfo.read(t)):t.dw(i);break;case 10:if(i==n.bI.BI){var c,f=0;this.partners={},c=t.KS(),c.YS,c.zS,f=c.size;for(var l=0;l<f;++l){l>0&&t.US.length>t.Cw[t.Cw.length-1]+1&&t.US.pop();var p=null,d=null;p=t.fw().value,d=new hive.snapshots.Partner,d.read(t),this.partners[p]=d}t.JS()}else t.dw(i);break;case 11:i==n.bI.MI?(this.player=new hive.snapshots.Player,this.player.read(t)):t.dw(i);break;case 12:i==n.bI.MI?(this.client=new hive.snapshots.ClientInfo,this.client.read(t)):t.dw(i);break;case 13:i==n.bI.FI?this.sessionId=t.fw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},hive.snapshots.JsonMetricSnapshot.prototype.write=function(t){if(t.mw("JsonMetricSnapshot"),null!==this.timestamp&&void 0!==this.timestamp&&(t.Ew("timestamp",n.bI.DI,1),t.FS(this.timestamp),t.Iw()),null!==this.guid&&void 0!==this.guid&&(t.Ew("guid",n.bI.FI,2),t.Tw(this.guid),t.Iw()),null!==this.eventId&&void 0!==this.eventId&&(t.Ew("eventId",n.bI.MI,3),this.eventId.write(t),t.Iw()),null!==this.streamInfo&&void 0!==this.streamInfo&&(t.Ew("streamInfo",n.bI.MI,4),this.streamInfo.write(t),t.Iw()),null!==this.metrics&&void 0!==this.metrics&&(t.Ew("metrics",n.bI.MI,5),this.metrics.write(t),t.Iw()),null!==this.traffic&&void 0!==this.traffic){t.Ew("traffic",n.bI.BI,6),t.RS(n.bI.FI,n.bI.MI,n.YI(this.traffic));for(var e in this.traffic)if(this.traffic.hasOwnProperty(e)){var i=this.traffic[e];t.Tw(e),i.write(t)}t.bS(),t.Iw()}if(null!==this.snapshotInfo&&void 0!==this.snapshotInfo&&(t.Ew("snapshotInfo",n.bI.MI,7),this.snapshotInfo.write(t),t.Iw()),null!==this.agentInfo&&void 0!==this.agentInfo&&(t.Ew("agentInfo",n.bI.MI,8),this.agentInfo.write(t),t.Iw()),null!==this.connInfo&&void 0!==this.connInfo&&(t.Ew("connInfo",n.bI.MI,9),this.connInfo.write(t),t.Iw()),null!==this.partners&&void 0!==this.partners){t.Ew("partners",n.bI.BI,10),t.RS(n.bI.FI,n.bI.MI,n.YI(this.partners));for(var r in this.partners)if(this.partners.hasOwnProperty(r)){var o=this.partners[r];t.Tw(r),o.write(t)}t.bS(),t.Iw()}null!==this.player&&void 0!==this.player&&(t.Ew("player",n.bI.MI,11),this.player.write(t),t.Iw()),null!==this.client&&void 0!==this.client&&(t.Ew("client",n.bI.MI,12),this.client.write(t),t.Iw()),null!==this.sessionId&&void 0!==this.sessionId&&(t.Ew("sessionId",n.bI.FI,13),t.Tw(this.sessionId),t.Iw()),t.Sw(),t.Rw()}},function(t,e,i){var n=i(30);StreamType={1:"LIVE",LIVE:1,2:"VOD",xG:2},StreamProtocol={1:"DASH",yB:1,2:"HDS",HG:2,3:"HLS",OU:3,4:"SS",qG:4},ClientType={1:"JAVA",VG:1,2:"STATS_ONLY",pL:2,3:"JS_DIRECT",uL:3,4:"JS_PROXY",lL:4},EventId=function(t){this.partnerId=null,this.customerId=null,this.contentId=null,this.tags=null,t&&(void 0!==t.partnerId&&(this.partnerId=t.partnerId),void 0!==t.customerId&&(this.customerId=t.customerId),void 0!==t.contentId&&(this.contentId=t.contentId),void 0!==t.tags&&(this.tags=t.tags))},EventId.prototype={},EventId.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.FI?this.partnerId=t.fw().value:t.dw(i);break;case 2:i==n.bI.FI?this.customerId=t.fw().value:t.dw(i);break;case 3:i==n.bI.FI?this.contentId=t.fw().value:t.dw(i);break;case 4:if(i==n.bI.xI){var o,s=0;this.tags=[],o=t.WS(),o.XS,s=o.size;for(var a=0;a<s;++a){var h=null;h=t.fw().value,this.tags.push(h)}t.ZS()}else t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},EventId.prototype.write=function(t){if(t.mw("EventId"),null!==this.partnerId&&void 0!==this.partnerId&&(t.Ew("partnerId",n.bI.FI,1),t.Tw(this.partnerId),t.Iw()),null!==this.customerId&&void 0!==this.customerId&&(t.Ew("customerId",n.bI.FI,2),t.Tw(this.customerId),t.Iw()),null!==this.contentId&&void 0!==this.contentId&&(t.Ew("contentId",n.bI.FI,3),t.Tw(this.contentId),t.Iw()),null!==this.tags&&void 0!==this.tags){t.Ew("tags",n.bI.xI,4),t.PS(n.bI.FI,this.tags.length);for(var e in this.tags)this.tags.hasOwnProperty(e)&&(e=this.tags[e],t.Tw(e));t.CS(),t.Iw()}t.Sw(),t.Rw()},SnapshotInfo=function(t){this.timestamp=null,this.apiServer=null,this.clientIp=null,t&&(void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.apiServer&&(this.apiServer=t.apiServer),void 0!==t.clientIp&&(this.clientIp=t.clientIp))},SnapshotInfo.prototype={},SnapshotInfo.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.DI?this.timestamp=t.nR().value:t.dw(i);break;case 2:i==n.bI.FI?this.apiServer=t.fw().value:t.dw(i);break;case 3:i==n.bI.FI?this.clientIp=t.fw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},SnapshotInfo.prototype.write=function(t){t.mw("SnapshotInfo"),null!==this.timestamp&&void 0!==this.timestamp&&(t.Ew("timestamp",n.bI.DI,1),t.FS(this.timestamp),t.Iw()),null!==this.apiServer&&void 0!==this.apiServer&&(t.Ew("apiServer",n.bI.FI,2),t.Tw(this.apiServer),t.Iw()),null!==this.clientIp&&void 0!==this.clientIp&&(t.Ew("clientIp",n.bI.FI,3),t.Tw(this.clientIp),t.Iw()),t.Sw(),t.Rw()},InetAddress=function(t){this.address=null,this.port=null,t&&(void 0!==t.address&&(this.address=t.address),void 0!==t.port&&(this.port=t.port))},InetAddress.prototype={},InetAddress.prototype.read=function(t){for(t.QS();;){var e=t.uw(),i=(e.qS,e.lw),r=e.pw;if(i==n.bI.AI)break;switch(r){case 1:i==n.bI.FI?this.address=t.oR().value:t.dw(i);break;case 2:i==n.bI.NI?this.port=t.gw().value:t.dw(i);break;default:t.dw(i)}t.vw()}t.yw()},InetAddress.prototype.write=function(t){t.mw("InetAddress"),null!==this.address&&void 0!==this.address&&(t.Ew("address",n.bI.FI,1),t.MS(this.address),t.Iw()),null!==this.port&&void 0!==this.port&&(t.Ew("port",n.bI.NI,2),t.ww(this.port),t.Iw()),t.Sw(),t.Rw()}},function(t,e,i){"use strict";var n=i(2),r=i(21),o=function(){function t(t,e){this.msg=t,this.jG=Date.now()+e,this.GG=n.defer()}return t.prototype.QG=function(){return Date.now()>=this.jG},t}(),s=function(){function t(t,e,i,n,r,o,s){void 0===e&&(e=3e4),void 0===i&&(i=100),void 0===n&&(n=3e4),void 0===r&&(r=15e3),void 0===o&&(o=Date),void 0===s&&(s=!1),this.KG=1,this.YG=-1,this.zG=-1,this.qq={},this.JG=[],this.WG=[],this.XG=!1,this.ZG=!0,this.$G=t,this.eQ=Array(),this.lp=e,this.pp=i,this.fp=n,this.tQ=r,this.rQ=o,this.XG=s||/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge./i.test(navigator.userAgent)}return t.prototype.Ae=function(t){var e=t.service+"_"+t.msgId,i=this.qq[e];null!=i?i(t):r.te().error(r.mn+"Could not find a dispatcher for ",t,e,this.qq)},t.prototype.on=function(t,e,i){this.qq[t+"_"+e]=i},t.prototype.onerror=function(t){this.JG.push(t)},t.prototype.CL=function(t){this.WG.push(t)},t.prototype.iQ=function(){var t=this;if(!window.WebSocket)return void this.JG.forEach(function(t){return t("WebSocket not defined")});var e=new WebSocket(this.$G);return e.binaryType="arraybuffer",e.onopen=function(e){t.nQ(),r.te().debug(r.mn+"HiveServicesConnection established to "+t.$G),t.zG=(new t.rQ).getTime(),t.sQ(),t.WG.forEach(function(e){return e(t)}),t.oQ(),t.aQ()},e.onclose=function(e){t.close(t.ZG),t.connect()},e.onmessage=function(e){t.Ae(r.pc.fu(e.data))},e.onerror=function(e){t.close(!0),t.JG.forEach(function(t){return t(e.toString())})},e},t.prototype.isOpen=function(){return null!=this.ME&&this.ME.readyState==this.ME.OPEN},t.prototype.connect=function(t){var e=this;t&&(this.ZG=!0),this.ZG&&1!=this.isOpen()&&(this.YG>0||(this.zG>-1&&(new this.rQ).getTime()-this.zG>this.lp?(this.KG=r.N.lu,this.zG=-1):this.KG=Math.min(2*this.KG,this.lp),this.YG=window.setTimeout(function(){e.YG=-1,r.te().debug(r.mn+"Connection attempt to "+e.$G+" [t:"+e.KG+" hb:"+e.XG+"]"),e.ME=e.iQ(),e.KG=Math.max(e.KG,r.N.lu)},this.KG)))},t.prototype.nQ=function(){this.YG>-1&&(clearTimeout(this.YG),this.YG=-1)},t.prototype.close=function(t){this.ZG=void 0!=t&&t,r.te().debug(r.mn+"Closing connection [reconnect:"+this.ZG+"]"),this.nQ(),null!=this.ME&&(this.ME.close(),this.ME=null)},t.prototype.sQ=function(){for(;this.eQ.length>0;){var t=this.eQ.pop();try{t.QG()?t.GG.reject(new Error("Message expired")):(this.oQ(),this.ME.send(t.msg.pu()))}catch(e){if(e.code===DOMException.INVALID_STATE_ERR){this.eQ.push(t);break}r.te().error(r.mn+"Failed to send the message, dropped: ",e.code,e.name),t.GG.reject(e)}}this.aQ()},t.prototype.oQ=function(){this.hQ&&(clearTimeout(this.hQ),this.hQ=null)},t.prototype.aQ=function(){var t=this;this.XG&&!this.hQ&&(this.hQ=window.setInterval(function(){t.send(new r.pc(Services.cQ,0,""))},this.tQ))},t.prototype.send=function(t,e){if(void 0===e&&(e=this.fp),this.eQ.length>=this.pp)throw new Error("HiveServices connection cannot queue more messages");var i=new o(t,e);return this.eQ.push(i),this.ME&&this.sQ(),i.GG.Te},t.prototype.uQ=function(t){this.XG=t,this.XG&&this.aQ()},t.prototype.lQ=function(){return null!=this.ME},t}();e.AL=s},function(t,e){Services={1:"REMOTE_EXECUTOR",pQ:1,2:"PEER_FORWARDER",fQ:2,3:"PEER_INDEX",dQ:3,4:"PEER_BROADCAST",gQ:4,5:"PEER_FILTER",vQ:5,6:"PEER_LOGGING",yQ:6,7:"HIVEJS_TRACKER",mQ:7,8:"PEER_SYSTEM",EQ:8,9:"HIVEJS_SNAPSHOTS",fc:9,10:"HIVEJS_TICKETS",PL:10,11:"HIVEJS_KEEPALIVE",cQ:11,12:"HIVEJS_FORWARDING",TQ:12}},function(t,e){t.t=function(){return new Function}},function(t,e,i){"use strict";var n=function(){function t(t,e){this.Uc=t,this.xc=e}return t.prototype.Kc=function(){return this.Uc},t.prototype.Yc=function(){return this.xc?this.xc:this.Uc},t}();e.tM=n},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(78),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.Yh=function(){return this.PM?this.PM:null},e}(r.AM);e.dM=o},function(t,e,i){"use strict";var n=i(70),r=i(2),o=i(0),s=i(24),a=function(){function t(){this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.te=o.Framework.resolve(o.Framework.q.I).log()}return t.prototype.$L=function(){var t=r.defer(),e=this.indexedDB.open("PrivateIPDB");return e.onupgradeneeded=function(){e.result.createObjectStore("PrivateIPStore",{keyPath:"id"})},e.onsuccess=function(){var i=e.result;t.resolve(i)},e.onerror=function(e){t.reject(e)},t.Te},t.prototype.jM=function(){var t=this;if(this.IQ)return this.IQ;var e=setTimeout(function(){t.te.warn("Private list retrieval timeout"),i.reject("Private list timeout")},4e3),i=r.defer();return s.nc.Mi&&this.indexedDB?this.$L().then(function(r){var o=r.transaction("PrivateIPStore","readwrite"),s=o.objectStore("PrivateIPStore"),a=s.get("iplist");a.onsuccess=function(){clearTimeout(e);var t=[];n.iF(a.result)||n.iF(a.result.value)||(t=a.result.value.split("|")),i.resolve(t),r.close()},a.onerror=function(n){clearTimeout(e),t.te.warn("I got an error on indexed db "+n.message),i.reject("Error on indexedDB "+n.message)}}).fail(function(n){clearTimeout(e),t.te.warn("DB is not open with error"+n.message),i.reject("DB is not open with error "+n.message)}):(clearTimeout(e),i.reject({message:"DB is not ready or enabled"})),this.IQ=i.Te,this.IQ},t.prototype.YM=function(t){var e=this;if(s.nc.Mi&&this.indexedDB){var i=t.join("|");this.$L().then(function(n){var r=n.transaction("PrivateIPStore","readwrite");r.objectStore("PrivateIPStore").put({id:"iplist",value:i}),r.oncomplete=function(){e.te.debug("Storing site matched ips ["+t.join(",")+"]"),n.close()}}).fail(function(t){e.te.warn("DB is not open with error "+t.message)})}},t}();e.MM=a},function(t,e,i){"use strict";var n=i(17).log,r=i(17).Da,o={i_:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},s_:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this.wQ},set:function(t){var e=this;this.wQ&&(this.removeEventListener("track",this.wQ),this.removeEventListener("addstream",this.SQ)),this.addEventListener("track",this.wQ=t),this.addEventListener("addstream",this.SQ=function(t){t.stream.addEventListener("addtrack",function(i){var n=new Event("track");n.track=i.track,n.receiver={track:i.track},n.ho=[t.stream],e.dispatchEvent(n)}),t.stream.getTracks().forEach(function(e){var i=new Event("track");i.track=e,i.receiver={track:e},i.ho=[t.stream],this.dispatchEvent(i)}.bind(this))}.bind(this))}})},o_:function(){if("object"==typeof window&&window.RTCPeerConnection&&!("getSenders"in RTCPeerConnection.prototype)&&"createDTMFSender"in RTCPeerConnection.prototype){RTCPeerConnection.prototype.getSenders=function(){return this.RQ};var t=RTCPeerConnection.prototype.addStream,e=RTCPeerConnection.prototype.removeStream;RTCPeerConnection.prototype.addStream=function(e){var i=this;i.RQ=i.RQ||[],t.apply(i,[e]),e.getTracks().forEach(function(t){i.RQ.push({track:t,get bQ(){return void 0===this.PQ&&("audio"===t.kind?this.PQ=i.createDTMFSender(t):this.PQ=null),this.PQ}})})},RTCPeerConnection.prototype.removeStream=function(t){var i=this;i.RQ=i.RQ||[],e.apply(i,[t]),t.getTracks().forEach(function(t){var e=i.RQ.find(function(e){return e.track===t});e&&i.RQ.splice(i.RQ.indexOf(e),1)})}}},n_:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.AQ},set:function(t){var e=this;if(this.AQ=t,this.src&&URL.revokeObjectURL(this.src),!t)return void(this.src="");this.src=URL.createObjectURL(t),t.addEventListener("addtrack",function(){e.src&&URL.revokeObjectURL(e.src),e.src=URL.createObjectURL(t)}),t.addEventListener("removetrack",function(){e.src&&URL.revokeObjectURL(e.src),e.src=URL.createObjectURL(t)})}}))},e_:function(){window.RTCPeerConnection||(window.RTCPeerConnection=function(t,e){return n("PeerConnection"),t&&t.CQ&&(t.kQ=t.CQ),new webkitRTCPeerConnection(t,e)},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.OQ&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.OQ}}));var t=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,i,n){var r=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof arguments[0]))return t.apply(this,[]);var s=function(t){var e={};return t.result().forEach(function(t){var i={id:t.id,timestamp:t.timestamp,type:{_Q:"local-candidate",NQ:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){i[e]=t.DQ(e)}),e[i.id]=i}),e},a=function(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))};if(arguments.length>=2){var h=function(t){o[1](a(s(t)))};return t.apply(this,[h,arguments[0]])}return new Promise(function(e,i){t.apply(r,[function(t){e(a(s(t)))},i])}).then(i,n)},r.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){var t=arguments,i=this,n=new Promise(function(n,r){e.apply(i,[t[0],n,r])});return t.length<2?n:n.then(function(){t[1].apply(null,[])},function(e){t.length>=3&&t[2].apply(null,[e])})}}),r.version<52&&["createOffer","createAnswer"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){var t=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var i=1===arguments.length?arguments[0]:void 0;return new Promise(function(n,r){e.apply(t,[n,r,i])})}return e.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?RTCIceCandidate:RTCSessionDescription)(arguments[0]),e.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};t.t={i_:o.i_,s_:o.s_,o_:o.o_,n_:o.n_,e_:o.e_,r_:i(121)}},function(t,e,i){"use strict";var n=i(17).log,r=i(17).Da;t.t=function(){var t=function(t){if("object"!=typeof t||t.FQ||t.optional)return t;var e={};return Object.keys(t).forEach(function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n="object"==typeof t[i]?t[i]:{LQ:t[i]};void 0!==n.MQ&&"number"==typeof n.MQ&&(n.min=n.max=n.MQ);var r=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.slice(1):"deviceId"===e?"sourceId":e};if(void 0!==n.LQ){e.optional=e.optional||[];var o={};"number"==typeof n.LQ?(o[r("min",i)]=n.LQ,e.optional.push(o),o={},o[r("max",i)]=n.LQ,e.optional.push(o)):(o[r("",i)]=n.LQ,e.optional.push(o))}void 0!==n.MQ&&"number"!=typeof n.MQ?(e.FQ=e.FQ||{},e.FQ[r("",i)]=n.MQ):["min","max"].forEach(function(t){void 0!==n[t]&&(e.FQ=e.FQ||{},e.FQ[r(t,i)]=n[t])})}}),t.BQ&&(e.optional=(e.optional||[]).concat(t.BQ)),e},e=function(e,i){if(e=JSON.parse(JSON.stringify(e)),e&&e.YE&&(e.YE=t(e.YE)),e&&"object"==typeof e.video){var o=e.video.UQ;o=o&&("object"==typeof o?o:{LQ:o});var s=r.version<59;if(o&&("user"===o.MQ||"environment"===o.MQ||"user"===o.LQ||"environment"===o.LQ)&&(!navigator.mediaDevices.xQ||!navigator.mediaDevices.xQ().UQ||s)&&(delete e.video.UQ,"environment"===o.MQ||"environment"===o.LQ))return navigator.mediaDevices.HQ().then(function(r){r=r.filter(function(t){return"videoinput"===t.kind});var s=r.find(function(t){return-1!==t.label.toLowerCase().indexOf("back")})||r.length&&r[r.length-1];return s&&(e.video.qQ=o.MQ?{MQ:s.qQ}:{LQ:s.qQ}),e.video=t(e.video),n("chrome: "+JSON.stringify(e)),i(e)});e.video=t(e.video)}return n("chrome: "+JSON.stringify(e)),i(e)},i=function(t){return{name:{VQ:"NotAllowedError",jQ:"OverconstrainedError"}[t.name]||t.name,message:t.message,GQ:t.QQ,toString:function(){return this.name+(this.message&&": ")+this.message}}},o=function(t,n,r){e(t,function(t){navigator.webkitGetUserMedia(t,n,function(t){r(i(t))})})};navigator.getUserMedia=o;var s=function(t){return new Promise(function(e,i){navigator.getUserMedia(t,e,i)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:s,HQ:function(){return new Promise(function(t){var e={YE:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(i){t(i.map(function(t){return{label:t.label,kind:e[t.kind],qQ:t.id,KQ:""}}))})})},xQ:function(){return{qQ:!0,YQ:!0,UQ:!0,zQ:!0,height:!0,width:!0}}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return e(t,function(t){return a(t).then(function(e){if(t.YE&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(t){t.stop()}),new DOMException("","NotFoundError");return e},function(t){return Promise.reject(i(t))})})}}else navigator.mediaDevices.getUserMedia=function(t){return s(t)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){n("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){n("Dummy mediaDevices.removeEventListener called.")})}},function(t,e,i){"use strict";function n(t){var e=t.filter(function(t){return"audio"===t.kind}),i=t.filter(function(t){return"video"===t.kind});for(t=[];e.length||i.length;)e.length&&t.push(e.shift()),i.length&&t.push(i.shift());return t}function r(t){var e=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(t){if(t&&(t.JQ||t.url)){var i=t.JQ||t.url,n="string"==typeof i;return n&&(i=[i]),i=i.filter(function(t){return 0!==t.indexOf("turn:")||-1===t.indexOf("transport=udp")||-1!==t.indexOf("turn:[")||e?0===t.indexOf("stun:")&&s.version>=14393:(e=!0,!0)}),delete t.url,t.JQ=n?i[0]:i,!!i.length}return!1})}var o=i(123),s=i(17).Da,a={e_:function(){if(window.WQ&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(t){return t}),window.RTCSessionDescription||(window.RTCSessionDescription=function(t){return t}),s.version<15025)){var t=Object.getOwnPropertyDescriptor(MediaStreamTrack.prototype,"enabled");Object.defineProperty(MediaStreamTrack.prototype,"enabled",{set:function(e){t.set.call(this,e);var i=new Event("enabled");i.enabled=e,this.dispatchEvent(i)}})}window.RTCPeerConnection=function(t){var e=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(t){e[t]=i[t].bind(i)}),this.onicecandidate=null,this.onaddstream=null,this.XQ=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.ZQ=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.$Q=[],this.eK=[],this.getLocalStreams=function(){return e.$Q},this.getRemoteStreams=function(){return e.eK},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.tK={rK:"all",iceServers:[]},t&&t.CQ)switch(t.CQ){case"all":case"relay":this.tK.rK=t.CQ}this.iK=t&&"max-bundle"===t.nK,t&&t.iceServers&&(this.tK.iceServers=r(t.iceServers)),this.sK=t,this.oK=[],this.aK=[]},window.RTCPeerConnection.prototype.hK=function(){var t=new Event("icegatheringstatechange");this.dispatchEvent(t),null!==this.ZQ&&this.ZQ(t)},window.RTCPeerConnection.prototype.cK=function(){var t=this,e=o.uK(t.localDescription.sdp);this.aK.forEach(function(i){if(i.candidate&&0!==Object.keys(i.candidate).length)e[i.candidate.sdpMLineIndex+1]+="a="+i.candidate.candidate+"\r\n";else for(var n=1;n<e.length;n++)-1===e[n].indexOf("\r\na=end-of-candidates\r\n")&&(e[n]+="a=end-of-candidates\r\n");t.localDescription.sdp=e.join(""),t.dispatchEvent(i),null!==t.onicecandidate&&t.onicecandidate(i),i.candidate||"complete"===t.iceGatheringState||t.oK.every(function(t){return t.lK&&"completed"===t.lK.state})&&"complete"!==t.pK&&(t.iceGatheringState="complete",t.hK())}),this.aK=[]},window.RTCPeerConnection.prototype.getConfiguration=function(){return this.sK},window.RTCPeerConnection.prototype.addStream=function(t){if(s.version>=15025)this.$Q.push(t);else{var e=t.clone();t.getTracks().forEach(function(t,i){var n=e.getTracks()[i];t.addEventListener("enabled",function(t){n.enabled=t.enabled})}),this.$Q.push(e)}this.fK()},window.RTCPeerConnection.prototype.removeStream=function(t){var e=this.$Q.indexOf(t);e>-1&&(this.$Q.splice(e,1),this.fK())},window.RTCPeerConnection.prototype.getSenders=function(){return this.oK.filter(function(t){return!!t.dK}).map(function(t){return t.dK})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.oK.filter(function(t){return!!t.gK}).map(function(t){return t.gK})},window.RTCPeerConnection.prototype.vK=function(t,e){var i={yK:[],mK:[],EK:[]},n=function(t,e){t=parseInt(t,10);for(var i=0;i<e.length;i++)if(e[i].TK===t||e[i].IK===t)return e[i]},r=function(t,e,i,r){var o=n(t.parameters.wK,i),s=n(e.parameters.wK,r);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return t.yK.forEach(function(n){for(var o=0;o<e.yK.length;o++){var s=e.yK[o];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.SK===s.SK){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.wK&&!r(n,s,t.yK,e.yK))continue;s=JSON.parse(JSON.stringify(s)),s.RK=Math.min(n.RK,s.RK),i.yK.push(s),s.bK=s.bK.filter(function(t){for(var e=0;e<n.bK.length;e++)if(n.bK[e].type===t.type&&n.bK[e].PK===t.PK)return!0;return!1});break}}}),t.mK.forEach(function(t){for(var n=0;n<e.mK.length;n++){var r=e.mK[n];if(t.uri===r.uri){i.mK.push(r);break}}}),i},window.RTCPeerConnection.prototype.AK=function(t,e){var i=this,n=new RTCIceGatherer(i.tK),r=new RTCIceTransport(n);n.CK=function(s){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:e};var h=s.candidate,u=!h||0===Object.keys(h).length;u?void 0===n.state&&(n.state="completed"):(h.kK="RTCP"===r.kK?2:1,a.candidate.candidate=o.OK(h));var c=o.uK(i.localDescription.sdp);c[a.candidate.sdpMLineIndex+1]+=u?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i.localDescription.sdp=c.join("");var f=i._K?i._K:i.oK,l=f.every(function(t){return t.lK&&"completed"===t.lK.state});switch(i.iceGatheringState){case"new":u||i.aK.push(a),u&&l&&i.aK.push(new Event("icecandidate"));break;case"gathering":i.cK(),u||(i.dispatchEvent(a),null!==i.onicecandidate&&i.onicecandidate(a)),l&&(i.dispatchEvent(new Event("icecandidate")),null!==i.onicecandidate&&i.onicecandidate(new Event("icecandidate")),i.iceGatheringState="complete",i.hK())}},r.NK=function(){i.DK()};var s=new RTCDtlsTransport(r);return s.FK=function(){i.DK()},s.onerror=function(){s.state="failed",i.DK()},{lK:n,LK:r,MK:s}},window.RTCPeerConnection.prototype.BK=function(t,e,i){var n=this.vK(t.UK,t.xK);e&&t.dK&&(n.HK=t.qK,n.VK={jK:o.GK},t.QK.length&&(n.VK.KK=t.QK[0].KK),t.dK.send(n)),i&&t.gK&&("video"===t.kind&&t.QK&&s.version<15019&&t.QK.forEach(function(t){delete t.YK}),n.HK=t.QK,n.VK={jK:t.jK},t.qK.length&&(n.VK.KK=t.qK[0].KK),t.gK.zK(n))},window.RTCPeerConnection.prototype.setLocalDescription=function(t){var e,i,n=this;if("offer"===t.type)this._K&&(e=o.uK(t.sdp),i=e.shift(),e.forEach(function(t,e){var i=o.JK(t);n._K[e].UK=i}),this.oK=this._K,delete this._K);else if("answer"===t.type){e=o.uK(n.remoteDescription.sdp),i=e.shift();var r=o.WK(i,"a=ice-lite").length>0;e.forEach(function(t,e){var s=n.oK[e],a=s.lK,h=s.LK,u=s.MK,c=s.UK,f=s.xK;if("0"!==t.split("\n",1)[0].split(" ",2)[1]&&!s.XK){var l=o.ZK(t,i),p=o.$K(t,i);r&&(p.eY="server"),n.iK&&0!==e||(h.start(a,l,r?"controlling":"controlled"),u.start(p));var d=n.vK(c,f);n.BK(s,d.yK.length>0,!1)}})}switch(this.localDescription={type:t.type,sdp:t.sdp},t.type){case"offer":this.tY("have-local-offer");break;case"answer":this.tY("stable");break;default:throw new TypeError('unsupported type "'+t.type+'"')}var s=arguments.length>1&&"function"==typeof arguments[1];if(s){var a=arguments[1];window.setTimeout(function(){a(),"new"===n.iceGatheringState&&(n.iceGatheringState="gathering",n.hK()),n.cK()},0)}var h=Promise.resolve();return h.then(function(){s||("new"===n.iceGatheringState&&(n.iceGatheringState="gathering",n.hK()),window.setTimeout(n.cK.bind(n),500))}),h},window.RTCPeerConnection.prototype.setRemoteDescription=function(t){var e=this,i=new MediaStream,n=[],r=o.uK(t.sdp),a=r.shift(),h=o.WK(a,"a=ice-lite").length>0;switch(this.iK=o.WK(a,"a=group:BUNDLE ").length>0,r.forEach(function(r,u){var c=o.rY(r),f=c[0].substr(2).split(" "),l=f[0],p="0"===f[1],d=o.iY(r,a),v=o.WK(r,"a=mid:");if(v=v.length?v[0].substr(6):o.nY(),"application"===l&&"DTLS/SCTP"===f[2])return void(e.oK[u]={sY:v,XK:!0});var g,y,w,m,b,E,I,S,R,O,T,C,N=o.JK(r);p||(T=o.ZK(r,a),C=o.$K(r,a),C.eY="client"),S=o.oY(r);var k,A=o.WK(r,"a=ssrc:").map(function(t){return o.aY(t)}).filter(function(t){return"cname"===t.hY})[0];A&&(k=A.value);var P=o.WK(r,"a=end-of-candidates",a).length>0,_=o.WK(r,"a=candidate:").map(function(t){return o.QM(t)}).filter(function(t){return"1"===t.kK});if("offer"!==t.type||p)"answer"!==t.type||p||(g=e.oK[u],y=g.lK,w=g.LK,m=g.MK,b=g.dK,E=g.gK,I=g.qK,R=g.UK,e.oK[u].QK=S,e.oK[u].xK=N,e.oK[u].jK=k,(h||P)&&_.length&&w.cY(_),e.iK&&0!==u||(w.start(y,T,"controlling"),m.start(C)),e.BK(g,"sendrecv"===d||"recvonly"===d,"sendrecv"===d||"sendonly"===d),!E||"sendrecv"!==d&&"sendonly"!==d?delete g.gK:(O=E.track,n.push([O,E]),i.addTrack(O)));else{var D=e.iK&&u>0?{lK:e.oK[0].lK,LK:e.oK[0].LK,MK:e.oK[0].MK}:e.AK(v,u);if(!P||e.iK&&0!==u||D.LK.cY(_),R=RTCRtpReceiver.uY(l),s.version<15019&&(R.yK=R.yK.filter(function(t){return"rtx"!==t.name})),I=[{KK:1001*(2*u+2)}],"sendrecv"!==d&&"sendonly"!==d||(E=new RTCRtpReceiver(D.MK,l),O=E.track,n.push([O,E]),i.addTrack(O)),e.$Q.length>0&&e.$Q[0].getTracks().length>=u){var x;"audio"===l?x=e.$Q[0].getAudioTracks()[0]:"video"===l&&(x=e.$Q[0].getVideoTracks()[0]),x&&(s.version>=15019&&"video"===l&&(I[0].YK={KK:1001*(2*u+2)+1}),b=new RTCRtpSender(x,D.MK))}e.oK[u]={lK:D.lK,LK:D.LK,MK:D.MK,UK:R,xK:N,dK:b,gK:E,kind:l,sY:v,jK:k,qK:I,QK:S},e.BK(e.oK[u],!1,"sendrecv"===d||"sendonly"===d)}}),this.remoteDescription={type:t.type,sdp:t.sdp},t.type){case"offer":this.tY("have-remote-offer");break;case"answer":this.tY("stable");break;default:throw new TypeError('unsupported type "'+t.type+'"')}return i.getTracks().length&&(e.eK.push(i),window.setTimeout(function(){var t=new Event("addstream");t.stream=i,e.dispatchEvent(t),null!==e.onaddstream&&window.setTimeout(function(){e.onaddstream(t)},0),n.forEach(function(t){var n=t[0],r=t[1],o=new Event("track");o.track=n,o.receiver=r,o.ho=[i],e.dispatchEvent(o),null!==e.XQ&&window.setTimeout(function(){e.XQ(o)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.oK.forEach(function(t){t.LK&&t.LK.stop(),t.MK&&t.MK.stop(),t.dK&&t.dK.stop(),t.gK&&t.gK.stop()}),this.tY("closed")},window.RTCPeerConnection.prototype.tY=function(t){this.signalingState=t;var e=new Event("signalingstatechange");this.dispatchEvent(e),null!==this.onsignalingstatechange&&this.onsignalingstatechange(e)},window.RTCPeerConnection.prototype.fK=function(){var t=new Event("negotiationneeded");this.dispatchEvent(t),null!==this.onnegotiationneeded&&this.onnegotiationneeded(t)},window.RTCPeerConnection.prototype.DK=function(){var t,e=this,i={lY:0,closed:0,pY:0,fY:0,connected:0,dY:0,xn:0};if(this.oK.forEach(function(t){i[t.LK.state]++,i[t.MK.state]++}),i.connected+=i.dY,t="new",i.xn>0?t="failed":i.pY>0||i.fY>0?t="connecting":i.gY>0?t="disconnected":i.lY>0?t="new":(i.connected>0||i.dY>0)&&(t="connected"),t!==e.iceConnectionState){e.iceConnectionState=t;var n=new Event("iceconnectionstatechange");this.dispatchEvent(n),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(n)}},window.RTCPeerConnection.prototype.createOffer=function(){var t=this;if(this._K)throw new Error("createOffer called while there is a pending offer.");var e;1===arguments.length&&"function"!=typeof arguments[0]?e=arguments[0]:3===arguments.length&&(e=arguments[2]);var i=[],r=0,a=0;if(this.$Q.length&&(r=this.$Q[0].getAudioTracks().length,a=this.$Q[0].getVideoTracks().length),e){if(e.FQ||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.vY&&(r=e.vY),void 0!==e.yY&&(a=e.yY)}for(this.$Q.length&&this.$Q[0].getTracks().forEach(function(t){i.push({kind:t.kind,track:t,mY:"audio"===t.kind?r>0:a>0}),"audio"===t.kind?r--:"video"===t.kind&&a--});r>0||a>0;)r>0&&(i.push({kind:"audio",mY:!0}),r--),a>0&&(i.push({kind:"video",mY:!0}),a--);i=n(i);var h=o.EY(),u=[];i.forEach(function(e,i){var n=e.track,r=e.kind,a=o.nY(),h=t.iK&&i>0?{lK:u[0].lK,LK:u[0].LK,MK:u[0].MK}:t.AK(a,i),c=RTCRtpSender.uY(r);s.version<15019&&(c.yK=c.yK.filter(function(t){return"rtx"!==t.name})),c.yK.forEach(function(t){"H264"===t.name&&void 0===t.parameters.TY&&(t.parameters.TY="1")});var f,l,p=[{KK:1001*(2*i+1)}];n&&(s.version>=15019&&"video"===r&&(p[0].YK={KK:1001*(2*i+1)+1}),f=new RTCRtpSender(n,h.MK)),e.mY&&(l=new RTCRtpReceiver(h.MK,r)),u[i]={lK:h.lK,LK:h.LK,MK:h.MK,UK:c,xK:null,dK:f,gK:l,kind:r,sY:a,qK:p,QK:null}}),this.iK&&(h+="a=group:BUNDLE "+u.map(function(t){return t.sY}).join(" ")+"\r\n"),i.forEach(function(e,i){var n=u[i];h+=o.IY(n,n.UK,"offer",t.$Q[0])}),this._K=u;var c=new RTCSessionDescription({type:"offer",sdp:h});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var t=this,e=o.EY();this.iK&&(e+="a=group:BUNDLE "+this.oK.map(function(t){return t.sY}).join(" ")+"\r\n"),this.oK.forEach(function(i){if(i.XK)return void(e+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+i.sY+"\r\n");var n=t.vK(i.UK,i.xK);e+=o.IY(i,n,"answer",t.$Q[0])});var i=new RTCSessionDescription({type:"answer",sdp:e});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,i),Promise.resolve(i)},window.RTCPeerConnection.prototype.addIceCandidate=function(t){if(t){var e=t.sdpMLineIndex;if(t.sdpMid)for(var i=0;i<this.oK.length;i++)if(this.oK[i].sY===t.sdpMid){e=i;break}var n=this.oK[e];if(n){var r=Object.keys(t.candidate).length>0?o.QM(t.candidate):{};if("tcp"===r.protocol&&(0===r.port||9===r.port))return Promise.resolve();if("1"!==r.kK)return Promise.resolve();n.LK.wY(r);var s=o.uK(this.remoteDescription.sdp);s[e+1]+=(r.type?t.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=s.join("")}}else for(var a=0;a<this.oK.length;a++)if(this.oK[a].LK.wY({}),this.iK)return Promise.resolve();return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var t=[];this.oK.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(i){e[i]&&t.push(e[i].getStats())})});var e=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1],i=function(t){return{SY:"inbound-rtp",RY:"outbound-rtp",bY:"candidate-pair",_Q:"local-candidate",NQ:"remote-candidate"}[t.type]||t.type};return new Promise(function(n){var r=new Map;Promise.all(t).then(function(t){t.forEach(function(t){Object.keys(t).forEach(function(e){t[e].type=i(t[e]),r.set(e,t[e])})}),e&&window.setTimeout(e,0,r),n(r)})})}}};t.t={e_:a.e_,r_:i(124)}},function(t,e,i){"use strict";var n={};n.nY=function(){return Math.random().toString(36).substr(2,10)},n.GK=n.nY(),n.rY=function(t){return t.trim().split("\n").map(function(t){return t.trim()})},n.uK=function(t){return t.split("\nm=").map(function(t,e){return(e>0?"m="+t:t).trim()+"\r\n"})},n.WK=function(t,e){return n.rY(t).filter(function(t){return 0===t.indexOf(e)})},n.QM=function(t){var e;e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" ");for(var i={PY:e[0],kK:e[1],protocol:e[2].toLowerCase(),AY:parseInt(e[3],10),CY:e[4],port:parseInt(e[5],10),type:e[7]},n=8;n<e.length;n+=2)switch(e[n]){case"raddr":i.kY=e[n+1];break;case"rport":i.OY=parseInt(e[n+1],10);break;case"tcptype":i._Y=e[n+1];break;default:i[e[n]]=e[n+1]}return i},n.OK=function(t){var e=[];e.push(t.PY),e.push(t.kK),e.push(t.protocol.toUpperCase()),e.push(t.AY),e.push(t.CY),e.push(t.port);var i=t.type;return e.push("typ"),e.push(i),"host"!==i&&t.kY&&t.OY&&(e.push("raddr"),e.push(t.kY),e.push("rport"),e.push(t.OY)),t._Y&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t._Y)),"candidate:"+e.join(" ")},n.NY=function(t){return t.substr(14).split(" ")},n.DY=function(t){var e=t.substr(9).split(" "),i={TK:parseInt(e.shift(),10)};return e=e[0].split("/"),i.name=e[0],i.SK=parseInt(e[1],10),i.RK=3===e.length?parseInt(e[2],10):1,i},n.FY=function(t){var e=t.TK;return void 0!==t.IK&&(e=t.IK),"a=rtpmap:"+e+" "+t.name+"/"+t.SK+(1!==t.RK?"/"+t.RK:"")+"\r\n"},n.LY=function(t){var e=t.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},n.MY=function(t){return"a=extmap:"+(t.id||t.BY)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+"\r\n"},n.UY=function(t){for(var e,i={},n=t.substr(t.indexOf(" ")+1).split(";"),r=0;r<n.length;r++)e=n[r].trim().split("="),i[e[0].trim()]=e[1];return i},n.xY=function(t){var e="",i=t.TK;if(void 0!==t.IK&&(i=t.IK),t.parameters&&Object.keys(t.parameters).length){var n=[];Object.keys(t.parameters).forEach(function(e){n.push(e+"="+t.parameters[e])}),e+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return e},n.HY=function(t){var e=t.substr(t.indexOf(" ")+1).split(" ");return{type:e.shift(),PK:e.join(" ")}},n.qY=function(t){var e="",i=t.TK;return void 0!==t.IK&&(i=t.IK),t.bK&&t.bK.length&&t.bK.forEach(function(t){e+="a=rtcp-fb:"+i+" "+t.type+(t.PK&&t.PK.length?" "+t.PK:"")+"\r\n"}),e},n.aY=function(t){var e=t.indexOf(" "),i={KK:parseInt(t.substr(7,e-7),10)},n=t.indexOf(":",e);return n>-1?(i.hY=t.substr(e+1,n-e-1),i.value=t.substr(n+1)):i.hY=t.substr(e+1),i},n.VY=function(t){var e=n.WK(t,"a=mid:")[0];if(e)return e.substr(6)},n.jY=function(t){var e=t.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},n.$K=function(t,e){return{eY:"auto",GY:n.WK(t+e,"a=fingerprint:").map(n.jY)}},n.QY=function(t,e){var i="a=setup:"+e+"\r\n";return t.GY.forEach(function(t){i+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"}),i},n.ZK=function(t,e){var i=n.rY(t);return i=i.concat(n.rY(e)),{KY:i.filter(function(t){return 0===t.indexOf("a=ice-ufrag:")})[0].substr(12),password:i.filter(function(t){return 0===t.indexOf("a=ice-pwd:")})[0].substr(10)}},n.YY=function(t){return"a=ice-ufrag:"+t.KY+"\r\na=ice-pwd:"+t.password+"\r\n"},n.JK=function(t){for(var e={yK:[],mK:[],EK:[],VK:[]},i=n.rY(t),r=i[0].split(" "),o=3;o<r.length;o++){var s=r[o],a=n.WK(t,"a=rtpmap:"+s+" ")[0];if(a){var h=n.DY(a),u=n.WK(t,"a=fmtp:"+s+" ");switch(h.parameters=u.length?n.UY(u[0]):{},h.bK=n.WK(t,"a=rtcp-fb:"+s+" ").map(n.HY),e.yK.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":e.EK.push(h.name.toUpperCase())}}}return n.WK(t,"a=extmap:").forEach(function(t){e.mK.push(n.LY(t))}),e},n.zY=function(t,e){var i="";i+="m="+t+" ",i+=e.yK.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=e.yK.map(function(t){return void 0!==t.IK?t.IK:t.TK}).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",e.yK.forEach(function(t){i+=n.FY(t),i+=n.xY(t),i+=n.qY(t)});var r=0;return e.yK.forEach(function(t){t.JY>r&&(r=t.JY)}),r>0&&(i+="a=maxptime:"+r+"\r\n"),i+="a=rtcp-mux\r\n",e.mK.forEach(function(t){i+=n.MY(t)}),i},n.oY=function(t){var e,i=[],r=n.JK(t),o=-1!==r.EK.indexOf("RED"),s=-1!==r.EK.indexOf("ULPFEC"),a=n.WK(t,"a=ssrc:").map(function(t){return n.aY(t)}).filter(function(t){return"cname"===t.hY}),h=a.length>0&&a[0].KK,u=n.WK(t,"a=ssrc-group:FID").map(function(t){var e=t.split(" ");return e.shift(),e.map(function(t){return parseInt(t,10)})});u.length>0&&u[0].length>1&&u[0][0]===h&&(e=u[0][1]),r.yK.forEach(function(t){if("RTX"===t.name.toUpperCase()&&t.parameters.wK){var n={KK:h,WY:parseInt(t.parameters.wK,10),YK:{KK:e}};i.push(n),o&&(n=JSON.parse(JSON.stringify(n)),n.XY={KK:e,ZY:s?"red+ulpfec":"red"},i.push(n))}}),0===i.length&&h&&i.push({KK:h});var c=n.WK(t,"b=");return c.length&&(0===c[0].indexOf("b=TIAS:")?c=parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")&&(c=parseInt(c[0].substr(5),10)),i.forEach(function(t){t.$Y=c})),i},n.ez=function(t){var e={},i=n.WK(t,"a=ssrc:").map(function(t){return n.aY(t)}).filter(function(t){return"cname"===t.hY})[0];i&&(e.jK=i.value,e.KK=i.KK);var r=n.WK(t,"a=rtcp-rsize");e.tz=r.length>0,e.rz=0===r.length;var o=n.WK(t,"a=rtcp-mux");return e.iz=o.length>0,e},n.nz=function(t){var e,i=n.WK(t,"a=msid:");if(1===i.length)return e=i[0].substr(7).split(" "),{stream:e[0],track:e[1]};var r=n.WK(t,"a=ssrc:").map(function(t){return n.aY(t)}).filter(function(t){return"msid"===t.hY});return r.length>0?(e=r[0].value.split(" "),{stream:e[0],track:e[1]}):void 0},n.EY=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.IY=function(t,e,i,r){var o=n.zY(t.kind,e);if(o+=n.YY(t.lK.sz()),o+=n.QY(t.MK.sz(),"offer"===i?"actpass":"active"),o+="a=mid:"+t.sY+"\r\n",t.direction?o+="a="+t.direction+"\r\n":t.dK&&t.gK?o+="a=sendrecv\r\n":t.dK?o+="a=sendonly\r\n":t.gK?o+="a=recvonly\r\n":o+="a=inactive\r\n",t.dK){var s="msid:"+r.id+" "+t.dK.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+t.qK[0].KK+" "+s,t.qK[0].YK&&(o+="a=ssrc:"+t.qK[0].YK.KK+" "+s,o+="a=ssrc-group:FID "+t.qK[0].KK+" "+t.qK[0].YK.KK+"\r\n")}return o+="a=ssrc:"+t.qK[0].KK+" cname:"+n.GK+"\r\n",t.dK&&t.qK[0].YK&&(o+="a=ssrc:"+t.qK[0].YK.KK+" cname:"+n.GK+"\r\n"),o},n.iY=function(t,e){for(var i=n.rY(t),r=0;r<i.length;r++)switch(i[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[r].substr(2)}return e?n.iY(e):"sendrecv"},n.oz=function(t){return n.rY(t)[0].split(" ")[0].substr(2)},n.Ye=function(t){return"0"===t.split(" ",2)[1]},t.t=n},function(t,e,i){"use strict";t.t=function(){var t=function(t){return{name:{VQ:"NotAllowedError"}[t.name]||t.name,message:t.message,GQ:t.GQ,toString:function(){return this.name}}},e=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(i){return e(i).catch(function(e){return Promise.reject(t(e))})}}},function(t,e,i){"use strict";var n=i(17).Da,r={s_:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this.wQ},set:function(t){this.wQ&&(this.removeEventListener("track",this.wQ),this.removeEventListener("addstream",this.SQ)),this.addEventListener("track",this.wQ=t),this.addEventListener("addstream",this.SQ=function(t){t.stream.getTracks().forEach(function(e){var i=new Event("track");i.track=e,i.receiver={track:e},i.ho=[t.stream],this.dispatchEvent(i)}.bind(this))}.bind(this))}})},n_:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(t){this.mozSrcObject=t}}))},e_:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(t,e){if(n.version<38&&t&&t.iceServers){for(var i=[],r=0;r<t.iceServers.length;r++){var o=t.iceServers[r];if(o.hasOwnProperty("urls"))for(var s=0;s<o.JQ.length;s++){var a={url:o.JQ[s]};0===o.JQ[s].indexOf("turn")&&(a.username=o.username,a.az=o.az),i.push(a)}else i.push(t.iceServers[r])}t.iceServers=i}return new mozRTCPeerConnection(t,e)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.OQ&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.OQ}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var e=RTCPeerConnection.prototype[t];RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?RTCIceCandidate:RTCSessionDescription)(arguments[0]),e.apply(this,arguments)}});var t=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var e=function(t){var e=new Map;return Object.keys(t).forEach(function(i){e.set(i,t[i]),e[i]=t[i]}),e},i={SY:"inbound-rtp",RY:"outbound-rtp",bY:"candidate-pair",_Q:"local-candidate",NQ:"remote-candidate"},r=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(t,o,s){return r.apply(this,[t||null]).then(function(t){if(n.version<48&&(t=e(t)),n.version<53&&!o)try{t.forEach(function(t){t.type=i[t.type]||t.type})}catch(e){if("TypeError"!==e.name)throw e;t.forEach(function(e,n){t.set(n,Object.assign({},e,{type:i[e.type]||e.type}))})}return t}).then(o,s)}}}};t.t={s_:r.s_,n_:r.n_,e_:r.e_,r_:i(126)}},function(t,e,i){"use strict";var n=i(17).log,r=i(17).Da;t.t=function(){var t=function(t){return{name:{hz:"NotAllowedError",VQ:"NotAllowedError"}[t.name]||t.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[t.message]||t.message,GQ:t.GQ,toString:function(){return this.name+(this.message&&": ")+this.message}}},e=function(e,i,o){var s=function(t){if("object"!=typeof t||t.cz)return t;var e=[];return Object.keys(t).forEach(function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n=t[i]="object"==typeof t[i]?t[i]:{LQ:t[i]};if(void 0===n.min&&void 0===n.max&&void 0===n.MQ||e.push(i),void 0!==n.MQ&&("number"==typeof n.MQ?n.min=n.max=n.MQ:t[i]=n.MQ,delete n.MQ),void 0!==n.LQ){t.BQ=t.BQ||[];var r={};"number"==typeof n.LQ?r[i]={min:n.LQ,max:n.LQ}:r[i]=n.LQ,t.BQ.push(r),delete n.LQ,Object.keys(n).length||delete t[i]}}}),e.length&&(t.cz=e),t};return e=JSON.parse(JSON.stringify(e)),r.version<38&&(n("spec: "+JSON.stringify(e)),e.YE&&(e.YE=s(e.YE)),e.video&&(e.video=s(e.video)),n("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,i,function(e){o(t(e))})},i=function(t){return new Promise(function(i,n){e(t,i,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:i,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.HQ=navigator.mediaDevices.HQ||function(){return new Promise(function(t){t([{kind:"audioinput",qQ:"default",label:"",KQ:""},{kind:"videoinput",qQ:"default",label:"",KQ:""}])})},r.version<41){var o=navigator.mediaDevices.HQ.bind(navigator.mediaDevices);navigator.mediaDevices.HQ=function(){return o().then(void 0,function(t){if("NotFoundError"===t.name)return[];throw t})}}if(r.version<49){var s=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return s(e).then(function(t){if(e.YE&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(t){t.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(t(e))})}}navigator.getUserMedia=function(t,i,n){if(r.version<44)return e(t,i,n);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(t).then(i,n)}}},function(t,e,i){"use strict";var n={r_:function(){navigator.getUserMedia||(navigator.webkitGetUserMedia?navigator.getUserMedia=navigator.webkitGetUserMedia.bind(navigator):navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(navigator.getUserMedia=function(t,e,i){navigator.mediaDevices.getUserMedia(t).then(e,i)}.bind(navigator)))}};t.t={r_:n.r_}},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(20);!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(r.gn.ou.au);t.a_=e}(t.ou||(t.ou={}))}(e.gn||(e.gn={}))},function(t,e,i){"use strict";var n=function(){function t(t,e,i){this.isLive=t,this.protocol=e,this.SB=i}return t.prototype.ZF=function(){var t=new hive.snapshots.StreamInfo;return t.streamType=this.isLive?StreamType.LIVE:StreamType.xG,t.streamProtocol=this.protocol,t.url=this.SB,t},t}();e.w_=n},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(2),o=i(52),s=i(0),a=i(131),h=i(68),u=i(19),c=i(53),f=i(195),l=i(26),p=i(7),d=i(69),v=i(4),g=i(41),y=f.gn.ou,w=l.gn.HiveTechError,m=l.gn.cE,b=function(t){function e(i,n,r){var o=t.call(this,i,n)||this;return o.options_=new y.uz,void 0!=n[e.c_]&&p.vs(n[e.c_],o.options_),o.Vj=r,o}return n(e,t),e.prototype.Fn=function(){return e.c_},e.prototype.getVersion=function(){return null},e.prototype.u_=function(){return!0},e.prototype.l_=function(){return h.wI.II?this.lz()&&this.VM()?r.resolve(!0):r.reject(new w(m.nE,"WebRTC DataChannels not supported by browser")):r.reject(new w(m.nE,"Not included in the page"))},e.prototype.initSession=function(t,e){var i=this;return this.l_().then(function(){var n=e.ticket;i.T_();var r=n.LA();0===r.indexOf("//")&&(r=location.protocol+r);var o=i.p_(t,n,r,e);return d.vn.bn(i,o.id),d.vn.XD(i.h_,o.id),p.HiveRequestFactory.bn(o.id,i.Fn()),window&&window.pz&&window.pz(i.h_.Hj()>g.SA.vA.info,o.id),o})},e.prototype.ci=function(t,e){var i=e.manifest.toLowerCase(),n=t.toLowerCase(),r=i.indexOf(".ism/manifest");if(r>-1){var o=i.substring(0,r);if(n.indexOf(o)>-1)return n.indexOf(".ism/manifest(format=mpd-time-csf)")>-1?this.fz?(e.ticket.SourceURL=t,!0):this.dz(e,"The player does not use HiveRequest, downgrading to StatsJS"):this.dz(e,"Protocol not supported by HiveJS tech, downgrading to StatsJS")}else if(n===i)return!!this.fz||this.dz(e,"The player does not use HiveRequest, downgrading to StatsJS");return!1},e.prototype.Nn=function(e,i){window&&window.gz&&window.gz(),t.prototype.Nn.call(this,e,i);var n=h.wI.II();n&&n.vz(e.id).On(u._c.IDLE),i&&(p.HiveRequestFactory.Rn(e.id),n.yz())},e.prototype.dz=function(t,e){return t.tech=this.Vj,p.HiveRequestFactory.bn(t.id,c.StatsJS.c_),this.fz&&this.fz.resolve(),this.fz=void 0,this.h_.te().warn("[HiveJS] "+e),this.onError(new w(m.oE,e)),window&&window.gz&&window.gz(),!0},e.prototype.$D=function(t){this.fz=t},e.prototype.onActiveSession=function(t){var e=this;s.Framework.J().apply(new a.mz(!0));var i=h.wI.II();if(i.start(t.Cn,!1).then(function(n){if(e.T_(),e.I_=t.Cn,e.I_.Th(h.wI.Jc(),h.wI.getVersion()),e.I_.Fc.init(e.I_.Dc,t.ticket.sessionId),t.authenticationToken){var r=i.vz(t.ticket.sessionId);r&&r.Tz.Ez.kN(t.authenticationToken)}e.fz&&i.TI(e.fz,t.Cn.ticket.sessionId),e.I_.tc.Tn(t.ticket.sessionId,e.h_.b_(),200);var o=e.h_.P_();o&&o.length>0&&e.I_.tc.Dh(o),e.h_.wh(e.I_)}),void 0!=this.options().onActiveSession)try{this.options().onActiveSession(t.Dn())}catch(t){v.ErrorMonitor.gi().di("exception in user-defined onActiveSession callback","[HiveJS]",t)}},e.prototype.On=function(t,e){},e.prototype.p_=function(t,e,i,n){var r=new p.Bn(t,e,i,n);return r.O_=!0,r.id=r.ticket.sessionId,r},e.prototype.m_=function(){},e.prototype.lz=function(){return"safari"!=o.Da.Oa},e.prototype.VM=function(){try{return null!=o.Ca&&null!=o.t_&&"function"==typeof new RTCPeerConnection(null,null).createDataChannel}catch(t){return!1}},e}(c.StatsJS);b.c_="HiveJS",e.HiveJS=b},function(t,e,i){"use strict";var n=i(37),r=i(0),o=i(41),s=i(9),a=i(19),h=i(72),u=i(73),c=i(75),f=i(71),l=i(18),p=i(15),d=i(132),v=i(135),g=i(136),y=i(85),w=i(152),m=i(153),b=i(154),E=i(155),I=i(156),S=i(92),R=i(169),O=i(170),T=i(171),C=i(45),N=i(23),k=i(172),A=i(176),P=i(177),_=i(178),D=i(179),x=i(181),M=i(182),U=i(183),L=i(184),F=i(76),j=i(185),H=i(186),B=i(188),V=i(5),q=i(189),K=V.Rt.Pi,Q=V.Rt.Ai,z=V.Rt.Ci,G=V.Rt.Oi;if(Q)var J=i(190).Iz,X=i(192).wz;if(z)var W=i(89).cH;if(K)var Y=i(193).Sz;if(G)var $=i(77).vM;else var Z=i(79).zM;var tt=function(){function t(t){this.Rz=!1,t&&(this.Rz=t)}return t.prototype.apply=function(t){this.Rz?G&&t.bind(new n.QP(s.Qs.Us,$,n.KP.ZP)):(t.bind(new n.QP(s.Qs.qs,a.Zc,n.KP.ZP)),t.bind(new n.QP(s.Qs.H,h.OL,n.KP.ZP)),t.bind(new n.QP(s.Qs.Bs,u.BL,n.KP.ZP)),t.bind(new n.QP(s.Qs.D,c.oM,n.KP.ZP)),t.bind(new n.QP(r.Framework.q.I,o.SA.wA,n.KP.ZP)),t.bind(new n.QP(s.Qs.Ms,f.Stats.vc,n.KP.sA)),t.bind(new n.QP(s.Qs.js,l.kc.$h,n.KP.sA)),t.bind(new n.QP(s.Qs.Gs,l.kc.vc,n.KP.sA)),G?t.bind(new n.QP(s.Qs.Us,$,n.KP.ZP)):t.bind(new n.QP(s.Qs.Us,Z,n.KP.ZP))),t.bind(new n.QP(p.Pa.Wo,q.bz,n.KP.sA)),t.bind(new n.QP(s.Qs.xs,F.uM,n.KP.ZP)),t.bind(new n.QP(p.Pa.Ia,U.Pz,n.KP.ZP)),t.bind(new n.QP(p.Pa.pa,d.Az,n.KP.ZP)),t.bind(new n.QP(p.Pa.ha,v.Cz,n.KP.sA)),t.bind(new n.QP(p.Pa.fa,g.kz,n.KP.sA)),t.bind(new n.QP(p.Pa.ia,w.Sr,n.KP.sA)),t.bind(new n.QP(p.Pa.na,y.$U,n.KP.sA)),K&&t.bind(new n.QP(p.Pa.sa,Y,n.KP.sA)),t.bind(new n.QP(p.Pa.ua,m.Oz,n.KP.sA)),"undefined"!=typeof HiveOriginalXMLHttpRequest?t.bind(new n.QP(r.Framework.q.B,HiveOriginalXMLHttpRequest)):t.bind(new n.QP(r.Framework.q.B,XMLHttpRequest)),t.bind(new n.QP(p.Pa.Ta,M._z,n.KP.ZP)),t.bind(new n.QP(p.Pa.ya,b.Nz,n.KP.sA)),t.bind(new n.QP(r.Framework.q.F,k.Dz,n.KP.ZP)),t.bind(new n.QP(p.Pa.U,A.Fz,n.KP.ZP)),t.bind(new n.QP(p.Pa.aa,L.Lz,n.KP.sA)),t.bind(new n.QP(p.Pa.oa,E.Mz,n.KP.sA)),t.bind(new n.QP(p.Pa.Xo,I.Qr,n.KP.sA)),t.bind(new n.QP(p.Pa.Zo,S.NV,n.KP.sA)),t.bind(new n.QP(p.Pa.$o,H.Bz,n.KP.sA)),t.bind(new n.QP(p.Pa.ea,H.Uz,n.KP.sA)),t.bind(new n.QP(p.Pa.ta,B.xz,n.KP.sA)),t.bind(new n.QP(p.Pa.ra,B.Hz,n.KP.sA)),t.bind(new n.QP(p.Pa.ba,j.Vt,n.KP.sA)),t.bind(new n.QP(p.Pa.la,R.qz,n.KP.sA)),t.bind(new n.QP(p.Pa.ca,O.Vz,n.KP.sA)),t.bind(new n.QP(p.Pa.ma,T.jz,n.KP.sA)),t.bind(new n.QP(p.Pa.va,D.Gz,n.KP.sA)),t.bind(new n.QP(p.Pa.da,C.Lk,n.KP.sA)),t.bind(new n.QP(p.Pa.ga,x.Qz,n.KP.sA)),t.bind(new n.QP(r.Framework.q.L,N.mu.Mr,n.KP.sA)),t.bind(new n.QP(p.Pa.Ea,P.mr,n.KP.sA)),Q&&(t.bind(new n.QP(p.Pa.Sa,J,n.KP.sA)),t.bind(new n.QP(p.Pa.wa,X,n.KP.sA))),z&&t.bind(new n.QP(p.Pa.Ci,W,n.KP.sA)),t.bind(new n.QP(p.Pa.Ra,_.Kz,n.KP.sA))},t}();e.mz=tt},function(t,e,i){"use strict";var n=i(2),r=i(25),o=r.sl,s=i(0),a=i(40),h=i(15),u=i(3),c=i(19),f=i(1),l=i(133),p=i(43),d=i(9),v=i(134),g=i(5),y=i(4),w=g.Rt.Ai,m=g.Rt.Ci,b=g.Rt.ki,E=function(){function t(t){this.state=c._c.Oc,this.requestTimeout=-1,this.te=s.Framework.resolve(s.Framework.q.I).log(t.ticket.sessionId),this.mn="S["+t.ticket.sessionId+"]",this.Hl=s.Framework.resolve(s.Framework.q.F),this.sessionId=t.ticket.sessionId,this.Cn=t,this.TC=s.Framework.resolve(h.Pa.ha),this.Uw=s.Framework.resolve(h.Pa.ia),this.yx=s.Framework.resolve(h.Pa.Xo),this.Yz=s.Framework.resolve(h.Pa.ua),this.EC=s.Framework.resolve(h.Pa.oa),this.SC=s.Framework.resolve(h.Pa.Zo),this.zz=s.Framework.resolve(h.Pa.ma),this.Jz=s.Framework.resolve(h.Pa.ca),this.Wz=s.Framework.resolve(h.Pa.ya),this.IC=s.Framework.resolve(h.Pa.la),this.Tz=s.Framework.resolve(h.Pa.fa),this.H_=s.Framework.resolve(h.Pa.Ea),this.wC=s.Framework.resolve(h.Pa.Ra),this.V_=s.Framework.resolve(h.Pa.da),this.RC=s.Framework.resolve(h.Pa.ga),this.bC=s.Framework.resolve(h.Pa.aa),this.lq=s.Framework.resolve(h.Pa.ba),this.x_=s.Framework.resolve(h.Pa.Wo),(w||s.Framework.S()&&p.iC.eC)&&(this.Xz=s.Framework.resolve(h.Pa.wa),this.Zz=s.Framework.resolve(h.Pa.Sa)),(m||s.Framework.S()&&p.iC.tC)&&(this.$z=s.Framework.resolve(h.Pa.Ci)),this.swarmId=this.eJ(t.ticket.qh()),this.x_.init(this),this.Yz.init(this),this.bC.init(this),this.lq.init(this),this.SC.init(this),this.Jz.init(this),this.Wz.init(this),this.IC.init(this),this.Tz.init(this),this.TC.init(this),this.yx.init(this),this.V_.init(this),this.RC.init(this),this.H_.init(this),(m||s.Framework.S()&&p.iC.tC)&&this.$z.init(this),(w||s.Framework.S()&&p.iC.eC)&&this.Zz.init(this)}return t.prototype.init=function(t,e){b?this.tJ(!1):this.tJ(!0),this.wC.uV(this.Cn.identity.Yc()),this.Uw.init(u.ni.Sr.Er,u.ni.Sr.Tr);var i=this.Tz.PC(t,e);this.wC.rJ(this.Tz.Ez.K_());var n=new l.iJ(i);this.Cn.R_=n,this.Cn.Dc.R_=n,this.Wz.start(this.Tz,this.yx),(w||s.Framework.S()&&p.iC.eC)&&this.Zz.nJ(this.yx);var r=[this.yx,this.SC,this.Wz,this.Cn.Dc,this.Cn.tc,this.lq];(w||s.Framework.S()&&p.iC.eC)&&r.push(this.Zz),(m||s.Framework.S()&&p.iC.tC)&&r.push(this.$z),(o=this.Hl).start.apply(o,[t.sessionId].concat(r)),this.Cn.Dc.TL(this.SC),this.Cn.Dc.QF(this.wC),this.wC.sJ(t);var o},t.prototype.tJ=function(t){t&&"undefined"!=typeof navigator&&navigator.hardwareConcurrency?(this.wC.oJ(navigator.hardwareConcurrency),this.wC.aJ(navigator.hardwareConcurrency)):(this.wC.oJ(1),this.wC.aJ(1)),this.te.debug(this.mn+"My score "+this.wC.oH())},t.prototype.eJ=function(t){return o.Vd(t).toString(o.Ed.Td)},t.prototype.TI=function(t){this.hJ(),this.TC.TI(t)},t.prototype.On=function(t){if(this.state!=t)switch(this.te.info("Switching state "+c._c[this.state]+" -> "+c._c[t]),this.state=t,this.state){case c._c.IDLE:this.yx.stop(),this.SC.stop(),this.RC.cJ(),this.RC.uJ(),this.Wz.lJ(),this.Zz&&this.Zz.pJ(),this.Cn.On(c._c.IDLE),this.Uw.XU(),this.bC.fJ(),this.TC.dJ(),this.x_.gJ();break;case c._c.Oc:this.yx.start(),this.SC.start(this.Tz.Ez),this.RC.vJ(),this.Wz.yJ(),this.Zz&&this.Zz.mJ(),this.Cn.On(c._c.Oc),this.x_.EJ()}},t.prototype.hJ=function(){var t=this;try{s.Framework.clearTimeout(this.requestTimeout),this.On(c._c.Oc),this.requestTimeout=s.Framework.setTimeout(function(){t.On(c._c.IDLE)},3e4)}catch(t){y.ErrorMonitor.gi().di("Error on request timeout",this.mn,t)}},t}();e.TJ=E;var I=function(){function t(){this.Ul=new a.Counter,this.IJ=!1,this.Hc=new f,this.wJ=new f,this.SJ=!1,this.RJ=!1,this.bJ=s.Framework.resolve(h.Pa.Ta),this.PJ=s.Framework.resolve(h.Pa.Ia),this.dh=s.Framework.resolve(d.Qs.Us),this.PJ.init(this)}return t.prototype.start=function(t,e){this.te=s.Framework.resolve(s.Framework.q.I).log(t.ticket.sessionId);var i=t.ticket,r=i.sessionId;if(this.Hc.has(r))this.te.warn("SESSION ALREADY ACTIVE "+r);else{v.AJ.mh(t.Lc.client);var o=new E(t);o.init(i,e),this.dh.Vh().then(function(t){var e=t.Qh(),i=e.Cs();i&&o.wC.wM(i)}).done(),t.Dc.EL(this.dh),this.te.info("PEER CONTEXT STARTED"),this.Hc.set(r,o),this.wJ.set(o.swarmId,r)}return 1!=this.Hc.length&&!this.RJ||s.Framework.S()||(this.bJ.init(),this.RJ=!1),n.resolve(i.SourceURL)},t.prototype.yz=function(){this.RJ=!0},t.prototype.Cl=function(t){if(this.wJ.has(t)){var e=this.wJ.get(t);return this.Hc.get(e)}return null},t.prototype.vz=function(t){return this.Hc.get(t)},t.prototype.CJ=function(t){return this.Hc.has(t)?this.Hc.get(t).TC:null},t.prototype.TI=function(t,e){this.vz(e).TI(t)},t.prototype.On=function(t,e){s.Framework.S()&&this.vz(t).On(e)},t.prototype.abort=function(t,e){this.CJ(e).abort(t)},t}();e.Az=I},function(t,e,i){"use strict";var n=function(){function t(t){this.AC=t}return t.prototype.ZF=function(){var t=new hive.snapshots.StreamInfo;return t.streamType=this.AC.isLive()?StreamType.LIVE:StreamType.xG,t.streamProtocol=this.AC.S_(),t.url=this.AC.CN(),t},t}();e.iJ=n},function(t,e,i){"use strict";var n=i(18),r=n.kc.ah,o=i(0),s=i(21),a=function(){function t(){}return t.mh=function(t){this.client=t},t.kJ=function(t,e,i,n,a){var h=new r;h.app=t,h.guid=n,h.createdAt=o.Framework.time(),h.name=i,h.tags=e,h.data=JSON.parse(a);var u=new s.pc(Services.fc,2,JSON.stringify(h));this.client&&this.client.lc().send(u)},t}();e.AJ=a},function(t,e,i){"use strict";var n=i(1),r=i(2),o=i(22),s=i(6),a=i(3),h=i(0),u=i(10),c=i(15),f=i(40),l=i(4),p=function(){function t(){this.OJ=new n,this._J=!1,this.NJ=0,this.DJ=5,this.PJ=h.Framework.resolve(c.Pa.Ia),this.FJ=new f.gA}return t.prototype.init=function(t){this.te=h.Framework.resolve(h.Framework.q.I).log(t.sessionId),this.mn="S["+t.sessionId+"]",this.EC=t.EC,this.Uw=t.Uw,this.SC=t.SC,this.Dc=t.Cn.Dc,this.sessionId=t.Cn.ticket.sessionId,this.Yz=t.Yz,this.IC=t.IC,this.LJ=t.Tz,this.wC=t.wC,this.bC=t.bC,this.x_=t.x_,this.Dc.jF(this.FJ)},t.prototype.TI=function(t){try{var e=t.url;this.te.info("HIVE REQ "+e),t.Du=h.Framework.time();var i=this.LJ.MJ(t),n=i.bN(t.url);this.x_.BJ(n),this.ik(t,n,i,o.Tu.du)}catch(t){l.ErrorMonitor.gi().di("PLAYER REQUEST ERROR",this.mn,t)}},t.prototype.ik=function(t,e,i,n){var r=this;if(e.$u()){if(e.Yu()==u.Ws.Ys){var a=i.Y_(e,n);if(a.oN)return this.te.debug("DO NOT CONTINUE WITH THE REQUEST "+e.zu()+". ALREADY REQUESTED  "+a.eN+" PENDING REQUEST "+a.sN),null;if(a.sN&&n==o.Tu.du){var h=this.UJ(t,e,i,n);return h.length>0?(h.forEach(function(e){var i=r.OJ.get(e);r.OJ.set(t.id,i),r.OJ.delete(e)}),null):(this.te.info("PREFETCH UPGRADE FAILED. THIS SHOULD NOT HAPPEN. CHECK FOR MULTIPLE PLAYER REQUESTS FOR THE SAME FRAGMENT"),this.xJ(t,e,i,n))}return this.xJ(t,e,i,n)}return this.xJ(t,e,i,n)}var c=s.fn.xi.next(),f=new o.nl(t,c,n,e,i);return this.OJ.set(t.id,f),f.type=o.Tu.gu,this.HJ(f),f},t.prototype.xJ=function(t,e,i,n){var r=this,a=s.fn.xi.next(),h=new o.nl(t,a,n,e,i);if(this.OJ.set(t.id,h),e.Yu()==u.Ws.Ys&&(i.hN(h),n!==o.Tu.vu&&n!==o.Tu.Eu)){var c=e.bitrate,f=this.wC.qJ();0!=c&&(this.wC.VJ(c),c!=f&&(this._J=!0,this.NJ=0),this._J&&this.NJ++,this.NJ==this.DJ&&(this.SC.EV(),this._J=!1,this.NJ=0))}return this.jJ(e.zu()).then(function(t){null!=t?(r.x_.GJ(h,t),r.QJ(h,t),i.cN(h.zu(),h.Ju()),i.fN(e.bitrate)):(r.KJ(e,h),h.Yu()==u.Ws.Ys&&(i.lN(h),h.type==o.Tu.du&&r.FJ.add(0)))}),h},t.prototype.UJ=function(t,e,i,n){return i.aN(t,e,n)},t.prototype.jJ=function(t){return this.Uw.get(t)},t.prototype.KJ=function(t,e){this.EC.contains(t.zu())?(this.te.debug("OBJ IDX CONTAINS "+e.zu()),e.Ku()==o.Tu.vu&&(e.type=o.Tu.Eu),this.Iu(e)):e.Ku()!=o.Tu.Eu?this.HJ(e):(l.ErrorMonitor.gi().di("P2P PREFETCH FAILED BECAUSE OBJECT INDEX DOES NOT CONTAIN REQUEST ENTITY",this.mn,{mR:e.zu()}),e.Gu.cN(e.zu(),e.Ju()))},t.prototype.dJ=function(){var t=this;this.OJ.forEach(function(e){return t.abort(e.Vu)})},t.prototype.abort=function(t){if(this.OJ.has(t.id)){var e=this.OJ.get(t.id),i=e.Ju();this.te.debug("REQUEST "+i+" ABORTED "),this.IC.Qe(i)?this.IC.YJ(i):this.Yz.Qe(i)&&this.Yz.YJ(i),this.OJ.delete(t.id)}},t.prototype.Iu=function(t){t.type==o.Tu.du&&(t.type=o.Tu.mu),t.type==o.Tu.Eu&&(t.Uu=!0),this.IC.TI(t)},t.prototype.zJ=function(t){if(0!=t.qu&&(t.Mu.Ru=t.qu,this.te.info("ALREADY DOWNLOADED "+t.Mu.Ru+" BYTES"),t.Mu.bu=t.qu),!a.ni.j._r&&t.qu&&(t.Mu.Ru=0),this.x_.JJ(t),t.type!=o.Tu.Eu)t.type=o.Tu.yu,this.HJ(t);else if(t.Yu()==u.Ws.Ys){t.Gu.uN(t.zu()),t.Gu.cN(t.zu(),t.Ju());var e=t.Qu;e.bitrate&&t.Gu.fN(e.bitrate)}},t.prototype.WJ=function(t){var e=this;this.te.info("SUCCESS FROM P2P FOR "+t.Wu()+" [REQ "+t.ju+"] ["+o.Tu[t.type]+"] AFTER "+t.rl()+" [bw:"+t.il().Xi()+"]"),this.XJ(t),this.ZJ(t,this.z_(t.type)),this.bC.$J(t);var i=this.Yz.eW().zi();this.x_.tW(t,i),this.rW(t).then(function(){t.Gu.AN(t),e.iW()}).finally(function(){e.z_(t.type)&&e.nW(t),e.OJ.delete(t.Vu.id)})},t.prototype.HJ=function(t){this.x_.sW(t),this.Yz.TI(t)},t.prototype.oW=function(t){this.iW();var e=this.Yz.eW().zi();this.x_.aW(t,e),t.Yu()==u.Ws.Ys&&(t.Gu.uN(t.zu()),t.Gu.cN(t.zu(),t.Ju())),this.hW(t)},t.prototype.cW=function(t){var e=this;this.XJ(t),this.ZJ(t,this.z_(t.type)),t.type==o.Tu.yu&&this.te.debug("CDN COMPENSATION TIME "+(t.Mu.Nu-t.Vu.Du)+" / "+(t.Mu.Nu-t.Mu.ku)+" P2P TIME "+(t.Mu._u-t.Mu.Ou)),-1==[u.Ws.zs,u.Ws.Js].indexOf(t.Yu())&&this.bC.$J(t);var i=this.Yz.eW().zi();this.x_.uW(t,i),this.rW(t).then(function(){t.Yu()==u.Ws.zs&&t.Gu.PN(t),-1==[u.Ws.zs,u.Ws.Js].indexOf(t.Yu())&&t.Gu.AN(t),e.iW()}).catch(function(t){e.te.error(t)}).finally(function(){e.z_(t.type)&&e.nW(t),e.OJ.delete(t.Vu.id)})},t.prototype.XJ=function(t){t.type==o.Tu.Eu&&(t.Mu.p2pAgenTrafficSuccessQt=t.Mu.Ru),t.type==o.Tu.vu&&(t.Mu.Cu=t.Mu.Au,t.Bu&&(t.Mu.srcOtherRespQt=t.Mu.Au)),t.Mu.Su=t.Mu.Au+t.Mu.Ru,t.Vu.total=t.Mu.Su},t.prototype.ZJ=function(t,e){if(this.lW(t),e){var i=s.fn.createEvent(ProgressEvent,"progress",{lengthComputable:!0,total:t.Mu.Su,loaded:t.Mu.Su,currentTarget:t.Vu});t.Vu.dispatchEvent(i),t.Qu.wR()||(t.Vu.response=t.RB,t.Vu.responseText=t.RB)}},t.prototype.nW=function(t){var e=t.Vu;this.te.info("RESPOND TO THE PLAYER "+t.zu()+" SIZE "+(h.Framework.S()?e.total:t.Hu.byteLength)),e.status=200,e.readyState=4,"string"==typeof e.response&&"arraybuffer"===e.responseType&&(e.response=s.fn.pn(e.response)),"text"!=e.responseType&&""!=e.responseType&&delete e.responseText,t.Qu.wR()&&(e.response=h.Framework.S()?null:s.fn.en(t.Hu));var i=s.fn.createEvent(Event,"readystatechange",{currentTarget:e}),n=s.fn.createEvent(ProgressEvent,"load",{bubbles:!1,cancelable:!1,lengthComputable:!1,total:t.Qu.wR()?t.Hu.byteLength:t.RB.length,currentTarget:e}),r=s.fn.createEvent(ProgressEvent,"loadend",{bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:e.total,total:0,currentTarget:e});e.dispatchEvent(i),e.dispatchEvent(n),e.dispatchEvent(r)},t.prototype.hW=function(t){this.OJ.delete(t.Vu.id);var e=t.Vu,i={bubbles:!1,cancelable:!1,lengthComputable:!1,loaded:e.total,total:0,currentTarget:e};t.xhr.status&&t.xhr.status>0?(e.status=t.xhr.status,e.xu=t.xu):e.status=404,e.readyState=4,e.dispatchEvent(s.fn.createEvent(Event,"readystatechange",i)),e.dispatchEvent(s.fn.createEvent(ProgressEvent,"load",i)),e.dispatchEvent(s.fn.createEvent(ProgressEvent,"loadend",i))},t.prototype.rW=function(t){var e=this;return t.Qu.$u()?this.Uw.put(t).then(function(i){i&&e.SC.pW(t.Qu,t.Mu.Su,t.KU)}):r.resolve(!0)},t.prototype.QJ=function(t,e){var i=this;t.Hu=e.data,t.xu=e.headers,t.YU=e.YU,t.Mu=e.Mu;var n=t.Gu.RN().sU(e.length);this.te.info("SCHEDULE DELIVERY OF "+t.zu()+" IN "+n+" SIZE "+(h.Framework.S()?e.length:t.Hu.byteLength)+" BYTES"),h.Framework.setTimeout(function(){i.fW(t)},n)},t.prototype.fW=function(t){this.te.debug("DELIVERY OF "+t.zu()),this.ZJ(t,!0),this.OJ.delete(t.Vu.id);var e=t.Vu.Du-t.Mu.Nu;this.te.info("FRAGMENT PREFETCHED "+e+" MSECS BEFORE PLAYER REQUEST"),e>0&&t.Yu()==u.Ws.Ys&&this.FJ.add(e);var i=0;i=t.Mu.Ou>0?t.Vu.Du-t.Mu.Ou:t.Vu.Du-t.Mu._u,this.te.info("FRAGMENT REQUESTED "+i+" MSECS BEFORE PLAYER REQUEST"),this.nW(t)},t.prototype.z_=function(t){return t!=o.Tu.Eu&&t!=o.Tu.vu},t.prototype.lW=function(t){if(t.type!==o.Tu.yu)t.xu=t.Vu.xu=t.xu;else{var e="\nContent-Range: bytes=0-"+(t.size-1)+"/"+t.size+"\n";e+="Content-Length: "+t.size+"\n",t.xu=t.Vu.xu=e}null!=t.xu&&-1!=t.xu.indexOf("Access-Control-Allow-Origin")||(t.xu+="\nAccess-Control-Allow-Origin:*")},t.prototype.iW=function(){h.Framework.S()||this.PJ.render()},t}();e.Cz=p},function(t,e,i){"use strict";var n=i(80),r=i(84),o=i(0),s=function(){function t(){this.SC=null,this.Hl=o.Framework.resolve(o.Framework.q.F)}return t.prototype.init=function(t){this.te=o.Framework.resolve(o.Framework.q.I).log(t.sessionId),this.vx=t,this.SC=t.SC},t.prototype.PC=function(t,e){var i=null,o=t._A();return r.OU.cB(o)?this.Ez=i=new r.OU.BU(t,e,this.vx):n.yB.cB(o)?this.Ez=i=new n.yB.LB(t,this.vx):this.te.warn("COULD NOT FIND A CONTEXT FOR "+o),null!=i&&this.dW(this.Ez),i},t.prototype.dW=function(t){var e=this;null!=this.SC?this.SC.stop().then(function(i){e.SC.start(t)}):this.SC.start(t)},t.prototype.MJ=function(t){if(null==this.Ez)this.te.warn("FIRST REQUEST, COULD NOT FIND RIGHT CONTEXT "+t.url);else if(!this.Ez.SN(t))return this.te.warn("REQUEST DOES NOT BELONG TO THE CURRENT CONTEXT "+t.url),null;return this.Ez},t}();e.kz=s},function(t,e,i){"use strict";function n(t,e,i,r){if(!(this instanceof n))return new n(t,e,i,r);this.ce=e||Object.ae,this.yo=i||Object.mo,this.le=r||Function.he,this.root=null,this.length=0,this.addEach(t)}function r(t){this.value=t,this.left=null,this.right=null,this.length=1}function o(t,e,i){if(this.set=t,this.Mk=null,this.end=i,e){var n=this.set.gW(e);n&&(this.set.vW(n.value),this.Mk=n.yW())}}t.t=n;var s=(i(12),i(13)),a=i(36),h=i(14),u=i(35),c=i(64);n.mW=n,Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,a.prototype),Object.addEach(n.prototype,h.prototype),Object.addEach(n.prototype,u.prototype),n.prototype.NN=!0,n.prototype.de=function(t){return new this.constructor(t,this.ce,this.yo,this.le)},n.prototype.has=function(t,e){if(e)throw new Error("SortedSet#has does not support second argument: equals");return!!this.root&&(this.vW(t),this.ce(t,this.root.value))},n.prototype.get=function(t,e){if(e)throw new Error("SortedSet#get does not support second argument: equals");return this.root&&(this.vW(t),this.ce(t,this.root.value))?this.root.value:this.le(t)},n.prototype.add=function(t){var e=new this.Node(t);if(!this.root)return this.qk&&this.UP([t],[],0),this.root=e,this.length++,this.qk&&this.LP([t],[],0),!0;if(this.vW(t),!this.ce(t,this.root.value)){var i=this.yo(t,this.root.value);if(0===i)throw new Error("SortedSet cannot contain incomparable but inequal values: "+t+" and "+this.root.value);return this.qk&&this.UP([t],[],this.root.index),i<0?(e.right=this.root,e.left=this.root.left,this.root.left=null,this.root.EW()):(e.left=this.root,e.right=this.root.right,this.root.right=null,this.root.EW()),e.EW(),this.root=e,this.length++,this.qk&&this.LP([t],[],this.root.index),!0}return!1},n.prototype.delete=function(t,e){if(e)throw new Error("SortedSet#delete does not support second argument: equals");if(this.root&&(this.vW(t),this.ce(t,this.root.value))){var i=this.root.index;if(this.qk&&this.UP([],[t],i),this.root.left){var n=this.root.right;this.root=this.root.left,this.vW(t),this.root.right=n}else this.root=this.root.right;return this.length--,this.root&&this.root.EW(),this.qk&&this.LP([],[t],i),!0}return!1},n.prototype.indexOf=function(t,e){if(e)throw new Error("SortedSet#indexOf does not support second argument: startIndex");return this.root&&(this.vW(t),this.ce(t,this.root.value))?this.root.index:-1},n.prototype.find=function(t,e,i){if(e)throw new Error("SortedSet#find does not support second argument: equals");if(i)throw new Error("SortedSet#find does not support third argument: index");if(this.root&&(this.vW(t),this.ce(t,this.root.value)))return this.root},n.prototype.TW=function(t){if(this.root){for(t=t||this.root;t.right;)t=t.right;return t}},n.prototype.IW=function(t){if(this.root){for(t=t||this.root;t.left;)t=t.left;return t}},n.prototype.wW=function(t){if(this.root)return this.vW(t),this.yo(this.root.value,t)>0?this.root.yW():this.root},n.prototype.SW=function(t){if(this.root)return this.vW(t),this.yo(this.root.value,t)>=0?this.root.yW():this.root},n.prototype.gW=function(t){if(this.root)return this.vW(t),this.yo(this.root.value,t)>=0?this.root:this.root.RW()},n.prototype.bW=function(t){if(this.root)return this.vW(t),this.yo(this.root.value,t)<=0?this.root.RW():this.root},n.prototype.pop=function(){if(this.root){var t=this.TW();return this.delete(t.value),t.value}},n.prototype.shift=function(){if(this.root){var t=this.IW();return this.delete(t.value),t.value}},n.prototype.push=function(){this.addEach(arguments)},n.prototype.unshift=function(){this.addEach(arguments)},n.prototype.slice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var i=[];if(this.root)for(this.PW(t);this.root.index<e&&(i.push(this.root.value),this.root.right);)this.vW(this.root.RW().value);return i},n.prototype.splice=function(t,e){return this.Yk(t,e,Array.prototype.slice.call(arguments,2))},n.prototype.Yk=function(t,e,i){if(void 0===t&&void 0===e)return[];t=t||0,t<0&&(t+=this.length),void 0===e&&(e=1/0);var n=[];if(this.root){this.PW(t);for(var r=0;r<e;r++){n.push(this.root.value);var o=this.root.RW();if(this.delete(this.root.value),!o)break;this.vW(o.value)}}return this.addEach(i),n},n.prototype.vW=function(t){var e,i,n,o,s,a;if(this.root){for(e=i=n=new this.Node,a=new this.Node,s=this.root;;){var h=this.yo(t,s.value);if(h<0){if(!s.left)break;if(this.yo(t,s.left.value)<0&&(o=s.left,s.left=o.right,s.EW(),o.right=s,o.EW(),s=o,!s.left))break;o=new r,o.right=s,o.left=a.left,a.left=o,n.left=s,n.EW(),n=s,s=s.left}else{if(!(h>0))break;if(!s.right)break;if(this.yo(t,s.right.value)>0&&(o=s.right,s.right=o.left,s.EW(),o.left=s,o.EW(),s=o,!s.right))break;o=new r,o.left=s,o.right=a.right,a.right=o,i.right=s,i.EW(),i=s,s=s.right}}for(i.right=s.left,i.EW(),n.left=s.right,n.EW(),s.left=e.right,s.right=e.left;a.left;)a.left.right.EW(),a.left=a.left.left;for(;a.right;)a.right.left.EW(),a.right=a.right.right;s.EW(),this.root=s}},n.prototype.PW=function(t){if(this.root){for(var e=this.root,i=this.root.index;i!==t;)if(i>t&&e.left)e=e.left,i-=1+(e.right?e.right.length:0);else{if(!(i<t&&e.right))break;e=e.right,i+=1+(e.left?e.left.length:0)}return this.vW(e.value),this.root.index===t}return!1},n.prototype.reduce=function(t,e,i){return this.root&&(e=this.root.reduce(t,e,0,i,this)),e},n.prototype.reduceRight=function(t,e,i){return this.root&&(e=this.root.reduceRight(t,e,this.length-1,i,this)),e},n.prototype.min=function(t){var e=this.IW(t);if(e)return e.value},n.prototype.max=function(t){var e=this.TW(t);if(e)return e.value},n.prototype.Po=function(){return this.min()},n.prototype.clear=function(){var t;this.qk&&(t=this.toArray(),this.UP([],t,0)),this.root=null,this.length=0,this.qk&&this.LP([],t,0)},n.prototype.Ao=function(t,e){return new this.Iterator(this,t,e)},n.prototype.Iterator=o,n.prototype.summary=function(){return this.root?this.root.summary():"()"},n.prototype.log=function(t,e,i,n){t=t||c.GD,e=e||this.ge,i||(i=console.log,n=console),i=i.bind(n),this.root&&this.root.log(t,e,i,i)},n.prototype.ge=function(t,e,i){e(" "+t.value)},n.AW=c,n.prototype.Node=r,r.prototype.reduce=function(t,e,i,n,r,o){if(o=o||0,this.left){var s=this.left.length;e=this.left.reduce(t,e,i,n,r,o+1),i+=s}return e=t.call(n,e,this.value,i,r,this,o),i+=1,this.right&&(e=this.right.reduce(t,e,i,n,r,o+1)),e},r.prototype.reduceRight=function(t,e,i,n,r,o){return o=o||0,this.right&&(e=this.right.reduce(t,e,i,n,r,o+1),i-=this.right.length),e=t.call(n,e,this.value,this.value,r,this,o),i-=1,this.left&&(e=this.left.reduce(t,e,i,n,r,o+1)),e},r.prototype.EW=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0),this.index=this.left?this.left.length:0},r.prototype.kW=function(){var t=1;if(t+=this.left?this.left.kW():0,t+=this.right?this.right.kW():0,this.length!==t)throw new Error("Integrity check failed: "+this.summary());return t},r.prototype.RW=function(){var t=this;if(t.right){for(t=t.right;t.left;)t=t.left;return t}},r.prototype.yW=function(){var t=this;if(t.left){for(t=t.left;t.right;)t=t.right;return t}},r.prototype.summary=function(){var t=this.value||"-";return t+=" <"+this.length,this.left||this.right?"("+t+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")":"("+t+")"},r.prototype.log=function(t,e,i,n){var r,o=this;r=this.left&&this.right?t.qP:this.left?t.UD:this.right?t.xD:t.BD;var s;this.left&&this.left.log(t,e,function(e){s?n(t.jD+" "+e):(s=!0,n(t.HD+t.BD+e))},function(t){n("  "+t)});var a;e(this,function(e){a?i((o.right?t.jD:" ")+e):(a=!0,i(r+e))},function(e){n((o.left?t.jD:" ")+e)});var h;this.right&&this.right.log(t,e,function(e){h?i("  "+e):(h=!0,i(t.qD+t.BD+e))},function(e){i(t.jD+" "+e)})},o.prototype.zk=null,Object.defineProperty(o.prototype,"_iterationObject",{get:function(){return this.zk||(this.zk={done:!1,value:null})}}),o.prototype.next=function(){var t;return t=this.Mk?this.set.bW(this.Mk.value):this.set.IW(),t?void 0!==this.end&&this.set.yo(t.value,this.end)>=0?(this.Jk.done=!0,this.Jk.value=void 0):(this.Mk=t,this.Jk.value=t.value):(this.Jk.done=!0,this.Jk.value=void 0),this.Jk}},function(t,e,i){"use strict";var n=function(){function t(){this.eN=!1,this.sN=!1,this.oN=!1}return t}();e.X_=n},function(t,e,i){"use strict";function n(t,e,i,r){if(!(this instanceof n))return new n(t,e,i,r);Array.isArray(t)?(this.fg=t,t=t.splice(0,t.length)):this.fg=[],this.ce=e||Object.ae,this.yo=i||Object.mo,this.le=r||Function.he,this.length=0,this.addEach(t)}function r(t,e,i){for(var n=0,r=t.length-1;n<=r;){var o=n+r>>1,s=i(e,t[o]);if(s>0)n=o+1;else{if(!(s<0))return o;r=o-1}}return-(n+1)}function o(t,e,i,n){var o=r(t,e,i);if(o<0)return-1;for(;o>0&&n(e,t[o-1]);)o--;return n(e,t[o])?o:-1}function s(t,e,i,n){var o=r(t,e,i);if(o<0)return-1;for(;o<t.length-1&&n(e,t[o+1]);)o++;return n(e,t[o])?o:-1}function a(t,e,i){var n=r(t,e,i);if(n<0)return-n-1;for(var o=t.length-1;n<o&&0===i(e,t[n+1]);)n++;return n}t.t=n;var h=(i(12),i(13)),u=i(14),c=i(35);n.OW=n,Object.addEach(n.prototype,h.prototype),Object.addEach(n.prototype,u.prototype),Object.addEach(n.prototype,c.prototype),n.prototype.NN=!0,n.prototype.de=function(t){return new this.constructor(t,this.ce,this.yo,this.le)},n.prototype.has=function(t,e){if(e)throw new Error("SortedSet#has does not support second argument: equals");var i=r(this.fg,t,this.yo);return i>=0&&this.ce(this.fg[i],t)},n.prototype.get=function(t,e){if(e)throw new Error("SortedArray#get does not support second argument: equals");var i=o(this.fg,t,this.yo,this.ce);return-1!==i?this.fg[i]:this.le(t)},n.prototype.add=function(t){var e=a(this.fg,t,this.yo);return this.qk&&this.UP([t],[],e),this.fg.splice(e,0,t),this.length++,this.qk&&this.LP([t],[],e),!0},n.prototype.delete=function(t,e){if(e)throw new Error("SortedArray#delete does not support second argument: equals");var i=o(this.fg,t,this.yo,this.ce);return-1!==i&&(this.qk&&this.UP([],[t],i),this.fg.splice(i,1),this.length--,this.qk&&this.LP([],[t],i),!0)},n.prototype.GP=function(t,e){if(e){var i=this.fg.GP(t,e);return this.length-=i,i}var n=o(this.fg,t,this.yo,this.ce);if(-1!==n){for(var r=n;this.ce(t,this.fg[r]);)r++;var s=this.slice(n,r);return this.qk&&this.UP([],s,n),this.fg.splice(n,s.length),this.length-=s.length,this.qk&&this.LP([],s,n),s.length}return 0},n.prototype.indexOf=function(t){return o(this.fg,t,this.yo,this.ce)},n.prototype.lastIndexOf=function(t){return s(this.fg,t,this.yo,this.ce)},n.prototype.find=function(t,e,i){if(e)throw new Error("SortedArray#find does not support second argument: equals");if(i)throw new Error("SortedArray#find does not support third argument: index");return o(this.fg,t,this.yo,this.ce)},n.prototype.Hk=function(t,e,i){if(e)throw new Error("SortedArray#findLast does not support second argument: equals");if(i)throw new Error("SortedArray#findLast does not support third argument: index");return s(this.fg,t,this.yo,this.ce)},n.prototype.push=function(){this.addEach(arguments)},n.prototype.unshift=function(){this.addEach(arguments)},n.prototype.pop=function(){var t=this.fg.pop();return this.length=this.fg.length,t},n.prototype.shift=function(){var t=this.fg.shift();return this.length=this.fg.length,t},n.prototype.slice=function(){return this.fg.slice.apply(this.fg,arguments)},n.prototype.splice=function(t,e){return this.Yk(t,e,Array.prototype.slice.call(arguments,2))},n.prototype.Yk=function(t,e,i){if(void 0===t&&void 0===e)return[];t=t||0,t<0&&(t+=this.length),void 0===e&&(e=1/0);var n=this.slice(t,t+e);return this.qk&&this.UP(i,n,t),this.fg.splice(t,e),this.length-=n.length,this.qk&&this.LP([],n,t),this.addEach(i),n},n.prototype.reduce=function(t,e){var i=arguments[2];return this.fg.reduce(function(e,n,r){return t.call(i,e,n,r,this)},e,this)},n.prototype.reduceRight=function(){var t=arguments[2];return this.fg.reduceRight(function(e,i,n){return callback.call(t,e,i,n,this)},basis,this)},n.prototype.min=function(){if(this.length)return this.fg[0]},n.prototype.max=function(){if(this.length)return this.fg[this.length-1]},n.prototype.Po=function(){return this.fg.Po()},n.prototype.clear=function(){var t;this.qk&&(t=this.fg.slice(),this.UP([],t,0)),this.length=0,this.fg.clear(),this.qk&&this.LP([],t,0)},n.prototype.ae=function(t,e){return this.fg.ae(t,e)},n.prototype.mo=function(t,e){return this.fg.mo(t,e)},n.prototype.Ao=function(t,e){return new this.Iterator(this.fg,t,e)},n.prototype.toJSON=function(){return this.toArray()},n.prototype.Iterator=Array.prototype.Iterator},function(t,e,i){"use strict";var n=i(1),r=i(44),o=i(2);i(141),i(143);var s=i(81),a=i(0),h=i(144),u=i(10),c=i(82),f=i(145),l=i(146),p=i(80),d=i(8),v=function(){function t(t){this.isLive=!1,this.te=a.Framework&&a.Framework.resolve(a.Framework.q.I)?a.Framework.resolve(a.Framework.q.I).log(t):console,this._W=new DashParser,this.reset()}return t.prototype.NW=function(t){var e="";return-1!==t.indexOf("/")&&(-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),e=t.substring(0,t.lastIndexOf("/")+1)),e},t.prototype.mB=function(){return this.isLive},t.prototype.wN=function(){return this.DW.values().map(function(t){return t.bandwidth})},t.prototype.reset=function(){this.DW=new n},t.prototype.FW=function(){return this.LW},t.prototype.parse=function(e,i,n){this.reset(),this.SB=e,this.manifest=this._W.parse(i,this.NW(e)),this.isLive="static"!==this.manifest.type;for(var r=this.manifest.MW,o=this.manifest.BW[0],s=o.UW,a=0;a<s.length;a++){var c=o.xW[a],f=-1!=c.mimeType.indexOf("audio")?u.Ws.Ks:u.Ws.Ys;f===u.Ws.Ys&&c.HW&&this.qW(c.HW);for(var l=c.jW.VW,p=c.jW.media,d=parseInt(c.jW.GW),v=0;v<c.QW.length;v++){var g=c.QW[v],y=new h.KW;y.type=f,y.bandwidth=parseInt(g.bandwidth),y.GW=d,y.VW=r+""+l,y.VW=y.VW.replace(t.YW,""+y.bandwidth),n||this.te.debug("QualityLevel "+u.Ws[f]+" "+y.bandwidth);var w=r+""+p;w=w.replace(t.YW,""+y.bandwidth),y.zW=w;var m=parseInt(y.bandwidth+""),b=this.JW(c.jW.XW[0].WW,w,m,f);y.ZW=b.$W,y.eX=b.tX;var E=w.substr(0,w.lastIndexOf("="));E=E.substr(0,E.lastIndexOf("=")),this.DW.set(E,y)}}return this.LW=!0,this.rX(i,n)},t.prototype.JW=function(e,i,n,o){var s,a=new r,h=new r,u=0,f=0;return e.forEach(function(e){if(e.d){e.vp?u=parseInt(e.vp):u+=f;var r=parseInt(e.d),l=i.replace(t.iX,u+""),p=new c.$B(u,n,r,l,l);p.type=o,s&&(s.next=p),a.set(l,p),h.set(u,p),s=p;var d=0;e.r&&(d=parseInt(e.r));for(var v=0;v<d;v++){u+=r;var l=i.replace(t.iX,u+""),p=new c.$B(u,n,r,l,l);p.type=o,s&&(s.next=p),a.set(l,p),h.set(u,p),s=p}f=r}}),{$W:a,tX:h}},t.prototype.qW=function(t){if(t){if(t.nX){var e=t.nX;this.AB&&!this.AB.sX()&&this.AB instanceof f.oX||(this.AB=new f.oX(e.aX,e.hX,this.authenticationToken))}else this.AB&&this.AB instanceof l.cX||(this.AB=new l.cX);this.AB&&p.yB.iB&&this.AB.init()}},t.prototype.uX=function(t){var e=t.substr(0,t.lastIndexOf("="));return e=e.substr(0,e.lastIndexOf("=")),this.DW.get(e)},t.prototype.TB=function(t){return this.uX(t).ZW.get(t)},t.prototype.EB=function(t){var e=!1;return this.DW.forEach(function(i,n){i.VW===t&&(e=!0)}),e},t.prototype.IB=function(t){var e=this.TB(t);return null!=e?e.next:null},t.prototype.yk=function(t,e,i,n){var r;if(this.DW.forEach(function(t,e){t.bandwidth===n&&(r=t)}),r&&r.eX.has(t)&&r.eX.has(i)){for(var o=r.eX.get(t),s=r.eX.get(i),a=0,h=o;h&&h!=s;)a+=h.duration,h=h.next;return Math.round(a/(r.GW/1e3))}return 0},t.prototype.AN=function(e){var i=this,n=o.defer(),r=this.TB(e.Wu());if(!r||r.next)return n.resolve(!1),n.Te;var s=o.defer();if(this.AB)p.yB.iB?this.AB.CB().then(function(t){t?i.AB.decrypt(e.Hu).then(function(t){s.resolve(i.lX(t))}).fail(function(t){return s.reject(!0)}):s.reject(!1)}):s.reject(!1);else try{var a=this.lX(e.Hu);s.resolve(a)}catch(t){this.te.warn("error extracting duration",t),s.reject(!0)}return s.Te.then(function(e){if(!isNaN(e)){var o=r.id+e;i.te.debug("found next fragment: "+r.id+" -> "+o+" duration: "+e),i.DW.forEach(function(i,n){if(i.type===r.type){var s=i.zW.replace(t.iX,r.id+""),a=i.zW.replace(t.iX,o+""),h=i.ZW.get(s);if(!i.ZW.has(a)&&h){h.duration=e;var u=new c.$B(o,i.bandwidth,e,a,a);u.type=h.type,h.next=u,i.ZW.set(a,u),i.eX.set(o,u)}}})}n.resolve(!1)}).fail(function(t){i.te.debug("could not extract duration from "+e.Wu()+" [reevaluate: "+t+"]"),n.resolve(t)}),n.Te},t.prototype.lX=function(t){t instanceof Uint8Array&&(t=t.buffer);var e=ISOBoxer.pX(t),i=e.fetch("tfhd"),n=e.fetch("trun"),r=i?i.fX:0;if(n){var o=0;return n.dX.forEach(function(t){o+=t.gX}),isNaN(o)&&r>0&&(o=r*n.dX.length),o}},t.prototype.rX=function(t,e){var i=this.vX();if(!e&&(this.isLive||i||d.HiveConfig.Dash.DashRemoveBitrateSize))try{var n=new s({}),r=n.JB(t);return this.isLive&&this.yX(r),(i||d.HiveConfig.Dash.DashRemoveBitrateSize)&&this.mX(r,i,d.HiveConfig.Dash.DashRemoveBitrateSize),n.WB(r)}catch(t){this.te.error(t)}return t},t.prototype.yX=function(t){var e=this,i=Math.max(1,p.yB.aB),n=Math.max(1,p.yB.oB),r=0,o=0;return t.EX&&t.EX.TX&&t.EX.TX.xW.forEach(function(t){if("video"===t.IX&&t.jW&&t.jW.wX){for(var s=t.jW.wX.WW,a=parseInt(t.jW.SX),h=n*a,u=0,c=0,f=0;f<s.length&&i>0;f++){var l=s[f];u=f;var p=l.RX?parseInt(l.RX):1;p>i?(c=i,i=0):(i-=p,c=p)}for(var d=s.length-1;d>=0&&h>0&&d>=u;d--){var l=s[d],p=l.RX?parseInt(l.RX):1,v=0;if(!l.bX)throw new Error("missing segment duration");v=parseInt(l.bX);var g=p*v;if((d>u||d==u&&0==c)&&h>=g)h-=g,s.splice(d,1),r+=p,o+=g;else{var y=Math.ceil(h/v);d==u&&(y=Math.min(y,p-c));var w=v*y;l.RX=p-y+"",h-=w,r+=y,o+=w}}e.te.debug("DASH trimmed "+r+" segments for total duration: "+o)}}),t},t.prototype.vX=function(){if(d.HiveConfig.Dash.DashFilterBitrates)try{var t=null;t="string"==typeof d.HiveConfig.Dash.DashFilterBitrates?d.HiveConfig.Dash.DashFilterBitrates.split(","):d.HiveConfig.Dash.DashFilterBitrates;var e=[];return t.forEach(function(t){var i=parseInt(t);isNaN(i)||e.push(i)}),e}catch(t){this.te.warn("[HiveJs] error parsing DashFilterBitrates: "+d.HiveConfig.Dash.DashFilterBitrates)}},t.prototype.mX=function(t,e,i){var n=this;if(t.EX&&t.EX.TX){var r=[];t.EX.TX.xW.forEach(function(t){if("video"===t.IX&&t.QW){var o=t.QW;o.sort(function(t,e){return isNaN(t.PX)&&(t.PX=parseInt(t.PX)),isNaN(e.PX)&&(e.PX=parseInt(e.PX)),t.PX-e.PX});for(var s=o.length-1;s>=0;s--)i&&(delete o[s].AX,delete o[s].CX),e&&-1==e.indexOf(s)?o.splice(s,1):r.push(o[s].PX);n.te.debug("DASH filtered-in bitrates: "+r.reverse().join(" ")+" - removed size: "+i)}})}},t.prototype.DB=function(t,e,i,n){var r;if(this.DW.forEach(function(t,e){t.bandwidth===n&&(r=t)}),r&&r.eX.has(t)&&r.eX.has(i)){for(var o=r.eX.get(t),s=r.eX.get(i),a=0,h=o;h&&h!=s;)a+=h.duration,h=h.next;return Math.round(a/(r.GW/1e3))}return 0},t.prototype.FB=function(t,e){var i;return this.DW.forEach(function(t,n){t.bandwidth===e&&(i=t)}),i&&i.eX.has(t)?i.eX.get(t):null},t}();v.YW="$Bandwidth$",v.iX="$Time$",e.vB=v},function(t,e,i){/*!
 * The copyright in this software is being made available under the BSD License,
 * included below. This software may be subject to other third party and contributor
 * rights, including patent rights, and no such rights are granted under this license.
 *
 * Copyright (c) 2013, Dash Industry Forum.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *  * Redistributions of source code must retain the above copyright notice, this
 *  list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright notice,
 *  this list of conditions and the following disclaimer in the documentation and/or
 *  other materials provided with the distribution.
 *  * Neither the name of Dash Industry Forum nor the names of its
 *  contributors may be used to endorse or promote products derived from this software
 *  without specific prior written permission.
 *
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY
 *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 *  POSSIBILITY OF SUCH DAMAGE.
 */
var n=i(142),r=i(81);DashParser=function(){var t=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,i=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,o=[{type:"duration",test:function(e){for(var i=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],n=i.length,r=0;r<n;r++)if(e.nodeName===i[r])return t.test(e.value);return!1},UB:function(e){var i=t.exec(e),n=31536e3*parseFloat(i[2]||0)+2592e3*parseFloat(i[4]||0)+86400*parseFloat(i[6]||0)+3600*parseFloat(i[8]||0)+60*parseFloat(i[10]||0)+parseFloat(i[12]||0);return void 0!==i[1]&&(n=-n),n}},{type:"datetime",test:function(t){return e.test(t.value)},UB:function(t){var i,n=e.exec(t);if(i=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&1e3*parseFloat(n[7])||0),n[9]&&n[10]){var r=60*parseInt(n[9],10)+parseInt(n[10],10);i+=("+"===n[8]?-1:1)*r*60*1e3}return new Date(i)}},{type:"numeric",test:function(t){return i.test(t.value)},UB:function(t){return parseFloat(t)}}],s=function(){var t,e,i,n;return n=[{name:"profiles",ud:!1},{name:"width",ud:!1},{name:"height",ud:!1},{name:"sar",ud:!1},{name:"frameRate",ud:!1},{name:"audioSamplingRate",ud:!1},{name:"mimeType",ud:!1},{name:"segmentProfiles",ud:!1},{name:"codecs",ud:!1},{name:"maximumSAPPeriod",ud:!1},{name:"startsWithSap",ud:!1},{name:"maxPlayoutRate",ud:!1},{name:"codingDependency",ud:!1},{name:"scanType",ud:!1},{name:"FramePacking",ud:!0},{name:"AudioChannelConfiguration",ud:!0},{name:"ContentProtection",ud:!0}],t={},t.name="AdaptationSet",t.kX=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=n,e={},e.name="Representation",e.kX=!1,e.isArray=!0,e.parent=t,e.children=[],e.properties=n,t.children.push(e),i={},i.name="SubRepresentation",i.kX=!1,i.isArray=!0,i.parent=e,i.children=[],i.properties=n,e.children.push(i),t},a=function(){var t,e,i,n;return n=[{name:"SegmentBase",ud:!0},{name:"SegmentTemplate",ud:!0},{name:"SegmentList",ud:!0}],t={},t.name="Period",t.kX=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=n,e={},e.name="AdaptationSet",e.kX=!1,e.isArray=!0,e.parent=t,e.children=[],e.properties=n,t.children.push(e),i={},i.name="Representation",i.kX=!1,i.isArray=!0,i.parent=e,i.children=[],i.properties=n,e.children.push(i),t},h=function(){var t,e,i,n,r;return r=[{name:"BaseURL",ud:!0,OX:function(t,e){return 0===e.indexOf("http://")?e:t+e}}],t={},t.name="mpd",t.kX=!0,t.isArray=!0,t.parent=null,t.children=[],t.properties=r,e={},e.name="Period",e.kX=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=r,t.children.push(e),i={},i.name="AdaptationSet",i.kX=!1,i.isArray=!0,i.parent=e,i.children=[],i.properties=r,e.children.push(i),n={},n.name="Representation",n.kX=!1,n.isArray=!0,n.parent=i,n.children=[],n.properties=r,i.children.push(n),t},u=function(){var t=[];return t.push(s()),t.push(a()),t.push(h()),t};return{parse:function(t,e){var i,s=new r(o,"",!0),a=new n(u());new Date;try{i=s.JB(t),new Date,i.hasOwnProperty("BaseURL")?(i.MW=i._X[0],0!==i.MW.toString().indexOf("http")&&(i.MW=e+i.MW)):i.MW=e,i.hasOwnProperty("Location")&&(i.Location=i.NX[0]),a.DX(i),new Date}catch(e){return console.log("parsing the manifest failed","parse",t),null}return i}}}},function(t,e,n){var r=function(t){var e;for(e=[],i=0,len=t.length;i<len;i+=1)t[i].kX?e.push("root"):e.push(t[i].name);var n=function(t,e){var i;if(null!==t&&null!==e)for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)||(e[i]=t[i]))},r=function(t,e,i){var r,o,s,a,h;if(null!==t&&0!==t.length)for(r=0,o=t.length;r<o;r+=1)s=t[r],e.hasOwnProperty(s.name)&&(i.hasOwnProperty(s.name)?s.ud&&(a=e[s.name],h=i[s.name],"object"==typeof a&&"object"==typeof h?n(a,h):null!=s.OX?i[s.name]=s.OX(a,h):i[s.name]=a+h):i[s.name]=e[s.name])},o=function(t,e){var i,n,s,a,h,u,c,f=t;if(null!==f.children&&0!==f.children.length)for(i=0,n=f.children.length;i<n;i+=1)if(u=f.children[i],e.hasOwnProperty(u.name))if(u.isArray)for(h=e[u.name+"_asArray"],s=0,a=h.length;s<a;s+=1)c=h[s],r(f.properties,e,c),o(u,c);else c=e[u.name],r(f.properties,e,c),o(u,c)},s=function(i){var n,r,a,h,u,c,f;if(null===i)return i;if("object"!=typeof i)return i;for(n=0,r=e.length;n<r;n+=1)"root"===e[n]&&(u=t[n],c=i,o(u,c));for(h in i)if(i.hasOwnProperty(h)){if(-1!==(a=e.indexOf(h)))if(u=t[a],u.isArray)for(f=i[h+"_asArray"],n=0,r=f.length;n<r;n+=1)c=f[n],o(u,c);else c=i[h],o(u,c);s(i[h])}return i};return{DX:s}};t.t=r},function(t,e,i){/*! codem-isoboxer v0.2.2 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
"undefined"==typeof ISOBoxer&&(ISOBoxer={}),ISOBoxer.pX=function(t){return new n(t).parse()},ISOBoxer.fn={},ISOBoxer.fn.FX=function(t,e){var i=e||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(i).decode(t);var n=[],r=0;if("utf-8"===i)for(;r<t.byteLength;){var o=t.getUint8(r++);o<128||(o<224?(o=(31&o)<<6,o|=63&t.getUint8(r++)):o<240?(o=(15&o)<<12,o|=(63&t.getUint8(r++))<<6,o|=63&t.getUint8(r++)):(o=(7&o)<<18,o|=(63&t.getUint8(r++))<<12,o|=(63&t.getUint8(r++))<<6,o|=63&t.getUint8(r++))),n.push(String.fromCharCode(o))}else for(;r<t.byteLength;)n.push(String.fromCharCode(t.getUint8(r++)));return n.join("")},e.pX=ISOBoxer.pX,e.fn=ISOBoxer.fn,ISOBoxer.LX=function(t){this.offset=void 0===t?0:t};var n=function(t){this.MX=new DataView(t),this.BX=new ISOBoxer.LX,this.UX=[]};n.prototype.fetch=function(t){var e=this.xX(t,!0);return e.length?e[0]:null},n.prototype.xX=function(t,e){var i=[];return n.HX.call(this,t,i,e),i},n.prototype.parse=function(){for(this.BX.offset=0,this.UX=[];this.BX.offset<this.MX.byteLength;){var t=r.parse(this);if(void 0===t.type)break;this.UX.push(t)}return this},n.HX=function(t,e,i){this.type&&this.type==t&&e.push(this);for(var r in this.UX){if(e.length&&i)return;n.HX.call(this.UX[r],t,e,i)}};var r=function(){this.BX=new ISOBoxer.LX};r.parse=function(t){var e=new r;return e.qX=t.BX.offset,e.VX=t.VX?t.VX:t,e.MX=t.MX,e.jX=t,e.GX(),t.BX.offset=e.MX.byteOffset+e.MX.byteLength,e},r.prototype.QX=function(t){var e=null;switch(t){case 8:e=this.MX.getInt8(this.BX.offset-this.MX.byteOffset);break;case 16:e=this.MX.getInt16(this.BX.offset-this.MX.byteOffset);break;case 32:e=this.MX.getInt32(this.BX.offset-this.MX.byteOffset);break;case 64:var i=this.MX.getInt32(this.BX.offset-this.MX.byteOffset),n=this.MX.getInt32(this.BX.offset-this.MX.byteOffset+4);e=i*Math.pow(2,32)+n}return this.BX.offset+=t>>3,e},r.prototype.KX=function(t){var e=null;switch(t){case 8:e=this.MX.getUint8(this.BX.offset-this.MX.byteOffset);break;case 16:e=this.MX.getUint16(this.BX.offset-this.MX.byteOffset);break;case 24:var i=this.MX.getUint16(this.BX.offset-this.MX.byteOffset),n=this.MX.getUint8(this.BX.offset-this.MX.byteOffset+2);e=(i<<8)+n;break;case 32:e=this.MX.getUint32(this.BX.offset-this.MX.byteOffset);break;case 64:var i=this.MX.getUint32(this.BX.offset-this.MX.byteOffset),n=this.MX.getUint32(this.BX.offset-this.MX.byteOffset+4);e=i*Math.pow(2,32)+n}return this.BX.offset+=t>>3,e},r.prototype.YX=function(t){for(var e="",i=0;i<t;i++){var n=this.KX(8);e+=String.fromCharCode(n)}return e},r.prototype.zX=function(){for(var t="";;){var e=this.KX(8);if(0==e)break;t+=String.fromCharCode(e)}return t},r.prototype.JX=function(t){return this.KX(t/2)+this.KX(t/2)/Math.pow(2,t/2)},r.prototype.GX=function(){if(this.BX.offset=this.qX,this.qX+8>this.MX.buffer.byteLength)return void(this.VX.WX=!0);switch(this.size=this.KX(32),this.type=this.YX(4),1==this.size&&(this.XX=this.KX(64)),"uuid"==this.type&&(this.ZX=this.YX(16)),this.size){case 0:this.MX=new DataView(this.MX.buffer,this.qX,this.MX.byteLength-this.BX.offset);break;case 1:this.qX+this.size>this.MX.buffer.byteLength?(this.WX=!0,this.VX.WX=!0):this.MX=new DataView(this.MX.buffer,this.qX,this.XX);break;default:this.qX+this.size>this.MX.buffer.byteLength?(this.WX=!0,this.VX.WX=!0):this.MX=new DataView(this.MX.buffer,this.qX,this.size)}!this.WX&&this.$X[this.type]&&this.$X[this.type].call(this)},r.prototype.eZ=function(){this.version=this.KX(8),this.tZ=this.KX(24)},r.prototype.$X={},["moov","trak","tref","mdia","minf","stbl","edts","dinf","mvex","moof","traf","mfra","udta","meco","strk","vttc"].forEach(function(t){r.prototype.$X[t]=function(){for(this.UX=[];this.BX.offset-this.MX.byteOffset<this.MX.byteLength;)this.UX.push(r.parse(this))}}),r.prototype.$X.rZ=function(){this.eZ(),this.iZ=this.KX(32),this.entries=[];for(var t=1;t<=this.iZ;t++){var e={};1==this.version?(e.nZ=this.KX(64),e.sZ=this.QX(64)):(e.nZ=this.KX(32),e.sZ=this.QX(32)),e.oZ=this.QX(16),e.aZ=this.QX(16),this.entries.push(e)}},r.prototype.$X.hZ=function(){this.eZ(),this.cZ=this.zX(),this.value=this.zX(),this.GW=this.KX(32),this.uZ=this.KX(32),this.lZ=this.KX(32),this.id=this.KX(32),this.pZ=new DataView(this.MX.buffer,this.BX.offset,this.MX.byteLength-(this.BX.offset-this.qX))},r.prototype.$X.fZ=r.prototype.$X.dw=function(){this.data=new DataView(this.MX.buffer,this.BX.offset,this.MX.byteLength-(this.BX.offset-this.qX))},r.prototype.$X.dZ=r.prototype.$X.gZ=function(){for(this.vZ=this.YX(4),this.yZ=this.KX(32),this.mZ=[];this.BX.offset-this.MX.byteOffset<this.MX.byteLength;)this.mZ.push(this.YX(4))},r.prototype.$X.EZ=function(){this.eZ(),this.TZ=this.KX(32),this.IZ=this.YX(4),this.tT=[this.KX(32),this.KX(32),this.KX(32)],this.name=this.zX()},r.prototype.$X.wZ=function(){this.data=new DataView(this.MX.buffer,this.BX.offset,this.MX.byteLength-(this.BX.offset-this.qX))},r.prototype.$X.SZ=function(){this.eZ(),1==this.version?(this.RZ=this.KX(64),this.bZ=this.KX(64),this.GW=this.KX(32),this.duration=this.KX(64)):(this.RZ=this.KX(32),this.bZ=this.KX(32),this.GW=this.KX(32),this.duration=this.KX(32));var t=this.KX(16);this.pad=t>>15,this.language=String.fromCharCode(96+(t>>10&31),96+(t>>5&31),96+(31&t)),this.TZ=this.KX(16)},r.prototype.$X.PZ=function(){this.eZ(),this.AZ=this.KX(32)},r.prototype.$X.CZ=function(){this.eZ(),1==this.version?(this.RZ=this.KX(64),this.bZ=this.KX(64),this.GW=this.KX(32),this.duration=this.KX(64)):(this.RZ=this.KX(32),this.bZ=this.KX(32),this.GW=this.KX(32),this.duration=this.KX(32)),this.rate=this.JX(32),this.volume=this.JX(16),this.kZ=this.KX(16),this.OZ=[this.KX(32),this.KX(32)],this.matrix=[];for(var t=0;t<9;t++)this.matrix.push(this.JX(32));this.TZ=[];for(var t=0;t<6;t++)this.TZ.push(this.KX(32));this._Z=this.KX(32)},r.prototype.$X.NZ=function(){var t=new DataView(this.MX.buffer,this.BX.offset,this.MX.byteLength-(this.BX.offset-this.qX));this.DZ=ISOBoxer.fn.FX(t)},r.prototype.$X.FZ=function(){this.eZ(),this.LZ=this.KX(32),this.GW=this.KX(32),0==this.version?(this.MZ=this.KX(32),this.BZ=this.KX(32)):(this.MZ=this.KX(64),this.BZ=this.KX(64)),this.tT=this.KX(16),this.UZ=this.KX(16),this.xZ=[];for(var t=0;t<this.UZ;t++){var e={},i=this.KX(32);e.HZ=i>>31&1,e.qZ=2147483647&i,e.VZ=this.KX(32);var n=this.KX(32);e.jZ=n>>31&1,e.GZ=n>>28&7,e.QZ=268435455&n,this.xZ.push(e)}},r.prototype.$X.KZ=function(){this.eZ(),this.YZ=this.KX(32),this.zZ=[];for(var t=0;t<this.YZ;t++){var e={};e.JZ=this.KX(32),e.WZ=[];for(var i=0;i<e.JZ;i++){var n={};n.level=this.KX(8),n.XZ=this.KX(24),e.WZ.push(n)}this.zZ.push(e)}},r.prototype.$X.ZZ=function(){this.eZ(),1==this.version?this.$Z=this.KX(64):this.$Z=this.KX(32)},r.prototype.$X.e$=function(){this.eZ(),this.t$=this.KX(32),1&this.tZ&&(this.r$=this.KX(64)),2&this.tZ&&(this.i$=this.KX(32)),8&this.tZ&&(this.fX=this.KX(32)),16&this.tZ&&(this.n$=this.KX(32)),32&this.tZ&&(this.s$=this.KX(32))},r.prototype.$X.o$=function(){this.eZ(),1==this.version?(this.RZ=this.KX(64),this.bZ=this.KX(64),this.t$=this.KX(32),this.kZ=this.KX(32),this.duration=this.KX(64)):(this.RZ=this.KX(32),this.bZ=this.KX(32),this.t$=this.KX(32),this.kZ=this.KX(32),this.duration=this.KX(32)),this.OZ=[this.KX(32),this.KX(32)],this.a$=this.KX(16),this.h$=this.KX(16),this.volume=this.JX(16),this.c$=this.KX(16),this.matrix=[];for(var t=0;t<9;t++)this.matrix.push(this.JX(32));this.width=this.KX(32),this.height=this.KX(32)},r.prototype.$X.u$=function(){this.eZ(),this.l$=this.KX(32),1&this.tZ&&(this.p$=this.QX(32)),4&this.tZ&&(this.f$=this.KX(32)),this.dX=[];for(var t=0;t<this.l$;t++){var e={};256&this.tZ&&(e.gX=this.KX(32)),512&this.tZ&&(e.d$=this.KX(32)),1024&this.tZ&&(e.g$=this.KX(32)),2048&this.tZ&&(0==this.version?e.v$=this.KX(32):e.v$=this.QX(32)),this.dX.push(e)}},r.prototype.$X.y$=function(){var t=new DataView(this.MX.buffer,this.BX.offset,this.MX.byteLength-(this.BX.offset-this.qX));this.m$=ISOBoxer.fn.FX(t)},r.prototype.$X.E$=function(){var t=new DataView(this.MX.buffer,this.BX.offset,this.MX.byteLength-(this.BX.offset-this.qX));this.config=ISOBoxer.fn.FX(t)},r.prototype.$X.T$=function(){}},function(t,e,i){"use strict";var n=function(){function t(){}return t}();e.KW=n},function(t,e,i){"use strict";var n=i(2),r=i(0),o=function(){function t(t,e){this.name=t,this.I$=e}return t}(),s=function(){function t(t,e,i){this.mn="[AES Manager] ",this.w$="AES-CBC",this.xn=!1,this.te=r.Framework&&r.Framework.resolve(r.Framework.q.I)?r.Framework.resolve(r.Framework.q.I).log():console,this.S$=t,this.R$=e,this.te.debug(this.mn+"Starting Dash AES Manager"),i&&(this.b$=i)}return t.prototype.init=function(){var t=this;try{this.P$();var e=n.defer();this.A$().then(function(){return e.resolve(!0)}).fail(function(i){t.te.warn(t.mn+i),e.resolve(!1)}),this.C$=e.Te}catch(t){this.te.warn(this.mn+"Error initializing AES Manager",t)}},t.prototype.CB=function(){return this.C$?this.C$:n.resolve(!1)},t.prototype.A$=function(){var t=this;if(this.k$)return this.k$;var e=n.defer();return this.O$().then(function(i){window.crypto.subtle.importKey("raw",i,{name:t.w$},!1,["decrypt"]).then(function(t){e.resolve(t)},function(t){e.reject("error importing key: "+t.toString())})}).fail(function(t){return e.reject(t)}),this.k$=e.Te,this.k$},t.prototype.P$=function(){for(var t=2,e=this.R$.length,i=[];t<e;t+=2)i.push(parseInt(this.R$.substr(t,2),16));this.I$=new Uint8Array(i)},t.prototype.decrypt=function(t){var e=this,i=n.defer(),r=new o(this.w$,this.I$);return this.k$.then(function(e){return window.crypto.subtle.decrypt(r,e,t).then(function(t){i.resolve(t)})}).catch(function(t){e.te.warn(e.mn+"decrypt error",t),e.xn=!0,e.C$=n.resolve(!1),i.reject(t)}),i.Te},t.prototype.O$=function(){var t=n.defer(),e=new XMLHttpRequest;return e.responseType="arraybuffer",e.open("GET",this.S$),this.b$&&e.setRequestHeader("Authorization",this.b$),e.onload=function(){if(200===e.status){var i=new Uint8Array(e.response);t.resolve(i)}else t.reject("error downloading key - status: "+e.status)},e.onerror=function(){t.reject("error downloading key")},e.send(),t.Te},t.prototype.sX=function(){return this.xn},t}();e.oX=s},function(t,e,i){"use strict";var n=i(2),r=function(){function t(){}return t.prototype.init=function(){},t.prototype.CB=function(){return n.resolve(!1)},t.prototype.decrypt=function(t){return n.reject("unsupported")},t.prototype.sX=function(){return!1},t}();e.cX=r},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(83),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(r.lU);e.dB=o},function(t,e,i){"use strict";var n=i(4),r=i(149),o=i(1),s=i(150),a=i(82),h=i(0),u=i(6),c=i(84),f=function(){function t(){this.FU=new o,this._$=null,this.N$=null,this.te=(h.Framework.resolve(h.Framework.q.I)||console).log()}return t.prototype.parse=function(t,e){var i=new r.D$;if(i.push(e),i.manifest.playlists)this.F$(t,i.manifest);else{var n=this.L$(t,i.manifest);if(n&&(this.live=!n.M$),this.live)return this.B$(i.manifest,e)}return e},t.prototype.FB=function(t,e){return this.LU.has(e)?this.LU.get(e).eX.get(t):null},t.prototype.wN=function(){return this.FU.values().map(function(t){return t.bitrate})},t.prototype.isLive=function(){return this.live},t.prototype.TB=function(t){return null==this.ZW?null:this.ZW.get(t)},t.prototype.IB=function(t){var e=this.ZW.get(t);if(e){var i=e.bitrate;return this.LU.get(i).eX.get(e.id+1)}return null},t.prototype.NU=function(t){return this.FU.has(t)},t.prototype.DU=function(){return this.U$},t.prototype.F$=function(t,e){var i=this;this.U$=t,this.x$=e,this.FU=new o,this.ZW=new o,this.LU=new o,this.x$.playlists.forEach(function(e){var n=u.fn.cn(t,e.uri),r=e.attributes.BANDWIDTH,o=new s.H$(r,e.uri,n);i.FU.set(n,o),i.LU.set(r,o)})},t.prototype.L$=function(t,e){var i=this,r=this.FU.get(t);if(!r)return void this.te.warn("Playlist url doesn't match any playlist in the master file");var o=null!=e.q$?e.q$:0,s=new Array,h=o-1,c=r.eX.get(h);return e.MU.forEach(function(e){var h=u.fn.cn(t,e.uri),f=Math.round(1e3*e.duration),l=r.bitrate;Number.isInteger(l)||(n.ErrorMonitor.gi().di("Segment Bitrate is a Float",{bitrate:l}),l=Math.round(l));var p=new a.$B(o,l,f,e.uri,h);i.ZW.set(h,p),r.eX.set(o,p),s.push(p),c&&(c.next=p),c=p,o++}),this._$=r,r.update(e.q$,e.V$,e.M$,e.j$,s),r},t.prototype.B$=function(t,e){for(var i=e.split("\n"),n=Math.max(1,c.OU.wU),r=null,o=0,s=t.MU.length-1;s>=n-1;s--){var a=t.MU[s];if(r=a.uri,o>=c.OU.IU)break;o+=a.duration}var h="";for(s=0;s<i.length&&(h=h+i[s]+"\n",i[s].trim()!==r);s++);return h},t}();e.kU=f},function(t,e,i){var n=function(){var t={};t.yg={},t.yg.create=Object.create||function(t){function e(){}return e.prototype=t,new e},t.yg.G$=function(t,e,i){for(var n in t)hasOwnProp.call(t,n)&&e.call(i||this,n,t[n])},t.yg.ud=function(t,e){if(!e)return t;for(var i in e)hasOwnProp.call(e,i)&&(t[i]=e[i]);return t},t.yg.Q$=function(e,i){var n,r,o;e=t.yg.rP(e);for(n in i)hasOwnProp.call(i,n)&&(r=e[n],o=i[n],t.yg.K$(r)&&t.yg.K$(o)?e[n]=t.yg.Q$(r,o):e[n]=i[n]);return e},t.yg.rP=function(e){return t.yg.ud({},e)},t.yg.K$=function(t){return!!t&&"object"==typeof t&&"[object Object]"===t.toString()&&t.constructor===Object},t.yg.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},mergeOptions=function(e,i){var n,r,o;e=t.yg.rP(e);for(n in i)i.hasOwnProperty(n)&&(r=e[n],o=i[n],t.yg.K$(r)&&t.yg.K$(o)?e[n]=t.util.Y$(r,o):e[n]=i[n]);return e},t.Y$=mergeOptions;var e=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e].push(i)},this.off=function(e,i){var n;return!!t[e]&&(n=t[e].indexOf(i),t[e].splice(n,1),n>-1)},this.z$=function(e){var i,n,r,o;if(i=t[e])for(o=Array.prototype.slice.call(arguments,1),r=i.length,n=0;n<r;++n)i[n].apply(this,o)},this.J$=function(){t={}}}};e.prototype.W$=function(t){this.on("data",function(e){t.push(e)})},t.X$=e;var i,n,r,o=function(){},s=function(){return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')}(),a=function(t){for(var e,i=t.split(s),n=i.length,r={};n--;)""!==i[n]&&(e=/([^=]*)=(.*)/.exec(i[n]).slice(1),e[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),r[e[0]]=e[1]);return r},e=t.X$;return i=function(){var t="";i.prototype.init.call(this),this.push=function(e){var i;for(t+=e,i=t.indexOf("\n");i>-1;i=t.indexOf("\n"))this.z$("data",t.substring(0,i)),t=t.substring(i+1)}},i.prototype=new e,n=function(){n.prototype.init.call(this)},n.prototype=new e,n.prototype.push=function(t){var e,i;if(t=t.replace(/^\s+|\s+$/g,""),0!==t.length){if("#"!==t[0])return void this.z$("data",{type:"uri",uri:t});if(0!==t.indexOf("#EXT"))return void this.z$("data",{type:"comment",text:t.slice(1)});if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))return void this.z$("data",{type:"tag",Z$:"m3u"});if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",Z$:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void this.z$("data",i);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",Z$:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void this.z$("data",i);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",Z$:"totalduration"},e[1]&&(i.duration=parseInt(e[1],10)),void this.z$("data",i);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",Z$:"version"},e[1]&&(i.version=parseInt(e[1],10)),void this.z$("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",Z$:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.z$("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",Z$:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.z$("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",Z$:"playlist-type"},e[1]&&(i.$$=e[1]),void this.z$("data",i);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return i={type:"tag",Z$:"byterange"},e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),void this.z$("data",i);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",Z$:"allow-cache"},e[1]&&(i.tk=!/NO/.test(e[1])),void this.z$("data",i);if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t))return i={type:"tag",Z$:"stream-inf"},e[1]&&(i.attributes=a(e[1]),i.attributes.e0&&function(){var t=i.attributes.e0.split("x"),e={};t[0]&&(e.width=parseInt(t[0],10)),t[1]&&(e.height=parseInt(t[1],10)),i.attributes.e0=e}(),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes.t0&&(i.attributes.t0=parseInt(i.attributes.t0,10))),void this.z$("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t))return void this.z$("data",{type:"tag",Z$:"endlist"});if(e=/^#EXT-X-DISCONTINUITY/.exec(t))return void this.z$("data",{type:"tag",Z$:"discontinuity"});if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return i={type:"tag",Z$:"key"},e[1]&&(i.attributes=a(e[1]),i.attributes.hX&&("0x"===i.attributes.hX.substring(0,2)&&(i.attributes.hX=i.attributes.hX.substring(2)),i.attributes.hX=i.attributes.hX.match(/.{8}/g),i.attributes.hX[0]=parseInt(i.attributes.hX[0],16),i.attributes.hX[1]=parseInt(i.attributes.hX[1],16),i.attributes.hX[2]=parseInt(i.attributes.hX[2],16),i.attributes.hX[3]=parseInt(i.attributes.hX[3],16),i.attributes.hX=new Uint32Array(i.attributes.hX))),void this.z$("data",i);this.z$("data",{type:"tag",data:t.slice(4,t.length)})}},r=function(){var e,s=this,a=[],h={};r.prototype.init.call(this),this.r0=new i,this.i0=new n,this.r0.W$(this.i0),this.manifest={n0:!0},this.i0.on("data",function(i){({tag:function(){(({s0:function(){this.manifest.n0=i.tk,"allowed"in i||(this.z$("info",{message:"defaulting allowCache to YES"}),this.manifest.n0=!0)},o0:function(){var t={};"length"in i&&(h.o0=t,t.length=i.length,"offset"in i||(this.z$("info",{message:"defaulting offset to zero"}),i.offset=0)),"offset"in i&&(h.o0=t,t.offset=i.offset)},a0:function(){this.manifest.M$=!0},h0:function(){"mediaSequence"in this.manifest||(this.manifest.q$=0,this.z$("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.V$=0,this.z$("info",{message:"defaulting discontinuity sequence to zero"})),i.duration>=0&&(h.duration=i.duration),this.manifest.MU=a},key:function(){return i.attributes?"NONE"===i.attributes.c0?void(e=null):i.attributes.EE?(i.attributes.c0||this.z$("warn",{message:"defaulting key method to AES-128"}),e={method:i.attributes.c0||"AES-128",uri:i.attributes.EE},void(void 0!==i.attributes.hX&&(e.I$=i.attributes.hX))):void this.z$("warn",{message:"ignoring key declaration without URI"}):void this.z$("warn",{message:"ignoring key declaration without attribute list"})},u0:function(){if(!isFinite(i.number))return void this.z$("warn",{message:"ignoring invalid media sequence: "+i.number});this.manifest.q$=i.number},l0:function(){if(!isFinite(i.number))return void this.z$("warn",{message:"ignoring invalid discontinuity sequence: "+i.number});this.manifest.V$=i.number},p0:function(){if(!/VOD|EVENT/.test(i.$$))return void this.z$("warn",{message:"ignoring unknown playlist type: "+i.f0});this.manifest.$$=i.$$},d0:function(){if(this.manifest.playlists=a,!i.attributes)return void this.z$("warn",{message:"ignoring empty stream-inf attributes"});h.attributes||(h.attributes={}),h.attributes=t.Y$(h.attributes,i.attributes)},g0:function(){h.g0=!0},v0:function(){if(!isFinite(i.duration)||i.duration<0)return void this.z$("warn",{message:"ignoring invalid target duration: "+i.duration});this.manifest.j$=i.duration},y0:function(){if(!isFinite(i.duration)||i.duration<0)return void this.z$("warn",{message:"ignoring invalid total duration: "+i.duration});this.manifest.m0=i.duration}})[i.Z$]||o).call(s)},uri:function(){h.uri=i.uri,a.push(h),!this.manifest.j$||"duration"in h||(this.z$("warn",{message:"defaulting segment duration to the target duration"}),h.duration=this.manifest.j$),e&&(h.key=e),h={}},E0:function(){}})[i.type].call(s)})},r.prototype=new e,r.prototype.push=function(t){this.r0.push(t)},r.prototype.end=function(){this.r0.push("\n")},t.T0=i,t.I0=n,t.D$=r,t}();t.t=n},function(t,e,i){"use strict";var n=i(1),r=function(){function t(t,e,i){this.eX=new n,this.bitrate=t,this.uri=e,this.wB=i}return t.prototype.update=function(t,e,i,n,r){this.q$=t,this.V$=e,this.M$=i,this.j$=n,this.MU=r,this.updated=!0},t}();e.H$=r},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(83),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(r.lU);e.AU=o},function(t,e,i){"use strict";var n=i(15),r=i(0),o=i(3),s=i(2),a=i(5),h=a.Rt.Pi,u=function(){function t(){this.te=r.Framework.resolve(r.Framework.q.I).log(),this.w0=r.Framework.resolve(n.Pa.na),h&&o.ni.Sr.Ir&&(this.S0=r.Framework.resolve(n.Pa.sa))}return t.prototype.init=function(t,e){this.w0.init(t,e),h&&o.ni.Sr.Ir&&this.S0.init(t,e)},t.prototype.put=function(t){var e=this,i=s.defer(),n=!1;return!t.Gu.isLive()&&h&&o.ni.Sr.Ir?this.S0.put(t).then(function(t){n=t}).fail(function(t){e.te.error(t)}).finally(function(){i.resolve(n)}):this.w0.put(t).then(function(t){n=t}).fail(function(t){e.te.error(t)}).finally(function(){i.resolve(n)}),i.Te},t.prototype.get=function(t){var e=this,i=s.defer(),n=null;return this.contains(t).then(function(r){r?e.w0.get(t).then(function(i){null==i&&h&&o.ni.Sr.Ir?e.S0.get(t).then(function(t){n=t}):n=i}).fail(function(t){e.te.error(t)}).finally(function(){i.resolve(n)}):i.resolve(n)}).fail(function(t){e.te.error(t)}).finally(function(){i.resolve(n)}),i.Te},t.prototype.contains=function(t){var e=this,i=s.defer(),n=!1;return this.w0.contains(t).then(function(i){!n&&h&&o.ni.Sr.Ir?e.S0.contains(t).then(function(t){n=t}):n=i}).fail(function(t){e.te.error(t)}).finally(function(){i.resolve(n)}),i.Te},t.prototype.hk=function(t){return!t&&h&&o.ni.Sr.Ir?this.S0.hk(t):this.w0.hk(t)},t.prototype.JU=function(t){var e=this,i=s.defer(),n=[];return!t&&h&&o.ni.Sr.Ir?this.S0.JU(t).then(function(t){n=t}).fail(function(t){e.te.error(t)}).finally(function(){i.resolve(n)}):this.w0.JU(t).then(function(t){n=t}).fail(function(t){e.te.error(t)}).finally(function(){i.resolve(n)}),i.Te},t.prototype.XU=function(){this.w0.XU()},t}();e.Sr=u},function(t,e,i){"use strict";var n=i(1),r=i(22),o=i(6),s=i(3),a=i(0),h=i(10),u=function(){function t(){this.R0=new n,this.ji=new o.fn.Zi}return t.prototype.init=function(t){this.te=a.Framework.resolve(a.Framework.q.I).log(t.sessionId),this.b0=t.TC},t.prototype.TI=function(t){var e=this,i=a.Framework.resolve(a.Framework.q.B),n=!1,r=t.Ju(),u=t.Vu,c=t.Wu();t.xhr=i,t.Mu._u=a.Framework.time(),this.te.debug("FRL ISSUE REQ FOR FRAGMENT "+t.Qu.toString()+"-"+t.Mu.Ru+" ["+h.Ws[t.Yu()]+"] TO FALLBACK "),t.Qu.wR()&&(i.responseType="arraybuffer"),this.P0(t.type)&&u.range&&t.Yu()!=h.Ws.zs&&i.setRequestHeader("Range","bytes="+u.range),s.ni.j._r&&this.A0(t.type)&&0!=t.Mu.Ru&&(this.te.info("SET RANGE bytes="+t.Mu.Ru+"-"),i.setRequestHeader("Range","bytes="+t.Mu.Ru+"-")),u.zD.forEach(function(t){"range"!==t.key.toLowerCase()&&i.setRequestHeader(t.key,t.value)}),u.async&&u.timeout>0&&(i.timeout=u.timeout),u.mimeType&&i.overrideMimeType(u.mimeType),u.withCredentials&&(i.withCredentials=u.withCredentials),i.onloadstart=function(t){var e=o.fn.createEvent(Event,"loadstart",t,u);u.dispatchEvent(e)},i.onabort=function(t){if(!n){var e=o.fn.createEvent(Event,"abort",t,u);u.dispatchEvent(e)}},i.ontimeout=function(i){if(!n){e.error(t,r);var s=o.fn.createEvent(ProgressEvent,"timeout",i,u);u.dispatchEvent(s)}},i.onreadystatechange=function(t){if(u&&(i.readyState===XMLHttpRequest.HEADERS_RECEIVED&&(u.xu=i.getAllResponseHeaders()),i.readyState<XMLHttpRequest.DONE||i.readyState===XMLHttpRequest.DONE&&0===i.status)){u.readyState=i.readyState;var e=o.fn.createEvent(Event,"readystatechange",t,u);u.dispatchEvent(e)}},i.onprogress=function(n){if(!e.A0(t.type)){var r=o.fn.createEvent(ProgressEvent,"progress",n,u);u.dispatchEvent(r),i.total=n.total}t.Mu.Au=n.total},i.onload=function(h){if(n=!0,u.status=i.status,h&&0!=h.total&&(t.Mu.Au=h.total),t.xu=i.getAllResponseHeaders(),i.status<200||i.status>299)return e.te.debug("FRL SERVER RETURNED ERROR CODE "+i.status),void e.error(t,r);t.Qu.wR()?e.P0(t.type)?t.Hu=i.response:e.A0(t.type)&&(s.ni.j._r?t.Hu=a.Framework.S()?null:o.fn.appendBuffer(t.Hu,i.response):t.Hu=i.response):t.RB=i.responseText,t.loaded(),e.R0.delete(r),t.Mu.Nu=a.Framework.time(),e.C0(t),e.k0(t),e.b0.cW(t),i=null},i.onerror=function(){n||e.error(t,r)},this.R0.set(r,t),i.open("GET",c,u.async,u.username,u.password),i.send()},t.prototype.error=function(t,e){var i="COULD NOT DOWNLOAD "+t.Wu()+" status: "+t.xhr.status;t.type==r.Tu.vu?this.te.debug(i):this.te.warn(i),this.O0(t),this.R0.delete(e),this.b0.oW(t)},t.prototype.Qe=function(t){return this.R0.has(t)},t.prototype.P0=function(t){return t==r.Tu.vu||t==r.Tu.gu||t==r.Tu.du},t.prototype.A0=function(t){return t==r.Tu.yu},t.prototype.YJ=function(t){var e=this.R0.get(t);this.R0.delete(t),e&&e.xhr&&e.xhr.abort()},t.prototype.k0=function(t){this.te.info("SUCCESS FROM FALLBACK FOR "+t.Wu()+" ["+r.Tu[t.type]+"]["+t.Mu.Au+"] AFTER "+t.tl()+" [curr:"+t.il().Xi()+" avg:"+this.ji.Xi()+"]")},t.prototype.O0=function(t){},t.prototype.eW=function(){return this.ji},t.prototype.C0=function(t){t.Yu()===h.Ws.Ys&&this.ji.Ki(t.il())},t}();e.Oz=u},function(t,e,i){"use strict";var n=i(2);i(56);var r=i(0),o=i(3),s=i(15),a=i(45),h=i(54),u=i(11),c=i(88),f=hive.DN.protocol.FN.VN,l=i(9),p=i(8),d=i(5),v=i(4),g=d.Rt.Ci,y=function(){function t(){this._0=isNaN(p.HiveConfig.DebugLogs.TrackerLogs)?0:p.HiveConfig.DebugLogs.TrackerLogs,this.mn="[TRACKER] ",this.qF=0,this.N0=0,this.D0=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{0,4}){5})/,this.F0=!0,this.Hl=r.Framework.resolve(r.Framework.q.F),this.dh=r.Framework.resolve(l.Qs.Us),this.bJ=r.Framework.resolve(s.Pa.Ta)}return t.prototype.init=function(t){this.te=r.Framework.resolve(r.Framework.q.I).log(t.sessionId),this.sessionId=t.sessionId,this.Yz=t.Yz,this.wC=t.wC,this.V_=t.V_,this.L0=t.RC,this.bJ.M0(t.sessionId,this),this.B0=c.sx.nx},t.prototype.start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.context=t,this.Nx=t.Ez.K_(),this.ticket=t.Ez.Ak(),this.ss=e},t.prototype.U0=function(t){this.x0=t},t.prototype.yJ=function(){var t=this;this.lJ(),this.H0=r.Framework.setInterval(function(){t.q0()},o.ni.zt.Kt),this.q0()},t.prototype.lJ=function(){this.H0&&r.Framework.clearInterval(this.H0)},t.prototype.V0=function(){var t=this,e=n.defer(),i=new hive.DN.protocol.FN.hD,r=this.context.Ez,o=r.isLive()?StreamType.LIVE:StreamType.xG;i.sessionId=this.sessionId;var s=new f;return this.x0?(s.partnerId=this.x0.partnerId,s.customerId=this.x0.customerId):p.HiveConfig.ClientInfo.Fs&&p.HiveConfig.ClientInfo.Ls?(s.partnerId=p.HiveConfig.ClientInfo.Fs,s.customerId=p.HiveConfig.ClientInfo.Ls):(s.partnerId=this.ticket.Lh(),s.customerId=this.ticket.Mh()),i.cD=s,i.streamType=o,i.contentId=this.wC.K_(),this.dh.Vh().then(function(e){t.j0=e.Qh().Cs(),t.wC.wM(t.j0)}).fail(function(e){t.te.warn(t.mn+"Get connectivity info failed with error ",e)}).finally(function(){try{var n=new hive.snapshots.ConnectivityInfo;n.publicIp=t.cL,n.privateIp=t.j0,i.info=t.G0(n,r),i.dn=t.Q0(r,i.info),e.resolve(i)}catch(i){v.ErrorMonitor.gi().di("Prepare tracker info and query failed",t.mn,i),e.reject("ERROR")}}).done(),e.Te},t.prototype.K0=function(){var t=new Array;return this.B0==c.sx.nx?t.push(hive.DN.protocol.FN.LN.MN):this.B0==c.sx.AS?t.push(hive.DN.protocol.FN.LN.UN):this.B0==c.sx.hC?t.push(hive.DN.protocol.FN.LN.BN):this.te.warn("Wrong locality mode"),t},t.prototype.Q0=function(t,e){var i=this,n=new hive.DN.protocol.FN.XN;return n.random=o.ni.Wr.Kr,e.externalAs&&!this.qF&&(this.qF=e.externalAs),e.internalAs&&!this.N0&&(this.N0=e.internalAs),n.tD=this.K0(),n.ZN=[],this.qF>0&&this.Y0(n.ZN,hive.DN.protocol.FN.xN.External,this.qF,o.ni.Wr.Yr),this.N0>0&&(this.Y0(n.ZN,hive.DN.protocol.FN.xN.HN,this.N0,o.ni.Wr.zr),n.$N=[],t.wN().forEach(function(t){var e=i.z0(hive.DN.protocol.FN.xN.HN,i.N0,t,-1);n.$N.push({key:e,value:1})}),n.eD=[],this.wC.sV().forEach(function(t,e){var r=i.z0(hive.DN.protocol.FN.xN.HN,i.N0,e,t.type==a.cC.hC?hive.DN.protocol.FN.io.to:-1);n.eD.push({key:r,value:o.ni.Wr.Jr})})),n},t.prototype.z0=function(t,e,i,n){var r=new hive.DN.protocol.FN.jN;r.GN=t,r.QN=e;var o=new hive.DN.protocol.FN.KN;return o.bitrate=i,o.QN=r,-1!=n&&o.YN,o},t.prototype.Y0=function(t,e,i,n){var r=new hive.DN.protocol.FN.jN;r.GN=e,r.QN=i,t.push({key:r,value:n})},t.prototype.G0=function(t,e){var i=new hive.DN.protocol.FN.qN;if(r.Framework.S()?i.guid=this.Eh:i.guid=btoa(this.Eh),i.timestamp=r.Framework.time(),i.oo=void 0,this.wC.iV()&&(i.externalAs=this.wC.iV()),this.wC.Ek()&&(i.internalAs=this.wC.Ek()),null!=t){i.lo=t.publicIp;var n=new InetAddress;n.address=t.publicIp,i.publicIp=n,i.uo=t.privateIp;var o=new InetAddress;o.address=t.privateIp,i.privateIp=o}if(!this.wC.fk()&&this.wC.Sk()&&g?i.co=1:i.co=this.wC.J0(),this.context.Ez instanceof h.ON){i.ho=new Array;var s=e._C();null!=s&&(i.ao=s.bitrate);var u=e.j_();this.wC.sV().forEach(function(t,e){if(t.gR){var n=new hive.DN.protocol.FN.no;switch(n.bitrate=e,t.type){case a.cC.$s:n.state=hive.DN.protocol.FN.io.eo;break;case a.cC.aC:n.state=hive.DN.protocol.FN.io.ro;break;case a.cC.hC:n.state=hive.DN.protocol.FN.io.to}n.delta=u.JC(t.gR.ER(),e),i.ho.push(n)}})}return i},t.prototype.q0=function(){var t=this;this.te.debug(this.mn+" PREPARE REQUEST"),this.V0().then(function(e){var i=t.mn+"SENDING TRACKER REQUEST [ privateIp:"+e.info.uo+" rank:"+e.info.co+"]";switch(t._0){case 0:default:t.te.debug(i);break;case 1:t.te.debug(i+" "+JSON.stringify(e));break;case 2:t.te.debug(i,e);break;case 3:t.te.debug(i+" "+JSON.stringify(e),e)}t.bJ.W0(e)},function(e){v.ErrorMonitor.gi().di("tracker error1",t.mn,e)}).catch(function(e){v.ErrorMonitor.gi().di("tracker error2",t.mn,e)})},t.prototype.X0=function(t){this.B0=t},t.prototype.ZJ=function(t){var e=this;switch(this._0){case 1:this.te.debug(this.mn+this.context.Ez.Ak()+" Tracker Response: "+JSON.stringify(t));break;case 2:this.te.debug(this.mn+this.context.Ez.Ak()+" Tracker Response: ",t);break;case 3:this.te.debug(this.mn+this.context.Ez.Ak()+" Tracker Response: "+JSON.stringify(t),t)}this.qF=t.Tk.externalAs,this.N0=t.Tk.internalAs,this.cL=t.Tk.lo,this.j0=t.Tk.uo,this.wC.yM(this.cL),this.wC.Z0(this.N0),this.wC.$0(this.qF),this.dh.gM(this.cL,this.j0,this.N0),this.te.debug(this.mn+"Reporting from tracker public IP:"+this.cL+" private IP: "+this.j0+" ExtAs:"+this.qF+" inAs:"+this.N0),!this.wC.fk()&&this.wC.Sk()&&g?this.L0.Jx(!1):this.L0.e1(t.tD,t.lD);var i=this.t1(t);this.ss.forEach(function(t){return t.Ax(i,e.F0)}),this.F0=!1},t.prototype.t1=function(t){for(var e=[],i=0,n=t.lD;i<n.length;i++){var r=n[i],o=new u.po(u.Zs.Xs,r);e.push(o)}return e},t.prototype.aH=function(t){},t.prototype.Zh=function(t){this.Eh=t,this.te.info(this.mn+"CONNECTED "+this.Eh),this.L0.i1(),this.yJ()},t.prototype.yq=function(){},t}();e.Nz=y},function(t,e,i){"use strict";var n=i(1),r=i(0),o=i(6),s=function(){function t(t,e){this.id=t,this.size=e}return t}(),a=function(){function t(){this.n1=new n,this.s1=new n,this.te=r.Framework.resolve(r.Framework.q.I).log()}return t.prototype.put=function(t,e){var i=t.mN,n=t.size;t.bitrate,this.n1.has(i)||(this.n1.set(i,new s(i,n)),this.s1.set(i,new Array)),this.s1.get(i).push(e)},t.prototype.contains=function(t){return this.s1.has(t)},t.prototype.mk=function(t){return this.s1.get(t)},t.prototype.o1=function(t){return this.n1.get(t)},t.prototype.dV=function(t){var e=this;this.s1.forEach(function(i,n){o.fn.tn(i,t,!1),0===i.length&&(e.s1.delete(n),e.n1.delete(n))})},t.prototype.ZU=function(){var t=this;this.s1.forEach(function(e,i){t.te.debug("OBJIDX FR "+i+" PS "+e.map(function(t){return t.qq.Pl._l}).reduce(function(t,e){return t+","+e}))})},t}();e.Mz=a},function(t,e,i){"use strict";var n=i(1),r=i(3),o=i(0),s=i(6),a=i(11),h=i(157),u=i(43),c=i(89),f=i(5),l=i(4),p=f.Rt.Ci,d=function(){function t(){this.Eh=null,this.a1=new n,this.Zq=new n}return t.prototype.init=function(t){this.te=o.Framework.resolve(o.Framework.q.I).log(t.sessionId),this.mn="S["+t.sessionId+"]",this.SC=t.SC,this.wC=t.wC,this.h1=t.x_,(p||o.Framework.S()&&u.iC.tC)&&(this.$z=t.$z),this.start()},t.prototype.start=function(){this.c1=!0},t.prototype.stop=function(){this.c1=!1},t.prototype.Ax=function(t,e){var i=this;try{if(this.c1){var n=[];t.forEach(function(t){var e=null;i.u1(),t.guid!=i.Eh&&(t.type==a.Zs.Xs?e=i.l1(t):p||o.Framework.S()&&u.iC.tC?(e=i.f1(t),i.$z.mx(t).then(function(){i.SC.mq(i.Zq.get(t.guid))}).fail(function(e){e&&e!=c.lH.Cx&&(i.Zq.delete(t.guid),l.ErrorMonitor.gi().di("LEADER ELECTION FAILED WITH ERROR",i.mn,e))})):e=i.f1(t)),e&&n.push(e.Tk.guid)}),this.g_(),e&&this.SC.bq(e),n.length>0&&this.te.debug("DISCOVERED NEW "+n.length+"/"+t.length+": ["+n.join(", ")+"]")}}catch(t){l.ErrorMonitor.gi().di("DISCOVERED PEERS FAILED",this.mn,t)}},t.prototype.g_=function(){var t=this.a1.length+this.Zq.length;this.h1.d1(t)},t.prototype.u1=function(){this.a1.length>=r.ni.Qr.jr&&this.g1(this.a1),this.Zq.length>=r.ni.Qr.Gr&&this.g1(this.Zq)},t.prototype.g1=function(t){var e=t.keys()[o.Framework.random()*this.a1.length];t.delete(e)},t.prototype.f1=function(t){var e=null;return this.a1.has(t.guid)?(e=this.a1.get(t.guid),this.a1.delete(t.guid),this.Zq.set(t.guid,e)):this.Zq.has(t.guid)&&(e=this.Zq.get(t.guid)),e?(e.U0(t),null):(e=new h.v1(t),this.Zq.set(t.guid,e),e)},t.prototype.l1=function(t){var e=null;if(this.Zq.has(t.guid))this.f1(t);else{if(!this.a1.has(t.guid))return e=new h.v1(t),this.a1.set(t.guid,e),e;e=this.a1.get(t.guid),e.U0(t)}return null},t.prototype.Pq=function(t,e){var i=[];return this.c1&&(p||o.Framework.S()&&u.iC.tC?i=s.fn.nn(this.a1.values()):(i=this.a1.values(),this.Zq.forEach(function(t,e){i.push(t)}),i=s.fn.nn(i))),t?i:e?i.slice(0,e):i.slice(0,2*r.ni.Ot.Pt)},t.prototype.zq=function(t){return this.a1.has(t)?this.a1.get(t):this.Zq.has(t)?this.Zq.get(t):null},t.prototype.Zh=function(t){this.te.info("MEMBERSHIP SERVER CONNECTED"),this.Eh=t,this.wC.vq(this.Eh)},t.prototype.yq=function(){},t.prototype.aH=function(t){this.te.debug("Peer "+t+" disconnected"),this.a1.delete(t),this.Zq.delete(t),this.g_()},t}();e.Qr=d},function(t,e,i){"use strict";var n=i(11),r=function(){function t(t){this.Tk=t}return t.prototype.Uq=function(){return this.Tk.type===n.Zs.K},t.prototype.U0=function(t){this.Tk.type==n.Zs.Xs&&t.type==n.Zs.K?this.Tk.type=n.Zs.K:this.Tk.type==n.Zs.Xs&&t.type==n.Zs.Xs||this.Tk.type==n.Zs.K&&t.type==n.Zs.K?this.m1(this.Tk,t):this.Tk.type==n.Zs.K&&t.type==n.Zs.Xs&&(this.m1(this.Tk,t),this.Tk.type=n.Zs.K)},t.prototype.SV=function(t){this.Tk.ao=t},t.prototype.m1=function(t,e){t.internalAs=this.E1(t.internalAs,e.internalAs),t.externalAs=this.E1(t.externalAs,e.externalAs),t.oo=this.E1(t.oo,e.oo),t.bandwidth=this.E1(t.bandwidth,e.bandwidth),t.ao=this.E1(t.ao,e.ao),t.uo=this.E1(t.uo,e.uo),t.lo=this.E1(t.lo,e.lo),t.co=this.E1(t.co,e.co),t.timestamp=this.E1(t.timestamp,e.timestamp),e.so&&(t.so=this.E1(t.so,e.so)),e.ho&&(t.ho=e.ho)},t.prototype.E1=function(t,e){return t?e&&t!=e&&(t=e):e&&(t=e),t},t}();e.v1=r},function(t,e,i){(function(t){var n,r,o;/**
 * @license ProtoBuf.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ProtoBuf.js for details
 */
!function(s){"use strict";function a(t){var e={};return e.T1=t,e.DR=t.DR||null,e.VERSION="4.0.0-b3",e.I1={},e.I1.w1=0,e.I1.S1=1,e.I1.R1=2,e.I1.b1=3,e.I1.P1=4,e.I1.A1=5,e.C1=[e.I1.w1,e.I1.S1,e.I1.A1],e.O1={_1:{name:"int32",N1:e.I1.w1,defaultValue:0},D1:{name:"uint32",N1:e.I1.w1,defaultValue:0},F1:{name:"sint32",N1:e.I1.w1,defaultValue:0},L1:{name:"int64",N1:e.I1.w1,defaultValue:e.DR?e.DR.ZERO:void 0},M1:{name:"uint64",N1:e.I1.w1,defaultValue:e.DR?e.DR.vH:void 0},B1:{name:"sint64",N1:e.I1.w1,defaultValue:e.DR?e.DR.ZERO:void 0},U1:{name:"bool",N1:e.I1.w1,defaultValue:!1},H1:{name:"double",N1:e.I1.S1,defaultValue:0},qb:{name:"string",N1:e.I1.R1,defaultValue:""},Hn:{name:"bytes",N1:e.I1.R1,defaultValue:null},q1:{name:"fixed32",N1:e.I1.A1,defaultValue:0},V1:{name:"sfixed32",N1:e.I1.A1,defaultValue:0},j1:{name:"fixed64",N1:e.I1.S1,defaultValue:e.DR?e.DR.vH:void 0},G1:{name:"sfixed64",N1:e.I1.S1,defaultValue:e.DR?e.DR.ZERO:void 0},float:{name:"float",N1:e.I1.A1,defaultValue:0},Q1:{name:"enum",N1:e.I1.w1,defaultValue:0},message:{name:"message",N1:e.I1.R1,defaultValue:null},group:{name:"group",N1:e.I1.b1,defaultValue:null}},e.K1=[e.O1._1,e.O1.F1,e.O1.V1,e.O1.D1,e.O1.q1,e.O1.L1,e.O1.B1,e.O1.G1,e.O1.M1,e.O1.j1,e.O1.U1,e.O1.qb,e.O1.Hn],e.Y1=1,e.z1=536870911,e.J1=!1,e.W1=!0,e.X1=!0,e.hf=function(){Object.create||(Object.create=function(t){function e(){}if(arguments.length>1)throw Error("Object.create polyfill only accepts the first parameter.");return e.prototype=t,new e});var t={};t.Z1=!1;try{t.Z1="function"==typeof i(16).e2&&"function"==typeof i(59).resolve}catch(t){}return t.t2=function(){for(var t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],e=null,i=0;i<t.length;i++){try{e=t[i]()}catch(t){continue}break}if(!e)throw Error("XMLHttpRequest is not supported");return e},t.fetch=function(e,n){if(n&&"function"!=typeof n&&(n=null),t.Z1)if(n)i(16).i2(e,function(t,e){n(t?null:""+e)});else try{return i(16).e2(e)}catch(t){return null}else{var r=t.t2();if(r.open("GET",e,!!n),r.setRequestHeader("Accept","text/plain"),"function"==typeof r.overrideMimeType&&r.overrideMimeType("text/plain"),!n)return r.send(null),200==r.status||0==r.status&&"string"==typeof r.responseText?r.responseText:null;if(r.onreadystatechange=function(){4==r.readyState&&n(200==r.status||0==r.status&&"string"==typeof r.responseText?r.responseText:null)},4==r.readyState)return;r.send(null)}},t.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},t}(),e.Lang={OPEN:"{",n2:"}",s2:"[",o2:"]",a2:",",EQUAL:"=",h2:";",c2:",",u2:'"',l2:'"',f2:"'",d2:"'",g2:"(",v2:")",m2:"<",E2:">",T2:/[\s\{\}=;\[\],'"\(\)<>]/g,I2:/^(?:required|optional|repeated|map)$/,jO:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,BO:/^[a-zA-Z_][a-zA-Z_0-9]*$/,w2:/^[a-zA-Z][a-zA-Z_0-9]*$/,S2:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,R2:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,b2:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,P2:/^(?:[1-9][0-9]*|0)$/,A2:/^0[xX][0-9a-fA-F]+$/,C2:/^0[0-7]+$/,O2:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,_2:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,N2:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,D2:/\s/,FI:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,BOOL:/^(?:true|false)$/i},e.F2=function(t,e){var i={},n=function(t){this.source=""+t,this.index=0,this.line=1,this.stack=[],this.L2=!1,this.M2=e.l2},r=n.prototype;r.YX=function(){e.FI.lastIndex=this.index-1;var t;if(null!==(t=e.FI.exec(this.source))){var i=void 0!==t[1]?t[1]:t[2];return this.index=e.FI.lastIndex,this.stack.push(this.M2),i}throw Error("Unterminated string at line "+this.line+", index "+this.index)},r.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(this.L2)return this.L2=!1,this.YX();var t,i;do{for(t=!1;e.D2.test(i=this.source.charAt(this.index));)if(this.index++,"\n"===i&&this.line++,this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if("/"===this.source.charAt(++this.index)){for(;"\n"!==this.source.charAt(this.index);)if(++this.index==this.source.length)return null;this.index++,this.line++,t=!0}else{if("*"!==this.source.charAt(this.index))throw Error("Unterminated comment at line "+this.line+": /"+this.source.charAt(this.index));for(i="";i+(i=this.source.charAt(this.index))!=="*/";)if(this.index++,"\n"===i&&this.line++,this.index===this.source.length)return null;this.index++,t=!0}}while(t);if(this.index===this.source.length)return null;var n=this.index;if(e.T2.lastIndex=0,e.T2.test(this.source.charAt(n)))++n;else for(++n;n<this.source.length&&!e.T2.test(this.source.charAt(n));)n++;var r=this.source.substring(this.index,this.index=n);return r===e.u2?(this.L2=!0,this.M2=e.l2):r===e.f2&&(this.L2=!0,this.M2=e.d2),r},r.Qk=function(){if(0===this.stack.length){var t=this.next();if(null===t)return null;this.stack.push(t)}return this.stack[0]},r.toString=function(){return"Tokenizer("+this.index+"/"+this.source.length+" at line "+this.line+")"},i.B2=n;var o=function(t){this.U2=new n(t)},s=o.prototype;return s.parse=function(){for(var t,e={name:"[ROOT]",H2:null,q2:[],V2:[],imports:[],options:{},DN:[]},i=!0;t=this.U2.next();)switch(t){case"package":if(!i||null!==e.H2)throw Error("Unexpected package at line "+this.U2.line);e.H2=this.j2(t);break;case"import":if(!i)throw Error("Unexpected import at line "+this.U2.line);e.imports.push(this.G2(t));break;case"message":this.Q2(e,null,t),i=!1;break;case"enum":this.K2(e,t),i=!1;break;case"option":this.Y2(e,t);break;case"service":this.z2(e,t);break;case"extend":this.J2(e,t);break;case"syntax":e.W2=this.X2(e);break;default:throw Error("Unexpected token at line "+this.U2.line+": "+t)}return delete e.name,e},s.Z2=function(t){var i=1;if("-"==t.charAt(0)&&(i=-1,t=t.substring(1)),e.P2.test(t))return i*parseInt(t,10);if(e.A2.test(t))return i*parseInt(t.substring(2),16);if(e.C2.test(t))return i*parseInt(t.substring(1),8);if(e.O2.test(t))return"inf"===t?i*(1/0):"nan"===t?NaN:i*parseFloat(t);throw Error("Illegal number at line "+this.U2.line+": "+(i<0?"-":"")+t)},s.e3=function(){var t,i,n="";do{if(i=this.U2.next(),n+=this.U2.next(),(t=this.U2.next())!==i)throw Error("Illegal end of string at line "+this.U2.line+": "+t);t=this.U2.Qk()}while(t===e.u2||t===e.f2);return n},s.t3=function(t,i){var n=-1,r=1;if("-"==t.charAt(0)&&(r=-1,t=t.substring(1)),e.P2.test(t))n=parseInt(t);else if(e.A2.test(t))n=parseInt(t.substring(2),16);else{if(!e.C2.test(t))throw Error("Illegal id at line "+this.U2.line+": "+(r<0?"-":"")+t);n=parseInt(t.substring(1),8)}if(n=r*n|0,!i&&n<0)throw Error("Illegal id at line "+this.U2.line+": "+(r<0?"-":"")+t);return n},s.j2=function(t){if(t=this.U2.next(),!e.S2.test(t))throw Error("Illegal package name at line "+this.U2.line+": "+t);var i=t;if((t=this.U2.next())!=e.h2)throw Error("Illegal end of package at line "+this.U2.line+": "+t);return i},s.G2=function(t){if(t=this.U2.Qk(),"public"===t&&(this.U2.next(),t=this.U2.Qk()),t!==e.u2&&t!==e.f2)throw Error("Illegal start of import at line "+this.U2.line+": "+t);var i=this.e3();if((t=this.U2.next())!==e.h2)throw Error("Illegal end of import at line "+this.U2.line+": "+t);return i},s.Y2=function(t,i){i=this.U2.next();var n=!1;if(i==e.g2&&(n=!0,i=this.U2.next()),!e.S2.test(i)&&!/google\.protobuf\./.test(i))throw Error("Illegal option name in message "+t.name+" at line "+this.U2.line+": "+i);var r=i;if(i=this.U2.next(),n){if(i!==e.v2)throw Error("Illegal end in message "+t.name+", option "+r+" at line "+this.U2.line+": "+i);r="("+r+")",i=this.U2.next(),e.R2.test(i)&&(r+=i,i=this.U2.next())}if(i!==e.EQUAL)throw Error("Illegal operator in message "+t.name+", option "+r+" at line "+this.U2.line+": "+i);var o;if((i=this.U2.Qk())===e.u2||i===e.f2)o=this.e3();else if(this.U2.next(),e.b2.test(i))o=this.Z2(i,!0);else if(e.BOOL.test(i))o="true"===i;else{if(!e.S2.test(i))throw Error("Illegal option value in message "+t.name+", option "+r+" at line "+this.U2.line+": "+i);o=i}if((i=this.U2.next())!==e.h2)throw Error("Illegal end of option in message "+t.name+", option "+r+" at line "+this.U2.line+": "+i);t.options[r]=o},s.r3=function(t,i){for(var n;;){if(null===(n=this.U2.next()))throw Error("Unexpected EOF in "+t.name+", "+i+" at line "+this.U2.line);if(n===e.h2)break}},s.z2=function(t,i){if(i=this.U2.next(),!e.BO.test(i))throw Error("Illegal service name at line "+this.U2.line+": "+i);var n=i,r={name:n,i3:{},options:{}};if((i=this.U2.next())!==e.OPEN)throw Error("Illegal start of service "+n+" at line "+this.U2.line+": "+i);do{if("option"===(i=this.U2.next()))this.Y2(r,i);else if("rpc"===i)this.n3(r,i);else if(i!==e.n2)throw Error("Illegal type of service "+n+" at line "+this.U2.line+": "+i)}while(i!==e.n2);t.DN.push(r)},s.n3=function(t,i){var n=i;if(i=this.U2.next(),!e.BO.test(i))throw Error("Illegal method name in service "+t.name+" at line "+this.U2.line+": "+i);var r=i,o={TI:null,response:null,s3:!1,o3:!1,options:{}};if((i=this.U2.next())!==e.g2)throw Error("Illegal start of request type in service "+t.name+"#"+r+" at line "+this.U2.line+": "+i);if(i=this.U2.next(),"stream"===i.toLowerCase()&&(o.s3=!0,i=this.U2.next()),!e.S2.test(i))throw Error("Illegal request type in service "+t.name+"#"+r+" at line "+this.U2.line+": "+i);if(o.TI=i,(i=this.U2.next())!=e.v2)throw Error("Illegal end of request type in service "+t.name+"#"+r+" at line "+this.U2.line+": "+i);if(i=this.U2.next(),"returns"!==i.toLowerCase())throw Error("Illegal delimiter in service "+t.name+"#"+r+" at line "+this.U2.line+": "+i);if((i=this.U2.next())!=e.g2)throw Error("Illegal start of response type in service "+t.name+"#"+r+" at line "+this.U2.line+": "+i);if(i=this.U2.next(),"stream"===i.toLowerCase()&&(o.o3=!0,i=this.U2.next()),o.response=i,(i=this.U2.next())!==e.v2)throw Error("Illegal end of response type in service "+t.name+"#"+r+" at line "+this.U2.line+": "+i);if((i=this.U2.next())===e.OPEN){do{if("option"===(i=this.U2.next()))this.Y2(o,i);else if(i!==e.n2)throw Error("Illegal start of option inservice "+t.name+"#"+r+" at line "+this.U2.line+": "+i)}while(i!==e.n2);this.U2.Qk()===e.h2&&this.U2.next()}else if(i!==e.h2)throw Error("Illegal delimiter in service "+t.name+"#"+r+" at line "+this.U2.line+": "+i);void 0===t[n]&&(t[n]={}),t[n][r]=o},s.Q2=function(t,i,n){var r={},o="group"===n;if(n=this.U2.next(),!e.BO.test(n))throw Error("Illegal "+(o?"group":"message")+" name"+(t?" in message "+t.name:"")+" at line "+this.U2.line+": "+n);if(r.name=n,o){if((n=this.U2.next())!==e.EQUAL)throw Error("Illegal id assignment after group "+r.name+" at line "+this.U2.line+": "+n);n=this.U2.next();try{i.id=this.t3(n)}catch(t){throw Error("Illegal field id value for group "+r.name+"#"+i.name+" at line "+this.U2.line+": "+n)}r.a3=!0}if(r.h3=[],r.V2=[],r.q2=[],r.options={},r.c3={},n=this.U2.next(),n===e.s2&&i&&(this.u3(r,i,n),n=this.U2.next()),n!==e.OPEN)throw Error("Illegal start of "+(o?"group":"message")+" "+r.name+" at line "+this.U2.line+": "+n);for(;;){if((n=this.U2.next())===e.n2){(n=this.U2.Qk())===e.h2&&this.U2.next();break}if(e.I2.test(n))this.l3(r,n);else if("oneof"===n)this.f3(r,n);else if("enum"===n)this.K2(r,n);else if("message"===n)this.Q2(r,null,n);else if("option"===n)this.Y2(r,n);else if("extensions"===n)r.extensions=this.d3(r,n);else if("extend"===n)this.J2(r,n);else{if(!e.S2.test(n))throw Error("Illegal token in message "+r.name+" at line "+this.U2.line+": "+n);this.l3(r,"optional",n)}}return t.q2.push(r),r},s.l3=function(t,i,n){var r={},o=null;if(r.g3=i,r.options={},i=void 0!==n?n:this.U2.next(),"map"===r.g3){if(i!==e.m2)throw Error("Illegal token in message "+t.name+" at line "+this.U2.line+": "+i);if(i=this.U2.next(),!e.jO.test(i)&&!e.S2.test(i))throw Error("Illegal token in message "+t.name+" at line "+this.U2.line+": "+i);if(r.keytype=i,(i=this.U2.next())!==e.c2)throw Error("Illegal token in message "+t.name+" at line "+this.U2.line+": "+i);if(i=this.U2.next(),!e.jO.test(i)&&!e.S2.test(i))throw Error("Illegal token in message "+t.name+" at line "+this.U2.line+": "+i);if(r.type=i,(i=this.U2.next())!==e.E2)throw Error("Illegal token in message "+t.name+" at line "+this.U2.line+": "+i);if(i=this.U2.next(),!e.BO.test(i))throw Error("Illegal token in message "+t.name+" at line "+this.U2.line+": "+i);if(r.name=i,(i=this.U2.next())!==e.EQUAL)throw Error("Illegal token in field "+t.name+"#"+r.name+" at line "+this.line+": "+i);i=this.U2.next();try{r.id=this.t3(i)}catch(e){throw Error("Illegal field id in message "+t.name+"#"+r.name+" at line "+this.U2.line+": "+i)}if(i=this.U2.next(),i===e.s2&&(this.u3(t,r,i),i=this.U2.next()),i!==e.h2)throw Error("Illegal delimiter in message "+t.name+"#"+r.name+" at line "+this.U2.line+": "+i)}else if("group"===i){if(o=this.Q2(t,r,i),!/^[A-Z]/.test(o.name))throw Error("Group names must start with a capital letter");r.type=o.name,r.name=o.name.toLowerCase(),(i=this.U2.Qk())===e.h2&&this.U2.next()}else{if(!e.jO.test(i)&&!e.S2.test(i))throw Error("Illegal field type in message "+t.name+" at line "+this.U2.line+": "+i);if(r.type=i,i=this.U2.next(),!e.BO.test(i))throw Error("Illegal field name in message "+t.name+" at line "+this.U2.line+": "+i);if(r.name=i,(i=this.U2.next())!==e.EQUAL)throw Error("Illegal token in field "+t.name+"#"+r.name+" at line "+this.U2.line+": "+i);i=this.U2.next();try{r.id=this.t3(i)}catch(e){throw Error("Illegal field id in message "+t.name+"#"+r.name+" at line "+this.U2.line+": "+i)}if(i=this.U2.next(),i===e.s2&&(this.u3(t,r,i),i=this.U2.next()),i!==e.h2)throw Error("Illegal delimiter in message "+t.name+"#"+r.name+" at line "+this.U2.line+": "+i)}return t.h3.push(r),r},s.f3=function(t,i){if(i=this.U2.next(),!e.BO.test(i))throw Error("Illegal oneof name in message "+t.name+" at line "+this.U2.line+": "+i);var n,r=i,o=[];if((i=this.U2.next())!==e.OPEN)throw Error("Illegal start of oneof "+r+" at line "+this.U2.line+": "+i);for(;this.U2.Qk()!==e.n2;)n=this.l3(t,"optional"),n.v3=r,o.push(n.id);this.U2.next(),t.c3[r]=o},s.u3=function(t,i,n){for(var r=!0;(n=this.U2.next())!==e.o2;){if(n===e.a2){if(r)throw Error("Illegal start of options in message "+t.name+"#"+i.name+" at line "+this.U2.line+": "+n);n=this.U2.next()}this.y3(t,i,n),r=!1}},s.y3=function(t,i,n){var r=!1;if(n===e.g2&&(n=this.U2.next(),r=!0),!e.S2.test(n))throw Error("Illegal field option in "+t.name+"#"+i.name+" at line "+this.U2.line+": "+n);var o=n;if(n=this.U2.next(),r){if(n!==e.v2)throw Error("Illegal delimiter in "+t.name+"#"+i.name+" at line "+this.U2.line+": "+n);o="("+o+")",n=this.U2.next(),e.R2.test(n)&&(o+=n,n=this.U2.next())}if(n!==e.EQUAL)throw Error("Illegal token in "+t.name+"#"+i.name+" at line "+this.U2.line+": "+n);var s;if((n=this.U2.Qk())===e.u2||n===e.f2)s=this.e3();else if(e.b2.test(n,!0))s=this.Z2(this.U2.next(),!0);else if(e.BOOL.test(n))s="true"===this.U2.next().toLowerCase();else{if(!e.S2.test(n))throw Error("Illegal value in message "+t.name+"#"+i.name+", option "+o+" at line "+this.U2.line+": "+n);s=this.U2.next()}i.options[o]=s},s.K2=function(t,i){var n={};if(i=this.U2.next(),!e.BO.test(i))throw Error("Illegal enum name in message "+t.name+" at line "+this.U2.line+": "+i);if(n.name=i,(i=this.U2.next())!==e.OPEN)throw Error("Illegal start of enum "+n.name+" at line "+this.U2.line+": "+i);for(n.values=[],n.options={};;){if((i=this.U2.next())===e.n2){(i=this.U2.Qk())===e.h2&&this.U2.next();break}if("option"==i)this.Y2(n,i);else{if(!e.BO.test(i))throw Error("Illegal name in enum "+n.name+" at line "+this.U2.line+": "+i);this.m3(n,i)}}t.V2.push(n)},s.m3=function(t,i){var n={};if(n.name=i,(i=this.U2.next())!==e.EQUAL)throw Error("Illegal token in enum "+t.name+" at line "+this.U2.line+": "+i);i=this.U2.next();try{n.id=this.t3(i,!0)}catch(e){throw Error("Illegal id in enum "+t.name+" at line "+this.U2.line+": "+i)}if(t.values.push(n),(i=this.U2.next())===e.s2){var r={options:{}};this.u3(t,r,i),i=this.U2.next()}if(i!==e.h2)throw Error("Illegal delimiter in enum "+t.name+" at line "+this.U2.line+": "+i)},s.d3=function(i,n){var r=[];if(n=this.U2.next(),"min"===n?r.push(t.Y1):"max"===n?r.push(t.z1):r.push(this.Z2(n)),"to"!==(n=this.U2.next()))throw Error("Illegal extensions delimiter in message "+i.name+" at line "+this.U2.line+": "+n);if(n=this.U2.next(),"min"===n?r.push(t.Y1):"max"===n?r.push(t.z1):r.push(this.Z2(n)),(n=this.U2.next())!==e.h2)throw Error("Illegal extensions delimiter in message "+i.name+" at line "+this.U2.line+": "+n);return r},s.J2=function(t,i){if(i=this.U2.next(),!e.S2.test(i))throw Error("Illegal message name at line "+this.U2.line+": "+i);var n={};if(n.E3=i,n.h3=[],(i=this.U2.next())!==e.OPEN)throw Error("Illegal start of extend "+n.name+" at line "+this.U2.line+": "+i);for(;;){if((i=this.U2.next())===e.n2){(i=this.U2.Qk())==e.h2&&this.U2.next();break}if(e.I2.test(i))this.l3(n,i);else{if(!e.S2.test(i))throw Error("Illegal token in extend "+n.name+" at line "+this.U2.line+": "+i);this.l3(n,"optional",i)}}return t.q2.push(n),n},s.X2=function(t){var i=this.U2.next();if(i!==e.EQUAL)throw Error("Illegal token at line "+this.U2.line+": "+i);if((i=this.U2.Qk())!==e.u2&&i!==e.f2)throw Error("Illegal token at line "+this.U2.line+": "+i);var n=this.e3();if((i=this.U2.next())!==e.h2)throw Error("Illegal token at line "+this.U2.line+": "+i);return n},s.toString=function(){return"Parser"},i.D$=o,i}(e,e.Lang),e.T3=function(e){function i(i){if("string"==typeof i&&(i=e.O1[i]),void 0===i.defaultValue)throw Error("default value for type "+i.name+" is not supported");return i==e.O1.Hn?new t(0):i.defaultValue}function n(t,i){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.Cb&&t.low===t.low&&t.high===t.high)return new e.DR(t.low,t.high,void 0===i?t.Cb:i);if("string"==typeof t)return e.DR.gp(t,i||!1,10);if("number"==typeof t)return e.DR.dp(t,i||!1);throw Error("not convertible to Long")}function r(t,i){var n=i.Tb(),o=7&n,s=n>>>3;switch(o){case e.I1.w1:do{n=i.GR()}while(128==(128&n));break;case e.I1.S1:i.offset+=8;break;case e.I1.R1:n=i.Tb(),i.offset+=n;break;case e.I1.b1:r(s,i);break;case e.I1.P1:if(s===t)return!1;throw Error("Illegal GROUPEND after unknown group: "+s+" ("+t+" expected)");case e.I1.A1:i.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+t+": "+o)}return!0}var o={},s=function(t,e,i){this.I3=t,this.parent=e,this.name=i,this.className},a=s.prototype;a.w3=function(){for(var t=this.name,e=this;null!=(e=e.parent);)t=e.name+"."+t;return t},a.toString=function(t){return(t?this.className+" ":"")+this.w3()},a.sp=function(){throw Error(this.toString(!0)+" cannot be built directly")},o.S3=s;var h=function(t,e,i,n,r){s.call(this,t,e,i),this.className="Namespace",this.children=[],this.options=n||{},this.W2=r||"proto2"},u=h.prototype=Object.create(s.prototype);u.R3=function(t){if(null==(t=t||null))return this.children.slice();for(var e=[],i=0,n=this.children.length;i<n;++i)this.children[i]instanceof t&&e.push(this.children[i]);return e},u.b3=function(t){var e;if(e=this.P3(t.name))if(e instanceof l.A3&&e.name!==e.C3&&null===this.P3(e.C3))e.name=e.C3;else{if(!(t instanceof l.A3&&t.name!==t.C3&&null===this.P3(t.C3)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+t.name);t.name=t.C3}this.children.push(t)},u.P3=function(t){for(var e="number"==typeof t?"id":"name",i=0,n=this.children.length;i<n;++i)if(this.children[i][e]===t)return this.children[i];return null},u.resolve=function(t,e){var i="string"==typeof t?t.split("."):t,n=this,r=0;if(""===i[r]){for(;null!==n.parent;)n=n.parent;r++}var s;do{do{if(!(s=n.P3(i[r]))||!(s instanceof o.S3)||e&&s instanceof o.pc.A3){n=null;break}n=s,r++}while(r<i.length);if(null!=n)break;if(null!==this.parent)return this.parent.resolve(t,e)}while(null!=n);return n},u.O3=function(t){var e=[],i=t;do{e.unshift(i.name),i=i.parent}while(null!==i);for(var n=1;n<=e.length;n++){var r=e.slice(e.length-n);if(t===this.resolve(r,!(t instanceof o.pc.A3)))return r.join(".")}return t.w3()},u.sp=function(){for(var t,e={},i=this.children,n=0,r=i.length;n<r;++n)(t=i[n])instanceof h&&(e[t.name]=t.sp());return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this._3()}),e},u._3=function(){for(var t={},e=Object.keys(this.options),i=0,n=e.length;i<n;++i){var r=e[i],o=this.options[e[i]];t[r]=o}return t},u.N3=function(t){return void 0===t?this.options:void 0!==this.options[t]?this.options[t]:null},o.D3=h;var c=function(t,i,n,r){if(this.type=t,this.F3=i,this.L3=n,this.W2=r,n&&e.K1.indexOf(t)<0)throw Error("Invalid map key type: "+t.name)},f=c.prototype;f.M3=i,f.B3=function(i){var r=function(t,e){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+t+" ("+e+")")}.bind(this);switch(this.type){case e.O1._1:case e.O1.F1:case e.O1.V1:return("number"!=typeof i||i===i&&i%1!=0)&&r(typeof i,"not an integer"),i>4294967295?0|i:i;case e.O1.D1:case e.O1.q1:return("number"!=typeof i||i===i&&i%1!=0)&&r(typeof i,"not an integer"),i<0?i>>>0:i;case e.O1.L1:case e.O1.B1:case e.O1.G1:if(e.DR)try{return n(i,!1)}catch(t){r(typeof i,t.message)}else r(typeof i,"requires Long.js");case e.O1.M1:case e.O1.j1:if(e.DR)try{return n(i,!0)}catch(t){r(typeof i,t.message)}else r(typeof i,"requires Long.js");case e.O1.U1:return"boolean"!=typeof i&&r(typeof i,"not a boolean"),i;case e.O1.float:case e.O1.H1:return"number"!=typeof i&&r(typeof i,"not a number"),i;case e.O1.qb:return"string"==typeof i||i&&i instanceof String||r(typeof i,"not a string"),""+i;case e.O1.Hn:return t.LR(i)?i:t.wrap(i,"base64");case e.O1.Q1:var o=this.F3.R3(e.T3.x3.U3);for(a=0;a<o.length;a++){if(o[a].name==i)return o[a].id;if(o[a].id==i)return o[a].id}if("proto3"===this.W2)return("number"!=typeof i||i===i&&i%1!=0)&&r(typeof i,"not an integer"),(i>4294967295||i<0)&&r(typeof i,"not in range for uint32"),i;r(i,"not a valid enum value");case e.O1.group:case e.O1.message:if(i&&"object"==typeof i||r(typeof i,"object expected"),i instanceof this.F3.H3)return i;if(i instanceof e.q3.pc){var s={};for(var a in i)i.hasOwnProperty(a)&&(s[a]=i[a]);i=s}return new this.F3.H3(i)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+i+" (undefined type "+this.type+")")},f.V3=function(i,n){if(null===n)return 0;var r;switch(this.type){case e.O1._1:return n<0?t.Rb(n):t.gb(n);case e.O1.D1:return t.gb(n);case e.O1.F1:return t.gb(t.vb(n));case e.O1.q1:case e.O1.V1:case e.O1.float:return 4;case e.O1.L1:case e.O1.M1:return t.Rb(n);case e.O1.B1:return t.Rb(t.Ab(n));case e.O1.j1:case e.O1.G1:return 8;case e.O1.U1:return 1;case e.O1.Q1:return t.gb(n);case e.O1.H1:return 8;case e.O1.qb:return r=t.zb(n),t.gb(r)+r;case e.O1.Hn:if(n.uP()<0)throw Error("Illegal value for "+this.toString(!0)+": "+n.uP()+" bytes remaining");return t.gb(n.uP())+n.uP();case e.O1.message:return r=this.F3.j3(n),t.gb(r)+r;case e.O1.group:return(r=this.F3.j3(n))+t.gb(i<<3|e.I1.P1)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+n+" (unknown type)")},f.G3=function(i,n,r){if(null===n)return r;switch(this.type){case e.O1._1:n<0?r.Fb(n):r.mb(n);break;case e.O1.D1:r.mb(n);break;case e.O1.F1:r.Eb(n);break;case e.O1.q1:r.$R(n);break;case e.O1.V1:r.XR(n);break;case e.O1.L1:case e.O1.M1:r.Fb(n);break;case e.O1.B1:r.Lb(n);break;case e.O1.j1:r.sb(n);break;case e.O1.G1:r.tb(n);break;case e.O1.U1:"string"==typeof n?r.mb("false"===n.toLowerCase()?0:!!n):r.mb(n?1:0);break;case e.O1.Q1:r.mb(n);break;case e.O1.float:r.ab(n);break;case e.O1.H1:r.lb(n);break;case e.O1.qb:r.Zb(n);break;case e.O1.Hn:if(n.uP()<0)throw Error("Illegal value for "+this.toString(!0)+": "+n.uP()+" bytes remaining");var o=n.offset;r.mb(n.uP()),r.append(n),n.offset=o;break;case e.O1.message:var s=(new t).nP();this.F3.encode(n,s),r.mb(s.offset),r.append(s.Jl());break;case e.O1.group:this.F3.encode(n,r),r.mb(i<<3|e.I1.P1);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+n+" (unknown type)")}return r},f.decode=function(t,i,n){if(i!=this.type.N1)throw Error("Unexpected wire type for element");var r,o;switch(this.type){case e.O1._1:return 0|t.Tb();case e.O1.D1:return t.Tb()>>>0;case e.O1.F1:return 0|t.wb();case e.O1.q1:return t.eb()>>>0;case e.O1.V1:return 0|t.ZR();case e.O1.L1:return t.Mb();case e.O1.M1:return t.Mb().Ob();case e.O1.B1:return t.Bb();case e.O1.j1:return t.ob();case e.O1.G1:return t.ib();case e.O1.U1:return!!t.Tb();case e.O1.Q1:return t.Tb();case e.O1.float:return t.ub();case e.O1.H1:return t.sR();case e.O1.qb:return t.$b();case e.O1.Hn:if(o=t.Tb(),t.uP()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+t.uP());return r=t.clone(),r.CR=r.offset+o,t.offset+=o,r;case e.O1.message:return o=t.Tb(),this.F3.decode(t,o);case e.O1.group:return this.F3.decode(t,-1,n)}throw Error("[INTERNAL] Illegal decode type")},f.Q3=function(i){if(!this.L3)throw Error("valueFromString() called on non-map-key element");switch(this.type){case e.O1._1:case e.O1.F1:case e.O1.V1:case e.O1.D1:case e.O1.q1:return this.B3(parseInt(i));case e.O1.L1:case e.O1.B1:case e.O1.G1:case e.O1.M1:case e.O1.j1:return this.B3(i);case e.O1.U1:return"true"===i;case e.O1.qb:return this.B3(i);case e.O1.Hn:return t.UR(i)}},f.K3=function(t){if(!this.L3)throw Error("valueToString() called on non-map-key element");return this.type===e.O1.Hn?t.toString("binary"):t.toString()},o.Element=c;var l=function(t,i,n,r,o,s){h.call(this,t,i,n,r,s),this.className="Message",this.extensions=[e.Y1,e.z1],this.H3=null,this.a3=!!o,this.Y3=null,this.z3=null,this.J3=null},p=l.prototype=Object.create(h.prototype);p.sp=function(i){if(this.H3&&!i)return this.H3;var n=function(e,i){function n(i,r,o,s,a){var h=void 0;if(null===i||"object"!=typeof i){if(s==e.O1.Q1)for(var u=a.R3(e.T3.x3.U3),c=0;c<u.length;c++)if(u[c].id===i){i=u[c].name;break}h=i}else if(i instanceof t)h=r?i.fP():i.lP();else if(e.hf.isArray(i)){var f=i;h=[];for(var l=0;l<f.length;l++)h.push(n(f[l],r,o,s,a))}else if(i instanceof e.Map){var p=i.entries();h={};for(var d=p.next();!d.done;d=p.next())h[i.W3.K3(d.value[0])]=n(d.value[1],r,o,i.X3.type,i.X3.F3)}else if(i instanceof e.DR)h=o?i.toString():new e.DR(i);else{h={};var v=i.Z3,g=void 0;for(var c in i)if(i.hasOwnProperty(c)){var y=i[c];v&&(g=v.P3(c)),h[c]=n(y,r,o,g.type,g.F3)}}return h}var r=i.R3(e.T3.pc.A3),o=i.R3(e.T3.pc.e4),s=function(n,s){e.q3.pc.call(this);for(var a=0,h=o.length;a<h;++a)this[o[a].name]=null;for(a=0,h=r.length;a<h;++a){var u=r[a];this[u.name]=u.t4?[]:u.map?new e.Map(u):null,!u.required&&"proto3"!==i.W2||null===u.defaultValue||(this[u.name]=u.defaultValue)}if(arguments.length>0){var c;if(1!==arguments.length||"object"!=typeof n||"function"==typeof n.encode||e.hf.isArray(n)||n instanceof e.Map||n instanceof t||n instanceof ArrayBuffer||e.DR&&n instanceof e.DR)for(a=0,h=arguments.length;a<h;++a)void 0!==(c=arguments[a])&&this.r4(r[a].name,c);else this.r4(n)}},a=s.prototype=Object.create(e.q3.pc.prototype);a.add=function(t,n,r){var o=i.J3[t];if(!r){if(!o)throw Error(this+"#"+t+" is undefined");if(!(o instanceof e.T3.pc.A3))throw Error(this+"#"+t+" is not a field: "+o.toString(!0));if(!o.t4)throw Error(this+"#"+t+" is not a repeated field")}null===this[o.name]&&(this[o.name]=[]),this[o.name].push(r?n:o.B3(n,!0))},a.i4=a.add,a.set=function(t,n,r){if(t&&"object"==typeof t){r=n;for(var o in t)t.hasOwnProperty(o)&&void 0!==(n=t[o])&&this.r4(o,n,r);return this}var s=i.J3[t];if(r)this[s.name]=n;else{if(!s)throw Error(this+"#"+t+" is not a field: undefined");if(!(s instanceof e.T3.pc.A3))throw Error(this+"#"+t+" is not a field: "+s.toString(!0));this[s.name]=n=s.B3(n)}return s.v3&&(null!==n?(null!==this[s.v3.name]&&(this[this[s.v3.name]]=null),this[s.v3.name]=s.name):s.v3.name===t&&(this[s.v3.name]=null)),this},a.r4=a.set,a.get=function(t,n){if(n)return this[t];var r=i.J3[t];if(!(r&&r instanceof e.T3.pc.A3))throw Error(this+"#"+t+" is not a field: undefined");if(!(r instanceof e.T3.pc.A3))throw Error(this+"#"+t+" is not a field: "+r.toString(!0));return this[r.name]},a.n4=a.get;for(var h=0;h<r.length;h++){var u=r[h];u instanceof e.T3.pc.s4||i.I3.options.W1&&function(t){var e=t.C3.replace(/(_[a-zA-Z])/g,function(t){return t.toUpperCase().replace("_","")});e=e.substring(0,1).toUpperCase()+e.substring(1);var n=t.C3.replace(/([A-Z])/g,function(t){return"_"+t}),r=function(e,i){return this[t.name]=i?e:t.B3(e),this},o=function(){return this[t.name]};null===i.P3("set"+e)&&(a["set"+e]=r),null===i.P3("set_"+n)&&(a["set_"+n]=r),null===i.P3("get"+e)&&(a["get"+e]=o),null===i.P3("get_"+n)&&(a["get_"+n]=o)}(u)}return a.encode=function(e,n){"boolean"==typeof e&&(n=e,e=void 0);var r=!1;e||(e=new t,r=!0);var o=e.kR;try{return i.encode(this,e.nP(),n),(r?e.Jl():e).nP(o)}catch(t){throw e.nP(o),t}},a.j3=function(){return i.j3(this)},a.o4=function(e){var n=!1;e||(e=new t,n=!0);var r=(new t).nP();return i.encode(this,r).Jl(),e.mb(r.uP()),e.append(r),n?e.Jl():e},a.a4=function(){try{return this.encode().pn()}catch(t){throw t.h4&&(t.h4=t.h4.pn()),t}},a.pn=a.a4,a.c4=function(){try{return this.encode().lP()}catch(t){throw t.h4&&(t.h4=t.h4.lP()),t}},a.lP=a.c4,a.u4=function(){try{return this.encode().fP()}catch(t){throw t.h4&&(t.h4=t.h4.fP()),t}},a.fP=a.u4,a.l4=function(){try{return this.encode().dP()}catch(t){throw t.h4&&(t.h4=t.h4.dP()),t}},a.dP=a.l4,a.f4=function(t,i){return n(this,!!t,!!i,e.O1.message,this.Z3)},a.d4=function(){return JSON.stringify(n(this,!0,!0,e.O1.message,this.Z3))},s.decode=function(e,n){"string"==typeof e&&(e=t.wrap(e,n||"base64")),e=e instanceof t?e:t.wrap(e);var r=e.kR;try{var o=i.decode(e.nP());return e.nP(r),o}catch(t){throw e.nP(r),t}},s.g4=function(e,n){if("string"==typeof e&&(e=t.wrap(e,n||"base64")),e=e instanceof t?e:t.wrap(e),e.uP()<1)return null;var r=e.offset,o=e.Tb();if(e.uP()<o)return e.offset=r,null;try{var s=i.decode(e.slice(e.offset,e.offset+o).nP());return e.offset+=o,s}catch(t){throw e.offset+=o,t}},s.v4=function(t){return s.decode(t,"base64")},s.y4=function(t){return s.decode(t,"hex")},s.m4=function(t){return new s(JSON.parse(t))},a.toString=function(){return i.toString()},Object.defineProperty&&(Object.defineProperty(s,"$options",{value:i._3()}),Object.defineProperty(a,"$options",{value:s.E4}),Object.defineProperty(s,"$type",{value:i}),Object.defineProperty(a,"$type",{value:i})),s}(e,this);this.Y3=[],this.z3={},this.J3={};for(var r,o=0,s=this.children.length;o<s;o++)if((r=this.children[o])instanceof w)n[r.name]=r.sp();else if(r instanceof l)n[r.name]=r.sp();else if(r instanceof l.A3)r.sp(),this.Y3.push(r),this.z3[r.id]=r,this.J3[r.name]=r;else if(!(r instanceof l.e4||r instanceof b))throw Error("Illegal reflect child of "+this.toString(!0)+": "+children[o].toString(!0));return this.H3=n},p.encode=function(t,e,i){for(var n,r,o=null,s=0,a=this.Y3.length;s<a;++s)n=this.Y3[s],r=t[n.name],n.required&&null===r?null===o&&(o=n):n.encode(i?r:n.B3(r),e);if(null!==o){var h=Error("Missing at least one required field for "+this.toString(!0)+": "+o);throw h.h4=e,h}return e},p.j3=function(t){for(var e,i,n=0,r=0,o=this.Y3.length;r<o;++r){if(e=this.Y3[r],i=t[e.name],e.required&&null===i)throw Error("Missing at least one required field for "+this.toString(!0)+": "+e);n+=e.j3(i)}return n},p.decode=function(t,i,n){i="number"==typeof i?i:-1;for(var o,s,a,h,u=t.offset,c=new this.H3;t.offset<u+i||-1===i&&t.uP()>0;){if(o=t.Tb(),s=7&o,a=o>>>3,s===e.I1.P1){if(a!==n)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+a+" ("+(n?n+" expected":"not a group")+")");break}if(h=this.z3[a])if(h.t4&&!h.options.T4)c[h.name].push(h.decode(s,t));else if(h.map){var f=h.decode(s,t);c[h.name].set(f[0],f[1])}else c[h.name]=h.decode(s,t),h.v3&&(null!==this[h.v3.name]&&(this[this[h.v3.name]]=null),c[h.v3.name]=h.name);else switch(s){case e.I1.w1:t.Tb();break;case e.I1.A1:t.offset+=4;break;case e.I1.S1:t.offset+=8;break;case e.I1.R1:var l=t.Tb();t.offset+=l;break;case e.I1.b1:for(;r(a,t););break;default:throw Error("Illegal wire type for unknown field "+a+" in "+this.toString(!0)+"#decode: "+s)}}for(var p=0,d=this.Y3.length;p<d;++p)if(h=this.Y3[p],null===c[h.name]){if(h.required){var v=Error("Missing at least one required field for "+this.toString(!0)+": "+h.name);throw v.I4=c,v}e.X1&&null!==h.defaultValue&&(c[h.name]=h.defaultValue)}return c},o.pc=l;var d=function(t,e,i,n,r,o,a,h,u,c){s.call(this,t,e,o),this.className="Message.Field",this.required="required"===i,this.t4="repeated"===i,this.map="map"===i,this.w4=n||null,this.type=r,this.F3=null,this.id=a,this.options=h||{},this.defaultValue=null,this.v3=u||null,this.W2=c||"proto2",this.C3=this.name,this.S4=null,this.R4=null,!this.I3.options.J1||this instanceof l.s4||(this.name=d.b4(this.name))};d.b4=function(t){return t.replace(/_([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};var v=d.prototype=Object.create(s.prototype);v.sp=function(){this.S4=new c(this.type,this.F3,!1,this.W2),this.map&&(this.R4=new c(this.w4,void 0,!0,this.W2)),this.defaultValue=void 0!==this.options.default?this.B3(this.options.default):null,"proto3"!==this.W2||this.t4||this.map||(this.defaultValue=this.S4.M3(this.type))},v.B3=function(t,i){i=i||!1;var n=function(t,e){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+t+" ("+e+")")}.bind(this);if(null===t)return this.required&&n(typeof t,"required"),"proto3"===this.W2&&this.type!==e.O1.message&&n(typeof t,"proto3 field without field presence cannot be null"),null;var r;if(this.t4&&!i){e.hf.isArray(t)||(t=[t]);var o=[];for(r=0;r<t.length;r++)o.push(this.S4.B3(t[r]));return o}return this.map&&!i?t instanceof e.Map?t:(t instanceof Object||n(typeof t,"expected ProtoBuf.Map or raw object for map field"),new e.Map(this,t)):(!this.t4&&e.hf.isArray(t)&&n(typeof t,"no array expected"),this.S4.B3(t))},v.P4=function(t){if("proto3"!==this.W2)return null!==t;switch(this.type){case e.O1._1:case e.O1.F1:case e.O1.V1:case e.O1.D1:case e.O1.q1:return 0!==t;case e.O1.L1:case e.O1.B1:case e.O1.G1:case e.O1.M1:case e.O1.j1:return 0!==t.low||0!==t.high;case e.O1.U1:return t;case e.O1.float:case e.O1.H1:return 0!==t;case e.O1.qb:return t.length>0;case e.O1.Hn:return t.uP()>0;case e.O1.Q1:return 0!==t;case e.O1.message:return null!==t;default:return!0}},v.encode=function(i,n){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===i||this.t4&&0==i.length)return n;try{if(this.t4){var r;if(this.options.T4&&e.C1.indexOf(this.type.N1)>=0){n.mb(this.id<<3|e.I1.R1),n.iP(n.offset+=1);var o=n.offset;for(r=0;r<i.length;r++)this.S4.G3(this.id,i[r],n);var s=n.offset-o,a=t.gb(s);if(a>1){var h=n.slice(o,n.offset);o+=a-1,n.offset=o,n.append(h)}n.mb(s,o-a)}else for(r=0;r<i.length;r++)n.mb(this.id<<3|this.type.N1),this.S4.G3(this.id,i[r],n)}else this.map?i.forEach(function(i,r,o){var s=t.gb(8|this.w4.N1)+this.R4.V3(1,r)+t.gb(16|this.type.N1)+this.S4.V3(2,i);n.mb(this.id<<3|e.I1.R1),n.mb(s),n.mb(8|this.w4.N1),this.R4.G3(1,r,n),n.mb(16|this.type.N1),this.S4.G3(2,i,n)},this):this.P4(i)&&(n.mb(this.id<<3|this.type.N1),this.S4.G3(this.id,i,n))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+i+" ("+t+")")}return n},v.j3=function(i){if(i=this.B3(i),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===i||this.t4&&0==i.length)return 0;var n=0;try{if(this.t4){var r,o;if(this.options.T4&&e.C1.indexOf(this.type.N1)>=0){for(n+=t.gb(this.id<<3|e.I1.R1),o=0,r=0;r<i.length;r++)o+=this.S4.V3(this.id,i[r]);n+=t.gb(o),n+=o}else for(r=0;r<i.length;r++)n+=t.gb(this.id<<3|this.type.N1),n+=this.S4.V3(this.id,i[r])}else this.map?i.forEach(function(i,r,o){var s=t.gb(8|this.w4.N1)+this.R4.V3(1,r)+t.gb(16|this.type.N1)+this.S4.V3(2,i);n+=t.gb(this.id<<3|e.I1.R1),n+=t.gb(s),n+=s},this):this.P4(i)&&(n+=t.gb(this.id<<3|this.type.N1),n+=this.S4.V3(this.id,i))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+i+" ("+t+")")}return n},v.decode=function(t,i,n){var r,o;if(!(!this.map&&t==this.type.N1||!n&&this.t4&&this.options.T4&&t==e.I1.R1||this.map&&t==e.I1.R1))throw Error("Illegal wire type for field "+this.toString(!0)+": "+t+" ("+this.type.N1+" expected)");if(t==e.I1.R1&&this.t4&&this.options.T4&&e.C1.indexOf(this.type.N1)>=0&&!n){o=i.Tb(),o=i.offset+o;for(var s=[];i.offset<o;)s.push(this.decode(this.type.N1,i,!0));return s}if(this.map){var a=this.R4.M3(this.w4);if(r=this.S4.M3(this.type),o=i.Tb(),i.uP()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+i.uP());var h=i.clone();for(h.CR=h.offset+o,i.offset+=o;h.uP()>0;){var u=h.Tb();t=7&u;var c=u>>>3;if(1===c)a=this.R4.decode(h,t,c);else{if(2!==c)throw Error("Unexpected tag in map field key/value submessage");r=this.S4.decode(h,t,c)}}return[a,r]}return this.S4.decode(i,t,this.id)},o.pc.A3=d;var g=function(t,e,i,n,r,o,s){d.call(this,t,e,i,null,n,r,o,s),this.A4};g.prototype=Object.create(d.prototype),o.pc.s4=g;var y=function(t,e,i){s.call(this,t,e,i),this.h3=[]};o.pc.e4=y;var w=function(t,e,i,n,r){h.call(this,t,e,i,n,r),this.className="Enum",this.object=null};(w.prototype=Object.create(h.prototype)).sp=function(){for(var t={},e=this.R3(w.U3),i=0,n=e.length;i<n;++i)t[e[i].name]=e[i].id;return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this._3()}),this.object=t},o.x3=w;var m=function(t,e,i,n){s.call(this,t,e,i),this.className="Enum.Value",this.id=n};m.prototype=Object.create(s.prototype),o.x3.U3=m;var b=function(t,e,i,n){s.call(this,t,e,i),this.C4=n};b.prototype=Object.create(s.prototype),o.O4=b;var E=function(t,e,i,n){h.call(this,t,e,i,n),this.className="Service",this.H3=null};(E.prototype=Object.create(h.prototype)).sp=function(i){return this.H3&&!i?this.H3:this.H3=function(e,i){for(var n=function(t){e.q3._4.call(this),this.N4=t||function(t,e,i){setTimeout(i.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},r=n.prototype=Object.create(e.q3._4.prototype),o=i.R3(e.T3._4.D4),s=0;s<o.length;s++)!function(e){r[e.name]=function(n,r){try{try{n=e.F4.H3.decode(t.wrap(n))}catch(t){if(!(t instanceof TypeError))throw t}if(!(n&&n instanceof e.F4.H3))return void setTimeout(r.bind(this,Error("Illegal request type provided to service method "+i.name+"#"+e.name)),0);this.N4(e.w3(),n,function(t,n){if(t)return void r(t);try{n=e.L4.H3.decode(n)}catch(t){}if(!(n&&n instanceof e.L4.H3))return void r(Error("Illegal response type received in service method "+i.name+"#"+e.name));r(null,n)})}catch(t){setTimeout(r.bind(this,t),0)}},n[e.name]=function(t,i,r){new n(t)[e.name](i,r)},Object.defineProperty&&(Object.defineProperty(n[e.name],"$options",{value:e._3()}),Object.defineProperty(r[e.name],"$options",{value:n[e.name].E4}))}(o[s]);return Object.defineProperty&&(Object.defineProperty(n,"$options",{value:i._3()}),Object.defineProperty(r,"$options",{value:n.E4}),Object.defineProperty(n,"$type",{value:i}),Object.defineProperty(r,"$type",{value:i})),n}(e,this)},o._4=E;var I=function(t,e,i,n){s.call(this,t,e,i),this.className="Service.Method",this.options=n||{}};(I.prototype=Object.create(s.prototype))._3=u._3,o._4.M4=I;var S=function(t,e,i,n,r,o,s,a){I.call(this,t,e,i,a),this.className="Service.RPCMethod",this.B4=n,this.U4=r,this.x4=o,this.H4=s,this.F4=null,this.L4=null};return S.prototype=Object.create(I.prototype),o._4.D4=S,o}(e),e.q3=function(t,e,n){function r(t,e){e.W2=t,e.q2&&e.q2.forEach(function(e){r(t,e)}),e.V2&&e.V2.forEach(function(e){r(t,e)})}var o=function(t){this.q4=new n.D3(this,null,""),this.V4=this.q4,this.j4=!1,this.result=null,this.files={},this.G4=null,this.options=t||{},this.W2="proto3"===this.options.W2?"proto3":"proto2"},s=o.prototype;return s.reset=function(){this.V4=this.q4},s.Q4=function(t){if("string"!=typeof t||!e.S2.test(t))throw Error("Illegal package: "+t);var i,r,o=t.split(".");for(i=0;i<o.length;i++)if(!e.BO.test(o[i]))throw Error("Illegal package: "+o[i]);for(i=0;i<o.length;i++)r=this.V4.P3(o[i]),null===r&&this.V4.b3(r=new n.D3(this,this.V4,o[i])),this.V4=r;return this},o.K4=function(i){if("string"!=typeof i.name||!e.BO.test(i.name))return!1;if(void 0!==i.values||void 0!==i.i3)return!1;var n;if(void 0!==i.h3){if(!t.hf.isArray(i.h3))return!1;var r,s=[];for(n=0;n<i.h3.length;n++){if(!o.Y4(i.h3[n]))return!1;if(r=parseInt(i.h3[n].id,10),s.indexOf(r)>=0)return!1;s.push(r)}s=null}if(void 0!==i.V2){if(!t.hf.isArray(i.V2))return!1;for(n=0;n<i.V2.length;n++)if(!o.z4(i.V2[n]))return!1}if(void 0!==i.q2){if(!t.hf.isArray(i.q2))return!1;for(n=0;n<i.q2.length;n++)if(!o.K4(i.q2[n])&&!o.J4(i.q2[n]))return!1}if(void 0!==i.extensions&&(!t.hf.isArray(i.extensions)||2!==i.extensions.length||"number"!=typeof i.extensions[0]||"number"!=typeof i.extensions[1]))return!1;if("proto3"===i.W2){for(n=0;n<i.h3.length;n++){var a=i.h3[n];if("required"===a.g3)return!1;if(a.default)return!1;if(a.options)for(var h=Object.keys(a.options),u=0;u<h.length;u++)if("default"===h[u])return!1}if(i.extensions)return!1}return!0},o.Y4=function(t){if("string"!=typeof t.g3||"string"!=typeof t.name||"string"!=typeof t.type||void 0===t.id)return!1;if(!(e.I2.test(t.g3)&&e.BO.test(t.name)&&e.S2.test(t.type)&&e._2.test(""+t.id)))return!1;if(void 0!==t.options){if("object"!=typeof t.options)return!1;for(var i,n=Object.keys(t.options),r=0;r<n.length;r++)if("string"!=typeof(i=n[r])||"string"!=typeof t.options[i]&&"number"!=typeof t.options[i]&&"boolean"!=typeof t.options[i])return!1}return!0},o.z4=function(i){if("string"!=typeof i.name||!e.BO.test(i.name))return!1;if(void 0===i.values||!t.hf.isArray(i.values)||0==i.values.length)return!1;for(var n=0;n<i.values.length;n++){if("object"!=typeof i.values[n])return!1;if("string"!=typeof i.values[n].name||void 0===i.values[n].id)return!1;if(!e.BO.test(i.values[n].name)||!e.N2.test(""+i.values[n].id))return!1}return"proto3"!==i.W2||0===i.values[0].id},s.create=function(e){if(!e)return this;if(t.hf.isArray(e)||(e=[e]),0===e.length)return this;var i=[];for(i.push(e);i.length>0;){if(e=i.pop(),!t.hf.isArray(e))throw Error("Not a valid namespace: "+JSON.stringify(e));for(;e.length>0;){var r=e.shift();if(o.K4(r)){var s=new n.pc(this,this.V4,r.name,r.options,r.a3,r.W2),a={};if(r.c3)for(var h=Object.keys(r.c3),u=0,c=h.length;u<c;++u)s.b3(a[h[u]]=new n.pc.e4(this,s,h[u]));if(r.h3&&r.h3.length>0)for(u=0,c=r.h3.length;u<c;++u){var f=r.h3[u];if(null!==s.P3(f.id))throw Error("Duplicate field id in message "+s.name+": "+f.id);if(f.options)for(var l=Object.keys(f.options),p=0,d=l.length;p<d;++p){if("string"!=typeof l[p])throw Error("Illegal field option name in message "+s.name+"#"+f.name+": "+l[p]);if("string"!=typeof f.options[l[p]]&&"number"!=typeof f.options[l[p]]&&"boolean"!=typeof f.options[l[p]])throw Error("Illegal field option value in message "+s.name+"#"+f.name+"#"+l[p]+": "+f.options[l[p]])}var v=null;if("string"==typeof f.v3&&void 0===(v=a[f.v3]))throw Error("Illegal oneof in message "+s.name+"#"+f.name+": "+f.v3);f=new n.pc.A3(this,s,f.g3,f.keytype,f.type,f.name,f.id,f.options,v,r.W2),v&&v.h3.push(f),s.b3(f)}var g=[];if(void 0!==r.V2&&r.V2.length>0)for(u=0;u<r.V2.length;u++)g.push(r.V2[u]);if(r.q2&&r.q2.length>0)for(u=0;u<r.q2.length;u++)g.push(r.q2[u]);if(r.extensions&&(s.extensions=r.extensions,s.extensions[0]<t.Y1&&(s.extensions[0]=t.Y1),s.extensions[1]>t.z1&&(s.extensions[1]=t.z1)),this.V4.b3(s),g.length>0){i.push(e),e=g,g=null,this.V4=s,s=null;continue}g=null,s=null}else if(o.z4(r)){for(s=new n.x3(this,this.V4,r.name,r.options,r.W2),u=0;u<r.values.length;u++)s.b3(new n.x3.U3(this,s,r.values[u].name,r.values[u].id));this.V4.b3(s),s=null}else if(o.W4(r)){s=new n._4(this,this.V4,r.name,r.options);for(u in r.i3)r.i3.hasOwnProperty(u)&&s.b3(new n._4.D4(this,s,u,r.i3[u].TI,r.i3[u].response,r.i3[u].s3,r.i3[u].o3,r.i3[u].options));this.V4.b3(s),s=null}else{if(!o.J4(r))throw Error("Not a valid definition: "+JSON.stringify(r));if(s=this.V4.resolve(r.E3))for(u=0;u<r.h3.length;u++){if(null!==s.P3(r.h3[u].id))throw Error("Duplicate extended field id in message "+s.name+": "+r.h3[u].id);if(r.h3[u].id<s.extensions[0]||r.h3[u].id>s.extensions[1])throw Error("Illegal extended field id in message "+s.name+": "+r.h3[u].id+" ("+s.extensions.join(" to ")+" expected)");var y=r.h3[u].name;this.options.J1&&(y=n.pc.A3.b4(r.h3[u].name)),f=new n.pc.s4(this,s,r.h3[u].g3,r.h3[u].type,this.V4.w3()+"."+y,r.h3[u].id,r.h3[u].options);var w=new n.O4(this,this.V4,r.h3[u].name,f);f.A4=w,this.V4.b3(w),s.b3(f)}else if(!/\.?google\.protobuf\./.test(r.E3))throw Error("Extended message "+r.E3+" is not defined")}r=null}e=null,this.V4=this.V4.parent}return this.j4=!1,this.result=null,this},s.X4=function(e,n){if("string"==typeof n){if(t.hf.Z1&&(n=i(59).resolve(n)),!0===this.files[n])return this.reset(),this;this.files[n]=!0}else if("object"==typeof n){var o=n.root;t.hf.Z1&&(o=i(59).resolve(o));var s=[o,n.Z4].join("/");if(!0===this.files[s])return this.reset(),this;this.files[s]=!0}if(e.imports&&e.imports.length>0){var a,h="/",u=!1;"object"==typeof n?(this.G4=n.root,u=!0,a=this.G4,n=n.Z4,(a.indexOf("\\")>=0||n.indexOf("\\")>=0)&&(h="\\")):"string"==typeof n?this.G4?a=this.G4:n.indexOf("/")>=0?""===(a=n.replace(/\/[^\/]*$/,""))&&(a="/"):n.indexOf("\\")>=0?(a=n.replace(/\\[^\\]*$/,""),h="\\"):a=".":a=null;for(var c=0;c<e.imports.length;c++)if("string"==typeof e.imports[c]){if(!a)throw Error("Cannot determine import root: File name is unknown");var f=e.imports[c];if(/^google\/protobuf\//.test(f))continue;if(f=a+h+f,!0===this.files[f])continue;/\.proto$/i.test(f)&&!t.F2&&(f=f.replace(/\.proto$/,".json"));var l=t.hf.fetch(f);if(null===l)throw Error("Failed to import '"+f+"' in '"+n+"': File not found");/\.json$/i.test(f)?this.X4(JSON.parse(l+""),f):this.X4(new t.F2.D$(l+"").parse(),f)}else n?/\.(\w+)$/.test(n)?this.X4(e.imports[c],n.replace(/^(.+)\.(\w+)$/,function(t,e,i){return e+"_import"+c+"."+i})):this.X4(e.imports[c],n+"_import"+c):this.X4(e.imports[c]);u&&(this.G4=null)}e.H2&&this.Q4(e.H2),e.W2&&r(e.W2,e);var p=this.V4;return e.options&&Object.keys(e.options).forEach(function(t){p.options[t]=e.options[t]}),e.q2&&(this.create(e.q2),this.V4=p),e.V2&&(this.create(e.V2),this.V4=p),e.DN&&(this.create(e.DN),this.V4=p),e.e6&&this.create(e.e6),this.reset(),this},o.W4=function(t){return!("string"!=typeof t.name||!e.BO.test(t.name)||"object"!=typeof t.i3)},o.J4=function(i){if("string"!=typeof i.E3||!e.S2.test(i.E3))return!1;var n;if(void 0!==i.h3){if(!t.hf.isArray(i.h3))return!1;var r,s=[];for(n=0;n<i.h3.length;n++){if(!o.Y4(i.h3[n]))return!1;if(r=parseInt(i.id,10),s.indexOf(r)>=0)return!1;s.push(r)}s=null}return!0},s.t6=function(){var i;if(null!=this.V4&&"object"!=typeof this.V4.type){if(this.V4 instanceof n.D3)for(var r=this.V4.children,o=0,s=r.length;o<s;++o)this.V4=r[o],this.t6();else if(this.V4 instanceof n.pc.A3){if(e.jO.test(this.V4.type))this.V4.type=t.O1[this.V4.type];else{if(!e.S2.test(this.V4.type))throw Error("Illegal type reference in "+this.V4.toString(!0)+": "+this.V4.type);if(!(i=(this.V4 instanceof n.pc.s4?this.V4.A4.parent:this.V4.parent).resolve(this.V4.type,!0)))throw Error("Unresolvable type reference in "+this.V4.toString(!0)+": "+this.V4.type);if(this.V4.F3=i,i instanceof n.x3){if(this.V4.type=t.O1.Q1,"proto3"===this.V4.W2&&"proto3"!==i.W2)throw Error("Proto3 message refers to proto2 enum; this is not allowed due to differing enum semantics in proto3")}else{if(!(i instanceof n.pc))throw Error("Illegal type reference in "+this.V4.toString(!0)+": "+this.V4.type);this.V4.type=i.a3?t.O1.group:t.O1.message}}if(this.V4.map){if(!e.jO.test(this.V4.w4))throw Error("Illegal key type for map field in "+this.V4.toString(!0)+": "+this.V4.type);this.V4.w4=t.O1[this.V4.w4]}}else if(this.V4 instanceof t.T3.x3.U3);else if(this.V4 instanceof t.T3._4.M4){if(!(this.V4 instanceof t.T3._4.D4))throw Error("Illegal service type in "+this.V4.toString(!0));if(!((i=this.V4.parent.resolve(this.V4.B4))&&i instanceof t.T3.pc))throw Error("Illegal type reference in "+this.V4.toString(!0)+": "+this.V4.B4);if(this.V4.F4=i,!((i=this.V4.parent.resolve(this.V4.U4))&&i instanceof t.T3.pc))throw Error("Illegal type reference in "+this.V4.toString(!0)+": "+this.V4.U4);this.V4.L4=i}else if(!(this.V4 instanceof t.T3.pc.e4||this.V4 instanceof t.T3.O4))throw Error("Illegal object in namespace: "+typeof this.V4+":"+this.V4);this.reset()}},s.sp=function(t){if(this.reset(),this.j4||(this.t6(),this.j4=!0,this.result=null),null===this.result&&(this.result=this.q4.sp()),t){for(var e="string"==typeof t?t.split("."):t,i=this.result,n=0;n<e.length;n++){if(!i[e[n]]){i=null;break}i=i[e[n]]}return i}return this.result},s.r6=function(t){return t?this.q4.resolve(t):this.q4},s.toString=function(){return"Builder"},o.pc=function(){},o._4=function(){},o}(e,e.Lang,e.T3),e.Map=function(t){function e(t){var e=0;return{next:function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}}var i=function(e,i){if(!e.map)throw Error("field is not a map");if(this.C4=e,this.W3=new t.T3.Element(e.w4,null,!0,e.W2),this.X3=new t.T3.Element(e.type,e.F3,!1,e.W2),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),i)for(var n=Object.keys(i),r=0;r<n.length;r++){var o=this.W3.Q3(n[r]),s=this.X3.B3(i[n[r]]);this.map[this.W3.K3(o)]={key:o,value:s}}},n=i.prototype;return n.clear=function(){this.map={}},n.delete=function(t){var e=this.W3.K3(this.W3.B3(t)),i=e in this.map;return delete this.map[e],i},n.entries=function(){for(var t,i=[],n=Object.keys(this.map),r=0;r<n.length;r++)i.push([(t=this.map[n[r]]).key,t.value]);return e(i)},n.keys=function(){for(var t=[],i=Object.keys(this.map),n=0;n<i.length;n++)t.push(this.map[i[n]].key);return e(t)},n.values=function(){for(var t=[],i=Object.keys(this.map),n=0;n<i.length;n++)t.push(this.map[i[n]].value);return e(t)},n.forEach=function(t,e){for(var i,n=Object.keys(this.map),r=0;r<n.length;r++)t.call(e,(i=this.map[n[r]]).value,i.key,this)},n.set=function(t,e){var i=this.W3.B3(t),n=this.X3.B3(e);return this.map[this.W3.K3(i)]={key:i,value:n},this},n.get=function(t){var e=this.W3.K3(this.W3.B3(t));if(e in this.map)return this.map[e].value},n.has=function(t){return this.W3.K3(this.W3.B3(t))in this.map},i}(e),e.i6=function(t,i,n){return("string"==typeof i||i&&"string"==typeof i.Z4&&"string"==typeof i.root)&&(n=i,i=void 0),e.op(new e.F2.D$(t).parse(),i,n)},e.n6=e.i6,e.s6=function(t,i,n){if(i&&"object"==typeof i?(n=i,i=null):i&&"function"==typeof i||(i=null),i)return e.hf.fetch("string"==typeof t?t:t.root+"/"+t.Z4,function(r){if(null===r)return void i(Error("Failed to fetch file"));try{i(null,e.i6(r,n,t))}catch(t){i(t)}});var r=e.hf.fetch("object"==typeof t?t.root+"/"+t.Z4:t);return null===r?null:e.i6(r,n,t)},e.o6=e.s6,e.a6=function(t){return t=t||{},void 0===t.J1&&(t.J1=e.J1),void 0===t.W1&&(t.W1=e.W1),new e.q3(t)},e.op=function(t,i,n){return("string"==typeof i||i&&"string"==typeof i.Z4&&"string"==typeof i.root)&&(n=i,i=null),i&&"object"==typeof i||(i=e.a6()),"string"==typeof t&&(t=JSON.parse(t)),i.X4(t,n),i.t6(),i},e.h6=function(t,i,n){if(i&&"object"==typeof i?(n=i,i=null):i&&"function"==typeof i||(i=null),i)return e.hf.fetch("string"==typeof t?t:t.root+"/"+t.Z4,function(r){if(null===r)return void i(Error("Failed to fetch file"));try{i(null,e.op(JSON.parse(r),n,t))}catch(t){i(t)}});var r=e.hf.fetch("object"==typeof t?t.root+"/"+t.Z4:t);return null===r?null:e.op(JSON.parse(r),n,t)},e}"object"==typeof t&&t&&"object"==typeof e&&e?t.t=a(i(32)):(r=[i(159)],n=a,void 0!==(o="function"==typeof n?n.apply(e,r):n)&&(t.t=o))}()}).call(e,i(58)(t))},function(t,e,n){(function(t){var r,o;/**
 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
 * This version of ByteBuffer.js uses an ArrayBuffer as its backing buffer which is accessed through a DataView and is
 * compatible with modern browsers.
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ByteBuffer.js for details
 */
!function(s){"use strict";function a(t){function e(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function n(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+a.apply(String,t);t.length+arguments.length>1024&&(e.push(a.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}var r=function(t,e,i){if(void 0===t&&(t=r.RR),void 0===e&&(e=r.bR),void 0===i&&(i=r.PR),!i){if((t|=0)<0)throw RangeError("Illegal capacity");e=!!e,i=!!i}this.buffer=0===t?s:new ArrayBuffer(t),this.view=0===t?null:new DataView(this.buffer),this.offset=0,this.AR=-1,this.CR=t,this.kR=void 0!==e&&!!e,this.OR=!!i};r.VERSION="3.5.5",r._R=!0,r.NR=!1,r.RR=16,r.bR=r.NR,r.PR=!1,r.DR=t||null;var o=r.prototype,s=new ArrayBuffer(0),a=String.fromCharCode;r.FR=function(t,e,i){return new r(t,e,i)},r.concat=function(t,e,i,n){"boolean"!=typeof e&&"string"==typeof e||(n=i,i=e,e=void 0);for(var o,s=0,a=0,h=t.length;a<h;++a)r.LR(t[a])||(t[a]=r.wrap(t[a],e)),(o=t[a].CR-t[a].offset)>0&&(s+=o);if(0===s)return new r(0,i,n);var u,c=new r(s,i,n),f=new Uint8Array(c.buffer);for(a=0;a<h;)u=t[a++],(o=u.CR-u.offset)<=0||(f.set(new Uint8Array(u.buffer).subarray(u.offset,u.CR),c.offset),c.offset+=o);return c.CR=c.offset,c.offset=0,c},r.LR=function(t){return!0===(t&&t instanceof r)},r.type=function(){return ArrayBuffer},r.wrap=function(t,e,n,s){if("string"!=typeof e&&(s=n,n=e,e=void 0),"string"==typeof t)switch(void 0===e&&(e="utf8"),e){case"base64":return r.MR(t,n);case"hex":return r.BR(t,n);case"binary":return r.UR(t,n);case"utf8":return r.xR(t,n);case"debug":return r.HR(t,n);default:throw Error("Unsupported encoding: "+e)}if(null===t||"object"!=typeof t)throw TypeError("Illegal buffer");var a;if(r.LR(t))return a=o.clone.call(t),a.AR=-1,a;if(t instanceof Uint8Array)a=new r(0,n,s),t.length>0&&(a.buffer=t.buffer,a.offset=t.byteOffset,a.CR=t.byteOffset+t.length,a.view=t.length>0?new DataView(t.buffer):null);else if(t instanceof ArrayBuffer)a=new r(0,n,s),t.byteLength>0&&(a.buffer=t,a.offset=0,a.CR=t.byteLength,a.view=t.byteLength>0?new DataView(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");for(a=new r(t.length,n,s),a.CR=t.length,i=0;i<t.length;++i)a.view.setUint8(i,t[i])}return a},o.qR=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view.setInt8(e,t),i&&(this.offset+=1),this},o.NS=o.qR,o.VR=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view.getInt8(t);return e&&(this.offset+=1),i},o.rR=o.VR,o.jR=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view.setUint8(e,t),i&&(this.offset+=1),this},o.GR=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view.getUint8(t);return e&&(this.offset+=1),i},o.QR=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.view.setInt16(e,t,this.kR),i&&(this.offset+=2),this},o.KR=o.QR,o.YR=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=this.view.getInt16(t,this.kR);return e&&(this.offset+=2),i},o.zR=o.YR,o.JR=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.view.setUint16(e,t,this.kR),i&&(this.offset+=2),this},o.WR=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=this.view.getUint16(t,this.kR);return e&&(this.offset+=2),i},o.XR=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setInt32(e,t,this.kR),i&&(this.offset+=4),this},o.Yl=o.XR,o.ZR=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getInt32(t,this.kR);return e&&(this.offset+=4),i},o.$l=o.ZR,o.$R=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setUint32(e,t,this.kR),i&&(this.offset+=4),this},o.eb=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getUint32(t,this.kR);return e&&(this.offset+=4),i},t&&(o.tb=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"==typeof e)e=t.dp(e);else if("string"==typeof e)e=t.gp(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.dp(e):"string"==typeof e&&(e=t.gp(e)),i+=8;var r=this.buffer.byteLength;return i>r&&this.resize((r*=2)>i?r:i),i-=8,this.kR?(this.view.setInt32(i,e.low,!0),this.view.setInt32(i+4,e.high,!0)):(this.view.setInt32(i,e.high,!1),this.view.setInt32(i+4,e.low,!1)),n&&(this.offset+=8),this},o.rb=o.tb,o.ib=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=this.kR?new t(this.view.getInt32(e,!0),this.view.getInt32(e+4,!0),!1):new t(this.view.getInt32(e+4,!1),this.view.getInt32(e,!1),!1);return i&&(this.offset+=8),n},o.nb=o.ib,o.sb=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"==typeof e)e=t.dp(e);else if("string"==typeof e)e=t.gp(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.dp(e):"string"==typeof e&&(e=t.gp(e)),i+=8;var r=this.buffer.byteLength;return i>r&&this.resize((r*=2)>i?r:i),i-=8,this.kR?(this.view.setInt32(i,e.low,!0),this.view.setInt32(i+4,e.high,!0)):(this.view.setInt32(i,e.high,!1),this.view.setInt32(i+4,e.low,!1)),n&&(this.offset+=8),this},o.ob=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=this.kR?new t(this.view.getInt32(e,!0),this.view.getInt32(e+4,!0),!0):new t(this.view.getInt32(e+4,!1),this.view.getInt32(e,!1),!0);return i&&(this.offset+=8),n}),o.ab=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.view.setFloat32(e,t,this.kR),i&&(this.offset+=4),this},o.hb=o.ab,o.cb=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=this.view.getFloat32(t,this.kR);return e&&(this.offset+=4),i},o.ub=o.cb,o.lb=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=8,this.view.setFloat64(e,t,this.kR),i&&(this.offset+=8),this},o.LS=o.lb,o.pb=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.view.getFloat64(t,this.kR);return e&&(this.offset+=8),i},o.sR=o.pb,r.fb=5,r.gb=function(t){return t>>>=0,t<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},r.vb=function(t){return((t|=0)<<1^t>>31)>>>0},r.yb=function(t){return t>>>1^-(1&t)|0},o.mb=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,o=r.gb(t);e+=o;var s=this.buffer.byteLength;return e>s&&this.resize((s*=2)>e?s:e),e-=o,this.view.setUint8(e,n=128|t),t>>>=0,t>=128?(n=t>>7|128,this.view.setUint8(e+1,n),t>=16384?(n=t>>14|128,this.view.setUint8(e+2,n),t>=1<<21?(n=t>>21|128,this.view.setUint8(e+3,n),t>=1<<28?(this.view.setUint8(e+4,t>>28&15),o=5):(this.view.setUint8(e+3,127&n),o=4)):(this.view.setUint8(e+2,127&n),o=3)):(this.view.setUint8(e+1,127&n),o=2)):(this.view.setUint8(e,127&n),o=1),i?(this.offset+=o,this):o},o.Eb=function(t,e){return this.mb(r.vb(t),e)},o.Tb=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n,r=0,o=0;do{if(n=t+r,!this.OR&&n>this.CR){var s=Error("Truncated");throw s.Ib=!0,s}i=this.view.getUint8(n),r<5&&(o|=(127&i)<<7*r>>>0),++r}while(128==(128&i));return o|=0,e?(this.offset+=r,o):{value:o,length:r}},o.wb=function(t){var e=this.Tb(t);return"object"==typeof e?e.value=r.yb(e.value):e=r.yb(e),e},t&&(r.Sb=10,r.Rb=function(e){"number"==typeof e?e=t.dp(e):"string"==typeof e&&(e=t.gp(e));var i=e.bb()>>>0,n=e.Pb(28).bb()>>>0,r=e.Pb(56).bb()>>>0;return 0==r?0==n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10},r.Ab=function(e){return"number"==typeof e?e=t.dp(e,!1):"string"==typeof e?e=t.gp(e,!1):!1!==e.Cb&&(e=e.kb()),e.shiftLeft(1).zd(e._b(63)).Ob()},r.Nb=function(e){return"number"==typeof e?e=t.dp(e,!1):"string"==typeof e?e=t.gp(e,!1):!1!==e.Cb&&(e=e.kb()),e.Pb(1).zd(e.Db(t.ONE).kb().Rp()).kb()},o.Fb=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"==typeof e)e=t.dp(e);else if("string"==typeof e)e=t.gp(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.dp(e,!1):"string"==typeof e?e=t.gp(e,!1):!1!==e.Cb&&(e=e.kb());var o=r.Rb(e),s=e.bb()>>>0,a=e.Pb(28).bb()>>>0,h=e.Pb(56).bb()>>>0;i+=o;var u=this.buffer.byteLength;switch(i>u&&this.resize((u*=2)>i?u:i),i-=o,o){case 10:this.view.setUint8(i+9,h>>>7&1);case 9:this.view.setUint8(i+8,9!==o?128|h:127&h);case 8:this.view.setUint8(i+7,8!==o?a>>>21|128:a>>>21&127);case 7:this.view.setUint8(i+6,7!==o?a>>>14|128:a>>>14&127);case 6:this.view.setUint8(i+5,6!==o?a>>>7|128:a>>>7&127);case 5:this.view.setUint8(i+4,5!==o?128|a:127&a);case 4:this.view.setUint8(i+3,4!==o?s>>>21|128:s>>>21&127);case 3:this.view.setUint8(i+2,3!==o?s>>>14|128:s>>>14&127);case 2:this.view.setUint8(i+1,2!==o?s>>>7|128:s>>>7&127);case 1:this.view.setUint8(i,1!==o?128|s:127&s)}return n?(this.offset+=o,this):o},o.Lb=function(t,e){return this.Fb(r.Ab(t),e)},o.Mb=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.OR){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,r=0,o=0,s=0,a=0;if(a=this.view.getUint8(e++),r=127&a,128&a&&(a=this.view.getUint8(e++),r|=(127&a)<<7,128&a&&(a=this.view.getUint8(e++),r|=(127&a)<<14,128&a&&(a=this.view.getUint8(e++),r|=(127&a)<<21,128&a&&(a=this.view.getUint8(e++),o=127&a,128&a&&(a=this.view.getUint8(e++),o|=(127&a)<<7,128&a&&(a=this.view.getUint8(e++),o|=(127&a)<<14,128&a&&(a=this.view.getUint8(e++),o|=(127&a)<<21,128&a&&(a=this.view.getUint8(e++),s=127&a,128&a&&(a=this.view.getUint8(e++),s|=(127&a)<<7,128&a))))))))))throw Error("Buffer overrun");var h=t.Ay(r|o<<28,o>>>4|s<<24,!1);return i?(this.offset=e,h):{value:h,length:e-n}},o.Bb=function(e){var i=this.Mb(e);return i&&i.value instanceof t?i.value=r.Nb(i.value):i=r.Nb(i),i}),o.zl=function(t,i){var n=void 0===i;n&&(i=this.offset);var r,o=t.length;if(!this.OR){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(r=0;r<o;++r)if(0===t.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}o=u.Ub(e(t))[1],i+=o+1;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=o+1,u.xb(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),this.view.setUint8(i++,0),n?(this.offset=i,this):o},o.tp=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=t,o=-1;return u.Hb(function(){if(0===o)return null;if(t>=this.CR)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.CR);return 0===(o=this.view.getUint8(t++))?null:o}.bind(this),i=n(),!0),e?(this.offset=t,i()):{qb:i(),length:t-r}},o.Vb=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,o=i;r=u.Ub(e(t),this.OR)[1],i+=4+r;var s=this.buffer.byteLength;if(i>s&&this.resize((s*=2)>i?s:i),i-=4+r,this.view.setUint32(i,r,this.kR),i+=4,u.xb(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),i!==o+4+r)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+4+r));return n?(this.offset=i,this):i-o},o.jb=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i,r=0,o=t;r=this.view.getUint32(t,this.kR),t+=4;var s,a=t+r;return u.Hb(function(){return t<a?this.view.getUint8(t++):null}.bind(this),s=n(),this.OR),i=s(),e?(this.offset=t,i):{qb:i,length:t-o}},r.Gb="c",r.Qb="b",o.Kb=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var r,o=i;r=u.Ub(e(t))[1],i+=r;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=r,u.xb(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),n?(this.offset=i,this):i-o},o.Tw=o.Kb,r.Yb=function(t){return u.Ub(e(t))[0]},r.zb=function(t){return u.Ub(e(t))[1]},o.Jb=function(t,e,i){"number"==typeof e&&(i=e,e=void 0);var o=void 0===i;if(o&&(i=this.offset),void 0===e&&(e=r.Gb),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var s,a=0,h=i;if(e===r.Gb){if(s=n(),u.Wb(function(){return a<t&&i<this.CR?this.view.getUint8(i++):null}.bind(this),function(t){++a,u.Xb(t,s)}.bind(this)),a!==t)throw RangeError("Illegal range: Truncated data, "+a+" == "+t);return o?(this.offset=i,s()):{qb:s(),length:i-h}}if(e===r.Qb){if(!this.OR){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+t+") <= "+this.buffer.byteLength)}var c=i+t;if(u.Hb(function(){return i<c?this.view.getUint8(i++):null}.bind(this),s=n(),this.OR),i!==c)throw RangeError("Illegal range: Truncated data, "+i+" == "+c);return o?(this.offset=i,s()):{qb:s(),length:i-h}}throw TypeError("Unsupported metrics: "+e)},o.fw=o.Jb,o.Zb=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,s,a=i;o=u.Ub(e(t),this.OR)[1],s=r.gb(o),i+=s+o;var h=this.buffer.byteLength;if(i>h&&this.resize((h*=2)>i?h:i),i-=s+o,i+=this.mb(o,i),u.xb(e(t),function(t){this.view.setUint8(i++,t)}.bind(this)),i!==a+o+s)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+o+s));return n?(this.offset=i,this):i-a},o.$b=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,r=this.Tb(t),o=t;t+=r.length,r=r.value;var s=t+r,a=n();return u.Hb(function(){return t<s?this.view.getUint8(t++):null}.bind(this),a,this.OR),i=a(),e?(this.offset=t,i):{qb:i,length:t-o}},o.append=function(t,e,i){"number"!=typeof e&&"string"==typeof e||(i=e,e=void 0);var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}t instanceof r||(t=r.wrap(t,e));var o=t.CR-t.offset;if(o<=0)return this;i+=o;var s=this.buffer.byteLength;return i>s&&this.resize((s*=2)>i?s:i),i-=o,new Uint8Array(this.buffer,i).set(new Uint8Array(t.buffer).subarray(t.offset,t.CR)),t.offset+=o,n&&(this.offset+=o),this},o.eP=function(t,e){return t.append(this,e),this},o.assert=function(t){return this.OR=!t,this},o.tP=function(){return this.buffer.byteLength},o.clear=function(){return this.offset=0,this.CR=this.buffer.byteLength,this.AR=-1,this},o.clone=function(t){var e=new r(0,this.kR,this.OR);if(t){var i=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(i).set(this.buffer),e.buffer=i,e.view=new DataView(i)}else e.buffer=this.buffer,e.view=this.view;return e.offset=this.offset,e.AR=this.AR,e.CR=this.CR,e},o.compact=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var i=e-t;if(0===i)return this.buffer=s,this.view=null,this.AR>=0&&(this.AR-=t),this.offset=0,this.CR=0,this;var n=new ArrayBuffer(i);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t,e)),this.buffer=n,this.view=new DataView(n),this.AR>=0&&(this.AR-=t),this.offset=0,this.CR=i,this},o.rP=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return new r(0,this.kR,this.OR);var i=e-t,n=new r(i,this.kR,this.OR);return n.offset=0,n.CR=i,n.AR>=0&&(n.AR-=t),this.Ap(n,0,t,e),n},o.Ap=function(t,e,i,n){var o,s;if(!this.OR&&!r.LR(t))throw TypeError("Illegal target: Not a ByteBuffer");if(e=(s=void 0===e)?t.offset:0|e,i=(o=void 0===i)?this.offset:0|i,n=void 0===n?this.CR:0|n,e<0||e>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+e+" <= "+t.buffer.byteLength);if(i<0||n>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+i+" <= "+this.buffer.byteLength);var a=n-i;return 0===a?t:(t.iP(e+a),new Uint8Array(t.buffer).set(new Uint8Array(this.buffer).subarray(i,n),e),o&&(this.offset+=a),s&&(t.offset+=a),this)},o.iP=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},o.fill=function(t,e,i){var n=void 0===e;if(n&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),void 0===e&&(e=this.offset),void 0===i&&(i=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(e>=i)return this;for(;e<i;)this.view.setUint8(e++,t);return n&&(this.offset=e),this},o.Jl=function(){return this.CR=this.offset,this.offset=0,this},o.mark=function(t){if(t=void 0===t?this.offset:t,!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.AR=t,this},o.order=function(t){if(!this.OR&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.kR=!!t,this},o.nP=function(t){return this.kR=void 0===t||!!t,this},o.sP=function(t){return this.kR=void 0!==t&&!t,this},o.oP=function(t,e,i){"number"!=typeof e&&"string"==typeof e||(i=e,e=void 0);var n=void 0===i;if(n&&(i=this.offset),!this.OR){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}t instanceof r||(t=r.wrap(t,e));var o=t.CR-t.offset;if(o<=0)return this;var s,a=o-i;if(a>0){var h=new ArrayBuffer(this.buffer.byteLength+a);s=new Uint8Array(h),s.set(new Uint8Array(this.buffer).subarray(i,this.buffer.byteLength),o),this.buffer=h,this.view=new DataView(h),this.offset+=a,this.AR>=0&&(this.AR+=a),this.CR+=a,i+=a}else s=new Uint8Array(this.buffer);return s.set(new Uint8Array(t.buffer).subarray(t.offset,t.CR),i-o),t.offset=t.CR,n&&(this.offset-=o),this},o.aP=function(t,e){return t.oP(this,e),this},o.hP=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.cP(!0))},o.uP=function(){return this.CR-this.offset},o.reset=function(){return this.AR>=0?(this.offset=this.AR,this.AR=-1):this.offset=0,this},o.resize=function(t){if(!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if((t|=0)<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e,this.view=new DataView(e)}return this},o.reverse=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(t,e)),this.view=new DataView(this.buffer),this)},o.dw=function(t){if(!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.OR&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},o.slice=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i=this.clone();return i.offset=t,i.CR=e,i},o.lP=function(t){var e=this.offset,i=this.CR;if(e>i){var n=e;e=i,i=n}if(!this.OR){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(!t&&0===e&&i===this.buffer.byteLength)return this.buffer;if(e===i)return s;var r=new ArrayBuffer(i-e);return new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(e,i),0),r},o.pn=o.lP,o.toString=function(t,e,i){if(void 0===t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.AR+",limit="+this.CR+",capacity="+this.tP()+")";switch("number"==typeof t&&(t="utf8",e=t,i=e),t){case"utf8":return this.pP(e,i);case"base64":return this.fP(e,i);case"hex":return this.dP(e,i);case"binary":return this.gP(e,i);case"debug":return this.cP();case"columns":return this.vP();default:throw Error("Unsupported encoding: "+t)}};var h=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],i=[],n=0,r=e.length;n<r;++n)i[e[n]]=n;return t.encode=function(t,i){for(var n,r;null!==(n=t());)i(e[n>>2&63]),r=(3&n)<<4,null!==(n=t())?(r|=n>>4&15,i(e[63&(r|n>>4&15)]),r=(15&n)<<2,null!==(n=t())?(i(e[63&(r|n>>6&3)]),i(e[63&n])):(i(e[63&r]),i(61))):(i(e[63&r]),i(61),i(61))},t.decode=function(t,e){function n(t){throw Error("Illegal character code: "+t)}for(var r,o,s;null!==(r=t());)if(o=i[r],void 0===o&&n(r),null!==(r=t())&&(s=i[r],void 0===s&&n(r),e(o<<2>>>0|(48&s)>>4),null!==(r=t()))){if(void 0===(o=i[r])){if(61===r)break;n(r)}if(e((15&s)<<4>>>0|(60&o)>>2),null!==(r=t())){if(void 0===(s=i[r])){if(61===r)break;n(r)}e((3&o)<<6>>>0|s)}}},t.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)},t}();o.fP=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;return h.encode(function(){return t<e?this.view.getUint8(t++):null}.bind(this),i=n()),i()},r.MR=function(t,i,n){if(!n){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%4!=0)throw TypeError("Illegal str: Length not a multiple of 4")}var o=new r(t.length/4*3,i,n),s=0;return h.decode(e(t),function(t){o.view.setUint8(s++,t)}),o.CR=s,o},r.btoa=function(t){return r.UR(t).fP()},r.atob=function(t){return r.MR(t).gP()},o.gP=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.CR:e,!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return"";for(var i=[],n=[];t<e;)i.push(this.view.getUint8(t++)),i.length>=1024&&(n.push(String.fromCharCode.apply(String,i)),i=[]);return n.join("")+String.fromCharCode.apply(String,i)},r.UR=function(t,e,i){if(!i&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");for(var n,o=0,s=t.length,a=new r(s,e,i);o<s;){if(n=t.charCodeAt(o),!i&&n>255)throw RangeError("Illegal charCode at "+o+": 0 <= "+n+" <= 255");a.view.setUint8(o++,n)}return a.CR=s,a},o.cP=function(t){for(var e,i=-1,n=this.buffer.byteLength,r="",o="",s="";i<n;){if(-1!==i&&(e=this.view.getUint8(i),r+=e<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(o+=e>32&&e<127?String.fromCharCode(e):".")),++i,t&&i>0&&i%16==0&&i!==n){for(;r.length<51;)r+=" ";s+=r+o+"\n",r=o=""}i===this.offset&&i===this.CR?r+=i===this.AR?"!":"|":i===this.offset?r+=i===this.AR?"[":"<":i===this.CR?r+=i===this.AR?"]":">":r+=i===this.AR?"'":t||0!==i&&i!==n?" ":""}if(t&&" "!==r){for(;r.length<51;)r+=" ";s+=r+o+"\n"}return t?s:r},r.HR=function(t,e,i){for(var n,o,s=t.length,a=new r((s+1)/3|0,e,i),h=0,u=0,c=!1,f=!1,l=!1,p=!1,d=!1;h<s;){switch(n=t.charAt(h++)){case"!":if(!i){if(f||l||p){d=!0;break}f=l=p=!0}a.offset=a.AR=a.CR=u,c=!1;break;case"|":if(!i){if(f||p){d=!0;break}f=p=!0}a.offset=a.CR=u,c=!1;break;case"[":if(!i){if(f||l){d=!0;break}f=l=!0}a.offset=a.AR=u,c=!1;break;case"<":if(!i){if(f){d=!0;break}f=!0}a.offset=u,c=!1;break;case"]":if(!i){if(p||l){d=!0;break}p=l=!0}a.CR=a.AR=u,c=!1;break;case">":if(!i){if(p){d=!0;break}p=!0}a.CR=u,c=!1;break;case"'":if(!i){if(l){d=!0;break}l=!0}a.AR=u,c=!1;break;case" ":c=!1;break;default:if(!i&&c){d=!0;break}if(o=parseInt(n+t.charAt(h++),16),!i&&(isNaN(o)||o<0||o>255))throw TypeError("Illegal str: Not a debug encoded string");a.view.setUint8(u++,o),c=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+h)}if(!i){if(!f||!p)throw TypeError("Illegal str: Missing offset or limit");if(u<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+s)}return a},o.dP=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.CR:e,!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var i,n=new Array(e-t);t<e;)i=this.view.getUint8(t++),i<16?n.push("0",i.toString(16)):n.push(i.toString(16));return n.join("")},r.BR=function(t,e,i){if(!i){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var n,o=t.length,s=new r(o/2|0,e),a=0,h=0;a<o;a+=2){if(n=parseInt(t.substring(a,a+2),16),!i&&(!isFinite(n)||n<0||n>255))throw TypeError("Illegal str: Contains non-hex characters");s.view.setUint8(h++,n)}return s.CR=h,s};var u=function(){var t={};return t.yP=1114111,t.mP=function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<128?e(127&i):i<2048?(e(i>>6&31|192),e(63&i|128)):i<65536?(e(i>>12&15|224),e(i>>6&63|128),e(63&i|128)):(e(i>>18&7|240),e(i>>12&63|128),e(i>>6&63|128),e(63&i|128)),i=null},t.Wb=function(t,e){for(var i,n,r,o,s=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.Hn=t,e};null!==(i=t());)if(0==(128&i))e(i);else if(192==(224&i))null===(n=t())&&s([i,n]),e((31&i)<<6|63&n);else if(224==(240&i))(null===(n=t())||null===(r=t()))&&s([i,n,r]),e((15&i)<<12|(63&n)<<6|63&r);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=t())||null===(r=t())||null===(o=t()))&&s([i,n,r,o]),e((7&i)<<18|(63&n)<<12|(63&r)<<6|63&o)}},t.EP=function(t,e){for(var i,n=null;null!==(i=null!==n?n:t());)i>=55296&&i<=57343&&null!==(n=t())&&n>=56320&&n<=57343?(e(1024*(i-55296)+n-56320+65536),n=null):e(i);null!==n&&e(n)},t.Xb=function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<=65535?e(i):(i-=65536,e(55296+(i>>10)),e(i%1024+56320)),i=null},t.xb=function(e,i){t.EP(e,function(e){t.mP(e,i)})},t.Hb=function(e,i){t.Wb(e,function(e){t.Xb(e,i)})},t.TP=function(t){return t<128?1:t<2048?2:t<65536?3:4},t.IP=function(e){for(var i,n=0;null!==(i=e());)n+=t.TP(i);return n},t.Ub=function(e){var i=0,n=0;return t.EP(e,function(e){++i,n+=t.TP(e)}),[i,n]},t}();return o.pP=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.CR),!this.OR){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;try{u.Hb(function(){return t<e?this.view.getUint8(t++):null}.bind(this),i=n())}catch(i){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return i()},r.xR=function(t,i,n){if(!n&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var o=new r(u.Ub(e(t),!0)[1],i,n),s=0;return u.xb(e(t),function(t){o.view.setUint8(s++,t)}),o.CR=s,o},r}"object"==typeof t&&t&&"object"==typeof e&&e?t.t=function(){var t;try{t=n(90)}catch(t){}return a(t)}():(r=[n(91)],void 0!==(o=function(t){return a(t)}.apply(e,r))&&(t.t=o))}()}).call(e,n(58)(t))},function(t,e,i){"use strict";var n=i(2),r=i(0),o=i(23),s=i(43),a=i(161),h=i(5),u=i(4),c=h.Rt.Ni,f=h.Rt.Ci,l=function(){function t(t,e,i,n){this.te=r.Framework.resolve(r.Framework.q.I).log(t.sessionId),this.mn="S["+t.sessionId+"]",this.Ol=e,this._l=i,this.swarmId=t.swarmId,this.Pl=n,this.receiver=new a.c6(e,i,t),this.sender=new a.u6(e,i,t,this),this.IC=t.IC,this.SC=t.SC,this.Jz=t.Jz,(f||r.Framework.S()&&s.iC.tC)&&(this.$z=t.$z)}return t.prototype.ql=function(){return this.sender.ql()||this.receiver.ql()},t.prototype.close=function(){var t=this,e=n.defer();return this.sender.l6().then(function(i){t.receiver.close(i).then(function(i){t.Hq(i).then(function(i){t.Pl.close(i).then(function(t){e.resolve(t)})})})}),e.Te},t.prototype.Hq=function(t){this.te.debug("SEND CLOSE TO "+this._l);var e=new o.mu.Mr.np.ll;return e.p6(t),this.jl(o.mu.Rl.ll,e),n(this.swarmId)},t.prototype.Ae=function(t){try{switch(c&&this.te.debug("DISPATCH "+t.msgId),t.msgId){case o.mu.Rl.hl:var e=o.mu.Mr.np.hl.decode(t.rp);this.receiver.f6(e);break;case o.mu.Rl.ul:var i=o.mu.Mr.np.ul.decode(t.rp);this.sender.d6(i.g6);break;case o.mu.Rl.cl:var n=o.mu.Mr.np.cl.decode(t.rp);this.sender.v6(n.g6);break;case o.mu.Rl.fl:c&&this.te.debug("RECEIVED OUT PART,DECODING ");var r=o.mu.Mr.np.vV.decode(t.rp);c&&this.te.debug("RECEIVED OUT PART FROM "+r.guid),this.SC.jq(r,this.Pl);break;case o.mu.Rl.dl:c&&this.te.debug("RECEIVED OUT PART RESP ");var s=o.mu.Mr.np.rV.decode(t.rp);c&&this.te.debug("RECEIVED OUT PART RESP FROM "+s.accept),this.SC.mV(s,this.Pl);break;case o.mu.Rl.al:var a=o.mu.Mr.np.al.decode(t.rp);c&&this.te.debug("RECEIVED HAVE FOR "+a.mN+" FROM "+this._l),this.SC.y6(this._l,a);break;case o.mu.Rl.ll:var h=o.mu.Mr.np.ll.decode(t.rp);c&&this.te.debug("RECEIVED CLOSE FROM "+this._l),this.SC.gV(this._l,h);break;case o.mu.Rl.Request:var f=o.mu.Mr.np.Request.decode(t.rp);c&&this.te.debug("RECEIVED REQUEST FOR "+f.mN+" FROM "+this._l),this.Jz.Y_(this._l,f,this);break;case o.mu.Rl.pl:var l=o.mu.Mr.np.pl.decode(t.rp);c&&this.te.debug("DoNotHave "+l.g6),this.IC.m6(l);break;case o.mu.Rl.gl:var p=o.mu.Mr.np.Ox.decode(t.rp);c&&this.te.debug("UDP HANDSHAKE MESSAGE RECEIVED FROM "+p.Ck),this.$z.Mx(p,this.Pl);break;case o.mu.Rl.vl:var d=o.mu.Mr.np.vl.decode(t.rp);c&&this.te.debug("UDP HANDSHAKE MESSAGE RESPONSE RECEIVED FROM "+this._l),this.$z.Lx(d,this.Pl);break;case o.mu.Rl.yl:var v=o.mu.Mr.np.yl.decode(t.rp);c&&this.te.debug("SWITCH LEADERSHIP REQUEST RECEIVED FROM "+this._l),this.$z.Xx(v);break;case o.mu.Rl.ml:var g=o.mu.Mr.np.tH.decode(t.rp);c&&this.te.debug("UDP SWITCH ACKNOWLEDGMENT RESPONSE FROM "+this._l),this.$z.nH(g,this._l);break;case o.mu.Rl.El:var y=o.mu.Mr.np.El.decode(t.rp);c&&this.te.debug("BITRATE INFO "+y.bitrate+" FROM "+y.guid),this.SC.IV(y);break;case o.mu.Rl.Tl:var w=o.mu.Mr.np.Tl.decode(t.rp);c&&this.te.debug("RECEIVED BATCH HAVES FOR FROM "+this._l),this.SC.E6(this._l,w);break;case o.mu.Rl.hh:var m=o.mu.Mr.np.OV.decode(t.rp);c&&this.te.debug("RECEIVED PEER INFO FROM "+this._l),this.SC.bV(m);break;case o.mu.Rl.Il:var b=o.mu.Mr.np.Il.decode(t.rp);c&&this.te.debug("RECEIVED PING FROM "+this._l),this.SC.T6(b);break;case o.mu.Rl.wl:var E=o.mu.Mr.np.wl.decode(t.rp);c&&this.te.debug("RECEIVED PONG FROM "+this._l),this.SC.I6(E);break;case o.mu.Rl.Sl:var I=o.mu.Mr.np.w6.decode(t.rp);c&&this.te.debug("RECEIVED NON PARTNER MESSAGE FROM "+this._l),this.IC.S6(this._l,I);break;default:this.te.warn("UNKNOWN MESSAGE TYPE "+t.msgId)}}catch(t){u.ErrorMonitor.gi().di("P2P DISPATCHER ERROR",this.mn,t)}},t.prototype.jl=function(t,e){this.Pl.jl(t,this.swarmId,e)},t}();e.kl=l},function(t,e,i){"use strict";var n=i(44),r=i(32),o=i(2),s=i(23),a=i(0),h=i(6),u=i(162),c=i(3),f=i(92),l=i(4),p=function(){function t(t,e,i){this.R6=new n,this.b6=new n,this.P6=null,this.ol=s.mu.ol,this.Ol=t,this._l=e,this.IC=i.IC,this.wC=i.wC,this.Hl=a.Framework.resolve(a.Framework.q.F),this.te=a.Framework.resolve(a.Framework.q.I).log(i.sessionId),this.mn="S["+i.sessionId+"]"}return t.prototype.uV=function(t){this.A6=t},t.prototype.ql=function(){return!(0===this.R6.keys().length&&null===this.P6)},t.prototype.C6=function(t){var e=new s.mu.Mr.np.Request;e.mN=t.zu(),e.g6=t.Fk,this.ol&&this.te.debug("INITIATING TR-"+t.Fk+" TIMEOUT: "+t.k6+" FRAGMENT: "+t.zu()+" FROM: "+this._l),this.R6.set(t.Fk,t),this.b6.set(t.Fk,a.Framework.time()),t.KU.qq.jl(s.mu.Rl.Request,e)},t.prototype.f6=function(t){var e=t.g6,i=t.data.lP(),n=t.O6,r=t.tx,o=t.headers;if(this.ol&&this.te.debug("RCV Chunk "+i.byteLength),!this.R6.has(e))return void this.te.warn("Received chunk of expired transfer id "+e);null==this.P6?(this.ol&&this.te.debug("INITIATED TR-"+e+",SIZE="+r),this.P6=this.R6.get(e),this.P6.Fk=e,this._6(e,this.P6.KU),null!=o?this.P6.xu=o:this.te.warn("HEADERS NULL IN FIRST CHUNK"),this.IC.F0(this._l,this.P6,n,r),this.P6.qu=n,a.Framework.S()||(this.P6.Hu=i)):(this._6(e,this.P6.KU),this.P6.qu+=n,a.Framework.S()||(this.P6.Hu=h.fn.appendBuffer(this.P6.Hu,i)));var s=a.Framework.S()?this.P6.qu:this.P6.Hu.byteLength;if(this.ol&&this.te.debug("RECEIVED "+s+"/"+r+" TRID "+e),s==r){this.ol&&this.te.debug("RCV ALL DATA "+s+" TR-"+this.P6.ju),this.P6.Mu.Ru=s,a.Framework.clearTimeout(this.P6.Fx),this.R6.delete(e);var u=a.Framework.time()-this.b6.get(e);this.te.debug("RCV ALL DATA FROM "+this._l+" AFTER "+u+" mseconds"),this.b6.delete(e),this.IC.HC(e,this.P6),this.P6=null}},t.prototype._6=function(t,e){this.ol&&this.te.debug("SEND ACK "+t+" TO "+this._l);var i=new s.mu.Mr.np.ul;i.g6=t,e.qq.jl(s.mu.Rl.ul,i)},t.prototype.close=function(t){var e=this,i=o.defer();return null!=this.P6&&this.N6(this.P6.Fk),this.R6.keys().slice().forEach(function(t){e.N6(t)}),i.resolve(f.rq.nx),i.Te},t.prototype.N6=function(t){if(this.R6.has(t)){var e=this.R6.get(t);e.Mu.Ru=e.qu,this.te.debug("SEND CANCEL FOR "+t+" TO "+this._l),this.b6.delete(t);var i=new s.mu.Mr.np.cl;i.g6=t,e.KU.qq.jl(s.mu.Rl.cl,i),null!==this.P6&&this.P6.Ju()===e.Ju()&&(this.P6=null),this.R6.delete(t)}else this.te.warn("CLEAN UP NOT PENDING "+t)},t}();e.c6=p;var d=function(){function t(t,e,i,r){this.ol=s.mu.ol,this.D6=null,this.F6=new Array,this.L6=new n,this.M6=0,this.close=null,this.Ol=t,this._l=e,this.B6=i.Jz,this.qq=r,this.bC=i.bC,this.te=a.Framework.resolve(a.Framework.q.I).log(i.sessionId),this.mn="S["+i.sessionId+"]",this.Hl=a.Framework.resolve(a.Framework.q.F)}return t.prototype.uV=function(t){this.A6=t},t.prototype.U6=function(t,e,i,n,r){var o=this;this.ol&&this.te.info("SEND FRAGMENT "+t+" TO "+this._l);var s=new u.x6;s.g6=e,s.mN=t,s.H6=r,s.headers=n,s.q6=i,s.V6=Math.ceil(s.q6/c.ni.Mr.Nr),s.j6=0,this.F6.push(s),this.ol&&this.F6.forEach(function(t){o.te.debug(o._l+" PENDING OUT "+t)}),null===this.D6?this.G6():this.ol&&this.te.debug(this._l+" OUT MSG NOT NULL")},t.prototype.d6=function(t){this.ol&&this.te.debug("ONGOING "+t+" GOT ACK"),null!==this.D6&&this.D6.g6.toString()===t.toString()?this.Q6(!1):this.te.warn("RECEIVED ACK FOR UNKNOWN TR-"+t)},t.prototype.v6=function(t){null!=this.D6&&this.D6.g6===t?(this.te.debug("GOT CANCEL FOR ONGOING TR-"+t),this.te.debug("TRANSPORT CANCEL STATS "+this.Ol+","+this._l+","+t),this.L6.delete(t),0!=this.D6.j6?this.B6.K6(this._l,this.A6,this.D6.j6,this.D6.q6):this.B6.Y6(this._l,this.A6,this.D6.q6),this.D6=null,this.G6()):this.F6=this.F6.filter(function(e){return e.g6!==t})},t.prototype.G6=function(){try{if(null===this.D6&&0!==this.F6.length){var t=this.F6.shift();this.D6=t,this.ol&&this.te.debug("DATA TO SEND LENGTH "+this.D6.q6+" IN "+this.D6.V6+" CHUNKS WITH TR-"+this.D6.g6),this.Q6(!0)}}catch(t){l.ErrorMonitor.gi().di("ERROR SEND FRAGMENT",this.mn,t),this.Vl()}},t.prototype.Q6=function(t){t&&(this.L6.set(this.D6.g6,a.Framework.time()),this.M6=this.D6.V6);try{if(null!=this.D6)if(0===this.D6.V6)this.te.debug("FINISHED SENDING TRANSFER "+this.D6.g6+" WITH "+this.D6.j6+" BYTES"),this.L6.delete(this.D6.g6),this.B6.z6(this._l,this.A6,this.D6.q6),this.D6=null,this.J6(),this.G6();else{this.ol&&this.te.debug("A CHUNK");var e=Math.min(this.D6.j6+c.ni.Mr.Nr,this.D6.q6),i=e-this.D6.j6,n=new s.mu.Mr.np.hl;if(n.g6=this.D6.g6,n.tx=this.D6.q6,n.O6=i,t&&null!=this.D6.headers&&(n.headers=this.D6.headers),a.Framework.S()||null==this.D6.H6)n.data=r.wrap(new ArrayBuffer(0));else if(n.data=this.bC.W6(this.D6.mN,this.M6-this.D6.V6),null==n.data){var o=this.D6.H6.slice(this.D6.j6,e);n.data=r.wrap(o)}this.D6.j6=this.D6.j6+i,this.qq.jl(s.mu.Rl.hl,n),this.ol&&this.te.debug("SND ["+this.D6.j6+"-"+(this.D6.j6+i)+"/"+this.D6.q6+"] TO "+this._l+" OF TR-"+this.D6.g6),this.D6.V6--}else this.te.debug("NO MESSAGE TO SEND")}catch(t){l.ErrorMonitor.gi().di("ERROR SENDING CHUNK",this.mn,t),this.Vl()}},t.prototype.ql=function(){return!(0===this.F6.length&&null===this.D6)},t.prototype.l6=function(){var t=o.defer();return this.F6.length=0,this.ql()?this.close=t:t.resolve("CLOSE"),t.Te},t.prototype.J6=function(){this.close&&this.close.resolve("CLOSED")},t.prototype.Vl=function(){this.D6=null},t}();e.u6=d},function(t,e,i){"use strict";var n=function(){function t(){this.headers=null}return t}();e.x6=n},function(t,e,i){"use strict";var n=i(1),r=i(0),o=i(3),s=i(15),a=function(){function t(t,e,i,o,a,h){this.X6=0,this.Z6=0,this.e8=0,this.t8=new Array,this.r8=new Array,this.R6=new n,this.te=o,this.qq=i,this.guid=t,this.Ik=h,this.i8=a,this.U_=e,this.GV=r.Framework.resolve(s.Pa.ma),this.KV=r.Framework.resolve(s.Pa.ma),this.n8=r.Framework.time()}return t.prototype.Xq=function(t){this.Wq=t,this.qq&&(this.qq.receiver.uV(this.Wq),this.qq.sender.uV(this.Wq))},t.prototype.s8=function(t,e,i){var n=Math.max(1,e);for(i&&(this.Z6+=n,this.X6+=t);this.t8.length>o.ni.Or.Rr;)this.t8.pop();var r=t/n;this.t8.unshift(r)},t.prototype.o8=function(t){this.R6.has(t)?this.te.warn(this.guid+" DUPLICATE {} PENDING REQUESTS "+t):this.R6.set(t,r.Framework.time())},t.prototype.a8=function(t,e,i,n,o,s){if(this.R6.has(t)){var a=this.R6.get(t),h=r.Framework.time()-a;this.R6.delete(t),n&&this.s8(e,h,!0),this.GV.success(e),this.U_.h8(this.Wq,e,i,o,s)}else this.te.warn("REQUEST "+t+" DOES NOT EXIST")},t.prototype.c8=function(t,e,i,n,r,s){if(this.R6.has(t)){var a=this.R6.get(t);this.R6.delete(t),o.ni.Or.br?this.s8(e,a,!0):this.s8(0,a,!0),this.GV.u8(e,n),this.U_.l8(this.Wq,e,i,n,r,s)}else this.te.warn(this.guid+"{} REQUEST "+t+" DOES NOT EXIST")},t.prototype.Dk=function(t,e,i){if(this.R6.has(t)){var n=this.R6.get(t);this.R6.delete(t),this.s8(0,n,!0),this.GV.xn(),this.U_.p8(this.Wq,i,e)}else this.te.warn(this.guid+"{} REQUEST "+t+" DOES NOT EXIST")},t.prototype.f8=function(t,e){this.U_.d8(t,e,!0)},t.prototype.g8=function(t,e){this.U_.v8(t,e,!0)},t.prototype.y8=function(t,e,i){this.U_.m8(t,e,i,!0)},t.prototype.E8=function(){var t=this.t8.reduce(function(t,e){return t+e},0);return this.t8.length>0?t/this.t8.length:0},t.prototype.T8=function(t){this.e8=t},t.prototype.I8=function(){return this.e8},t.prototype.Uq=function(){return this.Ik.Uq()},t}();e.Partner=a},function(t,e,i){"use strict";var n=i(32),r=i(1),o=i(0),s=i(11),a=i(23),h=i(3),u=i(4),c=i(165),f=function(){function t(){this.mn="[PART] ",this.Rq=new r,this.iL=new r,this.tL=new r,this.rL=new r,this.w8=!1,this.S8=!1,this.R8=!0,this.active=!1,this.b8(),this.Cq=[]}return t.prototype.init=function(t){this.te=o.Framework.resolve(o.Framework.q.I).log(t.sessionId),this.wC=t.wC,this.Uw=t.Uw,this.zz=t.zz,this.EC=t.EC,this.Lq=t.x_},t.prototype.wq=function(t){return this.Gq(t.Tk.guid)},t.prototype.Gq=function(t){return this.rL.has(t)||this.tL.has(t)},t.prototype.AV=function(t){return this.tL.has(t)?this.tL.get(t):this.rL.get(t)},t.prototype.Eq=function(t){return this.pV(t.Tk.guid)},t.prototype.pV=function(t){return this.iL.has(t)||this.Rq.has(t)},t.prototype.fV=function(t){return this.iL.has(t)?this.iL.get(t):this.Rq.get(t)},t.prototype.$q=function(t){var e=this;try{if(this.R8)if(this.Gq(t)){var i=this.AV(t),n=this.zz.P8(!1),r=[];this.Uw.JU(this.context.isLive()).then(function(o){e.te.debug(e.mn+"SEND ALL HAVES TO "+t+","+o.length);for(var s=0;s<o.length;s++){var h=0;h=e.context.isLive()?o[s].size():o[s].tx;var u=o[s].Qu,c=new a.mu.Mr.np.al;c.A8(u.zu()),c.C8(h),c.k8(n);var f=u;c.vq(f.ER()),c.O8(f.bitrate),c._8(f.duration),c.p6(f.Yu()),r.push(c)}if(r.length>0){var l=new a.mu.Mr.np.Tl;l.N8(r),i.qq.jl(a.mu.Rl.Tl,l)}})}else this.te.debug(this.mn+"NO PEER TO SEND TO "+t)}catch(t){u.ErrorMonitor.gi().di("SEND ALL HAVES ERROR",this.mn,t)}},t.prototype.pW=function(t,e,i){var n=this;if(this.R8){var r=this.tL.values();this.rL.forEach(function(t,e){r.push(t)});var o=this.zz.P8(!1);r.forEach(function(r){(!i||i&&r.guid!=i.guid)&&n.D8(r.qq,t,e,o)})}},t.prototype.D8=function(t,e,i,n){this.w8&&this.te.debug(this.mn+"SEND HAVE TO "+t._l+" FOR "+e.zu());var r=new a.mu.Mr.np.al;r.A8(e.zu()),r.C8(i),r.k8(n);var o=e;r.vq(o.ER()),r.O8(o.bitrate),r._8(o.duration),r.p6(o.Yu()),t.jl(a.mu.Rl.al,r)},t.prototype.y6=function(t,e){if(this.pV(t)){this.S8&&this.te.debug(this.mn+"HAVE RECEIVED FROM "+t+": "+e.mN);var i=this.fV(t);i.T8(e.F8()),this.EC.put(e,i),this.context.vN(e)}else this.te.info(this.mn+"REC HAVE FROM UNKNOWN PEER "+t)},t.prototype.E6=function(t,e){var i=this;if(this.pV(t)){this.S8&&this.te.debug(this.mn+" BATCH HAVES RECEIVED FROM "+t);var n=this.fV(t);e.L8().forEach(function(t){n.T8(t.F8()),i.EC.put(t,n)}),this.context.vN(e.L8()[0])}else this.te.info(this.mn+"REC HAVE FROM UNKNOWN PEER "+t)},t.prototype.Bq=function(t){var e=new a.mu.Mr.np.Il;e.id=this.wC.W(),e.M8=o.Framework.time(),this.te.debug(this.mn+"REQUEST PING TO PEER GUID "+t._l),t.jl(a.mu.Rl.Il,e)},t.prototype.T6=function(t){var e=t.id;if(!this.Gq(e))return void this.te.warn(this.mn+"RECEIVED A PING REQUEST FROM AN UNKNOWN PEER "+e);var i=-1;t.M8&&(i=t.M8),this.B8(this.AV(e).qq,i)},t.prototype.b8=function(){for(var t="",e=0;e<h.ni.Mr.Nr;e++)t+=String.fromCharCode(33+93*Math.random());for(var i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=t.length,e=0;e<o;e++)r[e]=t.charCodeAt(e);this.U8=n.wrap(r)},t.prototype.B8=function(t,e){var i=new a.mu.Mr.np.wl;i.id=this.wC.W(),i.M8=e,this.U8||this.b8(),i.data=this.U8,i.x8=h.ni.Mr.Nr,this.te.debug(this.mn+"SEND PONG TO PEER GUID "+t._l),t.jl(a.mu.Rl.wl,i)},t.prototype.I6=function(t){var e=t.id;if(!this.pV(e))return void this.te.warn(this.mn+"RECEIVED A PONG FROM AN UNKNOWN PEER "+e);var i=o.Framework.time();if(t.M8&&t.M8>0){var n=i-t.M8,r=this.fV(e);t.x8==t.data.pn().byteLength?r.s8(t.x8,n,!0):this.te.warn(this.mn+"I received a pong with wrong data size")}else this.te.warn(this.mn+"I received a wrong startTs "+t.M8+" from "+e)},t.prototype.sL=function(){try{var t=new r;return this.H8(this.iL,t),this.H8(this.Rq,t),t}catch(t){u.ErrorMonitor.gi().di("GET PARTNERS SNAPSHOTS ERROR",this.mn,t)}},t.prototype.H8=function(t,e){var i=this;t.forEach(function(t,n){var r=new hive.snapshots.Partner;r.inPart=!0,r.outPart=i.Gq(n),r.connInfo=new hive.snapshots.ConnectivityInfo;var o=void 0;t.Ik.Tk.lo&&(o=t.Ik.Tk.lo);var a=void 0;t.Ik.Tk.uo&&(a=t.Ik.Tk.uo),r.connInfo.publicIp=o,r.connInfo.privateIp=a,r.connInfo.externalAs=t.Ik.Tk.externalAs,r.connInfo.internalAs=t.Ik.Tk.internalAs;var h=i.q8();h.rateReceived=t.E8(),r.metrics=h,r.udp=t.Ik.Tk.type==s.Zs.K,e.set(t.Wq,r)})},t.prototype.eL=function(){return new c.V8(this.iL.length,this.Rq.length,this.rL.length,this.tL.length)},t.prototype.q8=function(){var t=new hive.snapshots.PartnerMetrics;return t.rateReceived=0,t.rateSent=0,t.handshakeDelay=0,t},t}();e._V=f},function(t,e,i){"use strict";var n=function(){function t(t,e,i,n){this.iL=t,this.nL=e,this.rL=i,this.tL=n}return t}();e.V8=n},function(t,e,i){"use strict";var n=function(){function t(){}return t}();e.ep=n},function(t,e){t.t={H2:"HiveMsgs",q2:[{name:"Chunk",h3:[{g3:"required",type:"int32",name:"transferId",id:1},{g3:"required",type:"int32",name:"totalSize",id:2},{g3:"required",type:"int32",name:"chunkSize",id:3},{g3:"required",type:"bytes",name:"data",id:4},{g3:"optional",type:"string",name:"headers",id:5}]},{name:"Haves",h3:[{g3:"repeated",type:"Have",name:"have",id:1}]},{name:"Have",h3:[{g3:"required",type:"string",name:"fragmentId",id:1},{g3:"required",type:"int32",name:"size",id:2},{g3:"required",type:"int32",name:"type",id:3},{g3:"required",type:"int32",name:"id",id:4},{g3:"required",type:"int32",name:"bitrate",id:5},{g3:"required",type:"int32",name:"duration",id:6},{g3:"required",type:"float",name:"uploadScore",id:7}]},{name:"Ping",h3:[{g3:"required",type:"string",name:"id",id:1},{g3:"required",type:"uint64",name:"startTs",id:2}]},{name:"Pong",h3:[{g3:"required",type:"string",name:"id",id:1},{g3:"required",type:"bytes",name:"data",id:2},{g3:"required",type:"int32",name:"dataSize",id:3},{g3:"required",type:"uint64",name:"startTs",id:4}]},{name:"Request",h3:[{g3:"required",type:"string",name:"fragmentId",id:1},{g3:"required",type:"int32",name:"transferId",id:2}]},{name:"DoNotHave",h3:[{g3:"required",type:"int32",name:"transferId",id:1}]},{name:"NoPartners",h3:[{g3:"required",type:"int32",name:"transferId",id:1}]},{name:"Cancel",h3:[{g3:"required",type:"int32",name:"transferId",id:1}]},{name:"Ack",h3:[{g3:"optional",type:"int32",name:"transferId",id:1}]},{name:"Close",h3:[{g3:"required",type:"int32",name:"type",id:1}]},{name:"StreamCharacteristics",h3:[{g3:"required",type:"int32",name:"streamState",id:1},{g3:"required",type:"int32",name:"bitrate",id:2},{g3:"required",type:"int32",name:"delta",id:3}]},{name:"OutPartnershipRequest",h3:[{g3:"required",type:"string",name:"guid",id:1},{g3:"required",type:"string",name:"contextId",id:2},{g3:"required",type:"string",name:"p2pProtocolVersion",id:3},{g3:"optional",type:"int32",name:"internalAs",id:4},{g3:"optional",type:"int32",name:"externalAs",id:5},{g3:"optional",type:"string",name:"publicIpString",id:6},{g3:"optional",type:"string",name:"privateIpString",id:7},{g3:"required",type:"string",name:"reportingGuid",id:8},{g3:"repeated",type:"StreamCharacteristics",name:"streamCharacteristics",id:9}]},{name:"OutPartnershipResponse",h3:[{g3:"required",type:"int32",name:"accept",id:1},{g3:"optional",type:"int32",name:"internalAs",id:2},{g3:"optional",type:"int32",name:"externalAs",id:3},{g3:"optional",type:"string",name:"publicIpString",id:4},{g3:"optional",type:"string",name:"privateIpString",id:5},{g3:"optional",type:"string",name:"reportingGuid",id:6},{g3:"repeated",type:"StreamCharacteristics",name:"streamCharacteristics",id:7}]},{name:"PeerInfoMessage",h3:[{g3:"required",type:"string",name:"guid",id:1},{g3:"optional",type:"string",name:"publicIpString",id:2},{g3:"optional",type:"string",name:"privateIpString",id:3},{g3:"optional",type:"int32",name:"internalAs",id:4},{g3:"optional",type:"int32",name:"externalAs",id:5},{g3:"repeated",type:"StreamCharacteristics",name:"streamCharacteristics",id:6}]},{name:"UDPHandshakeMessage",h3:[{g3:"required",type:"string",name:"uuid",id:1},{g3:"required",type:"string",name:"streamId",id:2},{g3:"required",type:"float",name:"udpScore",id:3},{g3:"required",type:"bool",name:"isLeader",id:4}]},{name:"UDPHandshakeResponse",h3:[{g3:"required",type:"string",name:"accept",id:1}]},{name:"UDPSwitchLeadershipRequest",h3:[{g3:"required",type:"string",name:"uuid",id:1},{g3:"required",type:"float",name:"udpScore",id:2}]},{name:"UDPSwitchLeadershipAck",h3:[{g3:"required",type:"bool",name:"ok",id:1}]},{name:"Bitrate",h3:[{g3:"required",type:"string",name:"guid",id:1},{g3:"required",type:"int32",name:"bitrate",id:2}]}]}},function(t,e,i){"use strict";var n=i(3),r=function(){function t(t,e,i,n,r){this.Tx=0,this.Ix=!1,this.Nx="",this.Ck=t,this.Tx=e,i&&(this.address=i),n&&(this.Ix=n),r&&(this.Nx=r)}return t.Dp=function(t,e){var i=0;return i=t.Tx>e.Tx?1:t.Tx<e.Tx?-1:0,0!=i?-i:n.ni.UDPBroadcast.Hr?e.Ck.localeCompare(t.Ck):t.Ck.localeCompare(e.Ck)},t}();e.Ex=r},function(t,e,i){"use strict";var n=i(1),r=i(40),o=i(0),s=i(15),a=i(10),h=i(11),u=function(){function t(){this.Ul=new r.Counter,this.j8=new n,this.G8=new n,this.Q8=o.Framework.resolve(s.Pa.va)}return t.prototype.init=function(t){this.te=o.Framework.resolve(o.Framework.q.I).log(t.sessionId),this.EC=t.EC,this.SC=t.SC,this.TC=t.TC,this.wC=t.wC,this.U_=t.x_,this.Q8.K8(t.wC)},t.prototype.TI=function(t){this.te.debug("FRL ISSUE REQ FOR FRAGMENT "+t.Qu.toString()+"-"+t.Mu.Ru+" ["+a.Ws[t.Yu()]+"] TO P2P"),this.j8.set(t.Ju(),t);var e=this.Ul.next();t.Fk=e,this.G8.set(e,t.Ju()),this.W0(t)},t.prototype.W0=function(t){var e=t.zu(),i=t.Ju(),n=this.Y8(e);t.size=this.EC.o1(e).size;var r=this.Q8.z8(n,t.type);null!=r?(this.te.info("SEND REQUEST "+t.Fk+" FOR "+i+" TO "+r.qq._l+" (LAN LEADER "+r.Ik.Tk.so+" iAS "+r.Ik.Tk.internalAs+" eAS "+r.Ik.Tk.externalAs+" privateIp "+r.Ik.Tk.uo+" ) out of "+n.length+" type "+h.Zs[r.Ik.Tk.type]+" size:"+t.size),t.KU=r,t.YU=r.Ik.Tk,t.KU.o8(t.Fk),t.Mu.Iu=!0,t.Mu.Ou=o.Framework.time(),this.U_.J8(t),this.Nk(t)?r.qq.receiver.C6(t):this.Dk(t.Fk,"TIMED-OUT")):this.Dk(t.Fk,"NO PARTNERS FOUND FOR REQUEST")},t.prototype.Y8=function(t){var e=this,i=[];return this.EC.mk(t).forEach(function(t){e.SC.pV(t.guid)?i.push(t):e.te.warn("I HAVE A HAVE FROM A NON IN-PARTNER "+t.guid)}),i},t.prototype.Nk=function(t){var e=this,i=!1,n=0;null==t.size?(n=this.EC.o1(t.zu()).size,this.te.warn("request size not set - this should not happen")):n=t.size;var r=t.Gu.RN().rU(t,n);return t.k6=r,r>0&&(i=!0,null==t.Fx&&(t.Fx=o.Framework.setTimeout(function(){e.U_.W8(t),e.Dk(t.Fk,"TIMED-OUT")},r))),i},t.prototype.Dk=function(t,e){this.te.info(e+" "+t);var i=this.X8(t,!0);this.te.info("REQUEST "+t+" FOR "+i.Ju()+" FAILED BECAUSE "+e),i&&this.TC.zJ(i)},t.prototype.X8=function(t,e){if(this.G8.has(t)){var i=this.G8.get(t);this.G8.delete(t);var n=this.j8.get(i);if(this.j8.delete(i),o.Framework.clearTimeout(n.Fx),e&&this.SC.pV(n.KU.qq._l)){n.KU.qq.receiver.N6(t);var r=n.Yu()==a.Ws.Ys;0!=n.qu?n.KU.c8(n.Fk,n.qu,n.Mu.p2pAgenTrafficSuccessQt,n.size,r,n.type):n.KU.Dk(n.Fk,r,n.size)}return n}return this.te.warn("CALLED CANCEL REQUEST ON NON EXISTING SESSION"),null},t.prototype.YJ=function(t){if(this.j8.has(t)){var e=this.j8.get(t).Fk;this.X8(e,!0)}},t.prototype.F0=function(t,e,i,n){this.te.debug("FRL DOWNLOADING "+e.Ju()+" FROM "+t+" P2P")},t.prototype.HC=function(t,e){if(this.te.debug("FRL PROMISED FRAGMENT "+e.Ju()+" RETURNED FROM P2P SIZE "+e.Mu.Ru),e=this.X8(t,!1)){e.Mu.Nu=o.Framework.time();var i=e.Yu()==a.Ws.Ys;e.KU.a8(e.Fk,e.size,e.Mu.p2pAgenTrafficSuccessQt,!0,i,e.type),this.TC.WJ(e)}else this.te.warn("TRIED TO REMOVE A NON EXISTING REQUEST "+t+" (THIS SHOULD NOT HAPPEN. AT LEAST NOT TOO OFTEN)")},t.prototype.m6=function(t){var e=t.Z8();if(this.G8.has(e)){this.te.debug("DO NOT HAVE RECEIVED FOR "+e);var i=this.X8(e,!1),n=i.Yu()==a.Ws.Ys;i.KU.Dk(i.Fk,n,i.size),this.TC.zJ(i)}else this.te.warn("UNKNOWN DO NOT HAVE "+e)},t.prototype.S6=function(t,e){var i=e.g6;if(this.G8.has(i)){this.te.debug("REJECTED BY NON PARTNER FOR "+i),this.SC.xq(t);var n=this.X8(i,!1);this.TC.zJ(n)}},t.prototype.Qe=function(t){return this.j8.has(t)},t}();e.qz=u},function(t,e,i){"use strict";var n=i(0),r=i(23),o=i(4),s=function(){function t(){}return t.prototype.init=function(t){this.te=n.Framework.resolve(n.Framework.q.I).log(t.sessionId),this.mn="S["+t.sessionId+"]",this.vx=t,this.EC=t.EC,this.Uw=t.Uw,this.SC=t.SC,this.zz=t.zz,this.wC=t.wC,this.U_=t.x_},t.prototype.Y_=function(t,e,i){try{if(this.SC.Gq(t)){var n=this.SC.AV(t);this.e5(t,e,n)}else this.t5(t,e,i)}catch(t){o.ErrorMonitor.gi().di("GOT ERROR ON SERVING REQUEST",this.mn,{error:t})}},t.prototype.z6=function(t,e,i){if(this.zz.success(i),this.SC.Gq(t)){var n=this.SC.AV(t);n.KV.success(i),n.f8(i,e)}},t.prototype.K6=function(t,e,i,n){if(this.zz.u8(i,n),this.SC.Gq(t)){var r=this.SC.AV(t);r.KV.u8(i,n),r.y8(i,n,e)}},t.prototype.Y6=function(t,e,i){if(this.zz.xn(),this.SC.Gq(t)){var n=this.SC.AV(t);n.KV.xn(),n.g8(i,e)}},t.prototype.e5=function(t,e,i){var n=this;this.Uw.get(e.mN).then(function(r){r?(n.te.debug("SENDING TO "+t+","+e.mN+","+e.g6+","+r.length+" DL "+r.length),i.qq.sender.U6(e.mN,e.g6,r.length,r.headers,r.data)):(n.te.debug("RECEIVED REQUEST FOR "+e.mN+" FROM "+t+" CAN'T BE SERVED"),n.r5(e.g6,i))})},t.prototype.r5=function(t,e){this.te.info("SEND DO NOT HAVE "+t+" TO "+e.qq.Ol);var i=new r.mu.Mr.np.pl;i.i5(t),e.qq.jl(r.mu.Rl.pl,i)},t.prototype.t5=function(t,e,i){this.te.warn("GOT REQUEST FROM NON-PARTNER "+t+" FOR "+e.mN);var n=new r.mu.Mr.np.w6;n.i5(e.g6),i.jl(r.mu.Rl.Sl,n)},t}();e.Vz=s},function(t,e,i){"use strict";var n,r=i(44),o=i(0),s=i(3);!function(t){t[t.n5=0]="S",t[t.s5=1]="F",t[t.o5=2]="PF"}(n||(n={}));var a=function(){function t(t){this.ts=t}return t}(),h=function(){function t(){this.a5=0,this.h5=0,this.c5=0,this.u5=0,this.l5=0,this.p5=0}return t}(),u=function(){function t(){this.f5=new r}return t.prototype.success=function(t){this.event(n.n5,t,t)},t.prototype.xn=function(){this.event(n.s5,0,0)},t.prototype.u8=function(t,e){this.event(n.o5,t,e)},t.prototype.event=function(t,e,i){var n=new a(o.Framework.time());n.vp=t,n.d5=e,n.g5=e/i,n.v5=(i-e)/i,this.f5.set(n.ts,n),this.y5()},t.prototype.y5=function(){var t=this,e=o.Framework.time(),i=e-2*s.ni.Or.Pr;if(i>0){var n=[];this.f5.forEach(function(t,e){e<i&&n.push(e)}),n.forEach(function(e){t.f5.delete(e)})}},t.prototype.jV=function(t){var e=0,i=this.m5(t,s.ni.Or.Pr);if(null!=i){var n=i.h5+i.c5+i.u5;e=0==n?0:(i.h5+i.u5*s.ni.Or.Ar)/n}return e},t.prototype.P8=function(t){var e=0,i=this.m5(t,s.ni.Or.Pr);if(null!=i){var n=i.h5+i.c5+i.u5;e=0==n?0:(i.c5+i.u5*s.ni.Or.Cr)/n}return e},t.prototype.E5=function(t){var e=this.m5(!1,t);return null!=e?e.a5:0},t.prototype.m5=function(t,e){if(0!=this.f5.keys().length){var i=new h,s=o.Framework.time(),a=s-e;a<0&&(a=0);var u=new r;return this.f5.forEach(function(t,e){e>=a&&u.set(e,t)}),u.forEach(function(t,e){switch(i.a5+=t.d5,t.vp){case n.n5:i.h5++;break;case n.s5:i.c5++;break;default:i.u5++,i.l5+=t.g5,i.p5+=t.v5}}),i}return null},t}();u.Cr=.2,u.Ar=.2,e.jz=u},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(1),o=i(2),s=i(0),a=i(173),h=i(175),u=i(93);e.T5||(e.T5={});var c=function(t){function e(){var e=t.call(this)||this;return e.I5=!1,e.w5=new r,e.Ul=1,e.qc=s.Framework.resolve(s.Framework.q.D),e.S5=s.Framework.resolve(s.Framework.q.U),e.channelManager=new a.R5(e.te,e.S5,e),e.S5.init(e,e.te,e.channelManager),e.b5(),e}return n(e,t),e.prototype.start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=s.Framework.resolve(s.Framework.q.I).log(t),r=null;return 0==this.ss.keys().length?(n.debug("TRIGGERING CONNECT "),r=this.P5(),this.A5(t,e)):(n.debug("ALREADY CONNECTED "),r=this.qc.jc(),this.A5(t,e),this.S5.lQ()&&this.C5(this.Eh,t)),r},e.prototype.P5=function(){var t=this,e=s.Framework.N._;"localhost"===e&&(e="127.0.0.1:"+location.port),this.te.debug("CONNECTING..");var i=o.defer();return this.qc.jc().then(function(n){var r=n.Kc();return t.te.debug("MY IDENTITY ",r),t.Eh=r,t.S5.start(e,r,i),i.Te}),null},e.prototype.k5=function(){return o.resolve(new r)},e.prototype.connect=function(t){var e=this,i=o.defer();return this.w5.has(t)?(this.te.debug("Already connected to "+t+", ignoring"),i.resolve(this.w5.get(t))):this.channelManager.O5(this.Eh,t).then(function(i){return e.connected(t,i)}).then(function(t){return i.resolve(t)}).fail(function(e){i.reject("CONN TO "+t+" CANNOT BE ESTABLISHED ")}),i.Te},e.prototype.send=function(t,e,i){return!!this.channelManager.send(t,e)||(this._5(t),!1)},e.prototype.N5=function(t,e,i){this.I5&&this.te.debug("REC BUF "+i.byteLength+" "+i),this.w5.has(t)?(this.I5&&this.te.debug("PROC MSG FROM "+t),this.w5.get(t).Wl(i)):this.te.warn("RECEIVED MSG FROM PEER "+t+" BUT IT IS NOT CONNECTED")},e.prototype.connected=function(t,e){if(this.w5.has(t))this.te.debug("RECONNECTED TO "+t+", RESETTING STATE"),this.w5.get(t).reset();else{this.te.info("CONNECTED TO "+t);var i=e.Rx;i.init(this.Eh,t),this.w5.set(t,i)}return o.resolve(this.w5.get(t))},e.prototype.D5=function(t,e){this.te.debug("FAILED CONN TO "+e),t.reject("CONN TO "+e+" CANNOT BE ESTABLISHED ")},e.prototype.F5=function(t,e){this.te.info(t+" connected to me"),this.connected(t,e)},e.prototype._5=function(t){this.w5.has(t)?(this.te.info("Connection closed to "+t),this.w5.delete(t),this.L5(t)):this.te.warn("TRYING TO REMOVE A PEER THAT IS NOT THERE: "+t)},e.prototype.b5=function(){var t=this;u.BV.DV&&s.Framework.setInterval(function(){var e=s.Framework.time();t.w5.forEach(function(i,n){var r=e-i.ip();r>u.BV.LV&&(t.te.debug("closing stale connection to "+n+" [unused for: "+r+"ms]"),t.disconnect(n))})},u.BV.FV)},e.prototype.M5=function(){},e.prototype.disconnect=function(t){this.w5.has(t)&&this.channelManager.disconnect(t)},e}(h.B5);c.$r="availableSendRate",c.ei="remoteAddress",c.ti="localAddress",e.Dz=c},function(t,e,i){"use strict";var n=i(2),r=i(0),o=i(174),s=i(93),a=function(){function t(t,e,i){this.te=t,this.S5=e,this.U5=i,this.x5={iceServers:[{url:"stun:stun.hivestreaming.com:3478"}]},this.Ul=1,this.H5=null,this.q5={},this.V5={}}return t.prototype.O5=function(t,e){var i=null;if(e in this.V5){var r=n.defer();r.reject("OTHER ALREADY TRYING TO CONNECT"),i=r.Te}else{this.U5.I5&&this.te.info("Initiating connection to "+e);var o=this.j5(t,e);i=this.G5(o,e).connect(e)}return i},t.prototype.Q5=function(t){t.K5 in this.V5&&(delete this.q5[t.label],delete this.V5[t.K5]),t.open&&(this.U5._5(t.K5),t.open=!1)},t.prototype.send=function(t,e){this.U5.I5&&this.te.debug("DATA "+e.byteLength+" "+e);var i=this.V5[t];return!(!i||!i.channel||(i.channel.send(e),0))},t.prototype.z$=function(t,e){var i=e.channel;if(i&&i.label&&this.q5[i.label]){var n=this.q5[i.label],r=n[t];r.call(n,e)}else{var o="handle_"+t,r=this[o];r?r.call(this,e):this.te.warn("Handler "+o+" not found or channel "+i.label+" not active")}},t.prototype.handle_offer=function(t){if(this.U5.I5&&this.te.info("received an offer from "+t.peer.guid+" on channel "+t.channel.label),this.V5[t.peer.guid]&&t.peer<this.U5.Eh)this.S5.Y5(this.U5.Eh,t.peer.guid,t.channel.label);else{var e=this.G5(t.channel.label,t.peer.guid),i=this.z5(e);e.offer(t,i)}},t.prototype.z5=function(t){var e=this;return r.Framework.setTimeout(function(){e.te.warn("INCOMING CONNECTION FROM "+t.K5+" TIMED OUT"),t.close()},s.BV.MV)},t.prototype.G5=function(t,e){var i=new o.J5(this,this.U5,t,this.H5,this.x5,e);return this.q5[t]=i,this.V5[e]=i,i},t.prototype.handle_offer_rejected=function(t){this.U5.I5&&this.te.debug("remote peer rejected ",t);var e=this.V5[t.W5];e&&e.close(),delete this.V5[t.W5],delete this.q5[t.channel]},t.prototype.j5=function(t,e){return t.substring(0,Math.max(8,t.length))+":"+e.substring(0,Math.max(8,e.length))+":"+this.Ul++},t.prototype.disconnect=function(t){var e=this.V5[t];e&&e.close()},t}();e.R5=a},function(t,e,i){"use strict";var n=(i(52),i(2)),r=i(0),o=function(){function t(t,e,i,n,o,s){var a=this;this.channelManager=t,this.U5=e,this.label=i,this.H5=n,this.x5=o,this.K5=s,this.I5=!1,this.pM=null,this.channel=null,this.X5=null,this.Z5=5,this.timeout=5e3,this.open=!1,this.e9=!1,this.t9=new Array,this.r9=function(){return!!this.channel&&"connecting"===this.channel.readyState},this.te=r.Framework.resolve(r.Framework.q.I).log(),this.mn="[ch:"+this.label+"] ",this.Rx=r.Framework.resolve(r.Framework.q.L),this.Rx.init(this.U5.Eh,s),this.pM=new RTCPeerConnection(this.x5,this.H5),this.pM.onicecandidate=function(t){t&&t.candidate&&(a.t9.push(t.candidate),a.e9&&a.i9())},this.pM.onnegotiationneeded=function(){a.createOffer().then(function(t){return a.n9(t)}).then(function(t){a.I5&&a.te.debug(a.mn+"Sending offer to "+a.K5+" [candidates: "+a.t9.length+"]");var e=a.t9;a.t9=new Array;var i=a.channelManager.S5.offer(a.U5.Eh,a.K5,a,e,t);return a.e9=!0,i}).catch(function(t){a.te.error(a.mn+" "+t),a.close()})},this.pM.oniceconnectionstatechange=function(t){"disconnected"===a.pM.iceConnectionState&&a.close(),"failed"===a.pM.iceConnectionState&&(a.te.debug(a.mn+"Closing channel since it couldnt be established to "+a.K5),a.close())},this.pM.onsignalingstatechange=function(t){"closed"===t.signalingState&&a.close()}}return t.prototype.s9=function(){var t=this;if(this.channel&&"open"!=this.channel.readyState){if(this.I5&&this.te.debug(this.mn+"Check connection "+this.K5),this.Z5<=0)return this.te.debug(this.mn+"Closing channel since it couldnt be established to "+this.K5),void this.close();this.Z5-=1,this.X5=r.Framework.setTimeout(function(){return t.s9()},this.timeout)}},t.prototype.close=function(){this.I5&&this.te.debug(this.mn+"Closing connection to "+this.K5),this.channelManager.Q5(this),this.pM&&"closed"!==this.pM.signalingState&&(this.pM.close(),this.channel&&this.channel.close())},t.prototype.connect=function(t){var e=this;this.I5&&this.te.debug(this.mn+"Connecting to "+t),this.K5=t,this.channel=this.pM.createDataChannel(this.label);var i=this.o9(!0,-1);return this.X5=r.Framework.setTimeout(function(){return e.s9()},this.timeout),i},t.prototype.a9=function(t){var e=n.defer();return this.pM.setRemoteDescription(t,function(){return e.resolve("OK")},e.reject),e.Te},t.prototype.n9=function(t){var e=this,i=n.defer();return"closed"!==this.pM.signalingState?this.pM.setLocalDescription(t,function(){return i.resolve(e.pM.localDescription)},i.reject):i.reject,i.Te},t.prototype.createOffer=function(){var t=this,e=n.defer();return this.pM.createOffer(e.resolve,function(e){t.te.error(t.mn+" "+e),t.close()}),e.Te},t.prototype.createAnswer=function(){var t=n.defer();return this.pM.createAnswer(t.resolve,t.reject),t.Te},t.prototype.offer=function(t,e){var i=this;this.I5&&(this.te.debug(this.mn+"Received an offer from "+this.K5),this.te.debug(this.mn+"Offer:",t)),this.pM.ondatachannel=function(t){i.channel=t.channel,i.o9(!1,e)};var n=new RTCSessionDescription(t.channel.offer);this.K5=t.peer.guid,this.a9(n).then(function(e){if("closed"!==i.pM.signalingState)return i.update_ice_candidates(t),i.createAnswer()}).then(function(t){return i.n9(t)}).then(function(t){i.te.debug(i.mn+"Sending back an answer [candidates: "+i.t9.length+"]");var e=i.t9;i.t9=new Array,i.channelManager.S5.answer(i,t,e,i.K5),i.e9=!0}).catch(function(t){i.te.error(i.mn+" "+t),i.close()})},t.prototype.answer=function(t){var e=this;this.I5&&this.te.debug(this.mn+"Answer: ",t);var i=new RTCSessionDescription(t.answer);this.a9(i).then(function(){"closed"!==e.pM.signalingState&&e.update_ice_candidates(t)}).catch(function(t){e.close(),e.te.error(e.mn+" "+t)})},t.prototype.update_ice_candidates=function(t){var e=this;t.channel.ice_candidates.forEach(function(t){e.I5&&e.te.debug(e.mn+"got ICE cand: ",t);var i=new RTCIceCandidate(t);e.pM.addIceCandidate(i,function(){},function(t){return e.te.warn(e.mn+"FAILED UPDATING ICE CANDIDATE",t)})})},t.prototype.o9=function(t,e){var i=this,r=n.defer();return this.channel.onopen=function(n){return i.h9(r,t,e)},this.channel.onclose=function(t){i.close(),r.reject(i)},this.channel.onmessage=function(t){return i.Rx.Wl(t.data)},this.channel.onerror=function(t){i.te.error(i.mn+" -- WebRTC channel error",t),i.close()},r.Te},t.prototype.h9=function(t,e,i){this.open=!0,t.resolve(this),e||(this.U5.F5(this.K5,this),i&&r.Framework.clearTimeout(i))},t.prototype.i9=function(){var t=this,e=this.t9;if(this.t9=new Array,e&&e.length>0){var i=e.length;this.channelManager.S5.c9(this.U5.Eh,this,e,this.K5).then(function(e){t.I5&&t.te.debug(t.mn+"sent "+i+" more candidates")}).catch(function(e){t.te.error(t.mn+" "+e)})}},t}();e.J5=o},function(t,e,i){"use strict";var n=i(1),r=i(0),o=function(){function t(){this.ss=new n,this.te=r.Framework.resolve(r.Framework.q.I).log()}return t.prototype.A5=function(t,e){this.te.info("SET LISTENERS FOR "+t+","+e.length),this.ss.set(t,e)},t.prototype.u9=function(t){this.ss.delete(t)},t.prototype.l9=function(){this.ss.length>0&&this.ss.forEach(function(t,e){t.forEach(function(t){t.yq&&t.yq()})})},t.prototype.C5=function(t,e){var i=this;this.ss.length>0&&(e?this.ss.get(e).forEach(function(e){try{e.Zh&&e.Zh(t)}catch(t){i.te.error("Cannot fire server connected on "+e)}}):this.ss.forEach(function(e,n){e.forEach(function(e){try{e.Zh&&e.Zh(t)}catch(t){i.te.error("Cannot fire server connected on "+e)}})}))},t.prototype.L5=function(t){this.ss.length>0&&this.ss.forEach(function(e,i){e.forEach(function(e){e.aH&&e.aH(t)})})},t}();e.B5=o},function(t,e,i){"use strict";var n=i(2),r=i(0),o=i(21),s=function(){function t(){this.Ul=1,this.client=r.Framework.resolve(r.Framework.q.H)}return t.prototype.init=function(t,e,i){this.U5=t,this.te=e,this.channelManager=i},t.prototype.lQ=function(){return this.client.lc().lQ()},t.prototype.start=function(t,e,i){var n=this;this.te.debug("MY ID "+e),this.Eh=e,this.client&&this.client.lc()?this.client.lc().on(Services.TQ,1,function(t){n.p9(t.msg)}):this.te.error("error getting active services connection"),this.U5.C5(this.Eh)},t.prototype.p9=function(t){var e=JSON.parse(t);this.U5.I5&&this.te.debug("RCV MSG FROM SRV ",e),this.channelManager.z$(e.msgName,e.msg)},t.prototype.f9=function(t,e,i){var r=this.wrap(e,t,i);if(this.client&&this.client.lc()){var s=JSON.stringify(r);this.U5.I5&&this.te.debug(" FORWARDING REQUEST : "+s);var a=new o.pc(Services.TQ,0,s);return this.client.lc().send(a)}return n.reject()},t.prototype.wrap=function(t,e,i){return{msgId:this.Ul++,destination:i,msg:t,msgName:e}},t.prototype.c9=function(t,e,i,n){var r={channel:{label:e.label,ice_candidates:i}};return this.f9("update_ice_candidates",r,n)},t.prototype.offer=function(t,e,i,n,o){var s={peer:{guid:t,first_seen:r.Framework.time()},channel:{label:i.label,ice_candidates:n,offer:o}};return this.f9("offer",s,i.K5)},t.prototype.Y5=function(t,e,i){this.U5.I5&&this.te.debug("Discovery service rejects offer from peer "+e+" on channel "+i);var n={W5:t,channel:i};return this.f9("answer",n,e)},t.prototype.answer=function(t,e,i,n){var r={answer:e,d9:this.U5.Eh,channel:{label:t.label,ice_candidates:i}};return this.f9("answer",r,n)},t}();e.Fz=s},function(t,e,i){"use strict";var n=i(1),r=i(3),o=i(0),s=function(){function t(){this.eN=new n,this.g9=[],this.R6=new n,this.v9=new n}return t.prototype.init=function(t){this.te=o.Framework.resolve(o.Framework.q.I).log(t.sessionId),this.TC=t.TC,this.y9()},t.prototype.y9=function(){var t=this;o.Framework.setInterval(function(){t.m9()},r.ni.mr.vr)},t.prototype.m9=function(){var t=this;this.R6.values().filter(function(t){return o.Framework.time()-t.Mu.ku>r.ni.mr.yr}).forEach(function(e){t.TC.abort(e.Vu),t.cN(e.zu(),e.Ju())})},t.prototype.hN=function(t){this.E9(t.zu(),t.Ju()),this.R6.set(t.Ju(),t)},t.prototype.cN=function(t,e){this.R6.delete(e),this.T9(t,e)},t.prototype.pN=function(t){this.I9(t)},t.prototype.uN=function(t){this.eN.delete(t)},t.prototype.I9=function(t){if(this.eN.set(t.zu(),t.Ku()),this.g9.push(t.zu()),this.eN.length>r.ni.mr.gr){var e=this.g9[0];this.eN.delete(e),this.g9.splice(0,1)}},t.prototype.Z_=function(t){return this.eN.has(t)},t.prototype.tN=function(t){return this.eN.get(t)},t.prototype.E9=function(t,e){if(this.v9.has(t))this.v9.get(t).push(e);else{var i=[];i.push(e),this.v9.set(t,i)}},t.prototype.T9=function(t,e){if(this.v9.has(t)){var i=this.v9.get(t),n=i.indexOf(e);-1==n?this.te.warn("I CANNOT FIND THE REQUEST ID "+e):i.splice(n,1),0==i.length&&this.v9.delete(t)}else this.te.warn("TRIED TO REMOVE AN OBJECT THAT DOES NOT EXIST")},t.prototype.nN=function(t){var e=[];if(this.w9(t))for(var i=this.v9.get(t),n=0;n<i.length;n++)this.R6.has(i[n])&&e.push(this.R6.get(i[n]));return e},t.prototype.w9=function(t){return this.v9.has(t)},t.prototype.dN=function(){return 0!=this.R6.length},t.prototype.iN=function(t){return this.v9.has(t)},t}();e.mr=s},function(t,e,i){"use strict";var n=i(1),r=i(3),o=i(25),s=o.sl,a=function(){function t(){this.Tx=0,this.S9=0,this.ao=-1,this.R9=!1,this.b9=!1,this.P9=!1,this.A9=!1,this.C9=new n}return t.prototype.vq=function(t){this.k9=t},t.prototype.W=function(){return this.k9},t.prototype.oJ=function(t){this.Tx=t},t.prototype.oH=function(){return this.Tx},t.prototype.aJ=function(t){this.S9=t},t.prototype.J0=function(){return this.S9},t.prototype.rJ=function(t){var e=s.Vd(t+"_"+r.ni.Ut._t).toString(s.Ed.Td);this.fR=e},t.prototype.K_=function(){return this.fR},t.prototype.Yx=function(t){this.R9=t},t.prototype.fk=function(){return this.R9},t.prototype.hH=function(t){this.P9=t},t.prototype.Sk=function(){return this.P9},t.prototype.lV=function(t){this.A9=t},t.prototype.bk=function(){return this.A9},t.prototype.Z0=function(t){this.O9=t},t.prototype.Ek=function(){return this.O9},t.prototype.$0=function(t){this._9=t},t.prototype.iV=function(){return this._9},t.prototype.Kx=function(t){this.N9=t},t.prototype.kk=function(){return this.N9},t.prototype.D9=function(t){this.b9=t},t.prototype.Rk=function(){return this.b9},t.prototype.VJ=function(t){this.ao=t},t.prototype.qJ=function(){return this.ao},t.prototype.Wx=function(t){this.gx=t},t.prototype.Pk=function(){return this.gx},t.prototype.wM=function(t){this.privateIp=t},t.prototype.Cs=function(){return this.privateIp},t.prototype.yM=function(t){this.publicIp=t},t.prototype.Kh=function(){return this.publicIp},t.prototype.uV=function(t){this.Wq=t},t.prototype.nV=function(){return this.Wq},t.prototype.WC=function(t){this.delta=t},t.prototype.aV=function(){return this.delta},t.prototype.xC=function(t,e){this.C9.set(t,e)},t.prototype.MC=function(t){this.C9.delete(t)},t.prototype.sV=function(){return this.C9},t.prototype.WF=function(){return this.Rk()?this.C9.keys():[]},t.prototype.XF=function(){return this.Rk()?[]:this.C9.keys()},t.prototype.sJ=function(t){this.ticket=t},t.prototype.Ak=function(){return this.ticket},t}();e.Kz=a},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(11),o=i(180),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.z8=function(e,i){var n=[],o=[],s=[],a=this.wC.Ek();return e.forEach(function(t){t.Ik.Tk.type==r.Zs.K&&n.push(t);var e=t.Ik.Tk.internalAs;0!=a&&e&&a==e&&o.push(t),t.Ik.Tk.type==r.Zs.Xs&&s.push(t)}),n.length>0?t.prototype.z8.call(this,n,i):o.length>0?t.prototype.z8.call(this,o,i):t.prototype.z8.call(this,s,i)},e}(o.F9);e.Gz=s},function(t,e,i){"use strict";var n=i(0),r=i(3),o=function(){function t(){this.te=n.Framework.resolve(n.Framework.q.I).log()}return t.prototype.K8=function(t){this.wC=t},t.prototype.z8=function(t,e){return this.L9(t)[0]},t.prototype.M9=function(t,e){return r.ni.Mr.Fr*(t.E8()/e)+r.ni.Mr.Lr*(1-t.I8())},t.prototype.L9=function(t){var e=this,i=.1;i+=t.map(function(t){return t.E8()}).reduce(function(t,e){return t+e});var n=t.sort(function(t,n){return e.M9(n,i)-e.M9(t,i)}),r=[];return n.forEach(function(t){r.push(t.guid+":"+e.M9(t,i))}),this.te.debug("SC ["+r.join(", ")+"]"),n},t}();e.F9=o},function(t,e,i){"use strict";var n=i(45),r=i(1),o=i(55),s=i(6),a=i(3),h=i(0),u=i(43),c=i(88),f=i(5),l=f.Rt.Ci,p=function(){function t(){this.B9=!1}return t.prototype.init=function(t){this.te=h.Framework.resolve(h.Framework.q.I).log(t.sessionId),this.wC=t.wC,this.Wz=t.Wz,this.yx=t.yx,this.V_=t.V_},t.prototype.PC=function(t){this.AC=t},t.prototype.i1=function(){this.B9=!0,this.vJ()},t.prototype.zx=function(){if(a.ni.dr.ir)return void this.U9();var t=!this.wC.Sk()||this.wC.fk()||!l;this.te.debug("REQUEST REMOTE ELECTION "+t),t?this.U9():this.x9()},t.prototype.U9=function(){var t=this.wC.Ek(),e=t&&0!=t?c.sx.hC:c.sx.AS;this.Wz.X0(e)},t.prototype.x9=function(){this.Wz.X0(c.sx.nx)},t.prototype.vJ=function(){var t=this;this.cJ(),this.H9=h.Framework.setInterval(function(){t.zx()},a.ni.dr.sr),this.zx()},t.prototype.cJ=function(){this.H9&&h.Framework.clearInterval(this.H9)},t.prototype.uJ=function(){this.V_.nk(),this.AC.IN()},t.prototype.Jx=function(t){var e=new r;if(t){this.q9().forEach(function(t){e.set(t,n.cC.aC)});var i=!1,o=n.cC.aC;this.wC.Rk()&&(o=n.cC.hC,i=!0),this.V_.OC(e,o,i)}else this.V_.OC(e,n.cC.$s,!1)},t.prototype.e1=function(t,e){var i=this,h=this.V9(e),u=this.V_.kC().isLive();if(t&&t.length>0){var c=new o;c.addEach(t);var f=a.ni.dr.$t||c.some(function(t){var e=s.fn.hn(hive.DN.protocol.FN.LN,t.key.JN);return i.te.info("GOT RANKING "+e+",CRV "+t.oD+",RV "+t.nD+",GS "+t.sD),i.j9(t)}),l=null!=h&&0!=h.length;if(this.te.debug("Tracker reports ["+h.keys().join(", ")+"]  bitrates"),this.te.debug("ISLive "+u+" DoElect "+f),a.ni.dr.Zt&&u){var p=this.q9();if(l&&f){this.wC.D9(!0),this.te.info("BECOMING SITE LEADER");var d=new r;p.forEach(function(t){d.set(t,n.cC.aC)}),h.forEach(function(t,e){i.yx.Zq.has(t)||d.set(e,n.cC.hC)}),this.V_.OC(d,n.cC.hC,!1)}else{this.wC.D9(!1);var v=n.cC.$s,g=new r;this.wC.Sk()&&this.wC.fk()&&(v=n.cC.aC,p.forEach(function(t){g.set(t,n.cC.aC)})),this.V_.OC(g,v,!1)}}}else if(u){a.ni.dr.$t?this.wC.D9(!0):this.wC.D9(!1);var y=new r,v=n.cC.$s;if(this.wC.Sk()&&this.wC.fk()){var w=this.q9();w.forEach(function(t){y.set(t,n.cC.aC)}),v=n.cC.aC}a.ni.dr.$t&&(v=n.cC.hC),this.V_.OC(y,v,!1)}},t.prototype.RV=function(){var t=this.q9(),e=new r;t.forEach(function(t){e.set(t,n.cC.aC)});var i=!1,o=n.cC.aC;this.wC.Rk()&&(o=n.cC.hC,i=!0),this.V_.OC(e,o,i)},t.prototype.q9=function(){var t=new o;return this.yx.Zq.forEach(function(e,i){e.Tk.ao&&!t.has(e.Tk.ao)&&t.add(e.Tk.ao)}),t.toArray()},t.prototype.V9=function(t){var e=new r,i=this.wC.Ek();return t.forEach(function(t){null!=t.ao&&(i>0?i===t.internalAs&&e.set(t.ao,t.guid):e.set(t.ao,t.guid))}),e},t.prototype.j9=function(t){if(t.sD<2)return!1;var e=Math.max(1,Math.round(t.sD*a.ni.dr.tr));return l||h.Framework.S()&&u.iC.tC?t.nD<e&&(this.wC.fk()||!this.wC.Sk()):t.nD<e},t.prototype.rk=function(t,e,i,r){var o=1,s=this.AC.gk(i,e),u=a.ni.dr.ar*h.Framework.random();if(t==n.cC.aC){var c=this.AC.TN(),f=c-u;o=Math.max(1,s-f)}else if(t==n.cC.hC){var l=a.ni.dr.hr-u;o=Math.max(1,s-l)+r}return o=Math.round(o)},t}();e.Qz=p},function(t,e,i){"use strict";var n=i(0),r=i(1),o=i(21),s=i(30),a=i(4);i(56);var h=function(){function t(){this.G9=!1,this.mn="[TRACKER] ",this.Q9=new r,this.Pl=new s.Pw,this.protocol=new s.nS(this.Pl),this.te=n.Framework.resolve(n.Framework.q.I).log(),n.Framework.S()||(this.client=n.Framework.resolve(n.Framework.q.H))}return t.prototype.M0=function(t,e){return this.te.debug("TRACKER CLIENT REGISTERED "+t),this.Q9.has(t)||this.Q9.set(t,e),this.Q9.get(t)},t.prototype.Nl=function(t){this.Q9.delete(t)},t.prototype.Dl=function(t){return this.Q9.get(t)},t.prototype.W0=function(t){var e=this;if(this.client&&this.client.lc()){var i=this.K9(t),n=new o.pc(Services.mQ,1,i),r=this.client.lc().send(n);r.then(function(){return e.te.info("TRACKER REQUEST SENT")}),r.fail(function(t){e.te.warn("TRACKER PROBLEM: ",t)})}else this.te.warn("SERVICES CONNECTION DOWN, CAN'T SEND TRACKER REQUEST ",t)},t.prototype.init=function(){var t=this;this.te.debug("TRACKER MANAGER INIT"),this.client&&this.client.lc()?this.client.lc().on(Services.mQ,10,function(e){try{var i=t.Y9(e.msg);t.Q9.has(i.sessionId)?t.Q9.get(i.sessionId).ZJ(i):t.te.warn("SESSION ID NOT VALID OR NULL "+i.sessionId)}catch(e){a.ErrorMonitor.gi().di("Tracker Manager initialization failure",t.mn,e)}}):n.Framework.S()||this.te.warn(this.mn+" CANNOT GET ACTIVE CONNECTION")},t.prototype.Y9=function(t){var e='[1, "TRACKER_RESP", 4, 0,'+t+"]";this.Pl.Dw(e);var i=(this.protocol.BS(),new hive.DN.protocol.FN.uD);return i.read(this.protocol),i.lD.map(function(t){t.guid=atob(t.guid),t.publicIp=new InetAddress,t.publicIp.address=t.lo,t.privateIp=new InetAddress,t.privateIp.address=t.uo}),i.Tk.guid=atob(i.Tk.guid),i.Tk.publicIp=new InetAddress,i.Tk.publicIp.address=i.Tk.lo,i.Tk.privateIp=new InetAddress,i.Tk.privateIp.address=i.Tk.uo,this.protocol.GS(),this.G9&&this.te.debug("RESP "+JSON.stringify(i)),i},t.prototype.K9=function(t){this.protocol.vS("TRACKER_REQ",s.VI.KI,0),t.write(this.protocol),this.protocol.ES();var e=this.Pl.Qw(),i=this.RL(e,",",4);return e.slice(i+1,e.length-1)},t.prototype.RL=function(t,e,i){return t.split(e,i).join(e).length},t}();e._z=h},function(t,e,i){"use strict";var n=i(8),r=function(){function t(){this.z9=0,this.J9=0,this.W9=0,this.X9=0,this.Z9=0,this.e7=0,this.t7=0,this.r7=0,this.i7=0,this.n7=0,this.s7=0,this.partners={}}return t}();e.o7=r;var o=function(){function t(){this.Ck="",this.a7=0,this.h7=0,this.c7=0,this.u7=0}return t}();e.l7=o;var s=function(){function t(){}return t.prototype.init=function(t){this.peer=t},t.prototype.p7=function(t){var e=this;this.peer.Hc.forEach(function(i,n){t[n]||(t[n]=new r);var o=t[n];o.Ck=i.Cn.Dc.Eh;var s=i.Cn.Dc.KF.LF,a=e.f7(s.p2pSubRespQt),h=e.f7(s.srcRespQt);o.z9+=a,o.J9+=h,o.X9+=e.f7(s.srcReqN),o.Z9+=e.f7(s.srcRespN),o.e7+=e.f7(s.srcRespErrN),o.t7+=e.f7(s.srcRespQt),o.r7+=e.f7(s.p2pSubReqN),o.i7+=e.f7(s.p2pSubRespN),o.n7+=e.f7(s.p2pSubRespErrN),o.s7+=e.f7(s.p2pSubRespQt),o.W9=a/(h+a)*100})},t.prototype.f7=function(t){return t||0},t.prototype.d7=function(t){var e=this;this.peer.Hc.forEach(function(i,n){t[n]||(t[n]=new r);var s=t[n];s.Ck=i.Cn.Dc.Eh,i.Cn.Dc.KF.BF.forEach(function(t,i){s.partners[i]||(s.partners[i]=new o);var n=s.partners[i];n.Ck=i,n.a7+=e.f7(t.p2pSuccSent),n.h7+=e.f7(t.p2pSuccReceived),n.c7+=e.f7(t.p2pSuccReq),n.u7+=e.f7(t.p2pFailReq)})})},t.prototype.render=function(){var t={};this.p7(t),this.d7(t);try{n.HiveConfig.Stats.render&&n.HiveConfig.Stats.render(t)}catch(t){console.warn("error in rendering local stats",t)}},t}();e.Pz=s},function(t,e,i){"use strict";var n=i(32),r=i(1),o=i(0),s=i(3),a=function(){function t(){this.g7=new r,this.v7=new r}return t.prototype.init=function(t){this.te=o.Framework.resolve(o.Framework.q.I).log(t.sessionId)},t.prototype.$J=function(t){var e=t.zu(),i=t.Hu,r=t.Mu.Su,a=Math.ceil(r/s.ni.Mr.Nr),h=t.Qu.bitrate,u=0,c=Math.min(s.ni.Mr.Nr,r);this.y7(e,h);for(var f=c-u;a>0;){var l=null;o.Framework.S()||(l=n.wrap(i.slice(u,c))),u+=f,this.g7.get(e).push(l),a--,c=Math.min(u+s.ni.Mr.Nr,r),f=c-u}},t.prototype.y7=function(t,e){if(this.v7.has(e)&&this.v7.get(e).length>s.ni.Sr.wr){var i=this.v7.get(e)[0];this.g7.delete(i),this.v7.get(e).shift()}if(this.v7.has(e))this.v7.get(e).push(t),this.g7.set(t,[]);else{var n=[t];this.v7.set(e,n),this.g7.set(t,[])}},t.prototype.W6=function(t,e){return this.g7.has(t)?this.g7.get(t)[e]:null},t.prototype.m7=function(t){return this.v7.get(t)},t.prototype.fJ=function(){this.g7=new r,this.v7=new r},t}();e.Lz=a},function(t,e,i){"use strict";var n=i(1),r=i(3),o=i(0),s=i(25),a=(s.sl,function(){function t(){this.mn="[IPSpoofing] ",this.E7=r.ni.Vt.xt}return t.prototype.init=function(t){this.te=o.Framework.resolve(o.Framework.q.I).log(t.sessionId),this.SC=t.SC,this.T7=new n,this.I7=new n,this.E7&&this.w7()},t.prototype._q=function(t,e,i){if(!this.E7)return!1;if(this.T7.has(t)||!e||!i)return!1;var n=this.S7(e,i);return!!(n&&this.I7.has(n)&&this.I7.get(n).length>=r.ni.Vt.Ht)&&(this.te.debug(this.mn+"Spoofing rule violated for "+t+" with privateIp "+e+" publicIp "+i),!0)},t.prototype.Mq=function(t,e,i){if(this.E7&&i&&e){var n=this.S7(e,i),r=this.T7.get(t);r&&r!=n&&this.R7(t,r),this.b7(t,n)}},t.prototype.P7=function(t){this.E7&&this.dV(t)},t.prototype.aH=function(t){this.E7&&this.dV(t)},t.prototype.b7=function(t,e){this.T7.set(t,e);var i=[];this.I7.has(e)&&(i=this.I7.get(e),-1!=i.indexOf(t))||(i.push(t),this.I7.set(e,i))},t.prototype.dV=function(t){var e=this.T7.get(t);e?(this.R7(t,e),this.T7.delete(t)):this.te.warn(this.mn+"no ip pair for guid "+t)},t.prototype.R7=function(t,e){var i=this.I7.get(e),n=i.indexOf(t);-1!=n?(i.splice(n,1),0==i.length?this.I7.delete(e):this.I7.set(t,i)):this.te.warn(this.mn+"pair list "+e+" does not contain guid "+t)},t.prototype.S7=function(t,e){return e+":"+t},t.prototype.w7=function(){var t=this;o.Framework.setInterval(function(){var e=[];t.I7.forEach(function(i,n){if(i.length>r.ni.Vt.Ht){for(var o=[],s=r.ni.Vt.Ht;s<i.length;s++)o.push(i[s]);t.te.warn("IpSpoofing violation for "+n+" - closing: "+o),e.concat(o)}}),e.forEach(function(e){t.SC.Vq(e)})},r.ni.Vt.qt)},t}());e.Vt=a},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(187),o=i(3),s=i(95),a=i(0),h=function(t){function e(){var e=t.call(this)||this;return e.type="Score",e}return n(e,t),e.prototype.A7=function(t,e){return e.sort(s.QV.VV),e.slice(0,t)},e.prototype.C7=function(t,e,i,n){return n.filter(function(t){return e.every(function(e){return e.guid!=t.Tk.guid})&&-1==i.indexOf(t.Tk.guid)}).slice(0,t)},e}(r.k7);e.Bz=h;var u=function(){function t(){}return t.prototype.Jq=function(t){var e=t.filter(function(t){return!t.qq.Pl.ql()}),i=a.Framework.time(),n=e.filter(function(t){return i-t.n8>o.ni.Ut.Bt});return n.length>0?(n.sort(s.YV.VV),n.slice(0,1)[0]):null},t}();e.Uz=u},function(t,e,i){"use strict";var n=i(94),r=i(3),o=i(0),s=function(){function t(){this.te=o.Framework.resolve(o.Framework.q.I).log()}return t.prototype.Aq=function(t,e,i,s){var a=[],h=[],u=Math.round(t*(1-r.ni.Ot.Ct)),c=Math.max(e.length-u,0),f=t-e.length+c;if(c>0){var l=e.filter(function(t){return!t.qq.Pl.ql()}),p=o.Framework.time(),d=l.filter(function(t){return p-t.n8>r.ni.Ut.Bt}),v=Math.min(d.length,c);h=this.A7(v,d);var g=[],y=[];h.forEach(function(t){g.push(t.guid),y.push(t.GV.jV(!1))})}return f>0&&(a=this.C7(f,e,i,s)),this.te.debug("[PART] A/R: "+f+"/"+c+" ["+a.map(function(t){return t.Tk.guid.substring(0,8)})+"/"+h.map(function(t){return t.guid.substring(0,8)})+"] P:["+e.map(function(t){return t.guid.substring(0,8)})+"] M:["+s.map(function(t){return t.Tk.guid.substring(0,8)})+"]"),new n.qV(a,h)},t}();e.k7=s},function(t,e,i){"use strict";var n=i(1),r=i(94),o=i(3),s=i(0),a=i(6),h=i(95),u=function(){function t(){}return t.prototype.Aq=function(t,e,i,n,a){this.wC=t;var h=[],u=[],c=Math.round(e*(1-o.ni.Ot.Ct)),f=Math.max(i.length-c,0),l=e-i.length+f;if(f>0){var p=i.filter(function(t){return!t.qq.Pl.ql()}),d=s.Framework.time(),v=p.filter(function(t){return d-t.n8>o.ni.Ut.Bt}),g=Math.min(v.length,f);u=this.A7(g,v),u.length>g&&(l+=u.length-g);var y=[],w=[];u.forEach(function(t){y.push(t.guid),w.push(t.GV.jV(!1))})}return l>0&&(h=this.C7(l,i,n,a)),new r.qV(h,u)},t.prototype.A7=function(t,e){var i=this;e.sort(h.QV.VV);var n=e.slice(0,t);return e.slice(t,e.length).forEach(function(t){i.O7(t.Ik)&&n.push(t)}),n},t.prototype.C7=function(t,e,i,n){var r=this,s=[],a=[],h=[],u=[],c=[],f=this.wC.Ek();f||(f=-1);var l=[];e.forEach(function(t){l.push(t.guid)});var p=Math.floor(t*o.ni.Ut.Ft),d=this.wC.sV();n.forEach(function(t){var e=t.Tk.ho;if(e){var i=r.so(t,e,f,d);i.Ix?i._7?s.push(t):a.push(t):r.N7(t,o.ni.Ut.Dt)?r.O7(t)?c.push(t):u.push(t):h.push(t)}else c.push(t)});var v=this.D7(s,a,h,u,c,t,t,p);return v.slice(0,Math.min(v.length,t))},t.prototype.D7=function(t,e,i,n,r,h,u,c){var f=[],l=[];t.length>0&&s.Framework.random()<o.ni.Ut.Lt&&(t=a.fn.nn(t),l=t.slice(0,Math.min(t.length,c)),f.push.apply(f,l),u=h-l.length);var p=[];e.length>0&&(e=a.fn.nn(e),p=e.slice(0,Math.min(e.length,c)),f.push.apply(f,p),u=h-p.length);var d=[];i.length>0&&(i=a.fn.nn(i),d=i.slice(0,Math.min(i.length,c)),f.push.apply(f,d),u=h-d.length);var v=null;n.length>0&&(n=a.fn.nn(n),v=n.slice(0,Math.min(n.length,u)),u=h-((d.length>0?d.length:0)-v.length));var g=[];return u>0&&r.length>0&&(r=a.fn.nn(r),g=r.slice(0,Math.min(r.length,u)),f.push.apply(f,g)),f},t.prototype.so=function(t,e,i,r){var o=!1,s=!1,a=new n;e.forEach(function(t){a.set(t.bitrate,t)});var h=new n;return a.forEach(function(t,e){r.has(e)&&h.set(e,t)}),h.keys().length>0&&h.forEach(function(e,n){var a=r.get(n);if(a&&e.state>=2&&a.type>=1){var h=t.Tk.internalAs;h>0&&h==i&&(s=!0),o=!0}}),{Ix:o,_7:s}},t.prototype.N7=function(t,e){var i=this.wC.aV(),n=this.wC.qJ(),r=this.F7(t,n);return(0!=i||0!=r)&&i<r&&i>r+e},t.prototype.O7=function(t){var e=this.wC.aV(),i=this.wC.qJ(),n=this.F7(t,i);return 0==e&&0==n||e>n},t.prototype.F7=function(t,e){var i=t.Tk.ho,n=0;return i&&i.forEach(function(t){t.bitrate==e&&(n=t.delta)}),n},t}();e.xz=u;var c=function(){function t(){this.te=s.Framework.resolve(s.Framework.q.I).log()}return t.prototype.Jq=function(t,e,i){var r=this;this.wC=t;var a=this.wC.sV(),h=e.ho;if(h){var u=i.filter(function(t){return!t.qq.Pl.ql()}),c=s.Framework.time(),f=u.filter(function(t){return c-t.n8>o.ni.Ut.Bt});if(0==h.filter(function(t){return a.has(t.bitrate)}).length)return null;var l=this.L7(f),p=this.M7(a,l);if(p)return p;var d=a.keys().length,v=f.length,g=Math.round(v/d),y=l.keys().filter(function(t){return a.has(t)}),w=new n;y.forEach(function(t){w.set(t,l.get(t))});var m=this.B7(w,g);return null!=m?m:(h.forEach(function(t){var e=w.get(t.bitrate);if(null!=e){var i=r.U7(e);if(i.length>0&&!o.ni.Ut.Mt)return i[0]}}),null)}return null},t.prototype.L7=function(t){var e=new n;return t.forEach(function(t){var i=t.Ik.Tk.ao;if(i||(i=-1),e.has(i)){var n=e.get(i);n.push(t),e.set(i,n)}else e.set(i,[t])}),e},t.prototype.U7=function(t){return t.filter(function(t){if(0==t.KV.E5(o.ni.Or.kr))return t})},t.prototype.B7=function(t,e){var i=[];t.forEach(function(t,e){i.push({bitrate:e,x7:t.length})}),i.sort(function(t,e){return t.x7>e.x7?1:t.x7<e.x7?0:-1});var n=null;return i.forEach(function(i){if(t.get(i.bitrate).length>e){var r=t.get(i.bitrate);r.length>0&&(r.sort(h.YV.VV),n=r[0])}}),n},t.prototype.M7=function(t,e){var i=this,n=null;return e.has(-1)?n=e.get(-1)[0]:e.filter(function(e,i){return!t.has(i)}).forEach(function(t,e){var r=i.U7(t);if(r.length>0)return void(n=r[0])}),n},t}();e.Hz=c},function(t,e,i){"use strict";var n=i(0),r=i(10),o=i(31),s=i(22),a=i(11),h=i(8),u=i(3),c=function(){function t(){this.H7=!0===h.HiveConfig.Stats.Ds,this.q7=null}return t.prototype.init=function(t){this.te=n.Framework.resolve(n.Framework.q.I).log(t.sessionId),this.mn="S["+t.sessionId+"]",this.Dc=t.Cn.Dc,this.wC=t.wC,this.EJ()},t.prototype.d1=function(t){this.Dc.N_.metrics.memN=t,this.Dc.KF.metrics.memN=t},t.prototype.Fq=function(t,e){this.Dc.N_.metrics.lookupTotal++,this.Dc.KF.metrics.lookupTotal++,t?(this.Dc.N_.metrics.lookupNotFound++,this.Dc.KF.metrics.lookupNotFound++,this.Dc.N_.metrics.lookupFailed++,this.Dc.KF.metrics.lookupFailed++):e?(this.Dc.N_.metrics.lookupFailed++,this.Dc.KF.metrics.lookupFailed++):(this.Dc.N_.metrics.lookupReqEstablished++,this.Dc.KF.metrics.lookupReqEstablished++)},t.prototype.eV=function(){this.Dc.N_.metrics.lookupReqAccept++,this.Dc.KF.metrics.lookupReqAccept++},t.prototype.h8=function(t,e,i,n,r){if(this.H7||n){var o=r==s.Tu.Eu,a=this.Dc.mL(t),h=this.Dc.yL(t);a.p2pSuccReq++,a.p2pSuccReceived+=e,h.p2pSuccReq++,h.p2pSuccReceived+=e,o&&(a.p2pSuccReceivedLow+=e,h.p2pSuccReceivedLow+=e),i>0&&!o&&(a.p2pSuccReceivedLow+=e,h.p2pSuccReceivedLow+=e)}},t.prototype.l8=function(t,e,i,n,r,o){if(this.H7||r){var a=o==s.Tu.Eu,h=this.Dc.mL(t),u=this.Dc.yL(t);h.p2pFailReq++,h.p2pSuccReceived+=e,h.p2pFailReceived+=n-e,u.p2pSuccReq++,u.p2pSuccReceived+=e,u.p2pFailReceived+=n-e,a&&(h.p2pSuccReceivedLow+=e,u.p2pSuccReceivedLow+=e),i>0&&!a&&(h.p2pSuccReceivedLow+=e,u.p2pSuccReceivedLow+=e)}},t.prototype.p8=function(t,e,i){if(this.H7||i){var n=this.Dc.mL(t),r=this.Dc.yL(t);n.p2pFailReq++,n.p2pFailReceived+=e,r.p2pFailReq++,r.p2pFailReceived+=e}},t.prototype.d8=function(t,e,i){if(this.H7||i){var n=this.Dc.mL(e),r=this.Dc.yL(e);n.p2pSuccResp++,n.p2pSuccSent+=t,r.p2pSuccResp++,r.p2pSuccSent+=t}},t.prototype.m8=function(t,e,i,n){if(this.H7||n){var r=this.Dc.mL(i),o=this.Dc.yL(i);r.p2pPartResp++,r.p2pSuccSent+=t,r.p2pFailSent+=e-t,o.p2pPartResp++,o.p2pSuccSent+=t,o.p2pFailSent+=e-t}},t.prototype.v8=function(t,e,i){if(this.H7||i){var n=this.Dc.mL(e),r=this.Dc.yL(e);n.p2pFailResp++,n.p2pFailSent+=t,r.p2pFailResp++,r.p2pFailSent+=t}},t.prototype.J_=function(t){t?this.Dc.N_.metrics.bitrateUpN++:this.Dc.N_.metrics.bitrateDwnN++},t.prototype.BJ=function(t){if(-1==[r.Ws.zs,r.Ws.Js].indexOf(t.Yu())){var e=t.Yu()!=r.Ws.Ks;if((this.H7||e)&&(this.Dc.fL().reqN++,this.Dc.M_().reqN++,t.Yu()==r.Ws.Ys)){var i=t;if(i.bitrate){var n=i.bitrate;this.Dc.dL(n).reqN++,this.Dc.F_(n).reqN++}}}else this.Dc.fL().reqOtherN++,this.Dc.M_().reqOtherN++},t.prototype.sW=function(t){var e=t.Yu()!=r.Ws.Ks;if(this.H7||e){var i=this.Dc.fL(),n=this.Dc.M_(),o=null,a=null;if(-1==[r.Ws.zs,r.Ws.Js].indexOf(t.Yu())){if(i.srcReqN++,n.srcReqN++,e){var h=this.V7(t);h&&(o=this.Dc.dL(h),a=this.Dc.F_(h),o.srcReqN++,a.srcReqN++)}if(t.Ku()==s.Tu.vu&&(i.srcOtherReqN++,n.srcOtherReqN++,e)){var h=this.V7(t);h&&(o.srcOtherReqN++,a.srcOtherReqN++)}}}},t.prototype.J8=function(t){if(this.Dc.fL().p2pSubReqN++,this.Dc.M_().p2pSubReqN++,t.Yu()==r.Ws.Ys){var e=this.V7(t);e&&(this.Dc.dL(e).p2pSubReqN++,this.Dc.F_(e).p2pSubReqN++)}},t.prototype.j7=function(t,e){this.G7(t,this.Dc.M_()),this.G7(t,this.Dc.fL());var i=this.V7(t);i&&t.Yu()===r.Ws.Ys&&(this.G7(t,this.Dc.dL(i)),this.G7(t,this.Dc.F_(i))),isNaN(e)||(this.Dc.N_.metrics.srcThroughput=e)},t.prototype.uW=function(t,e){var i=t.Yu()!=r.Ws.Ks;(this.H7||i)&&(-1!=[r.Ws.zs,r.Ws.Js].indexOf(t.Yu())?(this.Dc.fL().respFallbackOtherN++,this.Dc.M_().respFallbackOtherN++):this.j7(t,e))},t.prototype.aW=function(t,e){if(-1!=[r.Ws.zs,r.Ws.Js].indexOf(t.Yu()))this.Dc.fL().respFallbackOthertErrN++,this.Dc.M_().respFallbackOthertErrN++;else{var i=t.Yu()!=r.Ws.Ks;if(this.H7||i)if(this.z_(t.type)){if(this.Dc.M_().respFallbackErrN++,this.Dc.fL().respFallbackErrN++,i){var n=this.V7(t);n&&(this.Dc.dL(n).respFallbackErrN++,this.Dc.F_(n).respFallbackErrN++)}if(0==t.Mu.Au&&(this.Dc.M_().srcRespErrN++,this.Dc.fL().srcRespErrN++,i)){var n=this.V7(t);n&&t.Yu()===r.Ws.Ys&&(this.Dc.dL(n).srcRespErrN++,this.Dc.F_(n).srcRespErrN++)}this.j7(t,e)}else if(-1!=u.ni.Wt.Jt.indexOf(t.Vu.status))this.Dc.fL().fallAgentFailedRespN++,this.Dc.M_().fallAgentFailedRespN++,this.Dc.fL().reqN--,this.Dc.M_().reqN--;else{if(0==t.Mu.Au&&(this.Dc.fL().srcOtherRespErrN++,this.Dc.M_().srcOtherRespErrN++),!i){var n=this.V7(t);n&&t.Yu()===r.Ws.Ys&&(this.Dc.dL(n).srcOtherRespErrN++,this.Dc.F_(n).srcOtherRespErrN++)}this.j7(t,e)}}},t.prototype.GJ=function(t,e){if(e.ex==s.Tu.Eu)this.Dc.M_().respP2pN++,this.Dc.fL().respP2pN++;else if(e.ex==s.Tu.vu)this.Dc.M_().respFallbackN++,this.Dc.fL().respFallbackN++;else if(e.ex==s.Tu.du){this.Dc.M_().lCacheRespN++,this.Dc.fL().lCacheRespN++;var i=n.Framework.S()?e.length:t.Hu.byteLength;this.Dc.M_().lCacheRespQt+=i,this.Dc.fL().lCacheRespQt+=i}},t.prototype.tW=function(t,e){var i=t.Yu()!=r.Ws.Ks;(this.H7||i)&&this.j7(t,e)},t.prototype.JJ=function(t){if(0!=t.qu&&(this.Dc.fL().p2pSubRespErrN++,this.Dc.M_().p2pSubRespErrN++,t.Yu()==r.Ws.Ys)){var e=this.V7(t);e&&(this.Dc.dL(e).p2pSubRespErrN++,this.Dc.F_(e).p2pSubRespErrN++)}},t.prototype.W8=function(t){if(this.Dc.fL().p2pSubRespExpN++,this.Dc.M_().p2pSubRespExpN++,t.Yu()==r.Ws.Ys){var e=this.V7(t);e&&(this.Dc.dL(e).p2pSubRespExpN++,this.Dc.F_(e).p2pSubRespExpN++)}},t.prototype.G7=function(t,e){var i=t.Mu.Su,n=t.Mu.Au,o=t.Mu.Ru,s=t.Mu.bu,h=t.Mu.Pu;if(t.Yu()!=r.Ws.zs){if(t.Mu.Iu&&s&&s<i){var u=s/i;e.p2pSubRespPartN+=u,this.z_(t.type)||(e.p2pAgenTrafficFailureQt+=i-o)}if(0!=h&&(h==i&&e.lCacheRespN++,e.lCacheRespQt+=t.Mu.Pu),0!=o)if(o==i&&(this.z_(t.type)&&e.respP2pN++,e.p2pSubRespN++),e.p2pSubReqQt+=i,e.p2pSubRespQt+=o,e.p2pAgenTrafficSuccessQt+=t.Mu.p2pAgenTrafficSuccessQt,e.p2pDirectQt+=o,t.KU.Ik.Tk.type==a.Zs.K)e.p2pUdpbQt+=o,e.p2pNatQt+=o;else{var c=this.wC.Ek();if(c&&c>0)if(null!=t.YU){var f=t.YU.internalAs;c===f&&(e.p2pNatQt+=o)}else this.te.warn("Missing partner info")}}if(0!=n){if(this.Q7(t.type)&&(e.srcOtherReqQt+=t.Mu.Au),n==i)this.Q7(t.type)?(e.srcOtherRespN++,e.srcOtherRespQt+=t.Mu.Au,e.srcOtherOverQt+=t.Mu.Au,e.fallAgentRespN++):e.respFallbackN++,e.srcRespN++;else{e.srcRespErrN++;var l=n/(o+n);e.respFallbackN=l,e.respP2pN=1-l,this.Q7(t.type)&&(e.srcOtherRespErrN++,e.srcOtherRespQt+=t.Mu.Au,e.srcOtherOverQt+=t.Mu.Au,e.fallAgenTrafficFailureQt+=t.Mu.Au)}e.srcReqQt+=t.Mu.Au,e.srcRespQt+=t.Mu.Au,e.srcOverQt+=t.Mu.Au,this.Q7(t.type)&&(e.fallAgenTrafficSuccessQt+=t.Mu.Cu)}},t.prototype.V7=function(t){var e=null;if(t.Qu instanceof o.SR){var i=t.Qu;i.bitrate&&(e=i.bitrate)}return e},t.prototype.z_=function(t){return t!=s.Tu.Eu&&t!=s.Tu.vu},t.prototype.Q7=function(t){return!this.z_(t)},t.prototype.EJ=function(){this.K7()},t.prototype.gJ=function(){n.Framework.clearInterval(this.q7),this.q7=null},t.prototype.K7=function(){var t=this;null!=this.q7&&(this.q7=n.Framework.setInterval(function(){t.Dc.qF=t.wC.iV(),t.Dc.HF=t.wC.Ek(),t.Dc.cL=t.wC.Kh()},u.ni.ii.ri))},t}();e.bz=c},function(t,e,i){"use strict";var n=i(0),r=i(3),o=i(11),s=i(191),a=i(8),h=function(){function t(){this.Y7=!1,this.mn="[UDPBDiscovery] ",this.z7=-1}return t.prototype.init=function(t){this.te=n.Framework.resolve(n.Framework.q.I).log(t.sessionId),this.J7=t.Xz,this.wC=t.wC},t.prototype.nJ=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.ss=t,this.fR=this.wC.K_()},t.prototype.W7=function(){var t=this;this.te.debug(this.mn+"START UDP BROADCAST SERVER"),this.J7.W7(r.ni.UDPBroadcast.Br,function(e,i){if(t.z7>-1){var n=s.X7.fu(i);if(n.Ck!=t.guid&&n.Nx==t.fR&&n.Qq===r.ni.Ut._t){t.te.debug(t.mn+"I RECEIVED A MESSAGE FROM "+n.Ck);var a=new o.po(o.Zs.K,null,n.so);a.guid=n.Ck,a.uo=e,a.co=n.co,t.ss.forEach(function(t){return t.Ax([a],!1)})}}})},t.prototype.mJ=function(){var t=this;this.te.info(this.mn+"START BROADCAST EVERY "+r.ni.UDPBroadcast.Ur),-1!=this.z7&&n.Framework.clearInterval(this.z7),this.z7=n.Framework.setInterval(function(){t.Z7()},r.ni.UDPBroadcast.Ur),this.Z7()},t.prototype.pJ=function(){-1!=this.z7&&n.Framework.clearInterval(this.z7)},t.prototype.Z7=function(){var t=new s.X7(this.fR,this.wC.W(),this.wC.oH(),this.wC.fk(),r.ni.Ut._t);this.te.info(this.mn+"BROADCAST MESSAGE contextId "+t.Nx+" id "+t.Ck+" udpscore "+t.co+" lan leader "+t.so+" protobufVersion "+t.Qq),a.HiveConfig.UDPBroadcast.usiz&&(r.ni.UDPBroadcast.xr=a.HiveConfig.UDPBroadcast.usiz),this.J7.eee(r.ni.UDPBroadcast.Br,r.ni.UDPBroadcast.xr,t.pu())},t.prototype.Zh=function(t){this.te.info("UDPDISCOVERY SERVER CONNECTED"),this.Y7||(this.guid=t,this.W7(),this.mJ())},t}();e.Iz=h},function(t,e,i){"use strict";var n=function(){function t(t,e,i,n,r){this.Nx=t,this.Ck=e,this.co=i,this.so=n,this.Qq=r}return t.prototype.pu=function(){var t={Nx:this.Nx,Ck:this.Ck,co:this.co,so:this.so,Qq:this.Qq};return JSON.stringify(t,this.tee)},t.prototype.tee=function(t,e){if(null!==e)return e},t.fu=function(e){var i=e,n=JSON.parse(i);return new t(n.Nx,n.Ck,n.co,n.so,n.Qq)},t}();e.X7=n},function(t,e,i){"use strict";var n=i(0),r=function(){function t(){this.mn="[ProxyUDPB]",this.te=n.Framework.resolve(n.Framework.q.I).log(),this.J7=window.ree,this.J7||this.te.error(this.mn+" helper undefined")}return t.prototype.W7=function(t,e){try{this.J7&&this.J7.W7(t,e)}catch(t){this.te.warn(this.mn+t)}},t.prototype.iee=function(){try{this.J7&&this.J7.iee()}catch(t){this.te.warn(this.mn+t)}},t.prototype.eee=function(t,e,i){try{this.J7&&this.J7.eee(t,e,i)}catch(t){this.te.warn(this.mn+t)}},t.prototype.pJ=function(){try{this.J7&&this.J7.pJ()}catch(t){this.te.warn(this.mn+t)}},t.prototype.nee=function(t,e){try{this.J7&&this.J7.nee(t,e)}catch(t){this.te.warn(this.mn+t)}},t}();e.wz=r},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(85),o=i(194),s=i(86),a=i(87),h=i(57),u=i(22),c=i(31),f=i(2),l=i(4),p=function(t){function e(){var e=t.call(this)||this;return e.see.onerror=function(t){l.ErrorMonitor.gi().di("Shared Worker error",{error:t.message})},e.oee.onerror=function(t){l.ErrorMonitor.gi().di("Web Worker error",{error:t.type})},e.see.port.start(),e}return n(e,t),e.prototype.aee=function(){var t=this;setTimeout(function(){t.hee()},1e3)},e.prototype.hee=function(){var t=this;this.see.port.onmessage=function(e){t.te.debug("LRU length : "+e.data.response)},this.te.debug("Send message"),this.see.port.postMessage({type:o.uee.cee}),this.aee()},e.prototype.contains=function(t){var e=this,i=f.defer();if(this.xU.has(t))i.resolve(!0);else{var n=!1,r=setTimeout(function(){n=!0,e.te.debug("VOD CONTAINS TIMEDOUT : "+t),i.resolve(!1)},1e3);this.see.port.onmessage=function(t){clearTimeout(r),n||(t.data.response?i.resolve(!0):i.resolve(!1))},this.see.onerror=function(t){e.te.error(t)},this.see.port.postMessage({type:o.uee.lee,pee:t})}return i.Te},e.prototype.fee=function(t){var e=f.defer(),i=this.xU.get(t);if(null!=i){var n=null;i.content.forEach(function(t,e){if(h.wD.ID(e).vD())return n=t,n.headers=i.headers,void(n.YU=i.YU)}),e.resolve(n)}else e.resolve(null);return e.Te},e.prototype.get=function(t){var e=this,i=f.defer();if(this.xU.has(t))this.fee(t).then(function(t){i.resolve(t)});else{this.te.debug("SHAREDWORKER: Permission Request to READ");var n=Date.now();this.dee(o.uee.gee,n).then(function(r){e.te.debug("SHAREDWORKER: Permission Request To READ : "+r),r?e.vee(t).then(function(t){e.te.debug("SHAREDWORKER:  Read Completed "),e.see.port.postMessage({type:o.uee.yee,id:n}),i.resolve(t)}):i.resolve(null)})}return i.Te},e.prototype.vee=function(t){var e=this,i=f.defer(),n=null,r=!1,a=setTimeout(function(){r=!0,i.resolve(n)},1e3);return this.oee.onmessage=function(h){if(clearTimeout(a),!r){if(h.data.response){var c=new u.Fu;c.Iu=!1,c.wu=!0,c.Su=h.data.data.length,c.Ru=0,c.Pu=h.data.data.length,c.Au=0,n=new s.zU(h.data.data.length,h.data.data.content,c,u.Tu.du),n.headers=h.data.data.mee}else e.see.port.postMessage({type:o.uee.Eee,pee:t});i.resolve(n)}},this.oee.postMessage({type:o.uee.Tee,pee:t}),i.Te},e.prototype.m=function(){var t=this;this.te.debug("FLUSHING IN-MEMORY CACHE");for(var e=[],i=0;i<this.qU.length;i++)this.xU.get(this.qU[i]).ix||e.push(this.qU[i]);this.te.debug("Flush "+e.length+" in memory"),e.length>0?this.Iee(e).then(function(e){t.wee()}):this.wee()},e.prototype.wee=function(){var t=this,e=0,i=0;this.te.debug("PURGING PERSISTENTDB's IN-MEMORY CACHE"),this.qU.every(function(n,r){var o=t.xU.get(n).size();return e+o>t.VU?(i=r,t.te.debug("CACHE TOO BIG "+(e+o)),!1):(e+=o,!0)})||this.qU.splice(i,this.qU.length-1).forEach(function(e){t.xU.delete(e)}),this.GU()},e.prototype.Iee=function(t){var e=this,i=f.defer();this.te.debug("SHAREDWORKER:  Permission Request To Write ");var n=Date.now();return this.dee(o.uee.See,n).then(function(r){e.te.debug("SHAREDWORKER:  Permission Request To WRITE : "+r),r?(e.te.debug("Flush the contents"),e.Ree(t).then(function(t){e.te.debug("SHAREDWORKER:  WRITE COMPLETED"),e.see.port.postMessage({type:o.uee.bee,id:n}),i.resolve(t)})):i.resolve(r)}),i.Te},e.prototype.Ree=function(t){var e=this,i=f.defer();return this.Pee(t[0]).then(function(n){if(n)t.shift(),0==t.length?i.resolve(!0):e.Ree(t).then(function(t){i.resolve(t)});else{var r=!1,s=setTimeout(function(){r=!0,t.shift(),0==t.length?i.resolve(!1):e.Ree(t).then(function(t){i.resolve(t)})},1e3);e.oee.onmessage=function(n){n.data&&(e.xU.get(t[0]).ix=!0,e.see.port.postMessage({type:o.uee.Aee,pee:t[0],size:e.xU.get(t[0]).size()})),clearTimeout(s),r||(t.shift(),0==t.length?n.data?i.resolve(!0):i.resolve(!1):e.Ree(t).then(function(t){i.resolve(t)}))},e.oee.onerror=function(t){e.te.error(t)};var a=e.xU.get(t[0]),u=null,c=null;a.content.forEach(function(t,e){if(h.wD.ID(e).vD())return u=t,c=e,void(u.headers=a.headers)});var f={mR:a.Qu.zu(),headers:a.headers,length:a.size(),Cee:c,content:u.data,Qu:a.Qu};e.oee.postMessage({type:o.uee.kee,data:f})}}),i.Te},e.prototype.Pee=function(t){var e=this,i=f.defer(),n=!1,r=setTimeout(function(){n=!0,i.resolve(!1)},1e3);return this.see.port.onmessage=function(o){clearTimeout(r),n||(e.te.debug("SHAREDWORKER:  CONTAINS REQUEST : "+t+" : "+o.data.response),o.data.response?i.resolve(!0):i.resolve(!1))},this.see.onerror=function(t){e.te.error(t),i.resolve(!1)},this.see.port.postMessage({type:o.uee.lee,pee:t}),i.Te},e.prototype.dee=function(t,e){var i=this,n=f.defer(),r=!1,s=setTimeout(function(){r=!0,n.resolve(!1)},2e3);return this.see.port.onmessage=function(e){clearTimeout(s),r?t==o.uee.gee?i.see.port.postMessage({type:o.uee.yee}):t==o.uee.See&&i.see.port.postMessage({type:o.uee.bee}):n.resolve(e.data.response)},this.see.onerror=function(t){i.te.error(t)},this.see.port.postMessage({type:t,id:e}),n.Te},e.prototype.hk=function(t){return[]},e.prototype.JU=function(t){var e=this,i=f.defer(),n=[],r=Date.now();return this.dee(o.uee.gee,r).then(function(t){if(t){var s=!1,h=setTimeout(function(){s=!0,e.see.port.postMessage({type:o.uee.yee,id:r}),i.resolve(n)},4e3);e.oee.onmessage=function(t){if(clearTimeout(h),t.data.response&&null!=t.data)for(var u=0;u<t.data.elements.length;u++){var f=new c.SR(t.data.elements[u].url,t.data.elements[u].gR,t.data.elements[u].dR,t.data.elements[u].vR,t.data.elements[u].duration,t.data.elements[u].bitrate,t.data.elements[u].yR),l=new a.QU(f);l.headers=t.data.elements[u].mee,l.tx=t.data.elements[u].length,n.push(l)}e.see.port.postMessage({type:o.uee.yee,id:r}),s||i.resolve(n)},e.oee.onerror=function(t){l.ErrorMonitor.gi().di("GET ELEMENTS ERROR",{error:t}),e.see.port.postMessage({type:o.uee.yee,id:r})},e.oee.postMessage({type:o.uee.Oee})}}),i.resolve(null),i.Te},e}(r.$U);e.Sz=p},function(t,e,i){"use strict";var n=function(){function t(){}return t}();n.See="write_request",n.lee="contains_request",n.Aee="write_id_operation",n.gee="read_request",n.yee="read_completed",n.bee="write_completed",n.Eee="update_lru",n.cee="lru_stats",n.Tee="read_operation",n.Oee="read_elements_operation",n._ee="read_keys_operation",n.kee="write_operation",e.uee=n},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(20);!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(r.gn.ou.au);t.uz=e}(t.ou||(t.ou={}))}(e.gn||(e.gn={}))},function(t,e,i){"use strict";var n=i(2),r=i(7),o=i(197),s=i(26),a=s.gn.HiveTechError,h=s.gn.cE,u=i(65),c=i(19),f=i(18),l=i(42),p=i(50),d=i(8),v=i(4),g=i(53),y=i(29),w=i(67),m=(i(51),navigator),b=function(){function t(t,e,i){this.mn="[HiveJsProxy]",this.Nee=0,this.h_=t,this.options_=new o.gn.ou.Dee,this.Fee(e),this.l_(),this.Vj=i}return t.prototype.Fn=function(){return t.c_},t.prototype.getVersion=function(){return this.version},t.prototype.u_=function(){return!1},t.prototype.l_=function(){var t=this;if(null==this.Lee||Date.now()-this.Nee>1e4){var e="//"+u.cO.oA+":"+u.cO.uO+"/version.json";this.Lee=r.ps(e).then(function(e){var i=JSON.parse(e);return t.state=i.state,t.version=i.version,"ready"===t.state?"ready":(t.te().warn(t.id()+"Client not ready: "+t.state),n.reject(new a(h.nE,"state "+t.state)))},function(e){var i="Client not reachable";return void 0!=e&&void 0!=e.status&&-1!=e.status&&(i="Client check returned "+e.status),t.te().warn(t.id()+i),n.reject(new a(h.nE,i))}).catch(function(t){return t instanceof a?n.reject(t):n.reject(new a(h.nE,"error parsing response"))}),this.Nee=Date.now()}return this.Lee},t.prototype.initSession=function(t,e){var i=this;return this.l_().then(function(){return i.XV(t).then(function(e){var n=i.p_(t,e);if(null!=n)return w.wn.XD(i.h_,n.id),w.wn.bn(i,n.id),r.HiveRequestFactory.bn(n.id,i.Fn()),n;throw new a(h.Xm,"error generating session")})}).catch(function(t){return t instanceof a?n.reject(t):n.reject(new a(h.Xm,"generic error resolving ticket"))})},t.prototype.$D=function(t){this.fz=t},t.prototype.f_=function(){return this.options_.initTimeout},t.prototype.ci=function(t,e){var i=e.manifest.toLowerCase(),n=t.toLowerCase(),r=i.indexOf(".ism/manifest");if(r>-1){var o=i.substring(0,r);if(n.indexOf(o)>-1)return n.indexOf(".ism/manifest(format=mpd-time-csf)")>-1?this.fz?(e.ticket.SourceURL=t,!0):this.dz(e,"The player does not use HiveRequest, downgrading to StatsJS"):this.dz(e,"Protocol not supported by HiveJsProxy tech, downgrading to StatsJS")}else if(n===i)return!!this.fz||this.dz(e,"The player does not use HiveRequest, downgrading to StatsJS");return!1},t.prototype.dz=function(t,e){var i=this;return t.tech=this.Vj,y.Hive.Reporting().initSession(t.ticket.ticketUrl,!1).then(function(e){t.Mn(e),e.ticket,i.te().debug("[HiveJSProxy] downgrade verified ticket "+t.ticket.ticketUrl),i.h_.wh(e)}).fail(function(t){v.ErrorMonitor.gi().di("Error initializing session when downgrading session tech",i.mn,{error:t})}),this.fz&&this.fz.tF(),this.fz=void 0,r.HiveRequestFactory.bn(t.id,g.StatsJS.c_),this.h_.te().warn("[HiveJsProxy] "+e),this.onError(new a(h.oE,e)),!0},t.prototype.Nn=function(t,e){var i=this;this.te().debug(this.id()+"Stopping session "+t.id+" [onUnload:"+e+"]");var n="//"+u.cO.oA+":"+u.cO.uO+"/proxy/"+t.id+"/stop";e&&m.sendBeacon?(m.sendBeacon(n),this.te().debug(this.id()+"session stopped ["+t.id+"][beacon]")):r.ps(n,null,!e).then(function(){i.te().debug(i.id()+"session stopped ["+t.id+"]"+(e?"[sync]":""))},function(n){i.te().warn(i.id()+"session close error ["+t.id+"]"+(e?"[sync]":""),n)})},t.prototype.On=function(t,e){var i=e?c._c.IDLE:c._c.Oc;this.te().debug(this.id()+"idle state: "+c._c[i])},t.prototype.g_=function(t,e){var i=this,o="playing-point="+e.Rs;o+="&buffer-length="+e.bs,o+="&total-buffering="+e.Ps,o+="&width="+e.width,o+="&height="+e.height,o+="&fullscreen="+e.tG;var s="//"+u.cO.oA+":"+u.cO.uO+"/proxy/"+t.id+"/stats/put?"+o;return r.ps(s).fail(function(t){return i.te().warn(i.id()+"error sending feedback to Hive Client",t),n.reject(t)})},t.prototype.E_=function(t,e,i){var o=this,s="//"+u.cO.oA+":"+u.cO.uO+"/proxy/"+t.id+"/event?type="+e;if(void 0!=i)for(var a in i)s+="&"+a+"="+i[a];return this.te().debug(this.id()+"event "+f.kc.$a[e],void 0!=i?i:""),r.ps(s).fail(function(t){return o.te().warn(o.id()+"error sending feedback event to Hive Client",t),n.reject(t)})},t.prototype.Nh=function(t,e){return n.resolve(!0)},t.prototype.onError=function(t){var e=!0;if(void 0!=this.options_.onError)try{e=this.options_.onError(t)}catch(t){v.ErrorMonitor.gi().di("exception in user-defined onError callback",this.id(),t)}return e},t.prototype.onActiveSession=function(t){var e=this.h_.b_();0===e.indexOf("//")&&(e=location.protocol+e);var i=r.gs(u.cO.KD,u.cO.oA,u.cO.uO,t.id,e);if(t.authenticationToken&&this.version>="3.0.1"?r.ds(i,JSON.stringify({authenticationToken:t.authenticationToken})):r.ps(i),this.wh(t),p.In.mi(this.te()),this.fz&&this.fz.rF(),this.Mee(t),void 0!=this.options_.onActiveSession)try{this.options_.onActiveSession(t.Dn())}catch(t){v.ErrorMonitor.gi().di("exception in user-defined onActiveSession callback",this.id(),t)}},t.prototype.A_=function(){},t.prototype.C_=function(){},t.prototype.k_=function(t){this.h_=t},t.prototype.id=function(){return"["+t.c_+"] "},t.prototype.Fee=function(e){void 0!=e[t.c_]&&r.vs(e[t.c_],this.options_)},t.prototype.XV=function(t){var e=this;this.te().debug(this.id()+"resolving ticket: "+t);var i=this.Bee(t),o=JSON.stringify(this.Uee());return r.ds(i,o,"application/json").then(function(i){var n=JSON.parse(i);return e.te().debug(e.id()+"resolved ticket "+t+" -> "+n.manifest),n},function(i){return e.te().warn(e.id()+"ticket "+t+" resolve error: "+i),n.reject(new a(h.Xm,i))}).catch(function(t){return t instanceof a?n.reject(t):n.reject(new a(h.sE,t))})},t.prototype.Bee=function(t){return t=encodeURIComponent(t),r.gs(u.cO.aA,u.cO.oA,u.cO.uO,t,"&",this.h_.tj())},t.prototype.p_=function(t,e){var i=new l.VA;i.AA(t);var n=new r.Bn(t,i,e.manifest,null);return n.O_=!0,n.id=e.sessionId,n.ticket.sessionId=n.id,n},t.prototype.Uee=function(){var t={};t.HiveConfig={};for(var e in window.HiveConfig){t.HiveConfig[e]={};for(var i in window.HiveConfig[e])t.HiveConfig[e][i]=window.HiveConfig[e][i]}return t},t.prototype.Mee=function(t){var e=this;if(void 0!==d.HiveConfig.Stats.render){var i="//"+u.cO.oA+":"+u.cO.uO+"/proxy/"+t.id+"/stats/get";if("undefined"!=typeof EventSource){var n=new EventSource(i);n.onmessage=function(t){e.xee(t.data)},n.onerror=function(t){n.close()}}else this.Hee=window.setInterval(function(){r.ps(i).then(function(t){e.xee(t)})},4e3)}},t.prototype.wh=function(t){var e=this,i="comm-version="+this.h_.mj();i+="&plugin-name="+this.h_.ej(),i+="&plugin-version="+this.h_.rj(),i+="&player-tech="+this.h_.Ej(),i+="&player-version="+this.h_.getPlayerVersion(),this.h_.Kj()&&(i+="&telemetry-id="+this.h_.Kj());var o=r.gs(u.cO.YD,u.cO.oA,u.cO.uO,t.id,i);return r.ps(o).fail(function(t){return e.te().debug(e.id()+"error sending player Info to Hive Client",t),n.reject(t)})},t.prototype.xee=function(t){try{var e=JSON.parse(t);for(var i in e)e.hasOwnProperty(i)&&(e[i].human=function(t){return t>1e6?(t/1e6).toFixed(2)+"MB":t>1e3?(t/1e3).toFixed(2)+"KB":t+"B"});d.HiveConfig.Stats.render(e)}catch(t){console.trace(t)}},t.prototype.te=function(){return this.h_.te()},t}();b.c_="HiveJsProxy",e.HiveJsProxy=b},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(20);!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(r.gn.ou.au);t.Dee=e}(t.ou||(t.ou={}))}(e.gn||(e.gn={}))},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(2),o=i(7),s=i(20),a=i(199),h=i(26),u=i(39),c=i(19),f=i(18),l=i(42),p=i(4),d=a.gn.ou,v=s.gn.ou.hu,g=h.gn.HiveTechError,y=h.gn.cE,w=i(51);e.qee=navigator;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(o.Bn),b=function(){function t(t,e){this.Nee=0,this.h_=t,this.options_=new d.Vee,this.Fee(e),o.ys(window.location.href,new v,this.options_)}return t.prototype.Fn=function(){return t.c_},t.prototype.getVersion=function(){return this.version},t.prototype.u_=function(){return!1},t.prototype.l_=function(){var t=this;if(null==this.Lee||Date.now()-this.Nee>1e4){var e=new w;e.Bh(navigator.userAgent);var i=e.NO();if("IE"===i.name&&i.version&&parseInt(i.version)<10)return r.reject(new g(y.nE,"Internet Explorer < v.10 not supported"));this.jee=Date.now(),this.Gee=0;var n="//"+u.tu.oA+":"+this.h_.options().monitorPort+"/version.json";this.te().debug(this.id()+"verifying Hive Client version"),this.Lee=o.ps(n).then(function(e){var i=JSON.parse(e);return t.state=i.state,t.version=i.version,"ready"===t.state?"developer"===t.version||t.version>=t.options_.minVersion?(t.Gee=Date.now(),t.te().debug(t.id()+"Hive Client ready - version "+t.version+" ["+(t.Gee-t.jee)+"]"),"ready"):(p.ErrorMonitor.gi().di("Client version requirement not satisfied",t.id(),{version:t.version,minVersion:t.options_.minVersion}),t.h_.Yj(new f.kc.Pc(null,f.kc.oh.rh)),r.reject(new g(y.aE,"version "+t.version))):(p.ErrorMonitor.gi().di("Cannot check version: client state not ready",t.id(),{state:t.state}),t.h_.Yj(new f.kc.Pc(null,f.kc.oh.th)),r.reject(new g(y.nE,"state "+t.state)))},function(e){var i="Client not reachable";return void 0!=e&&void 0!=e.status&&-1!=e.status&&(i="Client check returned error"),p.ErrorMonitor.gi().di(i,t.id(),void 0!=e&&void 0!=e.status&&-1!=e.status?{status:e.status}:void 0),t.h_.Yj(new f.kc.Pc(null,f.kc.oh.eh)),r.reject(new g(y.nE,i))}).catch(function(e){if(e instanceof g)return r.reject(e);var i="Error fetching Hive Client version";return p.ErrorMonitor.gi().di(i,t.id(),e),r.reject(new g(y.nE,i))}),this.Nee=Date.now()}return this.Lee},t.prototype.initSession=function(t,e){var i=this;return this.options_.minVersion!=u.tu.uA?this.l_().then(function(){return i.Qee(t).catch(function(t){return r.reject(t)})}):this.Qee(t).catch(function(t){return r.reject(t)})},t.prototype.f_=function(){return this.options_.initTimeout},t.prototype.ci=function(t,e){return t.indexOf(e.Kee)>-1},t.prototype.Nn=function(t,i){var n=this;this.te().debug(this.id()+"Stopping session "+t.id+" [complete close:"+i+"]");var r="//"+u.tu.oA+":"+this.h_.options().playerPort+"/session?action=stop";r+="&currentSession="+t.id,i&&(r+="&completeStop=true"),i&&e.qee.sendBeacon?(e.qee.sendBeacon(r),this.te().debug(this.id()+"session stopped ["+t.id+"][beacon]")):o.ps(r,null,!i).then(function(){n.te().debug(n.id()+"session stopped ["+t.id+"]"+(i?"[sync]":""))},function(e){n.te().warn(n.id()+"session close error ["+t.id+"]"+(i?"[sync]":""),e)})},t.prototype.On=function(t,e){this.Yee=e?c._c.IDLE:c._c.Oc,this.te().notice("[HiveComm] client state: "+c._c[this.Yee])},t.prototype.g_=function(t,e){if(this.Yee==c._c.IDLE)return r.resolve(!0);var i="playing-point="+e.Rs;i+="&buffer-length="+e.bs,i+="&total-buffering="+e.Ps,i+="&width="+e.width,i+="&height="+e.height,i+="&fullscreen="+e.tG;var n=t.Kee+"stats?"+i;return this.te().trace(n),o.ps(n)},t.prototype.E_=function(t,e,i){var n=this;if(!(e!==f.kc.$a.Za&&e!==f.kc.$a.HIDDEN||this.version&&("developer"===this.version||this.version>="2017")))return r.resolve(!0);var s=t.Kee+"player-event?type="+f.kc.$a[e];if(void 0!=i)for(var a in i)s+="&"+a+"="+i[a];return this.te().debug(this.id()+"event "+f.kc.$a[e],void 0!=i?i:""),o.ps(s).fail(function(t){return n.te().warn(n.id()+"error sending feedback event to Hive Client",t),r.reject(t)})},t.prototype.Nh=function(t,e){return r.resolve(!0)},t.prototype.wh=function(t){var e=this;if(this.zee())return this.te().warn("Player info not supported in this Java client version"),r.resolve(!0);var i="comm-version="+this.h_.mj();i+="&plugin-name="+this.h_.ej(),i+="&plugin-version="+this.h_.rj(),i+="&player-tech="+this.h_.Ej(),i+="&player-version="+this.h_.getPlayerVersion(),this.h_.Kj()&&(i+="&telemetry-id="+this.h_.Kj());var n=t.Kee+"player-info?"+i;return o.ps(n).fail(function(t){return e.te().debug(e.id()+"error sending player Info to Hive Client",t),r.reject(t)})},t.prototype.onError=function(t){var e=!0;if(void 0!=this.options_.onError)try{e=this.options_.onError(t)}catch(t){p.ErrorMonitor.gi().di("Exception in user-defined onError callback",this.id(),t)}return e},t.prototype.A_=function(t,e,i){var n={isReadyIn:this.jee,isReadyOut:this.Gee,leaseIn:this.Jee,leaseOut:this.Wee,resolveIn:this.Xee,resolveOut:this.Zee};void 0!==e&&null!=e&&(n.sessionId=e.id),void 0!==i&&(n.total=i);var r=JSON.parse(JSON.stringify(n));p.ErrorMonitor.gi().di(t.message,this.id(),r),this.h_.Yj(new f.kc.Pc(null,f.kc.oh.sh,n)),this.$ee()},t.prototype.onActiveSession=function(t){if(this.wh(t),o.Es.setItem("hiveActiveSessionId",t.id),void 0!=this.options_.onActiveSession)try{this.options_.onActiveSession(t.Dn())}catch(t){p.ErrorMonitor.gi().di("Exception in user-defined onActiveSession callback",this.id(),t)}},t.prototype.k_=function(t){this.h_=t},t.prototype.id=function(){return"["+t.c_+"] "},t.prototype.Fee=function(e){void 0!=e[t.c_]&&o.vs(e[t.c_],this.options_)},t.prototype.Qee=function(t){var e=this,i=(new Date).getTime();return this.ete(t).then(function(n){return n?e.tte(t,n,i):e.XV(t).then(function(n){return e.tte(t,n,i)})})},t.prototype.ete=function(e){var i=this;if(this.Jee=Date.now(),this.h_.options().useSessionCheck){var n="//"+u.tu.oA+":"+this.h_.options().playerPort+"/session?&action=check";n+="&hivePluginId="+this.h_.tj(),n+="&callback="+encodeURIComponent(e);var s=o.Es.getItem("hiveActiveSessionId");return o.Es.removeItem("hiveActiveSessionId"),s&&(n+="&currentSession="+s),this.rte(),o.ps(n).then(function(t){return i.Wee=Date.now(),t?i.ite(t,n,e,i.Jee):(i.te().debug(i.id()+"session allowed ["+(i.Wee-i.Jee)+"]"),!1)},function(e){if(400==e.status)return i.nte("bad request","error resolving ticket",e);if(401==e.status)return i.nte("unauthorized","error verifying the ticket",e);if(403==e.status){var n=t.ste(e,void 0,"session"),o=n?{ote:n}:void 0;return p.ErrorMonitor.gi().di("reports another active session",i.id(),o),i.h_.Yj(new f.kc.Pc(null,f.kc.oh.ih,o)),r.reject(new g(y.oE,"another active session"+(o?" ["+o.ote+"]":"")))}return 404==e.status?(i.te().debug(i.id()+"installed version does not support active session check"),i.Wee=Date.now(),!1):-1==e.status?(clearTimeout(i.ate),i.hte()):(p.ErrorMonitor.gi().di("unhandled error from Java",i.id(),{error:e.status}),i.h_.Yj(new f.kc.Pc(null,f.kc.oh.nh)),r.reject(new g(y.sE,e)))}).catch(function(t){return t instanceof g?r.reject(t):(p.ErrorMonitor.gi().di("unhandled error on requestLeaseDirect",i.id(),{error:t}),i.h_.Yj(new f.kc.Pc(null,f.kc.oh.nh)),r.reject(new g(y.sE,t)))}).finally(function(){clearTimeout(i.ate)})}return this.te().debug(this.id()+"Hive session check disabled - will directly resolve ticket (other active sessions may fail)"),r.resolve(!1)},t.prototype.nte=function(e,i,n){var o=t.ste(n,e);return p.ErrorMonitor.gi().di(i,this.id()),this.Zee=Date.now(),r.reject(new g(y.Xm,o))},t.ste=function(t,e,i){void 0===i&&(i="status");var n=e;if(t.body)try{n=JSON.parse(t.body)[i]}catch(t){}return n},t.prototype.XV=function(t){var e=this;this.Xee=Date.now(),this.te().debug(this.id()+"resolving ticket: "+t);var i=this.Bee(t);return o.ps(i,"application/json").then(function(n){return e.ite(n,i,t,e.Xee)},function(i){return i&&-1==i.status?e.hte():(p.ErrorMonitor.gi().di("error resolving ticket",e.id(),{ticket:t}),r.reject(new g(y.Xm,i)))}).catch(function(t){return p.ErrorMonitor.gi().di("error parsing ticket response",e.id(),t),r.reject(new g(y.sE,t))})},t.prototype.ite=function(t,e,i,n){var r=JSON.parse(t),s=o.cn(e,r.location);return r.version&&!this.version&&(this.version=r.version),this.Zee=Date.now(),this.te().debug(this.id()+"resolved ticket "+i+" -> "+s+" ["+(this.Zee-n)+"]"),s},t.prototype.tte=function(t,e,i){var n=this.p_(t,e);if(null!=n){var r=(new Date).getTime(),s=r-i;return s>=this.options_.warnSlowRespTimeout&&this.A_(new g(y.hE,this.id()+" The tech initialization took more than "+this.options_.warnSlowRespTimeout+" milliseconds"),n,s),o.HiveRequestFactory.bn(n.id,this.Fn()),n}throw new g(y.Xm,"error generating session")},t.prototype.p_=function(t,e){var i=new l.VA;i.AA(t);var n=new m(t,i,e,null);n.O_=!0;var r=u.tu.cA,o=r.exec(n.manifest);return null!=o?(n.Kee=o[1],n.id=o[5],n):null},t.prototype.Bee=function(t){var e=-1==t.indexOf("?")?"?":"&";return this.zee()?o.gs(u.tu.hA,u.tu.oA,this.h_.options().playerPort,t):o.gs(u.tu.aA,u.tu.oA,this.h_.options().playerPort,t,e,this.h_.tj())},t.prototype.rte=function(){var t=this;this.ate&&clearTimeout(this.ate),this.ate=setTimeout(function(){p.ErrorMonitor.gi().di("The Lease Request is taking more than "+t.options_.warnSlowRespTimeout+" secs",t.id())},this.options_.warnSlowRespTimeout)},t.prototype.$ee=function(){this.Jee=0,this.Wee=0,this.Xee=0,this.Zee=0},t.prototype.te=function(){return this.h_.te()},t.prototype.C_=function(){this.$ee()},t.prototype.hte=function(){var t=this,e="//"+u.tu.oA+":"+this.h_.options().monitorPort+"/version.json";return this.te().debug(this.id()+"checking if the monitor port is reachable"),o.ps(e).then(function(e){var i=JSON.parse(e);throw t.state=i.state,p.ErrorMonitor.gi().di("Verify client state",t.id(),{state:t.state}),t.h_.Yj(new f.kc.Pc(null,f.kc.oh.th)),new g(y.nE,"state "+t.state)}).fail(function(e){if(e instanceof g)return r.reject(e);if(e&&-1==e.status){var i="client not reachable";return t.h_.Yj(new f.kc.Pc(null,f.kc.oh.eh)),t.te().warn(t.id()+i),r.reject(new g(y.nE,i))}var i="VerifyClientState error";return p.ErrorMonitor.gi().di(i,t.id(),{error:e}),t.h_.Yj(new f.kc.Pc(null,f.kc.oh.th)),r.reject(new g(y.sE,i))})},t.prototype.zee=function(){return this.options_.supportLegacyClient&&(!this.version||this.version.substr(0,4)<"2016")},t}();b.c_="HiveJava",e.HiveJava=b},function(t,e,i){"use strict";var n=this&&this.Ns||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=i(20),o=i(39);!function(t){!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minVersion=o.tu.uA,e.initTimeout=6e4,e.warnSlowRespTimeout=5e3,e.supportLegacyClient=!1,e}return n(e,t),e}(r.gn.ou.au);t.Vee=e}(t.ou||(t.ou={}))}(e.gn||(e.gn={}))}])}]);